# StackOverflow 问答 11778000-11778999

# c - 应该是打印整数。打印地址

> ID：11778001
> 
> 赞同：0
> 
> 时间：2012-08-02T13:02:21.237
> 
> 标签：c, pointers

我正在关注 C 的 youtube 上的教程系列。在这个特定的视频（[第 1](http://www.youtube.com/watch?v=Yzha37XR2Rg)部分，[第 2 部分](http://www.youtube.com/watch?v=aOlYcam6aNM)）中，他制作了一个成绩单程序。据我所知，我的代码和他的完全一样，但是当我打印出成绩的整数时，它会打印出整数的地址。但它确实可以很好地打印出字符串。代码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    char *name;
    int science, history, math, english;

} reportCard;

void printReportCard(reportCard *rc);

int main() {
    reportCard r1;
    r1.name = "Daniel Pendergast";
    r1.science = "80";
    r1.history = "90";
    r1.math = "100";
    r1.english = "80";

    printReportCard(&r1);
    return 0;
}

void printReportCard(reportCard *rc) {
    int average = (rc->science + rc->history + rc->math + rc->english) / 4;
    printf("Student's name: %s\nScience grade: %i\nHistory grade: %i\nMath grade: %i\nEnglish grade: %i\nOVERALL GRADE: %i",
    rc->name, rc->science, rc->history, rc->math, rc->english, average);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T13:03:55.070

这些是将 char 指针分配给整数（如果不清楚，则无效）：

```
r1.science = "80";
r1.history = "90";
r1.math = "100";
r1.english = "80"; 
```

应该：

```
r1.science = 80;
r1.history = 90;
r1.math = 100;
r1.english = 80; 
```

你检查编译器警告了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:02:30.650

`r1.science = "80";`- 这将`80`作为字符串保留在文本段（只读数据）中，然后将该字符串的虚拟地址分配`80`给`r1.science`.

将值分配为整数，如下所示

```
r1.science = 80; 
r1.history = 90; 
r1.math = 100; 
r1.english = 80; 
```

# html - 谷歌浏览器，字体大小比其他浏览器小 1 px

> ID：11778005
> 
> 赞同：3
> 
> 时间：2012-08-02T13:02:39.570
> 
> 标签：html, css, firefox, google-chrome

在 chrome 中，字体似乎比 FF 和 IE 小 1px，我不明白为什么。使用的字体是“Georgia”，并且 CSS 或 HTML 中没有特定的浏览器命令，所以我无法弄清楚为什么 chrome 显示它的方式不同。

有没有人遇到过这个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:07:35.747

这可能基于各种因素。Chrome 和 Firefox 使用不同的字体渲染引擎，它们在 Windows 中解释 ClearType 字体设置的方式也不同。同样，不同的浏览器对未标记的文档应用不同的默认 CSS 样式，这可能会导致字体大小等方面的差异。您可以尝试使用 CSS 重置样式表之类的东西来解决一些问题，[http://www.cssreset.com/](http://www.cssreset.com/)但不能保证会解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:06:17.463

如果你想为每个浏览器实现相同的样式，你应该试试这个：

[站点向导](http://www.thesitewizard.com/css/excludecss.shtml)

当我遇到这个问题时，它对我帮助很大。也许这个问题有一个更优雅的解决方案，但这确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:13:35.870

在不同的浏览器和不同的系统之间，文本总是会有所不同。即使是同一个操作系统上的同一个浏览器也可能给出不同的结果，因为系统中存在文本渲染设置可能会影响外观

此外，字体大小并不是真正以像素为单位，而是以点为单位，因此浏览器将像素大小转换为点的方式可能有所不同。

# silverlight - 使用 ValueConverter 返回 StaticResource

> ID：11778009
> 
> 赞同：6
> 
> 时间：2012-08-02T13:03:07.137
> 
> 标签：silverlight, data-binding, ivalueconverter

我正在尝试为我的业务实体中的不同状态设置静态资源。这个想法是我可以使用值转换器来获取业务实体并根据算法返回相应的背景画笔。我希望资源是静态的，因此我可以在设计器中设计它们并手动切换它们以预览它在开发过程中的样子，但能够以编程方式使用它们。

目标是有一些沿着这些方向的东西：

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var data = value as DummyData;

        if (data == null)
            return null;

        //Find resources
        if (data.VarianceAmount >= 0)
            return StaticResources.HighBackground;
        else
            return StaticResources.LowBackground;
    } 
```

如果静态资源在层次结构的页面/控件/框架元素中声明，我如何从值转换器内部访问它？我已将值转换器设置为 DependencyObject，但我不确定如何从那里导航层次结构。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T14:09:57.047

诀窍是在创建转换器时将所需的资源值传递给转换器。

例如，

```
 public class CustomColorConverter : IValueConverter
  {
     public SolidColorBrush HighBackground { get; set; }
     public SolidColorBrush LowBackground { get; set; }

     // remaining implementation...
  } 
```

然后在您的 Xaml 资源部分中，您将声明它是这样的（当然使用您自己的资源）：

```
<local:CustomColorConverter x:Key="BackgroundConverter" 
    HighBackground="{StaticResource HighlightBrush}" 
    LowBackground="{StaticResource NormalBrush}" /> 
```

这具有可重复使用的优点。您可以使用新键创建另一个实例并定义不同的画笔。

此外，这几乎适用于任何东西，而不仅仅是 SolidColorBrushes；您也可以定义完整的样式或模板。

希望有帮助。

# c# - 如何使用 C# 获取 word 文档中的段落编号？

> ID：11778013
> 
> 赞同：2
> 
> 时间：2012-08-02T13:03:36.310
> 
> 标签：c#, ms-word, docx

我使用程序集 Microsoft.Office.Interop.Word；

我的文档是一个 Microsoft.Office.Interop.Word.Document 对象，我想获取该文档中每个段落的编号。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:41:30.283

你需要这样的东西：

```
 object misValue = System.Reflection.Missing.Value;
    Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
    object docPth = @"c:\tmp\aDoc.doc";
    Microsoft.Office.Interop.Word.Document aDoc = wordApp.Documents.Open(ref docPth, ref misValue, ref misValue,
        ref misValue, ref misValue, ref misValue, ref misValue, ref misValue, ref misValue, ref misValue,
        ref misValue, ref misValue, ref misValue, ref misValue, ref misValue, ref misValue);
    wordApp.Visible = true;
    foreach (Microsoft.Office.Interop.Word.Paragraph aPar in aDoc.Paragraphs)
    {
        Microsoft.Office.Interop.Word.Range parRng = aPar.Range;
        string sText = parRng.Text;
        string sList = parRng.ListFormat.ListString;
        int nLevel = parRng.ListFormat.ListLevelNumber;
        MessageBox.Show("Text = " + sText + " - List = " + sList + " - Level " + nLevel.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:06:21.130

在开始使用`Microsoft.Office.Interop.Word`library/dll 之前，您必须阅读该库的文档。

在这里阅读：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraphs_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.paragraphs_members.aspx)

此外，取决于您使用的 Office 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:50:41.177

如果您有一个 Document 对象，您已经可以获取文档中每个段落的“编号”或“索引”。比如你需要获取文档中第二段的Text，你说：

```
MSWord.Application app = (MSWord.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Word.Application");
MSWord.Document doc = app.ActiveDocument; //the document that's on screen and 'active'

Console.WriteLine("Paragraph Count: " + doc.Paragraphs.Count); //show total number of paragraphs available in document.
Console.Write Line("Paragraph number 2 text: " + doc.Paragraphs[2].Range.Text);               //show text of paragraph number 2

Console.ReadLine(); 
```

如果这没有帮助。请...编辑您的问题。在您澄清之前，我们真的无能为力。

# c# - 从 C# 打印标签 - 文档大小对于打印机来说太大

> ID：11778014
> 
> 赞同：4
> 
> 时间：2012-08-02T13:03:40.070
> 
> 标签：c#, printing

我正在开发一个必须打印标签的应用程序。我使用的标签打印机是 Brother QL-570。标签宽度为 66mm，标签长度需约为 45mm。我遇到的问题是我无法将应用程序配置为实际打印标签。每次这样做时，我都会收到一条警告，指出文档尺寸对于打印机来说太大。无论我尝试将 PrintDocument 大小更改为什么尺寸，我总是收到一条警告，指出文档为 90 毫米 x 29 毫米，对于标签打印机来说太大了。

这只是我的尝试之一：

```
private PrintDocument label;

label = new PrintDocument();
PaperSize pS = new PaperSize("Custom Size", 212, 67);
label.DefaultPageSettings.PaperSize = pS;
label.PrinterSettings.PrinterName = "Brother QL-570";
label.PrinterSettings.DefaultPageSettings.PaperSize = pS;
label.PrintPage += new PrintPageEventHandler(label_PrintPage);

private void label_PrintPage(object sender, PrintPageEventArgs e)
{

    SolidBrush brush = new SolidBrush(Color.Black);
    Font header = new Font(FontFamily.GenericSansSerif, 12.0F, FontStyle.Bold);

    e.Graphics.DrawString("Hello World", header, brush, 30, 30);

} 
```

有谁知道我哪里出错了？我想我可能错误地为文档和打印机设置了纸张尺寸。我尝试了许多其他纸张尺寸，但无济于事。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:45:10.707

问题不是编程问题，而是打印机配置问题。默认情况下，打印机配置为使用与我使用的不同的纸张尺寸。感谢你的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T21:20:59.717

谢谢。您的评论帮助我解决了类似的问题。看来，这些 Brother 标签打印机显然忽略了 PageSettings 属性。一旦您开始工作，请尝试在其中添加一些狂野的值。完全无视——疯了！设置一个足够大的打印区域并确保您在正确的矩形内绘图，您会没事的。

# c++ - 在 c++11 中重新绑定 lambda ......有可能吗？

> ID：11778016
> 
> 赞同：4
> 
> 时间：2012-08-02T13:03:50.900
> 
> 标签：c++, lambda, c++11

我有一种情况，我有一个 lambda 作为由某个函数调用创建的成员变量。问题是它将此作为其操作的一部分。稍后，我希望能够复制整个对象......

但是，在复制时，我不知道 lambda 是如何创建的（它可以通过不同的代码路径在多个位置定义）。因此，我对在复制构造函数中放入什么感到有些茫然。理想情况下，我想将 lambda 的捕获“重新绑定”到创建的新“this”。

这是可能吗？

这是一些示例代码：

```
#include <iostream>
#include <string>
#include <functional>

class Foo
{
  public:

    Foo () = default;
    ~Foo () = default;

    void set (const std::string & v)
    {
        value = v;
    }

    void set ()
    {
        lambda = [&]()
        {
            return this->value;
        };
    }

    std::string get ()
    {
        return lambda();
    }

    std::string value;
    std::function <std::string (void)> lambda;
};

int main ()
{
    Foo foo;

    foo.set ();
    foo.set ("first");

    std::cerr << foo.get () << std::endl; // prints "first"

    foo.set ("captures change");

    std::cerr << foo.get () << std::endl; // prints "captures change"

    Foo foo2 (foo);
    foo2.set ("second");

    std::cerr << foo.get () << std::endl; // prints "captures change" (as desired)
    std::cerr << foo2.get () << std::endl; // prints "captures change" (I would want "second" here)

    return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:23:14.757

您看到的问题是`this`指针被捕获到 lambda 中，但您现在正在执行来自另一个对象的函数副本。它在您的示例中有效，因为两个对象都存在，但它是一个等待发生的悬空指针。

最干净的方法是修改您`std::function`和您的 lambda 以获取指向类的指针的参数，并使用传入的指针而不是捕获它。根据 lambda 的内容，您可以选择捕获这些值。

```
class Foo
{
  public:

    Foo () = default;
    ~Foo () = default;

    void set (const std::string & v)
    {
        value = v;
    }

    void set ()
    {
        lambda = [](Foo* self)
        {
            return self->value;
        };
    }

    std::string get ()
    {
        return lambda(this);
    }

    std::string value;
    std::function <std::string (Foo*)> lambda;
}; 
```

[IDEOne](http://ideone.com/U9q4y)的示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:21:47.700

我不认为你可以修改关闭。如果需要函数对另一个对象进行操作，则需要将指向该对象的指针作为参数传递给函数：

```
class Foo
{
  public:

    Foo () = default;
    ~Foo () = default;

    void set (const std::string & v)
    {
        value = v;
    }

    void set ()
    {
        lambda = [](Foo* t)
        {
            return t->value;
        };
    }

    std::string get ()
    {
        return lambda(this);
    }

    std::string value;
    std::function <std::string (Foo*)> lambda;
}; 
```

# javascript - 在 RadWindow 中加载新页面，然后从加载的表单中关闭窗口

> ID：11778020
> 
> 赞同：0
> 
> 时间：2012-08-02T13:03:54.380
> 
> 标签：javascript, telerik

我有一个 page1.aspx 页面，它通过 javascript 打开一个 RadWindow，在 radwindow 内我正在加载一个 page2.aspx，代码如下

第 1 页代码：

```
function test() {
  var wnd = window.radopen("page2.aspx", null);
  wnd.setSize(500, 400);
} 
```

如何通过单击按钮从 page2.aspx 关闭 radwindow？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:28:32.787

获取对它的引用并调用它的 close() 方法。请参阅这些文章： [http](http://www.telerik.com/help/aspnet-ajax/window-programming-opening-from-within-dialog.html) ://www.telerik.com/help/aspnet-ajax/window-programming-opening-from-within-dialog.html和 [http://www.telerik.com/help/aspnet-ajax/窗口编程-radwindow-methods.html](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html)

在代码中： function GetRadWindow() { var oWindow = null; if (window.radWindow) oWindow = window.radWindow; 否则 if (window.frameElement.radWindow) oWindow = window.frameElement.radWindow; 返回窗口；}

函数 closeMe() { GetRadWindow().close(); 返回假；}

# java - 对 Java 方法签名的完全限定引用

> ID：11778032
> 
> 赞同：3
> 
> 时间：2012-08-02T13:04:55.183
> 
> 标签：java

在 Java 中编写对方法名称的完全限定引用的*正确方法是什么？*

1.  `Message[] com.sun.mail.imap.IMAPFolder#addMessages(Message[])`
2.  `Message[] com.sun.mail.imap.IMAPFolder.addMessages(Message[])`
3.  其他方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:08:57.770

如果方法的签名是`Message[] addMessages(Message[] msgs)`...

...而班级名称是`IMAPFolder`...

...而且它在包装`com.sun.map.imap`中...

...那么完全限定的方法名称将是`com.sun.map.imap.IMAPFolder.addMessages(Message[] msgs)`.

可见的类/实例变量共享相同的模式，尽管为了 OO 设计，这通常是不鼓励的。

通常，人们只关心完全限定的对象名称，而不是方法/[instance|class] 变量名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T11:15:30.860

你可以找到官方正确的语法

*   对于 Java7，位于 [http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.2)
*   对于 Java8，位于 [http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.2)
*   对于 Java6，位于 [http://docs.oracle.com/javase/specs/jvms/se6/html/ClassFile.doc.html#14757](http://docs.oracle.com/javase/specs/jvms/se6/html/ClassFile.doc.html#14757)

# java - 抽象泛型类的集合，原始类型警告

> ID：11778034
> 
> 赞同：2
> 
> 时间：2012-08-02T13:04:58.447
> 
> 标签：java, generics, abstract, raw-types

我有以下类层次结构：

```
public abstract class Property<T>
{
    private long id;
    private String name;
    private T value;

    /*setters and getters*/
}

public class NumberProperty extends Property<Integer>

public class TextProperty extends Property<String> 
```

...和一个包含`List<Property> properties`. 我得到“ `Property is raw type. References to generic type Property<T> should be parametrized`”。我知道为什么，但我想列出几个已知类型的属性（属性不能被实例化，因为它是抽象类）。

我的问题是：我可以忽略警告还是应该更改我的代码（如何？）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:06:50.997

`Property<?>`如果您不关心它是哪种类型的对象，请使用这将指示编译器您知道自己在做什么。

```
List<Property<?>> list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:09:45.240

由于这是一个警告，您可以随时选择忽略它；）。

警告通知您，当您拥有 时`List<Property>`，您不知道课堂`<T>`上的`Property`。如果你不确定，你可以用`List<Property<?>>`来表示任何事情都会做。

请参阅 Oracles[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/)以了解有关此主题的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:08:36.090

Java 中的集合是同质的，因此将不同类型的值放入其中是错误的。请注意，这`Property<Integer>`与层次无关`Property<String>`——这是两种不同的类型，Java 类型系统将无法表示您的列表，其中一些属性是字符串和一些整数。您唯一的选择是失去类型安全性。

# php - mysql db中不同字段的复选框值

> ID：11778035
> 
> 赞同：-4
> 
> 时间：2012-08-02T13:05:23.690
> 
> 标签：php, mysql

如何将复选框值发布到 mysql db 的不同字段。请查看代码。在我的代码中，我有 18 个选项可供选择。我有一个包含 18 个字段的表。我只想将这些值放在相应的列中。这里是编码。

```
 <?php
    if(!empty($_POST['subjects'])) {
        foreach($_POST['subjects'] as $check) {
                echo $check."<br>"; 
        SQL query ???
        }
    }
    ?>

<form action="check.php" method="post">
<input type="checkbox" name="subjects[]" value="PakistanStudies" />
<input type="checkbox" name="subjects[]" value="Islamiat" />
<input type="checkbox" name="subjects[]" value="Urdu(SyllabusA)" />
<input type="checkbox" name="subjects[]" value="Urdu(SyllabusB)" />
<input type="checkbox" name="subjects[]" value="Mathematics" />
<input type="checkbox" name="subjects[]" value="AdMathematics" />
<input type="checkbox" name="subjects[]" value="Sociology" />
<input type="checkbox" name="subjects[]" value="ReligiousStudies" />
<input type="checkbox" name="subjects[]" value="EnglishLanguage" />
<input type="checkbox" name="subjects[]" value="EnglishLiterature" />
<input type="checkbox" name="subjects[]" value="Chemistry" />
<input type="checkbox" name="subjects[]" value="Physics" />
<input type="checkbox" name="subjects[]" value="PrinciplesofAccounting" />
<input type="checkbox" name="subjects[]" value="Economics" />
<input type="checkbox" name="subjects[]" value="BusinessStudies" />
<input type="checkbox" name="subjects[]" value="Biology" />
<input type="checkbox" name="subjects[]" value="Statistics" />
<input type="checkbox" name="subjects[]" value="World History" />
<input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:21:00.677

要通过 PHP 连接到 SQL 数据库，您可以使用 MySQLi 扩展。首先，确保您在 PHP.ini 文件中启用扩展并重新启动您的 Web 服务器以使更改生效。

您应该在 PHP.ini 中找到这一行：

```
;extension=php_mysqli.dll 
```

并将其更改为：

```
extension=php_mysqli.dll 
```

请参阅有关如何使用[MySQLi 扩展](http://php.net/manual/en/book.mysqli.php)的文档。但是连接到服务器并插入数据的快速模拟示例如下：

```
<?php
$mysqli = new mysqli($servername, $username, $password, $database);

// Ensure connection
if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

if ($mysqli->query($sqlCommabnd) === TRUE) {
    // Query was successful!
}

// Disconnect
$mysqli->close();
?> 
```

确保为服务器名、用户名、密码、数据库和 sqlCommand 变量赋值。

我不确定我是否已经回答了您的问题，但只是为了确定；您的 SQL 语句将类似于： INSERT INTO table_name VALUES (val1, val2, val3...) 并注意您可以通过将列放在括号中的 VALUES 关键字之前显式指定列，如下所示： INSERT INTO table_name (col1, col2 , col3...) 值 (val1, val2, val3...)

最后; 确保一切顺利。您的 HTML 表单应该位于一个页面上，并且该页面的操作设置为另一个（或者可能是相同的）页面。当 Submit 事件被触发时，页面将重定向（或刷新）。因此，请确保您的操作指向包含所有 PHP 的页面以使其正常工作。

如果您想知道 POST 数据寻找什么复选框。尝试以下操作： print_r($_POST["subjects"]); 这应该让您了解数组的结构。

如果您还有其他问题，请告诉我，我很乐意为您解答。

**编辑 - 在评论后帮助回答**

注意：在以下情况下，我假设这些复选框的列是布尔类型。

在数据库中插入或更改复选框的值为列名的字段；尝试构造以下 SQL 语句（在需要时更改它）：

```
<?php
$columns = "";
$values = "";
foreach($_POST["subjects"] as $checkedValue)
{
    $columns .= $checkedValue . ", ";
    $values .= "true, ";
}

$sqlCommand = "INSERT INTO table (".substr($columns,0,-2).") VALUES (".substr($values,0,-2).");";

echo $sqlCommand;
?> 
```

# python - 当 URL 存在时与 Django 进行 NoReverseMatch

> ID：11778036
> 
> 赞同：2
> 
> 时间：2012-08-02T13:05:32.213
> 
> 标签：python, django, url, exception

在模板中，我有`{% url "news.views.article" article=article.id %}`where article.id 是当前正在显示的文章的 ID。我的 urls.py 包含以下内容：

```
url(r'^news/$', 'news.views.index'),
url(r'^news/article/(?P<article>\d{1,4})/$', 'news.views.article'), 
```

但是，当我加载包含上述模板标签的页面时，我得到了这个：

```
NoReverseMatch at /news/
Reverse for '"news.views.article"' with arguments '()' and keyword arguments '{'article': 2}' not found. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:17:11.953

尝试在视图定义周围不加引号。

```
 {% url news.views.article article=article.id %} 
```

您已经定义了视图名称，因此这应该通过按名称调用函数来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:10:15.943

视图名称两边加引号的语法仅适用于 Django 1.5。由于您可能使用的是旧版本，因此您应该删除引号，或在模板中添加：

```
{% load url from future %} 
```

然后使用引号。

有关弃用的更多信息 - [Django 1.3 发行说明](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

# css - 影响整个内容的不透明度

> ID：11778038
> 
> 赞同：0
> 
> 时间：2012-08-02T13:05:41.900
> 
> 标签：css, twitter, opacity

twitter 是如何实现这种透明度的？

![在此处输入图像描述](../Images/8acf9fa928160395fc90dc8d2cfdddc6.png)

我尝试为我的代码添加不透明度，但每个子元素都受到影响。我的目标有点像上图。我该怎么做？不透明度是正确的CSS规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:06:54.400

尝试使用`RGBa`代替`opacity`来达到这个效果。opacity 属性强制所有子元素也变得透明，并且没有很多简单的方法可以解决这个问题。RGBa 使元素透明，但所有子元素保持不变。

**例子：**

```
div {
   background: rgba(10, 10, 10, 0.5); 
} 
```

RGBa 中的前三个数字代表 RGB 值中的颜色；第四个代表透明度，应该在 0.0 和 1.0 之间（类似于 opacity 属性）。

[JS 小提琴示例](http://jsfiddle.net/BJgj6/)

[RGB 颜色图表](http://www.tayloredmktg.com/rgb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:07:03.400

背景颜色：rgba(255,255,255,.5);

[http://www.css3.info/preview/rgba/](http://www.css3.info/preview/rgba/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:07:11.707

CSS 不透明度将始终以这种方式工作。您始终可以使用半透明 png 作为背景。

# php - 获取特定帖子类型的标签

> ID：11778040
> 
> 赞同：0
> 
> 时间：2012-08-02T13:05:58.323
> 
> 标签：php, mysql, wordpress

我正在尝试查询 WordPress 数据库以获取特定帖子类型的帖子标签。

到目前为止，我有这个，它给了我所有的标签，但我不确定如何将其限制为特定的帖子类型，或者是否可能。

```
$query = "SELECT name FROM wp_terms";
$myrows = $wpdb->get_results( $query );

foreach ( $myrows as $myrow ) 
{
    print_r($myrow);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:09:19.743

为了限制您的查询，您可以使用[WHERE](http://en.wikipedia.org/wiki/Where_%28SQL%29)子句，即

```
$query = "SELECT name FROM wp_terms WHERE *post_type*=*typeyouwant*"; 
```

也可以使用[LIKE](http://www.techonthenet.com/sql/like.php)子句，但这会导致查询速度非常慢。

# c - 大型 3D 阵列的动态分配

> ID：11778050
> 
> 赞同：3
> 
> 时间：2012-08-02T13:06:32.330
> 
> 标签：c, multidimensional-array

我正在做一个需要创建 3D 数组、一些 2D 和 1D 数组的项目。3D 数组表示空间中的离散坐标，我需要很多点来解决我的问题。数组大小约为 2000*2000*2000。我需要在这些数组中存储“双”值。任何人都可以提出一个有效的方案来在 C 中实现这一点吗？

提前致谢

```
/***********************************************************
 *  Copyright Univ. of Texas M.D. Anderson Cancer Center
 *  1992.
 *
 *  Some routines modified from Numerical Recipes in C,
 *  including error report, array or matrix declaration
 *  and releasing.
 ****/
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <malloc.h>

/***********************************************************
 *  Report error message to stderr, then exit the program
 *  with signal 1.
 ****/
void nrerror(char error_text[])

{
  fprintf(stderr,"%s\n",error_text);
  fprintf(stderr,"...now exiting to system...\n");
  exit(1);
}

/***********************************************************
 *  Allocate an array with index from nl to nh inclusive.
 *
 *  Original matrix and vector from Numerical Recipes in C
 *  don't initialize the elements to zero. This will
 *  be accomplished by the following functions.
 ****/
double *AllocVector(short nl, short nh)
{
  double *v;
  short i;

  v=(double *)malloc((unsigned) (nh-nl+1)*sizeof(double));
  if (!v) nrerror("allocation failure in vector()");

  v -= nl;
  for(i=nl;i<=nh;i++) v[i] = 0.0;   /* init. */
  return v;
}

/***********************************************************
 *  Allocate a matrix with row index from nrl to nrh
 *  inclusive, and column index from ncl to nch
 *  inclusive.
 ****/
double **AllocMatrix(short nrl,short nrh,
                     short ncl,short nch)
{
  short i,j;
  double **m;

  m=(double **) malloc((unsigned) (nrh-nrl+1)
                        *sizeof(double*));
  if (!m) nrerror("allocation failure 1 in matrix()");
  m -= nrl;

  for(i=nrl;i<=nrh;i++) {
    m[i]=(double *) malloc((unsigned) (nch-ncl+1)
                        *sizeof(double));
    if (!m[i]) nrerror("allocation failure 2 in matrix()");
    m[i] -= ncl;
  }

  for(i=nrl;i<=nrh;i++)
    for(j=ncl;j<=nch;j++) m[i][j] = 0.0;
  return m;
}

/***********************************************************
 *  Allocate a 3D array with x index from nxl to nxh
 *  inclusive, y index from nyl to nyh and z index from nzl to nzh
 *  inclusive.
 ****/
double ***Alloc3D(short nxl,short nxh,
                     short nyl,short nyh,
                         short nzl, short nzh)
{
  double ***t;
  short i,j,k;

  t=(double ***) malloc((unsigned) (nxh-nxl+1)*sizeof(double **));
  if (!t) nrerror("allocation failure 1 in matrix()");
  t -= nxl;

  for(i=nxl;i<=nxh;i++) {
    t[i]=(double **) malloc((unsigned) (nyh-nyl+1)*sizeof(double *));
    if (!t[i]) nrerror("allocation failure 2 in matrix()");
    t[i] -= nyl;
    for(j=nyl;j<=nyh;j++) {
         t[i][j]=(double *) malloc((unsigned) (nzh-nzl+1)*sizeof(double));
         if (!t[i][j]) nrerror("allocation failure 3 in matrix()");
         t[i][j] -= nzl;}

  }

  for(i=nxl;i<=nxh;i++)
    for(j=nyl;j<=nyh;j++)
       for(k=nzl; k<=nzh;k++) t[i][j][k] = 0.0;
  return t;
}
/***********************************************************
 *Index to 3D array.
 ****/
long index(int x, int y, int z, int Size)
{
     return (Size*Size*x + Size*y + z);
}
/***********************************************************
 *  Release the memory.
 ****/
void FreeVector(double *v,short nl,short nh)
{
  free((char*) (v+nl));
}

/***********************************************************
 *  Release the memory.
 ****/
void FreeMatrix(double **m,short nrl,short nrh,
                short ncl,short nch)
{
  short i;

  for(i=nrh;i>=nrl;i--) free((char*) (m[i]+ncl));
  free((char*) (m+nrl));
}

/***********************************************************
 *  Release the memory.
 ****/
void Free3D(double ***t,short nxl,short nxh,
                short nyl,short nyh, short nzl, short nzh)
{
  short i,j;

  for(i=nxh;i>=nxl;i--)
   {for(j=nyl;j>=nyl;j--) free((char*) (t[i][j]+nzl));
    free((char*) (t[i]+nyl));
   }
  free((char*) (t+nxl));
}

***********************************************************************************

void InitOutputData(InputStruct In_Parm, OutStruct * Out_Ptr)
{
  short nz = In_Parm.nz;
  short nr = In_Parm.nr;
  short na = In_Parm.na;
  short nl = In_Parm.num_layers;
  short size = nr/2*nr/2*nz;
  /* remember to use nl+2 because of 2 for ambient. */

  if(nz<=0 || nr<=0 || na<=0 || nl<=0)
    nrerror("Wrong grid parameters.\n");

  /* Init pure numbers. */
  Out_Ptr->Rsp = 0.0;
  Out_Ptr->Rd  = 0.0;
  Out_Ptr->A   = 0.0;
  Out_Ptr->Tt  = 0.0;

  /* Allocate the arrays and the matrices. */
  //Out_Ptr->Rd_ra = AllocMatrix(0,nr-1,0,na-1);
  //Out_Ptr->Rd_r  = AllocVector(0,nr-1);
  //Out_Ptr->Rd_a  = AllocVector(0,na-1);

  Out_Ptr->A_xyz1 = AllocVector(0,size-1);
  Out_Ptr->A_xyz2 = AllocVector(0,size-1);
  Out_Ptr->A_xyz3 = AllocVector(0,size-1);
  Out_Ptr->A_xyz4 = AllocVector(0,size-1);
  Out_Ptr->A_xz  = AllocMatrix(0,nr-1,0,nz-1);
  Out_Ptr->A_z   = AllocVector(0,nz-1);
  Out_Ptr->A_l   = AllocVector(0,nl+1);

  Out_Ptr->Tt_ra = AllocMatrix(0,nr-1,0,na-1);
  Out_Ptr->Tt_r  = AllocVector(0,nr-1);
  Out_Ptr->Tt_a  = AllocVector(0,na-1);
} 
```

以上是分配数组的代码和调用它们的函数。失败的调用是 'Out_Ptr->A_xyz1 = AllocVector(0,size-1);' 当尺寸大于约时。7000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:57:48.153

如果它们在运行时是固定大小（或至少是固定的最大大小）并且它们大于物理 RAM，那么您也可以使用内存映射文件。访问至少与 RAM+swap 一样快，并且您可以免费将数据序列化到磁盘。您还可以映射总体上大于地址空间的映射文件的区域（即窗口）视图。

如果您需要大量单元格，因为您需要某些区域的高细节，但不均匀，您可以考虑使用八叉树。然后，您可以在某些部分中逐步存储更精细的分辨率，并且您可以选择重新排序以优化对 3D 附近区域的访问——这在 CFD 或医学成像等领域非常常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:02:34.193

这是 mmap 的完美用例！您的阵列是 64 GB - 太大了，无法同时放入 RAM。幸运的是，我们可以强制内核为我们完成所有繁重的工作。

这是一些（诚然未经测试的）代码：

```
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <string.h>
#include <stdio.h>

#define ARRAY_SIZE ((off_t)2000*2000*2000*8)

static inline off_t idx(off_t x, off_t y, off_t z)
{
    return 2000*2000*x + 2000*y + z;
}

int main()
{
    int fd = open("my_huge_array.dat", O_RDWR | O_CREAT | O_TRUNC);

    // We have to write to the end of the file for the size to be set properly.
    lseek(fd, ARRAY_SIZE - 1, SEEK_SET);
    write(fd, "", 1);

    double* my_huge_array = mmap(NULL, ARRAY_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);

    // Now play with the array!
    my_huge_array[idx(4, 7, 9)] = 12;
    my_huge_array[idx(0, 0, 0)] = my_huge_array[idx(4, 7, 9)] * 2;

    // Close it up. Don't leak your fd's!
    munmap(my_huge_array, ARRAY_SIZE);
    close(fd);
    remove("my_huge_array.dat");
    return 0;
} 
```

# php - PHP MySQL WAMP - 数据库错误

> ID：11778056
> 
> 赞同：0
> 
> 时间：2012-08-02T13:06:53.900
> 
> 标签：php, mysql, wampserver

当我通过本地主机启动网站时，出现以下错误：

**数据库错误：未知数据库 'db_name'**

我正在挖掘问题所在。该网站属于我的一个朋友，他希望我将网站连接到数据库。数据库位于根目录中。我只是想连接到它。

在大多数 PHP 文件中，都有一个标签，其中包含包含数据库详细信息的配置文件。

关于如何让它工作并解决**数据库错误：未知数据库'db_name'**错误的任何想法？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:33:57.887

数据库不应驻留在根目录中，应将其导入数据库（Mysql）服务器。

签入Mysql数据库，你的数据库是否驻留在那里？如果没有，您可以通过 phpMyAdmin 或导航到您的 mysql 并导入它来执行此操作。

在mysql中创建数据库并通过打开命令行终端导入sql文件如下：

`/path/to/mysql/bin > mysql -u username -p < /path/to/root/db.sql`

# css - 绝对定位和媒体查询

> ID：11778064
> 
> 赞同：1
> 
> 时间：2012-08-02T13:07:24.917
> 
> 标签：css, layout, css-position, media-queries

我正在研究一个非常基本的需要响应的单页布局。它由一个大的背景图像和绝对定位在它周围的 2-3 个 div 组成。[http://www.reversl.net/demo/](http://www.reversl.net/demo/)我使用绝对定位的原因是因为背景图像的高度需要变化，但文本框需要始终与图像底部保持相同的距离。

我还需要在页面的右下方放置一个徽标。在桌面设备上查看时一切正常。但在智能手机上，由于屏幕较小，我需要使用媒体查询将徽标放置在文本下方。现在问题来了....因为文本 div 是绝对定位的....徽标在较小的屏幕上隐藏在其后面。我最初的想法是从顶部给徽标一个绝对位置，以便它始终出现在屏幕尺寸为 320 像素及以下的文本框下方。但是，文本框的高度需要有所不同，所以我不能这样工作。

我的问题是...如何放置徽标，使其始终出现在 320px 宽及以下的屏幕尺寸的文本框下方（无论文本框高度如何）？

```
#bg {
max-width: 100%;
margin: 0;
padding: 0;
position: relative;
}

#title {
margin: 0;
padding: 0;
color: #f0f0f0;
background: #333;
margin: 0;
padding: .5em 1em;
width: 250px;
position: absolute;
top: -2%;
text-align: center;
}

#content {
background: #333;
width: 250px;
position: absolute;
top: 85%;
padding: .5em 1em;
color: #888;
text-align: center;
border: 1px solid #444;
}

footer {
margin: 0;
padding: 0;
}

.logo {
float: right;
width: 50px;
height: 25px;
border: 1px solid #444;
text-align: center;
padding: .5em;
color: #666;
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {

#title {top: -17%;line-height: 1;}
} 
```

[移动设备上的所需布局](http://i.stack.imgur.com/sRZgt.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T00:44:56.433

I'm sure you figured this out by now - but one approach that can sometimes be useful is to put the same logo twice in the HTML and show or hide the one you want depending upon the width. I find this to be more maintainable, and obviously if the image has the same URL then there's minimal overhead. Absolute positioning is no fun.

```
// mobile
@media only screen and (max-width : 319px) 
{
   .logo.right-justified 
   {
       display: none;     // hide right logo
   }
}

// desktop
@media only screen and (min-width : 320px) 
{
   .logo.underneath
   {
       display: none;     // hide bottom logo
   }
} 
```

# html - 如何在不指定名称的情况下在ajax中传递所有表单元素

> ID：11778065
> 
> 赞同：0
> 
> 时间：2012-08-02T13:07:25.320
> 
> 标签：html, ajax

在我的应用程序中，我有一个动态生成的表单。在单击按钮时，我必须使用 Ajax 将所有这些表单元素发送到另一个页面。由于表单是动态生成的，因此在调用 ajax 时我无法指定表单元素名称。

有没有办法在 Ajax 中不指定元素名称的情况下传递所有表单元素。可以作为元素数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:58:46.590

```
$.post('ajaxurl', $('#form_id').serialize(), function(data) {
     // do something with data
}); 
```

# javascript - 如何使用 JavaScript 制作用户当前位置的谷歌地图

> ID：11778068
> 
> 赞同：1
> 
> 时间：2012-08-02T13:07:36.473
> 
> 标签：javascript, html, google-maps, geolocation, geocoding

我检查了我的问题的解决方案，但我得到的只是谷歌分配给静态经度和纬度的代码。

这是JavaScript代码：

```
var map = new google.maps.Map(mapDiv, {
    center: new google.maps.LatLng(37.4419, -122.1419),
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}); 
```

我想根据用户位置使其动态化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:31:28.240

你可以试试这个...

[http://netmera.com/location/js/geolocation.js](http://netmera.com/location/js/geolocation.js) 添加`geolocation.js`脚本你的html然后下面的代码试试。

```
$.geolocation.find(function(location) {
 var lat = location.latitude;
 var lng = location.longitude;

  var map = new google.maps.Map(mapDiv, {
    center: new google.maps.LatLng(lat, lng),
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:18:52.887

您可以通过 HTML5 GeoLocation API（参见[此处](http://www.sitepoint.com/using-the-html5-geolocation-api/)的示例代码）获取用户的经度和纬度并传递检索到的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:31:02.270

您将需要使用 HTML5 Geolocation API。因素数量：用户必须允许您的网站收集有关您的位置的信息，如果他不允许，您将无法收集信息。其次，即使是信息也不总是准确的。在收集位置信息时，API 使用了许多资源，包括在您当前的 IP 地址处发送页面的服务器的位置，或者如果用户在启用 GPRS 的设备上查看您的网站，它可能会使用用户的 GPRS 服务。无论哪种情况，您获得确切位置的机会都不大，您几乎总是可以期待一个大概的位置。

# python - 更快地浏览大型 Python 代码库

> ID：11778071
> 
> 赞同：14
> 
> 时间：2012-08-02T13:07:47.013
> 
> 标签：python, vim, codebase

作为程序员，我们读的比写的多。我开始在一家使用几个“大”Python 包的公司工作。具有高 KLOC 的软件包或软件包系列。举个例子：佐佩。

我的问题是我无法快速/轻松地导航此代码库。我目前的策略是

*   我开始阅读我需要更改/理解的模块
*   我遇到了一个我需要了解更多信息的导入
*   我通过在导入后放置 Python 调试 (pdb) 语句并回显模块来找出该导入的源代码在哪里，它告诉我它是源文件
*   我在 shell 或 Vim 文件资源管理器中导航到它。
*   大多数时候，模块本身会导入更多模块，在我知道之前，我已经“在我的盘子里”有 10KLOC

或者：

*   我看到一个我需要了解更多的方法/类
*   我在整个代码库中搜索（ack-grep）该方法/类的定义（这可能很痛苦，因为代码库部分位于 ~/.buildout-eggs 中）
*   我找到了定义该方法/类的一段或多段代码
*   我必须推断出其中哪一个是我需要阅读的

这会花费大量时间，这对于大型代码库是可以理解的。但我觉得*导航*一个庞大且未知的 Python 代码库是一个很常见的问题。

所以我正在寻找解决这个问题的技术工具或战略解决方案。...

我*无法*想象铁杆 Python 程序员会使用上述策略。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T19:44:54.997

在 Vim 上，我喜欢 NERDTree（文件浏览器）和 taglist.vim（源代码浏览器 --> [http://www.vim.org/scripts/script.php?script_id=273](http://www.vim.org/scripts/script.php?script_id=273)）

同样在 Vim 中，您可以使用 CTRL-] 跳转到定义 (:h CTRL-])：

1.  下载旺盛的 ctags [http://ctags.sourceforge.net/](http://ctags.sourceforge.net/)
2.  按照安装说明将其放在 PATH 的某个位置
3.  从源代码的“根”目录中，从 shell 创建一个标签文件：“ctags -R”
4.  （确保你有 :set noautochdir，并确保 :pwd 是`root`第 3 步中的目录）
5.  进入 Vim，将光标悬停在某个函数或类名上，按 CTRL-]

默认情况下，如果标签有多个匹配项，它会在任何地方显示它被导入的地方，以及它被声明的地方

如果标签只有一个匹配，它会立即跳转到它

...然后使用 Ctrl+O 和 Ctrl+I 从您所在的位置来回移动

（对你使用的特定库的源代码重复上述步骤，我通常会打开一个单独的 Vim 窗口来学习东西）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T13:18:24.697

我用ipython的？？命令

您只需要弄清楚如何导入您要查找的内容，然后添加 ?? 以模块或类或函数或方法名的结尾查看它们的源代码。命令完成也有助于找出长名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T17:40:44.483

试试红色药丸：[https ://github.com/klen/python-mode](https://github.com/klen/python-mode)

# c# - 几个构造函数的链接c#

> ID：11778073
> 
> 赞同：2
> 
> 时间：2012-08-02T13:07:50.430
> 
> 标签：c#

我做了一些谷歌搜索，但找不到任何东西。所以我实现了一些使用中间构造函数的东西。

但是，我想知道是否可以同时链接多个构造函数（base + this）。

这是我当前的（简化的）代码：

```
public BlaNode(Node Previous, Node Next) : base(Previous, Previous)
{
    this.Blas = new HashSet<BlaDiBla>();
}
public BlaNode()
    : this(null, null)
{

}
public BlaNode(Node Previous, Node Next, string Bla)
    : this(Previous, Previous)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:15:03.107

据我所知，这是不可能的。您可以为此使用静态工厂方法。[http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

```
private BlaNode(Node Previous, Node Next) : base(Previous, Previous)
{
    //whatever you do
}

public static BlaNode BlaNodeFactory()
{
    return new BlaNode(null, null);
}

public static BlaNode BlaNodeFactory(Node Previous, Node Next, string Bla)
{
    return new BlaNode(Previous, Previous);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:12:21.440

> 是否可以同时链接多个构造函数（base + this）

不可以。您可以将任一侧链 ( `this`) 并多次这样做，或者“向上” ( `base`) 仅一次。

请注意，该符号与构造函数主体的执行顺序密切相关。

您`BlaNode(Node, Node)`是“选择”基本构造函数的那个​​。假设`BlaNode()`允许选择*不同*的基本构造函数。这只会导致混淆将使用哪些 ctor(s) 以及使用哪些参数。

所以我看不到任何收获，肯定会有弊端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:13:41.087

不，您一次只能在 C# 构造函数初始化程序中调用一个构造函数。该[文档](http://msdn.microsoft.com/en-us/library/aa645603.aspx)也仅引用了另一个要调用的构造函数：

> **所有实例构造函数 (...) 都包含对另一个实例构造函数**(... ) 的调用。**隐式调用的构造**函数由构造函数初始化器确定：

`private`如果您不希望任何其他代码调用它，则可以创建中间构造函数。

# javascript - 从远程网站解析 xml 数据

> ID：11778074
> 
> 赞同：4
> 
> 时间：2012-08-02T13:07:50.780
> 
> 标签：javascript, jquery, html, xml, ajax

我想从远程网站[http://services.faa.gov/airport/status/IAD?format=xml](http://services.faa.gov/airport/status/IAD?format=xml)解析 xml 数据...但我无法解析 xml 数据，我只得到错误. 但我能够解析来自同一个远程网站[http://services.faa.gov/airport/status/IAD?format=json](http://services.faa.gov/airport/status/IAD?format=json)的 JSON 数据。我用来解析 xml 数据的代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Aviation</title>
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    var result;
    function xmlparser() {
        $.ajax({
            type: "GET",
            url: "http://services.faa.gov/airport/status/IAD?format=xml",
            dataType: "xml",
            success: function (xml) { 
                result = xml.city;
                document.myform.result1.value = result;
            },
            error: function (xml) {
                alert(xml.status + ' ' + xml.statusText);
            }
        });             
    }        
</script>    
</head>
<body>
<p id="details"></p>
<form name="myform">
    <input type="button" name="clickme" value="Click here to show the city name" onclick=xmlparser() />
    <input type="text" name="result1" readonly="true"/>        
</form>
</body>
</html> 
```

自从我打印了错误消息以来，我只在警报框中收到错误消息“o Error”。请任何人帮忙解析来自远程网站的 xml 数据。 **注意**：我也有“城市”而不是“城市”，但它不起作用......在此先感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:56:15.037

解决方案很简单（在[Pekka](https://stackoverflow.com/users/187606/pekka)的评论中提到）

1.在您的服务器上添加一个文件`IAD_proxy.php`

2.将以下代码放入其中

```
header("Content-type: text/xml; charset=utf-8");
echo file_get_contents('http://services.faa.gov/airport/status/IAD?format=xml'); 
```

3.将`url`您的 Ajax 请求中的 更改为`IAD_proxy.php`.

如果您使用任何其他服务器端语言，请尝试实现相同的想法。

**编辑：**请阅读[Parsing XML With jQuery](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)，这是我尝试过的，它正在工作。

Javascript：

```
$.ajax({
        type: "GET",
        url: "IAD_proxy.php",
        dataType: "xml",
        success: function (xml) { 
            alert($(xml).find('City').text());
        },
        error: function (xml) {
            alert(xml.status + ' ' + xml.statusText);
        }
    }); 
```

在这里我试过了`document.write($(xml).find('City').text());`

![在此处输入图像描述](../Images/a9df7ba033a9e223f00e3425732d8e70.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:37:50.077

I don't believe that will work since the service is still returning xml. jsonp is expecting a n object literal as an argument to pass to the callback. I believe if you run this locally you'll realize there's no data being consumable in your success. Try this

```
$.ajax({
    type: "GET",
    url: "http://services.faa.gov/airport/status/IAD?format=json",
    dataType: "jsonp",
    success: function (data) {
        document.myform.result1.value = data.city;
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(errorThrown);
    }
}); 
```

Here is the example for creating a proxy with asp.net mvc 3\. I just created an action that returns a ContentResult which maps to a string but I define the content type as text/xml. This simply just makes a webrequest to the service and reads the stream in to a string to send back in the response.

```
[HttpGet]
public ContentResult XmlExample()
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://services.faa.gov/airport/status/IAD?format=xml");
    string xml = null;
    using (WebResponse response = request.GetResponse())
    {
        using (var xmlStream = new StreamReader(response.GetResponseStream()))
        {
            xml = xmlStream.ReadToEnd();
        } 
    }

    return Content(xml, "text/xml");
} 
```

Your xmlParser function will look like this:

```
<script type="text/javascript">
    var result;
    function xmlparser() {
        $.ajax({
            type: "GET",
            url: "XmlExample",
            dataType: "xml",
            success: function (xml) {
                result = $(xml).find("City").text();
                document.myform.result1.value = result;
            },
            error: function (xml) {
                alert(xml.status + ' ' + xml.statusText);
            }
        });             
    }        
</script> 
```

jQuery ajax's converts the data by using $.parseXML internally which removes the requirement for us to even call this in the success block. At that point you have a jQuery object that you can use it's default DOM functions to find the City Node.

Make sure to replace the **XmlExample** with the url that it maps to based on your controller.

# php - 从会话数组中删除特定行

> ID：11778075
> 
> 赞同：0
> 
> 时间：2012-08-02T13:07:53.250
> 
> 标签：php

我是php的初学者。我想知道如何删除 php 会话数组中的特定行（不是从数据库中删除，而是仅从页面中删除）。我有一个表，即具有列 issue_id 和 issue_descrp 的问题。该页面显示有一个表格，其中每一行都包含问题及其对应的 id。每行也包含一个删除按钮。我想要的是当我单击按钮时从页面中删除相应的行。这是我的 php 代码：

```
 <?php

    foreach($_SESSION['meeting_issues'] as $meeting_issues)
        {
            $query="select issue_id,issue from issues where issue_id='$meeting_issues'";
            $result=$_SESSION['connection']->query($query) or die (mysql_error());
            while($row = $result->fetch_assoc())
            {?>
                <?php $issue_id=$row['issue_id']; ?>
                <tr><td><?php echo $row['issue_id']; ?></td><td><?php echo $row['issue']; ?></td><td><input type="button" name="<?php echo $row['issue_id']; ?>" id="button" value="Remove"/></td>
                </tr>
                <?php
            }       
        }
        ?> 
```

希望我的问题很清楚。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:11:58.170

使用 unset 删除数组元素，例如`$_SESSION`

[http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

不要以这种方式删除整个会话，而是使用它

[http://php.net/manual/en/function.session-unset.php](http://php.net/manual/en/function.session-unset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:17:44.780

要删除页面本身上的一行，您需要`Javascript`或`jQuery`。建议使用 jQuery，因为它提供了所有可能性，并且比普通的 Javascript 更易于使用。

jQuery：

```
$("#button").parents("tr:closest").remove(); 
```

Javascript：

```
document.getElementById('button').parentNode.parentNode.parentNode.removeChild(document.getElementById('button').parentNode.parentNode); 
```

正如你所看到的，jQuery 更快更容易输入。

您正在为按钮使用 ID，但 ID 始终相同。我建议为此使用类，因为 ID 在页面上应该是唯一的。

[jQuery网站](http://jquery.com/)

# c++ - 重载placement new 运算符的额外成本是多少？

> ID：11778079
> 
> 赞同：0
> 
> 时间：2012-08-02T13:08:14.973
> 
> 标签：c++, performance, g++, operator-overloading, placement-new

我们想要重载placement new 操作符，只是为了验证使用的内存大小对于给定的类是否足够。我们知道这个尺寸。构造或多或少是这样的：

```
template <size_t MAXSIZE>
class PlacementNewTest {
public:
  void* operator new (size_t size, void* where)
  {
     if (size > MAXSIZE) {
        throw bad_alloc();
     }
     return where;
  }
}; 
```

假设在这种简化的上下文中使用：

```
char buffer[200];

class A : public PlacementNewTest<sizeof buffer> {
public:
   char a[100];  
};

class B : public A {
public:
   char b[200];  
};

int main() {
   A* a = new (buffer) A; // OK
   a->~A();
   B* b = new (buffer) B; // throwed bad_alloc
   b->~B();
} 
```

在测试阶段，我使用了这个 PlacementNewTest<> 类，但在发布代码中我考虑将其删除。你认为，根据你的经验，如果不删除这个额外的测试类，这将花费我们多少性能？这是验证的唯一成本`if (size > MAXSIZE)`吗？换句话说，这种重新定义的性能损失是多少：

```
class PlacementNewNOP {
public:
  void* operator new (size_t size, void* where)
  {
     return where;
  }
}; 
```

也许这在这个问题上并不重要——但是：这是而且必须是 C++03。我们无法升级到 C++11。而 boost 也不是一个选项，只有 C++03。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:12:57.990

除了比较之外，不应该有任何开销，除非您使用虚拟方法，否则绑定是静态的。

当然有异常开销，但既然这是不应该发生的事情，你应该安全地忽略它。

# jquery - JQuery 无法删除带有附加事件处理程序的元素

> ID：11778081
> 
> 赞同：1
> 
> 时间：2012-08-02T13:08:19.953
> 
> 标签：jquery, events

这可能很容易，但我无法弄清楚......

我正在尝试动态构建模态通知窗口，其结构为：

```
<!-- the overlay to disable the screen interaction -->
<div id="modalWrapper"></div>

<!-- the actual window where I put the contents in dynamically -->
<div id="modalWindow"></div> 
```

我正在使用 JQuery 构建的结构是：

```
<h1>Error</h1><h5>test</h5><ul class="buttons"><li class="left"><a class="button red small">Close</a></li></ul> 
```

我也在动态附加一个事件处理程序：

```
a.bind('click', function() {
    // hide wrapper and modal
    $('#modalWindow').hide();
    $('#modalWrapper').hide();
    callback();
}); 
```

回调函数作为对构建模式窗口的函数的引用传递。

当我调用“显示”功能时 - 它会构建窗口并显示它，但它只能工作一次。对它的任何连续调用都失败了

```
$('#modalWindow').empty(); 
```

无法移除绑定了事件的元素（即节点）。

我试过了：

```
$('#modalWindow').empty();
$('#modalWindow').remove();
$('#modalWindow a').each(function(index, item) { $(item).unbind('click');});
$('#modalWindow a').each(function(index, item) { $(item).remove();}); 
```

并且所有这些都失败并显示相同的错误消息：

```
TypeError: handleObj is undefined
()jquery-1.7.2.js (line 3057)
()jquery-1.7.2.js (line 6524)
()jquery....min.js (line 9)
()jquery-1.7.2.js (line 5906)
()xxxxxxxxxxx.js (line 392)
()xxxxxxxxxxx.js (line 282)
[Break On This Error]   

if ( ( mappedTypes || origType === handleObj.origType ) && jquery-1.7.2.js (line 3057 
```

有人可以阐明如何清空#modalWindow，以便在下一次通知时再次填充它吗？

我已经用这个复制了这个问题：

```
var x = $('<a/>').html('clickme').attr('id','some_id').bind('click',function() {$(this).remove();});
$('body').append(x); 
```

但是请注意，上面的单行错误带有相同的消息，但我的应用程序中的实际执行流程不同。我正在构建所有 HTML 并绑定一个“隐藏”模式元素的事件。然后在下一次迭代中，我试图“清空”模态容器并在其中“插入”新项目，这就是它出错的地方——所以我没有删除包含当前正在执行的处理程序的项目。我试图在下一次迭代中删除它。

提前致谢。

**另一个更新 - 仅供参考** 似乎 JQuery 的事件调度程序或它周围的一些代码中可能存在错误。

```
Object.prototype.someFunctionName = function(param) {
   alert('test');
}
var x = $('<a/>').html('clickme').attr('id','some_id').bind('click',function() {$(this).remove();});
$('body').append(x); 
```

导致每次在任何元素上触发“click”时都会执行 someFunctionName，并且参数不匹配会导致 JQuery 阻塞并出错。

如果我们这样定义 someFunctionName ：

```
Object.prototype.someFunctionName = function() {
   alert('test');
}
var x = $('<a/>').html('clickme').attr('id','some_id').bind('click',function() {$(this).remove();});
$('body').append(x); 
```

它有效，但每次仍然执行 - 这是错误的......我将在 JQuery 的网站上发布 - 谢谢大家。

作品：http: [//jsfiddle.net/tinnerdxp/AU4pm/](http://jsfiddle.net/tinnerdxp/AU4pm/)

不起作用：http: [//jsfiddle.net/tinnerdxp/Pvax2/](http://jsfiddle.net/tinnerdxp/Pvax2/)

tinnerdxp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:37:21.710

## [tinnerdxp](https://stackoverflow.com/users/1134452/tinnerdxp)的回答：

谢谢大家，最后是我的代码。我已经像这样扩展了 Object.prototype：

```
Object.prototype.isSet = function(property) {
    if (!(property in this)) {
        return false;
    } else {
        return true;
    }
}

Object.prototype.isArray = function() {
    if (this.constructor.toString().indexOf('Array') == -1) {
        return false;
    } else {
        return true;
    }
} 
```

第一个扩展实际上是在破坏它。这有点奇怪：

*   JQuery 没有在任何地方使用 .isSet - 所以我没有覆盖任何核心功能
*   将 isSet 重命名为 amIset 之类的愚蠢的东西 - 仍然没有修复它
*   删除 isSet - 尽管我仍然有 .isArray() ，但已修复它 - 并且它与剩下的那个一起工作正常。

我在上面放置的复制代码 - 当我执行我的库（和扩展）时确实不起作用 - 所以在这里发布它是错误的。

不过一般来说：

*   感谢 Blazemonger 的建议让我做出了决定
*   Anthony - 这也是一个非常好的指针 - 因为我最初怀疑范围问题。

多谢你们。

# dotnetnuke-6 - 只能将 ScriptManager 的一个实例添加到页面 Dotnetnuke 6.2 错误

> ID：11778092
> 
> 赞同：1
> 
> 时间：2012-08-02T13:08:41.013
> 
> 标签：dotnetnuke-6, dotnetnuke-module

大家好，我正在 dotnetnuke 6.2 中开发一个门户。我正在为项目开发自定义模块。我在 ascx 文件中使用 ajax 控件进行模块开发。但是在运行应用程序时，它显示**只有一个 ScriptManager 实例可以添加到页面**错误中。但是我没有在哪里使用脚本项目经理。我在网上搜索过。没有确切的解决方案。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:50:28.087

如果您在 DotNetNuke 网站的根目录中打开 Default.aspx.cs 页面，您可以看到：

```
var scriptManager = ScriptManager.GetCurrent(Page);
if (scriptManager == null)
{
  scriptManager = new ScriptManager();
  Page.Form.Controls.AddAt(0, scriptManager);
} 
```

ScriptManager 在 DotNetNuke 的主页上...

# copy - 批处理文件删除所有用户主目录中的文件夹

> ID：11778093
> 
> 赞同：1
> 
> 时间：2012-08-02T13:08:45.227
> 
> 标签：copy, cmd

我需要删除所有用户主目录中名为“我的设置”的文件夹，然后我需要将其目录的所有内容复制到新服务器上的新位置。有谁知道如何最好地执行此操作，并且可以帮助我正确编写脚本来完成此任务？

我正在使用 Windows Server 2003 R2，我最终通过运行“dir”命令并获取用户列表来管理它，然后将其放入 excel 中，然后生成一个可以为我完成任务的 indervidual 命令 'rmdir \servername\user $\我的设置'

问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T08:28:13.310

我正在使用 Windows Server 2003 R2，我最终通过运行“dir”命令并获取用户列表来管理它，然后将其放入 excel 中，然后生成一个可以为我完成任务的 indervidual 命令 'rmdir \servername\user $\我的设置'

# ruby-on-rails - 无法用 font-awesome 的字体覆盖 bootstrap-sass 的字体

> ID：11778097
> 
> 赞同：8
> 
> 时间：2012-08-02T13:08:53.343
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass, font-awesome

我正在使用 bootstrap-sass 和 font-awesome ( [https://github.com/littlebtc/font-awesome-sass-rails](https://github.com/littlebtc/font-awesome-sass-rails) ) 宝石。我想从 font-awesome 覆盖引导字体设置。

从 font-awesome 的网站我可以覆盖引导默认值，如果我只是在引导导入之后导入。

```
@import 'bootstrap';
@import 'font-awesome'; 
```

我已经完成了上述操作，但是 font-awesome 的字体并没有被覆盖。我已将我的项目推送到 github - [https://github.com/murtaza52/rails-base](https://github.com/murtaza52/rails-base)。该网址可在 localhost:3000/posts 上访问

如果有人可以帮助我用 font-awesome 的字体覆盖引导程序的默认字体，我将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T12:40:33.963

修改你`application.css.scss`的样子如下

```
@import "font-awesome";
$baseFontFamily: 'FontAwesome';
@import "bootstrap";

...

@import "bootstrap-responsive";
//@import "scaffolds";
@import "posts"; 
```

**为什么？**

1.  您`import "font-awesome"`在顶部移动然后定义`baseFontFamily`，因为这是 bootstrap 用来`font-family`为所有元素定义的内容。检查中间的[排版和链接](http://twitter.github.com/bootstrap/scaffolding.html)块。如果您`import bootstrap`在此之后，`FontAwesome`将默认使用。
2.  您应该删除`import "scaffolds";`行，因为`scaffolds.css.scss`它将重置您的字体系列，`body`该元素将被所有其他元素继承。

如果您无法避免在引导之前导入它。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T12:03:48.890

对于那些使用 Bootstrap 3.2+（我猜）的人，这里是您可以修改的 SASS 变量列表：

[https://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/bootstrap/_variables.scss](https://github.com/twbs/bootstrap-sass/blob/master/assets/stylesheets/bootstrap/_variables.scss)

在我们的例子中，我们要确保`$font-family-base`在做之前定义`@import "bootstrap"`。

通过`$font-family-base`在到达下面的行之前设置，Bootstrap 使用我们的`$font-family-base`代替（否则，它默认为`$font-family-base-serif`，也在`variables.scss`上面定义）。

`$font-family-base: $font-family-sans-serif !default;`

这就是我的 application.css.sass 的样子

```
/*
 *= require_tree .
 *= require_self
 */

@import "fonts"
@import "compass"
@import "bootstrap" 
```

而且我有以下内容`_fonts.css.sass`（您不必将其放在单独的文件中）

`$font-family-sans-serif: 'Roboto', verdana, arial, sans-serif`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:57:23.930

我不知道这是否对您有帮助，但至少有时当模板代码看起来有效时，您需要使用 ctrl+shirt+r 强制刷新浏览器以查看更改（至少在 mozilla 中有效）。

# xcode - 为什么 iPad 默认启动图像方向不起作用（iOS 5）？

> ID：11778100
> 
> 赞同：2
> 
> 时间：2012-08-02T13:08:54.873
> 
> 标签：xcode, ipad, ios-simulator

存在许多与启动图像有关的问题（一些已经回答）。我使用启动图像本身没有问题。当尝试支持启动图像的多个方向（我的应用程序的纵向或横向）时，我的问题就出现了。

问题是这样的：

当我启动我的应用程序开发时，我使用通常的 default.png 作为启动图像。

但现在我有 4 个不同的启动图像（肖像和风景，加上他们的视网膜版本）。但是，由于这些启动图像的名称不同，无论设备处于什么方向，我都会看到启动黑屏。

我为此花了一天时间。我决定只使用一个 default.png（视网膜肖像），因为我意识到启动图像只持续几秒钟，而且无论如何都不是很重要。

唉，好奇心害死我了。

注意：图像命名如下（注意它们是小写的，它们也放在 /images 文件夹下而不是项目根文件夹下）：

default-portrait.png default-portrait@2x.png default-landscape.png default-landscape@2x.png

问题：

我究竟做错了什么？就像我说的，我浏览了很多关于这个问题的在线参考资料。他们都没有帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:13:03.547

这是因为您将它们放入子文件夹中。

[该文件](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)指出：

> 所有启动图像都必须是 PNG 文件，并且必须位于应用程序包目录的顶层。

您使用小写文件名的事实看起来也有点狡猾......

# postgresql - postgresql DB中唯一键的正确数据类型是什么？

> ID：11778102
> 
> 赞同：30
> 
> 时间：2012-08-02T13:09:01.240
> 
> 标签：postgresql, database-design, data-warehouse, sqldatatypes

我应该为 postgresql 数据库表中的唯一键（例如用户的 ID）选择哪种数据类型？
bigint 是一个吗？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-02T13:22:18.400

使用该`serial`类型自动增加唯一 ID。

如果您计划拥有超过 20 亿个条目，请使用`bigserial`. `serial`是 MySQL 的 PostgresSQL 等价物`AUTO_INCREMENT`。

[PostgresSQL 文档：数字类型](http://www.postgresql.org/docs/9.0/static/datatype-numeric.html#DATATYPE-SERIAL)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T13:22:37.747

`bigint`（或者`bigserial`如果您需要自动递增键）就可以了。

如果**确定**您不会加载太多行，您可能会考虑（或常规）并可能节省一些硬盘空间*。*`integer``serial`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-01T15:41:05.237

根据[这个答案](https://stackoverflow.com/a/55300741)，当前推荐的自动递增唯一 ID 的方法是使用`generated as identity`语法而不是`serial`.

这是一个例子：

```
-- the old way
create table t1 (id serial primary key);

-- the new way
create table t2 (id integer primary key generated always as identity); 
```

# perl - grep 正则表达式到 perl 或 awk

> ID：11778103
> 
> 赞同：7
> 
> 时间：2012-08-02T13:09:03.010
> 
> 标签：perl, awk, solaris, pcre, nawk

我一直在使用 Linux env，最近迁移到了 solaris。不幸的是，我的一个 bash 脚本需要`grep`与`P`switch [pcre support] 一起使用。由于 Solaris 不支持`pcre`grep 选项，我不得不找到另一个解决方案。而且`pcregrep`似乎有一个明显的循环错误和 `sed` `-r`选项不受支持！我希望在solaris上使用`perl`or`nawk`能解决问题。

我还没有`perl`在我的脚本中使用过，也不知道它的语法和标志。

既然是`pcre`，我相信`perl`脚本编写者可以在几分钟内帮助我。它们应该匹配多行。

`awk` 就效率或解决方案而言，哪一个是更好的解决`perl`方案？

感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:17:54.623

这些是您可能需要的一些转换`grep`：`perl`

`grep -P PATTERN FILE(s)` ---> `perl -nle 'print if m/PATTERN/' FILE(s)`

`grep -Po PATTERN FILE(s)` ---> `perl -nle 'print "$1\n" while m/(PATTERN)/g' FILE(s)`

这是我对您要查找的内容的猜测，如果不可能的话`grep -P`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:59:24.857

这是一个矮个子：

```
 grep -P /regex/ ====> perl -ne 'print if /regex/;' 
```

*   将`-n`文件的每一行作为输入。每一行都放入一个特殊的 perl 变量中，称为`$_`Perl 循环整个文件。
*   `-e`说 Perl 程序在命令行上，而不是向它传递一个文件。
*   如果您没有指定Perl 命令打印出其他任何内容，则Perl`print`命令会自动打印出其中的任何内容。`$_`
*   将`if /regex/`正则表达式与`$_`变量中文件的任何行匹配。

# asp.net - 不同的 NT 组返回本地/服务器

> ID：11778105
> 
> 赞同：0
> 
> 时间：2012-08-02T13:09:08.557
> 
> 标签：asp.net, nt

我有两个函数列出了 ASP.NET 应用程序上的用户 NT 组

```
Private Function getUserGroups() As Boolean
        ' collect the user domain and identity
        Dim arr As String() = System.Web.HttpContext.Current.Request.LogonUserIdentity.Name.Split("\"c)

        Dim al As New ArrayList()
        al = GetGroups()

        For Each s As String In al
            testt.InnerHtml += s & "<br />"   
        Next

        Return auth
    End Function

    Public Function GetGroups() As ArrayList
        Dim groups As New ArrayList()
        For Each group As System.Security.Principal.IdentityReference In System.Web.HttpContext.Current.Request.LogonUserIdentity.Groups
            groups.Add(group.Translate(GetType(System.Security.Principal.NTAccount)).ToString())
        Next
        Return groups
    End Function 
```

在本地运行（开发模式）时，我得到的列表比在远程服务器上运行时长得多：

```
Local:

DOMAIN_EX\Domain Users
Everyone
BUILTIN\Administrators
BUILTIN\Users
NT AUTHORITY\INTERACTIVE
CONSOLE LOGON
NT AUTHORITY\Authenticated Users
NT AUTHORITY\This Organization
LOCAL
DOMAIN_EX\Eg12w
DOMAIN_EX\Eg12
DOMAIN_EX\SEC_PGP_CommunicationsGroup
DOMAIN_EX\More

Remote:

Everyone
BUILTIN\Users
CONSOLE LOGON
NT AUTHORITY\Authenticated Users
NT AUTHORITY\This Organization
LOCAL 
```

任何人都可以解释差异以及我如何解决这个问题，因为我正在尝试使用组数组来验证用户权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:34:35.943

通过在 IIS 中禁用匿名身份验证来解决此问题。

# objective-c - Youtube url 未在 MPMovieplayerController 固定框架中播放

> ID：11778106
> 
> 赞同：0
> 
> 时间：2012-08-02T13:09:11.903
> 
> 标签：objective-c, xcode

我正在解析一个包含您的电子管提要的 json 提要，我在其中尝试在固定框架中播放 youtube。当我单击按钮时，我得到黑色背景，你们可以帮助我吗？下面是代码

```
-(void)watchClip:(id)sender
{
NSLog(@"hello how should this be:%@",URL);
 NSURL *fileURL=[NSURL URLWithString:[URL   stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];   
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];  
moviePlayerController.view.frame=CGRectMake(28,15,250,130);  
[[NSNotificationCenter defaultCenter] addObserver:self  
                                         selector:@selector(moviePlaybackComplete:)  
                                             name:MPMoviePlayerPlaybackDidFinishNotification  
                                           object:moviePlayerController];  
   //moviePlayerController.fullscreen = YES;  

  [v addSubview:moviePlayerController.view];

[moviePlayerController play];  

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:21:30.570

`MPMoviePlayerController`无法播放 YouTube 视频。改用 a `UIWebView`。

[使用 MPMoviePlayerController 而不是 UIWebView 播放 YouTube 视频](https://stackoverflow.com/questions/1779511/play-youtube-videos-with-mpmovieplayercontroller-instead-of-uiwebview)

这是一个关于如何在固定框架中播放 youtube 视频的[好教程。](http://iphoneincubator.com/blog/audio-video/how-to-play-youtube-videos-within-an-application)请注意，如果您在模拟器中运行，它将无法工作。

# javascript - 如何更改扰流板的选择器？

> ID：11778107
> 
> 赞同：1
> 
> 时间：2012-08-02T13:09:14.493
> 
> 标签：javascript, css

我正在尝试更改扰流板，但我的 javascript 代码有问题

这是剧透：http: [//nathan3000.altervista.org/Jdownloader%20Spoiler/zzzz.html](http://nathan3000.altervista.org/Jdownloader%20Spoiler/zzzz.html)

1.  当我单击图像“MAC”时，扰流板打开。当我再次点击 MAC 时，扰流板关闭。但是当我在文本之间单击时，扰流板再次关闭。**我不希望在我单击文本中间时关闭扰流板，** *但只有在我单击图像“MAC”时才会关闭。*

    **如何更改选择器，使其仅在单击图像时显示/隐藏？**
    我还在点击里面`.OS container`

2.  我不明白为什么在线版本上没有表格边框，而在本地版本上我可以看到表格的边框。

剧透的javascript代码是这样的：

```
<script type="text/javascript">                                         
 $(document).ready(function(){
 $(".nonjs").removeAttr( "href"); //href is needed for users without JS
 $('.OS').click(function(){
 if($(this).find(".details").is(":visible"))
 {
   $(this).find(".details").not(":hidden").hide("slow");
   return true;
 }
 else
 {

   $(this).find(".details").show("slow");
   return false;
 }
 });
 });  
 </script>     
 <style type="text/css">
 <!--
.details {
display: none;
clear: both;
padding: 2px;
}
.nonjs{
    cursor:pointer;
}
img {
border: 0px;
}
-->
</style> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:28:02.593

put your spoiler/ popdown menu directly after your .OS image. right now your popdown is a child of the .OS container, so clicks on it are passed to the .OS click handler.

here is something like you want:

[http://tempesthostingservices.com/t/zzzz.html](http://tempesthostingservices.com/t/zzzz.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:21:04.317

*这是有效的：*

```
 $(document).ready(function(){
     $(".nonjs").removeAttr( "href"); 
    //href is needed for users without JS

     $('.OS').click(function(e){
               if(!$(e.target).parents('.details').length){
                            if($(this).find('.details').is(":visible"))
                            {
                                $(this).find('.details').not(":hidden").hide("slow");
                                return true;
                            }
                            else
                            {

                                $(this).find('.details').show("slow");
                                return false;
                            }
              }
    });
     }); 
```

# emacs - Emacs 和 vala 模式

> ID：11778110
> 
> 赞同：1
> 
> 时间：2012-08-02T13:09:24.623
> 
> 标签：emacs, vala

我正在使用 vala-mode 在 Emacs 中编辑 Vala 代码。但是，我想在 vala-mode 中更改两件事：

我想缩进 4 个空格而不是 2 个空格（这是我的 Emacs 默认值）。我想在 vala-mode 中启用自动完成功能。

自动完成适用于除 vala 模式以外的所有模式，我希望 4 个空格缩进**仅**适用于 vala 模式，而不是所有模式。但是，我不知道如何仅对 vala-mode 进行这些更改。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T21:54:43.717

我看到缩进问题已解决，但没有自动完成功能。如果您正在使用该`auto complete`软件包，那么在您的`init.el`或`.emacs`您可以简单地放置：

```
(require 'auto-complete-config)
(add-to-list 'ac-modes 'vala-mode) 
```

然后，您将在本地自动完成。那是一种方法。在 MELPA 中还有一个用于 vala 的 Yasnippet 包（[https://github.com/gopar/vala-snippets](https://github.com/gopar/vala-snippets)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:31:41.447

像这样的东西应该工作：

```
(add-hook 'vala-mode-hook (lambda () (setq c-basic-offset 4))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T19:32:52.063

我从未使用过`vala-mode`，但看起来它是基于`cc-mode`这样的设置`c-basic-offset`可能会起作用。有关如何设置`c-basic-offset`样式的信息，请参阅文档

```
(info "(ccmode)Customizing Indentation") 
```

# c++ - 哔声直到任何输入

> ID：11778115
> 
> 赞同：2
> 
> 时间：2012-08-02T13:09:39.793
> 
> 标签：c++, audio, beep

我正在制作一个测验程序。所以我想要的是每当用户提出任何问题时，他有 30 秒的时间来回答它。在这 30 秒内，我希望以 1 秒的间隔发出哔声（'\a'）。现在我想要的是，一旦用户输入任何输入，这种哔声就应该停止。我创建了这个小函数来产生 30 秒的哔声`void beep(){ for(int i=0;i<30;i++){cout<<"\a"; Sleep(1000); } }` 但是我不知道如何在用户输入他/她的答案后立即停止它，因为一旦我调用它，在它结束之前什么都做不了。任何人都可以提供任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:37:09.760

**Disclaimer**: I'm not a Windows programmer, I don't know if this is good style or even if it will compile or work. I can't test it here. However, as no one else has given a solution, it's a starting point. I'll edit this answer as I learn more, and hopefully someone who knows more about this will turn up.

**Edit**: I faked out `_kbhit()` to a trivial function returning `false`, and it at least compiles and looks like it runs ok

**Edit**: Ok I do have ms visual studio at work, I just never use it. The code as it is right now compiles and works (I suspect the timing is off though).

**Edit**: Updated it to immediately read back the key that was hit (rather than waiting for the user to hit enter).

This is the important function: [http://msdn.microsoft.com/en-us/library/58w7c94c%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/58w7c94c%28v=vs.80%29.aspx)

```
#include <windows.h>
#include <conio.h>
#include <ctime>
#include <iostream>
#include <string>

int main()
{
    time_t startTime, lastBeep, curTime;
    time(&startTime);
    lastBeep = curTime = startTime;
    char input = '\0';

    while ( difftime(curTime,startTime) < 30.0 )
    {
        if ( _kbhit() ) // If there is input, get it and stop.
        {
            input = _getch();
            break;
        }
        time(&curTime);
        if ( difftime(curTime,lastBeep) > 1.0 ) // More than a second since last beep?
        {
            std::cout << "\a" << "second\n" << std::flush;
            lastBeep = curTime; // Set last beep to now.
        }
    }
    if ( input )
    {
        std::cout << "You hit: \"" << input << "\"\n" << std::flush;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:15:07.797

你需要做一个循环来维持某处的“开始时间”，每 1 秒就发出哔哔声，并继续检查是否有有效的输入。如果 30 秒过去或给出有效输入，则退出。（或输入错误）

伪：

```
start=now();
lastbeep=start;
end=start+30secs
noanswer=true
while(now()<end&&noanswer)
{
   sleep(100ms)
   noanswre=checkforanswerwithoutblocking();
   if(now()-lastbeep>1sec)
   {
      beepOnce();lastbeep+=1sec;
   }
}
checkIfAnswerIsCorrect();
doStuff(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:18:40.990

我可以建议的粗略的是

```
void beep() { 
   char press = 'n';
   for(int i = 0; i < 30; i++)
       for(int j = 0; j < 100; j++) {     
           if(press == 'y') return;
           cout << "\a";
           Sleep(10);
       }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T13:15:03.433

对于窗户： `#include <windows.h> ... Beep(1480,200); // for example. ...`

Beep() 在内核中的单独线程中执行（据我所知），所以你可以不关心多线程 - 当它执行时，你的 profram 可以检查输入，或者输入新问题，例如

# c++ - 为什么断言宏仅用于调试构建

> ID：11778121
> 
> 赞同：6
> 
> 时间：2012-08-02T13:09:51.923
> 
> 标签：c++, c, debugging, assert

为什么让`assert`宏只在调试配置中做一些有用的事情是一种常见的做法？如果存在测试不变量和检测编码错误的存在，那么继续在生产软件中实现同样的大繁荣不是更容易吗？

我有一些 S60 背景，存在`__ASSERT_ALWAYS`and `__ASSERT_DEBUG`，后者相当于`assert`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T13:13:12.973

断言是为那些不应该**发生**的事情而制作的，即如果它发生了，那么你的代码中有一个你需要修复的错误。发布是“假定”没有错误的构建，并且使用断言为用户杀死应用程序与任何其他错误行为一样糟糕。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-02T13:13:26.063

检查断言成本。您可能不希望在最终产品中存在额外的操作。如果断言总是有效，那么人们就会开始减少使用它们“以不影响性能”。相信我，有*很多*人认为额外的检查会*扼杀性能*并且会避免它。这些人实际上必须更多地使用断言！

一个更重要的原因是`assert`，如果失败，只会中止您的程序。这对最终用户没有任何用处（除了安全性，避免运行带有意外数据的代码，但这可以说是通过实际错误检查更好地处理）。如果您希望您的程序实际上以一条消息终止或做一些有用的事情，您必须编写自己的断言。在这种情况下，您当然也可以选择将其保持在发布模式。

最后，断言可以帮助你发现错误，尤其是隐藏的错误，但在软件的执行过程中，它们实际上可能不会发生。想象一下下面的代码：

```
struct X
{
    // other stuff
    int stage;
};

X x;
... do some stuff
assert(x.stage == STAGE_2);
x.stage = STAGE_3; // go to next stage
... do more stuff 
```

在这样的示例中，您的逻辑说`x`应该在`STAGE_2`. 如果不是，这是一个错误。但是，如果您删除断言，修复`x.stage`并继续前进，则希望该错误不会那么严重。在这种情况下，最终用户实际上可以在没有注意到这一点的情况下继续工作。如果您也一直`assert`处于发布模式，您将强制应用程序退出一个没有任何可见效果的错误。

实际上，您始终会获得软件的更新，他们声称已修复了错误。其中一些确实是`assert`会被捕获的错误。但是，您作为最终用户没有任何问题，并且实际上很高兴您没有因为那些`assert`s 而被打断，不是吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-02T13:25:00.693

我认为这是一个文化问题。支持在生产代码中删除这种检查的论点如下：

*   它使您的代码运行速度变慢。
*   它使最终的可执行文件更大。
*   您的代码在发布后不应该有错误。
*   它将导致您的程序突然而剧烈地退出，并可能丢失数据。

反对 run 的论据如下

*   您正在交付您测试的*确切*代码。
*   现场报告的调试问题变得更加容易
*   不管你想怎么想，你发布的代码都会**有**错误
*   性能和尺寸影响通常很小。
*   当您的程序处于不希望的状态时，快速失败可能比尝试继续更可取。

就个人而言，我发布的软件完全按照它的测试、断言和所有方式构建。但是，很大程度上取决于您的客户群以及您希望如何安排发布...

这篇文章值得一读：- [http://www.martinfowler.com/ieeeSoftware/failFast.pdf](http://www.martinfowler.com/ieeeSoftware/failFast.pdf)

> 但是当您将软件部署给客户时呢？我们不希望应用程序因为配置文件中的错误而崩溃。对这种恐惧的一种反应是禁用该领域的断言。
> 
> 不要那样做！请记住，客户站点上发生的错误通过了您的测试过程。你可能很难复制它。这些错误是最难发现的，而一个恰当的断言来解释问题可以为您节省数天的精力。

另一件事 - 在 C++ 中，使用[BOOST_ASSERT](http://www.boost.org/doc/libs/1_50_0/libs/utility/assert.html)您可以将其设置为在断言失败时抛出异常，这使得处理断言失败并可能从断言失败中恢复更加有用。我们将它与[MadExcept](http://madshi.net/madExceptDescription.htm)结合使用，以便用户可以轻松地将字段中的任何断言失败发布到我们的错误跟踪器中，并提供完整的调用堆栈、屏幕截图、whathaveyou。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T13:23:52.440

`assert`除非您明确将其关闭，否则可以正常工作。（通常）没有理由将其关闭，即使在“发布”版本中也是如此，而且我交付的大多数已发布代码都`assert`处于活动状态。

关闭它的主要原因是性能。在这种情况下，您可以在性能至关重要的函数中非常局部地关闭它，例如：

```
#ifdef TURNOFFCRITICALASSERTS
#define NDEBUG
#include <assert.h>
#endif

//  Function with critical code here...

#undef NDEBUG
#include <assert.h> 
```

这是 C 标准委员会设计`assert`使用的方式。一般来说，你不应该`NDEBUG`像这样在本地定义 except 。

# javascript - 为什么某些技术上可序列化的输入属性不可序列化？

> ID：11778123
> 
> 赞同：12
> 
> 时间：2012-08-02T13:09:56.270
> 
> 标签：javascript, html, dom

可序列化的属性定义为：

*   当您设置元素的属性时，它将反映在序列化查询中`getAttribute`，您可以在 DOM Inspector 中看到更改
*   当您获取`.innerHTML`元素的父节点时，返回的 html 字符串将包含所有可序列化的属性作为它们的对应属性

我制作了一个页面，看起来它可靠地打印了`input`Chrome 和 Firefox 中元素的所有可序列化属性的表格：http: [//jsfiddle.net/tEVLp/16/](http://jsfiddle.net/tEVLp/16/)。自定义属性永远不可序列化，因此在 Firefox`webkitSpeech`等中不可序列化。测试铬以获得最佳效果。

所有布尔值都是`true`因为属性的序列化`false`将缺少属性，这在测试中是假阴性。

所以我的问题是，为什么不能序列化`.value`和`.checked`可序列化的属性？

从技术上讲，两者都是可序列化的。`.value`只是一个字符串，浏览器在序列化其他布尔属性方面没有问题，例如`.readOnly`and `.disabled`。

我最好的猜测是，由于`.defaultValue`序列化为`"value"`-attribute 并`.defaultChecked`序列化为`"checked"`-attribute，因此会有冲突，因此 `.value`and`.checked`无法序列化。在那种情况下，为什么`defaultX`选择这些而不是反映更有用的当前`.value`和`.checked`状态的那些？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T14:20:19.337

输入元素的[规范](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html)定义了确切的行为。[从这里](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html#value-sanitization-algorithm)开始阅读（在此之前，定义了 DOM 接口、属性和类型）。

简明摘要（`value`定义类似于`checked`，因此为简洁起见，我将`value`仅解释）。

“属性”`value`反映[值^(def)](http://www.w3.org/TR/2011/WD-html5-20110525/association-of-controls-and-forms.html#concept-fe-value)，
“属性”`value`反映[值内容属性^(def)](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#dom-input-value)。

*   该属性定义了默认值属性^(( [ref](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html#attr-input-value) ))。该值也由属性 ( [^(ref)](http://www.w3.org/TR/2011/WD-html5-20110525/common-dom-interfaces.html#reflect) [)](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html#dom-input-defaultvalue)[反映](http://www.w3.org/TR/2011/WD-html5-20110525/common-dom-interfaces.html#reflect)。`defaultValue`
*   设置 value 属性后， value 属性会更改 ( [ref](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html#attr-input-value) ) *。

那是非常简洁的措辞。我跳过了一个重要的细节。规范在这一点上非常清楚，所以我只引用[**脏值标志**](http://www.w3.org/TR/2011/WD-html5-20110525/the-input-element.html#concept-input-value-dirty-flag)部分：

> 每个输入元素都有一个布尔**脏值标志**。脏值标志必须在创建元素时初始设置为 false，并且在用户以更改值的方式与控件交互时必须设置为 true。
> 
> value 内容属性给出了输入元素的默认值。在添加、设置或删除 value 内容属性时，如果控件的脏值标志为 false，则用户代理必须将元素的值设置为 value 内容属性的值，如果有，则为空字符串否则，然后运行当前值清理算法（如果已定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:01:05.383

`value`和`checked`属性与 HTML 属性不对应，因此它们无法序列化为 HTML。至于为什么`defaultX`属性映射到`x`属性，我不确定。另一种方法是属性`x`映射到`x`属性并具有另一个属性（例如`currentX`表示当前值），这似乎不太直观，因为通常脚本需要当前值而不是默认值。

# eclipse - Eclipse 中的意外错误

> ID：11778124
> 
> 赞同：2
> 
> 时间：2012-08-02T13:09:56.777
> 
> 标签：eclipse, out-of-memory

这发生在我在大约 2 小时后使用 Weblogic 12 反复运行 Oracle Pack Eclipse 之后......出了什么问题，我该如何解决这个问题？

![](../Images/62e19c8720a5e0a75ac0d6feba6c7440.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:25:05.203

不久前我有同样的错误（在其他情况下）。原来是一个不存在的java版本的问题。检查 eclipse.ini 中指定的路径是否指向您真正要使用的 javaw.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:22:41.497

尝试增加 Xmx。512 并不多，因为您运行 Weblogic。

# php - PHP 类和返回变量

> ID：11778126
> 
> 赞同：0
> 
> 时间：2012-08-02T13:10:02.923
> 
> 标签：php, class

我正在尝试向 php 学习面向对象的一面，并不断努力。一个可能只是固定的，但我无法弄清楚为什么通过 URL 从类函数传回的变量变量不会回显到我的页面。

## **索引.php**

```
require_once('db.php');
require 'userclass.php';
$user = new user();

if(isset($_POST['submit'])){
    if($user->login($_POST['username'], $_POST['password'])){
        echo("poo");
    }
} 
```

## **用户类.php**

```
include('db.php');
session_start();
class User{

public function login($username, $password){
    $uname = $username;
    $pass = $password;
    header("location:index.php?uname=".$uname);

}
} 
```

我认为这可能与我的 if 条件逻辑有关？

请指出我的任何其他愚蠢行为或不常见的做法，我宁愿尽可能多地学习，而不是只有一个解决方案。:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:15:30.180

你的类是用大写字母定义的。用它。

```
$user = new User(); 
```

您的方法不返回值，并且还尝试执行重定向？

检查成功登录的代码需要一个布尔值。您需要`return true;`（或错误）。您列出的代码也不包含任何检查用户名或密码是否有效的逻辑，尽管我怀疑这是现阶段故意的，因为您正在测试。

为什么似乎在不知名的地方有一个重定向？

当您想要重定向时，您还需要终止脚本并阻止任何进一步的页面输出，否则重定向将不会发生。

```
public function login($username, $password){
    if ($username == 'testuser' && $password == 'testpass') {
        return true;
    }
    header("Location: index.php?uname=$uname");
    die();
} 
```

其他小问题：

`require`and`require_once`都是语句而不是函数。您正在混合使用括号和非括号语法。最好不要在语句中使用括号。

您`$_POST['username']`在 Location 标头中直接返回。虽然较新版本的 PHP 可以防止标头注入，但这样做是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:16:07.787

当您调用`$user->login(...)`它时，它会发送一个标题以转到另一个页面。它也不会返回任何有效值，例如`true/false`...添加返回值并删除标题，我认为这将解决您的问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:15:22.960

`if($user->login($_POST['username'], $_POST['password'])){`将需要某种返回值对其进行评估，因此`echo "poo";`永远不会发生，因为您随后会被定向到另一个页面 ?uname=，其中未设置 $_POST。

如果满足某些条件，登录将需要返回 true，然后我认为标头位置可能应该在 index.php 内（如果您在成功登录后重定向。

# testing - 有谁知道浏览器模拟器？

> ID：11778132
> 
> 赞同：2
> 
> 时间：2012-08-02T13:10:24.550
> 
> 标签：testing, browser, selenium, cross-platform, simulation

[2 年多来，我在Selenium](http://seleniumhq.org/)框架的帮助下测试了 Web 应用程序。我知道最好的设计是在 VM 上进行测试。

唯一的缺点 - 这是非常缓慢的测试。为什么？

*   如果您将运行多个实例，浏览器只会获得这么多的内存。
*   网站可能会很慢。
*   连接可能非常慢。

如果有一个框架可以正确地模拟浏览器（引擎/核心）并且可以为页面上的冲浪提供一些结果（api），那就太好了。

我并不是说只在一个不同版本的浏览器上进行模拟（比如 IE）。我的意思是模拟所有具有非常流行和最新版本的浏览器。

有谁知道可以做到这一点的框架/工具？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:13:12.847

例如，您可以尝试[PhantomJS](http://phantomjs.org/)。

从他们的页面：

> PhantomJS 是一个带有 JavaScript API 的无头 WebKit。它具有对各种 Web 标准的快速和原生支持：DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。

您可以将它与[Jasmine](http://pivotal.github.com/jasmine/)（以及其他几个框架）结合使用进行测试。

然而，可用引擎的选择仅限于 WebKit。我怀疑 Selenium 是否易于更换。顺便说一句，Selenium可能会在未来几年[成为 W3C 标准。](https://twitter.com/AutomatedTester/status/222705127792984064)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:54:47.817

你也可以用 Xvfb 运行 Selenium——我用它在远程服务器上执行测试，它运行得很好。

# android - 使用 AsyncTask 将图像加载到自定义适配器中

> ID：11778140
> 
> 赞同：8
> 
> 时间：2012-08-02T13:10:45.283
> 
> 标签：android, android-asynctask, lazy-loading, adapter

尽管那里有很多教程，但我发现很难实现 AsyncTask 以将图像从 URI（从内容提供程序获得）加载到自定义适配器中。

我得到了基本要点，即拥有一个包含 AsyncTask 的类，在“doInBackground”中创建位图，然后在 onPostExecute 中设置 ImageView。

对我来说，作为 android 和编程的新手，问题是我不知道如何将我的 Uri 传递给每个项目的 AsyncTask，如何创建位图以及如何将其返回给适配器。

我只用实际的 AsyncTask 类（ImageLoader）做到了这一点：

```
package another.music.player;

import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.widget.ImageView;

public class ImageLoader extends AsyncTask<String, String, Bitmap> {

    private ImageView imageView;
    private Bitmap bitmap = null;

    @Override
    protected Bitmap doInBackground(String... uri) {

        // Create bitmap from passed in Uri here

        return bitmap;

    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (bitmap != null && imageView != null) {
            imageView.setImageBitmap(bitmap);

        }
    }
} 
```

我的自定义适配器如下所示：

```
package another.music.player;

import android.content.ContentUris;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.provider.BaseColumns;
import android.provider.MediaStore.Audio.AlbumColumns;
import android.provider.MediaStore.Audio.AudioColumns;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CursorAdapter;
import android.widget.ImageView;
import android.widget.TextView;

class AlbumAdapter extends CursorAdapter {

    public AlbumAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
    }

    private static Uri currentSongUri;

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        ImageView albumArt = (ImageView) view.getTag(R.id.albumArt);
        TextView text1 = (TextView) view.getTag(R.id.artistTitle);
        TextView text2 = (TextView) view.getTag(R.id.albumTitle);
        TextView text3 = (TextView) view.getTag(R.id.totalSongs);

        albumArt.setImageBitmap(null);

        text1.setText(cursor.getString(cursor
                .getColumnIndex(AudioColumns.ARTIST)));
        text2.setText(cursor.getString(cursor
                .getColumnIndex(AudioColumns.ALBUM)));
        text3.setText(cursor.getString(cursor
                .getColumnIndex(AlbumColumns.NUMBER_OF_SONGS)));

        String currentAlbumId = cursor.getString(cursor
                .getColumnIndex(BaseColumns._ID));

        Integer currentAlbumIdLong = Integer.parseInt(currentAlbumId);
        Uri artworkUri = Uri.parse("content://media/external/audio/albumart");
        currentSongUri = ContentUris.withAppendedId(artworkUri,
                currentAlbumIdLong);

        //Run ImageLoader AsyncTask here, and somehow retrieve the ImageView & set it.

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View view = inflater.inflate(R.layout.albumitem, null);
        view.setTag(R.id.albumArt, view.findViewById(R.id.albumArt));
        view.setTag(R.id.artistTitle, view.findViewById(R.id.artistTitle));
        view.setTag(R.id.albumTitle, view.findViewById(R.id.albumTitle));
        view.setTag(R.id.totalSongs, view.findViewById(R.id.totalSongs));

        return view;
    }

} 
```

如果有人能告诉我如何进行此操作，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T13:36:01.693

您需要传递您`AsyncTask`的视图，以便它可以在完成时对其进行更新：

```
//Run ImageLoader AsyncTask here, and let it set the ImageView when it is done.
new ImageLoader().execute(view, uri); 
```

并修改`AsyncTask`使其可以处理混合参数类型：

```
public class ImageLoader extends AsyncTask<Object, String, Bitmap> {

    private View view;
    private Bitmap bitmap = null;

    @Override
    protected Bitmap doInBackground(Object... parameters) {

        // Get the passed arguments here
        view = (View) parameters[0];
        String uri = (String)parameters[1];

        // Create bitmap from passed in Uri here
        // ...
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (bitmap != null && view != null) {
            ImageView albumArt = (ImageView) view.getTag(R.id.albumArt);
            albumArt.setImageBitmap(bitmap);
        }
    }
} 
```

我没有测试过这段代码，但它应该给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:38:58.790

你为什么在**AsyncTask**中做 setImage ？你可以在一个**线程**中做到这一点。我不认为在这种情况下 AsyncTask 会很好。最好在不同的线程中进行。

# validation - Struts 2 验证重置我的动态数据

> ID：11778141
> 
> 赞同：1
> 
> 时间：2012-08-02T13:10:47.990
> 
> 标签：validation, struts, reset, dynamic-data

我正在尝试验证一个表单，它运行良好，出现了正确的消息......我唯一的问题是，如果有一些错误，我的表单字段将被删除。

数据由数据库获取并以带有 struts 标签的形式显示（因此它们是动态的）。如果我输入 sono 静态值，则在错误验证后不会删除。

```
 <s:form action="updateUser" method="post" id="updateUser"
    name="updateUser" >     

    <s:textfield value="%{user.name}" class="modify"  id="name" name="name" key="modify.name" required="true"    /> 
```

这将被删除，而这：

```
<s:textfield value="HELLO" class="modify"  id="name" name="name" key="modify.name" required="true"    /> 
```

将不会。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:28:54.537

你在你的动作类中设置了一个用户对象吗？你有那个对象的getter/setter吗？另外，您是如何在 struts.xml 中配置此操作的“输入”结果的？也许您应该在 INPUT 的结果中使用“链”（我猜这是您从验证器获得的结果。）

# c# - Asp.NET 中继器控件（如聊天）

> ID：11778148
> 
> 赞同：1
> 
> 时间：2012-08-02T13:11:14.610
> 
> 标签：c#, asp.net, repeater

我想创建一个“你在想什么”，比如 Facebook 选项。但是，我无法在用户之前写的标题下写评论。也许我应该使用 2 个中继器？我已经尝试了以下代码，但它并没有解决我的问题：

```
TextBox txtCevap = e.Item.FindControl("txtCevap") as TextBox;
HiddenField hf = e.Item.FindControl("hfYorumID") as HiddenField;
int id = Convert.ToInt32(hf.Value);
object sessionToString = Session["KullaniciID"];

SqlCommand sqlSelect = new SqlCommand("sp_cevapEkle", conn);
sqlSelect.CommandType = System.Data.CommandType.StoredProcedure;

sqlSelect.Parameters.AddWithValue("YorumID", id);
sqlSelect.Parameters.AddWithValue("@KullaniciID", Convert.ToInt32(sessionToString));
sqlSelect.Parameters.AddWithValue("@Cevap", txtCevap.Text.ToString());
sqlSelect.Parameters.AddWithValue("@Tarih", DateTime.Now);
if (conn.State == System.Data.ConnectionState.Closed)
conn.Open();
sqlSelect.ExecuteNonQuery();
txtCevap.Text = "";

rptNeDusunuyorsun.DataBind(); 
```

# c++ - 使用 compose() 和implicit_value() 提升程序选项不是“组合”的

> ID：11778153
> 
> 赞同：3
> 
> 时间：2012-08-02T13:11:34.950
> 
> 标签：c++, boost, boost-program-options

在定义为 compose() 和隐式() 的选项的情况下，我遇到了 boost program_options (v1_49) 的问题。我的意图是实现一个类似于 perl 的 -D 选项，以便您可以执行 -D 或 -Dname 并多次使用它。我的 options_description 是：

```
(  "debug,D",
   bpo::value<vector<string> >()
         ->composing()
         ->implicit_value(vector<string>(1,"1")),
   "Set debug level."
), 
```

在大多数情况下，这似乎可以正常工作，但是每当命令行上出现没有值的 -D 时，所有早期的值都会被删除，例如：

```
$ ./a.out -D abc -D 255 -D xyz
variables_map["debug"] = {"abc", "255", "xyz"}

$ ./a.out -D -D 255 -D xyz
variables_map["debug"] = {"1", "255", "xyz"}

$ ./a.out -D abc -D -D xyz
variables_map["debug"] = {"1", "xyz"}

$ ./a.out -D abc -D 255 -D
variables_map["debug"] = {"1"} 
```

我想我明白为什么会发生这种情况，隐式值 {"1"} 替换现有向量而不是添加到它。我可以做些什么来让它工作，还是 boost::program_options 的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T23:35:39.350

这是一种不需要修改增强源的解决方法。如果将解析和存储任务分开，则可以修改`boost::program_options::parsed_options`选项的中间向量。向量的每个元素都包含`std::string`键和`std::vector<std::string>`值。解决方法依赖于这样一个事实，即对于隐式值，该值向量为空。如果我们扫描`parsed_options`隐式值并显式地为它们分配一个值，那么它们就不会破坏同一个键的先前值。这是工作代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <boost/foreach.hpp>
#include <boost/program_options.hpp>

namespace po = boost::program_options;

namespace std {
   // This overload is needed to use composed options.
   static std::ostream& operator<<(
      std::ostream& os,
      const std::vector<std::string>& v) {
      os << '{';
      BOOST_FOREACH(const std::string& s, v) {
         if (&s != &*v.begin())
            os << ", ";
         os << '"' << s << '"';
      }
      os << '}';
      return os;
   }
}

int main(int argc, char *argv[]) {
   po::options_description desc("Allowed options");
   desc.add_options()
      ("debug,D",
       po::value<std::vector<std::string> >()
       ->composing()
       ->implicit_value(std::vector<std::string>(1,"1")),
       "Set debug level.");

   // Just parse the options without storing them in the map.
   po::parsed_options parsed_options = po::command_line_parser(argc, argv)
      .options(desc)
      .run();

   // Implicit option values are empty, replace with default value.
   BOOST_FOREACH(po::option& o, parsed_options.options) {
      if (o.string_key == "debug" && o.value.empty())
         o.value.push_back("1"); // default value is "1"
   }

   // Now store and earlier values aren't clobbered.
   po::variables_map vm;
   po::store(parsed_options, vm);
   po::notify(vm);

   std::cout << "variables_map[\"debug\"] = "
             << (vm.count("debug") ?
                 vm["debug"].as<std::vector<std::string> >() :
                 std::vector<std::string>())
             << '\n';
   return 0;
} 
```

这是相同的测试用例：

```
$ ./a.out -D abc -D 255 -D xyz
variables_map["debug"] = {"abc", "255", "xyz"}

$ ./a.out -D -D 255 -D xyz
variables_map["debug"] = {"1", "255", "xyz"}

$ ./a.out -D abc -D -D xyz
variables_map["debug"] = {"abc", "1", "xyz"}

$ ./a.out -D abc -D 255 -D
variables_map["debug"] = {"abc", "255", "1"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:11:31.907

好吧，我最终想出了一个似乎对我有用的解决方案。如果可能的话，从流利的人那里获得一些独立的验证会很好`boost::program_options`，但显然没有人知道或关心它。

这是 boost_1_49_0 的一个补丁，它允许一个选项既是 composing() 也有一个 implicit_value()。

```
diff -Naur old/boost/program_options/detail/value_semantic.hpp new/boost/program_options/detail/value_semantic.hpp
--- old/boost/program_options/detail/value_semantic.hpp 2010-07-12 03:14:14.000000000 -0400
+++ new/boost/program_options/detail/value_semantic.hpp 2012-08-17 16:31:03.000000000 -0400
@@ -154,6 +154,28 @@
         }
     }

+    // Helper function to copy a non-vector implicit value into the
+    // tokens vector.
+    template<class T, class charT>
+    void get_implicit_tokens(std::vector<std::basic_string<charT> >& vs,
+                             const boost::any& a,
+                             T*, long) {
+        const T va = boost::any_cast<const T>(a);
+        vs.push_back(boost::lexical_cast<std::basic_string<charT> >(va));
+    }
+
+    // Helper function to copy a vector implicit value into the
+    // tokens vector.
+    template<class T, class charT>
+    void get_implicit_tokens(std::vector<std::basic_string<charT> >& vs,
+                             const boost::any& a,
+                             std::vector<T>*, int) {
+        const std::vector<T> va = boost::any_cast<const std::vector<T> >(a);
+        for (unsigned i = 0; i < va.size(); i++) {
+            vs.push_back(boost::lexical_cast<std::basic_string<charT> >(va[i]));
+        }
+    }
+
     template<class T, class charT>
     void 
     typed_value<T, charT>::
@@ -164,7 +186,14 @@
         // value, then assign the implicit value as the stored value;
         // otherwise, validate the user-provided token(s).
         if (new_tokens.empty() && !m_implicit_value.empty())
-            value_store = m_implicit_value;
+            if (m_composing) {
+                // Attempt to append the implicit value.
+                std::vector<std::basic_string<charT> > vs;
+                get_implicit_tokens(vs, m_implicit_value, (T*)0, 0);
+                validate(value_store, vs, (T*)0, 0);
+            } else {
+                value_store = m_implicit_value;
+            }
         else
             validate(value_store, new_tokens, (T*)0, 0);
     } 
```

# jsf - PrimeFaces 对话框显示错误信息

> ID：11778155
> 
> 赞同：0
> 
> 时间：2012-08-02T13:11:37.133
> 
> 标签：jsf, drop-down-menu, primefaces, datatable, javabeans

我有一个包含 2 个下拉列表的页面，这些下拉列表填充了一个数据表（取决于下拉列表中的选择）。数据表包含用于选择多行然后打开一个对话框以显示基于所选行的信息的复选框。问题是：我第一次单击按钮打开对话框时它是空的，当我更改下拉列表的内容并打开对话框时，它将显示上一个选择的信息，而不是我刚刚制作的那个在我更改下拉列表等之前，我会一直保持这种状态……在更改下拉列表中的选择之前，对话框始终会显示先前选择的信息。

这页纸：

```
 <h:form id="form">
    <f:view>

    <p:growl id="msgs" showDetail="true" />
    <p:layout style="min-width:300px;min-height:200px;" id="layout">
        <p:layoutUnit position="west" resizable="true" size="200" minSize="40" maxSize="300">
        <!-- _______________________________________start drop down________________________________________________________ -->
            <h:panelGrid columns="1" cellpadding="5">

                <p:selectOneMenu id="Item" value="#{ThemeBean.idItem}">
                    <f:selectItem itemLabel="Select un Item " itemValue="" />
                    <f:selectItems value="#{ItemBean.listItemsUser}" var="utilisateur" />
                    <p:ajax listener="#{ThemeBean.handleCityChange}" update="suburbs" />
                </p:selectOneMenu>

                <p:selectOneMenu id="suburbs" value="#{ReponseBean.idTheme}">
                    <f:selectItem itemLabel="Select un Theme" itemValue="" />
                    <f:selectItems value="#{ThemeBean.suburbs}" />
                    <p:ajax listener="#{ReponseBean.handleCityChange_Ecart}" update=":form:dropArea" />
                </p:selectOneMenu>

            </h:panelGrid>
            <p:separator />
        </p:layoutUnit>
    <!-- _______________________________________end drop down________________________________________________________ -->
        <p:layoutUnit position="center">

            <p:outputPanel id="dropArea">
                <p:dataTable id="dt1" var="car"
                    value="#{ReponseBean.listPartheme_ecart}"
                    rendered="#{not empty ReponseBean.listPartheme_ecart}"
                    rowKey="#{car.id}" editable="true"
                    selection="#{EcartBean.selectedCars}">

                    <p:column selectionMode="multiple" style="width:18px" />
                    <p:column headerText="Questions">
                        <h:outputText value="#{car.q1.text}" />
                    </p:column>

                    <p:column headerText="Reponse">
                        <h:outputText value="#{car.rep}" />
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton id="multiViewButton" value="Ajouter Ecart" icon="ui-icon-search"
                            update=":form:multiDialog :form:displayMulti" oncomplete="multiCarDialog.show()"/>
                    </f:facet>
                </p:dataTable>
                <!-- ________________________________________dialogue________________________________________________ -->
                <p:dialog id="multiDialog" header="Ajout Ecart" widgetVar="multiCarDialog" height="300" showEffect="fade">
                    <p:dataList id="displayMulti" value="#{EcartBean.selectedCars}" var="selectedCare">
                        #{selectedCare.q1.text} (#{selectedCare.rep})
                    </p:dataList>
                    <p:messages />
                    <h:panelGrid columns="3" cellpadding="5">

                        <h:outputLabel value="Niveau Ecart" />

                        <p:selectOneMenu id="idUtilisateur" value="#{EcartBean.idNiveauAudit}">
                            <f:selectItems value="#{NiveauEcartBean.listNiveauSelect}"  var="nivecart" />
                        </p:selectOneMenu>
                        <p:message for="idUtilisateur" />
                        <h:outputLabel value="Constatation" id="Constatation" />
                        <h:inputText value="#{EcartBean.consta}" />
                        <p:message for="Constatation" />
                        <p:commandButton icon="ui-icon-disk" value="Ajouter" id="ViewButton" action="#{EcartBean.save}"
                            oncomplete="multiCarDialog.hide();">
                        </p:commandButton>
                    </h:panelGrid>

                </p:dialog>

            </p:outputPanel>

        </p:layoutUnit>
    </p:layout>

    </f:view>
    </h:form> 
```

方法 ThemeBean.handleCityChange ：

```
 public void handleCityChange() {

    qu = respQue.lister_Ques(idItem);

    if (qu != null) {
        List<SelectItem> listuti = new ArrayList<SelectItem>();
        List<Theme> list = resp.lister_Par_Thme(qu.getId());
        for (Theme p : list) {
            listuti.add(new SelectItem(p.getId(), p.getLibelle()));
        }
        this.setSuburbs(listuti);

    } else {
        System.out.println("erreur");
    }

} 
```

ReponseBean.handleCityChange_Ecart ：

```
 public void handleCityChange_Ecart() {

    listPartheme_ecart= new ArrayList<Reponse>();
    System.out.println("taiile avant "+listPartheme_ecart.size());
    List<Reponse> lr = respQ.findByTheme_ecart(idTheme);
    System.out.println(idTheme);
    for (int i = 0; i < lr.size(); i++) {
        if (lr.get(i).getAudit().getId() == aud.getId())
            listPartheme_ecart.add(lr.get(i));
    }

} 
```

我应该提到，在控制台中，当我打开对话框时，我看到了写入信息，它只是没有在对话框中显示写入。感谢您的时间和帮助。

我正在更新这篇文章，说我终于解决了填充弹出窗口的问题，我将对话放在了这样的新形式中：

```
 </h:form>
    <!-- ________________________________________dialogue________________________________________________ -->
    <h:form id="hh" >
    <p:dialog id="multiDialog" header="Ajout Ecart" widgetVar="multiCarDialog" height="300" showEffect="fade">

        <p:dataList id="displayMulti" value="#{EcartBean.selectedCars}" var="selectedCare">
            #{selectedCare.q1.text} (#{selectedCare.rep})
        </p:dataList>
        <p:messages />

            <h:panelGrid columns="3" cellpadding="5">

                <h:outputLabel value="Niveau Ecart" />
                <p:selectOneMenu id="idUtilisateur" value="#{EcartBean.idNiveauAudit}">
                    <f:selectItems value="#{NiveauEcartBean.listNiveauSelect}"  var="nivecart" />
                </p:selectOneMenu>

                <p:message for="idUtilisateur" />
                <h:outputLabel value="Constatation" id="Constatation" />

                <h:inputText value="#{EcartBean.consta}" />
                <p:message for="Constatation" />

                <p:commandButton  icon="ui-icon-disk" value="Ajouter" action="#{EcartBean.save}"  id="ViewButton" oncomplete="multiCarDialog.hide();" />

            </h:panelGrid>

        </p:dialog>
    </h:form> 
```

我现在有一个小问题：对话中的命令按钮不会触发我尝试过的方法保存

```
<p:commandButton  icon="ui-icon-disk" value="Ajouter" action="#{EcartBean.save}"  id="ViewButton" oncomplete="multiCarDialog.hide();" /> 
```

和

```
<p:commandButton  icon="ui-icon-disk" value="Ajouter" actionListener="#{EcartBean.save}"  id="ViewButton" oncomplete="multiCarDialog.hide();" /> 
```

和

```
<p:commandButton  icon="ui-icon-disk" value="Ajouter" id="ViewButton" oncomplete="multiCarDialog.hide();" >
                <f:actionListener  binding="#{EcartBean.save}"/>
                </p:commandButton> 
```

但什么都没有:(。哪里出了问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T13:27:48.697

根据 , 的文档[`<p:ajax>`](http://www.primefaces.org/docs/vdl/3.2/p/ajax.html)，`listener`仅在部分请求时触发，我在您粘贴的代码中没有看到发生这种情况。用于`event="valueChange"`触发部分请求，这将导致当前更新显示在对​​话框中。

```
<p:ajax event="valueChange" listener="#{ThemeBean.handleCityChange}" update="suburbs" /> 

<p:ajax event="valueChange" listener="#{ReponseBean.handleCityChange_Ecart}" update=":form:dropArea" /> 
```

# javascript - 循环并更新选择列表中的值

> ID：11778160
> 
> 赞同：0
> 
> 时间：2012-08-02T13:12:19.887
> 
> 标签：javascript, loops, getelementsbytagname

我正在尝试更新页面上所有选择列表的选项，并[使用 JavaScript 实现了在 Get list of all `input` objects 上找到的解决方案，而无需访问 `form` 对象](https://stackoverflow.com/questions/2214066/get-list-of-all-input-objects-using-javascript-without-accessing-a-form-obj)和其他页面。

这在一定程度上有效，但只有在触发 javascript 之后出现的选择列表才会更新，而我需要它们全部完成，无论它们相对于触发选择的位置如何。

这是我所拥有的简化版本：

```
function chooseBon(id, value) {

var bonbonsAmount  = 12;
    var bonbonsCurrent = 0;
    var bonbonsCount   = 4;

    var inputs, index;

    // get all the select lists
    inputs = document.getElementsByTagName('select');

// loop through all the lists
    for (index = 0; index < inputs.length; ++index) {

// First disable all options
for (j = 0; j<=bonbonsAmount; ++j) {
    inputs[index].options[j].disabled="disabled";
}

    // Then re-enable the ones we still need
    for (j = 0; j<=(bonbonsAmount - bonbonsCurrent); ++j) {
    inputs[index].options[j].disabled="";
}

// add up the no of chocs selected so we know how many options to re-enabled above
bonbonsCurrent += inputs[index].selectedIndex; 
```

}

我是一名公认的新手，并且正在将一个电子商务平台的脚本改编为另一个，所以在某些领域我感到手足无措，所以请随时提出其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:06:14.943

这是一种可能的解决方案和[小提琴](http://jsfiddle.net/lalatino/hBf2t/)：

```
function chooseBon() {
    var bonbonsAmount = 12;
    var bonbonsCurrent = 0;
    var bonbonsRemaining; //max. is bonbonsAmount
    var inputs, i, j;
    inputs = document.getElementsByTagName('select');
    for (i = 0; i < inputs.length; i++) {
        bonbonsCurrent += parseInt(inputs[i].value, 10);
    }
    bonbonsRemaining = bonbonsAmount - bonbonsCurrent;
    for (i = 0; i < inputs.length; i++) {
        for (j = 0; j <= bonbonsAmount; j++) {
            inputs[i].options[j].disabled = (j < bonbonsRemaining + parseInt(inputs[i].value, 10) + 1) ? false : true;
        }
    }
} 
```

# eclipse - eclipse - 类查找编辑器 - 找不到源

> ID：11778162
> 
> 赞同：0
> 
> 时间：2012-08-02T13:12:35.640
> 
> 标签：eclipse, debugging

eclipse调试有问题。我有一个正常工作的代码，几个小时前我又添加了一个外部库来做一些新的事情。当我现在运行程序时，它可以正常工作，但是当我想调试它时，它停在代码的新部分（使用最新外部库的部分）的第一行。它显示信息：

“找不到类文件编辑器源源附件不包含文件 ModelBuilder.class 的源”

当我尝试跳过时，我只会收到相同的信息，但与其他文件相关联。经过多次跨步后，我终于回到了我的代码并可以正常调试程序的其余部分。当然我可以一直这样做，但是有人知道该问题的解决方案吗，不是多次单击而是正常调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:16:12.247

除非您进入外部库代码，否则它不应进入外部库代码，或者该代码中存在异常。如果您发现自己单步执行您没有源代码的代码，请使用 Step Return，它会跳转到您使用的任何方法的末尾。

如果它是由库代码中的异常引起的并且您想忽略它，请转到 Window > Preferences > Java > Debug 并取消选中“Suspend execution on uncaught exceptions”。

如果您知道是什么异常导致执行暂停，那么您也可以试试这个：

1.  转到调试透视图
2.  打开断点视图
3.  单击带有感叹号的 J (J!)
4.  搜索触发调试挂起的异常
5.  取消选中两个复选框
6.  说OK

# java - 在 Java 中规范化字符串时编码伪影

> ID：11778163
> 
> 赞同：1
> 
> 时间：2012-08-02T13:12:37.890
> 
> 标签：java, tomcat, encoding, normalize

我的网站允许其用户在远程服务器上上传文件。为了避免服务器上的文件名出现问题，我想应用一个简单的规则来命名服务器上上传的文件：

1.  将所有带重音的字母（à、é、è 等）替换为不带重音的等价字母（即我们示例中的 a、e、e）
2.  用下划线替换所有特殊字符
3.  小写整个事情

我的代码看起来像

```
protected String serverFilename(String localFilename) {
    if (localFilename == null || localFilename.length() == 0) {
        throw new IllegalArgumentException("Invalid filename for upload (localFilename=" + localFilename + ")");
    }

    String result = Normalizer.normalize(localFilename, Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", "").replaceAll("[^a-zA-Z0-9.]", "_").toLowerCase();
    LOG.debug("filename " + localFilename + " returns: " + result);
    return result;
} 
```

这个单元测试运行得很好：

```
assertEquals("capture_d_ecran_2012_08_02_a_12.45.29.png", uploader.serverFilename("Capture d’écran 2012-08-02 à 12.45.29.png")); 
```

但在实际操作中，即在 Mac 服务器上本地运行的 Tomcat 6 中，当文件名相似时，我得到一个名为“capture_d_ao__cran_2012_07_10____10.22.01.png”的文件名：

```
filename Capture d’écran 2012-07-10 à 10.22.01.png returns: capture_d_ao__cran_2012_07_10____10.22.01.png 
```

我想某处有某种错误编码，但我不知道在哪里。关于如何解决这个问题的任何提示？

**更新**：Java 源文件和负责上传文件的 HTML 都是 UTF-8 编码的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:42:04.733

我猜 Java 源文件是用不同的编码保存的（Mac 上的默认值往往是 MacRoman，但[你应该总是在任何地方使用 UTF-8](http://www.utf8everywhere.org/)）而不是 HTTP 请求编码。

[[应OP的要求复制粘贴。]]

# html - 试图在 html 电子邮件中隐藏图像 - 在 Outlook 2010 中不起作用

> ID：11778175
> 
> 赞同：3
> 
> 时间：2012-08-02T13:13:19.667
> 
> 标签：html, image, email, outlook, hide

我正在为移动设备构建设备响应式电子邮件。作为其中的一部分，我希望将一些出现在桌面/网络邮件上的图像隐藏在移动设备上，反之亦然。

我已经让它在我测试过的所有 Web 客户端和移动设备上运行，但 Outlook 会显示文件中的所有图像。

我尝试过**display:none;的组合。**,**能见度;** 在图像、tds、表格上**隐藏**和**width="0"并尝试使用 div。**

我知道有一种使用背景图像代替的解决方法，但这并不理想，因为某些图像充当按钮并且需要它们后面的链接。

将不胜感激任何帮助，

谢谢。

沙龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:44:33.693

我有同样的问题，我想要两个不同大小的图像，并希望它们都可以作为链接点击。

我的媒体查询仅针对移动设备，因此我可以定义包含表格单元格的高度并确保链接是设置的块高度。

```
@media only screen and (min-device-width: 320px) and (max-device-width: 568px) {      
td[class="image-class"], 
a[class="image-link-class"]{
height:165px!important; 
display: block; !important};
img[class="desktop-content"]{
display: none !important; 
height:0 !important; 
min-height: 0 !important; 
max-height: 0 !important; width:0 !important; overflow: hidden !important;
} 
```

然后，图像有一个类，将火箭筒的所有内容都设置为 0，以确保它确实是隐藏的。对于基于桌面的电子邮件客户端，表格单元格的背景图像永远不会被看到，然后被内联图像覆盖

```
<td height="473" background="image-mobile.jpg" class="image-class"><a href="#" class="image-link-class"><img src="image-desktop.jpg" width="318" height="473" border="0" alt="" style="display:block" class="desktop-content"></a></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:36:48.800

感谢您的回复，我现在已经设法修复它。我认为马特说的是对的。我的问题与内联样式有关。

# android - 安卓自定义形状

> ID：11778177
> 
> 赞同：3
> 
> 时间：2012-08-02T13:13:33.663
> 
> 标签：android, shape

我知道可以制作一个看起来像这样的形状： ![在此处输入图像描述](../Images/e9393f3388b46b35808a1ca5906b56b3.png)

但我不知道如何开始。我可以把它做成一个形状吗？还是我必须做其他事情？

BR

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:03:30.607

哦，看，我错了 - 渐变不是问题：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.LinearGradient;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Shader;
import android.view.View;

public class ButtonShadow extends View {

    public ButtonShadow(Context context)
    {
        super(context);
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        RectF space = new RectF(this.getLeft(), this.getTop(), this.getRight(), this.getBottom());

        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

        paint.setShader(new LinearGradient(0, getWidth(), 0, 0, Color.BLACK, Color.WHITE, Shader.TileMode.MIRROR));

        canvas.drawArc(space, 180, 360, true, paint);

        Rect rect = new Rect(this.getLeft(),this.getTop() + (this.getHeight() / 2),this.getRight(),this.getBottom());
        canvas.drawRect(rect, paint);
    }
} 
```

有关渐变填充的更多信息，请参见此处：[如何使用线性渐变填充 Android 中的路径？](https://stackoverflow.com/questions/2836098/how-to-fill-a-path-in-android-with-a-linear-gradient)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T13:53:04.830

[有关详细信息](http://developer.android.com/guide/topics/resources/drawable-resource.html)，请参阅此文档，您需要使用[Layer List](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)。

这是根据您的图像的代码：

**custom_layer_list.xml**

```
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/topCircular" />

    <item
        android:drawable="@drawable/rect"
        android:top="20dp" />
</layer-list> 
```

**topCircular.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

<solid
    android:color="#000000" />
<corners
    android:topLeftRadius="25dp"
    android:topRightRadius= "25dp" />

</shape> 
```

**矩形.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

<solid
    android:color="#000000" />

</shape> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:17:36.810

您可以在 shape 文件中的 xml 中定义它，但制作一个简单的 9 补丁图形可能要容易得多，然后您可以轻松自定义弯曲和直线段的拉伸方式和位置。

有关更多信息，请参阅[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

**编辑**

有关形状的更多信息，请参见此处：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T15:36:27.993

你只能用形状来做到这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#000000" />
    <padding android:left="7dp"
        android:top="7dp"
        android:right="7dp"
        android:bottom="7dp" />
    <corners  
        android:topLeftRadius="90dip"
        android:topRightRadius="90dip"
        android:bottomLeftRadius="0dip"
        android:bottomRightRadius="0dip" />
</shape> 
```

# javascript - 我们还需要在 JavaScript 块中吗

> ID：11778180
> 
> 赞同：7
> 
> 时间：2012-08-02T13:13:40.057
> 
> 标签：javascript

> **可能重复：**
> [使用 HTML 注释标记 <!-- --> 仍然与 JavaScript 代码相关吗？](https://stackoverflow.com/questions/1507939/using-html-comment-tag-still-relevant-around-javascript-code)

Kind of remember`<!-- //-->`用于防止 JavaScript 代码在较低版本的 IE 中显示。任何人都可以提供解释此文章的链接吗？很难`<!--`在 Google 中搜索“”，因为它已被剥离。

我们在 JavaScript 块中还需要这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:22:28.897

这些注释是在首次引入 Javascript 时使用的。他们不再需要了，而且已经有一段时间没有了。

其目的是对那些甚至不知道`script`标签用途的浏览器隐藏脚本。这些浏览器会忽略脚本标签，并将其中的代码显示为常规 HTML 内容。

没有浏览器不知道`<script>`标签，所以即使它们不运行脚本，它们仍然不会显示里面的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:16:24.527

只有当你担心上个千年某个地方的时间旅行者带着他们的旧电脑来到今天。

# python - 如何向我的 setuptools / 分发 setup.py 添加自定义构建步骤？

> ID：11778182
> 
> 赞同：2
> 
> 时间：2012-08-02T13:13:53.670
> 
> 标签：python, setuptools

我想`setup.py`通过使用平台程序而不是 Extension() 从我的 C 编译器中调用。如何添加自定义构建步骤，`setup.py`以便使用`python setup.py build`或任何其他构建 ( `bdist_*`) 命令运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:17:17.600

我不知道什么是“平台游戏”。我假设您希望完全控制如何构建 C 扩展，同时为打包工具提供相同的接口。

一种可能的方式：[Cython 定义了它的自定义 built_ext 命令](https://github.com/cython/cython/blob/master/Cython/Distutils/build_ext.py)，[可以用作](http://docs.cython.org/src/userguide/source_files_and_compilation.html)：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("example", ["example.pyx"])]
) 
```

一个更简单的选择可能是将生成的 C 源代码包含到源代码 tarball 中，并在 setup.py 中使用标准 built_ext、扩展类。它将提供与现有工具的最佳兼容性。

# java - JTable - 在列下对齐组件

> ID：11778183
> 
> 赞同：1
> 
> 时间：2012-08-02T13:13:56.273
> 
> 标签：java, swing, jtable

在 JTable 的特定列下对齐其他组件（例如按钮、标签等）的方法是什么？例如，我想在带有复选框的列下添加另一个复选框，它将选择该特定列中的所有值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T16:38:28.650

据我了解，[TableColumnModelListener](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/TableColumnModelListener.html)的使用，以及来自调整大小和重新排序的适当事件

![在此处输入图像描述](../Images/34edaa24874b357f5ecf7474676870d1.png)

![在此处输入图像描述](../Images/9e97d2e6ad0b64d155d411a7822380b7.png)

![在此处输入图像描述](../Images/811eac4f1d843f218eb3b06c5225a236.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class TableFilterRow extends JFrame implements TableColumnModelListener {

    private static final long serialVersionUID = 1L;
    private JTable table;
    private JPanel filterRow;   // Panel for text fields

    public TableFilterRow() {
        table = new JTable(3, 5);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
        table.getColumnModel().addColumnModelListener(this);
        filterRow = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));
        for (int i = 0; i < table.getColumnCount(); i++) {
            filterRow.add(new JTextField(" Sum at - " + i));
        }
        columnMarginChanged(new ChangeEvent(table.getColumnModel()));
        getContentPane().add(filterRow, BorderLayout.SOUTH);
    }

    //  Implement TableColumnModelListener methods
    //  (Note: instead of implementing a listener you should be able to
    //  override the columnMarginChanged and columMoved methods of JTable)
    @Override
    public void columnMarginChanged(ChangeEvent e) {
        TableColumnModel tcm = table.getColumnModel();
        int columns = tcm.getColumnCount();

        for (int i = 0; i < columns; i++) {
            JTextField textField = (JTextField) filterRow.getComponent(i);
            Dimension d = textField.getPreferredSize();
            d.width = tcm.getColumn(i).getWidth();
            textField.setPreferredSize(d);
        }

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                filterRow.revalidate();
            }
        });
    }

    @Override
    public void columnMoved(TableColumnModelEvent e) {
        Component moved = filterRow.getComponent(e.getFromIndex());
        filterRow.remove(e.getFromIndex());
        filterRow.add(moved, e.getToIndex());
        filterRow.validate();
    }

    @Override
    public void columnAdded(TableColumnModelEvent e) {
    }

    @Override
    public void columnRemoved(TableColumnModelEvent e) {
    }

    @Override
    public void columnSelectionChanged(ListSelectionEvent e) {
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new TableFilterRow();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:37:27.707

a 中的单元格对齐方式`JTable`由`Component`用于[渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)单元格的对齐方式确定。用于普通单元格，`DefaultTableCellRenderer`是一个`JLabel`，它支持全面的对齐属性；[这里](https://stackoverflow.com/a/2834484/230513)有一个例子。要在表格标题单元格中使用，您应该首先考虑[此处](https://stackoverflow.com/a/7146216/230513)引用的注意事项。一旦确定需要这样的组件，此[示例](https://stackoverflow.com/a/7137801/230513)可能会有所帮助。

![图片](../Images/5889229e0fde656e2ae9c55fcb4a8df0.png)

# c# - 我可以在 Azure 表中通过一个查询插入一组记录吗

> ID：11778191
> 
> 赞同：0
> 
> 时间：2012-08-02T13:14:16.190
> 
> 标签：c#, azure

为了提高性能，我需要通过一个查询插入一组记录。这些记录可以在不同的分区中。有可能吗？

有没有人做这样的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:21:55.960

是的，我经常这样做是为了提高性能（不是为了成本）。这里的好处是你只序列化一次，整个操作就像一个事务。这意味着您的所有更改都将全部成功或全部失败。

我真的不知道你说的多个部分是什么意思？你的意思是多个分区？这是不可能的，所有实体都应该在同一个分区中（并且每个批次限制为 100 个项目）。

这是一个非常详细的解释：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)

# mysql - MySQL 1064 导入 sql 文件时出错

> ID：11778194
> 
> 赞同：0
> 
> 时间：2012-08-02T13:14:24.607
> 
> 标签：mysql, syntax, mysql-error-1064

我正在尝试做一件非常简单的事情——将一个表导入我的数据库。

```
mysql> dbname < libmysql.sql;

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'dbname < 
libmysql.sql' at line 1 
```

我不明白，有什么问题。我什至试着做

`-u username -h host -p dbname < libmysql.sql`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:16:03.363

您正在混淆`mysql>`提示符和操作系统的命令行提示符。如果您已经连接到 MySQL 并在`mysql>`提示符下，请[使用`SOURCE`命令](http://dev.mysql.com/doc/refman/5.0/en/batch-commands.html)`USE`导入文件，如果您尚未在命令行中指定它，请确保您已选择数据库...

```
mysql> USE dbname;
mysql> SOURCE libmysql.sql; 
```

`<`for 输入重定向用于操作系统的命令行，如下所示：

```
# Example Unix command line...
$ mysql -u username -ppassword dbname < libmysql.sql 
```

也可以通过管道将其输入，但除非 SQL 文件正在被管道中的其他进程修改，否则您不希望这样做：

```
$ cat libmysql.sql | mysql -u username -ppassword dbname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:17:28.027

如果您使用*PHPMyAdmin*导出数据库

*   首先创建数据库
*   写“使用数据库名称”
*   导入数据库

# java - seialVersionUID 更新类理解

> ID：11778196
> 
> 赞同：0
> 
> 时间：2012-08-02T13:14:34.567
> 
> 标签：java, serialization

我有一个包含变量 ABC 的序列化类。我在类中声明了一个 serialVersionUID。我使用向量将类的实例保存到文本文件中。如果我要更改类（添加变量 D），我现在有 2 个不同的类（我试图从文件中读取的 ABC 和文件中的 ABCD）。如果我保持 serialVersionUID 相同，它是否会忽略 D 感觉我试图读取的内容只有 ABC？例子：

```
Class MyClass implements serializable
{
    serialVersionUID = 12345;
    int a = 0;
    int b = 0;
    int c = 0;  
}

Class implmentation
{
   MyClass me = new MyClass();
   me.a = 2;
   me.b = 4;
   me.c = 6;
} 
```

// 使用 objectOutputStream 保存到 txt 文件

// 稍后更改 myClass 以添加 int d = 0;

如果我想从文本文件中读取原始的 myClass 对象（我），它还能读取吗？

抱歉，我没有 SSCCE，但我想在开始研究之前进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:45:45.710

请看这里[http://denis-zhdanov.blogspot.com/2009/09/serialversionuid-update-policy-on-class.html](http://denis-zhdanov.blogspot.com/2009/09/serialversionuid-update-policy-on-class.html)

删除字段 - 如果在类中删除字段，写入的流将不包含其值。当流被较早的类读取时，该字段的值将设置为默认值，因为流中没有可用的值。但是，此默认值可能会对早期版本履行其合同的能力产生不利影响；

添加字段 - 当正在重构的类具有流中未出现的字段时，对象中的该字段将被初始化为其类型的默认值。如果需要特定于类的初始化，该类可以提供一个 readObject 方法，该方法可以将字段初始化为非默认值；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T09:52:44.083

与其依赖未经参考且未经审核的第三方博客，请参阅对象序列化规范的[对象版本控制](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/version.html)部分。

# c++ - 检查数组c ++中的值

> ID：11778199
> 
> 赞同：0
> 
> 时间：2012-08-02T13:14:42.657
> 
> 标签：c++, arrays

我有一个数组：

```
int array[5]; 
```

我将使用这个数组在其中放入一些值。现在我的问题是：在填写一些数字后，如何检查是否在第 i 位的数组中填写了某些内容？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:18:26.107

没有这种“优雅”的方式。

做到这一点的唯一方法是有一些特殊的价值，这将表明“未填充”。例如，

```
int array[5] = { -1, -1, -1, -1, -1 }; 
```

另一种选择是有一个位图，它会告诉你哪些位置被填充，哪些 - 没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:18:43.253

该数组包含从实例化那一刻起的值，因此您无法查询它以检查它是否已“填充”。但是您可以保留一个单独的数据结构来跟踪您填充了哪些元素。或者您可以将数组和其他数据结构包装在一个类中，该类允许您为数组分配值*并*检查它们是否已被分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:30:36.217

因为它是 C++，为什么不使用 std::pair 的容器？

该对的一个元素是布尔值（如果设置了值，则为真），另一个是所需的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:20:53.437

**如果 case ' i** ' 已被填充，您可以使用其他数组保存。

```
int array[5]
bool filled[5]={false}; 
array[0] = 42; 
filled[0] = true; 
```

但它很脏。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T13:20:43.533

好吧，您必须询问您在“i”位置的数组是否为 ==NULL 类似这样

```
int array[5];
int main()
{
    array[0]=1;
    array[1]=2;
    array[3]=1;
    for(int i =0; i < 6;i++)
    {
        if(array[i] != NULL)
        {
            cout<<"Value is: "<<array[i]<<endl;
        }else{
            cout<<"The Value is NULL"<<endl;
            }
    }
    return 0;
} 
```

# javascript - 在 Google Maps v3 上创建多条路线的数组

> ID：11778201
> 
> 赞同：4
> 
> 时间：2012-08-02T13:14:55.953
> 
> 标签：javascript, arrays, google-maps-api-3, google-directions-api

我有一个谷歌地图项目，我想做一个数组来使用方向创建多条路线。例如，我在地图上单击并出现一个名为“A”的标记，当我第二次单击时，显示一个名为“B”的标记。好的，这是有效的。

但是当我第三次点击我想显示一个新的“A”点，第四次点击一个新的“B”时，不需要删除其他路线。我只想显示多条路线，我知道我需要创建一个数组，但我不知道我把数组放在哪里等等。我将在这里发布我的代码，如果有人可以为我创建一个示例将是很有帮助。

[这是我的例子](http://www.inventoresdegaragem.com/dbteste/test.html)

这是我没有多条路线的恢复代码：

```
var wayA ;
var wayB;
var doRoute = true;

 if (doRoute == true){
      doRoutes();   
  }    
function doRoutes()
{   
    google.maps.event.addListener(map, "click", function(event) {

        if (!wayA) {
        wayA = new google.maps.Marker({

          position: event.latLng,
          map: map            
        });
        }else if (wayA){
        wayB = new google.maps.Marker({

          position: event.latLng,
          map: map

        });         

        ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();

ser.route({ 'origin': wayA.getPosition(), 'destination':  wayB.getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK')ren.setDirections(res);    
        })          
        }
 });
}     
} 
```

这是决议：

```
var map, ren, ser;
var data = {};
var data2 = {};
var marker;
var infowindow;
 var doMark = true ;
var directionsDisplay;
var wayA = [];
var wayB = [];
var directionResult = [];

//Initialize

function goma()
{

    var mapDiv = document.getElementById('mappy');

    var mapOptions = {
    zoom: 12, 

    center: new google.maps.LatLng(-23.563594, -46.654239),
    mapTypeId : google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map( mapDiv, mapOptions );

  map.controls[google.maps.ControlPosition.TOP_RIGHT].push(control);

  google.maps.event.addDomListener(control, 'click', function() {
    doMark = false;
     markNow();

  });

 google.maps.event.addListener(map, "click", function(event) {
        if (wayA.length == wayB.length) {
        wayA.push(new google.maps.Marker({
      draggable: true,      
          position: event.latLng,
          map: map

        }));
        } else {
        wayB.push(new google.maps.Marker({
      draggable: true,  
          position: event.latLng,
          map: map

        }));

    ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();

    ser.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination':  wayB[wayB.length-1].getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
                    directionResult.push(res);
                    ren.setDirections(res); 
                } else {
                    directionResult.push(null);
                }
    })      

        }
 });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T01:10:29.337

根据你[之前的问题](https://stackoverflow.com/questions/11743799/clickable-driving-direction-on-google-maps-v3)中我[之前的例子](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexA.html)

这就是您所说的： [具有多条路线的工作示例](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexB.html)

**代码片段：**

```
var map, ren, ser;
var data = {};
var data2 = {};
var marker;
var infowindow;
var doMark = true;
var directionsDisplay;

var wayA = [];
var wayB = [];
var directionResult = [];

//Função de Inicio

function goma() {

  var mapDiv = document.getElementById('mappy');

  var mapOptions = {
      zoom: 12,

      center: new google.maps.LatLng(-23.563594, -46.654239),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    //Cria o mapa do google, coloca as definições do mapa, como tipo de visualização, pode ser ROADMAP, SATELLITE, HYBRID, TERRAIN
  map = new google.maps.Map(mapDiv, mapOptions);

  var control = document.createElement('DIV');
  control.style.padding = '1px';
  control.style.border = '1px solid #000';
  control.style.backgroundColor = 'white';
  control.style.cursor = 'pointer';
  control.innerHTML = '<img src="http://i47.tinypic.com/2dlp2fc.jpg" border="0" alt="Image and video hosting by TinyPic">';
  control.index = 1;
  map.controls[google.maps.ControlPosition.TOP_RIGHT].push(control);

  google.maps.event.addDomListener(control, 'click', function() {
    doMark = false;
    markNow();
  });

  google.maps.event.addListener(map, "click", function(event) {
    if (wayA.length == wayB.length) {
      wayA.push(new google.maps.Marker({
        draggable: true,
        position: event.latLng,
        map: map

      }));
    } else {
      wayB.push(new google.maps.Marker({
        draggable: true,
        position: event.latLng,
        map: map

      }));

      //Renderiza a rota, o draggable é diz se o waypoint é arrastavel ou não
      ren = new google.maps.DirectionsRenderer({
        'draggable': true
      });
      ren.setMap(map);
      ren.setPanel(document.getElementById("directionsPanel"));
      ser = new google.maps.DirectionsService();

      //Cria a rota, o DirectionTravelMode pode ser: DRIVING, WALKING, BICYCLING ou TRANSIT
      ser.route({
        'origin': wayA[wayA.length - 1].getPosition(),
        'destination': wayB[wayB.length - 1].getPosition(),
        'travelMode': google.maps.DirectionsTravelMode.DRIVING
      }, function(res, sts) {
        if (sts == 'OK') {
          directionResult.push(res);
          ren.setDirections(res);
        } else {
          directionResult.push(null);
        }
      })

    }
  });
}

var html = "<table>" +
  "<tr><td>Nome:</td> <td><input type='text' id='name'/> </td> </tr>" +
  "<tr><td>Endereco:</td> <td><input type='text' id='address'/></td> </tr>" +
  "<tr><td>Tipo:</td> <td><select id='type'>" +
  "<option value='oficina' SELECTED>oficina</option>" +
  "<option value='restaurante'>restaurante</option>" +
  "</select> </td></tr>" +
  "<tr><td></td><td><input type='button' value='Salvar' onclick='saveData()'/></td></tr>";
infowindow = new google.maps.InfoWindow({
  content: html
});

//Geocoding (pesquisar)
function marcar() {
  var endereco = document.getElementById("endereco").value;
  //alert(endereco)
  geocoder = new google.maps.Geocoder();
  geocoder.geocode({
    'address': endereco
  }, function(results, status) {
    if (status = google.maps.GeocoderStatus.OK) {
      latlng = results[0].geometry.location;
      markerInicio = new google.maps.Marker({
        position: latlng,
        map: map
      });
      map.setCenter(latlng);
    }
  });
}

function markNow() {
  if (doMark == false) {

    google.maps.event.addListener(map, "click", function(event) {
      marker = new google.maps.Marker({

        position: event.latLng,
        map: map

      });
      google.maps.event.addListener(marker, "click", function() {
        infowindow.open(map, marker);
      });
    });
  }
}

google.maps.event.addDomListener(window, 'load', goma);
```

```
html,
body {
  height: 100%;
  width: 100%;
}
```

```
<script src="http://maps.google.com/maps/api/js"></script>
<div id="mappy" style="float:left;width:70%; height:100%"></div>
<div id="directionsPanel" style="float:right;width:30%;height 100%"></div>
<div>
  <label>Endereco</label>
  <input type="text" id="endereco">
</div>

<input type="button" value="Marcar" id="marcar" onClick="marcar()">

</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T06:50:32.133

带有航点的单个地图上的多条路线

```
 <script>
     var map;

      var directionsService;
      var stepDisplay;

      var position;
      var marker = [];
      var polyline = [];
      var poly2 = [];
      var poly = null;
      var startLocation = [];
      var endLocation = [];
      var timerHandle = [];   

      var stops_data = [[ {"Geometry":{"Latitude":23.05242,"Longitude":72.53375}},

                          {"Geometry":{"Latitude":23.03007,"Longitude":72.59664}}

                        ] ,[ {"Geometry":{"Latitude":23.00959,"Longitude":72.56189}},
                             {"Geometry":{"Latitude":23.05754,"Longitude":72.55302}}
                           ]];

      var a,z,b;        
      var add;
      var map; 

      var speed = 0.000005, wait = 1;
      var infowindow = null;

      var myPano;   
      var panoClient;
      var nextPanoId;         

      //    var locations=new Array(new google.maps.LatLng(34.04429454929703, -118.22793351693724),new google.maps.LatLng(33.688522885631706, -116.15151750131224));

          var directionsDisplay = [];

          directionsDisplay[0] = new window.google.maps.DirectionsRenderer({
              suppressMarkers: false,
              suppressInfoWindows: true
            });

          directionsDisplay[1] = new window.google.maps.DirectionsRenderer({
              suppressMarkers: false,
              suppressInfoWindows: true
            });

          var map;
          var mapOptions = { center: new google.maps.LatLng(42.5584308, -70.8597732), zoom: 3,
            mapTypeId: google.maps.MapTypeId.ROADMAP };

          function initialize() 
          {
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            directionsService = new google.maps.DirectionsService();        

         //   Setroute(locations[0],locations[1],directionsDisplay[0]);

           // Setroute(locations2[0],locations2[1],directionsDisplay[1]);

            Tour_startUp(stops_data[0]);

            window.tour.loadMap(map, directionsDisplay[0]);

            if (stops_data[0].length > 1)
                window.tour.calcRoute(stops_data[0],directionsService, directionsDisplay[0]);

            Tour_startUp(stops_data[1]);
            window.tour.loadMap(map, directionsDisplay[1]);
            window.tour.calcRoute(stops_data[1],directionsService, directionsDisplay[1]);

          }

    function Tour_startUp(stops) {

        if (!window.tour) window.tour = {
            updateStops: function (newStops) {
                stops = newStops;
            },

            loadMap: function (map, dirdis) {
                var myOptions = {
                    zoom: 15,
                    center: new window.google.maps.LatLng(51.507937, -0.076188), // default to London
                    mapTypeId: window.google.maps.MapTypeId.ROADMAP
                };
                map.setOptions(myOptions);
                dirdis.setMap(map);
            },
            calcRoute: function (stops_new,directionsService, dirdis) {
                var batches = [];
                var itemsPerBatch = 10; // google API max = 10 - 1 start, 1 stop, and 8 waypoints
                var itemsCounter = 0;
                var wayptsExist = stops_new.length > 0;
                var time= [];
                while (wayptsExist) {
                    var subBatch = [];
                    var subitemsCounter = 0;

                   // alert('second'+stops_new.length);        
            //alert(stops_new[0].Geometry.Latitude +' ===== ' +stops_new[0].Geometry.Longitude);        

                    for (var j = itemsCounter; j < stops_new.length; j++) {
                        subitemsCounter++;

                    //alert(stops[j].Geometry.Time);
                        subBatch.push({
                            location: new window.google.maps.LatLng(stops_new[j].Geometry.Latitude, stops_new[j].Geometry.Longitude),
                            stopover: true                               
                        });

                       //time.push(stops[j].Geometry.Time);

                        if (subitemsCounter == itemsPerBatch)
                            break;
                    }

                    itemsCounter += subitemsCounter;
                    batches.push(subBatch);
                    wayptsExist = itemsCounter < stops_new.length;
                    // If it runs again there are still points. Minus 1 before continuing to
                    // start up with end of previous tour leg
                    itemsCounter--;
                }

                // now we should have a 2 dimensional array with a list of a list of waypoints
                var combinedResults;
                var unsortedResults = [{}]; // to hold the counter and the results themselves as they come back, to later sort
                var directionsResultsReturned = 0;

                for (var k = 0; k < batches.length; k++) {
                    var lastIndex = batches[k].length - 1;
                    var start = batches[k][0].location;
                    var end = batches[k][lastIndex].location;

                    // trim first and last entry from array
                    var waypts = [];
                    waypts = batches[k];
                    waypts.splice(0, 1);
                    waypts.splice(waypts.length - 1, 1);

                    var request = 
                        {
                        origin: start,
                        destination: end,
                        waypoints: waypts,
                        travelMode: window.google.maps.TravelMode.WALKING
                    };

                  //  alert('start'+start);

                 //   alert('end'+end);

                    (function (kk) {
                        directionsService.route(request, function (result, status) {
                            if (status == window.google.maps.DirectionsStatus.OK) {

                                 polyline[0] = new google.maps.Polyline({
                                     path: [],
                                     strokeColor: '#FFFF00',
                                     strokeWeight: 3
                                     });

                                 poly2[0] = new google.maps.Polyline({
                                     path: [],
                                     strokeColor: '#FFFF00',
                                     strokeWeight: 3
                                     });     

                                var unsortedResult = { order: kk, result: result };
                                unsortedResults.push(unsortedResult);

                                directionsResultsReturned++;

                                if (directionsResultsReturned == batches.length) // we've received all the results. put to map
                                {
                                    // sort the returned values into their correct order
                                    unsortedResults.sort(function (a, b) { return parseFloat(a.order) - parseFloat(b.order); });
                                    var count = 0;
                                    for (var key in unsortedResults) {
                                        if (unsortedResults[key].result != null) {
                                            if (unsortedResults.hasOwnProperty(key)) {
                                                if (count == 0) // first results. new up the combinedResults object
                                                    combinedResults = unsortedResults[key].result;
                                                else {
                                                    // only building up legs, overview_path, and bounds in my consolidated object. This is not a complete
                                                    // directionResults object, but enough to draw a path on the map, which is all I need
                                                    combinedResults.routes[0].legs = combinedResults.routes[0].legs.concat(unsortedResults[key].result.routes[0].legs);
                                                    combinedResults.routes[0].overview_path = combinedResults.routes[0].overview_path.concat(unsortedResults[key].result.routes[0].overview_path);

                                                    combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getNorthEast());
                                                    combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getSouthWest());
                                                }
                                                count++;
                                            }
                                        }
                                    }
                                    dirdis.setDirections(combinedResults);

                                    var legs = combinedResults.routes[0].legs;

                                    var path = combinedResults.routes[0].overview_path;

                                    //alert(path.length);

                                 //  alert(legs.length);

                                  //setRoutes(legs[0].start_location,legs[legs.length-1].end_location);

                                    for (var i=0; i < legs.length;i++)
                                        {
                                              var markerletter = "A".charCodeAt(0);
                                              markerletter += i;
                                      markerletter = String.fromCharCode(markerletter);

                                      if (i == 0) { 

                                        //marker[0] = createMarker2(legs[i].start_location,"start",legs[i].start_address,"green");
                                      }

                                      var steps = legs[i].steps;

                                    //  alert('arrival time : '+legs[i].arrival_time.text);

                                //  var duration = steps.duration_in_traffic;

                                  // alert(duration.text);

                                      for (j=0;j<steps.length;j++) 
                                      {

                                          var nextSegment = steps[j].path;

                                          for (k=0;k<nextSegment.length;k++) 
                                              {
                                              polyline[0].getPath().push(nextSegment[k]);
                                              //bounds.extend(nextSegment[k]);
                                                 }
                                      }

                                    //  createMarker(directionsDisplay.getMap(),legs[i].start_location,"marker"+i,"some text for marker "+i+"<br>"+legs[i].start_address,markerletter);   
                                    }
                                        // Marker for start point 
                                    createMarker(dirdis.getMap(),legs[0].start_location,"marker"+0,"Start Point<br>"+legs[0].start_address,'A');

                                    var i=legs.length;
                                    var markerletter = "A".charCodeAt(0);
                                      markerletter += i;
                                    markerletter = String.fromCharCode(markerletter);

                                    // marker for End Point 
                                    createMarker(dirdis.getMap(),legs[legs.length-1].end_location,"marker"+i,"End Point <br>"+legs[legs.length-1].end_address,'B');

                                    polyline[0].setMap(map);

                                    //startAnimation(0);  
                                }
                            }
                        });
                    })(k);
                }
            }
        };
    }

    var icons = new Array();
    icons["red"] = new google.maps.MarkerImage("mapIcons/marker_red.png",
          // This marker is 20 pixels wide by 34 pixels tall.
          new google.maps.Size(20, 34),
          // The origin for this image is 0,0.
          new google.maps.Point(0,0),
          // The anchor for this image is at 9,34.
          new google.maps.Point(9, 34));

    function getMarkerImage(iconStr) {

    //alert(iconStr);

       if ((typeof(iconStr)=="undefined") || (iconStr==null)) { 
          iconStr = "red"; 
       }

    if(iconStr == 'A')
    {
       // for start point 

       if (!icons[iconStr]) {
          icons[iconStr] = new google.maps.MarkerImage("http://www.google.com/mapfiles/dd-start.png",
          // This marker is 20 pixels wide by 34 pixels tall.
          new google.maps.Size(20, 34),
          // The origin for this image is 0,0.
          new google.maps.Point(0,0),
          // The anchor for this image is at 6,20.
          new google.maps.Point(9, 34));
       } 

    }
    if (iconStr == 'B')
    {

        // for end point

        if (!icons[iconStr]) {
              icons[iconStr] = new google.maps.MarkerImage("http://www.google.com/mapfiles/dd-end.png",
              // This marker is 20 pixels wide by 34 pixels tall.
              new google.maps.Size(20, 34),
              // The origin for this image is 0,0.
              new google.maps.Point(0,0),
              // The anchor for this image is at 6,20.
              new google.maps.Point(9, 34));
           } 

        }
    return icons[iconStr];
    }
      // Marker sizes are expressed as a Size of X,Y
      // where the origin of the image (0,0) is located
      // in the top left of the image.

      // Origins, anchor positions and coordinates of the marker
      // increase in the X direction to the right and in
      // the Y direction down.

      var iconImage = new google.maps.MarkerImage('mapIcons/marker_red.png',
          // This marker is 20 pixels wide by 34 pixels tall.
          new google.maps.Size(20, 34),
          // The origin for this image is 0,0.
          new google.maps.Point(0,0),
          // The anchor for this image is at 9,34.
          new google.maps.Point(9, 34));

      var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
          // The shadow image is larger in the horizontal dimension
          // while the position and offset are the same as for the main image.
          new google.maps.Size(37, 34),
          new google.maps.Point(0,0),
          new google.maps.Point(9, 34));
          // Shapes define the clickable region of the icon.
          // The type defines an HTML &lt;area&gt; element 'poly' which
          // traces out a polygon as a series of X,Y points. The final
          // coordinate closes the poly by connecting to the first
          // coordinate.
      var iconShape = {
          coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
          type: 'poly'
      };

    function createMarker(map, latlng, label, html, color) {

    //alert(color);
    //  alert("createMarker("+latlng+","+label+","+html+","+color+")");

        var contentString = '<b>'+label+'</b><br>'+html;

        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            shadow: iconShadow,
            icon: getMarkerImage(color),
            shape: iconShape,
            title: label,
            zIndex: Math.round(latlng.lat()*-100000)<<5
            });
            marker.myname = label;

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(contentString); 
            infowindow.open(map,marker);
            });

        return marker;
    }

    function createMarkerForStops(map, latlng, label, html, color) {
        // alert("createMarker("+latlng+","+label+","+html+","+color+")");

       var contentString = '<b>'+label+'</b><br>'+html;

            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: label,
                //icon:'http://google-maps-icons.googlecode.com/files/stop.png',
                icon:'icon/stop.png',
                zIndex: Math.round(latlng.lat()*-100000)<<5
                });
                marker.myname = label;

            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(contentString); 
                infowindow.open(map,marker);
                });
            return marker;
        }

          google.maps.event.addDomListener(window, 'load', initialize);

    </script>        
    <div id="map_canvas"></div> 
```

# facebook - 如何在 Cocoa 应用程序中添加 Facebook Like 按钮

> ID：11778206
> 
> 赞同：-2
> 
> 时间：2012-08-02T13:15:08.670
> 
> 标签：facebook, cocoa

如何将 Facebook 的“赞”按钮（带有它的功能）添加到 Cocoa 应用程序（不是 iOS 应用程序）中，如下图所示？

![在此处输入图像描述](../Images/8fe0f049431f41164856c3d7b0fdef3c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:07:32.250

有[Facebook](https://developers.facebook.com)和[Twitter](https://dev.twitter.com/docs/api)（对于您的其他问题）API。你试过什么？你在哪里卡住了？

# php - php mysql数据没有出现在表中

> ID：11778208
> 
> 赞同：0
> 
> 时间：2012-08-02T13:15:11.243
> 
> 标签：php, mysql, sql

目前，我在一个文本框中提交了两个“WS_ID”数字，它们之间有一个空格。我拥有的 SQL 命令能够更新 sql 数据库中的两个结果，但是当文本框中只提交一个“WS_ID”时，什么都没有更新。任何帮助都会很棒。非常感谢。

```
 if(isset($_GET["Update"]))
        {   $DEP_TIME = $_GET["DEP_TIME"];
            $ARR_TIME = $_GET["ARR_TIME"];
            $TRAVEL_TIME = $_GET["TRAVEL_TIME"];
            $HRS_WORKED = $_GET["HRS_WORKED"];
            $INC_DEP_TIME = $_GET["INC_DEP_TIME"];
            $INC_LAB_DAY = $_GET["INC_LAB_DAY"];
            $LAB_DATE = $_GET["LAB_DATE"];
            $WS_ID = $_GET["WS_ID"];
            $WS_ID2 = explode(" ", $WS_ID);
            $SQL = "UPDATE `elecsys`.`worksheet_labour` SET DEP_TIME = $DEP_TIME, ARR_TIME = $ARR_TIME, TRAVEL_TIME = $TRAVEL_TIME, HRS_WORKED = $HRS_WORKED WHERE WS_ID = $WS_ID2[0] OR WS_ID = $WS_ID2[1]"; 
            $resultset2 = mysql_query($SQL);                
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:18:09.790

在您的 sql 中，您可能需要在当前值周围加上引号。但是，目前您会受到 SQL 注入的影响。您应该使用 PDO 或 MYSQLI 来避免这种情况。

什么时候`$WS_ID2[1]`是空白的，`WHERE WS_ID=value OR WS_ID = ;`我不相信 MYSQL 知道那是没有引号的空白。

### 使用 MYSQLI 的代码，以防止 SQL 注入和您的代码在从 PHP 中删除不推荐使用的代码后失败：

```
$con = new mysqli($databasehost,$dbuser,$dbpassword);
if ($con->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " .  $mysqli->connect_error;
}
//Set all your variables here, omitted from code...
$stmt = $con->prepare("UPDATE `elecsys`.`worksheet_labour` SET DEP_TIME = ?, ARR_TIME = ?, TRAVEL_TIME = ?, HOURS_WORKED = ?, WHERE WS_ID = ? OR WS_ID = ?");
//bind using data according to http://www.php.net/manual/en/mysqli-stmt.bind-param.php
$stmt->bind_param('ssddii', $DEP_TIME, $ARR_TIME, $TRAVEL_TIME, $HRS_WORKED, $WS_ID2[0], $WS_ID2[1]);
$stmt->execute();
$stmt->close();
$con->close(); 
```

另外，我的另一个想法是，如果您只有一个 的值`$WS_ID2`，PHP 不会为 $WS_ID[1] 给出越界错误吗？

# jqplot - jqPlot IE8 打印问题

> ID：11778209
> 
> 赞同：1
> 
> 时间：2012-08-02T13:15:13.950
> 
> 标签：jqplot

我正在使用 jqPlot，即使使用 excanvas.js 的 IE8 似乎也能正常工作。当我预览要打印的页面时，一切看起来都不错，但是当我打印页面时，图例显示但图表没有。如果我将页面导出到 Adob​​e PDF，图表的区域就在那里，并且图表有时是可见的，直到您滚动它然后它被隐藏。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:28:06.147

It cal be solved by using the jquery after the jqplot has been drawn

```
$('.jqplot-point-label').append('%');
    var imgData = $('#displaysection').jqplotToImageStr({});
    var imgElem = $('<img/>').attr('src',imgData);
    $('#displaysection').append(imgElem); 
```

# objective-c - epson tm-t88v中的打印页面模式

> ID：11778214
> 
> 赞同：0
> 
> 时间：2012-08-02T13:15:32.147
> 
> 标签：objective-c, ios, printing, epson

有没有人如何在 ePOS ios SDK 中使用页面模式将要打印的文本居中？

这是我的代码

```
int retVal = success;

retVal = [builder addPageBegin];
retVal = [builder addText:@"Text"];
retVal = [builder addPageEnd]; 
```

但它不起作用，也不会打印。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T10:40:37.507

您可以向打印机发送命令以设置页面格式。例如，要使文本居中，您可以使用：ESC a 1

# asp.net - 将 SQL Server 2008 数据库附加到 SQL Server 2005 失败

> ID：11778220
> 
> 赞同：1
> 
> 时间：2012-08-02T13:16:08.153
> 
> 标签：asp.net, sql-server

我在 Visual Studio 2010 的 ASP.net 4.0 中开发了一个应用程序，与 SQL Server 2008 数据库连接。我将我的 ASP.net 应用程序复制到带有 SQL Server 2005 EXPRESS、OS Windows 2003 werver 的网络服务器 IIS 6.0。当我尝试浏览我的网站时，出现以下错误：

> 无法打开数据库“C:\TELEFOON\TELEFOON\APP_DATA\ASPNETDB.MDF”，因为它是 655 版本。此服务器支持 611 及更早版本。不支持降级路径。
> 
> 无法打开新数据库“C:\TELEFOON\TELEFOON\APP_DATA\ASPNETDB.MDF”。CREATE DATABASE 已中止。尝试为文件 C:\Telefoon\Telefoon\App_Data\aspnetdb.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

我明白这个问题，但有解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:19:15.700

听起来您在 SQL Server 2008 R2 上创建了数据库，并试图在 SQL Server 2008（或 SQL Server 2005？我忘记了内部数据库版本号）上打开它。你不能像这样倒退；您需要安装 SQL Server 2008 R2 以直接恢复数据库，或者您需要创建一个空数据库并使用 SSMS 向导复制表/结构（如导入/导出数据，这在版本之间有效）尽管 OD 有相反的评论，或生成脚本选项）或 3rd 方工具。我在这里写了一些关于第 3 方工具的博客：

[http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

此评论更多关于 2008 R2 -> 2008 问题：

每次发生这种情况时，我都会诅咒微软将 SQL Server 的完整版本命名为“R2”的绝对愚蠢的决定——我在这里写了一篇博客，因为每天似乎都有人认为 2008 和 2008 R2 是“相同的版本”或2008 R2 只是一个服务包：

[https://sqlblog.org/2011/02/09/is-sql-server-2008-r2-a-full-release-of-sql-server](https://sqlblog.org/2011/02/09/is-sql-server-2008-r2-a-full-release-of-sql-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:33:04.777

尝试以下可能会有所帮助：

*   在 SSMS 向导中选择您的数据库
*   右键单击然后选择任务和生成脚本。
*   启用对话框中的所有选项，包括脚本数据和“SQL Server 2005 脚本”。
*   尝试在 SQL Server 2005 上运行脚本。

如果这没有帮助，我可以向您推荐[OmegaSync](http://www.spectralcore.com/omegasync/)

# javascript - 如何在循环jQuery中将数据存储在数组中

> ID：11778225
> 
> 赞同：8
> 
> 时间：2012-08-02T13:16:26.493
> 
> 标签：javascript, jquery

如何在循环中将数据存储在数组中？

```
 var images;
    var i = 0;

    $('#cover div').each(function()
    {
        alert($(this).attr('id'));
        //I should store id in an array
    });

    <div id="cover">
        <div id="slider_1"><p class="content">SLIDER ONE</p></div>
        <div id="slider_2"><p class="content">SLIDER TWO</p></div>
        <div id="slider_3"><p class="content">SLIDER THREE</p></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T13:18:22.300

试试这个，

```
var arr = [];
i = 0;
$('#cover div').each(function()
{
        alert($(this).attr('id'));
        arr[i++] = $(this).attr('id');
        //I should store id in an array
}); 
```

使用 javascript 对象而不是 jquery 获取 id 以提高性能的其他方式。

```
var arr = [];
i = 0;
$('#cover div').each(function()
{
      arr[i++] = this.id;
}); 
```

**编辑**您也可以使用 jQuery [map()](http://api.jquery.com/jQuery.map/)

**[现场演示](http://jsfiddle.net/nUqEQ/2/)**

```
arr = $('#cover div').map(function(){
    return this.id;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:20:47.027

javascript 数组有一个 push(el) 方法，如下所示：

```
var images;
var i = 0;

$('#cover div').each(function()
{
    alert($(this).attr('id'));
    images.push($(this).attr('id'));
});

<div id="cover">
    <div id="slider_1"><p class="content">SLIDER ONE</p></div>
    <div id="slider_2"><p class="content">SLIDER TWO</p></div>
    <div id="slider_3"><p class="content">SLIDER THREE</p></div>
</div> 
```

# android - OnClickListener 不适用于 GridView 中的第一项

> ID：11778228
> 
> 赞同：22
> 
> 时间：2012-08-02T13:16:35.453
> 
> 标签：android, android-gridview

我在创建基于 GridView 的日历时遇到问题。这是网格：

![GridView 日历](../Images/74dcf2b2f2ea5589a2a8e8ca6b324f9b.png)

这应该是一个充满事件的日历，所以我让我的适配器实现 OnClickListener 并为日历中的每个按钮设置该侦听器。**除了**第一个按钮（在本例中为 30 号）之外，它对每个按钮都非常有效。当我单击它时它不起作用，但是当我在尝试单击第一个按钮后单击另一个按钮时，它会在单击另一个按钮之前执行第一个按钮的单击。

我已经扫描了大约 10 页的相关问题，并没有发现有人遇到这个问题。请帮忙！

如所问，这是我的代码的 getView 函数：

```
 public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        ViewHolder holder;
        if (row == null)
        {
            holder = new ViewHolder();
            LayoutInflater inflater = (LayoutInflater) _context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.calendar_day_gridcell, parent, false);
            holder.gridCell = (Button) row.findViewById(R.id.calendar_day_gridcell);
            holder.multiDayEvent = (EventLengthView)row.findViewById(R.id.eventLengthView);
        }
        else{
            holder = (ViewHolder)row.getTag();
        }

        int calendarGridHeight = (calendarView.getHeight()-5)/(getCount()/7);
        AbsListView.LayoutParams params = new AbsListView.LayoutParams(
                android.view.ViewGroup.LayoutParams.FILL_PARENT,
                calendarGridHeight);
        row.setLayoutParams(params);

        //Change the background drawable depending on the position in the calendar
        if ((position+1) % 7 == 0){
            holder.gridCell.setBackgroundDrawable(getResources().getDrawable(R.drawable.calendar_button_selector_end_row));
        }
        if (getCount() - position < 8){
            holder.gridCell.setBackgroundDrawable(getResources().getDrawable(R.drawable.calendar_button_selector_end_column));
        }
        if (position == getCount()-1){
            holder.gridCell.setBackgroundDrawable(getResources().getDrawable(R.drawable.calendar_button_selector_end));
        }
        holder.gridCell.setOnClickListener(this);

        holder.gridCell.setTag(null);//clear tags

        // ACCOUNT FOR SPACING
        String[] day_color = list.get(position).split("-");
        int theday = Integer.parseInt(day_color[0]);
        int themonth = Integer.parseInt(day_color[2]);
        int theyear = Integer.parseInt(day_color[3]);
        String date = DateFormat.format("dd/M/yy", new Date(theyear,themonth,theday)).toString();
        if ((!eventsMap.isEmpty()) && (eventsMap != null))
        {
            if (eventsMap.containsKey(date))
            {
                holder.multiDayEvent.SetMeasure(calendarView.getWidth()/7, calendarGridHeight);

                holder.multiDayEvent.setVisibility(View.VISIBLE);
                //holder.singleDayEvent.setVisibility(View.VISIBLE);
                Event event = (Event) eventsMap.get(date);
                holder.multiDayEvent.AddEvent(event);
                holder.gridCell.setTag(event);
            }
            else{
                //holder.singleDayEvent.setVisibility(View.GONE);
                holder.multiDayEvent.setVisibility(View.GONE);
            }
        }

        // Set the Day GridCell
        holder.gridCell.setText(Integer.toString(theday));

        if (day_color[1].equals("GREY"))
        {
            holder.gridCell.setTextColor(Color.GRAY);
        }
        if (day_color[1].equals("WHITE"))
        {
            holder.gridCell.setTextColor(Color.WHITE);
        }
        if (day_color[1].equals("BLUE"))
        {
            holder.gridCell.setTextColor(Color.BLUE);
        }

        row.setTag(holder);
        return row;
    }

    public class ViewHolder{
        Button gridCell;
        ImageView singleDayEvent;
        EventLengthView multiDayEvent;
    }

    public void onClick(View view)
    {
        if (view.getTag() != null){
            Event event = (Event)view.getTag();

            eventListView.setAdapter(new EventListAdapter(CalendarScreen.this, event));
            eventListViewLayout.setVisibility(View.VISIBLE);
            eventListViewLayout.startAnimation(fadeIn);
        }
        else if (eventListViewLayout.getVisibility() == View.VISIBLE){
            onBackPressed();
        }
    } 
```

除了左上角的第一个网格单元外，每个网格单元都会调用 onClick

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-24T13:23:12.113

我遇到了同样的问题。将 setLayoutParams 保留在 if(view == null) 子句中解决了。您不必以这种方式牺牲视图回收。

像 ：

```
 if(row == null){
   // inflate row
   row.setLayoutParams(params);
   //remaining code
 }else{
    holder = (ViewHolder)row.getTag();
 }
 // everything else 
```

我不知道它为什么有效，但它对我有用。我还注意到，stackoverflow 中有关同一问题的所有代码也在 if 子句之外使用了 setLayoutParams。这是我第一次，所以我不知道我是否可以到处张贴。希望它有所帮助。

资料来源：大量的线索和错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-15T19:01:16.327

**在.setAdapter()**方法之后，在您的活动中使用您的**OnClickListener()**，而不是在您的适配器类中。

 **```
gridView.setAdapter(adapter);
gridView.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView parent, View v, int position, long id) {
    Toast.makeText(GridViewActivity.this, "" + position,
             Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-08T15:11:51.643

好的，我找到了解决方案。问题是这些行：

```
ViewHolder holder;
if (convertView == null)
{
    holder = new ViewHolder();
    LayoutInflater inflater = (LayoutInflater) _context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.calendar_day_gridcell, parent, false);
    holder.gridCell = (Button) convertView.findViewById(R.id.calendar_day_gridcell_button);
    holder.multiDayEvent = (EventLengthView) convertView.findViewById(R.id.eventLengthView);
    convertView.setTag(holder);
}
else {
    holder = (ViewHolder) convertView.getTag();
} 
```

当在那里放置 gridCell 按钮时，不知何故，它混淆了适配器中第一个位置的点击侦听器。我最终通过仅在每次传递中都将支架设置为固定它来修复它，而不是通过标签获取它（这对性能更好，但是哦）。感谢大家的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T16:49:03.620

对于它的价值，我也有这个问题（gridview 中的第一个单元格延迟了 onclick）。

在我的例子中，我使用了一个带有动态图像视图集的（轻微定制的）gridviews，我将使其可见/消失并重绘gridview。所有预先准备好的图像视图并存储在适配器中。

最初，我在适配器上使用了 notifyDataSetChanged() ，但这会导致每当更新集合时第一个单元格的点击延迟问题。我改为只是使gridview无效，现在一切都很好。请记住，我的所有视图都已创建并存储在适配器中，它只是检查哪些视图真正可见的 getview 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-08T16:49:54.910

我有同样的问题。第一项的点击事件明显延迟。我已经在使用 notifyDataSetInvalidated()。 **使用 onItemClickListener() 解决了这个问题**，尽管我仍然不明白为什么单个项目上的 onClick 侦听器有这种行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T13:29:11.863

在 GridView 对象上设置 onItemClickListener，而不是在每个按钮上设置 onClickListeners。

我在[这里](https://stackoverflow.com/questions/3434411/android-onclicklistener-not-firing-in-gridview-2-2-only)发现了与您的问题有关的另一个问题。赏金可能吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-21T07:14:11.970

花了这么多天，设置布局参数如下..

```
if (view == null) {

        // call the user's implementation
        view = mInflater.inflate(mViewId, null);
        holder = createHolder(view);
        // we set the holder as tag
        view.setTag(holder);

        rlMainCell = (RelativeLayout)view.findViewById(R.id.rlMainCell);
        rlMainCell.setLayoutParams(new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, (int) view.getResources().getDimension(R.dimen._128sdp)));

    } else {
        // get holder back...much faster than inflate
        holder = (ViewHolder) view.getTag();
    } 
```

它对我来说绝对没问题**

# java - 以编程方式从 ant-task 检索返回码

> ID：11778229
> 
> 赞同：2
> 
> 时间：2012-08-02T13:16:40.883
> 
> 标签：java, ant

以编程方式检索返回码时遇到问题...跟随文件。（确实删掉了一些公司特有的东西）。我有 2 个文件，一个包含 java-task 的通用文件和一个定义 sime 属性和 ant-task 的特定文件。

如何在执行的 java-test 中获取 build.rc？文件末尾的 echo-message 提供了实际的返回码，但 p.getProperty("build.rc") 返回 null。

**具体的.build.xml**

```
<project basedir="../../../.." name="run-joblauncher">
     <property name="prop1" value="valProp1" />
     <ant antfile="./dev/script/general.xml" dir="${basedir}" target="RUN-MYCLASS" inheritAll="true"/>
</project> 
```

**通用.xml**

```
<project basedir="../../../.." default="RUN-MYCLASS" name="run-specifictest"> <target name="RUN-MYCLASS"> 
     <property name="returnCode" value="99"/>
     <target name="RUN-MYCLASS">            
          <java classname="my.company.class" fork="true" resultproperty="build.rc" failonerror="false">
                <arg value="${workdir}"/>
                <classpath>
                     <pathelement path="${java.class.path}"/>
                </classpath>
          </java>   
      </target> 
</project> 
```

**myJunitTest.java**

```
public class TestAntScripts extends TestCase {

public void testMyAnt() throws IOException {

    File dir = new File("pathToSpecific.xml");

    Project p = null;
    try {
        File buildFile = new File(buildFileName);
        p = new Project();
        DefaultLogger consoleLogger = new DefaultLogger();
        consoleLogger.setErrorPrintStream(System.err);
        consoleLogger.setOutputPrintStream(System.out);
        consoleLogger.setMessageOutputLevel(Project.MSG_INFO);
        p.addBuildListener(consoleLogger);
        p.addBuildListener(new CustomBuildListener(this));
        p.fireBuildStarted();
        p.init();
        ProjectHelper helper = ProjectHelper.getProjectHelper();
        p.addReference("ant.projectHelper", helper);
        helper.parse(p, buildFile);
        p.fireBuildFinished(null);
    } catch (BuildException e) {
        p.fireBuildFinished(e);
        e.printStackTrace();
        System.err.println("AntRunner for buildfile " + buildFileName
                + " failed with Exception ");
    }

    String rc = p.getProperty("returnCode");
    assertEquals(0, Integer.parseInt(rc));

    }

public void taskFinished(String buildRc) {
    assertEquals(0, buildRc);   
    }
} 
```

**编辑：**

为已定义的属性分配值的方法是什么？在 java-target 之外定义了一个 var returnCode 并尝试像`<var name="returnCode" value="${build.rc}"/>`在目标内部一样分配值。不跑。。

**EDIT2：** 添加了一个自定义 BuildListener 并在那里获取 build.rc。

```
 @Override
  public void targetFinished(BuildEvent event) {

    if (event.getTarget().getName().trim().equalsIgnoreCase("RUN-MYCLASS")) {
        String buildRc = event.getTarget().getProject().getProperty("build.rc");    
        tester.taskFinished(buildRc, jobname);
    } 
```

tester 是我的 JUnit-Test，它将在 Constructor 中设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:04:46.007

添加了一个自定义 BuildListener 并在那里获取 build.rc。

```
@Override
public void targetFinished(BuildEvent event) {

if (event.getTarget().getName().trim().equalsIgnoreCase("RUN-MYCLASS")) {
    String buildRc = event.getTarget().getProject().getProperty("build.rc");    
    tester.setReturnCode(buildRc);
} 
```

然后像这样测试

```
assertEquals(0, Integer.parseInt(this.returnCode)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:28:16.187

蚂蚁[手册提到](http://ant.apache.org/manual/Tasks/local.html)

> 属性范围存在于 Apache Ant 的各种“块”级别。这些包括目标以及并行和顺序任务容器（包括 Macrodef 主体）。

很确定这`build.rc`是*本地*的，并且仅在目标范围内有效。所以在目标执行后我们无法访问它。

尝试定义一个全局属性（使用`<property>`元素）并将 java 任务的结果代码分配给该属性。

# entity-framework - 避免导航属性（连接、关系）

> ID：11778233
> 
> 赞同：0
> 
> 时间：2012-08-02T13:16:50.457
> 
> 标签：entity-framework, join, ef-code-first, foreign-keys, code-first

想象一下我有这门课

```
public class Case
{
    [Key]
    [DataMember]
    public int CaseId { get; set; }

    [DataMember]
    public string Title { get; set; }

    [DataMember]
    public string PublicStatusName { get; set; }
} 
```

基本上，我想获取类似这个查询的结果集

```
select c.Id, c.Title, sp.Name
from Case c
inner join StatusGrouping sg on sg.InternalStatusId = c.StatusId
inner join StatusPublic sp on sp.PublicStatusId = sg.PublicStatusId 
where c.Id = 42 
```

并将其放入上面的类中。

我知道我可以在 EF 中制作导航属性和表达外键关系等。因此，一种（丑陋的）可能性是在 Case 类上只具有一个 StatusGrouping 属性。然后在 StatusGrouping 类上有一个 StatusPublic 属性，然后在我读取数据时让 EF 连接层次结构。

但是 StatusGrouping 表只是一个关系表，在这种情况下我不关心。此外，我不关心 PublicStatusId，我只关心每当我从数据库中获取案例时，我希望将正确的 StatusPublic.Name 映射到 Case 类中的 PublicStatusName 中。

这可能是基本的东西。在 iBATIS（现在的 MyBatis）之类的东西中，这将非常容易。我相信在 EF 中也很容易。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:28:22.617

最简单的方法：在数据库中创建视图，将实体映射到视图。
*-- 或 --*
创建具有匿名类型的查询作为结果。

无论哪种方式，您都将获得一次性只读结果。据我所知，这是您问题的唯一应用。

# xcode - Xcode 3.2.6 和山狮

> ID：11778243
> 
> 赞同：2
> 
> 时间：2012-08-02T13:17:22.107
> 
> 标签：xcode, interface-builder, osx-mountain-lion

我有时使用 Xcode 3.2.6 而不是 Xcode 4，因为我发现这样做有一些优势。我在 Snow Leopard 上安装了旧的 Xcode 3.2.6，并更新为 Lion，Xcode 和以前一样工作。完全没有问题。现在我打算更新到山狮。现在我已经阅读了有关在 Mountain Lion 上遇到 Xcode 3.2.6 问题的人，尤其是 Interface Builder。这里有人有经验吗？我可以继续在 Mountain Lion 上运行 Xcode 3.2.6 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:40:59.820

Lars：还没有进行广泛的测试，但是在升级到 10.8 之后，Xcode 3.2.6 本身运行并且似乎构建得很好，包括一个 PowerPC 目标。当我尝试启动界面生成器时，它只会在 Dock 中弹跳。开发论坛上的这个线程[Can XCode 3.2.6 & Interface Builder be made to run...](http://devforums.apple.com/message/705671)暗示它可能是 Xcode 3 的 iOS 平台插件的问题。

Macmade：如果您必须支持 OS X 10.5 及更低版本和 PowerPC，而我必须这样做，那么单独的 Xcode 4 不是一个选项。保留 Xcode 3 的副本一直是这些项目的理想解决方案，特别是因为它通常会很高兴地存在于它自己的文件夹层次结构中。

相信我，我很想避免支持旧操作系统版本的麻烦，但最终客户想要的才是最重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:06:56.563

Xcode 3.2.6 似乎在 Mountain Lion 上运行得很好，尽管我还没有广泛使用它。一旦我删除了 /Developer/Platforms 中的两个与 iOS 相关的 .platforms 文件夹（只留下 MacOSX.platform），Interface Builder 就可以为我工作（并且没有 devforum 线程中的问题）。

我说值得尝试并找出答案。我也需要支持正在使用 10.6 支持的用户（我刚刚放弃了 10.4 支持，下一个版本将放弃 10.5 支持）。如果他们在 Xcode 4 刚推出时没有放弃对 10.5 的支持，我会一直使用 Xcode 4，如果它一直工作到 ML，我会使用 Xcode 4.3，如果它支持 10.6，我会使用 Xcode 4.4。但苹果做出了不同的决定。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T01:10:42.933

Xcode 3.2.6 似乎可以工作，但我注意到一些问题，比如用它编译的应用程序无法访问钥匙串。

最安全的解决方案是在 Virtual Box 下运行 Snow Leopard。安装速度有点慢，但可以管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:05:51.213

我已经在 Mountain Lion 上使用 Xcode 3 两个月了，没有任何问题。即使是旧项目使用的自定义 IBPlugin 仍然可以加载和工作。

最重要的是不要安装 iOS SDK，因为它的插件会破坏 Interface Builder。

我已将所有已知问题汇总到安装说明中：

*   [如何在 Mountain Lion 上安装 Xcode 3](http://hamstergene.github.com/blog/2012-11-13-xcode3-mountain-lion/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T13:26:20.910

Metrowerks CodeWarrior 是一个不错的 IDE，早在经典的操作系统时代......

说真的，你应该迁移到 Xcode 4。

当然，您已经习惯了 Xcode 3.x，并且迁移到最新版本可能需要一些时间，可能会改变您的一些习惯。但这就是它的工作方式。

也许您可以在 Mountain Lion 上使用 Xcode 3。但是为什么？

编译器版本太旧了，您将无法访问最新的框架、SDK、语言功能……我应该说更多吗？

我不认为仅仅因为您喜欢它而在具有旧版 IDE/编译器套件的现代系统上开发应用程序是开发东西的好方法...

因此，只需花一些时间学习 Xcode 4... 它肯定会为您节省大量开发/调试时间...

# solr - 使用多个核心时数据导入错误

> ID：11778244
> 
> 赞同：0
> 
> 时间：2012-08-02T13:17:24.267
> 
> 标签：solr

一段时间以来，我一直使用单核，并且“数据导入”运行良好。但是当它取了两个不同的索引时，我安装了第二个核心，并且出现了错误：

> org.apache.solr.common.SolrException：加载类“org.apache.solr.handler.dataimport.DataImportHandler”时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:21:06.533

You need to make sure the core can access the dataimport jar files. This easiest way to ensure this is to put the jar file in coredir/lib , where coredir is the dir pointed to as instanceDir from solr.xml.

# java - 从处理程序返回整数

> ID：11778247
> 
> 赞同：0
> 
> 时间：2012-08-02T13:17:35.043
> 
> 标签：java

我有一个非常非常混乱的方法。我想`ints`从处理程序返回。我的代码是这样的：

```
public void getCasesFromFolder() {

    msg = handler.obtainMessage();

    timer.schedule(new TimerTask(){
          public void run(){
              if(folder.list().length == 0)  {
                  msg.obj = "0";
                  handler.sendMessage(msg);
              }

              else {
                    msg.obj = Integer.toString(folder.list().length) ;
                    handler.sendMessage(msg);
              }

          }
    }, delay, 3000);
}

private Handler handler = new Handler() {

    @SuppressWarnings("unchecked")
    @Override
    public void handleMessage(Message m) {

        String message = (String) m.obj;
        if(message.equals("0")) {
            returnValues(0); 
        }
        else {
            returnValues(Integer.parseInt(message));
        }

    }

    public int returnValues(int i) {

        if(i == 0)
            return 0;
        else
            return i; 

    }
}; 
```

这当然行不通。如何从处理程序返回 int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:18:55.513

在类中创建一个`int`属性，并使您的处理程序在`handleMessage()`方法中设置其值而不是返回它。

顺便说一句，您的`returnValues(`) 方法完全没用，因为它可以简化为`return i;`除了返回参数什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:20:35.750

它不起作用，因为`void`不能返回任何东西。还有这个功能：

```
public int returnValues(int i) {

        if(i == 0)
            return 0;
        else
            return i; 

    } 
```

绝对什么都不做。此外，您不会以任何方式操纵对象。您正在调用一个`returnValues`不对`Handler`对象的任何属性执行突变（或设置操作）的函数。这意味着当`returnValues`被调用时，您只是丢弃结果，因为它会超出范围。

# jquery - 使用计时器自动关闭对话框

> ID：11778253
> 
> 赞同：3
> 
> 时间：2012-08-02T13:17:55.440
> 
> 标签：jquery

我使用过 jquery 对话框，我希望它在 2 秒后自动关闭。我怎样才能做到这一点？我尝试了淡出功能，但没有任何效果...

//如果没有成功操作，下面的代码将被执行...下面的代码包含在另一个对话框的“保存”按钮中

```
 window.parent.$('#divDialog').dialog('close');
 window.parent.$('#divDialog').dialog('destroy');
 window.parent.$('#divDialog').html(sMessage);
 window.parent.$('#divDialog').attr('title', (((parseInt(response) != NaN)) ? 'Error' : 'Notice'));
 window.parent.$('#divDialog').dialog({ show: "blind", modal: true, dialogClass: 'alert', zIndex: 99999 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:19:39.723

```
setTimeout( function () { 
        window.parent.$('#divDialog').dialog('close'); 
    }, 2000 // milliseconds delay
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:19:49.977

您正在寻找 Javascript（不是专门的 jQuery）[`setTimeout()`函数](https://developer.mozilla.org/en/DOM/window.setTimeout)- 它在指定的毫秒数后执行一段代码。

# grails - 搜索结果的grails分页

> ID：11778256
> 
> 赞同：5
> 
> 时间：2012-08-02T13:18:05.947
> 
> 标签：grails, pagination

我有域“国家”并且在 list.gsp 上我有带有输入字段的搜索块。第一个问题是当我尝试在我的列表中使用分页时，总是显示所有结果，在这种情况下，我找到了解决方案，我只发送了 10 个值进行显示（如果你知道另一种解决方案，请告诉我）。我的搜索看起来是这样的：

```
 def search = {
       if(query){
           def srchResults = searchableService.search(query, params)

           def result =  Country.executeQuery("select  new map(a.name as name, a.datacenter as datacenter) from Country a where a.name like '%"+ params.q + "%'")

           if (params.offset)
           {
               x = params.offset.toInteger()
               y = Math.min(params.offset.toInteger()+9, result.size()-1)
           } else
            {
            x = 0
            size = result.size() - 1
            y = Math.min(size, 9)
             }     
           def q=params.q

          [countryInstanceList: result.getAt(x .. y), countryInstanceTotal:result.size(), q:params.q]

       }else{
           redirect(action: "list")
       }
   } 
```

现在我有另一个问题，当我按下下一页时，我的搜索字段中的参数正在清理，结果为空。我试图将字段值作为参数发送，但我做错了什么。

我的搜索页面如下所示：

```
<g:form action="search">
            <div class="search" >
                Search Country
                <g:hiddenField name="q" value="${params.q}" />
                <input type="text" name="q" value="${params.q}" />
                <input type="submit" value="Search"/>
            </div>
        </g:form> 
```

…………

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T00:02:43.903

我找到的最佳解决方案：

行动：

```
def list() {
... //use params to filter you query and drop results to resultList of type PagedResultList
return [resultList: resultList, resultTotal: resultList.getTotalCount(), filterParams: params]
} 
```

对于视图：

```
<g:paginate total="${resultTotal}" action="list" params="${filterParams}"/> 
```

看一个完整的[例子](http://blog.websitesframeworks.com/grails-search-pagination-example-implemented-myblog/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:41:39.670

如果您的表中有大量行，那么这样的分页将会中断。即使在中等大小的表上，它也会很慢，因为它会从数据库中加载每一行。

更好的解决方案是在查询中进行分页。您可以将分页的查询参数映射作为可选的第三个参数传递给`executeQuery`：

```
def maxResults = 10
def result = Country.executeQuery(
    "select  new map(a.name as name, a.datacenter as datacenter) from Country a where a.name like ?", 
    [params.q], 
    [max: maxResults, offset: params.offset]) 
```

此外，您的表单有两个带有 name 的字段`q`。不要使用与文本输入同名的隐藏字段。可以使用`value`属性指定文本输入的默认值。

最后，您必须将偏移量作为参数传递。Grails 有一个标签可以为您处理所有这些：[`g:paginate`](http://grails.org/doc/latest/ref/Tags/paginate.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T20:58:03.810

在 params 属性中添加 params 对象。

```
<g:paginate total="${resultTotal}" action="list" params="${params}"/> 
```

# joomla - Joomla 2.5 中的前端编辑 - JController::checkEditId() 返回 false

> ID：11778258
> 
> 赞同：0
> 
> 时间：2012-08-02T13:18:11.967
> 
> 标签：joomla, joomla2.5, joomla-component

所以我遇到了一个奇怪的问题，似乎找不到解决方案。也许有人遇到过同样的问题，可以解释一下。

我正在编写一个组件，我正在向它添加前端编辑，但是当我保存我的前端表单时，我最终得到以下错误：

> 您不得使用该链接直接访问该页面 (#1)。

我已将问题追溯到 JController 中的 checkEditId() 函数。它返回 false ，因为“我以某种方式刚刚到达表单而没有单击链接”。所以我明白我必须以某种方式 setUserState('com_component.context.item', $id); 因为问题是“id”不在用户状态会话中。

但是我在哪里添加呢？我尝试使用 setUserState() 函数手动添加它，但这似乎不起作用，我还可以看到 com_content 不是那样做的？

**我如何告诉 Joomla 允许用户编辑项目 - 不是从 ACL 的角度，而是从 - 他只是点击编辑链接的角度？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:54:24.483

我遇到了完全相同的问题。为我解决的问题是确保列表视图中的 URL 格式正确。所以我有：

管理员/index.php?option=com_helloworld&view=offer&layout=edit&offer_id=27

但您需要如下 URL：

管理员/index.php?option=com_helloworld&task=offer.edit&offer_id=27

这可确保将正在编辑的项目的 ID 添加到会话范围中，然后在 checkEditId() 中检查该范围。

这应该可以解决您的问题。

# java - Java，系统架构，正确实现

> ID：11778260
> 
> 赞同：0
> 
> 时间：2012-08-02T13:18:16.030
> 
> 标签：java, architecture, implementation

我不是 java 专家，我的问题有点抽象，我需要一个关于如何最好地实现我建议的架构和要求的建议。

我将描述我的要求：

我有一个管理器对象，它接收要处理的任务（持有一个任务队列），管理器应该在专用线程之间分配任务。每个线程都知道只执行特定类型的任务。

我创建了一个带有特定类型线程集合的主管理器类，当主管理器接收到一个新任务时，它会将任务推送到知道如何处理此任务的线程类对象的队列中（每个线程都有自己的任务队列）。

一个线程在处理完之前的任务后需要从他的队列中池化一个任务，但是如果队列是空的，他不应该使用资源并且需要在新的任务到达时被唤醒。

我虽然（可能不太好）是使用扩展计时器对象的线程并执行检查其队列的定时任务，但这不符合我在新任务到达之前释放资源的要求。

任何有关处理这些系统要求的最佳方法的建议都将不胜感激（我的问题不是家庭作业，而是我开发任务的一部分）。

**编辑**

（对@Alexander Torstling 的回答）我目前正在使用阻塞队列作为任务队列，我的问题不是并发问题，而是架构问题，我想在队列为空时释放资源并且我想被唤醒如果有新任务到达，如果我已经完成了一个任务的处理并且我有更多任务，我将继续处理下一个任务；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:24:27.853

看看[BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)。为了避免创建太多线程，您可能需要考虑使用[Executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)，它可以为您管理线程池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:33:04.517

我会使用 ExecutorService。这包装了一个队列和一个线程池

```
ExecutorService service = Executors.newXxxx(); // new thread pool.

service.submit(new Runnable() {
    public void run() {
        process(task);
    }
}); 
```

这样，单个线程池可以处理任意数量的不同类型的任务（或者如果您愿意，也可以只处理一个）

# ios - 如何在 iOS 中以编程方式创建 UIView？

> ID：11778264
> 
> 赞同：-3
> 
> 时间：2012-08-02T13:18:37.730
> 
> 标签：ios, uiview

如何以编程方式创建 UIView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:15:42.093

通常是这样的：

```
UIView* myView = [[UIView alloc] initWithFrame:myFrame];
// View setup
[mySuperview addSubview:myView]; 
```

[Apple 的 UIView 文档](https://developer.apple.com/documentation/uikit/uiview)将为您提供帮助。

# orm - PHP/HTML 表单检索值

> ID：11778270
> 
> 赞同：0
> 
> 时间：2012-08-02T13:19:01.513
> 
> 标签：orm

我有一个 PHP 页面，上面有一个选择框的以下代码。

```
<form method="POST" action="<?php echo $a?>" name="test2" id="test2">
<select name="test" id="test" onchange="parentNode.submit()">
<?php if($_POST['submitted'] == true){ ?>
                    <?php $a = echo $_POST['test'];?> 
                <?php }else{ ?>
                <option value="">-- select Video --</option>
                <?php } ?>

<?php  foreach ($pages as $page):

    // Prepare data for each page being listed...
    $title = $th->entities($page->getCollectionName());
    $url = $nh->getLinkToCollection($page);
    $target = ($page->getCollectionPointerExternalLink() != '' && $page->openCollectionPointerExternalLinkInNewWindow()) ? '_blank' : $page->getAttribute('nav_target');
    $target = empty($target) ? '_self' : $target;
    $description = $page->getCollectionDescription();
    $description = $controller->truncateSummaries ? $th->shorten($description, $controller->truncateChars) : $description;
    $description = $th->entities($description); 

    <h3 class="ccm-page-list-title">
    <option value="<?php  echo $url ?>">
        <?php  echo $title ?>
    </option>
    </h3>

<?php  endforeach; ?>
 </select>
<input type="submit" value="go" name="Watch Video" />
<input type="hidden" name="submitted" id="submitted" value="true" />
</form> 
```

上面的表单将页面名称作为选项，将值作为 URL 链接。现在我想要的是选择的 / 选项将提交时的用户重定向到 URL 值（参见下面的选项示例）

```
<option value="/index.php/video-gallery/latin-america/mtw-2011-destination-report-mexico-city/">MtW 2011 - Destination Report: Mexico City</option> 
```

所以我想要的是页面重定向到所选值的 URL 我已关闭它只是在提交到变量时设置所选值行不起作用`<?php $a = echo $_POST['test'];?>`

如果没有 JavaScript 或重定向到另一个redirect.php 页面，这是否可能，该页面查找重定向的值然后加载该页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T15:35:17.857

你可以做类似的事情 -

```
 // do your redirect here
   header('Location: '. $_POST["test"]);
   exit(); 
```

但 JQuery 将是最好的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:21:16.717

不，如果没有 JavaScript，这是不可能的

# asp.net-mvc - 在元素属性中呈现单引号

> ID：11778275
> 
> 赞同：2
> 
> 时间：2012-08-02T13:19:25.330
> 
> 标签：asp.net-mvc, razor

我有以下cshtml

```
<option value='@rtcrs.val' @(res.val == rtcrs.val? "selected = 'selected'" : "" )>@rtcrs.valName</option> 
```

哪个在渲染

```
<option value='1' selected = &#39;selected&#39;>Started</option> 
```

显然，我想保留实际的单引号。我在这里想念什么？

# java - 范围为“import”和没有“import”的“pom”类型依赖有什么区别？

> ID：11778276
> 
> 赞同：135
> 
> 时间：2012-08-02T13:19:25.477
> 
> 标签：java, maven, dependencies, pom.xml

从 Maven 2.0.9 开始有可能包括

```
<type>pom</type>
<scope>import</scope> 
```

在`<dependencyManagement>`节中。

据我了解，它将被此 pom 中包含的依赖项“替换”，就好像它们最初是在此处定义的一样。

上面的解决方案和对这个没有范围的 pom 的简单依赖有什么区别`import`（我看到后者被称为“依赖分组”）？这种“分组”依赖关系在解决依赖关系优先级时具有较低优先级的唯一区别是什么？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-08-02T14:14:28.547

您只能导入*托管依赖项*。这意味着您只能*将*其他 POM 导入`dependencyManagement`项目的 POM 部分。IE

```
...
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>other.pom.group.id</groupId>
            <artifactId>other-pom-artifact-id</artifactId>
            <version>SNAPSHOT</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>   
    </dependencies>
</dependencyManagement>
... 
```

`dependencyManagement`然后发生的情况是，在该部分中定义的所有依赖项`other-pom-artifact-id`都包含在您的 POM`dependencyManagement`部分中。然后，您可以在您的 POM 部分（及其所有子 POM）中引用这些依赖项，`dependency`而无需包含`version`等。

但是，如果在您的 POM 中您只是定义了一个正常的依赖项，`other-pom-artifact-id`那么所有`dependencies`来自 的`dependency`部分`other-pom-artifact-id`都将传递地包含在您的项目中 - 但是根本不包括在`dependencyManagement`部分中定义的依赖项。`other-pom-artifact-id`

所以基本上两种不同的机制用于导入/包含两种不同类型的依赖项（托管依赖项和正常依赖项）。

maven 网站上有一个很好的页面，它可以比我更好地解释这一点[，Maven 中的依赖管理，](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)它还包含有关[导入依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)项的具体信息。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-02T17:26:30.107

您不能将`pom`类型项目作为`simple dependency`另一个项目中的 a。（嗯，你可以 - 但它不会做任何有用的事情）。只能有`parent-child`关系。这本质上是`managing dependency through inheritance`.

`import``pom`部分中类型依赖的范围`<dependencyManagement>`允许您实现`multiple inheritance`.

你可以有不同的`poms`——每`managing`一个都有一堆相关的依赖项。使用这些的项目可以使用这些`import`，`poms`然后指定他们需要的依赖项，而无需担心版本。这本质上是`bill of materials`概念，在@DB5 指定的链接中进行了说明。

这有助于防止`parent poms`复杂的多模块项目变得太大和笨重。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-20T00:28:32.973

两个与面向对象编程范式非常相似的概念将有助于回答这个问题：

1.  **dependencyManagement**部分仅在当前项目中声明依赖项及其详细信息 - 目的是管理详细信息并在其他项目中重用，无论是通过继承（***parent***）还是导入（***scope***）。这就像在程序中声明数据类型并使其可供使用。

2.  ***依赖***部分定义了项目中依赖的实际使用，可选地继承在dependencyManagment下声明的***依赖***的细节（即版本等）。这就是为什么如果您只将它们放在***dependencyManagment***中，您将缺少依赖项。这类似于在需要的程序中实例化数据类型的变量实例。

# java - 在测试报告中跳过测试方法结果

> ID：11778277
> 
> 赞同：1
> 
> 时间：2012-08-02T13:19:26.370
> 
> 标签：java, testng

我有一个关于testng的问题。

我有类似的东西：

```
@Test
public initializeMethod() {
//here I do something that is needed before my real test method
}

@Test (depends on initializeMethod) 
public myRealTest1{
//my test 1
}

@Test (depends on myRealTest1) 
public myRealTest2{
//my test 2
} 
```

是否可以在 testng 报告中跳过 initializeMethod（我的意思是在报告中我想查看测试的真实计数（2 但不是 3））？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:32:06.047

`@Test`注释专门用于测试。您必须使用`initializeMethod()`非测试[注释](http://testng.org/doc/documentation-main.html#annotations)正确注释该方法。几个选项是：

```
@BeforeTest
@BeforeClass 
```

其他可能的注释：

```
@BeforeSuite
@BeforeGroups
@BeforeMethod // if you want `initializeMethod()` run before every test. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:44:22.573

如果要在每个真正的 Test 方法之前运行 initializeMethod()，可以使用 @BeforeMethod 注解。@BeforeMethod：注解的方法将在每个测试方法之前运行。因此，您需要如下声明该方法：

```
@BeforeMethod
public initializeMethod() {
//here I do something that is needed before my real test method
} 
```

如果只想运行一次 initializeMethod()，可以使用 @BeforeClass 注解。@BeforeClass：被注解的方法会在当前类的第一个测试方法被调用之前运行。因此，您需要如下声明该方法：

```
@BeforeClass
public initializeMethod() {
//here I do something that is needed before my real test method
} 
```

# asp-classic - FileSystemObject - 不支持的文件名字符

> ID：11778282
> 
> 赞同：3
> 
> 时间：2012-08-02T13:19:43.390
> 
> 标签：asp-classic, vbscript, filesystems

有没有我可以使用的函数将不可靠的文件名转换为好的文件名？

我正在处理大量照片，并且偶尔，我的脚本会停止，因为上传者在文件名中放置了一个卷曲符号 (~)。我现在也想知道是否还有其他不能在文件名中的坏符号以及如何转义它们。

我正在使用 VBScript 的 FileSystem 对象遍历这些文件，类似于以下内容：

```
For Each File In Files
    If InStr(UCase(File.Name), ".JPG") > 0 Then
        '// do stuff
    End If
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:41:11.403

您可以创建一个返回“已清理”文件名的函数，例如：

```
function MakeNormal(filename)
    dim re : Set re = new regexp

    re.Pattern = "[^\w :\\\.]"
    re.Global = True

    MakeNormal = re.Replace(filename, "_")

end function

msgbox MakeNormal("C:\Temp\normal filename.txt")
msgbox MakeNormal("C:\Temp\special ~!@#$%^&*() filename.txt")

' returns: "C:\Temp\normal filename.txt" and "C:\Temp\special __________ filename.txt" 
```

并将文件名替换为已清理的文件名。当您有两个仅在特殊字符上唯一的文件时变得有风险。

以上是“白名单”变体，如果您更喜欢“黑名单”版本，可以将模式替换为类似`[~!@#$%^&()]`

# c# - WCF 中的会话不一致

> ID：11778284
> 
> 赞同：1
> 
> 时间：2012-08-02T13:19:46.463
> 
> 标签：c#, wcf, session

我正在尝试在我的 WCF 服务 (webHttp) 中使用会话，但请求之间的会话不一致（当我第二次调用服务时会话不是 NULL，但我插入的密钥不存在并且会话身份证不同）。

我检查了默认的 InstanceContextMode 是 PerSession，据我了解，这应该适合我的要求。

在 WCF 中使用会话是否需要任何其他配置？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:28:43.850

You need to use a binding that supports reliable sessions, such as these:

*   HTTP-based transport standard bindings:

    **WsHttpBinding** and expose request-reply or one-way contracts.

    Can be used when using reliable session over a request-reply or simple one-way service contract.

    **WsDualHttpBinding** and expose duplex, request-reply, or one-way contracts.

    **WsFederationHttpBinding** and expose request-reply or one-way contracts.

*   TCP-based transport standard bindings:

    **NetTcpBinding** and expose duplex, request reply, or one-way contracts.

Look here for more info: [http://msdn.microsoft.com/en-us/library/ms733136.aspx](http://msdn.microsoft.com/en-us/library/ms733136.aspx)

# jquery - 如何找出我将物品放入了哪个 UL？

> ID：11778286
> 
> 赞同：0
> 
> 时间：2012-08-02T13:19:47.147
> 
> 标签：jquery, jquery-ui

我有三个使用[JqueryUI](http://jqueryui.com/demos/sortable/#connect-lists)连接的可排序列表：list1、list 2 和 list 3。List 1 中的特定项目具有 class `number`。如果这些`number`项目被拖动，则只能将它们放入列表 2，但不能放入列表 3。如何找出我将要放入的列表？

```
$("#list1").sortable({
    start: function(event, ui) { 
        beforeStop: function (event, ui) {
            if ($(ui.item).hasClass("number")) {
                //Check which list is targeted
                //If List 3 then 
                //$(List 3).sortable('cancel');
                //End If
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:27:33.370

您可以在更新事件中检查该项目。来自 jQuery 文档：

> 当用户停止排序并且 DOM 位置发生变化时触发此事件。

这样的事情可能对你有用：

```
update: function (e, ui) {
    var target = ui.item;
    var parent = item.closest('ul');
    if (parent.hasClass('thirdList')) {
        // do stuff
    }
    else {
        // do stuff
        return false;
    }
} 
```

根据我对您的情况的了解，我认为没有必要检查 class `number`，因为您可以只允许对具有 class 的项目进行排序`number`。

**编辑：**

如果您根本不想拖到列表 3 中，则不能从页面加载时将其排序并让其他列表可排序：

```
$(function () {
    $('#list1').sortable({
        items: '.number'
    });
    $('#list2').sortable();
}); 
```

# android - 带有建议和选择选项的文本字段输入

> ID：11778290
> 
> 赞同：1
> 
> 时间：2012-08-02T13:19:52.983
> 
> 标签：android

我正在制作一个带有存储名称的数据库的 android 应用程序。当用户开始输入名称时，我希望弹出几个建议，以便用户选择一个。（就像谷歌建议的那样）。

我还想知道是否有一种方法可以保留建议功能，但也可以简单地从列表中选择（如 html 中的选择标记）。

*   我更喜欢一个显示如何实现这两种效果的答案。

我将不胜感激任何建议/部分答案以及代码和说明，以实现这一切。

# inno-setup - 如何在 Inno Setup 安装程序中更改向导大小（宽度和高度）？

> ID：11778292
> 
> 赞同：10
> 
> 时间：2012-08-02T13:19:55.890
> 
> 标签：inno-setup

Inno Setup 设置向导的大小是固定的，但我想更改向导设置大小并更改一些项目，包括图像和...

![在此处输入图像描述](../Images/efbb0c04ea4e03404f2c34e1bf39823a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-05-25T12:38:27.347

## 创新设置 6

Inno Setup 6 支持更改向导窗口的大小。

您可以使用[`WizardSizePercent`](https://jrsoftware.org/ishelp/index.php?topic=setup_wizardsizepercent)来更改向导窗口的大小。

您还可以使用[`WizardResizable`](https://jrsoftware.org/ishelp/index.php?topic=setup_wizardresizable)允许用户调整向导的大小（这是默认行为，如果您使用`modern` [`WizardStyle`](https://jrsoftware.org/ishelp/index.php?topic=setup_wizardstyle)）。

## 创新设置 5

没有神奇的方法可以使向导页面变大。它们专为特定尺寸而设计。如果你想让它们变大，你必须逐页、逐个控制地进行，并仔细决定如何为你的新尺寸布局它们。

以下代码只是一个示例，您可能希望选择另一种布局更改。

```
procedure ShiftDown(Control: TControl; DeltaY: Integer);
begin
  Control.Top := Control.Top + DeltaY;
end;

procedure ShiftRight(Control: TControl; DeltaX: Integer);
begin
  Control.Left := Control.Left + DeltaX;
end;

procedure ShiftDownAndRight(Control: TControl; DeltaX, DeltaY: Integer);
begin
  ShiftDown(Control, DeltaY);
  ShiftRight(Control, DeltaX);
end;

procedure GrowDown(Control: TControl; DeltaY: Integer);
begin
  Control.Height := Control.Height + DeltaY;
end;

procedure GrowRight(Control: TControl; DeltaX: Integer);
begin
  Control.Width := Control.Width + DeltaX;
end;

procedure GrowRightAndDown(Control: TControl; DeltaX, DeltaY: Integer);
begin
  GrowRight(Control, DeltaX);
  GrowDown(Control, DeltaY);
end;

procedure GrowRightAndShiftDown(Control: TControl; DeltaX, DeltaY: Integer);
begin
  GrowRight(Control, DeltaX);
  ShiftDown(Control, DeltaY);
end;

procedure GrowWizard(DeltaX, DeltaY: Integer);
begin
  GrowRightAndDown(WizardForm, DeltaX, DeltaY);

  with WizardForm do
  begin
    GrowRightAndShiftDown(Bevel, DeltaX, DeltaY);
    ShiftDownAndRight(CancelButton, DeltaX, DeltaY);
    ShiftDownAndRight(NextButton, DeltaX, DeltaY);
    ShiftDownAndRight(BackButton, DeltaX, DeltaY);
    GrowRightAndDown(OuterNotebook, DeltaX, DeltaY);
    GrowRight(BeveledLabel, DeltaX);

    { WelcomePage }
    GrowDown(WizardBitmapImage, DeltaY);
    GrowRight(WelcomeLabel2, DeltaX);
    GrowRight(WelcomeLabel1, DeltaX);

    { InnerPage }
    GrowRight(Bevel1, DeltaX);
    GrowRightAndDown(InnerNotebook, DeltaX, DeltaY);

    { LicensePage }
    ShiftDown(LicenseNotAcceptedRadio, DeltaY);
    ShiftDown(LicenseAcceptedRadio, DeltaY);
    GrowRightAndDown(LicenseMemo, DeltaX, DeltaY);
    GrowRight(LicenseLabel1, DeltaX);

    { SelectDirPage }
    GrowRightAndShiftDown(DiskSpaceLabel, DeltaX, DeltaY);
    ShiftRight(DirBrowseButton, DeltaX);
    GrowRight(DirEdit, DeltaX);
    GrowRight(SelectDirBrowseLabel, DeltaX);
    GrowRight(SelectDirLabel, DeltaX);

    { SelectComponentsPage }
    GrowRightAndShiftDown(ComponentsDiskSpaceLabel, DeltaX, DeltaY);
    GrowRightAndDown(ComponentsList, DeltaX, DeltaY);
    GrowRight(TypesCombo, DeltaX);
    GrowRight(SelectComponentsLabel, DeltaX);

    { SelectTasksPage }
    GrowRightAndDown(TasksList, DeltaX, DeltaY);
    GrowRight(SelectTasksLabel, DeltaX);

    { ReadyPage }
    GrowRightAndDown(ReadyMemo, DeltaX, DeltaY);
    GrowRight(ReadyLabel, DeltaX);

    { InstallingPage }
    GrowRight(FilenameLabel, DeltaX);
    GrowRight(StatusLabel, DeltaX);
    GrowRight(ProgressGauge, DeltaX);

    { MainPanel }
    GrowRight(MainPanel, DeltaX);
    ShiftRight(WizardSmallBitmapImage, DeltaX);
    GrowRight(PageDescriptionLabel, DeltaX);
    GrowRight(PageNameLabel, DeltaX);

    { FinishedPage }
    GrowDown(WizardBitmapImage2, DeltaY);
    GrowRight(RunList, DeltaX);
    GrowRight(FinishedLabel, DeltaX);
    GrowRight(FinishedHeadingLabel, DeltaX);
  end;
end; 
```

* * *

使用事件函数（或其他地方）中的`GrowWizard`函数`InitializeWizard`，将宽度和高度的变化作为参数：

```
procedure InitializeWizard();
begin
  GrowWizard(ScaleX(100), ScaleY(80));
end; 
```

* * *

该代码负责以下页面：

*   欢迎页面

    [![欢迎页面](../Images/262cd6f6b78826a56f6e80f45393bc40.png)](https://i.stack.imgur.com/5BdZX.png)

*   许可页面

    [![许可页面](../Images/6138460e72d2c3d88f30f43c5f2df7e8.png)](https://i.stack.imgur.com/YM73E.png)

*   选择目录页

    [![选择目录页](../Images/19f66998d4c0890770bdbf30adb585e0.png)](https://i.stack.imgur.com/E4aSA.png)

*   选择组件页面

    [![选择组件页面](../Images/1c835802f87e771f64200a1843c75318.png)](https://i.stack.imgur.com/yBMZB.png)

*   选择任务页面

    [![选择任务页面](../Images/5ea7e1f3b4490c25445773ba8076e013.png)](https://i.stack.imgur.com/51o9V.png)

*   就绪页面

    [![就绪页面](../Images/d60a0a2a9672bd886e9ebbf5b9779aae.png)](https://i.stack.imgur.com/HsJsP.png)

*   安装页面

    [![安装页面](../Images/6cf86d81caf1f36747817455d8baa081.png)](https://i.stack.imgur.com/GFby6.png)

*   完成页

    [![完成页](../Images/7a32d0aaa692b5f88d43133b5051313b.png)](https://i.stack.imgur.com/YPIUt.png)

* * *

其他不太常见的页面留给读者作为练习：

*   密码页
*   InfoBeforePage（与 LicensePage 相同）
*   用户信息页
*   选择程序组页面
*   准备页面
*   InfoAfterPage（与 LicensePage 相同）

* * *

类似的问题：

*   [如何在 InnoSetup 安装程序中显示更大的许可证框？](https://stackoverflow.com/q/4500563/850848)
*   [Inno Setup 中较大的“选择组件”页面](https://stackoverflow.com/q/20584671/850848)
*   [如何在 Inno Setup 安装程序中更改向导大小（宽度和高度）？](https://stackoverflow.com/q/11778292/850848)
*   [Inno Setup：调整卸载进度表及其所有组件的大小](https://stackoverflow.com/q/38136230/850848)
*   [如何在 Inno Setup TInputQueryWizardPage (CreateInputQueryPage) 上减少两个输入框之间的行距](https://stackoverflow.com/q/59625432/850848)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-07T03:59:10.370

我正在用最新的答案更新这个问题：

Inno Setup 6 引入了许多更改，其中之一是*可以调整向导窗口的大小*，这现在是 Inno Setup 的标准功能：

**可调整大小的向导窗口**

向导窗口现在可以选择调整大小：

```
Added new [Setup] section directive: WizardResizable. If this directive is set to yes, the user will be able to resize the main Setup wizard window.
Added new [Setup] section directive: WizardSizePercent, which can be used to increase the default size of all Setup and Uninstall wizard windows without increasing the font size.
Pascal Scripting changes:
    Added new Anchors property to all controls and new KeepSizeY property to TSetupForm which allows you to add full support for WizardResizable and WizardSizePercent to all your custom controls, custom wizard pages and TSetupForm forms if you have any. See the CodeClasses.iss example script for an example. This example also shows other changes done to TSetupForm.
    Added new Constraints property to the TForm support class. 
```

**新的现代巫师风格**

向导窗口现在支持更现代的外观：

```
Added new [Setup] section directive: WizardStyle. If this directive is set to modern, Setup and Uninstall will show a more modern look and also the defaults for WizardResizable and WizardSizePercent change to respectively yes and 120,120.
Change in default behavior: Earlier versions of Inno Setup also supported WizardStyle and if you still have WizardStyle=modern in your script (which was allowed for backward compatibility but didn't actually change anything) and don't want to new modern look, you should remove this line or change it to WizardStyle=classic.
Updated all examples and the Compiler IDE's New Script Wizard to use WizardStyle=modern.
Pascal Scripting change: Added new SurfaceColor property to the TWizardPage support class. 
```

现在，无需任何特殊技巧或代码即可轻松调整向导窗口的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-21T07:33:04.397

我强烈建议使用[NSIS](https://sourceforge.net/projects/nsis/)而不是 InnoSetup 来创建 Windows 安装程序。

它具有您所要求的所有灵活性，以及​​更多：

*   NSIS 在任何方向上都是完全可编写脚本的，我能够实现我所需要的安装程序的每一个自定义。
*   NSIS 创建技术上更好的安装程序：没有混乱的临时文件和多个解压阶段。
*   结果，创建的安装程序非常快。
*   NSIS 可用于在交叉编译设置中创建 Windows 安装程序，参见例如[Debian nsis 包](https://packages.debian.org/stable/nsis)。
*   也就是说，您可以创建一个非常好的 Windows 安装程序，而无需接触 Windows 系统。这就是为什么它也成为 Windows 交叉编译工具链[MXE](https://mxe.cc)的一部分。

到目前为止，我遇到的 NSIS 的唯一缺点是：

*   它的脚本语言有点特别，需要一些初步学习才能习惯。

# bytearray - Netty-3.5.3-Final : ChannelBuffer 不像 3.4.5-Final 那样处理字节数组

> ID：11778294
> 
> 赞同：1
> 
> 时间：2012-08-02T13:20:09.283
> 
> 标签：bytearray, netty

我对 Netty-3.5.3-Final 有一个重大问题，这让我回到了 netty-3.4.5-final。看起来在 ChannelBuffer 中发送的 Bytearray 没问题，但从 ChannelBuffer 读取的 Bytearray 不再是以前的样子。我用两个不同的 netty 版本（3.4.5 vs 3.5.3）测试了完全相同的代码。我的测试用例使用两个 Netty HTTP 服务器（一个与另一个联系）并共享相同的 netty 版本。我可以在本地主机或本地网络服务器上重现我的错误。

您是否修改了标头的第一个字节？

这是我的 Excel 二进制输出（抱歉，无法附加文件） 如您所见，我输出了我的 bytearray，放气，再次输出，在我的服务器上接收，膨胀并输出。使用 netty 3-4-5 final 我有相同的结果（这是正确的）。使用 netty 3-5-3 我有大量字节，zLib 无法理解标题。如果我换掉我的 Netty 库，整个事情就会重新开始工作。

> 登录：netty-3.4.5.Final.jar :: 未压缩
> 
> 0 0 9 3 1 10 3 -127 15 99 111 109 46 102 114 105 109 97 115 116 117 100 105 111 46 115 110 111 119 115 116 111 114 109 46 97 117 116 104 101 110 116 105 99 97 116 105 111 110 46 99 111 114 101 46 108 111 103 105 110 46 97 109 102 46 71 101 116 84 111 107 101 110 82 101 113 117 101 115 116
> 
> VALUE VALUE""""VALUE com。弗里马斯工作室。大雪纷飞。验证 。核 。登录 。自动售货机 获取令牌请求
> 
> 压缩放气功能
> 
> 120 1 5 -63 49 14 -128 48 8 0 -64 -102 78 -70 -8 19 -66 -31 110 -4 0 -87 84 -119 2 -79 -48 56 -5 115 -17 82 26 -13 48 -27 111 46 38 80 27 11 122 -12 -99 13 92 -19 -11 -80 38 -128 61 78 -46 -32 -126 -63 -90 80 -84 17 -36 118 -80 2 74 -123 -123 98 -77 -117 116 -91 -89 -109 -57 15 41 73 28 -81
> 
> 在膨胀函数中接收
> 
> 120 1 5 -63 49 14 -128 48 8 0 -64 -102 78 -70 -8 19 -66 -31 110 -4 0 -87 84 -119 2 -79 -48 56 -5 115 -17 82 26 -13 48 -27 111 46 38 80 27 11 122 -12 -99 13 92 -19 -11 -80 38 -128 61 78 -46 -32 -126 -63 -90 80 -84 17 -36 118 -80 2 74 -123 -123 98 -77 -117 116 -91 -89 -109 -57 15 41 73 28 -81
> 
> 未压缩的膨胀功能
> 
> 0 0 9 3 1 10 3 -127 15 99 111 109 46 102 114 105 109 97 115 116 117 100 105 111 46 115 110 111 119 115 116 111 114 109 46 97 117 116 104 101 110 116 105 99 97 116 105 111 110 46 99 111 114 101 46 108 111 103 105 110 46 97 109 102 46 71 101 116 84 111 107 101 110 82 101 113 117 101 115 116
> 
> VALUE VALUE""""VALUE com。弗里马斯工作室。大雪纷飞。验证 。核 。登录 。自动售货机 获取令牌请求
> 
> 登录：netty-3.5.3.Final.jar :: 未压缩
> 
> 0 0 9 3 1 10 3 -127 15 99 111 109 46 102 114 105 109 97 115 116 117 100 105 111 46 115 110 111 119 115 116 111 114 109 46 97 117 116 104 101 110 116 105 99 97 116 105 111 110 46 99 111 114 101 46 108 111 103 105 110 46 97 109 102 46 71 101 116 84 111 107 101 110 82 101 113 117 101 115 116
> 
> VALUE VALUE""""VALUE com。弗里马斯工作室。大雪纷飞。验证 。核 。登录 。自动售货机 获取令牌请求
> 
> 压缩放气功能
> 
> 120 1 5 -63 49 14 -128 48 8 0 -64 -102 78 -70 -8 19 -66 -31 110 -4 0 -87 84 -119 2 -79 -48 56 -5 115 -17 82 26 -13 48 -27 111 46 38 80 27 11 122 -12 -99 13 92 -19 -11 -80 38 -128 61 78 -46 -32 -126 -63 -90 80 -84 17 -36 118 -80 2 74 -123 -123 98 -77 -117 116 -91 -89 -109 -57 15 41 73 28 -81
> 
> 在膨胀函数中接收
> 
> 72 84 84 80 47 49 46 49 32 50 48 48 32 79 79 75 13 10 67 111 110 110 110 110 110 101 99 116 105 111 110 58 32 107 101 101 101 101 101 112 45 97 108 105 118 101 13 101 13 101 13 10 67 111 110 110 110 110 110 116 101 110 110 110 110 110 116 45 845 845 845 845 845 845 845 845 845 845 845 845 84 121 112 101 58 32 97 112 112 108 105 99 97 116 105 111 110 47 111 99 116 101 116 45 115 116 114 101 97 109 13 10 67 111 110 116 101 110 116 45 76 101 110 103 116 104 58 32 49 51 48 13 10 69 120 112 105 114 101 115 58 32 84 104 117 32 65 117 103 32 48 50 32 48 57 58 48 55 58 53 52 32 69 68 84 32 50 48 49 50 13 10 68 97 116 101 58 32 84 104 117 32 65 117 103 32 48 50 32 48 57 57 58 48 55 55 58 53 53 52 32 32 69 69 68 84 32 50 48 49 50 13 50 13 10 67 97 99 99 104 101 45 67 111 110 110 110 116 114 114 114 114 111 108 58 58 58 58 32 109 97 120 45 97 120 45 97 103 103 101 61 61 49 13 10 13 10 120 1 -29 100 102 -28 50 110 20 76 -50 -49 -43 75 43 -54 -52 77 44 46 41 77 -55 -52 -41 43 -50 -53 47 47 46 -55 47 -54 -43 75 44 45 -55 72-51 43 -55 76 78 44 -55 -52 -49 -45 75 -50 47 74 -43 -53 -55 79 -49 -52 -45 75 -52 77 -45 115 79 45 9 -55 -49 78 - 51 11 74 45 46 -56 -49 43 78 -27 46 1 -15 56 -117 83 83 83 -124 83 43 -110 83 11 64 -102 -40 100 45 44 -52 -51 -51 12 77 45 45 13 -115 44 -52 13 88 15 -34 116 -40 -68 -102 -127 -127 -127 17 0 28 31 43 78
> 
> 未压缩的膨胀功能
> 
> 错误

# caching - 如何在跨平台 Mono App（例如 Xamarin 框架）中持久化/缓存数据？

> ID：11778299
> 
> 赞同：6
> 
> 时间：2012-08-02T13:20:19.927
> 
> 标签：caching, xamarin.ios, persistence, xamarin.android, key-value-store

我正在寻找一个很好的解决方案来存储和/或缓存用 C#（Xamarin 的 MonoTouch 和 MonoDroid + WindowsPhone）开发的跨平台应用程序中的数据。简单的键/值对就足够了。存储的数据将用作一般缓存和持久性，以便在应用程序启动时显示某些内容，同时从服务器获取新数据。

[Akavache](https://github.com/github/Akavache)看起来非常像我想要的，但是如何将它集成到我的项目中呢？它会选择正确的存储路径吗？周围有类似的图书馆吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-30T14:12:57.377

我没有尝试过 Akavache jet，而是围绕 Android 和 iOS 上的首选项 API实现了一个[跨平台包装器：](https://www.nuget.org/packages/SimpleStorage/)

```
var storage = SimpleStorage.EditGroup("group name of key/value store");
storage.Put("myKey", "some value");
var value = storage.Get("myKey"); 
```

该项目托管在[GitHub 上](https://github.com/perpetual-mobile/SimpleStorage)，并作为免费的[NuGet 包](https://www.nuget.org/packages/SimpleStorage/)分发。除了字符串存储，它还提供异步/等待方法和复杂对象的序列化/反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:49:50.083

我建议只使用`XmlSerializer`或您习惯在 .Net 中使用的东西。您可以根据平台更改文件存储的路径。

Akavache 看起来很有前途，但如果您只需要一对键值对，它看起来有点过头了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T04:59:21.887

Akavache 将自动在 iOS 和 Android 上设置正确的路径，它将使用来自您的应用程序的信息（来自 Android 上的 AndroidManifest.xml 和 iOS 上的 info.plist）。

# javascript - 使用带有 JavaScript 的函数添加多个 DIV 元素

> ID：11778301
> 
> 赞同：1
> 
> 时间：2012-08-02T13:20:26.327
> 
> 标签：javascript

我对 JS 有点陌生，这就是为什么我在这方面寻求一些帮助。我想创建多个嵌套的 div 元素，如下所示：

```
<div>
  <div>

    <div>
    </div>

    <div>
    </div>

  </div>
</div> 
```

我已经创建了它们，但我的工作导师希望我使用函数，以便使代码更具可读性。

我已经尝试为每个创建的每个元素创建多个函数，但他告诉我他不喜欢它并希望我尝试另一种方式。所以这就是我寻求帮助的原因。我已经尝试过了（这只是一个示例，无权显示实际代码......公司规则）：

```
 function firstContainerCreator(){

            firstContainer= doc.createElement("div");
        }

        function innerContainerCreator(){

            innerContainer= doc.createElement("div");
        }

        function innerContainer_imgCreator(){

            innerContainer_img= doc.createElement("div");

        }

        function innerContainer_paragraphCreator(){

            innerContainer_paragraph= doc.createElement("div");

        } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:38:39.870

```
function createDivNode(parentNode){
    // in case no parent div use <body> as parent
    if (!parentNode) var parentNode = document.body;
    var el = document.createElement('div');
    parentNode.appendChild( el );
    return el;
}

var outer = createDivNode();
var inner1 = createDivNode(outer);
var inner2 = createDivNode(outer); 
```

output:

```
<body>
  <div>
    <div></div>
    <div></div>
  </div>
</body> 
```

[http://jsfiddle.net/9FMPv/9/](http://jsfiddle.net/9FMPv/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:45:19.233

下面的函数将为每个子 div 创建一个父容器、3 个子 div 和一个孙 div。

```
var createDivs = (function() {
  var parent = document.createElement('div'),
    children = 3,
    // change this number to reflect how many child divs you need
    gchildren = 3,
    // same with this
    i = 0;
  document.body.appendChild(parent);
  this.appendGChild = function(child) {
    console.log(child);
    var gchild = document.createElement('div'),
        i = 0;
    for (i = gchildren; i--;) {
        child.appendChild(gchild);
    }
  }
  for (i = children; i--;) {
    var child = document.createElement('div');
    parent.appendChild(child);
    appendGChild(child);
  }

})();​ 
```

这是一个说明这一点的[jsFiddle 。](http://jsfiddle.net/cNJtX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:24:24.967

您需要创建一个 DIV 然后将子项附加到它以获得嵌套结构：

```
// create the outer div
var parentDiv = document.createElement("div");

// create the inner divs
var childDiv1 = document.createElement("div");
var childDiv2 = document.createElement("div");

// now append the child divs to the parent
parentDiv.appendChild(childDiv1);
parentDiv.appendChild(childDiv2); 
```

小提琴工作示例：http: [//jsfiddle.net/Nwc3s/9/](http://jsfiddle.net/Nwc3s/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:24:32.380

您已经通过`document.createElement("div")`( `document`, not `doc`) 创建了您的 div，但您需要将[`.appendChild()`](https://developer.mozilla.org/en/DOM/Node.appendChild)它们放到它们的父节点上。我建议不要尝试像最初那样将这些创建包装到函数中，直到您对它们的创建和嵌套方式有很好的理解。

[看它在行动](http://jsfiddle.net/YBLDz/)...

```
// The outer div:
var outer_container = document.createElement("div");
// Append it onto the body
document.body.appendChild(outer_container);

// Main inner div
var main_inner = document.createElement("div");
// Append to outer
outer_container.appendChild(main_inner);

// First innermost div
var first_inner = document.createElement("div");
// Second innermost div
var second_inner = document.createElement("div");
// append to main inner div
main_inner.appendChild(first_inner);
main_inner.appendChild(second_inner);

// etc... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:25:24.017

是啊，那有什么问题？您已经创建了元素，现在通过 Javascript 的本机`appendChild`方法附加它们：

```
parent = document.getElementById("parentdiv");
parent.appendChild(firstContainer); 
```

# html - 为具有相同 id 的两个 div 动态设置宽度

> ID：11778304
> 
> 赞同：0
> 
> 时间：2012-08-02T13:20:46.217
> 
> 标签：html, dynamic, width

我有两个或三个具有相同 id 的 div 元素。这是使用以下 javascript 动态设置宽度：

功能 SetWidthRPanelAssessments() {

```
for (var i = 0; i < $("div:visible[id*='s1']").length; i++) {
    if (document.getElementById("s1").offsetWidth < 250) {
        var w = document.getElementById("s1");
        w.style.width = 250;
    }
} 
```

}

问题是，它只为第一个 div 设置宽度，其余的 div 没有设置值 250。我使用 alert() 进行了验证，但所有 div 的显示值为 250。但不在屏幕上渲染。如何解决这个问题？

这个问题出现在所有浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:13:07.693

多个元素不应具有相同的 ID。因此，该`getElementByID`函数仅返回具有该 ID 的第一个。改为将 ID 更改为*类*，然后使用该`getElementsByClassName`函数将它们全部选中并遍历它们。

```
function SetWidthRPanelAssessments()
{
    var divs = document.getElementsByClassName("s1");
    for (i = 0; i < divs.length; i++)
    {
        if (divs[i].offsetWidth < 250) divs[i].style.width = 250;
    }
} 
```

或者使用 jQuery 来避免浏览器冲突`getElementsByClassName`：

```
function SetWidthRPanelAssessments()
{
    $(".s1").each(function(){
        if ($(this).offsetWidth < 250) $(this).css("width","250");
    });
} 
```

# java - 跨域安卓java

> ID：11778307
> 
> 赞同：2
> 
> 时间：2012-08-02T13:20:53.880
> 
> 标签：java, android, http, post, request

我正在为 android 制作应用程序，我需要使用 java 向 www.example.com 地址发出请求。问题是我需要发送 POST 参数，我一直在搜索一些信息，我发现了一些关于跨域或类似的东西。有人可以帮我处理请求并获得答案吗？

我尝试执行以下代码但不工作：

```
HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost("http://www.example.com");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("param1", "val"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

解决方案：：：：：：：：：：：：：

```
 try {
                HttpClient client = new DefaultHttpClient();
                HttpPost post = new HttpPost("http://www.example.com");

                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

                postParameters.add(new BasicNameValuePair("key", "val"));
                postParameters.add(new BasicNameValuePair("key2", "val2"));

                UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(
                        postParameters);
                post.setEntity(formEntity);

                    HttpResponse response = client.execute(post);
                        //inputStreamToString method
                    String data = inputStreamToString(response.getEntity()
                            .getContent());
                    return data;
                } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

inputStreamToString 方法

```
private String inputStreamToString(InputStream is) {
        String s = "";
        String line = "";

        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                s += line;
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // Return full string
        return s;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:43:10.973

跨域 POST 适用于提交表单的 Web 浏览器，一般不适用于 HTTP。浏览器不会将跨域发布作为安全策略。它不适用于您的情况。

# c# - 字符串修剪空间不起作用

> ID：11778309
> 
> 赞同：0
> 
> 时间：2012-08-02T13:20:55.843
> 
> 标签：c#, string, space, trim, spaces

我有一个字符串的问题。字符串是这样的：

```
string something = "  whatever and something else  "; 
```

现在我试图摆脱开头和结尾的空格，如下所示：

```
something = something.Trim(); 
```

但这没有用，我也试过这个：

```
something = something.TrimStart();
something = something.TrimEnd(); 
```

还有这个：

```
something = something.TrimStart(' ');
something = something.TrimEnd(' '); 
```

还有这个：

```
int lineLength = line.Length;
string LastCharacter = line.Remove(lineLength - 1);
while (LastCharacter == " ")
{
   line = line.Remove(lineLength - 1);
   lineLength = line.Length;
   LastCharacter = line.Remove(lineLength - 1);
} 
```

字符串不在 RichTextBox 中。

现在我认为这可能是文本格式或其他问题（我在德国）。

提前谢谢你， tietze111

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:31:08.730

这是会撕掉所有空白的东西：

```
 string something = " whatever    ";
 List<char> result = something.ToList();
 result.RemoveAll(c => c == ' ');
 something = new string(result.ToArray()); 
```

好的，试试这个开始和结束只修剪：

```
 static string TrimWhitespace(string theString)
    {
        theString = "  some kind of string example ";
        theString = theString.TrimEnd();
        theString = theString.TrimStart();
        // MessageBox.Show(theString, "");
        return theString;
    } 
```

# java - Java Webapps 中的电子邮件，更好的方式？

> ID：11778313
> 
> 赞同：0
> 
> 时间：2012-08-02T13:21:04.263
> 
> 标签：java, spring, email, web-applications

我正在翻新旧版 Java Servlet webapp。我想知道有没有更好的方式来处理电子邮件。现在，该应用程序有一个巨大的类，其中大部分内容都是关于将消息文本与数据连接起来，以及决定这样做的条件。

我正在使用 Spring-MVC 是应用程序的更新部分。我在 Spring 和 Email 上做了一个快速的谷歌搜索，看起来 Spring 主要是关于抽象电子邮件本身的发送，我对此没有问题。我对么？

我想要的是一个 API/系统，它允许我将单个电子邮件的消息文本放入文本文件中，并允许我通过变量将数据插入到该文本中。我还想要一些可以使收集数据和计算条件不那么笨重的东西。

最后，该应用程序只发送了大约 6 封不同的电子邮件。我正在寻找可以快速学习的系统。我不需要征服电子邮件世界，我只想清理一些凌乱的遗留代码。

有这么快学的email api吗？

非常感谢您提供任何信息

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:23:35.453

听起来你想要一个像[Velocity](http://velocity.apache.org/)或[Freemarker](http://freemarker.sourceforge.net/)这样的模板系统。

根据我对两者的经验，我建议 Velocity 更简单一些，但 Freemarker 更强大。也许您应该将您的选择抽象出来，然后根据需要进行替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:32:54.837

您可以使用 Spring 编写电子邮件消息（请参阅[http://static.springsource.org/spring/docs/1.2.x/reference/mail.html](http://static.springsource.org/spring/docs/1.2.x/reference/mail.html)），并且可以使用带有标记的纯文本文件（可能是 Apache 风格的，像 ${foo.bar}) 并读入它们，替换代码中的标记，并将该文本设置为您的电子邮件文本。正如其他人建议的那样，您可以使用模板引擎来做到这一点，或者您可以只使用`String.replaceAll()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:27:19.600

对于消息内容，我认为模板引擎可能适合您。查看[Google Soy](https://developers.google.com/closure/templates/)或[Freemarker](http://www.freemarker.org/)。

# php - 如何在 iOS 中向 PHP 发送 GEt 请求

> ID：11778318
> 
> 赞同：2
> 
> 时间：2012-08-02T13:21:19.317
> 
> 标签：php, objective-c, ios, nsurlrequest

嗨，我在向 PHP 发送 GET 请求时遇到问题，相同的 PHP 在 Web 浏览器中运行时工作正常这里是 PHP 和 Obj-C PHP 的代码片段

```
$var1=$_GET['value1'];
$var2=$_GET['value2']; 
```

当我在像[http://sample.com/sample.php?value1=hi&value2=welcome](http://sample.com/sample.php?value1=hi&value2=welcome)这样的浏览器中调用它时 ，它工作正常，但是从 obj ci 无法成功 obj C

```
 NSString *url =[NSString stringWithFormat:@"http://sample.com/sample.php"];
    NSData *data = [@"sample.php" dataUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"%@",url);
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
    [req setHTTPMethod:@"GET"];
    [req setHTTPBody:data];
    NSURLConnection *connection = [[[NSURLConnection alloc] initWithRequest:req delegate:self]autorelease];
    [connection start]; 
```

请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:31:04.910

问题是您设置了 HTTPBody （通过调用`setHTTPBody`您的请求对象），而 GET-requests 没有正文，传递的数据应该附加到 url 中。因此，要模仿您在浏览器中所做的请求，它就像这样。

```
NSString *url =[NSString stringWithFormat:@"http://sample.com/sample.php?value1=hi&value2=welcome"];
NSLog(@"%@",url);
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
[req setHTTPMethod:@"GET"]; // This might be redundant, I'm pretty sure GET is the default value
NSURLConnection *connection = [[[NSURLConnection alloc] initWithRequest:req delegate:self]autorelease];
[connection start]; 
```

您当然应该确保正确编码查询字符串的值（请参阅[http://madebymany.com/blog/url-encoding-an-nsstring-on-ios](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)示例）以确保您的请求有效。

# c# - c#中My.Computer的等价物是什么

> ID：11778319
> 
> 赞同：6
> 
> 时间：2012-08-02T13:21:24.077
> 
> 标签：c#, vb.net

> **可能重复：**
> [VB.NET 到 C# - my.computer.getfiles()](https://stackoverflow.com/questions/1909348/vb-net-to-c-sharp-my-computer-getfiles)

任何人都可以告诉我在 C# 中遵循 vb.net 代码“My.Computer”方法的等价物吗？

```
My.Computer.FileSystem.RenameFile(oldname,newname)
My.Computer.FileSystem.DeleteFile(filename) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T13:24:41.293

从[文档](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

> 使用 File 类进行典型操作，例如复制、移动、重命名、创建、打开、删除和附加到文件。您还可以使用 File 类来获取和设置与文件的创建、访问和写入相关的文件属性或 DateTime 信息。

你可以用`System.IO.File`我有限的 VB 知识来做大部分`My.Computer.FileSystem`可以做的事情。

这些方法仍然是静态的，并采用您要操作的文件的路径。因此，对于您提供的示例...

```
File.Move(oldname, newname);  //File renames things just like Unix does- by moving them
File.Delete(filename); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:28:46.817

您可以`Microsoft.VisualBasic.dll`在 C# 中引用。此 DLL 包含命名空间中的`Computer`类`Microsoft.VisualBasic.Devices`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T13:26:34.163

```
System.IO.File.Move(oldname,newname);
System.IO.File.Delete(filename); 
```

见[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)和[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)课。最大的区别是`File`静态使用（例如`File.Move(...)`），而`FileInfo`用作实例，允许您更方便地对一个文件进行许多操作（例如`var file = new FileInfo(filePath); var extension = file.Extension;`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T13:25:09.943

我从来不明白为什么这些是在 VB 中引入的，但是，对于这两个例子，[`File.Move(oldname, newname)`](http://msdn.microsoft.com/en-us/library/system.io.file.move)和[`File.Delete(filename)`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

当然，这两种方法也适用于 VB...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T13:25:18.620

您可以使用

```
System.IO.Move(oldFileName, newFileName); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T13:27:06.660

使用命名空间`System.IO`

删除文件是

```
File.Delete(string path); 
```

重命名文件是

```
File.Move(string sourceFileName, string destFileName) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T13:31:03.643

以下是最直接的等价物：

```
Microsoft.VisualBasic.FileSystem.Rename(oldname, newname)
Microsoft.VisualBasic.FileSystem.Kill(filename) 
```

事实上，它使用了 VB 自己的 FileSystem 类，但我不确定我是否会推荐使用它，因为有更多的 C# 方式来实现它。

如果您使用它，请务必在引用中添加 Microsoft.VisualBasic。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T13:27:40.120

System.IO[命名](http://msdn.microsoft.com/en-us/library/system.io.aspx)空间是您正在寻找的。

# python - 退出函数时有条件地关闭文件

> ID：11778323
> 
> 赞同：1
> 
> 时间：2012-08-02T13:21:47.417
> 
> 标签：python

我有一个（递归）函数，我想接受一个字符串或一个打开的文件对象。如果参数是字符串，则函数打开一个文件并使用该文件对象。当我从函数返回时，最好显式关闭这个打开的文件对象，但前提是传入了一个字符串。（想象一下当用户传入一个打开的文件对象并发现他们的文件对象在某个地方关闭时会感到惊讶）。这是我目前正在使用的：

```
def read_file(f, param):
    do_close = isinstance(f,basestring)
    f = open(f, 'rb') if do_close else f
    try:
        info = f.read(4)
        #check info here
        if info == Info_I_Want(param):
           return f.read(get_data(info))
        else:
           f.seek(goto_new_position(info))
           return read_file(f,param)
    except IKnowThisError:
           return None
    finally:
        if do_close:
           f.close() 
```

`IKnowThisError`如果我找不到我想要的信息，您可以假设会在某个时候提出。

这感觉非常笨拙。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:28:48.093

为什么不用包装器包装递归函数以避免开销？

```
def read_file(f, param):
    if isinstance(f, basestring):
        with open(f, 'rb') as real_f:
            return read_file2(real_f, param)
    else:
        return read_file2(real_f, param)

def read_file2(f, param):
    # Now f should be a file object
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:25:56.887

递归调用你的函数怎么样？

```
def read_file(f, param):
    if isinstance(f, basestring):
        with open(f, 'rb') as real_f:
            return read_file(real_f, param)
    else:
        # normal path 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:41:47.530

即将推出的 Python 3.3 为此类问题提供了更通用的解决方案，即[`contextlib.ExitStack`](http://docs.python.org/dev/library/contextlib.html#contextlib.ExitStack). 这允许有条件地将上下文管理器添加到当前的 with 块：

```
def read_file(f, param):
    with ExitStack() as stack:
        if isinstance(f, basestring):
            f = stack.enter_context(open(f, 'rb'))
        # Your code here 
```

# sql-server - 如何在 Oracle 上创建连接到 SQL Server 的服务器

> ID：11778325
> 
> 赞同：1
> 
> 时间：2012-08-02T13:21:55.490
> 
> 标签：sql-server, oracle

我想创建一个从 Oracle 到 SQL Server 的链接服务器。我已经搜索了互联网，但我找不到这样做的方法。另外，Oracle 中链接服务器的同义词是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:29:11.260

Have a look at [this](https://forums.oracle.com/forums/thread.jspa?messageID=4396084), it describes how to do it.

This is not as easy as using `create database link`.

# xamarin.ios - monotouch 的评估版无法构建为本机代码

> ID：11778326
> 
> 赞同：2
> 
> 时间：2012-08-02T13:22:06.920
> 
> 标签：xamarin.ios

这是阿吉特。我尝试从网站下载 monotouch 的试用版，但所有链接都已损坏。所以我通过从谷歌挖掘下载了以下内容。( *)MonoDevelop-3.0.3.5 (* )MonoFramework-MRE-2.10.9_11.macos10.xamarin.x86.dmg (*)Monotouch-eval-5.1.0.pkg

但是这样做之后，当我从 xamarin 网站运行示例 ios 应用程序时，它才无法构建 -> 无法编译为本机代码。这是错误日志。

* * *

构建解决方案：HelloWorld_iPhone (Debug|iPhoneSimulator)

构建：HelloWorld_iPhone (Debug|iPhoneSimulator) 正在执行主编译... /Developer/MonoTouch/usr/bin/smcs /noconfig "/out:/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.exe " "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" "/r:/开发者/MonoTouch/usr/lib/mono/2.1/System.Core.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll" /nologo /warn:4 /debug:full /优化- /codepage:utf8 "/define:DEBUG" /t:exe "/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Main.cs" "/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/AppDelegate.cs" "/用户/PBSK/桌面/HelloWorld_iPhone/HelloWorld_iPhone/HelloWorld_iPhoneViewController。cs" "/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/HelloWorld_iPhoneViewController.designer.cs"

复制内容文件将“/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/57_icon.png”复制到“/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/57_icon.png” ' 复制 '/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/114_icon.png' 到 '/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/114_icon.png' 复制'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/72_icon.png' 到'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/72_icon.png' 复制'/用户/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/29_icon.png' 到 '/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/29_icon.png'复制'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/58_icon.png'到'/Users /PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/58_icon.png'复制'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/50_icon.png'到'/Users/PBSK /Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/50_icon.png' 构建完成 -- 0 个错误，0 个警告/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/58_icon.png'复制'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/50_icon.png'到'/Users /PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/50_icon.png' 构建完成 -- 0 个错误，0 个警告/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/58_icon.png'复制'/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/Images/Icons/50_icon.png'到'/Users /PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app/50_icon.png' 构建完成 -- 0 个错误，0 个警告

编译为本机代码 /Developer/MonoTouch/usr/bin/mtouch -v --nomanifest --nosign -sim "/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone/bin/iPhoneSimulator/Debug/HelloWorld_iPhone.app" -r "/ Developer/MonoTouch/usr/lib/mono/2.1/System.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" -r "/Developer/MonoTouch/usr/lib/ mono/2.1/System.Core.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll" -debug -nolink -sdk "5.1" "/Users/PBSK/Desktop/HelloWorld_iPhone/HelloWorld_iPhone /bin/iPhoneSimulator/Debug/HelloWorld_iPhone.exe” 评估版不支持此功能 未找到 gcc 编译器！mtouch 以代码 1 退出

- - - - - - - - - - - 完毕 - - - - - - - - - - -

构建：1 个错误，0 个警告

* * *

Xcode 版本是 4.4，Mac 版本是 10.7.4。

-谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:08:26.930

> 但是所有的链接都坏了

如果您对该网站有任何问题，请发送电子邮件至 support@xamarin.com。

> Monotouch-eval-5.1.0.pkg

这是一个相当古老的 MonoTouch**测试**版。

MonoTouch 5.2.12 是*当前*的稳定版本，而 5.3.5 是当前的**不稳定**版本。

> 没有找到 gcc 编译器

这意味着没有找到 C 编译器。一般来说*，*您应该确保您的 MonoDevelop 首选项（SDK 位置）设置为指向您的 Xcode 安装目录。

但是在这种情况下，我认为您的 MonoTouch 版本太旧而无法与 Xcode 4.4 一起使用。将评估版本更新到 5.2.12 是您应该尝试解决此问题的第一步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T03:16:23.143

以下是最终工作的 MonoTouch 评估的手动安装！：

Download and install packages listed below, in the order given:

1) Mono: [http://download.mono-project.com/archive/2.10.9/macos-10-x86/10/MonoFramework-MDK-2.10.9_10.macos10.xamarin.x86.dmg](http://download.mono-project.com/archive/2.10.9/macos-10-x86/10/MonoFramework-MDK-2.10.9_10.macos10.xamarin.x86.dmg)

2) MonoDevelop: [http://download.xamarin.com/monodevelop/Mac/MonoDevelop-3.0.dmg](http://download.xamarin.com/monodevelop/Mac/MonoDevelop-3.0.dmg)

3) Eval MonoTouch: [http://download.xamarin.com/priv/d6d0ad447c01dd2bbbbbba829f6e1a/MonoTouch/Mac-eval/monotouch-eval-5.2.11.pkg](http://download.xamarin.com/priv/d6d0ad447c01dd2bbbbbba829f6e1a/MonoTouch/Mac-eval/monotouch-eval-5.2.11.pkg)

For the above mentioned environment this combination works like magic. Just hope that they'll fix the broken links on their site too or else many other newbies would continue to get discouraged. Thanks to support people of Xamarin who shared these links.

# java - 存储学生详细信息的最佳集合？

> ID：11778333
> 
> 赞同：5
> 
> 时间：2012-08-02T13:22:21.543
> 
> 标签：java, file-io, collections

嘿，我正在为学生详细信息创建一个商店，我想就使用哪个系列提出一些意见。商店将有详细信息，例如名称、号码、地址和电子邮件。然后商店将被打印到一个文本文件中，我可以在其中加载、保存、编辑和删除文本文件中的详细信息。我以前从未这样做过，如果在使用集合时对文件 I/O 有任何限制，我也不会这样做。所以我真的很感激这些评论。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:40:38.167

如果我在你的地方，

然后我会创建一个**bean 类**，说`Student`和用于**收集** `ArrayList<Student> student = new ArrayList<Student>();`，并且`ArrayList`是**序列化**的，因此磁盘写入和`class`所有`IO` **操作**都没有问题。

按[对象](https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property)**属性****排序** _`ArrayList`

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:26:13.853

除非需要一些特殊的“快速定位”功能，例如按姓氏或学生 ID 搜索，否则列表将是一个合适的集合来使用。

```
List<Student> students = new ArrayList<Student>(); 
```

如果您确实需要按某些属性（例如按学生 ID）组织学生，请考虑使用`LinkedHashMap`：

```
Map<String,Student> studentById = new LinkedHashMap<String,Student>(); 
```

`LinkedHashMap`为您提供可预测的迭代顺序。您可以使用常规的`HashMap<K,V>`，但迭代的顺序是任意的。最后，您可以使用 a `TreeMap<K,V>`，它将迭代顺序基于键的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:27:00.270

好吧，如果它必须是可序列化的，也就是说你可以将它写入磁盘，你可以使用`List`. 现在，在任何人尖叫之前，您无法序列化`List`正确的 a，但您也无法实例化 a `List`。由于我们知道所有已知的子类`List`都是可序列化的，因此您可以安全地进行转换。在如何存储数据方面`List<Student>`应该没问题。

**编辑**

这里似乎有些混乱。在面向对象的语言中，我们知道这种`is-a`关系适用于层次结构中指定的对象。因此，在 Java API 中，我们有一个称为该接口的接口，例如`List`，该接口具有实现它的类。`ArrayList`这放入`ArrayList`了 的层次结构`List`。由于`ArrayList`implements`Serializable`我们知道你不能实例化一个用关键字 interface 标记的对象（在 Java 中）。我们可以对`Serialize`任何已知的实现使用强制转换`List`。这会起作用的原因是传递的实现（即具体对象）保证是可序列化的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:28:58.243

在最简单的情况下， a`java.util.List`将完全按照您的意愿行事。但是，如果您希望能够快速找到集合中的条目（以支持您的更新要求），您还应该查看`java.util.Map`. Map 允许您快速导航到特定记录，而无需遍历整个集合，而使用 List，您必须依次查看集合中的每个学生，直到找到您感兴趣的那个。**

# android - 如何在 AndEngine 中使用斜体或粗体创建自定义字体？

> ID：11778334
> 
> 赞同：2
> 
> 时间：2012-08-02T13:22:20.743
> 
> 标签：android, andengine

我有一种字体必须在我的应用程序中使用，但在小屏幕上看起来有点模糊，所以我想让它加粗。

我使用了这段代码：

```
font = FontFactory.createFromAsset(fontTextureAtlas, this, "Noteworthy.ttc", 20f, true, Color.BLUE); 
```

但是没有选项没有使字体加粗，所以我尝试使用`FontFactory.create()`：

```
 AssetManager mgr = AssetManager.class.newInstance();
        font = FontFactory.create(fontTextureAtlas,
                Typeface.create(Typeface.createFromAsset(mgr,"Noteworthy.ttc"),Typeface.BOLD),
                20f,
                true,
                Color.BLUE); 
```

但我得到了这个：

```
ERROR/AndroidRuntime(2140): FATAL EXCEPTION: main
        java.lang.RuntimeException: native typeface cannot be made 
```

而且我没有更多的想法如何使这种字体变粗。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:28:07.360

I don't think that would be possible for one reason. If the font doesn't contain the information for bold it wont be able to show on screen. How fonts work is pretty much a blank sheet of paper and contains all letters at different level of weight and styles(e.g. italic, underline and bold). This may be a weight issue you are seeing as it is not meant for android phones (maybe internet or not fully customized for phone).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:36:04.633

我找不到如何在 AndEngine 中使文本变为粗体，所以我只是从现有的字体中创建了新字体，只有粗体字母。

# c++ - 通过 QT 运行终端

> ID：11778335
> 
> 赞同：0
> 
> 时间：2012-08-02T13:22:28.087
> 
> 标签：c++, qt4, c++11

我是初学者是C++。我试图找到，是否可以在 QT 窗口和基于 Linux 的环境中运行我的程序。当用户登录我的系统时，用户可以选择GUI或终端模式来运行系统。

因此，我想知道是否有可能做到这一点。如果可能的话，我该如何继续？我应该使用什么命令从 QT 窗口切换到终端？我需要为单独或使用同一组类创建一组单独的项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:30:06.607

All Linux programs (unless explicitly disabled) print out text to a terminal. If you run the program in a graphical environment you will probably not run it from a console, therefore you won't see the output, but it will be still there.

If you want your program to be usable from a console, just test whether you could create the main window and if not, fallback to simple text output.

Note that the binary will still require the X server and Qt libraries to be installed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:43:17.627

您可以通过 QApplication 构造函数在启用或不启用 GUI 的情况下构建应用程序。请参阅 Qt 文档中的示例：

[http://qt-project.org/doc/qt-4.8/qapplication.html#QApplication-2](http://qt-project.org/doc/qt-4.8/qapplication.html#QApplication-2)

不过，应该注意的是，Let_Me_Be 的回复中的所有内容**都是正确**的。事实上，Qt 示例完全符合他的建议。在你投入编码之前，请花时间理解他的答案。

# php - php if 语句检查字段是否为空

> ID：11778340
> 
> 赞同：3
> 
> 时间：2012-08-02T13:22:59.773
> 
> 标签：php

> **可能重复：**
> [如何检查 PHP 中的 mysql 条目是否为空？](https://stackoverflow.com/questions/1591611/how-to-check-if-mysql-entry-is-empty-in-php)

我试图运行一个看似简单的 if 语句，但是，我的 PHP 技能并不是那么好。

我正在从单个 MySQL 表中查询数据，并且我想运行一个语句来检测字段是否为空，如果不是，我希望它显示某些内容，如果是，则不显示任何内容。

另外，我不确定是否可以将其放入回声中？

编辑：************************ 这是使事情变得更容易的代码：

我可能做错了什么。这是我的代码，可以更容易地解释事情

'

```
if (!$result) {
    exit('<p>Error performing query: ' . mysql_error() . '</p>');
}
//creating the table w/ headers
echo '
<table>
    <thead>
        <tr>
            ...
            <th style="width:90px"><strong><a href="other-items.php?order=oc_retailer">Retailer</a></strong></th>
            <th style="width:90px"><strong>Files</strong></th>
        </tr>
    </thead>';  
// Display each item
  while ($row = mysql_fetch_array($result)) {
  echo '
    <tr>
        ...
        <td style="width:90px">' . $row['oc_retailer'] .'</td>
        <td style="width:90px"> this is where I want to if statement to go</td>

              ';
  }     
  echo '</table>';

  ?>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T13:24:51.880

您可以使用该`empty()`功能将检查是否有任何东西。

`isset()`检查字段上的空值 (boolean==false) - 您也可以使用它。

```
if(empty($row['yourColumn']))
{
    // it's empty!
    echo "Nada in the field!.\n";
}
else
{
    // Do stuff with the field
} 
```

编辑：我认为这就是你的意思：

```
while ($row = mysql_fetch_array($result)) 
{
    if(!empty($row['oc_retailer']))
    {
    echo '
        <tr>
        ...
        <td style="width:90px"> this is where I want to if statement to go</td>
        ';
    }
    else
    {
    echo '
        <tr>
        ...
        <td style="width:90px">Ruh ohes! The Row was Empty!</td>
        ';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:33:13.177

> 我正在从单个 MySQL 表中查询数据，并且我想运行一条语句来检测字段是否为空，如果不是，我希望它显示某些内容，如果是，则不显示任何内容。

所以，你有一个结果集，我认为它是一个数组？在这种情况下，您需要检查该值是否不等于空字符串：

```
if($resultset['fieldname']===' '){
  echo 'fieldname was empty';
} 
```

请注意，使用 isset 的答案实际上是无效的：该值将始终设置，因为该字段存在于结果集中，默认情况下它只是一个空字符串。

**编辑**：我弄错了`empty( )`电话，它似乎在检查`isset($var) && !$var`. 尽管如此，因为您可以控制查询的列，所以不需要 isset 部分，我建议不要`empty( )`在这种情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:25:01.863

从 MySQL 获取数据后尝试

```
if (!isset($data[0]))
 echo 'Input some data'; 
```

或者

```
if (strlen($data[0])<1)
 echo 'Input some data'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:25:36.013

如果你使用`mysql_query`，你可以使用

```
if (mysql_num_rows($result) > 0) {
 echo "There's Data";
} 
```

检查[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)

但最好只使用准备好的语句。

PDO 使用[PDO::rowCount()](http://php.net/manual/en/pdostatement.rowcount.php)

Mysqli 使用[num_rows](http://php.net/manual/en/mysqli-result.num-rows.php)

# iphone - 将 MBProgressHUD 与 Interface Builder 中定义的 Segue 一起使用

> ID：11778341
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:05.947
> 
> 标签：iphone, objective-c, uistoryboard, segue, mbprogresshud

我想使用`MBProgressHUD`库来查看项目中的加载窗格。通常我会使用此代码在屏幕上显示它：

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:HUD];
HUD.delegate = self;
HUD.labelText = @"Loading";
[HUD showWhileExecuting:@selector(myTask) onTarget:self withObject:nil animated:YES]; 
```

您可以看到`myTask`应该定义该函数并包含正在加载的代码。

但是我怎样才能在事件中使用这个`showWhileExecuting`方法呢？`prepareForSegue`我在我的故事板中推送视图，因此不涉及任何代码，我只是 Ctrl+Drag 到目标视图。我的意思是我没有任何代码可用于使用 with 的方法`selector`。

我试图定义一个 null 方法并将其用于`MBProgressHUD showWhileExecuting`方法`selector`，但它不起作用。

我还尝试了以下方法在中使用`selector`，它有效但导致崩溃：

```
- (void)nullTask {
[HUD show:YES];
} 
```

那么，有什么建议吗？在 IB 中使用 push segues 时，我应该在哪里定义`MBProgressHUD`正确显示它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:35:04.923

首先，查看该`UIViewController`方法的文档

`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`

这可能是您想要使用的方法。（无论何时使用此方法，都应在 IB 中设置 segue 的标识符，这样您就知道您来自正确的方法。）无论如何，这应该在原始文件中定义视图控制器。从那里你应该可以打电话`[HUD show:YES];`。我还没有尝试过，因此根据您调用阻塞方法的位置，您可能需要在调用显示和隐藏的位置（或关闭 HUD 的任何方法）进行调整。

祝你好运！

# android - android CallLog.Calls._ID 和contact id一样吗？

> ID：11778342
> 
> 赞同：3
> 
> 时间：2012-08-02T13:23:11.447
> 
> 标签：android, android-contacts

我创建了一个日志调用列表。我想将图片添加到图像视图中的每个联系人。我想问如果

```
Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI, null,
                null, null, "DATE DESC");
int id = managedCursor.getColumnIndex(CallLog.Calls._ID);

is the same with ContactsContract.Contacts._ID 
```

如果这两个不相同，我如何获取联系人正在使用 managedCursor？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:02:09.333

不，不是。它只是行的ID。无论如何，您可以从该字段中读取电话号码`NUMBER`并使用此代码获取联系人 ID： [https ://stackoverflow.com/a/7374721/321354](https://stackoverflow.com/a/7374721/321354)

# c# - 从 Web 链接启动 IOS 条形码扫描仪

> ID：11778349
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:26.450
> 
> 标签：c#, iphone, asp.net, barcode, code39

我正在向 C# asp.net Web 应用程序添加 Code 39 条码扫描功能。此功能必须适用于 iphone、ipad、android 手机和 android 平板电脑。我需要将扫描的条形码值传递回我的网络应用程序。

到目前为止，我已经能够通过[这种](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)方法使用 ZXing 条码扫描仪在 android 手机和 android 平板电脑上完成这项工作。不幸的是，App Store 中的 ZXing 当前版本（1.1 版）目前无法扫描一维条码类型。通过我的大部分研究，我看到一维条码扫描已被移植到更高的 IOS ZXing 版本，但我不是 IOS 开发人员，不确定如何安装或启用它。

我还探索了使用 pic2shop 的[网络解决方案](http://www.pic2shop.com/developers.html)的可能性，但这仅适用于 UPC 和其他商业代码，并且根据我的客户要求，条形码必须是 Code 39。

我在全国各地都有客户，所以我不能亲自为每个客户在现场，所以我需要所有的复杂性都在我的代码中而不是最终用户身上。我意识到 IOS 解决方案可能与 droid 不同，但我需要它让最终用户感觉尽可能接近，因为我的一些客户将使用多个设备，我需要尽量减少混淆。

我意识到我的要求很高，有很多限制，但任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:09:42.183

我最终将[CNS Barcode](http://www.cnsplug-ins.com/iOS/CNS_Barcode)用于 IOS 设备。CNS 是一个很好的解决方案，它可以满足我的所有需求，但它不是一个理想的解决方案，原因有两个：

1.  它不是免费的。我对支付应用程序没有任何问题，我认为开发人员应该得到每一分钱。就我而言，尽管这给我的客户带来了不便。考虑到新功能的好处时，小成本是无关紧要的，但是很难将产品卖给客户然后告诉他们让它工作，您将需要购买其他产品。

2.  CNS 不会将结果返回到调用窗口/选项卡，它会打开一个新选项卡。就我而言，这是一个问题，因为条形码扫描仪被用来扫描身份证以打卡或打卡员工，并且可能会完成 50 次，这意味着打开了 50 个标签。

[通过在新选项卡上创建本地键值存储](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/)实例以及在旧选项卡上创建键值更改侦听器，我能够创建第二个解决方案：

```
window.addEventListener("storage", onStorageChanged, false);
function onStorageChanged(e)
{
    if(/*check for appropriate key-value*/)
    {
         window.Close();       
    }
} 
```

注意：此解决方案可能需要修改以将本地键值存储实例中的实际条形码结果传回原始选项卡，如果原始选项卡未通过 javascript 打开，则使用 window.Close() 关闭新选项卡，这可能更常见，因为 window.Close() 不适用于自然浏览到的窗口（不是用 javascript 打开的）。

由于第 1 个问题只是一种不便，第 2 个问题是可以解决的，我将其标记为已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T17:50:59.073

这是我发现的另一个地方。 [http://codecanyon.net/item/mobile-upc-scanner-with-web-proxy-api/10193177](http://codecanyon.net/item/mobile-upc-scanner-with-web-proxy-api/10193177)

# iphone - 回应，但不知道？

> ID：11778350
> 
> 赞同：0
> 
> 时间：2012-08-02T13:23:30.570
> 
> 标签：iphone, objective-c, cocoa-touch

这是对上一个问题的轻微跟进：

```
for(id <stuffieProtocol> eachObject in stuffieArray) {
    if([eachObject respondsToSelector:@selector(secretID)]) [eachObject secretID];
} 
```

上面是一个快速枚举循环中的一行，它从一个对象中取出一些对象`NSArray`并检查它们是否响应该方法`secretID`。该方法`secretID`不是集合的一部分，`@protocol`而是在集合中的一个对象上定义的方法。

上面的`if`语句失败，因为编译器说`"No known instance method for selector secretID"`这很好，id 不在乎，并且方法没有定义在`<stuffieProtocol>`我可以通过将每个对象转换为确实定义的类型来解决这个问题`secretID:`

```
if([eachObject respondsToSelector:@selector(secretID)]) [(Ted *)eachObject secretID]; 
```

我的问题是在原始代码中，编译器如何知道`eachObject`响应该方法`secretID`，但是当您要求它调用该方法时，它说“没有已知方法”我只是对机制有点好奇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:27:02.970

编译器不知道对象是否响应该选择器，但运行时会。（即编译器不执行代码。）编译器只关心任何 NSObject 可以响应`respondsToSelector:`.

# mysql - 我应该将经常运行/需要的查询结果存储到 Coldfusion 的 Session 范围内吗？

> ID：11778351
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:31.080
> 
> 标签：mysql, session, coldfusion, scope, storage

我有一个系统正在运行`Coldfusion8/MySQL 5.0.88`。

在某些页面上，我需要根据（登录）用户预查询参数。例如，该网站有一个产品搜索，它只允许搜索授权用户的卖家的产品（`allow-list`）。

现在，当用户进入产品页面时，我正在构建`allow-list`显示卖家。当用户触发产品搜索时，我调用 search.cfc，它再次构建`allow-list`执行搜索。在另一个页面上，用户可以锁定/解锁卖家，因此列表可能会定期更改。

**问题：**
我是否应该将其存储`allow-list`到 Session 以使其随处可用，而不必一直重新查询数据库？该列表可能很长（13 位 ID，逗号分隔）。我是否需要一个*Session.rebuild = true/false*参数来指示何时重建而不采用当前的 Session 值（更新后）。如果查询相同但在单独的页面上，查询缓存是否也有意义？

谢谢你的一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:36:57.400

As long as the values stored in the session are not the security that protects them, that's fine.

Query caching is based on the query being sent to the server, if it is identical it should not even touch the db, but get it from memory, effectively doing what your suggesting.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:22:20.883

选择保存缓存的位置很大程度上取决于您希望系统执行的操作。

您不想缓存数据超过有用的时间，因此将其放在 Session 范围内是好的，因为只要用户处于活动状态，它就会被缓存。此外，如果卖家不在乎买家是否从那时起购买了一些东西，即使他们最近被删除了，那么您永远不需要更新缓存，只需等待它过期即可。

或者，您可以依赖 ColdFusion 的内置查询缓存。您可以提供一个您希望大多数用户在网站上处于活动状态的时间范围，并且您可以使用少量代码轻松更新缓存。根据您的观点，一个可能的缺点或优点是服务器上有固定数量的缓存查询，如果超过缓存查询的数量，它将为您刷新缓存。这提供了某种程度的内存管理，但可能会重新获取您希望保持缓存的查询。

这是处理查询缓存的一种方法。这将缓存查询，直到时间跨度过去；缓存的结果将作为超出清除的最大缓​​存查询的一部分或基于代码的整个查询缓存的刷新的一部分被删除。

```
<cffunction name="getData" access="public" output="false" returntype="string" hint="Returns a hash of the supplied string.">
    <cfargument name="Id" type="numeric" required="true">
    <cfargument name="ClearCache" type="boolean" default="false" required="false">

    <!--- Long cache the query since the values rarely change, but allow the cache to be cleared. --->
    <cfif Arguments.ClearCache EQ false>
        <cfset local.CachedWithin = CreateTimeSpan(0,0,10,0)>
    <cfelse>
        <cfset local.CachedWithin = CreateTimeSpan(0,0,0,-1)>
    </cfif>

    <!--- Run the query --->
    <cfquery name="local.qryGetData" datasource="#Variables.DSN#" cachedwithin="#local.CachedWithin#">
        ...
    </cfquery>

    <cfreturn local.qryGetData>
</cffunction> 
```

然后，您可以在更新后运行一个函数来清除相关的缓存查询。

```
<cffunction name="clearCache" access="public" output="false" returntype="void">
    <cfargument name="Id" type="numeric" required="true">

    <cfset Variables.getData(Id=Arguments.Id,  ClearCache=true)>
    <cfset Variables.getSomethingElse(Id=Arguments.Id, ClearCache=true)>

</cffunction> 
```

# iphone - UIScrollView 上的翻转子视图不起作用

> ID：11778355
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:39.623
> 
> 标签：iphone, ios5, uiview, uiscrollview, uiviewanimation

我正在使用 UiNavigation 编写 iPhone TabBar 项目，第一个视图包含 UIScrollView，滚动视图包含视图，每个子视图都包含 imageview、anUiImage 和 UiButton，下面是构建第一个屏幕的功能

```
//*******************************************************
//*            Build the main screen                    *
//*******************************************************
-(void) buildScreen{
    sing.viewsArray = [[NSMutableArray alloc]init];

    int Vve = 10;
    int Vho = 10;
    int wi = 95;
    int hi = 95;
    int ArrayIndex = 0;
    for (int i = 0; i < 5; i++) {

        for (int j = 0; j < 3; j++) {

            staticView = [[UIView alloc] initWithFrame:CGRectMake(Vve, Vho, 100, 100)];
            [staticView setTag:ArrayIndex];

            staticImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[sing.stdPicArray objectAtIndex:ArrayIndex]]];
            [staticImage setFrame:CGRectMake(0, 0, wi, hi)];
            [staticView addSubview:staticImage];

            viewButton = [UIButton buttonWithType:UIButtonTypeCustom];
            viewButton.frame = CGRectMake(0, 0, wi, hi);
            [viewButton addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];
            [viewButton setTag:ArrayIndex];
            [sing.buttonsArray addObject:viewButton];

            [staticView addSubview:viewButton];
            [sing.viewsArray addObject:staticView];

            [MainScroll addSubview:[sing.viewsArray objectAtIndex:ArrayIndex]];

            Vve += 100;
            ArrayIndex++;
        }
        Vve = 10;
        Vho += 100;
    }
} 
```

当我单击 UiButton 时，我想向 UIScrollView 添加另一个 UIView 并在将视图添加到滚动视图时创建一个“UIViewAnimationTransitionFlipFromLeft”尝试以下代码

```
-(void)animateFlip{    
    [UIView transitionWithView:flipViewBack
                      duration:1.0
                       options:UIViewAnimationTransitionFlipFromLeft
                    animations:^{ [self.view addSubview:flipViewBack]; }
                    completion:^(BOOL f){ }];
} 
```

没用刚刚添加了flipViewBack

```
-(void)animateFlip{     
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft        
                           forView:self.flipViewFront 
                             cache:YES];
    [MainScroll addSubview:flipViewFront];
    [UIView setAnimationDidStopSelector:@selector(flipAnimationDidStop:finished:context:)];
    [UIView setAnimationDelegate:self];
    [UIView commitAnimations];
} 
```

不像另一个那样工作，下一个代码确实用我想要的视图翻转了主视图，但它并没有**只**翻转 我想要的视图

```
-(void)animateFlip{
    [UIView beginAnimations:nil 
                    context:nil];
    [UIView setAnimationDuration:1.0];

    [UIView transitionFromView:self.view 
                        toView:flipViewBack 
                      duration:2 
                       options:UIViewAnimationOptionTransitionFlipFromBottom 
                    completion:NULL];
    [UIView setAnimationDidStopSelector:@selector(flipAnimationDidStop:finished:context:)];
    [UIView setAnimationDelegate:self];

    //set transformation

    [UIView commitAnimations];

} 
```

有没有人知道怎么做？我到处找，我发现的所有代码都对我不起作用

谢谢

我尝试了此链接中建议的另一个选项 [iPhone 子视图在 2 个视图之间翻转](https://stackoverflow.com/a/2337273/1106520)，但它对我不起作用

这是我在最后 3 行中单击时使用的函数，我将 flipViewFront 视图添加到 FlipView（容器）中，然后我将 FlipView 添加到 mainScroll 视图，然后我去执行我从您复制的 animateFlip 中的动画样本

```
 //*******************************************************
//*            Click on the picture as button           *
//*******************************************************
-(void) buttonClick:(id) sender{
    UIButton *button = (UIButton *)sender;
    int row = [button superview].tag;
    NSLog(@"Button pressed tag: %i",row);
    self.flipView = [[UIView alloc]initWithFrame:CGRectMake(65, 130, 190, 190)];
    self.flipView.backgroundColor = [UIColor clearColor];

    self.flipViewBack = [[UIView alloc]initWithFrame:CGRectMake(65, 130, 190, 190)];

    self.flipViewFront = [[UIView alloc]initWithFrame:CGRectMake(65, 130, 190, 190)];
    self.flipViewFront.backgroundColor = [UIColor whiteColor];

    self.flipViewImage = [UIImage imageNamed:[sing.stdPicArray objectAtIndex:row]];
    self.filpImage = [[UIImageView alloc]initWithImage:self.flipViewImage];
    [self.flipViewBack addSubview:self.filpImage];

    self.flipCloseButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [self.flipCloseButton setFrame:CGRectMake(0, 0, 24, 24)];
    [self.flipCloseButton setImage:[UIImage imageNamed:@"close_button.png"] forState:UIControlStateNormal];
    [self.flipCloseButton addTarget:self action:@selector(closwFlip:) forControlEvents:UIControlEventTouchUpInside];
    [self.flipViewBack addSubview:flipCloseButton];

    self.flipOkButton = [[UIButton alloc]initWithFrame:CGRectMake(30, 0, 190, 190)];
    [self.flipCloseButton addTarget:self action:@selector(continueTo:) forControlEvents:UIControlEventTouchUpInside];
    [self.flipViewBack addSubview:flipOkButton];
    [flipView addSubview:flipViewFront];
    [MainScroll addSubview:flipView];
    [self animateFlip];
} 
```

找到了问题，但不是答案，如果它直接从 ViewDidLoad 工作并且第一个视图在屏幕上，一切都很好，并且翻转工作'如果我更改它以便想要添加一个视图并在一个事件中翻转它它向我展示了没有翻转的第二个（翻转）视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:50:00.440

您的问题似乎是您试图在将视图添加到视图层次结构之前对视图进行动画处理。

相反，您应该将后视图添加到公共容器视图（稍后将包含前视图），然后在添加前视图和删除后视图的同时翻转容器视图，如下所示：

```
// Container view is a view that is already added to your view hierarchy.
// It contains the back view. The front view will be added to it.
[UIView transitionWithView:containerView
                  duration:1.0
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{
                    [backView removeFromSuperview]; // This is already added to the container
                    [containerView addSubview:frontView]; // Not yet added ...
                }
                completion:NULL]; 
```

## 更新

这是我在回答这个问题时写的所有代码。这个对我有用。如果它仍然没有为您设置动画，那么您可能没有以相同的方式设置您的视图层次结构。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    containerView = [[UIView alloc] initWithFrame:CGRectMake(30, 30, 100, 100)];
    [self.view addSubview:containerView];

    frontView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [frontView setBackgroundColor:[UIColor orangeColor]];
    backView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [backView setBackgroundColor:[UIColor redColor]];
    [containerView addSubview:backView];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(flip)];
    [self.view addGestureRecognizer:tap];
}

- (void)flip {
    [UIView transitionWithView:containerView
                      duration:1.0
                       options:UIViewAnimationOptionTransitionFlipFromLeft
                    animations:^{
                        [backView removeFromSuperview];
                        [containerView addSubview:frontView];
                    }
                    completion:NULL];
} 
```

# c# - 如何仅使用一个线程使用 .net 异步 CTP

> ID：11778357
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:42.113
> 
> 标签：c#, asynchronous, tap, ctp

所以我最近一直在阅读大量关于网络异步 CTP 的内容，并且不断出现的一件事是这样的句子：“异步不是关于启动新线程，而是关于多路复用工作”和“没有多线程的异步是相同的想法[与协作多任务处理]。您执行一项任务一段时间，当它产生控制权时，您在该线程上执行另一项任务一段时间“。

我试图了解这样的言论是否纯粹（嗯，主要是）深奥和学术，或者是否有一些我忽略的语言结构允许我通过“等待”开始的任务神奇地在 UI 线程上运行。

在他的博客中，Eric Lippert 给出了这个例子来演示如何在没有多线程的情况下使用 Asyncrhony：

```
async void FrobAll()
{
    for(int i = 0; i < 100; ++i)
    {
        await FrobAsync(i); // somehow get a started task for doing a Frob(i) operation on this thread
    }
} 
```

现在，这是让我感兴趣的评论：“......获得一个开始的任务，在这个线程上执行 Frob(i) 操作”。

这怎么可能？这主要是理论上的评论吗？到目前为止，我能看到的唯一一个任务似乎不需要单独线程的情况（好吧，除非你检查代码，否则你无法确定）就像 Task.Delay() 之类的，可以在没有的情况下等待开始另一个线程。但我认为这是一种特殊情况，因为我没有为此编写代码。

对于想要从 GUI 线程中卸载一些他们自己的长时间运行的代码的普通用户来说，我们主要不是在谈论像 Task.Run 这样的事情来卸载我们的工作吗？线？如果是这样，为什么所有这些手臂都放弃不将异步与多线程混淆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:28:50.240

请参阅我[对`async`/`await`](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)的介绍。

在 CPU 工作的情况下，您必须使用类似的东西`Task.Run`在另一个线程中执行它。但是，有很多工作不是 CPU 工作（网络请求、文件系统请求、计时器等），而且每一个都可以在`Task` *不*使用线程的情况下包装在 a 中。

请记住，在驱动程序级别，*一切*都是异步的。同步 Win32 API 只是方便的包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:35:51.213

不是 100% 肯定，但从文章中听起来好像是它允许 Windows 消息（调整大小事件、鼠标点击等）在对`FrobAsync`. 大致类似于：

```
void FrobAll()
{
    for(int i = 0; i < 100; ++i)
    {
        FrobAsync(i); // somehow get a started task for doing a Frob(i) operation on this thread
        System.Windows.Forms.Application.DoEvents();
    }
} 
```

或者更准确地说：

```
void FrobAll()
{
    SynchronizationContext.Current.Post(QueueFrob, 0);
} 

void QueueFrob(Object state) {
    var i = (int)state;
    FrobAsync(i);
    if (i == 99) return;
    SynchronizationContext.Current.Post(QueueFrob, i+1);
} 
```

`DoEvents`没有每次迭代之间讨厌的调用。发生这种情况的原因是因为对 await 的调用发送了一条 Windows 消息，该消息将该`FrobAsync`调用排入队列，从而允许在下一次 Frobbing 开始之前执行在 Frobbing 之间发生的任何 Windows 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:47:45.420

`async`/`await`只是关于异步。从调用方来看，是否使用多个线程并不重要——只是它做一些异步的事情。例如，IO 完成端口是异步的，但不执行任何多线程（操作的完成发生在后台线程上；但“工作”并未在该线程上完成）。

从`await`关键字来看，“多线程”是没有意义的。异步操作所做的是一个实现细节。

在 Eric 的示例中，该方法可以按如下方式实现：

```
return Task.Factory.StartNew(SomeMethod, 
                             TaskScheduler.FromCurrentSynchronizationContext()); 
```

`SomeMethod`这实际上意味着当它完成所有当前排队的工作时，在当前线程上排队调用。这与可能在执行之前返回的`FrobAsync`in的调用者是异步的。`FrobAsync``SomeMethod`

现在，`FrobAsync`可以实现使用多线程，在这种情况下，它可以这样写：

```
return Task.Factory.StartNew(SomeMethod); 
```

如果未更改默认 TaskScheduler ，则使用线程池。但是，从调用者的角度来看，什么都没有改变——你仍然`await`是方法。

从多线程的角度来看，这是你应该看的。使用`Task.Start`,`Task.Run`或`Task.Factory.StartNew`.

# windows-8 - 在 Windows 8 中获取应用程序设置和文件的容器

> ID：11778358
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:44.780
> 
> 标签：windows-8

我正在尝试为我的应用程序设置和文件获取容器，我在 Microsoft 网站中找到了此代码

```
Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
Windows.Storage.ApplicationDataContainer localFolder = Windows.Storage.ApplicationData.Current.LocalFolder; 
```

但是当我将它粘贴到我的代码中时，它给了我一个错误

![在此处输入图像描述](../Images/b3731945fb1133394da3e2c61b648e22.png)

有谁知道错误是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:55:50.267

LocalFolder 不是存储容器，它是存储文件夹。像这样的东西不是更好吗？

Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;

Windows.Storage.StorageFolder localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:55:22.830

您正在访问的属性返回一个类型的对象`StorageFolder`（如您发现错误示例的同一 MS 网页上所述）。因此，只需根据需要更改类型`localFolder`。

不要相信示例，它们通常在发布后的前几年包含错误。另外，学习阅读和理解错误信息。您明确发布的错误说明出了什么问题以及如何解决它。

# c# - 来自 HttpWebRequest C# 的无效数据 HttpWebResponse

> ID：11778360
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:47.793
> 
> 标签：c#, asp.net, .net, web-services, rest

我正在尝试将 HttpWebResponse 加载到 XmlDocument 中，并收到异常“根级别的数据无效。第 1 行，位置 1”。如果我将响应输出到控制台，我会得到“system.net.connectstream”。凭据似乎不是我的问题，因为如果我输入了错误的密码，我的异常会更改为 404 错误。这是我的代码...

```
string username = "username";
string password = "password";
string url = "https://myurl.com";

HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
request.Credentials = new NetworkCredential(username, password);
HttpWebResponse response = request.GetResponse() as HttpWebResponse;
XmlDocument xmlDoc = new XmlDocument();
Console.WriteLine(response.GetResponseStream());
xmlDoc.Load(response.GetResponseStream()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:27:49.773

调用不会对您有太大帮助 -`ToString`不会被覆盖。`GetResponseStream()``Stream.ToString`

我建议你使用这样的东西进行调试::

```
// Prefer casting over "as" unless you're going to check it...
using (HttpWebResponse response = (HttpWebResponse) request.GetResponse())
{
    using (Stream stream = response.GetResponseStream())
    {
        // For diagnostics, let's assume UTF-8
        using (StreamReader reader = new StreamReader(stream))
        {
            Console.WriteLine(reader.ReadToEnd());
        }
    }
} 
```

`(with StreamReader)`然后用`XmlDocument.Load`调用替换中间部分。

我怀疑你会看到它基本上是无效的 XML，但上面应该向你展示它的真正含义。

编辑：您的评论将数据显示为：

```
{"messages":{"message":"1 Device(s) returned."},"devices":{"device":
    {"@id":"00","uuid":"00000000","phonenumber":"000‌​000",
     "user name":"0000","name":"Guy,Somebody","platform":"platform","os":"III",
     "version":"1‌​.1.1"}},"appName":"someApp"} 
```

那是JSON。它不是 XML。不要尝试将其加载为 XML。你有两个选择：

*   如果服务器支持，请更改您请求的内容，以便获得 XML 响应
*   将其解析为 JSON（例如使用[Json.NET](http://json.codeplex.com)）而不是 XML。

# jquery - 将 div 定位到文档宽度？

> ID：11778363
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:52.483
> 
> 标签：jquery, html, css

基本上，目前我的网站上有一个按钮，可以将整个页面动画到左侧，或多或少地显示另一个“页面”，我已经设置了我[已经](http://jsfiddle.net/shannonhochkins/z7Xpu/)拥有的东西，尽管我的问题是：

有没有办法通过用户计算机的“分辨率”来抵消“第二页”？

我可以按照我的方式做到这一点，但是如果我说一台计算机的分辨率大于或小于 1920 x 1080。第二页不会在正确的位置，或者“紧挨着”第一页！:(

小提琴：http: [//jsfiddle.net/shannonhochkins/z7Xpu/](http://jsfiddle.net/shannonhochkins/z7Xpu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:36:58.847

```
function fitToScreen(){
   var dimensions = {
      'height' : $(window).height() + 'px',
      'width' : $(window).width() + 'px'
    };

    $('#myPage').css(dimensions);
} 
```

* * *

```
$(function(){    
    fitToScreen();    //on load

   $(window).resize(fitToScreen); //will call when window is resized
}); 
```

This will set the dimensions to the viewport's `width` x `height` at that point in time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:32:19.230

简而言之，id 说使用 jquery 并做类似的事情（**伪代码来了**）

```
var sWidth =s screens width
var sHeight =s screens height 
```

然后

```
var box =s your "second page box id" 
```

然后用 jquery 之类的东西

box.css("宽度", sWidth);

box.css("高度", sHeight);

等等......这都是伪代码，但你明白了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:49:44.043

试试这个[小提琴](http://jsfiddle.net/dFHuS/)

我认为这对您来说非常有用

# php - 使用 PHP 从 xml 字符串中删除加密数字

> ID：11778365
> 
> 赞同：0
> 
> 时间：2012-08-02T13:23:56.253
> 
> 标签：php, xml, regex

我正在尝试在 PHP 中解析订单导出 xml，但是当 xml 中包含卡号时我遇到了问题，因为它们是加密的。下面是 xml 的片段和我收到的错误。我正在使用 $xml = new SimpleXMLElement($ox->xml); 解析 xml $ox->xml 是将 xml 作为从 API 中提取的字符串。有没有办法在将它传递给 SimpleXML 之前从字符串中删除 cardnum？

XML 片段（您会注意到并非所有订单都有卡片编号）：

```
<?xml version = "1.0" encoding="Windows-1252" standalone="yes"?>
<VFPDataSet>
<sqlresult>
<orderno>1001</orderno>
<custnum>1000</custnum>
<cl_key>WEBF12</cl_key>
<odr_date>2012-07-25T00:00:00</odr_date>
<hold_type/>
<perm_hold>false</perm_hold>
<sys_hold>false</sys_hold>
<ship_date>2012-07-25T00:00:00</ship_date>
<ccheck>G</ccheck>
<paymethod>CK</paymethod>
<cashonly>false</cashonly>
<cardnum>ÈòMh»ÚKj›Õ›Ïzsé„¸“®ôLý[0¡ZÍ</cardnum>
<cardtype>VI</cardtype>
...
<edi>false</edi>
</sqlresult>
<sqlresult>
<orderno>1005</orderno>
<custnum>1001</custnum>
<cl_key>NEWCUST</cl_key>
<odr_date>2012-07-26T00:00:00</odr_date>
<hold_type/>
<perm_hold>false</perm_hold>
<sys_hold>false</sys_hold>
<ccheck/>
<paymethod>CK</paymethod>
<cashonly>false</cashonly>
<cardnum/>
<cardtype/>
...
<edi>false</edi>
</sqlresult>
</VFPDataSet> 
```

错误：

```
Warning: SimpleXMLElement::__construct(): input conversion failed due to input error, bytes 0x90 0x03 0x51 0x3B in C:\inetpub\wwwroot\automa
te\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): input conversion failed due to input error, bytes 0x90 0x03 0x51 0x3B in C:\inetpub\wwwroot\automa
te\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): encoder errorEntity: line 1202: parser error : PCDATA invalid Char value 30 in C:\inetpub\wwwroot\
automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): Entity: line 1202: parser error : PCDATA invalid Char value 25 in C:\inetpub\wwwroot\automate\expo
rtOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): Entity: line 1202: parser error : PCDATA invalid Char value 7 in C:\inetpub\wwwroot\automate\expor
tOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): Entity: line 1202: parser error : Premature end of data in tag cardnum line 1202 in C:\inetpub\www
root\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on l
ine 43

Warning: SimpleXMLElement::__construct(): Entity: line 1202: parser error : Premature end of data in tag sqlresult line 1191 in C:\inetpub\w
wwroot\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on l
ine 43

Warning: SimpleXMLElement::__construct(): Entity: line 1202: parser error : Premature end of data in tag VFPDataSet line 2 in C:\inetpub\www
root\automate\exportOrdHeader.php on line 43

Warning: SimpleXMLElement::__construct(): <cardnum>╦å{├╛▲├Ü┬«↓-├┐v┬▒ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on lin
e 43

Warning: SimpleXMLElement::__construct(): ^ in C:\inetpub\wwwroot\automate\exportOrdHeader.php on l
ine 43

Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML' in C:\inetpub\wwwroot\automate\exportOrdHeader.
php:43
Stack trace:
#0 C:\inetpub\wwwroot\automate\exportOrdHeader.php(43 ): SimpleXMLElement->__construct('<?xml version =...')
#1 {main}
thrown in C:\inetpub\wwwroot\automate\exportOrdHeader.php on line 43 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:28:34.967

The simplest solution for this specific case is to remove it by regular expression:

```
$xml = preg_replace('/<cardnum>.*?<\/cardnum>/s', '<cardnum>REMOVED</cardnum>', $xml); 
```

# java - 我将如何阅读 LWJGL 中的精灵表？

> ID：11778366
> 
> 赞同：1
> 
> 时间：2012-08-02T13:23:56.910
> 
> 标签：java, textures, lwjgl, sprite-sheet

我目前使用 LWJGL 纹理在屏幕上绘制图像。我想从精灵表中读取纹理*。我正在使用 slick 的 TextureLoader 类来加载纹理。

我绘制了一个 LWJGL 形状并将纹理绑定到它上面。

例如：

我画了一个图像：

```
 Texture texture = ResourceManager.loadTexture("Images/Tests/test.png");

    GL11.glBegin(GL11.GL_QUADS);
    {
      GL11.glTexCoord2f(0, 0);
      GL11.glVertex2f(0, 0);
      GL11.glTexCoord2f(0, texture.getHeight());
      GL11.glVertex2f(0, height);
      GL11.glTexCoord2f(texture.getWidth(), texture.getHeight());
      GL11.glVertex2f(width,height);
      GL11.glTexCoord2f(texture.getWidth(), 0);
      GL11.glVertex2f(width,0);
    }
    GL11.glEnd(); 
```

我认为在调用 glTexCoord2f 时有一种方法，我可以给它一个精灵偏移量并将精灵表加载到纹理中，

例如一个电话会是这样的：

```
 GL11.glTexCoord2f(0+spriteXOffset, texture.getHeight()-spriteYOffset); 
```

但我真的很想知道是否有更简单的方法，例如从单个纹理中提取纹理，就像他们在这里所做的那样：

[从精灵表 Java 中读取图像](https://stackoverflow.com/questions/10604824/reading-images-from-a-sprite-sheet-java)

只是代替 BufferedImage，Texture 对象。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T17:46:24.743

Slick 纹理加载器内部使用的 GL_TEXTURE_2D 的纹理坐标需要归一化纹理坐标。也就是说，坐标范围从 0.0 到 1.0。所以 (0,0) 是纹理的左上角， (1,1) 是右下角。假设您手头有像素坐标中的精灵坐标，那么您必须将 x 坐标除以纹理宽度，将 y 坐标除以纹理高度，从而得到归一化的纹理坐标。然后，您将使用 glTexCoord 将这些坐标提供给 OpenGL。

```
glTexCoord2f(spriteX / textureWidth, spriteY / textureHeight);
glVertex2f(coordinateX, coordinateY);
glTexCoord2f(spriteX+spriteWidth / textureWidth, spriteY / textureHeight);
glVertex2f(coordinateX2, coordinateY);
// Et cetera 
```

但是，还有一种更简单的方法可以做到这一点。看看[这个视频](http://youtu.be/Xj_qZ3Cw08Q)（我创建的），看看如何使用像素坐标而不是标准化的纹理。

# android - 将图像从网络加载到图像库

> ID：11778367
> 
> 赞同：0
> 
> 时间：2012-08-02T13:23:58.587
> 
> 标签：android

我正在使用以下代码制作图片库，但我想使用来自网络的图片而不是来自 SD 卡的图片。有没有办法做到这一点？目前，代码需要图像的整数值。还是我必须先将图像下载到 SD 中？

```
 public class viewimages extends Activity {

private Gallery gallery;
private ImageView imgView;

private Integer[] Imgid = {
        R.drawable.a_1, R.drawable.a_2, R.drawable.a_3, R.drawable.a_4
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewimages);

    imgView = (ImageView)findViewById(R.id.ImageView01);    
    imgView.setImageResource(Imgid[0]);

     gallery = (Gallery) findViewById(R.id.examplegallery);
     gallery.setAdapter(new AddImgAdp(this));

     gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {
            imgView.setImageResource(Imgid[position]); 
        }
    });

}

public class AddImgAdp extends BaseAdapter {
    int GalItemBg;
    private Context cont;

    public AddImgAdp(Context c) {
        cont = c;
        TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
        GalItemBg = typArray.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
        typArray.recycle();
    }

    public int getCount() {
        return Imgid.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imgView = new ImageView(cont);

        imgView.setImageResource(Imgid[position]);
        imgView.setLayoutParams(new Gallery.LayoutParams(80, 70));
        imgView.setScaleType(ImageView.ScaleType.FIT_XY);
        imgView.setBackgroundResource(GalItemBg);

        return imgView;
    }
}

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:27:35.763

你可以这样做：

```
URL url = new URL("http://www.website.com/image.jpg");
Bimtap bmp = BitmapFactory.decodeStream(url.openConnection()
                    .getInputStream()); 
```

然后，您需要将执行“setImageResource”的位置更改为“setImageBitmap”，并在下载和加载后提供“bmp”对象。

[编辑]

确保您的 android 清单具有互联网权限也很重要。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

[编辑评论问题]

如果您想对多个图像执行此操作，并且图像不是基于 id_number（基本上如果图像不是 0001.jpg、0002.jpg 等），请创建一个字符串 ArrayList 来保存名称的所有项目，然后遍历它。例如，

```
List<String> imageNames = new ArrayList<String>();
imageNames.add("image.jpg");
imageNames.add("thisPhoto.jpg");
//etc. until you've added all images

for (int i = 0; i < imageNames.size(); i++){
    URL url = new URL("http://www.website.com/" + imageNames.get(i));
    Bimtap bmp = BitmapFactory.decodeStream(url.openConnection()
                    .getInputStream());
} 
```

希望有帮助

# unix - 具有用户定义的换行符的 Unix 排序文本文件

> ID：11778368
> 
> 赞同：4
> 
> 时间：2012-08-02T13:24:16.230
> 
> 标签：unix, sorting, character, newline, user-defined

我有一个纯文本文件，其中换行符不是`"\n"`特殊字符。

现在我想对这个文件进行排序。

`sort`使用 unix命令时是否有直接指定自定义换行符的方法？我不想尽可能为此使用脚本？

请注意文本文件中的数据有`\n`、`\r\n`和`\t`字符（此类数据的原因是特定于应用程序的，因此请不要对此发表评论）。

样本数据如下：

```
1111\n1111<Ctrl+A>
2222\t2222<Ctrl+A>
3333333<Ctrl+A> 
```

这`Ctrl+A`是换行符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:34:27.387

用于`perl -001e 'print sort <>'`执行此操作：

```
prompt$ cat -tv /tmp/a
2222^I2222^A3333333^A1111
1111^A

prompt$ perl -001e 'print sort <>' /tmp/a | cat -tv    
1111
1111^A2222^I2222^A3333333^Aprompt$ 
```

之所以有效，是因为字符 001（八进制 1）是 control-A ( `"\cA"`)，它是您在此数据集中的记录终止符。

您还可以使用`-0xHHHHH`. 请注意，使用此快捷方式时，它必须是单个代码点，而不是字符串。有一些方法可以处理字符串，甚至涉及无限多代码的正则表达式。

# sql-server-2008 - Sql 查询以选择值并按系列对它们进行分组

> ID：11778371
> 
> 赞同：1
> 
> 时间：2012-08-02T13:24:26.217
> 
> 标签：sql-server-2008

我正在开发一个 sql server 2008 数据库。

我有一张这样的桌子”

```
Id     Year    Series  Value
----+------+--------+------
1     1990    a       1.5
1     1990    b       1.6
1     1990    c       1.7
1     1991    a       1.8
1     1991    b       1.9
1     1991    c       2.5 
```

是否有可以选择值并像这样返回它们的查询？

```
Year    a     b        c
------+------+--------+------
1990    1.5    1.6      1.7
1991    1.8    1.9      2.5 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:56:30.473

如果系列固定为 a,b,c 你可以这样做：

```
CREATE TABLE #t (Id    INT,  Year  INT,  
    Series VARCHAR(5), Value DECIMAL(10,1))
INSERT #t
VALUES
(1,     1990,    'a',       1.5),
(1,     1990,    'b',       1.6),
(1,     1990,    'c',       1.7),
(1,     1991,    'a',       1.8),
(1,     1991,    'b',       1.9),
(1,     1991,    'c',       2.5)

SELECT  pvt.Year,
        pvt.a,
        pvt.b,
        pvt.c
FROM    #t
PIVOT (
    MIN(Value) FOR Series IN ([a], [b], [c])
) pvt 
```

如果还有其他值，您可以使用动态枢轴：

```
DECLARE @series VARCHAR(100) = 
    STUFF(( SELECT  DISTINCT ',[' + Series + ']'
            FROM    #t
            FOR     XML PATH(''))
            ,1, 1, '')

DECLARE @query VARCHAR(2000) = '
SELECT  pvt.Year, ' + @series +'
FROM    #t
PIVOT (
    MIN(Value) FOR Series IN (' + @series + ')
) pvt
';

EXEC(@query) 
```

在具有固定系列的场景中，CROSS JOIN 也有可能：

```
SELECT  a.Year, 
        MAX(CASE WHEN a.Series = 'a' THEN a.Value END) a,
        MAX(CASE WHEN a.Series = 'b' THEN a.Value END) b,
        MAX(CASE WHEN a.Series = 'c' THEN a.Value END) c
FROM    #t a
CROSS   JOIN #t b
GROUP   BY a.Id, a.Year
ORDER   BY a.Year 
```

# oracle - 在 Oracle 的 SQL Developer 中从结果中删除级联约束

> ID：11778376
> 
> 赞同：0
> 
> 时间：2012-08-02T13:24:37.183
> 
> 标签：oracle, oracle-sqldeveloper

如何使用级联约束选项从 Oracle SQL Developer (3.1) 的网格中删除记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:12:06.570

您不能通过 SQL “使用级联删除”（因此不能通过*任何*SQL 客户端 - 包括 SQL Developer）

选项“级联”是外键约束的一个属性。

您无法按需启用

# java - 声明通用方法，需要澄清

> ID：11778379
> 
> 赞同：15
> 
> 时间：2012-08-02T13:24:42.800
> 
> 标签：java, generics

考虑以下 2 个方法声明：

```
1\. public abstract <T extends MetaData> List<T> execute();
2\. public abstract List<? extends MetaData>  execute(); 
```

两者似乎都**返回了扩展 MetaData 的对象列表**。

请问他们有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T13:35:54.617

在第一种情况下，您将允许 Java 使用类型推断并推断`T`每个调用站点的类型。

在第二种情况下，您将始终得到 a `List<? extends MetaData>`，因此无法将其分配给任何更窄类型的变量，例如`List<IntegerMetaData>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:47:10.977

如果有任何子类型，`MetaData`那么第一个版本只能返回一个空列表或`null`. 第二个版本可能会返回一个包含实例`MetaData`及其子类型的列表。

示例：说`A`和`B`是 的子类型，`MetaData`并`execute`返回一个包含 的实例的列表`A`。调用者可能像这样调用了execute：

```
List<B> list = execute(); // the second version does not allow this 
```

调用者说他想要一个`B`s 的列表，但得到一个包含 s 的列表`A`。由于类型擦除，实现`execute`无法知道调用者要求什么。因此无法实现第一个版本（返回`null`或空列表除外）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T13:30:26.383

在示例 1 中，您不能必须返回泛型类型为 的 List `T`，例如：

```
@Override
public <T extends MetaData> List<T> execute() {
    List<T> l = new ArrayList<T>();
    return l; 
} 
```

在示例 2 中，您可以返回一个泛型类型为 just 的 List `MetaData`，例如：

```
@Override
public List<? extends MetaData> execute2() {
    List<MetaData> l = new ArrayList<MetaData>();
    return l;
} 
```

有什么不同？在第一种情况下，该*方法*具有泛型类型，`T`您*必须*返回与该类型相关的内容。在第二种情况下，您只返回一个泛型类型，但方法本身没有泛型类型。

# java - 是否可以通过单个测试测试多个类

> ID：11778384
> 
> 赞同：2
> 
> 时间：2012-08-02T13:24:53.837
> 
> 标签：java, unit-testing, junit

使用 JUnit4，我想做的是能够测试一组不同的 java 项目，它们都做同样的事情，但不必写出一个测试用例来测试每个项目，我想知道是否可以编写一个可以在多个类上运行的单个测试？

如果使用 JUnit4 无法做到这一点，是否可以通过其他方式做到这一点？

我知道这是不对的，但这只是为了简要说明我的意思：

```
@Test
public void test(Class insertClassNameHere, Method nameOfMethod){
    Class insertClassNameHere = new Class();
    assertEquals(insertClassNameHere.nameOfMethod(),1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:31:06.150

您可以使用 JUnit 的 @Parameterized。

```
@RunWith(Parameterized.class)
public class BehaviorTest {
    @Parameters
    public static Collection<Object[]> classesAndMethods() {
        List<Object[]> list = new ArrayList<Object[]>();
        list.add(new Object[]{ Foo.class, Foo.class.getMethod("foo") });
        return list;
    }

    private Class clazz;
    private Method method;

    public BehaviorTest(Class clazz, Method method) {
         this.clazz = clazz;
         this.method = method;
    }

    @Test
    public void testBehavior() {
        // Do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:29:31.540

怎么样...之类的

```
for(Class cls: new Class[] { Class1.class, ... } )
    assertEquals(1, nameOfMethod.invoke(cls.newInstance())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:29:39.743

当然。对此没有*技术*限制。但这是不可取的。*他们将其称为单元*测试是有充分理由的。

如果您要对多个类使用相同的测试，那么这通常表明您的应用程序中有重复的代码。

* * *

测试类是普通的 java 类，因此您可以使用继承来实现您的想法：一个包含实际测试的基（测试）类和执行一些设置的子（测试）类，iaw，使用实例初始化测试要测试的不同类。您甚至可以使用反射来创建实例和方法对象。

如果您必须为作业准备单元测试，您希望为同一任务提供数十个不同的课程，这可能是一个解决方案。但对于大多数其他情况，我宁愿复制测试方法，然后创建复杂的测试类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T16:27:42.213

很抱歉这么晚才跳进去。有类似的需求，我开发了许多演示文稿和培训，展示了重构后给定类随时间的变化。因此，测试是相同的，但类本身会发生变化。每个版本都包含在不同的包中。类名保持不变。这听起来与OP所面临的相似。

我发现参数化解决方案很麻烦。我使用了两种解决方案。它们都是用 Groovy 编写的，但下面的第二个示例应该可以作为纯 Java 解决方案来实现。

这是第一个：

```
public class ItemTest {
    def defaultConstructedClasses = [
         new com.groovifyingjava.essentialgroovification.Item()
        ,new com.groovifyingjava.rewriteequals.Item()
        ,new com.groovifyingjava.removesemicolons.Item()
        ,new com.groovifyingjava.removeparentheses.Item()
        ,new com.groovifyingjava.removeaccessors.Item()
        ,new com.groovifyingjava.removeconstructors.Item()
        ,new com.groovifyingjava.removeimports.Item()
        ,new com.groovifyingjava.removereturn.Item()
        ,new com.groovifyingjava.clarifyidentityequality.Item()
        ,new com.groovifyingjava.coercetypes.Item()
        ,new com.groovifyingjava.defaultaccessmodifiers.Item()
        ,new com.groovifyingjava.eachiteration.Item()
        ,new com.groovifyingjava.fieldaccessnotation.Item()
        ,new com.groovifyingjava.namedparameters.Item()
        ,new com.groovifyingjava.optionaldatatyping.Item()
        ,new com.groovifyingjava.safelynavigate.Item()
        ,new com.groovifyingjava.simplifylistmapsetcreation.Item()
        ,new com.groovifyingjava.stringinterpolation.Item()
        ,new com.groovifyingjava.useelvisoperator.Item()
        ,new com.groovifyingjava.useequalsoperator.Item()
        ,new com.groovifyingjava.usemathoperators.Item()
        ,new com.groovifyingjava.useprintln.Item()
    ]

    def overloadedConstructorArgs = [itemId: "14-101", manufacturer: "Raleigh", model: "Superbe Roadster", cost: 179.89, quantityOnHand: 10]

    def overloadedConstructedClasses = [
         new com.groovifyingjava.essentialgroovification.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.rewriteequals.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removesemicolons.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removeparentheses.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removeaccessors.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removeconstructors.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removeimports.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.removereturn.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.clarifyidentityequality.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.coercetypes.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.defaultaccessmodifiers.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.eachiteration.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.fieldaccessnotation.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.namedparameters.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.optionaldatatyping.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.safelynavigate.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.simplifylistmapsetcreation.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.stringinterpolation.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.useelvisoperator.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.useequalsoperator.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.usemathoperators.Item(overloadedConstructorArgs)
        ,new com.groovifyingjava.useprintln.Item(overloadedConstructorArgs)
    ]

    @Test public void canCreateDefaultInstance() {
        for(def item in defaultConstructedClasses) {
            assertNull "Default construction of class ${item.class.name} failed to properly initialize field.", item.itemId
            assertNull "Default construction of class ${item.class.name} failed to properly initialize field.", item.manufacturer
            assertNull "Default construction of class ${item.class.name} failed to properly initialize field.", item.model
            assertNull "Default construction of class ${item.class.name} failed to properly initialize field.", item.cost
            assertEquals "Default construction of class ${item.class.name} failed to properly initialize field.", 0, item.quantityOnHand
            assertEquals "Default construction of class ${item.class.name} failed to properly initialize field.", BigDecimal.ZERO, item.inventoryValue as BigDecimal
        }
    }

    @Test public void canCreateInstancesFromOverloadedConstructor() {
        for(def item in overloadedConstructedClasses) {
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.","14-101", item.itemId
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", "Raleigh", item.manufacturer
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", "Superbe Roadster", item.model
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", 179.89, item.cost
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", 10, item.quantityOnHand
            assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", new BigDecimal("1798.90"), item.inventoryValue as BigDecimal
        }
    }
} 
```

这很好用并且很容易实现。它使用 Groovy 鸭子类型来测试每个类。缺点是 Eclipse 中的 junit 控制台将显示最后一次测试运行。这可能没什么大不了的。此外，它会因测试失败而停止执行。请注意，我在断言消息字符串中包含了类名。这使得识别失败的类变得容易。

第二个版本需要一个抽象测试类，每个包中都有一个测试类，对应于被测类的每个包。这些只是存根，但允许您谨慎地或在套件中运行测试。

```
public abstract class CommonItemTest {
    def overloadedConstructorArgs = [itemId: "14-101", manufacturer: "Raleigh", model: "Superbe Roadster", cost: 179.89, quantityOnHand: 10]

    @Test public void canCreateDefaultInstance() {
        def item = defaultConstructedClass

        assertNull "Default construction of class ${item.class.name} failed to properly initialize field. Expected itemId to be null.", item.itemId
        assertNull "Default construction of class ${item.class.name} failed to properly initialize field. Expected manufacturer to be null.", item.manufacturer
        assertNull "Default construction of class ${item.class.name} failed to properly initialize field. Expected model to be null.", item.model
        assertNull "Default construction of class ${item.class.name} failed to properly initialize field. Expected cost to be null.", item.cost
        assertEquals "Default construction of class ${item.class.name} failed to properly initialize field. Expected quantityOnHand to be zero.", 0, item.quantityOnHand
        assertEquals "Default construction of class ${item.class.name} failed to properly initialize field. Expected inventoryValue to be zero.", BigDecimal.ZERO, item.inventoryValue as BigDecimal
    }

    @Test public void canCreateInstancesFromOverloadedConstructor() {
        def item = overloadedConstructedClass

        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.","14-101", item.itemId
        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", "Raleigh", item.manufacturer
        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", "Superbe Roadster", item.model
        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", 179.89, item.cost
        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", 10, item.quantityOnHand
        assertEquals "Instantiation of class ${item.class.name} using overloaded constructor failed to properly initialize field.", new BigDecimal("1798.90"), item.inventoryValue as BigDecimal
    }

    abstract Object getDefaultConstructedClass();
    abstract Object getOverloadedConstructedClass();
} 
```

和实施...

```
public class ItemTest extends CommonItemTest {
    public Object getDefaultConstructedClass() {
        return new Item()
    }
    public Object getOverloadedConstructedClass() {
        return new Item(overloadedConstructorArgs)
    }
} 
```

# mysql - MySQL查询三表省略列重复

> ID：11778385
> 
> 赞同：1
> 
> 时间：2012-08-02T13:24:57.963
> 
> 标签：mysql, select, duplicates, multiple-tables

Got 3 Tables：pers，skills，articles（人有*n个*技能，写了*n*篇文章）

**(T1) 个人**

```
1  John
2  Joe 
```

**(T2) 技能**

```
1  John_sings    
1  John_laughs
2  Joe_runs 
```

**(T3) 文章**

```
1  John_article_1
2  Joe_article_1
3  Joe_article_2 
```

我预计：

```
John - John_laughs - John_article_1
John - John_sings  - [NULL]
Joe  - Joe_runs    - Joe_article_1
Joe  - [NULL]      - Joe_article_2 
```

[因为我们有 2 个单独的 1:n 关系，所以根据这个问题](https://stackoverflow.com/questions/5768082/removing-duplicates-from-result-of-multiple-join-on-tables-with-different-column)，连续连接不会这样做 -> 不是 T1 x T2 x T3，而是 (T1 x T2) x (T1 x T3) 。

我试过了：

```
SELECT child1.id,
       child1.name,
       child1.skill,
       child2.title
FROM
  (SELECT pers.id,
          pers.name,
          skills.skill
   FROM pers
   LEFT JOIN skills ON pers.id = skills.pers_id) child1
INNER JOIN
  (SELECT pers.id,
          article.title
   FROM pers
   LEFT JOIN article ON pers.id = article.pers_id) child2 ON child1.id = child2.id 
```

但这表明

```
John - John_laughs - John_article_1
John - John_sings  - John_article_1
Joe  - Joe_runs    - Joe_article_1
Joe  - Joe_runs    - Joe_article_2 
```

显然，我不想要两次“Joe_runs”，也不想两次“John_article_1”。

感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:08:11.057

为每人的每篇文章和每人的每项技能分配一个行号。

所以现在你的数据就像

```
T1) pers
PId Name
1   John

2   Joe

(T2) skills
PId Skill      Rank

1   John_sings   1

1   John_laughs  2

2   Joe_runs     1

(T3) article
PId Article        Rank
1   John_article_1 1
2   Joe_article_1  1 
2   Joe_article_2  2 
```

现在完整的外连接技能和关于 Pid 和 Rank 的文章，它应该给你

```
PID   Skill       Article
1     John_Sings  john_Article_1
1     John_Laughs Null
2     Joe_runs    Joe_article_1
2     Null        Joe_Article_2 
```

现在加入这个人以获得所需的结果。

这个 SO question 解释了如何在选择中分配排名/行号。 [MySQL - 在选择时获取行号](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:12:54.183

您想要的结果是典型的 LEFT JOIN。你应该做：

```
SELECT * FROM T1
LEFT JOIN T2 on (T1.id=T2.id)
LEFT JOIN T3 on (T1.id=T3.id); 
```

这与 2 个独立的 1:n 关系兼容，请注意，它连接了 T1-T2 和 T1-T3

# reflection - 使用 javassist 添加注释会删除以前的代码

> ID：11778386
> 
> 赞同：1
> 
> 时间：2012-08-02T13:25:00.150
> 
> 标签：reflection, code-generation, javassist, javaagents

我正在尝试在加载类时向它们添加一些注释。
为此，我编写了一个 java 代理转换器，它在加载时获取类字节码并可以更改它。当我运行以下代码时，新的注释出现在类上，但所有以前的注释和字段/方法都被删除了。

```
CtClass ctClass = classPool.makeClass(new java.io.ByteArrayInputStream(classFileBuffer));
ClassFile classFile = clazz.getClassFile();
ConstPool constPool = classFile.getConstPool();
AnnotationsAttribute attr= new AnnotationsAttribute(constPool, AnnotationsAttribute.visibleTag);
javassist.bytecode.annotation.Annotation annotation = new javassist.bytecode.annotation.Annotation(type, constPool);
attr.setAnnotation(annotation);
classFile.addAttribute(attr);
classFileBuffer = ctClass.toBytecode(); 
```

其中 classFileBuffer 是返回给类加载器的字节数组。如果有人知道为什么要删除以前的类注释和代码，那将非常有帮助。
谢谢，
阿夫纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:43:45.977

`setAnnotation`只接受一个类型为 的参数`Annotation`，并删除所有其他注释。如果要向现有注释添加注释，请`setAnnotations`改用。它需要一个数组，`Annotation`因此您必须首先通过收集所有现有注释（使用`getAnnotations`）来构建数组，然后`Annotation`在末尾添加，然后调用该方法。

一个`setAnnotation(annotation)`电话相当于`setAnnotations(new Annotation[] { annotation })`

# iis - IIS 无法找到 web.config

> ID：11778402
> 
> 赞同：5
> 
> 时间：2012-08-02T13:25:43.317
> 
> 标签：iis

我在 IIS 中部署了一个 Web 应用程序。以前可以正常工作。最近我已将该 Web 应用程序转移到另一台机器上，这就是问题所在。当我在 IIS 中打开默认文档时设置 Web 应用程序后，我会收到 File not found 错误，如下所示

内部服务器错误

\?\C:\inetpub\wwwroot\application\web.config

我不知道为什么 IIS 无法找到 web.config。该文件存在于路径 C:\inetpub\wwwroot\application\web.config 但 IIS 正在查找路径 \?\C:....

请让我知道如何解决这个问题？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T04:11:28.450

首先，这已记录在[support.microsoft.com](http://support.microsoft.com/kb/942055)上，因此我建议遇到此问题的任何人先阅读此内容，因为它涵盖了许多我不会的解决方案

现在从个人经验来看，我在设置新的开发机器后遇到了这个错误。我忘记做的是安装 Url Rewrite 2.0 IIS 模块。遗憾的是，IIS 错误完全不知道这是实际问题。

因此，要解决此问题，请调查我们 web.config 中的 system.webServer 设置，并确保您已安装所有使用的 iis 模块。我通过系统地从我的 web.config 中删除元素来做到这一点，直到遇到原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T07:31:48.260

我知道这是旧帖子，但我解决了以下相同的问题：

如果您使用 TFS 并且遇到此问题，则原因是“.vs”文件未从提交中排除。

因此，“.vs\config\applicationhost.config”获取了另一个用户/开发者的本地版本。

要解决此错误，首先打开该文件更新“”xml 标记内的物理路径。

还要求用户从 TFS 中排除此文件夹以防止将来出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T20:13:27.667

就我而言，我正在运行 ASP .NET Core 网站，因此我必须从 [https://dotnet.microsoft.com/download/dotnet-core/current/runtime安装 .Net Core Runtime](https://dotnet.microsoft.com/download/dotnet-core/current/runtime)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T20:12:56.597

如果您收到 mysql localhost 错误。我会做的对你有用。

控制面板（查看方式：大图标）>>程序和功能>>（通常是左上角）打开或关闭Windows功能>>互联网信息服务>>网络管理工具和万维网服务

重启后。

# vb.net - Winforms列表视图，用表单锚定列？

> ID：11778408
> 
> 赞同：0
> 
> 时间：2012-08-02T13:26:01.817
> 
> 标签：vb.net, winforms, listview

这听起来像是一个非常简单的问题，但知道列表视图很容易得到一个非常复杂的答案，但我基本上只是想要它，以便在我展开应用程序窗口时列表视图内的列宽会扩大，基本上与锚定 listView 本身的方式相同?

如果我不清楚，请发表评论，我会尝试更好地解释。

我目前唯一的猜测是将列设置为具有与列表视图大小相关的百分比宽度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:35:05.343

是的，您可以通过在调整表单大小时修改列来做到这一点。您需要在表单上锚定 ListView 以开始：

```
Private Sub Form1_Resize(sender As Object, e As System.EventArgs) Handles Me.Resize
    With ListView1
        .Columns(0).Width = CInt(.Width * 0.2) 'set column width to be 20% of controls width
        .Columns(1).Width = CInt(.Width * 0.5) 'set column width to be 50% of controls width
    End With
End Sub 
```

请注意，由于舍入，您最终不会得到总计超过 100% 的列宽，因为这可能会产生不良结果

# git - 是否有撤消 git-flow 功能启动的命令？

> ID：11778413
> 
> 赞同：67
> 
> 时间：2012-08-02T13:26:18.167
> 
> 标签：git, git-flow

我对 git-flow 没有经验。

有撤消命令`git-flow feature start`吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-02T13:30:49.497

由于 git-flow 只是包装了常规的 git 功能，那么简单地删除新分支怎么样（假设您没有要保存的更改）？

```
$ git checkout master
Switched to branch 'master'
$ git branch -d feature/your-feature-name-here 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-09-18T15:54:26.310

或者只使用 git-flow：

```
git flow feature delete your-feature-branch 
```

请注意，`feature/`使用此命令时省略前缀

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-11-05T14:43:36.280

```
git hf feature cancel -f 
```

使用`git hf help`和`git hf feature help`查看可能性。

# html - 通过EL显示多行文本

> ID：11778415
> 
> 赞同：1
> 
> 时间：2012-08-02T13:26:21.240
> 
> 标签：html, jsp, jstl, el

我在显示多行文本时遇到问题。例如，用户可以`textarea`在注册表单中键入他们的文本，并且文本可以超过一行，即他可以按 Enter（返回）键来插入换行符。

在一个页面上，如果我想显示他输入的文本并使用文本区域显示（使用`EL`），它会显示用户最初输入的方式。

`<p>`但是在另一个页面上，我需要以段落格式（使用标签）显示此文本。在此页面上，当我显示用户在注册时输入的值时，它没有换行符，即它显示为单行而不是用户输入的多行。

我已经尝试通过`EL`在标签内显示文本并在`<p>`标签内使用`<c:out>`JSTL 的`<p>`标签。

**我尝试过的一些代码：**
Trial-1：

```
<p>${product.description}</p> //Doesn't show line breaks 
```

试验二：

```
<p><c:out value="${product.description}" /></p> //Doesn't show line breaks too 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:05:10.810

您是否查看了发送到浏览器的源？请试试

```
<p><pre>${product.description}</pre></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:59:21.457

现在我可以想到用[JSTL（函数）标签](http://docs.oracle.com/javaee/5/tutorial/doc/bnalg.html)来替换字符串中的`\r\n`序列`product.description``<br />``scriptlets`[`fn`](http://docs.oracle.com/javaee/5/tutorial/doc/bnalg.html)

创意礼貌：[**所以回答**](https://stackoverflow.com/a/764831/468763)。

# iphone - 为什么 UISearchBar 没有正确显示？

> ID：11778416
> 
> 赞同：0
> 
> 时间：2012-08-02T13:26:22.477
> 
> 标签：iphone, objective-c, ios, cocoa-touch

为了了解 UISearchDisplayController 的工作原理，我在 viewDidLoad 方法中编写了以下代码：

```
UISearchBar * searchBar = [[[UISearchBar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 40.0f)] autorelease];
searchBar.delegate = self;
searchBar.showsCancelButton = YES;

_searchController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
_searchController.delegate = self;
_searchController.searchResultsDataSource = self;
_searchController.searchResultsDelegate = self;

[_searchController setActive:YES animated:YES];
[_searchController.searchBar becomeFirstResponder]; 
```

但是当我运行我的代码时，UISearchBar 没有显示，如您在图像中看到的那样。

![](../Images/db4bceee8d47c3eaefb34b7fbc0d3f81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:33:27.260

您创建的 UISearchBarcontroller 很好但没有添加到 uiviewcontroller 中。所以你在 uiviewcontroller 中添加 UISearchBarcontroller。

编码：

[self.view addsubview:_searchController];

# java - 如何最好地使 Web 服务使用者能够集成测试事务性 Web 服务？

> ID：11778417
> 
> 赞同：0
> 
> 时间：2012-08-02T13:26:30.473
> 
> 标签：java, web-services, unit-testing

我想允许 Web 服务层的消费者（Web 服务是用 Java 编写的）创建自动化集成测试，以验证消费者将使用的 Web 服务层版本是否仍然适用于消费者（即 Web 服务是在与消费者不同的发布生命周期中，他们的 API 或行为可能会改变——他们不应该在不通知消费者的情况下改变，但这个自动化测试的重点是验证他们没有改变）

如果 Web 服务实际执行事务（更新数据库表），我会怎么做。是否有一种常见的做法来处理这个问题，而不必将逻辑放入 Web 服务本身以在单元测试中知道它并在完成后回滚事务？（基本上是在处理 Web 服务测试的能力）。或者这是推荐的方法？

消费者由我们公司的一个开发团队创建，Web 服务由一个单独的团队创建。测试将在集成环境中运行（集成环境是 QA 功能测试人员使用的测试环境后面的一种环境，prod 环境后面的一种环境）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:55:44.727

处理这类事情的最佳方法是[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

将您的数据库处理代码放入一个或多个注入到 Web 服务中的服务中，并创建在您的测试环境中使用的模拟版本，并且不会实际更新数据库，或者您在测试控制下添加重置功能。

这样，您的测试可以运行真正的 Web 服务而不是真正的数据库，并且可以更轻松地使测试具有可重复性。

Java 中的依赖注入可以使用（除其他外）[Spring](http://www.springsource.org/)或[Guice](http://code.google.com/p/google-guice/)来完成。Guice 更轻量级。

在您的情况下，根据您注意到的系统属性在应用程序启动期间做出注入决策可能是明智的。

如果某些测试需要实际更新数据库以使其有效，那么您的数据库处理测试版本将需要使用真实数据库，但还应提供一种可从测试访问的方法，以将数据库重置为已知（可能为空）状态以便可以重复测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:33:34.323

我的选择是在生产和预生产中托管 Web 服务层。您的客户可以针对预生产进行测试，但不会为他们的交易付费。

显然，这需要您同时更新生产和预生产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:52:54.443

让 Web 服务保持不变并更新数据库中所需的任何内容。

您的集成测试应在每个测试步骤后检查是否写入/更新了正确的数据库记录。
我们使用一个soapUI 测试平台来完成这个。
您可以使用 Groovy 和 Java 编写测试后断言脚本，这些脚本可以轻松地使用 JDBC 连接到数据库并检查记录。

人们担心使用实际的数据库——我不会挂断这件事，这实际上是一件好事，并且可以提供一个非常准确的测试平台。
关于数据库的“状态”，您可以通过多种方式解决此问题：

*   在测试运行之前恢复已知状态的数据库
*   拿到测试后自己清理
*   随着更多测试的运行，让数据库填满并偶尔清理它

我们目前采用了最后一种方法，但如果出现问题，将来可能会改变。我实际上不介意用记录填充数据库，因为它使它更像一个真正的客户数据库。在调查测试失败时它也非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T18:04:32.497

例如 cxf 允许您更改传输层。因此您只需更改配置并使用 localTransport。那么你可以拥有对象：没有任何网络活动的客户端和服务器。它非常适合测试（un）marhasling。其他所有内容都应该分开，因此业务逻辑不知道 Web 服务，因此可以像任何其他类一样对其进行测试

# dojo - xpages dojo 日历脚本 SyntaxError: missing ; 声明之前

> ID：11778422
> 
> 赞同：0
> 
> 时间：2012-08-02T13:26:44.257
> 
> 标签：dojo, xpages

您好，我在我的 xpages 应用程序中收到以下 js 错误。它与日历小部件有关。奇怪的是，这段代码在服务器上运行得非常好，但是当我尝试通过防火墙访问同一服务器、同一应用程序时，我收到以下 js 错误。不幸的是，这是压缩的 js，我不知道自己在做什么才能解决这个问题。任何帮助将不胜感激。

```
failed loading /xsp/.ibmxspres/dojoroot-1.6.1/dojo/../dijit/Calendar.js with error: SyntaxError: missing ; before statement
https://newwads.health.state.ny.us/+CSCO+d6756767633A2F2F7565766665696534++/xsp/.ibmxspres/dojoroot-1.6.1/dojo/dojo.js
Line 14

failed loading /xsp/.ibmxspres/dojoroot-1.6.1/dojo/../dijit/Calendar.js with error: SyntaxError: missing ; before statement
toString(uri=

undefined

, _25=

undefined

, cb=

undefined

)dojo.js (line 14)
toString(_21=

"../dijit/Calendar.js"

, _22=

"dijit.Calendar"

, cb=

undefined

)dojo.js (line 14)
toString(_2d=

"dijit.Calendar"

, _2e=

undefined

)dojo.js (line 14)
eval()56 (line 8)
toString(_1d=

"/*\r\n Copyright (c) 2004...jit/form/DateTextBox.js"

)dojo.js (line 14)
toString(uri=

"/xsp/.ibmxspres/dojoroo...jit/form/DateTextBox.js"

, cb=

undefined

)dojo.js (line 14)
toString(uri=

"/xsp/.ibmxspres/dojoroo...jit/form/DateTextBox.js"

, _25=

"dijit.form.DateTextBox"

, cb=

undefined

)dojo.js (line 14)
toString(_21=

"../dijit/form/DateTextBox.js"

, _22=

"dijit.form.DateTextBox"

, cb=

undefined

)dojo.js (line 14)
toString(_2d=

"dijit.form.DateTextBox"

, _2e=

undefined

)dojo.js (line 14)
()testTime.xsp (line 21)

...dium"){return 4;}if(_171.slice&&_171.slice(-2)=="px"){return parseFloat(_171);}w... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:58:22.597

您的代理是否弄乱了数据？喜欢单点登录还是添加代码？你可以使用 Fiddler 看看发生了什么。AFAIK FF WebDeveloper 也允许查看加载的 JS 未压缩

# c++ - delete 不会将 0 分配给指针

> ID：11778423
> 
> 赞同：0
> 
> 时间：2012-08-02T13:26:45.593
> 
> 标签：c++, c

在 C 或 C++ 中，当我们删除某个指针时，它只会释放内存，但不会将指针设置为 0。由于我们无法检查指针的有效性，因此程序员更容易检查指针的空性如果在释放内存后指针设置为 0。

我只是想知道为什么执行“删除”只是为了释放内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:32:54.837

> “由于我们无法检查指针的有效性，如果在释放内存后将指针设置为 0，程序员会更容易检查指针的空性。”

检查 nullvalue 可能会隐藏错误，同时增加代码大小和复杂性，并给人一种错误的安全感。不能保证指针值（在为空之前）没有被复制到其他地方。此外，这可以防止按值删除，这是对库（例如 OpenCV）的一个主要烦恼，这些库被误导，提供了清空删除操作。

不要使用这种适得其反的做法，而是使用确保正确清理和防止无效指针的技术，例如使用适当的智能指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:32:47.203

因为，在 C++ 中，它（几乎）都是关于性能的。你不希望编译器添加代码，你不需要。你不希望你的程序做一些事情，你没有在你的代码中添加它们。

如果您确定，将检查/重用此指针，则无需取消。少一条指令。

另外，如果删除一个指针，将其设置为`NULL`，那么指向已删除内存的其他指针会发生什么？它们不会被取消。这可能会导致坏事。

只需分配`NULL`，如果你需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:33:01.317

没有必要：因为你只`delete`在你的 SBRM 包装类的析构函数中，所以没有其他东西可以在之后访问指针：

```
template <typename T> struct MyPtr
{
     template <typename ...Args> MyPtr(Args &&... args)
     : p(new T(std::forward<Args>(args)...)
     {   }

     ~MyPtr()
     {
         delete p;   // done! who cares what `p` is now.
     }

     MyPtr(MyPtr const &) = delete;
     MyPtr & operator=(MyPtr const &) = delete;

     T * operator->() { return p; }

private:
     T * p;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:37:05.657

For one thing, you might want to do pointer arithmetic after delete for efficiency reasons:

```
const int SIZE = 5;
MyObject* foo[SIZE];
// ... initialize foo with new MyObjects...
for (MyObject* i = &foo[0], end = &foo[0] + SIZE; i < end; ++i)
{
    delete i;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:35:40.523

即使`delete`将 NULL 分配给指针，它也不会使任何事情更安全。由于多个指针可以指向同一个内存地址，并且将 NULL 分配给其中之一不会使其他指针也为 NULL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T13:36:32.677

您可以删除 const 指针变量。将其设置为 NULL 是不可能的，仅在删除后将可变指针变量设置为 NULL 似乎有些不一致。

# html - 从数据库读取的 html 代码显示颜色

> ID：11778424
> 
> 赞同：1
> 
> 时间：2012-08-02T13:26:48.727
> 
> 标签：html, asp-classic, db2, background-color

我编写了一个简单的`asp`命令，它从数据库中检索 HTML 颜色代码，并且这些代码显示在表格中，如下所示 -

```
<table border="1" width="75%" cellspacing="0" cellpadding="0" align="right">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
end if
%>
</table> 
```

有没有办法在保存这些单独的 HTML 颜色值的列中，将其特定单元格的背景设置为各自的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:33:13.340

尝试将您的值写为背景颜色

```
<table border="1" width="75%" cellspacing="0" cellpadding="0" align="right">
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do until rs.EOF%>
<tr>
<%for each x in rs.Fields%>
   <td style="background-color: #<%Response.Write(x.value)%>;"><%Response.Write(x.value)%></td>
<%next
rs.MoveNext%>
</tr>
<%loop
rs.close
conn.close
end if
%>
</table> 
```

# android-layout - Android居中列表视图项目

> ID：11778425
> 
> 赞同：1
> 
> 时间：2012-08-02T13:26:55.820
> 
> 标签：android-layout

我的问题是我需要在列表视图中垂直居中项目。我有 3 个项目。我试过用

```
layout_center_vertical="true" 
```

但它不起作用。我需要做什么？

# python - 无法加载自定义配置文件 python - selenium

> ID：11778429
> 
> 赞同：0
> 
> 时间：2012-08-02T13:27:07.650
> 
> 标签：python, selenium, selenium-rc

```
fp = webdriver.FirefoxProfile()
fp.set_preference("browser.download.folderList", 2);
fp.set_preference("browser.download.manager.showWhenStarting", False);
fp.set_preference("browser.download.dir", self.download_dir);
fp.set_preference("browser.helperApps.neverAsk.saveToDisk", "text/csv");
self.browser = webdriver.Remote("http://192.168.1.242:4444/wd/hub", 
                                     desired_capabilities=webdriver.DesiredCapabilities.FIREFOX,
                                    browser_profile=fp
                                    ) 
```

上面的代码不尊重指定的配置文件。

**但是**下面的代码按预期**工作：**

```
fp = webdriver.FirefoxProfile()
    fp.set_preference("browser.download.folderList", 2);
    fp.set_preference("browser.download.manager.showWhenStarting", False);
    fp.set_preference("browser.download.dir", self.download_dir);
    fp.set_preference("browser.helperApps.neverAsk.saveToDisk", "text/csv");
    self.browser = webdriver.Firefox(fp) 
```

在 seleniums 文档页面[http://seleniumhq.org/docs/04_webdriver_advanced.html#remotewebdriver](http://seleniumhq.org/docs/04_webdriver_advanced.html#remotewebdriver) 有以下示例：

```
from selenium import webdriver
fp = webdriver.FirefoxProfile()
# set something on the profile...
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.FIREFOX,    browser_profile=fp) 
```

这与我的示例中的代码相同。此外，当我使用 -firefoxProfileTemplate 启动 selenium 服务器时，它似乎忽略了配置文件的设置

```
java -jar ./selenium-server-standalone-2.25.0.jar -firefoxProfileTemplate  /home/xubuntu/.mozilla/firefox/fdui6lsj.crawler/ 
```

**编辑：**

我还想提一下，如果我从文件中加载配置文件：

```
fp = webdriver.FirefoxProfile('/home/xubuntu/.mozilla/firefox/fdui6lsj.crawler/')

self.browser = webdriver.Remote("http://192.168.1.242:4444/wd/hub", 
                                 desired_capabilities=webdriver.DesiredCapabilities.FIREFOX,
                                browser_profile=fp
                                ) 
```

配置文件已加载，但需要很长时间。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:45:28.973

尝试`update_preferences()`在最后调用。这应该强制写入配置文件：

```
fp.set_preference("browser.helperApps.neverAsk.saveToDisk", "text/csv");
fp.update_preferences() 
```

# grails - 实现独立 Grails 批处理的正确方法？

> ID：11778434
> 
> 赞同：3
> 
> 时间：2012-08-02T13:27:30.850
> 
> 标签：grails, grails-orm, batch-processing

我想实现以下内容：

1.  Grails 中的 Web 应用程序将转到 MongoDB 数据库
2.  长期运行的批处理在后台填充和更新该数据库

我希望他们两个都重用相同的 Grails 服务和相同的 GORM 域类（使用 Grails 的 mongodb 插件）。

对于 Web 应用程序，一切都应该可以正常工作，包括动态 GORM finder 方法。

但我无法弄清楚如何实现批处理。

一种。如果我将它们实现为 Grails 服务方法，它们的长期运行性质将是一个问题。即使将它们包装在一些异步执行器中也会不必要地使一切复杂化，因为我希望它们每个都是一个单独的 Java 进程，以便可以轻松地单独监视和停止它们。

湾。如果我将它们实现为 src/groovy 脚本并尝试从命令行启动，我无法正确注入 Grails 服务（ApplicationHolder 方法抛出 NPE）或让 GORM finder 方法工作。独立的 GORM 指南都考虑到了 Hibernate，总体而言，这似乎不是正确的途径。

C。我考虑过'batch-launcher' Grails 插件，但它未能安装并且似乎有点被遗弃了。

d。我考虑使用'run-script' Grails 命令从 src/groovy 运行脚本，它似乎实际上可能在开发中工作，但在生产中似乎不是正确的做法。

我不可能是唯一一个遇到这种问题的人 - 那么它通常是如何解决的呢？

人们如何运行与他们的 Grails 应用程序共享代码库和数据库的独立脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:59:38.827

由于您希望作业处理与前端应用程序位于单独的 JVM 中，因此最简单的方法是运行两个 Grails 实例，一个用于服务 Web 请求的前端，另一个用于处理与作业处理。

值得庆幸的是，Grails 丰富的插件生态系统使这种事情变得相当容易，尽管可能不是最有效的，因为运行整个 Grails 应用程序只是为了处理有点过分。

我倾向于采用的方式是将我的应用程序编写为一个应用程序，并提供负责工作处理的服务。这些服务与 RabbitMQ 插件相关联，因此一般流程是 Web 请求（或石英计划作业）将作业放入工作队列，然后工作服务负责处理它们。

这样做的好处是，因为它是一个应用程序，所以我可以完全访问所有域对象等，并且我可以利用消息队列的断开连接特性来分别扩展我的前端和后端，而无需一个以上的应用程序。相反，我可以多次安装同一个应用程序并配置专用于处理作业的线程数和/或作业处理器正在查看的队列。

因此，通过这种设置，对于开发，我通常会将作业处理线程的数量设置为对我正在做的开发工作有意义的任何东西，然后只是一个简单`grails run-app`的，我有一个功能齐全的系统（假设我有一个运行的 RabbitMQ 服务器也可以使用）。

然后，当我部署到生产环境时，我部署了 2 个应用程序实例，一个用于前端工作，另一个用于后端工作。我只是将前端实例配置为具有 1 个或 0 个线程来处理作业，而后端实例则提供更多线程。这使我可以根据需要更新任一部分，或者如果我需要扩展一个部分或另一个部分，则可以启动更多实例。

我确信还有其他方法可以做到这一点，但我发现这既*很*容易开发（因为它只是一个应用程序），而且也很容易部署、扩展和维护。

# asp.net-mvc-3 - 正确使用 SSL

> ID：11778438
> 
> 赞同：0
> 
> 时间：2012-08-02T13:27:36.877
> 
> 标签：asp.net-mvc-3, ssl, ssl-certificate

我已经读过，您不仅应该在用户登录时使用 SSL，而且在用户登录的整个过程中都应该使用 SSL。它写道：“许多网站通过 SSL 登录并在您登录后重定向回 HTTP ，这绝对是错误的做法。” 我认为他们正在谈论会话劫持。

参考。 [http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

它是否正确？如果是这样，为什么堆栈交换现在不让我使用 SSL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:54:57.280

每次通过网络发送敏感信息（如密码、信用卡信息、银行帐户等）时，都应使用 SSL。

> 用户登录时是否真的需要始终使用 SSL？

然而，并非总是如此，如今通过未加密的无线网络窃取某人的会话 cookie 非常容易。如果有人偷了我的 cookie 并在 Stack Overflow 上发布废话，那可能不会影响我的生活。Facebook 和 Twitter（间谍政府）可能是另一回事。

# jquery - 删除所有元素\html，但输入

> ID：11778441
> 
> 赞同：0
> 
> 时间：2012-08-02T13:27:42.987
> 
> 标签：jquery

我有一个表单，其中有几个输入字段分布在整个标记中。

我想要做的是删除除输入之外的所有内容。

所以这：

```
<form>
<table><tr><td>more info here<input type="submit" name="registerForEvent" id="registerForEvent" value="Register Online" class="Button" /></td></tr>
<tr><td>table goes here blah blah....
<table><tr><td></td><td>  test text here:<input type="hidden" name="test"></td></tr></table>
</td></tr>
</table>
</form> 
```

变成这个

```
<form>
<input type="submit" name="registerForEvent" id="registerForEvent" value="Register Online" class="Button" />
<input type="hidden" name="test">
</form> 
```

我试过

```
$('form:not(input)').remove(); 
```

无济于事

[http://jsfiddle.net/X5fFC/](http://jsfiddle.net/X5fFC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:35:45.373

输入是表单的孩子的孩子，因此删除第一个孩子将删除输入，因为它们本身就是这些孩子的孩子等？

尝试将所有输入移动到表单根级别，然后删除除输入之外的所有内容：

```
$('input', 'form').appendTo('form');
$('*','form').not('input').remove(); ​ 
```

[小提琴](http://jsfiddle.net/X5fFC/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:36:26.683

您可以将所有输入存储在一个变量中，然后删除表单中的所有内容。之后，您可以放回输入：

```
var inputs = $("form input");
$("form").empty().append(inputs); 
```

[http://jsfiddle.net/X5fFC/6/](http://jsfiddle.net/X5fFC/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T13:36:53.773

`$('form').html($('form input'));`

[演示](http://jsfiddle.net/ricardolohmann/X5fFC/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:36:52.370

```
 $('form:not(input)').remove(); 
```

将删除子`input`元素。你可以试试：

```
 var input = $('form input');
 $('form').empty().append(input);​ 
```

# ruby-on-rails - 如何仅在一页上使用 SSL？

> ID：11778447
> 
> 赞同：0
> 
> 时间：2012-08-02T13:27:51.893
> 
> 标签：ruby-on-rails, ssl, https, ssl-certificate

我只想制作一页请求 ssl 证书。我尝试使用 ssl_requirement gem 或 bartt-ssl_requirement，所以我尝试了：

在我的 pages_controller 中：

```
 ssl_required :admin 
```

在我的应用程序控制器中：

```
 include ::SslRequirement 
```

我所有的页面都需要 ssl，都使用 https。

我尝试仅为管理页面生成证书 - 在通用名称字段站点/管理员中输入，但这样做我的应用程序现在无法正常工作。

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:44:41.550

您是否尝试过使用 Tobias Matthies 的 SSL Enforcer gem？这是一个非常灵活和强大的 gem，它允许您选择哪些路径需要 HTTPS，哪些不需要...

基本上你需要做的就是：

```
config.middleware.use Rack::SslEnforcer, :only => '/login' 
```

Github页面了解更多信息： [https ://github.com/tobmatth/rack-ssl-enforcer](https://github.com/tobmatth/rack-ssl-enforcer)

干杯

# button - How to get row details by clicked button placed in column?

> ID：11778449
> 
> 赞同：0
> 
> 时间：2012-08-02T13:27:57.400
> 
> 标签：button, extjs, grid

I have started to use ExtJs 4\. I have grid with buttons in one column. I can't manage to get button click for button in selected cell by controller. I would like to get click and then details for row in order to open extra window with details.

Code:

```
Ext.define('AP.controller.List', {
    extend : 'Ext.app.Controller',
    stores : ['Users'],
    models : ['User'],
    views : [ 'List', 'Details' ],

    init : function() {
        console.log("users");
        this.control({
            'viewport > listPanel > userlist' : { 
                itemdblclick : this.userDbCClicked
            },
            'viewport > listPanel button AND WHAT MORE ?' : {
                click : this.statusButtonClicked
            }       
        });
    },

    userDbCClicked : function(grid, record) {
        console.log("user db clicked");

    },

    statusButtonClicked : function(grid, record) {
          // Here I would like to get row details after click on button in column
        console.log("statusButtonClicked clicked ");
    }

}); 
```

What should be put instead this code:

```
 'viewport > listPanel button AND WHAT MORE?' : {
            click : this.statusButtonClicked
        } 
```

Of course it dosen't work. How to get row by click on button in cell ?

Thanks in advance for help.

ExtJs is very powerfull framework but first steps are realy difficulted sometimes.

Bogus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:00:33.330

克里斯说的是真的。您也可以在按钮上设置名称属性，这只是查询组件的一种方式。在这里解释：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)

{ xtype：'按钮'，名称：'状态按钮'}

'视口> listPanel > 按钮[名称=状态按钮]'

这是 Ext.Apps 的一个很好的入门指南：

[http://docs.sencha.com/ext-js/4-1/#!/guide/mvc_pt1](http://docs.sencha.com/ext-js/4-1/#!/guide/mvc_pt1) 和另一个： [http ://docs.sencha.com/ext-js/4-1/#!/guide /application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:49:10.457

在您的按钮配置中放置一个操作：'statusbutton'

然后使用'viewport > listPanel > button[action=statusbutton]'

# django-cms - Django cms 不附加主页 url

> ID：11778450
> 
> 赞同：0
> 
> 时间：2012-08-02T13:28:00.913
> 
> 标签：django-cms

我正在使用 DjangoCMS 2.3 并从索引页面开始以树结构构建所有页面。现在所有的网址都是这样`/en/index/<page_url>`的。我怎样才能让 cms 省略`/index/`部分而变得公正`/en/<page_url>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:33:21.430

您不必将其他页面放在主页下方。所以而不是：

```
|-index (home page)
 |- page 1
  |- page 1.1
 |- page 2 
```

你可以这样做：

```
|- index (home page)
|- page 1
 |- page 1.1
|- page 2 
```

树中的第一页被隐式声明为主页，并在页面树中用图标标记：

![在此处输入图像描述](../Images/5d2c9e799f277d62ed514a7af1f6efbb.png)

# flash - Can videojs play videos Swiffy videos?

> ID：11778454
> 
> 赞同：0
> 
> 时间：2012-08-02T13:28:08.087
> 
> 标签：flash, html5-video, video.js, google-swiffy

Can [videojs](http://videojs.com/) play videos coverted by [Google Swiffy](https://www.google.com/doubleclick/studio/swiffy/)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:45:39.833

作为 Video.js 的创建者，我非常怀疑。Video.js 获取源文件 URL 并将其传递给播放技术（HTML5/Flash/YouTube 播放器），并要求播放技术具有用于控制视频的 API。因此，除非您可以获取 Swiffy 的结果并将其用作视频标签的来源，否则答案是否定的。

# jquery - Need help in dynamically created select option tag using jquery[For Jquery mobile]

> ID：11778455
> 
> 赞同：0
> 
> 时间：2012-08-02T13:28:08.187
> 
> 标签：jquery, select, dynamic, option

I'm creating a select Options dynamically under a using jquery. I have set the first item as selected using selected attribute. But i couldn't able to see the first item in select list. if i select second or third item the text is displaying in select tag.![enter image description here](../Images/1689b9c7105fea33e1f554f951fb6e38.png)![enter image description here](../Images/10e3cea1c747186b2048f528b7bf00b9.png)![enter image description here](../Images/0db0c4e285a8a2c4294608c58e8328ab.png)

EDIT : and one more thing i need to say,here am using jquery mobile framework.

Can any one help me.

here is my HTML script :

```
<select id="HRselectList"></select> 
```

JS :

```
for(var x = 0; x <= 5; x++)
{
  $('#HRselectList').append($("<option></option>").attr("value",x).text(x));
  if(x==0)
  {
    $('#HRselectList option').attr("selected","selected");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:41:45.583

我测试了您的代码，但没有发现问题。但是，我确实认为我知道问题出在哪里。试试这个...

```
var HRselectList = $('#HRselectList'),
    x = 0;

for (; x < 6; x++) {
    HRselectList.append($("<option></option>").attr("value", x).text(x));
}

HRselectList.find('option').eq(0).attr("selected", "selected");​ 
```

...让我知道它是否有效。

**这是一个小提琴：http: [//jsfiddle.net/joplomacedo/ggmHe/](http://jsfiddle.net/joplomacedo/ggmHe/)。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T13:46:30.777

检查这个[http://jsfiddle.net/GTyZ3/1/](http://jsfiddle.net/GTyZ3/1/)

如果您正在使用 jquery mobile，我认为更简单的方法可能会一直走下去。这是一个有点不成熟的方法，但我希望它会奏效。

# php - 在 Elgg 中自动确认用户

> ID：11778459
> 
> 赞同：1
> 
> 时间：2012-08-02T13:28:22.430
> 
> 标签：php, elgg

我一直在与[Elgg](http://elgg.org)合作。一个用 php 创建的开源社交网络软件。我一直在使用 API，到目前为止，我已经能够使用 register_user 函数注册用户：

```
register_user($username, $password, $email); 
```

然而问题是我不需要用户在通过 API 注册时通过电子邮件确认。我需要知道我可以使用哪个功能来“自动确认”用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:37:00.410

如果您使用的是 Elgg 1.8（可能也适用于 1.7），并且启用了 uservalidationbyemail 插件，我认为最简单的做法是禁用该插件。如果您仍然想拥有插件的某些功能，而不是那一部分，您可以使用 elgg_unregister_plugin_hook_handler 来防止 uservalidationbyemail_disable_new_user() 被调用，例如： elgg_unregister_plugin_hook_handler('register', 'user', uservalidationbyemail_disable_new_user');

或者，如果您希望它适用于某些用户，但不适用于注册特定方式的用户，那么您可以添加自己的具有较低优先级的插件挂钩处理程序，并缩短默认处理：elgg_register_plugin_hook_handler('register', '用户', my_registration_function', 1);

# asp.net - Custom login URL on asp.net loginstatus usercontrol

> ID：11778461
> 
> 赞同：2
> 
> 时间：2012-08-02T13:28:29.880
> 
> 标签：asp.net, asp.net-membership

I have a website with two different sets of membership controls for different parts of the site. The first one works fine. There is a loginstatus control which handles the status of whether a user is logged in or not. If not, it says 'Login' and links to 'Login.aspx' - as dictated in my web.config file:

```
<authentication mode="Forms">
  <forms name="yourAuthCookie" loginUrl="login.aspx" protection="All" path="/" />
</authentication> 
```

However, in a completely different part of the website there is a different loginstatus control, but the login URL for this control should be 'clientlogin.aspx'. I just can't seem to get the loginstatus to link to 'clientlogin.asp' when the user is logged out.

Can anyone suggest how to do this?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:00:37.507

您是否尝试过控件中的`LogoutPageUrl`属性`LoginStatus`？

# php - How do i style this gallery?

> ID：11778463
> 
> 赞同：-1
> 
> 时间：2012-08-02T13:22:21.247
> 
> 标签：php, css, photo-gallery

Hi i have this code implemented into my wordpress theme?

The code is made to automatically pull all images that are attached to the post, It does just that but it aligns all images underneath one another where do i begin to style this so that the images will appear side by side?

here is the code.

```
<?php

if ( 'gallery' == get_post_type() ) { //condition to show gallery on post type - gallery

if ( $attachments = get_children( array(
    'post_type' => 'attachment',
    'post_mime_type'=>'image',   //return all image attachment only
    'numberposts' => -1,   //get all the attachments
    'post_parent' => $post->ID
)));

foreach ($attachments as $attachment) {
    // you can customize the oputput
    echo wp_get_attachment_link( $attachment->ID, 'full' , false, false, '' );
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:16:21.547

使用 google chrome 的检查器或 Firefox 的 Firebug 扩展来查看你的图像上放置了什么样的类。然后在您的主题中编辑 style.css 以进行必要的更改。根据您使用的插件，您可能可以更改类甚至与插件代码的对齐方式，但也没有理由不在 css 中执行此操作。

# ruby-on-rails-3 - 使用 Carrierwave 的条件版本/流程

> ID：11778464
> 
> 赞同：5
> 
> 时间：2012-08-02T13:28:39.373
> 
> 标签：ruby-on-rails-3, carrierwave

我有这个上传器类

```
class ImageUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick

  process :resize_to_limit => [300, 300]

  version :thumb do
    process :resize_to_limit => [50, 50]
  end

 ... 
```

它将原始文件处理为 300x300 并保存拇指版本。

我希望能够仅基于模型上的布尔值制作小/拇指版本吗？

所以我做了这个

```
if :icon_only?
 process :resize_to_limit => [50, 50]
else
  process :resize_to_limit => [300, 300]
end

protected

 def icon_only? picture
   model.icon_only?
 end 
```

但它总是以 50x50 处理结束。即使我这样做了

```
 def icon_only? picture
   false
 end 
```

我可能把我的语法弄错了：但我也试过问

```
if icon_only? 
```

这告诉我没有这样的方法名称。我迷路了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:46:17.277

使用`:if`条件，如下所示：

```
process :resize_to_limit => [50, 50], :if => :icon_only?
process :resize_to_limit => [300, 300], :if => ... 
```

我实际上没有尝试过，但它记录[在代码](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/uploader/processing.rb#L20)中，所以它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T02:23:20.000

正如@shioyama 指出的那样，可以使用 :if 来指定条件。

然而，做相反的条件（例如`!icon_only?`）需要一些工作。

```
process :resize_to_limit => [300, 300], :if => Proc.new {|version, options| !version.send(:icon_only?, options[:file])} do 
```

# c++ - How can I do llvm link time optimization

> ID：11778471
> 
> 赞同：5
> 
> 时间：2012-08-02T13:28:57.370
> 
> 标签：c++, llvm, clang

I compile a C++ program, using for example the following.

```
clang++ -O4 -emit-llvm file1.cpp -c -o file1.bc 
clang++ -O4 -emit-llvm file2.cpp -c -o file2.bc 

llvm-link file1.bc file2.bc 
```

How can I perform link time optimization here?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T01:08:55.733

使用`opt`：

```
clang++ -O4 -emit-llvm file1.cpp -c -o file1.bc 
clang++ -O4 -emit-llvm file2.cpp -c -o file2.bc 
llvm-link file1.bc file2.bc -o all.bc
opt -std-compile-opts -std-link-opts -O3 all.bc -o optimized.bc 
```

# php - htaccess URL rewriting max parameter length

> ID：11778474
> 
> 赞同：3
> 
> 时间：2012-08-02T13:29:09.633
> 
> 标签：php, .htaccess, url-rewriting

I'm building a mini framework that supports:

```
mysite.com/template/
mysite.com/template/action/
mysite.com/template/action/model/ 
```

Using as a bootstrap:

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule .* /index.php 
```

But for any request:

```
mysite.com/template/action/model/**extra/stuff/should/vanish/** 
```

So that the maximum URL size will always drop anything extra:

```
mysite.com/template/action/model/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:34:48.040

你的意思是这样的吗？

```
# if more than 3 nodes deep          v--- the extra stuff should vanish
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/.+ /$1/$2/$3/? [R=301,L] 
```

这会重定向浏览器，以便仅在超过 3 个时保留 3 个节点。这可能会超出您的路由规则。

* * *

编辑：

> 因为在第四块这个案例不成立：site.com/a/b/c/?d

您需要一个特定的规则来匹配这里的查询字符串，这超出了您在 a 的表达式中可以做的事情`RewriteRule`。您可以将这些规则放在上述规则之前或之后：

```
# Check if there's a query string
RewriteCond %{QUERY_STRING} !^$
# if there are exactly 3 nodes, then remove the query string
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /$1/$2/$3/? [R=301,L] 
```

查询字符串（后面的所有内容**`?`**）不是重写引擎中使用的 URI 的一部分，它需要一个特殊条件。

# javascript - Chrome 中的 $ 变量（美元符号）？

> ID：11778477
> 
> 赞同：62
> 
> 时间：2012-08-02T13:29:15.503
> 
> 标签：javascript, google-chrome, google-chrome-devtools, dollar-sign

我在没有 jQuery（或使用该`$`符号作为快捷方式的任何其他库）的页面上使用 google chrome 的开发人员工具。当我`$`通过控制台检查时（只需输入并按回车键），我得到了这个：

```
$
function () { [native code] } 
```

所以，chrome 有一些原生函数可以被`$`. 只有 chrome 似乎有这个，我无法通过`window['$']`或通过`document['$']`或访问它`this['$']`。

我无法找出这个功能是什么。你知道它是做什么的，也许有一些关于这方面的背景信息吗？提前致谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2017-11-14T16:42:45.917

即使从去年开始，这种情况也再次发生了变化。

devtools 控制台提供`$`了 的别名`document.querySelector`，以及[许多其他内容](https://developer.chrome.com/docs/devtools/console/utilities/)；这是一个摘录的列表：

> *   `$(selector)`返回对具有指定 CSS 选择器的第一个 DOM 元素的引用。此函数是该函数的别名`document.querySelector()`。
> *   `$$(selector)`返回与给定 CSS 选择器匹配的元素数组。该命令相当于调用`document.querySelectorAll()`.
> *   `$_`返回最近计算的表达式的值。
> *   、`$0`、`$1`和命令用作对在“元素”面板中检查的最后五个 DOM 元素或在“配置文件”面板中选择的最后五个 JavaScript 堆对象的历史引用`$2`。`$3``$4`

……还有一堆其他人。

请注意它如何调用`$`的别名`document.querySelector`，但说`$$`与调用“等效” `document.querySelectorAll`。两者似乎都不是真的。`$ === document.querySelector`是`false`，并`$$`返回一个*数组*，而不是一个`NodeList`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-02T13:35:21.233

它是 Chrome 开发人员工具功能之一（因此无法从页面获得）。您可以[在控制台页面上查看它的文档](https://developers.google.com/web/tools/chrome-devtools/console/command-line-reference#queryselector)。

它通过选择器获取元素。

[Firefox 实现了类似的东西](https://developer.mozilla.org/en-US/docs/Tools/Web_Console/The_command_line_interpreter#Helper_commands)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-05-15T05:57:01.207

现有答案已过时，`$`不是`document.getElementById`or的别名`document.querySelector`，而是`querySelector`. 这个包装器实际上为要查询其子元素的元素提供了一个可选的第二个参数。

这一系列功能记录在[控制台下：选择元素](https://developer.chrome.com/devtools/docs/console#selecting-elements)：

> **选择元素**
> 
> 有一些选择元素的快捷方式。与键入标准对应项相比，这些为您节省了宝贵的时间。
> 
> [`$()`](https://developer.chrome.com/devtools/docs/commandline-api#selector)返回与指定 CSS 选择器匹配的第一个元素。它是[`document.querySelector()`](http://docs.webplatform.org/wiki/css/selectors_api/querySelector).
> 
> [`$$()`](https://developer.chrome.com/devtools/docs/commandline-api#selector-1)返回与指定 CSS 选择器匹配的所有元素的数组。这是一个别名[`document.querySelectorAll()`](http://docs.webplatform.org/wiki/css/selectors_api/querySelectorAll)
> 
> [`$x()`](https://developer.chrome.com/devtools/docs/commandline-api#xpath)[返回与指定XPath](http://en.wikipedia.org/wiki/XPath)匹配的元素数组。

* * *

但是，这些值只是控制台中的默认值。如果页面通过包含 jQuery 之类的东西覆盖了变量，控制台将使用页面本身的值，并且类似的东西`$('p')`将返回一个 jQuery 对象，而不仅仅是第一个`p`元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-19T22:03:04.360

从[开发工具的链接](https://developer.chrome.com/devtools/docs/commandline-api#selector)来看，它现在使用 document.querySelector() 而不仅仅是 getElementById()。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-02T13:35:03.750

Webkit 检查器中有两个选择器，与 Mootools 一个相同：`$`和`$$`

[你可以在这里](https://developers.google.com/chrome-developer-tools/docs/console)找到一些关于它的信息

他们只是在这里帮助您进行调试。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-02T13:36:24.443

[https://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

这只是对 document.getElementById 的快速访问。

# c# - 如何检查装箱的数值是否为负？

> ID：11778483
> 
> 赞同：1
> 
> 时间：2012-08-02T13:30:00.227
> 
> 标签：c#

嗯，这似乎是一个简单的问题，但我想知道最快的方法。

我有一个对象，它是一个盒装数字，我不知道它是`double`,`int`还是某种数字类型。我想检查装箱值是否为负。

我使用这种转换，但我不确定它是否尽可能快：

```
private bool CheckNegative(object number)
{
   return System.Convert.ToDouble(number) < 0;
} 
```

阿尔森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:55:12.097

在此处使用 C# 版本 4*动态*关键字来利用其动态运算符绑定：

```
private static bool CheckNegative(dynamic number)
{
   return number < 0;
} 
```

也适用于盒装值类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:47:58.693

这似乎是唯一的方法。

但是，如果您想避免编写使用 double、int、float 等检查负数的多个函数，我会将您重定向到以下帖子：[https ://stackoverflow.com/a/828820/150830](https://stackoverflow.com/a/828820/150830)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:51:39.757

我想这*可能*会更快，因为它切入正题并且不需要将整数类型转换为 IEEE 浮点数：

```
bool CheckNegative(object number)
{
    switch(Type.GetTypeCode(number.GetType())) {
        case TypeCode.Int32:
            return (int)number < 0;
        case TypeCode.Single:
            return (float)number < 0;
        // etc etc
        default:
            throw new ArgumentException();
    }
} 
```

不过不会很漂亮。

**更新：** [事实证明](http://ideone.com/IrOqL)这种方法稍微*慢*一些，除了在处理`decimal`. 所以最好的实际决定似乎是 keep `Convert.ToDouble`。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-02T13:39:25.460

```
object bla = 2343;

if ( bla is Number )
{
     bool t = (Number)bla > 0;
} 
```

# cakephp - Cakephp 查找所有数据库错误

> ID：11778484
> 
> 赞同：0
> 
> 时间：2012-08-02T13:30:04.973
> 
> 标签：cakephp

我试图让我的 index() 函数仅显示属于该个人登录用户的 ExpenseClaims。

这是功能：

```
public function index() {
    $this->ExpenseClaim->recursive = 0;
    $currentUsersClaims = $this->ExpenseClaim->find('all', array('conditions' => array('ExpenseClaim.user_id ==' => $this->Auth->user('id'))));
    $this->set('currentUsersClaims', $this->paginate());
} 
```

这是我得到的错误：

数据库错误

错误：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '== 3' 附近使用正确的语法

```
SQL Query: SELECT `ExpenseClaim`.`id`, `ExpenseClaim`.`user_id`, `ExpenseClaim`.`claim_status_id`, `ExpenseClaim`.`created`, `ExpenseClaim`.`modified`, `ExpenseClaim`.`approved`, `ExpenseClaim`.`approved_by`, `ExpenseClaim`.`date_submitted`, `User`.`id`, `User`.`username`, `User`.`password`, `User`.`group_id`, `User`.`name`, `User`.`address`, `User`.`department_id`, `User`.`mileage_rate`, `User`.`created`, `User`.`modified`, `ClaimStatus`.`id`, `ClaimStatus`.`name`, `ClaimStatus`.`created`, `ClaimStatus`.`modified` FROM `expenses`.`expense_claims` AS `ExpenseClaim` LEFT JOIN `expenses`.`users` AS `User` ON (`ExpenseClaim`.`user_id` = `User`.`id`) LEFT JOIN `expenses`.`claim_statuses` AS `ClaimStatus` ON (`ExpenseClaim`.`claim_status_id` = `ClaimStatus`.`id`) WHERE `ExpenseClaim`.`user_id` == 3 
```

请原谅我，因为我可能遗漏了一些明显的东西，但我对蛋糕很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:36:32.160

首先，错误是因为您使用的是双等号`==`，这在 MySQL 中无效（单等号就可以）。我还注意到您正在尝试对这些结果进行分页，实际上您可以将您想要的条件传递给分页查询：

```
$this->set(
    'currentUsersClaims',
    $this->paginate('ExpenseClaim', array(
        'ExpenseClaim.user_id' => $this->Auth->user('id')
    ))
); 
```

请务必阅读书中的[分页部分。](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:37:04.830

`==`在查询 n_n 中不正确

你的查询应该是

```
public function index() {
    $this->ExpenseClaim->recursive = 0;
    $currentUsersClaims = $this->ExpenseClaim->find('all', 
              array('conditions' => array('ExpenseClaim.user_id' => $this->Auth->user('id'))));
    $this->set('currentUsersClaims', $this->paginate());
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:37:25.843

```
'ExpenseClaim.user_id ==' 
```

应该

```
ExpenseClaim.user_id = 
```

编辑：我打字时有两个答案.... :)

# ruby-on-rails - 在文本字段上设置值

> ID：11778486
> 
> 赞同：3
> 
> 时间：2012-08-02T13:30:17.990
> 
> 标签：ruby-on-rails, ruby

在我的应用程序中，我想为文本字段设置值。我想在这里做同样的事情

```
<input type="text" value ="something"> 
```

我的问题是我怎么能在 Rails 视图上做同样的事情。

```
 <h1>New location</h1>

<% form_for(@location) do |f| %>
  <%=  f.error_messages %>

  <p>
    <%= f.label :address %><br />
    <%=  f.text_field :address %>

  </p>
  <p>
    <%= f.label :latitude %><br />
    <%= f.text_field :latitude %>
  </p>
  <p>
    <%= f.label :longitude %><br />
    <%= f.text_field :longitude %>
  </p>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', locations_path %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:36:33.580

通过传递`value`参数

```
<%= f.text_field :latitude, :value => 17 %> 
```

# c# - 分配给各种类 C# 的方法列表

> ID：11778487
> 
> 赞同：1
> 
> 时间：2012-08-02T13:30:18.633
> 
> 标签：c#, list, action, unity3d

我在 Unity 中有一个沙盒世界，其中包含各种游戏对象，最终会有一组交互，玩家可以在单击此对象后从中进行选择（最好的例子是模拟人生）。

我基本上希望每个对象都包含一个方法列表，这些方法是从另一个方法列表中分配的。所以也许有一个带有“摇动”方法的树，我想将“摇动”方法分配给树的交互列表，但摇动方法是在另一个类中定义的。我也可能有一辆车也可以有“摇”的方法。

我知道我可以有一个 Action 列表。

```
List<Action> interactions = new List<Action>(); 
```

并且这个列表可以填充方法，但这是我上面解释的最佳解决方案吗？我能否以某种方式拥有一个包含所有可能交互的枚举，它会自动调用特定游戏对象的特定方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:36:52.783

我不确切知道您要实现的目标以及它是否是最佳解决方案，但对我来说，这听起来像是策略模式的一个很好的用途：

```
// This is the 'strategy' in your case
public interface IInteraction
{
    void Do();
}

public class GameObject
{
    // Here is your list of interactions - you can do whatever you want with it.
    public List<IInteraction> Interactions { get; set; }
}

// Here is an interaction
public class Shake : IInteraction
{
    public void Do()
    {
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:47:28.920

一种方法是将每个动作定义为它们自己的 MonoBehavior 脚本。然后您需要做的就是将每个行为作为一个组件附加到每个游戏对象。

这将需要您更改在另一个类中定义所有操作的模式，但应该保持事情非常干净。

然后要执行每个操作，您只需检查该游戏对象是否具有该组件并执行其操作。 `Shake s = gameObject.GetComponent<Shake>();
if(s != null)
{
s.Shake(shakeParameters);
}`

# ruby-on-rails - 模板缺少导轨

> ID：11778488
> 
> 赞同：0
> 
> 时间：2012-08-02T13:30:19.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有3个模型一个

```
Customer               Book                 Book_Managers
id                     id                   id
first                  description          customer_id
last                   book_manager_id      visible
email                   
password 
```

当客户进入 customer#edit 时，然后将表单 book 和 book_managers 呈现为一个表单

在我的 bookController 中，我有以下内容来创建一本书和 book_manager

```
class BooksController < ApplicationController
    def create
        @customer = current_customer
        @book = @customer.book_managers.build(:visible => "true")
        @book = @customer.book_managers.first.books.build(:description => "2012")
    end
end 
```

但后来它告诉我缺少模板。我也只使用了一个简单的 form_for。我做错了什么？我相信我应该使用 Accept_nested_attributes_for 但任何人都有一个很好的教程？

更新：关于这里的铁路广播，我的关系，看看它是否有意义？

```
Customer
    has_many :book_managers
        has_many :books, :through => :book_managers
    accepts_nested_attributes_for :book_manager
Book
    belongs_to :book_manager
    def customer
        book_manager.customer
    end
Book_Manager
    belongs_to :customer
    has_many :books
    accepts_nested_attributes_for :book 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:40:56.097

好吧，大多数情况下，在成功创建后，您`redirect_to`的编辑或列表页面应该会显示成功消息 ( `flash[:info] = "Success"`)。

所以你应该有

```
def create
    @customer = current_customer
    @book = @customer.book_managers.build(:visible => "true")
    @book = @customer.book_managers.first.books.build(:description => "2012")
    flash[:info] = "Success"
    redirect_to :some_action
end 
```

例如在绿色视图中显示`<%= flash[:info] %>`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:41:33.743

看看这些 railscasts [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)和[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)。他们将向您展示正确实现嵌套表单的方法。

# c++ - const int*& 与 typedef int* IntPtr

> ID：11778490
> 
> 赞同：3
> 
> 时间：2012-08-02T13:30:27.717
> 
> 标签：c++

为什么我必须将其更改`int *`为 a`typedef int * IntPtr`才能编译？

```
template <class T>
class A
{
    public:
        template <class X>
        void a(X *x, void (X::*fun)(const T&))
        {
        }
};

typedef int * IntPtr;

class B
{
    public:
        B() : a()
        {
            a.a(this, &B::foo); // this won't work
        }
        void foo(const int *&) // must replace `int *` here with `IntPtr`
        {
        }
        A<int *> a; // ...and here
};

class C
{
    public:
        C() : a()
        {
            a.a(this, &C::foo);
        }
        void foo(const IntPtr&)
        {
        }
        A<IntPtr> a;
}; 
```

我明白为什么 typedef 有用，但不明白为什么需要它们。该类`C`编译得很好`B`。

这是来自 MSVC++ 2008 编译器的错误：

```
Error   1   error C2784: 'void A<T>::a(X *,void (__thiscall X::* )(const T &))' : could not deduce template argument for 'void (__thiscall X::* )(const T &)' from 'void (__thiscall B::* )(const int *&)' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T13:36:22.330

`const int*&`并且`typedef int* IntPtr; const IntPtr&`不一样。在第一种情况下，它是常量，在第二种情况下，它是指针。只有第二种情况与您的模板兼容。

如果你写

```
void foo(int * const &); 
```

相反，它应该可以编译并正常工作。

# iphone - 如何在编写漂亮代码的同时避免扩展 NSArray 和用 Java 思考

> ID：11778491
> 
> 赞同：2
> 
> 时间：2012-08-02T13:30:33.420
> 
> 标签：iphone, objective-c, ios, macos, ipad

我将做两件被认为是糟糕风格的事情，但我有理由，而且我对 Cocoa 解决方案持开放态度，我只是不知道它是什么。

我想要一个`NSArray`对 a 类型安全的类型`UIView`，然后`NSArray`是对 s 的数组类型安全的类型`UIView`。的二维数组`UIViews`。

我喜欢这个，因为我已经实现了一个自定义双`UITableView`精度表，它在垂直表视图中具有嵌套的水平表视图。我会使用我的自定义`ViewsArray`和`Views2DArray`数据结构，其他程序员可以轻松地为我的`DoubleTableView`. 这是想要扩展的充分理由`NSArray`吗？

我遇到的问题是我已经覆盖了该方法的功能：

`(NSArray *) initWithObjects:(id) firstObject ...`作为：

`(ViewsArray *) initWithViews: (UIView *) firstView, ...`

但是 my 方法的返回值是 an `NSArray`，它没有包含在 my 中的其他方法`ViewsArray`，这意味着无法识别的选定异常。我通过创建一个包含我的视图的`NSArray`属性暂时解决了这个问题`ViewsArray`，但是当我想将我的内容提供给我的`DoubleTableView`.

前任：

`[[self.delegate content].arraysOfViews objectAtIndex:indexPath.section];`

代替

`[[self.delegate content] objectAtIndex:indexPath.section];`

我知道这是几个字母，但我正在尽我所能写出好的代码。

我怎样才能返回`self`我的`initWithViews`并拥有我添加的,等`NSArray`属性？（铸造？）我是否在考虑这个错误（使用 Java/typesafity ...）？像这样的数据结构的最佳解决方案是什么？`greatestHeight``totalWidth`

编辑：

为了以我认为“时尚”的方式解决我的问题，我做了以下事情：

这是我的标题（注意它是一个 NSObject）：

```
@interface ViewsArray : NSObject

@property int greatestHeight;
@property int greatestWidth;
@property int totalWidth;

- (ViewsArray *) initWithViews: (UIView *) firstView, ...;
- (UIView *) getViewAtIndex: (NSInteger) index;
- (NSUInteger) viewCount;

@end 
```

这是在我的实现中：

```
@interface ViewsArray ()

@property (retain, nonatomic) NSArray *views;

@end 
```

这意味着我只管理一个私有 NSArray。允许漂亮的参考。

我今天学到的东西：阅读该死的文档并接受你的语言。我知道这个实例可能不会显示最后一个，但我更接近；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:56:14.357

简单的解决方案； **不要打扰**。

在使用和调试使用 NSArray/NSDictionary API 的 Objective-C 应用程序 18 年中，我认为我只遇到过几次错误的集合类问题。在所有情况下，它都表明存在总体设计问题，而不是程序错误。

简而言之，您的应用程序控制集合的内容，除非您在集合中粘贴错误的内容，否则您的集合将包含您所期望的内容。在编写良好的应用程序中，可能向集合添加内容的位置数量应该非常少，通常只有一两个位置。

如果您确实觉得需要对此进行防御，`NSAssert([... isKindOfClass:...])`请在向数组添加内容的一两个位置添加一个。无需在检索点添加相同的内容。

但是，存在一种常见的误报故障模式，该模式似乎是集合中的错误类型。如果你过度释放一个对象，而另一个类的对象恰好被分配在同一个位置，那么你会看到这种模式的失败。

# php - 内存缓存：混乱

> ID：11778495
> 
> 赞同：1
> 
> 时间：2012-08-02T13:30:40.823
> 
> 标签：php, caching, memcached, scalability

我将为我的 PHP 应用程序使用 memcache（不是 memcacheD）。我有一些困惑。

我为 memcache 找到[了这个包装](http://bakery.cakephp.org/articles/jiri/2007/04/17/memcache-wrapper-class)类。

1）作为连接方法，它添加所有服务器以拉动。如果对每个请求都执行此操作，是否会减慢网络延迟的永久性原因？

2）如果池中有2台服务器并且一台离线请求仍然会发送到离线服务器？没有其他方法可以从 memcache 中自动删除离线服务器吗？如果不是 memcache.allow_failover = 1 设置做什么？

3) 有没有办法查看哪个内存缓存服务器服务了多少缓存请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:05:34.033

任何 memcache API/wrapper 都可以。您甚至可以通过 PHP 的 CURL 方法构建您自己的。

## 1）是否每个请求都会拉动所有服务器并导致网络延迟？

不。当您的应用程序发出请求时，它会尝试连接到单个服务器，并在出现故障、NOT_FOUND、超时等时“去钓鱼”到下一个服务器。可能会有一些网络延迟，但比与数据库交互要少得多*。*如果您担心 I/O 和延迟，您应该能够在您的应用程序中构建一个简单的解决方案。

## 2) 是否仍会向离线服务器发出请求？

由你决定。尽管系统已关闭，但您的应用程序可能仍在尝试连接到它。如果您决定使用 PECL 的 memcache API，您的应用程序应该能够识别 memcached 是否在任何给定服务器上正常运行。[内存缓存::checkServerStatus](http://www.php.net/manual/en/memcache.getserverstatus.php)

### 2.1) memcache.allow_failover 是做什么的？

这正是它所说的。如果您有 memcached 服务器**A**、**B**和**D**。服务器**A**宕机。两个选项都会发出 USER_NOTICE；*但是*，`memcache.allow_failover=1`将继续对服务器**B**进行读写，并允许读写。当`memcache.allow_failover=0`所有 memcache I/O 将*优雅地*返回 false 时。

查看[文档](http://us.php.net/manual/en/memcache.ini.php)。

## 3) Memcached 服务器报告

Memcached 提供了一个`stats`命令，PECL 的 memcache 也提供了一个[状态](http://us.php.net/manual/en/memcache.getstats.php)方法。但是它们与内存/平板统计信息有关。如果您想要使用情况的监控报告，请查看[New Relic](https://newrelic.com/)

# python - Python outfile 没有写完所有东西

> ID：11778497
> 
> 赞同：-4
> 
> 时间：2012-08-02T13:30:50.107
> 
> 标签：python, python-2.7

我有代码可以让我执行相当复杂的任务（至少对我来说）：

```
import csv
import os.path
#open files + readlines
with open("C:/Users/Ivan Wong/Desktop/Placement/Lists of targets/Mouse/UCSC to Ensembl.csv", "r") as f:
    reader = csv.reader(f, delimiter = ',')
    #find files with the name in 1st row
    for row in reader:
        graph_filename = os.path.join("C:/Python27/Scripts/My scripts/Top targets",row[0]+"_nt_counts.txt.png")
        if os.path.exists(graph_filename):
            y = row[0]+'_nt_counts.txt'  
            r = open('C:/Users/Ivan Wong/Desktop/Placement/fp_mesc_nochx/'+y, 'r')
            k = r.readlines()
            r.close
            del k[:1]
            k = map(lambda s: s.strip(), k)
            interger = map(int, k)   
            import itertools
            #adding the numbers for every 3 rows
            def grouper(n, iterable, fillvalue=None):
                "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
                args = [iter(iterable)] * n
                return itertools.izip_longest(*args, fillvalue=fillvalue)
            result = map(sum, grouper(3, interger, 0))       
            e = row[0]
            print e
            cDNA = open('C:/Users/Ivan Wong/Desktop/Placement/Downloaded seq/Mouse/MOUSE_mRNAs.txt', 'r')
            seq = cDNA.readlines()
            # get all lines that have a gene name
            lineNum = 0;
            lineGenes = []
            for line in seq:
                lineNum = lineNum +1
                if '>' in line:
                    lineGenes.append(str(lineNum))
                if '>'+e in line:
                    lineBegin = lineNum

            cDNA.close

            # which gene is this
            index1 = lineGenes.index(str(lineBegin))
            lineEnd = lineGenes[index1+1]           
# linebegin and lineEnd now give you, where to look for your sequence, all that 
# you have to do is to read the lines between lineBegin and lineEnd in the file
# and make it into a single string.            
            lineEnd = lineGenes[index1+1]
            Lastline = int(lineEnd) -1

# in your code you have already made a list with all the lines (q), first delete
# \n and other symbols, then combine all lines into a big string of nucleotides (like this)     
            qq = seq[lineBegin:Lastline]
            qq = map(lambda s: s.strip(), qq)
            string  = ''
            for i in range(len(qq)):
                string = string + qq[i]
# now you want to get a list of triplets, again you can use the for loop:
# first get the length of the string
            lenString = len(string);
# this is your list codons
            listCodon = []
            for i in range(0,lenString/3): 
                listCodon.append(string[0+i*3:3+i*3])
            proper_result = '\n'.join('%s, %s' % (nr, codon) for nr, codon in zip(result, listCodon))
            with open(e+'.csv','wb') as outfile:
                outfile.writelines(proper_result) 
```

这些代码从 .csv 读取文件，从具有相同名称的文件的文件夹中识别，如果它们存在，那么它会继续处理一些数据并将它们写入 .csv，我的输出文件现在看起来像这样![输出文件](../Images/be6cfe056eb6e5acafcb41c2e53ad6d2.png)

它看起来完全没问题，但是有一个问题，我从我的数据中知道（我以不同的方式检查它）第二列应该比我得到的要长。我认为这是因为当结果（数字）和 listCodon（字母）都存在时，代码正在写入文件，因此我遗漏了一些东西。我该如何解决？

我尝试在写入文件之前打印 listCodon，发现所有三元组仍然存在，所以我猜问题出在此处：

```
proper_result = '\n'.join('%s, %s' % (nr, codon) for nr, codon in zip(result, listCodon)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:56:29.380

[`zip`](http://docs.python.org/library/functions.html#zip)一旦它的*任何*可迭代停止就会停止（因为否则它不知道用什么来填充空白！）：

> 返回的列表在长度上被截断为最短参数序列的长度。

如果要将较短的迭代填充到最长的长度，请使用[`izip_longest`](http://docs.python.org/library/itertools.html#itertools.izip_longest)（它需要一个可选参数用作填充值）。

# javascript - Map/Reduce 给我 NaN 或错误的结果（由于 null）

> ID：11778498
> 
> 赞同：1
> 
> 时间：2012-08-02T13:30:53.733
> 
> 标签：javascript, mongodb, mapreduce

我还没有问另一个 Map/Reduce 问题。

我有一个集合“ `example`”，看起来像这样：

```
{
"userid" : "somehash",
"channel" : "Channel 1"
} 
```

我的 Map/Reduce 函数如下所示：

```
var map = function () {
    emit(this.channel, {user:this.userid, count: 1});
}

var reduce = function (key, values) {
    var result = {total:0, unique:0};
    var temp = [];
    values.forEach(function (value) {
        result.total += value.count;

        if (temp.indexOf(value.user) == -1) {
            temp.push(value.user);
        }
    });

    result.unique += temp.length;

    return result;
} 
```

不幸的是，它给了我一些非常奇怪的结果：

```
{ "_id" : "Channel 1", "value" : { "total" : NaN, "unique" : 47 } }
{ "_id" : "Channel 2", "value" : { "total" : NaN, "unique" : 12 } }
{ "_id" : "Channel 3", "value" : { "total" : 6, "unique" : 6 } } 
```

似乎`value.count`解析为`null`，似乎“唯一”也不是正确的值。我想要做的是计算每个通道的所有值，并以我可以看到每个用户的唯一值的方式计算它。这意味着，此集合中的一个文档`example`, 可能会出现多次。我想知道所有时间和独特的时间。

我遵循了本指南：[http](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction) ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction ，我不知道为什么我会`null`被扔在脸上？很奇怪，关于这个主题有什么好的想法吗？

感谢您的建议和更好的智慧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:44:47.307

发生这种情况的原因是因为map/reduce 有时会触发自身，即reduce 会触发reduce 的结果。但是reduce的结果没有`count`字段。您必须始终确保 map 发出和 reduce 结果具有**相同的**格式。在文档中阅读有关此内容的更多信息。

**编辑**这是一个简单的演示如何解决这个问题：

```
var map = function () {
    emit(this.channel, { user: [this.userid], count: 1 });
}

var reduce = function (key, values) {
    var result = { user: [], count: 0 };
    values.forEach(function (value) {
        result.count += value.count;

        value.user.forEach(function(usr) {
            if (result.user.indexOf( usr ) == -1) {
                result.user.push( usr );
            }
        });
    });

    return result;
} 
```

现在`result.user.length`应该给你独特的用户。没有测试它，但它应该工作。

**编辑 2**它应该很慢，`.indexOf`是一个相当昂贵的功能。您可以通过制作两个 map/reduce 作业来加快速度。首先，您像这样映射/减少集合：

```
var map = function() {
    // make a key unique per channel and userid
    emit( this.channel + '_' + this.userid,
        { count: 1, channel: this.channel }
    );
}

var reduce = function(key, values) {
    var result = { count: 0, channel: null };
    values.forEach(function( value ) {
        result.count += value.count;
        // Don't worry about these substitutions,
        // these values can't change anyway per key.
        result.channel = value.channel;
    });
    return result;
} 
```

现在`count`，这个集合会给你一些独特的条目。要获得总数，您可以对这样的结果进行第二次 map/reduce：

```
var map = function() {
    // Note the key!!!
    emit( this.value.channel, { count: this.value.count } );
}

var reduce = function(key, values) {
    var result = { count: 0 };
    values.forEach(function( value ) {
        result.count += value.count;
    });
    return result;
} 
```

这应该快很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:54:56.763

从[文档](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction)：

> 因为reduce函数可能会为同一个键多次调用，reduce函数返回的对象的结构必须与map函数发出的值的结构相同

你不这样做，你的 reduce 返回一个带有`total`and`unique`而不是`count`and的对象`user`。要么将格式更改为代表按用户分组的格式，要么使用[finalize 函数](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-FinalizeFunction)。

# spring - 建议 javax.persistence.EntityManager 与 AspectJ 不工作

> ID：11778499
> 
> 赞同：3
> 
> 时间：2012-08-02T13:30:59.130
> 
> 标签：spring, aspectj, entitymanager

我正在尝试向`javax.persistence.EntityManager`AspectJ 和 Spring 提供建议。它只是不起作用：控制台上没有错误，也没有***“捕获” ......***

**这是我的方面：**

```
package trc.suivi.aspects;

public aspect EventManagerAspect {

    public EventManagerAspect() {}

    pointcut catchIt() : (execution(* javax.persistence.EntityManager.persist(..)));

    after() returning: catchIt() {
        System.out.println("caught");
    }

} 
```

**这是我在 Spring 中配置方面的方式：**

```
<bean class="trc.suivi.aspects.EventManagerAspect" factory-method="aspectOf"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:37:05.137

调用和执行的区别在于：

with `call`you 建议您的代码，with `execution`you 建议目标代码（在此上下文中，advising 大致意味着：更改字节码）。而且由于目标代码在您的编译器无法访问的 jar 中，因此这将不起作用。

using`call`在大多数情况下都可以，但是如果您绝对需要使用`execution`，则必须使用 aspectj 重新编译外部库或使用加载时间编织。

# c# - 如何用 C# 中 ListView 中的旧值更新新值

> ID：11778507
> 
> 赞同：-2
> 
> 时间：2012-08-02T13:31:13.330
> 
> 标签：c#

我需要将新值插入到已经有一些值的列表视图中的代码。我做了我自己的方式，但我得到了跨线程异常。那么任何人都可以帮我将新值插入列表视图但不清除旧值吗？

在此先感谢， 乌拉加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:49:43.807

你必须表现出更多的研究努力。您还应该发布您的非工作代码，而不仅仅是说您遇到了异常。

您的应用程序是 winform 还是 webform？

System.Windows.Forms.ListView 在其 Items 集合的 Add 方法中有 6 个重载，这里有 3 个：

```
 listView1.Items.Add(new ListViewItem("new item"));
 listView1.Items.Add("List item text", 3);  // Adds a new item with ImageIndex 3
 listView1.Items.Add("string"); 
```

试试看。

System.Web.UI.WebControls.ListView 有一种方法可以调用其 Items 集合的 Add 方法：

```
 ListView1.Items.Add(ListViewDataItem item); 
```

请参阅[http://msdn.microsoft.com/en-us/library/aa983548(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa983548(v=vs.71).aspx)

# jquery - jQuery preventDefault - 为什么它不起作用？

> ID：11778508
> 
> 赞同：0
> 
> 时间：2012-08-02T13:31:18.770
> 
> 标签：jquery, preventdefault

我有这个 HTML：

```
<header>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-inverse pull-left" href="myfile.html"> &larr; prev</a>
        <ul class="nav">
          <li><a href="#">Lorem</a></li>
          <li class="active"><a href="#">ipsum</a></li>
          <li><a href="#">Lorem</a></li>
          <li><a href="#">ipsum</a></li>
        </ul>
        <a class="btn btn-inverse pull-right disabled" href="file.html">next &rarr;</a>
      </div>
    </div>
  </div>
</header> 
```

和这个 JS（在`document.ready`包装器中）：

```
$(".disabled").bind('click', function(e){
  e.preventDefault();
}); 
```

当我单击禁用的链接时，我仍然打开下一页。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:46:08.747

因为它也对我作为小提琴起作用，所以我知道问题需要出现在我的脚本的其他部分。经过一番调试，我发现了问题：

```
$(".disabled").bind('click', function(e){
  e.preventDefault();
}); 
```

被设置在一个`on`包装器中：

```
$("#poem").on("click", function() {
  $(".disabled").bind('click', function(e){
    e.preventDefault();
  });
}) 
```

写成这样之后：

```
$(".disabled").bind('click', function(e){
 e.preventDefault();
});

$("#poem").on("click", function() {
  // something...
}) 
```

现在可以了！

# mfc - mfc 对话框按钮 rect

> ID：11778509
> 
> 赞同：0
> 
> 时间：2012-08-02T13:31:27.677
> 
> 标签：mfc, dialog

我有一个带有按钮的窗口，我想在窗口重新调整大小时将按钮锚定在一个角落，但是当我尝试检索按钮时`rect`，`debug assertion error`会抛出 a 。

```
void CDaf_Alarm_ComplexDlg::OnSize(UINT nType, int cx, int cy)
 {
    CDialog::OnSize(nType, cx, cy);

    CRect winRect;
    GetWindowRect(&winRect);

    CRect buttonRect;
    m_btnAnulare.GetWindowRect(&buttonRect);

    m_btnAnulare.SetWindowPos(NULL,winRect.right - buttonRect.Width(), buttonRect.top, 0, 0, SWP_NOZORDER | SWP_NOMOVE);
} 
```

该错误被抛出该行`m_btnAnulare.GetWindowRect(&buttonRect);`，因为它返回负值（可能`NULL`）。

`m_btnAnulare`是在 中声明的 CButton 项`.h`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:49:28.777

很可能`CButton`尚未创建/子类化。你检查过 m_hWnd 成员吗？还是`nullptr`。`GetSafeHwnd() != nullptr`在访问它之前检查。

# jquery - 添加表单验证后，jQuery ajax 调用不起作用

> ID：11778512
> 
> 赞同：1
> 
> 时间：2012-08-02T13:32:03.980
> 
> 标签：jquery, validation

我有一个运行良好的 jQuery ajax 调用，直到我添加了表单验证。现在验证有效，但 ajax 调用无效，虽然我没有碰过它并且发送的参数似乎没问题。

jQuery代码是：

```
$j('#leapYearBtn').click(function()
{
    $j('td#calcResMsg').html('');
    $j('#leapYearForm').validate({
        errorPlacement: function(error, element){
        error.appendTo(element.parent('td').next('td'));
    }
    });
    if($j('#leapYearForm').validate().element("#leap_year") == true)
    {
        var fctSelect = 2;
        var year = $j("#leap_year").attr("value");
        alert(fctSelect);
        $j.ajax({
            url: "ajax/clcDates.php",
            type: "POST",
            data: {fctSelect: 2, yr: year},
            success: function(output){
            $j('td#calcResMsg').text(output);
        }});
    }       
}); 
```

HTML 表单：

```
<form id="leapYearForm">        
   <table>
       <tr>
           <td>Enter year</td>
           <td>
               <input class="required positiveNumber" type="text" name="leap_year" 
               id="leap_year" value="" />
           </td>
           <td class="validatorErrMsg"></td>
           <td id="calcResMsg" class="calc_resMsg">/td>
       </tr>
       <tr>
           <td>&nbsp;</td>
           <td>
              <button id="leapYearBtn">Check</button>
           </td>
       </tr>
    </table>
</form> 
```

添加验证时，我既没有更改 php 函数也没有更改 ajax 调用，但它不再起作用。有人可以帮我找出原因吗？

我怀疑这与我必须将表格包装在一个表格中的事实有关，这可能会以某种方式影响行为并导致甚至没有进行 ajax 调用。

非常感谢

# salesforce - 查找过滤条件

> ID：11778515
> 
> 赞同：0
> 
> 时间：2012-08-02T13:32:23.097
> 
> 标签：salesforce

我在 Opportunity 和 Contact 之间有一个连接对象。在此联结对象中的联系人字段上，我需要限制用户可以选择的联系人。用户应该只能选择与商机帐户关联的联系人。我试图过滤联结对象上的联系人字段，但不知何故我无法这样做。我没有任何选项可以在那里使用 Opportunity 的帐户。有人可以建议我如何过滤这个。它非常紧急！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:48:45.337

如果所选联系人未与同一客户和商机相关联，您也许可以在自定义对象上设置验证规则以不允许保存。

# c# - 在 C# 中绘图的代码效率？

> ID：11778516
> 
> 赞同：2
> 
> 时间：2012-08-02T13:32:25.703
> 
> 标签：c#, compact-framework

只是为了了解最佳实践或代码效率，我有这段代码：

请注意：我使用的是 .Net Compact Framework。

```
protected override void OnPaint(PaintEventArgs e)
{
    if (BmpScreen == null)
    {
      BmpScreen = new Bitmap(ClientRectangle.Width, ClientRectangle.Height);
    }

    using (Graphics gBmpScreen = Graphics.FromImage(BmpScreen))
    {
         // some drawing using gBmpScreen
    }
    // finally
    e.Graphics.DrawImage(BmpScreen, 0, 0);
} 
```

在方法中的这段代码中，`Paint`我`Graphics` 每次都创建一个对象，

我的问题是这样做更好还是在开始时只创建一次图形对象更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:51:08.203

我不确定性能差异，但我建议在 OnResize 中分配和处置您的后台缓冲区 Bitmap 和 Graphics 对象。我发现对于大多数自定义控件，您可以将更新后台缓冲区的实际工作尽可能地与数据更改发生的位置分开，并将 OnPaint 简化为仅将后台缓冲区位图 blit 到系统的图形。这对于我编写的自定义图形控件很有效，因为数据不会随着用户交互而改变。它包含在手势滚动控件中，并大大改进了滚动动画。但是您可以通过调用 Update() 来响应用户交互更改以强制 OnPaint 在您的处理程序范围内，从而扩展该模式以处理更多交互控件。

# http - Tomcat 中的 WebDAV 服务器端实现

> ID：11778518
> 
> 赞同：2
> 
> 时间：2012-08-02T13:32:30.677
> 
> 标签：http, jakarta-ee, tomcat, servlets, webdav

问题：我的任务是构建一个链接到本地​​根文件夹的基本 WebDAV servlet。目前，servlet 必须支持目录列表和 GET，以获取所需的文件。所有这些都必须遵循 WebDAV 协议。此外，必须在 Java 中完成，最好是在 Tomcat 下。

背景：到目前为止，我对 HTTP Servlet、Tomcat 等的接触非常有限，这就是为什么我觉得这项任务相当困难的原因。虽然我了解 HTTP servlet 的工作原理，但我不明白如何从 HTTP servlet 转换到 WebDAV servlet。

方法：我的想法是扩展WebDAVServlet类（org.apache.catalina.servlets.WebdavServlet）并实现doPropfind方法和doGet方法。但是，在阅读了 WebDAVServlet 类之后，这些方法似乎已经实现了。如果是这种情况，我可以使用什么作为客户端来使用该功能（我可以以某种方式发送代表 HTTP 请求的 XML 文件，只是为了学习目的吗？）？然后，我应该扩展什么来构建我需要阅读的服务器。

**简而言之**：如果你必须建造我需要建造的东西，你会怎么做？你会扩展什么类等等。开始我发现的实际实现是最困难的事情。如果我要看到一个非常基本的 WebDAV servlet 示例，我相信我可以在此基础上构建，但目前我被卡住了，任何帮助，任何资源，任何链接都将不胜感激。

提前谢谢你，我为这个菜鸟问题道歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:50:04.273

Tomcat 提供了开箱即用的 WebDAV 功能：您只需配置它们。

您应该阅读[WebdavServlet](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/servlets/WebdavServlet.html)的文档。

如果您的要求是实现 WebDAV... 安装 Tomcat 并正确配置它可以满足该要求。除非 Tomcat 的 WebdavServlet 不能满足您的需要，否则无需进行软件开发。

# jquery - 带有锚点的 jQuery 切换

> ID：11778520
> 
> 赞同：0
> 
> 时间：2012-08-02T13:32:38.307
> 
> 标签：jquery, anchor

我已经创建了一个功能，可以在单击某个元素时打开以显示 div。我在一页上有几个。如何在仅打开某个 div 的情况下链接到该页面？

HTML：

```
<div class="heading">
    <p>
        <a href="#">....</a>
    </p>
</div>
<div class="more">
    <p>...</p>
</div>

etc. 
```

jQuery：

```
<script type="text/javascript">
    $(function () {
        if($('.heading')[0]) {
            $('.heading').toggle(function () {
                $(this).next('.more').slideDown();
            },

            function () {
                $(this).next('.more').slideUp();
            });
            $("a[href='" + window.location.hash + "']").parent(".heading").click();
        }
    })
</script> 
```

编辑：我为每个隐藏的 div 添加了一个 id，并使用以下功能，它起作用了！

```
window.onload = function() {
    var hash = window.location.hash;
    if(hash != "") {
        var id = hash.substr(1); 
        document.getElementById(id).style.display = 'block';
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:00:31.517

好吧，您可以让 jquery 将 Querystring 附加到您链接到的页面的 URL，它“继承”打开的 DIV，例如 myurl.html?opened=div_3

也可能有一种方法可以使用 # 来做到这一点，但两者似乎都有些笨拙和不可取。

您可以使用 Ajax，并将其存储在 PHP 会话中。

（我之前只在导航中看到手风琴式菜单这样做过，但是你知道你的父母无论如何都来自页面，所以你打开它的 LI 例如）。

编辑添加：这是一个 Javascript 函数的链接，您可以使用它来查看查询字符串，从而确定您需要打开哪个 DIV： [http ://www.svlada.com/blog/2012/06/15/how- to-get-url-parameters-javascript/](http://www.svlada.com/blog/2012/06/15/how-to-get-url-parameters-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:41:27.883

我相信这就是您正在寻找的答案.... 快乐编码！

演示[http://jsfiddle.net/bfVYB/11/](http://jsfiddle.net/bfVYB/11/)

# php - PHP Select 语句需要快速更正

> ID：11778534
> 
> 赞同：0
> 
> 时间：2012-08-02T13:33:02.487
> 
> 标签：php, mysql, select, foreach

我最后的*回声*语句肯定是错误的，我把它放进去只是为了展示我想要做什么，我只是想把这三个变量称为之前设置的。这样做的正确方法是什么？

```
$table_id = 'mynewtable';
$query = "SELECT id,name,price FROM $table_id";
$result_set= mysql_query($query);

$id = "SELECT id FROM $table_id";
$name = "SELECT name FROM $table_id";
$price = "SELECT price FROM $table_id";

if ($result_set){

$record= mysql_fetch_row($result_set);
$idrecord= mysql_fetch_row($id);
$namerecord= mysql_fetch_row($name);
$pricerecord= mysql_fetch_row($price);

        foreach ( $record as $value){
        echo "<td><tr> $idrecord $namerecord $pricerecord </tr></td>";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:38:13.150

There's no point to fetch each of the elements separately. Use [mysql_fetch_assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php) to get an array with the columns specified in SELECT statement, as keys. this way you can easily get the echo you're after, without querying the database unnecessarily

```
$table_id   = 'mynewtable';
$query      = "SELECT id,name,price FROM $table_id";
$result_set = mysql_query($query);

if($result_set)
{
    while ($row = mysql_fetch_assoc($result_set)) {
        echo "<td><tr>" .$row["id"]
        . " ". $row["name"]
        . " " .$row["price"] . "</tr></td>";
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:38:06.107

```
$table_id = 'mynewtable';
$query = "SELECT id,name,price FROM $table_id";
$result_set= mysql_query($query);

if (mysql_num_rows() > 0){

    while($row = mysql_fetch_array($result_set)) {
        echo $row['id'] .", ". $row['name'] .", ". $row['price'];
    }

} 
```

Please start using mysqli_* instead of mysql_*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:35:04.847

您`$resultset`仅来自第一个查询 ( `$query = "SELECT id,name,price FROM $table_id";`) 而不是其他查询？

本节：

```
$id = "SELECT id FROM $table_id";
$name = "SELECT name FROM $table_id";
$price = "SELECT price FROM $table_id"; 
```

实际上没用，因为它只是将字符串分配给`$id`,`$name`和`$price`.

你的意思？：

```
$result_set= mysql_query($query);
while ($row = mysql_fetch_assoc($result_set)) 
{
    echo "<td><tr> ".$row['id']." ".$row['name']." ".$row['price']." </tr></td>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:38:36.497

why not

```
$table_id = 'mynewtable';
$query = "SELECT id, name, price FROM $table_id";
$result_set= mysql_query($query);

if ($result_set){
        while( $row = mysql_fetch_array(result_set)){ ?>
        <td>
          <tr> <?php echo $row['id'] . ' ' $row['name'] . ' ' . $row['price']; ?> </tr>
        </td>
<?php
    } // end of while
} // end of if 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:40:33.767

您不需要对 id、name 和 price 进行三个单独的选择。只需使用：

```
if ($result_set) {
    $row = $result_set -> fetch_assoc();
    $id = $row['id'];
    $name = $row['name'];
    $price = $row['price'];
} 
```

然后你可以将它输入到你的表格中，或者对信息做任何你想做的事情。`fetch_assoc()`仅当您使用MySQLi***时才***有效。`mysql_fetch_assoc`已*弃用*，您应该切换到***PDO***或***MySQLi***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T13:40:38.590

```
<?php
$query = "SELECT id,name,price FROM mynewtable";
$result_set = mysql_query($query);

if ($result_set!==false){
    while( $row = mysql_fetch_assoc( $result_set ) ) {
     echo '<td>' $row['id'] . ' ' . $row['name'] . ' ' . $row['price'] . '</td>';
    }
}
else {
    echo "Something went wrong with the query:";
    echo mysql_error( );
} 
```

这似乎更像它应该工作:)

**编辑**：顺便说一句，强烈建议不要使用 mysql_*，因为它们将在即将发布的 PHP 版本中消失。开始使用 PDO 或 MySQLi。

# php - 单击按钮将图像上传到 Facebook

> ID：11778543
> 
> 赞同：0
> 
> 时间：2012-08-02T13:33:13.107
> 
> 标签：php, mysql, facebook, facebook-graph-api

我正在尝试在单击按钮时使用 PHP 将图片上传到 Facebook。它似乎不起作用。

HTML 按钮代码

```
<a class="btn" href="test.php?upload=true">Click here to upload this image on your Facebook wall</a> 
```

PHP代码

```
 <?php
        $act=isset($_GET['upload'])?$_GET['upload']:"";

        if($upload=='true'){

        set_time_limit(50);
        require 'facebook.php';

        // Create our Application instance (replace this with your appId and secret).
        $facebook = new Facebook(array(
                    'appId' => 'FB_APP_ID',
                    'secret' => 'FB_SECRET_KEY',
                ));

        // Get User ID
        $user = $facebook->getUser();
        if ($user) {

        } else {
            $loginUrl = $facebook->getLoginUrl();
            header('Location:' . $loginUrl . '&scope=user_photos,publish_stream');
        }
        ?>

        <?php
        // Login or logout url will be needed depending on current user state.
                if ($user) {
                    if (isset($_GET['upload'])) {
                ?>

                <?php
                        $facebook->setFileUploadSupport(true);
                        $args = array('message' => 'test');
                        copy('http://mysite.com/test.png', 'tmp/file.jpeg');
                        $args['image'] = '@' . realpath('tmp/file.jpeg');
                        $data = $facebook->api('/me/photos', 'post', $args);
                        unlink('tmp/file.jpeg');
                        //assigning users to tag and cordinates
                        $argstag = array('to' => $user);
                        $argstag['x'] = 40;
                        $argstag['y'] = 40;
                        $datatag = $facebook->api('/' . $data['id'] . '/tags', 'post', $argstag);
                        echo 'Success! Check your facebook wall now';
                    } else {
                ?>
                        <a href="test.php?upload=true">Click here to upload this image on your facebook wall</a><br/><br/>

        <?php
                    }
                }

        }
?> 
```

注意：facebook.php 是 facebook PHP SDK 自带的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:47:50.643

把它放在一个 try&catch 块中，看看会发生什么：

```
 // ...
 try {
    $facebook->setFileUploadSupport(true);
    $response = $facebook->api(
      '/me/photos/',
      'post',
      array(
        'message' => 'This is my image caption',
        'source' => '@/absolute/path/to/image' // @-sign must be the first character
      )
    );
  }
  catch (FacebookApiException $e) {
    echo "Error: ".$e->getMessage();
  }
  // ... 
```

确保“tmp/”（你的意思是“/tmp/”吗？）调用copy后有一个有效的图片，并确保你有photo_upload权限。

[https://developers.facebook.com/docs/reference/php/facebook-setFileUploadSupport/](https://developers.facebook.com/docs/reference/php/facebook-setFileUploadSupport/)

# asp.net - 如何在 asp.net 中获取选定的单选按钮值

> ID：11778544
> 
> 赞同：1
> 
> 时间：2012-08-02T13:33:16.210
> 
> 标签：asp.net, vb.net, radio-button

这是我要知道的代码，选择了哪个单选按钮，但在第 6 行出现错误。`Object reference not set to an instance of an object`

```
Dim selected_option As String = "0"
        For i = 1 To 4
            Dim rdbName As String = "rb_option" & i
            Dim rdb As New RadioButton()
            rdb = CType(Me.Page.FindControl(rdbName), RadioButton)
            If rdb.Checked = True Then
                selected_option = i.ToString
                Exit For
            End If
        Next 
```

有 4 个带有 ID `rb_option1`、`rb_option2`和`rb_option3`的单选按钮`rb_option4`。

**更新**

```
<asp:Repeater ID="Repeater1" runat="server">
  <HeaderTemplate>
  <table style="width: 100%; height: 100%; margin-bottom: 50px">
  </HeaderTemplate>
  <ItemTemplate>
  <tr>
  <td style="width: 95%">
  <asp:Label ID="lbl_question" CssClass="frm_label" Text='<%# Eval("QUESTION")%>'runat="server"></asp:Label>
  </td>
  </tr>
  <tr>
  <td>
  </td>
  </tr>
  <tr>
  <td>
  <asp:RadioButton ID="rb_option1" Checked='<%# IF(Eval("ANSWER")="1",true,false) %>' GroupName="answer" Text='<%# Eval("OPT1") %>' CssClass="frm_label" runat="server" />
  </td>
  </tr>
  <tr>
  <td>
  <asp:RadioButton ID="rb_option2" Checked='<%# IF(Eval("ANSWER")="2",true,false) %>' GroupName="answer" Text='<%# Eval("OPT2") %>' CssClass="frm_label" runat="server" />
  </td>
  </tr>
  <tr>
  <td>
  <asp:RadioButton ID="rb_option3" Checked='<%# IF(Eval("ANSWER")="3",true,false) %>' GroupName="answer" Text='<%# Eval("OPT3") %>' CssClass="frm_label" runat="server" />
  </td>
  </tr>
  <tr>
  <td>
  <asp:RadioButton ID="rb_option4" Checked='<%# IF(Eval("ANSWER")="4",true,false) %>' GroupName="answer" Text='<%# Eval("OPT4") %>' CssClass="frm_label" runat="server" />
  </td>
  </tr>
  </ItemTemplate>
  <FooterTemplate>
  </table>
  </FooterTemplate>
  </asp:Repeater> 
```

预先感谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:42:23.183

为什么不使用 RadioButton 列表？然后您可以通过以下方式遍历您的单选按钮：

HTML：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server">
    <asp:ListItem Value="1">Radio 1</asp:ListItem>
    <asp:ListItem Value="2">Radio 2</asp:ListItem>
    <asp:ListItem Value="3">Radio 3</asp:ListItem>
    <asp:ListItem Value="4">Radio 4</asp:ListItem>
</asp:RadioButtonList> 
```

代码：

```
For i As Integer = 1 To 4
    For Each li As ListItem In RadioButtonList1.Items
        If li.Selected Then
               selected_option = li.Value
        End If
    Next
Next 
```

抱歉，如果我的 VB.NET 语法错误（用于 C#）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:58:59.690

更改此行：

```
Dim rdbName As String = "rb_option" & i 
```

对此：

```
Dim rdbName As String = "ctl00_cpExamMaster_Repeater1_ctl01_rb_option" & i 
```

# java - Servlet 中的 ConcurrentHashMap

> ID：11778550
> 
> 赞同：1
> 
> 时间：2012-08-02T13:33:34.317
> 
> 标签：java, concurrency

我将`ConcurrentHashMap`其存储在 servlet 上下文中，映射中的数据同时更改，我知道 servlet 上下文不是线程安全`ConcurrentHashMap`的，但是（用于编写）。在这种情况下我应该使用同步构造吗？

```
 synchronized (context) {
   ConcurrentHashMap messages =(ConcurrentHashMap)context.getAttribute("map");
   String mes  = messages.get("id");  // can be changed by another thread?
   messages.put("id",mes +"changed by thread 1");   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:37:08.813

如果您在 ServletContext 初始化时存储 Map，那么您不需要同步获取它，因为在上下文关闭之前您不会删除它。

Map 是否处理并发并不重要。在后一种情况下，您需要在 Map 上进行同步，但由于您使用的是处理并发的，您甚至不需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:22:28.857

对不起，但我没有看到问题。在这个例子中，“消息”是一个局部变量，每个线程都有一个。你没有分享“信息”

当您从“上下文”中读取时，可能会出现唯一的问题，因此您只需要同步该读取

```
ConcurrentHashMap messages = null;
synchronized (context) {
    ConcurrentHashMap messages =(ConcurrentHashMap)context.getAttribute("map");
}
String mes  = messages.get("id");  // can be changed by another thread?
messages.put("id",mes +"changed by thread 1"); 
```

但是，最好的办法是避免这种情况。您将如何避免在读取表单上下文中同步？很简单，您不能在上下文中编写或仅在初始化过程中这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:54:19.117

如果您担心在持有对 Map 的引用后对其进行更改，您可以做的是通过返回 Map 副本的方法包装代码。在这种情况下，您将从复制时保存地图的快照。

如果要完全同步更改，可以使用 Collections.syncrhonizedMap(...)

# c# - 将对象转换为只有类型可用的通用 IEnumerable

> ID：11778557
> 
> 赞同：1
> 
> 时间：2012-08-02T13:34:22.460
> 
> 标签：c#, .net, generics, casting

将对象转换回这样的通用列表的正确代码是什么？

```
Type x = typeof(MyClass);
object o = new List<MyClass>();

List<x> l = o as List<x>; // Not working 
```

编辑：也许还不是很清楚：该对象是一个泛型类型的列表，我在编译时不知道.. 不过 List 有像“Add”这样的函数，我无论如何都可以调用，比如：

```
l.Add((new MyClass() as object)) as x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:37:32.463

```
List<MyClass> l = (List<MyClass>)o; 
```

或者

```
List<MyClass> l = o as List<MyClass>; 
```

* * *

你的意思是

```
List<> l = o as List<>; 
```

除非您使用泛型类，否则这是不可能的：

```
class C<T>
{
    public List<T> List = new List<T>();
} 
```

用法：

```
C<MyClass> c = new C<MyClass>();
c.List.Add(new MyClass()); 
```

* * *

最后我得到了OP的目标：

```
Type listType = typeof(List<>);
Type targetType = listType.MakeGenericType(typeof(YourClass));
List<YourClass> list = (List<YourClass>)Activator.CreateInstance(targetType); 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:48:46.627

当泛型接口因为编译时不知道类型参数而无法使用，但非泛型接口可用时，您可以改用它：

```
Type x = typeof(MyClass);
object o = new List<MyClass>();

IList l = (IList)o;
l.Add(new MyClass()); 
```

非泛型`IList`接口由泛型`List<T>`类实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:39:13.830

```
object testobject = new List<string>();
List<string> list = (List<string>)testobject; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:43:27.157

```
 List<Employee> employees = new List<Employee> { new Employee { Id = Guid.NewGuid().ToString(), Name = "SOME" }, new Employee { Id = Guid.NewGuid().ToString(), Name = "SOME2" } };

        object obj = employees;

        List<Employee> unBoxed = (List<Employee>)obj; 
```

# svn - 是否有可能使用 svnadmin setrevprop 为某个文件设置 svn 属性

> ID：11778560
> 
> 赞同：1
> 
> 时间：2012-08-02T13:34:26.857
> 
> 标签：svn

如何为存储库中某个路径的某个修订设置 svn:externals 属性？svnadmin setrevprop 似乎不处理存储库中的路径。

我想看看输出的变化： svnlook pg -rRRR /path_to_my_repo/ svn:externals /in_repo_path

# asp.net-mvc - SignalR 和 foreverFrame 在 IE 9 中挂起

> ID：11778561
> 
> 赞同：3
> 
> 时间：2012-08-02T13:34:27.670
> 
> 标签：asp.net-mvc, asp.net-web-api, signalr

我有一个使用 SignalR 将数据从服务器推送到客户端的 asp.net 站点。我用两个浏览器（FireFox，IE9）尝试我的页面，我注意到，Firefox 使用 ServerEvent 传输，而 IE 使用 ForeverFrame。我对 FF 没有任何问题，但在 IE9 中几分钟后它停止工作，我的意思是我没有从服务器获得推送事件。（当我将传输移动到长轮询时）但我希望它在没有长轮询的情况下更高效。

在集线器中，我每 5 秒调用一次客户端。

如果您需要更多详细信息，请通知我。有什么建议么。

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:27:41.597

另请参阅以下[https://github.com/SignalR/SignalR/blob/master/ReleaseNotes.md](https://github.com/SignalR/SignalR/blob/master/ReleaseNotes.md) 这包含 1.0.0-rc2 之前的发行说明并记录了重大更改

# couchdb - 当视图是检查点时，陈旧的行为如何？

> ID：11778563
> 
> 赞同：1
> 
> 时间：2012-08-02T13:34:32.100
> 
> 标签：couchdb

据我所知，即使视图正在索引 stale=ok 也会返回结果。我的问题是，当视图检查点时它会做什么？

如果视图正在被索引并且仍在检查点，那么 stale=ok 是否会返回任何检查点开始之前的视图，或者它是否返回当前索引构建期间的最后一个检查点的视图？

我想我想知道的是，我可以使用 stale=ok 来保证视图是一致的（即完全构建），所以会有另一个进程正常调用视图来更新索引，但是 UI 将使用 stale=好的，总是有一个完整的索引（即使有时过时了一小段时间）。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:39:28.560

在 CouchDB 中，事务仅限于单个文档更新。由于[ACID 兼容](http://wiki.apache.org/couchdb/Technical%20Overview#ACID_Properties)，查询结果始终是一致的。

Martin Brown 写了一些[技巧来处理视图更新](http://blog.safaribooksonline.com/2012/03/14/improving-couchdb-performance/)。

# c# - 传递枚举命令行参数

> ID：11778564
> 
> 赞同：2
> 
> 时间：2012-08-02T13:34:37.777
> 
> 标签：c#, .net, enums, console-application, command-line-arguments

所以我有这个开关是为了设置等待时间

```
public int Option(string arg)
{
    switch (arg)
    {
        case "/t:Max":
                return 0;
        case "/t:Med":
                return 1000;
        case "/t:Min":
               return 2000;
        default: return 0;
    }
} 
```

如何使用 /t:Min、/t:Med、/t.Max 的枚举来替换开关？

确实是这样的：

```
enum t
{
    /t:Min,
    /t:Med,
    /t:Max
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:38:11.413

你应该使用`Enum.Parse`. `TryParse`另请参阅：http: [//msdn.microsoft.com/en-us/library/system.enum.parse.aspx](http://msdn.microsoft.com/en-us/library/system.enum.parse.aspx)

但是您仍然必须从命令行参数中检索字符串（去除 '/t:'）并将其解析到您的`Enum`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:38:45.667

你的枚举应该是这样的：

```
public enum WaitTime 
{
     Min, Max, Med
} 
```

并将您的开关转换为：

```
switch ((WaitTime)Enum.Parse(typeof(WaitTime), arg.Replace("/:", string.Empty)))
{
    case WaitTime.Max:
            return 0;
    case WaitTime.Med:
            return 1000;
    case WaitTime.Min:
           return 2000;
    default:
           return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:54:48.050

试试这个：

```
public enum t
{
  [Description("/t:Min")]  // <<---- set the string equivalent of the enum HERE.
  min = 0,  // <<---- set the return value of the enum HERE.

  [Description("/t:Med")]
  med = 1000,

  [Description("/t:Max")]
  max = 2000
} 
```

您还需要这个方便的小类：

```
public static class EnumHelper
{
    public static list_of_t = Enum.GetValues(typeof(t)).Cast<t>().ToList();

    // returns the string description of the enum.
    public static string GetEnumDescription(this Enum value)
    {
        FieldInfo fi = value.GetType().GetField(value.ToString());

        DescriptionAttribute[] attributes =
            (DescriptionAttribute[])fi.GetCustomAttributes(
            typeof(DescriptionAttribute),
            false);

        if (attributes.Length > 0)
            return attributes[0].Description;
        else
            return value.ToString();
    }
} 
```

您可以使用这样的装饰枚举来获得所需的内容：

```
public int Option(string arg)
{
  // get the matching enum for the "/t:" switch here.
  var foundItem = 
      EnumHelper.list_of_t.SingleOrDefault(c => c.GetEnumDescription() == arg);

  if (foundItem != null)
  {
    return (int)foundItem;  // <<-- this will return 0, 1000, or 2000 in this example.
  }
  else
  {
    return 0;
  }
} 
```

HTH...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:44:10.183

代码：

```
enum YourEnum
{
    Min,
    Med,
    Max
};

void Main(string[] args)
{
    var arg0 = args[0]; // "/t:Min"
    var arg0arr = arg0.Split(':') // { "/t", "Min" }
    var arg0val = arg0arr[1]; // "Min"
    var e = Enum.Parse(typeof(YourEnum), arg0val);
} 
```

呼叫应用程序：

```
app.exe /t:Min 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:51:39.493

如果我错了，请纠正我，但不是最简单的方法只是制作一个以 arg 作为键和时间作为值的字典，并使用 .TryGetValue() 如果失败只返回 0？

像这样： arguments.Add 可能发生在构造函数中，不需要在方法中。

```
 private static Dictionary<string, int> arguments = new Dictionary<string, int>(5);

    public int Option(string arg)
    {
        arguments.Add("Max", 0);
        arguments.Add("Med", 1000);
        arguments.Add("Min", 2000);

        int value;
        if (arguments.TryGetValue(arg.Replace("/:", string.Empty), out value))
            return value;
        //default
        return 0;
    } 
```

# java - 致命异常：主要，但 Eclipse 没有显示任何错误

> ID：11778570
> 
> 赞同：0
> 
> 时间：2012-08-02T13:35:00.523
> 
> 标签：java, android

这是我的问题，我在代码中添加了一些 log.i，甚至在最后，它们都打印在 logCat 中，这意味着它一直持续到最后，但一些错误不断出现......

感谢您的帮助！

日志：

```
08-02 13:14:11.030: I/Process(1817): Sending signal. PID: 1817 SIG: 9
08-02 13:15:36.670: D/dalvikvm(1854): GC_FOR_ALLOC freed 36K, 4% free 6347K/6595K, paused 60ms
08-02 13:15:36.790: I/dalvikvm-heap(1854): Grow heap (frag case) to 12.983MB for 7056016-byte allocation
08-02 13:15:36.880: D/dalvikvm(1854): GC_FOR_ALLOC freed <1K, 3% free 13237K/13511K, paused 60ms
08-02 13:15:37.020: D/dalvikvm(1854): GC_CONCURRENT freed <1K, 3% free 13237K/13511K, paused 4ms+3ms
08-02 13:15:38.940: D/dalvikvm(1854): GC_CONCURRENT freed 3K, 1% free 15246K/15367K, paused 3ms+3ms
08-02 13:15:41.521: D/dalvikvm(1854): GC_FOR_ALLOC freed 28K, 1% free 15555K/15687K, paused 59ms
08-02 13:15:41.551: I/dalvikvm-heap(1854): Grow heap (frag case) to 17.630MB for 2499884-byte allocation
08-02 13:15:41.701: D/dalvikvm(1854): GC_FOR_ALLOC freed <1K, 2% free 17996K/18183K, paused 59ms
08-02 13:15:41.851: D/dalvikvm(1854): GC_CONCURRENT freed <1K, 2% free 17996K/18183K, paused 6ms+3ms
08-02 13:15:42.712: I/log_tag(1854): ID_ville: 3, Nom_ville: Lyon
08-02 13:15:42.712: I/log_tag(1854): ID_ville: 10, Nom_ville: Lille
08-02 13:15:42.712: I/test tableau(1854): Lyon
08-02 13:15:42.720: I/test 2 tableau(1854): Lille
08-02 13:15:42.750: D/AndroidRuntime(1854): Shutting down VM
08-02 13:15:42.750: W/dalvikvm(1854): threadid=1: thread exiting with uncaught exception (group=0x40014760)
08-02 13:15:42.781: E/AndroidRuntime(1854): FATAL EXCEPTION: main
08-02 13:15:42.781: E/AndroidRuntime(1854): java.lang.NullPointerException
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:398)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:366)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.AbsListView.obtainView(AbsListView.java:1949)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1228)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.ListView.onMeasure(ListView.java:1139)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.View.measure(View.java:10828)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.View.measure(View.java:10828)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.View.measure(View.java:10828)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:764)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:519)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.View.measure(View.java:10828)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:1889)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.View.measure(View.java:10828)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.ViewRoot.performTraversals(ViewRoot.java:938)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.view.ViewRoot.handleMessage(ViewRoot.java:2040)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.os.Looper.loop(Looper.java:132)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at android.app.ActivityThread.main(ActivityThread.java:4123)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at java.lang.reflect.Method.invokeNative(Native Method)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at java.lang.reflect.Method.invoke(Method.java:491)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-02 13:15:42.781: E/AndroidRuntime(1854):     at dalvik.system.NativeStart.main(Native Method)
08-02 13:16:04.090: I/Process(1854): Sending signal. PID: 1854 SIG: 9 
```

编码：

```
import android.os.Bundle;
import android.app.Activity;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;  
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainClient extends Activity {
TextView txt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_client);
    String[] listeStrings = new String[999];
    listeStrings = getServerData(strURL);
    ListView lvListe = (ListView)findViewById(R.id.ClientList);
    Log.i("test tableau", listeStrings[0]);
    lvListe.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,listeStrings)); 
    Log.i("test 2 tableau", listeStrings[1]);
}

public static final String strURL = "http://www.kogitus.com/test/ville.php";

private String[] getServerData(String returnString) {
    InputStream is = null;
    String result = "";
    String[] listeStrings = new String[999];
    // Envoyer la requÃªte au script PHP.
    // Script PHP : $sql=mysql_query("select * from tblVille where Nom_ville like '".$_REQUEST['ville']."%'");
    // $_REQUEST['ville'] sera remplacÃ© par L dans notre exemple.
    // Ce qui veut dire que la requÃªte enverra les villes commenÃ§ant par la lettre L
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("ville","L"));

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(strURL);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    try{
        JSONArray jArray = new JSONArray(result);
        returnString = "";
        for(int i=0;i<jArray.length();i++){
            JSONObject json_data = jArray.getJSONObject(i);
            // Affichage ID_ville et Nom_ville dans le LogCat
            Log.i("log_tag","ID_ville: "+json_data.getInt("ID_ville")+
                    ", Nom_ville: "+json_data.getString("Nom_ville"));
            listeStrings[i] = json_data.getString("Nom_ville");
            // RÃ©sultats de la requÃªte
            //if (returnString == "")
                //returnString += json_data.getString("Nom_ville"); 
            //else
                //returnString += "\n" + jArray.getJSONObject(i);
        }
    }catch(JSONException e){
        Log.e("log_tag", "Error parsing data " + e.toString());
    }
    return listeStrings;
} 
```

}

他的 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/wallpaper" >

<ImageView
    android:id="@+id/BottomBar"
    android:layout_width="fill_parent"
    android:layout_height="80dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:scaleType="fitXY"
    android:src="@drawable/bottombar" />

<ImageView
    android:id="@+id/MenuClient"
    android:layout_width="453dp"
    android:layout_height="620dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY"
    android:src="@drawable/menuclient" />

<ImageView
    android:id="@+id/RightBar"
    android:layout_width="160dp"
    android:layout_height="620dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY"
    android:src="@drawable/rightbar" />

<Button
    android:id="@+id/BoutonBills"
    style="@android:style/Animation.Activity"
    android:layout_width="152dp"
    android:layout_height="129dp"
    android:layout_marginTop="480dp"
    android:layout_alignParentRight="true"
    android:background="@drawable/bills" />

<Button
    android:id="@+id/BoutonProviders"
    style="@android:style/Animation.Activity"
    android:layout_width="152dp"
    android:layout_height="129dp"
    android:layout_marginTop="360dp"
    android:layout_alignParentRight="true"
    android:background="@drawable/providers" />

<Button
    android:id="@+id/BoutonPieces"
    style="@android:style/Animation.Activity"
    android:layout_width="152dp"
    android:layout_height="129dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="120dp"
    android:background="@drawable/pieces" />

<Button
    android:id="@+id/BoutonTrucks"
    style="@android:style/Animation.Activity"
    android:layout_width="152dp"
    android:layout_height="129dp"
    android:layout_alignParentRight="true"
    android:layout_marginTop="240dp"       
    android:background="@drawable/trucks" />

<ListView
    android:id="@+id/ClientList"
    android:layout_width="453dp"
    android:layout_height="600dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:44:02.960

您的代码中有一个 java.lang.NullPointerException。确保您不访问任何未初始化的对象。

方法：

```
Object myObj; 
myObj.doSomething(); 
```

将引发 java.lang.NullPointerException

你需要这个订单：

```
Object myObj;
myObj = new Object(); 
myObj.doSomething(); 
```

没有代码，我不知道发生在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:35:07.053

你声明你的列表数组是这样的：

```
String[] listeStrings = new String[999]; 
```

然后你像这样检索服务器数据：

```
listeStrings = getServerData(strURL); 
```

我的问题是：您确定在检索服务器数据后该列表正好包含 999 个元素吗？

我假设`getServerData()`返回的元素少于 999。在这种情况下，当`listeString`您`ArrayAdapter`将将为空，导致`NullPointerException`.

解决方案是为您的字符串数组分配与 JSON 数组返回的元素一样多的位置。
但是，我建议使用`ArrayList`而不是`String[]`数组，它们是动态分配的。

# c# - 在 ASP.NET 网站中保持应用程序状态

> ID：11778577
> 
> 赞同：2
> 
> 时间：2012-08-02T13:35:25.110
> 
> 标签：c#, asp.net, application-state

我在应用程序状态下为我的 ASP.NET 网站存储了一些网站设置。我还在`Application_Start()`方法中初始化了状态。特定用户可以更改这些设置，但一段时间后，这些设置将恢复为在`Application_Start()`方法中初始化时使用的值，即使服务器一直在运行。

知道为什么会这样吗？如果在特定时间段内没有收到任何请求，应用程序是否会关闭？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:37:29.337

> 如果在特定时间段内没有收到任何请求，应用程序是否会关闭？

是的，默认情况下，应用程序池将在一段时间不活动后关闭。有关更多信息，请参阅[应用程序池可能意外回收的常见原因](http://blogs.msdn.com/b/johan/archive/2007/05/16/common-reasons-why-your-application-pool-may-unexpectedly-recycle.aspx)。

如果您需要跨应用程序池回收事件保持状态，您应该将您的状态保存在数据库或 App_Data 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:38:52.283

应用程序状态存储在网络服务器的内存中。用户所做的更改将丢失，因为应用程序池已回收，因此应用程序变量数据已丢失。

对 web.config / global.asax 的任何更改也将重新启动应用程序。

如果您想保留用户所做的这些更改，您可能需要将其存储到持久性介质（数据库）中，并在应用程序启动时从那里加载。

此[链接](http://msdn.microsoft.com/en-us/library/ms178594.aspx)为您提供有关应用程序状态的更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T13:40:33.060

是的，在一段时间不活动后，应用程序池将关闭。如果你需要一些变量来维持生命，你应该考虑将它们放在 web.config 或数据库中，这样会更安全，更合乎逻辑。

# wordpress - Wordpress 标题、特定字体和破折号

> ID：11778584
> 
> 赞同：0
> 
> 时间：2012-08-02T13:35:40.840
> 
> 标签：wordpress, font-face, custom-post-type, title

我在 Wordpress 中遇到了一个我以前从未遇到过的问题。

我在自定义帖子类型帖子上有一个标题，其标题包含破折号 (-)。此标题具有使用 font-face 实现的特定字体，并且一切正常。除了破折号字符。当我发布标题时`the_title();`，`echo get_the_title();`或者`single_post_title();`它显示的标题不带破折号 (-)。

即使使用破折号和其他字符，该字体也可以在其他任何地方完美运行。该问题仅发生在帖子标题和此特定字体上。

当然，我可以只使用另一种字体，但客户真的想使用这种字体。我很好奇找到这种奇怪行为的原因。

有没有其他人经历过这个或知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:24:18.260

您想为破折号字符使用特定字体吗？破折号就是破折号，您的字体文件没有那个特定的字形，因此您可以将破折​​号包装在跨度标记中，并通过 CSS 将不同的字体应用于该跨度。

好吧，这就是我会做的，客户不会知道其中的区别！

# ruby-on-rails-3.2 - Ruby on Rails：通过“link_to”将 id 从视图传递到控制器

> ID：11778601
> 
> 赞同：1
> 
> 时间：2012-08-02T13:36:38.433
> 
> 标签：ruby-on-rails-3.2

在“索引”视图（没有 form_for）中，我有一个 link_to 行，我想在其中将 id 传递给控制器​​以用于多步表单：

```
<%= link_to user.username, useredit_steps_path(:id => user.id)  %> 
```

我尝试使用以下行在控制器中读取此“id”：

```
@user = User.find_by_id(params[:id]) 
```

但是，我总是将“0”作为一个值来检索——这是错误的。

我做错了什么？

更准确地说：

对不起，这没有帮助。

这是我的 routes.rb 文件 FISneo::Application.routes.draw 做资源：useredit_steps

```
resources :age_classes
resources :member_statuses
resources :flights
resources :aircrafts
resources :aircraft_classes
resources :takeoff_types

get "password_resets/new"
get "sessions/new"
get "users/new"

get "log_out" => "sessions#destroy", :as => "log_out"
get "log_in" => "sessions#new", :as => "log_in"
get "sign_up" => "users#new", :as => "sign_up"

resources :sessions
resources :password_resets

resources :users
resources :flight_types

root :to => "sessions#new"
end 
```

网址是：“.......:3000/useredit_steps.3”

这里“3”是一个用户的 id...

提前致谢，德克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T03:57:13.090

来自 Wicked 自述文件：

> 注意：Wicked 使用 :id 参数来控制步骤的流程

换句话说，您不能将任何内容传递给会覆盖 :id 参数的路由辅助方法，这就是您在上面所做的。尝试对键使用不同的符号，它需要在作为第二个参数传递的哈希中（您需要将第一个向导步骤的 id 作为第一个参数传递，以便在第二个参数中提供选项哈希）。IE

```
<%= link_to user.username, useredit_steps_path(:first_step, :user_id => user.id)  %> 
```

其中 :first_step 被替换为 steps 数组的第一个元素

然后在控制器中，用

```
@user = User.find_by_id(params[:user_id]) 
```

抱歉，这个月前我无法看到并回答，只是发现了在类似问题上搜索的问题。认为值得为可能登陆这里的其他人发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:43:22.133

```
<%= link_to user.username, useredit_step_path(user.id)  %> 
```

`useredit_step_path`如果要显示特定用户，则为单数，而不是复数。

# iphone - 字典中的反序列化会产生额外的空数据

> ID：11778603
> 
> 赞同：1
> 
> 时间：2012-08-02T13:36:43.470
> 
> 标签：iphone, ios5, nsdictionary, sudzc

我正在使用 SUDZC 连接到 Web 服务。原始代码不断覆盖响应的值。我将代码修改为：

```
// Deserializes the element in a dictionary.
+(id)deserializeAsDictionary:(CXMLNode*)element {

if([element childCount] == 1) {
    CXMLNode* child = [[element children] objectAtIndex:0];
    if([child kind] == CXMLTextKind)
    {
        // NSLog(@"returnED:%@",[[[element children] objectAtIndex:0] stringValue]);
        return [[[element children] objectAtIndex:0] stringValue];

    }
}

NSMutableDictionary* d = [NSMutableDictionary dictionary];
for(CXMLNode* child in [element children]) {
    id v = [Soap deserialize:child];
    if(v == nil) { v = [NSNull null]; }

    [d setObject:v forKey:[child name]];
    // code added from greg to fix dictionary over writting
    NSString* key = [child name];

    id check = [d objectForKey:key];
    if( check != nil ) {

        NSInteger next = 1;
        key = [NSString stringWithFormat:@"%@%d", [child name], next];
        check = [d objectForKey:key];
        while( check != nil ) {

            next++;
            key = [NSString stringWithFormat:@"%@%d", [child name], next];
            check = [d objectForKey:key];

        }
        [d setObject:v forKey:key];

    }
}

return d;
} 
```

现在，我收到一堆空值以及我的预期值：

```
2012-08-02 08:25:22.848 Management[13416:707] TC Keys: {
GetCashiersResult =     {
    diffgram =         {
        NewDataSet =             {
            TC =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
            TC1 =                 {
                "CSHR_NUM" = 999;
                "CSHR_NUM1" = 999;
                "CSHR_POS_NAME" = "Apple Tester";
                "CSHR_POS_NAME1" = "Apple Tester";
            };
            TC2 =                 {
                "CSHR_NUM" = 8;
                "CSHR_NUM1" = 8;
                "CSHR_POS_NAME" = Jonathan;
                "CSHR_POS_NAME1" = Jonathan;
            };
            TC3 =                 {
                "CSHR_NUM" = 54;
                "CSHR_NUM1" = 54;
                "CSHR_POS_NAME" = LEXIE;
                "CSHR_POS_NAME1" = LEXIE;
            };
            TC4 =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
        };
        NewDataSet1 =             {
            TC =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
            TC1 =                 {
                "CSHR_NUM" = 999;
                "CSHR_NUM1" = 999;
                "CSHR_POS_NAME" = "Apple Tester";
                "CSHR_POS_NAME1" = "Apple Tester";
            };
            TC2 =                 {
                "CSHR_NUM" = 8;
                "CSHR_NUM1" = 8;
                "CSHR_POS_NAME" = Jonathan;
                "CSHR_POS_NAME1" = Jonathan;
            };
            TC3 =                 {
                "CSHR_NUM" = 54;
                "CSHR_NUM1" = 54;
                "CSHR_POS_NAME" = LEXIE;
                "CSHR_POS_NAME1" = LEXIE;
            };
            TC4 =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
        };
    };
    diffgram1 =         {
        NewDataSet =             {
            TC =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
            TC1 =                 {
                "CSHR_NUM" = 999;
                "CSHR_NUM1" = 999;
                "CSHR_POS_NAME" = "Apple Tester";
                "CSHR_POS_NAME1" = "Apple Tester";
            };
            TC2 =                 {
                "CSHR_NUM" = 8;
                "CSHR_NUM1" = 8;
                "CSHR_POS_NAME" = Jonathan;
                "CSHR_POS_NAME1" = Jonathan;
            };
            TC3 =                 {
                "CSHR_NUM" = 54;
                "CSHR_NUM1" = 54;
                "CSHR_POS_NAME" = LEXIE;
                "CSHR_POS_NAME1" = LEXIE;
            };
            TC4 =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
        };
        NewDataSet1 =             {
            TC =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
            TC1 =                 {
                "CSHR_NUM" = 999;
                "CSHR_NUM1" = 999;
                "CSHR_POS_NAME" = "Apple Tester";
                "CSHR_POS_NAME1" = "Apple Tester";
            };
            TC2 =                 {
                "CSHR_NUM" = 8;
                "CSHR_NUM1" = 8;
                "CSHR_POS_NAME" = Jonathan;
                "CSHR_POS_NAME1" = Jonathan;
            };
            TC3 =                 {
                "CSHR_NUM" = 54;
                "CSHR_NUM1" = 54;
                "CSHR_POS_NAME" = LEXIE;
                "CSHR_POS_NAME1" = LEXIE;
            };
            TC4 =                 {
                "CSHR_NUM" = 7;
                "CSHR_NUM1" = 7;
                "CSHR_POS_NAME" = Randy;
                "CSHR_POS_NAME1" = Randy;
            };
        };
    };
    schema =         {
        element =             {
            complexType =                 {
                choice =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
                choice1 =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
            };
            complexType1 =                 {
                choice =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
                choice1 =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
            };
        };
        element1 =             {
            complexType =                 {
                choice =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
                choice1 =                     {
                    element =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };

                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                    element1 =                         {
                        complexType =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                        complexType1 =                             {
                            sequence =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                            sequence1 =                                 {
                                element = 0;
                                element1 = "<null>";
                                element2 = 0;
                            };
                        };
                    };
                };
            };
        };
    }; 
```

我无法阻止它多次提取数据，并提取所有 ? 当孩子不是1时，代码不应该停止吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:16:08.620

元素必须放在调用[d setObject:v forKey:[child name]]之上；并且必须添加 else 以便 d 不会被覆盖。

```
if( check != nil ) {              
NSInteger next = 1;              
key = [NSString stringWithFormat:@"%@%04d", [child name], next]; 
check = [d objectForKey:key];  
while( check != nil ) {                  
    next++;  
    key = [NSString stringWithFormat:@"%@%04d", [child name], next];  
    check = [d objectForKey:key];  
}  
[d setObject:v forKey:key];  
} else { 
[d setObject:v forKey:[child name]]; 
} 
```

否则 'd' 中的元素将被覆盖，因为 setObject 被调用了两次。

# drupal - Creating a custom block without using the Drupal 7 block hooks

> ID：11778604
> 
> 赞同：0
> 
> 时间：2012-08-02T13:36:43.643
> 
> 标签：drupal

Just wanted to know if it's possible to create a custom block in Drupal 7 without using the block hooks hook_block_info() or hook_block_configure() etc.

My requirement is adding dynamic blocks to the Drupal system.

Thanks in advance...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:58:21.803

我不确定创建“动态”块是什么意思，但是在不编写模块的情况下创建块的两种方法是

1.  转到管理/结构/块并单击“添加块”并在那里手动创建一个......如果您在您的站点上启用“Php 过滤器”模块，您甚至可以拥有一个包含 php 代码的块。
2.  您可以创建一个块视图。转到 admin/structure/views/add 并添加一个带有块显示的视图。不确定您是否熟悉[Views 模块](http://drupal.org/project/views/)，但这是人们创建作为节点内容列表的块的另一种方式，但也可能只包含文本等。

这是否回答你的问题？

=================== 编辑======================

如果您尝试以编程方式执行此操作，请查看 block 模块是如何做到的！在 Drupal 7 中，这将是modules/block/block.admin.inc 中的**block_add_block_form_submit()**函数。这是当您通过上面#1 中的管理表单创建块时处理表单的函数。您可以使用该代码创建任意数量的块。请注意，它只是将所有必要的信息放入数据库中，而不调用任何其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:56:21.223

好的，我实际上是在寻找动态创建一个块。如果将来有人需要这个帖子，这里的帖子可能会有用：http: [//drupal.org/node/1709954](http://drupal.org/node/1709954)

# java - maven 和 red5 依赖

> ID：11778605
> 
> 赞同：0
> 
> 时间：2012-08-02T13:36:50.490
> 
> 标签：java, maven-3, red5

我有一个大的 red5 java 项目，我正试图将其划分为模块。

我决定使用 maven 来完成这项任务，

创建了一个大型 maven web 项目和几个 maven 项目（不是 web），我在每个项目中添加了所需的类。

我在特定位置安装了 red5。

它的`lib`目录包含我需要的相关库，以便正确编译我的项目。

我想在主项目的 pom.xml 中添加一个依赖项，以在 red5 location/lib 目录中添加所有 jar，但仅用于编译时。

这意味着我不需要将它们打包在 jar 中，因为它们将在执行它们的 red5 环境中可用。

我该如何配置这样的东西？

谢谢！

克菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:34:34.637

最好的办法是在您的存储库管理器中部署这些依赖项，并在您的 Maven 构建中将它们用作通常的依赖项。在您的特定情况下，您应该使用提供的范围定义它们，因为您描述它们将仅用于编译，但将由环境提供。

# android - Android "speak failed: not bound to tts engine"

> ID：11778606
> 
> 赞同：20
> 
> 时间：2012-08-02T13:36:49.970
> 
> 标签：android, text-to-speech

My android application has text to speak feature and more then one activity uses this feature. So created a static helper class to made this easy.

```
import java.util.Locale;

import android.content.Context;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.util.Log;

public class TextToSpeechController implements OnInitListener {

    private static final String TAG = "TextToSpeechController";
    private TextToSpeech myTTS;
    private String textToSpeak;
    private Context context;

    private static TextToSpeechController singleton;

    public static TextToSpeechController getInstance(Context ctx) {
        if (singleton == null)
            singleton = new TextToSpeechController(ctx);
        return singleton;
    }

    private TextToSpeechController(Context ctx) {
        context = ctx;
    }

    public void speak(String text) {
        textToSpeak = text;

        if (myTTS == null) {
            // currently can't change Locale until speech ends
            try {
                // Initialize text-to-speech. This is an asynchronous operation.
                // The OnInitListener (second argument) is called after
                // initialization completes.
                myTTS = new TextToSpeech(context, this);

            } catch (Exception e) {             
                e.printStackTrace();
            }
        }

        sayText();

    }

    public void onInit(int initStatus) {
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.UK) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.UK);
        }

        // status can be either TextToSpeech.SUCCESS or TextToSpeech.ERROR.
        if (initStatus == TextToSpeech.SUCCESS) {
            int result = myTTS.setLanguage(Locale.UK);
            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e(TAG, "TTS missing or not supported (" + result + ")");
                // Language data is missing or the language is not supported.
                // showError(R.string.tts_lang_not_available);

            } else {
                // Initialization failed.
                Log.e(TAG, "Error occured");
            }

        }
    }

    private void sayText() {
        // ask TTs to say the text
        myTTS.speak(this.textToSpeak, TextToSpeech.QUEUE_FLUSH,     null);
    }

    public void stopTTS() {
        if (myTTS != null) {
            myTTS.shutdown();
            myTTS.stop();
            myTTS = null;
        }
    }

} 
```

I am using this helper class like this.

```
TextToSpeechController.getInstance(this).speak(readableMessage); 
```

But sometimes i see an error like line beloew at LogCat.

```
"speak:failed not bound to tts engine" 
```

No exception thrown but nothing readed by TTS. I realized that if i triggered activity from BroadcastReceiver, i got this error. Otherwise if manually open activity from application code works with no problem.

Here is the BroadcastReceiver code

```
private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);            
        String readableMessage = intent.getExtras().getString(READABLE_MESSAGE);    

        Bundle b = new Bundle();
        b.putString(EXTRA_MESSAGE, newMessage);
        b.putString(READABLE_MESSAGE, readableMessage);
        Intent newIntent = new Intent("android.intent.action.MAIN");
        newIntent.setClass(context, Speak.class);
        newIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        newIntent.putExtra("MessageReceived", b);
        newIntent.putExtra("CallType", CallType.NOTIFICATION);
        context.startActivity(newIntent);           
    }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T13:56:46.387

您的代码不等待 TextToSpeech 类的构造函数的异步返回。你甚至有一条评论说它是异步的。为什么它总是在接收器中失败而不是在我不确定的活动中失败-除此之外，作为前台任务的活动可能具有更高的优先级，并且它恰好在您调用 sayText 之前完成。

如果它必须新建一个新的 TTS 对象，您需要等待调用 sayText 直到 init 调用返回。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T17:06:02.333

这是我用于文本到语音的代码。对于我的代码，只需键入 speakWords("say something"); 在任何活动中。

```
public class VoiceRecognition extends Activity implements OnClickListener,
        OnInitListener {

    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    public Button speakButton;
    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    /**
     * Called with the activity is first created.
     */
    @Override
    public void onCreate(Bundle voiceinput) {
        super.onCreate(voiceinput);

        // Inflate our UI from its XML layout description.
        setContentView(R.layout.voice_recognition);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

    }

    // speak the user text
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    public void onClick(View v) {
        speakWords("hello";
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        super.onActivityResult(requestCode, resultCode, data);

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        myTTS.shutdown();
    } 
```

# c# - c# proxy class for test and production web service

> ID：11778610
> 
> 赞同：3
> 
> 时间：2012-08-02T13:36:53.333
> 
> 标签：c#, visual-studio-2010, web-services, wsdl, proxy-classes

I use the generated webservice proxy classes from visual studio 2010 to access a web service from my .net 2.0 client.

This works all fine, but my problem is, that the webservice has a wsdl for the testsystem and a wsdl for the production system.

While the webservices are structurally completely identical, their xml namespaces are not.

In my code, I can set the service URL of the webservice and the communication works (I use a TraceExtension to dump the SOAP messages to log files), but when it comes to deserialization, I get an exception.

I think this is because I generated the proxy classes with the WSDL file from the test system and this added several attributes like this: [System.Xml.Serialization.SoapTypeAttribute(Namespace="testservice url here")]

I could of course copy my project and add a webreference to the production service, but this would duplicate my code and I would have to make any further changes in future in two project, which is error prone of course.

Here is a working response for calling the Login-method against the test system service:

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://TEST_SERVER_NAME/ProjectService">
    <SOAP-ENV:Body>
        <ns1:loginResponse xmlns:ns1="http://TEST_SERVER_NAME/ProjectService">
            <login_result xsi:type="tns:LoginResult">
                <errorcode xsi:type="xsd:integer">0</errorcode>
                <errortext xsi:type="xsd:string">Successfully logged in</errortext>
                <logincode xsi:type="xsd:string">wF3N5vdPsueL0aYlp41i6B8VTZEJztqx</logincode>
            </login_result>
        </ns1:loginResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

here is the same response from the production webservice:

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://PRODUCTION_SERVER_NAME/ProjectService">
    <SOAP-ENV:Body>
        <ns1:loginResponse xmlns:ns1="http://TEST_SERVER_NAME/ProjectService">
            <login_result xsi:type="tns:LoginResult">
                <errorcode xsi:type="xsd:integer">0</errorcode>
                <errortext xsi:type="xsd:string">Successfully logged in</errortext>
                <logincode xsi:type="xsd:string">wOmdlZMkIXVL4H8uTGU69hgpNsK1Cz3Q</logincode>
            </login_result>
        </ns1:loginResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

As you can see, the two responses only differ in the xmlns:tns attribute, while the xmlns:ns1 attribute is always `http://TEST_SERVER_NAME/ProjectService` (I guess this is coming from the generated proxy class with the WSDL of the test system). The logincode is only an authentication token and will always be different, so that's ok.

Is there any other solution to this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T16:29:12.810

派对真的迟到了，但我使用预处理器指令来解决这个问题：

```
#define SANDBOX //Change from sandbox to production to switch between both systems.

#if SANDBOX
    using NetSuite.com.netsuite.sandbox.webservices;
#endif

#if PRODUCTION
    using NetSuite.com.netsuite.webservices;
#endif 
```

确保将这两个引用作为 Web 引用添加到您的项目中，并将您的更改`SANDBOX`为`PRODUCTION`以使用生产 Web 服务和`SANDBOX`沙箱。

这可能不是最优雅的解决方案，但它又快又脏，完全符合我的需要。

# c# - if里面的初始化变量

> ID：11778614
> 
> 赞同：2
> 
> 时间：2012-08-02T13:37:05.123
> 
> 标签：c#, variables, initialization

嗨，我们不能像这样在 c# 变量中定义

```
if((var input = db.table.FirstOrDefault()) != null)
{
   // and here I could use my 'input' variable
} 
```

但我可以这样做

```
for(var input = db.table.FirstOrDefault(); input != null; input = null)
{
  //opeartion

} 
```

谁能告诉我为什么？如果我们可以使用 if 来做到这一点，那不是很好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:40:50.177

因为这会导致众所周知的难以追踪的错误：

```
if (var t = true) {}

bool t;
if (t = true) {}

bool t;
if (t == true) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:43:23.827

至于为什么，这是因为`input = db.table.FirstOrDefault()`是一个**声明**，实际上并没有返回任何东西。它为变量**分配**了一些东西。`input`因为它不返回任何东西（即它是一个语句），所以你不能将它与其他东西进行比较。

`if`期望一个**表达式**（**返回**一些东西的东西）。这里有更多关于[statements 和 expressions 之间的区别](https://stackoverflow.com/questions/19132/expression-versus-statement)。

这与 C 不同，其中（如果我没记错的话）所有值为 0 的 if`false`和其他所有内容都是`true`.

至于您可以使用 C# 获得的最接近的结果，我相信您可以执行以下操作：

```
MyClass input = null;
if ((input = db.table.FirstOrDefault()) != null)
{
    // use input here
} 
```

但是你也可以这样做：

```
MyClass input = db.table.FirstOrDefault();
if (input != null)
{
    // use input here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T13:45:05.920

这是因为写

```
object input = db.table.FirstOrDefault(); 
```

和写作一模一样

```
object input; 
input = db.table.FirstOrDefault(); 
```

根据 C# 规范。

这意味着*没有任何返回值*，因此无需检查`!=null`。

是的，我认为可以欺骗这一点，在编译器中进行一些更改，但可能不值得努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:44:41.610

在 for 循环中，您为迭代定义索引变量。你可以这样写：

```
var i = 0;
for (; i < x; ++i)
{
    // Some code;
} 
```

但在这种情况下，`i`变量将存在于迭代之外，因此`for`循环创建具有迭代范围的变量。在一个`if`你不需要额外的变量来工作。

# backbone.js - 骨干木偶事件.EventAggregator和测试

> ID：11778623
> 
> 赞同：0
> 
> 时间：2012-08-02T13:37:23.970
> 
> 标签：backbone.js, marionette

我的测试有时间问题。我正在使用事件聚合器来引发事件，问题是我的规范在代码到达引发的事件之前完成。我需要在事件代码运行后运行规范。

例如，我正在创建一个布局，然后引发一个事件：

```
 DocumentManager.addInitializer(function(){
    DocumentManager.layout = new Layout();

    DocumentManager.layout.on("show", function(){
      DocumentManager.vent.trigger("layout:rendered");
    });

    DocumentManager.content.show(DocumentManager.layout)
  }); 
```

然后在创建布局后创建另一个视图：

```
 DocumentManager.vent.on("layout:rendered", function(){
    Documents.folders = new Documents.Folders();

    Documents.folders.reset(window._rootFolder);    

    Documents.treeRoot = new Documents.TreeRoot({
      collection: Documents.folders
    });

    DocumentManager.layout.treeView.show(Documents.treeRoot);

    DocumentManager.vent.trigger("folder:added");
  }); 
```

问题是我的规范在运行此代码之前完成：

```
describe 'battlebox', ->
  describe 'versioned documents', ->
    describe 'empty root and no files', ->
      beforeEach ->
        loadFixtures "battlebox.html"
        DocumentManager.start()
        window._rootFolder = Test.Factory.BattleBox.emptyRoot()

      it "should create a root folder", ->
        expect(DocumentManager.Documents.folders.length).toEqual 1 
```

我的选择是要么从测试中触发事件，要么将代码从“layout:rendered”事件处理程序中重构为我“设置”并从我的测试中调用的方法。

我很好奇是否有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:44:21.053

我使用两种类型的异步检查：

*   checkDeferred 承诺 - [https://gist.github.com/3145434](https://gist.github.com/3145434)
*   事件的 eventTriggeredOn - [https://gist.github.com/3251500](https://gist.github.com/3251500)

您的规格示例：

```
describe 'battlebox', ->
  describe 'versioned documents', ->
    describe 'empty root and no files', ->
      beforeEach ->
        loadFixtures "battlebox.html"

      it "should create a root folder", ->
        # Expect event 'layout:rendered' to be triggered
        TestHelpers.eventTriggeredOn DocumentManager.vent, 'layout:rendered', =>
          expect(DocumentManager.Documents.folders.length).toEqual 1

        # Async bit
        DocumentManager.start()
        window._rootFolder = Test.Factory.BattleBox.emptyRoot() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T12:15:58.550

如果在完成`it`之前正在运行`beforeEach`，那么您的设置中有一些异步运行的代码。您必须使用 Jasmine 的异步功能才能完成这项工作。[https://github.com/pivotal/jasmine/wiki/Asynchronous-specs](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)

此外 - 您可能希望将您的测试分成更小的部分。由于您有一个触发事件以促进文件夹的呈现，因此在此处拆分测试。进行一项测试表明初始化程序正确设置了布局。然后进行另一个测试，显示文件夹正在正确呈现。您可以通过在测试中直接触发“layout:rendered”事件来进行第二次测试。

# c++ - 选择具有不同概率的事件 - C++

> ID：11778626
> 
> 赞同：0
> 
> 时间：2012-08-02T13:37:28.080
> 
> 标签：c++, random

我必须运行一个模拟，其中每个事件 E_i 都有一定的概率 P_i 发生（i=1..4，sum_i P_i = 1）。

我想编写一个函数，将四个不同的概率（它们取决于我的模拟中发生的其他事情）作为输入，返回所选事件的整数 i。

哪个是编写这样一个函数的最佳方法（可能只使用标准库，我必须在我没有添加新库的权限的集群上运行它）？

我想写一些类似的东西：

```
int get_event(double p1,double p2, double p3, double p4){
    double r=((double) rand())/(RAND_MAX); // alternatively here there can be any function that
    // generates a random number uniformly distribute in (0,1);
    if (r<=p1) return 1;
    else if (r>p1 && r <=(p1+p2)) return 2;
    else if (r>(p1+p2) && r <=(p1+p2+p3)) return 3;
    else if (r>(p1+p2+p3) && r <=1) return 4;
    else return -1; // -1 is an en error code;
} 
```

但我不确定这是否是最好的方法。有什么建议吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:43:36.127

这很好，我建议只做一些小的改动：

```
int get_event(double p1,double p2, double p3, double p4){
    double r=((double) rand())/(RAND_MAX);
    if (r<=p1) return 1;
    r-= p1;
    if (r<=p2) return 2;
    r-= p2;
    if (r<=p3) return 3;
    r-= p3;
    if (r<=p4) return 4;
    return -1; // -1 is an en error code;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T13:46:25.340

有一种方法可以在 O(1) 时间内工作。

[http://www.keithschwarz.com/darts-dice-coins/](http://www.keithschwarz.com/darts-dice-coins/)

[http://www.altdevblogaday.com/2012/04/04/simulating-a-loaded-dice-in-a-constant-time](http://www.altdevblogaday.com/2012/04/04/simulating-a-loaded-dice-in-a-constant-time)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T13:46:54.567

这是一个示例，您可以如何泛化您的代码，同时使其适用于更多的概率。我也将 eps 包括在比较中。

```
const double eps = 1e-9;
int get_event(double p[], int psize){
    double r=rand()/(RAND_MAX); // alternatively here there can be any function that
    // generates a random number uniformly distribute in (0,1);
    for (int i = 1; i <= psize; ++i) {
      r -= p[i-1];
      if (r < eps) {
        return i;
      }
    }
    return -1; // -1 is an en error code;
} 
```

# javascript - Cant get alert message before closing the browser in chrome

> ID：11778628
> 
> 赞同：0
> 
> 时间：2012-08-02T13:37:37.863
> 
> 标签：javascript, google-chrome, browser

Here is my JS code which will be executed when close the browser or the tab. Which will makes the user status as offline before closing the browser

```
function checkBrowser(){
   function warning(){
        if($('#loginOrNot').val() == 'loggedIn'){
          setTheExpertStatusToOffline();
          cleanUpChat();
          alert("You are leaving the page");
        }
   }
   window.onbeforeunload=warning;
} 
```

on documnet.ready() am calling checkBrowser() method, so that it will bind the function for browser close. Now the problem is this is `working perfectly fine in all browsers but not in Chrome`. Whats wrong in here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:03:00.710

您必须在函数末尾返回一个字符串。然后，浏览器将显示一个确认框，包括您的消息。

[http://jsfiddle.net/fxtBC/](http://jsfiddle.net/fxtBC/)

```
function warning(){
    if(true){
      console.log('leaving');
      return "You are leaving the page";
    }
}
window.onbeforeunload = warning;​ 
```

# java - How to use selenium.type if there are many labels with same notation?

> ID：11778630
> 
> 赞同：0
> 
> 时间：2012-08-02T13:37:40.617
> 
> 标签：java, selenium-rc

i'm working with Selenium RC and coding with Java , my problem is the selenium.type ,My screen contains many labels with the same notation so when i use the method :

```
 selenium.type("//span[text()=\""+remplace+"\"]/following-   sibling::input#form:blocConfigurations:configurations:0:parametrage:options:"+ind.get(ii)+"",configuration.getString(listTypMetier.get(il)))) 
```

even if the locator is not the same it always keeps typing in the same field.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:12:21.963

如果可以的话，我会尝试在您的标签/字段中添加一些 id 或类。如果您只想在输入字段中键入一些文本，那么该选择器看起来相当长且复杂。如果没有，您是否有任何理由按照您在问题中显示的方式进行操作？

# javascript - KnockoutJS - Update ViewModel / Mapping Plugin

> ID：11778631
> 
> 赞同：9
> 
> 时间：2012-08-02T13:37:46.997
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

## How can i update the complete viewModel ?

1.  On page load i get a Model and convert that using `ko.mapping.fromJS(myObject)` to a viewModel.
2.  If the user clicks a button i want to get updated data from the server
3.  Now i want to apply theese updates

If i use `ko.applyBindings(viewModel);` it updates the ui perfectly. But it adds the same events again. So if the user clicks the button, the event gets fired twice, third and so on.

## Question

### What is a good way to update my complete viewModel. Maybe i remove the bindings and apply them again ? (how to do this).

## Sample

```
var viewModel;

function update() 
{
    $.ajax({
        url: '...',
        type: "GET",
        statusCode: {
            200: function (data) {
                 viewModel = ko.mapping.fromJS(data);
                 ko.applyBindings(viewModel);
            }
        }
    });    
}

// first call after page load
update();

// user click
$("#myButton").click(function() {
    update(); 
}); 
```

## Update

> **Steve Greatrex** Could you post your custom binding implementation?

```
ko.bindingHandlers.domBinding = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        viewModel.domElement = element;
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        viewModel.domElement = element;
    },
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T13:43:46.663

如果您查看[映射文档](http://knockoutjs.com/documentation/plugins-mapping.html)中的“指定更新目标” ，您可以为映射指定一个目标。

这应该意味着你可以说：

```
if (!viewModel)
   viewModel = ko.mapping.fromJS(data);
else
   ko.mapping.fromJS(data, {}, viewModel); 
```

这样，您将在初始加载时创建一个视图模型，然后为任何后续加载更新该视图模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T17:27:23.403

使用映射插件我做到了

```
ko.mapping.fromJS(JsonResponse, myObservable()); 
```

就这样。

# php - PHP 正则表达式从非捕获组中提取内部内容

> ID：11778633
> 
> 赞同：1
> 
> 时间：2012-08-02T13:37:50.740
> 
> 标签：php, regex, performance

我正在从一个很长的 HTML 表格中解析信息；现在我使用的代码使用 DOMDocument、DOMElement (etc) 类进行解析。我想做一个性能测试，运行当前方法，反对正则表达式从表中提取信息，但我无法得到正确的表达式。

表格的 HTML 行如下所示：

```
<tr><td>   JON SMITH     </td><td> 2000-09-29 </td></tr> 
```

我一直在尝试的表达式看起来像这样：

```
/(?:<td>([a-zA-Z\s]*?)<\/td><td>([0-9-\s]*?)<\/td>)/ 
```

上述表达式的问题在于它返回整个行内容，而不仅仅是内列内容。理想情况下，preg_match_all 数组结果将是名称、日期、名称、日期等。

这是一个合理的做法，还是我应该坚持使用 DOM 技术？如果它是合理的，有人可以帮助正则表达式吗？

谢谢！

**编辑**：如果将来有人偶然发现这一点，RegEx 解决方案的性能要比使用 DOM 类好得多；在我的情况下，这是秒和分钟之间的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:51:56.973

我的解决方案：

第1步。搜索`<table>...</table>`：
`/<table[^>]*+>([^<]*+(?:(?!<\/?+table)<[^<]*+)*+)<\/table>/i`

第2步。`<tr>...</tr>`从 step1 group1 中搜索所有：
`/<tr[^>]*+>([^<]*+(?:(?!<\/?+tr)<[^<]*+)*+)<\/tr>/ix`

第三步。`<td>...</td>`从每个（来自 step2 group1）中提取数据：
`/<td[^>]*+>([^<]*+(?:(?!<\/?+td)<[^<]*+)*+)<\/td>/ix`

这些可怕的模式是指`Mastering Regular Expressions 3rd`

示例代码：

```
 <?php
$foo = '<tr><td>   JON SMITH     </td><td> 2000-09-29 </td></tr>';
if(preg_match_all('/<td[^>]*+>([^<]*+(?:(?!<\/?+td)<[^<]*+)*+)<\/td>/ix', $foo, $matches) > 0){
    for($i = 0; $i < count($matches[0]); ++$i)
        printf("%s\n", $matches[0][$i]);

    for($i = 0; $i < count($matches[1]); ++$i)
        printf("%s\n", $matches[1][$i]);
}
?> 
```

输出：

```
<td>   JON SMITH     </td>
<td> 2000-09-29 </td>
JON SMITH
2000-09-29 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:57:00.747

使用 preg_match_all() 并传递带有要填充的数组的第三个参数和第四个参数 PREG_SET_ORDER。

```
preg_match_all("/(?:<td>([a-zA-Z\s]*?)<\/td><td>([0-9-\s]*?)<\/td>)/", $html, $matches, PREG_SET_ORDER); 
```

结果数组应该是这样的：

```
$matches => array(
   [0] => array(
      [0] => '<td>   JON SMITH     </td><td> 2000-09-29 </td>',
      [1] => '   JON SMITH     ',
      [2] => ' 2000-09-29 '
   ),
   [1] => array(
      [0] => '<td>   JACK BOLD     </td><td> 2000-10-20 </td>',
      [1] => '   JACK BOLD     ',
      [2] => ' 2000-10-20 '
   ),
   ...
); 
```

请参阅[preg_match_all() 文档。](http://php.net/manual/en/function.preg-match-all.php)

# c# - .Net Socket blocking when sending to a Java socket

> ID：11778634
> 
> 赞同：2
> 
> 时间：2012-08-02T13:37:51.927
> 
> 标签：c#, java, .net, sockets

I have a simple Java Server Socket but when I connect to it with a C#.Net Socket and Send to the Java Socket it blocks and I have to shutdown the .Net socket send for it to stop blocking. This them means I have to close the socket after each communication. Where am i going wrong?

```
socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                IPEndPoint ip = new IPEndPoint(IPAddress.Parse(ipAddress.Text), 8089);
                socket.Connect(ip);
 byte[] b = Encoding.UTF8.GetBytes(json);
            socket.Send(b, b.Length, SocketFlags.None);
        socket.Shutdown(SocketShutdown.Send);
        int timeout = 0;
        while (socket.Available == 0)
        {
            Thread.Sleep(100);
            timeout++;
        }

        string response = "";
        byte[] buffer = new byte[8192];
        int total = 0;
        while (socket.Available > 0)
        {
            int len = socket.Receive(buffer);
            total += len;
            response = response + (Encoding.UTF8.GetString(buffer, 0, len));
            buffer = new byte[1024];
            if (socket.Available == 0) Thread.Sleep(250);
        }
        MessageBox.Show(response);
        return response.Trim();

    } 
```

ServerSide

```
clientSocket = serverSocket.accept();
        clientSocket.setKeepAlive(true);
        Log.d("DbThread","client Connected");

        br = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()),8192);
        bo = new BufferedWriter(new OutputStreamWriter(clientSocket.getOutputStream()),8192);

        Thread.sleep(100);
        char[] buffer = new char[8192];

        int len=0;
        String build = "";
        while((len = br.read(buffer))>0){

            build = build + new String(buffer);
            buffer = new char[8192];
        }

        JSONObject json = new JSONObject(build.trim());
        Log.d("input",build.trim());
        String output = "";
        Gson gson = new Gson();
        switch(json.getString("classType").charAt(0))
        {
        case 'Q':
            Log.d("classType","Q");
            Query query = gson.fromJson(build.trim(), Query.class);
            output = query.executeToJson();Log.d("Query","end");break;

        case 'I':
            Log.d("classType","I");
            Insert insert = gson.fromJson(build.trim(), Insert.class);
            output = insert.executeToJson();break;

        case 'U':
            Log.d("classType","U");
            Update update = gson.fromJson(build.trim(), Update.class);
            output = update.executeToJson();break;

        case 'D':
            Log.d("classType","D");
            Delete delete = gson.fromJson(build.trim(), Delete.class);
            output = delete.executeToJson();break;

        }       

        bo.write(output);
        bo.flush();

        Log.d("Query",output);

    br.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:07:26.367

首先，检查`Available`循环退出条件是不安全的；告诉您的只是本地缓冲的内容；这与流的结束无关。

其次，添加 a`Thread.Sleep`不是一种理想的方法；只是阅读或接收；这将阻塞，直到*一些*数据可用；通常你只是一个循环读取或接收。

它会挂起的一个明显情况是：如果另一台机器没有发送任何回复；在这种情况下，它将永远位于最顶层的循环中。

补充说明：

*   您*不需要*`buffer`每次迭代都分配一个新的；之前的 8192 缓冲区还是可以的；重新使用它
*   您*不应该*假设您的缓冲区中有整个字符，尤其是因为您使用的是 UTF8；您的缓冲区可能具有字符的多字节表示的一部分；在开始解码之前确保您拥有完整的消息/帧通常更容易

我个人会通过添加大量调试输出和网络嗅探器来对此进行调查。

# c# - Monitor.Pulse 丢失信号？

> ID：11778635
> 
> 赞同：2
> 
> 时间：2012-08-02T13:37:56.687
> 
> 标签：c#, .net, multithreading, monitor

我有这个生产者/消费者代码：

主要的 ：

```
static void Main()
{
    using(PCQueue q = new PCQueue(2))
    {
        for(int i = 0; i < 10; i++)
        {
            int itemNumber = i; // To avoid the captured variable trap
            q.EnqueueItem(() = > {
                Thread.Sleep(1000); // Simulate time-consuming work
                Console.Write(" Task" + itemNumber);
            });
        }
        Console.WriteLine("Enqueued 10 items");
        Console.WriteLine("Waiting for items to complete...");
    }

} 
```

班级 ：

```
 public class PCQueue: IDisposable
  {
      readonly object _locker = new object();
      Thread[] _workers;
      Queue < Action > _itemQ = new Queue < Action > ();
      public PCQueue(int workerCount)
      {
          _workers = new Thread[workerCount];
          // Create and start a separate thread for each worker
          for(int i = 0; i < workerCount; i++)
          (_workers[i] = new Thread(Consume)).Start();
      }
      public void Dispose()
      {
          // Enqueue one null item per worker to make each exit.
          foreach(Thread worker in _workers) EnqueueItem(null);
      }
      public void EnqueueItem(Action item)
      {
          lock(_locker)
          {
              _itemQ.Enqueue(item); // We must pulse because we're
              Monitor.Pulse(_locker); // changing a blocking condition.
          }
      }
      void Consume()
      {
          while(true) // Keep consuming until
          { // told otherwise.
              Action item;
              lock(_locker)
              {
                  while(_itemQ.Count == 0) Monitor.Wait(_locker);
                  item = _itemQ.Dequeue();
              }
              if(item == null) return; // This signals our exit.
              item(); // Execute item.
          }
      }
  } 
```

问题 ：

可以说执行`item();`需要很长时间。

```
1) we enqueue a new work and pulse. ( 1 consumer is busy now)
2) we enqueue a new work and pulse. ( second consumer is busy now)
3) we enqueue a new work and pulse. 
```

现在 ？两个线程都忙！

我[知道](https://stackoverflow.com/questions/1355398/monitor-vs-waithandle-based-thread-sync)脉搏会丢失（或不会？）

唯一的解决方案是将其更改为`AutoResetEvent`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:54:39.483

> 现在 ？两个线程都忙！
> 我知道脉搏会丢失（或不会？）

是的，当（所有）您的线程忙于执行 Item() 调用时，脉冲将丢失。

但这并不一定是个问题，你在每个 Enqueue() 之后都在脉冲，基本上只有当 queue.Count 从 0 变为 1 时才需要脉冲。然后你需要更多的脉冲。

但是，当您尝试优化脉冲数时，您可能会遇到麻烦。Wait/Pulse 是无状态的这一事实确实意味着您应该谨慎使用它。

# jsf - 提交包含来自其他表单 JSF 的数据的表单

> ID：11778636
> 
> 赞同：4
> 
> 时间：2012-08-02T13:37:59.047
> 
> 标签：jsf, richfaces, jsf-1.2

我有一个表格，我想用 JSF/Richfaces 提交。

要执行表单操作，我需要确保来自另一个表单的数据有效。

所以我的问题是，我怎样才能提交一个数据来自另一个表单的表单？

我的代码是这样的：

```
<h:form id="form1" >
<h:inputText id="data" validator="#{myBean.validateData}" />
</h:form>
<h:form id="form2" >
<h:inputText id="data2" validator="#{myBean2.validateData2}" />
<a4j:commandLink id="button" 
    action="#{bandeauTarifController.recalculer}" ajaxSingle="true" 
    process="data" >
Test link
</a4j:commandLink>
</h:form> 
```

我认为“进程”属性可以做到这一点，但不能。

有人对此有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:24:19.130

在里面放置一个隐藏的（`style="display:none"`）按钮`<h:form id="form1" >`并用jquery点击它`$('#form1\\:myButtonID').click();`

如果数据无效，为了停止第二个请求（来自 form2 的按钮）......您可以制作第三个按钮并从 form1 调用第一个按钮，而不是检查数据并在其有效点击第二个按钮的情况下从表格2

# cordova - 为什么 EmberJS 不会在 webkit 浏览器上的 HTML / Handlebars 中呈现

> ID：11778639
> 
> 赞同：0
> 
> 时间：2012-08-02T13:38:09.977
> 
> 标签：cordova, webkit, ember.js

我已经启动了一个非常基本的 EmberJS 应用程序，我想在 phonegap 应用程序中使用它。以下代码在 FF 4 中运行良好，但在 Chrome 和 Safari 中，车把部分中的视图未更新。

Main JS 文件具有以下代码。

```
(function(window) {
  function Main() {
    MainApp = Ember.Application.create({
      appname: "My App",
      ready: function() {
        console.log("hello from ember");
        app.initialize();
        app.deviceready();
      }
    });
  }
  window.Main = Main;
}(window)) 
```

**我发现如果我删除了自我执行功能，它会在 webkit 中呈现得很好**

```
MainApp = Ember.Application.create({
  appname: "My App",
  ready: function() {
    console.log("hello from ember");
    app.initialize();
    app.deviceready();
  }
}); 
```

所以我想真正的问题是为什么将 Ember.Application.create() 包装到 Main() 函数中会导致 webkit 出现这个问题？

在我的 index.html 文件中，我有以下脚本块来执行 main.js

```
<script type="text/javascript">
  function init() {
    var mainApp = new Main();
  }
</script> 
```

然后我的车把代码看起来像这样。

```
<script type="text/x-handlebars">
  <h1>hello from {{MainApp.appname}}</h1>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:34:27.390

解决方案是采取

```
(function(window) {
  function Main() {
    MainApp = Ember.Application.create({
      appname: "My App",
      ready: function() {
        console.log("hello from ember");
        app.initialize();
        app.deviceready();
      }
    });
  }
  window.Main = Main;
}(window)) 
```

并做到

```
(function(window) {
  MainApp = Ember.Application.create({
    appname: "My App",
    ready: function() {
      console.log("hello from ember");
      app.initialize();
      app.deviceready();
    }
  });
})(window) 
```

这仍会根据需要将 MainApp 分配给窗口/全局上下文，但会删除未初始化函数的依赖关系。我不确定您是如何`init()`在 HTML 中调用该函数的，但它似乎从未真正`new Main()`为您初始化对象。

# c# - Using a method from one .cs file class in another .cs files class

> ID：11778642
> 
> 赞同：7
> 
> 时间：2012-08-02T13:38:20.847
> 
> 标签：c#, class

I have 2 .cs files each with a class in it. How do I call a method in a class from Form1.cs in another class inside of Form2.cs?

Looks something like this...

```
Form1.cs

public partial class Class1 : ClassContainer
{
    public void awesomeMethod()
        {
        }
}

Form2.cs

class Class2 : SomethingChanged
{
    public void decentMethod()
    {
    }
} 
```

I would like to call awesomeMethod() inside of the decentMethod(). Thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T13:40:54.793

你的意思是，像这样？

```
public void decentMethod()
{
    Class1 instance = new Class1();
    instance.awesomeMethod();
} 
```

您需要一个要调用该方法的类的实例。

* * *

或者，如果您不需要/不想使用实例，请将其设为静态方法：

```
public partial class Class1 : ClassContainer
{
    public static void awesomeMethod()
    {
    }
} 
```

...

```
public void decentMethod()
{
    Class1.awesomeMethod();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T13:45:46.767

为了调用一个类的实例方法，你需要一个类的实例。因此，要调用 Class1 的 awesomeMethod，您必须创建 Class1 的一个实例：

```
Class1 c = new Class1();
c.awesomeMethod(); 
```

但是，从您的开头段落中，听起来这两个实际类是两种不同的形式。在这种情况下，一个表单创建另一个表单的新实例纯粹是为了获得可能是一个辅助方法的东西并没有真正意义 - 创建第二个表单可能会产生大量开销。您最好将辅助方法放入一个单独的、更轻量级的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:41:13.723

我猜这些不是真正的方法签名。

是否`awesomeMethod`需要对任何成员的任何引用`decentMethod`？

如果没有，它会很简单：

```
new Class1().awesomeMethod(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T03:56:35.057

这是您可以在 Visual Studio 中尝试的方法。写下你对***没有***定义的方法的***使用。***例如，在您的代码中的某处，键入：

 *`cls_a instance_a;`

然后你会在 cls_a 下看到一条波浪线。右键单击“cls_a”并从弹出菜单中选择生成。然后看看会发生什么。

我看到创建了 App_Code 目录，并且在该目录的文件 cls_a.cs 中生成了类 cls_a。Visual Studio 生成了定义。它编译。

然后，您可以键入没有来自 cls_a 的定义的方法的使用，如下所示：

`instance_a.meth_x();`

再次，右键单击波浪线并选择生成。让 Visual Studio 为您生成定义。

我认为 ASP .NET 要求您将其他类放在 App_Code 子目录中。如果您需要按照自己的方式调整 ASP.NET，我认为可以编辑 Web.config 文件，这样您就可以将代码文件放在任何您想要的地方。我还没有审查如何做到这一点，所以我把它留给你或其他人。

无论如何，在 App_Code 子目录中没有你的类和方法会导致你的类和函数在你的 web 表单代码中看不到，即使其他一切都是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T04:14:21.457

好的，我是这方面的初学者，并且想知道同样的事情。我相信我明白你在问什么。我只是尝试了这个，经过几次尝试它点击了，并且更新到这个也许我可以用我的话来简化它。我不知道您使用的是哪个程序，但我使用了 Visual Studio 2016。我创建了两个表单（Form1 和 Form2），每个表单都包含一个按钮。Form1 按钮和 Form2 按钮。当我单击 Form1 按钮时，它从 form2 调用一个方法，当我单击 Form2 按钮时，它从 Form1 调用一个方法。我注意到在解决方案资源管理器中它显示了两种形式以及它们包含的所有内容。如果我错了，我已经做了很多研究并纠正我，但我相信从父容器到子容器的顺序是这样的（命名空间>类>方法）。

这些是我的脚本。

表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.Show();
    }

    private void f1button_Click(object sender, EventArgs e)
    {
        f2Words f2w = new f2Words();
        f2w.Words2();

    }
}
public class f1Words
{
    public void Words1()
    {
        MessageBox.Show("Form 1 Method Calling Worked!");
    }
} 
```

* * *

表格2：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {

    }

    private void f2button_Click(object sender, EventArgs e)
    {
        f1Words f1w = new f1Words();
        f1w.Words1();

    }
}
public class f2Words
{
    public void Words2()
    {
        MessageBox.Show("Form 2 Method Calling Worked!");
    }
} 
```

在解决方案资源管理器窗口中，它显示了 Form1 和 Form2 的类。所以我决定尝试调用这些类的新实例。

“f1Words f1w = new f1words()”和“f2Words f2w = new f2Words()”。

然后就在这之后，我调用了这些类的新实例来使用它们包含的方法。

“f1w.Words1()”和“f2w.Words2()”

最终的结果是成功的。当我单击 Form1 的 Button1 时，它调用了 Form2 的 F2Words 类并从中拉出 Words2 方法，打开一个消息框，显示“Form2 方法调用成功！”，Form2 Button2 反之亦然。

由于这篇文章已有 4 年的历史，我假设您已经自己发现了这一点，并且可能找到了更好的解决方案，但是对于将来问同样问题的其他人，我希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-20T19:21:43.050

假设主窗体是frmMain。在 frmMain() 的构造函数之外进行静态声明；在同一个构造函数中分配它：

```
public static frmMain p_frmMain = null;
public frmMain()
{
    InitializeComponent();
    :
    p_frmMain = this;
} 
```

从另一个类（在同一解决方案中使用 main 的命名空间），调用 main 的 'btnHelloWorld_Click()' 方法：

```
AnotherClass_EventHandler(object sender, EventArgs e)
{
:  // Call frmmain()'s 'btnHelloWorld_Click' event:
   frmMain.p_frmMain.btnHelloWorld_Click (sender, e);
:
}
// Quick, dirty and done. 
```*

# c++ - 我的 gloox 机器人有错误

> ID：11778644
> 
> 赞同：0
> 
> 时间：2012-08-02T13:38:24.813
> 
> 标签：c++, bots, chatroom, gloox

我有 gloox 机器人。我正在尝试创建 MUC 房间处理程序，但现在我在 gcc 下编译时出错了。

```
class MucHandler : public MUCRoomHandler {
private:
    Client *client;
public:
    MucHandler(Client *cl){
        client = cl;
    }

    virtual void handleMUCMessage (MUCRoom *room, const Message &msg, bool priv){
    }
    virtual bool handleMUCRoomCreation( MUCRoom *room )
    {
    }
    virtual void handleMUCSubject( MUCRoom * /*room*/, const std::string& nick, const std::string& subject )
    {
    }
    virtual void handleMUCInviteDecline(MUCRoom*, const JID& invitee, const string& reason){
    }
    virtual void handleMUCError(MUCRoom*, StanzaError error ){
    }
    virtual void handleMUCInfo( MUCRoom * /*room*/, int features, const std::string& name, const DataForm* infoForm )
    {
    }

    virtual void handleMUCItems( MUCRoom * /*room*/, const Disco::ItemList& items )
    {
    }
    virtual void handleMUCParticipantPresence(MUCRoom * room, const MUCRoomParticipant participant,Presence     presence){

    }   
};

class Bot {
private:
    Client *client;
    MUCRoom *room;
    MucHandler *muc;
public:
    Bot(string login, string password, string resource){
        const string fullJidName = login + '/' + resource;
        JID jid(fullJidName);
        //mucroom
        const string server = "conference.jabber.ru";
        const string uName = jid.username();
        const string roomJid = uName + "@" + server + "/" + uName;
        JID roomJID( roomJid );

        client = new Client(jid,password);
        client->setPresence( Presence::Available, -1 );

        //mucRoom handler 
        muc = new MucHandler(client);
        room = new MUCRoom( client, roomJID, muc, 0 );
        //room->registerMUCRoomHandler(muc);
        //

        client->connect();
    }
    ~Bot(){
        delete client;
        delete room;
    }

    void joinRoom(){
        room->join();
        room->getRoomInfo();
        room->getRoomItems();
    }

    void setRoomNick(const string& nick){
        room->setNick(nick);
    }
    void invite(const string& inv, const string& reason)
    {
        JID invitee(inv);
        room->invite(invitee, reason);
    }
};

int main(int argv, char** argc){
    Bot bot("example3@gmail.com","example3","home");
} 
```

但我有错误

无法分配抽象类型“Muchandler”的对象，因为以下虚函数在“MucHandler”/usr/include/gloox/mucroomhandler.h:107 中是纯的：note virtual void gloox::MUCRoomHandler::handlerMUCParticipantPresence(gloox::MUCRoom* , gloox::MUCRoomParticipant, const gloox::Presence&)

我不知道如何解决它。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:40:55.083

这意味着`MUCRoomHandler`您没有在派生类中实现纯虚方法`MucHandler`。因此，您必须实施它们。您不能使用未实现的成员函数来实例化对象。

具体来说，它提到了这种方法`MUCRoomHandler`：

```
virtual void handlerMUCParticipantPresence(MUCRoom*,
                                           MUCRoomParticipant, 
                                           const Presence&); 
```

您已经实现了这个，这是不同的（查看参数列表）：

```
virtual void handleMUCParticipantPresence(MUCRoom * room, 
                                          const MUCRoomParticipant participant,
                                          Presence presence){ } 
```

为了清楚起见，我删除了`gloox`命名空间。

由于您的实现`handlerMUCParticipantPresence`具有不同的参数类型，因此它不实现纯虚方法。这是错误的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:43:02.377

代码和错误消息之间存在许多细微差别，因此这可能只是一个错字，但在错误消息中，`handlerMUCParticipantPresence()`将 a`Presence&`作为最终参数，而您显示的实现仅采用 a`Presence`值。如果情况确实如此，那么您没有正确覆盖纯虚拟方法，因此您无法创建类的实例。

# cakephp - 如果可用的话，使用插件布局而不是应用程序布局 CakePHP

> ID：11778651
> 
> 赞同：1
> 
> 时间：2012-08-02T13:38:42.990
> 
> 标签：cakephp, cakephp-1.3

我们开发了一个运行良好的 CakePHP (1.3) 应用程序。在使用之前，用户必须登录。那里没有什么新鲜事。

我们还创建了一个包含“销售网站”的插件。它的样式与应用程序设计完全不同。销售网站工作正常，但登录页面现在基于应用程序布局（路径：/users/login）。我们想应用销售网站布局。但仅当插件可用时。

这可能吗？如果是这样，是否可以不需要向插件添加登录方法和/或用户控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:45:00.543

您可以使用 App::objects('plugin') 获取应用程序中可用插件的列表。只需对您的插件名称进行 array_search 并相应地切换布局

# c# - 如何从应用程序的名称发布到用户的墙？

> ID：11778654
> 
> 赞同：0
> 
> 时间：2012-08-02T13:38:47.177
> 
> 标签：c#, facebook-c#-sdk

我尝试使用应用程序访问令牌发布到用户墙，但它仍然从用户名发布。是否可以从应用程序的名称发布？

```
var fbc = new FacebookWebClient();
        var wc = new WebClient();
        var tokenStr = wc.DownloadString(string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&grant_type=client_credentials",
            FacebookApplication.Current.AppId, FacebookApplication.Current.AppSecret));

        fbc.AccessToken = tokenStr.Replace("access_token=", string.Empty);

        dynamic parameters = new ExpandoObject();
        parameters.message = "testMessage";
        //parameters.link = pageLink;
        parameters.name = "testCaption";

        dynamic result = fbc.Post(string.Format("{0}/feed", userID), parameters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:34:15.157

```
var fbPost = new FacebookClient ( accessToken );
         dynamic result = fbPost.Post ( "me/feed", new { message = "Welcome to C# SDK and me" } ); 
```

# bash - 为什么bash设置“？？？” “解放”？

> ID：11778656
> 
> 赞同：3
> 
> 时间：2012-08-02T13:38:51.933
> 
> 标签：bash

请注意以下事项：

```
[user@machine deploy]$ echo ?
?
[user@machine deploy]$ echo ??
??
[user@machine deploy]$ echo ???
lib
[user@machine deploy]$ echo ????
???? 
```

怎么了`echo ???`？为什么是“lib”？

我在我的 env 或 .bashrc 中没有看到任何内容，并且在机器之间不一致（在我的开发机器上，字符串 ??? 保持 ???，这在我测试它时很有用）。

我可以解决这个问题 - “？？？” 作为占位符值是完全任意的。但现在我很好奇。有人有想法么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T13:40:38.000

在 shell [glob](http://tldp.org/LDP/abs/html/globbingref.html)中，`?`代表一个字符（确切地说 - 一个且只有一个）。因此，如果您有一个名称恰好包含三个字符的文件（或目录），`???`则会匹配它。

试试`touch a; touch bb ; echo ? ??`。

如果您没有与该模式匹配的文件，则该模式将按原样打印，而不是替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:40:48.557

提示 #1：尝试`ls` 提示 #2：这称为 globbing。

# wif - 使用WIF，audienceUris和realm有什么区别？

> ID：11778658
> 
> 赞同：26
> 
> 时间：2012-08-02T13:38:54.687
> 
> 标签：wif, adfs2.0, adfs

我们有一个使用 WIF 的 ASP.NET 应用程序。我们的 web.config 文件有这样的部分：

```
<audienceUris>
    <add value="https://someapp.mycompany.com/App/" />
</audienceUris>
<federatedAuthentication>
    <wsFederation passiveRedirectEnabled="true" issuer="https://adfs.mycompany.com/adfs/ls/" realm="https://someapp.mycompany.com/App/" requireHttps="true" />
    <cookieHandler requireSsl="false" />
</federatedAuthentication> 
```

我看到的每个示例`audienceUris`和`realm`都是相同的值。这两者有什么区别？我们两个都需要吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T13:49:58.817

`realm`是应用程序的唯一标识符——登录时发送到 STS 的身份。但是，该元素`audienceUris`用于限制哪些应用程序将接受令牌。

例如，用户可以登录并从不同的依赖方接收他们的令牌，然后导航到您的应用程序。如果该应用程序的领域列在 中`audienceUris`，则令牌将被接受并且他们可以访问该站点（假设该应用程序也可以读取 cookie）。

如果您将令牌视为护照，这就像说英国将允许持有美国或英国护照的人入境。

在回答您的问题时，您应该将它们都包括在内，但它们可以相同。

# jquery - 将 HTML/Javascript 代码分离为

> ID：11778660
> 
> 赞同：1
> 
> 时间：2012-08-02T13:38:58.320
> 
> 标签：jquery, html, include, embed, external

我不知道这是什么术语，但是当您使用“包含”或将 HTML 存储在变量中并调用它以在 HTML 页面中的某个点打印时，它就像 PHP 一样。

我想更好地组织和整理我的 html 页面，这对我来说太杂乱了，我只是在我的代码中导航时感到脑雾。我没有网络服务器，一切都在运行客户端 javascript。它实际上是一个 HTA 应用程序。

例如，我想将保存在单独 .html 文件中的表调用到 Main html 文件中。

例如：

```
//main html file
<table>
<tr>
   <td>"call external html file here"</td>
</tr>
</table> 
```

或者如果 jquery 或 javascript 有办法将大块 html 代码存储到变量中，然后调用它以在主 html 中打印，尽管我不知道这是否会占用太多资源。我有哪些选择？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:40:53.467

要加载外部 HTML，请使用 JQuery `.load()`： [http ://api.jquery.com/load/](http://api.jquery.com/load/)

例子：

```
$('#result').load('ajax/test.html'); 
```

您还可以将 javascript 分离到另一个文件中：

```
<script src="yourjavascript_file.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:42:10.673

您可以使用 jQuery`load`函数：

HTML：

```
<table>
    <tr>
        <td id="load"></td>
    </tr>
</table> 
```

jQuery：

```
$("#load").load("http://link.to/file"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:43:37.963

对于初学者来说，另一种选择可能是模板：http: [//api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:45:46.107

在主 html 文件中，您可以使用诸如

```
next.body() 
```

然后，在要调用的文件中，可以使用如下代码

```
inherit file="base.html" 
```

调用主文件。

但这一切都取决于您使用的是哪个框架

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:46:02.837

除了上面的答案之外，该`load`函数还为您提供了极大的灵活性，您不仅可以插入一块 HTML，还可以通过在指向 HTML 文件的链接后添加一个空格分隔的选择器表达式来仅插入该块中的一个选择部分：

```
$("#tobefilled").load("foo.html #onlythiselement",function() {}); 
```

# jquery - 在 html 标签中使用预制元素

> ID：11778663
> 
> 赞同：1
> 
> 时间：2012-08-02T13:39:21.930
> 
> 标签：jquery, html

我想了解使用带有 HTML 标签的预制元素是否被认为是有效的。我已经开始在我的 HTML 中使用它，以使我的代码变得更通用且不易破解。但是我不知道这是否有效并且所有浏览器都支持。

例如，我正在做这样的事情：

```
<a class="item-class" href="...' itemname="something"> 
```

现在假设我正在为我可以做的所有项目类做一个 jquery onclick 事件

```
$(this).attr("itemname") 
```

将参数传递给 jquery 事件的一种。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:43:35.497

根据 HTML5 规范，您应该为这种元数据使用的是[data-* 属性](http://ejohn.org/blog/html-5-data-attributes/)。它的工作原理基本相同，只是你使用 `data-itemname="itemname" 代替。

这也是用于编辑/检索这些值的适当[jQuery 函数：](http://api.jquery.com/data/)

```
<a class="item-class" href="...' data-itemname="something">
$(this).data("itemname") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:43:12.270

`itemanem`不是一个有效的属性，你可以使用 HTML5`data-*`属性和 jQuery`data()`方法来代替：

```
<a class="item-class" href="...' data-name="something"> 
```

```
$(this).data("name") 
```

但是，如果您想读取非标准属性，可以使用`getAttribute`方法：

```
var itemName = $(this)[0].getAttribute("itemname") 
```

# java - 为什么我不能在扩展类中创建与内部类同名的对象

> ID：11778666
> 
> 赞同：2
> 
> 时间：2012-08-02T13:39:42.143
> 
> 标签：java

我试图找出为什么下面的代码会出错，有人可以解释一下吗？这是一堂课

```
package abc;

public class A {
   public class B {

   }
} 
```

现在我正在尝试创建一个 B 类

```
package xyz;
import abc.*;

public class B extends A{
    public static void main(String[] args) {
        B b = new B (); // this line gives error. Can you please explain
    }
} 
```

请考虑 B 类扩展 A 在默认包中

```
import abc.*;

public class B extends A{
    public static void main(String[] args) {
        B b = new B (); // this line gives error. Can you please explain 
                          // I am try to create "B" class object which extends A 
                         //.. not the B inner class 
    }
} 
```

Eclipse 中显示的错误是：“没有 A 类型的封闭实例可访问。必须使用 A 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 A 的实例）。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:42:55.780

鉴于`B`extends`A`并`A`包含一个内部类`B`，我怀疑存在混淆的空间（对于编译器和程序员）。

该行：

```
B b = new B(); 
```

是模棱两可的。*这是哪个*B？正如在别处指出的那样，内部类 B 需要一个包含的实例`A`，所以我怀疑你的意思是`B`外部类。

**编辑：**你的错误

> “没有 A 类型的封闭实例是可访问的。必须使用 A 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 A 的实例）。”

证实了这一点。我想你想要`xyz.B`并且应该适当地确定范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:43:29.057

尝试指定封闭范围：

```
B b = new A.B(); 
```

或者

```
B b = new xyz.B(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:45:41.760

如果你 make `public class B` `static`，它会像写的那样工作。

否则，您不能从类 A 的实例外部创建类 B 的实例，因为非静态内部类需要指向其外部类的“this”的指针（在 B 中，您可以`this.A`编写一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:20:30.980

我找到了这个解决方案，通过反射你可以创建 B 类（B 扩展 A 类）对象。

```
import java.lang.reflect.Method;

import abc.*;

public class B extends A{
    public static void main(String[] args) {
        //B b = new B(); // this line gives error. Can you please explain 
                          // I am try to create "B" class object which extends A 
                         //.. not the B inner class
     try{
      Class c = Class.forName("B"); //class B extends A
      Method  m=c.getMethod("print", null);
      m.invoke(c.newInstance(), null);
     }catch(Exception e){
      e.printStackTrace();
     }
    }

    public void print(){
     System.out.println("Printed");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:51:41.943

当我尝试编译此代码时得到的错误（减去包规范，因为它们似乎无关紧要）是“非静态变量，不能从静态上下文中引用”。所以，问题是在静态方法`main()`中你试图访问非静态的东西，我猜这是内部类 B 的定义。

如果第二个外部类具有不同的名称，您实际上会得到相同的错误。因此，明显的命名冲突是一个红鲱鱼。尽管这本身就是不对两个类使用相同名称的一个很好的理由——它在试图理解错误时会引起混淆。

如果我将内部类的声明更改为静态，则错误已解决。

```
public class A {
   public static class B {

   }
} 
```

关于静态与非静态嵌套类的一些相关讨论在[这里](https://stackoverflow.com/questions/1353309/java-static-vs-non-static-inner-class)。

但这可能不是正确的解决方法。它表明您的代码`main()`引用的是`B`内部类，而不是`B`包含该方法的类。你真正想要的是哪个？显然，我建议为这两个类使用不同的名称以避免混淆。如果您想要`main()`创建包含该方法的类的实例，那么为该类使用唯一名称将解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T13:49:04.817

当我在 Eclipse 中创建以下内容时：

```
package com.example;

public class A {
    class B {
    }
} 
```

和

```
package com.example;

import com.example.A.B;

public class B extends A {

    public static void main(String[] args) {
        B b = new B();
    }
} 
```

如您所见，Eclipse 导入了该类`A.B`。如果没有导入，则会记录以下错误：

无法访问类型 A 的封闭实例。必须使用类型 A 的封闭实例来限定分配（例如 xnew A()，其中 x 是 A 的实例）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T14:07:58.707

您的类`B extends A` **继承了该类`A.B`**，并且表达式`new B()`引用了该内部类。因此它要求一个封闭的实例。您必须明确地使用包名称来限定您提到的两个`B`，或者，更好的是，首先**避免这种命名混乱**。

# android - Android 中的 Google Maps (onLoaded) 监听器

> ID：11778668
> 
> 赞同：0
> 
> 时间：2012-08-02T13:39:47.970
> 
> 标签：android, zooming, android-mapview, listener

我正在尝试使用`zoomToSpan()`Google MapView 中的方法，但正如我所读到的，这仅在 MapView 已满载时才有效，所以我想知道是否有可能将 Listener 添加到我的 Mapview 以获得消息，完成后。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-25T15:57:48.177

我`addListener`习惯在地图加载后在我的地图上放置一个信息窗口，以便地图重新定位并显示整个信息窗口。我在标准网络浏览器上执行此操作，但我不确定它是否适用于 Android 平台：

```
google.maps.event.addListener(map, 'tilesloaded', function(event) {
    infowindow.open(map, marker);
    // only do this the first time tiles are loaded
    google.maps.event.clearListeners(map, 'tilesloaded');
}); 
```

这是我对另一个问题的回答，您可以在其中看到更多代码：[How to Display Multiple Google Maps per page with API V3](https://stackoverflow.com/questions/4074520/how-to-display-multiple-google-maps-per-page-with-api-v3/4081814#4081814)

# shopify - 如何为 Shopify 应用程序代理添加公共选项卡或链接

> ID：11778669
> 
> 赞同：0
> 
> 时间：2012-08-02T13:39:50.693
> 
> 标签：shopify

我创建了一个应用程序，旨在在商店（而不是管理员）上显示内容。我创建了一个应用程序代理，以便我的应用程序可以通过如下网址使用：-

[http://shopname.myshopify.com/apps/myApp](http://shopname.myshopify.com/apps/myApp)

如何在商店中公开此 URL 以供用户点击？理想情况下，它将在商店的主菜单中作为另一个选项卡可见。

迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:39:43.850

商家将能够访问`https://#{shop.myshopify_domain}/admin/links`并添加该链接。所以你可以指示商家自己添加。

不幸的是，目前这些导航链接似乎无法通过 API 访问，因此您将无法使用您的应用程序自动添加它。

# hadoop - 序列文件优于 hdfs 文本文件的优点

> ID：11778681
> 
> 赞同：21
> 
> 时间：2012-08-02T13:40:39.417
> 
> 标签：hadoop, hdfs, sequencefile

Hadoop 序列文件相对于 HDFS 平面文件（文本）的优势是什么？序列文件以什么方式有效？

可以将小文件组合并写入序列文件，但也可以对 HDFS 文本文件执行相同的操作。需要知道这两种方式的区别。我已经在谷歌上搜索了一段时间，如果我弄清楚这一点会有所帮助吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T13:48:35.720

1.  序列文件适用于您要存储键及其对应值的情况。对于文本文件，您可以这样做，但您必须解析每一行。
2.  可以压缩并且仍然可以拆分，这意味着更好的工作量。除非您使用可拆分的压缩格式，否则您无法拆分压缩的文本文件。
3.  可以作为二进制文件处理 => 存储效率更高。在文本文件中，double 将是许多字符 => 大的存储开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T10:22:47.767

**[Hadoop序列文件](http://hadooptutorial.info/hadoop-sequence-files-example/)****的优点**（根据网站上`Siva`的文章`hadooptutorial.info`）

1.  比文本文件更**紧凑**
2.  支持不同级别的**压缩- 块或记录等。**
3.  **可以**并行拆分和处理文件
4.  他们可以解决Hadoop 中**的大量小文件问题**，其中 Hadoop 的主要优势是使用 Map reduce 作业处理大文件。它可以用作大量小文件的容器
5.  Mapper 的临时**输出可以存储**在顺序文件中

**缺点：**

1.  顺序文件仅附加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T12:25:58.267

序列文件是 MapReduce 处理的 mapper 和 reducer 阶段生成的中间文件。序列文件是可压缩的并且处理速度很快，它用于在映射器和减速器期间从它写入输出。Hadoop 和 Spark 中有 API 可以读取/写入序列文件

# java - 添加 jlabel 组件后的 Jpanel 大小

> ID：11778683
> 
> 赞同：0
> 
> 时间：2012-08-02T13:40:47.540
> 
> 标签：java, jpanel, border-layout

我有一个中央面板。这是我的父面板。我正在向父面板添加 3 个面板。

面板将垂直堆叠。就像标题面板，然后是中间面板，然后是底部面板。我只想专注于我的标题面板。当我使用文本创建 jlabel 时。标签显示并且面板边框延伸了父面板的整个宽度，这就是我想要的。

```
private JPanel titlePanel() {
  String text = "<html><b><big><font color=#5C8C5C>Help Dialog</font></big></b></html>";
  JLabel textLabel = new JLabel(text, JLabel.CENTER); 
  JPanel p = new JPanel();
  p.setLayout(new BoxLayout(p, BoxLayout.LINE_AXIS));
  p.add(textLabel);
  p.setBorder(BorderFactory.createLineBorder(Color.black));
  return p;   
} 
```

我实际上想使用图标作为标签而不是 html 文本。因此，对代码进行更改。

```
private JPanel titlePanel() {
  Registry appReg = Registry.getRegistry(this);
  ImageIcon ediLabelIcon = appReg.getImageIcon("ToolLabel.ICON");
  JLabel textLabel = new JLabel(ediLabelIcon, JLabel.CENTER); 
  JPanel p = new JPanel();
  p.setLayout(new BoxLayout(p, BoxLayout.LINE_AXIS));
  p.add(textLabel);
  p.setBorder(BorderFactory.createLineBorder(Color.black));
  return p;   
} 
```

现在标签显示了，但面板的边框仅与标签一样宽，并且没有拉伸父面板的宽度。

我试图弄清楚将面板边框扩展到父面板的宽度，而不是与标签一样宽。这是父面板的代码。

```
 private void createDialog() {

  Component titlePanel = titlePanel();
  Component verbiagePanel = verbiagePanel();
  Component closeButtonPanel = closeButton();
  setTitle("HELP Dialog");
  centerPanel = new JPanel();
  centerPanel.setLayout(new BoxLayout(centerPanel, BoxLayout.PAGE_AXIS));
  centerPanel.setPreferredSize(new Dimension(600, 300));
  centerPanel.add(titlePanel);
  centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));
  centerPanel.add(verbiagePanel);
  centerPanel.add(Box.createHorizontalGlue());
  centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));
  centerPanel.add(closeButtonPanel);
  getContentPane().add(centerPanel);
  this.pack();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:36:33.037

在 JLabel 文本中使用 HTML 切换了计算 JLabel 首选大小的机制。现在我无法详细解释它，但是如果您将创建标题标签更改为

```
JLabel textLabel = new JLabel("<html></html>", ediLabelIcon, JLabel.CENTER); 
```

您的标签将被拉伸到父面板宽度。

或者您可以选择其他布局管理器，例如 GridBagLayout。使用 GridBagLayout，您可以强制将任何组件拉伸到其父宽度。

# delphi - 如何使用 Delphi 设置 TIFF 图像的 DPI 分辨率？

> ID：11778685
> 
> 赞同：1
> 
> 时间：2012-08-02T13:40:47.860
> 
> 标签：delphi, resolution, tiff, dpi

我使用此代码绘制图像并使用 Delphi 2006 将其保存为 TIFF：

```
var Bmp: TBitmap;
  MF: TMetaFile;
  MetafileCanvas: TMetafileCanvas;
begin
  Gdip := TGDIPlusFull.Create('gdiplus.dll');
  MF := TMetaFile.Create;

  MF.Width := 1000;
  MF.Height := 1100;

  MetafileCanvas := TMetafileCanvas.Create(MF, 0);
  MetafileCanvas.Brush.Color := clRed;
  MetafileCanvas.Brush.Style := bsDiagCross;
  MetafileCanvas.Ellipse(50, 50, 300 - 50, 200 - 50);
  MetafileCanvas.Free;

  Bmp := Gdip.DrawAntiAliased(MF);

  Image1.Picture.Assign(Bmp);
  SynGDIPlus.SaveAs(Bmp, 'c:\test.tif', gptTIF); 
  Bmp.Free;

  MF.Free;
  FreeAndNil(GdiP);
end; 
```

注意我使用来自 http://www.synopse.info 的免费框架。

该代码运行良好。但是我有一个问题。如何设置 TIFF 分辨率。我的 test.tif 图像有 96 DPI（屏幕分辨率），但我需要 200 DPI。注意我不能改变图像尺寸（宽度和高度），因为正确，我只想改变 DPI 分辨率。

我找到了很多关于这个问题的答案，但没有找到关于 Delphi 的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:42:01.850

我添加了以下方法：

```
procedure TSynPicture.BitmapSetResolution(DPI: single);
begin
  if (fImage<>0) and fAssignedFromBitmap and (DPI<>0) then
    Gdip.BitmapSetResolution(fImage,DPI,DPI);
end; 
```

它将调用相应的 GDI+ API 来设置位图分辨率。

那么保存时要指定：

```
procedure SaveAs(Graphic: TPersistent; const FileName: TFileName;
  Format: TGDIPPictureType; CompressionQuality: integer=80;
  MaxPixelsForBiggestSide: cardinal=0; BitmapSetResolution: single=0); overload;
var Stream: TStream;
begin
  Stream := TFileStream.Create(Filename, fmCreate);
  try
    SaveAs(Graphic,Stream,Format,CompressionQuality,MaxPixelsForBiggestSide,
      BitmapSetResolution);
  finally
    Stream.Free;
  end;
end; 
```

所以你可以在你的代码中编写：

```
 Bmp := Gdip.DrawAntiAliased(MF);
  Image1.Picture.Assign(Bmp);
  SynGDIPlus.SaveAs(Bmp, 'c:\test.tif', gptTIF, 80, 0, 200); // force 200 DPI
  Bmp.Free; 
```

请参阅[此提交](http://synopse.info/fossil/info/5850eaeb4b)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T21:11:53.270

TWICImage 类能够保存 TIF 文件的 DPI 信息，但乍一看并不明显。只需调用Handle 的SetResolution 函数即可。

```
tif := TWICImage.Create;
...
tif.Handle.SetResolution( DPI_X, DPI_Y); 
```

# ruby-on-rails - 使用带有设计的client_side_validation登录用户而不检查电子邮件的唯一性

> ID：11778688
> 
> 赞同：0
> 
> 时间：2012-08-02T13:40:53.903
> 
> 标签：ruby-on-rails, devise, client-side-validation

> **可能重复：**
> [当用户使用 client_side_validations 登录并设计时出现“电子邮件已被接收”错误](https://stackoverflow.com/questions/6725151/email-is-already-taken-error-when-user-logs-in-with-client-side-validations-an)

我正在为我的 rails 应用程序使用 devise 和 client_side_validation 来检查服务器和客户端的验证。

问题出现在登录页面上，因为 client_side_validation 检查电子邮件的唯一性并且不允许用户登录。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:29:29.543

您可以通过禁用此处不需要的电子邮件输入的唯一性验证来解决此问题。示例代码如下所示：

`<%= f.input :email, :validate => {:uniqueness => false}%>`

有关更多详细信息，请参阅[客户端验证上的这个 github 问题](https://github.com/bcardarella/client_side_validations/issues/77)

也检查[这个stackoverflow问题](https://stackoverflow.com/questions/6725151/email-is-already-taken-error-when-user-logs-in-with-client-side-validations-an)

# c# - 列表框拖放项目，项目名称

> ID：11778698
> 
> 赞同：0
> 
> 时间：2012-08-02T13:41:17.043
> 
> 标签：c#, drag-and-drop, listbox

我有一些功能

```
private void listBox2_Drop(object sender, System.Windows.DragEventArgs e)
{
    string[] files = (string[])e.Data.GetData(System.Windows.DataFormats.FileDrop, false);
    for (int i = 0; i < files.Length; i++)
    {
        ListItemEl el = new ListItemEl();
        el.ui = files[i];
        listBox2.Items.Add(el);
    }
} 
```

行：

```
(string[])e.Data.GetData(System.Windows.DataFormats.FileDrop, false) 
```

返回文件位置。

哪个函数从文件的 DragEventArgs 名称返回我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:03:36.040

您已经有了完整路径，只需使用 Path.GetFileName 获取文件名

```
var files = (string[])e.Data.GetData(DataFormats.FileDrop);
foreach (var filename in files)
{
    var nameOnly = System.IO.Path.GetFileName(filename);
} 
```

# python - 包安装后处理文件导入

> ID：11778701
> 
> 赞同：1
> 
> 时间：2012-08-02T13:41:26.093
> 
> 标签：python, package, setuptools

> **可能重复：**
> [setuptools：包数据文件夹位置](https://stackoverflow.com/questions/4519127/setuptools-package-data-folder-location)

我已经用 Python 实现了一个应用程序，现在我想打包它。

这是我的树的简化版本

```
.
├── ivolution
│   ├── data
│   │   └── ui
│   │       ├── AboutIvolutionDialog.glade
│   │       └── IvolutionWindow.glade
│   ├── Face.py
│   ├── gui
│   │   ├── AboutDialog.py
│   │   ├── IvolutionWindow.py
|   |
│   ├── Guy.py
│   ├── training_types.py
|
├── Ivolution.py
├── setup.py 
```

要运行的主要脚本是 Ivolution.py

我的 gui（在 ivolution/gui 中）导入 glade 文件。

在我的 GUI 代码 (IvolutionWindow.py) 中，我必须导入我的 glade 文件，我使用

```
 self.builder.add_from_file("ivolution/data/ui/IvolutionWindow.glade") 
```

如果我从包中工作，这将非常有效。但是如果我安装包

```
python setup.py install 
```

当我运行 Ivolution.py 时，工作目录是脚本运行时的目录，而不是 IvolutionWindow.py 的位置。

所以我最终遇到了导入错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/Ivolution.py", line 10, in <module>
    my_app = IvolutionWindow.IvolutionWindow("Ivolution")
  File "/usr/local/lib/python2.7/dist-packages/ivolution/gui/IvolutionWindow.py", line 34, in __init__
    self.builder.add_from_file("ivolution/data/ui/IvolutionWindow.glade")
  File "/usr/lib/python2.7/dist-packages/gi/types.py", line 43, in function
    return info.invoke(*args, **kwargs)
gi._glib.GError: Failed to open file 'ivolution/data/ui/IvolutionWindow.glade': No such file or directory 
```

我的问题是，我怎样才能正确处理我的进口？

我猜我的安装目录和本地数据目录（~/.Ivolution）需要一个变量，但我找不到如何有效地做到这一点。

感谢您的帮助，我在网上找不到很好的资源来解释这一点。随时提出问题，您可以在[此处](https://github.com/jlengrand/FaceMovie/tree/ppa_pythonpackaging)了解有关该项目的更多信息。

**编辑 ：**

嗯，似乎[这个问题](https://stackoverflow.com/questions/4519127/setuptools-package-data-folder-location)回答了我一半的问题。我仍然需要找到如何有效地创建个人文件夹来保存我的日志。

# xcode - Xcode 调试区域中符号的含义

> ID：11778703
> 
> 赞同：13
> 
> 时间：2012-08-02T13:41:35.653
> 
> 标签：xcode, debugging

XCode 调试区域左侧的符号是什么意思？我，A，L，E等...

![来自调试区的快照](../Images/206b1b286bfebf5aa9007375ec4b29e9.png)

[我在 Apple 文档（基本上是这里](http://developer.apple.com/library/mac/#recipes/xcode_help-debug_navigator/articles/about_debug_navigator.html)和[这里](http://developer.apple.com/library/mac/#recipes/xcode_help-debugger/articles/about_debug_area.html#//apple_ref/doc/uid/TP40009986-CH3-SW1)）中寻找该信息，但找不到。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T14:00:44.363

我只能从 Ken Orr 的“使用 Xcode 调试”WWDC 2012[演示幻灯片](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_412__debugging_in_xcode.pdf)（会话 412）中找到变量类型的列表。您可能有权访问这些幻灯片，也可能无权访问这些幻灯片。

*   L：局部变量
*   答：论据
*   S：静态变量
*   V：全局变量（深色）
*   R：注册
*   V：实例变量（Lighter）
*   E：表达

注意：由于我是色盲，我不能更具体地了解“V”变量的不同颜色。嘘，可怜的我。也许你可以告诉我？

![在此处输入图像描述](../Images/a04342188a4bc216ed818088b23a6570.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-16T20:02:29.123

在提出这个问题后，Apple 开发人员必须将其添加到文档中，就像在[文档中一样](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/debugging_with_xcode/chapters/debugging_tools.html)

实际上只有 6 个标签，`L, A, S, V, R, E,`在`V`全局变量和实例变量之间共享。至少现在，它们是完全一样的颜色。

[![标签名称的屏幕截图](../Images/7e7cf5f51bcb460293a7f36c25d56555.png)](https://i.stack.imgur.com/61WN5.png).

# cocoa - 如何在 Cocoa 应用程序中添加 Twitter 关注按钮？

> ID：11778709
> 
> 赞同：0
> 
> 时间：2012-08-02T13:41:51.230
> 
> 标签：cocoa, twitter

如何在 Cocoa 应用程序（不是 iOS）中添加 Twitter 的“关注”按钮（具有网站上的功能）？如下图所示：

![在此处输入图像描述](../Images/f07913fbb5c47ff0d7853e47263d8747.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:29:59.277

您可以只制作一个在浏览器中打开链接的按钮。[我从这里](http://lists.apple.com/archives/cocoa-dev/2008/May/msg00054.html)得到以下代码：

```
NSString *applicationURL = @"https://twitter.com/intent/user?screen_name=vitaliy";
[[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:applicationURL]]; 
```

# git - 如何在 git repo 中每次提交后确定每个文件中的代码行数

> ID：11778710
> 
> 赞同：3
> 
> 时间：2012-08-02T13:41:52.123
> 
> 标签：git, code-statistics

我需要在每次提交 git repo 后确定每个文件中的行数。我该怎么做呢？

我查看了[gitstats](https://github.com/hoxu/gitstats/blob/master/gitstats)和[git-loc](https://github.com/ITikhonov/git-loc/blob/master/git-loc)，但两者似乎都在计算汇总统计数据，我不确定如何根据我的需要调整它们的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:29:06.077

添加一个执行此[操作的提交后挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)怎么样？它可能看起来像：

```
for f in `git ls-files`; do; wc -l $f; done; 
```

其中“wc -l”可以替换为您喜欢的 SLOC 计数器。

# android - android：ArrayList传递给返回时未填充的方法

> ID：11778716
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:09.897
> 
> 标签：android, arraylist

鉴于此代码：

```
public class TestSetup extends Object implements Serializable {
   // ... some data and methods
}
ArrayList SetupArray = new ArrayList<TestSetup>();
// ----------------------------------------------
    public boolean readExternalStorageObjectFile(String filename, Object obj) {
    boolean isOk = true;
    try {
        File path = new File(sDirectoryPath + sTopDirectoryObj, filename);
        FileInputStream out = new FileInputStream(path);
        ObjectInputStream o = new ObjectInputStream(out);
        obj = o.readObject();
        o.close();
    }
    catch(Exception e) {
        Log.e("Exception","Exception occured in reading");
        isOk = false;
    }        
    return isOk;
}

// ----------------------------------------------
public void loadSetups() {
    this.SetupArray.clear();
    this.readExternalStorageObjectFile(SETUPS_FILENAME, this.SetupArray);
} 
```

我希望 loadSetups() 中的 this.SetupArray 包含从 readExternalStorageObjectFile() 读取的现有数组信息，但事实并非如此。

如果我在 readExternalStorageObjectFile() 中放置一个断点，我会看到执行 readObject() 时 obj 确实包含 ArrayList 信息。

但是当它返回到 loadSetups() 时，this.SetupArray 没有；它是空的。

我尝试将 obj 转换为 ArrayList，但结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:53:24.857

`obj`参数是一个指针。如果您重新分配它`obj = o.readObject()`而不修改引用的数据，您只需将指针重新分配到另一个内存位置。

一个解决方案是让方法返回对象：

```
ArrayList SetupArray = new ArrayList<TestSetup>();

public Object readExternalStorageObjectFile(String filename) {
    try {
        File path = new File(sDirectoryPath + sTopDirectoryObj, filename);
        FileInputStream out = new FileInputStream(path);
        ObjectInputStream o = new ObjectInputStream(out);
        Object obj = o.readObject();
        o.close();
        return obj;
    }
    catch(Exception e) {
        Log.e("Exception","Exception occured in reading");
        return null;
    }        
}

public void loadSetups() {
    this.SetupArray = (ArrayList) this.readExternalStorageObjectFile(SETUPS_FILENAME);
} 
```

# php - 从 Windows 迁移到 Linux 服务器，现在出现会话错误

> ID：11778718
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:10.513
> 
> 标签：php, linux, session

我最近从 Windows 迁移到 Linux 服务器......现在我收到了一堆会话警告，并且一些内容正在正确加载。在 Windows 服务器上，一切都很顺利，我从来没有遇到任何错误，一旦迁移到 Linux，我就开始收到会话警告，如下面的每个使用会话的页面上的警告。

我不知道我应该尝试什么或从哪里开始解决这些问题，并希望得到任何建议。

我怀疑如果 session_start() 确实是问题所在，我会在 Windows 服务器上收到类似的警告。

此外，我的网站由 goaddy 托管，我无权访问 php.ini 文件...

```
 Warning: session_start() [function.session-start]: Cannot send session
 cookie - headers already sent by (output started 
    at /home/content/12/9453412/html/mainsearch.php:32) 
    in /home/content/12/9453412/html/mainsearch.php on line 36 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:49:15.997

你的问题是，在

```
/home/content/12/9453412/html/mainsearch.php line 32 
```

（也可能在以下内容中）您在第 36 行*之前*执行某种输出（`echo`, `print`，空白`<?php ... ?>`等）。这是不允许的，因为想要发送在某种类型之后不可能的标题输出已经发生。*`session_start();``session_start()`*

 *解决方案：将您放在`session_start();`php 文件的顶部，或者至少在您执行任何类型的输出之前。

迈克尔正确地指出，这在你的 Windows 服务器上也不能正常工作，你只是不知道，因为错误报告被设置为不显示警告。*

# xtk - XTK 工具包中的体积图像数据

> ID：11778719
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:17.463
> 
> 标签：xtk

我在这里读过：

[有没有办法使用 3d 图像数据的自定义横截面切片器？](https://stackoverflow.com/questions/10360236/is-there-a-way-to-use-a-custom-cross-sectional-slicer-of-3d-image-data)

... nrrd 解析器将图像数据存储为 3D 数组。我希望能够在我的脚本中访问这个数组。如何才能做到这一点？我想用这些数据做图像统计，用子集做感兴趣区域的统计。我相信数据是一个私有变量，切片函数仅使用它来创建卷切片，对吗？如果是这样，我如何保存它以供以后用作公共变量或卷对象的属性？

请尽可能简单地解释如何进行，因为我是 javascript 的新手。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:53:42.120

我们还没有为所有卷解析器存储数组以减少内存使用量。这当然可以添加，因为基础设施就在引擎盖下。

我将问题分配给我

[https://github.com/xtk/X/issues/84](https://github.com/xtk/X/issues/84)

# c# - Kinect 手腕/手关节位置根据手掌大小而变化

> ID：11778722
> 
> 赞同：1
> 
> 时间：2012-08-02T13:42:32.037
> 
> 标签：c#, .net, opencv, kinect, emgucv

我正在创建 Kinect 鼠标应用程序。这个想法是手/腕 kinect 关节，作为光标位置的来源，以及手指检测以执行点击、保持等。

我的手指检测和手掌手势识别工作正常，在这里我找到了我的拦截器：

当我做手掌手势时，手腕/手关节的位置会发生变化，例如当我从张开手掌变为握拳时。

这个问题有什么解决方法吗？

我在这个 wpf 应用程序中使用 Kinect SDK 1.5 和 EmguCV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:39:14.440

感谢 Jerdak 的建议。我对其进行了一些修改，我认为结果非常好。

我正在计算肘部和手腕位置之间的向量，对其进行归一化，然后乘以固定臂长。

然后我只是将矢量添加到肘部位置。

编辑：经过更多测试，这种方法几乎完美，唯一的问题是肘关节也可以“弹跳”......

# java - 使用缓存安卓

> ID：11778724
> 
> 赞同：2
> 
> 时间：2012-08-02T13:42:35.440
> 
> 标签：java, android

我实现了一个从 XML 流馈送的应用程序。XML 提要每天更改一次。

我想知道我是否可以为每一轮测量一天的xml文件缓存没有质疑提供xml的服务但是每天午夜我希望它检索新版本的xml

亲切地

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T12:35:30.700

使用 sdcard 中的 xml 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:00:39.113

您可以将 xml 保存在卡上并每 24 小时更换一次（用于`filelastModified()`获取上次修改文件的时间）

# objective-c - UIButton 阻止 ControlState 的操作

> ID：11778728
> 
> 赞同：1
> 
> 时间：2012-08-02T13:42:40.100
> 
> 标签：objective-c, events

我有一个 UIButton，它对两个不同的控制事件有两个操作：`UIControlEventTouchDown`和`UIControlEventTouchUpInside`.

`UIControlEventTouchUpInside`如果由 触发的动作检测到需要这样做，是否可以“阻止”绑定到 的动作`UIControlEventTouchDown`？

我无法更改属于`UIControlEventTouchUpInside`-action 的代码，因为它是私有框架的一部分，所以我必须找到另一种方法来帮助我自己……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:51:50.177

使`UIControlEventTouchUpInside`事件依赖于布尔变量（在 if 语句中）。但是，您会收到通知

> UIControlEventTouchDown 触发的动作检测到这是需要的

使用此通知设置变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:26:32.240

在您`UIControlEventTouchDown`希望`UIControlEvenTouchUpInside`不触发的事件的操作中，您可以在按钮上为该事件设置不同的（可能为空）操作，或者只是删除该操作。保持选择器引用或只知道它通常应该触发的其他操作的方法名称，如果您希望它触发，请重置它：

```
if ( buttonUsedDownAction )
{
    [button removeTarget:(self?) action:@selector(yourPrivateFunction) forControlEvents:UIControlEventTouchUpInside];
}
else
{
    if ( [button actionsForTarget:(self?) forControlEvent:UIControlEventTouchUpInside].length == 0 )
    {
        [button addTarget:(self?) action:@selector(yourPrivateFunction) forControlEvents:UIControlEventTouchUpInside];
    }
} 
```

我设置`(self?)`了目标，因为我不确定 self 是否是 Touch up inside 动作的接收者，但你应该明白

# matlab - 矩阵在最大值出现之前获取矩阵的最小值

> ID：11778729
> 
> 赞同：1
> 
> 时间：2012-08-02T13:42:42.947
> 
> 标签：matlab, max, min

我试图在矩阵的最大值出现之前获取矩阵的最小值。我有两个矩阵：矩阵数据和矩阵a。矩阵 a 是矩阵数据的子集，由矩阵数据的最大值组成。我有以下代码，但显然做错了什么。

```
edit: 
```

矩阵 a 是矩阵数据的最大值。我从中得出：

```
for x=1:size(data,1)
a(x)=max(data(x,:));
end
a=a'
clear x 
```

矩阵b代码：

```
for x=1:size(data,1)
b(x)=min(data(x,(x<data==a)));
end
b=b'
clear x

matrix data   matrix a   matrix b
1  2   3  4      4        1
6  5   4  7      7        4
9  6  12  5     12        6 
```

我需要矩阵数据中出现的矩阵 a 之前出现的所有最小值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:05:44.923

这并不漂亮，但这是我迄今为止发现的唯一一种没有循环的方式来做这种事情。

如果循环没问题，我会推荐 Gunther Struyf 回答作为 matlab 内置数组循环功能的最紧凑使用，`arrayfun`.

如果您想要列分钟而不是行，则某些转置等可能是多余的...

```
[mx, imx] = max(data');
inds = repmat(1:size(data,2), [size(data,1),1]);
imx2 = repmat(imx', [1, size(data,2)]);
data2 = data;
data2(inds >= imx2) = inf;
min(data2'); 
```

注意：如果不需要数据，我们可以删除附加`data2`变量，并减少行数。

因此，为了演示这是做什么的，（看看我是否正确理解了这个问题）：

用于输入

```
>> data = [1,3,-1; 5,2,1] 
```

我得到最小值：

```
>> min(data2')
ans = [1, inf] 
```

即它只在每行的最大值之前找到最小值，其他任何东西都设置为`inf`.

用一句话来说：

*   对于每一行，获取最大值的索引
*   生成列索引矩阵
*   用于`repmat`生成矩阵，与数据大小相同，其中每行是最大索引
*   将数据设置为无穷大，其中列索引 > max_index 矩阵
*   像往常一样找到最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:09:32.207

简短而简单：

```
[a,idxmax] = max(data,[],2);
b = arrayfun(@(ii) min(data(ii,1:idxmax(ii))), 1:size(data,1)); 
```

这与

```
b=NaN(1,size(data,1)); % preallocation!
for ii=1:size(data,1)
    b(ii) = min(data(ii,1:idxmax(ii)));
end 
```

## 忽略最大值本身

如果您想要之前所有的最小值（不包括最大值），最大值可能是第一个数字，并且您尝试取一个空矩阵的最小值。解决方案是使用单元格输出，可以为空：

```
b = arrayfun(@(ii) min(data(ii,1:idxmax(ii)-1)), 1:size(data,1),'uni',false); 
```

## 用 NaN 替换空单元格

如果要将空单元格替换为 Nan，然后返回矩阵，请使用以下命令：

```
b(cellfun(@isempty,b))={NaN};
b=cell2mat(b); 
```

或者简单地使用早期版本并在等于相同结果时`b(ii)`替换为：`NaN``a(ii)`

```
b = arrayfun(@(ii) min(data(ii,1:idxmax(ii))), 1:size(data,1));
b(b'==a) = NaN 
```

## 例子：

```
data=magic(4)

    16     2     3    13
     5    11    10     8
     9     7     6    12
     4    14    15     1 
```

输出：

```
a' = 16    11    12    15

b =
    16     5     6     4 
```

和

```
b =[1x0 double]    [5]    [6]    [4] 
```

对于使用单元输出并忽略最大值本身的第二个解决方案。

## 顺便说一句：

```
for x=1:size(data,1)
    a(x)=max(data(x,:));
end
a=a'
clear x 
```

可以替换为

```
a=max(data,[],2); 
```

# php - JSON 解析错误（没有 JSON 经验）

> ID：11778731
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:52.363
> 
> 标签：php, javascript, json, parsing, yui

我必须将系统从一台服务器移动到另一台服务器，并且在尝试访问此页面时遇到错误。该代码与实时工作系统完全相同，但由于某种原因它现在无法正常工作。

引发错误的 JS 代码：

```
var loadData = function(data) {
if(data)
    data += '&offset=' + offset;
else
    data = 'offset=' + offset;

var callback = {
    success: function(o) {
        try {
            var data = YAHOO.lang.JSON.parse(o.responseText);
        } catch(e) { alert('e: ' + e + '\no: ' + o + '\ndata: ' + data + '\noffset: ' + offset + '\n Response Text:' + o.responseText); }

        // removed a lot of pointless code (no error here)
}

YAHOO.util.Connect.asyncRequest('POST', 'json/dmrlist.php', callback, data);
} 
```

这是从警报中打印出来的：

![在此处输入图像描述](../Images/63d31071970254adb1ab48d7df1ad7e1.png)

这是它正在“调用”的 php 代码的（开始），但屏幕截图中显示了一个错误。

```
line 6: $JSON = json_decode($_POST['JSON']);

line 8: if($JSON->Depot)
line 9:     $filter = " AND `Site` = '" . $JSON->Depot . "'"; 
```

基本上，$JSON 是未定义的，这意味着没有发布任何内容，但看起来 javascript 是为了向它发布信息？

我很困惑，我没有使用 JSON 或 javascript 的经验，也无法弄清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:53:53.187

数据变量将被发送到服务器，但可能只是作为键/值对。您可以尝试将它们倾倒出来：

```
if (isset($_POST['JSON'])) {
    print_r($_POST['JSON']);
}
if (isset($_POST['Depot']) {
    print_r($_POST['JSON']);
} 
```

或者只是 print_r( $_POST );

我怀疑 $_POST['JSON'] 未设置，您可能不需要将其他值解码为 JSON，因为它们可能只是您可以直接从 $_POST 数组中读取的键/值对，但我我不熟悉 YUI 的 ajax 函数，所以我可能是错的 - 检查服务器上的值。

PS 以这种方式使用 print_r 将导致无效返回（它不会是 JSON），但您将能够在 Firebug 等中查看它并查看值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:21:57.030

问题是旧服务器使用的是旧版本的 php，因此似乎不需要“ifsets”（我不知道为什么），但我只是把`if(isset($_POST['JSON'])){`处理 JSON 的代码放在前面，现在它可以工作了. 我假设对于第一个循环没有发布任何内容，因此无法接收任何内容，但是 ifset 让 php 跳过 JSON 代码并从 db 获取第一个选择，然后可以循环返回，这个时间`$_POST['JSON']`实际上是设置的。

TL;DR：**旧版本的 PHP，只需要放入一个 ifset，并声明一个变量**

# redgate - RedGate SQL 比较 9 命令行 - STATISTICS_NORECOMPUTE

> ID：11778732
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:53.587
> 
> 标签：redgate, schema-compare

在编写 RedGate SQL Compare 9 脚本时，我似乎找不到忽略 PK 和 INDEXES 上的 STATISTICS_NORECOMPUTE 差异的开关。显然 /Options:ii 之类的东西会起作用，但我想比较索引的其余部分。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:35:45.870

它位于索引的 Ignore->STATISTICS_NORECOMPUTE 属性下的项目选项中。如果您没有看到它，您可能需要升级。从命令行开关是 /isn

# c# - 在 wp7 中禁用设备空闲检测

> ID：11778733
> 
> 赞同：0
> 
> 时间：2012-08-02T13:42:54.217
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

如何禁用设备空闲检测。所以我的应用程序继续运行，它不会进入空闲模式或锁定屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:47:51.650

您是否尝试将`ApplicationIdleDetectionMode`属性设置为`disabled`？

即便如此，如果（例如）电池电量过低，操作系统仍会强制您的应用程序处于空闲状态。

[http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.applicationidledetectionmode(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.applicationidledetectionmode(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:03:34.373

/* 通过将应用程序的 PhoneApplicationService 对象的 UserIdleDetectionMode 属性设置为禁用来禁用应用程序空闲检测。注意：- 仅在调试模式下使用。当用户不使用手机时，禁用用户空闲检测的应用程序将继续运行并消耗电池电量。*/

PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled;

//要在锁定屏幕下运行应用程序，请使用下面的行

PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled;

另请注意 ApplicationIdleDetectionMode 在禁用后无法启用。在应用程序的 PhoneApplicationFrame 对象初始化之前，无法设置 ApplicationIdleDetectionMode。

# javascript - 新手帮助 向 jQuery 添加函数

> ID：11778737
> 
> 赞同：-1
> 
> 时间：2012-08-02T13:43:02.630
> 
> 标签：javascript, jquery

我有一个用这些参数表示的 jQuery 菜单：

```
<script type="text/javascript">
            jQuery(document).ready(function(){

                jQuery('#promo').pieMenu({icon : [
                        { 
                            path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                            alt  : "Winamp",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}
                        },  { 
                            path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                            alt  : "VLC Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}  
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                            alt  : "Quick Time Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.qtl';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                            alt  : "Windows Media Player",
                            fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.asx';return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                            alt  : "נגן Popup",
                            fn   : function(){$("#popupplay").click();return false}
                        },{ 
                            path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                            alt  : "iTunes",
                            fn   : function(){alert('...בקרוב');return false}
                        }],
                    beforeMenuOpen: function(){
                        jQuery('<div id="shadow"></div>').css(
                        {
                            'position':'fixed',
                            'background-color':'#000000',
                            'opacity': 0.6,
                            'width':'100%',
                            'height':'100%',
                            'z-index' :999,
                            'top':0,
                            'left':0
                        }).appendTo('body');
                    },
                    beforeMenuClose: function(){
                        jQuery('#shadow').remove();
                    }
                });
            });

        </script> 
```

该菜单通过右键单击进行操作。我需要将其更改为悬停。

该插件的作者给出了插入内容的片段：

```
$(document).ready(function(){
//init my jPie
   var jPieMenu = $(#myelement').pieMenu({icon : [ { 
                               path : "path/to/images.png",
                               alt  : "icon",
                               fn   : function(){alert('Click:: icon');return false;}
                          }] });
   $('#myelement').hover(function(){
      if($('#'+jPieMenu.id).css('display') != 'block') //if jpie is not visible
          jPieMenu.initMenu(200,200);
   })
}) 
```

唯一的问题是我不知道在哪里插入什么......我总是得到意想不到的令牌。有人可以查看我上面的代码并建议插入它的位置吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:49:17.047

您只需将`$('#myelement').pieMenu`声明替换为现有代码即可。

```
$(document).ready(function(){
//init my jPie
   var jPieMenu = $('#promo').pieMenu({icon : [ {   // replace these lines with your existing code
                               path : "path/to/images.png",
                               alt  : "icon",
                               fn   : function(){alert('Click:: icon');return false;}
                          }] });
   $('#promo').hover(function(){ // This ID needs to be the same as your element
      if($('#'+jPieMenu.id).css('display') != 'block') //if jpie is not visible
          jPieMenu.initMenu(200,200);
   })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:50:41.983

首先，您需要将饼图菜单设置为一个变量，以便您可以引用它的 id：

改变：

```
jQuery('#promo').pieMenu({icon : [ 
```

到

```
var pieMenu = jQuery('#promo').pieMenu({icon : [ 
```

现在我们有了一种引用菜单本身和包含元素的方法，#promo，我假设它只是一个 div，当悬停在上面时需要关闭菜单。

无论如何，添加这个：

```
$('#promo').hover(function(){
      if($('#'+pieMenu.id).css('display') != 'block') //if jpie is not visible
          pieMenu.initMenu(200,200);
   }) 
```

在最后两组之间`})`，你应该很高兴。

编辑：是的，给你那个代码的作者错过了一个报价。不过没关系，因为您已经对该部分进行了编码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T13:51:34.290

此外，在第三行的第二个代码块中，#myelement 的开头缺少一个引号，这导致该行中的所有其他内容都充当字符串

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T13:53:26.990

```
<script type="text/javascript">
        jQuery(document).ready(function(){

            jQuery('#promo').pieMenu({icon : [
                    { 
                        path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                        alt  : "Winamp",
                        fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}
                    },  { 
                        path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                        alt  : "VLC Media Player",
                        fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.pls';return false}  
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                        alt  : "Quick Time Player",
                        fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.qtl';return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                        alt  : "Windows Media Player",
                        fn   : function(){('Click:: Plus');window.location.href = 'http://94.23.250.14:2199/tunein/tranceilfm.asx';return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                        alt  : "נגן Popup",
                        fn   : function(){$("#popupplay").click();return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                        alt  : "iTunes",
                        fn   : function(){alert('...בקרוב');return false}
                    }],
                beforeMenuOpen: function(){
                    jQuery('<div id="shadow"></div>').css(
                    {
                        'position':'fixed',
                        'background-color':'#000000',
                        'opacity': 0.6,
                        'width':'100%',
                        'height':'100%',
                        'z-index' :999,
                        'top':0,
                        'left':0
                    }).appendTo('body');
                },
                beforeMenuClose: function(){
                    jQuery('#shadow').remove();
                }
            });
            jQuery('#promo').hover(function(){ // This ID needs to be the same as your element
                if(!jQuery('#'+jPieMenu.id).is(":visible")) //if jpie is not visible
                    jPieMenu.initMenu(200,200);
            })
        });

    </script> 
```

# jquery - 如何修复 jQuery 移动缓存问题？

> ID：11778742
> 
> 赞同：0
> 
> 时间：2012-08-02T13:43:22.837
> 
> 标签：jquery, mobile, jquery-mobile

我注意到 jQuery Mobile 存在很多不同的缓存问题，但我一直没有成功找到解决方案。本质上，每次按下后退按钮时，我的应用程序都会从​​ jQuery Mobile 页面加载更旧版本的脚本。

我的应用程序的开始屏幕使用几个不同的过滤器进行搜索，至少需要其中一个。我有一点 jquery 需要这个。用户第一次访问开始屏幕时完全没有问题，但是如果用户点击后退按钮并尝试再次搜索，则 jQuery 验证来自几天前的版本并且不再有效。

在应用程序的其他位置首次加载页面时存在相同的问题，但可能不相关。

详细信息：最新稳定的 jQuery Mobile (1.1)、jQuery 1.7.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:08:55.533

If you would like to load a page without pulling the cached version, add `data-ajax="false"` to the link.

```
<a href="page-two.html" data-role="button" data-ajax="false">Page Two</a> 
```

Source: [http://jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)

# android - Android 上的 Cookie

> ID：11778744
> 
> 赞同：3
> 
> 时间：2012-08-02T13:43:26.660
> 
> 标签：android, codenameone

我编写了一个应用程序，它登录到服务器并接受 cookie 作为未来请求的会话 ID。在 j2me 中一切正常，但在 android 设备上不行。在 Android 上，应用程序不会在请求正文中添加 cookie。我已经在模拟器中进行了测试并检查了网络监视器一切正常，但我不知道为什么它在真实设备上没有。想要自己解析和添加 cookie，但 Util.getImplementation() 无法从其包中访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:07:19.580

查看代码，我认为 Android 实现中存在错误，请随时在 Codename One 问题跟踪器中提交问题。谢谢。

# c++ - 使用编译时递归生成从 1 到 499 的素数

> ID：11778750
> 
> 赞同：1
> 
> 时间：2012-08-02T13:43:36.313
> 
> 标签：c++, template-meta-programming

我读过质数是固定的，最好在编译时生成它们，而不是依赖于运行时。所以，我想到了使用内部使用编译时递归的[模板元编程。](http://en.wikipedia.org/wiki/Template_metaprogramming)我正在使用[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)法生成素数。这是代码：

```
int prime[500]; // prime[i]==0 means i is prime

template<int n> void fillMultiple(int i)
{
    prime[n*i]=1; // n is prime, mark all its multiples as non-prime
    n*i<500?fillMultiple<n>(i+1):fillMultiple<499>(i);
}

template<> void fillMultiple<499>(int i)
{
     // do nothing
     // only used as dummy function
}

template<int n> void generatePrime()
{       
    prime[n]==0?fillMultiple<n>(2):generatePrime<n+1>(); //if n is prime,mark all the multiples of n as non-prime.
    generatePrime<n+1>();
}

template<> void generatePrime<499>()
{
     // do nothing
     // only used as dummy function
}

int main()
{
    prime[0]=prime[1]=1; // 0 and 1 is non-prime
    generatePrime<2>();

    for(int i=0;i<500;i++) // print prime numbers
            if(0==prime[i]) // if prime[i]==0, then i is prime
                    cout<<i<<endl;

    return 0;
} 
```

当我运行代码时，我得到 [`Runtime error`](http://ideone.com/Knp96)

我对模板元编程不是很熟悉。请解释为什么会出现运行时错误？如果有任何错误，它必须在编译时显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:10:54.510

或者：

```
int p[] = { 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 
            73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173,
            179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281,
            283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409,
            419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541,
            547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659,
            661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809,
            811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941,
            947, 953, 967, 971, 977, 983, 991, 997, 1009, 1013, 1019, 1021, 1031, 1033, 1039, 1049, 1051, 1061, 1063, 1069,
            1087, 1091, 1093, 1097, 1103, 1109, 1117, 1123, 1129, 1151, 1153, 1163, 1171, 1181, 1187, 1193, 1201, 1213, 1217, 1223,
            1229, 1231, 1237, 1249, 1259, 1277, 1279, 1283, 1289, 1291, 1297, 1301, 1303, 1307, 1319, 1321, 1327, 1361, 1367, 1373,
            1381, 1399, 1409, 1423, 1427, 1429, 1433, 1439, 1447, 1451, 1453, 1459, 1471, 1481, 1483, 1487, 1489, 1493, 1499, 1511,
            1523, 1531, 1543, 1549, 1553, 1559, 1567, 1571, 1579, 1583, 1597, 1601, 1607, 1609, 1613, 1619, 1621, 1627, 1637, 1657,
            1663, 1667, 1669, 1693, 1697, 1699, 1709, 1721, 1723, 1733, 1741, 1747, 1753, 1759, 1777, 1783, 1787, 1789, 1801, 1811,
            1823, 1831, 1847, 1861, 1867, 1871, 1873, 1877, 1879, 1889, 1901, 1907, 1913, 1931, 1933, 1949, 1951, 1973, 1979, 1987,
            1993, 1997, 1999, 2003, 2011, 2017, 2027, 2029, 2039, 2053, 2063, 2069, 2081, 2083, 2087, 2089, 2099, 2111, 2113, 2129,
            2131, 2137, 2141, 2143, 2153, 2161, 2179, 2203, 2207, 2213, 2221, 2237, 2239, 2243, 2251, 2267, 2269, 2273, 2281, 2287,
            2293, 2297, 2309, 2311, 2333, 2339, 2341, 2347, 2351, 2357, 2371, 2377, 2381, 2383, 2389, 2393, 2399, 2411, 2417, 2423,
            2437, 2441, 2447, 2459, 2467, 2473, 2477, 2503, 2521, 2531, 2539, 2543, 2549, 2551, 2557, 2579, 2591, 2593, 2609, 2617,
            2621, 2633, 2647, 2657, 2659, 2663, 2671, 2677, 2683, 2687, 2689, 2693, 2699, 2707, 2711, 2713, 2719, 2729, 2731, 2741,
            2749, 2753, 2767, 2777, 2789, 2791, 2797, 2801, 2803, 2819, 2833, 2837, 2843, 2851, 2857, 2861, 2879, 2887, 2897, 2903,
            2909, 2917, 2927, 2939, 2953, 2957, 2963, 2969, 2971, 2999, 3001, 3011, 3019, 3023, 3037, 3041, 3049, 3061, 3067, 3079,
            3083, 3089, 3109, 3119, 3121, 3137, 3163, 3167, 3169, 3181, 3187, 3191, 3203, 3209, 3217, 3221, 3229, 3251, 3253, 3257,
            3259, 3271, 3299, 3301, 3307, 3313, 3319, 3323, 3329, 3331, 3343, 3347, 3359, 3361, 3371, 3373, 3389, 3391, 3407, 3413,
            3433, 3449, 3457, 3461, 3463, 3467, 3469, 3491, 3499, 3511, 3517, 3527, 3529, 3533, 3539, 3541, 3547, 3557, 3559, 3571}; 
```

> 我读过质数是固定的，最好在编译时生成它们，而不是依赖于运行时。

是的，这是个好主意。
由于它们是固定的，意味着它们只需要生成一次（而不是每次）。

> 所以，我想到了使用内部使用编译时递归的模板元编程。

没有这么好的主意。
编译器设置了一个最大递归级别（取决于我上次检查（不久前）时的编译器 8>16）。最好编写一个一次性程序生成您想要的值，然后使用代码生成您将在真实代码中编译的文件（或像我一样从维基百科剪切/粘贴数字）。

> 我正在使用埃拉托色尼筛法生成素数。这里

不幸的是，这不是一个模板元程序。
它在运行时工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:48:32.200

如前所述，您可以将一组素数用于前 x 个素数，这显然比每次计算它们要快。

虽然这不是您问题的答案，但这里有一些关于素数的信息，根据您的需要可能会有所帮助：

计算前 n 个素数

*   埃拉托色尼筛（你已经知道了）
*   阿特金筛（上述算法的优化版本）

计算小于 n 的素数数量：

*   素数计数功能
*   偏移对数积分
*   [http://en.wikipedia.org/wiki/Prime_counting_function](http://en.wikipedia.org/wiki/Prime_counting_function)

测试是否为素数或寻找大于给定数字的素数：

*   拉宾试验
*   费马素性检验
*   Solovay-Strassen-测试

特殊素数：

*   梅森素数
*   双素数

这只是关于素数主题的非常简短的摘录。根据您的程序必须做什么，研究这些主题可能会很有趣。

# c++ - EnterCriticalSection 未锁定

> ID：11778757
> 
> 赞同：3
> 
> 时间：2012-08-02T13:44:06.923
> 
> 标签：c++, windows

这是我的代码的一小部分：

```
CRITICAL_SECTION _cs;
InitializeCriticalSection(&_cs);

 void lock() {
    if (_initizalized){
      EnterCriticalSection(&_cs);
      EnterCriticalSection(&_cs);
      _locked = true;
    }
  } 
```

（我写了两次“EnterCriticalSection”，因为我注意到这条线不起作用）据我所知，这一定会导致死锁。但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T13:45:25.330

没有相同的线程可以随心所欲地进入它。CRITICAL_SECTION 用于限制多个不同线程之间的访问。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T13:47:16.010

[EnterCriticalSection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)允许来自同一线程的递归调用。从文档中：

> 在线程拥有临界区的所有权后，它可以对 EnterCriticalSection 或 TryEnterCriticalSection 进行额外调用，而不会阻止其执行。这可以防止线程在等待它已经拥有的临界区时自行死锁。每次 EnterCriticalSection 和 TryEnterCriticalSection 成功时线程进入临界区。线程每次进入临界区时都必须调用一次 LeaveCriticalSection。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T13:47:59.277

正如[MSDN 所说](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)，

在线程拥有临界区所有权后，**它可以对 EnterCriticalSection 或 TryEnterCriticalSection 进行额外调用，而不会阻塞其执行**。这可以防止线程在等待它已经拥有的临界区时自行死锁。每次 EnterCriticalSection 和 TryEnterCriticalSection 成功时线程进入临界区。线程每次进入临界区时都必须调用一次 LeaveCriticalSection。

# ruby-on-rails-3 - ActionMailer 没有使用正确的 smtp_settings 和 ExceptionNotification

> ID：11778759
> 
> 赞同：0
> 
> 时间：2012-08-02T13:44:10.173
> 
> 标签：ruby-on-rails-3, actionmailer, exception-notification

由于某种原因，我的 smtp 设置似乎没有被应用。我在 application.rb 中设置了它们，

```
# application.rb     
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "blah.com",
  :user_name            => "user@blah.com",
  :password             => "pwd",
  :authentication       => 'plain',
  :enable_starttls_auto => true
} 
```

但是当我尝试发送邮件（使用 ExceptionNotification）时，我收到了一个连接失败错误，并且一些闲逛告诉我邮件 gem 使用的设置是。

```
{:address=>"localhost", :port=>25, :domain=>"localhost.localdomain", :user_name=>nil, :password=>nil, :authentication=>nil, :enable_starttls_auto=>true, :openssl_verify_mode=>nil, :ssl=>nil, :tls=>nil} 
```

我以前从未见过rails（3.2.7）的这个问题，所以我怀疑这是我正在做的事情，但我已经为修改设置的其他事情而努力，但我找不到任何东西。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:55:51.317

像往常一样，我花了几个小时试图找出问题所在，但是一旦我将它发布到 SO 上，我就会弄清楚发生了什么：S

我像往常一样在开发模式下禁用了 ExceptionNotifier，但 gem 仍然包含在内，所以它仍然尝试做所有事情。显然，邮件配置是没有完成的事情之一。

解决方案：在开发模式下启用或在生产模式下运行。

# javascript - 在 Metro-App 中使用整数键对 ListView 的数据进行分组

> ID：11778760
> 
> 赞同：1
> 
> 时间：2012-08-02T13:44:11.930
> 
> 标签：javascript, windows-8

我想为我的应用程序添加语义缩放。数据包含姓名、名字和唯一ID。使用名称对数据进行分组时，一切正常。但是在 id 之后对数据进行分组会引发异常。我希望它像这样分组：

id = 1 --> 组 10

id = 9 --> 第 10 组

id = 22--> 组 30

这就是我所做的：命名空间

```
 WinJS.Namespace.define("employee",
    {
        groupedNumberItemsList: groupedNumberItemsList,
        itemsListNumber: itemsListNumber
    }); 
```

代码

```
var itemsListNumber = new WinJS.Binding.List(employeeData);
var groupedNumberItemsList = itemsListNumber.createGrouped(getGroupKeyNumber, getGroupDataNumber, compareGroupsNumber);

function compareGroupsNumber(left, right) {
        return parseInt(left) - parseInt(right);
    }
 function getGroupKeyNumber(dataItem) {
        return "" + 10 * Math.ceil(dataItem.ANNr / 10);
    }
 function getGroupDataNumber(dataItem) {
        return {
            Name: "" + 10 * Math.ceil(dataItem.ANNr / 10)
        };
    } 
```

我得到的例外：

> SCRIPT5007：在 ms-appx://microsoft.winjs.1.0.rc/js/ui.js 0x800a138f 中的第 16182 行第 25 列的用户代码中引发了异常但未处理 - JavaScript 中的 Laufzeitfehler：Die Eigenschaft “firstItemIndexHint”eines undefinierten oder Nullverweises kann nicht abgerufen werden。文件：ui.js，行：16182 列：25

在 ui.js 的函数 addItem 中，未设置 newGroupData 并因此导致错误。但我不知道如何解决它。有人能帮帮我吗？

提前致谢。

罗比德

# javascript - 保存动态生成的 jqgrid 列

> ID：11778761
> 
> 赞同：0
> 
> 时间：2012-08-02T13:44:24.053
> 
> 标签：javascript, asp.net-mvc-3, jqgrid

我有一个带有这样生成列的 jqgrid（在 ASP.NET MVC 3 项目中）。他们使用内联编辑：

```
@foreach (var template in Model.TemplateList.Where(m => m.Type == 2))
{
<text>
  { name: 'A'+'@template.ID', index: 'A'+'@template.ID', width: 40, align: 'left',
       editable: true, 
       editoptions: { dataEvents: [{ type: 'keyup', fn: function (e) {
       var $tr = $(e.target).closest("tr.jqgrow"), rowId = $tr.attr("id");
       var nextRow = parseInt(rowId, 10) + 1;
       var total = parseInt(e.target.value, 10);
       if (isNaN(total)) {
           total = 0;
       }
       ChangeValue('A'+'@template.ID', total, $tr);
   }}]}},
 </text>
 } 
```

这些列已生成并且运行良好，直到我尝试保存它们。我试图为控制器赋予价值，但它似乎不起作用。我已经尝试为所有列赋予相同的名称以将它们放入数组中：

```
... name: 'templateColumns', index: 'A'+'@template.ID', width: 40, align: 'left', ... 
```

在控制器中：

```
public ActionResult SaveRow(string[] templateColumns) 
```

但它没有用（我只得到了最后一列的值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:23:00.827

我认为您不能为所有列使用相同的名称，请检查我在评论中给您的链接。现在，如果您将一个列名称指定为 ''A'+'@template.ID'' 并假设它像 A1、A2 一样呈现，那么在您的控制器中，您应该只接受这样的内容。

``public ActionResult SaveRow(string A1, string A2)``

您在控制器中的列名和参数应该相同。

# c++ - 编译时位掩码的递归模板

> ID：11778763
> 
> 赞同：1
> 
> 时间：2012-08-02T13:44:27.883
> 
> 标签：c++, metaprogramming, bitmask

我正在尝试使用元编程技术创建一个编译时位掩码，我的想法是创建这样的东西：

```
unsigned int Mask3 = Mask<2>(); // value = 0x03 = b00000000000000000000000000000011
unsigned int Mask3 = Mask<3>(); // value = 0x07 = b00000000000000000000000000000111
unsigned int Mask3 = Mask<7>(); // value = 0x7F = b00000000000000000000000001111111 
```

我正在尝试的代码是这样的：

```
template <const unsigned int N> const unsigned int Mask()
{
    if (N <= 1)
    {
        return 1;
    }
    else
    {
        return ((1 << N) | Mask<N - 1>());
    }
} 
```

返回 1；

但这会导致成对的警告：

*   警告 C4554：“<<”：检查运算符优先级是否存在可能的错误
*   警告 C4293：“<<”：移位计数为负数或太大

最后，编译错误：

*   错误 C1202：递归类型或函数依赖上下文太复杂。

所以，我推断递归永远不会结束并陷入编译器无限循环，但我不明白为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:57:40.910

它不需要是递归的。这应该可以正常工作：

```
template <const unsigned int N> const unsigned int Mask()
{
    return ((1 << N) - 1);
} 
```

它甚至不需要真的是一个模板。（内联）函数是可以的。

请注意，如果您想支持 的任何值`N`，特别是`N >= sizeof(unsigned int) * CHAR_BIT`，您可能希望将其视为特殊情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:14:19.960

正如已经指出的那样，您依靠运行时检查来停止编译时递归，这是行不通的。更重要的是，也许，对于您想要做的，您正在定义一个函数，在您调用它之前它没有任何价值。因此，即使在使用特化停止递归之后，您仍然有一个嵌套的函数序列，这些函数将在运行时调用。

如果您想要完整的编译时评估，您必须定义类模板的静态数据成员，因为这是编译时常量可以出现在模板中的唯一方式。就像是：

```
template <unsigned int N>
struct Mask
{
    static unsigned int const value = (1 << (N - 1)) | Mask<N - 1>::value;
};

template <>
struct Mask<0>
{
    static unsigned int const value = 0;
}; 
```

（我还更正了你弄错的数值。）

当然，你不需要这么复杂的东西。以下应该可以解决问题：

```
template <unsigned int N>
struct Mask
{
    static unsigned int const value = (1 << (N + 1)) - 1;
};

template <>
struct Mask<0>
{
    static unsigned int const value = 0;
}; 
```

（您仍然需要 0 的特化。否则，0 表示所有位都已设置。）

最后，当然：要访问该值，您需要编写类似`Mask<3>::value`. （您可能希望将其包装在宏中。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T13:54:59.920

模板是在编译时创建的，但您依赖运行时行为来停止递归。

例如，如果你实例化 Mask<2>，它将使用 Mask<1>，它将使用 Mask<0>，它将使用 Mask<-1>，等等。

您有一个运行时检查 N <= 1，但这在编译时没有帮助。它仍然创建了无限的函数序列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T13:56:55.770

要钝化模板实例化递归，您需要引入一种显式特化：

```
template <0> const unsigned int Mask()
{
    return 1;
} 
```

您的递归永远不会结束，因为编译器会尝试为两个 if 分支生成模板实现。因此，当它生成 Mask<0> 时，它也会生成 Mask<0xffffffff> 等等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T12:57:33.173

C++11——没有递归或模板：

```
constexpr unsigned mask(unsigned N) { return unsigned(~(-1<<N)); } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-13T03:00:23.010

到目前为止，答案只解决了第二个错误（C1202），但你问的不止这些。

警告 C4554 是由涉及模板参数和 << 运算符的 Microsoft 编译器错误引起的。因此， (1 << N) 会生成警告。如果 N 是一个普通参数，当然不会有警告。

非常简单的解决方法是使用 (1 << (N)) 而不是 (1 << N)，C4554 消失了！

# php - FOSUserBundle：配置错误

> ID：11778764
> 
> 赞同：0
> 
> 时间：2012-08-02T13:44:29.607
> 
> 标签：php, symfony, fosuserbundle

我正在使用 FOSUserBundle 我也遵循文档但我收到错误

> FileLoaderLoadException：无法从“C:\wamp\www\sym\app/config/config_dev.yml”导入资源“C:\wamp\www\sym\app/config\config.yml”。没有得到什么错误。

**`app/routing.yml`**

```
# Internal routing configuration to handle ESI
#_internal:
#   resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
#   prefix:   /_internal
_user_bundle:
    resources:"@AcmeUserBundle/Resources/config/routing.yml"
    prefix: / 
```

**`app/config.yml`**

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }

framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: Acme\UserBundle\Entity\User 
```

**`app/config_dev.yml`**

```
imports:
    - { resource: config.yml }

framework:
    router:   { resource: "%kernel.root_dir%/config/routing_dev.yml" }
    profiler: { only_exceptions: false }

web_profiler:
    toolbar: true
    intercept_redirects: false

monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        firephp:
            type:  firephp
            level: info

assetic:
    use_controller: false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:12:23.167

您可能已在 config.yml 或 config_dev.yml 文件中包含选项卡。您不包括 yml 文件的选项卡。您可以使用空格代替制表符。希望它会帮助你。

# r - 在带有 NLME 对象和公式的函数调用中使用 predict

> ID：11778773
> 
> 赞同：8
> 
> 时间：2012-08-02T13:45:04.153
> 
> 标签：r

我对使用以下代码的包 NLME 有疑问：

```
library(nlme)
x <- rnorm(100)
z <- rep(c("a","b"),each=50)
y <- rnorm(100)
test.data <- data.frame(x,y,z)
test.fun <- function(test.dat)
{
    form <- as.formula("y~x")   
    ran.form <- as.formula("~1|z")
    modell <- lme(fixed = form, random=ran.form, data=test.dat)
    pseudo.newdata <- test.dat[1,]
    predict(modell, newdata= pseudo.newdata) ###THIS CAUSES THE ERROR!
}

test.fun(test.data) 
```

预测会导致错误，我已经找到了导致它的根本原因。

modell 对象保存了它的调用方式， predict 似乎使用它来进行预测，但无法找到公式对象 form 和 ran.form 因为它没有在正确的命名空间中查找它们。事实上，我可以通过这样做来避免这个问题：

```
 attach(environment(form), warn.conflicts = FALSE)
 predict(modell, newdata= pseudo.newdata) 
 detach() 
```

然而，我的长期目标是将模型保存到磁盘并稍后使用它们。我想我也可以尝试保存公式对象，但这让我觉得这是一种非常烦人且麻烦的处理问题的方法。

我使用自动生成的公式对象而不是明确地写下来，因为我在一种批处理过程中创建了许多具有不同定义的模型，所以我无法避免它们。所以我理想的解决方案是一种创建 lme 对象的方法，这样我之后就可以忘记公式对象并预测“正常工作”。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:53:55.097

尝试替换`lme(arg1, arg2, arg3)`为`do.call(lme, list(arg1, arg2, arg3))`.

```
library(nlme)
x <- rnorm(100)
z <- rep(c("a","b"),each=50)
y <- rnorm(100)
test.data <- data.frame(x,y,z)
test.fun <- function(test.dat)
{
    form <- as.formula("y~x")   
    ran.form <- as.formula("~1|z")
    ## JUST NEED TO CHANGE THE FOLLOWING LINE
    ## modell <- lme(fixed = form, random=ran.form, data=test.dat)
    modell <- do.call(lme, list(fixed=form, random=ran.form, data=test.data))
    pseudo.newdata <- test.dat[1,]
    predict(modell, newdata= pseudo.newdata) ###THIS CAUSES THE ERROR!
}

test.fun(test.data)
#          a 
# 0.07547742 
# attr(,"label")
# [1] "Predicted values" 
```

这是有效的，因为在评估对其构造的调用**之前**`do.call()`，在调用框架中评估其参数列表。要了解这*有*帮助的原因，请键入，然后运行您的代码和我的代码，比较弹出到浏览器时打印的调试消息。**`lme()`*`debug(predict)`***

# c# - 无法包含 ajax 文件

> ID：11778775
> 
> 赞同：0
> 
> 时间：2012-08-02T13:45:05.963
> 
> 标签：c#, html, ajax, visual-studio-2010

尝试设置 Ajax 时，我从 IE 收到此错误消息

```
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Could not load file or assembly 'Ajax' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 13:       <!-- Register the ajax handler -->
Line 14:       <add verb="POST,GET" path="ajax/*.ashx"
Line 15:            type="Ajax.PageHandlerFactory, Ajax" />
Line 16:     </httpHandlers>
Line 17: 
```

我添加到我的 bin 文件夹的文件是 AjaxPro.dll，并且我已将上述代码添加到配置文件中。

谁能告诉我如何解决这个问题？

PS我一直用这个作为指南 [MSDN页面](http://msdn.microsoft.com/en-us/library/aa479042.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T17:37:23.393

我面临同样的问题。目前我的网络配置是

```
 <system.webServer>
         <handlers>
              <add name="AjaxPro" verb="POST,GET" path="ajaxpro/*.ashx" type="AjaxPro.AjaxHandlerFactory, AjaxPro.2"/>
          </handlers>
      <validation validateIntegratedModeConfiguration="false" />
  </system.webServer> 
```

它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:47:41.590

试试看

添加对 AjaxPro.2.dll 的引用

（对于 .NET 1.1 框架使用 AjaxPro.dll）

将以下行添加到您的 web.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <httpHandlers>
      <add verb="POST,GET" path="ajaxpro/*.ashx" 
             type="AjaxPro.AjaxHandlerFactory, AjaxPro.2"/>
    </httpHandlers>

... 
```

对于 .NET 1.1 框架，使用 AjaxPro.dll 将以下行
添加到您的 web.config：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
      <system.web>
        <httpHandlers>
          <add verb="POST,GET" path="ajaxpro/*.ashx"
                 type="AjaxPro.AjaxHandlerFactory, AjaxPro"/>

... 
```

# git - 在 GIT 存储库创建期间不要充斥着收到后的电子邮件

> ID：11778778
> 
> 赞同：1
> 
> 时间：2012-08-02T13:45:18.530
> 
> 标签：git, git-post-receive

我试图在第一次创建 GIT 存储库时阻止大量电子邮件。例如，假设我正在从 SVN 迁移到 GIT，并且我不希望收到大量已在 SVN 中创建的提交的电子邮件。

我还想知道当我可以阻止已经存在的提交的电子邮件泛滥时的用例。

我打算从接收后挂钩执行此操作，并且我正在使用 gitolite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:23:39.580

```
while (<>) 
{
            chomp;
                next unless ($old_rev, $new_rev ,$ref_name) =
                    m/ ^ ([0-9a-f]+) \s+    # old SHA-1
                         ([0-9a-f]+) \s+    # new SHA-1
                         (.*?) # ref_name
                     \s* $ /x;

            my $send_email = _git_cmd_exec("git config hooks.sendmailalert");

            if ($send_email) {
                generate_and_send_mail();
            }
        } 
```

# c# - C# Regex 帮助替换模式

> ID：11778780
> 
> 赞同：1
> 
> 时间：2012-08-02T13:45:20.283
> 
> 标签：c#, regex

我不太擅长正则表达式（我一年只能使用几次），想看看是否有人可以帮助使用 C# 正则表达式语句来查找所有实例

`<####-##-##> or </####-##-##>`

并将其替换为

```
<date-####-##-##> or </date-####-##-##> 
```

以便

```
<2012-01-01>stuff</2012-01-01><2012-05-01>stuff2</2012-05-01> 
```

变成

```
<date-2012-01-01>stuff</date-2012-01-01><date-2012-05-01>stuff2</date-2012-05-01> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:54:37.027

```
string test = "<2012-01-01>stuff</2012-01-01><2012-05-01>stuff2</2012-05-01>";

var regex = new Regex(@"<(/?)(\d\d\d\d)-(\d\d)-(\d\d)>");
var result = regex.Replace(test, @"<$1date-$2-$3-$4>");

Console.WriteLine(result);

//output:
//<date-2012-01-01>stuff</date-2012-01-01><date-2012-05-01>stuff2</date-2012-05-01> 
```

请注意，对细节的需求取决于您正在处理的字符串中的其他文本。还有很多其他标签吗？不是日期的数字？ETC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:57:41.590

如果您检查标签内的值，这将是一个解决方案。

```
if(Regex.IsMatch(input, @"^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$"))
        {
            input.Replace(input,"date-"+input);
        } 
```

# haskell - 具有状态更新的状态相关事件处理

> ID：11778781
> 
> 赞同：7
> 
> 时间：2012-08-02T13:45:20.747
> 
> 标签：haskell, reactive-programming, frp, reactive-banana

我想为[我的项目](https://github.com/copton/ocram)（一个[GDB/MI](http://sourceware.org/gdb/onlinedocs/gdb/GDB_002fMI.html)前端）使用 FRP（即反应香蕉 0.6.0.0）。但是我在声明事件网络时遇到了麻烦。

有来自 GUI 的命令，有来自 GDB 的停止事件。两者都需要处理，处理它们取决于系统的状态。

我目前的方法看起来像这样（我认为这是显示问题所需的最低复杂性）：

```
data Command = CommandA | CommandB
data Stopped = ReasonA  | ReasonB
data State = State {stateExec :: Exec, stateFoo :: Int}
data StateExec = Running | Stopped

create_network :: NetworkDescription t (Command -> IO ())
create_network = do
    (eCommand, fCommand) <- newEvent
    (eStopped, fStopped) <- newEvent
    (eStateUpdate, fStateUpdate) <- newEvent

    gdb <- liftIO $ gdb_init fStopped

    let
      eState = accumE initialState eStateUpdate
      bState = stepper initialState eState

    reactimate $ (handleCommand gdb fStateUpdate <$> bState) <@> eCommand
    reactimate $ (handleStopped gdb fStateUpdate <$> bState) <@> eStopped

    return fCommand 
```

`handleCommand`并`handelStopped`根据当前状态对命令和停止事件做出反应。可能的反应是调用（同步）GDB I/O 函数和触发状态更新事件。例如：

```
handleCommand :: GDB -> ((State -> State) -> IO ()) -> State -> Command -> IO ()
handleCommand gdb fStateUpdate state CommandA = case stateExec state of
   Running -> do
     gdb_interrupt gdb
     fStateUpdate f
 where f state' = state' {stateFoo = 23} 
```

问题是，当`f`由 评估时`accumE`，`state'`有时与 不同`state`。

我不是 100% 确定为什么会发生这种情况，因为我不完全理解时间和同时性的语义以及反应香蕉中“反应”的顺序。但我猜想，由触发的状态更新函数可能会在改变状态`handleStopped`之前被评估。`f`

无论如何，这个事件网络会导致不一致的状态，因为对`f`“当前”状态的假设有时是错误的。

我已经尝试解决这个问题一个多星期了，但我就是想不通。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:38:35.193

看起来您想让`eStateUpdate`事件随时发生`eStop`或`eCommand`发生？

如果是这样，您可以简单地将其表示为两个事件的并集：

```
let        
    eStateUpdate = union (handleCommand' <$> eCommand)
                         (handleStopped' <$> eStopped)

    handleCommand' :: Command -> (State -> State)
    handleStopped' :: Stopped -> (State -> State)

    eState = accumE initialState eStateUpdate

    etc. 
```

请记住：事件的行为类似于普通值，您可以将它们组合成新的值，而不是编写回调函数链。

`newEvent`仅当您想从外部世界导入事件时才应使用该功能。和就是这种情况`eCommand`，`eStopped`因为它们是由外部 GDB 触发的，但该`eStateUpdate`事件似乎是网络内部的。

* * *

关于你当前代码的行为，reactive-banana 在接收到外部事件时总是做以下事情：

1.  计算/更新所有事件发生和行为值。
2.  按顺序运行`reactimate`s。

但是很可能会发生第 2 步再次触发网络（例如通过`fStateUpdate`函数），在这种情况下，网络会计算新值并`reactimate`再次调用 s，*作为此函数调用的一部分*。在这之后，流控制返回到第一个`reactimates`仍在运行的序列，第二次调用`fStateUpdate`会产生奇怪的效果：网络内部的行为已经更新，但是这个调用的参数仍然是一个旧值。像这样的东西：

```
reactimate1
reactimate2
    fStateUpdate      -- behaviors inside network get new values
        reactimate1'
        reactimate2'
reactimate3           -- may contain old values from first run! 
```

显然，这很难解释，也很难推理，但幸运的是，如果您遵守上述指导方针，那就没有必要了。

* * *

从某种意义上说，后一部分体现了以传统风格编写事件处理程序的技巧，而前一部分体现了 FRP 风格的事件编程的（相对）简单性。

黄金法则是：

*处理事件时不要调用另一个事件处理程序。*

您不必遵循此规则，它有时会很有用；但如果你这样做，事情会变得复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:00:42.130

据我所知，FRP 似乎不是我的问题的正确抽象。

所以我切换到带有类型消息的演员 `State -> IO State`。

这为我提供了所需的事件序列化以及在更新状态时执行 IO 的可能性。我松懈的是对事件网络的精彩描述。但是对于演员来说也不算太糟糕。

# c# - Dispose 中的空“使用”语句

> ID：11778790
> 
> 赞同：22
> 
> 时间：2012-08-02T13:45:56.397
> 
> 标签：c#

最近我看到一些代码写成如下：

```
public void Dipose()
{
   using(_myDisposableField) { }
} 
```

这对我来说似乎很奇怪，我更愿意看到`myDisposableField.Dispose();`

使用“使用”来处理对象而不是显式调用的原因是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-02T13:48:10.113

~~不，根本没有。它只会编译成一个空`try/finally`并最终调用`Dispose`.~~

去掉它。您将使代码更快、更易读，也许最重要的是（当您在下面继续阅读时）***在其意图上更具表现力***。

**更新**：他们*有点*聪明，等效代码需要一个空值检查，并且根据 Jon Skeet 的建议，如果涉及多线程，也需要一个本地副本（与标准事件调用模式相同，以避免空值之间的竞争检查和方法调用）。

```
IDisposable tmp = _myDisposableField; 

if (tmp != null) 
    tmp.Dispose(); 
```

从我在我编写的示例应用程序的 IL 中可以看到，您似乎还需要直接`_myDisposableField`对待`IDisposable`。**如果任何类型显**`IDisposable`式实现接口并*同时*提供方法，这将很重要。***`public void Dispose()`***

 ***此代码也不会尝试复制`try-finally`使用 时存在的`using`，但假设这是不必要的。然而，正如 Michael Graczyk 在评论中指出的那样，使用`finally`提供了对异常的保护，特别是`ThreadAbortException`（可能在任何时候发生）。也就是说，实际发生这种情况的窗口非常小。

虽然，我会在他们这样做并没有真正理解它给他们带来的微妙“好处”这一事实上赌一把。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:24:39.173

您发布的示例中有一个非常微妙但邪恶的错误。

虽然它“编译”为：

```
try {}
finally
{
    if (_myDisposableField != null) 
        ((IDisposable)_myDisposableField).Dispose();
} 
```

对象应该在 using 子句中实例化，而不是在外部：

> 您可以实例化资源对象，然后将变量传递给 using 语句，**但这不是最佳实践**。在这种情况下，在控制离开 using 块后，对象仍然在范围内，但可能无法访问其非托管资源。换句话说，它不再完全初始化。如果您尝试在 using 块之外使用该对象，则可能会引发异常。出于这个原因，最好在 using 语句中实例化对象并将其范围限制在 using 块中。

—<a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-statement" rel="nofollow noreferrer">using 语句（C# 参考）

换句话说，它是肮脏而骇人的。

干净的版本在 MSDN 上有非常清楚的说明：

*   如果您可以将实例的使用限制为方法，则使用`using`在其边框上带有构造函数调用的块。不要`Dispose`直接使用。
*   如果您需要（但*确实*需要）使实例保持活动状态，直到父级被处置，然后使用[Disposable 模式](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)显式处置，仅此而已。有不同的方式来实现 dispose 级联，但是它们都需要类似地完成以避免非常微妙和难以捕捉的错误。[框架设计指南](http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.100).aspx)中的 MSDN 上有一个非常好的资源。

最后，请注意以下内容，如果您使用*非托管*资源，您应该只使用该`IDisposable`模式。确保它真的需要:-)

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-09T08:40:11.027

[正如在这个答案中](https://stackoverflow.com/a/11778831/23354)已经讨论过的，这是避免空测试的一种厚颜无耻的方式，但是：它可能不止于此。在现代 C# 中，*在许多情况下*，您可以使用空条件运算符实现类似的效果：

```
public void Dipose()
    => _myDisposableField?.Dispose(); 
```

但是，公共 API 上不需要 (of `_myDisposableField`)类型；`Dispose()`它可能是：

```
public class Foo : IDisposable {
    void IDisposable.Dispose() {...}
} 
```

甚至更糟：

```
public class Bar : IDisposable {
    void IDisposable.Dispose() {...}
    public void Dispose() {...} // some completely different meaning! DO NOT DO THIS!
} 
```

在第一种情况下，`Dispose()`将找不到方法，在第二种情况下，`Dispose()`将调用*错误的*方法。在这两种情况下，这个`using`技巧都会奏效，演员也一样（尽管如果它是一个值类型，这会*再次做一些稍微不同的事情）：*

```
public void Dipose()
    => ((IDisposable)_myDisposableField)?.Dispose(); 
```

如果您不确定该类型是否是一次性的（在某些多态性场景中会发生），您也可以使用：

```
public void Dipose()
    => (_myDisposableField as IDisposable)?.Dispose(); 
```

或者：

```
public void Dipose()
{
    using (_myDisposableField as IDisposable) {}
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T13:51:44.073

using 语句定义了应在其后释放引用对象的代码范围。

是的，您可以在完成后调用 .dispose ，但不太清楚（恕我直言）对象的范围是什么。YMMV。****

# objective-c - 查看 IOS 5.x 和 IOS 4.x 之间的行为差 异

> ID：11778792
> 
> 赞同：1
> 
> 时间：2012-08-02T13:46:02.057
> 
> 标签：objective-c, ios, animation, view

我一直在尝试为图像视图设置动画以在屏幕上向上滑动。当位置向上移动时，视图高度也会增加。

在我的 iPhone 4S (5.x) 上，图像视图的行为与预期一致，视图仅随着其高度的增加而向上移动，但是在我的 iPhone 3G (4.1) 上，视图在此动画期间向下移动了一点。

当图像视图用于创建不昂贵的阴影效果时，需要这样的精度水平。它的对齐对于效果很重要。该图像是可调整大小的图形。

这就是我更改视图位置和大小的方式

```
 CGRect oldShadow = self.shaddowView.frame;
  oldShadow.size.height = oldShadow.size.height+200;
  oldShadow.origin.y = oldShadow.origin.y - 200;
  self.shaddowView.frame =oldShadow; 
```

这是视图的图像设置为可调整大小的方式：

```
 UIImage* shadow = [[UIImage imageNamed:@"shadow.png"] stretchableImageWithLeftCapWidth:20 topCapHeight:20];
self.shaddowView.image = shadow; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:52:57.837

我使用了以下动画，不仅在起始位置而且在预期的最终位置周围都有一个边框，这样我就可以确认是否发生了任何不希望的视图移动（除了明显的向上扩展），但它工作正常iOS 4.2.1：

```
[UIView animateWithDuration:2.0
                 animations:^{
                     CGRect newImageFrame = imageView.frame;
                     newImageFrame.origin.y -= stretchBy;
                     newImageFrame.size.height += stretchBy;
                     imageView.frame = newImageFrame;
                 }]; 
```

我没有 iOS 4.1 设备（我的旧 3G 测试手机运行的是 iOS 4.2.1，该设备支持的最新 iOS 版本），所以我不能说，但 iOS 4.2.1 没问题.

不过，我必须承认，我发现当您对帧的更改进行动画处理时，最终帧不太可能与您指定的完全相同。如果你`NSLog`完成时的框架，它是不是正确的值？或者你是说它在动画过程中暂时移动但最终在正确的位置？或者它在动画期间向下移动并且即使动画完成也最终处于错误的位置？

我想知道是否还有其他事情发生（例如，您的动画视图是滚动视图的子视图，它本身可能会发生变化？或者这里没有显示一些代码在动画之后意外地进一步调整帧？等等）。似乎有点调试应该确认框架是否实际上不是您想要的，或者是否存在其他问题。

* * *

我最初回答了建议`shouldRasterize`选项，但如果您尝试支持旧的 iPhone 3G 设备，那么这可能还不够好。这些旧手机肯定有点口吃。无论如何，这是我原来的答案：

我假设您这样做是因为`layer`阴影功能有点占用 CPU。但我听说（但不能说）如果你使用这个`shouldRasterize`选项，它会好一点：

```
viewThatNeedsShadow.layer.shadowColor = [UIColor blackColor].CGColor;
viewThatNeedsShadow.layer.shadowOffset = CGSizeMake(3.0, 3.0);
viewThatNeedsShadow.layer.shadowOpacity = 0.5;
viewThatNeedsShadow.layer.shouldRasterize = YES;
viewThatNeedsShadow.clipsToBounds = NO; 
```

# c# - ASP.NET 自定义错误 404

> ID：11778798
> 
> 赞同：1
> 
> 时间：2012-08-02T13:46:15.520
> 
> 标签：c#, asp.net, web-config, custom-error-pages

所以我基本上在 web.config 中设置了一个 customError，当 web 服务中发生异常时它可以正常工作，但是现在我想添加另一个 customError 来查找 http 404 错误。当 web 服务出现异常时，ErrorPage.aspx CustomError 工作正常，当我输入无效的 URL 时，出现我不想要的黄屏死机，我希望出现 404.aspx 错误。

这是我的 web.config 代码

```
<customErrors mode="On" defaultRedirect="~/ErrorPages/ErrorPage.aspx">
  <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
</customErrors> 
```

这是我输入错误 URL 时返回的 URL

```
http://localhost:28745/ErrorPages/404.aspx?aspxerrorpath=/Accounfghogin.aspx 
```

这是我输入错误 URL 时出现的黄屏死机

注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:39:15.010

如果您尝试将波浪号 (~) 替换为文件的完整路径，它会起作用吗？

# ruby-on-rails - RoR 应用程序中缺少模板

> ID：11778802
> 
> 赞同：0
> 
> 时间：2012-08-02T13:46:25.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Rails 中创建了一个应用程序“留言簿”，然后使用“rails g 控制器条目”创建了一个控制器。之后，我在 app/views/entries/ 中创建了 index.html，并在其中写了以下内容：-

```
 <h1>Hello <%= @name %></h1>
<%= form_tag :action => 'sign_in' do %>
<p>Enter your name:
<%= text_field_tag 'visitor_name', @name %></p>
<%= submit_tag 'Sign in' %>
<% end %> 
```

在entry_controller.rb 中写着：-

```
class EntriesController < ApplicationController
    def sign_in
        @name = params[:visitor_name]
    end
end 
```

之后，当我运行“rails s”并转到：-

```
localhost:3000/entries/ 
```

它向我展示了应该存在的正确视图。

当我输入名称并按下按钮时，它会路由到`localhost:3000/entries/sign_in`并显示以下错误：-

模板丢失

缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的模板条目/sign_in、application/sign_in。搜索：*“/home/redblink/rbtest/guestbook/app/views”

请让我知道发生了什么事？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:50:46.547

`/home/redblink/rbtest/guestbook/app/views/sign_in.html.erb`您必须使用要向用户显示的内容创建一个 ERB 模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:30:45.630

**使固定：**

发生此错误是因为 rails 服务器无法`sign_in.html.erb`在`app/views/entries`目录中找到具有名称的模板。你应该创建它。

**解释：**

默认情况下，rails 会尝试查找与您的操作具有相同名称的模板，即在您的情况下为 sign_in。如果您不想创建或呈现此默认模板，则需要通过`render`在您的操作中使用方法来指定另一个要呈现的模板。`render`方法在 ActionController::Base 类中定义

# android - Android NDK - 如何创建仅给定大小（宽度和高度）的多个位图

> ID：11778803
> 
> 赞同：0
> 
> 时间：2012-08-02T13:46:25.847
> 
> 标签：android, c++, android-ndk

我是新来的——提出问题、android 开发和 NDK。我希望我足够清楚。

我需要能够创建多个表面/位图。例如

```
Surface s = new Surface (width, height) 
```

*   它们可以相互复制 s->copy (s2) 将表面 s 复制到 s2（包括 RGBA 和 alpha-text 表面之间的格式转换以及调整大小/缩放）
*   使用 fill (x, u, w, h, color) - 用颜色填充矩形（类似于 glClear）

据我了解，您只有一个由 android_app->window 变量提供给您的 ANativeWindow，如果我使用 EGL，我最多可以创建 1 个 EGLSurface。我需要能够创建许多表面（例如~ 100 个）。这怎么可能？然后将它们全部传送到窗口帧缓冲区

还有 android/bitmap.h 但我不知道如何使用它。但它没有为我提供创建表面的 API，只是为了已经创建或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:40:08.130

**您可以通过 JNI 调用创建位图：**

```
// setup bitmap class
jclass bitmap_class = (jclass)env->FindClass ("android/graphics/Bitmap");
// setup create method
jmethodID bitmap_create_method = env->GetStaticMethodID (bitmap_class, "createBitmap", "(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;");
// get_enum_value return jobject corresponding in our case to Bitmap.Config.ARGB_8888\. (the implentation is irrelevant here)
jobject bitmap_config_ARGB = get_enum_value ("android/graphics/Bitmap$Config", "ARGB_8888");
// Do not forget to call DeleteLocalRef where appropriate

// create the bitmap by calling the CreateBitmap method
// Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
jobject bitmap =  env->CallStaticObjectMethod (bitmap_class, bitmap_create_method, width, height, bconfig);

// at the end of course clean-up must be done
env->DeleteLocalRef (bitmap); 
```

* * *

**您可以通过 API 访问一些位图属性和原始像素`android/bitmap.h`**

`AndroidBitmap_getInfo`提供有关格式（`ARGB_8888`或仅 alpha）、尺寸、步幅或间距的信息。

`AndroidBitmap_lockPixels`给出原始像素。完成对像素的操作后，必须调用`AndroidBitmap_unlockPixels`

* * *

**做`fill (color, dimension)`**

JNI 可以提供帮助。这可以通过 JNI 调用来编写（我将使用 java，因为它更容易编写并且更易于阅读）。

```
canvas.save ();
canvas.setBitmap (bitmap);
canvas.clipRect (left, top, right, bottom, Region.Op.REPLACE);
canvas.drawColor (color,  PorterDuff.Mode.SRC);
canvas.restore (); 
```

* * *

**将一个位图复制到另一个位图 -`copy (src_bitmap, src_rect, dest_rect)`**

```
canvas.save ();
canvas.setBitmap (dest_bitmap);
canvas.clipRect (left, top, right, bottom, Region.Op.REPLACE);
canvas.drawBitmap (src_bitmap, src_rect, dest_rect, null);
canvas.restore (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:12:43.437

您可以创建[位图](http://developer.android.com/reference/android/graphics/Bitmap.html)并使用 jnigraphics 库 (android/bitmap.h)，也可以使用多个 EGL 纹理。

使用位图您必须`fill`自己实现，因为位图只有基于像素的 getter 和 setter（请参阅 参考资料[`setPixels(..)`](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixel%28int,%20int,%20int%29)）

# php - 用 PHP 更新 mySQLDatabase 中的密码

> ID：11778814
> 
> 赞同：0
> 
> 时间：2012-08-02T13:47:12.373
> 
> 标签：php, mysql

我正在尝试更新表“nbk6_user”的密码。

启动脚本时出现错误：“Fehler”

我在做 mysql_query 对吗？

有人可以帮我吗？

```
<?php
include 'conf.php';
$connection = mysql_connect("****", "****", "****");
mysql_select_db($datenbank);
session_start();

if(!isset($_SESSION["name"]))
{
    die("Für diese Seite musst du dich zuerst anmelden!");
}
$name = $_SESSION["name"];

$pw1 = $_POST["pw1"];
$pw2 = $_POST["pw2"];

$pw1 = trim($pw1);
$pw2 = trim($pw2);

if($pw1 == "")
{
die("Kein Passwort gesetzt.");
}

if($pw1 == $pw2)
{
    $query = mysql_query("UPDATE nbk6_user SET password='$pw1', WHERE name='$name'");
    if(!$query)
    {   
        echo "Fehler";
    }
}
else
{
    echo "Die Passwörter stimmen nicht überein";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:50:00.847

尝试使用 mysql_error 查看错误，但我认为你在 password='$pw1' 之后添加了“，”我想试试吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:48:48.880

查询中的错误使用此

```
$query = mysql_query("UPDATE nbk6_user SET password='".$pw1."' WHERE name='".$name."'"); 
```

[还在这里](https://stackoverflow.com/questions/11774315/change-password-code)阅读第一个答案，这将向您简要介绍为什么不应该使用 mysql_* 并使用 mysqli 和 PDO ，注意 sql 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:50:57.467

SET 之后不应该有昏迷，并且在处理 MySQL 查询（或任何字符串，这是不好的做法）时，最好避免在字符串中插入变量。

尝试：

```
$query = mysql_query("UPDATE nbk6_user SET password='".$pw1."' WHERE name='".$name."'");
if(!$query)
{   
    mysql_error();
    echo "Fehler";
} 
```

如果更改后的查询没有修复它[mysql_error()](http://php.net/manual/en/function.mysql-error.php)将解释问题出在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:01:55.993

你有一个悬空的逗号：

```
... SET password='$pw1', WHERE ...
                       ^--- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-23T20:28:39.720

首先 ：

`session_start();`必须是代码的第一行。

然后

```
 $query = mysql_query("UPDATE nbk6_user SET password='$pw1', WHERE name='$name'");
must be
$pw1=md5($pw1);
 $query = mysql_query("UPDATE nbk6_user SET password='$pw1' WHERE name='$name'"); 
```

# regex - 模型验证正则表达式从不匹配

> ID：11778815
> 
> 赞同：3
> 
> 时间：2012-08-02T13:47:14.170
> 
> 标签：regex, asp.net-mvc-3, razor

我有以下正则表达式注释：

```
 [RegularExpression(@"(?=.{6,})(?=(.*\d){1,})(?=(.*\W){1,})", ErrorMessage = "Password is not strong enough!")]
    public string Password { get; set; } 
```

这是我在 MembershipProvider 中使用的正则表达式的复制/粘贴，它可以在其中工作，因为我可以使用“admin1 *”之类的密码进行注册。我也在 RegexHero 中测试了这个正则表达式，它确实有效。

当我将表单回传到控制器时，该值也存在，但模型永远不会验证。

任何人都知道这可能是什么？

提前致谢，

编辑：

我测试了一个正则表达式，它验证只包含 5 个数字的字符串，当我输入 12345 时它确实验证了，而其他字符串（如“abc”）则失败了。所以正则表达式机制似乎工作..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:02:25.790

您的正则表达式很好，问题在于如何`IsValid`在`RegularExpressionAttriubte`. 因为输入只有在与开头的整个模式匹配时才有效。

`IsValid`Resharper 看到的方法摘录：

```
public override bool IsValid(object value)
{
  //...
  Match match = this.Regex.Match(input);
  if (match.Success && match.Index == 0)
    return match.Length == input.Length;
  else
    return false;
} 
```

您的模式`@"(?=.{6,})(?=(.*\d){1,})(?=(.*\W){1,})`与输入相匹配，但由于使用了[Grouping 构造](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#matched_subexpression)，因此`admin1*`将`match.Success`永远是并且评估为永远。`true``match.Legth``0``match.Length == input.Length``false`

它在 中起作用，`MembershipProvider`因为它只检查`match.Success`，而不关心匹配的长度。

我看到两种可能的解决方案：

1.  重写您的正则表达式模式以不使用分组构造（我不擅长正则表达式，所以我无法在这里提供帮助）
2.  创建您自己的`RegularExpressionAttriubte`（或从内置的派生）在`IsValid`您只检查的方法中`match.Success`

# c# - 作为 DataTable 的 gridView.DataSource 在 asp.net 中设置为空

> ID：11778817
> 
> 赞同：6
> 
> 时间：2012-08-02T13:47:16.260
> 
> 标签：c#, asp.net, gridview, datasource

我将我的 gridview.datasource 设置为一个数据表变量，如下所示：

```
DataTable dt = gvPaymentHistory.DataSource as DataTable; 
```

gvPaymentHistory.DataSource 有一条记录，但是在该行执行后 dt 为空。如何将数据源记录传递给 dt？

**编辑**

DataSource 是一个类对象的 List 集合。它不是数据集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:51:47.180

简单的方法是在将数据绑定到网格时将网格的数据源存储在视图源中，然后在每次需要时从视图源中检索它。

```
Gridview.Datasource = yourdatasource;
ViewState["mydatasource"] = yourdatasource; 
```

检索时

```
DataTable dt = ViewState["mydatasource"] as DataTable; 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:50:42.913

**编辑**

如果投标类型是列表而不是尝试

```
List<CodeEntity> data= gvPaymentHistory.DataSource as List<CodeEntity>; 
```

或者

```
 List<CodeEntity> codes = (List<CodeEntity>)gvPaymentHistory.DataSource; 
```

* * *

检查这个

```
if(gvPaymentHistory.DataSource is DataTable)
   DataTable dt = gvPaymentHistory.DataSource as DataTable;
if(gvPaymentHistory.DataSource is DataView )
    DataView dv = gvPaymentHistory.DataSource as DataView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:56:11.713

试试这个方法：使用[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)

```
BindingSource bs = (BindingSource)gvPaymentHistory.DataSource;
DataTable dt =((YourDataSetType) (bs.DataSource)).Tables[0]; 
```

# cakephp-1.3 - 循环发送电子邮件 cakephp

> ID：11778821
> 
> 赞同：0
> 
> 时间：2012-08-02T13:47:30.817
> 
> 标签：cakephp-1.3, cakephp-2.0

我想向不同的用户发送电子邮件，例如我使用的电子邮件问题是需要很长时间

```
foreach($users as $user){

$this->Email->smtpOptions = array(
                              'port' => '25',
                              'timeout' => '30',
                              'host' => 'smtp.topnet.tn',
                           );
            Envoie Mail 
            $this->Email->delivery = 'smtp';

            $this->Email->reset();
            $this->Email->from = $from;
            $this->Email->to = $To;
            $this->Email->subject = $subject;
            $this->set('id_user',$user_id);
            $this->set('password',$pass);
            $this->Email->template = 'activcompte';

            $this->Email->sendAs = 'both';

           $this->Email->send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:22:21.783

不要使用 foreach 循环将邮件一个一个地发送给所有用户，只需将所有用户组成一个数组......就像......

```
 $Recepients[0] => abc@gmail.com
  $Recepients[1] => def@gmail.com
  $Recepients[2] => ghi@gmail.com
  ....

 and then assign this "$Recepients" array 
```

$this->Email->to = $Recepients;

# php - 为什么 xdebug 和 DBGp 客户端 vim 插件无法调试 PHP？

> ID：11778823
> 
> 赞同：0
> 
> 时间：2012-08-02T13:47:47.603
> 
> 标签：php, vim, xdebug

我已经配置了 xdebug 并安装了一个 vim 插件来调试 PHP。这个插件的链接是[http://www.vim.org/scripts/script.php?script_id=1929](http://www.vim.org/scripts/script.php?script_id=1929)。但是一旦我打开一个 PHP 文件并按 F5，它会从远程 pc 打开那个 PHP 页面，显示一个错误，并且在这个地方调试失败。没有步入或跨过，为什么？

错误信息的详细信息如下：

```
waiting for a new connection on port 9001 for 5 seconds...
connection from  ('127.0.0.1', 48460)
Connection closed, stop debugging (<class exceptions.ImportError at 0xb7a6f3ec>, <exceptions.ImportError instance at 0xb7a047ec>, <traceback object at 0xb7a1
102c>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:14:59.610

这是一个相当老的插件，似乎使用了过时的[python 库](https://github.com/vim-scripts/DBGp-client/blob/master/plugin/debugger.py)。但是，似乎有一些更新的插件可用：

1.  [DBGPavim](http://www.vim.org/scripts/script.php?script_id=4059)
2.  [DBGp 远程调试器](http://www.vim.org/scripts/script.php?script_id=2508)

# python - 用 /openmp 编译的模块不能导入？

> ID：11778824
> 
> 赞同：1
> 
> 时间：2012-08-02T13:47:50.130
> 
> 标签：python, python-2.7, openmp, cython

我有一个非常简单的 cython 代码`prange`，它在 linux 中运行良好。但是，当我尝试在 Windows 中执行此操作时。我遇到了可以编译但不能导入的问题：

```
ImportError: DLL load failed: This application has failed to start because the a
pplication configuration is incorrect. Reinstalling the application may fix this
problem. 
```

此外，在 Windows 中我不能`from cython.parallel import threadlocal`？！奇怪的...

有没有人可以指出方向？

系统工作正常：**linux64**，编译器**gcc**，包：**Python 2.7，cython 0.16**

系统有问题：**Win64**，编译器：**MSVC VS2008**，包：**Python 2.7，cython 0.16**

这是我的简单 cython pyx：

```
cimport cython
from cython.parallel import prange

def f(int n):
    cdef int i
    cdef int sum = 0
    for i in prange(n, nogil=True):
        sum += i
    print sum 
```

这是我的 setup.py：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy as np

setup(
    cmdclass = {'build_ext': build_ext},
    include_dirs = [np.get_include()], 
    ext_modules = [Extension("pcython1",  ["pcython1.pyx"],extra_compile_args=['/openmp',],),]
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:41:19.637

由于 VS2008 安装程序错误，amd64_microsoft.vc90.openMP 没有安装到 winSxS 中。安装 openMP 运行时将解决这个问题。

有关详细信息，请参阅此问题：[如何正确设置 VS2008 以进行 x64 编程？](https://stackoverflow.com/questions/13217174/how-to-properly-setup-vs2008-for-x64-programing/13222870#13222870)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T16:19:20.027

使用[MinGW](http://www.mingw.org/)（请参阅[此问题](https://stackoverflow.com/questions/943658/cython-pyximport-error-on-windows)以使用 cython 正确设置 mingw），然后将**setup.py**更新为：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy as np

ext_modules = [Extension("convolve_cy", ["convolve_cy.pyx"],
                         extra_compile_args = ["-O3", "-fopenmp"],
                         extra_link_args=["-fopenmp"])]

setup (
    name = 'performance test app',
    cmdclass = {'build_ext': build_ext},
    include_dirs = [np.get_include()],
    ext_modules = ext_modules,
) 
```

这适用于具有 Python 2.7 和 cython 2.0 的 windows7 多核 64 位机器。

# android - 使用删除按钮删除 ListView 元素

> ID：11778830
> 
> 赞同：0
> 
> 时间：2012-08-02T13:48:05.503
> 
> 标签：android, android-listview

这个问题可能已经多次回答了，但它没有涵盖我正在寻找的内容。

我有一个带有自定义适配器的列表视图。`ImageView`列表视图有一个文本视图和一个附加到它的行的删除。我想在单击项目时从项目中提取文本视图的值，以便也从数据库中删除该项目。我还想更新列表项，我正在`listview.setOnClickListener`为此目的使用。所以我不能使用相同的删除。我已经阅读了有关使用`setTag()`和`getTag()`方法的信息，但不确定如何准确地做到这一点。我想将 textview 或者更确切地说是 texview 的字符串值设置为适配器内删除 imageview 的标签。然后在我的活动里面`getTag()`使用。`delete.setOnClickListener`谁能帮我解决这个问题？

相关适配器代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;
    MyStringReaderHolder holder;

    if(row==null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent,false);

        holder= new MyStringReaderHolder();

        holder.workLogID = (TextView)row.findViewById(R.id.worklog_id);
        holder.delete = (ImageView) row.findViewById(R.id.delete_entry);

        row.setTag(holder);
    }
    else
    {
        holder=(MyStringReaderHolder) row.getTag();
    }        

    ViewWorkEntryBean mrb = data.elementAt(position);

    holder.workLogID.setText(mrb.workLogID); 
    // mrb.workLogID contains the desired string which I want to pass to delete as a tag      
    // How do I set the tag?     

    return row;
}

 static class MyStringReaderHolder
 {
String billable;
 TextView workLogID;
 ImageView delete;

 } 
```

这是 onClickListener 里面的活动：

```
ImageView deleteButton = (ImageView) findViewById(R.id.delete_entry);

        deleteButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
            String ID = null;
                            // how do I get the value of the tag into the string ID 

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:18:40.273

好吧，我将做一些假设，你可以告诉我哪些是错误的：

*   R.id.delete_entry 是行布局中的删除按钮
*   R.id.worklog_id 是行布局中的文本视图

如果这是真的，你希望你的 getView 代码看起来像这样：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent,false);
    }

    final TextView label = (TextView)row.findViewById(R.id.worklog_id);
    final ImageView delete = (ImageView) row.findViewById(R.id.delete_entry);

    ViewWorkEntryBean mrb = data.elementAt(position);

    // set tag here
    delete.setTag(mrb.workLogID);
    label.setText(mrb.workLogID /* or whatever */);

    delete.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            // You can now get your tag value here
            String ID = delete.getTag();

        }
    });

    return row;
} 
```

我实际上并没有运行这段代码......所以希望我没有犯太多愚蠢的错误。

编辑：

然后，您可以拥有看起来与您开始的地方非常相似的代码：

```
/** This is in your ListView class */
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent,false);
    }

    final TextView label = (TextView)row.findViewById(R.id.worklog_id);
    final ImageView delete = (ImageView) row.findViewById(R.id.delete_entry);

    ViewWorkEntryBean mrb = data.elementAt(position);

    // set tag here
    delete.setTag(mrb.workLogID);
    label.setText(mrb.workLogID /* or whatever */);

    return row;
} 
```

然后在您的活动中：

```
/** This is in your Activity class */
ImageView delete = /* However you were getting the current row's delete button */;
delete.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        // You can now get your tag value here
        String ID = v.getTag();

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T07:31:51.487

这就是我所做的。

用一种方法创建了一个接口。

> ```
> public interface ItemRemovedListener
> {
> public void ItemRemoved(OrderDetails orderDetails);
> } 
> ```

在准备适配器时添加了实现接口的类的回调。

> ```
> adapter = new CartListItemAdapter(this, R.id.listView_cart, orderDetailsList,this); 
> ```

每当删除项目时调用侦听器。（在适配器类中删除按钮的点击事件中）

> ```
>  itemRemovedListener.ItemRemoved(orderDetails); 
> ```

处理了实现我的接口的类中的项目删除事件。

> ```
> @Override
> public void ItemRemoved(OrderDetails orderDetails) {
>     adapter.remove(orderDetails);
>     adapter.notifyDataSetChanged();
> } 
> ```

这解决了我的问题。我想提一下，我的删除按钮的单击事件侦听器在我的适配器类中。所以我为项目删除事件创建了一个回调。

希望这可以帮助。

# android - 锁定屏幕旋转，但仍然检测到它

> ID：11778832
> 
> 赞同：0
> 
> 时间：2012-08-02T13:48:12.807
> 
> 标签：android, screen-orientation

我正在构建一个应用程序，它是纵向格式的主要布局

我锁定方向

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

但是，无论如何我都需要检测屏幕方向的变化，因为如果屏幕旋转，我想加载另一个 Activity。

怎么做 ？

我尝试了 onConfigurationChanged 但它从未被调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:08:36.833

如果 onConfigurationChanged 没有触发，请注意以下几点：

声明清单时，请确保您至少为活动 configChanges 定义了方向和屏幕大小。像这样：

```
<activity android:name="com.test.act" android:configChanges="orientation|screenSize"> 
```

确保设备没有阻止旋转。例如，如果您使用的是 Nexus 7：

[http://www.howtogeek.com/120056/how-to-enable-landscape-orientation-on-the-nexus-7s-home-screen/](http://www.howtogeek.com/120056/how-to-enable-landscape-orientation-on-the-nexus-7s-home-screen/)

# java - JFreeChart：在 XYLineChart 的轴上添加自定义字符串刻度

> ID：11778836
> 
> 赞同：2
> 
> 时间：2012-08-02T13:48:42.140
> 
> 标签：java, swing, jfreechart

我的应用程序正在使用 JFreeChart 生成大量的 XYLineCharts（> 180k 数据点）。

每个数据点都有一个序号（从 1 到 185000），用于 X 轴刻度值（整数值，具有自动范围）：

```
plot.getDomainAxis().setStandardTickUnits(NumberAxis.createIntegerTickUnits()); 
```

到目前为止效果很好。现在的困难是添加一个带有自定义值的 X 轴刻度，因为我想为显示的第一个和最后一个数据点添加一个 X 轴标签（我想显示第一个和最后一个数据点的生产日期 - 它们是已经按时间顺序排序）。

我花了几个小时搜索：似乎 JFreeChart 绝对不支持它。我也没有找到任何破解方法（例如注释只能放在情节上）。

任何有关如何解决此问题的指针/想法将不胜感激！

托马斯

PS：图表可以放大/缩小，因此需要相应地更新自定义刻度。

PS2：使用类别轴似乎不是一个解决方案，因为它不会自动更改刻度范围（我认为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:50:10.520

您可以考虑使用`NumberFormatOverride`

```
Calendar startDate = Calendar.getInstance();
final String firstDataPointProductionDate = startDate.getTime().toString();
startDate.add(Calendar.DATE, 10);
final String latDataPointProductionDate = startDate.getTime().toString();
axis.setNumberFormatOverride(new NumberFormat(){

    @Override
    public StringBuffer format(double number, StringBuffer toAppendTo, FieldPosition pos) {
        if (number > 0 )
            return new StringBuffer(firstDataPointProductionDate);
        else if ( number < 185000 )
            return new StringBuffer(latDataPointProductionDate);
        else 
            return new StringBuffer(String.format("%9.0f", number));
        }

    @Override
    public StringBuffer format(long number, StringBuffer toAppendTo, FieldPosition pos) {
        return new StringBuffer(String.format("%s", number));
    }

    @Override
    public Number parse(String source, ParsePosition parsePosition) {
        return null;
    }
}); 
```

您可以根据需要格式化日期。

# objective-c - iOS 模拟器已知问题

> ID：11778841
> 
> 赞同：1
> 
> 时间：2012-08-02T13:48:56.603
> 
> 标签：objective-c, ios, ios-simulator

我已将配置的设备设置为由 XCode 和内置的 iOS 模拟器构建。一般来说，我喜欢在模拟器中进行快速错误修复和早期测试，因为它往往能够更快地进行多次运行。

**有谁知道列出模拟器已知问题的资源？**“已知问题”是指模拟器的行为与设备的行为显着偏离的情况。有时我不知道某些东西是真正的错误还是只是模拟器问题，在测试设备上运行只是为了验证有点痛苦。

# asp.net-mvc - 如何使用 Telerik mvc 控件创建向下钻取图表

> ID：11778847
> 
> 赞同：1
> 
> 时间：2012-08-02T13:49:23.240
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

我的问题是标题本身。有没有办法做到这一点？提前致谢 。我正在使用 MVC3 剃刀

我正在使用telerik 控件的试用版并从telerik 网站下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:29:11.633

我没有尝试过，但是您可以使用 OnSeriesClick 事件来处理用户单击的元素并尝试将用户重定向到下一个级别。[Teleriks 文档网站](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-chart-client-api-and-events.html#OnSeriesClick)上的更多信息

# ruby-on-rails-3.2 - 如何配置我所有的新 Rails 应用程序以使用安静资产？

> ID：11778863
> 
> 赞同：1
> 
> 时间：2012-08-02T13:50:21.337
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我发现自己每次创建新应用程序时都必须创建 config/initializers/quiet_assets.rb 文件。有什么方法可以在我的开发盒上配置 Rails 核心，以便在创建新应用程序时始终创建此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:21:05.520

我发现[https://github.com/evrone/quiet_assets](https://github.com/evrone/quiet_assets)似乎可以解决问题！

# android - 安卓开发者崩溃报告

> ID：11778864
> 
> 赞同：1
> 
> 时间：2012-08-02T13:50:29.423
> 
> 标签：android, error-handling

我在 google play 上有一个应用程序。我制作了一个具有更高版本代码和不同名称的新版本。在我自己的 android 设备 (v2.3.3) 和模拟器 (v4.0.3) 上对其进行了测试。到目前为止没有错误，所以我将更新投放市场。

现在第一个错误报告进来了！！！！！！（见下文）我不知道这是什么意思。

新的更新是对权限的一点改动，我删除了两个库（jumptap SDK 和用于 admob 中介的 jumptap 适配器）。删除的权限是：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

将这两个留给 admob 广告：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

错误代码：

```
 java.lang.RuntimeException: Unable to start activity
 ComponentInfo{com.masked.app/com.masked.app.mainjava}:java.lang.NullPointerException
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2705)
 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2721)
 at android.app.ActivityThread.access$2300(ActivityThread.java:132)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:123)
 at android.app.ActivityThread.main(ActivityThread.java:4669)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:521)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
 at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.NullPointerException
 at com.masked.app.mainjava.onCreate(mainjava.java:53)
 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669) 
```

在第 132 行有“adblockcheck();” 可以在这里找到 [如何防止广告拦截器阻止应用程序上的广告](https://stackoverflow.com/questions/3452907/how-to-prevent-ad-blocker-from-blocking-ads-on-an-app/9843122#9843122)；第 123 行也在此代码中。

在第 53 行，一个媒体播放器启动 (mp.start();) 并带有启动声音。

究竟是什么问题，为什么我的设备上没有出现错误？这是我第一次通过 google play 报告错误，是一个错误有问题还是有更多的开发人员遇到错误并且并不总是关心它们？

完整的 Mainjava.java 可以在这里下载[http://homepage.tudelft.nl/78u5u/main.zip](http://homepage.tudelft.nl/78u5u/main.zip)

编辑：R.raw.start 是一个 mp3 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:45:30.703

显然，您的`MediaPlayer mp`实例为空。这意味着该`MediaPlayer.create`方法返回null。

[如创建](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20int%29)方法的android文档中所述：

```
Returns
  a MediaPlayer object, or null if creation failed 
```

我认为，由于缺少所需的编解码器等，android 无法为您创建 MediaPlayer。你的`R.raw.start`文件格式是什么？您可以尝试使用格式。不管怎样，你需要优雅地处理这个异常。

另外，如前所述，我建议您使用 ACRA。它可以帮助您快速解决问题。根据我的过期，Android 用户不喜欢发送错误报告。不到 10% 的错误会报告给 google play。

更新：由于阻塞，ACRA 已经足够好，但并不完美。这意味着如果应用程序刚刚崩溃并且用户的互联网连接速度很慢，您可以获得[ANR](http://developer.android.com/guide/practices/responsiveness.html)消息。想象一下：用户认为应用程序只是挂起，并决定等待应用程序响应，然后收到“抱歉，应用程序崩溃”消息。在使用 ACRA 之前，您必须找到通过后台服务等发送报告的方法。

此外，Google Docs - 发送错误的默认后端 - 很糟糕。强烈建议使用另一个后端。如果您的应用程序足够小，并且您认为一个月内收到的错误报告少于 500 个，您可以尝试专有的[BugSense](http://bugsense.com/)，它支持 ACRA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:02:53.137

如果不查看（至少）com.masked.app.mainjava 中的整个 onCreate() 方法，将很难判断到底发生了什么。听起来您没有初始化媒体播放器。

如果其他人在崩溃报告方面遇到问题，这是获得有关 Android 的更好反馈的绝佳方式是这个项目：[http ://code.google.com/p/acra/](http://code.google.com/p/acra/)

编辑：

您的问题几乎肯定是由编解码器问题引起的（由于文件类型/格式，您的设备无法播放给定资源）。它是什么类型的声音文件？

您可以通过更改此块来解决您的问题：

```
if (startsoundint == 1){
    MediaPlayer mp = MediaPlayer.create(Mainjava.this, R.raw.start);
    if (mp != null) // null check
    {
        mp.start();
    }
} 
```

是的，这意味着它可能不是一个新错误，除非您更改了声音文件。

# c# - Groupbox 检查更改事件

> ID：11778865
> 
> 赞同：2
> 
> 时间：2012-08-02T13:50:33.013
> 
> 标签：c#, events, groupbox

我有一个`DataGridView`和一个`GroupBox`包含几个`ComboBoxes`.
根据在 中选择`ComboBoxes`的内容，网格中的元素会发生变化。

有没有办法说

```
If (Something Changes Within The GroupBox)
{
   //Update the grid
} 
```

`OnSelectedIndexChange`（不为每个框编写事件）
我不想要更新部分的代码，我只需要一个事件或可以用来检查控件的值是否在`GroupBox`.
任何的想法 ？

* * *

**更新**

好的，我想我没有以正确的方式解释它。
忘记`ComboBox`.
假设我有一堆控件`GroupBox`有没有办法说：

只要其中一个控件的值发生变化，就创建一个事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T13:55:53.510

您可以将每个组合框 SelectedIndexChanged 事件连接到一种方法：

```
comboBox1.SelectedIndexChanged += new System.EventHandler(GroupBoxComboBoxChange);
comboBox2.SelectedIndexChanged += new System.EventHandler(GroupBoxComboBoxChange);
comboBox3.SelectedIndexChanged += new System.EventHandler(GroupBoxComboBoxChange);
comboBox4.SelectedIndexChanged += new System.EventHandler(GroupBoxComboBoxChange); 
```

或者使用 LINQ 为任何组合框选择更改设置事件处理程序：

```
GroupBox.Controls.OfType<ComboBox>.ForEach(cb => cb.SelectedIndexChanged += new System.EventHandler(GroupBoxComboBoxChange)); 
```

**回答您的更新：** 您正在寻找 ControlValueChanged() 事件。我认为这里的问题是所有控件都不同。为 ComboBox 定义“ValueChanged”事件的内容对于 TextBox 不一定相同。这将是一个语义挑战，而且不是很清楚。希望这是有道理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:24:40.157

GroupBoxes 没有“我内心的东西改变了”，但你可以像这样“作弊”和 DYI（这只是一个没有错误检查和排序的概念验证）：

```
// In a new Windows Forms Application, drop a GroupBox with a ComboBox and a CheckBox inside
// Then drop a TextBox outside the ComboBox. Then copy-paste.

// this goes somewhere in your project
public static class handlerClass
{
    public static string ControlChanged(Control whatChanged)
    {
        return whatChanged.Name;
    }
}

// And then you go like this in the Load event of the GroupBox container
void Form1_Load(object sender, EventArgs args)
{
    foreach (Control c in groupBox1.Controls)
    {
        if (c is ComboBox) 
            (c as ComboBox).SelectedValueChanged += (s, e) => { textBox1.Text = handlerClass.Handle(c); }; 
        if (c is CheckBox) 
            (c as CheckBox).CheckedChanged += (s, e) => { textBox1.Text = handlerClass.Handle(c); }; }
    }
} 
```

因为每个`Control`人都有自己的“我变了！” 一种事件，我认为就样板文件而言它不能更短。行为只是一个示例，它在 ComboBox 中写入更改的控件的名称

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T14:04:52.070

GroupBoxes 通常只是装饰性的，除非它们管理单选按钮或复选框，因此期望它们了解对组合框所做的更改并不是开箱即用的事情。如果可以的话，为什么不编写一个方法来执行您希望它执行的操作，然后从所有组合框的 SelectedIndexChanged 事件中调用该方法？

# php - 每当页面加载时更新 sql 表

> ID：11778873
> 
> 赞同：0
> 
> 时间：2012-08-02T13:51:03.007
> 
> 标签：php, mysql, sql

我想制作在线/离线状态，我制作了一个表格`user_status`，我想在标题 sql 查询中添加，所以每次用户加载页面时，表格都会随着时间更新；

user_status 表是：user_id | 上次活动时间； `user_id`来自表`users`；

我在标题中添加了这个：

```
//check update last_time_active
$date = date("Y-m-d H:i:s");

$query = mysql_query("update user_status SET last_activity_time=$date ");
?> 
```

我怎样才能添加用户？如果他已登录，请检查他并使用和`user_id`更新表格 这是正确的吗？`user_id``last_activity_time`

之后，我将要在特定页面中添加用户名旁边的文本（在线/离线）。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:53:22.737

正如PHP 手册中关于函数的章节[的介绍](http://www.php.net/manual/en/intro.mysql.php)`mysql_*`中所述：

> 不建议将此扩展用于编写新代码。相反，应该使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。在选择 MySQL API 时，另请参阅[MySQL API 概述](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)以获得更多帮助。

使用 PDO：

```
$dbh = new PDO("mysql:host=$host;dbname=$db", $user, $pass);
$qry = $dbh->prepare('
  UPDATE user_status SET last_activity_time = NOW() WHERE user_id = ?
');
$qry->bindValue(1, $_SESSION['userid']);
$qry->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:57:04.457

在用户登录时将用户 ID 存储在用户`$_SESSION`中。然后将其拉出并插入到您的查询中。

```
<?php
//confirmed login, set $userid to the user's ID
session_start();
$_SESSION['userid'] = $userid; 
```

然后您的查询将如下所示（**已更新**）：

```
// Since, according to your comment, $username = $_COOKIE['username']

"UPDATE user_status SET last_activity_time = NOW() where user_id = (SELECT userid FROM users WHERE username='" . $_COOKIE['username'] . "')"; 
```

但是**不要**再使用`mysql_*`函数了。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。如果您不确定要使用哪一个，[请阅读 SO 中的这篇文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:54:16.427

你想要类似的东西：

```
<?php
    $date = date("Y-m-d H:i:s");

    if(isset($_SESSION['userid']) 
    // or whatever you are using to see if the user is active?
    {
        $query = mysql_query("update user_status SET userID=".$_SESSION['userID'], last_activity_time=".$date.";");
    }

?> 
```

# json - 加载关联和绑定网格以形成

> ID：11778876
> 
> 赞同：1
> 
> 时间：2012-08-02T13:51:16.740
> 
> 标签：json, extjs, extjs4, associations

我之前在这里问过类似的问题：[https ://stackoverflow.com/questions/11707007/nested-json-form-submits-in-extjs4-getting-the-writer-to-remap-the-fields](https://stackoverflow.com/questions/11707007/nested-json-form-submits-in-extjs4-getting-the-writer-to-remap-the-fields)

在煎茶论坛上也问过，我很绝望：

我在将嵌套的 json 文件读取和写入关联模型时遇到了很多问题。

我将在这里编写所有我能写的代码，希望你们中的一些人会发现我做错了什么。

文中强调问题。

我收到的 json 看起来像这样，并且无法更改：测试：

```
[
    {
        "name":"qwerty",
        "id":"1",
        "uid":"1",
        "created":"1341481071",
        "changed":"1343804076",
        "status":"1",
        "jmeterOptions":{
            "jmx":"\/files\/20141\/multi.jmx",
            "engines":"0",
            "version":"2.5.1",
            "consoleArgs":" -t sample.jmx -JDelay=10000 -JEmbedded=1 -JRampup=1800 -JUsers=10",
            "engineArgs":" -JDelay=10000 -JEmbedded=1 -JRampup=1800 -JUsers=10",
            "instanceType":"m1.medium",
            "overrideOptions":{
                "threads":"50",
                "rampUpTime":"300",
                "iterations":"-1",
                "duration":"-1"
            }
        },
        "testOptions":{
            "type":"BM_TEST_TYPE_AUTO",
            "geo":"us-east-1",
            "timeout":"1",
            "reportByEmail":"1",
            "launchTime":"0",
            "sessionId":"",
            "hosts":null,
            "privateIps":null
        },
        "autoOptions":{
            "users":"10",
            "delay":"10",
            "rampUpTime":"1800",
            "pages":[
                {
                    "label":"sencha",
                    "url":"http:\/\/sencha.com"
                }
            ]
        },
        "seleniumOptions":{
            "pages":[
                {
                    "label":"sencha",
                    "url":"http:\/\/sencha.com"
                }
            ]
        }
    },
    {
        "name":"Instant Load test",
        "id":"2",
        "uid":"1",
        "created":"1336921297",
        "changed":"1341132949",
        "status":"1",
        "jmeterOptions":{
            "jmx":null,
            "engines":"0",
            "version":"2.5.1",
            "consoleArgs":" -t sample.jmx -JDelay=10000 -JEmbedded=1 -JRampup=1800 -JUsers=10",
            "engineArgs":" -JDelay=10000 -JEmbedded=1 -JRampup=1800 -JUsers=10",
            "instanceType":"m1.medium",
            "overrideOptions":null
        },
        "testOptions":{
            "type":"BM_TEST_TYPE_AUTO",
            "geo":null,
            "timeout":"1",
            "reportByEmail":"0",
            "launchTime":"0",
            "sessionId":"",
            "hosts":null,
            "privateIps":null
        },
        "autoOptions":{
            "users":"10",
            "delay":"10",
            "rampUpTime":"1800",
            "pages":[
                {
                    "label":"",
                    "url":"http:\/\/cnn.com"
                }
            ]
        },
        "seleniumOptions":{
            "pages":[
                {
                    "label":"",
                    "url":"http:\/\/cnn.com"
                }
            ]
        }
    }
] 
```

该模型如下所示：

```
 Ext.define('BM.model.Test', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name', type: 'string'},
        {name: 'id', type: 'id'},
        {name: 'uid', type: 'mumber'},
        {name: 'created', type: 'date', dateFormat: 'timestamp'},
        {name: 'changed', type: 'date', dateFormat: 'timestamp'},
        {name: 'status', type: 'number'},

        {name: 'jmeterJmx', mapping: 'jmeterOptions.jmx', type: 'string'},
        {name: 'jmeterEngines', mapping: 'jmeterOptions.engines', type: 'number'},
        {name: 'jmeterVersion', mapping: 'jmeterOptions.version', type: 'string'},
        {name: 'jmeterConsoleArgs', mapping: 'jmeterOptions.consoleArgs', type: 'string'},
        {name: 'jmeterEngineArgs', mapping: 'jmeterOptions.engineArgs', type: 'string'},
        {name: 'jmeterInstanceType', mapping: 'jmeterOptions.instanceType', type: 'string'},

        {name: 'testOptionsType', mapping: 'testOptions.type', type: 'string'},
        {name: 'testOptionsGeo', mapping: 'testOptions.geo', type: 'string'},
        {name: 'testOptionsTimeout', mapping: 'testOptions.timeout', type: 'number'},
        {name: 'testOptionsReportByEmail', mapping: 'testOptions.reportByEmail', type: 'string'},
        {name: 'testOptionsLaunchTime', mapping: 'testOptions.launchTime', type: 'string'},
        {name: 'testOptionsSessionId', mapping: 'testOptions.sessionId', type: 'string'},
        {name: 'testOptionsHosts', mapping: 'testOptions.hosts', type: 'string'},
        {name: 'testOptionsPrivateIps', mapping: 'testOptions.privateIps', type: 'string'},

        {name: 'autoUsers', mapping: 'autoOptions.users', type: 'number'},
        {name: 'autoDelay', mapping: 'autoOptions.delay', type: 'number'},
        {name: 'autoRampUpTime', mapping: 'autoOptions.rampUpTime', type: 'number'}
    ],

    hasMany: [
        {model: 'Pages', name: 'autoPages', associationKey: 'autoOptions.pages'},
        {model: 'Pages', name: 'seleniumPages', associationKey: 'seleniumOptions.pages'}
    ],

    proxy: {
        type: 'ajax',
        api: {
            read: '../webapp/get/tests',
            update: '../webapp/set/test'
        },
        reader: {
            type: 'json',
            root: 'tests',
            successProperty: 'success'
        },
        writer: new Ext.data.JsonWriter({
            encode: false,
            writeAllFields: true,
            getRecordData: function (record) {
                Ext.apply(record.data,record.getAssociatedData(true));
                return record.getAssociatedData(true);
            }
        })
    }
});

Ext.define('Pages', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'label', type: 'string'},
        {name: 'url', type: 'string'}
    ]
}); 
```

**第一个问题：**包括以下四行导致网格加载为空，为什么？

```
{name: 'jmeterOverrideThreads', mapping: 'jmeterOptions.overrideOptions.threads', type: 'number'},
{name: 'jmeterOverrideRampUpTime', mapping: 'jmeterOptions.overrideOptions.rampUpTime', type: 'number'},
{name: 'jmeterOverrideIterations', mapping: 'jmeterOptions.overrideOptions.iterations', type: 'number'},
{name: 'jmeterOverrideDuration', mapping: 'jmeterOptions.overrideOptions.duration', type: 'number'}, 
```

**第二个问题：**相关数据出现空。rawData有如上图的json，如何让getAssociatedData填写正确的数据？更好的是，为什么我的关联不起作用？

**第三个问题：**作者现在只发送空的关联数据，我如何发送所有数据，就像我收到的一样？

我对此的解决方案非常丑陋：

```
 updateTest: function(button) {
        var form = button.up('panel');
        var record = form.getRecord(),
            values = form.getValues();

        record.set(values);

        var rd = record.data;

//        this.getTestsStore().sync();         //No! Sends flattened data.
//        var autoPages = record.getAssociatedData().autoPages; // Is currently empty
//        var seleniumPages = record.getAssociatedData().seleniumPages; // Is currently empty

        var autoPages = [];
        var seleniumPages = [];
        var iterator = 0;
        var autoPagesLabel = record.data['autoPagesLabel' + iterator];
        var autoPagesUrl = record.data['autoPagesUrl' + iterator];
        while (autoPagesLabel != undefined){
            autoPages.push({
                'label': autoPagesLabel,
                'url': autoPagesUrl
            });
            iterator++;
            autoPagesLabel = record.data['autoPagesLabel' + iterator];
            autoPagesUrl = record.data['autoPagesUrl' + iterator];
        }
        iterator = 0;
        var seleniumPagesLabel = record.data['seleniumPagesLabel' + iterator];
        var seleniumPagesUrl = record.data['seleniumPagesUrl' + iterator];
        while (seleniumPagesLabel != undefined){
            seleniumPages.push({
                'label': seleniumPagesLabel,
                'url': seleniumPagesUrl
            });
            iterator++;
            seleniumPagesLabel = record.data['seleniumPagesLabel' + iterator];
            seleniumPagesUrl = record.data['seleniumPagesUrl' + iterator];
        }

        var reformattedJson = {
            "name": rd.name,
            "id": rd.id,
            "uid": rd.uid,
            "created": rd.created,
            "changed": rd.changed,
            "status": rd.status,
            "jmeterOptions":{
                "jmx": rd.jmeterJmx,
                "engines": rd.jmeterEngines,
                "version": rd.jmeterVersion,
                "consoleArgs": rd.jmeterConsoleArgs,
                "engineArgs": rd.jmeterEngineArgs,
                "instanceType": rd.jmeterInstanceType,
                "overrideOptions": {
                    "threads": rd.jmeterOverrideThreads,
                    "rampUpTime": rd.jmeterOverrideRampUpTime,
                    "iterations": rd.jmeterOverrideIterations,
                    "duration": rd.jmeterOverrideDuration
                }
            },
            "testOptions":{
                "type": rd.testOptionsType,
                "geo": rd.testOptionsGeo,
                "timeout": rd.testOptionsTimeout,
                "reportByEmail": rd.testOptionsReportByEmail,
                "launchTime": rd.testOptionsLaunchTime,
                "sessionId": rd.testOptionsSessionId,
                "hosts": rd.testOptionsHosts,
                "privateIps": rd.testOptionsPrivateIps
            },
            "autoOptions":{
                "users": rd.autoUsers,
                "delay": rd.autoDelay,
                "rampUpTime": rd.autoRampUpTime,
                "pages": autoPages
            },
            "seleniumOptions":{
                "pages":seleniumPages
            }
        };

        Ext.Ajax.request({
            url: '../webapp/set/test',
            method:'Post',
            jsonData: reformattedJson,
            success: function(response){
                var text = response.responseText;
                // process server response here
                console.log('Post successfull!  ');
            }
        });
    } 
```

这是表格：

```
Ext.define('BM.view.test.Edit', {
    extend: 'Ext.form.Panel',
    alias: 'widget.test-edit',

    layout: 'anchor',
    title: 'Edit Test',
    defaultType: 'textfield',

    items: [
            {name: 'id', hidden: true},
            {name: 'name', fieldLabel: 'Name'},
            {name: 'status', fieldLabel: 'Status'},
            {name: 'testOptionsType', fieldLabel: 'Type'},
            {name: 'autoUsers', fieldLabel: 'User count'}
        ],

     buttons: [
        {
            text: 'Save',
            action: 'save'
        },
        {
            text: 'Cancel',
            scope: this,
            handler: this.close
        }
    ]
}); 
```

这就是所谓的形式：（单击网格行）

```
editTest: function(grid, record) {
    var view = Ext.widget('test-edit');
    var viewPort = Ext.ComponentQuery.query('viewport')[0];

    var autoPages = record.raw.autoOptions.pages;
    var seleniumPages = record.raw.seleniumOptions.pages;
    for (var i =0; i < autoPages.length; i++){
        var tf = Ext.create('Ext.form.field.Text', {
            id: 'autoPagesLabel' + i,
            name: 'autoPagesLabel' + i,
            fieldLabel: 'Label',
            value: autoPages[i].label,
            columnWidth:0.5
        });
        view.add(tf);
        tf = Ext.create('Ext.form.field.Text', {
            id: 'autoPagesUrl' + i,
            name: 'autoPagesUrl' + i,
            fieldLabel: 'Url',
            value: autoPages[i].url,
            columnWidth:0.5
        });
        view.add(tf);
    }

    view.loadRecord(record);
    viewPort.layout.centerRegion.removeAll();
    viewPort.layout.centerRegion.add(view);
} 
```

我尝试遵循 Ext JS 4 的 MVC 架构，从教程中逐条注释，但惨遭失败。

我究竟做错了什么？

您需要任何其他信息或代码吗？告诉我，我会发布它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:56:52.917

我找到了一个适用于我的一些问题的解决方案。

作为对我第一个问题的绕过，我发现超过两个级别的映射是有问题的，所以我添加了一个 hasOne 关系。我认为这不是一个好的解决方案，但没有其他人，希望对此发表评论。

```
{name: 'jmeterOverrideThreads', mapping: 'jmeterOptions.overrideOptions.threads', type: 'number'},
{name: 'jmeterOverrideRampUpTime', mapping: 'jmeterOptions.overrideOptions.rampUpTime', type: 'number'},
{name: 'jmeterOverrideIterations', mapping: 'jmeterOptions.overrideOptions.iterations', type: 'number'},
{name: 'jmeterOverrideDuration', mapping: 'jmeterOptions.overrideOptions.duration', type: 'number'}, 
```

从模型中，变为：

```
hasOne: [
        {model: 'OverrideOptions', associationKey: 'jmeterOptions', reader: {root: 'overrideOptions'}}
],

// and:

Ext.define('OverrideOptions', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'jmeterOverrideThreads', mapping: 'threads', type: 'number'},
        {name: 'jmeterOverrideRampUpTime', mapping: 'rampUpTime', type: 'number'},
        {name: 'jmeterOverrideIterations', mapping: 'iterations', type: 'number'},
        {name: 'jmeterOverrideDuration', mapping: 'duration', type: 'number'}
    ]
}); 
```

至于我关于关联不起作用的第二个问题：在我的模型中，而不是：

```
hasMany: [
        {model: 'Pages', name: 'autoPages', associationKey: 'autoOptions.pages'},
        {model: 'Pages', name: 'seleniumPages', associationKey: 'seleniumOptions.pages'}
], 
```

我补充说：

```
hasMany: [
        {model: 'Pages', name: 'autoPages', associationKey: 'autoOptions', reader: {root: 'pages'}},
        {model: 'Pages', name: 'seleniumPages', associationKey: 'seleniumOptions', reader: {root: 'pages'}}
    ], 
```

突然，我可以从 record.getAssociatedData() 访问我的数据，它仍然是扁平的，但至少我有数据。

我仍然不知道让作者以原始格式输出数据，而不是像我用蛮力那样写数据。会再次喜欢对此的一些反馈。

出现了其他问题：我希望将我的关联数据添加到表单中。当我们谈论对象数组时，我们不知道会有多少，有没有比我在原始问题中使用的更好的方法来从关联数据创建表单。除了使用正在运行的迭代器命名字段之外，还有更好的方法来访问表单数据：a1、a2、...

提前感谢您的任何回答。

# facebook - 如何使评论框审核正常工作？

> ID：11778878
> 
> 赞同：0
> 
> 时间：2012-08-02T13:51:36.880
> 
> 标签：facebook, plugins

自 2 周以来，我一直被社交插件评论框所困扰。我设法在我的 FB Fanpage 上安装了“Hike - Free Tab Builder”，并在那里插入了一个带有文本的 HTML 代码，我还在那里添加了一些框。为了调整这些框，我制作了一个应用程序（评论框）来获取 AppID，并完成了 fb.developers 教程中要求的所有操作。我将询问的 ID 作为元命令放在“head”部分中，并将其他任何内容放在“body”标签后面。

它永远无法连接到审核工具，我不能说什么是错的。我现在已经为此工作了 2 周，我询问并四处寻找答案，但没有成功。也许这里的任何人都可以给出答案。

这是我写的部分代码：

```
<!DOCTYPE html>

<html>
<head>

  <meta property="fb:admins" content="{10000113xxxxxxx}"/>
  <meta property="fb:app_id" content="{20368994xxxxxxx}"/>

    <title>Research</title>

<style type="text/css">

    P {font-family: arial; color: rgb(0, 0, 102); font-size: 1}
    H2 {font-family: arial; font-size: 4; color: rgb(153, 0, 0); font: bold}
    H3 {font-family: arial; font-size: 3; color: rgb(153, 0, 0); font: bold}
    HR {font-family: arial; width: auto}

</style>

</head>

<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '203689xxxxxxx', // App ID
      channelUrl : '//channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

 <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=2036899xxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<h2>Contents</h2>

(...)

<div class="fb-comments" data-href="https://www.facebook.com/(...)/app_151503908244383" data-num-posts="10" data-width="785"></div>

(...)
</body>
</html> 
```

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:47:54.640

你必须定义 og:url、og:title 和 og:img。

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)是有用的工具。只需写下您的网址，让它对您说些什么。

# org-mode - 覆盖 HTML 导出默认值

> ID：11778888
> 
> 赞同：3
> 
> 时间：2012-08-02T13:51:57.543
> 
> 标签：org-mode

我使用 orgmode 来捕获会议记录，然后我会导出 HTML 以将它们发布到我们团队的网站上。

我想自动设置一些导出选项。但是 org-insert-export-options-template 创建的默认值不适合我的需要，我想对它们进行调整，但在文档中找不到正确的方法。我知道这应该很容易，所以我很困惑被这个问题所困扰。

有人可以帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:21:01.890

您可以为 HTML 导出自定义许多内容：

*   [HTML 前导和后导](http://orgmode.org/manual/HTML-preamble-and-postamble.html#HTML-preamble-and-postamble)
*   [样式 (CSS)](http://orgmode.org/manual/CSS-support.html#CSS-support)
*   您可以自定义默认值，因此您不需要添加选项模板（`org-customize`- 导出 - 导出常规）
*   XML 声明（`org-customize`- 导出 - HTML）

# asp.net-mvc - EF 代码首次加载未使用 ICollection 属性完成

> ID：11778889
> 
> 赞同：0
> 
> 时间：2012-08-02T13:52:05.890
> 
> 标签：asp.net-mvc, ef-code-first

我正在制作一个 MCV 开放时间管理员，其中我有一个包含 ExceptionHoursSets 的 ICollection 的课程表，每个 HoursSet 还包含一个 WeekSpec。（ExceptionHoursSets 包含的小时数定义了一般 WeekSpec 小时数模式的例外情况，也包含在 Schedule 中。）

Schedule.cs（缩写）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace HoursAdmin.Models
{
    public class Schedule
    {
        [Required]
        public Guid ScheduleId { get; set; }

        // Miscellaneous props

        // General hours pattern
        public Guid WeekSpecId { get; set; }
        public virtual WeekSpec WeekSpec { get; set; }

        // All exceptions to that pattern
        virtual public ICollection<ExceptionHoursSet> ExceptionHoursSets { get; set; }
    }
} 
```

ExceptionHoursSet.cs（也缩写）：

```
using System;
using System.ComponentModel.DataAnnotations;

namespace HoursAdmin.Models
{
    public class ExceptionHoursSet
    {
        [Required]
        public Guid ExceptionHoursSetId { get; set; }

        // More misc props

        public Guid WeekSpecId { get; set; }
        [Required]
        public WeekSpec WeekSpec { get; set; }
    }
} 
```

WeekSpec.cs（仍然缩写）：

```
using System;
using System.ComponentModel.DataAnnotations;

namespace HoursAdmin.Models
{
    public class DaySpec
    {
        [Required]
        public Guid DaySpecId { get; set; }

        // Good old misc props
    }
} 
```

如果我检索时间表，则会加载 HoursSet 集合，但每个 HoursSet 的 WeekSpec 都是空的。我目前倾向于忽略我应该只使用 Code First 加载的烦人感觉，并手动查询 ID 与存储为 ExceptionHoursSet 的外键匹配的 WeekSpec：

```
public ViewResult Index()
{
    using (var db = new HoursDb())
    {
        var schedules = db.Schedules.ToList();
        foreach (var schedule in schedules)
        {
            var exceptionHoursSets = schedule.ExceptionHoursSets;
            foreach (var exceptionHoursSet in exceptionHoursSets)
            {
                var weekSpec = db.WeekSpecs.FirstOrDefault(d => d.WeekSpecId == 
                    exceptionHoursSet.WeekSpecId);
                exceptionHoursSet.WeekSpec = weekSpec;
                db.Entry(weekSpec).Collection(w => w.DaySpecs).Load();
            }
        }
        return View(schedules);
    }
} 
```

然而，这是重复和乏味的......所以有人介意提供这应该如何完成吗？

PS - [Auto-retrieve ICollection of complex type with Code First 中](https://stackoverflow.com/questions/11423233/auto-retrieve-icollection-of-complex-type-with-code-first)提供的答案不起作用，因为如您所见，我无法在 WeekSpec 中将导航道具放置到其父实体，因为该实体可能是 Schedule 或一个 ExceptionHoursSet（请参阅[如何使用不同超表中的相同子表定义 MVC 数据库结构](https://stackoverflow.com/questions/11614484/how-to-define-an-mvc-database-structure-using-the-same-sub-table-in-different-su)）。

非常感谢，
内森邦德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:56:58.703

```
 var schedules = db.Schedules
    .Include(s => s.WeekSpec)
    .Include(s => s.ExceptionHoursSets)
    .Include(s => s.ExceptionHoursSets.Select(e => e.WeekSpec))
    .ToList(); 
```

# javascript - 用户单击提交按钮时如何为变量分配任意值？

> ID：11778893
> 
> 赞同：0
> 
> 时间：2012-08-02T13:52:22.927
> 
> 标签：javascript, html, xhtml, forms

提交按钮允许将其`name`和`value`属性与请求的其余部分一起发送，当它被单击时，允许记住哪个提交按钮用于发送表单数据。但是，发送的值必须与按钮上显示的文本相同。提交按钮有什么方法可以发送任意值而不是按钮文本，最好是不依赖于启用 JavaScript 的用户的方式？此外，对于 XHTML 和 HTML5，这个问题的答案是否有所不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:56:33.387

使用 a`button`而不是`input`：

```
<button id="butter" type="submit" value="go">Let's do it</button>​ 
```

示例：http: [//jsfiddle.net/duySv/](http://jsfiddle.net/duySv/)

这样标签和值是分开的。

> [https://developer.mozilla.org/en/HTML/Element/button](https://developer.mozilla.org/en/HTML/Element/button)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:57:20.900

尝试使用按钮元素。

```
<form method="post">
    <button name="abutton" value="abc">foo</button>
</form>​​​​​​​​​​ 
```

[http://jsfiddle.net/54DfJ/](http://jsfiddle.net/54DfJ/)

# json - Gson (Json) 解析 - POJO 映射 - 错误（这不是 JSON 数组）

> ID：11778894
> 
> 赞同：0
> 
> 时间：2012-08-02T13:52:24.663
> 
> 标签：json, pojo

为了 -

```
Config rfqObj = new Gson().fromJson(data, new TypeToken<Config>() {}.getType()); 
```

我收到以下异常 -

> 给定具有根本原因的类型， JsonDeserializer `main.java.com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter@30de3c87` 无法反序列化 json 对象 {} 。`main.java.com.google.gson.ParameterizedTypeImpl@7c3d0336]``java.lang.IllegalStateException: This is not a JSON Array`

JSON数据是 -

```
{
  "quantities": {
    "142": "0",
    "143": "20",
    "144": "25"
  },
  "characteristics": {},
  "details": {
    "8": "HT Test Report",
    "9": "Others",
    "13": "nTest"
  },
  "materials": {},
  "additionalProcesses": {},
  "suppliers": {}
} 
```

这是 POJO -

```
public class Config {
Map<Long, String> quantities = new HashMap<Long, String>();
Map<Long, String> characteristics = new HashMap<Long, String>();    
Map<Long, String> details = new HashMap<Long, String>();
Map<Long, String> materials = new HashMap<Long, String>();
Map<Long, String> additionalProcesses = new HashMap<Long, String>();

public Set<Suppliers> suppliers = new HashSet();

//this is for the nested class
public static class Suppliers {
    // defining attributes of this class
    public Long id;
    public String name;
    public Long contactId;
    public String contactInfo;
    public String contactMethod;
    public String contactName;
    public String message;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:07:46.130

您收到错误的原因是您的 JSON 文本是具有以下属性的对象：

```
"suppliers": {} 
```

但是因为您的`Config`对象希望该属性`suppliers`是一个集合；Gson 需要一个 JSON 数组，而不是 JSON 对象。

如果你能以某种方式让你的 JSON 文本包含

```
"suppliers": [] 
```

您应该能够将其反序列化为 Java 集。

# android-logcat - 华为 Ideos - LogCat 没有响应

> ID：11778896
> 
> 赞同：21
> 
> 时间：2012-08-02T13:52:31.637
> 
> 标签：android-logcat

我有一台Huawei Ideos X3，据说是通过usb正确连接的（安装了驱动，设备管理器上没有黄色感叹号）。我可以通过 Eclipse 安装和运行我的应用程序，但是我在 LogCat 上没有得到任何响应。所以我不能对调试有任何反馈......任何人都有线索..？谢谢！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-22T16:30:58.217

要在 Huawei Blaze (U8510)（重新标记的 Ideos X3）上启用日志记录：

*   拨打*#*#2846579#*#*
*   选择“项目菜单”
*   选择“背景设置”
*   选择“日志设置”
*   选择“日志切换”
*   启用“登录”
*   选择“日志级别设置”
*   启用“调试”
*   按“返回”键
*   选择“转储和记录”
*   启用“打开转储和日志”
*   按“返回”键 5 次返回主屏幕。
*   重启手机。
*   LogCat 现在应该可以工作了。

# c++ - cpp中数组的负索引

> ID：11778897
> 
> 赞同：1
> 
> 时间：2012-08-02T13:52:31.310
> 
> 标签：c++

在浏览队列示例时，我遇到了

[http://login2win.blogspot.in/2008/07/c-queues.html](http://login2win.blogspot.in/2008/07/c-queues.html)

它是一个队列示例，其中索引从 -1 开始，但程序似乎运行良好

这是否有效，在某些情况下这不应该是未定义的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:59:20.957

你是对的。此代码无效，因为它正在取消引用该数组之外的内存。

# maven - 清洁后未生成 Maven eclipselink 元模型

> ID：11778898
> 
> 赞同：2
> 
> 时间：2012-08-02T13:52:31.403
> 
> 标签：maven, jpa, eclipselink

我的项目配置为使用Eclipselink，构建工具是Maven。我需要在我的代码中使用 JPA2 元模型，所以我`pom.xml`包含相关配置：

```
 <plugin>
            <groupId>org.bsc.maven</groupId>
            <artifactId>maven-processor-plugin</artifactId>
            <version>2.0.4</version>
            <executions>
                <execution>
                    <id>process</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <phase>generate-sources</phase>
                    <configuration>
                        <outputDirectory>${project.build.directory}/generated-sources/metamodel</outputDirectory>
                        <compilerArguments>
                            -Aeclipselink.persistencexml=${project.basedir}/src/main/resources/META-INF/business/user/persistence.xml
                        </compilerArguments>
                        <processors>
                            <processor>org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor
                            </processor>
                        </processors>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

当我尝试执行`mvn clean compile`时，在构建过程中出现错误：

```
[INFO] --- maven-processor-plugin:2.0.4:process (process) @ fsdp-user-service-datalayer ---
[INFO] Source directory: <path>\UserService\DataLayer\target\generated-sources\metamodel added
[INFO] Adding compiler arg: -Aeclipselink.persistencexml=<path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] javac option: -cp
[INFO] javac option: <jars list>
[INFO] javac option: -proc:only
[INFO] javac option: -Aeclipselink.persistencexml=<path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] javac option: -processor
[INFO] javac option: org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor
[INFO] javac option: -d
[INFO] javac option: <path>\UserService\DataLayer\target\classes
[INFO] javac option: -s
[INFO] javac option: <path>\UserService\DataLayer\target\generated-sources\metamodel
[INFO] diagnostic <path>\UserService\DataLayer\src\main\java\user\dao\impl\UserDAOImpl.java:11: cannot find symbol
symbol  : class UserEntity_
location: package user.entity
[INFO] diagnostic Note: Creating static metadata factory ...
[INFO] diagnostic Note: Found Option : eclipselink.persistencexml, with value: <path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] diagnostic Note: Optional file was not found: META-INF/orm.xml continuing with generation.
[INFO] diagnostic Note: Optional file was not found: META-INF/eclipselink-orm.xml continuing with generation.
[INFO] diagnostic Note: Optional file was not found: META-INF/business/user/orm.xml continuing with generation.
[INFO] diagnostic warning: The following options were not recognized by any processor: '[eclipselink.persistencexml]'
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ fsdp-user-service-datalayer ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ fsdp-user-service-datalayer ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 11 source files to <path>\UserService\DataLayer\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] <path>\UserService\DataLayer\src\main\java\user\dao\impl\UserDAOImpl.java:[11,57] cannot find symbol
symbol  : class UserEntity_
location: package user.entity
[ERROR] <path>\UserService\DataLayer\src\main\java\user\dao\impl\UserDAOImpl.java:[99,22] cannot find symbol
symbol  : variable UserEntity_
location: class user.dao.impl.UserDAOImpl
[INFO] 2 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.112s 
```

只有在`mvn compile`再次执行后我才能成功编译。

```
[INFO] --- maven-processor-plugin:2.0.4:process (process) @ fsdp-user-service-datalayer ---
[INFO] Source directory: <path>\UserService\DataLayer\target\generated-sources\metamodel added
[INFO] Adding compiler arg: -Aeclipselink.persistencexml=<path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] javac option: -cp
[INFO] javac option: <jars>
[INFO] javac option: -proc:only
[INFO] javac option: -Aeclipselink.persistencexml=<path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] javac option: -processor
[INFO] javac option: org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor
[INFO] javac option: -d
[INFO] javac option: <path>\UserService\DataLayer\target\classes
[INFO] javac option: -s
[INFO] javac option: <path>\UserService\DataLayer\target\generated-sources\metamodel
[INFO] diagnostic <path>\UserService\DataLayer\src\main\java\user\dao\impl\UserDAOImpl.java:11: cannot find symbol
symbol  : class UserEntity_
location: package user.entity
[INFO] diagnostic Note: Creating static metadata factory ...
[INFO] diagnostic Note: Found Option : eclipselink.persistencexml, with value: <path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] diagnostic Note: Optional file was not found: META-INF/orm.xml continuing with generation.
[INFO] diagnostic Note: Optional file was not found: META-INF/eclipselink-orm.xml continuing with generation.
[INFO] diagnostic Note: File loaded : META-INF/business/user/orm.xml, is eclipselink-orm file: false
[INFO] diagnostic Note: Found Option : eclipselink.persistencexml, with value: <path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] diagnostic Note: Optional file was not found: META-INF/orm.xml continuing with generation.
[INFO] diagnostic Note: Optional file was not found: META-INF/eclipselink-orm.xml continuing with generation.
[INFO] diagnostic Note: File loaded : META-INF/business/user/orm.xml, is eclipselink-orm file: false
[INFO] diagnostic warning: The following options were not recognized by any processor: '[eclipselink.persistencexml]'
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ fsdp-user-service-datalayer ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ fsdp-user-service-datalayer ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 12 source files to <path>\UserService\DataLayer\target\classes
[INFO] 
[INFO] --- aspectj-maven-plugin:1.4:compile (compile) @ fsdp-user-service-datalayer ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.720s
[INFO] Finished at: Thu Aug 02 17:45:18 MSK 2012
[INFO] Final Memory: 26M/62M
[INFO] ------------------------------------------------------------------------ 
```

两个日志之间的主要区别是“不成功的干净编译”日志有以下几行：

```
[INFO] diagnostic Note: File loaded : META-INF/business/user/orm.xml, is eclipselink-orm file: false
[INFO] diagnostic Note: Found Option : eclipselink.persistencexml, with value: <path>\UserService\DataLayer/src/main/resources/META-INF/business/user/persistence.xml
[INFO] diagnostic Note: Optional file was not found: META-INF/orm.xml continuing with generation.
[INFO] diagnostic Note: Optional file was not found: META-INF/eclipselink-orm.xml continuing with generation.
[INFO] diagnostic Note: File loaded : META-INF/business/user/orm.xml, is eclipselink-orm file: false 
```

但“成功编译”日志没有。

所以问题是：为什么我有这么奇怪的行为？

# iphone - 如果 iAd 未加载，如何显示错误消息？

> ID：11778903
> 
> 赞同：0
> 
> 时间：2012-08-02T13:52:55.670
> 
> 标签：iphone, objective-c, ios, xcode, iad

我在我的一个 iphone 应用程序中使用 iAd，有时当它无法加载时它会离开屏幕，这是我使用的代码：

```
-(void)bannerView:(ADBannerView *)aBanner didFailToReceiveAdWithError:(NSError *)error {
if (!self.bannerIsVisible) {
    [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];
    banner.frame = CGRectOffset(banner.frame, 0.0, -320.0);
    [UIView commitAnimations];
    self.bannerIsVisible = NO;
} 
```

问题是当它加载时只有一个空格，我怎么会写像标签错误广告无法加载，或者类似的东西？？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:58:51.827

使用`UIAlertView`：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Could not display iAd" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];

        [alert show]; 
```

# erlang - 如何在 Erlang 中创建一系列已注册的进程名称？

> ID：11778906
> 
> 赞同：3
> 
> 时间：2012-08-02T13:53:13.510
> 
> 标签：erlang

目前，我正在使用以下内容单独创建和注册进程：

```
register(name, spawn(fun() -> myfun())). 
```

我想创建一个包含 N 个已注册 Pid 的列表，其名称如下：

```
pid1
pid2
pid3
.
.
.
pidN 
```

任何人都可以推荐一种方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:28:09.090

如果你想为同一个函数生成多个进程，你可以使用列表推导并使用字符串的连接和`list_to_atom/1`：

```
[register(list_to_atom("pid" ++ integer_to_list(X)), spawn(fun() -> myFun() end)) || X <- lists:seq(1,10)]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:22:04.893

您可能会使用以下内容：

如果您想在多个进程中执行相同的功能并以不同的名称注册每个进程：

```
lists:foreach( 
   fun( Name ) -> 
      register( Name, spawn( fun() -> myfun() end ) ) 
   end, 
   [ pid1, pid2, pid3 ] ). 
```

或者如果您想在不同的进程中执行不同的功能：

```
lists:foreach( 
   fun( { Name, Func } ) -> 
      register( Name, spawn( fun() -> Func() end ) ) 
   end, 
   [ { pid1, f1 }, { pid2, f2 }, { pid3, f3 } ] ). 
```

( f1, f2, f3 - 是函数)

最后，如果您想在 N 个进程中执行相同的功能，您可以执行以下操作：

```
N = 20, %number of processes
lists:map( 
   fun( Num ) -> 
      register( 
         list_to_atom( "pid" ++ integer_to_list( Num ) ), 
         spawn( fun() -> myfun() end ) ) 
   end, 
   lists:seq( 1, N ) ). 
```

# .net - system::windows::forms::form 上的透明背景

> ID：11778907
> 
> 赞同：0
> 
> 时间：2012-08-02T13:53:16.833
> 
> 标签：.net, winforms, visual-c++, background, transparency

我有一个 System::Windows::Forms::Form 并且我正在尝试将背景设置为透明。此表单包含其他组件并具有背景图像。

我尝试了许多我在互联网上看到的解决方案，但没有任何效果。

*   将表单不透明度设置为 0 -> 使整个表单变得透明。
*   使用颜色::透明-> 似乎不起作用
*   使用 TransparencyKey -> 似乎也不起作用...
*   覆盖 OnPaintBackground 或 OnPaint 事件 -> 似乎没有调用事件...

插图代码：

```
 public ref class Form : public System::Windows::Forms::Form
    {
         public: Form(void) {
             InitializeComponent();
         }

         public: void InitializeComponent(void)
         {
             SetStyle(ControlStyles::SupportsTransparentBackColor, true);
             this->TransparencyKey = System::Drawing::Color::Fuchsia;
             this->BackColor = System::Drawing::Color::Fuchsia;
             // or ...
             this->BackColor = System::Drawing::Color::Transparent;
         }

         protected: virtual void OnPaint(PaintEventArgs e)override {}
         protected: virtual void OnPaintBackground(PaintEventArgs e)override {}
    } 
```

谢谢你的帮助。西比尔

编辑：

问题解决了，首先是覆盖，它是：

```
protected: virtual void OnPaint(PaintEventArgs^ e)override {}
protected: virtual void OnPaintBackground(PaintEventArgs^ e)override {} 
```

我只是忘记了^。然后，我不知道为什么，但是我开始了一个新项目并尝试了其他方法，并且效果很好。所以从现在开始我使用这个新项目，一切都很好。我猜只是 Visual C++ 有一些随机问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:09:55.177

问题解决了，首先是覆盖，它是：

```
protected: virtual void OnPaint(PaintEventArgs^ e)override {}
protected: virtual void OnPaintBackground(PaintEventArgs^ e)override {} 
```

我只是忘记了^。然后，我不知道为什么，但是我开始了一个新项目并尝试了其他方法，并且效果很好。所以从现在开始我使用这个新项目，一切都很好。我猜只是 Visual C++ 有一些随机问题。

# c - 使用 rand() 模拟骰子。略失

> ID：11778911
> 
> 赞同：5
> 
> 时间：2012-08-02T13:53:34.390
> 
> 标签：c

这可能是一个愚蠢的问题，但我真的很纠结这个概念。我正在阅读一个解释数组和 rand() 函数的教程。我有两个问题。

第一个是，显然要模拟一个骰子，我们需要从 1-6 随机生成一个数字。这本书暗示了这一点：

```
int       RollOne( void ) {
    return (rand() % 6) + 1;
} 
```

对，rand() 可以生成 0-32767 之间的任何数字。然后我们找到这个数除以 6 的余数，然后加 1。例如 3245 是随机生成的。我们将它除以 6，得到 540.8333 并取余数。8.333（我相信截断为 8）然后加 1。除非我要发疯，否则就是 9，它不在 1-6 之间。该程序运行良好，但是我无法理解我们如何使用该代码从 1-6 获得一个数字！任何帮助将不胜感激。

我遇到的第二个问题并不那么重要，但很重要。这本书省略了这段代码的含义：

```
srand( clock() ); 
```

所有提到的是 srand() 使用由 clock() 提供的种子初始化一个随机数生成器。对了，现在我们真的可以在clock()中输入任何东西吗，如果可以的话，它的作用是什么？只需稍微解释一下 srand(clock()) 的作用就可以了。

抱歉发了这么长的帖子，我希望你不介意墙上的文字。任何帮助将非常感激。

谢谢，迈克

**回答** 谢谢大家：我知道我在做什么。如你们所示， % 运算符不除，它只是找到最高倍数与操作数之间的差异。知道了！我的印象是余数意味着小数。即如果 7/2 = 3.5，则余数为 0.5。现在我写出来了，我知道我有多愚蠢。很高兴我的 A-level 数学很重要.....
再次感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T13:56:01.957

你的例子有点不正确：

如果您随机生成 3245，将其除以 6 得到 540.8333（因为整数数学，您实际上得到 540）。余数为 3245 - 6 * 540，即 5。5+1 为 6：D

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:01:52.093

> 3245 是随机生成的。我们将它除以 6，得到 540.8333 并取余数。

您对整数截断和余数感到困惑。当您使用整数数学将 3245 除以 6 时，余数为 5（或 0.83333 * 6 = 5）。

另一种查看方式是 540 * 6 = 3240，余数为 5。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T13:56:59.147

***rand(clock()) 如何工作***

种子只是一个开始工作的数字。

计算机中实际上没有随机之类的东西（只是随机性的错觉），一切都是涉及种子的复杂计算/转换，在这种情况下，您只需要一个来自系统时钟的数字（种子）开始因为它总是在变化，并且应该总是提供类似随机的结果。

您可能可以将任何您想要的值放在系统时钟值所在的位置。只是不要指望会发生好的随机性。

**同样，通常使用clock()，因为它是一个不断变化的值。**

想想看，你不应该两次从系统时钟中获得相同的值。总有一些时间流逝，差异可能是一毫秒或更短，但即使变化可能很小，但它与一纳秒前的时间不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:32:04.100

对于您的第二个问题， srand 用于播种随机数生成器。如果没有一些专门的硬件，计算机无法真正生成真正的随机数，所以我们要做的是使用数学函数，如[线性同余生成器](https://en.wikipedia.org/wiki/Linear_congruential_generator)（许多 C 标准库用作默认算法）或[Mersenne Twister](http://en.m.wikipedia.org/wiki/Mersenne_twister)这会产生一系列高度不可预测的数字，因此必须为这个数学函数播种以赋予它第一个“随机”值。一个好的种子值对于程序的每次运行都会有所不同，只要您不在同一秒内两次运行相同的程序，时间就会很好。你需要种子的原因是因为伪随机数函数不是真正随机的，如果你给函数相同的种子，函数每次都会返回完全相同的数字序列（这对于某些类型的模拟很有用，但大多数时候你希望每次运行都不同）。

锻炼：

> 运行这个程序：
> 
> ```
> #include <stdio.h>
> int main() {
>     srand(1234);
>     for (int i=0; i < 20; i++) 
>         printf("%d ", rand());
>     printf("\n");
> } 
> ```
> 
> 几次观察会发生什么，然后用 time(NULL) 替换 1234 并观察会发生什么。编写一个 shell 脚本，让修改后的程序非常快速地运行几次，然后观察会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:58:06.023

百分比不除。它给出了余数（“mod”函数）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T13:57:14.630

余数怎么可能是8？当然，这意味着 6 会再加入一次吗？% 也不是除法函数，它是不同的 div 函数。

# sql - SQL Server解析函数？

> ID：11778912
> 
> 赞同：0
> 
> 时间：2012-08-02T13:53:48.877
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [在 tsql 中等效的拆分函数？](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)

我有一列包含以下形式的数据：

```
CustomerZip::12345||AccountId::1111111||s_Is_Advertiser::True||ManagedBy::3000||CustomerID::5555555|| 
```

SQL 是否有任何内置函数可以轻松解析这些数据，还是我必须构建自己复杂的 patindex/substring 函数来将每个值拉入自己的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:31:07.587

我不相信有什么内置的。查看针对您的原始问题发布的评论。

如果这是您经常需要的东西，请考虑编写一个视图。

# python - csv2rec 和 polyfit 的问题

> ID：11778914
> 
> 赞同：1
> 
> 时间：2012-08-02T13:54:11.683
> 
> 标签：python, matplotlib

我正在做我认为对我的数据进行简单回归的事情，但是出了点问题。我使用 csv2rec 读取数据，然后打印回归参数 m 和 b，得到 nan nan。

如果您想预览 csv 文件，这里有一些：

```
"Oxide","ooh","oh",
"MoO",3.06,0.01,
"IrO",2.79,-0.23, 
```

我想要的是对两行的回归。`x = a.oh`和`y = a.ooh`

这是我正在使用的脚本

```
import matplotlib
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
from pylab import polyfit

a = mlab.csv2rec('rutilecsv.csv')

fig = plt.figure()
ax = fig.add_subplot(111)

ax.set_xlabel('E_OH / eV', fontsize=12)
ax.set_ylabel('E_OOH / eV', fontsize=12)

(m, b) = polyfit(a.oh, a.ooh, 1)

print m, b

ax.plot(a.oh, a.ooh, 'go')

plt.axis([-2, 3, 1, 6])
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:16:41.150

好的，只是把它放在床上，如果缺少数据，这正是你会得到的症状：

```
"Oxide","ooh","oh",
"MoO",3.06,0.01,
"IrO",2.79,-0.23,
"ZZ",2.79,, 
```

结果是

```
In [7]: a.ooh
Out[7]: array([ 3.06,  2.79,  2.79])

In [8]: a.oh
Out[8]: array([ 0.01, -0.23,   nan])

In [9]: polyfit(a.oh, a.ooh, 1)
Out[9]: array([ nan,  nan]) 
```

如果您想简单地忽略丢失的数据，那么您可以只传递`polyfit`两者都存在的点：

```
In [15]: good_data = ~(numpy.isnan(a.oh) | numpy.isnan(a.ooh))

In [16]: good_data
Out[16]: array([ True,  True, False], dtype=bool)

In [17]: a.oh[good_data]
Out[17]: array([ 0.01, -0.23])

In [18]: a.ooh[good_data]
Out[18]: array([ 3.06,  2.79])

In [19]: polyfit(a.oh[good_data], a.ooh[good_data], 1)
Out[19]: array([ 1.125  ,  3.04875]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:04:34.373

要检查的两件事：

1.  值是否转换为属性

2.  尝试使用 a['oh'] 和 a['ooh'] 来访问向量

并且可能在读取文件时使用选项名称来指定列名。

# c# - 检查 null 并强制为 0

> ID：11778919
> 
> 赞同：0
> 
> 时间：2012-08-02T13:54:27.367
> 
> 标签：c#, ado.net, null

我从数据列返回一个整数列表。这个特定的列是 (int,null)。但我有一个例外。

```
Specified cast is not valid. 
```

代码：

```
public List <int> GetSortOrder(DataTable dt,string columnName)
{
    List<int> Orders = new List<int>();
    foreach (DataRow row in dt.Rows)
    {
        Orders.Add((int)row[columnName]);
    }
    return Orders;
} 
```

我想要的是如果它为空，然后将其强制为 0。我应该使用可为空的 int 类型吗？或者只是简单地使用 if ... else ...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T13:56:04.960

```
 Orders.Add((int)(row[columnName] ?? 0)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:17:07.667

该列实际上存储 DBNull.Value 而不是通常的 C# null。这就是为什么运营商？？不管用。要检查列是否为空，请使用 row.IsNull 方法：

```
Orders.Add(row.IsNull(columnName) ? 0 : (int)row[columnName]); 
```

操作员 ？？不适用于 DBNulls。

您可能还想查看此链接：[Handle DBNull in C#](https://stackoverflow.com/questions/2433155/handle-dbnull-in-c-sharp)以获得一些将 DBNull-able int 转换为 int 的有效示例？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:31:23.317

我也会使用int？我喜欢 Field 方法：

```
int? myInt = row.Field<int?>(columnName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:59:17.487

那应该工作：

```
public List <int> GetSortOrder(DataTable dt,string columnName)
{
    List<int> Orders = new List<int>();
    int? nullableInt;
    foreach (DataRow row in dt.Rows)
    {
        nullableInt = (int)row[columnName];
        Orders.Add(nullableInt??0);
    }
    return Orders;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:56:29.267

我建议`int?`：

```
Orders.Add(((int?)row[columnName]).GetValueOrDefault()); 
```

在我看来，它使意图和代码保持清晰和简洁，而`if`/`else`并没有那么好。正如其他答案所建议的那样使用`?? 0`也很好。

# java - 如何将图像保存到数据库中（Java vs SQL）

> ID：11778922
> 
> 赞同：2
> 
> 时间：2012-08-02T13:54:46.463
> 
> 标签：java, sql, database

我在 SQL 2008 Enterprise 中有一个名为 Student_Images 的表，其中 S_Images 列名的数据类型是图像。现在如何将图像插入数据库。我在 google 上搜索并访问了 50 多个网站，有人说将其转换为 Base64，有人说将其转换为字节等，但如果列类型是图像，那该怎么办。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:03:28.023

请不要这样做。数据库不是文件系统。创建一个包含文件名的列并将图像存储在文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:19:43.143

查看 JDBC API Javadocs。您必须创建一个 Blob 对象，填写文件中的数据，然后将其用作（准备好的）语句的列。就像任何其他数据类型一样工作，只需多几行代码即可创建 Blob。

这是[教程](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/)如何开始的链接。

与其他答案不同，*在*某些情况下，将二进制数据存储在数据库中*最适合*需求。仅存储对文件系统的引用可能会给备份带来严重的麻烦，并且还会出现可访问性问题（仅仅因为您可以连接到数据库并不*意味着*您可以访问文件所在的文件系统）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:03:11.347

您不应该将图像存储在数据库中。正如第一条评论所指出的，这将占用大量空间。更推荐存储路径和文件名。

我想也许你没有在stackoverflow中搜索正确的方法，[你对这个主题有一个很好的答案](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)。

还有一件事。您的问题全部大写，避免这种情况，很难阅读，因此您的答案会更少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T16:01:13.950

是的。

*   如果图像大小很大，那么最好创建图像的元数据，将其引用保存到数据库中，并将真实图像保存在磁盘上。这比将图像保存在数据库中要快得多。
*   当您的图像尺寸较小时，将图像保存在数据库中很好

如果你想测试它，看看它是如何工作的。获取任何类型的图像并将其转换为字节数组流，如下所示：

```
BufferedImage originalImage = ImageIO.read(new File(
        "resources/image/Test.png"));

ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(originalImage, "jpg", baos);
baos.flush();
byte[] imageInByte = baos.toByteArray(); 
```

*   创建 blob 列以将数据保存在表中
*   执行插入语句将数据插入表中。

# asp.net-mvc - 使用 WebClient 时的协议冲突异常

> ID：11778924
> 
> 赞同：1
> 
> 时间：2012-08-02T13:54:49.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, c#-3.0, webclient

我收到协议违规异常：无法为不写入数据的操作设置 Content-Length 或 Chunked Encoding。我不明白为什么会出现该错误以及如何解决。任何人都可以在这方面帮助我。在代码的第三行抛出异常。

```
var client = new WebClient();
client.Headers[HttpRequestHeader.ContentType] = "application/json";
var resultjson = client.UploadString("" + _mvcurl + "Contact/GetContact",   //Get Contact Info
                                             serId); 
```

我正在使用与检查授权的 MVC 服务方法通信的网络表单。MVC应用代码中的方法如下

```
[Authorize]
public JsonResult GetContact(Guid contactId)
{
    var result = GetContactServiceClient().GetContactById(contactId);
    return Json(result);
} 
```

# mysql - MySql选择查询除零以外的不同数字

> ID：11778925
> 
> 赞同：1
> 
> 时间：2012-08-02T13:54:51.423
> 
> 标签：mysql

我有一个像这样的表格列::

```
 SendID
           0
           0
           0
           0
           0
          22
          22
          22
          33
          33 
```

我想要以下结果：

```
 SendID
                 0
                 0
                 0
                 0
                 0
                22
                33 
```

实际上，我想选择除 0 之外的所有零和不同的数字。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:00:56.977

使用[`UNION`](http://dev.mysql.com/doc/en/union.html)，您可以将一个选择所有零的查询与另一个`DISTINCT`只选择其他所有零的查询结合起来：

```
 SELECT          SendID FROM mytable WHERE SendID =  0
UNION ALL
  SELECT DISTINCT SendID FROM mytable WHERE SendID <> 0 
```

# jsf - jsf richfaces a4j:jsFunction forward 结果

> ID：11778926
> 
> 赞同：0
> 
> 时间：2012-08-02T13:54:56.217
> 
> 标签：jsf, jsf-2, richfaces

是否可以创建`a4j:jsFunction`将在我的托管 bean 中调用方法并从那里执行转发到另一个 jsf 页面的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:20:41.223

不，这是不可能的，因为`<a4j:jsFunction>`它将在 HTML 中创建一个可用的 javascript 方法，该方法通过 Ajax 与服务器通信。相反，你可以做一些像这样丑陋的事情：

```
<h:form id="myForm">
    <a4j:jsFunction name="myJSFunction" action="#{myBean.jsLogic}"
        oncomplete="document.getElementById('myForm:btnForward').click();" />
    <a4j:commandButton id="btnForward" style="display: none;"
        action="#{myBean.doForward}" />
</h:form> 
```

在这种情况下，在您的 js 函数结束时，您将调用可以进行导航的`<a4j:commandButton>`（也`<a4j:commandLink>`或任何其他`h`组件）的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T10:52:55.897

好吧，它不是真正的转发，但您可以进行重定向：

只要确保您对应`navigation-case`的 in`faces-config`文件具有相应的标签：

```
<redirect /> 
```

然后在ajax调用之后浏览器将被重定向到指定的页面。

这对于 Luiggi 的响应有缺点，即进行两次服务器调用，一次是 ajax，然后是重定向。

作为优势，它使代码更清晰。

# php - javascript在onclick上包含文件

> ID：11778928
> 
> 赞同：0
> 
> 时间：2012-08-02T13:54:58.313
> 
> 标签：php, javascript, include, onclick

有没有办法在 javascript 中包含一些 php 文件`onClick`？

喜欢，

```
if(isset(something)) ?
include "file.php"; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:56:50.100

不，那是 PHP 语法。PHP 完全在服务器上执行，并将结果发送回客户端。点击在客户端。Javascript 处理这些。你不能把两者混为一谈。

不过，您可以使用 AJAX 向服务器发出文件请求并使用 JS 显示其内容。[`.ajax()`](http://api.jquery.com/jQuery.ajax/)jQuery 有一个为此调用的简单方法

```
$.ajax({
  url: 'file.php',
  success: function(data) {
    $('#result').html(data);
    alert('Load was performed.');
  }
}); 
```

此方法将加载 id 的内容`file.php`并将其显示在具有 id 的元素中`result`。

另一种选择是提交表格。您将文件的名称放在隐藏的表单字段中，然后单击，提交表单。`$_GET[]`PHP 获取该信息，您从or读取文件名`$_POST[]`，确保它有效（不希望有人能够修改您的 HTML 并在您的服务器上包含任何文件），然后包含它并再次呈现页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:04:36.003

您可以简单地使用 jQuery 的`load`功能：

```
$("#elem").click(function()
{
    $("#placeToLoad").load("http://path/to/file");
} 
```

@sachleen 他的方式与此相同，`load`只是抓取文件并将其放在给定位置，而不必处理成功功能等。如果`load`不成功，它不会做任何事情。

[jQuery .load()](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:59:59.327

您不能包含 php 文件，因为它是无法在客户端执行的服务器端代码。

但是您实际上可以做的是使用 ajax 调用 file.php 并执行其内容，然后将结果附加到您的文档中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-11T05:24:48.057

> 当您使用 jQuery load() 方法向文件发出请求时，它会像通过浏览器的任何常规请求一样发送数据。它不知道您现有的任何 PHP 变量，除非您将它们与您的 ajax 请求一起作为数据传递。

```
function sendAJAX(){
$('#container').load(
"stuff.php",  // url
{ // json object of data to pass to the page
    stuff: "all your stuff goes in here...",
    moreStuff:  "even more stuff"
});
console.log('sendAJAX'); 
```

};

# c# - 为什么 gl.vector3 不起作用？

> ID：11778932
> 
> 赞同：0
> 
> 时间：2012-08-02T13:55:00.867
> 
> 标签：c#, opentk

我想在屏幕上显示一个像素。我在 Vs2010 中使用 openTk。这是我在 Windows 窗体应用程序中的代码：

```
private void glControl1_Load(object sender, EventArgs e)
    {
        OpenTK.Graphics.OpenGL.GL.ClearColor(Color.DeepSkyBlue);
        OpenTK.Graphics.OpenGL.GL.Color3(Color.Black);
    }

private void glControl1_Paint(object sender, PaintEventArgs e)
    {
        OpenTK.Graphics.OpenGL.GL.Clear(OpenTK.Graphics.OpenGL.ClearBufferMask.ColorBufferBit|OpenTK.Graphics.OpenGL.ClearBufferMask.DepthBufferBit);
        OpenTK.Graphics.OpenGL.GL.MatrixMode(MatrixMode.Modelview);
        OpenTK.Graphics.OpenGL.GL.LoadIdentity();

        OpenTK.Graphics.OpenGL.GL.Begin(BeginMode.Points);
        OpenTK.Graphics.OpenGL.GL.Vertex3(3,5,9);
      OpenTK.Graphics.OpenGL.GL.End(); 
       glControl1.SwapBuffers();
               } 
```

当我运行我的代码时，我只看到一个蓝屏。我不知道出了什么问题！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:13:54.560

为了显示任何内容，您需要设置投影转换矩阵。在您的代码中，您没有设置任何内容，这意味着渲染将不知道将您的观点放在哪里。

我建议查看一些使用低级 OpenGL 的基本教程。其中大部分应该适用于您的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:56:29.773

看看基于 opentk glcontrol 的应用程序

```
using System;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using OpenTK.Graphics;
using OpenTK.Graphics.OpenGL;
using System.Diagnostics;

namespace GLControlApp
{
  public partial class Form1 : Form
  {
    bool loaded = false;

    public Form1()
    {
      InitializeComponent();
    }

    Stopwatch sw = new Stopwatch(); // available to all event handlers
    private void glControl1_Load(object sender, EventArgs e)
    {
      loaded = true;
      GL.ClearColor(Color.SkyBlue); // Yey! .NET Colors can be used directly!
      SetupViewport();
      Application.Idle += Application_Idle; // press TAB twice after +=
      sw.Start(); // start at application boot
    }

    void Application_Idle(object sender, EventArgs e)
    {
      double milliseconds = ComputeTimeSlice();
      Accumulate(milliseconds);
      Animate(milliseconds);
    }

    float rotation = 0;
    private void Animate(double milliseconds)
    {
      float deltaRotation = (float)milliseconds / 20.0f;
      rotation += deltaRotation;
      glControl1.Invalidate();
    }

    double accumulator = 0;
    int idleCounter = 0;
    private void Accumulate(double milliseconds)
    {
      idleCounter++;
      accumulator += milliseconds;
      if (accumulator > 1000)
      {
        label1.Text = idleCounter.ToString();
        accumulator -= 1000;
        idleCounter = 0; // don't forget to reset the counter!
      }
    }

    private double ComputeTimeSlice()
    {
      sw.Stop();
      double timeslice = sw.Elapsed.TotalMilliseconds;
      sw.Reset();
      sw.Start();
      return timeslice;
    }

    private void SetupViewport()
    {
      int w = glControl1.Width;
      int h = glControl1.Height;
      GL.MatrixMode(MatrixMode.Projection);
      GL.LoadIdentity();
      GL.Ortho(0, w, 0, h, -1, 1); // Bottom-left corner pixel has coordinate (0, 0)
      GL.Viewport(0, 0, w, h); // Use all of the glControl painting area
    }

    private void glControl1_Paint(object sender, PaintEventArgs e)
    {
      if (!loaded)
        return;

      GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

      GL.MatrixMode(MatrixMode.Modelview);
      GL.LoadIdentity();

      GL.Translate(x, 0, 0);

      if (glControl1.Focused)
        GL.Color3(Color.Yellow);
      else
        GL.Color3(Color.Blue);
      GL.Rotate(rotation, Vector3.UnitZ); // OpenTK has this nice Vector3 class!
      GL.Begin(BeginMode.Triangles);
      GL.Vertex2(10, 20);
      GL.Vertex2(100, 20);
      GL.Vertex2(100, 50);
      GL.End();

      glControl1.SwapBuffers();
    }

    int x = 0;
    private void glControl1_KeyDown(object sender, KeyEventArgs e)
    {
      if (e.KeyCode == Keys.Space)
      {
        x++;
        glControl1.Invalidate();
      }
    }

    private void glControl1_Resize(object sender, EventArgs e)
    {
      SetupViewport();
      glControl1.Invalidate();
    }
  }
} 
```

# javascript - 动态修改 CSS - 适用于 IE9，但不适用于 Chrome 和 Firefox

> ID：11778934
> 
> 赞同：1
> 
> 时间：2012-08-02T13:55:15.053
> 
> 标签：javascript, css, background-color

我有这个函数来改变 CSS 类的背景颜色。

```
function changeBackgroundColor(className, value){
    var ss = document.styleSheets;
    for (var i=0; i<ss.length; i++) {
        var ss = document.styleSheets;
        var rules = ss[i].cssRules || ss[i].rules;
        for (var j=0; j<rules.length; j++) {
            if (rules[j].selectorText === className) {
                rules[j].style.backgroundColor = value;
            }
        }
    }
} 
```

用这个来称呼它，

```
changeBackgroundColor(".menuActive", "#fff"); 
```

它在 IE9 中运行良好，但在 Chrome 和 firefox 中进行测试时，它似乎并没有成功。似乎 Chrome 和 Firefox 没有找到任何类或任何东西。我对javascript有点陌生，所以如果你能解决这个问题或以任何方式指导我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:03:34.747

我会推荐一种不同的方法，而不是使用`document.styleSheets`：

```
function changeBackgroundColor(className, value){
    var elements;
    if (typeof document.getElementsByClassName === 'function') {
        // modern browsers
        elements = document.getElementsByClassName(className);
    } else {
        // other browsers (IE)
        elements = document.querySelectorAll('.' + className);
    }

    for (var i = 0; i < elements.length; i++) {
        elements[i].style.backgroundColor = value;
    }
} 
```

此外，您离更通用的功能仅一步之遥：

```
function changeStyle(className, styleName, value){
    var elements;
    if (typeof document.getElementsByClassName === 'function') {
        // modern browsers
        elements = document.getElementsByClassName(className);
    } else {
        // other browsers (IE)
        elements = document.querySelectorAll('.' + className);
    }

    for (var i = 0; i < elements.length; i++) {
        elements[i].style[styleName] = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:03:04.973

Internet Explorer 支持的规则接口与其他浏览器支持的规则接口不同。例如，规则对象没有“selectorText”属性。

[这](https://developer.mozilla.org/en/DOM/cssRule)是一个`CSSRule`对象的 Mozilla 文档。

# android - 如何在 Android 中实现这一点？

> ID：11778937
> 
> 赞同：1
> 
> 时间：2012-08-02T13:55:28.127
> 
> 标签：android, android-intent

我正在查看 Avast，例如 Lookout，并且我正在尝试理解实现的概念。所以这更像是为我问路。

1.  通知栏中的持久应用程序图标。我是否正确地说有功能 NotificationManager 能够做到？

2.  在应用安装期间扫描病毒，我对病毒扫描不感兴趣，而是对触发机制感兴趣。某种 Android 服务绑定到主应用程序？

3.  可以在通知菜单中调出的主应用程序。仍然触发绑定服务的主要应用程序？

那么我需要阅读什么才能理解？通知管理器、服务和??

简而言之，我想在通知栏中加载一个可以调出我的应用程序的图标。有一个后台服务可以在设定的时间间隔内执行特定任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:38:47.060

`NotificationManager`是的，`Notification`可以帮助你。您只需要使用标志创建通知`FLAG_ONGOING_EVENT`（使其持久化）。如果您的服务确实正在执行一些长时间运行的任务，那就更好了，如果是这样，您可以通过 Service.startForeground 启动您的服务，这需要一些“持续”通知才能运行（需要通知以通知用户现在有一些工作正在进行） ）。

要触发应用安装事件，您可以使用`BroadcastReceiver`with filter by `Intent.ACTION_PACKAGE_ADDED`。

# ruby-on-rails - 在 Rails 中，如何使用 accept_nested_attributes_for 创建嵌套对象？

> ID：11778938
> 
> 赞同：1
> 
> 时间：2012-08-02T13:55:33.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在我的 Rails 应用程序中，我试图为`TrainingClass`模型设置创建表单。我希望此表单允许用户在同一个表单中创建多个`ClassMeeting`模型（与模型有 belongs_to 关系`TrainingClass`），我正在使用`accepts_nested_attributes_for`它来执行此操作。不幸的是，每当我提交表单时，我都会收到错误消息：`Meetings class can't be blank`.

我意识到这是因为`ClassMeeting`has `validates :class_id, presence: true`，并且因为`TrainingClass`在保存之前不能有 id ，但我不确定解决这个问题的正确方法。（我能想到几种可能的方法，但它们并不是完全优雅的解决方案。）有什么想法吗？我很感激你能给我的任何帮助。

*注意：我意识到过去已经提出了很多类似的问题。但是，这些问题中的大多数都是旧的并且已经过时的答案，并且没有一个能解决我的问题。*

* * *

这是我的代码。请记住，尽管为了简洁起见我已经简化了它的某些方面，但模型之间的关系`ClassMeeting`并`TrainingClass`没有被触及：

**课堂会议模式：**

```
# == Schema Information
#
# Table name: class_meetings
#
#  id         :integer         not null, primary key
#  class_id   :integer
#  start      :datetime
#  end        :datetime
#  location   :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#

class ClassMeeting < ActiveRecord::Base
  attr_accessible :start, :end, :location

  validates :class_id, presence: true
  validates :start, presence: true
  validates :end, presence: true
  validates :location, presence: true, length: {maximum: 255}

  belongs_to :training_class, foreign_key: :class_id, inverse_of: :meetings
end 
```

**培训班模型：**

```
# == Schema Information
#
# Table name: training_classes
#
#  id            :integer         not null, primary key
#  description   :string(255)
#  created_at    :datetime        not null
#  updated_at    :datetime        not null
#

class TrainingClass < ActiveRecord::Base
  attr_accessible :description, :meetings_attributes

  validates :description, length: {maximum: 255}

  has_many :meetings, class_name: :ClassMeeting, foreign_key: :class_id, inverse_of: :training_class

  accepts_nested_attributes_for :meetings, allow_destroy: true
end 
```

**TrainingClasses 控制器：**

```
class TrainingClassesController < ApplicationController
  def new
    @training_class = TrainingClass.new()
    @training_class.meetings.build
  end

  def create
    @training_class = TrainingClass.new()

    if @training_class.update_attributes(params[:training_class])
        redirect_to @training_class, notice: 'Class was successfully created.'
    else
        render "new"
    end
  end
end 
```

**培训班表（查看）：**

```
<%= form_for @training_class do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.text_area :description %>

    <h2>Schedule</h2>
    <%= f.fields_for :meetings do |meeting| %>
        <%= meeting.label :start, "Start of Meeting:" %>
        <%= meeting.text_field :start %>

        <%= meeting.label :end, "End of Meeting:" %>
        <%= meeting.text_field :end %>

        <%= meeting.label :location, "Location:" %>
        <%= meeting.text_field :location %>
    <% end %>

    <%= f.submit class:"btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T04:14:14.890

我仔细研究了这个示例，尝试了与我的代码的差异，但最终我的问题通过使用`:inverse_of`.

请参阅[accept_nested_attributes_for 子关联验证失败](https://stackoverflow.com/questions/935650/accepts-nested-attributes-for-child-association-validation-failing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:22:47.460

好的，我找到了解决问题的方法。我需要做的就是验证模型中是否存在 training_class 而不是 class_id `ClassMeeting`。这样训练类的存在仍然得到验证，但验证器不会干扰`accepts_nested_attributes_for`' 保存模型的方法：

```
class ClassMeeting < ActiveRecord::Base
  attr_accessible :start, :end, :location

  validates :training_class, presence: true # :training_class instead of :class_id
  validates :start, presence: true
  validates :end, presence: true
  validates :location, presence: true, length: {maximum: 255}

  belongs_to :training_class, foreign_key: :class_id, inverse_of: :meetings
end 
```

# vba - Excel / VBA从x语言到英文版

> ID：11778939
> 
> 赞同：0
> 
> 时间：2012-08-02T13:55:38.533
> 
> 标签：vba, excel

我正在尝试在两台不同的电脑上运行 VBA / Excel 程序。一种是荷兰版的 Excel (VB 7)，另一种是英文版的 (VB 6.5)。

当我尝试运行一个函数时，我得到了错误：

```
 Run-time error '32809':
 Application-defined or object-defined error 
```

当我剥离所有代码以仅显示一个 msgbox 时，错误仍然存​​在。当我创建一个新选项卡时，该选项卡可以执行代码。

我想这与错误的翻译有关吗？

对此有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:24:12.273

问题已解决：将您的 excel 文件存储为 .xls 而不是 .xlsm

感谢团队:)

# ios - UIWebView 内存管理技巧

> ID：11778940
> 
> 赞同：0
> 
> 时间：2012-08-02T13:55:38.947
> 
> 标签：ios, ipad, memory-management, uiwebview

我正在开发一个大量使用多个 UIWebViews 的 iOS 应用程序。所有请求都是从应用程序包中的本地 html 文件加载的。我在这里找到了尝试防止内存泄漏的绝妙技巧：http: [//www.codercowboy.com/code-uiwebview-memory-leak-prevention](http://www.codercowboy.com/code-uiwebview-memory-leak-prevention)

我要做的是创建一个包含 3 个 UIWebView 实例的池的工厂类，并且任何时候请求 UIWebView 时，它都应该从该池中请求一个实例。因此，除非遇到内存警告，否则我将永远不会释放 WebViews，如果需要，我可能会释放 WebViews。

这是我到目前为止所想到的，并且正在寻找任何关于我的建议的额外提示或评论。

1.  一旦池已满，就必须重用 WebView。它将是先进先出类型的堆栈。
2.  一旦请求重用 webview，它将执行 HTML 实现中定义的 destroy 方法以清空全局变量。这可以使用 UIWebView 的 stringByEvaluatingJavascriptFromString 来完成
3.  完成后，WebView 将执行 document.innerHTML = ""; 清除文档。
4.  然后重用的 UIWebView 将加载新的请求。
5.  听说使用多张图片会占用大量内存。当池中的 UIWebView 不在屏幕上时，用小图像替换所有标签源是否有益？

在这里感谢任何输入！

谢谢，弗格尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T20:56:28.517

不再使用loadHTMLFromString或loadRequest重新加载内容，而是继续使用stringByEvaluatingJavascriptFromString将具有特定ID的部分的innerHTML设置为您想要的内容，全部通过javascript，不会占用大量内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T12:58:44.083

尝试使用分页网页，您可以使用 NSURLProtocol 缓存页面数据。

它会将页面和缓存加载到磁盘上，因此向后导航将来自缓存，并且只有 1 个页面会在正在查看的内存中。

这是你可以用 UIWebView 做的最好的事情，或者你可以去 MKWebView 它可以为你提供额外的功能。

# reporting-services - SSRS 表达式错误

> ID：11778944
> 
> 赞同：-1
> 
> 时间：2012-08-02T13:55:47.270
> 
> 标签：reporting-services

基本上我转换了这个水晶报表公式

```
if ucas({?Trade Buy or Sell}) = "Trade Buy" 
then "IOSW_BUY_01" 
else if ucase({?Trade Buy or Sell})="Trade Sell" then IOSW_SELL_02. 
```

至：

```
SSRS -IIF(Fields!TradeBuyorSell.Value="Trade Buy","IOSW_BUY_01", 
IIF(Fields!TradeBuyorSell.Value="Trade Sell","IOSW_SELL_02")) 
```

但是，我收到以下错误消息

**错误信息**

> [rsCompilerErrorInExpression]textrun 'TradeBuyorSell.Paragraphs[0].TextRuns[0] 的值表达式包含错误：[BC30455]Argument not specified for parameter 'FalsePart'of Public Function IIF(Expression As Boolean, TruePart As Object, FalsePart作为对象）作为对象'

请协助这是非常紧急的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:02:06.003

您的内部 IIF 缺少函数的第二个“错误”部分。

```
IIF(Fields!TradeBuyorSell.Value="Trade Buy","IOSW_BUY_01", IIF(Fields!TradeBuyorSell.Value="Trade Sell","IOSW_SELL_02", **************)) 
```

将***** ** *** ****替换为需要去那里的值。

# php - 在codeigntier PHP中将对象数组添加到另一个数组？

> ID：11778948
> 
> 赞同：1
> 
> 时间：2012-08-02T13:55:56.653
> 
> 标签：php, arrays, object, codeigniter-2

我正在使用 codeigntier 框架尝试解决与从数据库中检索信息有关的问题，例如：

模型.php：

```
public function read(){
   $query = $this->db->get('table');
   return $query->result();
} 
```

控制器.php：

```
 public function doSomething () {
       $exampleArray['name'] = "Bob's Database";
       $getModel = $this->load->model('model','getData');
       $modelData = $this->getData->read();
       // i want to assign the the $modelData to a array element like so
       $exampleArray['modelData'] = $modelData // here's where im stuck :(
} 
```

感谢您的帮助！！ps 这不是一个错误，它只是一个问题:)

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:00:22.770

如果您希望能够`$exampleArray`在该方法之外访问，则必须执行以下两项操作之一：

**a)**将其设置为类变量

```
class MyClass {
    public $exampleArray;
    .
    .
    . 
} 
```

然后使用

```
$this->exampleArray['index'] 
```

或**b)**通过引用将其传递给您的`doSomething()`函数：

```
public function doSomething(&$exampleArray) { ... } 
```

php 手册有一个关于[变量范围](http://php.net/manual/en/language.variables.scope.php)的部分，可以帮助您更好地理解这一点。

# sql - 将数据插入临时表

> ID：11778952
> 
> 赞同：221
> 
> 时间：2012-08-02T13:56:05.403
> 
> 标签：sql, sql-server, temp-tables

在创建了一个临时表并像这样声明数据类型之后；

```
CREATE TABLE #TempTable(
ID int,
Date datetime,
Name char(20)) 
```

然后如何插入已经保存在数据库中物理表上的相关数据？

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2012-08-02T13:59:05.997

```
INSERT INTO #TempTable (ID, Date, Name) 
SELECT id, date, name 
FROM physical_table 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2015-01-12T16:00:35.520

要插入所有列中的所有数据，只需使用以下命令：

```
SELECT * INTO #TempTable
FROM OriginalTable 
```

完成后和再次尝试创建它*之前*，不要忘记`DROP`临时表：

 *```
DROP TABLE #TempTable 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2013-04-02T11:13:17.190

```
SELECT  ID , Date , Name into #temp from [TableName] 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2014-05-05T02:30:59.293

我`Insert`在 SQL Server 中的方式。此外，我通常检查是否存在临时表。

```
IF OBJECT_ID('tempdb..#MyTable') IS NOT NULL DROP Table #MyTable

SELECT b.Val as 'bVals'
  INTO #MyTable
FROM OtherTable as b 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-06-17T07:30:12.200

```
SELECT * 
INTO #TempTable
FROM table 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-08-11T16:50:07.110

我提供了两种方法来解决相同的问题，

> 解决方案1：这种方法包括2个步骤，首先创建一个具有指定数据类型的临时表，然后从现有数据表中插入值。

```
CREATE TABLE #TempStudent(tempID  int, tempName  varchar(MAX) )
INSERT INTO #TempStudent(tempID, tempName) SELECT id, studName FROM students where id =1

SELECT * FROM #TempStudent 
```

> 解决方案2：这种方法很简单，您可以直接将值插入到临时表中，系统会自动负责创建与原始表具有相同数据类型的临时表。

```
SELECT id, studName  INTO #TempStudent FROM students where id =1

SELECT * FROM #TempStudent 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-08-02T13:58:16.197

创建临时表后，您只需执行正常操作`INSERT INTO () SELECT FROM`

```
INSERT INTO #TempTable (id, Date, Name)
SELECT t.id, t.Date, t.Name
FROM yourTable t 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-06-06T07:38:24.877

正确的查询：

```
drop table #tmp_table

select new_acc_no, count(new_acc_no) as count1
into #tmp_table
from table
where unit_id = '0007' 
group by unit_id, new_acc_no
having count(new_acc_no) > 1 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-08-02T14:03:40.367

```
insert into #temptable (col1, col2, col3)
select col1, col2, col3 from othertable 
```

请注意，这被认为是不好的做法：

```
insert into #temptable 
select col1, col2, col3 from othertable 
```

如果临时表的定义发生变化，代码可能会在运行时失败。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-08-11T14:58:44.270

下面给出临时表的基本操作，根据您的要求修改和使用，

**-- 创建一个临时表**

```
CREATE TABLE #MyTempEmployeeTable(tempUserID  varchar(MAX), tempUserName  varchar(MAX) ) 
```

**-- 将值插入临时表**

```
INSERT INTO #MyTempEmployeeTable(tempUserID,tempUserName) SELECT userid,username FROM users where userid =21 
```

**-- 查询一个临时表 [这将只在同一个会话/实例中有效，而不是在其他用户会话实例中]**

```
SELECT * FROM #MyTempEmployeeTable 
```

**-- 删除临时表中的值**

```
DELETE FROM #MyTempEmployeeTable 
```

**-- 删除一个临时表**

```
DROP TABLE #MyTempEmployeeTable 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-08-02T13:58:30.607

```
INSERT INTO #TempTable(ID, Date, Name)
SELECT OtherID, OtherDate, OtherName FROM PhysicalTable 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-08-02T13:57:44.250

```
insert #temptable
select idfield, datefield, namefield from yourrealtable 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-21T10:44:53.223

上述所有答案几乎都可以达到目的。但是，您需要在对其进行所有操作后删除临时表。你可以关注——

```
INSERT INTO #TempTable (ID, Date, Name) 
SELECT id, date, name 
FROM physical_table;

IF OBJECT_ID('tempdb.dbo.#TempTable') IS NOT NULL 
    DROP TABLE #TempTable; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-21T10:48:34.977

上述所有答案几乎都可以达到目的。但是，您需要在对其进行所有操作后删除临时表。你可以关注——

```
INSERT INTO #TempTable (ID, Date, Name) 
SELECT id, date, name 
FROM physical_table;

IF OBJECT_ID('tempdb.dbo.#TempTable') IS NOT NULL 
    DROP TABLE #TempTable; 
```*

# c++ - 如何设置 Windows 文件打开对话框过滤器以包含“必须完成”选择

> ID：11778957
> 
> 赞同：0
> 
> 时间：2012-08-02T13:56:14.343
> 
> 标签：c++, c

我有一个文件打开对话框，其中包含三个阶段过滤器选项`<exact_name>.<ext>`，`*.<ext>`并且`'all files|*.*'`工作正常。

然而，我们现在有一个案例，我们有两个`<exact_name>.<ext>`文件变体，其中一个只是多了几个字符，例如`<date>_<time>.txt`和`<date>_<time>_raw.txt`.

不幸的是，以前的过滤器不再起作用，因为打开文件对话框**同时显示**版本，从而可能导致用户混淆、误点击等。

是否有类似于 RegEx 的方法来设置文件打开对话框的过滤器，例如`^<date>_<time>$.txt`，它只会在选择中找到与我的第一个过滤器完全匹配的方法？

* * *

[编辑] 也就是说，除了and之外是否还有任何额外的[通配符](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/find_file.mspx?mfr=true)选项。我忘记了，但在这种情况下使用它似乎没有帮助。`*``?``?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:18:34.147

Windows 打开文件对话框中的过滤器仅用于过滤特定的文件扩展名，而不是更具体的过滤器。即使您可能会找到破解“打开文件”对话框以使其正常工作的方法，但它绝对不会是 Windows 用户所期望的。

您不能将文件扩展名更改为`.rawtxt`或类似的东西吗？

# azure - 从命令行、PowerShell 创建 Azure 网站

> ID：11778959
> 
> 赞同：0
> 
> 时间：2012-08-02T13:56:25.680
> 
> 标签：azure, azure-web-app-service

我正在研究在 Windows Azure 中托管多个网站的可能性。

现在，我有一个专用服务器，我在其中开发了一个 Windows 服务，它每 5 分钟执行一次以下任务：

*   查看数据库中的表
*   查找新站点 在 IIS 中创建站点
*   在 SQL 服务器上创建数据库
*   使用连接字符串等参数将 MVC 3 包部署到 IIS

在 Azure 中，我找不到从 PowerShell 创建网站的方法，查看此处的 Cmdlets 文档： [//msdn.microsoft.com/en-us/library/windowsazure/jj152841.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841.aspx)

看起来很奇怪的是，使用 Mac 和 Linux 的命令行工具可以创建新站点：[https ://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/# Commands_to_manage_your_web_sites](https://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/#Commands_to_manage_your_web_sites)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:15:40.253

没错，目前没有对 WAWS 的 PowerShell 支持。这是微软在 WAWS 论坛上的回答：http: [//social.msdn.microsoft.com/Forums/da-DK/windowsazurewebsitespreview/thread/f4e69962-a1ec-437f-b205-bb1664242ed2](http://social.msdn.microsoft.com/Forums/da-DK/windowsazurewebsitespreview/thread/f4e69962-a1ec-437f-b205-bb1664242ed2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:54:59.317

您可以在 Windows 上安装跨平台工具。首先[安装 Node.js](http://nodejs.org/#download)然后运行 `npm install azure -g`​​.

然后，您可以访问 Windows Azure 网站工具。您可以观看我在[本期 WebCampsTV上演示工具](http://channel9.msdn.com/Shows/Web+Camps+TV/Cory-Fowler-Joins-Webcamps-TV-and-Introduces-the-Node-js-CLI-Tools)

# jquery - 在无限循环中，一个接一个地滑动 div

> ID：11778966
> 
> 赞同：1
> 
> 时间：2012-08-02T13:56:37.533
> 
> 标签：jquery

慢慢到达那里。

我想在无限循环中从 let 到右（下）滑入 div，一个接一个地滑入。

`$('#slider_1').show('slide', { direction: 'left' }, 1000).delay(4000).hide('slide', { direction: 'left' }, 1000);`

我动态获取我的 div ID 并将它们存储在这样的数组中：

```
var divs    = [];
var i       = 0;

$('#cover div').each(function()
{
    divs.push($(this).attr('id'));
}); 
```

现在我想循环遍历**divs**数组并在无限循环中一个接一个地完成滑动 div。

```
 <div id="cover">
        <div id="slider_1"><p class="content">SLIDER ONE</p></div>
        <div id="slider_2"><p class="content">SLIDER TWO</p></div>
        <div id="slider_3"><p class="content">SLIDER THREE</p></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:06:23.437

尝试以下操作：

```
var i = 1;

var go = setInterval(function(){
            $('#slider_'+i).show('slide', { direction: 'left' }, 100).delay(400).hide('slide', { direction: 'left' }, 100);
            i++;
            if (i == 4) { i = 1}
         }, 600) 
```

[演示](http://jsfiddle.net/32Vaq/)

或者：

[演示](http://jsfiddle.net/32Vaq/1)

# jquery - 将 json 字符串转换为 null 的 $.ParseJSON 问题

> ID：11778978
> 
> 赞同：0
> 
> 时间：2012-08-02T13:57:05.317
> 
> 标签：jquery, json, spring, parsing

我正在使用spring mvc，我将arraylist转换为json字符串。我有一个对象 1) 结果。

我的 spring 输出如下所示：

```
{
"data":"[{\"userName\":\"test1\",\"firstName\":\"test\",\"lastName\":\"user\"},        {\"userName\":\"test2\",\"firstName\":\"test1\",\"lastName\":\"user1\"}]",
} 
```

**当我使用此输出执行“ $.parseJSON** ”时，我得到的输出为 null 。当我尝试仅使用数据对象进行测试时，它工作正常

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:36:46.333

我解决了这个问题，我正在解析外部对象，其中包含对象而不是字符串。所以它失败了。当我解析 $.parseJSON(mainResult.data) 时，它工作正常，因为数据对象中包含字符串。

# c# - 用于检查价值存在的更好的代码/模式

> ID：11778979
> 
> 赞同：4
> 
> 时间：2012-08-02T13:57:11.997
> 
> 标签：c#, asp.net, .net, algorithm, design-patterns

我有如下所示的 web.config 条目。这是为了控制不同角色的用户对不同页面的访问。

管理屏幕可由招聘经理访问，CRM1 日志屏幕可由 CRM3 和受让人访问

```
add key="AdminScreenRoles" value ="Hiring Manager,CRM1"
add key="LogsScreenRoles" value ="CRM3,Transferee " 
```

将来可以授予新角色访问管理屏幕的权限。也可能会引入新页面。

我需要确保当前用户至少可以访问配置文件中的一个页面。我有以下代码。有用。此功能是否有更好/简洁/可扩展的代码？

```
List<string> authorizedRolesForAdmin = new List<string>((ConfigurationManager.AppSettings["AdminScreenRoles"]).Split(','));
List<string> authorizedRolesForLogs = new List<string>((ConfigurationManager.AppSettings["LogsScreenRoles"]).Split(','));
if ((authorizedRolesForAdmin.Contains(roleName)) || (authorizedRolesForLogs.Contains(roleName)))
{
    //Has access to at least one page
} 
```

**参考**：

1.  [用于从配置文件创建数组的可扩展 C# 代码](https://stackoverflow.com/questions/11780128/scalable-c-sharp-code-for-creating-array-from-config-file)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:06:47.023

您绝对可以像这样显着简化现有代码：

```
var hasOneRole =
    new [] { "Admin", "Log" }
    .SelectMany( screen => ( ConfigurationManager.AppSettings[ screen + "ScreenRoles" ] ?? "" ).Split( ',' ) )
    .Contains( roleName ); 
```

但随着时间的推移，这仍然会变得丑陋。Web.config 只是不适合那种东西。我建议您将访问控制设置放入数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:05:28.523

如果不是一些建议，请不要在这里看到太多空间来使事情变得更好，例如：

如果角色列表的数量变大

*   使用`Dictionary<RoleName..>`或`HashSet`

*也许*你可以控制喜欢的存在，避免创建额外的`List<T>`实例

```
(ConfigurationManager.AppSettings["AdminScreenRoles"]).
              Contains("roleName,")//tiny optimization.... 
```

但正如我之前所说，现在看起来的代码是最好的，因为它易于理解和阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:08:56.993

您可以避免拆分字符串，而是使用这样的东西，这应该会稍微快一些：

```
string authorizedRolesForAdmin = string.Concat(",", ConfigurationManager.AppSettings["AdminScreenRoles"]), ",");
string authorizedRolesForLogs = string.Concat(",", ConfigurationManager.AppSettings["LogsScreenRoles"]), ",");
string searchString = string.Concat(",", roleName, ",");

    if ((authorizedRolesForAdmin.Contains(roleName)) || (authorizedRolesForLogs.Contains(roleName)))
    {
        //Has access to at least one page
    } 
```

这避免了比较昂贵的 string.Split，也避免了创建两个列表。值得注意的是，`string.Contains`仅适用于 .NET4；在旧版本中，您将`string.IndexOf`改为检查 的值。

# cuda - 使用 CUDA 进行行列式计算

> ID：11778981
> 
> 赞同：6
> 
> 时间：2012-08-02T13:57:17.087
> 
> 标签：cuda, gpu, linear-algebra, gpgpu, nvidia

是否有任何库或免费可用的代码可以完全在 GPU 上计算**小**( )、双精度矩阵的行列式？`6x6`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-07T07:15:14.800

正如 Bart 在上面的评论中特别指出的那样，使用 GPU 来计算小矩阵（甚至其中许多矩阵）的行列式的计算并不能确保优于其他计算平台。

我认为计算矩阵行列式的问题*本身*是一个有趣的问题，在应用程序中可能会多次出现。目前，我不知道有任何库提供使用 CUDA 进行行列式计算的例程（也`cuBLAS`没有`cuSOLVER`这样的例程），因此您有两种可能性：

1.  正如 Pavan 所指出的，实施您自己的方法；
2.  设法使用其他可用的例程。

关于最后一点，一种可能性是使用[Cholesky 分解](https://stackoverflow.com/questions/29196139/cholesky-decomposition-with-cuda)，然后将行列式计算为 Cholesky 矩阵对角元素乘积的平方。在 Matlab 中，它将显示为：

```
prod(diag(chol(A)))^2 
```

下面，我提供了一个利用这个想法的代码。特别是，Cholesky 分解是通过使用`cuSOLVER`'`potrf`函数执行的，而 Cholesky 矩阵对角线上的元素的乘积是[使用 Thrust 进行跨步约简](https://stackoverflow.com/questions/24850442/strided-reduction-by-cuda-thrust)的应用。

下面的代码虽然适用于大型矩阵，但对于需要计算大型矩阵的行列式的人来说将立即有用。但是如何让它适应几个小矩阵呢？一种可能性是使用`cuSOLVER`' 流进行 Cholesky 分解，然后使用 Thurst 1.8 的新动态并行功能。请注意，从 CUDA 7.0 开始，`cuSOLVER`不允许使用动态并行。

这是代码：

```
#include "cuda_runtime.h"
#include "device_launch_paraMeters.h"

#include<iostream>
#include<iomanip>
#include<stdlib.h>
#include<stdio.h>
#include<assert.h>
#include<ostream>

#include <cusolverDn.h>
#include <cublas_v2.h>
#include <cuda_runtime_api.h>

#include "Utilities.cuh"

#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/iterator/permutation_iterator.h>
#include <thrust/functional.h>

#include <thrust/fill.h>
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>

#include <thrust/copy.h>

/*************************/
/* STRIDED RANGE FUNCTOR */
/*************************/
template <typename Iterator>
class strided_range
{
    public:

    typedef typename thrust::iterator_difference<Iterator>::type difference_type;

    struct stride_functor : public thrust::unary_function<difference_type,difference_type>
    {
        difference_type stride;

        stride_functor(difference_type stride)
            : stride(stride) {}

        __host__ __device__
        difference_type operator()(const difference_type& i) const
        {
            return stride * i;
        }
    };

    typedef typename thrust::counting_iterator<difference_type>                   CountingIterator;
    typedef typename thrust::transform_iterator<stride_functor, CountingIterator> TransformIterator;
    typedef typename thrust::permutation_iterator<Iterator,TransformIterator>     PermutationIterator;

    // type of the strided_range iterator
    typedef PermutationIterator iterator;

    // construct strided_range for the range [first,last)
    strided_range(Iterator first, Iterator last, difference_type stride)
        : first(first), last(last), stride(stride) {}

    iterator begin(void) const
    {
        return PermutationIterator(first, TransformIterator(CountingIterator(0), stride_functor(stride)));
    }

    iterator end(void) const
    {
        return begin() + ((last - first) + (stride - 1)) / stride;
    }

    protected:
    Iterator first;
    Iterator last;
    difference_type stride;
};

int main(void)
{
    const int Nrows = 5;
    const int Ncols = 5;

    const int STRIDE = Nrows + 1;

    // --- Setting the host, Nrows x Ncols matrix
    double h_A[Nrows][Ncols] = { 
        { 2.,    -2.,    -2.,    -2.,    -2.,},  
        {-2.,     4.,     0.,     0.,     0.,}, 
        {-2.,     0.,     6.,     2.,     2.,}, 
        {-2.,     0.,     2.,     8.,     4.,}, 
        {-2.,     0.,     2.,     4.,     10.,}
    };

    // --- Setting the device matrix and moving the host matrix to the device
    double *d_A;            gpuErrchk(cudaMalloc(&d_A,      Nrows * Ncols * sizeof(double)));
    gpuErrchk(cudaMemcpy(d_A, h_A, Nrows * Ncols * sizeof(double), cudaMemcpyHostToDevice));

    // --- cuSOLVE input/output parameters/arrays
    int work_size = 0;
    int *devInfo;           gpuErrchk(cudaMalloc(&devInfo,          sizeof(int)));

    // --- CUDA solver initialization
    cusolverDnHandle_t solver_handle;
    cusolverDnCreate(&solver_handle);

    // --- CUDA CHOLESKY initialization
    cusolveSafeCall(cusolverDnDpotrf_bufferSize(solver_handle, CUBLAS_FILL_MODE_LOWER, Nrows, d_A, Nrows, &work_size));

    // --- CUDA POTRF execution
    double *work;   gpuErrchk(cudaMalloc(&work, work_size * sizeof(double)));
    cusolveSafeCall(cusolverDnDpotrf(solver_handle, CUBLAS_FILL_MODE_LOWER, Nrows, d_A, Nrows, work, work_size, devInfo));
    int devInfo_h = 0;  gpuErrchk(cudaMemcpy(&devInfo_h, devInfo, sizeof(int), cudaMemcpyDeviceToHost));
    if (devInfo_h != 0) std::cout   << "Unsuccessful potrf execution\n\n";

    cusolverDnDestroy(solver_handle);

    // --- Strided reduction of the elements of d_A: calculating the product of the diagonal of the Cholesky factorization  
    thrust::device_ptr<double> dev_ptr = thrust::device_pointer_cast(d_A);
    typedef thrust::device_vector<double>::iterator Iterator;
    strided_range<Iterator> pos(dev_ptr, dev_ptr + Nrows * Ncols, STRIDE);

    double det = thrust::reduce(pos.begin(), pos.end(), 1., thrust::multiplies<double>());
    det  = det * det;

    printf("determinant = %f\n", det);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T18:18:46.593

这是计划，您将需要缓冲 100 个这些微小矩阵并启动内核一次以一次计算所有这些矩阵的行列式。

我不会编写实际的代码，但这应该会有所帮助。

1) 启动 # 块 = # 矩阵。每个块计算每个矩阵的行列式。

2) det(A) = det(A11 * A22 - A21 * A12); 其中 A 是 6x6，A11、A12、A21、A22 是 A 的 3x3 子矩阵。

3) 编写一个对 3x3 矩阵进行矩阵乘法的**设备**函数

4) 3x3 矩阵的 det 计算简单：[使用此处的公式](https://reference.wolfram.com/language/ref/Det.html)。

**编辑**：显然（2）仅在 A21 * A12 == A12 * A21 时有效

一种替代方法如下

1)对每个 6x6 矩阵[通过高斯消元法进行 LU 分解](http://www.personal.psu.edu/jhm/f90/lectures/lu.html)

2) 将 U 的对角元素相乘得到行列式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T14:00:20.737

您可以使用 OpenCL 或 CUDA 作为库并编写一个简短的程序（OpenCL 中的内核）来计算 GPU 上的行列式

CUDA [http://www.nvidia.de/object/cuda_home_new_de.html](http://www.nvidia.de/object/cuda_home_new_de.html)

OpenCL [http://www.khronos.org/opencl/](http://www.khronos.org/opencl/)

[http://www.csd.uwo.ca/~moreno/Publications/DetHpcsPaper-proceedings.pdf](http://www.csd.uwo.ca/~moreno/Publications/DetHpcsPaper-proceedings.pdf)

本文应包含 CUDA 的伪代码

# java - 在禁用 Jtabbedpane 中的选项卡时，该选项卡的外观没有变化

> ID：11778982
> 
> 赞同：2
> 
> 时间：2012-08-02T13:57:16.940
> 
> 标签：java, swing, jtabbedpane

我正在使用 JTabbedPane。在这个我必须禁用一些标签。我使用 setEnabledAt(index,false) 方法禁用选项卡。该选项卡实际上已被禁用，但我没有得到外观和感觉[禁用的选项卡文本的颜色变为浅色]。我该如何纠正它？

* * *

首先我使用java的默认外观...现在我将外观更改为nimbus ..我发现颜色发生了变化，但禁用的选项卡看起来不像禁用的复选框或单选按钮或其他组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:45:39.690

我想你*真正*想要的是禁用禁用选项卡上的所有组件？

Swing 的工作方式不像父组件的 setEnabled() 对子组件有任何影响 - 您需要自己在每个组件上调用 setEnabled(false) （毕竟您*可能*希望启用其中的一些，所以 Swing 不做任何假设，完全交给你）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:27:32.783

*   e 的大部分方法`JTabbedPan`都在 API 中受到保护，并且无法从`Swing methods`

*   必须寻找`Custom XxxTabbedPaneUI`，覆盖这些方法，并且可以从外部访问

*   正确的方法是仅实现[自定义外观](https://stackoverflow.com/questions/3954616/look-and-feel-in-java/3954646#3954646)，其中一部分也`JTabbedPane`覆盖`protected methods`

*   [自定义 XxxTabbedPaneUI](https://stackoverflow.com/questions/7054466/how-can-i-change-the-shape-of-a-jtabbedpane-tab/7056093#7056093)的示例

*   您可以很容易地更改`Foreground`禁用选项卡，但只有使用 HTML 语法才能正常工作

代码

```
tabbedPane.setTitleAt(2, "<html><font color="
    + (tabbedPane.isEnabledAt(int tab) ? "black" : "red") + ">"
    + tabbedPane.getTitleAt(int tab) + "</font></html>"); 
```

*   我建议使用自定义`Look and Feel`或简单更改`Foreground`使用`HTML`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:03:07.460

我不知道应该更改 LookAndFeel，但是使用 UIManager.put，您可以更改非常特殊部分的 LookAndFeel，我敢打赌，手动更改禁用的外观/感觉选项卡，您也许可以得到您想要的。

您可以查看此页面以获得一些帮助，以及指向所有外观/感觉选项的链接 [http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/color.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/color.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:33:48.077

也许您有自己的选项卡组件？

然后你必须将 Enable-State 委托给这个组件。

```
import java.awt.Component;
import java.awt.Dimension;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class Display extends JFrame {

    public Display() {
        super("Enable");
        this.setDefaultCloseOperation( EXIT_ON_CLOSE );
        this.setSize( new Dimension(300,300) );
        this.setLocationRelativeTo( null );

        JTabbedPane tabs = new JTabbedPane() {

            // delegating to tabComponent 
            @Override
            public void setEnabledAt( int index, boolean enabled ) {
                super.setEnabledAt( index, enabled );
                Component tabComponent = getTabComponentAt( index );
                if(tabComponent != null) {
                    getTabComponentAt( index ).setEnabled( enabled );
                }
            }
        };  

        JComponent component = new JLabel("Lorem");
        tabs.addTab( "", component );
        JLabel custom = new JLabel("disabled");
        tabs.setTabComponentAt( tabs.indexOfComponent( component ), custom );

        tabs.addTab( "enabled", new JLabel("Ipsum") );
        tabs.addTab( "disabled", new JLabel("Dolor") );
        tabs.addTab( "enabled", new JLabel("Sit") );
        tabs.addTab( "enabled", new JLabel("Amet") );
        tabs.setEnabledAt( 0, false );
        tabs.setEnabledAt( 2, false );
        tabs.setSelectedIndex( 1 );
        this.getContentPane().add( tabs );
    }

    public static void main( String[] args ) throws Exception {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Windows".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
        SwingUtilities.invokeLater( new Runnable() {
            @Override
            public void run() {
                new Display().setVisible( true );
            }
        } );
    }

} 
```

# android - 安卓。使用动态加载的 jar 中的资源

> ID：11778984
> 
> 赞同：0
> 
> 时间：2012-08-02T13:57:20.770
> 
> 标签：android, android-layout, android-resources, dynamic-class-loaders

我最后的希望:)

我正在为出租车服务的司机开发一个 Android 应用程序。在此产品的生命周期内可能会发生许多更新，因此我们希望尝试通过内部应用程序来维护它们。所以我写了一个通过互联网读取 jar 的启动器，我摆脱了在 DexClassLoader 的帮助下启动动态加载的代码。我使用通过清单注册的基本活动，但它使用一种动态加载的适配器来执行实际代码。

这样简单的适配器成功链接到活动并被执行。但我也未能使用 setContentView() 动态设置布局。我手动将所有 R 文件放入动态加载的 jar 文件中，但我仍然没有找到如何使用这些资源的解决方案。

真的没有办法做到这一点吗？如果不是，我认为这是一个大笑话：一个人可以从外部位置动态加载和执行几乎任何代码，但他不能使用来自这些位置的资源:(

# django - jquery数据未输入到postgresql数据库（django）

> ID：11778985
> 
> 赞同：0
> 
> 时间：2012-08-02T13:57:24.687
> 
> 标签：django, jquery-ui, django-forms

我的[base.html](http://jqueryui.com/demos/datepicker/)中有一个日期选择器。UI日历出现在页面中，所以我知道库等设置好，但是当我提交时，日期没有添加到数据库中。输入表格上的其他数据。

我也不认为这是格式问题，因为我添加了一个新的 CharField 列但仍然没有结果。

表格.py

```
from django import forms
from widgets import *
import datetime
from django.forms import widgets

class DateTestSaveForm(forms.Form):
    date_nm = forms.CharField(
        label=u'Date Name',
        max_length=30
    )
    fromdate = forms.DateField(label=u'date of birth', input_formats=['%d/%m/%Y', '%m/%d/%Y',], required=False, widget=widgets.DateInput(attrs={
        'class': 'required'
    }))
    testdate = forms.CharField(label=u'test') 
```

base.html

```
 <script type="text/javascript">

    $(function() {
      // $( "#datepicker" ).datepicker({ dateFormat: 'YYYY-MM-DD' });
    $( "#id_fromdate" ).datepicker();
    });

    $(function() {
      // $( "#datepicker" ).datepicker({ dateFormat: 'YYYY-MM-DD' });
    $( "#id_testdate" ).datepicker();
    });

</script> 
```

视图.py

```
from django.core.context_processors import csrf
from django.http import HttpResponse
from django.shortcuts import render_to_response
from d2.tt.models import *
from django import forms
from d2.tt.forms import *
from django.http import HttpResponseRedirect
from django.template import RequestContext

def datetest_save_page(request):
    if request.method == 'POST': 
        form = DateTestSaveForm(request.POST)
        if form.is_valid():
            date_nm, dummy = DateTest.objects.get_or_create(
                date_nm=form.cleaned_data['date_nm']
            )
            fromdate = form.cleaned_data['fromdate']
            testdate = form.cleaned_data['testdate']
            return HttpResponseRedirect('main_page.html') 
    else:
        form = DateTestSaveForm()
    return render_to_response('datetest_save.html', {
        'form': form, 
    },RequestContext(request))

def main_page(request):
    return render_to_response(
    'main_page.html',RequestContext(request)
    ) 
```

datetest_save.html

```
{% extends "base.html" %}
{% block title %}DateTest Title{% endblock %}
{% block head %}DateTest Head{% endblock %}

{% block content %}

<form method="post" action=".">{% csrf_token %}
{{ form.as_p }}
 <input type="submit" value="save it" /> 
</form>

{% endblock %} 
```

谢谢你的帮助。

编辑：在 TestDate 中将 forms.DateField 更改为 forms.CharField 编辑：添加了 views.py，添加了 datetest.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:06:11.790

弄清楚了。缺少保存方法。

# qt - 构建类似 iPod 的菜单

> ID：11778986
> 
> 赞同：0
> 
> 时间：2012-08-02T13:57:28.483
> 
> 标签：qt, qml

我对 QML 比较陌生，需要一些帮助。我必须创建一个类似 iPod 的菜单，该菜单显示带有艺术家菜单、曲目菜单和专辑菜单的主菜单。我考虑过为每个模型使用相同的 ListView，然后只是动态地交换模型，但是 QML 不允许我这样做（看起来你必须自己添加和删除每个元素）。

我想出的另一个解决方案是使用 Loader 加载具有相应模型的不同 ListView，但我想重新使用相同的 ListView，因为唯一改变的是内容。

另外，我必须在严格的 QML 中执行此操作。其中有 C++ 部分；然而，这只是为了渲染 QML，仅此而已。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:38:09.147

您*可以*更改`ListView`运行时的模型。

试试下面的代码：

```
Item {
  width: 1000
  height: 250

  ListView {
    id: view
    anchors.fill: parent

    model: model1

    delegate: Component{
      Rectangle {
        width: 50
        height: 50
        Text {text: value; anchors.centerIn: parent}
      }
    }
  }

  ListModel {
    id: model1
    ListElement {value: "A"}
    ListElement {value: "B"}
    ListElement {value: "C"}
  }

  ListModel {
    id: model2
    ListElement {value: "1"}
    ListElement {value: "2"}
    ListElement {value: "3"}
  }

  MouseArea {
    anchors.fill: parent
    onClicked: {
      console.log("model2")
      view.model = model2
    }
  }
} 
```

# java - 使用android捕获任何按钮的点击

> ID：11778987
> 
> 赞同：0
> 
> 时间：2012-08-02T13:57:28.970
> 
> 标签：java, android, onclick, android-button

谁来捕捉任何按钮的点击？

```
final Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
            Toast.makeText(WHKConversorActivity.this, "Hello World", Toast.LENGTH_SHORT).show();                    
       }
 }); 
```

这是对 button1 的点击，但我需要所有按钮的功能：-/。javascript中的示例：

```
$('button').click(function(){
    alert($(this).val());
}); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:08:05.057

如果您希望所有按钮都执行完全相同的操作（这不太可能），您可以将相同的单击侦听器绑定到每个按钮。例如：

```
final Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(mGlobalClick);

final Button button2 = (Button) findViewById(R.id.button2);
button2.setOnClickListener(mGlobalClick);

... ect

OnClickListener mGlobalListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
            //Stuff
            }
}; 
```

或者，如果您希望每个按钮执行不同的操作，但仍需要为每个按钮提供某种重复功能，您可以将这部分代码放在单独的方法中，并在每个点击侦听器中引用它

```
public void GlobalStuff(){
     //Stuff
}

OnClickListener mSpecificListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
            GlobalStuff();
            //More Stuff
            }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:14:07.237

假设您的活动中的所有视图都在某种视图组中，您可以使用它：

```
private void applyToAllButtons(ViewGroup viewGroup, OnClickListener listener) {
    for (int i = 0; i < viewGroup.getChildCount(); i++) {
        if (viewGroup.getChildAt(i) instanceof Button) {
            viewGroup.getChildAt(i).setOnClickListener(listener);
        }
    }
} 
```

然后，在您的 onCreate() 中，执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ... // old code here
    View view = findViewById(R.id.layoutRoot);
    setContentView(view);
    OnClickListener listener = new OnClickListener() {
        public void onClick(View v) {
            // Do stuff here.
        }
    };
    applyToAllButtons((ViewGroup) view, listener);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T13:58:27.633

没有像 javascript 那样的通用方式。您需要将点击处理程序分别分配给所有按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T13:59:45.540

您可以尝试覆盖`Button`该类，并`addListener`在其构造函数中调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T15:02:09.193

谢谢杰克......这更有用:) 更少的变量，更少的内存。OnClickListener 放在跳跳虎之前：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        OnClickListener globalClick = new View.OnClickListener() {
            public void onClick(View v) {
                // some functions...
            }
        };

        /* Tiggers */
        findViewById(R.id.button1).setOnClickListener(globalClick);
        findViewById(R.id.button2).setOnClickListener(globalClick);
        findViewById(R.id.button3).setOnClickListener(globalClick);
        findViewById(R.id.button4).setOnClickListener(globalClick);
        findViewById(R.id.button5).setOnClickListener(globalClick);
} 
```

# c# - 在我的 Outlook 2010 插件中添加功能区控件时遇到问题

> ID：11778994
> 
> 赞同：5
> 
> 时间：2012-08-02T13:58:09.077
> 
> 标签：c#, visual-studio-2010, vsto, ribbon, outlook-2010

在我的 Outlook 插件（VS2010）中学习使用功能区 UI 时，我多次删除并添加了功能区项目。从昨天开始，当我添加功能区项目时，一些自动生成的代码没有编译。

```
partial class ThisRibbonCollection
{
    internal MyRibbon MyRibbon
    {
        get { return this.GetRibbon<MyRibbon>(); }
    }
} 
```

抛出的错误是

> “MyAddin.ThisRibbonCollection”不包含“GetRibbon”的定义，并且找不到接受“MyAddin.ThisRibbonCollection”类型的第一个参数的扩展方法“GetRibbon”（您是否缺少 using 指令或程序集引用？）

所以，为了摆脱这个，我注释掉了代码块并编译了它。现在，我面临的问题是我无法通过此处提到的 Globals 对象访问功能区。[在运行时访问功能区](http://msdn.microsoft.com/en-us/library/bb772088.aspx)。我尝试为功能区特定代码“grepping”整个解决方案并删除它们并尝试添加功能区项目，但问题仍然存在。

我可以从功能区上的控件访问我的插件，但没有发生相反的情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-26T15:15:27.203

该错误可能是因为您在文件夹中创建了功能区，创建了一个新的命名空间。

简单的解决方案：删除命名空间名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T11:05:14.910

与另一个类似项目运行差异帮助我解决了这个问题。

# php - 在 '$doc->save()' 函数中插入 '.date()' 需要语法帮助，该函数夹在文本文件名和文件扩展名之间

> ID：11778996
> 
> 赞同：0
> 
> 时间：2012-08-02T13:58:13.170
> 
> 标签：php, xml, date, save

我试图通过使用 `.date("Y-m-d-H-i")`我的格式`$doc->save(filename.xml);`

显而易见的原因是创建存档功能而不是不断覆盖文件。

我试过各种组织都没有运气

举个例子：

`$doc->save('fileName'.date("Y-m-d-H-i")'.xml');` 但这崩溃了，我尝试了各种形式和“\”的位置，但没有成功。

有想法的人吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:08:25.380

使用 PeeHaa 提供的语法是解决方案。我错过了一个“。”

$doc->save('fileName'.date("YmdHi").'.xml');