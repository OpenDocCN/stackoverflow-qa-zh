# StackOverflow 问答 10481000-10481999

# perl - 如何在 Perl 中将十进制转换为十六进制？

> ID：10481001
> 
> 赞同：33
> 
> 时间：2012-05-07T11:08:22.420
> 
> 标签：perl

如何`$d = 1024`在 Perl 中将十进制的数字 0xFF 转换为十六进制的 0xFF？

该`d`变量需要分配给不同的变量并打印出来，因此为了便于阅读，我要求它采用十六进制格式。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-07T11:12:44.690

`1024`十进制不是`0xFF`十六进制。相反，它是`0x400`.

您可以将[sprintf](http://perldoc.perl.org/functions/sprintf.html)用作：

```
my $hex = sprintf("0x%X", $d); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-07T11:54:43.277

警告：在 2 ^(64) ≅ 10 ^(19处)`sprintf` **溢出**，在 32 位上甚至已经在 2 ^(32) ≅ 4×10 ⁹处溢出。

对于大数，启用 lexical pragma [`bigint`](http://p3rl.org/bigint)。[`as_hex`](http://p3rl.org/Math%3a%3aBigInt#as_hex)记录在`Math::BigInt`.

```
use bigint;
my $n = 2**65;
print $n->as_hex;   # '0x20000000000000000' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T14:32:58.440

# 我将这些片段放入我的 $PATH 中的 Perl 文件中：

### 将十进制数字列表转换为十六进制和二进制

```
for ($i = 0; $i < @ARGV; $i++) {
    printf("%d\t= 0x%x\t= 0b%b\n", $ARGV[$i], $ARGV[$i], $ARGV[$i]);
} 
```

### 将十六进制数列表转换为十进制和二进制

```
for ($i = 0; $i < @ARGV; $i++) {
    $val = hex($ARGV[$i]);
    printf("0x%x\t= %d\t= 0b%b\n", $val, $val, $val);
} 
```

### 将二进制数列表转换为十进制和十六进制

```
for ($i = 0; $i < @ARGV; $i++) {
    # The binary numbers you type must start with '0b'
    $val = oct($ARGV[$i]);
    printf("0b%b\t= %d\t= 0x%x\n", $val, $val, $val);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:13:32.323

您可以使用经典的**printf()**。

```
printf("%x",$d); 
```

# iphone - 将远程 I/0 输出写入和编码到文件 - Core Audio

> ID：10481002
> 
> 赞同：7
> 
> 时间：2012-05-07T11:08:30.667
> 
> 标签：iphone, core-audio

我正在使用 Audio Units 编写音乐录制应用程序，但在让生成的 M4A 文件播放除了不那么令人敬畏的嗡嗡声之外的任何东西时遇到了一些问题。我已经使用这些 SO[来源](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable) [作为](https://stackoverflow.com/questions/8615358/can-anybody-help-me-in-recording-iphone-output-sound-through-audio-unit) [参考](https://stackoverflow.com/questions/7118429/how-to-record-sound-produced-by-mixer-unit-output-ios-core-audio-audio-graph)，并且我已经尝试了一切来排除故障。

我有`AUGraph`2 个节点：一个多通道混音器和一个远程 I/O。我的混音器上有两个输入回调：一个从麦克风中提取输入，一个从音频文件中提取。混频器输出连接到 I/O 单元上输出范围的输入元件。这可以实现同时 I/O。

为了捕获输出，我添加了一个回调和两个方法：

**回调**

```
static OSStatus recordAndSaveCallback (void *                inRefCon,
                                       AudioUnitRenderActionFlags * ioActionFlags,
                                       const AudioTimeStamp *       inTimeStamp,
                                       UInt32                       inBusNumber,
                                       UInt32                       inNumberFrames,
                                       AudioBufferList *            ioData) 
{
    Mixer* THIS = (__bridge Mixer*)inRefCon;
    AudioBufferList bufferList;

    OSStatus status;
    status = AudioUnitRender(THIS.ioUnit,    
                             ioActionFlags,
                             inTimeStamp,
                             0,
                             inNumberFrames,
                             &bufferList);

    SInt16 samples[inNumberFrames]; // A large enough size to not have to worry about buffer overrun
    memset (&samples, 0, sizeof (samples));

    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0].mData = samples;
    bufferList.mBuffers[0].mNumberChannels = 1;
    bufferList.mBuffers[0].mDataByteSize = inNumberFrames*sizeof(SInt16);

    OSStatus result;
    if (*ioActionFlags == kAudioUnitRenderAction_PostRender) {
        result =  ExtAudioFileWriteAsync(THIS.extAudioFileRef, inNumberFrames, &bufferList);
        if(result) printf("ExtAudioFileWriteAsync %ld \n", result);}
    return noErr; 
} 
```

**录音方法：**

```
- (void)recordFile
{    
    OSStatus result;

    NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *recordFile = [documentsDirectory stringByAppendingPathComponent: @"audio.m4a"];

    CFURLRef destinationURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, 
                                                            (__bridge   CFStringRef)recordFile, 
                                                            kCFURLPOSIXPathStyle, 
                                                            false);    

    AudioStreamBasicDescription destinationFormat;
    memset(&destinationFormat, 0, sizeof(destinationFormat));
    destinationFormat.mChannelsPerFrame = 1;
    destinationFormat.mFormatID = kAudioFormatMPEG4AAC;
    UInt32 size = sizeof(destinationFormat);
    result = AudioFormatGetProperty(kAudioFormatProperty_FormatInfo, 0, NULL, &size, &destinationFormat);        
    if(result) printf("AudioFormatGetProperty %ld \n", result);    

    result = ExtAudioFileCreateWithURL(destinationURL, 
                                       kAudioFileM4AType, 
                                       &destinationFormat, 
                                       NULL, 
                                       kAudioFileFlags_EraseFile, 
                                       &extAudioFileRef);
    if(result) printf("ExtAudioFileCreateWithURL %ld \n", result);

    AudioStreamBasicDescription clientFormat;
    memset(&clientFormat, 0, sizeof(clientFormat));

    UInt32 clientsize = sizeof(clientFormat);   
    result = AudioUnitGetProperty(ioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &clientFormat, &clientsize);
    if(result) printf("AudioUnitGetProperty %ld \n", result);

    UInt32 codec = kAppleHardwareAudioCodecManufacturer;

    result = ExtAudioFileSetProperty(extAudioFileRef, 
                                     kExtAudioFileProperty_CodecManufacturer, 
                                     sizeof(codec), 
                                     &codec);

    if(result) printf("ExtAudioFileSetProperty %ld \n", result);

    result = ExtAudioFileSetProperty(extAudioFileRef,kExtAudioFileProperty_ClientDataFormat,sizeof(clientFormat), &clientFormat);
    if(result) printf("ExtAudioFileSetProperty %ld \n", result);

    result =  ExtAudioFileWriteAsync(extAudioFileRef, 0, NULL);
    if (result) {[self printErrorMessage: @"ExtAudioFileWriteAsync error" withStatus: result];}

   result = AudioUnitAddRenderNotify(ioUnit, recordAndSaveCallback, (__bridge void*)self);
    if (result) {[self printErrorMessage: @"AudioUnitAddRenderNotify" withStatus: result];}     
} 
```

**保存方法：**

```
- (void) saveFile {
    OSStatus status = ExtAudioFileDispose(extAudioFileRef);
    NSLog(@"OSStatus(ExtAudioFileDispose): %ld\n", status);

} 
```

**这是我在控制台中看到的：**

```
Stopping audio processing graph
OSStatus(ExtAudioFileDispose): 0
ExtAudioFileWriteAsync -50 
ExtAudioFileWriteAsync -50 
ExtAudioFileWriteAsync -50 
```

在我看来，我的代码与那些让它工作的人的代码非常相似，但显然我犯了一个严重的错误。我敢肯定，一定还有其他人在为此苦苦挣扎。

有没有人有任何见解？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:48:06.920

我知道这个问题很久以前就被问过了，你现在可能已经发现了错误，我只是在回答其他可能有同样问题的人。

我可能是错的，但我认为问题在于您正在为缓冲区进行范围内变量声明。

我建议你改变

```
SInt16 samples[inNumberFrames]; 
```

进入

```
SInt16* samples = malloc(inNumberFrames * sizeof(SInt16)); 
```

由于 recordAndSaveCallback 旨在填充缓冲区列表，因此如果您进行范围内声明，则一旦范围结束，数据将被销毁。

# javascript - 随机数生成器，小数中断

> ID：10481007
> 
> 赞同：3
> 
> 时间：2012-05-07T11:08:58.750
> 
> 标签：javascript

这是我的代码：

```
 var randomNumber = function(from,to,dec)
{
    var num = Math.random()*(to-from+1)+from;
    var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
    return result;
}; 
```

目标是获取给定范围内的随机数并将结果四舍五入到给定的小数位。它适用于 1-10 或 50-100 等范围，但是当我尝试这样的小数字时：

```
randomNumber(0.01,0.05,5) 
```

我得到像 0.27335 和 1.04333 这样的坏结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:22:27.743

您的计算结果不情愿 +1。应该`to-from`没有+1：

```
var randomNumber = function (from, to, dec) {
    var num = Math.random() * (to - from ~~+1~~) + from;
    var result = Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
    return result;
};
```

您的代码应如下所示：

```
var randomNumber = function (from, to, dec) {
    var num = Math.random() * (to - from) + from;
    var result = Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
    return result;
}; 
```

实际上，可以通过省略以下`result`变量来进一步缩短它：

```
var randomNumber = function (from, to, dec) {
    var num = Math.random() * (to - from) + from; //Generate a random float
    return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec); //Round it to <dec> digits. Return.
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:29:54.903

```
 var randomNumber = function(from,to,dec)
{
    var num = Math.random()*(to-from)+from;
    var result = Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
    return result;
} 
```

# python - 在内存满之前系统交换

> ID：10481008
> 
> 赞同：2
> 
> 时间：2012-05-07T11:08:58.767
> 
> 标签：python, linux, matplotlib, archlinux

我的程序使用 matplotlib 绘制大量行（~200k），这对内存非常贪婪。在绘图之前，我通常有大约 1.5G 的可用内存。当我展示这些数字时，当仍有大约 600-800M 的可用 RAM 时，系统开始大量交换。例如，当创建一个巨大的 numpy 数组时，不会观察到这种行为，它只是瞬间占用所有可用内存。弄清楚这是 matplotlib 还是系统问题会很好。

我正在使用 64 位 Arch Linux。

**UPD：** swapiness 级别设置为 10。尝试将其设置为 0，正如 DoctororDrive 建议的那样，但同样的事情。但是，其他程序似乎可以在使用交换之前填充几乎所有内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:14:36.583

它开始交换，在 RAM 中留下一些空闲内存。您应该考虑设置[Swappiness](http://en.wikipedia.org/wiki/Swappiness)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:18:44.040

对于庞大的 numpy 数组要考虑的一件事是您没有触摸它。默认情况下，内核会延迟分配内存。尝试在那个巨大的数组中写入一些值，然后检查交换行为。

# activerecord - 未定义的方法`find_or_create'

> ID：10481009
> 
> 赞同：6
> 
> 时间：2012-05-07T11:09:01.283
> 
> 标签：activerecord, ruby-on-rails-3.2

我想使用以下命令在数据库中更新记录

```
Profile.find_or_create(fname: contact.FirstName, lname: contact.LastName,
  company: account.Name, title: contact.Title, user_id: contact.CreatedById, 
  account_id: account.Id, contact_id: contact.Id, type: "contact"  ) 
```

哪里`Profile`是`activerecord model`

但我收到以下错误

```
undefined method find_or_create for Profile class 
```

`Profile.public_methods`不显示`find_or_create`方法，但`Activerecord Api`定义了上述方法。

可能有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T11:32:59.273

它`find_or_create_by`和它在 Rails 3 中被弃用了。

采用`@foo = Foo.find_by_bar("baz") || Foo.create(:bar => "baz")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-24T13:05:34.500

根据[**`Rails 4 docs`**](http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/find_or_create_by)用途：

```
User.find_or_create_by(first_name: 'Joe') 
```

代替：

```
User.find_or_create_by_first_name('Joe') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:56:41.780

我的 Rails 版本

```
Rails -v
  Rails 3.1.3 
```

我的红宝石版本

```
Ruby -v
  ruby 1.9.2p290 
```

在 Rails 控制台中，我可以使用

```
find_or_create_by method like below

1.9.2-p290 :001 > User.find_or_create_by_name("soundar")
User Load (0.8ms)  SELECT `users`.* FROM `users` WHERE `users`.`name` = 'soundar' LIMIT 1
=> #<User id: 1, name: "soundar", age: 23, created_at: "2012-04-17 11:12:43", updated_at: "2012-04-17 11:12:43"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-15T21:59:19.913

~> 导轨 4

```
["Goose Island IPA", "Dogfish Head 90 Min IPA", "Mother Earth Oatmeal Stout", "Raleigh Brewing Mocha Stout"].each do |beer|
  Beer.find_or_initialize_by(name: beer)
end 
```

# iphone - iOS 5.0 中的 Facebook 集成

> ID：10481011
> 
> 赞同：1
> 
> 时间：2012-05-07T11:09:06.860
> 
> 标签：iphone, facebook, ios5, xcode4.2

我已经在 Xcode 4.2.1 (iOS5) 中使用 ARC（自动引用计数）开发了一个 iPhone 应用程序......我通过使用新的 Facebook iOS SDK 创建 staticLibrary 来集成 Facebook（从此链接下载[https://github.com/facebook /facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk) )... 为了集成 Facebook，我在教程[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)中编写了代码...

当我点击上面的链接时，完整的 Facebook 正在集成到我的应用程序中......但我想编写代码（只需删除上面教程中的代码）以允许用户登录并发布墙和注销（登录按钮，A标签/提示写墙，共享按钮，注销按钮），当用户单击共享时，我想用该墙发送附件（用户无法编辑）...即；我的应用程序应该作为教程[http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)中的示例项目工作...

我希望在我的 ViewController.m 文件中为第一个链接中的新 sdk/该教程中使用的 sdk 编写代码（两者都相同）...如果我完全按照 raywenderlich 教程进行操作，我会收到类似的错误。

![在此处输入图像描述](../Images/15fc097ee3d484f4e7f23ef887be37c9.png)

然后我现在必须做什么来获得像 raywenderlich 的项目（o/p：发布带有附件的墙）和 New iOS SDK 的输出......请帮助我......

感谢你...

# c# - GridView 控件的行命令

> ID：10481013
> 
> 赞同：1
> 
> 时间：2012-05-07T11:09:13.367
> 
> 标签：c#, asp.net

我的 C# Web 应用程序中有一个 GridView 控件。在我的网格视图中，我有一个名为 Select, 的 ButtonField `ID="btnSelect"`。基本上，在我的 GridView 控件中，我有一个客户的名字、姓氏、地址和电话号码，对于相应的信息，我有文本框。当我在 gridview 中点击/触发选择按钮时，我希望客户端名称进入文本框，并且我已经成功地做到了，但是在我的应用程序中，您最多可以选择 6 个客户端。有没有比我这样做更好的方法？代码如下：

```
 void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
 {
  int index = Convert.ToInt32(e.CommandArgument);
  GridViewRow row = GridView1.Rows[index];

  if(string.IsNullOrEmpty(txtName1.Text) && string.IsNullOrEmpty(txtLName1.Text) &&
     string.IsNullOrEmpty(txtAddr1.Text) && string.IsNullOrEmpty(txtPhone1.Text))
    {
      txtName1.Text=Server.HtmlDecode(row.Cells[1].Text);
      txtLName1.Text=Server.HtmlDecode(row.Cells[2].Text);
      txtAddr1.Text=Server.HtmlDecode(row.Cells[3].Text);
      txtPhone1.Text=Server.HtmlDecode(row.Cells[4].Text);

    }
  //If I hit another select button then this will load the sencond set of txtboxes
    if(string.IsNullOrEmpty(txtName2.Text) && string.IsNullOrEmpty(txtLName2.Text) &&
     string.IsNullOrEmpty(txtAddr2.Text) && string.IsNullOrEmpty(txtPhone2.Text))
    {
      txtName2.Text=Server.HtmlDecode(row.Cells[1].Text);
      txtLName2.Text=Server.HtmlDecode(row.Cells[2].Text);
      txtAddr2.Text=Server.HtmlDecode(row.Cells[3].Text);
      txtPhone2.Text=Server.HtmlDecode(row.Cells[4].Text);

    }
 //The thrid time will load the third button and so on until I fill each txtbox if I choose.
} 
```

有没有更好的方法来编写这个代码，如果每次我点击行命令中的选择按钮，我就不必把所有那些复杂的 if 语句放在那里？是否有像 foreach 循环可以处理这个任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:21:59.150

我建议查看 FindControl 方法。

您可以使用以下内容：

```
TextBox txtName = FindControl(string.Format("txtName{0}", index) as TextBox;
if(txtName != null)
{
txtName.Text = row.Cells[1].Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:47:28.583

优化版本在这里

```
void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e) {
    GridViewRow row = ((Control) sender).NamingContainer as GridViewRow;
    PopulateClients(txtName1, txtLName1, txtAddr1, txtPhone1, row);

    //If I hit another select button then this will load the sencond set of txtboxes
    PopulateClients(txtName2, txtLName2, txtAddr2, txtPhone2, row);
    //The thrid time will load the third button and so on until I fill each txtbox if I choose.
}

private void PopulateClients(TextBox t1, TextBox t2, TextBox t3, TextBox t4, GridViewRow r) {
    if (string.IsNullOrEmpty(t1.Text) && string.IsNullOrEmpty(t2.Text) && string.IsNullOrEmpty(t3.Text) && string.IsNullOrEmpty(t4.Text)) {
        t1.Text = Server.HtmlDecode(r.Cells[1].Text);
        t2.Text = Server.HtmlDecode(r.Cells[2].Text);
        t3.Text = Server.HtmlDecode(r.Cells[3].Text);
        t4.Text = Server.HtmlDecode(r.Cells[4].Text);    
    }
}​ 
```

# iphone - 在单击按钮时调用具有不同参数的 api 并将其传递给单元格以获取 iPhone 中的 indexpath 行

> ID：10481015
> 
> 赞同：2
> 
> 时间：2012-05-07T11:09:22.920
> 
> 标签：iphone, objective-c

我有一个应用程序，其中有一个控制器类，其中包含一个表视图。在控制器中，我有一个搜索栏和 5 个按钮。当我第一次运行我的应用程序时，我希望第一个按钮保持选中状态。

当单击按钮时，我正在从服务器调用 JSON api，并根据从 JSON 返回的值，我想在我的 tableview 中显示。单击第二个按钮时，将调用相同的函数，但将不同的参数作为 id 传递给它。我已经完成了代码，但是当应用程序第一次运行时出现问题，第一个按钮被选中并且它的 api 被调用但是当我切换到下一个按钮时，我的 tableview 没有用新值刷新。

我有 5 个按钮已添加到我的控制器类中。当我第一次运行我的应用程序时，我希望第一个按钮保持选中状态并执行其操作并调用 api，当单击第二个按钮时，应该执行第二个操作，依此类推，同样应该反映在 tableview 上单击特定按钮时的结果。

这是我的代码：

```
- (void)viewDidLoad {
    category = [[ResultJson alloc] init];
    dealsArray = [[NSMutableArray alloc] init];
    [self.view bringSubviewToFront:btnAll];
    [btnAll setBackgroundImage:[UIImage imageNamed:@"icon-1-active.png"] forState:UIControlStateNormal];
    if ([[btnAll backgroundImageForState:UIControlStateNormal] isEqual:[UIImage imageNamed:@"icon-1-active.png"]])
    {
        [self btnAll]; 
    }
    [super viewDidLoad];

 }

-(IBAction)btnAll
{
    [self.tblView reloadData];
    NSLog(@"Done");
    [self.view bringSubviewToFront:btnAll];
    if (category.newArray)
    {
        [category.newArray release];
    }
    category.newArray = [[NSMutableArray alloc] init];
    [btnAll setUserInteractionEnabled:YES];
    [btnAll setBackgroundImage:[UIImage imageNamed:@"icon-1-active.png"] forState:UIControlStateNormal];
    [btnEntertainment setBackgroundImage:nil forState:UIControlStateNormal];
    [btnRetail setBackgroundImage:nil forState:UIControlStateNormal];
    [btnServices setBackgroundImage:nil forState:UIControlStateNormal];
    [btnFood setBackgroundImage:nil forState:UIControlStateNormal];
    [btnHealthBeauty setBackgroundImage:nil forState:UIControlStateNormal];
    [category GetDetails:1];
    [dealsArray addObjectsFromArray:category.newArray];
    btnAll.tag = 0;

}

-(IBAction)btnEntertainment
{
    [self.tblView reloadData];

    [self.view bringSubviewToFront:btnEntertainment];
    if (category.newArray)
    {
        [category.newArray release];
    }
    category.newArray = [[NSMutableArray alloc]init];
    [btnEntertainment setBackgroundImage:[UIImage imageNamed:@"icon-2-active.png"] forState:UIControlStateNormal];
    [btnAll setBackgroundImage:nil forState:UIControlStateNormal];
    [btnRetail setBackgroundImage:nil forState:UIControlStateNormal];
    [btnHealthBeauty setBackgroundImage:nil forState:UIControlStateNormal];
    [btnServices setBackgroundImage:nil forState:UIControlStateNormal];
    [btnFood setBackgroundImage:nil forState:UIControlStateNormal];

    [category GetDetails:2];

    [dealsArray addObjectsFromArray:category.newArray];
    btnEntertainment.tag = 1;

} 
```

这是我的第一个 2 按钮操作，我通过将 id 作为参数传递给 GetDetails api 方法来调用它。最初在 ViewDidload 中，我将我的第一个 btnAll 设置为选中并执行其操作，但问题是当我单击第二个按钮时，第一个按钮的结果显示在 tableview 上，第二次单击第二个按钮其结果在表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:04:57.370

你想做什么，正如我在你的问题中所理解的那样。我想告诉你三件事。

1）`[yourtablview reloadData];`当您需要用新数据刷新表时添加。

2）在调用按钮操作之前，根据您的类别为所有按钮设置不同的标签

3）使用`IBAction`以下方式

```
 -(IBAction)btnEntertainment:(id)sender // here i used action name `btnEntertainment`. you can use your action name.
     {
       int buttonidentifier = [sender tag];// this will give button tag so you can identify which button clicked or tapped and call you api your according to that like below.

       if(buttonidentifier == 1)//this tag will give you button identification. For example you set tag 1 for `button1` than this is indicate that you first button is tapped or click.
         {
           // call first category api and do whatever you want do 
          }

      else if(buttonidentifier == 2)//this tag will give you button identification. For example you set tag 2 for `button2` than this is indicate that you second button is tapped or click.
         {
           // call Second category api and do whatever you want do 
          }
      } 
```

**>> 编辑添加**

当您在 viewdidload 中创建按钮时，您已经设置了按钮标签。您不需要为每个按钮编写另一个操作，相同的操作将适用于所有按钮，它会识别哪个按钮被点击或使用按钮标签（`buttonidentifier`）单击，如我的代码所示。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:19:34.483

一个你必须检查你如何测试应用程序的第一次使用，如果它依赖于不同的用户，那么在 NSDefaults 中保存他们的一些唯一 ID 以及 YE，例如

```
[[NSDefulsts standardDefaults] setBool:YES forKey:someUserID];
[NSDefulsts standardDefaults] synchronize]; 
```

并在获取时间检查相同的ID

```
[[NSDefulsts standardDefaults] getBoolForKey:someUserID] 
```

如果不是用户，那么任何变量都像

```
[[NSDefulsts standardDefaults] setBool:YES forKey:isFirstTime]; 
```

对于您的第二个问题，每当您希望重新加载 tableveiew 时，请致电

```
[tablview reloadData]; 
```

每次请求完成时都会调用它，并将 jSON 的值设置为某个数组或字典

# mysql - 在云中部署 Java Web 应用程序

> ID：10481021
> 
> 赞同：0
> 
> 时间：2012-05-07T11:09:39.513
> 
> 标签：mysql, google-app-engine, deployment, spring-security, cloud

我有一个关于在云中部署 Java 应用程序的问题。我在 Java usign JSP、Spring security 和 MySql 中开发了简单的应用程序。我需要将它部署在云中并展示给其他人几天。我想找一些免费的主机来部署应用程序和配置数据库。首先我想到了 Google Apps Engine，但我读到与 MySQl 连接存在一些问题。任何人都可以给我任何建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:16:06.907

我认为你应该看看 Dotcloud 的免费临时托管。

# python - Python：二进制到图像的转换

> ID：10481022
> 
> 赞同：-3
> 
> 时间：2012-05-07T11:09:42.360
> 
> 标签：python, image-processing, binaryfiles, binary-data, image-conversion

我有一个二进制文件，其中包含带有标题的图像。

详细情况如下。

*   第一个`1024 bytes`包含标题然后`32 bytes`是每行的标题
*   然后构成**下一**`4608 bytes`行图像。 **`5000 lines`**

 **所以这将成为一个`4608x5000 pixel image`连同标题。

我应该如何读取**二进制文件**以及如何形成和使用图像？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:52:31.013

您需要打开文件（如果代码将在 Windows 上运行，则使用二进制模式）然后使用该`read(size)`方法提取字节。如果图像格式是以字节为单位描述的，那么您只需根据需要拆分数据。

或者，如果您需要将值转换为整数等，那么 Python 有一个[struct 模块](http://docs.python.org/library/struct.html)可用于解压缩二进制数据（因此您可以按上述方式读取数据，但使用 struct 转换为整数等）。**

# delphi - 远程调试符号文件格式

> ID：10481027
> 
> 赞同：5
> 
> 时间：2012-05-07T11:09:59.570
> 
> 标签：delphi, remote-debugging, file-format, debug-symbols

有谁知道远程调试符号文件的文件格式（项目 -> 选项 -> 链接 -> 包含远程调试符号）？

# linux - 使用netem进行带宽限制？

> ID：10481032
> 
> 赞同：7
> 
> 时间：2012-05-07T11:10:27.807
> 
> 标签：linux, bandwidth, bandwidth-throttling

我正在尝试将网络模拟为（比特率：200kbps，丢包：0.03，延迟：400ms）并且我正在使用 netem。

```
tc qdisc add dev eth1 root handle 1:0 netem delay 400ms loss 0.03%
tc qdisc add dev eth1 parent 1:1 handle 10: tbf rate 200kbit buffer 1600 limit 3000 
```

当我运行它时，我收到错误说明

```
RTNETLINK answers: No such file or directory 
```

我哪里错了？我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T07:21:30.093

```
tc qdisc add dev eth1 root handle 1:0 tbf rate 200kbit buffer 1600 limit 3000
tc qdisc add dev eth1 parent 1:0 handle 10: netem delay 400ms loss 0.03% 
```

这行得通。严重不知道这两者之间的区别，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T12:41:54.633

请参考[http://edseek.com/~jasonb/articles/traffic_shaping/classes.html](http://edseek.com/~jasonb/articles/traffic_shaping/classes.html)

--> edseek 链接已失效 - 尝试 archive.is 页面： http: [//archive.is/o4UTQ](http://archive.is/o4UTQ)

--> 或者更好：[http ://www.lartc.org](http://www.lartc.org)

==:> 还有另一个很好的资源： http: [//myconfigure.blogspot.com/2012/03/traffic-shaping.html](http://myconfigure.blogspot.com/2012/03/traffic-shaping.html)

请获取以下 cmds 以根据您的要求设置 eth。

```
tc qdisc del dev eth1 root
tc qdisc add dev eth1 root handle 1: htb default 1
tc class add dev eth1 parent 1: classid 0:1 htb rate 200kbit
tc qdisc add dev eth1 parent 1:1 handle 10: netem delay 400000 5 loss 0.03%
tc qdisc ls dev eth1
tc class ls dev eth1 
```

# visual-studio-2010 - 什么是添加|运行配方命令？

> ID：10481036
> 
> 赞同：1
> 
> 时间：2012-05-07T11:10:40.443
> 
> 标签：visual-studio-2010, asp.net-mvc-4

将 ASP.NET MVC 4 Beta 安装到 Visual Studio 2010 后，右键单击**Controllers**文件夹后，我在上下文菜单中有此命令，但是当我单击它时，会出现**Select a recipe to run**对话框而没有任何选择。这个东西有什么用，为什么在通常用于添加控制器的上下文菜单中显示如此重要（它在**添加|控制器**命令旁边）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:13:36.487

它包含在[发行说明中](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253812)：

> 新的“食谱”功能使 Visual Studio 能够基于可以使用 NuGet 安装的包生成特定于解决方案的代码。Recipes 框架使开发人员可以轻松编写代码生成插件，您还可以使用这些插件来替换 Add Area、Add Controller 和 Add View 的内置代码生成器。由于配方部署为 NuGet 包，因此可以轻松地将它们检入源代码管理并自动与项目中的所有开发人员共享。它们也可在每个解决方案的基础上使用。

Haacked 还写了关于食谱的[博客](http://haacked.com/archive/2011/09/21/writing-a-recipe-for-asp-net-mvc-4-developer-preview.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:08:49.417

现在可能会被淘汰，所以请谨慎使用。检查此链接：http: [//msdn.microsoft.com/en-us/library/ff697216.aspx](http://msdn.microsoft.com/en-us/library/ff697216.aspx)

# android - 如何在方向更改 Android 时保持 XML 视图的状态

> ID：10481039
> 
> 赞同：0
> 
> 时间：2012-05-07T11:10:57.600
> 
> 标签：android, view, orientation, android-relativelayout, orientation-changes

我有以下问题我正在实现一个应用程序，该应用程序提供不同类型的调查，这些调查具有不同类型的受支持问题/答案

*   单选按钮
*   复选框
*   文本字段
*   图像选择
*   拖放项目

我想要的是当我改变设备的方向时，我保持相同的状态

即->文本仍将在文本字段内...将用户的选择保留在无线电组/复选框上...等

我已经尝试过覆盖

onsaveInstance & onRestoreInstance

但问题是我有不同类型的观点&答案可以被视为其中任何一个，具体取决于问题类型

所以我正在考虑保存整个 XML 视图，然后再次将其传递给 setContentView()

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:14:21.837

在 android manifest 文件中的 Activity 中使用`android:configChanges="keyboardHidden|orientation"`。

**例子**

```
 <activity
     android:name=".ui.Contact"  android:configChanges="keyboardHidden|orientation"/> 
```

它是保持 XML 视图在方向变化时的状态。

# asp.net - 出现在引擎搜索结果中的 DropDownList 内容

> ID：10481042
> 
> 赞同：0
> 
> 时间：2012-05-07T11:11:28.170
> 
> 标签：asp.net, drop-down-menu, seo

我正在管理一个在线商店，客户可以从中选择他们的国家`DropDownList`来计算他们订单的运费，但我发现搜索引擎的结果显示了这个控件中的国家列表。

任何人都知道任何公认的 SEO 做法可以避免这种情况发生吗？

**添加代码**

```
<asp:DropDownList ID="CbCountry" DataTextField="Country" AutoPostBack="true" DataValueField="IdCountry" runat="server"></asp:DropDownList> 
```

使用`DropDownList`此函数从数据库中填充：

```
CbCountry.Items.Clear()
CbCountry.DataSource = (New CountryManager).GetCountries(lang)
CbCountry.DataBind()

If CInt(0 & Country) > 0 Then
    CbCountry.SelectedValue = Country
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:28:55.730

您可以使用`Request.Browser.Crawler`like进行简单的检查

```
IF Request.Browser.Crawler Then
  CbCountry.Visible = false
Else
  CbCountry.Items.Clear()
  CbCountry.DataSource = (New CountryManager).GetCountries(lang)
  CbCountry.DataBind()

  If CInt(0 & Country) > 0 Then
      CbCountry.SelectedValue = Country
  End If
End if 
```

很简单，但我看不出这样做的原因。

# jquery - 如何显示jquery加载的进度

> ID：10481043
> 
> 赞同：0
> 
> 时间：2012-05-07T11:11:29.473
> 
> 标签：jquery, ajax, load, progress-bar

我需要类似的东西->

[如何在 jQuery 中显示加载微调器？](https://stackoverflow.com/questions/68485/how-to-show-loading-spinner-in-jquery) 因为我还使用 jQuery .load() 函数调用 div 内容。

但我不想显示图片，而是显示进度条。所以我需要观察那个请求的进展。

是否可以？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:14:17.557

您给出的示例仅使用 ajaxStart 和 ajaxReady，没有任何进展。据我所知，没有办法通过 jQuery 来确定调用的进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:22:22.303

Hiya **DEMO** ~~[http://jsfiddle.net/5ZRfY/](http://jsfiddle.net/5ZRfY/)~~ ==> [http://jsfiddle.net/je5qchss/](http://jsfiddle.net/je5qchss/)

可能是这样的。请在此处查看： http: [//api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)**或**[http://api.jquery.com/ajaxSuccess/](http://api.jquery.com/ajaxSuccess/)**和**[http://api.jquery.com/jQuery.ajax/ （](http://api.jquery.com/jQuery.ajax/)**有**一些不错的读物)

 ****当 ajax 成功完成时，您可以随时启动和停止调用！

**jQuery代码**

```
$(document).ready(function() {

    $('#progressBar').append('<div id="bar"></div>');

    // percentage of completion
    var progress = '100%';

    // Animate the #bar div
    $('#bar').animate({
        width: progress
    }, 400);

});​ 
```

**HTML**

```
<div id='progressBar'></div>​ 
```

**css**

```
body{
    background:#f6f6f6;    
}

/*Styling of progress bar container*/
#progressBar{
    width:300px;/*It is important to define the width of the progress bar*/
    height:40px;
    padding:0px;
    background:#ccc;
    border:1px solid #aaa;
    -moz-box-shadow: inset 0 0 3px #888;
    -webkit-box-shadow: inset 0 0 3px #888;
    box-shadow: inset 0 0 3px #888;
}
/*styling the progress bar*/

#bar{
    background:#499aed;
    height:100%; 
    width:0; /*sets the bar to 0*/   
}​ 
```****

# javascript - 使用电话间隙打开 pdf

> ID：10481045
> 
> 赞同：1
> 
> 时间：2012-05-07T11:11:35.177
> 
> 标签：javascript, xcode, cordova, pdf

我不想使用 phone gap[corodova 1.7.0] 在 Xcode 上打开 pdf 文件。是否可以 ？我可以阅读文本文件，但是对于 pdf，我应该使用插件还是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:15:02.697

您为什么不尝试使用[子浏览器](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)插件在 phonegap 应用程序中查看 pdf。

```
function onDeviceReady() {

        var root = this;
        cb = window.plugins.childBrowser;

        if(cb != null) {
        cb.onLocationChange = function(loc){ root.locChanged(loc); };
        cb.onClose = function(){root.onCloseBrowser(); };
        cb.onOpenExternal = function(){root.onOpenExternal(); };
        cb.showWebPage("http://xyz.com/server/data/test.pdf");

        }
    }

    function onCloseBrowser() {
        console.log("onCloseBrowser!");
    }

    function locChanged(loc) {
        console.log("locChanged!");
    }

    function onOpenExternal() {
        alert("onOpenExternal!");
    }
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T17:54:05.923

**现在无需使用**插件（cordova 2.4+）

**IFRAME**不是解决方案。

**对象，嵌入**不是解决方案。

* * *

解决方案

```
window.open('http://example.com/any.pdf', '_blank', 'location=no'); 
```

此代码将打开一个子浏览器。

* * *

**Phonegap PDF Viewer 插件**是为本地 pdf 文件制作的，**但它失败了**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:57:48.430

您可以直接在 iframe 元素中打开 PDF。

另一个值得尝试的选择 - pdf.js：[https ://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T05:28:32.433

**解决方案**

window.open(" [http://docs.google.com/viewer?url=](http://docs.google.com/viewer?url=) " + pdflink +" ");

此代码将在 android 手机中打开 pdf

在使用它之前，首先将 phonegap.js 添加到您的 HTML 页面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:40:37.423

对于本地 pdf 文件，请使用：

window.open('./any.pdf', '_blank', 'location=no');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-20T10:50:49.503

您可以使用具有以下 url的**iframe**使用 pdf 嵌入

如果您的 PDF URL 是，`http://yourdomain.com/your_pdf_name.pdf`那么您应该使用以下代码

```
<iframe src="https://docs.google.com/viewer?url=http://yourdomain.com/your_pdf_name.pdf&embedded=true"></iframe> 
```

# html - 用于社交插件的自定义标签（如 google）

> ID：10481049
> 
> 赞同：0
> 
> 时间：2012-05-07T11:12:00.553
> 
> 标签：html

我想知道谷歌用于社交插件的这个自定义标签

我在我的网站上添加了 +1 按钮有这个自定义代码

```
<g:plusone href="https://plus.google.com/----------1212"></g:plusone> 
```

**----------1212**是谷歌页面的id

我们如何为我们的页面创建这种类型的自定义标签

like`<g:plusone />`是一个标签，我们如何创建客户喜欢`<mytag />`或其他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:02:18.930

一个简单的方法是使用 jQuery。这个例子将把 <mytag> 变成一个大的红色标题。你可以做各种其他的东西，比如添加图像。

Javascript：

```
$(document).ready(function() {
    $('mytag').each(function() {
        $(this).replaceWith('<span style="font-size: 24px; font-weight: bold; color: red;">' + $(this).html() + '</span>');
    });
}); 
```

HTML：

```
<mytag>This is a large, red font</mytag> 
```

# objective-c - 如何以编程方式检查 iPad 版本/型号

> ID：10481055
> 
> 赞同：13
> 
> 时间：2012-05-07T11:12:30.277
> 
> 标签：objective-c, ios, ipad

有没有办法检查 iPad 的版本/型号（即 iPad 1/2/3）。我在带有多个叠加层的 iPad 界面中使用了一些透明度。虽然在 iPad 2 上运行令人满意，但 iPad 1 的用户体验并没有那么好。所以我想删除 iPad 1 上的透明度，但找不到知道我正在处理的 iPad 的方法。

有什么技巧可以区分 iPad 1 和具有更强大图形处理器的更高版本（即目前的 iPad 2 + 3）吗？

我在网络浏览器中读到它是可能的，所以应该有一种方法可以在代码中获取型号。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T11:15:15.910

我希望这就是你所需要的：

```
 NSString *platform = [self platform];

    if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";
    if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
    if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
    if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
    if ([platform isEqualToString:@"iPhone3,3"])    return @"Verizon iPhone 4";
    if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
    if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone 5 (GSM)";
    if ([platform isEqualToString:@"iPhone5,2"])    return @"iPhone 5 (GSM+CDMA)";
    if ([platform isEqualToString:@"iPhone5,3"])    return @"iPhone 5c (GSM)";
    if ([platform isEqualToString:@"iPhone5,4"])    return @"iPhone 5c (Global)";
    if ([platform isEqualToString:@"iPhone6,1"])    return @"iPhone 5s (GSM)";
    if ([platform isEqualToString:@"iPhone6,2"])    return @"iPhone 5s (Global)";
    if ([platform isEqualToString:@"iPhone7,1"])    return @"iPhone 6+";
    if ([platform isEqualToString:@"iPhone7,2"])    return @"iPhone 6";

    if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";
    if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";
    if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";
    if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";
    if ([platform isEqualToString:@"iPod5,1"])      return @"iPod Touch 5G";

    if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
    if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
    if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2 (GSM)";
    if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
    if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2 (WiFi)";
    if ([platform isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";
    if ([platform isEqualToString:@"iPad2,6"])      return @"iPad Mini (GSM)";
    if ([platform isEqualToString:@"iPad2,7"])      return @"iPad Mini (GSM+CDMA)";
    if ([platform isEqualToString:@"iPad3,1"])      return @"iPad 3 (WiFi)";
    if ([platform isEqualToString:@"iPad3,2"])      return @"iPad 3 (GSM+CDMA)";
    if ([platform isEqualToString:@"iPad3,3"])      return @"iPad 3 (GSM)";
    if ([platform isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";
    if ([platform isEqualToString:@"iPad3,5"])      return @"iPad 4 (GSM)";
    if ([platform isEqualToString:@"iPad3,6"])      return @"iPad 4 (GSM+CDMA)";
    if ([platform isEqualToString:@"iPad4,1"])      return @"iPad Air (WiFi)";
    if ([platform isEqualToString:@"iPad4,2"])      return @"iPad Air (Cellular)";
    if ([platform isEqualToString:@"iPad4,3"])      return @"iPad Air";
    if ([platform isEqualToString:@"iPad4,4"])      return @"iPad Mini 2 (WiFi)";
    if ([platform isEqualToString:@"iPad4,5"])      return @"iPad Mini 2 (Cellular)";
    if ([platform isEqualToString:@"iPad4,6"])      return @"iPad Mini 2 (Rev)";
    if ([platform isEqualToString:@"iPad4,7"])      return @"iPad Mini 3 (WiFi)";
    if ([platform isEqualToString:@"iPad4,8"])      return @"iPad Mini 3 (A1600)";
    if ([platform isEqualToString:@"iPad4,9"])      return @"iPad Mini 3 (A1601)";
    if ([platform isEqualToString:@"iPad5,3"])      return @"iPad Air 2 (WiFi)";
    if ([platform isEqualToString:@"iPad5,4"])      return @"iPad Air 2 (Cellular)";

    if ([platform isEqualToString:@"i386"])         return @"Simulator";
    if ([platform isEqualToString:@"x86_64"])       return @"Simulator"; 
```

代码来自：[https ://gist.github.com/1323251](https://gist.github.com/1323251)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T11:18:22.320

我检查了摄像头的存在，这在 iPad 1 上不可用。由于 2 和 3 具有相似的 CPU 功能，这对我来说效果很好（我处于类似的情况，但有内存）。

```
if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    NSLog(@"iPad 2 or 3");
else
    NSLog(@"iPad 1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:26:28.480

Erica Sadun 有这方面的实用程序，在`UIDevice`. 在她的 github repo [uidevice-extension](https://github.com/erica/uidevice-extension)上可用。UIDevice-Hardware.h/m 专门做你想要的。支持 iPhone 5。

# c# - 如何在不播放开始 Monotouch 的情况下从电影中获取缩略图

> ID：10481063
> 
> 赞同：2
> 
> 时间：2012-05-07T11:13:01.840
> 
> 标签：c#, ios, xamarin.ios, uiimage, mpmovieplayercontroller

我想`movie.Stop()`从我的代码中删除这些行。

我可以使用什么其他方法从电影中获取缩略图？

```
NSUrl data = new NSUrl(info.ObjectForKey(new NSString("UIImagePickerControllerMediaURL")).ToString());

//get the video thumbnail
MPMoviePlayerController movie = new MPMoviePlayerController(data);
movie.Stop();
UIImage videoThumbnail = movie.ThumbnailImageAt(0.0, MPMovieTimeOption.NearestKeyFrame);
movie.Stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:13:12.287

我运行如下代码，它似乎在我编写的应用程序中运行良好。注意 ShouldAutoplay=false;

```
NSUrl data = new NSUrl(info.ObjectForKey(new NSString("UIImagePickerControllerMediaURL")).ToString());

//get the video thumbnail
MPMoviePlayerController movie = new MPMoviePlayerController(data);
movie.ShouldAutoplay = false;
UIImage videoThumbnail = movie.ThumbnailImageAt(0.0, MPMovieTimeOption.NearestKeyFrame); 
```

# android - android 多选ListView & Textview

> ID：10481066
> 
> 赞同：2
> 
> 时间：2012-05-07T11:13:17.797
> 
> 标签：android, android-layout

我想创建如下列表视图。

复选框 | 文本视图 | 文本视图 | 文本视图 | 文本视图 | 文本视图 | 文本视图 |

所有数据都来自数据库并在 textview 中设置。

我试过了，但我遇到了一些问题

1.  当我选择复选框并滚动列表时，它会自动取消选中。

2.  如果我选择第一个复选框，则自动选中第 5 个复选框。

3.  检查所有并取消检查所有

请帮助我，我尝试了很多代码，但我没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T20:20:12.253

它可能会帮助你。

```
package com.Sample_MultipleSelection;

import java.util.ArrayList;

import android.R.integer;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;

public class Sample_MultipleSelectionActivity extends ListActivity {

    private MyListAdapter adapter;
    ArrayList<String> item_id = new ArrayList<String>();
    ArrayList<String> item_name = new ArrayList<String>();
    ArrayList<String> item_balance = new ArrayList<String>();
    ArrayList<String> item_email = new ArrayList<String>();

    ArrayList<String> items = new ArrayList<String>();

    private CheckBox chk_main;
    boolean flag = false;
    boolean[] selection;
    ArrayList<String> selection_val;
    private Button btn_select;
    private CheckBox chk_select;
    ViewHolder holder12;
    boolean select_all;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        item_id.add("1");
        item_name.add("China");
        item_balance.add("4000");
        item_email.add("china@gmail.com");

        item_id.add("2");
        item_name.add("abc");
        item_balance.add("4000");
        item_email.add("abca@gmail.com");

        item_id.add("3");
        item_name.add("xyz");
        item_balance.add("4000");
        item_email.add("xyz@gmail.com");

        item_id.add("4");
        item_name.add("xyza");
        item_balance.add("40070");
        item_email.add("xyze@gmail.com");

        item_id.add("5");
        item_name.add("xyzc");
        item_balance.add("1000");
        item_email.add("xyz123@gmail.com");

        final ViewHolder holder = new ViewHolder();
        selection = new boolean[item_id.size()];
        selection_val = new ArrayList<String>();

        adapter = new MyListAdapter(this);
        setListAdapter(adapter);

        holder12 = new ViewHolder();

        btn_select = (Button) findViewById(R.id.button1);
        btn_select.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                int len = selection.length;
                int cnt = 0;
                String selectIds = "";
                for (int i = 0; i < len; i++) {
                    if (selection[i]) {
                        cnt++;
                    }
                }
                for (int i = 0; i < selection_val.size(); i++) {
                    selectIds = selectIds + " | " + selection_val.get(i);
                }
                if (cnt == 0) {
                    Toast.makeText(getApplicationContext(), "NO Selection", 1)
                            .show();
                } else {
                    Toast.makeText(
                            getApplicationContext(),
                            "Your are Selected   " + cnt + " ids. " + " "
                                    + selectIds, 1).show();
                }
            }
        });
    }

    public class MyListAdapter extends BaseAdapter {
        Context con;
        private LayoutInflater layoutinf;
        ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();
        ArrayList<String> items_ = new ArrayList<String>();

        public MyListAdapter(
                Sample_MultipleSelectionActivity sample_MultipleSelectionActivity) {
            con = sample_MultipleSelectionActivity;
        }

        public int getCount() {
            return item_id.size();
        }

        public Object getItem(int arg0) {
            return item_id.size();
        }

        public long getItemId(int arg0) {
            return item_id.get(arg0).hashCode();
        }

        public View getView(final int arg0, View arg1, ViewGroup arg2) {

            View v = arg1;
            ViewHolder holder = null;
            if (v == null) {
                layoutinf = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = layoutinf.inflate(R.layout.row, null);
                holder = new ViewHolder();
                holder.chk = (CheckBox) v.findViewById(R.id.checkBox1);
                holder.tv_name = (TextView) v.findViewById(R.id.textView1);
                holder.tv_bal = (TextView) v.findViewById(R.id.textView2);
                holder.tv_email = (TextView) v.findViewById(R.id.textView3);

                v.setTag(holder);
            } else {
                holder = (ViewHolder) v.getTag();
            }

            holder.chk.setId(arg0);
            holder.tv_name.setId(arg0);

            holder.chk.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    try {
                        CheckBox cb = (CheckBox) v;
                        int id = cb.getId();
                        String val = cb.getText().toString();
                        if (selection[id]) {
                            cb.setChecked(false);
                            selection[id] = false;
                            selection_val.remove("" + val);
                        } else {
                            cb.setChecked(true);
                            selection[id] = true;
                            selection_val.add("" + val);
                        }
                        adapter.notifyDataSetChanged();
                    } catch (Exception e) {
                        Log.e("error", "" + e.toString());
                    }
                }
            });
            holder.chk.setChecked(selection[arg0]);

            if(selection[arg0] == true)
            {
                holder.tv_name.setBackgroundColor(Color.GRAY);
                holder.tv_bal.setBackgroundColor(Color.GRAY);
                holder.tv_email.setBackgroundColor(Color.GRAY);
            }
            else
            {
                holder.tv_name.setBackgroundColor(Color.TRANSPARENT);
                holder.tv_bal.setBackgroundColor(Color.TRANSPARENT);
                holder.tv_email.setBackgroundColor(Color.TRANSPARENT);
            }

            holder.chk.setText(item_id.get(arg0));
            holder.tv_name.setText("" + item_name.get(arg0));
            holder.tv_bal.setText(item_balance.get(arg0));
            holder.tv_email.setText(item_email.get(arg0));

            return v;
        }
    }

    public class ViewHolder {
        private CheckBox chk;
        private TextView tv_name;
        private TextView tv_bal;
        private TextView tv_email;

    }
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <CheckBox
            android:id="@+id/chk_main"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"

            android:text="" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:text="Name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#66cc33" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:text="Balance"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#66cc33" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:text="Email-Id"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#66cc33" />
    </LinearLayout>

    <View
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="2dp"
        android:background="#fff" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="314dp"
        android:layout_weight="1" >
    </ListView>

    <Button
        android:id="@+id/button1"
        android:focusable="false"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="select" />

    </LinearLayout> 
```

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:orientation="horizontal">

                         <CheckBox
                            android:id="@+id/checkBox1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"                            
                            android:textColor="#000" />

                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="100dp"
                            android:layout_height="wrap_content"                         
                             android:padding="3dp"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <TextView
                            android:padding="3dp"
                            android:id="@+id/textView2"
                            android:layout_width="100dp"
                            android:layout_height="wrap_content"                         
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <TextView
                            android:padding="3dp"
                            android:id="@+id/textView3"
                            android:layout_width="100dp"
                            android:layout_height="wrap_content"                         
                            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout> 
```

如果它正确，让它正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:42:52.490

这是因为当您滚动列表视图时，它实际上会重新使用行来显示信息。这极大地提高了滚动长列表的性能。

但除此之外，让我们修复它。您需要做的是在选中复选框时触发一个事件，以便可以将值存储在数组中，最适合与列表信息的其余部分一起使用，这样当再次显示视图时，值也可以恢复就像在重新使用视图时正确清除选中状态一样。

这一切都可以在您的自定义 ArrayAdapter 中的 getView() 方法中完成。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    if(row == null) {
        LayoutInflater inflater = LayoutInflater.from(this.getContext());
        row = inflater.inflate(R.layout.category_color, parent, false);
    }

    if(this.getCount() > position) {
        DataObject data = this.getItem(position);
        CheckBox checkbox = (CheckBox)row.findViewById(R.id.checkbox);
        checkbox.setChecked(data.isChecked());
        checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                data.setChecked(isChecked);
            }});
        ...
    }

    return(row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:43:50.500

那是因为每次滚动列表视图时，它都会重新创建其行并将其设置为默认值或某个时间任何值。因此，它无法正常工作。我已经回答了 2-3 次类似的问题。[这](https://stackoverflow.com/questions/10190083/how-to-implement-a-button-that-gets-all-checkboxs-state-and-adds-the-value-of-c/10191369#10191369)是解决方案。

# android - android 中的 Android 多屏支持：540x960 问题

> ID：10481073
> 
> 赞同：4
> 
> 时间：2012-05-07T11:13:56.347
> 
> 标签：android, screen-resolution

我的应用程序支持 3 种密度 ldpi (120)、mdpi(160)、hdpi(320)，为此我们有三个资源文件夹（ldpi、mdpi、hdpi）。

但是我的问题发生在密度约为 256 dpi 的 HTC 感觉 XE (540x960) 中。我的资源被拉伸了。

在清单文件中

```
<supports-screens android:xlargeScreens="false" /> 
```

意味着我不支持 xlarge 屏幕，所以 540x960 是高密度的吗？？我该如何克服这个问题？？？

[Android 多屏支持问题](https://stackoverflow.com/questions/7673676/android-multiscreen-support-issue)说“**您还可以使用密度和尺寸限定符的组合，但这仍然为两种不同的分辨率落入同一个桶留下了一些空间。** ”

这种分辨率的drawble文件夹的名称应该是什么？或者有没有其他方法可以解决这个问题。

**编辑：**我的问题不在于布局，我的问题 540x960 来自 HDPI，但我的 hdpi drawbles 设计与 480x800 相关

帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:14:25.000

您可以将以下组合用于 HTC sense XE (540x960) 的布局：

```
res/layout-w540dp-h960dp/layout.xml 
```

这将用于此设备的选择布局和可绘制它将从 hdpi 选择图像，因为在这个开发人员站点中 256 dp 进入 hdpi 范围。[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:25:54.847

您的问题是您为特定的屏幕尺寸而不是屏幕密度设计了位图。

说白了，你**不应该那样做**。那里有大量不同的外形尺寸和屏幕尺寸，您不能希望为所有这些尺寸提供图形尺寸。因此，您为 540x960 屏幕解决了这个问题……那么使用 480x854 显示器（大多数 hdpi 摩托罗拉设备）的用户怎么办？如果您正在为此开发，您会为 1024x720 和 1280x720 显示器添加不同的图形吗？1280x800呢？

诚然 - 处理这些问题可能会很痛苦，但这是我们为多样化设备付出的代价。谷歌提供了大量强大的工具来处理这个问题。

当您为 Android 设计应用程序时，您需要将设计视为设计网站，而不是桌面（或 IOS）程序。您用于设计网站的所有（或大部分）技巧也适用于此处——此外，您还拥有密度感知和 9.patch 工具。

而且，如果您真的无法将图形/布局调整到屏幕而不弄乱，您可以始终将布局置于显示器的中心（或将其左对齐或右对齐，具体取决于您认为最好的外观）。

* * *

编辑：

正如我上面提到的，Android 中灵活 UI 设计的核心是将您的应用程序视为一个网站。Roman Nurik 在 Android 博客上有一篇文章讨论这个问题。

[http://android-developers.blogspot.com/2011/09/thinking-like-web-designer.html](http://android-developers.blogspot.com/2011/09/thinking-like-web-designer.html)

除此之外，它主要由 Android 网站等覆盖。

[http://developer.android.com/training/multiscreen/index.html](http://developer.android.com/training/multiscreen/index.html)

使用正确的布局和 9-patch 图像（并不总是 - 有时静态图像更好）将允许您创建在所有手机上看起来都不错的设计。但是您必须意识到 - 就像在浏览器中设计的网站一样 - 您没有也不能 100% 控制事物在每台设备上的显示方式。您需要实现的是，即使显示在您事先没有预料到的设备上，它仍然可以访问且美观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T19:40:46.527

您必须根据像素密度和屏幕尺寸命名可绘制对象。计算在这里...

dpi = sqrt (540^2+960^2) / 4.3"（设备尺寸）= ~256 dp = px / (dpi / 160) = 540 / (dpi / 160) = 330

drawable 将被命名为 drawable-sw330dp。我已经对此进行了测试。这很好用。其他drawables也没有问题。布局将是 layout-sw330dp

或者你可以通过 drawable-sw540p 试试这个。我还没有测试过。但我想它会很好用。布局将是 layout-sw540p

# android - 无法使用此代码播放声音

> ID：10481075
> 
> 赞同：0
> 
> 时间：2012-05-07T11:13:59.143
> 
> 标签：android, media-player, android-mediaplayer

我在我的应用程序中使用下面的代码来播放声音。但我不能玩它。有什么问题 ？？

代码：

```
public void playSound(int resources){
    try{
        boolean mStartPlaying = true;
        MediaPlayer  mPlayer=null;
        if (mStartPlaying==true){
            mPlayer = new MediaPlayer();

            Uri uri = Uri.parse("android.resource://MY_PACKAGE/" + resources);
            mPlayer.setDataSource(getApplicationContext(),uri);
            mPlayer.prepare();
            mPlayer.start();
        } 
        else{
            mPlayer.release();
            mPlayer = null;
        }
        mStartPlaying = !mStartPlaying;
    }
    catch (IOException e){
        Log.e(LOG_TAG, "prepare() failed");
    }

} 
```

我得到如下日志猫：

```
05-09 05:24:22.272: VERBOSE/PlayerDriver(95): Completed command PLAYER_INIT status=PVMFFailure
05-09 05:24:22.272: ERROR/PlayerDriver(95): Command PLAYER_INIT completed with an error or info PVMFFailure
05-09 05:24:22.272: ERROR/MediaPlayer(8072): error (1, -1)
05-09 05:24:22.272: ERROR/AudioPlayTest(8072): prepare() failed
05-09 05:24:22.282: VERBOSE/PVPlayer(95): run_set_video_surface s=-2147483648, cancelled=0
05-09 05:24:22.282: VERBOSE/PlayerDriver(95): HandleInformationalEvent: PVMFInfoErrorHandlingComplete
05-09 05:24:22.282: WARN/PlayerDriver(95): PVMFInfoErrorHandlingComplete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:22:20.343

也许您正在尝试播放不受支持的格式。你知道什么失败了吗？: new, setDataSource, prepare, start ... 而且 IOException 告诉你输入文件有问题，例如 FileNotFoundException 或 EOFException （尝试打印出更具体的异常，如建议[here](http://developer.android.com/reference/java/io/IOException.html)）

ps.：在回答中移动评论。

# java - 无法比较矢量数据

> ID：10481076
> 
> 赞同：0
> 
> 时间：2012-05-07T11:14:05.003
> 
> 标签：java, collections, vector, hashtable

我想将哈希表中存在的向量值与其他向量进行比较，如果向量值相同，我想执行一些操作，否则我必须执行保存，但我总是得到两者中的向量值不同。我不能使用泛型因为我正在处理旧项目。

```
Hashtable hCompareTable = rUtil.getEventForComparing(dateSel,e.getTimeZone(),listUserEvents);

Enumeration eventsCompareKey = hCompareTable.keys();

  while (eventsCompareKey.hasMoreElements()) {
        String compareKey = (String) eventsCompareKey.nextElement();
        Vector compareEventData = (Vector) hCompareTable.get(compareKey);

        if (compareKey.equals(dateSel)) {
               for (int i = 0; i < compareEventData.size(); i++) {
         EventData eCompare = (EventData) compareEventData.elementAt(i);
                       for (int j = 0; j < object.size(); j++) {
                                 EventData eveObject = (EventData) object.elementAt( j )
                                       if (eveObject.getSummary().equals(eCompare.getSummary())) {
                                             syso("equal")
                                        }
                                       else{
                                          //do something
                                       } 
```

我不知道我比较两个向量中的数据有多糟糕，向量具有 EventData bean 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:26:25.950

您总是与 Vector 进行比较的任何`lastElement`原因`object`？您正在迭代对象的大小，但始终使用矢量对象的最后一个元素。

否则，您可能需要将其更改为：

```
EventData eveObject = (EventData) object.elementAt( j ); // object.lastElement(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:28:05.593

EventData 是否正确覆盖了 Object.equals(Object) 方法？

# xcode - Xcode 4 - 在 Storyboards 中的视图之间切换的批准方式

> ID：10481078
> 
> 赞同：0
> 
> 时间：2012-05-07T11:14:08.540
> 
> 标签：xcode, view, storyboard

我有一个 Storyboarded 应用程序，需要在视图之间切换。例如，当计算完成时，我想加载一个新视图并显示答案......

所以我想做的是：

IBAction（按下按钮计算答案）{做数学跳转到结果视图}

我已经阅读了几种方法，但似乎都没有。我正在尝试以下方法：

```
SRViewController *second = [[SRViewController alloc] initWithNibName:@"SRViewController" bundle:nil];
[self.navigationController pushViewController:second animated:YES]; 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:19:54.657

使用`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`方法来完成你需要的工作

更多请看[这个](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

# visual-studio-2010 - “除非 Silverlight 项目托管在同一个 Web 项目中并从同一个 Web 项目启动，否则对 Web 服务的调用将失败”

> ID：10481082
> 
> 赞同：0
> 
> 时间：2012-05-07T11:14:17.877
> 
> 标签：visual-studio-2010, silverlight, wcf-data-services

我已经从[这里下载了演示项目](http://www.timecockpit.com/en/blogs/10-09-10/time_cockpit_at_NRWConf.aspx.)

我尝试`SkiResult.ThinClient` 从“<code>Solution Explorer”运行 Silverlight 项目我已经很好地配置了数据库，因为`SkiResult.FullClient`WPF**项目** 可以正常工作并显示数据。但是，每当**我尝试**在我的解决方案资源管理器中运行 Silverlight 项目时，它都会显示以下错误消息。

![在此处输入图像描述](../Images/e0afd62123a51dba2a15f6f2a3572c16.png)

我用**谷歌搜索**了很多，我还找到了一个设置 **`xyz.WEB project`**为**启动项目的解决方案，但是正如您从我的****解决方案资源管理器**的屏幕截图中看到的那样，没有 **`xyz.WEB project`** 解决方案。

![在此处输入图像描述](../Images/f63db8b33d5e58b32d621492ad99e94e.png)

**非常感谢.....**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:56:40.750

尝试将`SkiResult.DataService`项目设置为启动项目。这看起来非常像是一个为托管 Silverlight 应用程序而创建的 Web 项目，因为：

*   它有一个 Web.config 文件（所以它显然是一个 Web 项目）
*   它有一个`Silverlight.js`文件（一些与 Silverlight 一起使用的实用 JavaScript），
*   它有一些自动生成的测试页面，
*   它有一个 ClientBin 文件夹，通常将已编译的 Silverlight 应用程序复制到该文件夹​​。

当您创建 Silverlight 项目时，Visual Studio 会提供创建一个 Web 应用程序项目来为您托管 Silverlight 应用程序。（您不必创建 Web 应用程序 - VS 可以在构建过程中生成一个测试网页并使用它。）如果您的 Silverlight 项目被调用`Xyz`，那么这个 Web 应用程序将被调用`Xyz.Web`。但是，使用您在上面处理的解决方案，该项目似乎已从默认值重命名。

# node.js - Win 7 上的 Socket.io 安装失败

> ID：10481084
> 
> 赞同：0
> 
> 时间：2012-05-07T11:14:22.720
> 
> 标签：node.js, socket.io

我已经安装了 NodeJs 并尝试安装 Socket.io

Socket.io 安装连续失败。我尝试了几个不同的 NodeJS 版本（0.6.15、0.6.16、0.6.17、0.7.8 **）**。都无法安装socket.io。

完整的日志可以在[pastebin](http://pastebin.com/rkpAtYMT)上找到。

控制台日志是：

```
C:\Program Files (x86)\nodejs>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/socket.io-client/0.9.6
npm http GET https://registry.npmjs.org/redis/0.6.7
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.6
npm http 304 https://registry.npmjs.org/redis/0.6.7
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/xmlhttprequest/1.2.2
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.2.2
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/options
npm http GET https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/options

> ws@0.4.14 install C:\Program Files (x86)\nodejs\node_modules\socket.io\node_mo
dules\socket.io-client\node_modules\ws
> node install.js

'node' is not recognized as an internal or external command,
operable program or batch file.
npm http 200 https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz

npm ERR! ws@0.4.14 install: `node install.js`
npm ERR! `cmd "/c" "node install.js"` failed with 1
npm ERR!
npm ERR! Failed at the ws@0.4.14 install script.
npm ERR! This is most likely a problem with the ws package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node install.js
npm ERR! You can get their info via:
npm ERR!     npm owner ls ws
npm ERR! There is likely additional logging output above.
npm ERR!
npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program File
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd C:\Program Files (x86)\nodejs
npm ERR! node -v v0.7.8
npm ERR! npm -v 1.1.18
npm ERR! code ELIFECYCLE
npm ERR! message ws@0.4.14 install: `node install.js`
npm ERR! message `cmd "/c" "node install.js"` failed with 1
npm ERR! errno {}
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Program Files (x86)\nodejs\npm-debug.log
npm not ok 
```

**有解决方法吗？如何在 Windows 7 x64 上安装 Socket.IO？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:23:12.520

（适用于我`0.6.15`，win7 x64）

我不确定您是如何安装节点的，但您的路径中似乎没有它。尝试编辑您的 PATH 变量并添加`C:\Program Files (x86)\nodejs\`

另外，为什么要安装在`Program Files`. 这应该安装在您的项目文件夹中。如果你想全局安装一个包，你应该使用`npm -g`，但`socket.io`并不意味着全局安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:28:49.360

在 Node.js v0.8.3 上解决的问题

# capistrano - 使用 capistrano 上传到本地主机

> ID：10481085
> 
> 赞同：1
> 
> 时间：2012-05-07T11:14:23.473
> 
> 标签：capistrano

我希望 Capistrano将组件**上传**到集群中的其中一台服务器。上传是通过**scp**完成的。上传命令如下所示：

```
upload("...", "...", :via => :scp, :recursive => true) 
```

当我上传到任何其他主机时，上传工作正常。

当我尝试上传到**Capistrano 本身正在运行的同一服务器时**，我收到以下错误：

> *** 通过 scp 上传失败 [...]: SCP 没有成功完成 () (SCP 没有成功完成 ())

相关资料：

卡皮斯特拉诺 v2.9.0

ruby 1.9.2p180（2011-02-18 修订版 30909）[x86_64-linux]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:52:52.650

相当肯定这是因为 Capistrano 期望源文件位于您调用该`cap deploy`命令的计算机上，而目标位于您要部署到的计算机上（也可能它们是不同的计算机）。

如果您尝试将文件从远程计算机获取到您正在运行的计算机上`cap deploy`，那么我认为您需要使用`download`而不是`upload`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T09:51:51.383

不知道你是否还在寻找答案，但我是这样解决的：

在`localhost.rb`我的项目文件中，我在 repo 定义下添加了 2 行：

```
set :repository, "..."

set :copy_dir,"/tmp/temp/"

set :copy_remote_dir,"/tmp/" 
```

# php - 从 csv 文件中提取数据并使用 curl 将每一行提交到 url

> ID：10481087
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:14:27.920
> 
> 标签：php, curl

我正在寻找有关以下代码的指导。我有许多大型 CSV 文件，格式为

```
firstname,lastname,address,state,zip,email,homephone,dob,optindate,ipaddress,url
Joey,Demo,4004 S. Louise Ave. 206,Sioux Falls,SD,57106,jdemo@hotmail.com,6053231657,06/18/1944,4/19/2008 11:58:34,12.174.252.216,http://www.ecoupons.com 
```

我正在尝试添加一些新变量，将数据转换为 http_build_query 并将每一行提交到带有 POST 的 url。

这是我的代码

```
$processid = '123454r4rt5rt5rtr';
$version = '1.0.0';
$partnercode = 'ABC';
$listid = 'ID12345';

$fp= fopen("test.csv", "r");

while (!feof($fp) ) {
     list($firstname,$lastname,$address,$city,$state,$zip,$email,$phone,$dob,$optindate,$ipaddress,$url) = fgetcsv($fp);
$data = array('firstname' => $firstname,
'lastname' => $lastname,
'address' => $address,

'city' => $city,
'state' => $state,
'zip' => $zip,
'email' => $email,
'homephone' => $phone,
'dob' => $dob,
'optindate' => $optindate,
'ipaddress' => $ipaddress,

    'url' => $url,
    'processid' => $partnercode,
    'version' => $version,
    'partnercode' => $partnercode,
    'listid' => $listid);

    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://localhost.com');
    curl_setopt($ch, CURLOPT_POST, 1);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt(CURLOPT_USERPWD, 'usernameassword')

$data = curl_exec($ch);

curl_close($ch); 
```

当我现在测试时，我不断收到意外的 T_VARIABLE 但我不是 100% 确定我的编码是正确的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:16:54.630

`curl_setopt(CURLOPT_USERPWD, 'usernameassword')`末尾应该有`curl_setopt(CURLOPT_USERPWD, 'usernameassword');`分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:17:18.123

看起来您在包含的行上遗漏了一个分号

`curl_setopt(CURLOPT_USERPWD, 'usernameassword')`

下一行代码是一个变量的定义，但由于上一行没有终止，PHP 解释器遇到了一个意外的变量 - `$data`。

添加额外的分号，并在此处发布您的问题之前修复您的语法错误。错误很可能包含发生错误的行号。

在处理这些类型的错误时，您总是需要查看周围的代码是否有错误——它们可能是根本原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:20:31.160

您的 CSV 文件仅包含 11 列，但您的 PHP 代码需要 12 列（看起来`city`缺少该列）。

这可能是原因。

# python - AppEngine 在第一次请求时提供空白页面 - 第一次和后续实例加载有什么区别？

> ID：10481089
> 
> 赞同：0
> 
> 时间：2012-05-07T11:14:42.417
> 
> 标签：python, google-app-engine

每次加载实例时，我都遇到了 AppEngine 为我提供空白页面的问题。[这里](https://stackoverflow.com/questions/4578453/blank-page-but-no-error-python-appengine)已经介绍了类似的问题，但是，没有提到对我的情况有帮助的建设性解决方案。

由于控制台中没有错误，这似乎很难调试，坦率地说我不知道​​如何开始。我没有在上一篇文章中提到过解决方案，因为我不想重命名我的任何文件，并且我想保持我的代码像现在一样有条理。

最后，要问一个更广泛的问题 -**每个实例处理的第一个请求和后续请求有什么区别？**开发人员有什么需要注意的吗？

那么究竟会发生什么 - 如果第一次加载 appengine 的代码，我会得到一个空白页。随后的每个请求都很好。我想我在那里拥有代码的所有必需部分，以防万一这里是来自 app.yaml 的处理程序（此外，该应用程序使用 python27 作为平台）：

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /fb/.*
  script: fbhandler.py

- url: /xarpc/.*
  script: xmlrpchandler.py

- url: /
  script: main.py

- url: .*
  script: main.py 
```

有问题的处理程序是 fbhandler.py。

```
def main():
    application = webapp.WSGIApplication([("/fb/", FBHandler)], debug=True)

    util.run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

如果我检查 appengine 日志，我会看到“空白”请求：

```
2012-05-07 10:43:14.822 /fb/?id=341108955956205 200 2998ms 0kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
95.23.245.xx - - [07/May/2012:03:43:14 -0700] "POST /fb/?id=xxx HTTP/1.1" 200 0 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19" "xxx.appspot.com" ms=2999 cpu_ms=563 api_cpu_ms=0 cpm_usd=0.015744 loading_request=1 instance=00c61b117cb0ca2fc61adc3939c4bd034dfa416f
I 2012-05-07 10:43:14.822
This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application. 
```

对于任何好的后续请求，与此相比：

```
2012-05-07 10:44:05.479 /fb/?id=341108955956205 200 832ms 0kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
95.23.245.xx - - [07/May/2012:03:44:05 -0700] "POST /fb/?id=xxx HTTP/1.1" 200 483 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19" "xxx.appspot.com" ms=832 cpu_ms=1272 api_cpu_ms=1078 cpm_usd=0.035497 instance=00c61b117cb0ca2fc61adc3939c4bd034dfa416f 
```

如您所见，任何地方都没有明显的错误消息。

**更新**：根据建议，我删除了 main() 以尝试排除缓存，现在处理程序如下所示：

```
application = webapp.WSGIApplication([("/fb/", FBHandler)], debug=True)
util.run_wsgi_app(application) 
```

同样的效果，第一次加载得到空白页，后续加载得到正确的数据。我注意到，是否上传新代码并不重要，如果一个实例正在运行并且我更新了代码，它会在第一次加载时正确显示。我需要进入实例管理员并关闭一个以重现错误。

**更新 2**：我现在尝试将处理程序更改为新的 python27 方式：

```
- url: /fb/.*
  script: fbhandler.app 
```

并且对 fbhandler 也进行了相应的更改

```
import webapp2
app = webapp2.WSGIApplication([("/fb/", FBHandler)]) 
```

再次，同样的问题。我也试过删除调试参数没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:09:26.947

由于 App Engine 缓存 CGI 处理程序的方式，您会遇到此行为。如果您查看[运行时文档](https://developers.google.com/appengine/docs/python/runtime "运行时文档")（CGI 处理程序脚本也可以缓存部分），您可以看到：

> 除了导入的模块之外，您还可以告诉 App Engine 缓存 CGI 处理程序脚本本身。如果处理程序脚本定义了一个名为 main() 的函数，则该脚本及其全局环境将像导入的模块一样被缓存。给定 Web 服务器上对脚本的第一个请求通常会评估脚本。对于后续请求，App Engine 会调用缓存环境中的 main() 函数。

为了确保您的处理程序即使在实例启动期间也能正常工作，请务必将您的 WSGI 应用程序定义为全局变量（在 main 之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:27:10.447

**解决方案**

我现在似乎找到了解决办法。当我将所有应用程序处理程序升级到 webapp2 并使用引用它们的新方法时，它现在似乎可以在没有第一次加载错误的情况下工作。

# c# - “未知模块中发生了‘System.ExecutionEngineException’类型的未处理异常。”

> ID：10481091
> 
> 赞同：2
> 
> 时间：2012-05-07T11:14:57.423
> 
> 标签：c#, c#-4.0, compiler-errors, winrt-xaml, executionengineexception

我正在 Metro (XAML + C#) 中编写一个应用程序，但我遇到了无法找到的致命错误：

```
System.ExecutionEngineException was unhandled
Message: An unhandled exception of type 'System.ExecutionEngineException' occurred in Unknown Module. 
```

当我按下按钮并打开新框架时，它就来了。

奇怪的是，当我在笔记本电脑上运行这个应用程序时没有任何错误，但是当我在另一台计算机上运行它时，当我从一个站点到另一个站点时，它会出现这个致命错误。

有人能帮我吗？任何人都知道什么是错的？

# c - 如何从需要查找的标准输入管道数据中高效读取

> ID：10481093
> 
> 赞同：3
> 
> 时间：2012-05-07T11:15:07.593
> 
> 标签：c, file, memory, stdin

我正在寻找从`stdin`C 编程中的管道读取数据的最佳方法。

问题：我需要寻找这些数据，即在同一流的*末尾*读取一些数据后，我需要从流的*开头*读取数据。

 *小用例：`gunzip -c 4GbDataFile.gz | myprogram`

另一个 ：

1.  在本地主机上：`nc -l -p 1234 | myprogram`
2.  在远程主机上：`gunzip -c 4GbDataFile.gz | nc -q 0 theotherhost 1234`

我知道从 fifo 读取只能完成一次。所以，目前：

*   我**把所有东西都**从`stdin` **内存中**吸了出来，并从这个分配的内存中工作。

这很丑陋，但它有效。一个明显的问题是，如果有人向我的应用程序发送一个巨大的（或连续的）流，我将以分配的大内存块结束，否则我将耗尽内存。（考虑一个 8Gb 的文件）

我接下来的想法：

*   我设置了该内存块的**大小限制**（可能是用户定义的）。一旦我从 stdin 读取了这么多数据：
    1.  要么我停在这里：**“错误。内存不足，bazinga。算了吧。”** 风格。
    2.  要么我开始将正在读取的内容**转储****到文件中**，并在读取所有数据后从该文件中工作。

但是，这有什么意义呢？我无法找出我正在阅读的数据的来源。如果这是一个本地 8Gb 文件，我会将其转储到同一系统上的另一个 8Gb 文件中。

所以，我的问题是：

> 当您必须在管道中来回查找时，如何有效地从管道中读取**大量**数据？`stdin`

提前感谢您的回答。

编辑 ：

我的程序需要在给定文件的某处（取决于文件格式）读取元数据，因此可能在流的末尾。然后它可能会在流的开头读回其他数据，然后在另一个地方等。简而言之：它需要访问数据的任何字节。

一个例子是在开始读取之前在不知道文件格式的情况下读取存档文件的数据`stdin`：我需要检查存档元数据，查找存档文件名称和偏移量等。

**因此，我将制作标准输入内容的本地副本并从中工作。感谢大家的投入；）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:27:12.393

你需要明确你的要求。如果您需要**seek()**那么显然您不能从**stdin**获取输入。如果你需要**seek()**那么你应该把输入文件名作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:35:15.833

4GbDataFile 中的数据结构不适合您想做的事情。创造性思考。不要把你的程序锤成它甚至不应该尝试的东西。尝试修复生成它的输入格式，这样您就不需要回溯 4 GB。

如果您*喜欢*锤击：4GB 的核心内存非常昂贵。相反，将从标准输入读取的数据保存在一个文件中，然后打开该文件（或映射它）并寻找您心中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:11:44.260

我认为您应该阅读臭名昭著的[无用猫奖](http://partmaps.org/era/unix/award.html)。

TL；DR：更改`cat 4gbfile | yourprogram`为`yourprogram < 4gbfile`.

如果你真的坚持让它处理来自管道的数据，你必须在启动时将它存储在一个临时文件中，然后用临时文件的 fd 副本替换文件描述符 0，使用`dup2`.*

# java - 字符串连接在 Java 中转换为 stringbuilder

> ID：10481097
> 
> 赞同：1
> 
> 时间：2012-05-07T11:15:19.623
> 
> 标签：java, string

我看到了这个问题和一些类似的问题，我认为它不是重复的：

[Java 中 toString() 中的 StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

这是交易，我今天早上听到我的一位非常聪明的工作同事谈论 java 如何优化最多 8 或 16 个字符串连接（我现在不确定）到字符串生成器。因为这可能是对我的意思的模糊描述，这里是 6 个字符串连接的示例：

```
public String test(){
     return "a" + "b" + "c" + "d" + "e" + "f";
} 
```

所以这实际上被翻译成：

```
public String test(){
     StringBuilder sb = new StringBuilder();
     return sb.append("a").append("b").append("c").append("d").append("e").append("f").toString();
} 
```

我不得不提前离开对话，这是真的吗？如果是，有人可以提供更多详细信息，直到此优化完成 8/16 或 x？

在我听说之前我并不知道这件事。很高兴知道是否属实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:26:56.737

根据要求，在这里我的评论是对问题的回答：

您可以在这篇博客文章中找到关于字符串连接如何在 Java 中工作的详尽解释：http: [//znetdevelopment.com/blogs/2009/04/06/java-string-concatenation](http://znetdevelopment.com/blogs/2009/04/06/java-string-concatenation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:30:38.290

我不知道确切的数字，但通常你不应该担心用`+`运算符连接字符串，除非连接发生在某个循环的迭代中，因为这是编译器无法优化并且你需要`StringBuilder`显式使用的情况，甚至`String.concat`。

哪种方式最快还取决于您的数据是恒定的还是可变的。在您的示例中，字符串将在*编译时*连接到`"abcdef"`.

# .net - 加载程序集并在另一个应用程序域中对其类型应用谓词

> ID：10481099
> 
> 赞同：8
> 
> 时间：2012-05-07T11:15:32.790
> 
> 标签：.net, reflection, delegates, resharper, appdomain

请阅读整个问题。我有一个独特的情况，有几个我想解决的限制。

在我的代码中，我有一个表达式树，它被编译为`Predicate<System.Type>`. 我的目标是加载一个程序集而不锁定它（它是项目的输出程序集，不断重建），将此谓词应用于其类型列表并返回结果类型**名称**列表：

```
// this is what I need:
return assembly.GetTypes().Where(t => predicate(t)).Select(t => t.FullName); 
```

这个程序集应该加载到另一个 appdomain 中，因为我想在获得所需信息后立即卸载它。

这就是棘手的地方。我面临几个问题：

如果我在另一个 appdomain 中加载程序集并简单地返回其所有类型的数组，以便我可以将谓词应用回我的主 appdomain 中，只要将类型编组回我的主 appdomain，我就会得到一个`FileNotFoundException`，说明未找到此程序集。这是有道理的，因为程序集只被加载到我创建的另一个 appdomain 中。将它也加载到主应用程序域中会破坏目的。

或者，如果我尝试将谓词传递到另一个应用程序域，将其应用到那里并取回一个字符串数组（完整类型名称），我会得到一个`SerializationException: "Cannot serialize delegates over unmanaged function pointers, dynamic methods or methods outside the delegate creator's assembly."`，因为谓词是一个动态方法（从表达式树编译） .

将它加载到主应用程序域中不会有任何这些问题，但是由于在不卸载整个应用程序域的情况下无法卸载已加载的程序集，因此一旦程序集发生更改（重建后），任何尝试加载具有相同名称的程序集会导致异常。

**上下文：**
我正在为 ReSharper 构建一个名为[Agent Mulder](https://github.com/hmemcpy/AgentMulder)的插件。该插件背后的想法是分析解决方案中的 DI/IoC 容器注册，并帮助 ReSharper 找出通过 DI 容器注册的类型的用法（您可以[在此处](https://vimeo.com/41113265)观看有关其工作原理的简短视频）。

在大多数情况下，分析容器注册很简单——我只需要检测足够的信息就可以知道哪些具体类型受到影响。在这个温莎城堡`Component.For<IFoo>().ImplementedBy<Foo>()`的例子中：结果类型是显而易见的，所以是`AllTypes.FromThisAssembly().BasedOn<IFoo>()`- 给我足够的信息来猜测将受这条线影响的具体类型。但是，请考虑在 Castle Windsor 中进行的此注册：

```
container.Register(Classes
    .FromAssemblyInDirectory(new AssemblyFilter(".").FilterByName(an => an.Name.StartsWith("Ploeh.Samples.Booking")))
    .Where(t => !(t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Dispatcher<>)))
    .WithServiceAllInterfaces()); 
```

（[来源](https://github.com/ploeh/Booking/blob/master/BookingDaemon/DaemonWindsorInstaller.cs)）

此处的信息取决于仅在运行时评估的谓词。

由于我所能做的就是静态分析这一点，因此我手上有 ReSharper 的 AST（在 ReSharper 中称为 PSI）表示`Where`子句中的 lambda 表达式。我可以将此 AST 转换为 LINQ 表达式树，然后将其编译为委托。

我的想法是通过反射加载输出程序集（由`FromAssembly*`描述符确定），并将此委托应用于程序集的类型以获得类型名称（我只需要名称）。每次组件更改时都必须重新评估这一点（我现在不关心性能）。

总之，除非有人可以推荐一种更好的方法来确定受谓词影响的类型，否则我想知道如何通过反射来做到这一点（不幸的是我没有考虑其他元数据阅读器，因为我必须以某种方式转换将 lambda 表达式 AST 转换为不同数据类型的谓词，我不知道是否存在 1 对 1 的转换）。

感谢您的阅读。此问题可用时将获得 500 点奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:50:35.393

您需要加载程序集以获取`Type`实例，因此单独的`AppDomain`似乎是正确的解决方案。

因此，您需要将谓词`Expression`放入 that 中`AppDomain`，这意味着您必须对其进行序列化/反序列化。

由于各种原因，这种要求变得越来越频繁。我在看这个是因为我想通过 WCF 服务将 Linq 喷射到实体表达式。

幸运的是，有一些现有的实现。

我找到了这个：[CodePlex - 表达式树序列化器](http://expressiontree.codeplex.com/)

* * *

我刚刚用 测试了它`Types`，这有效：

```
Expression<Func<Type,bool>> predicate =
  t => ( !t.IsGenericType && t.Name == "Int32" );

var s = new ExpressionSerialization.ExpressionSerializer();
var xml = s.Serialize( predicate );

var p = s.Deserialize( xml ) as Expression<Func<Type, bool>>;
var f = p.Compile();

Console.WriteLine( "Int32: " + f( typeof( int ) ) ); // true
Console.WriteLine( "String: " + f( typeof( string ) ) ); // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:20:02.093

让我们用 MBR 对象包装谓词委托实例，类型的参数`Type`将从其他域很好地编组：

```
class RemotablePredicate<T> : MarshalByRefObject
{
  readonly Predicate<T> predicate;
  public RemotablePredicate(Predicate<T> predicate) { this.predicate = predicate; }
  public bool Accepts(T arg) { return predicate(arg); }
} 
```

构建某种类型以加载、探索程序集并将结果返回到主域：

```
class AssemblyExplorer : MarshalByRefObject
{
  public string[] GetTypesByPredicate(
    string assemblyPath, RemotablePredicate<Type> predicate)
  {
    // MS reflection api reqires all dependencies here
    var bytes = File.ReadAllBytes(assemblyPath);
    var assembly = Assembly.ReflectionOnlyLoad(bytes);

    var types = new List<string>();
    foreach (var type in assembly.GetTypes())
      if (predicate.Accepts(type))
        types.Add(type.FullName);

    return types.ToArray();
  }
} 
```

使所有这些工作：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq.Expressions;
using System.Reflection;

class Program
{
  static void Main()
  {
    var fooDomain = AppDomain.CreateDomain("Foo");

    Expression<Predicate<Type>> expr = t => t.IsValueType;
    var compiledPredicate = expr.Compile();
    var remotablePredicate = new RemotablePredicate<Type>(compiledPredicate);

    var explorerType = typeof(AssemblyExplorer);
    var explorerInstance = (AssemblyExplorer) fooDomain
      .CreateInstanceAndUnwrap(explorerType.Assembly.FullName, explorerType.FullName);

    var types = explorerInstance.GetTypesByPredicate(
      "JetBrains.Annotations.dll", remotablePredicate);

    Console.WriteLine("Matched types: {0}", types.Length);
    foreach (var type in types) Console.WriteLine(" {0}", type);
  }
} 
```

# javascript - 用javascript找出UTC日期整数的年份

> ID：10481103
> 
> 赞同：1
> 
> 时间：2012-05-07T11:15:39.157
> 
> 标签：javascript, date, utc

如何在 javascript 中找出 UTC 日期整数的年份？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:17:05.807

假设您的“UTC 日期整数”表示以毫秒为单位的时间：

```
var date = new Date(utcInteger);
console.log(date.getUTCFullYear()); 
```

# git - 在进行更多次变基时一次又一次地解决相同的冲突

> ID：10481105
> 
> 赞同：3
> 
> 时间：2012-05-07T11:15:42.043
> 
> 标签：git

我正在使用 git。

我正在研究分支，假设它是分支`A`。
当某些事情发生变化时`master`，我通常想要进行这些更改，我通过重新设置分支来做到这一点`A`。

问题是，我在分支上有 50-60 次提交`A`，每次发生小的变化时，`master`我都需要做 rebase 并重新解决所有冲突。
如果有任何冲突，我可以解决新的冲突，那就太好了。

有没有办法在 git 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:20:32.497

您可以查看是否[`git rerere`](http://schacon.github.com/git/git-rerere.html)对您的情况有所帮助。

您需要先在当前的仓库中激活它：

```
git config --global rerere.enabled 1 
```

然后这个“**重用记录的解析**”脚本将允许 Git 记住你是如何解决大块冲突的。
见[重新你的船...](http://git-scm.com/2010/03/08/rerere.html)：

![git rerere](../Images/84406ab0b9f70787bcd15623e06b6714.png)

# drag-and-drop - 未调用 DataTable DragDropEvent

> ID：10481107
> 
> 赞同：1
> 
> 时间：2012-05-07T11:15:55.740
> 
> 标签：drag-and-drop, primefaces

我在 Liferay 6.1 中的 PF 3.2 上，并尝试从展示中实现拖放数据表。我下载了原始代码并正在使用它。

行为是，当我将一个项目拖放到“选定的汽车”区域时，可拖动的箭头图标消失并且不再可拖动，但永远不会调用 onCarDrop 事件，因此数据不会到达正确的位置。日志中没有错误。

那么，有什么想法吗？

从不调用的方法：

```
public void onCarDrop(DragDropEvent ddEvent) {
    Car car = ((Car) ddEvent.getData());

    droppedCars.add(car);
    carsSmall.remove(car);
} 
```

这是调用的位置：

```
<p:droppable for="selectedCars" tolerance="touch" activeStyleClass="ui-state-highlight" datasource="availableCars" onDrop="handleDrop">
                <p:ajax listener="#{tableBean.onCarDrop}" update="dropArea availableCars" />
</p:droppable> 
```

提前谢谢。

# file - 使用 Fortran77，如何在 FOR90 中做与 OPEN(POSITION="APPEND") 相同的事情

> ID：10481109
> 
> 赞同：0
> 
> 时间：2012-05-07T11:15:56.163
> 
> 标签：file, append, fortran77

使用 Fortran77 并且我想打开一个文件，然后它将转到不会覆盖我的文件的文件末尾。

与 FORTRAN90/95 中的 OPEN(**,ACCESS="SEQUENTIAL",POSITION="APPEND") 相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:43:02.590

严格遵循标准，在 f77 中没有简单的可移植方法。但是，许多 f77 编译器确实支持*access=append*作为扩展。

你有充分的理由严格遵守 f77 吗？甚至没有共同的扩展？

# javascript - 录音机组件

> ID：10481112
> 
> 赞同：1
> 
> 时间：2012-05-07T11:16:20.790
> 
> 标签：javascript, actionscript-3, audio

我并不是真正的 AS/Flash 开发人员，但我可能需要开发一两个组件。具体来说，我正在使用这个组件：[https ://github.com/cykod/FlashWavRecorder/tree/master/flash](https://github.com/cykod/FlashWavRecorder/tree/master/flash)

这个闪存录音机可以工作，但获得“录音机音频”的唯一方法是通过它的上传功能。我的意思是，我无法获取包含记录器消息的字节数组或对象并让我的 Javascript 代码进行上传。

这个组件的唯一选择是它自己的上传功能。但是我需要通过 Javascript 执行上传。

我需要这样做的一个原因是因为我需要在音频上传完成后处理服务器响应。

如何在不将文件上传到服务器的情况下直接从 Flash 获取音频到 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:59:31.493

这是适合需要的组件：

[https://github.com/jwagener/recorder.js](https://github.com/jwagener/recorder.js)

# c# - 在共享点解决方案库问题中导出 Web

> ID：10481121
> 
> 赞同：1
> 
> 时间：2012-05-07T11:16:38.800
> 
> 标签：c#, sharepoint, migration

我正在通过 Microsoft 的 SPExport Api 导出网络，它工作正常，但我认为它不会导出解决方案库。请告诉我是否有解决此问题的方法。我正在使用此代码进行导出，并为导出`exportSettings`设置了所有设置。

```
export = new SPExport(exportSettings);
export.Completed += new EventHandler<SPDeploymentEventArgs>(export_Completed);
export.ProgressUpdated += new EventHandler<SPDeploymentEventArgs>(export_ProgressUpdated);
export.Run();
strExportChangeToken = exportSettings.CurrentChangeToken; 
```

# java - java.util.Date 在 JDK 5 和 JDK 6 中返回不同的日期

> ID：10481122
> 
> 赞同：0
> 
> 时间：2012-05-07T11:16:49.130
> 
> 标签：java, date, time, timezone

使用 JDK5(1.5.0_09) 运行时打印以下代码

```
Fri May 03 00:00:00 GMT 3912 
5/3/12 5:30 AM 
```

并且在使用 JDK6(1.6.0_23) 运行时打印

```
Fri May 03 00:00:00 IST 3912
5/3/12 12:00 AM 
```

显然，差异是因为使用了时区，然后创建了 Date 对象。但这不会在JDK升级时对现有代码造成问题吗？这种行为是记录在某处还是我遗漏了什么？

```
 class TimeTest {

    public static void main(String[] args) {

        Date d = new Date(2012, 04, 3);
        Locale l = new Locale("en", "US","");   
        DateFormat df= DateFormat.getDateTimeInstance(DateFormat.SHORT,  DateFormat.SHORT, l );
        TimeZone t = TimeZone.getTimeZone("Asia/Calcutta");
        df.setTimeZone(t);      
        System.out.println(d);
        System.out.println(df.format(d));

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:10:25.327

奇怪的年份`3192`出现了，因为**不推荐使用** `Date`的构造函数假定您使用的是具有`0`含义的 2 位数年份`1900`。它添加`1900`到年份编号。

时区的差异不是`Date`构造函数的错。您的代码`TimeZone.getTimeZone("Asia/Calcutta")`用于获取时区。如果该方法无法识别时区字符串，则[记录为返回 GMT 时区。](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)看起来 Sun 在 Java 1.6 中增加了对更多时区的支持。（大多数人会认为这是一件好事，而不是便携性问题。）

我还没有尝试过，但是当您请求的区域 id 无法识别时，以下内容应该足以让您避免使用 GMT。

```
 public TimeZone getZone(String id) {
        TimeZone tz = TimeZone.getTimeZone();
        if (!tz.getID().equals(id)) {
            throw new IllegalArgumentException("unrecognized zone " + id);
        }
        return tz;
    } 
```

总之，您的代码在两个方面被破坏：

*   它正在使用已弃用的构造函数。
*   *假设*它将理解`getTimeZone`您的所有时区字符串，而 Java 1.5 显然不是这种情况。

# ios - 如何在 RestKit 中使用 NTLM 身份验证

> ID：10481129
> 
> 赞同：0
> 
> 时间：2012-05-07T11:17:17.793
> 
> 标签：ios, restkit, ntlm

RestKit 是否支持[NTLM 身份](http://en.wikipedia.org/wiki/NTLM)[验证](http://restkit.org/)？如何在我的项目中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:16:31.183

我必须继承 RKObjectManager 并覆盖`getObjectsAtPath:`

```
- (void)getObjectsAtPath:(NSString *)path
          parameters:(NSDictionary *)parameters
             success:(void (^)(RKObjectRequestOperation *operation, RKMappingResult *mappingResult))success
             failure:(void (^)(RKObjectRequestOperation *operation, NSError *error))failure
{
    NSParameterAssert(path);
    RKObjectRequestOperation *operation = [self appropriateObjectRequestOperationWithObject:nil method:RKRequestMethodGET path:path parameters:parameters];
    [operation setCompletionBlockWithSuccess:success failure:failure];

    //this is the part to handle ntlm authentication, which we arent able to do in RKObjectManager
    [[operation HTTPRequestOperation] setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
        NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username" password:@"password" persistence:NSURLCredentialPersistenceForSession];
        [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
    }];

    [self enqueueObjectRequestOperation:operation];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:44:50.370

目前，RestKit 不支持 NTML 身份验证，但是有一个解决方法： 1\. 在登录页面中，使用 NSURLRequest 加载请求身份验证的 url 并注册身份验证委托：

```
 - (void) connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    if ([[challenge protectionSpace] authenticationMethod] == NSURLAuthenticationMethodNTLM)
    {
        /*    This is very, very important to check.  Depending on how your security policies are setup, you could lock your user out of his or her account by trying to use the wrong credentials too many times in a row.    */
        if ([challenge previousFailureCount] > 0)
        {
            [[challenge sender] cancelAuthenticationChallenge:challenge];

            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Invalid Credentials" message:@"The credentials you saved for your account are invalid." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
        else
        {
            [[challenge sender]  useCredential:[NSURLCredential credentialWithUser:@"someUser" password:@"somePassword" persistence:NSURLCredentialPersistenceForSession] forAuthenticationChallenge:challenge];
        }
    }
    else
    {
        //    Do whatever you want here, for educational purposes, I'm just going to cancel the challenge
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
} 
```

其他页面无需认证即可正常使用RestKit。我只是用 SharePoint 服务器测试它，因为它在 cookie 中保存身份验证，不确定它是否适用于其他服务器。

玩得开心！:)

ps：[iOS中如何做NTLM认证](http://blog.waynehartman.com/articles/how-to-do-ntlm-authentication-in-ios.aspx)

# android - 用于 Android-NDK 编程的 Cygwin

> ID：10481132
> 
> 赞同：10
> 
> 时间：2012-05-07T11:17:22.730
> 
> 标签：android, android-ndk, cygwin

我阅读了有关在 Windows 上进行 NDK 编程的要求，其中说我们需要。阅读`Cygwin`有关 Cygwin 的内容，说我们需要它，因为它是`a way to make Windows support some linux functionality`。但我的问题是在哪个编程阶段（确切位置）需要 Cygwin，为什么？非常欢迎有关此主题的其他信息

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-07T15:34:38.217

从版本 7 开始的 Android NDK 不需要 Cygwin。见这里：http: [//developer.android.com/sdk/ndk/index.html](http://developer.android.com/sdk/ndk/index.html)

> 现在，您可以通过从项目路径的命令行调用 ndk-build.cmd 脚本，在没有 Cygwin 的情况下在 Windows 上构建 NDK 源文件。该脚本采用与原始 ndk-build 脚本完全相同的参数。Windows NDK 软件包带有自己的预构建二进制文件，用于 GNU Make、Awk 和构建所需的其他工具。您不需要安装任何其他东西来获得工作的构建系统。

它提到你不能在没有 Cygwin 的情况下使用 ndk-gdb 脚本。虽然这是真的，但您实际上可以在没有 Cygwin 的情况下直接使用 gdb 可执行文件，只有这样您才需要手动正确设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T03:20:18.660

1.  至少NDK-r8b，如果你想构建你的.so，你不需要Cygwin。
2.  但是，如果你想使用 ndk-gdb 来调试你的本地代码，你必须使用 Cygwin。
3.  而且，在我的实验中，如果您在 Cygwin 下使用 ndk-gdb 来调试从 Windows cmd 构建的本机代码，则 ndk-gdb 似乎无法识别调试信息。因此，出于调试目的，我构建了本机 Cygwin。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:24:45.677

`Make`命令来执行`Android.mk`文件。

Android.mk 文件包含要编译的 c/c++ 文件列表以及库名称 (.so)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-30T01:33:56.197

（来自 NDK-r8e NDK-GDB 文档）目前“ndk-gdb”需要 Unix shell 才能运行。这意味着需要 Cygwin 才能在 Windows 上运行它。我们希望在未来的 NDK 版本中摆脱这个限制。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-07T11:27:48.650

Cygwin 是一组工具，可为 Windows 提供 Linux 外观和感觉环境。 [http://www.cygwin.com/](http://www.cygwin.com/)

# python - ImportError: Python + GDAL - OSGeo4W 安装

> ID：10481138
> 
> 赞同：2
> 
> 时间：2012-05-07T11:17:57.140
> 
> 标签：python, windows-7-x64, gdal, osgeo

我已经为 Windows 安装了最新的 OSGeo4W 编译，我想使用各种可用的 GDAL 工具。当我打开 OSGeo4W*命令外壳*时，输入 Python 并编写

```
> from osgeo import gdal 
```

我收到以下错误：

```
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "C:\OSGeo4W\apps\Python27\lib\site-packages\osgeo\__init__.py", line 21,
> in <module>
>     _gdal = swig_import_helper()
>   File "C:\OSGeo4W\apps\Python27\lib\site-packages\osgeo\__init__.py", line 17,
> in swig_import_helper
>     _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: DLL load failed: The operating system cannot run %1. 
```

我的**PATH**包含以下 OSGeo4W 条目：

```
> C:\OSGeo4W\bin
> C:\OSGeo4W\\apps\msys\bin
> C:\OSGeo4W\\apps\Python27\Scripts 
```

从我在网上阅读的内容来看，此错误可能与不兼容的版本有关。我假设 OSGeo4W 包已编译为按原样工作，因此它可能是以前安装在我的计算机上的其他版本或干扰的残留物。但我不知道如何确定干扰的内容以及该信息的存储位置。

**我能做些什么来解决这个问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:00:11.070

当安装了另一个版本的 python 时会出现此问题。

我发现当我在变量`C:\OSGeo4W\bin`的开头添加目录路径并通过shell 运行 python 时，我能够导入库。`PATH``OSGEO4W``gdal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:43:53.830

共享库通常不存储在`bin`发行版的子目录中。尝试挖掘源代码`OSGeo4W`以找到 gdal dll 文件 ( `gdal.dll`??)。可能它在一个`lib`子目录中。将该路径也添加到您的`PATH`环境变量中。如果您想检查其他 GDAL 安装，只需在系统范围内搜索您尝试加载的 dll 并查看是否有多个。

* * *

我在网上找到的针对此错误的另一个选项是您需要使用 OSGeo4W 附带的特定 Python 版本。使用普通的 Python 2.7 安装将不起作用。看：

*   [https://gis.stackexchange.com/questions/10173/how-to-import-qgis-core-in-a-osgeo4w-installation](https://gis.stackexchange.com/questions/10173/how-to-import-qgis-core-in-a-osgeo4w-installation)
*   [http://old.nabble.com/Python-bindings-to-OGR-td29827795.html](http://old.nabble.com/Python-bindings-to-OGR-td29827795.html)

# c# - 确定 BindingSource 的所有绑定何时完成

> ID：10481140
> 
> 赞同：2
> 
> 时间：2012-05-07T11:18:11.633
> 
> 标签：c#, data-binding

我正在使用 Windows 窗体应用程序。当用户在表单中从一行导航到下一行时，我需要在 UI 中做很多事情。我想在控件的所有数据绑定完成后做这些事情，因为它们完成的顺序很重要。有没有一种好方法可以确定所有绑定何时完成？我可以使用 BindingSource.BindingComplete 事件，但是需要完成的许多事情都需要完成多个控件的绑定。我可以找到一种方法来跟踪这一点，但我想我会问是否有人有一种简单的方法来判断 BindingSource 的所有绑定何时完成。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T16:58:47.597

您可以通过在每次 BindingControl 执行时跟踪控件名称来找到绑定的最后一个控件。

```
Private Sub BindingSource_BindingComplete(sender As Object, e As BindingCompleteEventArgs) Handles BindingSource.BindingComplete

    Debug.Print(e.Binding.Control.Name.ToString)

End Sub 
```

既然你知道它，你可以检查这个事件 arg 以了解最后一个控件何时被绑定。

```
Private Sub BindingSource_BindingComplete(sender As Object, e As BindingCompleteEventArgs) Handles BindingSource.BindingComplete
    If e.Binding.Control.Name = "controlName" Then
        'Do things...
    End If
End Sub 
```

法比德

# delphi - Dwscript 网络服务器

> ID：10481148
> 
> 赞同：6
> 
> 时间：2012-05-07T11:18:26.710
> 
> 标签：delphi, webserver, dwscript

我想使用 dwscript 进行网络编程（生成动态内容）。我想知道是否有任何用于 apache Web 服务器的模块？或者我怎样才能运行我自己的基于 dwscript 的 web 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:55:04.933

我（还没有？）熟悉 DWScript，但我创建了一个运行 Delphi 编译模块的 Apache 模块，该模块通过抽象接口为网站提供服务，因此它也可以插入 IIS 或 InternetExplorer。还有一些版本会在检测到源代码更改时自动重新编译，因此您可以通过在浏览器窗口中点击刷新来进行开发和测试：

[http://xxm.sourceforge.net/](http://xxm.sourceforge.net/)

# html - 如何在图像上正确创建标签朋友 div 贴到图像上？

> ID：10481149
> 
> 赞同：0
> 
> 时间：2012-05-07T11:18:29.387
> 
> 标签：html, css

这是我的网站示例。

[http://jsfiddle.net/noppanit/dh92t/](http://jsfiddle.net/noppanit/dh92t/)

我有这样的问题，我让我的网站尽可能地响应，所以我将图像的宽度和高度设置为百分比，这样当用户调整图像大小时也会调整大小。但是，当我有一个 div 来表明这个人是我自己时，我使用绝对位置。当我调整图像大小时，标签 div 也会调整大小，但它会移出我要标记的人，在这种情况下是最左边的人。

无论屏幕大小如何，如何使标签 div 调整大小并使其保持在正确的位置和正确的大小。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:23:46.533

您可以为此使用百分比。像这样写：

```
.tag {
    position: absolute;
    width: 10%;
    height: 10%;
    border: 1px solid;
    top: 4%;
    left: 4%;
} 
```

检查这个[http://jsfiddle.net/dh92t/2/](http://jsfiddle.net/dh92t/2/)

# iphone - 比较 GPS 位置

> ID：10481151
> 
> 赞同：0
> 
> 时间：2012-05-07T11:18:41.137
> 
> 标签：iphone, annotations, location, mkmapview

我以前从未使用过 MKMapView 或 CoreLocation，所以我需要一些帮助。我想获得我当前的位置（可能在 mapView 中显示这个位置）并定期更新我的位置，并每次比较我的新位置和旧位置，看看我是否移动了。

这样的事情可能吗？我怎样才能做到这一点？我已经实现了一个 MKMapView。但是我不确定如何获得当前位置并进行比较以查看我是否正在移动...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:28:22.253

这很简单。设置`showsUserLocation`为`YES`，你就完成了。[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

为了使它更好一点，您可以在`MKMapView`每次位置更改时居中。看[这里](http://www.techotopia.com/index.php/Working_with_Maps_on_the_iPad_with_MapKit_and_the_MKMapView_Class_%28Xcode_4%29#Updating_the_Map_View_based_on_User_Movement)怎么做。

如果你想知道你是否已经移动，你应该将最近的位置存储在一个属性中，然后在委托方法中`mapView:didUpdateUserLocation:`检查新位置是否与上一个位置不同。

```
@property (assign, nonatomic) CLLocationCoordinate2D locationCoordinate;
...
@synthesize locationCoordinate = _locationCoordinate;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.mapView.delegate = self;
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    if (userLocation.coordinate.latitude != self.locationCoordinate.latitude ||
        userLocation.coordinate.longitude != self.locationCoordinate.longitude) {
        // We moved
    }
    self.locationCoordinate = userLocation.coordinate;
} 
```

`userLocation`我实际上不确定是否仅在更改时才调用委托方法。在这种情况下，您不必将位置存储为属性并进行检查，只需实现委托方法并在那里做您的事情。

# mysql - Sqlite 查询创建问题

> ID：10481155
> 
> 赞同：2
> 
> 时间：2012-05-07T11:18:48.950
> 
> 标签：mysql, sql, sqlite

有2张桌子

```
 table1                      table2

book_id | tag_id                 tag_id
----------------               -----------
  5     |   1                       1
  5     |   3                       3
  5     |   4                       4
  7     |   1
  7     |   2
  7     |   4 
```

我需要创建 sql 查询以选择所有 book_id，其中 tag_id 是 table2 （SQLite）中所有 tag_id 的众多。

例如，book_id = 5 是可以接受的，因为它包含 table2 (1, 3, 4) 中的所有标签。book_id = 7 的书是不可接受的，因为它只有 1 和 4 个标签，但没有 tag_id = 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:48:57.890

我不确定这个查询是否会非常有效，但是......

```
select distinct book_id from table1 x 
where not exists(
select * from table2 t where not exists(
select * from table1 a 
where a.tag_id = t.tag_id 
and a.book_id = x.book_id)); 
```

设置代码：

```
drop table table1;
drop table table2;
create table table1(book_id int, tag_id int);
insert into table1 values(5, 1);
insert into table1 values(5, 3);
insert into table1 values(5, 4);
insert into table1 values(7, 1);
insert into table1 values(7, 2);
insert into table1 values(7, 4);
create table table2(tag_id int);
insert into table2 values(1);
insert into table2 values(3);
insert into table2 values(4); 
```

# java - double 或 float 数据类型在循环中不能正确加起来？

> ID：10481156
> 
> 赞同：1
> 
> 时间：2012-05-07T11:19:01.220
> 
> 标签：java, for-loop, floating-point, floating-accuracy

在一个循环中，我添加 0.10 直到达到所需的 #，并获取索引。这是我的代码：

```
 private static int getIndexOfUnits(float units) {
    int index = -1;
    float addup = 0.10f;
    for(float i = 1.00f; i < units; i=(float)i+addup) {
        index++;
        System.out.println("I = " + i + " Index = " + index);
    }

    return index;
} 
```

如果通过的单位是 5.7，我看到的输出是：

```
I = 1.0 Index = 0
I = 1.1 Index = 1
I = 1.2 Index = 2
I = 1.3000001 Index = 3
I = 1.4000001 Index = 4
I = 1.5000001 Index = 5
I = 1.6000001 Index = 6
I = 1.7000002 Index = 7
I = 1.8000002 Index = 8
I = 1.9000002 Index = 9
I = 2.0000002 Index = 10
I = 2.1000001 Index = 11
I = 2.2 Index = 12
I = 2.3 Index = 13
I = 2.3999999 Index = 14
I = 2.4999998 Index = 15
I = 2.5999997 Index = 16
I = 2.6999996 Index = 17
I = 2.7999995 Index = 18
I = 2.8999994 Index = 19
I = 2.9999993 Index = 20
I = 3.0999992 Index = 21
I = 3.199999 Index = 22
I = 3.299999 Index = 23
I = 3.399999 Index = 24
I = 3.4999988 Index = 25
I = 3.5999987 Index = 26
I = 3.6999986 Index = 27
I = 3.7999985 Index = 28
I = 3.8999984 Index = 29
I = 3.9999983 Index = 30
I = 4.0999985 Index = 31
I = 4.1999984 Index = 32
I = 4.2999983 Index = 33
I = 4.399998 Index = 34
I = 4.499998 Index = 35
I = 4.599998 Index = 36
I = 4.699998 Index = 37
I = 4.799998 Index = 38
I = 4.8999977 Index = 39
I = 4.9999976 Index = 40
I = 5.0999975 Index = 41
I = 5.1999974 Index = 42
I = 5.2999973 Index = 43
I = 5.399997 Index = 44
I = 5.499997 Index = 45
I = 5.599997 Index = 46
I = 5.699997 Index = 47 
```

如果单位是 18.90 或 29.90 之类的大数字，则会给出错误的索引。索引通常比应有的少 1。最初只添加了 0.10，但在 2.3 之后，它得到 2.39999.... 在添加 0.10 时。我相信这是一个精确的问题。如何处理它并确保我在大 # 上获得正确的索引，无论使用浮点数还是双精度数。

有任何想法吗 ！！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T11:23:16.603

从[浮点指南](http://floating-point-gui.de/basic/)：

> **为什么我的数字，比如 0.1 + 0.2 加起来不是很好的 0.3 轮，而是得到一个奇怪的结果，比如 0.30000000000000004？**
> 
> 因为在内部，计算机使用的格式（二进制浮点）根本无法准确表示 0.1、0.2 或 0.3 之类的数字。
> 
> 当代码被编译或解释时，你的“0.1”已经被四舍五入到该格式中最接近的数字，这会在计算发生之前导致一个小的舍入误差。

你不使用`float`或者`double`如果你需要数字来加起来exaclty。改为使用`BigDecimal`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:24:26.207

问题是 float 使用的格式不能代表所有十进制数，因此有时会丢失精度。

请改用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:25:50.290

Float 数据类型不提供精确表示。

[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)会帮助你。下面的例子可能对你有帮助

```
BigDecimal decimal=new BigDecimal(10.0);
    for (int i = 0; i < 10; i++) {
        decimal=decimal.add(new BigDecimal(.1));
        System.out.println(decimal.floatValue());

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:42:07.263

您不应该将浮点数用于此类事情（索引/迭代）。

每次都尝试计算 I：

```
I = 1.0f + (i*addup); 
```

而且您不会累积浮点错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T13:19:23.230

我认为这可能是您正在寻找的：

Java 从 import 包中提供了一个类：*import java.text.DecimalFormat*，称为**DecimalFormat**。它的签名是：

```
DecimalFormat myFormat = new DecimalFormat("0.0"); 
```

它需要一个 String 参数，您可以在其中指定要如何显示格式。

以下是如何将其应用于您的代码：

```
DecimalFormat myFormat;
private static int getIndexOfUnits(float units) {
myFormat = new DecimalFormat("0.0");
int index = -1;
float addup = 0.10f;
for(float i = 1.00f; i < units; i=(float)i+addup) {
    index++;
    System.out.println("I = " + myFormat.format(i) + " Index = " + index);
}

return index; 
```

}

在您的 println 中，您可以看到使用对 DecimalFormat 的myFormat 对象引用`format()`调用了 DecimalFormat 的类方法`float i`——这是进行格式化的地方。

# java - 本机库在普通 Java 应用程序中工作，但在 Eclipse 插件中不工作

> ID：10481159
> 
> 赞同：1
> 
> 时间：2012-05-07T11:19:21.530
> 
> 标签：java, eclipse-plugin

对于我的应用程序，我需要一个第三方框架。该框架由 2 个 Jar 文件和 2 个本机库组成。

出于测试目的，我将文件添加到我的 java 库路径中的文件夹中。现在，如果我开始我的正常应用程序，一切都会按预期工作。

但是如果我启动我的 Eclipse 插件，我会得到以下异常：

```
java.lang.UnsatisfiedLinkError: /usr/lib/java/libPQOSUtil.dylib:  no suitable image found.  Did find:  /usr/lib/java/libPQOSUtil.dylib: mach-o, but wrong architecture
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1827)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1750)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1045)
    at PQSDKMultiTouch.PQOSUtil.<clinit>(PQOSUtil.java:7)
    at PQSDKMultiTouch.PQMTClient.SendRequest(PQMTClient.java:61)
    .... 
```

我没有改变任何东西。那么问题是什么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:24:35.873

您的库有错误的架构（如消息所述）可能指的是 32 VS 64 位。

我的猜测是 Eclipse 正在使用它的内部 java，它可能是 64 位，而您安装的 jdk 是 32 位（或相反）。这些库是其中一种，并且只能使用其中一种方式。

同样，这是我的猜测，但可能值得检查！

# python - 使用python在Windows上的网络接口速度

> ID：10481161
> 
> 赞同：0
> 
> 时间：2012-05-07T11:19:40.993
> 
> 标签：python, windows, networking, network-programming

我正在用python为windows编写一个应用程序，我想知道我机器中网络接口的速度，我使用下面的代码来获取使用的路由表。

```
def cmd(c):
    """
    Execute commands in the command line
    """
    return os.popen(c).read().rstrip("\n")

#list of IPV4 network routs 
table = cmd("route print -4").split("\n") 
```

然后我将其处理`table`为一个字符串，将其切成几行，并`(ip, subnet, gateway, metric)`为每个接口获取一个元组列表。

有没有办法使用接口计算连接到互联网的速度？或获取此类信息的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:45:20.230

我记录了通过每个接口的流量，并制作了一个计时器来计算每个接口的速度。

# symfony - 在 Symfony 2 应用程序中获取应用程序根 URL 和目录名称

> ID：10481166
> 
> 赞同：8
> 
> 时间：2012-05-07T11:19:59.620
> 
> 标签：symfony

我想知道两个系统的应用程序的根，例如。`/var/www/app/`或`/app/`出于文件上传的目的。当我上传时，我相信我需要“系统”目录名称，用于网络前端的链接，我需要“相对”路径。我如何获得这些信息？

在之前的项目中，我在`app*.php`文件中定义了常量（前端控制器）

```
define('APP_ROOT', __DIR__); 
```

想知道有没有更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T11:56:19.063

在任何`ContainerAware`课程中，您都可以通过以下方式获取 Web 目录的位置，

```
$this->container->get('kernel')->getRootdir().'/../web'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T09:11:57.027

如果容器不可用，您可以使用[依赖注入](http://symfony.com/doc/master/book/service_container.html)：`%kernel.root_dir%`在服务配置中设置为您的类的参数。

# c - 动态分配 - 内存管理

> ID：10481169
> 
> 赞同：0
> 
> 时间：2012-05-07T11:20:15.507
> 
> 标签：c, memory, memory-management, allocation

我知道 malloc() 是一个过度允许和 free() 不会释放整个内存。我测试了一个检查所有这些的代码：

```
extern char _end;
#include <stdlib.h>
#include <stdio.h>
int main(int argc, char *argv[])
{

    char * res;
int tas,rupt,esp;
printf("\n Before any memory reservation\n --------------------------\n");
tas=sbrk(0);
printf("End position of the pile : %p\n",tas);
rupt=&_end;
printf("Breaking point : %p\n",rupt);
esp=tas-rupt;
printf("Space between the end of the heap and breaking point : %d bytes \n",esp);
printf("Pages allocated for malloc %f\n",(tas-rupt-esp)/4096.0);
printf("whether %d bytes\n",tas-rupt-esp);

int nbEntier = 0, i = 0;
int* tabEntier ; // This pointer is used as a table after the call of malloc

// Asked the number of integers to the user
printf("How integer do you want to store? ");
scanf("%d", &nbEntier);

if (nbEntier > 0) 
{
    tabEntier = malloc(nbEntier  * sizeof(int));  
    if (tabEntier== 0) 
    {
        exit(0); // 
    }

    //We ask the integer
    for (i = 0 ; i < nbEntier  ; i++)
    {
        printf("Integer n° %d ? ", i + 1);
        scanf("%d", &tabEntier[i]);
    }

    // We display the integer one to one
    printf("\n\nYour integers are :\n");
    for (i = 0 ; i < nbEntier  ; i++)
    {
        printf("%d \n", tabEntier[i]);
    }
tas=sbrk(0);
printf("End position of the pile : %p\n",tas);
rupt=&_end;
printf("Breaking point : %p\n",rupt);
printf("Space between the end of the heap and breaking point : %d bytes \n",tas-rupt);
printf("Pages allocated for malloc %f\n",(tas-rupt-esp)/4096.0);
printf("whether %d bytes\n",tas-rupt-esp);

    free(tabEntier);

    printf("\nDisplay after free ():\n");

     printf("\n\nYour integers are :\n");
    for (i = 0 ; i < nbEntier  ; i++)
    {
        printf("%d \n", tabEntier[i]);
    }

}

return 0;
} 
```

我的结果：

```
在任何内存保留之前
--------------------------
桩的结束位置：0x9886000
断点：0x8049c2c
堆尾和断点之间的空间：25412564 字节
为 malloc 分配的页面 0.000000
是否为 0 字节
你想存储多少整数？3
整数 n° 1 ? 45
整数 n° 2 ? 85
整数 n° 3 ? 78

你的整数是：
45
85
78
桩的结束位置：0x98a7000
断点：0x8049c2c
堆尾和断点之间的空间：25547732 字节
为 malloc 33.000000 分配的页面
是否 135168 字节

free() 后显示：

你的整数是：
0
85
78

```

我不明白！即使我问一个整数，它也会一直分配 33 页，以及为什么在 free () 之后它释放整个第一个而不是其余的..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:45:48.367

计算机通过忘记存储在存储单元中的内容来释放内存。当您键入 free() 时，您只需告诉堆管理器该地址没有存储任何感兴趣的内容，并且不再保留内存单元。因此，没有“擦除”存储单元之类的事情，不会执行主动向其写入零的代码。

在您的特定情况下，您调用 free() 并告诉它 3xsizeof(int) 字节可供程序的其余部分免费使用。程序的其他部分需要将值 0 存储在某处，而它恰好位于您之前保留的单元格中。

通常，打印已传递给 free() 的指针的内容是未定义的行为。任何事情都有可能发生。纠缠于为什么未定义的行为以某种方式在某个编译器的某个程序中以某种方式起作用，是毫无意义的知识。只需接受在 free() 调用后无法信任内存单元，这就足够了。

# c++ - 如何分配这个数组更好？

> ID：10481172
> 
> 赞同：0
> 
> 时间：2012-05-07T11:20:25.517
> 
> 标签：c++

我有两种选择：

```
class X{
int* x;
int size = ...;
void create() { 
    x = new int[size];
    use();
    delete [] x;
}
void use() {//use array}
}; 
```

或者：

```
class X{
int size = ...;
void create(){ 
    int x[size];
    use(x);
}
void use(int arg[]) {//use arg}
}; 
```

哪个更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T11:21:24.323

选项 3 更好，使用`std::vector`.

```
class X{
    std::vector<int> x;
    int size; // = ...; <-- the "=" part is illegal in C++03
    void create() { 
        x.resize(size);
        use();
    } 
}; 
```

此外，您的第二个片段是非法的，C++ 不支持 VLA。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:22:53.613

第二种选择不起作用，因为大小不是一个恒定值。

`delete[] x`第一个替代方案错过了应该执行释放 ( ) 的析构函数。

我建议第三种选择：使用`std::vector<int>`x 类。您不需要显式析构函数来释放内存，而且它通常比 C 风格的数组更安全。

# wpf - 进行组合框选择时设置文本框的属性 WPF XAML

> ID：10481175
> 
> 赞同：0
> 
> 时间：2012-05-07T11:20:33.090
> 
> 标签：wpf, wpf-controls

选择组合框时如何设置文本框的属性。foe 示例在进行组合框选择时设置文本框的背景和 IsEnabled 属性。我希望它纯粹在 XAML 中，而不是在后面的代码中。我使用 MVVM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:33:31.053

如何仅在 SelectedItems 为 1 时启用 textBox1

```
<TextBox Height="23" HorizontalAlignment="Left" Margin="246,177,0,0" Name="textBox2" VerticalAlignment="Top" Width="120">
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}">
                <Setter Property="IsEnabled" Value="False"></Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=comboBox1, Path=SelectedIndex}" Value="1">
                        <Setter Property="Background" Value="Green"></Setter>
                        <Setter Property="IsEnabled" Value="True"></Setter>
                     </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox> 
    <ComboBox Height="22" HorizontalAlignment="Left" Margin="246,119,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" /> 
```

我认为只有使用 XAML 才能达到条件值 =“1”或“3”，即数据触发器中的关系比相等更复杂。

对于这种情况，您需要一个转换器。这个链接可以帮助你

[如何让 DataTemplate.DataTrigger 检查大于或小于？](https://stackoverflow.com/questions/793926/how-to-get-datatemplate-datatrigger-to-check-for-greater-than-or-less-than)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:34:05.673

您可以将数据触发器用于组合的选定对象。看看这个先前的问题：[WPF Visibility of a UI element based on combo selection](https://stackoverflow.com/questions/2561820/wpf-visibility-of-a-ui-element-based-on-combo-selection)

尝试在 selecteditem 为 时生成触发器`{x:Null}`。为此，您需要将控件放在 DataTemplate 中，并将触发器放在模板的触发器集合中。

这是一个示例代码（未经测试，请自行检查）：

```
<TextBox Height="23" HorizontalAlignment="Left" Margin="246,177,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" IsEnabled" Value="True" /> 

<ComboBox Height="22" HorizontalAlignment="Left" Margin="246,119,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" />

<DataTemplate.Triggers> 
     <Trigger SourceName="comboBox1" Property="ComboBox.SelectedItem" Value="{x:Null}"> 
         <Setter TargetName="textbox2" Property="TextBox.IsEnabled" Value="False" />
     </Trigger> 
</DataTemplate.Triggers> 
```

# c# - 在 C# 中通过 JSON JavaScriptSerializer 序列化批量数据？

> ID：10481177
> 
> 赞同：2
> 
> 时间：2012-05-07T11:20:39.723
> 
> 标签：c#

如何在 C# 中使用 JSON JavaScriptSerializer 序列化批量数据？我试过但得到了下面提到的错误

**“使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过 maxJsonLength 属性上设置的值”**

有人告诉我如何序列化批量数据吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:38:05.057

尝试这个

```
 JavaScriptSerializer jsJson = new JavaScriptSerializer();
 jsJson.MaxJsonLength = 2147483644; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:45:35.393

你可以使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:29:06.433

我相信这是由于您的其中一个属性的长度太长造成的。我们可以看到有关所涉及数据的一些代码和背景吗？

# tridion - 在 SDL Tridion 2011 SP1 的事件处理程序中使用 TOM.NET API 从重复的嵌入式架构中获取值

> ID：10481179
> 
> 赞同：0
> 
> 时间：2012-05-07T11:20:46.950
> 
> 标签：tridion

我正在研究用于保存组件的事件处理程序。

我的目标是在用户基于模式创建和组件时执行一些验证。

我有一个名为“Employee”的模式。

Employee 有一个名为“Experience”的嵌入式模式，它是多值的。

经验有 3 个领域。

1.  角色：下拉列表中的值是 Manager、Lead。
2.  公司：文本字段
3.  年：文本字段

当用户在这些字段中输入一些数据时，我想在保存之前进行一些验证。

高级设计看起来像这样。

1.  加载组件的实例
2.  导航到嵌入字段“体验”

对于每一个“经验”。我需要获取“角色”的值，并检查是否在其他两个字段中输入了适当的值（通过编写组件保存事件）

```
For( all the repeated "Experience")
{
    If (Role=="Manager")
        check the values in the other two fields and do some validation
    If (Role=="Lead") 
        check the values in the other two fields and do some validation
} 
```

我一直在提取嵌入字段中子字段的值和名称。

我试过了：

```
Tridion.ContentManager.Session mySession = sourcecomp.Session;
Schema schema= sourcecomp.Schema;
if(schema.Title.Equals("Employee"))
{
    var compFields = new ItemFields(sourcecomp.Content, sourcecomp.Schema);
    var embeddefield = (EmbeddedSchemaField)compFields["Experience"];

    var embeddedfields = (IList<EmbeddedSchemaField>)embeddefield.Values;
    foreach(var a in embeddedfields)
    {
        if(a.Name.Equals("Role"))
        {
            string value=a.Value.ToString();
        }
    }
} 
```

实际上我被困在如何同时检索其他字段中的值。

任何人都可以解释它是如何完成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:25:43.457

您需要了解 EmbeddedSchemaField 类是它*同时*表示模式和字段（顾名思义......）

我总是发现在编写针对其字段的代码时查看组件的源 XML 很有帮助，您可以很好地直观地表示您的类必须做什么。如果您查看这样的组件 XML：

```
<Content>
    <Title>Some Title</Title>
    <Body>
            <ParagraphTitle>Title 1</ParagraphTitle>        
            <ParagraphContent>Some Content</ParagraphContent>
    </Body>
    <Body>
            <ParagraphTitle>Title 2</ParagraphTitle>        
            <ParagraphContent>Some more Content</ParagraphContent>
    </Body>
</Content> 
```

Body 是您嵌入的 Schema 字段，它是多值的，其中包含 2 个单值字段。

然后在 TOM.NET 中处理这些字段：

```
// The Component
Component c = (Component)engine.GetObject(package.GetByName(Package.ComponentName));
// The collection of fields in this component
ItemFields content = new ItemFields(c.Content, c.Schema);
// The Title field:
TextField contentTitle = (TextField)content["Title"];
// contentTitle.Value = "Some Title"
// Get the Embedded Schema Field "Body"
EmbeddedSchemaField body = (EmbeddedSchemaField)content["Body"];
// body.Value is NOT a field, it's a collection of fields.
// Since this happens to be a multi-valued field, we'll use body.Values
foreach(ItemFields bodyFields in body.Values)
{
    SingleLineTextField bodyParagraphTitle = (SingleLineTextField)bodyFields["ParagraphTitle"];
    XhtmlField bodyParagraphContent = (XhtmlField) bodyFields["ParagraphContent"];
} 
```

希望这能让你开始。

# asp.net-mvc-3 - 级联下拉列表 asp.net

> ID：10481180
> 
> 赞同：1
> 
> 时间：2012-05-07T11:20:51.133
> 
> 标签：asp.net-mvc-3, drop-down-menu

我在数据库中有两个表。 ![我有两个表城市，区域](../Images/8d1418863281363bb669b1232e6d1e98.png)

之后我想为城市和相应区域创建下拉列表。这是我一生中的第一个级联下拉菜单。我尝试遵循一些示例。在我的 get 操作中：

```
 ViewBag.cities = db.cities.ToList();
      ViewBag.areas = db.areas.ToList(); 
```

在我看来：

```
 <div class="editor-field">
         @Html.DropDownListFor(model => model.city,new SelectList(ViewBag.cities as 
         System.Collections.IEnumerable, "city_id", "name"),
         "Select City", new { id = "ddlCars" }) 
         @Html.ValidationMessageFor(model => model.city)
       </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.area)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.area, new 
         SelectList(Enumerable.Empty<SelectListItem>(), "area_id", "name"),
         "Select Area", new { id = "ddlModels" })
        @Html.ValidationMessageFor(model => model.area)
    </div> 
```

我刚刚从一个网站复制了一个 js 文件

```
 $(document).ready(function () {
       $("#ddlCars").change(function () {
       var idModel = $(this).val();
       $.getJSON("/Post/LoadAreasByCity", { id: idModel },
       function (carData) {
        var select = $("#ddlModels");
        select.empty();
        select.append($('<option/>', {
        value: 0,
       text: "Select Area"
       }));
       $.each(carData, function (index, itemData) {

        select.append($('<option/>', {
        value: itemData.Value,
        text: itemData.Text
         }));
        });
        });
        });

       $("#ddlModels").change(function () {
       var idColour = $(this).val();
      $.getJSON("/Home/LoadColoursByModel", { id: idColour },
      function (modelData) {
      var select = $("#ddlColours");
      select.empty();
      select.append($('<option/>', {
      value: 0,
      text: "Select a Colour"
      }));
     $.each(modelData, function (index, itemData) {

      select.append($('<option/>', {
      value: itemData.Value,
      text: itemData.Text
      }));
      });
      });
      });
      }); 
```

在我的 Post/LoadAreasByCity 我的方法是：

```
 public JsonResult LoadAreasByCity(string id)
          {
           PostManager pm = new PostManager();
           if ( id=="") { id = "1"; }
           int c_id =(int) Convert.ToInt32(id);
           var areaList = pm.GetModels(c_id);

           var modelData = areaList.Select(m => new SelectListItem()
               {
              Text = m.name,
              Value = m.area_id.ToString(),

           });
           return Json(modelData, JsonRequestBehavior.AllowGet);
           } 
```

它在视图页面中正确传播城市和区域。但是在提交数据后，它在这一行中给出了错误

```
 @Html.DropDownListFor(model => model.city,new SelectList(ViewBag.cities as   
         System.Collections.IEnumerable, "city_id", "name"),"Select City", new { id = 
         "ddlCars" }) 
```

它说**值不能为空。参数名称：items**

最后在我的帖子中

```
 int c_id = Convert.ToInt32(p.city);
                int a_id = Convert.ToInt32(p.area);
                area a = db.areas.Single(x=>x.area_id == a_id);
                city c = db.cities.Single(s => s.city_id == c_id);
                post.city = c.name;
                post.area = a.name;
                ....Save to DB 
```

这是什么问题.....提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:39:16.520

我怀疑在您的 POST 操作中，您重新显示了相同的视图，但忘记填充`ViewBag.cities`和`ViewBag.areas`项目，就像您在 GET 操作中所做的那样：

```
[HttpPost]
Public ActionResult Process()
{
    ... Save to DB

    ViewBag.cities = db.cities.ToList();
    ViewBag.areas = db.areas.ToList();   
    return View();
} 
```

# iphone - 在 iphone 聊天应用程序上模拟大量同时用户

> ID：10481182
> 
> 赞同：1
> 
> 时间：2012-05-07T11:21:05.837
> 
> 标签：iphone, ios, xcode, chat

我正在制作一个类似 Kik messenger 的 iOS 应用程序。

我担心一旦有很多用户加入，聊天就会变慢。

您将如何在超早期阶段模拟这种类型的同时条件？我想测量延迟时间，看看什么时候事情会变慢？

我的后端是美国 Linux RedHat 服务器上的 PHP/LampStack。我的许多用户将在国外，我也将在国外进行测试。（如果这个事实很重要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:06:49.670

您是否尝试过诸如[DeviceAnywhere](http://www.keynotedeviceanywhere.com/)之类的服务？

# asp.net - 会话到期时向用户显示警报消息或弹出消息...谁能告诉我此代码？

> ID：10481183
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:21:09.850
> 
> 标签：asp.net

在会话过期之前向用户显示弹出消息或警告消息的代码......以及在重定向到登录页面之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:28:45.200

```
ClientScript.RegisterStartupScript(
      this.GetType(),
      Guid.NewGuid().ToString(),
      string.Format("alert('{0}');window.location.href = 'default.aspx'", 
        message.Replace("'", @"\'").Replace("\n", "\\n").Replace("\r", "\\r")),
        true); 
```

# javascript - li 上的背景颜色和图像同时悬停

> ID：10481185
> 
> 赞同：0
> 
> 时间：2012-05-07T11:21:15.173
> 
> 标签：javascript, html, css

我有一个代码，我想同时应用图像和背景颜色。有人可以帮我吗？

CSS

```
 .menu, .menu ul
{
    width:1000px;
    background-color: #F3F3F3;
    margin: 0;

}
.menu{  padding: 0; height:30px;}
.menu li
{
    float: left;
    padding-top:3px;
    height:20px;
    text-align:left;
    text-transform:uppercase; 
    position: relative; 
    display: block;
    font-family: Tahoma;
    font-size: 8px;
    font-weight:bold;
    text-align: center;
    text-decoration: none;
    padding:10px 15px 0 15px;
    background:url(../image/border.png) no-repeat right center;
}

.menu li:hover
{       
    background:#3EBBEC; 
    color: #FFFFFF;
}
.menu a { text-decoration: none; color:#000000; }
.menu a:hover { text-transform:lowercase; } 
```

HTML

```
<ul class="menu">
   <a href="#"><li>A</li></a>  
   <a href="#"><li>B</li></a> 
   <a href="#"><li>C</li></a>
   <a href="#"><li>D</li></a>   
</ul> 
```

这是我需要同时应用图像和背景颜色的 HTML 和 CSS 的代码。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:22:26.827

当您只想更改单个值时，不要使用速记符号。或者，如果您使用速记符号，请提供您不想成为“默认”值的所有值。

利用：

```
.menu li:hover
{       
    background-color: #3EBBEC; 
} 
```

或者：

```
.menu li:hover
{       
    background: #3EBBEC url(...) ...; 
} 
```

请记住，当您使用速记时，所有未提供的值都将回退到它的默认值，而不是它的继承值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:38:14.333

```
.menu li {
    background: #color url(path to img);
}
.menu li:hover {
    background: #hover-color url(path to hover-img);
    /* or if only color is changed just write */
    background-color: #hover-color;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:38:09.170

添加

```
.menu li:hover 
{ 
background:#3EBBEC url(image.jpg) no-repeat;
color: #FFFFFF; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:27:24.813

首先你的 HTML 应该是这样的

```
<ul class="menu">
   <li><a href="#">A</a></li>
   <li><a href="#">B</a></li>
   <li><a href="#">C</a></li>
   <li><a href="#">D</a></li>
</ul> 
```

CSS

```
ul.menu li{display:block; width:100px; height:30px; background:url(yourbackgroundimage.png);}
ul.menu li a{display:block; width:100px; height:30px; background:url(yoursecondbackgroundimage.png);} 
```

如果你想添加悬停状态

```
ul.menu li{display:block; width:100px; height:30px; background:url(yourbackgroundimage.png);}
ul.menu li:hover{background:url(yourhoverbackgroundimage.png);}
ul.menu li a, ul.menu li a:visited{display:block; width:100px; height:30px; background:url(yoursecondbackgroundimage.png);}
ul.menu li a:hover{background:url(yoursecondbackgroundimagehover.png);} 
```

# c# - 在 Word 文档中查找文本并将其替换为图像

> ID：10481188
> 
> 赞同：0
> 
> 时间：2012-05-07T11:21:27.820
> 
> 标签：c#, .net, ms-word

我已经想出了如何替换文档中的单词，因为这很容易使用 find 对象。现在，我正在努力用整个 word 文档中的实际徽标图像替换“*徽标”一词。*

我想我可以遍历文档中的每个范围，并说如果在范围内找到单词*logo*，我可以添加一张图片：

```
foreach (Range rngStory in doc.StoryRanges)
{                
    rngStory.InlineShapes.AddPicture(filename);
} 
```

问题是这会将图片添加到范围的顶部，而不是文本徽标的确切位置。

有没有人有一个很好的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-27T14:37:17.717

您可以通过以下方式执行此操作：此代码将文本替换为准确位置的图像。

```
 Word.Application wordApp = new Word.Application();
      Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Open(ref outputFile, ref oMissing,
                     ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                     ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                     ref oMissing, ref oMissing, ref oMissing, ref oMissing);
                doc.Activate();
              try
                {
                    //----------------------Replace--------------------------------
                    Microsoft.Office.Interop.Word.Find fnd = wordApp.ActiveWindow.Selection.Find;
                    fnd.ClearFormatting();
                    fnd.Replacement.ClearFormatting();
                    fnd.Forward = true;
                    fnd.Wrap = Microsoft.Office.Interop.Word.WdFindWrap.wdFindContinue;

    string imagePath = Server.MapPath("~/data/uploads/violations/resize/Image.jpg");
    var keyword = "LOGO";
                        var sel = wordApp.Selection;
                        sel.Find.Text = string.Format("[{0}]", keyword);
    wordApp.Selection.Find.Execute(keyword);

                        Word.Range range = wordApp.Selection.Range;
     if (range.Text.Contains(keyword))
                            {
                                //gets desired range here it gets last character to make superscript in range 
                                Word.Range temprange = doc.Range(range.End - 4, range.End);//keyword is of 4 charecter range.End - 4
                                temprange.Select();
                                Word.Selection currentSelection = wordApp.Selection;
                                //currentSelection.Font.Superscript = 1;

                                sel.Find.Execute(Replace: WdReplace.wdReplaceOne);
                                sel.Range.Select();
                                var imagePath1 = Path.GetFullPath(string.Format(imagePath, keyword));
                                sel.InlineShapes.AddPicture(FileName: imagePath1, LinkToFile: false, SaveWithDocument: true);
     }
}
catch { }
            finally
            {
                if (doc != null)
                {
                    ((_Document)doc).Close(ref oMissing, ref oMissing, ref oMissing);
                    Marshal.FinalReleaseComObject(doc);
                }
                if (wordApp != null)
                {
                    ((_Application)wordApp).Quit();
                    Marshal.FinalReleaseComObject(wordApp);
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:31:02.570

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.inlineshapes.addpicture%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.inlineshapes.addpicture%28v=office.11%29.aspx)

请参阅可选的 Range 参数

> 范围
> 
> 可选对象。图片将在文本中放置的位置。如果范围没有折叠，则图片替换范围；否则，插入图片。如果省略此参数，则自动放置图片。

所以我会说您查询您拥有*徽标*标签的当前位置，并将其用作 Range 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T14:41:42.697

或者以这种方式：这将文本替换为文档顶部的图像

```
 Word.Application wordApp = new Word.Application();
  Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Open(ref outputFile, ref oMissing,
                 ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                 ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                 ref oMissing, ref oMissing, ref oMissing, ref oMissing);
            doc.Activate();
          try
            {
                //----------------------Replace--------------------------------
                Microsoft.Office.Interop.Word.Find fnd = wordApp.ActiveWindow.Selection.Find;
                fnd.ClearFormatting();
                fnd.Replacement.ClearFormatting();
                fnd.Forward = true;
                fnd.Wrap = Microsoft.Office.Interop.Word.WdFindWrap.wdFindContinue;

string imagePath = Server.MapPath("~/data/uploads/violations/resize/Image.jpg");
var keyword = "LOGO";
                    var sel = wordApp.Selection;
                    sel.Find.Text = string.Format("[{0}]", keyword);
wordApp.Selection.Find.Execute(keyword);

                    Word.Range range = wordApp.Selection.Range;

                            sel.Find.Execute(Replace: WdReplace.wdReplaceOne);
                            sel.Range.Select();
                            var imagePath1 = Path.GetFullPath(string.Format(imagePath, keyword));
                            sel.InlineShapes.AddPicture(FileName: imagePath1, LinkToFile: false, SaveWithDocument: true);

  }
  catch (Exception)
        {
        }
        finally
        {
            if (doc != null)
            {
                ((_Document)doc).Close(ref oMissing, ref oMissing, ref oMissing);
                Marshal.FinalReleaseComObject(doc);
            }
            if (wordApp != null)
            {
                ((_Application)wordApp).Quit();
                Marshal.FinalReleaseComObject(wordApp);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-24T19:19:33.847

```
var wApp = new Application();
var wDoc = wApp.Documents.Open(Path.GetFullPath(filePath), ReadOnly: false);
imagePath = Path.GetFullPath(imagePath);

foreach (Range rng in wDoc.StoryRanges)
    while (rng.Find.Execute(keyword, Forward: true, Wrap: WdFindWrap.wdFindContinue))
    {
        rng.Select();
        wApp.Selection.InlineShapes.AddPicture(imagePath, false, true);
    } 
```

# windows - 在命令行中编译库时出错

> ID：10481193
> 
> 赞同：0
> 
> 时间：2012-05-07T11:22:20.727
> 
> 标签：windows, visual-studio, compiler-errors, nmake

我正在尝试编译这个库：[http](http://www.mega-nerd.com/SRC/win32.html) ://www.mega-nerd.com/SRC/win32.html 。但我遇到了一些麻烦。这是发生的事情：

```
C:\libsamplerate-0.1.8>make
    1 file(s) copied.
    1 file(s) copied.

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

    link.exe /nologo /dll /incremental:no /libpath:""C:\Program Files (x86)\
Microsoft Visual Studio 10.0\Common7\IDE"\Lib" /pdb:"libsamplerate-0.pdb" /impli
b:".\libsamplerate-0.lib" /machine:I386 /out:"libsamplerate-0.dll" /def:".\Win32
\libsamplerate-0.def" ".\src\samplerate.obj"  ".\src\src_linear.obj"  ".\src\src
_zoh.obj"  ".\src\src_sinc.obj"
LINK : fatal error LNK1181: cannot open input file 'Files.obj'
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\link.exe"' : return code '0x49d'
Stop. 
```

我在尝试编译之前运行 vcvars32.bat，我想我的路径变量中有所有正确的文件夹，但我是新手，所以我不完全确定。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T17:25:58.337

您对以下行有引用问题： `/libpath:""C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE"\Lib"`

应该： `/libpath:"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Lib"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:05:27.493

检查[kb 815645](http://support.microsoft.com/kb/815645)是否没有帮助：

> ### `fatal error LNK1181`构建托管 C++ 应用程序时收到“ ”错误消息

```
fatal error LNK1181: cannot open input file 'C:\Program.obj' 
```

> ### 场景二：
> 
> `LNK1181`如果您将不合格的文件添加到 Additional Dependencies 项目属性，并且该文件不存在于`LIB`环境变量或`/LIBPATH`项目属性中定义的任何搜索目录中，也可能会发生链接器错误。
> 您可以将包含库文件的目录添加到`LIBPATH`以解决问题：
> 
> *   在解决方案资源管理器中，右键单击该项目，然后单击“属性”。
> *   在属性页对话框中，展开链接器，然后单击常规。在 Additional Library Directories 字段中，指定所需的库路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-06T15:19:16.637

You get error: "LINK : fatal error LNK1181: cannot open input file 'Files.obj'" Because the linker thinks you are adding file "Files" as one of input libraries. This comes from "C:\Program Files (x86)" (see the "Files"?) ;-)

# java - 弹簧容器的垃圾收集

> ID：10481195
> 
> 赞同：4
> 
> 时间：2012-05-07T11:22:22.160
> 
> 标签：java, spring, garbage-collection, singleton, out-of-memory

我在我的应用程序中使用 Spring 框架（版本 3.0.3）。最近，我遇到了这个令人讨厌的`java.lang.OutOfMemoryError: Java heap space`错误。该错误不是在执行时立即出现，而是在应用程序运行几个小时后出现。在那之前，应用程序会运行得非常好，然后突然间 jvm 会因为内存不足而崩溃。
经过广泛调查，我认为这个问题与 Spring 有关。我注意到所有的类，只要它们需要注入一个 bean，它们就会创建一个 XMLBeanFactory 的新实例。也就是说，他们一开始都有这个代码：

```
XmlBeanFactory beanfactory = new XmlBeanFactory(new ClassPathResource("SpringConfig.xml"));
Bean myBean = beanfactory.getBean("MyBean"); 
```

我知道不建议这样做。您只需要一个 Spring 容器实例，并为所有 bean 创建请求引用该实例。所以我通过一个单例实现了一个 SpringFactory，从而总是创建 XMLBeanFactory 的单个实例。
进行上述更改似乎已经解决了内存泄漏问题！
我还不能下定决心：

1.  即使我使用 spring 容器的多个实例来获取 bean，当容器超出范围时，它也应该释放所有 bean 引用，使所有 bean 都可用于垃圾收集。那么是什么导致了内存泄漏问题呢？正如我所提到的，仅使用单例容器会导致内存泄漏消失。如果需要，我可以提供更多详细信息。
2.  我们之前使用多个容器的原因是因为 bean 不是无状态的。为了解决这个问题，在我的单例弹簧容器中，我将所有 bean 范围设为*原型*。这种方法正确吗？

**更新**：
在我将以下代码添加到所有 Spring bean 之后，我得出了有趣的发现：

```
protected void finalize()
{
System.out.println(this +" object is garbage collected");
} 
```

我通过让每个类实例化一个新的 Spring 容器然后获取 bean 来运行代码。上面的注释是为几乎所有创建的 bean 打印的。这意味着所有的 Spring bean 都被清理干净了。但是，用完的内存会随着时间的推移而增加。
当我通过让所有类使用相同的 Spring 容器来做同样的事情时，使用的内存或多或少保持稳定。这让我觉得 Spring 容器正在保存内存。
所以问题是，Spring 容器（如上述代码中获得）垃圾何时被收集？我认为一旦超出范围就有资格进行垃圾收集！
似乎 Hibernate Session Object 正在缓存资源并占用内存。我对此不确定，但堆转储分析显示 Hibernate 的“字符串”是主要的内存持有者，例如。一些字符串有 sql 查询和 hibernate 创建的别名。但我想知道 Hibernate 缓存（我没有使用二级缓存）如何以及为什么仅在我使用多个 Spring 容器时才会导致问题！
**更新**：
最后我能够指出是什么阻碍了记忆。它是 Hibernate 生成的主缓存。物体像我们一样被清除了`getHibernateTemplate().clear()`. 但是，每个会话都会缓存 sql 查询和休眠属性，并且每个 Spring 容器都会创建一个新会话。由于缓存应该在会话关闭时自动清除，内存增长意味着会话没有关闭。`getHibernateTemplate().getSessionFactory().close()`这得到了进一步验证，因为当我在 DAO 课程结束时明确地这样做时，我没有遇到任何内存问题。
所以，问题是，为什么即使容器本身超出范围，spring hibernate 模板也不会关闭会话？我没有在代码中的任何地方明确处理会话，即使我有一个正在运行的线程，问题仍然存在。让我觉得框架实现本身有问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:41:11.963

你到底得到了哪个 OutOfMemoryError ？我认为是`java.lang.OutOfMemoryError: PermGen space`

如果是这样，这里是解释：

每个 spring 容器使用不同的类加载器（但它们都有相同的父类加载器）。当一个类被加载时，它被放在永久代内存中，而不是堆中，并且默认情况下它们永远不会被 JVM 垃圾收集。使用不同类加载器加载的同一个类被认为是不同的，因此，当您创建更多新的 Spring IoC 并最终耗尽空间时，永久代会被填满`java.lang.OutOfMemoryError: PermGen space`。

要解决此问题，应为您的 JVM 启用类卸载选项：

```
-XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled 
```

对于其他类型的内存不足错误，我目前看不到任何解释。除非您使用线程，否则在 Java 中很难创建内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:33:22.863

1.  您的容器是否真的超出了范围，或者它们是否在内部某个地方注册？

2.  Spring 使您的类无状态的另一点是您拥有尽可能少的实例，并在启动时根据需要加载它们。因此，您的范围应该尽可能单例，如果不是，您应该问自己为什么它不是单例，我可以这样做吗？

# android - Eclipse ADT Plugin：收集要安装的项目时出错

> ID：10481206
> 
> 赞同：3
> 
> 时间：2012-05-07T11:23:06.360
> 
> 标签：android, eclipse

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unable to read repository at https://dl-ssl.google.com/android/eclipse/plugins/com.android.ide.eclipse.adt_18.0.0.v201203301601-306762.jar.
Read timed out
Unable to read repository at https://dl-ssl.google.com/android/eclipse/features/com.android.ide.eclipse.ddms_18.0.0.v201203301601-306762.jar.
Read timed out 
```

如何解决eclipse中的这个错误？我正在使用 Eclipse 版本：3.7.2 请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T19:49:05.593

它在谷歌网站上说：

> 如果您在获取插件时遇到问题，请尝试在位置 URL 中使用“http”，而不是“https”（出于安全原因，首选使用 https）。

确实，将其更改为`https://...`为`http://...`我解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T19:07:54.833

我也遇到了同样的错误。我将https更改为http，这次安装成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:02:22.303

Google 提供了 ADT-18.0.0.zip 文件，可直接从其网站下载。 [http://developer.android.com/sdk/eclipse-adt.html#troubleshooting](http://developer.android.com/sdk/eclipse-adt.html#troubleshooting)

下载后，将其作为存档加载，而不是使用同一页面上提供的 URL。

# jboss - 将消息从一个 jms 队列路由到另一个时的事务提交延迟

> ID：10481209
> 
> 赞同：2
> 
> 时间：2012-05-07T11:23:22.593
> 
> 标签：jboss, jms, jboss5.x, mule

我们正在尝试使用 Mule ESB 和 JBoss Messaging 构建简单的事务处理 jms-to-jms 路由器。当我们使用如下配置的应用程序运行 Mule ESB 时，我们观察到奇怪的行为。

1.  大约 10 条消息从队列 test1 路由到 test2
2.  大约 40 秒内没有任何反应。
3.  转到 1

当我们开始测试时，队列 test1 充满了大约 500 条消息。我们使用 Mule 3.2 和 JBoss 5.1。

如果我从下面的代码中删除事务一切正常，所有消息都会立即发送到队列 test2。此外，如果我将事务从 xa 更改为 jms，一切都很好——通过用 jms:transaction 替换 xa-transaction 标记。

我不知道是什么原因导致 ESB 上的消息处理暂停，可能事务提交被延迟。

我的问题是：我应该怎么做才能让 xa 事务正常工作？

如果需要，我会提供更多细节。我之前在 Mule ESB 论坛上问过这个问题，但没有回答[http://forum.mulesoft.org/mulesoft/topics/transaction_commit_delay_when_routing_message_from_one_jms_queue_to_another](http://forum.mulesoft.org/mulesoft/topics/transaction_commit_delay_when_routing_message_from_one_jms_queue_to_another)

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jbossts="http://www.mulesoft.org/schema/mule/jbossts" version="CE-3.2.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/jbossts http://www.mulesoft.org/schema/mule/jbossts/current/mule-jbossts.xsd ">
    <jbossts:transaction-manager> </jbossts:transaction-manager>
    <configuration>  
        <default-threading-profile maxThreadsActive="30" maxThreadsIdle="5"/>  
        <default-receiver-threading-profile maxThreadsActive="10" maxThreadsIdle="5"/> 
    </configuration>
    <spring:beans>
        <spring:bean id="jmsJndiTemplate" class="org.springframework.jndi.JndiTemplate" doc:name="Bean">
            <spring:property name="environment">
                <spring:props>
                    <spring:prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</spring:prop>
                    <spring:prop key="jnp.disableDiscovery">true</spring:prop>
                    <spring:prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</spring:prop>
                    <spring:prop key="java.naming.provider.url">localhost:1099</spring:prop>
                </spring:props>
            </spring:property>
        </spring:bean>
        <spring:bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean" doc:name="Bean">
            <spring:property name="jndiTemplate">
                <spring:ref bean="jmsJndiTemplate"/>
            </spring:property>
            <spring:property name="jndiName">
                <spring:value>XAConnectionFactory</spring:value>
            </spring:property>
        </spring:bean>
    </spring:beans>
    <jms:connector name="JMS" specification="1.1" numberOfConsumers="10" connectionFactory-ref="jmsConnectionFactory" doc:name="JMS"/>
    <flow name="flow" doc:name="flow">
        <jms:inbound-endpoint queue="test1" connector-ref="JMS" doc:name="qt1">
            <xa-transaction action="ALWAYS_BEGIN"/>
        </jms:inbound-endpoint>
        <echo-component doc:name="Echo"/>
        <jms:outbound-endpoint queue="test2" connector-ref="JMS" doc:name="qt2">
            <xa-transaction action="ALWAYS_JOIN"/>
        </jms:outbound-endpoint>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

[在这里](http://pastebin.com/NnykvUDd)您可以找到 1 条消息交互的日志片段。请注意，在这种情况下没有延迟。这是 11 条消息的日志片段[。](http://pastebin.com/V7EnKXtM)当应用程序启动时，它们都在队列 test1 中，你可以看到 10 条消息被立即路由，一条延迟了 1 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:54:43.030

我找到了问题的根源：我的队列是用以下属性定义的：

```
 <attribute name="RedeliveryDelay">60000</attribute> 
```

删除它或设置低值可以解决我的延迟问题。问题是，我不知道为什么:)

我一直认为在交付失败时会使用重新交付延迟，但在我的应用程序中并非如此。

# html - Pandoc 忽略 Markdown-Headlines

> ID：10481211
> 
> 赞同：4
> 
> 时间：2012-05-07T11:23:28.277
> 
> 标签：html, haskell, markdown, pandoc

使用[snap](http://snapframework.com/)，我使用以下函数编写了一个从 markdown 创建文本的拼接：

```
markdownToHTML :: T.Text -> [Node]
markdownToHTML = renderHtmlNodes . (writeHtml writeOpts) . readMarkdown readOpts . T.unpack
    where
        readOpts = defaultParserState
        writeOpts = defaultWriterOptions
            { writerStandalone = False
            , writerHtml5 = True
            , writerStrictMarkdown = False
            } 
```

现在，例如，当我给它这个降价

```
# Hi

Lorem ipsum something somthing

# Stuff

[a link](http://twitter.com/) 
```

它产生这个 HTML：

```
<h1 id='hi'>Hi
</h1>
<p>
 Lorem ipsum something somthing

 # Stuff

 <a href='http://twitter.com/'>a link</a></p> 
```

无论我在 之前放了多少换行符`#`，它仍然只是楔入段落中。

有趣的是，如果我将相同的 markdown 转储到 pandoc 的[演示站点](http://johnmacfarlane.net/pandoc/try)，它会产生正确的 Html 输出。

如有必要，可以在[此处找到我的项目的完整代码。](https://github.com/scan/neighr)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:05:39.957

请参阅 Text.Pandoc 的文档。它说：

> 注意：所有读者都假设输入文本有 '\n' 行结尾。因此，如果您从 Web 表单中获取输入文本，则应使用过滤器 (/='\r') 删除 '\r' 字符。

我怀疑这是你的问题。

# xml - 对 XML 中的元素和属性感到困惑

> ID：10481213
> 
> 赞同：1
> 
> 时间：2012-05-07T11:23:38.167
> 
> 标签：xml

我最近开始学习 XML，对元素和属性的使用非常困惑。我已经阅读了许多文章和一些经验法则，但仍然无法清楚地了解何时使用什么。例如，一个好的经验法则是使用单值数据作为属性，使用多值数据作为元素。另一个将数据表示为元素，将元数据表示为属性。一些文章说描述了其他几种方法或规则。我有几个问题，如果有人能帮助我理解，我将不胜感激

1.  如果数据是单值的怎么办？我应该将其设为属性还是元素。例如，一个人的婚姻状况在其数据的同时也是单一价值的。在这种情况下，属性和元素会有什么不同？

2.  例如，出生日期也是一个单值数据，但许多论坛建议为日月和年制作单独的元素，有些人建议将出生日期元素和年月日作为其属性。有什么区别 这两种方法有什么帮助？

3.  什么对搜索操作更有用？如何？如果我想以一种更有用和更有效的方式来设计它，我应该做什么。例如，如果我想搜索 1980 年出生的人，出生日期的元素或属性会对搜索操作产生什么影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:39:58.110

首先，您需要了解没有正确答案。在许多情况下，它几乎没有什么区别。当一个选择影响很小时，不值得花太多时间在决定上，因为做错的惩罚并不高。

如果您采用以下策略，您将不会出错：

(a) 在面向文档的 XML 中，将用户可见的运行文本放入元素中，并将普通用户无法看到的注释（“元数据”）放入属性中。

(b) 在面向数据的 XML 中，对所有事物都使用元素，ID 属性可能除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:18:00.763

我认为对于你应该如何使用两者有很多不同的解释，我最近一直试图弄清楚它们。以下是我个人的观点：

*   属性是标签内信息，您可以使用它来使标签“更丰富”，我认为就好像我必须引用特定的 html 标签来应用它某种样式或行为，所以例如我会寻找所有带有属性 lang = "ita" 的标签并粘贴一个“翻译这个”功能给它们，或者我可以查找所有带有属性 sex="female" 的标签并将它们渲染成粉红色......关键是读者可以判断文本是不是英语，或者莎拉是男性还是女性，但是您想“让解析器也知道这一点”，并且您可以通过属性而不是内部值更好地 xpath 标记（选择标记）。

*   其他一切都是元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:47:23.850

如果您是程序员
，尽管属性和元素是可以互换的，但您会更好地理解这一点。
每当我创建一个 XML 结构时，我都会尝试将其作为某种编程语言的一个类来计算，比如说 c#
，所以对于所有`Fields`我制作的属性和所有`Propertiese`我制作的元素，所以一个具有以下结构的类

```
class SomeClass

    {
    int a;
    int b{get; set;}
    } 
```

会被我改成

```
<xml>
<object a="some value"><b>"some value"</b></object>
</xml> 
```

# java - Struts2 forking SUCCESS 结果到不同的 JSP

> ID：10481220
> 
> 赞同：0
> 
> 时间：2012-05-07T11:24:06.090
> 
> 标签：java, struts2

我希望我的登录应用程序`.jsp`根据用户配置文件重定向到不同的位置。

所以我实际上有一个验证用户登录名（`user.login`）和密码（`user.password`）的操作，但我需要重定向到不同的页面，具体取决于`user.profile`。我有 3 个可能的配置文件，每个配置文件都必须转到特定的`*.jsp`.

实际上，我可以在配置文件管理员 jsp 页面上运行它，我可以在那里继续开发。

我已经在网上搜索了几天的答案。我已经检查了动作链和动作并重定向，但是在检查一个值（取决于该值）之后，我看不到分叉它的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:25:50.257

您可以返回您想要的任何结果名称（字符串），有什么问题？

动作伪代码：

```
public String login() {
    if (currentUser.isAdmin()) {
        return "admin";
    }

    return "user";
} 
```

动作伪配置：

```
<action name="login">
  <result name="admin">/WEB-INF/jsp/admin/home.jsp</result>
  <result name="user">/WEB-INF/jsp/home.jsp</result>
</action> 
```

# iphone - iphone更新应用程序中的一些文件

> ID：10481223
> 
> 赞同：0
> 
> 时间：2012-05-07T11:24:31.807
> 
> 标签：iphone, ios, caching, replace, download

我正在创建一个 iphone 应用程序，它使用和 xml 从和一些图像中获取一些数据。假设最初这些文件将位于应用程序包中。但后来我想让我的应用程序从 Web 服务获取更新。所以可以说我下载了一个新的 xml 和新的图像。

我在哪里保存它们？我想我可以将它们保存在应用程序“缓存”中，对吗？

但是然后我如何让我的应用程序检查缓存中是否存在此资源，然后加载那个......否则加载应用程序包中的那个？

iOS要使用4.3，但如果它更容易我们可以转到5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:35:18.520

您将不得不使用 NSFileManager 将文件保存到文档目录并从文档目录中加载它。查看以下链接，它实际上包含您需要的所有信息：

[http://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an-image-from-documents-directory-coding/](http://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an-image-from-documents-directory-coding/)

如果`[UIImage imageWithContentsOfFile:fullPath];`（fullPath 是包含文档目录中图像路径的 NSString）返回 nil，则图像不存在，因此您必须从包中加载默认图像。

您可以使用 [`[NSBundle mainbundle] pathForResource:@"yourFileNameHere" ofType:@"yourTypeHere"]`这将返回您的包中文件的路径，您可以将其传递给您的默认包文件`[UIImage imageWithContentsOfFile:]`

此示例仅适用于 UIImage，但您可以轻松地将其调整为使用其他类。不过，我认为 UIImage 示例足以用于说明目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:36:58.970

您可能想要创建一个版本控制方案。应用程序启动后（或定期）调用网络服务以非常便宜的方式询问它有什么版本。您将知道您拥有的版本（写在 plist 中或在文件夹结构中拥有版本号）。另一种选择是[推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。

接下来您必须考虑的是应用程序如何对获取新数据集作出反应。您只能在启动时执行此操作，但如果您将其绑定到网络呼叫，则可能会阻止启动体验。另一种选择是允许在应用程序打开时更改数据集。你可以有一个模型，它使用[NSNotificationCenter](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)来通知你的视图和控制器数据已经改变。我可能也会对存储进行版本控制（每个文件夹）以帮助过渡。

至于如何，您可以使用诸如ASIHttpRequest 、[NSFileManager](http://allseeing-i.com/ASIHTTPRequest/)[之](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)类的 Web 请求来写入文档目录，并[使用 plist](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html)来保存诸如版本之类的设置。

# android - 在 android 上运行和打印报告

> ID：10481229
> 
> 赞同：2
> 
> 时间：2012-05-07T11:24:55.347
> 
> 标签：android, printing, crystal-reports, report, reporting

我创建了一个应用程序，并且我想运行和打印报告（如 .net 上的水晶报告）。最简单的方法是什么？更具体地说，我创建了一个应用程序，用户将在他的客户处创建发票并在蓝牙打印机上打印它们。有没有像安卓水晶报告这样的简单方法？我尝试将水晶报告用于 Eclipse，但这些库在 android 上不起作用（至少我不知道如何）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:47:11.283

首先，Android 没有内置或本机打印功能，这仅仅是因为 Android 不知道打印机是什么。

但是，您可以使用第三方库。

要正确回答您的问题，您必须指定您的应用程序计划支持的 Android 版本。因为一些各种第三方库只支持某些版本的 Android。

除了在您的应用程序中包含第三方打印库外，您还可以发送带有您想要打印的数据的广播意图，并且根据用户设备上安装的应用程序，用户可以选择支持打印的应用程序您在意图中发送的数据类型。

您还可以使用 Google 的新云打印服务。这将是我的首选，但要实际打印到物理打印机，用户将需要一台台式电脑、服务器或 Mac，它要么连接有打印机，要么安装并配置了支持网络的打印机。在这一点上，这可能是你最好的选择。

由于几个原因，这确实是一个难以解决的问题。首先，您需要确定要打印的内容，您需要以可以打印的方式对其进行格式化（PDF、PostScript 或 ASCII 仅举几例）。接下来，您必须确定是否要支持打印到不支持蓝牙的打印机，因此如果您计划支持打印到支持网络的打印机，则必须与 WLAN 位于同一 LAN/VLAN Android 设备已连接到并且需要禁用 AP 隔离。如果您计划支持共享 Windows 打印机、Mac OS X Bonjour 打印机共享或 Zeroconf Linux 打印机共享，那么您将需要找到支持库并实现一种搜索各种网络共享的方法，然后选择并存储哪个要打印到的网络共享。

由于您计划支持打印到支持蓝牙的打印机；然后有一些 Ice Cream Sandwich 和 Honeycomb 发行版能够与蓝牙打印机配对（Android 版本需要 3.0 或 3.1+ [我不完全确定实现蓝牙打印协议的 Honeycomb 的 SDK 级别]和 4.0.3+）。至于实际格式化要通过蓝牙打印的数据，我不确定可以打印什么以及使用什么蓝牙版本或协议。今天早上我会做一些进一步的研究，我会把我能想到的信息发回来。

# sql-server - 在左连接中查找行号

> ID：10481230
> 
> 赞同：0
> 
> 时间：2012-05-07T11:25:06.113
> 
> 标签：sql-server, database, sql-server-2008

我有以下表格：

```
 TableT1                             TableT2

id           name                 mid  id    visitdate       
4            jack                  1   4     2012/01/22          
5            john                  2   5     2012/01/21            
6            mary                  3   6     Null   
                                           4   5     2012/02/21 
```

我已经加入了这两个表..对于每个“id”，如果他有多个访问日期，我只需要显示一条记录..

使用下面的查询我得到我想要的记录

```
 select id,name 
 from TableT1 
 left join
 ( 
   SELECT  id,MAX(visitdate) AS visitdate 
   FROM TableT2 
   GROUP BY id
 )as Last_Visit on TableT1.id=Last_Visit.id 
 order by TableT1.name,Last_Visit.visitdate Desc 
```

我的问题是找出每个 id(coloumn) 和 chk in condition 的行号`RowNumber >=1 AND RowNumber<=3`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:37:41.943

这应该只为您提供每个 id 的最后访问日期，并且仅当此 id 有多次访问时。

```
WITH cte AS(
    SELECT id
    , visitdate 
    , ROW_NUMBER()OVER(Partition By id Order By visitdate DESC)As VisitNum
   FROM TableT2 
)
select  TableT1.id, TableT1.name
       ,cte.visitdate , cte.VisitNum
 from TableT1 INNER JOIN cte 
    ON TableT1.id=cte.id  AND cte.VisitNum=1 
        AND EXISTS(SELECT NULL FROM cte c2 WHERE c2.id=cte.id AND c2.VisitNum>1) 
```

# python - Python中的变量赋值 - 奇怪的行为

> ID：10481231
> 
> 赞同：-2
> 
> 时间：2012-05-07T11:25:09.227
> 
> 标签：python, variables, variable-assignment

我目前正在使用 Python 做一些事情，并且在分配变量时遇到了一些奇怪的行为。例如，我在 ipython 控制台中将“a”设置为 0.1：

```
In [1]: a = 0.1 
```

然后我打印一个：

```
In [2]: a
Out[2]: 0.10000000000000001

In [3]: a == 0.1
Out[3]: True

In [4]: a == 0.10000000000000001
Out[4]: True 
```

好吧，也许是因为数字的有限表示（最后一个 1 在第 16 位）。但是之后 ：

```
In [17]: 1 == 0.10000000000000001
Out[17]: False 
```

我必须为此感到害怕吗？因为我是 ！;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:29:46.370

检查[浮点算术：](http://docs.python.org/tutorial/floatingpoint.html) Python 教程的问题和限制部分-您所描述的是浮点数据类型固有的怪异（没有特定于 Python）

另外，请注意`repr()`（字符串表示）显示具有漂亮舍入的浮点数 - 您的第一个`a`示例不完全是`0.1`，如果您更精确地打印它可以看到：

```
>>> a
0.1
>>> print "%.50f" % a
0.10000000000000000555111512312578270211815834045410 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:29:13.923

不，你不必害怕。这完全是非强制性的，我认为这是浪费能源，真的。

只需了解现象（您已经认识到它）并`Decimal`在必要时使用。

# ruby-on-rails - 如何从具有 Rails 中一些常见属性/属性的不同模型创建模型对象？

> ID：10481234
> 
> 赞同：1
> 
> 时间：2012-05-07T11:25:26.953
> 
> 标签：ruby-on-rails, couchdb

有两个模型具有一些共同的属性。我可以使用 A 的对象通过将 A 作为参数传递给 B 的新方法来创建 B 的对象吗？

例如 A：高度、宽度、长度、名称、类型、位置 B：高度、宽度、长度、名称、who_bought_it、some_thing_else

如果 B 扩展 A，这将是直截了当的，但在这种情况下并非如此。那么我该怎么做呢？批量分配的东西会在这里吗？

（我知道，这是一个不好的例子！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:23:53.453

您可以将实例 A 的属性传递给 B 类

```
ClassB.create(height: instance_a.height, width: instance_a.width) 
```

# java - 将 JAR 添加到 WAR 的类路径而不更改 WAR 文件

> ID：10481238
> 
> 赞同：0
> 
> 时间：2012-05-07T11:25:40.100
> 
> 标签：java, tomcat, jar, classpath, war

我在 Tomcat 中部署了一个 WAR 文件。另外我有一个 JAR 文件。

是否可以在不更改 WAR 文件的情况下使 JAR 文件中的类对 WAR 文件中的服务可用，或者是否已将其添加到 WAR 的 WEB-INF/lib 中？

我尝试将 JAR 添加到`lib/`，但它不起作用。Spring 在启动时因 org.springframework.beans.factory.BeanCreationException » java.lang.NoClassDefFoundError 而失败。

**编辑**

我意识到我可能使自己成为一个无法解决且在架构上很丑陋的问题。事情是这样的：

*   WAR有一个参考`<bean id="warService" class="com.war.Service" />`
*   我的 JAR 有一个扩展 com.war.Service 的类 com.mystuff.MyService
*   我已将 bean 引用替换为`<bean id="warService" class="com.mystuff.MyService" />`
*   Spring 失败并出现 java.lang.NoClassDefFoundError: com.war.Service

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:28:51.930

或者您可以将它（您的 jar 文件）放在`lib`文件夹下的 Tomcat 根目录中。检查一下：

[http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)

**根据您的编辑**

1.  你的罐子有问题
2.  您在应用程序上下文中错误地使用了完全限定的类名

我的文件夹里碰巧有`mysql-connector-java-5.0.8-bin`jar 。`lib`只是为了测试，我把它放在我的应用程序上下文中：

```
<bean id="driver" class="com.mysql.jdbc.Driver" /> 
```

作为魅力，检查上面的两个案例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:29:38.597

您可以使用 tomcat 的 lib 目录，但添加的所有 jar 都已为您服务器中的所有应用程序共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:31:12.663

虽然不推荐，但您可以在这种情况下使用 Tomcat“通用”类加载器。

[http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)

# iphone - 如何以编程方式为 iPhone 和 iPad 播放闹钟？

> ID：10481240
> 
> 赞同：2
> 
> 时间：2012-05-07T11:25:50.053
> 
> 标签：iphone, objective-c, alarm

如何以编程方式为 iPhone 和 iPad 播放闹钟？iPhone 使用的 UI 是什么？是否有任何示例参考来获得想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:28:41.527

你需要`UILocalNotification`.

[您可以在此处](http://reecon.wordpress.com/2010/11/12/setting-a-reminder-using-uilocalnotification-in-ios-4-objective-c/)或[此处](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)找到有关如何创建提醒的优秀教程。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:30:55.720

这将为您提供更多帮助：[重复 iOS 本地通知](http://useyourloaf.com/blog/2010/9/13/repeating-an-ios-local-notification.html)。

这是重复通知的好教程。这是一个示例图像：

![样本重复通知](../Images/1310b6a86245a0d1ffe7310132fd82a1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:29:00.747

看看[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)。[在这里](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)获取样品。

# asp.net - 在 Response.end() 之后刷新页面

> ID：10481252
> 
> 赞同：0
> 
> 时间：2012-05-07T11:26:31.660
> 
> 标签：asp.net

在我的应用程序中，我必须导出通过以下代码实现的 excel 文件：

```
 Response.ClearContent();
            Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}", pFileName));
            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";

            FileInfo myFile = new FileInfo(fullfilePath);
            Response.WriteFile(myFile.FullName);
            Response.Flush();
            HttpContext.Current.ApplicationInstance.CompleteRequest();

            Response.End(); 
```

从存在“导出到 Excel”按钮的主页上，单击该按钮后，我注册了一个 Javascript，如下所示：

```
 ClientScript.RegisterStartupScript(this.GetType(), Guid.NewGuid().ToString(), "<script language=JavaScript>window.location.href('GenerateExcel.aspx');</script>"); 
```

并且在页面的页面加载中，`GenerateExcel.aspx`我编写了用于导出上面发布的文件的代码。这段代码对我有用，当用户点击“Export To Excel”按钮时，windows file Open , save & close popup is apeear 并且用户可以保存或打开文件，但我的问题是在该文件打开弹出窗口之后我想要刷新主页。我曾尝试注册 javascript，但`Response.End`没有任何效果。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:31:22.177

您已经更改了主窗口的位置，`window.location.href`然后 HTTP 响应具有 Excel MIME 类型。主窗口不再有可使用的 HTTP 响应并且无法刷新。

相反，您应该打开一个全新的窗口并使用它来发送 Excel 文件响应。然后，您仍然可以刷新主窗口。

你的脚本应该是这样的；

```
<script> 
  window.open('GenerateExcel.aspx', 'Export To Excel');
  window.location.href=window.location.href;
</script> 
```

避免打开窗口的另一种方法是[使用 JavaScript 发出 HTTP 请求，](https://stackoverflow.com/questions/247483/http-get-request-in-javascript)但这需要 jQuery 以获得可靠的跨浏览器解决方案。

# c++ - 如果在重载的输出运算符函数中使用 cout 怎么办？

> ID：10481256
> 
> 赞同：0
> 
> 时间：2012-05-07T11:26:47.297
> 
> 标签：c++, operator-overloading, cout

我有以下代码，其中包含重载输出运算符：

```
class Student 
{
public:
    string name;
    int age;
    Student():name("abc"), age(20){}
    friend ostream& operator<<(ostream&, const Student&);
};
ostream& operator<<(ostream& os, const Student& s)
{
    os << s.name; // Line 1
    return os;
} 
```

我想知道如果我改成`Line 1`这个有什么区别：`cout << s.name`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:28:03.330

然后`operator <<`会宣传它可以将学生的姓名输出到任何流，但忽略其参数并始终输出到标准输出。作为一个类比，它类似于写作

```
int multiplyByTwo(int number) {
    return 4;
} 
```

可以看出，这绝对是个问题。如果你真的想总是返回 4，那么函数应该是

```
int multiplyTwoByTwo() {
    return 4;
} 
```

当然，你不能`operator <<`只接受一个论点，因为它是一个二元运算符，所以这就是类比失败的地方，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:27:44.527

它不会调用`operator <<`on `os`，而是 on `cout`。`cout`也是一个`ostream`，但不是唯一的。

例如，如果你想输出到一个文件，你会有一个`fstream`. 你写

```
fstream fs;
Student s;
fs << s; 
```

输出不会打印到文件中，而是打印到`cout`，这不是您想要的。

这就像说，“你可以输出一个学生到任何`ostream`你想要的，它仍然会被打印到控制台”。

# java - Spring-mvc 不会将我的请求参数绑定到 int

> ID：10481257
> 
> 赞同：5
> 
> 时间：2012-05-07T11:26:56.977
> 
> 标签：java, spring, spring-mvc

我有这个带有参数的表格`year`和`name`：

```
/register?year=&name=test 
```

我的课看起来像这样：

```
public class Organizer {
   private String name;
   private int year; 
```

我的控制器将这两个参数映射到我的类`Organizer`

```
@RequestMapping("/register")
public String register(@Valid Organizer organizer, BindingResult errors... 
```

问题是将参数**year**绑定到 int。春天给了我错误

> 无法将类型“java.lang.String”的属性值转换为属性“year”所需的类型“int”；嵌套异常是 java.lang.IllegalArgumentException：

我想出了如何添加自己的自定义属性编辑器，但`getValue()`似乎从未被调用

```
@InitBinder
public void binder(WebDataBinder binder) {
    binder.registerCustomEditor(int.class, new CustomIntEditor());
}

public class CustomIntEditor extends PropertyEditorSupport { 
```

我认为当 year 参数不是值（-> catch 异常）时，我可以返回该`int`值`0``int``Integer.parseInt()`

```
@Override
public void setAsText(String text) throws IllegalArgumentException {

    //Some parsing and error handling
    setValue((int)0);
} 
```

我希望能够：

*   将字段设置`year`为`int`值`0`

*   创建自定义错误消息：`organizer.year.invalid`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:51:33.250

更改`int`为`Integer`。这是一个自动装箱问题。由于`year`为空，因此无法将其转换为原始值（因为您尚未指定默认值）。

然后您可以对其进行注释`@NotNull`以获得所需的验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:47:53.070

首先，尝试在调试模式下运行您的应用程序并找出它抛出错误的确切行并提供确切的详细信息
我认为您的数据类型一定有问题（表格声明）如果您使用的是休眠，请检查您的休眠实体类.

并检查年份属性的数据类型。

# html - 嵌入式视频和下拉菜单覆盖问题

> ID：10481258
> 
> 赞同：0
> 
> 时间：2012-05-07T11:26:57.007
> 
> 标签：html, css, z-index

我有一个页面（http://www.stc.ac.uk/content/school-leavers-6th-form/hairdressing），下拉菜单下方有一个嵌入视频，悬停在关于我们的下拉菜单后面IE 中的视频，但在 safair、firefox 和 chrome 中排在首位。我在菜单的下拉菜单上有一个 z-index，在嵌入的内容上有一个 wmode="transparent" ，它在 IE 中仍然落后。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:41:26.837

仅具有 Z-index 值是不够的。尝试添加位置：相对；到菜单的容器，看看是否有帮助。

# jquery - 谷歌的标签不要关注链接。让jquery请求找到方法

> ID：10481262
> 
> 赞同：0
> 
> 时间：2012-05-07T11:27:21.213
> 
> 标签：jquery, asp.net-mvc-2, seo, fancybox

我对我们的网站进行了一些 SEO 更改，现在我在使用 Fancyapps fancybox iframe 时遇到了一些问题。我当前的链接看起来像这样

`<a href="/Home/Action/Parameter" class="fancybox fancybox.iframe">Text</a>`

谷歌将跟踪并索引此链接/站点，这并不好。`#`我可以通过在开头放一个这样的来避免这种`href`情况

`<a href="#/Home/Action/Parameter" class="fancybox fancybox.iframe">Text</a>`

然后问题就变成了找不到动作/方法。那么我怎样才能让 fancybox.iframe 调用忽略`#`，或者问题是我可以吗？

如果有人想编辑我的标题，请做，我只是无法总结得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:42:52.207

采用

```
<a href="/Home/Action/Parameter" class="fancybox fancybox.iframe" rel="nofollow">Text</a> 
```

然后删除主题标签。请参阅[http://support.google.com/webmasters/bin/answer.py?hl=da&answer=96569](http://support.google.com/webmasters/bin/answer.py?hl=da&answer=96569)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:44:33.273

将`rel="nofollow"`属性添加到您的链接以防止 Google 关注它们。这是一种标准的、众所周知的方法，可以防止您的 SEO 汁*流到*链接的站点。

```
<a href="google.com" rel="nofollow">To Google!</a> 
```

# asp.net - 符合 508 节的 Gridview

> ID：10481265
> 
> 赞同：1
> 
> 时间：2012-05-07T11:27:24.500
> 
> 标签：asp.net, visual-studio-2008, section508, wcag

是否有可能让 Gridview 第 508 节兼容涵盖 g 点和 h 点？

第 508 节链接[http://www.access-board.gov/sec508/guide/1194.22.htm](http://www.access-board.gov/sec508/guide/1194.22.htm) ASP.Net 第 508 节合规链接[http://www.patuee.com/web/ASPX_Accessibility.html#t7](http://www.patuee.com/web/ASPX_Accessibility.html#t7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:52:43.633

GridView 的问题在于表格是自动生成的，因此转换为 ListView 会付出努力；然后，您可以在 ListView 模板中以任何您想要的方式显示表格标记。

为了让 GridView 执行此操作，您必须创建一个新的自定义控件 GridView，它继承自开箱即用的控件。然后您可以自定义新控件的表格渲染输出。那里有许多自定义 GridViews 的例子:)

根据微软的说法，可访问性可以通过 GridView 来实现：

[http://msdn.microsoft.com/en-us/library/ms228004.aspx#guideline_13__separating_structure_from_presentation](http://msdn.microsoft.com/en-us/library/ms228004.aspx#guideline_13__separating_structure_from_presentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:39:31.237

经过一番研究和谷歌搜索，我找到了解决方案。我在下面写下代码并在 RowDataBound 事件中调用它。

私人无效 AddGridHeadersAttr（对象发送者，GridViewRowEventArgs e，GridView 网格）

```
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        for (int col = 0; col <= e.Row.Cells.Count - 1; col++)
        {
            e.Row.Cells[col].Attributes.Add("id", "ColumnHeader_" + Grid.Columns[col].HeaderText);
        }
    }
    else if (e.Row.RowType == DataControlRowType.DataRow)
    {
        for (int col = 0; col <= e.Row.Cells.Count - 1; col++)
        {
            Object oCell = e.Row.Cells[col];
            if (oCell is DataControlFieldHeaderCell)
            {
                ((DataControlFieldHeaderCell)oCell).Attributes.Add("id", "RowHeader_" + Grid.Columns[col].HeaderText + e.Row.RowIndex.ToString());//Grid.DataKeys[e.Row.RowIndex].Value.ToString());
            }
            else
            {
                ((DataControlFieldCell)oCell).Attributes.Add("headers", "ColumnHeader_" + Grid.Columns[col].HeaderText + " RowHeader_" + Grid.Columns[col].HeaderText + e.Row.RowIndex.ToString()); // Grid.DataKeys[e.Row.RowIndex].Value.ToString());
            }
        }
    }
} 
```

希望这对将来的人有所帮助。

# wcf - Web 服务互操作性 - 数据合同中的用户 iList 是否错误？

> ID：10481266
> 
> 赞同：0
> 
> 时间：2012-05-07T11:27:24.643
> 
> 标签：wcf, web-services

我需要接受各种配置文件作为 Web 服务的输入。

```
[DataContract]
public class ProfileRequest
{
    [DataMember]
    public virtual string address { get; set; }

    [DataMember]
    public virtual string type { get; set; }

    [DataMember]
    public virtual string speed { get; set; }
} 
```

我正在考虑使用这样的配置文件的 IList：

```
[OperationContract]
IList<ProfileRequest> profiles 
```

我突然想到...也许 IList 并不存在于所有语言中，因此公开这样的数据合同会被认为是不好的做法吗？我应该只坚持简单的类型，以便非 WCF 服务更容易使用该服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:32:39.750

这可以。例如以下 c# 合同：

```
[DataMember]
    public List<CompositeType> StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    } 
```

将在 wsdl 中显示为这样的 xml 架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.datacontract.org/2004/07/" elementFormDefault="qualified" targetNamespace="http://schemas.datacontract.org/2004/07/">
<xs:complexType name="CompositeType">
<xs:sequence>
<xs:element minOccurs="0" name="BoolValue" type="xs:boolean"/>
<xs:element minOccurs="0" name="StringValue" nillable="true" type="tns:ArrayOfCompositeType"/>
</xs:sequence>
</xs:complexType>
<xs:element name="CompositeType" nillable="true" type="tns:CompositeType"/>
<xs:complexType name="ArrayOfCompositeType">
<xs:sequence>
<xs:element minOccurs="0" maxOccurs="unbounded" name="CompositeType" nillable="true" type="tns:CompositeType"/>
</xs:sequence>
</xs:complexType>
<xs:element name="ArrayOfCompositeType" nillable="true" type="tns:ArrayOfCompositeType"/>
</xs:schema> 
```

所以这只是消费者的数组。当然，如果您的目标是与特定客户端堆栈的互操作性，您应该主动验证互操作性。

# drupal - 从父节点获取字段内容（Drupal）

> ID：10481269
> 
> 赞同：0
> 
> 时间：2012-05-07T11:27:34.717
> 
> 标签：drupal, drupal-7, drupal-nodes

目前，管理员可以将背景图片从管理员上传到每个页面。所以基本上页面节点类型有一个名为 background_image 的字段，然后我使用 CSS 将该图像放置到 div 的背景图像中。

我还有第二种内容类型，称为 car_article。这些页面列在这些页面节点之一下。所以基本上站点地图看起来像这样：

```
Cars (node type = page, parent)
-Audi (node type = car_article, child page)
-BMW (node type = car_article, child page)
-Chevrolet (node type = car_article, child page) 
```

现在我需要做的是从父页面获取背景图像，在这种情况下是汽车页面。那么如何从父页面获取字段内容。如果页面是 car_article 节点类型，这将需要始终工作，它会自动尝试从父页面加载背景图像。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:40:20.997

我想你可以通过使用[http://drupal.org/project/menu_node_views](http://drupal.org/project/menu_node_views)来实现。

但这可能是矫枉过正...

使用[http://drupal.org/project/menu_node](http://drupal.org/project/menu_node)，您可以知道父菜单指向的女巫。

对于两个级别来说，在更多的 node_load 上运行并不是很大的问题。困难的是，如果你想让它递归并避免加载每个节点，直到你找到一个带有图像的节点..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T10:05:18.023

我面临着类似的问题，这就是我如何进入该领域，但我认为这相当复杂。

```
$menuParent = menu_get_active_trail();
reset($menuParent); //point to first
next($menuParent);  //jump next, to skip 'home'
$firstItem = current($menuParent);
$path = drupal_get_normal_path($firstItem['link_path']);
$node = menu_get_object('node', 1, $path);
$field = field_view_field('node', $node, 'background_image');
$sectionBgUrl = file_create_url($field[0]['#item']['uri']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:30:34.713

只是一个建议，但您可以尝试使用 arg() 访问顶部节点

例如，如果您的页面是
**/cars/bmw**
并且节点是结构化的
**/node/care_node/bmw_node**

您可以使用`arg(1)`获取汽车节点的 id，然后将其加载到变量中

例如

```
$parentNode = node_load(arg(1)); 
```

现在您可以使用`parentNode`来访问父节点。

如果您的网站更复杂并且您有很多级别，您可以做一些数学运算来找到当前的 arg 然后 -1

# android - location.getSpeed() 适用于三星 Galaxy Nexus，但不适用于 Galaxy S

> ID：10481270
> 
> 赞同：1
> 
> 时间：2012-05-07T11:27:34.753
> 
> 标签：android, performance, navigation, gps, location

我想在我的应用程序中显示当前速度。在 Galaxy Nexus 上它工作正常，但 Galaxy S 只显示 0.0 我使用以下代码来获得速度。

```
location.getSpeed() 
```

从我知道的文档中：

> **public float getSpeed ()** 自：API 级别 1 返回设备在地面上的速度，以米/秒为单位。如果 hasSpeed() 为 false，则 >返回 0.0f。

在 Galaxy S 上 hasSpeed 是假的吗？但是该功能应该从 API 级别 1 开始工作，所以我不明白问题可能出在哪里。

谁能帮忙？

谢谢

编辑：

```
if(location.hasSpeed())
{
    speed = (location.getSpeed()*3.6);
}
else
{
    if(lastLoc!=null)
        {
            double time=(System.currentTimeMillis()-lastUpdate)*1000;
            speed=(location.distanceTo(lastLoc)/time)*3.6;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:00:00.447

好的，看起来我的 Galaxy s 上的 gps 有问题。尝试了市场上的其他gps车速表，它也无法显示任何速度。

我还发现三星 Galaxy S 上的 GPS 真的很垃圾。太好了，我将不得不忍受它=）

# java - 如何在列表字段中单击时添加复选框

> ID：10481271
> 
> 赞同：1
> 
> 时间：2012-05-07T11:27:35.030
> 
> 标签：java, blackberry

我是黑莓开发的新手。当我单击任何列表项时，我想添加一个复选框或勾选标记。当我尝试运行时，会出现 104 错误。

```
public final class ListDemoScreen extends MainScreen {
    private Vector _listElements;

    private int LEFT_OFFSET = 10;
    private int TOP_OFFSET = 10;
    ListField list;
    private ListField _checkList;
    private MenuItem _toggleItem;

    public ListDemoScreen() {
        super(Manager.NO_VERTICAL_SCROLL);
        // Set the displayed title of the screen
        setTitle("List Demo 1");
        add(new LabelField("Fruits List", LabelField.FIELD_HCENTER));
        add(new SeparatorField());

        _listElements = new Vector();
        add(new SeparatorField());
        list = new ListField();
        ListCallback _callback = new ListCallback(this);

        list.setCallback(_callback);
        list.setSize(4);
        int index = list.getSelectedIndex();

        add(list);

        createField();

    }

    protected void createField() {
        String itemOne = "Apple";
        String itemTwo = "Blackberry";
        String itemthree = "Grapes";
        String itemfour = "Banana";
        _listElements.addElement(itemOne);

        _listElements.addElement(itemTwo);
        _listElements.addElement(itemthree);
        _listElements.addElement(itemfour);
        reloadList();

    }

    private void reloadList() {
        list.setSize(_listElements.size());
    }

    public boolean invokeAction(int action) {
        switch (action) {
        case ACTION_INVOKE: // Trackball click.
            int index = list.getSelectedIndex();
            ChecklistData data = (ChecklistData) _listElements.elementAt(index);
            data.toggleChecked();
            _listElements.setElementAt(data, index);
            list.invalidate(index);
            return true; // We've consumed the event.
        }
        return super.invokeAction(action);

    }

    class ListCallback implements ListFieldCallback {
        ListDemoScreen listDemoScreen;

        public ListCallback(ListDemoScreen listDemoScreen)
        {
            this.listDemoScreen=listDemoScreen;

        }

        public void drawListRow(ListField list, Graphics g, int index, int y,
                int w) {

            String text = (String) _listElements.elementAt(index);
            g.drawText(text, 60, y + 5, 0, w);
            text = (String) _listElements.elementAt(index);
            Bitmap bitm = Bitmap.getBitmapResource("bullet_arrow.png");
            int xpos = LEFT_OFFSET;
            int ypos = TOP_OFFSET + y;
            w = bitm.getWidth();
            int h = bitm.getHeight();

            g.drawBitmap(xpos, ypos, w, h, bitm, 0, 0);

            xpos = w + 20;

            ChecklistData currentRow = (ChecklistData)this.get(list, index);

            StringBuffer rowString = new StringBuffer();

            // If it is checked draw the String prefixed with a checked box,
            // prefix an unchecked box if it is not.
            if (currentRow.isChecked()) {
                rowString.append(Characters.BALLOT_BOX_WITH_CHECK);
            } else {
                rowString.append(Characters.BALLOT_BOX);
            }

            // Append a couple spaces and the row's text.
            rowString.append(Characters.SPACE);
            rowString.append(Characters.SPACE);
            rowString.append(currentRow.getStringVal());

            // Draw the text.
            g.drawText(rowString.toString(), 0, y, 0, w);

        }

        public Object get(ListField list, int index) {
            return _listElements.elementAt(index);
        }

        public int indexOfList(ListField list, String prefix, int string) {
            return _listElements.indexOf(prefix, string);
        }

        public int getPreferredWidth(ListField list) {
            return Display.getWidth();
        }

    }

    private class ChecklistData {
        private String _stringVal;
        private boolean _checked;

        /*
         * ChecklistData() { _stringVal = ""; _checked = false; }
         */

        ChecklistData(String stringVal, boolean checked) {
            _stringVal = stringVal;
            _checked = checked;
        }

        // Get/set methods.
        private String getStringVal() {
            return _stringVal;
        }

        private boolean isChecked() {
            return _checked;
        }

        /*
         * private void setStringVal(String stringVal) { _stringVal = stringVal;
         * }
         * 
         * private void setChecked(boolean checked) { _checked = checked; }
         */

        // Toggle the checked status.
        private void toggleChecked() {
            _checked = !_checked;
        }
    }

    /* (non-Javadoc)
     * @see net.rim.device.api.ui.container.MainScreen#makeMenu(net.rim.device.api.ui.component.Menu, int)
     */
    protected void makeMenu(Menu menu, int instance) {

        // TODO Auto-generated method stub
        Field focus = UiApplication.getUiApplication().getActiveScreen().getLeafFieldWithFocus();
        if(focus == _checkList) 
        {
            //The _checkList ListField instance has focus.
            //Add the _toggleItem MenuItem.
            menu.add(_toggleItem);
        }

        super.makeMenu(menu, instance);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:07:36.920

`ClassCastException`如果您仔细调试过代码，您可以很容易地找到。您在方法中添加了`String`对象，并尝试将对象转换为方法中的对象：**`_listElements`** `Vector``createField()``String``ChecklistData``invokeAction(int action)`

```
ChecklistData data = (ChecklistData) _listElements.elementAt(index); 
```

您应该在向量中插入`ChecklistData`对象，`_listElements`然后显然不能将这些元素转换为方法`String`中的 s `drawListRow()`：

```
String text = (String) _listElements.elementAt(index); 
```

* * *

我已经**修复**了你的**代码**，见**下文**（不知道你想用**`bullet_arrow.png`**...

```
import java.util.Vector;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Characters;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.MenuItem;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.component.Menu;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.MainScreen;

public final class ListDemoScreen extends MainScreen {

    private Vector _listElements;

    ListField list;
    private ListField _checkList;
    private MenuItem _toggleItem;

    public ListDemoScreen() {
        super(Manager.NO_VERTICAL_SCROLL);
        // Set the displayed title of the screen
        setTitle("List Demo 1");
        add(new LabelField("Fruits List", LabelField.FIELD_HCENTER));
        add(new SeparatorField());

        _listElements = new Vector();
        add(new SeparatorField());
        list = new ListField();
        ListCallback _callback = new ListCallback(this);

        list.setCallback(_callback);
        list.setSize(4);
        int index = list.getSelectedIndex();

        add(list);

        createField();

    }

    protected void createField() {
//      String itemOne = "Apple";
//      String itemTwo = "Blackberry";
//      String itemthree = "Grapes";
//      String itemfour = "Banana";
        ChecklistData itemOneCheckList = new ChecklistData("Apple", false);
        ChecklistData itemTwoCheckList = new ChecklistData("Blackberry", false);
        ChecklistData itemThreeCheckList = new ChecklistData("Grapes", false);
        ChecklistData itemFourCheckList = new ChecklistData("Banana", false);

        _listElements.addElement(itemOneCheckList);
        _listElements.addElement(itemTwoCheckList);
        _listElements.addElement(itemThreeCheckList);
        _listElements.addElement(itemFourCheckList);
        reloadList();

    }

    private void reloadList() {
        list.setSize(_listElements.size());
    }

    public boolean invokeAction(int action) {
        switch (action) {
        case ACTION_INVOKE: // Trackball click.
            int index = list.getSelectedIndex();
            ChecklistData data = (ChecklistData) _listElements.elementAt(index);
            data.toggleChecked();
            _listElements.setElementAt(data, index);
            list.invalidate(index);
            return true; // We've consumed the event.
        }
        return super.invokeAction(action);

    }

    class ListCallback implements ListFieldCallback {
        ListDemoScreen listDemoScreen;

        public ListCallback(ListDemoScreen listDemoScreen) {
            this.listDemoScreen = listDemoScreen;

        }

        public void drawListRow(ListField list, Graphics g, int index, int y,
                int w) {

            ChecklistData checkListData = (ChecklistData) _listElements.elementAt(index);
            String text = checkListData.getStringVal();
//          g.drawText(text, 60, y + 5, 0, w);
//          Bitmap bitm = null;
//          if(checkListData.isChecked()) {
//              bitm = Bitmap.getBitmapResource("bullet_arrow1.png");
//          } else {
//              bitm = Bitmap.getBitmapResource("bullet_arrow2.png");
//          }

//          w = bitm.getWidth();
//          int h = bitm.getHeight();
//          
//          int xpos = 2;
//          int heightDifference = ( list.getRowHeight(index) - h );
//          int ypos = y + ( heightDifference > -1 ? heightDifference : 0 ) / 2;
//
//          g.drawBitmap( xpos, ypos, w, h, bitm, 0, 0 );

//          xpos = w + 20;

            ChecklistData currentRow = (ChecklistData) this.get(list, index);

            StringBuffer rowString = new StringBuffer();

            // If it is checked draw the String prefixed with a checked box,
            // prefix an unchecked box if it is not.
            if (currentRow.isChecked()) {
                rowString.append(Characters.BALLOT_BOX_WITH_CHECK);
            } else {
                rowString.append(Characters.BALLOT_BOX);
            }

            // Append a couple spaces and the row's text.
            rowString.append(Characters.SPACE);
            rowString.append(Characters.SPACE);
            rowString.append(currentRow.getStringVal());

            // Draw the text.
            g.drawText(rowString.toString(), 0, y, 0, -1);

        }

        public Object get(ListField list, int index) {
            return _listElements.elementAt(index);
        }

        public int indexOfList(ListField list, String prefix, int string) {
            return _listElements.indexOf(prefix, string);
        }

        public int getPreferredWidth(ListField list) {
            return Display.getWidth();
        }

    }

    private class ChecklistData {
        private String _stringVal;
        private boolean _checked;

        /*
         * ChecklistData() { _stringVal = ""; _checked = false; }
         */

        ChecklistData(String stringVal, boolean checked) {
            _stringVal = stringVal;
            _checked = checked;
        }

        // Get/set methods.
        private String getStringVal() {
            return _stringVal;
        }

        private boolean isChecked() {
            return _checked;
        }

        // Toggle the checked status.
        private void toggleChecked() {
            _checked = !_checked;
        }

    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * net.rim.device.api.ui.container.MainScreen#makeMenu(net.rim.device.api
     * .ui.component.Menu, int)
     */
    protected void makeMenu(Menu menu, int instance) {

        // TODO Auto-generated method stub
        Field focus = UiApplication.getUiApplication().getActiveScreen()
                .getLeafFieldWithFocus();
        if (focus == _checkList) {
            // The _checkList ListField instance has focus.
            // Add the _toggleItem MenuItem.
            menu.add(_toggleItem);
        }

        super.makeMenu(menu, instance);
    }

} 
```

希望它会有所帮助。

# amazon-ec2 - 外部 API 的静态 IP

> ID：10481272
> 
> 赞同：4
> 
> 时间：2012-05-07T11:27:40.473
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk

我需要为我的网站使用外部 Web API，他们问我请求来自的 IP 地址是什么。关键是我的 Web 应用程序在更多 Amazon EC2 实例上进行了扩展，因为它是使用配置了自动扩展的 Elastic Beanstalk 部署的。

解决问题的最佳解决方案是什么？

我能想到的最好的事情是设置一个微型实例，将一个弹性 IP 与其关联，并将其用作 HTTP 代理。有更好的解决方案吗？

我确定我不是唯一一个遇到这个问题的人，但我在 stackoverflow 上找不到像我这样的另一个问题。许多电子商务网站通常使用外部支付系统，要求请求来自一个或多个特定 IP 地址...

谢谢你。

**更新**- 感谢@David，我确实使用 Apache 模块 mod_proxy 设置了 HTTP 代理。如何配置它以便只有我的 EC2 实例可以访问它？我的 EC2 实例是在 Auto Scaling 时动态创建的。

```
ProxyRequests On                                                                                                                                                                   

<Proxy *>                                                                                                                                                                          
 Order deny,allow                                                                                                                                                                  
 Deny from all                                                                                                                                                                     
 Allow from ???                                                                                                                                               
</Proxy> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:50:17.837

只需使用（转发）代理，Apache2 就可以做到这一点。默认情况下，请求将来自代理的 IP 地址（如果服务正在查看“REMOTE_ADDR”）。一些代理添加“HTTP_X_FORWARD_FOR”来指示请求发起的客户端的真实 IP，但我怀疑您的服务会检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:20:13.333

设置虚拟私有云 (VPC) 以将实例 IP 隔离到 /24 网络，然后使用 AWS 安全组来隔离对您的 EC2 实例的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:52:11.920

我会使用 Nginx 作为反向代理而不是 Apache，因为 Nginx 的占用空间更小，并且事件发生，因此可以处理更多的流量。有关更多详细信息，请参阅此博客文章： [http ://readystate4.com/2012/07/08/nginx-the-non-blocking-model-and-why-apache-sucks/](http://readystate4.com/2012/07/08/nginx-the-non-blocking-model-and-why-apache-sucks/)

# android - 填满整个屏幕的半透明Activity

> ID：10481277
> 
> 赞同：18
> 
> 时间：2012-05-07T11:27:54.950
> 
> 标签：android, android-activity, transparency, android-theme

我想要一个活动 (2) 与另一个活动 (1) 相比具有半透明外观，并在屏幕顶​​部对齐 (4)。

![在此处输入图像描述](../Images/7b9615b71d096cd8db6d491f857c3cd8.png)

我尝试将这些主题分配给活动编号 2：

```
<style name="Theme.CustomDialog" parent="android:style/Theme.Dialog">
    <item name="android:windowBackground">@android:color/black</item>
</style>  

<style name="CustomTheme">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

但结果始终是 3。

如果我`<item name="android:windowIsFloating">false</item>`在`CustomTheme`结果中设置为 2。

谁能告诉我如何获得4？谢谢！

**更新：**这是我的活动 2 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#0000">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:background="#FFFFFF">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Menu" android:layout_centerHorizontal="true"/>

    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T15:32:30.280

最后，这个主题得到了类似图像 4 的结果：

```
 <style name="Theme.CustomTranslucent" parent="android:style/Theme.Translucent">
        <item name="android:backgroundDimEnabled">true</item>
        <item name="android:backgroundDimAmount">0.5</item>
        <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
        <item name="android:background">@android:color/transparent</item>
 </style> 
```

在我的活动 2 布局中，我可以设置`android:background="@android:color/transparent"`或不设置任何值以使其工作。

感谢 MikeIsrael 和 Veer 的帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-29T06:47:02.013

我已经阅读了其他解决方案，但这是我的解决方案：

**样式.xml**

```
<resources>
<style name="mytransparent.windowNoTitle" parent="android:Theme.Holo.Light">
    <item name="android:windowNoTitle">true</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation</item>
</style>
<style name="mytransparent.windowTitle" parent="android:Theme.Holo.Light">
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowAnimationStyle">@android:style/Animation</item>
</style> 
```

**AndroidManifest.xml**

```
<activity
    android:name=".LoginActivity"
    android:theme="@style/mytransparent.windowTitle"
    android:configChanges="orientation"
    android:label="@string/title_activity_login"
    android:screenOrientation="portrait" ></activity> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-24T13:11:01.133

如果你使用`AppCompatActivity`，那么你应该使用作为父级，`Theme.AppCompat`否则应用程序可能会挂起或崩溃并出现错误（`java.lang.RuntimeException: Unable to start activity ComponentInfo ... Caused by: java.lang.IllegalStateException: You need to use a Theme.AppCompat theme (or descendant) with this activity.)`.

把它放在你的风格中：

```
<style name="MyTheme" parent="AppTheme.NoActionBar">
   <item name="android:windowIsTranslucent">true</item>
   <item name="android:windowBackground">@android:color/transparent</item>
   <item name="android:backgroundDimEnabled">false</item>
   <item name="android:windowNoTitle">true</item>
   <item name="android:windowActionBar">false</item>
   <item name="android:windowFullscreen">false</item>
   <item name="android:windowContentOverlay">@null</item>
</style> 
```

然后将 MyTheme 添加到您的活动清单中： `<activity android:name=".MyActivity" android:theme="@style/MyTheme">`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-07T11:36:39.113

首先有透明主题活动：

```
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

将透明主题分配给 Manifest 中的活动：

```
 <activity android:name=".MyActivity"
              android:label="@string/app_name"
              android:theme="@style/Theme.Transparent"/> 
```

根据您的要求创建布局，并将活动的内容视图设置为该布局。

尝试以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:layout_alignParentTop="true">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Menu" android:layout_centerHorizontal="true"/>

    </RelativeLayout>

</RelativeLayout> 
```

希望它是有帮助的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T11:39:35.330

我不确定如何通过 xml 执行此操作，但这应该以编程方式工作，尝试将其添加到您的活动中（可能添加到活动的主视图中）。

```
//grab layout params
WindowManager.LayoutParams lp = this.getWindow().getAttributes();

//remove the dim effect
lp.dimAmount = 0; 
```

# python - 维护列表的索引

> ID：10481278
> 
> 赞同：1
> 
> 时间：2012-05-07T11:27:55.403
> 
> 标签：python, database, sorting, indexing, python-2.7

我应该如何实现对集合中项目的快速查找？

```
class Person(object):
    __all__ = dict()

    def __init__(self, _id, name, age):
        self._id = _id
        self.name = name
        self.age = age
        self.__class__.__all__[_id] = self 
```

假设我希望得到五个最年长的人。如果`len(Person.__all__)`很大，并且我需要经常执行此操作，那么最佳做法是什么？目前我的代码运行大约需要 4 小时，我什至还没有输入整个数据集。

我目前的想法是我可以使用数据库来维护索引，但我的感觉是这会比将所有对象都保存在 ram 中要慢。（我可以轻松地将每个对象放入 ram 中）。

*或者*，我可以在 Python 中拥有某种基于自动排序列表的索引。因此，当我需要查找某个年龄的人时，我会查询该列表，查找 ID，然后用于`Person.__all__`获取对象本身。

什么是最好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:08:25.080

您可以使用 sqlite 创建内存数据库。如果需要，以后可以很容易地将数据库移动到磁盘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:03:41.260

字典是哈希表的 Python 版本，它保证（平均）快速查找。它*不能*保证快速“找到最少的*k*个元素”——事实上，这会很慢，因为您需要查看字典中的每个人。

相反，您希望将人员存储在*排序*的数据结构中，从那时起，您只需查看前（或可能是最后）五个条目即可找到最年长的人。

Python 没有这样的内置数据结构，但是有一个使用良好且经过良好测试的包[`blist`](http://pypi.python.org/pypi/blist)，它提供了`sorteddict`. 您想使用其中之一。

# linq-to-sql - LINQ to Entities 无法识别方法 'Int32 ToInt32(Int32)' 方法，并且此方法无法转换为存储表达式

> ID：10481279
> 
> 赞同：0
> 
> 时间：2012-05-07T11:27:59.607
> 
> 标签：linq-to-sql

```
for (int i = 0; i < list.Count; i++)
{
    var doesrequestExist = cxt.Friends.FirstOrDefault(u => (u.User_Id == incID) &&
         (u.Friend_UserId == (list.ElementAt(i).userid)) && 
         (u.Request_Status == 0 || u.Request_Status == 1));
    if (doesrequestExist != null)
    {
    } 
```

我在“list.ElementAt(i).userid”处收到错误错误：LINQ to Entities 无法识别方法 'Int32 ToInt32(Int32)' 方法，并且此方法无法转换为存储表达式。

编辑：

通过删除上述查询中的 convert.toint32 得到：LINQ to Entities 无法识别方法 'FriendsList ElementAt[FriendsList](System.Collections.Generic.IEnumerable`1[FR_Network.FR_Network+FriendsList], Int32)' 方法，以及这个方法不能翻译成存储表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:33:04.843

从您的 linq 中排除 Convert.ToInt32(list.ElementAt(i).userid)) 。

```
for (int i = 0; i < list.Count; i++)
{
    int friendId = Convert.ToInt32(list.ElementAt(i).userid);
    var doesrequestExist = cxt.Friends.FirstOrDefault(u => (u.User_Id == incID) &&
                                                           (u.Friend_UserId == friendId &&
                                                           (u.Request_Status == 0 || u.Request_Status == 1));

    if (doesrequestExist != null)
    {
    }
} 
```

# java - android获取adMob高度

> ID：10481285
> 
> 赞同：0
> 
> 时间：2012-05-07T11:28:31.487
> 
> 标签：java, android, eclipse, admob

为了适应adMob出现时的所有布局，我试图获得它的高度但没有成功，高度总是= 0！如何到达？谢谢你。

```
 /** Called when an ad is received. */
      @Override
      public void onReceiveAd(Ad ad) 
      {  
        adView.setVisibility(View.VISIBLE);

        final android.view.ViewTreeObserver obs = adView.getViewTreeObserver();

        obs.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
            @Override
            public boolean onPreDraw () {

                int height = adView.getHeight();

                return true;
           }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:36:08.583

如果您过早调用 adView.getHeight()，该函数会返回 0，这是完全正常的，因为显示广告需要一些时间。

如果您实现 AdListener 然后覆盖

```
 public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1);
    public void onReceiveAd(Ad arg0); 
```

函数，在这些函数中，您应该可以毫无问题地获得广告的高度

# objective-c - 在 iPhone 上的用户之间共享信息的最佳方式是什么？

> ID：10481292
> 
> 赞同：0
> 
> 时间：2012-05-07T11:28:54.983
> 
> 标签：objective-c, ios, xcode4.2

我最近制作了我的第一个 iPhone 应用程序，并计划制作另一个。对于我的下一个应用程序，我希望用户能够轻松地找到其他 iPhone 用户，然后在应用程序上共享信息，这些信息将是一组数据或类似的东西。

我可以使用网络服务器与每个用户进行通信，但我觉得在用户之间直接共享所有内容会更快。有没有办法做到这一点？

我还需要确保信息安全，用户应该只能在相互批准的用户之间共享/获取信息。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:14:16.943

如果你想使用客户端-服务器服务来做到这一点，你应该使用[Restkit 框架](http://restkit.org/)。它为 iPhone 实现了 RestFull，您可以在服务器端使用 php 框架（如 symphony）创建 Web 服务。这两个框架将使解决方案在服务的每一端都很容易。

为了安全连接 https 是最简单的方法。对于许可问题，您应该在服务器中对其进行编码。RestFull 请求应该返回用户有权查看的信息，可以使用用户/密码、令牌来识别用户，或者如果您想通过设备识别它们，您可以使用[openUDID](https://github.com/ylechelle/OpenUDID)。

我希望这能给你一些解决问题的线索！

# charts - 如何设置 Silverlight 图表标记的样式？

> ID：10481293
> 
> 赞同：0
> 
> 时间：2012-05-07T11:28:54.987
> 
> 标签：charts, wpftoolkit, silverlight-toolkit, toolkit

我正在使用 Silverlight 4 Toolkit 图表控件（以及 WPF 图表控件）。

我的目标是拥有一个任意符号的标记 - 例如，我需要一个 X 标记样式。

它可以是图像，也可以是字符，我不介意。

知道如何实现这一目标吗？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:19:02.210

我找到了答案。

这是任意曲线的样式。

（DVC 是我的 Datavisualistion Charting 工具包的 xmlns）。

在我的 Grid.Resources 中：

```
<Style x:Key="Squiggle" TargetType="DVC:ScatterDataPoint">
            <Setter Property="Width" Value="18" />
            <Setter Property="Height" Value="18" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate  TargetType="DVC:ScatterDataPoint">
                        <Canvas>
                            <Path Stroke="Black" StrokeThickness="1"
                                Data="M 1,20 C 10,30 40,30 40,20 H 30" />
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

波浪形标记只是一个示例。您可以绘制任何您喜欢的形状： [形状和绘图](http://msdn.microsoft.com/en-us/library/cc189073%28v=vs.95%29.aspx)

然后在 Chart.Series 中：

```
<DVC:ScatterSeries Title="Squiggles" DataPointStyle="{StaticResource Squiggle}"
        IndependentValueBinding="{Binding Path=Key}"
        DependentValueBinding="{Binding Path=Value}">
            </DVC:ScatterSeries> 
```

# android - 如何将图像从 Android 发送到用 C++ 编写的服务器

> ID：10481296
> 
> 赞同：0
> 
> 时间：2012-05-07T11:28:58.093
> 
> 标签：android, c++, sockets

我想将图片从 Android 发送到用 C++ 编写的服务器。我希望用socket来发送图片，这样就不用担心C++和Java的区别了。但是，Android中的图像通常存储为Bitmap，这是Android中定义的一个类，而在C++中，该类是不存在的。所以我想知道如果我想以这种方式发送图像该怎么办。所以我来这里寻求你的帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:58:43.557

这也是我用来发送参数和发布图片的内容！

```
public void send_data() throws IOException
    {

                HttpURLConnection connection = null;
                DataOutputStream outputStream = null;
                String lineEnd = "\r\n";
                String twoHyphens = "---";
                String boundary =  "ABCADA";

                String urlServer = "http://yourwebsrvr.com";
                Log.w("DHA", urlServer);
                URL url = null;
                try {
                    url = new URL(urlServer);
                } catch (MalformedURLException e1) {

                    Log.w("DHA", "PROTOCOL EXCEPTION");

                    e1.printStackTrace();
                }
                if (url != null)
                {   
                    Log.w("DHA", "Merge aici");
                    try {
                        connection = (HttpURLConnection) url.openConnection();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    if (connection != null)
                    {
                        Log.w("DHA", "Si aici mere!");
                        connection.setDoInput(true);
                        connection.setDoOutput(true);
                        connection.setUseCaches(false);
                        try {
                            connection.setRequestMethod("POST");
                        } catch (ProtocolException e) {

                            Log.w("DHA", "PROTOCOL EXCEPTION");

                            e.printStackTrace();
                            return;
                        }
                        connection.setRequestProperty("Host", "yourhost.com");
                        connection.setRequestProperty("Connection", "Keep-Alive");
                        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary=ABCADA");
                        try {
                            outputStream = new DataOutputStream(connection.getOutputStream());
                        } catch (IOException e) {

                            Log.w("DHA", "PROTOCOL EXCEPTION");

                            e.printStackTrace();

                        }
                        try {
                            Log.w("DHA", "Val is + " + String.valueOf(bts.size()));
                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"Lat\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes("0" + lineEnd);

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"IMEI\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes(getImei() + lineEnd);

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"Lon\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes("0" + lineEnd);

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"comment\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes("Incarcata la sincronizare" + lineEnd); 

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"locatie_id\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            SharedPreferences pref = getSharedPreferences("data",MODE_WORLD_WRITEABLE);
                            String data_db = pref.getString(md5hash, "0");
                            Log.d("DHA", "Poze e aici " + data_db);
                            outputStream.writeBytes(data_db + lineEnd); 

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"hash\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes(md5hash + lineEnd); 

                            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                            outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + "PICT0000" +"\"" + lineEnd);
                            outputStream.writeBytes(lineEnd);
                            outputStream.write(bts.toByteArray());
                            outputStream.writeBytes(lineEnd);
                            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
                            Log.w("DHA", "Incep trimiterea pozei fraierului!");

                            outputStream.flush();
                            outputStream.close();
                            Log.w("DHA", "response" + String.valueOf(connection.getResponseCode()));

                        } catch (IOException e) {

                            Log.w("DHA", "PROTOCOL EXCEPTION");

                            e.printStackTrace();
                        }

            }
                }

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:33:27.693

将图像作为 .jpg 或 .png 等文件发送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:38:44.350

我假设服务器是一个自定义系统，因为您提到它是用 C++ 编写的。在这种情况下，您可以通过每个 tcp/ip 的套接字简单地发送大小 (x,y) 和 rgba 数据（每像素 32 位）。

您所要做的就是打开从客户端（android）到服务器（c++）的 tcp/ip 连接，从位图中发送大小和数据并在服务器端重建它并保存或以任何您想要的方式处理它.

您可以使用“getPixels”获取android位图的rgba数据：

[http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

您也可以根据发送它的系统进行设置。如果您使用 Windows 系统，您可以使用“setdibbits”进行设置

[http://msdn.microsoft.com/en-us/library/dd162973%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd162973%28v=vs.85%29.aspx)

# asp.net-mvc-3 - ASP.NET MVC 3，部分视图和 Count()

> ID：10481298
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:29:03.233
> 
> 标签：asp.net-mvc-3, razor, partial-views

这是我的代码

```
@model QA.posts
@{var c = Model.Count(o => o.parent == Model.id);} 
```

为什么该`Count()`方法在该区域不可用？我在常规视图中使用它。

**编辑：** 这是我的错误，我已经`IEnumerable<QA.posts>`并且想要将每个项目发送到`partial views`foreach 语句中。部分视图只获得一个类并且`count()`不起作用是正常的。我将找到解决方案以单独发送计数以查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:31:58.997

您需要导入 System.Linq

```
@using System.Linq
@model QA.posts
@{var c = Model.Count(o => o.parent == Model.id);} 
```

我的猜测是这`Model`是一种`Enumerable`数据类型，这意味着要使用[`Count`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)，您必须导入`System.Linq`命名空间。

编辑：

根据您的评论，您可能需要更改模型声明：

```
@model IList<QA.posts> // Or whatever you want the Model to be list-wise. 
```

这样，Model 现在是 Posts 列表，这意味着您现在可以使用`Count`而无需导入 System.Linq。

如果这仍然没有帮助，那么您能否显示您的 QA.posts 模型类的代码？

# ios - 远程服务器上的请求总是失败

> ID：10481301
> 
> 赞同：0
> 
> 时间：2012-05-07T11:29:22.243
> 
> 标签：ios, web-services, asihttprequest

我正在为我的 iOS 应用程序使用 ASIHTTPRequest。我必须通过 PHP API 连接到数据库（复制如下）。这是我使用 ASIHTTPRequest 执行请求的函数：

```
-(void)startRequest {
    NSURL *url = [NSURL URLWithString:PHP_SCRIPT];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];
    [request setStringEncoding:NSUTF8StringEncoding];
    [request setTimeOutSeconds:50];
    [request setPostValue:@"1" forKey:@"getWines"];
    [request startAsynchronous];
} 
```

当我使用 MAMP 运行到本地托管的 API 时，一切正常。但是当我通过远程服务器执行此操作时，我的请求总是失败，没有消息。

这是我用 PHP 编写的 API，托管在我的远程服务器上：

```
<?php
 function connectToDB(){
     $connexion = mysqli_connect(HOST, USER, PASSWORD, DATABASE);
     return $connexion;
 }

 function getWines($connexion) {
     $req = "SELECT name, category FROM table WHERE prize_50  != 0 OR
                                                            prize_75  != 0 OR
                                                            prize_150 != 0 OR
                                                            prize_300 != 0";

     $res = mysqli_query($connexion, $req);

     echo '[';

     while($current = mysqli_fetch_assoc($res)) {
        extract($current);
        echo json_encode($current);
     }

     echo ']';

 }

 function getWine($connexion) {

     $name = $_REQUEST["name"];
     $req = "SELECT * FROM table WHERE name='".$name."'";

     $res = mysqli_query($connexion, $req);
     echo "[";
     echo json_encode(mysqli_fetch_assoc($res));
     echo "]";
 }

 $connexion = connectToDB();
 if($connexion) { 
    echo "connected"; 

    if(isset($_REQUEST["getWine"])) {
        getWine($connexion);
    }

    else if(isset($_REQUEST["getWines"])) {
        getWines($connexion);
    }

 }

 else {
     echo "unable to connect to the database";
 }

?> 
```

我不知道发生了什么，以及为什么它在 localHost 而不是我的远程服务器上工作。如果我将 API 与[http://myURL/iOS/objc.php?getWines=1](http://myURL/iOS/objc.php?getWines=1)之类的浏览器一起使用，那就完美了！

感谢您的帮助。

PS我已经找到了一篇关于对代码进行一些更改的帖子（将@sythesis更改为手写的getter / setter，但仍然无法正常工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:02:46.943

您的 API 似乎期待 GET 请求而不是 POST。使用包含整个 URL 的 NSString 创建您的 URL，并且不要设置任何 POST 属性。

此外，您可能想开始检查 ASI 的替代品。它目前尚未开发，可能永远不会符合 ARC。我切换到 AFNetworking 并喜欢它。

# java - Java 将编程编译的类添加到当前类的可用引用列表中

> ID：10481307
> 
> 赞同：1
> 
> 时间：2012-05-07T11:29:50.783
> 
> 标签：java

[从流中读取对象时](https://stackoverflow.com/questions/10479481/java-classnotfoundexception-when-reading-object-from-a-stream)作为 Java ClassNotFoundException 的扩展

我添加了服务器接收 .java 文件的功能，它可以编译它。但是，我仍然得到相同的 ClassNotFoundException。如何让服务器看到并使用它编译的类从 objectInputStream 中读取对象？

在服务器端读取和编译 .java 的代码：

```
 private void doNewWorkUnitDefinition(Object object) {
    NewWorkUnitDefinition newWorkUnitDefinition = (NewWorkUnitDefinition)object;
    byte[] bytes = newWorkUnitDefinition.getBytes();
    String name = newWorkUnitDefinition.getName();

    if (isClient) 
        client.gotNewWorkUnitDefinition(bytes, name);
    else {
        String executionPath = System.getProperty("user.dir");
        File file = new File(executionPath, name);
        try {
            FileOutputStream fileOut = new FileOutputStream(file);
            fileOut.write(bytes);
            fileOut.close();
            System.out.println("Just wrote a file to: " + file.getAbsolutePath());

            JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
            compiler.run(System.in, System.out, System.err, file.getAbsolutePath());

            ClassLoader cl_old = Thread.currentThread().getContextClassLoader();
            ClassLoader cl_new = new URLClassLoader(new URL[] { file
                    .getParentFile().toURI().toURL() }, cl_old);
            System.out.println("WorkUnitFile: " + file.getAbsolutePath());
            Class compiledClass = cl_new.loadClass(file.getName()
                    .replace(".java", ""));
            this.

            sendConfirmDefinitionReceipt();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:52:22.143

我过去所做的是通过调用当前类加载器的defineClass方法来加载类（使用反射）

[http://sourceforge.net/projects/essence/files/Essence%20Java%20Config.%20Files/Essence%20JCF%201.02/](http://sourceforge.net/projects/essence/files/Essence%20Java%20Config.%20Files/Essence%20JCF%201.02/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:14:04.080

这个页面正是我想要的：

[http://jimlife.wordpress.com/2007/12/19/java-adding-new-classpath-at-runtime/](http://jimlife.wordpress.com/2007/12/19/java-adding-new-classpath-at-runtime/)

# log4j - log4j 第二个记录器错误

> ID：10481310
> 
> 赞同：0
> 
> 时间：2012-05-07T11:29:56.793
> 
> 标签：log4j

为什么我的第二个记录器出错但第一个没有？

错误：

```
log4j:WARN No appenders could be found for logger (StatQueryDobadoCategory).
log4j:WARN Please initialize the log4j system properly. 
```

这是 log4j.properties：

```
log4j.category.ThingsPerMinuteGraphCategory=DEBUG, ThingsPerMinuteGraphAppender
log4j.appender.ThingsPerMinuteGraphAppender=org.apache.log4j.RollingFileAppender
log4j.appender.ThingsPerMinuteGraphAppender.File=./logs/ThingsPerMinuteGraph.log
log4j.appender.ThingsPerMinuteGraphAppender.MaxFileSize=20MB
log4j.appender.ThingsPerMinuteGraphAppender.MaxBackupIndex=5
log4j.appender.ThingsPerMinuteGraphAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.ThingsPerMinuteGraphAppender.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} - %m
log4j.additivity.ThingsPerMinuteGraphCategory=false

log4j.category.StatQueryDobadoCategory=DEBUG, StatQueryDobadoAppender
log4j.appender.StatQueryDobadoAppender=org.apache.log4j.RollingFileAppender
log4j.appender.StatQueryDobadoAppender.File=./logs/StatQueryDobadoCategory.log
log4j.appender.StatQueryDobadoAppender.MaxFileSize=20MB
log4j.appender.StatQueryDobadoAppender.MaxBackupIndex=5
log4j.appender.StatQueryDobadoAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.StatQueryDobadoAppender.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} - %m
log4j.additivity.StatQueryDobadoCategory=false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:58:29.257

库似乎无法访问 log4j.properties。

1.  如果您仅将 log4j 用于 java 项目，请将属性文件放入源文件夹

2.  如果你在 j2ee 项目中使用 log4j，比如 spring+hibernate，将 log4j.properties 放入 WEB-INF 文件夹，并在项目的属性文件中设置属性文件的路径

    ```
     `<context-param>`
    `<param-name>`log4jConfigLocation`</param-name>`
    `<param-value>`/WEB-INF/log4j.properties`</param-value>`
    `</context-param>` 
    ```

# java - JPQL 中等效的 SQL ANY 运算符是什么？

> ID：10481314
> 
> 赞同：3
> 
> 时间：2012-05-07T11:30:22.320
> 
> 标签：java, sql, oracle, hibernate, jpa

给定以下为 a 烹制的 Oracle sql 查询`PreparedStatement`：

```
SELECT *
FROM my_table
WHERE field1 = 'foo'
and field2 =ANY (substr( ? , 1, 2) || '00000000',
                 substr( ? , 1, 4) || '000000',
                 substr( ? , 1, 6) || '0000',
                 substr( ? , 1, 8) || '00',
                 ?
                ) 
```

我想翻译成 JPQL 查询。阅读 JPQL 文档，`substr`会变成`substring` 并`ANY`保持原样。在 JPQL`ANY`中需要一个子查询。

如何将列表更改为子查询？或者我应该使用`IN`运算符还是应该生成一个包含一堆 OR 条件的 JPQL 字符串？

**甲骨文 10gR2**
**Java 5**
**JPA 2**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T11:57:54.460

考虑到这`= ANY(...)`相当于`IN (...)`在 SQL 中，您可以安全地使用 IN。

实际上，`IN`谓词是根据谓词定义的`ANY`。[SQL 1992](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)标准的摘录：

> 8.4 <在谓词中>
> 
> [...]
> 
> ```
> <in predicate> ::=
>     <row value constructor>
>       [ NOT ] IN <in predicate value> 
> ```
> 
> [...]
> 
> 2) 令RVC 为<row value constructor>，令IPV 为<in predicate value>。
> 
> [...]
> 
> 4) 表达式
> 
> ```
>  RVC IN IPV 
> ```
> 
> 相当于
> 
> ```
>  RVC = ANY IPV 
> ```

再一次，`ANY`/`SOME` `<quantified comparison predicate>`运算符的定义方式类似于一堆`OR`连接的谓词。因此答案是：您可以同时使用`IN`或`OR`连接谓词。

**注意：**虽然这个答案解释了它们在 SQL 中的情况，但我很确定类似的东西也适用于 JPQL。

# javascript - jQuery更改元素内元素的属性

> ID：10481315
> 
> 赞同：3
> 
> 时间：2012-05-07T11:30:32.867
> 
> 标签：javascript, jquery, element

我这里有个问题，我无法在我的表中设置我想要的属性。

```
<tr id="ROW1" class="duplicate">
  <td>
    <textarea class="cl_text" cols="20" name="descriptions1"></textarea>
  </td>
  <td>
    <input class="cl_form" size="10" value="" name="expectedDate1">
  </td>
  <td>
    <input class="cl_form" size="10" value="" name="slxInput1">
  </td>
  ...
  ...
</tr> 
```

我可以更改 TD 元素的属性，但不能更改其中的属性。我需要更改 TD 元素中的所有这些元素，更改第一个和最后一个元素很容易，但其他元素呢？如果可能的话，我只是想要一个循环来改变#ROW1 下的所有这些属性

已编辑：我添加了不起作用的代码；

```
$( "#ROW" + Num ).each(function(index) {
    temp = $(this).children(":first").attr("name");
    $(this).children(":first").attr("name", temp+Num);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:36:09.480

要更改表格行中所有输入和文本区域的属性：

```
$('#ROW1 textarea, #ROW1 input').attr('someattr', 'value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:36:31.233

```
$("#ROW1 td").each(function(){
   $.each($(this).children(
$(this).attr(//put some attribute)
));
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:32:39.417

要获取 的所有子元素`#ROW1`：

```
$('#ROW1').find('*') 
```

# artificial-intelligence - 人工智能和专家系统

> ID：10481316
> 
> 赞同：2
> 
> 时间：2012-05-07T11:30:33.077
> 
> 标签：artificial-intelligence, decision-tree, inference, expert-system

我从生成这样的决策树开始构建我的专家系统：决策树： http: [//obrazki.elektroda.pl/6125718100_1336340563.png](http://obrazki.elektroda.pl/6125718100_1336340563.png)

我用PC-Shell搭建专家系统，主要代码如下：

```
result=e IF a>20, b=yes;
result=f IF a>20, b=no;
result=c IF a==20;
result=g IF a<20, d="is dry"; 
```

ETC...

那么人工智能在哪里呢？它不是像基于文本的游戏一样工作，您可以在其中回答并最终得到结果吗？在这个例子中将如何进行推理（向前和向后）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:08:21.287

是的，这就是 AI，Good Old Fashion AI ( [GOFAI](http://en.wikipedia.org/wiki/GOFAI) )。更具体地说，是一个知识库，可以充当专家系统；[关于专家系统](http://en.wikipedia.org/wiki/Expert_system)的 Wikipedia 文章包含一个类似的示例：

*   如果它是活的 那么它就是会死的
*   IF 他的年龄 = 已知 THEN 他的出生年份 = 今天的日期 - 他的年龄
*   如果不确定细菌的身份并且细菌是革兰氏阳性并且生物体的形态是“棒状”并且细菌是好氧的，那么细菌是肠杆菌科类型的可能性很大（0.8）

它的工作方式类似于基于文本的游戏，推理是从“a”、“b”和“d”的值中减去“结果”的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T08:44:55.103

在我看来，您似乎混淆了决策树作为[决策支持工具](https://en.wikipedia.org/wiki/Decision_tree)和[机器学习](https://en.wikipedia.org/wiki/Decision_tree_learning)中使用的工具。混淆可能来自这样一个事实，即两者实际上是相同的，但使用方式不同。

正如@jb-krohn 在他的回答中所说，在您的示例中，您确实将决策树构建为专家系统。也就是说，您自己定义决策树的分支。虽然这属于 AI 的广泛类别，但它实际上与当代机器学习中使用决策树的方式非常不同。

在机器学习中，决策树的分支留给算法根据数据集来确定。也就是说，算法自己构建规则，旨在将其结构与给定的训练数据集相匹配。

有许多后续考虑因素，例如[过度拟合](https://en.wikipedia.org/wiki/Overfitting)，这可能会帮助您了解定义自己的决策树与让算法猜测它们的优缺点。为了详细说明通过前向链接推理实现的专家系统，参考它们包含一阶逻辑谓词的能力可能会有所帮助，这进一步增加了它们的表达能力，如[本答案](https://stackoverflow.com/a/6309631/1827854)所述。

最后，前向和后向链接推理，您需要使用可修改的知识库。通常，这不存在于域和范围是静态的决策树中。然而，在专家系统中，规则的执行实际上会改变您用作输入数据的谓词。因此，从决策树的角度来看，这为您的算法引入了某种类型的递归，决策树的简单结构排除了这种递归。

# java - 反转包含另一个嵌套地图的地图

> ID：10481317
> 
> 赞同：0
> 
> 时间：2012-05-07T11:30:34.103
> 
> 标签：java, map, nested, reverse

我想知道我怎样才能得到一张我的反转地图的新地图？我的实际地图如下所示：

```
centralMap = new HashMap<String, Map<String, String>>();
nestedMap = new HashMap<String, String>(); 
```

nestedMap 只是在 put-method 中创建的。要放置一个元素，我在 main 方法中使用以下内容：

```
TrueStringMap2D testmap = new TrueStringMap;
testmap.put("Mickey Mouse","Mathematics","1.0");
testmap.put("Mickey Mous","Physics","1.3");
testmap.put("Minnie","Chemistry","2.3");
...... 
```

现在我想通过我命名为“flipped()”的方法来反转地图我想将nestedMap的键更改为centralMap的键，反之亦然..所以每个“主题”（如数学、物理, ..) 会有学生和成绩的嵌套地图.. 我怎么能这样做？

我不允许在我的 TrueString2D 中创建类。我只需要复制一个列表中的 centralMap 的键，以及另一个列表中的nestedMap 的键，然后创建一个新的映射 HashMap>(); （与我的 centralMap 相同）并在新创建的地图（例如 newCentralMap）中复制nestedMap 的旧键列表作为键，作为值，我将在 newNestedMap 中复制 centralMap 的旧键和值newNestedMap 与旧地图上的相同.. 但我不知道该怎么做，如果我可以在地图中复制列表：S

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:53:52.303

使用不同的东西来存储您的物品：

*   Guava 有一个[Table](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)类，可以实现您要求的功能
*   如果您需要更大的灵活性，请考虑使用内存数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:54:26.647

我不会为此使用地图。我只会使用一个`Collection<PersonGrade>`.

```
class PersonGrade {
   String name;
   String subject;
   Double grade;
} 
```

然后，当您要生成有关“所有科目的米老鼠的所有等级”的报告时，请遍历集合并获取符合该标准的对象。我知道当您处理大量数据时这可能会有点慢。但我真的会试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:05:07.943

你为什么不使用`HashMap<String, Map<String, String>>()`而不是`TrueStringMap2D`

```
import java.util.HashMap;
import java.util.Map;

public class Flip {

    public static Map <String, Map<String, String>> flip(Map <String, Map<String, String>> map){
        Map <String, Map<String, String>> result = new HashMap<String, Map<String, String>>();
        for (String key : map.keySet()){
            for (String key2 : map.get(key).keySet()){
                if (!result.containsKey(key2)){
                    result.put(key2, new HashMap<String, String>());
                }

                result.get(key2).put(key, map.get(key).get(key2));
            }
        }

        return result;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        Map <String, Map<String, String>> map = new HashMap<String, Map<String, String>>();

        map.put("Mickey", new HashMap<String, String>());
        map.get("Mickey").put("Physics", "1.1");
        map.get("Mickey").put("Maths", "1.2");

        map.put("Minnie", new HashMap<String, String>());
        map.get("Minnie").put("Physics", "1.1");
        map.get("Minnie").put("Chemistry", "1.3");

        System.out.println(map);

        System.out.println(flip(map));
    }

} 
```

输出

```
{Minnie={Physics=1.1, Chemistry=1.3}, Mickey={Maths=1.2, Physics=1.1}}
{Maths={Mickey=1.2}, Physics={Minnie=1.1, Mickey=1.1}, Chemistry={Minnie=1.3}} 
```

# c++ - C++ 程序的 HTML UI

> ID：10481320
> 
> 赞同：1
> 
> 时间：2012-05-07T11:30:52.827
> 
> 标签：c++, html, user-interface, mobile, executable

我正在用 C++ 编写一个用于移动设备的程序，其中包括核心，但对于 GUI，我想使用 HTML。

我希望发生的是：

*   我从文件浏览器打开 HTML 文件，据说服务器端操作将由二进制文件与同一目录中的 HTML 文件一起完成。
*   **我运行程序（移动平台建议的任何方式。点击图标等），HTML GUI以某种方式**弹出。

我的问题是第二种情况下的**“不知何故”**，或者（在第一种情况下）像某种 JavaScript 能力（如果有的话）这样的方法可以执行程序，因为它是**stdin**并接收它是**stdout**。

重要的平台是Android。

编辑：我必须提到我已经在 PC 上完成了这项工作，运行 apache 并将核心可执行文件作为 CGI 运行，但对于典型的 PC/移动用户来说，这不是最直接的方法，我希望假定的移动用户能够只需轻按一下即可执行此程序，使用 OBEX 发送，等等。

谢谢你。

# c - 字符串常量存储

> ID：10481326
> 
> 赞同：0
> 
> 时间：2012-05-07T11:31:12.257
> 
> 标签：c

下面的两个函数之间是否有任何区别不是在两种情况下都返回局部变量的地址，而是使用 f1() fn 返回正确的值 4 而不是 f2()。同样在第三种情况下，我是否正确地认为字符串常量没有存储在堆栈中，所以当我们返回指针时它会正常工作。那么字符串常量存储在哪里？

```
int* f1()
{
  int* a=(int*)4;
  return a;
}

int* f2()
{
  int a=4;
  return &a;
}

char* f3()
{
  char* p="abcd";
  return p;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:36:07.887

它们之间存在差异：

1.  第一个返回`int *`值为 4 的 an，注意它不是指向值为 4 的变量，而是指向地址 4。
2.  第二个返回一个指向一个包含 4 的变量的指针，但实际上，这个指针是无效的，因为它指向一个已经返回函数的局部变量，任何使用它都会导致未定义的行为。
3.  第三个返回一个指向 char 的指针（根据定义），但实际上这是一个指向字符串文字的指针（通过实现）。它的问题在于，作为函数 return`char *`而不是`const char *`，人们可能会尝试修改返回缓冲区，这将再次导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:37:32.420

*   `f1`将值 4 转换为地址，实际上指向内存中的某个位置。
*   `f2`返回局部变量的地址。取消引用此指针将是未定义的行为。
*   `f3`是指向字符串文字的指针。这是一个有效的指针，因为字符串文字的生命周期与程序生命周期（*静态存储持续时间*）相同。该文字的确切存储位置由实现定义。操作字符串文字的内容是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:55:12.490

*   在`f1`您已明确指定地址`4`并返回相同而不是该地址的值。
*   局部变量是在堆栈上分配的，因此在`f2`您返回的位置`&a`，您返回的是堆栈上的地址，而不是`4`内存中该地址处的地址。取消引用此地址会导致未定义的行为，因为函数会从堆栈中清除。
*   字符串字面量分配在只读数据部分并注意两者之间的区别

    `char arr[]="abcd";`和`char *ptr="abcd";`

    第一个是字符数组，分配在堆栈上，而第二个是指向字符串字面量的指针（字面量不是指针），分配在只读数据段上。

PS：我在这里假设 GCC/x86。

# iphone - 创建 iPhone 分发证书时出错？

> ID：10481327
> 
> 赞同：0
> 
> 时间：2012-05-07T11:31:12.357
> 
> 标签：iphone, app-store, distribution

我已经成功地创建了配置证书并在我的设备上测试了该应用程序，但是在上传到应用程序商店时，我遇到了一些与分发配置文件相关的错误，错误显示“未找到有效的签名身份”。

![在此处输入图像描述](../Images/bb192f9362587cfda480bae3be9722a0.png)在添加分发证书时，我在组织者上收到此错误？有人知道解决方案吗？我尝试重新创建证书，但错误仍然存​​在？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:34:10.417

当您提出证书签名请求时，您制作了一个密钥，该密钥被删除，因为您得到了这个。

要克服，请创建一个新密钥，新证书，然后再次创建新配置文件，bt 确保首先从您的组织者中删除与该配置文件匹配的所有配置文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:41:01.757

您似乎没有在此 mac 系统上安装用于移动设备的证书文件。要么您在不同的 mac 机器上，要么没有分发证书。如果您在不同的 mac 机器上，那么您应该从以前的 mac（安装证书的位置）的钥匙串访问中以 .p12 格式导出证书，或者如果您没有分发证书，则创建分发证书。

如果您遇到任何问题，请在评论中发表。

# java - 将字节值与 postgresql 中的 bytea 列进行比较

> ID：10481329
> 
> 赞同：5
> 
> 时间：2012-05-07T11:31:14.797
> 
> 标签：java, postgresql, servlets

我使用 PostgreSQL 作为我的数据库和 java servlet 与 PostgreSQL 通信。我的应用程序要求我从数据库中获取数据以获取匹配的输入文件。所有文件都存储在数据库中的 bytea 列中。这是我的代码：

```
String checkdb="select * from key where certificate = '"+c+"';";
Statement stcheck=conn.createStatement(
    ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
ResultSet newrs=stcheck.executeQuery(checkdb);
newrs.last();
int rowcount=newrs.getRow();
if(rowcount!=0)
throw new ArithmeticException(); 
```

其中`certificate`是包含 bytea 数据的列的名称，`c`（上传的）是`byte[]`表单中的证书。所以在这里我检查上传的证书是否已经存在于数据库中。如果它存在，那么我将抛出异常。

但问题是多次上传同一个证书并没有抛出异常，就好像两个证书不同一样。

我是否正确比较了字节值。我应该怎么做才能纠正这个？
**编辑**
我尝试将证书列设置为主键。但是证书仍然被插入到数据库中。这怎么可能发生？由于某种原因，内部比较也失败了。
**编辑**
我尝试检索一个文件并将其转换为字符串：

```
InputStream input13 = retrs.getBinaryStream("certificate");
       ByteArrayOutputStream output13 = new ByteArrayOutputStream();
         byte buf[]=new byte[1024];
            int len;
    IOUtils.copy(input13, output13);
    input13.close();
    byte[] retvalue=output13.toByteArray();
    String s1=new String(retvalue);

String s2=new String(c);
System.out.println("in--------------"+s2);

System.out.println("out----------------"+s1); 
```

retrs 是包含刚刚存储的证书的结果集。c 是 byte[] 中的输入证书。我得到的输出是：

```
19:05:43,156 INFO  [STDOUT] in-------------------BEGIN CERTIFICATE-----
MIICIjCCAYsCAQMwDQYJKoZIhvcNAQEFBQAwYTELMAkGA1UEBhMCYXMxCzAJBgNV
BAgMAmFzMQswCQYDVQQHDAJhczELMAkGA1UECgwCYXMxCzAJBgNVBAsMAmFzMQsw
CQYDVQQDDAJjYTERMA8GCSqGSIb3DQEJARYCYXMwHhcNMTIwNDEwMDY0ODQ3WhcN
MTMwNDEwMDY0ODQ3WjBSMQswCQYDVQQGEwJhczELMAkGA1UECBMCYXMxCzAJBgNV
BAcTAmFzMQswCQYDVQQKEwJhczELMAkGA1UECxMCYXMxDzANBgNVBAMTBmNsaWVu
dDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAsfJq9TVgTLqz84nuWpDm+dvI
do2HIWoHkmEPNowK4xn1+qWUPCy30aASWI92YMtE6njtQGyZBYij0iTAxldDktqd
bMdpKAONDlSv71rn+fZPuyenbBFYZexybNVsRMFzTD/F/hiPPXT7E1j9CrgIMxVz
ScZeNATh/dPLwuNQ0dsCAwEAATANBgkqhkiG9w0BAQUFAAOBgQDDUyeIWlKaMMkM
8VRGuDJyKFC8miQfmul6zE4+6RTswHKjcUoje2vhTQgV+GBfqx8ai+ziujx8CeyR
eJWcb1G8gg+LMUNDcTOlXTeBG9L2c/gMOEu7BEjtpojSYmFyEvJEQ5Yep44HKZZb
FSPFVNxGiXBhNxtKQdAu6/smQ/eBNg==
-----END CERTIFICATE-----
19:05:43,156 INFO  [STDOUT] out----------------[B@17f8b39 
```

是我的检索方式错误。因为`[B@17f8b39`看起来像一个内存位置或类似的东西。
**答案**
正如@jarnbjo 所说，必须牢记一件事。当您在 postgressql 中使用字节数组时，是否`retieving or inserting`仅使用`setBytes()`.Else 仅插入 byte[] 的内存位置（java 中的哈希码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:12:05.760

显然，您没有根据所看到的结果正确地进行比较。您需要进行一些调试以找出问题所在。我建议按照以下方式进行简单的测试：

*   从一个干净的数据库开始
*   从客户端获取证书
*   将其插入数据库
*   立即再次读回（它应该是唯一的） - 将您插入的数据与您读回的数据进行比较。他们应该是一样的。如果它们不相同，请找出原因
*   一旦可行，扩展测试用例以运行与您问题中的查询类似的查询。如果返回零记录，找出原因。

在弄清楚为什么存在差异方面，您可能会发现从一个简单的测试用例开始会有所帮助，在该测试用例中插入一个简单的字节数组 - 例如由单个字节组成的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:05:38.170

使用 PreparedStatement：

```
PreparedStatement pstat = conn.prepareStatement(
      "select * from key where certificate = ?");
pstat.setBytes(1, c);
ResultSet newrs = pstat.executeQuery(); 
```

当然，您在插入数据时也应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:16:08.057

我建议您生成文件的校验和并存储在数据库中，并根据校验和而不是文件的字节检查文件内容

```
table key{
    id int,
    certificate blob,
    checksum varchar(32)
} 
```

并使用以下方法生成校验和`byte[] buffer`

```
public String getCheckSum(byte[] buffer) {
    StringBuilder builder = new StringBuilder();
    try {
        MessageDigest complete;
        complete = MessageDigest.getInstance("MD5");
        byte[] rawCheckSum = complete.digest(buffer);
        for(byte b: rawCheckSum) {
            builder.append(Integer.toString( ( b & 0xff ) + 0x100, 16).substring( 1 ));
        }
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    }
    return builder.toString();
} 
```

最后，

```
String checkdb="select * from key where checksum = '" + getCheckSum(c) + "';"; 
```

**编辑：**

将字节插入数据库时​​，您应该使用：

```
String query = "INSERT INTO key (certificate) VALUES (?)";
PreparedStatement pstmt = connection.prepareStatement(query);
pstmt.setBytes(1, c); 
```

代替

```
String query = "INSERT INTO key (certificate) VALUES ('" + c + "')";
PreparedStatement pstmt = connection.prepareStatement(query);
pstmt.execute(); 
```

# apache-flex - 禁用 Flex 键盘事件

> ID：10481330
> 
> 赞同：1
> 
> 时间：2012-05-07T11:31:18.990
> 
> 标签：apache-flex, flex-builder-3

如何在 Flex Air 应用程序中禁用 alt+tab、window+d 键盘快捷键？

这样当我们的 Air 应用程序运行时，我们的应用程序就可以继续运行，并且用户无法打开任何其他应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:59:52.627

如果你控制电脑本身，似乎有一种方法：

*   [http://www.sevenforums.com/tutorials/5937-windows-key-shortcuts-enable-disable.html](http://www.sevenforums.com/tutorials/5937-windows-key-shortcuts-enable-disable.html)
*   [http://www.sevenforums.com/general-discussion/95652-disabling-alt-tab-other-keys.html#post828847](http://www.sevenforums.com/general-discussion/95652-disabling-alt-tab-other-keys.html#post828847)

# c# - 如何在 MetroUi 中创建本地服务器

> ID：10481331
> 
> 赞同：1
> 
> 时间：2012-05-07T11:31:24.300
> 
> 标签：c#, webserver, windows-runtime

我正在将 WPF 应用程序移植到 metroui。我需要一个本地 Web 服务器来运行我的一些功能，并且我在 WPF 中使用了 TinyServer (http://www.codeproject.com/Articles/8593/Building-a-Tiny-WebServer-in-less-than-500 -lines) 但是，我无法在 MetroUI 中运行它。有什么方法可以运行它，或者我可以在我的应用程序中创建本地 Web 服务器。（只需要get操作，不需要post操作）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:28:49.313

Win 商店应用程序不支持 HttpListener。但是用 StreamSocketListener 写一个简单的并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:45:07.447

[HttpListener](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/y7cbb2y2.aspx)是一个 API，您可以使用它来创建一个不到 500 行的网络服务器。你有什么理由不使用它？

# php - 如何管理空 IN sql 查询？

> ID：10481334
> 
> 赞同：10
> 
> 时间：2012-05-07T11:31:37.023
> 
> 标签：php, mysql, sql

```
$ids = array(1,2,3);
$in = implode(',',$ids);

$query = "SELECT * FROM user where user_id IN ($in) "; 
```

查询工作没有问题。但是什么时候`$ids`是空数组`$ids = array();`

我正确地得到了 sql 查询错误，因为`SELECT * FROM user where user_id IN ()`它不是有效的查询。

如何在不检查空数组的情况下避免这种情况，即无论如何都要运行查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T11:35:03.950

当 $in 为空时，您不应该运行查询。我想你需要的是这样的

```
$in = implode(',',$ids);
if($in) {
     $query = "SELECT * FROM user where user_id IN ($in) ";
 }
 else {
      //alternate scenario here
 } 
```

**编辑**

```
$in = implode("','",$ids); // generate like 1','2
$query = "SELECT * FROM user where user_id IN ('$in') "; //  if has  1','2 surrond it with quote make it IN('1','2') and if empty than IN('') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T11:40:22.597

最好的管理方法是：

```
$in = implode("','",$ids); // generate like 1','2
$query = "SELECT * FROM user where user_id IN ('$in') "; //  if has  1','2 surrond it with quote make it IN('1','2') and if empty than IN('') 
```

这使您免于 if/else 结构和其他一切

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T11:34:31.093

您可以在 $ids 字符串之前添加 0。毕竟，任何数据库中的 No ids 都将从 0 开始。

或者你可以这样做..

```
$sql = "SELECT * FROM user where ".($ids != ''? "user_id IN ($ids)" : " 1=1"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-21T11:20:36.233

我通常总是添加一个“无效”值，所以列表永远不会为空：

```
$in = implode(',', array_merge($ids, [-1])); // never empty! 
```

不需要额外的条件语句，保持代码相对干净。当然，“无效”值必须超出允许值的范围。（上面的例子假设 valid`$ids`总是积极的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T11:40:16.233

```
if((count($in)>0)
{
  //execute sql query code
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-07T14:40:02.293

我在不同的情况下做了几种不同类型的检查，以确保 sql 语句有效。在最基本的检查类型中，我确保变量不为空或为假

```
$in = implode(',',$ids);
if(!$ids) $in="0";
$query = "SELECT * FROM user WHERE user_id IN ($ids)"; 
```

通常，我使用一系列`db_*`函数来验证我传递给查询的输入，以便我可以处理更高级的使用检查`$ids`数组的来源

这是一些测试代码，在许多情况下对我都很有效。

```
function db_number_list($lst)
{
    if(!$lst) 
        return "0"; // if there are no passed in values , return a 0 
    if (!is_array($lst)) 
        $lst = explode (",",$lst);  //if a lst was passed in,  create an array
    foreach ($lst as $k=>$val)
    {
        if(!is_numeric(trim($val)))
            unset($lst[$k]);//remove non-numeric values;
    }
    if(!count($lst)) 
        return "0"; //if nothing is in the array after removing non-numeric values,  return 0
    return implode (",",$lst);
} 

$ids=array();
$query = "SELECT * FROM user WHERE user_id IN (".db_number_list($ids).")";
echo "ids:'".print_r($ids,true)."'<br>$query<hr>";

$ids="1,2,45,6,";
$query = "SELECT * FROM user WHERE user_id IN (".db_number_list($ids).")";
echo "ids:'".print_r($ids,true)."'<br>$query<hr>";

$ids=array(3,6,1,"drop table x", 4);
$query = "SELECT * FROM user WHERE user_id IN (".db_number_list($ids).")";
echo "ids:'".print_r($ids,true)."'<br>$query<hr>"; 
```

输出：

```
ids:'Array ( ) '
SELECT * FROM user WHERE user_id IN (0) 
```

* * *

```
ids:'1,2,45,6,'
SELECT * FROM user WHERE user_id IN (1,2,45,6) 
```

* * *

```
ids:'Array ( [0] => 3 [1] => 6 [2] => 1 [3] => drop table x [4] => 4 ) '
SELECT * FROM user WHERE user_id IN (3,6,1,4) 
```

* * *

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-07T11:35:42.223

对于给定的查询，您根本不应该运行它。

```
if ($ids) {
  // run your code
} else {
  return false; //or whatever.
} 
```

对于其他情况，它可能是其他答案中所示的条件连接

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-07T11:35:34.043

您应该设置条件连接：

```
if (count($ids) > 0)
{
    $in = implode(',',$ids);
    $query = "SELECT * FROM user WHERE user_id IN ($in)";
    // ....
} 
```

编辑：修正了我的误解。

# windows-xp - Paramiko 可执行文件：在 Windows XP 上找不到

> ID：10481335
> 
> 赞同：0
> 
> 时间：2012-05-07T11:31:37.583
> 
> 标签：windows-xp, paramiko

我使用 Paramiko 1.7.7.1 向 Windows XP 发送远程命令。

我尝试发送一个简单的命令，例如 ipconfig 并通过使用 recv 退出状态来获取标准错误。它返回我的客户端机器上的 IP 地址。但是，当我尝试调用安装在 Windows XP 上的可执行文件时，它会显示：-

myapp.exe：未找到

奇怪的是在我的服务器端，我可以发出 myapp.exe 并且可以毫无问题地调用可执行文件。顺便说一句，我已经为 Windows XP 上的 myapp.exe 正确设置了环境变量。

谁能帮我解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:26:23.337

要在 Windows 下使用 Paramiko 调用可执行文件，请尝试：

```
cmd /c executable 
```

# ruby-on-rails - 如何为我的 Rails 应用程序提供通用时间支持？

> ID：10481338
> 
> 赞同：2
> 
> 时间：2012-05-07T11:31:45.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime

我正在构建一个 Rails 应用程序，用户可以在其中发布他们知道的面试详细信息。表单有一个输入字段面试时间，即日期时间选择器。我想为这个应用程序提供普遍支持。

**实际问题：**

假设我在我的生产服务器中配置了 IST 时区。那么如果来自日本的用户选择了一个面试时间，它将在 IST 时区中解析。结果将是一个错误的面试时间。

显示正确的面试时间。

1.我需要从用户那里获取时区吗？（可能是一个选择框）

2.有没有其他选项可以自动检测时区？

谢谢各位:)

**如果有不清楚的地方，请在问题下方添加评论。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:49:15.113

我有一个类似的问题。我保留了默认的 rails 配置，因此所有时间都以 UTC 格式存储在数据库中，并且我使用了[ActiveSupport::TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)中的以下方法：

*   当我需要从表单中保存日期时，我曾经`local_to_utc`将日期从本地转换为 UTC：

    ```
    ActiveSupport::TimeZone[my_timezone].local_to_utc(date) 
    ```

*   当我需要显示数据库中的日期时，我使用了

    ```
    ActiveSupport::TimeZone[my_timezone].utc_to_local(date) 
    ```

这样，数据库中保存的所有日期都是 UTC 格式，但由用户在本地时间处理，每个用户的时间可能不同。您可以将时区存储在`User`级别（`string`数据库中的一个字段），和/或使用[选择助手](http://guides.rubyonrails.org/form_helpers.html#time-zone-and-country-select)来生成选择字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:12:56.243

Baldrick 的回答是正确的——您应该将时间存储在 UTC 中，并将每个用户的时区存储在用户记录中。

此外，用户通常希望看到的是*该地点的当地时间。*

为此，当您存储 UTC 时间时，还要存储创建事件的用户的时区。

所有这一切的棘手部分是 MySQL 和许多其他数据库不存储带有日期/时间的时区。因此，时区信息会丢失，除非您将其明确存储在不同的字段中。

因此，您的数据库中需要两个字段：

```
event_time_utc: Datetime, # UTC timezone for when the event happened
event_timezone: string # the timezone of where the event happened 
```

# php - 动态页脚链接 Magento

> ID：10481339
> 
> 赞同：1
> 
> 时间：2012-05-07T11:31:54.220
> 
> 标签：php, magento, hyperlink, content-management-system

嗨，我在 Magento 1.6.2.0 中有一个 magento 站点。我想根据我创建的类别设置页脚链接。我在“页脚 cms”中添加了一个链接

```
<li><a href="#">Living Room Furniture</a></li> 
```

如何使用类别 ID/名称放置链接（href）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:43:05.013

在 footer.phtml 中使用以下代码

```
 <?php $helper = $this->helper('catalog/category') ?>
    <?php foreach ($helper->getStoreCategories() as $_category): ?> 
    <a href="<?php echo Mage::getModel('catalog/category')->setData($_category->getData())->getUrl(); ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a>
    <?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:53:57.913

使用以下代码通过 CMS 调用模板文件。

```
{{block type="catalog/navigation" template="folder/filename.phtml"}} 
```

在该文件中，您可以编写代码来列出类别。

```
<?php $_helper = $this->helper('catalog/category') ?>
<?php foreach ($_helper->getStoreCategories() as $_category): ?> 
    <a href="<?php echo Mage::getModel('catalog/category')->setData($_category->getData())->getUrl(); ?>" title="<?php echo $_category->getName() ?>"><?php echo $_category->getName() ?></a>
<?php endforeach ?> 
```

它仅列出根类别下的主要类别

# ruby-on-rails - 添加 :onchange => "readURL(this)" 到 simple_form 上的输入文件

> ID：10481342
> 
> 赞同：9
> 
> 时间：2012-05-07T11:32:07.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, simple-form

我对此有疑问：

我想添加 `:onchange => "readURL(this)"`到我的：

```
<%= f.input :image, :as => :file, :onchange => "readURL(this)" %> 
```

我尝试过：

```
<%= f.input :image, :as => :file, :html => {:onchange =>
"readURL(this)"} %> 
```

但我看不到 `onchange="readURL(this)"`in html 代码。

我该如何解决这个问题？

再次感谢您：D。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-07T11:44:13.873

修复：

```
<%= f.input :image, :as => :file, :input_html => {:onchange => "readURL(this)"} %> 
```

感谢卡洛斯·安东尼奥·达席尔瓦。

[http://groups.google.com/group/plataformatec-simpleform/browse_thread/thread/6f2cdd83e2dbf51c](http://groups.google.com/group/plataformatec-simpleform/browse_thread/thread/6f2cdd83e2dbf51c)

# iphone - 如何在 xib 的 xml 文件的 NSRGB 标签中编码十六进制颜色？

> ID：10481344
> 
> 赞同：2
> 
> 时间：2012-05-07T11:32:37.870
> 
> 标签：iphone, ios, xib, nib

我的任务是使用其所有参数（例如背景颜色）动态创建 xib 文件。我通过创建 xml 内容然后编写 xib 文件来创建 xib 文件。我只能对其特定颜色进行编码，例如黑色 NSRGB 标签是 -

```
<object class="NSColor" key="IBUITextColor" id="1026485712">
    <int key="NSColorSpace">1</int>
    <bytes key="NSRGB">MCAwIDAAA</bytes>
</object> 
```

对于红色 -

```
<object class="NSColor" key="IBUITextColor">
    <int key="NSColorSpace">2</int>
    <bytes key="NSRGB">MC45MzcyNTQ5NjUzIDAgMC4yMDM5MjE1ODYzAA</bytes>
</object> 
```

我不知道如何将其他十六进制颜色代码 (#0000CD) 转换为 NSRGB (MC45MzcyNTQ5NjUzIDAgMC4yMDM5MjE1ODYzAA) 的编码颜色。我不知道为 NSRGB 颜色代码编码十六进制颜色的标准。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T17:39:58.260

我打赌你列出的“红色”是（239,0,52）或#EF0035。如果我是对的，我想我已经弄清楚了……

我正在使用 .NET 来执行此操作，但我认为您可以在 Objective-C 中弄清楚。

你会想要这样做：

将十六进制值转换为十进制值：

`#0000CD --> (0,0,205)`

将每个十进制值除以 255 并保留最多 10 位：

`(0,0,205) --> (0,0,0.8039215686)`

将这些值转换为字符串，每个值用空格分隔（末尾没有空格）：

`0 0 0.8039215686`

将其转换为字节数组：

`48 32 48 32 48 46 56 48 51 57 50 49 53 54 56 54`

在末尾添加一个“零”字节`0`：

`48 32 48 32 48 46 56 48 51 57 50 49 53 54 56 54 0`

现在，只需将其转换为 base64 字符串。我的结果`#0000CD`是：

`MCAwIDAuODAzOTIxNTY4NgA=`

我认为`=`最后只是一个占位符，但这不是我的专业领域。

***注意：***`A`第一个值（“MCAwIDAAA”）的末尾有一个我没有弄清楚的额外你确定那是 3 A 而不是 2？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:27:57.180

正确的答案是：您应该只解码 base64 字节“MCAwIDAAA”，例如：

红色 MSAwIDAAA ----base64 解码---> 1 0 0

橙色 MSAwLjUgMAA ----base64 解码---> 1 0.5 0

你抓住了颜色的RGB值！

# javascript - Tinymce 自动调整大小问题

> ID：10481348
> 
> 赞同：3
> 
> 时间：2012-05-07T11:32:50.080
> 
> 标签：javascript, editor, tinymce, textarea, autoresize

我正在使用带有 autoresize 插件的 tinymce 3.5。当用户添加内容时，该插件对我来说非常有用，但之后我会序列化这些内容，以便以后对其进行编辑。问题是反序列化内容后，自动调整大小插件不会触发。我尝试 `tinymce.activeEditor.execCommand('mceAutoResize');` 在 onInit、onPostRender 等回调中执行，但它无济于事 - 我的内容被裁剪到文本区域的初始高度。输入一些文字后，问题就消失了。有没有一种我不知道手动调用自动调整大小插件的方法。提前致谢。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:26:39.630

您是否尝试过手动调用 Resizing [`init_instance_callback`](http://www.tinymce.com/wiki.php/Configuration:init_instance_callback)？

[你可以在这里](https://stackoverflow.com/a/12382834/1062304)找到一个例子。

# python - 保存 Tweepy 推文

> ID：10481349
> 
> 赞同：0
> 
> 时间：2012-05-07T11:32:52.647
> 
> 标签：python, django

我想将用户的推文保存在我的数据库（MySQL）中，但我发现很难知道我将如何去做。主要问题是，我没有为它创建任何模型，我只是在我的视图中输入以下代码，因为我通过 tweepy api 获取用户推文。

现在的问题是，我将如何将用户的推文保存在我的数据库中？

意见：

```
 consumer_key=""
   consumer_secret=""
   access_token=""
   access_token_secret=""
   auth=tweepy.OAuthHandler(consumer_key, consumer_secret)
   auth.set_access_token(access_token, access_token_secret)
   api=tweepy.API(auth)

           def tweetstream(request):
               if request.method=='GET':
                   statuses=Cursor(api.list_timeline, owner=request.user, slug='Testy').items(20)
                   for status in statuses:
                       print status
                       return render_to_response('dash.html',{'statuses': statuses},context_instance=RequestContext(request)) 
```

# asp.net - 使用 asp.net 统计在线用户

> ID：10481351
> 
> 赞同：4
> 
> 时间：2012-05-07T11:33:00.223
> 
> 标签：asp.net

我要创建一个网站，我需要统计在线用户并一直显示在主页上。我没有兴趣为其应用现成的模块。这是我已经做的：

将 Global.asax 文件添加到我的项目中

在 Global.asax 文件中编写以下代码片段：

```
void Application_Start(object sender, EventArgs e) 
{
    Application["OnlineUsers"] = 0;
}

void Session_Start(object sender, EventArgs e) 
{
    Application.Lock();
    Application["OnlineUsers"] = (int)Application["OnlineUsers"] + 1;
    Application.UnLock();
}

void Session_End(object sender, EventArgs e) 
{
    Application.Lock();
    Application["OnlineUsers"] = (int)Application["OnlineUsers"] - 1;
    Application.UnLock();
} 
```

实际上它工作正常，但我发现了以下错误： --> 即使用户关闭浏览器，由于会话超时仍然存在，因此不会显示在线用户的真实数量！

除了更改会话超时间隔之外，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:19:50.270

您可以使用[onUserExit](http://www.userfirst.com/creations/onuserexit/) jQuery 插件来调用一些服务器端代码并​​放弃会话。在文档就绪时激活 onUserExit ：

```
<script type="text/javascript">
  jQuery(document).ready(function () {

    jQuery().onUserExit({
      execute: function () {
        jQuery.ajax({
          url: '/EndSession.ashx', async: false
        });
      },
      internalURLs: 'www.yourdomain.com|yourdomain.com'
    });
  });
</script> 
```

并在 EndSession.ashx 中放弃会话，服务器端 Session_End 将被调用：

```
public void ProcessRequest(HttpContext context)
{
  context.Session.Abandon();
  context.Response.ContentType = "text/plain";
  context.Response.Write("My session abandoned !");
} 
```

请注意，这不会涵盖所有情况（例如，如果用户通过任务管理器杀死浏览器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T11:39:58.573

Session_End 事件在服务器端会话超时时触发，这是（默认）在最后一个请求被处理后 20 分钟。服务器不知道用户何时“离开”或“关闭浏览器”，因此无法对此采取行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:44:59.730

这种方法的局限性在于，除非会话实际结束，否则服务器会认为用户已登录；仅当会话超时配置中指定的分钟数过去时才会发生。

检查这篇文章：[http ://forums.asp.net/t/1283350.aspx](http://forums.asp.net/t/1283350.aspx)

发现这个[Online-active-users-counter-in-ASP-NET](http://www.codeproject.com/Articles/29792/Online-active-users-counter-in-ASP-NET)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:38:29.493

不，在会话超时之前需要时间来更新...

# database - Google 如何抓取数据库，例如科学数据库？

> ID：10481359
> 
> 赞同：0
> 
> 时间：2012-05-07T11:33:49.033
> 
> 标签：database, web-crawler

它是否有权访问数据库，或者它可能位于中间并爬取结果，其他人由他们的查询生成？无论如何，是否有可能编写一个爬虫来爬取像 elsevier 这样的科学数据库并提取信息并将其存储在一个数据库中，比如文章标题和发布年份和作者......等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:10:55.610

问题标题为“科学数据库”，表示**实验定量数据的存储库**。这是一个相当广泛的问题，因为没有任何结构可以强加于所有实验结果的宇宙。此外，研究人员有兴趣在发表之前限制对其数据的访问。但是，如果您对此感兴趣，您可以从开放笔记本科学的 Wikipedia 条目开始：[http](http://en.wikipedia.org/wiki/Open_notebook_science) ://en.wikipedia.org/wiki/Open_notebook_science 。

但是，问题的示例（“Elsevier”、“文章标题”）描述了有关科学主题**的期刊文章的存储库。**通常，一些文章元数据是公开可用的，因此可以（原则上）抓取摘要、关键字、作者姓名等信息。但是一篇文章的内容及其引用受到付费墙的保护。（一个越来越重要的例外是开放获取期刊的趋势。）

这是一篇随机选择的示例文章，来自 Nature： http: [//www.nature.com/nature/journal/v485/n7396/full/nature10912.html](http://www.nature.com/nature/journal/v485/n7396/full/nature10912.html)

# database - 架构：一个数据库由两个不同的服务器使用

> ID：10481361
> 
> 赞同：0
> 
> 时间：2012-05-07T11:33:54.347
> 
> 标签：database, web-services, architecture, database-connection, race-condition

*免责声明：这篇文章的作者对 Web 应用程序的软件架构只有理论知识，几乎没有实践知识。*

假设我想构建一个具有以下架构大纲的 Web 应用程序：

1.  一个典型的 Web 前端，它允许用户创建/编辑/删除帐户并在...中创建/更新/删除帐户记录
2.  ... 存储所有用户帐户的数据库；
3.  和一个 Jabber 机器人（一个单独的服务，可能在单独的物理机器上）与用户对话，但需要在同一数据库中查找和更新有关用户的内容 (2)。

所以，基本上我有两个应用程序使用同一个数据库。由于数据完整性、竞争条件和其他问题，我不确定这是一个好的解决方案。

我的典型用例可能是：User1 正在与 Jabber bot (3) 交互，bot 需要在数据库中查找和更新数据，而在同一时刻 User2 通过 (1) 创建一个帐户，这需要一些交互与数据库 (2)。

如何在保留所需功能的同时避免这种类型的架构？或者我如何设计架构以消除从两个不同服务查询一个数据库的需要？

（不幸的是，这个应用程序的“商业模式”不允许在一个 Web 服务中包含“帐户管理”（1）和“Jabber bot”（2）逻辑）。

PS 有问题的系统最重要的要求是高可用性（也许它会以某种方式影响答案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:50:50.357

从两个不同的服务查询或更新数据库没有问题。数据库的设计目的是同时处理多个不同的请求，这些并发请求是来自同一个应用程序还是来自不同的应用程序，对于数据库来说是无关紧要的。

即使我们删除了 Jabber 服务 (3)，您仍然可以让 Web 应用程序 (1) 处理多个并发 Web 请求，这将创建并行数据库查询。

没有问题，直到你达到一定的极限。一旦您的增长超过某个限制（假设 1000 个并发请求，但实际数量取决于不同的情况），您可能需要集群您的数据库。

但在达到此目标之前，您将面临其他性能瓶颈。例如，正确设置缓存可以让您使用单个数据库服务器实例为更多用户提供服务。

# php - 如何获得这个类的名称？

> ID：10481366
> 
> 赞同：1
> 
> 时间：2012-05-07T11:34:20.713
> 
> 标签：php, oop, class

我尝试打印创建新对象的类的名称。我得到了这个代码：

```
class Class_A
{
  public function __construct()
  {
    echo "new ".__class__." : are created"."<br />";
  }
}
class B extends Class_A
{

}
class C extends Class_A
{

}
$NewObject1= new B ( );
$NewObject2= new C ( ); 
```

输出是：

```
new Class_A : are created
new Class_A : are created 
```

为什么不`new B : are created` `new C : are created`呢？

我也尝试过，`getParentClass()`但它不起作用谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:37:10.423

在这种情况下，你应该写

`echo "new ".get_called_class()." : are created"."<br />";`

你可以看看[http://www.php.net/manual/en/function.get-call-class.php](http://www.php.net/manual/en/function.get-called-class.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T11:39:29.150

对于 PHP >= 5.3.0，使用

[`get_called_class()`](http://www.php.net/manual/en/function.get-called-class.php)

否则，使用

[`get_class($this)`](http://www.php.net/manual/en/function.get-class.php)

在你的问题的背景下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:37:58.207

`__class__`放置在代码中的点

`get_class($this)`改为使用

# actionscript-3 - As-3 拖动具有透明度的位图

> ID：10481368
> 
> 赞同：0
> 
> 时间：2012-05-07T11:34:24.790
> 
> 标签：actionscript-3

目前我正在开发纯动作脚本项目中的拖放应用程序。现在我遇到的问题是，我有一些 PNG 位图，周围有一些透明背景。位图可能会相互碰撞。用户可以拖动这些位图中的任何一个。如果用户点击透明区域，用户应该不能拖动，反之亦然。这意味着用户应该能够拖动最上面的位图而忽略透明位图..

任何人都可以帮助解决这个问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:35:37.080

有可能的。您需要阅读有关 AS 可能性的更多文档。

这只是一个快速而肮脏的概念证明：

```
package
{
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.geom.Point;

/**
 * ...
 * @author Jevgenij Dmitrijev ( http://www.ifmi.lt )
 *
 */
public class DragTransparentBitmaps extends Sprite
{
    private var _dragMC:Sprite;

    public function DragTransparentBitmaps()
    {
        var sp:Sprite;
        var bmp:Bitmap;

        for (var i:uint; i < 10; ++i)
        {
            sp = new Sprite();
            sp.name = 'item_' + i.toString();
            bmp = new Bitmap(new Close()); // add your bitmapData
            sp.addChild(bmp);
            sp.x = 20*i;
            sp.y = 20*i;
            addChild(sp);
        }

        stage.addEventListener (MouseEvent.MOUSE_DOWN, handleMouseDown )
    }

    function handleMouseDown(e:MouseEvent):void
    {
        /*

        // OPTIONAL:

        // if you need the mouse to be in a specific region:            
        if ( mouseX > 400 || mouseY > 400 )
        {
            return;
        }

        // or you can just check if mouse is on your needed mc:
        if ( !someSprite.hitTestPoint(mouseX, mouseY) )
            return;
        */

        // cheking how much objects are under the mouse
        var objectsUnderMouse:Array = getObjectsUnderPoint (new Point (mouseX, mouseY));

        var length_i:uint = objectsUnderMouse.length;

        if ( length_i > 0 )
        {
            // if only one then no checking needed just parsing it to the drag function.
            if ( length_i == 1 )
            {
                drag(objectsUnderMouse[0].parent);
                return;
            }
        }
        else
            return; // if nothing under the mouse just end the function

        var sp:Sprite;
        var bmpData:BitmapData; 

        for (var i:uint; i < length_i; i++) 
        {
            // taking a sprite where bitmap is positioned
            sp = objectsUnderMouse[i].parent as Sprite;

            // taking the bitmap data
            bmpData = objectsUnderMouse[i].bitmapData;

            // taking the pixel information ( see the docu about it )
            // if the value is > 0 it means that the bitmap is not transparent and we can move it
            if ( bmpData.getPixel32(sp.mouseX, sp.mouseY ) > 0 )
            {
                drag (objectsUnderMouse[i].parent);
                return;
            }
        }
    }

    // just drag functions
    private function drag(value:DisplayObject):void 
    {
        _dragMC = value as Sprite;
        _dragMC.startDrag();

        stage.addEventListener (MouseEvent.MOUSE_UP, handleMouseUp);
    }

    private function handleMouseUp(e:MouseEvent):void 
    {
        stage.removeEventListener (MouseEvent.MOUSE_UP, handleMouseUp);
        _dragMC.stopDrag();
    }
}
} 
```

让我知道它是否有帮助。

# android - Android Facebook-SDK 设置无法按预期工作

> ID：10481374
> 
> 赞同：0
> 
> 时间：2012-05-07T11:34:48.293
> 
> 标签：android, facebook

根据：[https](https://developers.facebook.com/docs/mobile/android/build/#sample)
://developers.facebook.com/docs/mobile/android/build/#sample 我做了以下（简短的形式）：
- 获取 git repo 的克隆 -
使用“创建项目”启动一个新的 android 项目从现有来源”
-引用到“~/facebook-android-sdk/facebook”

在此之后，新创建的项目无法编译，因为它没有清单。手动复制到这个项目后，它甚至没有 .java 文件和其他资源。

手动复制所有内容后，它现在可以工作了，但是根据我监督的教程，“正常”工作流程中有什么吗？或者有谁知道为什么它不能按预期使用“从现有源创建项目”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:47:31.893

您可以使用的另一种简单方法是从您下载的 facebook-sdk 项目中创建 Jar 文件。这可以通过将 facebook 项目从 eclipse 导出为 Jar 来完成。

然后你可以把这个 jar 添加到你自己想要集成 facebook 的项目中。

这样，您的代码也将干净且易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:49:14.317

您看到文件 /tests/default.properties facebook 项目用作库。那么我认为您了解所有过程。请按照此说明操作 [https://developers.facebook.com/docs/mobile/android/build/#sample](https://developers.facebook.com/docs/mobile/android/build/#sample)

# php - 动态 Rss 提要无法从数据库中填充数据

> ID：10481375
> 
> 赞同：0
> 
> 时间：2012-05-07T11:34:53.010
> 
> 标签：php, mysql, rss

以下动态 rss 提要的语法显示提要页面[http://www.site.com.com/rssfeed.php](http://www.site.com.com/rssfeed.php)并正确显示频道输出，但无法从`<item> </item>`标签中定义的数据库中填充动态数据。

```
<?php require_once('mysqlconnection.php'); ?>
<?php
mysql_select_db($database_rssfeed, $rssfeed);
$query_rssfeed = "SELECT * FROM rssfeed ORDER BY id DESC";
$rssfeed = mysql_query($query_rssfeed, $rssfeed) or die(mysql_error());
$row_rssfeed = mysql_fetch_assoc($rssfeed);
$totalRows_rssfeed = mysql_num_rows($rssfeed);

$rss = '<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title><![CDATA[Test || Rss Feed]]></title>
<link>http://www.site.com.com/rssfeed.php</link>
<description><![CDATA[Rss Feed]]></description>
<lastBuildDate>'.date('D, d M Y h:i:s O').'</lastBuildDate>
<docs>http://www.test.com</docs>
<language>en</language>
';

//Call data within <item> </item>

while ($row_rssfeed = mysql_fetch_assoc($rssfeed));  {
$rss .= '<item>
<title><![CDATA['.$row_rssfeed['title'].']]></title>
<description><![CDATA['.$row_rssfeed['description'].']]></description>
<link><![CDATA['.$row_rssfeed['link'].']]></link>
<pubDate><![CDATA['.$row_rssfeed['date'].']]></pubDate>
<guid><![CDATA['.$row_rssfeed['link'].']]></guid>
</item>';
}
//<![CDATA[]]>  not to break the XML structure of my feed
$rss .= '</channel></rss>';
header ("content-type: text/xml");
echo $rss; //Output the feed to web browser

mysql_free_result($rssfeed);
?> 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:40:37.597

从该行中删除分号

```
while ($row_rssfeed = mysql_fetch_assoc($rssfeed));  { 
```

# c# - c# Timer 类 Change(dueDate, periord)

> ID：10481381
> 
> 赞同：5
> 
> 时间：2012-05-07T11:35:17.023
> 
> 标签：c#

我已经浏览了有关此计时器类更改功能的 msdn 库，

[http://msdn.microsoft.com/en-us/library/yz1c7148.aspx](http://msdn.microsoft.com/en-us/library/yz1c7148.aspx)

public bool Change( int dueTime, int period )

但我不明白周期参数是什么。

我也尝试创建一个示例来查看它的用途，但似乎它什么也没做

```
Timer JobTime = new Timer(timer =>
        {
            try
            {
                WriteLog(DateTime.Now.ToString(), "TestJobTimer"); //Save invoke time to file

                ((Timer)timer).Change(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(20));
            }
            catch(Exception ex)
            {
                string stop = ex.Message;
            }
        });
        JobTime.Change(0, 0); 
```

基于这个示例，我得到的是计时器将每 5 秒重复一次，那么 PERIOD 参数是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T11:38:25.347

**dueTime**显示何时触发第一个事件，

**在那之后**多久

在您的情况下，第一个事件将在 5 秒后触发，然后每 20 秒触发一次

**编辑**

至于你用 0,0 调用你的计时器更改，它会不耐烦地开始并且在计时器滴答时调用你将它更改为每 20 秒 5 秒后触发，这就是事件每 5 秒触发一次的原因

如果您想在 5 秒后每 20 秒触发一次事件，请从处理程序中删除计时器更改，并像这样只启动一次计时器

```
 Timer JobTime = new Timer(timer =>
    {
        try
        {
            Console.WriteLine(DateTime.Now.ToString(), "TestJobTimer"); //Save invoke time to file
        }
        catch (Exception ex)
        {
            string stop = ex.Message;
        }
    });
    JobTime.Change(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(20)); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:37:54.283

DueTime = 距离首次部署的时间

周期 = 下一次部署的到期时间之后的时间量，以及每次后续部署的时间量。

# c - 带有（非常）简单的 opencv 程序（使用 Mac Os X）的“总线错误”

> ID：10481385
> 
> 赞同：4
> 
> 时间：2012-05-07T11:35:34.410
> 
> 标签：c, macos, gcc, opencv

我知道“总线错误”通常是由于编程错误造成的。但我真的在三行程序中看不到这样的错误：

```
int main(int argc, char** argv)
{
  IplImage *src = cvLoadImage("/tmp/Name.tiff", CV_LOAD_IMAGE_COLOR);
  IplImage* res = cvCreateImage( cvSize( 2, 2), IPL_DEPTH_8U, 3 );
  cvSaveImage("/tmp/image.tiff", src);
  return 0;
} 
```

我编译如下：

```
gcc -I/Library/Frameworks/OpenCV.framework/Versions/A/Headers /usr/local/lib/libopencv_* test.c
```

执行给出**总线错误**。

非常重要：如果我删除第二行（对 的调用`cvCreateImage`），它可以正常工作。

我在用着`opencv 2.3 and MacOs 10.8.5, gcc (i686-apple-darwin9-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5566)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:43:19.833

您不验证是否`IplImage *src = cvLoadImage("/tmp/Name.tiff", CV_LOAD_IMAGE_COLOR);`成功。我认为它无法找到文件或解码它或其他任何东西。一切都只是糟糕的工程实践的结果。

```
$ cat src/bus.cpp 
#include <opencv2/opencv.hpp>

int main(int argc, char** argv)
{
  IplImage *src = cvLoadImage("/tmp/Name.tiff", CV_LOAD_IMAGE_COLOR);
  if(src==NULL) {
    printf("There is no /tmp/Name.tiff\n");
    exit(1);
  }
  IplImage* res = cvCreateImage( cvSize( 2, 2), IPL_DEPTH_8U, 3 );
  cvZero(res);
  cvSaveImage("/tmp/Name.tiff", src);
  return 0;
} 
$ 
$ convert ~/ScanImage001.png /tmp/Name.tiff
$ ./bus 
$ 
```

在 Mac 上为我工作。

# opencl - 检查 cl_mem 对象是否有效

> ID：10481386
> 
> 赞同：0
> 
> 时间：2012-05-07T11:35:41.413
> 
> 标签：opencl

我想做的事情对我来说似乎很简单，但目前我觉得 OpenCL 不可能：

我想`cl_mem`在释放某个对象之前检查它是否真的有效：

```
cl_mem someimage;
if ( isvalid(someimage) ) clReleaseMemObject(someobject); 
```

原因很简单：如果我`clReleaseMemObject`在没有初始化的情况下调用`someimage`，我的程序就会崩溃。我可以`try ... catch`在电话周围打个电话，但这对我来说似乎有点脏。

`clGetImageInfo(someimage)`如果未初始化，任何类似的调用也会崩溃。

我该如何实施`isvalid(someimage)`？

非常感谢任何提示，雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:53:08.890

在 Khronos 论坛（请参阅[http://www.khronos.org/message_boards/viewtopic.php?f=28&t=4995](http://www.khronos.org/message_boards/viewtopic.php?f=28&t=4995)）中，我了解到这`cl_mem`是一种指针类型，因此可以`nullptr`在释放或查询之前对其进行简单的初始化和检查。当然，堆栈上完全未初始化的指针会产生错误。

感谢通知。

# ruby-on-rails - Friendly_id 有两个参数？

> ID：10481389
> 
> 赞同：5
> 
> 时间：2012-05-07T11:36:07.190
> 
> 标签：ruby-on-rails, database, friendly-id

我想知道是否有一种简单的方法来使用friendly_id 并且有两个参数而不是一个，像这样？

www.example.com/dateTitle/

日期和标题是我的数据库中的两个独立字段。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-03T15:23:04.550

我知道这个问题是 2 年前提出的，但如果它对未来的读者有帮助，friendlyId gem 现在集成了可以帮助解决这个问题的“候选人”功能。

```
class Post < ActiveRecord::Base
  extend FriendlyId
  friendly_id :slug_candidates, use: :slugged

  def slug_candidates
   [
    [:created_at, :Title],
   ]
  end
end 
```

[gem repo](https://github.com/norman/friendly_id)中的更多信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T01:32:16.517

肯定有！

只需在模型上定义一个方法，在字符串被 slugged 之前格式化它

参考这个例子：[https ://gist.github.com/2650300](https://gist.github.com/2650300)

# mysql - MySQL 分组以显示零记录

> ID：10481408
> 
> 赞同：0
> 
> 时间：2012-05-07T11:37:55.087
> 
> 标签：mysql, sql, group-by

我有一个只有注册用户才能观看视频的 Intranet 站点。用户可以在 iPhone、iPad、Android 或 Web 等多个平台上观看视频，我会跟踪所有这些信息（为了问题的简单性，请不要考虑其他平台）。我正在尝试在管理面板上显示一些视频观看报告。

表结构如下（我有很多其他列，但它们对于这个问题并不重要）；

```
CREATE TABLE IF NOT EXISTS `history` (
  `history_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `video_id` int(11) unsigned NOT NULL,
  `user_id` int(11) unsigned NOT NULL,
  `platform_id` int(11) unsigned NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`history_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=9 ;

INSERT INTO `history` (`history_id`, `video_id`, `user_id`, `platform_id`, `created`) VALUES
(1, 1, 1, 1, '2012-05-06 08:13:57'),
(2, 2, 1, 1, '2012-05-06 13:23:57'),
(3, 1, 1, 4, '2012-05-06 18:16:39'),
(4, 4, 2, 3, '2012-05-07 08:14:19'),
(5, 1, 2, 3, '2012-05-07 08:14:55'),
(6, 2, 1, 1, '2012-05-07 15:14:55'),
(7, 3, 2, 1, '2012-05-07 18:05:14'),
(8, 3, 1, 4, '2012-05-07 18:15:24');

CREATE TABLE IF NOT EXISTS `sys_list_of_values` (
  `value_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `display_text` text COLLATE utf8_unicode_ci NOT NULL,
  `list_value` text COLLATE utf8_unicode_ci NOT NULL,
  `list_group` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`value_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=10 ;

INSERT INTO `sys_list_of_values` (`value_id`, `display_text`, `list_value`, `list_group`) VALUES
(1, 'iPhone', 'iphone', 'platform'),
(2, 'Android', 'android', 'platform'),
(3, 'iPad', 'ipad', 'platform'),
(4, 'Website', 'web', 'platform'),
(5, 'Active', 'active', 'status'),
(6, 'Passive', 'passive', 'status'),
(7, 'Waiting for approvement', 'waiting', 'status'),
(8, 'Spam', 'spam', 'status'),
(9, 'Deleted', 'deleted', 'status');

CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(80) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=3 ;

INSERT INTO `users` (`user_id`, `username`) VALUES
(1, 'test_user_1'),
(2, 'test_user_2');

CREATE TABLE IF NOT EXISTS `videos` (
  `video_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) unsigned NOT NULL,
  `title` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` int(11) unsigned NOT NULL,
  PRIMARY KEY (`video_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=5 ;

INSERT INTO `videos` (`video_id`, `user_id`, `title`, `created`, `status`) VALUES
(1, 1, 'Test Video 1', '2012-05-07 08:12:52', 7),
(2, 1, 'Test Video 2', '2012-05-07 08:12:52', 5),
(3, 1, 'Test Video 3', '2012-05-07 08:13:17', 5),
(4, 1, 'Test Video 4', '2012-05-07 08:13:17', 6); 
```

我正在尝试显示如下报告；

```
Platform      |     Watch_Count
===============================
iPhone                  20
iPad                     0
Android                  2
Website                120
Total                  142 
```

我有一些过滤器选项，例如`video_id`,`created`等`platform`。例如；我想显示所有视频、特定视频（video_id）或日期之间（创建）等的总观看报告。我还想显示所有平台，无论它们是 0 还是其他任何东西。

以下查询仅显示 iPhone 和网站，但我想显示所有平台。如果没有观察计数，则必须显示为 0（零）。我也无法显示对所有`watch_count`s 求和并显示总数的最后一行。

```
SELECT sys_list_of_values.display_text, COUNT(history.history_id) AS 'total_watch' FROM history
JOIN sys_list_of_values ON sys_list_of_values.value_id = history.platform_id
WHERE history.video_id = 1
AND history.created <  '2012-05-07'
GROUP BY history.platform_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:54:40.733

保留你的`FROM HISTORY`，改变你`JOIN`的`RIGHT JOIN`

```
SELECT sys_list_of_values.display_text, COUNT(history.history_id) AS 'total_watch' 
FROM history
RIGHT JOIN sys_list_of_values 
   ON sys_list_of_values.value_id = history.platform_id
   AND history.created <  '2012-05-07'
   AND history.video_id = 1

GROUP BY sys_list_of_values.value_id 
order by sys_list_of_values.display_text; 
```

如果要使用`LEFT JOIN`，请切换历史和 sys_list_of_values 的位置：

```
SELECT sys_list_of_values.display_text, COUNT(history.history_id) AS 'total_watch' 
FROM sys_list_of_values 
LEFT JOIN history
   ON sys_list_of_values.value_id = history.platform_id
   AND history.created <  '2012-05-07'
   AND history.video_id = 1

GROUP BY sys_list_of_values.value_id 
order by sys_list_of_values.display_text; 
```

现场测试：[http ://www.sqlfiddle.com/#!2/495d1/15](http://www.sqlfiddle.com/#!2/495d1/15)

* * *

GROUP BY with ROLLUP 和 ORDER 不兼容，反正 ROLLUP 会自动对列表进行排序，去掉 ORDER 就好了：

```
SELECT sys_list_of_values.display_text, 
  -- sys_list_of_values.value_id,
  COUNT(history.platform_id) AS 'total_watch' 
FROM sys_list_of_values 
LEFT JOIN history
   ON sys_list_of_values.value_id = history.platform_id
   AND history.created <  '2012-05-07'
   AND history.video_id = 1

where sys_list_of_values.list_group = 'platform'
GROUP BY 
 sys_list_of_values.display_text with rollup 
```

现场测试：[http ://www.sqlfiddle.com/#!2/495d1/68](http://www.sqlfiddle.com/#!2/495d1/68)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:47:15.487

使用`LEFT JOIN`并将涉及“正确”表的条件从 移动`WHERE`到`ON`：

```
SELECT s.display_text
     , COUNT(h.history_id) AS total_watch 
FROM 
    sys_list_of_values AS s 
  LEFT JOIN 
    history AS h
      ON  h.platform_id = s.value_id 
      AND h.video_id = 1
      AND h.created <  '2012-05-07'
GROUP BY s.value_id
  WITH ROLLUP                     --- for an additional final row with total sum 
```

如果你想要`ORDER BY display_text`and `ROLLUP`，使用这个：

```
GROUP BY s.display_text
  WITH ROLLUP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:49:02.633

您可以使用子查询将计数加入平台列表：

```
SELECT display_text, IFNULL(total_watch, 0)
FROM sys_list_of_values
LEFT JOIN (
    SELECT platform_id AS value_id, COUNT(history_id) AS total_watch
    FROM history
    WHERE video_id = 1
    AND history.created < '2012-05-07'
    GROUP BY platform_id
) AS watch_counts USING (value_id)
WHERE list_group = 'platform' 
```

顺便说一句，在应用程序代码中完成平台列表通常比在数据库中完成更高效，特别是如果假设应用程序代码拥有所有现有平台的长期缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:05:16.000

```
SELECT
  sys_list_of_values.value_id     as VID,
  sys_list_of_values.display_text,
  COUNT(history.history_id)       AS 'total_watch'
FROM sys_list_of_values
   JOIN history
    ON sys_list_of_values.value_id = history.platform_id
where sys_list_of_values.list_group = 'platform'
    and history.created < '2012-05-07'
GROUP BY history.platform_id
order by VID 
```

# c++ - 在另一个的 ROI 内复制一个 cv::Mat

> ID：10481411
> 
> 赞同：60
> 
> 时间：2012-05-07T11:38:07.153
> 
> 标签：c++, opencv, copy, roi

我需要将`cv::Mat`图像（源）复制到另一个（目标）`cv::Mat`图像的 ROI。

我找到[了这个参考](https://stackoverflow.com/questions/7041181/equivalent-to-cvsetimageroi-in-the-opencv-c-interface)，但它似乎不适用于我的情况。你有什么指示我如何使用 OpenCV C++ 接口来做到这一点？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-07T12:40:33.703

开放CV 2.4：

```
src.copyTo(dst(Rect(left, top, src.cols, src.rows))); 
```

OpenCV 2.x：

```
Mat dst_roi = dst(Rect(left, top, src.cols, src.rows));
src.copyTo(dst_roi); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-08T02:11:29.730

除了或更正上述答案之外，如果您想将较小的 open 区域复制`Mat`到 another `Mat`，您应该执行以下操作：

```
src(Rect(left,top,width, height)).copyTo(dst); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-05T12:07:17.617

这样做对我有用：

```
Mat imgPanel(100, 250, CV_8UC1, Scalar(0));
Mat imgPanelRoi(imgPanel, Rect(0, 0, imgSrc.cols, imgSrc.rows));
imgSrc.copyTo(imgPanelRoi);

imshow("imgPanel", imgPanel);
waitKey(); 
```

我正在使用基于 Andrey 的回答的 Opencv 2.4.9。

# ios - 更改 Xcode 4.3.2 的 iPad/iPhone 模拟器分辨率

> ID：10481412
> 
> 赞同：20
> 
> 时间：2012-05-07T11:38:07.573
> 
> 标签：ios, xcode, ios-simulator, simulator, screen-resolution

我正在使用 Philips 19" 并将 Xcode 升级到版本 4.3.2。在 iPad 3 上的新“Retina Display”上（哦，对不起，在新 iPad 上）我的 iPad 模拟器改变了它的分辨率，模拟器有垂直和水平滚动条！

如何更改 iOS 模拟器的分辨率？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T11:41:22.783

以下热键应该会有所帮助：

*   `Command ⌘</kbd> + `1` (100%)`
*   `Command ⌘</kbd> + `2` (75%)`
*   `Command ⌘</kbd> + `3` (50%)`
*   `Command ⌘</kbd> + `4` (33%)`
*   `Command ⌘</kbd> + `5` (25%)`

查看菜单：“Window --> Scale”以查看选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T11:43:32.550

您可以使用 - 硬件 -> 设备 -> iPad 启用视网膜显示

您可以按`cmd`+ 1 或`cmd`+ 2 或`cmd`+ 3 更改模拟器的大小。它将加载视网膜图像，但使用较小的模拟器，因此您不必滚动进行测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-26T13:05:00.137

除了该缩放下`cmd+1`的`cmd+2`和`cmd+3`选项`Window->Scale`分别为 100%、75% 和 50% 之外，您还可以通过设置自定义首选项来自定义缩放量。即，尝试在目录下的文件中设置`SimulatorWindowLastScale`首选项。在终端中运行以下命令使我能够使用 iOS Simulator 8.2 查看 iPad Air 的全屏：`com.apple.iphonesimulator.plist``~/Library/Preferences`

`defaults write ~/Library/Preferences/com.apple.iphonesimulator SimulatorWindowLastScale "0.4"`

另请参阅[https://apple.stackexchange.com/a/93313](https://apple.stackexchange.com/a/93313)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T11:42:58.447

在菜单栏中：

硬件 -> 设备 -> iPad

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-14T03:22:38.100

您也可以在 Simulator -> Window 中选择 Physical Size，这将使尺寸与 iPhone 的物理尺寸一样大：

`![](../Images/9299d89570c6f1437a0c971d6e91cb7f.png)`

快捷键是`Cmd`+`1`

# ios - 当 Master 是 UITabBarController 时，从 UISplitViewController Detail 转到 Master？

> ID：10481413
> 
> 赞同：0
> 
> 时间：2012-05-07T11:38:10.203
> 
> 标签：ios, uitabbarcontroller, segue

I want to segue from the detail (a map view) to the first tab within the master (a UITabBarController) when an annotation callout is selected. 第一个选项卡是我要更新的表格视图。

如果我切换到表格视图并使用“替换”的切换样式，那么我会丢失标签栏。如果我选择“推送”，我会收到一个运行时错误，即接收器不是导航控制器。

我想我可以转到选项卡栏控制器，在地图视图上设置一个布尔值，然后通过转场赶上我想要的位置（表格视图）或使用应用程序委托，但我想要一个如果有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:10:35.683

如果我正确理解了您的要求，那么您有一个带有一些选项卡的 UITabBarController，然后想要在其顶部临时推送一个详细信息（地图）视图。当地图视图被关闭时，您想回到相同的初始 UITabBarController 吗？

为此，更好的解决方案是将地图视图作为“模态”推送——在这种情况下，它将占据屏幕。只是要小心，因为您不能从其自身关闭模态屏幕 - 理想情况下，它需要从首先显示它的视图控制器中关闭。例如，在推送模态视图控制器的类的 prepareForSegue 方法中，您可以将引用传递回自身或使用委托：

```
[modalViewController setParent:self]; 
```

然后在模态类中，当某个按钮或其他事件触发解雇时，您可以：

```
[parent.modalViewController dismissModalViewControllerAnimated:YES]; 
```

有关更多详细信息，请参阅：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)。

# android - Android ListFragment 令人困惑

> ID：10481414
> 
> 赞同：3
> 
> 时间：2012-05-07T11:38:12.400
> 
> 标签：android, list, fragment

我对使用 ListFragment 感到很困惑......我不明白问题出在哪里......

这是我的 FragmentActivity 类：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class menu extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
            setContentView(R.layout.root_menu); 

        if (getSupportFragmentManager().findFragmentById(android.R.id.content) == null) {
            ListFrag list = new ListFrag();
            getSupportFragmentManager().beginTransaction().replace(android.R.id.content, list).commit();
        }}} 
```

我的 ListFragment 类：

```
public class ListFrag extends ListFragment {

    int Files = 0;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        getListView().setBackgroundResource(R.drawable.table);
        getListView().setDividerHeight(0);
        getListView().setCacheColorHint(0);

        View view = inflater.inflate(R.layout.main, null);

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        setListAdapter(new CustomListAdapter(getActivity(), getThemes()));
    }

    public String[] getThemes(){
                       ...
        return ...;
    } 
```

还有main.xml（它用于使用我制作的自定义列表适配器制作列表）：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="40dp"
    android:paddingTop="30dp"
    android:cacheColorHint="#00000000"
    android:layout_marginTop="100px"
     >

    <ImageView
        android:id="@+id/icon"
        android:layout_height="40dp"
        android:layout_width="40dp"
        android:src="@drawable/check" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:paddingTop="6dp"
        android:paddingLeft="20dp"
        android:textSize="25px" >
    </TextView>

</LinearLayout> 
```

此 root_menu.xml 应在顶部显示背景图像和列表片段：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/back"
android:orientation="vertical"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:background="@drawable/back"
android:cacheColorHint="#00000000"
>

<fragment
      android:id="@+id/frag"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.osmgames.kartuves.ListFrag" >
</fragment>   

</LinearLayout> 
```

这是我的 CustomListAdapter 类：

```
public class CustomListAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public CustomListAdapter(Context context, String[] values) {
        super(context, R.layout.main, values);
            this.context = context;
            this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.main, parent, false);

            TextView textView = (TextView) rowView.findViewById(R.id.label);

                ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);

                textView.setText(values[position]);

            imageView.setImageResource(R.drawable.check);

        return rowView;
    }
} 
```

日志：

```
05-07 11:49:43.017: D/AndroidRuntime(1216): Shutting down VM
05-07 11:49:43.017: W/dalvikvm(1216): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-07 11:49:43.047: E/AndroidRuntime(1216): FATAL EXCEPTION: main
05-07 11:49:43.047: E/AndroidRuntime(1216): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.osmgames.kartuves/com.osmgames.kartuves.menu}: android.view.InflateException: Binary XML file line #11: Error inflating class fragment
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.os.Looper.loop(Looper.java:123)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at java.lang.reflect.Method.invokeNative(Native Method)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at java.lang.reflect.Method.invoke(Method.java:521)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at dalvik.system.NativeStart.main(Native Method)
05-07 11:49:43.047: E/AndroidRuntime(1216): Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class fragment
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.Activity.setContentView(Activity.java:1647)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at com.osmgames.kartuves.menu.onCreate(menu.java:12)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-07 11:49:43.047: E/AndroidRuntime(1216):     ... 11 more
05-07 11:49:43.047: E/AndroidRuntime(1216): Caused by: java.lang.IllegalStateException: Content view not yet created
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at com.osmgames.kartuves.ListFrag.onCreateView(ListFrag.java:22)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
05-07 11:49:43.047: E/AndroidRuntime(1216):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
05-07 11:49:43.047: E/AndroidRuntime(1216):     ... 20 more 
```

我看到它说没有创建内容视图，但我不明白为什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:08:29.277

好吧，从logcat：

```
Caused by: java.lang.IllegalStateException: Content view not yet created 
```

你的问题在这里：

```
 getListView().setBackgroundResource(R.drawable.table);
    getListView().setDividerHeight(0);
    getListView().setCacheColorHint(0);

    View view = inflater.inflate(R.layout.main, null); 
```

您试图在设置内容视图之前获取列表视图。将视图膨胀移动到 getListView 之前。

我相信这也将解决关于膨胀类片段的第二个错误。

# vb.net - 如何使用 winforms 在 vb.net 中制作大量按钮（24x20 或类似）？

> ID：10481418
> 
> 赞同：0
> 
> 时间：2012-05-07T11:38:31.790
> 
> 标签：vb.net, winforms, button, user-controls

我正在 vb.net (WinForms) 中制作座位预订系统，我需要用户能够选择他们希望使用的座位并让它改变颜色（这样他们就可以知道它被选中了）。

我开始尝试使用按钮，但 480 个按钮严重减慢了表单的加载时间。然后我尝试了在行/列中带有按钮的数据网格视图，但无法使其正常工作。

我的问题是，我该怎么做？

是否值得尝试使用 480 个图片框并更改其背景颜色？还是会像 480 按钮一样减慢表单的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:49:11.090

出于效率考虑，您并不想仅仅创建大量这样的控件。最好制作一个自定义控件，在它自己的单个绘图表面上绘制所有座位。这是一个非常简单的例子：

```
Public Class SeatingPlan
    Public Class Seat
        Public Rectangle As Rectangle
        Public Selected As Boolean
        Public Id As String

        Public Sub New(ByVal seatId As String, ByVal x As Integer, ByVal y As Integer, ByVal width As Integer, ByVal height As Integer)
            Id = seatId
            Rectangle = New Rectangle(x, y, width, height)
        End Sub
    End Class

    Public ReadOnly Property Seats() As List(Of Seat)
        Get
            Return _seats
        End Get
    End Property
    Private _seats As List(Of Seat) = New List(Of Seat)()

    Public Event SelectedSeatsChanged()

    Private Sub SeatingPlan_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
        For Each seat As Seat In _seats
            If seat.Rectangle.Contains(e.Location) Then
                seat.Selected = Not seat.Selected
                RaiseEvent SelectedSeatsChanged()
                Exit For
            End If
        Next
        Invalidate()
    End Sub

    Private Sub SeatingPlan_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
        For Each seat As Seat In _seats
            Dim seatBackColor As Color = BackColor
            Dim textColor As Color = ForeColor
            If seat.Selected Then
                seatBackColor = Color.FromKnownColor(KnownColor.Highlight)
                textColor = Color.FromKnownColor(KnownColor.HighlightText)
            End If
            e.Graphics.FillRectangle(New SolidBrush(seatBackColor), seat.Rectangle)
            e.Graphics.DrawRectangle(New Pen(ForeColor), seat.Rectangle)
            Dim textSize As SizeF = e.Graphics.MeasureString(seat.Id, Me.Font, seat.Rectangle.Width)
            e.Graphics.DrawString(seat.Id, Font, New SolidBrush(textColor), seat.Rectangle.X + ((seat.Rectangle.Width - textSize.Width) / 2), seat.Rectangle.Y + ((seat.Rectangle.Height - textSize.Height) / 2))
        Next
    End Sub

    Public Function GetSelectedSeatIds() As List(Of String)
        Dim ids As List(Of String) = New List(Of String)()
        For Each seat As Seat In _seats
            If seat.Selected Then
                ids.Add(seat.Id)
            End If
        Next
        Return ids
    End Function

    Public Sub SetSelectedSeatIds(ids As List(Of String))
        For Each seat As Seat In _seats
            seat.Selected = ids.Contains(seat.Id)
        Next
        RaiseEvent SelectedSeatsChanged()
    End Sub
End Class 
```

然后，在您的表单中，输入如下代码来创建座位的位置：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    SeatingPlan1.Seats.Add(New SeatingPlan.Seat("1A", 3, 3, 20, 20))
    SeatingPlan1.Seats.Add(New SeatingPlan.Seat("2A", 26, 3, 20, 20))
    SeatingPlan1.Seats.Add(New SeatingPlan.Seat("1B", 3, 26, 20, 20))
    SeatingPlan1.Seats.Add(New SeatingPlan.Seat("2B", 26, 26, 20, 20))
End Sub

Private Sub SeatingPlan1_SelectedSeatsChanged() Handles SeatingPlan1.SelectedSeatsChanged
    For Each seatId As String In SeatingPlan1.GetSelectedSeatIds
        'Do something
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:12:56.513

试试这个：

```
 private void Form1_Load(object sender, EventArgs e)
        {
            int index;
            Button[] b=new Button[500];
            for(int i=0;i<24;i++)
            for(int j=0;j<20;j++)
            {
                index = (20 * i) + j;
                b[index]=new Button();
                b[index].Text=index.ToString();
                b[index].Location=new Point(j*80,i*30);
                panel1.Controls.Add(b[index]);
                b[index].Click += new EventHandler(ButtonLeft_Click);    
             }

            }

        private void ButtonLeft_Click(object sender, EventArgs e)
        {
            Button b = (Button)sender;
            if (b.BackColor == Color.Black)
                b.BackColor = Color.White;
            else
                b.BackColor = Color.Black;

              //DB Commands here    
        } 
```

# sublimetext2 - 如何将 JavaScript 库添加到 Sublime Text 2？

> ID：10481421
> 
> 赞同：0
> 
> 时间：2012-05-07T11:38:49.073
> 
> 标签：sublimetext2

有没有办法将 javascript 库添加到项目中以进行自动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:05:32.153

您可以安装[包管理器](http://wbond.net/sublime_packages/package_control)，然后安装 javascript 库的片段（如果有的话），尽管有 HTML、CSS 甚至 Bootstrap 的片段。我希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:56:50.700

有一个名为 SublimeCodeIntel 的包我已经让它适用于 python，但我正在为 JavaScript 支持而苦苦挣扎。它在那里，我在工作中见过它，但我认为我自己缺少一些设置。

无论如何，这是链接，请查看： [https ://github.com/Kronuz/SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)

# antlr - 使用 Antlr 在运行时维护源位置

> ID：10481422
> 
> 赞同：1
> 
> 时间：2012-05-07T11:38:49.980
> 
> 标签：antlr, grammar

我有一个基于 Antlr 的脚本语言：一个解析器和一个构建运行时对象（例如语句）的树语法。当我在运行时处理语句时，我想知道原始源位置（例如，当我抛出错误时，我想在脚本源中声明行和位置。）

将源位置附加到我的运行时对象的最佳策略是什么？如果我没有要求太多，我希望对我的语法文件的影响尽可能小。

我试图将尽可能少的代码放入语法中以提高质量，例如我的（许多）表达式之一如下所示：

```
multiplyExpression returns [Expression value]
: ^('*' l=expression r=expression)
{
    $value = sb.newBinaryExpression(CorIdentifier.MULTIPLY, $l.value, $r.value);
}
; 
```

`sb`我在哪里`ScriptBuilder`充当生成的代码和我的运行时之间的适配器。我知道我可以将源位置作为附加参数添加到，`newBinaryExpression`但我也必须触摸所有其他表达式。我希望我可以只将令牌流放入 sb 一次并从流中获取源位置而完全不影响语法源。

我希望，由于许多脚本语言都使用 Antlr，因此有一种标准方法来处理这个问题，因为源位置处理是一个方面，我不想让它在整个语法文件中杂乱无章，而不是非常干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:42:37.477

> 我希望，由于许多脚本语言都使用 Antlr，所以有一种标准的方法来处理这个问题

你让它听起来像 ANLTR 不支持这个。当然有：每个`CommonToken`和`CommonTree`对象都公开了公共`getLine()`和`getCharPositionInLine()`方法，但是您丢弃这些实例并创建自己的节点（`Expression`）。将这些信息嵌入到您自己的节点中，不要感到惊讶 :)

您可以让您的运行时对象扩展`CommonTree`类并让您的（组合）语法构造这些自定义运行时对象（您的类现在继承`getLine()`and`getCharPositionInLine()`方法）。请参阅：[**使用自定义 AST 节点类型**](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction#Treeconstruction-UsingcustomASTnodetypes)。

# c# - 此代码中的错误在哪里？

> ID：10481423
> 
> 赞同：0
> 
> 时间：2012-05-07T11:38:53.113
> 
> 标签：c#, .net, winforms

下面的代码在 windows 窗体内创建一个圆圈。这段代码编译没有任何错误。但它没有画椭圆？！为什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Drawing;

namespace WindowsFormsApplication1
{
    public class Task1 : Form1
    {
        public void FillEllipseInt(PaintEventArgs e)
        {
            SolidBrush redBrush = new SolidBrush(Color.Red);
            int x = 100;
            int y = 100;
            int width = 200;
            int height = 100;
            e.Graphics.FillEllipse(redBrush, x, y, width, height);
        }

        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:44:41.167

您创建了 Form1 而不是 Task 1 的实例

```
Application.Run(new Form1()); 
```

您还需要创建 Task1 的实例

```
Application.Run(new Task1()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:02:18.307

您需要附加`Paint`表单的事件并从中调用您的`FillEllipseInt`方法。此外，您需要更改`Application.Run(new Form1());`为`Application.Run(new Task1());`（至少在您显示的代码中）没有`Form1`类。这也是为什么我认为`Task1`应该继承`Form`而不是`Form1`。

# java - 使用 Java JSP 和 Servlet 的可编辑 SQL GridView

> ID：10481431
> 
> 赞同：2
> 
> 时间：2012-05-07T11:39:40.383
> 
> 标签：java, sql, eclipse, jsp, servlets

在 Servlet 中包含所有 SQL 和 Java 代码的 JSP 页面上显示和编辑 SQL 表的正确但简单的方法是什么？

来自 ASP.NET 环境，我正在寻找 GridView 替代品 - 在 JSP 页面上显示可编辑的行，但在 Servlet 文件中具有所有 SQL 方法。我的目标是拥有 2 个 JSP 页面：第一个用于简单的表格显示，第二个作为 CMS 来编辑这些行（每条记录的保存按钮），以及一个包含大部分 Java 代码的 Servlet。

我会很感激一些简单的例子来显示 JSP 中的可编辑表，以及 Servlet 中的 Java/SQL 代码。我在网上看到了一些零碎的东西，但是每个都使用不同的方法。最好不要编辑任何服务器设置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:43:39.583

就简单的JSP而言，ASP.NET中没有GridView这样的控件。

您可以尝试基于 JSF 的控件，例如 DataTable (http://www.mkyong.com/jsf2/jsf-2-datatable-example/)。但它没有像 GridView 这样的任何内置编辑功能。Datatable 将为您提供足够的控制权，以便实现您自己的编辑/删除/添加逻辑。

要开始使用 JSF，请参阅[http://www.mkyong.com/tutorials/jsf-2-0-tutorials/](http://www.mkyong.com/tutorials/jsf-2-0-tutorials/)或[http://www.vogella.com/articles/JavaServerFaces/article.html](http://www.vogella.com/articles/JavaServerFaces/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:48:30.983

我建议使用 jqGrid。它很简单，而且您所要做的就是将您的 CRUD url 映射到您执行 SQL 操作的控制器。

[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:43:56.830

您可以使用其中的输入元素评估[DisplayTag](http://www.displaytag.org/1.2)。

# java - 出站 SOAP 处理程序以编辑完整的 SOAPMessage

> ID：10481432
> 
> 赞同：1
> 
> 时间：2012-05-07T11:39:47.723
> 
> 标签：java, xml, soap, handler, jmx-ws

有没有办法`SOAP`在使用类时检索完整的消息来处理它（信封和所有）`javax.xml.soap.SOAPMessage`？

我正在使用`JMX-WS`并且想要编辑`SOAP`来自服务器的出站消息，以便在信封的结束结束标记之后将两个字符附加到消息中，因为客户端旧代码正在期待它。因此，理想情况下，我希望能够将完整消息编辑为`String`，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:09:18.170

您可以使用 cxf 执行此操作：

[http://www.mastertheboss.com/web-interfaces/337-apache-cxf-interceptors.html](http://www.mastertheboss.com/web-interfaces/337-apache-cxf-interceptors.html)

看一下`LogInterceptor`例子

# javascript - 仅使用 JavaScript 为 ie8 调用不同的样式表（不支持媒体查询）

> ID：10481435
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:39:58.527
> 
> 标签：javascript, css, internet-explorer-8, screen-resolution

我只需要为 IE8 调用不同分辨率的不同样式表，因为它与媒体查询不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:27:10.690

尝试使用[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:51:30.357

**编辑2**：我把这个答案和另一个问题混在一起弄乱了这个答案，但现在一切都应该好了。对不起OP。

* * *

不要为每个分辨率设置单独的样式表，而是将它们组合起来并让 javascript 在 Body 上放置一个类，以便为分辨率应用正确的样式规则。**例如**：

IE8Styles.css

```
.mystyle { /* Common Styles */ }
body.res800x600 .mystyle { ... }
body.res1024x768 .mystyle { ... } 
```

页面.html

```
<script>
setTimeout(fixResolutionStyles, 200)

function fixResolutionStyles() {
    var windowWidth = document.body.offsetWidth
    var bodyClass = ""
    if(windowWidth > 1600){
        bodyClass = '1600x900'
    } else if (windowWidth > 1024) {
        bodyClass = '1024x786'
    }
    document.body['class'] = "res" + bodyClass
    setTimeout(fixResolutionStyles, 200)
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:49:38.020

由于您明确要求“使用 javascript”，因此我不提倡使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。
这留下了[条件编译](http://msdn.microsoft.com/en-us/library/121hztk3%28v=vs.94%29.aspx)：

```
/*@cc_on@if(@_jscript_version == 5.8)
document.getElementById("id-of-your-style-tag").styleSheet.addImport("/path/style.css");
@end@*/ 
```

# ruby-on-rails - Phusion 乘客 3.2 实验版

> ID：10481463
> 
> 赞同：4
> 
> 时间：2012-05-07T11:42:18.060
> 
> 标签：ruby-on-rails, apache, passenger

我需要用我的 apache 运行 2 个版本的 ruby​​，我可以尝试新的乘客实验。但我不知道如何安装它，因为当我尝试这个时：

```
sudo ./bin/passenger-install-apache2-module 
```

安装没问题，但文件 mod_passenger.so 不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:26:43.907

您可以使用乘客 gem，使用乘客以独立模式启动您的应用程序，并在您的 apache conf(httpd) 中使用反向代理。

```
<VirtualHost *:80>
ServerName locahost
DocumentRoot /home/test/www/second_app/public
RailsEnv development
PassengerEnabled off
ProxyPass / http://127.0.0.1:3000
ProxyPassReverse / http://127.0.0.1:3000
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:00:32.157

乘客 3.x 仅支持单个 ruby​​ 解释器。

> 5.2\. 乘客红宝石
> 
> 此选项允许指定要使用的 Ruby 解释器。
> 
> 此选项在全局服务器配置中只能出现一次。默认值为红宝石。

[乘客 4.x 原生支持多个红宝石](http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerRuby)：（来自文档的摘录）

**6.2\. 乘客红宝石**

此选项允许指定要使用的 Ruby 解释器。

从 4.0.0 版本开始，该选项可能出现在以下地方：

*   在全局服务器配置中。
*   在虚拟主机配置块中。
*   在一个或块中。
*   在 .htaccess 中，如果 AllowOverride Options 已打开。

如果您想为两个不同的应用程序使用不同的 Ruby 解释器，那么您应该在不同的虚拟主机块中定义不同的 PassengerRuby 指令。

在 4.0.0 之前的版本中，整个 Apache 实例仅支持单个 Ruby 版本，因此PassengerRuby 可能只出现在全局服务器配置中。

默认值为 ruby​​，表示将根据 PATH 环境变量查找 Ruby 解释器。

# delphi - 获取特定设备的驱动程序文件

> ID：10481467
> 
> 赞同：5
> 
> 时间：2012-05-07T11:42:28.440
> 
> 标签：delphi, file, driver, enumerate

我想知道如何像设备管理器一样获取特定设备的所有驱动程序文件？

我有以下代码：

```
procedure TdlgMain.Test(const DeviceIndex: Integer);
var
  PnPHandle: HDEVINFO;
  DevData: TSPDevInfoData;
  DeviceInterfaceData: TSPDeviceInterfaceData;
  FunctionClassDeviceData: PSPDeviceInterfaceDetailData;
  Success: LongBool;
  Devn: Integer;
  BytesReturned: DWORD;
  SerialGUID: TGUID;
begin
  ZeroMemory(@DevData, SizeOf(SP_DEVINFO_DATA));
  DevData.cbSize := SizeOf(SP_DEVINFO_DATA);

  ZeroMemory(@DeviceInterfaceData, SizeOf(TSPDeviceInterfaceData));
  DeviceInterfaceData.cbSize := SizeOf(TSPDeviceInterfaceData);

  if not SetupDiEnumDeviceInfo(hAllDevices,
    DeviceIndex, DevData) then Exit;

  SerialGUID := DevData.ClassGuid;

  PnPHandle := SetupDiGetClassDevs(@SerialGUID, nil, 0, DIGCF_PRESENT or DIGCF_DEVICEINTERFACE);
  if PnPHandle = Pointer(INVALID_HANDLE_VALUE) then
    Exit;

  Devn := 0;
  repeat
    DeviceInterfaceData.cbSize := SizeOf(TSPDeviceInterfaceData);
    Success := SetupDiEnumDeviceInterfaces(PnPHandle, nil, SerialGUID, Devn, DeviceInterfaceData);
    if Success then
    begin
      DevData.cbSize := SizeOf(DevData);
      BytesReturned := 0;
      // get size required for call
      SetupDiGetDeviceInterfaceDetail(PnPHandle, @DeviceInterfaceData, nil, 0, BytesReturned, @DevData);
      if (BytesReturned <> 0) and (GetLastError = ERROR_INSUFFICIENT_BUFFER) then
      begin
        // allocate buffer and initialize it for call
        FunctionClassDeviceData := AllocMem(BytesReturned);
        FunctionClassDeviceData.cbSize := SizeOf(TSPDeviceInterfaceDetailData);
        //FunctionClassDeviceData.cbSize := BytesReturned;
        if SetupDiGetDeviceInterfaceDetail(PnPHandle, @DeviceInterfaceData,
          FunctionClassDeviceData, BytesReturned, BytesReturned, @DevData) then
        begin
          ShowMessage(FunctionClassDeviceData.DevicePath);
        end else
          RaiseLastOSError();
        FreeMem(FunctionClassDeviceData);
      end;
    end;
    Inc(Devn);
  until not Success;
  SetupDiDestroyDeviceInfoList(PnPHandle); 
```

但`ShowMessage()`要么根本不调用，要么返回`\`。如何正确获取文件？

我`devcon`从 WinDDK 看了一下，但它也不返回文件。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:24:55.700

我想到了。没有 API 可以为您执行此操作，您需要解析 INF 文件才能获得结果。对于所有感兴趣的人，这是一个快速的解决方案。

```
procedure TdlgMain.Test(const DeviceIndex: Integer);
var
  Paths: TStringList;
  I: Integer;

  function GetWinDir: string; inline;
  var
    dir: array [0 .. MAX_PATH] of Char;
  begin
    GetWindowsDirectory(dir, MAX_PATH);
    Result := IncludeTrailingBackslash(StrPas(dir));
  end;

  function GetSpecialFolderPath(const folder: Integer): string; inline;
  const
    SHGFP_TYPE_CURRENT = 0;
  var
    path: array [0 .. MAX_PATH] of Char;
  begin
    if SUCCEEDED(SHGetFolderPath(0, folder, 0, SHGFP_TYPE_CURRENT, @path[0]))
    then
      Result := IncludeTrailingBackslash(path)
    else
      Result := '';
  end;

  function LocateInfFile(const F: String): String; inline;
  var
    T: String;
  begin
    Result := '';

    if (Pos(SysUtils.PathDelim, F) > 0) then
    begin
      Result := F;
      Exit;
    end;

    T := GetWinDir();
    if (FileExists(T + 'inf\' + F)) then
      Result := T + 'inf\' + F
    else if (FileExists(T + 'system32\' + F)) then
      Result := T + 'system32\' + F;
  end;

  procedure ReadSectionNoKeys(const AFile, ASection: String;
    const SL: TStringList);
  var
    TheFile: TStringList;
    Line: String;
    TrimEnd: Boolean;
    Idx, Tmp: Integer;
  begin
    TrimEnd := False;

    TheFile := TStringList.Create();
    try
      TheFile.LoadFromFile(AFile);
      Idx := TheFile.IndexOf('[' + ASection + ']');
      if (Idx <> -1) then
      begin
        Idx := Idx + 1;
        while True do
        begin
          Line := Trim(TheFile[Idx]);
          Inc(Idx);
          if (Pos(';', Line) = 1) then
            continue;

          if (Pos('[', Line) > 0) then
            Break;

          Tmp := Pos(',', Line);
          if (Tmp > 0) then
            TrimEnd := True
          else
          begin
            Tmp := PosEx(';', Line, 3);
            if (Tmp > 0) then
              TrimEnd := True;
          end;

          if (Line <> '') then
          begin
            if (TrimEnd) then
            begin
              Line := Trim(Copy(Line, 1, Tmp - 1));
              TrimEnd := False;
            end;

            SL.Add(Line);
          end;

          if (Idx = (TheFile.Count - 1)) then
            Break;
        end;
      end;
    finally
      TheFile.Free();
    end;
  end;

  function IniReadStr(const Ini: TIniFile; const S, L, D: String): String;
  var
    T: Integer;
  begin
    Result := Ini.ReadString(S, L, D);

    T := Pos(';', Result);
    if (T > 0) then
      Result := Trim(Copy(Result, 1, T - 1));
  end;

  procedure ParseInfFile(const InfFile, SectionName: String);
  var
    I: TIniFile;
    SL, FilesList: TStringList;
    X, Y, Tmp: Integer;
    Pth, S, S1: String;
  begin
    I := TIniFile.Create(InfFile);
    try
      if (SectionName <> '') and (I.SectionExists(SectionName)) then
      begin
        // Check if the section has a value called "CopyFiles".
        if (I.ValueExists(SectionName, 'CopyFiles')) then
        begin
          // It has. Read it to a string and separate by commas.
          SL := TStringList.Create();
          try
            SL.CommaText := IniReadStr(I, SectionName, 'CopyFiles', '');

            // Now, every line of the string list is a section name. Check
            // the destination directory of each.
            if (I.SectionExists('DestinationDirs')) then
              for X := 0 to SL.Count - 1 do
              begin
                S := IniReadStr(I, 'DestinationDirs', SL[X], '');
                if (S = '') then
                  S := IniReadStr(I, 'DestinationDirs', 'DefaultDestDir', '');

                if (S <> '') then
                begin
                  // Split the path by comma, if any.
                  Tmp := Pos(',', S);
                  S1 := '';
                  if (Tmp > 0) then
                  begin
                    S1 := Trim(Copy(S, Tmp + 1, Length(S)));
                    S := Trim(Copy(S, 1, Tmp - 1));
                  end;

                  // Convert the numeric value of S to a proper directory.
                  Pth := '';
                  if (S = '10') then
                    Pth := GetWinDir();
                  if (S = '11') then
                    Pth := GetWinDir() + 'system32\';
                  if (S = '12') then
                    Pth := GetWinDir() + 'system32\drivers\';
                  if (S = '50') then
                    Pth := GetWinDir() + 'system\';
                  if (S = '30') then
                    Pth := ExtractFileDrive(GetWinDir());
                  if (StrToInt(S) >= 16384) then
                    Pth := GetSpecialFolderPath(StrToInt(S));

                  if (S1 <> '') then
                    Pth := IncludeTrailingBackslash(Pth + S1);

                  // If we got the path, read the files.
                  if (Pth <> '') then
                  begin
                    FilesList := TStringList.Create();
                    try
                      ReadSectionNoKeys(InfFile, SL[X], FilesList);
                      for Y := 0 to FilesList.Count - 1 do
                        if (Paths.IndexOf(Pth + FilesList[Y]) = -1) then
                          Paths.Add(Pth + FilesList[Y]);
                    finally
                      FilesList.Free();
                    end;
                  end;
                end;
              end;
          finally
            SL.Free();
          end;
        end;

        // Check if there're "Include" and "Needs" values.
        if ((I.ValueExists(SectionName, 'Include')) and
          (I.ValueExists(SectionName, 'Needs'))) then
        begin
          // Split both by comma.
          SL := TStringList.Create();
          FilesList := TStringList.Create();
          try
            SL.CommaText := IniReadStr(I, SectionName, 'Include', '');
            FilesList.CommaText := IniReadStr(I, SectionName, 'Needs', '');
            if (SL.Text <> '') and (FilesList.Text <> '') then
              for X := 0 to SL.Count - 1 do
                for Y := 0 to FilesList.Count - 1 do
                  ParseInfFile(LocateInfFile(SL[X]), FilesList[Y]);
          finally
            FilesList.Free();
            SL.Free();
          end;
        end;
      end;
    finally
      I.Free();
    end;
  end;

begin
  Paths := TStringList.Create();
  try
    ParseInfFile(LocateInfFile(DeviceHelper.InfName), DeviceHelper.InfSection);
    Paths.Sort();

    ListView_InsertGroup(lvAdvancedInfo.Handle, 'Driver Files', 2);
    for I := 0 to Paths.Count - 1 do
      ListView_AddItemsInGroup(lvAdvancedInfo, '', Paths[I], 2);
  finally
    Paths.Free();
  end;
end; 
```

# facebook - 2012 年 5 月 5 日离线权限更改，2012 年 5 月 5 日之后的 publish_stream

> ID：10481470
> 
> 赞同：0
> 
> 时间：2012-05-07T11:42:40.083
> 
> 标签：facebook, facebook-graph-api, permissions

我以前一直用这段代码解决权限请求：

```
<? $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" . $app_id . "&redirect_uri=" . urlencode($fanpage_app.'&scope=publish_stream,offline_access&app_data=af'); ... ?> 
```

但是当权限对话框打开时，没有显示额外的权限，因此不需要它们。你如何请求许可？您是否在使用新的身份验证对话框？

其次，我在请求 publish_stream 时是否仍需要离线访问，以便在我的应用想要发布到应用用户的提要时发布？

TIA 和欢呼，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:57:23.837

回答你问题的第二部分

对于对 Graph API 的所有调用，您需要一个`access_token`. `offline_access`保证你有一个`access_token`不会过期的。因此，您无需`offline_access`在 Facebook 上发帖，但该权限将使您获得未过期的 access_tokens 变得更加轻松。

# ios - 联系电话 iphone sdk

> ID：10481477
> 
> 赞同：0
> 
> 时间：2012-05-07T11:43:05.373
> 
> 标签：ios, cocoa-touch, contacts, abaddressbook

我可以从 iphone sdk 中提取联系人列表的名字和姓氏，但是我无法从中获取电话号码。如果我尝试其他方式，我会收到错误消息，而我使用电话号码获取其他内容的常用方式是代码的详细信息：

```
- (IBAction)buttonmessage {
    ABAddressBookRef addressBook = ABAddressBookCreate(); // create address book reference object
    NSArray *abContactArray = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); // get address book contact array

    NSInteger totalContacts = [abContactArray count];

    for(NSUInteger loop= 0 ; loop < totalContacts; loop++)
    {
        ABRecordRef record = (__bridge ABRecordRef)[abContactArray objectAtIndex:loop]; // get address book record

        if(ABRecordGetRecordType(record) ==  kABPersonType) // this check execute if it is person group
        {
            ABRecordID recordId = ABRecordGetRecordID(record); // get record id from address book record

            recordIdString = [NSString stringWithFormat:@"%d",recordId]; // get record id string from record id

            firstNameString = (__bridge NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty); // fetch contact first name from address book  
            lastNameString = (__bridge NSString*)ABRecordCopyValue(record,kABPersonLastNameProperty); // fetch contact last name from address book

            NSString *phnumber = (__bridge NSString *)ABRecordCopyValue(record, kABPersonPhoneProperty);

            myArray2 = [NSArray arrayWithObjects:firstNameString,lastNameString,phnumber,nil];

            NSString *m12=[NSString stringWithFormat:@"%@,%@,%@",[myArray2 objectAtIndex:0],[myArray2 objectAtIndex:1],[myArray2 objectAtIndex:2]];
        } 
```

输出：

```
Abdullah,Rashed,ABMultiValueRef 0x80426a0 with 1 value(s)
    0: _$!<Mobile>!$_ (0x8042da0) - 0550979691 (0x8042dc0)
2012-05-07 14:43:06.670 Firstphase[2914:207] Hussain,Mahmood,ABMultiValueRef 0x80442d0 with 1 value(s)
    0: _$!<Mobile>!$_ (0x8044290) - 055979896 (0x80442b0)

2012-05-07 14:43:06.671 Firstphase[2914:207] Nasir,Jilaani,ABMultiValueRef 0x8046070 with 1 value(s)
    0: _$!<Mobile>!$_ (0x8046000) - 055982391 (0x8046020)

2012-05-07 14:43:06.673 Firstphase[2914:207] Ghulam,Basith,ABMultiValueRef 0x8046850 with 1 value(s)
    0: _$!<Mobile>!$_ (0x8046810) - 055871943 (0x8046830) 
```

但是，如果您仔细查看，我可以在没有任何额外内容的情况下获得名字和姓氏。但我无法以同样的方式获取电话号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:00:30.233

检查这个：

你的问题可以用这个[答案](https://stackoverflow.com/questions/5369423/get-iphone-phone-number-label-from-address-book)或[这个](https://stackoverflow.com/questions/5618635/how-to-get-phone-number-from-address-book-as-string)来解决。

据我了解，`ABRecordCopyValue(ref, kABPersonPhoneProperty)`返回一些数组值。而且您正试图获得一个字符串，这就是您可能面临问题的原因。我没有尝试过这个解决方案，但认为它会起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:10:09.277

```
ABMutableMultiValueRef multi;
int multiCount = 0;
multi = ABRecordCopyValue(record, kABPersonPhoneProperty);
multiCount = ABMultiValueGetCount(multi);
for (int i = 0; i < multiCount; i++) {

    phoneNumber = (NSString * ) ABMultiValueCopyValueAtIndex(multi, i);
    [someArray addObject: phoneNumber];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:05:04.050

尝试以下操作：

```
ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(record, kABPersonPhoneProperty);
NSArray *phoneNumbers = (NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty);

for (id number in phoneNumbers) {                    
    // do whatever you want
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T12:09:08.567

以下代码将从联系人列表中检索所有电话号码：-

```
ABAddressBookRef addressBook = ABAddressBookCreate( );
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );
    for ( int i = 0; i < nPeople; i++ )
    {
        ABRecordRef ref = CFArrayGetValueAtIndex( allPeople, i );

        ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(ref, kABPersonPhoneProperty);
        NSArray* phoneNumbers = (NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty);
        CFRelease(phoneNumberProperty);
        [phoneNumbers release];

    } 
```

它会工作..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T08:09:58.430

```
-(void)displayPerson
{ 

 CFErrorRef error = NULL;

  ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &error);

    if (addressBook != nil)
    {
        NSLog(@"Succesful.");
        NSArray *allContacts = (__bridge_transfer NSArray    *)ABAddressBookCopyArrayOfAllPeople(addressBook);

        NSUInteger i = 0;
        for (i = 0; i < [allContacts count]; i++)
        {
            Person *person = [[Person alloc] init];
           ABRecordRef contactPerson = (__bridge ABRecordRef)allContacts[i];
            NSString *firstName = (__bridge_transfer NSString *)ABRecordCopyValue(contactPerson, kABPersonFirstNameProperty);
            NSString *lastName =  (__bridge_transfer NSString *)ABRecordCopyValue(contactPerson, kABPersonLastNameProperty);
            NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
            NSString *phone=nil;
            ABMultiValueRef phoneNumbers = ABRecordCopyValue(contactPerson,                                                                                kABPersonPhoneProperty);
            if (ABMultiValueGetCount(phoneNumbers) > 0) {
                phone = (__bridge_transfer NSString*)
                ABMultiValueCopyValueAtIndex(phoneNumbers, 0);
            } else {
                phone = @"[None]";
            }
            person.fullname = fullName;
            person.phoneNum=phone;
            [self.tableData addObject:person];
            person=nil;
    }
     CFRelease(addressBook);

    }
} 
```

# jakarta-ee - 如何获取位置 \usr\sap\ \JC \j2ee\集群\服务器 \log 以编程方式使用 SAP Netweaver

> ID：10481480
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:43:29.727
> 
> 标签：jakarta-ee, sap

我们正在为我们的项目使用 SAP Netweaver Development Studio。我的问题是我不知道如何在 java 代码中获取确切位置 \usr\sap\\JC\j2ee\cluster\server\log。目前，我正在对代码进行硬编码，如下所示。

文件 file = new File("c:\\usr\\sap\\SID\\JC\\j2ee\\cluster\\server\\log\\log.csv")

在我使用 windows 的开发中。我可以在本地成功写入文件，但我想知道如何使用 UNIX 环境在实时 SAP 服务器中写入。

请注意，每个服务器中的每个 SAPID 都不同。

希望任何人都可以帮助我，并将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T13:47:27.510

您可以使用集群信息：

```
IClusterInformation clusterInfo = (IClusterInformation) PortalRuntime.getRuntimeResources().getService(IClusterInformation.KEY); 
```

然后，获取属性：

```
clusterInfo.getSAPJ2EEServerDirectory() 
```

根据您的系统，结果将与此类似，然后将日志文件夹附加到返回的路径：

```
C:\usr\sap\J01\J00\j2ee\cluster\server0 
```

# php - php会话启动错误

> ID：10481484
> 
> 赞同：-1
> 
> 时间：2012-05-07T11:43:43.353
> 
> 标签：php, api

我有页面作为结帐过程的一部分，它使用了出现此错误的 3rd 方 API：

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由第 1 行 /upgrades/upgradevip.php 中的（输出开始于 /upgrades/upgradevip.php:1）发送

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 第 1 行 /upgrades/upgradevip.php 中的标头已发送（输出开始于 /upgrades/upgradevip.php:1）

我需要更改 php 代码中的哪一行才能使其正常工作？

这是代码：

```
<?php session_start();

include('./includes/config.php');
include('./includes/functions.php');
include('./lib/recurly.php');

$message='';

// Required for the API
Recurly_Client::$apiKey = API_KEY;
// Optional for Recurly.js:
Recurly_js::$privateKey = PRIVATE_KEY;

$acc=get_querystring_var_val('account');
$plan=get_querystring_var_val('plan');
$subid=get_querystring_var_val('subid');
$aff=get_querystring_var_val('aff');
$firstname=get_querystring_var_val('firstname');
$lastname=get_querystring_var_val('lastname');
$email=get_querystring_var_val('email');
$phonenumber=get_querystring_var_val('phonenumber');
$brand=get_querystring_var_val('brand');
$zip=get_querystring_var_val('zip');

if(isset($_POST['process']) && $_POST['process'] =='1'){

    /*
    * get all session info to process
    */

    $selCardType=get_session_val('selCardType');
    $txtCCNumber=get_session_val('txtCCNumber');
    $txtSecurityCode=get_session_val('txtSecurityCode');
    $selMonth=get_session_val('selMonth');
    $selYear=get_session_val('selYear');

    $account_code=$acc;

    if($account_code!=''){

        /*
        * process transaction
        */

        $transaction = new Recurly_Transaction();
        $transaction->description = $upsell_description;
        $transaction->amount_in_cents = $upsell_amount_in_cents;
        $transaction->currency = CURRENCY_CODE;

        $account = new Recurly_Account();
        $account->account_code = $account_code;

        $billing_info = new Recurly_BillingInfo();
        $billing_info->first_name = $firstname;
        $billing_info->last_name = $lastname;
        $billing_info->number = $txtCCNumber;
        $billing_info->verification_value = $txtSecurityCode;
        $billing_info->month = $selMonth;
        $billing_info->year = $selYear;
        $billing_info->zip = $zip;

        $account->billing_info = $billing_info;
        $transaction->account = $account;

        $success=false;
        try{
            $transaction->create();
            $success=true;
        }catch(Exception $e){
            $message='There was problem processing your request.' . $e;
        }

        if($success){
            /*
            * set one time transaction details in session
            */
            try {
                $transactions = Recurly_TransactionList::getForAccount($account_code);
                foreach ($transactions as $transaction) {
                  //print "$subscription\n";
                  //echo '<br/><br/>';
                  $_SESSION['onetime_receipt']=$transaction->uuid;
                }
            } catch (Recurly_NotFoundError $e) {
                //$message= "Transaction not found" . $e;
            }
            header('Location: /congratulations2deff5-us.php?account='. $acc.'&plan=' . $plan.'&subid=' . $subid.'&aff='.$aff.'&firstname='.$firstname.'&lastname=' .$lastname. '&email=' .$email .'&phonenumber='.$phonenumber.'&brand=' . $brand . '&zip=' . $zip);
            exit;

        }else{
            //ideally this is place to set a variable to show a form which asks a user to fill contact info and cc info agaian
            $message='Transaction could not be processed';
        }
    }else{
        $message='There was problem processing your request.';
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:46:20.620

如果您在开始`<?php`标签之前确实有空格，请将它们删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:06:49.200

检查此 php 文件是否首先加载（例如 - 这是“index.php”），但未包含在 index.php 或其他位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:46:53.100

试试这样：

```
<?php
session_start(); 
```

并删除前导空格

# python - Python POST 请求 - 设置整个原始帖子正文？

> ID：10481492
> 
> 赞同：2
> 
> 时间：2012-05-07T11:44:16.220
> 
> 标签：python, post, request

我想用 Python 发送一个 POST 请求，可以说将整个 POST 正文设置为某个字符串。我该怎么做？urllib/urlib2/httplib，对我来说没关系...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:50:30.587

例如 urllib2 似乎允许以简单的方式设置正文（以及标题）：http: [//docs.python.org/library/urllib2.html#urllib2.Request](http://docs.python.org/library/urllib2.html#urllib2.Request)

# c# - 使用具有不同参数的委托

> ID：10481493
> 
> 赞同：0
> 
> 时间：2012-05-07T11:44:23.197
> 
> 标签：c#, delegates, lambda, dry, anonymous-function

我想干燥我的源代码。假设我有一些主要在一行中不同的功能 - 我怎么能做到这一点？

```
public Result foo (int x, int y, int z){
    Log.Say("Foo started!");                                 <<< DIFFERENCE
    DoSomeMagic();
    try {
        result = controller.foo(x, y, z);                    <<< DIFFERENCE
    } catch (Exception){
        Log.Say("Something went terribly wrong");
    }
    return result;
}

public Result bar (Person a, string whatever){
    Log.Say("Bar started!");                                 <<< DIFFERENCE
    DoSomeMagic();
    try {
        result = controller.bar(a, whatever);                <<< DIFFERENCE
    } catch (Exception) {
        Log.Say("Something went terribly wrong");
    }
    return result;
} 
```

这让我发疯了，因为它不可能那么困难？我现在对各种方法感到困惑；到目前为止，我尝试使用委托、Func、Lambda 表达式、匿名函数来完成它，但我就是无法让它工作（我想我需要休息一下）。

```
public Result handler (Func callbackMethodWithArgs) {
    Result result = null;
    Log.Say(method + " started!");
    DoSomeMagic();
    try {
        result = invoke(callbackMethodWithArgs) as Result;
    } catch (Exception) {
        Log.Say("Something went terribly wrong");
    }
    return result;
}

public Result foo (int x, int y, int z) {
    return handler(controller.foo(x, y, z));
}

public Result bar (Person a, string whatever) {
    return handler(controller.bar(a, whatever);
} 
```

作为补充，有可能使用匿名函数真的很棒，比如

```
public Result foo (int x, int y, int z) {
    return handler(delegate () {
        controller.foo(x, y, z));
        doSomethingOther();
    });
} 
```

有什么建议么？？谢谢！（我阅读了许多关于类似主题的问题，但我没有找到任何解决问题的方法 - 所以我认为它可能是重复的 - 如果是这样，我很抱歉）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:12:37.487

您可以使用以下方法执行此操作`Func<Result>`：

```
public Result handler (string name, Func<Result> method) {
    Result result = null;
    Log.Say(name + " started!");
    DoSomeMagic();
    try {
        result = method();
    } catch (Exception) {
        Log.Say("Something went terribly wrong");
    }
    return result;
} 
```

然后在呼叫站点将他们变成代表：

```
public Result foo (int x, int y, int z) {
    return handler("Foo", () => controller.foo(x, y, z));
}

public Result bar (Person a, string whatever) {
    return handler("Bar", () => controller.bar(a, whatever);
} 
```

注意：如果您使用的是 .NET 2.0，则可以`Func<_>`在使用上面的代码之前手动创建委托：

```
public delegate TResult Func<TResult>(); 
```

顺便说一句，以这种方式隐藏异常并不是一个好主意。您正在返回 null 并仅记录一个异常，而不是重新抛出它并让调用代码决定要做什么。可以适用于您的用例，但通常是一个危险信号。

# android - 如何将微调器简单下拉项更改为简单下拉列表

> ID：10481495
> 
> 赞同：0
> 
> 时间：2012-05-07T11:44:38.577
> 
> 标签：android, android-spinner

我想从xml更改哪个

怎么做？不是来自代码。我确实右键单击并将布局更改为 spinner_list_item ，但它没有用，

这是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">  

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="480dp"
        android:orientation="vertical" >

        <!-- Name Label -->

        <TextView
            android:id="@+id/name"
            android:layout_width="104dp"
            android:layout_height="wrap_content"
            android:paddingBottom="2dip"
            android:paddingTop="6dip"
            android:textColor="#dc6800"
            android:textSize="16sp"
            android:textStyle="bold" />

        <!-- Description label -->
        <TextView
            android:id="@+id/desciption"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <!-- Linear layout for cost and price Cost: Rs.100 -->
        <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <!-- Cost Label -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#5d5d5d"
            android:gravity="left"
            android:textStyle="bold"
            android:text="Cost: " >
        </TextView>
        <!-- Price Label -->

        <TextView
            android:id="@+id/cost"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textColor="#acacac"
            android:textStyle="bold" >

        </TextView>

        </LinearLayout>

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="CheckBox" />

        <Spinner
            android:id="@+id/qty"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/item_qty" 

        </Spinner>

    </LinearLayout>

</LinearLayout> 
```

# opengl - 为什么 cudaGLSetGLDevice 失败，即使它是在 main 函数的第一行调用的

> ID：10481499
> 
> 赞同：0
> 
> 时间：2012-05-07T11:44:53.163
> 
> 标签：opengl, interop, cuda

我想使用 OpenGL 和 CUDA 之间的互操作性。我知道，正如一些教程所说，第一步是选择设备。但是，当我在主函数的第一行调用 cudaGLSetGLDevice(0) 时，程序退出并显示信息“cudaSafeCall() Runtime API error 36: cannot set while device is active in this process.”

实际上，即使我在调用 cudaGLSetDevice 之前使用了 cudaDeviceProp 和 cudaChooseDevice，错误仍然存​​在。

相信我，我的电脑只有一个 GPU，9800GT。而且我知道 cudaGLSetGLDevice 的调用应该在任何其他 CUDA 函数之前，所以这就是为什么我把它放在 main 函数的第一行。

我使用 Windows SDK 来渲染 OpenGL 而不是 glut，这有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:47:45.100

您需要在调用之前在 opengl 上下文中初始化`cudaGLSetDevice`。在过剩的情况下`glutInit(argc, argv);`被称为。在使用任何 cuda<->opengl 互操作性函数调用之前初始化 opengl 上下文。

# c# - devex 枢轴网格不计算列的总和

> ID：10481500
> 
> 赞同：0
> 
> 时间：2012-05-07T11:44:56.363
> 
> 标签：c#, sql, devexpress, pivot

![在此处输入图像描述](../Images/384da79ca612da93285c34dde9cf790b.png)

kisibasi 是一个计算值，它是 satisMiktari/pax 的结果，如 51/3 = 17 和每个值的总和。例如 emin total 应该像：105/45= 2,311 但它添加 17,00+1,29 作为其正常行为。

我怎样才能找到真正的计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:04:06.037

我解决了不使用该总数的问题。因为没有解决方案。

# jquery - 下拉选择中的jquery函数

> ID：10481503
> 
> 赞同：23
> 
> 时间：2012-05-07T11:45:06.970
> 
> 标签：jquery, drop-down-menu

如果选择了某个下拉选项，我需要运行 jquery 函数。

```
<select name=dropdown size=1>
    <option value=1>option 1</option>
    <option value=2>option 2</option>
</select> 
```

我已经准备好函数中的命令，我只是不确定如何制作它，所以如果选项 2 当前在下拉列表中处于活动状态，则运行该函数。

（下拉菜单没有提交按钮，我希望它在用户突出显示选项时运行）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-07T11:50:30.667

试试这个**演示** [http://jsfiddle.net/JGp9e/](http://jsfiddle.net/JGp9e/)

这会有所帮助，祝你好运！

**代码**

```
$('select[name="dropdown"]').change(function(){

    if ($(this).val() == "2"){
        alert("call the do something function on option 2");
     }        
});​ 
```

**HTML**

```
<select name="dropdown" size=1>
    <option value="1">option 1</option>
    <option value="2">option 2</option>
</select>​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T11:47:57.443

采用

```
$("#idofselectbox").change(function(){
// your code here
}); 
```

希望这可以帮助....

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-07T11:49:33.567

试试这个，[在 JsFiddle 上演示](http://jsfiddle.net/22dDE/)

```
$('select[name="dropdown"]').change(function() {
    alert($(this).val());

}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-07T11:49:48.640

```
$(document).ready(function() {
  $("select[name='dropdown']").change(function() {
     alert($(this).val());
  });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T11:47:43.677

你需要使用`change`函数

```
$('select[name=dropdown]').change(function() {
    alert($(this).val());
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T11:55:09.093

```
 $(document).ready(function() {
      $("select[name='dropdown']").change(function() {
         if($(this).val()==2){
             //do what u want here
           }//u can check your desired value here
     });
   }); 
```

我想你想要这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-19T04:57:03.867

一个简单的方法可以如下：

```
<select name="select" id="select" onChange="window.location = this.value">
  <option value="/en">English</option>
  <option value="/ps">Pashto</option>
</select> 
```

# salesforce - 具有超过 2 个变量的 for 循环

> ID：10481510
> 
> 赞同：1
> 
> 时间：2012-05-07T11:45:36.593
> 
> 标签：salesforce

是否可以在 for 循环中使用超过 2 个变量。

我试过这个

```
for(integer j=0, k=1; j<iSize.size(); j++, k++) {
} 
```

并收到此错误错误：编译错误：期望右括号，在第 188 行第 53 列找到“，”

请帮助我找到解决方案。谢谢阿努

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:04:58.390

不，在这种情况下，因为只有一个条件可以结束循环，您可以编写以下内容：

```
integer k = 1;
for (integer j=0; j < iSize.size(); j++)
{
    k++;
    //Code goes here
} 
```

如果你真的需要两个循环，你可以做

```
for (integer j=0; j < iSize.size(); j++)
{
    for (integer k = 1; k < Some_Condition; k++)
    {
         //Code goes here
    }
} 
```

遵循这些建议中的任何一个都应该清除该错误。[编辑]您现在拥有的代码格式不正确，编译器期待结束括号，因为您只能在 for 循环末尾放置 1 个语句，而您有 2 个。

# php - 在 PHP 中重置 cookie 生命周期和会话 ID

> ID：10481511
> 
> 赞同：0
> 
> 时间：2012-05-07T11:45:41.940
> 
> 标签：php, session-cookies

当用户登录 PHP 时，我正在尝试重置会话 cookie 及其生命周期。这听起来很微不足道，但我仍在努力使它正确。

加载页面时，用户可能已经拥有也可能没有 cookie。如果他有一个，我想删除它并重置 sessionId，如果没有，我会给他一个新的，有适当的生活。`session_status()`由于我使用的 PHP 版本，我无法使用。

这是我想出的，但是当用户已经拥有会话 cookie 时它不起作用。

```
if (isset($_COOKIE[session_name()])) setcookie(session_name(), false);
session_set_cookie_params(2678400); // sets cookie life to one month
session_start();
// do stuff 
```

当用户登录时，旧的 cookie 通常会被删除，但`session_start()`不会传递新的 cookie。有没有一种方法可以强制提供一个新的 cookie 而无需手动实现会话 ID 创建的逻辑？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:12:45.463

您不必在 PHP 端销毁/重新启动会话，只需向客户端发送一个新的 cookie。只需`setcookie()`再次调用（使用现有的会话 ID），就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:08:40.230

您可以使用`session_destroy()`函数销毁与当前会话相关的所有数据，并使用`setcookie()`函数将您的 cookie 过期日期设置为过去，以触发浏览器中的删除机制。

就像是：

```
if (isset($_COOKIE[session_name()])) setcookie(session_name(), false);
session_destroy();
setcookie(session_name(), "", time() - 3600);
);
session_start();
// do stuff 
```

# mysql - 使用groovy加入MySQL表后如何使用表别名区分多个属性

> ID：10481514
> 
> 赞同：0
> 
> 时间：2012-05-07T11:45:52.547
> 
> 标签：mysql, sql, groovy

使用表别名连接后如何区分不同表的属性？

作为一个简化的示例，我有两个具有很多属性的表，属性名称不是唯一的，两个表都有`id`- 例如。

现在 - 我有以下示例性查询：

```
SELECT * FROM tableA ta INNER JOIN tableB tb ON ta.id = tb.a_id 
```

如何获得两个“id”属性的值？

以下没有奏效：

```
def sql = Sql.newInstance("jdbc:mysql://${MYSQL_SERVER}/${MYSQL_TABLE}", MYSQL_USER, MYSQL_PASSWORD, "com.mysql.jdbc.Driver")
sql.eachRow (query){ row ->
    println "ID of the 'table a object' : ${row['ta.id']}"
    println "ID of the 'table b object' : ${row['tb.id']}"
} 
```

有了这个，我得到以下错误：`java.sql.SQLException: Invalid column name ta.id`

我的临时（但不希望）解决方案是在查询中指定属性：

```
SELECT ta.id as aID, tb.id as bID, * FROM tableA ta INNER JOIN tableB tb ON ta.id = tb.a_id 
```

两者`tableA`都有`tableB`很多属性 - 可能重复 - 我不想分别不能手动指定。

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:21:50.700

I have a working example of what you are explaining:

```
sql.eachRow("select * from Group_ G inner join Organization_ O on G.name = O.organizationId")  { row ->
    println "${row['G.name']} ${row['O.name']}"
} 
```

From your code, what I see is that:

```
ON ta.id = tb.a_id 
```

are not the same properties you are trying to access:

```
row['ta.id']
row['tb.id'] // tb.a_id? 
```

# java - 将 DataRow 转换为强类型 DataRow

> ID：10481515
> 
> 赞同：1
> 
> 时间：2012-05-07T11:45:56.183
> 
> 标签：java, casting, datarow, jdesktop

我有一个扩展类`DataRow`：

```
import org.jdesktop.dataset.DataRow;

public class MainDataRow extends DataRow {
  private MainDataTable baseDataTable;

  protected MainDataRow(MainDataTable dt) {
    super(dt);
    this.baseDataTable = dt;
  }

  public int    getId()                           { return (int)    super.getValue(baseDataTable.getColId()); };
  public void   setId(int id)                     {                 super.setValue(baseDataTable.getColId(), id); };
  public int    getDelta()                        { return (int)    super.getValue(baseDataTable.getColDelta()); };
  public void   setDelta(int delta)               {                 super.setValue(baseDataTable.getColDelta(), delta); };
  public String getNombre()                       { return (String) super.getValue(baseDataTable.getColNombre()); };
  public void   setNombre(String nombre)          {                 super.setValue(baseDataTable.getColNombre(), nombre); }; 
```

还`MainDataTable`扩展`DataTable`, 并返回`getColId()`, `getColDelta()`,的有效列`getColNombre()`。

我想要做：

```
MainDataTable dt = new MainDataTable(ds);
MainDataRow dr = (MainDataRow) dt.appendRow(); 
```

但这是不可能的，因为`CastClassException`( `dt.appendRow`return `DataRow`and `MainDataRow`is extended `DataRow`，反之亦然，所以唯一的可能性可能是类似于`DataRow dr = (DataRow) new MainDataRow(dt);`)。

在 c++ 中，它可以通过以下方式轻松实现`DataRowBuilder`，覆盖`NewRowFromBuilder()`和`MainDataTable`覆盖受保护的创建者`DataRowBuilder`（`MainDataRow`将[DataRow 转换为强类型 DataRow：他们是如何做到的？](https://stackoverflow.com/questions/8322679/casting-datarow-to-strongly-typed-datarow-how-do-they-do-it)）。

我怎么能在Java中做到这一点？

**编辑**

MainDataTable 类：

```
public class MainDataTable extends TypedDataTable<MainDataRow> {
...
} 
```

和 TypedDataTable 类：

```
public abstract class TypedDataTable<TypeOfRow> extends DataTable {
  protected boolean locked;

  public TypedDataTable(DataSet ds, boolean appendRowSupported) {
    super(ds);
    InitClass();
    super.setAppendRowSupported(appendRowSupported);
    locked = false;
  }

  public Object clone() {
    try {
      return super.clone();
    } catch (CloneNotSupportedException e) {
      e.printStackTrace();
      return null;
    }
  }

  @Override
  public abstract DataRow appendRow();
  @Override
  public abstract DataRow appendRowNoEvent();
  public abstract void InitVars();
  public abstract void InitClass();

  public boolean isLocked() {
    return locked;
  }

  public void setLocked(boolean locked) {
    this.locked = locked;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:19:05.730

覆盖`appendRow()`并`appendRowNoEvent()`在 MainDataTable 中返回 MainDataRow

```
public abstract class TypedDataTable<TypeOfRow extends DataRow> extends DataTable {
  protected boolean locked;

  public TypedDataTable(DataSet ds, boolean appendRowSupported) {
    super(ds);
    InitClass();
    super.setAppendRowSupported(appendRowSupported);
    locked = false;
  }

  public Object clone() {
    try {
      return super.clone();
    } catch (CloneNotSupportedException e) {
      e.printStackTrace();
      return null;
    }
  }

 @Override
 public TypeOfRow appendRowNoEvent() {
     if (appendRowSupported) {
         TypeOfRow row = createDataRow(); //<-- HERE we create a MainDataRow!!!
         rows.add(row);
         return row;
     } else {
         return null;
     }
 }

 @Override
 public TypeOfRow appendRow() {
      return (TypeOfRow)super.appendRow();
 }

  public abstract TypeOfRow createDataRow();
  public abstract void InitVars();
  public abstract void InitClass();

  public boolean isLocked() {
    return locked;
  }

  public void setLocked(boolean locked) {
    this.locked = locked;
  }
} 
```

# java - 使用 JSTL 或 EL 在 JSP 中显示 servlet 错误

> ID：10481516
> 
> 赞同：0
> 
> 时间：2012-05-07T11:45:58.447
> 
> 标签：java, jsp, jakarta-ee, servlets, jstl

我想在 servlet 重定向到的 jsp 页面中显示错误消息，例如 SQLException 错误。我是 java 和 JSP 的新手，但我已经设法获得了一些基本的东西，比如使用 servlet 将数据保存到工作的数据库中。下面是我捕获遇到的错误的代码

```
 catch(SQLException e){
         out.println("SQL Error encountered "+e.getMessage()); 
```

如何将此错误捕获到已由 servlet 使用 jstl 或表达式语言重定向到的 jsp 页面中？例如，如果管理员从名为 createuser.jsp 的页面提交了重复的电子邮件地址，则该错误应显示在 creatuser.jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:56:10.017

您永远不应该在前端发布与异常相关的材料，因为这可以提供有关您的内部结构和底层架构的信息，这绝不是一个好主意，因为它可能导致可能的攻击。

您可以做的是进行某种形式的验证，如此处所示，[并且](https://stackoverflow.com/questions/4983622/form-filling-validation-in-java)在您的情况下，您无需显示异常消息，而只需检查名称，如果它抛出异常，只需显示一条消息在屏幕上是这样的：`User Already Exists!`。对于非技术人员来说，诸如此类的错误消息通常也不那么令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:58:47.953

您可以将消息添加为请求的属性：

小服务程序：

```
catch(SQLException e) {
    request.setAttribute("exception", "SQL error encountered");
} 
```

jsp：

```
${exception} 
```

# ios - BarcodeScanner 未加载/显示

> ID：10481519
> 
> 赞同：0
> 
> 时间：2012-05-07T11:46:09.910
> 
> 标签：ios, cordova, barcode-scanner

我安装了电话间隙的条形码插件并按照所有说明进行操作。但是当我启动应用程序并按下按钮开始扫描代码时，它什么也没做。

导入所有文件，添加插件，...

仍然没有运气。它只是没有做任何事情，而且我也没有收到任何错误消息。

任何人都知道它为什么不加载/显示？

使用最新的 phone gap (cordova) 和 iOS 5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:50:17.783

据我了解，iOS 条码扫描器插件的当前版本是使用不高于 1.5.0 的 Phonegap 测试的。

[http://groups.google.com/group/phonegap/msg/7a56c9de171050a1](http://groups.google.com/group/phonegap/msg/7a56c9de171050a1)

要进行初始测试，只需按照上面链接中的说明进行操作：

1.  将 Phonegap 1.5.0 添加到 xCode
2.  解压下面的 xCode 项目并在带有网络摄像头的物理设备上运行它：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner/Example](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner/Example)

如果这有效，您可以在自己的项目中尝试相同的方法。

# python - 如何更改 BeautifulSoup 的解析器？

> ID：10481527
> 
> 赞同：2
> 
> 时间：2012-05-07T11:46:54.090
> 
> 标签：python, parsing, beautifulsoup

我想知道你将如何实现这一目标。

在它提到的文档中：

```
BeautifulSoup(markup, "lxml") 
```

我试过标记是我正在阅读的html文件，我得到的只是这个错误：

```
AttributeError: 'str' object has no attribute 'text'` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:57:59.230

我可以肯定地说 Beautiful Soup 3 不允许选择解析器。您需要使用 Beautiful Soup 4。

# java - 在 Java 中，哪些对象放在栈上，哪些放在堆上？

> ID：10481528
> 
> 赞同：4
> 
> 时间：2012-05-07T11:47:09.567
> 
> 标签：java, heap-memory, stack-memory

对于 Java 函数中的语句：

```
Xxx xxx = new Xxx() {
    public Abc abc(final Writer out) {
        return new SomeFunction(out) {
            boolean isDone = false;
            public void start(final String name) {
                /* blah blah blah */
            }
        };
    }
}; 
```

哪些变量，包括函数，放在堆上，哪些将放在堆栈上？

我问这个的原因是 JVM 中的分段错误：

```
kernel: java[14209]: segfault at 00002aab04685ff8 rip 00002aaab308e4d0 rsp 00002aab04685ff0 error 6 
```

`00002aab04685ff8`并且`00002aab04685ff0`接近了，似乎堆栈增长太快了。我尝试排查这部分代码，多次调用该函数时怀疑是否是问题的原因。如果堆上的某些变量引用了堆栈，是否有可能没有清除堆栈？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:11:15.850

一个特定对象是否在堆上的问题有点复杂。

一般来说，在 Java 中，所有对象都分配在堆上，因为方法可能返回或存储指向该对象的指针。如果该对象已被放入堆栈，则在下一次将堆栈帧放入该堆栈时，它将被覆盖。

但是，HotSpot JIT 编译器会执行称为[Escape Analysis](http://en.wikipedia.org/wiki/Escape_analysis)的操作。此分析通过查看方法的代码来确定对象是否“逃脱”了方法的范围。如果一个对象**没有**转义，编译器可以安全地将它分配到堆栈上。

维基百科有更多关于[Java 逃逸分析的](http://en.wikipedia.org/wiki/Java_performance#Escape_analysis_and_lock_coarsening)信息，还有关于多线程和锁定的信息。

* * *

关于堆栈溢出：调用堆栈上的堆栈帧**总是**在方法完成后被删除。实际上，甚至不需要显式删除它。下一帧将覆盖之前的内容。

此外，尽管在其他语言（如 C）中，通过将非常大的对象放在堆栈上可能会导致堆栈溢出，但我认为这在 Java 中不会发生。我希望 Sun (Oracle) 的工程师足够聪明，不会让 VM 在堆栈上存储大量对象。

因此，堆栈溢出的唯一可能性是嵌套方法调用过多。由于堆栈空间足够大，可以处理任何“正常”的方法调用嵌套，因此堆栈溢出通常表示代码中存在无限（或非常大）递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:50:21.617

`name`, `isDone`, `out`,`ABC`和指向匿名的“指针”`someFunction`都将在堆栈上；其余的进入堆。

# cassandra - 无法在 cassandra 1.1 中设置缓存容量

> ID：10481529
> 
> 赞同：1
> 
> 时间：2012-05-07T11:47:10.240
> 
> 标签：cassandra

我正在尝试为 Cassandra 1.1 中的某些 CF 启用行缓存。

```
UPDATE COLUMN FAMILY Users WITH rows_cached=2000 AND row_cache_provider='SerializingCacheProvider'; 
```

如果我在 CLI 中运行上述命令，则会出现错误

```
java.lang.IllegalArgumentException: No enum const class org.apache.cassandra.cli.CliClient$ColumnFamilyArgument.ROWS_CACHED 
```

然后我尝试了 nodetool setcachecapacity nodetool -h cssa01-04 setcachecapacity keyspace1 Users 200000 2000 的另一种方法

它给出了一个错误

```
Exception in thread "main" java.lang.IllegalArgumentException
    at com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap.setCapacity(ConcurrentLinkedHashMap.java:291)
    at org.apache.cassandra.cache.ConcurrentLinkedHashCache.setCapacity(ConcurrentLinkedHashCache.java:87)
    at org.apache.cassandra.cache.InstrumentingCache.updateCapacity(InstrumentingCache.java:79)
    at org.apache.cassandra.cache.InstrumentingCache.setCapacity(InstrumentingCache.java:84)
    at org.apache.cassandra.service.CacheService.setKeyCacheCapacityInMB(CacheService.java:243)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:93)
    at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:27)
    at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeSetter(MBeanIntrospector.java:238)
    at com.sun.jmx.mbeanserver.PerInterface.setAttribute(PerInterface.java:84)
    at com.sun.jmx.mbeanserver.MBeanSupport.setAttribute(MBeanSupport.java:240)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.setAttribute(DefaultMBeanServerInterceptor.java:762)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.setAttribute(JmxMBeanServer.java:699)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1450)
    at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)
    at javax.management.remote.rmi.RMIConnectionImpl.setAttribute(RMIConnectionImpl.java:683)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

知道如何解决这个问题吗？

谢谢马尼什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T03:26:33.037

在 Cassandra 1.1 中，您不再需要在各个列族上设置缓存容量。相反，只需设置缓存=rows_only，以及 cassandra.yaml 中的总缓存大小。

有关详细信息，请参阅[http://www.datastax.com/dev/blog/caching-in-cassandra-1-1 。](http://www.datastax.com/dev/blog/caching-in-cassandra-1-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:35:14.217

我对 Cassandra 的代码不够熟悉，但 CLHM 的前提是容量不能为负数。高温高压

```
 /**
   * Sets the maximum weighted capacity of the map and eagerly evicts entries
   * until it shrinks to the appropriate size.
   *
   * @param capacity the maximum weighted capacity of the map
   * @throws IllegalArgumentException if the capacity is negative
   */
  public void setCapacity(long capacity) {
    if (capacity < 0) {
      throw new IllegalArgumentException();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:00:39.253

I have described How to enable caching for Cassandra-1.1 here : [Caching in Cassandra-1.1](http://www.shareitexploreit.blogspot.in/2012/05/caching-in-cassandra-11.html)

# c# - 会话超时后是否有任何简单的方法可以重定向到会话过期页面而不重定向到formauthentication loginUrl

> ID：10481533
> 
> 赞同：0
> 
> 时间：2012-05-07T11:47:20.353
> 
> 标签：c#, asp.net, iis

我知道我们有表单身份验证来设置 loginUrl，当会话到期时，它会自动重定向到这个 URL。

我有一个要求，我必须在会话到期时显示不同的页面而不是 login.aspx

我正在寻找它，但没有找到任何合适的易于实施的解决方案。

我不想更改为现有的已部署站点代码，而客户希望实现这个新的 SessionExpired.aspx 页面

我读了[http://www.schnieds.com/2009/07/aspnet-session-expiration-redirect.html](http://www.schnieds.com/2009/07/aspnet-session-expiration-redirect.html)，他们有很好的解决方案，但我必须在 .cs 文件中进行更改，我至少不想这样做直到我得到任何简单的解决方案。

是否有任何简单的方法可以在表单身份验证超时后重定向到会话过期页面而不重定向到 loginUrl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:50:29.530

创建`SessionExpired.aspx`页面后，您只需在页面的 aspx（而不是 .cs）的 head 部分中添加一行。（我希望你已经实现了母版页，所以它只会在母版页添加）

```
<meta http-equiv="refresh"
   content="1201;url=http://yourdomain.com/SessionExpired.aspx" /> 
```

此行会在 1201 秒，即 20 分钟后自动将浏览器重定向到 SessionExpired 页面

# apache-flex - Flex：在函数中使用 DateGrid 的 selectedItem

> ID：10481542
> 
> 赞同：0
> 
> 时间：2012-05-07T11:48:00.400
> 
> 标签：apache-flex, mobile, datagrid, selecteditem

我在移动 Flex (4.6) 应用程序中使用 spark Datagrid。当在网格中选择一行时，我想触发一个函数并在同一函数中使用所选项目的内容。这是我的数据网格

```
<s:DataGrid id="patientGrid" x="317" y="211" width="393" height="177"
            dataProvider="{patientInfo}" gridClick="patientSelect(event)">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="FirstName" headerText="First Name"/>
            <s:GridColumn dataField="LastName" headerText="Last Name"/>
            <s:GridColumn dataField="DateOfBirth" headerText="Date Of Birth"/>
            <s:GridColumn dataField="Gender" headerText="Gender"/>
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

当一个项目被选中时，patientselected 函数需要能够处理该选定项目的内容。

我希望我的问题很清楚，并感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:59:10.233

使用[GridSelectionEvent.SELECTION_CHANGE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/GridSelectionEvent.html#SELECTION_CHANGE)事件有两个原因：

*   它将提供有关已选择哪些单元格的信息
*   it is fired whenever the selection changes (if you only react on mouse clicks, you ignore keyboard navigation/selection)

.

```
<s:DataGrid id="dg" selectionChange="onSelectionChange(event)" />

private function onSelectionChange(event:GridSelectionEvent):void {
    var index:int = event.selectionChange.rowIndex;
    var patient = dg.dataProvider.getItemAt(index);
    patientSelect(patient);
} 
```

# java - 如何从 SensorManaget 注销 SensorEventListener？

> ID：10481545
> 
> 赞同：0
> 
> 时间：2012-05-07T11:48:14.240
> 
> 标签：java, android

我一直在开发通过 SensorEventListener 使用 SensorManager 的应用程序。但是有一个问题：当应用程序启动时，它应该从 SensorManager 中删除我的监听器并创建一个新的监听器，但是 SensorManager 只有 2 个方法 - registerListener 和 unregisterListener，但是当我执行应用程序时，我无法获得最后一个监听器的引用并注销它。请告诉我任何方法，以便我可以修复它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:36:28.163

不要杀死进程这不是一个好主意。这是检测服务的代码。

```
 ActivityManager activity_manager = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
    List<ActivityManager.RunningServiceInfo> current_services = activity_manager.getRunningServices(50);

    for (int i=0; i<current_services.size(); i++) {
      ActivityManager.RunningServiceInfo temp_service = current_services.get(i);
      if (temp_service.getClass().equals("your complete class name with package")) {
          //DO YOUR WORK HERE.
           android.os.Process.killProcess(temp_service.pid); //TO KILL PROCESS BUT I RECOMMEND DON'T KILL IT.
      }
    } 
```

# math - 网络连接中的控制和

> ID：10481547
> 
> 赞同：0
> 
> 时间：2012-05-07T11:48:27.517
> 
> 标签：math, networking, controls, sum

我正在制作网络应用程序，它每次都不会发送良好的数据（大多数时候它们都被破坏了），所以我很难控制总和。在数据结束时，我将添加控制总和以检查它们是否有效。所以我不确定将每个数据（它们从 1 到 100）乘以 100、100^2、100^3... 并将它们相加是一个好主意。你有什么建议吗，不要做很大的数字（每个数据包中有很多数据）。示例：数据：1,4,2,77,12,32,5,52,23 我的解决方案：1,4,2,77,12,32,5,52,23, 100+40000+2000000+ 77* 10^4 ...当客户端收到数据包时，他将检查最后一个数据是否等于其他数据的总和。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:45:42.690

将数据相乘会导致要传输的数字非常大，并且对数字正确的信心不足。加法会遇到潜在的溢出问题。这就是习惯使用异或的原因。

或者，您可以阅读[http://en.wikipedia.org/wiki/Error-correcting_code](http://en.wikipedia.org/wiki/Error-correcting_code)以获得更出色的解​​决方案，这些解决方案可以检测，有时是纠正少量错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T06:35:18.473

因为 128 是二进制的 10000000，所以只有 1 位用于子网划分，而有 7 位用于主机。我们将对 C 类网络地址 192.168.10.0 进行子网划分。

```
 192.168.10.0 = Network address
     255.255.255.128= Subnet mask 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:27:08.367

最好的解释在这里：

[http://www.textfiles.com/programming/crc.txt](http://www.textfiles.com/programming/crc.txt)

CRC 函数将在您语言的网络库中可用。

# php - Cakephp 2 jquery 发布请求

> ID：10481549
> 
> 赞同：0
> 
> 时间：2012-05-07T11:48:51.203
> 
> 标签：php, jquery, cakephp

我想做一个网络服务，它将异步删除帖子。我不确定如何在 jquery 中创建请求。

这就是我现在的工作方式，但它不起作用

```
$(".delete-link").live("click", function(e){
        e.preventDefault();
        var id = $(this).attr("id");
        $.post("app/posts/deleteAjax/", {"id": id}, function(data){
            console.log(data);
        });
    }); 
```

我的链接有“删除链接”类。我在 PostsController.php 文件中创建了带有参数 ID 的函数 deleteAjax

Cake 给我错误，它找不到文件。我不知道如何正确拨打电话以及如何处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:53:20.513

尝试给出 url 的完整路径，例如，

```
$.post("<?php echo $this->webroot; ?>posts/deleteAjax/", {"id": id}, function(data){
 ... 
```

添加了如果 js 扩展文件，那么您可以在您的**layout.ctp**中定义 webroot并在您的 .js 文件中使用它，就像在您的 default.ctp 中一样：

```
<script type="text/javascript">
var webroot = '<?php echo $this->webroot; ?>';
//now you can use webroot to get full path
</script> 
```

希望能帮助到你

# ruby-on-rails - Rails 3 应用程序加速

> ID：10481554
> 
> 赞同：1
> 
> 时间：2012-05-07T11:49:15.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, scale

我是 Rails 3 的新手。
我试图找出为什么我的页面加载如此缓慢。
我处于开发模式（但在生产模式下有正常的画面）

有一个日志：

```
Started GET "/inv/claims?locale=uk" for 127.0.0.1 at 2012-05-07 14:36:24 +0300
  Processing by ClaimsController#index as HTML
  Parameters: {"locale"=>"uk", "property"=>"inv"}
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (15.6ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (15.6ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_list.html.erb (0.0ms)
Rendered shared/_apps_lists.html.erb (31.3ms)
Rendered claims/index.html.erb within layouts/application (46.9ms)
Completed 200 OK in 1594ms (Views: 46.9ms | ActiveRecord: 0.0ms) 
```

总时间为**1594ms**

**第一个问题：真的很慢吗？**

1594 - 46.9 = * *1547* *ms - 这是我的页面用于某些逻辑的时间（不是用于渲染和查询）。

**第二个问题：在这种情况下（1547ms）应用程序的逻辑是否不好？**

**我尝试进行分页**
**我的页面逻辑：**
我有一个文件夹结构：

```
/myfolder/1/application.xml (size of any application.xml about 5Kb)
/myfolder/2/application.xml  
/myfolder/3/application.xml  
/myfolder/4/application.xml  
/myfolder/5/application.xml  
...  
/folder/50/application.xml 
```

我正在做...
**1)**我正在获取有关**myfolder** (myfolder/1/, myfolder/2/...) 中每个文件夹的此类信息：文件夹创建或更改日期。我将该信息存储在哈希中。
**2)**对步骤进行排序 1) 按创建或更改日期散列
**3)**使用起始 ID 和步骤获取散列片段。将其保存在新的哈希中。4) 遍历步骤 3 中的 Hash。对于读取 application.xml 并使用**doc_hash = Hash.from_xml(Nokogiri::XML(f, &:noblanks).to_xml将其解析为哈希的每个条目**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:09:21.343

1.  是的。处理一个页面需要一秒钟半的时间。它太慢了。

2.  看起来某处一定有一些奇怪的逻辑错误。在非活动记录、非视图处理中花费超过一秒钟的时间太长了。

我会深入研究您拥有的任何循环，并尝试了解该级别发生的情况。

# facebook - 从 facebook 中提取日期 - 建立友谊的日期/人加入粉丝页面/群组的日期

> ID：10481556
> 
> 赞同：1
> 
> 时间：2012-05-07T11:49:24.247
> 
> 标签：facebook, api, date, facebook-page

有没有办法（API）来提取建立友谊的日期或特定人加入 Facebook 粉丝页面/群组的日期？

我在文档和 Web 中没有找到任何内容，但是正如您在 Facebook 中看到的那样，当您与给定的朋友建立友谊时，我仍然希望有一种方法可以提取它。

谢谢和欢呼，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:19:50.127

For friends and groups, Facebook does directly expose that data via the API. You can take a look at the FQL documentation. This has the most detailed information about what is exposed via the API. The `friend` and `group_member` don't have any record of when the relationship was created.

You can get some information by querying the user's `stream` to find the friendship/membership announcement:

```
fql?q=SELECT post_id, type, message, description, created_time, attribution FROM stream WHERE source_id = me() AND strpos (description, 'are now friends') > 0 
```

However you'll need to concatenate several of these queries to get all information, as each `stream` query is limited to a maximum of 30 days worth of data or 50 posts.

Pages are easier. You can tell when a user liked a page via the `created_time` column in the `page_fan` table.

# .net - 是否可以在 Linux 或 Mac 上的 Mono 上安装 Sitecore CMS？

> ID：10481557
> 
> 赞同：5
> 
> 时间：2012-05-07T11:49:29.713
> 
> 标签：.net, content-management-system, mono, installation, sitecore

我知道它不支持生产使用（或者技术支持不会回答您的情况），但有人知道**在 Linux 或 OS X 上的 Mono 上安装 Sitecore .NET CMS 在技术上是否可行？**

最好有最新的 Sitecore 6.5 甚至 Sitecore OMS 的体验。让它在我们的 Linux 和 Mac 笔记本电脑而不是 Windows 和 IIS 上运行（仅用于有限的开发目的）对我们来说会很好。

感谢您的任何想法。

乔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:02:06.073

运行[MoMA](http://www.mono-project.com/MoMA)分析后 - 我会说继续尝试。有几种`Not Implemented`方法，但需要注意的是，没有什么是完全缺失的。但是，有超过 20 个 P/Invoke 调用 - 如果作者没有预料到在某些情况下不可用，这可能会破坏 Sitecore。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-08T06:08:01.610

确实是老问题，但 Sitecore 现在正在使用 .NET Core 从 8 版本开始转向微服务，并在 9 版本系列中继续。你可以在 Linux 和 Mac 上运行 .NET Core 的东西。即，您现在应该可以在 Linux 上运行某些部分，但还不是所有部分。

*   Linux 上的 .NET Core：[https ://docs.microsoft.com/en-us/dotnet/core/linux-prerequisites?tabs=netcore2x](https://docs.microsoft.com/en-us/dotnet/core/linux-prerequisites?tabs=netcore2x)
*   Mac 上的 .NET Core：[https ://docs.microsoft.com/en-us/dotnet/core/macos-prerequisites?tabs=netcore2x](https://docs.microsoft.com/en-us/dotnet/core/macos-prerequisites?tabs=netcore2x)

# cordova - 弹出一个仅包含电话键盘/数字的键盘的文本字段

> ID：10481560
> 
> 赞同：0
> 
> 时间：2012-05-07T11:49:37.897
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我创建了一个如下的文本字段；

```
{
  xtype:'textfield',
  name:'telephone',
  label:'Telephone'
} 
```

而不是弹出具有字符和数字的默认键盘。我需要键盘仅显示电话键盘（仅数字）。由于文本字段是关于获取用户的电话号码的，因此显示带有字符的键盘是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:18:29.113

您可能想尝试`numberfield`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:20:45.177

使用文本字段的属性组件：

```
{
  xtype:'textfield',
  component: {
    xtype: 'input',
    type: 'tel'
  },
  name:'telephone',
  label:'Telephone'
} 
```

您还有其他标准输入类型：电子邮件、搜索、日期...参见[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:50:47.783

这在 HTML5 中对我有用。

```
<input type="tel" height=30px width=200px></input>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:48:48.640

扩展`Ext.ActionSheet`并添加按钮 0-9 作为其中的项目，并`show()`在文本字段的焦点和文本字段的按钮点击事件 concat 值上调用方法。

我用这个方法可能对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T10:46:29.713

```
<input type="number"/> 
```

这适用于我在 Android

# javascript - Raphael Drag + iPhone = 悲伤的相机应用

> ID：10481561
> 
> 赞同：4
> 
> 时间：2012-05-07T11:49:43.780
> 
> 标签：javascript, iphone, ios, raphael

此处的网络应用程序： [http ://www.digitaltransitions.com/visualizer/visualizer.html](http://www.digitaltransitions.com/visualizer/visualizer.html)

这里的主要javascript： [http ://www.digitaltransitions.com/visualizer/visualizer.js](http://www.digitaltransitions.com/visualizer/visualizer.js)

## 相关函数位于visualizer.js 的底部，分别命名为“dragger”、“move”和“up”。

十年前我是一名程序员，最近重新开始帮助我的公司创建一个 Web 应用程序，帮助我们的客户可视化特定镜头在特定相机上的外观。

别介意信息墙（信息请求表）；随意放入任何垃圾条目。或者您可以`unlock();`在末尾添加该功能，`window.onload`它会绕过信息墙屏幕并直接进入应用程序。

我很自豪能走到这一步。但现在我被卡住了，一直把头撞在墙上。

我的网络应用通过了 Mac_Safari、Mac_Chrome、Mac_Firefox 的测试。但它在 iPhone4s 和 iPad1 上测试失败；焦距滑块（右上角的##mm gizmo，它改变了镜头的“缩放”方式）无法正常工作。当用户抓住滑块时，有时它会正确地来回滑动，但有时它会跳到屏幕的最左侧，此时应用程序完全停止工作。

任何想法将不胜感激！

顺便说一句，如果您想知道如何创建带有验证和自定义确认页面的自定义 Google 文档表单，我从这里获得了我的方法： [http ://www.morningcopy.com.au](http://www.morningcopy.com.au)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:40:35.387

我想说你的第一份工作是确定这是你的错误，还是拉斐尔的错误。我会先用一个空方法切换你的“移动”方法，然后看看会发生什么。

另一种调试方法是在页面的角落放置一个固定位置的 div，然后将 x/y 值吐到其中，这样您就可以实时看到数字的样子。

我猜您在计算接触点的方式与计算鼠标光标位置的方式之间遇到了数学差异。

根据您添加的 hack，看起来 Raphael 可能会向您发送 Dx 的 NaN 值？

# python - PySide：小部件插槽的多个装饰器

> ID：10481562
> 
> 赞同：1
> 
> 时间：2012-05-07T11:49:45.573
> 
> 标签：python, qt, pyside

我在 Python 中使用 PySide 的主窗口类有很多成员函数，例如：

```
@QtCore.Slot()
def on_myButton_clicked(self) :
    ... 
```

我想添加自己的装饰器，但以下不起作用：'

```
def my_decorator(f) :
    def wrapper(*args, **kwargs) :
            f(*args, **kwargs)  
    return wrapper

...

@QtCore.Slot()
@my_decorator
def on_myButton_clicked(self) :
    ... 
```

当我这样做时，`QtCore.QMetaObject.connectSlotsByName`似乎没有将方法与按钮连接起来。这可以很容易地解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:04:13.713

`connectSlotsByName`从注册的插槽`Slot`工作，并从`__name__`给定的函数中工作。

定义时的名称`on_myButton_clicked`是`'on_myButton_clicked'`。但是，然后您将其传递给装饰器；装饰器函数返回一个名为`'wrapper'`. 所以`Slot`用那个名字注册它，*而不是* `'on_myButton_clicked'`.

要解决此问题，请使用[`functools.wraps`](http://docs.python.org/library/functools.html#functools.wraps)：

```
def my_decorator(f):
    @functools.wraps(f)
    def wrapper(*args, **kwargs):
        f(*args, **kwargs)
    return wrapper 
```

除其他外，这会进行排序，`__name__`以便插槽将以正确的名称注册。

*经常*使用是一个好习惯`functools.wraps`；这将使调试某些情况更容易。

# apache - URL 重写无法正常工作

> ID：10481564
> 
> 赞同：0
> 
> 时间：2012-05-07T11:49:47.413
> 
> 标签：apache, mod-rewrite, ubuntu

我正在制作一个网站，但我不知道为什么`mod_rewrite`不起作用。

这是当前的 URL：`http://www.treetle.com/profile/index/show/rameshmantha`
并希望将其重写为`http://www.treetle.com/profile/rameshmantha`

配置文件名称在哪里`rameshmantha`（动态出现），这是我的 .htaccess 文件。

```
RewriteEngine on

Options +FollowSymLinks

RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1

RewriteRule ^/profile/([a-z]+)?$ /profile/index/show/$1[L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:53:48.277

`RewriteRule ^(.*)$ index.php/$1`匹配一切。您是否尝试过将订单交换为：

```
RewriteRule ^/profile/([a-z]+)?$ /profile/index/show/$1[L,QSA]
RewriteRule ^(.*)$ index.php/$1 
```

# image - 如何检查图像是否已经存在于 GWT + MVP4G 中的给定路径上

> ID：10481566
> 
> 赞同：1
> 
> 时间：2012-05-07T11:49:52.797
> 
> 标签：image, gwt, mvp4g

我想检查文件系统上是否存在图像。我将 GWT 2.4 与 MVP4G 框架一起使用。当我在客户端使用 IO.File 来检查 file.exist() 时，它给了我一个错误，因为我们不能在客户端使用 IO，所以我该如何检查这个..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:14:46.143

你是怎么得到图像的？
您应该获取图像的唯一方法是使用一些文件上传机制，其中任何一种都只会让用户选择一个已经存在的文件；所以实际上不需要检查文件是否存在。
对于文件上传，您可以使用 gwt 库 gwtupload。或使用 apache 文件上传库。

# gmail - 根据外部托管的单词列表自动创建 GMail 过滤器

> ID：10481569
> 
> 赞同：3
> 
> 时间：2012-05-07T11:50:04.210
> 
> 标签：gmail

我想轻松地将托管在 Github 上的单词列表导入 GMail 作为存档过滤器。然后稍后重新运行此过程以更新列表。

目标是针对常见的芬兰垃圾邮件发送者提供黑名单。

我考虑过的可能选项

*   书签

*   使用 Gmail API

*   创建 GMail Labs 扩展（或其他名称）

我有哪些 API 选项可用于维护 GMail 过滤器列表？编程语言无关紧要。

可选地，这将是单击/单个命令操作，例如来自终端或浏览器书签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T11:59:10.557

今天我自己对此感到好奇，尽管出于不同的原因......我找到了这个信息，并认为我会冒一些死灵术的风险:)

你应该看看[Gmail 设置 API - 过滤器](https://developers.google.com/admin-sdk/email-settings/#manage_filters)

有一个[Java 包装器](https://developers.google.com/gdata/javadoc/com/google/gdata/client/appsforyourdomain/gmailsettings/GmailFilterService)

# servlets - 将 midlet 连接到 servlet 的正确配置是什么

> ID：10481571
> 
> 赞同：2
> 
> 时间：2012-05-07T11:50:13.200
> 
> 标签：servlets, java-me, midp, midlet, jsr172

我创建了一个 midlet 应用程序，它可以从数据库中导入数据（在 PC 中用 oracle 实现）并将数据插入到同一个数据库中，因此该应用程序在模拟器（Netbeans IDE）中运行良好。

设备支持 MIDP 2.1 和 jsr 172：[http ://www.mobilerated.com/nokia-5800-xpressmusic-specifications.html](http://www.mobilerated.com/nokia-5800-xpressmusic-specifications.html)

我想要的是通过 wifi 连接将此应用程序与 PC 连接，但是当我尝试在手机（PDA 或诺基亚 C6 等智能手机）中实现此应用程序时，似乎 midlet 之间没有连接（在 hendler 终端中）和 servlet（在 PC 中），所以我无法捕捉到来自 PC 的任何响应。

这是我在 midlet 中使用的代码：

```
 private void doInsertDataEtat() throws IOException
  {
    HttpConnection http = null;
    InputStream iStrm = null;

    url ="http://192.168.1.2:8080/TESTWEB/InsertDataEtat" +"?"+"loconum="+List_Num.getString(List_Num.getSelectedIndex()).substring(0, 4) +"&"+"datedevisite="+nbrdate+"&"+"heuredebut="+dateFieldAc.getDate().toString().substring(11,16)+"&"+"etat="+Etatfinal.getString(Etatfinal.getSelectedIndex()).replace(' ', '+') +"&"+"observationetat="+observationEtat.getString().replace(' ', '+') +"&"+"dureevisite="+dureevisite;

    try
    {
      // Create the connection
      http = (HttpConnection)Connector.open(url);
      System.out.println("url: " + url);          

      // 2) Get header information 
      if (http.getResponseCode() == HttpConnection.HTTP_OK)
      {

        // afficher les données recus de la servlet par la methode get 

            System.out.println("INSERTION REUSSITE" );

      }
        }catch(Exception e){
            e.printStackTrace();
            Alert alert = new Alert("Erreur de Connexion", "Désolé , il y a une erreur au nivau de la connextion au serveur \n"+e.getMessage(), null, AlertType.ERROR);
            alert.setTimeout(Alert.FOREVER);
            display.setCurrent(alert);
        }
    finally{
      // detruire les variable apres l'utilisation
      if (iStrm != null)
        iStrm.close();
      if (http != null)
        http.close();
    }
  } 
```

我想知道我必须为该应用程序做哪些修改才能正常工作？

注意：根据站点成员的回答修改，用@ip更改url后出现同样的问题

* * *

我的电脑的@ip 是：192.168.1.2
，路由器的@ip 是：192.168.1.1
不幸的是，我不知道如何获取手机的@ip。

```
@WebServlet(name = "InsertDataEtat", urlPatterns = {"/InsertDataEtat"})
public class InsertDataEtat extends HttpServlet {

    public String loconum,observationEtat,datevisite,heuredebut,etat,dureevisite;
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/plain");
        PrintWriter out = response.getWriter();
        try
        {

                //parametre passer du midlet a la servlet par la methode GET
                     loconum = request.getParameter("loconum");
                     etat = request.getParameter("etat").replace('+', ' ');
                     datevisite = request.getParameter("datedevisite");
                     heuredebut = request.getParameter("heuredebut");
                     observationEtat = request.getParameter("observationetat").replace('+', ' ');
                     observationEtat = observationEtat.replace("'", "''");
                     dureevisite=request.getParameter("dureevisite");

                                    String sql="INSERT INTO ETAT VALUES('"+loconum+"','"
                        +datevisite+"','"+observationEtat+"','"+etat+"','"+heuredebut+"','"+dureevisite+"')";
                     System.out.println(sql);
                //----------------------------------------------------------
                Class.forName("oracle.jdbc.driver.OracleDriver");
                Connection con=DriverManager.getConnection
                ("jdbc:oracle:thin:@th-d3a2629a531d:1521:XE","ONCFDB","ONCFDB");
                Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

                stmt.executeUpdate(sql);
                System.out.println("c'est fait avec succés");       

            }
        catch(Exception e)
        {
            System.out.println("ça marche pas ");
        }

        out.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:56:25.203

您的 URL 指向 localhost，这是本地环回接口。如果您在手机上执行此代码，它确实不会解决它。把你的电脑的IP而不是“localhost”

# php - 使用 php 从 github 拉取更改和合并文件？

> ID：10481574
> 
> 赞同：0
> 
> 时间：2012-05-07T11:50:26.430
> 
> 标签：php, git, github

我正在考虑为我的所有插件建立一个博客。所有插件都托管在 github 上。因为每个插件都有我想在我的博客中显示的所有信息，所以我想尝试自动生成我的博客页面（以及插件的演示页面）。我知道如何设置接收后挂钩以在回购被推送到时获得 A ping。我可以下载该 repo 的整个 zip，但我想知道是否有更优雅的方式，并且正在考虑仅提取更改并合并它们。这可以用php吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:28:02.047

也许[Git.php](https://github.com/kbjr/Git.php)可以做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:55:08.673

你用 Google 搜索过 PHP+Git 库吗？我做了并找到了这个：[PHP Git](http://www.phpclasses.org/package/5310-PHP-Retrieve-project-files-from-GIT-repositories.html)和这个[git-php](https://code.google.com/p/git-php/)。

# apache - 德比安，阿帕奇。日志文件占用了所有磁盘空间

> ID：10481575
> 
> 赞同：1
> 
> 时间：2012-05-07T11:50:30.307
> 
> 标签：apache, apache2, debian

我的 VPS 上只有 32 GB 磁盘空间，目前日志文件占用 26 GB。我找到了文件：access.log.1 和 error.log.1，它们加起来是 17 GB（var/log/apache2）。

我可以删除这些文件以释放一些空间吗？是否可以停止记录功能？我对服务器知之甚少，无论如何也不了解日志。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:55:17.607

如果您不需要它们，则将其删除。也许您应该安装 logrotate 以在一段时间后自动删除这些文件。访问和错误日​​志主要用于调试（在我的情况下）或用于统计或出于法律原因。

您也可以禁用它们：只需注释掉有关登录站点配置的行 ( `/etc/apache2/sites-available/*`)

# printing - 如何使 python 3 打印（'\ufeff'）

> ID：10481583
> 
> 赞同：0
> 
> 时间：2012-05-07T11:50:55.993
> 
> 标签：printing, python-3.x

```
>>> print('\ufeff')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'gbk' codec can't encode character '\ufeff' in position 0: illegal multibyte sequence 
```

我知道

```
>>> stdout = open(1, 'w', encoding='gb2312', errors='ignore')
>>> print('\ufeff', file=stdout) 
```

或者

```
>>> print(repr('\ufeff'))
'\ufeff' 
```

但是太长了，还有什么我能简单完成的

英语真难写，有木有？这坛子有国人么？帮老弟一帮啊。。</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:39:33.193

'\ufeff' 是具有特殊含义的不可打印的 Unicode 字符。当使用两字节整数时，它用作 UTF-16 BOM（字节顺序标记）来检测内存中存储的字节顺序（稍后写入文件）。当在文件开头找到时，它应该只有助于检测硬件存储小整数的方式，然后应该忽略它。

查看[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:17:07.837

您似乎正在尝试将 Unicode 字符打印到不支持该字符的终端。这样做基本上是不可能的。也可能是有问题的字符应该是 GBK 编码的一部分，但是 Python 实现有一个错误。

您使用 gb2312 打开标准输出的第一个解决方案表明，如果您只是更改它的编码，终端本身确实支持该字符。这应该以某种方式作为操作系统中的设置是可行的。这可能是最适合您的解决方案。如果可以，请切换到 UTF-8 或 UTF-16。它们应该支持所有 Unicode 字符。

否则，您所能做的就是在打印之前尝试将字符从打印的内容中过滤掉，或者使用`errors='ignore'`or将其编码为二进制`errors='replace'`。

# wpf - 从包含的 UserControl 关闭 WPF 对话框

> ID：10481585
> 
> 赞同：0
> 
> 时间：2012-05-07T11:51:07.437
> 
> 标签：wpf, user-controls

您好我有一个 WPF 应用程序，其中包含各种包含关键功能的用户控件。我希望能够在主应用程序的选项卡中显示一个 FileManager UserControl，或者在需要时弹出一个对话框，其中包含相同的 UserControl。

`Content`创建一个模态窗口并将其设置为用户控件似乎是个好主意`FileManager`。但是当我完成它时，我不确定如何使用 UserControl 上的按钮关闭包含窗口。有没有一种优雅的方法可以做到这一点，而不必在 UserControl 中存储对 Window 的引用？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:53:38.563

创建一个`Event`在单击用户控件上的相应按钮时调用的。这样，包含控件可以以适当的方式对事件作出反应。例如，对话框可以自行关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:12:46.957

在托管控件的所有上下文中，关闭窗口是否是控件功能不可或缺的一部分？例如，关闭窗口是否适用于控件托管在主应用程序的选项卡中的情况？

如果不是，那么您最好将窗口关闭代码从 UserControl 分离到托管它的窗口/对话框中 - 使用事件或任何将两者联系在一起的方法。

# google-closure-library - 使用闭合工具创建表

> ID：10481586
> 
> 赞同：4
> 
> 时间：2012-05-07T11:51:14.573
> 
> 标签：google-closure-library

任何人都可以帮助我使用闭包 Libray 创建表格（网格布局）吗？有没有可用的小部件？我搜索但没有找到！请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:27:36.167

截至 2012 年 5 月，闭包库不提供表格/网格布局组件。

有一个表格排序器（参见[演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/tablesorter.html)），但它只装饰传统的 HTML 表格。

您可能还想查看[Visualization Table](https://developers.google.com/chart/interactive/docs/gallery/table)，它是 Google Chart Tools 的一部分。

请参阅[Closure Library 中有关对表格/网格组件的支持的讨论](https://groups.google.com/forum/?fromgroups#!searchin/closure-library-discuss/table%2420grid/closure-library-discuss/x1afFp9Y1Ho/31xhS792UT0J)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-02T06:19:56.927

用 Google Closure 编写的网格 - [http://dekajp.github.io/demos/index.html](http://dekajp.github.io/demos/index.html)

来源：[https ://github.com/dekajp/google-closure-grid](https://github.com/dekajp/google-closure-grid)

*   数据虚拟化 ~ 100,000 行
*   交替行突出显示
*   活动单元格和活动行突出显示
*   排序
*   列调整大小和移动
*   寻呼
*   编辑
*   冻结列
*   子网格/分层显示

**免责声明**：我是这个网格的作者。该代码目前正在积极开发中。

# java - 多线程读写文件

> ID：10481589
> 
> 赞同：1
> 
> 时间：2012-05-07T11:51:45.883
> 
> 标签：java, multithreading, file-io

我想通过线程在同一个文件中读写。

但条件是当第一个线程完成读取时，另一个线程应该写入。

我提出的解决方案是：

```
class XYX {

  public void read(){
    synchronised(fileObj){
      //write the reading logic
    }
  }

  public void write(){
    synchronised(fileObj){
      //write the writing logic 
    }
  }
} 
```

请让我知道你的想法

我想保留这个订单

阅读 - 写作 - 阅读 - 写作 - 阅读 - 等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:57:31.840

我会使用线程之间共享的[锁。](http://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html)

由于在任何给定时间只有一个线程会持有锁，因此您将确保写入线程仅在读取线程释放锁时才写入文件（**在 finally 块上！**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:09:07.403

我会使用两个信号量，一个用于读取，一个用于写入，它们之间只有一个单元。read 方法等待读取信号量，然后读取，然后向写入信号量发出信号。写入器等待写入信号量，然后写入，然后向读取信号量发出信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:28:48.447

如果必须保持 read-then-write 的总顺序，那么使用监视器是最简单的：

```
class XYX {

  private final Object fileObj = new Object();
  private volatile boolean writerWaits = true;

  public void read(){
    // read from file
    synchronized(fileObj){
        writerWaits = false;
        fileObj.notify(); // signal the writer to begin
    }
  }

  public void write(){
    synchronized(fileObj){
        while(writerWaits)
           fileObject.wait(); // wait for signal from reader
    }
    // write to file
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:59:05.173

绝对使用来自`java.util.concurrent`. 我建议`CountDownLatch`在这里使用两个 es。`cdl1.countDown`在调用and之前，写入发生在一个线程中`cdl2.await`；阅读线程则相反。

# sql - 将 CSV 文件从 BLOB 导入数据库表

> ID：10481590
> 
> 赞同：3
> 
> 时间：2012-05-07T11:51:48.287
> 
> 标签：sql, csv, blob

我在 MS SQL Express 中有一个表，它将 csv 文件存储为 blob。我想将这些 csv 文件导入表中。csv 中的列与数据库表中的列相匹配。这可能吗？这是我的简化示例：

CSV blob 存储表：

```
Table CSVStore
(ReportID, File image, FileName nvarchar (200)) 
```

我的 CSV 文件有列

```
(FirstName, LastName, DOB) 
```

我的 SQL 表

```
Table Employees

(EmployeeID INT IDENTITY (1,1),
FirstName nvarchar (100),
LastName nvarchar (100),
DOB datetime,
Primary Key (EmployeeID)) 
```

当 ReportID = 1 时，如何从 CSVStore 获取 CSV 数据到我的员工表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:02:10.850

我想你正在寻找[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T13:35:18.280

您可以使用`OpenRowSet`Command 来处理它。

```
INSERT INTO db.CSV
(
  FileName,
  FileContent
)
SELECT 'file1.csv', BlobFile.*
FROM OPENROWSET 
(BULK 'C:\CSV\file1.csv', single_blob) BlobFile 
```

有一个[使用大值类型](http://msdn.microsoft.com/en-us/library/a1904w6t%28VS.80%29.aspx)的 arctile ，您可能会发现它很有用。

# android - 处理设备有时返回的无效（野生）GPS 修复

> ID：10481595
> 
> 赞同：0
> 
> 时间：2012-05-07T11:52:30.870
> 
> 标签：android

我有一个 GPS 跟踪应用程序，它偶尔（比如每月一次）会返回一堆狂野/无效的修复。有处理这种情况的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:19:17.080

您可以`getAccuracy()`检查并查看您的 GPS 定位有多精确，并丢弃任何不适合的东西。100m对于户外应用来说是一个很好的门槛。

# javascript - JS 检查两个文本字段是否不为空

> ID：10481596
> 
> 赞同：0
> 
> 时间：2012-05-07T11:52:32.740
> 
> 标签：javascript, html, textbox

我在 HTML 中有两个文本字段，当单击按钮时，我需要检查它们是否为空。

但我有一个工作，我的第二个不工作，

这里的代码：

```
<!DOCTYPE html "> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
    <title>appLounge webService</title> 
    <link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> 
    <link rel="stylesheet" type="text/css" media="all" href="css/text.css" /> 
    <link rel="stylesheet" type="text/css" media="all" href="css/960.css" /> 
    <link rel="stylesheet" type="text/css" media="all" href="css/demo2.css" /> 

<script type='text/javascript'>
function notEmpty(login, password, helperMsg){
    if(login.value.length == 0){
        alert(helperMsg);
        login.focus();
        return false;
    }

    if(password.value.length == 0){
        alert(helperMsg);
        password.focus();
        return false;
    }

    return true;
}

</script>
</head> 

<body> 
<div class="container_12"> 

<!-- login data -->

    <div id="header" class="grid_12" style="background : url(img/login.png) no-repeat; background-size: 100%; height: 900px;" > 

<form>
        <div id="fieldLogin1">
            <input type="text" id='req1' name="userName" style="width:530px; height:44px" placeholder="UserName";  /><br />
        </div>
            <div class="clear">&nbsp;</div> 

        <div id="fieldLogin2">
             <input type="text" id='req2' name="password" style="width:530px; height:44px" placeholder="Password" />

        </div>
                    <div class="clear">&nbsp;</div> 

        <div id="checkBoxRememberMe">

                    <input  type="checkbox" name="remember" value="rememberYes" /> <br />

<form>

<input type='button' 
    onclick="notEmpty(document.getElementById('req1'), 'req2','Please Enter a Value')"
    value='Check Field' />
</form>

        </div>

    </div> <!-- end .grid_12 --> 
    <div class="clear">&nbsp;</div> 

</form>

</div> 
<!-- end .container_12 --> 
</body> 
</html> 
```

我试过了

```
onclick="notEmpty(document.getElementById('req1'), ('req2'),'Please Enter a Value')" 
```

也一样，但也不起作用，这是问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:54:27.580

```
onclick="notEmpty(document.getElementById('req1'), 'req2','Please Enter a Value')"
value='Check Field' /> 
```

实际上应该是

```
onclick="notEmpty(document.getElementById('req1'), document.getElementById('req2'),'Please Enter a Value')"
value='Check Field' /> 
```

**编辑**（@dante 建议）：

以下代码更具可读性：

```
onclick="notEmpty('req1', 'req2', 'Please Enter a Value')"
value='Check Field' /> 
```

和

```
function notEmpty(loginId, passwordId, helperMsg) {
    var login = document.getElementById(loginId);
    if (!login.value.length) {
        alert(helperMsg);
        login.focus();
        return false;
    }

    var password = document.getElementById(passwordId);
    if (!password.value.length) {
        alert(helperMsg);
        password.focus();
        return false;
    }

    return true;
} 
```

（在旁注中，习惯于使用`===`而不是`==`尽可能地使用，因此您最终不会成功（咳咳……）将布尔值与`0`一天进行比较。它也快一点:)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:54:45.523

您将一个字符串作为第二个参数传递给`not Empty`. 试试这个：

```
onclick="notEmpty(document.getElementById('req1'), document.getElementById('req2'),'Please Enter a Value')" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T11:55:10.187

`document.getElementById()`您在调用该函数时忘记了密码字段：

```
onclick="notEmpty(document.getElementById('req1'), document.getElementById('req2'),'Please Enter a Value')" 
```

# python - 使用python从网页获取链接

> ID：10481598
> 
> 赞同：0
> 
> 时间：2012-05-07T11:52:43.177
> 
> 标签：python, web-crawler, web-scraping

你好！我有这个脚本：

```
URL = "http://www.hitmeister.de/"

page = urllib2.urlopen(URL).read()
soup = BeautifulSoup(page)

links = soup.findAll('a')

for link in links:
    print link['href'] 
```

这应该从网页中获取链接，但它没有，可能是什么问题？我也尝试过使用 User-Agent 标头，但没有结果，但此脚本适用于其他网页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:02:50.840

BeautifulSoup 有一个非常好的错误消息。你读过它并遵循它的建议吗？

> /Library/Python/2.7/site-packages/bs4/builder/_htmlparser.py:149：RuntimeWarning：Python 的内置 HTMLParser 无法解析给定的文档。这不是 Beautiful Soup 中的错误。最好的解决方案是安装一个外部解析器（lxml 或 html5lib），并将 Beautiful Soup 与该解析器一起使用。请参阅[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)寻求帮助。
> 
> “Python 的内置 HTMLParser 无法解析给定的文档。这不是 Beautiful Soup 中的错误。最好的解决方案是安装外部解析器（lxml 或 html5lib），并在该解析器中使用 Beautiful Soup。见[http://www .crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)寻求帮助。”））
> 
> 回溯（最近一次通话最后）：
> 
> 文件“”，第 1 行，在
> 
> 文件“/Library/Python/2.7/site-packages/bs4/init .py”，第 172 行，在**init** **self._feed** ()
> 
> **_feed self.builder.feed( self.markup** ) 中的文件“/Library/Python/2.7/site-packages/bs4/init .py”，第 185 行
> 
> 文件“/Library/Python/2.7/site-packages/bs4/builder/_htmlparser.py”，第 150 行，在提要中
> 
> HTMLParser.HTMLParseError：**格式错误的开始标记，第 57 行，第 872 列**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T21:11:24.673

```
import urllib
import lxml.html
import urlparse

def get_dom(url):
    connection = urllib.urlopen(url)
    return lxml.html.fromstring(connection.read())

def get_links(url):
    return resolve_links((link for link in get_dom(url).xpath('//a/@href')))

def guess_root(links):
    for link in links:
        if link.startswith('http'):
            parsed_link = urlparse.urlparse(link)
            scheme = parsed_link.scheme + '://'
            netloc = parsed_link.netloc
            return scheme + netloc

def resolve_links(links):
    root = guess_root(links)
    for link in links:
        if not link.startswith('http'):
            link = urlparse.urljoin(root, link)
        yield link

for link in get_links('http://www.google.com'):
    print link 
```

# php - PHP会话没有第一次注册

> ID：10481600
> 
> 赞同：0
> 
> 时间：2012-05-07T11:52:52.513
> 
> 标签：php, session, time, set

我对会话变量有疑问。

我有一个简单的注册 php 页面，它使用 ajax 调用来验证用户名和电子邮件地址（如果它们已经存在）。它还有一个 ajax 图像上传器，可以预览所选图像。

现在这就是我设置会话变量的方式：-

```
session_start();
session_unset();
$_SESSION = array();

if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

session_destroy();
session_start();

$_SESSION['avurl'] = $filename; 
```

$filename 是有效的，因为它在上面的代码中就在这个片段之后回显。

在我需要使用此会话变量的页面中，我有这个：-

```
session_start();

$av_url = $_SESSION['avurl']; 
```

现在奇怪的是，每当它第一次运行时，会话变量没有任何值。但是第二次就可以了。

我如何检查这一点是我创建了一个 test.php ，它只是回显 $_SESSION['avurl'] 并且第一次它从不显示任何东西，但它第二次显示。

我从中得出的结论是，一旦它回显了这个会话变量，它就会开始存储该值。

我用来设置该变量的所有代码都是从以下内容编辑的：-

```
session_start();

$_SESSION['avurl'] = $filename; 
```

对此，因为这也不起作用，我认为这可能是现有会话的问题。

谢谢你希望这是解决我的问题的足够信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:55:03.813

```
session_start();
session_unset(); 
```

此代码删除您的会话...您为什么这样做？

# ios - jquery mobile 选择菜单不会在 safari mobile 上触发 onchange 事件？

> ID：10481606
> 
> 赞同：0
> 
> 时间：2012-05-07T11:53:24.630
> 
> 标签：ios, jquery-mobile

我正在使用 jquery mobile 并尝试以某种方式使用选择菜单表单，一旦我选择了一个选项以转到我的 html 页面的特定部分，我就可以这样做。这是我拥有的代码片段，但它似乎不适用于 safari 或 safari mobile。

```
<select id="mymenu">
<option value="">Select a site</option>
<option value="#page1">Page1</option>
<option value="#page2">Page2</option>
</select>

<script type="text/javascript">

var selectmenu=document.getElementById("mymenu");
selectmenu.onchange=function(){ 
 var chosenoption=this.options[this.selectedIndex];
 if (chosenoption.value!="nothing"){
  window.open(chosenoption.value, "", ""); 
 }
}

</script> 
```

你会说我应该使用另一个事件吗？

# visual-studio - Devexpress XtraReports 脚本编辑器在按下两个连续的单引号时崩溃

> ID：10481607
> 
> 赞同：0
> 
> 时间：2012-05-07T11:53:29.953
> 
> 标签：visual-studio, devexpress, xtrareport

我正在使用 DevExpress XtraReport 作为报告软件。我在脚本编辑器中遇到了一个奇怪的问题。使用脚本编辑器，每当我按键盘上的单引号按钮（'）两次时，Visual Studio 每次都会崩溃，并出现异常。

错误信息是

```
Message: Unhandled Exception was thrown.
Type: DevExpress.CodeRush.Common.DXCoreUnhandledException
Source: 
Target Site: 

Call Stack:
at System.String.CtorCharCount(Char c, Int32 count)
at DevExpress.CodeParser.CSharp.CSharp30Parser.AddCommentNode(Token lCommentToken, FormattingParsingElement lastElement)
at DevExpress.CodeParser.CSharp.CSharp30Parser.Get()
at DevExpress.CodeParser.CSharp.CSharp30Parser.FieldDecl(TypeReferenceExpression typeRef, AccessSpecifiers accessSpecifiers, MemberVisibility visibility, LanguageElementCollection attributes)
at DevExpress.CodeParser.CSharp.CSharp30Parser.LocalVariableDeclaration()
at DevExpress.CodeParser.CSharp.CSharp30Parser.Statement()
at DevExpress.CodeParser.CSharp.CSharp30Parser.StatementSeq()
at DevExpress.CodeParser.CSharp.CSharp30Parser.BlockCore(Boolean isMethodBlock)
at DevExpress.CodeParser.CSharp.CSharp30Parser.MethodDeclaration(TypeReferenceExpression typeRef, ElementReferenceExpression memberName, AccessSpecifiers accessSpecifiers, MemberVisibility visibility, LanguageElementCollection attributes)
at DevExpress.CodeParser.CSharp.CSharp30Parser.StructMemberDeclaration(AccessSpecifiers accessSpecifiers, MemberVisibility visibility, LanguageElementCollection attributes)
at DevExpress.CodeParser.CSharp.CSharp30Parser.ClassMemberDeclaration(AccessSpecifiers accessSpecifiers, MemberVisibility visibility, LanguageElementCollection attributes)
at DevExpress.CodeParser.CSharp.CSharp30Parser.ClassMemberSeq()
at DevExpress.CodeParser.CSharp.CSharp30Parser.NamespaceMemberDeclaration()
at DevExpress.CodeParser.CSharp.CSharp30Parser.Parser()
at DevExpress.CodeParser.CSharp.CSharp30Parser.Parse()
at DevExpress.CodeParser.CSharp.CSharp30Parser.Parse(ISourceReader reader)
at DevExpress.CodeParser.CSharp.CSharpTokensHelper.GetTokens(String code)
at DevExpress.XtraReports.Design.SyntaxHighlightService.GetTokens()
at DevExpress.XtraReports.Design.SyntaxHighlightService.Execute()
at DevExpress.XtraRichEdit.Model.DocumentModel.PerformSyntaxHighlight(Boolean forced)
at DevExpress.XtraRichEdit.Model.DocumentModel.OnLastEndUpdateCore()
at DevExpress.XtraRichEdit.Model.DocumentModel.DevExpress.Utils.IBatchUpdateHandler.OnLastEndUpdate()
at DevExpress.Utils.BatchUpdateHelper.EndUpdate()
at DevExpress.XtraRichEdit.Commands.RichEditSelectionCommand.ExecuteCore()
at DevExpress.XtraRichEdit.Commands.RichEditMenuItemSimpleCommand.ForceExecute(ICommandUIState state)
at DevExpress.XtraRichEdit.Commands.MultiCommand.ExecuteCommand(Command command, ICommandUIState state)
at DevExpress.XtraRichEdit.Commands.MultiCommand.ForceExecuteCore(ICommandUIState state)
at DevExpress.XtraRichEdit.Commands.MultiCommand.ForceExecute(ICommandUIState state)
at DevExpress.XtraRichEdit.Commands.TransactedMultiCommand.ForceExecute(ICommandUIState state)
at DevExpress.Utils.Commands.Command.Execute()
at DevExpress.XtraRichEdit.Keyboard.NormalKeyboardHandler.FlushPendingTextInputCore(String pendingInput)
at DevExpress.XtraRichEdit.Keyboard.NormalKeyboardHandler.PerformFlushPendingTextInput(String pendingInput)
at DevExpress.XtraRichEdit.Keyboard.NormalKeyboardHandler.FlushPendingTextInput()
at DevExpress.XtraRichEdit.Internal.InnerRichEditControl.FlushPendingTextInput()
at DevExpress.XtraRichEdit.RichEditControl.OnFlushPendingTextInputTimerTick(Object sender, EventArgs e)
at DevExpress.XtraRichEdit.Drawing.LeakSafeEventRouter.OnFlushPendingTextInputTimerTick(Object sender, EventArgs e)
at System.Windows.Forms.Timer.OnTick(EventArgs e)
at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

OS Version: Win32NT, 6.1.7600.0
VS Version: 10.0, Professional
DXCore Version: 11.1.4.0
0 installed add-ins: 
```

还附上了崩溃窗口的快照：![在此处输入图像描述](../Images/353ad058ff794b5d07830dff6edd23ab.png)

如果有人能解释坠机的原因，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:26:28.537

看起来问题是由 CodeRush 引起的。尝试禁用 CodeRush 以查看问题是否仍然存在。

键入 '' 时发生的事实表明 CodeRush 正在尝试处理模板并失败。

您可以尝试修复您的 CodeRush 安装或禁用 CodeRush 设置中的“模板”。

# tridion - 在复合模板中使用 C# 进行渲染时出现问题

> ID：10481611
> 
> 赞同：11
> 
> 时间：2012-05-07T11:53:51.337
> 
> 标签：tridion, tridion2009

在 Compound Templating 中发布/渲染某段代码时，其中一个环境突然出现问题。这是一个 DTAP 环境，问题只发生在生产环境中（一如既往;-)，那里有两台 CMS 机器和两个发布者。都表现出相同的行为。

导致问题的代码是：

```
StructureGroup SG = (StructureGroup)engine.GetObject("/webdav/pub/root/etc/etc..."); 
```

模板生成器中的错误是：

```
System.Net.WebException: The underlying connection was closed: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 10.77.66.136:80 
   bij System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) 
   bij System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) 
   bij System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) 
   --- Einde van intern uitzonderingsstackpad --- 
   bij System.Net.HttpWebRequest.GetRequestStream(TransportContext& context) 
   bij System.Net.HttpWebRequest.GetRequestStream() 
   bij System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 
   bij Tridion.ContentManager.Templating.CompoundTemplates.DomainModel.Proxy.CompoundTemplateWebService.GetDebuggingState(String debuggerSessionId, String lastLogMessageId) 
   bij Tridion.ContentManager.Templating.CompoundTemplates.DomainModel.DebugObject.Start(Template template, Object debugItem, LoggingOptions loggingOptions) 
```

奇怪的是，我们并没有真正尝试访问外部服务器。至少，它看起来是这样的。也许我在 Tridion 的工作方式上遗漏了一些东西。我相当肯定这是一个安全问题，但我不知道去哪里找。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T20:10:14.593

在 Nickoli 和 Nuno 的建议下，我发现了错误的问题。

当模板生成器尝试从无法访问代码的网络位置运行时，会显示此错误。我认为它与**engine.GetObject**方法有关，因为只有在运行该方法时才会出现错误。

最后代码中也有错误，但这与错误的递归方法有关。

# api - 获取 gmail 帐户发送或接收的所有电子邮件地址的集合

> ID：10481621
> 
> 赞同：1
> 
> 时间：2012-05-07T11:55:03.493
> 
> 标签：api, gmail, google-api

Google Contacts api 似乎只允许访问与帐户通信的所有电子邮件的某个子集。

有没有什么有效的方法来获取这样的列表？（即没有实际通过 POP/IMAP 访问帐户中的所有电子邮件消息......）

# c++ - 如何判断 OpenMP 是否正常工作？

> ID：10481623
> 
> 赞同：12
> 
> 时间：2012-05-07T11:55:05.227
> 
> 标签：c++, openmp, libsvm

我正在尝试以并行模式运行 LIBSVM，但是我的问题一般是在 OpenMP 中。根据[LIBSVM FAQ](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f432)，我使用#pragma 调用修改了代码以使用 OpenMP。我还通过添加 -fopenmp 参数修改了 Makefile（对于 un*x），因此它变为：

```
CFLAGS = -Wall -Wconversion -O3 -fPIC -fopenmp 
```

代码编译得很好。我检查（因为它不是我的 PC）是否安装了 OpenMP：

```
/sbin/ldconfig -p | grep gomp 
```

并看到它 - 可能 - 安装：

```
 libgomp.so.1 (libc6,x86-64) => /usr/lib64/libgomp.so.1
 libgomp.so.1 (libc6) => /usr/lib/libgomp.so.1 
```

现在; 当我运行程序时，我没有看到任何速度改进。此外，当我使用“top”检查时，进程最多使用 %100 CPU（有 8 个内核），也没有 CPU 瓶颈（只有一个用户使用 %100 CPU），我希望看到更多%100（或不同的指标）该进程正在使用多个内核。

有没有办法检查它是否在多核工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T12:00:09.797

您可以使用该功能`omp_get_num_threads()`。它将返回您的程序使用的线程数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-01T09:19:56.757

随着`omp_get_max_threads()`您获得程序可用的最大线程数。它也是 的所有可能返回值中的最大值`omp_get_num_threads()`。您可以使用环境变量显式设置程序要使用的线程数`OMP_NUM_THREADS`，例如在 bash 中通过

```
$export OMP_NUM_THREADS=8; your_program 
```

# ruby-on-rails - 创建等新行为

> ID：10481629
> 
> 赞同：0
> 
> 时间：2012-05-07T11:55:12.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在我的创建操作中，方法 new 的行为类似于创建。

```
def create
  @page = Page.new(params[:page].merge(:user_id => current_user.id ))
  if @page.save
    flash[:notice] = t("success")
    redirect_to pages_path
  else
    render :new
  end
end 
```

当我使用带有参数的新对象时，ActiveRecord 在数据库中创建新对象。Page.new 在我的控制器中的新操作中运行良好。可能是什么原因？在我的模型中没有重写方法 new 和回调（before_save、before_create 等）。任何帮助，将不胜感激。

更新 - 来自调试器的代码

```
.../app/controllers/pages_controller.rb:48
@page = Page.new(params[:page].merge(:user_id => current_user.id ))
(rdb:25) @page
nil
(rdb:25) n
.../app/controllers/pages_controller.rb:49
if @page.save
(rdb:25) @page
#<Page id: 80 ... >
(rdb:25) Page.last
#<Page id: 80 ... >
(rdb:25) @page.save
false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:01:23.087

检查我的内联评论..

```
 def create
  @page = Page.new(params[:page].merge(:user_id => current_user.id )) # you trigger new thats fine..
  if @page.save # Notice here.. This line is triggering query on database.
    flash[:notice] = t("success")
    redirect_to pages_path
  else
    render :new
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:58:39.657

原因（模型中可以改变工作流状态的方法）：

```
def status=(state_name)
  states = [self.current_state.to_sym]
  possible_states.each {|t| states<< t[1]}
  unless state_name.blank?
    if states.include? state_name
    process_event! state_name
    end
  end
end 
```

丑陋的修复

```
def create
  @page = Page.new
  if @page.update_attributes(params[:page].merge(:user_id => current_user.id )) && @page.save
    flash[:notice] = t("success")
    redirect_to pages_path
  else
    render :new
  end
end 
```

错误非常愚蠢，我并不为我的解决方案感到自豪。无论如何，谢谢你的帮助:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T12:01:47.103

使用 ActiveRecord 类，`create = new + save`

[https://github.com/rails/rails/blob/7edade337e968fb028b2b6abfa579120eb424039/activerecord/lib/active_record/persistence.rb#L40](https://github.com/rails/rails/blob/7edade337e968fb028b2b6abfa579120eb424039/activerecord/lib/active_record/persistence.rb#L40)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T12:16:42.460

您的控制器代码是正确的。这就是“创建”控制器方法的工作方式。问题不存在。

您确定要创建两个模型吗？

`.new`您使用属性调用的方法会在内存中创建一个未保存的 activerecord 对象。该`.save`方法保存它。最后（假设数据有效）你应该在内存中有一个对象。

如果您创建了两个对象，那么就会出现问题。如果你只有一个，那么它应该是。

您是否有此控制器方法创建的第二个对象？

该过程应该是：

```
# when GET /student/new is called, this returns an empty object to display in the form
# for the user to see.
def new
  @page = Page.new
end

# When POST /page is called, the form params are passed in here.
def create
  # First, generate a new page object with the params passed in.
  @page = Page.new(params[:page].merge(:user_id => current_user.id ))
  # Now try save the object to persist it in the database.
  if @page.save
    flash[:notice] = t("success")
    redirect_to pages_path
  else
    render :new
  end
end 
```

# html - CSS Sprites - 仅使用一张图像作为元素的一部分的背景

> ID：10481632
> 
> 赞同：7
> 
> 时间：2012-05-07T11:55:25.787
> 
> 标签：html, css, css-sprites

我将[CSS Sprite 技术](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)与看起来像这样的背景图像一起使用：

![在此处输入图像描述](../Images/a51d3b5397c4154a9e4b44899fea53a2.png)

图标的 CSS 代码：

```
div.icon {
    background-color: transparent;
    background-image: url("/images/icons.png");
    background-position: 0 0;
    background-repeat: no-repeat;
    display: inline-block;
    height: auto;
    vertical-align: text-top;
    width: auto;
}
div.icon:empty {
    width:16px;
    height:16px;
}
div.icon:not(:empty) {
    padding-left:20px;
}
div.icon.attenuation {
    background-position: 0 0;
} 
```

我的图标可以这样使用：

```
<div class="icon warning"></div> 
```

我想在我的图标中添加一些文本，例如：

```
<div class="icon warning">There is a warning on this page</div> 
```

但问题是背景图片覆盖了整个文本区域：

![在此处输入图像描述](../Images/dd6ae906ba6e2f85713e885d8aa4c483.png)

问题是：如何仅将图像的一部分用作部分元素的背景图像？

笔记：

*   设置`width`为`16px`for`div.icon`没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:02:26.100

请记住，在可能的情况下，您不应该仅仅为了实现设计而更改标记。可以使用您的标记。

```
div.icon:before {
    content: "";
    background-color: transparent;
    background-image: url("/images/icons.png");
    display: inline-block;
    height: 16px;
    vertical-align: text-top;
    width: 16px;
}

div.icon:not(:empty):before {
    margin-right: 4px;
}

div.icon.attenuation {
    background-position: 0 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T12:04:59.970

你有两种方法：

1）您的标记必须是这样的：

```
<div class="icon warning"></div><div class="txt">There is a warning on this page</div>
.icon {width:10px(for ex.)} 
```

2）您必须更改图像。图像中的图标必须在另一个下方

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T11:58:42.033

抱歉，我之前的回答不太好。

编辑：如果您有 16 像素的填充，则应将宽度设置为 0，而不是 16 像素。而且我`:not(:empty)`在所有浏览器上都无法使用它；最好摆脱它。所以CSS变成：

```
.icon {
  ...
  width:0; height:16px; padding-left:16px;
}
.icon:empty {
  width:16px; padding-left:0;
} 
```

[jsFiddle](http://jsfiddle.net/ZGYgF/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-07T11:59:21.030

设置`width: 16px; height: 16px; overflow: hidden; text-indent: -9999em;`和删除`padding`

# mysql - 从两个表中获取数据的查询

> ID：10481637
> 
> 赞同：1
> 
> 时间：2012-05-07T11:56:22.400
> 
> 标签：mysql

我有 2 张桌子

> 用户表

有

```
id fname lname
1  asdf  fdg
2  asd2  ddf 
3  xsss  ss
4  frfr  dd 
5  dede  dd 
```

并在用户关联表中

```
user1 associateduser
1      2
1      3 
```

我想从不应包含 user1 及其关联用户的用户表中选择 id、fname、lname

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:00:10.773

也许是这样的：

```
SELECT
    id,
    fname,
    lname
FROM
    user
WHERE NOT EXISTS
    (
        SELECT
            NULL
        FROM
            userassociation
        WHERE
            userassociation.user1=user.id
            AND userassociation.associateduser=user.id
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:00:08.050

```
select id,fname,lname from `user`
where id not in (select user1 as u 
                 from userassociation 
                 union 
                 select associateduser as u 
                 from userassociation) 
```

# .net - 禁用 XAML UI 设计器

> ID：10481645
> 
> 赞同：37
> 
> 时间：2012-05-07T11:56:49.523
> 
> 标签：.net, visual-studio, xaml, visual-studio-2012, designer

如何在 VS 2011 中禁用 XAML 设计器。

我已经检查了以下链接 [可能会在 VS 2008 中默认禁用 XAML 设计器？](https://stackoverflow.com/questions/1511709/possible-to-default-disable-xaml-designer-in-vs-2008)

[http://www.dolittle.com/blogs/einar/archive/2008/04/24/quot-disable-quot-xaml-designer-in-visual-studio-2008.aspx](http://www.dolittle.com/blogs/einar/archive/2008/04/24/quot-disable-quot-xaml-designer-in-visual-studio-2008.aspx)

[http://weblogs.asp.net/alexeyzakharov/archive/2010/01/27/disable-visual-studio-xaml-designer-better-way.aspx](http://weblogs.asp.net/alexeyzakharov/archive/2010/01/27/disable-visual-studio-xaml-designer-better-way.aspx)

上面的问题是智能感知也会随着设置不同的文本编辑器而消失。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-09-20T23:33:29.397

在 Visual Studio 2015 中，您可以在以下位置完全关闭 XAML 设计器：

`Tools->Options->XAML Designer\Enable XAML Designer`

[![Visual Studio 2015 中的 XAML 设计器切换位置](../Images/cf5f521179337c56c95345376c6cfd04.png)](https://i.stack.imgur.com/2z7Ij.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-14T11:40:21.523

对于 Visual Studio **2012**，提供的链接“user1007074”（[http://blog.spinthemoose.com/2013/03/24/disable-the-xaml-designer-in-visual-studio/](http://blog.spinthemoose.com/2013/03/24/disable-the-xaml-designer-in-visual-studio/)）告诉我们：

> 在工具中 -> Options菜单，打开**Text Editor**节点，然后是XAML节点，然后选择**Miscellaneous**节点；确保在 **默认视图**标题下始终以完整 XAML 视图打开文档旁边有一个复选框。

他还建议

> 右键单击解决方案资源管理器中的任何 .xaml 文件，然后选择打开方式...</p>

选择编辑器并单击“设置为默认值”。非常感谢大卫阿尔珀特！

在 Visual Studio **2015/2017/2019/2022**中：

*   在 Tools -> Otions 菜单中，打开 XAML Designer 节点，然后取消选中“Enable XAML Designer”

[![VS 2017 选项对话框将默认文档视图设置为源视图或禁用 XAML 设计器](../Images/7e651c215258b745a325ff991e6b463a.png)](https://i.stack.imgur.com/TpaN9.png)

正如 Mark Bell 指出的那样，将默认文档视图设置为源视图并启用 XAML 设计器就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-13T06:47:39.590

这适用于 VS2012，也可能适用于其他版本：

在 VS 安装**中将**XDesProc.exe 重命名为**XDesProc.exe.bak**

对我来说是：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\XDesProc.exe

这样，它具有最佳的性能增益。该过程不会启动，VisualStudio 将显示一个不受干扰的异常窗口而不是设计器。

# ios5 - 触摸按钮时滑动视图 - IOS

> ID：10481646
> 
> 赞同：1
> 
> 时间：2012-05-07T11:56:52.807
> 
> 标签：ios5

我正在尝试实现一个包含社交按钮的视图。在正常状态下，它将部分隐藏，仅显示“Opciones”按钮和上线。当用户触摸按钮“Opciones”（触摸手势）时将显示此视图，然后它将取消隐藏并使用滑动效果显示，直到包含在附加图像中的最终位置。

![在此处输入图像描述](../Images/c57345ed6ea7748f06592fcf9bad6684.png)

我想知道我必须使用哪种控制和动画。

非常感谢。

# c# - .NET 进程在 Windows 8 上失败

> ID：10481648
> 
> 赞同：1
> 
> 时间：2012-05-07T11:57:07.020
> 
> 标签：c#, process, windows-8

我在 Windows 8 上运行应用程序时遇到两个奇怪的问题（在 Windows 7 上运行良好）

我正在运行外部“a.exe”应用程序。

第一个问题是，当我使用 Process 运行“a.exe”时 - 我没有得到任何输出。如果我运行一个执行“a.exe”的批处理文件并将输出写入文件 - 就会有一个输出。

第二个问题是，在这两种情况下（批处理和批处理）“a.exe”都会失败。但是从命令行它可以工作。

这是代码：

```
 proc = new Process();
 proc.StartInfo.FileName = Path;
 proc.StartInfo.Arguments = args;
 proc.StartInfo.WorkingDirectory = GetDirectoryName(Path); 
 proc.StartInfo.CreateNoWindow = true;
 proc.StartInfo.RedirectStandardError = true;
 proc.StartInfo.RedirectStandardOutput = true;                
 proc.StartInfo.UseShellExecute = false;
 proc.StartInfo.Verb = "runas administrator";

 proc.OutputDataReceived += (sendingProcess, line) =>
 {
    string s = line.Data;
    if (!string.IsNullOrWhiteSpace(s))
    {
      _sbStdout.AppendLine(line.Data);
    }
 };

 proc.ErrorDataReceived += (sendingProcess, line) =>
 {
    string s = line.Data;
    if (!string.IsNullOrWhiteSpace(s))
    {
       _sbStderr.AppendLine(line.Data);
    }
 };    

 proc.Start();

 proc.BeginOutputReadLine();
 proc.BeginErrorReadLine();

// Wait for exit or timeout   
bool res = true;

if (timeout <= 0 || timeout == null)
   proc.WaitForExit(); 
else
   res = proc.WaitForExit((int)timeout);

ExitCode = proc.ExitCode; 
```

怎么了？

# security - Symfony 2 - 使用 HTTP 身份验证对话框隐藏整个网站

> ID：10481651
> 
> 赞同：5
> 
> 时间：2012-05-07T11:57:14.423
> 
> 标签：security, symfony, firewall

我正在使用 Symfony 2 构建网站。

这项工作正在进行中（因此我不希望用户或搜索引擎访问它）但我的客户希望看到我的进度。我在想一个简单的解决方案是使用 Symfony 2 安全功能提供的机制通过 HTTP 身份验证来保护整个网站。

我正在使用 FOSUserBundle，因为该网站将有需要注册和登录的用户。

这是我的 security.yml，效果很好：

```
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager

    encoders:
        "FOS\UserBundle\Model\UserInterface": sha512

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true     

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }
        - { path: ^/account, role: IS_AUTHENTICATED_FULLY }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

因此，我试图在其上添加其他内容，以允许网站受到 HTTP 身份验证的保护。
我将文件更改为：

```
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager
        whole_website_provider:
            users:
                ryan:  { password: ryanpass, roles: 'ROLE_USER' }           

    encoders:
        "FOS\UserBundle\Model\UserInterface": sha512

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true
        whole_website:
            pattern: ^/
            anonymous: ~
            http_basic:
                realm: "Secured Demo Area"       

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }
        - { path: ^/account, role: IS_AUTHENTICATED_FULLY }
        - { path: ^/, role: ROLE_USER }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

基本上我添加了`whole_website_provider`提供程序、`whole_website`防火墙和一个额外的`access_control`.
但这不起作用：当我访问该网站时，我被重定向到登录表单，仅此而已。

你知道我是否能做到以及如何做到吗？

注意：我不希望为此使用任何 Apache 功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:21:04.817

在我看来，您需要的不是使用 HTTP 身份验证来管理用户，而是使用 HTTP 身份验证来限制对您网站的访问。不要为此使用 Symfony2 安全性。

让您的 symfony2 应用程序安全，因为它将处于生产模式并使用 apache .htaccess 来限制对站点的访问。

文档在这里[http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)。您只需在 web/.htaccess 中添加一些指令，并按照文档中的说明创建一个用户/密码文件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T15:51:29.653

我在 Symfony2 中的解决方案，使用 symfony 的基本防火墙（没有 FOSUserBundle）：

```
# app/config/security.yml
security:

    firewalls:
        secured_area:
            pattern: ^/
            anonymous: ~
            form_login:
                login_path: login
                check_path: login_check

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin, roles: ROLE_ADMIN }
        - { path: ^/, roles: ROLE_USER }

    providers:
        in_memory:
            memory:
                users:
                    redattore: { password: 'somePasswordHere', roles: 'ROLE_USER' }
                    admin: { password: 'somePasswordHere', roles: 'ROLE_ADMIN' }

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH] 
```

它非常适合我。这是一个非常基本的配置——没有散列密码，没有数据库提供者（“提供者：”部分），没有 https 连接（互联网上的一切都是纯文本），没有注销的东西和其他不错的功能。我希望它会帮助你。亲切的问候

# javascript - 可以在应用程序中多次添加的 Backbone 视图中的事件

> ID：10481652
> 
> 赞同：1
> 
> 时间：2012-05-07T11:57:14.850
> 
> 标签：javascript, jquery, html, backbone.js

在解释我面临的问题之前，这是我正在使用的代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.1/underscore-min.js"></script>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
        <script type="text/template" id="view_template">
            <li>
            <label class="lbl" style="width:100px;display:inline-block;"><%= name %></label>
            <button class="btn">Click</button>
            </li>
        </script>
        <script type="text/javascript">
            AppModel = Backbone.Model.extend({
                defaults : {
                    m_name : "Default name"
                },
                modify : function(value) {
                    this.set({
                        m_name : value
                    });
                }
            });

            $(document).ready(function() {
                $("#add").click(function() {
                    var appModel = new AppModel();
                    appModel.modify($("#txt").val());
                    new CustomView({
                        model : appModel
                    });
                    $("#txt").val("");
                });
                CustomView = Backbone.View.extend({
                    el : $(".list"),
                    events : {
                        "click .btn" : "showAlert"
                    },
                    initialize : function() {
                        this.render();
                    },
                    render : function() {
                        var variables = {
                            name : this.model.get("m_name")
                        };
                        var t = _.template($("#view_template").html(), variables);
                        $(this.el).append(t);
                    },
                    showAlert : function() {
                        alert(this.model.get("m_name"));
                    }
                });
            });

        </script>
    </head>
    <body>
        <input type="text" id="txt"/>
        <button id="add">
            Add
        </button>
        <ul class="list" style="list-style: none"></ul>
    </body>
</html> 
```

演示在这里 - [http://jsfiddle.net/jCekv/](http://jsfiddle.net/jCekv/)

您可以在文本字段中输入任何值并单击添加。文本将添加到一个主干视图列表中。您可以继续向列表中添加多个值。添加一些项目后，单击任何一个中的单击按钮列表中的项目。我想获取该视图的模型中的值。但是由于我添加的方式`Events`，事件处理程序被多次执行。例如：如果我添加 3 个项目并单击任何按钮在列表中，3 个警报将与添加的每个项目相对应。这不是我想要的方式。我希望仅针对已单击的主干视图触发事件，以便我可以访问我点击的主干视图的模型。

我怎样才能实现这个功能？如果我的问题不清楚，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:04:59.133

问题是你所有`CustomViews`的元素都设置为`$(".list")`. 因此，所有委托事件都被添加到同一个 DOM 元素、列表中，而不是单个列表项。

在此处查看可能的解决方案：http: [//jsfiddle.net/mbuchetics/R8jPA/](http://jsfiddle.net/mbuchetics/R8jPA/)

我将其更改`CustomView`为使用`tagName`of`li`而不是设置元素。模板没有附加到元素上，而是设置了它的内容。这样，每个都`CustomView`代表列表中的一个项目，而单击事件正是指该项目。我还从初始化中删除了渲染调用，而是在将视图附加到列表时呈现视图（在“添加单击”回调中）。 `Render()`返回`this`，因此您可以使用它`view.render().el`来获取列表项的 html。

您可以进一步改进您的应用程序以使用集合和集合的单独视图。然后，集合视图可以处理集合上的“添加”等事件，并相应地更新自身（以及各个项目视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:52:45.257

这是因为您正在为每个项目创建视图类的新实例，将相同的 DOM 元素（对应于整个列表，而不是单个项目）分配给每个实例，并注册相同的事件侦听器。因此，每次单击任何按钮时，都会为每个视图对象触发事件侦听器。

像这样的东西会起作用：

[http://jsfiddle.net/jCekv/1/](http://jsfiddle.net/jCekv/1/)

```
$( document ).ready( function () {

  $( "#add" ).click( function () {

    var appModel = new AppModel();

    appModel.modify( $( "#txt" ).val() );

    var item = new Item_View( {

      model : appModel

    } );

    list.add_item( item );

    $( "#txt" ).val( "" );

  } );

  var List_View = Backbone.View.extend( {

    el : $( ".list" ),

    events : {

      "click .btn" : "showAlert"

    },

    initialize : function () {

      this.render();

    },

    add_item : function ( item ) {

      item.render();

      item.$el.data( 'view_object', item );

      this.$el.append( item.el );

    },

    showAlert : function ( event ) {

      alert(

        $( event.target )

          .closest( 'li' )

          .data( 'view_object' )

          .model.get( "m_name" )

      );

    }

  } );

  var Item_View = Backbone.View.extend( {

    tagName : 'li',

    render : function() {

      var variables = {

        name : this.model.get( "m_name" )

      };

      var t = _.template( $( "#view_template" ).html(), variables );

      this.$el.html( $( t ).html() );

      return this;

    }

  } );

  var list = new List_View;

} ); 
```

*   我为列表和项目创建了单独的视图类。

*   我使用 为每个项目存储对视图对象的引用`jQuery.data`，以便可以在事件侦听器 ( ) 中检索视图对象（以及通过它，模型对象`showAlert`）。或者，您可以在列表视图中维护项目的视图对象数组。我已经有了这个设置来通过`add_item`列表视图的方法执行添加项目，这样可以方便地维护这样一个项目视图对象数组。

# java - 如何从jpa中的元素集合中批量删除

> ID：10481654
> 
> 赞同：5
> 
> 时间：2012-05-07T11:57:23.383
> 
> 标签：java, mysql, jpa, jpa-2.0, criteria-api

我正在使用 jpa 2.0，并且我有以下实体：

```
@Entity
public class Folder{

    @ElementCollection
    @CollectionTable(name="folder_files")
    private Set<String> files;      
    // .....
 } 
```

给定文件名，我想删除 files == *theGivenFileName*的所有条目。在sql中它会是这样的：

```
Delete from folder_files where files = XXX 
```

有没有办法使用条件 API 执行此查询？如果没有，有没有办法使用 jpql 执行这个查询？

**更新：** 我认为我的问题不够清楚：因为 jpql 使用实体（而不是表），所以我不能只执行上面写的 sql，因为我正在使用`@ElementCollection`我不知道如何解决这个变量，甚至不知道如何处理它。我想从所有实体中删除该集合中包含给定值的所有条目（在我的情况下为文件集）。使用 jpql 或（甚至更好的）criteria-api 是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:40:29.327

Delete FROM 子句需要一个实体，因此根据我的理解，无法从元素集合中删除。

您可以使用本机 SQL 查询，也可以将元素集合作为 OneToMany 映射到实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:41:01.847

您可以使用 like 查询，只是语法略有改变。

```
query = em.createQuery("SELECT i FROM Item i WHERE UPPER(i.name) LIKE :keyword ");
query.setParameter("keyword", "%" + keyword.toUpperCase() + "%"); 
```

您可以在以下链接上阅读更多信息，

[https://forums.oracle.com/forums/thread.jspa?threadID=423742](https://forums.oracle.com/forums/thread.jspa?threadID=423742)

更新：

@Noam 你可以做到：就像在 Criteria API 中一样

```
List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .add( Restrictions.between("weight", minWeight, maxWeight) )
    .list(); 
```

请在以下链接阅读更多内容：

[http://ctpconsulting.github.com/query/1.0.0.Alpha3/criteria.html](http://ctpconsulting.github.com/query/1.0.0.Alpha3/criteria.html)

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T10:52:43.437

这是无法做到的。通过 JPQL 它不起作用，因为 DELETE 语句只能应用于实体。摘自 JPA 2.0 规范：

> 批量更新和删除操作适用于单个实体类的实体（连同其子类，如果有的话）。
> ...
> delete_statement ::= delete_clause [where_clause]
> delete_clause ::= DELETE FROM entity_name [[AS] Identification_variable]

它也不能通过 Criteria API 工作。[CriteriaQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaQuery.html)仅支持选择 - 不支持更新或删除。

您必须使用本机 SQL。

# python - 如何修改我的“下载”功能以使用 301/302 重定向？

> ID：10481656
> 
> 赞同：0
> 
> 时间：2012-05-07T11:57:23.877
> 
> 标签：python, http, url

```
def download(source_url):
    try:
        socket.setdefaulttimeout(20)
        agents = ['Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1041.0 Safari/535.21','Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20120403211507 Firefox/12.0']
        ree = urllib2.Request(source_url)
        ree.add_header('User-Agent',random.choice(agents))
        resp = urllib2.urlopen(ree)
        htmlSource = resp.read()
        return htmlSource
    except Exception, e:
        print e
        return "" 
```

我写了这个下载功能。如何使其与 301/302 一起使用？

例如：[http](http://tumblr.com/tagged/long-reads) ://tumblr.com/tagged/long-reads我的功能不适用于此网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:06:49.973

首先，你必须得到 HTTP 响应代码，看看[这个](https://stackoverflow.com/questions/1140661/python-get-http-response-code-from-a-url).

如果代码是 30x，你必须得到新的 url，看看[这个](https://stackoverflow.com/questions/4902523/how-to-get-the-url-of-a-redirect-with-python)。

然后您可以使用新 URL 递归调用您的函数 download()。

您还应该添加一个参数作为重定向计数器以避免无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:07:09.837

如果返回重定向 (301/2) 代码，则 urllib2*应*自动跟随该重定向。

看看这个[相关的问题](https://stackoverflow.com/questions/554446/how-do-i-prevent-pythons-urllib2-from-following-a-redirect)。如果它在您的情况下不遵循重定向，本文将详细检查[重定向处理](http://www.diveintopython.net/http_web_services/redirects.html)。

# iframe - 跟踪在远程网站上运行的小部件的展示次数

> ID：10481659
> 
> 赞同：0
> 
> 时间：2012-05-07T11:57:32.480
> 
> 标签：iframe, google-analytics, widget, usage-statistics

我创建了一个托管在许多网站上的小部件。我最初只使用 jquery 和 JSONP 来实现代码来构建小部件。在实时网站上实现小部件后，虽然我们有不幸的经历，但网站上的其他小部件已经有非常糟糕的 javascript，这会杀死我们的小部件，所以长话短说，我创建了第二个版本，它可以使用一个 IFrame。我在谷歌分析网站上阅读过，您可以相当轻松地跟踪 IFrame 中的使用情况，但是有什么方法可以使用 Google Analytics 跟踪原始无 iframe 版本的使用情况。我当然可以简单地在我身边有一个应用程序，它计算我用来呈现小部件的网络服务被调用的次数，并计算我网站上的推荐次数，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:51:31.403

我不认为它是在重新发明轮子，因为谷歌分析并不是为此而设计的。

拥有 iframe 的优势在于 iframe 的内容在您的网站上，因此在您的控制之下。使用你的插件，你所做的一切都与全局页面命名空间共享，并且以同样的方式另一个扩展杀死了你的，你的扩展可能已经杀死了其他人。

如果您在扩展程序上实施分析，如果它也使用 Google Analytics，您可能会对网站产生非常大的影响。

在 Analytics 中，单个页面上的多个跟踪器很棘手。这是可能的，但不是很好的支持，谷歌不推荐。

当您的 Google Analytics 设置与页面上的其他跟踪器发生冲突时，就会出现问题。由于您共享相同的 cookie，因此两个跟踪器配置必须兼容。例如：

如果一个使用`_setAllowHash`而另一个不使用，则每次触发页面浏览时都会重置 cookie，可能会严重破坏这两种实现。

因此，如果您有其他方法来跟踪您的扩展程序，那就去吧。尝试仅在您的域上使用 Google Analytics，因此如果您在 iframe 中执行此操作，您可以自由使用，否则请尽量避免使用它。

如果您可以更新现有的其他扩展，为什么不将其替换为 iframe 版本呢？

# jquery - 在调整浏览器大小之前，SimpleModal 弹出窗口不会居中

> ID：10481660
> 
> 赞同：0
> 
> 时间：2012-05-07T11:57:33.853
> 
> 标签：jquery, position, simplemodal

我正在使用[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)插件来弹出一个帖子，但在重新调整浏览器大小之前它不会水平居中。我将顶部位置设置为“0”，但希望它在调用时水平居中。这是我用来激活它的功能。

```
jQuery(document).ready(function() {
jQuery('a.postpopup').live('click', function(){
            var id = jQuery(this).attr('rel');
    jQuery('<div id="ajax-popup"></div>').hide().appendTo('body').load('http://fameordie.com/ajax-handler/?id='+id).modal({
               opacity:90,
           position: ["0%"],
               overlayClose:true
            });
            return false;
 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:26:05.400

如果你想要固定模态使用这个：更好的方法是删除 containerCss 并将顶部和右侧添加到模态 css

对于：上，右：

```
$(function() {
jQuery('a.postpopup').live('click', function(){
            var id = jQuery(this).attr('rel');
    jQuery('<div id="ajax-popup"></div>').hide().appendTo('body').load('http://fameordie.com/ajax-handler/?id='+id).modal({
               opacity:90,
               autoPosition:false,
           containerCss:{top:12,right:12,display:"none",position:"fixed",zIndex:1002},
               overlayClose:true
            });
            return false;
 });
}); 
```

对于顶部，中心：

```
$(function() {
jQuery('a.postpopup').live('click', function(){
            var id = jQuery(this).attr('rel');
    jQuery('<div id="ajax-popup"></div>').hide().appendTo('body').load('http://fameordie.com/ajax-handler/?id='+id).modal({
               opacity:90,
               position:['0',]
            });
            return false;
 });
}); 
```

# asp.net - Http 状态码 413

> ID：10481662
> 
> 赞同：4
> 
> 时间：2012-05-07T11:57:35.880
> 
> 标签：asp.net, https, iis-6

我有一个带有普通 Ajax 更新面板的页面。有一个提交按钮，可将用户选择发送到服务器。如果用户等待一两分钟，服务器的响应是来自服务器的 HTTP 413（请求实体太大）。仅当我在等待一两分钟后尝试重新提交时才会发生这种情况。如果一个登陆页面并提交表单，服务器就能够处理它。

我已经修改了uploadReadAheadSize（如[http://forums.asp.net/t/1574804.aspx](http://forums.asp.net/t/1574804.aspx)所述）并将其设置为200,000,000 - 问题仍然存在

Http请求

```
POST https://server/somepage HTTP/1.1
Accept: */*
Accept-Language: en-US,zh-Hans;q=0.9,zh-CN;q=0.8,zh-SG;q=0.7,zh-Hant;q=0.6,zh-HK;q=0.4,zh-MO;q=0.3,zh-TW;q=0.2,zh;q=0.1
Referer: https://server/somepage
x-requested-with: XMLHttpRequest
x-microsoftajax: Delta=true
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Cache-Control: no-cache
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
Host: some-server
Content-Length: 86124
Connection: Keep-Alive
Form-Data........... 
```

请求通过 SSL。

我还尝试在 web config 中编辑 httpruntime 配置

```
<httpRuntime executionTimeout="3600" maxRequestLength="1902400" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:36:23.460

这解决了错误。纠正我，如果我能够正确描述问题。

SSL 打开安全隧道一段时间。因此，每当我尝试在那个时间范围内发布数据时，一切都很好。但是一旦隧道关闭并且服务器在客户端重新协商之前预加载请求。但是预加载最大长度很小，因此失败了。

我尝试将 uploadReadAhead 的值设置为 120,000，这大于实体请求大小约 86,000。请求仍然失败（奇怪.. ????）。

一旦我将它设置为大约 10 MB 的值就很好了。

# android - 如何从 sdcard 显示图像和文件名

> ID：10481664
> 
> 赞同：0
> 
> 时间：2012-05-07T11:57:51.233
> 
> 标签：android, image-gallery, android-sdcard

我能够从 sdcard 中获取所有图像，但我想在列出来自 sdcard 的图像时显示文件名和图像。任何人都可以帮助我实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:13:59.623

我认为这将解决它：

```
 File images = Environment.getDataDirectory();   
     File[] imagelist = images.listFiles(new FilenameFilter(){   
     @override  
     public boolean accept(File dir, String name) {   
        return (name.endsWith(".png"))   
     }   
 }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:31:38.033

你可以使用这个答案。[从 SD 卡获取所有图像](https://stackoverflow.com/questions/10381270/how-to-get-all-image-files-available-in-sdcard-in-android/10381613#10381613)。为了只为 .png 工作，您需要在该答案中使用以下资源数组。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="image">
     <item>png</item>
   </string-array>
</resources> 
```

# windows-phone-7 - WP7 - 访问私有变量

> ID：10481667
> 
> 赞同：0
> 
> 时间：2012-05-07T11:58:07.427
> 
> 标签：windows-phone-7, reflection, private-members

想象一下：

```
Class A{
private int a;
}

Class B{
  public void fn(){
    A obj=new A();
    // access obj's private variable a here.
  }
} 
```

我想访问 obj 的私有变量 a，正如注释掉的那样。反射不起作用，因为它会引发 fieldaccessexception。我想访问一个。还有其他方法吗？我无法更改访问修饰符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:11:21.670

您只能访问 Windows Phone 上的公共、内部或受保护成员（即字段、方法等）。

Windows Phone 上的反射不允许访问私有成员。我建议您对希望访问的内部成员使用“内部”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:05:36.293

在 Windows Phone 上无法做到这一点。您无法`a`从课堂外访问该字段。如果您有`A`该类的源代码，您可能希望更改该字段的可见性。否则，你就卡住了。

# java - 从 java 程序在终端中触发命令

> ID：10481669
> 
> 赞同：1
> 
> 时间：2012-05-07T11:58:13.657
> 
> 标签：java, linux, shell

我需要编写一个java程序，执行时将命令推送到终端

我尝试使用 runtime.exec(); 但对我来说不能正常工作

我想要的是在终端中执行的“/home/raj/Desktop/java -jar test.jar”

谁能帮我整理一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:07:42.703

如果您想实际启动终端窗口（而不仅仅是执行 java 进程），您将需要启动 xterm（或类似的东西）并告诉 xterm 运行 java

```
String command= "/usr/bin/xterm -e /home/raj/Desktop/java -jar test.jar"; 
Runtime rt = Runtime.getRuntime();      
Process pr = rt.exec(command); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:06:46.210

请参考以下示例。带​​有 java 程序的参数列表。

```
Process proc = null;
try {
    String cmd[] = {"gnome-terminal", "-x", "bash", "-c", "ls; echo '<enter>'; read" };

    proc = Runtime.getRuntime().exec(cmd, null, wd);
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:52:36.837

您可以使用 jar 文件的完整路径作为参数`"java"`

```
String command= "java -jar /home/raj/Desktop/test.jar"; 
Runtime rt = Runtime.getRuntime();      
Process pr = rt.exec(command); 
```

# android - onReceive 被无限次调用

> ID：10481675
> 
> 赞同：1
> 
> 时间：2012-05-07T11:58:54.530
> 
> 标签：android, service, broadcast

在我的服务中，我有，

```
Log.e("ActivateHome","VibrateMeeting");
            Intent i = new Intent(this, VibrateMeetingsReceiver.class);
            meetingPi = PendingIntent.getBroadcast(getApplicationContext(), 000010, i, PendingIntent.FLAG_UPDATE_CURRENT);
            meetingAlarm = (AlarmManager) getSystemService(ALARM_SERVICE);
            meetingAlarm.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), AlarmManager.INTERVAL_FIFTEEN_MINUTES, meetingPi); 
```

我的广播接收器，

```
Log.e("VibrateMeetingReceiver","Reached");
             Intent newIntent = new Intent(context,VibrateMeetingsService.class);
             context.startService(newIntent); 
```

发生的事情是广播接收器被调用一百万次，强制关闭我的应用程序。我知道这一点是因为我的广播接收器中的 Log.e 被无限次打印。此外，在我的 VibrateMeetingsService 中，onStartCommand 的调用次数与广播接收器的调用次数一样多。

是什么导致了这个问题？有人可以帮帮我吗？

谢谢。

# jpa - 实体管理器类型和关联交易

> ID：10481676
> 
> 赞同：0
> 
> 时间：2012-05-07T11:58:55.437
> 
> 标签：jpa, transactions, entitymanager

AFAIK，有两种类型的实体管理器。1\. 容器管理实体管理器 2\. 应用管理实体管理器

1.  容器托管实体管理器
    *   这种类型的 em 只使用 JTA 事务

下面是我的代码：

```
@PersistenceContext(unitName = "", type = Transaction)
EntityManager em;

public void persist(T entity) {
em.persist(entity)
} 
```

问题：执行代码时抛出异常：TransactionRequireException 为什么会出现这种异常？将@Resource UserTransaction 添加到方法persist() 后不会发生TransactionRequireException。我想知道 UserTransaction 是否属于 JTA 权利。

```
EntityTransaction et = em.getTransaction(); 
```

参考上面的代码，为什么JTA事务类型不能调用getTransaction()？

扩展的 JTA Transaction 可以在 EJB 之外使用吗？

1.  应用程序托管实体管理器
    *   利用 JTA 事务
    *   利用 JDBC 事务（资源本地事务）

请任何人提供有关 JDBC 事务类型的源代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:44:39.510

JPA 持久性单元可以是 JTA 或 RESOURCE_LOCAL。

如果您使用 JTA，那么您必须通过 SessionBeans 或直接访问 JTA 来使用 JTA 进行事务处理。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Enterprise_Edition](http://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Enterprise_Edition)

# autocomplete - 如何移出 IntelliJ IDEA 中的自动完成括号（不使用箭头键）？

> ID：10481679
> 
> 赞同：106
> 
> 时间：2012-05-07T11:59:09.100
> 
> 标签：autocomplete, intellij-idea

我最近从 Eclipse 切换到 IntelliJ IDEA，发现自己想知道如何将光标移出一对自动完成的括号。

在 Eclipse 中，我输入完一对括号后，按 Tab 键将我带出括号。我怎样才能在不使用箭头键的情况下做同样的事情？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-07T12:08:28.200

IDEA[还没有这样的功能](http://youtrack.jetbrains.com/issue/IDEA-74666)。最接近的等价物是`Complete Current Statement`编辑器操作 ( `Ctrl`++ `Shift`) `Enter`。

* * *

# 更新

此功能的初始实现在 2018.2 EAP 版本中**可用**`Tab`- 按下即可跳出。

它更像在 MS Visual Studio 中工作 - 没有标签“退出”位置的视觉指示。目前，它应该可以在 Java、SQL、Python 和其他一些文件中工作。其他语言需要一些时间才能赶上 - 需要一些特定于语言的代码更改。

该功能默认禁用，您可以在

> 设置 -> 编辑器 -> 常规 -> 智能键 -> 使用 Tab 跳出右括号/引号

[![在此处输入图像描述](../Images/7bd18838da6e889962872732da4f6391.png)](https://i.stack.imgur.com/rZ3or.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-16T15:56:20.763

`Ctrl + Shift + Enter`在 IDEA 12.1.4 中似乎对我不起作用，但我发现最接近我正在寻找的功能是`Shift + Enter`. 这将完成该行，在当前行下方创建一个新行并将光标移动到该行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-21T01:51:11.787

您可以通过按下*关闭符号*来执行此操作，否则您会按下该符号，但已自动完成。例如，如果您刚刚键入了下面的 f，您将按下*shift*和*0*（或*右括号*），它会将您的光标移到括号之外。

```
String asdf = "hello world";
System.out.println(asdf); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-12T20:20:47.007

我去了首选项 - >键盘映射并将“将插入符号移动到行尾”的快捷方式设置为Shift-Space。如果这是您想要的，它将带我到当前行的末尾而不添加任何内容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-31T04:12:40.913

Intellij 目前不支持。在[http://youtrack.jetbrains.com/issue/IDEA-74666](http://youtrack.jetbrains.com/issue/IDEA-74666)上有一个开放的功能请求。额外的选票会很好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-12T09:11:07.870

Intellij 支持 ctrl+shift+m​​ 跳转到块尾的快捷键：

[https://www.jetbrains.com/help/idea/2016.2/navigating-to-braces.html](https://www.jetbrains.com/help/idea/2016.2/navigating-to-braces.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-03T18:05:18.660

这不是您要查找的内容，但是您可以键入要移出的字符（例如，结束括号），这应该会使您跳出自动完成的字符。

不理想，但就我测试过的功能而言。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-10T21:03:59.353

我设置了这些设置：

1）我在**完成当前语句中添加了****分号**快捷方式：

 **[![在此处输入图像描述](../Images/cad93fd5ad2374a9523af1bd7590487f.png)](https://i.stack.imgur.com/VUeb3.png)

我没有使用**for**循环命令，而是使用**fori**命令（因为**for**命令需要分号字符）：

[![在此处输入图像描述](../Images/9b56d1a246bdb3180d51bf4121128f74.png)](https://i.stack.imgur.com/7mILl.png)

2）我添加了**Alt+分号**快捷方式**将插入符号移动到代码块结束**：

[![在此处输入图像描述](../Images/31aa4e708a2d437e577bec22f17a527d.png)](https://i.stack.imgur.com/fFwrK.png)

因此，当我在循环内时，按**Alt+分号**跳出括号结束，按**分号**我随后跳出括号。

通过添加这些快捷方式，编码的速度会更快。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-02T00:42:17.427

这样的键称为“结束”。

您可以在“设置/首选项|键盘映射”中将任何未使用的快捷方式分配给“将插入符号移动到行尾”操作。

PS您可以使用`Ctrl`++来完成您的语句（在您的情况下，它会将插入符号放在行尾并在此处添加“;”）-名为“完成当前语句”的操作和快捷方式可以在同一时间进行检查/`Shift`更改`Enter`方式如前所述。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-25T19:35:07.753

如果您决定返回 Eclipse 并使用 PyDev，此功能默认禁用，首先切换到 PyDev Perspective，您可以通过在 Preferences>PyDev>Editor>Typing>Enable link on Automatic parenthesis or literals closing 下启用它**

# jquery - bootstrap 框架的“data-toggle”属性从何而来？

> ID：10481684
> 
> 赞同：33
> 
> 时间：2012-05-07T11:59:47.860
> 
> 标签：jquery, html, twitter-bootstrap

我正在尝试为[Bootstrap 框架](http://twitter.github.com/bootstrap/javascript.html)使用一些 jQuery 插件，它们使用名为“data-toggle”的属性。我收到警告“属性数据切换不是 a 的有效属性”。

数据切换从何而来？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-07T12:01:26.777

在 HTML5 中，任何以开头的属性`data-`都是有效的**自定义**属性。基本上，这是一种将自定义数据附加到 HTML 规范中未明确定义的元素的方法。

但是，在早期版本的 HTML 中，这并不有效。不过不要担心太多。浏览器通常只是忽略他们不知道的属性。这不会阻止图书馆喜欢`jQuery`阅读它们。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-24T15:29:05.267

如果您查看 Bootstrap 的[JavaScript Collapse 插件](http://getbootstrap.com/javascript/#collapse)文档，您会发现一个相当清晰的示例，说明了 collapse API 的工作原理以及这对`data-toggle`（触发功能）和`data-target`（设置行为）的关系和使用，以及其他有趣的花絮。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-07T12:01:40.240

它是 Bootstrap 定义的 HTML5 数据属性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T13:26:31.510

要快速`dropdown`向任何元素添加功能，只需添加`data-toggle="dropdown"`定义的`HTML5`数据属性，任何有效的引导程序`dropdown`都会自动激活。

# git - 在 Windows 上的 Git Bash 中设置提示颜色

> ID：10481685
> 
> 赞同：24
> 
> 时间：2012-05-07T11:59:51.287
> 
> 标签：git, bash, msysgit

我已经成功地使用了 Windows 上 Git Bash 中的一些颜色设置——我可以设置一些东西，比如我`.gitconfig`文件中本地、当前和远程分支的颜色：

```
[color "branch"]
current = cyan bold
local = cyan 
remote = red 
```

但是我没有设法改变的是提示的颜色 -`username@machine`行首（在我的屏幕截图中的黄色矩形中），以及我当前所在的项目和分支（紫色矩形）。

![在此处输入图像描述](../Images/a7ddef49ec141e16ebaf92336b38b54a.png)

有没有办法影响这些，也是吗？`.gitconfig`我需要设置哪些设置来更改这些颜色？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T13:46:28.747

在您`.bashrc`中，您可以使用变量设置提示`PS1`（可能设置为全局值`/etc/profile`或其他`/etc`可能依赖于分发的文件）。

这是一个例子：

```
PS1='\[\033[1;36m\]\u@\h:\[\033[0m\]\[\033[1;34m\]\w\[\033[0m\] \[\033[1;32m\]$(__git_ps1)\[\033[0m\]\$ ' 
```

为了使命令替换起作用，您需要`shopt -s promptvars`哪个是默认值。

这将以青色输出用户名和主机名，在与`TERM=xterm-color`.

有关终端控件的更多信息，请参阅[`man 5 terminfo`](http://linux.die.net/man/5/terminfo)和[`man tput`](http://linux.die.net/man/1/tput)。

# php - JpGraph 小演示不工作

> ID：10481686
> 
> 赞同：1
> 
> 时间：2012-05-07T12:00:04.640
> 
> 标签：php, jpgraph

我将在我的网络项目中使用[JpGraph 。](http://jpgraph.net/download/)为此，我将库下载到我的项目文件夹中并创建了以下测试代码：

```
 <?php
        include ( "jpgraph-3.5.0b1/src/jpgraph.php");
        include ("jpgraph-3.5.0b1/src/jpgraph_gantt.php");

        // A new graph with automatic size
        $graph = new GanttGraph (0,0, "auto");

        //  A new activity on row '0'
        $activity = new GanttBar (0,"Project", "2001-12-21", "2002-02-20");
        $graph->Add( $activity);

        // Display the Gantt chart
        $graph->Stroke();
        ?> 
```

错误信息是：

```
The image “http://localhost:10088/test/check.php” cannot be displayed, 
because it contains errors. 
```

我的代码有什么问题？事实上，它只是从[这里](http://www.aip.de/~weber/doc/jpgraph/docs/html/5gantt.html)复制而来的。我唯一改变的是 JpGraph 库的路径。那么，我是否需要以某种特殊的方式将这个库导入我的项目中（到目前为止，我刚刚将 JpGraph 的文件夹复制到了项目的文件夹中）？我正在使用 Zend Studio。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:23:05.050

这可能是由页面上的额外空白引起的。`<?php`确保在开始标记之前没有任何空格或换行符。

# linq - 使用 LINQ 接收所有属性为 true 的数据

> ID：10481691
> 
> 赞同：1
> 
> 时间：2012-05-07T12:00:18.080
> 
> 标签：linq, entity-framework, lambda

我首先使用带有 EF 模型的 MVC3。

我有这个 LINQ 来接收所有数据：

```
 public List<CoreValueQuestion> GetAllCoreValueQuestions()
        {
            return db.Question.OfType<CoreValueQuestion>().OrderBy(x => x.QuestionText).ToList();
        } 
```

我的问题实体有一个布尔属性，称为 Active，我想返回所有具有 active = true 的问题。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:04:52.080

也许是这样的：

```
db.Question
     .OfType<CoreValueQuestion>()
     .Where(a=>a.Active==true)
     .OrderBy(x => x.QuestionText)
     .ToList(); 
```

或者如果`Active`不是可为空的列，只需执行以下操作：

```
db.Question
     .OfType<CoreValueQuestion>()
     .Where(a=>a.Active)
     .OrderBy(x => x.QuestionText)
     .ToList(); 
```

# javascript - 如何使用 jQuery Toggle 定位具有公共类的特定元素？

> ID：10481692
> 
> 赞同：1
> 
> 时间：2012-05-07T12:00:19.447
> 
> 标签：javascript, jquery, html, dom

我正在创建一个下拉菜单，可以在一个页面上多次重复使用。

当只有一个下拉菜单时，以下代码效果很好。但是当有多个下拉菜单时，单击一个`.dropdown`会导致`.dd_menu`页面上的所有 ' 都显示出来。

## JS：

```
$(document).ready(function() {
   $('.dropdown').click(function(){
      $('.dd_menu').toggle();
   });
}); 
```

## HTML：

```
<div class="dropdown">
    <a class="mini_button" href="#">Actions</a>

    <div class="dd_menu">
        <a href="http://example.com">Link</a>
        <a href="http://example.com">Link</a>
        <a href="http://example.com">Link</a>
    </div>
</div> 
```

**是否有一些只针对被点击`.dd_menu`的特定`.downdown`内容中的内容？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:02:10.880

将选择器限制为`.dd_menu`当前单击的`.dropdown`div 的子项：

```
$(document).ready(function() {
   $('.dropdown').click(function(){
      $('.dd_menu', this).toggle(); // <========== used this as a context.
   });
}); 
```

`jQuery( selector [, context] )`：

*   `selector`包含选择器表达式的字符串
*   `context`用作上下文的**DOM 元素、文档或 jQuery**

[**文档**](http://api.jquery.com/jQuery/)

你也可以使用`find`函数：`$(this).find('.dd_menu')`但它完全一样。上下文选择器正在调用该`find`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:03:42.960

你可以试试：

```
$(this).children('.dd_menu').toggle(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T12:08:56.477

```
$(document).ready(function() {
   $('.dropdown').on('click', 'a', function(){
       $('.dd_menu:eq('+$(this).parent().index()+')').toggle();
   });
});​ 
```

# windows - 独立 web allpications 的 php 替代方案

> ID：10481694
> 
> 赞同：1
> 
> 时间：2012-05-07T12:00:26.483
> 
> 标签：windows

我需要开发多用户网站，该网站也应该能够在本地（在 Windows 上）为单个用户运行。我想对两个站点使用相同的代码。本地副本应该可以在不安装任何软件的情况下工作，源代码不应该可用，并且网络浏览器应该集成到应用程序中。我可能使用 SQLite 作为本地数据库，我想使用 ExtJS 作为前端。

我知道有 2 种 PHP 产品声称可以做到这一点，但我不确定它们是否可以与我感兴趣的工具（ExtJS 和 Kohana PHP）一起使用。

我知道 Haskell 提供了这样的选项，但我不想走那么远:)。

Flex 似乎不太有前途（至少我记得是这样），因为它的 UI 构建能力有限，而且我希望有 HTML 的在线版本，而不是 Flash。

是否有其他可用的技术（.NET、Ruby、Python 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:02:08.323

好吧，您可以使用 PHP 本身。它不是可用的最简洁的解决方案，但您可以使用它`php-win.exe`来避免命令行弹出。然后，您可以使用一些源代码混淆器或字节码编译器来避免泄露源代码。并且 AFAIK PHP 无需安装即可工作（如果其中包含所有必需的文件，它可以用完一个目录）

正如我所说，这不是最整洁的解决方案，但可能会满足您的要求。

# html5-video - jquery 工具幻灯片中的 jwplayer

> ID：10481698
> 
> 赞同：0
> 
> 时间：2012-05-07T12:00:43.660
> 
> 标签：html5-video, jwplayer, jquery-tools

我的页面上有 jquerytools 选项卡，其中一个窗格正在使用 jwplayer 显示视频。

在任何浏览器中，视频都不会出现，预览图也不会出现（实际上，IE9 显示的是预览图，其他什么都没有。）

当我将 jwplayer 代码从 jquerytools 窗格中取出时，它会正确加载和显示，所以它不是 jwplayer 语法。

我还尝试将 jwplayer 换成 videojs，结果完全相同。

有任何想法吗？

# c# - Webclient.UploadString() 发送一个空字符串

> ID：10481701
> 
> 赞同：0
> 
> 时间：2012-05-07T12:01:10.880
> 
> 标签：c#, post, webclient

这是一些代码：

```
var client = new WebClient();
client.BaseAddress = "http://localhost/";
client.Headers["Content-type"] = "application/x-www-form-urlencoded";
client.Proxy = null;
// The server gets the data
var responseStr = client.UploadString(url, data); 
...
// The server gets an empty post data
responseStr = client.UploadString(url, data); 
```

Webclient 应该是一次性的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:05:34.237

嗯，你可能不能试试这个：

```
WebClient client = new WebClient();
client.BaseAddress = "http://localhost/something.php"; 
```

# c# - 使用 C# 的 SQL Azure 数据导出服务

> ID：10481704
> 
> 赞同：1
> 
> 时间：2012-05-07T12:01:24.027
> 
> 标签：c#, sql, azure, export

我是 Azure 的新手，我想知道我们如何在 C# 中实现数据导出服务。

目前我使用 windows azure 进行应用程序开发，使用 sql azure 进行数据库。所以我想从我的数据库中读取数据并根据时间间隔将其更新到另一个客户端数据库中。

我想将这些功能实现为 Windows azure worker 角色。我怎样才能做到这一点？

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:03:36.860

我不确定您到底想要做什么，但根据您的需要，您可以使用以下选项之一：

**SQL 数模转换器**

这更像是一种类似导入/导出的方法（这就是“数据导出服务”的意思吗？）

![在此处输入图像描述](../Images/16f1e37530529c24d4f9f921034490f5.png)

[http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation)

**SQL Azure 数据同步**

这是一个同步解决方案，允许您使用同步组、筛选器、特定表/列……在多个数据库之间同步数据（同时支持 SQL Server 和 SQL Azure）。

[http://msdn.microsoft.com/en-us/library/hh456371.aspx](http://msdn.microsoft.com/en-us/library/hh456371.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:22:15.810

正如 Sandrino 所指出的，您可以使用 SQL Azure 数据同步。它支持您想要实现的功能。使用现有产品通常比编写自己的产品容易得多。

如果要自己写，请区分哪些数据被修改了。您可以采用与数据同步相同的方法：在数据库中创建触发器。每当插入、更新、删除数据时，都会调用触发器，并在跟踪表中插入一些元数据。然后，您的工作人员角色代码查询跟踪表以确定需要同步哪些数据。

最好的祝福，

明旭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:38:58.350

我写了一篇关于这个的博客文章，它使用一些简单的工具来实现简单的导出和导入，使用任务调度程序而不是 worker-role，这使得它非常容易：

[https://iainhunter.wordpress.com/2012/08/21/sql-azure-disaster-recovery/](https://iainhunter.wordpress.com/2012/08/21/sql-azure-disaster-recovery/)

# c# - Windows 应用程序中的图像滑块

> ID：10481706
> 
> 赞同：0
> 
> 时间：2012-05-07T12:01:28.417
> 
> 标签：c#, winforms, image

我正在开发一个 Windows 窗体应用程序。

我希望在我的 Windows 应用程序底部显示一个图像滑块，如下所示：
[图像幻灯片示例](https://skydrive.live.com/?cid=bb2c3831a82f075e&resid=BB2C3831A82F075E!218&id=BB2C3831A82F075E!218&sff=1)
图像路径将从数据库中获取。知道如何实现吗？
提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:30:10.413

我不知道您是否想要一个一次只显示一张或更多张图片的滑块，但如果您需要后者，您可以调整代码。

```
private void showImage(string path)
{
    Image imgtemp = Image.FromFile(path);
    pictureBox1.Width = imgtemp.Width / 2;
    pictureBox1.Height = imgtemp.Height / 2;
    pictureBox1.Image = imgtemp;
} 
```

如果您希望它仅在自动模式下工作，请仅使用一种方法：

```
private void prevImage()
{
    if(selected == 0)
    {
        selected = folderFile.Length - 1;
        showImage(folderFile[selected]); 
    }
    else
    {
        selected = selected - 1; showImage(folderFile[selected]);
    }
}

private void nextImage()
{
    if(selected == folderFile.Length - 1)
    {
        selected = 0; 
        showImage(folderFile[selected]);
    }
    else
    {
        selected = selected + 1; showImage(folderFile[selected]);
    }
} 
```

现在计时器和开始幻灯片按钮：

```
private void timer1_Tick(object sender, System.EventArgs e)
{ 
    nextImage();
}

private void Start_Click(object sender, System.EventArgs e)
{
    if(timer1.Enabled == true)
    { 
        timer1.Enabled = false;
        Start.Text = "<< START Slide Show >>";
    }
    else
    {
        timer1.Enabled = true;
        Start.Text = "<< STOP Slide Show >>";
    }
} 
```

从[这里](http://www.codeproject.com/Articles/23082/A-Simple-Image-Slide-Show)。但是，如果您需要更多的东西，您可以阅读[devexpress 中的检查 ImageSlider](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsControlsImageSlidertopic)。

# svn - 将 svn 文件夹移动到自己的存储库

> ID：10481712
> 
> 赞同：1
> 
> 时间：2012-05-07T12:01:56.580
> 
> 标签：svn, svnadmin, svndumpfilter, svndump

我有一个一直在扩展和扩展的存储库。现在我正在清理它并希望将每个项目移动到一个单独的存储库。我目前的设置：

```
[ProjectRepo]
- Projects
  - Software1
    - trunk (VS2010 solution inside here)
      - .sln
      - vs project #1
      - vs project #2
      - vs project #3      
    - branches
    - tags
  - Software2
    - trunk (VS2010 solution inside here)
      - .sln
      - vs project #1
      - vs project #2
      - vs project #3      
    - branches
    - tags
  - Shared
    - shared component #1 (vs project)
      - trunk
      - branches
      - tags
    - shared component #2 (vs project)
      - trunk
      - branches
      - tags 
```

现在我想将每个项目和每个解决方案移动到主干目录中自己的存储库。我一直在尝试使用 svnadmin dump 和 svndumpfilter，但问题是节点路径仍然像旧结构一样。如何获得以下结构？

```
[Software #1 Repo]
- trunk
- branches
- tags

[Software #2 Repo]
- trunk
- branches
- tags

[Shared Component #1 Repo]
- trunk
- branches
- tags 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:48:38.183

如果您能够使用 svndumpfilter 成功过滤项目（如果项目之间存在任何“交互”，例如复制或合并，我认为这是不可能的），那么您可以使用旧结构创建新的存储库，然后通过 svn copy 和 svn delete 创建新结构（即将 Software1Repo/Projects/Software1/trunk 复制到 Software1Repo/trunk，然后 svn delete 等）。

# iphone - 在 iOS 中下载和保存图像

> ID：10481713
> 
> 赞同：1
> 
> 时间：2012-05-07T12:01:57.713
> 
> 标签：iphone, image, save, download

我正在创建一个 iPhone 应用程序，并且我想从 Web 服务下载多个图像文件。我想将图像保存在应用程序本身的本地文件夹中，并将路径保存到 SQLite 数据库中的每个文件。我该如何实施？请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T12:07:40.010

```
**// Get an image from the URL below**
    UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"yorimageurl"]]];

    NSLog(@"%f,%f",image.size.width,image.size.height);

    **// Let's save the file into Document folder.**

    NSString *Dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *pngPath = [NSString stringWithFormat:@"%@/test.png",Dir];// this path if you want save reference path in sqlite 
    NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];
    [data1 writeToFile:pngFilePath atomically:YES];

    NSLog(@"saving jpeg");
    NSString *jpegPath = [NSString stringWithFormat:@"%@/test.jpeg",Dir];// this path if you want save reference path in sqlite 
    NSData *data2 = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0f)];//1.0f = 100% quality
    [data2 writeToFile:jpegFilePath atomically:YES];

    NSLog(@"saving image done");

    [image release]; 
```

**>> 更新补充：**

您需要在 sqlite 数据库中保存图像名称（您可以尽早执行的唯一名称..正确..!!），您可以使用该名称创建路径或检索图像，如下所示。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"test.png"];// here you jus need to pass image name that you entered when you stored it. 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:16:41.097

在实现@Nit 的代码之后.. 你可以参考[这个](https://stackoverflow.com/questions/4310852/how-to-insert-a-record-in-sqlite)在数据库中插入记录。

这显示了如何在数据库中插入记录。为了获得路径，请阅读我在@Nit 的回答中的评论。

**更新：**

要获取每个下载文件的路径，您必须为每个文件保留唯一名称。现在您将拥有写入文件的路径，该路径是每个文件的唯一路径。现在您只需在每次下载文件时执行插入查询，或者需要将文件路径保存在数组中，稍后根据您的要求执行查询。不要忘记为每个文件赋予不同的文件名，否则只有一个文件存在并且您的路径将相同。

要获得唯一的文件名，您可以使用时间戳：

```
NSString *fileName = [NSString stringWithFormat:@"%lf.png", [[NSDate date] timeIntervalSince1970]; 
```

**更新2：**

你现在有这样的路径：`/Users/John/Library/Application Support/iPhone Simulator/5.1/Applications/84A837AA-7881-4D99-B6E2-623DC9A2E5D3/Documents/test.png`

在图像视图中获取图像：

```
UIImage *img = [UIImage imageWithContentsOfFile:yourPath];
//[UIImage imageWithData:[NSData dataWithContentsOfFile:yourPath]];
UIImageView *imgView = // Alloc + Init + Setting frame etc
imgView.image = img; 
```

这将在您的图像视图中显示图像

希望这可以帮助

# android - 以编程方式从服务中截取屏幕截图

> ID：10481715
> 
> 赞同：17
> 
> 时间：2012-05-07T12:02:07.617
> 
> 标签：android, image, screenshot, capture, snapshot

这段代码很容易

```
Bitmap bitmap;
View v1 = MyView.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false); 
```

而且效果很好，但是如果有活动，情况就是如此。

如何从服务中截取屏幕截图？

我的目标是在一小时内截取屏幕截图，例如每小时关闭屏幕，例如在 12 中，然后在 1 中，然后在 2 中 .... 等等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:48:44.897

要为您的活动捕获***屏幕截图***，您必须需要一个`View`活动，并且哪个活动不存在于您的服务中，因此您必须创建一个 TimerTask，它将每小时调用您的活动，并且您的活动会以当前显示视图和你可以从中捕捉`ScreenShot`到。（我认为这只是您的问题的解决方案。）

或者，如果您想截取当前设备屏幕（任何应用程序）的屏幕截图，则必须获得**root 权限**，并读取`framebuffer`将提供当前屏幕原始数据的内容，然后将其转换为位图或您可以执行的任何图片文件你的服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T09:44:21.003

Android 屏幕截图库 (ASL) 提供了拍摄手机屏幕快照的方法，无需签署您的应用程序或拥有对 Android 系统的特权（根）访问权限 [单击此处获取 ASL](http://code.google.com/p/android-screenshot-library/wiki/Usage)

# php - php中多个mysql数据库的使用和管理

> ID：10481722
> 
> 赞同：1
> 
> 时间：2012-05-07T12:02:23.413
> 
> 标签：php, mysql

我的脚本需要连接到多个数据库。有些部分只需要连接到一个，这一切都很好而且很花哨，但是在某些情况下，我需要在单个脚本执行中对不同的数据库执行查询。

目前我正在做这样的事情：

```
function db_connect($which) {
    if($which == "main") {
        $maindb = mysqli_connect(HOSTNAME_1, USER, PASSWORD, MAIN_DB);
        return $maindb;
    } elseif($which == "stats") {
        $statsdb = mysqli_connect(HOSTNAME_2, USER, PASSWORD, STATS_DB);
        return $statsdb;
    }
}

$maindb = db_connect("main");
$statsdb = db_connect("stats"); 
```

我在一个充满常量的配置文件中维护实际的主机名、用户名、密码和数据库名称。

然后我在不同的查询中使用各自的链接。

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:05:31.143

这似乎没问题。另一种方法是使用 mysqli 类而不是函数来操作对象而不是标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:06:21.967

很好，虽然你应该尽量不要重复你的代码：

```
function db_connect($which) {
    if($which == "main") {
        $host = HOSTNAME_1;
        $db = MAIN_DB;
    } elseif($which == "stats") {
        $host = HOSTNAME_2;
        $db = STATS_DB;
    } else {
        throw new Exception('unknown db');
    }
    return mysqli_connect($host, USER, PASSWORD, $db);
}

$maindb = db_connect("main");
$statsdb = db_connect("stats"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:13:14.860

您可以将数据库配置存储在数组中并使用它。这就是codeigniter的做法。

```
function get_database_config(){
    $config['main']['hostname'] = "host1";
    $config['main']['user']     = "user1";
    $config['main']['password'] = "pass1";
    $config['main']['database'] = "database1";

    $config['stats']['hostname'] = "host2";
    $config['stats']['user']     = "user2";
    $config['stats']['password'] = "pass2";
    $config['stats']['database'] = "database2";

    return $config;
}

function db_connect($db)
{
    $config = get_database_config();
    return mysqli_connect( 
            $config[$db]['hostname'],
            $config[$db]['user'],
            $config[$db]['password'],
            $config[$db]['database']
    );
} 
```

如果您不想使用关联数组而更喜欢使用常量，则可以将常量命名为`MAIN_HOSTNAME, STATS_HOSTNAME, ...`并`constant($which . '_HOSTNAME')`用作 mysqli_connect() 的输入。

# c - 在 C 中动态分配和释放

> ID：10481726
> 
> 赞同：-4
> 
> 时间：2012-05-07T12:02:47.947
> 
> 标签：c, malloc, heap-memory, free

```
void* heap = malloc(100);
char *c = heap;
strcpy(c, "Terence");
printf("heap = %s\n", heap);
free(heap);
heap = malloc(100);
printf("heap = %s\n", heap); 
```

输出是：

```
heap = Terence
heap = 
```

这是我所期望的，但现在我有一个复杂得多的代码，结构与上面类似，但输出如下：

```
heap = "Terence"
heap = "  ren  " 
```

类似的东西。

好像堆还没有清理干净？

有没有办法解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:04:54.887

分配的内存区域`malloc`具有不确定的初始值。

来自 C 标准（强调我的）：

> (c99, 7.20.3.3p2) “malloc 函数为大小由 size 指定且**值为不确定的对象分配空间***。”

使用`calloc`或`memset`之后`malloc`具有确定的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:04:53.033

Malloc 不会隐式地将分配的内存归零。为此，您需要对 calloc 或 memset 进行单元格：

```
heap = malloc(100);
memset(heap, 0, 100); 
```

或者

```
heap = calloc(100, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:27:10.220

当您释放任何内存块时，您应该始终将指针变量设置为`NULL`，因为不再可以访问内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:52:53.960

当您使用`void free( void* ptr );`释放先前分配的内存块时，您使用指针变量作为自由函数的参数。该函数只读取指针变量，并不会自动为您将其设置为 NULL。

因此，您可以将该变量设置为 NULL，以便您编写的其他可能依赖于该变量的代码将处理 NULL 指针，而不是看起来正常但指向的内存地址不能再访问了。

# c# - 用于检查传递参数错误的 API Desire2Learn

> ID：10481727
> 
> 赞同：0
> 
> 时间：2012-05-07T12:02:50.757
> 
> 标签：c#, desire2learn

我编写了一个 API 来在 Desire2Learn 中创建 CreateCourseOffering

[http://docs.valence.desire2learn.com/res/course.html#post--d2l-api-lp-(D2LVERSION-version)-courses-](http://docs.valence.desire2learn.com/res/course.html#post--d2l-api-lp-(D2LVERSION-version)-courses-)

我为此调用了上面的 API。代码执行得很好，我没有找到任何创建的课程。在下面粘贴我的代码。请建议其中有什么问题

**我的输入**

```
 objCourse.Code = "1234567";
        objCourse.Name = "TCS_TestCourse2";
        objCourse.path = "/content/Traning";
        objCourse.ForceLocale = false;
        objCourse.ShowAddressBook = false;
        objCourse.CourseTemplateId = 10; 
```

**我的代码**

```
 UriBuilder baseUri = new UriBuilder(userContext.CreateAuthenticatedUri("/d2l      /api/lp  /1.0/courses/", "POST"));

            CreateCourse objCreateCourse = new CreateCourse();
            objCreateCourse.Code = objCourse.Code;
            objCreateCourse.Name = objCourse.Name;
            objCreateCourse.path = objCourse.path ;
            objCreateCourse.ForceLocale = objCourse.ForceLocale;
            objCreateCourse.ShowAddressBook = objCourse.ShowAddressBook;
            objCreateCourse.CourseTemplateId = objCourse.CourseTemplateId;

            JavaScriptSerializer serializer1 = new JavaScriptSerializer();
            string createCourseData = serializer1.Serialize(objCreateCourse);

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(baseUri.Uri);

            request.Method = "POST";
            request.AllowAutoRedirect = false;
            byte[] bytes;
            bytes = System.Text.Encoding.ASCII.GetBytes(createCourseData);
            request.ContentLength = bytes.Length;
            request.ContentType = "application/json";

            Stream dataStream = request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(bytes, 0, bytes.Length);
            // Close the Stream object.
            dataStream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:58:42.840

The JSON parsing on the server side requires all fields to be included even if they are null. It looks like you are just missing a few of those fields.

I verified locally that the following JSON block successfully created a Course Offering. When I omitted the null fields it resulted in a 400 Bad Request:

```
var data = { 
        'Name': "TCS_TestCourse2",
        'Code': "1234567",
        'Path': "/content/Training",
        'CourseTemplateId': 10,
        'SemesterId': null,
        'StartDate': null,
        'EndDate': null,
        'LocaleId': null,
        'ForceLocale': false,
        'ShowAddressBook': false
    }; 
```

Assuming that CourseTemplateId: 10 is a valid orgunit number.

I would change this section of code to reflect that:

```
 CreateCourse objCreateCourse = new CreateCourse();
        objCreateCourse.Code = objCourse.Code;
        objCreateCourse.Name = objCourse.Name;
        objCreateCourse.path = objCourse.path ;
        objCreateCourse.ForceLocale = objCourse.ForceLocale;
        objCreateCourse.ShowAddressBook = objCourse.ShowAddressBook;
        objCreateCourse.CourseTemplateId = objCourse.CourseTemplateId;
        objCreateCourse.StartDate = null;
        objCreateCourse.EndDate = null;
        objCreateCourse.LocaleId = null;
        objCreateCourse.SemesterId = null; 
```

# c++-cli - 找不到入口点

> ID：10481732
> 
> 赞同：0
> 
> 时间：2012-05-07T12:03:09.197
> 
> 标签：c++-cli, pinvoke

我导入了两个 WinApi 函数并在我的课堂上使用它们

```
using namespace System::Runtime::InteropServices;

[DllImport("user32",ExactSpelling = true)]
extern bool CloseWindow(int hwnd);
[DllImport("user32",ExactSpelling = true)]
extern int FindWindow(String^ classname,String^ windowname);

public ref class WinApiInvoke
{
public:
    bool CloseWindowCall(String^ title)
    {
        int pointer = FindWindow(nullptr,title);
        return CloseWindow(pointer);
    }
}; 
```

然后我在主程序中创建对象并调用`CloseWindowCall`方法

```
Console::WriteLine("Window's title");
String ^s = Console::ReadLine();
WinApiInvoke^ obj = gcnew WinApiInvoke();
if (obj->CloseWindowCall(s))
    Console::WriteLine("Window successfully closed!");
else Console::WriteLine("Some error occured!"); 
```

当我在控制台中写入例如 Chess Titans 以关闭时出现错误 `Unable to find an entry point named 'FindWindow' in DLL 'user32'`

什么切入点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:55:01.357

您不恰当地使用 ExactSpelling 属性。user32.dll 中没有 FindWindow 函数，就像异常消息所说的那样。有 FindWindowA 和 FindWindowW。第一个处理传统的 8 位字符串，第二个使用 Unicode 字符串。任何接受字符串的 Windows api 函数都有两个版本，您在 C 或 C++ 代码中看不到这一点，因为 UNICODE 宏在两者之间进行选择。

避免在 winapi 函数上使用 ExactSpelling，pinvoke marshaller 知道如何处理这个问题。您还有其他一些错误，正确的声明是：

```
[DllImport("user32.dll", CharSet = CharSet::Auto, SetLastError = true)]
static IntPtr FindWindow(String^ classname, String^ windowname); 
```

# c# - 执行第二个 LINQ 查询时 ObservableCollection 未更新？

> ID：10481734
> 
> 赞同：2
> 
> 时间：2012-05-07T12:03:11.557
> 
> 标签：c#, linq, windows-phone-7

在 Windows Phone 中，我使用 ObservableCollection 模型填充我的 Pivot 控件，该模型使用 LINQ 从 SQL 数据库中获取其数据。这在初始设置中非常有效。

但是当我对数据库做了一些更改，然后我想再次运行 LINQ 查询以反映对 UI（和 ObservableCollection）的更改时，我注意到 ObservableCollection 没有像我一样获得新值期望从 LINQ 查询。

```
private ObservableCollection<ComicItem> m_showingComicsListModel;
public ObservableCollection<ComicItem> ShowingComicsListModel
{
...
}

...

var comicsSelectedInDB = from ComicItem item in comicListDb.Items
                         where item.IsShowing == true
                         select item;

m_showingComicsListModel = new ObservableCollection<ComicItem>(comicsSelectedInDB ); 
```

因此，当`showingComicsListModel`第一次评估时，它会正确填充模型。但是在我对数据库进行了一些更改并第二次运行此代码之后，`ShowingComicsListModel`并没有改变，也没有调用 setter。

关于使用 LINQ 更新 ObservableCollection 的正确方法的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:16:00.543

您有两种方法可以解决您的问题。

第一个选项是清除现有的 ObservableCollection 并将 linq 查询的结果添加到 Collection

```
var comicsSelectedInDB = from ComicItem item in comicListDb.Items
                     where item.IsShowing == true
                     select item;

m_showingComicsListModel.Clear();

foreach(var comic in comicsSelectedInDB) {
  m_showingComicsListModel.Add(comic);
} 
```

或者

第二个选项是引发属性 ShowingComicsListModel 的 PropertyChangedEvent 以通知 UI 绑定属性已更改。此解决方案要求该类实现 INotifyPropertyChanged 接口。

```
private ObservableCollection<ComicItem> m_showingComicsListModel;
public ObservableCollection<ComicItem> ShowingComicsListModel
{
  get{ return m_showingComicsListModel;}
  set{
       m_showingComicsListModel = value;
       RaisePropertyChanged("ShowingComicsListModel");
  }
} 
```

# java - 我应该如何`java -jar a.jar`，然后退出java但保留jar

> ID：10481736
> 
> 赞同：2
> 
> 时间：2012-05-07T12:03:14.333
> 
> 标签：java, jar, cmd

我想在 Windows 上运行 jar 可运行文件。在`cmd`，我输入`java -jar a.jar`，但它会首先为a.jar的父级启动一个java exe，但我不想要它。（或启动java并启动a.jar，然后退出java但保留jar）如果我只输入`a.jar`，`cmd`它运行良好，但由于某种原因，我必须从 java 启动它，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:05:56.993

您可以尝试 , `javaw`，即`java` 在一个新线程中，您可能想查看[java.exe 和 javaw.exe 之间的区别](https://stackoverflow.com/questions/1997718/difference-between-java-exe-and-javaw-exe)

# python - 在 csv 中写入 unicode 数据

> ID：10481738
> 
> 赞同：4
> 
> 时间：2012-05-07T12:03:27.977
> 
> 标签：python, csv, python-2.7

我知道类似的问题已经被问过很多次，但严重的是我无法正确实现在 csv 中正确写入的 csv writer（它显示垃圾）。

我正在尝试使用 UnicodeWriter 作为[官方文档](http://docs.python.org/library/csv.html#csv-examples)中的提及。

```
ff = open('a.csv', 'w')
writer = UnicodeWriter(ff)
st = unicode('Displaygrößen', 'utf-8') #gives (u'Displaygr\xf6\xdfen', 'utf-8')
writer.writerow([st]) 
```

这不会给我任何解码或编码错误。但它写了一个`Displaygrößen`不好`DisplaygrÃ¶ÃŸen`的词。谁能帮助我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:27:34.643

您正在编写一个 UTF-8 格式的文件，但您没有在 csv 文件中指出这一点。

您应该在文件的开头写上 UTF-8 标头。添加这个：

```
ff = open('a.csv', 'w')
ff.write(codecs.BOM_UTF8) 
```

并且您的 csv 文件应该在程序尝试读取它之后正确打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:13:08.897

[使用codecs.open](http://docs.python.org/library/codecs.html#codecs.open)打开文件应该可以修复它。

# javascript - jQuery - 使用 .get/.load 从文本文件中读取数据 - 强制重新加载？

> ID：10481740
> 
> 赞同：0
> 
> 时间：2012-05-07T12:03:42.553
> 
> 标签：javascript, jquery

我想使用 jQuery 从 Web 服务器加载数据。我正在将文件上传到 Web 服务器，将响应（包含链接）放入 iframe 并使用 .get() 读取此链接。当我现在上传另一个文件时，它导致相同的文件名但更改了内容，.get() 在第一次尝试时无法正确读取内容，但在第二次尝试时可靠。.load() 应该做的基本相同，但无论我多久重新上传文件都不会重新加载文件。

是否有机会强制重新加载更改的文件？

```
var linkToTextFile = 'http://www.myserver.com/myTextFile.txt';

$.get(linkToTextFile, function(data){
    alert("Data:" + data); //content changes on second try
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:09:30.423

尝试将随机 GET 参数附加到文本文件的 URL ：

```
var timestamp = new Date().getTime();
var linkToTextFile = 'http://www.myserver.com/myTextFile.txt?t=' + timestamp;
```

这样，它将强制浏览器重新加载文件。

# java - JSF 2 ui:repeat: 对 div 中的每 n 个项目进行分组

> ID：10481742
> 
> 赞同：6
> 
> 时间：2012-05-07T12:03:44.317
> 
> 标签：java, jsf, jsf-2, uirepeat

给定一个我想在这样的页面上排列的集合：

```
<!-- Group 0 -->
<div style="float:left;">
    <div><!-- Item 0 --></div>
    <div><!-- Item 1 --></div>

    <!-- ... -->

    <div><! -- Item n - 1 --></div>
</div>
<!-- Group 1 -->
<div style="float:left;">
    <div><!-- Item n     --></div>
    <div><!-- Item n + 1 --></div>

    <!-- ... -->

    <div><! -- Item 2n - 1 --></div>
</div>

<!-- ... -->

<!-- Group g -->
    <div><!-- Item gn     --></div>
    <div><!-- Item gn + 1 --></div>

    <!-- ... -->

    <div><! -- Item (g + 1)n - 1 --></div>
</div> 
```

是否有某种技巧可以在 ui:repeat 或其他技术中使用，*最好*是创建自定义组件以外的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T12:13:15.867

`varStatus`您可以通过属性检查当前循环回合，并`</div><div style="float: left;">`在必要时打印中介。

例如每 3 个项目：

```
<div style="float: left;">
    <ui:repeat value="#{bean.list}" var="item" varStatus="loop">
        <h:outputText value="&lt;/div&gt;&lt;div style='float: left;'&gt;" escape="false" rendered="#{not loop.first and loop.index % 3 == 0}" />
        <div>#{item}</div>
    </ui:repeat>
</div> 
```

请注意，不可能将其作为纯 HTML 包装在 a`<h:panelGroup>`中，因为这会导致 XML 格式不正确，因此将`<h:outputText escape="false">`它们作为 XML 实体。

* * *

**根据评论进行**更新**`<div>`，这是一种仅定义一次 s 的替代方法，这可能不那么令人困惑：**

 **```
<ui:repeat value="#{bean.list}" var="item" varStatus="loop">
    <h:outputText value="&lt;div style='float: left;'&gt;" escape="false" rendered="#{loop.index % 3 == 0}" />
    <div>#{item}</div>
    <h:outputText value="&lt;/div&gt;" escape="false" rendered="#{loop.last or (loop.index + 1) % 3 == 0}" />
</ui:repeat> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:17:50.950

如果可能的话，我会在服务器端打破收集：

```
<ui:repeat value="#{groups}" var="group">
  <div style="float:left;">
    <ui:repeat value="#{group.items}" var="item">
      <div>#{item.content}</div>
    </ui:repeat>
  </div>
</ui:repeat> 
```

another option could be (haven't tested, not sure about size behaviour in particular):

```
<ui:repeat value="#{items}" var="group" varStatus="status" step="n">
  <div style="float:left;">
    <ui:repeat value="#{items}" var="item" offset="#{status.index}" size="#{status.index + n}">
      <div>#{item.content}</div>
    </ui:repeat>
  </div>
</ui:repeat> 
```

EDIT: the second version has been replaced**

# asp.net - ASP.NET 中 Membership 框架的默认连接字符串

> ID：10481746
> 
> 赞同：0
> 
> 时间：2012-05-07T12:04:18.663
> 
> 标签：asp.net, database, connection-string

ASP.NET 应用程序的默认连接字符串是什么？我编写了一个使用 Membership 框架的简单 ASP.NET 应用程序，但我没有在我的 web.config 中指定“connectionString”。然而，应用程序能够连接到数据库。它连接到什么数据库？它的连接字符串是什么以及它在我的文件系统中的位置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:19:11.543

为 ASP.NET MVC3 应用程序生成的默认连接字符串是

```
<configuration>
    <connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

该文件位于`App_Data`网站根目录中的文件夹中

# python - Python FTP一次上传多个文件

> ID：10481747
> 
> 赞同：1
> 
> 时间：2012-05-07T12:04:19.467
> 
> 标签：python, ftp, rar

因此，我正在编写一个脚本，用于将大型文件服务器（目录）备份到多个 FTP 帐户/服务/任何东西（目前可怜的秘书有一个复制和粘贴文件到这样做，但无论如何我已经接近有一个工作脚本来将她从那个=D中拯救出来）。

我之前并没有真正搞乱线程或多处理，但我不知道如何让它获取文件列表并一次将它们全部上传到主机 3-5（在这个例子中，我'正在尝试 5，但我不知道我会决定什么）。

```
import os, sys, subprocess, shutil, re, string, glob, tvdb_api, itertools, multiprocessing, ftplib

files = [os.path.join(r, f) for r, d, fs in os.walk(os.getcwd()) for f in fs if not f[0]=='.']
class FTP_Upload:
    def __init__(self, p=os.getcwd()):
        self.files_to_upload = sorted([f for f in files if os.path.split(f)[0] == p])
        self.target = raw_input("Enter the host you want to upload to: ")
        self.host = FTP('ftp.host1.com', 'user_name1', 'super_secret_password1') if self.target == 'host' else FTP('ftp.host2.com', 'user_name2', 'secret_password2') if self.target == 'host2' else None
    def upload_files(self, f):
        self.host.storbinary(('STOR /'+f.split('/')[-1]), open(f, 'rb'))
    def multiupload(self):
        p = multiprocessing.Pool(processes=5)
        p.map(self.upload_files(f), self.files_to_upload)
FTP_Upload().multiupload() 
```

但这只是上传 self.files_to_upload 中的最后一个文件...

我试着让文件列表成为可迭代的

```
self.files_to_upload = iter(sorted([f for f in files if os.path.split(f)[0] == p])) 
```

但没有喜悦。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:34:37.820

如果我理解正确的话，这种事情可以很容易地用`multiprocessing`. 只需编写一个函数来上传一个文件——

例如

```
def upload_one(filename):
    """ This function uploads one file.  
        Perhaps is a a wrapper to your Popen call? """ 
```

然后对文件列表使用多重处理

```
mylistoffiles=[ ] #Somehow generate your list of files to be uploaded.
import multiprocessing
Pool=multiprocessing.Pool(processes=X)   #X is the number of processes you want to use
Pool.map(upload_one,mylistoffiles) 
```

您还可以使用块大小，如果上传速度很快，它会加快速度。

当然，如果您需要传递的信息不仅仅是文件名，一种非常简单的方法是让您的文件列表成为元组列表并将它们解压缩到函数中。

**警告**

有些人可能会认为这是一种不好的做法，因为您实际上是在使用 map 函数来产生副作用......

**编辑**

我认为你的问题是`p.map(self.upload_files(f), self.files_to_upload)` 我不熟悉`FTP`python 中的，所以我不能肯定地说，但你想将一个*函数*作为第一个参数传递给`p.map`. 您正在传递函数的输出——您可能编写了一个返回函数的函数，但从上面的代码中看起来并不像它。

你可能想要的是：

```
p.map(self.upload_files,self.files_to_upload) 
```

通常，对`map`函数的调用可以转换为列表推导，如下所示：

```
map(function,iterable) 
```

几乎等同于

```
[function(i) for i in iterable] 
```

（几乎等效，因为在 python3.x 中`map`返回一个生成器。请注意，`map`您实际上并没有调用该函数。

**最终编辑**（希望）

您遇到了`multiprocessing`. 您发送的所有对象都*必须是可腌制的*。显然，您的实例方法（绑定到类实例的方法）不可腌制。一种解决方案是您可以将其更改为常规功能。您可以按如下方式进行。

```
import os, sys, subprocess, shutil, re, string, glob, tvdb_api, itertools, multiprocessing, ftplib

#No longer an instance method -- just a regular function.
#accepts an iterable and then splits it as [host,filename]
def upload_files(inpt):
    host=inpt[0]
    f=inpt[1]
    #host,f=inpt  #This might be a little cleaner, depending on your programming style.
    host.storbinary(('STOR /'+f.split('/')[-1]), open(f, 'rb'))

files = [os.path.join(r, f) for r, d, fs in os.walk(os.getcwd()) for f in fs if not f[0]=='.']
class FTP_Upload:
    def __init__(self, p=os.getcwd()):
        self.files_to_upload = sorted([f for f in files if os.path.split(f)[0] == p])
        self.target = raw_input("Enter the host you want to upload to: ")
        self.host = FTP('ftp.host1.com', 'user_name1', 'super_secret_password1') if self.target == 'host' else FTP('ftp.host2.com', 'user_name2', 'secret_password2') if self.target == 'host2' else None
    def multiupload(self):
        p = multiprocessing.Pool(processes=5)
        upload_this=[(self.host,f) for f in self.files_to_upload]
        p.map(upload_files,upload_this)
FTP_Upload().multiupload() 
```

希望这对你有用。祝你好运！

# jquery - 我如何实现自动建议功能以及删除按钮？

> ID：10481749
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:04:28.820
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我想实现标签功能，就像在 stackoverflow 网站中一样，它也是删除标签的功能。

我指的是 jquery ui 自动完成插件。

对于删除功能，我指的是以下网站：[网站链接](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/)

我需要的功能是标签应该用逗号分隔，用户可以选择的标签数量应该有限制，并且还应该有删除标签的功能。

我知道选择功能中有规定限制编号。的建议。

我试图合并上述网站上提供的功能。

为此，我修改了选择功能。

```
select: function( event, ui ) {
                            var terms = split( this.value );
                            if (terms.length <= 2) {
                            // remove the current input
                            terms.pop();
                            // add the selected item
                            terms.push( ui.item.value );
                            // add placeholder to get the comma-and-space at the end
                            terms.push( "" );
                             var friend = ui.item.value,  
                span = $("<span>").text(friend),  
                a = $("<a>").addClass("remove").attr({  
                    href: "javascript:",  
                    title: "Remove " + friend  
                }).text("x").appendTo(span);  

                //add friend to friend div  
                span.insertBefore("#txtTopic");  
                            } else {
                                terms.pop();
                            }                               
                            this.value = terms.join( "," );
                            return false;
                        } 
```

现在我得到以下结果：

![在此处输入图像描述](../Images/3403fe4e1547f03acda4bcefc3293819.png)

我如何实现这个具有限制、逗号分隔和删除功能的多个标签的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:19:40.613

如果它很好，那么你可以使用这个插件：[autosuggest plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)。

# conference - 如何以编程方式获取用户需要从 lync 会议中调用的会议 ID？

> ID：10481751
> 
> 赞同：1
> 
> 时间：2012-05-07T12:04:46.933
> 
> 标签：conference, lync-server-2010

我正在使用 Lync SDK 在 Lync Server 上安排会议。现在我想要用户需要通过电话拨入的会议 ID。如何以编程方式获取它？

使用 ConferenceServices.BeginScheduleConference 安排会议时，我得到了会议对象，但电话信息为空。在 ConferenceScheduleInformation 中将 PhoneAccessEnabled 设置为 true 时出现错误。

有人给我提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:50:56.240

解决方案很简单。设置 PhoneAccessEnabled 是正确的。发生的错误是因为密码中包含数字和字母而引发的，如果您使用真正的手机，这真的很糟糕。密码由 ConversionServices.GeneratePasscode() 创建。

现在我使用 Random-Class 创建一个仅限数字的密码，它可以工作。

# jstree - jsTree 上下文菜单选择项？

> ID：10481773
> 
> 赞同：3
> 
> 时间：2012-05-07T12:06:15.790
> 
> 标签：jstree

我们正在使用 jsTree（2011 年 9 月 2 日的第 236 版）。

有谁知道是否有任何方法可以访问在与“动作”相关的功能中选择的菜单项名称？

我想自动化菜单项的定义，以便根据上下文菜单中项目的标识符设置每个“动作”的功能。

例如，对于具有三个操作（“A”、“B”或“C”）的上下文菜单

```
...
var items = {};             
for(var i=0; i < preconfiguredItemsData.length; i++) 
{ 
    var item = preconfiguredItemsData[i]; 

    items[item.name] = {
        "label": item.title,
        "action": function (liNode) {
            control = eval("new " + **SELECTED ITEM IDENTIFIER ?** + "()"); 
                    // **new A(), new B() or new C()** depending on the selected
                    // item on the context menu.
                    // I have the identifier of the jsTree node but ... how
                    // can I get the item id ("A", "B" or "C")?
            control.execute(); 
        },              
        "_class": "class",  
        "separator_before": false,
        "separator_after": true,
        "icon": false,
        "submenu": {}
    };
    ...
} //for

items.create = false; 
items.rename = false; 
items.remove = false,
items.edit = false;
items.ccp = false; 
```

...

我希望已经清楚地描述了我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T09:10:29.497

我正在使用 jsTree 3.0.2，这个修复对我不起作用。

“i”参数已经包含在发送到“action”函数的结果中，但它只包含有关单击的上下文菜单的详细信息，而不是绑定到该 jsTree 分支的 JSON 项。

![在此处输入图像描述](../Images/382e91204e665c423e433a787e65ef37.png)

要获取右键单击的项目的 id，这就是我所做的。

我的树中的一些分支是文件夹，一些是报告（用户可以运行），所以我需要能够调整我的 jsTree 上下文菜单，具体取决于用户右键单击的节点类型，以及报告，我需要获取所选记录的 ID。

![在此处输入图像描述](../Images/c0e93c193c5d8080e7fb1b81e9be1ffb.png)

首先，我编写了一个小`getCustomMenu`函数来获取特定 jsTree 分支的上下文菜单项，因此，我将其定义`jstree`如下。

```
$('#divReportsTree').jstree({
   "core": {
       'data': JSON.Results.core.data
   },
   "plugins": ["contextmenu"],
   "contextmenu" : {
       //  Call a function, to fetch the CustomMenu for this particular jsTree branch
       items: getCustomMenu    
   }, 
}) 
```

我的`getCustomMenu`功能看起来像这样：

```
function getCustomMenu(node) {

    var thisReportID = node.li_attr.ReportID;

    var items = {
      Run: {
        "separator_before": false,
        "separator_after": true,
        "label": "Run this report",
        "icon": "/Images/Icons/Go.png",
        "action": function (node, reportID) {
             //  Call a function to run a report, with a particular Report ID 
             RunReport(node, thisReportID);
        }
      },
      Refresh: {
        "separator_before": false,
        "separator_after": false,
        "label": "Refresh",
        "icon": "/Images/Icons/Refresh.png",
        "action": function (node, reportID) {
             //  Call a refresh function, with a particular Report ID 
             RefreshReport(node, thisReportID);
        }
    };

    //  If this is a jsTree node for a Folder (rather than a Report) then 
    //  just show the "Refresh" ContextMenu item
    if (node.li_attr.ReportID == null)
    {
        delete items.Run;
    }

    return items;
} 
```

当用户右键单击 my 中的报告时`jstree`，该函数将使用所选报告的 ID`getCustomMenu`调用 my函数。`RunReport`

![在此处输入图像描述](../Images/ce736ee3950ff8ada57357060f27bbcd.png)

关键是填充这棵树的 JSON 数据专门`ReportID`在 jsTree 的属性中添加了一个`li_attr`属性。

![在此处输入图像描述](../Images/eb89c95f83a04d975b70a7743eff6034.png)

因为我们`getCustomMenu`调用了动作函数（在这个例子中是“RunReport”），我们可以调整它来传递额外的参数给这个函数。

呸。

希望所有这些都有帮助（并且有意义！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-05T17:17:30.657

有更简单的解决方案，不需要修改 jstree 的源代码。我用**jstree 3.3.1**测试了这种方法。

从[文档](https://www.jstree.com/api/#/?q=$.jstree.defaults.contextmenu&f=$.jstree.defaults.contextmenu.items)（强调我的）：

> 激活菜单项后，将使用包含以下键的对象调用操作函数：**item - 上下文菜单项定义，如下所示**，reference - 使用的 DOM 节点（树节点）， element - 上下文菜单 DOM 元素, position - 具有 x/y 属性的对象，指示菜单的位置。

该`item`属性是上下文菜单项的完整定义。这意味着您可以将任何属性附加到该对象，并稍后检索其值。在问题示例中，这可能是`_class`属性。目前尚不清楚 OP 是否尝试过这种方法。

```
var items = {
  item1: {
    label: 'a label',
    icon: 'fa fa-font-awesome',
    separator_after: true,
    disabled: false,
    action: lang.hitch(this, 'doSomething'),
    _name: 'item1'
  }
} 
```

然后，`_name` 将在`item`属性中传递。

```
doSomething: function (obj) {
  console.log(obj.item._name)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:17:38.277

通过在原jquery.jstree.js的这个函数调用中加入函数名作为参数解决。

```
(function ($) {
    $.vakata.context = {
            .....
            exec : function (i) {
                ....
                if($.isFunction($.vakata.context.func[i])) {
                    ....
                    $.vakata.context.func[i].call($.vakata.context.data, $.vakata.context.par, i);    //Param 'i' added        
                    ....
                }
                ....
            }
            ....
        } 
```

谢谢！

# css - 网站打开时如何启动css效果

> ID：10481774
> 
> 赞同：0
> 
> 时间：2012-05-07T12:06:16.693
> 
> 标签：css

我想在网站打开时启动我的css3效果。在我的脑海中没有任何特殊效果。我只需要了解如何在打开页面时激活效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:15:25.637

我用于在加载时淡入所有元素的 webkit 示例：http: [//jsfiddle.net/efortis/7PyRL/](http://jsfiddle.net/efortis/7PyRL/)

```
* {
      -webkit-transition: all .5s;
      -webkit-animation-name: myfading;
      -webkit-animation-duration: .8s;
}

@-webkit-keyframes myfading {
      from {
            opacity: 0;
            -webkit-transition: opacity;
      }
      to {
            opacity: 1;
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:58:59.287

一种通用技术是将 CSS3 转换为您想要的属性，然后在页面加载时使用 Javascript`onload`来更改这些属性。这样它就可以在所有浏览器的当前版本中工作。

# jquery - jquery在页面加载后按顺序一张一张地向下滑动许多图像

> ID：10481783
> 
> 赞同：0
> 
> 时间：2012-05-07T12:06:59.253
> 
> 标签：jquery, animation, slidedown, slideup

我正在尝试在页面加载时一一显示具有滑动效果（页面从上到下）的图像。在浏览了这么多网站后，我没有得到任何与此功能相关的插件。这是我真正想要的示例链接[http://kyan.com/](http://kyan.com/) 这里当你点击下一个箭头链接时，它首先会向上滑动现有图像，然后我会向下滑动新图像。[我想要与在http://kyan.com/](http://kyan.com/)上工作相同的功能，但我必须在页面加载时一张一张地滑动图像（没有任何下一个上一个链接）。

如果有人知道这样的相关插件名称，请告诉我它的名称？或者您是否有任何关于此的自定义代码。

提前感谢您的建议/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:22:31.157

请检查此站点 jquery [custom jquery Animation](http://tympanus.net/codrops/2010/10/18/custom-animation-banner/)修改此代码将有所帮助..

希望这可以帮助

# c# - 使用 NUnit 时出现 NullReferenceException

> ID：10481787
> 
> 赞同：1
> 
> 时间：2012-05-07T12:07:10.417
> 
> 标签：c#, nunit

我正在尝试为纸牌游戏应用程序设置单元测试，但我的代码抛出 NullReferenceException: Object reference not set to an instance of an object。据我所知，我不应该收到此错误，但确实存在。

这是我的代码：

```
 [TestFixture]
        public class Tests
        {
            CardTable aTable = null;

            [SetUp]
            public void setup()
            {
                aTable = new CardTable();
            }

            [Test]
            public void setPlayerGold_setTo0_return0()
            {
                //arrange

                //act
                aTable.setPlayerGold(0);

                //assert
                Assert.AreEqual(0, aTable.playerGold);
            }
       }

       public class CardTable
       {
           int playerGold;

           public CardTable()
           {
               playerGold = 0;
           }

            public void setPlayerGold(int amount)
            {
               if (amount == 0)
               {
                    playerGold = 0;
               }
               else
               {
                   playerGold += amount;
               }
               goldLabel.Text = playerGold + "";
            } 
```

异常被抛出在 aTable.setup 行，好像 aTable 没有被实例化，即使它显然在 [Setup] 中，我不知道为什么。

我正在使用 NUnit 2.6.0.12051 运行 Visual C# 2010 Express v10.0.40219.1 SP1Rel。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:48:17.493

启动 NUnit，但不要运行测试。在 Visual Studio 中，确保您打开了包含 nunit 测试的项目。然后在 Visual Studio 中按 ctrl+alt+p。这将显示要附加到的进程列表。选择 nunit-agent.exe 进程。如果有多个 nunit-agent.exe 进程，您可以 ctrl+ 选择所有进程。您可能必须检查*所有会话中的显示进程*和/或*显示所有用户*的进程才能显示 nunit-agent.exe。此时您应该能够调试您的测试。

现在您可以在构造函数调用时设置断点`CardTable`。当您逐步通过调试器时，您应该能够识别您的空对象引用错误。

单步执行代码的另一种方法是在菜单中选择*Debug->Exceptions...在显示检查**Common Language Runtime Exceptions*旁边的抛出框的对话框中。这将导致调试器在抛出任何已处理或未处理的异常时停止。这消除了对断点的需要，但是如果你有被抛出的异常被捕获，它可能比上面的断点方法更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:22:11.840

看起来 setup 是您的问题，并且在您想要的时候没有被调用。

我建议这样做：

```
CardTable aTable = new CardTable(); 
```

这样它就永远不会为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-19T18:24:24.133

我遇到了同样的问题，我已经将 NUnit 框架版本从 3.7.1 回滚到 3.0.5，现在一切正常，没有例外。也许您应该回滚到以前版本的 NUnit 框架之一。

# c# - C# Enyim Memcached - 命名空间“Enyim”不存在。缺少组装？

> ID：10481804
> 
> 赞同：0
> 
> 时间：2012-05-07T12:08:36.117
> 
> 标签：c#, memcached, enyim

我想使用带有 C# 的 memcached 开始一个新项目，我发现 Enyim 库是最佳选择，但是当我尝试使用它们时出现错误：

类或命名空间“Enyim”中不存在类型或命名空间“Enyim”（您是否缺少程序集引用？）”

我为设置环境所做的是： 1\. 安装包 EnyimMemcached（使用 Nuget） 2\. 添加“使用 Enyim”。3\. 编译项目时出现错误

有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:12:07.147

将应用程序的目标框架更改为*.NET Framework xx*。

**不是** *客户资料*。您可以在项目属性/编译/高级编译选项中进行

# silverlight - Silverlight 的 Marshal.GetObjectForIUnknown 替代品

> ID：10481805
> 
> 赞同：0
> 
> 时间：2012-05-07T12:08:42.653
> 
> 标签：silverlight, com, marshalling, iunknown

在 WPF 中，我可以使用以下内容：

```
var texture = (INuiFrameTexture) Marshal.GetObjectForIUnknown(frame.pFrameTexture); 
```

我的 INuiFrameTexture 看起来像这样：

```
[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("00000000-0000-0000-C000-000000000046")]
internal interface INuiFrameTexture {

    [PreserveSig]
    int BufferLen();

    [PreserveSig]
    int Pitch();

    [PreserveSig]
    HRESULT LockRect(uint Level,ref NuiLockedRect pLockedRect,ref IntPtr pRect,uint Flags);

    [PreserveSig]
    HRESULT GetLevelDesc(uint Level, NuiSurfaceDesc pDesc);

    [PreserveSig]
    HRESULT UnlockRect([In] uint Level);
} 
```

现在我试图在 Silverlight 中实现相同的目标，但该框架没有 GetObjectForIUnknown 方法。有人知道在 Silverlight 中是否有办法做到这一点？

# sql - Sql COUNT 按日期列并选择对应日期

> ID：10481806
> 
> 赞同：1
> 
> 时间：2012-05-07T12:08:45.360
> 
> 标签：sql, sql-server-2005

我阅读了 berfore [SQL Count for a Date Column](https://stackoverflow.com/questions/2375781/sql-count-for-a-date-column)和[SQL 以获取按日期计数，](https://stackoverflow.com/questions/9388590/sql-to-get-count-by-date)但这些并没有指出我的问题。

我有以下表格记录（表格只有两列）

```
| VALUE   | TIME               |
--------------------------------
| test    | 04.05.2012 11:46:46|
| test2   | 04.05.2012 11:46:49|
| test3   | 06.05.2012 11:47:46|
| test2   | 05.05.2012 11:47:46|
| test    | 04.05.2012 11:51:46| 
```

我想显示如下：

```
| VALUE   | COUNT   | NEWTIME  |
--------------------------------
| test    | 2       |04.05.2012|
| test2   | 1       |04.05.2012|
| test2   | 1       |05.05.2012|
| test3   | 1       |06.05.2012| 
```

我`VALUE`通过使用`day`作为日期部分来计算`TIME`：

```
select datepart(d, TIME), count(VALUE) from table1
group by datepart(d, TIME) 
```

如何获得额外的`NEWTIME`列？在 SQL Server 2005 中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:18:51.703

```
select VALUE,
       count(*) as COUNT,
       dateadd(day, datediff(day, 0, TIME), 0) as NEWTIME
from YourTable
group by VALUE, dateadd(day, datediff(day, 0, TIME), 0) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/69311)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:19:15.497

您可以像这样添加它并对其进行格式化，但您还必须按它进行分组。

```
select value, datepart(d, TIME), count(VALUE), datepart(mmonth, time) + '.' + datepart(day, time) + '.' + datepart(year, time) as newtime
from table1
group by datepart(d, TIME, newtime) 
```

如果您不关心使用句点作为分隔符，那么它可以更容易完成。

```
select value, datepart(d, TIME), count(VALUE), convert(varchar, time, 101) as newtime
from table1
group by datepart(d, TIME, newtime) 
```

我还注意到您的输出中有重复项，就个人而言，我会这样做：

```
select value, count(*) as cnt, convert(varchar, time, 101) as newtime
from table1
group by value, newtime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:14:31.550

```
select VALUE, count(VALUE), datepart(d, MIN(TIME)) AS NEWTIME
from table1
group by datepart(d, TIME) 
```

您可以使用其中之一`MIN`或`MAX`聚合函数。*在您的*情况下，这无关紧要，因为您通过`datepart`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:14:58.420

没有测试，但我会那样做

```
select VALUE, count(*) AS COUNT, convert(date, max(TIME)) AS NEWTIME --max , min whatever 
from table1
group by VALUE, datepart(d, TIME) --dont know why you group by timne not value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T12:20:14.077

我真的不明白你的问题，但如果我理解正确，你想按时间列中的短日期对数据进行分组？如果是这样，结果是：

```
select max(VALUE) as VALUE, count(VALUE) as count, CONVERT(VARCHAR(10), TIME , 104) as newtime
from table1
group by CONVERT(VARCHAR(10), TIME , 104) 
```

如果您不按它们分组，我不明白为什么要显示这些值

# c# - 如何从javascript调用c#按钮单击方法？

> ID：10481811
> 
> 赞同：4
> 
> 时间：2012-05-07T12:09:09.160
> 
> 标签：c#, javascript, asp.net

我正在尝试从 javascript 函数调用服务器端按钮单击方法，但它不起作用，我能知道我做错了什么吗？

**asp代码：**

```
<asp:Button ID="ButtonFns" Name="ButtonFns" runat="server" Text="Finish" 
            OnClientClick ="CountDownTick()" class="finish" onclick="ButtonFns_Click" /> 
```

**Javascript代码：**

```
function CountDownTick() {
if (_currentSeconds <= 0) {
    document.getElementById('<%= ButtonFns.ClientID %>').click();        
return;
}   
SetCountdownText(_currentSeconds-1);
window.setTimeout("CountDownTick()", 1000);
} 
```

**C# 按钮单击：**

```
protected void ButtonFns_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Examination.mdf;Integrated Security=True;User Instance=True");
    try
    {
        con.Open();
        string snm;
        string Em;
        string Sx;
        string uname = Session["status"].ToString();
        string qry = "SELECT SName,Email,Sex FROM Students WHERE Uname=@uname";
        SqlCommand cm = new SqlCommand(qry, con);
        cm.Parameters.AddWithValue("@uname", uname);
        SqlDataReader reader = cm.ExecuteReader();
        while (reader.Read())
        {
            snm = reader["SName"].ToString();
            Em = reader["Email"].ToString();
            Sx = reader["Sex"].ToString();
            if (snm != null && Em != null && Sx != null)
            {
                Session["snm"] = snm.ToString();
                Session["em"] = Em.ToString();
                Session["sx"] = Sx.ToString();
                Session["uname"] = uname;
                Session["RAns"] = LabelRitAns.Text;
                Session["Tatt"] = LabelTotAtt.Text;
                Server.Transfer("YourScore.aspx");
                break;
            }
        }

    }
    catch (Exception emsg)
    {
        LabelErr.Text= emsg.Message.ToString();
    }
    finally
    {
        con.Close();
    }

} 
```

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:30:54.437

使用为 JavaScript 公开的 __doPostBack 方法。如果您传入按钮的 ID 和事件名称，它本质上会执行与用户单击按钮相同的回发到服务器。

[使用 JavaScript 的 ASP.NET 回](https://stackoverflow.com/questions/1305954/asp-net-postback-with-javascript) 发（这使用 VB 代码隐藏，但我认为你需要做的其他事情）

编辑：只是为了澄清，而不是调用按钮的“点击”方法，而是使用 __doPostBack 。

EDITx2：另外，请确保您的 OnClientClick 返回值为 true。如果它是假的，我认为这相当于说它无效并且不应该进行回发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:24:05.173

```
ButtonFns.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(ButtonFns, "Your postback argument")); 
```

> GetPostBackEventReference 允许您获取那段 JavaScript，以便您可以从其他地方触发该回发。

本文将帮助您解决此问题

[如何从 Javascript 调用 Postback](http://www.dotnetspider.com/resources/1521-How-call-Postback-from-Javascript.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:32:02.477

您可以从客户端发出 POST 请求，首先将您的点击事件设置为：

```
[WebMethods]
public static void ClickEvent()
{
//do you stuff
} 
```

现在从您的客户端进行 ajax 调用，让您的网页名称为 Default.aspx：

```
$.ajax({
  type: "POST",
  url: "Default.aspx/ClickEvent",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T12:35:23.570

在你的情况下，你可以这样做，

```
 <script type="text/javascript">

    function ImitatePressButton() {
            __doPostBack('ButtonFns', '');
    }
</script> 
```

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T21:42:37.203

如果你想从 javascript 调用一个按钮，这里有另一种方法。

```
 var test = document.getElementbyId("YourButtonName");

 test.onclick = function() {
        //your code 
```

# c# - 获取用户默认浏览器的 UserAgent

> ID：10481812
> 
> 赞同：5
> 
> 时间：2012-05-07T12:09:09.143
> 
> 标签：c#, browser, user-agent

我正在制作一个包含一个`WebBrowser`元素的应用程序，我想让应用程序显示该用户默认浏览器的用户代理。

我知道如何通过注册表项获取默认浏览器以及如何获取浏览器的用户代理，但无法弄清楚如何将两者结合起来。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:22:41.067

我要做的（当然，这有点过头了）是包含一个 Web 服务器并从这个 Web 服务器请求一个 URL，从而获得用户代理。

即大致这将包括：

1.  在应用程序中实现一个 Web 服务器，例如[这个](http://webserver.codeplex.com/)
2.  让`WebBrowser`控件调用网络服务器的本地 URL（例如[http://127.0.0.1:48384/test](http://127.0.0.1:48384/test)）
3.  在 Web 服务器的请求处理程序中，将用户代理存储到变量中
4.  将此变量显示给最终用户（例如，在您的 WinForm 应用程序上的标签控件中或简单地通过从网络服务器发回响应来显示。

我已经多次成功地在我的应用程序中使用了 Web 服务器。一个例子是我在代码项目中的[HTML 编辑控件。](http://www.codeproject.com/Articles/43954/ZetaHtmlEditControl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:11:54.837

试试这个（这是一个检查浏览器是否是手持设备的简单功能）

```
string strUserAgent = Request.UserAgent.ToString().ToLower();
bool status = false;
if (strUserAgent != null)
{
    if (Request.Browser.IsMobileDevice == true || 
        strUserAgent.Contains("iphone") ||
        strUserAgent.Contains("blackberry") || 
        strUserAgent.Contains("mobile") ||
        strUserAgent.Contains("windows ce") || 
        strUserAgent.Contains("opera mini") ||
        strUserAgent.Contains("palm"))
    {
        status = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-17T16:36:04.530

这是一个获取和设置 UserAgent 的非常简单的类。

```
using System.Runtime.InteropServices;

public static class UserAgent
{

    [DllImport("urlmon.dll", CharSet = CharSet.Ansi)]
    private static extern int UrlMkGetSessionOption(
        int dwOption, StringBuilder pBuffer, int dwBufferLength, out int pdwBufferLength, int dwReserved);
    [DllImport("urlmon.dll", CharSet = CharSet.Ansi)]
    private static extern int UrlMkSetSessionOption(
        int dwOption, string pBuffer, int dwBufferLength, int dwReserved);

    const int URLMON_OPTION_USERAGENT = 0x10000001;
    const int URLMON_OPTION_USERAGENT_REFRESH = 0x10000002;
    const int URLMON_OPTION_URL_ENCODING = 0x10000004;

    public static string Value
    {
        get
        {
            StringBuilder builder = new StringBuilder(512);
            int returnLength;
            UrlMkGetSessionOption(URLMON_OPTION_USERAGENT, builder, builder.Capacity, out returnLength, 0);
            string value = builder.ToString();
            return value;
        }
        set
        {
            UrlMkSetSessionOption(URLMON_OPTION_USERAGENT, value, value.Length, 0);
        }
    }
} 
```

我一直在寻找一种从 Windows 而非 Web 获取 UserAgent 的体面方法，当我发现[更改 WebBrowser 控件的用户代理时，](https://stackoverflow.com/questions/937573/changing-the-user-agent-of-the-webbrowser-control) 受 urlmon.dll 的 DLLImport 启发，我查看了 pinvoke.net，发现：[http ://pinvoke.net/default.aspx/urlmon.UrlMkGetSessionOption](http://pinvoke.net/default.aspx/urlmon.UrlMkGetSessionOption)

调用者：

```
namespace GetUserAgent
{
    class Program
    {
        //  The name of the program that was started by user
        //  See: Assembly.GetEntryAssembly Method ()
        //  https://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx
        public static string ExecName
        {
            get
            {
                //  The name of the executable that was started by user
                return System.Reflection.Assembly.GetEntryAssembly().GetName().Name;
            }
        }

        static void Main(string[] args)
        {
            foreach (string arg in args)
            {
                if ((arg == "/?")
                    || (arg == "-?")
                    || (arg == "--help"))
                {
                    Console.Out.WriteLine(
                        "For /F \"tokens=*\" %%U In ('{0}') Do Set UserAgent=%%U",
                        ExecName);
                    return;
                }
            }

            string userAgent = UserAgent.Value;
            Console.Out.WriteLine(userAgent);
        }
    }
} 
```

这会生成 UserAgent 值。争论 /？显示如何在命令脚本中使用它。

# macos - Mac 沙盒和文件 ioctl

> ID：10481816
> 
> 赞同：1
> 
> 时间：2012-05-07T12:09:17.333
> 
> 标签：macos, cocoa, sandbox

我目前正在沙盒连接到 NeuroSky MindWave 耳机的程序；本质上是一种通过 USB 加密狗连接并在其间使用蓝牙的脑电波读取设备。

该设备可通过 /dev/tty.MindWave 套接字访问。

我添加了对文件的读取权限访问的临时权利：

```
 <key>com.apple.security.temporary-exception.files.absolute-path.read-write</key>
    <array>
        <string>/dev/tty.MindWave</string>
    </array> 
```

这消除了文件的沙盒错误消息，但现在出现以下错误：

```
deny file-ioctl /dev/tty.MindWave 
```

似乎没有匹配的临时权利.. 这意味着我必须尽快从 Mac App Store 版本中删除对该设备的支持。

然而，在这样做之前，我想我会发出一个 SOS，看看这个小组中是否有人有解决方案。

任何帮助将非常感激。

此致，

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:58:00.730

该文档可能会有所帮助：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html)

看起来您需要的权利密钥是：

```
com.apple.security.device.usb 
```

我感受到了你的痛苦：我正在与 Sandbox 中的登录项搏斗，而我才刚刚走到一条长隧道的尽头！

希望它有所帮助，并且该设备听起来很棒 - 听说过这样的事情，但没有意识到它们是公开的！

托德

# php - PHP：来自一个类的打印数组

> ID：10481819
> 
> 赞同：0
> 
> 时间：2012-05-07T12:09:29.963
> 
> 标签：php, arrays, class, printing

我正在自学 php，我一直坚持表示来自一个类的数据数组。这是 Myclass.php：

```
 class Myclass
    {

        private $iVar1;
        private $strVar2;

        public function __construct() 
        {
            $this->initialize();
        }

        private function initialize()
        {
            $this->iVar1 = null;
            $this->strVar2 = null;
        }

        public function getParam1()
        {
            return $this->iVar1;
        }

        public function setParam1($value)
        {
            $this->iVar1 = $value;
        }

        public function getParam2()
        {
            return $this->strVar2;
        }

        public function setParam2($value)
        {
            $this->strVar2 = $value;
        }

    }

    class MyclassDAO
    {

        static public function load($oBD, $idObjet)
        {

            $aryM = MyclassDAO::getAryM($oBD, $idObjet);

            return $aryM[0];
        }

        static public function getAryM($oBD, $omy)
        {
            $aryCollection = array();

                $sSql = 'EXEC MYDB.dbo.SELECT_MYPROCEDURE ';

                if (!is_null($omy->getParam1()))
                {
                    $sSql .=" @param1 = '".$omy->getParam1()."',";  
                }
                if (!is_null($omy->getParam2()))
                {
                    $sSql .=" @param2 = '".$omy->getParam2()."',";   
                }

                //I delete de last ,
                $sSql =  substr($sSql,0,strlen($sSql)-1); 

                        while ($d = $oBD->fArray()) 
                        { 
                            $omy = new GrupoAlumno();
                            $omy->setParam1($d['param1']);
                            $omy->setParam2($d['param2']);
                            $aryCollection[] = $omy;
                        }

            return $aryCollection;
        }

    } 
```

这是我的 php 文件：

```
require_once "Myclass.php";
$var1=1;
$var2=’Y’;    
 $om = new Myclass();
            $om->setParam1($var1);
            $om->setParam2($var2);
            $omDAO = new MyclassDAO();
            $ary= $omDAO->load($myObjDB, $om);
// the printing of the info here 
```

该类返回的信息具有以下结构：

```
$ary: array=
0:object(Myclass)=
iVar1:long=113
strVar2:string=SOMEINFO
1: object(Myclass)=
iVar1:long=114
strVar2:string=SOMEINFO2 
```

如何在我的 php 文件中打印它？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:56:53.080

```
// Displays a multi-dimensional array as a HTML unordered lists.
function displayTree($array) {
    $newline = "<br>";
    foreach($array as $key => $value) {    //cycle through each item in the array as key >=> value pairs
      if (is_array($value) || is_object($value)) {        
        //if the VALUE is an array, then
        //call it out as such, surround with brackets, and recursively call displayTree.
        $value = "Array()" . $newline . "(<ul>" . displayTree($value) . "</ul>)" . $newline;
      }
      //if value isn't an array, it must be a string. output its' key and value.
      $output .= "[$key] => " . $value . $newline;
    }
    return $output;
} 
```

这将帮助您以更好和更快的方式执行此操作，系统负载将很低

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:12:32.847

只需使用 print_r($ary) 或 var_dump ($ary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:13:00.233

```
foreach($ary as $component) {
    echo $component->iVar1;
    echo $component->strVar2
} 
```

这将打印数组

# jms - 哪个客户端从队列中接收消息

> ID：10481821
> 
> 赞同：0
> 
> 时间：2012-05-07T12:09:51.740
> 
> 标签：jms, message-queue, consumer

如果我有一个消息队列和多个独立程序，它们尝试通过以下方式从该队列接收消息

```
sess.receive(); 
```

哪个客户端程序实际上会收到消息？这是怎么决定的？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:58:33.127

在所有条件相同的情况下，任何接收者都可以接收到消息（但只能接收其中一个）。从架构上讲，您不应该关心哪个接收者收到消息。如果您在接收器中有不同的消息处理，您应该考虑使用选择器或不同的队列。

# c# - 使用实体框架是否可以创建一个未映射到我的数据库表上的实体？

> ID：10481824
> 
> 赞同：1
> 
> 时间：2012-05-07T12:10:06.467
> 
> 标签：c#, .net, entity-framework

实体框架：是否可以创建一个未映射到我的数据库表上的实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:12:53.233

在这种情况下，它不是一个实体，而只是一个类 = 创建普通的类文件，你就完成了。该类不能成为实体模型 (EDMX) 或代码优先映射的一部分，因为它与持久性（和 EF）无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T19:04:01.860

您可以使用 [NotMapped] 属性并仍然在 DbContext 中对其进行跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:21:21.120

您可以在 EF 中创建一个类或在单独的类中创建一个类`ClassName.cs`并将其用作您的模型。

最好使用第二个选项，因为我会更清楚，如果 EF 变大，很难从那里找到你的课程并进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T20:48:43.477

您可以为此使用“复杂类型”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T22:08:35.417

实体框架实际上是关于自动生成类，这些类具有在 Web 服务中轻松使用并连接到数据库的所有内容。如果您不需要 EF 的这些功能，那么您真正要做的就是使用 UI 来创建实体类，而不是仅仅手动编写它们。这当然是可能的，但这样做并不会获得太多收益，最终会在代码库中产生大量自动生成的膨胀。

实际上，由于 EF 以“某种方式”执行它，因此您失去了一些灵活性，而这些灵活性可以通过在源代码中定义您自己的实体类来提供。

# html - CSS：将 div 高度设置为容器的高度，但保留 10px 空间

> ID：10481826
> 
> 赞同：2
> 
> 时间：2012-05-07T12:10:12.997
> 
> 标签：html, css

我在父容器中有一个 div，希望它的宽度为 300px，高度与父容器相同，但每边的边距为 10。我发现一些答案说，这可以通过设置`height: 100%;` `margin: 10px;`和`margin-bottom`为负值`-20px`（以补偿顶部和底部的 10px 空间）。我试过这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%;width:100%;margin:0;padding:0;">
    <head></head>
    <body style="height:100%;width:100%;margin:0;padding:0;">
        <div style="height:100%;width:100%;margin:0;padding:0;">
            <div style="border:1px solid black;height:100%;width:300px;margin-top:10px;margin-left:10px;margin-bottom:-20px;">
                Hello world!
            </div>
        </div>
    </body>
</html> 
```

但它不起作用。div 与父容器具有相同的高度，因此它在底部重叠......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:42:39.653

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%;width:100%;margin:0;padding:0;">
    <head></head>
    <body style="height:100%;width:100%;margin:0;padding:0;">
        <div style="height:100%;width:100%;margin:0;padding:0;position:relative">
            <div style="border:1px solid black;width:300px;position:absolute;left:10px;top:10px;bottom:10px;">
                Hello world!
            </div>
        </div>
    </body>
</html> 
```

**也由 JAVASCRIPT**

```
<div style="height:100%">
    <div class="child"></div>    
</div> 
```

**JS**

```
docHeight = document.body.clientHeight;
childHeight = docHeight-22; //2px due to borders
document.getElementsByClassName('child').style.height = childHeight; 
```

CSS

`.child {padding:10px`}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:14:49.037

```
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%;width:100%;margin:0;padding:0;">
<head></head>
<body style="height:100%;width:100%;margin:0;padding:0;">
    <div style="height:100%;width:100%;margin:0;padding:10; background-color:#FF0000;">
        <div style="border:1px solid black;height:100%;width:300px; background:#0000FF;">
            Hello world!
        </div>
    </div>
</body> 
```

只需删除背景颜色。

我向父级添加填充并删除子级的边距

# c# - 强制执行 DataTemplate 约束

> ID：10481827
> 
> 赞同：2
> 
> 时间：2012-05-07T12:10:21.093
> 
> 标签：c#, .net, wpf, datatemplate

我的应用程序中的不同对象都有默认的 DataTemplates。我所有的 DataTemplate 都有某种“验证”触发器（例如 - 如果我的对象中的某个布尔字段为真，则将字体颜色更改为红色）。这很好用！

现在，我想允许其他开发人员（例如在另一个团队中）创建他们自己的 DataTemplates，它可以覆盖我的默认 DataTemplates，但我需要确保他们也编写那些特定的验证触发器。换句话说，我想对他们的 DataTemplates 实施某种约束，以确保他们实现这些东西。
如果可能的话，我宁愿在编译时而不是在运行时检查这些约束。

关于如何完成这项工作的任何建议？

# java - 如何通过搜索 Google Programmatically Java API 获得所有结果？

> ID：10481828
> 
> 赞同：2
> 
> 时间：2012-05-07T12:10:21.190
> 
> 标签：java

我读了这个问题和答案。

[您如何以编程方式搜索 Google 的 Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)

当我在答案中运行代码并搜索任何内容时，它只返回来自谷歌的 4 个结果。

我怎样才能得到所有的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:14:17.523

您是否阅读了 Google 提供的文档？

该答案中描述的 API 已被弃用，并且您可以执行的查询数量减少。

替代方案在这里：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-22T12:59:27.663

The post is a bit old but in case someone else is asking the question. I've found this website that explains what to do to send a request on google search engines.

[http://www.basicsbehind.com/google-search-programmatically/](http://www.basicsbehind.com/google-search-programmatically/)

# asp.net - 更新面板内的 ASP.net Datagrid 中不显示新记录

> ID：10481830
> 
> 赞同：0
> 
> 时间：2012-05-07T12:10:25.540
> 
> 标签：asp.net, webforms, linqdatasource

我有一个asp.net 网页，其中包含一个启用了编辑、选择和删除功能的gridview，以及一个用于插入新记录的detailview。每个控件都放置在一个 asp.net ajax 扩展控件更新面板中。并且这两个控件绑定到同一个数据源，即 LinqDataSource。

插入新记录后，gridview 中不会显示任何内容，直到用户刷新页面。我错过了什么？任何人都可以帮忙吗？

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<fieldset>

<asp:UpdatePanel ID="UpdatePanel2" runat="server">       
    <ContentTemplate>
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="TermLinqDataSource" AllowPaging="True" AllowSorting="True" 
        DataKeyNames="TermID">
        <Columns>
            <asp:CommandField 
                ShowSelectButton="True" />
            <asp:BoundField DataField="RowIndex" HeaderText="RowIndex" 
                InsertVisible="False" SortExpression="RowIndex" Visible="False" />
            <asp:BoundField DataField="TermID" HeaderText="Term" ReadOnly="True" 
                SortExpression="TermID" />
            <asp:BoundField DataField="StartDate" HeaderText="Start Date" 
                SortExpression="StartDate" DataFormatString="{0:d}" />
            <asp:BoundField DataField="EndDate" HeaderText="End Date" 
                SortExpression="EndDate" DataFormatString="{0:d}" />               
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />  
        </Columns>                        
    </asp:GridView>
    </ContentTemplate>
    </asp:UpdatePanel>

    <br />
    <h4>Add New Term:</h4>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:DetailsView ID="addNewTerm" runat="server" 
            AutoGenerateRows="False" DataKeyNames="TermID" 
            DataSourceID="TermLinqDataSource" DefaultMode="Insert">
            <FieldHeaderStyle Font-Bold="true" />
            <Fields>
                <asp:BoundField DataField="TermID" HeaderText="Term:" SortExpression="TermID" 
                    ReadOnly="True" />
                <asp:BoundField DataField="StartDate" HeaderText="Start Date:" 
                    SortExpression="StartDate" />
                <asp:BoundField DataField="EndDate" HeaderText="End Date:" 
                    SortExpression="EndDate" />
                <asp:CommandField ShowInsertButton="True" />
            </Fields>
        </asp:DetailsView>
    </ContentTemplate>
    </asp:UpdatePanel>
    <asp:LinqDataSource ID="TermLinqDataSource" runat="server" 
        ContextTypeName="CETMSClient.RegistraDCsDataContext" EnableDelete="True" 
        EnableInsert="True" EnableUpdate="True" TableName="Terms" 
        OrderBy="RowIndex desc" >
    </asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:26:43.383

我认为您需要在插入后再次绑定gridview。访问[msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.iteminserted.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.iteminserted.aspx)

# google-apps-script - 一天服务调用次数过多：tricreate

> ID：10481833
> 
> 赞同：1
> 
> 时间：2012-05-07T12:10:35.710
> 
> 标签：google-apps-script

我正在制作一个应用程序作为谷歌夏季代码的一部分，该应用程序正在运行，但我想添加一个额外的功能，这个功能需要创建一些电子表格并用数据填充它们，但是在中间的某个地方我得到了一个错误：“一天内调用了太多次服务：tricreate。（第 19 行）”。我知道某些服务有限制，这可能是原因，但我需要帮助来了解电子表格的限制是如何“工作”的，以便找到解决它们的方法，我想这是基于时间的，但它是否在每天，小时，分钟？

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:11:58.333

听起来好像您达到了一天内可以创建的电子表格数量的限制。但是错误消息有问题；它可能应该说类似电子表格创建，而不是 tricreate。我在这里的问题跟踪器中创建了一个错误：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1312) ://code.google.com/p/google-apps-script-issues/issues/detail?id=1312 。如果您想在问题解决后进行更新，您可以为它加注星标。

我们最近推出了一个应用程序脚本仪表板，其中有一个配额限制选项卡：[https](https://docs.google.com/macros/dashboard) ://docs.google.com/macros/dashboard 。单击配额限制选项卡，然后在表中查找名为“电子表格创建”的行。然后，您会看到每天可为消费者（例如 @gmail.com）帐户、Google Apps（免费）帐户和 Google Apps for Business/Education/Government 帐户创建的电子表格数量限制。

# jquery - 从 jQuery 中删除 GridViewRow

> ID：10481834
> 
> 赞同：0
> 
> 时间：2012-05-07T12:10:38.823
> 
> 标签：jquery, asp.net, gridview

我`gridview "gridPayments"`正在尝试使用 删除 Payments `PaymentId`，并且还尝试删除选定的 gridview 行，因为这是`custom.js`从我的 aspx 脚本页面调用文件中的 jQuery 函数，例如，

```
<div class="close1" onclick="DeletePayment(<%# Container.DataItemIndex %>,
                                             <%# Eval("PaymentId") %>);"></div> 
```

并在 DeletePayment 方法中接收这些值

```
function DeletePayment(index,paymentid) {
//my code for deleting payment..
} 
```

我可以通过`paymentid`从我的 jQuery 调用 web 服务来删除付款，问题是我想要`refresh the GridView after the successful deletion of Payment`.

我试着像从这个方法中删除gridview行一样

```
index.remove(); 
```

但它不起作用，我不知道如何从这个 jQuery 方法中删除 gridviewrow ......任何人都可以在这里帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:18:33.577

一种方法是：

在您的代码隐藏中有一个方法来刷新 GridView 的内容：

```
public void LoadGridViewData(){ // Blah... } 
```

在 aspx 页面上，有一个 ASP.NET 按钮，单击该按钮将调用 GridView 数据刷新方法。

```
<asp:Button runat="server" ID="btnRefreshData" ClientIDMode="Static" OnClick="btnRefreshData_OnClick /> 
```

现在在代码隐藏中创建按钮单击方法：

```
public void btnRefreshData_OnClick(object sender, Eventargs e)
{
    LoadGridViewData(); // This does the data binding stuff on the GridView.
} 
```

最后，使用这个 Javascript 来连接删除数据时的按钮点击：

```
<script type="text/javascript">
    function DeletePayment(index,paymentid) {
       // Do your deletion, and then finally.....
       $("#btnRefreshData").click(); // This will call the server-side button click method.
    }
</script> 
```

现在我不确定以上是否 100%，因为我是凭记忆做的，但总体思路是合理的。

# 3des - 从哪里可以得到一个 c 库，它将帮助我编写一个 C 程序以在 CBC 模式下通过 3DES 解密？

> ID：10481835
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:10:55.680
> 
> 标签：3des

我想编写一个简单的程序，我可以在其中调用库中的函数，并将加密数据作为输入传递给它们，并将输出作为解密数据。哪个C库适合这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:21:57.370

[OpenSSL](http://www.openssl.org)可能是您最好的选择。它在大多数系统上都可用，并且具有执行三重 DES 的功能（例如 DES_ede3_cbc_encrypt）。有关更多信息，请参见[des(3) 手册页](http://www.openssl.org/docs/crypto/des.html)。

大多数 Linux 发行版都有一个用于 openssl 的开发包，其中包含该库的头文件。在基于 Debian 的发行版（如 Ubuntu）上，执行`sudo apt-get install openssl-dev`. 或者，您可以下载[库源](http://openssl.org/source/)并自己编译。

# java - paintComponent 绘制两次

> ID：10481837
> 
> 赞同：0
> 
> 时间：2012-05-07T12:11:15.870
> 
> 标签：java, swing, graphics, paintcomponent, frame-rate

据我了解，Swing 将决定何时需要重新绘制，这可以解释为什么`paintComponent()`要执行两次。但我已经制作了一个睡眠 16 毫秒、重绘、睡眠 16 毫秒、重绘、睡眠 16 毫秒等的应用程序：

```
while(true)
{
    frame.repaint();
    try{Thread.sleep(16)}catch(Exception e){}
} 
```

它应该以 60fps 的速度工作。但是，FPS 测量程序（如 FRAPS）显示应用程序以 120fps 运行。`repaint()`所以基本上，应用程序正在做的是：并条框，并条框，睡眠，并条框，并条框，睡眠......我如何告诉swing为每次调用绘制一帧？（哦，我试过用 a`Timer`而不是`sleep()`，结果是一样的）。

例如，在 Oracle 教程中找到的 SwingPaintDemo。我添加了一个 while 循环，它将每 16 毫秒重新绘制一次。我还将 undecorated 设置为 true （这是 FRAPS 向我显示每秒实际帧数的唯一方法）。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/*
 ***************************************************************
 * Silly Sample program which demonstrates the basic paint
 * mechanism for Swing components.
 ***************************************************************
 */
public class SwingPaintDemo {

    public static void main(String[] args) {
        JFrame f = new JFrame("Aim For the Center");
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        Container panel = new BullsEyePanel();
        panel.add(new JLabel("BullsEye!", SwingConstants.CENTER), BorderLayout.CENTER);
        f.setUndecorated(true);
        f.setSize(200, 200);
        f.getContentPane().add(panel, BorderLayout.CENTER);
        f.show();

        while(true)
        {
            f.repaint();
            try{Thread.sleep(16);}catch(Exception e){}
        }
    }
}

/**
 * A Swing container that renders a bullseye background
 * where the area around the bullseye is transparent.
 */
class BullsEyePanel extends JPanel {

    public BullsEyePanel() {
        super();
        setOpaque(false); // we don't paint all our bits
        setLayout(new BorderLayout());
        setBorder(BorderFactory.createLineBorder(Color.black));
    }

    public Dimension getPreferredSize() {
        // Figure out what the layout manager needs and
        // then add 100 to the largest of the dimensions
        // in order to enforce a 'round' bullseye 
        Dimension layoutSize = super.getPreferredSize();
        int max = Math.max(layoutSize.width,layoutSize.height);
        return new Dimension(max+100,max+100);
    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Dimension size = getSize();
        int x = 0;
        int y = 0;
        int i = 0;
        while(x < size.width && y < size.height) {
            g.setColor(i%2==0? Color.red : Color.white);
            g.fillOval(x,y,size.width-(2*x),size.height-(2*y));
            x+=10; y+=10; i++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:39:06.017

1）基本上里面的方法`paintComponent()`不需要调用`repaint()`

2) Swing GUI`paintComponent()`在需要重绘时自行调用

3) 对于今天的 Swing GUI，默认`Graphics(2D)`使用`Swing Timer`

4）`frame.repaint();`调用重复的代码`repaint`，删除它

5)如果`frame.repaint();`你//已经可见 JFrame 是有用`add`的方法`remove``modify`

6) 你的意思是

![在此处输入图像描述](../Images/cf914367e7b8a64b86602c441cf56c52.png)![在此处输入图像描述](../Images/88f3fcadf61493517c29e0cd39461b70.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SwingPaintDemo {

    public static void main(String[] args) {
        JFrame f = new JFrame("Aim For the Center");
        f.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        Container panel = new BullsEyePanel();
        panel.add(new JLabel("BullsEye!", SwingConstants.CENTER), BorderLayout.CENTER);
        f.getContentPane().add(panel, BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);
    }
}

/**
 * A Swing container that renders a bullseye background
 * where the area around the bullseye is transparent.
 */
class BullsEyePanel extends JPanel {

    public BullsEyePanel() {
        super();
        setOpaque(false); // we don't paint all our bits
        setLayout(new BorderLayout());
        setBorder(BorderFactory.createLineBorder(Color.black));
    }

    @Override
    public Dimension getPreferredSize() {
        // Figure out what the layout manager needs and
        // then add 100 to the largest of the dimensions
        // in order to enforce a 'round' bullseye
        Dimension layoutSize = super.getPreferredSize();
        int max = Math.max(layoutSize.width, layoutSize.height);
        return new Dimension(max + 100, max + 100);
    }

    @Override
    protected void paintComponent(Graphics g) {
        Dimension size = getSize();
        int x = 0;
        int y = 0;
        int i = 0;
        while (x < size.width && y < size.height) {
            g.setColor(i % 2 == 0 ? Color.red : Color.white);
            g.fillOval(x, y, size.width - (2 * x), size.height - (2 * y));
            x += 10;
            y += 10;
            i++;
        }
    }
} 
```

编辑，`@trashgod`您上一个问题中链接的代码有什么问题，大约是`JPanel's repaint` ( `this.repaint()`)

![在此处输入图像描述](../Images/032bf3bde750a9c35d0945a65713a501.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.util.Random;
import javax.swing.*;

/** @see http://stackoverflow.com/questions/3256941 */
public class AnimationTest extends JPanel implements ActionListener {

    private static final int WIDE = 640;
    private static final int HIGH = 480;
    private static final int RADIUS = 25;
    private static final int FRAMES = 24;
    private static final long serialVersionUID = 1L;
    private final Timer timer = new Timer(20, this);
    private final Rectangle rect = new Rectangle();
    private BufferedImage background;
    private int index;
    private long totalTime;
    private long averageTime;
    private int frameCount;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new AnimationTest().create();
            }
        });
    }

    private void create() {
        JFrame f = new JFrame("AnimationTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        timer.start();
    }

    public AnimationTest() {
        super(true);
        this.setOpaque(false);
        this.setPreferredSize(new Dimension(WIDE, HIGH));
        this.addMouseListener(new MouseHandler());
        this.addComponentListener(new ComponentHandler());
    }

    @Override
    protected void paintComponent(Graphics g) {
        long start = System.nanoTime();
        super.paintComponent(g);
        int w = this.getWidth();
        int h = this.getHeight();
        g.drawImage(background, 0, 0, this);
        double theta = 2 * Math.PI * index++ / 64;
        g.setColor(Color.blue);
        rect.setRect((int) (Math.sin(theta) * w / 3 + w / 2 - RADIUS),
                (int) (Math.cos(theta) * h / 3 + h / 2 - RADIUS), 2 * RADIUS, 2 * RADIUS);
        g.fillOval(rect.x, rect.y, rect.width, rect.height);
        g.setColor(Color.white);
        if (frameCount == FRAMES) {
            averageTime = totalTime / FRAMES;
            totalTime = 0;
            frameCount = 0;
        } else {
            totalTime += System.nanoTime() - start;
            frameCount++;
        }
        String s = String.format("%1$5.3f", averageTime / 1000000d);
        g.drawString(s, 5, 16);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        this.repaint();
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            super.mousePressed(e);
            JTextField field = new JTextField("test");
            Dimension d = field.getPreferredSize();
            field.setBounds(e.getX(), e.getY(), d.width, d.height);
            add(field);
        }
    }

    private class ComponentHandler extends ComponentAdapter {

        private final GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        private final GraphicsConfiguration gc = ge.getDefaultScreenDevice().getDefaultConfiguration();
        private final Random r = new Random();

        @Override
        public void componentResized(ComponentEvent e) {
            super.componentResized(e);
            int w = getWidth();
            int h = getHeight();
            background = gc.createCompatibleImage(w, h, Transparency.OPAQUE);
            Graphics2D g = background.createGraphics();
            g.clearRect(0, 0, w, h);
            g.setColor(Color.green.darker());
            for (int i = 0; i < 128; i++) {
                g.drawLine(w / 2, h / 2, r.nextInt(w), r.nextInt(h));
            }
            g.dispose();
            System.out.println("Resized to " + w + " x " + h);
        }
    }
} 
```

# java - 在两个活动之间翻转动画

> ID：10481841
> 
> 赞同：1
> 
> 时间：2012-05-07T12:11:22.527
> 
> 标签：java, android

是否可以在两个活动之间做翻转动画？
在 API 演示`Transition3d.java class`中有，但那是翻转视图而不是活动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:27:13.823

对的，这是可能的。此处的此示例向您展示了如何在活动之间进行 3d 翻转。

[http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher](http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher)

这个例子利用了动画输入和动画输出，这样看起来就像在活动之间发生的 3d 翻转。在第一个活动的 onResume 中，您将能够在活动二中看到“动画输出”和“动画输入”。

希望能帮助到你。

# php - 自动更新无线电检查

> ID：10481842
> 
> 赞同：0
> 
> 时间：2012-05-07T12:11:31.990
> 
> 标签：php, javascript, jquery, radio-button

得到这个：http: [//jsfiddle.net/NdsF8/](http://jsfiddle.net/NdsF8/)

希望它是动态的，因此当您单击一个新的单选按钮时，它会更改写入的值。

我敢肯定这已经在某个地方被覆盖了，但是我一生都找不到它。

如果你足够神奇，可以选择 PHP、JQuery 或 Javascript。任何都可以，但那是我的首选顺序：]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:13:28.767

您必须添加一个事件才能这样做：

[http://jsfiddle.net/NdsF8/1/](http://jsfiddle.net/NdsF8/1/)

# google-maps - Google Maps API - geocode() 不返回 lat 和 long

> ID：10481848
> 
> 赞同：10
> 
> 时间：2012-05-07T12:11:59.833
> 
> 标签：google-maps

我正在尝试使用以下代码通过地址获取纬度和经度：

```
 function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    geocoder = new google.maps.Geocoder();
    var address = "HaYarkon 100 TelAviv Israel";
    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK)
       {
            TelAviv = new google.maps.LatLng(results[0].geometry.location.latitude,results[0].geometry.location.longitude);             
       }
    });

    var myOptions = {
        zoom:7,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: TelAviv
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
} 
```

问题是 results[0].geomety.location.latitude 和 longitude 是未定义的。

我在控制台的结果中看到的是下一个：

```
 location: O

   $a: 51.5414691

   ab: -0.11492010000006303 
```

为什么它显示 $a 和 ab 而不是纬度和经度

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T12:26:52.733

使用以下函数而不是直接访问属性：

```
results[0].geometry.location.lat() 
```

和

```
results[0].geometry.location.lng() 
```

Google 代码是经过混淆处理的，并且在内部使用了短变量名，这些变量名可以从一天到另一天更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:06:01.727

你必须使用

```
results[0].geometry.location.lat()
results[0].geometry.location.lng() 
```

使用

```
results[0].geometry.location[0]
results[0].geometry.location[1] 
```

返回未定义。

这让我很困惑，因为 API 有时会返回一个名为“ab”的字段，而有时它会返回“Za”。通过元素的语义值（使用 .lat 和 .lng）而不是确切的字符串名称来访问元素要安全得多，也更易读。

# javascript - 检查函数是否已使用 javascript/jquery 完成其任务

> ID：10481851
> 
> 赞同：0
> 
> 时间：2012-05-07T12:12:16.270
> 
> 标签：javascript, jquery

我试图暂停一个函数，直到另一个函数完成其任务。有什么类似于 .ajaxComplete() 但用于完成功能的东西吗？

这段代码应该首先快速打印出“测试”，然后减速（如果你愿意的话，减速）。随着循环中的数字变大， setTimeout 变长，因此，随着循环的进行，它会打印“更慢”。基本上，我需要循环暂停，直到函数打印出来。

编辑 - 我更新了我的代码。“测试”只打印一次，没有其他任何事情发生。

```
 <html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<input type="button" value="Display alert box" onclick="docWrite()" />
<script>

var b = 0;

function docWrite() {
   document.write("test");
   timeMsg();
}

function timeMsg() {
  b += 250;
  if (b < 5000) { //check the limit
     setTimeout("docWrite()", b - 250); //substract 250 (because we already added 250 before the first print
  }
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:19:24.210

我认为让超时函数启动一个新的超时函数会更好，这将解决您的问题并完全摆脱 for 循环。只需调用 timeMsg() 即可开始该示例。

```
<script>

var b = 0;

function docWrite() {
    $('body').append("test");
    timeMsg();
}

function timeMsg() {
    b += 250;
    if (b < 5000) { //check the limit
        setTimeout(docWrite, b - 250); //substract 250 (because we already added 250 before the first print
    }
}

</script> 
```

修改你自己的脚本我最终得到了这个：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<input type="button" value="Display alert box" onclick="timeMsg()" />
<script>

var b = 0;

function docWrite() {
   $("body").append("test");
   timeMsg();
}

function timeMsg() {
  b += 250;
  if (b < 5000) { //check the limit
     setTimeout(docWrite, b - 250); //substract 250 (because we already added 250 before the first print
  }
}
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:19:52.727

您将不得不将回调添加到`docWrite()`. 通过将函数传递给它，让它运行一些东西（或你想要完成的东西）。

```
function docWrite(callback) {
    document.write('test');
    // something like
    callback();
} 
```

然后你可以像这样构造它：

```
var b = 0;
function timeMsg(){
    var t = setTimeout(function () {
        docWrite(function () {
            // what to do after this finishes
            if (b > 5000) { return; }
            b += 250;
            timeMsg();
        })
    }, b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:23:03.693

以下功能可用于完成您的任务：

```
function repeat(action, initial, slowdown, count, callback) {
    function next(time) {
       window.setTimeout(function() {
          if (count--) {
             action();
             next(time+slowdown);
          }
          else
             callback();
       }, time);
    }

    next(initial);
} 
```

您可以按如下方式使用它：

```
repeat(docWrite, 0, 250, 5000/250, function() {
    $("body").append("done"); 
});

function docWrite(){
    $("body").append("test");
}​ 
```

请注意，如果`action`回调 ( `docWrite`) 执行异步调用，例如您希望在启动下一个计时器之前等待完成的动画本身，那么它会变得有点复杂。让我知道是否是这种情况。

[http://jsfiddle.net/JKEpK/4/](http://jsfiddle.net/JKEpK/4/)

# android - 每次我扫描 NFC 时创建的新活动

> ID：10481853
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:12:25.007
> 
> 标签：android, nfc

几周前我已经问过这个问题，但直到知道没有答案。我不知道出了什么问题，但是每次我扫描 nfc 标签时，总是会创建相同的新活动。我该如何解决这个问题？这里的代码

```
public class CheckinActivity extends Activity{  
private boolean mResumed = false;
private boolean mWriteMode = false;
NfcAdapter mNfcAdapter;
PendingIntent mNfcPendingIntent;
IntentFilter[] mWriteTagFilters;
IntentFilter[] mNdefExchangeFilters;                    

TabelToko toko;          
TabelAbsen helper;
Cursor model=null;
AlmagAdapter adapter=null;
ListView list;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView viewId = (TextView)findViewById(R.id.idlogin);
    DigitalClock jam = (DigitalClock)findViewById(R.id.jam);
    viewId.setVisibility(View.GONE);
    jam.setVisibility(View.GONE);

    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);                                            
    mNfcPendingIntent = PendingIntent.getActivity(this, 0,new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    toko = new TabelToko(this);            
    toko.insertToko();

    getWaktu();
    helper = new TabelAbsen(this);        
    list=(ListView)findViewById(R.id.listChek);                          
    model=helper.getAll(tanggal);
    startManagingCursor(model);
    adapter=new AlmagAdapter(model);       
    list.setAdapter(adapter);        
}            
@Override
public void onDestroy() {   super.onDestroy();       helper.close(); }
private void cekNfc (String id) throws SQLException, UnsupportedEncodingException, GeneralSecurityException{                
    toko.open();        
    Cursor c = toko.CekToko(id);        
    if (c.moveToFirst()){
        getWaktu();
        Cursor d = helper.cekAbsen(id, tanggal);                            
        if (d.moveToFirst()==false){
            //insert checkin
            helper.insertAbsen(NFCSalesAttendanceActivity.idpegawai, NFCSalesAttendanceActivity.username, 
                id, c.getString(1), c.getString(2), tanggal, jam, "checkin");                                           
            model.requery();
            Toast.makeText(this, "Checkin", Toast.LENGTH_LONG).show();
        }
        else{                       
            if (d.getCount()==1){
                helper.insertAbsen(NFCSalesAttendanceActivity.idpegawai, NFCSalesAttendanceActivity.username, 
                        id, c.getString(1), c.getString(2), tanggal, jam, "checkout");                  
                    model.requery();
                    Toast.makeText(this, "Insert Checkout", Toast.LENGTH_LONG).show();
            }
            else{   
                d.moveToFirst(); d.moveToNext();            
                helper.updateAbsen(NFCSalesAttendanceActivity.idpegawai, NFCSalesAttendanceActivity.username, 
                    id, c.getString(1), c.getString(2), tanggal, jam, "checkout",d.getString(0));                   
                model.requery();
                Toast.makeText(this, "Update Checkout", Toast.LENGTH_LONG).show();
            }  
        }                   
    }
    else{
        new AlertDialog.Builder(this).setTitle("Perhatian!").setMessage("NFC Tidak Terdaftar di Database!")
        .setNeutralButton("Tutup", new DialogInterface.OnClickListener() {                  
            @Override
            public void onClick(DialogInterface dialog, int which) { } }).show();
    }
    toko.close();             
}

@Override    
protected void onResume() {    
    super.onResume();
    mResumed = true;               
    // Sticky notes received from Android
    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {            
        NdefMessage[] messages = getNdefMessages(getIntent());
        byte[] payload = messages[0].getRecords()[0].getPayload();            
        try                                     { 
        cekNfc(new String(payload)); }
        catch (SQLException e)                  { e.printStackTrace(); } 
        catch (NoSuchAlgorithmException e)      {  e.printStackTrace(); }
        catch (UnsupportedEncodingException e)  { e.printStackTrace(); } 
        catch (GeneralSecurityException e) {

            e.printStackTrace();
        }                                   
        setIntent(new Intent()); // Consume this intent.
    }
    enableNdefExchangeMode();        
}   
private void enableNdefExchangeMode() { mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent, mNdefExchangeFilters, null); }      

@Override
protected void onNewIntent(Intent intent) { // NDEF exchange mode               
    if (!mWriteMode && NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
        NdefMessage[] msgs = getNdefMessages(intent);            
        byte[] payload = msgs[0].getRecords()[0].getPayload();                                                     
    }
}   
NdefMessage[] getNdefMessages(Intent intent) {  // Parse the intent             
    NdefMessage[] msgs = null;        
    String action = intent.getAction();
    //jika ada action
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action) || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {                      
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {  msgs[i] = (NdefMessage) rawMsgs[i]; }
        }
    } 
    return msgs;
}

class AlmagAdapter extends CursorAdapter { AlmagAdapter(Cursor c) { super(CheckinActivity.this, c); }       
    @Override
    public void bindView(View row, Context ctxt, Cursor c) {            
        AlmagHolder holder=(AlmagHolder)row.getTag();           
        holder.populateFrom(c, helper);         
    }

    @Override
    public View newView(Context ctxt, Cursor c, ViewGroup parent) {
        LayoutInflater inflater=getLayoutInflater();
        View row=inflater.inflate(R.layout.checkin, parent, false);
        AlmagHolder holder=new AlmagHolder(row);            
        row.setTag(holder);         
        return(row);
    }
}
static class AlmagHolder {
    private TextView nama=null;
    private TextView alamat=null;
    private TextView waktu=null;
    private ImageView gambar=null;
    private View row=null;

    AlmagHolder(View row) {
        this.row=row;                   
        nama=(TextView)row.findViewById(R.id.namatoko);
        alamat=(TextView)row.findViewById(R.id.alamat);
        waktu=(TextView)row.findViewById(R.id.waktu);
        gambar=(ImageView)row.findViewById(R.id.gambar);
    }

    void populateFrom(Cursor c, TabelAbsen helper) {            
        nama.setText(helper.getNamaToko(c));
        alamat.setText(helper.getAlamatToko(c));
        waktu.setText(helper.getWaktu(c));
        if (helper.getStatusCheckin(c).equals("checkin"))       { gambar.setImageResource(R.drawable.kanan); }
        else if (helper.getStatusCheckin(c).equals("checkout")) { gambar.setImageResource(R.drawable.kiri); }           
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:12:20.300

我最近遇到了同样的问题，（似乎你不能阻止你的应用程序调用onDestroy，每次你触摸一个NFC标签。）->编辑...

因此，您必须将所有内容保存在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)或任何其他[Stroage](http://developer.android.com/guide/topics/data/data-storage.html)中。

在 onCreate 你可以重新加载你的数据，所以即使是一个新的活动也会得到所有需要的信息。

编辑：

经过一段时间的测试，SingleTask 确实对我有用。我把所有必须重新初始化的东西都放到了 onStart() 方法中。

另外，我将逻辑从 onResume() 放到 onNewIntent() 中，在那里我直接捕获了 Intent。

但我仍然保存一切以备将来使用：D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:24:50.473

尝试将launchMode设置为singleTop

并覆盖 onNewIntent()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:43:13.170

在清单中将 Activity 的启动模式设置为“singleTask”。这应该可以解决问题，因为现在不能有多个 Activity 实例。

# c++ - Opencv慢代码：有什么问题吗？

> ID：10481855
> 
> 赞同：2
> 
> 时间：2012-05-07T12:12:26.357
> 
> 标签：c++, image, opencv

这是我尝试改善图像颜色的功能。它有效，但它真的很慢......也许有人有更好的主意？

```
static Mat correctColor(Mat AImage) {
    Mat copyImage;
    AImage.copyTo(copyImage);
    Mat imgLab;
    cvtColor(copyImage, imgLab, CV_BGR2Lab);

    for (int y = 0; y < imgLab.rows; y++) {
        for (int x = 0; x < imgLab.cols; x++) {
            //get pixel value                
            imgLab.ptr<uchar > (y)[x * 3] = imgLab.ptr<uchar > (y)[x * 3]*0.3;
        }
    }
    cvtColor(imgLab, copyImage, CV_Lab2BGR);

    Mat img(copyImage.rows, copyImage.cols, CV_32FC3);
    copyImage.convertTo(img, CV_32FC3, 1 / 255.);        
    blur(img, img, Size(255, 255));
    Mat img32(copyImage.rows, copyImage.cols, CV_32FC3);
    copyImage.convertTo(img32, CV_32FC3, 1 / 255.);

    img.mul(img, 2);        
    divide(img32, img, img);

    img.convertTo(copyImage, CV_8U, 255.0);

    return copyImage;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:21:12.433

优化的最佳方法是从您花费最多时间的地方开始。因此，我强烈建议您分析此代码，以准确了解代码的哪些部分最耗时。

现在，关于如何改进的一些一般想法：

*   如果有任何机会摆脱对 Lab 的转换，那就去做吧。
*   不要使用浮动。除了浮点数，还有许多其他的数学运算方法。因此，首先尝试 uchars（摆脱标准化步骤），然后，如果近似值太差，则转换为 unsigned short，然后在所有计算完成后返回 uchar。
*   尝试找到另一个操作而不是除法。这是您可以在计算机上进行的最昂贵的数学运算之一。也许您可以移动位，或找到具有类似结果的操作。
*   不要通过 ptr 访问元素。在 SO 上搜索快速 Mat 访问。
*   255x255 窗口上的模糊是一个杀手。我怀疑它会占用您 95% 的处理时间。你真的不能让它变小吗？还是使用盒式过滤器？或者根本不使用它？或在互联网上查找 FFT 滤波器实现。它比 opencv 使用的简单窗口方法快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:47:59.883

主要问题是您在内存中创建了原始图像的多个副本：AImage、copyImage、imgLab、img、img32。

第一个优化应该是@Eric 建议的（*通过引用传递*）：

```
static Mat correctColor(Mat& AImage) { 
```

至于你的其余代码，看看你是否可以减少你使用的副本数量。

OpenCV 有一个*GPU 模块*，它在 GPU 中实现了多个功能，包括`cv::blur()`. 这个实现是基于 CUDA 框架的，所以如果你的显卡是 NVIDIA 你很幸运：[`gpu::blur()`](http://opencv.itseez.com/modules/gpu/doc/image_filtering.html#gpu-blur).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:15:34.687

首先，您应该通过引用传递参数，因为您已经在代码中创建了一个克隆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:20:39.630

改善图像颜色？您应该尝试使用[直方图均衡](http://www.opencv.org.cn/opencvdoc/2.3.1/html/doc/tutorials/imgproc/histograms/histogram_equalization/histogram_equalization.html)。寻找*equalizeHist()*函数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-09T08:37:45.027

除了对程序的优化。您可以在编译时添加编译器优化标志，例如`-o3`and `-NDEBUG`。

# iphone - 瞬态 sectionNameKeyPath & NSSortDescriptor NSFetchedResultsController

> ID：10481860
> 
> 赞同：16
> 
> 时间：2012-05-07T12:12:42.440
> 
> 标签：iphone, objective-c, xcode, nsfetchedresultscontroller

我在 Core Data 中有一个任务列表。我使用 NSFetchedResultsController 将它们提取到 UITableView 中。

我需要按自定义顺序自定义部分：

1.  逾期
2.  积极的
3.  进行中
4.  推迟
5.  完全的

为了确定任务应该进入哪个部分，我使用基于相关对象中的其他属性动态计算的派生瞬态属性。

不幸的是，您不能将派生值作为获取请求使用的排序描述符传递。这是因为获取依赖于已经有被要求获取的数据。鸡蛋。

我明白为什么我不能这样做，这并不能帮助我解决问题！

我试过了：

*   将 NSFetchedResultsController 子类化为“[自定义创建部分和索引标题](http://developer.apple.com/library/ios/DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008227-CH1-DontLinkElementID_2)”。也许我做错了，但这只是改变了部分的名称和顺序，而不是这些部分中有多少东西（这很关键）。

*   每个部分填充数组并将它们提供给表格（笨重，缓慢但完全有效）。

*   删除正在进行的和推迟的任务（这可行，但并不理想）。这样我可以按dueDate 排序并通过瞬态值驱动sectionNameKeyPath。

有没有人有更好的想法？像这样的问题已经有很多了，但没有一个能找到一个简洁的解决方案。

提前致谢！

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T16:35:19.483

最简单的解决方案是添加一个持久的“部分”属性（或转换现有的瞬态属性）。使其成为一组可排序的值（在运行时使用所需的名称显示）。每当您更新任何记录时，也要重新计算和存储部分属性。

我意识到这听起来像是您在存储冗余信息，但除了使您的逻辑更简单之外，它还将是可索引的，这将加快访问速度。

# ruby-on-rails - AddUserIdToMytimes .. 错误 - SQLite3::SQLException: 重复列名：user_id: ALTER TABLE "mytimes" ADD "user_id" integer

> ID：10481866
> 
> 赞同：0
> 
> 时间：2012-05-07T12:12:58.710
> 
> 标签：ruby-on-rails, ruby, database, migrate

我尝试这个进入终端：

rails 生成迁移 AddUserIdToMytimes user_id:integer --> create

数据库：迁移

--> -- add_column(:mytimes, :user_id, :integer) rake 中止！发生错误，此迁移和所有后续迁移均已取消：

SQLite3::SQLException：重复列名：user_id：ALTER TABLE“mytimes”添加“user_id”整数

有什么不好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:15:54.333

好像你的`Mytime`模型已经有`user_id`字段了。

你能做什么？删除此迁移是不必要的？

# ms-access - 如何在 VBA 中查找返回类型

> ID：10481867
> 
> 赞同：10
> 
> 时间：2012-05-07T12:12:58.803
> 
> 标签：ms-access, vba

我有一个 MS Access 应用程序，在查找函数的返回类型时遇到问题。有没有办法找到对象的返回类型？我有类型不匹配错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T12:19:00.043

如果是内置函数，请查看 Access 帮助主题。

如果它是用户定义的函数，请检查其定义。

如果您两者都做不到，请使用该`TypeName()`函数告诉您返回的数据类型`YourFunction()`。

```
Debug.Print TypeName(YourFunction()) 
```

如果`YourFunction()`返回一个变体，`TypeName()`会告诉你变体*子类型*。

Heinzi 建议`VarType()`，而不是`TypeName()`. 我习惯性地`TypeName()`先伸手只是因为它对我来说更快，而且我很少担心它的局限性。但是我同意 Heinzi 的观点；`VarType()`更好。

J.P。提供了另外两个有用的建议。首先，您可以创建一个简单的过程，该过程声明一个*Variant*变量并将函数的返回值分配给该变量。`F9`然后在第一行添加一个临时断点（带） `Debug.Print`，运行该过程，使用`F8`它逐行移动，并在“局部变量”窗口中监视变量的值。（从 VB 编辑器的主菜单中打开该窗口。查看 -> 本地窗口）

```
Public Sub examine_YourFunction()
    Dim varFoo As Variant
    Debug.Print "start"
    varFoo = YourFunction()
    Debug.Print varFoo
End Sub 
```

其次，对于具有返回类型的内置函数，您可以利用 Intellisense 在键入函数名称和/或参数时查看返回类型。

# cordova - PhoneGap截图插件返回base64编码字符串（iPhone）

> ID：10481868
> 
> 赞同：0
> 
> 时间：2012-05-07T12:12:59.383
> 
> 标签：cordova

我正在使用 PhoneGap 和 Sencha Touch 开发应用程序。我正在尝试让应用程序截取当前视图的屏幕截图并将该图像保存到相册，同时返回一个 base64 编码的字符串，我们将使用它来共享和通过电子邮件发送图像。我无法获取返回 base64 编码字符串的代码。任何人都可以在代码中看到任何错误吗？

[http://app.kodery.com/profile/360](http://app.kodery.com/profile/360) ScreenShot.m jsCallBack 似乎没有收到任何东西。

任何指针都会非常有帮助。

谢谢

普拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:41:13.070

如果您将代码放在问题中而不是其他站点上，那么帮助您会容易得多。我不认为这条线是正确的：

```
 jsCallBack = [ NSString stringWithFormat:@"%@("%@");", successCallback, encodedString ]; 
```

stringWithFormat 周围的引号不正确，不确定这是您将代码粘贴到的工具还是代码本身的问题。另外，imageData 的大小是多少，如果您对编码字符串执行 NSLog() 会发生什么： NSString *encodedString = [imageData base64EncodedString]; 那里实际上有数据并且它没有回到你的 JS 中吗？还是他们在本机代码中没有数据？

# android - Android - 在动画结束时完成活动？

> ID：10481871
> 
> 赞同：0
> 
> 时间：2012-05-07T12:13:06.600
> 
> 标签：android, animation, android-activity

我对android开发非常陌生，正在尝试一点一点地掌握它！

我正在尝试实现启动画面，并希望它在切换到下一个活动之前执行动画。我一直试图弄清楚一两个小时，但偶然发现了这个网站，所以这里......这就是我试过的，

```
public class SplashActivity extends Activity {
     // THREAD TO PROCESS SPLASH SCREEN
     private Thread splashThread;  
     // ANIMATION END FIELD
     private boolean ANIMATION_END;
     // CALLED WHEN ACTIVITY IS FIRST CREATED
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         // SET THE SPLASH SCREEN XML LAYOUT
         setContentView(R.layout.splash);
         // GET THE SPLASH IMAGE
         final ImageView logo = (ImageView) findViewById(R.id.splash_logo);
         // LOAD START ANIMATION FOR SPLASH IMAGE
         final Animation slideIn = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
         // START ANIMATE SPLASH LOGO
         logo.startAnimation(slideIn);
         // END ANIMATION SPLASH LOGO
         final Animation slideOut = AnimationUtils.loadAnimation(this, R.anim.slide_out_left);
         // SET EVENT LISTENER FOR ANIMATION TO FINISH
         slideOut.setAnimationListener(new Animation.AnimationListener(){
             @Override
             public void onAnimationStart(Animation animation) {
             }           
             @Override
             public void onAnimationRepeat(Animation animation) {
             }           
             @Override
             public void onAnimationEnd(Animation animation) {
                  ANIMATION_END = true;
             }
         });
         // SET SPLASHSCREEN THREAD
         splashThread = new Thread() {
             @Override
             public void run() {
                 try {
                     synchronized(this) {
                         // DURATION OF SPLASH SCREEN
                         wait(4000);
                     }
                 } catch (InterruptedException e) {   

                 }  
                 logo.startAnimation(slideOut);
                 // IF ANIMATION HAS ENDED
                 if (ANIMATION_END == true) {
                  finish();
                  // SWITCH FROM SPLASH ACTIVITY TO MENU ACTIVITY
                  startActivity(new Intent(SplashActivity.this, MenuActivity.class));
                 }
            }
       };
       // RUN THE SPLASH THREAD
       splashThread.start();        
   }
   // SPLASH SCREEN TOUCH EVENTS
   @Override
   public boolean onTouchEvent(MotionEvent event) {
      // USER TOUCHES SPLASH SCREEN
      if (event.getAction() == MotionEvent.ACTION_DOWN) {
           synchronized(splashThread) {
                // MAKE SPLASH SCREEN END
                splashThread.notifyAll();
           }
      }
      return true;
  }    
 } 
```

可能不是我知道的最好的代码，但我正在尝试。在徽标滑入后，当它尝试切换到`MenuActivity`

感谢所有帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:40:27.960

```
private ImageView img;
    private Thread t;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        img = (ImageView)findViewById(R.id.im1);

        t = new Thread(){   
            @Override
            public void run() {
                try {
                    synchronized(this){ 
                        wait(2000);
                    }
                      // Here your code of animation

                } 
                catch(InterruptedException ex){ 
                    ex.printStackTrace();
                }

                Intent i = new Intent(QuizActivity.this,main.class);
                startActivity(i);
            }
        };
            t.start();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:27:16.420

在 onCreate() 本身中启动动画，并在
`onAnimationEnd()`单独的线程中执行此操作。

`finish(); startActivity(new Intent(SplashActivity.this, MenuActivity.class));`

此外，尝试了解活动生命周期以及哪些方法代表 UI 回调，哪些不代表。

# c# - 从 Excel 2010 访问 C# 中的 Web 服务

> ID：10481876
> 
> 赞同：0
> 
> 时间：2012-05-07T12:13:20.583
> 
> 标签：c#, excel

我正在尝试使用 Soap Toolbox 将 Excel 2003 电子表格转换为访问 VBA 中的 Web 服务，使用 C# 中的 VSOT 转换为 Excel 2010。

我的大部分工作都很好，包括在我的 C# 代码中访问 Web 服务，但是从 Excel 访问 Web 服务让我有点困惑。

电子表格允许客户端一次运行 Web 服务 20 次，而不是在线输入 20 次信息等。

所以有一个运行按钮，它只是简单地执行 Application.CalculateFull，它当然只是强制计算工作簿中的所有数据。

在进行计算的单元格中，在当前的 VBA 解决方案中，它们具有以下内容 - {=modulename.function($A£36:$A40,E1,E2 etc)}

这当然会导致调用 Web 服务。

我一直在摆弄，只是无法在我的 C# 解决方案中工作。

我已经搜索过这个，但似乎找不到它的单元格一侧的编码。

有人可以让我摆脱痛苦并告诉我我做错了什么，或者即使这仍然是正确的方法！？:(

干杯，乔治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:10:56.110

我只是使用循环在 C# 代码中完成了所有工作。似乎更好的做法。效果很好。我怀疑这更像是一个 VBA 解决方案

# c++ - 将对象的指针直接存储在指针向量中？

> ID：10481879
> 
> 赞同：0
> 
> 时间：2012-05-07T12:13:44.777
> 
> 标签：c++

我正在处理我的 c++ 作业，并尝试在我的程序中使用多态性。在我的程序中，我想在构造某些对象后立即将它们的指针存储在指针向量中：

```
entities.push_back(&Invader4());
entities.push_back(&Invader3());
entities.push_back(&Invader2());
entities.push_back(&Invader1());
entities.push_back(&Invader0()); 
```

class Invader 继承 class Entity，但是当我尝试访问实体中的元素时，会发生访问冲突。我必须先声明另一个 Invader 类型向量来存储这些对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:15:05.613

您正在获取临时地址，这是非法的（确切地说是未定义的行为）。只需动态分配内存：

```
entities.push_back(new Invader4());
entities.push_back(new Invader3());
entities.push_back(new Invader2());
entities.push_back(new Invader1());
entities.push_back(new Invader0()); 
```

完成后不要忘记删除向量中的内存。

另外，看看智能指针，这里可能更合适。

编辑：通过删除，我的意思是

```
for (int i = 0 ; i < entities.size() ; i++ )
    delete entities[i]; 
```

当你完成了向量。

# ruby - DBI + ruby -odbc 失败，涉及 Bundler

> ID：10481881
> 
> 赞同：2
> 
> 时间：2012-05-07T12:13:46.190
> 
> 标签：ruby, odbc, unixodbc, exasolution

我正在使用带有 unixodbc 的`dbi`and `ruby-odbc`gems 连接到 Exasol，它工作正常，加载如下：

```
require 'dbi'
require 'odbc_utf8' 
```

当我将 Bundler 添加到组合中时，ruby-odbc 似乎无法找到 odbc 配置：

```
Could not load driver (undefined method `driver_name' for ODBC:Module)
/usr/lib/ruby/gems/1.9.1/gems/dbi-0.4.5/lib/dbi.rb:318:in `rescue in load_driver'
/usr/lib/ruby/gems/1.9.1/gems/dbi-0.4.5/lib/dbi.rb:242:in `load_driver'
/usr/lib/ruby/gems/1.9.1/gems/dbi-0.4.5/lib/dbi.rb:160:in `_get_full_driver'
/usr/lib/ruby/gems/1.9.1/gems/dbi-0.4.5/lib/dbi.rb:145:in `connect' 
```

我是否需要通过`Bundler.require`（`gem 'ruby-odbc', require: 'odbc_utf8'`在 Gemfile 中使用）或使用`require 'bundler/setup'`and并不重要`require 'odbc_utf8'`。

这就是我尝试连接的方式：

```
DBI.connect('DBI:ODBC:exa', config['username'], config['password']) 
```

万一这很重要，这就是我的`.odbc.ini`样子：

```
[exa]
Driver = /opt/EXASolution_ODBC-4.0.8/lib32/libexaodbc-uo22.so
EXAHOST = 192.168.235.84..86:8563 
```

**编辑**：它在没有 Bundler 的情况下工作的方式仅适用于 Ruby 1.9.3。在我看来，它像是一个范围界定问题，就像`driver_name`作为参数传递给引发异常的方法的变量一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T14:57:44.927

Please try to install: gem install dbd-odbc

# jquery - 防止 div 从 slideDown()

> ID：10481883
> 
> 赞同：2
> 
> 时间：2012-05-07T12:13:54.057
> 
> 标签：jquery, slideup

我有以下内容：

[http://jsfiddle.net/2sQGS/](http://jsfiddle.net/2sQGS/)

它工作得很好，除了我不希望当我将鼠标悬停在它上面时，它会向下滑动。我猜这是因为我不再悬停该块，但我想以某种方式从任何操作中停用宣传框。

如果您需要更多信息，请告诉我，并提前感谢您的宝贵时间。

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:48:30.123

我是 jQuery 的新手，所以希望其他人很快会为您的问题提出更好的解决方案，但我要做的（有效的）是将 .toggle-block 和 .blurb 简单地保存在另一个 div.container 块中。

所以你会有这个 html 结构：

```
<div class="block">
    <div class="container">
        <a class="toggle-block"><img src="http://www.northareadevonfootball.co.uk/Images/football.jpg"></a>
        <div class="blurb">
            <h2>Title here</h2>
            <p>Hello there, this is a test to take the content over one line so I can see what the line height looks like.</p>
        </div>
    </div>
</div> 
```

然后您只需将其更改为您的 jquery 代码：

```
$('.container').mouseleave(function() {
     $('.blurb').stop().slideUp(500);
}); 
```

它有效...不过还有一些需要改进的地方...如果您需要更多帮助并祝您的项目好运，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:15:52.390

如果您希望该框留在那里，请删除以下行，您就可以了：

```
 $('.toggle-block').mouseleave(function() {
        $(this).siblings('.blurb').stop().slideUp(500);
    }); 
```

如果您想在鼠标不在球上时隐藏该框，请通过以下方式更改这些行：

```
 $('.toggle-block').mouseleave(function() {
        $(this).siblings('.blurb').stop().hide();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:21:33.143

可能这就是你想要的

```
(function($) {
    $(document).ready(function(){
        var check = true;                   
        $('.toggle-block').mouseenter(function() {
            if(check){
            $(this).siblings('.blurb').slideDown(1000);
                check = false;
            }
        });

        $('.toggle-block').mouseleave(function() {
            $(this).siblings('.blurb').stop().slideUp(500);
        });

    });
})(jQuery);​ 
```

# javascript - JS $('x').myfunction 不是函数

> ID：10481885
> 
> 赞同：1
> 
> 时间：2012-05-07T12:13:59.320
> 
> 标签：javascript, jquery

我很想知道可能导致功能“不存在”的原因是什么。
例如，我有以下内容：

```
$.fn.myfunction = function(options){
  alert("test");
};
  $("#hello").myfunction();
alert($.fn.myfunction instanceof Function); 
```

为什么 FireBug 会记录它不是函数？

提前致谢。

**编辑：**
我想要一个可能是错误原因的所有可能性的列表。这不是我遇到的错误，但我只是想拓宽视野并了解更多可能性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:45:56.980

设置`$.fn.myfunction`使`myfunction`函数对返回的对象可用`$(selector)`，而不是对`$`自身可用。

因此，`$("#hello").myfunction`是一个函数，但`$.myfunction`不是。如果您`$.myfunction`出于某种原因真的想成为一个函数（例如，它是一个不需要 jQuery 对象列表来操作的实用函数），只需显式设置它，而不使用`$.fn`：

```
$.myfunction = function() { .... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:50:04.350

`$`上下文是什么？也许是 jQuery？如果您使用的是 jQuery，请标记您的问题。

```
(function( $ ) {
  $.fn.myPlugin = function() {

    return this.each(function() { // Maintaining chainability

      var $this = $(this);

      // Do your awesome plugin stuff here
      console.log($this); // TEMP

    });

  };
})( jQuery ); 
```

用法：`$('#hello').myPlugin();`

查看有关[jQuery 插件创作](http://docs.jquery.com/Plugins/Authoring)的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:44:42.777

添加括号似乎有效：

```
alert($().myfunction instanceof Function); 
```

返回真。

# objective-c - NSOutlineView 不更新

> ID：10481886
> 
> 赞同：4
> 
> 时间：2012-05-07T12:13:59.547
> 
> 标签：objective-c, xcode, cocoa, binding, nsoutlineview

我正在尝试使用 NSTreeController 和绑定将基于视图的 NSOutlineView 连接到我的模型。

我的模型由一个主 Node 类（及其子类）组成。每个节点可以有 0 个或多个子节点。出于性能原因，我将孩子存储在一个 C 数组（节点对象）中。我定义了NSTreeController 的`childrenKeyPath`,`countKeyPath`和`leafKeyPath`属性，并在我的 Node 类中实现了它们：

```
- (NSArray *)childNodes {
return [NSArray arrayWithObjects:children_ count:childCount_];
}

- (BOOL)nodeIsLeaf {
    return childCount_ < 1;
}

- (NSUInteger)childCount {
    return childCount_;
} 
```

当我添加一个新孩子时，我会在将其插入 C 数组`[self willChangeValueForKey:@"childNodes"]`之前和之后调用。`[self didChangeValueForKey:@"childNodes"]`

我按照文档中的描述设置了绑定。（我将 NSTreeController 的内容对象绑定到我的根节点。我将 NSOutlineView 的内容绑定到 NSTreeController 的排列对象。我还将 NSTextField 绑定到 NSTableViewCell 的 objectValue.name 属性）

初始配置（根对象及其子对象）在运行应用程序时加载良好。我还可以向根对象添加新的子对象。

但是，当我尝试将新的子节点添加到还没有子节点（没有显示三角形）的任何节点（根节点*除外*）时，NSOutlineView 不会更新（仍然没有三角形）。新节点正确插入模型并发送 will/didChangeValue 消息，但 NSTreeController 不会费心检查新的 children 数组。在这种情况下，记录上面的 3 个 keyPath 函数不会打印任何内容。

如果我关闭父节点并再次展开它，则重新加载节点，显示三角形，我可以展开节点以查看我刚刚添加的新节点。为什么 NSTreeController 不检查更改，即使我在更改 children 数组时发送了 KVO 消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:59:20.027

好的，这会做到：

```
/* item is the item which has just had new children added */
[_outlineView reloadItem:[_outlineView parentForItem:item] reloadChildren:YES]; 
```

它可能效率低下，甚至可能在 Mountain Lion 中得到修复，但这对我有用。您可以将需要执行此操作的时间限制为从 0 -> 1 个子项（反之亦然？）。

# java - 如何检查所有弹簧占位符是否存在？

> ID：10481888
> 
> 赞同：2
> 
> 时间：2012-05-07T12:14:00.310
> 
> 标签：java, xml, spring, configuration, placeholder

我有 java spring 应用程序，它在 xml 文件中使用它们的占位符值，它们取自 app.properties。是否可以在不启动应用程序并启动spring上下文的情况下创建测试或类似的东西，命名xml文件（配置bean的地方）中使用的所有占位符是正确的，没有丢失，没有拼写错误等？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:28:12.683

一个想法是获取对 ApplicationContext 的引用并实际创建每个 bean。如果未正确定义某些内容，这应该引发异常。

```
String[] beanNames = getAppContext().getBeanDefinitionNames();

for (int i = 0; i < beanNames.length; i++)
{
   BeanDefinition beanDefinition = getAppContext().getBeanFactory()
               .getBeanDefinition(beanNames[i]);

   if (!beanDefinition.isAbstract())
   {
      getAppContext().getBean(beanNames[i]);
   }
} 
```

# c# - 动态创建 .mdf/.sdf 数据库

> ID：10481890
> 
> 赞同：12
> 
> 时间：2012-05-07T12:14:01.673
> 
> 标签：c#, sql-server, database, sql-server-ce, dynamically-generated

如何使用“代码”创建新的 .mdf/.sdf 数据库？

我试过这个：http: [//support.microsoft.com/kb/307283](http://support.microsoft.com/kb/307283)

它所做的只是在 ConnectionString 上失败。由于在创建文件之前我没有连接到存在的文件，我怎么能只连接到 SQL Express 服务器来创建 mdf/sdf 数据库？

我希望能够连接到服务器并创建文件，从那里创建表等可能会更容易。

有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T14:31:58.793

```
public static void CreateSqlDatabase(string filename)
{
    string databaseName = System.IO.Path.GetFileNameWithoutExtension(filename);
    using (var connection = new System.Data.SqlClient.SqlConnection(
        "Data Source=.\\sqlexpress;Initial Catalog=tempdb; Integrated Security=true;User Instance=True;"))
    {
        connection.Open();
        using (var command = connection.CreateCommand())
        {
            command.CommandText =
                String.Format("CREATE DATABASE {0} ON PRIMARY (NAME={0}, FILENAME='{1}')", databaseName, filename);
            command.ExecuteNonQuery();

            command.CommandText =
                String.Format("EXEC sp_detach_db '{0}', 'true'", databaseName);
            command.ExecuteNonQuery();
        }
    }
} 
```

改成`Catalog=tempdb`，`Catalog=master`效果不错

样品用途：

```
var filename = System.IO.Path.Combine("D:\\", "testdb.mdf");
if (!System.IO.File.Exists(filename))
{
    CreateSqlDatabase(filename);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:19:40.787

关于 .sdf 文件 (SQL Server CE)，您可以使用`SqlCeEngine`该类来创建新数据库，如[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms171966.aspx)中所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T09:59:26.913

**创建 .sdf 数据库**

```
using System.Data.SqlServerCe;
using System.IO;
  string folderPath="D:\\Compact_DB"
  string connectionString;
  string fileName =folderPath+"\\School.sdf";
  string password = "12345";

  if (File.Exists(fileName))
  {
    File.Delete(fileName);
  }

  connectionString = string.Format("DataSource=\"{0}\"; Password='{1}'",    fileName, password);
  SqlCeEngine obj_ceEngine = new SqlCeEngine(connectionString);
  obj_ceEngine.CreateDatabase(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:18:55.870

确保您有一个有效的连接字符串。

您需要的数据库/目录必须设置为有效的数据库，通常这可以是始终可用的“主”，因为您将使用主来创建数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T12:21:13.263

如果您需要以编程方式从头开始创建数据库，我通常会进入 SQL Server Management Studio 并在第一步中通过 gui 创建它。但是，我没有单击右下角的确定按钮，而是单击顶部工具栏中的脚本按钮。这将为我提供一个完整的 sql 脚本，用于创建我想要的数据库。然后我可以更改脚本并动态更改我想要的部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T12:21:30.333

我想问题出**在**ConnectionString 中。它应该指向**主**数据库的有效实例（如您参考的文章中所示）。确保它是正确的，它应该可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T12:24:16.470

将 connectionString 与`InitialCatalog = master`. 由于只有 master 具有创建数据库的默认访问权限。

# json - NancyFX：如何通过 BrowserResponse.Body.DeserializeJson 反序列化动态类型（单元测试）

> ID：10481895
> 
> 赞同：2
> 
> 时间：2012-05-07T12:14:24.687
> 
> 标签：json, unit-testing, nancy

我有以下 NancyFX 单元测试。我使用[Shouldly](http://shouldly.github.com/)断言库来提供一组扩展方法`.Should---`

```
[Fact]
public void Assessment__Should_return_assessment_state_for_specified_user()
{
    const AssessmentState assessmentState = AssessmentState.Passed;
    var user = Fake.Mentor();

    using (var db = Fake.Db())
    {
        db.Save(user);
        Fake.Assessment(user.Id, db, assessmentState);
        db.ClearStaleIndexes();
    }

    var response = Fake.Browser(user.UserName, user.Password)
            .Get("/assessment/state/" + user.Id, with => with.HttpRequest());

    //var result = (dynamic)body.DeserializeJson<ExpandoObject>();
    var result = (dynamic) JsonConvert.DeserializeObject<ExpandoObject>(response.Body.AsString());

    result.ShouldNotBe(null);
    ((AssessmentState) result.State).ShouldBe(assessmentState);
} 
```

此测试调用`AssessmentService`定义为的 uri，它返回一个简单的 JSON 对象定义，该对象定义具有类型 (enum)`/assessment/state/" + user.Id`的单个属性，要么，要么。`State``AssessmentState``Passed``Failed``NotStarted`

这是服务处理程序，因此您可以看到没有任何技巧。

```
Get["/assessment/state/{userid}"] = parameters =>
    {
        var assessment = AssessmentService.GetByUserId(Db, (string)parameters.userid);
        return assessment == null ? HttpStatusCode.NotFound : Response.AsJson(new
                                                                        {
                                                                            assessment.State
                                                                        });
    }; 
```

这是此服务调用返回的 JSON 示例：

```
{"State":1} 
```

一切正常，直到我尝试反序列化假 Nancy 浏览器返回的 JSON。`BrowserResponse.Body`首先，我尝试使用 Nancy对象提供的内置方法：

```
var result = (dynamic)response.Body.DeserializeJson<ExpandoObject>(); 
```

这将反序列化为一个空对象。这不好。但是，如果我们使用 Newtonsoft 等价物，那么一切都很好（几乎）。

```
var result = (dynamic) JsonConvert.DeserializeObject<ExpandoObject>(response.Body.AsString()); 
```

JSON 反序列化现在可以工作，因此以下应该断言通过了出色的结果：

```
((AssessmentState) result.State).ShouldBe(assessmentState); 
```

但是，由于我怀疑与匿名类型有关的原因，以下行在运行时失败（它编译得很好）。

```
result.ShouldNotBe(null); 
```

![应该例外](../Images/fb1e3cd42b22e22951fdb82751cba426.png)

这是相当多的信息。让我把它提炼成两个问题：

1.  鉴于 Newtonsoft 版本可以，为什么 Nancy 内置的 JSON 反序列化器不起作用？

2.  如何使用 JSON 反序列化生成的动态类型，以便应该扩展方法不会导致运行时异常？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:39:47.637

第一个问题我不能回答，但是WRT Shouldly 和动态类型，Shouldly 的`ShouldNotBe`方法是`object`. DLR 不允许您在类型为的对象上调用扩展方法`dynamic`（因此您会看到运行时绑定程序异常）

我建议如果你想在结果上调用 ShouldNotBe(null) ，你必须将它转换为`object`第一个（即`((object)result).ShouldNotBe(null)`：）

-X

# iphone - 比较日期并在表格视图中显示值

> ID：10481901
> 
> 赞同：0
> 
> 时间：2012-05-07T12:14:53.323
> 
> 标签：iphone, objective-c, xcode, uitableview, nsdate

我有 2 个测试字段，其中包含从日期和到日期以及一个按钮。当点击按钮时，应该进行验证，然后如果给出有效日期，我希望数据显示在 tableView 中。

我对在哪里编写这段代码感到非常困惑。在**cellForRowAtIndexPath**中还是在按钮的**IBAction**方法中？

如果它写在**cellForRowAtIndexPath**中，则在加载视图时进行验证。如果它写在我应该在哪里编写用于显示数据的代码的方法中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:59:36.867

如果我没记错的话

最好在 IBAction 中进行，然后如果您正在设置值，如果您认为自己做对了，那么您唯一需要调用的是：

```
["your-table-view" reloadData]; 
```

然后它会完成我猜..

我希望这有帮助..

# ocaml - OCaml 中的记录和元组有什么区别

> ID：10481910
> 
> 赞同：5
> 
> 时间：2012-05-07T12:15:18.617
> 
> 标签：ocaml

记录和元组之间有什么区别，而不仅仅是语法上的区别？

有性能差异吗？

元组和记录的实现是否相同？

您是否有可以使用元组但不能使用记录（反之亦然）完成的事情的示例？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T12:52:49.060

模数语法它们几乎相同。主要的语义区别在于元组是结构类型，而记录是名义类型。这意味着例如记录可以是递归的，而元组不能（至少在没有 -rectypes 选项的情况下不能）：

```
type t = {a : int, b : unit -> t}  (* fine *)
type u = int * (unit -> u)         (* error *) 
```

此外，记录可以有可变字段，元组不能。

FWIW，在 OCaml 的姊妹语言 SML 中，元组*是*记录。也就是说，在 SML 中 (a,b,c) 只是 {1=a,2=b,3=c} 的语法糖，记录也是结构类型。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T20:57:55.633

仅浮点记录或数组中的浮点字段未装箱存储，而此类优化不适用于元组。如果您要存储大量浮点数并且仅存储浮点数，那么使用记录很重要——您可以通过拆分混合浮点数/其他数据结构来获得内部仅浮点数记录。

其他差异在类型级别，Andreas 已经描述过——记录是生成的，而元组是预先存在的并且具有结构语义。如果您想要具有多态访问器的结构记录，您可以使用对象类型。

# wordpress - Wordpress - 删除帖子时的操作（不止一个）

> ID：10481914
> 
> 赞同：0
> 
> 时间：2012-05-07T12:15:33.017
> 
> 标签：wordpress, delete-row

我在触发“delete_post”操作时遇到问题。我正在构建功能，我必须在数据库中再添加一个表（我不能为此使用 wp_postmeta）。因此，我创建了一个自定义表，其中包含与帖子相关的附加数据。我希望，当管理员从管理面板中删除帖子时，在我的自定义表中删除该帖子的数据（我不希望在帖子消失时冗余数据留在那里）

我实现了这样的东西：

```
add_action('admin_init', 'codex_init');
function codex_init() {
   if (current_user_can('delete_posts')) add_action('delete_post', 'delete_something');
}

function delete_something($postid) {
   //here im deleting everything from that table with that post id for that post type
} 
```

如果有人单击以仅删除一个帖子，这将非常有效。但是当我想一次删除更多帖子时（检查 wordpress 管理菜单上的按钮并选择删除选项 - 批量删除），这不起作用吗？我在这里做错了什么，或者当有人想一次删除多个帖子时是否有不同的操作？

* * *

**编辑：**

如以下评论所示，此操作也非常适用于批量和单个删除操作。我的问题与全局 $post 变量的使用有关 - 获取单个帖子的 id - 而我应该使用直接提供给函数的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:44:28.940

我查看了其中的代码`wp-admin/edit.php`确实触发了`wp_delete_post`具有您操作的功能。
试试这个。难道`die`又撞了`var_dump`？

```
add_action('admin_init', 'codex_init');
function codex_init() {
   if (current_user_can('delete_posts')) add_action('delete_post', 'delete_something');
}

function delete_something($postid) {
     var_dump('trigger'.$postid);die();
     //here im deleting everything from that table with that post id for that post type
} 
```

# symfony - 方法名称必须以 findBy 或 findOneBy 开头！（未捕获的异常）

> ID：10481916
> 
> 赞同：3
> 
> 时间：2012-05-07T12:15:34.873
> 
> 标签：symfony

我已经检查过[了，](https://stackoverflow.com/questions/9172586/the-method-name-must-start-with-either-findby-or-findoneby-undefined-method-sym)但我的错误似乎有所不同。

我收到此错误：

```
[2012-05-07 14:09:59] request.CRITICAL: BadMethodCallException: Undefined method 'findOperariosordenados'. The method name must start with either findBy or findOneBy! (uncaught exception) at /Users/gitek/www/uda/vendor/doctrine/lib/Doctrine/ORM/EntityRepository.php line 201 [] [] 
```

这是我的 OperarioRepository：

```
<?php

namespace Gitek\UdaBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * OperarioRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class OperarioRepository extends EntityRepository
{
    public function findOperariosordenados()
    {
        $em = $this->getEntityManager();
        $consulta = $em->createQuery('SELECT o FROM GitekUdaBundle:Operario o
                                        ORDER BY o.apellidos, o.nombre');

        return $consulta->getResult();
    }    
} 
```

这是我的控制器，我在其中调用存储库：

```
$em = $this->getDoctrine()->getEntityManager();
$operarios = $em->getRepository('GitekUdaBundle:Operario')->findOperariosordenados(); 
```

最后，这是我的实体：

```
<?php

namespace Gitek\UdaBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Gitek\UdaBundle\Entity\Operario
 *
 * @ORM\Table(name="Operario")
 * @ORM\Entity(repositoryClass="Gitek\UdaBundle\Entity\OperarioRepository")
 */
class Operario
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $nombre
     *
     * @ORM\Column(name="nombre", type="string", length=255)
     */
    private $nombre;
    ----
    ---- 
```

任何帮助或线索？

提前致谢

编辑：在开发环境中工作正常，但在生产环境中没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:41:27.300

您已经在存储库中，不需要重新获取它。

*Repository 中的所有方法都可以与`$this`

**另外，请注意**

*   `return $this->findBy();`当可以使用简单的查询生成器或手工查询时，工作量太大了。
*   `findBy()`有三个参数，第一个是关系和getter的数组，第二个是用于排序的，见`Doctrine\ORM\EntityRepository`代码
*   而不是使用原始查询...首先尝试查询生成器。看看我的样本。

**你的代码**

我建议你简单地做：

```
public function findOperariosordenados()
{
    $collection = $this->findBy( array(), array('apellidos','nombre') );
    return $collection;
} 
```

你只需要`EntityRepository`

**我的存储库之一：**

注意事项：

*   `Order``$owner`与使用`User`实体有关系
*   如果你真的需要一个数组，在`$array = $reposiroty->getOneUnhandledContainerCreate(Query::HYDRATE_ARRAY)`
*   是a的`ContainerCreateOrder`延伸。虽然完全超出了这个问题的范围。`Order``@ORM\InheritanceType("SINGLE_TABLE")`

这可能会有所帮助：

```
 <?php

namespace Client\PortalBundle\Entity\Repository;

# Internal
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\QueryBuilder;
use Doctrine\ORM\Query;
use Doctrine\Common\Collections\ArrayCollection;

# Specific

# Domain objects

# Entities
use Client\PortalBundle\Entity\User;

# Exceptions

/**
 * Order Repository
 *
 *
 * Where to create queries to get details
 * when starting by this Entity to get info from.
 *
 * Possible relationship bridges:
 *  - User $owner Who required the task
 */
class OrderRepository extends EntityRepository
{

    private function _findUnhandledOrderQuery($limit = null)
    {
        $q = $this->createQueryBuilder("o")
                ->select('o,u')
                ->leftJoin('o.owner', 'u')
                ->orderBy('o.created', 'DESC')
                ->where('o.status = :status')
                ->setParameter('status',
                    OrderStatusFlagValues::CREATED
                )
                ;

        if (is_numeric($limit))
        {
            $q->setMaxResults($limit);
        }
        #die(var_dump( $q->getDQL() ) );
        #die(var_dump( $this->_entityName ) );
        return $q;
    }

    /**
     * Get all orders and attached status specific to an User
     *
     * Returns the full Order object with the
     * attached relationship with the User entity
     * who created it.
     */
    public function findAllByOwner(User $owner)
    {
        return $this->findBy( array('owner'=>$owner->getId()), array('created'=>'DESC') );
    }

    /**
     * Get all orders and attached status specific to an User
     *
     * Returns the full Order object with the
     * attached relationship with the User entity
     * who created it.
     */
    public function findAll()
    {
        return $this->findBy( array(), array('created'=>'DESC') );
    }

    /**
     * Get next unhandled order
     *
     * @return array|null $order
     */
    public function getOneUnhandledContainerCreate($hydrate = null)
    {
       return $this->_findUnhandledOrderQuery(1)
                    ->orderBy('o.created', 'ASC')
                    ->getQuery()
                    ->getOneOrNullResult($hydrate);
    }

    /**
     * Get All Unhandled Container Create
     */
    public function getAllUnhandledContainerCreate($hydrate = null)
    {
       return $this->_findUnhandledOrderQuery()
                    ->orderBy('o.created', 'ASC')
                    ->getQuery()
                    ->getResult($hydrate);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T14:15:18.210

你清除缓存了吗？

`php app/console cache:clear --env=prod --no-debug`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T20:58:23.040

我`app/config/config_prod.yml`有一个为学说指定的缓存驱动程序：

```
doctrine:
    orm:
        metadata_cache_driver: apc
        result_cache_driver: apc
        query_cache_driver: apc 
```

我使用这些函数调用清除了 APC 缓存：

```
if (function_exists('apcu_clear_cache')) {
    // clear system cache
    apcu_clear_cache();
    // clear user cache
    apcu_clear_cache('user');
}

if (function_exists('apc_clear_cache')) {
    // clear system cache
    apc_clear_cache();
    // clear user cache
    apc_clear_cache('user');
    // clear opcode cache (on old apc versions)
    apc_clear_cache('opcode');
} 
```

并清空`app/cache/`目录。

但是我在 prod 环境中一直收到这个错误，而在 dev 环境中一切都很好。

我终于重新启动了我的虚拟服务器，并且成功了。

这绝对让我怀疑缓存问题。下次我将尝试（优雅地）仅重新启动 Web 服务器，因为这也会清除缓存（[php - 优雅的 Apache 重新启动会清除 APC 吗？ - 代码日志](https://stackoverflow.com/questions/2785533/does-a-graceful-apache-restart-clear-apc)）

否则，设置`apc.stat = 1`（[http://php.net/manual/en/apc.configuration.php#ini.apc.stat](http://php.net/manual/en/apc.configuration.php#ini.apc.stat)）`/etc/php5/apache2php.ini`似乎也是一个好主意，如这里建议的那样：[我们是否需要在新建后重新启动 apache + APC应用程序的版本部署？](https://stackoverflow.com/questions/3144350/do-we-need-to-restart-apache-apc-after-new-version-deployment-of-app)

**更新**

我的开发服务器安装了 APC 而不是 APCu。前两个调用`apcu_clear_cache()`导致 PHP 致命错误，这反过来又阻止了 APC 缓存被清除。

`apcu_clear_cache()`因此，在调用or之前检查您的系统使用的缓存`apc_clear_cache()`。之后，无需重新启动虚拟机或 Web 服务器来清除缓存并摆脱令人讨厌的异常。

`if`添加了运行 APC 或 APCu 特定功能的块。

# php - 用于获取用户详细信息的 Stackoverflow API 返回奇怪的符号

> ID：10481919
> 
> 赞同：0
> 
> 时间：2012-05-07T12:15:43.853
> 
> 标签：php, api

有人可以指出我在哪里做错了。这是我的代码：

```
<?php 
    $link = "http://api.stackexchange.com/2.0/users/534755?site=stackoverflow";
    $var = file_get_contents($link);
    echo $var;    
?> 
```

如果我运行这个片段，这就是我得到的：

```
‹ì½`I–%&/mÊ{JõJ×àt¡€`$Ø@ìÁÍæ’ìiG#)«*ÊeVe]f@Ìíť¼÷Þ{ï½÷Þ{ï½÷º;ťN'÷ßÿ?\fdlöÎJÚÉž!€ªÈ?~|?"~ñGE›/šŹ}ï´nòú÷/f=ºoÿÁýû#ù ½^å=ú¨Î/Š¦Íë|öÑè£iťgmQ-ÿYÖÒ—»{w<|¸ûé§£ŹfE³*³ëß™-ðÚ‹âmUfôÊª®Î‹2ÿý‹Ev/æm»zt÷îÕÕÕø¢Î.³6«ÇÓjqW~½›äû÷ïg³éÁìáù§ÓüÓÉÁäüàþÎùÎìáîÁìÓßcöY1Ë—m1­–¿°þìåçÔEť¯Ö-ãECØyàðûOçÙò"'|¯?z´ûæ*Ïß|µ¨–í£Ś}ù‹ÖYMd¡£^çYŤW‰2<nüRfMûûgÓiÞ4†€÷î}zïáîÎÁž~»¨fÅy‘ÏÜ÷{÷vöîÝ£>Šæ÷Ï«²ºÎé‹ó¬lrz§X¾u4mÚlú¶ºÌëó²ºb¢b"›»2­w—fJ®òIC³ÿû¯ë2ś²¸·“u9ÙnÚõ¬¨Ú—ÕT©ûÑI]Ñ¯Bã¨ÖË–ùfïþþÃ‡„â$›ÑÐùsâ¬_üÑEUÎ¶MQ^‚V÷¨M]-€¡íÿ’¯Úß¿–Áîìü’ïŹ&gt;úEëªÍ~ÿ:_dÅ²X^ôæÓEöŽ€ìÄyÖ±jCŠ_òÿÿÿ”ÄÐ 
```

而如果我在浏览器中导航到给定的链接，这就是我得到的：

```
{"items":[{"user_id":534755,"user_type":"registered","creation_date":1291799166,"display_name":"Nikola","profile_image":"http://www.gravatar.com/avatar/e8e455adc8d9f6ce6b8bf850f0d918d6?d=identicon&r=PG","reputation":507,"reputation_change_day":0,"reputation_change_week":0,"reputation_change_month":12,"reputation_change_quarter":57,"reputation_change_year":126,"age":26,"last_access_date":1336387120,"last_modified_date":1332302337,"is_employee":false,"link":"http://stackoverflow.com/users/534755/nikola","website_url":"http://www.lightbulb-studio.com","location":"Croatia","account_id":254997,"badge_counts":{"gold":0,"silver":3,"bronze":14},"accept_rate":100}],"quota_remaining":289,"quota_max":300,"has_more":false} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:18:29.910

响应被`gzip`压缩。您需要解压缩它。

尝试类似：

```
<?php 
    $link = "http://api.stackexchange.com/2.0/users/534755?site=stackoverflow";
    $data = file_get_contents($link);
    $var  = gzinflate(substr($data, 10, -8));
    echo $var;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:27:25.750

如果您没有 gzdecode 功能，请尝试使用此[gzdecode](http://digitalpbk.com/php/file_get_contents-garbled-gzip-encoding-website-scraping)

# java - 使用 SWT 将文件剪切到剪贴板

> ID：10481920
> 
> 赞同：0
> 
> 时间：2012-05-07T12:15:47.737
> 
> 标签：java, swt, clipboard

有很多关于如何使用 SWT API 将文件*复制到剪贴板的教程。*但是，我从未见过有关如何将文件*剪切*到剪贴板的解释。我想做的是用Java编写一个简单的文件管理器，您可以在其中选择一个文件并按`Ctrl+X`，当您按`Ctrl+V` *本机文件管理器*时，文件会从其原始位置移动（而不是复制）到目的地。SWT API 是否真的支持这一点，还是需要一些较低级别的 API 才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:35:12.227

查看此图像[示例](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet282.java)。请注意，您可以使用[FileTransfer](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/dnd/FileTransfer.html)类而不是 ImageTranfer 类。

关于 CUT 操作：

[为此，您必须在将数据复制到剪贴板后手动擦除数据。Java 没有提供剪切操作的实现。](http://www.javaworld.com/javaworld/javatips/jw-javatip61.html?page=4). 这适用于 AWT/Swing，但我很确定它与 SWT 相同。您可以在剪贴板复制成功或粘贴成功后将其删除...您的选择。

# html - Firefox 和 Chrome 的音频播放循环延迟

> ID：10481921
> 
> 赞同：1
> 
> 时间：2012-05-07T12:15:48.180
> 
> 标签：html, audio

我有一秒钟的音频`.wav`和`.ogg`文件。Firefox 在循环播放时遇到问题。在 30 秒内它应该播放 30 次，但它不能。我已经使用音频和嵌入标签来播放音频。Chrome 有时想玩。

# wpf - 将 Caliburn Micro Screen(UserControl) 添加到 WPF MVVM 中的画布？

> ID：10481927
> 
> 赞同：1
> 
> 时间：2012-05-07T12:16:23.040
> 
> 标签：wpf, mvvm, user-controls, caliburn.micro

我`Caliburn Micro`在我的项目中使用，并且我有许多 UserControls 和他们的 viewmodel 继承自`PropertyChangedBase`，我希望将此 UserControl 添加到我的 ShellView 中的 Canvas 中。我不想`IWindowManager`从显示 Windows 中使用，而是希望将它们添加到画布中。

请帮忙。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T03:03:00.327

如果您`ContentControl`在您的内部使用，您`ShellView`可以挂钩到 Caliburn.Micro 的 View-ViewModel 绑定过程。

我假设在你的`ShellViewModel`身上你有一堆暴露的属性，它们是`ViewModel`. 如果您将 a 放置`ContentControl`在您的`ShellView`（这可能是`Canvas`您希望用于布局 Shell 的容器上/作为其子项），然后使用`ShellViewModel`您希望绑定的属性名称来命名该控件到，然后 Caliburn's`ViewModelBinder`将为您完成剩下的工作。

例如，假设您有一个称为 VM`FizzViewModel`和一个匹配的 View 称为`FizzView`（这只是 a `UserControl`），并且您希望`FizzView`出现在您的设备上，`ShellView`您可以执行以下操作...

一个脱光的背影`ShellViewModel`

```
public class ShellViewModel : Screen, IShell
{
    public ShellViewModel(FizzViewModel theFizz)
    {
        TheFizz = theFizz;
    }

    public FizzViewModel TheFizz { get; set; }
} 
```

及其匹配`ShellView`

```
<UserControl x:Class="ANamespace.ShellView">
    <Canvas> 
        <ContentControl x:Name="TheFizz"></ContentControl>
    </Canvas> 
</UserControl> 
```

在这里，因为它`ContentControl`被命名为 TheFizz，它将被 Caliburn 绑定到您的 VM 上具有该名称的属性（类型之一`FizzViewModel`）

这样做意味着您不必在您`UserControl`的 上使用它们的真实类型，您`ShellView`可以让 Caliburn 通过约定为您完成工作（这意味着如果您只需添加一点，就很容易换出 TheFizz 类型接口间接）。

### 更新

从您在评论中提供的额外信息中，我现在可以看到您实际上正在查看一个需要 ItemsControl 的问题。

默认的`DataTemplate`Caliburn 使用如下所示

```
<DataTemplate xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
              xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro">  
    <ContentControl cal:View.Model="{Binding}"   
                    VerticalContentAlignment="Stretch"  
                    HorizontalContentAlignment="Stretch" />  
</DataTemplate> 
```

您会注意到它使用 a `ContentControl`，正如我在上面讨论的那样，它具有一些优点。基本上，这将允许 Caliburn 为`DataTemplateSelector`您的`ItemsControl`. 因此，您可以将不同类型的虚拟机添加到您`ItemsControl`绑定的集合中，此默认设置`DataTemplate`将解析用于显示它的视图类型。以下演示了一个非常简单的示例，说明如何实现您想要的。

首先是ShellViewModel，记下`BindableCollection`命名的Items

```
[Export(typeof(IShell))]
public class ShellViewModel : IShell 
{
    public ShellViewModel()
    {
        Items = new BindableCollection<Screen>();
        _rand = new Random();
    }

    public BindableCollection<Screen> Items { get; set; }

    private Random _rand;

    public void AddItem()
    {
        var next = _rand.Next(3);
        var mPosition = System.Windows.Input.Mouse.GetPosition(App.Current.MainWindow);
        switch (next)
        {
            case 0:
                {
                    Items.Add(new BlueViewModel
                        {
                            X = mPosition.X,
                            Y = mPosition.Y,
                        });
                    break;
                }

            case 1:
                {
                    Items.Add(new RedViewModel
                    {
                        X = mPosition.X,
                        Y = mPosition.Y,
                    });
                    break;
                }
            case 2:
                {
                    Items.Add(new GreenViewModel
                    {
                        X = mPosition.X,
                        Y = mPosition.Y,
                    });
                    break;
                }
            default:
                break;
        }
    }
} 
```

然后是一些您想在 Shell 中显示的虚拟 VM 类型。这些可以是/做任何你喜欢的事情：

```
public abstract class SquareViewModel : Screen
{
    public double X { get; set; }
    public double Y { get; set; }
}

public class BlueViewModel : SquareViewModel
{

}

public class RedViewModel : SquareViewModel
{

}

public class GreenViewModel : SquareViewModel
{

} 
```

现在是一个 ShellView，注意绑定到 ShellViewModel 上的 Items 属性的 ItemsControl

```
<Window x:Class="WpfApplication2.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro">

<Grid >
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <ItemsControl x:Name="Items"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas cal:Message.Attach="[Event MouseLeftButtonUp] = [Action AddItem()]"
                            Background="Transparent"></Canvas>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Canvas.Left" Value="{Binding Path=X}" />
                    <Setter Property="Canvas.Top" Value="{Binding Path=Y}" />
                </Style>
            </ItemsControl.ItemContainerStyle>
        </ItemsControl>
</Grid>
</Window> 
```

`UserControl`还有一个用于显示 的示例，再`GreenViewModel`创建 2 个，将名称更改为`RedView`和`BlueView`并适当地设置背景以使演示正常工作。

```
<UserControl x:Class="WpfApplication2.GreenView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="30"
             Height="30">
    <Grid Background="Green"></Grid>
</UserControl> 
```

这个例子放在一起是`Canvas`根据鼠标点击的位置在你的外壳上创建彩色方块。我认为你应该能够接受这个并将其扩展到你的需要。

# ruby-on-rails - 所有请求如何在 Rails 中的 routes.rb 中结束？

> ID：10481929
> 
> 赞同：2
> 
> 时间：2012-05-07T12:16:36.323
> 
> 标签：ruby-on-rails

如果我想设置可以处理任何请求的简单 CGI 应用程序（比如`/`or `/hello/`，`/bye`等等，我必须设置，例如，`.htaccess`将任何请求重定向到我的`script.rb`

但是，所有请求是如何结束的，`routes.rb`或者换句话说——Rails 应用程序的起点在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:26:09.843

这是关于 Rails 中请求生命周期的演示[http://www.slideshare.net/lachie/the-rails-request-cycle](http://www.slideshare.net/lachie/the-rails-request-cycle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:14:14.523

这是 Rails 调度程序如何工作的很好的概述：http: [//brainspl.at/request_response.pdf](http://brainspl.at/request_response.pdf)

# javascript - 使用坐标值作为位置

> ID：10481931
> 
> 赞同：1
> 
> 时间：2012-05-07T12:16:41.707
> 
> 标签：javascript, jquery

我有以下图像地图代码。

```
<area shape="rect" coords="213,109,320,256" href="embedded-processors" alt="Embedded Processor" class="embeded-processor" /> 
```

我可以检索返回“213,109,320,256”的属性坐标，对于位置 div，我想要基于此坐标的 DIV 位置。像 top 值是 213 和 left 是 109px。

我如何检索每个值并将其保存在局部变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:19:23.663

```
var coord = area.getAttribute( 'coords' ).split( ',' ); 
```

这将创建一个包含所有值的数组`coords`。然后，您可以通过 访问顶部值`coord[0]`和通过 访问左侧值`coord[1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:29:47.717

Sirko 发布的不是 jQuery，所以这里是 jQuery 解决方案：

```
var coords = $.map($('.embeded-processor').attr('coords').split(','), parseInt) 
```

你得到的是一个整数数组：`[213, 109, 320, 256]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T19:33:55.330

```
<div>
    <p>
        Click on the sun or on one of the planets to watch it closer:</p>
    <img src="images/Cart.png" width="145" height="126" alt="Planets" usemap="#planetmap" />
    <span id="dataval">0,0</span>
    <map name="planetmap" id="planetmap" class="planetmap" runat="server">

    </map>
</div> 
```

```
jQuery('#planetmap area').each(function (e) {
    jQuery(this).mousemove(function () {
        jQuery('#dataval').html(jQuery(this).attr('coords'));
        jQuery(this).click(function () {
            jQuery(this).attr('title', 'SHASHANK');
            var current_cordinate = jQuery(this).attr('coords').split(',');
            var nextX = Math.ceil(current_cordinate[2]) + 1;
            var NextY = Math.ceil(current_cordinate[3]);
            var downX = Math.ceil(current_cordinate[2]) + 1;
            var downY = Math.ceil(downX) + 1;

            //var new_next_coordinate = jQuery(this).attr('coords', ('0,0,' + nextX + ',' + NextY))
            //alert(new_next_coordinate.text());
            jQuery(jQuery(this).find('coords','0,0,'+nextX+','+NextY)).attr('title', 'SHASHANK');
            alert("SUBMIT");
        });
    });
}); 
```

# c# - 访问由于变量的实例

> ID：10481934
> 
> 赞同：1
> 
> 时间：2012-05-07T12:17:05.153
> 
> 标签：c#, winforms, postsharp, visual-web-gui

如果我`TableAdapter`只有`Table Adapter`.

因此，例如，有这个类：

```
public class example 
{
   public User _user;
   public TableAdapter _adapter;

   someMethods();
   .
   .
   .
} 
```

我使用面向方面的框架 PostSharp。出于日志记录的目的，我有一个日志记录类，该类具有在调用 get_Adapter 方法时执行的方法。因此，在我的日志记录类中，我得到了`TableAdapter`作为参数。我最终需要的是 User 对象。

不幸的是，我无法更改我需要获得的课程设计中的任何内容，所以我只有这个`TableAdapter`。我的日志记录类看起来像这样（简化）：

```
public class logger
{
   public override void OnExit(MethodExecutionArgs args)
   {
      TableAdapter = (TableAdapter)args.Instance;

      //here I need the example object in order to get the current user object
   }
} 
```

有没有办法做到这一点？反射，也许？任何事物？

提前感谢您的帮助。

哦，顺便说一下，我使用 C# 和 WinForms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:55:00.127

就 postsharp 而言，如果没有某种类型的中介，例如附加方面或注入 tableadapter 实例（对其主机类的引用），您将无法获得它。

您可以尝试遍历堆栈并尝试以这种方式获得它。

# drupal-6 - Drupal 6 Form-API 设置回复地址

> ID：10481937
> 
> 赞同：1
> 
> 时间：2012-05-07T12:17:33.850
> 
> 标签：drupal-6, drupal-fapi, form-api

我在 Drupal 6 中使用 Form API 编写了一个表单。其他一切都很好，但是我可以使用 From 值编写一个标头 Reply-to 而不是 drupal_mail 吗？

我尝试将其放入模块内的常规 hook_mail 函数中：

```
 $message['Reply-to'] = $my_email; //$my_email had been previously configured to be $form_state['values']['info']['email'] 
```

有没有一种非hacky的方法来做到这一点？我们有一个由系统管理员控制的多站点安装，所以我无法进入核心更改内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:41:01.623

发件人地址是 drupal_mail 函数的参数： drupal_mail($module, $key, $to, $language, $params = array(), $from = NULL, $send = TRUE) 我还建议使用 mimemail一些附加功能的模块：http: [//drupal.org/project/mimemail](http://drupal.org/project/mimemail)

# extjs - 没有互联网连接时如何提醒用户

> ID：10481939
> 
> 赞同：6
> 
> 时间：2012-05-07T12:17:41.393
> 
> 标签：extjs, cordova, sencha-touch, sencha-touch-2

我需要在以下情况下提醒用户；

1.  请求超时
2.  没有网络连接
3.  无法访问服务器

这是代码；如何在发生以下情况时捕获并提醒用户？

```
failure: function (response) {
    var text = response.responseText;
    console.log("FAILED");
},success: function (response) {
    var text = response.responseText;
    console.log("SUCCESS");
} 
```

我尝试了以下代码来检查互联网是否可以访问，但它不起作用

```
var networkState = navigator.network.connection.type
    alert(states[networkState]);
    if (networkState == Connection.NONE){
        alert('No internet ');
    }; 
```

**更新 ****

我在 index.html 中添加了以下内容，但是，当我禁用 WIFI 时，我看不到警报弹出。

```
<script>
function onDeviceReady() {
    document.addEventListener("offline", function() {
        alert("No internet connection");
    }, false);
}
</script> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T14:39:58.983

最好的办法是收听“[离线](http://docs.phonegap.com/en/1.7.0/cordova_events_events.md.html#offline)”事件。当您收到离线事件时，您可以警告您的用户并采取任何必要的步骤来保存数据等。

例如，您的“设备就绪”回调：

```
document.addEventListener("offline", function() {
    alert("No internet connection");
}, false); 
```

此代码应该适用于所有版本的 PhoneGap。至少从 1.0 版本开始就已经存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T17:40:03.720

正如西蒙所说，你可以使用

```
document.addEventListener("offline", youCallbackFn, false); 
```

或者您可以询问布尔属性

```
navigator.onLine 
```

（应该返回真或假）

但是，此技术会告诉您设备是否已连接。需要注意的是，设备可以连接到 WiFi，但路由器可能处于离线状态。在这种情况下，请使用轮询机制，例如及时`Ext.Ajax.request`超时。超时过期 = 离线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T06:32:22.397

您可以在应用程序的 app.js 中添加“Ext.device.Connection”。并使用代码检查您的设备是在线还是离线：

```
if (Ext.device.Connection.isOnline()) {
         alert('Connected to internet');
      }
      else{
         alert('You are not connected to internet');
      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T12:32:22.223

您可以使用[PhoneGap 的 NETWORK API](http://docs.phonegap.com/en/0.9.6/phonegap_network_network.md.html)

> 网络对象可以访问设备的蜂窝和 wifi 连接信息。

您可以通过以下方式对其进行测试，

```
 function onDeviceReady() {
        navigator.network.isReachable("phonegap.com", reachableCallback, {});
    }

 // Check network status
 //
 function reachableCallback(reachability) {
     // There is no consistency on the format of reachability
     var networkState = reachability.code || reachability;
     var states = {};
     states[NetworkStatus.NOT_REACHABLE]  = 'No network connection';
     states[NetworkStatus.REACHABLE_VIA_CARRIER_DATA_NETWORK] = 'Carrier data connection';
     states[NetworkStatus.REACHABLE_VIA_WIFI_NETWORK] = 'WiFi connection';

     alert('Connection type: ' + states[networkState]);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T08:09:34.980

只需将其嵌入您的标签中

```
<body onoffline="alert('PLEASE CHECK YOUR INTERNET SETTING');"> 
```

# c# - 对象级的 PropertyGrid 只读属性

> ID：10481940
> 
> 赞同：8
> 
> 时间：2012-05-07T12:17:44.623
> 
> 标签：c#, .net, propertygrid, propertydescriptor, readonly-attribute

我想在我的`PropertyGrid`. 该类如下所示：

```
public class Parameter
{
    [Description("the name")]
    public string Name { get; set; }

    [Description("the value"), ReadOnly(true)]
    public string Value { get; set; }

    [Description("the description")]
    public string Description { get; set; }
} 
```

我有很多该类的实例`TreeView`。当我在其中选择其中一个时`TreeView`，属性会`PropertyGrid`按预期显示。到目前为止一切顺利，但我想通过以下方式自定义此行为：

对于每个单独的实例，我希望能够防止用户修改特定属性。通过`ReadOnly(true)`在我的班级中设置（如您在上面的示例中所见），所有`Value`属性都将在*class-level*上禁用。

经过一番研究，我发现了以下解决方案，它使我有机会在运行时启用/禁用特定属性：

```
PropertyDescriptor descriptor = TypeDescriptor.GetProperties(this)["Value"];

ReadOnlyAttribute attr = 
        (ReadOnlyAttribute)descriptor.Attributes[typeof(ReadOnlyAttribute)];

FieldInfo isReadOnly = attr.GetType().GetField(
        "isReadOnly", BindingFlags.NonPublic | BindingFlags.Instance);

isReadOnly.SetValue(attr, false); 
```

这种方法工作得很好，但不幸的是也仅限于类级别。这意味着如果我将`Value`'s设置`isReadOnly`为`false`，我的*所有*`Parameter`-objects 都具有`Value`可写属性。但我只希望在那个特定的对象上（因此是*object-level*）。我真的不想为读/写和只读属性创建单独的类。

由于我的想法不多了，非常感谢您的帮助:)

提前致谢！

编辑：我需要将只读属性显示为灰色，以便用户可以看到不允许或无法编辑它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:49:15.880

**编辑**：链接的文章已被删除（我希望只是暂时的）。[您可以在How to add property-level Attribute to the TypeDescriptor at runtime?](https://stackoverflow.com/questions/12143650/how-to-add-property-level-attribute-to-the-typedescriptor-at-runtime)的答案中找到一个可行的替代方案？. 基本上，您必须`ReadOnlyAttribute`通过 a`TypeDescriptor`为该属性添加（在运行时）。

* * *

看看[这篇关于 CodeProject 的旧但不错的文章](http://www.codeproject.com/Articles/7852/PropertyGrid-utilities)，它包含很多有用的*工具*。`PropertyGrid`

基本上，您提供一个类或一个委托，用于获取您的属性的属性。因为它将被调用传递您想要获取属性的对象的实例，所以您将能够返回（或不返回）`ReadOnlyAttribute`每个对象的基础。很快：将 a`PropertyAttributesProviderAttribute`应用于您的属性，编写您自己的提供程序并`PropertyAttributes`根据对象本身（而不是类）替换集合中的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:47:22.177

您可以使用自定义类型描述符包装对象，但我认为这将是矫枉过正，因为您必须创建一个新的类型描述符派生类。

因此，最简单的解决方案是设置一个标志，例如：

```
public class Parameter 
{ 
    private string thevalue;

    [Browsable(false)]
    public bool CanEditValue { get; set; }

    [Description("the name")] 
    public string Name { get; set; } 

    [Description("the description")] 
    public string Description { get; set; }

    [Description("the value"), ReadOnly(true)] 
    public string Value { 
        get { return this.thevalue; }
        set { if (this.CanEditValue) this.thevalue = value; } 
    }
} 
```

# html - 页脚自动调整css大小

> ID：10481943
> 
> 赞同：1
> 
> 时间：2012-05-07T12:17:59.303
> 
> 标签：html, css, width, footer

我目前有以下问题：一旦我点击产品，页脚宽度就会变小。现场示例：（小页脚:) [http://osolemio.nl/serdar/index.php?route=product/product&path=59&product_id=97](http://osolemio.nl/serdar/index.php?route=product/product&path=59&product_id=97)

（应该如何：） [http://osolemio.nl/serdar/index.php](http://osolemio.nl/serdar/index.php)

我通过编辑css、宽度 100% 等尝试了几种方法，但没有任何效果。有人看看有什么问题吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:23:02.013

这是因为您在产品页面中的页脚在#content 内部呈现，而在主索引页面中它在外部。

您要么忘记关闭任何 div，要么来自 CMS 的代码搞砸了您的标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:23:49.180

在产品页面中有一个不会关闭的 div（没有`</div>`）。找出并添加`</div>`. 它在`<div class="product-info">`元素内部

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:24:24.643

`<div id="content">`没有正确关闭。它必须先关闭`<div id="footer">`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:21:18.537

将`#footer`元素从元素中取出，紧跟`#content`在*元素之后*`#content`。

# php - Ajax 检查用户名是否存在

> ID：10481946
> 
> 赞同：0
> 
> 时间：2012-05-07T12:18:04.503
> 
> 标签：php, javascript, html, ajax

我无法让我的代码正常工作。当用户键入用户名时，它会检查数据库以查看它是否存在，如果它确实将其设置`<P id="checkusername">`为“用户名采用”。如果没有，则将其设置为“未采取”。我不明白为什么我的代码不起作用。

1-register.html

```
<html>
  <body>
    <CENTER>
      <form name="register" action="register.php" method="post">
        Username: <input type="text" name="username" onkeyup="checkUsername(this.value)" />
        <P id="checkusername">checker</P> 
        <input type="submit" value="Login" />      
      </form>
    </CENTER>

    <script type="text/javascript">
      function checkUsername(){
        var xmlhttp;
        var username=document.forms["register"]["username"].value;
        if(username.length==0){
          document.getElementById("checkusername").innerHTML="Empty";
          return;
        }
        if(window.XMLHttpRequest){
          xmlhttp=new XMLHttpRequest();
        }else{
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        var url = "login.php";
        var params = "header=checkusername&username="+username+"&password="";
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.setRequestHeader("Content-length", params.length);
        xmlhttp.setRequestHeader("Connection", "close");

        xmlhttp.onreadystatechange = function() {//Call a function when the state changes.
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
          document.getElementById("checkusername").innerHTML=xmlhttp.responseText;
    }
      }
      xmlhttp.send(params);
    }
    </script>
  </body>
</html> 
```

2-register.php

```
<?php
  $header = $_POST["header"];
  if(header=="checkusername"){
    checkusername($_POST["username"]);
  }else{
    echo "No match: " . $header;
  }

  function connection(){
    $con = mysql_connect(URL, username, password);
    if(!$con){
      die('Could not connect: ' . mysql_error());
    }
    return $con;
  }
  function checkusername($username){
    $con = connection();
    mysql_select_db(database, $con);
    $result = mysql_query("SELECT * FROM users WHERE username = \"" . $username . "\";");
    while($row = mysql_fetch_array($result)){
      if(($row['username'] == $username)){
        echo "Username Taken.<br/>";
        return;
      }
    }
    echo "Not Taken.";
  }
  mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:39:39.310

阅读此博客[http://papermashup.com/jquery-php-mysql-username-availability-checker/](http://papermashup.com/jquery-php-mysql-username-availability-checker/)

# java - 谷歌集合 - 来自 collections.filter 的可修改迭代器？

> ID：10481948
> 
> 赞同：3
> 
> 时间：2012-05-07T12:18:09.967
> 
> 标签：java, guava

从 Collections2.filter 返回的集合是不可修改的，它的迭代器也是如此。有没有类似的东西可以返回我过滤的集合实时视图，但带有可修改的迭代器？我需要`remove()`在迭代器上使用方法。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T12:29:30.810

怎么样`new ArrayList(Collections2.filter(...))`？如果您出于某种原因坚持使用过滤器。

顺便说一句，`Collections2.filter`不是不可修改的。它是只允许`Predicate`逻辑元素的集合。

# python - Django setting.py 错误

> ID：10481961
> 
> 赞同：1
> 
> 时间：2012-05-07T12:19:12.610
> 
> 标签：python, mysql, django, orm

我有以下代码和以下设置。但我的设置总是出错...... MySQL 版本是 5，Django 是最后一个版本。蟒蛇 3.7

```
#!/usr/bin/env python
import os
import sys
sys.path.append("/home/test")

if __name__ == "__main__":
     os.environ.setdefault("DJANGO_SETTINGS_MODULE", "standAlone.myScript")
     from django.core.management import execute_from_command_line
     execute_from_command_line(sys.argv) 
```

这是我的 myScript：

```
# settings.py
from django.conf import settings

#settings.configure(
    DATABASE_ENGINE    = " ",
    DATABASE_NAME      = " ",
    DATABASE_USER      = " ",
    DATABASE_PASSWORD  = " ",
    DATABASE_HOST      = " ",
    DATABASE_PORT      = " ",
   # INSTALLED_APPS     = ("myApp")
)

from django.db import models
from myApp.models import * 
```

这是我的settings.py：

```
DATABASE_ENGINE    = 'django.db.backends.mysql'
DATABASE_NAME      = 'DATABASE_NAME'
DATABASE_USER      = '****'
DATABASE_PASSWORD  = '****'
DATABASE_HOST      = '127.0.0.1'
DATABASE_PORT      = '3306' 
```

我有以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/test/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/test/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/test/django/core/management/__init__.py", line 252, in fetch_command
    app_name = get_commands()[subcommand]
  File "/home/test/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/home/test/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/home/test/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/home/test/django/conf/__init__.py", line 93, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "/home/test/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/test/standAlone/myScript.py", line 6
    DATABASE_ENGINE    = "django.db.backends.mysql",
    ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:35:17.477

在 myScript.py 的第 5 行中，您有一个`#`注释行。然后，我认为第 6`DATABASE_ENGINE = " ",`行将是一个语法错误（尽管回溯似乎不包括这一点）。

还有其他问题。导入内容的方式将导致 settings.py 数据库设置被 myScript.py 中第 5 行以后的空值覆盖。除非这是您想要的，否则执行此操作的正确方法（在 myScript.py 中）是：

```
# settings.py
from django.conf import settings

from django.db import models
from myApp.models import * 
```

也就是说，在 settings.py 中指定设置，不要在 myScript.py 中覆盖它们。

如果您出于某种原因确实需要覆盖设置，那么只需删除第`#`5 行，事情可能会奏效。

下一次，请尝试自己解决语法错误，它会比发布到堆栈溢出快得多。

# jquery - zIndex IE6/IE7 使用 jQuery 修复？

> ID：10481964
> 
> 赞同：0
> 
> 时间：2012-05-07T12:19:18.540
> 
> 标签：jquery, css

我试图编写一个弹出窗口，但在 IE6 和 IE7 中出于某种原因在灰色叠加层上使用 z-index 时遇到了一些问题。

有没有办法在 IE6/IE7 中使用 jQuery 修复 z-index 错误，或者有其他方法吗？

请检查 jsfiddler [http://jsfiddle.net/NrxbC/5/](http://jsfiddle.net/NrxbC/5/)

任何帮助深表感谢。

最好的问候约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:34:02.417

`IE7`你可以解决在fadeIn之前暂时删除属性`filter`，然后稍后重新应用

```
$(el).css("filter", "").fadeIn(200, function () {
    $(el).css("display","inline-block;").css("filter", "alpha(opacity=65)");
}); 
```

见[http://jsfiddle.net/NrxbC/11/](http://jsfiddle.net/NrxbC/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:56:55.477

为什么不使用诸如 colorbox、fancybox 或 lightbox 之类的开源软件……
（我暂时无法发表评论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:32:27.830

在父 div 中为 z-index 设置更高的值...例如，

```
<div id="parent" style="z-index:2002">
<div id="child" style="z-index:2000">// The actual div which needs the z-index
</div>
</div> 
```

另请参阅[此页面](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)，

它可能看起来很傻......但它确实有效......

# html - 提交按钮中间的半透明三角形

> ID：10481974
> 
> 赞同：1
> 
> 时间：2012-05-07T12:20:06.900
> 
> 标签：html, forms, css, geometry

我试图让我的表单上的提交按钮看起来像这样： http: [//nulaena.si/temp/triangle.jpg](http://nulaena.si/temp/triangle.jpg)（中间的半透明三角形）。

这就是我目前所拥有的：http: [//jsfiddle.net/ptinca/UJUAT/3/](http://jsfiddle.net/ptinca/UJUAT/3/)

仅使用 CSS 是否可行？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:37:41.953

使用透明PNG图像作为提交按钮的背景图像应该可以工作。

```
background: url(subscribe.png) transparent no-repeat; 
```

**编辑：**

为了澄清，图像当然应该有橙色背景，里面有三角形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:00:20.533

有一种非常简单的方法可以做到这一点，甚至不需要 CSS3，而只需要使用 css2 伪类。需要注意的重要更改是您不能在输入等内联元素上应用伪类，因此我不得不将您的输入提交按钮更改为按钮元素

这是附加代码：

```
html:
<form>
<input type="text" name="email" value="enter your email address" class="besedilo" />
<button type="submit" name="subscribe" value="subscribe" class="submit">Subscribe</button>
</form>

css:
button { position: relative; }
button:after {
content: '';
position: absolute;
top: 14px; right: 17px;
height: 0; width: 0;
border-top: solid 6px transparent;
border-left: solid 6px #fff;
border-bottom: solid 6px transparent;
} 
```

# javascript - html页面'脚本标签'的Javascript变量

> ID：10481975
> 
> 赞同：0
> 
> 时间：2012-05-07T12:20:09.557
> 
> 标签：javascript, html, variables

有没有可能，如果一个人有一个像这样的javascript变量：

```
var myVariable = "alert('BAM! It works!');" 
```

将其发送到包含脚本标记的 html 页面，换句话说，如下所示： `<script id="theScriptTag"></script>`

通过“发送”，我的意思是在 Javascript 文件中是这样的：

```
getElementById("theScriptTag").innerHTML = myVariable; 
```

现在也许人们通常不会这样做。如果有另一种方法可以将 Javascript 变量添加到 HTML 页面，请不要犹豫。我很难解释**为什么**我想这样做，只是我**需**要这样做。

提前致谢！

**编辑...**

从所有评论中，我可以看出这是一些严重的不良做法。让我在这里为您提供概览和“大图”……在同一个 HTML 页面上，有一个表单和一个 div。现在，在用户填写表单并提交后，它会转到服务器并根据用户选择的变量生成“自定义 javascript”。然后，此自定义 javascript 旨在返回到客户端并执行。当它执行时创建/填充一个 div 元素，然后包含一个谷歌图表表（因此需要生成服务器端）。需要执行的JS如下所示：

```
var sendAttemptsChartTableData, sendAttemptsChartTable; 
google.load('visualization', '1', {packages:['table']}) 
 google.setOnLoadCallback(drawTable); 
 function drawTable() { 
sendAttemptsChartTableData = new google.visualization.DataTable();  
sendAttemptsChartTableData.addColumn('string','smsGuid')  
sendAttemptsChartTableData.addColumn('string','attemptNo')  
sendAttemptsChartTableData.addColumn('string','response')  
sendAttemptsChartTableData.addColumn('string','error')  
sendAttemptsChartTableData.addRows(1)  
sendAttemptsChartTableData.setCell(0,0,'092A49AA-E2EF-46D3-A83E-0932B17B649A')  
sendAttemptsChartTableData.setCell(0,1,'1')  
sendAttemptsChartTableData.setCell(0,2,'<aatsms><submitresult action="enqueued"     key="2066317199" result="1" number="0833756610"/><submitresult action="enqueued" key="2066317200" result="1" number="0833756610"/><submitresult action="enqueued" key="2066317201" result="1" number="0833756610"/><submitresult action="enqueued" key="2066317202" result="1" number="0833756610"/></aatsms>')  
sendAttemptsChartTableData.setCell(0,3,'')  
sendAttemptsChartTable = new  google.visualization.Table(document.getElementById('sendAttemptsTable')); 
var view = new google.visualization.DataView(sendAttemptsChartTableData);   
sendAttemptsChartTable.draw(view, {showRowNumber: true, allowHtml:false}); 
google.visualization.events.addListener(sendAttemptsChartTable, 'select', smsSearchHandler); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:45:30.810

根据您的编辑，我了解您的表单汇总会导致自定义脚本。类似`JSONP`的解决方案会起作用吗？基本上，您可以在当前文档中创建一个脚本标记，将其源指向处理表单并返回代码的服务器端脚本。

一个基本的例子：

```
function getScript(){
  /**process form, generate params**/
  var nwScript = document.createElement('script');
  nwScript.src = '/myscriptsrc/somescript.php?'+[generated parameters];
  document.body.appendChild(nwScript);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:23:37.773

如果您的目标是执行字符串中包含的 javascript 代码，您可以使用以下内容：

```
var myVariable = "alert('BAM! It works!');";
eval(myVariable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:25:20.423

你想要做的基本上是这样的：

```
var myVariable = "alert('BAM! It works!');";
eval(myVariable); 
```

`eval`获取您提供的字符串并“评估”内容 - 它执行您在字符串中提供的 javascript 内容。通常，您希望通过用户的输入来执行此操作。

但这被认为是坏习惯，因为：

1.  它很慢
2.  这是不安全的

通常你可以走另一种方式，所以你不需要使用`eval`. 在大多数情况下，这更清洁、更快、更安全。

也许您可以说出您要达到的目标，然后我们可以找到更好的解决方案。

# excel - 在excel公式中定义变量？

> ID：10481978
> 
> 赞同：0
> 
> 时间：2012-05-07T12:20:30.300
> 
> 标签：excel, variables, formula

我有一个简单的表格数据，例如：

```
date     | Jenna | Tom | Robin
01/01/12    2       5       8
02/01/12    3       4       7 
```

（日期栏从一年的第一天开始，一直到明年。）

我有一个公式得到最小值。和最大。一月的值（例如 Jenna）。

我必须每个月更改行号才能获得正确的结果。

我是否可以在两个单元格中定义变量并在该公式中使用它们而不使用 VBA。例如;

我将在**H1 和 H2**单元格中放置两个值，分别为**28 和 58**。我会将 E1 定义为开始，将 E2 定义为结束。并写下这个公式：

```
=min(Cstart:Cend)
=max(Cstart:Cend)
=average(Cstart:Cend) 
```

**第一个公式意味着获得C28 和 C58**之间的最小值。

这样我就不必在页面上手动更改每个公式。我将只更改 2 个单元格的值，这就足够了。

我希望，我已经解释过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:12:52.943

当然。您必须使用该`INDIRECT()`功能。 `INDIRECT`将字符串转换为范围引用。

```
=MIN(INDIRECT("C" & $H$1 &":C" & $H$2)) 
```

# c++ - 二叉树的深拷贝构造函数

> ID：10481982
> 
> 赞同：5
> 
> 时间：2012-05-07T12:20:40.710
> 
> 标签：c++, binary-tree, copy-constructor, deep-copy, shallow-copy

我正在尝试在 C++ 中创建我的二叉树数据结构的深层副本。问题是我使用的代码似乎只给了我一个浅拷贝（这似乎导致我的解构器出现问题）。

下面的代码是我的二叉树复制构造函数：

```
BinaryTreeStorage::BinaryTreeStorage(const BinaryTreeStorage &copytree):root(NULL)
{
    root = copytree.root;
    copyTree(root);
}

BinaryTreeStorage::node* BinaryTreeStorage::copyTree(node* other)
{
    //if node is empty (at bottom of binary tree)
    /*
        This creates a shallow copy which in turn causes a problem 
        with the deconstructor, could not work out how to create a 
        deep copy.
    */
    if (other == NULL)
    {
        return NULL;
    }

    node* newNode = new node;

    if (other ->nodeValue == "")
    {
        newNode ->nodeValue = "";
    }

    newNode->left = copyTree(other->left);
    newNode->right = copyTree(other->right); 

    return newNode;
} 
```

任何帮助，将不胜感激。谢谢

这是引发内存异常的解构函数（我相信这是因为我在上面做的浅拷贝）

```
BinaryTreeStorage::~BinaryTreeStorage(void)
{
    try
    {
        destroy_tree();//Call the destroy tree method
        delete root;//delete final node
    }
    catch(int &error)
    {
        cout << "Error Message : " << error << endl;
    }
}
void BinaryTreeStorage::destroy_tree()
{
    destroy_tree(root);
}
void BinaryTreeStorage::destroy_tree(node *leaf)
{
  if(leaf!=NULL)
  {
    //Recursively work way to bottom node 
    destroy_tree(leaf->left);
    destroy_tree(leaf->right);
    //delete node
    delete leaf;
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:22:21.177

您没有执行根节点的深层副本，仅执行其子节点。

不应该是：

```
root = copyTree(copytree.root); 
```

?

编辑：**此外**，您破坏了`root`两次：

```
destroy_tree();//Call the destroy tree method

//once here
//remove this line
delete root;//delete final node 
```

和

```
if(leaf!=NULL)
{
   //Recursively work way to bottom node 
   destroy_tree(leaf->left);
   destroy_tree(leaf->right);

   //one more time here
   delete leaf;
} 
```

**如果您只执行其中一项修复，问题将无法解决。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T10:56:40.890

实际上，我认为我们可以直接使用复制构造函数递归地深度复制树。假设类定义如下：

```
class TreeNode {
public:
  TreeNode() : value(), count(0), left(nullptr), right(nullptr) {}
  TreeNode(const TreeNode &);

  ~TreeNode();

  TreeNode &operator=(const TreeNode &);

  // Other members...

private:
  std::string value;
  int count;
  TreeNode *left;
  TreeNode *right;
  // Note that the valid state for the `left` and `right` pointer is either
  // `nullptr` or a subtree node. So that we must check these pointers every
  // time before dereferencing them.
}; 
```

然后复制构造函数是

```
TreeNode::TreeNode(const TreeNode &n)
    : value(n.value), count(n.count), left(nullptr), right(nullptr) {
  if (n.left)
    left = new TreeNode(*n.left);  // recursively call copy constructor
  if (n.right)
    right = new TreeNode(*n.right);  // recursively call copy constructor
} 
```

递归将在叶节点处停止，因为它的两个孩子都是`nullptr`.

析构函数也是如此。

```
TreeNode::~TreeNode() {
  delete left;  // recursively call destructor on left subtree node
  delete right;  // recursively call destructor on right subtree node
} 
```

当`left`或`right`is`nullptr`时，`delete`什么都不做，这样递归就会停止。

[**你可以从这里**](https://github.com/jaege/Cpp-Primer-5th-Exercises/blob/master/ch13/13.28.cpp)看到完整的代码。

# android - 从 SD 卡上预存的 db 文件创建数据库

> ID：10481983
> 
> 赞同：0
> 
> 时间：2012-05-07T12:20:41.197
> 
> 标签：android, database, sqlite, sd-card

我要导入的数据库超过 5Mb。当我将 .db 放入资产文件夹时，我遇到了一些错误。因此，我将数据库拆分为较小的数据库文件并组装这些文件以创建数据库。那么有什么方法可以从 sdcard 导入数据库并开始使用 db 而无需拆分和组装？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:46:03.680

是的，有：将数据库文件放在sdcard里面然后在一个类里面创建一个方法，方法是这样的：

```
public class DB_Path {
    public final SQLiteDatabase getOrders() {
            File dbfile = new File("/sdcard/TheDataBaseFile");
            SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
                 return db;
        }
}
----------------------- 
```

初始化像

```
public DB_Path dbp = new DB_Path();
    public SQLiteDatabase db = dbp.getOrders(); 
```

之后，您可以使用 db 调用游标。

```
 Cursor cur = db.rawQuery("the sql query",null); 
```

# ruby-on-rails - MongoDB Mongoid 从数组中删除值

> ID：10481985
> 
> 赞同：0
> 
> 时间：2012-05-07T12:20:54.513
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有这样的 mongodb 文档，并想从 resource_well 中的未发布数组中删除一个元素

```
{
       "_id": ObjectId("4fa77c808d0a6c287d00000a"),       
       "production_status": "Unscheduled",
       "projected_air_date": null,
       "published": false,
       "resource_well": {
         "published": [

        ],
         "unpublished": {
           "0": ObjectId("4fa795038d0a6c327e00000e"),
           "1": ObjectId("4fa795318d0a6c327e00000f"),
           "2": ObjectId("4fa795508d0a6c327e000011"),
           "3": ObjectId("4fa796f48d0a6c327e000013")
        }
      },
       "segment_status": "Draft",
} 
```

控制器中的代码

```
segment = Segment.find(params[:segment_id])
# segment.resource_well[params['resource_well_type']].class => Array   
# segment.resource_well[params['resource_well_type']].inspect => [BSON::ObjectId('4fa795038d0a6c327e00000e'), BSON::ObjectId('4fa795318d0a6c327e00000f'), BSON::ObjectId('4fa795508d0a6c327e000011'), BSON::ObjectId('4fa796f48d0a6c327e000013')]  
segment.resource_well[params['resource_well_type']].delete(params[:asset_ids])
segment.save 
```

无法删除元素形式的数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T21:24:43.107

您的 ODM（或 ORM）为您提供关联，以便您可以利用 ODM 为您管理链接。因此，您应该使用关联，否则您将面临上吊的风险。只要确保正确指定关系，并使用关联命名的生成方法及其方法，例如resource_well.unpublished <<，resource_well.unpublished.delete。以下模型和测试对我有用。不便之处在于关联上的 delete 方法采用对象，例如 other.delete(object) 而不是字符串或条件，因此如果您以字符串开头，则必须提供对象才能删除它。请注意， other.delete_all(conditions) 或 other.where(conditions).delete_all 会删除实际文档以及关联，这不是您要查找的内容。反正，

楷模

```
class Segment
  include Mongoid::Document
  field :production_status, type: String
  field :projected_air_date, type: Date
  field :published, type: Boolean
  field :segment_status, type: String
  embeds_one :resource_well
end

class ResourceWell
  include Mongoid::Document
  embedded_in :segment
  has_and_belongs_to_many :published, :class_name => 'Resource'
  has_and_belongs_to_many :unpublished, :class_name => 'Resource'
end

class Resource
  include Mongoid::Document
  field :name, type: String
end 
```

测试

```
require 'test_helper'

class Object
  def to_pretty_json
     JSON.pretty_generate(JSON.parse(self.to_json))
  end
end

class SegmentTest < ActiveSupport::TestCase
  def setup
    Segment.delete_all
  end

  test 'resource_well unpublished delete' do
    res = (0..3).collect{|i| Resource.create(name: "resource #{i}")}
    seg = Segment.create(
        production_status: 'Unscheduled',
        projected_air_date: nil,
        published: false,
        resource_well: ResourceWell.new(unpublished: res[0..2]),
        segment_status: 'Draft')
    seg.resource_well.unpublished << res[3] #just an append example
    puts seg.to_pretty_json

    id = res[0]['_id'].to_s
    puts "id: #{id}"
    resource_obj = Resource.find(id)
    puts "resource: #{resource_obj.inspect}"
    Rails.logger.debug("delete: #{resource_obj.inspect}")
    seg.resource_well.unpublished.delete(resource_obj)
    puts Segment.find(:all).to_pretty_json
  end
end 
```

结果

```
# Running tests:

{
  "_id": "4fa839197f11ba80a9000006",
  "production_status": "Unscheduled",
  "projected_air_date": null,
  "published": false,
  "resource_well": {
    "_id": "4fa839197f11ba80a9000005",
    "published_ids": [

    ],
    "unpublished_ids": [
      "4fa839197f11ba80a9000001",
      "4fa839197f11ba80a9000002",
      "4fa839197f11ba80a9000003",
      "4fa839197f11ba80a9000004"
    ]
  },
  "segment_status": "Draft"
}
id: 4fa839197f11ba80a9000001
resource: #<Resource _id: 4fa839197f11ba80a9000001, _type: nil, name: "resource 0">
[
  {
    "_id": "4fa839197f11ba80a9000006",
    "production_status": "Unscheduled",
    "projected_air_date": null,
    "published": false,
    "resource_well": {
      "_id": "4fa839197f11ba80a9000005",
      "published_ids": [

      ],
      "unpublished_ids": [
        "4fa839197f11ba80a9000002",
        "4fa839197f11ba80a9000003",
        "4fa839197f11ba80a9000004"
      ]
    },
    "segment_status": "Draft"
  }
]
.

Finished tests in 0.016026s, 62.3986 tests/s, 0.0000 assertions/s.

1 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:00:49.057

```
db.collection.update( 
  {_id : ObjectId("4fa77c808d0a6c287d00000a")}, 
  { $unset : { "resource_well.unpublished.1" : 1 }} 
); 
```

这将删除数组的元素 [1]。

您还可以阅读如何使用 mongoid 实现它：http: [//mongoid.org/docs/upgrading.html](http://mongoid.org/docs/upgrading.html)

# android - 如何将二维码转换为数字？

> ID：10481987
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:21:02.650
> 
> 标签：android

我已经通过这个网站[http://qrcode.kaywa.com/](http://qrcode.kaywa.com/)创建了二维码。我已经为“1”创建了二维码。我想读取并转换成数字。他们为二维码图像提供了一个网址。网址是[http://qrcode.kaywa.com/img.php?s=8&d=1](http://qrcode.kaywa.com/img.php?s=8&d=1) "alt="qrcode"。如何转换二维码使用 URL 编号。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:34:36.267

使用 Zxing 读取二维码。看看我在这个[问题](https://stackoverflow.com/questions/8708705/how-to-use-zxing-in-android/8708784#8708784)上的回答。它以字符串的形式给出输出。如果需要，您可以将其转换为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:24:46.017

您应该使用像 BeeTagg 这样的应用程序并用它扫描图片。这样你就可以破译图像。

# matplotlib - Matplotlib 轴具有两个比例共享原点

> ID：10481990
> 
> 赞同：34
> 
> 时间：2012-05-07T12:21:07.377
> 
> 标签：matplotlib, scale, axis

我需要两个在 Matplotlib 中覆盖两个具有不同 Y 轴刻度的数据集。数据包含正值和负值。我希望两个轴共享一个原点，但 Matplotlib 默认情况下不对齐两个刻度。

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = ax1.twinx()

ax1.bar(range(6), (2, -2, 1, 0, 0, 0))
ax2.plot(range(6), (0, 2, 8, -2, 0, 0))
plt.show() 
```

我想可以执行一些计算，`.get_ylim()`并且`.set_ylim()`两个对齐两个比例。有更简单的解决方案吗？

![上面示例的输出](../Images/0ff3a6f93ec5f8321874468171d6a0d3.png)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-07T12:56:14.667

使用 align_yaxis() 函数：

```
import numpy as np
import matplotlib.pyplot as plt

def align_yaxis(ax1, v1, ax2, v2):
    """adjust ax2 ylimit so that v2 in ax2 is aligned to v1 in ax1"""
    _, y1 = ax1.transData.transform((0, v1))
    _, y2 = ax2.transData.transform((0, v2))
    inv = ax2.transData.inverted()
    _, dy = inv.transform((0, 0)) - inv.transform((0, y1-y2))
    miny, maxy = ax2.get_ylim()
    ax2.set_ylim(miny+dy, maxy+dy)

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = ax1.twinx()

ax1.bar(range(6), (2, -2, 1, 0, 0, 0))
ax2.plot(range(6), (0, 2, 8, -2, 0, 0))

align_yaxis(ax1, 0, ax2, 0)
plt.show() 
```

![在此处输入图像描述](../Images/e4f29ae14e799dda4bfec7309a92cb11.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-10-19T23:55:45.843

为了确保保持 y 边界（因此没有数据点被移出图），并平衡两个 y 轴的调整，我对@HYRY 的回答做了一些补充：

```
def align_yaxis(ax1, v1, ax2, v2):
    """adjust ax2 ylimit so that v2 in ax2 is aligned to v1 in ax1"""
    _, y1 = ax1.transData.transform((0, v1))
    _, y2 = ax2.transData.transform((0, v2))
    adjust_yaxis(ax2,(y1-y2)/2,v2)
    adjust_yaxis(ax1,(y2-y1)/2,v1)

def adjust_yaxis(ax,ydif,v):
    """shift axis ax by ydiff, maintaining point v at the same location"""
    inv = ax.transData.inverted()
    _, dy = inv.transform((0, 0)) - inv.transform((0, ydif))
    miny, maxy = ax.get_ylim()
    miny, maxy = miny - v, maxy - v
    if -miny>maxy or (-miny==maxy and dy > 0):
        nminy = miny
        nmaxy = miny*(maxy+dy)/(miny+dy)
    else:
        nmaxy = maxy
        nminy = maxy*(miny+dy)/(maxy+dy)
    ax.set_ylim(nminy+v, nmaxy+v) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-12-21T09:58:03.060

在绘制以下两个点序列时，@drevicko 的回答对我来说失败了：

```
l1 = [0.03, -0.6, 1, 0.05]
l2 = [0.8,  0.9,  1,  1.1]
fig, ax1 = plt.subplots()
ax1.plot(l1)
ax2 = ax1.twinx()
ax2.plot(l2, color='r')
align_yaxis(ax1, 0, ax2, 0) 
```

[![在此处输入图像描述](../Images/6510673e87a7f9bd9fa03933e4088981.png)](https://i.stack.imgur.com/pPTEL.png)

...所以这是我的版本：

```
def align_yaxis(ax1, ax2):
    """Align zeros of the two axes, zooming them out by same ratio"""
    axes = (ax1, ax2)
    extrema = [ax.get_ylim() for ax in axes]
    tops = [extr[1] / (extr[1] - extr[0]) for extr in extrema]
    # Ensure that plots (intervals) are ordered bottom to top:
    if tops[0] > tops[1]:
        axes, extrema, tops = [list(reversed(l)) for l in (axes, extrema, tops)]

    # How much would the plot overflow if we kept current zoom levels?
    tot_span = tops[1] + 1 - tops[0]

    b_new_t = extrema[0][0] + tot_span * (extrema[0][1] - extrema[0][0])
    t_new_b = extrema[1][1] - tot_span * (extrema[1][1] - extrema[1][0])
    axes[0].set_ylim(extrema[0][0], b_new_t)
    axes[1].set_ylim(t_new_b, extrema[1][1]) 
```

原则上，对齐零（或其他提供的解决方案接受的其他值）有无限不同的可能性：无论您在 y 轴上放置零的任何位置，都可以缩放两个系列中的每一个以使其适合。我们只是选择这样的位置，使得在变换之后，两者覆盖相同高度的垂直间隔。或者换句话说，与非对齐图相比，我们将它们最小化为相同的因子。（这并不*意味着*0 位于图的一半：例如，如果一个图全为负数而另一个全为正数，则会发生这种情况。）

数字版本：

```
def align_yaxis_np(ax1, ax2):
    """Align zeros of the two axes, zooming them out by same ratio"""
    axes = np.array([ax1, ax2])
    extrema = np.array([ax.get_ylim() for ax in axes])
    tops = extrema[:,1] / (extrema[:,1] - extrema[:,0])
    # Ensure that plots (intervals) are ordered bottom to top:
    if tops[0] > tops[1]:
        axes, extrema, tops = [a[::-1] for a in (axes, extrema, tops)]

    # How much would the plot overflow if we kept current zoom levels?
    tot_span = tops[1] + 1 - tops[0]

    extrema[0,1] = extrema[0,0] + tot_span * (extrema[0,1] - extrema[0,0])
    extrema[1,0] = extrema[1,1] + tot_span * (extrema[1,0] - extrema[1,1])
    [axes[i].set_ylim(*extrema[i]) for i in range(2)] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-24T21:53:21.197

这里的其他答案似乎过于复杂，并不一定适用于所有场景（例如 ax1 都是负数，ax2 都是正数）。有两种简单的方法总是有效的：

1.  始终在两个 y 轴的图表中间放置 0
2.  有点花哨，有点保留了正负比，见下文

```
def align_yaxis(ax1, ax2):
    y_lims = numpy.array([ax.get_ylim() for ax in [ax1, ax2]])

    # force 0 to appear on both axes, comment if don't need
    y_lims[:, 0] = y_lims[:, 0].clip(None, 0)
    y_lims[:, 1] = y_lims[:, 1].clip(0, None)

    # normalize both axes
    y_mags = (y_lims[:,1] - y_lims[:,0]).reshape(len(y_lims),1)
    y_lims_normalized = y_lims / y_mags

    # find combined range
    y_new_lims_normalized = numpy.array([numpy.min(y_lims_normalized), numpy.max(y_lims_normalized)])

    # denormalize combined range to get new axes
    new_lim1, new_lim2 = y_new_lims_normalized * y_mags
    ax1.set_ylim(new_lim1)
    ax2.set_ylim(new_lim2) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-24T03:43:46.677

我已经从上面编写了一个解决方案，它将对齐任意数量的轴：

```
def align_yaxis_np(axes):
    """Align zeros of the two axes, zooming them out by same ratio"""
    axes = np.array(axes)
    extrema = np.array([ax.get_ylim() for ax in axes])

    # reset for divide by zero issues
    for i in range(len(extrema)):
        if np.isclose(extrema[i, 0], 0.0):
            extrema[i, 0] = -1
        if np.isclose(extrema[i, 1], 0.0):
            extrema[i, 1] = 1

    # upper and lower limits
    lowers = extrema[:, 0]
    uppers = extrema[:, 1]

    # if all pos or all neg, don't scale
    all_positive = False
    all_negative = False
    if lowers.min() > 0.0:
        all_positive = True

    if uppers.max() < 0.0:
        all_negative = True

    if all_negative or all_positive:
        # don't scale
        return

    # pick "most centered" axis
    res = abs(uppers+lowers)
    min_index = np.argmin(res)

    # scale positive or negative part
    multiplier1 = abs(uppers[min_index]/lowers[min_index])
    multiplier2 = abs(lowers[min_index]/uppers[min_index])

    for i in range(len(extrema)):
        # scale positive or negative part based on which induces valid
        if i != min_index:
            lower_change = extrema[i, 1] * -1*multiplier2
            upper_change = extrema[i, 0] * -1*multiplier1
            if upper_change < extrema[i, 1]:
                extrema[i, 0] = lower_change
            else:
                extrema[i, 1] = upper_change

        # bump by 10% for a margin
        extrema[i, 0] *= 1.1
        extrema[i, 1] *= 1.1

    # set axes limits
    [axes[i].set_ylim(*extrema[i]) for i in range(len(extrema))] 
```

4 个随机系列的示例（您可以在 4 组单独的 y 轴标签上看到离散范围）： [![对齐的轴](../Images/4162809be5d62a8e29ee952834e2ee04.png)](https://i.stack.imgur.com/bxI4N.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-02T13:31:08.380

[@Tim](https://stackoverflow.com/users/10957844/tim)的解决方案适用于两个以上的轴：

```
import numpy as np

def align_yaxis(axes): 
    y_lims = np.array([ax.get_ylim() for ax in axes])

    # force 0 to appear on all axes, comment if don't need
    y_lims[:, 0] = y_lims[:, 0].clip(None, 0)
    y_lims[:, 1] = y_lims[:, 1].clip(0, None)

    # normalize all axes
    y_mags = (y_lims[:,1] - y_lims[:,0]).reshape(len(y_lims),1)
    y_lims_normalized = y_lims / y_mags

    # find combined range
    y_new_lims_normalized = np.array([np.min(y_lims_normalized), np.max(y_lims_normalized)])

    # denormalize combined range to get new axes
    new_lims = y_new_lims_normalized * y_mags
    for i, ax in enumerate(axes):
        ax.set_ylim(new_lims[i]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-22T12:22:36.413

我需要对齐两个子图，但不需要对齐它们的零点。其他解决方案对我来说不太奏效。

我的程序的主要代码如下所示。子图未对齐。此外，我只更改`align_yaxis`功能并保持所有其他代码相同。

```
import matplotlib.pyplot as plt

def align_yaxis(ax1, v1, ax2, v2):
  return 0

x  = range(10)
y1 = [3.2, 1.3, -0.3, 0.4, 2.3, -0.9, 0.2, 0.1, 1.3, -3.4]
y2, s = [], 100
for i in y1:
    s *= 1 + i/100
    y2.append(s)

fig = plt.figure()
ax1 = fig.add_subplot()
ax2 = ax1.twinx()

ax1.axhline(y=0, color='k', linestyle='-', linewidth=0.5)
ax1.bar(x, y1, color='tab:blue')
ax2.plot(x, y2, color='tab:red')

fig.tight_layout()
align_yaxis(ax1, 0, ax2, 100)
plt.show() 
```

[未对齐子图的图片](https://i.stack.imgur.com/cwBuI.png)

使用@HYRY 的解决方案，我得到了对齐的子图，但第二个子图不在图中。你看不到它。

```
def align_yaxis(ax1, v1, ax2, v2):
    """adjust ax2 ylimit so that v2 in ax2 is aligned to v1 in ax1"""
    _, y1 = ax1.transData.transform((0, v1))
    _, y2 = ax2.transData.transform((0, v2))
    inv = ax2.transData.inverted()
    _, dy = inv.transform((0, 0)) - inv.transform((0, y1-y2))
    miny, maxy = ax2.get_ylim()
    ax2.set_ylim(miny+dy, maxy+dy) 
```

[没有第二个子图的图片](https://i.stack.imgur.com/D88mM.png)

使用@drevicko 的解决方案，我也得到了对齐的情节。但是现在第一个子图已经不在了，第一个 Y 轴很奇怪。

```
def align_yaxis(ax1, v1, ax2, v2):
    """adjust ax2 ylimit so that v2 in ax2 is aligned to v1 in ax1"""
    _, y1 = ax1.transData.transform((0, v1))
    _, y2 = ax2.transData.transform((0, v2))
    adjust_yaxis(ax2,(y1-y2)/2,v2)
    adjust_yaxis(ax1,(y2-y1)/2,v1)

def adjust_yaxis(ax,ydif,v):
    """shift axis ax by ydiff, maintaining point v at the same location"""
    inv = ax.transData.inverted()
    _, dy = inv.transform((0, 0)) - inv.transform((0, ydif))
    miny, maxy = ax.get_ylim()
    miny, maxy = miny - v, maxy - v
    if -miny>maxy or (-miny==maxy and dy > 0):
        nminy = miny
        nmaxy = miny*(maxy+dy)/(miny+dy)
    else:
        nmaxy = maxy
        nminy = maxy*(miny+dy)/(maxy+dy)
    ax.set_ylim(nminy+v, nmaxy+v) 
```

[没有第一个子图的图片](https://i.stack.imgur.com/CzPGe.png)

所以我稍微调整了@drevicko 的解决方案，得到了我想要的。

```
def align_yaxis(ax1, v1, ax2, v2):
    """adjust ax2 ylimit so that v2 in ax2 is aligned to v1 in ax1"""
    _, y1 = ax1.transData.transform((0, v1))
    _, y2 = ax2.transData.transform((0, v2))
    adjust_yaxis(ax1,(y2 - y1)/2,v1)
    adjust_yaxis(ax2,(y1 - y2)/2,v2)

def adjust_yaxis(ax,ydif,v):
    """shift axis ax by ydiff, maintaining point v at the same location"""
    inv = ax.transData.inverted()
    _, dy = inv.transform((0, 0)) - inv.transform((0, ydif))
    miny, maxy = ax.get_ylim()

    nminy = miny - v + dy - abs(dy)
    nmaxy = maxy - v + dy + abs(dy)
    ax.set_ylim(nminy+v, nmaxy+v) 
```

[我期望它们看起来的子图](https://i.stack.imgur.com/okLaE.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-16T01:56:03.527

这可能不是您要找的，但这帮助我将整数排列在两个不同的垂直轴上：

```
ax1.set_ylim(0,4000)
ax2.set_ylim(0,120)
ax2.set_yticks(np.linspace(ax2.get_yticks()[0], ax2.get_yticks()[-1], len(ax1.get_yticks()))) 
```

# search - 如何在休眠搜索中将多个单词索引为单个标记？

> ID：10481997
> 
> 赞同：1
> 
> 时间：2012-05-07T12:21:44.317
> 
> 标签：search, solr, lucene, tokenize

我在我的项目中使用带有 solr 的休眠搜索，我的一个用例需要对数据进行标记和索引，如下所示：

我的数据库字段之一是 varchar 并且具有值：New Road, Kings way（用逗号分隔）

我希望将 New Road and kings way 用作标记而不是 New, road, kings and way，这样当我搜索 blah blah blah new road blah blah 时，它将显示带有新道路的结果，如果搜索文本包含新书，新路的结果不会出现。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:38:20.617

[您可以使用http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)对该字段进行标记和搜索`solr.PatternTokenizerFactory`

# c++ - C++ 和 Fortran：从 C++ 访问 Fortran 公共块中的数组时出错

> ID：10481999
> 
> 赞同：2
> 
> 时间：2012-05-07T12:21:55.417
> 
> 标签：c++, fortran, integration, fortran-common-block

我正在尝试从 C++ 访问 Fortran 公共块结构中的数组。
我有一个包含 C++ 和 Fortran 的混合示例代码。

Fortran：

```
integer a(5),b  
common  /sample/ a,b  
a(1) = 1  
a(2) = 5  
a(3) = 10  
a(4) = 15  
a(5) = 20  
b = 25 
```

然后在 C++ 中：

```
extern "C"{  
    extern struct{  
        int *a,b;  
}sample_; 
```

在 C++ 中，如果我尝试打印值`sample_.b`：

```
printf("sample b:%d\n",sample_.b); 
```

我得到 a(2) 的值：`sample b:5`

如果我尝试打印任何其他数组-a 值，我只会遇到分段错误......

```
printf("sample_.a[1]=%d\n",(int)sample_.a[1]);  
printf("sample_.a[0]=%d\n",(int)sample_.a[0]); 
```

我做错了什么？¿任何想法¿？
我想，也许我也必须将数组“a”的长度传递给 C++，但如果是这样，我也不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T22:32:15.397

如果要在 C 和 Fortran 之间共享全局变量，最好的方法是使用模块变量和 Fortran ISO_C_Binding。公共块是遗物，除非是遗留代码的一部分，否则最好避免使用。使用 ISO_C_Binding 将使您的代码编译器和平台独立。gfortran 手册的“混合语言编程”一章的“可互操作全局变量”小节中有一个代码示例。这不是 gfortran 特有的，只是一些很好的文档。

继续使用 ISO_C_Binding，如果您使用它提供的 Fortran 类型，将确保您与 C 类型匹配。Fortran 等效于 C 的**int**是**C_INT**。gfortran 手册的“内部模块”一章中有一个列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:03:56.240

在我看来，您的 FORTRAN 数据实际上布局为

```
struct {
  int a[5];
  int b;
} 
```

你在一台机器上`sizeof(int) == sizeof(int*)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T12:36:15.750

我的 Fortran 有点（好吧，有点）生锈，但让我试一试。

`a`可能收到 VALUE 而不是指向它的指针。这会将其设置为`1`，这不是一个好的指针值。

`b`接收到数据块中的第二个值。您的 C++ 结构没有向编译器指示数据的实际格式是什么，因此它只会按照结构中给出的顺序无意识地将项目分配给结构。我会得到一个指向数据块的指针并手动拆卸它。

分配`a`给数据块的地址（作为`long int`指针，看起来像；您的里程可能会有所不同）和`b = a[5]`. 希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T08:19:13.707

谢谢大家的有用回答。按照您的建议，我终于意识到我的问题是什么。我认为我的错误是在 Fortran 中我有：

```
integer a(5),b  
common  /sample/ a,b 
```

`a(5)`具有固定大小，然后在 C++ 中：

```
extern "C"{  
    extern struct{  
        int *a,b;  
}sample_; 
```

`*a`没有大小，作为指针。因此，编译器将这种方式理解为`*int`指针而不是`a(5)`数组

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:43:17.833

对于正确的 C++/Fortran 代码，您至少应该使用 Fortran 2003。为旧的 Fortran 代码（甚至 Fortran 77）创建 Fortran 2003/2008 接口实际上非常简单。

这是一篇关于混合现代 Fortran 和 C++ 的帖子的链接：

[http://solarianprogrammer.com/2012/05/11/mixed-language-programming-cpp-11-fortran-2008/](http://solarianprogrammer.com/2012/05/11/mixed-language-programming-cpp-11-fortran-2008/)