# StackOverflow 问答 10467000-10467999

# ravendb - 复制、分片和一些一般指导

> ID：10467003
> 
> 赞同：0
> 
> 时间：2012-05-06T00:08:49.247
> 
> 标签：ravendb

首先是一些问题的背景。我以前从未使用过 ravedb，我正在为即将到来的项目评估它。该项目非常以文档为中心，到目前为止似乎非常适合我的“快速而肮脏”的测试项目。

该应用程序本身的数据很少，486 上的 SQLite 可能足以满足我们的数据库需求。不过它确实有很多大的图像数据，我们将使用 ravendb 来存储图像并作为图像缓存。所以这里有几个问题：

1.  每个文件可以由一个或多个部门使用。我们在每个文档上存储一个部门列表（整数）并对其进行查询。这是否被认为是最佳实践，还是应该将此信息包含在元数据中？

2.  我们将需要使用复制和分片。由于我们的数据很小，我正在考虑将所有数据复制到各种分片中，并且只对图像数据进行分片，这可能吗？

3.  是否可以将数据存储在多个分片中？如果一个文档可以通过分区 1,2 和 3 访问，并且我们的分片非常精细，我们希望将文档推送到用户将要访问的所有其他分片。

4.  分片与附件一样容易吗？

5.  我提到我们将存储缓存的图像数据（调整大小的图像等）。是否建议将其放入单独的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:27:59.260

Flukus，分片不适用于附件。您可以混合和匹配复制和分片，但通常我们将它们分开处理。一个数据库用于分片数据，一个数据库用于所有节点上的复制数据。

# android - 创建自定义选择列表，例如联系人

> ID：10467005
> 
> 赞同：0
> 
> 时间：2012-05-06T00:09:23.683
> 
> 标签：android, android-intent

我有一个从“互联网”检索到的“项目”表。这张表可能很大，我需要把它放在一个表格中。我最初是使用 scrollView 完成的，但是列表太长，并且“可能”会导致用户感到沮丧。

我查看了联系人选择器，这是一个标准 API，我想复制类似的东西。

我有一个显示“项目”列表的活动。我应该调用这个活动并从这里处理物品的挑选吗？如果有一个我应该继承而不是这样做的类，我正在寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:12:55.473

您是否尝试过创建[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html)？如果您还没有，您还应该尝试相应的教程（[Hello List View](http://developer.android.com/resources/tutorials/views/hello-listview.html)），也许还有这篇关于[在 List View 中提高性能的](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:04:17.310

我最终从表单中打开了 Items List 视图，并设置了 ItemClick 事件以将项目详细信息添加到 Intent 中并将其发回。另外，让我使用现有的表格:)

避免创建像内容提供者这样的东西，因为我不想与其他应用程序共享它

# android - 在我的 android 字典应用程序中实现拼写校正器

> ID：10467013
> 
> 赞同：-1
> 
> 时间：2012-05-06T00:10:20.867
> 
> 标签：android

我正在开发一个字典应用程序，我想在我的 android 字典应用程序中实现拼写校正器（如谷歌搜索引擎：“你的意思是……”）。我可以这样做吗？如何编码？任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:48:37.790

You could use an algorithm such as Levenshtein distance to calculate how off a word is to other words in a pre-defined wordlist, if there is no exact match in the word list, you can propose the one that is closest (and add a word to it if the user still selects his/hers version/spelling).

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

# iphone - ASIHttpRequest responseStatusCode = 200。但没有从服务器获得正确的 responseData

> ID：10467018
> 
> 赞同：2
> 
> 时间：2012-05-06T00:11:29.713
> 
> 标签：iphone, objective-c, xcode, http, asihttprequest

全部

这是一个**很少**发生的问题。事实上，我不得不花费大量时间来重现它，但无论如何它都在这里。

我正在使用 ASIHTTPRequest 从我的服务器获取一些数据。除了具有 responseStatusCode == 200 的那些之外，我会抛出任何错误。我的服务器返回一些消息。

我注意到的是，有时，根据我的无线连接（在笔记本电脑模拟器的使用情况下），需要身份验证的连接，ASIHttpRequest 返回 200 的响应，但 responseData 类似于以下内容，而不是来自我的服务器的消息

```
<HTML><HEAD><TITLE>Cisco Systems Inc. Web Authentication Redirect</TITLE><META http-equiv="Cache-control" content="no-cache"><META http-equiv="Pragma" content="no-cache"><META http-equiv="Expires" content="-1"><META http-equiv="refresh" content="1; URL=https://webauth-redirect.oracle.com/login.html?redirect=17.22.111.222/scripts_dummy/messagesx.php"></HEAD></HTML> 
```

它是否正确？如果未收到来自服务器的消息，则 responseStatusCode 不应为 200 以外的值

我该如何处理这种情况？检查 responseStatusCode == 200 后的意思似乎还不够好。这只是一个例子。在其他无线区域，打印出不同的垃圾。

**更新** 不确定这是否有任何作用，但我有

```
request.shouldUseRFC2616RedirectBehaviour = YES; // where request is ASIHTTPRequest 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:26:55.133

那不是`ASIHTTPRequest`你的客户代码的错。那是服务器期望客户端是 Web 浏览器并向其发送元刷新重定向（即，其中嵌入了重定向的 HTML 页面）而不是[HTTP 30x](http://en.wikipedia.org/wiki/HTTP_302)，它`ASIHTTP`会为您处理。

这是元刷新被滥用的一个很好的例子：它本来是用来刷新当前页面的，但人们开始使用它来将客户端发送到其他地方，而这正是 HTTP 30x 的设计初衷。谷歌搜索“元刷新与 301 重定向”会给你大量的博客文章来争论。

在您的情况下，除非您可以让您的服务器对非浏览器客户端表现得更友好，否则当响应代码为 200 时，您需要自己检查这种情况，解析重定向并自己重新发出请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:18:30.917

在考虑了一些之后，我想出了一个替代策略。内容类型将被保留，不应混淆。

您应该能够将内容类型用作您正在接收代理注入页面的标志。设置内容类型参数，然后让您的应用程序关闭该参数。任何没有参数的响应都是无效的。

```
$content_type = 'text/html; FooCorp-MyApp=true' 
```

顺便说一句：如果您不正确支持 HTML 处理，为什么要使用 text/html 的内容类型。元刷新应该是任何 HTML 引擎的一部分。如果您不需要 HTML，您可能需要考虑使用特定于数据的内容类型，例如 XML、YAML 或 JSON。

* * *

问题已经提出，“这有效吗？”

来自[RFC 2616：3.7 媒体类型](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7)

> 类型、子类型和参数属性名称不区分大小写。参数值可能区分大小写，也可能不区分大小写，具体取决于参数名称的语义。线性空白 (LWS) 不得在类型和子类型之间使用，也不得在属性与其值之间使用。参数的存在与否对于媒体类型的处理可能很重要，这取决于它在媒体类型注册表中的定义。
> 
> 请注意，一些较旧的 HTTP 应用程序无法识别媒体类型参数。当向旧的 HTTP 应用程序发送数据时，实现应该只在该类型/子类型定义需要时使用媒体类型参数。

对我来说，这样做的好处是不要向老客户发送非标准参数。在上下文中，如果您将其发送给自 2000 年以来的任何客户，这意味着您是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T02:11:55.610

我最终在响应标头中传递了一个特殊的键/值对，以确保客户端了解响应来自我的服务器而不是来自某些中间重定向。

```
function sendResponse($status = 200, $body = '', $content_type = 'text/html')
{
   $status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status);
   header($status_header);
   header('Content-type: ' . $content_type);
   $value = 'success';
   header('myApp:' . $value); // --> I will always check in my client that the key myApp has the value success

echo $body;
} 
```

# python - 如何从文本文件创建自己的 NLTK 文本？

> ID：10467024
> 
> 赞同：37
> 
> 时间：2012-05-06T00:13:23.220
> 
> 标签：python, nltk

我是一名文学研究生，我一直在阅读 O'Reilly 在自然语言处理方面的书 (nltk.org/book)。它看起来非常有用。我已经玩过第 1 章中的所有示例文本和示例任务，比如索引。我现在知道白鲸用了多少次“鲸鱼”这个词。问题是，我无法弄清楚如何对我自己的一篇文章进行这些计算。我找到了有关如何创建自己的语料库的信息（O'Reilly 书的第 2 章），但我不认为这正是我想要做的。换句话说，我希望能够做到

```
import nltk 
text1.concordance('yellow') 
```

并获取在我的文本中使用“黄色”一词的地方。目前我可以用示例文本做到这一点，但不是我自己的。

我对 python 和编程非常陌生，所以这些东西非常令人兴奋，但也非常令人困惑。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-06T00:22:14.393

自己找到了答案。这很尴尬。或者很棒。

从Ch。3：

```
f=open('my-file.txt','rU')
raw=f.read()
tokens = nltk.word_tokenize(raw)
text = nltk.Text(tokens) 
```

行得通。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-05T14:17:44.700

对于多个文件的结构化导入：

```
from nltk.corpus import PlaintextCorpusReader

# RegEx or list of file names
files = ".*\.txt"

corpus0 = PlaintextCorpusReader("/path/", files)
corpus  = nltk.Text(corpus0.words()) 
```

参见：[NLTK 3 书](http://www.nltk.org/book/ch02.html)/第 1.9 节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T09:35:17.063

如果您的文本文件是 utf8 格式，请尝试以下变体：

```
f=open('my-file.txt','r',encoding='utf8')
raw=f.read()
tokens = nltk.word_tokenize(raw)
text = nltk.Text(tokens) 
```

# java - Android Limit EditText to Integer input only

> ID：10467025
> 
> 赞同：5
> 
> 时间：2012-05-06T00:13:33.830
> 
> 标签：java, android

I am trying to apply some kind of verification to an edittext. A user should only be able to enter integers between 1 and 60\. I am wondering whether I should let them type whatever they like and when they focus off of the edittext check the contents and if it is out of bounds change the value to a default, say 0.

Or is there a way to limit the keyboard to only allow integers?

UPDATE: I am doing everything programmatically. So far I have been able to limit to only numeric input and have a maximum of 2 characters by implementing the following. I am still struggling to limit only values between 0 and 60 though.

```
 editText.setInputType( InputType.TYPE_CLASS_NUMBER );
    InputFilter[] FilterArray = new InputFilter[1];
    FilterArray[0] = new InputFilter.LengthFilter(2);
    editText.setFilters(FilterArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:40:28.753

您可以使用`android.text.method.KeyListener`用您喜欢的任何内容替换当前输入。

由于您不必更改所有键，您可以使用`addTextChangedListener(TextWatcher watcher)`如下方法：

```
EditText editT = (EditText) findViewById(R.id.your_id);
editT.addTextChangedListener(new TextWatcher() {
@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
}

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // TODO Auto-generated method stub
}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

}); 
```

使用它来检查您的输入是否超出您的预期，您甚至可以通过检查该循环来忽略按键。

**在 XML 中：**

*   如果您使用数字，请仅使用`android:inputType="number"`.
*   将位数限制为 2 包括`android:maxLength="2"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T23:45:38.073

我懂了！我一直在互联网上搜索，并把一些东西放在一起让它工作。基本上它所做的是运行一个并行进程，当用户将注意力集中在特定的编辑文本框上时，该进程将不断运行。它将设置一个过滤器，以便用户只能在第一个整数槽中输入 0-5，但允许在第二个整数槽中输入 0-9。这显然会给出 0-59 而不是 1-60，但这就是你想要的几秒钟。此代码位于类内部的 onCreate 方法之前：

```
final InputFilter filter = new InputFilter() 
{
    public CharSequence filter(CharSequence source, int start, int end,
                Spanned dest, int dstart, int dent)
    {
        for (int i = start; i < end; i++)
        {
            if ((source.charAt(start) == "6".charAt(0)) || (source.charAt(start) == "7".charAt(0)) || (source.charAt(start) == "8".charAt(0))
                    || (source.charAt(start) == "9".charAt(0)) || (!Character.isDefined(source.charAt(i))) )                            
            {
                return "";
            }
        }
        return null;
    }
 };

private class FilterCheckerTask extends AsyncTask<Void, Void, Void>
{       
    @Override
    protected Void doInBackground(Void... params) 
    {           
        while(true)
        {               
            if (<EditText>.getText().toString().isEmpty())
            {
                Log.e("empty","empty");                 
                <EditText>.setFilters(new InputFilter[]{filter, new InputFilter.LengthFilter(2)});              
            }
            else if (<EditText>.getText().toString().charAt(0) >= "6".charAt(0))
            {
                Log.e("front num bad","greater than 5");
                <EditText>.setFilters(new InputFilter[]{filter, new InputFilter.LengthFilter(2)});
            }
            else 
            {
                Log.e("unfiltered", "unfiltered");
                <EditText>.setFilters(new InputFilter[]{new InputFilter.LengthFilter(2)});      
            }
            if (kicker)
            {
                return null;
            }
        }           
    }       
} 
```

然后，在`onCreate`方法内：

```
 Time_sec.setOnFocusChangeListener(new OnFocusChangeListener() 
    {
        public void onFocusChange(View v, boolean hasFocus)
        {
            new FilterCheckerTask().execute();
            if(!hasFocus)
                    {kicker = !hasFocus;}                               

        }
    }); 
```

正如我在第一部分中所说，这将使用户只能在您的编辑文本框中输入 00 到 59 之间的数字。我知道它可能看起来有点草率，并且可以在某些 if 语句中稍微清理一下，但据我所知，它绝对完美地工作，并且似乎根本不会减慢系统速度。希望这对你有帮助，如果没有，对未来的谷歌人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T00:35:11.807

如果您仅限于数字，则可以使用

```
EditText.addTextChangedListener 
```

获取输入的值并验证它不超过 60

`android:numeric="integer"` 您可以通过添加到`EditText`布局 xml 文件中轻松地只允许数字

虽然值得一提的`android:numeric="integer"`是现在已弃用

# iphone - 媒体查询问题

> ID：10467027
> 
> 赞同：2
> 
> 时间：2012-05-06T00:15:06.327
> 
> 标签：iphone, html, css, media-queries

我在一个网站上工作，我正在尝试正确格式化它以在 iPhone 上工作。当您在 iPhone 上访问该页面时，它会执行媒体查询所说的操作，但一切都非常小。它没有像我预期的那样放大。我希望网站占据手机的整个屏幕。

附有一张图片，我的网站的链接是：http: [//vacavall.mysite.syr.edu/weather_rc](http://vacavall.mysite.syr.edu/weather_rc)

这是一个查看它在 iPhone 上的样子的链接： [https ://www.dropbox.com/s/yspa45cl923q4wg/IMG952876.jpg](https://www.dropbox.com/s/yspa45cl923q4wg/IMG952876.jpg)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:16:22.240

您需要告诉视口使用设备的宽度而不是默认宽度。将以下内容放入您的`<head>`，看看这是否可以解决问题：

```
<meta name="viewport" content="width=device-width"> 
```

进一步阅读[Safari 开发者库](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)。

# c++ - 稳定红外距离传感器输出值

> ID：10467028
> 
> 赞同：1
> 
> 时间：2012-05-06T00:15:06.513
> 
> 标签：c++, filter, arduino, infrared, numerical-stability

我正在阅读红外夏普距离传感器：

[http://www.robofun.ro/senzori/infrarosu/senzor_sharp_%20GP2D120XJ00F](http://www.robofun.ro/senzori/infrarosu/senzor_sharp_%20GP2D120XJ00F)

通过阅读，我正在命令伺服系统将机器人引导到墙壁上，这是一个非常简单的地图并编写代码。

我遇到的问题是传感器读数偏离了方向，没有表现出线性...我知道其他人使用这些传感器很好，我知道它们的接线很好。

我的问题是如何消除发送到伺服的任何振荡？机器人在距离墙壁固定距离处静止不动，我得到 1 到 3 度的振动。

下面你有我的代码：

```
#include <Servo.h>

Servo myservo;
int val; 
int val1;

int IRpin = A7;
 // analog pin for reading the IR sensor
void setup() {
 myservo.attach(3);

 Serial.begin(9600); // start the serial port
}
void loop() {
 float volts = analogRead(IRpin);

delay(100); 
val1 = map(volts, 230,500, 0 ,100);
 val = map(val1, 0, 100, 100, 80);
 myservo.write(val);
 Serial.println(val);
 } 
```

请注意，双重映射是必要的，否则变化会更糟。

感谢任何愿意花时间回答这个问题并帮助我的人......

LE：我已经考虑过滞后，但我想要一些不会因不必要的读数和计算而浪费时间的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:27:05.877

这是一个经典的控制问题。我建议研究 PID 控制器。

编辑：对不起，误读了这个问题。我以为你有一个想要的方向，并且正在使用 IR 距离传感器来读取你当前的方向。我将以上内容作为背景，但不，它不适用于此。

新答案：

传感器波动是完全正常的。你必须考虑到他们。在这种情况下，我会使用一个简单的移动平均线过滤器。（您在任意 1 次与墙壁的距离是您最后一次 X 传感器读数的平均值）。使 x 太大会引入延迟，太小会产生相同的噪声输出。

回应您的 LE 注释：我认为您在处理嘈杂的输入时无法避免某种形式的滞后。您是否真的有性能问题，但又不想在计算上浪费时间？不要预先优化。

编辑2：以上将平滑您的输入信号（当前距离）。您如何将其转换为您的输出信号（伺服设定点）以达到您想要的距离（假设您想与墙壁保持固定距离）？这是 PID 控制器可能提供帮助的地方。

# c# - @Html.EditorFor(m => m) MVC 中的 lambda 语法

> ID：10467030
> 
> 赞同：13
> 
> 时间：2012-05-06T00:15:29.307
> 
> 标签：c#, razor, lambda, extension-methods, editorfor

我只是在学习 C# 和 MVC，并试图理解一些示例。

```
@Html.EditorFor(m => m) 
```

最终我发现 '=>' 是 lambda 运算符，它的意思是“m such that m”。这对我来说真的没有任何意义。为什么不直接传入 m？

此外，我没有在我正在使用的任何视图中定义 m 。模型已定义，据称这就是此方法所采用的方法。这是如何运作的？

最后，我查看了 Html.EditorFor 的定义，并没有看到只传入一个参数的任何重载。这个语法在哪里定义？ [http://msdn.microsoft.com/en-us/library/ee834942.aspx](http://msdn.microsoft.com/en-us/library/ee834942.aspx)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-06T00:29:52.037

让我们通过检查方法签名来分解它：

```
MvcHtmlString EditorFor<TModel, TValue>(
    this HtmlHelper<TModel> html, 
    Expression<Func<TModel, TValue>> expression
) 
```

这是使用扩展方法语法，这意味着它添加了一个名为`EditorFor`to的方法`HtmlHelper`，以便您可以进行调用`Html.EditorFor`。但我们真正感兴趣的是第二个参数`Expression<Func<TModel, TValue>>`. 这是一个相当复杂的参数，但现在我们可以忽略它是一个`Expression`. 所以简化，让我们检查一下：

```
Func<TModel, TValue> expression 
```

这意味着参数是具有一个参数（类型为）且返回类型为的*任何*方法。您一直在使用 lambda，它（本质上）是一种更简洁的方法表示，但将其视为普通方法会很有帮助。所以你是 lambda 正在接受一个模型并返回一个模型：`TModel``TValue`

```
m => m 
```

这不是很有趣，所以让我们将它与一个更现实的场景进行比较，在这个场景中，您要从模型中返回一个属性：

```
m => m.MyStringProperty 
```

现在让我们将它与您在某处声明的普通静态方法进行比较：

```
public static class MyStaticClass 
{
    public static string Foo(TModel model) 
    {
        return model.MyStringProperty;
    }
} 
```

虽然真的在这里它不会`TModel`- 它会是你通过声明你的模型类型的任何东西`@model`。现在，为了讨论，您可以在调用时使用此方法`EditorFor`：

```
Html.EditorFor(MyStaticClass.Foo); 
```

总而言之，lambdas（在大多数情况下）只是常规方法的简写。所以你所做的就是传递方法。

最后要注意的是，我们实际上是在使用表达式树，这意味着您实际上并没有传递方法，而是传递了表示方法代码的对象模型（表达式树）。本质上，这只是用来确定您正在使用的属性名称（因为通常 lambda 更像`m => m.MyProperty`，而不仅仅是`m => m`）。这一切都是为了避免使用字符串（即“MyProperty”）引用属性名称的魔术字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:27:20.027

1.  在您的示例中， lambda 函数没有任何用途，是的。但它的真正用途是当您想要为模型的属性呈现编辑器时：@Html.EditorFor(m => m.SomeProperty)。Lambda 表达式实际上只是函数的简写，但通过[委托](http://msdn.microsoft.com/en-us/library/bb549151.aspx)进行强类型化。这个概念在 Javascript 中可能更熟悉：

    我的功能（函数（x）{返回x.SomeProperty；}）；

2.  “m”不是预定义的。它为 lambda 表达式的第二部分命名参数，可以是任何东西：@Html.EditorFor(whatever => whatever)。（它指的是同一个东西，在这种情况下是页面的模型，不管你给它起什么名字。）

3.  您在 Html.EditorFor 的这些定义中看到的第一个参数并不是真正的参数。您会注意到他们使用**this**关键字来定义[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。该参数指的是调用该方法的对象，在本例中是**HtmlHelper<Model>**对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T00:29:02.273

**1.**

*   `@Html.EditorFor(m => m)`- 整个模型的显示编辑器
*   `@Html.EditorFor(m => m.propertyName)`- 显示模型特定属性的编辑器

**2.**

`@Html.EditorFor(m => m)`等于`@Html.EditorFor(t => t)`或`@Html.EditorFor(randomName => randomName)`。名称无关紧要，它只是参数的名称。此参数的类型是视图模型的类型。

你必须传递函数，因为重要的不仅仅是价值。反射用于获取描述如何显示属性的属性。看这个例子

```
public class ResetPasswordModel
{
    public string Username { get; set; }

    [DataType(DataType.Password)]
    public string NewPassword { get; set; }
    [DataType(DataType.Password)]
    public string PasswordConfirmed { get; set; }
} 
```

属性描述，NewPassword 应该是密码字段，而不是常规输入。如果我们传递值，那将是不可能的。

在我们的示例`@Html.EditorFor(m => m)`中，将显示包含一个用户名输入和两个密码输入的密码。`@Html.EditorFor(m => m.NewPassword)`将显示输入，它具有密码类型。

**3.**

`http://msdn.microsoft.com/en-us/library/ee402949.aspx`

```
public static MvcHtmlString EditorFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression
) 
```

这是 HtmlHelper 类的扩展方法。`this HtmlHelper<TModel> html`不是参数，它是类的类型，该函数扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T00:28:28.750

将`=>`操作符视为“去”的意思，所以`(m => m)`意味着“m 去到 m”，另一种说法是你得到了同样的东西`m`。

在您的示例中，`@Html.EditorFor(m => m)`,`m`是 lambda 表达式的匿名输入参数`m => m`，它是扩展方法的参数`EditorFor`。正如您在问题中指出的那样，此方法的所有重载都不会少于一个参数；这是因为它是一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，第一个参数表示它扩展的类型。第二个参数是[Expression](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)，您可以使用 lambda*表达式*。

# bash - at 命令未执行

> ID：10467031
> 
> 赞同：11
> 
> 时间：2012-05-06T00:15:41.940
> 
> 标签：bash, unix

我正在尝试使`at`bash 命令运行，但它对我不起作用。我可以将作业添加到队列中，但时间到时它不会运行。我究竟做错了什么？

```
hpek@melda:~$ cat /usr/lib/cron/at.deny 
hpek@melda:~$ atq
hpek@melda:~$ at now +2 minutes
echo TTTEEEST
job 12 at Sun May  6 02:09:00 2012
hpek@melda:~$ date
Sun May  6 02:10:24 CEST 2012
hpek@melda:~$ atq
12  Sun May  6 02:09:00 2012
hpek@melda:~$ 
```

UPD2021.08.06 atd 在 MacOS 11.5.2（或更早版本）中被删除

```
$ sudo find / -name atd -print 2>/dev/null
$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T00:20:00.180

它工作正常。只是运行的命令`at`不会将其输出写入您调用它的终端。

尝试：

```
at now +2 minutes
echo TTTEEEST > new_file_test 
```

您将在两分钟内看到该文件出现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T05:14:57.723

看看`/var/at/jobs`那里是否列出了您的 at 工作。（它可能是基于操作系统的不同目录）。

默认情况下，`at`在大多数系统上未启用。为了`at`实际执行作业，必须执行[atrun](http://www.manpagez.com/man/8/atrun/)命令。

该命令通过[launchd](http://www.manpagez.com/man/5/launchd.plist/)或[cron](http://www.manpagez.com/man/8/cron/)执行，具体取决于系统。

确切的机制因系统而异，因此您必须阅读 , 等上的所有各种联机帮助页`at`，`atrun`以验证是否`at`真的在您的系统上启用，以及您是否有权在作业中运行。您的系统上通常同时存在*ant allow*和*ant deny*文件，因此您需要同时检查这两个文件。您必须既在*允许*文件中，又不在*拒绝*文件中。

最重要的是，您必须确保`at`在您的系统上启用了它（出于安全考虑，它通常被禁用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T00:20:32.607

请查收你的邮件：

```
 An at - or batch - command invoked from a su(1) shell will
   retain the current userid.  The user will be mailed standard
   error and standard output from his commands, if any.  Mail
   will be sent using the command /usr/sbin/sendmail.  If at is
   executed from a su(1) shell, the owner of the login shell
   will receive the mail. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-08T08:20:09.263

我在[这里找到了这个](https://www.simplehelp.net/2009/05/04/how-to-schedule-tasks-on-linux-using-the-at-command/)

> 首先使用如下命令确保 at 守护进程正在运行：
> 
> ```
> # ps -ef | grep atd
> root 8231 1 0 18:10 ? 00:00:00 /usr/sbin/atd 
> ```
> 
> 如果您没有看到 atd 正在运行，请使用以下命令启动它：
> 
> ```
> # /etc/init.d/atd start 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-04T06:55:49.423

要分析 at(d) 执行问题，它可能有助于

1.  检查 /etc/at.allow 和 /etc/at.deny 的存在和内容（参见 参考资料`man at.allow`）
2.  检查 atd spool 目录的所有者和访问权限（/var/spool/cron/atjobs, daemon:daemon, Ubuntu 上的 770）
3.  检查 atd 守护进程是否正在运行（`systemctrl -a | grep atd`在 Ubuntu 上）
4.  `tail -f /var/log/syslog`（在执行时）
5.  `journalctl -b | grep atd`（发现[here](https://forum.manjaro.org/t/at-command-permission-denied/55852/6)，包含更多提示）

`at`“权限被拒绝”错误也可能是由/etc/security/limits.conf 中定义的（针对正在运行的用户）登录次数有限引起的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-06T04:46:03.507

`at`与命令一起使用时，我也遇到了与 echo 相同的问题。但是，如果您尝试使用`>`or重定向输出，`>>`则它可以完美运行。还可以尝试其他一些系统命令`reboot`，例如`ls > some_text_file`等，以确保 at 命令正常工作。否则尝试 `sudo systemctl enable --now atd`启用`at`守护进程

# javascript - 火狐不显示一些 html 边框

> ID：10467034
> 
> 赞同：-2
> 
> 时间：2012-05-06T00:16:21.677
> 
> 标签：javascript, html, css, jsp

在[这段代码](http://jsfiddle.net/riateche/eQ8rz/3/)中，我创建了 HTML 表。当我将代码保存在html文件中并用firefox打开时，没有问题。当我将它保存为 jsp 并使用 apach tomcat 运行它，并使用 firefox 打开它时，某些行边框和列边框将不会显示（在 chrom 或 Internet Explorer 中没有问题）。

任何想法可能是什么问题？

ps：我有火狐12.0版 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:27:02.437

好的，有两点：

1.  TR 只是结构元素，它们不能有边框（但 TD、TH 和 TABLE 可以有一些）……顺便说一下，TR 可以有背景色
2.  td 的左边界可能会“覆盖”左边界的右边界。读一点[http://www.blooberry.com/indexdot/css/properties/table/bcollapse.htm](http://www.blooberry.com/indexdot/css/properties/table/bcollapse.htm)，你会发现一个很酷的解决方案

# ruby - How to create a Ruby executable using ocra or rubyscript2exe gems but including needed Excel files?

> ID：10467038
> 
> 赞同：2
> 
> 时间：2012-05-06T00:17:00.690
> 
> 标签：ruby, excel, executable, ocra

I have a dozen of selenium webdriver scripts written in Ruby and I have used both rubyscript2exe and ocra gems in an attempt to end up with a 'bundled' executable but to no avail. Problem is, my scripts are grabbing test data from Excel files; and this is causing havoc when trying to create the executable.

It works fine on the machine which has the original excel file but when taken home away from its native path it 'll just refuse to run. Do I need to declare my paths in my code in a relative way and not explicitly? Is there a command in Ruby like 'require' but for an Excel file for example?

I will be grateful if anyone knows a way to make a ruby executable (or even an installer/application builder) which will somehow include the Excel files running in parallel with the script.

*** Resolved ***

Admins you can close this one if you want.

It was pretty simple but couldn't figure it out on the first place. If you want to included additional non ruby files in your final executable you can use the line below..:

ocra yourscript.rb test.xls docs\documentantion.doc excel\additional.xls

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:45:37.257

一旦你使用 Ocra 打包一个 exe，文件就会被锁定在其中，如果它们是不可变的，你也可以将数据存储在脚本中并直接从那里写出来。如果没有 excel 文件你绝对不能做到这一点，你也可以考虑通过脚本创建一个。如果您使用的是与 exe 一起分发的外部 excel 文件，那么您最好参考相对于脚本 (Dir.pwd) 的 excel 文件的路径。另外，从分隔的文本文件而不是 excel 中收集数据不是更有效吗？

# c++ - 使用 std::map 的 Visual Studio 11 编译时错误

> ID：10467042
> 
> 赞同：6
> 
> 时间：2012-05-06T00:18:50.070
> 
> 标签：c++, visual-studio, gcc, compiler-errors

以下代码使用 gcc-4.5.1 编译，但在 Visual Studio 11 中不编译。

```
#include <map>
#include <array>

typedef std::pair<const unsigned int, std::array<const unsigned int, 4>> pairus;

int main(){

   std::map<const unsigned int, std::array<const unsigned int, 4> > x; 
   std::array<const unsigned int, 4> troll = {1, 2, 3, 4};
   x.insert(pairus(1, troll));

   auto z = x[1];
} 
```

1 现在映射到`std::array<> troll`. 插入效果很好，程序可以编译。但是，一旦我尝试`auto z = x[1]`-> 因此尝试获取`1`映射到的数组巨魔，程序不会编译并出现以下错误：

`error C2512: 'std::array<_Ty,_Size>::array'`: 没有合适的默认构造函数可用

是什么导致了 gcc 和 vs11 之间的这种行为差异以及如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:36:53.847

试试`auto z = *x.find(1);`吧。-operator`[]`需要一个默认的可构造类型。事实上，整个容器都需要一个默认可构造类型，所以当你尝试各种实现时，除了随机运气之外，你真的不能指望任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:39:10.620

您的类型不可分配，因为它包含常量。

x[1] 尝试返回可分配的引用。如果它还不存在，它还将为键构造一个空值。这两个都对您的类型无效。您必须改用 find 。

# android - Android InsertHelper getColumnIndex() 产生：android.database.sqlite.SQLiteException

> ID：10467049
> 
> 赞同：0
> 
> 时间：2012-05-06T00:20:15.450
> 
> 标签：android, sqlite, bulkinsert

我必须在这里做一些愚蠢的事情，因为我有一些非常相似的代码可以正常工作。当我编译并运行下面的代码时，我得到一个 android.database.sqlite.SQLiteException：

```
05-05 20:00:29.524: E/AndroidRuntime(12785): Caused by: android.database.sqlite.SQLiteException: near "VALUES": syntax error: , while compiling: INSERT INTO bookmarks_6616 (VALUES ( 
```

这就是整个错误。就好像正在发送不完整的插入。最奇怪的是，异常是在第一次调用 InsertHelper.getColumnIndex() 时生成的，无论如何都不应该编译插入。

代码如下。我检查过，表确实存在（它是空的，之前创建了几行。）键也有正确的值。我可能会切换回使用不带 insertHelper 的 insert()，但我希望能够找出这个错误！任何帮助表示赞赏。

```
 InsertHelper ihelper = new InsertHelper(dbHelper.mDb, tableName);

    //Populate the DB table
    final int idColumn = ihelper.getColumnIndex(BooksDbAdapter.KEY_CHID);
    final int titleColumn = ihelper.getColumnIndex(BooksDbAdapter.KEY_CHAPTERTITLE);
    final int urlColumn = ihelper.getColumnIndex(BooksDbAdapter.KEY_CHAPTERURL);
    final int durationColumn = ihelper.getColumnIndex(BooksDbAdapter.KEY_DURATION);

    for (RSSMessage msg : messages){
        if (msg.imageMessage()) {
            dbHelper.updateImage(lvid, msg.getImageURL());
        } else {
            ihelper.prepareForInsert();
            ihelper.bind(idColumn, chid);
            ihelper.bind(titleColumn, msg.getChapterTitle());
            ihelper.bind(urlColumn, msg.getChapterURL());
            ihelper.bind(durationColumn, msg.getDuration());
            ihelper.execute();

            chid++;
        }
    }
    ihelper.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:36:23.807

事实证明，问题只是一个错误的表名。显然，错误显示在 getColumnIndex() 上，因为找不到匹配的列。我仍然不确定为什么错误显示 INSERT 语句不完整，但也许编译器延迟了对 getColumnIndex 的调用，直到需要结果。

# r - R：如何禁用包函数列表的截断？

> ID：10467052
> 
> 赞同：9
> 
> 时间：2012-05-06T00:21:44.350
> 
> 标签：r

如何列出键入时曾经出现的所有结果`packageName<tab>`，即通过自动完成提供的完整列表？在 R 2.15.0 中，我得到以下内容`Matrix::<tab>`：

```
> library(Matrix)
> Matrix::
Matrix::.__C__abIndex               Matrix::.__C__atomicVector          Matrix::.__C__BunchKaufman          Matrix::.__C__CHMfactor             Matrix::.__C__CHMsimpl              
Matrix::.__C__CHMsuper              Matrix::.__C__Cholesky              Matrix::.__C__CholeskyFactorization Matrix::.__C__compMatrix            Matrix::.__C__corMatrix             
Matrix::.__C__CsparseMatrix         Matrix::.__C__dCHMsimpl             Matrix::.__C__dCHMsuper             Matrix::.__C__ddenseMatrix          Matrix::.__C__ddiMatrix             
Matrix::.__C__denseLU               Matrix::.__C__denseMatrix           Matrix::.__C__dgCMatrix             Matrix::.__C__dgeMatrix             Matrix::.__C__dgRMatrix             
Matrix::.__C__dgTMatrix             Matrix::.__C__diagonalMatrix        Matrix::.__C__dMatrix               Matrix::.__C__dpoMatrix             Matrix::.__C__dppMatrix             
Matrix::.__C__dsCMatrix             Matrix::.__C__dsparseMatrix         Matrix::.__C__dsparseVector         Matrix::.__C__dspMatrix             Matrix::.__C__dsRMatrix             
Matrix::.__C__dsTMatrix             Matrix::.__C__dsyMatrix             Matrix::.__C__dtCMatrix             Matrix::.__C__dtpMatrix             Matrix::.__C__dtrMatrix             
Matrix::.__C__dtRMatrix             Matrix::.__C__dtTMatrix             Matrix::.__C__generalMatrix         Matrix::.__C__iMatrix               Matrix::.__C__index                 
Matrix::.__C__isparseVector         Matrix::.__C__ldenseMatrix          Matrix::.__C__ldiMatrix             Matrix::.__C__lgCMatrix             Matrix::.__C__lgeMatrix             
Matrix::.__C__lgRMatrix             Matrix::.__C__lgTMatrix             Matrix::.__C__lMatrix               Matrix::.__C__lsCMatrix             Matrix::.__C__lsparseMatrix         

[...truncated] 
```

该`[...truncated]`消息令人恼火，我想制作完整的清单。为了避免截断，我需要调用哪个选项/标志/旋钮/配置/咒语？我有这样的印象，我曾经看到完整的列表，但现在看不到了——也许那是在不同的操作系统上（例如 Linux）。

我知道这`ls("package:Matrix")`是一种有用的方法，但它与设置选项不同，列表也不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T01:04:18.370

不幸的是，在 Windows 上，这种行为似乎是硬连线到`C`用于构建控制台的代码中。所以答案似乎是“不，你不能禁用它”（至少在不修改源代码然后从头开始重新编译 R 的情况下不能）。

以下是来自的相关行`$RHOME/src/gnuwin32/console.c`：

```
909 static void performCompletion(control c)
910 {
911    ConsoleData p = getdata(c);
912    int i, alen, alen2, max_show = 10, cursor_position = p->c - prompt_wid;
    ...
    ...
1001      if (alen > max_show)
1002      consolewrites(c, "\n[...truncated]\n"); 
```

你是对的，在其他一些平台上，所有的结果*都被*打印出来了。（例如，我经常使用 Emacs，它会将选项卡完成的所有结果弹出到一个单独的缓冲区中）。

作为一个有趣的旁注，`rcompgen`实际执行制表符补全（而不是将结果打印到控制台）的后端总是*会找到*所有补全。只是Windows不会将它们打印出来供我们查看。

You can verify that this happens even on Windows by typing:

```
library(Matrix)
Matrix::
## Then type <TAB> <TAB>
## Then type <RET>
rc.status()      ## Careful not to use tab-completion to complete rc.status !
matches <- rc.status()$comps
length(matches)  # -> 288
matches          # -> lots of symbols starting with 'Matrix::' 
```

For more details about about the backend, and the functions and options that control its behavior, see [`?rcompgen`](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/rcompgen.html).

# jquery - Design is messed up in IE9

> ID：10467055
> 
> 赞同：1
> 
> 时间：2012-05-06T00:22:27.063
> 
> 标签：jquery, css, html, internet-explorer

I'm working on a new website, it's using jQuery and CSS3 elements, and it's working well in Firefox, Chrome and other browsers; however it's not getting messed up in IE

The link to my website is [http://www.sy-architects.com/test](http://www.sy-architects.com/test). Could please take a look at it? I suspect it's something to do with the bottom menu and `<ul>` markup but am not sure.

EDIT: If you mouse over on the menu Practice People or Projects you will notice that the design is messed up the bottom bar is on the top and the rest of the `<li>` is showing on top instead of the menu itself and it's getting weird, plz check it on both Firefox and IE to see the difference, I'm using IE9 by the way

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:43:57.760

首先，我会删除这个：

```
 <meta content="IE=8" http-equiv="X-UA-Compatible" /> 
```

没有理由下移网站以使 IE9 像 IE8 一样工作。IE9 上存在一些显示问题，但是一旦您对其进行测试，应该很容易解决。

其次，您应该[验证 HTML](http://validator.w3.org/check?verbose=1&uri=http://www.sy-architects.com/test/)，有 16 个错误，其中一些是布局问题（元素没有关闭，特别是在导航菜单中，很多 LI 没有正确关闭。虽然并非所有问题都很严重，但布局问题可能会导致特别是在解析引擎较差的旧浏览器（如 IE7）中崩溃。

除此之外，我在 IE7 中没有看到任何崩溃，只是布局问题。修复 HTML 标记应该对修复布局大有帮助。

# c# - C# Magento API Prices

> ID：10467056
> 
> 赞同：1
> 
> 时间：2012-05-06T00:22:36.517
> 
> 标签：c#, api, magento, attributes, product

Is there anyway to call catalogProductList and have it return the prices along with the other default product data in one call? Or, do I have to make "n" number of catalogProductInfo calls on each product individually? In my case, if I call catalogProductList, it returns over 1000 products and then I am having to do a catalogProductInfo on each of the over 1000 products which just breaks the program from having over 1000 API calls.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:24:25.963

我的任务是从我的公司得到类似的东西。我们无法找到一种方法来轻松获取所有商品的价格。我们发现抢价格的唯一方法是`catalogProductInfo`像你说的那样打电话“n”次。我们计划简单地扩展 Magento API 以提供拉取/更新这些数据的方法。

# paypal - Paypal form select

> ID：10467060
> 
> 赞同：0
> 
> 时间：2012-05-06T00:23:15.840
> 
> 标签：paypal

I'm confounded why this won't work - the first select works, the second one doesn't. The first one though, does not provide any textual info about the selection.

```
<form action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post'>  
<input type='hidden' name='cmd' value='_xclick'>  
<input type='hidden' name='business' value='payments@site.com'>
<select name='os0'>
<option value='25€ Individual'>Individual rate - 25&euro;</option>
<option value='75€ Group'>Agency rate - 75&euro;</option>
</select> 
<input type='hidden' name='option_index' value='0'>
<input type='hidden' name='option_select0' value='25€ Individual'>
<input type='hidden' name='option_amount0' value='25.00'>
<input type='hidden' name='option_select1' value='75€ Group'>
<input type='hidden' name='option_amount1' value='75.00'>
<input type='hidden' name='currency_code' value='EUR'>  
<input type='hidden' name='return' value='http://www.site.com/backtoyou/'>   
<input type='submit' value='Pay with PayPal!'>  
<img alt='' border='0' src='https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif' width='1' height='1'>
</form> 
```

# bash - “while :; do”在 bash 中真正做了什么？

> ID：10467062
> 
> 赞同：1
> 
> 时间：2012-05-06T00:23:19.887
> 
> 标签：bash

我看到这样的代码：

```
while :; do
    #commands
done 
```

是不是一样

```
while :
do
    #commands
done 
```

这只是一个无限循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:31:52.327

`:`是一个内置的外壳`Null command`。您可以`help :`在终端中输入：

```
:: :
    Null command.

    No effect; the command does nothing.

    Exit Status:
    Always succeeds. 
```

它看起来像`/bin/true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T00:28:03.967

是的，这只是一个无限循环。您通常会发现循环内的代码在满足某些条件时`while`调用以退出循环。`break`

# javascript - In JavaScript , how does one use the __proto__ property to create more objects?

> ID：10467063
> 
> 赞同：1
> 
> 时间：2012-05-06T00:23:39.893
> 
> 标签：javascript, prototype

According to the Caja paper:

> **Forbidden names.** In Firefox, access to the "__proto__" property of an object would grant the authority to create more objects like it, which violates the principle of least authority. Therefore, Caja rejects all names ending with " __ " (double underscore). This also gives the Caja implementation a place to store its book- keeping information where it is invisible to the Caja programmer.

I tried in Firebug, just seeing all the methods `__proto__` has(i.e., `pkcsll, atob, btoa, screenX` etc), but I don't see a copy-type method. How is `__proto__` exploited?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:35:05.753

除非我没有听懂他们在说什么，否则您不需要`__proto__`从原始的相同原型创建更多对象。

您可以使用标准的 ecmascript 5 方法来做到这一点。

```
function FooBar() {}
FooBar.prototype.foo = function() { return "bar"; };

 /* create a FooBar object */
var fb1 = new FooBar();

 /* using __proto__ this creates an object with the same prototype as fb1 */    
var fb2 = {};
fb2.__proto__ = fb1.__proto__;

 /* and so does this, but without __proto__ */
var fb3 = Object.create(Object.getPrototypeOf(fb1));

fb1 instanceof FooBar; // true
fb2 instanceof FooBar; // true
fb3 instanceof FooBar; // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T00:35:15.067

我不会完全称其为漏洞利用，但在支持 的 JavaScript 引擎中`__proto__`，您可以通过以下方式创建与任何对象具有相同原型的对象，

```
function makeObjectLike(a) {
    function maker() { }
    maker.prototype = a.__proto__;
    return new maker();
} 
```

你也可以使用 ES5`Object.getPrototypeOf(a)`而不是`a.__proto__`.

Caja 禁止事情不是因为它们本质上是坏的，而是因为如果您不信任您正在加载和运行的代码，它们可能会被用于作恶。在您自己的代码中使用这种技术就可以了（浏览器兼容性问题除外）。

# variables - Binding multiple definitions to one "variable" in scheme?

> ID：10467066
> 
> 赞同：-1
> 
> 时间：2012-05-06T00:24:12.930
> 
> 标签：variables, scheme, racket

I think I read somewhere that you could bind multiple definitions to a single name in scheme. I know I might be using the terminology incorrectly. By this I mean it is possible to do the following (which would be really handy to defining an operator)?

I believe I read something like this (I know this is not real syntax)

```
(let ()
define operator "+"
define operator "-"
define operator "*"
define operator "/")) 
```

I want to test another variable against every operator.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:32:47.223

我不确定你在问什么。您想要一个可以处理不同类型参数的过程吗？

```
(define (super-add arg1 arg2)
  (cond ((and (string? arg1) (string? arg2))
         (string-append arg1 arg2))
        ((and (number? arg1) (number? arg2))
         (+ arg1 arg2))
        (else
          (error "UNKNOWN TYPE -- SUPER-ADD"))))

(super-add "a" "b") => "ab"
(super-add 2 2) => 4 
```

您对消息传递感兴趣吗？

```
(define (math-ops msg)  ;<---- returns a procedure depending on the msg
  (cond ((eq? msg 'add) +)
        ((eq? msg 'sub) -)
        ((eq? msg 'div) /)
        ((eq? msg 'multi) *)
        (else
          (error "UNKNOWN MSG -- math-ops"))))

((math-ops 'add) 2 2) => 4
((math-ops 'sub) 2 2) => 0 
```

`let`绑定的正确语法也是：

```
(let (([symbol] [value])
      ([symbol] [value]))
   ([body]))

(let ((a 2)
      (b (* 3 3)))
   (+ a b))

 => 11 
```

如果您不澄清您正在尝试做什么，将很难提供更多帮助。

编辑：在您发表评论后，我对您正在寻找的东西有了更好的了解。无法按照您的意思将多个值绑定到同一个名称。您正在寻找一个谓词，它会告诉您正在查看的东西是否是您的运算符之一。从您的评论看来，您将接受一个字符串，这就是它的基础：

```
(define (operator? x)
    (or (string=? "+" x) (string=? "-" x) (string=? "*" x) (string=? "/" x))) 
```

如果您要接收单个字符串，则需要将其拆分为较小的部分。Racket 有一个内置的程序`regexp-split`可以为你做这件事。

```
(define str-lst (regexp-split #rx" +" [input str])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T07:26:17.337

您可能指的是`values`“将参数传递给延续”的构造。它可用于从函数返回多个值。例如，

```
(define (addsub x y)
  (values (+ x y) (- x y)))

(call-with-values
  (lambda () (addsub 33 12))
  (lambda (sum difference)
    (display "33 + 12 = ") (display sum) (newline)
    (display "33 - 12 = ") (display difference) (newline))) 
```

# php - loading urls automatically

> ID：10467067
> 
> 赞同：-2
> 
> 时间：2012-05-06T00:24:16.610
> 
> 标签：php, javascript, url

I have text file containing 10000 URls(generated from web crawler) Is there any way to load these URLs automatically in the browser (I instrumented the browser to generate asts and that is whole point of loading some random bunch of urls which I've got from web crawler)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:41:56.240

怎么样，使用*iframe创建页面，在**textarea*中加载这些 URI，然后运行脚本，该脚本采用随机的并在时间间隔内将其发送到*iframe src*？

# ruby - 多个线程调用同一个函数

> ID：10467070
> 
> 赞同：10
> 
> 时间：2012-05-06T00:25:01.917
> 
> 标签：ruby, multithreading, stack

假设我们有多个线程都调用同一个函数：

```
def foo 
  # do stuff ...
end

100.times do |i|
  Thread.new do
    foo
  end
end 
```

如果两个或多个线程当前在 内部`foo`，它们是否各自在内部共享相同的局部变量`foo`？

这与我的第二个问题有关。线程是否有单独的堆栈帧，或者它们是否在单个进程中共享堆栈帧？具体来说，当多个线程每个调用`foo`和`foo`返回之前，堆栈上是否有多个副本`foo`，每个副本都有自己的局部变量，或者`foo`堆栈上只有一个副本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T02:23:58.770

是的，它们共享相同的变量。这是线程的关键元素，在只读上下文中很好，但是如果它们写入任何这些变量，则需要使用 a`Mutex`和`synchronize`线程，因此在任何给定时间只有一个可以更改变量。有时他们可能会调用间接更改数据的方法，因此在决定是否需要同步之前，您需要完全了解系统。

至于你的第二个问题，如果我理解你的问题，它们有单独的堆栈帧，*但*它们仍然在内存中共享相同的数据。

澄清一下，在以下示例中，局部变量`zip` *由*多个线程共享，因为它是在当前范围内定义的（线程不会更改范围，它们只是在当前范围内启动一个单独的并行执行线程）。

```
zip = 42

t = Thread.new do
  zip += 1
end

t.join

puts zip # => 43 
```

这里的加入拯救了我，但显然，如果我把它留在那里，线程根本没有意义。如果我要执行以下操作会很危险：

```
zip = 42

t = Thread.new do
  zip += 1
end

zip += 1

puts zip # => either 43 or 44, who knows? 
```

那是因为你基本上有两个线程都试图同时修改`zip`。当您访问网络资源或递增数字等时，这会变得很明显，如上所述。

然而，在下面的例子中，局部变量`zip`是在一个全新的范围内创建的，所以两个线程实际上并没有同时写入同一个变量：

```
def foo
  zip = 42
  zip += 1 # => 43, in both threads
end

Thread.new do
  foo
end

foo 
```

有两个并行堆栈被管理，每个堆栈在方法中都有自己的局部变量`foo`。

但是，以下代码很危险：

```
@zip = 42 # somewhere else

def foo
  @zip += 1
end

Thread.new do
  foo
end

foo

puts @zip # => either 43 or 44, who knows? 
```

这是因为实例变量`@zip`可以在函数范围之外访问`foo`，所以两个线程可能同时访问它。

“两个线程同时更改相同数据”的这些问题通过在更改变量的代码部分周围使用精心放置的互斥锁（锁）来解决。*必须*在创建线程*之前*创建互斥锁，因为在互斥锁的情况下，两个线程访问同一个互斥锁（根据设计）至关重要，以便知道它是否被锁定。

```
# somewhere else...
@mutex = Mutex.new
@zip   = 42

def foo
  @mutex.synchronize do
    @foo += 1
  end
end

Thread.new do
  foo
end

foo

puts @zip # => 44, for sure! 
```

如果当执行流程到达该`Mutex#synchronize`行时，它会尝试锁定互斥锁。如果成功，则进入块并继续执行。块完成后，互斥锁将再次解锁。如果互斥锁已经被锁定，线程会一直等待，直到它再次空闲……实际上它就像一扇门，一次只有一个人可以穿过。

我希望这能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:18:38.383

在方法内部定义的局部变量不共享。但是，如果同一对象在线程块的范围内，线程就有可能访问该对象的实例变量。

例如：

```
def foobar
    puts "Foo is defined!" if defined?(foo)=='local-variable'
    foo = 5
end 
```

如果被多个线程调用，将永远不会放置字符串。

但是以下需要一个互斥锁来同步，因为竞争条件适用：

```
foo = {bar:5}
def foobar(value)
    value[:bar]+=5
end
15.times{|i| Thread.new{foobar foo}} 
```

在此之后， foo[:bar] 可能包含 35 的值，因为每次调用 foobar 都会更改哈希值 foo 中的值。

# gpu - 我可以将 PCI-E 3.0 x16 gpu 放入 PCI-E 1.0 x16 插槽吗？

> ID：10467072
> 
> 赞同：3
> 
> 时间：2012-05-06T00:25:28.593
> 
> 标签：gpu, pci-e

我有一块旧主板[Asus P5K Deluxe](http://www.asus.com/Motherboards/Intel_Socket_775/P5K_DeluxeWiFiAP/#specifications)。我需要更换当前的 GPU（NVIDIA 8800 GTX），但所有新的 GPU 似乎都使用 PCI-E 3.0 插槽。3.0 是否与 1.0 插槽向后兼容？有适配器吗？我已经在谷歌上搜索了一段时间，但我找不到任何东西......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:54:20.930

PCIE 3.0 卡向后兼容 1.0 和 2.0 插槽，但您将无法享受新 PCIE 卡的全部功能。它将被限制在第 1 代速度（2.5 Gt/秒），而第 3 代允许 8 Gt/秒和更好的编码方案，这实际上使它快了大约 X4 倍。

# coldfusion - 启用您的 RDS 或管理员密码

> ID：10467081
> 
> 赞同：0
> 
> 时间：2012-05-06T00:26:53.680
> 
> 标签：coldfusion

我不知道为什么我会得到这个。如果我浏览到

[http://www.phillipsenn.com/Matrix/JSON/Upload/Upload.cfc?method=Save&Item=1](http://www.phillipsenn.com/Matrix/JSON/Upload/Upload.cfc?method=Save&Item=1)

然后组件正常工作。但如果我这样做，它会要求输入 RDS 密码。

```
!function($, window, undefined) {
    var local = {};
    local.data = {};
    local.type= 'post',
        local.dataType= 'json',
        local.data.method = 'Save';
    local.data = {
        Item : 'Item One'
    }

    var myPromise = $.ajax('Upload.cfc',local);
    myPromise.done(function(result) {
        console.log('success!');
    });

    myPromise.fail(function(A,B,C) {
        $('body').append(A.responseText);
        console.log(B);
        console.log(C);
    });
}(jQuery, window); 
```

最后，这是我的组件：

```
<cfcomponent>
<cffunction name="Save" access="remote" output="yes">
    <cfargument name="Item">
    <cfset var local = {}>

    <cfquery datasource="#Application.Datasource#" username="#Application.Username#" password="#Application.Password#">
    INSERT INTO lru.Clip(ClipDesc) VALUES('test')
    </cfquery>
    #arguments.Item#
</cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:39:52.197

菲尔，

我猜想你的ajax代码在没有“方法”url参数的情况下调用了CFC。当它执行此操作时，该 CF 认为您将尝试“CFC Explorer” - 一个简洁的小工具，可以创建类似于 Javadoc 的 CFC 描述。如果您只是浏览到没有任何 url 参数的 CFC，您可以看到它（即使在本地），如下所示：

[http://www.phillipsenn.com/Matrix/JSON/Upload/Upload.cfc](http://www.phillipsenn.com/Matrix/JSON/Upload/Upload.cfc)

所以你的 Ajax 调用必须改变一些东西......我认为问题是你最后的声明......

```
local.data = {
    Item : 'Item One'
} 
```

正在用一个名为“Item”的结构替换它上面的“数据”集。当您这样做时，您将丢失称为“方法”的密钥。尝试：

```
local.data.Item = 'Item One'; 
```

# jquery - 使用 jQuery 切换包装元素的最佳方法

> ID：10467086
> 
> 赞同：7
> 
> 时间：2012-05-06T00:27:38.420
> 
> 标签：jquery

我在 HTML 中有这段代码

```
<span id="s">Attachments</span> 
```

如何使用 jQuery 将外部 SPAN 元素与以下表格代码块进行切换，以使“附件”文本被表格元素包裹。

```
<table id="t">
  <tr>
    <td>Attachments</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:32:10.350

您可以使用 tr 和 td 创建一个表，将 span 中的 HTML 内容插入到新的 td 元素中，在 span 之后立即插入 table，然后最后删除 span。

```
$("<table id='t'><tr><td>" + $("#s").html() +
    "</td></tr></table").insertAfter("#s");

$("#s").remove(); 
```

我假设“滑动”是指“交换”？所以这就是我删除原始跨度的原因。如果不是这种情况，请不要`remove`拨打电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T00:37:15.020

包装`#s`元素，然后用它自己的内容替换它：

```
$("#s")
  .wrap("<table id='t'><tr><td></td></tr></table>")
  .replaceWith(function(){ 
      return this.innerHTML; 
  }); 
```

演示：http: [//jsbin.com/elotan/edit#source](http://jsbin.com/elotan/edit#source)

在下面的评论中进一步讨论之后，OP 似乎希望能够创建一个临时表，并插入`#s`到它`td`的任何 . 以下可能会更好：

```
$("<table>", { 
  id:'t', html:'<tr><td>Foo</td><td>' + $("#s").html() + '</td></tr>'
}).replaceAll("#s"); 
```

# cpu-usage - 事件驱动编程中的主循环和替代方案

> ID：10467087
> 
> 赞同：0
> 
> 时间：2012-05-06T00:27:46.630
> 
> 标签：cpu-usage, event-driven

据我所知，事件驱动程序需要一个主循环，例如

```
while (1) {

} 
```

我只是好奇这个while循环是否会消耗高CPU使用率？有没有其他方法可以在不使用主循环的情况下实现事件驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:33:54.583

您的示例具有误导性。通常，事件循环看起来像这样：

```
Event e;
while ((e = get_next_event()) != E_QUIT)
{
    handle(e);
} 
```

关键点是对我们虚构的`get_next_event()`泵送函数的函数调用将是慷慨的，并鼓励上下文切换或任何适用于您的平台的调度语义，如果没有事件，该函数可能会允许整个进程休眠直到发生事件到达。

所以在实践中，没有什么可担心的，不，如果你想在程序运行时处理无限量的信息，没有任何替代无限循环的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:04:53.643

通常，像这样的循环的问题在于，当它在做一件工作时，它不能做任何其他事情（例如，Windows SDK 的旧的“合作”多任务处理）。下一个天真的跳跃通常是为每件工作产生一个线程，但这是非常危险的。大多数人最终会得到一个内部通常有一个线程池的执行器。然后，句柄调用实际上只是将工作入队，下一个可用线程将其出队并执行。并发线程数保持固定为池中工作线程的总数，当线程无事可做时，它们不会占用 CPU。

# css - 是否有一种跨浏览器的方法来精确地垂直调整内联元素的大小？

> ID：10467090
> 
> 赞同：4
> 
> 时间：2012-05-06T00:28:43.400
> 
> 标签：css, cross-browser

想象一下这样的 CSS：

```
.x {
  background: blue none;
  border-radius: 6px;
} 
```

和 HTML 像：

```
<div>Words and <span class="x">decorated</span> words</div> 
```

跨度读数“装饰”的高度在不同浏览器之间以及在运行相同浏览器的不同操作系统之间会有很大差异。

有什么办法可以让它保持相同的高度吗？

（我不想移动到内联块或使用完全相同的基线牺牲文本。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:32:41.700

我避免不同高度的经验是设置精确的*行高*和*字体大小*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:50:42.210

听起来还有其他原因导致您的问题。我刚刚尝试了一个基本的 html5 文档，其中包含您问题中的摘要，并将 Windows 上的对齐方式与 Chrome、Safari、FF 和 IE 进行了比较。除了 IE9 仅在跨度上方有 1px 的间隙外，它们都呈现完全相同。

授予 Mac 渲染字体与 Windows 不同，我没有在 linux 或 mac 上测试，但是 9px ！！！？？？以下是我要调查的一些事情：

首先，如果您在一个较大的项目中工作，请尝试一个基本的测试文件，这将限制您的变量。

其次，尝试设置显式字体并确保它们存在于所有测试机器上——也许 linux 正在回退到不同的字体。

第三，确保您没有在任何浏览器上放大或使用自定义字体大小浏览器设置（我不久前遇到了这个问题，不知何故我的 IE 被设置为 105% 缩放。）

最后，如果所有这些都失败了，您可能想尝试使用网络字体 (@font-face) 并查看它是否更严格地呈现。

* * *

编辑：

代替您评论中的新信息，另一种策略是使用 JavaScript 检查某些屏幕外元素的渲染高度，然后以编程方式相应地调整样式。你可能会得到一个巨大的 FOUC，但你可以使用一个 whiteout div 来最小化这种转变。

# ruby-on-rails - 是否有更短的方法来对同一个变量进行检查？

> ID：10467093
> 
> 赞同：0
> 
> 时间：2012-05-06T00:29:30.483
> 
> 标签：ruby-on-rails, ruby, if-statement

> **可能重复：**
> [优雅的链式“或”用于在 Ruby 中对同一变量进行测试](https://stackoverflow.com/questions/10260050/elegant-chained-ors-for-tests-on-same-variable-in-ruby)

我正在使用 Ruby on Rails 3.2.2，我想知道是否有*更短*的方法来执行与以下相同的检查：

```
if (variable == 'A') or (variable == 'B')
  ...
end

if (variable == 'A') or (variable == 'B') or ... or (variable == 'Z')
  ...
end 
```

请注意，`variable ==`对于每次检查，我必须多次重复与“部分”相关的语句。我不会重复那个“部分”并使事情变得更短。*Ruby/Ruby on Rails 有可能吗？如果是这样，我该怎么做？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:33:02.603

这是一种方法：

```
if %w[A B C].include? variable 
```

或者如果您有一个实际的值范围：

```
if ('A'..'Z').include? variable 
```

# iphone - 寻找应用内过渡（旋转屏幕效果）

> ID：10467100
> 
> 赞同：0
> 
> 时间：2012-05-06T00:30:52.997
> 
> 标签：iphone, transitions

我想要在我的应用程序中进行过渡，就像旧史酷比卡通中的神秘旋转墙一样。我希望屏幕在切换视图时旋转。有人为我指出正确的方向以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:58:11.187

或者这个，它使用更少的墨水：

```
UIView *bookCaseView;    // this is the container... the haunted wall
UIView *booksView;       // just an ordinary set of books, right?
UIView *spookyBackside;  // ruh-roh, raggy!

[UIView transitionWithView:containerView
           duration:0.2
           options:UIViewAnimationOptionTransitionFlipFromLeft
           animations:^{
               [booksView removeFromSuperview];
               [bookCaseView addSubview:spookyBackside]; }
           completion:NULL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:37:14.777

我认为这就是你要找的：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];

//optional if you want to do something after the animation
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(myAnimationDidFinish:finished:context:)];
//

[view2 setFrame:CGRectMake(0, 0, view2.frame.size.width, view2.frame.size.height)];
[view1 addSubview:view2];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:view1 cache:YES];
[UIView commitAnimations]; 
```

并翻转：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];

//optional if you want to do something after the animation
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(myOtherAnimationDidFinish:finished:context:)];
//

[view2 removeFromSuperview];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:view1 cache:YES];
[UIView commitAnimations]; 
```

# scala - Playframework 2.0 在视图模板中定义函数

> ID：10467101
> 
> 赞同：4
> 
> 时间：2012-05-06T00:30:58.797
> 
> 标签：scala, playframework, playframework-2.0

我正在使用 PlayFramework 2.0 开发一个项目。在阅读了一些 scala 之后，我想在 View 模板中嵌入一些动态代码。所以，我做了以下事情：

```
@{
    def getMystring(sequence:Int) = {
        if(patternForm != null && 
            patternForm.get().windowTreatments != null &&
            patternForm.get().windowTreatments.size() >= sequence + 1)
            sequence+""
        else 
            "" 
    }
}

<input type = "text" value = @getMystring(1)></input>
... 
```

我很确定它会起作用，但我得到了一个 "not found: value getMyString Error occurred" 。我做了什么明显错误的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:22:03.807

尝试像模板一样启动它，像这样

```
@getMystring(sequence:Int) = {

[...] 
```

看看[https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html](https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:39:22.843

问题是 play 定义了一个非常狭窄的范围，并且无法识别当前大括号之外的 defs。

您可以更改 def 的最后一个大括号的位置以包含输入标签，然后它应该可以工作。

或者您可以按照 opensas 的建议进行操作。

```
@getMystring(sequence:Int) = {

[...] 
```

# java - 静态变量不变

> ID：10467108
> 
> 赞同：0
> 
> 时间：2012-05-06T00:31:55.817
> 
> 标签：java, static, jmonkeyengine

我开始使用 jMonekyEngine，它是与 Swing GUI 交互的简单方法。按照他们的教程[http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:swing_canvas](http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:swing_canvas)

一切正常，我加载了所有内容，但是我在修改内容时遇到了麻烦。

根据他们的教程，不断更新并发生在这里：

```
public void simpleUpdate(float tpf) {
    geom.rotate(0, 2 * tpf, 0);
} 
```

（这是旋转对象教程中的一个示例）。我想要做的只是增加和降低旋转速度（通过使用在 Swing gui 中的 ActionListener 中更新的变量更改 2 或 tpf。

但是，由于在他们的教程中他们声明要在 main 方法中创建 swing gui，所以我必须创建一个静态变量才能更改它。

```
static float rotate = 0.0f; 
```

它在 main 方法中被修改，但是当尝试像这样使用它时：

```
public void simpleUpdate(float tpf) {
    geom.rotate(0, rotate * tpf, 0);
} 
```

它保持不变为初始值。我尝试创建一个 GUI 类来构建 gui（扩展 JPanel）并使用 getter 和 setter，但仍然没有。任何帮助将不胜感激！谢谢！

编辑：这是我更改旋转值的方法：

```
JButton faster = new JButton("Faster");
faster.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        rotate +=0.1f;
    }
}); 
```

在主要方法里面。旋转是一个静态字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:20:36.193

这对我有用

[http://test.jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_main_event_loop](http://test.jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_main_event_loop) http://test.jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_input_system?s[]=input

你的动作监听器真的在点击时触发了事件吗？也许你在那里有问题，而不是在旋转变量中。请注意，我在此示例中没有使用 swing ..

```
import com.jme3.app.SimpleApplication;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;

/** Sample 4 - how to trigger repeating actions from the main update loop.
 * In this example, we make the player character rotate. */
public class HelloLoop extends SimpleApplication {

    public static void main(String[] args){
        HelloLoop app = new HelloLoop();
        app.start();
    }

    protected Geometry player;

    @Override
    public void simpleInitApp() {

        Box b = new Box(Vector3f.ZERO, 1, 1, 1);
        player = new Geometry("blue cube", b);
        Material mat = new Material(assetManager,
          "Common/MatDefs/Misc/Unshaded.j3md");
        mat.setColor("Color", ColorRGBA.Blue);
        player.setMaterial(mat);
        rootNode.attachChild(player);

        initKeys();
    }

    /* This is the update loop */
    @Override
    public void simpleUpdate(float tpf) {
        // make the player rotate
        player.rotate(0, val*tpf, 0); 
    }
    float val = 2f;
    private void initKeys() {
        // Adds the "u" key to the command "coordsUp"
        inputManager.addMapping("sum",  new KeyTrigger(KeyInput.KEY_ADD));
        inputManager.addMapping("rest",  new KeyTrigger(KeyInput.KEY_SUBTRACT));

        inputManager.addListener(al, new String[]{"sum", "rest"});
    }
      private ActionListener al = new ActionListener() {
        public void onAction(String name, boolean keyPressed, float tpf) {
          if (name.equals("sum") ) {
              val++;
          }else if (name.equals("rest")){
              val--;
          }
        }
      };
} 
```

# iphone - 如何在 GLSL (OpenGL ES 2.0) 中定义常量数组？

> ID：10467110
> 
> 赞同：16
> 
> 时间：2012-05-06T00:32:22.270
> 
> 标签：iphone, opengl-es, glsl, fragment-shader

我只想存储每个片段计算所需的权重数组。

这：

```
float weights[5] = float[5](3.4, 4.2, 5.0, 5.2, 1.1); 
```

只是抛出这个：

```
ERROR: 0:30: ']' : syntax error syntax error
ERROR: 0:30: ';' : syntax error syntax error 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-06T12:50:19.100

来自[OpenGL ES SL 1.0 规范](http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf)，段落`4.1.9 Arrays`（第 24 页）：

> 没有在声明时从着色器中初始化数组的机制。

请注意，这已被*有意省略*。根据[这篇文章](https://stackoverflow.com/a/3456749/1262542)，OpenGL ES 2 的 OpenGL ES SL 版本基于[OpenGL SL 1.2](http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.20.8.pdf)。同一段（第 20 页）包含：

> 数组可以具有由数组构造函数形成的初始化器：
> 
> ```
>  float a[5] = float[5](3.4, 4.2, 5.0, 5.2, 1.1);
>       float a[5] = float[](3.4, 4.2, 5.0, 5.2, 1.1);  // same thing 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-23T01:20:08.580

```
precision highp float;

const float a[5] = float[5](3.4, 4.2, 5.0, 5.2, 1.1); 
```

它适用于 Android KitKat 版本（OpenGL ES 2.0）。

# lisp - Lisp - 消除语法中不可访问和非生产性元素的中间结果

> ID：10467111
> 
> 赞同：1
> 
> 时间：2012-05-06T00:32:28.423
> 
> 标签：lisp, common-lisp

我已经实现了一个问题，它从语法 (Vn;Vt;P;S) 中确定非生产性或不可访问的元素，其中 Vn - 变量集；Vt- 终端集和 P - 生产规则，以及 S - 开始符号。

```
;;; Defining a grammar
(defvar *VN* '(A B C D S)) ; non-terminal variables
(defvar *VT* '(k m n)) ; terminal
(defvar *P* '((S A B) ; set of production rules
              (S C D)
              (S A k)
              (A k)
              (B m)
              (B D m D)
              (C n)))

;;; FINDING PRODUCTIVE ELEMENTS

(defun PROD-STEP (VT P PRODS)
  ;;(format t "P = ~S~%" P)
  ;;(format t "PRODS = ~S~%" PRODS)
  (if (null P)
      PRODS
      (if (subsetp (rest (first P)) (union VT PRODS))
          (PROD-STEP VT (rest P) (union (cons (first (first P)) nil) PRODS))
          (PROD-STEP VT (rest P) PRODS))))

(defun PROD-AUX (VT P PRODS oldLength)
  (if (= (length PRODS) oldLength)
      PRODS
      (PROD-AUX VT P (PROD-STEP VT P PRODS) (length PRODS))))

(defun PROD (VT P)
    (PROD-AUX VT P nil -1))

;;; END OF FINDING PROD ELEMENTS

(trace PROD-STEP)
(trace PROD-AUX)
(trace PROD)
(PROD *VT* *P*)

;;; FINDING ACCESSIBLE ELEMENTS

(defun ACCESS-STEP (P ACC)
  ;;(format t "Pacc = ~S~%" P)
  ;;(format t "ACC = ~S~%" ACC)
  (if (null P)
      ACC
      (if (member (first (first P)) ACC)
          (ACCESS-STEP (rest P) (union (rest (first P)) ACC))
          (ACCESS-STEP (rest P) ACC))))

(defun ACCESS-AUX (P ACC oldLength)
  (if (= (length ACC) oldLength)
      ACC
      (ACCESS-AUX P (ACCESS-STEP P ACC) (length ACC))))

(defun ACCESS (P S)
  ;;(format t "Paccess = ~S~%" P)
  (ACCESS-AUX P (cons S nil) 0))

 ;;; END OF FINDING ACCESSIBLE ELEMENTS

(trace ACCESS-STEP)
(trace ACCESS-AUX)
(trace ACCESS)
(ACCESS *P* 'S)

;;; REMOVING INACCESSIBLE AND NOT PRODUCTIVE ELEMENTS

(defun BuildRules-AUX (VT ACCS PRODS P newP)
  ;;(format t "newP = ~S~%" newP)
  (if (null P)
      newP
      ;; VN' = (ACCESS(G) INTERSECT PROD(G))
      ;; VT' = (VT INTERSECT ACCESS(G))
      ;; DACA REGULA ESTE A->X, A = (first (first P)) SI X = (rest (first P))
      ;; VERIFICAM DACA A APARTINE VN' SI X APARTINE (VT' UNION VN')
      (if (and (member (first (first P)) (intersection PRODS ACCS))
               (subsetp (rest (first P))
                        (union (intersection ACCS PRODS)
                               (intersection VT ACCS))))
          (BuildRules-AUX VT ACCS PRODS (rest P) (union newP 
                                                        (cons (first P) nil)))
          (BuildRules-AUX VT ACCS PRODS (rest P) newP))))

(defun BuildRules (VT ACCS PRODS P)
  (BuildRules-AUX VT ACCS PRODS P nil))

(trace BuildRules-AUX)
(trace BuildRules)

(BuildRules *VT* (ACCESS *P* 'S) (PROD *VT* *P*)*P*)

(defun SIMPL-AUX (VN VT P S ACCS PRODS)
  (setq ACCS (ACCESS P S))
  (setq PRODS (PROD VT P))
  (if (and (null (set-difference (union VN VT) ACCS))
           (null (set-difference VN PRODS)))
      (cons VN (cons VT (cons P S)))
      (SIMPL-AUX (intersection ACCS PRODS)
                 (intersection VT ACCS)
                 (BuildRules VT ACCS PRODS P)
                 S
                 ACCS
                 PRODS)))

(defun SIMPL (VN VT P S)
  (SIMPL-AUX *VN* *VT* *P* 'S nil nil))

;;; END OF REMOVING INACCESSIBLE AND NOT PRODUCTIVE ELEMENTS

;;; GETTING THE RESULTS

(SIMPL *VN* *VT* *P* 'S) 
```

但现在我坚持得到一些中间结果。

为了高效和易于访问，很明显我会使用`PROD`and `ACCESS`,

```
(PROD *VT* *P*) 
(ACCESS *P* 'S) 
```

但我不确定如何获得一些中间结果：

1.  非生产性
2.  无法访问

因为我只有一个功能：

```
(BuildRules *VT* (ACCESS *P* 'S) (PROD *VT* *P*) *P*) 
```

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:03:28.310

您只需要使用`build-rules`仅过滤一种谓词的替换函数。顺便说一句，使用 可以写得更清楚`remove-if-not`。

# c++ - 如何在windows api中将一个窗口一分为二

> ID：10467112
> 
> 赞同：-1
> 
> 时间：2012-05-06T00:32:38.370
> 
> 标签：c++, winapi, gdi, direct3d

基本思想是将窗口一分为二，这样我就可以用 GDI 绘制 2 张图片，或者最终使用 Direct3D 来显示 2 个不同的场景。我如何才能仅使用 Windows API 来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:49:03.363

可能最简单的方法是创建 3 个窗口，一个父窗口和两个非对话框子窗口，使用 CreateWindowEx 和 WS_CHILD 标志为 babiges 设置尺寸和位置，以便为窗口中的半人像腾出空间！

我很快想出了这个源示例：

[http://codepaste.dev7studios.com/item/t7mvpvv3w](http://codepaste.dev7studios.com/item/t7mvpvv3w)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:36:55.490

使用 CreateWindow 创建 2 个单独的窗口。

# meteor - 如何通过 Meteor 实现对不使用光纤的包的调用？

> ID：10467121
> 
> 赞同：2
> 
> 时间：2012-05-06T00:34:14.093
> 
> 标签：meteor

我正在尝试在 Meteor 中使用[twit](https://github.com/ttezel/twit)来与 Twitter REST api 通信。

如果我自己调用它，它可以在 /server/ 目录中的 server.js 文件中正常工作。如果我从一个观察中包装或调用它，甚至调用一个从观察中调用 twit 函数的函数，我会得到错误。

例如，这在 /server/server.js 中工作得非常好。

```
T.post('statuses/update', { status: 'hello world!' }, function(err, reply) {
  console.log('error: ' + JSON.stringify(err,0,4));
  console.log('reply: ' + JSON.stringify(reply,0,4));
}); 
```

但是，假设我想说每次插入记录时都调用 Twitter。

```
var query = Posts.find({}, {fields: {}});

var handle = query.observe({
added: function(post, before_index){
    if(post.twitter_id_str === undefined || post.twitter_id_str === '' ||
        post.twitter_id_str === null) { 

        T.post('statuses/update', { status: 'hello world!' }, function(err, reply) {
          console.log('error: ' + JSON.stringify(err,0,4));
          console.log('reply: ' + JSON.stringify(reply,0,4));
          if(reply){
            // TODO update record with twitter id_str
                            //  BREAKS here - crash, restart
            console.log('incoming twitter string: ' + reply.id_str);
            Posts.update(
                {_id: post._id},
                {$set:{twitter_id_str:reply.id_str}}
            );
        }
});
    } else {
        console.log('remove me we have it: ' + post.twitter_id_str);
    }   
}
}); 
```

这会引发此错误，服务器崩溃并重新启动，但在我评论了 Break 的地方没有运行代码逻辑。

```
app/packages/mongo-livedata/collection.js:215
        throw e;
          ^
Error: Meteor code must always run within a Fiber
    at [object Object].get (app/packages/meteor/dynamics_nodejs.js:14:15)
    at [object Object]._maybeBeginWrite (app/packages/mongo-livedata/mongo_driver.js:68:41)
    at [object Object].update (app/packages/mongo-livedata/mongo_driver.js:191:20)
    at [object Object].update (app/packages/mongo-livedata/collection.js:203:32)
    at app/server/server.js:39:13
    at /usr/lib/meteor/lib/node_modules/twit/lib/oarequest.js:85:16
    at passBackControl (/usr/lib/meteor/lib/node_modules/twit/node_modules/oauth/lib/oauth.js:359:11)
    at IncomingMessage.<anonymous> (/usr/lib/meteor/lib/node_modules/twit/node_modules/oauth/lib/oauth.js:378:9)
    at IncomingMessage.emit (events.js:88:20)
    at HTTPParser.onMessageComplete (http.js:137:23)
Exited with code: 1 
```

总而言之，Twitter 代码本身运行良好，但在 Meteor 纤维材料中则不行。我尝试将它放在另一个函数中并从观察等中调用它......无济于事。

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:13:50.043

您需要在光纤中执行 twit post API 调用：

Fiber(function() { ... 你的 twit API 调用 ... }).run()

看看这个相关的问题：[在服务器上调用 Collection.insert 时，“Meteor code must always run within a Fiber”](https://stackoverflow.com/questions/10192938/meteor-code-must-always-run-within-a-fiber-when-calling-collection-insert-on-s)

# netbeans - 为什么 Netbeans 知道我的全名和电子邮件？

> ID：10467133
> 
> 赞同：2
> 
> 时间：2012-05-06T00:35:29.123
> 
> 标签：netbeans, ide

严肃的问题：我刚刚提交给 github 并感到震惊：Netbeans 已将我的全名和我的私人电子邮件地址（我从未在 IDE、网站等中使用过）转移到 github（作为提交者的姓名和提交者的电子邮件地址）。Netbeans 到底是怎么知道的？某种非常令人毛骨悚然的 cookie-reading-gravator-github-social-bullshit-mashup ？

全世界都可以看到姓名和电子邮件，包括谷歌的蜘蛛。

你知道这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T16:25:50.730

我认为最好的解决方案是在 NetBeans 的提交对话框中设置提交者的用户名和电子邮件地址，请参阅[NetBeans Git 支持用户指南](http://netbeans.org/kb/docs/ide/git.html#committing)。

Netbeans 读取本地存储库根文件夹中的全局 .gitconfig 文件（在您的主目录中）和 .git/config 文件，并从那里提取您的用户名和电子邮件，并在必要时使用它们（在执行推送、拉取或获取时连接到 github，提交到本地存储库时），但如果您想在不同的用户名下提交，可以在提交对话框中覆盖它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T19:10:09.917

默认情况下，Git 会将您的姓名和电子邮件添加到您所做的每个提交中。`git config`您可以使用该命令在全局或每个 repo 的基础上更改这些。通常，除非您明确告知，否则 Git 不知道您的姓名或电子邮件，但我不知道 Netbeans 是否为您配置它。

```
git config --global user.name  "John Doe"
git config --global user.email "john@example.com" 
```

但是，更改这些设置只会影响您从那时起所做的任何新提交。要从您的存储库中删除对您的电子邮件地址的任何现有引用，您必须编辑提交。请参阅：[如何在 Git 中更改提交的作者？](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)

完成此操作后，您应该能够将这些更改强制推送到 GitHub。

# mysql - 从数据库中显示的最大字数

> ID：10467134
> 
> 赞同：1
> 
> 时间：2012-05-06T00:35:42.877
> 
> 标签：mysql, database, max, words

我经营着一个失物招领的宠物网站，但在列出丢失的宠物时遇到了麻烦。

[http://alphapets.co.nz/lost/lost.php](http://alphapets.co.nz/lost/lost.php)

我不知道如何在描述中只显示少量单词，以便所有列表的大小相同并且文本不会溢出。

php如下：

```
// Retrieves data from MySQL 
$data2 = mysql_query("SELECT * FROM pets WHERE status LIKE '".
                     $thisPage."' ORDER BY `pets`.`ID` DESC")
  or die(mysql_error());  //Puts it into an array 

while($info2 = mysql_fetch_array( $data2 )) { 
  //Outputs the image and other data
  echo "<div id='wrapper4'>
<div id='pet_profile_image'>
<img src=http://alphapets.co.nz/lost/petimages/resized_$info2[date]$info2[photo]
     class='mainimage'>
</div>

<div id='pet_description'>
  <h2><a href='/download.php?ID=$info2[ID]'>$info2[name]</a> </h2><br />
  <b>Location:</b> $info2[town], $info2[city]  <br />
  <b>Description</b>: $info2[description] <br /><br />
  <a href='/download.php?ID=$info2[ID]'>Click here for more</a>
</div>
</div>"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:10:13.020

这可能会有所帮助；

[http://www.daniweb.com/web-development/php/threads/131085/how-to-display-part-of-text-from-msql](http://www.daniweb.com/web-development/php/threads/131085/how-to-display-part-of-text-from-msql)

# spring - 非托管线程中的 WebSphere JNDI 查找

> ID：10467135
> 
> 赞同：1
> 
> 时间：2012-05-06T00:35:49.600
> 
> 标签：spring, jakarta-ee, websphere, apache-camel, openjpa

我在 WebSphere Application Server 7 上部署了一个 Java EE 应用程序（实际上，它是一个 apache camel 应用程序）。

我的应用程序使用来自 Web 服务（从 WAS 中的 servlet 容器启动的线程）和 JMS 队列（不是 SI-BUS，而是 WebSphere MQ，如果重要的话）的服务请求。对于 JMS 侦听器，Camel（或者可能是底层的 Spring 框架）会启动自己的线程（或多或少似乎是简单的 java 线程）来处理 JMS 请求。

我还有一个附加到应用程序的事务数据库。所以，在春天，我定义了这样的东西来获取事务管理器（可能是在 JTA 中构建的 WebSphere）。

```
<tx:annotation-driven/> 
```

所以我的问题是，当 Camel/JMS 在应用程序中触发事件时，我会收到这样的错误：

```
org.apache.openjpa.persistence.PersistenceException: TransactionManager not found in JNDI under name java:comp/websphere/ExtendedJTATransaction 
```

似乎不是由容器本身启动的线程无法正确进行 JNDI 查找。有没有办法解决这个问题？

# python - Python 下载每张图片 Vbulletin

> ID：10467142
> 
> 赞同：0
> 
> 时间：2012-05-06T00:37:43.957
> 
> 标签：python, download

我想下载我碰巧经常出现的留言板（project1999.org）的特定论坛线程的线程中的每张图片。这不是家庭作业。我编程很差，我用的是linux。我被卡住了有人可以帮忙吗？我将非常感激。

有问题的线程是关于猫图像的，哈哈。这是：[http ://www.project1999.org/forums/showthread.php?t=37779](http://www.project1999.org/forums/showthread.php?t=37779)

我正在使用 BeautifulSoup 似乎不错，不是吗？

请帮忙 ：{

```
import urllib2
from BeautifulSoup import BeautifulSoup

def DownloadImagesVB(startUrl, saveDirectory):
    startPage = 1
    while True:
        url = startUrl + "&p=" + str(startPage)
        print url
        startPage += 1
        urllib2.urlopen(startUrl)

if __name__=="__main__":
    url = "http://www.project1999.org/forums/showthread.php?t=37779"
    path = "/home/r00t/cats"
    DownloadImagesVB(url, path) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:28:24.257

```
import requests
import lxml.html

# here's some ugly code I've glued together from my IPython %history:
#
# I know it's crap, It's about ~10mins from start to finish, one
# alternative would be to simply generate <img src=""> links for each of
# the images and then rely on Firefox/Chrome to save the whole page...
# this would make prettier file names, and I get the impression this 
# is a one-off script...
# --Stuart

def find_images(url):

    root=lxml.html.parse(url).getroot()
    root.make_links_absolute()
    imgs = []
    for i in root.xpath('//div[contains(@id, "post_message")]//img'):
        src = i.attrib.get('src','')
        if 'project1999' not in src:
            imgs.append(i.attrib.get('src',''))
    return imgs

def main():
    nums=[x+1 for x in range(52)]
    urls=['http://www.project1999.org/forums/showthread.php?s=6be291d52837a8ab512858dde188569c&t=37779&page=%d' %num for num in nums]

    todownload = []
    for url in urls:
        for img in find_images(url):
            todownload.append(img)

    todownload = list(set(todownload)) #remove duplicates

    print "downloading %d images" % len(todownload)

    # save all the images without extensions.. (lazy)
    for count, i in enumerate(todownload):
        try:
            print "%d downloading %s" % (count, i)
            open('imgs/%d' % count, 'w').write(requests.get(i).content)
        except:
            print "couldn't download %s" %i

if __name__ == '__main__':
    main() 
```

*目前正在酝酿中...*

```
...
92 downloading http://i117.photobucket.com/albums/o60/mven42/f1b88059.jpg
93 downloading https://lh4.googleusercontent.com/-cXKgVQVodRI/TmvYln0uj6I/AAAAAAAAO1k/H4sx5srDX6Q/Cat-Gifs-Shared-by-Gplus-Jay-Puri_62.gif
94 downloading http://26.media.tumblr.com/tumblr_ls8pbds3sL1qfjjglo1_400.gif
95 downloading http://i43.tinypic.com/169goet.gif
96 downloading http://i.imgur.com/5qbXk.gif
97 downloading http://img818.imageshack.us/img818/547/hahajkg.jpg
98 downloading http://img815.imageshack.us/img815/6856/catmb.jpg
99 downloading http://i.imgur.com/PDiEa.gif
100 downloading http://29.media.tumblr.com/tumblr_lnybntpx2o1qlue6co1_100.gif
101 downloading http://1.bp.blogspot.com/-G6LADm3UlmE/TfeDHI9iQNI/AAAAAAAAAsw/sZ0R6wcdZgc/s640/cat+vs+dog+002.jpg
102 downloading http://i1179.photobucket.com/albums/x393/Drogula/gifs/1312351009032.gif
103 downloading http://26.media.tumblr.com/tumblr_lltfczZDdA1qkbyimo1_500.gif
104 downloading http://desmond.yfrog.com/Himg860/scaled.php?tn=0&server=860&filename=snajs.jpg&xsize=640&ysize=640
105 downloading http://i357.photobucket.com/albums/oo12/azen32/2011-11-0919-25-15998.jpg
106 downloading http://img641.imageshack.us/img641/2678/caturday35.png
107 downloading http://icanhascheezburger.files.wordpress.com/2007/12/funny-pictures-cat-gravity-wins.jpg
108 downloading http://s3-ak.buzzfed.com/static/enhanced/web05/2011/12/7/17/anigif_enhanced-buzz-2926-1323297290-29.gif
109 downloading http://a5.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/315738_2385906201789_1074780041_32733561_1154490844_n.jpg 
```

[这是 330 张图片的列表](http://sente.cc/c/5fg8/images.txt)

# c# - 查询列表是否更快 还是数据库？

> ID：10467143
> 
> 赞同：16
> 
> 时间：2012-05-06T00:37:44.893
> 
> 标签：c#, asp.net, database, performance, linq

我最近遇到了几种情况，我需要同一张表中的不同数据。一个例子是，我将遍历每个“交付驱动程序”并为每个要交付的客户生成一个可打印的 PDF 文件。

在这种情况下，我将所有客户都拉出来并存储到

```
List<Customer> AllCustomersList = customers.GetAllCustomers(); 
```

当我遍历送货司机时，我会做这样的事情：

```
List<Customer> DeliveryCustomers = AllCustomersList.Where(a => a.DeliveryDriverID == DriverID); 
```

我的问题：我通过查询 List 对象的方式是否比每次查询数据库中与送货司机相关联的客户记录更快？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T00:52:03.327

没有准确的行数，如果你通过它，你应该在内存中查询数据库`List<T>`

但经验法则是，DB 旨在处理大量数据，并且它们具有优化“机制”，而在内存中则没有这样的东西。

**因此，您需要对其进行基准测试，以查看每次对您很重要时，**对于该数量的行，到 DB 的往返是否值得

 ***“我们应该忘记小的效率，说大约 97% 的时间：**过早优化是万恶之源**”*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:26:00.070

避免往返数据库是有关数据库性能调整的主要规则之一，尤其是当数据库位于网络上并且有多个用户访问它时。

从另一个角度来看，将大型结果集像您的客户数据一样放入内存中，效率不高，并且可能不会比您需要时前往 DB 更快。

避免往返的内存集合的一个很好的用途是用于查找表（即客户类别、客户区域等），这些表不会经常更改。这样您就可以避免在您的主要客户选择查询中加入，从而使其更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-28T07:36:12.220

为什么不使用[Redis](http://redis.io/)？, 这是一个内存数据库，速度非常快。**

# c# - 如何忽略 web.config 中编写的“maintainScrollPositionOnPostBack”属性？

> ID：10467149
> 
> 赞同：4
> 
> 时间：2012-05-06T00:39:30.307
> 
> 标签：c#, asp.net, .net

我在 web.config 文件中设置了**“maintainScrollPositionOnPostBack=true”来满足需求。**一切正常，但问题是这个全局设置忽略了我的 control.focus() 属性。

例如：

```
myLable.focus(); 
```

myLable 无法集中注意力。**无论“maintainScrollPositionOnPostBack”**属性如何，我如何才能将注意力集中在控件上 ？任何帮助将不胜感激...！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:47:00.880

设置 MaintainScrollPositionOnPostBack=false；就在您要在标签上使用焦点的位置之前。This article详细讨论了它是[如何工作的](http://www.4guysfromrolla.com/articles/111407-1.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:49:18.693

maintainScrollPositionOnPostBack 依赖于 Web.Config 中的浏览器配置条目，Microsoft 不再支持或推荐这些条目 - 事实上，它支持的浏览器版本已经过时。

使用 jQuery 来实现这个效果，而且它是跨浏览器友好的。

仅供参考：这是另一个处理此问题的方法：

[http://www.kodergurl.com/2010/08/maintain-scroll-position-on-post-back.html](http://www.kodergurl.com/2010/08/maintain-scroll-position-on-post-back.html)

# codeigniter - 使用 mod_rewrite 通过 Codeigniter 重定向旧 url

> ID：10467156
> 
> 赞同：0
> 
> 时间：2012-05-06T00:40:35.670
> 
> 标签：codeigniter, mod-rewrite, url-rewriting

我正在使用 codeigniter 框架重新开发一个网站。

当我们上线时，我们希望确保一些旧 URL 将被重定向到新站点上的相应页面。

因此，我将我认为正确的规则放入现有的 htaccess 文件中，置于 CodeIgniter 应用的其他规则之上。

但是，它们没有受到影响。谁能建议我在这里缺少什么？

```
# pickup links pointing to the old site structure
RewriteRule ^(faq|contact)\.php$ /info/ [R=301]
RewriteRule ^registration\.php$ /register/ [R=301]
RewriteRule ^update_details\.php$ /change/ [R=301]

# Removes access to the system folder by users.
RewriteCond %{REQUEST_URI} ^_system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

# This snippet prevents user access to the application folder
# Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^myapp.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

# This snippet re-routes everything through index.php, unless
# it's being sent to resources
RewriteCond $1 !^(index\.php|resources)
RewriteRule ^(.*)$ index.php/$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:50:14.480

尝试将 [L]ast 标志添加到您的 R=301 标志 => [L,R=301] 以确保没有应用其他规则，并且，为了确定，尝试重定向到完整的 URL，并且，更确定您没有删除任何内容，将 RewriteEngine On 添加到顶部并设置 RewriteBase。

让你的第一行看起来像

```
RewriteEngine On
RewriteBase /
RewriteRule ^(faq|contact)\.php$ http://www.YOURDOMAIN.XYZ/info/ [L,R=301] 
```

并检查浏览器中的 URL 在您调用例如常见问题页面时是否更改。

# google-chrome - Chrome 扩展，获取 devtools HAR 数据

> ID：10467157
> 
> 赞同：2
> 
> 时间：2012-05-06T00:41:02.810
> 
> 标签：google-chrome, google-chrome-extension, har

是否可以从谷歌浏览器扩展中获取页面的[HAR（HTTP 存档） ？](http://www.softwareishard.com/blog/har-12-spec/)我想知道用我的插件加载网站需要多长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:23:24.733

您是要获取扩展程序的 HAR 数据，还是要使用插件获取浏览器的加载时间？无论哪种方式，Google Developer Tools -> Network -> 右键单击​​，保存 HAR 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T01:31:47.093

您可以使用 chrome.devtools.network 按照 [http://developer.chrome.com/extensions/devtools.network.html获取 HAR 文件](http://developer.chrome.com/extensions/devtools.network.html)

# java - 让mysql和java一起工作

> ID：10467160
> 
> 赞同：0
> 
> 时间：2012-05-06T00:41:28.873
> 
> 标签：java, eclipse, mysql-connector

我在 Mac Os X 上有 Eclipse Indigo，并且我已经下载了 mysql 连接器（5.1 版）。
我已将 jar 添加到项目中，并且正在使用以下代码：

```
public class Test 
{
    public static void main (String[] args)
    {
        try {
        String url = "jdbc:msql://200.210.220.1:1114/Demo";
        Connection conn = DriverManager.getConnection(url,"","");
        Statement stmt = conn.createStatement();
        ResultSet rs;

        rs = stmt.executeQuery("SELECT Lname FROM Customers WHERE Snum = 2001");
        while ( rs.next() ) {
            String lastName = rs.getString("Lname");
            System.out.println(lastName);
        }
        conn.close();
    } catch (Exception e) {
        System.err.println("Got an exception! ");
        System.err.println(e.getMessage());
    }
    }
} 
```

当我尝试执行程序时，我得到了这个异常：

```
Got an exception! 
No suitable driver found for jdbc:msql://200.210.220.1:1114/Demo 
```

我的问题是：如何安装驱动程序？我还应该做什么？
安装驱动程序后，如何获取我的数据库 URL（我使用的是 mysql 5.5）？
我没有在网上找到有效的指南，它们都太具体了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:46:45.253

您在 jdbc:mysql 中缺少“y”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:37:32.260

您的 JDBC 连接 URL 不正确，请参考[官方文档](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)检查 URL 所需的格式。

在您的情况下，URL 将变为：

```
String url = "jdbc:mysql://200.210.220.1:1114/Demo"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T06:08:42.383

您正在使用 MySQL，URL 应如下所示：

`jdbc:mysql://200.210.220.1:1114/Demo`

可能是，查看IP和PORT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T01:59:49.120

您可能已将 jar 添加到项目中，但您是否也将其添加到项目类路径中？将 jar 作为文件存在于项目中并不能解决问题。您的程序显然无法访问 jar 文件。右键单击您的项目-> 构建路径-> 在此处添加 jar。

假设您拥有正确的主机地址和端口号，数据库 URL 看起来没问题。

# c - C中的简单随机数生成器不起作用

> ID：10467161
> 
> 赞同：1
> 
> 时间：2012-05-06T00:41:33.817
> 
> 标签：c, random

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(int argc, char** argv) {

    srand(time(NULL));
    int r = rand();

    printf("%d\n", r);

    return (EXIT_SUCCESS);
} 
```

当我在几秒钟内重复运行此代码片段时，我得到了越来越多的数字，例如 213252683、213975384、214193875、214445980。在我看来，我只是在打印出系统时间 - 这个假设似乎待我添加行时确认 `printf("%d\n", time(NULL))`；到代码。我究竟做错了什么？我在 Mac OS X 10.6.1 (Snow Leopard) 上运行，但我只使用标准库函数，所以它不应该有所作为。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:48:30.103

伪随机数生成为从初始种子派生的混沌序列。`srand`通过设置这个种子来初始化随机性。显然，序列中的第一个随机数是种子本身 - 这是`time()`您设置的值。

这就是为什么生成随机序列的正确方法是`srand()`在程序开始时只调用一次，然后只调用`rand()`（好吧，也许直到序列开始循环，这不应该太快发生，但是取决于生成函数）。`srand()`如您所见，过于频繁地调用会降低随机性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:51:19.373

如果它有帮助，我通常会这样使用它：

```
int rand_between(int min, int max)
{
  static int flag = 1;
  FILE *urandom;
  unsigned int seed;

  if (flag)
    {
      flag = 0;
      if (!(urandom = fopen ("/dev/urandom", "r")))
      fprintf(stderr, "Cannot open /dev/urandom!\n");
      fread(&seed, sizeof(seed), 1, urandom);
      srand(seed);
    }
  return ((int)rand() % (max - min)) + min;
} 
```

要获得一个随机的大写字母：

```
char letter = (char)rand_between('A', 'Z'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T00:53:19.130

> 当我在几秒钟内重复运行此代码段时，我得到的数字序列越来越多，例如 213252683、213975384、214193875、214445980。

我无法重现这一点。在我的系统（Debian Linux）上，我得到未排序的数字。此外，结果与您在 print 时得到的结果不同`time(NULL)`。

这应该是：您正在使用当前时间（以秒为单位）为随机数生成器播种。因此，只要时间（精确到秒）相同，您的程序就会打印相同的结果。

> 我究竟做错了什么？

嗯，这取决于你想要什么。如果您希望每次运行都使用随机数，则需要更好的随机性来源。您可以尝试`gettimeofday`具有更高分辨率（通常是 ms，我相信）的函数，例如 。此外，混入其他随机来源，例如进程的 ID。

在大多数程序中，您看到的效果是没有问题的，因为通常`srand()`只在开始时调用，然后`rand()`在每次调用时返回不同的数字。

如果你想要“安全”（即不可预测的）随机数，那就是另一回事了。参见例如[维基百科](http://en.wikipedia.org/wiki/Random_number_generation)的概述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T01:59:51.163

随机数生成器差异很大，因此很难在其他机器上重现。看起来您的实现中的第一个数字只是种子值。以我为例，第一个数字似乎与种子线性相关。一般来说，你会`srand`在一个程序中调用一次，`rand`多次调用，连续调用会得到更随机的结果。如果你想避免这个问题，这样做是合理的：

```
srand(time(NULL));
rand();
int r = rand();

printf("%d\n", r); 
```

第一次`rand`调用确保种子不会被返回，下一次调用应该选择看起来更随机的东西。请注意，如果您在足够短的时间跨度内运行该程序两次（这样`time(NULL)`两次运行都相同），您将获得完全相同的结果。这绝对是意料之中的——`pid + time`如果这是一个问题，请使用不同的种子值（可能是一个好的开始，或者只是一个更高分辨率的时间）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T04:06:51.603

您应该使用 random() 而不是 rand()。它在各方面都优于 rand()，它也包含在 stdlib 中。
试试下面的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv) {
int r = random();
printf("%d\n", r);
return (EXIT_SUCCESS);
} 
```

# ruby-on-rails - Twitter Bootstrap 工具提示不起作用？

> ID：10467163
> 
> 赞同：1
> 
> 时间：2012-05-06T00:42:00.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, twitter-bootstrap

我认为这很简单，但有些问题。我使用的唯一 Bootstrap gem 是[简单的形式 one](https://github.com/rafaelfranca/simple_form-bootstrap)。

我有以下html：

**应用程序/视图/用户/new.html.erb**

```
<div id="hint">hint</div> 
```

然后在我的javascript **application.js**文件中，我有：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap.min.js
//= require_self
//= require_tree .
//= require_tree ../../../vendor/assets/javascripts/.

$("#hint").popover({
    title: 'A title!',
    content: 'Some content!'
}) 
```

在[Twitter Bootstrap Tooltip Instructions](http://twitter.github.com/bootstrap/javascript.html#tooltips)中，它说只是把这个：

```
$('#example').tooltip(options) 
```

但我什么也得不到。我该如何使用它？

* * *

**回答**

我必须这样做才能让它工作：

```
<div id="hint">
  <a href="#" rel="tooltip" title="some content">hint</a>
</div>

jQuery( function($) {
    $("#hint a").tooltip()
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T00:49:00.190

我曾经遇到过同样的问题，发现如果我将我的`$(example).tooltip()`语句从 .js 文件的底部移到顶部，它就开始工作了。我从来没有弄清楚文件中的 JavaScript 是什么导致工具提示不起作用。

BTW, I am confused. Are you doing a tooltip or a popover? If it is a tooltip, you should have a link element, like this

```
<div id="hint"><a href="#" rel="tooltip" title="some content">hint</a></div> 
```

in your HTML and then

```
$("#hint a").tooltip() 
```

in your JavaScript.

# php - 使用 jquery 提交表单后隐藏 div？

> ID：10467165
> 
> 赞同：0
> 
> 时间：2012-05-06T00:42:14.430
> 
> 标签：php, javascript, jquery, forms, hide

我在表单提交按钮上使用了 onclick 功能来隐藏 div。但它并没有隐藏。做这个的最好方式是什么？提交表单后，我想在我的页面上隐藏一个 div。

```
<form action="" method="POST">
<input type="submit" onclick="hide_group_posts();">
</form>

<div id='div_i_want_to_hide'>
<?php include $_SERVER['DOCUMENT_ROOT']."page.php";?>
</div>

<script>
function hide_group_posts(){
$('#div_i_want_to_hide').hide();
}
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T00:45:10.880

```
$('form').submit(function(){
    $('#div_i_want_to_hide').hide();  
}); 
```

* * *

如果它对您没有帮助，则必须满足以下条件之一：

*   您没有引用 jQuery 库。
*   您没有使用 DOM 就绪事件包装代码。
*   你有错别字。
*   提交功能起作用了，你得到了新页面，因为你没有阻止默认值。

像这样防止它：

```
$('form').submit(function(e){
    $('#div_i_want_to_hide').hide();  
    e.preventDefault();
    // Or with: return false;        
}); 
```

# c# - 与代表的麻烦

> ID：10467167
> 
> 赞同：2
> 
> 时间：2012-05-06T00:42:39.933
> 
> 标签：c#, c++-cli

有一个类和一个委托 C#

```
public delegate void Super();
public class Event
{
    public event Super activate ;
    public void act()
    {
       if (activate != null) activate();
    }
 } 
```

和 C++/Cli

```
public delegate void Super();
public ref class Event
{
public:
    event Super ^activate;
    void act()
    {
        activate();
    }
}; 
```

在 C# 中，我在这样的类中创建多播委托（方法 Setplus 和 setminus）

```
public class ContainerEvents
{
    private Event obj;
    public ContainerEvents()
    {
      obj = new Event();
    }
    public Super Setplus
    {
      set { obj.activate += value; }
    }
    public Super Setminus
    {
      set { obj.activate -= value; }
    }
    public void Run()
    {
      obj.act();
    }
} 
```

但在 C++/Cli 中我有一个错误 -`usage requires Event::activate to be a data member`

```
public ref class ContainerEvents
{
    Event ^obj;
public:
    ContainerEvents()
    {
       obj = gcnew Event();
    }
    property Super^ Setplus
    {
        void set(Super^ value)
        {
            obj->activate = static_cast<Super^>(Delegate::Combine(obj->activate,value));
        }
    }

    property Super^ SetMinus
    {
        void set(Super^ value)
        { 
           obj->activate = static_cast<Super^>(Delegate::Remove(obj->activate,value));
        } 
     }

     void Run()
     {
        obj->act();
     }
}; 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:33:57.333

请参阅：http: [//msdn.microsoft.com/en-us/library/ms235237 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms235237(v=vs.80).aspx)

C++/CLI 遵循与 C# 相同的类比。在 C# 中定义它是非法的：

```
public Super Setplus
{
    set { obj.activate = Delegate.Combine(obj.activate, value); }
} 
```

C++/CLI 也是如此。使用现代语法中定义的 +=/-= 表示法。

```
property Super^ Setplus
{
    void set(Super^ value)
    {
        obj->activate += value;
    }
} 
```

# android - 在android上绘制非矩形形状

> ID：10467175
> 
> 赞同：2
> 
> 时间：2012-05-06T00:44:23.237
> 
> 标签：android, android-layout

我正在尝试使用 android xml drawables 来实现这个形状：

![在此处输入图像描述](../Images/405d144f223817b8733a96bd0b427d38.png)

我能够得到矩形，但我可以弄清楚得到三角形的尖端。我还需要对这个形状应用渐变。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:17:52.193

我认为利用 XML drawables 是通过 9-patch drawable 创建一个剪贴蒙版，然后将其投影到一个矩形 drawable 上。

不过，这可能需要一个自定义的可绘制类。我搜索并发现这个 Q/A 可能会解决这部分问题。[在 Android 上屏蔽 Drawable/Bitmap](https://stackoverflow.com/questions/2623888/masking-a-drawable-bitmap-on-android)

查看 SDK 文档[`ClipDrawable`](http://developer.android.com/reference/android/graphics/drawable/ClipDrawable.html)意味着它会对此有所帮助，但事实证明它可能是一个命名不佳的类。它没有做我想的那样。

更简单的方法是从对象本身创建一个 9-patch。不幸的是，当你这样做时，你会失去渐变的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:06:05.277

您可以使用 9-patch 来绘制它。

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

只需用三角形提示裁剪一条小路径，然后像这样制作 9-patch[检查此链接](http://i.stack.imgur.com/M4kPv.png)，然后使用可绘制形状在其上绘制渐变。

# artificial-intelligence - 将数据放入数据库时 的人工数据规范化

> ID：10467177
> 
> 赞同：1
> 
> 时间：2012-05-06T00:44:46.680
> 
> 标签：artificial-intelligence, normalization

我想知道是否有软件可以通过查看您在数据库中输入的数据来为您标准化数据。然后实现行中的重复数据，然后将该数据拆分为两个单独的表并通过外键链接表。这确实有助于加快代码的主要逻辑的开发时间以及您可能在应用程序开发开始时放入数据库中的其他未计数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:07:48.503

仅仅通过分析数据来构建规范化的数据库设计是不可能的，因为规范化需要语义知识而不仅仅是内容。您可以做的是使用像[NORMA](http://www.ormfoundation.org/)这样的 CASE 工具，它将语义模型转换为第五范式的数据库设计。

还存在将一组依赖项转换为规范化数据库设计的其他算法。您可以在任何优秀的数据库理论教科书中找到它们，并且您自己实施它们并不难。

# c++ - boost::asio 通过 SocketCAN

> ID：10467178
> 
> 赞同：13
> 
> 时间：2012-05-06T00:44:50.000
> 
> 标签：c++, sockets, boost, boost-asio, can-bus

我正在考虑使用[Boost Asio](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)从[Socket CAN](http://en.wikipedia.org/wiki/SocketCAN)读取数据。[在linux/can.h](http://os1a.cs.columbia.edu/lxr/source/include/linux/can.h)中没有什么花哨的东西，设备应该像环回接口一样工作，并与原始套接字一起使用。

查看`basic_raw_socket`界面似乎我可以使用 [basic_raw_socket::assign](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/basic_socket.html)来分配使用创建的本机套接字

```
socket( PF_CAN, SOCK_RAW, CAN_RAW ); 
```

这是我到目前为止所拥有的

```
namespace can {
       class CanSocket {
       public:
               typedef boost::asio::ip::basic_endpoint<CanSocket> endpoint;
               typedef boost::asio::ip::basic_resolver_query<CanSocket> resolver_query;
               typedef boost::asio::ip::basic_resolver_iterator<CanSocket> resolver_iterator;
               typedef boost::asio::basic_raw_socket<CanSocket> socket;
               typedef boost::asio::ip::basic_resolver<CanSocket> resolver;

               CanSocket()
                       : _protocol( CAN_RAW )
                       , _family( PF_CAN )
               {
               }

               static CanSocket v4()
               {
                       return CanSocket();
               }
               static CanSocket v6();
               int type() const;
               int protocol() const;
               int family() const;

               friend bool operator==(const CanSocket& p1, const CanSocket& p2)
               {
                       return p1._protocol != p2._protocol || p1._family != p2._family;
               }
               friend bool operator!=(const CanSocket& p1, const CanSocket& p2)
               {
                       return p1._protocol == p2._protocol || p1._family == p2._family;
               }

       private:
               int _protocol;
               int _family;
};
} 
```

这就是我在我的应用程序中使用它的方式

```
 boost::asio::io_service ioserv;

   CanSocket::socket s( ioserv );

   int sock = socket( PF_CAN, SOCK_RAW, CAN_RAW );

   s.assign(CanSocket::v4(), sock);

   struct ifreq ifr;
   strcpy(ifr.ifr_name, "vcan0");
   ioctl(sock, SIOCGIFINDEX, &ifr); /* ifr.ifr_ifindex gets filled
                                 * with that device's index */

   /* Select that CAN interface, and bind the socket to it. */

   /* this should be the endpoint */
   struct sockaddr_can addr;
   addr.can_family = AF_CAN;
   addr.can_ifindex = ifr.ifr_ifindex;

   /* s.bind (....) */
   bind( sock, (struct sockaddr*)&addr, sizeof(addr) ); 
```

我不太明白的是如何[绑定](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/reference/basic_raw_socket/bind.html) `s`到本地端点？不涉及 IP 或端口。

除了端点之外，还有什么其他应该实现的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-24T22:58:20.317

这是工作示例，在此线程的帮助下组装

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <iostream>

#include <net/if.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>

#include <linux/can.h>
#include <linux/can/raw.h>

#include <boost/asio.hpp>
#include <boost/bind.hpp>

void data_send(void) {
  std::cout << "omg sent" << std::endl;
}

void data_rec(struct can_frame &rec_frame,
              boost::asio::posix::basic_stream_descriptor<> &stream) {
  std::cout << std::hex << rec_frame.can_id << "  ";
  for (int i = 0; i < rec_frame.can_dlc; i++) {
    std::cout << std::hex << int(rec_frame.data[i]) << " ";
  }
  std::cout << std::dec << std::endl;
  stream.async_read_some(
      boost::asio::buffer(&rec_frame, sizeof(rec_frame)),
      boost::bind(data_rec, boost::ref(rec_frame), boost::ref(stream)));
}

int main(void) {
  struct sockaddr_can addr;
  struct can_frame frame;
  struct can_frame rec_frame;
  struct ifreq ifr;

  int natsock = socket(PF_CAN, SOCK_RAW, CAN_RAW);

  strcpy(ifr.ifr_name, "vcan0");
  ioctl(natsock, SIOCGIFINDEX, &ifr);

  addr.can_family = AF_CAN;
  addr.can_ifindex = ifr.ifr_ifindex;
  if (bind(natsock, (struct sockaddr *)&addr, sizeof(addr)) < 0) {
    perror("Error in socket bind");
    return -2;
  }

  frame.can_id = 0x123;
  frame.can_dlc = 2;
  frame.data[0] = 0x11;
  frame.data[1] = 0x23;

  boost::asio::io_service ios;
  boost::asio::posix::basic_stream_descriptor<> stream(ios);
  stream.assign(natsock);

  stream.async_write_some(boost::asio::buffer(&frame, sizeof(frame)),
                          boost::bind(data_send));
  stream.async_read_some(
      boost::asio::buffer(&rec_frame, sizeof(rec_frame)),
      boost::bind(data_rec, boost::ref(rec_frame), boost::ref(stream)));
  ios.run();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T00:16:15.667

解决方案是使用`posix::stream_descriptor`.

只需打开本机套接字，绑定然后使用`posix::basic_stream_descriptor::assign`.

# ios5 - 表视图之间的 UIActivityIndi catorView

> ID：10467183
> 
> 赞同：0
> 
> 时间：2012-05-06T00:45:32.670
> 
> 标签：ios5, uiactivityindicatorview

我有一个 iPhone 应用程序，它从表格视图开始，当用户选择一个单元格时转到另一个表格视图。这两个表视图位于不同的类中（或任何正确的 Objective-C 术语，即 2 个不同的 .h 和 .m 文件），第二个表视图根据第一个表中的选择从服务器发出请求. 有一个明显的延迟，当发生这种情况时，我一直在尝试设置 UIActivityIndi​​catorView，但是当视图转到第二个表视图时，它只会显示一瞬间。我知道这是线程的问题，但是在有关此主题的任何其他帖子之后，我都无法使其正常工作。我在 didSelectRowAtIndexPath 中调用 startAnimating，在 viewDidDisappear 中调用 stopAnimating。我还尝试使用以下代码通过在 didSelectRowAtIndexPath 中调用它来使其工作：[activityIndi​​cator performSelectorInBackground: @selector(startAnimating) withObject: nil]; 当服务器请求正在进行时，如何使活动指示器（或任何加载动画）工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:48:16.780

我看到这是 Stack Overflow 上的一个常见问题，但我确实找到了一个可行的解决方案。我发现这个论坛 iphonedevsdk.com/forum/tutorial-discussion/... 我的问题是同步连接占用了我的主线程，所以启动微调器然后在单独的方法中调用连接就可以了。

# android - EditText 没有收到 TAB 键事件 - 股票软 vk

> ID：10467184
> 
> 赞同：7
> 
> 时间：2012-05-06T00:45:33.997
> 
> 标签：android, listview, tabs, android-edittext, keyevent

我的应用程序下面有一个`ListView`和一个`EditText`。出于某种原因，TAB 键不会触发`onKeyListener`. 我正在处理的所有其他键（DEL、ENTER、DPAD_UP/DOWN/CENTER）都可以正常接收。我在 中添加了一个断点`dispatchKeyEvent`，再次没有运气接收 TAB 事件。

我的应用程序以前有一个很大`TextView`的用于显示文本的空间，在此期间，TAB 事件得到了很好的接收。`ListView`现已`TextView`取代.

我完全不明白为什么不再收到 TAB 事件。这是在股票 Xoom 上，运行 ICS 4.0.4 和股票 N1，2.3.6。

我已经将我当前的代码与使用 a 的版本进行了比较，`TextView`并且大部分代码只是为了处理`ListView`. `TextView`除了`nextFocusLeft`和`nextFocusRight`属性之外，EditText 没有其他任何变化。

编辑：我刚刚尝试使用 Go Keyboard 和 Hacker's Keyboard，TAB 收到了很好的效果。看来这只是一些虚拟键盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:05:58.693

我想我可能会看到问题所在。查看 ListView.java 的源代码，有一种机制可以使用在列表项中转移焦点的关键事件。查看此方法之前的注释以及方法中间的注释块。

```
/**
 * To avoid horizontal focus searches changing the selected item, we
 * manually focus search within the selected item (as applicable), and
 * prevent focus from jumping to something within another item.
 * @param direction one of {View.FOCUS_LEFT, View.FOCUS_RIGHT}
 * @return Whether this consumes the key event.
 */
private boolean handleHorizontalFocusWithinListItem(int direction) {
    if (direction != View.FOCUS_LEFT && direction != View.FOCUS_RIGHT)  {
        throw new IllegalArgumentException("direction must be one of"
                + " {View.FOCUS_LEFT, View.FOCUS_RIGHT}");
    }

    final int numChildren = getChildCount();
    if (mItemsCanFocus && numChildren > 0 && mSelectedPosition != INVALID_POSITION) {
        final View selectedView = getSelectedView();
        if (selectedView != null && selectedView.hasFocus() &&
                selectedView instanceof ViewGroup) {

            final View currentFocus = selectedView.findFocus();
            final View nextFocus = FocusFinder.getInstance().findNextFocus(
                    (ViewGroup) selectedView, currentFocus, direction);
            if (nextFocus != null) {
                // do the math to get interesting rect in next focus' coordinates
                currentFocus.getFocusedRect(mTempRect);
                offsetDescendantRectToMyCoords(currentFocus, mTempRect);
                offsetRectIntoDescendantCoords(nextFocus, mTempRect);
                if (nextFocus.requestFocus(direction, mTempRect)) {
                    return true;
                }
            }
            // we are blocking the key from being handled (by returning true)
            // if the global result is going to be some other view within this
            // list.  this is to acheive the overall goal of having
            // horizontal d-pad navigation remain in the current item.
            final View globalNextFocus = FocusFinder.getInstance().findNextFocus(
                    (ViewGroup) getRootView(), currentFocus, direction);
            if (globalNextFocus != null) {
                return isViewAncestorOf(globalNextFocus, this);
            }
        }
    }
    return false;
} 
```

单个列表元素中是否有多个可聚焦的项目？如果是这样，此代码将使用 tab 键。如果是这种情况，那么您可能希望使某些项目无法聚焦或考虑其他设计选项。

# xaml - 您如何利用翻转视图并通过点击或单击屏幕进行“选择”？

> ID：10467186
> 
> 赞同：3
> 
> 时间：2012-05-06T00:46:09.713
> 
> 标签：xaml, user-interface, windows-8, winrt-xaml

在 Win 8 中，flipview 控件是一个很好的浏览收藏的控件。但是如何或什么是通过点击或鼠标单击进行“选择”的最佳方式？我总是可以在翻转视图之外放置一个按钮，但这并不是每个平板电脑都期望的触摸体验。

有人可以给出一些示例代码（XAML/C#），说明如何使用某种可以导航到完全不同页面的选择来设置翻转视图控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:09:11.997

如果我正确理解了这个问题，我写了一些有效的示例代码。我可以在 FlipView 中滑动并点击单个项目：

```
<FlipView Tapped="FlipView_Tapped_1">
    <Image Source="Images/Apple.jpg" />
    <Image Source="Images/Orange.jpg" />
    <Image Source="Images/Banana.jpg" />
</FlipView> 
```

进而

```
private YourTypeHere SelectedItem;
private void FlipView_Tapped_1(object sender, TappedRoutedEventArgs e)
{
    this.SelectedItem = (sender as FlipView).SelectedItem;
} 
```

您可能不想设置字段，但您明白了。希望你会在你的视图模型中设置一些东西。从那里您可以导航或任何您需要的东西。与其他所有 XAML 中继器一样，FlipView 继承自 ItemsControl。所以你可以完全一样地对待它。[http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)

# objective-c - “viewWithTag”的问题

> ID：10467187
> 
> 赞同：0
> 
> 时间：2012-05-06T00:46:22.450
> 
> 标签：objective-c, cocoa-touch

oldTag 按钮没有变回白色？？我错过了什么？

谢谢

```
-(void) myCharValue: (UIButton*)btn
{

    [btn setBackgroundColor:[UIColor redColor]]; //current tag_button pressed

    UIButton *btnTemp;
    btnTemp = (UIButton*)[btnChar viewWithTag:oldTag];
    [btnTemp setBackgroundColor:[UIColor whiteColor]]; // <--- oldTag button is not changing back to white ??

    oldTag = btn.tag;
}

//setup
for (int i=0; i<16; i++) {
        for (int j=0; j<16; j++) {
            btnChar = [UIButton buttonWithType:UIButtonTypeCustom ];
            [btnChar setFrame:CGRectMake(j*40+1, i*40+1, 38, 38)];
            [btnChar setBackgroundColor:[UIColor whiteColor]];
            [btnChar setTitle:[NSString stringWithFormat:@"%c", k]  forState:UIControlStateNormal ];
            [btnChar setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
            [btnChar addTarget:self action:@selector(myCharValue:) forControlEvents:UIControlEventTouchUpInside];
            [btnChar setTag:k];
            [svDisplay addSubview:btnChar];
            k++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:03:54.227

我只想补充一点，`tag`属性的默认值是 0，所以如果你从 0 开始循环，第一个按钮在技术上不会被标记。稍后，当您`viewWithTag:`从（chech @jrtc27 的答案）请求 0时，您将在该数组`svDisplay`中获得第一个视图。`[svDisplay subviews]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:50:20.690

您的按钮是 的子视图`svDisplay`，而不是`btnChar`，因此该行`btnTemp = (UIButton*)[btnChar viewWithTag:oldTag];`应该是`btnTemp = (UIButton*)[svDisplay viewWithTag:oldTag];`。

# javascript - 使用 GAE 加载外部 JavaScript

> ID：10467188
> 
> 赞同：0
> 
> 时间：2012-05-06T00:46:28.037
> 
> 标签：javascript, google-app-engine, loading, external

我在使用谷歌应用引擎加载外部 JavaScript 时遇到了一些问题。我基本上有一个 index.html 文件，标题部分包含以下内容：

```
<script type="text/javascript" src="/jsfunctions.js"></script> 
```

以及正文部分中的以下内容：

```
<p id="demo"></p>
<button  type="button" onclick = DisplayDate() >Display Date</button> 
```

在 jsfunctions.js 文件中，我有：

```
function DisplayDate(){
    document.getElementById("demo").innerHTML=Date();
} 
```

当我运行它时，我可以看到页面获取了 jsfunctions.js：

```
INFO 2012-05-06 00:37:25,864 dev_appserver.py:2884] "GET /jsfunctions.js HTTP/1.1" 404 
```

但是，当我单击按钮时没有任何反应。

我在这里错过了一些重要的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:54:31.800

除非您声明一个`static_files`条目`jsfunctions.js`（或将其放在您声明的子目录中`static_dir`），否则您的处理程序必须准备好为它服务。

请参阅[https://developers.google.com/appengine/docs/python/config/appconfig#Static_Directory_Handlers](https://developers.google.com/appengine/docs/python/config/appconfig#Static_Directory_Handlers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:49:55.467

传输日志条目显示 404，这意味着您的 js 文件未加载。当您输入文件的 URL 时，请仔细检查它是否正在被提供。

# math - 如何在 cmd 代码中使用不等式

> ID：10467190
> 
> 赞同：0
> 
> 时间：2012-05-06T00:47:27.467
> 
> 标签：math, command-line, batch-file, cmd, inequalities

我正在编写一个代码来查找平方根，以便使用基本的 cmd 编码进行练习。但是，当我输入负数或不完美的正方形时，它会进入无限循环。我知道如何解决它，但我需要能够使用不等式（小于，大于）。（x 是我拥有的数字，y 是平方根）这样我可以说：

*   if %x% (小于) 0 (不操作)
*   if %y% (大于) %x% (不操作)

或者我可以创建另一个变量，它比 x 小（z）/大（n）：

*   如果 %x% == %z% （不操作）
*   if %x% == %n% (不要操作)

请帮我。我似乎找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T01:45:46.913

您可以尝试阅读 IF 语句的文档 - 键入`HELP IF`或`IF /?`从命令行。大约一半描述了支持不等式的命令扩展，例如 LSS 用于小于。

```
if 0 lss 1 (echo 0 is less than 1) else (echo 0 is not less than 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:16:02.530

+1 to @dbenham's [answer](https://stackoverflow.com/a/10467452/63733), here's the excerpt of the `IF` documentation with all the **comparison operators**:

> If Command Extensions are enabled IF changes as follows:
> 
> ```
> IF [/I] string1 compare-op string2 command
> IF CMDEXTVERSION number command
> IF DEFINED variable command 
> ```
> 
> where compare-op may be one of:
> 
> ```
> EQU - equal
> NEQ - not equal
> LSS - less than
> LEQ - less than or equal
> GTR - greater than
> GEQ - greater than or equal 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T04:17:35.897

那么在代码中，这看起来像这样

```
:: this is Regional settings dependant so tweak this according 
:: your current Windows regional settings
for /f "tokens=1-3 delims=,: " %%a in ('echo %time%') do set hhmmsss=%%a%%b%%c

if /i %hhmmsss% LSS 95959 SET hhmmsss=0%hhmmsss% 
```

# php - php将文件保存到特定位置

> ID：10467196
> 
> 赞同：1
> 
> 时间：2012-05-06T00:48:58.433
> 
> 标签：php, saving-data

说到php，我有点傻。我想知道如何将上传到 php 脚本（使用 POST）的文件保存到特定位置。因此，例如，我想将其保存在目录 www.mysite.co.nz/data/motelname/

android还发送成对的数据，那么我如何将这些数据制作成一个文件，其中第一位数据是文件名，第二位是.txt文件数据。

如果有这方面的教程，请在这里评论，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:59:25.040

看看这些：

[http://www.htmlgoodies.com/beyond/php/article.php/3472551/PHP-Tutorial-Uploading-Files.htm](http://www.htmlgoodies.com/beyond/php/article.php/3472551/PHP-Tutorial-Uploading-Files.htm)

[http://www.sitepoint.com/handle-file-uploads-php/](http://www.sitepoint.com/handle-file-uploads-php/)

您可以通过

```
move_uploaded_file($tmp_name, "my_directory/$filename"); 
```

# sqlalchemy - 处理 sqlalchemy 模型的 Pythonic 方式

> ID：10467199
> 
> 赞同：3
> 
> 时间：2012-05-06T00:49:10.467
> 
> 标签：sqlalchemy, python

我正在使用 sqlalchemy，并且来自使用 ruby​​/rails activerecord 和 datamapper 学习 orm，它有点不同。

所以，有一些模型并且需要我认为的类和实例级别的方法，我看到 python 没有这样做，或者我到目前为止理解的 python 级别没有这样做。为模型构建新方法的pythonic方法是什么：装饰器、制作模块和导入方法等？我需要做各种各样的事情，所以没有具体的编码问题，只是一个一般性的请求，要求指导如何有效地使用 sqlalchemy 处理模型，其中需要处理模型特定的方法。

注意：这不是讨论语言细节的邀请，我只提及我到目前为止所学到的知识以及如何将其应用于新情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T01:31:34.460

您可以将模型方法作为模型定义上的类方法。例如：

```
class User(object):

    @classmethod
    def get_by_username(cls, dbsession, username):
        return dbsession.query(cls).filter(cls.username==username).scalar()

mapper(User, tables.auth_user,
    properties={
        ...
        }
    ) 
```

允许您将类用作表特定方法的容器。像这样：

```
user = User.get_by_username(session, "me") 
```

# scheme - 写出方案中的文件

> ID：10467202
> 
> 赞同：4
> 
> 时间：2012-05-06T00:49:38.993
> 
> 标签：scheme, racket

这样做的目的是检查所考虑的字符是数字还是操作数，然后将其输出到一个列表中，该列表将被写入一个 txt 文件。我想知道哪个过程会更有效，是按照我上面所说的（将其写入列表，然后将该列表写入文件）还是直接从过程中写入 txt 文件。我是方案新手，所以如果我没有使用正确的术语，我深表歉意

```
(define input '("3" "+" "4"))

(define check
   (if (number? (car input))
    (write this out to a list or directly to a file)
    (check the rest of file))) 
```

我想到的另一个问题是，我怎样才能使检查过程是递归的？我知道这要求很多，但我对查看我在其他网站上找到的方法感到有点沮丧。我真的很感激帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:36:11.650

将功能拆分为两个单独的过程是一个好主意，一个用于生成字符串列表，另一个用于将它们写入文件。对于第一个过程，我会给你一个大致的想法，这样你就可以填空（这毕竟是一个家庭作业），它遵循递归解决方案的标准结构：

```
(define (check input)
  (cond ((null? input) ; the input list is empty
         <???>)        ; return the empty list
        ((string->number (car input)) ; can we convert the string to a number?
         (cons "number"  <???>)) ; add "number" to list, advance the recursion
        (else                    ; the string was not a number
         (cons "operand" <???>)))) ; add "operand" to list, advance recursion 
```

对于第二部分，总体思路是这样的：

```
(define (write-to-file path string-list)
  (call-with-output-file path
    (lambda (output-port)
      (write <???> output-port)))) ; how do you want to write string-list ? 
```

当然，在上面的过程中，您可以摆弄 的主体`lambda`以从字符串列表中生成您期望的输出，例如 - 作为字符串列表，或每行中的字符串，或作为单行一系列由空格分隔的字符串等。您将像这样调用这两个过程：

```
(write-to-file "/path/to/output-file"
               (check input)) 
```

# php - $_POST 返回空

> ID：10467204
> 
> 赞同：2
> 
> 时间：2012-05-06T00:50:30.477
> 
> 标签：php, javascript, html, ajax

尝试稍微练习 ajax 和 PHP，我不明白为什么每当我发送一些东西时，它都会返回空或未定义的索引。

**PHP：**

```
<?php

    if (!empty($_POST['message'])) {
        echo 'works';
    } else {
       echo 'empty';
    }

?> 
```

返回空。

**JS：**

```
$('form').submit(function(){

    var meth = $(this).attr('action');

    var msg = $('.msg');
    $.post(meth, function(data) {
        $('.messages').append(data);
    }) ;

    return false; 
}); 
```

**HTML：**

```
<form class="send" action="process.php" method="post">
    <textarea type="text" name="message" class="msg" value="blah"></textarea>
    <input type="submit" name="submit" class="submit">
</form> 
```

如果我只是做'回声`'test'`; 在 process.php 文件中，它可以工作；否则未定义索引。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:53:50.863

**我看到您已经编辑了语法错误，因此您可以忽略此部分：**

在我的脑海中，我看到两个语法错误，一个在 php 中：

```
<?php

  if (!empty($_POST['message'])) {
    echo 'works';
  } else [ // <- This should be a {
     echo 'empty';
  }

?> 
```

一个在 JS 中：

```
$('form').submit(function(){

      var meth = $(this).attr('action');

      var msg = $('.msg');
      $.post(meth, function(data) {

        $('.messages').append(data);

      }) // <- Should be a ; here

      return false; 
    }); 
```

* * *

还要让我第一个指出您应该**正确缩进您的代码**。否则很难看到你的范围的深度，只会让你的代码变得不可读。

`empty`是用于检查是否设置了数组索引的错误函数。这就是生成“未定义索引”警告的原因。使用`isset`or`array_key_exists`代替：

```
if (!isset($_POST['message'])) {
// or
if (!array_key_exists('message', $_POST)) { 
```

该`empty`函数仅检查变量是否包含计算结果为空的值，例如空字符串、空数组、NULL 等。它不检查是否设置了变量。

* * *

此外，您不会通过填充 value 属性来设置 textarea 的值。那是行不通的。您可以通过将其放置在打开和关闭标记之间来设置值，如下所示：

```
<textarea class="msg">My message</textarea> 
```

然后通过请求值来获取文本（在 jQuery 中）

```
var my_message = $('textarea.msg').val() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T01:06:17.667

对此进行测试的最佳方法是回显发送的数据：

```
<?php
  if (isset($_POST['message'])) {
    echo $_POST['message'];
  }
?> 
```

如果您使用 prop() 获得 action 属性，它通常会为您提供绝对链接，这是更好的 IMO。

```
$('form').on('submit', function(e){
    e.preventDefault();
    var meth = $(this).prop('action'),
        Mymsg = $('.msg').text(); //assuming the element contains text
    $.post(meth, {message: Mymsg}, function(data) {
        $('.messages').append(data);
    });
}); 
```

要发送整个表单，请使用序列化，将添加它，但请参阅 Jonathan 的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T01:06:14.740

由于您没有使用默认行为，因此您必须自己传递表单字段的名称和值，以便 PHP 接收它们中的任何一个：

```
// ...
$.post(meth, $(this).serialize(), function(data) {
// ... 
```

您也可以考虑使用[`array_key_exists`](http://php.net/array_key_exists)以避免`undefined`错误：

```
if (array_key_exists('message', $_POST)) {
    # ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T00:53:35.697

尝试将文本区域的值放在`<textarea></textarea>`标签之间，如下所示：

```
<textarea type="text" name="message" class="msg">blah</textarea> 
```

Textarea 的功能与典型`<input />`字段不同。

# android - URL 意图和活动的奇怪情况

> ID：10467211
> 
> 赞同：0
> 
> 时间：2012-05-06T00:51:57.087
> 
> 标签：android, android-intent, oauth, android-asynctask

所以，我一直在研究这个问题一段时间，我觉得我越来越接近理解这个问题，但不是解决方案。这里是...

我有一个 Activity（A 类），它通过 startActivityForResult() 调用另一个 Activity（B 类）。B 类是我的 OAuth 处理程序，它在启动 AsyncTask 之前准备 URL 请求以通过 Internet 向提供者进行身份验证。它通过使用该 URL 调用一个意图来完成此操作，该 URL 会启动浏览器并将我带到用户登录页面。我登录并授权该应用程序，然后将我带回到我认为的 B 类。但是，这就是问题所在。

返回应用程序后，Android 似乎创建了我的 B 类活动的另一个实例并执行了 onResume() 方法，而不是上面创建 AsyncTask 的方法。这是一个问题，因为当我调用完成时，它所做的只是杀死 B 类的那个实例，然后回到 B 类的第一个实例。这是一个问题，因为我需要传递 B 类的结果回到A班，所以我知道手术成功了。如果我随后完成（） B 类的第一个实例，它会将 RESULT_FAILED 代码传回 A 类...

我错过了一些非常明显的东西吗？如果你想看一些代码，请告诉我。

更新：我添加了一些代码以使其更清晰：

A类（调用B类时）：

```
button2.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
dialog.cancel();
Intent intent = new Intent();                
intent.setClass(myContext, ClassB.class);
startActivityForResult(intent, LIKE_ACTION);
}
} 
```

B 类（调用 URL 以向提供者进行身份验证时，这在 AsyncTask 中调用）：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl));
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
myContext.startActivity(intent); 
```

myContext 是 B 类。此时 URL 由浏览器加载，允许用户登录并授权应用程序。该应用程序被授权并调用 B 类。完成了一些进一步的工作，然后调用完成。如上所述，当调用 finish() 时，它必须被调用两次。我在模拟器中执行此操作，有时我可以看到活动变化的动画。

B类（调用关闭活动的代码）：

```
Intent tokenAndSecret = new Intent();
tokenAndSecret.putExtra("Token",mSettings.getString(USER_TOKEN, null));
tokenAndSecret.putExtra("Secret",mSettings.getString(USER_SECRET, null));
setResult(Activity.RESULT_OK, tokenAndSecret);
finish(); 
```

调用完成，但是我需要调用它两次。我通过禁用对上述代码的自动调用来测试这一点，并在活动中放置一个按钮来执行它。正如所料，我不得不按两次按钮。

# ruby-on-rails-3 - 捆绑更新时的 Spork 错误

> ID：10467215
> 
> 赞同：0
> 
> 时间：2012-05-06T00:52:43.763
> 
> 标签：ruby-on-rails-3, rspec-rails, spork

我在我的 rails 应用程序上运行了 bundle update。我没有收到以下错误，也无法弄清楚我需要更改什么：

59 美元 spork 使用 RSpec，未知

正在加载 Spork.prefork 块...

您已经激活了 spork 1.0.0rc2，但您的 Gemfile 需要 spork 1.0.0rc3。使用 bundle exec 可以解决这个问题。（宝石::加载错误）

如果我使用 bundle exec 运行它，它运行正常，但我想修复根本原因，这样我就不必使用 bundle exec。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:49:22.557

我没有弄清楚为什么会出现 rc2 与 rc3 的问题，但总的来说，在阅读了一些网站之后，我认为 bundle exec 是要走的路。我最终使用以下设置来为 TDD 顺利运行开发和测试环境。结果，我没有遇到这个问题，尽管我仍然不知道是什么导致了这个问题。

[http://blog.crowdint.com/2012/03/01/rails-tdd-environment-setup-with-guard-and-foreman.html](http://blog.crowdint.com/2012/03/01/rails-tdd-environment-setup-with-guard-and-foreman.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:59:21.247

运行`gem update spork`，它会将安装在您系统上的 spork 版本更新到最新版本。现在你只在你的包中安装了那个版本的 spork，当你运行没有`bundle exec`. 您可能还需要删除旧版本`gem cleanup spork`

# python - 框架内的框架 WxPython

> ID：10467224
> 
> 赞同：1
> 
> 时间：2012-05-06T00:54:11.517
> 
> 标签：python, wxpython

我有一个关于 WxPython 的快速问题。我想在程序的主框架内有框架。用户应该不能移动框架。你们有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:37:29.293

也许你的意思是 MDI 框架？（例如[http://www.java2s.com/Tutorial/Python/0380__wxPython/MDIframe.htm](http://www.java2s.com/Tutorial/Python/0380__wxPython/MDIframe.htm)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:35:55.070

您能否提供更多有关您要完成的工作的信息？如果用户不能移动框架，为什么要使用框架而不是框架内的面板？如果您想要临时弹出窗口来选择文件或显示消息，您可以创建对话框。

您是否正在尝试制作类似于 GIMP 界面的东西，而不是一个大窗口，而是有几个小窗口？

在 wxPython 中，框架是窗口（它们使用“窗口”这个词来表示不同的东西），面板只是可以填充东西的盒子。您可以使用大小调整器（基本上是表格）在面板中组织这些“东西”。您甚至可以将面板放在面板内。这是一个很好的教程，向您展示了 wxpython 中的所有重要对象以及如何使用它们： [http ://wiki.wxpython.org/AnotherTutorial](http://wiki.wxpython.org/AnotherTutorial)

另外，据我所知，没有办法阻止用户在 wxPython 中移动你的框架，尽管你可以阻止他们调整它的大小。可以在以下链接中找到各种样式属性：http: [//docs.wxwidgets.org/2.8.11/wx_wxframe.html#wxframe](http://docs.wxwidgets.org/2.8.11/wx_wxframe.html#wxframe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:25:33.343

我猜 OP 正在谈论一个 MDI 框架，微软创建并决定放弃它。我认为 OP 应该检查 wx.agw.aui 小部件集与 wx.aui 的东西，因为前者已经更新了很多，而 wx.aui 没有。另外 agw 包是纯 Python 的，因此更易于破解。

# python - 如果导入了win32ui，为什么脚本不会退出

> ID：10467225
> 
> 赞同：2
> 
> 时间：2012-05-06T00:54:17.230
> 
> 标签：python, pywin32

我在 Windows 7 下使用 Python 2.7.2 有一个非常奇怪的意外问题。

此代码不会退出：

```
import gtk
import win32ui
w = gtk.Window()
w.connect("destroy", gtk.main_quit)
w.show_all()
gtk.main()
print 'stop-point'
quit() 
```

窗口关闭，我得到“停止点”，一切都应该没问题。但是控制台没有关闭。甚至`quit()`没有帮助。

问题在于`import win32ui` 如果我删除它，一切正常。

此外，在版本中只有

```
import gtk
import win32ui 
```

一切正常。

win32ui有什么问题？如何强制关闭我的应用程序？

即使没有 GTK，它也会发生：

```
import win32gui, win32ui

try:
    result = win32gui.GetOpenFileNameW()
except win32gui.error as result:
    pass
print result

# script ends but python doesn't exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T17:56:41.410

该问题是由 pywin32 中的错误引起的：[https ://sourceforge.net/tracker/?func=detail&aid=3562998&group_id=78018&atid=551954](https://sourceforge.net/tracker/?func=detail&aid=3562998&group_id=78018&atid=551954)

我想出了一个可怕的 hack，它可以作为一种解决方法，直到 pywin32 中的错误被修复。将此代码放在退出例程的末尾。在执行此操作之前尽可能多地清理。解决方法使用 Windows`taskkill`工具终止当前任务。

```
import os

# kill this process with taskkill
current_pid = os.getpid()
os.system("taskkill /pid %s /f" % current_pid) 
```

将上面的代码注册为一个函数[`atexit`](http://docs.python.org/2/library/atexit.html#module-atexit)可能允许 Python 首先进行一些清理：

```
import atexit, os

def taskkill_this():
    # kill this process
    current_pid = os.getpid()
    os.system("taskkill /pid %s /f" % current_pid)

atexit.register(taskkill_this) 
```

# ruby-on-rails - 你如何使用 rspec 测试omni-auth facebook？

> ID：10467226
> 
> 赞同：5
> 
> 时间：2012-05-06T00:54:57.647
> 
> 标签：ruby-on-rails, rspec, omniauth

我查看了 gem wiki 并按照说明进行操作，但由于某种原因，我`nil`在进行omniauth 测试时遇到了错误：

user_sessions_controller_spec.rb：

```
require 'spec_helper'

describe UserSessionsController, "OmniAuth" do
  before do
    request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
  end

  it "sets a session variable to the OmniAuth auth hash" do
    request.env["omniauth.auth"]['uid'].should == '123545'
  end
end 
```

spec_helper.rb：

```
RACK_ENV = ENV['ENVIRONMENT'] ||= 'test'
OmniAuth.config.test_mode = true
omniauth_hash =
    {:provider => "facebook",
     :uid      => "1234",
     :info   => {:name       => "John Doe",
                 :email      => "johndoe@email.com"},
     :credentials => {:token => "testtoken234tsdf"}}

OmniAuth.config.add_mock(:facebook, omniauth_hash) 
```

规格结果：

```
Failures:

  1) UserSessionsController OmniAuth sets a session variable to the OmniAuth auth hash
     Failure/Error: request.env["omniauth.auth"]['uid'].should == '123545'
     NoMethodError:
       You have a nil object when you didn't expect it!
       You might have expected an instance of Array.
       The error occurred while evaluating nil.[]
     # ./spec/controllers/user_sessions_controller_spec.rb:10:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:10:41.213

在测试中尝试使用符号而不是字符串：

```
 it "sets a session variable to the OmniAuth auth hash" do
    request.env["omniauth.auth"][:uid].should == '1234'
  end 
```

我不确定 Omniauth 是否在某个时候从字符串更改为符号，但似乎有许多使用字符串作为键的示例。

为了完整起见，如果有人尝试使用 Devise 和 Omniauth 执行此操作，请不要忘记在 before 块中添加 devise.mapping。

```
before do
  request.env["devise.mapping"] = Devise.mappings[:user]
  request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
end 
```

# cocos2d-iphone - cocos2d的HelloWorld例子中，为什么我们不用HelloWorldScene，而是用HelloWorldLayer呢？

> ID：10467230
> 
> 赞同：1
> 
> 时间：2012-05-06T00:57:10.937
> 
> 标签：cocos2d-iphone

我是 cocos2d 的新手，想知道图层是不是场景的一部分，那么为什么 HelloWorld 是图层，而不是场景？

好像是一个Layer，然后类方法`[HelloWorld scene]`会实例化一个场景，再实例化一个层，然后将场景返回给调用者。我想知道为什么要下到图层级别，然后创建一个场景并将图层添加到其中，而不是让 HelloWorld 成为一个场景对象，然后添加一个图层，并为其添加一个标签，以这种顺序？

（看起来这也有助于让 Layer 对象成为场景的唯一层——也许这是 cocos2d 的常见模式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:26:02.947

它只是理解面向对象方法的问题..

`CCDirector`最后需要一个场景..我调用哪个类方法都没关系..场景方法创建一个`CCScene`，添加一个图层并将其返回给调用者..最后图层添加到场景中..那重要的是...不是您要调用的类方法...

一个人可以创建一个子类`CCObject`并混合其中的所有东西......取决于你想怎么做......我确实喜欢你说的......而且我感觉很舒服...... :)

# smime - Heirloom mailx 不验证自己的 S/MIME 签名邮件？

> ID：10467231
> 
> 赞同：1
> 
> 时间：2012-05-06T00:57:33.637
> 
> 标签：smime, mailx

我终于使用 Heirloom mailx 设置了 Comodo S/MIME 证书。使用 Thunderbird 进行测试我能够接收签名（甚至加密）的消息，而不会出现任何错误或警告。但是，如果我使用 Heirloom mailx 作为接收客户端，我会得到以下信息：

```
? verif                                                                        
Message 1: Error with certificate at depth: 0
 issuer = /C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=COMODO Client Authentication and Secure Email CA
 subject = /emailAddress=user@example.com
 err 20: unable to get local issuer certificate
Error verifying message 1: error:21075075:PKCS7 routines:PKCS7_verify:certificate verify error 
```

有任何想法吗？还有一件事：当我将相同的签名消息从 Thunderbird 发送到 mailx 时，不存在此错误，仅从 mailx 发送到 mailx（相同/不同的机器）。

谢谢！

编辑：以防万一，这是我的`.mailrc`文件：

```
set from=user@example.com
set smime-sign-cert=/home/user/cert.pem
set smime-sign 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:06:40.327

您收到的错误`unable to find local issuer certiicate`——通常意味着底层 OpenSSL 库找不到用于签署 S/MIME 证书的证书颁发机构证书。值得注意的是，Thunderbird 拥有自己的有效证书颁发机构列表，这些证书颁发机构可能比本地系统默认提供的更全面。

和指令可用于指向适当的 CA 证书 `smime-ca-dir`。`smime-ca-file``mailx`

# actionscript-3 - 使用 Flex 时动画非常不稳定

> ID：10467233
> 
> 赞同：0
> 
> 时间：2012-05-06T00:58:28.473
> 
> 标签：actionscript-3, apache-flex

我正在尝试使用 Flex（在浏览器中运行）创建一个非常简单的图像动画，该动画在屏幕上水平移动 300 像素。我发现动画非常不稳定。每次我运行动画，结果都不一样。有时动画会在出现断断续续之前播放几秒钟，有时会立即出现。这已在 Internet Explorer 和 Firefox 中的多台 Windows 7 机器上进行了测试。

我尝试了几种不同的方法，但似乎没有一种方法可以阻止波动/抖动。

方法 1：使用 s:move

```
<fx:Declarations>
<s:Power id="_powerEasing" exponent="1" />
<s:Move id="_moveRight" target="{_sword}" xFrom="{_swordMin}" xTo="{_swordMax}"
                duration="1000"
                easer="{powerEasing}" />
</fx:Declarations>

<s:BitmapImage id="_sword" visible="true" scaleX=".99" scaleY=".99"
    source="@Embed('/assets/images/combat2/attackbar/sword.png')" x="0" y="0" /> 
```

使用 _moveRight.play(); 调用

我尝试的第二种方法是在每个输入帧上移动图像对象。图像的新 x 位置是通过将时间差乘以速度来计算的。看起来像这样：

```
var now:Number = getTimer();
var toMove:Number = ((now - _lastTime) / 1000) * _speed;
_sword.x += toMove;
_lastTime = now; 
```

尝试的第三种也是最后一种方法是在 Flash 中将其创建为影片剪辑。这也很波涛汹涌。

最好的结果是接近 1。

我已经尝试过使用 s:BitmapImage、mx:Image 以及使用 FlexSprite，但我开始认为我必须缺少一些东西才能使这一切顺利进行。

我遗漏的任何想法或最佳实践将有助于此动画吗？

**编辑：**感谢所有建议，但没有任何效果。

这是一个简单的例子。我已启用查看源代码，因此您可以查看实现。[http://legionofderp.com/sword-demo/SwordTestDemo.swf](http://legionofderp.com/sword-demo/SwordTestDemo.swf)

一开始它可能会平稳运行几秒钟，但随后动画开始运行非常不稳定

**编辑 2：**这是另一个示例，这个示例是使用 Flash 创建的。 [http://legionofderp.com/testing-sword-03.swf](http://legionofderp.com/testing-sword-03.swf)

**回答** 感谢大家的所有建议。通过将 html 模板中的 wmode 参数设置为 direct，我能够使动画顺利运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:38:56.893

当它抖动时动画移动真的很慢（每次迭代<1px移动）？如果是这样，您可能想尝试将位图上的 pixelSnapping 属性强制为 NEVER。

此外，您是否尝试过切换 CPU 或 GPU 加速 - 如果是，结果是否相同？

在独立的 Flash 播放器中运行是否会产生相同的效果？

编辑：刚刚注意到您添加了应该覆盖像素捕捉的缩放属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:22:15.430

尝试使用 Enterframe 事件而不是计时器（getTimer 或 setInterval）。根据我的经验，我注意到计时器是 CPU 密集型的，因此也会影响动画。虽然 enterFrame 事件运行起来更顺畅。试试看。

```
addEventListener(Event.ENTER_FRAME , move ) 

function move ( e:Event)
{

  // your animation code here
} 
```

# php - 在这个例子中如何从数据库中删除一行？

> ID：10467238
> 
> 赞同：1
> 
> 时间：2012-05-06T00:59:21.967
> 
> 标签：php, javascript, jquery, sql, ajax

我想做的是，当用户单击“删除”按钮时，它会从服务器中删除文件，并删除存储相同文件名的数据库行。现在文件已成功从服务器中删除，即不是问题。

问题是它没有删除存储相同文件名的数据库行。我怎样才能做到这一点？

下面是导航到 deleteimage.php 的删除按钮的 javascript 函数：

```
var counter = 0;

function stopImageUpload(success, imagefilename){
    counter++;

    $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 

    var _counter = counter;

    $('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
        var image_file_name = $(this).attr('image_file_name');

        jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
            .done(function(data) {
                $(".imagemsg" + _counter).html(data);
            });

        $(this).parent().remove();
    });

    return true;   
} 
```

下面是deleteimage.php：

```
<?php

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$image_file_name = $_GET["imagefilename"];

echo "$image_file_name was Deleted";
unlink("ImageFiles/$image_file_name");

$imagedeletesql = "DELETE FROM Image (ImageFile) 
    WHERE ('ImageFile = ImageFiles/". mysql_real_escape_string($image_file_name)."')";

mysql_query($imagedeletesql);

mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:02:34.173

看起来你的 SQL 语法有点不对劲。试试这个：

```
$imagedeletesql = "DELETE FROM Image 
    WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'"; 
```

# javascript - JQuery 和 setTimeout() 不起作用

> ID：10467239
> 
> 赞同：0
> 
> 时间：2012-05-06T00:59:22.737
> 
> 标签：javascript, jquery, html, settimeout, keydown

我正在使用 JQuery 来监视 HTML 游戏的按键，但是每当我将 jquery 代码添加到我的游戏循环时，我都会收到关于未定义 keydown 的错误。

```
<html>
    <head>
        //...Included JS files JQuery, and a JQuery plugin to bind keydown
        //   to a variable and to translate all the keypresses into
        //   names so that we can monitor keypress by keydown.left...
    </head>
    <body>
        <script type="text/javascript">
            var gLoop;
            //...code excluded for brevity...
            var GameLoop = function() {
                //...code excluded...
                if(keydown.left) {
                    //do stuff
                }
                gLoop = setTimeout(GameLoop, 1000/50);
            }
        </script>
    </body>
</html> 
```

此代码收到一条错误消息，提示 keydown 未定义。当我尝试过这段代码时：

```
 setInterval(function(){
        if(keydown.left) alert("Working");
    }, 1000/50); 
```

它工作正常！我究竟做错了什么？？？[我的](https://github.com/figitaki/PuzzleMan)完整代码在 GitHub 上。

我使用 jQuery 版本 1.4.4。我使用了[https://raw.github.com/figitaki/PuzzleMan/master/key_status.js](https://raw.github.com/figitaki/PuzzleMan/master/key_status.js)提供的热键插件，这是我用来绑定 keydown 的代码：

```
$(function() {
  window.keydown = {};

  function keyName(event) {
    return jQuery.hotkeys.specialKeys[event.which] ||
      String.fromCharCode(event.which).toLowerCase();
  }

  $(document).bind("keydown", function(event) {
    keydown[keyName(event)] = true;
  });

  $(document).bind("keyup", function(event) {
    keydown[keyName(event)] = false;
  });
}); 
```

* * *

更新：

运行代码时不再出现错误，但按左键没有得到任何响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:21:01.460

尝试`gLoop = setTimeout("GameLoop();", 1000/50);`

我无法按照您定义的方式调用您的函数`setTimeout`。

Javascript 代码应该按顺序加载，但是将代码包装在 a`$(document).ready`中将确保在加载外部文件后第一次触发它。

```
 $(document).ready(function(){
        var gLoop;
        //...code excluded for brevity...
        var GameLoop = function() {
            //...code excluded...
            if(keydown.left) {
                //do stuff
            }
            gLoop = setTimeout("GameLoop();", 1000/50);
        }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:05:13.617

你定义了 KeyDown 吗？这是有关您的按键的相关文章。

[在 JS/jQuery 中绑定箭头键](https://stackoverflow.com/questions/1402698/binding-arrow-keys-in-js-jquery)

# java - java utf-8 文本文件读取错误？

> ID：10467241
> 
> 赞同：0
> 
> 时间：2012-05-06T00:59:33.827
> 
> 标签：java, file-io, utf-8

好吧，我有一个简单的文本文件，其中填充了我的文本数据，需要将其保存为 utf-8，因为我有一些 unicode 符号...

好吧，我只是用记事本写了一个普通的文本文件，并用 utf-8 保存为 txt

但我似乎在前面得到了一些奇怪的东西： ![在此处输入图像描述](../Images/5c2b2a7fd8214ad78fb6eb6e032c1084.png)

这是某种奇怪的点，通常甚至无法粘贴到其他任何地方。我也许可以尝试删除第一个符号，但我认为这不是一个真正的解决方案，此外我不确定它是否会一直出现......

这是代码部分：

```
FileInputStream fstream = new FileInputStream(fileName);
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String values;

        //Read File Line By Line

        System.out.println("Generating queries from: " + fileName);
        String fields = br.readLine(); 
        System.out.println("The fields are: " + fields); 
```

有人遇到过这个并知道解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T01:10:48.453

它可能是一个[Unicode 字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)。一些文本编辑器（在 Windows 上）启动一个带有 BOM 的 UTF-8 文本文件来标记它是 Unicode。

如果您需要在 Java 中处理此问题，请测试您从文件中读取的第一个 Unicode 代码点是否为`0xffef`，如果是则将其删除。

# ajax - 如何通过 Ajax 发布多行

> ID：10467243
> 
> 赞同：2
> 
> 时间：2012-05-06T00:59:40.483
> 
> 标签：ajax, coldfusion

以下代码有效。我想要做的是将它从接受单个值更改为接受对象数组，这样我不是发布 1，“Item One”，而是循环遍历对象并发布 1，“Item One”， 2、《项目二》等

```
!function($, window, undefined) {
    var local = {};
    local.data = {};
    local.type= 'post',
        local.dataType= 'json',
        local.data.method = 'Save',
        local.data.ItemNo = 1;
        local.data.ItemName = 'Item One';

    var myPromise = $.ajax('Upload.cfc',local);
    myPromise.done(function(result) {
        console.log('success!');
    });

    myPromise.fail(function(A,B,C) {
        $('body').append(A.responseText);
        console.log(B);
        console.log(C);
    });
}(jQuery, window); 
```

和

```
<cfcomponent>
<cffunction name="Save" access="remote">
    <cfargument name="ItemNo">
    <cfargument name="ItemName">
    <cfset var local = {}>

    <cfquery datasource="#Application.Datasource#" username="#Application.Username#" password="#Application.Password#">
    INSERT INTO lru.Item(ItemNo,ItemName) VALUES
    (<cfqueryparam cfsqltype="cf_sql_integer" value="#arguments.ItemNo#">
    ,<cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.ItemName#" maxlength="10">
    )
    </cfquery>
</cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:55:34.673

索引.cfm：

```
 <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('#save').click(function(){
          $.ajax({
            url: 'add.cfc?method=addData&returnFormat=json',
            type: "post",
            data: { dataArray: [$('#test1').val(),$('#test2').val(),$('#test3').val() ] },
            dataType: 'json',
            success: function(data){
              $('#result').html(data);
            }
          });
        });
      });
    </script>
  </head>
  <body>
    <form name="sub" method="post">
        Test1: <input type="text" name="test1" id="test1" /><br />
        Test2: <input type="text" name="test2" id="test2" /><br />
        Test3: <input type="text" name="test3" id="test3" /><br />
        <button type="button" id="save" name="save">Save</button>
    </form>

    <div id="result" />

  </body> 
```

添加.cfc：

```
<cfcomponent>
    <cffunction name="addData" access="remote" returntype="string" >
        <cfargument name="dataArray" type="array" />

        <cfset var result = "" />

        <cfloop array="#arguments.dataArray#" index="i" >
            <cfset result = result & "R: " & i & ", " />
        </cfloop>

        <cfreturn result />

    </cffunction>
</cfcomponent> 
```

这个例子应该让你开始，只需将一个数组从 javascript 传递给 ColdFusion，然后在你的 cfc 中循环该数组。

# arm - 在 ARM Cortex-M3 中使用 newlib 的 malloc

> ID：10467244
> 
> 赞同：18
> 
> 时间：2012-05-06T00:59:40.700
> 
> 标签：arm, cortex-m3, newlib

我正在为 ARM Cortex-M3（NXP 的 LCP17xx）创建代码。到目前为止，我一直在使用静态内存，一切运行良好。我试图添加动态内存支持，但是一旦我调用 malloc，系统就会卡住。

我正在用 gcc 编译 arm 裸机，并使用 newlib。版本：gcc-arm-none-eabi-4_6-2012q1

为了添加对 malloc 的支持，我实现了一个简单的 _sbrk 函数并修改了我的链接器脚本以为堆腾出一些空间（我已经阅读了许多关于这部分的不同教程，但没有一篇涵盖我接下来遇到的问题）。

在一些 LED 的帮助下，我可以确定代码一直运行到它调用的那一点`malloc`，然后它就不会继续了。它甚至达不到我的`_sbrk`功能。`sizeof`此外，如果我`malloc`稍后在代码中包含对 的调用，它将卡在对 的调用中。

`malloc`那么，当调用代码时卡住而没有到达`_sbrk`或返回时，我会做错什么？

在盯着包含调用和不包含调用时生成的内存映射一段时间后`malloc`，我怀疑它与`malloc`.

这是定义 ram 内存的 ld 脚本的一部分：

```
.bss :
{
    _start_bss = .;
    *(.bss)
    *(COMMON)
    _ebss = .;
    . = ALIGN (8);
    _end = .;
} >sram
. = ALIGN(4);
_end_bss = .;
. = ALIGN(256);
_start_heap = .;
PROVIDE( __cs3_heap_start = _start_heap)

_end_stack = 0x10008000; 
```

然后在中断向量表中设置_end_stack。

现在比较不同的地图。在代码中不使用 malloc ：

```
 *(COMMON)
            0x1000000c                _ebss = .
            0x10000010                . = ALIGN (0x8)
 *fill*     0x1000000c        0x4 00
            0x10000010                _end = .
            0x10000010                . = ALIGN (0x4)
            0x10000010                _end_bss = .
            0x10000100                . = ALIGN (0x100)
            0x10000100                _start_heap = . 
```

在代码中使用 malloc 的内存映射：

```
*(COMMON)
COMMON      0x10000848        0x4 ...arm-none-eabi/lib/armv7-m/libc.a(lib_a-reent.o)
            0x10000848                errno
            0x1000084c                _ebss = .
            0x10000850                . = ALIGN (0x8)
*fill*      0x1000084c        0x4 00
            0x10000850                _end = .

.bss.__malloc_max_total_mem
            0x10000850        0x4
.bss.__malloc_max_total_mem
            0x10000850        0x4 ...arm-none-eabi/lib/armv7-m/libc.a(lib_a-mallocr.o)
            0x10000850                __malloc_max_total_mem

(...) It goes on (...)
            0x1000085c                __malloc_current_mallinfo
            0x10000884                . = ALIGN (0x4)
            0x10000884                _end_bss = .
            0x10000900                . = ALIGN (0x100)
            0x10000900                _start_heap = . 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T23:38:33.357

所以，经过大约 10 个小时的调试，我终于让它工作了。问题出在链接描述文件中。但是，我发布的不是bss部分，而是文本和数据部分。这是有效的脚本。

```
OUTPUT_FORMAT("elf32-littlearm")
OUTPUT_ARCH(arm)
ENTRY(_startup)

MEMORY
{
    rom (rx)  : ORIGIN = 0x00000000, LENGTH = 512K
    ram (rwx) : ORIGIN = 0x10000000, LENGTH =  32K
}

/* Define the top our stack at the end of SRAM */
_end_stack = 0x10008000;

EXTERN(__interrupt_vector_table);

SECTIONS
{
    .text :
    {
        /* Insert the interrupt vector table first */
        __interrupt_vector_table = .;
        *(.interrupt_vector_table)
        /* Startup assembly */
        *(.startup)
        /* Rest of the code (C) */
        *(.text) *(.text.*) *(.glue_7) *(.glue_7t)
        *(.vfp11_veneer)
        *(.ARM.extab* .gnu.linkonce.armextab.*)
        *(.rodata) *(.rodata.*)
        . = ALIGN(8);
        _end_text = .;
        _start_datai = .;
    } >rom

    .data :
    {
        _start_data = .;
        *(vtable)
        *(.data) *(.data.*)
        . = ALIGN (8);
        _end_data = .;
    } >ram AT >rom

    .data_init : { _end_datai = .; } >rom

    __exidx_start = .;
    .ARM.exidx : { *(.ARM.exidx* .gnu.linkonce.armexidx.*) } > rom
    __exidx_end = .;

    .bss :
    {
        _start_bss = .;
        *(.bss)
        *(COMMON)
    } >ram 

    . = ALIGN(4);
    _end_bss = .;
    . = ALIGN(256);

    _start_heap = .;
    PROVIDE( __cs3_heap_start = _start_heap);

    /* Linker wants .eh_frame section defined because of gcc 4.4.X bug,
     * just discard it here. */
    /DISCARD/ : { *(.eh_*) }
}

_end = .;
PROVIDE(end = .); 
```

我还必须在我的初始化代码中添加一些变量初始化：

```
extern unsigned int _start_data;
extern unsigned int _end_data;
extern unsigned int _start_datai;
extern unsigned int _end_datai;

void init(void) {

    // (...) Other stuff

    // Initialize Global Variables
    uint32_t* data_begin  = (uint32_t*) &_start_data;
    uint32_t* data_end    = (uint32_t*) &_end_data;
    uint32_t* datai_begin = (uint32_t*) &_start_datai;
    uint32_t* datai_end   = (uint32_t*) &_end_datai;
    while(data_begin < data_end)
    {
        *data_begin = *datai_begin;
        data_begin++;
        datai_begin++;
    } 
```

这两个页面很有帮助，尽管我仍然花了很多时间来理解发生了什么：http: [//fun-tech.se/stm32/linker/index.php](http://fun-tech.se/stm32/linker/index.php)和[http://e2e.ti.com/support /microcontrollers/stellaris_arm_cortex-m3_microcontroller/f/473/t/44452.aspx?pi23648=1](http://e2e.ti.com/support/microcontrollers/stellaris_arm_cortex-m3_microcontroller/f/473/t/44452.aspx?pi23648=1)

我希望这可能对其遇到与我遇到的相同问题的其他人有用。

# multithreading - 创建 TThread 数组时访问冲突

> ID：10467249
> 
> 赞同：2
> 
> 时间：2012-05-06T00:59:11.827
> 
> 标签：multithreading, delphi, indy

我正在创建一个多线程应用程序，它创建了一个类 TThread 的动态数组，但对我来说神秘的是，它会导致错误“访问冲突”到“创建”

代码形式：

```
Unit UNT_Main;

Interface

Uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, UNT_Socks;

Type
  TFRM_Main = Class(TForm)
    Procedure FormCreate(Sender: TObject);
  Private
    Procedure OnUpload(Success: Boolean; SockAction: TSockAction);
  Public
    { Public declarations }
  End;

Var
  FRM_Main: TFRM_Main;
  Socks: Array Of TSocks;
  SA: Array Of TSockAction;

Implementation

{$R *.dfm}

Procedure TFRM_Main.OnUpload(Success: Boolean; SockAction: TSockAction);
Begin
  ShowMessage(SockAction.Response);
End;

Procedure TFRM_Main.FormCreate(Sender: TObject);
Var
  I: Integer;
Begin

  SetLength(Socks, 5);
  SetLength(SA, 5);

  For I := 0 To High(Socks)-1 Do
  Begin
    SA[I].SUrl := 'http://google.com.co';
    Socks[I].Create(SA[I]);
    Socks[I].OnUpload := Self.OnUpload;
    Socks[I].Start;
  End;

End;

End. 
```

代码 UNT_Socks：

```
Unit UNT_Socks;

Interface

Uses Classes, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient, IdHTTP;

// action script
Type
  TSockAction = Record
    SUrl: String;
    Response: String;
  End;

  // Eventos
Type
  // on upload event
  TUpload = Procedure(Success: Boolean; SockAction: TSockAction) Of Object;

  // Clase Socks, ejecuta las acciones
Type
  TSocks = Class(TThread)
    // Http indy sock
    Http: TIdHTTP;
    // action script
    FAtnSck: TSockAction;
    // Temp boolean response
    FbTempRet: Boolean;
  Private
    { Eventos }
    FOnUpload: TUpload;
    { Destructor }
    { Metodos & Funciones }
    Function UploadFile: Boolean;
    { Eventos }
    Procedure DoUpload;
  Protected
    Procedure Execute; Override;
  Public
    { Constructor }
    Constructor Create(SockAction: TSockAction);
    { Eventos }
    Property OnUpload: TUpload Read FOnUpload Write FOnUpload;
  End;

Implementation

{ Constructor }
Constructor TSocks.Create(SockAction: TSockAction);
Begin
  Inherited Create(True);

  FAtnSck := SockAction; // <===== Access Violation Here!
  Http := TIdHTTP.Create(Nil);
End;

{ Eventos }
Procedure TSocks.DoUpload;
Begin
  // check if the event is assign
  If Assigned(FOnUpload) Then
    // call it
    FOnUpload(FbTempRet, FAtnSck);
End;

{ Execute }
Procedure TSocks.Execute;
Begin

  FbTempRet := UploadFile;
  Synchronize(DoUpload);

End;

Function TSocks.UploadFile: Boolean;
Var
  SRes: String;
Begin

  Try
    With Http Do
      FAtnSck.Response := Get(FAtnSck.SUrl);
  Except
    Result := False;
  End;

  Result := True;
End;

End. 
```

有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T03:26:42.047

您的创建循环中有 2 个错误：

1）你正在循环到`High(Socks)-1`你应该循环到的时候`High(Socks)`。您正在分配 5 个元素的数组，但只初始化其中的 4 个。不要将 -1 与 一起`High()`使用，而是使用它`Length()`。

2）您在滥用`TSocks.Create()`，这就是您获得 AV 的原因。您将其称为实例方法而不是构造函数，但尚未构造实例，因此崩溃。

改用这个：

```
For I := 0 To High(Socks) Do
Begin
  SA[I].SUrl := 'http://google.com.co';
  Socks[I] := TSocks.Create(SA[I]); // <-- here
  Socks[I].OnUpload := Self.OnUpload;
  Socks[I].Start;
End; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T03:27:15.743

代替

```
Socks[I].Create(SA[I]); 
```

你应该使用

```
Socks[I]:= TSocks.Create(SA[I]); 
```

一些小注意事项：

为什么高（袜子）**-1**？

Uploadfile 的结果是否总是 True？

有必要释放Http吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T06:14:07.513

我同意 Remy。UNT_Socks 中的 TSocks 也有内存泄漏。Http(TIdHttp),FAtnSck(TSockAction) 字段在线程终止后不是空闲的。

在 TSock 的构造函数中设置 FreeOnTermiate

```
Constructor TSocks.Create(SockAction: TSockAction);
Begin
  Inherited Create(True);
  FreeOnTerminate:=True;
  FAtnSck := SockAction;  
  Http := TIdHTTP.Create(Nil);
End; 
```

然后覆盖 TSock 的析构函数

```
 Destructor TSocks.Destroy;
 Begin

   SockAction.Free; // <===== if needed
   Http.Free;
   Inherited;
 End; 
```

# java - 创建 Web 服务客户端时出现 NoSuchMethodError

> ID：10467253
> 
> 赞同：0
> 
> 时间：2012-05-06T01:00:48.087
> 
> 标签：java, axis2, webservice-client, nosuchmethoderror

我是 Java 和 Web 服务的新手，并且`axis2`. 我最近使用一些教程创建了一个 Web 服务。当我第一次按照教程 eclipse 让我创建一个客户端时。但是当我尝试创建一个新项目和一个新的 Web 服务客户端时，它会提供`NoSuchMethodError`. 看起来像这样：

> 为 WSDL 生成代码时发生异常：java.lang.NoSuchMethodError: javax.wsdl.Operation.getExtensionAttributes()Ljava/util/Map; java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect。 Method.invoke(Unknown Source) at org.eclipse.jst.ws.axis2.consumption.core.utils.WSDL2JavaGenerator.getAxisService(WSDL2JavaGenerator.java:379) at org.eclipse.jst.ws.axis2.consumption.core.command .Axis2ClientCodegenCommand.execute(Axis2ClientCodegenCommand.java:94) 在 org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:419) 在 org.eclipse。javax.wsdl.Operation.getExtensionAttributes()Ljava/util/Map; 在 org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateOperations(WSDL11ToAxisServiceBuilder.java:1427) 在 org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populatePortType(WSDL11ToAxisServiceBuilder.java:606) 在 org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateEndpoints (WSDL11ToAxisServiceBuilder.java:483) 在 org.apache.axis2.description.WSDL11ToAxisServiceBuilder.populateService(WSDL11ToAxisServiceBuilder.java:373) ... 56 更多

我正在使用axis2-1.6.1，它说java合规级别是6 我用谷歌搜索了它，但找不到解决这个问题的相关解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T12:30:12.543

我遇到了同样的问题，并通过查看我的**WEB-INF/lib**解决了它。**我的WEB-INF**
中 有两个**AXIS2** jar 文件。 如果将两个不同版本的 axis2 的 jar 文件复制到**WEB-INF** ，也会发生这种情况。

 ****希望它有效:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:43:07.777

请按照以下说明进行操作。

1.  确保您的 Web 服务在服务器中可用。请通过查看您的 Web 服务的 WSDL 来检查它。
2.  之后按照其中一篇文章的说明进行操作，

[web-service-client-using-eclipse-axis2](http://emsooriyabandara.blogspot.com/2010/05/web-service-client-using-eclipse-axis2.html)
[BottomUpAxis2WebService](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

它对我有用。确保您的代码生成插件已为 Eclipse 正确安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:07:47.813

问题是Eclipse“没有找到任何东西”。

这是一个例子；这里的解决方案是：

1.  确保项目中包含所有必要的 .jar 库

2.  在进行部署时在类加载中选择“首先搜索本地类”

[尝试发布 ODI Web 服务时 AXIS2 出错](https://forums.oracle.com/forums/thread.jspa?threadID=855977)****

# .net - 如何获取 XElement 中的内容

> ID：10467254
> 
> 赞同：1
> 
> 时间：2012-05-06T01:01:37.313
> 
> 标签：.net, xml, linq, xml-parsing, linq-to-xml

如何使用 linq2sql 获取包含任何匹配内容（不包括任何嵌套元素）的节点。

换句话说，我有一个 XElement 包含

```
<div>
  <div>
    <p>
      The Content
    </p>
    <p> 
      Some other content
    </p>
  </div>
</div> 
```

我想获得第一个 <p> 元素，因为它的内容在 Trimmed 时正是“内容”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:53:42.897

对于非常大的 XML 文件，这可能会很慢，因此有用性取决于您的任务。

```
namespace ConsoleApplication9
{
    using System.Xml.Linq;
    using System.Linq;

    class Program
    {
        static void Main(string[] args)
        {
            XElement xx = XElement.Parse(@"<div>
  <div>
    <p>
      The Content
    </p>
    <p> 
      Some other content
    </p>
  </div>
</div>");
            XNode node = xx
                .DescendantNodesAndSelf()
                .FirstOrDefault(x => x.ToString().Trim() == "The Content");

            if (node != null)
            {
                XElement el = node.Parent;
            }
        }
    }
} 
```

# c++ - C++ 调优/优化

> ID：10467256
> 
> 赞同：4
> 
> 时间：2012-05-06T01:03:16.147
> 
> 标签：c++, optimization, performance

我在此页面[http://www.theregister.co.uk/2011/06/03/google_paper_on_cplusplus_java_scala_go/](http://www.theregister.co.uk/2011/06/03/google_paper_on_cplusplus_java_scala_go/)上阅读了以下内容：

C++ 提供了四种语言中最快的运行时间。但是，该论文说，它还需要更广泛的“调整工作，其中许多工作是在普通程序员无法获得的复杂水平上完成的”。

我是 C++ 的忠实粉丝，显然还在学习。我的问题是“调整努力”是什么意思？它们是指编译器设置还是仅使用复杂的编码技术？任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:31:58.893

根据我对这些语言的经验，我会说它指的是编译和链接的过程。我知道，当我需要编译一个使用 C++ 或 Java 中的许多库的程序时，使用 java 时需要的编译器参数比使用 C++ 时要少得多。我没有在大型项目中使用过 Go 或 Scala，所以我无法对它们进行公平的比较。同样对于 C++，如果您愿意，使用指针确实需要大量调整。当您开始在 C++ 中使用复杂的数据类型时，它会很快变得非常复杂。这可能根本没有帮助，但根据我的经验，这是我所知道的。

我也更喜欢 C++。我只是永远无法接受 Java 提供的解释性语言的想法，正如我之前所说的，我还没有使用足够多的 Scala 或 Go 来获得公平的报告。但这就是我所知道的关于“调整努力”的全部内容。

编辑：

对不起，我应该做我的研究，论文所指的调整只是对原始基准程序的修改，在原始问题的评论中没有使用。

# java - Netbeans：如何从“设计”GUI 构建器向 JTable 添加 valueChanged 侦听器？

> ID：10467258
> 
> 赞同：3
> 
> 时间：2012-05-06T01:03:35.603
> 
> 标签：java, swing, netbeans, jtable, netbeans-7

我右键单击 JTable 并将一些代码插入到“post listeners code”中，这是一个糟糕的组合。

我没有看到要添加的选项

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
  public void valueChanged(ListSelectionEvent evt) { 
```

到 JTable 的“设计”视图中的“事件”。我确定有一种方法可以从设计视图中添加 valueChanged(ListSelectionEvent evt)，但是如何？

也许这是一个[错误](http://netbeans.org/bugzilla/show_bug.cgi?id=8089)？

> 行选择更改事件是由 JTable 的 ListSelectionModel 产生的，而不是由 JTable 本身产生的——因此该事件不能在 Component Inspector 中呈现（作为 JTable 的事件）。处理此事件必须手动完成，例如：

```
jTable1.getSelectionModel().addListSelectionListener(
    new javax.swing.event.ListSelectionListener() {
        public void valueChanged(ListSelectionEvent evt) {
            customRowSelectionEventHandler(evt);
        }
    }
); 
```

尽管也许有一种方法可以在“蓝色”、“托管”代码之外为 JTable 获取 ListSelectionModel？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T07:16:33.723

`ListSelectionListener`您可以在源代码的可编辑部分创建自己的。您可以将侦听器的实例添加到`jTable1`表`Post-init Code`属性中类变量的选择模型中：

```
jTable1.getSelectionModel().addListSelectionListener(new MyListener()); 
```

侦听器本身可能如下所示：

```
private static class MyListener implements ListSelectionListener {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        System.out.println(e.getFirstIndex());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T05:35:34.877

也许你可以扩展`InputVerifier`.

这不完全是它的意图，但您可以根据您的用途对其进行调整。

```
public class TableVerifier extends InputVerifier {

    @Override
    public boolean verify(JComponent input) {
        assert input instanceof JTable : "I told you I wanted a table!";

        JTable inputTable = (JTable) input;
        int numberColumns = inputTable.getColumnCount();
        int numberRows = inputTable.getRowCount();

        for (int column = 0; column < numberColumns; column++) {
            for (int row = 0; row < numberRows; row++) {
                //DO YOUR STUFF
            }
        }
        return true;
    }
} 
```

# matlab - matlab: fminunc return '用户目标函数返回复数；尝试一个新的点......'

> ID：10467265
> 
> 赞同：0
> 
> 时间：2012-05-06T01:04:57.747
> 
> 标签：matlab, machine-learning

fminunc 正在返回'用户目标函数返回复杂；尝试一个新点...' 当 'iter-detailed' 开启时。我知道这是因为我的成本函数，由于某种原因，它返回了一个复杂的组件（准确地说，它返回了 J = NaN + NaNi）。关于它为什么这样做以及如何解决它的任何想法？PS我有一个非常大的特征集（大约1000个），它会不会超过最大值或精度？Ps 成本函数和梯度：

```
hyp = sigmoid(X * theta);
reg = (lambda/(2*m))*sum((theta(2:end).^2));

J = (1/m * sum((-y .* log(hyp)) - ((1-y) .* log(1-hyp)))) + reg;

grad(1) = (1/m * ((hyp-y)' * X(:,1)))';
grad(2:end) = (1/m * ((hyp-y)' * X(:,2:end)))' + (lambda/m * theta(2:end)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:47:50.313

任何你遇到奇怪的错误汇合的机会，其中：

*   sigmoid(X*theta) 是负数或大于一（当您在第 3 行获取它的日志时，这会给您带来复杂的部分）；和
*   m 或 y 是 NaN 吗？

我以前没有注意到这一点，但是如果 NaN 与复数交互，你会得到一个“复数”NaN。

```
>> (1+2i) * nan

ans =

      NaN +    NaNi 
```

# iphone - 如何通过从 UIViewController 向右或向左滑动来从 UIImageView 更改图像

> ID：10467269
> 
> 赞同：5
> 
> 时间：2012-05-06T01:05:34.843
> 
> 标签：iphone, ios, uiviewcontroller, uiimageview

我有一个`UIViewController`其中一个`UIImageView`和一个数组`UIImage`。如何开发向右或向左滑动功能以将图像更改为下一个数组位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T01:46:31.987

常见的方法是一个 UIScrollView 大小的图像之一，并启用分页。

将图像添加为子视图并像这样设置内容大小......

```
NSArray *images;
CGSize imageSize;

self.scrollView.frame = CGRectMake(10,10,imageSize.width,imageSize.height);
self.scrollView.contentSize = CGSizeMake(imageSize.width * images.count, imageSize.height);
self.scrollView.pagingEnabled = YES;

CGFloat xPos = 0.0;

for (UIImage *image in images) {
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xPos, 0.0, imageSize.width, imageSize.width);
    [self.scrollView addSubview:imageView];
    xPos += imageSize.width;
    // assuming ARC, otherwise release imageView
} 
```

您还可以关闭反弹、滚动指示器等，具体取决于您想要的效果的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-09T12:19:04.163

通过使用 UIScrollView 和 UIPageControl，拖放 UIScrollView 和 UIPageControl 确保它们不重叠，创建两者的 IBoutLet。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // 1
imageArray = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"image2.jpg"],
                     [UIImage imageNamed:@"man-actor-Ashton-Kutcher-Wallpaper.jpg"],
                     [UIImage imageNamed:@"image1.jpg"],
                     [UIImage imageNamed:@"man-curl.jpg"],
                     [UIImage imageNamed:@"man-in-suit.jpg"],
                     nil];

  for (int i = 0; i < imageArray.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];
    subview.image = [imageArray objectAtIndex:i];
    subview.contentMode = UIViewContentModeScaleAspectFit;
    [self.scrollView addSubview:subview];
  }

  self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * imageArray.count, self.scrollView.frame.size.height);
  pageControl.numberOfPages = imageArray.count;
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    // Update the page when more than 50% of the previous/next page is visible
  CGFloat pageWidth = self.scrollView.frame.size.width;
  int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
  self.pageControl.currentPage = page;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T01:26:58.420

`UISwipeGestureRecognizer`您可以像这样简单地向左或向右滑动方向

```
swipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(detectSwipe:)];
[swipeGesture setNumberOfTouchesRequired:1];
[swipeGesture setDirection:UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionUp];
[appView addGestureRecognizer:swipeGesture]; 
```

该方法`detectSwipe`声明用于处理您的前进和后退以使用 UIImage 数组。您还可以查看[Apple 的 SimpleGestureRecognizers 演示](http://developer.apple.com/library/ios/#samplecode/SimpleGestureRecognizers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009460)

希望对你有帮助！

# php - 只需要在一个目录中执行 php

> ID：10467270
> 
> 赞同：-2
> 
> 时间：2012-05-06T01:05:45.680
> 
> 标签：php

我想要做的是将下面的 php 代码添加到我的网站顶部，并让它只为我的 /view/ 目录运行，但我不知道如何做到这一点。所以它需要在 www.mysite.com/view/page1.html 和 .../view/page2.html 等上运行这个目录中的所有数千个页面。当我现在添加此代码时会发生什么，它为 /view/ 页面完成了预期的工作，但它在我网站上的所有其他页面上给出了错误。

这是我试图修改为仅对这些页面执行的代码：

```
<!--[Include Template code/img.tpl]-->
<!--[Array $en SELECT i_id, i_name FROM $picstable WHERE i_user=$en[mm_id] AND i_status=2]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:24:51.173

您可以在当前脚本中使用 getcwd() 读取路径。

然后你解析它并检查路径中的最后一个目录是否是视图，然后添加此代码，否则只需跳过添加它。

# facebook-graph-api - 从 Facebook 获取长期访问令牌

> ID：10467272
> 
> 赞同：57
> 
> 时间：2012-05-06T01:06:11.447
> 
> 标签：facebook-graph-api

据我了解，最近 Facebook 决定取消该`offline_access`权限，并引入了一个称为长寿命访问令牌的概念，最长可使用 60 天。有谁知道如何使用 Facebook JavaScript SDK 获取此访问令牌？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-06T06:31:35.567

有一种方法可以将其延长至 60 天。此处描述：[https](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/) ://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/ 下`Scenario 4: Client-side OAuth and Extending Access_Token Expiration Time through New Endpoint`

编辑：为了扩展访问令牌，您需要使用短期访问令牌发出以下请求：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-27T21:12:03.690

由于 Facebook 中的一个错误，一些用户必须在 Facebook 发布长期令牌之前取消对该应用程序的授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T05:50:43.557

我刚刚使用“axios”进行了 Facebook Graph API 调用。您可以从 App Dashboard 中找到 client_id 和 client_secret。

```
getLongLiveToken = () => {
    window.FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            let userAccessToken = response.authResponse.accessToken;
            axios.get(`https://graph.facebook.com/oauth/access_token?client_id=${clientId}&client_secret=${clientSecret}&grant_type=fb_exchange_token&fb_exchange_token=${userAccessToken}`)
            .then((response) => {
                console.log("Long Live Access Token");
                console.log(response.data.access_token);
             });
           }
       });
    }
<button onClick={ () => this.getLongLiveToken() } >Long Live Token</button> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-03-27T07:32:33.390

使用以下详细信息向 javascript 添加函数：我希望它对您有用。

```
function getLongLiveToken(data){

        FB.api('oauth/access_token', {
            client_id: data.client_id, // FB_APP_ID
            client_secret: data.secret, // FB_APP_SECRET
            grant_type: 'fb_exchange_token',
            fb_exchange_token: data.access_token // USER_TOKEN
        }, function (res) {
            if(!res || res.error) {
                console.log(!res ? 'error occurred' : res.error);
            }else{
                var accessToken = res.access_token;
                if(typeof accessToken != 'undefined'){
                }
            }
        });
    } 
```

# c# - 如何确定两个人是否来自活动目录中的同一位置

> ID：10467276
> 
> 赞同：1
> 
> 时间：2012-05-06T01:06:21.607
> 
> 标签：c#, .net, active-directory

假设活动目录设置正确，我试图找到一种方法来确定两个人是否来自同一位置。我能够解决这个问题的唯一方法是找到一种方法来确定他们的目录条目是否位于同一个 OU 中。所以目前，这就是我目前正在吐槽的内容：

```
private bool ComparePeople()
{
    var user1Guid = "aaa";
    var user2Guid = "bbb";
    var expr = @"CN=.*?,";
    var user1OU = Regex.Replace(GetUserDN(user1Guid), expr, string.Empty);
    var user2OU = Regex.Replace(GetUserDN(user2Guid), expr, string.Empty);
    return user1OU == user2OU;
}
private string GetUserDN(string userGuid)
{
    using(var entry = new DirectoryEntry(string.format("LDAP://<GUID={0}>", userGuid)))
    {   
        using(var search = new DirectorySearcher(entry))
        {
            search.PropertiesToAdd.Add("distinguishedName");
            var result = search.FindOne().GetDirectoryEntry();
            if(result != null && result.Properties["distinguishedName"].Count > 0)
            {
                return result.Properties["distinguishedName"].Value.ToString();
            }
            else return "";
        }
    }
} 
```

我还没有测试过这个，但我觉得它会工作。它基本上找到用户的可分辨名称，给出他们的 Guid。然后它从 DN 中删除 CN，本质上是找到该用户的目录条目/OU 的路径。不过，好像有点绕。有没有人有任何意见或建议来简化这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:31:56.750

如果我对您的理解正确，您正在尝试找出两个用户帐户是否位于同一个 OU（组织单位）内 - 对吗？

我要做的是读取两个用户帐户的**父**级 - 如果该父级匹配，那么它们在同一个 OU 中。

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a two users
UserPrincipal user1 = UserPrincipal.FindByIdentity(ctx, IdentityType.Guid, user1Guid);
UserPrincipal user2 = UserPrincipal.FindByIdentity(ctx, IdentityType.Guid, user2Guid);

if(user1 != null && user2 != null)
{
     DirectoryEntry dirEntry1 = user1.GetUnderlyingObject() as DirectoryEntry;
     DirectoryEntry dirEntry2 = user2.GetUnderlyingObject() as DirectoryEntry;

     // if both are OK, get the parents and compare their GUID
     if(dirEntry1 != null && dirEntry2 != null)
     {
         DirectoryEntry parent1 = dirEntry1.Parent;
         DirectoryEntry parent2 = dirEntry2.Parent;

         bool areInSameOU = (parent1.Guid == parent2.Guid);
     }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# c - 从.txt文件读入C中的数组？

> ID：10467278
> 
> 赞同：1
> 
> 时间：2012-05-06T01:06:47.997
> 
> 标签：c, arrays

我想将存储在由空格分隔的 .txt 文件中的 4 列中的每一列读入它们自己的数组中。文本文件可能有数百行，因此需要读取到文件末尾。

例子：

```
3.4407280e+003 6.0117545e+003 8.0132664e+002 2.5292922e+003
3.4163843e+003 5.9879421e+003 7.7792044e+002 2.5058547e+003 
```

所以通常它是数组 1，包含第一列和最左列中的所有行，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:10:43.877

[`fscanf`](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)是你的朋友：

```
static const int MAX_FILE_ROWS = 200;

double lines[MAX_FILE_ROWS][4];
FILE *file = fopen("myfile.txt", "r");

for (int i = 0; i < MAX_FILE_ROWS; i++)
{
    if (feof(file))
        break;

    fscanf(file, "%lf %lf %lf %lf", &(lines[i][0]), &(lines[i][1]), &(lines[i][2]), &(lines[i][3]));
}

fclose(file); 
```

然后，行应该包含您需要的数据。

# ios - 您可以将对象添加到不是视图控制器视图的子视图的情节提要场景中吗？

> ID：10467279
> 
> 赞同：0
> 
> 时间：2012-05-06T01:07:08.640
> 
> 标签：ios, storyboard, nib

在普通视图控制器的 nib 中，您可以实例化和配置对象，它们不必是文件所有者（视图控制器）视图的子视图。我发现在“侧面”创建和配置按钮和标签很有用，所以我不必以编程方式进行。我可以将视图控制器的插座连接到它们，并在需要时将它们添加到视图中。

这对于故事板来说似乎是不可能的。我应该为这样的东西创建一个单独的笔尖并通过 NSBundle 加载它吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:39:15.323

您可以使用以下代码从情节提要中实例化未连接的 UIViewController（或其他控制器）。您必须在身份检查器中为该视图设置标识符。我不认为你可以自己拥有自由浮动按钮或 UIViews（至少我从未见过或做过） - 必须是某种控制器。如果您已经对控制器进行了子类化（如下例所示），您可以在身份检查器中指定类。

```
 modalViewController = (AlertDisplayViewController * )
    [[UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:NULL] 
     instantiateViewControllerWithIdentifier:@"alertDisplayView"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:36:20.797

尝试将对象拖到文档大纲中的“场景”（故事板编辑器中的左侧窗格）或主视图中场景下方的区域（视图控制器、急救人员等的小图标所在的位置。 ）我认为这可能与您所说的故事板相当。

然后该对象位于视图控制器“旁边”，而不是作为子对象，并且可以通过单击其图标（或文档大纲中的条目）并编辑其属性在 IB 中进行配置，通过从图标拖动使用插座连接到代码， ETC。

![文件大纲](../Images/6866dcd984cc064cfc625fd0c4cb02ec.png) ![托盘](../Images/84d2647ee4829b9d4e5e3414e4c3473b.png)

# javascript - 使用属性 Jquery

> ID：10467281
> 
> 赞同：0
> 
> 时间：2012-05-06T01:07:36.940
> 
> 标签：javascript, jquery, html, css

我有一种情况

我正在将一个按钮附加到一个具有宽度的 div

```
 $('#main').append('<button id="hello" type="button" style="width:100px">Click Me!</button>'); 
```

我正在尝试更改宽度但是没有任何反应

```
$("#main").prop({ width: '300px'}); 
```

我试过使用 .css 、 .attr 和 .width 来尝试改变宽度，但是同样的问题一直在发生。即使在谷歌搜索之后，我仍然不确定为什么会发生这种情况，如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:10:59.013

如果您尝试设置按钮的宽度，则必须选择按钮，而不是 div。

```
$('#hello').width(300); 
```

([演示 1](http://jsfiddle.net/mattball/yT9eS/) )

如果您的目标是在 ing 之后立即设置宽度`.append()`，则最好从正确的宽度开始：

```
$('#main').append($('<button/>', {
    id: 'hello',
    text: 'Click Me!',
    width: 300
})); 
```

（[演示2](http://jsfiddle.net/mattball/N6g7x/)）

* * *

继续阅读`.width()`：[http](http://api.jquery.com/width/#width2) ://api.jquery.com/width/#width2 （是的，jQuery API 文档现在已经下架。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:11:07.060

您正在更改持有它的元素的宽度，您不想更改按钮的宽度吗？jQuery 也有一个 width 方法。

```
$("#hello").width(300);
//or
$("#main").find("button").width(300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:11:41.777

您是要更改`#main`div 还是`#hello`按钮？

分区：

```
$("#main").css('width', '300px'); 
```

按钮：

```
$("#hello").css('width', '300px'); 
```

我知道您说过您使用了 .css 方法，但它应该可以工作。如果它仍然不起作用，您可以在 jsfiddle 中放置一个示例，以便我们看得更清楚。

# android - 需要重新启动 Eclipse 才能查看对应用程序所做的更改

> ID：10467283
> 
> 赞同：0
> 
> 时间：2012-05-06T01:08:03.783
> 
> 标签：android, eclipse, android-emulator

当我启动 Eclipse 时，我可以使用 运行 Android 应用程序，`Run As > Android Application`但随后我对应用程序进行编辑并保存，但在模拟器中应用程序没有更新。我认为有*热部署*（如提到的[SO question1](https://stackoverflow.com/a/728588/410975)），但我关闭了模拟器并重新启动它。但是，如果我尝试在 Eclipse 中再次运行该应用程序`Run As`，它会卡在 27%（如本[SO question2](https://stackoverflow.com/q/5118713/410975)中所述），我使用推荐的解决方案`Window>AVD Manager>Start`. 我使用这种方法遇到的问题是，在 AVD 运行时对应用程序所做的修改在稍后重新启动应用程序时不会更新到模拟器，甚至重新启动模拟器也不会传播所做的更改。仅当 Eclipse 重新启动时才会注册更改。

这可能是 Eclipse 的错误吗？它是带有 Android Development Toolkit 18 的 3.6.2 ......我不介意任何解决方案，让我每次想要运行新版本的程序时都不必重新启动 Eclipse。在发表这篇文章之前，我检查了软件更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:25:59.890

您在第二次启动之前尝试过 Project->Clean 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:28:28.533

我也遇到了同样的问题，并通过使用 ant 从命令行构建来解决它。老实说，最好的办法是尽可能多地使用命令行。我发现它比在 Eclipse 中执行所有操作要快得多且不易出错。

# .net - 我应该更频繁地处理 EF 上下文吗？

> ID：10467286
> 
> 赞同：2
> 
> 时间：2012-05-06T01:08:40.270
> 
> 标签：.net, wpf, entity-framework-4

我正在开发我的第一个将使用实体框架的应用程序。我有一个简单的 WPF 应用程序，它是基于页面的。我在页面的类级别定义了一个 EF 上下文，并在页面的加载事件中实例化它。然后基本上我只是把它留在那里，在用户做出各种选择时使用它，等等。但是，多年的编程经验让我认为我不应该只是让这个上下文保持开放。每次我需要用它做某事时，我应该更新它，还是没关系？

我正在使用 VS 2010，.NET 4.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:18:53.333

EF 上下文被设计为短命的。他们不做很多家务，并且倾向于分配内存而不考虑在短期内释放它。此外，更改跟踪会随着时间的推移继续进行并且是累积的，因此上下文存在的时间越长，它为更改跟踪分配的内存就越多。

经验法则，使用必要的最小范围，并将上下文保持在有意义的最短时间范围内。

# ruby-on-rails - FactoryGirl 测试后不删除用户

> ID：10467287
> 
> 赞同：1
> 
> 时间：2012-05-06T01:08:43.850
> 
> 标签：ruby-on-rails, rspec, factory-bot

我正在运行测试，第一次，它们都通过了绿色。如果我再次运行测试，一些失败并显示以下消息：

```
 Failure/Error: @user = Factory :user
     ActiveRecord::RecordInvalid:
       Validation failed: Email has already been taken 
```

我真的很困惑为什么会这样。我认为 rspec 没有将值推送到数据库。如果我清除测试数据库，这是固定的，但是，在第二轮测试执行中，一些失败并出现相同的错误。

有什么想法可以解决这个问题吗？注意，我最近安装了cancan gem，也许它与它有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:15:09.450

Factory Girl 不是应该删除数据的工具，它通常是 RSpec（通过`use_transactional_fixtures`选项）或其他工具，如`database_cleaner`.

如果您的测试数据库没有被正确清理，那么我建议使用[`database_cleaner`](https://github.com/DatabaseCleaner/database_cleaner).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:09:37.030

我遇到过一些事情没有正确清除的情况，并且运行`rake db:test:prepare`清除数据库就像一个魅力（假设您没有预先填充数据）。如果您确实需要预先填充的数据，请使用固定装置或其他类似解决方案重置为原始状态。

# haskell - 输入“=”时解析错误

> ID：10467288
> 
> 赞同：0
> 
> 时间：2012-05-06T01:08:55.263
> 
> 标签：haskell

```
initials :: String -> String -> String
initials firstname lastname = [f] ++ ". " ++ [l] ++ "."
    where (f:_) = firstname
          (l:_) = lastname 
```

对于这段代码。我有错误

```
parse error on input `=' 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T01:39:26.247

`where`在关键字之前使用制表符。对于 GHC，它看起来像这样：

```
␉       where␠(f:_)␠=␠firstname
␠␠␠␠␠␠␠␠␠(l:_)␠=␠lastname 
```

因此，GHC 认为`where`块中的第一行从第 14 列开始（标签计数为 8 列 iirc），而第二行从第 9 列开始，这会导致错误。

您应该使用一个**很好**的文本编辑器，它可以为您将制表符转换为 4 个空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T09:43:04.720

顺便说一句，您不需要辅助函数，您可以直接对参数进行模式匹配

```
initials :: String -> String -> String
initials (f:_) (l:_) = [f,'.',' ',l,'.'] 
```

# jquery - 如何在 flexigrid 中编辑数据

> ID：10467291
> 
> 赞同：1
> 
> 时间：2012-05-06T01:09:20.793
> 
> 标签：jquery, edit, flexigrid

我不想弹出一个对话框来实现这个。我的意思是我需要就地编辑器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:58:15.137

我找到了一种方法来做到这一点。使用 jquery.editinplace 以下是我的代码：

```
<script type="text/javascript" src="./js/jquery.editinplace.js"></script> 
```

```
function editDescription(celDiv, id){

    $( celDiv ).click( function() {
    var idTd = $(celDiv).parent().parent().children()[1];
    $(celDiv).editInPlace({
        url: "http://localhost:8081/kaimei/update_description",
        params: "address="+$(idTd.children).html(),
        error:function(obj){
        alert(JSON.stringify(obj));
        },
        success:function(obj){
        var str = m[JSON.parse(obj).status+""][window.curLanguage];
        alert(str);
        $("#displays").flexReload();
        }
    });
    });
}

$(document).ready ( function() {

    $("#displays").flexigrid (
    {
        url: 'http://localhost:8081/kaimei/load_displays',
        method:'GET',
        dataType: 'json',
        width: 400,
        height: 300,
        colModel : [
        {hide: '勾选', name: 'check', width: 30, sortable: true, align: 'left'},
        {display: 'ID', name: 'id', width: 90, sortable: true, align: 'left'},
        {display: '描述信息', name: 'description', width: 110, sortable: true, align: 'left',process:editDescription},
        {display: '状态', name: 'status', width: 20, sortable: true, align: 'left'}
        ]
    }
    );  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:13:45.610

你可以看看这个？[http://www.vb-helper.com/howto_edit_flexgrid_control.html](http://www.vb-helper.com/howto_edit_flexgrid_control.html)

# delphi - 无法在 Delphi 6 应用程序中创建具有视频和音频 (VFW) 的 AVI 文件

> ID：10467299
> 
> 赞同：2
> 
> 时间：2012-05-06T01:11:00.603
> 
> 标签：delphi, wav, avi, vfw

我正在尝试编写一个 Delphi 6 应用程序，该应用程序获取视频和音频并使用 VFW 服务将其写入 AVI。我设法让视频流正常工作。它在 VLC 或 Windows Media Player 中播放良好。但是当我添加一个音频流并尝试播放输出 AVI 时，VLC 播放器抱怨 AVI 文件被破坏。它将播放文件，视频看起来不错，但没有音频。我尝试在写入视频流之前添加音频流，然后在它之后添加。都没有奏效。

此外，如果我不添加音频流，我可以在 Windows 资源管理器中右键单击输出 AVI 文件，在摘要选项卡中，我可以看到流中视频数据的正确信息。添加流后，右键单击会显示一条状态消息，说明无法读取 AVI 属性。

**更新**：我做的事情基本上是错误的。事实证明，我正在做的事情是破坏文件的顶级标题。如果我不创建音频流，则文件很好，我会在文件的开头看到通常的标题信息。 **在我调用创建音频流的那一刻，我创建的第二个流，输出 AVI 文件开头的标题是完全空白的（零）。** 即使我没有调用 AVIStreamSetFormat() 或写入任何数据（即使我这样做了），在使用十六进制编辑器检查文件时，只需进行第二次 AVICreateStream() 调用就会擦除文件的开头。如果对输出文件“损坏”，我能做什么会导致这个数量。

我的问题是：

1）我做错了什么？2) 你知道一个很好的示例，它展示了如何创建一个音频和视频交错的 AVI，尤其是一个展示如何编写压缩音频流的示例？

在我完全写出视频流之后，这是我用来编写音频流的代码。单元级变量 FAvi 已经填充了 TWaveFormatEx 字段 (wfx)。我检查了内容，所有字段都设置为 8000 Khz 采样率、1 个通道、每通道 16 位和格式标记 1 (WAVE_FORMAT_PCM) 的有效值。块对齐、数据速率等也都正确填写：

```
function TAviWriterWithCompression.addAudioFrame(dat: Pointer; numbytes: Cardinal): HRESULT;
var
    bRetErr: boolean;
    numsamps: LongInt;
    ahdr: TAVISTREAMINFO;
    hr: HRESULT;
    lSampWritten, lBytesWritten: LONG;
begin
    Result := S_OK;
    bRetErr := true;

    if Assigned(FAvi_) then
    begin
        if Assigned(dat) and (numbytes <> 0) then
        begin
            if not FAvi_.iserr then
            begin
                if FAvi_.wfx.nChannels <> 0 then
                    bRetErr := false
                else
                    Result := LongInt(AVIERR_BADFORMAT);
            end
            else
                Result := LongInt(AVIERR_ERROR);
        end
        else
            Result := LongInt(AVIERR_BADPARAM);
    end
    else
        Result := LongInt(AVIERR_BADHANDLE);

    if bRetErr then
        // =========================== EXIT POINT ==============
        exit;

    if FAvi_.wfx.wBitsPerSample <= 0 then
    begin
         Result := LongInt(AVIERR_BADFORMAT);

         // =========================== EXIT POINT ==============
         exit;
    end; // if FAvi_.wfx.wBitsPerSample <= 0 then 

    numsamps := Trunc((numbytes * 8) / FAvi_.wfx.wBitsPerSample);

    if ((numsamps * FAvi_.wfx.wBitsPerSample / 8) <> numbytes) then
    begin
        Result := LongInt(AVIERR_BADPARAM);

        // =========================== EXIT POINT ==============
        exit;
    end; // if ((numsamps * FAvi_.wfx.wBitsPerSample/8) <> numbytes) then

    if not Assigned(FAvi_.theAs) then
    begin
        ZeroMemory(@ahdr, sizeof(ahdr));
        ahdr.fccType        := streamtypeAUDIO;
        ahdr.dwScale        := FAvi_.wfx.nBlockAlign;
        ahdr.dwRate         := FAvi_.wfx.nSamplesPerSec*FAvi_.wfx.nBlockAlign;
        ahdr.dwSampleSize   := FAvi_.wfx.nBlockAlign;

        ahdr.dwQuality      := DWORD(-1);

        hr := AVIFileCreateStream(FAvi_.pfile, FAvi_.theAs, ahdr);

        if hr <> AVIERR_OK then
        begin
            Result := hr;

            // Set the error flag.
            FAvi_.iserr := true;

            // =========================== EXIT POINT ==============
            exit;
        end; // if hr <> AVIERR_OK then

        hr := AVIStreamSetFormat(FAvi_.theAs, 0, @FAvi_.wfx, sizeof(FAvi_.wfx));

        if hr <> AVIERR_OK then
        begin
            Result := hr;

            // Set the error flag.
            FAvi_.iserr := true;

            // =========================== EXIT POINT ==============
            exit;
        end; // if hr <> AVIERR_OK then
    end; // if not Assigned(FAvi_.theAs) then

    // now we can write the data
    hr := AVIStreamWrite(FAvi_.theAs, FAvi_.nsamp, numsamps, dat, numbytes, AVIIF_KEYFRAME, @lSampWritten, @lBytesWritten);

    if hr <> AVIERR_OK then
    begin
        Result := hr;

        // Set the error flag in our utility object.
        FAvi_.iserr := true;

        // =========================== EXIT POINT ==============
        exit;
    end; // if hr <> AVIERR_OK then

    Inc(FAvi_.nsamp, numsamps);

    // Set the flag that tells it is no longer a virgin file and that
    //  attempting to set the compression is not allowed.
    FIsVirginFile := false;
end; 
```

这是完成时清理音频和视频流的代码：

```
destructor TAviWriterWithCompression.Destroy;
begin
    // Code goes here.
    if Assigned(FAvi_) then
    begin
        // Release the streams.
        if Assigned(FAvi_.theAs) then
        begin
            AVIStreamRelease(FAvi_.theAs);
            FAvi_.theAs := nil;
        end;

        if Assigned(FAvi_.thePsCompressed) then
        begin
            AVIStreamRelease(FAvi_.thePsCompressed);
            // FAvi_.thePsCompressed := nil;
        end;

        if Assigned(FAvi_.thePs) then
        begin
            AVIStreamRelease(FAvi_.thePs);
            // FAvi_.thePs := nil;
        end;

        if Assigned(FAvi_.pfile) then
        begin
            AVIFileRelease(FAvi_.pfile);
            // FAvi_.pfile := nil;
        end;

        AVIFileExit();
        // FreeAndNil(FAvi_);
    end; // if Assigned(FAvi_) then

    inherited Destroy;
end; 
```

通知：@RemyLebau

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:36:56.617

在以下页面中有一个名为“TAVIWriter”的组件：

[http://www.efg2.com/Lab/Library/Delphi/Graphics/FileFormatsAndConversion.htm](http://www.efg2.com/Lab/Library/Delphi/Graphics/FileFormatsAndConversion.htm)

其中包括组件的完整源代码以及如何使用它的演示。

# python - 如何使用 boto 在 Windows ec2 实例上挂载临时存储？

> ID：10467300
> 
> 赞同：3
> 
> 时间：2012-05-06T01:11:02.663
> 
> 标签：python, amazon-ec2, boto

我有一个使用 Windows Server 2008 作为 EBS 根设备的 AMI。我可以使用 boto 和远程桌面启动它一个实例，但我似乎无法让它挂载它的临时存储。我的 BlockDeviceMapping 有问题吗？

这是我的代码：

```
import boto
from boto.ec2.connection import EC2Connection
conn = EC2Connection(mykey, mysecretkey)
bdm = boto.ec2.blockdevicemapping.BlockDeviceMapping({'/dev/xvdb':'ephemeral0'})
conn.run_instances(myami, key_name=mykeyname,security_groups=[mysecgroup],block_device_map=bdm) 
```

当我运行此代码时，会启动一个实例并且我可以访问，但我只看到已安装的根设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:30:40.600

我想到了。我看过一些例子，这些例子让我相信块设备映射应该是一个字符串到字符串的映射，但它实际上应该是一个字符串到 BlockDeviceType 的映射。这是我如何让它工作的：

```
from boto.ec2.connection import EC2Connection
from boto.ec2.blockdevicemapping import BlockDeviceType, BlockDeviceMapping
conn = EC2Connection(mykey, mysecretkey)
xvdb = BlockDeviceType()
xvdb.ephemeral_name='ephemeral0'
bdm = BlockDeviceMapping()
bdm['/dev/xvdb'] = xvdb
conn.run_instances(myami, key_name=mykeyname,security_groups=[mysecgroup],block_device_map=bdm) 
```

当我登录时，我可以看到我的临时驱动器。并不是说它不会作为块设备出现在 AWS 管理控制台中。您仍然只能看到您的根设备。

[这](http://groups.google.com/group/boto-users/browse_thread/thread/ee281f1ccf420a19/26a72f3c9341526b)是一个帮助我弄清楚的代码示例/论坛问题。

# c# - “正确”终止 WinForms 应用程序

> ID：10467303
> 
> 赞同：1
> 
> 时间：2012-05-06T01:11:29.660
> 
> 标签：c#, winforms

正确关闭应用程序有多重要？
也就是说，`Dispose`对所有一次性对象进行属性调用并向所有工作线程发出信号以完成它们的工作（并等待它们这样做）。

我一直在阅读有关这些事情的不良做法，但我很少看到任何可能出现问题的具体示例。

**问：**做以下任何或所有事情是否会出现任何问题：

1.  不调用`Dispose`任何一次性物品。（即使在进程终止后也会导致内存泄漏吗？）
2.  通过调用终止线程`Thread.Abort()`。（忽略它可能什么都不做的事实。）
3.  通过调用`Application.Exit()`或`Environment.Exit(0)`在主线程和/或工作线程尚未完成其工作时终止 WinForms 应用程序。

**编辑：**假设所述应用程序设计为完全独立运行且独立于其他应用程序，也没有任何其他应用程序直接依赖于它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:13:46.080

就泄漏或更广泛的系统问题而言，上述任何一项都不重要。

然而，通常情况下，不良模式和习惯会以其他意想不到的方式影响您……例如添加额外的代码客户端，或随着时间的推移进行其他调整。

# jquery - Jquery 动态 div 高度

> ID：10467306
> 
> 赞同：0
> 
> 时间：2012-05-06T01:11:52.430
> 
> 标签：jquery, dynamic, html

```
$('#menu-window-inner').css(
    {'height':
        ( 
            ($('#menu-window').height()) - 
            ($('#menu-window-title').height()) -
            ($('#menu-window-footer').height()) 
        )
    }
); 
```

所以我尝试使用上面的代码来设置“menu-window-inner”的高度。它在我使用方程 X=AB 时有效，但在我使用 X=ABC 时无效。基本上它只在减去一个 div 的高度时才有效，而不是两个。

有人知道正确的解决方法吗？在阅读了代码和 css 之后，这一切对我来说都是正确的，所以我被迷惑了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T01:15:41.337

你可以在这里使用 jQuery 的 outerHeight() 和 height() 函数：

```
$('#menu-window-inner').height(
    $('#menu-window').outerHeight() - 
    $('#menu-window-title').outerHeight() - 
    $('#menu-window-footer').outerHeight()
); 
```

并且您的代码不起作用，因为在使用 CSS height 属性时需要在值的末尾附加“px”。

# actionscript-3 - Flash 水平拖放问题

> ID：10467307
> 
> 赞同：0
> 
> 时间：2012-05-06T01:12:39.693
> 
> 标签：actionscript-3, flash, drag-and-drop

我正在做一个我正在做的项目的非常简单的第一步：记忆时间线。基本上，上面列出了年份的时间表。这是一条线，您应该能够将其水平移动以转到您选择的年份，然后添加事件和信息。

现在，我正在尝试实现那条线，我想它必须是无限宽的，以及拖放功能。

我有一些工作，但它被窃听了，我不知道出了什么问题。我对Flash没有那么有经验，所以我在这里问。

这是代码。舞台是空的，时间线上没有代码。仅此一个 Document 类，从 Properties 创建：

```
package {

    import flash.geom.Rectangle;
    import flash.events.MouseEvent;
    import flash.display.Sprite;

    public class Document extends Sprite {

        // rootMc, global container
        public static var rootMc:Sprite = new Sprite();
        public var test:Sprite = new Sprite();

        public function Document() {
            test.graphics.beginFill(0x000000);
            test.graphics.drawRect(0, stage.stageHeight/2, 2000, 6);
            test.graphics.endFill();

            test.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
            test.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler);

            addChild(rootMc);
            rootMc.addChild(test);
        }

        function mouseDownHandler(evt:MouseEvent):void {
            trace("mouseDownHandler");
            var sprite:Sprite = Sprite(evt.target);
            sprite.addEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler);
                    //Limit the drag to a horizontal rectangle
            sprite.startDrag(false, new Rectangle(0, sprite.y, 2000, 0));
        }

        function mouseUpHandler(evt:MouseEvent):void {
            trace("mouseUpHandler");
            var sprite:Sprite = Sprite(evt.target);
            sprite.removeEventListener(MouseEvent.MOUSE_MOVE, mouseMoveHandler);
            sprite.stopDrag();
        }

        private function mouseMoveHandler(evt:MouseEvent):void {
            trace("mouseMoveHandler");
            evt.updateAfterEvent();
        }
    }

} 
```

问题是：

1.  拖放仅在我完全单击该行时才有效。我希望上面和下面有一些空间，我也可以点击。但这条线绝对不能垂直移动，不能移动一个像素。我现在不知道如何实现这一点。
2.  与第一个问题相关：只有当我的光标在线时才会调用 mouseUpHandler。如果它偏离了一个像素并且我松开鼠标按钮，拖动将继续。然后我必须回到线路上，再次单击并放手。我想做到这一点，以便无论我在哪里放开鼠标按钮，拖动都会停止。或者当鼠标离开舞台时。

这可能只是缺乏经验。我不知道存在哪些功能来处理此功能。所以我在这里问这个问题。同时，也有机会获得有关代码的一些反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T01:35:26.897

这是我的建议，可以指出您在拖放方面遇到的问题。

问题 1：只需在黑线后面创建一个不可见的容器，以便“测试”MovieClip 变大。但只有黑线可见。您可以通过在绘制黑线之前添加以下代码来完成此操作：

```
test.graphics.beginFill(0xffffff,0); 
// white container with 0 alpha
test.graphics.drawRect(0, stage.stageHeight/2 - 10, 2000, 26); 
// start 10px before and end 10 px after
test.graphics.endFill(); 
```

问题 2：最好将 MouseEvent.MOUSE_UP 事件监听器添加到舞台，而不是添加到“测试”MovieClip。只需使用这个：

```
this.stage.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler); 
```

# c# - 仅 1.7gb 内存使用时出现内存不足错误？

> ID：10467308
> 
> 赞同：0
> 
> 时间：2012-05-06T01:12:45.610
> 
> 标签：c#, xna

我在 xna 中有一个程序，我正在加载 2gb+ 的数据（这不是问题，它的意思是）。它在任何低于 1.7gb 的情况下都可以正常工作，但一旦超过它就会抛出这个。

“内存不足，无法继续执行程序。”

或者我有其他时间

“内存不足，无法继续执行程序。”

我有 8gb 的内存，我的 GPU 有 2gb。我的系统肯定没有内存不足，因为我可以加载其他内存使用率非常高的程序，它仍然会以 1.7gb 结束。有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:05:15.980

您是否将所有数据存储在一个对象中？您可能会遇到 CLR 限制。

查看这篇文章：[CLR 对象大小限制](https://stackoverflow.com/questions/1087982/single-objects-still-limited-to-2-gb-in-size-in-clr-4-0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:18:05.663

1）它最有可能运行 32 位（您可以[运行 taskmgr 并能够分辨](http://msdn.microsoft.com/en-us/library/aa384249%28VS.85%29.aspx)）

2) 即使有足够的空闲内存来满足请求，也可能没有足够的连续空闲内存。当您开始耗尽进程的虚拟内存空间时，内存碎片成为一个问题。

有一篇好文章包含这些（和其他）问题：

[调查内存问题](http://msdn.microsoft.com/en-us/magazine/cc163528.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T15:08:40.390

请参阅蒂姆对此[答案](https://stackoverflow.com/a/200356/221933)的评论。我观察到了同样的限制。由于 Windows 上的 XNA 仅限于 32 位进程，因此加载这么多数据 (2gb) 几乎是不可能的。

# php - 如何防止 PHP 的 HTML 输出显示在浏览器中？

> ID：10467309
> 
> 赞同：6
> 
> 时间：2012-05-06T01:13:37.920
> 
> 标签：php, html, smarty

我对 PHP 很陌生，所以我怀疑这是一个愚蠢的错误。我四处寻找有类似问题的人，但找不到任何人。

所以我有一个 PHP 文件，它应该从模板中输出一些 HTML（通过[Smarty](http://www.smarty.net/)）。我没有看到在 Chrome 中呈现的 HTML，而是看到了 HTML 文本本身。这是我正在使用的 PHP 代码：

```
<?php

header("Content-type: text/html; charset=utf-8");

ob_start();
include_once '../api/get_article.php';
$a_json = ob_get_clean();
$data = json_decode($a_json, true);

require('./libs/Smarty.class.php');

$smarty = new Smarty();
$smarty->template_dir = './templates/';
$smarty->compile_dir = './templates_c';

$smarty->assign("title_text",$data['title']);

$smarty->display('content.tpl');

?> 
```

我认为这是编码的问题，但我确保*所有内容都*使用 UTF-8（即 MYSQL、HTTP 标头和模板文件）。还能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:38:37.097

Smarty 或`get_article.php`脚本必须在某个时候为您设置内容类型标题。尝试移动线路

```
header("Content-type: text/html; charset=utf-8"); 
```

一直到`display`函数的正上方，以确保它覆盖之前所做的任何更改

# c# - 您能想到.NET 中具有同步上下文的事件模式吗？

> ID：10467318
> 
> 赞同：3
> 
> 时间：2012-05-06T01:15:50.320
> 
> 标签：c#, .net, multithreading, events

主要问题是，从一个线程引发事件可以调用只能在特定线程上下文中调用的委托。[在对这个问题](https://stackoverflow.com/questions/10466022/how-to-raise-a-static-event-thread-safe-in-c/)进行了一些研究之后，我想，也许可以将某种同步上下文与每个订阅一起传递给一个事件：

```
SomeClass.SmartSyncEvent += (myDelegate, someReferenceToAThread); 
```

然后引发事件，它以某种方式做到了：

```
foreach(subscriber)
{
    someReferenceToAThread.Invoke(myDelegate);
} 
```

这是超级伪代码，但也许有人已经做过这样的事情，或者知道任何可以设置这种模式的 .NET 类。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T01:57:51.790

最好的方法是`SomeClass`通过`ISynchronizeInvoke`.

```
public class SomeClass
{
    public event EventHandler SmartSyncEvent;

    public ISynchronizeInvoke SynchronizingObject { get; set; }

    public void RaiseSmartSyncEvent()
    {
        if (SynchronizingObject != null)
        {
            SynchronizingObject.Invoke(
              (Action)(()=>
              {
                  SmartSyncEvent();
              }), null);
        }
        else
        {
            SmartSyncEvent();
        }
    }
} 
```

这种模式的实现方式类似`System.Timers.Timer`。它的问题是每个订阅者都将被编组到同一个同步对象上。不过，这似乎不是您想要的。

幸运的是，委托存储了应该通过`Target`属性调用方法的类实例。我们可以通过在调用委托之前提取它并将其用作同步对象来利用它*，*当然假设它是一个`ISynchronizeInvoke`自身。我们实际上可以通过使用自定义添加和删除事件访问器来强制执行此操作。

```
public class SomeClass
{
    private EventHandler _SmartSyncEvent;

    public event EventHandler SmartSyncEvent
    {
        add
        {
            if (!(value.Target is ISynchronizeInvoke))
            {
                throw new ArgumentException();
            }
            _SmartSyncEvent = (EventHandler)Delegate.Combine(_SmartSyncEvent, value);
        }
        remove
        {
            _SmartSyncEvent = (EventHandler)Delegate.Remove(_SmartSyncEvent, value);
        }
    }

    public void RaiseMyEvent()
    {
        foreach (EventHandler handler in _SmartSyncEvent.GetInvocationList())
        {
            var capture = handler;
            var synchronizingObject = (ISynchronizeInvoke)handler.Target;
            synchronizingObject.Invoke(
                (Action)(() =>
                {
                    capture(this, new EventArgs());
                }), null);
        }
    }
} 
```

这要好得多，因为每个订户都可以独立于其他订户进行编组。它的问题是处理程序必须是驻留在`ISynchronizeInvoke`类中的实例方法。此外，`Delegate.Target`对于静态方法为 null。这就是我使用自定义`add`访问器强制执行该约束的原因。

* * *

*`Delegate.Target`如果为 null 或无法转换为有用的同步对象，您可以使其同步执行处理程序。这个主题有很多变化。*

*在 WPF 中，您可以编写代码`DispatcherObject`而不是`ISynchronizeInvoke`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:21:36.130

请[参阅我在本主题中的回答](https://stackoverflow.com/a/10224391/52589)。我提供了我编写的 3 篇博客文章和一个 YouTube 教学视频的链接，它们都讨论了与 UI 线程安全的同步。每篇博客文章都涵盖了一种完全不同的方法来满足您的要求，因此取决于您使用哪种方法。有些比其他的更容易，但通常都是中间的。

**从链接的问题中引用的**编辑。****

 **> 你实际上有很多选择。
> 
> (1)**背景工作者。**如果您真的想要在 WinForms 中进行异步工作的最简单的编程模型，那就是这个。它通常用于执行一些异步任务并报告进度，但如果您不需要，则不必报告进度。
> 
> (2)**基于事件的异步模式。**如果您想制作一个完整的组件来执行一些异步任务，完全控制报告进度和您自己的自定义事件，那么这是一种方法。这也比 BackgroundWorker 更能帮助你理解线程。因为我是一个视觉型的人，[所以我创建了一个完整的视频演示，介绍如何使用 WinForms 做到这一点](https://stackoverflow.com/a/10224391/52589)。
> 
> (3)**任务并行库。**您可以将 TPL 与 WinForms 一起使用，我[在此处写了一篇关于如何做到这一点的非常详细的博客文章](http://danderson.io/posts/writing-thread-safe-event-handlers-with-the-task-parallel-library-in-net-4-0/)。
> 
> (4)**异步和等待**。请注意，这需要 .NET 4.5、C# 5.0 和仅包含在 Visual Studio 11 中的 C# 5.0 编译器，目前仅在 BETA 中。[但是，我也有一篇关于如何做到这一点的完整博客文章](http://danderson.io/posts/async-and-await-ui-synchronization-with-c-5-net-4-5-and-winforms/)。
> 
> (5)**带线程的ISynchronizedInvoke。**这是另一种选择，[我也有一个关于](http://danderson.io/posts/using-isynchronizeinvoke-to-update-your-ui-safely-from-another-thread/).
> 
> 这完全取决于您选择哪种方法。我的建议是简要地看一下每一个，然后根据你对主题的先进程度选择一种方法，或者哪种方法最能满足你的要求。**

# iphone - 如果应用程序关闭，如何在 iOS 中播放警报？

> ID：10467319
> 
> 赞同：6
> 
> 时间：2012-05-06T01:16:15.343
> 
> 标签：iphone, ios, audio, notifications

我从 App Store 下载了一些闹钟应用程序，发现它们能够继续播放声音，甚至让手机振动超过 30 秒（来自 UILocalNotifications 的限制）我什至强制关闭应用程序，它仍然可以工作！

我想知道这怎么可能？除了 UILocalNotification 还有其他方法吗？他们是否使用多个通知？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:23:57.633

我相信，如果您安排 UILocalNotification，操作系统会控制通知并执行它，即使安排它的应用程序关闭也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T01:31:43.837

他们可能正在使用推送通知，但这需要外部服务器、互联网，而且不太可能。

更有可能的是他们只是在使用 UILocalNotifications。当您安排一个在特定时间关闭时，即使应用程序已退出，它也会在那个时间关闭。一旦安排好所有本地通知，操作系统将引导它们。这是关于 UILocalNotification的[Apple 文档。](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

编辑：作为对您的评论的回应，安排一个本地通知，然后在 30 秒后安排第二个通知，依此类推，是合理的。对我来说，如果有 30 秒的限制，这似乎是唯一的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:48:29.813

它们可能是具有后台功能的音频应用程序（在应用程序的 plist 中使用 UIBackgroundModes）并使用音频队列或 RemoteIO 音频单元播放静音，甚至在后台，直到有时间混合一些警报声音或音乐。

# sql - 选择带别名的 SQL 查询并加入

> ID：10467321
> 
> 赞同：2
> 
> 时间：2012-05-06T01:17:07.413
> 
> 标签：sql, database, wordpress, group-by

我现在正在查询 2 天，但我不知道如何进行。

基本上我正在使用多个连接进行查询：

我的查询：

```
SELECT wp_posts.ID, wp_posts.post_title, wp_posts.post_content, wp_posts.post_type,     
wp_term_taxonomy.taxonomy, wp_terms.name
FROM wp_term_relationships, wp_term_taxonomy, wp_terms, wp_posts
WHERE wp_term_relationships.object_id =80
AND wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
AND wp_term_taxonomy.term_taxonomy_id = wp_terms.term_id
AND wp_term_relationships.object_id = wp_posts.ID 
```

这就是她展示的（在顶部），以及我想要展示的（底部）

[http://tinyurl.com/cnjmuxs](http://tinyurl.com/cnjmuxs)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:23:25.737

也许其他人有更清洁的方法来做到这一点，但以下应该有效：

```
SELECT wp_posts.ID, wp_posts.post_title, wp_posts.post_content, wp_posts.post_type, 
    MAX(
        CASE WHEN wp_term_taxonomy.taxonomy = 'reference' THEN wp_terms.name ELSE '' END 
    ) AS reference,
    MAX(
        CASE WHEN wp_term_taxonomy.taxonomy = 'chinesename' THEN wp_terms.name ELSE '' END 
    ) AS chinesename,
    MAX(
        CASE WHEN wp_term_taxonomy.taxonomy = 'price' THEN wp_terms.name ELSE '' END 
    ) AS price
FROM wp_term_relationships, wp_term_taxonomy, wp_terms, wp_posts
WHERE wp_term_relationships.object_id =80
    AND wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id
    AND wp_term_taxonomy.term_taxonomy_id = wp_terms.term_id
    AND wp_term_relationships.object_id = wp_posts.ID
GROUP BY wp_posts.ID, wp_posts.post_title, wp_posts.post_content, wp_posts.post_type 
```

# r - R中的循环-无论如何都需要使用索引来避免'for'？

> ID：10467322
> 
> 赞同：14
> 
> 时间：2012-05-06T01:17:11.893
> 
> 标签：r, loops, for-loop

我知道使用`for`循环不是 R 中的最佳实践，因为它没有增强的性能。几乎在所有情况下，家庭的功能都`*apply`可以解决我们的问题。

但是，我面临着看不到解决方法的情况。

我需要计算连续值的百分比变化：

```
pv[1] <- 0
for(i in 2:length(x)) {
  pv[i] <- (x[i] - x[i-1])/x[i-1]
} 
```

因此，如您所见，我必须同时使用`x[i]`元素，而且还要使用`x[i-1]`元素。通过使用这些`*apply`功能，我只是了解如何使用`x[i]`. 无论如何我可以避免`for`循环吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-06T01:28:01.760

您可以通过以下方式获得相同的结果：

```
pv <- c(0)
y <- sapply(2:length(x), function(i) {pv <<- (x[i] - x[i-1])/x[i-1]})
c(0, y) 
```

曾经是问题的 for 循环问题已得到优化。通常 for 循环并不慢，甚至可能比 apply 解决方案更快。您必须同时测试它们并查看。我打赌你的 for 循环比我的解决方案更快。

**编辑：为了说明 for 循环与应用解决方案以及 DWin 讨论的有关矢量化的内容，我在 win 7 机器上使用微基准对四种解决方案进行了基准测试。**

```
Unit: microseconds
             expr     min      lq  median      uq       max
1    DIFF_Vincent  22.396  25.195  27.061  29.860  2073.848
2        FOR.LOOP 132.037 137.168 139.968 144.634 56696.989
3          SAPPLY 146.033 152.099 155.365 162.363  2321.590
4 VECTORIZED_Dwin  18.196  20.063  21.463  23.328   536.075 
```

![在此处输入图像描述](../Images/d2891526940c53a23550969c89a96a60.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-06T01:28:15.180

你提供的是分数变化，但如果你乘以 100，你会得到“百分比变化”：

```
pv<- vector("numeric",length(x))
pv[1] <- 0
pv[-1] <- 100* ( x[-1] - x[-length(x)] )/ x[-length(x)] 
```

矢量化解决方案。（并且您应该注意，for 循环将与 *apply 解决方案一样慢......只是不那么漂亮。始终寻找矢量化方法。）

再解释一下：`x[-length(x)]`是向量，`x[1:(length{x-1)]`，`x[-1]`是向量，`x[2:length(x)]`和 R 中的向量操作与您的 for 循环体中的操作相同，尽管没有使用显式循环。R 首先构造这些移位向量的差异，`x[-length(x)] - x[-1]`然后除以`x[1:(length{x-1)]`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-06T01:49:05.743

您还可以使用`diff`：

```
c( 0, diff(x) / x[-length(x)] )
c( 0, exp(diff(log(x))) - 1 ) 
```

# javascript - 通过另一种方法调用javascript函数

> ID：10467324
> 
> 赞同：1
> 
> 时间：2012-05-06T01:18:16.347
> 
> 标签：javascript, javascript-events

有一个javascript函数通常通过表单标签调用，使用onsubmit。

在代码中它看起来像这样：

```
<form method="post" name="form1" id="form1" onsubmit="return validate(this)"> 
```

如果我要通过其他方法调用 validate 函数，我会传递什么变量？我的意思是，onsubmit 调用中的“this”，我会在那里放什么？它会是表单的 id，所以是“form1”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:20:49.590

`this`指标签创建的元素，即表单元素。所以你可以这样称呼它：

```
validate(document.getElementById('form1'); 
```

有关活动的更多信息，请查看[此介绍](http://www.quirksmode.org/js/introevents.html)。您使用的 onsubmit 属性是一个[内联事件处理程序](http://www.quirksmode.org/js/events_early.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:20:00.677

`this`在那个上下文中是 DOM 元素（表单）

所以你应该像这样使用它：

```
var form = document.getElementById('form1');
validate(form); 
```

# c++ - 在 C++ 中实例化私有字符串数组

> ID：10467330
> 
> 赞同：0
> 
> 时间：2012-05-06T01:19:53.477
> 
> 标签：c++, arrays, string, private

在数组存储类中声明，`private: string *names;`

```
ArrayStorage& ArrayStorage::operator=(const ArrayStorage& rhs)
{           
    // possible error
    names = new string[numOfElements];

    return *this;
}

//      copy constructor
ArrayStorage::ArrayStorage(const ArrayStorage& rhs):
                                 names(new string[numOfElements]),                                                      

                                 numOfElements(rhs.numOfElements)
{
    //names = new string[this->getNumOfElements()];

    for (int i = 0; i < this->getNumOfElements(); i++)
        names[i] = rhs.names[i];

}

ArrayStorage::~ArrayStorage(void)
{
    delete [] names;
} 
```

================================= ArrayStorage.cpp=============== ================

我的第一个问题是，如果我将名称声明为私有，那么整个事情就不起作用了。如果我将其公开，它会起作用。

`string *names`其次，您能否建议，如果我想声明为私有，我该如何使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:24:28.813

使用 RAII 感知类，例如`std::vector<std::string>`并删除赋值运算符。

此外，您可能想阅读三定律（如果您有析构函数、复制赋值运算符、复制构造函数中的任何一个；那么您应该拥有所有这些）。

（编辑：修正法律名称）

# knockout.js - 当我在一个页面上使用两个模型时，Knockout.js 无法绑定

> ID：10467337
> 
> 赞同：4
> 
> 时间：2012-05-06T01:20:45.503
> 
> 标签：knockout.js

我有两个模型：ServiceViewModel 和 ReservationsViewModel；两者都基于 learn.knockoutjs.com 上的教程。

我遇到的问题是，当我的网页加载时，只绑定了 ServiceViewModel。绑定到 ReservationViewModel 的控件什么也不显示！我是 knockout.js 的新手，并且一直在寻找解决方案，但无济于事。

当我删除与 ServiceViewModel 的绑定时，绑定到 ReservationsViewModel 的控件会正确绑定（即显示数据），所以不确定这里发生了什么。在我看来，knockout.js 不允许在页面上出现更多的视图模型，但这很愚蠢，而且我认为这不是问题所在！

这是我的小提琴的链接：http: [//jsfiddle.net/zsg6b/](http://jsfiddle.net/zsg6b/) 你会看到即使在 JSFiddle 中绑定也不起作用。

当我在 Visual Studio Internet Explorer 和 Google Chrome 中运行该项目时，我收到以下相同的错误：

> 运行时错误：无法解析绑定。消息：ReferenceError：“座位”未定义；绑定值：foreach：席位

我做错了什么？请检查我的[jsfiddle](http://jsfiddle.net/zsg6b/)。

PS：这是我的第一篇stackoverflow帖子，所以请温柔！:)

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T06:15:32.563

当页面上有多个视图模型时，您需要在 applyBindings 调用中指定每个视图模型适用于页面的哪一部分。

我已经通过将服务和预订部分包装到单独的容器中来修复您的小提琴，然后在 applyBindings 调用中指定它们：http: [//jsfiddle.net/zsg6b/1/](http://jsfiddle.net/zsg6b/1/)

# c# - 是否可以在不离开或重新加载页面的情况下使用 C# asp.net 替换浏览器的 URL？

> ID：10467339
> 
> 赞同：1
> 
> 时间：2012-05-06T01:20:55.427
> 
> 标签：c#, asp.net

我想在页面加载之前访问浏览器的 url 并替换它。

我只是不希望用户能够看到他/她登陆的页面。

我虽然在 Page_Init 中访问 url，但我不知道如何。

有什么想法或更好的解决方案吗？

已编辑：我不需要更改（或删除）URL 中的服务器名称，只需更改文件夹/文件名。因此，如果原始页面位置的形式为：`http://www.server.com/folder/file.aspx`我想将其更改为`http://www.server.com/misc/GeneralPage.aspx`或`http://www.server.com/`

Response.Redirect 不行。我想留在同一页面，但要更改 URL。

Server.Transfer 是带有帮助程序预登陆文件的默认解决方案，但对我来说还不够好。我想留在同一页面，但要更改显示的 URL。

* * *

解决方案：

**这里有一个涉及 HTML5 的答案和另一个解决方案方向，我打算很快进行调查，但它不再在这里（消失了）。如果这是你的答案，请再写一次。这是一个重要的。**

我在这里给出了作为我的行动决定的最佳选择（目前，直到我找到更好的解决方案），但我不相信它（我没有将其标记为答案）。这是一个经过详细测试的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:28:23.367

由于浏览器安全功能，这是不可能的。如果浏览器允许程序员显示与用户实际访问的 URL 不同的 URL，那么将会有更多的人在不知不觉中将其敏感的银行信息交给第三方。

URL 应该标识浏览器请求并由服务器返回的特定资源。

话虽如此，您可以在域管理级别使用域屏蔽技巧。GoDaddy 使用的一种技术是使用掩码转发您的域，这实际上将您的网站加载到 iframe 中，以便原始 URL 保留在原始域中，而新内容在 iframe 中提供。

你也可以自己使用这种技术。当您将内容返回给浏览器时，返回一个 iframe，其 src 属性指向新内容。

尽管如此，就修改显示的实际 URL 而言，这是不可能的，而且我不确定您为什么真的想要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:34:34.160

出于安全原因，您不能更改整个 URL 以阻止 URL 欺骗和网络钓鱼攻击。

但是，您可以更改井号 (#) 符号之后的 URL 的任何部分。这部分 URL 仅在客户端 javascript 中可用，可用于存储当前页面的状态信息而无需重新加载。它是`windows.location.hash`财产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:07:22.630

我在这里给出我的行动决定（暂时的）。一旦我决定一个更好的解决方案，我会在此处发布。

虽然这是我希望避免的解决方案，但它看起来是目前最好的解决方案。

阅读所有答案和评论后，我决定的解决方案是有一个空的登陆页面并使用 Server.Transfer 到隐藏文件。我将 Server.Transfer 放在 Page_Init 中。

提货页`Lading.aspx`仅包含一行：

```
<%@ CodeFile="Landing.aspx.cs" Inherits="Landing" %> 
```

它背后的代码`Landing.aspx.cs`包含：

```
using System;
public partial class Landing : System.Web.UI.Page
{protected void Page_Init(){Server.Transfer("~/Landing_Hidden.aspx");}} 
```

隐藏页面`Landing_Hidden.aspx`是一个常规的 aspx 页面。

非常感谢大家的回答和评论。

我发现在此处提到的网络钓鱼视图中，除了更改 URL 之外，使用上述解决方案没有任何区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-10T07:13:25.730

var stateObj = { foo: "bar" }; history.pushState(stateObj, "第 2 页", "bar.html");

您可以通过创建 java-script 函数并在按钮的 clientclick 事件上调用它来使用此代码

代替 bar.html 只需更改为您的任何网址，例如 index.html ，当您单击按钮时，您的输出将如下所示，即 www.dotnetprofessional.in/bar.html 或 www.dotnetprofessional.in/index.html没有页面回发或刷新

[参考](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)

# mysql - 通过自动完成、类似 MySQL 或全文搜索搜索 15k 地址行？

> ID：10467347
> 
> 赞同：3
> 
> 时间：2012-05-06T01:22:45.213
> 
> 标签：mysql, query-optimization, jquery-autocomplete

我有一个包含 15k 行的澳大利亚邮政编码和地址的 db 表，每行如下所示：

```
pcode   |   suburb      |   state
2048    |   Westgate    |   NSW
2066    |   Belina      |   NSW 
```

使用 jQuery 自动完成触发了一个输入字段，我拆分了用户输入并构建了一个 LIKE 查询，在郊区和邮政编码字段上进行搜索。

这可以解决问题：

```
SELECT address_id as id, CONCAT(suburb,' ',postcode) as value FROM address WHERE address_id != ''"; 

foreach ($keywords as $keyword)
{
      $query .= " AND (postcode like '".$keyword."%' OR suburb like '%".$keyword."%')";
} 
```

我目前在任何列上都没有索引（除了主键）。我会更好地使用某种全文索引并更改搜索吗？或者考虑到数据量（不是很大），我正在做的事情是否足够有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:29:28.397

使用索引的时候是不能用的`LIKE '%something%'`，所以如果你需要能在字符串中间搜索，根本不用索引

> 这就是 MATCH 命令允许前缀通配符但不允许后缀通配符的原因。由于单个词被索引，后缀通配符不可能像索引那样管理。您不能立即从索引中检索 '*nited states'，因为左字符是索引中最重要的部分。

[来源](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#c8632)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:44:33.060

最有效的索引类型是数字列索引。正如其他人所建议的，15k 并不是一个大的记录集，但就用户体验而言，当您键入单个字符时，可能会有大量记录，从而使其成为可用性的噩梦。

建议 - 在你的 sql 中使用一个 LIMIT 子句，这样你就可以将你的结果集限制在一个可管理的大小。让我们说一次 15 条记录。

# c - 为什么这会通过 if 语句？

> ID：10467348
> 
> 赞同：-1
> 
> 时间：2012-05-06T01:23:00.613
> 
> 标签：c, pointers, segmentation-fault, structure

您好，有人可以帮我找出导致问题的原因吗？出于某种原因， find_hash 函数给我带来了问题。它应该失败`if(table -> buckets_array[i] != NULL){`，`if(table -> buckets_array[i] != '\0'){`但事实并非如此，它会进行下一次检查，这给了我一个分段错误。自从我最初将它设置为 table -> buckets_array[i] = NULL 以来，是什么导致前 2 个 if 语句通过？

编辑：感谢`wildplasser`我为我的 find_hash 函数提出了一个更好的解决方案。

```
if(table->buckets_array[table->hash_func(key)] == NULL){
    return NULL;
  }else{
    return table -> buckets_array[table->hash_func(key)] -> data;
  } 
```

谢谢大家的帮助。

```
/*hash.h*/
#include<stdio.h>
#include<stdlib.h>

typedef struct data_{
  char *key;
  void *data;
  struct data_ *next;
}data_el;

typedef struct hash_table_ {
  void **order;
  int *number_next_calls;
  int *number_buckets;
  int *buckets_size;
  int *worst;
  int *total;
  float *average;
  int (*hash_func)(char *);
  int (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table;

Phash_table new_hash(int size, int (*hash_func)(char *), int (*cmp_func)(void *, void *));
void free_hash(Phash_table table);
void insert_hash(Phash_table table, char *key, void *data);
void *find_hash(Phash_table table, char *key);
void stat_hash(Phash_table table, int *total, int *largest, float *average);
void *start_hash_walk(Phash_table table);
void *next_hash_walk(Phash_table table);

static void lower_case_word(char *w);

/*hash.c*/
#include"hash.h"

Phash_table new_hash(int size, int (*hash_func)(char *), int (*cmp_func)(void *, void *)){
  int i;

  Phash_table table_p;
  hash_table hash_table;

  table_p = (Phash_table)malloc(sizeof(hash_table));

  /*Setting function pointers*/
  table_p->hash_func = hash_func;
  table_p->comp_func = cmp_func;

  /*Create buckets array*/
  table_p->buckets_array = (data_el **)malloc(sizeof(data_el *)*(size+1));
  table_p->buckets_size = (int *)malloc(sizeof(int)*(size+1));

  /*Setting order array*/
  table_p->order = NULL;

  /*Setting inital condictions*/
  table_p->worst = (int *)malloc(sizeof(int));
  table_p->total = (int *)malloc(sizeof(int));
  table_p->average = (float *)malloc(sizeof(float));
  table_p->number_buckets = (int *)malloc(sizeof(int));

  *(table_p->number_buckets) = size;

  for(i = 0; i < size; i++){
    table_p->buckets_array[i] = NULL;
  }
  return table_p;
}

void free_hash(Phash_table table){

  int i;
  i = 0;
  data_el *cur;
  data_el *prev;

  /*Free order array*/
  if(table->order != NULL){
    free(table->order);
  }

  /*Free Buckets array and buckets_size array*/
  if(table ->buckets_array != NULL){
    for(i=0; i < *(table->number_buckets); i++){
      if(table->buckets_array[i] != NULL){

    /*Travers the linked list and free it*/
    cur = table->buckets_array[i];
    prev = cur;

    while((cur = cur->next) != NULL){
      free(prev);
      prev = cur;
    }
    /*Free the last node*/
    free(cur);
    }
    }
  }
  free(table);
}

void insert_hash(Phash_table table, char *key, void *data){
  int index;
  data_el *p, *cur;

  index = table->hash_func(key);

  /*Head insertion*/
  if(table->buckets_array[index] == NULL){
    table->buckets_array[index] = (data_el *)malloc(sizeof(data_el));
    table->buckets_array[index]->data = data;
    table->buckets_array[index]->next =  NULL;
    table->buckets_array[index]->key = key;
  }else{
    cur = table->buckets_array[index];
    p = (data_el *)malloc(sizeof(data_el));
    p->key = key;
    p->data = data;
    p->next = cur;
    cur = p;
    table->buckets_array[index] = cur;
  }

  /*Update Total*/
  *table->total += 1;

  /*Update Bucket Size*/
  (table->buckets_size[index]) +=1;

  /*Updates Worst Case*/
  if((table->buckets_size[index]) > *(table->worst)){
    *(table->worst) = (table->buckets_size[index]);
  }else{
    *(table->worst) +=1;
  }

  /*Update Average*/
  int temp_total,temp_buckets;

  temp_total = *(table->total);
  temp_buckets = *(table->number_buckets);
  *(table->average)= (float)temp_total/(float)temp_buckets;
}

void *find_hash(Phash_table table, char *key){
  int i;
  i = 0;

  while(1){
    if(table->buckets_array[i] == '\0'){
      printf("End of Array");
      break;
    }
    if(table->buckets_array[i] != NULL){
      printf("%Checking");
      if(table->buckets_array[i] != '\0'){
    if(table->buckets_array[i]->key != NULL){
      if( strcmp(table->buckets_array[i]->key,key) == 0 ){
        printf("Found it\n");
        break;
      }
    }
      }
    }
    i++;
  }

  if(table->buckets_array[i] != NULL){
    printf("new asdasd %d", *((int *)table->buckets_array[i]->data));
    return table->buckets_array[i]->data;
  }else{
    return NULL;
  }
}

void stat_hash(Phash_table table, int *total, int *largest, float *average){
  total =  (table->total);
  largest = (table->worst);
  average =  (table->average);
}

void *start_hash_walk(Phash_table table){
  int i, max_buckets,step,next_calls;
  step = 0;
  data_el *cur;
  next_calls = 0;

  max_buckets = *(table ->number_buckets);
  table->order = (void**)malloc(sizeof(void *)*(*(table->total)));

  /*Set number_next_calls to 0*/
  table->number_next_calls = &next_calls;
  *(table->number_next_calls) = 0;

  /*Traverse the ADT and put all data into order array*/
  for(i = 0; i < max_buckets; i++){
    if(table->buckets_array[i] != NULL){
      cur = table->buckets_array[i];
      while(cur){
    table->order[step] = cur->data;
    step ++;
    cur = cur->next;
      }
    }
  }

  /*Bubble Short*/
  int j,k;

  for(j = 0; j < (step - 1);j++){
    for(k = 0;k < (step -(j+1));k ++){
      if((table->comp_func)(table->order[j],table->order[j+1]) < 5){
    void *temp;

    temp = table->order[j];
    table->order[j] = table->order[j+1];
    table->order[j+1] =  temp;
    printf("Swaping %s with %s\n",table->order[j],table->order[j+1]);
      }
    }
  }
  return table->order;
}

void *next_hash_walk(Phash_table table){

  /*
    Check the amount of times next_has_walk has been
    if higher than total, it will return null
  */

  if(*(table->number_next_calls) >= *(table->total)){
    return NULL;
  }else{
    *(table->number_next_calls) = *(table->number_next_calls) + 1;
    return table->order[*(table->number_next_calls)];
  }
}

/*project4.c*/

#include"hash.h"

#define WORD_SIZE 40
#define DICTIONARY_SIZE 1000
#define TRUE 1
#define FALSE 0

int hash_function(char *word){

  int sum,i;
  i = 0;
  sum = 0;
  while(word[i] != '\0'){
    sum = sum + word[i];
    i++;
  }
  return sum%1000;
}

int main(void){

  /*Creating buckets array*/
  Phash_table dictionary;
  void *test;

  dictionary = new_hash(DICTIONARY_SIZE,hash_function,comp);

  int i;
  i = 0;
  void *frequency[DICTIONARY_SIZE];
  int char_index = 0, dictionary_size = 0, num_words = 0;
  char c, word[WORD_SIZE];

  printf("Parsing input ...\n");

  while ((c = getchar()) != EOF) {
    if ((c == ' ') || (c == ',') || (c == '.') || (c == '!') || (c == '"') ||
    (c == ':') || (c == '\n')) {

      /* End of a word */
      if (char_index) {
    /* Word is not empty */
    word[char_index] = '\0';
    lower_case_word(word);
    if(!find_hash(dictionary,word) ){
      insert_hash(dictionary,word,frequency[hash_function(word)]);
    }
    frequency[hash_function(word)]++;
    char_index = 0;
    num_words++;
      }
    }else{
      word[char_index++] = c;
    }
  }

  printf("There were %d words; %d unique words.\n", num_words,dictionary_size);
}

void lower_case_word(char *w){
  int i = 0;

  while (w[i] != '\0') {
    w[i] = tolower(w[i]);
    i++;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:24:24.677

您的`find_hash()`函数不返回值。

您省略了一些功能：

```
Phash_table new_hash(int size, int (*hash)(char *), int (*comp)(void *, void *));
void lower_case_word(char *word);
int hash_function(char *);
int comp_function(void *, void *); 
```

您没有指定 DICTIONARY_SIZE 或 WORD_SIZE。

你还没有`c`在`main()`.

您尚未定义`int main(void)`（或`int main(int argc, char **argv)`）。返回类型是`int`，它需要 0 或 2 个参数。

您既没有定义也没有初始化`char_index`. 你没有定义`word`。您没有定义或初始化`num_words`.

通常，您应该向 SO 提交可编译的代码。缺少的功能和标准标题是一回事。如果您省略它们的定义，这是合法的（但有点麻烦）。

您可能需要考虑比较函数是否应该采用`void const *`（或`const void *`）参数而不仅仅是`void *`; 它将使其更普遍可用，例如与`qsort()`or一起使用`bsearch()`。

我不清楚哈希函数是否会受益于 a`void *`而不是 a `char *`; 它可能应该是一个`char const *`或`void const *`而不是一个不合格的指针。

从风格上讲，不要在其中一个`->`或`.`运算符周围放置空格。它们比其他任何东西都更紧密。通常，在二元运算符周围放置空格，例如`/`. 通常，在逗号后放置空格（但要更加一致）。

* * *

### 哈希.h

不要（通常——这是一种常见的情况）在头文件中声明静态函数。一个静态函数只需要一个文件；把它放在标题中是没有意义的。标头用于在源文件之间共享信息。如果某些东西不会被其他文件使用，那么声明它是没有意义的。

保护标头不被重新包含：

```
#ifndef HASH_H_INCLUDED
#define HASH_H_INCLUDED

...rest of header here...

#endif /* HASH_H_INCLUDED */ 
```

不要在标题中包含任何不需要使用标题的内容。“hash.h”中的任何材料都不需要，`<stdlib.h>`因此`<stdio.h>`它可能不应该存在。

`#include`C 标准在和标题名称之间使用空格；对他们来说足够好的东西应该对你来说足够好。

### 项目4.c

您没有对编译器警告给予足够的关注，或者没有设置足够的编译器警告。如果您使用的是 GCC，请`-Wall`至少编译。当我在测试编译时，我使用了，例如：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -c project4.c 
```

我希望我的代码能够在这组选项下干净地编译。

您需要`#include <ctype.h>`声明`tolower()`.

函数`comp()`没有在任何地方定义。我补充说：

```
static int comp(void *v1, void *v2)
{
    char const *s1 = v1; 
    char const *s2 = v2; 
    return strcmp(s1, s2);
} 
```

我还放`static`前面`hash_function()`以避免需要外部定义。

有一次编译时，我收到了警告：

```
project4.c:51: warning: comparison is always false due to limited range of data type 
```

这说明了一个问题。您声明`c`为`char`，但随后写道：

```
while ((c = getchar()) != EOF) 
```

这是一个禁忌。该函数`getchar()`返回一个`int`（是的，名字不好）。它可以返回的值集包括每个字符*加上*一个不同的值 EOF。您必须使用 an`int`来获得可靠的行为。出现两个问题之一。要么你永远不会得到 EOF，因为赋值是一个（隐式）无符号类型，并且 -1 被映射到 0xFF，当 0xFF 提升为 an`int`时，它是正数，因此不等于 -1；或者您将有效字符（通常是 U+00FF、ÿ、带有分音符号的小拉丁字母 Y，俗称 y-变音符号）误解为 EOF。

您应该考虑使用类似的东西`!isalnum()`而不是条件：

```
 if ((c == ' ') || (c == ',') || (c == '.') || (c == '!') || (c == '"') ||
     (c == ':') || (c == '\n')) 
```

### 哈希.c

代码省略`#include <string.h>`。

编译器说：

```
hash.c: In function ‘find_hash’:
hash.c:142: warning: too few arguments for format
hash.c: In function ‘start_hash_walk’:
hash.c:219: warning: format ‘%s’ expects type ‘char *’, but argument 2 has type ‘void *’
hash.c:219: warning: format ‘%s’ expects type ‘char *’, but argument 3 has type ‘void *’ 
```

行号应该用少许盐处理；我使用 Allman 样式布局，因此在格式化代码时添加了许多行。但是如果你的编译器没有给你这种建议，你应该寻找一个可以提供的编译器。

第 142 行包含：

```
printf("%Checking"); 
```

`%`是不需要的。但是，在打印换行符之前，您可能永远看不到输出，或者您使用它`fflush(stdout);`来强制输出数据。

```
printf("Checking\n"); 
```

作为一般规则，尤其是在调试期间，以换行符结束打印的消息。

第 219 行是：

```
 printf("Swaping %s with %s\n",table->order[j],table->order[j+1]); 
```

它可能应该是：

```
 printf("Swapping %s with %s\n", (char *)table->order[j], (char *)table->order[j+1]); 
```

因为`order`是一个`void **`。当然，你可能会更好`char **`。

* * *

### 运营

修复了这些（次要）问题后，代码将编译并链接。在某些文本上运行时，输出如下所示：

```
Parsing input ...
End of ArrayEnd of ArrayEnd of ArrayEnd of ArrayEnd of ArrayEnd of Array 
```

输出换行符！可能还值得打印出您刚刚处理的字符串，以及您是否添加了它或已经在数据中找到了它。

中的一个问题：您在使用数组之前`main()`没有对其进行初始化。`frequency`此外，数组存在的原因并不完全清楚。为什么频率信息没有正确保存在哈希表中？为什么频率信息是一个数组`void *`而不是，比如说，`int`？

在一组样本数据上，程序将输入总结为：

```
There were 68 words; 0 unique words. 
```

唯一词的数量最初令人担忧，但事实证明，您初始化`dictionary_size`为 0 并且从不更改它然后打印它，因此大部分输出是正确的。

* * *

我认为您需要为自己编写一个结构转储程序。这是一个函数，当给定一个（指向）结构的指针时，它会打印有关结构中数据的合理诊断信息。我使用一般形式：

```
void dump_xyzstructure(FILE *fp, char const *tag, xyzstructure const *data); 
```

然后我可以写：

```
dump_xyzstructure(stdout, "After initialization", &xyz);

dump_xyzstructure(logfp, "At this point", &xyz); 
```

等等。

* * *

您的哈希表非常复杂。但是，您在哈希表之外有调用哈希函数的代码，我不确定这是一个好主意。大多数情况下，它不应该需要。由于您的哈希表需要支持频率计数，因此哈希表应该为您记录频率；你不应该在主程序的辅助代码中这样做。

您可以通过简化结构来简化生活。您不必动态分配结构中的所有内容。特别是在 64 位机器上，这是对空间的巨大浪费。（好吧：这是对空间的微不足道的浪费，但也很浪费精力。）

```
 /*Setting inital condictions*/
 table_p->worst = (int *)malloc(sizeof(int));
 table_p->total = (int *)malloc(sizeof(int));
 table_p->average = (float *)malloc(sizeof(float));
 table_p->number_buckets = (int *)malloc(sizeof(int)); 
```

没有这些指针的数据结构会更紧凑，只使用结构中的一个元素。它也将简化释放代码（并且它简化了打印代码，因为它不必担心指针是否已被分配）：

```
typedef struct hash_table
{
  void    **order;
  int       number_next_calls;
  int       number_buckets;
  int      *buckets_size;        // Number of entries in each bucket
  int       worst;
  int       total;
  float     average;
  int     (*hash_func)(char *); 
  int     (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table; 
```

可以按需计算平均值；它并不保证在结构中占有一席之地，真的。丢失所有这些指针会大大简化代码。

例如，这个片段：

```
if (*(table->number_next_calls) >= *(table->total))
{
    return NULL;
}
else
{
    *(table->number_next_calls) = *(table->number_next_calls) + 1;
    return table->order[*(table->number_next_calls)];
} 
```

变成：

```
if (table->number_next_calls >= table->total)
{
    return NULL;
}
else
{
    table->number_next_calls = table->number_next_calls + 1;
    return table->order[table->number_next_calls];
} 
```

甚至：

```
if (table->number_next_calls >= table->total)
    return NULL;
else
    return table->order[++table->number_next_calls]; 
```

* * *

## 示例文本

这是我在 SO 评论中经常使用的东西：

> 欢迎来到 StackOverflow。请注意，在这里说“谢谢”的首选方式是投票赞成好的问题和有用的答案（一旦你有足够的声誉这样做），并接受对你提出的任何问题最有帮助的答案（这也给出了你的声誉小幅提升）。请参阅`[FAQ](http://stackoverflow.com/faq)`特别是`[How do I ask questions here?](http://stackoverflow.com/faq#howtoask)`

## 样本输出

显示的大部分数据来自`dump_hash_table()`函数；我需要看看什么有效，什么无效。它的大部分实际上都在工作——我不需要修复大部分算法（最坏情况的计算是错误的并且是固定的）。在解析输入时，我忽略了跟踪代码。

```
Hash Table: 0x10E700900 At end of input
 Order = 0x00000000
 Buckets = 0x7FD9A3800000
 Hash = 0x10E607A40
 Comp = 0x10E607AA0
 Next calls: 0
 Buckets: 1000
 Worst: 4
 Total: 74
 Average: 0.074000
   Bucket   3: 2
   Bucket  67: 1
   Bucket  97: 1
   Bucket  99: 2
   Bucket 105: 1
   Bucket 211: 2
   Bucket 213: 1
   Bucket 219: 2
   Bucket 220: 1
   Bucket 226: 1
   Bucket 227: 4
   Bucket 229: 1
   Bucket 307: 3
   Bucket 312: 3
   Bucket 317: 1
   Bucket 319: 4
   Bucket 321: 3
   Bucket 328: 1
   Bucket 334: 1
   Bucket 337: 1
   Bucket 349: 3
   Bucket 418: 3
   Bucket 420: 3
   Bucket 421: 1
   Bucket 425: 1
   Bucket 431: 1
   Bucket 433: 1
   Bucket 438: 1
   Bucket 448: 2
   Bucket 451: 1
   Bucket 463: 1
   Bucket 531: 1
   Bucket 537: 1
   Bucket 542: 1
   Bucket 551: 1
   Bucket 634: 2
   Bucket 646: 1
   Bucket 649: 2
   Bucket 651: 1
   Bucket 656: 1
   Bucket 663: 1
   Bucket 748: 1
   Bucket 752: 2
   Bucket 771: 1
   Bucket 880: 1
   Bucket 888: 1
   Bucket 942: 1
   Bucket 959: 1
 Unique words: 74
 Used Buckets: 48
There were 74 words; 0 unique words. 
```

## 哈希.h

注意`hash.h`现在必须包含`<stdio.h>`才能声明`dump_hash_table()`。包括`<stdlib.h>`不是必需的。

```
/*hash.h*/

#ifndef HASH_H_INCLUDED
#define HASH_H_INCLUDED

#include <stdio.h>
#include <stdlib.h>

typedef struct data
{
  char *key;
  void *data;
  struct data *next;
} data_el;

typedef struct hash_table
{
  void    **order;
  int       number_next_calls;
  int       number_buckets;
  int      *buckets_size;       // Array of sizes of each bucket
  int       worst;
  int       total;
  float     average;
  int     (*hash_func)(char *);
  int     (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table;

Phash_table new_hash(int size, int (*hash_func)(char *), int (*cmp_func)(void *, void *));
void free_hash(Phash_table table);
void insert_hash(Phash_table table, char *key, void *data);
void *find_hash(Phash_table table, char *key);
void stat_hash(Phash_table table, int *total, int *largest, float *average);
void *start_hash_walk(Phash_table table);
void *next_hash_walk(Phash_table table);

void dump_hash_table(FILE *fp, char const *tag, hash_table const *table);

#endif /* HASH_H_INCLUDED */ 
```

## 哈希.c

```
/*hash.c*/
#include "hash.h"
#include <string.h>
#include <inttypes.h>

Phash_table new_hash(int size, int (*hash_func)(char *), int (*cmp_func)(void *, void *))
{
    int i;

    Phash_table table_p;
    hash_table hash_table;

    table_p = (Phash_table)malloc(sizeof(hash_table));

    /*Setting function pointers*/
    table_p->hash_func = hash_func;
    table_p->comp_func = cmp_func;

    /*Create buckets array*/
    table_p->buckets_array = (data_el **)malloc(sizeof(data_el *)*(size+1));
    table_p->buckets_size = (int *)malloc(sizeof(int)*(size+1));

    /*Setting order array*/
    table_p->order = NULL;

    /*Setting inital conditions*/
    table_p->worst = 0;
    table_p->total = 0;
    table_p->average = 0.0;
    table_p->number_buckets = size;

    for (i = 0; i < size; i++)
    {
        table_p->buckets_array[i] = NULL;
    }
    return table_p;
}

void free_hash(Phash_table table)
{
    int i;
    i = 0;
    data_el *cur;
    data_el *prev;

    /*Free order array*/
    if (table->order != NULL)
    {
        free(table->order);
    }

    /*Free Buckets array and buckets_size array*/
    if (table->buckets_array != NULL)
    {
        for (i = 0; i < table->number_buckets; i++)
        {
            if (table->buckets_array[i] != NULL)
            {

                /*Travers the linked list and free it*/
                cur = table->buckets_array[i];
                prev = cur;

                while ((cur = cur->next) != NULL)
                {
                    free(prev);
                    prev = cur;
                }
                /*Free the last node*/
                free(cur);
            }
        }
    }
    free(table);
}

void insert_hash(Phash_table table, char *key, void *data)
{
    int index;
    data_el *p, *cur;

    printf("Inserting: <<%s>> (data: %d)\n", key, *(int *)data);

    index = table->hash_func(key);

    /*Head insertion*/
    if (table->buckets_array[index] == NULL)
    {
        table->buckets_array[index] = (data_el *)malloc(sizeof(data_el));
        table->buckets_array[index]->data = data;
        table->buckets_array[index]->next =  NULL;
        table->buckets_array[index]->key = key;
    }
    else
    {
        cur = table->buckets_array[index];
        p = (data_el *)malloc(sizeof(data_el));
        p->key = key;
        p->data = data;
        p->next = cur;
        cur = p;
        table->buckets_array[index] = cur;
    }

    /*Update Total*/
    table->total += 1;

    /*Update Bucket Size*/
    table->buckets_size[index] +=1;

    /*Updates Worst Case*/
    if (table->buckets_size[index] > table->worst)
    {
        table->worst = table->buckets_size[index];
    }

    /*Update Average*/
    table->average = (float)table->total / (float)table->number_buckets;
}

void *find_hash(Phash_table table, char *key)
{
    int i = 0;

    while (1)
    {
        if (table->buckets_array[i] == '\0')
        {
            printf("End of Array\n");
            break;
        }
        if (table->buckets_array[i] != NULL)
        {
            printf("Checking:\n");
            if (table->buckets_array[i] != '\0')
            {
                if (table->buckets_array[i]->key != NULL)
                {
                    if (strcmp(table->buckets_array[i]->key, key) == 0 )
                    {
                        printf("Found it\n");
                        break;
                    }
                }
            }
        }
        i++;
    }

    if (table->buckets_array[i] != NULL)
    {
        printf("New entry %d\n", *((int *)table->buckets_array[i]->data));
        return table->buckets_array[i]->data;
    }
    else
    {
        return NULL;
    }
}

void stat_hash(Phash_table table, int *total, int *largest, float *average)
{
    *total   = table->total;
    *largest = table->worst;
    *average = table->average;
}

void *start_hash_walk(Phash_table table)
{
    int i, max_buckets, step, next_calls;
    step = 0;
    data_el *cur;
    next_calls = 0;

    max_buckets = table ->number_buckets;
    table->order = (void**)malloc(sizeof(void *) * table->total);
    table->number_next_calls = 0;

    /*Traverse the ADT and put all data into order array*/
    for (i = 0; i < max_buckets; i++)
    {
        if (table->buckets_array[i] != NULL)
        {
            cur = table->buckets_array[i];
            while (cur)
            {
                table->order[step] = cur->data;
                step ++;
                cur = cur->next;
            }
        }
    }

    /*Bubble Short*/
    int j, k;

    for (j = 0; j < (step - 1);j++)
    {
        for (k = 0;k < (step -(j+1));k ++)
        {
            if ((table->comp_func)(table->order[j], table->order[j+1]) < 5)
            {
                void *temp;

                temp = table->order[j];
                table->order[j] = table->order[j+1];
                table->order[j+1] =  temp;
                printf("Swapping %s with %s\n", (char *)table->order[j], (char *)table->order[j+1]);
            }
        }
    }
    return table->order;
}

void *next_hash_walk(Phash_table table)
{
    /*
       Check the amount of times next_has_walk has been
       if higher than total, it will return null
     */

    if (table->number_next_calls >= table->total)
        return NULL;
    else
        return table->order[++table->number_next_calls];
}

void dump_hash_table(FILE *fp, char const *tag, hash_table const *table)
{
    fprintf(fp, "Hash Table: 0x%.8" PRIXPTR " %s\n", (uintptr_t)table, tag);
    if (table == 0)
        return;
    fprintf(fp, " Order = 0x%.8" PRIXPTR "\n", (uintptr_t)table->order);
    fprintf(fp, " Buckets = 0x%.8" PRIXPTR "\n", (uintptr_t)table->buckets_array);
    fprintf(fp, " Hash = 0x%.8" PRIXPTR "\n", (uintptr_t)table->hash_func);
    fprintf(fp, " Comp = 0x%.8" PRIXPTR "\n", (uintptr_t)table->comp_func);
    fprintf(fp, " Next calls: %d\n", table->number_next_calls);
    fprintf(fp, " Buckets: %d\n",    table->number_buckets);
    fprintf(fp, " Worst: %d\n",      table->worst);
    fprintf(fp, " Total: %d\n",      table->total);
    fprintf(fp, " Average: %f\n",    table->average);
    if (table->buckets_size != 0)
    {
        int unique_words = 0;
        int used_buckets = 0;
        for (int i = 0; i < table->number_buckets; i++)
        {
            unique_words += table->buckets_size[i];
            if (table->buckets_size[i] != 0)
            {
                used_buckets++;
                fprintf(fp, "   Bucket %3d: %d\n", i, table->buckets_size[i]);
            }
        }
        fprintf(fp, " Unique words: %d\n", unique_words);
        fprintf(fp, " Used Buckets: %d\n", used_buckets);
    }
} 
```

## 项目4.c

```
/*project4.c*/

#include "hash.h"
#include <string.h>
#include <ctype.h>

#define WORD_SIZE 40
#define DICTIONARY_SIZE 1000
#define TRUE 1
#define FALSE 0

static void lower_case_word(char *w);

static int hash_function(char *word)
{
    int sum, i;
    i = 0;
    sum = 0;
    while (word[i] != '\0')
    {
        sum = sum + word[i];
        i++;
    }
    return sum%1000;
}

static int comp(void *v1, void *v2)
{
    char const *s1 = v1;
    char const *s2 = v2;
    return strcmp(s1, s2);
}

int main(void)
{
    /*Creating buckets array*/
    Phash_table dictionary = new_hash(DICTIONARY_SIZE, hash_function, comp);
    int frequency[DICTIONARY_SIZE] = { 0 };
    int char_index = 0, dictionary_size = 0, num_words = 0;
    char word[WORD_SIZE];
    int c;

    printf("Parsing input ...\n");

    while ((c = getchar()) != EOF) 
    {
        if (isalnum(c))
            word[char_index++] = c;
        else
        {
            /* End of a word */
            if (char_index)
            {
                /* Word is not empty */
                word[char_index] = '\0';
                lower_case_word(word);
                printf("Got: %s\n", word);
                if (!find_hash(dictionary, word))
                {
                    insert_hash(dictionary, word, &frequency[hash_function(word)]);
                }
                frequency[hash_function(word)]++;
                char_index = 0;
                num_words++;
            }
        }
    }

    dump_hash_table(stdout, "At end of input", dictionary);

    printf("There were %d words; %d unique words.\n", num_words, dictionary_size);
}

static void lower_case_word(char *w)
{
    int i = 0;

    while (w[i] != '\0')
    {
        w[i] = tolower(w[i]);
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:19:11.620

这太复杂了。我会在代码中评论。

```
void *find_hash(Phash_table table, char *key){
  int i;
  i = 0;

  while(1){ 
```

for() 循环的好地方。

```
 if(table->buckets_array[i] == '\0'){ 
```

->buckets_array[] 是指向指向 data_el 的指针数组的指针 '\0' 是一个 int（字符常量在 C 中是一个 int）

```
 printf("End of Array");
      break;
    }
    if(table->buckets_array[i] != NULL){ 
```

您已经对此进行了测试并跳出了循环。条件始终为真。

```
 printf("%Checking");
      if(table->buckets_array[i] != '\0'){ 
```

无需第三次测试。

```
 if(table->buckets_array[i]->key != NULL){ 
```

啊！，现在我们正在获取节点的有效负载

```
 if( strcmp(table->buckets_array[i]->key,key) == 0 ){
        printf("Found it\n");
        break;
      }
    }
      }
    } 
```

这里的大括号杂乱无章，我懒得阅读，或者数（4）或马赫他们。

```
 i++;
  }

  if(table->buckets_array[i] != NULL){ 
```

你似乎真的很喜欢这种情况。

```
 printf("new asdasd %d", *((int *)table->buckets_array[i]->data));
    return table->buckets_array[i]->data; 
```

啊！有效载荷被交付。您可以将打印保留给呼叫者。

```
 }else{
    return NULL;
  }
} 
```

精简版：

```
void *find_hash(Phash_table table, char *key){
      int i;
      unsigned i;

      for (i=0; i < *table_p->number_buckets; i++){
         data_el *cur;

         for (cur = table->buckets_array[i]; cur != NULL; cur = cur->next ) {
            if( strcmp(cur->key,key) ) continue;

            return cur->data; /* found it ! */
            }
         }
    return NULL;
} 
```

另外：malloc int-size 对象（如 table_p->number_buckets）是不切实际的，更实际的是将定义更改为：

```
typedef struct hash_table_ {
  void **order;  /* This might be intended as a permutation array ? */
  unsigned number_next_calls;
  unsigned int number_buckets;

  unsigned int *buckets_size; /* I think this was intended as a histogram */
  unsigned int worst;
  unsigned int total;
  float average;
  int (*hash_func)(char *);
  int (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table; 
```

将指针隐藏在 typedef 后面（如您的 Phash_table）通常被认为是不好的做法。

正如我昨天评论的那样，您的哈希函数很危险，因为它返回一个带符号的 int。它可能会生成负索引。（在碰撞方面，这也很糟糕，因为 "ABC"、"ACB"、"CAB" 都散列到相同的值。最好使用 K&R、FNV 或 Jenkins。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:59:14.310

也许您可以更正代码，使其成为您真正要测试的内容。也许包括所有必要的位，以便我们可以编译它（我喜欢）。

请注意，`find_hash`它没有返回值，但在调用它之前调用它`insert_hash`会给你带来麻烦。

编辑（现在显示完整代码）

`comp`调用中的函数`new_hash`- 因此无法编译。

你在用 malloc 做什么：

```
table_p->worst = (int *)malloc(sizeof(int));
table_p->total = (int *)malloc(sizeof(int));
table_p->average = (float *)malloc(sizeof(float));
table_p->number_buckets = (int *)malloc(sizeof(int)); 
```

malloc 的返回值无论如何都不应该强制转换，但是在这里您为 int 分配空间，然后告诉编译器您为`int *`. 这些字段真的需要是指针吗？

在您的 find_hash 中，循环应该是一个 for：

```
for (i=0; table->buckets_array[i] == ...; ++i) {
    etc
} 
```

但是，正如 sarnold 所说，你为什么要`table->buckets_array[i]`同时针对`NULL`(0) 和`'\0'`(0) 进行测试。这是非常奇怪的东西。

我不会花太多时间调试它。相反，我建议对代码进行审查（或让同事审查它）并解决一些问题。其中有：

*   弄清楚 table->buckets_array[i] 应该包含什么
*   取消转换 malloc 返回
*   不为整数数据分配空间
*   格式化
*   添加`const`到未更改的参数
*   尽可能提取嵌套循环
*   使用正确的循环

# sql - 用另一个表中的某些值检查表

> ID：10467349
> 
> 赞同：0
> 
> 时间：2012-05-06T01:23:11.657
> 
> 标签：sql, sql-server

我有两个表，如下所示

## 雇主大师

```
empid firstName  lastName  lstatus
1       Mark      Rowen      1
2       John      Griffin    1
3       Derick    Rose       1

EmpPers
----------
empPersSeq  empID   perTypeID   PersTypeValue
1             1        1            Good
2             1        2            Fair 
3             1        3            Good 
4             2        1            Fair
5             2        2            Fair
6             2        2            Fair 
```

如何从 EmpPers 表中没有 perTypeID=3 记录的 empMaster 获取所有 EmpIds 的列表？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:53:47.817

```
select *
from EmpMaster e
where not exists (
    select *
    from EmpPers p
    where p.empID = e.empID and p.perTypeID = 3
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T01:57:29.037

我相信 NOT EXISTS 可以解决问题：

```
SELECT 
em.empid
FROM EmpMaster em
WHERE NOT EXISTS (
    SELECT NULL 
    FROM EmpPers 
    WHERE empID = em.empid AND perTypeID = 3
);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:28:00.500

如果我对你的理解正确，你可以这样做：

```
SELECT e.empid FROM EmpMaster e
WHERE    (SELECT COUNT(*) 
         FROM EmpPers p
         WHERE e.empid = p.empID AND p.empPersSeq = 3) = 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T01:59:57.637

您可以加入 2 个表，在 empid 上进行聚合，并使用 HAVING 子句仅选择 perTypeID 永远不会 = 3 的 empid。

```
select a.empid
from EmpMaster a
    left join EmpPers b
    on a.empid = b.empid
group by a.empid
HAVING max(case when b.perTypeID = 3 then 1 else 0 end) =0 
```

# iphone - Objective-C 流式上传音频

> ID：10467350
> 
> 赞同：1
> 
> 时间：2012-05-06T01:23:12.967
> 
> 标签：iphone, objective-c, node.js, audio, heroku

我正在寻找一种在 iPhone 设备上将音频“流式上传”到 Heroku Node.js 服务器的方法。从某种意义上说，用户会点击“记录”，它会打开一个 POST 到 Node.js 服务器，而 Node.js 会在音频流进入时对其进行处理。

有谁知道这是否可能（使用 NSURLConncetion），如果可以，你能引导我走向正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:48:52.820

可以异步上传，完整记录，之后再完整上传

或者只是[NSStream](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server) 或 unix 中的纯 TCP 套接字，我使用[cocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:12:59.340

这是另一个选项（不使用 NSURLConnection）

[http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb](http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb)

# python - SPOJ 位图 (BFS)

> ID：10467361
> 
> 赞同：0
> 
> 时间：2012-05-06T01:24:35.993
> 
> 标签：python, algorithm, breadth-first-search

我尝试使用**python**解决 spoj 问题。我的算法应该只有**O(n^2)**，但仍然返回**TLE** ......
我的方法只是一个**多源 BFS**。

1.  找出所有1的位置
2.  在每个“1”上运行 BFS，将最短距离存储到名为“ans”的 2D 列表中
3.  打印答案

问题链接：[http ://www.spoj.pl/problems/BITMAP/](http://www.spoj.pl/problems/BITMAP/)

```
if __name__ == '__main__':
    n = int(input())    #reading number of test cases
    for k in range(n): 
        (row, col) = input().split()    #row and col
        row = int(row)
        col = int(col)
        #store the bitmap
        bitmap = []
        for i in range(row):
            line = input()
            bitmap.append(line)
        ans = [[False for i in range(col)] for j in range(row)]     #init a 2d array to store answer
        front = []
        num_element = row*col
        processed = 0
        for i in range(row):
            for j in range(col):
                if(bitmap[i][j] == '1'):
                    ans[i][j] = 0
                    front.append((i,j))
                    processed = processed +1
        while processed < num_element:
            new_list = []
            for node in front:
                i = node[0]
                j = node[1]
                new_distance = ans[i][j] + 1
                if(i> 0 and ans[i-1][j] is False):
                    ans[i-1][j] =new_distance                    
                    new_list.append((i-1,j))
                    processed = processed +1
                if(i< row -1 and ans[i+1][j] is False):
                    ans[i+1][j] =new_distance
                    new_list.append((i+1,j))
                    processed = processed +1
                if(j > 0 and ans[i][j-1] is False):
                    ans[i][j-1] =new_distance
                    new_list.append((i,j-1))
                    processed = processed +1
                if(j < col -1 and ans[i][j+1] is False):
                    ans[i][j+1] =new_distance
                    new_list.append((i,j+1))
                    processed = processed +1
            front = new_list
        #print the answer
        for line in ans:
            s = map(str, line)
            print(" ".join(s))
        input() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:13:21.433

有必要用曼哈顿度量来计算[距离变换。](http://en.wikipedia.org/wiki/Distance_transform)[本文](http://www.cs.auckland.ac.nz/~rklette/TeachAuckland.html/mm/MI30slides.pdf)代表了欧几里德度量的线性（O（rows * cols））算法的草图（但也提到了曼哈顿）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T07:11:41.850

谢谢你。我终于在 C++ 中实现了相同的算法并接受了！似乎问题需要二维数组不适合python。

# perl - 在 Perl 中：有没有办法知道列表中变量的名称？

> ID：10467364
> 
> 赞同：2
> 
> 时间：2012-05-06T01:26:04.477
> 
> 标签：perl, reference, scalar

在这种情况下，有没有办法在不使用符号链接的情况下知道变量的名称？

```
use strict;
...
for ($var1, $var2, $var3)
{
   die "NAME_OF_VAR is not defined" if !defined $_;
} 
```

未定义 var 时的输出：

“var[123] 未定义在 ...”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:38:47.347

```
use strict;
use warnings;

my ($var1, $var2, $var3) = 1..2;
for( qw($var1 $var2 $var3) ) { print "$_ is undefined\n" if !defined eval($_) } 
```

该`my`行从 TLP 的示例中借用，并具有以下输出：

```
$var3 is undefined 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:23:52.997

[PadWalker](http://search.cpan.org/perldoc?PadWalker)是解开别名的答案。然而，几乎在任何以 PadWalker 为答案的情况下，它都可能是错误问题的答案。它是用于调试或在将自己画到角落后寻找出路的那些模块之一。如果它被用作糟糕设计的出口，也许重新考虑设计是一个更好的选择。在您的情况下，答案可能是已经提到的答案：将警告提升为失败。

尽管如此，该模块仍然存在，可以工作并且玩起来很有趣。

**由于该问题专门询问了有关解开或检查别名的问题**，因此这里有两个示例，其中 PadWalker 能够将别名切回原始变量：

```
use strict;
use warnings;

use PadWalker qw( var_name );

my( $var1, $var2, $var3 ) = ( undef, undef, undef );

for ($var1, $var2, $var3) {
    warn var_name( 0, \$_ ) . ' is not defined in "for" loop'
        if !defined $_;
}

sub foo {
    warn var_name( 1, \$_[0] ) . ' is not defined in sub foo()'
        if !defined $_[0];
}

foo( $var1 ); 
```

产生的输出将是这样的：

```
$var1 is not defined in "for" loop at mytest.pl line 13.
$var2 is not defined in "for" loop at mytest.pl line 13.
$var3 is not defined in "for" loop at mytest.pl line 13.
$var1 is not defined in sub foo() at mytest.pl line 19. 
```

`var_name( 0, ...`注意在循环内部如何指定是必要的`for`，而在子例程内部我们需要使用`varname( 1, ...`.

也可能令人感兴趣的是`given/when`语句不使用别名，尽管它们看起来这样做。因此，PadWalker 无法回溯到`given(...)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T01:47:42.937

这是获取未定义变量的致命警告的一种方法：

```
my ($var1, $var2, $var3) = 1..2;

{
    use warnings FATAL => 'all';
    my $test = "$var1 $var2 $var3";
} 
```

**输出：**

当上面的块中发生错误时，脚本会终止。在这种情况下：

```
Use of uninitialized value $var3 in concatenation (.) or string at ... 
```

我选择串联作为定义性测试，但它可能是在使用未定义变量时导致警告的任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T16:01:31.780

考虑 PadWalker 模块：

```
#!/usr/bin/env perl
use warnings;
use strict;

use PadWalker qw(var_name);

my $foo = 123;
print var_name(0, \$foo), "\n"; # prints "$foo" 
```

默认情况下不安装 PadWalker，因此您需要使用系统上的 cpan 命令行工具安装它。

当然，PadWalker 很疯狂，可能不是做任何你想做的事情的最佳方式，但偶尔玩一玩肯定很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T14:18:14.700

我想你已经说过了，你需要象征性的参考。请记住，这些不是邪恶的，它们*通常*不是你想要的。在这种特定情况下，您正在执行一种元编程，您关心变量的名称。因此，您可以这样做。

```
use strict;
...
for (qw/var1 var2 var3/)
{
   no strict 'refs';
   die "$_ is not defined" if !defined ${$_};
} 
```

# java - 每次使用 java 检查一个框时更新所有 TextField

> ID：10467365
> 
> 赞同：0
> 
> 时间：2012-05-06T01:26:05.157
> 
> 标签：java, arrays, swing, counting, jcheckbox

我有一系列 JCheckBoxes(1-20)，每个都与一个 JTextField(1-20) 相关联。我希望每次选中一个框时都更新所有文本字段。这些字段将使用公式 100/（选中的复选框的总和）进行更新。因此，如果选中 checkbox1，则 textfield1 显示 100。如果还选中 checkbox15，则 textfield1 和 textfield15 显示 50。现在，当我选中 checkbox1 时，textfield1 显示 100，当我选中 checkbox2 时，显示 50，但 textbox1 保持在 100，而不是更新为50\. 如何使所有文本字段同时更新？

es1-es20 是我的文本字段 p1 是我从中获得 100 的文本字段。evensplit 是我的 20 个文本字段的数组。

此外，除非我为每个文本字段声明我的数组，否则它确实有效。我应该在哪里声明我的数组，以便每个 actionevent 都可以访问它？

```
private void es1ActionPerformed(java.awt.event.ActionEvent evt) {
    JCheckBox evensplit[] = new JCheckBox[24];
    evensplit[0] = es1;
    evensplit[1] = es2;
    ...24 times

    int checknums = 0;

    for(int c = 0;c< evensplit.length; c++) {
        if(evensplit[c].isSelected()) {
            checknums++;
            double even = 100/checknums;
            p1.setText(String.valueOf(even));
        }
    }
}

private void es2ActionPerformed(java.awt.event.ActionEvent evt) {
    JCheckBox evensplit[] = new JCheckBox[24];
    evensplit[0] = es1;
    evensplit[1] = es2;
    ...24 times

    int checknums = 0;

    for(int c = 0;c< evensplit.length; c++) {
        if(evensplit[c].isSelected()) {
            checknums++;
            double even = 100/checknums;
            p2.setText(String.valueOf(even));
        }
    } 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:10:50.590

对于[JCheckBox / JRadioButton / JToggleButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)或[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)使用

1)[项目监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)

2)[按钮组](http://docs.oracle.com/javase/tutorial/uiswing/components/buttongroup.html)

3)[按钮模型](http://docs.oracle.com/javase/tutorial/uiswing/components/model.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:34:26.200

您要设置的值取决于测试所有复选框，但您仍在循环中设置值 (setText())。您将不得不遍历所有复选框以计算选中的复选框，然后遍历所有字段以设置值。

要让两个例程都可以访问一个数组，请将其声明为实例变量；它将在类内，但在任一方法之外。

# scala - 如何在Scala中为树代数数据类型的叶子调用构造函数？

> ID：10467371
> 
> 赞同：3
> 
> 时间：2012-05-06T01:27:45.770
> 
> 标签：scala, generics, constructor, abstract-data-type, algebraic-data-types

我正在创建一些基本的抽象数据类型和算法来复习我的 CS 基础知识，并在此过程中学习 Scala。我的 BinarySearchTree 数据类型遇到了麻烦，这是一个更抽象的 BinaryTree 的实现：

```
abstract class BinaryTree[T](stored_value: T) { 
  var contents = stored_value
  var l: this.type = _
  var r: this.type = _
  ...
}

class BinarySearchTree[T <: Ordered[T]](stored_value: T) extends BinaryTree(stored_value) {  
  def insert(newval: T) {
    if (newval <= contents) {
      if (l == null) {
        throw new NotDefinedError("Still trying to work around type erasure.")
      } else {
        l.insert(newval)
      }
    } else {
      if (r == null) {
        throw new NotDefinedError("Still trying to work around type erasure.")
      } else {
        r.insert(newval)
      }
    }
  } 
```

在抛出 NotDefinedErrors 的块中，我尝试了一些方法，例如`l = new this.type(newval)`，替换`this.type`以及`BinarySearchTree[T]`我能想到的任何其他方法。根据我尝试表达该类型的方式，我会得到类似的东西：

```
class type required but BinarySearchTree.this.type found 
```

或者：

```
type mismatch;  found   : trees.BinarySearchTree[T]  required: BinarySearchTree.this.type 
```

我是否需要在 BinarySearchTree 的定义中用不同类型覆盖 l 和 r？或者只是在我为它们附加新值时调用不同类型的构造函数？还是其他选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T09:16:31.577

我同意 @dhg 的建议，即探索不可变树数据结构作为当前方向的替代方案。但是，如果您确实需要可变树，请继续阅读...

你的直接问题是，`this.type`在定义中`BinaryTree[T]`并不意味着你认为它意味着什么。它实际上是封闭实例的*单例类型*，即。居住的类型，仅此`this`而已。这是一个说明这一点的例子，

```
scala> class Foo { def self : this.type = this /* OK */ }
defined class Foo

scala> class Bar { def self : this.type = new Bar /* Does not compile */ }
<console>:7: error: type mismatch;
 found   : Bar
 required: Bar.this.type
       class Bar { def self : this.type = new Bar /* Does not compile */ }
                                          ^ 
```

这显然是一种比你真正想要的更具体的类型。

要解决这个问题，一种选择是削弱`l`和`r`to的类型`BinaryTree[T]`，就像@dhg 的回答一样。但是，我认为您在使用时最初`this.type`的目的是让树节点*自*类型化，并在子类中改进为 BinarySearchTree[T]。您可以像在 Java 中使用递归类型绑定一样执行此操作，也可以使用抽象类型成员执行此操作，例如，

```
abstract class BinaryTree[T] {
  type Self <: BinaryTree[T]
  var contents : T
  var l: Self = _
  var r: Self = _
}

class BinarySearchTree[T <: Ordered[T]](stored_value : T) extends BinaryTree[T] {
  type Self = BinarySearchTree[T]
    var contents = stored_value
    def insert(newval: T) {
      if (newval <= contents) {
        if (l == null) {
          new BinarySearchTree(newval)
        } else {
          l.insert(newval)
        }
      } else {
        if (r == null) {
          new BinarySearchTree(newval)
        } else {
          r.insert(newval)
        }
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T01:52:57.707

我会这样定义它：

```
class BinaryTree[T](
  val item: T,
  val left: Option[BinaryTree[T]] = None,
  val right: Option[BinaryTree[T]] = None) {

  override def toString() = "Tree(%s,%s,%s)".format(item,left,right)
}

class BinarySearchTree[T: Ordering](
  override val item: T,
  override val left: Option[BinarySearchTree[T]] = None,
  override val right: Option[BinarySearchTree[T]] = None) extends BinaryTree[T](item, left, right) {

  def insert(newval: T): BinarySearchTree[T] = {
    val (newLeft, newRight) =
      if (implicitly[Ordering[T]].lteq(newval, item))
        (insertSubtree(newval, left), right)
      else
        (left, insertSubtree(newval, right))
    new BinarySearchTree(item, newLeft, newRight)
  }

  private def insertSubtree(newval: T, subtree: Option[BinarySearchTree[T]]) =
    Option(subtree
      .map(_.insert(newval))
      .getOrElse(new BinarySearchTree(newval, None, None)))
} 
```

有一些基本的东西我已经改变为更像 Scala：

*   `val`通过使用所有字段使结构不可变。返回`insert`一个新的，修改过的树。尽可能多地保留旧的（不可变的）树以避免浪费内存。
*   `null`通过使用来避免使用`Option`。因此，`left`和`right`子树是`Option[Binary(Search)Tree[T]]`，明确表示它们可能存在或不存在。
*   在子树上使用，`map`因为它是一个`Option`. 这段代码`insertSubtree`基本上是说“如果子树存在，则插入其中。否则，获取一棵新树。”

以下是它的工作原理：

```
scala> var t = new BinarySearchTree(5, None, None)
t: BinarySearchTree[Int] = Tree(5,None,None)

scala> t = t.insert(3)
t: BinarySearchTree[Int] = Tree(5,Some(Tree(3,None,None)),None)

scala> t = t.insert(4)
t: BinarySearchTree[Int] = Tree(5,Some(Tree(3,None,Some(Tree(4,None,None)))),None)

scala> t = t.insert(7)
t: BinarySearchTree[Int] = Tree(5,Some(Tree(3,None,Some(Tree(4,None,None)))),Some(Tree(7,None,None))) 
```

# c - 编译错误

> ID：10467372
> 
> 赞同：0
> 
> 时间：2012-05-06T01:27:45.910
> 
> 标签：c, compilation

我一直在创建一个应该打开文件的函数`(catalogname [])`。但是，每当我编译时，我都会遇到这两个我无法弄清楚的错误。

> a3.c：在函数“openCatalog”中：
> 
> a3.c:20：警告：来自不兼容指针类型的赋值
> 
> a3.c:22：警告：return 使指针从整数而不进行强制转换

这是我的代码：

```
FILE* openCatalog(char catalogname[])
{
    catalogname = fopen ("*catalogname", "r");
    if(fopen != 0)
    {
        return 1;
    }
    else 
    {
        return 0;
    }
} 
```

提前感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:35:59.050

对这段代码的完整解释需要一段时间。

简短的版本是：

```
FILE *openCatalog(char catalogname[])
{
    FILE *fp = fopen(catalogname, "r");
    return(fp);
} 
```

这将打开指定文件进行读取并返回文件流指针。

另一个简短版本检查文件是否可以打开：

```
int openCatalog(char catalogname[])
{
    FILE *fp = fopen(catalogname, "r");
    if (fp != 0)
    {
        fclose(fp);
        return 1;
    }
    else 
    {
        return 0;
    }
} 
```

* * *

### 注释

原始代码是：

```
FILE* openCatalog(char catalogname[])
{
    catalogname = fopen ("*catalogname", "r");
    if(fopen != 0)
    {
        return 1;
    }
    else 
    {
        return 0;
    }
} 
```

除了“打开文件”之外，我们没有规范。给定函数签名，您似乎希望`FILE *`返回打开文件的（文件流指针）。因此，让我们在此基础上批评代码。

*   函数原型行OK；可能是`char const catalogname[]`强调该函数不会修改文件名，但这是一种改进，而不是修复错误的更改。

*   `catalogname`函数中的类型是`char *`。在函数的参数列表中，数组大致等同于指针。我通常会写信`FILE *openCatalog(char const *catalogname)`强调在函数中，它是一个`char const *`变量。尽管如此，使用您使用的数组表示法是 100% 合法的；对我来说，使用指针符号纯粹是一种风格偏好。

*   下一个可执行行有几个问题。函数调用在`fopen()`技术上并没有错，尽管它打开的是一个具有固定名称的文件，`*catalogname`而不是变量中指定的文件`catalogname`。要解决这个问题，您需要删除引号。会给你一个字符而`*`不是字符串，它将是文件名的第一个字符。所以，`*`也删除。

*   这让您`fopen()`返回一个值，实际上是 a `FILE *`，然后您将它分配给`catalogname`， a `char *`。这是类型不匹配，编译器会发出警告。如第一次重写所示，更正常的处理方法是：

    ```
    FILE *fp = fopen(catalogname, "r"); 
    ```

    这解释了您的错误消息：

    ```
    a3.c:20: warning: assignment from incompatible pointer type 
    ```

*   我们不知道您的目录是文本文件还是二进制文件。如果它是一个二进制文件，那么`"rb"`如果你在 Windows 上（这真的很重要），你应该使用它来打开它，这在类 Unix 系统上也可以正常工作（文本和二进制文件之间没有区别）。

*   代码中的下一行是条件：

    ```
    if (fopen != 0) 
    ```

    这实际上检查了函数的函数指针是否`fopen()`为空。并且 C 标准保证在托管环境（您正在使用）中，没有函数指针将为空。因此编译器可以优化该测试以假设条件始终为真。

    你真正需要的是对结果的测试：

    ```
    if (fp != 0) 
    ```

*   然后有两个返回语句，一个返回 1，一个返回 0。返回 1 的一个会引发关于将整数转换为指针的警告，因为该函数被定义为返回 a `FILE *`，而 1 是一个整数。

    这说明了您的其他警告消息：

    ```
    a3.c:22: warning: return makes pointer from integer without a cast 
    ```

*   返回 0 的返回不会产生警告，因为 0 是一个空指针常量，并且对于这样的函数返回是一个有效值。

*   代码可能应该简单地从`fopen()`. 在某个地方测试值是正确的，无论是在这个函数中还是在调用函数中，以确保打开成功。你可以在这里测试它：

    ```
    if (fp == 0)
        err_report_and_exit("Failed to open file %s (%d: %s)\n",
                            catalogname, errno, strerror(errno)); 
    ```

    使用`errno`and`strerror()`意味着您还应该包含标题：

    ```
    #include <errno.h>
    #include <string.h> 
    ```

*   代码应从以下位置返回文件流`fopen()`：

    ```
    return fp; 
    ```

总的来说，这导致：

```
FILE *openCatalog(char catalogname[])
{
    FILE *fp = fopen(catalogname, "r");
    if (fp == 0)
        err_report_and_exit("Failed to open file %s (%d: %s)\n",
                            catalogname, errno, strerror(errno));
    return(fp);
} 
```

如果该函数旨在检查文件是否可以打开以进行读取，则上述问题大致相同。我首先展示的修改后的代码有点冗长。由于假定的目的是检查文件是否可以打开，所以调用代码应该负责处理“无法打开的情况”；它知道要生成什么样的诊断。这是修订版的稍微紧凑的版本，但是 this 和上面的目标代码是相同的。

```
int openCatalog(char catalogname[])
{
    FILE *fp = fopen(catalogname, "r");
    if (fp != 0)
    {
        fclose(fp);
        return 1;
    }
    return 0;
} 
```

* * *

一个简单的实现`err_report_and_exit()`是：

```
#include "errreport.h"
#include <stdio.h>
#include <stdlib.h>
#include <starg.h>

void err_report_and_exit(char const *format, ...)
{
    va_list args;
    va_start(args, format);
    vfprintf(stderr, format, args);
    va_end(args);
    exit(EXIT_FAILURE);
} 
```

“errreport.h”标头可能是：

```
#ifndef ERRREPORT_H_INCLUDED
#define ERRREPORT_H_INCLUDED

#ifdef __GNUC__
#define PRINTFLIKE(n,m) __attribute__((format(printf,n,m)))
#define NORETURN()      __attribute__((noreturn))
#else
#define PRINTFLIKE(n,m) /* If only */
#define NORETURN()      /* If only */
#endif /* __GNUC__ */

extern void err_report_and_exit(char const *format, ...) PRINTFLIKE(1,2) NORETURN();

#endif /* ERRREPORT_H_INCLUDED */ 
```

GCC 特定的位意味着您可以获得与`printf()`直接使用相同级别的格式错误报告。

（此代码以一个更大的包为模型，该包系统地`err_`用作函数前缀。在那个包中，这个函数将是`err_error()`. 这就是它的原因，`err_`而不是`error_`- 尽管输入的解释比修复它需要更长的时间。大包包含在 files`stderr.c`和`stderr.h`中，尽管有一个论点是它使用前缀如履薄冰`std`。然而，它是*我的*标准错误报告包。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:33:53.467

*   不兼容的指针类型

    ```
    catalogname = fopen ("*catalogname", "r"); 
    ```

    `catalogname`是一个字符数组 ( `char catalogname[]`)，同时`fopen()`返回一个文件指针 ( `FILE*`)。自然，将文件指针分配给 char 数组（这是一种不同类型的指针——而且，更重要的是，不可分配）没有任何意义。

*   `return`从整数生成指针而不进行强制转换

    您声明您的函数`FILE*`在此处返回：`FILE* openCatalog(...)`. 但是，您的 return 语句是`return 1;`and `return 0;`。在那里，编译器认为您想要返回值为 1（或 0）的文件指针，因此是响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T01:36:40.230

```
FILE* openCatalog(char catalogname[]) 
```

这会更好`char *catalogname`，因为你实际上并没有传递一个*数组*——你得到的是一个指向字符的指针。（这是 C 的一个有趣的小怪癖。）虽然这很有效，但我发现提醒您只得到一个指针是*非常*受欢迎的。

```
catalogname = fopen ("*catalogname", "r"); 
```

`fopen(3)`返回一个`FILE*`对象。您不能将 a 分配`FILE*`给`char []`变量。

如果要`catalogname`在调用中使用变量`fopen(3)`，只需使用它：

```
FILE *f = fopen(catalogname, "r"); 
```

```
if(fopen != 0) 
```

`fopen`是此上下文中的*函数指针*。您不是将前一个`fopen()`调用的返回值与 进行比较`0`，而是将函数*指针*与`0`. 那不是你想要的。

```
 return 1; 
```

你声明你的函数返回 a `FILE *`，这就是你应该返回的——而不是一个整数。

重新编写的版本如下所示：

```
FILE* openCatalog(char *catalogname) {
    FILE *f = fopen(catalogname, "r");
    if (!f)
        perror("Unable to open file");
    return f;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T01:34:15.523

实际上，您有很多错误，其中一些已被掩盖

第一的：

```
catalogename = fopen("*catalogname", "r"); 
```

是错的。我想你想要的是：

```
FILE *fPtr = fopen(catalogname, "r"); 
```

然后，在那之后，你的函数的主体发生了很大的变化：

```
if (fPtr == NULL || ferror(fPtr) != 0) // if the file isn't NULL or if there is no errors with opening the file...
{
    if (fPtr != NULL) // never try to close a NULL file ...
        fclose(fPtr);

    return NULL; // best way to report an error in C - return NUL or set errno
}

else
{
     return fPtr; // return the file we just made.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T01:34:34.337

第一个警告：

您正在分配`FILE*`（`fopen`返回的内容）到`catalogname`which is `char []`。

第二个警告：

该函数`FILE*`在您返回整数时返回类型`0`或`1`

你想要别的东西吗？像：

```
FILE* openCatalog(char catalogname[])
{
   FILE* file = fopen (catalogname, "r"); 
```

# java - 将 SOAP 消息从 Java7 上的 Spring-WS 客户端发送到 Java 6 上的服务器时删除了左尖括号

> ID：10467378
> 
> 赞同：5
> 
> 时间：2012-05-06T01:28:22.603
> 
> 标签：java, soap, bytearray, spring-ws, saaj

这对我来说真的很令人沮丧，所以我会尝试解释我现在知道的和不知道的。请确保在帖子底部看到我的更新。

首先，我们有一个使用 Spring-WS 处理消息的战争。我们还有一个使用 WebServiceTemplate 发送消息的客户端。我们部署在 Tomcat 7 上。

在我们当前的开发环境中，Tomcat 7 服务器使用的是 JRE 6u24。在本地，当我使用客户端发送 SOAP 消息时，我正在运行相同的版本。一切都按预期工作。

当我制作本地 JRE 7u04 时，我收到 500 响应并且服务器看到以下错误：

```
[2012-05-05 20:19:13,179] DEBUG - org.springframework.web.servlet.FrameworkServlet.processRequest(671) | Could not complete request
org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:
        at org.springframework.ws.soap.saaj.SaajSoapMessage.getSaajVersion(SaajSoapMessage.java:260)
        at org.springframework.ws.soap.saaj.SaajSoapMessage.getImplementation(SaajSoapMessage.java:342)
        at org.springframework.ws.soap.saaj.SaajSoapMessage.<init>(SaajSoapMessage.java:117)
        at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:184)
        at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:58)
        at org.springframework.ws.transport.AbstractWebServiceConnection.receive(AbstractWebServiceConnection.java:90)
        at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:86)
        at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)
        at org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:222)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
        at org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:195)
        at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:159)
        at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:141)
        at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:90)
        at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:417)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: com.sun.xml.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:
        at com.sun.xml.messaging.saaj.soap.EnvelopeFactory.createEnvelope(EnvelopeFactory.java:127)
        at com.sun.xml.messaging.saaj.soap.ver1_2.SOAPPart1_2Impl.createEnvelopeFromSource(SOAPPart1_2Impl.java:84)
        at com.sun.xml.messaging.saaj.soap.SOAPPartImpl.getEnvelope(SOAPPartImpl.java:150)
        at org.springframework.ws.soap.saaj.support.SaajUtils.getSaajVersion(SaajUtils.java:155)
        at org.springframework.ws.soap.saaj.SaajSoapMessage.getSaajVersion(SaajSoapMessage.java:257)
        ... 39 more
Caused by: javax.xml.transform.TransformerException: org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.
        at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:501)
        at com.sun.xml.messaging.saaj.util.transform.EfficientStreamingTransformer.transform(EfficientStreamingTransformer.java:414)
        at com.sun.xml.messaging.saaj.soap.EnvelopeFactory.createEnvelope(EnvelopeFactory.java:118)
        ... 43 more
Caused by: org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1231)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.xml.sax.helpers.XMLFilterImpl.parse(XMLFilterImpl.java:333)
        at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:484)
        ... 45 more 
```

我经历了很多潜在的问题。但是，我认为我在某些方面已将其缩小为 SAAJ 问题。

在 Spring-WS 的 SaajSoapMessageFactory 类中，有一个方法以：

```
public SaajSoapMessage createWebServiceMessage(InputStream inputStream) throws IOException {
        MimeHeaders mimeHeaders = parseMimeHeaders(inputStream);
        try {
            inputStream = checkForUtf8ByteOrderMark(inputStream);
            SOAPMessage saajMessage = messageFactory.createMessage(mimeHeaders, inputStream);
            postProcess(saajMessage);
            return new SaajSoapMessage(saajMessage, langAttributeOnSoap11FaultString, messageFactory);
        } 
```

当我使用带有 JRE 6 的客户端发送时，createMessage 调用之后的 inputStream 开始如下：

```
[60, 101, 110, 118, 58, 69, 110, 118, 101, 108, 111, 112, 101, 32, 120, 109, 108, 110, 115, 58, 101, 110, 118, 61, 34, 104, 116 
```

转换为：`<env:Envelope`...等

但是，当我使用带有 JRE 7 的客户端发送时，createMessage 调用之后的 inputStream 开始如下：

```
[101, 110, 118, 58, 69, 110, 118, 101, 108, 111, 112, 101, 32, 120, 109, 108, 110, 115, 58, 101, 110, 118, 61, 34, 104, 116 
```

如您所见，第一个字节，即左尖括号已丢失。我一直在尝试对其进行调试，但我缺乏 com.sun.xml.internal 资源来真正做很多有效的事情。

另外值得注意的是，在 JRE 6 中，调用 checkForUtf8ByteOrderMark 之后的 PushbackInputStream 实际上看起来像最终的字节数组：

`[60, 101, 110, 118, 58, 69, 110, 118, 101, 108, 111, 112, 101, 32, 120, 109, 108, 110, 115, 58, 101, 110, 118, 61, 34, 104, 116,`ETC

但是当使用 JRE 7 发送时，它看起来像这样：

`[60, 0, 0, 0, 0, 0, 0, 0, 0`， ETC

现在，该方法本身似乎遵循相同的流程，验证没有 BOM，然后放回它取出的内容以验证它（至少在我看来是这样）。

所以，我有两个问题：

1）有人知道发生了什么吗？这里有什么东西在敲钟吗？

2) 我怎样才能获得这些 com.sun.xml.internal 包的来源？

我应该注意，我可以在 Eclipse 中的 Tomcat 上本地运行它，而且似乎没有任何问题，但我知道那里可能正在进行一些时髦的类加载。

**更新1：**

我能够将一些源代码与代码相关联，并在 SOAPPart1_2Impl 中使用此方法：

```
 public void setContent(Source source) throws SOAPException {
        try {
            if (source instanceof StreamSource) {
                InputStream is = ((StreamSource) source).getInputStream();
                Reader rdr = ((StreamSource) source).getReader();

                if (is != null) {
                    this.source = new JAXMStreamSource(is);
                } else if (rdr != null) {
                    this.source = new JAXMStreamSource(rdr);
                } else {
                    log.severe("SAAJ0544.soap.no.valid.reader.for.src");
                    throw new SOAPExceptionImpl("Source does not have a valid Reader or InputStream");
                }
            } 
```

现在，它采用设置 InputStream 的第一个路径。非常有趣的是，完成此操作后，source 会有一个 ByteInputStream 开头：

`[60, 0, 0, 101, 110, 118, 58, 69, 110, 118, 101, 108, 111, 112, 101, 32, 120, 109, 108, 110, 115, 58, 101,`ETC

我对此感到非常困惑。我将尝试弄清楚这三个字符到底发生了什么——也许 checkForUtf8ByteOrderMark 方法有一些副作用。

**更新 2：**

好吧，现在我真的到了某个地方。我查看了那个 JAXMStreamSource 类，它导致了一个 ByteOutputStream 类，它有一个方法：

```
public void write(InputStream in) throws IOException {
    if (in instanceof ByteArrayInputStream) {
        int size = in.available();
        ensureCapacity(size);
        count += in.read(buf,count,size);
        return;
    }
    while(true) {
        int cap = buf.length-count;
        int sz = in.read(buf,count,cap);
        if(sz<0)    return;     // hit EOS

        count += sz;
        if(cap==sz)
            // the buffer filled up. double the buffer
            ensureCapacity(count);
    }
} 
```

在行“int sz = in.read(buf,count,cap);” 是添加 60 之后的两个零的位置。我仍在试图弄清楚为什么以及为什么使用 1.7 的客户端可能会产生这种效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:48:45.277

升级到 2.0.4.RELEASE 以某种方式解决了这个问题。checkForUtf8ByteOrderMark 方法没有改变，但其他一些东西肯定发生了变化，因为在那之后进来的流看起来不同了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T02:24:33.670

> 也许 checkForUtf8ByteOrderMark 方法有一些副作用。

我想你可能是对的

[https://jira.springsource.org/browse/SWS-750](https://jira.springsource.org/browse/SWS-750)

# ios - 使用枚举移动数组中的项目

> ID：10467385
> 
> 赞同：0
> 
> 时间：2012-05-06T01:29:50.467
> 
> 标签：ios, cocoa, nsarray, enumeration

我在附件视图中创建了一个自定义按钮`UITableViewCell`。该按钮充当列表视图中的自定义复选框。

我想以编程方式将“已检查”项目移动到 的第二部分`UITableView`，但我在执行此操作时遇到了困难。

我正在关注 MVC，并且`didArrive`在以下方法中使用 BOOL, 对选中的项目进行排序：

```
- (void)shuffleGuests
{
    RCGuestManager *movedGuest = [[RCGuestManager alloc] init];
    for (id guest in allGuestsPending) {
        if ([guest didArrive]) {
            [allGuestsArrived addObject:guest];
            movedGuest = guest;
        }
    }
    [allGuestsPending removeObjectIdenticalTo:movedGuest];
} 
```

注意这两个数组。未选中的项目应该进入 allGuestsPending 数组，选中的客人应该进入 allGuestsArrived 数组。

当点击一行时调用此方法。检查该项目，然后将其从表视图中的一个部分移到另一个（与数组匹配）。

当然，我不能在枚举期间删除一个对象，所以我试图将移动的对象放入一个变量中，然后将其从以前的数组中删除，同时将其添加到新数组中。

上述方法导致数组中的最后一项总是移动到新部分。

有没有更好的方法来做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:51:58.417

请尝试以下想法：

```
NSMutableArray *guestsToRemove = [NSMutableArray array];
for (id guest in allGuestsPending) {
    if ([guest didArrive]) {
        [allGuestsArrived addObject: guest];
        [guestsToRemove addObject: guest];
    }
}
[allGuestsPending removeObjectsInArray: guestsToRemove]; 
```

# javascript - 更改 tumblr spotify 嵌入

> ID：10467390
> 
> 赞同：0
> 
> 时间：2012-05-06T01:31:07.163
> 
> 标签：javascript, jquery, tumblr, spotify

你知道如何将 tumblr 的 spotify 嵌入从大的变成像非这样的小宽：http: [//elphinstonetheme.tumblr.com](http://elphinstonetheme.tumblr.com)？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T00:45:54.530

Antony 和 user2444115 提供的 CSS 代码就像一个魅力，但我认为 CSS 代码真的应该是（要“干净”）：

```
.spotify_audio_player {height:80px !important;} 
```

[我已经在http://stevedapizza.tumblr.com](http://stevedapizza.tumblr.com)上测试并在我的音乐 Tumblr 上使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T22:05:43.977

我知道这是一个旧线程，但您也可以将以下内容添加到您的 CSS 代码中：

```
.spotify_audio_player{ height:80px; !important} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T18:22:33.827

我自己一直在为此苦苦挣扎。如另外指出的那样，当您使用内置的 Spotify 搜索时，即使它在音频帖子类型下，它*实际上*也是作为视频帖子类型发布的。

为了强制较小的播放器，您需要使用 Tumblr 内置的重新调整大小主题代码来强制较小的播放器。它们提供三种嵌入尺寸：500 像素宽、400 像素和 250 像素。

为此，您需要通过编辑 html 来自定义当前它们。在主题中查找您的 {block:Video} 部分，您应该会看到类似 {Video-500} 的内容 - 将该数字更改为 250 以强制使用较小的播放器。

请注意，这将影响所有视频帖子，但请记住这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T23:15:26.457

它非常简单：链接博客使用的嵌入式播放器实际上是通过 html 嵌入播放器的文本帖子，而不是通过音乐帖子功能。您可以在这里创建和自定义您自己的播放器：[https ://developer.spotify.com/technologies/spotify-play-button/](https://developer.spotify.com/technologies/spotify-play-button/)

（选择自定义嵌入选项，然后选择紧凑的小部件，这应该可以完成工作）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T02:24:18.540

从[spotify 文档](https://developer.spotify.com/technologies/spotify-play-button/)的外观来看，唯一的区别是将 iframe 的高度设置为 80 而不是 380。您应该能够通过使用自定义主题首选项中的“编辑 HTML”选项来做到这一点。

# mod-rewrite - VirtualHost中用于目录重定向的Apache RewriteRule在没有斜杠的情况下不起作用

> ID：10467395
> 
> 赞同：1
> 
> 时间：2012-05-06T01:31:49.017
> 
> 标签：mod-rewrite, redirect, virtualhost, slash

如果没有斜杠，我拥有的重写 url 不会重定向。我想将去这里的用户重定向`http://example.com/po`到这里：`http://new.example.com/po/index_mi.php`。

我尝试了这些行，但没有一个行得通：

```
RewriteRule  /po(/)?$ http://new.example.com/po/index_mat.php [R=301,L]
RewriteRule ^/po(/)$ http://new.example.com/po/index_mat.php [R=301,L]
RewriteRule ^/po$ http://new.example.com/po/index_mat.php [R=301,L] 
```

这是完整的虚拟主机：

```
<VirtualHost 192.228.100.142:80>
ServerAdmin serveradmin@example.com
DocumentRoot /home/drupal_1
ServerName example.com
ServerAlias www.example.com 
Alias /movies /home/movies/
ErrorLog /var/log/httpd/example.com_err_log
  CustomLog /var/log/httpd/example.com_log special
<Directory /home/drupal_1>
  Options FollowSymLinks Includes ExecCGI
          AllowOverride All
          DirectoryIndex index.html index.htm index.php
</Directory>

# Rewrite Rules #####################
RewriteEngine On
RewriteRule ^/webmedia/(.*) / [R=301,L]
RewriteRule ^/marquee.php / [R=301,L]
RewriteRule ^/register /user/register [R=301,L]
RewriteRule  ^/po(/)?$ http://new.example.com/po/index_mat.php [R=301,L]
# end Rewrite Rules #################

</VirtualHost> 
```

* * *

**更新：**

我让它与这条线一起工作：

```
RewriteRule ^/po$ http://new.example.com/po/index_mat.php [R=301,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:54:31.150

尝试：

```
RewriteOptions AllowNoSlash 
```

从[mod_rewrite 文档](https://httpd.apache.org/docs/2.4/mod/mod_rewrite.html#rewriteoptions "mod_rewrite - RewriteOptions 指令 / AllowNoSlash")：

> **AllowNoSlash**
> 
> 默认情况下，mod_rewrite 将忽略映射到磁盘上的目录但缺少尾部斜杠的 URL，期望 mod_dir 模块将向客户端发出重定向到带有尾部斜杠的规范 URL。
> 
> 当`DirectorySlash`指令设置为`off`时，可以启用该`AllowNoSlash` 选项以确保不再忽略重写规则。如果需要，此选项可以在 `.htaccess`与目录匹配的文件中应用重写规则而没有尾部斜杠。
> 
> 在 Apache HTTP Server 2.4.0 及更高版本中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:33:53.093

```
RewriteRule ^/po$ http://new.example.com/po/index_mat.php [R=301,L] 
```

看来您必须重新启动 Apache 或至少进行优雅的重新启动才能生效。

# android - Android OpenCv HoughCircles

> ID：10467398
> 
> 赞同：1
> 
> 时间：2012-05-06T01:32:19.193
> 
> 标签：android, opencv

我正在尝试使用 android-opencv 2.3.1 来识别图像中的圆圈（硬币）。但是，通过执行 Imgproc.cvtColor 方法会发生错误（org.opencv.cvException）。

```
File imgFile = new File(Environment.getExternalStorageDirectory() + "/test.jpg");
imageBmp = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

Mat mImg = new Mat();
mImg = Utils.bitmapToMat(imageBmp);        
Mat mGray = new Mat(mImg.rows(), mImg.cols(), CvType.CV_8UC1, new Scalar(0));
Imgproc.cvtColor(mImg , mGray, Imgproc.COLOR_BGRA2GRAY, 4); 
Imgproc.GaussianBlur( mGray , mGray , new Size(9, 9), 2, 2);
Mat circles = new Mat();
Imgproc.HoughCircles(mGray , circles, Imgproc.CV_HOUGH_GRADIENT, 1d, (double)  
                    mGray.height() / 70, 200d, 100d); 
```

我究竟做错了什么？手机：三星 Galaxy S i9000

* * *

只是用新代码更新我的问题。“Imgproc.cvtColor”方法仍然给出同样的错误。

```
File imgFile = new File(Environment.getExternalStorageDirectory() + "/test.jpg");
imageBmp = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
Mat mImg = new Mat();
mImg = Utils.bitmapToMat(imageBmp);
Mat mGray = new Mat(mImg.rows(), mImg.cols(), CvType.CV_8UC1);
Imgproc.cvtColor(mImg, mGray, Imgproc.COLOR_BGRA2GRAY);
Imgproc.GaussianBlur(mGray, mGray, new Size(9, 9), 2, 2);
Mat circleImage = new Mat(mGray.rows(), mGray.cols(), CvType.CV_8UC1);
Imgproc.HoughCircles(mGray, circleImage, Imgproc.CV_HOUGH_GRADIENT, 1d,
         (double) mGray.height() / 70, 200d, 100d); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:38:54.223

我不是 Java 程序员，但可以在您的代码中看到两个问题。首先，cvtColor() 中最后一个参数的值不应该是 4。改变这个

```
Imgproc.cvtColor(mImg , mGray, Imgproc.COLOR_BGRA2GRAY, 4); 
```

对此

```
Imgproc.cvtColor(mImg , mGray, Imgproc.COLOR_BGRA2GRAY); 
```

由于它正在从 BGRA 转换为灰度，它理解目标 ( `mGray`) 是单通道。

二、你为什么要`new Scalar(0)`传给

```
Mat mGray = new Mat(mImg.rows(), mImg.cols(), CvType.CV_8UC1, new Scalar(0)); 
```

? 那可能是把事情搞砸了。我会调用为图像分配内存的构造函数：

```
Mat mGray = new Mat(mImg.rows(), mImg.cols(), CvType.CV_8UC1); 
```

**编辑：**现在问题可能出在您阅读图像并转换为`Mat`. 我会替换这个

```
imgFile.getAbsolutePath()
mImg = Utils.bitmapToMat(imageBmp); 
```

这样

```
Mat mImg = Highgui.imread(imgFile.getAbsolutePath()); 
```

然后确保`mImg.rows()`返回正确的值。请让我知道情况如何。

# django - Django 传递参数

> ID：10467400
> 
> 赞同：0
> 
> 时间：2012-05-06T01:32:49.550
> 
> 标签：django

我有一个页面列表，来自志愿者列表表的志愿者列表。

Volunteer_list 表包含以下字段， Volunter name Volunteer position name Date created

现在从这个页面 - 主页我需要将志愿者职位名称传递到下一页 - 联系页面。志愿者职位字段是 50 字节字段。

如何定义联系人页面的视图以及如何访问联系人页面中传递的字段？

志愿者列表.html

```
<tr>
        <th colspan=4 align="left"><label for="id_Volposition">Volunteer Position:</label></th>
        <th colspan=.5 align="left"><a href="/signups/new/{{ v.position }}" class="username" <u>{{ v.volposition }}</u></a></th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr> 
```

如果您注意到这里，我将调用注册/新页面，并将 v.position 作为参数传递..我需要知道以下内容，1.如何为注册/新页面定义 urls.py 以访问v.position 参数 2\. 我将如何访问注册/新页面中的参数

我的 URLS.py

```
urlpatterns = patterns('',
   (r'^new/$',                           sfp.view),
   (r'^volunteer/$',     volunteer_page),
   (r'^vollist/$', volunteer_list),
   (r'^volcont/$', volunteer_contact)
) 
```

new/$ 调用 sfp.view..它是我的 views.py.. 中的一个函数。该视图基本上会呈现一个收集所有信息的 html 页面。

我需要知道如何将参数“位置”传递给这个函数？

这是现有的一段代码..

如果它像教程中给出的那样直接调用，我没有任何问题。

def 详细信息（请求，poll_id）：

*   sfp.view 的代码

视图.py

```
 sfp = SimpleFormProcessing(
        form_class=VolunteerSignupForm,
        form_2_model=volunteersignupform_2_model,
        form_template='signups/create_contact_form.dmpl',
        email_template='signups/response_email.dmpl',
        email_html_template='signups/response_email_html.dmpl',
        email_subject='Vibha Volunteer Signup',
        email_sender='volunteer@vibha.org',
        redirect_url='/signups/thanks/',
        do_captcha=True)

code for simpleformprocessing:

    class SimpleFormProcessing:

        def __init__(self, form_class, form_2_model, form_template,
                email_template, email_subject, email_sender, redirect_url,
                do_captcha=False, record_ip_addr=False, email_html_template=None):
            self.form_class = form_class
            self.form_2_model = form_2_model
            self.form_template = form_template
            self.email_template = email_template
            self.email_html_template = email_html_template
            self.email_subject = email_subject
            self.email_sender = email_sender
            self.redirect_url = redirect_url
            self.do_captcha = do_captcha
            self.record_ip_addr = record_ip_addr

        def view(self, request, initial={}):
            Form = self.form_class
            if self.do_captcha:
                Form = form_with_captcha(Form, request)
            if self.record_ip_addr:
                Form = form_with_ipaddress(Form, request)
            if request.method == 'POST':
                # Try processing the form
                if self.do_captcha and not accepts_cookies(request):
                    return our_flatpage('Please enable cookies and try again.')
                else:
                    form = Form(request.POST)
                    if form.is_valid():
                        # The form is correct, process it
                        model = self.form_2_model(form)
                        if self.email_template:
                            text_content = render_to_string(self.email_template, {'model': model})
                            recipients = model.emailRecipients()
                            try:
                                bcc_recipients = model.emailBCCRecipients()
                            except:
                                bcc_recipients = None
                            msg = EmailMultiAlternatives(self.email_subject, text_content, self.email_sender,

                                recipients, bcc_recipients)

                        if self.email_html_template:
                            html_content = render_to_string(self.email_html_template, {'model': model})
                            msg.attach_alternative(html_content, "text/html")

                        msg.send()

                    return HttpResponseRedirect(self.redirect_url)
                else:
                    # Show the form with errors
                    return render_to_response(self.form_template, {'form': form})
        else:
            # Show the empty form
            form = Form(initial=initial)
            if self.do_captcha: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:35:27.967

你想要这样的东西：

```
from django.views.generic.base import TemplateView

url(r'^/signups/new/?P(<position>\w+)/$', TemplateView.as_view(
    template_name='relative_path_to_template')), 
```

TemplateView 类是一个简单的视图，可让您呈现模板。

* * *

编辑：

要从您的视图中访问“位置”变量，请定义视图以接收一个名为位置的额外参数：

```
def view(self, request, initial={}, position=None):
    # The variable is now accessible by calling 'position' as a regular variable. 
```

但是请记住，您需要修改我发布的 URL 路由规则。只需更改第一部分以匹配我给出的 URL，例如：

```
urlpatterns = patterns('',
    url(r'^/new/?P(<position>\w+)/$', sfp.view),
    # ... etc.
) 
```

我没有测试过这个。

* * *

总的来说，在这个问题上，你几乎没有给我们任何东西。我们想提供帮助，但我们需要看到您为尝试制定 URL 路由规则和视图而烦恼（而不是仅仅要求我们编写它们）。所有这些信息都可以在[Django 文档](https://docs.djangoproject.com/en/1.4/)和[官方 Tutorial](https://docs.djangoproject.com/en/dev/intro/tutorial01/)中找到。我建议先完成本教程。

# java - (Java) 为什么我的 JFrame y 坐标偏离 22 点？

> ID：10467403
> 
> 赞同：2
> 
> 时间：2012-05-06T01:34:08.270
> 
> 标签：java, swing, jframe, coordinates

我以前使用过 jframes 并且从未遇到过这个问题，但是当我以不同的方式设置缓冲区策略时（我不完全理解这可能是造成这种情况的原因），我遇到了这个问题。每当我在 jframe 上输出任何内容时，x 坐标都与 jframe 完美匹配（最左边的 x 像素为 0，最右边的 x 是框架本身的宽度），但 y 没有。我使用鼠标运动侦听器来确定我所有的 y 输出开始时比帧高 22 个像素。例子：

如果我要在坐标 (0,0) 上绘制任何矩形、图像或任何东西……我的图像的最顶部将被精确地截断 22 个像素。我不是 java 专家，我认为没有其他人遇到过这个问题证明了这一点，但似乎没有发生这种情况的情况，我在 2 台不同的计算机上尝试了 2 种不同的 IDE，看看它是否我的机器。

我将代码编辑到问题的“核心”以寻求批评/帮助：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferStrategy;
import javax.swing.ImageIcon;
import javax.swing.JFrame;

public class Mouse extends JFrame implements KeyListener, MouseListener, MouseMotionListener {

public static void main(String[] args) {
    Mouse m = new Mouse();
    m.run();
}

public void run(){
        init();
        while (this.isActive()){
            repaint();
        }
}

BufferStrategy strategy;
int mPosx;
int mPosy;

public void init(){
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setBounds(100,100,800,600);
    this.setResizable(false);
    this.addKeyListener(this);
    this.addMouseListener(this);
    this.addMouseMotionListener(this);
    this.setIgnoreRepaint(true);
    this.setVisible(true);
    this.createBufferStrategy(2);
    strategy = this.getBufferStrategy();
}

public void paint(Graphics g) {
    Graphics2D g2 = null;
    if (strategy != null) {
        try {
            g2 = (Graphics2D)strategy.getDrawGraphics();
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            draw(g2);
        } 
        finally { 
            g2.dispose();
        }
        strategy.show();
    }
}

public void draw(Graphics2D g){
    g.setColor(Color.DARK_GRAY);
g.fillRect(580, 30, 120, 90);
g.setColor(Color.WHITE);
    g.drawString("Mouse X: " + mPosx, 600, 70);
g.drawString("Mouse Y: " + mPosy, 600, 90);
}

public void keyPressed(KeyEvent e) {
    switch (e.getKeyCode()){
        case KeyEvent.VK_ESCAPE:
        this.dispose();
        break;
        }
}

public void keyReleased(KeyEvent e) {}
public void keyTyped(KeyEvent e) {}

public void mouseClicked(MouseEvent e) {}
public void mouseEntered(MouseEvent e) {}
public void mouseExited(MouseEvent e) {}
public void mousePressed(MouseEvent e) {}

public void mouseReleased(MouseEvent e) {
    mPosx = e.getX();
    mPosy = e.getY();
}

public void mouseDragged(MouseEvent e) {
}

public void mouseMoved(MouseEvent e) {
mPosx = e.getX();
mPosy = e.getY();
}
} 
```

为什么我的 y 坐标关闭了？有人可以用正确的 y 更好地编写此代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T02:15:24.727

您需要考虑框架的插图。见[`Container.getInsets()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#getInsets%28%29)。

来自 Javadoc：

> `public Insets getInsets()`
> 
> 确定此容器的 insets，指示容器边框的大小。
> 
> 例如，一个 Frame 对象的顶部插图对应于框架标题栏的高度。

如果你想在一个组件上绘图而不必担心插图，请将绘图代码移动到 的子类`JComponent`，然后将该组件添加到`JFrame`.

```
final FooComponent c = new FooComponent();     // this is your custom component
frame.getContentPane().setLayout(new BorderLayout());
frame.getContentPane().add(c, BorderLayout.CENTER); 
```

# java - netty - 如何将 ChannelBuffer 类型保存到文件中？

> ID：10467408
> 
> 赞同：2
> 
> 时间：2012-05-06T01:34:23.240
> 
> 标签：java, networking, network-programming, netty

我曾尝试使用此代码：

```
saver=new FileOutputStream(file);
byte c;
while ( content.readable() ){ //content is a ChannelBuffer type
    c = content.readByte();
    saver.write(c); 
   } 
```

但是由于文件流是二进制的，所以写入速度似乎真的很慢！有什么方法可以真正快速地将 ChannelBuffer 保存到文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T02:59:10.790

尝试将整个缓冲区写入文件。此示例代码来自 netty 文件上传[应用程序](https://github.com/netty/netty/blob/4.1/codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractDiskHttpData.java#L122)。

```
 FileOutputStream outputStream = new FileOutputStream(file);
    FileChannel localfileChannel = outputStream.getChannel();
    ByteBuffer byteBuffer = buffer.toByteBuffer();
    int written = 0;
    while (written < size) {
        written += localfileChannel.write(byteBuffer);
    }
    buffer.readerIndex(buffer.readerIndex() + written);
    localfileChannel.force(false);
    localfileChannel.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T08:55:29.723

```
 ChannelBuffer cBuffer = ***;

    try (FileOutputStream foStream = new FileOutputStream(filepath)) {
        while (cBuffer.readable()) {
            byte[] bb = new byte[cBuffer.readableBytes()];
            cBuffer.readBytes(bb);
            foStream.write(bb);
        }
        foStream.flush();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# php - 字符串 - PHP 中的数组歧义

> ID：10467411
> 
> 赞同：4
> 
> 时间：2012-05-06T01:34:49.127
> 
> 标签：php, arrays, string

我依稀记得，从我第一次阅读 PHP 文档（10 多年前）开始，访问数组 ( `$string[0]`) 中的字符的类数组语法造成了一些歧义或未定义的行为。

O'Reilly PHP 袖珍参考（第 2 版）指出：

> 为了解决字符串和数组之间的歧义问题，引入了一种新语法来取消引用字符串中的单个字符：
> 
> `$string{2}`
> 
> 此语法等效于`$string[2]`，并且更可取。

我知道这`$string[2]`可能会令人困惑，但我不确定它怎么会模棱两可？

此外：考虑到花括号（[显然](https://stackoverflow.com/questions/8092248/php-curly-braces-in-array-notation)）也适用于“真实”数组，我想知道[新语法如何消除歧义/混乱。](http://www.php.net/manual/en/language.types.string.php#language.types.string.substr) `$string{2}`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T01:39:57.843

唯一的歧义是，如果您期望一个数组，但实际上有一个字符串，`$var[0]`则会给您字符串的第一个字节而不是第一个数组元素。这可能会导致很多人摸不着头脑，想知道为什么 PHP 只给你第一个字符而不是整个数组元素。对于像这样的非数字索引更是如此`$var['foo']`，如果它是一个字符串，它实际上是有效`$var`的（是的，请不要问）。即，如果您的程序一开始就出错，它可能会使调试更加困难。

正确的程序没有歧义，因为变量不能同时是字符串和数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T01:49:13.590

由于字符串偏移量和数组偏移量之间的歧义导致的许多问题已随着 5.4 中的更改（在您的参考发布日期之后）被删除。 [http://php.net/manual/en/migration54.incompatible.php](http://php.net/manual/en/migration54.incompatible.php)

出于这个原因，我建议 [] 用于新代码中的字符串偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T01:47:45.073

好吧，我已经用这段代码测试了一些变量：

```
<pre><?php 

dumpling(array("php"));
dumpling(array());
dumpling(0);
dumpling(1);
dumpling(TRUE);
dumpling(FALSE);
dumpling(NULL);
dumpling("php");

function dumpling($var){
    var_dump($var[0]);
    var_dump($var{0});
}

?> 
```

这两者之间似乎没有任何区别。

输出是：

```
string(3) "php"
string(3) "php"
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
string(1) "p"
string(1) "p" 
```

# ruby-on-rails - Pjax 仅在选定页面上工作

> ID：10467412
> 
> 赞同：1
> 
> 时间：2012-05-06T01:34:59.237
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, pjax

我之前在这里看到过这个问题，但无法使用建议的解决方案来解决我的问题。基本上我已经为我正在开发的网站实现了 rails pjax gem，但是它只适用于某些内容。主页和初始级别的链接不会以 pjax-y 方式加载，但是每个后续页面都会这样做。

这是为该站点声明产量的唯一地方。

```
<!DOCTYPE html>
    <html>
    <head>

      <title>MyWellbeing.org - What's on your mind?</title>
      <%= stylesheet_link_tag "application" %>
      <%= raw "<link href='http://#{request.env["HTTP_HOST"]}/sites/site_styles.css'  media='screen' rel='stylesheet' type='text/css' />" %>
      <%= javascript_include_tag "application" %>
      <%= csrf_meta_tags %>

    </head>
    <body>

      <div class="container">
        <div id="clicked_off_div" class="display_none"></div>

        <%= render 'articles/shared_article_header' %>
        <%= render 'articles/logged_in' if user_signed_in? %>

        <div data-pjax-container>
          <%= yield %>
        </div>

        <%= render 'articles/shared_footer' %>

      </div>

      <%= render 'shared/google_analytics' %>

    </body>
    </html> 
```

这是工作网站的链接[http://core.giffordteam.com](http://core.giffordteam.com)编辑：推送到现场

任何关于此事的指示将不胜感激。一些（但不是全部）页面是如何工作的，这非常令人困惑。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T10:02:25.357

我设法通过删除 div 的 onclick 功能并将其放在单独的锚标记中来解决此问题。然后我删除了 pjax 调用的默认超时

> $.pjax.defaults.timeout = false；

这些结合起来解决了这个问题。

在整个过程中，我在 Firefox 中使用了 Firebug，并在控制台中打开了 Persist。这更好地表明了某些页面上的一致失败，以及当页面没有失败时数据应该是什么样子。

非常感谢 Sean Hogan 帮助我解决这个问题。特别是使用 Firebug 进行调试。

# java - isSelected() 无法识别 JRadioButton 并选择了 JCheckBox

> ID：10467414
> 
> 赞同：1
> 
> 时间：2012-05-06T01:35:13.970
> 
> 标签：java, jpanel, jradiobutton

我是新来的，这是我的第一篇文章。

我非常需要编写这个非常简单的应用程序，只调用 isSelected() 方法来检查是否选择了 JRadioButton 或 JCheckBox。这意味着我不想遍历 ButtonGroup 并调用它的 getSelection() 方法。

我的代码也与 Tony Gaddis 编写的教科书中的代码相同，我目前正在从中学习：*从 Java 开始*，*从控制结构到对象*。*第 4 版*。

这是一个**逻辑问题**，因为应用程序编译和运行没有错误。

这是发生了什么：

我有四个类：BagelsPanel、CoffeePanel、ToppingsPanel 和 GUI 类 BagelApp -**除了**扩展 JFrame 的 BagelApp 类之外，所有这些都扩展了 JPanel。

该应用程序的目的是让用户制作咖啡、百吉饼和配料选择，并返回他们所有选择的总价格。问题是它不断返回 0.00 美元。

我的怀疑是，由于某种原因， isSelected() 没有识别出某些东西被选中。

我将在下面发布涉及这些问题的 BagelsPanel 和 GUI 类代码：

```
public double calcBagel() {

    double total = 0.00;

    if(button1.isSelected())
        total = PLAIN;
    else if(button2.isSelected()) 
        total = WHOLE_WHEAT;
    else if(button3.isSelected()) 
        total = CINNA_RAISON;
    else if(button4.isSelected()) 
        total = EVERYTHING;

    return total;
} 
```

以上是 BagelsPanel 类中的 calcBagel() 方法，该方法调用 isSelected() 方法来检查选择了哪个 JRadioButton，然后**将**其价格分配给总计。下面是 GUI 类：

```
public void buildPanel() {

    panel = new JPanel();
    calc = new JButton("Calculate");
    calc.addActionListener(new ButtonListener());
    panel.add(calc);
}
private class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        double subtotal = 0.0;
        double total = 0.0;
        bagels = new BagelPanel();
        coffee = new CoffeePanel();
        toppings = new ToppingsPanel();

        subtotal = bagels.calcBagel() + coffee.calcCoffee() +
                    toppings.calcToppings();
        double tax = subtotal * TAX;
        total = subtotal + tax;

        DecimalFormat dollar = new DecimalFormat("$0.00");

        JOptionPane.showMessageDialog(null, "Your total is: " 
                    + dollar.format(total));    
    }
} 
```

这里有一些见解：如果我在 BagelsPanel 类中的 calcBagel() 方法中将双变量总计更改为 1.0，然后运行应用程序并单击 JRadioButton“计算”，它会准确地支撑一个 JOptionPane，告诉我我的总计是$1.06（最终双变量 TAX 设置为 0.06）。

我真的很感激我能得到的任何帮助。我仍然是 Java 的初学者，不太明白为什么我的逻辑不正确。我很尴尬，这可能是非常微不足道的，但我已经检查了这本书并且代码是相同的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:17:23.797

您的问题就在这里，在您的`actionPerformed`方法中：

```
 double total = 0.0;
    bagels = new BagelPanel();
    coffee = new CoffeePanel();
    toppings = new ToppingsPanel(); 
```

您不是在显示的面板上调用方法，而是`calcBagel(), calcCoffee(), calcToppings()`在无处创建新面板并在它们上调用“计算方法”。当然，它们是用户在 UI 中操作的对象的不同对象。您应该保留对最初添加到 GUI 的面板的引用，并在这些面板上调用“计算方法”，而不是在新创建的对象上调用。

PS：您的代码确实混合了模型和视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:45:23.063

如果没有真正的[SSCCE](http://www.sscce.org)，这有点难以回答，但我会这样做：使用我最喜欢的 IDE（在我的例子中是[Netbeans](http://netbeans.org/)），我会在开始时设置一个断点`calcBagel()`并逐行执行代码使用调试器确保设置了变量。

或者，您可以执行以下操作：

```
public double calcBagel() {
    System.out.println("In calcBagel()");
    double total = 0.00;

    if(button1.isSelected()) {
        System.out.println("button1 is selected! Setting total to " + PLAIN);
        total = PLAIN;
    }
    else if(button2.isSelected())  {
        System.out.println("button2 is selected! Setting total to " + WHOLE_WHEAT);
        total = WHOLE_WHEAT;
    }
    else if(button3.isSelected())  {
        System.out.println("button3 is selected! Setting total to " + CINNA_RAISON);
        total = CINNA_RAISON;
    }
    else if(button4.isSelected())  {
        System.out.println("button4 is selected! Setting total to " + EVERYTHING);
        total = EVERYTHING;
    } else {
        System.out.println("No buttons were selected!");
    }
    System.out.println("total = " + total);
    return total;
} 
```

这也是了解您的方法发生了什么的好方法。您的问题也很容易根本不在此方法中。但这将是一种找出答案的方法。

# jquery - jquery中的'fx'队列如何自动启动？

> ID：10467419
> 
> 赞同：5
> 
> 时间：2012-05-06T01:36:34.620
> 
> 标签：jquery

我已经阅读了关于 jQuery 队列的许多答案和博客文章......特别是这个特定的答案有很大帮助 - [https://stackoverflow.com/a/3314877/1315811](https://stackoverflow.com/a/3314877/1315811)。但是，jquery.com 上的标准文档和上面的答案都让我查看了 jquery 代码[http://code.jquery.com/jquery-1.7.2.js](http://code.jquery.com/jquery-1.7.2.js)

我无法理解 - 从代码中 - 'fx'（默认）队列如何自动启动。尤其是在队列被清空之后。

例如在自定义队列上，当您手动启动队列时，队列用完了要调用的函数，对队列的任何引用都不再无效，所以我希望在 jquery 代码中的某个地方尝试找出状态队列，如果它是空的自动启动它？该代码有点演示了我遇到的情况，如果我只是缺少一段代码（我在上面提到的代码中查看行：2060-2160），请告诉我。

```
> var aq = $({});
> aq.queue("mp").length
0
> n1 = aq.queue("mp")
[]
> n1.length
0
> aq.queue("mp", function (next) { setTimeout(next, 5000); })
[Object]
> aq.queue("mp", function (next) { setTimeout(next, 5000); })
[Object]
> aq.queue("mp", function (next) { setTimeout(next, 5000); })
[Object]
> n1.length
0
> aq.queue("mp").length
3
> n1 = aq.queue("mp"); // reset n1 to the "new" queue...
> n1.length
3 
```

另外，如果其中任何部分不清楚，请告诉我，我会相应地更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:17:57.893

代码中的这段`queue`代码处理自动启动：

```
if ( type === "fx" && queue[0] !== "inprogress" ) {
    jQuery.dequeue( this, type );
} 
```

如果正在排队`fx`的队列是并且队列尚未在进行中，`dequeue`则调用。

# git - Git 保存和恢复

> ID：10467421
> 
> 赞同：0
> 
> 时间：2012-05-06T01:36:50.467
> 
> 标签：git

我刚刚破坏了我的代码库。我想回滚到我的最后一次提交，但我想先保存损坏的版本，以便以后分析。在这种情况下最好的课程是什么？

（我实际上并没有尝试过任何东西，只是想找点手——这是漫长的一天，我不想把这件事搞砸..）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:42:05.493

您可以做几件事：

最有可能你要做的最好的事情是创建一个单独的分支来提交这个损坏的代码，然后提交到那个分支。

```
git checkout -b my-broken-branch # creates a new branch called my-broken-branch
# commit as usual...
git checkout - # return to the last branch you were on 
```

当您想返回该代码时，请执行 a`git checkout my-broken-branch`切换到该分支。

* * *

您可以做的一件快速的事情是`git stash`，这将保存您的工作，您可以稍后重新应用它：

```
git stash 
```

当您想要取回这些更改时，您可以执行一个`git stash apply`将应用您隐藏的最后更改（但将信息保留在隐藏列表中）的操作。

正如 Andrew 在评论中提到的那样，您也可以这样做`git stash pop`，这将应用最少的隐藏更改，并将其从隐藏列表中删除。

存储可以做更多事情，因为您可以执行多个存储并有选择地应用它们。

当您想更深入地了解存储时，这里有一个更详细的解释：http: [//gitready.com/beginner/2009/01/10/stashing-your-changes.html](http://gitready.com/beginner/2009/01/10/stashing-your-changes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T01:42:52.797

将 git repo 重置为 certian 提交：

```
git reset --hard <tag/branch/commit id> 
```

要保存当前版本，只需在重置回旧版本之前将其提交到 repo

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T01:42:38.223

您可以使用此损坏的代码进行提交或新分支。之后，检查您的工作代码。

```
git log -1 
```

记下提交名称（sha 代码 - 可以是前 7 个字符）。为损坏的代码创建一个新分支

```
git checkout -b broken
git add -A
git commit -m "Broken code" 
```

返回您的分支并检查您的工作代码：

```
git checkout featureX
git checkout abc1234 
```

另一种方法是存储您的更改并检查您的代码。之后，您可以存储弹出文件以使用它们。

# c++ - 如何使用 OO 在 C++ 中为 kdtree 实现一组键

> ID：10467429
> 
> 赞同：0
> 
> 时间：2012-05-06T01:39:53.070
> 
> 标签：c++, tree, kdtree

我需要实现一个适合作为*k* -d 树的 B+ 树。作为对此的简短解释，*k* -d 树就像一棵二叉树，只是在它的节点处它有一个多值键，即具有多个值的键。它也将是 B+ 树，因为内部节点仅用于存储键的 1 个值，而实际数据存储在叶节点处。这是一个简短的图形解释：

![简短的图形解释](../Images/1f058fea504716e1f76c83c8033a8351.png)

我的叶节点有 2 个元素的空间，当我添加前 2 个时一切正常，直到我添加第三个并且我必须进行拆分。为此，由于我选择键的第一个值作为定义顺序的值，因此我取所有三个元素的中值，结果为 27，因此所有小于 27 的元素都向左移动，大于或等于向右走。

当我添加第 4 个元素时，由于 Tom 和 Linda 的年龄小于 27 岁，他们已经完成了一个叶节点，儿子添加 Dom 使节点再次分裂，但是这次我必须切换键的哪个值定义顺序是 Social安全号码。我再次取中间值，结果为 530，因此所有 SS 编号小于 530 的人都向左移动，依此类推。

结果是最终的*k* -d 树，其中某些键值作为内部节点的索引，而完整的键位于叶节点。

现在我的问题是，在解释了上下文之后，我该如何为键实现解决方案，因为我确实必须在叶节点存储完整的键，但在内部节点我只使用键的值之一.

您可以注意到与数据库的相似之处，其中我们有多个带值的字段，我们可以同时使用不同的字段对信息进行排序，一个比下一个更重要，依此类推。

我想用包含所有值的属性创建一个`class`命名`Key`或任何其他名称，对于上面的示例，它可以是`int`年龄、`int`SSNumber 和`string`名称。但我的问题是，如果我的客户决定他想增加更多的价值，那么我的班级会越来越大。这是一个好的 OO 决定吗？我可以用另一种方式实现它并且仍然是 OO 吗？我知道我的想象力可能很差，但是由于我可以假设客户想要更多的值，我可以制作某种包含我的值的列表，那么这意味着我必须制作一个可以支持任何类型数据的列表，这不听起来不像是面向对象的方法。有任何想法吗？

另外我想补充一点，因为在我的树算法的某个时刻，我需要将键的 1 个属性用作树中的索引，所以我也必须支持这一点。

我真的很感激如何通过遵循 OO 方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:03:26.987

制作一个`Key`数组`KeyPart`，然后每种类型的键值（年龄，ss#）都可以从`KeyPart`. 然后你的树的每个内部节点都可以存储一个单独的`KeyPart`和一个关键部分的索引（知道它是哪个部分的拆分）。叶子可以储存满`Key`。

# php - php多图像上传脚本不上传一些图像文件

> ID：10467435
> 
> 赞同：1
> 
> 时间：2012-05-06T01:41:11.727
> 
> 标签：php, image, upload, image-uploading

我有一个多图像上传脚本，它调整图像大小并创建缩略图。出于一些奇怪的原因，一些图像确实没有。在这种情况下，图像尺寸很小，并且是 JPEG 类型的文件。由于某种原因，它没有通过。它与其他图像完美配合。我对单个文件使用相同的脚本，它会上传该图像文件。请帮忙！谢谢！

```
<?php require_once("../includes/connection.php"); ?>
<?php require_once("../includes/functions.php"); ?>
<?php 
$albumName = $_GET['album'];
$albumDate = $_GET['date'];
$albumId = $_GET['id'];
$upload_path = "/home/elevat17/public_html/images/gallery/"; //location
$images = $_FILES['userFile']['name'];
$temps = $_FILES['userFile']['tmp_name'];
$types = $_FILES['userFile']['type'];
$errors = $_FILES["userFile"]["error"];
if ($_FILES["userFile"]["name"]=="") {echo "You must choose a file to upload!";}
if(in_array("", $images)) {die('Select an image to upload.');}

else

{
for ($n=0; isset($images[$n]) && isset($temps[$n]) && isset($types[$n]) && isset($errors[$n]); $n++) {
if ((($types[$n] == "image/gif")

|| ($types[$n] == "image/jpeg")

|| ($types[$n] == "image/pjpeg")

|| ($types[$n] == "image/png")

|| ($types[$n] == "image/jpg")

|| ($types[$n] == "image/x-png")))

{

if ($errors[$n] > 0)

{

$content =  "Return Code: " . $errors[$n] . "<br />";

}

else

{

$content =  "Upload: " . $images[$n] . "<br />";

$content =  "Type: " . $types[$n] . "<br />";

$content =  "<br/><br/>";

if (file_exists($upload_path . $images[$n]))

{

die($images[$n].' already exists. Upload cancelled!');

}

else

{

$uploadedfile = $temps[$n];

$image = $images[$n];

$size = getimagesize($uploadedfile);

$type = $size['mime'];

$width = $size[0];

$height = $size[1];

if($height > '900' || $width > '600')

{ 

$newwidth=600; // NEW WIDTH 

$newheight=($height/$width)*$newwidth;

$tmp=imagecreatetruecolor($newwidth,$newheight);

$filename = $upload_path.$image;

if($size[2] == IMAGETYPE_GIF)

    {

        $src = imagecreatefromgif($uploadedfile);

        imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

        imagegif($tmp,$filename,100);

    }

elseif($size[2] == IMAGETYPE_JPEG)

    {

        $src = imagecreatefromjpeg($uploadedfile);

        imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

        imagejpeg($tmp,$filename,100);

    }

elseif($size[2] == IMAGETYPE_PNG) 

    {

        $src = imagecreatefrompng($uploadedfile);

        imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

        imagepng($tmp,$filename,9);

    }
crop_img(75,75);
move_uploaded_file($uploadedfile, $filename);
imagedestroy($src);

imagedestroy($tmp);

}

else

{      

}
$query = "INSERT INTO photos (photo_name, in_album) VALUES ('{$image}', $albumId)";
            if (mysql_query($query)) {header("location: edit_album.php?id={$albumId}");}

}

}

}

else { $content     =  "Invalid file"; }

}

}

?>
<?php require("../includes/footer.php"); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:12:21.103

您没有检查上传是否成功并且假设它已经成功。这是编写代码的一种不好的方式。上传成功只有**一种方法，****失败**的方法有很多种。

您还假设进行上传的人没有恶意，并且不会在上传之前简单地将其重命名`nastyvirus.exe`为`cutekittens.jpg`。

至少，你需要有

```
if ($_FILES['userfile']['error'] !== UPLOAD_ERR_OK) {
    die('Upload failed with error code ' . $_FILES['userfile']['error']);
} 
```

以确保您确实有一些有用的东西可以使用，然后使用[http://php.net/fileinfo](http://php.net/fileinfo)之类的东西让服务器确定文件的类型。

永远不要相信用户发送给您的内容。

# php - （新手帖）PHP 下拉列表，将下拉列表中的值插入数据库

> ID：10467444
> 
> 赞同：1
> 
> 时间：2012-05-06T01:43:50.307
> 
> 标签：php

有人可以帮我解决这个问题吗，对不起代码中的语言。我试图这样做，当有人选择一个选项并单击将其插入我的数据库中的按钮时，我已经检查了名称是否全部正确等等，它们是。

注意：我没有尝试从我的数据库中选择一个值，进入我的下拉列表，只是为了插入该值，就像一个帐户的申请表一样。

注意：如果有人问过同样的问题，那就太棒了！如果您可以在评论中粘贴链接，谢谢。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<select name="room" value="options">
<option value="Einstaklings" name="102">Alment Einstaklings Herbergi</option>
<option value="Tveggja" name="102">Alment Tveggja manna Herbergi</option>
<option value="Business" name="201">Business Herbergi</option>
<option value="Fjolskyldu" name="301">Fjölskyldu Herbergi</option>
<option value="Svitu" name="401">Svítu</option>
</SELECT>
<input type="submit" value="Senda"/>
</form>

<?php

$db_tengi=@mysql_connect('localhost', 'root', '');
    if (!$db_tengi) {
        exit('<p>Cant Connect</p>');
    };

if(!@mysql_select_db('hotel')){
    exit('<p>Cant Connect</p>');
};

$room = array(
'Einstaklings' => 101,
'Tveggja' =>102,
'Business' => 201,
'Fjolskyldu' =>301,
'Svítu' => 401
 );

function generateSelect($name = '', $options = array()) {
$html = '<select name="'.$name.'">';
foreach ($options as $option => $value) {
    $html .= '<option value='.$value.'>'.$option.'</option>';
}
$html .= '</select>';
return $html;
 }
 $html = generateSelect('room', $room);

 if (
    $sql = "INSERT INTO `registration` SET 
    room_ID_FK='$room'"
    )
    if(@mysql_query($sql)){
        echo '<p> Insert Complete</p>';
    }
    else{
        echo '<p> Error Insert failed.' . mysql_error() . '</p>'; 
    };

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:54:10.373

1）在您的选择中，不要为每个选项命名

```
<select name="room" value="options">
<option value="Einstaklings">Alment Einstaklings Herbergi</option>
<option value="Tveggja">Alment Tveggja manna Herbergi</option>
<option value="Business">Business Herbergi</option>
<option value="Fjolskyldu">Fjölskyldu Herbergi</option>
<option value="Svitu">Svítu</option>
</SELECT> 
```

2）您需要接收您发布的数据，它将在超全局数组 $_POST 中

```
<?php 
   $room = $_POST['room'];
?> 
```

3) 建立连接后，您需要将此数据写入数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T02:01:00.730

不知道我明白了，但我又没有读过冰岛语（或其他什么），但看起来你每次都在函数中声明一个新数组而不是使用 $room ？

尝试更换：

```
function generateSelect($name = '', $options = array()) { 
```

和 ：

```
function generateSelect($name, $options) { 
```

# java - 使用 setAutoCreateRowSorter(true) 时获取列排序顺序？

> ID：10467445
> 
> 赞同：2
> 
> 时间：2012-05-06T01:44:12.820
> 
> 标签：java, swing, sorting, jtable

我有一个`JTable`我设置的地方`table.setAutoCreateRowSorter(true);`。我的主要目标是让一行始终位于顶部，而不管任何列排序顺序如何。我做的第一件事是修改`compareTo`我的单元格数据类型的方法，以便它能够理解一个表示“比其他任何东西都少”的标志，因此始终将该项目排序到顶部。不幸的是，这使得给定的行将始终位于最顶部或*最底部*，具体取决于列的排序顺序。因此，当排序顺序为*降序*时，我需要设置单元格，使其有效值*大于*其他任何值。唯一的问题是我无法弄清楚如何获得列排序顺序。

在[这一页上](http://www.java-forums.org/new-java/27688-sortorder-vs-sortkey.html)，一个建议的答案是

```
if (myTable.getRowSorter().getSortKeys().get(column).getSortOrder == SortOrder.ASCENDING) {
    ...
} 
```

不幸的是，getSortKeys()**总是**返回一个空列表。所以我回到了第一方。我还考虑添加一个 RowSorterListener，但这似乎是一个监听器，用于更改排序器时，而不是更改排序顺序时。

有什么帮助吗？谢谢！

编辑：这是演示我的部分问题的代码。请注意 System.out.println，其结果始终为零。我想获得列的行排序顺序，但似乎不存在。

```
package tablecolumn;

import java.awt.Dimension;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import javax.swing.GroupLayout;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.RowSorter;
import javax.swing.SortOrder;
import javax.swing.table.AbstractTableModel;

public class Tablecolumn extends JFrame {
    JScrollPane scroll;
    JTable table;
    MyTableModel model;

    static String[] columnnames = new String[] {"A", "B", "C"};

    public class MyTableModel extends AbstractTableModel {
        public List<List<String>> entries;

        MyTableModel() {
            entries = new ArrayList<List<String>>();
            for (int i=0; i<5; i++) {
                List<String> cols = new ArrayList<String>();
                cols.add("X" + i);
                cols.add("Y" + i);
                cols.add("Z" + i);
                entries.add(cols);
            }
        }

        @Override
        public int getRowCount() {
            return entries.size();
        }

        @Override
        public int getColumnCount() {
            return columnnames.length;
        }

        @Override
        public Object getValueAt(int r, int c) {
            List<? extends RowSorter.SortKey> rsk = table.getRowSorter().getSortKeys();
            System.out.println(rsk.size());
            return entries.get(r).get(c);
        }

        @Override
        public Class getColumnClass(int c) { 
            return String.class; 
        }

        @Override
        public String getColumnName(int c) { return columnnames[c]; }        

        @Override
        public boolean isCellEditable(int row, int col) { return false; }

    }

    public Tablecolumn() {
        scroll = new JScrollPane();
        model = new MyTableModel();
        table = new JTable();

        table.setModel(model);
        table.setAutoCreateRowSorter(true);
        table.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_ALL_COLUMNS);
        table.getTableHeader().setReorderingAllowed(false);
        table.setColumnSelectionAllowed(false);
        table.setRowSelectionAllowed(true);

        scroll.setViewportView(table);

        scroll.setMinimumSize(new Dimension(200, 200));
        scroll.setPreferredSize(new Dimension(800, 600));

        GroupLayout layout2 = new GroupLayout(this.getContentPane());
        this.setLayout(layout2);
        layout2.setVerticalGroup(
            layout2.createSequentialGroup()
                .addComponent(scroll)
        );
        layout2.setHorizontalGroup(
            layout2.createParallelGroup()
                .addComponent(scroll)
        );               

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        pack();
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Tablecolumn().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:06:13.183

1）您的问题很简单，无法回答，因为您忽略了重复发布[SSCCE的要求](http://sscce.org/)

2）例如

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.RowSorter.SortKey;

class SelectedColumnTest {

    private JTableHeader header;
    private Object selectedColumn = null;
    private String[] columnNames = {"String", "Integer", "Boolean"};
    private Object[][] data = {{"aaa", 12, true}, {"bbb", 5, false}, {"CCC", 92, true}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };
    private JTable table = new JTable(model);

    public JComponent makeUI() {
        table.setRowSorter(new TableRowSorter<TableModel>(model) {

            @Override
            public void toggleSortOrder(int column) {
            }
        });
        header = table.getTableHeader();
        header.getActionMap().put("toggleSortOrder2", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                e.setSource(table);
                table.getActionMap().get("focusHeader").actionPerformed(e);
                if (selectedColumn != null) {
                    int i = header.getColumnModel().getColumnIndex(selectedColumn);
                    SortOrder order = SortOrder.ASCENDING;
                    List<SortKey> keys = new ArrayList<SortKey>(table.getRowSorter().getSortKeys());
                    if (!keys.isEmpty()) {
                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == i && sortKey.getSortOrder() == SortOrder.ASCENDING) {
                            order = SortOrder.DESCENDING;
                        }
                    }
                    table.getRowSorter().setSortKeys(Arrays.asList(new SortKey(i, order)));
                }
                header.repaint();
            }
        });
        InputMap im = header.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_F8, 0), "toggleSortOrder2");
        header.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                JTableHeader h = (JTableHeader) e.getSource();
                int i = h.columnAtPoint(e.getPoint());
                Object o = h.getColumnModel().getColumn(i).getHeaderValue();
                if (i < 0 || o == selectedColumn) {
                    selectedColumn = null;
                    return;
                }
                selectedColumn = o;
                h.requestFocusInWindow();
            }
        });
        final TableCellRenderer hr = table.getTableHeader().getDefaultRenderer();
        header.setDefaultRenderer(new TableCellRenderer() {

            @Override
            public Component getTableCellRendererComponent(JTable t, Object v,
                    boolean isS, boolean hasF, int row, int col) {
                return (v == selectedColumn) ? hr.getTableCellRendererComponent(
                        t, v, true, true, row, col) : hr.getTableCellRendererComponent(
                        t, v, false, false, row, col);
            }
        });
        header.setToolTipText("Sorting by F8");
        JPanel p = new JPanel(new BorderLayout());
        p.add(new JScrollPane(table));
        return p;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.getContentPane().add(new SelectedColumnTest().makeUI());
        f.setSize(320, 240);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

3）在您使用 SSCCE 编辑问题的那一刻，准确地展示了您的问题，然后我会看一下

4) 没有比[Darryl 的 Multisort Table Header Cell Renderer更好的了](http://tips4java.wordpress.com/2010/08/29/multisort-table-header-cell-renderer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:06:10.927

我认为问题在于，如果您使用`table.setAutoCreateRowSorter(true);`，则有一个错误会导致`myTable.getRowSorter().getSortKeys()`始终返回一个空列表。另一方面，如果您添加自己的行排序器，那么它就可以工作。

我需要添加此代码：

```
RowSorter<MyTableModel> sorter =
    new TableRowSorter<MyTableModel>(model);
table.setRowSorter(sorter); 
```

现在，`getSortKeys()`将返回列列表及其排序顺序。该列表是可变长度的，具体取决于您单击了哪些列，因此您必须遍历列表查看`myTable.getRowSorter().getSortKeys().get(index).getColumn()`and `myTable.getRowSorter().getSortKeys().get(index).getSortOrder()`，其中后者包含`SortOrder.ASCENDING`or的值`SortOrder.DESCENDING`。

# windows - 关于结构 SECURITY_ATTRIBUTES

> ID：10467451
> 
> 赞同：2
> 
> 时间：2012-05-06T01:45:43.013
> 
> 标签：windows, handle, inheritance

看了[http://msdn.microsoft.com/en-us/library/windows/desktop/aa379560(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379560(v=vs.85).aspx)，我不是很了解bInheritHandle的作用。其表述为：“一个布尔值，指定创建新进程时是否继承返回的句柄。如果此成员为 TRUE，则新进程继承句柄。” 继承？这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-24T02:48:52.370

在 Windows 中创建内核对象（如进程、线程、事件）时，您可以指定子进程在创建新进程时是否可以继承对象句柄。假设您有一个流程`A`，它调用 CreateEvent 来创建一个事件。手柄只能在内部使用`A`。现在，当通过 CreateProcess`A`创建新进程时`B`，您可以指定是否`B`也可以访问事件对象。如果要`B`访问该对象，则必须`bIneritHandles`在 CreateProcess 参数中设置为 TRUE **，**并使每个对象都可以通过 SECURITY_ATTRIBUTE 继承`bInheritHandle`。在这种情况下，您必须将 SECURITY_ATTRIBUTE 传递`bInheritHandle=TRUE`给 CreateEvent 调用。

# session - 使用非连接默认会话存储有什么好处？

> ID：10467458
> 
> 赞同：5
> 
> 时间：2012-05-06T01:46:49.663
> 
> 标签：session, node.js, redis, express

对于快速应用程序，我已经看到有一个 connect-mongodb 和 connect-redis 中间件用于存储会话，但我不明白为什么这是必要的 - 默认的内存会话存储有什么问题？是否适用于需要跨多台机器同步会话的大型应用程序？

此外，任何人都可以为最快的会话存储提供任何基准/提示吗？我的猜测是 Redis，因为它更简单的键/值存储。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T02:05:59.240

将会话数据存储在数据库（MongoDB、Redis 等）中的唯一原因是，它可以跨 Node 进程使用，并且可以跨故障保持持久。在横向扩展架构中，非常希望拥有无状态服务器，这样无论特定用户连接到哪个服务器，一切都可以正常工作，并且服务器可以在不丢失任何状态的情况下上下移动。

换句话说，假设您在处理传入请求的负载均衡器后面有 10 台服务器。用户 1 发出服务器 A 处理并登录的请求。您需要存储他们已登录的事实，以便将其存储在会话中。下一个请求最终被路由到服务器 C，因为服务器 A 正忙于另一个请求。为了让服务器 C 知道用户已经登录，它需要会话数据。那么它如何访问服务器 A 存储的会话数据呢？

一种方法是将数据存储在客户端的 cookie 中，该 cookie 随每个请求一起提交，但这不是很安全。另一种方法是尝试在 Node 服务器之间同步状态，这可以做到，但成本高且容易出错。最简单的方法是将会话 ID 存储在 cookie 中，然后将实际会话数据存储在数据库中。然后每个节点服务器都可以访问相同的数据库，以便他们可以查找会话数据。通过这种方式，您可以轻松地扩展和扩展 Node 服务器，并在服务器出现故障时对它们进行负载平衡，而不会丢失任何数据。

在性能方面，内存存储将是最快的（但有上述缺点）。Redis 将是第二快的，而 MongoDB 将是最慢的（通常比 Redis 慢 4 倍左右）。请记住，对于绝大多数网站来说，任何一个都足够快。

# python - 蟒蛇瓶挂起

> ID：10467462
> 
> 赞同：2
> 
> 时间：2012-05-06T01:47:56.730
> 
> 标签：python, python-2.7, bottle

所以我刚刚拿到了瓶子（通过他们只有代码的页面[我认为它是 github？]）无论如何，我已经启动并运行了服务器，但是，当我按下 ctrl+c 时它有时不会立即中断，我想知道如果我做错了什么？我的代码如下：

这是我的服务代码：

```
from Bottle import route,run,template

@route('/')
@route('/<name>')
def hello(name='noob'):
    return template('Templates/maintemplate',name=name)
run(host='WorkPC-PC',port=9999,debug=True) 
```

这是我的模板代码（虽然我不认为这有什么不同，但我将其包括在内以确保）：

```
<html>
<head>
<body>
%if name:
    <h1>{{name}}</h1>
%else:
    <h1>hello stranger</h1>
%end
</body>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:46:22.523

它根本没有终止，还是只需要一两秒钟才能停止？如果只需要几秒钟，它可能正在运行多个线程并等待它们全部关闭。我用 pip 安装的版本尝试了您的代码，但无法复制您的问题。

# google-analytics - 减少点击次数以获得所需内容的可能方法

> ID：10467464
> 
> 赞同：0
> 
> 时间：2012-05-06T01:48:09.833
> 
> 标签：google-analytics

我需要多次点击鼠标（以及中间的等待时间才能获得我想要点击给定国家/地区的下一个 Google Analytics（分析），然后点击更多国家/地区内的城市。

我查看了他们的自定义报告选项卡，我必须承认我发现它很混乱。我曾两次尝试使用它来获得我想要的东西，但两次都失败了。

现在，如果我必须继续努力并试图得到我想要的，那就这样吧。但是，在花费那种时间之前，我希望这里有人可以告诉我：是的，可以做到，或者不，你真的做不到。

我每次做的是：

3 点击获取日期。我只对查看前一天的数据感兴趣。

然后单击第一个国家（最终在国家列表中）。

然后点击该国的第一个城市（最终在城市列表中）。

然后点击内容。

然后点击页面。

然后点击页面标题。

那么，自定义报告是要走的路还是有另一种方法？

提前感谢您提供的任何帮助。将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:41:42.160

是的，自定义报告可以每次都为您设置，但是当您深入研究后，您可以通过电子邮件安排该报告给您吗？可能是一种更快/更简单的方法。

# c# - 以拳击般的方式召集代表

> ID：10467467
> 
> 赞同：3
> 
> 时间：2012-05-06T01:48:47.293
> 
> 标签：c#, .net, delegates, convention, invocation

我经常看到委托调用的代码示例如下：

`

```
 public delegate void DelegateThreadActivity<T, U> (T sender, U e);

    public event DelegateThreadActivity<Thread, System.EventArgs> OnStart = null;
    public event DelegateThreadActivity<Thread, System.EventArgs> OnStop = null;

    // Helper method for invocation.
    public void RaiseOnStart ()
    {
        DelegateThreadActivity<Thread, System.EventArgs> instance = null;

        try
        {
            instance = this.OnStart;
            // OR
            instance = (DelegateThreadActivity) (object) this.OnStart;

            if (instance != null)
            {
                instance(this, System.EventArgs.Empty);
            }
        }
        catch
        {
        }
    } 
```

`

为什么要使用该`[instance]`对象？起初我认为这是公司惯例，但也看到经验丰富的开发人员这样做。有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T01:52:46.600

这样做是因为线程安全，并且在委托轮流的情况下防止异常引发`null`。

考虑这段代码：

```
if (this.OnStart != null)
{
  this.OnStart(this, System.EventArgs.Empty);
} 
```

在 的执行`if`和 的执行之间`this.OnStart`，`OnStart`委托可能已被操纵（可能更改为`null`，这将导致异常）。

在您在问题中提供的表格中，执行时会制作并使用委托的副本。原始委托中的任何更改都不会反映在副本中，这将防止出现异常。但是这样做有一个缺点：由于在此期间的任何更改都不会反映在副本中，其中还包括任何非`null`状态，这将导致调用已删除的委托或不调用最近添加到其中的委托。

# python - python列表理解：返回字符串列表而不是列表列表

> ID：10467468
> 
> 赞同：3
> 
> 时间：2012-05-06T01:48:56.353
> 
> 标签：python, list-comprehension

对于家庭作业，我们需要创建一个函数，该函数接受两个输入（列表和字符串）并返回一个列表。我想使用列表理解来编写这个函数，但是遇到了一个烦人的问题。这是我想重写的原始函数：

```
index = [['keyword1', ['url1', 'url2', 'url3']], ['keyword2', ['url4', 'url5']]...]

def lookup(index, keyword):
    result = []
    for entry in index:
        if entry[0] == keyword:
            result += entry[1]
    return result 
```

这些是我使用列表理解的尝试：

```
def lookup(index, keyword):
    return [entry[1] for entry in index if entry[0] == keyword]

def lookup(index, keyword):
    return [ulist for key, ulist in index if i == keyword] 
```

最后...

```
def lookup(index, keyword):
    return [j for j in (entry[1] for entry in index if entry[0] == keyword)] 
```

这里的问题是它在列表内的列表中返回所需的 url，如下所示：

```
[['url1', 'url2', 'url3']] 
```

而不是所需的格式：

```
['url1', 'url2', 'url3'] 
```

我想做这样的事情（在 return 语句的末尾添加 [0] 以便它给我内部列表）：

```
def lookup(index, keyword):
        return [j for j in (entry[1] for entry in index if entry[0] == keyword)][0] 
```

但这似乎不是正确的方法。我是否试图不必要地使用列表理解（我的理解是这种情况非常适合列表理解）？有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T02:02:55.183

这将是最直接的方法：

```
def lookup(index,keyword):
    return [x for entry in index if entry[0]==keyword for x in entry[1]] 
```

嵌套列表理解语法可能不是您最初所期望的。关键是要意识到使用两个 for 循环不是两个单独的列表推导，而是一个带有嵌套循环的列表推导。这实际上就是它起作用的原因。就像你在写

```
for entry in index:
  if entry[0]==keyword:
    for x in entry[1]:
      yield x 
```

列表推导中的顺序与常规循环中的顺序相同，但产生的值位于第一位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T02:02:21.327

您应该改用字典，因为它的 API 更自然地适合谈论（和快速处理）与地图相关的事情。

```
keywordToUrl = {keyword1:(url1,url2,url3), keyword2:(url4,url5), ...}
keywordToUrl[keyword] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:32:28.130

```
def lookup(index, keyword):
    return sum((entry[1] for entry in index if entry[0] == keyword), []) 
```

例子：

```
>>> index = [['keyword1', ['url1', 'url2', 'url3']], ['keyword2', ['url4', 'url5']]]
>>> lookup(index, 'keyword1')
['url1', 'url2', 'url3'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T01:54:15.247

```
def lookup(index,keyword):
    return [j for j in (entry[1] for entry in index if entry[0] == keyword)] 
```

问题是你在括号内返回了一些东西，因此你的值被返回到一个列表中，删除括号并解决问题。

这将是正确的代码：

```
def lookup(index,keyword):
    return j for j in (entry[1] for entry in index if entry[0] == keyword) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T02:31:00.113

对于之前的不便，我深表歉意。我已经测试了您的代码，如果您查看索引列表，您的值并不统一：

```
index = [['keyword1', ('url1', 'url2', 'url3')], ['keyword2', ['url4', 'url5']]...] 
```

这里`index[0][1]`有一个元组和`index[1][1]`一个列表。

如果您在索引内创建列表的所有第二个值，则会发生以下情况：

这是与您的代码相同的代码：

```
index = [["keyword1", ("url1", "url2", "url3")], ["keyword2", ("url4", "url5")]]
def lookup(index, keyword):
    return [entry[1] for entry in index if entry[0] == keyword]

print lookup(index,"keyword1") 
```

这是输出：

```
[('url1', 'url2', 'url3')] 
```

您会注意到这不是列表中的列表，因为`index[i][1]`现在所有值都是元组。

如果你想要这个输出：

```
['url1', 'url2', 'url3'] 
```

您需要将该元组转换为列表，Python 不会自动为您提供该列表。如官方文档中所述，列表推导总是返回一个列表，这就是元组在列表中的原因。

[http://www.python.org/dev/peps/pep-0202/](http://www.python.org/dev/peps/pep-0202/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-02T08:04:55.503

让我们举个例子：当我给出一个字母和一个列表时，返回函数将给出列表中以该字母开头的名称。

```
def abc(letter , nameslist):
    return [name for name in nameslist if name[0].lower() == letter.lower() ]

nameslist = ["Sou", "Soudipta", "Gini", "Protijayi", "Gina"]

print( abc("P",nameslist) ) 
```

# java - 令牌“-”上的语法错误，无效的 AssignmentOperator

> ID：10467471
> 
> 赞同：2
> 
> 时间：2012-05-06T01:49:58.333
> 
> 标签：java, user-interface, math

```
for (int iI = 4; iI > 0; iI--)
  faAmount[iI] - faAmount[iI - 1]; 
```

这是它所在的代码。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T01:51:17.930

也许你忘记了等号

```
for (int iI = 4; iI > 0; iI--) 
    faAmount[iI] -= faAmount[iI - 1]; 
```

或分配变量中的差异

```
double x = 0; //or another value
for (int iI = 4; iI > 0; iI--) 
    x = faAmount[iI] - faAmount[iI - 1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T02:45:17.520

技术解释是这`faAmount[iI] - faAmount[iI - 1]`是一个表达式，但不是一个陈述。[JLS 指出](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.8)

> 与 C 和 C++ 不同，Java 编程语言只允许将某些形式的表达式用作表达式语句。

加法表达式不是那些也是语句的表达式之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T01:52:15.647

`faAmount[iI] - faAmount[iI - 1]`是有结果的 n 表达式，但你没有将它分配给任何东西，这在 Java 中是无效的。

# c++ - 如何修复此错误：#include “无法打开源文件 gl/glut.h”

> ID：10467473
> 
> 赞同：23
> 
> 时间：2012-05-06T01:50:07.903
> 
> 标签：c++, opengl, vector, matrix

我正在用 C++ 进行一些 OpenGL 编程。

这是我的代码的一部分：

```
#include <time.h>
#include <windows.h>
#include <gl/gl.h>
#include <gl/glu.h>
#include <gl/glut.h> <<< Error here "Cannot open source file gl/glut.h" 
```

我怎样才能解决这个问题？

编辑：我正在使用 Microsoft Visual C++ Express Edition。抱歉忘了提

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-06T01:52:59.553

你可能还没有安装 GLUT：

1.  安装 GLUT 如果您的机器上没有安装 GLUT，您可以从以下网址下载它： [http](http://www.xmission.com/~nate/glut/glut-3.7.6-bin.zip) ://www.xmission.com/~nate/glut/glut-3.7.6-bin.zip （或任何版本）GLUT 库和头文件是 • glut32.lib • glut.h

资料来源：[http ://cacs.usc.edu/education/cs596/OGL_Setup.pdf](http://cacs.usc.edu/education/cs596/OGL_Setup.pdf)

**编辑：**

最快的方法是下载最新的头文件，并为其编译 DLL，将其放在您的 system32 文件夹中或在您的项目中引用它。版本 3.7（截至这篇文章的最新版本）在这里： [http ://www.opengl.org/resources/libraries/glut/glutdlls37beta.zip](http://www.opengl.org/resources/libraries/glut/glutdlls37beta.zip)

```
Folder references:

glut.h: 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\GL\'
glut32.lib: 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\'
glut32.dll: 'C:\Windows\System32\'

For 64-bit machines, you will want to do this.
glut32.dll: 'C:\Windows\SysWOW64\'

Same pattern applies to freeglut and GLEW files with the header files in the GL folder, lib in the lib folder, and dll in the System32 (and SysWOW64) folder.
1\. Under Visual C++, select Empty Project.
2\. Go to Project -> Properties. Select Linker -> Input then add the following to the Additional Dependencies field:
opengl32.lib
glu32.lib
glut32.lib 
```

[从这里转载](http://visualambition.wordpress.com/2010/08/12/glut-and-visual-studio-2010/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-13T14:22:32.153

如果您使用 Visual Studio Community 2015 并尝试安装 GLUT，则应将头文件`glut.h`放在 `C:\Program Files (x86)\Windows Kits\8.1\Include\um\gl`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-25T13:26:43.980

# Visual Studio 社区 2017

到这里 ： `C:\Program Files (x86)\Windows Kits\10`

**并为VS 13**执行您应该在给定目录中执行的任何操作。

在 lib 文件夹中，您会找到一些版本，我将**amd**和**x86中的****32 位 glut.lib**文件以及**arm64**和**x64**目录中的64**位 glut.lib**复制到了我能找到的每个版本的文件夹中。**********`um`**********

 ******这对我有用。

编辑：我在 windows 10 中试过这个，也许你需要去**windows 8/8.1**`C:\Program Files (x86)\Windows Kits\8.1`的文件夹。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T22:06:39.093

在这里你可以找到你需要的一切：

[http://web.eecs.umich.edu/~sugih/courses/eecs487/glut-howto/#win](http://web.eecs.umich.edu/~sugih/courses/eecs487/glut-howto/#win)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-02T20:53:12.787

尝试在 Visual Studio 2013中更改`#include <gl/glut.h>`为。`#include "gl/glut.h"`********

# ios - 使用 segue 在 ViewController 之间传递数据的最佳方式

> ID：10467474
> 
> 赞同：2
> 
> 时间：2012-05-06T01:50:32.220
> 
> 标签：ios, segue, viewcontroller

我阅读了一些关于使用 segues 将数据从 ViewController 传递到另一个的教程。

恕我直言，通用方法不太好：源 ViewController 可以获得对目标 ViewController 的引用，以便它可以在目标 ViewController 中设置一些属性。但是源 ViewController 知道目标 ViewController 的某些部分的事实必然会减少对象之间的解耦。

我想知道是否有可能采用像这样的更通用的方法：

*   源 ViewController 执行一个 segue 并打包一个包含它想要发送的数据的 NSDictionary（就像 NSNotifications 一样），而不知道目标 ViewController 的特定属性
*   目标 ViewController 可以访问 NSDictionary 并且可以填充自己的数据结构。

任何人都知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:07:18.687

`prepareForSegue:sender:`是使用情节提要时将数据从一个视图控制器传递到另一个视图控制器的首选方式。观看[去年 WWDC 的 Storyboard 会议](https://developer.apple.com/videos/wwdc/2011/#introducing-interface-builder-storyboarding)；您会看到 Apple 也推荐这种方法。

重申一下 sobri 所说的，视图控制器代码通常包含应用程序的“业务逻辑”，因此通常是应用程序中可重用性最低的代码。在撰写本文时，我在应用商店中有 7 个应用，而且我从未重用过任何重要的视图控制器代码。

如果你想提供最细微的抽象（例如，避免对目标视图控制器的硬依赖），你可以像下面这样。我的一个应用程序中几乎有这个确切的代码。

```
- (void) prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    if( [[segue identifier] isEqualToString:@"showLog"] ) {
        UIViewController* logView = segue.destinationViewController;
        if( [logView respondsToSelector:@selector(setManagedObjectContext:)] ) {
            [logView setValue:self.managedObjectContext forKey:@"managedObjectContext"];
        }
    }
} 
```

你可以用字典做类似的事情，使用`NSKeyValueCoding`'s `setValuesForKeysWithDictionary:`。我自己可能只会`multiple setValue:forKey:`打电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:27:16.343

这是意见，但我认为视图控制器不符合面向对象的纯度。

视图控制器非常特定于单个应用程序的架构，通常不适合一般消费。至少在我看来，通用类和明确设计用于以一种方式仅使用一个应用程序的类之间存在明显差异。

强耦合的视图控制器可以减少复杂的代码。类的解耦是一个以降低代码复杂性为目标的指导方针。如果您的解耦导致复杂性增加，那么这违背了指南的意图。

所以更直接地回答：我认为在视图控制器之间传递数据的最佳方式是让发送视图控制器知道接收视图控制器的接口，并直接将变量传递给它。否则可能被认为是过早的优化。

# javascript - javascript中的双重否定（!!） - 目的是什么？

> ID：10467475
> 
> 赞同：158
> 
> 时间：2012-05-06T01:50:34.480
> 
> 标签：javascript

> **可能重复：**
> [什么是!! JavaScript 中的（不是不是）运算符？](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)

我遇到过这段代码

```
function printStackTrace(options) {
    options = options || {guess: true};
    var ex = options.e || null, guess = !!options.guess;
    var p = new printStackTrace.implementation(), result = p.run(ex);
    return (guess) ? p.guessAnonymousFunctions(result) : result;
} 
```

并且不禁想知道为什么双重否定？有没有其他方法可以达到同样的效果？

（代码来自[https://github.com/eriwen/javascript-stacktrace/blob/master/stacktrace.js](https://github.com/eriwen/javascript-stacktrace/blob/master/stacktrace.js)）

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-05-06T01:52:57.310

它转换为布尔值。第一个`!`否定它一次，像这样转换值：

*   `undefined`至`true`
*   `null`至`true`
*   `+0`至`true`
*   `-0`至`true`
*   `''`至`true`
*   `NaN`至`true`
*   `false`至`true`
*   所有其他表达式`false`

然后另一个`!`再次否定它。一个简洁的布尔转换，完全等同于[ToBoolean](https://es5.github.io/#x9.2) ，因为`!`它被[定义为它的否定](https://es5.github.io/#x11.4.9)。但是，这里没有必要，因为它只用作条件运算符的条件，它将以相同的方式确定真实性。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-06T01:51:42.377

```
var x = "somevalue"
var isNotEmpty = !!x.length; 
```

让我们把它分解成碎片：

```
x.length   // 9
!x.length  // false
!!x.length // true 
```

所以它被用来将“truethy”\“falsy”值转换为布尔值。

* * *

以下值等效于**条件语句**中的 false ：

*   错误的
*   无效的
*   不明确的
*   空字符串`""`(\ `''`)
*   数字 0
*   数字 NaN

**所有其他值都等效于 true。**

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-06T01:54:50.600

双重否定将“真”或“假”值转换为布尔值，`true`或`false`.

大多数人都熟悉使用真实性作为测试：

```
if (options.guess) {
    // runs if options.guess is truthy, 
} 
```

但这并不一定意味着：

```
options.guess===true   // could be, could be not 
```

如果您需要将“真实”值强制为真正的布尔值，`!!`这是一种方便的方法：

```
!!options.guess===true   // always true if options.guess is truthy 
```

# c# - SmtpClient 超时不起作用

> ID：10467476
> 
> 赞同：9
> 
> 时间：2012-05-06T01:50:52.653
> 
> 标签：c#, smtp, timeout

我已经设置了 SmtpClient 类的 Timeout 属性，但它似乎不起作用，当我给它一个 1 毫秒的值时，执行代码时超时实际上是 15 秒。我从[msdn](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout%28v=vs.85%29.aspx)获取的代码。

```
string to = "jane@contoso.com";
string from = "ben@contoso.com";
string subject = "Using the new SMTP client.";
string body = @"Using this new feature, you can send an e-mail message from an application very easily.";
MailMessage message = new MailMessage(from, to, subject, body);
SmtpClient client = new SmtpClient("1.2.3.4");
Console.WriteLine("Changing time out from {0} to 100.", client.Timeout);
client.Timeout = 1;
// Credentials are necessary if the server requires the client 
// to authenticate before it will send e-mail on the client's behalf.
client.Credentials = CredentialCache.DefaultNetworkCredentials;
client.Send(message); 
```

我尝试了单声道的实现，它也不起作用。

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T04:38:18.587

## 重现您的测试 - 它适用于我

你问是否有人遇到过同样的问题——我刚刚在 Windows 7、VS 2008 和 .NET 2.0 上尝试了你的代码——它工作得很好。将超时设置为`1`，正如您所拥有的那样，我几乎立即收到此错误：

```
Unhandled Exception: System.Net.Mail.SmtpException: The operation has timed out
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at mailtimeout.Program.Main(String[] args) in c:\test\mailtimeout\Program.cs:line 29 
```

我认为问题可能是您期望与超时不同的东西。超时意味着连接成功，但服务器没有返回响应。这意味着您实际上需要有一个服务器在您的目的地的端口 25 上进行侦听，但它没有响应。对于这个测试，我使用[Tcl](http://www.activestate.com/activetcl)在 25 上创建一个没有做任何事情的套接字：

```
c:\> tclsh
% socket -server foo 25 
```

当我将超时更改为 时`15000`，直到 l5 秒后我才收到超时错误。

## 如果无法建立连接，为什么 Smtp.Timeout 不起作用

如果端口 25 上没有任何东西在侦听，或者主机不可访问，则超时至少要等到 20 秒后才会发生，此时`system.net.tcpclient`层会超时。这是`system.net.mail`图层下方。来自[描述问题和解决方案的优秀文章](http://www.codeproject.com/Articles/31514/Implementation-of-Connecting-a-Socket-with-Timeout)：

> 您会注意到 System.Net.Sockets.TcpClient 和 System.Net.Sockets.Socket 这两个类都没有连接套接字的超时时间。我的意思是你可以设置一个超时。.NET 套接字在建立同步/异步套接字连接时调用 Connect/BeginConnect 方法时**不提供连接超时。**相反，如果连接尝试连接的服务器未在侦听或存在任何网络错误，则连接被迫等待很长时间，然后引发异常。**默认超时为 20-30 秒**。

无法从 mail 更改超时（这是有道理的，邮件服务器通常已启动），实际上无法更改 connect from `system.net.socket`，这确实令人惊讶。但是您可以进行异步连接，然后可以判断您的主机是否已启动并且端口是否打开。从[这个 MSDN 线程](http://channel9.msdn.com/Forums/TechOff/41602-TcpClient-or-Socket-Connect-timeout)，特别是[这篇文章](http://channel9.msdn.com/Forums/TechOff/41602-TcpClient-or-Socket-Connect-timeout/68ac218aa309483b8e949dea01190b98)，这段代码有效：

```
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IAsyncResult result = socket.BeginConnect("192.168.1.180", 25, null, null);
// Two second timeout
bool success = result.AsyncWaitHandle.WaitOne(2000, true);
if (!success) {
    socket.Close();
    throw new ApplicationException("Failed to connect server.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T16:20:41.107

除了 ckhan 的回答，我想与您分享一个实现更短超时的建议：

```
var task = Task.Factory.StartNew(() => SendEmail(email));

if (!task.Wait(6000))
   // error handling for timeout on TCP layer (but you don't get the exception object) 
```

然后在 SendEmail() 中：

```
using (var client = new SmtpClient(_serverCfg.Host, _serverCfg.Port)) 
{        
    try
    {
        client.Timeout = 5000;   // shorter timeout than the task.Wait()
        // ...
        client.Send(msg);
    }
    catch (Exception ex)
    {
        // exception handling
    }
} 
```

此解决方案带有权衡，即您不会在任务中获得异常详细信息。等等，但也许这值得吗？

# python - 为什么我在 Python 中的 SQL 调用期间出现“VARCHAR”附近的操作错误？

> ID：10467477
> 
> 赞同：0
> 
> 时间：2012-05-06T01:51:07.293
> 
> 标签：python, sql, database

当我调用此函数时，我收到“OperationalError：靠近“VARCHAR”：语法错误，我做错了什么？

```
def database_create_user(table_name, user_ID, username, password, creator_exp):
    users_db_curs.execute("INSERT INTO `" + table_name + "` (uID VARCHAR(20), username VARCHAR(20), password VARCHAR(30), creator_exp VARCHAR(20)) VALUES ('" + user_ID + "', '" + username + "', '" + password + "', '" + creator_exp + "')")
    users_db_connection.commit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:54:53.720

创建表后，您无需在每个 INSERT 查询中重新指定列类型。你可以这样做：

```
users_db_curs.execute("INSERT INTO `" + table_name + "` (user_ID, username , password , creator_exp ) VALUES ('" + user_ID + "', '" + username + "', '" + password + "', '" + creator_exp + "')") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T01:55:10.483

您不应该在 INSERT 语句中指定数据类型。我已经删除了 INSERT 语句中出现的数据类型。这是更正的版本。

为了清晰和可读性，代码在这里被包装成多行。

```
def database_create_user(table_name, user_ID, username, password, creator_exp):
users_db_curs.execute("INSERT INTO `" + table_name + "` (uID, username, 
password, creator_exp) VALUES ('" + user_ID + "', '" + username + "', 
'" + password + "', '" + creator_exp + "')")
users_db_connection.commit() 
```

# tinymce - 如何防止tinymce从输入中剥离空标签？

> ID：10467480
> 
> 赞同：27
> 
> 时间：2012-05-06T01:51:34.010
> 
> 标签：tinymce

我已经阅读了各种论坛和 SO 上的大量帖子，但似乎仍然无法阻止 tinymce 从可编辑块的末尾剥离空标签。

例如我输入这个：

```
<a href="blah">zzz</a>
<div class="floatClearer" style=""></div> 
```

..并且在往返（进出 HTML 模式）时，tinymce 会剥离整个`<div class="floatClearer" style=""></div>`.

根据我发现的各种建议，我尝试了这些事情，还有更多：

*   `div`删除我前面的减号`valid_elements`，

...以及这些配置。选项：

*   `verify_html : false,`
*   `extended_valid_elements : "div*",`
*   `extended_valid_elements : "div[*]",`

一切都无济于事。有什么办法可以防止这种剥离动作？还有其他地方我需要空标签（不仅仅是在这个例子中），所以如果可以的话，请让我知道针对我的问题的特定答案，而不是建议我不使用空标签。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-01-21T09:28:08.233

TinyMCE 中有一个错误，现在已修复（在 v3.5.2 中）。感谢[@Thariama](https://stackoverflow.com/users/346063/thariama)！

对于未来的搜索者：使用该[`verify_html`](http://archive.tinymce.com/wiki.php/Configuration3x:verify_html)选项。

> 此选项启用或禁用元素清理功能。如果将此选项设置为 false，则将跳过所有元素清理，但仍会执行 URL 转换等其他清理功能。
> 
> 使用示例：
> 
> ```
> tinyMCE.init({
>     ...
>     verify_html: false
> }); 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-09T10:15:28.553

因为我也有麻烦，所以我正在添加我的砖 - 在 Cliff Ribaudo 的回答之上。

因此，我建议`&nbsp;`在不会被剥离且不可见的空标签内使用，即使搜索引擎也不可见。

我的 tinyMCE 上并没有取消这样做：`<div class="someclass">&nbsp;</div>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-12T11:00:49.867

我在这里坚持这一点，因为我***仍然在******WordPress***博客（即使是现在，2016 年）上一直遇到这个问题，我需要使用空 div 来插入**Google Analytics、Google Translate**和**Google Tag Manager**。

典型的模式是你在博客页面的某个地方添加一个你需要它的地方，下次你回来用 TinyMCE 编辑器触摸页面时，你的 div 不见了！

我发现似乎总是可靠地工作的***唯一事情是这样的：***

```
<div id="google_translate_element" style="text-align:right;"><span style="display:none;">ha_ha_I_beat_u_tinyMCE</span></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-16T22:09:34.560

对我来说，解决方案是极端并扩展有效元素以接受所有，可能并不理想但客户很高兴

```
function override_mce_options($initArray) {
     $opts = '*[*]';
    $initArray['valid_elements'] = $opts;
    $initArray['extended_valid_elements'] = $opts;
    return $initArray;
}
add_filter('tiny_mce_before_init', 'override_mce_options'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-04T04:44:27.727

如果要防止删除特定的空标签，请使用 option `extended_valid_elements`。

例子：

```
tinyMCE.init({
    ...
    extended_valid_elements: 'span[*]'
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-21T17:54:10.193

```
tinyMCE.init({
    ...
    extended_valid_elements: 'span[*]'
}); 
```

我正在使用 TinyMCE 5.5，上面的这个例子并没有阻止 TinyMCE 为我剥离**空**跨度标签。我正在使用一种解决方法，在跨度标签中添加评论以防止 TinyMCE 剥离总比没有好，我已经这样做了，所以我可以包含 fontawesome 图标：

```
<span class="fas fa-check-circle"><!--icon--></span> 
```

我认为您可以像这样在 TinyMCE 中关闭所有 html 验证/编辑，但我对此并不满意：

```
 tinyMCE.init({
    ...
    extended_valid_elements: 'span[*]'
}); 
```

我正在使用 TinyMCE 5.5，上面的这个例子并没有阻止 TinyMCE 为我剥离空跨度标签。我正在使用一种解决方法，总比没有在 span 标签中添加评论以防止剥离要好，我已经这样做了，所以我可以包含字体真棒图标：

```
<span class="fas fa-check-circle"><!--icon--></span> 
```

我认为您可以使用此设置关闭 TinyMCE 中的所有 HTML 验证/编辑，但我对此并不满意：

```
verify_html: false 
```

# java - 替换文件中的一行

> ID：10467481
> 
> 赞同：-1
> 
> 时间：2012-05-06T01:51:38.730
> 
> 标签：java, file

我正在尝试替换此文件中文本的第 3 行，但无法更新正确的行：

```
 ENTITY test_labelOperation IS
generic (
    NO_OF_COLS  : integer := 640;// This is 3rd line and replace should be look like NO_OF_RECTGlE=100;
    NO_OF_ROWS  : integer := 480; 
    NO_BITS_CC  : integer := 10;
    DATA_WORD : integer :=8; 
    CODE_WIDTH :integer :=9
    );
END test_labelOperation; 
```

这是我正在尝试的代码：

```
 RandomAccessFile raf=new RandomAccessFile(absoluteFile,"rw");
  int lineCount=0;
  while(raf.read()!=-1) {
      String s=raf.readLine();
      //System.out.println(s);
      String stAry[];
      lineCount++;
      if (lineCount==3) {
         System.out.println(s);
         stAry=s.split("=",2);
         stAry[0]="NO_OF_RECTGlE";
         stary[1]=100+";";                        
         String str=Arrays.toString(stAry);
         byte []byt=str.getBytes();
         raf.write(byt);

         }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:00:58.630

我的猜测是问题在于您首先阅读了第 3 行，这会将文件指针移动到该行的 END。那么，当你`raf.write(byt)`写到那行的末尾，而不是在行的顶部。

在开始阅读第 3 行之前，您需要记住位置，使用`raf.position()`，然后`raf.seek(oldPosition)`在写入之前执行...

但我真的不建议你这样做。这与在编辑器中替换一些文本不同。替换字符串的长度必须与被替换字符串的长度完全相同，否则文件中会出现垃圾。如果替换字符串更长，那么您将别无选择，只能从头开始重写整个文件。

我强烈建议您考虑简单地阅读所有行，替换第三行，然后在旧文件的顶部覆盖整个文件。它会更容易实现，也更健壮。

为简单起见，这是一个使用[Apache commons-io](http://commons.apache.org/io/)的示例：

```
List<String> lines = FileUtils.readLines(file);
lines.set(2, "NO_OF_RECTGlE=100;");
FileUtils.writeLines(file, lines); 
```

# android - 使用 Documents List API v3.0 在 Android 手机上使用嵌入 URL 预览 Google Docs 文本文档的问题

> ID：10467489
> 
> 赞同：1
> 
> 时间：2012-05-06T01:53:00.343
> 
> 标签：android, google-docs-api, google-drive-api

我正在尝试在 Android 上的 WebView 中提供 Google Docs 文本文档的预览。我正在使用 Google Documents List API v3.0，我从中接收到一个包含嵌入 URL 的链接元素，例如：

```
<link rel="http://schemas.google.com/docs/2007#embed" type="text/html" href="https://docs.google.com/document/d/XXXXXXXXXXXXXX/preview"/> 
```

为了预览文档，我创建了一个 WebView 并将其配置为针对请求提供适当的授权凭据。然后我将 WebView 定向到提供的嵌入 URL，结果如下面的屏幕截图所示。

不是根据需要预览文档，而是显示移动视图。不幸的是，这个移动视图有点功能失调，因为提供的用户界面控件在点击时只会显示 401 Unauthorized 错误。

有什么方法可以显示文档并隐藏无关的用户界面控件？

我尝试为 WebView 指定桌面用户代理。这确实解决了这个问题，但创建了另一个问题，因为文档显示非常缩小，并且浏览器的缩放控件在纠正它时无效（我实际上需要在这方面尝试更多的东西，但它看起来很严峻）。

我更喜欢没有 UI chrome 的移动视图。

任何建议都非常感谢！

![安卓手机截图](../Images/2d661a8d9efe9a131f330d0e16e1a88f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:09:43.053

对于只读解决方案，您可以[使用 Documents List API 将文档导出为 HTML](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)，并将其显示给用户。

# jquery - 在jquery中找到最接近的值

> ID：10467491
> 
> 赞同：2
> 
> 时间：2012-05-06T01:53:15.873
> 
> 标签：jquery, asp.net, jquery-selectors, dom-traversal

我有 2 个网页 home.aspx 和 about.aspx ，这里我试图在弹出框中加载 about.aspx 页表，

about.aspx 页面

```
<table>
  <tr>
    <td class="Uname">Chat Is Name</td>
  </tr>    
  <tr>
    <td id="UserMessage">abc</td>
  </tr>           
  <tr>
    <td>
      <input type="button" id="bt_Send" 
             title="Click here to Send" value="Send" />
    </td>
  </tr>
</table>
<div id="mbox"></div> 
```

**代码：**

```
$('#mbox').load('about.aspx #msg');   
$("#bt_Send").live('click', function () {               
  var a = $(this).siblings('.Uname').attr('text');
  alert(a);        
}); 
```

在这里我没有得到那个控制的价值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T01:54:54.730

您可以通过以下方式完成此操作：

```
var a = $(this).closest('table').find('.Uname').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:30:23.173

鼓励我们不再使用`$.live`. 相反，您应该使用以下`$.on`方法：

```
$("#mbox")
  .load("about.aspx #msg")
  .bind("click", "#bt_Send", function(){
    var a = $(this).closest("table").find(".Uname").text();
  }); 
```

# android - 如何从维基百科文章中提取数据？

> ID：10467492
> 
> 赞同：6
> 
> 时间：2012-05-06T01:53:25.747
> 
> 标签：android, xml, parsing, wikipedia, wikipedia-api

我有一个关于从 Wikipedia 为我的 Android 应用程序解析数据的问题。我有一个脚本，可以通过读取源来下载 XML `http://en.wikipedia.org/w/api.php?action=parse&prop=text&format=xml&page=ARTICLE_NAME`（也可以通过替换为 JSON 来`format=xml`下载`format=json`.

但我不知道如何只访问目录中的某些部分。我想要的是当页面加载时，用户可以按下一个按钮，使弹出窗口出现，显示目录中的标题，并允许用户阅读该部分并且仅为方便起见。我对 JSON 有点动摇，但有可能做到这一点吗？或者，是否有来自 Wikipedia 的 API 允许开发人员仅查看页面的某些部分？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T08:24:16.547

不幸[的是，mediawiki.org 文档`parse`](https://www.mediawiki.org/wiki/API%3aParsing_wikitext#parse)似乎没有告诉您如何执行此操作。但是[API 本身的文档是这样的](http://en.wikipedia.org/w/api.php?action=help&modules=parse)：您可以使用`section`参数。您可以使用它`prop=sections`来获取部分列表。

所以，你可以先使用：

[http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=Android_%28operating_system%29&prop=sections](http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=Android_%28operating_system%29&prop=sections)

获取部分列表，然后

[http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=Android_%28operating_system%29&prop=text§ion=26](http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=Android_%28operating_system%29&prop=text&section=26)

获取特定部分的 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T20:32:47.263

action=parse 不适用于 per-section 解析，请考虑以下示例：

```
Foo is a bar<ref>really!</ref>
== References ==
<references/> 
```

仅解析第零部分将导致红色错误消息 about without 而解析第一个将导致空引用列表。

但是，有一个更好的解决方案：[action=mobileview](https://www.mediawiki.org/w/api.php?action=help&modules=mobileview)不仅没有这个问题，而且还专门用于移动应用程序，并为您提供移动优化的 HTML。

# android - 是否可以在不启动 Activity 的情况下启动 Android 应用程序

> ID：10467501
> 
> 赞同：0
> 
> 时间：2012-05-06T01:54:26.293
> 
> 标签：android, android-activity, launch

具体来说，我正在寻找一种方法来防止在我运行我的应用程序时出现“黑屏”。

该应用程序只要按下它就会运行一个快速程序，但由于它链接到一个 Activity，它会加载一个布局（黑色）。我知道我可以做一个小部件，但我需要它在启动器中......

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:22:36.687

您可以通过添加来避免黑屏

```
android:theme="@android:style/Theme.NoDisplay" 
```

到 AndroidManifest.xml 中的活动标签

例如：

```
<activity android:name=".Activity"
      android:theme="@android:style/Theme.NoDisplay" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:05:32.367

要在启动器中有一个图标，你需要在你的 Android Manifest 中有正确的 intent-filter 标签。

避免为 Activity 执行此操作的一种方法也许您可以尝试为服务添加意图过滤器...

我不知道它是否会起作用，但可能值得一试......

# jquery - 为什么 $('#table > tr') 选择器不匹配？（总是返回 0）

> ID：10467503
> 
> 赞同：8
> 
> 时间：2012-05-06T01:54:36.207
> 
> 标签：jquery, jquery-selectors

html代码：

```
<table id='table'>
    <tr>
        <td>..</td>
    </tr>
</table> 
```

带有jquery的js代码：

```
var l1 = $('#table > tr').length;
var l2 = $('#table tr').length;
alert(l1+','+l2);​ 
```

结果：

```
 0,1 
```

为什么第一个`#table > tr`得0？

你可以从这里看到一个现场演示：http: [//jsfiddle.net/Freewind/PmsFQ/](http://jsfiddle.net/Freewind/PmsFQ/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T01:56:54.473

因为 a 的直接子级`<table>`只能是`<thead>`, `<tbody>`, or `<tfoot>`（或`<colgroup>`or `<caption>`，但不包含行）。

浏览器的 DOM 会`<tr>`在`<tbody>`. （对于不这样做的浏览器，jQuery 会伪造它）

你需要写`$('#table > tbody > tr')`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T01:57:50.003

这是因为浏览器会自动在你的和之间插入`<tbody>`元素，这样行就不再是你的表的直接子元素。`<table>``<tr>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T01:57:58.947

您的浏览器正在添加一个`tbody`元素，因此`tr`不是表格的子元素。

# ruby-on-rails - Amazon Linux 上的 sqlite3 错误

> ID：10467505
> 
> 赞同：2
> 
> 时间：2012-05-06T01:54:51.553
> 
> 标签：ruby-on-rails, ruby, sqlite, bundler

我正在尝试在 ec2 上创建一个新的 rails 应用程序。我正在使用 ruby​​ 1.9.3 和 rails 3.2.3

```
[root@xxxx]# rails g
/usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in `require': cannot load such file -- sqlite3/sqlite3_native
(LoadError)
        from /usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in `rescue in <top (required)>'
        from /usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:2:in `<top (required)>'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
        from /usr/local/share/gems/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
        from /root/twt/config/application.rb:7:in `<top (required)>'
        from /usr/local/share/gems/gems/railties-3.2.3/lib/rails/commands.rb:24:in `require'
        from /usr/local/share/gems/gems/railties-3.2.3/lib/rails/commands.rb:24:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

当我做：

```
[root@xxxx]# find / | grep sqlite3/sqlite3_native 
```

我懂了：

```
/usr/local/lib/gems/exts/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
/usr/local/share/gems/gems/sqlite3-1.3.6/ext/sqlite3/sqlite3_native.so 
```

为什么rails看不到我的sqlite3？

# objective-c - ObjC：从不同的类文件调用方法

> ID：10467508
> 
> 赞同：0
> 
> 时间：2012-05-06T01:55:01.113
> 
> 标签：objective-c, arrays

嗨社区，

我正在做一个项目，我需要处理包含数百个项目的数组，所以我没有将它们全部放在委托类中并弄乱我的代码，而是将它们放在一个新类中调用“ValueHolder”，这样当我调用 ValueHolder 的方法时，它们将返回我需要处理的大型数组的一部分。

但是，我一生都无法弄清楚如何调用它的方法。我试过了

```
ValueHolder *theValues = [[ValueHolder alloc] init]; 
```

但它出错了，告诉我`ValueHolder undeclared`，`theValues undeclared`有谁知道我该如何处理？谢谢，

〜乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:59:09.107

您需要在其他类的源中导入`.h`of `ValueHolder`；

```
#import "ValueHolder.h"

// Wherever it was in first place
ValueHolder *theValues = [[ValueHolder alloc] init]; 
```

请注意，如果此数据是特定于实例的，则您需要通过同一实例获取数据，而不是新实例。

# iphone - iphone 应用程序 - 使用新项目更新应用程序

> ID：10467512
> 
> 赞同：3
> 
> 时间：2012-05-06T01:55:43.883
> 
> 标签：iphone, xcode

几周前，我构建了一个 iphone 应用程序并成功地将其提交到应用商店。现在，客户想要我为另一个应用程序制作的一些功能，所以我在 xcode 中复制了第二个应用程序（项目）并使用它来满足我客户的需求。

我的问题是，现在我不知道如何上传这个项目作为第一个应用程序的更新。
我在 itunesconnect 中打开应用程序并选择“添加版本”，填写详细信息（新版本号和说明），所以现在我有状态为“准备上传”的 1.1 版。

在 xcode 中，我选择了 Product->archive，但在 Archives Organizer 中，当我选择 Distribute->Submit to the IOS App Store 时，我收到以下消息：`No suitable application records were found. Please make sure you have set up a record for this application on iTunes Connect`
这是否意味着它无法将此应用程序识别为在应用商店？（可能与应用ID有关？）

我在这里错过了什么吗？两个项目的 Bundle Identifier 相同（如 Info.plist 文件中所示）。
这完全可以实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:46:39.160

这是绝对可以实现的。您是否三次检查捆绑标识符是否相同？

尝试在 iTunes Connect 中删除版本更新并重新创建它并重做该过程。

祝你好运！

-大卫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:00:06.153

最后，这就是解决问题的方法：

我尝试重新启动 xcode - 但没有运气。重新启动我的mac虽然解决了它！

# javascript - 如何使我的维基时钟动态化？

> ID：10467513
> 
> 赞同：1
> 
> 时间：2012-05-06T01:55:44.280
> 
> 标签：javascript, mediawiki, mediawiki-templates

如何使[http://torwiki.com/page/User:Technical_13/SandBox#Dynamic_Clock](http://torwiki.com/page/User:Technical_13/SandBox#Dynamic_Clock)上的时钟动态显示多个时区的实际当前时间......我是管理员，所以我可以访问 MediaWiki： common.js，已激活。我已经阅读了显示单个时钟的教程，但是如何使它与多个时钟一起工作？我希望能够创建一个允许我定义时区的模板，并让它显示该时区的当前时间。我可以`<span>`用一个 id 或名称将它包装起来以标识我想要的时区，但我如何让它适用于多个时钟。请记住，使用 MediaWiki 风格的 wiki，我不能为每个实例嵌入任何 javascript 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:02:16.430

网上有一[百万个 JavaScript 时钟脚本](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=javascript%20clocks)。听起来您真正的问题是您希望它显示用户本地时间，而不是服务器时间 - 但您忘记了 JavaScript 在用户浏览器中运行。呼叫`Date()`将自动为您提供用户的当地时间。

# javascript - 在 jQuery `animate()` 中设置断点

> ID：10467515
> 
> 赞同：1
> 
> 时间：2012-05-06T01:56:24.537
> 
> 标签：javascript, jquery

### [jsFiddle 示例](http://jsfiddle.net/pjNZa/)

我希望能够在动画中间设置断点。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:09:55.410

动画事件中有一个步骤事件。你可以用那个。

这是一个例子：

```
$("myelement").animate({
    "height":"+=500px"
},{
    duration:500,
    step:function(currentHeight){
       //do what ever you want here.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:09:15.260

你为什么想做这个？但是如果你坚持，那么在这一行放置一个断点怎么样：

```
$('div').slideUp('slow', function() { 
```

然后一次单步执行（进入）代码一个语句。这将带您进入执行动画的 jQuery 代码。如果您使用未缩小版本的 jQuery，您将能够看到执行实际动画的代码。

# cuda - 使用一个大内核或 cuda 流更好吗？

> ID：10467519
> 
> 赞同：3
> 
> 时间：2012-05-06T01:57:26.923
> 
> 标签：cuda

什么是更好的？我需要分几个步骤处理数据，在我看来我有 2 个选项：1）使用一个大内核 2）每个步骤使用带有一个内核的流

在执行内核之前会有一些延迟，但在这种情况下真的很重要吗？大内核的延迟与几个较小内核的延迟总和相同吗？

与另一种方式相比，一种方式有什么优势吗？

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:59:49.297

Fermi 卡上内核的启动延迟大约为 10us，因此无需担心。这是有道理的——要在游戏中渲染场景，必须运行许多不同的着色器（它们是内核）。

内核必须从全局内存中读取将要处理的数据，并将结果写回全局内存。因此，每个单独的内核都意味着完整的读/写周期。如果您能够在一个大内核中将多个步骤链接在一起，那么您可能能够加快速度，仍然由单个读/写周期括起来。

例如，如果您需要执行操作 A、B 和 C，链接它们可能会给您 READ - A - B - C - WRITE，而单独的内核会给您 READ - A - WRITE - READ - B - WRITE - READ - C - 写。

请记住，即使您运行单个内核，您仍然可以通过将单独的步骤分解为单独的设备功能来保持代码的可读性。

# ruby - 带有“已定义？”的三元表达式 返回“表达式”而不是值？

> ID：10467523
> 
> 赞同：7
> 
> 时间：2012-05-06T01:57:58.137
> 
> 标签：ruby, expression, ternary-operator

我对 Ruby 和 Rails 很陌生，但即使在搜索堆栈溢出和谷歌之后，我也找不到答案。

我有一个简单的 Ruby 速记 if 语句，应该返回`integer`如下：

```
# in the context of this erb document `amount` is defined as 5.
@c = ( defined? amount ? amount : r( 1,4 ) ) 
```

`r()`是一个自定义辅助函数，*在本例*中返回一个介于1 和 4 之间的随机数。

我打算这样做的方式`if` `amount`是定义，然后使用定义为 的数字`amount`，`else`生成 1 到 4 之间的随机数并改用它。

然而，当打印输出`@c`时，Ruby 输出`expression`而不是数字。

我必须做些什么才能让它按我的预期工作，我做错了什么？

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T02:01:20.410

`defined?`绑定到`amount ? amount : r(1,4)`所以它相当于：

```
defined?(amount ? amount : r(1,4)) 
```

你可能想要：

```
defined?(amount) ? amount : r(1,4) 
```

实际上，可能性是`amount || r(1,4)`，或者`amount.nil? ? r(1,4) : amount`会更好地匹配你想要的，因为我认为你不想要这个：

```
1.9.3p194 :001 > 定义？（数量）
 => 无
1.9.3p194 :002 > 金额 = 无
 => 无
1.9.3p194 :003 > 定义？（数量）
 =>“局部变量”

```

...在这种情况下`@c`是`nil`- 定义变量的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T02:01:50.820

`||`在这种情况下使用运算符：

```
@c = amount || r (1,4) 
```

在您的代码中，该`defined?`方法运行`amount ? amount : r( 1,4 )`而不是`amount`按您的预期运行。此外，`defined?`运营商可能不会按照您的预期行事，请查看此[博客条目](http://kconrails.com/2010/12/20/rubys-defined-operator/)以了解情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T02:06:57.203

您正在寻找空合并运算符。试试这个：

```
@c = amount || r(1,4) 
```

如果定义了数量，则此代码会将数量分配给@c。如果不是，它会将 r(1,4) 的结果分配给@c。

[http://eddiema.ca/2010/07/07/the-null-coalescing-operator-c-ruby-js-python/](http://eddiema.ca/2010/07/07/the-null-coalescing-operator-c-ruby-js-python/)

# javascript - 通过 Meteor 更新 KineticJS Canvas 元素

> ID：10467533
> 
> 赞同：2
> 
> 时间：2012-05-06T02:00:01.963
> 
> 标签：javascript, mongodb, canvas, meteor, kineticjs

我正在尝试通过 Meteor 更新 KineticJS 对象的位置。

看来问题出在：

```
 Players.update({name: "Rect"}, {xpos: this.attrs.x}) 
```

这是流星文档所说的：

```
 // Find the document with id "123", and completely replace it.
  Users.update({_id: "123"}, {name: "Alice", friends: ["Bob"]}); 
```

我试图检查数据是否正在通过以下方式更新：

```
 console.log(Players.findOne({name: "Rect"}).xpos); 
```

这是github：

[https://github.com/randompast/randomtests/tree/master/meteorCanvasTest](https://github.com/randompast/randomtests/tree/master/meteorCanvasTest)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:02:23.437

首先，总是使用 $set 来更新你的属性，以免你踩到名字之类的东西。由于您在后续更新中踩到了名称，因此没有要更新的名为“rect”的属性。`Players.update({name: "Rect"}, {$set: {xpos: this.attrs.x}})`

```
if (Meteor.is_client) {
  Players.find().observe({
    changed: function(new_doc, idx, old_doc) {
      if(MyTest.rect) {
        MyTest.rect.attrs.x = new_doc.xpos;
        MyTest.layer.draw();
      }
    }                      
  });  
  ....

    MyTest.rect.on("dragend", function() {
      Players.update({name: "Rect"}, {$set: {xpos: this.attrs.x}});
    });
  ....

} 
```

只需插入该观察函数并确保您的 dragend 使用 $set 表示法。

# php - 使用php将日期数据插入访问数据库？

> ID：10467542
> 
> 赞同：2
> 
> 时间：2012-05-06T02:03:17.887
> 
> 标签：php, ms-access

我正在尝试插入数据以访问数据库，但我遇到了问题。我知道问题是当我插入值**日期**时，因为我试图将 NULL 放在那里并且它工作并插入了除日期之外的所有内容。我还尝试将日期放在字符串“日期”中以作为字符串，但它没有用。任何想法？

```
$query_insert = "insert into orders (Ord_Date, Cus_Id_Fk, Book_Id_Fk) Values ($date,$cus_id, $book_id)";
$insert = odbc_exec($conn, $query_insert) or die (odbc_errormsg()); 
```

正如我所说，这个带有 NULL 的工作，但我还需要插入日期。

```
$query_insert = "insert into orders (Ord_Date, Cus_Id_Fk, Book_Id_Fk) Values (null, $cus_id, $book_id)";
$insert = odbc_exec($conn, $query_insert) or die (odbc_errormsg()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:34:36.930

由于您的日期格式是`MM-DD-YYYY`，因此您必须准备 $date 以适应该格式。这是如何

```
$date = date("d-m-Y");
$query_insert = 'INSERT INTO .... '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:15:59.537

1.) 在 mm/dd/yy 中管理日期格式字符串
2.) 用单引号对其进行编码

```
$query_insert = "insert into orders (Ord_Date, Cus_Id_Fk, Book_Id_Fk) Values ('$date',$cus_id, $book_id)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:19:38.860

**第一种方法：**

尝试

```
SELECT Date(); 
```

在您的访问数据库中并获取日期格式。然后根据该格式格式化您的日期并在您的 SQL 中使用它。

**第二种方法：**

使用 PHP 将您的日期转换为时间戳，然后像这样保存它：

INSERT INTO TABLE (date_column) 值 (DateValue(timestamp))

# c - BST - 递归插入

> ID：10467543
> 
> 赞同：1
> 
> 时间：2012-05-06T02:03:49.657
> 
> 标签：c, data-structures

我为 BST 编写了递归插入算法。但是，算法中有一个错误。如果有人可以请给我一个指针，将不胜感激。请不要`y = NULL`在最初的通话中那样做。

```
 void insert_recursive(Node **root, Node *z, Node *y) {
    // z is the pointer to the node being inserted, and y keeps track of z's parent
    Node *x = *root;

    if (x != NULL) {
        y = x;
        if (z->val < x->val)
            insert_recursive(&(x->left), z, y);
        else
            insert_recursive(&(x->right), z, y);
    }
    else {
        if (y == NULL)
            { *r = z; printf("inserting root, %d\n", z->val); }
        else if (z->val < x->val)
             { y->left = z; printf("inserting left of %d, item %d\n", y->val, z->val); }
        else
            { y->right = z; printf("inserting right of %d, item %d\n", y->val, z->val); }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T02:41:55.590

这可能不是唯一的问题，但你的线路

```
else if (z->val < x->val) 
```

出现在 的`else`子句中`if (x != NULL)`。换句话说，这里保证 x 为 NULL。

# c++ - 模板并拆分为 .h/.cpp 文件

> ID：10467544
> 
> 赞同：0
> 
> 时间：2012-05-06T02:03:50.743
> 
> 标签：c++, templates

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [为什么模板类的实现和声明应该在同一个头文件中？](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)

我将创建几个 ADT 并比较它们的性能（我正在学习数据结构课程并想进行实验；注意：我们的讲师使用 Java）。我想创建泛型类，这样我就不会被特定的数据类型所困。我很久以前就读过，无法拆分模板类。保持代码清洁的最佳方法是什么？最明显的方法是简单地使用 .cpp 文件而不隐藏实现，例如在 java 中。还有其他我可以使用的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T02:09:46.380

有些人使用标题中包含的“ipp”文件。

除此之外……就是这样。您不能将模板代码放在已编译的文件中并使其在外部可用。

# iphone - 更改 UITableView 中标题的背景颜色

> ID：10467552
> 
> 赞同：1
> 
> 时间：2012-05-06T02:05:24.557
> 
> 标签：iphone, uitableview, xcode4.2

我正在尝试更改 UITableViewController 中标题的背景颜色，它实际上有它自己的 *.h/m 文件。在我的 .m 文件中，我按照几个 stackoverflow 答案的建议粘贴了以下代码：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];
    if (section == 0)
        [headerView setBackgroundColor:[UIColor redColor]];
    else 
        [headerView setBackgroundColor:[UIColor clearColor]];
    return headerView;
} 
```

但结果如下：

![在此处输入图像描述](../Images/23933e914d950340ffed6c5b1750f262.png)

我希望蓝色标题为红色。我不明白为什么标题和第一个单元格之间有一个红条。

**其他详细信息** 如果此评论有用：我是 xcode 4.2 的新手。我所做的是转到故事板，拖动导航控制器，拖动表格视图。转到左侧资源管理器 bard 并添加一个名为 MyUITableViewController 的新文件，该文件扩展了 UITableviewController。将我上面的函数粘贴到 MyUITabelViewController.m 文件中。然后我实现了 heightforheaderinsection 函数以返回一个 CGfloat 值（之后所做的就是增加蓝色标题和第一个单元格之间的空间）。返回故事板，左键单击我的 tableviewcontroller 并确保它指向我的 MyUITableViewController 类。我错过了哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:54:13.133

Apple 的 UITableViewDelegate 类参考，方法`- tableView:viewForHeaderInSection:`：

> 此方法仅在同时实现 tableView:heightForHeaderInSection: 时才能正常工作。

你实现了那个方法吗？

**编辑：**阅读您的评论并知道您正在使用情节提要后，您可以轻松地为整个表格创建自定义背景：

1) 在情节提要上创建一个 TableViewController

2）拖动一个UIView：

![界面视图](../Images/37a99031a8df3f3e1071fced4f850e3d.png)

3) 将 UIView 放到表视图的标题中，这里：

![将视图拖放到 tableView 标题中](../Images/204a94583c693e2ecae5475e8c547740.png)

4) 您现在可以在标题上看到一个视图，您可以调整大小、更改颜色、添加例如 UILabel...：

![带标题的表格视图](../Images/43465ed4d934393de12e8103ce60f08f.png) ![带标签的标题](../Images/c8f51eaae6086c33e333771fb7eb2be9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:54:22.693

使用 tablview 委托方法自定义 tablviewheader。我在这里展示一些代码使用它......

```
 -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
  {

    UIView *headerView = [[UIView alloc] init];
    UIImageView *tempimage = [[UIImageView alloc]initWithFrame:CGRectMake(10, 5, 300,34)];// you can also use image view to show your required color.
    tempimage.image = [UIImage imageNamed:@"yourimage.png"];
    [headerView addSubview:tempimage];
    [headerView addSubview:headername];
    return  headerView;

  } 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T22:21:57.603

显示的蓝色标题是导航控制器标题。

# jquery - 如何使用 jquery 禁用我的 asp.net mvc 3 中的所有“提交”按钮

> ID：10467560
> 
> 赞同：2
> 
> 时间：2012-05-06T02:07:54.087
> 
> 标签：jquery

我想编写一个脚本，当用户单击它们时禁用所有提交按钮，我编写了以下 Jquery 脚本，它将在所有视图上可用，但它不起作用：-

```
$(document).ready(function () {
    $(":input[type=submit]").click({
        this.attr('disabled', 'disabled');

    });
}) 
```

那么我的代码有什么问题？BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:12:57.197

```
$(document).ready(function () {
    $("input[type='submit']").click(function() {
         $(this).prop('disabled', true);
    });
}); 
```

或者

```
$(document).ready(function () {
    $("input[type='submit']").click(function() {
         this.disabled = true;
    });
}); 
```

如果提交按钮正在提交表单，您将不得不阻止将重新加载页面的默认操作：

```
 $("input[type='submit']").click(function(e) {
         e.preventDefault();
         $(this).prop('disabled', true);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:11:33.633

我认为这就是你要找的：

```
$("input[type=submit]").click(function() {
    $(this).attr('disabled', 'disabled');

    // if you want to disable all buttons on the form do the following
    // $("input[type=submit]").attr("disabled", "disabled");
}); 
```

**编辑：**

adeneo 是正确的。使用该`prop()`方法可能是一个好主意。我个人从来没有遇到过禁用 via 的问题`attr('disabled', 'disabled')`，但我之前听说过有人提到它。

[但是，请解释 attr-vs-prop-change-in-1-6](http://forum.jquery.com/topic/please-explain-attr-vs-prop-change-in-1-6)上的这个 jquery 论坛帖子可能会更多地解释人们在使用 attr() 方法时遇到禁用问题的原因。他们很可能将其设置为 true 而不是禁用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:11:55.460

像这样的东西怎么样：

```
$(document).ready(function () {
    $("form").submit({
        $("input[type=submit]").attr('disabled', 'disabled');
        return true;
    });
}); 
```

以上将是实现您打算做的更好的方法。如果您坚持让您的代码工作，请删除 jQuery 选择器中的`:`before `input`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T02:13:59.100

您说您要禁用所有按钮，但“this”关键字仅引用导致事件被抛出的项目，因此您需要：

```
$(document).ready(function () {
    $("input[type='submit']").click({
        $("input[type='submit']").attr("disabled","disabled");

    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T02:14:10.573

您的脚本不起作用的原因`this`是指的是 HTML 元素，而不是 jQuery 对象。您需要将其包装在 jQuery 对象中以在其上运行函数，例如`attr`：

```
$(this).attr('disabled', 'disabled'); 
```

此外，如果您想禁用**所有**提交按钮，则需要执行新的选择并将它们全部禁用。这段代码应该做你想做的事：

```
// Passing a function to $ will run it on document ready
$(function () {
    $("input[type=submit]").click({
        // Select all submit inputs and disable them
        $('input[type=submit]').attr('disabled', 'disabled');
    });
}); 
```

现在，单击一个提交按钮时应禁用所有提交按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T02:17:02.587

尝试在输入选择器中不使用“：”并使用 $(this)。

```
$(function () {
    $("input[type=submit]").click(function() {
        $(this).attr('disabled', 'disabled');
    });
}) 
```

仅供参考 - 我使用了 $(document).ready 的简写语法。

# ruby - 控制器显示动作

> ID：10467562
> 
> 赞同：1
> 
> 时间：2012-05-06T02:08:29.220
> 
> 标签：ruby, ruby-on-rails-3

我有 2 个模型用户（设计 gem）和配置文件，其中

```
 class User < ActiveRecord::Base
    has_one :profile

  class Profile < AciveRecord::Base
    belongs_to :user 
```

每个模型视图中的所有内容都可以正常工作，但我希望在应用程序布局中有一个 link_to。

```
 <% if user_signed_in? %>
  <li><%= link_to current_user.username , profile_path(@profile) %></li> 
```

但它向我显示了这个错误：

```
 ActionController::RoutingError (No route matches {:action=>"show", :controller=>"profiles"}) 
```

我的个人资料控制器

```
 def show 
  @profile = Profile.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @profile }
end 
```

结尾

我的耙子路线：

```
 profiles GET    /profiles(.:format)                             profiles#index
                     POST   /profiles(.:format)                             profiles#create
         new_profile GET    /profiles/new(.:format)                         profiles#new
        edit_profile GET    /profiles/:id/edit(.:format)                    profiles#edit
             profile GET    /profiles/:id(.:format)                         profiles#show
                     PUT    /profiles/:id(.:format)                         profiles#update
                     DELETE /profiles/:id(.:format)                         profiles#destroy
    new_user_session GET    /users/sign_in(.:format)                        devise/sessions#new
        user_session POST   /users/sign_in(.:format)                        devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)                       devise/sessions#destroy
       user_password POST   /users/password(.:format)                       devise/passwords#create
   new_user_password GET    /users/password/new(.:format)                   devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)                  devise/passwords#edit
                     PUT    /users/password(.:format)                                            devise/passwords#update

 cancel_user_registration GET    /users/cancel(.:format)                    registrations#cancel
        user_registration POST   /users(.:format)                           registrations#create
    new_user_registration GET    /users/sign_up(.:format)                   registrations#new
   edit_user_registration GET    /users/edit(.:format)                      registrations#edit
                          PUT    /users(.:format)                           registrations#update
                          DELETE /users(.:format)                           registrations#destroy 
```

我希望该链接显示 currentuser.username（我已经设计了用户名）并链接到 current_user 的个人资料页面。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:38:41.133

看起来您没有设置`@profile`实际使用布局的操作，所以它出现为 nil，并且路由器需要一个 id 来生成路由。

您需要将 @profile 设置为与应用程序布局一起呈现的任何操作中的某些内容。这可能是全局 before_filter 的工作。

# visual-studio - 将域映射到 localhost 中的 IIS7 虚拟目录

> ID：10467566
> 
> 赞同：0
> 
> 时间：2012-05-06T02:08:50.313
> 
> 标签：visual-studio, iis

我有 2 个 asp.net 项目。一个 API 和一个 Web 客户端项目。测试时，我需要克服相同的来源策略，因此我无法在不同的端口上使用它们进行测试。

我使用 Visual Studio 将 api 映射到：`http://localhost/api`但其他项目无法映射到`http://localhost/`. 我要求它成为根的原因是因为应用程序包含对根的引用（表单、脚本等）`/`。做了一些阅读后，我需要发布到`wwwroot`，我不想这样做。

我假设的下一个选项是将域映射到我的虚拟目录`http://localhost/web`和`http://localhost/api`=>`someDomain.com`和`someDomain.com/api`. 我该怎么做呢？编辑主机文件不起作用：

```
http://localhost/web    app.com
http://localhost/api    api.app.com 
```

问题（解决任何一个都对我有用）：

1.  指向`http://localhost/`解决`http://localhost/web`引用问题。
2.  在中创建我的虚拟目录`http://localhost/`； ![在此处输入图像描述](../Images/4628c93b85de701bacd00544ceafa692.png)
3.  将域映射到 localhost 虚拟目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:17:39.120

你可以在 localhost 上设置一个“反向代理”来做你想做的事。

本质上，它将充当中继 - 当客户端连接到 时`http://localhost/api`，您的代理可以中继该请求以`http://somedomain.com/api`获取响应，然后将响应传递回原始客户端。从客户端的角度来看，请求是向 localhost 发出的，响应来自 localhost。没有摆弄名称服务器。

[IIS 团队发布反向代理](http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/)

如果您有 IIS6 或不想使用 Microsoft 扩展，还有其他选择。一个是[IIRF](http://iirf.codeplex.com)。

# r - 解决 R 中的任务调度或装箱优化

> ID：10467579
> 
> 赞同：7
> 
> 时间：2012-05-06T02:11:43.947
> 
> 标签：r, optimization, knapsack-problem, bin-packing, resource-scheduling

我有一个优化问题。这是关于包含 20 个零件的产品（生产顺序无关紧要）。我有 3 台类似的机器，可以生产所有 20 个零件。

我已经得到了以分钟为单位的 20 个部分（即生产第一部分需要 3 分钟，生产第二部分需要 75 分钟，等等）

```
ItemTime<-c(3,75,55,12,45,55,11,8,21,16,65,28,84,3,58,46,5,84,8,48) 
```

因此，生产 1 个产品需要 730 分钟。

```
sum(ItemTime) 
```

目的是通过将好的产品分配给三台机器来最小化一种产品的生产。

```
sum(ItemTime/3) 
```

所以实际上我需要接近 243.333 分钟 (730/3)

可能性很大 3^20

我想有许多不同的最佳解决方案。我希望 R 给我所有这些。我不仅需要知道需要机器 1 2 和 3 的总时间：我还需要知道将哪些物品提供给机器 1、机器 2 和机器 3。

或者，如果它太长，我想选择一个尽可能合理的不重复样本......

我可以用 R 语言解决我的问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T03:45:41.087

我相信你的问题是多重背包问题（MKP）的一个近似变体，这是先验的，而不是小菜一碟......

但是，您的维度足够小，可以通过混合整数规划 (MIP) 来解决问题。我在下面使用解决了它`Rglpk`；求解器花了大约四分钟。如果您有幸能够访问 CPLEX，我强烈建议您改用`Rcplex`它，它会冒烟。

```
ItemTime<-c(3,75,55,12,45,55,11,8,21,16,65,28,84,3,58,46,5,84,8,48)
N <- length(ItemTime)
M <- 3 
```

问题表述：

```
# variables are in this order:
# z: slack variable for the max of (s1, s2, s3)
# s1: sum of times for machine 1
# s2: sum of times for machine 2
# s3: sum of times for machine 3
# a1-a20: booleans for assignment to machine1
# b1-b20: booleans for assignment to machine1
# c1-c20: booleans for assignment to machine1

obj <- c(1, rep(0, 3 + 3*N))

mat <- rbind(
  c(1, -1, 0, 0, rep(0, M*N)),                      # z >= s1
  c(1, 0, -1, 0, rep(0, M*N)),                      # z >= s2
  c(1, 0, 0, -1, rep(0, M*N)),                      # z >= s3
  c(0, -1, 0, 0, ItemTime,  rep(0, N), rep(0, N)),  # s1 = ...
  c(0, 0, -1, 0, rep(0, N), ItemTime,  rep(0, N)),  # s2 = ...
  c(0, 0, 0, -1, rep(0, N), rep(0, N), ItemTime),   # s3 = ...
  cbind(matrix(0, N, 4), diag(N), diag(N), diag(N)) # a_i + b_i + c_i = 1
)

dir <- c( ">=", ">=", ">=", "==", "==", "==" , rep("==", N))

rhs <- c(rep(0, 2*M), rep(1, N))

types <- c(rep("C", 1+M), rep("B", M*N)) 
```

现在让我们解决它：

```
Rglpk_solve_LP(obj, mat, dir, rhs, types, max=FALSE, verbose=TRUE)

# GLPK Simplex Optimizer, v4.47
# INTEGER OPTIMAL SOLUTION FOUND
# $optimum
# [1] 244
# 
# $solution
#  [1] 244 243 243 244   0   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   0   0   0   0   1   1   0   0
# [31]   1   1   1   0   1   0   0   0   1   0   1   0   1   0   1   0   0   0   1   1   0   0   0   1   0   1   0   1   0   1
# [61]   0   0   0   1
# 
# $status
# [1] 0 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-06T02:54:44.330

**编辑**：显然这个问题与我记得的问题略有不同，因为正如@han 所示，这个算法不是最优的，只是一个近似值（尽管可以保证这个算法的“makespan”永远不会超过 4/3 * 一般最佳制造时间和 11/9 * 最适合 3 台机器。）。

@han 提供的链接链接到[多处理器调度文章](https://en.wikipedia.org/wiki/Multiprocessor_scheduling)，正好等价于这个问题。文章告诉我们，这个问题实际上是 NP-hard。这意味着没有多项式时间算法来计算最佳答案（更不用说`O(n log n)`像我们这里的那样了）。

* * *

您可以只使用贪心算法：遍历列表并将耗时最长的作业分配给当前分配给它的工作最少的机器。

例如，考虑`c(5,3,6,1,2)`将制造时间作为您的零件。首先，您将其按降序排列：`c(6,5,3,2,1)`，然后（按顺序）分配任务。

```
 Step:  1    2    3    4    5
Machine 1:  6    6    6    6    6
Machine 2:  -    5    5    5    5,1
Machine 3:  -    -    3    3,2  3,2 
```

所以机器 1 制造需要 6 分钟的零件，机器 2 制造需要 1 和 5 分钟的零件，机器 3 制造需要 3 和 2 分钟的零件。

您可以看到在第 4 步中，总时间最短的机器是机器 3，这就是我们将 分配`2`给它的原因。

~~从记忆来看，这个算法实际上是最优的；尽管我没有该声明的链接。我也不知道您是否可以对其进行调整以获得所有可能的最佳结果。~~

* * *

如果您定义了一个函数，该函数接受一个作业和具有当前作业的机器列表，您可以使用它[`Reduce`](http://stat.ethz.ch/R-manual/R-patched/library/base/html/funprog.html)来分配所有作业。单个工作分配可能类似于：

```
assign.job <- function(machines, job) {
    which.machines <- which.min(lapply(machines, sum))
    machines[[which.machines]] <- c(machines[[which.machines]], job)
    machines
} 
```

（我不喜欢这`machines[[which.machines]]`条线......我确信有更好的方法来修改特定索引处的列表。）

然后分配可能是这样的：

```
allocate <- function(num.machines, job.times) {
    machines <- lapply(1:num.machines, function(...) c())
    Reduce(assign.job,
           sort(job.times, decreasing=TRUE),
           machines)
} 
```

（我不喜欢开头的那一行`machines <-`：我确信有一种更简洁的方法来创建长度列表`n`，但我找不到它。）

在您的示例中，这给出了：

```
> allocate(3,ItemTime)
[[1]]
[1] 84 58 46 45  8  3     # total time: 244

[[2]]
[1] 84 55 55 21 16  8  5  # total time: 244

[[3]]
[1] 75 65 48 28 12 11  3  # total time: 242 
```

最后一步是计算出哪个工作对应哪个时间：这可以通过在分配时间后向后工作来完成（这可以在近似线性的时间内完成，因为从时间到工作的映射相对简单，*反之亦然*）或通过修改`allocate`和`assign.job`跟踪作业的索引（如果您要这样做，那么该[`order`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/order.html)函数将比`sort`使用数据帧而不是向量更有用，将时间存储在一个列中，将索引存储在另一列中）。

（应该注意，这个解决方案比另一个快几倍，因为另一个答案是使用更高功率的算法，这对于这个问题~~可能~~并不过分...... ~~“可能”，因为我仍然不是 100% 确定这个算法是最优的。~~）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-20T13:31:41.967

正如其他答案中所述，这与[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)有关。[BBmisc](http://cran.r-project.org/web/packages/BBmisc/BBmisc.pdf)包中已经实现了一个简单的装箱算法；我们可以在此处应用此现有功能以获得简单快速的解决方案：

```
library(BBmisc)

binlimit <- 3 # specify how many bins
binsize <- ceiling(sum(ItemTime)/binlimit) # calculate the minimum possible bin size (244)
binPack(ItemTime, binsize) # pack the bins

 [1] 3 1 2 3 3 2 2 3 3 3 2 3 1 3 2 3 3 1 3 3 
```

在这种情况下，它会立即使用 3 个 bin 生成最佳解决方案。我们可以确认解决方案的 bin 大小：

```
library(dplyr)
df <- data.frame(ItemTime, bins)
df %>% group_by(bins) %>% summarise (time = sum(ItemTime))

  bins time
1    1  243
2    2  244
3    3  243 
```

如果`binPack`使用太多 bin 生成初始解决方案，则可以将其放置在增加 binsize 的 for 循环中，并且仅在 的输出中不超过 3 个 bin 时返回解决方案`binPack`。

有趣的是， binPack 返回的解决方案具有与上述弗洛德尔答案相同的 bin 大小，但在 bin 2 和 3 中具有不同的分配：

```
 ItemTime Rglpk binPack
1         3     3       3
2        75     1       1
3        55     2       2
4        12     2       3
5        45     3       3
6        55     3       2
7        11     2       2
8         8     2       3
9        21     2       3
10       16     3       3
11       65     2       2
12       28     3       3
13       84     1       1
14        3     3       3
15       58     2       2
16       46     3       3
17        5     2       3
18       84     1       1
19        8     2       3
20       48     3       3 
```

虽然`binPack`提供了一种快速简单的方法来解决这个问题，但它的描述指出这个算法很简单，可能不会返回最优解：

> 将 x 中的数字项映射到总和小于或等于容量的组中。使用了一个非常简单的贪心算法，它并没有真正针对速度进行优化。这是较小向量的便利功能，而不是真正的 binbacking 问题的竞争求解器。如果 x 的元素超出容量，则会引发错误。

# jquery - Jquery 弹出模式必须居中

> ID：10467584
> 
> 赞同：4
> 
> 时间：2012-05-06T02:13:45.690
> 
> 标签：jquery, html, css

好的，我有这个代码：

```
 //When you click on a link with class of poplight and the href starts with  a # 
$('a.poplight[href^=#]').click(function() {
var a = $(this).attr('vd');
var b = $(this).attr('id');

    $.post('chk.php', { name : a, name2 : b }, function(output) {
    $('#con').html(output).show();
});

    var popID = $(this).attr('rel'); //Get Popup Name

    var popURL = $(this).attr('href'); //Get Popup href to define size

    //Pull Query & Variables from href URL

    var query= popURL.split('?');

    var dim= query[1].split('&');

    var popWidth = dim[0].split('=')[1]; //Gets the first query string value

    //Fade in the Popup and add close button

    $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a     href="#" class="close"><img src="images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>');

    //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css

    var popMargTop = ($('#' + popID).height() + 80) / 2;

    var popMargLeft = ($('#' + popID).width() + 80) / 2;

    //Apply Margin to Popup

    $('#' + popID).css({ 

        'margin-top' : -popMargTop,

        'margin-left' : -popMargLeft

    });

    //Fade in Background

    $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.

    $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer 

    return false;

});

//Close Popups and Fade Layer

$('a.close').live('click', function() { //When clicking on the close or fade layer...

    $('#fade , .popup_block, .login').fadeOut(function() {
    $('#fade').remove();

}); //fade them both out

    return false;

});
//end poup 
```

现在，每当用户单击具有 poplight 类的元素时，就会执行上面的代码，它应该显示具有 popup_block 类的 div，但在此之前调用了一个 ajax 函数，我对此没有问题，但是该div（具有popup_block的类）的中心主义丢失了，或者当你看到那里有一个实现该div的中心主义的代码时它看起来非常不稳定，但它没有，它只有在我指定位置时才居中css 或 css 上该 div 的宽度和高度，但我不想这样做，jquery 函数应该这样做（参见代码，它已在那里实现）。也许我的代码中缺少一些东西，或者我只是错过了一些东西，但无论如何，我不知道。请帮忙，我只是想在呼叫时将该 div 居中。谢谢你。

- div（有一个popup_block类）是固定定位的，z-index：99999并且默认不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:27:11.513

居中 div 必须与窗口有关。这是您如何做到这一点的方法。

假设`#div`是要居中的框

```
$("#div").css({
    marginTop : ($(window).height() - $(this).height())/2,
    marginLeft : ($(window).width() - $(this).width())/2,
}); 
```

如果您有一个`absolute`位置框，请分别使用`top`and`left`而不是`marginTop`and `marginLeft`。

```
$("#div").css({
    top : ($(window).height() - $(this).height())/2,
    left : ($(window).width() - $(this).width())/2,
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T14:05:52.950

这可能会有所帮助，

```
 $.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 2  + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2 + "px");
    return this;
}
$('.yourelement').center();
     $( window ).resize(function() {
        $('.yourelement').center();
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:19:09.577

我使用此[Using jQuery 中给出的代码将 DIV 居中在屏幕上，](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)以使我的弹出窗口居中，效果非常好。您可能想要使用`position:absolute`and`top`和`left`属性，而不仅仅是`margin-left`and`margin-top`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T02:27:47.730

我无法让自己真正阅读您的代码，因此我为您设置了几个示例：

* * *

### 固定尺寸元素的绝对居中

这种风格很容易。只需将元素位置设置为绝对，将其推至 50%/50% 并使用负边距将其宽度和高度拉回一半。

[jsFiddle 示例](http://jsfiddle.net/Codemonkey/KJkR7/)

* * *

### 动态大小的元素的绝对居中

这更棘手。最好的方法（至少在我看来）在不使用 Javascript 的情况下做到这一点是使用表格。您可以通过使用`display: table`CSS 样式来避免可怕的表格标签。使用表格，您可以将表格单元格的内容垂直和水平居中，但表格首先必须覆盖整个页面。

由于你不能`position: absolute`在桌子上使用，你需要给它一个`<div>`包装器来做到这一点。然后您可以将表格的宽度和高度设置为 100% 以覆盖整个视口。

最后，您放置一个具有 CSS 样式的 div，`display: inline-block;`以使其按`text-align`其父级的样式水平居中。多多！无论如何，该 div 现在完全居中。

[jsFiddle 示例](http://jsfiddle.net/Codemonkey/2SFLH/)

* * *

希望这有帮助

# apache-flex - 如何从出生日期计算 Adob e Flex 中的年龄

> ID：10467588
> 
> 赞同：0
> 
> 时间：2012-05-06T02:14:53.220
> 
> 标签：apache-flex, date

我已经阅读了一些关于此的主题，但我不理解代码，所以我会问一个专门针对我已经拥有的数据的问题。我的数据库有一个用户的出生日期，格式如下： `yyyy-mm-dd`

该字段是使用 php 服务从数据库中提取的，然后填充数据网格。我正在使用 ItemRenderer 来自定义列。我想拿我的出生日期来访问`{data.dob}`，然后计算出年龄。我是否必须先将结果分成天/月/年，然后计算？或者我可以从我回来的 DOB 中完成吗？我也看过使用日期的例子，`01/01/1970`但我不明白它是如何工作的。

非常感谢任何正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:00:01.930

您应该能够使用日期算术。只需从`data.dob`. 我会使用这个[DateUtils](http://flexdateutils.riaforge.org/)类。

这是一个[示例](http://flexoop.com/wp-content/uploads/FlexDateUtilsDemo/FlexDateUtilsDemo.html)。只需使用选择 DateDiff，然后选择出生日期作为您的第一个日期和今天的日期作为第二个日期。几年后得到答案，你就会知道这个人的年龄。

# regex - 如何改进我的正则表达式以包含空格和另一个选项？

> ID：10467591
> 
> 赞同：0
> 
> 时间：2012-05-06T02:16:20.807
> 
> 标签：regex

我当前的正则表达式通过查找第一个连字符之前的所有内容来工作：

`(?<=^)(.*?)(?=-)`. 例如在以下字符串中：

> 这是我想要的文字 - 不想要的文字 - 更不想要的文字

它找到“这是我想要的文本”。但在以下字符串中：

> 这是我想要的文本-不想要的文本-更不想要的文本

它只找到“This is the”。

我想修改我的正则表达式以查找直到第一个“ - ”的所有内容，包括空格。我还希望连字符可以与“~”互换。所以我想找到直到第一个“-”或“~”之前的所有内容。我尝试将其修改为：

`(?<=^)(.*?)(?=(\s-\s|\s~\s))` 但是 tis 不起作用。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:26:19.010

你为什么使用后视和前瞻？整个表达式是不必要的复杂并且`%`是非标准的。

```
^(.*?)(?: [-~] |$) 
```

会做你想做的。它从行首开始，然后匹配所有内容，直到“带空格的连字符或波浪号”或行尾。是`(?:...)`一个非捕获组，需要对两个备选方案进行分组。

# android - 如果我知道 Java，我需要知道什么才能将 Android 应用程序连接到 SQLite 数据库？

> ID：10467592
> 
> 赞同：-1
> 
> 时间：2012-05-06T02:16:29.153
> 
> 标签：android, database, sqlite

我想学习如何为 Android 和 SQLite 编写数据库。如果我知道 Java，我还需要学习什么才能构建数据库？您可以帮助我的任何其他信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:17:37.203

您需要了解 SQL、关系数据库和规范化规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T02:23:46.247

首先，您需要为服务器上的 SQLite 数据库安装、命名和建立凭据（用户名、密码、主机）。这是与执行此操作所需的 Android 类相关的链接：http: [//developer.android.com/reference/android/database/sqlite/package-summary.html](http://developer.android.com/reference/android/database/sqlite/package-summary.html)

然后你需要了解 JAVA 如何与 SQL 对话。我只熟悉 PHP->SQL，但这里有一个 JAVA->SQL 连接的链接，它看起来与 PHP [http://sqlzoo.net/java.htm](http://sqlzoo.net/java.htm)非常相似。

SQL 语言非常简单。

`SELECT`是从数据库表中获取行。

`INSERT`是插入行

`UPDATE`是更改行中的值（又名字段）

`DELETE`是删除行

虽然很多人可能会为此对我嗤之以鼻，但我从 SQL 语法（并将 PHP 连接到 SQL）开始：[W3CSchools](http://www.w3schools.com/sql/default.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T07:19:49.723

基本上，您需要一个 DatabaseHelper 类，DataBaseHelper.class 的示例：

```
import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;

import android.database.Cursor;
import android.database.SQLException;

import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;

import android.database.sqlite.SQLiteOpenHelper;
public class DBHelper extends SQLiteOpenHelper{

private String sql;
private SQLiteDatabase db;

//database name
private static final String NAME_DB = "Courses.sql";    

//database version
private static final int VERSION_DB = 1;

//database table name
public static final String COURSES_TABLE = "courses";

//database table columns for N_TABLE
public static final String ID_KEYROW= "_id";
public static final String ID_COURSE= "courseid";
public static final String ID_TITLE = "title";
public static final String ID_INSTRUCTOR = "instructor";
public static final String ID_LENGTH = "length";
public static final String ID_RATING = "rating";
public static final String ID_TOPIC = "topic";
public static final String ID_SUBJECT = "subject";
public static final String ID_DESCRIPTION = "description";  
//private final Context myContext;

public DBHelper(Context context) {
    super(context, NAME_DB, null, VERSION_DB);
    //this.myContext = context;
}
//Creating Table
@Override
public void onCreate(SQLiteDatabase db) 
{
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + COURSES_TABLE + "("
            + ID_KEYROW + " INTEGER PRIMARY KEY AUTOINCREMENT, "
            + ID_COURSE + " TEXT NOT NULL, "
            + ID_TITLE + " TEXT NOT NULL, "
            + ID_INSTRUCTOR + " TEXT NOT NULL, "
            + ID_LENGTH + " TEXT NOT NULL, "
            + ID_RATING + " TEXT NOT NULL, "
            + ID_TOPIC + " TEXT NOT NULL, "
            + ID_SUBJECT + " TEXT NOT NULL, "
            + ID_DESCRIPTION + " TEXT NOT NULL" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
    /* Other Method for Create DataBase.
    db.execSQL(" CREATE TABLE courses" + "(" + ID_KEYROW + " INTEGER PRIMARY KEY AUTOINCREMENT, " + ID_COURSE + " TEXT NOT NULL, " + ID_TITLE + " TEXT NOT NULL, " + ID_INSTRUCTOR + " TEXT NOT NULL, " + ID_LENGTH + " TEXT NOT NULL, " + ID_RATING + " TEXT NOT NULL, " + ID_TOPIC + " TEXT NOT NULL, " + ID_SUBJECT + " TEXT NOT NULL, " + ID_DESCRIPTION + " TEXT NOT NULL);"
            );*/    
}       

//Updating Database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    db.execSQL("DROP TABLE IF EXISTS " + COURSES_TABLE);
    onCreate(db);
}
//Insert Courses
//public void insertCourses(Integer courseid, String title, String instructor, Integer length, Integer rating, String topic, String subject, String description)
public void insertCourses()
{
    SQLiteDatabase db= this.getWritableDatabase();

    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('1', 'Interdisciplinary Care Planning', 'Keith Savell', '60', '4.7', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to...', 'Encourage the Interdisciplinary Treatment Team (IDT) to work as a team and view the Care Plan as a resident-centered collaborative effort  to enhance the care and quality of resident life.', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to utilize the Care Plan to truly function as a team - working together to enhance the care and quality of resident life.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('2', 'Culture Change: Creating A Climate Of Care...', 'Keith Savell', '60', '5', 'Culture Change ', 'Learn to evaluate and modify the environment to support our residents with cognitive impairment as they age in place.', 'Residents with dementia and delirium are constantly assessing the environment, looking for clues to help them understand where they are, who others around them are, what they are supposed to be doing and what is expected of them.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('3', 'Medical Records Documentation', 'Keith Savell', '60', '5', 'Medical Records Documentation ', 'Encourage the Interdisciplinary Treatment Team (IDT) to work as a team and view the Care Plan as a resident-centered collaborative effort  to enhance the care and quality of resident life.', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to utilize the Care Plan to truly function as a team - working together to enhance the care and quality of resident life.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('4', 'Census Challenges', 'Keith Savell', '60', '4.45', 'Creative Solutions to Drive Census ', 'Learn to evaluate and modify the environment to support our residents with cognitive impairment as they age in place.', 'Residents with dementia and delirium are constantly assessing the environment, looking for clues to help them understand where they are, who others around them are, what they are supposed to be doing and what is expected of them.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('5', 'Fall Prevention: Reducing Fall Related Injuries', 'Keith Savell', '60', '5', 'Guidelines for Health Care Providers ', 'Encourage the Interdisciplinary Treatment Team (IDT) to work as a team and view the Care Plan as a resident-centered collaborative effort  to enhance the care and quality of resident life.', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to utilize the Care Plan to truly function as a team - working together to enhance the care and quality of resident life.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('6', 'Meaningful Engagement', 'Keith Savell', '60', '5', 'Creating The Failure Free Activity Program ', 'Learn to evaluate and modify the environment to support our residents with cognitive impairment as they age in place.', 'Residents with dementia and delirium are constantly assessing the environment, looking for clues to help them understand where they are, who others around them are, what they are supposed to be doing and what is expected of them.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('7', 'Dementia and Delirium', 'Keith Savell', '60', '4.69', 'The Importance of Accurate Diagnosis and Treatment ', 'Encourage the Interdisciplinary Treatment Team (IDT) to work as a team and view the Care Plan as a resident-centered collaborative effort  to enhance the care and quality of resident life.', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to utilize the Care Plan to truly function as a team - working together to enhance the care and quality of resident life.')";
    db.execSQL(sql);
    sql="INSERT INTO courses(courseid, title, instructor,  length, rating, topic, subject, description) VALUES ('8', 'Delirium', 'Keith Savell', '60', '4.69', 'The Importance of Accurate Diagnosis and Treatment ', 'Encourage the Interdisciplinary Treatment Team (IDT) to work as a team and view the Care Plan as a resident-centered collaborative effort  to enhance the care and quality of resident life.', 'Interdisciplinary Care Planning requires members of the Interdisciplinary Treatment Team (IDT) to view the Care Plan as a resident centered collaborative effort - rather than as a staff centered document. Learn how to utilize the Care Plan to truly function as a team - working together to enhance the care and quality of resident life.')";
    db.execSQL(sql);

    //Other Style for Insert record in DB.
    ContentValues values = new ContentValues(); //Here from ContentValues
    values.put("courseid", "9");
    values.put("title", "xxxxxxx Care Planning");
    values.put("instructor", "Keith Savell");
    values.put("length", "60");
    values.put("rating", "4.7");
    values.put("topic", "some topic");
    values.put("subject", "some subject");
    values.put("description", "some description");
    db.insert(COURSES_TABLE, null, values);
}

public ArrayList<Courses> getCourses()
{
    db = getWritableDatabase();
    sql = "SELECT courseid, title, instructor, length, rating, topic, subject, description FROM courses";
    Cursor cursor = db.rawQuery(sql, null);
    ArrayList<Courses> courses = new ArrayList<Courses>();

    while (cursor.moveToNext())
    {
        Courses oCourses=new Courses();

        oCourses.courseid=cursor.getInt(0);
        oCourses.title=cursor.getString(1); //Original Value 0
        oCourses.instructor=cursor.getString(2);
        oCourses.length=cursor.getString(3);
        oCourses.rating=cursor.getString(4);
        oCourses.topic=cursor.getString(5);
        oCourses.subject=cursor.getString(6);
        oCourses.description=cursor.getString(7);
        courses.add(oCourses);          
    }       
    db.close();
    cursor.close();
    return courses;     
}

public ArrayList<Courses> getItem(int position)
{
    db = getWritableDatabase();
    sql = "SELECT courseid, title, instructor, length, rating, topic, subject, description FROM courses";
    Cursor cursor = db.rawQuery(sql, null);
    ArrayList<Courses> courses = new ArrayList<Courses>();

    while (cursor.moveToNext())
    {
        Courses oCourses=new Courses();

        oCourses.courseid=cursor.getInt(0);
        oCourses.title=cursor.getString(1); //Original Value 0
        oCourses.instructor=cursor.getString(2);
        oCourses.length=cursor.getString(3);
        oCourses.rating=cursor.getString(4);
        oCourses.topic=cursor.getString(5);
        oCourses.subject=cursor.getString(6);
        oCourses.description=cursor.getString(7);
        courses.add(oCourses);          
    }
    db.close();
    cursor.close();
    return courses;

}

public int getRowCount() {
    String countQuery = "SELECT * FROM " + COURSES_TABLE;
    SQLiteDatabase db =this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();
    //return row count.
    return rowCount;
}//GetRowCount

//Recreate database, delete all tables and create them again.
 public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(COURSES_TABLE, null, null);
        db.close();
    }} 
```

稍后在您的 Mainclass（或您想要管理数据的活动）中调用 DatabaseHelper.class 的方法，希望这能给您一些想法......

# iphone - 为什么这段代码不起作用？？？如果向右或向左滑动，尝试从 UIImageView 更改图像

> ID：10467603
> 
> 赞同：0
> 
> 时间：2012-05-06T02:20:06.243
> 
> 标签：iphone, ios, xcode, uiimageview

我疯了为什么下面的代码不起作用......

我有一个带有 UIImageView 的简单 UIViewController ，如果用户向右或向左滑动，我想尝试更改图像。我是 iphone 开发新手；

谢谢

```
#import "SummerViewController.h"

@implementation SummerViewController

//@synthesize scroll;
@synthesize imgClothes, images;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)LeftSwiped
{
    NSLog(@"swiped left");
    imgClothes.image = [UIImage imageNamed:[images objectAtIndex:0]];

}

-(void)RightSwiped
{
    NSLog(@"swiped right");
    imgClothes.image = [UIImage imageNamed:[images objectAtIndex:1]];
}

- (void)viewDidLoad
{

    images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.jpg"],
                       [UIImage imageNamed:@"2.jpg"], nil];

    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(LeftSwiped)];

    swipeLeft.numberOfTouchesRequired = 1;
    swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.view addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(RightSwiped)];

    swipeRight.numberOfTouchesRequired = 1;
    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    [self.view addGestureRecognizer:swipeRight];

    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

.h 文件：

```
@interface SummerViewController : UIViewController
{
    //IBOutlet UIScrollView *scroll;
    IBOutlet UIImageView *imgClothes;
    NSArray *images;
}

@property (nonatomic, retain) IBOutlet UIImageView *imgClothes;
@property (nonatomic, retain) IBOutlet NSArray *images;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:41:11.603

1.  我看不到你在哪里初始化你的`UIImageView *imgClothes`. 你应该写类似`imgClothes = [[UIImageView alloc] init(...)];`
2.  我没有使用 UISwipeGestureRecognizer，但有时你应该在 .h 文件中这样写：`@interface SummerViewController : UIViewController <UIGestureRecognizerDelegate>`
3.  我更喜欢在 中进行初始化`initWithNibName`，而不是在`ViewDidLoad`. 但这不应该是您的问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T02:44:14.847

您的所有代码对于更改 UIImageView 的图像都是正确的。根据您的代码片段，我发现了两种情况

1.确保将来自 XIB 的 IBOutlet 引用添加到**imgClothes**
2.如果符合“1”点，请尝试检查是否添加到 self.view 中的**imgClothes**引用。

希望以上两种情况都能解决问题。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T02:46:34.460

不要忘记一件事

1) `swipeRight.delegate = self;`// 将委托分配给滑动对象。

如果您使用的是 sdk 3.2 或更高版本，则使用 UIGestureRecognizer 类非常容易。否则请访问以下参考以检测滑动

`https://gist.github.com/791725`

希望对你有帮助..

# java - JTextPane 不会换行？

> ID：10467605
> 
> 赞同：2
> 
> 时间：2012-05-06T02:21:00.990
> 
> 标签：java, html, swing, jtextpane

我在我的 JTextPanel 中显示 RSS 提要。显示的结果不会换行。如何在 JTextPane 中插入 '\n'？谢谢！

writeNews 类：

```
 public String writeNews() 
        {
            String result = "";

            try 
        {               
            DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            URL u = new URL("http://thestar.com.my.feedsportal.com/c/33048/f/534600/index.rss"); 

            Document doc = builder.parse(u.openStream());
            NodeList nodes = doc.getElementsByTagName("item");

            for(int i=0;i<nodes.getLength();i++) 
            {                
                Element element = (Element)nodes.item(i);           

                result += "\nTitle: " + getElementValue(element,"title");               
                result += "\nLink: " + getElementValue(element,"link");
                result += "\nPublish Date: " + getElementValue(element,"pubDate");
                result += "\nDescription: " + getElementValue(element,"description");

                System.out.println("Title: " + getElementValue(element,"title"));
                System.out.println("Link: " + getElementValue(element,"link"));
                System.out.println("Publish Date: " + getElementValue(element,"pubDate"));
                System.out.println("Description: " + getElementValue(element,"description"));
                System.out.println();

            }
        }

        catch(Exception ex) 
        {
            ex.printStackTrace();
        }

        return result;
    } 
```

结果显示在一个简单的 JTextPane 上：

```
public void news()
    {
        news = new JPanel(new GridLayout());
        news.setBackground(SystemColor.inactiveCaptionBorder);

        JTextPane newsTextPane = new JTextPane(); 
        newsTextPane.setContentType("text/html");
        newsTextPane.setEditable(false); 

        JScrollPane scrollPane = new JScrollPane(newsTextPane);     
        news.add(scrollPane);   

        TextSamplerDemo reader = TextSamplerDemo.getInstance();
        reader.writeNews();             

        String rssNews = reader.writeNews();
        newsTextPane.setText(rssNews);

    } 
```

JTextPane 视图： ![JTextPane 视图](../Images/5ca78c0eb22c52a1a226cb3ea226465c.png)

控制台视图： ![控制台视图](../Images/602bff07717ddfb104f192d3d8d66ad4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:47:06.230

这是一个可能的解决方法，

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;

public class TestLineBreak {

    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10; i++) {
            sb.append("Text goes here <br>"); //<br> tag to insert line breaks
        }
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextPane newsTextPane = new JTextPane();
        newsTextPane.setContentType("text/html");
        newsTextPane.setEditable(false);
        newsTextPane.setText(sb.toString());

        JScrollPane scrollPane = new JScrollPane(newsTextPane);
        frame.add(scrollPane);
        frame.setSize(300, 200);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T02:28:52.733

```
result += "Title: " + getElementValue(element,"title");             
result += "Link: " + getElementValue(element,"link");
result += "Publish Date: " + getElementValue(element,"pubDate");
result += "Description: " + getElementValue(element,"description"); 
```

当你创建你的`String`时，你永远不会使用新行。将换行符添加到每行的开头（第一行除外）或将换行符添加到每行的末尾（最后一行除外）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-04T13:05:52.543

伙计们..上述2个答案的工作方式在逻辑上是正确的，但我们应该从java提供的内置类和功能中获得帮助。

如果您要添加与问题类似的其他功能，您也可以通过以下方式购买

请参阅[http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DefaultEditorKit.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DefaultEditorKit.html)

# windows - 未为 IIS 网站绑定列出 IP 地址

> ID：10467606
> 
> 赞同：0
> 
> 时间：2012-05-06T02:21:18.543
> 
> 标签：windows, iis, binding, ip

最近购买了一个windows云服务器godaddy。现在我安装了 iis7 和所有其他必需的软件。我有 50.62.1.89 和另外 2 个公共 ip。我也有一个私人 ip 10.1.0.2。现在的问题是无法通过任何公共 ip 访问任何网站。我所有的公共 ip 都只打开默认网站。我也看不到 IIS 网站绑定的公共 ip。仅列出了用于 IIS 绑定的我的私有 ip。

而且在我的服务器中也只公开默认网站。但我能够使用私人 ip 打开网站。但是我的公共 IP 地址正确地指向了我的服务器。能够使用公共 IP 使用远程桌面打开我的服务器。同样正如我所说，已经从 IIS 开放默认网站的公共 ip 没有问题。

请帮我。最近两天很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:57:28.753

IIS 中的绑定应使用内部 IP。您将拥有端口转发规则或负载平衡规则，它们采用外部 IP 并将其转换为内部 IP。翻译后，虚拟机将使用内部 IP 进行所有操作，包括 IIS 中的绑定。当请求离开服务器时，请求将被转换回外部 IP。

以下是为工作网站设置 IIS 的步骤：

1.  在 Go Daddy 云服务器控制台中创建或拥有一个已经工作的网络。
2.  创建一个 Windows 虚拟机
3.  在开始
4.  管理工具
5.  服务器管理器
6.  角色
7.  网络服务器 IIS
8.  右键单击站点
9.  添加网站
10.  网站名称：mysite.com
11.  物理路径：选择您的网站将在文件系统上存在的路径。这个例子我们将创建和使用：`c:\inetpub\wwwroot\mysite.com`
12.  绑定：所有未分配的端口 80
13.  主机名 mysite.com
14.  点击确定
15.  右键单击 mysite.com
16.  编辑绑定
17.  添加
18.  主机名：www.mysite.com
19.  点击确定
20.  将您的内容添加到：`c:\inetpub\wwwroot\mysite.com`
21.  从 Go Daddy 云服务器控制台添加端口转发到公共 IP，请参阅：

[http://support.godaddy.com/help/6197](http://support.godaddy.com/help/6197)

此时，如果您转到您的publicIP，您将看到 IIS7 欢迎页面。这是因为此 IP 归 IIS 中的默认站点所有。

如果您已经拥有指向您的公共 IP 的域，即 mysite.com 解析为您的公共 IP 地址，那么访问 mysite.com 将在您的网络浏览器中工作。

如果您没有将 DNS 指向公共 IP，则可以编辑本地计算机上的 hosts 文件，以使域*仅*在您的计算机上解析为该 IP ：

路径见：

[http://support.godaddy.com/help/3354/viewing-your-website-before-sharing-your-nameservers-using-host-files](http://support.godaddy.com/help/3354/viewing-your-website-before-changing-your-nameservers-using-host-files)

在一行中添加一个条目，例如：mysite.com 50.62.1.89

保存并关闭文件。

关闭您的网络浏览器，重新打开，然后转到 mysite.com。它应该按预期工作。

使用上述方法，您可以在 50.62.1.89 IP 地址上放置任意数量的网站。

如果您希望网站*拥有*该 IP 地址的所有内容。

1.  开始
2.  管理工具
3.  服务器管理器
4.  角色
5.  网络服务器 IIS
6.  右键单击 mysite.com
7.  编辑绑定
8.  添加
9.  IP地址：10.1.0.2
10.  好的

现在转到您的公共 IP 地址将显示您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:45:48.197

您应该查看 GoDaddy 文档（或询问 GoDaddy 支持），了解如何配置云服务器：

*   私有 IP 地址在 Internet 上不可路由
*   如果您只在服务器上看到私有 IP 地址 (10.xxx)（由 GoDaddy 配置），那么这意味着有一个“路由系统”（nlb、防火墙等）将您的公共 IP 路由到您的私有 IP - 那就是您可以“使用公共 IP 浏览您的网站”的唯一方法 - 有一个 NAT（转换器）将公共 IP 映射到您的私有 IP/s（和端口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T03:06:52.880

很有意思。我认为这个问题与 GoDaddy 或使用端口转发配置内部 IP 无关。仅仅因为一个人“应该”将他们的网站绑定到本地 IP，并不意味着他们可以。他们可能没有能够进行端口转发的路由器，因此可能别无选择，只能将站点绑定到外部 IP。

问的问题是为什么他们的外部 IP（绑定到 NIC）没有显示在 IIS 绑定 IP 选择框中。这是一个有效的问题，我碰巧有同样的问题。我有 20 个 IP 中的 1 个未显示在绑定中。其他都是。哇！！！！

# javascript - 页面加载后使用 javascript 和 for 循环预加载图像

> ID：10467608
> 
> 赞同：3
> 
> 时间：2012-05-06T02:22:13.520
> 
> 标签：javascript, image, loops, for-loop, preload

我目前正在创建一个网页照片库。我有很多图像我想*在页面加载后用 Javascript 预加载*。与其在我的数组中拥有一个非常非常长的 HTML 链接列表，是否可以利用`for`循环？请看我下面的代码。任何关于我在 for 循环中做错的有用见解都将非常感激！谢谢！！

```
<script type="text/javascript">
    function preloader() {
        var images = new Array()
        function preload() {
            for (i = 0; i < preload.arguments.length; i++) {
                images[i] = new Image()
                images[i].src = preload.arguments[i]
            }
        }
        preload(
            var i=1;
            "http://example.com/images/gallery/elephants-" + for (i=1;i<=5;i++) {document.write(i);} + ".jpg",
            "http://example.com/images/gallery/penguins-" + for (i=1;i<=2;i++) {document.write(i);} + ".png"
        )
    }

    function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
            window.onload = func;
        } else {
            window.onload = function() {
                if (oldonload) {
                    oldonload();
                }
                func();
            }
        }
    }
    addLoadEvent(preloader);
</script> 
```

我遇到问题的部分是该部分中的`for`循环`preload()`。该`preload()`部分应输出/执行此操作：

```
preload(
    "http://example.com/images/gallery/elephants-1.jpg",
    "http://example.com/images/gallery/elephants-2.jpg",
    "http://example.com/images/gallery/elephants-3.jpg",
    "http://example.com/images/gallery/elephants-4.jpg",
    "http://example.com/images/gallery/elephants-5.jpg",
    "http://example.com/images/gallery/penguins-1.png",
    "http://example.com/images/gallery/penguins-2.png"
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:34:36.150

您不能将字符串和循环连接在一起。您必须使用循环和[push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)方法构建一个字符串数组：

```
var i, urls = [];
for(i = 1; i <= 5; i++)
    urls.push('http://example.com/images/gallery/elephants-' + i + '.jpg');
for(i = 1; i <= 2; i++)
    urls.push('http://example.com/images/gallery/penguins-' + i + '.jpg'); 
```

然后使用[apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)调用 preload 函数并将该数组作为参数传递：

```
preload.apply(null, urls); 
```

因此，您的整个预加载器功能变为：

```
function preloader() {
    var images = new Array()
    function preload() {
        for (i = 0; i < preload.arguments.length; i++) {
            images[i] = new Image()
            images[i].src = preload.arguments[i]
        }
    }

    var i, urls = [];
    for(i = 1; i <= 5; i++)
        urls.push('http://example.com/images/gallery/elephants-' + i + '.jpg');
    for(i = 1; i <= 2; i++)
        urls.push('http://example.com/images/gallery/penguins-' + i + '.jpg');

    preload.apply(null, urls);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:36:52.537

您已经定义了一个采用零参数的预加载函数，但您正试图将多个参数传递给预加载函数。此外，您使用分号而不是必需的逗号来分隔参数。

为此，我建议修改您的预加载函数以获取单个数组对象，然后您可以迭代该对象，而不管将多少参数传递给函数。下面是一个示例函数定义：

```
function preload(arr) {
    for(var i = 0; i < arr.length; i++) {
        var img = document.createElement("img");
        img.setAttribute("style","display:none");
        img.setAttribute("src",arr[i]);
        document.body.appendChild(img);
    }
} 
```

要使用该函数，您可以使用 JavaScript 对象表示法将 URL 数组传递给 preload 函数来表示该数组。

```
preload( 
    [ 
        "/images/first.png",
        "/images/second.png",
        "/images/third.png"
    ]
); 
```

该数组包含 3 个字符串，这 3 个字符串中的每一个都将被传递到单独的隐藏图像标签的 src 属性中。

我对具体示例的唯一免责声明是某些版本的 IE 可能会也可能不会缓存隐藏的图像。无论何时使用原始 JavaScript，而不是像 jQuery 这样的库，您都需要在每个浏览器中进行彻底的测试，以确保解决方案是交叉兼容的。也许您可以简单地修改您的函数以接受正确的参数，然后使用您现有的技术来预加载图像，假设您的解决方案是一个久经考验的解决方案，您知道它适用于您计划支持的所有浏览器。

# asp.net - 在 datalist 中显示一些 datalist 行的子行

> ID：10467609
> 
> 赞同：0
> 
> 时间：2012-05-06T02:22:54.207
> 
> 标签：asp.net, sql-server-2008, datalist

我正在尝试开发一些用户论坛类型的页面。我有一个数据列表，其中绑定了主要论坛主题。它的工作。现在我需要在特定主题下方显示回复或建议（数据列表中的特定行）。它将是这样的

数据列表

话题一

回复 1

回复 2

回复 3

主题 2

回复 1

回复 2

回复 3

像这样 。

我已将主题绑定在 datalist 中。主题的表名是 alltopics。对任何主题的回复都存储在另一个名为 tblreply 的表中。我已经绑定了 datalist 中的主题。但不知道如何做另一部分。谁能帮我吗

这是我用于数据列表的代码

```
 Sub binddata5()
                    Dim mycommand As New SqlCommand("SELECT * from alltopics", con)

        con.Open()
        topics.DataSource = mycommand.ExecuteReader
        topics.DataBind()
        con.Close() 
```

数据表设计

```
 <asp:DataList ID="topics" runat="server" DataKeyField="id" 
              RepeatColumns="1">
                 <ItemTemplate>
                 <div>&nbsp&nbsp<strong><asp:Label
                      ID="detail" runat="server" Text='<%#Container.DataItem("topicdetails")%>'></asp:Label></strong>&nbsp&nbsp on &nbsp&nbsp<asp:Label ID="date" runat="server" Text='<%#Container.DataItem("ondate")%>'></asp:Label></td></tr>
                    </div>

                          </ItemTemplate>
                 </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:46:45.230

HTML 标记

```
<div>
    <asp:DataList ID="DataList1" runat="server" DataKeyField="bill_id" 
        DataSourceID="SqlDataSource1" OnItemDataBound="loaditems">
        <ItemTemplate>
            bill_id:
            <asp:Label ID="bill_idLabel" runat="server" Text='<%# Eval("bill_id") %>' />
            <br />
            bill_date:
            <asp:Label ID="bill_dateLabel" runat="server" Text='<%# Eval("bill_date") %>' />
            <br />
            bill_del_date:
            <asp:Label ID="bill_del_dateLabel" runat="server" 
                Text='<%# Eval("bill_del_date") %>' />
            <br />
            bill_pat_id:
            <asp:Label ID="bill_pat_idLabel" runat="server" 
                Text='<%# Eval("bill_pat_id") %>' />
            <br />
            <asp:DataList ID="DataList2" runat="server" DataKeyField="test_id">
                <ItemTemplate>
                    test_id:
                    <asp:Label ID="test_idLabel" runat="server" Text='<%# Eval("test_id") %>' />
                    <br />
                    <br />
                </ItemTemplate>
            </asp:DataList>
            <br />
        </ItemTemplate>
    </asp:DataList>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:Diagnosticsql %>" 
        SelectCommand="SELECT * FROM [BILL]"></asp:SqlDataSource>
    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:Diagnosticsql %>"             
        SelectCommand="SELECT * FROM [TEST] WHERE ([test_bill_id] like @test_bill_id)">
        <SelectParameters>
            <asp:Parameter Name="test_bill_id" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource>
</div> 
```

背后的代码

```
Protected Sub loaditems(ByVal sender As Object, ByVal e As DataListItemEventArgs) Handles DataList1.ItemDataBound
    If (e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem) Then
        Dim billidlabel As Label = CType(e.Item.FindControl("bill_idLabel"), Label)
        Dim servicelist As DataList = CType(e.Item.FindControl("DataList2"), DataList)
        Me.SqlDataSource2.SelectParameters("test_bill_id").DefaultValue = billidlabel.Text
        servicelist.DataSourceID = SqlDataSource2.ID
    End If
End Sub 
```

# javascript - 获取最后一个元素

> ID：10467611
> 
> 赞同：1
> 
> 时间：2012-05-06T02:23:31.327
> 
> 标签：javascript, jquery, dom-traversal

我有一个包含对象的数组，这些对象的顺序相同，并且对应于`li`a 的`ul`。

我想知道这样做之间是否有任何微不足道的区别：

(this.element is the `ul`'s)
`this.element.children(".tagit-choice:last").remove();`
vs
(this.tagsArray is the array of objects about the `li`'s)
`this.tagsArray[this.tagsArray.length -1].element.remove();`

或者有没有更好的方法（注意当它被称为 tagsArray 时总会有一些东西，所以得到 -1 的索引不是问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:25:31.737

选择更具可读性和可维护性的选项：

```
.children(".tagit-choice:last").remove(); 
```

# matlab - 减去满足特定条件的给定数组的值：

> ID：10467613
> 
> 赞同：0
> 
> 时间：2012-05-06T02:23:49.307
> 
> 标签：matlab

```
a = [0.04 0.07 0.09 0.13 0.14 0.17 0.21 0.24
0.14 0.06 0.08 0.15 0.11 0.13 0.10 0.11
0.13 0.13 0.11 0.15 0.10 0.07 0.14 0.11
0.12 0.04 0.18 0.13 0.19 0.16 0.14 0.11
0.18 0.06 0.22 0.15 0.14 0.06 0.08 0.09
0.15 0.04 0.08 0.06 0.13 0.05 0.10 0.09]

C = cov(a)
alpha = 0.12
beta = (.20-.12)

for i = 1 : 6
    for j = 1 : 8
        f(i,j) = alpha + beta*rand(1)
    end     
    % f(i,1)=f(i,1)/sum;f(i,2)=f(i,2)/sum;f(i,3)=f(i,3)/sum;
end
total = sum(f,2)
while total(i,1) > .999 & total (i,1) <.977
    for i = 1:6
        for i = 1:8
            f(i,j) = f(i,j) - .0001
        end
    end
end 
```

我一直在尝试从数组的每个元素中减去 .0001，`f`这样数组元素的每个结果元素的值应该在 0.12 和 0.20 之间，并且按行排列，数组的总和（`total`代码中的变量）`f` 应该几乎等于 1 . 几乎我的意思是总和的值（`total`代码中的变量）应该小于 ( `<`) 0.999 并且大于 ( `>`) .977

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:44:54.850

```
lb = 0.12; 
ub = 0.20;
sensitivity = 0.02;
inc = 0.001;

f = lb + (ub-lb).*rand([6,8]); % See Note Below
total = sum(f,2);
f = f./repmat(total + sensitivity,[1,8]);

while(any(any(g<lb)) || any(any(g>ub)) || any(total>0.99) || any(total<0.97))

    f(f<lb) = lb + inc;
    f(f>ub) = ub - inc;

    total = sum(g,2);
    f = f./repmat(total + sensitivity,[1,8]);
    inc = inc + 0.001;
end 
```

注意：通常，当您可以进行矩阵操作时，在 matlab 中进行嵌套 for 循环是不好的。因此，这一行替换了您必须创建 f 或从中递减的嵌套 for 循环。

此代码应为您提供一个矩阵 f，其中 (1) 的值介于 0.12 (lb) 和 0.20 (ub) 之间，并且行总和约为 0.98。

# php - Nusoap：使用命名空间解析 XML 时出错

> ID：10467619
> 
> 赞同：4
> 
> 时间：2012-05-06T02:25:11.523
> 
> 标签：php, xml, namespaces, nusoap

我正在使用 NuSoap 进行网络服务。作为回应，我得到了带有命名空间的 xml，例如：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none" s:mustUnderstand="1">ABC.CS.Ia.Cts.Ees.Au/IAuth/A</Action>
  </s:Header>
  <s:Body>
    <A xmlns="ABC.CS.Ia.Cts.Ees.Au">
      <Au xmlns:d1="ABC.CS.Ia.Cts.Ees.Au" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <d1:Res>Q1</d1:Res>
        <d1:n>jFn</d1:n>
      </Au>
    </A>
  </s:Body>
</s:Envelope> 
```

$xml_feed = simplexml_load_string($xmlString);

现在我想解析它。我使用了 simplexml_load_string 函数，但收到警告并且该函数没有返回任何内容。

**警告：simplexml_load_string() [function.simplexml-load-string]：实体：第 7 行：解析器警告：xmlns：URI BC.CS.Ia.Cts.Ees.Au 在 C:\xampp\htdocs\test 中不是绝对的。第 38 行的 php 警告：simplexml_load_string() [function.simplexml-load-string]：在 C:\xampp\htdocs\test.php 第 38 行警告：simplexml_load_string() [function.simplexml-load-string]: ^ in C:\xampp\htdocs\test.php 在第 38 行**

有知道的请帮帮我..

-itin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T20:54:31.600

看起来您没有正确访问 XML 对象，此函数将正确检索 xpath 子项：

```
function parseSOAPXmlTest($str) {
  //parse xml      
  $xml = simplexml_load_string($str);
  echo "xml=" . print_r($xml, true);  

  if( $xml === false ) { throw new Exception("OBJ is malformed!"); }
  foreach($xml->xpath('//s:Header') as $header) {
     if( empty($header) ) { throw new Exception("Header is malformed or missing!"); }
     echo "header=" . print_r($header, true);  
  }      

  foreach($xml->xpath('//s:Body') as $body) {

     if( empty($body) ) { throw new Exception("Body is malformed or missing!"); }
     echo "body=" . print_r($body, true);  
     foreach($body->A->Au->xpath('//d1:Res') as $Reschild) {
        echo "Reschild=" . print_r($Reschild, true);  
     }
     foreach($body->A->Au->xpath('//d1:n') as $nchild) {
        echo "nchild=" . print_r($nchild, true);  
     }
  } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:43:10.277

当存在肥皂信封时，SimpleXML 无法解析。

见下文：

[PHP - SimpleXML 不返回对象](https://stackoverflow.com/questions/7092079/php-simplexml-not-returning-object)

# python - 通过base64上传文件

> ID：10467623
> 
> 赞同：3
> 
> 时间：2012-05-06T02:25:47.477
> 
> 标签：python, django, base64

我正在使用 django-avatars 为我的网站处理用户个人资料头像。我目前正在为该网站开发一个原生 Android 应用程序，其中包括用户上传头像的功能。我通过以base 64编码的get参数传递图像数据。在我的Django视图中，我有

```
data = base64.b64decode(request.POST['data'])    
out = open("etc/test.jpeg", "wb")
out.write(data)
out.close() 
```

解码图像。这工作正常（test.jpeg 是我想要的文件），但我无法将其绑定到 django-avatars。

翻翻django-avatars的源码，下面是用来新建头像的：

```
avatar = Avatar(
    user = request.user,
    primary = True,
)
image_file = request.FILES['avatar']
avatar.avatar.save(image_file.name, image_file)
avatar.save() 
```

我的问题是，如何将我的文件数据转换为所需的 request.FILES 格式，（或者重写保存方法以接受我的格式的最简单方法是什么）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T03:01:15.063

`request.FILES`元素是包装器中的类似文件。将文件数据粘贴在 a 中`StringIO`，将其传递给[`django.core.files.File`](https://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File)构造函数，然后将*其*传递给`save()`.

# php - 为什么我在自定义 PHP 代码中出现 SQL 语法错误？

> ID：10467624
> 
> 赞同：0
> 
> 时间：2012-05-06T02:26:24.533
> 
> 标签：php, sql

我正在尝试构建更新查询，但我不断收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '='Damien', `last_name`='Surname', where `id`='49''附近使用正确的语法

我的PHP如下：

```
if($get['cmd'] == 'sname')
{
mysql_query("update users 
`first_name`='$get[first_name]', 
`last_name`='$get[last_name]',
where `id`='$get[id]'") or die(mysql_error());
//header("Location: $ret"); 
echo "changes done";
exit();
} 
```

和HTML如下

```
<input name="doSave" type="button" id="doSave" value="Save" onclick='$.get("dos.php",{ cmd: "sname",first_name:$("input#first_name").val(),last_name:$("input#last_name").val(),id: "<?php echo $row_settings['id']; ?>" } ,function(data){ $("#msg").html(data); });'> 
```

任何人都可以看到我的代码中有什么问题会给我这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T02:38:11.937

如果我没记错，则需要 SET 关键字，并且要删除多余的逗号。如果我错了，请纠正我...

```
if($get['cmd'] == 'sname')
{
    mysql_query("update users SET 
    first_name ='$get[first_name]', 
    last_name ='$get[last_name]'
    where id ='$get[id]'") or die(mysql_error());
    //header("Location: $ret"); 
    echo "changes done";
    exit();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T02:27:27.177

您`comma`在以下声明之后有一个不需要的。

```
`last_name`='$get[last_name]', 
```

应该如下所述。请注意，`comma` 已从该行的末尾删除。

```
`last_name`='$get[last_name]' 
```

# ruby - 如何检索当前方法名称以便将其输出到记录器文件？

> ID：10467625
> 
> 赞同：7
> 
> 时间：2012-05-06T02:27:04.233
> 
> 标签：ruby, methods

我正在使用 Ruby on Rails 3.2.2，并且为了显示警告消息以用于开发目的，我`logger.warn`在我的代码中使用。我想检索运行的*方法名称*，`logger.warn`以便将该方法名称输出到日志文件。

```
class ClassName < ActiveRecord::Base
  def method_name
    # Note: This code doesn't work. It is just a sample.
    logger.warn "I would like to retrieve and display the #{self.class.to_s}##{method_name}"
  end
end 
```

在日志文件中，我想查看：

> 我想检索并显示 ClassName#method_name

是否可以？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-06T03:00:00.510

```
class ClassName < ActiveRecord::Base
  def method_name
    logger.warn("I would like to retrieve and display the #{self.class}##{__method__}")
  end
end 
```

这应该可以完成这项工作。

# android - android如何选择图标大小

> ID：10467627
> 
> 赞同：1
> 
> 时间：2012-05-06T02:27:12.297
> 
> 标签：android, icons

我在下面尝试了 HTC 的欲望，得到了 240 48 160 48。

所以任何人都可以帮助解决我的疑问： 1\. UI 指南建议图标为 72px。为什么我得到标准的 48 像素？为什么系统加载我的 48px 图标而不是 72px？2\. 什么是resources.getDisplayMetrics()？为什么它与 getWindowManager().getDefaultDisplay().getMetrics(dm) 不同？

```
 final DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    float den = dm.density;
    int dpi = dm.densityDpi;

    final Resources resources = getResources();
    final DisplayMetrics metrics = resources.getDisplayMetrics();
BitmapDrawable bd = (BitmapDrawable) resources.getDrawable(R.drawable.icon);
    ((TextView)findViewById(R.id.txt)).setText(Float.toString(den) 
            + " " + Integer.toString(dpi)
            + " " + Integer.toString((int)     getResources().getDimension(android.R.dimen.app_icon_size))
            + " " + Integer.toString(metrics.densityDpi)
            + " " + Integer.toString(bd.getIntrinsicHeight())); 
```

# c++ - 获取应用程序正在运行的 ip

> ID：10467635
> 
> 赞同：0
> 
> 时间：2012-05-06T02:29:01.300
> 
> 标签：c++, visual-c++, networking, network-programming

我有一个服务器应用程序正在运行。现在我要做的是我需要指定正在运行应用程序的服务器的 IP 地址，所以在这种情况下，如果服务器 IP 地址设置为类似`111.111.111.111`我如何`111.111.111.111`在该应用程序中获取该 IP 地址一个Windows系统，一旦完成就以整数形式显示服务器IP？

我不想显示它的本地 ip，那是什么`127.0.0.1`，甚至`192.168.x.x`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:31:37.460

如果不连接到外部服务器并检查请求 IP（如果请求通过不透明的代理，这仍然可能是错误的），您将无法可靠地获取该信息。

这样做的原因是 Windows 实际上（不一定）知道世界可见的 IP 地址，因为它可能有很多很多网络跃点。因此解决方案是编写一个简单的脚本，在请求时将传入请求的 IP 地址吐出，然后对该 URL 发出 HTTP 请求以确定公共 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:45:27.593

如果您想要服务器外部的 IP 地址，我建议：

`lynx --dump http://www.whatismyip.com | grep 'Your IP Address Is'`

然后您可以使用 RegEx 获取 IP。当然，这是需要`lynx`安装的。如果您需要在应用程序中执行此操作，则需要指定应用程序的编程语言以及它的工作方式。

# android - 如何更改 Android 视图的背景颜色

> ID：10467636
> 
> 赞同：0
> 
> 时间：2012-05-06T02:29:55.053
> 
> 标签：android, android-layout, user-interface, view, android-widget

我做了一个这样的customView

```
class MyCustomView extends View {

    public MyCustomView(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }               
} 
```

我已经在布局中使用了它并给定属性将其高度设置为 WRAP_CONTENT，但是在 UI 上它覆盖了整个屏幕？为什么会这样？是什么让它全屏显示？

当我去 setBackgroundColor() 时，它也不起作用

# c - 同时读取和写入一个变量

> ID：10467638
> 
> 赞同：1
> 
> 时间：2012-05-06T02:30:33.197
> 
> 标签：c

我有一个带有多个 pthread 的程序。这些线程通过通用文件中的 get 和 set 函数将数据报告回静态变量。

```
static int LAT;
void getLat(){
    return LAT;
}
void setLAT(int lat){
    LAT = lat;
} 
```

如果一个线程正在执行`getLAT();`而另一个线程同时执行会发生什么`setLAT();`？我的程序会崩溃吗？如果是这样，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:33:29.673

这称为竞争条件并导致未定义的行为。什么事情都可能发生。崩溃不太可能发生，更有可能的是结果可能是写入之前、写入之后或写入中间值损坏的结果。

如果您尝试在系统调用中使用该损坏的值或作为指针偏移量等，那么此时将发生崩溃。

某些平台和架构将保证对与某个地址对齐的特定大小的对象进行原子读/写（例如，如果与 16 字节地址对齐，则进行原子 4 字节读取等），在这种情况下不会发生中间值（损坏） . 但是您不能真正依赖这种行为，因为它不可移植。即使不能保证这种行为，您的代码也可能在 99% 的情况下运行良好，除了生产中的那 1%，当您希望自己没有走捷径并且不打扰同步时。

您需要使用互斥体或像 cmpxchg 这样的原子读/写指令来保护您的代码免受这种竞争条件的影响。

# excel - 使用参考 Excel VBA 将单行转换为单列

> ID：10467639
> 
> 赞同：2
> 
> 时间：2012-05-06T02:30:55.023
> 
> 标签：excel, vba

问题：我经常需要将一行引用到一列（使用 =Cell）。当我需要对多行执行此操作时，我只需使用 Ctrl+Shift+Enter。但这很烦人，因为当我想编辑某些内容时出现错误：“您无法更改数组的一部分”。

解释预期结果：我想选择没有标题的单行范围。

```
Dim cRangeColumn As Range
Set cRangeColumn = Application.InputBox("Please choose a range", "Specify Range", Type:=8) 
```

按“确定”后，它应该让我选择放置行的位置（与列转置的单行） - 让程序知道从哪里开始的单元格地址

同样，这可以通过

```
Dim rRangeRow As Range
Set rRangeRow = Application.InputBox("Please choose a range", "Specify Range", Type:=8) 
```

我面临的问题：如何访问范围内的值

逻辑：

1.  我得到了列的范围 - 比如说`$E$29:$E$37`- 总计 9 个值

2.  我选择转置列（一行）的起始地址，比如说`Sheet226!$G$14`

3.  程序开始写入`="$E$29 to the starting address "Sheet226!$G$14"`，然后写入直到`$E$37`满足。每次写入时，偏移 1 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:13:01.490

在海里游泳后，我能够完成这项工作

![在此处输入图像描述](../Images/ae659055a32753ac5c08bd45c3a28b01.png)

我尝试使用“<code>”，但看起来不太好。所以我拍摄了代码的快照。它不长。我希望它不打扰。

# mobile - 印度有没有像 payfone.com 这样的支付网关

> ID：10467641
> 
> 赞同：0
> 
> 时间：2012-05-06T02:31:30.250
> 
> 标签：mobile, payment-gateway, payment

任何人都可以建议，印度是否有任何可用的支付网关，例如 payfone.com，可以直接从用户移动服务提供商帐户中扣除费用并将其转移到商家帐户。

如果是这样，是否有任何 api 可将其集成到 Magento 中？

谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:47:34.893

这是我遇到的一项相当新的服务[Tiwala](http://tiwala.co/sms-payments) 他们提供多种支付方式，包括短信支付、货到付款和[银行转账](http://tiwala.co/bank-transfers)，所有这些都通过 API。目前看起来它只是邀请。

# facebook - Facebook 应用程序将“通过 {APP_NAME}”重定向到现有页面

> ID：10467644
> 
> 赞同：2
> 
> 时间：2012-05-06T02:32:13.547
> 
> 标签：facebook, facebook-apps, facebook-stream-story

我在 Facebook 上创建了一个应用程序。多亏了这个应用程序，用户可以在他们的墙上发布。一切正常，但我想指定一个 URL，当用户单击出版物上的“通过 {APP_NAME}”链接时重定向到。目前，它正在重定向到[https://www.facebook.com/apps/application.php?id=APP_ID](https://www.facebook.com/apps/application.php?id=APP_ID)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T10:09:50.453

与应用程序发布的故事旁边出现的文本“通过应用程序名称”链接会导致：

*   应用程序画布 URL - 如果应用程序在应用程序设置中配置了画布 URL
*   应用程序站点 URL - 如果应用程序配置了站点（但不是画布）URL
*   应用程序配置文件页面 - 如果应用程序具有与应用程序关联的常规 Facebook 页面并且没有在应用程序设置中指定 Canvas URL
*   应用程序页面 - 如果与应用程序或画布/站点 URL 关联的页面均未定义

您不能将此链接指向完全不同的 URL。

如果您仍然需要重定向到上述资源以外的资源，您可以配置应用程序站点/画布 URL，并在用户使用`fb_source`指定参数登陆您的应用程序后从那里进行重定向。

`fb_source`可能包含不同的值，因此您可以决定是否要进行重定向，它没有完整记录，但有一些示例：

[*喜欢按钮文档*](https://developers.facebook.com/docs/reference/plugins/like/)：

> `fb_source`- 发生点击的流类型（'home'、'profile'、'search'、'ticker'、'tickerdialog' 或 'other'）和故事类型（'oneline' 或 'multiline'），与一个下划线。

[*发送按钮文档*](https://developers.facebook.com/docs/reference/plugins/send/)：

> `fb_source`- 发生点击的故事类型（“消息”、“组”、“电子邮件”）。

`fb_source`也可能是`feed`（可能还有更多在其他地方记录或根本没有记录的值）。

# javascript - jQuery：在点击时添加属性值

> ID：10467645
> 
> 赞同：0
> 
> 时间：2012-05-06T02:32:21.463
> 
> 标签：javascript, jquery, jquery-selectors

我有电子商务网站。我有产品页面，您可以在其中选择主要产品的不同变体和插件。我希望能够在客户点击选项时动态显示价格。

基本的 html 如下所示：

```
<div class="addons">
    <input type="radio" name="products[39][addons][Handles]" title="Handles" value="579" alt="7.00" class="options"> Bronze Left
    <input type="radio" name="products[39][addons][Handles]" title="Handles" value="580" alt="8.00" class="options"> Bronze Right
    <input type="radio" name="products[39][addons][Handles]" title="Handles" value="581" alt="9.00" class="options"> Chrome Left
    <input type="radio" name="products[39][addons][Handles]" title="Handles" value="582" alt="10.00" class="options"> Chrome Right  

    <input type="radio" name="products[39][addons][Glass]" title="Glass" value="589" alt="18.00" class="options"> Brass Clarity
    <input type="radio" name="products[39][addons][Glass]" title="Glass" value="590" alt="20.00" class="options"> Zinc Abstract
    <input type="radio" name="products[39][addons][Glass]" title="Glass" value="591" alt="21.00" class="options"> Zinc Elegance
    <input type="radio" name="products[39][addons][Glass]" title="Glass" value="592" alt="23.00" class="options"> Zinc Prairie  
</div> 
```

值属性用于添加到购物车功能，我无法更改，价格设置为 alt 但显然可以是任何东西，标题设置为 jQuery 点击目标。

我需要关于 jQuery 的帮助。我遇到的问题是我不知道如何让 var price 在点击功能之外相互叠加。

```
$("input[type='radio'][title='Handles']").click(function() {
    price = $(this).val();
}

$("input[type='radio'][title='Glass']").click(function() {
    price = $(this).val();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:36:49.830

如果我理解，您只想在**alt**中添加值。你可以这样做：

```
var total = 0;
$(".addons").find("input:checked").each(function() {
    total += parseFloat($(this).attr('alt'));
}); 
```

您将在**点击**处理程序中运行此代码，并更新显示总数的任何 HTML。

**编辑**“input:checked”比“input[checked=checked]”更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T02:40:48.383

您可以使用它`input[type='radio']:checked`来过滤和获取您正在寻找的元素。

```
var total = 0;

// Get all the input tags that are checked.
$(".addons").find("input[type='radio']:checked").each(function() {
    total += parseFloat($(this).attr('alt'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:46:16.020

如果我正确理解这一点，您希望将每个选定选项的价格相加。这是这样做的一种方法：

```
// An object to keep track of the total amount of each title
var total = {};

// Change event on the radio buttons
$('input[type=radio]').change(function() {
    // Assign the alt to the total object with the key name being the title
    total[$(this).attr('title')] = parseFloat($(this).attr('alt')).toFixed(2);

    // Output the result to HTML (optional)
    outputTotal();
});

function outputTotal()
{
    // Here all the prices are being summed
    var sum = 0;

    for(var index in total)
    {
        sum += total[index];
    }

    // And output to HTML
    $('.total').html(sum);
} 
```

[jsFiddle 示例](http://jsfiddle.net/Codemonkey/nEWeD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T03:14:02.277

```
var inputs = $(".addons input.options");
inputs.click(function() {
    var total = 0;
    $(".addons").find(":checked").each(function(){
       total += parseFloat($(this).attr("alt"));
    });
    $("#total").val(total);
}); 
```

[http://jsfiddle.net/tive/fyZbV/](http://jsfiddle.net/tive/fyZbV/)

# c# - 使用字符串和二进制数据实现 AesManaged

> ID：10467652
> 
> 赞同：0
> 
> 时间：2012-05-06T02:35:02.230
> 
> 标签：c#, .net, aes

我正在尝试在我的 C# 类库中实现 AesManaged，并且对加密不熟悉需要一些成熟的指导。我一直在看[这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)，它将字符串加密为二进制并将二进制解密回字符串。

如何调整它以支持字符串到字符串和二进制到二进制的实现？

*   一些配置数据需要作为加密字符串存储在 XML 文件和注册表中。
*   一些较大的易失性数据需要加密为二进制文件。

由于这是一项紧急任务，我认为最好不要依赖假设。不知道 Aes 是如何工作的，我的要求是否像 get`Encoding.ASCII.GetString`和一样简单`Encoding.ASCII.GetBytes`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:43:46.340

是的，这基本上就是你“需要”做的所有事情。将字符串转换为字节数组并加密。不过，加密的结果不会是“友好”的字符串。它主要是不可读的ASCII。如果您将结果存储在 XML 文件中，您可能希望使用[ToBase64](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)将加密的输出存储为 Base64 。当你读回这些值时，你会想要从 base64 转换，然后解密。

根据您需要的安全级别，通常仅使用 AES 是不够的。AES 将提供机密性（无法读取消息），但不提供完整性（修改加密数据）。[使用HMAC](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmac.aspx)之类的东西会告诉您是否有人篡改了数据，即使他们无法读取数据。

# c# - 围绕 TPL 创建的新任务集中前后操作

> ID：10467654
> 
> 赞同：1
> 
> 时间：2012-05-06T02:35:35.787
> 
> 标签：c#, wpf, task-parallel-library, busyindicator

在我们的应用程序中，每当我们想要进行服务调用时，我们都会使用 TPL 创建任务。我们有一个忙碌指示符，每当任务启动时设置为 true，并且在任务完成或出现故障时清除。有什么方法可以以通用方式完成此操作，而不是为创建的每个任务执行此操作？

第一个例子 ：

```
 ComponentViewModel.Instance.IsApplicationBusy = true;
        ComponentViewModel.Instance.BusyMessage = "Loading...";

        var task1 = Task.Factory.StartNew(() => DoTask1());
        task1.ContinueWith(antecdent =>
        {
            ComponentViewModel.Instance.IsApplicationBusy = false;
            CustomAction1();
        } 
```

二审：

```
 ComponentViewModel.Instance.IsApplicationBusy = true;
        ComponentViewModel.Instance.BusyMessage = "Loading...";

        var task2 = Task.Factory.StartNew(() => DoTask2());
        task2.ContinueWith(antecdent =>
        {
            ComponentViewModel.Instance.IsApplicationBusy = false;
            CustomAction2();
        } 
```

每当进行服务调用时，整个应用程序都会重复逻辑，有什么办法可以避免这种重复？

例如，所有拖动操作都会触发一个 dragstarted 和 dragcompleted 事件，因此可以通过扩展任务工厂或其他方式来获得 taskstarted 和 taskcompleted 事件吗？

编辑：进行了更改以使问题更加清晰。您现在可以观察到开始和结束任务之前的步骤是相同的​​，但是当每个任务运行完成时需要为每个任务执行不同的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:37:45.757

编辑：看来我误解了这个问题。创建这个“开始，等待，继续”作为一个集中的功能是一个很好的举措，可以这样创建：

```
public void DoIt(Action ThingToDo) {
    ComponentViewModel.Instance.IsApplicationBusy = true;
    ComponentViewModel.Instance.BusyMessage = "Loading...";

    var loadProviderTask = Task.Factory.StartNew(ThingToDo);
    loadProviderTask.ContinueWith(antecdent =>
    {
        ComponentViewModel.Instance.IsApplicationBusy = false;
    }
} 
```

# git - Git忽略嵌套回购？

> ID：10467658
> 
> 赞同：0
> 
> 时间：2012-05-06T02:37:16.677
> 
> 标签：git

最近我从已经包含两个 git repo 子目录的目录中创建了一个 git repo。从那时起，我一直只在父母层面承诺......

今天我打破了代码库并试图回滚。但是回滚并没有用于子回购。我查看了 github，而不是目录，它们有不同的图标：（见底部两个）

![在此处输入图像描述](../Images/34f0ab74ad29c6bbbb506d417dc9be99.png)

到底是怎么回事？这些图标是什么？父仓库是否忽略了这些目录？这是嵌套存储库的默认行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:41:06.993

这不是 git 的工作方式。每个存储库都是它自己的存储库，并且有自己的状态。您可以使用子模块将两个存储库链接在一起。文件夹上的绿色箭头表示它是指向另一个存储库（子模块）的链接。

您可以[在此处阅读有关 git 子模块的更多信息](http://git-scm.com/book/en/Git-Tools-Submodules)。您目前的帖子并没有真正提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:46:31.773

要获取内部文件夹的历史记录/内容，请在这些文件夹中执行 git 命令。将 git 文件夹放在一起会让人感到困惑，因为它不会合并存储库或创建任何关系。如果您需要它们在一起，请将它们合并在一起或使用子模块。如果它们应该分开，请将它们移动到单独的文件夹中 - 纯粹是为了帮助您保持头脑清醒。

# php - 从插件外部（在基本应用程序内）调用 cakephp 插件控制器操作

> ID：10467663
> 
> 赞同：1
> 
> 时间：2012-05-06T02:38:26.897
> 
> 标签：php, cakephp, plugins, cakephp-1.3

是否可以在该插件之外（在基本应用程序中）调用插件的控制器操作，例如，假设我有一个插件调用`test`in`app/plugins`并且在该插件内部我有一个控制器调用`users`in `app/plugins/test/controllers/users_controller.php`。是否可以调用，比如说我的插件在基本应用程序的控制器之一（插件所属的应用程序）中的操作`add`？`users_controller`

请让我知道这是否可行以及如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:28:05.133

您可以将该逻辑移动到组件中，然后将其包含在`var $components`需要使用该逻辑的任何控制器的数组中。

如果逻辑纯粹只是添加，您可以将其移动到模型中，然后将该模型包含到需要使用它的控制器中`Controller->loadModel('Plugin.Model'); Model->add();`

如果您可以提供有关 add 方法的确切作用以及为什么需要从其他控制器调用它的更多信息，这将有所帮助。

# objective-c - 范围？逻辑或？目标C

> ID：10467666
> 
> 赞同：0
> 
> 时间：2012-05-06T02:40:24.750
> 
> 标签：objective-c, logical-operators

初学者的问题在这里：

如果我正在编写一个我想要与值范围（特别是标签）相关的 If 语句，除了使用逻辑 OR 之外，还有更简单的方法吗？

```
if (tableView.tag == 1 || tableView.tag==2 || tableView.tag==3) { do something} 
```

这看起来效率不高。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T02:41:27.913

```
if (tableView.tag >= minRange && tableView.tag <= maxRange)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:16:38.137

取决于您对“更容易”的定义......对于少量比较，效率并不是真正的考虑因素；您可以测试单个值，或者如果这些值是连续的，请执行 a`>=`和`<=`测试。如果您愿意，您可以随时使用宏或内联函数来整理内容，例如：

```
NS_INLINE BOOL inRange(lower, value, upper) { return (lower <= value) && (value <= upper); } 
```

对于大量测试，或者仅仅是美学，其他方法包括使用位掩码和数组。

如果您正在测试少量（最多 32 或 64 个）连续值，那么您可以为要测试的集合定义位掩码并执行按位和运算。例如：

```
typedef enum { Sunday = 0, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday } Day;

int WeekendSet = (1 << Sunday | 1 << Saturday);

if ( (1 << day) & WeekendSet ) // day is a weekend 
```

对于较大但仍不太大的集合，您可以使用数组。这就是标准库`isletter()`等`isdigit()`函数有时是如何定义的。由于单字节字符最多有 255 个声明具有 256 个元素的静态布尔数组，因此效果很好。例如

```
static uint8 isADigit[] = { 0, 0, ..., 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, ... }; // 256 values, only 10 1's for position's '0' through '9'

if ( isADigit[myChar] ) // myChar is a digit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:41:02.067

如果您正在测试的值是整数类型，则可以使用`switch`fall-through：

```
switch(tableView.tag) {
    case 1:
    case 2:
    case 3:
        // do something
        break;
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
        // do something else
        break;
} 
```

# unit-testing - 使用 PlayN 框架，我如何在我的项目中包含单元测试？

> ID：10467667
> 
> 赞同：0
> 
> 时间：2012-05-06T02:40:28.777
> 
> 标签：unit-testing, maven, playn

现在我一直在维护第二个沙盒项目，我在其中测试概念并解决障碍。但这并不是很有效，因为我最终不得不复制大量代码并且无法为我的游戏维护一组持久的回归测试。

我的项目中确实有一个单元测试文件夹，但是无法测试框架本身的组件，因为它们依赖于特定于平台的实现，而这些实现对进行开发的核心分支不可用。

我找到了 PlayN 框架的[一组测试](http://code.google.com/p/playn/source/browse/tests/core/src/playn/tests/core/TestsGame.java)。是否可以利用这些来测试自己的项目？是否可以在一个项目中包含两个游戏类？

我看到这里提出了这个问题[，](https://stackoverflow.com/questions/8954479/how-do-you-unit-test-a-playn-project)但从未真正得到令人满意的答复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:14:17.053

您无法轻松编写针对 PlayN 支持的不同后端运行的单元测试。显然，在 Android 手机或 iOS 设备上自动运行单元测试将是一个相当大的挑战。但是，您可以非常轻松地编写针对 Java 后端运行的单元测试。

我通常构建我的项目，使我的核心子模块具有`test`依赖关系`play n-java`，然后我使用`playn-java`后端运行我的单元测试。我发现它工作得相当好，虽然我通常不会测试很多直接与 PlayN 交互的东西，因为很难对可视代码进行单元测试。我单元测试的东西很少会调用 PlayN。

您还可以针对 HTML5 后端进行单元测试，但它确实很慢。看看[HTMLUnit](https://developers.google.com/web-toolkit/doc/latest/DevGuideTestingHtmlUnit)。

*[编辑：由于我反复回答这个问题，我将在此处添加有关如何配置项目以针对 Java 后端运行单元测试的说明]*

将 playn-java 添加到您`core/pom.xml`的测试依赖项中：

```
 <dependency>
   <groupId>com.googlecode.playn</groupId>
   <artifactId>playn-java</artifactId>
   <version>${playn.version}</version>
   <scope>test</scope>
 </dependency> 
```

将此添加到您的`core/pom.xml`还：

```
<build>
  <plugins>
    <plugin>
      <groupId>com.googlecode.mavennatives</groupId>
      <artifactId>maven-nativedependencies-plugin</artifactId>
      <version>0.0.6</version>
      <executions>
        <execution>
          <id>unpacknatives</id>
          <phase>generate-resources</phase>
          <goals> <goal>copy</goal> </goals>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.12</version>
      <configuration>
        <argLine>-Djava.library.path=${basedir}/target/natives</argLine>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

这将在运行单元测试时正确设置 LWJGL。

然后将其添加到您的单元测试中：

```
 static {
     JavaPlatform.register();
 } 
```

现在您可以`PlayN.foo()`在单元测试中访问服务，它们甚至可以工作。

您可以像这样从 Maven 编译和运行测试：

```
mvn test 
```

如果您需要在（Unix）构建服务器上运行单元测试，您需要确保构建服务器安装了无头 X Windows 安装以及 Mesa GL 库。

# javascript - 找不到强大的模块 - Node.js

> ID：10467668
> 
> 赞同：8
> 
> 时间：2012-05-06T02:40:48.367
> 
> 标签：javascript, node.js, module

我开始使用 node.j 进行开发，我遇到了一个关于使用“强大”模块的问题。

我有这个错误：

> 错误：找不到模块“强大”

这是使用 'npm ls installed' 安装的模块列表：

```
├─┬ express@2.5.9
│ ├── connect@1.8.7
│ ├── mime@1.2.4
│ ├── mkdirp@0.3.0
│ └── qs@0.4.2
├── 强大@1.0.9
├─┬ node-inspector@0.1.10
│ ├── paperboy@0.0.3
│ └─┬ socket.io@0.8.7
│ ├── policyfile@0.0.4
│ ├── redis@0.6.7
│ └─┬ socket.io-client@0.8.7
│ ├── uglify-js@1.0.6
│ ├── websocket-client@1.0.0
│ └── xmlhttprequest@1.2.2
├─┬ npm@1.1.21
│ ├── abbrev@1.0.3
│ ├── archy@0.0.2
│ ├── block-stream@0.0.5
│ ├── chownr@0.0.1
│ ├── fstream@0.1.18
│ ├─┬ fstream-npm@0.0.6
│ │ └── fstream-ignore@0.0.5
│ ├── 优雅-fs@1.1.8
│ ├── 继承@1.0.0
│ ├── ini@1.0.2
│ ├── lru-cache@1.0.5
│ ├── minimatch@0.2.2
│ ├── mkdirp@0.3.0
│ ├─┬ node-gyp@0.4.1
│ │ ├── ansi@0.0.4
│ │ └── glob@3.1.9
│ ├── node-uuid@1.3.3
│ ├── nopt@1.0.10
│ ├── proto-list@1.0.0
│ ├── read@0.0.2
│ ├── request@2.9.153
│ ├── rimraf@2.0.1
│ ├── semver@1.0.13
│ ├── slide@1.1.3
│ ├── tar@0.1.13
│ ├── uid-number@0.0.3
│ └── which@1.0.5
└─┬ socket.io@0.9.6
  ├── 策略文件@0.0.4
  ├── redis@0.6.7
  └─┬ socket.io-client@0.9.6
    ├─┬ active-x-obfuscator@0.0.1
    │ └── zeparser@0.0.5
    ├── uglify-js@1.2.5
    ├─┬ ws@0.4.14
    │ ├── 指挥官@0.5.2
    │ └── options@0.0.3
    └── xmlhttprequest@1.2.2

```

我补充说它是唯一产生此错误的模块。

另外，我不太明白封装某些模块的方式，看来npm是直接在我使用模块安装命令的目录中安装模块，我注意到在express/connect/中已经安装了强大的模块首次安装。

你能给我更多关于模块安装树的信息吗？
感谢您的回复

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T06:23:43.190

接受的答案看起来非常全面和正确，但这对我有用：

```
npm install -d 
```

d 代表依赖项（我认为）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T03:11:55.490

要了解模块解析，请查看[模块文档](http://nodejs.org/api/modules.html)，尤其是从[文件夹](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)[加载`node_modules`](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)。

> 例如，如果文件位于`'/home/ry/projects/foo.js'`called `require('bar.js')`，则节点将按以下顺序查找以下位置：
> 
> *   `/home/ry/projects/node_modules/bar.js`
> *   `/home/ry/node_modules/bar.js`
> *   `/home/node_modules/bar.js`
> *   `/node_modules/bar.js`

NPM 通过将模块安装到以下位置来利用这一点：

```
./node_modules/{module} 
```

因此，当您使用 时`npm install formidable`，它将创建模块并将其安装到：

```
./node_modules/formidable 
```

但是，这意味着只有当前目录中的脚本，包括子目录，才能成功使用`require('formidable')`：

```
./foo.js
./lib/bar.js
./src/baz.js
./src/sub/qux.js 
```

`-g`但是，您可以将模块安装为“全局”，但您必须使用or明确要求它`--global`：

```
npm install -g formidable 
```

然后，系统上的任何脚本都应该能够`require('formidable')`.

* * *

至于树输出，您当前有 5 个可从当前目录安装的模块：

*   `express`
*   `formidable`
*   `node-inspector`
*   `npm`
*   `socket.io`

树中的其他所有内容都是这些模块的依赖项及其依赖项等的列表，但`require(...)`在您的脚本中只有这 5 个可用。

# opengl - GLSL 宏扩展可以做到这一点吗？

> ID：10467672
> 
> 赞同：4
> 
> 时间：2012-05-06T02:41:22.253
> 
> 标签：opengl, macros, glsl, shader, fragment-shader

考虑以下 GLSL 函数：

```
float Pow3 (const in float f) {
    return f * f * f;
}

float Pow4 (const in float f) {
    return f * f * f * f;
}

float Pow5 (const in float f) {
    return f * f * f * f * f;
} 
```

... 等等。有没有办法**#define**一个 GLSL 宏，它可以在编译时生成*n个**f*乘法，当然不使用内置的 GLSL **pow()**函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T06:57:58.520

GLSL 预处理器“等于”标准 C 预处理器。实际上，您可以使用以下预处理器定义来达到您想要的效果：

```
#define POW(a, b) Pow ## b ## (a) 
```

但请注意，因为连接运算符 ( `##`) 仅从 GLSL 1.30 开始可用。实际上，使用以前的 GLSL 版本，这个宏会产生编译器错误。

仍然想知道为什么你不使用该`pow`功能...

# trigger.io - 如何在 trigger.io 中指定启动图像持续时间？

> ID：10467676
> 
> 赞同：2
> 
> 时间：2012-05-06T02:42:13.793
> 
> 标签：trigger.io

iPhone 启动图像现在显示太短，我想延长持续时间。有没有办法在 config.json 中指定这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:09:54.973

**更新**：从平台版本 v1.4.20 开始，您可以控制 launchimage 可见性（http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-20）。

原因是一些 UI 框架（尤其是 Sencha）在页面加载后需要一些时间来初始化。以下关于不将启动图像用作应用程序的轻量级“等待通知”的所有建议仍然适用。

* * *

原答案：

不，我们不允许在 Trigger.io 中进行这种类型的配置：原因是 Apple 的指导方针建议启动图像应该只用于平滑应用程序启动 - 而不是呈现任何类型的品牌或闪屏体验。

来自[http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf)：

> 避免使用您的启动图像作为提供以下内容的机会：
> 
> *   “应用程序入口体验”，例如闪屏
> *   关于窗口
> *   品牌元素，除非它们是应用程序首屏的静态部分

# assembly - 将 C 函数转换为程序集

> ID：10467679
> 
> 赞同：1
> 
> 时间：2012-05-06T02:43:23.330
> 
> 标签：assembly, sparc

嗨，我正在尝试将我编写的这个 C 函数转换为汇编代码（SPARC arc），但不断收到分段错误（核心转储）错误。该函数应该将字符串转换为长值。我知道我正确地完成了 C 函数，因为我已经对其进行了测试，并且它通过了所有测试。这是我要转换的 C 函数。

```
long strToLong(char *str, int base )
{
  char *endptr;
  errno = 0;
  long num;
  num = strtol(str, &endptr, base);
  char holder[BUFSIZ];

  /*if *endptr isn't '\0' then strtol didn't get to the end of the string
  *so it wasn't a valid integer*/
  if(*endptr != '\0')
  {
    (void)fprintf(stderr, "\n\t""'%s'" "  is not an integer\n", str);
     return 0;
  }
  /*if errno isn't 0 then an error occured so print out an error message*/
  else if(errno != 0)
  { 
    (void)snprintf(holder, BUFSIZ,"\n\tConverting \"%s\" base \"%d\"\n caused an         ", str, base);
    perror(holder);
    return 0;
  }

  /*if no errors, then it was a valid integer so return the integer*/
  return num;
} 
```

这是我写的汇编代码。

```
.global strToULong

.section ".data"    

fmt1:    .asciz    "%s  is not an integer\n"    !ascii format

fmt2:
    .asciz    "Converting %s base %d\n"    !ascii format

.section ".text"

strToULong:
    save    %sp, -( 92 + 1028) & -8, %sp
    add    %fp, -4, %o1
    mov    %i0, %o0
    mov    %i2, %o2
    call    strtol
    nop
    mov    %o0, %l0
    ld    [%fp - 4], %l1
    ldub    [%l1], %l1
    cmp    %l1, %g0
    be    errno
    nop

    set    stdError, %o0
    ld    [%o0], %o0
    set    fmt1, %o1
    mov    %i0, %o2
    call    fprintf, 3
    nop

errno:
    mov    %l0, %i0
    set    errno, %l2
    ld    [%l2], %l2
    cmp    %l2, %g0
    be    return
    nop

    add    %fp, -1028, %o0
    mov    1024, %o1
    set    fmt2, %o2
    mov    %i0, %o3
    mov    %i1, %o4
    call    snprintf
    nop
    add    %fp, -1028, %o0
    call    perror
    nop
    mov    0, %i0

return:
    ret
    restore 
```

我调试了程序，当我调用 strtol 函数时出现了段错误。我不确定我做错了什么，我认为我正确地传递了参数，但我仍然得到那个错误。哦，在我的主要声明中，我声明了类似 FILE* StdError = stderr 的内容，以将 stderr 作为参数传递给 fprintf。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:42:47.673

你有几个不同的问题，但你可以很容易解决的一个问题是你访问 errno 的方式。你不应该有一个名为 errno 的分支，因为你还有一个全局 var errno，这会引起一些混乱。

由于 errno 是一个全局变量，将 errno 加载到寄存器中应该如下所示：

```
 set errno, %l0    !sets %o0 to a pointer to errno
    st %g0,[%l0]      !set errno to 0

    set %i0, %o0      !move str to output
    set endptr, %01   !move endptr to output (defined above in .section ".data")
    set %i1, %o2      !move base to output

    call strtol,2     !calls strtol with given inputs
    nop

    ld  [%l0], %l1    !loads the value at errno into %l1 
```

在这个例子中，%l0 保存了一个指向 errno 的指针，%l1 保存了调用 strtol 后 errno 的值。然后您可以使用以下方法进行错误检查：

```
 cmp %l1,%g0       !compares errno to 0
    be endif
    nop

    /* if body */

endif:

    /* continued code */ 
```

这应该可以帮助您解决一些问题。当你在写汇编时，用 ! 来评论它真的很有帮助。在每一行之后，以及顶部的一个块，您可以在其中跟踪本地变量。组装看起来并不那么简单，所以它真的很有帮助。

# java - org.apache.jasper.JasperException: /Results.jsp(4,5) 无效的标准操作

> ID：10467681
> 
> 赞同：1
> 
> 时间：2012-05-06T02:44:04.727
> 
> 标签：java, jsp, jstl

我有以下jsp文件

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ page import="java.util.*" %>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:c="http://java.sun.com/jsp/jstl/core" version="2.0">
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Home</title>
<link rel="stylesheet" type="text/css" href="css/reset.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>

<body>
<div class="container">
  <jsp:include page="/WEB-INF/embeds/header.jsp"/>
  <div class="content">
    <h>Hotel Results</h>
    <table cellpadding="15">
    <c:forEach var="result" items="${search}">
    <tr>
        <td style="padding: 0px 0px 8px 10px">
            <c:out value="${search.roomDescription}"/>
        </td>
    </tr>
    </c:forEach>
    </table>
  </div>
</div>
</body>
</html> 
```

和一个包含and的`room`对象，我想从我用来存储所有房间的数组列表中打印出这些我得到的结果。此代码似乎与`int id``String roomDescription``ResultSet`

`org.apache.jasper.JasperException: /Results.jsp(4,5) Invalid standard action`

有人可以告诉我它有什么问题吗？（我的房间类由这两个变量以及 getter 和 setter 组成）。我已经测试了数组列表的大小，并且我知道我正在添加房间对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T03:02:52.923

我认为导致异常的问题是由`<jsp:root>`元素引起的，根据[此页面](http://java.sun.com/products/jsp/syntax/1.2/syntaxref123.html)，该元素格式错误。如果我正确阅读了链接页面，则`</jsp:root>`JSP 末尾应该有一个匹配的标记。

即使这不是确切的问题，异常消息也会指出问题出在“[4,5]”：即 JSP 文件的第 4 行字符第 5 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T14:45:15.980

我遇到了同样的问题。

我在之前声明了一个*标记库*`<jsp:root>`，如下所示：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="psc" %>

<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"> 
```

我颠倒了他们的顺序，并解决了这个问题

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">  

<%@ taglib uri="http://java.sun.com/jstl/core" prefix="psc" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:54:57.403

```
<c:forEach var="result" items="${search}">
<tr>
    <td style="padding: 0px 0px 8px 10px">
        <c:out value="${result.id}"/>
        <c:out value="${result.roomDescription}"/>
    </td>
</tr>
</c:forEach> 
```

search 属性必须返回房间对象的列表，在其中迭代和显示它们。您需要使用将值分配给的结果变量。

# c# - 使用 WCF 休息的插入操作每次都失败....

> ID：10467683
> 
> 赞同：0
> 
> 时间：2012-05-06T02:44:11.727
> 
> 标签：c#, asp.net, wcf-rest

嗨，我在我的应用程序中使用 WCF Rest 并采用分层架构。我的数据流层次结构如下：

```
Data Layer -> Linq2Sql
||
Business Layer
||
WCF Rest Service
||
ASPX Pages 
```

我通过 JQuery 使用 JSON 来选择/删除并使用代码隐藏来插入/更新，这样我就可以使用 WCF 服务通过我的业务层将 .Net 对象传递到数据库库（以检查我是否有它们的业务逻辑。）。

例如，我在我的业务层加密密码和解密密码并将其发送到数据层。无论如何，这不是问题。问题在于 WCF 服务配置设置。每次我得到独特的例外，比如：

1.  404 错误请求。
2.  在[http://localhost/Service.svc](http://localhost/Service.svc)上没有可以接受消息的端点侦听。
3.  在服务模型客户端配置部分中找不到引用合同“xxx”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素等等......

我尝试的是

1.  根据[Tom Haigh](https://stackoverflow.com/questions/352654/could-not-find-default-endpoint-element)建议的答案。受保护的 Save_Click(sender,e) {

    var user = new User { Login = login.Value, Password = pwd.Value, RealName = realname.Value, AccessRight = accessrights.Value, CustomAccesRight = customaccessrights.Value };

    ```
     var remoteAddress = new EndpointAddress("http://localhost:2360/UserService.svc");

        using (var client = new UserServiceClient(new BasicHttpBinding(), remoteAddress))
        {
            //set timeout
            client.Endpoint.Binding.SendTimeout = new TimeSpan(0, 0, 0, 10000);

            //call ws method
            client.Insert(user);
        } //using 
    ```

}

2.  我也尝试过删除，得到错误 400

    受保护的 Save_Click(sender,e) {

    var user = new User { Login = login.Value, Password = pwd.Value, RealName = realname.Value, AccessRight = accessrights.Value, CustomAccesRight = customaccessrights.Value };

    ```
     var remoteAddress = new EndpointAddress("http://localhost:2360/UserService.svc");

       var client = new UserServiceClient(new BasicHttpBinding(), remoteAddress);

            //set timeout
            client.Endpoint.Binding.SendTimeout = new TimeSpan(0, 0, 0, 10000);

            //call ws method
            client.Insert(user); 
    ```

}

我的服务配置文件：

```
<system.serviceModel>
    <services>
      <service name="EnergyManagementControl.WcfSvc.UserService"  behaviorConfiguration="ServiceBehaviour" >
        <endpoint name="" binding="webHttpBinding"   contract="EnergyManagementControl.WcfSvc.IUserService" address="http://localhost:2360/UserService.Svc"   behaviorConfiguration="web"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour"  >
          <serviceMetadata  httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我的客户端配置文件

```
<system.serviceModel>
    <client>
      <endpoint
        name = "Receptor"
         address="http://localhost:2360/UserService.Svc" 
        binding = "wsHttpBinding"
        contract="IUserService"
    />
    </client>
  </system.serviceModel> 
```

但似乎没有任何帮助。我知道它的配置错误，请帮助我。此外，根据我的场景对 WCF 休息的任何简要参考都会有很大帮助.....

**请注意，WCF 是作为 WCF 服务应用程序创建的，并且是我的 Web 应用程序解决方案中的一个项目。**见下图： ![在此处输入图像描述](../Images/181441212f7c11fcdcefecf97dcfa8ae.png)

**我也在 WebDev Server 上收到错误，而不是在 IIS 或 Cassini 上**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:06:16.267

对于 REST 服务的 WCF 使用情况，我不能说太多，但您的服务和客户端端点绑定不匹配。WCF 使用绑定来查找匹配的终结点。

# linux - 为什么在 Linux 上使用 RS-232 时 CTRL+C 不起作用？

> ID：10467687
> 
> 赞同：4
> 
> 时间：2012-05-06T02:44:48.633
> 
> 标签：linux, linux-kernel, serial-port, putty

首先，我不知道这是应该留在 SO 还是去 SU：你告诉我。解决方案可能与编程有关。

我在嵌入式设备上执行 Linux 并使用 RS-232 @ 9600 波特与它通信。在 Windows 上使用 PuTTY 一​​切正常：我有一个 shell，可以键入和执行命令。

问题是：当我启动一个命令时，我不能 CTRL+C。例如，当 ping 某台机器时，ping 进入无限循环，我无法使用 CTRL+C 停止它。但是，在 Bash 提示符下，CTRL+C 起作用并转到下一行（因此被传输）。我还注意到`^C`当我在运行命令时执行 CTRL+C 时会显示终端。通过 Telnet 连接时，CTRL+C 在任何地方都可以正常工作。

我尝试使用 PuTTY 的“特殊命令”中断，但它不起作用。我也尝试了不同的终端模拟器，同样的问题。

所以我猜这个问题与内核有关。有什么我可以调查的吗？

**编辑**：我正在运行 BusyBox v1.13.2。`stty -a`(RS-232)的输出为：

```
speed 9600 baud; rows 24; columns 80;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
eol2 = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W;
lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 hupcl -cstopb cread clocal -crtscts
-ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon ixoff
-iuclc -ixany -imaxbel
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt
echoctl echoke 
```

`stty -a`（Telnet）的输出是：

```
speed 38400 baud; rows 24; columns 80;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
eol2 = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W;
lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 -hupcl -cstopb cread -clocal -crtscts
-ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff
-iuclc -ixany -imaxbel
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab3 bs0 vt0 ff0
isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt
echoctl echoke 
```

我只是注意到，如果我这样做`ls -la /bin`，这是一个很长的命令，因为列表很长，我不能通过发出 CTRL+C 来中断，但我可以在按住键时。大约一秒钟后它会中断。但是，这不适用于 ping。

事实上，如果我这样做`seq 1 1000`然后按 CTRL+C，它似乎在某个时候一次跳过了很多行：

```
93
94
95
^C6
897
898
899 
```

同样的事情发生在`ls -la /bin`：

```
lrwxrwxrwx    1 10042    2223            7 May  6  2012 dmesg -> busybox
lrwxrwxrwx    1 10042    2223            7 May  6  2012 dos2unix -> busybox
lrwxrwxrwx    1 10042    2223            7^C          7 May  6  2012 ipcrm -> busybox
lrwxrwxrwx    1 10042    2223            7 May  6  2012 ipcs -> busybox
lrwxrwxrwx    1 10042    2223            7 May  6  2012 iplink -> busybox 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:59:00.540

嵌入式设备上的串行端口设置可能会忽略中断字符，或者在收到中断时不会导致中断。您可以通过从设备的外壳（或启动脚本）运行 stty 程序或使用各种 ioctl() 参数编写程序来更改此设置。

[http://linux.die.net/man/1/stty](http://linux.die.net/man/1/stty)

```
stty sane 
```

可能是最好的选择。这设置了一堆“常规”设置。相反，如果你这样做

```
stty raw 
```

在桌面 linux 的 shell 窗口中，您可能会得到您在嵌入式设备上看到的那种 ctrl-C prints-but-does-nothing 行为。

不带参数运行 stty 可能会打印出当前设置，这可能很有趣——尤其是比较串行会话与远程登录会话的结果。

* * *

更新：busybox 和 BRKINT 上的网络搜索发现了一些可能相关的内容：

```
Date: Thu, 31 Jan 2002 13:34:34 -0800
From: Scott Anderson <scott_anderson at [removed]>
Cc: linuxppc-dev at lists.linuxppc.org
Subject: Re: why is tty->pgrp set to -1 for console?

>   What is the correct procedure to follow to get around this problem
> and get ctrl-c working on console?

It looks like everyone is taking a swing at this one, so I think I'll
join in.  First off, the easiest way I've found to track down why
ctrl-c doesn't work is to just run "ps -j".  For ctrl-c to work, you
need a controlling terminal (the TTY column) and a process group.  If
you have a '?' in the TTY column, ctrl-c won't work.  In the past I
have seen this happen because of this code in drivers/char/tty_io.c:
        if (device == SYSCONS_DEV) {
                struct console *c = console_drivers;
                while(c && !c->device)
                        c = c->next;
                if (!c)
                        return -ENODEV;
                device = c->device(c);
                filp->f_flags |= O_NONBLOCK; /* Don't let /dev/console block */
                noctty = 1;
        }
Note that O_NOCTTY (no controlling terminal) is forced on whenever
/dev/console is opened (noctty = 1).  Possible workarounds:
  1) Run getty on something other than /dev/console.  For example,
     if you console is on the first serial port, run getty on /dev/ttyS0.
     I believe this is the "correct" answer.
  2) You could also change getty to do a TIOCSCTTY ioctl explicitly after
     it has opened the terminal.
  3) You could remove the forcing of noctty on from tty_io.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T18:42:43.997

非常切题，但是由于我找不到要输入的客观命令，因此我绝望了， `ssh 127.0.0.1`并且 ctrl-c 在 ssh 会话中工作。

# java - 想要将 JPanel 与 Java 中框架的左侧对齐

> ID：10467696
> 
> 赞同：0
> 
> 时间：2012-05-06T02:47:01.970
> 
> 标签：java, swing, jlabel

事实证明，这比我想象的要困难得多。我想要做的就是将这个 JPanel “粘贴”到框架的左侧。这是我到目前为止所拥有的。（如果可能，我不想使用 GridBagLayout（我是 java 新手））。

```
labels = new JPanel();
JLabel currentWordLA = new JLabel("Current word:");
JLabel triedLettersLA = new JLabel("Tried letters:");
JLabel triesLeftLA = new JLabel("Tries remaining:");
JButton restart = new JButton("Reset");

labels.setLayout(new BoxLayout(labels, BoxLayout.Y_AXIS));
labels.add(currentWordLA);
labels.add(triedLettersLA);
labels.add(triesLeftLA);
scorePanel.add(labels, BorderLayout.WEST); 
```

编辑：对不起，这是完整的代码。它有点像框架内的面板中的面板。只是试图让框架与左侧对齐。谢谢！

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Hangman {

    JFrame frame;
    private String[] wordList = {
        "computer", "java", "activity", "alaska", "appearance", "article",
        "automobile", "basket", "birthday", "canada", "central", "character",
        "chicken", "chosen", "cutting", "daily", "darkness", "diagram",
        "disappear", "driving", "effort", "establish", "exact",
        "establishment", "fifteen", "football", "foreign", "frequently",
        "frighten", "function", "gradually", "hurried", "identity",
        "importance", "impossible", "invented", "italian", "journey",
        "lincoln", "london", "massage", "minerals", "outer", "paint",
        "particles", "personal", "physical", "progress", "quarter",
        "recognise", "replace", "rhythm", "situation", "slightly",
        "steady", "stepped", "strike", "successful", "sudden",
        "terrible", "traffic", "unusual", "volume", "yesterday"};
    private String mysteryWord;
    private boolean finished = false;
    private boolean won = false;
    private Button a[];

    public static void main(String[] args) {
        Hangman gui = new Hangman();
        gui.go();
    }

    class myDrawPanel extends JPanel {

        public void paintComponent(Graphics g) {
            setBackground(Color.white);
            g.setColor(Color.gray);
            g.fillRect(50, 200, 150, 20);
            g.fillRect(90, 20, 10, 200);
            g.fillRect(90, 20, 60, 10);
            g.setColor(Color.black);
            g.fillRect(145, 20, 5, 25);
        }
    }

    public void go() {
        frame = new JFrame("Hangman");
        JPanel topPanel = new JPanel();
        myDrawPanel noosePanel = new myDrawPanel();
        JPanel bottomPanel = new JPanel();
        JPanel scorePanel = new JPanel();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridLayout(2, 0));
        bottomPanel.setLayout(new GridLayout(0, 2));
        scorePanel.setSize(20, 100);

        noosePanel.setBorder(BorderFactory.createTitledBorder("Your progress."));
        topPanel.setBorder(BorderFactory.createTitledBorder("Your arsenal."));
        scorePanel.setBorder(BorderFactory.createTitledBorder("Your score."));
        frame.add(topPanel);
        frame.add(bottomPanel);
        bottomPanel.add(scorePanel);
        bottomPanel.add(noosePanel);

        //The Stats section.
        JPanel labels = new JPanel();
        JLabel currentWordLA = new JLabel("Current word:");
        JLabel triedLettersLA = new JLabel("Tried letters:");
        JLabel triesLeftLA = new JLabel("Tries remaining:");
        JButton restart = new JButton("Reset");

        labels.setLayout(new BoxLayout(labels, BoxLayout.Y_AXIS));
        labels.add(currentWordLA);
        labels.add(triedLettersLA);
        labels.add(triesLeftLA);
        scorePanel.add(labels, BorderLayout.WEST);

        int i;
        StringBuffer buffer;
        a = new Button[26];
        topPanel.setLayout(new GridLayout(4, 0, 10, 10));

        // create all 26 buttons
        for (i = 0; i < 26; i++) {
            buffer = new StringBuffer();
            buffer.append((char) (i + 65));
            a[i] = new Button(buffer.toString());
            a[i].setSize(100, 100);
            //a[i].addActionListener( this );
            topPanel.add(a[i]);
        }

        frame.setSize(500, 500);
        frame.setResizable(false);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:21:21.143

尝试向 BorderLayout.CENTER 添加一些内容，如下所示：

```
 scorepanel.add(new JPanel(), BorderLayout.CENTER); //I guess scorepanel is your frame
    //your code here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:18:22.577

我喜欢你的布局。我对您的示例进行了一些更改：

*   看起来`MyDrawPanel`只是为了画画。如果你覆盖`getPreferredSize`，你可以使用`pack()`而不是调用`setSize()`很多。在内部`paintComponent`，相对于面板`getWidth`和进行绘图`getHeight`，然后它看起来适合任何尺寸。

*   我使用`JLabel.LEFT`了标签，并将背景颜色设为灰色，以便您可以看到布局的位置。[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)还有更多。

*   如果您使用标准命名，例如`MyDrawPanel`，其他人会更容易阅读您的代码。

代码：

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Hangman {

    JFrame frame;
    private String[] wordList = {
        "computer", "java", "activity", "alaska", "appearance", "article",
        "automobile", "basket", "birthday", "canada", "central", "character",
        "chicken", "chosen", "cutting", "daily", "darkness", "diagram",
        "disappear", "driving", "effort", "establish", "exact",
        "establishment", "fifteen", "football", "foreign", "frequently",
        "frighten", "function", "gradually", "hurried", "identity",
        "importance", "impossible", "invented", "italian", "journey",
        "lincoln", "london", "massage", "minerals", "outer", "paint",
        "particles", "personal", "physical", "progress", "quarter",
        "recognise", "replace", "rhythm", "situation", "slightly",
        "steady", "stepped", "strike", "successful", "sudden",
        "terrible", "traffic", "unusual", "volume", "yesterday"};
    private String mysteryWord;
    private boolean finished = false;
    private boolean won = false;
    private Button a[];

    public static void main(String[] args) {
        Hangman gui = new Hangman();
        gui.go();
    }

    class MyDrawPanel extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(256, 256);
        }

        @Override
        public void paintComponent(Graphics g) {
            setBackground(Color.white);
            g.setColor(Color.gray);
            g.fillRect(50, 200, 150, 20);
            g.fillRect(90, 20, 10, 200);
            g.fillRect(90, 20, 60, 10);
            g.setColor(Color.black);
            g.fillRect(145, 20, 5, 25);
        }
    }

    public void go() {
        frame = new JFrame("Hangman");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridLayout(2, 0));

        JPanel topPanel = new JPanel();
        topPanel.setBorder(BorderFactory.createTitledBorder("Your arsenal."));
        MyDrawPanel noosePanel = new MyDrawPanel();
        noosePanel.setBorder(BorderFactory.createTitledBorder("Your progress."));
        JPanel bottomPanel = new JPanel(new GridLayout(0, 2));
        JPanel scorePanel = new JPanel(new GridLayout());
        scorePanel.setBorder(BorderFactory.createTitledBorder("Your score."));

        frame.add(topPanel);
        frame.add(bottomPanel);
        bottomPanel.add(scorePanel);
        bottomPanel.add(noosePanel);

        //The Stats section.
        JPanel labels = new JPanel();
        labels.setLayout(new BoxLayout(labels, BoxLayout.Y_AXIS));
        labels.setBackground(Color.lightGray);
        JLabel currentWordLA = new JLabel("Current word:", JLabel.LEFT);
        JLabel triedLettersLA = new JLabel("Tried letters:", JLabel.LEFT);
        JLabel triesLeftLA = new JLabel("Tries remaining:", JLabel.LEFT);

        labels.add(currentWordLA);
        labels.add(triedLettersLA);
        labels.add(triesLeftLA);
        scorePanel.add(labels);

        int i;
        StringBuffer buffer;
        a = new Button[26];
        topPanel.setLayout(new GridLayout(4, 0, 10, 10));

        // create all 26 buttons
        for (i = 0; i < 26; i++) {
            buffer = new StringBuffer();
            buffer.append((char) (i + 65));
            a[i] = new Button(buffer.toString());
            //a[i].addActionListener( this );
            topPanel.add(a[i]);
        }
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# iphone - 使用 CSS 修复区域地图，使其在 iPhone 和小型设备上正确显示？

> ID：10467699
> 
> 赞同：2
> 
> 时间：2012-05-06T02:47:22.417
> 
> 标签：iphone, html, css

这是我为客户制作的网站的链接：

[http://knowyourheart.co.uk/alisir/diff/](http://knowyourheart.co.uk/alisir/diff/)

它在所有桌面浏览器上都可以正常工作，但在 iPhone 或小型设备上查看时，它无法正确对齐。

这主要是因为带有版权信息和社交图标的图像是基于#map的，所以它是一个1200px的图像。

有什么办法可以解决这个问题吗？

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:50:59.697

对于`<img>`标签（最终可能更可取），您需要为图像设置 % 宽度，如下所示：

CSS：

```
img{   
   max-width: 100%;
} 
```

对于`<area><map>`元素（在您的情况下），您需要像这样使用 CSS 转换属性：

CSS（缩小 50%）：

```
area {
   zoom:.5; 
  -webkit-transform: scale(.5);  /* iPhone Safari browser specific */
  -o-transform: scale(.5);
  -moz-transform: scale(.5)"
} 
```

要使页面的其余部分也适当缩放，您可能还必须将其他`<div>`容器设置为 % 宽度。

只需调整浏览器窗口的宽度，您就可以在笔记本电脑上对手机尺寸进行快速而肮脏的测试。如果您的内容仍能以最小宽度显示在视图中，则说明您的状态良好，至少在手机水平握持的情况下是这样。

# c++ - 我如何在 xcode 中使用指定的编译器 gcc-mp-4.7？

> ID：10467701
> 
> 赞同：0
> 
> 时间：2012-05-06T02:47:49.367
> 
> 标签：c++, macos

所有，我使用 macports 安装 gcc-mp-4.7 和 boost 库。我如何在 xcode IDE 的 c++ 项目中使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:50:10.353

您应该继续使用 MacPorts 之一。您只需将编译器指向要链接的正确库路径，这就是 libboost_regex 所在的位置，可能是 /opt/local/lib 或类似的。

# c++ - C++ 队列，输出错误

> ID：10467704
> 
> 赞同：-3
> 
> 时间：2012-05-06T02:49:25.160
> 
> 标签：c++

我有一个带有优先队列和常规队列的项目。我需要使用优先级队列按从最小到最大的 ID 组织产品。

然后使用常规队列，我需要将它们分为 3 类：（库存过剩、库存不足、在限制范围内）；所以输出应该是这样的：

库存不足

14887 10 美元 14

15678 $1 298

积压

12565 4 539 美元

18967 美元 12 401

限额内库存

19847 2 220 美元

我写了这段代码，但有些东西我不确定，我的输出看起来像：

积压

12565 4 539 美元

库存不足

14887 10 美元 14

库存不足

15678 $1 298

积压

18967 美元 12 401

StockWithInLimits

19847 2 220 美元

```
int main() 
{ 
    ifstream inFile; // file containing operations 
    ofstream outFile; // file containing output 
    string inFileName = "product.txt"; 
    string outFileName = "result.txt"; 
    inFile.open (inFileName.c_str()); 
    outFile.open (outFileName.c_str()); 
    ItemType item;//declare a temp item that trows into pQue 
    PQType<ItemType> pqueue(50);//priority queue that sorts items by ID 
    QueueADT <ItemType> que; 
    QueueADT <ItemType> lowQ;
    QueueADT <ItemType> highQ;
    QueueADT <ItemType> withinQ;

    while ( item.readProduct (inFile) ) 
    { 
        pqueue.Enqueue(item); 

    } 

    while (!pqueue.IsEmpty()) 
    { 
        pqueue.Dequeue (item); 
        int tempcurinvent = item.getcurrentInventory (); 
        int tempmax = item.getMax (); 
        int tempmin =item.getMin (); 

    if ((tempcurinvent < tempmin) && (tempcurinvent < tempmax))//UnderStock 
        {
            lowQ.Enqueue (item);
        }

if ((tempcurinvent < tempmax) && ( tempcurinvent  > tempmin)) //WithINLimits
        { 
            withinQ.Enqueue (item);
        } 
else if ((tempcurinvent > tempmin) && (tempcurinvent > tempmax))//OverStock 
        { 
            highQ.Enqueue (item);
        }
        outFile << "UnderStock" << endl;
        item.printProduct (outFile);
        lowQ.Dequeue (item);

        outFile << "WithINLimits:" << endl;
        item.printProduct (outFile); 
        withinQ.Dequeue (item);

        outFile << "OverStock" << endl; 
        item.printProduct (outFile); 
        highQ.Dequeue (item);

    }

    inFile.close (); 
    outFile.close (); 

  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:33:29.007

优先级队列的奇怪用途，但我想这是要求。

(1) 你把所有东西都放在 pqueue 中。那挺好的。然后，您应该清空 pqueue 并使用 under/over/within 逻辑将项目放入三个常规队列之一。然后读取每个队列（首先打印标题“over”，“under”，“within”）并将它们打印出来。

(2)

```
QueueADT <int> que;

que.Enqueue (n); 
```

看起来不对。为什么要排队 int 而不是 item？为什么你有一个队列而不是三个？这也适用于 que.Deque(n) 语句。

(3) 你真的不需要复合 IF 语句。据推测，如果某物低于最小值，它也低于最大值。

所以像

```
 if belowMin
     put in lowQ
     readagain

 if aboveMax
     put in highQ
     readagain

 put in withinQ 
```

还要小心确保您想要 item < max 而不是 item <= max，具体取决于规范所说的内容。

**编辑**

这些需要在当前的while循环*之外：*

```
outFile << "UnderStock" << endl;
while (!lowQ.IsEmpty())
{
    lowQ.Dequeue (item);
    item.printProduct (outFile);
}

outFile << "WithINLimits:" << endl;
while (!withinQ.IsEmpty())
{
    withinQ.Dequeue (item);
    item.printProduct (outFile);
}

outFile << "Overstock:" << endl;
while (!highQ.IsEmpty())
{
    highQ.Dequeue (item);
    item.printProduct (outFile);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-04T09:22:59.177

```
include<iostream.h>
#include<conio.h>

#define g_per_f 7.481

void main(void)
{
    cout<<"### Programmed By Amahdy(MrJava) ,right restricted.~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n";
    cout<<"-------------------------------------------------------------------------------\n\n";

    float n_gallons;

    do{
        cout<<"Enter the number of gallons  : \xdb\t";
        cin >>n_gallons;
        cout<<"The equivalent in cubic feet : \xdb\t"<<n_gallons / 
            g_per_f<<endl;
        cout<<"\n !Press c to continue or any key to exit."<<endl<<endl;
    } while(getch()=='c');
} 
```

# php-5.2 - php 5.2 - FILTER_SANITIZE_FULL_SPECIAL_CHARS

> ID：10467705
> 
> 赞同：2
> 
> 时间：2012-05-06T02:49:55.190
> 
> 标签：php-5.2, filter-var

我正在尝试修改我的编码风格并习惯使用`filter_var($input,FILTER_SANITIZE_FULL_SPECIAL_CHARS)`. 我已经习惯了使用其他 filter_var 选项没有任何困难。

但是，在这种特定情况下，`FILTER_SANITIZE_FULL_SPECIAL_CHARS`只能在比我的托管服务提供商使用的新版本的 php 中使用。我们仍在使用 php 5.2.17。我的问题是，我如何以与使用这个对 filter_var 函数的简单调用相同的可靠性完成相同的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:43:50.897

据我所知，我能想到的唯一解决方案如下。仍然不确定它在功能上是否相同，但我的测试表明它的工作原理大致相同......

```
filter_var($input, FILTER_SANITIZE_STRING,FILTER_FLAG_ENCODE_AMP|FILTER_FLAG_ENCODE_HIGH|FILTER_FLAG_ENCODE_LOW); 
```

***注意：*** 当使用多个*标志时，在第一个标志之后*用竖线而不是逗号`filter_var`分隔每个标志中断.... 花了一段时间才弄清楚！:)*`filter_vars`*

# c# - 美联社 RSS 日期

> ID：10467706
> 
> 赞同：0
> 
> 时间：2012-05-06T02:49:58.080
> 
> 标签：c#, date, rss, pubdate

我正在尝试解析美联社的 RSS 提要，但日期确实让我感到困惑。以下是提要中一项的示例：

```
<entry>
    <id>urn:publicid:ap.org:Hosted2Syndication:b7f6d88749d341aa9a30e15dcb983b41</id>
    <title type="text">9/11 defendants ignore judge at Guantanamo hearing</title>
    <summary type="text">GUANTANAMO BAY NAVAL BASE, Cuba (AP) — They knelt in prayer, ignored the judge and wouldn't listen to Arabic translations as they confronted nearly 3,000 counts of murder. The self-proclaimed mastermind of the Sept. 11 attacks and four co-defendants defiantly disrupted an arraignment that dragged into Saturday night in the opening act of the long-stalled effort to prosecute them in a military court.</summary>
    <published>2012-05-05T22:38:59-04:00</published>
    <updated>2012-05-05T20:28:08-04:00</updated>
    <author />
    <link rel="alternate" type="text/html" title="AP Article" href="http://hosted2.ap.org/APDEFAULT/3d281c11a96b4ad082fe88aa0db04305/Article_2012-05-05-Guantanamo-Sept%2011%20Trial/id-b7f6d88749d341aa9a30e15dcb983b41" />
    <content type="xhtml"></content>
</entry> 
```

所以发布日期是：`2012-05-05T22:38:59-04:00`

如果您在浏览器中查看此项目，则日期显示为：`May. 5, 2012 8:28 PM ET`

但是，当我将其转换为代码中的日期时：

```
DateTime date;

DateTime.TryParse("2012-05-05T22:38:59-04:00", out date); 
```

它的出现是：`5/5/2012 10:38:59 PM`

我不知道为什么网站显示的日期相差 2 小时。

您可能会看到与当前提要中的任何项目的区别：

[http://hosted2.ap.org/atom/APDEFAULT/3d281c11a96b4ad082fe88aa0db04305](http://hosted2.ap.org/atom/APDEFAULT/3d281c11a96b4ad082fe88aa0db04305)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:01:32.287

当您加载实际故事时，您正确地看到了`<updated>2012-05-05T20:28:08-04:00</updated>`文章中的日期/时间`May. 5, 2012 8:28 PM ET`

```
20:28:08 (GMT-4) == 8:28 PM (ET) 
```

您的 C# 代码很好，但您必须向美联社询问为什么这篇文章最后一次更新是在实际发布前两个小时。

# c# - c# protobuf-net 反序列化某些属性值时始终为-1

> ID：10467708
> 
> 赞同：3
> 
> 时间：2012-05-06T02:50:15.643
> 
> 标签：c#, protobuf-net

我不确定这个问题是错误还是只是这个，在我没有注意到这一点之前。

我创建了一个`Document`类并声明了 protobuf-net 限制。

```
[ProtoContract]
public class Document
{
    [ProtoMember(1)]
    private Dictionary<string,string> _items;

    [ProtoMember(2)]
    public int DocNumber
    {
        get;
        set;
    }

    public Document()
    {
        this.DocNumber = -1;
        this._items = new Dictionary<string,string>();    
    }

    public byte[] Serialize()
    {
        byte[] bytes = null;
        using (var ms = new MemoryStream())
        {
            Serializer.Serialize(ms, this);
            bytes = ms.ToArray();
            ms.Close();
        }
        return bytes;           
    }

    public static Document Deserialize(byte[] bytes)
    {
        Document obj = null;
        using (var ms = new MemoryStream(bytes))
        {
            obj = Serializer.Deserialize<Document>(ms);
            ms.Close();
        }
        return obj;
    }
 } 
```

在测试代​​码中：

```
 var doc = new Document();
  doc.DocNumber = 0;          
  var bytes = doc.Serialize();
  var new_doc = Document.Deserialize(bytes);
  Console.WriteLine(new_doc.DocNumber + " vs " + doc.DocNumber); 
```

输出消息是：`-1 vs 0`.i can't believe this result（正确的结果是`0 vs 0`），所以我将其更改 `doc.DocNumber = 0`为 `doc.DocNumber = 1`，输出是正确的：`1 vs 1`.

这个问题意味着我不能将零分配给`DocNumber`属性，在 Document 的构造方法中，我必须声明 DocNumber 属性为-1。

有人可以帮助我吗？这个问题是我的原因还是 protobuf-net 的原因？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T04:16:10.627

ProtoBuf 不会序列化具有该类型的 .NET 默认值的值。这种行为是设计使然，因为它使输出更加紧凑。

由于它不知道您的构造函数为该字段分配了默认值，因此它被初始化为 -1（因为您有明确的代码来执行此操作）。

为避免此问题，请使用常规字段并为其分配默认值，而不是在构造函数中分配默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T07:53:09.553

默认。它假定零值作为默认值。我对这种设计选择感到遗憾，因此可以在 v2 中禁用它，但为了兼容性而保留。在 v1 和 v2 中，您也可以简单地告诉它 -1 是默认值：

```
[ProtoMember(2), DefaultValue(-1)]
public int DocNumber 
```

# c - C 在二进制文件中间写入而不覆盖任何现有内容

> ID：10467711
> 
> 赞同：9
> 
> 时间：2012-05-06T02:51:11.150
> 
> 标签：c, file-io, binaryfiles

今天的问题是我需要在二进制文件的起始位置写入一个数字数组。我有它应该开始的位置，之后我不想覆盖值，只想在文件的起始位置插入数组。例如：

```
12345 
```

让我们在位置 2 推 456：

```
12456345 
```

我知道可能我必须自己实现它，但我想知道您对如何尽可能有效地实现它的看法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T05:07:40.727

这是一个`extend_file_and_insert()`或多或少完成这项工作的函数。

```
#include <sys/stat.h>
#include <unistd.h>

enum { BUFFERSIZE = 64 * 1024 };

#define MIN(x, y) (((x) < (y)) ? (x) : (y))

/*
off_t   is signed
ssize_t is signed
size_t  is unsigned

off_t   for lseek() offset and return
size_t  for read()/write() length
ssize_t for read()/write() return
off_t   for st_size
*/

static int extend_file_and_insert(int fd, off_t offset, char const *insert, size_t inslen)
{
    char buffer[BUFFERSIZE];
    struct stat sb;
    int rc = -1;

    if (fstat(fd, &sb) == 0)
    {
        if (sb.st_size > offset)
        {
            /* Move data after offset up by inslen bytes */
            size_t bytes_to_move = sb.st_size - offset;
            off_t read_end_offset = sb.st_size; 
            while (bytes_to_move != 0)
            {
                ssize_t bytes_this_time = MIN(BUFFERSIZE, bytes_to_move);
                ssize_t rd_off = read_end_offset - bytes_this_time;
                ssize_t wr_off = rd_off + inslen;
                lseek(fd, rd_off, SEEK_SET);
                if (read(fd, buffer, bytes_this_time) != bytes_this_time)
                    return -1;
                lseek(fd, wr_off, SEEK_SET);
                if (write(fd, buffer, bytes_this_time) != bytes_this_time)
                    return -1;
                bytes_to_move -= bytes_this_time;
                read_end_offset -= bytes_this_time; /* Added 2013-07-19 */
            }   
        }   
        lseek(fd, offset, SEEK_SET);
        write(fd, insert, inslen);
        rc = 0;
    }   
    return rc;
} 
```

*（注意 2013-07-19 添加的附加行；这是一个错误，仅在缓冲区大小小于要复制到文件中的数据量时显示。感谢[malat](https://stackoverflow.com/users/136285/malat)指出错误。代码现在用`BUFFERSIZE = 4`.)*

这是一些小规模的测试代码：

```
#include <fcntl.h>
#include <string.h>

static const char base_data[] = "12345";
typedef struct Data
{
    off_t       posn;
    const char *data;
} Data;
static const Data insert[] =
{
    {  2, "456"                       },
    {  4, "XxxxxxX"                   },
    { 12, "ZzzzzzzzzzzzzzzzzzzzzzzzX" },
    { 22, "YyyyyyyyyyyyyyyY"          },
};  
enum { NUM_INSERT = sizeof(insert) / sizeof(insert[0]) };

int main(void)
{
    int fd = open("test.dat", O_RDWR | O_TRUNC | O_CREAT, 0644);
    if (fd > 0)
    {
        ssize_t base_len = sizeof(base_data) - 1;
        if (write(fd, base_data, base_len) == base_len)
        {
            for (int i = 0; i < NUM_INSERT; i++)
            {
                off_t length = strlen(insert[i].data);
                if (extend_file_and_insert(fd, insert[i].posn, insert[i].data, length) != 0)
                    break;
                lseek(fd, 0, SEEK_SET);
                char buffer[BUFFERSIZE];
                ssize_t nbytes;
                while ((nbytes = read(fd, buffer, sizeof(buffer))) > 0)
                    write(1, buffer, nbytes);
                write(1, "\n", 1);
            }
        }
        close(fd);
    }
    return(0);
} 
```

它产生输出：

```
12456345
1245XxxxxxX6345
1245XxxxxxX6ZzzzzzzzzzzzzzzzzzzzzzzzZ345
1245XxxxxxX6ZzzzzzzzzzYyyyyyyyyyyyyyyYzzzzzzzzzzzzzzZ345 
```

它应该在一些较大的文件上进行测试（大于 BUFFERSIZE 的文件，但使用比 64 KiB 小很多的 BUFFERSIZE 进行测试是明智的；我使用了 32 个字节，而且似乎还可以）。我只观察了结果，但这些模式的设计目的是让人们很容易看出它们是正确的。该代码不检查任何`lseek()`调用；这是一个小风险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T02:55:49.383

首先，使用`ftruncate()`将文件放大到最终大小。然后将所有内容从旧端复制到新端，然后返回插入点。然后用要插入的数据覆盖中间的内容。我认为这是尽可能高效的，因为文件系统通常不会在文件中间提供真正的“插入”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:20:41.637

我同意其他人的观点，但让我以不同的方式说明解决方案：

1.  获取临时文件名（对此有特定于操作系统的调用）

2.  将原始文件复制到临时文件（同一个文件现在有两个副本）

3.  打开“追加”的原始文件。

4.  将其“截断”到您的插入点

5.  写入新数据

6.  打开您的临时文件进行“读取”

7.  “寻找”到插入点（同样，调用是特定于操作系统的）

8.  读取到临时文件中的文件结尾；插入到您的原始文件中（仍然为“追加”打开）。

9.  关闭两个文件

10.  删除临时文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T04:13:04.443

我将把您的问题广义地解释为“如何有效地实现对象的持久存储，该对象支持通过索引进行随机访问查找和通过扩展插入。” 如前所述，您可以在文件中使用简单的线性数组，但这只会对查找（O（1））有效，而对于插入（O（n））效率很低。您可以通过使用树数据结构来实现查找和插入的 O(log n)。维护一个充当索引的文件，另一个充当数据存储并且是一系列块。每个块都可以部分满。索引文件包含一棵树（二叉树或 B 树），其中每个节点对应于数组的某个连续块并包含该块的大小（以便根节点包含整个数组的大小）。对于二叉树，左右子节点包含数组左右两半（大约）的大小。最后，叶节点包含指向数据存储文件中包含实际数据的块的指针。插入现在涉及更改“k”节点的“大小”属性，其中“k”是树的高度。当数据存储块太满时，将其拆分（通过增加文件分配一个新块，或者，如果您也支持删除，可能从空块的空闲列表中）并重新平衡树（许多标准的做这。）k' 是树的高度。当数据存储块太满时，将其拆分（通过增加文件分配一个新块，或者，如果您也支持删除，可能从空块的空闲列表中）并重新平衡树（许多标准的做这。）k' 是树的高度。当数据存储块太满时，将其拆分（通过增加文件分配一个新块，或者，如果您也支持删除，可能从空块的空闲列表中）并重新平衡树（许多标准的做这。）

这听起来很复杂吗？确实！高效的中间文件插入比追加更复杂。

# css - 当我尝试使用 css 时，为什么没有任何图像显示？

> ID：10467715
> 
> 赞同：0
> 
> 时间：2012-05-06T02:52:55.890
> 
> 标签：css, image, background

我对 html 和 css 很陌生。我正在尝试设置我的背景图像，但没有任何效果。我在我的 html 文件所在的位置创建了一个文件夹，并且我还尝试使用图像属性上显示的直接路径。我试过的都没有用。我已经阅读了很多说明，在线观看了视频等，等等，希望有人能帮助我！它看起来很简单，但我在让它工作时遇到了很多麻烦。下面是我如何拥有一切。

```
<html> 
<head>
<style type="text/css">
body {background-image:url ("C:/Users/owner/Desktop/site files/images/grass.jpg");}

</style>

</head>

<body>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:56:32.130

它可能与您的本地 URL 有关。将图像与您的代码放在一起并使用相对路径。

```
<style type="text/css">
  body {
    background-image: url("../images/grass.jpg");
  }
</style> 
```

**注意**：我还鼓励您避免使用空格或其他非常规文件名字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:59:27.533

听起来很愚蠢，当 url 和 (

我还将文件链接更改为类似的内容`"file:///C:/Users/user/Desktop/face.jpg"`（在浏览器中打开所需的图像应该会在地址栏中显示这种格式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T02:59:40.100

接下来我建议你：

1）在正文中添加一些东西，使页面不为空

```
<body>Some text</body> 
```

2）您的路径中的名称中有带有空白符号（空格）的文件夹 - 这可能是问题！

我建议您将背景图像与 HTML 文件放在同一个文件夹中，并以如下方式写入路径：

```
body { background-image: url('./grass.jpg'); } 
```

注意可以在路径中使用的特殊标志：

./ 当前目录

../ 一个目录向上

# java - jsp会话更新号码

> ID：10467716
> 
> 赞同：0
> 
> 时间：2012-05-06T02:53:20.167
> 
> 标签：java, html, jsp

换句话说，我无法更新数字，如果第一个数字是 8 和 13，并且有人提交了 21，那么下次有人加载页面时，数字将是 13 和 21。我知道我的会话有问题，但不要不知道什么

```
<%@ page import="java.io.*"%><%@
import="java.util.*"%><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>MAIN</title>
    </head>
    <body>
    <%
   String sum = (String) session.getAttribute("sum");
    if (sum==null) {
            sum = "0";
            session.setAttribute("sum",sum);
    }
    int isum = Integer.parseInt(sum);
    String fib1= (String) session.getAttribute("fib1");
    fib1 = "8";
    session.setAttribute("fib1",fib1);
    int ifib1 = Integer.parseInt(fib1);
    String fib2= (String) session.getAttribute("fib2");
    fib2 = "13";
    int ifib2 = Integer.parseInt(fib2);
    isum=ifib1+ifib2;

    boolean numberReceived=false;
    int usum = -1;
    try{
            usum=Integer.parseInt(request.getParameter("number"));
            numberReceived=true;
    }catch(NumberFormatException nfe){
            System.out.print("error");
    }

    if (!numberReceived) {
            out.print("You need to enter a value");
    } else {
            if (usum==isum) {
                    out.print("correct");
                   ifib1+=5;
            } else {
                    out.print("incorrect");
            }
    }
   session.setAttribute("fib1",""+ifib1);

   %>

  <input type="button" value="go" onclick="doTheGObutton();">
    <form action="index.jsp" method="post">
      <%=fib1%> + <%=fib2%> = <input type="text" name="number">
    <input type="submit" value="continue" name="submit">
    </form>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:52:13.460

这是问题中您的代码片段。

```
String fib1= (String) session.getAttribute("fib1");
fib1 = "8";
session.setAttribute("fib1",fib1); 
```

所以让我们阅读代码。

1.  读取“f1b1”会话属性的值并将其放入`fib1`.
2.  `fib1`用硬连线常量替换 in 的值。
3.  将“f1b1”会话属性更新为硬连线常量。

那怎么*可能*做你想做的事？当然，稍后您将一个新值写入会话属性。但这并不重要，因为上面的代码破坏了“fib1”作为 JSP 的第一个操作。

我的建议是，当你遇到这样的问题时，你应该仔细阅读你编写的代码，并思考它是否会做你想要/需要它做的事情。

# c# - 如何向 Membership.CreateUser() 添加参数

> ID：10467724
> 
> 赞同：1
> 
> 时间：2012-05-06T02:55:40.193
> 
> 标签：c#, asp.net, asp.net-membership

```
CreateUser (string username, string password, string email,
string passwordQuestion, string passwordAnswer, bool isApproved,
object providerUserKey, out MembershipCreateStatus status );

Membership.CreateUser (TextBox1.Text, TextBox2.Text, TextBox3.Text, 
TextBox4.Text, TextBox5.Text, true, out result); 
```

我可以重写`CreateUser()`函数以添加额外的参数作为年龄和地址并将这些数据存储到我在 ASPNETDB 的成员表中添加的相应列中吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:45:25.873

您必须创建您使用的成员资格提供程序的子类，并提供一个附加`CreateUser`方法，该方法采用创建用户所需的参数。

```
public class MyMembershipProvider : SqlMembershipProvider
{
    public MembershipUser CreateUser(/* your custom arguments*/)
    {

    }
} 
```

创建一个扩展方法来调用您的方法。

```
public static MembershipUser CreateUser(this Membership membership, /* your custom arguments*/)
{
       ((MyMembershipProvider)membership.Provider).CreateUser(/* your custom arguments*/);
} 
```

然后，您可以将其用作`CreateUser`方法的 orverload。

```
Membership.CreateUser(/* your custom arguments*/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:32:12.323

参考 Eranga 的建议：

这不起作用，静态类型不能用作参数。`CreateUser`据我所知，如果不编写自己的自定义提供程序，则无法覆盖该方法，然后使用您自己的参数创建一个公共 CreateUser 方法，然后将提供程序转换为调用您的方法，如下所示：

```
((MyMembershipProvider)Membership.Provider).CreateUser(/* my parameters */) 
```

# javascript - 添加具有不同文本的div？

> ID：10467728
> 
> 赞同：1
> 
> 时间：2012-05-06T02:55:58.917
> 
> 标签：javascript, jquery, html, css

我让自己成为了一个列表加法器。当您单击该链接时，它会添加一个 div。我正在尝试将输入的当前文本添加到 div 的内部文本中，然后附加它。添加后，我希望在输入中清除文本。我试过这个[http://jsfiddle.net/Hunter4854/hwbcs/2/](http://jsfiddle.net/Hunter4854/hwbcs/2/)但我卡住了，不知道如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:04:17.807

第一个问题是，您`txt`仅在页面加载时才获得值，因此该变量将始终包含一个空值。

第二个问题是，您实际上是在尝试`txt`写入`this.innerText`. 这是一个双重错误，因为`this`在那个上下文中是点击的链接，而 jQuery 没有`.innerText`（有`.text`and `.html`）。

最后，要清除输入，只需使用`$('input').val('');`. 传递一个空字符串以`.val()`将输入文本设置为该字符串。

这是一个[工作版本](http://jsfiddle.net/hwbcs/4/)。

# php - Array_push() 不在 for 循环中工作

> ID：10467729
> 
> 赞同：1
> 
> 时间：2012-05-06T02:56:10.477
> 
> 标签：php

```
$cust = rand(50,100);
$minutes = rand(200,2500);
$minutesarr = array();
function minutesTable()
{
        global $cust,$i,$minutes,$minutesarr;
        for ($i = 0; $i <= $cust; $i++)
        {
            array_push($minutesarr,$minutes);

        }          
} 
```

我什至求助于使用`$minutesarr[$i] = $minutes;`，但这也不起作用，这很奇怪。

编辑：哎呀我忘了在线程中添加 $cust 变量。让我在其中添加它以防止混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:00:06.090

由于`$cust`未声明该值，因此您的循环甚至没有开始......

宣布

```
$cust = some number 
```

在开始循环之前

下一次，如果你想检查一个循环是否正在运行，只需在其中放一条日志消息（或任何编程语言允许你做的调试），运行代码然后检查它是否被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T03:02:40.380

必须发生以下情况之一：

1.  该函数永远不会运行
2.  `$cust`从未声明过
3.  `$cust`小于 1

所以确认/解决上述问题，你应该是花花公子。

另外我应该注意，您可能希望该`$minutes`变量在每个循环中包含不同的数字，但它不会与您当前的代码一起使用。您必须`rand`为每个循环再次运行该函数才能获得一个新数字。

* * *

**回答您的评论**

扩展您当前的代码：

```
$cust = rand(50,100);
$minutesarr = array();
function minutesTable()
{
        global $cust, $minutesarr;

        for ($i = 0; $i <= $cust; $i++)
        {
            $minutes = rand(200,2500);
            array_push($minutesarr, $minutes);
        }
}

// RUN the function :-P
minutesTable(); 
```

# c# - C#WebClient上传，PHP保存文件，权限问题

> ID：10467735
> 
> 赞同：0
> 
> 时间：2012-05-06T02:57:39.773
> 
> 标签：c#, php, upload

我正在使用 C# 和 WebClient.FileUpload 将文件上传到我的服务器，然后使用 PHP 服务器端将临时文件移动到我的上传目录。这些上传的文件将包括 .exe 文件。

我的问题是文件上传只有在上传文件夹的权限设置为777时才能成功，即使776也不起作用。我读过这可能是一些服务器设置阻止了这种情况的发生，但这不是一个非常大的问题吗？特别是因为我想允许上传 .exe 文件，所以我不能使用 .htaccess 来禁止它们。

到目前为止，我唯一的半解决方案是将我的上传目录设置为 755，然后在我的 PHP 脚本中，暂时将其 chmod 为 777 以进行复制，然后返回 755。但是，我确信这是一个非常骇人听闻的“解决方案” .

任何人都可以提出任何建议吗？当我将凭据与 client.NetworkCredentials 一起使用时，为什么不起作用？

我也可以用 C# 压缩可执行文件，并且不允许 .exe 文件。

# iphone - 有没有办法在 MKMapView 上的许多 MKPointAnnotations 上打开多个标注？

> ID：10467737
> 
> 赞同：0
> 
> 时间：2012-05-06T02:58:44.330
> 
> 标签：iphone, objective-c, ios5, mkmapview, mkannotationview

我想知道是否有可能做到这一点，或者如果不是，有什么替代方案？我需要一些需要在地图上显示的信息，但我遇到了麻烦...... MKPointAnnotation 提供了一个很好的界面，但我一次无法打开超过 1 个标注。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:15:41.013

在注释中添加按钮并为按钮设置标签。您也可以将其与自定义注释一起使用，但底线方法与以下相同。您需要设置标识符（标签）以打开多个注释。

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

     {

         MKPinAnnotationView *pin = (MKPinAnnotationView *) [self.map      dequeueReusableAnnotationViewWithIdentifier: @"restMap"];
         if (pin == nil) {
            pin = [[[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier: @"restMap"] autorelease];
          }

          else {
              pin.annotation = annotation;
               }

          // add cutom button by following way.
          UIButton *detailButton = [UIButton buttonWithType:UIButtonTypeCustombutton];

          // you just need to find an integer value that matches your object in some way:
          // its index in your array of MKAnnotation items, or an id of some sort, etc

          NSInteger annotationValue = [self.annotations indexOfObject:annotation];

          // set the tag property of the button to the index
          detailButton.tag = annotationValue;

          pin.rightCalloutAccessoryView = detailButton;
          return pin;
    }

     -(IBAction)showDetailofannotation:(UIView*)sender {
       // get the tag value from the sender
        NSInteger annotationtag = sender.tag;
        MyAnnotationObject *selectedObject = [self.annotations objectAtIndex:annotationtag ];

   // now you know which detail view you want to show; the code that follows

        YourDetailViewController *detailView = [[YourDetailViewController alloc] initWithNibName:@"YourDetailViewController ", NSBundle:nil];
detailView.detailObject = selectedObject;

       [[self navigationController] pushViewController:detailView animated:YES];
        [detailView release];`
     } 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:24:42.533

我找到了解决方案：

您需要先阅读以下内容：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html)

然后这里有一个例子：

[http://shawnsbits.com/blog/2011/04/12/custom-map-pins-for-mapkit/](http://shawnsbits.com/blog/2011/04/12/custom-map-pins-for-mapkit/)

关键是在 viewDidLoad 中加载带有自定义图像的注释数组，然后在 mapView:viewForAnnotation: 创建一个新的 MKAnnotationView 并通过将注释转换为传递给它的自定义注释来将图像加载到其中。

我希望这有帮助。对不起，如果它看起来有点混乱！

# html - 我们有 django 框架的 css 和 html 扩展吗？

> ID：10467738
> 
> 赞同：0
> 
> 时间：2012-05-06T02:58:48.917
> 
> 标签：html, django, django-templates, haml, sass

我在 中花了一些时间`django`，但模板似乎是：

*   非生产性
*   耗时的
*   难以管理的意大利面条代码 [ Django 标签 + HTML ]

我四处寻找替代方案，发现：

*   SASS [ CSS 扩展 ] -- 用于导轨
*   超薄 [ HTML 扩展 ]

但是我发现上面没有特别提到`django`，我也没有在官方`django`文档中找到以上任何内容。

**那么，我们有 django 的 css / html 扩展吗？**

**是否更愿意将这些与 django 一起使用？**

请参考django谈谈这些。**[任何指导表示赞赏]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:15:36.773

在官方 django 文档中找不到对这些的任何引用的原因是因为这些没有与官方 django 版本捆绑在一起。此外，更重要的是 - django（和一般的 python）不认可任何特定的第三方库作为下一个要使用的特别酱。如果有一些第三方组件做得特别好 - django 将集成它（就像`django-staticfiles`成为官方 django 版本的一部分的情况一样）。

不过，您会找到社区推荐。例如`lxml`，在 xml/html 解析方面广受赞誉，但它并未在 Python 文档中得到正式认可。

与 django 类似，他们不认可要使用的第三方软件。相反，他们让你决定什么最适合你的大脑，我更喜欢哪个。

如果必须，您可以：

*   通过 django 使用 SASS[`django_compressor`](http://django_compressor.readthedocs.org/en/latest/settings/#backend-settings)
*   使用 HAML 和 django 先安装[`HamlPy`](https://github.com/jessemiller/HamlPy)然后[`djaml`](https://github.com/chartjes/djaml)// [`Djinja`](http://pypi.python.org/pypi/Djinja)（[`django-haml`](https://github.com/fitoria/django-haml)或使用捆绑的 hamlpy-watcher 脚本，类似于 SASS 的 watcher）

SLIM 似乎是 Ruby 的模板引擎。如果您正在寻找替代品（同样，为了与其他应用程序兼容，我不建议这样做），您可以使用[`jinja2`](http://jinja.pocoo.org/2/)django。

Keep in mind that django is a full stack framework, so everything is included in the box and is tightly integrated to get you running off the ground quickly. If you prefer a more "bring your own component" approach, you should explore other frameworks. The most pluggable one is [`Pyramid`](http://www.pylonsproject.org/) which evolved from the excellent `Pylons` project.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:36:52.417

[查看 Jinja2](http://jinja.pocoo.org/docs/)。我不得不承认我对此一无所知。不过，有一个[Quora 问题](http://www.quora.com/What-is-a-good-templating-engine-for-Python)，其中有几个值得一读的答案。发现的其他例子还有[Mako](http://www.makotemplates.org/)和[Cheetah](http://www.cheetahtemplate.org/)。

典范RG

# iphone - showInView 导致剪辑

> ID：10467740
> 
> 赞同：0
> 
> 时间：2012-05-06T02:59:07.207
> 
> 标签：iphone, objective-c, ios, xcode, uiview

因此，我遵循了一个关于如何在用户点击 UITextField 时获取 UIDatePicker 而不是键盘的教程。The problem I'm getting is that when the picker comes up, it's clipped and it gives this message in the console:

```
Presenting action sheet clipped by its superview. Some controls might not respond to touches. On iPhone try -[UIActionSheet showFromTabBar:] or -[UIActionSheet showFromToolbar:] instead of -[UIActionSheet showInView:]. 
```

我尝试了其他方法，但它们也不起作用，我也不希望它们起作用。如果有人可以查看下面的代码并提供一些建议，那就太好了。谢谢 ：）

添加ShiftViewController.h

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "Shift.h"

@interface AddShiftsViewController : UIViewController <UITextFieldDelegate>

@property (weak, nonatomic) IBOutlet UITextField *jobTitleField;
@property (weak, nonatomic) IBOutlet UITextField *startDateField;
@property (weak, nonatomic) IBOutlet UITextField *endDateField;

@property (nonatomic, strong) NSDate *startDate;
@property (nonatomic, strong) NSDate *endDate;

@property (nonatomic, strong) UIActionSheet *dateSheet;

- (void)setDate;
- (void)dismissPicker;
- (void)cancelPicker;

- (IBAction)addShift:(id)sender;

@end 
```

添加ShiftViewController.m

```
#import "AddShiftsViewController.h"

@interface AddShiftsViewController ()

@end

@implementation AddShiftsViewController
@synthesize jobTitleField;
@synthesize startDateField;
@synthesize endDateField;
@synthesize startDate, endDate, dateSheet;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    AppDelegate *dataCenter = (AppDelegate *)[[UIApplication sharedApplication] delegate];
}

- (void)viewDidUnload
{
    [self setJobTitleField:nil];
    [self setStartDateField:nil];
    [self setEndDateField:nil];
    [self setEndDate:nil];
    [self setStartDate:nil];
    [self setDateSheet:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)addShift:(id)sender {
    Shift *newShift = [[Shift alloc] init];
}

- (void)setDate {
    dateSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

    [dateSheet setActionSheetStyle:UIActionSheetStyleDefault];

    CGRect pickerFrame = CGRectMake(0, 44, 0, 0);
    UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
    [picker setDatePickerMode:UIDatePickerModeDateAndTime];

    [dateSheet addSubview:picker];

    UIToolbar *controlToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, dateSheet.bounds.size.width, 44)];

    [controlToolBar setBarStyle:UIBarStyleDefault];
    [controlToolBar sizeToFit];

    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem *setButton = [[UIBarButtonItem alloc] initWithTitle:@"Set" style:UIBarButtonItemStyleDone target:self action:@selector(dismissPicker)];

    UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelPicker)];

    [controlToolBar setItems:[NSArray arrayWithObjects:spacer, cancelButton, setButton, nil] animated:NO];

    [dateSheet addSubview:controlToolBar];

    [dateSheet showInView:self.view];

    [dateSheet setBounds:CGRectMake(0, 0, 420, 385)];
}

- (void)dismissPicker {
    NSArray *listOfViews = [dateSheet subviews];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMMM d, yyyy at H:mm"];

    for (UIView *subView in listOfViews) {
        if ([subView isKindOfClass:[UIDatePicker class]]) {
            if (self.startDateField.isEditing) {
                self.startDate = [(UIDatePicker *)subView date];
                [self.startDateField setText:[formatter stringFromDate:self.startDate]];
                [dateSheet dismissWithClickedButtonIndex:0 animated:YES];
            }
            else if (self.endDateField.isEditing) {
                self.endDate = [(UIDatePicker *)subView date];
                [self.endDateField setText:[formatter stringFromDate:self.endDate]];
                [dateSheet dismissWithClickedButtonIndex:0 animated:YES];
            }
        }
    }
}

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    [self setDate];
    return NO;
}

- (void)cancelPicker {
    [dateSheet dismissWithClickedButtonIndex:0 animated:YES];
}

@end 
```

Shifts.h（自定义类）

```
#import <Foundation/Foundation.h>

@interface Shift : NSObject

@property (nonatomic, strong) NSString *jobTitle;
@property (nonatomic, strong) NSString *employer;
@property (nonatomic, strong) NSDate *startDate;
@property (nonatomic, strong) NSDate *endDate;

@end 
```

***编辑***

所以，我尝试切换到：

```
[dateSheet showFromTabBar:self.tabBarController.tabBar]; 
```

但它仍然在剪裁。我附上了一张图片，向您展示正在发生的事情。

![在此处输入图像描述](../Images/003bbedf7bbd8972231b7d413a660c04.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:36:55.447

看起来你可能已经得到了这条线上的数字有点偏离：

```
[dateSheet setBounds:CGRectMake(0, 0, 420, 385)]; 
```

应该：

```
[dateSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

iPhone 屏幕的宽度不是 420 像素 :) 经典屏幕在 Retina 显示屏上是 320 宽（纵向）或 640 宽。尽管其他地方也可能存在错误，但这个错误对我来说很突出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:40:36.840

首先，您确定框架宽度 n 高度是否正确。

```
CGRect pickerFrame = CGRectMake(0, 44, 0, 0); // (params) x , y, width, height 
```

使用此框架的 Picker View 具有 0 宽度和 0 高度，因此将无法正确显示自己。尝试使用一些宽度或高度创建 UIDatePicker。

此外，您是否尝试从属于 UITabBarController 的控制器中显示 UIActionSheet ... ??? 如果是这样，那么代替

```
[datesheet showInView:self.view]; 
```

采用

```
[datesheet showFromTabBar:self.tabBarController.tabBar]; 
```

# php - PHP 中的 if/Elseif 语句

> ID：10467746
> 
> 赞同：1
> 
> 时间：2012-05-06T02:59:33.417
> 
> 标签：php, html, if-statement

我们正在尝试为变量创建 if/elseif 语句`$day`。我们在与此 PHP 关联的 HTML 代码中定义了变量及其值。我会将 PHP 部分粘贴到此页面。问题是结果页面只给出“$day = 1”的响应。有谁知道此代码中的错误会导致这种情况发生？我们还尝试使用两个等号，但这让情况变得更糟！

```
echo "<p>";
                if ($day = 1) {
                    echo "Sunday Funday! What COMMITMENT to going out!";
                } elseif ($day = 2) {
                    echo "The start of what's sure to be a rough week. Drink away your sorrows.";
                } elseif ($day = 3) {
                    echo "Epic night! SO many themes at the bars!";
                } elseif ($day = 4) {
                    echo "Hump day!! But seriously, what are you doing...? Aren't you too hungover from last night?";
                } elseif ($day = 5) {
                    echo "Thirsty Thursday!! It's close enough to the weekend... right?";
                } elseif ($day = 6) {
                    echo "It's Friiiiiiday, Friiiiiiiday, Gotta get down on Friiiiiiiiiday!";
                } elseif ($day = 7) {
                    echo "It's FRATurday! Go have some fun!";

            } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T03:02:41.827

`=`当您打算使用比较时，您正在使用分配`==`。

赋值计算右侧的内容，所以

```
if ($day = 1) 
```

是相同的

```
if (1) 
```

由于[这些规则](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)，这与

```
if (true) 
```

这应该可以解释为什么程序的行为如此，当然您现在知道如何修复它了。`switch`但是如果你使用一个语句会更好：

```
switch($day) {
    case 1:
        echo "Sunday Funday! What COMMITMENT to going out!";
        break;
    case 2:
        echo "The start of what's sure to be a rough week.";
        break;
    // etc etc
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T03:08:43.520

如果您有一长串要检查的条件，您通常不想编写一长串 if / else 语句。而是尝试一个[`switch`](http://php.net/switch)块，甚至是一个[`array`](http://php.net/array)地图：

```
 $map = array(
    1 => "Sunday Funday! What COMMITMENT to going out!",
    2 => "The start of what's sure to be a rough week. Drink away your sorrows.",
    3 => "Epic night! SO many themes at the bars!",
    4 => "...",
 ); 
```

然后代码变得非常简单：

```
 echo $map[ $day ]; 
```

（理想情况下会使用[`isset`](http://php.net/isset)检查。但对于开发阶段，PHP 足够聪明，可以提示缺少条目。如果输入值已经受到约束/断言，则无论如何都不需要。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-06T03:02:32.660

您正在分配 ( `=`)。您需要一个逻辑等式 ( `==`)。

```
if ($day == 1) {
  echo "Sunday Funday! What COMMITMENT to going out!";
} 
```

查看[比较](http://www.php.net/manual/en/language.operators.comparison.php)和[逻辑运算符](http://php.net/manual/en/language.operators.logical.php)。也是[`switch()`声明](http://www.php.net/manual/en/control-structures.switch.php)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T03:03:04.583

比较运算符 is`==`和 not `=`。

还可以尝试这种查找表方法，在这种情况下更简洁：

```
$day_msg = array(
    1 => "Sunday Funday! What COMMITMENT to going out!",
    2 => "The start of what's sure to be a rough week. Drink away your sorrows.",
    3 => "Epic night! SO many themes at the bars!",
    4 => "Hump day!! But seriously, what are you doing...? Aren't you too hungover from last night?",
    5 => "Thirsty Thursday!! It's close enough to the weekend... right?"
    6 => "It's Friiiiiiday, Friiiiiiiday, Gotta get down on Friiiiiiiiiday!",
    7 => "It's FRATurday! Go have some fun!"
);
echo "<p>";
echo $day_msg[$day]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T03:04:20.610

你想让所有的条件都像这样

```
 if ($day == 1) {
                echo "Sunday Funday! What COMMITMENT to going out!";
            } elseif ($day == 2) {
                echo "The start of what's sure to be a rough week. Drink away your sorrows.";
            } elseif ($day == 3) {
                echo "Epic night! SO many themes at the bars!";
            } elseif ($day == 4) {
                echo "Hump day!! But seriously, what are you doing...? Aren't you too hungover from last night?";
            } elseif ($day == 5) {
                echo "Thirsty Thursday!! It's close enough to the weekend... right?";
            } elseif ($day == 6) {
                echo "It's Friiiiiiday, Friiiiiiiday, Gotta get down on Friiiiiiiiiday!";
            } elseif ($day == 7) {
                echo "It's FRATurday! Go have some fun!";

        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-06T03:03:38.503

你首先认为是对的，你需要**两个**等号。

# image - 带有最小化和最大化窗口的 bash imagemagick 导入屏幕截图

> ID：10467747
> 
> 赞同：2
> 
> 时间：2012-05-06T02:59:34.577
> 
> 标签：image, bash, import, screenshot

我想从 ubuntu 中的 bash 脚本进行简单的全屏捕获。这个：

```
import -window root screen.png 
```

从[imagemagick](http://www.imagemagick.org/www/import.html)工作正常，直到---我切换到连接了外部显示器的笔记本电脑。现在捕获的图像不是屏幕上显示的，而是显示不同的窗口。有没有办法控制 的这种行为`import`，还是我需要其他工具？

编辑：

对我来说非常重要的是不需要鼠标点击，因为脚本是在没有人工交互的情况下运行的。

**编辑**：

真正的问题不是我最初的想法，而是一个错误`import`- 它无法正确处理最大化或最小化的窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:53:37.390

指定显示*和*窗口将无需鼠标单击：

`import -display :0.1 -window root -colorspace RGB -quality 80 screendump.jpg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T05:17:07.773

告诉它使用特定的屏幕。

```
import -display :0.1 ... 
```

# php - 使用子字符串 PHP 在页面上显示 SQL 表中的“日期”数据类型

> ID：10467755
> 
> 赞同：2
> 
> 时间：2012-05-06T03:00:07.950
> 
> 标签：php, sql, date

我的数据库中存储了一个日期，格式为“0000-00-00”，即 YYYY-MM-DD

我想接受它并将其转换为表示日期、月份和年份的字符串。如将 1993-03-18 转换为 1993 年 3 月 18 日。

这是我迄今为止在我的测试服务器上所拥有的（所以请不要对注入的有趣评论）

```
$dob_form = mysql_query("select dob from users where id='$_SESSION[user_id]'"); 
$dob_day = substr($dob_form, -2);
$dob_mth = substr($dob_form, -5, 2);
$dob_mtc = date( 'F', mktime(0, 0, 0, $dob_mt) );
$dob_yr = substr($dob_form, -10, 4);
$dob_display = $dob_day + " " + $dob_mtc + " " + $dob_yr; 
```

谁能看到我做错了什么和/或指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T03:05:09.100

用这个

```
select date_format(dob,'%d %M %Y') from users where id='$_SESSION[user_id]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:06:06.603

[`strtotime()`](http://php.net/strtotime)结合[`date()`](http://php.net/date)是一个典型的 PHP 组合。

```
$dob_form = mysql_query("select dob from users where id='$_SESSION[user_id]'");
// get query result...
echo date('d F Y', strtotime($result['dob'])); 
```

**注意**：请注意 MySQL 和 PHP 服务器之间的任何时区差异。

# android - 如何等待特定的用户操作

> ID：10467758
> 
> 赞同：0
> 
> 时间：2012-05-06T03:00:21.007
> 
> 标签：android, service, android-intent

我的应用程序是否可以在我的后台服务中建立一个 pendingIntent 并等待用户操作（如修改日历事件）？一旦用户添加日历事件，我想要启动服务/活动？可以做到吗？

有人可以帮我一些主干代码，这样我就可以朝着正确的方向前进吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:29:15.747

对于大多数 Android 设备，这不受支持。从 Android 4.0 开始，至少可以通过使用`ContentObserver`on来编写它`CalendarContract`，但这将是不可靠的——`Service`作为观察者的你需要尝试永远运行，而这不起作用。甚至这仅适用于 AOSP 日历应用程序——如果用户正在使用另一个日历应用程序，`CalendarContract`则可能不会涉及。

# c - 从C中的命令窗口读取文件

> ID：10467759
> 
> 赞同：0
> 
> 时间：2012-05-06T03:00:41.570
> 
> 标签：c, file, visual-c++

目前我读入了一个文件，如下面的代码所示。但是，我希望能够输入文件名并以相同的方式处理该文件，我使用的是 Microsoft Visual C++ 2010 express。编码：

```
int main (int argc, char *argv[])
{

static const int MAX_FILE_ROWS = 10;

double lines[MAX_FILE_ROWS][4];
FILE *file = fopen("filename.txt", "r");

for (int i = 0; i < MAX_FILE_ROWS; i++){
if (feof(file))
    break;

fscanf(file, "%lf %lf %lf %lf", &(lines[i][0]), &(lines[i][1]), &(lines[i][2]), &(lines[i][3]));     
printf("%f %f %f %f\n", lines[i][0], lines[i][1], lines[i][2], lines[i][3]);
}

fclose(file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:05:02.530

主要的签名是：

```
int main(int argc, char* argv[]); 
```

作为第二个参数的 argv[1] 将是您要输入的文件的名称。第一个是应用程序本身的完整路径，所以

```
argv[1] 
```

会给你命令行参数的第一个参数。将代码中的文件名替换为 argv[1]。这就对了。

所以代码应该是这样的：

```
FILE *file = fopen(argv[1], "r"); 
```

# ruby - 为什么我的命令在 IRB 中有效，但在 Ruby 脚本中无效？

> ID：10467763
> 
> 赞同：1
> 
> 时间：2012-05-06T03:01:23.010
> 
> 标签：ruby, bash, shell, irb

下面的命令在 IRB 中有效，但在 Ruby 程序中无效。

```
DISPLAY=:5 nohup firefox youtube.com & 
```

在`irb`它成功返回：

```
nohup: redirecting stderr to stdout 
```

当在反引号（“`”）中从 Ruby 程序调用时，它返回：

```
** (firefox:12402): WARNING **: Could not connect: Connection refused

** (firefox:12470): CRITICAL **: unable to create '/var/www/.cache/dconf'; dconf will not work properly.
Xlib:  extension "RANDR" missing on display ":5".
Failed to stat home directory /var/www: No such file or directory

(firefox:12470): GConf-WARNING **: Client failed to connect to the D-BUS daemon:
Failed to connect to socket /tmp/dbus-989cWYOeP6: Connection refused 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:35:30.310

问题似乎是为了连接到 X 会话，用户必须有权这样做（可能通过 Xauthority）。运行 Web 服务器的 www-data 用户没有这样的权限。

如果您尝试在 Web 请求的上下文中使用 X 环境执行操作（尤其是启动 Web 浏览器，就像您正在做的那样），那么您可能应该重新考虑您的方法，因为这听起来是个坏主意.

由于我们工作的性质，我们（在[Flippa.com 上](https://flippa.com/)）必须出于各种原因打开网页。我们使用[phantomjs](http://phantomjs.org/) ，它也需要一个 X 服务器，尽管我们通过[Headless](https://github.com/leonid-shevtsov/headless) gem运行一个名为[Xvfb的无头 X 服务器。](http://en.wikipedia.org/wiki/Xvfb)但是，我们不会在 Web 请求的上下文中执行此类操作，因为这通常是一个昂贵的过程。我们在后台运行了一堆 Resque 工作线程并卸载了异步执行的工作。也许你应该考虑这样的方法。

此外，如果您启动 Firefox 是为了抓取网页内容、截屏等，您可能需要查看 phantomjs，它旨在以编程方式使用，而不是在桌面上使用。

这是我们使用 phantomjs 截取的当前屏幕截图的示例。

[https://flippa.com/auctions/2703649/screenshots/30b037b026044f58764888995d41c020.png](https://flippa.com/auctions/2703649/screenshots/30b037b026044f58764888995d41c020.png)

# backbone.js - Backbone.js 数据持久化

> ID：10467768
> 
> 赞同：0
> 
> 时间：2012-05-06T03:02:06.887
> 
> 标签：backbone.js, persistence, data-persistence

如果我正在使用backbone.js 构建应用程序，那么用于数据持久性的最佳工具或工具组合是什么？

所以我不能再等七个小时来回答我自己的问题，所以我把答案放在这里：

我刚刚找到了一个很好的链接来回答我自己的问题。正是我要找的东西：http: [//pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:17:26.107

如果你想要一些更简单的东西，而不需要 Mongoose 依赖，我已经做了一个非常简短的示例，说明如何使用 Backbone、Express.js 和 MongoDB 实现基本持久性。

[https://gist.github.com/1999230](https://gist.github.com/1999230)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:46:53.650

您可以使用 StackMob。查看网站 (https://www.stackmob.com/) 我没有经常使用它，但你可以在 Udemy (http://www.udemy.com/learn-backbonejs-stackmob) 观看这个精彩的讲座/)，并观看第 11 和 12 讲

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T20:41:35.730

如果您想少写很多代码，请查看[Urbini](http://github.com/urbien/urbini%20Urbini)。它类似于 IFTTT，但更开放，因为它允许您创建自己的适配器以将任何 WebAPI 映射到主干模型。Urbini 为 IndexedDB 提供无缝持久性（回退到 WebSQL）并通过其 WebAPI 与网站自动同步。

# jquery - 如何让jQuery插件函数返回内在价值

> ID：10467774
> 
> 赞同：2
> 
> 时间：2012-05-06T03:03:03.890
> 
> 标签：jquery, jquery-plugins, this, return-value

我正在使用以下模式编写一个 jquery 插件，并且我希望该`bar`函数返回内在价值，但它似乎总是返回`$(this)`。
代码有什么问题吗？

```
(function($){

    var Foo = function(elements, options){
    ... ...
    }

    Foo.prototype = {

        constructor: Foo,

        bar: function(){
            var value = ...        
            // do something here
            return value;
        },

    }

    $.fn.foo = function (option, kwargs){  
        return this.each(function(){ 
            var $this = $(this),
                data = $this.data('foo'),
                options = typeof option == 'object' && option

            if (!data) $this.data('foo', (data = new Foo(this, options)))
            if (typeof option == 'string') return data[option](kwargs)
        })            
    }

})(jQuery) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T03:08:48.610

不，代码是正确的。问题是它当前设置为始终返回一个 jQuery 选择器（的返回值`this.each`）。要改为返回函数的结果，您可以`$.fn.foo`像这样修改函数：

```
$.fn.foo = function (option, kwargs){  
    var retval = null;

    this.each(function(){ 
        var $this = $(this),
            data = $this.data('foo'),
            options = typeof option == 'object' && option

        if (!data) $this.data('foo', (data = new Foo(this, options)))
        if (typeof option == 'string') {
          retval = data[option](kwargs);
        }
    })

    if (!retval) {
      retval = this;
    }

    return retval;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:08:14.787

在外部函数中，您编写了`return`this.each(...);`。

`this.each`总是返回你调用它的 jQuery 对象（用于链接）；它会忽略您传递给它的回调的返回值。

如果要从回调中返回一个值，请将该值放入一个变量中，然后在调用后返回该变量`each`。（这将起作用，因为`each`它不是异步的）。
如果您的方法在具有两个元素的 jQuery 对象上调用，您将需要弄清楚该怎么做；您可能想完全摆脱`each`通话。

# java - 在 JIBX 中绑定

> ID：10467779
> 
> 赞同：0
> 
> 时间：2012-05-06T03:03:41.843
> 
> 标签：java, xml, xsd, jibx

嗨，我刚开始使用 JIBX，我很难掌握 Binding 概念。我已经从我使用 windows 的 XSD 文件生成了 JAVA 类，这就是我的文件夹的结构

d:\Libraries\ 此文件夹包含下载的 jibx 文件夹，因此 jibx-tools.jar 等 rar 库位于 d:\Libraries\jibx\lib .....

现在 Libraries 文件夹还包含一个名为 dwcode2 的文件夹我在 D:\Libraries\jibx\dwcode2\ 中有一个名为 starter.xsd 的 XSD 文件

我使用 DOS D:\Libraries\jibx\dwcode2>java -cp ..\lib\jibx-tools.jar org.jibx.schema.codegen.CodeGen -t gen\src -w starter 中的命令生成了 JAVA 文件。 xsd

结果 JAVA 文件在 D:\Libraries\jibx\dwcode2\gen\src\org\jibx\

并且 binding.xml 在 D:\Libraries\jibx\dwcode2\gen\src 中生成

现在我想编译和绑定文件（谁能告诉我为什么我们必须编译和绑定 XML）所以我做了以下 D:\Libraries\jibx\dwcode2\gen\src>java -jar "D: \Java 库"\jibx\lib\jibx-bind.jar binding.xml

```
Error: Unable to find type org.jibx.starter.Shipping; on format element at (line 3, col 66, in binding.xml)Error: Cannot find information for class org.jibx.starter.Item; on mapping element at (line 4, col 79, in binding.xml)Error: Cannot find information for class org.jibx.starter.Address; on mapping element at (line 9, col 85, in binding.xml) Error: Cannot find information for class org.jibx.starter.Customer; on mapping element at (line 17, col 87, in binding.xml)Error: Cannot find information for class org.jibx.starter.Order; on mapping element at (line 22, col 81, in binding.xml) Error: Cannot find information for class org.jibx.starter.Order; on mapping element at (line 35, col 56, in binding.xml) Error running binding compiler org.jibx.runtime.JiBXException: Binding binding.xml is unusable because of validation errors at org.jibx.binding.Utility.loadBinding(Utility.java:358)   at org.jibx.binding.Utility.loadFileBinding(Utility.java:420)
                    at org.jibx.binding.Compile.compile(Compile.java:217)
                    at org.jibx.binding.Compile.main(Compile.java:384) 
```

谁能告诉我我做错了什么？我该如何解决这个问题？为什么我们必须绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:24:35.417

拉杰什，

当您使用 JiBX 代码生成器时，您需要执行三个步骤：
1\. 使用代码生成器从 XML 模式生成 java 代码和绑定文件
2\. 编译您的 java 代码
3\. 使用绑定编译器修改您的 java 类文件所以他们可以生成 XML 模式。
我看不到您的架构，所以您为什么不进行测试以查看问题是您的架构还是您的命令行：
- 将您的架构放在一个空目录中并运行这些命令。

```
java -cp ../lib/jibx-tools.jar org.jibx.schema.codegen.CodeGen starter.xsd
javac -cp ../lib/jibx-run.jar:. org/jibx/starter/Shipping.java
java -cp ../lib/jibx-bind.jar:. org.jibx.binding.Compile binding.xml 
```

当然，您将用您的路径（即 c:\Library）替换 lib 目录的路径。

如果可行，现在您可以将项目组织到文件夹中。

[您可以在我们的网站www.jibx.org](http://www.jibx.org)上找到完整的文档。

为了真正简化你的生活，我建议使用 maven 插件。配置要容易得多。

我希望这有帮助。

大学教师

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T08:43:09.430

您可能在 build.xml 上有错误。你的类路径位置正确吗？打开buid.xml，进入第一行所在的字段。看看下线。

如果是“bin”，则必须有 binding.xml 和包含“bin”中的 .class 文件的包。如果它在 bin/classes 或其他路径中，则会出现此错误，因为它找不到 binding.xml，因此将 build.xml 更改为写入 bin/classes。

如果你使用eclipse，你必须生成类，编译，刷新然后执行绑定选项，否则会出现这个错误。

# facebook - Facebook Like 按钮：使用变量指定“当前网页”与手动包含页面 URL？

> ID：10467780
> 
> 赞同：0
> 
> 时间：2012-05-06T03:04:08.427
> 
> 标签：facebook, url, variables

在 Facebook 的“点赞按钮”中，代码​​片段和代码片段都要求指定单独的页面 URL。喜欢按钮代码片段应该进入包含，所以显然我想在喜欢按钮代码片段中使用某种变量，以便它可以自动检测当前页面的 URL。Twitter、LinkedIn 和 GooglePlus 按钮都会自动检测。

这是我的代码。它工作得很好，但您可以看到单个页面 URL 的指定位置。是否有可以替代使用的变量，因此可以将代码片段放入包含中？

谢谢。

<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.[MYWEBSITE].com%2F[MYPAGENAME.shtml]&send=false&layout=standard&width=50&show_faces=false&action =like&colorscheme=light&font=tahoma&height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:46px; height:20px;" allowTransparency="true"></iframe>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:19:15.883

您可以通过使用`XFBML`/`HTML5`版本的 Like 按钮并省略`href`/`data-href`属性来实现这一点，方法是在您指示 JS-SDK 在呈现 Like 按钮时使用当前页面 URL 的代码中不包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T20:47:29.037

您可以使用 iframe 执行此操作。

我的代码是：

```
<iframe src="//www.facebook.com/plugins/like.php?href='. get_permalink( get_the_ID() ) .'&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=438288506277662" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px;" allowTransparency="true"></iframe> 
```

注意重要的部分：

```
href='. get_permalink( get_the_ID() ) .' 
```

希望有帮助！- 杰克

# python - 使用变量名称对循环进行有效编码

> ID：10467781
> 
> 赞同：0
> 
> 时间：2012-05-06T03:04:14.347
> 
> 标签：python, performance, loops

我有一些已定义为函数的公式。

然后我使用特定参数“命名”它们，因为我需要在进一步的公式中使用输出，这使得它更容易和更整洁。

我现在需要循环定义的函数以提供一年中每个月的输出，当我将函数的名称放入 while 循环时，它只会给我一个答案 12 次，但是当我把完整的功能进入它工作的循环。

有没有一种方法可以通过使用函数的名称来循环函数，因为随着我的公式的进行，它们变得越来越复杂，代码变得越来越繁忙和混乱。

```
def growPOP(p, T, r, K):
    #formula to calculate the new population at the end of a month.
    #p = initial population, T = total initial population
    #r = growth rate per time, K = carrying capacity
    GrPp = p + ((p * r)*((K - T) / K))
    return(GrPp)

def rt(a, b, t):
    #formula to calculate growth rate for brown fish
    #a & b are constants given, t = the month number
    rt = a + (b*sin(((2*pi)*t)/12))
    return rt

ca = 0.052
cb = 0.132   
brownPOP = 19000
goldPOP = 4400
totalPOP = brownPOP + goldPOP
carryK = 104800
redcarryK = 0.998
newcarryK = (carryK*redcarryK) + (ep/10) #ep is an input figure - for now it's 0.
month = 1
brownGrowth = growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK)

while month <= 2:
    print "Month ", month
    print "Grown brown fish: ", growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK)
    brownPOP = endbrownPOP
    goldPOP = endgoldPOP
    totalPOP = endtotalPOP
    carryK = newcarryK
    month = month + 1 
```

所以在上面的循环中，它给出了我想要的输出，但我真的希望循环说“打印”Grown brown fish：“，brownGrowth”并且仍然可以工作。

还有其他公式可以将 brownPOP 转换为 endbrownPOP，但是有很多并且它们有效，所以我认为不需要输入它们会使事情复杂化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:11:14.023

如果我没看错，您不想`brownGrowth`将函数调用的结果*存储*`growPop()`到，而是*成为*该函数调用。所以你想要做的就是将 a 定义`brownGrowth` *为一个函数。*

```
brownGrowth = lambda: growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK) 
```

然后在你的循环中，*调用*该函数：

```
print "Grown brown fish: ", brownGrowth() 
```

但是，您现在拥有它的方式确实没有任何问题，而且我认为您想要更改它的方式并没有更清楚 - 事实上，它在无参数函数后面隐藏了该数字的内容。此外，没有什么比它更有效的了：它的效率*较低*，因为配方中有一层额外的函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:13:49.063

我认为您只是忘记在每次循环迭代中重新计算 brownGrowth 吗？

```
brownGrowth = growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK) 
while month <= 2: 
    print "Month ", month 
    print "Grown brown fish: ", brownGrowth
    brownPOP = endbrownPOP  
    goldPOP = endgoldPOP  
    totalPOP = endtotalPOP  
    carryK = newcarryK  
    month = month + 1 
```

将`brownGrowth = formula`行移动到while循环内部：

```
while month <= 2: 
    brownGrowth = growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK) 
    print "Month ", month 
    print "Grown brown fish: ", brownGrowth
    brownPOP = endbrownPOP 
    goldPOP = endgoldPOP 
    totalPOP = endtotalPOP 
    carryK = newcarryK 
    month = month + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T03:15:43.447

除了使用 lambda：

```
brownGrowth = lambda: growPOP(brownPOP, totalPOP, rt(ca, cb, month), carryK) 
```

您还可以使用functools 中的[partial](http://docs.python.org/library/functools.html#functools.partial)：

```
from functools import partial
brownGrowth = partial(growPOP, brownPOP, totalPOP, rt(ca, cb, month), carryK) 
```

然后这样称呼它：

```
print "Grown brown fish: ", brownGrowth() 
```

但是，再一次，这完全没有必要，只需将函数调用放在循环中，它的代码就更少了。

# c++ - 尽管需要，但从未调用基类中的重载函数

> ID：10467783
> 
> 赞同：0
> 
> 时间：2012-05-06T03:04:18.913
> 
> 标签：c++, templates, inheritance, overloading

我正在尝试编写一个同时接受 int 和 int& 的容器。在一堂课上做这件事：

```
template <class T>
class unified_class
{
public:
    virtual void f(T &i){}
    virtual void f(T &&i) {}
}; 
```

调用：

```
unified_class<int> u;
u.f(8); // going to the second method
int a = 9;
u.f(a); // going to the first method 
```

但是当我试图将它分成两个类时，发生了一些奇怪的事情：

```
template <class T>
class base_class
{
public:
    virtual void f(T &&i) { /* it never reaches here*/}
};

template <class T>
class derived_class : public base_class<T>
{
public:
    using base_class<T>::f;
    virtual void f(T &i){}
}; 
```

从之前调用相同的函数调用，在这两种情况下都会调用派生类的 f()。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:23:38.437

我没有看到 g++ 4.6.3 的问题。这是我使用的代码：

```
#include <iostream>

using std::cerr;

template <class T>
class base_class
{
public:
    virtual void f(T &&i) { cerr << "base_class\n"; }
};

template <class T>
class derived_class : public base_class<T>
{
public:
    using base_class<T>::f;
    virtual void f(T &i) { cerr << "derived_class\n";  }
};

int main(int argc,char **argv)
{
  derived_class<int> u;
  u.f(8); // going to the second method
  int a = 9;
  u.f(a); // going to the first method
} 
```

我得到了这个结果：

```
base_class
derived_class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:10:34.653

如果您真的看到了您所说的使用您发布的代码的结果，那么这绝对是一个编译器错误。当 T 为“int”时，您不应使用常量调用 f(T&)。即使发生了某种隐藏，我认为 using 可以解决这个问题，程序应该完全无法编译而不是调用错误的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:20:37.237

您正在使用 Visual Studio 2010，它提供此功能作为临时绑定到*非常量*引用的扩展。这就是为什么它`T&`在两种情况下都调用版本。这个*编译器扩展*，如果有的话，应该被称为*编译器错误*，因为它*取代*了标准定义的行为。

但是，在标准 C++ 中，从整数文字创建的临时对象`8`不能绑定到*非常量*引用，因此调用必须解析为`T&&`作为参数的函数。

# objective-c - 需要 Objective-C 选择器帮助

> ID：10467795
> 
> 赞同：1
> 
> 时间：2012-05-06T03:08:13.413
> 
> 标签：objective-c, selector

我不断收到错误实例方法未找到执行选择器...任何人都可以帮助我清除此错误吗？

```
#import <Foundation/Foundation.h>
#import "add.h"

int main(int argc, const char * argv[])
{
    SEL mySelector;

    id b = [[add alloc] init];

    mySelector = @selector(add2Num:);

    [b performSelector: mySelector]; // here is where i am getting the error

    [b release];

    return 0;
} 
```

然后 int add.m 文件

```
#import "add.h"

@implementation add

-(void)add2Num
{
    num1 = 1;
    num2 = 2;
    iResult = num1+ num2;
}

@end 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:20:43.153

问题很可能是您键入`@selector(add2Num:)`而不是`@selector(add2Num)`.

请注意，在我更正的语法中，选择器名称末尾缺少“：”。包括“：”表示选择器接受一个参数，但您的方法`addNum`没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:32:22.357

这看起来是一个简单的错字。我相信你的意思是`performSelector:`，而不是 preformSelector:。颠倒“r”和“e”。

# django - 如何使用 Django 身份验证在 Node 应用程序中对用户进行身份验证？

> ID：10467802
> 
> 赞同：8
> 
> 时间：2012-05-06T03:10:08.467
> 
> 标签：django, node.js, authentication

我的主应用程序是一个 Django 应用程序，但是，对于一些实时的东西，我想使用 Node/Socket.IO。我正在使用 Redis 从 Django 到 Node（然后到各种客户端）做一些 pub/sub。棘手的部分是如何根据 Django auth 对 Node 用户进行身份验证？

在我的 Node 应用程序中，我有：

```
io.on('connection', function (socket) {
  const subscribe = redis.createClient();
  var userId = authenticateAndGetUserId();
  subscribe.subscribe(userId + ':feed-items');

  subscribe.on('message', function (channel, message) {
    socket.emit('feed-items', JSON.parse(message));
  });

}); 
```

所以我的问题是什么是实施的好策略`authenticateAndGetUserId`？会话由 MySQL 提供支持，因此我可以通过那里进行操作。只是好奇是否有更好的方法来解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:29:05.407

在 Django 方面，我将公开一个 REST API。然后在 Node.js 上，您可以执行 POST username/password 之类的操作

[http://yourdjangoserver.com/authenticate](http://yourdjangoserver.com/authenticate)

这将返回一些带有您需要的信息的 JSON。如果您希望保护 API 免受公众审查，那么要么将其设为私有，要么使用基本身份验证等保护它。

restify 是一个 npm 包，它使得在 Node.js 端使用 REST API 变得非常容易。这种架构的好处是它是松耦合的。你可以用任何东西替换 Django，而客户永远不会知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T11:22:05.530

由于您已经有一个 redis 服务器，您可以`(username, sessionkey)`为每个登录用户存储对，可以选择与您的会话设置相对应的 TTL 值。

然后，每次用户请求订阅频道时，他都会发送他的用户名，然后根据 redis 数据存储检查该用户名。

# c++ - 在 Access 文件中搜索和匹配数据

> ID：10467807
> 
> 赞同：0
> 
> 时间：2012-05-06T03:12:11.123
> 
> 标签：c++, visual-c++

我目前遇到程序问题。我目前正在运行一个为用户提供两个选项的程序。选项 1 允许用户输入工资单代码 1-32。输入工资单代码后，我需要搜索访问文件以找到匹配项。确定匹配后，我需要处理工资单代码和字符“#”，然后将剩余数据显示为工资单金额。选项 2 允许用户结束程序。我有程序当前正在编译和运行。但是，它只存储文件第一行的数据。这是源代码，以及我需要搜索的文件数据。有人可以帮助我启动并运行搜索功能吗？非常感谢任何帮助或其他方向。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

//function prototypes
void displayPayroll();

int main()
{
    //declaring variables
    int menuOption = 0;
    do
    {
     //display menu and get option
    cout << "1 To Enter Payroll Code" << endl << endl;
    cout << "2 End the program" << endl << endl;
    cin >> menuOption;
    cin.ignore(100, '\n');
    cout << endl;
    if (menuOption == 1)
        displayPayroll();
    } while (menuOption != 2);

    system("pause");
    return 0;
}// end of the main function

void displayPayroll()
{
    //declaring variables
    string payrollCode = "";
    string payrollCompare = "";
    double payrollAmount = 0.0;

    //declaring the fileObject and opening the file
    ifstream inPayroll;
    inPayroll.open("Intermediate24.txt", ios::in);

    //determine if the file was openend correctly
    if(inPayroll.is_open())
    {
        cout << "Please enter a payroll Code 1-32: ";
        getline (cin, payrollCode);
        if (payrollCode >= "1" && payrollCode <= "32")
        {
            getline(inPayroll, payrollCode, '#');
            inPayroll >> payrollAmount;
            inPayroll.close();
            cout << "Salary $" << payrollAmount << endl << endl;
        }
        else
            cout << "Incorrect payroll code." << endl << endl;
        //end if
    }

    else
        cout << "Error. File not found." << endl;
    //end if 
} //end of displayPayroll function 
```

1#27200
2#15000
3#23000
4#12000
5#25500
6#18400
7#19500
8#32000
9#29000
10#16500
20#65000
21#65500
22#70200
23#71000
24# 71100
#
70#20 83000
31#84000
32#90000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:52:42.187

这个有效

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

//function prototypes
void displayPayroll();

int main()
{
    //declaring variables
    int menuOption = 0;
    do
    {
        //display menu and get option
        cout << "1 To Enter Payroll Code" << endl << endl;
        cout << "2 End the program" << endl << endl;
        cin >> menuOption;
        cin.ignore(100, '\n');
        cout << endl;
        if (menuOption == 1)
            displayPayroll();
    } while (menuOption != 2);

    system("pause");
    return 0;
}// end of the main function

void displayPayroll()
{
    //declaring variables
    string payrollCode = "";
    string payrollCompare = "";
    //double payrollAmount = 0.0;

    //declaring the fileObject and opening the file
    ifstream inPayroll;
    inPayroll.open("Intermediate24.txt", ios::in);

    //determine if the file was openend correctly
    if(inPayroll.is_open())
    {
        cout << "Please enter a payroll Code 1-32: ";
        getline (cin, payrollCode);
        if (payrollCode >= "1" && payrollCode <= "32")
        {
            string temp;
            size_t p ;
            do{
                inPayroll >> temp;
                p = temp.find("#");
            }while(temp.substr(0, p) != payrollCode);
            inPayroll.close();
            cout << "Salary $" << temp.substr(p + 1) << endl << endl;
        }
        else
            cout << "Incorrect payroll code." << endl << endl;
        //end if
    }

    else
        cout << "Error. File not found." << endl;
    //end if 
} //end of displayPayroll function 
```

# java - Java错误，请帮助我

> ID：10467809
> 
> 赞同：-1
> 
> 时间：2012-05-06T03:12:25.120
> 
> 标签：java, compiler-errors

> **可能重复：**
> [不支持的 major.minor 版本 49.0](https://stackoverflow.com/questions/1525960/unsupported-major-minor-version-49-0)

好吧，伙计们，我刚刚安装了 JDK 7，我在 Windows 7 上。我只是想编译和运行一个简单的“hello world”，我从某个地方复制了它，因为我不知道我到底是什么我还在做。我已经设置了 PATH ，当我使用 javac 时，我认为它编译时不会出错，但是当我尝试运行它时，我得到：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: apples : Unsu
pported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: apples.  Program will exit. 
```

不知道这是否有帮助，哈哈，但感谢任何知道这里发生了什么的人。

java 版本 "1.6.0_31" Java(TM) SE Runtime Environment (build 1.6.0_31-b05) Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, 混合模式)

javac 1.7.0_04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:32:23.907

这个答案可能是多余的，但问题是*您用于运行程序*的 JVM 不是您刚刚安装的 Java 7 JVM。它是一个较旧的版本，它不理解您要求它运行的 (Java 7) .class 文件。

Greg Hewgill 建议您运行`java -version`和`javac -version`. 这些将告诉您*实际*运行的 Java 版本……与您*认为*正在运行的版本不同。

解决方案是（可能）是更新`%PATH%`当前指向较旧的 java 安装的您。

* * *

`java -version`您添加到问题中的输出`javac -version`意味着您正在使用 Java 7 进行编译并使用 Java 6 运行。这绝对是您的问题的原因。修复您的`%PATH`变量，以便您使用相同的工具集进行编译和运行。（这是最简单的解决方案......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:36:03.610

看到您使用 jdk6 运行并使用 jdk7 编译，您将不得不更改路径/类路径设置以反映 jdk7

# apache - 文件夹和根目录的 htaccess RewriteRule

> ID：10467811
> 
> 赞同：1
> 
> 时间：2012-05-06T03:13:10.577
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我有一个结构如下的网站：

根

*   文件夹 1
*   文件夹 2
*   文件夹 3

对于我的根，我有一个重写，发送`root.com/index.php?id=12`到`root.com/12`并且工作正常。

但是，我也想`root.com/folder1/index.php?id=12`成为`root.com/folder1/12`，但根本没有成功。

以下是我的 htaccess 代码：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?id=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?id=$1
RewriteRule ^folder1/([a-zA-Z0-9_-]+)$ /folder1/index.php?id=$1
RewriteRule ^folder1/([a-zA-Z0-9_-]+)/$ /folder1/index.php?id=$1 
```

您能否让我知道我在使用 folder1 rewriterule 时做错了什么？非常感谢。

另外，我怎样才能对第一条规则进行例外处理，以便`root.com/folder1`不应用于第一条重写规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:31:20.633

> 另外，如何对第一条规则进行例外处理，以便 root.com/folder1 不会应用于第一条重写规则？

您可以在 mod_rewrite 命令的末尾添加 [L]，这意味着该指令是最后一条。因此，如果它匹配，则没有进一步的说明将起作用。

因此，使用它您可以先编写更具体的指令，然后再编写更通用的指令。

# rest - Jersey Spring-Security HTML AJAX 未按预期工作

> ID：10467813
> 
> 赞同：1
> 
> 时间：2012-05-06T03:13:38.330
> 
> 标签：rest, spring-security, jersey, java-ee-6, web-applications

目前，它保护 jsp 页面并可以显示它们，但无法找到 REST 端点（所有其余 AJAX 调用为 404）。我已经做了其他事情来改变它，它找到了其余的端点，但是找不到 HTML 并且没有执行安全检查。

我错过了什么？

安全.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/images/**" security="none"/>
    <http pattern="/css/**" security="none"/>
    <http pattern="/js/**" security="none"/>
    <http auto-config="true" disable-url-rewriting="true">
         <intercept-url pattern="/login-page.html" access="ROLE_ANONYMOUS"/>
         <intercept-url pattern="/**" access="ROLE_USER, ROLE_ADMIN" />
        <form-login login-page='/login-page.html' default-target-url="/static-page.jsp" />
    </http>
    <authentication-manager>
        <authentication-provider>
            <jdbc-user-service data-source-ref="dataSource"
                users-by-username-query="select USERNAME, PASSWORD, ENABLED 
                    from USERS where USERNAME=?" 
                authorities-by-username-query="
                    select U.USERNAME, UR.AUTHORITY from USERS U, ROLES UR 
                    where U.USERNAME=UR.USERNAME and U.USERNAME=?"      
            />
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:server-context.xml, classpath:spring-security.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>jersey-servlet</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>service.admin</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>jersey-servlet</servlet-name>
        <url-pattern>/test-app/*</url-pattern>
    </servlet-mapping>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

在 webapp 文件夹下，我有 js & css & images 文件夹以及 WEB-INF 下的 *.html 和 *.jsp 文件是 web.xml 文件夹所在的位置。是否还有其他地方我应该放置 html 文件以及如何将其映射到 web.xml 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:53:02.190

为了保护您的 HTML 文件，您首先需要将它们放在安全的位置。WEB-INF 文件夹是部署在您的应用程序中的唯一一个不能通过 HTTP 访问的文件夹；因此，文件夹是保存 HTML 文件的好地方。我推荐/WEB-INF/html。

接下来，您需要告诉 Spring 将对 *.html 的所有请求映射到 /WEB-INF/html 文件夹。这需要放在 Spring servlet.xml 文件中的 xml 元素中。

html-servlet.xml：

```
<mvc:resources mapping="/**" location="/WEB-INF/html/" /> 
```

有关更多信息，请参阅[如何保护 MVC 资源](http://forum.springsource.org/showthread.php?110490-How-to-secure-lt-mvc-resources-gt)。

您需要在 security.xml 文件中为每个 HTML 文件添加一些 http 条目：

```
<intercept-url pattern="/users-only.html" access="ROLE_USER" /> 
```

这使用 Spring 过滤器来检查资源并根据用户的角色对其进行重定向。

最后，您需要 web.xml 中的条目来处理对 *.html 的请求的 servlet：

网页.xml：

```
<!--  Security -->
<servlet>
    <servlet-name>html</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/html-servlet.xml</param-value>
    </init-param>
</servlet>

<!--  Secure static HTML files. See applicationContext-Security.xml intercept-url for individual HTML file control over security.-->
<servlet-mapping>
    <servlet-name>html</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

# oracle - 如何将数据导入指定的表空间

> ID：10467814
> 
> 赞同：2
> 
> 时间：2012-05-06T03:13:44.833
> 
> 标签：oracle, oracle-sqldeveloper

我的oracle版本是11g。我已将我的 oracle 数据库导入到名为“ **export.sql** ”的 SQL 文件中。两天前，我用 Windows 重新安装了我的机器，还重新安装了 Oracle。现在我创建了一个名为“book”的用户，密码为“book”，并使用以下命令授予了权限：

```
grant create session, create table to book; 
```

然后我尝试使用 SQL Developer 实用程序导入我的 SQL 文件，方法是在 SQL 编辑器中打开**export.sql文件。**然后它告诉我

```
SQL Error: ORA-01950: no privileges on tablespace 'USERS' 
```

然后我认为创建一个不同的表空间而不是使用 USERS 表空间会更好。然后我使用这个创建了表空间“kwa”：

```
create tablespace kwa
logging
datafile 'G:\kwa\kwa.dbf' 
size 32m 
autoextend on 
next 32m maxsize 2048m
extent management local; 
```

在此之后，我使用以下命令为该表空间上的用户授予权限：

```
alter user book quota 32m on kwa; 
```

我现在要做的是让用户“预订”在 SQL Developer 中使用该表空间，以便我可以导入我的“ **export.sql** ”？，但是当我尝试导入数据时，它仍然显示旧的“ **ORA-01950** ”错误。如何在*SQLDeveloper 界面中更改***用户“book”**的表空间？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T03:31:42.283

尝试

```
alter user book default tablespace kwa; 
```

这是否有效取决于**export.sql**是否明确引用了*USERS*表空间 - 如果它确实引用了它，那么您将需要更改**export.sql**！*

# jquery - 排序前后的jQuery sortable get .index()？

> ID：10467820
> 
> 赞同：24
> 
> 时间：2012-05-06T03:15:01.933
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我在标记插件上使用 jQuery 的 sortable，该插件维护与`li`'s 相关的对象数组，其顺序与实际项目相同。

排序完成后，我需要更新数组中项目的顺序。

我以为我只能在开始事件调用`$(ui).index()`和更新事件调用中进行相同的调用，这会给我初始位置和最终位置，但两个调用都返回`-1`。

我该怎么做？

* * *

**结构：**

```
<ul>
<li>here<a class="close">x</a></li>
<li>are<a class="close">x</a></li>
<li>some<a class="close">x</a></li>
<li>tags<a class="close">x</a></li>
</ul> 
```

**数组结构：**

```
[{
    label: 'here',
    value: 36,
    element: '$(the li that this info is about)',
    index: 0
},
{
    label: 'are',
    value: 42,
    element: '$(the li that this info is about)',
    index: 1
},
{
    label: 'some',
    value: 21,
    element: '$(the li that this info is about)',
    index: 2
},
{
    label: 'tags',
    value: 26,
    element: '$(the li that this info is about)',
    index: 3
}] 
```

**JavaScript：**

```
$('ul').sortable({
    start: function(event, ui){...},
    update: function(event, ui){...}
}); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-18T21:31:37.820

```
$（函数（）{
    $( "#sortable" ).sortable({
        更新：函数（事件，用户界面）{
            console.log('更新：'+ui.item.index())
        },
        开始：函数（事件，用户界面）{
            console.log('开始：' + ui.item.index())
        }
    });
    $( "#sortable" ).disableSelection();
});

```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-06T03:26:07.300

如果 `.index()`返回 -1，则表明您在元素可用于 DOM 之前发出该请求。*或者*您错误地标记了一个选择器，并且在调用时它再次不存在或者相对于 .index() 函数为空

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T03:37:18.130

您可以将一些数据与每个列表项相关联，以像这样跟踪它们：

```
<ul id="sortable">
<li data-id="1" class="ui-state-default">1</li>
<li data-id="2" class="ui-state-default">2</li>
<li data-id="3" class="ui-state-default">3</li>
</ul> 
```

然后你可以像这样通过 jQuery 访问这些数据：

```
$('ul li:nth-child(0)').data('id');
$('ul li:nth-child(1)').data('id');
$('ul li:nth-child(2)').data('id'); 
```

# mongodb - 如何使用 MongoDB 和 C# 驱动程序查询子文档集合

> ID：10467825
> 
> 赞同：4
> 
> 时间：2012-05-06T03:16:49.623
> 
> 标签：mongodb, mongodb-.net-driver, 10gen-csharp-driver, mongodb-query

我有以下结构：

```
public class ThreadDocument
{
    public ThreadDocument()
    {
        Messages = new List<Message>();
        Recipients = new List<Recipient>();
    }

    [JsonIgnore]
    public ObjectId Id { get; set; }
    public IList<Recipient> Recipients { get; set; }
    public IList<Message> Messages { get; set; }
    public DateTime LastMessageSent { get; set; }
    public string LastSentByUserName { get; set; }
    public string LastSentAvatarUrl { get; set; }
    public string Snippet { get; set; }
    public int MessageCount { get; set; }

}

public class Recipient
{
    public string UserId { get; set; }
    public int Status { get; set; }
}

public class Message
{
    public string FromUserId { get; set; }
    public string FromUsername { get; set; }
    public string FromAvatarUrl { get; set; }
    public DateTime Sent { get; set; }
    public string Text { get; set; }
} 
```

当我保存时，它会产生如下内容：

```
{
  "_id" : ObjectId("4fa5eab4bfeddf23fcd01e4a"),
  "Recipients" : [{
      "UserId" : "4fa5d4d8bfeddf23fc72e590",
      "Status" : 1
    }, {
      "UserId" : "4fa5d4f9bfeddf23fc72e592",
      "Status" : 0
    }],
  "Messages" : [{
      "FromUserId" : "4fa5d4d8bfeddf23fc72e590",
      "FromUsername" : "a",
      "FromAvatarUrl" : null,
      "Sent" : ISODate("2012-05-06T03:06:28.396Z"),
      "Text" : "b"
    }],
  "LastMessageSent" : ISODate("2012-05-06T03:06:28.395Z"),
  "LastSentByUserName" : "a",
  "LastSentAvatarUrl" : null,
  "Snippet" : "b",
  "MessageCount" : 1
} 
```

我想做的是，如果已经创建了一个线程，则使用相同的线程并根据用户是否向同一用户发送消息，或者反之亦然。

我认为这样的事情会起作用，但它返回 null （无值）：

```
var thread = threadHelper.Collection.Find(
    Query.And(Query.EQ("Recipients.UserId", user.Id), Query.EQ("Recipients.UserId", sendToUser.Id))
).SingleOrDefault(); 
```

我在想一个包含所有的东西？还是全部？不太确定如何进行查询。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T03:22:55.837

尝试**ElemMatch**：

```
var thread = threadHelper.Collection.Find(
    Query.And(
        Query.ElemMatch("Recipients", Query.EQ("UserId", user.Id)), 
        Query.ElemMatch("Recipients", Query.EQ("UserId", sendToUser.Id))
    )
).SingleOrDefault(); 
```

# java - Groovy StreamingMarkupBuilder() 生成非 XML

> ID：10467829
> 
> 赞同：1
> 
> 时间：2012-05-06T03:17:50.560
> 
> 标签：java, xml, grails, groovy

我试图弄清楚为什么在某些情况下 StreamingMarkupBuilder() 会产生非 XML。我是这样称呼它的：

```
public static void saveXMLToFile(def document, String file) {
    def xmlBuilder = new StreamingMarkupBuilder().bind {
        mkp.xmlDeclaration()
        mkp.yield document
    }
    new File(file).withWriter { out ->
        out << xmlBuilder
    }
} 
```

这是我们如何到达那里的：

```
def document = new XmlParser(false, false).parse(manuscriptFile)
if (document.name().equals("appendix")) {
    def newNode = new groovy.util.Node(null, "chapter", document.attributes(), 
                                       document.value())
    XMLUtils.saveXMLToFile(newNode, manuscriptFile)
} 
```

但我没有得到 XML，而是得到：

```
<?xml version='1.0'?>
title[attributes={id=_2140_5145_361}; value=[An introduction to blah]]partintro
[attributes={id=_2140_5145_362}; value=[para[attributes={id=_2140_5145_363}; value=[My 
contents, blah blah blah]]] 
```

我已经尝试过文档，但不幸的是，我对 Groovy 的了解并不多，所以我确信我错过了一些简单的东西。:(

提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T06:09:30.617

似乎最简单的方法是使用[`XmlUtil`](http://groovy.codehaus.org/api/groovy/xml/XmlUtil.html)类，遗憾的是，它没有很好的文档记录：

```
def saveXMLToFile(Node document, String file) {
    new File(file).withWriter { out ->
        XmlUtil.serialize(document, out)
    }
} 
```

（请注意，我更改了方法签名以接收节点）

我发现的问题是 groovy.xml.MarkupBuilder（或 StreamingMarkupBuilder）和*MarkupBuilder 返回*的 groovy.util.Node 似乎相处得不太好。至少我找不到将 XML 声明添加到节点的方法，以便可以使用[XmlNodePrinter](http://groovy.codehaus.org/api/groovy/util/XmlNodePrinter.html)打印它；或者在 MarkupBuilder 闭包中添加一个节点，我猜这应该是可能的/容易的。如果有人知道如何做这些，请在评论中告诉它或添加新答案 =D

因此，我能找到的第二个最简单的解决方案是，不依赖于 XmlUtil 记录不佳的魔法，首先使用 StreamingMarkupBuilder 打印 XML 声明（甚至不是 MarkupBuilder，因为它似乎需要一个根节点声明，这是我们不想要的这种情况下），然后使用 XmlNodePrinter 打印文档：

```
def saveXMLToFile(Node document, String file) {
    new File(file).withWriter { out ->
        out << new StreamingMarkupBuilder().bind { mkp.xmlDeclaration() }
        new XmlNodePrinter(new PrintWriter(out)).print(document)
    }
} 
```

# python - 幻像缩进：空行上的意外缩进

> ID：10467832
> 
> 赞同：0
> 
> 时间：2012-05-06T03:18:08.227
> 
> 标签：python

我收到以下缩进错误，其中一行完全不存在（代码在第 17 行结束，页面上没有第 18 行）：

```
 File "./test.py", line 18

                  ^
IndentationError: unexpected unindent 
```

我已经尝试将文件重新保存为新文件，一切。这是怎么回事？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:42:31.293

确保最后一行不包含空格；您可能正在混合使用制表符和空格（您应该只使用一个或另一个，大多数 python 程序更喜欢空格）。还要检查最后一行是否期待某些东西。为此使用正常的调试技术：删除并重新添加程序块以将错误减少到本质。

# f# - 在 fsharp 中获取序列中 n 到 n+x 处的元素

> ID：10467833
> 
> 赞同：4
> 
> 时间：2012-05-06T03:18:25.140
> 
> 标签：f#, sequences

很简单，给定 F# 中的一个序列，如何获取从索引 n 到索引 n+x（含）的元素？

那么，如果我有一个类似的序列：`{0; 1; 2; 3; 4; 5}`，我如何获得从索引 2 到 4 的子序列？它看起来像`{2; 3; 4}`

任何使用大量内置 F# API 的答案都是可取的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T03:30:18.057

像这样的东西？

```
let slice n x = Seq.skip n >> Seq.take (x+1) 
```

请注意，如果序列中没有足够的元素，您将获得一个`InvalidOperationException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T10:09:59.780

```
let slice n x xs =
    xs
    |> Seq.windowed (x + 1)
    |> Seq.nth n 
```

请注意，与 Yacoder 的答案不同，它返回一个数组而不是一个序列（这可能是您想要或不想要的，具体取决于具体情况）。

我添加了我的答案 show `Seq.windowed`，恕我直言，这是一个非常有用的功能。`Seq.pairwise`也很好，很高兴知道。

# c# - ASP.net 网页数据库错误

> ID：10467834
> 
> 赞同：0
> 
> 时间：2012-05-06T03:18:41.290
> 
> 标签：c#, asp.net, razor, sdf

嗨，这是我的 cshtml 代码：

```
@{
    var db = Database.Open("SiteDB");
    var sqlQ = "SELECT * FROM Favorite";
    var data = db.Query(sqlQ);
}

    <div id="movieslist">
    <ol>
        @foreach(var row in data)
        {
            <li><a href= "#">@row.Name, @row.Category, @row.ReleaseYear
            </a></li>
        }
    </ol>
    </div> 
```

sqlDB.sdf 是本地的。运行网站时出现此错误：

不支持关键字：“文件访问重试超时”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：不支持关键字：“文件访问重试超时”。

源文件：c:\Users\Saheed\Documents\My Web Sites\My Empty Site\dataMovies.cshtml 行：4

请告诉我我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:21:04.683

`file access retry timeout`在您的连接字符串中（在 Web.config 中）无效。

# regex - htaccess 规则 - 如果 URL 不包含特定字符串，如何匹配

> ID：10467837
> 
> 赞同：0
> 
> 时间：2012-05-06T03:20:16.223
> 
> 标签：regex, .htaccess, negative-lookahead

我有一些具有以下 URL 结构的页面：

/详情/id/125/

由于某种原因，Google 已将看起来像 /details/125/ 的页面编入索引，而 /id/ 部分缺失。这会导致重复的内容问题。

所以我需要一个 .htaccess RedirectMatch 规则，以便如果 URL 包含 /details/ 但之后不包含 /id/ ，则重定向到 404 页面。

到目前为止我没有任何运气的尝试：

重定向匹配 404 ^/details/(?!id)/

在我的研究中，我发现了这些信息[http://www.mycomputingart.com/programming/Z24.regexpadv.html](http://www.mycomputingart.com/programming/Z24.regexpadv.html)我认为这与我需要做的事情有关，但我无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:43:29.777

满足您的需求：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/details/.+$
RewriteRule !^/details/id/.+$ /b/ [R=404,L] 
```

# ruby-on-rails - 无法批量分配受保护的属性：

> ID：10467842
> 
> 赞同：0
> 
> 时间：2012-05-06T03:22:11.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试提交一个包含多个名为 Boxscore 的类的实例的表单，但我不断收到错误消息，提示类“无法批量分配受保护的属性：0、1”

我的表格：

```
 <%= form_for([@boxscore]) do |x| %>
<% 2.times do |i| %>
    <%= fields_for 'boxscores', Boxscore.new, :index => i do |f| %>
      <div class="field">
        <%= f.label :game_id %><br />
        <%= f.number_field :game_id %>
      </div>
      <div class="field">
        <%= f.label :player_id, "Choose a player" %>
        <%= f.select :player_id, Player.all.map{|t| [t.name, t.id]}, 
                 { :include_blank => true } %>
        </div>
      <div class="field">
        <%= f.label :points %><br />
        <%= f.text_field :points %>
      </div>
      <div class="field">
        <%= f.label :rebounds %><br />
        <%= f.text_field :rebounds %>
      </div>
      <div class="field">
        <%= f.label :assists %><br />
        <%= f.text_field :assists %>
      </div>
      <div class="field">
        <%= f.label :blocks %><br />
        <%= f.text_field :blocks %>
      </div>
      <div class="field">
        <%= f.label :steals %><br />
        <%= f.text_field :steals %>
      </div>
      <div class="field">
        <%= f.label :turnovers %><br />
        <%= f.text_field :turnovers %>
      </div>
      <div class="field">
        <%= f.label :fgattempted %><br />
        <%= f.text_field :fgattempted %>
      </div>
      <div class="field">
        <%= f.label :fgmade %><br />
        <%= f.text_field :fgmade %>
      </div>
      <div class="field">
        <%= f.label :threepointattempted %><br />
        <%= f.text_field :threepointattempted %>
      </div>
      <div class="field">
        <%= f.label :threepointmade %><br />
        <%= f.text_field :threepointmade %>
      </div>
    <% end %>
<% end %>       
<div class="actions">
    <%= x.submit %>
</div>
 <% end %> 
```

我的模型：

```
 class Boxscore < ActiveRecord::Base
  attr_accessible :boxscore_id, :assists, :blocks, :fgattempted, :fgmade, :game_id, :player_id, :points, :rebounds, :steals, :threepointattempted, :threepointmade, :turnovers

  belongs_to :game
  belongs_to :player
end 
```

我的控制器：

```
def create
  @boxscore = Boxscore.new(params[:boxscores])
  respond_to do |format|
    if @boxscore.save
      format.html { redirect_to @boxscore, notice: 'Boxscore was successfully created.' }
      format.json { render json: @boxscore, status: :created, location: @boxscore }
    else
      format.html { render action: "new" }
      format.json { render json: @boxscore.errors, status: :unprocessable_entity }
    end
  end
end 
```

创建 boxscore 时我的参数散列：

```
{"utf8"=>"✓", "authenticity_token"=>"JJI3di/InpEp4S6HktQWgVfyvk296M7upgQIQRPzJp8=", "boxscores"=>{"0"=>{"game_id"=>"2", "player_id"=>"1", "points"=>"11", "rebounds"=>"22", "assists"=>"11", "blocks"=>"11", "steals"=>"111", "turnovers"=>"22", "fgattempted"=>"3", "fgmade"=>"2", "threepointattempted"=>"11", "threepointmade"=>"22"}, "1"=>{"game_id"=>"2", "player_id"=>"3", "points"=>"3", "rebounds"=>"4", "assists"=>"3", "blocks"=>"55", "steals"=>"4", "turnovers"=>"3", "fgattempted"=>"3", "fgmade"=>"3", "threepointattempted"=>"3", "threepointmade"=>"3"}}, "commit"=>"Create Boxscore", "action"=>"create", "controller"=>"boxscores"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:13:49.497

```
@boxscore = Boxscore.new(params[:boxscores]) 
```

问题就在这里。`params[:boxscores]`包含两个boxscores。而你正在尝试创建一个。应该是这样的：

```
params[:boxscores].each do |k, bs|
  @boxscore = Boxscore.new(bs)
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:59:25.480

现在您已经发布了参数，它使问题更加清晰。

您可以在下面看到您从表单中发布了**2 个**boxscore 记录——它们在 params 哈希中标识为“0”和“1”，这是 ActiveRecord 告诉您它有问题的两个属性。

正如 Sergio 建议的那样，解决方案是要么做，然后像这样处理它们：

```
params[:boxscores].each do |k, bs|
  @boxscore = Boxscore.new(bs)
  # ...
end 
```

或者将它们单独处理为两个单独的记录，如下所示：

```
 @boxscore1 = Boxscore.new(params[:boxscores][0])
  @boxscore2 = Boxscore.new(params[:boxscores][1]) 
```

一般来说，当您在处理表单发布时遇到奇怪的问题时，params 哈希将帮助您了解正在发生的事情。

您的参数以更清晰的 JSON 格式散列：

```
{
  "utf8"=>"✓",
  "authenticity_token"=>"JJI3di/InpEp4S6HktQWgVfyvk296M7upgQIQRPzJp8=",
  "boxscores"=>{
    "0"=>{
        "game_id"=>"2",
        "player_id"=>"1",
        "points"=>"11",
        "rebounds"=>"22",
        "assists"=>"11",
        "blocks"=>"11",
        "steals"=>"111",
        "turnovers"=>"22",
        "fgattempted"=>"3",
        "fgmade"=>"2",
        "threepointattempted"=>"11",
        "threepointmade"=>"22"
    },
    "1"=>{
        "game_id"=>"2",
        "player_id"=>"3",
        "points"=>"3",
        "rebounds"=>"4",
        "assists"=>"3",
        "blocks"=>"55",
        "steals"=>"4",
        "turnovers"=>"3",
        "fgattempted"=>"3",
        "fgmade"=>"3",
        "threepointattempted"=>"3",
        "threepointmade"=>"3"
    }
  },
  "commit"=>"Create Boxscore",
  "action"=>"create",
  "controller"=>"boxscores" 
} 
```

# java - 关于android中controltransfer设置USB通信的解释

> ID：10467846
> 
> 赞同：12
> 
> 时间：2012-05-06T03:23:09.107
> 
> 标签：java, android, usb

我正在尝试编写 Java 代码，让我的 XOOM 通过 USB 到串行电缆与我们的嵌入式设备进行通信。

我使用了这段代码：

```
connection.controlTransfer(0x21, 34, 0, 0, null, 0, 0);
connection.controlTransfer(0x21, 32, 0, 0, new byte[] { (byte) 0x80,
                                0x25, 0x00, 0x00, 0x00, 0x00, 0x08 }, 7, 0); 
```

我知道这是向 USB 设备发送设置请求。我不明白为什么requestType是0x21，为什么requestID是32、34等等。

根据这里的规范：[http](http://www.beyondlogic.org/usbnutshell/usb6.shtml#SetupPacket) ://www.beyondlogic.org/usbnutshell/usb6.shtml#SetupPacket ，在标准设备请求、标准接口请求和标准端点请求中，requestType 都不是 0x21 并且 requestID 都不是32 或 34\. 这些参数包括传输的数据缓冲区有什么解释吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T05:08:19.290

设置数据包中的第一个字节 (bmRequestType) 由 3 个字段组成。前 5 位（最低有效位）是接收方，接下来的 2 位是类型，最后一位是方向。

如果您的值为 0x21，则其二进制表示为 100001。如果将其拆分为各个字段，则为 0 01 00001，对应于主机到设备、类和接口，用于方向，类型和收件人字段。

所以这是一个被发送到特定接口的控制消息，该接口由一些标准的 USB 类定义。

既然您提到这是用于与 USB 到串行适配器通信，我将假设这可能被发送到通信接口，根据[通信设备的 USB 类定义](https://cscott.net/usb_dev/data/devclass/usbcdc11.pdf)

根据该文档，bRequest 值 34 (0x22) 对应于 SET_CONTROL_LINE_STATE 消息，而 32 (0x20) 对应于 SET_LINE_CODING 消息（第 51 和 53 页），这似乎是串行设置/初始化的一部分设备。

这些消息中的每一个的详细信息在第 57 页和第 58 页进一步定义。

# android - 如何动态增加 TableRows

> ID：10467853
> 
> 赞同：0
> 
> 时间：2012-05-06T03:25:33.170
> 
> 标签：android, tablerow

我基本上需要把这个想法放在我的游戏中，即奶牛和公牛。我的主屏幕截图如下所示：

![在此处输入图像描述](../Images/c5a3ee28f352448e03c883e0cd68ad1b.png)

现在，我想要做的是，当我点击提交按钮时，输入有效数字后，牛和公牛数量的结果（例如“2 牛 0 牛”）应该显示在新行中将放置在提交按钮下方的表格。

现在，每当我在自动输入另一个有效数字后单击下一个提交按钮时，都应该在同一个表中创建一个新行。这一行应该保存牛和公牛等的当前结果。例子：

![在此处输入图像描述](../Images/d3d738c1e4975dc838cc88a3acf3a6ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:50:01.020

为什么不使用 ListView？[这是官方文档](http://developer.android.com/resources/tutorials/views/hello-listview.html)，[这是一篇关于它的好文章。](http://www.vogella.com/articles/AndroidListView/article.html)ListView 将是一个更好的选择，因为它非常适合 Android 的外观和感觉。联系人应用程序、消息应用程序都使用 ListView。

如果您仍想使用 TableLayout，请[在此处](http://www.warriorpoint.com/blog/2009/07/01/android-creating-tablerow-rows-inside-a-tablelayout-programatically/)查看本教程。您基本上需要首先创建一个 View 类的对象，用您需要提供给它的任何信息填充它，然后使用该对象将该对象添加到表行对象

```
newTableRowObject.addView(column1ViewObject);
newTableRowObject.addView(column2ViewObject);
... 
```

然后最后将此对象添加到表格布局中

```
tableLayoutObject.addView(newTableRowObject); 
```

# ruby-on-rails-3 - 如何在 Rails 3 中查看默认操作路由？

> ID：10467860
> 
> 赞同：0
> 
> 时间：2012-05-06T03:28:23.297
> 
> 标签：ruby-on-rails-3

Rails 新手，学习从创建经典博客应用程序开始的教程。

运行：Rails 3.2.3 和 Ruby 1.9.2

首先创建一个新的 Rails 项目，然后生成脚手架以创建入口控制器和视图。然后使用 rake db:migrate 在 mysql 数据库服务器上创建条目表。

启动 Rails 服务器（WEBrick 1.3.1），并将我的浏览器指向 0.0.0.0:3000/entries，它工作正常，默认进入索引操作。

但令我惊讶的是，试图将我的浏览器指向 /entries/index 会返回错误。我的条目控制器包括以下操作：索引、显示、新建、编辑、创建、更新、销毁。其中，只有进入 /entries/new 才有效，其余的似乎被 :id 默认值覆盖。

routes.rb 包含两行：

Mydiary::Application.routes.draw 做

资源：条目

我认为访问控制器操作的默认格式是 http://[hostname]/[controller]/[action]。因此，虽然不给出操作默认为 index 是有道理的，但坦率地说，http://[hostname]/entries/index 不起作用，这让我大吃一惊。这可能有什么原因？检查其余部分，看起来只有新操作有效。其余的都被 :id 覆盖。

顺便说一句，这与教程中所说的不符，它告诉我这是 Rails 3 中的新内容。

所以我想我的问题是，我在哪里可以找到默认情况下哪些操作被 :id 操作覆盖，哪些不是？非常令人沮丧...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:51:32.553

运行`rake routes`，您将看到如下所示的输出：

```
entries     GET      /entries(.:format)           entries#index
            POST     /entries(.:format)           entries#create
new_entry   GET      /entries/new(.:format)       entries#new
edit_entry  GET      /entries/:id/edit(.:format)  entries#edit
entry       GET      /entries/:id(.:format)       entries#show
            PUT      /entries/:id(.:format)       entries#update
            DELETE   /entries/:id(.:format)       entries#destroy 
```

基本上，这会导致：

*   获取条目列表，执行`GET /entries`.
*   从表单发布数据以创建新记录，`POST /entries`
*   获取一个表单来创建一个新条目，做`GET /entries/new`
*   编辑**特定条目**，`GET /entries/:id/edit`
*   显示**特定记录**的详细信息，`GET /entries/:id`
*   更新**特定条目**的值，`PUT /entries/:id`
*   删除/销毁**特定记录**，`DELETE /entries/:id`

开始学习这一切的好地方是 Rails 指南 -[从外到内的 Rails 路由](http://guides.rubyonrails.org/routing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:36:46.057

您可以通过从命令行运行 rake routes 来查看所有路由。资源路由将为所有默认操作生成路由，但正如您发现的那样，它们并不都遵循 cotroller/action/param 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T03:40:30.860

查看[此页面](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)以获取有关路线的信息。他们有一个非常有用的表格，列出了使用资源时创建的路由、路径名、HTTP 方法、相应的操作等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T05:44:48.117

要查看特定控制器的路由：

CONTROLLER= rake routes 例如： CONTROLLER=documents rake routes

对于命名空间：

CONTROLLER=api/facebooks rake 路由

CONTROLLER=admin/users rake 路由

# cocos2d-iphone - BOX2D：创建 MouseJoint 时的 EXC_BAD_ACCESS

> ID：10467862
> 
> 赞同：0
> 
> 时间：2012-05-06T03:28:41.740
> 
> 标签：cocos2d-iphone, box2d

我正在尝试创建一个 MouseJoint 对象，但由于某种原因，在 b2World 上调用 CreateJoint 时，Box2D 会爆炸。我是 box2d 的新手，我无法确定我在这里做错了什么。我正在使用 Cocos2d 并启用了触摸功能。在 ccTouchesBegan 委托方法中，我正在测试用户是否触摸了感兴趣的身体；“桨”。

建立 b2MouseJointDef 对象后，此行会导致异常：

> _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);

World 对象似乎试图创建连接。这里是整个 touchesBegan 回调。有任何想法吗？？

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

if (_mouseJoint != NULL) return;

UITouch *myTouch = [touches anyObject];
CGPoint location = [myTouch locationInView:[myTouch view]];
location = [[CCDirector sharedDirector] convertToGL:location];
b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

if (_paddleFixture->TestPoint(locationWorld)) {
    b2MouseJointDef md;
    md.bodyA = _groundBody;
    md.bodyB = _paddleBody;
    md.target = locationWorld;
    md.collideConnected = true;
    md.maxForce = 1000.0f * _paddleBody->GetMass();

    _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);
    _paddleBody->SetAwake(true);
} 
```

}

# text - 如何在pygame中删除/替换文本

> ID：10467863
> 
> 赞同：11
> 
> 时间：2012-05-06T03:28:56.477
> 
> 标签：text, pygame, blit

我对 pygame 还很陌生，我遇到了我的第一个树桩，但我找​​不到答案。

在 blitting 文本之后，然后更改相同变量的字符串，游戏不是用新文本替换原始文本，而是重叠两个文本..？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T05:25:07.730

您必须先删除旧文本。创建的曲面`Font.render`是普通曲面。一旦 a`Surface`被 blit，它的内容就成为目标表面的一部分，并且您必须操纵*目标*表面以擦除源表面上的任何 blit。

擦除目标表面的一种方法是在其上粘贴背景表面。背景表面是目标表面的外观，上面没有任何文本或精灵之类的东西。另一种方法是用纯色填充表面：

```
# pygame initialization goes here

screen = pygame.display.get_surface()
font = pygame.font.Font(None, 40)

font_surface = font.render("original", True, pygame.Color("white"));
screen.blit(surface, (0, 0))

screen.fill(pygame.Color("black")) # erases the entire screen surface
font_surface = font.render("edited", True, pygame.Color("white"));
screen.blit(surface, (0, 0)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T10:34:00.547

您也可以覆盖您的文本。
像这样：

```
label = myfont.render("Text", 0, (255,255,0))
screen.blit(label, (100, 100))
if x: //Parameter you check before overwrite
    label = myfont.render("Text", 0, BACKGROUND_COLOR)
    screen.blit(label, (100, 100)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:52:24.630

可以有其他解决方案，即使它不是很不同。上一个答案会擦除整个屏幕，但您可以只擦除文本。如果它写在图像上，您将只替换图像的一部分，方法是获取文本大小并对相应的图像部分进行 blitting（pygame.surface.subsurface 函数）。或者，如果不是，您可以只填充屏幕的一部分。在这种情况下，您只会删除文本。

# php - PHP、ajax 和 JQplot

> ID：10467865
> 
> 赞同：2
> 
> 时间：2012-05-06T03:31:18.403
> 
> 标签：php, javascript, jquery, ajax, jqplot

我有一个 php 文件，我读取我的 MySQL 数据库并返回一个 JSON 数组。然后假设将 JSON 数组保存到 JavaScript 变量，然后假设 JQPlot 加载它。每次我运行 JavaScript 来获取数据并创建图表时，我都会在 Google Chrome JavaScript 控制台中看到“Uncaught #”。任何想法为什么我可能会收到此错误？我在 ajax 调用后得到的响应是这样的：

```
[["Internet Explorer",0],["Firefox",0],["Safari",0],["Opera",0],["Chrome",1],["Other",0]] 
```

据我所知，这是正确的。

这也是我的Javascript：

```
 $(document).ready(function(){
        var browsers = $.post("stats.php", {action:"getbrowsers"});
        var plot1 = jQuery.jqplot ("browsers_pie", [browsers], { 
            seriesDefaults: {
                renderer: jQuery.jqplot.PieRenderer, 
                rendererOptions: {
                    showDataLabels: true
                }
            }, 
            legend: { show:true, location: "e" }
        });
     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:36:24.770

你没有告诉 jquery 你期待 JSON 回来，所以你只是得到一个恰好包含 JSON 的纯字符串，而不是从 JSON 字符串解码的数据结构。

```
 var browsers = $.post("stats.php", {action:"getbrowsers"}, 'json');
                                                             ^^^^^^^^ 
```

# sql-server - 为什么 SQL Server 2008 对 Localhost 的查询比远程服务器慢得多？

> ID：10467876
> 
> 赞同：2
> 
> 时间：2012-05-06T03:33:35.630
> 
> 标签：sql-server, sql-server-2008, database-connection

我正在开发一个以 SQL Server 2008 作为后端的应用程序。每天结束时，我都会备份数据库并将其恢复到笔记本电脑上，这样我就可以在家继续开发。在这两种设置中一切正常，除了在我的本地机器上运行的查询比我在工作中查询远程服务器时花费的时间要长得多（几秒 vs 亚秒）。

我按名称指定服务器并使用“。” 连接到我的本地实例。该应用程序是使用集成安全性通过 ADO 连接的 Excel VBA。

我不知道工作服务器的规格，但我想它们比我的笔记本电脑好，所以这可能是其中一些差异的原因。但是，我的开发笔记本电脑很不错（Windows 7、2.4GHz Core i5、64 位、8GB RAM），此时数据库非常小。

为什么性能会有如此显着的不同？我应该在笔记本电脑上查看哪些内容以提高性能？

**编辑：**事实证明，查询没有错。在我的笔记本电脑上往返服务器以获取数据需要更长的时间，我错误地认为它是查询，而实际上它是连接。当我通过 SSMS 连接到数据库引擎时，在任一环境中所需的时间大致相同，但是当我使用 ADO 连接时，连接在本地花费的时间更长。知道什么会导致这种延迟吗？

*我将 Mitch 的回复标记为答案（有助于解决查询时间和环境中的差异），并将创建一个有关连接延迟的新问题。*

**更新：**这是我关于 SE.DBA 的问题的链接，该问题涉及本地主机上连接的可怕性能：[https ://dba.stackexchange.com/q/18231/2848](https://dba.stackexchange.com/q/18231/2848)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T03:41:52.537

有问题的查询在两种环境中是否具有相同的查询计划？

是不是第一次跑本地慢，第二次跑又快？（如果是这样，很可能是物理 I/O 速度将页面加载到内存中的差异）

作为第一步，我将在两个环境中重建所有索引并更新列统计信息，然后重新比较查询计划：

```
use myDb
go

exec sp_msforeachtable "dbcc dbreindex('?')" 
go

exec sp_msforeachtable "update statistics ? with fullscan, columns" 
go 
```

With the usual caveats regarding production (you state your DB is small, so it shouldn't take long to run these commands).

# c# - 根据某些匹配隐藏某些按钮

> ID：10467878
> 
> 赞同：2
> 
> 时间：2012-05-06T03:34:14.377
> 
> 标签：c#, winforms

如果符合如下规则，是否有隐藏某些按钮？下面是用于创建按钮列的代码和获取匹配项的代码。

我试过 BookButtonCell.Visible = false;，但它说它只是只读的。

谢谢。

```
 private void Form1_Load(object sender, EventArgs e)
     {          
            DataGridViewButtonColumn bookbutton = new DataGridViewButtonColumn();
            {
                bookbutton.HeaderText = "Book";
                bookbutton.Text = "Book";
                bookbutton.Name = "Book";
                bookbutton.UseColumnTextForButtonValue = true;
            }
            readalleventsdataGridView.Columns.Add(bookbutton); 

                int x = 0;
                foreach (DataGridViewRow gridRow in readalleventsdataGridView.Rows)
                {
                    DataGridViewCell BookButtonCell = gridRow.Cells["Book"];
                    DataGridViewCell EndDateCell = gridRow.Cells["EndDate"];
                    String StrTodayDate = DateTime.Now.ToString("dd/MM/yy");
                    DateTime TodayDate = Convert.ToDateTime(StrTodayDate);
                    String StrEndDate = EndDateCell.Value.ToString();
                    DateTime EndDate = Convert.ToDateTime(StrEndDate);
                    int result = DateTime.Compare(EndDate, TodayDate);
                    if (result < 0)
                        {
                          What Commands To Hide The Button?
                        }
                        x++;
                    }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:12:31.897

[DataGridViewButtonColumn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncell.aspx) [Visible](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.visible.aspx)属性是只读属性。

即使它看起来像一个按钮，它仍然是一个`DataGridViewButtonColumn`，具有相同的可见性规则。因此，简而言之，您需要执行 Ravi 建议的操作或处理[DataGridView.CellContentClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellcontentclick.aspx)事件，测试按钮是否应该处于活动状态，如果不是，则吞下事件。

从上面的链接：

> 此属性指示单元格是位于其 Visible 属性设置为 false的**行**还是**列中。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:35:45.963

您正在寻找`.Visible`可以设置为`false`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T13:01:04.090

没有`visible`其他人已经写过的财产。但是有一个简单的技巧，我今天发现并在同一主题的另一篇文章中给出了答案（另一个实际上是这个的副本）：
[https](https://stackoverflow.com/a/29010384/2505186)
://stackoverflow.com/a/29010384/2505186 摘要：为这些单元格
分配不同的值`DataGridViewCellStyle`，其中样式的`padding`属性 left 值设置为高于列宽的值。
这会导致按钮移出单元格的可见区域。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T03:36:52.393

```
yourButton.Visible=false, which will hide the button from displaying 
```

你可以试试这样

```
 if (result < 0)
{
  BookButtonCell.Visible=false;
} 
```

编辑：对于您的 Gridview，您可以[在 Gridview 中检查此禁用按钮](http://msdn.microsoft.com/en-us/library/ms171619.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T06:21:06.247

如您所知，您无法更改 datagridview 单元格的可见性。

您必须禁用 row 或 column 。如果您在脑海中绘制它，您会发现如果gridviewcell 不可见，它看起来并不好看。

所以可见是datagridviewcell的只读属性使用此代码

```
DataGridViewButtonCell dgvbc = new DataGridViewButtonCell();
            dgvbc.ReadOnly = true; 
```

另一种方法是将单元格的前景或背景更改为用户理解无法使用的颜色:)

至少使用此代码，您可以禁用按钮。

# asp.net - MembershipUser.IsOnline 即使在注销后也为真

> ID：10467880
> 
> 赞同：13
> 
> 时间：2012-05-06T03:34:30.623
> 
> 标签：asp.net, membership, logout

我目前正在使用 Visual Studio 2010 创建一个网站。我使用 SQL Server 2008 中的默认成员身份架构进行用户身份验证。现在我面临以下问题。

当用户注销时，该用户的 members.IsOnline 属性应设置为 false。然而，它没有发生；该用户的membership.IsOnline 属性仍然为真。

我正在使用 LoginStatus 控件向用户提供注销链接。

[即使在 FormsAuthentication.SignOut() 之后](https://stackoverflow.com/questions/9918033/user-isonline-true-even-after-formsauthentication-signout)，我也尝试关注User.IsOnline = true 。但结果一无所获。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T03:53:06.203

AFAIK，[FormsAuthentication.SignOut](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)与会员系统没有直接关系。因此，您必须`LastActivityDate`按照您在问题中提到的那样手动更新。并使用[Membership.UserIsOnlineTimeWindow](http://msdn.microsoft.com/en-us/library/system.web.security.membership.userisonlinetimewindow.aspx)而不是 -2。

**来自 MSDN**

> 在调用 GetNumberOfUsersOnline 期间检查 UserIsOnlineTimeWindow 属性值。如果用户的 LastActivityDate 大于当前日期和时间减去 UserIsOnlineTimeWindow 值（以分钟为单位），则认为该用户在线。您可以使用 MembershipUser 类的 IsOnline 属性确定成员资格用户是否在线。

```
MembershipUser user = Membership.GetUser(false);

FormsAuthentication.SignOut();

user.LastActivityDate = DateTime.UtcNow.AddMinutes(-(Membership.UserIsOnlineTimeWindow + 1));
Membership.UpdateUser(user); 
```

# iphone - Xcode：frame.size.height 的变化使视图的高度向下变化？

> ID：10467888
> 
> 赞同：1
> 
> 时间：2012-05-06T03:37:48.483
> 
> 标签：iphone, xcode, view, height

我正在尝试制作一个随麦克风电平波动的条形图，但无法让它向上波动。这是代码

```
- (void)setVUMeterHeight:(float)height {
     if (height < 0)
        height = 0;

     CGRect frame = vuMeter.frame;
     frame.size.height = height+10;
     vuMeter.frame = frame;
}

- (void)updateVUMeter {
float height = (90+voiceSearch.audioLevel)*5/2;

     [self setVUMeterHeight:height];    
     [self performSelector:@selector(updateVUMeter) withObject:nil afterDelay:0.05];
} 
```

问题是高度从 10px 开始，当麦克风激活时，高度会延长，但方向是向下的。我试图通过给视图提供负高度值来解决这个问题，但视图不能有负高度。有谁知道如何让高度向上变化？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:04:22.253

将原点向上扩展与扩展大小相同的量。

就像是：

```
- (void)setVUMeterHeight:(float)height {
     if (height < 0)
        height = 0;

     const CGFloat kMeterBottom = 200;
     CGRect frame = vuMeter.frame;
     frame.size.height = height+10;
     frame.origin.y = kMeterBottom - frame.size.height;
     vuMeter.frame = frame;
} 
```

# ruby-on-rails - 如何设置 nginx 以允许在 ubuntu 12.04 上使用 /suburi 进行访问？

> ID：10467895
> 
> 赞同：0
> 
> 时间：2012-05-06T03:40:52.730
> 
> 标签：ruby-on-rails, http, ubuntu, nginx

我们正在设置一个 nginx 网络服务器以允许在我们的 rails 3.1 应用程序中访问 /suburi（例如访问 URL：[http](http://www.railapp.com/subdomain) ://www.railapp.com/subdomain ）。这里的subrui名字是byop。我们的 rails 文档根子目录位于 /var/www/。suburi byop 位于 /var/www/byop。这是我们在成功部署 Rails 后所做的：

1.  设置 nginx.conf：

    服务器{听80；服务器名称 154.248.209.181；根 /var/www/；乘客启用；rails_env 生产；乘客基地uri /byop；}

2.  在 /var/www 下创建符号链接，如下所示：

    ln -s /var/www/byop/current/public /var/www/byop

nginx 被停止并重新启动。但是 403 Forbidden 页面显示为[http://154.248.209.181/byop](http://154.248.209.181/byop)

我们检查了 /var/www 下的符号链接，没有列出链接（只有 byop 子目录）。这是 ls -li 的输出：

```
ubuntu@ip-10-152-95-60:/var/www$ ls -li
total 4
9296 drwxrwsr-x 4 ubuntu www-data 4096 May  6 03:12 byop 
```

我们上面的设置有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:34:06.240

我们发现的问题在于创建符号链接的第 2 步。子目录的名称和符号链接的名称相同。使用不同的符号链接名称后，问题解决了。这是工作副本：

```
1\. Setup the nginx.conf:

server { 
    listen 80; 
    server_name 154.248.209.181; 
    root /var/www/; 
    passenger_enabled on; 
    rails_env production; 
    passenger_base_uri /by; 
 }

2\. Create symlink under /var/www as following:

ln -s /var/www/byop/current/public /var/www/by 
```

然后[http://154.248.209.181/by](http://154.248.209.181/by)调出页面。

# python - 简单的python“打印自己的参数”

> ID：10467900
> 
> 赞同：0
> 
> 时间：2012-05-06T03:41:56.117
> 
> 标签：python

我刚刚发现，在我的课程中，讲师不希望我们使用“导入”功能，因为它显然“对于目前学生的需求来说太先进了”。

弄乱我“允许”使用的东西，我想出了这个：

```
#!/usr/bin/python
moo = raw_input ('moo ')
string = ''.join(moo) 
outp = string.split() 
for word in outp:
  print word 
```

这给了我

```
$ ./pecho
moo hello       world
hello
world 
```

我如何摆弄*我在这里*将“hello world”输出放在一行上的东西？

* * *

原帖：

我需要创建一个“简单地打印自己的参数，每个参数由一个空格分隔”的 python 文件。例如，以下命令将给出显示的输出：

```
$ pecho first    and  then    another    one
first and then another one
$ 
```

这只是像

```
#!/usr/bin/python
moo = raw_input ('moo ')
print moo 
```

? 如果是这样，无论输入中有多少个制表符/空格，我该如何让它在输出中的单词之间只打印一个空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:43:22.740

以下是修改后问题的答案：

```
moo = raw_input ('moo ')
print ' '.join(moo.split()) 
```

从括号内部开始，我们首先获取输入`moo`并根据空格将其分成几部分。这给了我们一个可迭代的列表，类似于`sys.argv`旧答案。

然后，我使用 join 和一个空格加入该列表。然后打印整个交易。

为了更好地理解这一点，这里是同样的事情，但使用了更多的行：

```
moo = raw_input('moo ')
temp_list = moo.split()
print ' '.join(temp_list) 
```

也尝试打印 temp_list，看看它是什么样子的。

只需将其添加为最后一行，以查看列表的打印方式：

```
print temp_list 
```

* * *

你可能想要这个：

```
import sys

if len(sys.argv) > 1:
    for arg in sys.argv[1:]:
        print arg, 
```

sys.argv 是命令行参数的列表。第一个是脚本的名称。

列表是一种可迭代类型，因此您可以使用[for](http://docs.python.org/library/functions.html#list)[循环](http://docs.python.org/tutorial/controlflow.html)对其进行迭代。我拆分列表，以便从其中的第二项开始。

我在打印行的末尾使用逗号来告诉 python 不要打印换行符。在 python 3 中有一种不同的方法可以做到这一点。

在[python 3](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)中，最后一行是：

```
print(arg, end=" ") 
```

要使用[Dan D](https://stackoverflow.com/users/388787/dan-d)的示例，您只需执行以下操作：

```
import sys

if len(sys.argv) > 1:
    print ' '.join(sys.argv[1:]) 
```

您仍然可以测试以确保您的 arg 至少比脚本名称多一个。它将可迭代列表与每个项目之间的空格[连接](http://docs.python.org/library/stdtypes.html#str.join)在一起。

# objective-c - 进行 (int) --> (UILabel*) 的转换所需的构建设置？

> ID：10467901
> 
> 赞同：0
> 
> 时间：2012-05-06T03:42:03.037
> 
> 标签：objective-c, xcode

以下加载到 XCode 4.2 中的“旧”代码将起作用。

但是，如果我开始一个“新项目”并“剪切并粘贴”代码，我会得到错误：ARC 不允许将 'int' 转换为 'UILabel*'

我假设我需要设置“构建设置”中的一个设置......我该怎么办？

谢谢...

（是的，我故意这样做，太多旧代码要转换！）

```
int mice[10];

for (int z=0; z<10; z++) {
    UILabel *b = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
    mice[z] = (int)b;
}

for (int zz=0; zz<10; zz++) {
    //Old project loaded into XCode 4.2 will work fine with this
    UILabel *c = (UILabel*) mice[zz];// New project: fails <---------- Cast of 'int' to 'UILabel*' is disallowed with ARC

    [self.view addSubview:c]; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:44:16.633

您避免进行此类转换，因为它具有未定义的行为。`UILabel`而是创建一个 s 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:06:27.097

哇。没有冒犯，但为什么不是 nsmutablearray？至少然后转换为 uilabel 是有效的，因为基础对象是 id。

不确定您是否能够在开启电弧的情况下进行操作。如果您想继续使用这种代码，建议您禁用它。

# javascript - JavaScript - x 和 y 轴上的 for 循环

> ID：10467902
> 
> 赞同：3
> 
> 时间：2012-05-06T03:42:07.073
> 
> 标签：javascript, jquery, html, path-finding, a-star

我在一个简单的 JavaScript 2D（画布）游戏中使用[A* 寻路脚本。](http://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript-updated)我将我的游戏分解为[SSCCE](http://sscce.org/)。无论如何，我的游戏有 15 列和 10 行。

**问题是什么？**设置图表，节点只设置了 11 次横向和 10 次上下。`X`轴应该是 up to when`15`看起来它只设置到`grid.length`which is `11`。好的，所以这是我的问题。My`grid`是`array`包含在`SSCCE`.

这是我的`SSCCE`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript' src='graphstar.js'></script>
<script type="text/javascript">
    var board;
</script>
<script type='text/javascript' src='astar.js'></script>
<script type="text/javascript">
    $(document).ready(function()
{
        // UP to DOWN - 11 Tiles (Y)
        // LEFT to RIGHT - 16 Tiles (X)
        graph = new Graph([
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 1, 13, 13, 1], 
        [1, 13, 1, 1, 13, 1, 1, 13, 1, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 1, 1, 1, 13, 13, 1, 13, 13, 1, 1, 1, 13, 1], 
        [1, 13, 13, 1, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 1], 
        [1, 13, 1, 1, 1, 1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ]);
        //Let's do an example test.
        start = graph.nodes[1][2]; // X: 1, Y: 2
        end = graph.nodes[12][7]; // X: 12, Y: 7
        result = astar.search(graph.nodes, start, end);
    });
</script>
</head>
<body>
Loading... pathfinding. Look in Chrome Console/Firefox Firebug for more information.
</body>
</html> 
```

如您所见，我`grid`的`11`上下行和`16`列。然而，我`graph`并没有那样解释它。

在这里查看全部内容：http `graphstar.js`: [//pastebin.com/KfS9ALFq](http://pastebin.com/KfS9ALFq)（这里是`astar.js`完整包： http: [//pastebin.com/8WyWnTpQ](http://pastebin.com/8WyWnTpQ)）

这是它的布局`graphstar.js`：

```
function Graph(grid) {
    var nodes = [];

    var row, rowLength, len = grid.length;
    console.log("Length:" + len);
    for (var x = 0; x < len; ++x) {
        row = grid[x];
        rowLength = row.length;
        nodes[x] = new Array(rowLength);
        for (var y = 0; y < rowLength; ++y) {
            nodes[x][y] = new GraphNode(x, y, row[y]);
        }
    }

    this.input = grid;
    this.nodes = nodes;
} 
```

如您所见，`for`循环仅转到`grid.length`( `len`) ，`11`因为它是`11`行向下的。但那是`X`轴。我的`X`轴地图`15`跨列，`Y`轴向`16`下行。

现在你说...你**为什么不切换轴呢？**我试过了。喜欢，`X`并被`Y`切换。但我得到的`Uncaught TypeError: Cannot set property '0' of undefined`只是`line 24`其中`nodes[x][y] = new GraphNode(x, y, row[y]);`

我怎样才能使图表相应地设置为`X`最高轴是`15`和`Y`最高轴是`10`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:27:48.137

编辑：误解了你在说什么。

似乎你只需要改变你用 for 循环迭代的方式，这样你就可以向下一个并穿过它，向下一个并穿过它

```
var row, rowLength, len = grid.length;
for(y = 0; y == len - 1; ++y) {
    row = grid[x];
    rowLength = row.length; // Expected: 16;
    nodes[y] = new Array(len);
    for (var x = 0; x == rowlength - 1; ++x){

            //figure out your nodes[y][x] here;
    }
} 
```

# css - 如何在单个 List 实例上设置滚动条皮肤？

> ID：10467905
> 
> 赞同：0
> 
> 时间：2012-05-06T03:42:48.817
> 
> 标签：css, apache-flex, flex4

我创建了一个滚动条皮肤，我可以使用以下 CSS 将其应用于所有 List 组件：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";

    s|List s|HScrollBar {
        skinClass: ClassReference("com.skins.myScroller.MyHorizontalScrollerSkin");
        fixedThumbSize:true;
    }

</fx:Style> 
```

设计已经改变，现在我只需要将这个皮肤应用到一个 List 实例。我该怎么做（如果可能，首选 CSS 或内联）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:24:01.483

只需为特定列表使用类选择器，如下所示：

```
.myList s|VScrollBar {
    skinClass: ClassReference("net.riastar.skin.VScrollBarSkin");
}

<s:List styleName="myList" /> 
```

# magento - 折扣后 Magento 的增值税计算不正确

> ID：10467907
> 
> 赞同：0
> 
> 时间：2012-05-06T03:43:34.993
> 
> 标签：magento, discount

好的，问题来了：我已经建立了我的网站，一切正常。我有一个问题：在 Onepagecheckout 的最后一步，Magento 计算总金额的 TAX 并忽略折扣。在购物车中，发票和发送到支付网站的金额是正确的；只有在最后一页是错误的。一个例子：

有人购买了 2 件产品，总计 209,45 件，包括增值税。增值税金额为 (19%) 33,44。但是，他获得了 17 欧元的折扣。现在总价为 192,45，增值税应为 30,73。这是发票和购物车上显示的金额。但是，在 onepagecheckout 的最后一步，总金额是 195,16。因此 Magento 根据折扣前的价格计算增值税，然后将其添加到折扣后的增值税金额。

Magento 设置为在折扣后计算总金额的增值税，我使用 1.4.2。这是一个实时网站，所以我不能相信太多。

我见过很多人有这个问题，这个问题总是被认为是某些设置错误，所以我再说一遍：在发票上，在购物车中以及发送到支付网关的金额；一切都正确，只是最后一步显示了错误的总金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:59:10.750

在系统 > 配置 > 税金更改“应用客户税”到“折扣后”中转到您的税金设置

# java - 在 Java 中的特定情况下，在 for 循环中停止增量

> ID：10467911
> 
> 赞同：1
> 
> 时间：2012-05-06T03:46:00.357
> 
> 标签：java, arrays, loops, for-loop, increment

本质上，我正在尝试使用 for 循环将用户输入存储在多维数组中。如果用户输入了不期望/不想要的内容（例如小于 0），则会显示一条警告消息，并且循环应该理想地“等待”直到它接收到下一个有效整数。

目前，如下所示，我的代码可以正常工作，但我想知道是否有更好/更优化的方法来做到这一点。

```
for (int row = 0; row < array.length; row++) {
    for (int column = 0; column < array[row].length; column++) {
        int number = input.nextInt();
        if((input.nextInt() >= 0) {
            array[row][column] = number;
        } else {
            System.out.println("Input must be > 0.");
            column--;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:49:50.047

使用`do..while`循环等待用户输入有效的内容。这比修改循环计数器更干净。

```
for (int row = 0; row < array.length; row++) {
        for (int column = 0; column < array[row].length; column++) {
            bool hasEnteredValidInput = false;
            do
            {
               int number = input.nextInt();
               if(number  >= 0) {
                  array[row][column] = number;
                  hasEnteredValidInput = true
               } else {
                  System.out.println("Input must be > 0.");
               }
            } while (!hasEnteredValidInput);
        }
    } 
```

更好的办法是将阅读代码提取到它自己的函数中：

```
for (int row = 0; row < array.length; row++) {
        for (int column = 0; column < array[row].length; column++) {
             array[row][column] = readValidInputFromUser();   
        }
 }

 public string readValidInputFromUser()
 {
    while(true)
    {
           int number = input.nextInt();
           if(number >= 0) {
              return number;
           } else {
              System.out.println("Input must be > 0.");
           }
    }
 } 
```

这个版本非常清楚你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:48:15.350

这几乎就是这样做的方法。您可以将其转换为 while 循环，但我认为没有理由这样做。

```
int column = 0;
while ( column < array[row].length) {
        int number = input.nextInt();
        if((input.nextInt() >= 0) {
            array[row][column] = temp;
            ++column;
        } else {
            System.out.println("Input must be > 0.");
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T03:50:22.057

您不知道用户将输入多少次无效输入，因此这是何时使用 while 循环的主要示例。

试试这个：

```
for (int row = 0; row < array.length; row++) {
    for (int column = 0; column < array[row].length; column++) {
        int number = input.nextInt();
        if(number >= 0) {
            array[row][column] = temp;
        } 
        else 
        {
            while(number < 0)
            {
                System.out.println("Input must be > 0.");
                number = input.nextInt();
            } 
        }
} 
```

另请注意，在您的 if 语句中，我更改了 if `input.nextInt()`to，`number`因为再次调用`nextInt()`将从您连接到扫描仪的任何输入流中读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T03:47:43.403

在特定条件下在循环代码中减少它。看来您确实是这样做的，以防万一`column--`

您也可以在当前的 for 循环中这样做：

```
for (int row = 0; row < array.length; row++) {
    for (int column = 0; column < array[row].length; column++) {
        int number;
        do {
            number = input.nextInt();
            if(number<0)  System.out.println("Number should be >= 0, enter again");
        }while(number<0);
        array[row][column] = number;

    }
} 
```

# python - 在 Python 的 .txt 文件中打印特定行？

> ID：10467913
> 
> 赞同：-1
> 
> 时间：2012-05-06T03:46:27.543
> 
> 标签：python, printing, line

我有一个包含很多行的 .txt 文件。我希望我的程序问我要打印哪一行，然后将其打印到 python shell 中。.txt 文件称为 packages.txt。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T04:03:59.943

如果您不想预先读取整个文件，您可以简单地迭代直到找到行号：

```
with open('packages.txt') as f:
    for i, line in enumerate(f, 1):
        if i == num:
            break
print line 
```

或者您可以使用`itertools.islice()`切出所需的线（这有点hacky）

```
with open('packages.txt') as f:
    for line in itertools.islice(f, num+1, num+2):
        print line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T04:00:09.647

如果文件很大，使用 readlines 可能不是一个好主意，最好一个一个地阅读它们，直到你到达那里。

```
line_number = int(raw_input('Enter the line number: '))
with open('packages.txt') as f:
    i = 1
    for line in f:
        if i == line_number:
            break
        i += 1
    # line now holds the line 
    # (or is empty if the file is smaller than that number)
    print line 
```

（已更新以修复代码中的错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T09:45:07.447

如何使用行号引用文件的特定行？就像在 java 中，如果行号 = i 并且文件存储在 f 中，那么 f(i) 就可以了。

# java - JavaScript 和 Java 中访问器和修改器的区别

> ID：10467921
> 
> 赞同：4
> 
> 时间：2012-05-06T03:49:31.700
> 
> 标签：java, javascript, setter, getter

在 JavaScript Circle 对象中，我可以编写如下内容：

```
var Circle = function (xCoordinate, yCoordinate, radius) {
    var x = xCoordinate,
        y = yCoordinate,
        r = radius;

    this.getX = function () {
        return x;
    }

    this.getY = function () {
        return y;
    }

    this.getRadius = function () {
        return r;
    }
} 
```

而在Java中，我会写以下内容：

```
public class Circle {
    private x, y, radius;

    public Circle(xCoordinate, yCoordinate, radius) {
        this.x = xCoordinate;
        this.y = yCoordinate;
        this.radius = radius;
    }

    public int getX() {
        return this.x;
    }

    //and so on...
} 
```

但是我已经看到生产标准 JavaScript 代码甚至不用像第一个示例中所示的访问器和修改器，而在 Java 中，没有第二个示例中的 getter 和 setter 会很奇怪。

1.  我什么时候应该在 JavaScript 中使用 getter / setter？
2.  如果我对所有 JavaScript 构造函数对象都坚持使用 getter 和 setter，会不会对资源造成太大压力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:53:48.997

提供访问器和修改器的原因是出于封装目的，而不是为了看起来正确。这是面向对象。如果您希望将相同的原则应用于 JavaScript，那么就这样做。

# visual-studio-2008 - 未处理的异常 - 无法评估表达式

> ID：10467928
> 
> 赞同：0
> 
> 时间：2012-05-06T03:50:55.490
> 
> 标签：visual-studio-2008, visual-c++, unhandled-exception

软件环境：Visual Studio 2008 C++项目

我有一个构建良好的代码。但是，当我开始调试代码时，它会吐出以下错误：

**xyz.exe 中 0x7694b9bc 处未处理的异常：Microsoft C++ 异常：内存位置 0x06d0f410 处的 CDBException。**

此函数的文件 dbgheap.c 中似乎出现错误：

```
 void * pvBlk = _nh_malloc_dbg_impl(nSize, nhFlag, nBlockUse, szFileName, nLine, &errno_tmp); 
```

在监视变量中，我收到了 szFileName 的消息：

```
 CX0030: Error: expression cannot be evaluated 
```

任何人都可以告诉我发生了什么，因为发生错误的文件在系统文件中。我不知道代码可能在哪里出错。在这种情况下我应该从哪里开始调试。

这是堆栈跟踪：

```
KernelBase.dll!7694b9bc()   
[Frames below may be incorrect and/or missing, no symbols loaded for KernelBase.dll]    
KernelBase.dll!7694b9bc()   
msvcr90d.dll!_nh_malloc_dbg(unsigned int nSize=36, int nhFlag=0, int nBlockUse=8684696, const char * szFileName=0x00000000, int nLine=44349400)  Line 296 + 0x1d bytes  C++
msvcr90d.dll!_malloc_dbg(unsigned int nSize=0, int nBlockUse=0, const char * szFileName=0x02a4bd08, int nLine=143947928)  Line 160 + 0x1b bytes C++ 
```

由于文件链接在许多头文件和源文件上，我无法找到代码的哪一部分触发了错误。

非常感谢您的任何投入！！

# spring - Spring-security 不能匹配“？参数”格式？

> ID：10467930
> 
> 赞同：7
> 
> 时间：2012-05-06T03:51:30.710
> 
> 标签：spring, spring-security, spring-roo

我使用 spring-security 来保护我的 web，当我通过 spring-roo 在 applicationContext-security.xml 中生成的配置文件学习它时，在`<http>`节点中：

```
 <intercept-url pattern="/userses?form" access="hasRole('ROLE_ADMIN')" /> 
```

这意味着当您要创建用户对象时，首先您需要登录以获得管理员权限。但实际上并没有奏效。检查日志：

```
2012-05-06 11:39:11,250 [http-8088-7] DEBUG org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/userses'; against '/userses?form' 
```

框架使用 /userses 而不是 /userses?form 进行比较，由于字符串不匹配而跳过身份验证过程。为了验证这一点，我还尝试了另一个网址：

```
<intercept-url pattern="/userses/abc" access="hasRole('ROLE_ADMIN')" /> 
```

我请求 /userses/abc，它检测到用户未授权，并移至 /login 页面，检查日志：

```
2012-05-06 11:46:44,343 [http-8088-7] DEBUG org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/uesrses/abc'; against '/userses/abc' 
```

所以我的问题是：spring-secure 3不支持“？参数”模式还是我错过了一些配置来支持这个？PS：所有代码都是roo生成的，没有修改，也想知道为什么不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T04:36:06.850

默认情况下， [spring security](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html)使用 ant 样式匹配，无法匹配参数。然而，正则表达式匹配*可以*匹配参数

尝试像这样定义它：

```
<http request-matcher="regex">
  <security:intercept-url pattern="\A/userses\?form.*\Z" access="hasRole('ROLE_ADMIN')" />
</http> 
```

不知道为什么 Roo 不自动执行此操作。似乎应该如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T04:41:39.357

该行为由正在使用的[“请求匹配器”](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-http-request-matcher)定义。如文档所示，默认值为“ant”，表示使用[AntPathRequestMatcher](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/util/AntPathRequestMatcher.html)，另一种选择是“regex”，即[RegexRequestMatcher](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/util/RegexRequestMatcher.html)。javadocs（链接的）给出了关于匹配器的细节，包括前者与请求的“servletPath + pathInfo”匹配，后者与其“servletPath + pathInfo + queryString”匹配。

# ruby-on-rails - 取消ajax请求会导致rails抛出异常

> ID：10467933
> 
> 赞同：3
> 
> 时间：2012-05-06T03:51:48.247
> 
> 标签：ruby-on-rails, ruby, ajax, exception, autocomplete

我是 Rails 新手，我整天都在寻找答案。让我们从乞讨开始。

UI：我有自动完成功能（准确地说，是页面上的 YUI 自动完成功能）。

```
Y.one('input.search-from').plug(Y.Plugin.AutoComplete, {      
    resultHighlighter: 'phraseMatch',
    source: "/api/open_maps/search/{query}", 
    resultTextLocator: 'display_name'
} 
```

其中“/api/open_maps/search/{query}”转到rails，在我的情况下，它被用作解决ajax同源策略的代理。

```
def search
  uri = URI.parse(searchUrl(CGI.escape(params[:query])))
  http = Net::HTTP.new(uri.host, uri.port)
  request = Net::HTTP::Get.new(uri.request_uri)
  response = http.request(request)
  render :json => response.body
end 
```

如果我快速键入，则从自动完成器到 rails 的所有 ajax 请求都将被取消，这是有道理的，因为我们不再需要它们。问题是 Rails 为所有取消的请求抛出了丑陋的异常：

```
Started GET "/api/open_maps/search/Den" for 127.0.0.1 at Sun May 06    04:20:03 +0100 2012
[2012-05-06 04:20:03] ERROR Errno::EINVAL: Invalid argument
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:324:in `write'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:324:in `<<'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:324:in `_write_data'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:296:in `send_body_string'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:187:in `send_body'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpresponse.rb:104:in `send_response'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:79:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:13:in `run'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:55
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

此外，看起来红宝石无论如何都会在后台发出取消请求（这会减慢一切）。

我的问题是：

1.  我们如何在 Rails 中检测到来自客户端的连接失败/被取消？
2.  一旦我们了解了#1，我们如何取消 Net::HTTP 发出的请求？

我尝试了开始->救援->结束块以至少消除异常，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:01:44.930

如果您查看跟踪，则该错误并非源自 Net::HTTP，这就是您的`rescue`尝试没有帮助的原因。当 webrick 尝试将机架响应写回浏览器时，将引发错误。

您的问题可以通过安装[mongrel](http://rubygems.org/gems/mongrel)、[thin](http://rubygems.org/gems/thin)或[unicorn](http://rubygems.org/gems/unicorn)作为您的网络服务器来解决。Webrick 是 Ruby 内置的，但众所周知是不健壮的。

# git - 如何使用 git 跟踪整个项目但只将选定的文件推送到 Github？

> ID：10467936
> 
> 赞同：1
> 
> 时间：2012-05-06T03:51:53.890
> 
> 标签：git, github

我想在本地对整个项目进行版本控制，但只将某些文件（例如测试）推送到 Github。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T04:04:50.457

Git 通常通过在位置之间*克隆*存储库的副本来工作 - 例如，在您的机器和 github 之间。您机器上的存储库副本基本上与 github 上的存储库相同（也与其他人可能拥有的副本相同）。

因此，如果一个人进行了提交，该提交将与存储库的所有其他副本一起转移。

主要的例外是 git *branch*。（这是一个简化的视图，但它适用于本次讨论。）存储库中的分支只有在有人专门采取行动推送它们时才会在存储库之间推送。

因此，如果您只想将某些文件推送到 github 或从 github 推送，我能看到的最佳方法是创建一个仅包含您要推送到 github 的文件的分支，然后只推送该分支。只是不要推动其他分支。

您仍然可以将这些文件合并到您的开发分支中——以及将其他分支中的文件合并到您推送的分支中。

所以我相信这会完成你想要的。

话虽如此，我真的强烈建议您按预期使用 git 并推送所有代码的完整副本，而不仅仅是推送某些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:07:30.133

我同意 Kevin 的观点，并建议将整个存储库推送到 GitHub。

但是，如果有一些非常奇怪的情况，您需要只将单元测试存放在 GitHub 中，您可以将其设置为单独的存储库，并`submodule`在主存储库中使用。

# javascript - Javascript服务器端？

> ID：10467937
> 
> 赞同：0
> 
> 时间：2012-05-06T03:51:59.047
> 
> 标签：javascript, node.js, serverside-javascript

是否有可能使用 javascript 服务器端，因此在页面源代码中不显示某些核心计算？

我正在开发一款游戏，代码的一个关键部分只需要在服务器端计算然后传回客户端。

我的整个游戏都是用 Javascript 编写的——但大部分都是客户端，除了这个需要隐藏以防止作弊的特定功能之外，这很好。

这可能吗？如果可以，我将如何设置服务器端 JS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T03:53:50.363

你会想看看[node.js](http://www.nodejs.org)。Node.js 允许您在服务器上运行 javascript 代码，并且很容易启动和运行以接受和响应 http 请求。您可能还想看看[expressjs](http://www.expressjs.com)，它使实现 Node.js 服务器变得更加容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T03:54:37.790

有多种方法可以编写服务器端脚本。 [`Node.js`](http://nodejs.org/)是一种解决方案，但即使是 PHP、Ruby 或 Python 也可以让您进行服务器端计算。

不过没关系，因为如果你的游戏是大量的客户端 JS，任何安装了greasemonkey 插件的人都可以作弊。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:06:09.407

我会做一个 AJAX 请求。向服务器提交原始数据并取回完成的数据。使用服务器端语言 (PHP) 进行安全计算。服务器端的 JavaScript 是真正的废话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T04:56:04.363

我还建议您查看 NowJS (http://nowjs.com/)，它可以让您轻松地从客户端调用服务器函数（而不暴露它们的源代码）。

now.calculateGameScore(function(data){ ... });

# php - 我必须声明从父类继承的变量吗？(PHP 5.3.2)

> ID：10467940
> 
> 赞同：0
> 
> 时间：2012-05-06T03:52:30.577
> 
> 标签：php, oop

我是编写 OOP 的新手。

我认为除非在子类中定义，否则父级的属性会自动由子级继承。

我有一个父类，例如：

```
class parentClass {
  public $name;
}
.
.
.

class childClass extends parentClass {
  protected $id;
  protected $frontend_name;
} 
```

当我尝试加载它们时，我收到此错误：

PHP 致命错误：第 2571 行 /var/wwww/model.php 中对 childClass::$name 的访问级别必须是公共的（如在类 parentClass 中）

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:09:32.680

使用代码：

```
class parentClass {
    public $name = 'foo';
}

class childClass extends parentClass {
    protected $id;
    protected $frontend_name;
} 
```

从子类调用

```
$child = new childClass;
echo $child->name; 
```

或从父类调用

```
$parent = new parentClass;
echo $parent->name; 
```

结果：

```
foo 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T04:02:35.673

再次声明变量会引发错误，因为您已经从父类继承了它们。所以，不，你不能声明从父类继承的变量。

# javascript - 简单的 div onclick 显示 javascript

> ID：10467943
> 
> 赞同：7
> 
> 时间：2012-05-06T03:53:09.200
> 
> 标签：javascript, html, hide, show

当我单击任何链接时，会显示相应的 div，但是当我单击下一个链接时，会显示新单击的潜水以及先前单击的潜水。我想隐藏 previos div。新的开发请有人帮助我........

这是链接的 html 代码：

```
<a class="hide" onclick="showdiv('firstimpression'); " href="#">First Impression</a>
<a class="hide" onclick="showdiv('speaking'); " href="#">Speaking</a>
<a class="hide" onclick="showdiv('eating'); " href="#">Eating</a>
<a class="hide" onclick="showdiv('taste'); " href="#">Taste</a>
<a class="hide" onclick="showdiv('saliva'); " href="#">Saliva</a>
<a class="hide" onclick="showdiv('cleaning');" href="#">Cleaning</a>
<a class="hide" onclick="showdiv('nighttime');" href="#">Night Time</a>
<a class="hide" onclick="showdiv('singledenture');" href="#">Single Denture</a>
<a class="hide" onclick="showdiv('soreness');"  href="#">Soreness</a>
<a class="hide" onclick="showdiv('burning');" href="#">Burning</a>
<a class="hide" onclick="showdiv('adapting');" href="#">Adapting</a>
<a class="hide" onclick="showdiv('futureconsideration');" href="#">Future Consideration</a>
<a class="hide" onclick="showdiv('conclusion');" href="#">Conclusion</a> 
```

这些是div：

```
<div id="firstimpression" class="patientinfodivs">
<div id="speaking" class="patientinfodivs"> 
```

.....等等

Javascript代码

```
<script type="text/javascript">
function showdiv(id){
document.getElementById(id).style.display = "block";
}
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T07:00:11.377

尽管我讨厌创建全局变量，但它们有时会派上用场……

```
var _hidediv = null;
function showdiv(id) {
    if(_hidediv)
        _hidediv();
    var div = document.getElementById(id);
    div.style.display = 'block';
    _hidediv = function () { div.style.display = 'none'; };
} 
```

这将防止你不必要地搜索 div 来找到你应该隐藏的那个。

编辑：根据@StevenRoose 的建议进行扩展：

```
var _targetdiv = null;
function showdiv(id) {
    if(_targetdiv)
        _targetdiv.style.display = 'none';
    _targetdiv = document.getElementById(id);
    _targetdiv.style.display = 'block';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T14:18:12.507

这是一个不使用全局（函数本身除外）的版本。变量保存在函数对象上：

```
function showdiv( id ) { 
    if( showdiv.div ) { 
        showdiv.div.style.display = 'none';
    }
    showdiv.div = document.getElementById(id);
    showdiv.div.style.display = 'block';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T03:57:39.083

你需要在你的 showdiv() 首先让你的所有元素 display = "none"; 然后使选中的元素 display = "block";

您还可以将其组织为两个函数 hidealldivs()，它将隐藏所有 div 和您当前的 showdiv()，它将显示选中。

然后onClick一个接一个地调用它们

```
onclick="hidealldivs(); showdiv('eating')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T04:00:51.150

您需要最初隐藏您的 div。在样式表或内联中。

```
.patientinfodivs {
    display: none;
}

<div id="firstimpression" class="patientinfodivs" style="display: none;"> 
```

# node.js - 如何将 Express 模块安装到 Cloud9 项目中？

> ID：10467944
> 
> 赞同：4
> 
> 时间：2012-05-06T03:53:13.083
> 
> 标签：node.js, npm, cloud9-ide

我第一次尝试使用 Cloud9 IDE，并使用 express 模块启动 node.js 项目。我能够安装模块，但是当我尝试运行命令时

```
express ./myProjectHere 
```

它说

> 命令“express”未被识别

npm 有效，为什么安装后不表达？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T04:02:03.803

选择运行面板，设置运行配置如下：

```
 name: express 
   path: node_modules/express/bin/express 
   cmd line args: ./your-app-name 
```

只需记住在输入命令信息后双击运行面板中的 express line 项即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:05:41.283

Cloud9 IDE 对 IDE 中的运行功能有一些临时锁定。如果您尝试打开运行面板，并且这些字段被禁用，请按照以下步骤操作：

1.  打开项目文件面板
2.  钻入 node_modules\express\bin 目录
3.  将 express 文件重命名为 express.js
4.  双击打开刚刚重命名的文件。
5.  现在打开运行窗格，除了命令行参数之外的所有内容都将为您预先填充。
6.  最后，输入你想要的应用路径（IE ./your-app-name）

还有一些额外的步骤，例如设置依赖项，我在这里更详细地介绍了这些步骤：

[将节点快速上云](http://demandingdev.blogspot.com/2012/05/express-node-to-cloud.html)

希望这可以帮助那些看到我遇到同样奇怪问题的人！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-29T01:51:36.860

您可以在 Cloud9 IDE 底部的 Cloud9 终端中使用以下命令安装 Express：

```
npm install express 
```

在 Cloud9 上运行的一个简单的 hello world 应用程序是：

```
var express = require('express');
var app = express();

app.get('/', function(req, res){
  res.send('hello world');
});

// Note: Uses the CLOUD9 port
app.listen(process.env.PORT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-25T13:02:21.357

[正如 Cloud9 站点本身的功能页面](https://c9.io/site/features/)上所列出的，IDE 现在支持通过 npm 安装 express，并像在您自己的机器上一样运行 express。

# google-maps-api-3 - 更改地图标记颜色

> ID：10467949
> 
> 赞同：0
> 
> 时间：2012-05-06T03:54:23.380
> 
> 标签：google-maps-api-3

随着动态图标（https://developers.google.com/chart/infographics/docs/dynamic_icons）的贬值，我现在在我的无尽列表中添加了一项额外的任务——那就是——找到改变标记颜色的方法，为图标添加数字等。

因此，在我开始为我们的地图应用程序中可能的每个组合创建静态图标之前；我去问问团队有没有其他办法...

团队——还有其他方法吗？

...因为地图 API 没有提供像动态图标一样有用的东西。

贬低动态图标服务真的很受伤（有些人甚至认为它是邪恶的）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:57:37.647

我所知道的最完整的集合在这里：

[http://mapicons.nicolasmollet.com/](http://mapicons.nicolasmollet.com/)

[http://mapicons.nicolasmollet.com/numbers-letters/](http://mapicons.nicolasmollet.com/numbers-letters/)

标记末尾有自定义颜色选项，但不如 Google Charts 动态图标方便。nicolasmollet 页面说您必须在服务器中下载和托管图标。

# excel - 统计满足条件的重复数据并删除数据

> ID：10467954
> 
> 赞同：3
> 
> 时间：2012-05-06T03:55:05.453
> 
> 标签：excel, excel-formula, pivot-table, countif, vba

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:19:44.270

我同意@Siddharth 的实例计数，即数据透视表，行标签 = `GENE`，Σ 值 = 计数`refGene`。

可能“重复”解决方案是（至少开始时）在顶部插入行，选择 A 列，排序和过滤/高级/复制到另一个位置 =（比如说）C1/仅勾选唯一记录/确定。这应该会给你一个比你开始时少 35 行的列表。

要识别哪些行是重复的，请将 A 列复制到另一列（例如 D），替换`>`（不带任何内容）然后输入`=COUNTIF(D:D,D2)`E2 并双击单元格的右下角。`1`= 唯一，其他都是实例数。

# ruby-on-rails - 使用 httparty 发布一些数据后，如何访问控制器中发布的值？

> ID：10467956
> 
> 赞同：0
> 
> 时间：2012-05-06T03:55:32.873
> 
> 标签：ruby-on-rails, post, httparty

我已经使用 httparty 发布了一个帖子。

例如

```
options={ 
  :foo => '123'
  :bar => 'second',
  :baz => 'last thing'
}

HTTParty.post("localhost/tests" , options) 
```

如何在远程应用控制器中检索选项参数：例如

```
#post /tests
def create
@k=options[:name]  -------> Here is my question, How can I access options[:name]? 
```

我的意思是我应该将选项作为创建方法的参数传递吗？就像是：

```
def create(options)
@k=options[:name] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:37:20.010

好吧，它终于对我有用了。我应该分别检索每个字段而不是整体检索。很高兴！所以现在我有 2 个 rails 应用程序。只需分别包装字段并分别获取它们，我就可以发布和检索。

# initialization - PIC 18f4685 和日立 44780 LCD

> ID：10467958
> 
> 赞同：0
> 
> 时间：2012-05-06T03:55:44.037
> 
> 标签：initialization, pic, lcd

有人确定可以将 PIC 18f4685 的 4 位接口 C 代码用于日立 LCD 2 行显示器吗？我正在使用带有与日立 44780 兼容的 LCD 模块的 Northmicro 原型板。

将 PORTB 上的半字节降低到 D4-7；E:RA4
RS:RB4
RW:RB5 背光源:RA5

我环顾了 Google 的各个角落，找到了可以帮助我完成整个过程的内容，但没有针对我的特定配置编写任何内容。我已经完成并认为我已经为我的用途调整了它们，但我什至无法让 LCD 初始化。当我通过 MPlabSim 运行时，时间延迟似乎没问题。

我也尝试使用 mcc18 src 文件夹中的库，但这也不起作用。

我正在寻找已知可以工作的代码，以便我可以排除故障是我糟糕的编码还是电路板。到目前为止，我只能打开和关闭背光，但这并不重要，因为它只是一个连接到 MOSFET 的引脚，与 LCD 的板载 mcu 无关。

在过去的一周里，我每天都在做几个小时...... 16 小时对于这样一个愚蠢的项目来说是很长的时间，所以如果我能得到帮助，我会很高兴的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:18:34.330

我给出了在 PIC18f458/16F877 上运行的代码，用 c 编写并在 micro c 编译器中编译..希望它对你有帮助......

```
#define rs PORTB.F0
#define rw PORTB.F2
#define en PORTB.F1
#define lcd PORTD

    void delay()
    {
         int i;
         for(i=0;i<500;i++);

    }

    void lcd_cd(unsigned char c)
    {
         rs=0;
         lcd = (lcd & 0x0F) | (c & 0xF0);
         en=1;
         delay();
         en=0;
         lcd = (lcd & 0x0F) | (c <<4);
         en=1;
         delay();
         en=0;

    }

    void lcd_data(char *c)
    {
         rs=1;
         while(*c!='\0')
         {

             lcd = (lcd & 0x0F) | (*c &0xF0);
             en=1 ;
             delay();
             en=0;
             lcd = (lcd & 0x0F) | (*c <<4);
             en=1;
             delay();
             en=0;
             c++;
         }
    }

    void lcd_int()
    { 

         lcd_cd(0x02);
         delay();
         lcd_cd(0x28);
         delay();
         lcd_cd(0x80);
         delay();
         lcd_cd(0x01);
         delay();
         lcd_cd(0x0e);
         delay();
    }

    void main()
    {
         rw=0;
         TRISB=0X00;
         TRISD=0X00;

         while(1)
         {
              lcd_int();
              delay();
              lcd_data("HELLO INDIA");
              delay();
              lcd_cd(0xc2);
              lcd_data("HELLO INDIA");
              delay();
         }
    } 
```

# python - 如何在Python中实现方法（hex（hmac_sha1（param，secretKey））

> ID：10467959
> 
> 赞同：1
> 
> 时间：2012-05-06T03:55:44.537
> 
> 标签：python, hash

有什么方法可以在 python 中实现以下哈希机制？

1.  按字母顺序加入所有 http 请求查询参数。param1=concatByAlphabetical(arg1+value1,arg2+value2,arg3+value3…) 注意：“value1” & “value2” & “value3” 是 URLEncoding 之前的值。

2.  使用 param1 param2=concat (urlPath, param1) 连接 appKey。urlPath 是 URL 中的荧光笔，如下所示： [https://gw.api.alibaba.com/api/xml/1/sy](https://gw.api.alibaba.com/api/xml/1/sy) ... a_=xxx&a=b 例如： 如果“GET”请求 URL 是 [http： //gw.api.alibaba.com/api/json/1/sy](http://gw.api.alibaba.com/api/json/1/sy) ... e/1?_data={a=1,b=2}&_aop_respon seFormat=xml. param2 将是：json/1/system/currentTime/1_aop_responseFormatxml_data{a=1,b=2}

3.  使用 HMAC_SHA1 算法进行签名。签名=大写（十六进制（hmac_sha1（param2，secretKey））

# ios - 网络视图/警报视图

> ID：10467960
> 
> 赞同：0
> 
> 时间：2012-05-06T03:56:12.430
> 
> 标签：ios

我正在使用以下代码：

```
- (IBAction)callZH:(id)sender {

UIWebView *callWebview = [[UIWebView alloc] init];
NSURL *telURL = [NSURL URLWithString:@"tel:mynumberhere"];
[callWebview loadRequest:[NSURLRequest requestWithURL:telURL]];

[self.view addSubview:callWebview];
} 
```

上面的代码效果很好。但是，当用户点击上述 IBAction 所连接的按钮时，将自动弹出一个警报视图，显示 Tel# 下方有 2 个按钮 Tel# cancel 或 call。如何在警报视图中设置 Tel# 上方的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:54:37.517

就个人而言，当我想打电话时，我不使用 webview，而是使用

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", phoneNumber]]]; 
```

警报是一种很好的做法，因此可以使用您想要的任何标题创建您想要的任何类型的警报，如果用户选择继续，您可以调用上面的代码来进行调用，而不会进一步中断用户界面。

# ruby-on-rails - 为什么表单会在 Rails 中的显示操作上自动提交？

> ID：10467962
> 
> 赞同：0
> 
> 时间：2012-05-06T03:56:32.597
> 
> 标签：ruby-on-rails, forms, validation

我有这个表单_用于在我的用户#show 模板上的两个用户之间发送私人消息

```
<%= form_for([current_user, @message])  do |f| %>
    <%= f.hidden_field :to_id, :value => @user.id %>
    <div class="message_field">
        <%= f.text_area :content, placeholder: "Send a private message..." %>
    </div>
   <%= f.submit "Post", class: "btn btn-large btn-primary" %>
   <span class="message_countdown"></span>
<% end %> 
```

在我的消息模型中，我有

```
belongs_to  :to,
    :class_name => 'User',
    :foreign_key => :to_id

validates :content, presence: true, length: { maximum: 1000 }
validates :user_id, :to_id, presence: true 
```

奇怪的是，第一次创建用户并导航到他们的节目资料时，

他们已经收到此错误

```
The form contains 2 errors.
* Content can't be blank
* To can't be blank 
```

一旦我刷新页面，它们就会消失。并且表单功能正常。我似乎无法弄清楚出了什么问题。表单是否已经尝试自行自动提交？

在我的消息#create action 我有

```
def create
    @message = current_user.messages.build
    @message.to_id = params[:message][:to_id]
    @message.user_id = current_user.id
    @message.content = params[:message][:content]
    if @message.save
        flash[:success ] = "Private Message Sent"
    end
        redirect_to user_path(params[:message][:to_id])
end 
```

如果这能说明问题的话。我手动分配@msessage 属性，因为我不想让：user_id attr_accessible。

但是，为什么第一次访问页面时验证已经失败？我不提交。一旦我离开页面并返回它，错误就不会再发生了。

这是我的用户#show action

```
 def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
    @current_user = current_user
    if user_signed_in?
        @message = current_user.messages.build(params[:messages], to_id: @user.id)
    end
    @influence = current_user.points
    @badge_items = current_user.badges.to_a.map(&:name)
  end 
```

它与我的表演动作有关系吗？具体来说

```
@message = current_user.messages.build(params[:messages], to_id: @user.id) 
```

那是调用创建吗？

帮助将不胜感激。谢谢你！

更新。我修好了它！

代替...

@message = current_user.messages.build(params[:messages], to_id: @user.id)

我已经做了

@message = current_user.messages.build

我猜这个问题更多的是......它正在寻找消息值和用户ID，还没有通过。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:12:39.890

是的，

```
@message = current_user.messages.build(params[:messages], to_id: @user.id) 
```

正在尝试创建一个`Message`对象。

这是 Rails 指南的链接，该指南`has_many`描述了如何`messages.build`建立新记录的细节。

[http://guides.rubyonrails.org/association_basics.html#has_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)

# javascript - 通过 map reduce 进行 MongoDB 唯一值聚合

> ID：10467963
> 
> 赞同：4
> 
> 时间：2012-05-06T03:56:53.397
> 
> 标签：javascript, mongodb, mapreduce, mongodb-query

我看到很多关于 MongoDB 中聚合的问题，但是，我还没有找到一个完整的解决方案。

这是我的数据示例：

```
{
    "fruits" : {
        "apple" : "red",
        "orange" : "orange",
        "plum" : "purple"
    }
}
{
    "fruits" : {
        "apple" : "green",
        "plum" : "purple"
    }
}
{
    "fruits" : {
        "apple" : "red",
        "orange" : "yellow",
        "plum" : "purple"
    }
} 
```

现在，我的目标是确定每种水果的每种颜色的受欢迎程度，因此输出集合如下所示：

```
{
    "_id" : "apple"
    "values" : {
        "red" : 2,
        "green" : 1
    }
}
{
    "_id" : "orange"
    "values" : {
        "orange" : 1,
        "yellow" : 1
    }
}
{
    "_id" : "plum"
    "values" : {
        "purple" : 3
    }
} 
```

我尝试了各种 M/R 功能，最终它们要么不起作用，要么花费成倍的时间。在示例（水果）的上下文中，我在大约 10,000,000 个文档中拥有大约 1,000 种不同的水果和 100,000 种颜色。我目前的工作 M/R 是这样的：

```
map = function() {
    if (!this.fruits) return;
    for (var fruit in this.fruits) {
        emit(fruit, {
            val_array: [
                {value: this.fruits[fruit], count: 1}
            ]
        });
    }
};

reduce = function(key, values) {
    var collection = {
        val_array: []
    };
    var found = false;
    values.forEach(function(map_obj) {
        map_obj.val_array.forEach(function(value_obj) {
            found = false;
            // if exists in collection, inc, else add
            collection.val_array.forEach(function(coll_obj) {
                if (coll_obj.value == value_obj.value) {
                    // the collection already has this object, increment it
                    coll_obj.count += value_obj.count;
                    found = true;
                    return;
                }
            });
            if (!found) {
                // the collection doesn't have this obj yet, push it
                collection.val_array.push(value_obj);
            }
        });
    });
    return collection;
}; 
```

现在，这确实有效，对于 100 条记录，只需要一秒钟左右，但时间非线性增加，因此 100M 条记录需要*很*长时间。问题是我在reduce函数中使用数组进行了一个穷人子聚合`collection`，因此需要我遍历`collection`map函数中的值和值。现在我只需要弄清楚如何有效地做到这一点（即使它需要多次减少）。欢迎任何建议！

* * *

**编辑**由于缺少更好的发布位置，这是我的解决方案。

* * *

首先，我创建了一个名为`mr.js`：

```
map = function() {
    if (!this.fruits) return;
    var skip_fruits = {
        'Watermelon':1,
        'Grapefruit':1,
        'Tomato':1 // yes, a tomato is a fruit
    }
    for (var fruit in this.fruits) {
        if (skip_fruits[fruit]) continue;
        var obj = {};
        obj[this.fruits[fruit]] = 1;
        emit(fruit, obj);
    }
};

reduce = function(key, values) {
    var out_values = {};
    values.forEach(function(v) {
        for(var k in v) { // iterate values
            if (!out_values[k]) {
                out_values[k] = v[k]; // init missing counter
            } else {
                out_values[k] += v[k];
            }
        }
    });
    return out_values;
};

var in_coll = "fruit_repo";
var out_coll = "fruit_agg_so";
var total_docs = db[in_coll].count();
var page_size = 100000;
var pages = Math.floor(total_docs / page_size);
print('Starting incremental MR job with '+pages+' pages');
db[out_coll].drop();
for (var i=0; i<pages; i++) {
    var skip = page_size * i;
    print("Calculating page limits for "+skip+" - "+(skip+page_size-1)+"...");
    var start_date = db[in_coll].find({},{date:1}).sort({date:1}).skip(skip).limit(1)[0].date;
    var end_date = db[in_coll].find({},{date:1}).sort({date:1}).skip(skip+page_size-1).limit(1)[0].date;
    var mr_command = {
        mapreduce: in_coll,
        map: map,
        reduce: reduce,
        out: {reduce: out_coll},
        sort: {date: 1},
        query: {
            date: {
                $gte: start_date,
                $lt: end_date
            }
        },
        limit: (page_size - 1)
    };
    print("Running mapreduce for "+skip+" - "+(skip+page_size-1));
    db[in_coll].runCommand(mr_command);
} 
```

该文件遍历我的整个集合，一次增量地映射/减少 100k 文档（按`date`必须有索引的排序！），并将它们减少到单个输出集合中。它是这样使用的：`mongo db_name mr.js`.

然后，几个小时后，我收集了一个包含所有信息的集合。为了找出颜色最多的水果，我使用 mongo shell 中的这个来打印前 25 个：

```
// Show number of number of possible values per key
var keys = [];
for (var c = db.fruit_agg_so.find(); c.hasNext();) {
    var obj = c.next();
    if (!obj.value) break;
    var len=0;for(var l in obj.value){len++;}
    keys.push({key: obj['_id'], value: len});
}
keys.sort(function(a, b){
    if (a.value == b.value) return 0;
    return (a.value > b.value)? -1: 1;
});
for (var i=0; i<20; i++) {
    print(keys[i].key+':'+keys[i].value);
} 
```

这种方法真正酷的地方在于，由于它是增量的，我可以在 mapreduce 运行时处理输出数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T04:06:08.947

看来你真的不需要`val_array`。为什么不使用简单的哈希？尝试这个：

```
map = function() {
    if (!this.fruits) return;
    for (var fruit in this.fruits) {
        emit(fruit, 
             {this.fruits[fruit]: 1});
    }
};

reduce = function(key, values) {
  var colors = {};

  values.forEach(function(v) {
    for(var k in v) { // iterate colors
      if(!colors[k]) // init missing counter
        colors[k] = 0

      color[k] += v[k];
    }
  });

  return colors;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:23:02.760

很抱歉告诉你这个，但是 MongoDB MapReduce 框架非常慢，并且可能会在“相当长一段时间内”继续如此（我不希望他们的路线图有所改进）。

简单地说，我的回答是我不会用 Mongo-MapReduce 来做，而是专注于在新聚合框架的帮助下实现它：http: [//docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

或在顶部运行 Hadoop： [http](http://www.slideshare.net/spf13/mongodb-and-hadoop) ://www.slideshare.net/spf13/mongodb-and-hadoop （很好和简单的介绍）

在使用实现的 MapReduce 功能时，我也遇到了 MongoDB 运行缓慢的问题，我的结论是，即使在执行最简单的任务时，它在性能方面甚至都无法接近上述两种解决方案。您可以使用新的聚合框架在商用硬件上轻松处理 >1M 文档/秒（甚至更多）。

# sql - 如何删除某个系统存储过程？

> ID：10467964
> 
> 赞同：1
> 
> 时间：2012-05-06T03:57:13.147
> 
> 标签：sql, sql-server-2008

使用 Microsoft SQL Server 2008，如何删除系统存储过程？

我正在寻找删除或禁用以下系统程序`xp_regwrite`和`xp_regdeletevalue`

我知道如何在 SQL Server 2000 中删除这些，但找不到有关如何在 SQL Server 2008 中删除它们的文档。

问题是，我怎么能

1.  删除它们，或
2.  禁用他们两个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:06:25.237

我决定回到 2005 年来解决这个问题，撤销权限对我的情况没有帮助，而且我不愿意删除我将来很可能需要的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:00:27.427

我不一定建议在没有适当考虑的情况下删除任何系统存储过程......但我认为这在你的情况下不是问题。

只需进入 SSMS GUI、数据库、系统数据库、主控、可编程性、系统扩展存储过程，选择这些过程并删除它们。

更好的方法可能是撤销“公共”执行权限。

# html - Web 数据提取，从表格中获取数据到 CSV

> ID：10467965
> 
> 赞同：1
> 
> 时间：2012-05-06T03:57:22.290
> 
> 标签：html, web-scraping, html-table, data-extraction, web-scripting

我想从网页中的表格中获取数据，这些表格似乎是使用“Excel Publish as Web Page Wizard”发布的。我知道有很多抓取工具（对于这样的任务来说似乎很先进）并且知道我可以编写一个脚本，但我想指出一些非常简单的东西，特别是数据是使用自动化发布的工具。

我更喜欢使用 Rails 解决方案。

数据是统计健康数据，[这里是一些样本的链接](http://www.cbssyr.org/yearbook/2011/chapter12-AR.htm)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:41:14.357

是的，结构非常简单。在您的位置上，我只会使用您知道的任何语言，并且不会花时间学习第三方刮板。就个人而言，我使用 C# 来完成此类任务。

# php - 更改表模式 cakephp

> ID：10467969
> 
> 赞同：0
> 
> 时间：2012-05-06T03:58:32.897
> 
> 标签：php, cakephp, cakephp-1.3, database-schema

如何在 CakePHP 中更改我的一个数据库表的架构？新架构将包括将添加到我的表中的新列以及一些列名更改。我试着用

```
cake schema update <mytable> 
```

但我总是收到这个错误：

```
Warning: <span style="color:Red;text-align:left"><b>SQL Error:</b> 1060: Duplicate column name 'contact_id'</span> in C:\wamp\www\tests\cake\libs\model\datasources\dbo_source.php on line 684 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:15:43.390

你没有说你使用的是哪个数据库，所以我假设它是 MySQL。

当我想更改表（添加或删除列）时，我使用**MySQL Query Browser**进行操作，这是一个桌面应用程序，具有易于使用的 GUI 用于表编辑。如果由于某种原因您不能使用它，也许您的托管服务提供了一个像**phpMyAdmin**这样的 Web 应用程序，它还允许您编辑表格而无需了解太多 SQL。

一旦您的表具有您想要的模式，如果 CakePHP 似乎没有意识到表已更改，请转到该`app/tmp/cache`文件夹​​并删除那里的 3 个子文件夹的内容（但不是子文件夹本身，因为这有时会导致问题）。

显然，如果您的代码包含对不再存在的列的引用，您将不得不对其进行编辑。否则一切都应该正常工作。

# c - 在 C 中包含头文件并编译

> ID：10467970
> 
> 赞同：5
> 
> 时间：2012-05-06T03:58:32.880
> 
> 标签：c, netbeans, include, shared-libraries, snort

[我正在使用一个名为snort](http://www.snort.org)的开源项目，它是在 Linux 下用 C 语言编写的。我在 netbeans 中正确打开了项目，现在我将对此源代码进行一些更改。程序的 src 文件夹包含几个文件夹，并且每个文件夹都有一些文件夹。听说netbeans可以生成make文件。我正在对文件夹 XFolder 中的 src 文件进行一些更改，并希望在我的项目（YFolder）的另一个文件夹中使用库函数。我包含了 .h 文件并正确使用了该功能。

```
#include"../YFolder/lib.h" 
```

现在当我可以编译程序时，没关系，但是当我使用在make过程中创建的动态库“.so（共享对象文件）”时；并运行程序，我看到一个错误，这意味着我从其他文件夹中使用的函数未定义并看到此错误；（sfxhash_new 是我调用的外部函数的名称）。

> libsf_sip_preproc.so：未定义符号：sfxhash_new

我还编辑了 Makefile.am 并添加了该包的源代码（`../YFolder/lib.c and lib.h`）；但没有效果。任何人都可以帮助我吗？

编辑：

我在文件夹 src/dynamic-preprocessor/sip 我想在文件中使用一个函数：src/sfutil/sfxHash.c 函数名称是 sfxhash_new(... ... ...) 我正确地包含了 sfxHash.h。我在 Makefile.am 中做了一些更改，但主要的 makefile 是这个。

我的 Makefile.am 文件：

```
## $Id
AUTOMAKE_OPTIONS=foreign no-dependencies

INCLUDES = -I../include -I${srcdir}/../libs -I$(srcdir)/includes

libdir = ${exec_prefix}/lib/snort_dynamicpreprocessor

lib_LTLIBRARIES = libsf_sip_preproc.la

libsf_sip_preproc_la_LDFLAGS = -shared -export-dynamic -module @XCCFLAGS@
if SO_WITH_STATIC_LIB
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.la
else
nodist_libsf_sip_preproc_la_SOURCES = \
../include/sf_dynamic_preproc_lib.c \
../include/sf_ip.c \

endif

libsf_sip_preproc_la_SOURCES = \
spp_sip.c \
spp_sip.h \
sip_config.c \
sip_config.h \
sip_parser.c \
sip_parser.h \
sip_dialog.c \
sip_dialog.h \
sip_roptions.c \
sip_roptions.h \
sip_utils.c \
sip_utils.h \
sip_debug.h \
../include/sfxhash.c \   -----------------> I have copied src files in this dictionary
../include/sfxhash.h     ------------------>

EXTRA_DIST = \
sf_sip.dsp

all-local: $(LTLIBRARIES)
    $(MAKE) DESTDIR=`pwd`/../build install-libLTLIBRARIES 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:00:21.633

在`Makefile.am`文件中进行更改后，更改不会立即反映（即，如果您运行并且`configure`您`make`将看不到更改）。您应该首先生成/更新相应的`Makefile.in`文件。为此，您需要`automake`在源树的最顶层目录中运行命令（其中`configure.in`或`configure.ac`驻留）。为确保`Makefile.am`包含新源的更改将成功反映在构建中，`libsf_sip_preproc_la_SOURCES`请`Makefile.am`检查`Makefile.in`. 现在，运行`configure`和`make`命令。
请注意，将文件从源树中的一个位置添加到另一个位置可能会带来其自己的一组依赖项，即`sfxhash`源文件可能包含文件和链接到不作为`Makefile.am`问题的一部分的库，在这种情况下，您可能必须更新`INCLUDES`以包含源所需的目录和/或在`libsf_sip_preproc_la_LIBADD`. 避免在. `.la`_ 希望这可以帮助！`.a``libsf_sip_preproc_la_LIBADD`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:08:56.533

正如你所写：

```
libsf_sip_preproc_la_LDFLAGS = -shared -export-dynamic -module @XCCFLAGS@
if SO_WITH_STATIC_LIB
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.la
else
nodist_libsf_sip_preproc_la_SOURCES = \
../include/sf_dynamic_preproc_lib.c \
../include/sf_ip.c \

endif 
```

如果 SO_WITH_STATIC_LIB 为真，我认为这一行：

```
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.la 
```

应该

```
libsf_sip_preproc_la_LIBADD = ../libsf_dynamic_preproc.a 
```

这是我的想法，你可以试试。

# php - 无法将 Facebook API 数据添加到数据库 - 不会 $.post name, email

> ID：10467971
> 
> 赞同：0
> 
> 时间：2012-05-06T03:58:45.110
> 
> 标签：php, mysql, database, facebook, facebook-apps

我已经为此苦苦挣扎了好几个小时...

我的网站上有一个使用 Facebook 登录按钮，我正在尝试将经过身份验证的用户数据添加到数据库中。希望也许一双新的眼睛能发现我的错误，所以这就是我所拥有的。

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId   : 'MY APP ID',
        oauth   : true,
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true // parse XFBML
    });

  };

function fb_login(){
    FB.login(function(response) {

        if (response.authResponse) {
            console.log('Welcome!  Fetching your information.... ');
            //console.log(response); // dump complete info
            access_token = response.authResponse.accessToken; //get access token
            user_id = response.authResponse.userID; //get FB UID

            FB.api('/me', function(response) {
                 $.post("addtodb.php", {name: response.name})
            });

            window.location.href = "next.php"; //redirect once authorized

            FB.api('/me/devlogintest:join', 'action', 
            { object : 'http://www.mysite.com' });

        } else {
            //user hit cancel button
            console.log('User cancelled login or did not fully authorize.');

        }
    }, {
        scope: 'email,publish_actions'
    }
    );
}
(function() {
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
}());
</script> 
```

addtodb.php 脚本...

```
<?php

include('config.php');
$fbname = $_POST['name'];

if(!empty($_POST)){ //won't submit blanks if no data

// Make a MySQL Connection
mysql_connect($Host,$Username,$Password) or die(mysql_error());
mysql_select_db($Database) or die(mysql_error());

// Insert rows
mysql_query("INSERT INTO fbusers 
(name) VALUES('$fbname') ") 
or die(mysql_error());  
}
?> 
```

我似乎无法让用户的姓名发布并添加到数据库中。如果我在 javascript 上使用警报，它会弹出正确的信息。当我启用错误检查时，php 脚本端似乎也没有任何错误。

Jquery 调用包含在 head 标签中。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:17:13.497

代码中的主要问题之一是在运行异步代码之后使用重定向......`FB.api`并`$.post`以异步方式工作，因此重定向`next.php`可能在`FB.api`返回数据和/或`$.post`提交数据到服务器之前发生。

正如评论中所说，将发出未定义`$results = mysql_query($query) or die("Error: " . mysql_error());`的警告并导致空查询。`$query`如果调用了脚本（可能没有），您应该在日志中看到该警告（启用错误报告）。

尝试在回调函数中移动重定向代码，`$.post`这样它就会等到您的脚本收到数据。

# android - 如何从 JSON 响应中制作动态 TableLayout？

> ID：10467972
> 
> 赞同：0
> 
> 时间：2012-05-06T03:59:18.963
> 
> 标签：android, json, android-layout, android-tablelayout

我将举一个独立应用程序的示例，概念是使用 a`TableLayout`并且数据将来自网络服务器（以 JSON 格式）。里面会有字符串、图像`RadioButton`和 CheckBox`。有关更多详细信息，请参见图片：

![在此处输入图像描述](../Images/6973daa4bcca5b576e5567c4f56d8718.png)

和：

![在此处输入图像描述](../Images/0d53e6e33dd8dfa107143abd4e24869f.png)

我怎样才能动态地做到这一点？

# objective-c - 方法的+实现是什么？

> ID：10467973
> 
> 赞同：-1
> 
> 时间：2012-05-06T03:59:24.767
> 
> 标签：objective-c, methods

> **可能重复：**
> [Objective C 中方法旁边的加号和减号是什么意思？](https://stackoverflow.com/questions/2097294/what-do-the-plus-and-minus-signs-mean-in-objective-c-next-to-a-method)

自从我开始使用 Objective C 编程以来，我一直在实现这样的方法：

```
-(void)doSomething 
```

最近，我在一段源代码中看到了这一点：

```
+(void)doSomething 
```

+和-之间有什么区别，+是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T04:00:36.957

以 + 开头的方法是类方法；也就是说，它们不是在实际对象（类的实例）上调用，而是在类本身上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:25:51.097

返回类型前带有“+”的方法表示存在这样的静态方法（它存在而不实例化该类的对象）。带有“-”的方法与单个对象相关。

# ocaml - 在多个目录中构建 OCaml 项目

> ID：10467974
> 
> 赞同：5
> 
> 时间：2012-05-06T03:59:50.360
> 
> 标签：ocaml

我有一个中型 OCaml 项目（13K 行，85 个源文件），它是使用 OCamlMakefile 构建的，但它的 OCamlMakefile 稍微有点大：本能地，我宁愿将它拆分为三个或四个目录并将这些文件构建为库，尤其是整个项目的某些部分本身应该是不同的项目。

在 2012 年，推荐这样做的方法是什么？OCamlMakefile 强加了许多简化，这些简化阻碍了在大多数其他编程环境中被视为传统代码组织的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:11:41.807

我的[项目](https://github.com/alavrik/piqi)中遇到了完全相同的问题。我最终使用了 OCamlMakefile ( `make libinstall`) 和 ocamlfind的组合，`OCAMLFIND_DESTDIR`以及`OCAMLPATH`指向公共本地构建目录的变量。

这是一种非常灵活的方法。例如，我使用一个额外的[简单脚本](https://github.com/alavrik/piqi/blob/dev/make/piqi-fix-libinstall)通过合并它们各自的`META`文件将多个库合并为一个。

# asp.net - 如何在 asp.net Web 表单中动态创建/编辑/删除 SQL Server 表？

> ID：10467976
> 
> 赞同：0
> 
> 时间：2012-05-06T04:00:01.927
> 
> 标签：asp.net, dynamic, sql-server-2005, insert-update

我正在使用 VS 2008`(asp.net with c#)`和`SQL Server 2005`....

**主题表：**

```
create table subject
(subid varchar(10),
subname varchar(20)) 
```

样本数据：

```
subid           subname

1               subject1
2               subject2
3               subject3 
```

=> 它包括每行中所有主题的详细信息，例如：

**结果表：** Sampledata

```
studentid     subid        subname             marks

1             1            subject1            12
1             2            subject2            23
1             3            subject3            22
1             4            subject4            20 
```

我想要这样的东西：

```
studentid     subject1    subject2    subject3    subject4

1             12          23          22           20

2

3 
```

所以，我想用它来展示每个主题`marks in column wise`......

如果我创建一个静态表，例如...

```
create table subject    
(subject1 varchar(20),
 subject2 varchar(20),
 subject3 varchar(20)) 
```

**注意**：那么这是不可能的，因为每个学期的科目可能会发生变化（在科目表中）。这就是我想在 ASP.NET Web 表单中动态创建/编辑/删除表的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:15:44.290

有几件事。首先，在*结果*表中，主题名称不是必需的，实际上是对数据库进行反规范化。应该是这样的：

```
studentid     subid        marks

1             1            12
1             2            23
1             3            22
1             4            20 
```

现在，要查询：

```
SELECT s.subjname, r.studentid, r.marks
FROM subject s
    INNER JOIN result r on s.subid = r.subid 
```

要获得您想要的表格，列出每个学生的分数，请使用如下所示的数据透视查询：

```
SELECT studentid, 
[Subject1], [Subject2], [Subject3], [Subject4]
FROM
(SELECT s.subjname, r.studentid, r.marks
    FROM subject s
        INNER JOIN result r on s.subid = r.subid
) AS SourceTable
PIVOT
(
AVG(marks)
FOR subjname IN ([Subject1], [Subject2], [Subject3], [Subject4])
) AS PivotTable; 
```

您可以根据需要使数据透视查询动态化。无需即时构建动态表。

# html - GAE 模板将表单呈现为 html 文本而不是表单

> ID：10467980
> 
> 赞同：0
> 
> 时间：2012-05-06T04:00:21.327
> 
> 标签：html, google-app-engine, templates

我正在研究 GoogleAppEngine 事件示例，我正在尝试构建一个可以输入事件数据的表单

```
from google.appengine.ext.db import djangoforms

class Event(db.Model):
    title = db.StringProperty(required=True)
    description = db.TextProperty()
    time = db.DateTimeProperty()
    location = db.TextProperty()
    creator = db.UserProperty()

class EventForm(djangoforms.ModelForm):
    class Meta:
        model = Event

class EventsPage(webapp.RequestHandler):
    def get(self):
        eventform = EventForm()

        if users.get_current_user():
            url = users.create_logout_url(self.request.uri)
            url_linktext = 'Logout'
        else:
            url = users.create_login_url(self.request.uri)
            url_linktext = 'Login'

        template_values = {
            'events': events,
            'eventform': eventform,
            'url': url,
            'url_linktext': url_linktext,
        }

        template = jinja_environment.get_template('events.html')
        self.response.out.write(template.render(template_values))

----events.html----
<html>
 <head>
  <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
 </head>
 <body>
 {% for event in events %}
   <blockquote>{{ event.content|escape }}</blockquote>
 {% endfor %}
 <form action="/newevent" method="post">
  <!--  Even though <table> is below, event form is not put inside <table>.  Why?? -->
  <table>
    {{ eventform|escape }}
  </table>
  <div><input type="submit" value="New Event"></div>
 </form>
 <a href="{{ url }}">{{ url_linktext }}</a>
</body>
</html> 
```

当我运行我的代码时，以下内容在我的页面上呈现为文本：

`<tr><th><label for="id_title">Title:</label></th><td><input type="text" name="title" id="id_title" /></td></tr> <tr><th><label for="id_description">Description:</label></th><td><textarea id="id_description" rows="10" cols="40" name="description"></textarea></td></tr> <tr><th><label for="id_time">Time:</label></th><td><input type="text" name="time" id="id_time" /></td></tr> <tr><th><label for="id_location">Location:</label></th><td><textarea id="id_location" rows="10" cols="40" name="location"></textarea></td></tr> <tr><th><label for="id_creator">Creator:</label></th><td><input type="text" name="creator" id="id_creator" /></td></tr>`

我可以说这是表格代码，我希望页面呈现为表格形式，而不是文本。任何想法为什么会发生这种情况？以及如何使其呈现为表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:28:52.060

我对 Jinja 不太熟悉，根据 Jinja2 文档，默认情况下它似乎会转义所有 HTML。

通过查看您上面的模板，我看到您在“eventform”上使用了“escape”过滤器，我无法找到有关 Jinja 的此类过滤器的信息。此外，如果您希望将表单呈现为 HTML 表单，那么我们为什么需要转义它呢？

{{ 事件形式|转义 }}

[http://jinja.pocoo.org/docs/api/#autoescaping](http://jinja.pocoo.org/docs/api/#autoescaping)

# r - 使用 ggplots 修改极坐标图或使用 R 的其他替代包

> ID：10467988
> 
> 赞同：3
> 
> 时间：2012-05-06T04:01:56.967
> 
> 标签：r, ggplot2, polar-coordinates

我正在尝试使用以下数据创建漂亮的（！）极坐标图。

```
gr1 <- c(0, 5, 15, 20, 30, 40)
gr3 <- c(0, 5, 10, 25, 40, 60, 80)
gr2 <- c(0, 15, 25, 30, 40)

df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr1)), rep(2, length(gr1))))

inner circle segment to mark
                   first tier, group 1, between 15, 20
                               group 3, between 5, 10
                                        between  40 to 60 
                   second tier, group 1, between 15, 20
                               group 3, between 5, 10
                                        between 10, 25
                                        between  40 to 60 
```

两个位置之间的间隔两条线之间的角度。

我的真实数据中有两层以上要绘制。

标记可能是段或其他标记，例如填充颜色。

如果可能，可以对不同的组进行颜色编码。

![在此处输入图像描述](../Images/c97916fe25258335add744cc6dbc7191.png)

带圆形标记的替代方案（首选）

![在此处输入图像描述](../Images/2223db959fd9d58e378480fa35c5b2e1.png)

我用ggplot2试过了。

```
cx <- ggplot(df2, aes(x = pos, group = group) +   geom_bar(width = 1, colour = "black"))
Error in aes(x = pos, group = group) + geom_bar(width = 1, colour = "black") :
  non-numeric argument to binary operator
cx + coord_polar() 
```

更多试验：

```
df2$cpos <- cumsum (df2$pos)
cx <- ggplot(df2, aes(x = cpos, group = group) +   geom_bar(width = 1, colour = "black")) 
```

编辑1：

我想我可能很难解释这个问题。这是带有解释的图。 ![在此处输入图像描述](../Images/1eb1789e6d327eb6660004b32687258a.png)

pos（位置）是一个连续的刻度，极坐标的角度应该取决于位置值的位置。一组完成后它将重新启动。我做了一个技巧来完成这个技巧（我可能错了）。

编辑2：

以下答案为这个问题开启了更多思考。这是改进的版本，但颜色管理不起作用。

```
df2$cpos <- cumsum (df2$pos)
df2$y <- rep(3, length (df2$cpos))
cx <- ggplot(df2, aes(y = y, x = cpos))
cx + geom_bar(aes(stat = "identity",fill="yellow", colour = "yellow" )) + 
geom_point(aes(color = factor(group)), pch = 18, size = 2) + coord_polar() +
 scale_fill_manual(values=c("#CC6666", "#9999CC", "#66CC99"))+ ylim(0,3) 
```

![在此处输入图像描述](../Images/480bf63c608b2c334a65e577fc144007.png)

当我尝试设置 ylim (2,3) 以使它们看起来像不能正常工作的段时。

```
Error in data$y[data$y == -Inf] <- range$y.range[1] : 
  replacement has length zero 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T11:52:08.700

我很难理解你想做什么（条形图计算频率，你可能知道）。但是，这是一种将组分配为颜色的方法：

```
gr1 <- c(0, 5, 15, 20, 30, 40)
gr3 <- c(0, 5, 10, 25, 40, 60, 80)
gr2 <- c(0, 15, 25, 30, 40)

df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr2)), rep(3, length(gr3))))
df2$cpos <- cumsum (df2$pos)

cx <- ggplot(df2, aes(fill = factor(group), x = cpos))

cx + geom_bar(width = 1, colour = "black", position = "dodge")  + coord_polar() 
```

![在此处输入图像描述](../Images/7319bfc445948d0bc2b16d397695e9e9.png)

如果您想获取 pos 作为频率，请`melt()`使用`reshape2`.

如果您想像示例中那样使用点，那么以下方法可以工作吗？

```
cx <- ggplot(df2, aes(y = group, x = cpos))

cx + geom_point(aes(color = factor(group))) + coord_polar() + ylim(0,3) 
```

无论如何，你看到模式了吗？使用 x 轴作为角度，y 轴作为与中间的距离，使用法线坐标绘制图，然后将其转换为极坐标。

![在此处输入图像描述](../Images/e4ba7f234f4412a23c6dfb1f94d6e2e8.png)

**回答编辑2**

我仍然想知道你是否可以制作一个更有意义的情节，但也许你有理由这样做。这是一个更接近您的示例的图。它并不完美。也许大师们明天到达办公室后会给你一个更好的建议。同时，您可以[从该胎面的链接中](https://stackoverflow.com/questions/2258784/list-of-ggplot2-options)查找更多规格。

```
library(ggplot2)

gr1 <- c(0, 5, 15, 20, 30, 40)
gr3 <- c(0, 5, 10, 25, 40, 60, 80)
gr2 <- c(0, 15, 25, 30, 40)

df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr2)), rep(3, length(gr3))), y  = c(rep(1, length(gr1)),
 rep(2, length(gr1)), rep(2, length(gr1))))

df2$cpos <- cumsum (df2$pos)

cx <- ggplot(df2, aes(y = y, x = cpos))
cx + geom_point(aes(color = factor(group)), size = 4) + geom_line(aes(x = c(0,500), y = c(1)), color = "yellow") + 
geom_line(aes(x = c(0,500), y = c(2)), color = "blue") + scale_y_continuous(limits=c(0,2), breaks = c(0,1,2)) +
scale_x_continuous(labels = df2$pos, breaks = df2$cpos, limits = c(0,500)) + coord_polar() +
opts(panel.grid.major = theme_line(colour = "grey"), 
panel.grid.minor = theme_line(colour = "grey", linetype = "dashed"), 
panel.background = theme_rect(colour = "white")) 
```

![在此处输入图像描述](../Images/ebec03e2efa3c0f71e107adfab0d8814.png)

# sql - 加入 Table On Social 一个带连字符，另一个不带

> ID：10467990
> 
> 赞同：0
> 
> 时间：2012-05-06T04:02:23.173
> 
> 标签：sql, join, db2

我正在尝试在两个表上执行连接。一张表包含员工信息，另一张表包含他们的学位信息。雇员表中 SSN 的数据类型是 varchar 并包含连字符。但是，度表中 SSN 的数据类型是整数，不包含任何连字符。我需要使用 SSN 来链接这两个表。如何使用此设置完成加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:31:21.723

我认为最好的解决方案是将字符串转换为整数：

```
select <whatever>
from employee e join
     degree d
     on e.ssn = cast(replace(d.ssn, '-', '') as int) 
```

请注意，键上的转换可能意味着不会使用索引。您可能应该将其中一个或另一个的数据类型更改为一致的格式。

# autocomplete - Rich Faces 的 4.0 自动完成组件大小不合适

> ID：10467993
> 
> 赞同：1
> 
> 时间：2012-05-06T04:02:57.283
> 
> 标签：autocomplete, richfaces, jquery-autocomplete

我有一个自动完成组件，但它不像我想要的那样适合。

我希望弹出宽度适合输入字段，大小相同......我尝试了很多属性但没有成功。

**这可能是一个限制吗？**

![在此处输入图像描述](../Images/14235d31f6296ddc6599d625b8271a6d.png)

看到，弹出小于原始输入字段。我需要做什么？

```
.inputPesquisa {
width: 77%;
} 
```

...

```
<div class="pesquisa">
        <rich:autocomplete value="#{pesquisarBean.pesquisa}" styleClass="inputPesquisa"
            autocompleteList="#{bean.todos}" minChars="4" mode="client" layout="div">
            <div>ata</div>
        </rich:autocomplete>
        <a4j:commandButton value="Pesquisar" render="out, scroller"
            styleClass="botaoPesquisa" execute="@form"
            actionListener="#{pesquisarBean.processAction}" />
            <rich:messages showDetail="false" ></rich:messages>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:48:27.090

我刚刚遇到你的问题，虽然它有点老了。

如果要更改文本框输入属性，请创建以下 CSS 样式：

```
.inputPesquisa .rf-au-inp {
    width: 350px;
} 
```

我尝试使用所有样式树创建样式并且这有效（适用于所有自动完成组件）：

```
.rf-au-lst-cord .rf-au-shdw .rf-au-lst-dcrtn .rf-au-lst-scrl {
    max-height: 300px; /* Bigger than this shows scroller */
    width: 100%; /* This is enough to make all the autocomplete lists look nice */
} 
```

但是当我尝试添加组件的类时

```
.inputPesquisa .rf-au-lst-cord .rf-au-shdw .rf-au-lst-dcrtn .rf-au-lst-scrl {
    max-height: 300px;
    width: 100%;
} 
```

它不再起作用了。也许是打开 Jira 的情况。所以，切入正题并将其包含在您的 CSS 中：

```
.rf-au-lst-dcrtn .rf-au-lst-scrl {
    max-height: 300px;
    width: 100%;
} 
```

# ios - 自动旋转横向/纵向视图

> ID：10467995
> 
> 赞同：0
> 
> 时间：2012-05-06T04:03:58.060
> 
> 标签：ios, image, orientation, autorotate

我正在处理一个画廊，我想根据图片方向自动旋转视图。例如，两张照片：

*   1200w x 800h 像素
*   550w x 800h 像素

现在要确定哪个是**肖像**，我只需要检查一下`if height > width`？这是唯一的方法吗？有人可以提出更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:35:43.143

您确定图像是否为纵向的技术看起来既好又简单。你有什么理由不愿意使用这种方法吗？很难想出更合乎逻辑的解决方案。

顺便说一句，如果图片的方向与屏幕不同，我不会旋转视图，在我的画廊中，如果我的图像的高宽比接近当前视图的纵横比，我个人默认为“纵横比填充”（我认为我的阈值是 10%），否则我使用“aspect fit”（我还为他们提供了一个用户界面，用于在 aspect fit 和 aspect fill 之间切换，或者更好的是你可以提供捏缩放）。如果用户想要旋转设备以改变方向以最大化体验，他们可以，但我个人不喜欢强迫他们这样做，除非有一些非常令人信服的事情（即应用程序不能这样做） t 可能在另一个方向起作用）。

# rdlc - 如何在 rdlc 报告中的特定行（假设 25 行）后分页

> ID：10467997
> 
> 赞同：13
> 
> 时间：2012-05-06T04:04:13.563
> 
> 标签：rdlc, dynamic-rdlc-generation

如何在 rdlc 报告中的特定行（如 15 行）之后分页。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-12T09:25:57.340

这很容易。假设我的报告看起来像

![在此处输入图像描述](../Images/ddfb1da1eea90c996c71190922bb5bbf.png)

启用高级模式

![在此处输入图像描述](../Images/08f07c0eece1abfcd65c4881339266c5.png)

为分页添加组

![在此处输入图像描述](../Images/dd71747056cd6f3ceacd79391b80746a.png)

在组表达式中定义你想要的行数（在这种情况下我想要 15 行）

![在此处输入图像描述](../Images/41560f96c83f2f31cbc0d22a24cd621a.png)

如果不需要，请删除组列

![在此处输入图像描述](../Images/0d9b066a341a62d84815c33938215469.png) ![在此处输入图像描述](../Images/f12b744c5db4df1f6e194227f07d92d3.png)

从组详细信息中删除表达式

![在此处输入图像描述](../Images/0ba605fd25fb6093e37f0e4b5dbd3bac.png) ![在此处输入图像描述](../Images/0c655c3e3546ce9fe0b72c76a5832fd6.png)

选择 Group Properties 并设置分页符属性 breakLocation 为 End，Disables 为 false，RestPageNumber 为 fasle。

![在此处输入图像描述](../Images/1d292c71c56a6c3b9549e449abe1c7bb.png)

选择组详细信息属性并设置 Disable=true

![在此处输入图像描述](../Images/406093fb1ac14269623712699dd34b5f.png)

现在这是特定行后带有分页符的报告

![在此处输入图像描述](../Images/76c4024488a60cf59505e1ba12dcd2a6.png) ![在此处输入图像描述](../Images/c730d015ac7a4dc38acecb1fbe9b9fae.png)

如果您想在每个页面中保留表头，[请单击此处](https://stackoverflow.com/questions/5469292/how-to-show-headers-in-each-page-of-the-report-in-microsoft-report-viewer/10296502#10296502)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T05:48:12.240

您可以将行组添加到 Tablix。然后在行组属性中选择分页符部分并设置“在组的每个实例之间”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T21:02:05.523

我所做的是在您的对象上创建另一个属性，称为 lineBreak 或其他东西。加载对象时，确保每 25 个具有相同的数字并以 1 递增。然后在表中将一个组放在详细信息上，在 lineBreak 上分组。然后在该组中添加一个额外的行，然后每 25 行应该是一个空行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-13T11:07:32.210

也许你可以使用带分页符的矩形，矩形能够定义一个固定的高度