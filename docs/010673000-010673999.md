# StackOverflow 问答 10673000-10673999

# android - 使用 Android 的 WifiManager 扫描 Wi-Fi 网络时，如何避免看到缓存的网络？

> ID：10673000
> 
> 赞同：0
> 
> 时间：2012-05-20T11:27:11.567
> 
> 标签：android

我`WifiManager.startScan`用于扫描可用网络。它工作正常，我可以使用返回的网络。但是有一个问题。有时（出乎意料？当 wifi 启动时？）它会返回不可用的网络。这个网络是可用的，但现在很远。看起来 wifimanager 缓存了一些网络。

有什么解决办法吗？我只有一个 - 扫描网络两次，但这并不理想。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:32:53.537

您返回的每个**[`ScanResult`](http://developer.android.com/reference/android/net/wifi/ScanResult.html)**条目都有一个**[`level`](http://developer.android.com/reference/android/net/wifi/ScanResult.html#level)**字段，以 dBm 为单位指示信号强度。该值越低，信号越弱。您可以排除低于特定信号强度的网络，以避免看到可能不接受连接的网络。

# javascript - 如何使用 Jasmine BDD 测试文件上传

> ID：10673001
> 
> 赞同：5
> 
> 时间：2012-05-20T11:27:18.460
> 
> 标签：javascript, jasmine

我正在使用 jQuery 文件上传插件来管理图像文件上传。用 Jasmine 测试图像提交的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:26:11.540

我会看看使用辅助库 Sinon.js。您可以模拟 XMLHttpRequest 对象以拦截发布请求，并验证您的插件代码是否正确提交图像。特别是看一下 Sinon.js 文档的这一部分：

[http://sinonjs.org/docs/#server](http://sinonjs.org/docs/#server)

# python - 在python中增加一个二进制数

> ID：10673008
> 
> 赞同：1
> 
> 时间：2012-05-20T11:28:46.697
> 
> 标签：python, binary

我想知道，如何将表示二进制数的字符串递增到另一个二进制数？（例如，用于 while 循环）。

例如，我从“0000”开始，在 15 英寸之后，我应该达到“1111”（换句话说：“0000”、“0001”、“0010”、...、“1111”）。起初这个问题看起来很简单，但我能想出的唯一解决方案非常荒谬（有些人可能会说，这不是pythonic）。有人有建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:30:46.760

要执行您真正要求的操作，您应该转换为整数，加一，然后改回二进制。

```
x = to_binary(int(x, 2) + 1) 
```

您可能会发现`bin`内置方法在实现时很有用`to_binary`，但您需要稍微修改其输出以匹配您想要的结果。

但是，如果可能不来回转换会更好：只需存储一个整数并在需要显示时将其转换为二进制。

不过，仔细阅读您的问题后，您似乎只想生成字符串`'0000'`, `'0001'`,`'0010'`等。如果这是正确的，那么我建议使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product).

例子：

```
import itertools
for x in map(''.join, itertools.product('01', repeat=4)):
    print x

0000
0001
0010
... 
```

在线查看它：[ideone](http://ideone.com/HSdcE)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:33:49.087

```
>>> def increment_binary_string(s):
...   return '{:04b}'.format(1 + int(s, 2))
... 
>>> x = '0000'
>>> for _ in xrange(15):
...   print x
...   x = increment_binary_string(x)
... 
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T17:03:21.977

使用 bin() 和 zfill() 很容易做到这一点。

```
>>> for x in range(16):
...     print bin(x)[2:].zfill(4)
... 
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111 
```

或者，您可以将值放在一个带有理解的列表中：

```
>>> [bin(x)[2:].zfill(4) for x in range(16)]
['0000', '0001', '0010', '0011', '0100', '0101', '0110', '0111', '1000', '1001', '1010', '1011', '1100', '1101', '1110', '1111'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T12:11:53.350

[使用默认函数bin()](http://docs.python.org/library/functions.html#bin)简短而简单：

```
>>> for i in range(15):
...     print bin(i)
...
0b1
0b10
0b11
0b100
0b101
0b110
0b111
0b1000
0b1001
0b1010
0b1011
0b1100
0b1101
0b1110
0b1111 
```

如果您不喜欢它们以 0b 前缀开头，则可以`print str(bin(i))[2:]`改用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-06T07:51:50.870

如果您只想使用字符串：

```
def increment(l):
    if len(l) == 0:
        return l

    if l[-1] == '0':
        l = l[:-1] + '1'
    else:
        l = increment(l[:-1]) + '0'

    return l 
```

# c# - 两个具有相同 OnClick 事件的 Imagebutton。

> ID：10673016
> 
> 赞同：0
> 
> 时间：2012-05-20T11:30:27.603
> 
> 标签：c#, asp.net, imagebutton

我有两个 ImageButtons ：

```
<asp:ImageButton ID="img1" runat="server" Width="50px" Height="50px" OnClick="CheckIMG" ImageUrl="../Icons/123.png" />
<asp:ImageButton ID="img2" runat="server" Width="50px" Height="50px" OnClick="CheckIMG" ImageUrl="../Icons/456.png" /> 
```

方法是：

```
protected void CheckIMG(object sender, ImageClickEventArgs e)
{
    HiddenField imgNameHF = (HiddenField)DetailsView1.FindControl("sent_info_to_db_HF");
    imgNameHF.Value = "'<%# CheckValue(Eval('" + img.ImageUrl + "')%>'";
} 
```

我怎样才能上线：用户点击`img.ImageUrl`的`ImageButton`那个？

例如：

*   如果`img1`单击，则该行将是：`img1.ImageUrl`

*   如果`img2`单击，则该行将是：`img2.ImageUrl`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:39:07.013

你可以试试这个。

```
protected void CheckIMG(object sender, ImageClickEventArgs e)
{
    HiddenField imgNameHF = (HiddenField)DetailsView1.FindControl("sent_info_to_db_HF");
    ImageButton imgb=(ImageButton) sender;
    imgNameHF.Value = "'<%# CheckValue(Eval('" + imgb.ImageUrl + "')%>'";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:52:25.503

你也可以试试这个：

```
protected void CheckIMG(object sender, ImageClickEventArgs e)
{
    HiddenField imgNameHF = (HiddenField)DetailsView1.FindControl("sent_info_to_db_HF");
    ImageButton imgb = sender as ImageButton;
    imgNameHF.Value = "'<%# CheckValue(Eval('" + imgb.ImageUrl + "')%>'";
} 
```

# php - 在PHP中修剪PNG周围的空白

> ID：10673017
> 
> 赞同：0
> 
> 时间：2012-05-20T11:30:32.110
> 
> 标签：php, png, gd

我使用的代码与这个问题的答案非常相似（做同样的事情）：[Crop whitespace from image in PHP](https://stackoverflow.com/questions/1669683/crop-whitespace-from-image-in-php)。我也试过这个确切的代码，效果相同：

我发现它对 PNG 源不起作用（不修剪空白），即使 PNG 的背景是真正的白色（不透明）。我可以`imagepng`毫无问题地将输出发送到，但如果图像源是`imagecreatefrompng`，则不会修剪任何内容。

有没有一种可靠的方法可以使用 GD 从 PNG 中修剪空白？或者也许是一种将白色转换为透明并进行修剪的方法？或者，其他解决方案...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:38:09.430

这是一个完全未经检验的猜测。但是，我会假设 alpha 透明度导致了这个问题。您提到的答案可能需要一些工作。

也许尝试使用`imagecopymerge()`将图像放在白色画布上，然后完成答案中提到的步骤。

# ios - 核心情节图的旁白替代方案？

> ID：10673020
> 
> 赞同：1
> 
> 时间：2012-05-20T11:30:51.870
> 
> 标签：ios, ios5, accessibility, core-plot, voiceover

我的应用程序中有一个图表视图来显示统计信息。

有没有人设法用核心情节创建任何真正的配音实现？

我怎样才能使它成为视障用户的替代“视图”？

例如，我怎样才能让它一一说出 xy 值？因此，当视图加载第一个值对时，用户可以向左、向右滑动以转到下一个被说出的值对，依此类推。

按要求更新

我有两种不同类型的图表视图。一种是用于显示药物依从性。该图表显示每周平均错过、推迟和“按时”服药的百分比。另一个图表显示测量的信息，例如血压。这不是固定间隔。因此，x 轴显示完成此测量的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:31:16.117

我在我们的应用程序中遇到了完全相同的问题，并通过向 VoiceOver 用户呈现完全不同的用户界面来完成。

我没有显示图表，而是显示值列表，因为我们的图表是饼图或具有确定值的条形图。UITableView 更容易访问。

您可以检查 VoiceOver 状态`UIAccessibilityIsVoiceOverRunning()`并决定显示图形或表格视图。我们的 VO 用户给了我们很好的反馈，并为此非常感谢我们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:04:15.993

看看它是如何在作为 iOS 一部分的 Apple 股票应用程序中完成的——为了便于访问，图表视图有子项，每个子项都是一个 xy 值。因此，您将在绘图视图中实现 UIAccessibilityContainer 协议以返回一堆 UIAccessibilityElement 实例，每个实例代表一个数据点并返回一个可访问性值，例如“第 1 周，21% 错过，14% 推迟，65% 准时”，然后下一个 UIAccessibilityElement “第 2 周，...”等等。或者 perpahs 尝试accessibilityLabel“第1周”和accessibilityValue“21% 错过，14% 推迟，65% 准时”。这些的accessibilityTraits 可以是UIAccessibilityTraitStaticText。

另外不要忘记在 UIAccessibilityElement 实例上设置正确的 accessibilityFrame - 这将允许 VoiceOver 用户“触摸探索”（移动手指）图形以在 x 轴上进行随机访问（如果适用）。再次尝试 Stocks 应用程序，看看它是如何工作的。

# javascript - jquery .each 函数后不执行任何代码

> ID：10673024
> 
> 赞同：0
> 
> 时间：2012-05-20T11:31:27.460
> 
> 标签：javascript, jquery, each

如上所述，在我的 .each 函数之后不会执行任何代码。我以为每个函数都准备好后会执行每个代码？！

这是我的js文件：

```
function onUploadLoad() {
    $.ajax({
        type: "POST",
        url: "headlines_getter.php",
        dataType: 'json',
        cache: false,
        success: function (data1) {
            console.log("debug 2");
            var i = 0;
            var $element = "";
            $.each(data1[i].main, function () {
                console.log("debug 3 ");
                $element += '<div data-role="collapsible"><h3>' + data1[i].main + '</h3>';
                var j = 0;
                $.each(data1[i].sub, function () {
                    console.log("debug 4");
                    $element += '<span><input type="checkbox" name="headlines" data-mini="true" value="blub" /> ' + data1[i].sub[j] + ' </span>';
                    j++;
                });
                $element += '</div>';
                i++;
                var $elements = $($element).appendTo($('#headlinesgroup'));
                $elements.collapsible();
            });
    alert("ok"); // <- this alert is not shown!!
    console.log("debug 12"); // <- also not this console.log!
        }
    });
} 
```

如果我在每个功能之前发出警报，一切正常吗？！

提前致谢。最好的问候，约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:05:16.837

您的代码中的这一行：

```
$.each(data1[i].main, function () { 
```

说要遍历`data1[i].main`. 也就是说，假设`i`此时为 0，它期望 的`.main`属性`data1[0]`是一个数组或一个对象。鉴于您尝试`data1[i].main`在循环内继续使用并且您正在增加`i`自己的方式，我怀疑这`.main`根本不是一个数组或对象，所以您的两个`$.each()`循环都没有像您认为的那样工作。

只是在这里猜测，但您的`data1`数据结构实际上是这样的：

```
[
   { "main" : "some heading 1", "sub" : [ "item1", "item2", "item3" ] },
   { "main" : "some heading 2", "sub" : [ "item1", "item2", "item3" ] },
   { "main" : "some heading 3", "sub" : [ "item1", "item2", "item3" ] }
] 
```

该结构与您似乎在循环中尝试执行的操作相对应，但是尝试同时使用单独管理自己的计数器和循环计数器时`$.each()`出错了。您想使用其中一个*或*传统的循环，但这就像您试图同时进行两者一样。假设上述结构与您的结构相似，您需要执行以下操作：`$.each()``i``j``$.each()` *`for`*

 *```
 success: function (data1) {
        console.log("debug 2");
        var $element = "";
        $.each(data1, function (i, currentObj) {
            console.log("debug 3 ");
            $element += '<div data-role="collapsible"><h3>' + currentObj.main+ '</h3>';
            $.each(currentObj.sub, function (j, currentSub) {
                console.log("debug 4");
                $element += '<span><input type="checkbox" name="headlines" data-mini="true" value="blub" /> ' +currentSub + ' </span>';
            });
            $element += '</div>';
            var $elements = $($element).appendTo($('#headlinesgroup'));
            $elements.collapsible();
        });
        alert("ok"); 
        console.log("debug 12");
    } 
```

请注意，在这两个`$.each()`循环中，我实际上都没有使用`i`and`j`变量，因为 jQuery 设置为`currentObj`等于`data1[i]`并且它设置`currentSub`为等于`currentObj.sub[j]`（也是`data1[i].sub[j]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:40:58.097

尝试将`error`参数添加到`$.ajax`请求中，例如：

```
function onUploadLoad()
{
    console.log("debug start");
    $.ajax({
        type: "POST",
        url: "headlines_getter.php",
        dataType: 'json',
        cache: false,
        success: function (data1) {
            console.log("debug success");
        },
        error: function() {
            console.log("debug error");
        }
    });
    console.log("debug end");
}​ 
```

* * *

由于问题已经改变......

你能在这里发布你的 php 的响应吗？看看你是否正在操纵`data1`它必须被操纵的方式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T11:44:34.033

如果你去 .each() 的文档你可以看到回调函数的原型需要两个参数

> jQuery.each（集合，回调（indexInArray，valueOfElement））

因此你可以这样做：

```
$.each(data1[i].main, function (index, element) {

//code inside each

}); 
```*

# php - 如何在 PHP 中按字母顺序对名称（名字和姓氏）进行排序，不区分大小写？

> ID：10673026
> 
> 赞同：0
> 
> 时间：2012-05-20T11:31:44.967
> 
> 标签：php, sorting, alphabetical

我正在尝试按字母顺序对一组学生姓名进行排序。在数组中，我们有 $user['firstname'] 和 $user['lastname']。我想对它进行排序，使 A/a 先出现，然后 Z/z 出现在最后。如果他们的名字相同，那么我们将与姓氏进行比较。我的问题是我已经为这种排序创建了功能，但它不区分大小写。

这是我到目前为止所做的：

```
uasort($students, array($this, 'nameCompare'));
private function nameCompare($a, $b)
{
    if ($a['firstname'] == $b['firstname']) 
    {
        if($a['lastname'] < $b['lastname'])
        {
            return -1;
        }
        else if ($a['lastname'] > $b['lastname'])
        {
            return 1;
        }
        else //last name and first name are the same
        {
            return 0;
        }
    }
    return ($a['firstname'] < $b['firstname']) ? -1 : 1;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T20:48:12.113

这是一个例子：

```
usort($students, function($a, $b) {
  if($cmp = strnatcasecmp($a['lastname'], $b['lastname'])) return $cmp;
  return strnatcasecmp($a['firstname'], $b['firstname']);
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-20T11:36:38.240

我认为[strtolower](http://www.php.net/strtolower "下层")函数可能很有用。在函数的开头添加以下内容：

```
$a['firstname'] = strtolower($a['firstname']);
$a['lastname'] = strtolower($a['lastname']);
$b['firstname'] = strtolower($b['firstname']);
$b['lastname'] = strtolower($b['lastname']); 
```

通过这样做，您可以将所有值转换为小写，从而消除函数的“敏感性”。

希望能帮助到你。

# jquery - 选择父级中的每个元素，该父级是一个变量

> ID：10673027
> 
> 赞同：0
> 
> 时间：2012-05-20T11:31:47.537
> 
> 标签：jquery

我如何在父级引用变量的父级中选择具有特定类名的每个元素。

例如：

```
$('.tenUnit').each(function(index, element){

    //below element is a parent that is a variable
    $('element .specifyClass').each(function(index2, element2){
        // ... some code ...
    });
}); 
```

```
<div class="tenUnit"><!-- parent 1 -->
    <div>
        <input class="specifyClass"> <!-- can be anywhere inside div.tenUnit -->
    </div>
    <input class="specifyClass"><!-- can be anywhere inside div.tenUnit -->
</div>

<div class="tenUnit"><!-- parent 2 -->
    <div>
        <input class="specifyClass"> <!-- can be anywhere inside div.tenUnit -->
    </div>
    <input class="specifyClass"><!-- can be anywhere inside div.tenUnit -->
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:33:39.160

你可以使用 $(element).find('.specifyClass')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:34:41.093

您可以使用[jQuery 选择器上下文](http://api.jquery.com/jQuery/#jQuery1)

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以使用 $() 函数的可选第二个参数为搜索提供替代上下文。例如，要在事件处理程序中进行搜索，可以像这样限制搜索：

```
$('div.foo').click(function() {
  $('span', this).addClass('bar');
}); 
```

> 当对 span 选择器的搜索仅限于 this 的上下文时，只有单击元素内的 span 才会获得附加类。
> 
> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

在您的示例中，您可以`$(element)`用作上下文。

# c# - 在 C# 中绘制椭圆

> ID：10673032
> 
> 赞同：0
> 
> 时间：2012-05-20T11:33:04.467
> 
> 标签：c#, winforms, drawing, ellipse

我正在使用 onPaint 方法在某些坐标处画一条线。这是整个代码：

```
namespace Lunar_Lander{
public partial class Form1 : Form
{
    System.Media.SoundPlayer player= new System.Media.SoundPlayer();
    System.Media.SoundPlayer player1 = new System.Media.SoundPlayer();
    private double x,y;
    public static double dx,dy;
    private int gorivo = 1000;
    private int zivoti = 3;
    //private int score = 0;
    public System.Drawing.Graphics g;
    public System.Drawing.Pen pen1 = new System.Drawing.Pen(Color.Blue, 2F);
    static int th = 16;
    static int t = 0;
    static Color[] c = new Color[10];

    public Form1()
    {
        InitializeComponent();
        Thread t1 = new Thread(new ThreadStart(SplashForm));
        t1.Start();
        Thread.Sleep(3500); 
        t1.Abort();
        Thread.Sleep(1000);
        //zvuk();
        initGame();
        cSet();
    }

    private void SplashForm()
    {
        Form2 newSplashForm = new Form2();
        newSplashForm.ShowDialog();
        newSplashForm.Dispose();
    }

    void cSet()
    {
        c[0] = Color.Red;
        c[1] = Color.Blue;
        c[2] = Color.Yellow;
        c[3] = Color.Green;
        c[4] = Color.Pink;
        c[5] = Color.Brown;
        c[6] = Color.Violet;
        c[7] = Color.White;
        c[8] = Color.Silver;
        c[9] = Color.Purple;
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    protected override void OnPaint(PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        g.PageUnit = GraphicsUnit.Inch;
        Pen MyPen = new Pen(c[t], th / g.DpiX);
        if(v>2)
        g.DrawLine(MyPen, Convert.ToInt32(picLander.Location.X), Convert.ToInt32(picLander.Location.Y), 1, 1);
        g.DrawEllipse(MyPen, Convert.ToInt32(picLander.Location.X), Convert.ToInt32(picLander.Location.Y), 10, 10);
    }
    static int v=0;
    private void zvuk()
    {
        player.Stream = Properties.Resources.System_Shock_2___Engsong;
        player.PlayLooping();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        v++;
        dy += .1;
        picLander.Image = myPics.Images[0];
        kretanje();
        Statistika();
        this.SetStyle(ControlStyles.ResizeRedraw, true); 
    }

    private void kretanje()
    {
        x += dx;
        if (x > this.Width - picLander.Width)
        {
            x = 0;
        } 
        if (x < 0)
        {
            x = Convert.ToDouble(this.Width - picLander.Width);
        } 
        y += dy;
        if (y > this.Height - picLander.Height)
        {
            y = 0;
        } 
        if (y < 0)
        {
            y = Convert.ToDouble(this.Height - picLander.Height);
        } 
        picLander.Location = new Point(Convert.ToInt32(x),Convert.ToInt32(y));
    }

    public void Statistika()
    {
        lbldx.Text = "Horizontalna brzina: " + Math.Round(dx,2);
        lbldy.Text = "Vertikalna brzina: " + Math.Round(dy,2);
        lblGorivo.Text = "Gorivo: " + gorivo;
        lblZivoti.Text = "Brodova: " + zivoti;
        //lblScore.Text = "score: " + score;
        debljina.Text = "Debljina: " + th;
        switch (t)
        {
            case 0:
                boja.Text = "Boja:Crvena";
                break;
            case 1:
                boja.Text = "Boja:Plava";
                break;
            case 2:
                boja.Text = "Boja:Zuta";
                break;
            case 3:
                boja.Text = "Boja:Zelena";
                break;
            case 4:
                boja.Text = "Boja:Pink";
                break;
            case 5:
                boja.Text = "Boja:Braon";
                break;
            case 6:
                boja.Text = "Boja:Ljubicasta";
                break;
            case 7:
                boja.Text = "Boja:Bela";
                break;
            case 8:
                boja.Text = "Boja:Srebrna";
                break;
            case 9:
                boja.Text = "Boja:Purpurna";
                break;
        }
    }

    public void Kraj(){
    DialogResult odgovor;
    zivoti--;
    if (zivoti <= 0){
    odgovor = MessageBox.Show("Igraj ponovo?","Kraj Igre",MessageBoxButtons.YesNo);
    if (odgovor == DialogResult.Yes){
    zivoti = 3;
    gorivo = 1000;
    initGame();
    } else {

    Application.Exit();
    } 
    }}
    public void initGame()
    {
        Random roller = new Random();
        dx = Convert.ToDouble(roller.Next(5) - 2);
        dy = Convert.ToDouble(roller.Next(5) - 2);
        x = Convert.ToDouble(roller.Next(this.Width));
        y = Convert.ToDouble(roller.Next(this.Height));
        gorivo = 1000;
        timer1.Enabled = true;

    }

       private void Form1_KeyDown(object sender, KeyEventArgs e)
       {
           gorivo--;
           if (gorivo < 0)
           {
               timer1.Enabled = false;
               MessageBox.Show("Nestalo Vam je goriva!!");
               gorivo += 40;
               Kraj();
               initGame();
           }
           switch (e.KeyData)
           {
               case Keys.Up:
                   picLander.Image = myPics.Images[1];
                   dy -= 0.8;

                   break;
               case Keys.Left:
                   picLander.Image = myPics.Images[2];
                   dx=dx-0.8;
                   break;
               case Keys.Right:
                   picLander.Image = myPics.Images[3];
                   dx=dx+0.8;
                   break;
               case Keys.Down:
                   picLander.Image = myPics.Images[4];
                   dy += 0.8;
                   break;
               case Keys.W:
                   th++;
                   break;
               case Keys.S:
                   {
                       if (th == 0) th = 0;
                       else th--;
                   }
                   break;
               case Keys.A:
                   { if (t == 9)t = 0; else t++; }
                   break;
               case Keys.D:
                   { if (t == 0)t = 9; else t--; }
                   break;
               default:

                   break;
           } 
       }

    }

} 
```

这条线已成功绘制，但我没有绘制椭圆。我错过了什么吗？当我尝试在一些静态坐标上绘制椭圆时，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:51:35.183

```
protected override void OnPaint(PaintEventArgs e)
    {
        var th = 10.0f;
        var picLander = new PointF(0.5f, 0.5f);

        Graphics g = e.Graphics;
        g.PageUnit = GraphicsUnit.Inch;
        Pen MyPen = new Pen(Color.Black, th / g.DpiX);
        g.DrawLine(MyPen, Convert.ToInt32(picLander.X), Convert.ToInt32(picLander.Y), 1, 1);
        g.DrawEllipse(MyPen, Convert.ToInt32(picLander.X), Convert.ToInt32(picLander.Y), 3, 5);
    } 
```

试过了，效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T23:07:26.083

我不确定你在做什么。我设置了一个计时器来动态更改`picLander.X`和`picLander.Y`值，并且椭圆确实移动了。这是我使用的代码。你可能想在你的`g.DrawEllipse`调用上设置一个断点并验证你的坐标。

代码。

```
public partial class Form1 : Form
{
    PointF picLander = new PointF(0.5f, 0.5f);
    static int th = 16;

    public Form1()
    {
        InitializeComponent();
        timer1.Start();
    }

     protected override  void OnPaint( PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        g.PageUnit = GraphicsUnit.Inch;
        Pen MyPen = new Pen(Color.Black, th / g.DpiX);
        g.DrawLine(MyPen, Convert.ToInt32(picLander.X), Convert.ToInt32(picLander.Y), 1, 1);
        g.DrawEllipse(MyPen, Convert.ToInt32(picLander.X), Convert.ToInt32(picLander.Y), 3, 5);
        this.Text = picLander.X.ToString() + "----" + picLander.Y.ToString();
    } 

     private void timer1_Tick(object sender, EventArgs e)
     {
         picLander.X = picLander.X +1;
         picLander.Y = picLander.Y +1;
         Invalidate();

     }
} 
```

# java - log4j jdbcapender 将用户名传递给数据库表

> ID：10673036
> 
> 赞同：1
> 
> 时间：2012-05-20T11:33:28.540
> 
> 标签：java, log4j

我有 log4j jdbcappender 配置如下：

```
 <appender name="jdbcAppender" class="bean.CustomJdbcAppender">
        <param name="jndiDataSource" value="myDS"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                   value="INSERT INTO log_table (level, loc, msg) VALUES ( '%p','%C;%L', '%m' )"/>
        </layout> 
```

如何将用户名从 log4j 传递到数据库表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:38:08.837

使用 MDC（映射诊断上下文），如[本例](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)。

因此，您需要在某个地方映射用户名，例如：

```
MDC.put("username", username); 
```

在您的 log4j 配置中，您可以像这样使用它：

```
<param name="ConversionPattern"
      value="INSERT INTO log_table (level, loc, msg, username) VALUES ( '%p','%C;%L', '%m', '%X{username}' )"/> 
```

# php - 高度可用的 API - 这个解决方案是一个好的解决方案吗？

> ID：10673039
> 
> 赞同：1
> 
> 时间：2012-05-20T11:33:44.870
> 
> 标签：php, http, rest, curl, high-availability

我有一个从 RESTful API 检索数据的客户端。

我的要求是我希望 API 以指定的顺序排列。如果无法达到首选的，则应使用下一个。

其原因是某种负载平衡（API 返回一个生成的链接，该链接指向应用程序中进一步使用的相同服务器）。

因此，最初我以所需的顺序生成 APIS 的 URL。例如：

1.  [http://first-api.example.com/method?param=value](http://first-api.example.com/method?param=value)

2.  [http://first-api.example.com/method?param=value](http://first-api.example.com/method?param=value)

3.  [http://first-api.example.com/method?param=value](http://first-api.example.com/method?param=value)

现在我可以遍历这些 url 并从第一个响应成功的 API 返回结果。然而，这需要太长时间。API 可能需要大量时间来响应（最多几秒钟）。如果加起来，整个过程可能会超时。

因此，我想等待一段可接受的时间（如果一切顺利，API 通常会成功响应）。如果到了那个时间，我想请求第二个 API，但也要等待第一个，以防它需要更长的时间来响应。

一段时间后，第三个 API 也被添加到池中

我不想从一开始就立即请求每个 API，因为每个请求都意味着我希望尽可能避免的大量工作负载。

哪个 API 最先响应，获得工作。

所以我创建了一个简单的类，使用 curl_multi_exec 完成上述操作。

它通过了 2 种方法。一种是一次提供一个 API url，一种是评估响应是否成功，另一种是启动该过程并返回第一个成功响应的公共方法。

包括测试类的类如下所示：

```
<?
class MultiGetProxy
{
    private $url_src = null;
    private $response_evaluator = null;
    private $total_start = null;
    private $handles = array();
    private $mh = null;
    public function setUrlSource($callback)
    {
        $this->url_src = $callback;
        return $this;
    }
    public function setResponseEvaulator($callback)
    {
        $this->response_evaluator = $callback;
        return $this;
    }
    private function addNewHandle()
    {
        echo "adding new handle ... \n";
        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, call_user_func($this->url_src));
        ;
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $this->handles[] = $ch;
        curl_multi_add_handle($this->mh, $this->handles[count($this->handles) - 1]);
    }
    private function getRunning()
    {
        curl_multi_exec($this->mh, $running);
        return $running;

    }
    private function getResponse()
    {
        foreach ($this->handles as &$handle) {
            if ($content = curl_multi_getcontent($handle)) {
                echo "one handle delivered content...\n";
                if (!call_user_func($this->response_evaluator, $content)) {
                    echo "evluater said it was an error...\n";
                    curl_multi_remove_handle($this->mh, $handle);
                    if (!$this->getRunning())
                        $this->addNewHandle();
                    return false;
                }
                echo "content looks fine\n";
                var_dump($content);
                return $content;

            }
        }
    }
    public function exec()
    {
        $this->total_start = microtime(true);
        $this->mh          = curl_multi_init();
        $response          = false;
        $lastadd           = 0;
        while (!$response) {
            if (microtime(true) > $lastadd + 5.0) {
                $this->addNewHandle();
                $lastadd = microtime(true);
                curl_multi_exec($this->mh, $running);
            }
            usleep(100000);
            curl_multi_exec($this->mh, $running);
            $response = $this->getResponse();
        }
        echo "do loop done here is some info:\n";
        var_dump(curl_multi_info_read($mh));
        // Handles schliessen
        foreach ($handles as &$handle) {
            curl_close($handle);
            curl_multi_remove_handle($mh, $handle);
        }
        curl_multi_close($mh);
        $total_run = microtime(true) - $total_start;
        echo "completed in: $total_run \n";
        echo "response is:\n";
        return $response;

    }
    public function getInfo()
    {
        $info               = array();
        $info["total_time"] = $this->total_run;
        $info["start"]      = $this->total_start;

    }

}

class Test
{
    function isvalid($data)
    {
        $data = json_decode($data);
        if ($data->status > 500) { // error
            return false;
        }
        return true;
    }
    function getUrl()
    {
        static $urls = array();
        if (empty($urls)) {
            $urls[] = 'http://test.example.com/sleep.php?s=8&status=200&message=first';
            $urls[] = 'http://test.example.com/sleep.php?s=2&status=503&message=2nd';
            $urls[] = 'http://test.example.com/sleep.php?s=2&status=200&message=3rd';
            $urls[] = 'http://test.example.com/sleep.php?s=21';
            $urls[] = 'http://test.example.com/sleep.php?s=22';
            $urls[] = 'http://test.example.com/sleep.php?s=23';
            $urls[] = 'http://test.example.como/sleep.php?s=25';
            $urls[] = 'http://test.example.com/sleep.php?s=25';
        }

        $url = array_shift($urls);
        echo "returning $url \n";
        return $url;

    }
    public function test()
    {
        $mgp = new MultiGetProxy();
        $mgp->setUrlSource(array(
            $this,
            "getUrl"
        ));
        $mgp->setResponseEvaulator(array(
            $this,
            "isvalid"
        ));
        $result = $mgp->exec();
        echo $result;
    }
}

$test = new Test();
$test->test(); 
```

现在我的实际问题更像是“征求意见”，因为我从未真正处理过此类事情。

它应该部署在高负载环境中，会有很多请求。

睡眠时间也对吗？

我有可能遇到 tcp 连接问题吗？

对不起，我不能更具体。我只是试图为一个非常具体和个别的问题找到一个解决方案，这就是我想出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:48:43.410

构建位于 API 和代码之间的外观。外观决定使用哪个 API。外观具有代表 API 服务器的 HTTP 对象。您的代码只是向外观发送和接收数据，并不关心它正在使用哪个服务器。

然后努力提高立面的性能。使用在您预期的时间后返回数据的模拟对象对其进行测试。

```
interface Proxy {
  function exec();
}

abstract class AbstractProxy {

  public $response;

  public function hasResponse() {
    return !empty($this->response);
  }

}

class SingleProxy extends AbstractProxy implements Proxy {

  // the real code for connecting to the API

}

class MultiProxy extends AbstractProxy implements Proxy {

  public $singleProxies = array();
  public $delayTime = 1000000;

  public function addProxy(Proxy $proxy) {
    $this->singleProxies[] = $proxy;
  }

  public function exec() {
     foreach($singleProxies as $proxy) {
        $proxy->exec();
        usleep($this->delayTime);
        if($proxy->hasResponse() {
          return $proxy;
        } else {
          $proxy->cancel();
        }
     }
  }

}

class SingleProxyStub extends AbstractProxy implements Proxy {

  public $timeToRespond = 0;

  public function exec() {
    usleep($this->timeToRespond);
    $this->response = 'response';
  }

}

class ProxyTest() {

   public function runTest() {

     $slowProxy = new SingleProxyStub;
     $slowProxy->timeToResponse = 2000000; // 2 seconds

     $fastProxy = new SingleProxyStub;
     $fastProxy->timeToResponse = 500000; // 0.5 seconds

     $MultiProxy = new MultiProxy;
     $MultiProxy->singleProxies = array($slowProxy, $fastProxy);

     $startTime = microtime(true);
     $MultiProxy->exec();
     $endTime = microtime(false);
     log($startTime, $endTime);

   }

} 
```

# c# - 表未映射到实体框架数据模型

> ID：10673044
> 
> 赞同：4
> 
> 时间：2012-05-20T11:34:31.477
> 
> 标签：c#, visual-studio-2010, entity-framework, entity-framework-4, linq-to-entities

嗨，我回来了另一个问题，我已经开始使用 EF，但我遇到了问题。

**OverView：**
我制作了一个 EF 模型，发现 EF 模型图中没有显示一个表（名为 UserRoles），我尝试通过“更新数据模型”添加它，但向导没有显示该表添加（好像已经添加），我还尝试通过“更新数据模型”向导刷新模型，但没有帮助。

**问题解释：**
*原始数据库图。* ![在此处输入图像描述](../Images/d80fd1a42d57f046a273189de1014841.png)
*部分 EF 模型图* ![在此处输入图像描述](../Images/0206cb640e5e04d7f45ae024dad46ff5.png)
*我尝试通过“更新数据模型”添加它*
![在此处输入图像描述](../Images/abb53f716425ac9831ac3da442ac07bb.png)

*我试图将 EF 图表中的实体重命名为“UserRoles”，弹出一条错误消息。* ![在此处输入图像描述](../Images/1fb9c82144cd0361f47ef1b1ed627b44.png)

**PS：**我想我已经很好地提出了这个问题，但是请让我知道你可能需要的更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:41:13.027

好吧，您现在使用对象，不再使用 sql。

而使用 EF，多对多关系不需要特殊的“实体”，而是特定的“关系”。

在用户类中，您将拥有一个角色列表，在角色类中，您将拥有一个用户列表。这完美地代表了一个简单的多对多关系。

如果您的关系表中至少有一个其他属性（“RelationName”字符串，例如 - 愚蠢的 - 示例），那么它将存在于 EF 模型中......

编辑：不确定您需要什么：这只是“对象”方式。想想如果您不使用数据库，您将创建这些类的方式：您将在关系的每个部分中创建另一个列表。但是 Sql 不能这样做（你不能在数据库中有一个“列表”），所以 Sql 需要一个关系表。但是EF是ORM，所以是对象，不是sql。

编辑 2：

在 Code First 中创建关系的方式，但它非常明确 [http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-ef-4-1-building-many -to-many-relationship.aspx](http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-ef-4-1-building-many-to-many-relationship.aspx)

如需更多答案，只需谷歌“实体框架多对多”即可解决问题

# spring - 在哪里处理spring DataAccessException

> ID：10673048
> 
> 赞同：9
> 
> 时间：2012-05-20T11:35:15.117
> 
> 标签：spring, exception-handling, struts, dao, data-access

我使用 Struts、Spring 和 Hibernate 开发了一个应用程序。

我的 DAO 使用 spring jdbc 并且它的所有方法都抛出 DataAccessException（这是 uncheked）。

我应该在哪里处理这个异常？我知道这是一个未经检查的异常，但我认为我需要告诉用户数据库是否存在问题或其连接。

我想我应该从我的服务类方法中重新抛出 DataAccessException 以被 Controller 捕获。这是一个好习惯吗？

我查看了 Spring 包中的示例，并没有在域或服务区域中找到任何异常处理。离开 dao 区域后，DataAccessException 似乎被忽略了。

请为这个问题提出一个好的设计。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T11:58:41.340

> 离开 dao 区域后，DataAccessException 似乎被忽略了。

这是一件好事！让它飞过整个堆栈。您可能在服务层上有事务 - 异常将透明地导致最外层事务回滚。伟大的！

现在它将找到通往控制器的路。如果您在 Struts 控制器中捕获它，您可以例如返回不同的视图。但很可能您不想在每个 Struts 操作中处理异常。所以让异常飞得更远。在某些时候，Struts 会捕获该异常并尝试处理它。Struts 有一些复杂的错误处理机制，你会发现很多关于它们的信息。通常，它会根据异常类型调用一些自定义操作或错误屏幕。

最后，如果连 Struts 都无法处理异常，它会被重新抛出到容器中，导致返回 HTTP 503 并返回异常详细信息。

如您所见，您可以在很多级别上控制异常，通常越低越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-01T16:45:46.137

抛出异常也是一个代价高昂的操作。在服务层本身捕获异常并根据异常生成响应并将其发送到控制器是一个不错的选择。在开发应用程序时，开发人员总是更好地了解他/她必须处理哪种类型的异常。因此捕获异常并将其转换为适当的响应是一个不错的选择。

# c++ - C++ 嵌套类问题

> ID：10673049
> 
> 赞同：1
> 
> 时间：2012-05-20T11:35:23.327
> 
> 标签：c++

我在使用 C++ 和嵌套类时遇到了一些问题。例如：

在 main.cpp

```
int main()
{

B b(par);
cout << b.Aglobal->parametro;
cout << b.Aglobal->parametro;
return 0;} 
```

在 B.cpp

```
B: B(type par)
{

A a(par1,par2);
Aglobal=&a;} 
```

在 Bh

```
class B
{
public:
    B(type);
    A *Aglobal;} 
```

在啊

```
class A
{

public:
    A(type1,type2);
    int parametro;} 
```

* * *

main.cpp 的回声不同，我无法理解原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:38:53.087

You define a local variable of type A in the constructor of B, and return a pointer to that local variable. Using that pointer results in undefined behavior, because the object it points to no longer exists.

Solutions to the problem might include:

*   allocate the A object on the heap. But then try to wrap it in an appropriate smart pointer rather than a simple pointer.

*   Have a member of type A in B and return the member's address

*   Have an object of type A with static storage duration, like the pointer itself.

The decision between these three depends heavily on the context of your problem which is not deducible from your question.

One more thing. *Nested* classes are those classes that are defined in scope of another class. There are no nested classes in your example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:39:50.047

在 B 构造函数中，您正在保存局部变量的地址。有几种方法可以解决此问题，正确的方法取决于您要对 A 做什么。

此外，您没有嵌套类。嵌套类在另一个类中定义，如下所示：

```
class OuterClass {
    class InnerClass {
        //class members
    };

    //class members
}; 
```

# php - 使用 php mysql 插入登录时间

> ID：10673050
> 
> 赞同：-1
> 
> 时间：2012-05-20T11:35:27.257
> 
> 标签：php, mysql, login, logout

如何仅在登录时插入transuser表login_time和userId，我不想在刷新页面时添加它

```
<table border=1>
    <tr>
        <td>User name</td>
        <td>Password</td>
        <td>Home Page</td>
    </tr>
    <tr>
    <?
        $date=date('Y/m/d H:i',time());
        $selUser=mysql_query("SELECT * FROM train_user where user_name='$user' ");
        while ($rowUser=mysql_fetch_array($selUser)){
    ?>
        <td><a href=""><?echo $rowUser['user_name'];?></a></td>
        <td><?echo $rowUser['user_password'];?></td>
        <td><?echo $rowUser['user_homepage'];?></td>
    </tr>
    </table>
    <?}
    mysql_query("INSERT INTO train_transuser (transuser_userId,transUser_loginTime) VALUES ('$user','$date')");
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:40:08.737

如果您只想在用户登录时添加该值，您应该将该行代码放在用户名/密码验证之后（如果验证已成功），因为登录代码是您只需执行一次的操作。

# sql - TSQL：交换不同表中相同类型的两个值

> ID：10673052
> 
> 赞同：0
> 
> 时间：2012-05-20T11:35:49.447
> 
> 标签：sql, sql-server-2008

我在不同的表中有两个自定义类型的值：DB1.TBL1.Val 和 DB2.TBL2.Val。是否可以将这些交换为值？这两个值是同一个类型的，这个类型就是datBlob。

再一次：我有数据库 DB1 和表 TBL1，它包含许多记录并有一些字段，包括 Val。假设我确定了保证这两个返回的行是正确的条件。其他数据库 DB2 也是如此。我想交换这两个值。

换句话说，我想要类似的东西

> UPDATE DB1.TBL1 SET Val=(SELECT Val FROM DB2.Tbl2.Val WHERE MyGUID='WOW') WHERE MyGUID='Wow'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:21:56.700

没有神奇的价值交换。您必须编写代码才能完成这项工作。下面的代码显示了如何。您必须适应数据类型、表名等以及如何找到需要更新的行。

```
-- Value from DB1
declare @B1 as int

-- Value from DB2
declare @B2 as int

-- Get value from DB1
select @B1 = Val
from DB1.dbo.TBL1.Val
where ID = 1

-- Get value from DB2
select @B2 = Val
from DB2.dbo.TBL2.Val
where ID = 1

-- Update value in DB1
update DB1.dbo.TBL1
set Val = @B2
where ID = 1

-- Update value in DB2
update DB2.dbo.TBL2
set Val = @B1
where ID = 1 
```

# c# - Visual Studio 报告属性没有 getter，尽管智能感知说它有

> ID：10673053
> 
> 赞同：3
> 
> 时间：2012-05-20T11:35:52.777
> 
> 标签：c#, ldap

我正在使用 LDAP 连接类，从[MSDN 上的这个页面开始](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.ldapconnection.aspx)工作。

我已经使用字符串构造函数实例化了该类，如下所示：

```
LdapConnection ld = new LdapConnection("LDAP://8.8.8.8:8888"); 
```

我现在想设置我的凭据，所以我正在尝试执行以下操作：

```
ld.Credential.UserName = "Foo"; 
```

但我收到以下错误：

> 无法在此上下文中使用属性或索引器“System.DirectoryServices.Protocols.DirectoryConnection.Credential”，因为它缺少 get 访问器。

但是，在键入此内容时，智能感知会显示以下内容：

![在此处输入图像描述](../Images/e37bc46254eaa6f203f0635d55b343e0.png)

这个描述表明 UserName 确实应该有一个 Get Accessor，我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:37:30.663

The [LdapConnection.Credential Property](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.ldapconnection.credential.aspx) doesn't have a `get` accessor, so you can't retrieve its current value and set the `UserName` property on the returned NetworkCredential instance. You can only assign to the LdapConnection.Credential Property:

```
ld.Credential = new NetworkCredential(userName, password); 
```

or

```
var credential = new NetworkCredential();
credential.UserName = userName;
credential.Password = password;
ld.Credential = credential; 
```

or

```
ld.Credential = new NetworkCredential
{
    UserName = userName,
    Password = password,
}; 
```

# objective-c - Objective c avaudioplayer没有播放声音

> ID：10673054
> 
> 赞同：4
> 
> 时间：2012-05-20T11:36:00.720
> 
> 标签：objective-c, avaudioplayer

我正在使用此功能在我的 iPhone 应用程序上播放声音。问题是声音没有播放。该功能正常工作并正确读取文件路径，我没有收到任何错误但声音不播放

```
-(void) playSound : (NSString *) fName; {
    if ([audioPlayer isPlaying]) {
        [audioPlayer stop];
    }
    audioPlayer.volume = 1.0;
    soundpath = [NSString stringWithFormat:@"sounds/%@", fName];
    soundFilePath = [[NSBundle mainBundle] pathForResource:soundpath  ofType: @"mp3"];
    soundURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];
    audioPlayer.numberOfLoops = -1;
    if (audioPlayer == nil){

    }
else {
    [audioPlayer play];
        if ([audioPlayer isPlaying]) {
            NSLog(@"%@", @"run");
     }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:49:28.473

尝试添加这个：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive:YES error: nil];
UInt32 route = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute, sizeof(route), &route); 
```

我遇到了类似的问题，并在调用该游戏之前添加了它，它为我解决了这个问题。

# perl - 地图内部分割如何工作？

> ID：10673059
> 
> 赞同：2
> 
> 时间：2012-05-20T11:36:46.550
> 
> 标签：perl, map, split

昨天我写了一个小子程序来解析我的*/etc/hosts*文件并从中获取主机名。

这是子程序：

```
sub getnames {
    my ($faculty, $hostfile) = @_;
    open my $hosts ,'<', $hostfile;
    my @allhosts = <$hosts>;
    my $criteria = "mgmt." . $faculty;
    my @hosts = map {my ($ip, $name) = split; $name} grep {/$criteria/} @allhosts; # <-this line is the question              
    return @hosts;
} 
```

我称它为并取回与正则表达式`getnames('foo','/etc/hosts')`匹配的主机名。`mgmt.foo`

问题是，为什么我必须在表达式`$name`中单独写？`map`如果我不写它，请收回整行。变量是否计算为其值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T11:47:50.620

来自的列表上下文结果`map`是为每个匹配主机评估块的所有结果的串联。请记住，块的返回值是最后评估的表达式的值，无论您的代码是否使用显式`return`. 如果没有 final `$name`，最后一个表达式——以及块的返回值——是来自`split`.

另一种写法是

```
my @hosts = map {(split)[1]} grep {/$criteria/} @allhosts; 
```

你可以融合`map`and`grep`得到

```
my @hosts = map { /$criteria/ ? (split)[1] : () } @allhosts; 
```

也就是说，如果给定的主机符合您的条件，则拆分它。否则，该主机没有结果。

# nsindexpath - UITableView won't scroll to very bottom

> ID：10673061
> 
> 赞同：0
> 
> 时间：2012-05-20T11:37:11.810
> 
> 标签：nsindexpath, uitableview

I have a `UITableView` that has something like 30 cells in it. I successfully use the scroll to index method when I add a new cell, but it is not working (almost) when called at view did load. When it is called at view didload it scrolls to the second to last cell instead of the last one, leaving the last one still hidden beyond view. There is definitely an object in the last position of the array at the point i am calling the scroll to, it is just weird.

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[myMatch.chat count]-1 inSection:0];
    [tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:56:10.660

利用 -

```
[tableView setContentInset:UIEdgeInsetsMake(0, 0, bottomSpace, 0)]; 
```

`UIEdgeInsetsMake`接受四个参数 - `top`, `left`, `bottom`, `right`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:01:37.773

Michaela，我认为有 3 种可能的方式：

*   NSLog 调用滚动方法时调用的索引号。也尝试从 IBAction 触发此方法，看看记录的值和结果是否不同。
*   你确定 UITableView 框架设置正确吗？
*   你尝试过不同的 UITableViewScrollPosition 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T15:42:10.890

从 调用时该功能是否正常工作`viewDidAppear:`？如果是这样，它可能与`viewDidLoad`调用后视图调整大小有关。

请参阅：[为什么我必须在 viewDidLoad 中手动设置视图的框架？](https://stackoverflow.com/questions/6757018/why-am-i-having-to-manually-set-my-views-frame-in-viewdidload)

您是否在 iPhone 5 的界面生成器中设置了视图并在 iPhone 4 上看到了这些结果？我的猜测是设置边界（显示的 tableview 的实际部分）`viewDidLoad`，然后通过 Springs 和 Struts 或 Autolayout 从其原始大小修改框架。我相信，界限总是从底部向上推，所以这可能是掩盖你最后一个单元的原因。

您可以`NSLog(NSStringFromCGRect(self.view.frame));`在`viewDidAppear`和中对此进行测试`viewDidLoad`。如果它们不同，则在您滚动到底部*后，框架正在调整大小并覆盖您的最后一个项目。*

# game-loop - Single threaded game and rendering

> ID：10673062
> 
> 赞同：2
> 
> 时间：2012-05-20T11:37:24.010
> 
> 标签：game-loop

I'm writing single threaded game engine for 2D games. Right now my game loop looks rougly like this:

1.  Update game logic
2.  Update physics
3.  Handle collisions
4.  Render scene

I'm using OpenGL for rendering. I'm wondering about 'Render scene' step position in game loop. There is a SwapBuffers() call on the end of the 'Render scene' step, so CPU is blocked until all rendering is finished. What do you think about this game loop:

1.  Render scene (previous frame)
2.  Logic, physics, collisions
3.  Swap buffers

This approach will bring better parallelism between CPU and GPU. Am I right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:05:52.223

我知道这已经回答了，但我有一些要补充的。

你在这里提到的

```
Render scene (previous frame)
Logic, physics, collisions
Swap buffers 
```

可能会提高帧率，但也会大大增加延迟。当用户按下一个按钮时，结果将在最好的情况下*超过两帧后*首先看到，最坏的情况下最多在 4 帧之后。

更好的游戏循环是：

```
-Handle Input, move character etc. (This takes virtually no time)
-Render
-Do the heavy calculations (AI, physics)
-Swap Buffers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:50:28.173

我在想，由于渲染是在 OpenGL 中异步发生的，在 GPU 上，GPU 肯定有可能在 CPU 更新逻辑/物理/等时完成渲染。交换缓冲区会等到所有命令都执行完毕，所以最后这样做可能会带来更好的性能。

但是，唯一可以确定的方法是尝试一下。如果CPU是瓶颈，那无论如何都无关紧要。（GPU 的渲染速度比 CPU 发送命令的速度快——这可能发生在高 FPS 的情况下，在这种情况下，它通常不被称为游戏玩家的“瓶颈”，因为 FPS 无论如何都是可以接受的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T03:32:09.347

实际上并没有太大的区别。有很多方法可以让你的游戏循环，最重要的是保持 3 个主要主题分开。

-输入 -
逻辑-
渲染

每个之间的时间总是相同的，因为它们不是并行执行的。

# php - insert $_SESSION['MM_Username'] in to log message

> ID：10673064
> 
> 赞同：0
> 
> 时间：2012-05-20T11:37:32.103
> 
> 标签：php, mysql, session, insert

First post here - I've been learning php and mysql for a month or so now.

I'm trying to post the session 'MM_Username' into log notes. so it reads 'archived by username'

I thought that if I set the lognote value to 'archived by " . $_SESSION['MM_Username'] . "' I would get the result i was after. Apparently not.

What am I doing wrong? My code is below.

Thanks

```
 if ((isset($_GET['divisionid'])) && ($_GET['divisionid'] != "")) {

  $logarchiveSQL = sprintf("INSERT INTO log (logaction, logdivisionid, lognotes) VALUES ('Division Archived', %s, 'archived by " . $_SESSION['MM_Username'] . "')",
                       GetSQLValueString($_GET['divisionid'], "int"));

  mysql_select_db($database_connect, $connect);
  $Result2 = mysql_query($logarchiveSQL, $connect) or die(mysql_error());

  $updateGoTo = "../divisions.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $updateGoTo));} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:14:15.533

你记得把它放在 session_start(); 在尝试访问您的会话之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:49:00.083

你得到什么结果？查询是否实际执行？当语句用双引号“”括起来时，请尝试在 { } 中引用变量

```
 $logarchiveSQL = sprintf("INSERT INTO log (logaction, logdivisionid, lognotes) VALUES ('Division Archived', %s, 'archived by {$_SESSION[MM_Username]} ')",
                       GetSQLValueString($_GET['divisionid'], "int")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T23:07:33.820

解决了！

感谢大家的帮助！

我没有声明 session_start，我忘记了它是在我的安全包含文件中定义的。

我还必须创建一个部门记录集

```
 session_start();

$colname_division = "-1";
if ((isset($_GET['divisionid'])) && ($_GET['divisionid'] != "")) {
      $colname_division = $_GET['divisionid'];

mysql_select_db($database_connect, $connect);
$query_division = sprintf("SELECT * FROM division WHERE divisionid = %s", GetSQLValueString($colname_division, "int"));
$division = mysql_query($query_division, $connect) or die(mysql_error());
$row_division = mysql_fetch_assoc($division);
$totalRows_division = mysql_num_rows($division);

// ADD LOG DIVISION REINSTATED
    $logarchiveSQL = sprintf("INSERT INTO log (logaction, logdivisionid, lognotes) VALUES ('Reinstated', %d, '" . $row_division['division'] . " reinstated by " . $_SESSION['MM_Username'] . "')",
                    GetSQLValueString($_GET['divisionid'], "int")); 

    mysql_select_db($database_connect, $connect);
    $Result1 = mysql_query($logarchiveSQL, $connect) or die(mysql_error());

// MESSAGE USERS DIVISION REINSTATED
    $messageinsertSQL = sprintf("INSERT INTO messages (message) VALUES ('The division " . $row_division['division'] . " has been reinstated by " . $_SESSION['MM_Username'] . " you may now select this division')",
                    GetSQLValueString($_GET['divisionid'], "int")); 

    mysql_select_db($database_connect, $connect);
    $Result4 = mysql_query($messageinsertSQL, $connect) or die(mysql_error());

// UPDATE DIVISION TO REINSTATED
    $divisionarchiveSQL = sprintf("UPDATE division SET divisionarchive=0 WHERE divisionid=%s",
                    GetSQLValueString($_GET['divisionid'], "int"));

    mysql_select_db($database_connect, $connect);
    $Result3 = mysql_query($divisionarchiveSQL, $connect) or die(mysql_error());

// REDIRECT
    $updateGoTo = "../divisions.php";
        if (isset($_SERVER['QUERY_STRING'])) {
            $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
            $updateGoTo .= $_SERVER['QUERY_STRING'];
        }
    header(sprintf("Location: %s", $updateGoTo));

    mysql_free_result($division);
    exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T12:02:06.310

由于您没有提供错误，我检查了代码并没有发现任何严重的编码。不过，一些小建议如下：

```
<?Php
if ((isset($_GET['divisionid'])) && ($_GET['divisionid'] != "")) {

    $logarchiveSQL = sprintf("INSERT INTO log (logaction, logdivisionid, lognotes) VALUES ('Division Archived', %d, 'archived by %s')",
        GetSQLValueString($_GET['divisionid'], "int"), 
        $_SESSION['MM_Username']);

    mysql_select_db($database_connect, $connect);
    $Result2 = mysql_query($logarchiveSQL, $connect) or die(mysql_error());

    $updateGoTo = "../divisions.php";
    if (isset($_SERVER['QUERY_STRING'])) {
        $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
        $updateGoTo .= $_SERVER['QUERY_STRING'];
    }
    header(sprintf("Location: %s", $updateGoTo));
    exit;
}
?> 
```

*   您应该分别对 INT 和 FLOAT 值使用 %d 或 %f。
*   既然您使用的是 sprintf，为什么不使用另一个 %s 来放置 SESSION 变量呢？
*   您应该在每个 header() 调用之后放置一个 EXIT，以确保在将程序逻辑转移到另一个页面后，该页面不再执行任何内容。
*   PHP 区分大小写，因此建议您使用此处使用的变量检查 SESSION 变量的大小写。

最终会感谢您所面临的错误！

# objective-c - 使用 Cocoa 剪辑到图像蒙版

> ID：10673065
> 
> 赞同：0
> 
> 时间：2012-05-20T11:37:58.187
> 
> 标签：objective-c, xcode, cocoa, nsimage, clip

我正在尝试实现一个类似于 XCode 4 中的选项卡栏：

![在此处输入图像描述](../Images/2f8a67d25dd3ba9da28e3b332c19e46c.png)

我可以使用自定义图像实现一个简单的选项卡控件，但我想以编程方式应用该内部阴影效果。我想只使用一种颜色提供简单的图标，没有任何渐变或阴影效果，基本上只是图标的形状。然后我会把它漆成黑色，模糊它并绘制它。但是，在绘图期间，我需要剪辑到原始形状。有人可以指出我正确的方向/课程吗？我搜索了可可绘图文档，但没有找到任何东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:28:43.100

`NSImage`有一个“模板图像”的概念。这是一张黑色清晰的图像，适用于反转、压花、雕刻等各种处理。

名称以“模板”结尾的`NSImage`按名称加载会自动标记为模板图像。否则，您可以使用 将图像标记为模板`-setTemplate:`。您可以使用 . 检查图像是否为模板`-isTemplate`。

作为模板的图像本质上不会改变图像的渲染方式。这是代码可以查看并决定更改其呈现图像的方式的一些元数据。没有太多关于应该如何执行渲染的文档。相反，您应该利用 提供的内置支持`NSCell`，这是 AppKit 中唯一关注图像是否为模板的类。

这在[较早的 AppKit 发行说明](https://developer.apple.com/library/mac/releasenotes/Cocoa/AppKitOlderNotes.html#TextAndImageEffects)中有更详细的描述。

也就是说，如果您仍在寻找制作图像蒙版并对其进行剪辑，则可能需要下拉到 Core Graphics。 `CGImage`直接支持蒙版图像的概念。 `CGContext`支持使用`CGContextClipToMask()`. 请参阅[Quartz 2D 编程指南](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBHDDBE)。

# excel - Excel Advanced Filter Unique Values on a Filtered List

> ID：10673069
> 
> 赞同：0
> 
> 时间：2012-05-20T11:38:34.627
> 
> 标签：excel, vba

Is there away using Excel Advanced Filter to filter for unique values on column where the rows have already been filtered on other columns?

Basically, I have a worksheet where other columns are using autofilter with their own criteria, and then finally I want to filter out duplicate values on this one column. However, when using Advanced Filter on this one column it is undoing all my filtering on the other columns. Now, I now when using the duplicate filter in data that I can avoid this problem, but it permanently deletes data on that column. I do not wish to lose data, I just wish to hide it - copy the final result to my other worksheet - and keep the original source.

Is there away of hiding duplicates without losing other filtering?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:29:27.700

我不认为你可以做你想做的事，我不知道。我认为不是先进行高级过滤然后将结果复制到您的其他工作表，而是需要将过滤后的列复制到没有过滤器的其他工作表，然后在其中进行高级过滤以获得最终结果（然后再次复制到尚未如有必要，另一张纸再次移除新过滤器）。从一个工作表复制和粘贴到另一个工作表会删除新工作表中的过滤器。那不适合你吗？

# scala - Why does Scala's require method in Predef allow a String as argument?

> ID：10673073
> 
> 赞同：6
> 
> 时间：2012-05-20T11:39:16.843
> 
> 标签：scala

I can the require method in Scala's Predef class with a String as second argument, e.g.

```
require ("foo" == "bar", "foobar") 
```

First a thought the require method is overloaded for different parameters as second argument. But it is not. The Signature of the require method (Scala 2.9.1) is:

```
require(requirement: Boolean, message: ⇒ Any): Unit 
```

Why is the above method call possible ?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T11:50:23.600

我不完全理解这个问题，但这里有一些解释。`require`有一个重载版本`Predef`：

```
def require(requirement: Boolean) //...
def require(requirement: Boolean, message: => Any) //... 
```

由于`message: => Any`类型，第二个有点令人困惑。如果它只是简单的可能会更容易：

```
def require(requirement: Boolean, message: Any) //... 
```

第二个参数当然是一条消息，如果不满足断言，则假定将其附加到错误消息中。你可以想象`message`应该是`String`类型，但`Any`你可以简单地写：

```
require(x == 4, x) 
```

如果不等于 ，则将`x`（类型）的实际值添加到错误消息中。这就是为什么选择 - 允许任意值。`Int``4``Any`

但是`: =>`部分呢？这称为*按名称调用*，基本上意味着：在访问此参数*时对其*进行评估。想象以下片段：

```
require(list.isEmpty, list.size) 
```

在这种情况下，您要确保`list`为空 - 如果不是，请将实际`list`大小添加到错误消息中。然而，使用正常的调用约定，`list.size`必须在调用方法*之前*评估该部分- 这可能是浪费的。使用*按名称调用*约定，`list.size`仅在第一次使用时评估 - 当错误消息是构造函数时（如果需要）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T11:49:36.360

该`require`方法存在于`Predef`scala 具有默认参数（在 2.8 中引入）之前，因此如果您想要给定参数的默认行为，重载是唯一的选择。如消息所示，第二个参数可以是任何东西，然后将其用作`message`（通过调用其`toString`方法）所抛出的`IllegalArgumentException`，（*如果*它被抛出 - 即*如果要求失败*）。

请注意，参数实际上是**按名称调用**；也就是说，它被声明为`=> Any`，这意味着它**只有在需求失败时才会被评估**。

这会以创建对象的形式造成性能损失，但在构建消息的成本很高的情况下（可能需要对数据结构进行一些 O(n) 访问），它可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T01:42:09.340

> 问题是，为什么 String 是第二个参数的有效类型，而签名说它必须是 function `message: => Any`。

签名没有这样说。签名说第二个参数是*类型的`Any`*，并且这个参数是*按名称传递的*。

“按名称”由前缀`=>`符号表示，但*并不*表示函数——函数始终表示为*输入参数*=>*结果类型*，并带有`Function0`being `() => type`。

查找参数“按值”和“按名称”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-20T12:03:27.133

答案很简单：你期望第二个参数

```
require(boolean: Boolean, message: => Any): Unit 
```

成为*Any的**Function*并询问为什么 a有效，即使它不是*Function*。*`String`*

 **将其分解为：fixed`String`只不过是一个*Function*

1.  不接受任何论据
2.  不需要`()`调用括号
3.  在每次调用中产生相同的结果

事实上，以下两个语句在 Scala 中是等价的：

```
def x: String = "ABC" // const value, even though 'def' implies a function
val x: String = "ABC" 
```

所以你可能会说`=> Any`满足 a `String`。**

# css - CSS-attr on XHTML in SVG

> ID：10673074
> 
> 赞同：0
> 
> 时间：2012-05-20T11:39:20.403
> 
> 标签：css, svg, xml-namespaces, smil, xlink

I've embedded a `<div>` in a `<svg>` using `<foreignObject>`. I want to `<animate>`its CSS attribute *opacity*, fading it in when the page has loaded. So I specified an XLink locator, referring to the target element to be animated:

```
<g xmlns:xlink="http://www.w3.org/1999/xlink">
 <animate xlink:href="#animateThis" attributeType="CSS" attributeName="opacity"  from="0"  to="1"  begin="0s" dur="1s" fill="freeze" />
</g> 
<foreignObject>
 <body xmlns="http://www.w3.org/1999/xhtml">
  <div id="animateThis" style="opacity:0">
   The quick brown fox jumps over the lazy dog.
  </div>
 </body>
</foreignObject> 
```

(The svg is embedded in a HTML5 document).

Testing it in chrome, It doesn't work. On native svg elements however, it does. How do I make this work in objects embedded with `<foreignObject>`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:55:07.330

width 和 height 是 foreignObject 元素的强制属性。如果您不设置它们，则根本不应该显示 foreignObject。我不确定这是否是 Chrome 中发生的事情，但它肯定会阻止测试用例在 Firefox 中工作。如果我添加它，如下所示：http: [//jsfiddle.net/longsonr/dLrAN/](http://jsfiddle.net/longsonr/dLrAN/)一切正常，至少在 Firefox 中它仍然可以。

然而，尽管这在 Firefox 中工作，SVG 规范只说 SVG 元素的 CSS 属性可以动画。如果 html 元素上的 CSS 属性可以通过 SVG 动画进行动画处理，这是一个额外的好处，例如，它在 Opera 11.6 中似乎对我不起作用

# eclipse - 通过更新站点安装的 SpringSource Tool Suite (STS) 无法正常工作

> ID：10673076
> 
> 赞同：1
> 
> 时间：2012-05-20T11:39:35.533
> 
> 标签：eclipse, spring, sts-springsourcetoolsuite

我已设法通过其中一个更新站点将 STS 安装到 eclipse 中。但是，我在 Eclipse 中找不到 STS 的单一迹象。正如安装指南所建议的那样，当我转到 In Window > Open perspetive> Other... 时，没有 spring 选项。但是，Spring IDE 在 Installed software 部分注册，这意味着安装成功。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T05:28:01.530

我建议您从 Spring 站点上提供的安装程序安装 STS。因为通过更新站点安装 sts 并非每次都成功。从更新站点安装时可能会出现一些错误。

这是下载安装程序文件然后安装完整 sts 的链接。首先，您将被要求填写一些详细信息，然后您将被重定向到下载页面。它非常简单。

[在此处下载 STS](http://www.springsource.org/springsource-tool-suite-download)

希望这对您有所帮助。

干杯。

# asp.net - 使用 ID 的 GUID 的子字符串，使用 Asp.NET 在同一台机器上生成的所有 GUID

> ID：10673078
> 
> 赞同：1
> 
> 时间：2012-05-20T11:39:59.337
> 
> 标签：asp.net, guid, uniqueidentifier

我读过一个[类似的问题](https://stackoverflow.com/questions/1801961/using-parts-of-guid-as-id)和[Raymond Chan 的博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)，但仍然有一个关于使用缩短的 GUID 作为 id 的问题。我知道 GUID 是唯一的，但 GUID 的子字符串不是。

我正在建立一个网站，为用户提供订单参考号。客户不想使用自动递增的 Int，因为这会暴露订单总数。他们还认为 GUID 太长且难以通过电话重复。

但是，由于我们只有一个 Web 服务器，因此建议我们可以使用 GUID 的非 MAC 地址部分来提供更短的唯一标识符。

我的理解是当前的 GUID 算法不允许这样做。这个对吗？在同一台机器上创建的 GUID 可以缩短但仍然是唯一的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:06:40.900

您仍然可以使用自动递增的 int（从 10000 开始），然后将其编码为加密的易于阅读/难以查找的字符串。这仍然保证结果是一个快速的唯一数字！

例如，这是您可以执行此操作的代码

[https://stackoverflow.com/a/5901201/159270](https://stackoverflow.com/a/5901201/159270)

和一些样本结果。

```
value: 9999999999 encoded: SrYsNt
value: 4294965286 encoded: ZNGEvT
value: 2292964213 encoded: rHd24J
value: 1000000000 encoded: TrNVzD 
```

而对于加密它，你只需要打乱你的字符图，而普通用户只有很少的数字并且不知道它们之间的关系，他们无法重新创建它们。

现在，如果您赢得了使用 Guid 并且仍然搜索查找可以切断的内容，这里是它的源代码：[http://www.webdav.org/specs/draft-leach-uuids-guids-01。文本](http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt)

在此源代码中，您可以看到它是如何构建的，从所有那部分开始，我认为我将使用 TimeStamp + 一个随机数，然后按照我上面的描述再次转换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:05:03.387

我认为这篇文章解决了你的问题，也告诉了解决方案。

[http://madskristensen.net/post/Generate-unique-strings-and-numbers-in-C.aspx](http://madskristensen.net/post/Generate-unique-strings-and-numbers-in-C.aspx)

它取自上面的链接。

> 每当我们需要生成唯一密钥时都会使用 System.Guid，但它很长。在很多情况下这不是问题，但在它是 URL 的一部分的 Web 场景中，我们需要使用它的字符串表示形式，它有 36 个字符长。它使 URL 混乱，基本上是丑陋的。
> 
> 在不丢失 GUID 的一些唯一性的情况下不可能缩短它，但是如果我们可以接受 16 个字符的字符串，我们可以取得很大的进步。
> 
> 我们可以更改标准 GUID 字符串表示：
> 
> 21726045-e8f7-4b09-abd8-4bcc926e9e28
> 
> 变成一个较短的字符串：
> 
> 3c4ebc5f5f2c4edc
> 
> 以下方法创建较短的字符串，它实际上非常独特。1000 万次迭代不会产生重复。它使用 GUID 的唯一性来创建字符串。
> 
> ```
> private string GenerateId()
> {
>  long i = 1;
>  foreach (byte b in Guid.NewGuid().ToByteArray())
>  {
>   i *= ((int)b + 1);
>  }
>  return string.Format("{0:x}", i - DateTime.Now.Ticks);
> } 
> ```
> 
> 如果你想要数字而不是字符串，你可以这样做，但你需要最多 19 个字符。以下方法将 GUID 转换为 Int64。
> 
> ```
> private long GenerateId()
> {
>  byte[] buffer = Guid.NewGuid().ToByteArray();
>  return BitConverter.ToInt64(buffer, 0);
> } 
> ```
> 
> 标准 GUID 仍然是确保唯一性的最佳方式，即使它不是 100% 唯一的。

# mysql - 从数据库中选择多个最大时间戳

> ID：10673079
> 
> 赞同：0
> 
> 时间：2012-05-20T11:40:05.193
> 
> 标签：mysql, timestamp

我有一张桌子，上面有多种产品。对于每种产品，我都在收集价格历史。因此，我有四列：

*   日志条目
*   product_id
*   产品价格
*   时间戳

到目前为止，我同时更新了所有价格。这导致了一个简单的查询：在一个子查询中，我过滤了最大时间戳，然后得到了所有的价格和产品。

今天我改变了我的更新策略：我现在异步更新产品的价格。这意味着，当我使用旧查询时，我只会得到具有最大时间戳的产品价格对。

如何在一次查询中获取每种产品的最新价格/最大时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:04:18.897

如果时间戳字段是`timestamp`数据类型，那么在记录的每次字段更新时，该时间戳字段都会自动更新。为此，您的 ts 字段应该在下表伪示例中定义。

```
CREATE TABLE t1 (
  product ...
  price ...
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
); 
```

当您仅更新产品或价格等其他字段时，ts 字段将使用当前时间戳进行更新。那么您的旧查询也应该返回最新的更新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:04:25.417

您可以对按时间戳排序的结果使用 group by。不确定它是否有效：

```
select * from (
  select * from products 
    order by timestamp desc
) as products_temp
group by product_id; 
```

# mysql - SQL 比较一个非常大的表中列的最右边的字符

> ID：10673081
> 
> 赞同：2
> 
> 时间：2012-05-20T11:40:35.250
> 
> 标签：mysql, sql, select

将 MySQL 与一个非常大的表（数百万个条目）一起使用，我需要根据其（索引）字段之一中最右边的 6 个字母找到一行。

我试过使用：`SELECT * FROM 'users' WHERE field LIKE '%abcdef'`

和`SELECT * FROM 'users' WHERE RIGHT(field,6) = 'abcdef'`

这两个查询大约需要 8.5 秒才能完成。作为比较，如果我对整个字段使用 = 运算符，则需要 0.15 秒。

我现在唯一想到的想法是在包含字段最右边的 6 个字母的表中创建一个额外的索引列，并使用 = 运算符来对付它。

任何更优雅的建议将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:44:44.457

> 我现在唯一想到的想法是在包含字段最右边的 6 个字母的表中创建一个额外的索引列，并使用 = 运算符来对付它。

这正是在 MySQL 中执行此操作的方法。

不幸的是 MySQL 还不支持[表达式](http://www.postgresql.org/docs/9.1/static/indexes-expressional.html)或[索引视图](http://msdn.microsoft.com/en-us/library/dd171921.aspx)的索引，所以你必须按照你建议的方式去做。

**有关的**

*   [是否可以在 MySQL 中有索引视图？](https://stackoverflow.com/questions/244226/is-it-possible-to-have-an-indexed-view-in-mysql)
*   [MySQL 错误：#4490 - 功能索引](http://bugs.mysql.com/bug.php?id=4990)

# qt - QT SDK MySQL nmake 错误

> ID：10673088
> 
> 赞同：2
> 
> 时间：2012-05-20T11:41:30.087
> 
> 标签：qt, qmake, nmake, qtsql

我正在尝试为 QT SDK 构建 QMYSQL 插件，并在执行 qmake 时（成功运行）-使用我放入 C 中的 MySQL win32 文件：- 我尝试运行 nmake 并收到以下错误：

```
rc is not recognized as an internal or external command, operable program or batch file -I guess it refers to the qsqlmysqld_resource.rc file here-

NMAKE: fatal error U1077: 'rc': return code 0x1
Stop.

NMAKE: fatal error U1077: C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC\bin\nmake.exe return code 0x2
Stop. 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T23:25:07.080

似乎 VC 配置不正确 请在**C:\Program Files(x86)\Microsoft Visual Studio 10.0\VC**文件夹中运行**vcvars32.bat**

 **通过链接 [qt faq](https://sicstus.sics.se/sicstus/docs/3.12.3/html/faq/Problems-Getting-Started.html)和[msdn查看更多信息](http://msdn.microsoft.com/en-us/library/x4d2c09s.aspx)**

# android - Android 计算机视觉 JavaCV OpenCV FastCV 对比

> ID：10673099
> 
> 赞同：12
> 
> 时间：2012-05-20T11:43:46.607
> 
> 标签：android, opencv, computer-vision, javacv, google-vision

我正在做学校项目，其中一部分应该是关于 Android 计算机视觉库的现状。我怀着极大的热情去研究它，因为计算机视觉似乎是一个令人着迷的主题，但我已经搜索了一个多星期，但没有找到太多。我希望能够提供有关图书馆本身以及它们之间比较的信息。

我将分享我到目前为止发现的内容。

**开放式CV**

*   似乎是最先进和最受欢迎的。

*   提供最多的功能

*   它有向后兼容性的问题

*   很快（至少我听说过，但我对此的信息为零）

*   确实有大量关于它的书籍（至少对于 C++ 版本）

**JavaCV**

*   是其他几个库的包装器，包括 opencv

**快速简历**

*   高通公司的新产品。

**维基百科**

*   这更适用于增强现实，但其核心仍然是计算机视觉。

如您所见，我有一些关于它的信息，并且对每个库进行自己的测试远远超出了我目前的计算机视觉技能。

亲切的问候，彼得。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T19:29:44.483

基本上有两种选择：OpenCV 和 FastCV

OpenCV 是一个更成熟的库，具有比 FastCV 更多的功能。对于许多计算机视觉任务，您只能在 FastCV 中找到最基本的功能，而您可以在 OpenCV 中找到几乎所有流行的替代方案。例如，检查可用的特征检测器。OpenCV 有 Harris、SURF、SIFT、FAST 等。另一方面，FastCV 只有 Harris 和 FAST。OpenCV 包含针对不同硬件的硬件优化，包括台式计算机和移动计算设备。在桌面上使用 OpenCV 的能力为您提供了更灵活的开发选项，因为您可以在开始进行移动开发之前在快速的桌面计算机上调整和测试代码。OpenCV 也被视为[Khronos 计算机视觉小组提案的一部分](http://www.khronos.org/assets/uploads/developers/library/Computer-Vision-Working-Group-Proposal-Dec11.pdf). 因此，如果获得批准，OpenCV 可以成为计算机视觉的标准 API。据我所知，FastCV 为 Snapdragon CPU 提供了卓越的优化。这可能在短期内对决策起到重要作用，但我确信 OpenCV 会很快缩小差距，如果有的话。

如果您选择 OpenCV 路径，则有两个子路径：带有 Android NDK 的 OpenCV 与带有 Android SDK 的 JavaCV。JavaCV 是基于 JavaCpp 的 OpenCV 包装器。JavaCV 主要封装了 C API，尽管 OpenCV 也提供了面向对象的 C++ API。例如，C++ API 会自动处理未使用内存的释放。但是，C API（因此是 JavaCV）要求您手动释放未使用的图像。此外，当您在 JavaCV 中遇到问题时，很难解决该问题，因为要检查的间接方式太多。直接使用 OpenCV 更容易定位问题。但是，在 Android 的情况下，不应忘记 NDK 增加的难度。

如果特定应用程序需要可用的 OpenCV 功能，并且不需要自定义像素级处理代码，那么 JavaCV 就是要走的路。但是，如果需要大量的自定义图像处理代码，Java 代码会减慢您的速度，无论如何您都需要切换到 NDK。在后一种情况下，OpenCV 是可供选择的替代方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T21:53:07.530

我会使用 OpenCV，因为它是目前最好的计算机视觉库。您将使用 C++ 编写函数，然后使用 JNI 库编译 Android 应用程序。[您可以在官方文档](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)中了解如何执行此操作。

我已经使用过这种配置，并且在 android 中的 OpenCV 性能非常好。如果您在定点算术中创建一些函数，您会注意到好处。祝你好运

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T08:09:55.820

对于基于 android 的项目，从 JavaCV 开始很容易。它包含几乎所有 OpenCV 上可用的功能。

但是JavaCV没有丰富的文档，但是OpenCV有。因此，您可以从 OpenCV 文档中找到相关方法并在 JavaCV 中使用这些方法（方法名称相同）。

[这里](http://code.google.com/p/javacv/)有一个完整的文档。这是关于如何在 Eclipse - android 环境中设置 JavaCV 的讨论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T09:25:14.943

vizier 回答得很好，但我的印象是他的分析有错误。我认为他不知道 Opencv 有一个名为 OpenCV4Android 的 android 版本。它是 c++ 功能的 Java 包装器，这意味着您可以避免使用 Android NDK 并使用 Java 编程所有内容。这将使 JavaCV “非官方”库变得多余，除了这个除了包装 opencv 之外，还包装了许多其他不错的 CV 库。

编辑：

这并没有改变关于推荐 OpenCV 的更重要的结论，它实际上为选择它增加了更多的点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-13T20:34:09.737

Android 上的 CV 有一个新选项，即[Google Mobile Vision API](https://developers.google.com/vision/)。该 API 通过`com.google.android.gms.vision`并允许您检测给定任意图像位图的各种类型的对象（面部、条形码和面部特征）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-11T03:39:27.333

从 OpenCV 开始，然后移植重要的功能，例如特征跟踪、卷积、扩张/腐蚀，也许还有 SVM。在为 android 编译的情况下，使用 #ifdef __ANDROID__ 包装这些调用，然后只需调用 FastCV 等效项。抽象是你的朋友。

# hibernate - 休眠分离条件加入限制

> ID：10673100
> 
> 赞同：0
> 
> 时间：2012-05-20T11:44:00.663
> 
> 标签：hibernate

假设我在休眠中有 ff 实体：

付款实体 w/c 有 ff。属性：

```
paymentId
person (also an entity)
type
status
date 
```

在 HQL 中，我使用以下 HQL 查询读取数据：`"FROM Payment WHERE person.firstName LIKE'%" + keyword + "%' AND person.lastName LIKE '%" + keyword + "%'`. 这很好用，但是这次如何使用 detachedcriteria 获得相同的结果？

我是新来的，所以如果我的问题有点模糊，请多多包涵。

# jquery - 如何使用 jQuery DatePicker 禁用星期几和节假日

> ID：10673101
> 
> 赞同：0
> 
> 时间：2012-05-20T11:44:11.107
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

在此处的一些帮助下，我创建了一个脚本来禁用 jQuery DatePicker 中一周中的某些天。现在我想添加禁用特定时间段（计划假期）的选项。例如。2012 年 8 月 12 日至 2012 年 8 月 30 日。谁能帮我把它包含在下面的脚本中？

我正在使用 jQuery 版本 1.7.2 和 jQuery UI 1.8.18。

```
<script>

$(function() { 
$('input.datepicker').datepicker({

dateFormat: 'DD, d MM, yy',
minDate: "+1d",
changeMonth: false, 
changeYear: false,
showOn: 'both',
buttonImage: 'images/calendar.gif',
buttonImageOnly: true,
beforeShowDay: enableDAYS
},
$.datepicker.regional['nl']);
});

function enableDAYS(date) {
var day = date.getDay();
return [(day > 2 && day < 7), ''];
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-22T04:55:03.133

我已经生成了一个具有以下功能的 jQuery 日期选择器。

*   显示从两天开始持续三周的日期
*   禁用周末选择
*   禁用选择定义的公共假期
*   在工具提示中提供假日描述

查找此[plunker](http://plnkr.co/edit/bLeTrd?p=preview)以获取更多详细信息。

```
// Contains Victorian public holidays which date selection needs to be restricted
var vicHolidays = [
  {
    date: '01/01/2015',
    desc: 'New Year Day'
  }, 
  {
    date: '26/01/2015',
    desc: 'Australia Day'
  },
  {
    date: '09/03/2015',
    desc: 'Labour Day'
  },
  {
    date: '03/04/2015',
    desc: 'Good Friday'
  },
  {
    date: '04/04/2015',
    desc: 'Saturday before Easter Sunday'
  },
  {
    date: '06/04/2015',
    desc: 'Easter Monday'
  },
  {
    date: '25/04/2015',
    desc: 'ANZAC Day'
  },
  {
    date: '08/06/2015',
    desc: 'Queens Birthday'
  },
  {
    date: '02/10/2015',
    desc: 'AFL Grand Final Holiday'
  },
  {
    date: '25/12/2015',
    desc: 'Christmas Day'
  },
  {
    date: '26/12/2015',
    desc: 'Boxing Day'
  },
  {
    date: '28/12/2015',
    desc: 'Boxing Day *Additional Day'
  }
  ];

$(function() {
  $("#datepicker").datepicker({
    firstDay: 1,    // First day of the week
    minDate: 2,     // Start of date selection
    maxDate: '10w',  // End of date selection

    /**
     * A function that takes a date as a parameter and must return an array with:
     * [0]: true/false indicating whether or not this date is selectable
     * [1]: a CSS class name to add to the date's cell or "" for the default presentation
     * [2]: an optional popup tooltip for this date
     * 
     */
    beforeShowDay: function(date) {
                var result = [true, "", ""];
                result = $.datepicker.noWeekends(date);

                if (vicHolidays === null) {
                    result[1] = "";
                } else {
                  // Format the date in the format dd/mm/yy
                    var key = $.datepicker.formatDate("dd/mm/yy", date);

        // Go through the defined Victorian holidays
                  for (var i=0; i<vicHolidays.length; i++) {
          if (key == vicHolidays[i].date) {
                      result[0] = false;
                        result[1] = "dp-highlight-holiday";
                        result[2] = vicHolidays[i].desc;
          }                      
                  }
                }
                return result;
            }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:32:33.810

**[我在这里](http://jsfiddle.net/JFq9Y/5/)**为这个解决方案创建了一个小提琴。

它模拟从“2012 年 5 月 23 日到 2012 年 5 月 24 日”的“计划假期”。

我所做的只是将您现有的 enableDAYS 函数更改为：

```
function enableDAYS(date) {
var startDate = new Date();
startDate.setFullYear(2012, 4, 22);
var endDate = new Date();
endDate.setFullYear(2012, 4, 24)
var day = date.getDay();
return [(day >= 1 && day < 6) && !(date >= startDate && date <= endDate), ''];
}​ 
```

您显然需要自己从某个地方获取计划的假期，而不是像我那样“硬编码”日期。:) 您可以以类似的方式满足公共假期的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:34:40.823

您可以使用以下代码禁用特定日期范围您可以在`dateRange`数组中指定日期范围，日期格式为`yyyy/MM/dd` 所以要禁用日期`12/08/2012`，`30/08/2012`您必须更改`dateRange`数组，如下所示

```
var dateRange = ["2012/08/12","2012/08/30"]; // yyyy/MM/dd 
```

这是小提琴中使用的代码

```
//  unavailable dates range
var dateRange = ["2012/05/20","2012/05/29"]; // yyyy/MM/dd

function unavailable(date) {
    var startDate = new Date(dateRange[0]);
    var endDate = new Date(dateRange[1]);
    var day = date.getDay();

    if(date > startDate && date < endDate )
        return [false, "disabled"];
    else if(day > 0 && day < 6)
        return [true, "enabled"];
    else 
        return [false, "disabled"];

}

$('input.datepicker').datepicker({ beforeShowDay: unavailable }); 
```

这是一个工作小提琴。

[工作演示](http://jsfiddle.net/joycse06/jPUBv/3/)

# r - R中的HMM包错误

> ID：10673104
> 
> 赞同：4
> 
> 时间：2012-05-20T11:44:15.193
> 
> 标签：r, machine-learning, hidden-markov-models

我需要一些关于这个错误的帮助。我正在尝试使用 R 中的 HMM 包构建 HMM 模块。我无法理解我的代码有什么问题。错误在于使用 Baum-Welch 算法训练 HMM

```
lathmm = initHMM(c("S","M1","M2","M3","M4","E"),c("m","i"),c(1,0,0,0,0,0),
+ matrix(c(   0,0,0,0,0,0,  
+             1,0,0,0,0,0,
+             0,1,0,0,0,0,
+             0,0,1,0,0,0,
+             0,0,0,1,0,0,
+             0,0,0,0,1,1
+             ),6,6), 
+  matrix(c(0,.5,.5,.5,.5,.5,  
+           0,.5,.5,.5,.5,.5  
+           ),6,2))
> 
> print(lathmm)
$States
[1] "S"  "M1" "M2" "M3" "M4" "E" 

$Symbols
[1] "m" "i"

$startProbs
 S M1 M2 M3 M4  E 
 1  0  0  0  0  0 

$transProbs
    to
from S M1 M2 M3 M4 E
  S  0  1  0  0  0 0
  M1 0  0  1  0  0 0
  M2 0  0  0  1  0 0
  M3 0  0  0  0  1 0
  M4 0  0  0  0  0 1
  E  0  0  0  0  0 1

$emissionProbs
      symbols
states   m   i
    S  0.0 0.0
    M1 0.5 0.5
    M2 0.5 0.5
    M3 0.5 0.5
    M4 0.5 0.5
    E  0.5 0.5 
```

-> 初始化 HMM 没有问题。

鲍姆-韦尔奇培训：

```
> prot = sample(c(rep("m",100),rep("m",300)))
>  bw = baumWelch(lathmm,prot,10)
Error in if (d < delta) { : missing value where TRUE/FALSE needed 
```

-> 这是错误。

谁可以帮我这个事。我不确定这个模块有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:01:16.647

只需尝试查看 obs 的**初始化**部分。概率。矩阵。如果您将前两个概率（对于状态“S”）更改为零以外，baumwelch 算法就可以正常工作。我使用 RStudio 运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T16:59:59.137

当“initHMM”中定义的一个或多个符号没有出现在观察中时，就会发生这种情况。

在您的情况下，您定义了符号“i”和“m”，但您的观察仅包含“m”。

在调用“baumWelch”之前添加一些“i”或删除调用“initHMM”中的符号。

# erlang - 如何检查列表理解中每个元素的响应

> ID：10673108
> 
> 赞同：3
> 
> 时间：2012-05-20T11:44:54.157
> 
> 标签：erlang

在下面的代码中，我想检查是否每次调用的`start_item`结果`ok`。`ok=`之前是不可能添加的`start_item`。

```
start_item_group(Community_code,Category_code,Group_code)->
    [
     start_item(Community_code,Category_code,Item_seq_no)
     ||
     {_Community_code,_Category_code,Item_seq_no} 
     <-
     dis_scan:get_group_item(Community_code,Category_code,Group_code),    
    ok. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T23:24:11.517

实际上，可以通过将模式匹配作为过滤器移动到列表推导中来检查哪些`start_item`调用不返回！`ok`就个人而言，我会这样做：

```
start_item_group(Community_code,Category_code,Group_code)->
  Failed = [
    Item ||
    {_Comm_code, _Cat_code, Item} <- dis_scan:get_group_item(Community_code,Category_code,Group_code),
    ok =/= start_item(Community_code, Category_code, Item)
  ],
  do_stuff_with(Failed). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:06:51.047

使用可以使用列表：foreach。foreach get 函数作为参数，您可以在这些函数中编写您想要的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:13:05.390

你可以有一个包装函数来调用和检查 start_item 的函数评估的结果，如果不是“ok”（或“ok”），就做任何需要做的事情：

```
start_item_check(ok) ->
  %% return/do whatever needs to be done if response is ok;
start_item_check(not_ok) ->
  %% return/do whatever needs to be done if response is not ok;
start_item_check(StartItemResponse) ->
  %% do whatever needs to be done if not 'ok' nor 'not_ok';
  %% it's up to your business logic.

start_item_group(Community_code,Category_code,Group_code) ->
  [
    start_item_check(start_item(Community_code,Category_code,Item_seq_no))
    ||
    {_Community_code,_Category_code,Item_seq_no}
    <-
    dis_scan:get_group_item(Community_code,Category_code,Group_code)
  ]. 
```

如果您想根据“start_item”函数返回的内容过滤掉元素，您可以简单地使用 list:filter 在您使用您的实现生成的列表上。*如果您想*继续使用列表理解，您可以这样做；否则你可以使用 list:foreach 作为 W55tKQbuRu28Q4xv prev。建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T16:18:02.357

我以前做过类似的事情，但方式不同。我也需要检查表达式的结果。我的技巧的好处是您不需要自己检查，模式匹配会为您完成。诀窍的关键是使用lists:foldl。下面是一个例子。

```
check_group(Community_code,Category_code,Group_code) ->
    Group = dis_scan:get_group_item(Community_code,Category_code,Group_code),
    StartItems = [ start_item(Community_code,Category_code,Item_seq_no) 
               || {_, _, Item_seq_no } <- Group ],
    ok = lists:foldl(fun check_start_item/2, ok, StartItems),
    exit(normal).

check_start_item(StartItem, ok) -> 
    ## Return ok if item is ok, {error, Reason} otherwise.
    ok. 
```

另一方面，如果您需要根据检查返回的结果对项目进行分组，则使用列表：分区。

```
check_group(Community_code,Category_code,Group_code) ->
    Group = dis_scan:get_group_item(Community_code,Category_code,Group_code),
    StartItems = [ start_item(Community_code,Category_code,Item_seq_no) 
               || {_, _, Item_seq_no } <- Group ],
    {GoodItems, BadItems} = lists:partition(fun check_start_item/1, StartItems),
    case BadItems of 
        [] -> exit(normal);
         _ -> error({bad_start_items, BadItems})
    end.

check_start_item(StartItem) -> 
    ## Return true if item is ok, false otherwise.
    true. 
```

# plone - 使用 grok.traversable() 实现五种.grok Plone 视图方法

> ID：10673109
> 
> 赞同：1
> 
> 时间：2012-05-20T11:44:54.923
> 
> 标签：plone, zope, grok

有一个 grok.traversable() 指令：

[http://grok.zope.org/doc/current/reference/directives.html#grok-traversable](http://grok.zope.org/doc/current/reference/directives.html#grok-traversable)

我想这样使用它：

```
class MultiLinguageContentListingHelper(grok.CodeView):
    """
    Builds JSON multilingual content out of Plone. 
    """

    grok.baseclass()
    grok.traversable("getLanguages")

    def getLanguages(self): 
```

但是，这似乎不在five.grok中：

```
AttributeError: 'module' object has no attribute 'traversable' 
```

我在这里缺少一些线来连接点

*   是不是grok版本太旧的问题

*   是不是five.grok不支持这个指令的问题

在后者的情况下，在哪里戳五.grok 以使支持发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:18:42.623

根据该错误消息，它不受支持。您需要联系 grok 邮件列表（并可能通过它，Sylvain Viollon）来了解如何获得这种支持。

您可以尝试直接从它定义的任何 grokcore.* 包中使用它，例如 grokcore.view（您需要检查）。

# mysql - 这个 mysql/myisam 表可以优化吗？

> ID：10673112
> 
> 赞同：0
> 
> 时间：2012-05-20T11:45:05.047
> 
> 标签：mysql, sql, optimization, myisam, database-performance

我运行一个网站，我需要在其中存储如下信息：

```
table: logs
 * date  (date)
 * server_1 (unsigned int)
 * server_2 (unsigned  int)
 * user_id (unsigned  int)
 * ip (unsigned int)
 * service (enum)
 * traffic (unsigned bigint) 
```

我的查询看起来像这样：

```
SELECT SUM(traffic) FROM logs WHERE user_id = 8381 AND date > DATE_ADD(CURDATE(), INTERVAL -7 DAY) AND service != 'unknown' 
```

我在所有字段上都有一个复合主键，除了流量和 user_id 和服务的索引

将流量存储为浮点数可能更有效吗？

MyIsam 也是一个很好的引擎还是我应该使用 innodb？

甚至是另一个数据库系统？

该表变得非常大（数千万行）并且被大量查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:51:08.247

MySQL[不会使用复合索引](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)，除非它使用索引中的前“n”个字段：

> MySQL 可以将多列索引用于测试索引中所有列的查询，或者只测试第一列、前两列、前三列等的查询。如果您在索引定义中以正确的顺序指定列，则单个复合索引可以加快对同一张表的多种查询。

至少为每个重要字段创建一个单独的索引，尤其是`date`列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:13:29.267

正如 Alnitak 指出的那样，问题是如何定义索引。如果您想快速访问这些日志，一个索引可能还不够。

优化通常仅通过索引完成（至少在您的情况下）。要回答您的其他问题：

*   将流量属性转换为浮点数不会带来性能，它不应该有所作为。
*   `MyISAM`很快！`InnoDB`会更慢，因为它有所有的数据库事务开销。但是：这取决于你想要什么。`MyISAM`可能真的很危险，因为它总是会中断（断电等）。速度将是使用它的主要原因，但我认为在您的情况下不会产生如此大的差异（但是索引确实如此）。始终使用`InnoDB`，除非您的数据不重要（对于日志，您可以忽略它）。
*   其他 DBMS 的行为基本类似于`InnoDB`. 我目前正在使用`PostgreSQL`，非常成熟，但绝对不如`MyISAM`.

所以，试着定义好的索引。这里的查询需要在`user_id, date`. **注意**：顺序很重要！

# c++ - 具有恒定时间访问任何元素的容器，从前面弹出并向后推？

> ID：10673113
> 
> 赞同：4
> 
> 时间：2012-05-20T11:45:23.053
> 
> 标签：c++, containers, std

我正在寻找具有恒定时间的标准容器（如果存在）：

*   按位置访问任何元素
*   从前面弹出元素
*   后推元素

我可以自己编程，但如果它已经存在于 中，为什么还要麻烦`std`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T11:47:27.153

[std::deque](http://www.cplusplus.com/reference/stl/deque/)是你的朋友。这是一个随机访问元素的双端队列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T11:48:00.527

您可以使用**[std::deque](http://www.cplusplus.com/reference/stl/deque/)**。它满足您的所有要求。

*   按位置访问任何元素

它使用随机迭代器提供随机访问，以及`operator []`

*   从前面弹出元素

它提供了**[pop_front()](http://www.cplusplus.com/reference/stl/deque/pop_front/)**

*   后推元素

它提供**[push_back()](http://www.cplusplus.com/reference/stl/deque/push_back/)**

# iphone - 如何在 iPhone 的pickerview 中为一个值设置多个值？

> ID：10673116
> 
> 赞同：0
> 
> 时间：2012-05-20T11:46:05.097
> 
> 标签：iphone, uipickerview

我有两列pickerView。在第一列中，我有公里、英尺等单位。我想为 km 1、2、3 和英尺 100、2000、300 设置不同的值。现在我做了以下代码。我在 viewDidLoad 方法中声明了两个数组 unitArray 和 distanceArray。

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 2;
}

-(NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{

if (component == UNIT)
       return [unitArray objectAtIndex:row];
else
       return [distanceArray objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

        distanceRow = [distancePicker selectedRowInComponent:DISTANCE];
        unitRow = [distancePicker selectedRowInComponent:UNIT];

        dist = [distanceArray objectAtIndex:distanceRow];
        unit = [unitArray objectAtIndex:unitRow];

        txtIBOutletDistance.text =[NSString stringWithFormat:@"%@ %@",dist,unit];
} 
```

执行此代码后，我将显示相同的公里和英尺值，即在一列中显示公里和英尺，在第二列中显示 1,2,3。我希望在选择公里后的值应该是 1、2、3，而英尺的选择值应该是 100,200,300。如果有人知道该怎么做，请帮助我。我会感激他/她。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:09:20.570

您应该根据所选 UNIT 更改 pickerView:didSelectRow:inComponent 中 distanceArray 的值，如下所示：

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if(component == UNIT) {
        unit = [unitArray objectAtIndex:row]; //unit is a property of the interface
        if([unit IsEqualToString:@"km"] {
            distanceArray = [NSArray arrayWithObject:@"1", @"2", @"3", nil];
        } else if([unit IsEqualToString:@"feet"] {
            distanceArray = [NSArray arrayWithObject:@"100", @"200", @"300", nil];
        }
    } else {
        dist = [distanceArray objectAtIndex:row];
        txtIBOutletDistance.text =[NSString stringWithFormat:@"%@ %@",dist,unit]; 
    }
} 
```

# java - 带有 jdbc 小程序的 NoClassDefFoundError

> ID：10673119
> 
> 赞同：3
> 
> 时间：2012-05-20T11:46:18.277
> 
> 标签：java, jdbc, applet, firebird, noclassdeffounderror

我使用 Eclipse 创建了一个小程序：

```
package gui;
public class MyApplet extends JApplet { 
```

这个小程序需要两个外部 jar：proj.jar 和 firebirdsql-full.jar (jdbc)

因此，我在与罐子相同的文件夹中创建了这样的 HTML：

```
<APPLET CODE="gui.MyApplet.class" width="650" height="650" ARCHIVE="proj.jar,myApplet.jar,firebirdsql-full.jar">
    <a href="http://java.com/en/download/index.jsp">Java</a>
</APPLET> 
```

我还尝试更改`ARCHIVE`属性中的 jar 顺序。

但是我不断收到以下错误（在 java 控制台中）：

```
Exception in thread "thread applet-gui.MyApplet.class-2" java.lang.NoClassDefFoundError: Could not initialize class org.firebirdsql.jdbc.FBDriver
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at db.DAO.getDBConnection(DAO.java:45)
    at db.MyDAO.initPreparedStatements(MyDAO.java:37)
    at db.MyDAO.<init>(MyDAO.java:33)
    at db.MyDAO.getInstance(MyDAO.java:27)
    at model.Controller.<init>(Controller.java:27)
    at gui.MyApplet.getJTabbedPane(MyApplet.java:81)
    at gui.MyApplet.getJContentPane(MyApplet.java:69)
    at gui.MyApplet.init(MyApplet.java:52)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我错过了什么吗？

**编辑：**

不知何故，在调试这个时，我还收到了一个不同的堆栈跟踪：

```
Exception in thread "thread applet-gui.MyApplet.class-1" 
java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at db.DAO.getDBConnection(DAO.java:45)
    at db.MyDAO.initPreparedStatements(MyDAO.java:37)
    at db.MyDAO.<init>(MyDAO.java:33)
    at db.MyDAO.getInstance(MyDAO.java:27)
    at model.Controller.<init>(Controller.java:27)
    at gui.MyApplet.getJTabbedPane(MyApplet.java:81)
    at gui.MyApplet.getJContentPane(MyApplet.java:69)
    at gui.MyApplet.init(MyApplet.java:52)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission FBLog4j read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at org.firebirdsql.logging.LoggerFactory.getLogger(LoggerFactory.java:36)
    at org.firebirdsql.logging.LoggerFactory.getLogger(LoggerFactory.java:72)
    at org.firebirdsql.jdbc.FBDriver.<clinit>(FBDriver.java:63)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:52:51.690

现在我们看到了第二个堆栈跟踪，很清楚发生了什么：JDBC 驱动程序正在尝试使用 Log4J 进行日志记录。它试图从驱动程序类的静态初始化程序中的系统属性中获取日志记录参数，但它失败了，因为未签名的小程序没有读取系统属性的权限。

您可以签署您的小程序并将该属性（java.util.PropertyPermission FBLog4j 读取）授予它，但老实说，这不是好兆头；我希望它会在您修复此异常后立即引发其他一些安全异常。如果这个驱动程序没有被编写成可以从一个小程序工作，那么这很可能是一个愚蠢的差事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:15:32.890

可以说，未签名的小程序在“受限”沙箱中运行。更多信息请参见 Oracle 文档：[http ://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

我的猜测，就像例外所说的那样，是 FBDriver.java:63 （在 Firebird 内部）正在做一些 JVM 不允许的事情。

顺便说一句，在小程序中加载 JDBC 驱动程序有点奇怪，但我离题了..

# java - 使用 Stripes 框架拦截和更改请求 url

> ID：10673120
> 
> 赞同：0
> 
> 时间：2012-05-20T11:46:23.193
> 
> 标签：java, servlet-filters, stripes

我在拦截和更改请求 url 以将其链接到正确的 URL 时遇到问题。我正在使用条纹框架，并希望将用户重定向到正确的子域。例如。如果用户属于 abc.sitename.com 并且请求来自 xyz.sitename.com 他应该被重定向到 abc.sitename.com 所有请求发布。对于 getparameter，我通过简单地获取请求 url 和请求查询并在生命周期解析执行之前从自定义拦截类重定向用户来完成此操作。但是所有 post 参数都被刷新，因为它是重定向的。另一种解决方案是转发解决方案，但它可以将用户置于上下文中，我需要将其覆盖为：

```
resolution = new OnwardResolution<ForwardResolution>(reponseUrl) {
                    @Override
                    public void execute(HttpServletRequest request,
                            HttpServletResponse response) throws Exception {
                        request = ctx.getRequest();
                        response = ctx.getResponse();
                        String path = reponseUrl; //getUrl(request.getLocale());
                        // Set event name as a request attribute
                        String oldEvent = (String) request.getAttribute(StripesConstants.REQ_ATTR_EVENT_NAME);
                        //request.setAttribute(StripesConstants.REQ_ATTR_EVENT_NAME, event);
                        log.info("check: {}", path);
                        // Revert event name to its original value
                        request.setAttribute(StripesConstants.REQ_ATTR_EVENT_NAME, oldEvent);
                        // Figure out if we're inside an include, and use an include instead of a forward
                        RequestDispatcher dispatcher = request.getRequestDispatcher(path);
                        //request.getRequestDispatcher(path).forward(request, response);
                        dispatcher.forward(request, response);

                    }
                }; 
```

但它在应用程序上下文路径中调用，而它应该调用完整的 url。另一种解决方案，如果我使用重定向解析并设置 includerequest 参数 true 将完成这项工作，但将所有请求参数放入 url 这使得它不可接受。

请求 url 应该在解析执行之前更改，因为它没有用，我已经尝试过了。有什么方法可以在 HTTPServeletRequest 中设置请求 url。

我也尝试过在 ActionBeanResolution 期间进行拦截，这是进行此类活动的最佳场所。我的主要问题是 POST 参数。我无法重定向（因为它们被刷新或者如果使用包含 reuest 参数，它们在 URL 中可见）。上下文中的前向解决方案。如果有办法将其转发到新 URL，它将完成这项工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:18:20.290

使用 POST 重定向是不可能的。故事结局。

只要确保*abc*用户永远不会看到指向*xyz*的链接或表单。

为 GET 请求重定向（如果用户直接在地址栏中输入*xyz* URL），并为 POST 请求重定向到某个错误页面或主页，因为无论如何都不应该发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:57:50.623

@JB Nizet 和 @Pointy 感谢您的时间和回复。我想出了一个解决我的问题的方法。@Pointy我正在更改需要重定向的用户子域，但我也不想在该请求中丢失发布参数。我希望现在它是有道理的。

这是我所做的（在步骤中）：

*   首先，我想何时需要进行重定向并需要保存 post 参数。
*   将所有帖子数据保存在会话中（临时）。
*   如果我在会话中有任何临时发布值，我将其放入新请求中并从会话中删除发布值。

代码：用于在会话中设置 post 参数：

```
resolution = new RedirectResolution(reponseUrl);
            Iterator<Map.Entry<String, String[]>> requestParamter = ctx.getRequest().getParameterMap().entrySet().iterator();
            List<IdName> requestParams = new ArrayList<IdName>();
            while(requestParamter.hasNext()){
                IdName param = new IdName();
                Map.Entry<String, String[]> entry = requestParamter.next();
                param.setName(entry.getKey());
                param.setParameterValues(entry.getValue());
                log.trace("intercept - Adding Key: {} with value: {} to redirect request parameter.", entry.getKey(), entry.toString() );
                requestParams.add(param);
            }
            ctx.setRedirectRequestParameter(requestParams); 
```

为了取回它：

```
if(ctx.getRedirectRequestParameter() != null && !ctx.getRedirectRequestParameter().isEmpty()){
                //Removes parameter which are already in request from redirect request parameter.
                Map<String, String[]> additionalParams = new TreeMap<String, String[]>();
                Map requestParameterMap = ctx.getRequest().getParameterMap();
                ListIterator<IdName> oldRequestParams = ctx.getRedirectRequestParameter().listIterator();
                while(oldRequestParams.hasNext()){
                    IdName oldRequestParam = oldRequestParams.next();
                    log.trace("Lopping requestparameter key: {} ", oldRequestParam.getName() );
                    if (!requestParameterMap.containsValue(oldRequestParam.getName())) {
                        additionalParams.put(oldRequestParam.getName(), oldRequestParam.getParameterValues());
                    }
                }
                HttpServletRequest newRequest = new MyperksHttpServletRequestWrapper(ctx.getRequest(), additionalParams);
                ctx.setRequest(newRequest);
                ctx.setRedirectRequestParameter(null);
            } 
```

我还创建了一个包装器类，它向请求添加了新参数，它创建了一个新的请求包装器，它将附加参数合并到请求对象中，而不会过早地从原始请求中读取参数。有关此类的详细信息，请点击链接：[PrettyFaceRequestWrapper](http://ocpsoft.org/opensource/how-to-safely-add-modify-servlet-request-parameter-values/)。

# php - MVC 概念是否适用于静态 PHP 页面？

> ID：10673121
> 
> 赞同：1
> 
> 时间：2012-05-20T11:46:29.943
> 
> 标签：php, model-view-controller, frameworks

我正在尝试构建自己的 PHP MVC 框架。

目前我正在创建一个简单的 2 页网站，其中每个页面都扩展了一个模板页面，这样我在创建新页面时就不必担心元标记、页眉、导航和页脚。

我试图找出一种方法将其溢出到 MVC 的单独组件中，但不能

这让我相信 MVC 不一定是这个框架的前进方向。

那么，MVC 概念是否适用于静态（静态我的意思是唯一的用户输入是点击链接，没有登录或任何东西）PHP 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:08:42.597

## 你需要MVC吗

*   MVC 概念可以应用于具有静态页面的网站吗？**是**的，它可以。
*   你应该使用它吗？**不**，除非您期望项目增长。

MVC 架构的核心是将业务逻辑与表示逻辑分离。

在（您所说的）静态站点中，模型层（是的，它是层，而不是类）的唯一作用是从缓存或数据库中获取内容。在这种情况下，您将获得**更多的框架然后工作**，因为设置 MVC 结构需要更多的代码，然后是有用的部分。

## 你应该建立一个框架

一定要做一个。在 PHP 社区中，这几乎就像一个成人礼。如果您至少没有制作过几个框架，那么您就不是真正的 PHP 开发人员。

不过，您应该记住，您至少需要 3 次迭代才能构建出不糟糕的东西。那是假设您实际上研究了 OOP 原理，而不是模仿其他一些框架。

## 对于一个小项目来说，什么是更好的选择

与其写一个完整的 MVC 框架，不如试着写一些遵循它的精神的东西。

您应该从两件事开始：

1.  您的应用程序应该有*Single Point of Entrance*。这意味着，如果用户写`http://who.cares/article/1`，那么您应该将 URL 重写为`index.php?url=article/1`

2.  分离关注点。基本上，在此类应用程序中，您有 3 种不同的事情要做：

    *   解析用户的请求
    *   获取数据
    *   显示收集到的信息

[对于最后一部分，您可能会从本文](http://codeangel.org/articles/simple-php-template-engine.html)中受益。其余的，你将不得不自己决定。

只是不要`mysql_*`从数据库中收集数据的古老功能（如果有的话）。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:02:17.447

由于您的页面需要一种编程语言来更改内容、对用户输入等进行操作，因此它根本不是静态的。当您仅使用标记和样式语言时，它们是静态的。

很难说您的项目是否需要可靠的架构。对于静态页面，您不需要 mvc。对于您的 2 页项目，我认为您不需要 mvc，除非您的页面非常动态（1 页可以有多个状态）。

如果您真的想制作自己的框架，您应该阅读更多关于应用程序的结构和架构的信息。通常只有中型/大型应用程序需要坚实的结构/架构（例如：mvc）。

最终答案：我认为您的应用不需要 mvc 。
PS：做自己的mvc框架很好，学到很多东西。但是，如果您单独完成它（如果您想让它比现有的更好），将需要很多时间来完成它。没有可靠的（近乎完美的:)）php mvc 框架。PHP 社区缺乏一个良好的和世界范围内接受的框架。许多框架，但都有其优点和缺点。我什至听到一些开发人员说 zend mvc 更像是一个库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T12:16:13.367

首先，永远不需要 mvc。这只是一种公认​​的模式，可以方便地提供组织、健壮性、安全性......

然后，如果你想要我的意见，你越早熟悉它在你的静态页面中实现它，就越容易继续你的下一页。

# javascript - 如何使用 canvas.toDataURL() 将 Canvas 保存为图像？

> ID：10673122
> 
> 赞同：176
> 
> 时间：2012-05-20T11:46:30.993
> 
> 标签：javascript, html, cordova, canvas, save

我目前正在构建一个 HTML5 网络应用程序/Phonegap 本机应用程序，但我似乎无法弄清楚如何将我的画布保存为带有`canvas.toDataURL()`. 有人可以帮帮我吗？

这是代码，它有什么问题？

//我的画布被命名为“canvasSignature”

JavaScript：

* * *

```
function putImage()
{
  var canvas1 = document.getElementById("canvasSignature");        
  if (canvas1.getContext) {
     var ctx = canvas1.getContext("2d");                
     var myImage = canvas1.toDataURL("image/png");      
  }
  var imageElement = document.getElementById("MyPix");  
  imageElement.src = myImage;                           

} 
```

HTML5：

* * *

```
<div id="createPNGButton">
    <button onclick="putImage()">Save as Image</button>        
</div> 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-03-28T15:16:41.000

这是一些代码。没有任何错误。

```
var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");  // here is the most important part because if you dont replace you will get a DOM 18 exception.

window.location.href=image; // it will save locally 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2017-06-11T19:28:57.563

This solution allows you to change the name of the downloaded file:

HTML:

```
<a id="link"></a> 
```

JAVASCRIPT:

```
 var link = document.getElementById('link');
  link.setAttribute('download', 'MintyPaper.png');
  link.setAttribute('href', canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"));
  link.click(); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-02-25T15:32:34.297

你可以试试这个；创建一个虚拟的 HTML 锚点，然后从那里下载图像......

```
// Convert canvas to image
document.getElementById('btn-download').addEventListener("click", function(e) {
    var canvas = document.querySelector('#my-canvas');

    var dataURL = canvas.toDataURL("image/jpeg", 1.0);

    downloadImage(dataURL, 'my-canvas.jpeg');
});

// Save | Download image
function downloadImage(data, filename = 'untitled.jpeg') {
    var a = document.createElement('a');
    a.href = data;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-05-20T12:39:56.050

您可以使用[canvas2image](https://github.com/hongru/canvas2image)来提示下载。

我遇到了同样的问题，这是一个简单的示例，它既将图像添加到页面并强制浏览器下载它：

```
<html>
    <head>
        <script src="http://hongru.github.io/proj/canvas2image/canvas2image.js"></script>
        <script>
            function draw(){
                var canvas = document.getElementById("thecanvas");
                var ctx = canvas.getContext("2d");
                ctx.fillStyle = "rgba(125, 46, 138, 0.5)";
                ctx.fillRect(25,25,100,100); 
                ctx.fillStyle = "rgba( 0, 146, 38, 0.5)";
                ctx.fillRect(58, 74, 125, 100);
            }

            function to_image(){
                var canvas = document.getElementById("thecanvas");
                document.getElementById("theimage").src = canvas.toDataURL();
                Canvas2Image.saveAsPNG(canvas);
            }
        </script>
    </head>
    <body onload="draw()">
        <canvas width=200 height=200 id="thecanvas"></canvas>
        <div><button onclick="to_image()">Draw to Image</button></div>
        <image id="theimage"></image>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-08-28T10:10:14.120

我创建了一个小型库来执行此操作（以及其他一些方便的转换）。它被称为[reimg](http://www.github.com/gillyb/reimg)，使用起来非常简单。

`ReImg.fromCanvas(yourCanvasElement).toPng()`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-06-02T08:10:27.387

*类似于[1000Bugy 的答案](https://stackoverflow.com/a/35783382/695734)，但更简单，因为您不必即时制作锚点并手动发送点击事件（加上 IE 修复）。*

如果您将下载按钮设置为锚点，则可以在运行默认锚点功能之前对其进行劫持。因此`onAnchorClick`，您可以将锚点 href 设置为画布 base64 图像，并将锚点下载属性设置为您想要命名图像的任何内容。

这在（当前）IE 中不起作用，因为它没有实现下载属性并阻止数据 uri 的下载。但这可以通过使用`window.navigator.msSaveBlob`来解决。

因此，您的锚点单击事件处理程序将如下所示（其中和`anchor`是范围查找）：`canvas``fileName`

```
function onClickAnchor(e) {
  if (window.navigator.msSaveBlob) {
    window.navigator.msSaveBlob(canvas.msToBlob(), fileName);
    e.preventDefault();
  } else {
    anchor.setAttribute('download', fileName);
    anchor.setAttribute('href', canvas.toDataURL());
  }
} 
```

这是[一个小提琴](https://jsfiddle.net/Sjeiti/opsjbrjL/)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-03-03T21:28:40.000

这对我有用：（仅限谷歌浏览器）

```
<html>
<head>
    <script>
            function draw(){
                var canvas = document.getElementById("thecanvas");
                var ctx = canvas.getContext("2d");
                ctx.fillStyle = "rgba(125, 46, 138, 0.5)";
                ctx.fillRect(25,25,100,100);
                ctx.fillStyle = "rgba( 0, 146, 38, 0.5)";
                ctx.fillRect(58, 74, 125, 100);
            }

            function downloadImage()
            {
                var canvas = document.getElementById("thecanvas");
                var image = canvas.toDataURL();

                var aLink = document.createElement('a');
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("click");
                aLink.download = 'image.png';
                aLink.href = image;
                aLink.dispatchEvent(evt);
            }
    </script>
</head>
<body onload="draw()">
    <canvas width=200 height=200 id="thecanvas"></canvas>
    <div><button onclick="downloadImage()">Download</button></div>
    <image id="theimage"></image>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-20T11:58:26.590

而不是`imageElement.src = myImage;`你应该使用`window.location = myImage;`

即使在那之后，浏览器也会显示图像本身。您可以右键单击并使用“保存链接”来下载图像。

检查[此链接](http://books.google.com.tr/books?id=jhJNl6yWvYAC&pg=PA171&lpg=PA171&dq=canvas%20dataToURL&source=bl&ots=4iPeQOxasl&sig=FFQv3ZdRthyst644jdDGQzONn7M&hl=tr&sa=X&ei=-9q4T9OnD8WA4gSJxOXrCQ&ved=0CHoQ6AEwBg#v=onepage&q&f=false)以获取更多信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-13T22:03:06.480

也可以使用元素引用下载图像：

HTML：

```
<a download style="display:none" ref="imageDownloadRef"></a> 
```

JAVASCRIPT：

```
 this.$refs['imageDownloadRef'].href = this.canvas.toDataURL({
  format: 'jpeg',
  quality: 1.0,
  })
  const imageDownloadLink = this.$refs.imageDownloadRef as HTMLElement
  imageDownloadLink.click() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-04T14:39:02.103

我为此目的创建了简单的打字稿函数，只需删除要与 javascript 一起使用的类型。

```
 //ImagePath == canvas.toDataUrl()
private saveImage(imagePath: string, imageName: string ){
    const link = document.createElement('a');
    link.style.display = 'none';
    document.body.appendChild(link)
    link.setAttribute('download', imageName + '.png');
    link.setAttribute('href', imagePath.replace("image/png", "image/octet-stream"));
    link.click();
}

 //function call
 saveImage(canvas.toDataURL(), "myName") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-19T14:56:06.623

在 Cordova 中运行时，您不能使用前面提到的方法下载图像。您将需要使用**Cordova 文件插件**。这将允许您选择保存位置并利用不同的持久性设置。此处的详细信息：[https ://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/)

或者，您可以将图像转换为 base64，然后将字符串存储在**localStorage**中，但如果您有许多图像或高分辨率，这将很快填满您的配额。

* * *

## 回答 #12

> 赞同：-8
> 
> 时间：2013-02-21T09:22:35.013

@Wardenclyffe 和@SColvin，你们都在尝试使用画布保存图像，而不是使用画布的上下文。你都应该尝试 ctx.toDataURL(); 尝试这个：

```
var canvas1 = document.getElementById("yourCanvasId");  <br>
var ctx = canvas1.getContext("2d");<br>
var img = new Image();<br>
img.src = ctx.toDataURL('image/png');<br>
ctx.drawImage(img,200,150);<br> 
```

您也可以参考以下链接：

[http://tutorials.jenkov.com/html5-canvas/todataurl.html](http://tutorials.jenkov.com/html5-canvas/todataurl.html)

[http://www.w3.org/TR/2012/WD-html5-author-20120329/the-canvas-element.html#the-canvas-element](http://www.w3.org/TR/2012/WD-html5-author-20120329/the-canvas-element.html#the-canvas-element)

# google-apps-script - UrlFetchApp 获取帖子到 Zoho Creator API，Zoho 需要关闭会话

> ID：10673123
> 
> 赞同：0
> 
> 时间：2012-05-20T11:46:39.077
> 
> 标签：google-apps-script, zoho

我正在使用 UrlFetchApp fetch 发布到 Zoho Creator 的 API。

然而，我获得了正确的响应，在帖子完成后，Zoho Creator 平台将会话显示为活动状态。

这是不可取的，因为 Zoho 在其 API 停止响应帖子之前只允许有限数量的活动会话。

有没有人对使用 UrlFetchApp 后如何实现“关闭”会话有任何经验或建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:11:48.780

您需要查看 Zoho 的 API 以及他们对此的要求。这不是 UrlFetchApp 相关问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T06:44:43.597

我在 Zoho API 论坛中找到了这个：

> **注销/关闭工单**：
> 
> 您可以在完成操作后关闭/清除/注销/使特定 API 工单无效。发送到 Zoho Accounts 以关闭 API 票证的 HTTPS POST 请求将如下所示：
> <form method="POST" action="https://accounts.zoho.com/logout" target="_self">
> <input type="hidden" name="ticket" value="<ticket_value>">
> <input type="hidden" name="FROM_AGENT" value="true">
> </form>
> 注意：参数区分大小写。

请检查这是否对您有用：[https ://forums.zoho.com/topic/attn-zoho-api-developers-important-data-api-update-limit-concurrent-api-sessions-to-20-use -https-post-for-generating-tickets](https://forums.zoho.com/topic/attn-zoho-api-developers-important-data-api-update-limit-concurrent-api-sessions-to-20-use-https-post-for-generating-tickets)

# android - 打开文件夹的意图

> ID：10673126
> 
> 赞同：0
> 
> 时间：2012-05-20T11:46:58.057
> 
> 标签：android, android-intent

不知道为什么每当我通过意图调用默认文件管理器时，列表中有一个“包安装程序”，选择它会弹出并错误“解析包有问题”。

截屏：

![在此处输入图像描述](../Images/b823ec887a79fbdd3bd1e1f5ebdfc467.png)

顺便说一句，我正在使用此代码

```
intent = new Intent();
intent.addCategory(Intent.CATEGORY_DEFAULT);
intent.setData(Uri.parse("file://" + mRecorder.getRecordDir()));
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:10:06.553

您对您的`Intent`. 如果您要使用隐式`Intents`，请提供一个操作。

> 每当我通过意图调用默认文件管理器时

首先，正如 Stratton 先生在评论中指出的那样，Android 中没有“默认文件管理器”。

其次，我不知道您为什么认为`Intent`无论如何都会出现“默认文件管理器”。

# sorting - Monggomapper ：使用关联模型的键对数据进行排序

> ID：10673135
> 
> 赞同：0
> 
> 时间：2012-05-20T11:48:49.963
> 
> 标签：sorting, mongodb, mongomapper, model-associations

这基本上是一项简单的任务，但我找不到如何在 Mongomapper 模型中使用属于其关联的键执行排序/排序数据的方法。

就像假设我有两个模型：

```
class Product 
 include MongoMapper::Document

 key :name, String
 key :product_category_id, ObjectId

 belongs_to :product_category
end

class ProductCategory
 include MongoMapper::Document

 key :name, String, :required => true, :unique => true
end 
```

我想做的只是简单地从“产品”中获取按“产品类别名称”排序的数据。我已经尝试过：

```
Product.where(:name => /#{@keyword}/i).sort("product_category.name".to_sym) 
```

但不工作，以及许多其他执行错误的方式作为回报:(...

有人可以帮我解决这个问题吗？真的很感激。。。

谢谢

问候， 罗尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:05:31.240

如您的问题中所述， Product 和 ProductCategory 映射到 MongoDB 中的单独集合。因此，您不能执行 SQL 连接、排序、选择和唯一操作。对于一个普通的查询，MongoDB 不会访问多个集合。您可以在本地内存中对产品进行排序，但这需要同时获取产品及其关联的 product_categories。

```
Products.all.sort{|a, b| a.product_category.name <=> b.product_category.name} 
```

但是，您可以利用嵌入的优势，使数据全部在一个集合中，因此可以很容易地被 MongoDB 排序。

```
class Product
  include MongoMapper::Document

  key :name, String
  one :product_category
end

class ProductCategory
  include MongoMapper::EmbeddedDocument

  key :name, String
end 
```

请注意，ProductCategory 是一个 EmbeddedDocument。下面的测试显示了“product_category.name”的 MongoMapper 排序子句。希望这对您的理解和进步有所帮助。

测试/单元/product_test.rb

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
  def setup
    Product.delete_all
  end

  test "association sort" do
    Product.create(name: 'Act of Valor', product_category: ProductCategory.new(name: 'movie'))
    Product.create(name: 'Oliver Twist', product_category: ProductCategory.new(name: 'book'))
    assert_equal(2, Product.count)

    products_by_db_order = Product.all.to_a
    assert_equal(['Act of Valor', 'Oliver Twist'], products_by_db_order.map(&:name))
    p products_by_db_order.map(&:name)

    products_by_category_order = Product.sort('product_category.name').to_a
    assert_equal(['Oliver Twist', 'Act of Valor'], products_by_category_order.map(&:name))
    p products_by_category_order.map(&:name)
  end
end 
```

输出

```
Run options: --name=test_association_sort

# Running tests:

["Act of Valor", "Oliver Twist"]
["Oliver Twist", "Act of Valor"]
.

Finished tests in 0.042368s, 23.6027 tests/s, 70.8082 assertions/s.

1 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

# rsa - 使用 SHA256 签名

> ID：10673146
> 
> 赞同：5
> 
> 时间：2012-05-20T11:50:12.953
> 
> 标签：rsa, sha1, signature, sha256, rsacryptoserviceprovider

我有一张智能卡，我需要用它签署一个文件。正如我在stackover中看到的那样，这是一个大问题。

我不能使用 RSACryptoServiceProvider，bkz 它不支持 RSA-SHA256 算法。

起初我使用 CAPICOM.dll ，如下面的代码，

```
SignedData sed = new SignedData();
sed.Content = "a"; // data to sign
Signer ser = new Signer();
ser.Certificate = cc;
string singnn = sed.Sign(ser, false, CAPICOM_ENCODING_TYPE.CAPICOM_ENCODE_BASE64); 
```

但是没有公钥来验证我的签名值，我无法从 capicom.dll 获得验证密钥。

之后 ，

我使用了 X509Certificate2 和 RSACryptoServiceProvider ，如下面的代码，

```
 X509Certificate2 certificate = new X509Certificate2();
        // Access Personal (MY) certificate store of current user
        X509Store my = new X509Store(StoreName.My, StoreLocation.CurrentUser);
        my.Open(OpenFlags.ReadOnly);

        // Find the certificate we'll use to sign            
        RSACryptoServiceProvider csp = null;
        foreach (X509Certificate2 cert in my.Certificates)
        {
            if (cert.Subject.Contains(certSubject))
            {
                // We found it. 
                // Get its associated CSP and private key
                certificate = cert;
                csp = (RSACryptoServiceProvider)cert.PrivateKey;
            }
        }
        if (csp == null)
        {
            throw new Exception("No valid cert was found");
        }

        // Hash the data
        SHA1Managed sha1 = new SHA1Managed();
        UnicodeEncoding encoding = new UnicodeEncoding();
        byte[] data = encoding.GetBytes(text);
        byte[] hash = sha1.ComputeHash(data);

        //byte[] data = Encoding.UTF8.GetBytes(text);
        //HashAlgorithm sha = new SHA256Managed();
        //byte[] hash = sha.TransformFinalBlock(data, 0, data.Length);

        string key = csp.ToXmlString(false);
        // Sign the hash
        csp.PersistKeyInCsp = true;
        byte[] response = csp.SignData(data, CryptoConfig.MapNameToOID("SHA1"));
        string signbase64 = Convert.ToBase64String(response); 
```

它有效，但我需要使用 RSA-SHA256 算法签名。当我像这样更改哈希算法时

```
byte[] response = csp.SignData(data, CryptoConfig.MapNameToOID("SHA256")); 
```

我得到一个

> 错误：“未指定的错误”。

那是我的问题，解决方案是什么，或者我应该使用哪个库？

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T08:46:28.457

RSACryptoServiceProvider 确实适用于基于 SHA2 的签名，但您必须投入一些精力。

当您使用证书获取 RSACryptoServiceProvider 时，底层 CryptoAPI 提供程序是什么真的很重要。默认情况下，当您使用“makecert”创建证书时，它是“RSA-FULL”，它仅支持 SHA1 哈希进行签名。您需要支持 SHA2 的新“RSA-AES”。

因此，您可以使用附加选项创建证书：-sp "Microsoft Enhanced RSA and AES Cryptographic Provider"（或等效的 -sy 24），然后您的代码将如下所示（在 .NET 4.0 中）：

```
var rsa = signerCertificate.PrivateKey as RSACryptoServiceProvider;
//
byte[] signature = rsa.SignData(data, CryptoConfig.CreateFromName("SHA256")); 
```

如果您无法更改颁发证书的方式，则有一个半合法的解决方法，该解决方法基于默认情况下创建 RSACryptoServiceProvider 并支持 SHA2。因此，下面的代码也可以工作，但它有点难看：（这段代码的作用是创建一个新的 RSACryptoServiceProvider 并从我们从证书中获得的密钥导入密钥）

```
var rsa = signerCertificate.PrivateKey as RSACryptoServiceProvider;
// Create a new RSACryptoServiceProvider
RSACryptoServiceProvider rsaClear = new RSACryptoServiceProvider();
// Export RSA parameters from 'rsa' and import them into 'rsaClear'
rsaClear.ImportParameters(rsa.ExportParameters(true));
byte[] signature = rsaClear.SignData(data, CryptoConfig.CreateFromName("SHA256")); 
```

希望你觉得这很有帮助。

# php - 文件路径结构 ajax 和 php 会话

> ID：10673147
> 
> 赞同：0
> 
> 时间：2012-05-20T11:50:21.930
> 
> 标签：php, javascript, jquery, mysql, session

我正在做一个到处都是的项目。我的显示文件是 index.php。从那里我通过 jquery 调用 ajax 函数，然后调用 php 文件从 mysql 表中获取和接收用户数据。php 函数将一些数据保存到 php 会话变量中，有时只是将数据返回给 ajax。

我对 ajax、php 和大部分会话都很陌生，我发现我制作文件路径的方式可能有问题......例如，我发现有时使用完整的 URL 文件路径而不是只是 /functions/updateUser.php 可以打破链接！

所以我的问题是，服务器究竟是如何通过 php 会话传递变量的？

如果我的文件结构如下，这会产生问题吗？我的第二个问题是文件结构是否也会影响 ajax 数据的返回方式？

Root > index.php
Root > sessions.php
Root > 函数 >（调用数据库的 php 文件）
Root > 脚本 >（调用 php 函数的 js 文件）

我已经搜索了可以帮助我更清楚地理解（和心理图片）这些信息如何从页面传递到页面的教程，但什么也没找到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:18:59.540

您的文件结构很好，与任何编码问题无关。

进行 AJAX 调用时，您调用的是 URL，因此完整的 URL 很好。但是，在调用您的函数时，您实际上包含了一个文件，该文件预计将驻留在您的服务器文件夹中，因此调用需要与您的调用文件的位置相关，而不是 URL。

**会议**

当您调用 session_start() 时，它会生成一个 cookie 并将会话 ID 存储在客户端浏览器中。因此，任何配置为拒绝 cookie 的客户端浏览器都将无法使用会话。当您设置会话变量时，服务器会将其存储在服务器上会话文件中的会话 ID 文件中。当您的程序从会话中请求一个值时，PHP 会在该会话文件中检查该变量并返回该值。这个想法是保存在会话文件中的大数据会使服务器变慢，并且不是理想的编码方式。在您的程序中，您可以查看 jQuery 以及 jQuery 中的几行代码如何提升您的程序以利用 AJAX 和 JSON 非常有效地发送和接收大量数据。

有关 PHP 会话的更多信息在[这里](http://www.php.net/manual/en/book.session.php)。

jQuery AJAX 信息在[这里](http://api.jquery.com/category/ajax/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:46:44.363

你只需解决一个有趣的问题，你就必须把它做对。

要回答您的问题：

1) $_SESSION 用于在您的应用程序中构建持久行为，这意味着您可以跨请求传递数据。**所有可以序列化**的东西，都被序列化为字符串并写入文件。当请求时，数据会从该文件中反序列化并重建到 $_SESSION 数组中。[更多关于这里的会议](http://www.php.net/manual/en/reserved.variables.session.php)。

2) 不，只要您返回一个具有正确 Content-Type 等的有效字符串（来自您的 PHP 脚本）。“ajax 数据”只是从您的 PHP 脚本中回显的字符串。正确设置标题例如：`header('Content-Type: text/javascript');`在回显之前。

**关于内容类型的说明**：这取决于你想在另一边实现什么。如果您使用 jQuery 并使用它构建客户端逻辑，那么您可能想要发送 JSON。在这种情况下，我建议将您的内容类型设置为“text/javascript”，而不是“正确”类型，即“application/json”。我曾经在使用 Internet Exploder 和 Firefox 时遇到很多问题，浏览器会与 application/json 混淆。由于 JSON 是 javascript（表示法），因此它始终可以使用“text/javascript”按预期工作。

有一个很好的 ini 指令“ `include_path`”，您可以根据自己的特定需求进行调整。有用的函数是[set_include_path()](http://php.net/set_include_path)和[get_include_path()](http://php.net/get_include_path)。只有这两个你才能创造奇迹。

PHP 中的文件按“include_path”指令中的顺序包含。为了使其在包含/需要文件时更加灵活，请考虑 3 种最常用的做法：

1.  用你的文件结构设置你的 include_path
2.  构建一些花哨的自动加载器（参见[spl_autoload](http://www.php.net/manual/en/function.spl-autoload.php)功能）
3.  仅 5.3+，使用命名空间

这些天`include_path`不那么受欢迎，因为每个人都倾向于用“适当的方式”和其他蹩脚的借口来吹嘘事情。如果您不构建另一个 Facebook、Twitter 或 Youtube-wannabe 应用程序，请考虑 include_path。它很简单，并且可以非常强大（而不是使用臃肿的技术）。

计划你的结构，并像这样添加你的目录：

```
<?php
// somewhere at the very top of your entry script
set_include_path(implode(PATH_SEPARATOR, array_merge(array(
    '/path/to/app/dir1',
    '/path/to/app/dir2',
    '/even/path/outside/your/app',
    // ...
), explode(PATH_SEPARATOR, DEFAULT_INCLUDE_PATH))));
?> 
```

这会将您的 php.ini 文件 (DEFAULT_INCLUDE_PATH) 中设置的当前路径与您的结合起来。

现在，当您包含/需要一些脚本时，它将尝试按此列表的顺序包含它。

抱歉，解释太长了。希望它有所帮助；）

# android - 您的应用程序的快捷方式到家，自动

> ID：10673150
> 
> 赞同：1
> 
> 时间：2012-05-20T11:50:40.773
> 
> 标签：android, android-launcher

安装后，如何在正在使用的启动器主页中为我的应用程序**自动**创建快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:57:20.153

检查[此](http://codinggeekorg.wordpress.com/2011/01/02/android-how-to-add-home-screen-shortcuts-to-your-app/)页面，其中包含有关如何完成此操作的教程。但请注意，这是未记录的，并且可能不适用于所有设备。还要检查[这个](https://stackoverflow.com/a/6337645/473637)关于 SO 的相关问题的答案。我还相信，从 Android 4.0 开始，如果操作系统可以在主屏幕上找到足够的空间来进行快捷方式，则会自动为新安装的应用程序执行此操作。

# c# - 获取 twitter 公共时间线，json+C#，无 3rd 方库

> ID：10673158
> 
> 赞同：2
> 
> 时间：2012-05-20T11:52:13.253
> 
> 标签：c#, .net, json, twitter

我是 C# 和 JSON 的初学者，我只用 Java 编码（基本的东西，比如读/写文件、哈希图等，没有任何 Web 开发，初学者程序员）

我是一名学生，我的任务是用 C# 编写一个与 twitter 交互的控制台应用程序。现在，我坚持使用极端基础知识。我正在尝试使用 JSON 和 C# 在公共时间轴中获取推文。我通过使用 Twitterizer 成功地做到了这一点，但我最近才发现我不能使用第 3 方库（NewtonSoft.JSON.dll 除外），并且必须从头开始编写所有代码。如果有人能为我提供执行此操作的示例代码，并且最好从公共时间线上打印出最新的推文及其对应的用户，我将不胜感激，这样我就可以大致了解如何读取和使用数据。

我对 JSON 和 C# 的理解非常有限，但这是我知道我应该开始做的事情：

1.  WebRequest w1 = WebRequest.Create("http://api.twitter.com/1/statuses/public_timeline.json");
2.  w1.getResponse();
3.  我不知道该怎么做/如何解析 JSON 文件

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:23:06.187

这可以作为一个起点。（您也可以使用[Json Viewer](http://jsonviewer.codeplex.com/)来获取 json 的格式化版本）

```
using (WebClient webClient = new WebClient())
{
    string url = "http://api.twitter.com/1/statuses/public_timeline.json";
    dynamic json = JsonConvert.DeserializeObject(webClient.DownloadString(url));

    foreach (var item in json)
    {
        Console.WriteLine("{0} {1}", item.user.id, item.user.screen_name);
    }
} 
```

PS：JsonConvert 是 NewtonSoft 库的一部分

# java - 尝试在 JBoss AS 7.1 中访问我的应用程序时出错

> ID：10673172
> 
> 赞同：1
> 
> 时间：2012-05-20T11:54:59.723
> 
> 标签：java, jboss, jndi, jboss7.x

我最近将我的应用程序从 JBoss AS 4.2.1 迁移到 JBoss AS 7.1，但由于收到以下错误，我无法访问应用程序 vua http 请求：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Unable to instantiate Action, payment.PaymentBean,  defined for 'prepayment' in namespace '/payment'javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.TPGWeb.war:main" from Service Module Loader - action - vfs:/content/TPGWeb.war/WEB-INF/classes/struts.xml:26:64
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:518)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421) 
```

根本原因

```
Unable to instantiate Action, payment.PaymentBean,  defined for 'prepayment' in namespace '/payment'javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.TPGWeb.war:main" from Service Module Loader - action - vfs:/content/TPGWeb.war/WEB-INF/classes/struts.xml:26:64
com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:289)
com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:360)
com.opensymphony.xwork2.DefaultActionInvocation.access$000(DefaultActionInvocation.java:38)
com.opensymphony.xwork2.DefaultActionInvocation$1.doProfiling(DefaultActionInvocation.java:78)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:70)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:66)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:41)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:497)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421) 
```

根本原因

```
java.lang.RuntimeException: javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.TPGWeb.war:main" from Service Module Loader
utils.ResourceCenter.lookupGatewaySecurityBean(ResourceCenter.java:76)
payment.PaymentBean.<init>(PaymentBean.java:39)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:121)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:152)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:141)
com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:111)
com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:270)
com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:360)
com.opensymphony.xwork2.DefaultActionInvocation.access$000(DefaultActionInvocation.java:38)
com.opensymphony.xwork2.DefaultActionInvocation$1.doProfiling(DefaultActionInvocation.java:78)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:70)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:66)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:41)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:497)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421) 
```

根本原因

```
javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.TPGWeb.war:main" from Service Module Loader
org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)
javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:681)
javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:305)
javax.naming.InitialContext.init(InitialContext.java:240)
javax.naming.InitialContext.<init>(InitialContext.java:192)
utils.ResourceCenter.lookupGatewaySecurityBean(ResourceCenter.java:66)
payment.PaymentBean.<init>(PaymentBean.java:39)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:121)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:152)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:141)
com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:111)
com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:270)
com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:360)
com.opensymphony.xwork2.DefaultActionInvocation.access$000(DefaultActionInvocation.java:38)
com.opensymphony.xwork2.DefaultActionInvocation$1.doProfiling(DefaultActionInvocation.java:78)
com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:70)
com.opensymphony.xwork2.DefaultActionInvocation.<init>(DefaultActionInvocation.java:66)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:41)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:497)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421)

note The full stack trace of the root cause is available in the JBoss Web/7.0.13.Final logs.
JBoss Web/7.0.13.Final 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:58:27.453

将“依赖项：org.jboss.remote-naming”添加到 .WAR 文件的 META-INF/manifest.mf 中。这将加载 org.jboss.remote-naming 模块并消除“Failed instantiate InitialContextFactory”异常。详情在这里：[https ://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)

使用 jboss-ejb-client.properties 文件并将其放置到 WEB-INF 文件夹 vs 内容如下：

```
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED=false 
remote.connections=default 
remote.connection.default.host=your host
remote.connection.default.port=your port
remote.connection.default.username=you user
remote.connection.default.password=you password
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS=false 
```

并以这种方式查找：

```
Properties jndiProps = new Properties();
jndiProps.puy(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
jndiProps.put(Context.SECURITY_PRINCIPAL, JBOSS_USER);
jndiProps.put(Context.SECURITY_CREDENTIALS, JBOSS_PWD);
jndiProps.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
jndiProps.put(Context.PROVIDER_URL, "remote://yourhost:yourport");
InitialContext initialContext = new InitialContext(jndiProps);
YourRemote remote=(YourRemote)initialContext.lookup("java:/app-name/ejb-jar-name/YourBean!package.YourRemote"); 
```

详情见： [https ://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T15:14:15.323

从上面的帖子...“将“依赖项：org.jboss.remote-naming”添加到 .WAR 文件的 META-INF/manifest.mf。”

非常感谢上述帮助。它让我离迁移到 JBoss EAP 6 又近了一步。

如果您有一个必须部署在非 JBoss 服务器上的 War 文件，则上述的替代方法是将以下内容添加到 jboss-deployment-structure.xml 文件中。

这样做的好处是将 JBoss 特定元素分离到它们自己的 JBoss 特定文件中。

```
<sub-deployment name="yourWebApp.war">
    <dependencies>
    <module name="org.jboss.remote-naming" />
    </dependencies>
</sub-deployment> 
```

问候，欧文

# android - Android无法将数据保存到第二个表中

> ID：10673173
> 
> 赞同：0
> 
> 时间：2012-05-20T11:55:26.230
> 
> 标签：android, database, sqlite

我在 sqlite 数据库中有两个表。第一个获取岸上的数据输入。当我尝试将数据输入到第二个表（设置）时，出现错误：

```
05-20 14:25:04.941: E/Database(352): Error inserting uri=null gender=female     
age_month=12 age_day=05 age_year=1190 name=Tom
05-20 14:25:04.941: E/Database(352): android.database.sqlite.SQLiteConstraintException: 
```

将数据插入表中的 Main 活动方法是：

```
public class Choose extends Activity implements OnClickListener, OnCheckedChangeListener{

    private static final int SELECT_PICTURE = 1;
    static String selected ImagePath, Gender, BDYear, BDMonth, BDDay, bfNameת;
    EditText bName;
    TextView outPut;
    Button saveSettings, browseImageBtn;
    RadioGroup genderGroup;
    RadioButton male, female;
    DatePicker bBornDate;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.choose_image);
        bName = (EditText) findViewById(R.id.editText1);
        saveSettings = (Button) findViewById(R.id.settingsSaveBtn);
        browseImageBtn = (Button) findViewById(R.id.chooseimg);
        genderGroup = (RadioGroup) findViewById(R.id.genderGroup);
        male = (RadioButton) findViewById(R.id.Male);
        female = (RadioButton) findViewById(R.id.Female);
        bBornDate = (DatePicker) findViewById(R.id.bBorndatePicker);
        outPut = (TextView) findViewById(R.id.settingsOutPutText);
        genderGroup.setOnCheckedChangeListener(Choose.this);
        saveSettings.setOnClickListener(Choose.this);
        browseImageBtn.setOnClickListener(Choose.this); 

    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    String ipath = selectedImagePath;

    public void onClick(View v) {
        if (browseImageBtn == v){
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"),
                    SELECT_PICTURE);
        }else if(saveSettings == v){
            BDYear = "1190";

            BDMonth =  "12";

            BDDay = "05";

            String bfName = "Tom"; 

            String pt = ipath;
            String bn = bfName;
            String bg = Gender;
            String bbdy = BDYear;
            String bbdm = BDMonth;
            String bbdd = BDDay;

            DatBas settingentry = new DatBas(Choose.this);
            settingentry.open();
            settingentry.createEntrySettings(pt, bn, bg, bbdy, bbdm, bbdd);
            settingentry.close();

//          Intent myIntent = new Intent(Choose.this, Tamar_appActivity.class);
//          Choose.this.startActivity(myIntent);

            //read the data

        }

    }

    public void onCheckedChanged(RadioGroup arg0, int arg1) {
        switch (arg1){
        case R.id.Male:
            Gender = "male";
            break;
        case R.id.Female:
            Gender = "female";
            break;
        }
    }
}

The DatBas Helper is:

public class DatBas {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_SHOURS = "start_hour";
    public static final String KEY_SMINUTE = "start_minute";
    public static final String KEY_SDATE = "start_date";
    public static final String KEY_AMOUNT = "amount";
    public static final String KEY_SIDE = "side";
    public static final String KEY_KIND = "kind";

    public static final String KEY_ROW_ID = "_id2";
    public static final String KEY_IMAGE_PATH = "uri";
    public static final String KEY_NAME = "name";
    public static final String KEY_GENDER = "gender";
    public static final String KEY_BORN_DATE_YEAR = "age_year";
    public static final String KEY_BORN_DATE_MONTH = "age_month";
    public static final String KEY_BORN_DATE_DAY = "age_day";

    private static final String DATABASE_NAME = "TamatDB";
    private static final String DATABASE_TABLE = "stop_watch_records";
    private static final String DATABASE_TABLE_SETTINGS = "settings";

    private static final int DATABASE_VERSION = 3 ;

    private TamarDatabase thdb;
    private static Context tcontext;
    private SQLiteDatabase tdb;

    private static class TamarDatabase extends SQLiteOpenHelper {

        public TamarDatabase(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String ctData = "CREATE TABLE  " + DATABASE_TABLE + " ( "
                    + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_SHOURS + " TEXT NOT NULL, " + KEY_SMINUTE
                    + " TEXT NOT NULL, " + KEY_SDATE + " TEXT NOT NULL, "
                    + KEY_AMOUNT + " TEXT NOT NULL, " + KEY_SIDE
                    + " TEXT NOT NULL, " + KEY_KIND + " TEXT NOT NULL );";
            db.execSQL(ctData);

            String ctSettings = "CREATE TABLE " + DATABASE_TABLE_SETTINGS
                    + " ( " + KEY_ROW_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_IMAGE_PATH + " TEXT NOT NULL, " + KEY_NAME
                    + " TEXT NOT NULL, " + KEY_GENDER + " TEXT NOT NULL, "
                    + KEY_BORN_DATE_YEAR + " TEXT NOT NULL, "
                    + KEY_BORN_DATE_MONTH + " TEXT NOT NULL, "
                    + KEY_BORN_DATE_DAY + " TEXT NOT NULL);";
            db.execSQL(ctSettings);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
            onCreate(db);
        }
    }

    public DatBas(Context c) {
        tcontext = c;
    }

    public DatBas open() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getWritableDatabase();
        return this;
    }

    public SQLiteDatabase getReadableDatabase() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getReadableDatabase();
        return tdb;
    }

    public void close() {
        tdb.close();
    }

    public long createEntry(String sh, String sm, String sd, String at,
            String tside, String tkind) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_SHOURS, sh);
        cv.put(KEY_SMINUTE, sm);
        cv.put(KEY_SDATE, sd);
        cv.put(KEY_AMOUNT, at);
        cv.put(KEY_SIDE, tside);
        cv.put(KEY_SIDE, tkind);

        return tdb.insert(DATABASE_TABLE, null, cv);
    }

    public long createEntrySettings(String pt, String bn, String bg,
            String bbdy, String bbdm, String bbdd) {
        ContentValues cv2 = new ContentValues();
        cv2.put(KEY_IMAGE_PATH, pt);
        cv2.put(KEY_NAME, bn);
        cv2.put(KEY_GENDER, bg);
        cv2.put(KEY_BORN_DATE_YEAR, bbdy);
        cv2.put(KEY_BORN_DATE_MONTH, bbdm);
        cv2.put(KEY_BORN_DATE_DAY, bbdd);

        return tdb.insert(DATABASE_TABLE_SETTINGS, null, cv2);
    }

    public String getData() {
        String[] columns = new String[] { KEY_ROWID, KEY_SHOURS, KEY_SMINUTE,
                KEY_SDATE, KEY_AMOUNT, KEY_SIDE, KEY_KIND };
        Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
                null);
        String results = "";

        int iRaw = c.getColumnIndex(KEY_ROWID);
        int iShours = c.getColumnIndex(KEY_SHOURS);
        int iSminute = c.getColumnIndex(KEY_SMINUTE);
        int iDate = c.getColumnIndex(KEY_SDATE);
        int iAmount = c.getColumnIndex(KEY_AMOUNT);
        int iSide = c.getColumnIndex(KEY_SIDE);
        int iKind = c.getColumnIndex(KEY_KIND);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + "the id is " + c.getString(iRaw)
                    + " the sart hour is " + " " + c.getString(iShours)
                    + " the start minute is " + " " + c.getString(iSminute)
                    + " the start date is " + " " + c.getString(iDate)
                    + " the amount is " + " " + c.getString(iAmount)
                    + " the side is " + " " + c.getString(iSide)
                    + " the kind is " + " " + c.getString(iKind) + "\n";
        }
        return results;
    }

    public String getDataSettings() {
        String[] columns = new String[] { KEY_ROW_ID, KEY_IMAGE_PATH,
                KEY_NAME, KEY_GENDER, KEY_BORN_DATE_YEAR,
                KEY_BORN_DATE_MONTH, KEY_BORN_DATE_DAY };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawId = c.getColumnIndex(KEY_ROW_ID);
        int iBIPath = c.getColumnIndex(KEY_IMAGE_PATH);
        int iBName = c.getColumnIndex(KEY_NAME);
        int iGender = c.getColumnIndex(KEY_GENDER);
        int iBBDateYear = c.getColumnIndex(KEY_BORN_DATE_YEAR);
        int iBBDateMonth = c.getColumnIndex(KEY_BORN_DATE_MONTH);
        int iBBDateDay = c.getColumnIndex(KEY_BORN_DATE_DAY);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + " the kind is " + " " + c.getString(iRawId)
                    + " the kind is " + " " + c.getString(iBIPath)
                    + " the kind is " + " " + c.getString(iBName)
                    + " the kind is " + " " + c.getString(iGender)
                    + " the kind is " + " " + c.getString(iBBDateYear)
                    + " the kind is " + " " + c.getString(iBBDateMonth)
                    + " the kind is " + " " + c.getString(iBBDateDay) + "\n";
        }
        return results;
    }

    public String getDataSettingsName() {
        String[] columns = new String[] { KEY_ROW_ID, KEY_NAME };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawId = c.getColumnIndex(KEY_ROW_ID);
        int iBName = c.getColumnIndex(KEY_NAME);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            String[] resultsS = new String[] { c.getString(iRawId),
                    c.getString(iBName) };
        }
        return results;
    }

    public DatBas delete() {
        tdb.delete(DATABASE_TABLE, null, null);
        tdb.delete(DATABASE_TABLE_SETTINGS, null, null);
        return null;
    }

    public static class TamarDatabaseCursor extends SQLiteCursor {

        /** The query for this cursor */
        private static final String QUERY = "SELECT _id2, uri, name, gender, age_year, age_month, age_day"
                + " FROM settings";

        /** Cursor constructor */
        private TamarDatabaseCursor(SQLiteDatabase db,
                SQLiteCursorDriver driver, String editTable, SQLiteQuery query) {
            super(db, driver, editTable, query);
        }

        /** Private factory class necessary for rawQueryWithFactory() call */

        private static class Factory implements SQLiteDatabase.CursorFactory {
            public Cursor newCursor(SQLiteDatabase db,
                    SQLiteCursorDriver driver, String editTable,
                    SQLiteQuery query) {
                return new TamarDatabaseCursor(db, driver, editTable, query);
            }
        }

        /* Accessor functions get one per database column */

        public int getActressId() {
            return getInt(getColumnIndexOrThrow("actress.actressId"));
        }

    }

    public TamarDatabaseCursor getActress() {
        SQLiteDatabase d = getReadableDatabase();
        TamarDatabaseCursor c = (TamarDatabaseCursor) d.rawQueryWithFactory(
                new TamarDatabaseCursor.Factory(), TamarDatabaseCursor.QUERY,
                null, null);
        c.moveToFirst();
        return c;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:12:37.543

> 05-20 14:25:04.941: E/Database(352): 插入 uri=null 性别=female age_month=12 age_day=05 age_year=1190 name=Tom 时出错 05-20 14:25:04.941: E/Database(352 ):
> android.database.sqlite.SQLiteConstraintException:

查看您的架构。在您的代码示例中，您使用约束声明了**每一**列，`NOT NULL`然后您尝试插入`uri=null`.

1.  `NOT NULL`如果它们有时可能，请不要创建所有列`NULL`，或者如果它们不应该为空，请修复您的代码。

2.  制作每一列`TEXT`都是错误的。请花时间研究 SQLite 并制定适当的架构。[http://sqlite.org](http://sqlite.org)

# python - 以元组形式循环给定索引列表的列表列表

> ID：10673176
> 
> 赞同：4
> 
> 时间：2012-05-20T11:56:02.687
> 
> 标签：python, list, tuples

我有一个像这样的元组列表

```
a = [(1, 2), (2, 2), (3, 2)] 
```

此列表的长度会有所不同。顺序也可以颠倒，例如：

```
a = [(3, 2), (2, 2), (1, 2)] 
```

我还有一个列表列表，例如：

```
b = [['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0']] 
```

现在我想遍历这个列表列表并修改具有索引的项目：

```
b[3][2]
b[2][2]
b[1][2] 
```

所以索引取决于a。我试过这个：

```
for item in indexes_list:
    b[item[0]][item[1]] = '1' 
```

但这为我修改了整个最后一列（我只想用 a 中给出的索引修改最后一列的最后 3 项）。实现这一目标的最佳方法是什么？

编辑：感谢您的回复，但他们没有为我工作。我都试过了，同样的事情发生了。我也在 index_list 上犯了这个错误（这是一个错字），因为我试图简化问题。我应该进一步阐述。

列表列表用于某种井字游戏。我必须测试用户输入的移动是否将对手的棋子夹在中间。它不必是 3x3 棋盘，因此可以进行长距离移动，以便将多个对手棋子夹在中间。如果移动确实夹住了对手棋子，则对手棋子被抹去，由用户棋子替换。

当我尝试这两种方法时，它会在第一次遍历 for 循环后迅速为整个列执行此操作（通过放置断点和调试，检测到了这一点）。这是我编的代码：

```
 for i, j in (indexes[0])[:len(y_p.rstrip('.'))]:
            print item
            board[i][j] = user
            print board 
```

我使用 print 语句来查看调试时会发生什么。User 是一个变量，它保存用户片段的 str 值。rstrip 方法用于检测移动应该在哪里。

默认情况下，板是：

```
[['.', '.', '.', '.', '.'], ['.', 'X', 'O', '.', '.'], ['.', 'O', 'X', '.', '.'], ['.', '.', '.', '.', '.'], ['.', '.', '.', '.', '.']] 
```

y_p 打印

```
'.OX.' # board[3][1] + board[2][1] + board[1][1] + board[0][1] 
```

索引[0] 打印

```
[(3, 1), (2, 1), (1, 1), (0, 1)] 
```

但我只想这样做

```
[(3, 1), (2, 1), (1, 1)] 
```

因为 board[0][1] 坐标定义了一个空白区域（无效）。此列表中的第一个坐标板[3][1] 是用户想要移动的位置。board[2][1] 是对手棋子，board[1][1] 是用户棋子。因此它应该转动由坐标定义的碎片

```
[(3, 1), (2, 1), (1, 1)] 
```

到用户的一块。但它是为这些坐标做的（注意这是一个 5x5 板）

```
[(4,1), (3, 1), (2, 1), (1, 1)] 
```

所以即使 board[4][1] 不在初始索引列表中，也会被修改。执行后，板子变成：

```
[['.', 'X', '.', '.', '.'], ['.', 'X', 'O', '.', '.'], ['.', 'O', 'X', '.', '.'], ['.', 'X', '.', '.', '.'], ['.', 'X', '.', '.', '.']] 
```

这是不对的（第一行和最后一行的“X”不应该在那里）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T11:59:12.337

一个问题是您的索引列表被调用`a`，但您引用的是`indexes_list`.

修复此错误，它可以工作：[（ideone）](http://ideone.com/rgSsX)

```
indexes_list = [(3, 2), (2, 2), (1, 2)]
b = [['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0']]

for item in indexes_list:
    b[item[0]][item[1]] = '1'

print b 
```

结果：

```
[['0', '0', '0'], ['0', '0', '1'], ['0', '0', '1'], ['0', '0', '1']] 
```

* * *

注意：在你说“但我试过了，它对我不起作用”之前，请仔细阅读代码并特别注意是如何`b`构造的。以下非常相似的替代方法**不起作用**，因为它们创建了一个包含对同一列表的 4 个引用的列表。

错误的做法：[（ideone）](http://ideone.com/a6MeA)

```
bb = ['0', '0', '0']
b = [bb, bb, bb, bb]          # Wrong!!! 
```

另一种错误的做法：[（ideone）](http://ideone.com/RXX70)

```
b = [['0', '0', '0']] * 4     # Wrong!!! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T12:00:12.453

```
a = [(1, 2), (2, 2), (3, 2)]
b = [['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0'], ['0', '0', '0']]
for i, j in a:
    b[i][j] = '1'

print b 
```

```
[['0', '0', '0'], ['0', '0', '1'], ['0', '0', '1'], ['0', '0', '1']] 
```

# actionscript-3 - StageWebView 能否在桌面设备上运行？

> ID：10673178
> 
> 赞同：0
> 
> 时间：2012-05-20T11:56:11.577
> 
> 标签：actionscript-3, air, adobe, desktop, stagewebviewbridge

我需要创建一个在 StageWebView 中打开网站的 Windows 应用程序。当我在 Flash IDE 中测试它时 - 它可以正确打开。当我将它发布到 *.exe 文件时，我看到的只是一个空白的 flash 文件。

有人可以告诉我 StageWebView 是否支持桌面设备，如果支持，如何正确发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:53:11.173

只要您作为 AIR 发布，StageWebView 就可以在桌面上运行。如果您只是使用导出到 EXE 功能，它将无法正常工作，因为您基本上只是将普通的 Web Flash Player 与您的 SWF 文件打包在一起，并且无法访问 AIR 提供的扩展 API。

因此，只需确保更改您的发布设置以发布为 AIR 应用程序，您应该会很好。

# delphi - Delphi 动态创建的弹出菜单项 - 无效的指针操作/访问冲突

> ID：10673180
> 
> 赞同：2
> 
> 时间：2012-05-20T11:56:26.893
> 
> 标签：delphi

我对错误消息“无效的浮点运算”有疑问。弹出菜单是一个设计时控件，它被命名为`NavPop`. 它没有分配菜单项。它被指定为弹出菜单`Panel1`。

然后我从列表框中动态创建菜单项，并分配标题和点击事件。就我想要完成的工作而言，一切都 100% 有效。即它有效。

只有当我关闭程序时，我才能得到

> 无效的浮点运算

或以其他方式：

> 访问冲突地址 000007355。读取地址 0000007355。

请注意，一切正常，除了我关闭程序时的错误。我将不胜感激任何帮助。

```
 //  I declare the Array of TMenuItems
 private
    { Private declarations }
    ItemArray : array of TMenuItem;

...    

procedure TMainForm.Button1Click(Sender: TObject);
begin
  CreateNavPop;
end;

//  Create the menu items from listbox(Navlist) items and Link them 
//  to events on a navigation bar.
procedure TMainForm.CreateNavPop;
var
  I:  Integer;
  NavIndex:  Integer;
begin
  SetLength(ItemArray, NavList.Items.Count);
  NavIndex:=0;
  For I:=0 to NavList.Items.Count-1 do
  begin
    NavIndex:=NavBar1.Items.ItemByCaption(NavList.Items.Strings[i]).Index;
    ItemArray[i]:=TMenuItem.create(Nil);
    ItemArray[i].Caption:=NavList.Items.Strings[i];
    ItemArray[i].OnClick:=NavBar1.Items.Items[Navindex].OnClick;
    NavPop.Items.Add(ItemArray[i]);
  end;
end;

//  Call the Items free on program close
procedure TMainForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  FreeItems(ItemArray);
end;

//  Free Dynamically created Menu Items on Form Close
procedure TMainForm.FreeItems(MItems : array of TMenuItem);
var
  cnt : integer;
begin
  for cnt := High(MItems) downto Low(MItems) do
  begin
    MItems[cnt].Free;
    MItems[cnt] := nil;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:28:59.830

发生这种情况是因为 TPopupMenu 已经释放了这些项目，而您正在再次释放它。

此代码导致“无效的指针操作”：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to 3 do
    PopupMenu1.Items.Add(TMenuItem.Create(nil));
end;

destructor TForm1.Destroy;
var
  I: Integer;
begin
  for I := 3 downto 0 do
    PopupMenu1.Items.Free;
  inherited;
end; 
```

Items 属性是一个 TMenuItem 实例，如果您查看它的析构函数，它已经释放了您添加的所有项目。

```
destructor TMenuItem.Destroy;
begin
...
  while Count > 0 do Items[0].Free;
... 
```

保持简短，您无需在 FreeItems 方法中再次执行此操作。

我用 ReportMemoryLeaksOnShutdown := True 进行了测试，没有发生内存泄漏。

# .net - IIS 7、WebFarm 和 ARR 模块

> ID：10673182
> 
> 赞同：1
> 
> 时间：2012-05-20T11:56:34.560
> 
> 标签：.net, wcf, iis-7, appfabric, web-farm-framework

我正在配置我的服务器以使用 WebFarm 和 ARR 模块。我正在寻找一种功能，以在我的系统上使用 ARR 进行版本控制。示例： - 我有 N 个客户端连接托管在我的农场服务器上的 Wcf 服务。- 客户端通过 WsHttpBinding 连接服务。- 客户端用户用户名/密码验证使用服务方法。

用户名和密码是我能够识别我在服务器端获得的客户端的唯一方法。我想控制例如客户端 (1,5,8) 使用版本 1 上的服务，客户端 (2,3,4,6,7) 使用版本 2 上的服务。

我可以用 ARR 来做吗？我不明白是否可以选择将用户名和密码与 url 规则联系起来。

我知道 Wcf 路由服务，但我需要一个更通用的路由控制，例如网站，而不仅仅是 Wcf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:48:19.577

ARR 使用条件规则。我自己没有对此进行测试，但您可以尝试在 REMOTE_USER 字段上创建规则。

有关完整列表，请参阅：

[http://msdn.microsoft.com/en-us/library/ms524602(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524602(v=vs.90).aspx)

# python - Python执行命令行，发送输入和读取输出

> ID：10673185
> 
> 赞同：8
> 
> 时间：2012-05-20T11:57:09.613
> 
> 标签：python, io

如何实现以下功能：

1.  Python执行一个shell命令，等待用户`input`做某事
2.  用户键入后`input`，程序会响应一些`output`
3.  Python 捕获`output`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T12:03:48.253

你可能想要`subprocess.Popen`. 要与进程通信，您将使用该`communicate`方法。

例如

```
process=subprocess.Popen(['command','--option','foo'],
                         stdin=subprocess.PIPE,
                         stdout=subprocess.PIPE,
                         stderr=subprocess.PIPE)
inputdata="This is the string I will send to the process"
stdoutdata,stderrdata=process.communicate(input=inputdata) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-04T10:48:37.093

对于同步行为，您可以使用[**`subprocess.run()`**](https://docs.python.org/3/library/subprocess.html#subprocess.run)从 开始的函数`Python v3.5`。

正如Subprocess.popen 和 subprocess.run接受的答案有[什么区别中所述：](https://stackoverflow.com/questions/39187886/what-is-the-difference-between-subprocess-popen-and-subprocess-run)

> 主要区别在于*`subprocess.run`*执行命令并等待它完成，而*`subprocess.Popen`*你可以在进程完成时继续做你的事情，然后重复调用`subprocess.communicate`自己来传递和接收数据给你的进程。

# compilation - 检查makefile中的文件大小，如果文件太短则停止

> ID：10673189
> 
> 赞同：4
> 
> 时间：2012-05-20T11:57:26.473
> 
> 标签：compilation, makefile

有没有办法检查特定文件的大小是否小于某个常数？我假设 makefile 中的大小有关，并且想确保如果我的假设没有得到满足，我会得到一个错误。类似于 assert 的东西，但在 makefile 中。

```
if filesize(file) > C then error
else continue compilation 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:11:13.777

把它放在你的规则中，在编译之前的某个地方：

```
 test -n "$$(find filename -a -size +NNNc)" 
```

其中`filename`是文件名，`NNN`是八位字节的大小。这将返回 false 并`make`在大小小于或等于 时停止`NNN`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T15:22:56.090

我的方法可能不是最漂亮的解决方案，但它对我有用:)

```
CHECKFILE = \
    if [ ! -f "file" ]; then \
        echo "file does not exist" ; exit 1 ; \
    fi; \
    FSIZE=$$(du -b "file" | cut -f 1) ; \
    if [ $$FSIZE -lt 100000 ]; then \
        echo "filesize too small" ; exit 1 ; \
    fi

all:
    @$(CHECKFILE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T23:04:43.280

我更喜欢这个——如果大于 256 字节则继续，否则停止制作——为了可读性：

```
test `wc -c <$<` -gt 256; 
```

在反引号内，文件`$<`被定向到`wc -c`，它返回以字节为单位的大小`$<`。在反引号评估 的大小之后`$<`，`test`然后将其与`-gt`“大于”运算符一起使用。

# asynchronous - Lua 生产者-消费者模式，消费者等待不同的数据

> ID：10673196
> 
> 赞同：0
> 
> 时间：2012-05-20T11:58:36.033
> 
> 标签：asynchronous, io, lua, producer-consumer

**问题**

*   一个数据源以格式生成数据`{key, value}`
*   多个接收者各自等待不同的密钥

**例子**

获取数据是循环运行的。有时我会想通过使用来获得下一个用键标记的值

```
Value = MyClass:GetNextValue(Key) 
```

我希望我的代码停在那里，直到值准备好（产生某种未来（？）值）。我尝试过使用简单的协程，但它们仅在等待**任何**数据时才起作用。

所以我想问的问题是**如何使用协程或类似概念（无线程）在 lua 中实现异步值？**

**旁注**

主处理函数除了将值返回给等待的消费者外，还会自己处理一些传入的数据（例如，用特殊键标记）。

完整的使用上下文应该类似于：

```
-- in loop
    ReceiveData()
    ProcessSpecialData()
--

-- Called outside the loop:
V = RequestDataWithGivenKey(Key) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:31:17.470

> 如何实现异步值

您首先不实现异步*值*。您实现异步*函数*：在检索到该值之前，您不会取回该值。

首先，您的代码必须在 Lua 协程中。我假设您了解协程的护理和喂养。我将重点介绍如何实施`RequestDataWithGivenKey`：

```
function RequestDataWithGivenKey(key)
  local request = FunctionThatStartsAsyncGetting(key)
  if(not request:IsComplete()) then
    coroutine.yield()
  end

  --Request is complete. Return the value.
  return request:GetReturnedValue()
end 
```

`FunctionThatStartsAsyncGetting`返回`request`函数。`request`是一个存储处理特定请求所需的所有数据的对象。它代表要求价值。这应该是一个启动实际异步获取的 C 函数。

这`request`将是一个用户数据或一个封装的 Lua 表，它存储足够的信息以与执行异步获取的 C 代码进行通信。`IsComplete`使用内部`request`数据查看该请求是否已完成。`GetReturnedValue`只能在`IsComplete`返回 true 时调用；它将值放在 Lua 堆栈上，以便该函数可以返回它。

您的外部代码只需要在内部处理异步内容。在这些 Lua 协程的恢复之间，如果有未完成的请求，您将需要泵送正在执行获取的任何异步内容。

# php - Foreach 循环回显

> ID：10673197
> 
> 赞同：0
> 
> 时间：2012-05-20T11:58:39.553
> 
> 标签：php, foreach

最后一个 foreach 循环似乎没有回显我想要的列表，它没有打印任何内容。我怎样才能解决这个问题？我知道它变得相当复杂，但任何帮助将不胜感激。

```
$allTroopsList = array();
$allMissionsList = array();
while ($mytroops = $alltroops->fetch_assoc()) 
{
    $allTroopsList []= $mytroops;
}

while ($mymissions = $allmissions->fetch_assoc()) 
{
    $allMissionsList []= $mymissions;
}

while($userintroop = $allUsersintroops->fetch_assoc()) 
{
    if($userintroop['userid'] == $_SESSION['userid']) 
    {
        echo "<ul class='troop'>";   
        echo "<li>" . $userintroop['troopid'].  " </li>";
        foreach($allTroopsList as $mytroops) 
        {
            if($userintroop['troopid'] == $mytroops['troopid']) 
            {
                echo "<li> Troop description: " . $mytroops['description'].  " </li>";

                foreach($allMissionsList as $mymissions) 
                {
                    if($mytroops['missionid'] == $mymissions['missionid']) 
                    {   
                        echo "<li> Missionname: " . $mymissions['missionname'].  " </li>";
                        echo "<br/>";
                        echo "</ul>";
                    }
                }
            }
        }
    }   
}           

foreach($allUsers as $myotherusers) 
{
    if($userintroop['userid'] == $myotherusers['userid']) 
    {

        echo "<li> other users: " . $myotherusers['username'].  " </li>";
        echo "<br/>";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:20:45.863

这一行：

```
while($userintroop = $allUsersintroops->fetch_assoc()) 
```

是从数据库中获取结果，对吗？这意味着在某些时候你用完了要获取的行，并且 $userintroop 将成为布尔值 FALSE。

然后稍后你尝试做

```
if($userintroop['userid'] == $myotherusers['userid']) 
```

这在两个级别上是错误的 - $userintroop 此时不会是数组，因此它永远不会有`['userid']`参数。而且由于它是获取操作失败的结果，因此永远不会有任何值 OTHER 除了 FALSE。

所以最后一个循环确实执行了，但永远不会产生任何东西，因为产生输出的条件实际上是不可能满足的。

# uiview - 如何找到当前 UIView 动画的详细信息？

> ID：10673200
> 
> 赞同：1
> 
> 时间：2012-05-20T11:58:44.800
> 
> 标签：uiview, uianimation

我有一个自定义`UIView`类上的属性的 setter 方法。如果它设置在`UIView`动画块中，我希望它以`CABasicAnimation`与动画相同的持续时间和缓动添加到视图层`UIView`。如何确定我是否在`UIView`动画块内，以及**如何获得其持续时间和缓动曲线？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:43:27.873

非常简单..您可以使用将所有动画键应用于您的视图

```
[self.YourView.layer animationKeys]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:11:27.423

基于这个问题，我做了这个扩展来`UIView`阻止动画：[UIView+AnimatedProperty](https://github.com/iMartinKiss/UIView-AnimatedProperty)。

它允许您在`CAAnimations`从动画块调用 setter 时运行。包括示例`cornerRadius`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T20:45:53.460

您可以很容易地获得当前动画。例如，设置一个`CATransaction`：

```
CAAnimation *animation = [self.layer animationForKey:self.layer.animationKeys.firstObject];
[CATransaction begin];
[CATransaction setAnimationDuration:animation.duration];
[CATransaction setAnimationTimingFunction:animation.timingFunction];

// CALayer animation here

[CATransaction commit]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:09:01.503

[UIView animateWithDuration] 的文档指出

> 此方法使用 UIViewAnimationOptionCurveEaseInOut 和 UIViewAnimationOptionTransitionNone 动画选项立即执行指定的动画。

至于持续时间，您自己设置持续时间，所以您现在已经这样做了。

# javascript - 我可以使用 node.js 作为 REPL shell 吗？

> ID：10673204
> 
> 赞同：3
> 
> 时间：2012-05-20T12:00:16.777
> 
> 标签：javascript, node.js, read-eval-print-loop

这是一个菜鸟问题。

我正在尝试`node.js`用作`JavaScript`REPL（读取-评估-打印循环）shell 以交互方式使用 JavaScript。不幸的是，我既不能定义变量也不能定义函数。

```
> 变量 x = 'abc'
不明确的
> 函数 f() {}
不明确的
>
```

我可以做些什么来`node.js`用作 REPL shell？

PS我知道我可能可以使用[Rhino Shell](https://developer.mozilla.org/en/Rhino_Shell)，但我更喜欢`node`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T12:03:14.997

你*可以*这样做。但是，这些表达式没有返回值，因此节点打印`undefined`。

```
> var x = 'abc'
undefined
> function f() {}
undefined
> f
[Function: f]
> x
'abc'
> 
```

# git - 当 GitHub 分叉更新时，如何在我仍有待处理的拉取请求时保持我的分叉最新？

> ID：10673207
> 
> 赞同：0
> 
> 时间：2012-05-20T12:00:52.790
> 
> 标签：git, github

我正在开发一个项目的分支，我发送了一个拉取请求。但是当我仍然有待处理的推送时，我从中分叉的 repo 会得到更新。如何在不丢失拉取请求中的更改的情况下保持最新状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:02:32.890

来自您的拉取请求的提交应该在不同的分支中。

所以你可以简单地`git pull upstream`（`git merge --ff-only upstream/master`确保你首先在你的 master 分支`git checkout master`中：）使你的 master 分支保持最新（假设原始 repo 位于远程调用中`upstream`）

# java - 为什么接口方法不能是“静态的”和“最终的”？

> ID：10673209
> 
> 赞同：10
> 
> 时间：2012-05-20T12:01:44.543
> 
> 标签：java, methods, interface, static, final

在 Java 接口中，我们只能有 final 变量。我们还可以在接口中创建静态变量。但是，与此同时，我们无法创建静态/最终方法，因为接口仅适用于静态方法。

不允许在 Interface 中使用静态/最终方法的确切原因是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T12:04:25.840

final 方法不能被覆盖。如果您无法实际实现该方法，那将违背拥有接口的目的。

对于静态部分，请参阅[此问题](https://stackoverflow.com/questions/512877/why-cant-i-define-a-static-method-in-a-java-interface)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-20T12:06:04.530

你理解错了。

1.  *所有*变量在接口中都是隐式的公共静态和最终变量。

2.  在 Java 8 之前，您不能在接口中创建静态方法。所有方法都是实例方法。

3.  由于接口的唯一目标是让类实现它们，并且由于接口中的方法不能有任何实现，因此将它们设为 final 是没有意义的：它们将没有实现，也不能被覆盖。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T12:04:21.830

接口是为实例定义的，而不是静态的。

“final”的意思是“不能被覆盖”。这对任何接口都没有任何意义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-20T12:05:55.197

`final`意味着它不能被覆盖。

`static`意味着它只能使用类名来调用。既然一个接口会有多个实现，那么由于接口本身不能实现方法，你怎么知道选择哪个实现呢？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-12T14:17:44.413

我还有一点要证明为什么接口方法不能是静态的：

```
interface MyInterface {
        static void myStaticMethod();    
} 
```

现在让我们有两个类正在实现“MyInterface”

// 第一类

```
class MyClass1 implements MyInterface {
static void myStaticMethod(){
// some implementation 
    } 
} 
```

// 第二类

```
class MyClass2 implements MyInterface {
static void myStaticMethod(){
// some implementation 
    } 
} 
```

现在我正在实例化如下：

1- MyInterface myObj1 = new MyClass1(); 2- myObj1.myStaticMethod();

3- MyInterface myObj2 = new MyClass2(); 4- myObj2.myStaticMethod();

// 在第 2 行和第 4 行，这是错误的调用，因为 myStaticMethod 应该使用类名调用（因为 myStaticMethod 被定义为静态），如下所示：

MyInterface.myStaticMethod();--> 但是在这种情况下，如何通过 MyClass1 和 MyClass2 类调用 myStaticMethod() 的不同实现。

所以证明接口方法声明中不能使用static。

对于 final ，很明显它将与覆盖功能相反。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-20T12:05:02.527

因为它们存在于某个类要实现的接口中。无法在任何地方实现的方法有什么意义？（这就是最终的建议）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-28T13:20:54.773

1：我们不能声明一个final方法，因为它与它的规则相矛盾，因为final方法不能被覆盖，但总是需要在它实现的类中定义所有接口方法。

2：我们不能声明一个静态方法，因为它与它的规则相矛盾，因为静态方法总是需要方法体，但我们不能在接口内定义任何方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-20T12:09:07.420

接口是纯抽象类。因此，接口中的所有方法都是`abtract`，并且必须在子类中实现。因此，通过扩展，它们都不能被声明为`final`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-04T06:51:02.453

在 Java 8 和默认方法的上下文中，这个问题有了新的含义。`static`现在允许使用方法，并且[在这个问题中解释了](https://stackoverflow.com/q/23453287/521799)`final`为什么方法仍然不可能。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-08-20T06:25:45.557

```
Why Interface methods cannot be “static” & “final”? 
```

接口中的所有方法都是显式抽象的，因此您不能将它们定义为静态或最终方法，因为静态或最终方法不能是抽象的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-13T07:39:46.440

我们不能将接口的方法声明为静态，因为接口实例方法的方法，我们不能声明final，因为必须在实现的类中覆盖接口的方法。有关描述，请检查此链接[在此处输入链接描述](http://abhiandroidinfo.blogspot.in/2013/06/interface-in-java.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-20T12:08:14.913

静态方法适用于类而不是实例，那么奇怪/毫无意义。话虽如此，我在某些情况下出于某种原因想要这个，但现在不记得一个案例了，所以一定是很久以前的事了。

您可以“解决”这个问题（而不是替代 api 设计），因为接口允许您声明类，所以像这样：

```
interface MyInterface {

    static class Helpers {
        static void myStaticMethod(); //can be abstract etc as usual
    }
} 
```

当然，您可以像往常一样对该类等进行子类化，也可以将其设为抽象、抽象方法等。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-07T07:38:50.893

接口不能有静态方法，因为如果你知道静态方法声明的静态属性可以在不创建类的任何对象的情况下调用，并且静态方法是类的一部分而不是类的实例，所以答案是你如何调用抽象方法直到 java 7、在java 8中你可以将方法声明为静态并通过接口名点方法名来调用它。

现在对 final 的回答是，final 方法没有被覆盖，所以当类继承它时你将如何覆盖它

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-13T11:34:22.430

默认情况下，接口中存在的所有方法都是公共的和抽象的。如果您在接口中将方法声明为最终方法，首先您将得到编译器错误，即使这样，拥有最终方法也没有任何意义，因为您永远无法在子类中覆盖它。

在静态的情况下，即使 Java 允许在任何版本中使用静态，在接口内使用静态也不是一个好的编程习惯，因为对于静态方法，您必须提供您不能在接口内提供的实现。此外，即使您在接口内提供实现，您仍然必须覆盖它，然后必须通过类名调用它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-09T06:56:04.190

**为什么我们不能使接口方法成为最终方法？**

因为如果您将方法设为最终方法，那么您将无法覆盖它，并且接口的唯一目的是拥有将被所有实现该接口的类覆盖的方法。

**为什么我们不能将接口方法设为静态？**

在 Java 8 中，您可以将方法设为静态，但该方法应具有方法体

```
interface Test{
    static void hello(){
       System.out.println(“hello world”);
    }
} 
```

您可以通过实现此接口的类访问此方法

```
Test.hello(); 
```

# c# - 如果文本框为空，如何避免错误？

> ID：10673217
> 
> 赞同：0
> 
> 时间：2012-05-20T12:03:10.863
> 
> 标签：c#

如果一个或两个文本框为空，我正在寻找一种避免错误的解决方案？我已经测试了检查height和width的值是否为null，但是我只能在代码之后进行，然后为时已晚！？帮助是preciated！谢谢！

```
// Get values from text boxes
int height = Convert.ToInt32(txtInputA.Text);
int width = Convert.ToInt32(txtInputB.Text); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:12:08.160

由于您试图将用户输入解析为整数，因此您需要检查的不仅仅是空字符串。如果输入包含非数字字符怎么办？如果数量太大怎么办？

验证所有这些的最简单方法是通过[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)，它检查有效性*并*在一次调用中执行转换（如果有效）：

```
int height, width;
if (int.TryParse(txtInputA.Text, out height) == false)
    // Alert: invalid height.
if (int.TryParse(txtInputB.Text, out width) == false)
    // Alert: invalid width. 
```

**编辑**：通过注释“警报”，我假设您将抛出一些异常，然后将被捕获（通过调用方法）并显示给用户。如果您要直接从上述逻辑显示错误消息，请确保在`return`转换不成功后停止执行该方法（例如通过语句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:08:43.007

你可以这样做：

```
 string aText = string.IsNullOrEmpty(txtInputA.Text)?"0":txtInputA.Text;
  int height = Convert.ToInt32(aText); 
```

或者你可以这样做：

```
 int height = 0;
  int.TryParse(txtInputA.Text, out height); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-20T12:08:04.073

这是检查是否`TextBox`不是空的方法：

```
int height;
int width;
if (!string.IsNullOrWhiteSpace(txtInputA.Text) & !string.IsNullOrWhiteSpace(txtInputB.Text))
{
    // Get values from text boxes
    height = Convert.ToInt32(txtInputA.Text);
    width = Convert.ToInt32(txtInputB.Text);
}
else
{
    MessageBox.Show("Please Enter Height and Width!");
} 
```

# php - 如何对所有目录中的所有 contentc php 文件使用相同的 header.php 文件

> ID：10673219
> 
> 赞同：1
> 
> 时间：2012-05-20T12:03:21.000
> 
> 标签：php, html, css

我已经创建了如下所示的头文件。

```
<style type="text/css" >
.menu{
    width: 100%;
    /*background-color: #333; */}
.menu ul{
    margin: 0; padding: 0;
    float: left;}

.menu ul li{
    display: inline;}

.menu ul li a{
    float: left; text-decoration: none;
    color: #000;
    padding: 10.5px 11px;
    /* background-color: #333; */}
    /* 
.menu ul li a:visited{
    color: white;}*/

.menu ul li a:hover, .menu ul li .current{
    color: #fff;
    background-color:#0b75b2;}

}
</style>
<div class="menu" style="width:430px; height:43px; margin-left:420px; margin-right:auto;">
<ul>
<li><a href="index.php">Home</a></li>
<li><a href="about.php">About us</a></li>
<li><a href="contact.php">Contact us</a></li>
<li><a href="image-gallery/index.php">Image Gallery</a></li>
<li><a href="articles/index.php">Articles </a></li>
</ul>
</div> 
```

所以我有尊重目录，比如图片库、文章

文件路径 ：

```
www/websitename/index.php 
```

我将 header.php 包含到主 index.php，它正确链接但是当我包含图像库的索引文件时，它没有正确链接，

```
www/websitename/image-gallery/index.php
www/websitename/image-gallery/index.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:28:30.143

有多种解决方案，但最简单的实现方法是在 config.php 文件中定义。除其他外，定义将指定根文件和根路径

配置文件

```
define('ROOT_URL', 'http://www.example.com/');
define('ROOT_PATH', '/var/www/html'); 
```

然后，在 index.php 中，您将拥有

```
include('config.php');
include('header.php'); 
```

或者

```
include('../config.php');
include('../header.php'); 
```

然后，在 header.php

```
<li><a href="<?php echo ROOT_URL; ?>index.php">Home</a></li> 
```

* * *

这个主题有很多变体，上面是最简单的，但这里有其他的。

为什么是这种方法？因为在 config.php 你可以使用

if ($_SERVER['HTTP_HOST'] == 'staging.example.com') { // 一组定义 } else { // 假设直播 - 用户另一组定义 }

并从 dev/staging/live 复制文件而不覆盖。

* * *

与 hte 包含中的“../”相反，在每个文件中创建一个变量“root_file”作为“./”或“../”。然后包括($root_file . 'header.php'); 在每个脚本中执行此操作，您也可以用于链接。

* * *

如果指定 hte 完整 URL，您可能希望排除“http://”部分并添加您正在使用的方案，如果您在 https 和 http 之间滑动。在代码中添加 URL（或在构建链接的函数中）

* * *

您可能希望将详细信息存储在数据库中（在这种情况下，您可能会将数据库连接凭据存储在 config instread

* * *

最后，您可以使用 $_SERVER[''] (http://php.net/manual/en/reserved.variables.server.php) 变量，或`__FILE__`( `__ DIR__`http://php.net/manual/en/language ) .constants.predefined.php) 来确定你在哪里。请小心，因为 REQUEST_URI 可能无法准确反映脚本的位置（如果使用 .htaccess 进行重写规则），并且如果您使用符号链接，则 SCRIPT_FILENAME/ `__FILE__`/也可能存在。`__DIR__`但是如果你知道你的服务器配置，这是处理“我在哪里？”的一种非常便携的方式。

所以，有很多选择。从简单开始，随着您的需求不断变化，逐步建立起来。

# facebook - 让用户在我的 fb 应用上搜索他们的朋友的好方法

> ID：10673221
> 
> 赞同：0
> 
> 时间：2012-05-20T12:03:25.450
> 
> 标签：facebook, facebook-graph-api

我想让我的用户在我的 fb 应用上搜索（而不是浏览）他们的朋友。什么是最好的方法？

我已经调查了这个问题几个小时。我有两种方法：

1.  使用图形 API：

    [https://graph.facebook.com/me/friends?access_token=](https://graph.facebook.com/me/friends?access_token=) ...

通过这种方式，我可以将用户的朋友作为json，通过解析json，我可以得到用户的目标。

但是，有两个问题。

首先，用户需要输入他/她朋友的确切姓名。例如，我的应用通过解析 json 无法找到带有“Steve”的“Steve Jobs”。

其次，如果用户朋友很多，解析json的成本可能会很惨。

2.使用搜索api：

[https://graph.facebook.com/search?q=mark&type=user](https://graph.facebook.com/search?q=mark&type=user)

通过这种方式，用户可以通过“steve”获得“Steve Jobs”。但是，很明显，用户可能会找到不是他们朋友的人。

我认为这两种方式都不够理想。有什么建议吗？

由衷的感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:58:07.447

这个怎么样：请求对话框 [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

--

对于部分搜索，可以使用 indexOf 函数来检查这个字符串是否匹配

# java - 是否可以覆盖任何 Java 小程序的最大堆大小的默认设置？

> ID：10673223
> 
> 赞同：1
> 
> 时间：2012-05-20T12:03:39.193
> 
> 标签：java, memory-management, applet, max

我正在使用其他人编写的一个 java 软件，但它总是内存不足。我试图在程序初始化时分配更多内存（使用-Xmx），但它似乎没有任何效果。

软件的编写者是否有可能对最大堆大小进行了硬编码，因此我在初始化时分配的额外内存没有任何影响？还是应该 -Xmx 始终有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:09:35.397

> 软件的编写者是否有可能对最大堆大小进行了硬编码，因此我在初始化时分配的额外内存没有任何影响？

不，内存大小是在加载代码之前设置的。

> 还是应该 -Xmx 始终有效？

这取决于你的意思，以及你如何使用它。长期以来，没有办法为小程序分配额外的内存。大约 1.5 个（如果没记错的话）额外选项被添加到小程序元素中 - 其中一个是最大的。记忆。在 Plug-In 2 JRE 架构中，applet 可以使用 JWS 启动，并且可以通过启动文件分配内存。

# oauth - OAuth 2 是否为给定用户指定了永久标识符？

> ID：10673225
> 
> 赞同：0
> 
> 时间：2012-05-20T12:04:08.347
> 
> 标签：oauth, openid, federated-identity

作为对 OpenID/OpenAuth 的一些研究的一部分，我刚刚（重新）阅读了 Rob Conery 的 2010 年博客文章[OpenID is a Nightmare 。](http://wekeroad.com/2010/11/17/open-id-is-a-party-that-happened/)理想情况下，我希望使用链接到单个帐户的多个 OAuth 提供程序，以提供对提供程序不可用的弹性 - 使用 Facebook 登录，链接您的 Twitter 和 Google 帐户，如果您下次访问 Facebook 登录不起作用没关系，您可以使用 Twitter 或 Google 进入并访问您的资料 - 就像在现实世界中，您可以使用护照开一个银行账户，如果您的护照没有，您可以稍后使用您的驾驶执照取款可用的。

Rob 在他的文章中主要担心的一个问题是，无法始终如一地识别正在使用 OpenID 的用户 - 有人可能有一天登录 Google，购买产品，然后几天后回来登录 Google，但无法访问他们购买的产品，因为没有唯一标识符可以保证在两次 Google 身份验证调用之间保持一致。

我很好奇 OAuth 2.0 中是否已经解决了这个问题——要么通过协议规范明确解决，要么通过主要提供商之间的一些实现共识。我可以依靠哪个字段（如果有）在用户与特定 OAuth 提供者的关系的整个生命周期内不进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:45:54.123

作为[登录过程的 OAuth2 的](https://developers.google.com/accounts/docs/OAuth2Login)一部分，Google 提供了一个`TokenInfo`端点，用于验证和提供有关`access_token`在该过程早期获得的信息。

令牌信息包括`userid`：

> “此字段的值是已登录用户的不可变标识符，可在您的应用程序中创建和管理用户会话时使用。无论 client_id 为何，此标识符都是相同的。这提供了跨平台关联配置文件信息的能力同一组织中的多个应用程序。”

这听起来只是票（或者可能是令牌）！

`userid`仅当`https://www.googleapis.com/auth/userinfo.profile`范围包含在访问令牌请求中时才存在，所以不要忘记这一点。

同样，在[Facebook API](https://developers.facebook.com/docs/authentication/)中，一旦您获得访问令牌，您就可以访问图形 API，您可以在其中获取用户数据，包括 ID。

Twitter`user_id`在访问令牌响应中包含作为其[身份验证 API的一部分](https://dev.twitter.com/docs/auth/implementing-sign-twitter)

* * *

如果您在 .NET 项目中使用 OAuth，这可能会很有用...我今天发现[WebMatrix 2 Beta](http://www.microsoft.com/web/webmatrix/)包括用于 Facebook、Twitter、Windows Live、Google 和 Yahoo 的 OAuth2 客户端，并且可以从 MVC 项目中使用。有人告诉我，您只需要`WebMatrix.Security.dll`就可以了。它已安装到`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies`. 虽然它处于测试阶段并且被隐藏起来，但它是一个很好的入门方法，并且可能会使[DotNetOpenAuth](http://www.dotnetopenauth.net/)库的学习曲线不那么陡峭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:52:23.417

OAuth 2.0 没有解决这个问题——它不是一个身份/SSO 协议。

但是，[OpenID Connect](http://openid.net/connect/)（基于 OAuth 2.0 构建）是。您可能会很幸运并通过 OpenID Connect 取回用户的电子邮件地址（[请参见此处](http://openid.net/specs/openid-connect-basic-1_0-15.html#id_res)- 取决于范围），或者您可能会取回对[给定依赖方](http://openid.net/specs/openid-connect-basic-1_0-15.html#terminology)来说应该是唯一的 PPID 。无论哪种方式 - 它应该是可能的。

或者，可以使用 SAML。它支持许多适合的不同风格的用户标识符。

# java - 在 Java 应用程序中嵌入类似浏览器的视图并与之交互

> ID：10673226
> 
> 赞同：2
> 
> 时间：2012-05-20T12:04:10.770
> 
> 标签：java, javascript, browser, embed

我想知道如何在 Java 客户端应用程序中嵌入类似视图的浏览器，同时我可以通过 JavaScript 与它进行交互。引发此问题的问题如下：

我的应用程序的界面由（谷歌）地图和一些 svg 的东西组成。这在浏览器中很容易做到。但是，我还需要访问一些特殊的 Java 库，这些库可以处理地图中的某些信息（例如，地图中的某些坐标）并回答应该影响浏览器视图的值（例如，应该在地图上绘制路径） .

我的第一个想法是将 Java 端行为实现为 REST Web 服务，因此我将通过 JavaScript 调用此 Web 服务，发送有关地图的相关信息并使用答案更新地图。然而，对于我目前的需求（这只是一个原型），使用 web 服务有点过多的基础设施。

有没有办法我可以：

*   在我的 Java 应用程序中嵌入类似视图的浏览器。
*   通过在浏览器视图中显示的网页中实现的 JavaScript 函数从 Java 端与该视图交互（例如这些函数会影响页面在浏览器视图中的呈现） ?。

我发现了与如何在 swing 应用程序中嵌入浏览器相关的其他问题（例如，[在 Java 中嵌入 Web 浏览器窗口](https://stackoverflow.com/questions/294813/embedding-web-browser-window-in-java)），而[JDIC](http://www.javadesktop.org/articles/jdic/index.html)似乎能够做到这一点。尽管有些人报告说它很难在 OSX（我使用的操作系统）中运行，并且没有提及是否可以通过 JavaScript 与浏览器交互。

在我看来，在 Android 中可以从 Java (Android) 端进行 JavaScript 调用，所以这在纯 Java 中可能也是可能的。

感谢您的任何指示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:11:17.800

如果您可以使用 swt，请查看[SWT Browser 小部件](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFYQFjAA&url=http://www.eclipse.org/articles/Article-SWT-browser-widget/browser.html&ei=Dt-4T6WGBcbFtAbVl-GGCA&usg=AFQjCNFxjKgQ5aWRo7MbY_D4naL1WA7l3Q)

对于 javascript，您可以使用 [http://www.mozilla.org/rhino/](http://www.mozilla.org/rhino/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:13:41.383

使用 Java FX 2，您可以。你在那里得到一个 webkit webview。可以使用 java<->javascript 来回交互。

有关嵌入谷歌地图的示例，请参见：http: [//java-buddy.blogspot.se/2012/03/embed-google-maps-in-javafx-webview.html](http://java-buddy.blogspot.se/2012/03/embed-google-maps-in-javafx-webview.html)

如果您还不想使用 100% JavaFX，可以使用[JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)将 java fx 嵌入到 swing 中。

# javascript - jQuery UI Sortable：检测表格单元格中是否已经有项目

> ID：10673228
> 
> 赞同：1
> 
> 时间：2012-05-20T12:04:21.783
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

首先，这是我的代码：http: [//jsfiddle.net/wLsCD/2/](http://jsfiddle.net/wLsCD/2/)

我想要实现的是删除将两个项目放在一个单元格中的能力。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:48:56.043

```
receive: function(event,ui){
   if( $(this).find('.item').size() == 2 ){
      $(ui.sender).sortable('cancel');
   }
} 
```

希望这可以帮助

# javascript - jquery 代码不适用于不同的 url

> ID：10673234
> 
> 赞同：0
> 
> 时间：2012-05-20T12:04:37.883
> 
> 标签：javascript, jquery, url

我有这个 jquery 代码：

```
$(function(){

    var $win = $(window);
    var $nav = $('.subnav');
    var navTop = $('.subnav').length && $('.subnav').offset().top - 38;
    var isFixed = 0;

    processScroll();

    $win.on('scroll', processScroll);

    function processScroll() {
        console.log('test');
        var i, scrollTop = $win.scrollTop();
        if (scrollTop >= navTop && !isFixed) {
            isFixed = 1;
            $nav.addClass('subnav-fixed');
        } else if (scrollTop <= navTop && isFixed) {
            isFixed = 0;
            $nav.removeClass('subnav-fixed');
        }
    };
}) 
```

例如，如果我有这个网址：

`http://mydomain.com/posts`或`http://mydomain.com`或`http://mydomain.com/post?utf8=✓&amp;search=`

该代码确实可以正常工作，但是如果我有例如：

`http://mydomain.com/post?utf8=✓&amp;search=port`或者`http://mydomain.com/post?utf8=✓&amp;search=word`

代码不能正常工作...

**为什么如果我通过搜索引擎传递 url 的参数，代码不能正常工作？**

非常感谢！

## 已编辑

我正在使用这个太阳黑子 solr 作为我的搜索引擎

[http://sunspot.github.com/](http://sunspot.github.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:07:57.073

我在这个问题中找到了解决方法：

[复制 Bootstraps 主导航和子导航](https://stackoverflow.com/questions/9179708/replicating-bootstraps-main-nav-and-subnav)

这是代码：

```
$(document).scroll(function(){
    // If has not activated (has no attribute "data-top"
    if (!$('.subnav').attr('data-top')) {
        // If already fixed, then do nothing
        if ($('.subnav').hasClass('subnav-fixed')) return;
        // Remember top position
        var offset = $('.subnav').offset()
        $('.subnav').attr('data-top', offset.top);
    }

    if ($('.subnav').attr('data-top') - $('.subnav').outerHeight() <= $(this).scrollTop())
        $('.subnav').addClass('subnav-fixed');
    else
        $('.subnav').removeClass('subnav-fixed');
}); 
```

谢谢

# php - mod_rewrite 高效的可选参数处理

> ID：10673236
> 
> 赞同：0
> 
> 时间：2012-05-20T12:04:48.377
> 
> 标签：php, apache, mod-rewrite, seo

我正在构建一个具有多种可选 $_GET[] 参数的站点：我的 url 的范围可以从 `index.php?mod=reg`to `index.php?mod=complicated&param1=foo`或 `index.php?mod=EvenMoreComplicated&w=4&x=1&y=2&z=3`.

我知道，在某种程度上，这可以用一大堆带有 [L] 参数的重写规则来处理，但是，没有更简单的方法来处理这个，而不必手动指定每个可能的 $_GET[] 参数?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:18:06.947

在许多框架中，这个问题是通过一个独特的重写规则来解决的：

`RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]`

这意味着您可以在一个参数中获取所有查询字符串`$_GET['url']`

然后，[parse_str()](http://en.php.net/parse_str)函数在：

`parse_str($_GET['url'], $queryArgs);`

这将为您提供 $queryArgs 中的 $_GET 等价物。

此外，这是演示代码，不要忘记在真实代码中进行清理/过滤。

希望这可以帮助 ！

# javascript - 未捕获的类型错误：无法设置未定义的属性“0”“

> ID：10673237
> 
> 赞同：21
> 
> 时间：2012-05-20T12:05:01.357
> 
> 标签：javascript

我收到了错误

> 未捕获的类型错误：无法设置未定义的属性“0”

出于某种原因在这一行

```
world_map_array[i][z]="grass.gif|ongrass.gif|collision.gif|above.gif"; 
```

为什么会这样？

谢谢你的帮助

```
var x_world_map_tiles = 100; 
var y_world_map_tiles = 100; 

var world_map_array = new Array(x_world_map_tiles);
for (i=0; i<=2; i++)//create a two dimensional array so can access the map through x and y coords map_array[0][1] etc.
{
world_map_array[i]=new Array(y_world_map_tiles);
}

for (i=0; i<=x_world_map_tiles; i++)//just a test
{
for (z=0; z<=y_world_map_tiles; z++)//just a test
{
world_map_array[i][z]="grass.gif|ongrass.gif|collision.gif|above.gif";
}
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-20T17:27:37.723

JavaScript 中的数组有自己的怪癖，如果您来自其他语言，您可能不会想到这些怪癖。对于您的用例，两个重要的是：

1.  您不能在 JavaScript 中直接声明多维数组。
2.  当您在创建时设置数组的大小时，几乎没有效率优势（并且没有增加安全性）。

与其他语言不同，JavaScript 不会为整个数组分配一块内存。（它不知道您将在每个单元格中放入什么样的对象，因此不知道它需要多少总内存。）相反，为您所做的所有`size`参数`Array()`都是设置数组的`length`属性。

对于一般的二维数组情况，我建议：

1.  创建“顶部”数组，例如：

    ```
    var i       // the first-order index in a
      , j       // the second order index in a
      , a = [] 
    ```

2.  根据需要初始化数组元素。这称为[延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)，在这种情况下，它只涉及`a[i]`在我们尝试分配某些东西之前存在的测试`a[i][j]`，例如：

    ```
    if (!a[i]) a[i] = [] 
    ```

    上面的语句用英文写成：“如果第 i 个元素`a`是 'falsy'，则将一个空数组分配给第 i 个元素。”

3.  最后，将实际值分配给多任务数组：

    ```
    a[i][j] = 'whatever' 
    ```

对于您的情况，您提前知道值，因此您可以提前初始化每个元素。（但是，如果您没有覆盖大多数元素，那么惰性实现可能会更好；见下文。）

```
var x, x_length = 100
  , y, y_length = 100
  , map = []

// Don't be lazy
for (x = 0; x < x_length; x++) {
  map[x] = []
  for (y = 0; y < y_length; y++) {
    map[x][y] = 'grass.gif|ongrass.gif|collision.gif|above.gif'
  }
} 
```

正如其他人所说，具有 100 个元素的数组的索引编号从*0*到*99*，因此在这里进行小于比较是最合适的。

* * *

作为参考，这里有一个使用延迟初始化的实现。我已经使用函数接口而不是直接访问数组；它更长、更复杂，但也更完整。

我在这里使用的初始化模式称为 [立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。如果您以前没有看过它，它是更有用的 JavaScript 模式之一，非常值得花一些时间来理解。

```
var map = (function (x_length, y_length, v_default, undefined) {
  // Unless v_default is overwritten, use ...
  v_default = v_default || 'grass.gif|ongrass.gif|collision.gif|above.gif'

  // Private backing array; will contain only values for a[x][y] 
  // that were explicitly set.
  var a = []

  // Private helper function. 
  // - Returns `true` if `x` is between `0` and `x_length - 1`
  //   and `y` is between `0` and `y_length - 1`.
  // - Returns `false` otherwise.
  function valid (x, y) {
    return (x >= 0 
      &&    x <  x_length
      &&    y >= 0
      &&    y <  y_length)
  }

  // Private helper function.
  // - Returns `true` if a[x][y] has been set().
  // - Returns `false` otherwise.
  function exists (x, y) {
    return !!a[x] && !!a[x][y]
  }

  // Private getter
  // - Returns the value of a[x][y] if it has been set().
  // - Returns `undefined` if the point (x,y) is invalid.
  // - Returns `v_default` otherwise.
  function get (x, y) {
    if (!valid(x, y))      return undefined
    else if (exists(x, y)) return a[x][y]
    else                   return v_default
  }

  // Private setter
  // - Returns the value set on success.
  // - Returns `undefined` on failure
  function set (x, y, v) {
    if (valid(x, y)) {
      // We're being lazy
      if (!a[x]) a[x] = []
      a[x][y] = v
      return a[x][y]
    }
    return undefined
  }

  // Return an interface function. 
  // - Pass the function three arguments, (x, y, v), to set a[x][y] = v
  // - Pass the function two arguments, (x, y), to get a[x][y]
  return function (x, y, v) {
    if (arguments.length > 2) {
       return set(x, y, v)
    } else {
       return get(x, y)
    }
  }
})(100, 100) 
```

当我在节点中运行上述内容时，以下测试会打印出合理的值：

```
// Invalid invocations
console.log('map()                : %s', map())
console.log('map(  0)             : %s', map(0))
console.log('map( -1,   0)        : %s', map(-1,0))
console.log('map(  0,  -1)        : %s', map(0, -1))
console.log('map( -1,  -1)        : %s', map(-1, -1))

// Valid invocations
console.log('map(  0,   0)        : %s', map(0, 0))
console.log('map( 99,  99)        : %s', map(99, 99))
console.log('map(  1,   1)        : %s', map(1,1))
console.log('map(  1,   1, "foo") : %s', map(1,1, 'foo'))
console.log('map(  1,   1)        : %s', map(1,1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T12:09:02.873

```
var x_world_map_tiles = 100;
var y_world_map_tiles = 100;
var world_map_array = new Array(x_world_map_tiles);
for (i=0; i<=2; i++)//create a two dimensional array 
{
    world_map_array[i]=new Array(y_world_map_tiles);
}
for (i=0; i<x_world_map_tiles; i++)
{
    for (z=0; z<y_world_map_tiles; z++)
    {
        world_map_array[i][z]="grass.gif|ongrass.gif|collision.gif|above.gif";
    }
} 
```

由于您的数组长度为 100，因此您必须从`0`( `99`<100) 而不是`100`(<=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T12:08:48.643

这个

```
for (i=0; i<=2; i++) 
```

一定是：

```
for (i=0; i<=x_world_map_tiles ; i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T12:10:25.273

您正在为`world_map_array[i]`表达式提供一个`i`不存在于 `world_map_array`. 所以我猜`x_world_map_titles`是> 2。

我认为你需要重写`i<=2`为`i<=x_world_map_titles`

此外，您不需要指定数组的大小。在这种情况下，我只会使用文字：

```
var x_world_map_tiles = 100;  
var y_world_map_tiles = 100; 

var world_map_array = [];
for (i=0; i<=x_world_map_tiles; i++)
  //create a two dimensional array of 101x101 so can access the map through x and y coords map_array[0][1] etc. { 
  world_map_array[i]=[];
}

for (i=0; i<=x_world_map_tiles; i++)//just a test { 
  for (z=0; z<=y_world_map_tiles; z++)//just a test { 
    world_map_array[i][z]="grass.gif|ongrass.gif|collision.gif|above.gif"; 
  }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-11T10:08:12.797

在 javascript 中使用二维数组时出现未捕获的类型错误。

对于二维数组，先声明父数组

var arryTwoDimension= [];

然后根据情况，我们可以通过

arryTwoDimension[i]=[] i 将来自 0,1,2......

这将解决问题。

# sql - SQL 选择好友更改列名

> ID：10673241
> 
> 赞同：2
> 
> 时间：2012-05-20T12:05:49.013
> 
> 标签：sql, sql-server

我试图在 MS SQL 上选择带有 MemberID 的朋友列表，这是我的代码

```
 SELECT MemberID, FriendID,(Select Username From Members Where MemberID = Friends.FriendID) as Username FROM Friends WHERE MemberID = @MemberID
    UNION
    SELECT MemberID as FriendID, FriendID as MemberID,(Select Username From Members Where MemberID = Friends.MemberID) as Username FROM Friends WHERE FriendID = @MemberID 
```

结果是

```
MemberID    FriendID  
1           2
1           7
34          1 
```

我应该怎么做才能将最后一行更改为

```
MemberID    FriendID  
1           2
1           7
1           34 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:08:13.927

```
SELECT  MemberID, FriendID
FROM    Friends
WHERE   MemberID = @MemberID
UNION ALL
SELECT  FriendID, MemberID
FROM    Friends
WHERE   FriendID = @MemberID 
```

# algorithm - 根据参数的相等组算法

> ID：10673244
> 
> 赞同：0
> 
> 时间：2012-05-20T12:06:13.903
> 
> 标签：algorithm, language-agnostic, machine-learning

我有一些人的数据。每个人都有几个参数的等级

我想将人们划分为 N 组，在所有参数中尽可能相等。

参数是评级。例如 - 参数 1 是最重要的

组中的等于，第二个参数是第二优先级，最后一个参数是最低优先级

例如 ：

有 100 个人的数据如下：

```
people1 = ["param1"=12,"param2"=70,"param3"=6]

people2 = ["param1"=9,"param2"=79,"param3"=2] 
```

我想将人们分成3组（或多或少相同大小）

将有尽可能多的等于等级

有人能帮我吗？给出想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:49:58.187

这篇文章让我想起了我小时候和其他孩子在院子里踢足球的感觉。

选出了 2 名队长，每人轮流从池中选出一名队员为球队。这样一来，团队最终保持平衡。

你肯定可以从这个故事中制作出一个算法，而且它非常简单（即使对孩子来说也是如此：）并且在大量数据上带来了很好的结果。

您只需要 - 按玩家的“实力”对数据进行排序并划分他们。

# python - 在 Web 应用程序的后台将消息同步到 Twitter

> ID：10673245
> 
> 赞同：1
> 
> 时间：2012-05-20T12:06:20.237
> 
> 标签：python

我正在编写一个网络应用程序。用户可以发布文本，我需要将它们存储在我的数据库中，并将它们同步到 Twitter 帐户。

问题是我想在将消息插入数据库后立即回复用户，并在后台运行“同步到推特”进程。

我怎么能那样做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:56:51.207

要么你选择 zrxq 的解决方案，要么你可以用一个线程来做，如果你处理两件事：

1.  你不会篡改来自主线程的对象（小心迭代器），
2.  一旦工作完成，你会小心地杀死你的线程。

看起来像：

```
    导入线程

    类 TwitterThreadQueue(threading.Thread):
        队列 = []

        定义运行（自我）：
            而 len(self.queue!=0):
                post_on_twitter(self.queue.pop()) # 这是你在推特上发布的代码

        def add_to_queue(self,msg):
            self.queue.append(msg)

```

然后你在你的代码中实例化它：

```
tweetQueue = TwitterThreadQueue()
# ...
tweetQueue.add_to_queue(消息)
tweetQueue.start() # 你可以检查它是否还没有启动
# ...

```

# javascript - JavaScript 添加盒子阴影不生效

> ID：10673248
> 
> 赞同：1
> 
> 时间：2012-05-20T12:06:48.943
> 
> 标签：javascript, jquery, css

我有这段代码，我无法开始工作。 [http://jsfiddle.net/AeRV7/](http://jsfiddle.net/AeRV7/)

问题是我无法使用 javascript 添加框阴影。

```
$(".first").css({"box-shadow": "0 0 5px #888;"}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:09:48.097

删除属性上的分号（引号**内的分号）。**

```
$(".first").css({"box-shadow": "0 0 5px #888"});
// ----------------------------------- here ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:10:20.353

就像使用 CSS 一样，您需要指定供应商前缀：

```
$(function(){
    var val = "0px 0px 5px #888";
      $(".first").css({
          "box-shadow": val,
          "-moz-box-shadow": val,
          "-webkit-box-shadow": val
      })
});​ 
```

[更新的小提琴](http://jsfiddle.net/AeRV7/1/)

如果您需要 CSS 中的供应商前缀（您确实有它们），那么在以编程方式设置相同样式时需要它们。在评论中，Duri 说`box-shadow`当前版本支持不带前缀，但指出 Firefox 3.6（仍然是一个广泛使用的浏览器）仍然需要`-moz`.

但是[Craig Swing 的回答](https://stackoverflow.com/a/10673278/157247)解决了主要问题（我只是在上面偶然提到了这个问题）：您不希望`;`您为该物业提供的价值。`;`在 CSS 中，样式定义彼此*分离*，它不是价值的一部分。

# php - 使用 php 处理 Jquery Ajax 表单提交

> ID：10673250
> 
> 赞同：3
> 
> 时间：2012-05-20T12:06:58.707
> 
> 标签：php, jquery, ajax

最近，我在尝试使用 Jquery 和 Ajax 提交表单时一直在苦苦挣扎。我有一个非常简单的表单，其中包含用户名字段和密码字段以及提交按钮。表单应该做的是，一旦提交表单，信息将由 Ajax 发送到 php 文件，然后将所述表单值添加到数据库中。我正在努力解决的是如何将值从 Ajax 获取到 php。这是我的代码：

```
$('#form').submit(function(){

var username = $('#username').val();
var password = $('#password').val();

var dataString = 'uname=' + username + '&passw=' + password;

$.ajax({

    type: "POST",
    url:'check.php',
    data: dataString,

    success: function(data){
        alert(data);//only for testing purposes
    }
}); 
```

我无法理解的是如何使用 php 从中获取 dataString？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:20:25.730

PHP 文件：

```
<?php
    print_r($_POST);
?> 
```

jQuery部分：

```
var dataString = 'uname=555';
$.ajax({
    type: "POST",
    url:'check.php',
    data: dataString,

    success: function(data){
        alert(data);//only for testing purposes
    }
}); 
```

带给我：

![在此处输入图像描述](../Images/cfee9dd6e6a62d89f4be43f06fea976a.png)

所以我唯一的猜测是您无法在 javascript 中获取数据。

还有一个想法。将类型替换为`"GET"`。然后在php文件中写一行：

```
echo $_SERVER["REQUEST_URI"]; 
```

它在警报框中为您提供了什么？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:16:07.393

您通过 POST 发送的内容（**Ajax**或非**ajax**）将在 PHP 全局数组中可用，名为`$_POST`.

要进行测试，请将以下内容放入**check.php：**

```
<?php 
print_r($_POST);
?> 
```

这应该反映**您**的`alert()`.

# clojure - 使用 lein 构建 clojure 项目时出错

> ID：10673253
> 
> 赞同：4
> 
> 时间：2012-05-20T12:07:58.037
> 
> 标签：clojure, leiningen

我对clojure一点也不熟悉，而且我有一个我正在尝试构建的项目的源代码。该项目有一个 project.clj 文件，谷歌说这意味着我应该使用 lein 构建工具。然而：

```
$ lein compile #lein jar does the same thing
Exception in thread "main" java.lang.RuntimeException: java.io.FileNotFoundException: Could not locate testui/core__init.class oCompiling testui.core
r testui/core.clj on classpath 
```

我怀疑 project.clj 可能已损坏。core.clj 位于 src/com/foodient/semanticanalysis/testui，project.clj 如下所示：

```
(defproject testui "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.apache.poi/poi "3.8-beta4"]
                 [gate-clj "1.0.0"]]
  :aot [testui.core]
  :main testui.core
  :run-aliases {:test testui.core/-main}) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:57:31.020

如果您设置了一个 lein 项目并且名称中包含 Clojuristic 破折号，例如 bene-csv（我的一个），那么 lein new bene-csv 会创建几个目录和`./bene-csv/project.clj`. 我的 core.clj 位于`./bene-csv/src/bene_csv/core.clj`. 请注意，破折号被删除以`bene_csv`支持下划线。

至于您的问题，core.clj 很可能不在 lein 期望的位置，应该是`./testui/src/testui/core.clj`. 我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T19:28:21.213

我的猜测是您应该更改对代码的引用

```
testui.core 
```

至

```
com.foodient.semanticanalysis.testui.core 
```

原因是命名空间的最后一个点之前的部分对应一个包名（这个术语来自java和jvm）

您表示您的来源在：

```
src/com/foodient/semanticanalysis/testui 
```

所以包名是`com.foodient.semanticanalysis.testui`

您可能还应该更新 clojure 源文件中的命名空间声明以匹配此约定（或将源移动到`src/testui`）。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T12:30:38.253

我认为问题在于 core.clj 不在正确的目录中。它应该在 src/testui 目录中。

# c - 如何使用套接字 API 发送和接收字节？

> ID：10673261
> 
> 赞同：0
> 
> 时间：2012-05-20T12:08:17.903
> 
> 标签：c, linux, unix, tcp, network-programming

嗨，我编写了一个服务器应用程序，它接受来自客户端的名称，通常是文件名。它打开文件，将内容读入缓冲区，然后使用以太网通过以太网传输缓冲区`send()`。但问题出现在客户端没有成功接收所有字节的地方。我只收到我发送的一部分。

供您参考，这是服务器端的代码片段：

**服务器**：

```
fp = fopen(filename,"r+");  
        strcpy(str,"");
        fseek(fp, 0L, SEEK_END);
        size = ftell(fp);
        fseek(fp, 0L, SEEK_SET);
        fread(str, size, 1,fp);
        fclose(fp); 
        printf("Size of the file is : %d\n",size);
        sprintf(filename, "%d", size);
        n = send(nsd, filename, strlen(filename), 0);

while(size > 0){
            n = send(nsd, str, strlen(str), 0);
            printf("%d bytes sent successfully\n",n);           
            if(n == 0) break;
            sentbytes = sentbytes + n;
            size = size - sentbytes;
        } 
```

请帮助我编写客户端应用程序。我目前对如何编写它感到困惑。我应该将`recv()`部分放在一个`while(1)`循环中，以便客户端继续运行，直到成功接收到所有字节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:42:17.180

**已编辑**
对于初学者，您可以同时`read from the file`分`write to the socket`块。
由于您正在通过 TCP 传输数据，请记住数据作为流而不是消息可靠地传输。因此，除了订单之外，不要对数据的接收方式做出假设。

以下是它的写法：

```
open socket
open file
size_of_file = read_file_size(file);
send(socket, &size_of_file, sizeof(int), ...)
while (all is written)
    read fixed chunk from file
    write as much was read to the socket
cleanup // close file, socket 
```

* * *

至于这`recv`部分，我认为最好将文件大小作为整数发送并在 while 循环中继续读取，直到接收到与从服务器发送的字节数一样多的字节。

就像这样：

```
recv(socket, &size_of_msg, sizeof(int), ...)
while(all is read)
    read fixed chunk from the socket
cleanup 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T13:07:15.713

好吧，我发现您通过套接字发送消息的方式至少存在一些问题。

首先来自 fread 的手册页：

```
 The  function  fread()  reads  nmemb  elements of data, each size bytes
   long, from the stream pointed to by stream, storing them at  the  loca-
   tion given by ptr. 
```

你正在尝试的是：

```
fread(str, size, 1,fp); 
```

我想你的意思是

```
 fread(str, 1,size,fp); 
```

虽然它不解决这个问题。

但问题出在这里：

```
 n = send(nsd, str, strlen(str), 0);
        printf("%d bytes sent successfully\n",n);           
        if(n == 0) break;
        sentbytes = sentbytes + n;
        size = size - sentbytes; 
```

尽管您通过减少成功发送的字节数来减小“大小”，但是您在哪里扩展 str 以指向将发送数据的新缓冲区位置。这只会重复重新发送缓冲区的初始字节。

```
 str += n; //Assuming str is char* 
```

将解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T12:41:43.153

> “我应该将 recv() 部分放在 while(1) 循环中，以便客户端继续运行，直到成功接收到所有字节？”

类似的东西。永远不要假设一个`recv()`调用得到了发送的所有内容——tcp/ip 将消息分成较低级别的数据包，并且 recv() 将在读取任何时间点实际接收到的任何数据量后返回。您不必直接担心这一点，除非您确实需要使用某种协议来指示消息的长度，以便接收者知道要阅读多少，然后例如：

```
char buffer[4096];
int msgsz = 600, // see below
    sofar = 0,
    cur;

while (sofar < msgsz) {
    cur = recv (
        socket_fd,
        &buffer[sofar],
        msgsz - sofar,
        0
    );
    if (cur == -1) {
        // error
        break;
    } else if (cur == 0) {
        // disconnected
        break;
    }
    sofar += cur;
} 
```

WRT `msgsz`，您可以将其包含在固定长度的标头中，首先读取该标头。一个简单的版本可能只有 4 个字节，其中包含 a `uint32_t`，即带有长度的 int 。您也可以使用带有数字的空终止字符串，但这意味着读取直到`'\0'`找到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T12:44:24.807

使用`strlen`似乎不合适。您已经阅读了该文件，您知道它有多长，那为什么要这样做`strlen`呢？要么你得到相同的结果（所以它是多余的），要么你会得到别的东西（所以这是一个错误）。

# c# - MetadataException：指定的架构无效

> ID：10673262
> 
> 赞同：1
> 
> 时间：2012-05-20T12:08:24.060
> 
> 标签：c#, mysql, silverlight, entity-framework, ria

我一直在研究 Silverlight 应用程序。该应用程序应该由 Godaddy 托管。

该应用程序连接到 MySql，因为它是后端数据库并使用实体框架。

该应用程序在 Visual Studio 上正常工作。但是，当我将文件移动到 Godaddy 时，我开始遇到一些问题。应用程序开始抛出 MetadataException。

我已经使用 Fiddler 来跟踪问题。第一个 WCF 请求正确终止，但后续请求失败，标头代码为 500。引发以下异常。

我很感激帮助我解决这个问题，因为我尝试了很多解决方案。

*   我已经完全删除了 EDMX 模型，并从配置文件中的连接字符串中删除了该条目。然后再次从数据库重新创建 edmx 文件。
*   我已经用 "metadata="res://*/" 替换了 connectionString 中的元数据标签，但没有成功

注意： *我在 Godaddy 上托管了另一个 Silverlight 应用程序，它使用 MS SQL SERVER，该应用程序可以正常工作。*

```
[MetadataException: Schema specified is not valid. Errors: 
KaneeFollowUpModel.ssdl(2,93) : error 0175: The specified store provider cannot be found in the configuration, or is not valid.]
System.Data.Metadata.Edm.Loader.ThrowOnNonWarningErrors() +8566285
System.Data.Metadata.Edm.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths) +181
System.Data.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest&amp; providerManifest, DbProviderFactory&amp; providerFactory, String&amp; providerManifestToken, Memoizer`2&amp; cachedCTypeFunction) +211
System.Data.Metadata.Edm.StoreItemCollection..ctor(String[] filePaths) +420
System.Data.Mapping.MetadataWorkspaceUtilities.CreateMetadataWorkspaceFromResources(Type contextType, Type baseContextType) +298
System.Data.Mapping.MetadataWorkspaceUtilities.CreateMetadataWorkspace(Type contextType) +28
....
....
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:13:44.070

我已经解决了 Pawel 提到的问题，并且 Ladislav Mrnka 提供的线程与 MYSQL EF 提供程序有关。

我做了以下事情来解决这个问题：

1) 确保将 Mysql.Web、Mysql.Data 和 Mysql.Data.Entity 添加到引用中

2）添加：

```
<add assembly="MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"/> 
```

到配置文件中的程序集部分

3）将以下部分添加到配置文件中：

```
<DbProviderFactories>
    <add name="MySQL Data Provider" 
         invariant="MySql.Data.MySqlClient" 
         description=".Net Framework Data Provider for MySQL"  
         type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0,     Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
  </DbProviderFactories> 
```

# jasper-reports - Jasper 报告使用单个文本字段显示“Y 页 X”

> ID：10673263
> 
> 赞同：25
> 
> 时间：2012-05-20T12:08:25.143
> 
> 标签：jasper-reports

`Page X of Y`根据通用解决方案，我想创建一个包含 的文本字段，而不是将其分成两部分。我的文本字段包含`"Page " + $V{currentPage} + " of " + $V{PAGE_NUMBER}"`with `evaluationTime=auto`。

假设我有一份 10 页的报告。三个是**标题带**，六个是**细节带**，一个是**总结带**。我的结果显示`"Page 0 of 10"`为**Title Band**，正确计数为**Detail Band**，然后`"Page 0 of 10"`为**Summary Band**。

您如何确保变量在任何地方都被计算，而不仅仅是在**Detail Band**上？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-05-31T17:38:00.753

# Jaspersoft 工作室，6 岁以上

对于 Jaspersoft Studio v6，或者如果第一个页码重复，请尝试[此解决方案](https://stackoverflow.com/a/42550057/59087)，它使用`$V{MASTER_CURRENT_PAGE}`和`$V{MASTER_TOTAL_PAGE}`评估时间为`Master`.

# Jaspersoft 工作室

对于其他版本的 Jaspersoft Studio，请尝试后续小节中概述的步骤。

## 创建变量

如下创建一个变量：

1.  创建一个名为`V_CURRENT_PAGE_NUMBER`
2.  选择变量以打开其属性（如下图所示）
3.  将**表达式**设置为：`1`
4.  将**初始值表达式**设置为：`$V{PAGE_NUMBER}`

*   如果显示页码`0`，请使用`$V{PAGE_NUMBER} + 1`.
*   如果页码总是显示`1 of Y`，请将**Expression**设置为`$V{PAGE_NUMBER}`而不是初始值表达式，并将初始值表达式留空。

1.  将**重置类型**设置为：`Page`

这些设置如下图所示：

[![当前页码变量](../Images/36f0104c4f333d4d19c0a5384ae85863.png)](https://i.stack.imgur.com/tD1Nu.png)

将**Expression**设置为以`1`防止其值为`null`。也就是说，如果页脚显示*Page **null** of 4*这可能意味着尚未设置**表达式。**

变量已创建。

## 添加页脚

添加**页脚**带，如下所示：

1.  在大纲面板中选择报告
2.  检查**带有页眉和页脚的摘要**以确保页脚出现在摘要页面上。
3.  添加**页脚**带。

已添加页脚。

## 创建文本字段

创建一个文本字段，如下所示：

1.  *将单个文本字段*拖放到**页脚**区域。
2.  选择文本字段。
3.  将**表达式**设置为：`msg("Page {0} of {1}", $V{V_CURRENT_PAGE_NUMBER}, $V{PAGE_NUMBER})`
4.  将**评估时间**设置为：`Auto`

这些设置如下图所示：

[![单个文本字段](../Images/593e5266b8f2f53c9625e49b0d3c72c2.png)](https://i.stack.imgur.com/F8Nih.png)

单个文本字段已创建。

## 预览报告

对于包含三个页面和一个摘要页面的报告，预览报告会显示：

[![第 1 页](../Images/c89e78b745b4e7a257dfe9588adfdb39.png)](https://i.stack.imgur.com/CQtk5.png)

摘要页面显示：

[![第 4 页](../Images/d72ea52685b42b96aa5a292d230f035e.png)](https://i.stack.imgur.com/jYXlL.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-03-02T08:17:13.840

我尝试[了这种方法](https://stackoverflow.com/a/37552266/59087)，但结果页码不正确：{1 **/** 7、1/7、2/7、3/7、4/7、5/7、6/7}。

对于 JasperReports 6+，使用`MASTER_CURRENT_PAGE`和`MASTER_TOTAL_PAGES`系统变量并记住将文本字段评估时间设置为`Master`：

```
<textField evaluationTime="Master">
    <textElement textAlignment="Right"/>
    <textFieldExpression><![CDATA[msg("Page {0} of {1}", $V{MASTER_CURRENT_PAGE}, $V{MASTER_TOTAL_PAGES})]]></textFieldExpression>
</textField> 
```

见：http: [//jasperreports.sourceforge.net/sample.reference/book/index.html](http://jasperreports.sourceforge.net/sample.reference/book/index.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-10T10:30:26.203

正如您所提到的，常用方法使用两个单独的文本字段：

**当前页码**

`$V{PAGE_NUMBER}`评估时间：现在

**总页码**

`$V{PAGE_NUMBER}`与评估时间：报告

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-28T05:13:57.320

对于页面历史显示如下： **Page: 1 of 5**

使文本字段值如下所示，并将评估时间更改为`Master`：

```
"Page: "+$V{MASTER_CURRENT_PAGE}+" of "+$V{MASTER_TOTAL_PAGES} 
```

来源：

```
 <textField evaluationTime="Master">
                <reportElement x="224" y="0" width="186" height="15" uuid="6641bb8b-9f48-4832-942b-8b04220030e6">
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <textElement verticalAlignment="Top">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Page: "+$V{MASTER_CURRENT_PAGE}+" of "+$V{MASTER_TOTAL_PAGES}]]></textFieldExpression>
            </textField> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-16T23:38:38.013

关于当前页码，`evaluationTime=now`是`$V{PAGE_NUMBER}`您的答案。

不幸的是，我认为你不能实现你想要的，因为当 Detail 波段的 Split Allowed 启用时， [PAGE_COUNT中存在一个错误。](http://community.jaspersoft.com/jasperreports-library/issues/3788)否则`evaluationTime=now`，`"Page " + $V{PAGE_NUMBER} + " of " + $V{PAGE_COUNT}"`可能会工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-02T00:39:25.340

这项工作对我来说（与戴夫的回答略有不同）

*使用 JasperSoft Studio

[![捕获：添加变量](../Images/3414ae5ec71877572d1c0505b2cb014f.png)](https://i.stack.imgur.com/vl5ye.png)

然后放置一个带有表达式的文本字段：

```
"Pág. " + $V{PAGE_NUMBER} +"/" + $V{V_CURRENT_PAGE_NUMBER} 
```

希望这有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-16T13:45:47.560

这应该会有所帮助，通过使用 *评估时间*作为**报告**

```
 <textField>
        <reportElement x="497" y="0" width="32" height="12" forecolor="#7E8083"
                           uuid="ef663cfd-4058-40bb-a6d9-de7f9a8164be"/> --update your elements here
        <textElement textAlignment="Right" verticalAlignment="Middle">
            <font fontName="SansSerif" size="7" pdfFontName="OpenSans-Regular.ttf"/>
        </textElement>
        <textFieldExpression>
            <![CDATA["Page " + $V{PAGE_NUMBER} + " of"]]>
        </textFieldExpression>
   </textField>
   <textField evaluationTime="Report">
        <reportElement x="529" y="0" width="7" height="12" forecolor="#7E8083"
                           uuid="ef663cfd-4058-40bb-a6d9-de7f9a8164be"/>  --update your elements here
        <textElement textAlignment="Right" verticalAlignment="Middle">
            <font fontName="SansSerif" size="7" pdfFontName="OpenSans-Regular.ttf"/>
            </textElement>
            <textFieldExpression>
                <![CDATA[$V{PAGE_NUMBER}]]>
            </textFieldExpression>
   </textField> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-27T10:14:13.490

如果您想`Page 1 of 5`在报告页脚的右侧看到不喜欢的页面，请使用 ireport 或 jasper 报告调色板工具（Y 页 X）是完美的。

**如果您想`Page 1 of 5`在报告页脚的左侧看到没有喜欢的页面，请使用 ireport。**

请按照以下步骤

1.  像这样创建函数变量

[![在此处输入图像描述](../Images/b0e2c9db6ff5e9aea0268425dc86bc6d.png)](https://i.stack.imgur.com/TGhlJ.png)

2.  请拿一个TextField

    “第“+$V{V_CURRENT_PAGE_NUMBER}+”页，共“+$V{PAGE_NUMBER} 页

[![在此处输入图像描述](../Images/e8c5abd95e2c0528350076530a85915e.png)](https://i.stack.imgur.com/BnXYG.png)

# javascript - 如何检测确认（）选择？

> ID：10673266
> 
> 赞同：0
> 
> 时间：2012-05-20T12:08:36.570
> 
> 标签：javascript

我有这个 jquery 代码，当用户单击按钮时会生成一个是/否对话框。

```
$('#btnFinalize').click(function()
{
   confirm("Are you sure?");            
}); 
```

但是如何检测用户是否单击是/否？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:10:54.837

[**`confirm()`**](https://developer.mozilla.org/en/DOM/window.confirm)`true`如果用户点击“是”则返回；如果`false`他点击“否”。

所以，基本上，你可以使用这样的东西：

```
if (confirm("Are you sure?")) {
    // clicked yes
}
else {
    // clicked no
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T12:11:02.480

[`confirm()`](https://developer.mozilla.org/en/DOM/window.confirm)检查;的返回值 它将是`true`或`false`：

```
if(confirm('Are you sure?! DAMN sure?')) {
    // yes
}
else {
    // no
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T12:11:14.103

试试这个

```
$('#btnFinalize').click(function()
{
   var reply = confirm("Are you sure?");         

    if (reply)
    {
        // your OK
    }
    else
    {
        // Your Cancel
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T12:12:58.253

`confirm()`将返回真或假，具体取决于答案。因此，您可以执行以下操作：

```
$('#btnFinalize').click(function()
{
   var finalizeAnswer = confirm("Are you sure?");
   if(finalizeAnswer) {
       // do something if said yes
   } else {
       // do something if said no
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T12:24:07.053

如果按“是”，“确认（）”返回“真”，“否”返回“假”。

# iphone - 带有相机源的 UIImagePickerController 允许编辑是：视频修剪不起作用

> ID：10673269
> 
> 赞同：7
> 
> 时间：2012-05-20T12:08:51.030
> 
> 标签：iphone, xcode, uiimagepickercontroller

我正在使用`UIImagePickerController`设置为 sourceType 来录制视频`UIImagePickerControllerSourceTypeCamera`。

我已经设置`allowsEditing`为true。

捕获视频后，我使用修剪界面编辑视频并按“使用”，我只取回原始录制而不是修剪后的版本。我究竟做错了什么？

我正在使用 iOS 5。

```
-(void)shootvideo {
    imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker.view addSubview:test];
    [imagePicker.view addSubview:test2];

    imagePicker.delegate = self;
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

    imagePicker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];
    imagePicker.showsCameraControls = YES;
    imagePicker.navigationBarHidden = NO;
    imagePicker.toolbarHidden = NO;
    imagePicker.wantsFullScreenLayout = YES;
    imagePicker.allowsEditing=YES;

    [self presentModalViewController:imagePicker animated:YES];
}

-(void) imagePickerController: (UIImagePickerController *) picker
didFinishPickingMediaWithInfo: (NSDictionary *) info 
{
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) 
    {

        NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];

        //NSLog(@"%@",moviePath);

        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
            UISaveVideoAtPathToSavedPhotosAlbum (moviePath, nil, nil, nil);
        }
    }

    [self dismissModalViewControllerAnimated:YES];  
} 
```

我想根据我的应用程序使用该修剪后的视频进行进一步处理。

我哪里错了？

有没有其他方法可以完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:12:01.583

**allowsEditing** : A Boolean value indicating whether the user is allowed to edit a selected still image or movie.

@property (nonatomic) BOOL allowsEditing

**Discussion** If you allow the user to edit still images or movies, the delegate may receive a dictionary with information about the edits that were made. The protocol for the delegate is described in [UIImagePickerControllerDelegate Protocol Reference.](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/uid/TP40007069)

I Think this will be helpful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T18:54:25.453

您需要从 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 中获取 info[UIImagePickerControllerEditedImage]

我相信。

# android - 在 SQLite Android 中存储日期和时间

> ID：10673277
> 
> 赞同：2
> 
> 时间：2012-05-20T12:09:38.690
> 
> 标签：android, eclipse, sqlite, date

我正在创建一个 android 应用程序，我需要将用户的日期和时间值存储到我的 sqlite 数据库中。我正在使用 Eclipse 中可用的日期和时间选择器工具。谁能告诉我如何将这些值存储在 sqlite 数据库中（哪种格式）..？任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:31:09.113

SQLite 中没有“真正的”数据类型。其中只有 5 个，它们用作提示，而不是限制。因此，您可以将任何内容放在那里，例如 Integer 字段中的 String。

在这里阅读更多：[http](http://www.sqlite.org/datatype3.html) ://www.sqlite.org/datatype3.html特别是这个“1.2 日期和时间数据类型”，它解决了您的具体问题。

# json - 在黑莓中解析json？

> ID：10673279
> 
> 赞同：2
> 
> 时间：2012-05-20T12:09:55.053
> 
> 标签：json, blackberry

我正在使用 JSON 开发一个 Web 服务应用程序。在执行任务时，我成功地通过点击 URL 直接获取 JSOn 响应。

现在我有一个使用请求参数请求的任务。

```
enter code here
private void callJSON_Webservice(String method,String paraLastModifiedDate) {
        HttpConnection c=null;
        InputStream is = null;
        String feedURL = Constants.feedURL;
        int rc;

        try{
            JSONObject postObject = new JSONObject();
            postObject.put("CheckLatestDataDate",method);
            postObject.put("LastModifiedDate", paraLastModifiedDate);
            //c = new HttpConnectionFactory().getHttpConnection(feedURL);
            c = (HttpConnection)Connector.open(feedURL + ConnectionManager.getConnectionString());

            // Set the request method and headers
            c.setRequestMethod(HttpConnection.GET);
            c.setRequestProperty("Content-Type", "application/json;charset=UTF-8");
            c.setRequestProperty("Content-Length", "" + (postObject.toString().length() - 2));
            //c.setRequestProperty("method", HttpConnection.GET);

            // Getting the response code will open the connection,
            // send the request, and read the HTTP response headers.
            // The headers are stored until requested.
            rc = c.getResponseCode();

            if (rc != HttpConnection.HTTP_OK){
                throw new IOException("HTTP response code: " + rc);
            }

            is = c.openInputStream();

            String json = StringUtils.convertStreamToString(is);
            object = new JSONObject(json);

        }catch (Exception e) {
            System.out.println(e+"call webservice exception");
        }

    } 
```

使用此代码，我得到 EOF 异常。我需要尽快完成这个小任务。请帮我...！提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:09:31.180

尝试更换

```
is = c.openInputStream();

String json = StringUtils.convertStreamToString(is); 
```

有以下内容：

```
is = c.openInputStream();

StringBuffer buffer = new StringBuffer();
int ch = 0;
while (ch != -1) {
    ch = is.read();
    buffer.append((char) ch);
}

String json = buffer.toString(); 
```

参考：[将 StreamConnection 转换为 String](http://supportforums.blackberry.com/t5/Java-Development/convert-StreamConnection-to-String/td-p/989825)

# asp.net - 用于图像大小调整的 Asp.Net 异步 Http 处理程序

> ID：10673283
> 
> 赞同：1
> 
> 时间：2012-05-20T12:10:16.630
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, asp.net-ajax, httphandler

我正在使用 c# 方法 Image.GetThumbnail() 来生成图像的缩略图。我必须动态生成这个缩略图。我必须为单个 galleryId 生成 100 个缩略图。所以我添加了一个 HttpHandler 来动态生成缩略图。问题是当我单击画廊 ID 时，我的 Http 处理程序有 100 个请求。所以缩略图加载非常缓慢。我有一些问题

1.  我可以通过实现异步 Http 处理程序来提高性能吗？我不熟悉c#中的异步编程。如何使用 Http 异步处理程序生成缩略图？
2.  是否有任何替代方法可以获得比异步编程模型更好的性能？我的意思是添加多个处理程序来处理请求，例如

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:38:44.527

解决这个问题的另一种方法是首先避免它。

*上传*图像时生成缩略图，然后提供适当设置内容到期的准备好的缩略图。

您将节省大量处理时间，更重要的是，及时转移它，因此当用户查看图库时，您可以尽快提供缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:34:58.140

在这里，您需要定义延迟的真正问题。是因为您同时调用它 100 次，还是因为您的处理程序被会话锁阻塞？

所以首先考虑的是从你的处理程序中删除会话 - 如果你使用它。

其次，如果您的问题是因为您多次一起调用它，您可以通过使用`mutex`和一个简单的技巧来限制它。您可以锁定处理程序以模拟仅使用同时创建 6 个缩略图`mutex`。

这是一个使用互斥锁的简单代码，可以同时离开 n 个线程运行

```
static var random = new Random(DateTime.Now.Ticks);

public void ProcessRequest_NoCatch (HttpContext context) 
{
    // here we made names like ThubNum_0, ThubNum_1, ThubNum_2 ... ThubNum_4
    //  with 4 you have average 4 simulated thubs
    string sMyMutexName = string.Format("ThubNum_{0}", random.Next(0, 4))

    var mut = new Mutex(true, sMyMutexName);

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you create your thubs
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    }   
} 
```

查看会话如何阻止其他页面： [Web 应用程序在共享同一会话时处理另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)

[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

## 缓存

当然，您需要将缩略图缓存到磁盘，并为浏览器的图像设置缓存。没有理由一次又一次地创建它们。

# javascript - 更改链接不适用于 jquery

> ID：10673286
> 
> 赞同：0
> 
> 时间：2012-05-20T12:10:44.320
> 
> 标签：javascript, jquery

我有这个链接：

```
<a href="http://iml.com/wmaster.ashx?WID=124904080515&amp;cbname=liveealve&amp;LinkID=701&amp;queryid=138&amp;from=freevideo6&amp;promocode=BETLNK&amp;FRefID=-1&amp;FRefP=none&amp;FRefQS=none" rel="nofollow" title="Visit imLive.com" target="_blank" class="sitelink_external imlive">Visit imLive.com</a> 
```

我想使用此代码添加/更改不同的 url 参数：

```
 $("a.sitelink_external.imlive").each(function(){
    $params=getUrlVars(document.URL);
       var promocode_addition='';
      if('INFO'==$params['ref']){
            promocode_addition='LCI';

      } 
    $(this).attr("href", 'http://im.com/wmaster.ashx?WID=124904080515&cbname=limdeaive&LinkID=701&queryid=138&promocode=LCDIMLRV" + i + promocode_addition+"&"FRefID=" + FRefID + "&FRefP=" + FRefP + "&FRefQS=" + FRefQS');

}); 
```

问题是那个jquery代码不起作用..我试图将它移动到准备好文档..但它也不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:17:30.763

让我大吃一惊的是，您在这一行中混合了双引号和单引号：

```
$(this).attr("href", 'http://im.com/wmaster.ashx?WID=124904080515&cbname=limdeaive&LinkID=701&queryid=138&promocode=LCDIMLRV" + i + promocode_addition+"&FRefID=" + FRefID + "&FRefP=" + FRefP + "&FRefQS=" + FRefQS'); 
```

尝试将它们全部更改为双引号，并`"`从 & 号 in 之后删除额外的内容`"&"FRefID="`- 如下所示：

```
$(this).attr("href", "http://im.com/wmaster.ashx?WID=124904080515&cbname=limdeaive&LinkID=701&queryid=138&promocode=LCDIMLRV" + i + promocode_addition+"&FRefID=" + FRefID + "&FRefP=" + FRefP + "&FRefQS=" + FRefQS); 
```

你拥有它的方式是一个包含看起来像代码的东西的单个字符串。我改变它的方式是将几个字符串和变量连接在一起......（注意与 StackOverflow 的语法突出显示的区别。）

另请注意以下代码：

```
$params=getUrlVars(document.URL);
   var promocode_addition='';
  if('INFO'==$params['ref']){
        promocode_addition='LCI';

  } 
```

...可以移到循环*之前*`.each()`，因为它只在循环上运行，`document`因此每次迭代都会产生相同的结果。

（当然可能还有其他问题，因为您引用了几个未显示的变量。）

# java - 如何有效地从客户端设备获取调试数据

> ID：10673289
> 
> 赞同：0
> 
> 时间：2012-05-20T12:10:59.143
> 
> 标签：java, android, debugging, logging

我正在开发一个非市场第三方应用程序，我希望能够了解我客户设备上的问题。
那么你建议怎么做呢？
我正在考虑收集所有堆栈跟踪和其他日志并将它们发送到电子邮件或类似的东西。
是否有任何普遍的流行做法来了解客户设备上的问题？任何建议都将受到高度赞赏，因为我不想使用一些自定义的、不可靠的做法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T12:15:42.963

如果您想在应用程序崩溃的情况下收集信息，您可以使用[**ACRA - Android 应用程序崩溃报告**](http://code.google.com/p/acra/)库。

如果您的应用程序崩溃，它将几乎自动将信息*（堆栈跟踪、设备信息等）*发布到 google-document ；这对于分析崩溃的原因非常有帮助。

你可以建议用户写一些额外的信息来帮助你找出崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:20:49.270

我正在使用 BugSense，它非常好并且非常易于使用。

[http://www.bugsense.com/](http://www.bugsense.com/)

只需在您的应用程序中添加 1 行就可以了。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);          

    BugSenseHandler.setup(this, "YOUR_API_KEY");            

    // The rest of your code goes here
} 
```

# javascript - Socket.io 为 Socket 识别用户

> ID：10673295
> 
> 赞同：11
> 
> 时间：2012-05-20T12:11:54.273
> 
> 标签：javascript, node.js, socket.io

我编写了一些代码示例，通过 socket.io 识别连接的用户......所以现在我必须在索引页面上编写代码来与用户通信。

代码如下，如何向用户[1]“欢迎”和用户[2]“HI men”发送消息，并限制 2 个用户的连接。所以当 2 个用户连接时，其他任何人都无法连接..

索引.html：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect();
  var users;
  socket.on('hello', function (data) {
    console.log(data.hello);
  });
  socket.on('listing', function (data) {
     users = data; 
  });
  socket.on('chat', function (message) {
     console.log(message); 
  });
  socket.on('message', function (message) {
     console.log(message); 
  });
  function chat (message) {
    socket.emit('chat', message);   
  }
  function message (user, message) {
    socket.emit('message', {
       user: user,
       message: message
    });
  }
</script> 
```

应用程序.js

```
var express = require('express');
var app = express.createServer();
var io = require('socket.io').listen(app);

app.listen(3000);

app.use(express.static(__dirname));

var users = {};
var userNumber = 1;

function getUsers () {
   var userNames = [];
   for(var name in users) {
     if(users[name]) {
       userNames.push(name);  
     }
   }
   return userNames;
}

io.sockets.on('connection', function (socket) {
  var myNumber = userNumber++;
  var myName = 'user#' + myNumber;
  users[myName] = socket;

  socket.emit('hello', { hello: myName });
  io.sockets.emit('listing', getUsers());

  socket.on('chat', function (message) {
    io.sockets.emit('chat', myName + ': ' + message);
  });
  socket.on('message', function (data) {
     users[data.user].emit('message', myName + '-> ' + data.message); 
  });

  socket.on('disconnect', function () {
    users[myName] = null;
    io.sockets.emit('listing', getUsers());
  });
});

app.listen(process.env.PORT); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T15:00:22.437

您可以先看看如何[使用 Socket.io 配置授权](https://github.com/LearnBoost/socket.io/wiki/Authorizing)。回调提供的`handshakeData`可以在那里修改（即：添加用户名属性），并且任何更改都可以通过`socket.handshake`您的 app.js 访问（通过传递给回调的对象`io.sockets.on('connection',..`）。使用也可以从 handshakeData 访问的请求标头信息，您可以在授权回调中设置用户值（即：来自数据库），以便您可以在 app.js 中识别给定套接字的用户。

[这是一个类似的例子](https://stackoverflow.com/questions/10609564/socketio-mysql-authentication/10622204#10622204)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-20T08:39:19.553

我知道你问这个问题已经很久了，但就在 4 天前，我发布了一个用于 node js、express 和 socket.io 的模块，它可以管理你想要的东西。检查用法和示例；我希望你会发现这个模块有帮助！

你可以通过 NPM 安装[socket.io.users 这是一个用于 socket.io 应用程序的节点 js 模块。每个客户一个用户。](https://www.npmjs.com/package/socket.io.users)

部分使用代码：

```
var express = require('express');
var app = express();
var server = require('http').createServer(app);
var socketUsers = require('socket.io.users');

// ...
socketUsers.Session(app); // IMPORTANT !
// ...

var rootIo = require('socket.io')(server); // default '/' as namespace. 
var chatIo = rootIo.of('/chat');

var rootUsers = socketUsers.Users; /* default '/' as namespace.
Each namespace has ITS OWN users object list,
but the Id of a user of any other namespace may 
have the same value if request comes from the same client-machine-user.
This makes easy to keep a kind of 
synchronization between all users of all the different namespaces. */

var chatUsers = socketUsers.Users.of('/chat'); //  

rootIo.use(socketUsers.Middleware());
/* IMPORTANT but no errors if you want
to skip it for a io.of(namespace) 
that you don't want the socket.io.users' support. */

chatUsers.use(socketUsers.Middleware());

chatUsers.on('connected',function(user){
console.log(user.id + ' has connected to the CHAT');
user.store.username = 'username setted by server side'; /*at the store
property you can store any type of properties
and objects you want to share between your user's sockets.  */
user.socket.on('any event', function(data){ 
/*user.socket is the current socket, to get all connected sockets from this  
user, use: user.sockets */

});
chatIo.emit('set username',user.store.username);
});

rootUsers.on('connected',function(user){
   console.log('User has connected with ID: '+ user.id);
});

rootUsers.on('connection',function(user){
   console.log('Socket ID: '+user.socket.id+' is user with ID: '+user.id);
});

rootUsers.on('disconnected',function(user){
    console.log('User with ID: '+user.id+'is gone away :(');
});

//...server.listen blabla.. 
```

# plone - Zope 3 / Plone 中的 getMultiAdapter() 快捷方式

> ID：10673301
> 
> 赞同：2
> 
> 时间：2012-05-20T12:12:43.090
> 
> 标签：plone, zope

您可以使用 Zope 3 进行 IMyInterface(context) 查找，它会自动映射到 getAdapter()。

但是，是否存在等效的多适配器。就像是：

```
 portal_state = IPortalState((self.context, self.request)) 
```

将映射到

```
 portal_state = getMultiAdapter((self.context, self.request), interface=IPortalState) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:17:12.653

没有这样的捷径。您的第一个示例是调整元组（也需要支持的一般情况）。

这在名单上已经讨论过很多次了，但我记不起细节的来龙去脉了。如果你必须知道，你可以从以下线程开始：http: [//tech.groups.yahoo.com/group/zope/message/185605](http://tech.groups.yahoo.com/group/zope/message/185605)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T13:18:30.667

不，没有多适配器查找的简写。[在http://groups.google.com/group/zope-core-dev/browse_thread/thread/156acde2c8e799c7/63ca158f076ed010?pli=1](http://groups.google.com/group/zope-core-dev/browse_thread/thread/156acde2c8e799c7/63ca158f076ed010?pli=1)结束的讨论中给出的原因是 zope.interface 的一些用户依赖于能够对元组进行单次适配。

# asp.net - 如何在 ASP.NET 4.0 中进行 301 重定向？

> ID：10673303
> 
> 赞同：14
> 
> 时间：2012-05-20T12:13:25.537
> 
> 标签：asp.net, redirect, search-engine, http-status-code-301

我正在尝试为网站实现 URL 重定向，而不是逐页进行。我想在 global.asax 文件中执行此操作。下面是我定义的代码。

我想将[http://website.net](http://website.net)作为我的主要网址，并且如果有人输入 http://www.website.net ，我希望有一个永久的网址[重定向](http://www.website.net)。

不幸的是，它不适用于实时网站。谁能指出代码中的问题。该代码不会产生任何错误。

```
void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup

    if (HttpContext.Current.Request.Url.ToString().ToLower().Contains("http://website.net"))
    {
        HttpContext.Current.Response.Status = "301 Moved Permanently";
        HttpContext.Current.Response.AddHeader("Location", Request.Url.ToString().ToLower().Replace("http://website.net", "http://www.website.net"));
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T12:14:22.263

主要问题：您正在执行上述`Application_Start`操作 - 仅执行一次。您应该联系每个请求。尝试这个：

```
void Application_BeginRequest(object sender, EventArgs e) 
{
    // Code that runs on every request

    if (HttpContext.Current.Request.Url.ToString().ToLower().Contains("http://website.net"))
    {
        HttpContext.Current.Response.Status = "301 Moved Permanently";
        HttpContext.Current.Response.AddHeader("Location", Request.Url.ToString().ToLower().Replace("http://website.net", "http://www.website.net"));
    }

} 
```

更好的方法是使用 URL 重写，它可以从内部配置`Web.Config`：

[Microsoft 重写模块 - 在 url 上强制 www 或从 url 中删除 www](https://stackoverflow.com/questions/10153670/microsoft-rewriting-module-force-www-on-url-or-remove-www-from-url)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-11T20:32:01.163

如果使用 IIS 7 或更高版本，最简单的解决方案是在 web.config 中使用 httpRedirect 元素。

```
<httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Permanent">
     <add wildcard="/MyOldAspFile.aspx" destination="/MyNewFile.aspx" />
     <add wildcard="/MyOldHtmlFile.html" destination="/MyNewFile.aspx" />
</httpRedirect> 
```

这个方法很强大，比如你改了域名但是页面还是一样的，你只需要添加：

```
<system.webServer> 
    <httpRedirect enabled="true" childOnly="true" destination="http://www.mynewdomain.com/" /> 
</system.webServer> 
```

我在这里写了一篇小文章：[ASP.NET 301 永久重定向：最佳解决方案](http://www.idea-r.it/Blog.aspx/asp-net-301-redirect)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T06:13:54.103

.NET 版本 4 实际上对单页实现有一个改进的功能[——redirectpermanent](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.redirectpermanent.aspx)。

`Response.RedirectPermanent(NEW_URL);`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-08T17:00:15.323

在以前的正确和有用的答案的基础上，这里有几个具体的例子。假设您想删除旧页面（就像我一样），有几个选项。

**选项 1：修改 Global.asax**

```
 void Application_BeginRequest(object sender, EventArgs e)
    {
        // Add permanent redirection for retired pages
        if (Request.Url.LocalPath.ToLower().StartsWith("/[OLD PAGE NAME]"))
        {
            Response.RedirectPermanent("/[NEW PAGE NAME]", false);
        }
    } 
```

**选项 2：修改 web.config**

```
<system.webServer>
    <httpRedirect enabled="true" httpResponseStatus="Permanent">
        <add wildcard="/[OLD PAGE NAME]" destination="/[NEW PAGE NAME]" />
    </httpRedirect>
</system.webServer> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-23T09:01:43.757

如果您不知道什么是应用程序域名，请使用类似这样的名称

```
protected void Application_BeginRequest(object sender, EventArgs e)
    {
        if(HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority).Contains("localhost"))return;
        var leftPartOfUrl = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority).ToLower();
        if (leftPartOfUrl.StartsWith("http") && leftPartOfUrl.Split('.').Length == 1)
        {
            var fullUrl = HttpContext.Current.Request.Url.ToString();
            HttpContext.Current.Response.Status = "301 Moved Permanently";
            HttpContext.Current.Response.StatusCode = 301;
            HttpContext.Current.Response.AddHeader("Location", fullUrl.Insert(fullUrl.IndexOf("://", StringComparison.Ordinal) + 3, "www."));
            HttpContext.Current.Response.End();
        }
    } 
```

# apache - 在 apache 中禁用跟踪和跟踪

> ID：10673306
> 
> 赞同：13
> 
> 时间：2012-05-20T12:13:41.683
> 
> 标签：apache, trace, user-tracking

我在 suse Linux 中有 Apache 2.2.22。我想在 Apache 中禁用跟踪和跟踪并使用 1- TraceEnable Off 和 2- RewriteEngine on

```
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F] . 
```

但有两种方式不起作用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-11T10:54:14.793

在 Apache2 中，您只需添加`TraceEnable Off`httpd.conf （文件结尾）

```
TraceEnable Off 
```

要检查 Trace 是否打开/关闭，您可以使用 Curl：

```
curl -v -X TRACE http://www.yourserver.com 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T20:57:25.177

你需要把`TraceEnable Off`httpd.conf

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-12T14:14:57.643

要禁用这些方法，请在配置文件中为每个虚拟主机添加以下行：

```
RewriteEngine on

RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)

RewriteRule .* - [F] 
```

尼苏斯说）））

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-29T18:57:21.647

对于 Apache HTTPD 2.4： `Require not method TRACE TRACK`

见[要求指令](http://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#require)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-07T10:50:57.067

除非安装了支持 TRACK 的模块，否则 Apache 默认不支持 TRACK，因此只需要有指令：

```
TraceEnable Off 
```

但是，对于腰带和吊带方法，还要添加：

```
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK) [NC]
RewriteRule ^.* - [F] 
```

这将禁用 TRACE 和 TRACK。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-28T06:02:12.903

[使用 SSH 命令查看演示跟踪](https://i.stack.imgur.com/mwQgs.png "演示")

TRACE 在 apache 安装中默认启用。有两种补救方法。如果您正在运行 Apache 1.3.34、2.0.55 或 2.2 版本中的任何版本，则可以使用第一个。只需将 TraceEnable 指令添加到您的 httpd.conf 并将值设置为 Off。

> ```
> TraceEnable Off 
> ```

在 httpd.conf 中添加这一行

首先要做的是确保 mod_rewrite 已加载。如果您的 apache 配置中缺少 mod_rewrite.so 但您已经安装了它（并且您的安装位置是 /usr/local/apache），则将以下语句添加到您的 httpd.conf 中：

```
LoadModule  rewrite_module  "/usr/local/apache/modules/mod_rewrite.so" 
```

然后将以下内容也添加到您的 httpd.conf 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
RewriteRule .* - [F] 
```

使用 curl 命令进行测试

> curl -v -X TRACE http://localhost

# java - Java 中的 Foreach 循环不起作用

> ID：10673308
> 
> 赞同：-4
> 
> 时间：2012-05-20T12:13:53.620
> 
> 标签：java

我正在尝试在 Java 中创建一个 for-each 循环，该循环迭代字符串中的每个字符。当我尝试这样做时，我在 NetBeans 中得到一个错误：

```
for-each not applicable to expression type
required:array or java.lang.Iterable, found java.lang.String 
```

这是我收到错误的 Java 代码：

```
for(char c : fen){
} 
```

`fen`是一个字符串

我正在尝试了解用 C# 编写的游戏的源代码，并且那里的 foreach 循环有效：

```
foreach(char in fen){} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T12:18:15.740

您收到的编译错误消息非常清楚。

For-each 循环适用于数组和`Iterable`. `String`不是数组。它包含字符数组，但它本身不是数组。 `String`也没有实现接口`Iterable`。

如果您想使用 for-each 循环将字符迭代到字符串中，您必须说：

`for(char c : str.toCharArray()) {}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:16:36.113

字符串不可迭代，请尝试[`String#GetBytes()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)：

```
for (byte b : str.getBytes(yourCharSet)) {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T12:19:16.933

`String`不可迭代。但是您可以转换`String`为 char 数组进行迭代，如下所示：

```
char[] fen = string.toCharArray();
for(char c : fen){
   //do your work
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T12:16:13.850

for-each 循环不会按预期工作。供参考[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

```
char[] fen = //define array here
for(char c : fen){
} 
```

# ruby-on-rails - 为什么在rails中播种时会运行两次？

> ID：10673315
> 
> 赞同：9
> 
> 时间：2012-05-20T12:15:55.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我刚刚放入`puts "test"`种子文件，当我运行时`rake db:seed`，我看到有 2 行“测试”

# facebook - 重定向除 Facebook 和我的 IP 之外的所有用户代理

> ID：10673328
> 
> 赞同：0
> 
> 时间：2012-05-20T12:17:28.043
> 
> 标签：facebook, .htaccess, redirect, user-agent

有一个 Facebook 应用程序，问题是当它发布动作或任何其他链接时，它们将指向该网站。

解决方案是将其重定向回应用程序 whitaccess

现在我的问题

我需要让 Facebook 爬虫访问网站，以便它可以在画布页面中显示所有用户的数据

我也需要对我自己的 ip 做同样的事情，才能一次又一次地访问主域。

使用

```
 <?php 

 $app_id = "289131644514***";

 $canvas_page = "https://apps.facebook.com/*****/";

 $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($canvas_page);

 $signed_request = $_REQUEST["signed_request"];

 list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

 $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

 if (empty($data["user_id"])) {
        echo("<script> top.location.href='" . $auth_url . "'</script>");
 } else {
        echo ("Welcome User: " . $data["user_id"]);
 } 
```

?>

现在的问题是它会一直重定向到第一个应用程序页面，如何解决？

# entity-framework - 多租户应用程序和实体框架

> ID：10673331
> 
> 赞同：6
> 
> 时间：2012-05-20T12:17:49.543
> 
> 标签：entity-framework, multi-tenant

我正在使用共享数据库和共享模式方法构建多租户应用程序。因此，按照方法，我的每个表中都有“Tenant_Id”列。那么有没有办法在每个查询中自动附加一个where子句......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:26:12.937

您可以使用包装器来实现此目的`DbContext`，并使用 where 子句覆盖每个实体集合。

```
public class WrapperContext : YourDBContext
{

  public override DbSet<YourEntitity> YourEntities
  {
    get
    {
      return base.YourEntities.Where(t => t.Tenant_Id == someId);
    }
    set
    {
       base.YourEntities = value;
    }
  }      
} 
```

# django - 创建了一个子页面并获得了 500

> ID：10673335
> 
> 赞同：0
> 
> 时间：2012-05-20T12:18:35.767
> 
> 标签：django

正如标题所述，我创建了一个“子”页面和 BAM：500。以下是我认为实际的回溯，以及我认为与该主题密切相关的 500 页面上的一些信息。

有什么我可以做的吗？之后我试图手动删除该页面，但没有成功。（别担心，我修改了数据库的*副本*）。

```
AssertionError at /admin/cms/page/
Negative indexing is not supported.
Request Method: GET
Request URL:    http://192.168.56.101:8080/admin/cms/page/
Django Version: 1.3.1
Exception Type: AssertionError
Exception Value:    
Negative indexing is not supported.
Exception Location: /usr/local/lib/python2.7/dist-packages/django/db/models/query.py in __getitem__, line 157
Python Executable:  /usr/bin/python
Python Version: 2.7.3

Environment:

Request Method: GET
Request URL: http://192.168.56.101:8080/admin/cms/page/

Django Version: 1.3.1
Python Version: 2.7.3
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.staticfiles',
 'cms',
 'menus',
 'mptt',
 'south',
 'cms.plugins.text',
 'cms.plugins.picture',
 'cms.plugins.link',
 'cms.plugins.file',
 'cms.plugins.snippet',
 'cms.plugins.googlemap',
 'sekizai',
 'registration',
 'cms_themes']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py" in wrapper
  307\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _wrapped_view
  93\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/cache.py" in _wrapped_view_func
  79\.         response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py" in inner
  197\.             return view(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/cms/admin/pageadmin.py" in changelist_view
  657\.         cl.set_items(request)
File "/usr/local/lib/python2.7/dist-packages/cms/admin/change_list.py" in set_items
  198\.                     children[-1].last = False
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in __getitem__
  157\.                 "Negative indexing is not supported."

Exception Type: AssertionError at /admin/cms/page/
    Exception Value: Negative indexing is not supported. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:24:59.040

确保您的版本`django-mptt`是`0.5.1`.

# javascript - Javascript中的变量可见性

> ID：10673338
> 
> 赞同：0
> 
> 时间：2012-05-20T12:18:44.970
> 
> 标签：javascript, google-maps

这是我的示例代码

```
var selected_path = [];

            for (var i = 0; i <path.length-1; i++) {
                    var request = {
                    origin: path[i],
                    destination: path[i+1],
                    travelMode: google.maps.DirectionsTravelMode.WALKING

                }

                directionsService.route(request, function(results, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        selected_path = selected_path.concat(results.routes[0].overview_path);

                    }
                })

            }
            console.log(selected_path);  // slected_path in console is []
            poly.setPath(selected_path);
            poly.setMap(map); 
```

在这种情况下，控制台中的 selected_pa​​th 是 []。当我在 console.log(selected_pa​​th) 之前添加 alert(i) 行时。添加后的代码如下：

```
var selected_path = [];

            for (var i = 0; i <path.length-1; i++) {
                    var request = {
                    origin: path[i],
                    destination: path[i+1],
                    travelMode: google.maps.DirectionsTravelMode.WALKING

                }

                directionsService.route(request, function(results, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        selected_path = selected_path.concat(results.routes[0].overview_path);

                    }
                })

            }
            alert(i)   ////// ADDED ONE LINE
            console.log(selected_path); /// selected_path in console has proper value
            poly.setPath(selected_path);
            poly.setMap(map); 
```

变量 i 在屏幕上显示为警报，变量 selected_pa​​th 具有适当的值。谁能给我解释一下，因为我不明白。为了澄清它在 Firefox 中有效，可能不适用于 chrome。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:23:40.537

我认为这是由于该`directionsService.route`方法的异步行为。它在ajax 调用完成后调用回调函数。

因此，当您显示警报时，之后代码 (console.log) 的执行将被推迟，直到您单击 OK 按钮。这足以让 ajax 调用完成并填充`selected_path`变量。在没有警报的版本中，没有这样的延迟，因此 ajax 调用尚未完成，并且很可能`selected_path`在 console.log 运行之前无法填充。

要解决此问题，您可以做两件事：

1.  把你要执行的代码也`selected_path`填入回调函数中。
2.  启动超时以检查它是否已满，并仅在已满时运行代码。

所以第一个解决方案是这样做：

```
 directionsService.route(request, function(results, status) {
   if (status == google.maps.DirectionsStatus.OK) {
      selected_path = selected_path.concat(results.routes[0].overview_path);

      alert(i)   ////// ADDED ONE LINE
      console.log(selected_path); /// selected_path in console has proper value
      poly.setPath(selected_path);
      poly.setMap(map);
    }
  }) 
```

第二个是这样的：

```
 directionsService.route(request, function(results, status) {
   if (status == google.maps.DirectionsStatus.OK) {
      selected_path = selected_path.concat(results.routes[0].overview_path);
    }
  })

  (function test() {
    if (selected_path.length > 0) {
      alert(i)   ////// ADDED ONE LINE
      console.log(selected_path); /// selected_path in console has proper value
      poly.setPath(selected_path);
      poly.setMap(map);
    } else {
      setTimeout(test, 200);
    }
  })(); 
```

如果可能的话，我会使用第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:25:03.940

这是因为您正在设置`selected_path`异步回调。这`alert(i)`需要足够的时间来评估异步回调，这就是它起作用的原因。但是你不能依赖它（以及你不能依赖它`setTimeout(function(){console.log(selected_path);}, 0)`，它应该工作相同），因为异步调用可能需要很长时间。

解决方案是将所有使用的代码`selected_path`和所有应该在它之后评估的代码放入回调中，如下所示：

```
directionsService.route(request, function(results, status) {
     if (status == google.maps.DirectionsStatus.OK) {
          var selected_path = selected_path.concat(results.routes[0].overview_path);
          poly.setPath(selected_path);
          poly.setMap(map);
          // ...
     }
}); 
```

# ruby-on-rails - Rail 应用程序中双向多态关系的缺点是什么？

> ID：10673341
> 
> 赞同：1
> 
> 时间：2012-05-20T12:19:23.500
> 
> 标签：ruby-on-rails, polymorphic-associations

我正在构建一个具有一些复杂数据关系的 Rail 3.2 应用程序。我想知道构建数据库的最佳方法是什么。

我试图建模的数据可以与 Facebook 的元素进行比较。

例如，用户可以创建以下项目：

*   注释
*   相片
*   帖子
*   地位
*   更新

这些项目中的每一个都可以属于一个

*   用户
*   商业
*   地点

例如“用户 A 在巴黎的麦当劳拍了一张照片”。

我想在每个用户、业务和位置页面上显示一个活动流。

我认为这样做的方式涉及双向多态关系。

一个用于活动：

```
class ActivityFeed
  belongs_to :feedable, :polymorphic => true
end

class Comment | Photo | Status
  has_many :activity_feeds, :as => :feedable
end 
```

和一个所有权

```
class ActivityOwner
  belongs_to :ownable, :polymorphic => true
end

class User | Business | Location
  has_many :activity_owners, :as => :ownable
end 
```

那么activity_owner 将属于activity_feed，并且activity_feed 将有许多activity_owner。

我希望这是有道理的？

这是处理此案的好方法吗？有什么我应该考虑的性能问题吗？有没有更好的办法？

一个后续问题：使用这种方法，是否可以通过多种方式将同一模型映射到多态关系。例如，用户可能是照片的所有者，他们可能是标记用户。

我仍在尝试学习 Rails，并且正在努力解决这个问题。我非常感谢其他人的意见、经验和想法，以及任何指向有用信息或指南的指针。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:26:55.860

[http://blog.smartlogicsolutions.com/2008/06/13/ruby-on-rails-polymorphic-association-benchmarks/](http://blog.smartlogicsolutions.com/2008/06/13/ruby-on-rails-polymorphic-association-benchmarks/)

它有点旧，但实际上仍然

如果你使用正确的索引没有大的缺点，只是你的数据库中的列更少

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T12:29:51.590

有趣的是，看看Ryan Bates 的[Polymorphic Association（修订版）](http://railscasts.com/episodes/154-polymorphic-association-revised)。我认为这将是您尝试做的事情的完美方法。又好又干净

# c# - C# 列表集合 - 排序

> ID：10673343
> 
> 赞同：1
> 
> 时间：2012-05-20T12:19:31.897
> 
> 标签：c#, list, sorting

我正在寻找一种有效的方法来“链接”数组/列表，并根据其中一个数组同步地对所有列表/数组进行排序。

例如，假设我有三个列表：

```
List<double> Data1;
List<double> Data2;
List<double> Data3; 
```

列表中的项目显然在结构上不相关，但我希望它们是。例如 Data1[0]、Data2[0] 和 Data3[0] 是相关的。

所以现在我想根据 Data1 从大到小对三个列表的集合进行排序。我怎样才能做到这一点，以使所有三个列表保持同步？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:36:01.097

使项目在结构上相关：

```
public class Data {
  public double Data1 { get; set; }
  public double Data2 { get; set; }
  public double Data3 { get; set; }
} 
```

拥有`List<Data>`，您可以轻松地对其中一个属性的项目进行排序：

```
theList.Sort((x, y) => x.Data2.CompareTo(y.Data2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:24:28.397

您可以使用`Zip`将数组绑定在一起，然后使用投影类型按特定点排序：

```
List<double> Data1;
List<double> Data2;
List<double> Data3;

var orderedByDataOne = Data1
    .Zip(Data2, (one, two) => new {one, two})
    .Zip(Data3, (zipped, three) => new {zipped.one, zipped.two, three})
    .OrderBy(x => x.one) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T12:38:15.407

我将创建一个匿名类型的列表，它将所有三个相应列表中的值组合在一起，根据您想要的字段进行排序，然后将排序后的值投影回它们各自的列表中：

```
var combined =
    Enumerable.Range(0, Data1.Count)
              .Select(i => new
              {
                  Item1 = Data1[i],
                  Item2 = Data2[i],
                  Item3 = Data3[i],
              })
              .OrderBy(c => c.Item1)
              .ToList();

Data1 = combined.Select(c => c.Item1).ToList();
Data2 = combined.Select(c => c.Item2).ToList();
Data3 = combined.Select(c => c.Item3).ToList(); 
```

# java - Java 正则表达式匹配器

> ID：10673344
> 
> 赞同：1
> 
> 时间：2012-05-20T12:19:48.607
> 
> 标签：java, regex, matcher

关于正则表达式的简单问题。我有

```
String text = "foobar1foobar1"; 
```

当我做这样的事情时，我需要在第一个（foobar）之前获得一部分：

```
Pattern date_pattern = Pattern.compile("(.+)1");
Matcher matcher = date_pattern.matcher(text);
matcher.group(1); 
```

但我收到“foobar1foobar”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T12:22:47.763

量词是贪婪的`+`，所以它尽可能匹配。你应该是这个量词的[不情愿版本](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#reluc)`+?`；然后你的模式变成：

```
(.+?)1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:24:41.223

贪婪和非贪婪的正则表达式。`.+`是贪婪的，并且会进行尽可能长的匹配。添加 a`?`将使其不贪婪：`.+?`

对于您的示例，您实际上并不需要正则表达式，但我想这只是一个示例。相反，您可以使用示例执行此操作：

```
String firstPart = text.substring(0, text.indexOf('1')) 
```

甚至是拆分中的（非常简单的）正则表达式：

```
String firstPart = text.split("1")[0] 
```

对于大多数人来说，两者都比正则表达式更容易阅读。但是，如果您没有“1”，请小心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T12:38:16.483

另一种方法可能是使用拆分功能：

```
String s="foobar1foobar2";
String[] splitted = s.split("1"); 
```

您正在搜索的字符串在 splitted[0] 中。

# java - centos 6.2 的包 javax.mail 不存在

> ID：10673345
> 
> 赞同：1
> 
> 时间：2012-05-20T12:19:58.840
> 
> 标签：java, centos

我有一个 centos 6.2 服务器。我已将 mail.jar 放入 /usr/java/jdk1.7.0_03/jre/lib/ext 文件夹。然后当我编译我的java时它给了我这个错误。我上个月在另一台服务器上使用 centos 6.2 和相同的 java 版本完成的有趣部分都可以正常工作。这里可能缺少什么？

```
package javax.mail does not exist
import javax.mail.Message; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:38:24.590

确保您的程序使用的是您放入 mail.jar 文件的 jdk 中的 java。这种类型的设置仅在您使用放入 jar 的路径中的 java.exe 时才有效。因为您有如果您更新 jdk，请记住复制该 jar。您真的只需要确保 mail.jar 在需要它的类的类路径中。如果您将其与您的程序一起打包，那么您只需将其添加到 jar 清单文件中的类路径中。如果您不使用 jar，则另一个选项是在命令行中传递它。

前任。java -classpath=c:\temp\mail.jar myclass

# java - android java字符不同于非android java

> ID：10673347
> 
> 赞同：0
> 
> 时间：2012-05-20T12:20:45.800
> 
> 标签：java, android, string, unicode, utf-8

我有这个 RandomAccessFile 对象，它从文件中读取字节并将它们存储到字节数组中。他们应该组成一个希伯来字母串。如果我在桌面上用 JAVA 调试它们，那么我得到 4 个十六进制字节，例如：

```
data[0]=E7
data[1]=FA
data[2]=E5
data[3]=EC 
```

（所以，每个 1 字节长度是有意义的）

当我从它们构造一个 String str 时，我得到：

```
str[0]=\u05D7
str[1]=\u05EA
str[2]=\u05D5
str[3]=\u05DC 
```

这是正确的 unicoded 希伯来字母，字符串打印出来就好了。它们每个长度是 2 个字节吗？

当我在 Android 设备上进行相同的调试时，我得到相同的“数据”字节数组，但“str”字符串是 4 个相同的字节，读出为 4 个问号。

我的问题是：java 怎么能占用 1 个字节并“知道”它是希伯来语，我怎么能在 Android 中做同样的事情？

谢谢

代码：

```
iDefLength=4;
RandomAccessFile R = new RandomAccessFile(file, "r");       
R.read(bDefinition, 0, iDefLength);
this.sDef = new String(bDefinition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:35:00.650

至于您的问题：不，Java 不能占用 1 个字节并知道它是希伯来语或任何其他编码。

虽然可以通过查看文件中的许多/所有字节并通过查看字节频率来猜测编码来进行编码猜测（我相信微软用 IE 做到了这一点），但显然这不能在单个字节上工作.

# sql - 在 Where 子句中使用表

> ID：10673352
> 
> 赞同：0
> 
> 时间：2012-05-20T12:21:39.443
> 
> 标签：sql, ios, sqlite

我的数组包含一些元素：

```
(
    "element 1",
    "element 2",
    "element 3"
) 
```

我需要查询数据库，并获取存储在数据库中上述数组中的每个元素：

```
 select * from table1 where type=? 
```

我得到了一个for循环的想法，用于数组，选择查询将根据数组的大小重复，这不是那么有用。

任何想法，谢谢提前:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:26:21.960

使用[`IN`运算符](http://www.sqlite.org/lang_expr.html#in_op)：

```
select * from table1 where type in ('element1', 'element2'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:28:31.100

你的意思是像

```
 select * from table1 where type in ('type1', 'type2', 'type3') 
```

?

# android - 如何获取联系人 ID 和组

> ID：10673355
> 
> 赞同：0
> 
> 时间：2012-05-20T12:22:24.643
> 
> 标签：android, contacts, vcf-vcard

如何获取联系人 ID 和联系人组？我使用了以下代码，它为我提供了姓名和电话任何其他信息，但不提供 id 或组

```
public void ExportContacts() {
            vCard = new ArrayList<String>();
            cursor = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
            int ss = cursor.getCount();
            if(cursor!=null&&cursor.getCount()>0)
            {
                cursor.moveToFirst();
                for(int i =0;i<cursor.getCount();i++)
                {

                    get(cursor);
                    Log.d("TAG", "Contact "+(i+1)+"VcF String is"+vCard.get(i));
                    cursor.moveToNext();
                }

            }
            else
            {
                Log.d("TAG", "No Contacts in Your Phone");
            }

        }

        public void get(Cursor cursor)
        {
            //cursor.moveToFirst();
            String lookupKey = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
            Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);
            AssetFileDescriptor fd;
            try {
                String _id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "_ID");
                FileInputStream fis = fd.createInputStream();
                byte[] buf = new byte[(int) fd.getDeclaredLength()];
                fis.read(buf);
                String vcardstring= new String(buf);
                vCard.add(vcardstring);

                String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
                FileOutputStream mFileOutputStream = new FileOutputStream(storage_path, true);
                mFileOutputStream.write(vcardstring.toString().getBytes());

            } catch (Exception e1) 
            {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        } 
```

我想把 ID 和组名放在我写在文件中的 vCard 中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:28:04.290

根据您想要的 ID，您可以将[这个](http://developer.android.com/reference/android/provider/BaseColumns.html#_ID)或[这个](http://developer.android.com/reference/android/provider/ContactsContract.ContactsColumns.html#LOOKUP_KEY)用于 ID 字段。

组名可能有点混乱：[这](http://developer.android.com/reference/android/provider/ContactsContract.GroupsColumns.html#TITLE)是组标题的行，这可能是您需要的，但如果没有定义组，您可能需要进行适当的错误检查。

编辑：您可以在[此处](http://developer.android.com/reference/android/provider/BaseColumns.html#_ID)找到组 ID 。

# base64 - 确保 base64 编码的字符串从不包含非字母数字字符

> ID：10673364
> 
> 赞同：0
> 
> 时间：2012-05-20T12:23:35.433
> 
> 标签：base64

无论如何要确保base64编码的字符串永远不会包含非字母数字字符？

例如，如果我有一个要编码的长字符串，是否可以在其前面添加或附加一些内容，以确保使用 base64 编码时，编码字符串中只包含字母和数字？像这样的东西：

细绳：`192.168.1.1`

编码：`MTkyLjE2OC4xLjE=`<-我想“摆脱”等号。

我尝试在字符串末尾追加`}`（新字符串现在`192.168.1.1}`），这有效（新编码字符串：）`MTkyLjE2OC4xLjF9`，但是有没有一种方法可以确保每个组合都有效？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:26:31.733

是关于长度的。= 符号是填充以使输出成为 4 个 base64 字符的倍数。3 个字符转换为 4 个 base64 字符，因此您只需以某种方式使输入字符串的长度为 3 个字符的倍数。在你的情况下：

```
192.168.1.1 - 11 characters long, base64 ends with =
192.168.1.1$ - 12 characters long, base64 doesn't end with = 
```

选择一个可以轻松删除的填充字符。

另一种选择是从输出中删除 =，然后确保在尝试 base64 解码之前附加 = 符号以生成 4 个字符的倍数...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:31:49.613

您可以将等号 rtrim() 去掉，这是大多数人所做的。

但至于你的问题：当字符串/ 3 的长度是一个整数时。所以：

```
$pad = strlen($str) % 3; if($pad) { $str .= str_repeat(' ', $pad); } 
```

但是，是的，当您将字符串传回时，解析器会像这样自动将等号添加回 4 的倍数 - 所以您不需要保留它们。

# asp.net - 将 Webforms 站点转换为 MVC 时出现的问题

> ID：10673371
> 
> 赞同：1
> 
> 时间：2012-05-20T12:24:53.373
> 
> 标签：asp.net, asp.net-mvc, localization, webforms

我正在尝试从 Webforms 迁移到 MVC（大型生产 Web 应用程序）。我从[Scott Hanselman 伟大的博客文章](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)开始。它工作正常，但现在我有几个问题：

1.  将 .resx 文件集成到新视图中。在常规 MVC 项目中，我可以使用[Scott Allen](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)建议的方法，但它不适用于 webforms 网站！
2.  我可以在 webforms/mvc 项目中使用“System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl”吗？

**编辑** 我已经设法通过 .resx 解决了 .resx 问题`@HttpContext.GetLocalResourceObject`。第二个问题（使用System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl）还没解决

**编辑 2** 我决定使用“squishit”而不是“System.Web.Optimization”。效果很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:10:51.937

ResolveBundleUrl 在 MVC 中运行良好。这是我当前布局视图中的一行：

```
<script type="text/javascript" src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

也没有理由它不能在 WebForms 应用程序中工作 - 如果你不能让它工作，也许你应该发布一个你遇到的特定问题。

# c# - 递归地将目录名称附加到字符串

> ID：10673376
> 
> 赞同：0
> 
> 时间：2012-05-20T12:25:26.150
> 
> 标签：c#, .net, algorithm, exception-handling, io

我遇到了一个大问题，好吧，这就是问题所在：我正在尝试从目录中获取文件信息，以便可以在 listview 上列出它。当我使用该方法递归搜索文件时：

```
 private void Get_Files(string path)
    {
        DirectoryInfo di = new DirectoryInfo(path);

        FileInfo[] fi = di.GetFiles();

        foreach (FileInfo Info in fi)
        {
            try
            {
                Files.Add(Info.FullName);
            }
            catch(Exception ee)
            {
                MessageBox.Show(ee.Message);
            }
        }

        foreach (DirectoryInfo DInfo in di.GetDirectories())
        {
            Get_Files(DInfo.FullName);
        }
    } 
```

有时路径长于 260 个字符，所以我收到该错误：路径太长，不应超过 260 个字符，我在互联网上搜索过，人们说它没有解决方案，但我想出了一个解决方案我的自我。解决方案：正在创建一个字符串并将路径的每个路径附加到该字符串，因此在将整个路径保存到字符串时我永远不会遇到该错误。把它想象成把路径分开，把每一块都附加到字符串上。所以这是我想出的解决方案：

```
 List<string> Files = new List<string>();

    string completepath = string.Empty;
    string current_dire_name = string.Empty;

    private void Get_Files(string path)
    {
        DirectoryInfo di = new DirectoryInfo(path);

        FileInfo[] fi = di.GetFiles();

        foreach (FileInfo Info in fi)
        {
            try
            {
                completepath += "\\" + Info.Name;
                Files.Add(completepath);
                string remove_file_name = completepath;
                remove_file_name = remove_file_name.Replace("\\" + Info.Name, "");
                completepath = remove_file_name;
            }
            catch(Exception ee)
            {   
                if(DialogResult.Yes == MessageBox.Show("Error at the Get_Files Method and Error message :\n\n" + ee.Message + "\n\nQuit Application now ?","",MessageBoxButtons.YesNo,MessageBoxIcon.Question))
                {
                    Environment.Exit(0);
                }
            }
        }

        foreach (DirectoryInfo DInfo in di.GetDirectories())
        {
            string remove_folder_name = completepath;
            remove_folder_name = remove_folder_name.Replace("\\" + current_dire_name, "");
            completepath = remove_folder_name;

            current_dire_name = DInfo.Name;
            completepath += "\\" + DInfo.Name;
            Get_Files(DInfo.FullName);
        }
    } 
```

好的，那个方法救了我，但是它生成了错误的路径，我的意思是有些东西不正确，假设路径应该是：C:\Folder1\Folder2\Folder3\file.txt 生成的路径是：C:\Folder1\file .txt ，类似的东西....我知道我所做的方法有问题，尤其是递归附加。

我希望有人和我一起弄清楚，这样人们就可以避免长路异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:37:37.653

您正在寻找[.Net Long Path library](http://bcl.codeplex.com/wikipage?title=Long%20Path&referringTitle=Home)，它使用`\\?\`带有 Windows API 的前缀来完全避免限制。

# c++ - 输出字符串的 C++ 奇怪“格式”

> ID：10673378
> 
> 赞同：0
> 
> 时间：2012-05-20T12:25:45.293
> 
> 标签：c++, borland-c++

我正在编写一个处理文件的 C++ 应用程序。我已经实现了标准操作，例如从文件中写入和读取，一些搜索功能等。

做了一些操作后，我的输出字符串以一种非常奇怪的方式出现。例如文本“地址 -”，作为“?п&&..&”出现：

![在此处输入图像描述](../Images/82dabacde4ee6aecd9f77ebf0b4e42cc.png)

![在此处输入图像描述](../Images/df841ac45d6d843992cd478989993118.png)

C++ 中是否有任何缓冲区可能被文件操作填满并且它正在执行此输出，所以我需要清空它或清理它？

编辑：当我编写一个从文件中读取记录的函数时出现问题，根据用户标准选择其中一些然后对它们进行排序。

这是我的代码：

结构：

```
 struct Appartament
    {
         char address[50];
         char telephoneNumber[20];
         char view[10];

         double price;
         double distanceFromCenter;

         int roomCount;
     }; 
```

处理文件的函数：

```
 //Search by room count and order by price (rising)
    void AdvanceSearch()
    {
        clrscr();

        Appartament currentRecord;
        int recordsCount=0;

        fstream currentFile("Records.dat",ios::binary|ios::in);

        if(!currentFile)
        {
            cout<<"Error - the file could not be opened."<<endl;
            return;
        }
        else
        {
            //Array with apartments records
            Appartament CurrentRecords[MaxRecords];

            currentFile.seekg(0L,ios::end);
            long int length=currentFile.tellg();
            currentFile.seekg(0L,ios::beg);

            int isAppartamentFound=0;

            if(length==0)
            {
                cout<<"The file is empty."<<endl;
                return;
            }
            else
            {
                int userRoomCount;

                do
                {
                    clrscr();
                    cout<<"Enter apartment room count - ";
                    cin>>userRoomCount;
                }while(userRoomCount<0);

                clrscr();

                cout<<endl<<"Apartments with "<<userRoomCount<<" rooms order by price:";

                currentFile.read((char*)(&currentRecord),sizeof(Appartament));

                while(!currentFile.eof())
                {
                    if(currentRecord.roomCount==userRoomCount)
                    {
                        CurrentRecords[recordsCount]=currentRecord;
                        recordsCount++;
                        isAppartamentFound=1;
                    }

                    currentFile.read((char*)(&currentRecord),sizeof(Appartament));
                }

                currentFile.close();
            }

            if(isAppartamentFound==0)
            {
                cout<<endl<<"There are no matches!"<<endl;
            }
            else
            {
                //If only one apartment is found
                if(recordsCount==1)
                {
                    cout<<endl;
                    ShowRecord(currentRecord);

                }
                else
                {
                    //Sort the records

                    Appartament tempApartament;

                    int isChangeMade=1;

                    for(int index=0;index<recordsCount;index++){

                          //ShowRecord(CurrentRecords[index]);
                    }

                    while(isChangeMade==1)
                    {
                        isChangeMade=0;

                        for(int index=0;index<recordsCount-1;index++)
                        {
                            if(CurrentRecords[index].price>CurrentRecords[index+1].price)
                            {
                                isChangeMade=1;

                                tempApartament=CurrentRecords[index];
                                CurrentRecords[index]=CurrentRecords[index+1];
                                CurrentRecords[index+1]=tempApartament;
                            }
                        }
                    }

                    for(index=0;index<recordsCount;index++)
                    {
                        ShowRecord(CurrentRecords[index]);
                    }
                }
            }
         }
    } 
```

显示记录的功能：

```
 void ShowRecord(Appartament Record)
    {
        cout<<"Apartment Information"<<endl;
        cout<<"The address is - "<<Record.address<<" and it is only "<<Record.distanceFromCenter<<" miles away from the center."<<endl;
        cout<<"The price is "<<Record.price<<" $ for "<<Record.roomCount<<" rooms with "<<Record.view<<" view."<<endl;
    } 
```

Т这是可能的输出：

![在此处输入图像描述](../Images/981d52e621c6894dd615bc733c3d7a54.png)

我已经用其他版本的 Borland 在其他机器上运行了我的程序，它运行良好。这就是为什么问题是我的编译器出了什么问题：？

# prolog - 编写谓词 sorted(L)

> ID：10673381
> 
> 赞同：0
> 
> 时间：2012-05-20T12:26:13.330
> 
> 标签：prolog

> 编写一个谓词`sorted(L)`来测试整数列表是否已排序，`[n1,n2,...,nk]`其中`[n1 < n2 <...< nk]`.

我迷路了。我怎么能实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:47:17.703

```
sorted(L) :- hightolow(L) ; lowtohigh(L).

hightolow([H1,H2|T]) :- H1 >= H2, hightolow([H2|T]).
hightolow([_L]).

lowtohigh([H1,H2|T]) :- H1 =< H2, lowtohigh([H2|T]).
lowtohigh([_L]). 
```

在行动：

```
6 ?- sorted([1,2,3,7,8]).
true 

7 ?- sorted([1,2,3,7,8,2]).
false.

8 ?- sorted([9,6,3,2]).
true .

9 ?- sorted([9,6,3,2,7]).
false. 
```

# java - java - 如何在java android中创建应用程序变量和会话变量？

> ID：10673386
> 
> 赞同：1
> 
> 时间：2012-05-20T12:27:01.690
> 
> 标签：java, android, session, variables

在我的项目中，我将提供一些可以使用**会话和应用程序变量**（如`c#`. 我的信息是保密的，因此不能存储在像`xml` 提前致谢这样的文件中。

**编辑：1-** 我发现调用`sharedpreference`但不知道如何使用的会话变量的解决方案请告诉我

*   如何初始化它和
*   从其他类设置它和
*   从其他人那里获得价值？

    ?...?...?..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:32:23.713

首先，您的应用程序基本上随时都可能死掉，因为在您的应用程序在后台停留一段时间并且平台需要更多内存后，它可能会被 Android 调度程序杀死。

话虽如此，将数据存储在全局 Application 类中通常被认为有点 hacky。相反，您使用它的方式取决于您将如何访问应用程序。很多应用程序在 SharedPreferences 中保留了诸如 OAuth 令牌之类的东西，这是一件非常普遍接受的事情（尽管我不确定这到底有多洁净）。您可能会做的是将会话变量保存在 Application 类中，然后 - 每当应用程序死机时 - 只需重新进行身份验证。无论如何，这可能是一种很好的做法，因为在那之后可能有人拿起了电话，等等......

However, you seem to be under the impression that SharedPreferences can be read by anyone. This is incorrect, see [this.](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE) Now, if you have a rooted phone, sure, *then* there's a way around that, but this is always going to be an issue, on a rooted phone you should basically consider that you don't really have any security at all...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:49:40.507

`Application`上课是为你准备的。使用它并保存您的应用程序级数据，如下所示：

```
public class WhatEverApp extends Application
{
    String mApplicationLevelVar = "Hello";
} 
```

`WhatEverApp`将是您使用的应用程序的名称`manifest.xml`

[在此处](https://stackoverflow.com/a/4208947/593709)查看有关课程的详细讨论`Application`。

# sql - SQL - 将记录插入多个表和 Scope_Identity

> ID：10673393
> 
> 赞同：0
> 
> 时间：2012-05-20T12:28:13.470
> 
> 标签：sql, sql-server, sql-server-2008

我有一个从多个表派生的临时表，需要将其插入到两个表（T1 和 T2）中。T1 有一个主键（自动生成），它必须作为外键插入到 T2 中（一：多关系）

我知道我是否使用了以下插入语句

```
INSERT INTO T1 (.....)
SELECT (.....) FROM X 
```

我无法使用 scope_identity，因为这只会给我最后一个自动生成的 ID，以便在 T2 中使用。

除了使用光标或遍历每一行之外，还有哪些选项可以确保跨表拆分的记录之间的关系仍然存在？仅供参考，此插入过程会定期发生，并且可能在两个表中包含多达 1000 多条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:32:25.177

我认为“输出子句”可以解决您的问题。一个例子

```
create table itest ( i int identity not null primary key, j int not null unique )
create table #new ( i int not null, j int not null)
insert into itest (j)
output inserted.i, inserted.j into #new
select o.object_id from sys.objects as o
select * from #new
drop table #new, itest;
go 
```

# windows-phone-7 - 如何将菜单项添加到应用程序栏到所需的索引？

> ID：10673395
> 
> 赞同：0
> 
> 时间：2012-05-20T12:28:19.633
> 
> 标签：windows-phone-7, windows-phone-7.1, application-bar

我正在使用此代码将菜单项添加到应用程序栏

```
ApplicationBar.MenuItems.Insert(0, refreshMenu); 
```

我从 XAML 添加了 2 个其他项目。
但是添加的菜单项正在添加到列表的末尾并成为最后一个菜单项，而不是第一个。

有没有办法将菜单项添加到所需的索引而不删除所有项目并添加所需的顺序？

**编辑：**当我从第一个索引中删除菜单项时，它正在删除刷新菜单，所以问题在于菜单项的呈现。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:04:39.300

看起来它可能是框架中的一个错误（这不是一个常见的场景）。我推荐以下之一（按推荐顺序）：

*   始终将项目保留在那里，但在不需要时将其禁用（根据 Shawn 的评论）。内置应用程序已经这样做了。
*   将整个*ApplicationBar*交换到包含该项目的另一个实例（这是支持的方案）
*   删除所有项目并按您想要的顺序重新添加它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:10:06.353

除了我使用之外，我没有找到任何其他解决方案（删除所有项目，然后每次都从代码中添加）。所以我认为唯一可以接受的方法是我使用的一种。

# excel - Excel VSTO 加载项：我可以在代码中禁用 Excel 标题吗？

> ID：10673397
> 
> 赞同：3
> 
> 时间：2012-05-20T12:28:31.180
> 
> 标签：excel, vsto

我正在为 Excel (2007+) 构建一个 Visual Studio 工作簿加载项组件。我的 VSTO 修改工作簿中有一些工作表，我想禁用代码中的标题。（您可以在 Excel 功能区 > 视图 > 标题“复选框”中执行的操作）。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:00:32.847

> VB.Net

```
Me.Application.ActiveWindow.DisplayHeadings = False 
```

> C ＃

```
this.Application.ActiveWindow.DisplayHeadings = false; 
```

# c# - FromCurrentSynchronizationContext，我错过了什么吗？

> ID：10673402
> 
> 赞同：2
> 
> 时间：2012-05-20T12:29:52.533
> 
> 标签：c#, user-interface, task-parallel-library, tpl-dataflow

我目前正在处理一个从包含数千个文件的大型二进制文件中读取的应用程序，每个文件都由应用程序中的某个其他类处理。此类返回一个对象或 null。我想在主窗体上显示一个进展，但由于某种原因，我无法理解它。

```
int TotalFound = 0;
var uiScheduler = TaskScheduler.FromCurrentSynchronizationContext;
BufferBlock<file> buffer = new BufferBlock<file>();
DataflowBlockOptions options = new DataflowBlockOptions(){ TaskScheduler = uiScheduler, }; 
var producer = new ActionBlock<someObject>(largeFile=>{ 
    var file = GetFileFromLargeFile(largeFile);
    if(file !=null){
       TotalFound++;
       buffer.post(file);
       lblProgress.Text = String.Format("{0}", TotalFound);
    }
}, options); 
```

上面的代码冻结了我的表单，即使我使用“TaskScheduler.FromCurrentSynchronizationContext”，为什么？因为当我使用下面的代码时，我的表单更新正常

```
DataflowBlockOptions options = new DataflowBlockOptions(){ TaskScheduler = uiScheduler, }; 
var producer = new ActionBlock<someObject>(largeFile=>{ 
    var file = GetFileFromLargeFile(largeFile);
    if(file !=null){
       Task.Factory.StartNew(() => {
          TotalFound++;
          buffer.Post(file);
       }).ContinueWith(uiTask => {
          lblProgress.Text = String.Format("{0}", TotalFound);
       },CancellationToken.None, TaskContinuationOptions.None, uiScheduler);           
    }
}); 
```

我是整个 TPL 数据流的新手，所以我希望有人可以分享一些关于为什么在第二个代码片段中它有效而在第一个片段中它没有的原因。

亲切的问候，马丁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T13:12:52.187

您的 UI 被阻止的原因是因为*您*正在使用`FromCurrentSynchronizationContext`. `GetFileFromLargeFile()`它会导致代码在 UI 线程上运行，这意味着如果您正在执行一些长时间运行的操作（很可能），它将冻结。

另一方面，您必须`lblProgress.Text`在 UI 线程上运行。

我不确定您是否应该`lblProgress.Text`直接在此代码中设置，这对我来说看起来耦合太紧了。但如果你想这样做，我认为你应该在 UI 线程上运行该行：

```
var producer = new ActionBlock<someObject>(async largeFile =>
{
    var file = GetFileFromLargeFile(largeFile);
    if (file != null)
    {
        TotalFound++;
        await buffer.SendAsync(file);
        await Task.Factory.StartNew(
            () => lblProgress.Text = String.Format("{0}", TotalFound),
            CancellationToken.None, TaskCreationOptions.None, uiScheduler);
    }
}); 
```

但更好的解决方案是，如果您进行`GetFileFromLargeFile()`异步并确保它不会在 UI 线程上执行任何长时间运行的操作（[`ConfigureAwait(false)`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait%28v=vs.110%29.aspx)可以帮助您）。如果你这样做了，代码`ActionBlock`可以在 UI 线程上运行而不会冻结你的 UI：

```
var producer = new ActionBlock<someObject>(async largeFile =>
{
    var file = await GetFileFromLargeFile(largeFile);
    if (file != null)
    {
        TotalFound++;
        await buffer.SendAsync(file);
        lblProgress.Text = String.Format("{0}", TotalFound)
    }
}, options); 
```

# asp.net-mvc-3 - 谓词构建器包含

> ID：10673403
> 
> 赞同：0
> 
> 时间：2012-05-20T12:30:02.223
> 
> 标签：asp.net-mvc-3, entity-framework, contains, predicate

我正在尝试使用谓词生成器通过 MVC3 执行查询。我收到错误

“无法将类型 'System.Boolean' 转换为类型 'System.Object'。LINQ to Entities 仅支持转换实体数据模型原始类型。”

我已通过如下查询

```
if (!string.IsNullOrEmpty(SearchObj.EmployeeIDSortId.ToString()) && SearchObj.EmployeeIDSortId > 0)
    {

        string[] vals =new string[' ']; 
        if (SearchObj.EmployeeIDSortId == 1)
        {
            vals = new string[] { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k","l" };

        }
        else if (SearchObj.EmployeeIDSortId == 2)
        {

            vals = new string[] { "m", "n", "o", "p", "q", "r", "s" };

        }
        else if (SearchObj.EmployeeIDSortId == 3)
        {

            vals = new string[] { "t", "u", "v", "w", "x", "y", "z" };
        }

        employeepredicate =
            employeepredicate.And(emp => emp.EmployeeName.Substring(0, 1).ToLower().Equals(vals.Any()));

         } 
```

你能建议这有什么问题吗，我想这只是由于我的查询 vals.Any()。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:58:17.967

让我作为序言 - 我不熟悉该`And`方法，但对`.Equals(vals.Any())`我来说看起来不正确。所以，我假设这`And`需要一个返回布尔值的函数。您真正要查找的是确定员工姓名中的第一个字符是否包含在 vals 数组中：

`employeepredicate = employeepredicate.And( emp => vals.Contains(emp.EmployeeName.Substring(0, 1).ToLower()));`

# wpf - Grid.Children.Add 上引发了什么事件

> ID：10673411
> 
> 赞同：2
> 
> 时间：2012-05-20T12:31:24.937
> 
> 标签：wpf, .net-4.0

在我的 WPF 应用程序中，我有一个带有网格的主窗口。Login 和 Shell 是 2 个单独的 UserControl，它们作为子项添加到网格中。我需要找出 Shell 何时加载并从主窗口启动计时器。

我只需要知道使用 Grid.Children.Add 方法添加 UserControl 时会引发什么事件，以便我可以检查是否加载了 Login 或 Shell 并启动计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:24:52.800

我不太确定您在尝试什么，但听起来您正在寻找 Load 事件：

```
UserControl MyControl = new UserControl();
MyControl.Loaded += new RoutedEventHandler(MyControl_Loaded);

public void MyControl_Loaded(object sender, RoutedEventArgs e) 
{ 
    if (((UserControl)sender).IsLoaded)
    { 
        ..... do something
    }
} 
```

希望能帮助到你

# mysql - 将 Sql Server 2008 数据库导入/导出到 MySQL

> ID：10673414
> 
> 赞同：0
> 
> 时间：2012-05-20T12:32:00.897
> 
> 标签：mysql, sql-server, sql-server-2008, mysqlimport

我在 SQL Server 2008R2 中有一个相对较大的数据库，需要导出到 MySql。我尝试了 SQL Server 的“导入和导出数据”选项，但它没有提供导出到 MySQL 的选项

请协助解决如何实现这一目标的可能方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:38:56.973

[sourceforge 上有一个名为MSSQL2MySQL](http://sourceforge.net/projects/mssql2mysql/)的开源应用程序可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:09:38.240

如果我是你。我会选择[Navicat](http://www.navicat.com/)

它是一款出色的软件和非常简单的用户界面，可以在不同类型的服务器中导入和导出数据

干杯！！

# ruby-on-rails - 嵌套 haml 循环以使“Collapse bootstrap-collapse.js”在 Rails 视图中正常工作

> ID：10673415
> 
> 赞同：4
> 
> 时间：2012-05-20T12:32:13.377
> 
> 标签：ruby-on-rails, twitter-bootstrap, haml

具有以下导轨视图（haml）：

```
.row
  .span7
    %h1 Listing categories
    %p
      - @categories.each do |category|
        .accordion-group
          .accordion-heading
            .accordion-toggle{"data-toggle" => "collapse", "data-target" => "##{category.path}"}= link_to category.name, "##{category.path}"
      - @competitors.each do |category_path, competitors|
        .accordion-body.table.collapse.in{:id => "#{category_path}"}
          %table.accordion-inner
            %thead
              %tr
                %th= "Project"
                %th= "Description"
                %th= "Watchers"
                %th= "Forks"
            %tbody
              - competitors.each do |competitor|
                %tr
                  %td
                    = link_to "#{competitor["html_url"]}".sub( "https:\/\/github.com\/", "" ), "#{competitor["html_url"]}"
                  %td
                    %span »
                    = competitor["description"]
                  %td
                    %span.badge.badge-info= competitor["watchers"]
                  %td
                    %span.badge.badge-warning= competitor["forks"] 
```

我需要 css 类`.accordion-group`来包含`.accordion-heading`（在 @categories.each 循环内）和`.accordion-body`（在另一个循环内：`@competitors.each`循环）。

请注意，这两个`.each`ruby​​ 循环在 haml 中处于相同的“节点级别”，而它们的 css 类`.accordion-heading`并且`.accordion-body`必须进入`.accordion-group`css 类容器。

我需要的结果 html 如下所示：

```
<div class="accordion-group">
  <div class="accordion-heading">
  <div class="accordion-body in collapse" id="collapse_id">
</div>
<div class="accordion-group">
  <div class="accordion-heading">
  <div class="accordion-body in collapse" id="collapse_id">
</div>
<div class="accordion-group">
  <div class="accordion-heading">
  <div class="accordion-body in collapse" id="collapse_id">
</div>
... 
```

...虽然我目前得到这个错误的 html 代码：

```
<div class="accordion-group">
  <div class="accordion-heading">
</div>
<div class="accordion-group">
  <div class="accordion-heading">
</div>
<div class="accordion-group">
  <div class="accordion-heading">
</div>
...
<div class="accordion-body in collapse" id="collapse_id">
<div class="accordion-body in collapse" id="collapse_id">
<div class="accordion-body in collapse" id="collapse_id">
... 
```

我找不到缩进haml的正确方法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:14:30.843

在 Haml 中执行此类操作的方法是首先将您的数据转换为正确的格式，以便它与页面上应该出现的结构相匹配。然后迭代这个结构，标记应该更容易创建和更清晰。

例如，在这种情况下，您希望依次迭代*成对*的元素，一个来自每个数组，而不是单独遍历每个数组。然后你可以做这样的事情，（这`each_pair`不是一个真正的方法，它只是为了演示）：

```
- each_pair do |category, competitors|
  .accordion-group
    .accordion-heading
      ...
    .accordion-body
      ... 
```

[`zip`在 Ruby 中，您可以使用方法](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-zip)组合数组来获得对（或三元组或更大），所以您想要的是这样的：

```
- @categories.zip(@competitors) do |category, (category_path, competitors)|
  .accordion-group
    ...etc... 
```

在这种情况下`@competitors`已经是一个数组数组，所以我们对其进行解构以获得我们想要的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:57:26.717

缩进你的第二个块（如下所示）不起作用吗？

```
.row
  .span7
    %h1 Listing categories
    %p
      - @categories.each do |category|
        .accordion-group
          .accordion-heading
            .accordion-toggle{"data-toggle" => "collapse", "data-target" => "##{category.path}"}= link_to category.name, "##{category.path}"
        - @competitors.each do |category_path, competitors|
          .accordion-body.table.collapse.in{:id => "#{category_path}"}
            %table.accordion-inner
              %thead
                %tr
                  %th= "Project"
                  %th= "Description"
                  %th= "Watchers"
                  %th= "Forks"
              %tbody
                - competitors.each do |competitor|
                  %tr
                    %td
                      = link_to "#{competitor["html_url"]}".sub( "https:\/\/github.com\/", "" ), "#{competitor["html_url"]}"
                    %td
                      %span »
                      = competitor["description"]
                    %td
                      %span.badge.badge-info= competitor["watchers"]
                    %td
                      %span.badge.badge-warning= competitor["forks"] 
```

# database - Vb.net 应用程序在桌面 + windows mobile 上运行 6 - 使用哪个数据库？

> ID：10673418
> 
> 赞同：0
> 
> 时间：2012-05-20T12:32:32.170
> 
> 标签：database, vb.net, ms-access, sql-server-ce, windows-mobile-6

我想构建一个有两个版本的库存管理器应用程序：1\. 可以在桌面上运行 2\. 可以在 windows mobile 6 上运行

我希望这两个版本都可以从数据库中存储和读取数据，该数据库可以集中存储在网络服务器或 LAN 上的某个位置。

我想知道我可以使用 Access 作为我的后端数据库或 sql server 吗？windows mobile 应用程序能够访问它并对其进行读写吗？

注意：我宁愿只创建一个数据库，它只将详细信息存储在表中，不需要任何其他功能。所有功能，如保存、编辑、删除、搜索、过滤等，都只能从前端 VB.NET 界面完成

如果您的建议涉及使用 2 个数据库，例如一个用于桌面版本，一个用于 Windows Mobile，那么还请告诉我如何在它们之间同步数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:19:46.453

我的两个设备始终连接，您可以同时使用 SQL Server。

# mysql - 在 Mac OS X Lion 上安装 MySQL？

> ID：10673420
> 
> 赞同：1
> 
> 时间：2012-05-20T12:32:43.407
> 
> 标签：mysql, database, django, installation, tar

我已经下载了 MySQL 社区服务器并从 .tar 文件中提取了文件。但是我该如何安装呢？我根本找不到解决此问题的简单方法或任何方法。还是之后已经安装了`tar xvf MySQL.tar`？而且，在安装 .pkg 版本时，它不应该在任何地方创建文件吗？最后，社区服务器是与 django 一起使用的服务器，对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:34:27.360

我建议使用 .dmg 版本。这是安装 mysql 的一种更简单的方法，可能会很痛苦[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T19:10:21.503

如果你在开发和测试，你真的需要使用 MySQL 吗？您可以使用与 Python 捆绑在一起的 sqlite。

正如 Vezu 建议的那样，开始使用*服务器*的最佳方法是下载二进制安装程序 -[`mysql-5.5.24-osx10.6-x86.dmg`](http://dev.mysql.com/downloads/mirror.php?id=408029)文件。

如果你打算将它与 Python 一起使用，你还需要为 OSX 安装 MySQLdb。为此，请参阅[此答案](http://dev.mysql.com/downloads/mirror.php?id=408029)以获取指向您需要遵循的步骤的链接。

# python - 在python中生成所有3位回文数的列表

> ID：10673422
> 
> 赞同：3
> 
> 时间：2012-05-20T12:33:00.553
> 
> 标签：python, list-comprehension, itertools, palindrome

我想在 python 中生成所有 3 位回文数的列表。我可以用粗略的方式编写代码，但有没有使用列表理解`itertools`等直观的方式？

而且，如果给定的数字是`k`数字而不是3，该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T12:37:35.190

```
>>> L = [int("%d%d%d" % (x,y,x)) for x in range(1,10) for y in range(10)]
>>> L
[101, 111, 121, 131, 141, 151, 161, 171, 181, 191, 202, 212, 222, 232, 242, 252,
 262, 272, 282, 292, 303, 313, 323, 333, 343, 353, 363, 373, 383, 393, 404, 414,
 424, 434, 444, 454, 464, 474, 484, 494, 505, 515, 525, 535, 545, 555, 565, 575,
 585, 595, 606, 616, 626, 636, 646, 656, 666, 676, 686, 696, 707, 717, 727, 737,
 747, 757, 767, 777, 787, 797, 808, 818, 828, 838, 848, 858, 868, 878, 888, 898,
 909, 919, 929, 939, 949, 959, 969, 979, 989, 999] 
```

**更新：**为了提高内存和速度效率，您可以将字符串格式和 int 转换替换为`x+y*10+x*100`. 谢谢@larsmans。

**更新2：**那是`k`数字！

```
[int(''.join(map(str, (([x]+list(ys)+[z]+list(ys)[::-1]+[x]) if k%2
                  else ([x]+list(ys)+list(ys)[::-1]+[x])))))
            for x in range(1,10)
            for ys in itertools.permutations(range(10), k/2-1)
            for z in (range(10) if k%2 else (None,))] 
```

并且优化为不使用字符串！

```
[sum([n*(10**i) for i,n in enumerate(([x]+list(ys)+[z]+list(ys)[::-1]+[x]) if k%2
                                else ([x]+list(ys)+list(ys)[::-1]+[x]))])
            for x in range(1,10)
            for ys in itertools.permutations(range(10), k/2-1)
            for z in (range(10) if k%2 else (None,))] 
```

我使用了排列，第一个数字使用了一个不同的循环，它不能是`0`，最后一个循环是在中间添加所有可能的数字 if `k%2 == 1`(k 是奇数)。

欢迎提出优化建议！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:44:27.953

对于`k`数字的泛化，最明显的方法是执行以下操作：

```
palindromes = [x for x in itertools.permutations(string.digits, k) if x == x[::-1]] 
```

但它不是很有效 - 它生成所有可能的 3 位数字，并丢弃那些不是回文的数字。但是，可以推广@jadkik94 之类的解决方案 - 您需要做的是生成*一半*长度的每个组合（向下舍入），并将其镜像粘贴到最后：

```
palindromes = [x + x[::-1] for x in permutations(digits, k//2)] 
```

将适用于所有偶数`k`- 对于奇数`k`，您添加一个额外的循环将所有 0-9 放在镜像的两半之间。

# android - 我可以使用什么游戏引擎/框架来与空中移动一起工作而不会出现 fps 问题？

> ID：10673424
> 
> 赞同：1
> 
> 时间：2012-05-20T12:33:02.970
> 
> 标签：android, flash, actionscript, air, starling-framework

我听说除了 Starling Framework 之外，大多数闪存引擎在移动设备上都有问题。但是，starling 并没有满足我作为寻路和瓷砖地图工具的所有需求，我可以完美地与 flixel 一起使用。我可以将什么引擎/框架与 Air 或 starling 框架一起使用而不会错过很多 fps？我需要碰撞、寻路和瓦片地图支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:49:13.233

从这个日期（2012 年 5 月 22 日）开始，您将不得不等待。没有一个引擎可以将上述所有内容整合到一个易于使用的软件包中，如 Flixel。致力于 Flixel 的团队已经宣布打算制作这样的东西（http://www.photonstorm.com/archives/2524/looking-for-developers-to-help-build-a-new-game-framework）但是迄今为止它不存在。

也就是说，您可以使用 Box2D 和一些寻路实现（如 a*）构建游戏，然后只使用 starling 来渲染游戏。您会在设置中花费一些时间，但这并非不可能。在 stage 3D 之前，我为这个游戏做了类似的方法：

[http://www.candystand.com/play/cougar-town](http://www.candystand.com/play/cougar-town)

它使用 box2D 来操作图形。

（当然减去 pathfindong）

我在这里的博客上发布了一个类似游戏的源代码：它使用旧的显示列表。但是你可以看到它是如何工作的，并将其切换到令人吃惊的程度。 [http://plasticsturgeon.com/2011/05/box-2d-2-1a-cannon-game-part-3-the-complete-game-source/](http://plasticsturgeon.com/2011/05/box-2d-2-1a-cannon-game-part-3-the-complete-game-source/)

# matlab - 如何评估 Matlab 中的期望值？

> ID：10673426
> 
> 赞同：1
> 
> 时间：2012-05-20T12:33:32.790
> 
> 标签：matlab

当我想评估正态分布向量的期望时，我遇到了函数 dblquad 的问题。这是一个代码：

```
p2 = @(X)(mvnpdf(X,zeros(4,1),sigma2));
int1 = dblquad(@(x, y)(p2([x; y; Y1])), 0,1,0,1) 
```

其中 Y1 是 [a;b] - 常数向量。它会出现这样的错误：

```
??? Error using ==> vertcat
CAT arguments dimensions are not consistent. 
```

请帮助，如果有人知道如何纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:34:12.140

被积函数应该能够接受矢量输入。现在是

```
@(x, y)(p2([x; y; Y1])) 
```

如果 x 或 y 或向量，这将出错。因此`??? Error using ==> vertcat`.

这可以通过使用 arrayfun 来解决：

```
@(x, y) arrayfun(@(yi) arrayfun(@(xi) p2([xi; yi; Y1]), x), y) 
```

但这并没有解决另一个问题：被积函数具有向量输出，即使输入`x`和`y`是标量。

实际上，为什么您要尝试双重集成该功能对我来说毫无意义。看起来`p2`每个变量 X 中的元素都有一个独立的输出......

# mysql - mysql db 记录可见性（设计和选择帮助）

> ID：10673428
> 
> 赞同：2
> 
> 时间：2012-05-20T12:33:42.483
> 
> 标签：mysql, database, database-design

我需要设计一个包含用户和项目的 mysql 数据库。除了其他信息外，项目表还包含有关项目是否存在的信息

*   对所有用户可见
*   位于一个或多个地理区域的用户可见
*   仅对选定用户可见

例如，一个项目可以对位于区域 1、5 和 8 中的所有用户可见，但也对不在区域 1、5 和 8 中的 n 个选定用户可见。

用户的地理区域存储在用户表中（例如 region:4）

我的问题是在哪里存储项目可见性、项目区域和选定用户以及如何向用户显示（选择）所有相关项目。

我需要向用户展示所有项目的列表

*   对所有用户可见
*   由于他所在的地区而对用户可见
*   对用户可见，因为他被选中查看项目

他将不胜感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:27:28.917

这是表结构。请注意，根据您的 MySQL 版本，您可能需要将 type=INNODB 更改为 ENGINE=INNODB：

```
drop table if exists prjusers;

drop table if exists proj_users;

drop table if exists project_regions;

drop table if exists projects;

drop table if exists regions;

/*==============================================================*/
/* Table: prjusers                                              */
/*==============================================================*/
create table prjusers
(
   id_prjuser           int not null auto_increment,
   id_region            int not null,
   user_name            varchar(100) not null,
   primary key (id_prjuser)
)
type = InnoDB;

/*==============================================================*/
/* Table: proj_users                                            */
/*==============================================================*/
create table proj_users
(
   id_proj_user         int not null auto_increment,
   id_prjuser           int not null,
   id_project           int not null,
   primary key (id_proj_user)
)
type = InnoDB;

/*==============================================================*/
/* Table: project_regions                                       */
/*==============================================================*/
create table project_regions
(
   id_project_region    int not null auto_increment,
   id_project           int not null,
   id_region            int not null,
   primary key (id_project_region)
)
type = InnoDB;

/*==============================================================*/
/* Table: projects                                              */
/*==============================================================*/
create table projects
(
   id_project           int not null auto_increment,
   prj_code             varchar(100) not null,
   global_project       char(1) not null,
   primary key (id_project)
)
type = InnoDB;

/*==============================================================*/
/* Table: regions                                               */
/*==============================================================*/
create table regions
(
   id_region            int not null auto_increment,
   region_name          varchar(100) not null,
   primary key (id_region)
)
type = InnoDB;

alter table prjusers add constraint FK_relationship_12 foreign key (id_region)
      references regions (id_region) on delete restrict on update restrict;

alter table proj_users add constraint FK_relationship_10 foreign key (id_prjuser)
      references prjusers (id_prjuser) on delete restrict on update restrict;

alter table proj_users add constraint FK_relationship_11 foreign key (id_project)
      references projects (id_project) on delete restrict on update restrict;

alter table project_regions add constraint FK_relationship_8 foreign key (id_project)
      references projects (id_project) on delete restrict on update restrict;

alter table project_regions add constraint FK_relationship_9 foreign key (id_region)
      references regions (id_region) on delete restrict on update restrict; 
```

**选择语句：**

```
select id_project, prj_code from projects where global_project='Y'
UNION
select projects.id_project, projects.prj_code 
from projects join project_regions on projects.id_project = project_regions.id_project 
join prjusers on prjusers.id_region = project_regions.id_region
where prjusers.id_prjuser = {$_SESSION['id_prjuser']}
UNION
select projects.id_project, projects.prj_code 
from projects join proj_users on projects.id_project = proj_users.id_project
where proj_users.id_prjuser = {$_SESSION['id_prjuser']} 
```

上面将执行 3 个 UNION 并得出项目 ID 和项目代码是全局的 (1)，它们属于登录用户的区域，其 ID 保存在会话变量 (2) 中，以及所有明确的项目分配给该用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:18:02.170

USER --------* USER_PROJECT* ----- PROJECT --------*REGION_PROJECT*-----REGION---* USER

USER 和 PROJECT 与映射表 USER_PROJECT 多对多相关

USER 和 REGION 是多对一相关的

PROJECT 和 REGION 与映射表 REGION_PROJECT 多对多相关

此评论旨在补充@somnath 的回答。我无法在评论中添加这种关系。@somnath，我希望我的回答能解释您正确设计的表格之间的关系。

# php - 将超全局 $_POST 直接写入数据库是否明智？

> ID：10673430
> 
> 赞同：1
> 
> 时间：2012-05-20T12:33:48.673
> 
> 标签：php, forms, security, post

我想要一个适用于不同形式的提交代码，例如：

```
<?php 
 $type = $_GET['type'];
 if(isset($_SESSION['id']))
  handle_form();
 else 
  include 'form_'.$type.'.php'; // different fields based upon type
?> 
```

所以我想知道循环通过超全局 $_POST 将所有键和值写入数据库是否明智。就像是：

```
<?php 
 function handle_form() {
 $query = "";
 foreach($_POST as $key => $value) {
  $query .= mysql_real_escape_string($key)."='".mysql_real_escape_string($value)."' AND ";
 }
 mysql_query("UPDATE ".$_POST['type']." SET ".substr($query,0,-4)."WHERE `id` = $_SESSION['id']");
 }
?> 
```

或者这是处理表单的一种非常不安全的方法，在相应的“form_type.php”中硬编码所有字段是否更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:45:14.893

这是一个非常糟糕的主意，因为任何与列不对应的额外 POST 字段都会破坏查询。您自己的代码用于`$_POST['type']`确定您正在更新哪个表，除非您事先取消设置，否则它也会中断。

此外，您没有对实际发送到数据库的数据进行任何验证。将您自己的姓名/权限更改为管理员？当然。将其他用户的电子邮件更改为您自己的？前进。让您的账户余额+100,000 美元？没问题。将产品标记为“价格 1 美元”？是的。

拥有某种[Active Record](http://en.wikipedia.org/wiki/Active_record_pattern)会更聪明。如果您正在编写更大的应用程序，请查看 Yii 或 Cake PHP 等框架，它们内置了此类功能。

* * *

除此之外：请停止使用古老的 mysql_* 函数编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。相反，您应该了解准备好的语句并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T12:42:45.410

来自不受信任的外部来源的所有内容都不能安全地插入数据库或其他任何地方，因为您有[代码注入](https://en.wikipedia.org/wiki/Code_injection)的风险。如果是数据库，您将面临[SQL 注入](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)的风险。你必须清理输入。这适用于任何[Superglobals](http://php.net/manual/de/language.variables.superglobals.php)以及您无法控制的任何其他数据，例如 Web 服务。

转义数据`mysql_real_escape_string`是您需要做的最低限度的事情，但[它并不能保护您免受所有可能的注入攻击](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)。它纯粹是语法，无法检测到对其他语法正确的数据值的篡改。

除此之外，您不应该再使用 ext/mysql。[它已过时，将被弃用](http://marc.info/?l=php-internals&m=131031747409271)。使用[ext/mysqli](http://php.net/manual/de/book.mysqli.php)或[PDO](http://php.net/manual/de/book.pdo.php)并使用[准备好的语句](https://stackoverflow.com/questions/5200238/why-mysqli-prepared-statements)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:44:17.373

这是一个潜在的噩梦。*永远不要相信你的用户。*

每个 $_POST 参数应检查为：

*   它是接受参数白名单的一部分吗？
*   它有正确的数据类型或值范围吗？

然后，请务必使用**Prepared Statements**而不是普通的 mysql_query() 调用。

# xquery - 不同节点的错误返回属性

> ID：10673439
> 
> 赞同：2
> 
> 时间：2012-05-20T12:35:08.953
> 
> 标签：xquery, basex

我的 xml 文件符合以下 DTD：

```
<!ELEMENT eprints (paper+)>
<!ELEMENT paper (eprintsid,userid,dir,datestamp,type,author+,title)>
<!ELEMENT eprintsid (#PCDATA)>
<!ELEMENT userid (#PCDATA)>
<!ELEMENT dir (#PCDATA)>
<!ELEMENT datestamp (#PCDATA)>
<!ELEMENT type (#PCDATA)>
<!ELEMENT author (#PCDATA)>
<!ELEMENT title (#PCDATA)>

<!ATTLIST author id CDATA #REQUIRED> 
```

从这个 xml 文件中，我想生成与多个 id 值匹配的作者的所有不同值文本节点的列表节点，多个 id 作为子节点。

因此我尝试使用以下 xquery：

```
let $doc := doc("eprints")
for $i in distinct-values($doc//author)
let $jn := $i/@id
where (count(distinct-values($jn)) > 1)
return <idByAuthor>{$jn}</idByAuthor> 
```

显然 XQuery 不允许我遍历 的 'id' 属性节点`$i`，因为我收到以下错误（来自我的 xml 数据库引擎 BaseX）：'@id' 需要上下文节点；xs:untypedAtomic 找到。

有谁知道为什么我无法达到的 id 属性`$i`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:26:35.070

[`distinct-values(...)`](http://www.xqueryfunctions.com/xq/fn_distinct-values.html)返回一组原子值（例如，数字和字符串），而不是 XML 节点。你不能从这些做一个轴步。

> 从这个 xml 文件中，我想生成与多个 id 值匹配的作者的所有不同值文本节点的列表节点，多个 id 作为子节点。

这不是你想要解决的问题，而是你试图解决它的方式。我猜你想查询所有提供不止一篇论文的作者（或者他们是什么作者）。如果我猜错了，请准确写出您的查询应该做什么。

尝试按照这个草图（还不是有效的 XQuery）：

```
for all authors $a
where count of all papers with author $a
return <idByAuthor>{$a/@id}</idByAuthor> 
```

如果您需要有关此查询的更多帮助，请发布一些示例 XML 片段以使用，如果您有一些用于该查询的代码和所需的输出。

* * *

明确问题的代码：

```
for $author in distinct-values($doc//author)
let $ids := $doc//author[data()=$author]/@id/data()
where count($ids) > 1
return
  <author name="{ $author }">
  {
    for $id in $ids
    return <id>{ $id }</id>
  }
  </author> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:55:25.983

您可能想看看`group by`XQuery 3.0 引入的表达式（请参阅[BaseX Doc](http://docs.basex.org/wiki/XQuery_3.0#Group_By "BaseX 文档")）。

Group by 允许您执行基于值的分组，因此您可以在此[Gist 中执行类似 Group By Example](https://gist.github.com/2761801 "要旨")的操作：

```
let $authors := 
<authors>
  <author id="a"><name>Foo</name>…whatever…&lt;/author>
  <author id="b"><name>Foo</name>…whatever…&lt;/author>
  <author id="a"><name>Foo</name>…whatever…&lt;/author>
  <author id="c"><name>Bar</name>…whatever…&lt;/author>
  <author id="d"><name>Bar</name>…whatever…&lt;/author>
  <author id="f"><name>FooBar</name>…whatever…&lt;/author>  
</authors> (: or use doc('eprints')//author :)
return
<distinct-names> {
  for $author in $authors//author
  group by $name := $author/name
  return
    if(count(distinct-values($author/@id)) > 1) then
      element {"author"}
              { 
                attribute {"name"} {$name},
                for $id in distinct-values($author/@id)
                return <id>{$id}</id>
              }
    else ()  
}</distinct-names> 
```

我希望这会有所帮助，否则请随时发布您的 XML 文件的一小段。

亲切的问候迈克尔

# coldfusion - 如何访问包含多个单词的查询列？

> ID：10673441
> 
> 赞同：6
> 
> 时间：2012-05-20T12:35:46.667
> 
> 标签：coldfusion, cfspreadsheet

我正在使用 cfspreadsheet read 将工作表读入查询对象。

```
<cfspreadsheet action="read" src="TestExcel.xls" sheet="1" query="spreadsheetData" headerrow="1" excludeHeaderRow="true"> 
```

问题是，一些标题包含多个单词。所以我最终得到了一个有点像这样的查询：

```
ID  Name    Start Date  End Date
3   Test    1/1/2009    1/1/2013
17  Test 2  11/11/2010  11/11/2012 
```

如果我尝试访问列名中有空格的列之一，则会收到错误消息。

```
<cfoutput query="spreadsheetData">
   #start date#
</cfoutput> 
```

我也试过`#[start date]#`了，但是没有用。我无法控制收到的 Excel 表格的格式。有没有办法访问多字标题列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T12:37:47.013

使用括号表示法时，内容必须以字符串结尾，因此：

```
<cfoutput query="spreadsheetData">
    #spreadsheetData['start date'][CurrentRow]#
</cfoutput> 
```

如果你不使用引号，你传入一个变量，它是这样完成的：

```
<cfset ColumnName = 'start date' />

<cfoutput query="spreadsheetData">
    #spreadsheetData[ColumnName][CurrentRow]#
</cfoutput> 
```

请注意，您必须在括号前使用查询名称 - 如果您只是编写`[ColumnName]`，那么这是内联数组创建表示法，而不是访问变量。

此外，如果在查询循环之外使用它（即*不在*`cfoutput`/`cfloop`带有查询属性），您还需要限定`CurrentRow`变量的范围，即

```
spreadsheetData[ColumnName][spreadsheetData.CurrentRow] 
```

（或提供您自己的明确数字/变量）。

正如 Leigh 下面所指出的，对于 cfspreadsheet 特定的行为，您还可以指定`columnnames`属性，以将列重命名为可直接访问的内容，例如

```
<cfspreadsheet query=".." columnNames="Foo,Bar,StartDate,Etcetera" ..> 
```

# java - 与多个类共享一个片段？

> ID：10673447
> 
> 赞同：0
> 
> 时间：2012-05-20T12:36:33.917
> 
> 标签：java, android, android-fragments

我想知道如何最好地创建进度条片段。当然，它必须可供所有其他班级使用。

目前我只有一个 ProgressBarFragment，它有公共的 setVisible 方法。通过 FragmentManager 获取 Fragment 我可以将其设置为可见或不可见。但这是执行此类操作的正确方法吗？

```
public class MyActivity exetends FragmentActivity {
    void setVisibility(int visible) {
        ProgressBarFragment fragment = (ProgressBarFragment) getSupportFragmentManager().findFragmentById(R.id.fragment_progress_bar);
        fragment.setProgressBar(visible);
    }
} 
```

当然，我还有其他几个片段也使用此代码来触发进度条。

```
public class ProgressBarFragment extends Fragment {
    public void setProgressBar(int visible) {
        progressBar = (ProgressBar) getActivity().findViewById(R.id.progress_bar);
        progressBar.setVisibility(visible);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:46:35.970

您可以将此代码重构为您的静态方法`ProgressBarFragment`

```
class ProgressBarFragment {
    //...
    static void setVisibility(Activity parent, int visible) {
           ProgressBarFragment progressBar =
                   (ProgressBarFragment)parent.getSupportFragmentManager()
                   .findFragmentById(R.id.fragment_progress_bar);
    progressBar.setProgressBar(visible);
    //...
} 
```

因此，您将在`ProgressBarFragment.setVisibility(yourActivity, 1)`任何地方使用。

# cookies - 我想检查一个页面是否使用了cookies？

> ID：10673449
> 
> 赞同：0
> 
> 时间：2012-05-20T12:36:42.137
> 
> 标签：cookies, httpcookie

是否有可能我点击了一个页面，作为响应，我得到了该页面正在使用 cookie 的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:38:27.257

您没有指定您正在使用哪些工具，但 cookie 是使用 HTTP 标头设置的，因此查看标头，您将看到所有 cookie 信息。

使用 curl，--dump-headers 可能会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:41:45.517

我从你的“httpcookie”标签中假设 c#。

使用 HttpWebRequest 并确保在发出请求之前分配其 CookieContainer 属性。请求完成后，检查 response.Cookies。

# devexpress - 获取数据到 gridview devexpress

> ID：10673459
> 
> 赞同：0
> 
> 时间：2012-05-20T12:37:51.307
> 
> 标签：devexpress, gridcontrol

在 gridcontrol devexpress 中，我将“employee_id”列显示为组合框。我想将 EMPLOYEES 表中的数据填充到 gridcontrol devexpress 中的“employee_id”列中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:45:01.150

我建议您处理[GridView.ShownEditor](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_ShownEditortopic)事件。在此事件处理程序中，您可以获得当前显示的列编辑器的克隆，并过滤其项目。这是一些示例代码：

```
private void gridView_ShownEditor(object sender, EventArgs e) {
    GridView view = (GridView)sender;
    if (view.FocusedColumn != employee_id) return;
    ComboBoxEdit editor = (ComboBoxEdit)view.ActiveEditor;       
    // Here bind the editor DataSource and ValueMember and 
       Display member to employee_id
} 
```

其他方式为：参考：[如何在运行时将具有不同值的数据集绑定到存储库组合框](http://community.devexpress.com/forums/t/89945.aspx)

```
RepositoryItemComboBox combo = new RepositoryItemComboBox();
            combo.Items.AddRange(new string[{values});
            gridControl1.RepositoryItems.Add(combo);
            gridView1.Columns["Criteria"].ColumnEdit = combo; 
```

参考：
[如何根据](http://www.devexpress.com/Support/Center/p/Q220234.aspx)
[在 gridcontrol](http://www.devexpress.com/Support/Center/p/Q307517.aspx)
[列值列表中的另一个单元格组合框中所做的选择来使用项目填充 RepositoryItemCheckedComboBox](http://www.devexpress.com/Support/Center/p/Q96215.aspx)

# ios - Windows 上来自 Apache 的 HTTP 实时流式传输

> ID：10673460
> 
> 赞同：0
> 
> 时间：2012-05-20T12:37:53.163
> 
> 标签：ios, http-live-streaming

我有一个消耗流媒体视频的小型 iPhone 应用程序。在我的 Macbook 上使用 Apache，我已经能够毫无问题地让它工作。即，我已经部署了 .m3u8 和 .ts 文件，并且服务器正在正确地流式传输文件，并且手机应用程序也在显示视频。

现在我尝试在 Windows Server 上运行的 apache 服务器上复制它，但无法正常工作。对于这两种内容类型，我在 mime.types 中都有正确的设置。

在本地使用 mediastreamvalidator 会返回已验证的 ok 状态。在远程流上运行它会挂起它。

access.log 显示前五个段被请求，然后什么也没有。如果我尝试从 Safari 访问，它会显示控件，并且轨迹栏最多更新 8 秒，然后什么也没有。我见过[这个](https://stackoverflow.com/questions/6438680/http-live-streaming-not-working-on-apache)问题，但这似乎不是问题。

在浏览器中，本地和远程的 GET 语句返回相同的结果。

Safari 从本地 URL 播放，Firefox 和 Chrome 不会，也不会出现任何错误。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:42:40.227

事实证明，您需要对 mediafilesegmenter 使用“-no-floating-point-duration”和“-iframe-index-file none”参数。仍然无法在 Firefox 或 Chrome 中运行。但这暂时不是问题。

# c++ - C++ .NET - 如何处理位图？

> ID：10673468
> 
> 赞同：0
> 
> 时间：2012-05-20T12:38:48.060
> 
> 标签：c++, .net, bitmap, c++-cli

我想从文件中加载位图，对其执行一些操作，然后将其保存在相同的文件名下。模式是这样的：

```
Bitmap in = gcnew Bitmap(fileName);
Bitmap out = gcnew Bitmap(in.Width, in.Height, in.PixelFormat);

fill [out] with data from [in]

out.Save(fileName); 
```

但这不起作用。这很明显。我无法保存到仍然打开的文件（因为位图）。问题是：我到底要如何关闭位图？！我尝试了很多方法，但没有任何效果。调用 Dispose 在 C# 中工作，但此方法在 C++ 中受保护。调用删除也不起作用。解决方案是什么？

编辑：在一个位图上操作也不起作用。但是我发现了一个问题。调用删除工作。我忘了将我的位图声明为指针

```
Bitmap^ in = gcnew Bitmap(fileName);
Bitmap^ out = gcnew Bitmap(in.Width, in.Height, in.PixelFormat);

fill [out] with data from [in]

delete in;
out.Save(fileName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:18:20.040

这是 C++/CLI 编码中的常见陷阱，您正在使用`stack semantics`. 换句话说，您没有用`^`帽子声明引用类型变量。这使得编译器`Dispose()`在作用域块的末尾自动发出调用。非常方便，并且是`RAII`C++ 中模式的模拟，但它在这里妨碍了。您想`in`在保存新位图之前处理位图。

有两种方法可以做到这一点。您可以通过添加大括号来使用范围块玩游戏：

```
Bitmap^ out;
try {
    {
        Bitmap in(fileName);
        out = gcnew Bitmap(in.Width, in.Height, in.PixelFormat);
        // etc..
    }   // <== "in" gets disposed here
    out->Save(fileName);
}
finally {
    delete out;
} 
```

`out`但这有点难看，特别是因为在这种非常具体的情况下需要混合起来。另一种方法是明确地做所有事情：

```
Bitmap^ out;
Bitmap^ in;
try {
    in = gcnew Bitmap(fileName);
    out = gcnew Bitmap(in->Width, in->Height, in->PixelFormat);
    // etc..
    delete in;
    in = nullptr;
    out->Save(fileName);
}
finally {
    delete in;
    delete out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:44:00.857

您不需要`out`位图。只需编辑`in`并保存即可。我也建议改用 CImage 类

```
CImage image;
image.Load(filename);
fill [image] with whatever data you want
image.Save(filename); 
```

# java - 如何访问子类中的方法

> ID：10673471
> 
> 赞同：2
> 
> 时间：2012-05-20T12:39:00.807
> 
> 标签：java, methods, arraylist, subclass

我目前正在学习 Java，但我真的在为某些事情苦苦挣扎。所以我有一个“磁盘”类，子类“CD”、“游戏”和“DVD”。我有一个“数据库”类，它在数组列表中创建磁盘、游戏和 cd 的新实例。数组列表的初始化如下：

```
private ArrayList<Disk> disks = new ArrayList(); 
```

然后我将 Game 的一个实例添加到数组中：

```
disks.add(new Game(1999,"SuperGame!",900,"xbox","ea")); 
```

我正在尝试使用以下代码访问 Game 子类中的方法“getConsole”：

```
Disk currentDisk = disks.get(3);
currentDisk.getConsole(); 
```

它说 getConsole 方法不存在。我可以看到问题在于它只访问 Disk 类的方法和字段，但是我怎样才能使它可以访问它定义为的子类的方法。谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:44:45.160

由于`getConsole()`仅在`Game`子类上可用，因此您需要告诉 Java 您知道您正在查看 a `Game`，并显式转换：

```
Disk currentDisk = disks.get(3);
if (currentDisk instanceof Game) {
    ((Game)currentDisk).getConsole();
} 
```

这不是在 Java 中做事的好方法，因为您正在显式测试子类的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:43:24.730

您需要将其转换回`Game`：

```
 Game myGame = (Game)disks.get(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:44:44.523

Disk 不知道 Game 中的方法，为了使用它，您需要将其转换为 Game。在大多数情况下，您还应该检查以确保它实际上是一个游戏而不是另一个子类类型。

```
Disk disk = new Game();

(Game)disk.getConsole(); // notice the cast 
```

编辑：忘记添加，检查它是否属于使用 instanceof

```
if (disk instanceof Game)
{
    // do things
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T12:45:44.640

您必须使用 instanceof 运算符检查对象是否实际上是“游戏”对象。然后您可以将其转换为 Game 并使用它来访问所有游戏公共成员和方法。

```
Disk currentDisk = disks.get(3);
if (currentDisk instanceof Game) {
 Game game = (Game) currentDisk;
 game.getConsole();
} 
```

# sql - 在这个数据库设计中是否有任何查询可以用适当的值替换 NULL 值？

> ID：10673473
> 
> 赞同：0
> 
> 时间：2012-05-20T12:39:30.987
> 
> 标签：sql

我有以下数据库设计：

```
Employee Table: EmployeeID, Name, OrgCode
Department Table: OrgCode, DepartName
CompleteSurvey Table: ID, RespondentID 
```

现在，由于我在 Employee 表中有一些员工在 OrgCode 列中有 Null 值，我想用“Others”值替换 NULL 值，因为部门表中的“Others”用（OrgCode = 4）。**那么有什么问题可以帮我做这件事吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:43:16.867

使用此查询：

```
UPDATE Employee SET OrgCode = 4 WHERE OrgCode IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:44:01.650

这应该适用于您作为对单个数据库的一次性更新：

```
update employee
  set OrgCode = 4
where OrgCode is null 
```

但是，在其他数据库中，“OrgCode”可能不是第 4 位，因此这里有一个更新应该适用于您组织中的所有数据库（或者如果“OrgCode”不是第 4 位）。

```
update employee
  set OrgCode = d.OrgCode
from departments d
where d.DepartmentName = 'Others'
  and employee.OrgCode is null 
```

此外，您可能需要检查您正在使用的 DBMS，看看您是否可以在表的列上设置默认值。这样，每当发生插入并且缺少 OrgCode 时，都会自动填写“Others”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:42:36.697

好引擎是不同的，但想法总是一样的：

```
update employee set OrgCode = 'Others' where OrgCode IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T13:06:27.627

我会试试这个：

```
UPDATE employee
SET    orgcode = NVL( orgcode, 4 ); 
```

# mysql - 如何通过 Internet 使用静态 IP 访问 MySQL 数据库？

> ID：10673474
> 
> 赞同：1
> 
> 时间：2012-05-20T12:39:31.617
> 
> 标签：mysql, phpmyadmin

我有一台安装了 MySQL 的计算机，它有一个静态 IP 并且连接到互联网。如何通过互联网在另一台电脑上访问那台电脑上的 MySQL 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:04:55.553

在 PHPMyAdmin 的 config.inc.php 文件中设置以下行

原来的：

```
$cfg['Servers'][$i]['host']      = 'localhost'; 
```

你的版本：

```
$cfg['Servers'][$i]['host']      = 'your_servers_static_public_ip'; 
```

设置`your_servers_static_public_ip`为服务器的公共 IP 地址。

如果您使用防火墙，那么您需要记住在防火墙中打开端口 3306 以允许远程 MySQL 请求到达 MySQL 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:42:22.980

[这](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)是手册中有关连接到 MySQL 的部分。

因此，您将使用--host 和--port。

此外，您需要配置防火墙以允许此流量通过，还可能需要配置 MySQL 服务器以允许来自外部 IP 的连接。

# .htaccess - .htaccess 将 index.php 重定向到其他 RewriteRule，导致循环，即使带有 [L] 标志

> ID：10673477
> 
> 赞同：1
> 
> 时间：2012-05-20T12:40:17.407
> 
> 标签：.htaccess, url-rewriting

所以我有这个.htaccess：

```
RewriteEngine On
RewriteBase /
RewriteRule ^home$ /index.php [L]
RewriteRule ^edit$ /edit.php [L]
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /new.php 
```

它将任何未知的 url 重定向到`/new.php`

并且仅将保留的`/home`and重定向`/edit`到适当的页面

但我也想将任何人重定向到根目录`/`并`/index.php|html`转到`/home` 所以我尝试了这个：

```
RewriteRule ^index\.(php|html?)$ /home [R=301,L] 
```

但它会导致一个循环，这是可以理解的。

它还`/home`通过导致自身环回来破坏我的重定向。如何让`/`and`/index.php`重定向到`/index.php`，但仍然`/home`在它之后添加？

我还尝试删除每条 RewriteCond 行，但它没有任何好处..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:56:52.327

也许您可以将 index.php 重命名为 home.php，这似乎是避免循环的最简单方法。

# visual-studio - 如何在 VisualStudio 2008 中为 CUDA 设置 48k 共享内存

> ID：10673480
> 
> 赞同：0
> 
> 时间：2012-05-20T12:41:01.367
> 
> 标签：visual-studio, cuda, gpu, shared

我想在 CUDA 中切换到 48k 共享内存，但我不知道如何在 VisualStudio 2008 中设置选项。请帮助找到答案。

非常感谢，贝扎德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:05:43.540

ShMem/L1 配置独立于您的 IDE 完成。您应该调用[`cudaFuncSetCacheConfig`](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__EXECUTION_g400ecf473d4fa8ac6738fbc753d5c288.html#g400ecf473d4fa8ac6738fbc753d5c288)或[`cudaDeviceSetCacheConfig`](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__DEVICE_gac27b566beee1aa9175373bb9e29b8d1.html)。前者只影响一个指定函数的缓存设置，后者是全局的。

当然，您应该有兼容的设备（CC >= 2.0）。此外，48KiB ShMem 是默认配置。

# r - 在多面图中为单个面板添加几何图层

> ID：10673481
> 
> 赞同：16
> 
> 时间：2012-05-20T12:41:04.713
> 
> 标签：r, ggplot2

从以下链接[Aligning two plots with ggplot2](http://rwiki.sciviews.org/doku.php?id=tips:graphics-ggplot2:aligntwoplots)中获得提示，我能够绘制 2 个“y”变量，这些变量面向一个共同的 x 轴。我现在要做的是能够将 geom_point 图层添加到仅一个方面。该层使用与 d1 具有相同结构的不同数据集（d3）。当我添加图层时，它会在两个方面都使用。是否可以仅在上面对点进行分层。

```
library(ggplot2)

x <- seq(1992, 2002, by = 2)
d1 <- data.frame(x = x, y = rnorm(length(x)))
xy <- expand.grid(x = x, y = x)
d2 <- data.frame(x = xy$x, y = xy$y, z = jitter(xy$x + xy$y))
d3 <- data.frame(x = x, y = 3+rnorm(length(x)))

d1$panel <- "a"
d2$panel <- "b"
d1$z <- d1$x

d <- rbind(d1, d2)

p <- ggplot(data = d, mapping = aes(x = x, y = y))
p <- p + facet_grid(panel ~ ., scale = "free")
p <- p + layer(data = d1,  geom = c( "line"), stat = "identity")
###*p <- p + layer(data = d3,  geom = c( "point"))* - This is the layer I intend to add only to the top panel

p <- p + layer(data = d2,  geom = "line", stat = "identity")
p 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T13:35:58.020

只需将`panel`列添加到`d3`要添加点集的面板即可。在你的情况下：

```
d3$panel = "a"

p <- ggplot(data = d, mapping = aes(x = x, y = y))
p <- p + facet_grid(panel ~ ., scale = "free")
p <- p + layer(data = d1,  geom = c( "line"), stat = "identity")
p <- p + layer(data = d3,  geom = c( "point"))
p <- p + layer(data = d2,  geom = "line", stat = "identity")
p 
```

这会产生正确的输出：

![在此处输入图像描述](../Images/db23e14f69c35d469fca5d20316be398.png)

如果调用中提到的列`facet_grid`不存在，ggplot2 假定它需要在所有方面打印。当您指定时`panel`， ggplot2 将考虑它。

# java - 从 Joptionpane 获取索引

> ID：10673486
> 
> 赞同：1
> 
> 时间：2012-05-20T12:41:47.630
> 
> 标签：java, swing, joptionpane

我想访问用户选择的选项的索引。例如，在下图中，如果我选择 microsoft 选项，那么它应该给我索引 1。这可能吗？

![在此处输入图像描述](../Images/ecfdfa2b949ae67b8a7862f5d39da74a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:47:08.000

好吧，您得到`"Microsoft"`（`Object`至少显示 Microsoft）作为 show 调用的返回值，这是否足够好？

如果您需要索引，只需在您提供给对话框的输入数组中找到该返回值的索引。

请参阅 java 教程的输入部分：http: [//docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#input](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#input)

假设您使用的是 showInputDialog(..)：

```
Object[] possibilities = {"Broadcom...", "Microsoft"};
Object result = JOptionPane.showInputDialog( frame, "Capture Interfaces", "Input",   JOptionPane.PLAIN_MESSAGE, icon, possibilities, possibilities[0]);

if (result != null) {
    //result is the choosen object, if you need the index even so:
    int index = 0;
    for (Object o : possibilities) {
        if (result == o)
            break;
        index++
    }
    //index is now the index...
} 
```

# core-data - 在 NSFetchedResultsController 的两个部分显示托管对象

> ID：10673491
> 
> 赞同：2
> 
> 时间：2012-05-20T12:42:40.983
> 
> 标签：core-data, nsfetchedresultscontroller

我有一个`NSManagedObject`具有三个属性的：

1.  标题 ( `NSString *`)
2.  标题 ( `NSString *`)
3.  最喜欢的 ( `BOOL`)

我想使用以下方案显示这些对象的列表：

*   收藏夹
    *   对象 1
    *   对象 3
*   标题
    *   对象 2
    *   对象 3
*   B 标头
    *   对象 1
    *   对象 4

有什么办法可以做到这一点`NSFetchedResultsController`吗？我尝试将其排序`favorite`，`header`但无济于事，因为一旦将对象分配给收藏夹部分 - 它就不会显示在其标题部分中。有什么我可以使用的技巧吗？我应该执行两次提取并将结果重新格式化为一个嵌套数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:08:12.957

使用两个单独的`NSFetchedResultsController's`

然后，您需要在各种委托方法中考虑到这一点。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.mainFetchedResultsController sections] count] + 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section == 0) {
        return [[[self.favFetchedResultsController sections] objectAtIndex:section] numberOfObjects];
    } else {
        return [[[self.mainFetchedResultsController sections] objectAtIndex:section - 1] numberOfObjects];
    }
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{    
    if (section == 0) {
        return @"Favourites";
    } else {
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.mainFetchedResultsController sections] objectAtIndex:section - 1];
        return [sectionInfo name];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Object *object = nil;

    if (indexPath.section == 0) {
        object = [self.favFetchedResultsController objectAtIndexPath:indexPath];
    } else {
        NSIndexPath *mainIndexPath = [NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section -1];
        object = [self.mainFetchedResultsController objectAtIndexPath:mainIndexPath];
    }

    UITableViewCell *cell = ...

    ...

    return cell;
} 
```

# css - 在 CSS 中为每个样式元素使用 !important

> ID：10673494
> 
> 赞同：0
> 
> 时间：2012-05-20T12:42:49.073
> 
> 标签：css, styling

我有以下问题，我需要“ul[editable] li”类优于“#menu li”。我知道我可以使用 !important 如下：

```
#menu li {
    border:solid 1px #9f693a;
    outline:solid 1px #89552a;
    background:url(images/bg.png);
}

ul[editable] li {
    background-color: #333333 !important; 
    border-color: #0d0d0d !important;
    color:#fff !important;
} 
```

我想说这样的话：

```
ul[editable] li !important {
    ....
} 
```

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:46:19.643

不，您不能在选择器中使用 !important 语句。你唯一能做的就是让第二个选择器更具体，（或者第一个当然不那么具体）。

例如：

```
#menu li {
    border:solid 1px #9f693a;
    outline:solid 1px #89552a;
    background:url(images/bg.png);
}

#container ul[editable] li {
    background-color: #333333;
    border-color: #0d0d0d;
    color:#fff;
} 
```

我想你已经知道了。:)

# c# - 无法从数据库更新列表框

> ID：10673496
> 
> 赞同：0
> 
> 时间：2012-05-20T12:43:10.890
> 
> 标签：c#, wpf, database, listbox, itemssource

在我的应用程序中，我有 listBox，它的项目源是 ObservableCollection，但是当我添加数据时，这个 listBox 不会更新。在构造函数中，我使用： `listBoxPersons.ItemsSource = UserContacts;` 并且用户 UserContacts 是静态 ObservableCollection，它是从数据库初始化的，当我打开程序时，它会显示正确的数据。但是当我将新项目添加到数据库并同时使用相同的代码`listBoxPersons.ItemsSource = UserContacts;`时，listBox 将不会显示添加的项目。但是当我注销并再次登录到我的应用程序时，它会显示我添加的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:46:16.603

您从字面上说将新项目添加到数据库中。您还需要将该项目添加到 ObservableCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:54:32.330

也许问题出在`static`ObservableCollection 上。尝试使用非静态集合。

# php - 将 $_GET 变量与 wordpress 漂亮的永久链接结构一起使用

> ID：10673500
> 
> 赞同：1
> 
> 时间：2012-05-20T12:43:37.053
> 
> 标签：php, wordpress

我在一个页面中有一个链接，我想转到名为 buy-item.php 的页面并添加到该页面上`?name=$image_name`。

问题是我的永久链接结构只是`my_wordpress_site.com/buy-item/`，所以当我尝试将我的 href 编码为

`<a href="my_wordpress_site.com/buy-item/?name=$image_name">buy now</a>`

或作为

`<a href="my_wordpress_site.com/buy-item?name=$image_name">buy now</a>`我收到一个找不到页面的错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:39:37.163

我对其进行了排序，您不能将名称作为参数，wordpress 已经使用它，这就是它不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:48:37.510

简单修复：重命名并移动 buy-item.php 到 buy-item/index.php

重度修复：RewriteRule ^/buy-item/(.*)$ buy-item.php$1 [QSA,L]

希望这可以帮助 ！

# delphi - 如何将两个现有组件合并在一起？

> ID：10673502
> 
> 赞同：0
> 
> 时间：2012-05-20T12:43:45.213
> 
> 标签：delphi, delphi-2010

**如何将两个 VCL 组件合并在一起，以便我可以访问它们的两个属性？**

例如，我想将 a`TImage`和 a合并`TPanel`为一个，我要求 the`TPanel`是基本组件，因此`TImage`将是`TPanel`.

是否有可能做到这一点？

我一直在尝试通过 Component > New VCL Component 在 Delphi 2010 中执行此操作，但是当我需要可视组件时它会创建非可视组件。

我能做些什么来改变这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T13:24:57.063

如果我理解正确，我认为您想将两个组件合并在一起并公开两者的属性？

如果这是您正在寻找的，我问了一个类似的问题，将 TImage 和 TScrollBox 连接在一起，可以在这里找到：

[组件创建 - 将组件连接在一起？](https://stackoverflow.com/questions/9479872/component-creation-joining-components-together)

SetSubComponent 是实现这一目标的关键，可能值得阅读上面链接中的评论和答案以了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T12:54:22.433

Delphi语言不支持实现的多重继承，只支持接口的多重继承。因此，您不能以您希望的方式简单地将两个类合并在一起。

无论如何，您提出的建议听起来有点奇怪。两者`TPanel`都有`TImage`自己的视觉表面。我能想象的唯一合理的事情是你可以`TImage`让`TPanel`. 从 派生一个新组件`TPanel`。该组件将创建并拥有一个`TImage`. 使`TImage`子控件的父级成为面板。`TImage`您想要在控件中显示的控件的任何属性和事件都必须手动完成。这是组合而不是继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T05:49:14.863

您可以使用 a`TFrame`创建一个在设计时存在于其他可视组件中的组件，例如`TPanel`带有 a 的 a `TImage`。这可能不是您想要的：属性没有“合并”在一起，您必须设计自己的属性和方法，以使这个新创建的组件按您希望的方式运行。您想要的功能（根据鼠标的位置改变视觉特征）只需在框架中构建一次。

# android - 在 Android 中使用负边距是一种不好的做法吗？

> ID：10673503
> 
> 赞同：130
> 
> 时间：2012-05-20T12:43:51.640
> 
> 标签：android, android-layout, user-interface, overlap, margins

### 负边距演示：

                         [![在此处输入图像描述](../Images/7df34eab01d73c32e5cfc508f86864c7.png)](https://i.stack.imgur.com/Od3u5l.png)

### 场景

通过为其中一个视图设置负边距来重叠视图，以便它侵入另一个视图的边界框。

### 想法

如果应该重叠布局，它似乎可以按照您期望的方式工作。但我不想因为在不知不觉中做错事而遇到更大的问题。模拟器，物理设备，你的名字，当你使用负边距时，一切似乎都正常工作，一个视图侵入另一个视图边界框，并且取决于它在布局中的声明方式，它将位于另一个视图的上方或下方。

我也知道，从 API 21 开始，我们可以设置[`translationZ`](http://developer.android.com/intl/es/reference/android/R.attr.html#translationZ)and[`elevation`](http://developer.android.com/intl/es/reference/android/R.attr.html#translationZ) 属性以使视图出现在其他视图之上或之下，但**我的担忧**基本上来自这样一个事实，即[在属性的文档](http://developer.android.com/intl/es/reference/android/R.attr.html#layout_margin)中`layout_margin`明确指定**边距值应该是正**的，让我引用：

> **摘录：**
> *指定此视图的左侧、顶部、右侧和底部的额外空间。这个空间在这个视图的范围之外。**边距值应该是正数**。必须是维度值，是一个浮点数加上一个单位，如“14.5sp”。可用单位有：px（像素）、dp（与密度无关的像素）、sp（基于首选字体大小的缩放像素）、in（英寸）、mm（毫米）...*

自从最初提出这个问题以来的几年里，我没有遇到任何负边距问题，确实尽量避免使用它们，但没有**遇到**任何问题，所以即使文档指出，我也不是担心它。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-05-20T12:53:20.060

2010 年，@RomainGuy（核心 Android 工程师）表示[负边距具有未指明的行为](https://groups.google.com/group/android-developers/browse_thread/thread/daf7c7c42df78ed2)。

2011 年，@RomainGuy 表示您可以在[和](https://stackoverflow.com/a/5293636/115145)[上使用负边距`LinearLayout``RelativeLayout`](https://stackoverflow.com/a/5293636/115145)。

2016 年，@RomainGuy 表示[他们从未得到官方支持，也不会得到`ConstraintLayout`](https://issuetracker.google.com/issues/37103660).

不过，解决这个限制很容易。

在基本视图的底部添加一个辅助视图（高度 0dp，宽度限制为父视图），在底部添加所需的边距。
然后将您的视图置于此视图下方，有效地使其具有“负”边距，但不必使用任何不受支持的负值。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-07-07T02:21:00.690

希望这会对某人有所帮助。[`ConstraintLayout`](https://developer.android.com/reference/android/support/constraint/ConstraintLayout)这是基于@CommonsWare 回答的工作示例代码：

> 在基本视图的底部添加一个辅助视图（高度 0dp，宽度限制为父视图），在底部添加所需的边距。然后将您的视图置于此视图下方，有效地使其具有“负”边距，但不必使用任何不受支持的负值。

**示例代码：**

```
<TextView
    android:id="@+id/below"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#F1B36D"
    android:padding="30dp"
    android:text="I'm below"
    android:textColor="#ffffff"
    android:textSize="48sp"
    android:textAlignment="center"
    tools:layout_editor_absoluteX="129dp"
    tools:layout_editor_absoluteY="0dp" />

<android.support.v4.widget.Space
    android:id="@+id/space"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_marginBottom="32dp"
    app:layout_constraintBottom_toBottomOf="@+id/below"
    app:layout_constraintLeft_toLeftOf="@id/below"
    app:layout_constraintRight_toRightOf="@id/below" />

<TextView
    android:id="@+id/top"
    android:layout_width="100dp"
    android:layout_height="60dp"
    android:textAlignment="center"
    android:textColor="#ffffff"
    android:text="I'M ON TOP!"
    android:background="#676563"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toBottomOf="@+id/space" /> 
```

**输出：**

[![在此处输入图像描述](../Images/1f7249904ad3983b40c5c241e3adf0f6.png)](https://i.stack.imgur.com/o96KL.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-10-17T15:26:23.240

如果您想使用负边距，请为容器及其**​​clipToPadding**设置足够的填充为false 并为其子视图设置负边距，这样它就不会裁剪子视图！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2021-02-23T15:15:22.193

`translationX`您可以使用：和.而不是负边距 `translationY`。

例子：

```
android:layout_marginBottom = -2dp

android:translationY = -2dp 
```

更新：请记住，整个视图都已翻译。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-21T12:03:31.093

过去这可能是不好的做法，但使用 Material Design 及其浮动操作按钮，这似乎是不可避免的，现在在许多情况下都是必需的。基本上，当您有两个单独的布局时，您不能将它们放入单个 RelativeLayout，因为它们需要明显分开的处理（例如，考虑标题和内容），重叠 FAB 的唯一方法是使其突出于那些使用负边距的布局。这给可点击区域带来了额外的问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-03T10:09:05.083

对我来说，关于在 TextView 上设置负边距（我意识到 OP 指的是 ViewGroup，但我正在寻找设置负边距的问题，然后我来到这里）......我发现 4.0.3 有问题（ API 15) 仅设置`android:layout_marginTop`或设置`android:layout_marginBottom`为负值，例如 -2dp。

由于某种原因，TextView 根本不显示。它似乎从视图中“消失”了（不仅仅是不可见）。

当我尝试使用其他 3 个版本的 layout_margin 时，我没有看到问题。

请注意，我没有在真实设备上尝试过，这是使用 4.0.3 模拟器。这是我发现仅影响 4.0.3 的第二件奇怪的事情，所以我的新规则是*始终*使用 4.0.3 模拟器进行测试 :)

`android:lineSpacingExtra="-2dp"`即使我碰巧有，我也成功地通过使用 which 来减少 TextView 的底部边距`android:singleLine="true"`（所以我不会认为行间距会是一个因素）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-28T05:48:54.313

不，你不应该使用`negative margin`. 相反，您应该使用`translate`. 即使负边距有时会起作用，当您以可编程方式更改布局时，翻译也会有所帮助。并且在您使用边距时，视图不会溢出屏幕。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-20T12:49:03.807

我只知道这在相当短的时间内是可能的。但我认为它没有问题。请注意屏幕尺寸等，这样您就不会意外地制作不应出现在屏幕上重叠的项目。（即文本顶部的文本可能是个坏主意。）

# php - Javascript / PHP字符串编码/使用密钥解码

> ID：10673511
> 
> 赞同：0
> 
> 时间：2012-05-20T12:44:31.007
> 
> 标签：php, javascript, jquery, codeigniter, encoding

我正在使用 jQuery / CodeIgniter 处理登录表单，并且想知道是否可以执行以下操作：

1.  当用户单击`Sign In`它时，它通过 AJAX 发送请求以获取值键（使用 CodeIgniter flashdata 设置）。
2.  一旦获得密钥，它会使用 SHA256 对密码进行哈希处理，然后**使用来自 AJAX 请求的密钥对哈希密码进行编码。**
3.  之后，它将用户名/编码和散列密码发送到服务器，然后对其进行解码、加盐、重新散列并与数据库中存储的密码进行核对。

显然，由于 AJAX 请求将与登录请求**几乎**同时发送，因此在尝试登录用户之前也会对此进行检查。

基本上，我想知道是否有一致的方法在 JavaScript 和 PHP 中进行基于键的编码/解码，如果有，如何做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:52:13.053

CodeIgniter 有一个[Encryption Class](http://codeigniter.com/user_guide/libraries/encryption.html)，可用于对数据进行编码和解码：

```
$msg = 'My secret message';
$key = 'super-secret-key';
$encrypted_string = $this->encrypt->encode($msg, $key);

$encrypted_string = 'APANtByIGI1BpVXZTJgcsAG8GZl8pdwwa84';
$plaintext_string = $this->encrypt->decode($encrypted_string); 
```

# java - setMaxForRoute 在 ThreadSafeClientConnManager 中不起作用

> ID：10673517
> 
> 赞同：2
> 
> 时间：2012-05-20T12:45:59.170
> 
> 标签：java, apache, httpclient

我一直在尝试使用 Apache HttpClient (4.1.3) 和`ThreadSafeClientConnManager`. 我在尝试为路线设置最大连接数时遇到了问题。基本上我遵循了[hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)中的示例。例如，我想将每个路由的默认连接设置为 10，将某些路由设置为 5 个连接。

```
ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(schemeRegistry);
cm.setMaxTotal(30);
cm.setDefaultMaxPerRoute(10);

HttpHost host = new HttpHost("hc.apache.org", 80, "http");
cm.setMaxForRoute(new HttpRoute(host, null, false), 5);

DefaultHttpClient httpClient = new DefaultHttpClient(cm); 
```

然后我在线程中执行请求：

```
 public void run() {
        try {
            HttpResponse response = this.httpClient.execute(this.httpget, this.context);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                // do something useful with the entity
            }
            // ensure the connection gets released to the manager
            EntityUtils.consume(entity);
        } catch (Exception ex) {
            this.httpget.abort();
        }
    } 
```

并得到这样的日志：

```
DEBUG Thread-0 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-4 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-1 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-7 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-3 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-5 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-8 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-2 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-6 [org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager]: Get connection: HttpRoute[{}->http://hc.apache.org], timeout = 10000
DEBUG Thread-0 [org.apache.http.impl.conn.tsccm.ConnPoolByRoute]: [HttpRoute[{}->http://hc.apache.org]] total kept alive: 0, total issued: 0, total allocated: 0 out of 30
DEBUG Thread-0 [org.apache.http.impl.conn.tsccm.ConnPoolByRoute]: No free connections [HttpRoute[{}->http://hc.apache.org]][null]
DEBUG Thread-0 [org.apache.http.impl.conn.tsccm.ConnPoolByRoute]: Available capacity: 10 out of 10 [HttpRoute[{}->http://hc.apache.org]][null]
DEBUG Thread-0 [org.apache.http.impl.conn.tsccm.ConnPoolByRoute]: Creating new connection [HttpRoute[{}->http://hc.apache.org]] 
```

为什么我得到`Available capacity: 10 out of 10`了这条路线，而不是我指定的 5？

谢谢

**UPD**：如果我在创建连接管理器后运行此语句`cm.getMaxForRoute(new HttpRoute(host, null, false))`，它将返回 5。但如果我尝试检查线程中路由的最大连接数（在获得响应后）：

```
HttpHost target = (HttpHost) context.getAttribute(ExecutionContext.HTTP_TARGET_HOST);
cm.getMaxForRoute(new HttpRoute(target)); 
```

连接管理器将返回与日志中相同的内容（10 个连接）。

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:35:05.710

这很奇怪，但是当我在`HttpHost`没有端口和协议参数的情况下创建时效果很好。

```
HttpHost host = new HttpHost("hc.apache.org");
HttpRoute route = new HttpRoute(httpHost);
conman.setMaxPerRoute(route, 13); 
```

PS：我用过`httpclient-4.2`

# objective-c - WebView改变时调用函数

> ID：10673522
> 
> 赞同：0
> 
> 时间：2012-05-20T12:46:53.510
> 
> 标签：objective-c, cocoa, webview

所以，我一直在查看文档和谷歌搜索，但我无法弄清楚当我的 WebView（OSX，不是 iOS）发生变化时如何调用方法......所有示例似乎都是针对 iOS 的。我的代码如下所示：

SNAFAppDelegate.h

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface SNAFAppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@property (assign) IBOutlet WebView *browser;

- (IBAction)forwards:(id)sender;

@end 
```

SNAFAppDelegate.m

```
#import "SNAFAppDelegate.h"

@implementation SNAFAppDelegate

@synthesize window = _window;
@synthesize browser = _b;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[_b mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://google.com"]]];
}

@end 
```

SNAFBrowser.h

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebView.h> 
#import <WebKit/WebFrame.h>
#import <WebKit/WebEditingDelegate.h>
#import <WebKit/WebKit.h>

@interface SNAFBrowser : WebView

@property (assign) IBOutlet WebView *browser;

@end 
```

SNAFBrowser.m

```
#import "SNAFBrowser.h"

@implementation SNAFBrowser

@synthesize browser = _b;

- (void)webViewDidChange:(NSNotification *)notification
{
    NSLog(@"Hello World");
}

@end 
```

然后，在我的 MainMenu.xib 文件中，我将 AppDelegate 中的 Outlet“浏览器”链接到 WebView，并将 WebView 的自定义类设置为 SNAFBrowser。

本质上，我只想知道 webview 何时加载另一个页面。

我可能正在做一些可笑的愚蠢的事情，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:01:27.937

实现[WebFrameLoadDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html)协议，看看哪些方法适合实现，例如`webView:didFinishLoadForFrame:`.

例子：

```
@interface SNAFBrowser : WebView <WebFrameLoadDelegate>
...
@end

@implementation SNAFBrowser
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
   NSLog(@"Something got loaded!");
}
...
@end 
```

# c++ - STL 复制效率

> ID：10673524
> 
> 赞同：2
> 
> 时间：2012-05-20T12:47:17.390
> 
> 标签：c++, visual-c++, gcc, stl

我的理解是`std::copy`一次复制一个元素。为了触发每个元素的构造函数，这似乎是必要的。但是当不存在这样的构造函数时（例如 POD），我认为 a`memcpy`会更有效率。

那么，STL 是否需要/允许专门化，例如，`vector<int>`复制只会做一个`memcpy`？
我希望为 GCC / MSVC 回答以下问题，因为这些是我使用的编译器。

1.  如果允许但不需要，上面的编译器是否真的做到了？
2.  如果他们这样做，这会触发哪些容器？显然它没有意义`list`，但是`string`or`deque`呢？
3.  同样，如果他们这样做，哪些包含的类型会触发这个？只有内置类型，还是我自己的 POD 类型（例如`struct Point {int x, y;}`）？
4.  如果他们不这样做，使用我自己的包装器是否会更快`new`//`delete`指针`memcpy`用于整数/字符/我自己的结构数组之类的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T12:51:44.817

首先，`std::copy`不复制构建任何东西。（这将是算法的工作`std::uninitialized_copy`。）相反，它为旧范围的每个元素*分配相应的新值。*

其次，是的，编译器可以将分配优化为内存副本，只要结果“好像”它执行了元素分配一样。例如，GCC 通过让编译器支持识别这种可简单复制的类型来做到这一点，而 C++11 实际上添加了一个名为的新类型特征`std::is_trivially_copyable`，该特征恰好适用于*可以*被内存复制的类型。

# javascript - XHR 垃圾收集优化

> ID：10673530
> 
> 赞同：0
> 
> 时间：2012-05-20T12:47:50.090
> 
> 标签：javascript

这是垃圾收集的好方法吗

```
function getFile() {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        //do stuff
        delete(xhr)
    };
} 
```

然后打`getFile()`了几次电话

（我已经对其进行了编辑以使用功能）

完成后我将如何摆脱`xhr`。我只是有点困惑是否可以从自身的函数中删除 xhr

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:49:00.000

您应该使用范围来为您解决问题。在 JavaScript 中，作用域是由函数语句定义的。当函数超出范围时，在函数中定义的变量将被自动删除（并且您没有在闭包中使用该变量）

所以在你的情况下：

```
function scope() {
  var xhr = new XMLHttpRequest();
  xhr.onload = function() {
    //do stuff
  };
} 
```

# magento - 从 MagentoGo 迁移到 Magento 企业版

> ID：10673533
> 
> 赞同：1
> 
> 时间：2012-05-20T12:48:38.247
> 
> 标签：magento, e-commerce

我们正在建立一个新的电子商务网站，并且在尝试确定要使用哪个平台的同时，我想知道，有没有办法从 MagentoGo 迁移到企业版？

干杯，伊拉克利斯

ps 如果您想为我们的平台探索做出贡献，请随时在此[帖子](https://stackoverflow.com/questions/10673388/e-commerce-platform-for-start-up)上写下您的想法，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:01:58.600

两个版本都应该有支持。我会问 Magento 你有什么选择。

话虽如此，您可能可以使用 API 和/或 DataFlow 迁移大部分产品信息。这将要求您编写一个脚本，将信息从 Go 中取出，然后将其放入 Enterprise Edition。

订单可能会是一个更复杂的野兽。有一个可用于订单的 API，因此您可能需要使用它。但是，迁移付款信息可能会很棘手，因为您可能会再次向客户收费。我可能会将付款方式更改为采购订单并将 PO 值设置为“迁移订单”。

但是，我要做的第一件事是与 Magento 讨论您有哪些选择。我不得不想象他们已经为人们创造了一种从 Go 迁移到 Enterprise 的方法。它们应该基于一些相同的代码，所以也许数据库也可以移动。

# android - 如果在android中如何正确执行？

> ID：10673540
> 
> 赞同：2
> 
> 时间：2012-05-20T12:49:08.653
> 
> 标签：android

谁能告诉我为什么`if`即使我`ran`在编辑文本字段中输入并按下该语句也不会执行`ok`？当用户进入`ran`并按下按钮`ok`时，我希望另一个按钮变得可见，这使他能够停止当前的活动。基本上我想知道为什么`if`跳过。

```
public class Reciever extends Activity{

    protected static final String TAG = null;
    private Button ok,stp;
    private TextView tv;
    private EditText ev;
private String s1,s2,s3,s4;
@Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        s1="nar";
        setContentView(R.layout.stop);
        tv=(TextView) findViewById(R.id.textView1);
        tv.setText(s1);

        ev=(EditText) findViewById(R.id.editText1);
    ok=(Button) findViewById(R.id.ok_button);
    ok.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            s2="ran";
            tv.setText(ev.getText().toString());
            s3=ev.getText().toString();
            if(s3==s2)//not going inside this loop
            {
            stp=(Button) findViewById(R.id.stopb);

            stp.setVisibility(View.VISIBLE);
            stp.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                finish();   
                }
            });

        }

    }
    });
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:50:45.537

```
if(s3==s2)//no 
```

只需将上面的行替换为下面的

```
 if(s3.equalsIgnoreCase(s2))//no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:50:52.120

使用`.equals`而不是`==`比较两个字符串的值。

```
if (s2.equals(s3)) 
```

使用`==`测试进行引用相等。两个字符串可以包含相同的字符但具有不同的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T12:50:55.800

你不能用==比较文本，你需要使用equals。

```
if(s3.equals(s2)) 
```

# c - 分配二维数组 C

> ID：10673541
> 
> 赞同：0
> 
> 时间：2012-05-20T12:49:14.303
> 
> 标签：c, pointers, multidimensional-array

我有 struct 和 function ，我想将一个数组指针分配给我的结构中的指针：

```
struct
{
int array[3][2]

}some_struct;

void example(some_struct* st, int array[3][2])
{

     //st->array=array 
     //st->array[0]=array[0],st->array[1]=array[1],st->array[2]=array[2]

  // how to do that ??

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:30:15.250

不幸的是，数组本身不能被分配。

由于两个数组具有相同的尺寸和大小（是吗？）最简单的是使用`memcpy`：

```
memcpy(st->array, array, sizeof st->array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:51:08.643

如果您只想复制我看到的值，我会这样做：

```
struct
{
int array[3][2]

}some_struct;

void example(some_struct* st, int *array, int dim)
{
     int i;
     for(i = 0; i<dim; i++)
        st->array[i]=array[i];
}

//Use:
some_struct try_st;
array[3][2] orig_st;
//put your data in the array

example(try_st, orig_st, 3*2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:56:22.677

首先，如果使用一维表会简单得多。这是示例。请注意持有指针和固定大小的表格之间的区别！

```
typedef struct
{
   int* array;
} some_struct;

void example (some_struct* st, int* array)
{
    st->array = array;
} 
```

如果您仍想使用二维表，则确实需要分配第二级的每个表，因为它们不必在内存中是线性的。

编辑：如果二维数组在 C 中的内存中确实总是线性的，那么如果将二维数组作为`example`函数的参数，上述语句应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:16:22.550

如果数组是结构声明中的第一个成员，您可以简单地复制它，如下所示：

```
struct
{
int array[3][2]

}some_struct;

void example(some_struct* st, int array[3][2])
{
  *st = *(some_struct*)array;
} 
```

所有其他结构成员都在这里被销毁，只有当你的结构只包含数组成员时才有意义。

# python - 将数据从应用引擎（python）发送到远程服务器（带有 php 的 linux）

> ID：10673546
> 
> 赞同：0
> 
> 时间：2012-05-20T12:50:10.327
> 
> 标签：python, linux, google-app-engine

是否可以使用 httpd 服务将数据从应用引擎服务器发送到另一个外部服务器？我不在乎有效载荷是否为 1 位，我只需要做到这一点。

我检查了所有地方，发现：“无法打开任意端口的套接字鉴于 Google App Engine 是一个受限制的运行时环境，它有一个可以理解的限制，即阻止您在任意端口上打开套接字。这个限制对于安全性和可扩展性，Google 只能通过为每个所需场景提供自己的包装库来启用这些场景。但是，这会导致对重要场景的限制。例如，如果您的应用程序想要合并电子邮件并连接到 IMAP 服务器，那么你在 GAE 上没有能力做到这一点。

虽然 Google 确实计划最终为其功能添加额外的服务，但没有计划提供打开套接字的通用功能。“在[这里](http://www.sachinrekhi.com/blog/2009/08/17/shortcomings-of-google-app-engine)

从这里开始，我有一个新问题：是否可以保持从我的 linux 服务到应用程序引擎的连接（反之亦然）？如果我的 linux 是 android 设备，那将是可能的。我的服务器可以伪装成 android 设备来监听来自服务器的事件吗？我在应用引擎上实现了推送通知，并且我有另一个用于推送 iPhone 的服务器，当应用引擎发送给所有人时，我需要 linux 知道它并发送给所有 iPhone。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:28:58.797

所以你有两个问题：

> 是否可以使用 httpd 服务将数据从应用引擎服务器发送到另一个外部服务器？

是的，您可以从您的 GAE 应用程序（[链接](https://developers.google.com/appengine/docs/python/urlfetch/overview)）进行传出 http 连接。

> 是否可以保持从我的 linux 服务到应用程序引擎的连接（反之亦然）？

如果您使用[Channel API](https://developers.google.com/appengine/docs/python/channel/)将事件流式传输到您的 linux，则可以。如果我没记错的话，您只需每小时请求一个新的连接令牌。

# android - 如何从 Android 登录表单获取 Facebook 身份验证

> ID：10673548
> 
> 赞同：0
> 
> 时间：2012-05-20T12:50:18.860
> 
> 标签：android, facebook

是否可以在 Android 中使用我自己的登录表单登录 facebook 并获取 facebook 用户 ID？我只想验证用户而不需要他们访问他们的 Facebook。

在 Android facebook 教程中，应用程序必须先打开 facebook 才能登录，但用户登录成功后不会自动关闭。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:56:14.253

不，您无法在不使用官方端点的情况下通过 facebook 登录用户。

[您可以使用身份验证对话框](http://developers.facebook.com/docs/reference/dialogs/oauth/)（或[打开的图形之一](http://developers.facebook.com/docs/opengraph/authentication/)）打开某种浏览器，但这仍然意味着使用它们的表单/用户界面（无论您想怎么称呼它）。

您应该只使用[android sdk](https://developers.facebook.com/docs/mobile/android/build/)而不使用 SSO，这样 sdk 就不会调用安装在设备上的 facebook 应用程序（如果有的话），只会为您调用身份验证对话框。这对您来说是一个更好的解决方案，因为它从您那里“抽象”了一些东西，处理访问令牌等等。

这是关于禁用 SSO 的主题：[How to disable Facebook single sign on for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)

# facebook - Twitter 或 Facebook 帖子的折扣

> ID：10673549
> 
> 赞同：1
> 
> 时间：2012-05-20T12:50:19.233
> 
> 标签：facebook, twitter, response, discount

为在 facebook 或 twitter 上发布预先设计的消息的用户创建定价折扣。

有第三方解决方案吗？

对于以下一般概述的任何步骤的任何帮助，我们将不胜感激。

从付款页面：

*   打开推特/脸书登录（允许客户登录）
*   使用预先设计的文本自动填充帖子
*   让客户按帖子并接收他们已经这样做的身份验证
*   以某种方式将浏览器重新聚焦到支付页面（关闭 fb/twitter 弹出窗口）
*   如果收到正确的回复，则更新付款页面以包含折扣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:16:42.617

您的计划至少违反了[facebook 政策](https://developers.facebook.com/policy/)中的 2 项- 您不能自动填写帖子字段，也不能激励用户使用 FB：

> **四。应用程序集成点**
> 
> 1 - 您不得激励用户使用（或在使用 Facebook 社交渠道后屏蔽内容），或暗示激励与使用我们的渠道直接相关。
> 
> 2 - 您**不得预先填写**与以下产品相关的任何字段，除非用户在工作流程的早期手动生成内容：**流故事** （Facebook.streamPublish 和 FB.Connect.streamPublish 的 user_message 参数，以及用于stream.publish)、照片（标题）、视频（描述）、注释（标题和内容）、链接（评论）和 Jabber/XMPP。

# prolog - 如何将规则添加到该程序？

> ID：10673550
> 
> 赞同：0
> 
> 时间：2012-05-20T12:50:26.233
> 
> 标签：prolog

假设您在 prolog 中加载了以下程序：

```
?- listing.
fast(ann).
slow(bob).
slow(norm).
true.
?- 
```

如何将以下规则添加到该程序中？

```
faster(X,Y) :- fast(X), slow(Y). 
```

有人可以帮我写吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:03:30.143

有两种选择。

1.  将规则放入文件中，例如`faster.pl`，然后加载该文件`[faster].`
2.  `[user].`在提示符下发出，然后键入规则并发出 EOF（在SWI-Prolog 中是`Ctrl`+ ）。`D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:20:38.260

Prolog[数据库](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.13%27,swi%28%27/doc/Manual/db.html%27%29%29)是动态的：可以使用[assertz](http://www.swi-prolog.org/pldoc/man?predicate=assertz/1) /1 和retract/1 来完成对规则库的修改。然后，添加到@larsman 答案，你可以写

```
?- assertz((faster(X,Y) :- fast(X), slow(Y))). 
```

之后，根据您的事实基础：

```
?- faster(X,Y).
X = ann,
Y = bob ;
X = ann,
Y = norm. 
```

# wordpress - Mybb论坛自动注销用户

> ID：10673552
> 
> 赞同：0
> 
> 时间：2012-05-20T12:50:33.227
> 
> 标签：wordpress, mybb

我已经使用 zingiri 将 Mybb 论坛与 wordpress 3.3.2 集成在一起。URL 是 www.etrixdevenv.com/ssc2pg2/community。etrixdevenv.com 是我们的开发服务器。项目名称是 ssc2pg。

我们面临的问题是，当一个注册用户（试用版）登录时，它工作得很好。但是，当任何其他用户只是访问（未登录）社区页面（论坛）时，如果先前登录的用户尝试发布新线程/回复或任何其他活动，它只会被注销。有人可以提出答案吗？帖子编辑器中也缺少格式按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:56:39.730

可能是 cookie 问题。确保您在管理面板的设置中正确设置了 cookie 域。

# .net - 为什么在 .Net 中枚举 SearchResultCollection 时出现 0x8000500c 错误

> ID：10673555
> 
> 赞同：1
> 
> 时间：2012-05-20T12:50:51.120
> 
> 标签：.net, directory, enumeration

我正在尝试枚举 SearchResultCollection 中的值。

一切编译正常，但我在这一行得到 0x8000500c 错误：

```
foreach (PropertyValueCollection e in de.Properties.Values)
{
    sw.WriteLine(e.Value);
} 
```

完整方法如下：

```
private static void GetValues()
{
    var directoryEntry = new DirectoryEntry("LDAP://8.8.8.8:8888", "foo", "bar",
                                                       AuthenticationTypes.None);
    var ds = new DirectorySearcher(directoryEntry);
    var final = ds.FindAll();

    var sw = new StreamWriter(@"C:\z\FooBar.txt");

    var titlesDone = false;

    foreach (var de in from SearchResult x in final select x.GetDirectoryEntry())
    {
        if (!titlesDone)
        {
            foreach (string d in de.Properties.PropertyNames)
            {
                sw.WriteLine(d);
                titlesDone = true;
            }
        }

        foreach (PropertyValueCollection e in de.Properties.Values)
        {
            //I get the error on the below line
            sw.WriteLine(e.Value);
        }
    }

    sw.Flush();
    sw.Close();
} 
```

你能帮我弄清楚为什么这不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:56:57.093

AdsErr.h SDK 头文件中列出了 Active Directory 错误代码：

```
//
// MessageId: E_ADS_CANT_CONVERT_DATATYPE
//
// MessageText:
//
//  The directory datatype cannot be converted to/from a native DS datatype
//
#define E_ADS_CANT_CONVERT_DATATYPE      _HRESULT_TYPEDEF_(0x8000500CL) 
```

所以问题出在网络的另一端，目录条目中有某种不寻常的自定义属性，它不知道如何转换为通用数据类型。与服务器管理员交谈以解决此问题，或者对您需要阅读的属性更具选择性。

# c# - Linq To SQL InsertAllOnSubmit 和 DeleteAllOnSubmit

> ID：10673559
> 
> 赞同：2
> 
> 时间：2012-05-20T12:51:01.057
> 
> 标签：c#, .net, vb.net, linq, linq-to-sql

我可以`DeleteAllOnSubmit()`通过再次调用`InsertAllOnSubmit()`或相反的方式恢复已删除的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:55:26.170

您可以通过调用来检索原始值：

```
GetOriginalEntityState() 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.linq.itable.getoriginalentitystate)

# python - 使用 Python 计算 txt 文件中的行数，不包括空行

> ID：10673560
> 
> 赞同：12
> 
> 时间：2012-05-20T12:51:08.047
> 
> 标签：python

我希望计算 .txt 文件中的行数，如下所示：

```
apple
orange
pear

hippo
donkey 
```

有用于分隔块的空白行。根据上面的示例，我正在寻找的结果是五（行）。

我怎样才能做到这一点？

作为奖励，很高兴知道有多少块/段落。所以，根据上面的例子，这将是两个块。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-20T12:53:00.147

```
non_blank_count = 0

with open('data.txt') as infp:
    for line in infp:
       if line.strip():
          non_blank_count += 1

print 'number of non-blank lines found %d' % non_blank_count 
```

更新：重新阅读问题，OP想要计算*非空*行..（叹息..感谢@RanRag）。（我需要从电脑上休息一下......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T13:09:37.820

计算非空行数的一种简短方法可能是：

```
with open('data.txt', 'r') as f:
    lines = f.readlines()
    num_lines = len([l for l in lines if l.strip(' \n') != '']) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-01T15:22:46.917

我很惊讶地看到还没有一个干净的 Pythonic 答案（截至 2019 年 1 月 1 日）。许多其他答案创建了不必要的列表，以非pythonic方式计数，以非pythonic方式循环文件的行，不正确关闭文件，做不必要的事情，假设行尾字符可以只是`'\n'`，或有其他较小的问题。

这是我建议的解决方案：

```
with open('myfile.txt') as f:
    line_count = sum(1 for line in f if line.strip()) 
```

这个问题没有定义什么是空行。**我对空行的定义：** `line`当且仅当`line.strip()`返回空字符串时才是空行。这可能是也可能不是您对空行的定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-28T02:43:31.747

```
sum([1 for i in open("file_name","r").readlines() if i.strip()]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-13T16:45:29.417

`str.strip`考虑到空行将仅包含换行符，避免调用创建新字符串而是检查该行是否仅包含空格`str.isspace`然后跳过它会更快：

```
with open('data.txt') as f:
    non_blank_lines = sum(not line.isspace() for line in f) 
```

* * *

演示：

```
from io import StringIO

s = '''apple
orange
pear

hippo
donkey'''

non_blank_lines = sum(not line.isspace() for line in StringIO(s)))
# 5 
```

* * *

您可以进一步使用`str.isspace`with[`itertools.groupby`](https://docs.python.org/3/library/itertools.html#itertools.groupby)来计算文件中连续行/块的数量：

```
from itertools import groupby

no_paragraphs = sum(k for k, _ in groupby(StringIO(s), lambda x: not x.isspace()))
print(no_paragraphs)
# 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T13:15:49.380

非空行计数器：

```
lines_counter = 0

with open ('test_file.txt') as f:
    for line in f:
        if line != '\n':
            lines_counter += 1 
```

块计数器：

```
para_counter = 0
prev = '\n'

with open ('test_file.txt') as f:
    for line in f:
        if line != '\n' and prev == '\n':
            para_counter += 1
        prev = line 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-20T14:51:21.470

这段 Python 代码应该可以解决您的问题：

```
with open('data.txt', 'r') as f: 
    lines = len(list(filter(lambda x: x.strip(), f))) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-04T19:11:28.333

我会这样做：

```
f = open("file.txt")
l = [x for x in f.readlines() if x != "\n"]

print len(l) 
```

`readlines()`将列出文件中的所有行，然后您可以只取那些至少包含某些内容的行。对我来说看起来很简单！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-26T12:43:26.810

挺直的！我相信

```
f = open('path','r')
count = 0
for lines in f:
    if lines.strip():
        count +=1
print count 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-03T13:45:29.400

我的一个班轮将是

```
print(sum(1 for line in open(path_to_file,'r') if line.strip())) 
```

# gwt - 如何更改列表网格中的单元格颜色

> ID：10673565
> 
> 赞同：0
> 
> 时间：2012-05-20T12:52:30.633
> 
> 标签：gwt, smartgwt

我想更改ListGrid 中特定**单元格的字体和颜色。**

我成功地用以下几行改变了整**行**的颜色，但不是单行：

```
for (ListGrid table : tables)
{
ListGridField[] columns = table.getFields(); 
for (Record record : table.getRecords())
    {
       ....
       record.setAttribute("cssText",
                           "font-weight:bold; font-size:80%; color:#FF3300;"); 
```

我不想使用 getCellCSSText 函数，我尝试了以下但没有奏效：

```
ListGridField gridfield = table.getField(columns[1].getName());
gridfield.setAttribute("cssText", 
                       "font-weight:bold; font-size:80%; color:#FF3300;");
table.refreshFields(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:37:14.480

我确信有更好的方法来做到这一点。但这就是我的做法：

1.  我在表格中添加了一个隐藏列，其中包含颜色。

2.  在 getCellCSSText 我读取颜色和列名并设置颜色。

有没有办法向 ListGridRecord 添加不可见参数？这样我就不会添加一整列。

# c++ - 编译单元之间不同的内联成员函数会破坏二进制兼容性吗？

> ID：10673570
> 
> 赞同：3
> 
> 时间：2012-05-20T12:53:01.900
> 
> 标签：c++, templates, inline, compilationunit

我在一个大项目中有很多代码，它有两种通用类型的代码，一些以很好的 C++ 风格完成，并且已经过 C++ 专家的代码审查，而另一些则没有，也没有。*没有*大量 for 循环和未经检查的数组（堆）访问的代码包括读取和写入。幸运的是，所有这些对堆的访问都是通过一个类完成的。为了论证的缘故，我们称它为`CArray`。

`CArray`完全在头文件中定义，因为它是模板化的。大致定义如下（仅显示相关部分）：

```
template <typename elementType> class CArray
{
    /// Most of class details I'm leaving out

public:
    inline elementType & operator[](unsigned int i)
    {
#ifdef CARRAY_BOUNDARY_DEBUGGING
        if(i >= m_numElements)
        {
            throw SomeException("CArray::operator[] going out of bounds");
        }
#endif
        return m_pArray[i];
    }

    /// also have corresponding const version of this operator[]

private:
    elementType *m_pArray;
    int m_numElements;
} 
```

（请假设构造函数、析构函数、复制构造函数、赋值运算符和相应的右值引用版本都做对了。基本上假设类的用户正确使用这个类所需的一切。

现在的问题是，如果我有一些编译单元（`.cpp`文件）定义`CARRAY_BOUNDARY_DEBUGGING`然后包含这个类（需要代码改进/审查的），但其他没有（坚如磐石的）：

1.  如果类经常通过复制、引用和右值引用（仅限 C++11）在 C++03 的编译单元边界上传递，这是否保证可以并且不会引入问题？C++11？

2.  有没有更好的方法来尝试做到这一点？

编辑：澄清。我知道非`inline`函数必须遵守 C++03 标准第 3.2 节中所述的单一定义规则，但这是内联的。ODR 是否仍然适用，或者这里还有其他有效的东西？此外，C++03 标准规定“内联函数应在使用它的每个翻译单元中定义。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:56:35.920

不，这不行，这是UB。内联定义在整个程序中必须相同。如果您想在某些地方使用额外的逻辑，但不是全部，只需将其设为另一个成员（写​​作也`CArray`很愚蠢）：

```
struct silly_array {
    T& operator[](int x) { /* unchecked */ }
    T& at(int x) { /* check bounds */ return (*this)[x]; }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:30:51.487

你忘了读你引用的句子的其余部分。7.1.2(4) “内联函数应在使用它的每个翻译单元中定义，**并且在每种情况下都应具有完全相同的定义**(3.2)。”

# php - 如何从gmail访问邮件

> ID：10673571
> 
> 赞同：0
> 
> 时间：2012-05-20T12:53:12.117
> 
> 标签：php, cakephp, imap, gmail-imap

我在我的应用程序中使用 imap 功能来访问 gmail。不幸的是，我再也无法使用 imap 了。我正在使用 php。有没有像（api..）这样的替代方式来访问 gmail。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:14:45.953

试试 Zend 框架：代码在这里 [http://framework.zend.com/manual/en/zend.mail.read.html](http://framework.zend.com/manual/en/zend.mail.read.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:03:57.707

简而言之，没有。[唯一提供邮件访问的 GMail API 是 IMAP。](https://developers.google.com/google-apps/gmail/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:06:40.387

您没有解释为什么不能再使用 imap 了，但这没关系。

您可以使用 php [imap 扩展](http://www.php.net/manual/en/book.imap.php)来连接 pop3！

这是一个[例子](http://www.php.net/manual/en/book.imap.php#96414)。

# architecture - 向跨平台设备呈现数据

> ID：10673574
> 
> 赞同：0
> 
> 时间：2012-05-20T12:53:34.067
> 
> 标签：architecture, cross-platform

我有一个我序列化并传递给 Web 服务的对象，它有两个枚举。如果我希望其他平台的开发人员创建和使用这些数据，我是否应该删除这些枚举？或者其他平台可以处理序列化的 .net 类型吗？

我目前的平台是 .net，我希望将服务扩展到 iOS 和 Android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:55:22.117

除非您可以控制服务器和客户端并且它们位于同一平台上，否则不应通过 Web 服务发送枚举。

在 .net 4.0 中首次提供了通过 WCF Web 服务发送枚举的功能。这不适用于 .net 3.5。

您最好的跨平台选择是使用基于 REST 的服务。

# python - 滑动窗口和记忆的计算

> ID：10673577
> 
> 赞同：5
> 
> 时间：2012-05-20T12:54:27.423
> 
> 标签：python, primes, memoization

我正在研究 Project Euler Problem 50，其中指出：

> 素数 41 可以写成六个连续素数之和：
> 
> 41 = 2 + 3 + 5 + 7 + 11 + 13 这是添加到小于 100 的素数的最长连续素数之和。
> 
> 加到一个素数上的小于一千的连续素数的最长和包含 21 项，等于 953。
> 
> 100 万以下的哪个素数可以写成最连续素数之和？

为了确定素数**P**中的项（如果它可以写成素数之和），我使用所有素数（按递增顺序）直到（但不包括）**P**的滑动窗口，并计算所有素数的总和这些窗口，如果总和等于所考虑的素数，我计算窗口的长度......

这适用于所有最高**1000**的素数，但对于最高**10**6**的素数，它非常慢，所以我希望**memozation**会有所帮助；在计算滑动窗口的总和时，做了很多双重工作......（对吧？）

所以我在网上找到了标准的 memoizaton 实现并将其粘贴到我的代码中，这是正确的吗？（我不知道它应该如何在这里工作......）

```
primes = tuple(n for n in range(1, 10**6) if is_prime(n)==True)

count_best = 0

##http://docs.python.org/release/2.3.5/lib/itertools-example.html:
## Slightly modified (first for loop)
from itertools import islice
    def window(seq):
    for n in range(2, len(seq) + 1):

        it = iter(seq)
        result = tuple(islice(it, n))
        if len(result) == n:
            yield result    
        for elem in it:
            result = result[1:] + (elem,)
            yield result   

def memoize(function):
    cache = {}
    def decorated_function(*args):
        if args in cache:
            return cache[args]
        else:
            val = function(*args)
            cache[args] = val
            return val
    return decorated_function

@memoize 

def find_lin_comb(prime):
    global count_best

    for windows in window(primes[0 : primes.index(prime)]):
        if sum(windows) == prime and len(windows) > count_best:
            count_best = len(windows)
            print('Prime: ', prime, 'Terms: ', count_best)

##Find them:
for x in primes[::-1]: find_lin_comb(x) 
```

（顺便说一句，素数的元组是“体面地”快速生成的）

感谢所有输入，我只是一个业余程序员，所以请不要对我进阶。

谢谢！

**编辑：**这是一个没有破坏缩进的工作代码粘贴：http: [//pastebin.com/R1NpMqgb](http://pastebin.com/R1NpMqgb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:18:35.850

> 这适用于所有最高 1000 的素数，但对于最高 10**6 的素数，它非常慢，所以我希望 memozation 会有所帮助；在计算滑动窗口的总和时，做了很多双重工作......（对吧？）

是的，没错。当然，对于高达 10 ⁶的素数来说，它的速度很慢。

假设您有`n`到 的素数`N`，按升序编号，`p_1 = 2, p_2 = 3, ...`。在考虑是否素数时。`k`是连续素数之和，您考虑所有窗口`[p_i, ..., p_j]`，对于`(i,j)`与`i < j < k`. 有`(k-1)*(k-2)/2`他们。通过所有`k`到`n`，您`n³/6`总共检查窗口（计算多重性，您正在检查`w(i.j)`总`n-j`次数）。即使忽略创建窗口并对其求和的成本，您也可以看到它是如何严重扩展的：

*   对于`N = 1000`，有`n = 168`质数和大约 790000 个窗口要检查（计算多重性）。
*   对于`N = 10**6`，`n = 78498`有素数和关于`8.3*10**13`窗口要检查。

现在将创建和求和窗口的工作考虑在内，估计对 中的素数`j-i+1`求和的工作量较低，工作量约为，总工作量大致变为。大概是 3300 万步，花生，但几乎是.`j-i+1``w(i,j)``p_k``k³/6``k**4/24``N = 1000``1.6*10**18``N = 1000000`

一年包含大约`3.1*10**7`几秒钟，使用 ~3GHz CPU，大约是 10 ^(17 个)时钟周期。所以我们说的操作需要大约 100 个 CPU 年（可能是 10 倍左右）。

我想你不愿意等那么久；）

现在，通过记忆，您仍然可以多次查看每个窗口，但您只对每个窗口进行一次计算。这意味着您需要`n³/6`计算窗口的工作量，并查看`n³/6`任何窗口的时间。

*   问题1：您仍然需要查看窗口大约`8.3*10**13`几次，即使查看仅花费一个周期也需要几个小时。
*   问题2：有关于记忆的`8.3*10**13`窗口。你没有那么多内存，除非你可以使用一个*非常*大的高清。

您可以通过丢弃不再需要的数据并仅在需要时为窗口计算数据来规避内存问题，但是一旦您知道何时可以丢弃哪些数据，您应该能够看到更好的方法.

> 加到一个素数上的小于一千的连续素数的最长和包含 21 项，等于 953。

这告诉您关于生成该总和的窗口的什么信息？它可以从哪里开始，又可以在哪里停止？您如何使用这些信息来创建有效的算法来解决问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:49:55.547

memoize 装饰器向函数添加一个包装器，以缓存参数的每个值的返回值（在多个参数的情况下，每个值组合）。当使用相同的参数多次调用函数时，它很有用。您只能将其与纯函数一起使用，即

1.  该功能没有副作用。更改全局变量并进行输出是副作用的示例。
2.  返回值仅取决于参数的值，而不取决于某些可能在调用之间更改值的全局变量。

您的 find_lin_comb 函数不满足上述条件。一方面，它每次都使用不同的参数调用，另一方面，该函数不返回值。

# jquery - jquery动画动态高度div

> ID：10673583
> 
> 赞同：1
> 
> 时间：2012-05-20T12:55:14.387
> 
> 标签：jquery, animation

快速提问。我试图用 jquery 为一些东西制作动画，虽然它可以工作，但这是我遇到的问题。

首先继承代码：

```
$(document).ready( function(e){

    // vars
    var question = $('#faqQues');
    var answer = $('#faqAns');  
    var ansCont = $('#faqAnsCont');

    question.click(function(){
         if (answer.css("display") != "none") {
             answer.animate({'height':0}, 500, hmm);

             function hmm() {
                 answer.css("display","none");  
             } 
         } else {
             answer.css("display","block");
             answer.animate({"height":'100'},500);  
         }
    });
}); 
```

基本上我想要做的就是能够点击某些东西并为其高度设置动画（向上向下）。问题出现在这个代码块上

```
else {
    answer.css("display","block");
    answer.animate({"height":'100'},500);               
} 
```

特别是在这条线上

```
{"height":'100'} 
```

我想要发生的是它动画回到 div 的默认高度。我不想添加数字`(like the 100 above)`高度，因为 div 内部内容总是会改变，因此动态高度但是如果我删除高度，它会中断。我尝试了其他一些事情，包括也许

```
.animate({"height":'**divNameHere**.height()'},500); 
```

但是虽然它没有出错，但它也不起作用大声笑。

所以我在这里寻求帮助。我需要对此进行哪些更改，以便在不直接输入数字的情况下将其动画化回 div 的高度？

任何提示、代码、链接等我都会很高兴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:03:00.520

你为什么不使用[`slideUp()`](http://api.jquery.com/slideUp/)和[`slideDown()`](http://api.jquery.com/slideDown/)方法来做你想要的？

或者更好[`slideToggle()`](http://api.jquery.com/slideToggle/)的是自动处理两种方式？

```
$(document).ready(function(e) {
    // vars
    var question = $('#faqQues');
    var answer = $('#faqAns');
    var ansCont = $('#faqAnsCont');

    question.click(function() {
        answer.slideToggle(500);
    });
}); 
```

演示在[http://jsfiddle.net/5wBeu/](http://jsfiddle.net/5wBeu/)

这就是你所需要的。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:01:08.940

```
.animate({"height": $('**divNameHere**').height()},500); 
```

你应该省略引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:01:34.323

```
$(document).ready(function() {

    // vars
    var question = $('#faqQues');
    var answer = $('#faqAns');  
    var ansCont = $('#faqAnsCont');

    question.click(function(){
        if (answer.is(':visible')) {
            answer.animate({height : 'toggle'}, 500, function() {
                answer.hide();
            });
        }else {
            answer.show().animate({height : 'toggle'},500);   
        }
    });
}); 
```

要不就 ：

```
question.click(function() {
    answer.animate({height : 'toggle'});
}); 
```

# c++ - 使用成员函数启动线程

> ID：10673585
> 
> 赞同：357
> 
> 时间：2012-05-20T12:55:19.523
> 
> 标签：c++, multithreading, c++11

我正在尝试`std::thread`使用不带参数并返回的成员函数构造 a `void`。我无法弄清楚任何有效的语法 - 编译器无论如何都会抱怨。什么是正确的实现方法，`spawn()`以便它返回一个`std::thread`执行的`test()`？

```
#include <thread>
class blub {
  void test() {
  }
public:
  std::thread spawn() {
    return { test };
  }
}; 
```

* * *

## 回答 #1

> 赞同：451
> 
> 时间：2012-05-20T13:07:09.663

```
#include <thread>
#include <iostream>

class bar {
public:
  void foo() {
    std::cout << "hello from member function" << std::endl;
  }
};

int main()
{
  std::thread t(&bar::foo, bar());
  t.join();
} 
```

编辑：考虑你的编辑，你必须这样做：

```
 std::thread spawn() {
    return std::thread(&blub::test, this);
  } 
```

* * *

**更新：**我想解释更多点，其中一些也在评论中讨论过。

上述语法是根据 INVOKE 定义（第 20.8.2.1 节）定义的：

> 定义 INVOKE (f, t1, t2, ..., tN) 如下：
> 
> *   (t1.*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针且 t1 是类型 T 的对象或对类型 T 对象的引用或对从 T 派生的类型的对象；
> *   ((*t1).*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针且 t1 不是上一项中描述的类型之一时；
> *   t1.*f 当 N == 1 并且 f 是指向类 T 的成员数据的指针并且 t 1 是 T 类型的对象或对
>     T 类型的对象的引用或对
>     派生自的类型的对象的引用T;
> *   (*t1).*f 当 N == 1 并且 f 是指向类 T 的成员数据的指针并且 t 1 不是上一项中描述的类型之一时；
> *   f(t1, t2, ..., tN) 在所有其他情况下。

* * *

我要指出的另一个一般事实是，默认情况下，线程构造函数将复制传递给它的所有参数。这样做的原因是参数可能需要比调用线程更长，复制参数可以保证这一点。相反，如果你想真正传递一个引用，你可以使用`std::reference_wrapper`created by `std::ref`。

```
std::thread (foo, std::ref(arg1)); 
```

通过这样做，您承诺您将确保当线程对其进行操作时参数仍然存在。

* * *

请注意，上面提到的所有内容也可以应用于`std::async`和`std::bind`。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2013-10-10T11:37:49.980

由于您使用的是 C++11，因此 lambda-expression 是一个不错的解决方案。

```
class blub {
    void test() {}
  public:
    std::thread spawn() {
      return std::thread( [this] { this->test(); } );
    }
}; 
```

由于`this->`可以省略，因此可以缩短为：

```
std::thread( [this] { test(); } ) 
```

~~或只是~~（已弃用）

~~`std::thread( [=] { test(); } )`~~

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-08-24T07:31:53.260

这是一个完整的例子

```
#include <thread>
#include <iostream>

class Wrapper {
   public:
      void member1() {
          std::cout << "i am member1" << std::endl;
      }
      void member2(const char *arg1, unsigned arg2) {
          std::cout << "i am member2 and my first arg is (" << arg1 << ") and second arg is (" << arg2 << ")" << std::endl;
      }
      std::thread member1Thread() {
          return std::thread([=] { member1(); });
      }
      std::thread member2Thread(const char *arg1, unsigned arg2) {
          return std::thread([=] { member2(arg1, arg2); });
      }
};
int main(int argc, char **argv) {
   Wrapper *w = new Wrapper();
   std::thread tw1 = w->member1Thread();
   std::thread tw2 = w->member2Thread("hello", 100);
   tw1.join();
   tw2.join();
   return 0;
} 
```

使用 g++ 编译产生以下结果

```
g++ -Wall -std=c++11 hello.cc -o hello -pthread

i am member1
i am member2 and my first arg is (hello) and second arg is (100) 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-11-18T08:32:51.643

@hop5 和 @RnMss 建议使用 C++11 lambdas，但是如果你处理指针，你可以直接使用它们：

```
#include <thread>
#include <iostream>

class CFoo {
  public:
    int m_i = 0;
    void bar() {
      ++m_i;
    }
};

int main() {
  CFoo foo;
  std::thread t1(&CFoo::bar, &foo);
  t1.join();
  std::thread t2(&CFoo::bar, &foo);
  t2.join();
  std::cout << foo.m_i << std::endl;
  return 0;
} 
```

输出

```
2 
```

[从这个答案](https://stackoverflow.com/a/32176668/814297)重写的样本将是：

```
#include <thread>
#include <iostream>

class Wrapper {
  public:
      void member1() {
          std::cout << "i am member1" << std::endl;
      }
      void member2(const char *arg1, unsigned arg2) {
          std::cout << "i am member2 and my first arg is (" << arg1 << ") and second arg is (" << arg2 << ")" << std::endl;
      }
      std::thread member1Thread() {
          return std::thread(&Wrapper::member1, this);
      }
      std::thread member2Thread(const char *arg1, unsigned arg2) {
          return std::thread(&Wrapper::member2, this, arg1, arg2);
      }
};

int main() {
  Wrapper *w = new Wrapper();
  std::thread tw1 = w->member1Thread();
  tw1.join();
  std::thread tw2 = w->member2Thread("hello", 100);
  tw2.join();
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-20T18:43:31.317

一些用户已经给出了他们的答案并很好地解释了它。

**我想添加更多与线程相关的内容。**

1.  如何使用函子和线程。请参考下面的例子。

2.  线程将在传递对象时制作自己的对象副本。

    ```
    #include<thread>
    #include<Windows.h>
    #include<iostream>

    using namespace std;

    class CB
    {

    public:
        CB()
        {
            cout << "this=" << this << endl;
        }
        void operator()();
    };

    void CB::operator()()
    {
        cout << "this=" << this << endl;
        for (int i = 0; i < 5; i++)
        {
            cout << "CB()=" << i << endl;
            Sleep(1000);
        }
    }

    void main()
    {
        CB obj;     // please note the address of obj.

        thread t(obj); // here obj will be passed by value 
                       //i.e. thread will make it own local copy of it.
                        // we can confirm it by matching the address of
                        //object printed in the constructor
                        // and address of the obj printed in the function

        t.join();
    } 
    ```

实现相同目的的另一种方法是：

```
void main()
{
    thread t((CB()));

    t.join();
} 
```

但是，如果您想通过引用传递对象，请使用以下语法：

```
void main()
{
    CB obj;
    //thread t(obj);
    thread t(std::ref(obj));
    t.join();
} 
```

# .htaccess - 如何在 NGINX 环境中重定向 url？

> ID：10673587
> 
> 赞同：1
> 
> 时间：2012-05-20T12:55:26.170
> 
> 标签：.htaccess, url-rewriting, nginx

我正在尝试在 NGINX 环境中从： [http](http://domain.com/public/photos/large/test.jpg) : //domain.com/public/photos/large/test.jpg 重定向到： [http](http://domain.com/images/public/photos/large/test.jpg) : //domain.com/images/public/photos/large/test.jpg。

我的 vhost 文件配置如下。我的问题是这样的语法不起作用：

```
server {
       ........
       rewrite ^(public/photos/(.*)) http://domain.com/images/$1 last;
       location / {
            location ~.*\.(3gp|jpg|jpeg|gif)$ {
                expires 7d;
                try_files $uri @backend;
            } 
       }
       ..........
} 
```

rewriterule 语法在 .htaccess 环境中进行了测试，现在已经运行了 2 年多。在 nginx 上它不再存在了。

有任何想法吗？10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:07:11.017

尝试这个：

```
rewrite ^/public/photos/(.*)$ http://domain.com/images/public/photos/$1 last; 
```

# perl - 按 mmyy 排序（月和年）

> ID：10673588
> 
> 赞同：5
> 
> 时间：2012-05-20T12:55:43.837
> 
> 标签：perl, sorting

我正在寻找一个逻辑（不是附加模块）来按这种格式排序。我有一个字符串列表，如下所示：

```
asdadasBBBsfasdasdas-0112
asdanfnfnfnfnf222ads-1210 
```

等等。我不能只按数字排序，因为例如：812 > 113（812 = 2012 年 8 月，113 = 2013 年 1 月，所以它不正确）

有什么好的策略吗？？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T13:31:33.230

[施瓦茨变换](http://en.wikipedia.org/wiki/Schwartzian_transform)怎么样：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dump qw(dump);

my @list = (
    'asdadasBBBsfasdasdas-0112',
    'asdanfnfnfnfnf222ads-1210',
    'asdanfnfnfnfnf222ads-1211',
    'asdanfnfnfnfnf222ads-1010',
    'asdanfnfnfnfnf222ads-1011',
);

my @sorted = 
    map  { $_->[0] }
    sort { $a->[1] <=> $b->[1] or $a->[2] <=> $b->[2] }
    map  { /-(\d\d)(\d\d)$/; [$_, $2, $1] } @list;
dump @sorted; 
```

**输出：**

```
(
  "asdanfnfnfnfnf222ads-1010",
  "asdanfnfnfnfnf222ads-1210",
  "asdanfnfnfnfnf222ads-1011",
  "asdanfnfnfnfnf222ads-1211",
  "asdadasBBBsfasdasdas-0112",
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T17:12:18.307

施瓦茨变换在这里将是巨大的浪费。这个我永远记不起名字的类似结构会更好。

```
my @sorted =
   map substr($_, 4),
    sort
     map substr($_, -2) . substr($_, -4, 2) . $_,
      @unsorted; 
```

使用匹配运算符而不是`substr`：

```
my @sorted =
   map substr($_, 4),
    sort
     map { /(..)(..)\z/s; $2.$1.$_ }
      @unsorted; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T13:02:39.977

使用排序函数，首先查看年份，然后查看日期：

```
sub mmyy_sorter {

    my $a_yy = substr($a, -2);
    my $b_yy = substr($b, -2);

    my $a_mm = substr($a, -4, 2);
    my $b_mm = substr($b, -4, 2);

    return ($a_yy cmp $b_yy) || ($a_mm cmp $b_mm);
}

my @sorted = sort mmyy_sorter @myarray; 
```

注意：这在*技术上*并不像它可能的效率那么高，因为它必须为每次比较重新计算月份和年份子字段，而不仅仅是为数组中的每个项目计算一次。

也可以利用 Perl 的自动类型转换并使用`<=>`运算符代替`cmp`，因为所有值实际上都表示数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T16:20:35.647

感谢@M42 提供示例数据。

```
use strict;
use warnings;
use feature 'say';

my @list = (
    'asdadasBBBsfasdasdas-0112',
    'asdanfnfnfnfnf222ads-1210',
    'asdanfnfnfnfnf222ads-1211',
    'asdanfnfnfnfnf222ads-1010',
    'asdanfnfnfnfnf222ads-1011',
);

my @sorted = sort {
  my ($aa, $bb) = map { /(..)(..)\z/ and $2.$1 } $a, $b;
  $aa <=> $bb;
} @list;

say for @sorted; 
```

**输出**

```
asdanfnfnfnfnf222ads-1010
asdanfnfnfnfnf222ads-1210
asdanfnfnfnfnf222ads-1011
asdanfnfnfnfnf222ads-1211
asdadasBBBsfasdasdas-0112 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T13:03:28.193

把它改成几个月怎么样？例如：

812 = 12 * 12 + 8

113 = 13 * 12 + 1

你可以把几年变成几个月，这会很好。要选择数字，您可以使用正则表达式。

# sql - SQL 聚合唯一对

> ID：10673589
> 
> 赞同：3
> 
> 时间：2012-05-20T12:56:02.647
> 
> 标签：sql, postgresql, relational-division

我有一个 PostgreSQL 表，它主要是一个桥接表，但它也有一些额外的东西。

本质上，它包含有关游戏中玩家的信息。所以我们有一个游戏中玩家实例的唯一ID。然后一个 id 是 FK 到游戏表，一个 id 是 FK 到玩家表。还有一些其他无关紧要的东西。像这样的东西：

```
Table players_games
| id        | 12564
| player_id | 556
| game_id   | 156184 
```

我想做的是找出一个玩家和另一个玩家一起玩的次数。所以，如果player1和player2在同一个游戏中，他们就一起玩过一次。一场比赛有 2 个以上的玩家。

所以我想做的是填充一个新表，它包含三个值：player_lo、player_hi、times_played。

并且每对有一行和他们玩的次数，或者如果最终效率更高，则每次迭代都有一行并将值设置为 1，以便以后可以将它们加在一起，也许是分布的。所以你可能会看到类似的东西：

```
p1, p2, 1
p1, p2, 1 
```

这些后来减少为：

```
p1, p2, 2 
```

所以我想知道在开始编写一个稍微复杂的 python 脚本来做之前，是否有一些聪明的方法可以用 SQL 来做这件事，或者是否有 SQL 可以减少我的编程工作量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:00:02.537

```
select p1, p2, count(*) from (
    select 
      pg1.player_id as p1, pg1.game_id, pg2.player_id as p2
    from
      players_games pg1, players_games pg2
    where
      pg1.game_id = pg2.game_id and pg1.player_id != pg2.player_id
) foo
group by p1, p2 
```

请注意，这会进行完全连接，`players_games`因此如果表很大，它可能会非常慢。关键部分是`group by`获取计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T13:26:35.720

为此，您需要在 player_games 表上进行自联接。第一个子查询针对第一个玩家，第二个针对第二个玩家。“第一个”玩家是具有较低玩家 ID 的玩家。

```
select pg1.player_id as player1, pg2.player_id as player2, count(*) as num_games
from (select distinct game_id, player_id
      from  players_games pg
     ) pg1 join
     (select distinct game_id, player_id
      from players_games pg
     ) pg2
     on pg1.game_id = pg2.game_id and
        pg1.player_id < pg2.player_id
group by pg1.player_id, pg2.player_id 
```

请注意，加入条件在玩家 ID 上使用“<”。这是为了防止重复计数（因此玩家 A、B 不会也算作 B、A）。

此外，我在内部子查询中添加了一个“distinct”，以防单个玩家可能在给定游戏中出现多次。也许这不是必需的。可以肯定的是，您应该在复合键 game_id、player_id 上有一个唯一索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:27:07.487

```
SET search_path='tmp';
DROP TABLE players_game CASCADE;
CREATE TABLE players_game
        ( game_id INTEGER NOT NULL
        , player_id INTEGER NOT NULL
        );
INSERT INTO players_game(game_id,player_id) VALUES
 (1,100) ,(1,101) ,(2,100) ,(2,101)
,(3,100) ,(3,101) ,(4,102) ,(4,101)
        ;

WITH pair AS (
    SELECT g1.player_id AS p1
     , g2.player_id AS p2
    FROM players_game g1
    JOIN players_game g2 ON g1.game_id = g2.game_id
    WHERE g1.player_id < g2.player_id
    )
SELECT pa.p1 , pa.p2, COUNT(*) AS num_games
FROM pair pa
GROUP BY p1, p2
ORDER BY num_games DESC
        ; 
```

结果：

```
SET
ERROR:  table "players_game" does not exist
CREATE TABLE
INSERT 0 8
 p1  | p2  | num_games 
-----+-----+-----------
 100 | 101 |         3
 101 | 100 |         3
 102 | 101 |         1
 101 | 102 |         1
(4 rows) 
```

# ruby-on-rails - Rails 3.2 和 yui 压缩器

> ID：10673591
> 
> 赞同：6
> 
> 时间：2012-05-20T12:56:15.000
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

资产管道上的[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#css-compression)说你可以在 CSS 上使用 yui-compressor：

```
config.assets.css_compressor = :yui 
```

但是，我没有看到它实际上正在使用它的迹象。一方面，我是否安装了 yui-compressor gem 没有区别。另一方面，无论我有没有那条线，压缩输出都是一样的。

`actionpack-3.2.3/lib/sprockets/compressors.rb`我在方法中放了一点调试行`registered_css_compressor`，这是编译 css 时的结果：`#<Sass::Rails::CssCompressor:0x007fdef9f9fee0>`

因此，配置行似乎没有得到尊重。有没有人实际使用过这个选项？

**更新**

查看[sass-rails](https://github.com/rails/sass-rails/blob/3-2-stable/lib/sass/rails/railtie.rb)显示选择已被覆盖：

```
if app.config.assets.compress
    app.config.sass.style = :compressed
    app.config.assets.css_compressor = CssCompressor.new
end 
```

如果我将其注释掉，那么它实际上会尝试启动 yui 压缩器......我仍在检查输出以查看它是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:16:35.240

这确实是rails中的一个错误。我创建了一个补丁并[请求](https://github.com/rails/sass-rails/pull/105)修复它。

# javascript - 当我克隆一个可拖动的 div 时，为什么克隆的不是可拖动的？

> ID：10673595
> 
> 赞同：1
> 
> 时间：2012-05-20T12:56:46.363
> 
> 标签：javascript, jquery

我正在尝试使克隆的 div 可拖动：

```
 $("div").clone(true).removeAttr("id").appendTo($("body")).draggable(); 
```

我也试过这个：

```
 $("div").clone(true,true).removeAttr("id").appendTo($("body")).draggable(); 
```

它创建一个克隆，但该克隆不可拖动。谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:07:36.067

干得好。你不想`clone(true)`。只是`clone()`。前者也将克隆可拖动事件，这就是它具有这种奇怪行为的原因。

这是一个例子：http: [//jsfiddle.net/byZXS/1/](http://jsfiddle.net/byZXS/1/)

```
$('div').draggable(); 
$('div').clone().appendTo('body').draggable();​ 
```

如何保存数据：

```
var data = $('div').data();
var newDiv = $("div").clone().appendTo('body').draggable();
newDiv.data(data); 
```

这里的例子：http: [//jsfiddle.net/byZXS/2/](http://jsfiddle.net/byZXS/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:19:47.753

我们为什么不首先销毁原始元素 Draggale 和可调整大小的插件，例如：

```
$("#orignaldivid").draggable("destroy");
$("#orignaldivid").resizable("destroy"); 
```

然后制作一个像这样的克隆：

```
 var clone = $("orignaldivid").clone(true).attr("id", GetNewId()); //GetNewId may be any function to generate unique id 
```

然后将其附加到`#orignaldiv parent`like ：

```
 $(clone).appendTo($("#orignaldivid").parent()); 
```

最后`re-assign to orignal`是`assign to clone`所有插件

```
$("#orignaldivid").draggable();
$("#orignaldivid").resizable();
$(clone).draggable();
$(clone).resizable(); 
```

可能会有所帮助！

# asp-classic - 带有 JavaScript 的 ASP 类 - 在 Request.QueryString 中的查询参数丢失时处理条件

> ID：10673597
> 
> 赞同：3
> 
> 时间：2012-05-20T12:56:56.480
> 
> 标签：asp-classic, jscript

> **可能重复：**
> [找出 JS-ASP 中是否存在 URL 参数](https://stackoverflow.com/questions/3908934/finding-out-if-a-url-param-exists-in-js-asp)

这可能是非常基本的，但是，

在下面的代码中，if分支是为了覆盖命中请求漏掉“name”查询参数的异常情况，如[http://foo.com/bar.asp?foo=bar](http://foo.com/bar.asp?foo=bar)

```
<%@ language="javascript" %>

<html>
<head>
    <title>Hello ASP!</title>
</head>
<body>
    <%
        if (Request.QueryString("name") == undefined)
        {
            Response.Write("oops, give me your name!");
        }
        else
        {
            Response.Write("Hello " + Request.QueryString("name") + "!");
        }
    %>
</body>
</html> 
```

但从未进入 if 分支。else 分支每次都会发生，我每次都得到“ **Hello undefined！** ”。

我试图用**""**或**null**替换 undefined ，但没有任何改变。

我四处搜索，但得到了关于 ASP.NET/C# 和客户端 JavaScript 的内容。感谢你的帮助！

**更新：**
大家好，感谢您的关注！但我的意思是 ASP 利用 JavaScript 进行服务器端编程。我已经更新了上面的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:11:40.957

检查参数是否传递的最可靠方法是检查`Count`属性：

```
if (Request.QueryString("name").Count === 0) {
    // do whatever...
} 
```

这是因为`Request.QueryString(var)`如果在 URL 中多次指定相同的参数（例如，[http](http://example.com/test.asp?name=value1&name=value2) ://example.com/test.asp?name=value1&name=value2 ），它实际上会返回一个包含多个值的类数组对象。您可以在 MSDN 文档中阅读更多内容：

[http://msdn.microsoft.com/en-us/library/ms524784%28VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524784%28VS.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:04:26.010

也许这对你有用：

```
<script type="text/javascript">
// access the server-side response 
// and store it in a javascript variable
var myQueryString = '<%= Request.QueryString("name") %>';

// now write to the document using javascript only
if (myQueryString === "" ) {
   document.write("oops, give me your name!");
} else {
   document.write("Hello " + myQueryString + "!");
}
</script> 
```

# algorithm - 算法难题的测试用例

> ID：10673599
> 
> 赞同：1
> 
> 时间：2012-05-20T12:57:25.807
> 
> 标签：algorithm, testing, testcase

以下是来自[Interviewstreet](https://www.interviewstreet.com/challenges/dashboard/#problem/4e643a7ebf4f1)的问题，有人可以给我一些测试用例以及输出。我的解决方案在所有测试用例的时间限制内，但给出了错误的答案。

圆求和（30 分）

孩子们`N`围成一圈坐着，`1,2,...,N`顺时针编号。`ith`孩子有一张纸，上面`ai`写着数字。他们玩以下游戏：

在第一轮中，被编号的孩子`x`将他的邻居的数字加到他的数字上。

在第二轮中，顺时针顺序的下一个孩子将他的邻居的数字之和加到他的数字上，依此类推。

比赛在`M`回合结束后结束。

输入：第一行包含`T`，测试用例的数量。`T`案例如下。测试用例的第一行包含两个空格分隔的整数`N`和`M`. 下一行包含`N`整数，`ith`数字为`ai`。

输出：对于每个测试用例，输出 N 行，每行有 N 个整数。如果游戏从孩子玩第一轮开始，则该行的`jth`整数`ith`包含第 j 个孩子最终得到的数字。`i`在除最后一个之外的每个测试用例之后输出一个空行。由于数字可能非常大，因此将它们模输出`1000000007`。

约束：

```
1 <= T <= 15
3 <= N <= 50
1 <= M <= 10^9
1 <= ai <= 10^9 
```

样本输入：

```
2
5 1
10 20 30 40 50
3 4
1 2 1 
```

样本输出：

```
80 20 30 40 50
10 60 30 40 50
10 20 90 40 50
10 20 30 120 50
10 20 30 40 100

23 7 12
11 21 6
7 13 24 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:46:10.923

如果它似乎对小型测试用例没问题，但不是全部，我猜你有溢出问题。

确保你要么...

*   每次相加后做模数，而不仅仅是在三个数字相加之后。
*   使用 64 位数字。这仍然需要模数，但不那么频繁。

1000000007 非常接近有符号 32 位数字 (214748367) 的限制。您可以添加到调制数字而不会溢出，但不能添加三个。

# javascript - 等待 jquery .html 方法完成渲染

> ID：10673603
> 
> 赞同：13
> 
> 时间：2012-05-20T12:58:02.083
> 
> 标签：javascript, jquery, html

我有带有垂直滚动条的 div。Div 正在通过 ajax 动态更新，并使用 jQuery 的 .html 方法插入 html。更新 div 后，滚动条返回顶部，我试图将其保持在以前的位置。

这就是我正在尝试的方式：

```
var scrollPos = $('div#some_id').scrollTop(); //remember scroll pos
$.ajax({...
    success: function(data) {
        $('div#some_id').html(data.html_content); //insert html content
        $('div#some_id').scrollTop(scrollPos); //restore scroll pos
    }
}); 
```

这失败了。我最好的猜测是由于插入的 html 未呈现（即没有滚动）而失败。

例如，这有效。

```
setTimeout(function(){
    $('div#some_id').scrollTop(scrollPos);
}, 200); 
```

但在我看来，这是肮脏的黑客行为。我无法知道某些浏览器不会花费超过这 200 毫秒来呈现插入的内容。

有没有办法在继续之前等待浏览器完成渲染插入的 html？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T13:13:43.517

它仍然是一个 hack，当 HTML 实际插入并准备好时，确实没有可用的回调，但是您可以检查其中的元素`html_content`是否每 200 毫秒插入一次，以确保它们真的准备好等。

从 ajax 调用检查 HTML 中的最后一个元素：

```
var timer = setInterval(function(){
   if ($("#lastElementFromAjaxID").length) {
       $('div#some_id').scrollTop(scrollPos);
       clearInterval(timer);
   }
}, 200); 
```

对于更高级的选项，您可能可以在没有间隔的情况下执行类似的操作，并将其绑定到 DOMnodeInserted，并检查是否插入了最后一个元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-23T12:02:09.463

我只想在这里指出一个区别：一件事是 .html() 完成加载时，但浏览器实际呈现的内容是不同的。如果加载的内容有些复杂，如表格、div、css 样式、图像等 - 渲染将在页面上出现的所有 dom ellements 之后完成。检查是否一切都在那里，并不意味着渲染完成。我一直在自己寻找答案，因为现在我使用 setTimeout 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:21:37.880

这样的回调不存在，因为`.html()`总是同步工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T08:44:44.587

如果您正在等待图像加载，有一种方法[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

# python - 运行龙卷风中的问题“博客”演示

> ID：10673607
> 
> 赞同：1
> 
> 时间：2012-05-20T12:58:27.683
> 
> 标签：python, mysql, blogs, tornado

当我尝试在 tornado 包中运行“博客”演示时。我遇到以下问题：

```
Traceback (most recent call last):
  File "./blog.py", line 196, in <module>
    main()
  File "./blog.py", line 190, in main
    http_server = tornado.httpserver.HTTPServer(Application())
  File "./blog.py", line 63, in __init__
    user=options.mysql_user, password=options.mysql_password)
  File "/usr/local/lib/python2.7/dist-packages/tornado/database.py", line 58, in __init__
    args = dict(conv=CONVERSIONS, use_unicode=True, charset="utf8",
NameError: global name 'CONVERSIONS' is not defined 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:09:59.310

首先你应该安装 python-MySQLdb，然后阅读博客演示中的 README

# ajax - “显示更多”，google、anchors 和 Ajax

> ID：10673608
> 
> 赞同：0
> 
> 时间：2012-05-20T12:58:33.267
> 
> 标签：ajax, anchor

我想要一个“显示更多”功能来替换导航栏。基本上，每次用户点击“显示更多”按钮时，都会显示新评论。

就像是 ：

```
<div id='comment1'>...</div>
...
<div id='comment5'>...</div>
<input...>Show more</input> 
```

Show more 将激活一些 AJAX 以获得接下来的 5 条评论。

一个**noscript**将返回谷歌的所有评论。

但是如果一个谷歌索引默认不显示的comment6，我怎么知道我需要显示至少10条记录（每条显示更多显示5条记录）？

我希望它在[http://mysite.com/#comment6的上下文中工作](http://mysite.com/#comment6)

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:09:37.160

javascript 代码 （可在此处找到：[http](http://www.ajax-community.de/javascript/4219-anker-js-auslesen.html#post20803) ://www.ajax-community.de/javascript/4219-anker-js-auslesen.html#post20803 ）能够在您的示例中返回“#comment6”。您应该能够使用此值来找出必须显示的记录数。`var regex = "#.+$";
var myregex = new RegExp(regex);
var match = myregex.exec(window.location.href);
if (match == null) {
alert("no anchors");
} else {
alert(match); }`

**编辑** 哎呀，我已经阅读了整个线程......有一个更好的解决方案：

```
alert(document.location.hash) //returns the current anchor
alert(document.location.hash.substr(1)) // returns the current anchor without "#" 
```

（来源：[http](http://www.ajax-community.de/javascript/4219-anker-js-auslesen.html#post20804) ://www.ajax-community.de/javascript/4219-anker-js-auslesen.html#post20804 ）

# android - android中带有应用程序图标的列表

> ID：10673610
> 
> 赞同：0
> 
> 时间：2012-05-20T12:58:44.393
> 
> 标签：android, android-layout

```
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     lView = (ListView) findViewById(R.id.list1);
     PackageManager pm = this.getPackageManager();

     Intent intent = new Intent(Intent.ACTION_MAIN, null);
     intent.addCategory(Intent.CATEGORY_LAUNCHER);

     ArrayList<ResolveInfo> list = (ArrayList<ResolveInfo>)pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list) {

            results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm));

            Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
        } 

     lView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, results));

    } 
```

如何修改此代码以添加带有自己图标的列出的应用程序？main.xml 中应该包含什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:03:47.850

```
private ArrayList<PInfo> getInstalledApps() {
    ArrayList<PInfo> res = new ArrayList<PInfo>();        
    List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);
        PInfo pInfo = new PInfo();
        pInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        pInfo.pname = p.packageName;
        pInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
        res.add(pInfo);
    }
    return res; 
} 
```

以上返回 PInfo 的数组列表。那是所有已安装应用程序的应用程序名称、图标和包名称的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T13:07:30.310

尝试使用这个 Helper 类

```
class PInfo {
    private String appname = "";
    private String pname = "";
    private String versionName = "";
    private int versionCode = 0;
    private Drawable icon;
    private void prettyPrint() {
        Log.v(appname + "\t" + pname + "\t" + versionName + "\t" + versionCode);
    }
}

private ArrayList<PInfo> getPackages() {
    ArrayList<PInfo> apps = getInstalledApps(false); /* false = no system packages */
    final int max = apps.size();
    for (int i=0; i<max; i++) {
        apps.get(i).prettyPrint();
    }
    return apps;
}

private ArrayList<PInfo> getInstalledApps(boolean getSysPackages) {
    ArrayList<PInfo> res = new ArrayList<PInfo>();        
    List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);
        if ((!getSysPackages) && (p.versionName == null)) {
            continue ;
        }
        PInfo newInfo = new PInfo();
        newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        newInfo.pname = p.packageName;
        newInfo.versionName = p.versionName;
        newInfo.versionCode = p.versionCode;
        newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
        res.add(newInfo);
    }
    return res; 
} 
```

# wordpress - Wordpress 使用标准重写，然后设置函数来重写 page_id

> ID：10673611
> 
> 赞同：1
> 
> 时间：2012-05-20T12:58:44.790
> 
> 标签：wordpress, preg-replace, rewrite

我需要将 wordpress 与“http://www.mysite.com/?p=123”之类的标准重写规则一起使用，但我想重写“http://www.mysite.com/store”之类的内容，但是我不想使用像“http://www.mysite.com/postname”这样的wordpress内部功能，我会在.htacess中重写，所以我写了这样内容被重写，

```
function replace_mycontent($string){
    $pattern = '/?page_id=([^/]+)/';  // urls like http://www.mysite.com/?p=123
    $replacement = '/$1/'; // gets replaced by http://www.mysite/store
return preg_replace($pattern, $replacement, $string);
}

add_filter('the_content', 'replace_mycontent'); 
```

这会产生错误，欢迎提供一些帮助，

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:03:12.363

替换这行代码： `$pattern = '/?page_id=([^/]+)/';`

有了这个：`$pattern = '/?p=([^/]+)/';`

**编辑1：**

在 .htaccess 中，可以这样做*（考虑到 Wordpress 安装在站点的根目录中*）：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ index.php?p=$1 [L]
<IfModule> 
```

# visual-c++ - Visual C++ DLL 编程中的类型转换

> ID：10673617
> 
> 赞同：0
> 
> 时间：2012-05-20T12:59:48.643
> 
> 标签：visual-c++, mfc, command-line-interface, typecasting-operator

我在 Visual C++ 中有一个代码，我在数据类型**数组中有一个数据 ^** & 我想将此数据转换为其他格式，例如 UBYTE* 但是当我进行 Typecasting 时，Visual Studio 会显示一个错误：
**convert from ' cli::array ^' to UBYTE***

请告诉我如何解决这个问题：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:06:42.547

使用编组，如下所示：

```
array<Byte>^ managed_array = ...;
unsigned char *unmanaged_array =
                (unsigned char*)malloc(managed_array->Length); 

Marshal::Copy(        unmanaged_array,
                                    0,
              IntPtr(unmanaged_array),
                managed_array->Length);

...

free(unmanaged_array); 
```

注意：unmanaged_array 的数据是 managed_array 数据的副本。

# c# - 动态生成的脚本应该出现在 DNN 的所有页面上

> ID：10673621
> 
> 赞同：2
> 
> 时间：2012-05-20T13:00:53.137
> 
> 标签：c#, asp.net, dotnetnuke-module

我的客户需要一个 DNN 模块，其中动态生成的 Javascript 应该出现在整个门户网站的页脚中。我已经生成了代码，但它只出现在门户网站的一页上，一旦页面关闭，脚本就消失了。因为此脚本是从模块生成的，而该模块仅在一页中。所以不知道如何处理这种情况，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:39:29.493

正如您所说，您还需要`Footer`控制动态生成的脚本。

为此，你`Literal control`能把`Footer section`. 现在，每当`JavaScript`动态生成时，您都必须将信息保持在`Session`变量中。

像这样...

```
public class SessionCollection
{
  public static String DynamicJavaScript
  {
    get
    {
       return Convert.ToString(HttpContext.Current.Session["DynamicJavaScript"]);
    }
    set
    {
       System.Web.HttpContext.Current.Session["DynamicJavaScript"] = value;
    }
  }
} 
```

如您所知，控制流程如下所示。

> 1.  第一个网页将被执行。
> 2.  将执行下一个母版页。
> 3.  最后将执行用户控制。

现在，一旦 Master 页面将执行，`Session`就可以在`Footer`Part 中访问该值。我假设页脚内容直接用于页面，`Master Page`或者`User Control`在页面中准备和使用其他内容`Master`。

希望这会有用...

# qt - QML Symbian 隐藏应用程序

> ID：10673624
> 
> 赞同：0
> 
> 时间：2012-05-20T13:01:04.197
> 
> 标签：qt, hide, symbian, qml, minimize

我的 Symbian (Belle) main.qml 具有以下标准：

```
window.pageStack.depth <= 1 ? Qt.quit() : window.pageStack.pop() 
```

当按下后工具栏按钮时，按下时会关闭我的应用程序。我想知道当我按下设备上的菜单按钮时应该使用什么来最小化（或隐藏）我的应用程序？我搜索了一个解决方案，但似乎没有什么是正确的。

**编辑：**

你能不能告诉我应该如何实现它qml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:21:09.133

要在 Symbian 中以正确的方式最小化您的主要寡妇，您应该执行以下步骤。第 1 步：为 QDeclarativeView 创建包装器

```
#include <QtCore/QPointer>
#include <QtDeclarative/QDeclarativeView>
#ifdef Q_OS_SYMBIAN
#   include <e32base.h>
#   include <w32std.h>
#   include <apgwgnam.h>
#   include <coedef.h>
#   include <coecntrl.h>
#   include <coemain.h> 
#endif

class View : public QObject {
    Q_OBJECT
    // ...
public:
    // ...
    Q_INVOKABLE void showMinimized() {
#ifdef Q_OS_SYMBIAN
        RWindowGroup* wg = &CCoeEnv::Static()->RootWin();
        wg->SetOrdinalPosition(-1);
#else
        view_->showMinimized();
#endif
    }
    // ...
private:
    QPointer<QDeclarativeView> view_;
}; 
```

然后将此视图用作 QML 上下文属性：

```
QScopedPointer<QDeclarativeView> view(new QDeclarativeView());
view->rootContext()->setContextProperty("applicationWindow", new View(view.data(), view.data())); 
```

然后您的 QML 代码将如下所示：

```
tools: ToolBarLayout {
    ToolButton {
        flat: true
        iconSource: "qrc:/images/tbar-back.svg"
        onClicked: applicationWindow.showMinimized()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:00:37.047

我最终使用了 QMLViewer 的“lower()”函数

```
QObject::connect(rootObject, SIGNAL(hide()), &viewer, SLOT(lower())); 
```

然后只需将其连接到 qml 中的 lower() 函数，然后在按下后退按钮时调用它。ShowMinimised 让窗口消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:00:24.653

用于`mainwindow.setWindowState(Qt::WindowMinimized)`最小化您的应用程序。

# image-processing - 如何在matlab中运行NBIS软件包'mindtct'？我的意思是输入命令应该是什么？

> ID：10673625
> 
> 赞同：0
> 
> 时间：2012-05-20T13:01:07.747
> 
> 标签：image-processing, fingerprint, biometrics

我整天都在尝试运行这个软件，但我无法弄清楚如何。我已经阅读了手册，但它并没有太大帮助。当我在 MSYS shell 上键入“mindtct -b -ml”时，命令行显示“mindtct:command not found”。如果有人以前使用过它，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:07:26.517

听起来好像`mindtct`不在您的`PATH`. 将包含编译好的目录添加`mindtct`到您`PATH`的`mindtct`. 然后按照`man`页面中的说明进行操作，了解如何运行`mindtct`以执行您想要执行的操作。

# git - 将 git 存储库克隆到 subversion 存储库的子目录中

> ID：10673627
> 
> 赞同：1
> 
> 时间：2012-05-20T13:01:10.797
> 
> 标签：git, git-svn

我有一个现有的 SVN 存储库，它有一个“公共”目录，其中包含不同项目共享的模块。布局是这样的：

```
http://example.com/svn/trunk/common/module_1
http://example.com/svn/trunk/common/module_2
...
http://example.com/svn/trunk/common/module_X 
```

由于各种原因，我正在使用 git 管理其他一些项目。我需要在 SVN 和 git 项目中使用**module_X**，所以我打算使用 git-svn。但是，会出现以下问题：

```
user@host:/repos$ git svn clone http://example.com/svn/trunk/common/module_X destination 
```

**此命令将在/repos/destination**中创建一个新的 git 存储库并将**module_X**内容提取到其中。我需要完成的是将**module_X**放入**/repos/destination/module_X**中，而不是将其内容直接提取到**/repos/destination/**中。

一开始似乎是一个选择是使用

```
user@host:/repos$ git svn clone =--ignore-paths='^((?!module_X).*)$' http://example.com/svn/trunk/common/ destination 
```

这将在**/repos/destination**和子目录**/repos/destination/module_X**中创建一个存储库。但问题是我的 SVN 存储库有相当大的修订历史，并且对整个**common/**路径的操作相当慢。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:33:24.057

简短的回答：你不能，或者你不想要。Git 没有被设计为托管多个项目，因此克隆独立的子目录，一个 git == 一个项目。即使您**可以**做到（请查看非常有见地的答案：[如何仅克隆 Git 存储库的子目录？](https://stackoverflow.com/questions/600079/is-there-any-way-to-clone-a-git-repositorys-sub-directory-only)），您将失去与更新保持同步的所有能力。

尽管您可以尝试一种技巧，但可能是告诉 git-svn 为您拥有的每个模块创建一个分支，这里有一个很好的示例：[Cloning a Non-Standard Svn Repository with Git-Svn](https://stackoverflow.com/questions/572893/cloning-a-non-standard-svn-repository-with-git-svn)，应该看起来像：

```
% git svn clone https://svn.myrepos.com/myproject myproject --ignore-paths='^((?!common).*)$' --trunk=trunk/ --branches=trunk/common/* --prefix=svn/ 
```

（未经测试）

# android - 在 Android 中为动态创建的按钮实现 OnClickListener

> ID：10673628
> 
> 赞同：12
> 
> 时间：2012-05-20T13:01:30.567
> 
> 标签：android, android-layout, android-widget

我通过代码而不是 XML 动态创建按钮。
代码如下：

```
 dynamicview = (LinearLayout)findViewById(R.id.llayout);
     LinearLayout.LayoutParams lprams = new LinearLayout.LayoutParams(
             LinearLayout.LayoutParams.WRAP_CONTENT,
             LinearLayout.LayoutParams.WRAP_CONTENT);

     for(int i=0;i<nob;i++){
         Button btn = new Button(this);
         btn.setId(i+1);
         btn.setText("Button"+(i+1));
         btn.setLayoutParams(lprams);
         dynamicview.addView(btn);
     } 
```

我没有找到一种方法可以为每个按钮实现 OnClickListener，以便我可以根据获得的参考执行操作。
谁能帮我解决这个问题。?
提前致谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-20T13:07:25.027

请看下面的代码：

```
for(int i=0;i<nob;i++) {
    Button btn = new Button(this);
    btn.setId(i+1);
    btn.setText("Button"+(i+1));
    btn.setLayoutParams(lprams);
    final int index = i;
    btn.setOnClickListener(new OnClickListener() {
        void onClick(View v) {
            Log.i("TAG", "The index is" + index);
        }
    });
    dynamicview.addView(btn);
} 
```

我的示例非常简单，但演示了如何将按钮索引放入`OnClickListeber`. 您可以访问`final`声明的匿名类中的任何字段（例如`OnClickListener`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T13:05:54.543

```
 for(int i=0;i<nob;i++){
         Button btn = new Button(this);
         btn.setId(i+1);
         btn.setText("Button"+(i+1));
         btn.setOnClickListener(btnclick); <<<<<<<set click
         btn.setLayoutParams(lprams);
         dynamicview.addView(btn);
     } 
```

并将此侦听器添加到任何方法之外和类内部

```
 OnClickListener btnclick = new OnClickListener() {

        @Override
        public void onClick(View view) {

            switch(view.getId()){
              case 1:
               //first button click
              break;
               //Second button click
              case 2:
              break;
              case 3:
               //third button click
              break;
              case 4:
               //fourth button click
              break;
            .
            .
            .
             default:
              break;
              }

        }
    }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T13:07:34.200

使用 a`List`并添加`Button`您创建的 s`List`

```
List<Button> list = new ArrayList<Button>(); 
```

现在将您的按钮添加到该列表

```
for(int i=0;i<nob;i++){
         Button btn = new Button(this);
         btn.setId(i+1);
         btn.setText("Button"+(i+1));
         btn.setLayoutParams(lprams);
         dynamicview.addView(btn);
         list.add(btn);
     } 
```

然后使用高级 for 循环遍历列表并为每个按钮添加点击侦听器..

```
for(Button btn : list){
btn.setOnClickListener(this);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-15T12:29:03.790

也许这对我想为一组动态创建的按钮使用一个计数器变量的人有所帮助：

我为计数器创建了数组：

```
int[] squatReps; 
```

从偏好我已经采取了元素的数量：

```
squatReps = new int[squatSets];  // where squatSets is taken from preferences 
```

最后我们创建按钮

```
for (int i = 0; i < squatSets; i++){
                squatReps[i] = Integer.parseInt(sharedPreferences.getString("squats_reps", "0"));
                final Button squat_b = new Button(this.getActivity());
                squat_b.setId(i);
                squat_b.setText("");
                squat_b.setLayoutParams(layoutParams);
                final int index = i;
                squat_b.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {

                        squat_b.setText(Integer.toString(squatReps[index]--));    
                        startTimer();                                
                    }
                });
                panel_1.addView(squat_b); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T13:05:58.893

这是同一件事...

```
for(int i=0;i<nob;i++){
         Button btn = new Button(this);
         btn.setId(i+1);
         btn.setText("Button"+(i+1));
         btn.setLayoutParams(lprams);
         btn.setOnCLickListsener(new listener());
         dynamicview.addView(btn);
     }

listener implemnets OnClickListenere{

public void onClick(View v){

} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-20T13:06:58.960

```
for(int i=0;i<nob;i++){
         Button btn = new Button(this);
         btn.setId(i+1);
         btn.setText("Button"+(i+1));
         btn.setLayoutParams(lprams);
         btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
               /////Do some job on button click
            }
        }); 
         dynamicview.addView(btn);
     } 
```

# postgresql - 如何使用 pgbackups 将生产数据库转移到 Heroku 上暂存？得到错误

> ID：10673630
> 
> 赞同：60
> 
> 时间：2012-05-20T13:01:38.330
> 
> 标签：postgresql, heroku

在 Heroku 上，我正在尝试使用 pgbackups 插件将生产数据库复制到我的登台应用程序中。我按照插件页面上的说明进行操作：[https ://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

首先我捕获了数据库：

```
heroku pgbackups:capture --app production-app 
```

那行得通：

```
HEROKU_POSTGRESQL_PURPLE (DATABASE_URL)  ----backup--->  b238

Capturing... done
Storing... done 
```

但是，当我尝试在登台应用程序上恢复它时：

```
heroku pgbackups:restore DATABASE `heroku pgbackups:url --app production-app` --remote staging 
```

我收到以下错误消息：

```
DATABASE_URL does not match any of your databases
 !    Could not resolve database DATABASE
 !    
 !    Available databases: 
```

我还尝试输入完整的 URL：

```
 heroku pgbackups:url b238 --app production-app
 heroku pgbackups:restore DATABASE "https://s3.amazonaws.com/..." --remote staging 
```

并尝试命名应用程序（而不是--remote staging）：

```
heroku pgbackups:restore DATABASE `heroku pgbackups:url --app production-app` --app staging-app 
```

这些都不起作用。有趣的是，错误消息显示没有“可用数据库”。我假设它指的是确实是空的登台应用程序。如果我输入：

```
heroku pgbackups 
```

我得到：

```
 !    No backups. Capture one with `heroku pgbackups:capture`. 
```

要查找可用的备份（生产），我需要输入：

```
heroku pgbackups --app production-app 
```

我得到了当前备份的列表。我不知道这是否正常，或者即使它与问题有关，但我认为我应该提一下。

我已经阅读并尝试了这里的所有答案，但没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-05-28T00:47:03.720

2017 年年中更新（从*Takehiro Mouri*的答案中窃取 - 简化 DATABSE_NAME 部分）

2015年年中更新...

pgbackups 插件已被弃用。没有了`pgbackups:transfer`。

要将数据库从*yourapp*复制到*yourapp_staging*：

```
# turn off the web dynos in staging
heroku maintenance:on -a yourapp-staging

# if you have non-web-dynos, do them too
heroku ps:scale worker=0 -a yourapp-staging

# backup the staging database if you are paranoid like me (optional)
heroku pg:backups capture -a yourapp-staging

# execute the copy
heroku pg:copy your-app::DATABASE_URL DATABASE_URL -a yourapp-staging 
```

然后当它完成后，重新打开登台：

```
# this is if you have workers, change '1' to whatever
heroku ps:scale worker=1 -a yourapp-staging

heroku maintenance:off -a yourapp-staging 
```

（来源：[https](https://devcenter.heroku.com/articles/upgrading-heroku-postgres-databases#upgrade-with-pg-copy-default) ://devcenter.heroku.com/articles/upgrading-heroku-postgres-databases#upgrade-with-pg-copy-default ）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-10-11T03:46:16.080

更新：您可以运行此命令将数据库从生产转移到登台： `heroku pg:copy your-app::DATABASE_URL DATABASE_URL -a yourapp-staging`

它将提示您确认操作，一旦您完成此操作，所有数据都将被迁移。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-06-03T00:43:28.267

更新：这不再有效。请参考下面@lucas-nelson 的[回答](https://stackoverflow.com/questions/10673630/how-do-i-transfer-production-database-to-staging-on-heroku-using-pgbackups-gett/24005476#30495448)。

所以现在事情变得更容易了.. 签出传输命令作为 pgbackups 的一部分

```
heroku pgbackups:transfer HEROKU_POSTGRESQL_PINK sushi-staging::HEROKU_POSTGRESQL_OLIVE -a sushi 
```

[https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups#transfering-databases-between-heroku-applications](https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups#transfering-databases-between-heroku-applications)

这对我将生产代码带回我的暂存站点非常有用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-08-26T07:20:49.563

这是一个使用 Heroku 的附加附件和分叉的简单而安全的解决方案。它不需要备份、没有停机时间，也不会覆盖任何数据库。

**您需要先将生产数据库附加到 staging 应用程序，然后再在 staging 应用程序上分叉。**如果您在生产应用程序上分叉，然后附加到暂存应用程序，则计费应用程序将成为生产应用程序，您将无法将分叉与其分离。

**1.**首先找出你的生产数据库的插件名称（这里是`postgres-prod-123`）：

```
$ heroku addons --app myapp-production
heroku-postgresql (postgresql-prod-123)  standard-0  $50/month
 └─ as DATABASE 
```

**2.**然后[将](https://devcenter.heroku.com/changelog-items/646)生产数据库附加组件附加到您的登台应用程序。给它起一个名字`PRODUCTION_DB`，以便于识别：

```
$ heroku addons:attach postgresql-prod-123 --app myapp-staging --as PRODUCTION_DB 
```

**3.**然后在 staging 应用上创建生产数据库[的 fork ：](https://devcenter.heroku.com/articles/heroku-postgres-fork#create-a-fork)

```
$ heroku addons:create heroku-postgresql:standard-0 --fork PRODUCTION_DB_URL --as STAGING_DB --app myapp-staging 
```

**4.**最后将 fork 提升为 staging 应用程序的主数据库：

```
$ heroku pg:promote STAGING_DB --app myapp-staging 
```

**完毕！**您的登台应用程序现在正在使用您的生产数据库的副本。*请注意，您之前的暂存数据库仍然存在，您可能希望在确保一切正常后将其销毁。*

要清理，请从暂存应用程序中分离生产数据库：

```
$ heroku addons:detach postgresql-prod-123 --app myapp-staging 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-09-27T23:21:43.043

这对我有用： `heroku pg:copy you-app-production::DATABASE DATABASE -a you-app-staging`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-06-27T04:59:47.457

您可以使用以下命令执行此操作

```
heroku pg:copy <production_app_name>::HEROKU_POSTGRESQL_BLACK_URL OLIVE -a <staging_app_name> --confirm <staging_app_name> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-05T09:35:36.307

首先创建一个最新的生产备份：

```
heroku pgbackups:capture -a productionappslug --expire 
```

找出 Heroku 为您的数据库命名的颜色。

[https://postgres.heroku.com/databases](https://postgres.heroku.com/databases) 或 [https://dashboard.heroku.com/apps/STAGINGAPPSLUG/resources](https://dashboard.heroku.com/apps/STAGINGAPPSLUG/resources)

然后将生产数据库备份加载到暂存中（将 RED 更改为您的任何颜色）：

```
heroku pgbackups:restore HEROKU_POSTGRESQL_RED -a stagingappslug `heroku pgbackups:url -a productionappslug` 
```

**stagingappslug**和**liveappslug**是你的 heroku 应用程序的简称。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-06T13:40:16.813

我在同样的问题上苦苦挣扎。根据[这个问题](https://stackoverflow.com/questions/10761977/how-do-i-fix-a-pgbackups-error-backup-url-is-invalid)的答案，问题可能出在您的 heroku gem 版本上。我刚刚升级了我的版本（从 2.26.2 到 2.26.6），现在它可以工作了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-02T22:49:58.133

要将*生产*数据库（*源*数据库）传输（复制）到*临时*数据库（*目标*数据库），您需要`pg:copy`从*目标*应用程序调用，并引用*源*数据库。

`heroku pg:copy source-application::OLIVE HEROKU_POSTGRESQL_PINK -a target-application`

另一个例子：

`heroku pg:copy my-production-app::HEROKU_POSTGRESQL_OLIVE HEROKU_POSTGRESQL_PINK --app my-staging-app`

要获取数据库的**颜色名称**，请使用：

```
heroku pg --app my-production-app
heroku pg --app my-staging-app 
```

见[pg:copy](https://devcenter.heroku.com/articles/upgrading-heroku-postgres-databases#4b-alternative-transfer-data-between-applications)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-21T07:15:22.113

在没有运气之后。（我使用heroku gem 2.31.4）我做了以下（帮助疲惫的人）

1.  登录 Heroku 数据库控制台

2.  登录到 staging > 'settings' > PGRestore > 将“Connection Settings”复制到一个文本文件中。

3.  登录到生产 > 快照，按“+”立即进行新备份。然后按下载。下载到应用程序 /tmp 文件夹或任何你想要的地方。

4.  将登台设置为维护模式

    $ heroku 维护：开启

5.  像这样运行命令，最后带有连接设置文本和转储文件： PGPASSWORD={...bits of stuff here...} -p 5432 'tmp/b048.dump.dump'

6.  运行后：

    $ heroku 维护：关闭

7.  登录登台并检查是否匹配。如果可以通过，找到您知道正在生产中的最近交易。$ heroku 为两个应用程序运行控制台并检查 ids 是否匹配。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-28T14:42:43.933

我认为它不是 --remote 它的 --app 试试这个：

```
heroku pgbackups:restore DATABASE `heroku pgbackups:url --app production-app` --app staging-app 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-30T04:21:18.707

这对我有用

*   从 heroku 控制台下载备份并将其上传到 s3。
*   `heroku pg:backups restore 'DUMP_FILE_URL_FROM_S3' DATABASE --app MY_APP`

# java - Java：为什么 2 个类中的 2 个文字（相同的内容）使用相同的内部字符串？

> ID：10673632
> 
> 赞同：1
> 
> 时间：2012-05-20T13:02:05.117
> 
> 标签：java, string

```
class A {
    String s = "abc";
}

class B {
    String s = "abc";

     static public void main(String[]args ) {
            A a = new A();
            B b = new B();
            System.out.println("a.s==b.s : " + (a.s==b.s));
     }
} 
```

输出：

```
a.s==b.s : true 
```

如果将文字写入类文件的“常量池”部分，那么 2 个类中的 2 个文字（相同的内容）如何使用相同的内部字符串？编译器如何将它们链接在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:08:07.273

[这与Java 语言规范第 3.10.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)中的说明完全相同：

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。

然后是一个例子，解释包括：

> 不同包中不同类中的文字字符串同样表示对同一 String 对象的引用。

[`String.intern()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)记录如下：

> 返回字符串对象的规范表示。
> 
> 一个字符串池，最初是空的，由 String 类私下维护。
> 
> 当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。
> 
> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java™ 语言规范的第 3.10.5 节中定义。

所有这些都指向您在示例中看到的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T13:03:51.513

有一个*字符串池*，所有实习`String`对象都进入其中。它实际上是一个`HashMap<String>`. 请注意，该`String.intern()`方法返回一个`String`; 实施本质上是

```
if (stringPool.contains(this))
    return stringPool.get(this);
else {
    stringPool.put(this, this);
    return this;
} 
```

在加载类时创建 String 对象时，它会被调用的结果替换，调用`intern()`的结果是在所有类之间共享类似的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:10:16.317

想象一个包含所有内部字符串的`static final Set<String>`in 。`String.class`所有共享同一个加载`String`类的类都将看到相同的实习字符串。由于`String`由根类加载器之一加载，因此它由单个 JVM 实例中的所有内容共享。

# java - 通信链路故障

> ID：10673634
> 
> 赞同：1
> 
> 时间：2012-05-20T13:02:15.337
> 
> 标签：java, mysql, macos, mamp

我正在使用安装了 MAMP 的 MacBook Pro。MAMP 方面的一切工作正常。JDBC 连接器也在它的位置。

问题是当我尝试通过我的 java 代码连接到 MySQL 时，它给了我以下错误消息：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:348)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2391)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2428)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2213)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:797)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:389)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at DatabaseConnection.<init>(DatabaseConnection.java:22)
at Main.main(Main.java:10)
Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at java.net.Socket.<init>(Socket.java:375)
at java.net.Socket.<init>(Socket.java:218)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:298)
... 16 more 
```

这是我的 Java 代码中的连接语句（我也检查了凭据）：

```
connection = DriverManager.getConnection("jdbc:mysql:///"+databaseName, userName, password); 
```

这完全让我发疯，因为在我的 iMac 上使用相同的安装和代码，一切正常。

那么我的 MacBook Pro 上出现了什么问题，它不允许我通过 Java 连接到 MySQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:42:19.970

您必须先对 MacBook 进行一些诊断。
因为驱动程序没有收到任何数据包......
这意味着没有连接。

打开终端窗口并执行以下操作：

```
su
--> enter password
mysql
--> does mysql start?
telnet localhost 3306
--> do you get a response?
ps -ef |grep mysql
--> do you see a mysql instance?
less /etc/my.cnf
--> check out the settings, what port number is used? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-01T13:56:45.703

MAMP、mysql J 连接器、Java 和“通信链接故障”异常的解决方案最好通过安装全新的 mysql 服务器副本来解决。

我认为默认情况下 MAMP 版本的 mysql 已关闭 TCP/IP 端口。您可以通过运行以下步骤将其打开。然而，我发现这些步骤都不适合我，而且安装一个全新的 mysql 服务器副本要容易得多，通过默认安装可以让网络连接正常工作。

您可以尝试使用以下步骤获取 MAMP mysql 的网络访问权限。启动“MAMP Pro”（免费版本中没有这些功能）“：

一个。进入菜单“文件”->“编辑模板”->“MySQL my.cnf”并编辑以下两行。注意不要改变其他任何东西。

```
bind-address = 0.0.0.0
#MAMP_skip-networking_MAMP 
```

湾。取消选中“服务器”选项卡上的“仅允许本地访问”。

执行这些步骤后，运行以确认 TCP/IP 访问：

网络统计-tln | grep mysql

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T08:50:25.127

只需打开 MAMP 并取消选中“仅允许本地访问”。就这么简单：D

# gwt - HttpServletRequest 请求 = this.getThreadLocalRequest() 返回 null？

> ID：10673645
> 
> 赞同：5
> 
> 时间：2012-05-20T13:03:47.867
> 
> 标签：gwt

我想在 GWT 应用程序中获取会话属性。我得到这样的会话

```
HttpServletRequest request = this.getThreadLocalRequest();
System.out.println("Check HttpServletRequest");       
HttpSession session = request.getSession(); 
```

但`this.getThreadLocalRequest()`总是`null`。

代码 ：

客户：

```
@RemoteServiceRelativePath("service.s3gwt")
public interface getAttributeSession extends RemoteService 
{
    String getSessionAttribute(String name);
}

public interface getAttributeSessionAsync 
{
    void getSessionAttribute(String name, AsyncCallback<String> callback);
} 
```

服务器：

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import daTotNghiep.client.service.getAttributeSession;

public class getAttributeSessionImpl extends RemoteServiceServlet implements getAttributeSession 
{
    private static final long serialVersionUID = 1L;

    public String getSessionAttribute(String name) 
    {
    // TODO Auto-generated method stub

    HttpServletRequest request = this.getThreadLocalRequest();
    System.out.println("Check HttpServletRequest");
    if(request == null) System.out.println("SO BAD");

   //   HttpSession session = request.getSession();
   // System.out.println("ID session "+session.getId());

     return "";
    }
} 
```

当调用方法时`getSessionAttribute()`，我看到它`this.getThreadLocalRequest()`总是返回`null`。所以为什么？以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-20T22:16:09.457

该方法在由 继承`getThreadLocalRequest()`的类中实现。该实现仅为方法设置字段（由 使用） 。这意味着，只有在 POST 请求中调用它时才会返回请求，并且只有在没有调用 super 方法的情况下没有覆盖。`AbstractRemoteServiceServlet``RemoteServiceServlet``perThreadRequest``getThreadLocalRequest()``doPost()``getThreadLocalRequest()``doPost()`

所以要确保`getThreadLocalRequest()`不返回`null`

*   确保您在 POST 请求中调用它（而不是 GET 或其他 HTTP 请求类型）。
*   确保你没有在`doPost()`没有调用的情况下覆盖`super.doPost()`

# c# - 在 ActionFilterAttribute 中读取表单数据

> ID：10673649
> 
> 赞同：6
> 
> 时间：2012-05-20T13:04:45.117
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-web-api

我为我的 web api 创建了一个 ActionFilterAttribute 来授权人们。通过 RequestUri 获取 accessToken 是可以的，但是我想以表单数据的形式发送它。在读取 ActionFilterAttribute 的 onActionExecuting 方法中的 Request.Content 时，服务器总是有一个空结果。我怎么解决这个问题？代码如下：

```
 public class RequireAuthorization : ActionFilterAttribute
{

    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        actionContext.Request.Content.ReadAsStringAsync().ContinueWith((t) =>
        {
            try
            {
                //query will result in empty string
                string query = t.Result;

                string UserID = HttpUtility.ParseQueryString(query).Get("UserID");
                string accessToken = HttpUtility.ParseQueryString(query).Get("AccessToken");

                UserRepository repository = new UserRepository();
                repository.IsTokenValid(Convert.ToInt32(UserID), accessToken);
            }
            catch (Exception ex)
            {
                var response = new HttpResponseMessage
                {
                    Content =
                        new StringContent("This token is not valid, please refresh token or obtain valid token!"),
                    StatusCode = HttpStatusCode.Unauthorized
                };

                throw new HttpResponseException(response);
            }
        });

        base.OnActionExecuting(actionContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T10:26:21.030

这是因为 HttpContent 在 ActionFilter 之前已被格式化程序读取。Web API 只允许读取一次内容。所以你无法再次阅读它。

这是一个可能的解决方案。首先，将您的操作参数设为 FormDataCollection：

```
 [RequireAuthorization]
    public HttpResponseMessage PostTodo(FormDataCollection formData)
    {
        Todo todo = formData.ReadAs<Todo>();
        // ... 
```

然后，通过代码在 ActionFilter 中获取：

```
 public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var formData = actionContext.ActionArguments["formData"] as FormDataCollection;
        if (formData != null)
        {
            var userID = formData.Get("UserID");
            var accessToken = formData.Get("AccessToken");
            // authorize
        }

        base.OnActionExecuting(actionContext);
    } 
```

# php - 未创建 Zip 文件

> ID：10673650
> 
> 赞同：0
> 
> 时间：2012-05-20T13:04:47.853
> 
> 标签：php, html, forms, zip

我正在尝试通过从 HTML 表单发送文件名来将文件添加到 zip 中。HTML代码是

```
<form action="act.php" method="POST">
<input type="checkbox" name="send1" value="filename1.extension">
<input type="checkbox" name="send1" value="filename2.extension">
</form> 
```

PHP的

我尝试了两种方法
方法1：

```
$zipfilename="abcd.zip";
$zip= new ZipArchive();
$zip->open($zipfilename, ZipArchive::CREATE);
foreach($_POST['send1'] as $filename)
{
$zip->addFile($filename);
}
$zip->close(); 
```

方法二：

```
$zipfilename="abcd.zip";
$filestozip=array();
foreach($_POST['send1'] as $filename)
{
$filestozip[]=$filename;
}

$zip= new ZipArchive();
$zip->open($zipfilename, ZipArchive::CREATE);

foreach($filestozip as $filename2)
{
$zip->addFile($filename2);}
}

$zip->close(); 
```

但是没有创建 Zip 文件。我尝试使用 $filetozip 的静态代码检查 Zip 语法

```
$filestozip[0]="filename1.extension";
$filestozip[0]="filename1.extension"; 
```

有效。但是，当数据动态来自另一个 HTML 页面时，它就不起作用了。我的代码有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:13:20.857

您正在使用 ZipArchive::addFile($file) ，它期望这些文件存在于服务器上的某处，或者如果使用了支持的协议，则存在于另一台服务器上的某处。

您的脚本可以访问/读取这些文件吗？它是您正在使用的完整路径还是相对路径？

如果你会使用 file_get_contents($filename); 它会输出预期的数据吗？

在使用 addFile() 之前，您应该始终检查 file_exists。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T02:33:29.263

发现了问题。我的逻辑没有问题。

```
$zip->addFile($filename); 
```

正如我之前所说，$filename 变量的数据是从 HTML 接收的，其中任何空格都被我有意替换为 %20。这种替换的原因是启用使用数据的文件的链接。但是如果空间被替换为 %20 zipArchive::addFile() 不会添加最终导致 Zip 创建失败的 zip 文件。

# asp.net-mvc-3 - 在 ASP.NET MVC3 中组织属性编辑的最佳方式

> ID：10673652
> 
> 赞同：0
> 
> 时间：2012-05-20T13:05:02.487
> 
> 标签：asp.net-mvc-3

请建议在 MVC3 中组织编辑我的餐厅实体的最佳方法。

我已经有 _Layout 页面，该页面的页眉和页脚对于网站的所有页面都是通用的。_Layout 具有以“内容”为名称的部分。

对于餐厅编辑，我创建了另一个名为 _Restaurant 的布局，它添加了带有编辑基本信息、照片、类别等选项的侧边导航。所有导航链接都是使用类似这样的命令创建的 @Html.ActionLink("Some name","Edit" , "Restaurant", new {id=Model.ID})，所有链接都具有相同的控制器名称和路由值。此布局的模型是餐厅（需要构建适当的导航链接）

目前我已经为编辑和照片实现了视图，这个结构工作得很好，因为两个视图都使用餐厅作为模型。但是我担心在尝试实现餐厅产品和类别的编辑时可能会遇到一些问题，因为这个页面需要不同的模型。

在这种情况下你有什么建议？我知道我可以使用局部视图来生成子导航，但是在这种情况下，我需要在我生成的所有视图中插入渲染代码，所以我认为这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:06:56.660

听起来您拥有的 Restaurant 模型是域模型的一部分，并且您正在视图中使用它。如果是这样，那么您应该考虑使用[视图模型](https://stackoverflow.com/questions/4865806/why-two-classes-view-model-and-domain-model)，其中每个模型都特定于您正在创建的视图。视图模型的内容可以根据需要映射到域模型或从域模型映射，以防止您在实现产品编辑和类别编辑视图时遇到您提到的字段不匹配。可以手动执行此映射（即逐个字段复制），也可以使用 automapper 等工具为您执行此映射。

**编辑：**

据我了解，如果您访问网站的餐厅部分，您会有一个侧边导航，其中的链接始终相同，但需要为该餐厅动态生成。

布局是否`_Restaurant`包含与 main 中定义的元素相似的元素`_Layout`？如果是这样，我会将`_Restaurant`布局设为嵌套布局（如果还没有的话），这样您就不必重新定义这些元素。

例如：

主要`_Layout`将被定义：

```
<html>
...
<body>
    <!--main navigation here-->
    @RenderBody()
<body>
</html> 
```

`_Restaurant`然后可以定义嵌套布局：

```
@{
    Layout = "_Layout.cshtml"
}
<!-- Define elements for the restaurant layout here-->
@RenderBody() 
```

您可以在此布局中定义餐厅元素，但不能在此处定义侧导航，因为它需要生成视图模型。因此，如果嵌套布局中唯一出现的是侧面导航，那么我什至不会使用嵌套布局。否则，（如果嵌套布局中定义了其他元素），那么您可以在嵌套布局中定义一个部分 ( `@RenderSection`) 以确保使用它的所有视图都定义一个侧边导航。

然后每个视图将被定义为类似于以下内容（使用子操作来呈现侧导航）：

```
@model ...

@{
    Layout = "~/_Restaurant.cshtml"
}

@Html.RenderAction("SideNavigation", "RestaurantController", new { id = Model.Id }) 
```

然后子动作将被定义为：

```
public class RestaurantController : Controller
{
    [ChildActionOnly]
    public PartialViewResult SideNavigation(int id)
    {
        return PartialView();
    }
} 
```

然后，这会将 id 传递给部分视图，该部分视图将被定义为：

```
@model int

<!--code to display the side navigation--> 
```

希望这会有所帮助。

# asp.net-mvc - asp.net mvc 3 razor 部署 IIS7

> ID：10673653
> 
> 赞同：-1
> 
> 时间：2012-05-20T13:05:18.270
> 
> 标签：asp.net-mvc, iis, deployment

> **可能重复：**
> [asp.net mvc 3 Web 应用程序在部署后无法工作](https://stackoverflow.com/questions/10674021/asp-net-mvc-3-web-application-does-not-working-after-deploy)

我已经在 iis 7 上部署了 asp.net mvc 3 razor 但它不工作

仅适用于不需要数据库连接的视图。

我确定我在 web.config 文件中输入了正确的连接字符串。

是否有任何其他连接字符串要更改？

旧的 asp.net 网页站点使用相同的连接字符串运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:22:58.817

将[customerrors](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)设置为`off`，这将为您提供用于调试的更详细的错误。

[您可以在AppHarbor FAQ](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)中找到更多 ASP.NET 调试建议。

# c# - 如何按 DeleteKey 删除 DataGridView 行？

> ID：10673654
> 
> 赞同：6
> 
> 时间：2012-05-20T13:05:23.030
> 
> 标签：c#, winforms, datagridview

我在表单上有一个 DataGridView。

我想通过按删除键从网格中删除行，但删除键似乎已经死了，直到我进入`CellEditMode`.

如果我输入`CellEditMode`然后删除键有效，但显然仅用于删除单元格内容，而不用于删除行。

DataGridView 具有`AllowUserToDeleteRow = true`并且网格未绑定。

我有其他网格，此功能可以正常工作，但看不出区别。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T20:47:52.520

删除功能不起作用的一个可能原因是您需要选择一行。

这意味着要么`SelectionMode`设置为，`FullRowSelect`要么意味着您之前单击了列左侧的行标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-01T21:07:05.690

如果您正在使用`DataGridView1.EditMode = DataGridViewEditMode.EditOnEnter`，则无法删除任何行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-04T22:52:18.667

最简单的解决方案是确保“SelectionMode = FullRowSelect”和“EditMode = EditOnKeystrokeOrF2”。

这使得当他们第一次选择行时它不会跳转到编辑模式，这需要按下“Esc”键退出编辑模式然后删除。

即使该模式称为“EditOnKeystrokeOrF2”，第二次单击单元格也会启动编辑模式。

# xml - 创建一个变量 xsl

> ID：10673655
> 
> 赞同：-1
> 
> 时间：2012-05-20T13:05:31.267
> 
> 标签：xml, xslt

早上好，如果有人知道它有助于通过 xsl 和 xml 创建变量

我有这个xml：

```
<!ELEMENT bdticketCardell (invoice, services, products) >
........
<!ELEMENT services (service+)>
<!ELEMENT service (nameService, quantityService, priceService)>
<!ELEMENT nameService (#PCDATA) >
<!ELEMENT quantityService (#PCDATA) >
<!ELEMENT priceService (#PCDATA) >
<!ATTLIST service idService ID #REQUIRED> 
```

我想做 = ""variable name="grosspriceservice1" select="//quantityService[@idService = "s1"] * //priceService[@idService = "s1"]/>""

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:42:11.727

您的问题不清楚
，请提供 XML 示例以获得清晰和更好的答案。
由于您拥有 DTD，因此您可以生成任何通用 XML 示例文件，而无需合理数据但结构正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:10:15.967

你的问题不是很清楚，但我的猜测是你想将价格乘以@id 等于“s1”的服务数量，并将结果放入一个变量中。

如果是这样，你可以写：

```
<xsl:variable name="grosspriceservice1" 
  select="/services/service[@idService='s1']/quantityService * /services/service[@idService='s1']/priceService"/> 
```

或者，如果您的解析器处理 DTD id（在大多数情况下应该是正确的）：

```
<xsl:variable name="grosspriceservice1" 
  select="id('s1')/quantityService * id('s1')/priceService"/> 
```

（当然也可以用一个变量来存储id为s1的服务）

@id 属性不在他们共同的父母之下`quantityService`，`priceService`而是在他们共同的父母之下，最接近您提议的解决方案是：

```
<xsl:variable name="grosspriceservice1" 
  select="//quantityService[../@id='s1'] * //priceService[../@idService = "s1"]"/> 
```

但这将比我上面提出的两个选项效率低得多，因为处理器必须扫描整个文档两次才能执行此操作。

# zend-framework - 使用 zend_db_select PHP 计算一列中的不同单元格

> ID：10673656
> 
> 赞同：0
> 
> 时间：2012-05-20T13:05:31.453
> 
> 标签：zend-framework, select, count, distinct

我正在尝试计算一列（测试）中特定单元格的出现次数，然后能够在*一个查询*中将它们作为数组回显。例如。

```
**user_id    test**
     1       echo
     1       angio
     1       holter
     1       angio
     1       echo
     1       angio 
```

我希望能够将每个测试的计数作为数组回显，如下所示；

```
$result['echo'] = 2
$result['holter'] = 1
$result['angio'] = 3 
```

我能够通过多个查询（每个测试一个查询）来实现每个测试的数量，这似乎非常低效，并且将结果作为数组获取似乎是解决方案。使用 zend_bd_select 并非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:59:31.157

这使用一个简单的 Zend_Db_Select 查询和一个循环来将结果处理成一个数组，就像你展示的那样。

```
$groups = array();  // same as $result in your question

$select = $dbTable->select()
                  ->from($dbTable, array('user_id', 'test'))
                  ->where('user_id = ?', $user_id);

$result = $select->query();

while (($row = $result->fetch()) !== false) {
    $test = $row['test'];
    if (!isset($groups[$test])) {
        $groups[$test] = 1;
    } else {
        $groups[$test]++;
    }
} 
```

最后，`$groups`应该由`test`列值索引，并计算它发生的次数。我不相信你可以运行一个查询来达到这个结果，至少在没有存储过程或运行许多子查询的情况下是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:57:49.810

```
$sql = $select->from('table', array('test', 'COUNT(test)'))->group('test');
$array = $db->fetchPairs($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-04T13:26:24.450

我意识到这是旧的，但不需要循环结果。

```
$sql = $dbTable->
    select()->
    from(['u' => 'user'], ['total' => new Zend_Db_Expr('COUNT( DISTINCT u.user_id )')])->
    where( ... );

$resultRow = $this->fetchRow( $sql ); 
```

希望有人觉得这很有帮助。

# android - Android - 从另一个类访问资产不起作用

> ID：10673664
> 
> 赞同：0
> 
> 时间：2012-05-20T13:06:13.293
> 
> 标签：android

我正在尝试从另一个类文件访问我的应用程序的资产。显然`this.getAssets()`不起作用，所以我尝试将 Context 作为参数传递给类。我使用了各种“上下文”- `getBaseContext()`, `getApplicationContext()`, this ，但它们都导致`NullPointerException`.

这是我正在使用的代码。它在 Activity 中运行良好，但我不知道如何让它在外部类中运行。

```
private String pickText(){
    String line = null;
    try {
        AssetManager am = this.getAssets();
        InputStream fstream = am.open("plan.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        line = br.readLine();
        for(int i = 1; i < id && line != null; i++){
            line = br.readLine();
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return line;
} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:10:06.943

将活动本身作为参数传入，这意味着`this`来自您的活动。

# google-maps - 使用 Google 进行地理编码时出现 XMLHttpRequest 错误

> ID：10673670
> 
> 赞同：2
> 
> 时间：2012-05-20T13:07:05.353
> 
> 标签：google-maps, google-geocoding-api

在谷歌的文档中，它说地理编码请求应该发送到以下地址：

[http://maps.googleapis.com/maps/api/geocode/output?parameters](http://maps.googleapis.com/maps/api/geocode/output?parameters)

（其中“输出”应替换为“JSON”或“XML”，“参数”应类似于“address=500+Fifth+Avenue+New+York”）

当我尝试 XmlHTTPRequest 时，我（可以预见地）得到一个 101 错误，因为谷歌的服务器不在我自己的域中（当然）。

那么我应该如何从服务器获得答案呢？

或者，也许我对使用 Google 进行地理编码有一些不明白的地方。

我想坚持使用 Javascript 和 PHP。

非常感谢你的帮助。

尼古拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:55:00.057

您不应该使用跨域请求。您应该在 Maps API 中使用地理编码器（因为如果您使用 Google 的数据，您无论如何都需要拥有地图）。

HTTP 接口是专门为服务器端使用而提供的。

# html - 我怎样才能删除顶部的空间？

> ID：10673674
> 
> 赞同：1
> 
> 时间：2012-05-20T13:07:19.130
> 
> 标签：html, css

我想删除页面顶部的空白区域。
填充 0 不起作用。
这必须适用于 IE8、9。

任何人请帮助我。

**html**

```
<body>
<div id="body">
    <div id="navigation">navigation</div>
    <div id="content">
        <div id="content-inner">content</div>
    </div>
    <div id="sidebar">sidebar</div>
</div>​
</body> 
```

**测试.css**

```
body {
      margin: 0;
      padding: 0;
  }

#navigation {
    float: left;
    width: 200px;
    margin-right: -200px;
    background-color: #FFCC66;
}

#content {
    float: left;
    width: 100%;
}

#content-inner {
    margin: 0 200px;
    background-color: #CC6633;
}

#sidebar{
    float: left;
    width: 200px;
    margin-left: -200px;
    background-color: #FF9966;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:10:32.193

你没有`body`0 填充的 div 吗？

***编辑：***

如果这`<div id="body">`是唯一`<body>`的孩子，我会认为它不需要？只需使用`<body>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:11:50.597

```
body, div {
      margin: 0;
      padding: 0;
  } 
```

# android - 将 Id 从 Button 传递到 timePicker 对话框

> ID：10673675
> 
> 赞同：1
> 
> 时间：2012-05-20T13:07:23.757
> 
> 标签：android

我有一个 timePicker 对话框，可以从不同的按钮调用。如何传递调用对话框的 ID？

这是相关的代码：

```
 //Time picker
    private int pHour;
    private int pMinute;
    static final int TIME_DIALOG_ID = 0;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /** Get the current time */
        final Calendar cal = Calendar.getInstance();
        pHour = cal.get(Calendar.HOUR_OF_DAY);
        pMinute = cal.get(Calendar.MINUTE);
} 
```

按钮的点击事件：

```
public void onClick(View v) {

 // Here I should pass the v.getId() to the dialog
 showDialog(TIME_DIALOG_ID);
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this,
                mTimeSetListener, pHour, pMinute, false);
    }
    return null;
}

/** Callback received when the user "picks" a time in the dialog */
private TimePickerDialog.OnTimeSetListener mTimeSetListener =
    new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            pHour = hourOfDay;
            pMinute = minute;
            //Here I should know from which v.getId() the dialog was called
        }
    }; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:24:47.413

您将不得不为您想要做的事情编写自己的选择器：

假设您必须为所有按钮调用相同的选择器，我建议您使用，`switch`声明`Button`

```
 public void onClick(View v) {

  switch(v.getId()){

  case R.id.Button1:
       showDialog(TIME_DIALOG_ID);
       break;

  case R.id.Button2: 
       showDialog(TIME_DIALOG_ID);
       break;
  }
} 
```

`Dialog`如果您想`Dialog`弹出不同的ID，您可以使用不同的 ID。

# java - 通过套接字手动发送 HTTP 请求

> ID：10673684
> 
> 赞同：52
> 
> 时间：2012-05-20T13:08:12.453
> 
> 标签：java, http, sockets, network-programming, http-headers

当我通过套接字发送正常的 HTTP 请求时，服务器没有以 OK 响应进行响应。我从 Firefox 复制了 HTTP 标头。这是代码：

```
Socket s = new Socket(InetAddress.getByName("stackoverflow.com"), 80);
PrintWriter pw = new PrintWriter(s.getOutputStream());
pw.print("GET / HTTP/1.1");
pw.print("Host: stackoverflow.com");
pw.flush();
BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
String t;
while((t = br.readLine()) != null) System.out.println(t);
br.close(); 
```

但是，这是我收到的回复：

```
HTTP/1.0 408 Request Time-out
Cache-Control: no-cache
Connection: close
Content-Type: text/html

<html><body><h1>408 Request Time-out</h1>
Your browser didn't send a complete request in time.
</body></html> 
```

我知道我可以通过使用来做到这一点`URL.openStream()`，但是为什么我手动发送HTTP请求时服务器无法识别？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-20T13:13:31.627

两件事情：

1.  您应该使用`println`而不是`print`将您的条目打印到单独的行中。
2.  HTTP 请求应以空行（[链接](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Client_request)）结束。所以添加`pw.println("");`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-20T13:18:42.810

您不遵循[HTTP RFC](http://pretty-rfc.herokuapp.com/RFC2616#message-types)。

*   标题行总是以 CR LF 结束（即`0x0d`加号`0x0a`）。
*   标题在第一个双换行符之后结束。在您的情况下，您不包含尾随换行符，因此服务器无法识别请求标头的结尾。

通常，您应该始终尝试使用现有的 HTTP 库。尽管 HTTP 看起来是一个简单的协议（并且与其他协议相比），但它具有相当严格的句法和语义规则。如果您尝试自己实现这一点，您应该已经阅读并理解了 RFC 2616（和相关）的相关部分。

可悲的是，已经有太多糟糕的 HTTP 实现不遵循标准，这让每个人的生活都很痛苦。省去麻烦，使用您选择的语言的 HTTP 库。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-05T12:24:59.927

真正有效的正确修复，它是跨平台的：

```
 pw.print("GET / HTTP/1.1\r\n");
    pw.print("Host: stackoverflow.com\r\n\r\n"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-24T17:11:16.293

如前面的答案所述，以下修复解决了该问题；

```
pw.print("GET / HTTP/1.1\n\r\n");
pw.print("Host: stackoverflow.com\n\r\n"); 
```

# java - 修复空指针错误

> ID：10673687
> 
> 赞同：0
> 
> 时间：2012-05-20T13:09:05.893
> 
> 标签：java, nullpointerexception, jframe, jpanel, superclass

我从一个有另一个类扩展它的类内部得到一个空指针。扩展它的类有一条`super`线，这条线导致它被设置为空......

具有空错误的类（启动器）：

```
private Frame frame;

public Launcher(Frame frame, int id) {
    this.frame = frame; 
```

得到错误的行（在启动器中）：

```
frame.ThreeD(); //THIS IS LINE 77 
```

在框架类中

```
public void ThreeDLauncher() {      
    new Launcher(this, 0);
} 
```

* * *

这是另一个创建空值的类：

```
public class Options extends Launcher {

public Options() {
    super(null, 1);
} 
```

所以我需要重新安排它，这样它就不会再创建这个 null 但它不会让我在那里什么都没有？它也无法更改 Launcher 类中设置的内容。

我怎样才能解决这个问题？

**更新** 这是详细的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ThreeD.Launcher$1.actionPerformed(Launcher.java:77)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6373)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6138)
    at java.awt.Container.processEvent(Container.java:2085)
    at java.awt.Component.dispatchEventImpl(Component.java:4735)
    at java.awt.Container.dispatchEventImpl(Container.java:2143)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4621)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4282)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4212)
    at java.awt.Container.dispatchEventImpl(Container.java:2129)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:679)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:638)
    at java.awt.EventQueue$1.run(EventQueue.java:636)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:652)
    at java.awt.EventQueue$2.run(EventQueue.java:650)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:649)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:14:38.067

看起来非空`Frame`是必不可少的。因此，`Options`类构造函数需要提供一个框架。也许是这样的：

```
public class Options extends Launcher {
    public Options(Frame frame) {
        super(frame, 1);
    }
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:24:18.993

Launcher 需要另一个不需要传入 Frame 的构造函数。

```
Public Launcher(int id) {
   this.frame = new Frame();
   this.id = id;
} 
```

这可能是 null 的来源。

# python - Key.from_path：应用引擎数据存储文档中令人困惑的 python 代码

> ID：10673688
> 
> 赞同：4
> 
> 时间：2012-05-20T13:09:13.303
> 
> 标签：python, google-app-engine

在此页面中：[https ://developers.google.com/appengine/docs/python/datastore/keyclass#Key_from_path](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key_from_path)

这部分：

> Key.from_path(kind, id_or_name, parent=none, namespace=None, **kwds) 从一个或多个实体键的祖先路径构建一个新的 Key 对象。
> 
> 路径表示实体的父子关系层次结构。路径中的每个实体都表示实体的种类，以及它的数字 ID 或它的键名。完整路径表示路径中最后出现的实体，其祖先（父母）作为前面的实体。
> 
> **例如，以下调用为类型为 Address 且数字 ID 为 9876 的实体创建一个键，其父对象是类型为 User 的实体，其命名键为“Boris”：**

**k = Key.from_path('用户', '鲍里斯', '地址', 9876)**

> 有关路径的更多信息，请参阅键和实体组。

函数调用和解释在这里没有意义，如果 Address 是“kind”参数，它应该先行吗？ID 9876 应该排在第二位吗？为什么他们是第三和第四？
而“父”是第三个参数，为什么这里有两个“父”参数（种类“用户”和名称“鲍里斯”），它们在参数列表中是第一个和第二个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:45:58.483

AppEngine 中的密钥是分层的，要获得完整的密钥，您需要传递所有祖先信息。

在本例中，有两种对象类型：用户和地址，用户是地址的父对象。对 from_path 的调用首先提供对象类型 User，其 id 为 Boris（id 可以是字符串名称或整数 id），该对象有一个 Address 类型的子对象，其 id 为 9876。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:18:19.830

从[Gae 源码](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/api/datastore_types.py&q=def%20from_path%20package%3ahttp://googleappengine%5C.googlecode%5C.com)`from_path`来看，该类的静态方法的签名`Key`是：

```
def from_path(*args, **kwds): 
```

接受非零偶数个位置参数，形式为`(kind, id or name, kind, id or name, etc. etc.)`：

```
if not args or len(args) % 2:
  raise datastore_errors.BadArgumentError(
      'A non-zero even number of positional arguments is required '
      '(kind, id or name, kind, id or name, ...); received %s' % repr(args)) 
```

如文档中所述，完整路径表示路径中最后出现的实体，其祖先（父母）作为前面的实体。

所以这个例子似乎是正确的；创建的密钥是地址*类型*为9876的*实体*的密钥，其父*类型*为用户，用户类型为 'Boris' 。*`id`*`key name`**

# c# - 在 WPF 中检索系统值

> ID：10673694
> 
> 赞同：1
> 
> 时间：2012-05-20T13:09:39.350
> 
> 标签：c#, wpf, xaml

这个值：

```
{Binding Source={x:Static shell:SystemParameters2.Current}, Path=WindowNonClientFrameThickness} 
```

通常`8,24,8,8`取决于您的操作系统设置。现在，我需要检索“顶部”值（即本例中的 24）并将其取反`-24`并将其用作边距：

```
<TabControl Margin="0,-24,0,0" /> 
```

但是我如何检索该值，将其取反，并将其放置在选项卡的上边距值中？

如果重要，我正在使用[https://nuget.org/packages/Microsoft.Windows.Shell](https://nuget.org/packages/Microsoft.Windows.Shell)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:11:27.433

我可能会创建一个[值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来构建`Margin`. （`Thickness`是一个结构，所以你不能只绑定`Top`属性）

# fortran - 我可以用数字调用fortran log函数吗？

> ID：10673701
> 
> 赞同：4
> 
> 时间：2012-05-20T13:10:39.520
> 
> 标签：fortran, gfortran

我从 gfortran 4.5 (OSX) 和 gfortran 4.7 (OSX) 的 log 函数中得到了一些奇怪的结果。

以下程序给出了意想不到的结果：

```
program test_log
  real(8) :: e = 2.7182818284590451_8
  write(*,*) 'log(2.7..)', log(2.7182818284590451_8)
  write(*,*) 'log(e)', log(e)
end program test_log 
```

我这样运行它：

```
gfortran-mp-4.5 ./test.f90  && ./a.out 
log(2.7..)   1.6249753165355076     
log(e)   1.0000000000000000 
```

我希望两者都是 1.0

*更新：*

```
program test_log
  real(8) :: e = 2.7182818284590451_8
  real(8) :: e2 = 2.7182818284590451D0
  real(8) :: e3 = exp(1.0)
  write(*,*) 'log(2.7..)', log(2.7182818284590451_8)
  write(*,*) 'log(e)', log(e)
  write(*,*) 'log(e2)', log(e2)
  write(*,*) 'log(e3)', log(e3)
end program test_log 
```

给

```
gfortran-mp-4.5 ./test.f90  && ./a.out 
 log(2.7..)   1.6249753165355076     
 log(e)   1.0000000000000000     
 log(e2)   1.0000000000000000     
 log(e3)   1.0188423211430429 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T13:39:38.610

```
program test_log
  integer, parameter :: Dbl_K = selected_real_kind (14)
  real(Dbl_K) :: e = 2.7182818284590451_Dbl_K
  real(Dbl_K) :: e2 = 2.7182818284590451D0
  real(Dbl_K) :: e3 = exp(1.0)
  real(Dbl_K) :: e4 = exp(1.0_Dbl_K)
  write(*,*) 'log(2.7..)', log(2.7182818284590451_Dbl_K)
  write(*,*) 'log(e)', log(e)
  write(*,*) 'log(e2)', log(e2)
  write(*,*) 'log(e3)', log(e3)
  write(*,*) 'log(e4)', log(e4)
end program test_log 
```

使用 selected_real_kind 而不是依赖 8 作为 double 的值。

在带有 Snow Leopard 的 MacBook Pro 上使用 gfortran 4.6 和 4.7 的输出是：

```
 log(2.7..)   1.0000000000000000     
 log(e)   1.0000000000000000     
 log(e2)   1.0000000000000000     
 log(e3)  0.99999996963214000     
 log(e4)   1.0000000000000000 
```

e3 的值与 1 不同，因为“exp(1.0)”具有 1 作为单精度实数。

在我的带有 Lion 的新 Mac Air 上，我得到了不正确的结果。我在这台机器上观察到 gfortran 的其他问题。

gfortran 4.6

```
 log(2.7..)   1.6249753165355076     
 log(e)   1.6249753165355076     
 log(e2)   1.6249753165355076     
 log(e3)   1.6438056251294211     
 log(e4)   1.6438055841322456 
```

gfortran 4.7

```
log(2.7..)   1.6249753165355076     
 log(e)   1.0000000000000000     
 log(e2)   1.0000000000000000     
 log(e3)   1.0188423211430429     
 log(e4)   1.0188422801197137 
```

所以问题不是唯一的。不确定它是什么。

PS 在 MacAir 编译器选项更改输出。我不确定哪个选项或选项很重要。

聚苯乙烯

```
program test2_log
  real:: e = 2.7182818284590451
  real:: e2 = 2.7182818284590451D0
  real:: e3 = exp(1.0)
  real:: e4 = exp(1.0)
  write(*,*) 'log(2.7..)', log(2.7182818284590451)
  write(*,*) 'log(e)', log(e)
  write(*,*) 'log(e2)', log(e2)
  write(*,*) 'log(e3)', log(e3)
  write(*,*) 'log(e4)', log(e4)
end program test2_log 
```

在 MacAir 上，gfortran 4.6 提供：

```
 log(2.7..)   1.3489696    
 log(e)  0.99999994    
 log(e2)  0.99999994    
 log(e3)   1.0188423    
 log(e4)   1.0188423 
```

使用编译器选项 -fdefault-real-8 它更改为

```
 log(2.7..)   1.6249753165355076     
 log(e)   1.0000000000000000     
 log(e2)   1.0000000000000000     
 log(e3)   1.0188422801197137     
 log(e4)   1.0188422801197137 
```

这是安装中的一些缺陷。

编辑：两台机器上的所有 gfortran 版本都来自 MacPorts。操作系统版本不同还是其他？适用于雪豹，不适用于狮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:00:28.560

首先，尝试更改`exp`to`dexp`和`log`to `dlog`?

如果这只是您的编译器没有在代码中一致地强制双精度的问题，那么请尝试在 gfortran 中强制双精度作为编译器标志：`gfortran -fdefault-real-8 foo.f90`

或通过放入宏

```
#define REAL DOUBLE PRECISION 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-14T05:35:56.970

我很确定您会继续调用自然对数。fortran 中的 Log() 本质上用于自然。

# node.js - 包管理器 NPM 和 node.js 完整性

> ID：10673702
> 
> 赞同：0
> 
> 时间：2012-05-20T13:10:44.610
> 
> 标签：node.js, open-source, package, npm

我刚刚在 NPM 上创建了一个新包（这非常简单），我对如何维护包的完整性很感兴趣。任何人都可以发布软件包的新版本，还是仅限于我的用户帐户？

如果任何人都可以发布对包的更改，如何监控他们的修改以确保项目仍然有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:13:44.280

你可以为一个 NPM 包管理多个所有者：

```
npm owner add username packagename
npm owner rm username packagename
npm owner ls packagename 
```

理想情况下，项目应该由团队在 github 等代码存储库中管理，然后任何用户都可以从 repo 更新包。只要版本号相应地增加，它应该很容易遵循。NPM 应该禁止更新相同的版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T21:58:06.883

由于每个包都有一个作者，我很确定只有作者才能更新他拥有的包。你可以在这里找到包的结构：http: [//isaacs.iriscouch.com/_utils/database.html ?registry](http://isaacs.iriscouch.com/_utils/database.html?registry)

# javascript - jquery position() 似乎并不完美

> ID：10673709
> 
> 赞同：1
> 
> 时间：2012-05-20T13:12:26.440
> 
> 标签：javascript, jquery, html, css

我正在创建一个 Web 应用程序，并且我有一些功能，用户可以将页面中的一些文本拖到他们想要的位置，如果他们单击保存按钮，下一页会在他们放置的位置显示相同的文本。它正在工作，但位置并不完美，与原来的位置略有不同。

我在这个 jsfiddle [http://jsfiddle.net/rkumarnirmal/AmEeH/中实现了这样的功能](http://jsfiddle.net/rkumarnirmal/AmEeH/)

您可以看到**#text-preview**是原始文本，您可以将其拖动到所需位置。删除后，我想将**#ttext-preview移动到删除****#text-preview**的相同位置。但是**#ttext-preview**位置没有改变。

我只想知道为什么该位置与我的 Web 应用程序中的原始文本放置位置略有不同。我尝试在 jsfiddle 中显示问题，但 jsfiddle 本身不起作用（我无法通过 jquery 动态更改**#ttext-preview的 css** **top 和 left**属性）。

 **有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:16:56.977

我认为这是因为您在拖动过程中使用的边框。当您将其更改为背景颜色时，它可以正常工作：http: [//jsfiddle.net/qvS2t/](http://jsfiddle.net/qvS2t/)

如果您想继续使用边框，我会在非悬停的 tekst 上添加一些额外的填充，并在悬停活动时将其替换为边框。这是一个显示如何执行此操作的 jsfiddle：http: [//jsfiddle.net/jdCAx/](http://jsfiddle.net/jdCAx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:15:37.533

1.  最初 .position() 获得相对于父级的坐标！

2.  另一件事可能是边框/边距/填充问题，这里有很多[http://api.jquery.com/position/](http://api.jquery.com/position/)！您正在使用一个奇怪的悬停边框，这可能会改变位置，因为当您将元素悬停在它上面时，该元素不再位于 0,0 上**

# iphone - 如何以编程方式设置“在推送时隐藏底栏”？

> ID：10673710
> 
> 赞同：7
> 
> 时间：2012-05-20T13:12:28.853
> 
> 标签：iphone, xcode, ios5

我正在从具有底部标签栏的 tableview 以编程方式构建视图。I would like this bottom bar to disappear when a table cell is selected. 我可以这样做：

```
self.tabBarController.tabBar.hidden = YES; 
```

但是视图的大小保持不变，就好像标签栏仍然存在一样。我看到，如果视图是在情节提要上构建的，并且通过设置复选标记“在推送时隐藏底部栏”，视图会调整大小以占据标签栏留下的空闲空间。我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T13:16:56.150

```
self.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:self.anotherViewController animated:animated]; 
```

以及您推动的特定视图控制器。使用此代码

```
 TheViewController* theController = [[TheViewController alloc] initWithNibName:@"TheViewController" bundle:nil];
    theController.hidesBottomBarWhenPushed = YES;
    [self.navigationController pushViewController:theController animated:YES];
    [theController release]; 
```

现在标签栏将被隐藏并自动显示。享受时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T22:07:49.733

使用`Swift`：

```
let viewController = CustomViewController()
viewController.hidesBottomBarWhenPushed = true

self.navigationController?.pushViewController(viewController, animated: true) 
```

# iphone - 如何修复保留计数为 +1 的泄漏对象？

> ID：10673713
> 
> 赞同：0
> 
> 时间：2012-05-20T13:13:13.287
> 
> 标签：iphone, objective-c, ios, retaincount

我在以下代码中有一个泄漏的对象。我如何解决它？我尝试添加一个 [apiViewController 版本]；但是当我分析应用程序时，我仍然得到：

![在此处输入图像描述](../Images/5592631b1c9bf62a29b654b19c39f562.png)

```
 if (idx == 2) {
        NSLog(@"you touched menu 2");

        APICallsViewController *apiViewController = [APICallsViewController alloc];
        [self.navigationController pushViewController:apiViewController animated:YES]; 
        //[apiViewController getFriendsCallAPIDialogFeed];
        [apiViewController getAppUsersFriendsUsing];

    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:17:57.667

您忘记了-init 和-release。

```
APICallsViewController *apiViewController = [[APICallsViewController alloc] init];
...
[apiViewController release]; 
```

您可能需要阅读[Objective-C 编程](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/objectivec/objc.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:26:58.650

首先，您需要 init，正如 hwaxxer 和 Justin Boo 所建议的那样。

其次，有几个人建议使用`autorelease`. 这`autorelease`是一个 deferred `release`，除非您需要，否则您通常不应该这样做（例如，您的方法需要将发布推迟到以后，以便它可以将对象返回给它的调用者）。因此，简而言之，仅`autorelease`在将对象返回给方法的调用者时使用，否则使用`release`. 在这种情况下，您应该使用`release`.

在这种特殊情况下，这并不重要（因为通过推送视图控制器，它无论如何都会被保留，并且在该视图从堆栈中弹出之前不会被释放），但是如果您要进行自己的内存管理（即不使用 ARC），值得采用良好实践，即`release`只要可以（例如在这种情况下）并且仅`autorelease`当您将对象返回给方法的调用者并因此必须推迟`release`.

第三，我建议您阅读并确保您了解[Advanced Memory Management](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。这为您提供了一些您真正需要了解的内存管理基本规则（例如，如果您创建它，则您拥有它，并且您必须释放它）。

第四，一旦你精通内存管理（并且只有在你这样做之后，因为它对真正了解正在发生的事情很有用），我建议认真考虑[过渡到 ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，因为你不必处理很多这样的事情愚蠢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:15:42.770

对于您分配/保留的每个对象，您有责任释放。

后

```
[apiViewController getAppUsersFriendsUsing]; 
```

放...

```
[apiViewController release]; 
```

# c++ - 如何在没有循环的情况下标准化opencv Mat的行？

> ID：10673715
> 
> 赞同：1
> 
> 时间：2012-05-20T13:13:27.673
> 
> 标签：c++, opencv, normalization

我是通过以下方式做到的

```
Mat temp, rp;    
for (int i = 0; i <= descriptors1.rows - 1; i++)
{
    normalize(descriptors1.row(i), temp);
    rp = normd1.rowRange(i, i+1);
    temp.copyTo(rp);
} 
```

上面的描述符 1 是一个 Mat。

但是使用循环非常耗时。有没有更好的方法来做到这一点？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:17:44.377

There is nothing wrong with loops. They're not slow in C++ unlike what you might have heard about Matlab! If this is going to be used in an extremely time sensitive application then you can optimize the loop to remove the `i <= descriptors1.rows - 1` check in each iteration. Using `temp` is also unnecessary, you can pass `normd1.rowRange` to `normalize` directly to save time and do it in just one line.

**Edit:** You can use this method `normalize(A.row(i), _OutputArray(B.ptr(i), B.cols))`, or the template version of `_OutputArray`. In the way you've written the loop in each iteration `descriptors1.rows - 1` should be evaluated as the compiler sees `rows` is not constant and most likely doesn't understand the functions in the loop do not change it. So I would change it to something like:

```
for (i = descriptors1.rows - 1; i >= 0; i--) 
```

Though, you need to check the code generated by your compiler to make sure it's optimized, and also consider loop unrolling. Google can find you a lot of material on optimizing loops if this is really the bottleneck of your code.

# python - 找不到特定版本的依赖库（Django/Pinax）

> ID：10673718
> 
> 赞同：0
> 
> 时间：2012-05-20T13:14:12.340
> 
> 标签：python, django, heroku, pinax

根据我的应用程序，我需要这个`django-microblogging==0.2.dev1`包，但是当我把它放在 requirements.txt 中时，它找不到这个特定的版本。

当我使用它可以找到的版本（旧版本）时，我的应用程序出现错误，我相信这是由于这个旧版本造成的。

我能够谷歌 0.2.dev1 版本并下载了我在这里找到的源代码：http: [//dist.pinaxproject.com/dev/django-microblogging/](http://dist.pinaxproject.com/dev/django-microblogging/)

我解压它并将以下内容放入我的 requirements.txt 文件中：`-I ./django-microblogging-0.2.dev1`

但现在我收到以下错误消息：

`ValueError: ('Expected version spec in', '-I ./django-microblogging-0.2.dev1', 'at', ' ./django-microblogging-0.2.dev1')`

我也试过`-I ./django-microblogging-0.2.dev1 == 0.2.dev1`

有谁知道我如何纠正这个错误？这完全难倒我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:00:10.370

# 更新

问题似乎是无法`django-microblogging-0.1.2`从 heroku 中的 virtualenv 卸载 old。尝试了[https://stackoverflow.com/a/9463068/165603](https://stackoverflow.com/a/9463068/165603)中的方法卸载以前的版本，它似乎工作。

特别是使用的命令是：

```
heroku config:add BUILDPACK_URL=git@github.com:heroku/heroku-buildpack-python.git#purge 
```

* * *

试着放

```
django-microblogging-0.2.dev1.tar.gz
# or
path_to/django-microblogging-0.2.dev1.tar.gz 
```

直接进去`requirements.txt`。当您使用相对路径时，它应该相对于您在其中运行 pip 的目录。

此外，您可以使用

```
django-microblogging==0.2.dev1 
```

# sql - iOS - 在 SKDatabase 中插入字典

> ID：10673722
> 
> 赞同：0
> 
> 时间：2012-05-20T13:15:12.337
> 
> 标签：sql, ios

我正在使用 SKDatabase 并使用 API 的 SKDatabase 来访问它。

我第一次能够成功地将字典插入表中，但是第二次之后我遇到了问题。

它一次又一次地重写第一个值，不允许写入新值，当我通过 for 循环插入多个字典时。

同时，它允许其他表的字典，这些表一直在为一个表插入一个字典。

我在这里放了一些代码。

```
for (int i = 0; i < [_contentArray count]; i++)
            {
                NSMutableDictionary *dictionary = [_contentArray objectAtIndex:i];
                [[PBDB instance].db insertDictionary:dictionary forTable:@"Daily"];
                NSLog(@"%@",dictionary);
            } 
```

它在控制台中打印正确的值，但在数据库中它只添加第一次输入的值而不是原始值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:51:45.810

也许您忘记为您的数据库实例充电

```
[[PBDB instance] chargeWithFileName:@"dbname.sqlitedb"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T06:18:43.190

为 ios sdk 下载 skdatabese 文件

[https://www.dropbox.com/s/zhw1x8mgyeatkvb/Skdatabase.zip?dl=0](https://www.dropbox.com/s/zhw1x8mgyeatkvb/Skdatabase.zip?dl=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T08:19:58.163

```
* Create object in appdelegate.h

    sk=[[SKDatabase alloc]init];
    NSString *db=@"db_name.sqlite";
    [sk initWithDynamicFile:db];

#pragma mark *** insert data

 NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
            [dict setObject:_txt_fname.text forKey:@"first_name"];
            [dict setObject:_txt_email.text forKey:@"email"];
            [app.sk insertDictionary:dict 
forTable:@"table_name"];//insert data into Database

#pragma mark :::Select Query

    NSString *queryString = [NSString stringWithFormat:@"select rowid,* from register_table"];
    arr_name=(NSMutableArray *)[app.sk lookupAllForSQL:queryString];
    NSLog(@"%@",arr_name);

#pragma mark *** Update data

    NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
        [dict setObject:_txt_fname.text forKey:@"first_name"];
        [dict setObject:_txt_email.text forKey:@"email"];
        [app.sk updateDictionary:dict forTable:@"table_name" where:[NSString stringWithFormat:@"rowid=%@",row_id]]; 
```

# android - 适用于 Android 三星 GalaxyTab 7.0 (SCH-I800) 的 StackOverflow

> ID：10673728
> 
> 赞同：0
> 
> 时间：2012-05-20T13:15:49.770
> 
> 标签：android

我有一个似乎为某些（全部？）SCH-I800 设备生成 StackOverflow 异常的应用程序。

堆栈跟踪是：

```
java.lang.StackOverflowError
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1409)
at android.app.ActivityThread.handleCreateService(ActivityThread.java:1930)
at android.app.ActivityThread.access$2500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:989)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

如您所见，那里没有一行我自己的应用程序。所以我不知道从哪里开始挖掘。它肯定会在几个 SCH-I800 设备上崩溃。它们主要是 Android 2.3.5，但至少有一个是 2.3.6。

每个设备都会多次崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:01:25.460

> 所以我不知道从哪里开始挖掘。

好吧，堆栈跟踪表明这发生在创建服务时：

```
at android.app.ActivityThread.handleCreateService(ActivityThread.java:1930) 
```

查看该方法的源代码，最有可能导致此堆栈跟踪的情况是服务的构造函数中存在问题。鉴于您的问题的性质，我假设您的代码正在其他设备上运行，因此在服务构建阶段有一些东西会因 SCH-I800 固件中的错误而绊倒。

# .net - ASP.NET MVC 总是重定向到登录页面

> ID：10673730
> 
> 赞同：1
> 
> 时间：2012-05-20T13:15:58.087
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership

我以自己的方式使用 ASP.NET 独立成员资格。为了实现它，我在用户登录我的系统时设置了 FormsAuthentication.SetAuthCookie，并且我还从 web.config 中删除了所有成员关系配置，如配置文件、角色和成员设置。

问题是我无法访问任何控制器。ASP.NET MVC 将我重定向到 /Account/Logon 页面，但即使我无法在 LogOn 操作方法中捕获断点，我也没有看到任何解析的内容。

究竟是什么导致了这种奇怪的行为？请询问您是否需要额外的信息来理解问题。

我的 web.config 设置如下。

```
<configuration>
  <configSections>

  </configSections>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="enableSimpleMembership" value="false" />
    <add key="autoFormsAuthentication" value="false" />
  </appSettings>
  <system.web>
    <globalization uiCulture="tr-TR" culture="tr-TR" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral,  PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral,       PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral,       PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral,           PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral,      PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules></httpModules>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"></modules>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.8.0" newVersion="4.0.8.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:05:29.520

因为您说您没有在 Logon Post 操作中遇到断点，所以建议您已`AuthoriseAttribute`设置 Logon Post 方法（或在 中全局设置`RegisterGlobalFilters`）。Logon Post 方法需要匿名访问，否则将无法接收用户名和密码。

我建议您从您的帐户控制器发布相关操作，如果这没有帮助，请发布您的 Global.asax RegisterGlobalFilters 方法的内容，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:19:48.313

就像 Richard 提到的那样，我认为本文还向您展示了如何将 AllowAnonymousAttribute 与 AuthoriseAttribute 应用于您的 MVC 项目。 [http://weblogs.asp.net/jgalloway/archive/2012/04/18/asp-net-mvc-authentication-global-authentication-and-allow-anonymous.aspx](http://weblogs.asp.net/jgalloway/archive/2012/04/18/asp-net-mvc-authentication-global-authentication-and-allow-anonymous.aspx)

# mysql - 测试 SQL 注入的正确方法

> ID：10673731
> 
> 赞同：3
> 
> 时间：2012-05-20T13:16:18.010
> 
> 标签：mysql, sql, database, security, cakephp

您好，我正在开发一个网站并进行一些渗透测试。它是用 CakePHP 构建的，它让我意识到：

> 如果您使用 CakePHP 的 ORM 方法（例如 find() 和 save()）和适当的数组表示法（即 array('field' => $value)）而不是原始 SQL，CakePHP 已经保护您免受 SQL 注入。

但是，我不确定要在我的输入表单字段中输入哪些数据以测试 SQL 注入预防。

我有以下带有简单 VARCHAR 属性的表名称 -

```
 categories: name
 clients: address, county, country, name
 items: name
 statuses: name 
```

输入表单并提交的这条 SQL 语句是否是测试 SQL 注入尝试的正确方法？

```
DROP TABLE "categories"; 
```

在表单上提交后，进入数据库的值为：

```
DROP TABLE "categories"; 
```

我可以假设这意味着该网站已被保护免受 SQL 注入尝试，因为它没有删除我数据库中的类别表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:28:08.183

当您的代码未使用参数化查询时发生 SQL 注入攻击。[如何测试我的网站是否存在 SQL 注入攻击中的 SQL 注入工具？](https://stackoverflow.com/questions/190435/how-can-i-test-my-web-site-for-sql-injection-attacks).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:29:54.427

好问题，但答案太多了，无法作为答案。我建议进行一些搜索并阅读许多出现的网站以了解更多信息。

不错的工具列表：[http ://www.darknet.org.uk/tag/sql-injection-tool/](http://www.darknet.org.uk/tag/sql-injection-tool/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:47:41.873

请记住，几乎所有自动 sql 注入扫描工具都只能找到最简单的漏洞形式，而错过了该问题的大多数实际实例。

受过良好教育和经验丰富的人类攻击者/测试者总是会做得更好，并且会发现大量工具无法解决的 sqli 问题。

然而... SQL 注入是最简单的 webapp 漏洞修复之一。因此，如果您可以访问源代码，只需阅读它并确保它正确使用绑定参数或存储过程，并且永远不要通过将字符串附加在一起来构建 SQL 命令。如果你看到类似的东西

```
sql = 'select col from table where x=' + variable 
```

然后警钟应该响起。阅读和调整源代码几乎肯定会比尝试执行需要多年经验才能掌握的测试更快、更容易、更有效。

见[https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

# c - OpenMP time 和 clock() 给出两个不同的结果

> ID：10673732
> 
> 赞同：12
> 
> 时间：2012-05-20T13:16:19.493
> 
> 标签：c, openmp

我有通过 OpenMP 并行化的顺序代码。我已经输入了相应的编译指示并对其进行了测试。我通过检查在 main 函数中花费的时间来衡量性能增益。

奇怪的是通过`cpu_time()`和计算的经过时间`omp_get_wtime()`不同。为什么？

根据的经过时间`cpu_time()`类似于顺序时间。

计算开始前：

```
ctime1_ = cpu_time();
#ifdef _OPENMP
ctime1 = omp_get_wtime();
#endif 
```

计算结束后：

```
ctime2_ = cpu_time();
#ifdef _OPENMP
ctime2 = omp_get_wtime();
#endif 
```

cpu_time() 函数定义：

```
double cpu_time(void)
{
  double value;
  value = (double) clock () / (double) CLOCKS_PER_SEC;
  return value;
} 
```

打印结果：

```
printf("%f - %f seconds.\n", ctime2 - ctime1, ctime2_ - ctime1_); 
```

样本结果：

```
7.009537 - 11.575277 seconds. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-20T13:26:25.467

该`clock`函数测量 cpu 时间，即您在 CPU 上花费的时间，OMP 函数测量它在执行过程中经过的时间，这是两个完全不同的东西。

您的进程似乎在某处等待时被阻止。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-20T16:00:22.070

您观察到的结果对于任何并行应用程序来说都是一个完全有效的结果 -返回的所有线程的组合*CPU 时间*`clock()`通常超过测量的*挂钟时间*`omp_get_wtime()`，除非您的应用程序大部分时间处于休眠或等待状态。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-20T13:27:58.980

该`clock()`函数返回*CPU*时间，而不是*墙上*时间。相反，使用[`gettimeofday()`](http://linux.die.net/man/2/gettimeofday).

# delphi - 使用 Chromium 从 Delphi 6 直接访问由 jQuery autoSuggest 插件创建的值？

> ID：10673733
> 
> 赞同：0
> 
> 时间：2012-05-20T13:16:20.930
> 
> 标签：delphi, dom, autosuggest

我正在使用 jQuery AutoSuggest 插件：

[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

我想访问 AutoSuggest 插件从我的 Delphi 6 代码中累积的值。问题在于 AutoSuggest 插件在您执行提交操作之前临时存储累积值的方式。据我所知，它没有提供直接属性来从中获取累积值。相反，它操纵 DOM 树并创建一个隐藏的文本元素，其 ID 包含随机生成的数字后缀（根据 AutoSuggest 描述网页）。这是一个例子：

```
<input type="hidden" class="as-values" name="as_values_067" id="as-values-067" value="robotics,monkeys,"> 
```

请注意随机生成的 ID 属性后缀 (as-values-067)。

为了获取元素，以便我可以获取*value*属性并将累积的值带入我的 Delphi 6 代码中，我正在执行完整的 DOM 节点树扫描，以查找 AutoSuggest 使用原始 AutoSuggest 编辑框的 NAME 属性创建的可见节点元素（“editEvernoteTags”）：

然后我从 ID 属性中提取数字后缀（*上例中为 67*），然后使用附加到字符串“as-values”的那个值搜索隐藏的文本元素。这允许我使用Chromium 的 getElementById() 方法使用该 ID（上例中的*as-values-067* ）搜索隐藏的文本元素。

这显然有点混乱，我宁愿只在一次操作中获取累积值。有谁知道如何从 Delphi 代码中做到这一点？

# sql - SQL Server 2008 Express 日历表

> ID：10673735
> 
> 赞同：0
> 
> 时间：2012-05-20T13:16:25.720
> 
> 标签：sql, calendar

我有下表

```
event_ID      Int,
Start_Date    Date,
End_Date      Date, 
```

我想创建一个包含以下列的永久日历表

```
calender_ID,
Event_ID,
Event_Date, 
```

我希望列出和`Event_Date`之间的所有日期`Start_date``End_Date`

我在 Visual Studio 中使用 SQL Server Express 2008

感谢您的帮助

土耳其浴室

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:10:09.157

首先，创建一个类似于此 SO 线程中提到的“ExplodeDates”的函数：[https ://stackoverflow.com/questions/1378593/get-a-list-of-dates-between-two-dates-using-a-function/1378788 #1378788](https://stackoverflow.com/questions/1378593/get-a-list-of-dates-between-two-dates-using-a-function/1378788#1378788 "使用函数获取日期列表")

接下来，在您计划保持事件和日历表同步的存储过程/触发器中，您基本上只需执行以下操作：

```
DELETE FROM CalenderTable WHERE Event_ID=@EventID

INSERT INTO CalenderTable (Event_ID, Event_Date)
SELECT Event.Event_ID, Dates.TheDate
FROM Event
CROSS APPLY ExplodeDates(Event.Start_Date, Event.End_Date) Dates
WHERE Event.Event_ID=@EventID 
```

我在这台机器上没有 SQL，所以我没有机会测试它。它可能需要一些调整，但这至少应该让你走上一条可行的道路......

# c - 如何检查点（x，y）是否在笛卡尔坐标系中的多边形内？

> ID：10673740
> 
> 赞同：14
> 
> 时间：2012-05-20T13:16:59.633
> 
> 标签：c, algorithm, math, polygon, computational-geometry

> **这个问题在这里已经有了答案：**
> [Point in Polygon aka hit test](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)
> [C# Point in polygon](https://stackoverflow.com/questions/4243042/c-sharp-point-in-polygon)

给定一个在笛卡尔坐标系中用 N 线方程表示的随机多边形，是否有任何标准公式用于检查点 (x,y) 的成员资格？

简单的解决方案是获取所有线公式并检查点 X 是否在这条线的下方、该线的上方和另一条线的右侧等。但这可能会很乏味。

我应该注意，多边形可以是具有任意数量的边的任何形状，并且可以是凹的或凸的。

为方便起见，我已经添加了这些实用功能：

```
float slope(CGPoint p1, CGPoint p2)
{
    return (p2.y - p1.y) / (p2.x - p1.x);
}

CGPoint pointOnLineWithY(CGPoint p, float m, float y)
{
    float x = (y - p.y)/m + p.x;
    return CGPointMake(x,y);
}

CGPoint pointOnLineWithX(CGPoint p, float m, float x)
{
    float y = m*(x - p.x) + p.y;
    return CGPointMake(x, y);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-20T13:21:02.593

如果您有顶点，则可以计算测试点与构成多边形的每对点之间的角度之和。如果它是 2*pi，那么它是一个内点。如果它是0，那么它是一个外点。

一些代码：

```
 typedef struct {
   int h,v;
} Point;

int InsidePolygon(Point *polygon,int n,Point p)
{
   int i;
   double angle=0;
   Point p1,p2;

   for (i=0;i<n;i++) {
      p1.h = polygon[i].h - p.h;
      p1.v = polygon[i].v - p.v;
      p2.h = polygon[(i+1)%n].h - p.h;
      p2.v = polygon[(i+1)%n].v - p.v;
      angle += Angle2D(p1.h,p1.v,p2.h,p2.v);
   }

   if (ABS(angle) < PI)
      return(FALSE);
   else
      return(TRUE);
}

/*
   Return the angle between two vectors on a plane
   The angle is from vector 1 to vector 2, positive anticlockwise
   The result is between -pi -> pi
*/
double Angle2D(double x1, double y1, double x2, double y2)
{
   double dtheta,theta1,theta2;

   theta1 = atan2(y1,x1);
   theta2 = atan2(y2,x2);
   dtheta = theta2 - theta1;
   while (dtheta > PI)
      dtheta -= TWOPI;
   while (dtheta < -PI)
      dtheta += TWOPI;

   return(dtheta);
} 
```

资料来源： http: [//paulbourke.net/geometry/insidepoly/](http://paulbourke.net/geometry/insidepoly/)

其他地方你可以看看： [http ://alienryderflex.com/polygon/](http://alienryderflex.com/polygon/)

[http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html)

[http://sidvind.com/wiki/Point-in-polygon:_Jordan_Curve_Theorem](http://sidvind.com/wiki/Point-in-polygon:_Jordan_Curve_Theorem)

# mysql - 根据查询字符串中“@”位置的主要时间差异 - 为什么？

> ID：10673742
> 
> 赞同：3
> 
> 时间：2012-05-20T13:17:02.717
> 
> 标签：mysql, sql, performance

我正在一个由数百万条记录填充的大表上运行 SQL 查询。WHERE 条件是一系列 LIKE，将输入与一些文本字段进行比较。

以下是针对各种输入运行查询所需的时间（平均每个运行 3-5 次）。

```
* 'aaaa' : ~3.1 seconds
* 'aaa@' : ~2 seconds
* 'aa@a' : ~9.7 seconds
* 'a@aa' : ~9.7 seconds
* 'aa@a' : ~9.8 seconds 
```

所有查询都返回了相似数量的结果 (12-13)。我用其他字母（非重复等）而不是“a”检查了这个，结果或多或少是一样的。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:48:02.900

正如上面评论中提到的，它更有可能与表中这些数据的分布有关。尝试在表上创建索引。我无法为您指出正确的索引和方法，但如果您发布您的架构等，我很乐意为您提供帮助。

其次，点赞从来都不是好事，你不能在应用程序代码上改进它并运行equals代替吗？

# android - Robotium Sdk v17 在 Emulator 或 Junit 上没有出现测试结果

> ID：10673746
> 
> 赞同：1
> 
> 时间：2012-05-20T13:17:58.293
> 
> 标签：android, android-activity, robotium

我的 SDK 是 v17，这段代码没有任何错误。**但是在 emulator 或 Junit 上没有显示**。

只是在控制台上显示这个：

这是否意味着我的代码测试成功？

```
[2012-05-20 17:26:08 - MobilEpostaUyg-Test] Installing MobilEpostaUyg-Test.apk...
[2012-05-20 17:26:15 - MobilEpostaUyg-Test] Success!
[2012-05-20 17:26:15 - MobilEpostaUyg-Test] Project dependency found, installing: MobilEpostaUyg
[2012-05-20 17:26:17 - MobilEpostaUyg] Application already deployed. No need to reinstall.
[2012-05-20 17:26:17 - MobilEpostaUyg-Test] Launching instrumentation android.test.InstrumentationTestRunner on device emulator-5554
[2012-05-20 17:26:18 - MobilEpostaUyg-Test] Collecting test information
[2012-05-20 17:26:21 - MobilEpostaUyg-Test] Sending test information to Eclipse
[2012-05-20 17:26:21 - MobilEpostaUyg-Test] Running tests...
[2012-05-20 17:26:23 - MobilEpostaUyg-Test] Test run finished 
```

测试代码：

```
package com.mobil.eposta.test;

import android.test.ActivityInstrumentationTestCase2;

import com.jayway.android.robotium.solo.Solo;
import com.mobil.eposta.MobilEpostaUygActivity;

public class LoginButtonTest extends
        ActivityInstrumentationTestCase2<MobilEpostaUygActivity> {

    private Solo solo;

    public LoginButtonTest() {
        super("com.mobil.eposta" ,MobilEpostaUygActivity.class );
        // TODO Auto-generated constructor stub
    }

    protected void setUp() throws Exception {
        super.setUp();
        solo = new Solo(getInstrumentation() ,  getActivity());
    }

    public void loginTest()
    {
        solo.assertCurrentActivity("First Activity", MobilEpostaUygActivity.class );
    }
} 
```

# session - cakePHP setFlash 找不到元素

> ID：10673751
> 
> 赞同：0
> 
> 时间：2012-05-20T13:18:57.023
> 
> 标签：session, cakephp

我正在尝试为我的 setFlash 设置一个成功元素。

当我做：

```
 $this->Session->setFlash("Message"); 
```

但是，它完美地显示了消息，带有红色背景。经过调查，我可以将元素更改为“成功”，这应该显示一个漂亮的绿色背景，但是当我这样做时：

```
 $this->Session->setFlash("Message","success"); 
```

我得到：

```
 Element Not Found: Elements\success.ctp 
```

我已经验证并且在我的 app/View/Elements/ 文件夹中肯定有一个 success.ctp 文件。

我正在使用 cakePHP 2.1

** 编辑 **

这可能是一个路由错误，因为我还发现有时在重定向时它会将示例用户/用户/登录重定向到用户/登录/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:38:13.837

1.  将所需的布局文件移动到 app/views/elements (success.ctp)
2.  将 $content_for_layout 变量重命名为 $message

[源代码](http://book.cakephp.org/1.3/view/1561/Migrating-from-CakePHP-1-2-to-1-3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:58:54.103

根据@Learner 的建议，正确的代码（在 2.1 中对我来说）是：

```
 $this->Session->setFlash('Message.','default',array('class'=>'success')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T13:11:58.463

删除 $this->Session->setFlash('Book is Updated!', true);

# c# - .NET 动态方法。最棒的表演

> ID：10673756
> 
> 赞同：4
> 
> 时间：2012-05-20T13:20:11.493
> 
> 标签：c#, .net, optimization, dynamic, .net-4.0

动态创建动态方法的最佳方法是什么，但如果它是在 VS 中编译的，它的效率是否相同？

假设我想创建一个计算器。用户输入公式说 A + B / C * 0.5；

我想要的是能够创建类似 Func 的东西，它将接受 A、B、C 作为双参数并返回双精度。

参数类型和返回类型总是双精度。参数的数量是可变的，但至少有一个。

这些公式可以经常更改/添加。一旦公式“编译”，它将成为低延迟代码的一部分，可以调用 1000 次/秒。

我需要找到简单可靠的方法来构建它，但它**必须具有静态构建和优化方法的精确性能质量**。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T13:19:10.237

我在这个（[生成动态方法](http://blogs.msdn.com/b/csharpfaq/archive/2009/09/14/generating-dynamic-methods-with-expression-trees-in-visual-studio-2010.aspx)）上找到了 Microsoft 博客，并比较了静态方法、编译表达式树和 IL 注入之间的性能。

这是代码：

```
 static void Main(string[] args)
    {
        double acc = 0;

        var il = ILFact();
        il.Invoke(1);

        var et = ETFact();
        et(1);

        Stopwatch sw = new Stopwatch();

        for (int k = 0; k < 10; k++)
        {
            long time1, time2;

            sw.Restart();

            for (int i = 0; i < 30000; i++)
            {
                var result = CSharpFact(i);
                acc += result;
            }

            sw.Stop();

            time1 = sw.ElapsedMilliseconds;

            sw.Restart();

            for (int i = 0; i < 30000; i++)
            {
                double result = il.Invoke(i);
                acc += result;
            }

            sw.Stop();

            time2 = sw.ElapsedMilliseconds;

            sw.Restart();

            for (int i = 0; i < 30000; i++)
            {
                var result = et(i);
                acc += result;
            }

            sw.Stop();

            Console.WriteLine("{0,6} {1,6} {2,6}", time1, time2, sw.ElapsedMilliseconds);
        }

        Console.WriteLine("\n{0}...\n", acc);
        Console.ReadLine();
    }

    static Func<int, int> ILFact()
    {
        var method = new DynamicMethod(
        "factorial", typeof(int),
        new[] { typeof(int) }
        );

        var il = method.GetILGenerator();
        var result = il.DeclareLocal(typeof(int));
        var startWhile = il.DefineLabel();
        var returnResult = il.DefineLabel();

        // result = 1

        il.Emit(OpCodes.Ldc_I4_1);
        il.Emit(OpCodes.Stloc, result);

        // if (value <= 1) branch end

        il.MarkLabel(startWhile);
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Ldc_I4_1);
        il.Emit(OpCodes.Ble_S, returnResult);

        // result *= (value--)

        il.Emit(OpCodes.Ldloc, result);
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Dup);
        il.Emit(OpCodes.Ldc_I4_1);
        il.Emit(OpCodes.Sub);
        il.Emit(OpCodes.Starg_S, 0);
        il.Emit(OpCodes.Mul);
        il.Emit(OpCodes.Stloc, result);

        // end while

        il.Emit(OpCodes.Br_S, startWhile);

        // return result

        il.MarkLabel(returnResult);
        il.Emit(OpCodes.Ldloc, result);
        il.Emit(OpCodes.Ret);

        return (Func<int, int>)method.CreateDelegate(typeof(Func<int, int>));
    }

    static Func<int, int> ETFact()
    {
        // Creating a parameter expression.
        ParameterExpression value = Expression.Parameter(typeof(int), "value");

        // Creating an expression to hold a local variable. 
        ParameterExpression result = Expression.Parameter(typeof(int), "result");

        // Creating a label to jump to from a loop.
        LabelTarget label = Expression.Label(typeof(int));

        // Creating a method body.
        BlockExpression block = Expression.Block(

        // Adding a local variable.
        new[] { result },

        // Assigning a constant to a local variable: result = 1
        Expression.Assign(result, Expression.Constant(1)),

        // Adding a loop.
        Expression.Loop(

        // Adding a conditional block into the loop.
        Expression.IfThenElse(

        // Condition: value > 1
        Expression.GreaterThan(value, Expression.Constant(1)),

        // If true: result *= value --
        Expression.MultiplyAssign(result,
        Expression.PostDecrementAssign(value)),

        // If false, exit from loop and go to a label.
        Expression.Break(label, result)
        ),

        // Label to jump to.
        label
        )
        );

        // Compile an expression tree and return a delegate.
        return Expression.Lambda<Func<int, int>>(block, value).Compile();
    }

    static int CSharpFact(int value)
    {
        int result = 1;
        while (value > 1)
        {
            result *= value--;
        }

        return result;
    } 
```

这是在 i7-920 上进行的 3 次运行。构建 - 发布 x64

```
583    542    660
577    578    666
550    558    652
576    575    648
570    574    641
560    554    640
558    551    650
561    551    666
624    638    683
564    581    647

-3778851060...

482    482    557
489    490    580
514    517    606
541    537    626
551    524    641
563    555    631
552    558    644
572    541    652
591    549    652
562    552    639

-3778851060...

482    482    560
507    503    591
525    543    596
555    531    609
553    556    634
540    552    640
579    598    635
607    554    639
588    585    679
547    560    643

-3778851060... 
```

平均值：554 549 634

静态 vs IL - **IL 快 1%** (!) 不知道为什么

静态 vs ET -**静态比表达式树快 14%**

* * *

**EDIT (Feb 2014)** : I just ran the code above (with very slight modifications) on .NET 4.5 and faster CPU and got the new sets of results: **Method / ET - 9%, Method / IL - 4%**

Hence the previous results are not valid any more - **the static method call is always faster**..

*Not sure whether it is new hardware (*i7-3820*) or new .NET or perhaps I did something wrong in the old test.*

*Another interesting result is that in **32-bit** the very same code shows **absolutely NO difference** between the 3.*

```
Method IL     ET    
--------------------
368    382    399
367    382    399
367    382    399
367    382    400
367    383    400
367    382    399
367    383    399
367    382    399
367    382    399
367    383    400
367    382    399
367    382    399
367    382    399
367    382    399
367    383    400
367    382    400
367    383    399
367    383    400
367    382    399
367    382    400

-7557702120...

--------------------
367.05 382.30 399.35 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T13:21:57.130

您应该创建`Compile()`一个表达式树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:37:40.897

这是一个使用编译代码的动态计算器的示例。源是可用的。

[http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-19T14:14:55.933

It depend on usage and optimization. Benchmark can lie if your tests are not perfect. You have to know the rules to make it right.

The first rules

*   static method can be optimized at compile time and can be inlined.
*   IL emitted method (DynamicMethod) can be faster in term of pure IL because you can optimized like you want (if you are able to do it better than standard optimizer)
*   Expression Tree is based on DynamicMethod but you can't optimize it manually.

The second rules

*   Performance is represented by call mechanism and pure execution of method.
*   call method using delegate means overhead
*   inlining suppress call mechanism.
*   DynamicMethod can only be inline in other DynamicMethod
*   DynamicMethod and Expression Tree are most of time called using delegate.
*   Delegate to instance method is faster than delegate to static method.

keep in mind :

*   static method is often faster for methods with small body.
*   DynamicMethod can be faster if call mechanism is not the pitfall.
*   Expression Tree cannot be faster than DynamicMethod but can sometimes (rarely) be faster than static method depending on how you "express it".

conclusion :

performance depend on context. keep using static method if it is possible. Performance can change if optimizer change.

# memory-leaks - 如何找到记忆吞噬程序

> ID：10673759
> 
> 赞同：0
> 
> 时间：2012-05-20T13:20:40.527
> 
> 标签：memory-leaks

我偶尔会遇到这样的问题，在启动我的 kubuntu 10.04 后，显然有一个程序占用了我的内存。重启后，问题就解决了。在几分钟内被占用的可用空间约为 12 GB。有没有办法检测可能是哪个程序？其次，这个问题是否可以通过更新 Kubuntu 12.04 来解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:31:35.070

您可以使用“top”命令来检查每个进程的内存消耗。您需要从终端启动应用程序，一旦到达那里，您可以通过按消耗的内存量对进程进行排序来更容易地发现罪魁祸首（您需要按 F，然后选择要用于排序的确切字段过程）。

通过这样做并收集更多信息，您甚至可以尝试通过打开一个错误来解决问题，以便 kubuntu 开发人员知道它（如果他们还没有意识到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:32:37.240

首先，我认为您的硬件驱动程序可能有问题。二、可以使用命令top查看内存占用详情。第三，如果你对 Linux 有一定的经验，你可以从 /proc/meminfo 目录中找到一些有用的信息。

这就是我遇到问题时要做的一切。

也许升级系统可以解决问题，但我不确定。

# mysql - 'where 子句'中的未知列'x'

> ID：10673766
> 
> 赞同：1
> 
> 时间：2012-05-20T13:21:29.610
> 
> 标签：mysql, delphi

我正在使用 MySql ，德尔福。下面的代码我有什么问题？

我在 where 子句中得到“未知列 'x'”错误 --> 'where 子句'中的未知列 '_code_ehda_konandeh' 我非常需要它。我必须在两天后做这个项目......

* * *

```
 DELIMITER $$

USE `bimarestan`$$

DROP PROCEDURE IF EXISTS `Save_Ehda_Konande`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `Save_Ehda_Konande`(
IN _code_ehda_konandeh VARCHAR(50),
IN _tarikh_moarefi VARCHAR(50),
IN _tarikh_tashkil_parvandeh VARCHAR(50),
IN _name VARCHAR(50),
IN _name_khanevadegi VARCHAR(50),
IN _name_pedar VARCHAR(50),
IN _tarikh_tavalod VARCHAR(20),
IN _tahsilat VARCHAR(50),
IN _vaziyat_taahol VARCHAR(50),
IN _noe_bimeh VARCHAR(50),
IN _gorooh_khoon VARCHAR(50),
IN _rezayat_dahandeh VARCHAR(50),
IN _shoghl VARCHAR(50),
IN _address VARCHAR(50),
IN _telphone VARCHAR(50),
OUT _out INT)
BEGIN
IF LTRIM(RTRIM(_code_ehda_konandeh))<>'' THEN
 BEGIN
 SET _out = 0;
  IF NOT EXISTS(SELECT * FROM bimar WHERE `_code_ehda_konandeh` = `code_ehda_konandeh`) THEN
    INSERT INTO `ehda_konandeh` (
code_ehda_konandeh,
tarikh_moarefi,
tarikh_tashkil_parvandeh,
NAME,
name_khanevadegi,
name_pedar,
tarikh_tavalod,
tahsilat,
vaziyat_taahol,
noe_bimeh,
gorooh_khoon,
rezayat_dahandeh,
shoghl,
address,
telphone)
    VALUES(
_code_ehda_konandeh,
_tarikh_moarefi,
_tarikh_tashkil_parvandeh,
_name,
_name_khanevadegi,
_name_pedar,
_tarikh_tavalod,
_tahsilat,
_vaziyat_taahol,
_noe_bimeh,
_gorooh_khoon,
_rezayat_dahandeh,
_shoghl,
_address,
_telphone
);
  ELSE
    SET _out = 1;  
  END IF;
    END; 
END IF;
END$$

DELIMITER ; 
```

* * *

在 MySql 上运行的 Stored Proc 没有任何问题，但是当我想向它发送 delphi 参数时，我得到了那个错误！

这是我的德尔福代码：

```
if flag_new_edit = 1 then
  sp_sabt.StoredProcName := 'Save_Ehda_Konande'
 else
  sp_sabt.StoredProcName := 'Edit_Ehda_Konande';
   With sp_sabt Do
   Begin
   ParamByName('_code_ehda_konandeh').Value := Trim(txt_code_ehda_konande.Text);
   ParamByName('_tarikh_moarefi').Value := Trim(txt_tarikh_tavalod.Text);
   ParamByName('_tarikh_tashkil_parvandeh').Value := Trim(txt_name_khanevadegi.Text);
   ParamByName('_name').Value := Trim(txt_name.Text);
   ParamByName('_name_khanevadegi').Value := Trim(txt_name_khanevadegi.Text);
   ParamByName('_name_pedar').Value := Trim(txt_name_pedar.Text);
   ParamByName('_tarikh_tavalod').Value := Trim(txt_tarikh_tavalod.Text);
   ParamByName('_tahsilat').Value := Trim(cmb_tahsilat.Text);
   ParamByName('_vaziyat_taahol').Value := Trim(cmb_vaziyat_taahol.Text);
   ParamByName('_noe_bimeh').Value := Trim(cmb_noe_bime.Text);
   ParamByName('_gorooh_khoon').Value := Trim(cmb_gorooh_khoon.Text);
   ParamByName('_rezayat_dahandeh').Value := Trim(txt_rezayat_dahande.Text);
   ParamByName('_shoghl').Value := Trim(txt_shoghl.Text);
   ParamByName('_address').Value := Trim(txt_adress.Text);
   ParamByName('_telphone').Value := Trim(txt_tel.Text);
   ExecProc;
End; 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:28:07.747

```
 IF NOT EXISTS(SELECT * FROM bimar WHERE `_code_ehda_konandeh` = `code_ehda_konandeh`) THEN
                                          ^---                ^--- 
```

删除指示的引号。反引号用于“转义”保留字。它们还强制 MySQL 将这些转义词视为字段/表名。您的参数不是字段，因此 MySQL 被迫如此曲解它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T15:37:46.927

尽管我指出了您的 sql 代码中可能出现的错误，但我想提供更多详细信息。

*`That Stored Procedure Runing at MySql WithOut any problems but when send Delphi parameters to sp , i get that Error !!`*但你错了。

在[***`a known bug`***](http://bugs.mysql.com/bug.php?id=26394)您的程序创建中有。由于*引发了运行时异常*的原因。
*`Semantics of Stored procedure code is not checked at CREATE time. At runtime, undeclared variables are detected, and an error message is generated for each reference to an undeclared variable. However, SP's seem to believe any reference denotes a column, even though the syntactic context excludes that. This leads to a very confusing error message in case the procedure.`*

一个标准的测试示例如下所示：

```
mysql> drop procedure proc_test;
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter //
mysql> CREATE PROCEDURE proc_test()
    -> BEGIN
    ->     select current_day;
    -> END
    -> //
Query OK, 0 rows affected (0.00 sec) 
```

在这里你可以理解程序编译忽略了什么`current day`是什么。

```
mysql> delimiter ;
mysql> call proc_test();
ERROR 1054 (42S22): Unknown column 'current_day' in 'field list'
mysql> 
```

有了这个你应该明白这*`That Stored Procedure Runing at MySql WithOut any problems ...`*是不正确的。

* * *

快速修复您的查询将解决问题。你提到了那个*`I defined input parameters with _ prefix. I don't know waht i must do !`*。如果这是真的，那么
改变

```
SELECT * FROM bimar WHERE `_code_ehda_konandeh` = `code_ehda_konandeh` 
```

到

```
SELECT * FROM bimar WHERE `code_ehda_konandeh` = _code_ehda_konandeh 
```

它应该可以工作。这里我假设`code_ehda_konandeh`也是一列表`bimar`格。

# javascript - 选择所有复选框在 Internet Explorer 9 上不起作用

> ID：10673769
> 
> 赞同：1
> 
> 时间：2012-05-20T13:22:23.743
> 
> 标签：javascript, internet-explorer, checkbox

我试图在单击全选/取消全选复选框时**选中****/取消选中所有**复选框，如下所示：

```
onclick="selectAll(document.getElementsByName('myForm:checkboxes'));" 
```

和JS函数：

```
function selectAll(checkboxes)
        {       
                for(var i in checkboxes)
                checkboxes[i].checked = true;
        }

function deselectAll(checkboxes)
            {       
                    for(var i in checkboxes)
                    checkboxes[i].checked = false;
            } 
```

和 HTML：

```
<input type="checkbox" value="15" name="myForm:checkboxes" id="myForm:checkboxes3:_1"> 
```

此代码在 Firefox 中运行良好，但在 Internet Explorer 9 中无法运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:43:27.897

发表评论作为答案：

一个`for..in`循环，来自 Mozilla Developer Network 的文档：

> for...in 循环以任意顺序迭代对象的属性

由于您`checkboxes`是 nodeList，而不是对象，因此`for`应该使用循环。

因此，请`for...in`使用：

```
for (var i=0,len=checkboxes.length;i<len;i++){
    // do stuff
} 
```

参考：

*   [`for (){/*...*/}`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for).
*   [`for..in`循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)。

# c# - ListView 中的多行文本

> ID：10673770
> 
> 赞同：0
> 
> 时间：2012-05-20T13:22:25.533
> 
> 标签：c#, wpf, xaml, listview, listviewitem

我正在尝试在 listView 中获取多行我目前有以下 XAML：

```
 <ListView x:Name="listTasks" Margin="0,0,1.5,0" Background="{x:Null}" BorderBrush="{x:Null}" BorderThickness="0" Foreground="White" ItemsSource="{Binding TasksCollection}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto">
        <ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
            <Style.Triggers>
                    <Trigger Property="IsSelected"
                                     Value="True">
                            <Setter Property="Background"
                                            Value="{x:Null}" />
                            <Setter Property="BorderBrush"
                                            Value="{x:Null}" />
                    </Trigger>
                    <Trigger Property="IsMouseOver"
                                     Value="True">
                            <Setter Property="Background"
                                            Value="{x:Null}" />
                            <Setter Property="BorderBrush"
                                            Value="{x:Null}" />
                    </Trigger>
            </Style.Triggers>
            <Setter Property="Height" Value="50px" />
            <Setter Property="Focusable" Value="false" />
    </Style>
</ListView.ItemContainerStyle>
        <ListView.Resources>
                <Style x:Key="CustomHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
                    <Setter Property="Visibility" Value="Collapsed" />
                </Style>
            </ListView.Resources>
            <ListView.View>
                <GridView ColumnHeaderContainerStyle="{DynamicResource CustomHeaderStyle}">
                    <GridViewColumn Header="">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                <TextBlock.Text>
                                    <MultiBinding  StringFormat=" Module: {0} Conditions: {1}|{2}|{3} for {4} minutes">
                                        <Binding Path="Module"/>
                                        <Binding Path="FirstValue"/>
                                        <Binding Path="SecondValue"/>
                                        <Binding Path="ThirdValue"/>
                                        <Binding Path="Minutes"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                                </TextBlock>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView> 
```

这会输出如下内容：

![在此处输入图像描述](../Images/3ee6afbc50a40f84fffd2640f440d9a0.png)

我想要实现的是这样的（忽略不同颜色的背景）：

![在此处输入图像描述](../Images/dc1a01f454bc633172996b8af9469039.png)

我似乎无法思考如何做到这一点，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:27:47.077

您可以使用垂直`StackPanel`来将一系列`TextBlock`元素放在另一个之上：

```
<DataTemplate>
   <StackPanel>
      <TextBlock Text="{Binding Module, StringFormat='Module: {0}'}"/>
      <TextBlock Text="{Binding FirstValue, StringFormat='Module: {0}'}"/>
      ...
   </StackPanel>
</DataTemplate> 
```

或者您可以在一个“TextBlock”中格式化所有内容：

```
<DataTemplate>
   <TextBlock>
      <Run Text="Module: "/><Run Text="{Binding Module}"/><LineBreak/><Run Text="Conditions: "/><Run Text="{Binding FirstValue}"/><LineBreak/>
      ...
   </TextBlock>
</DataTemplate> 
```

# r - aaply：为什么 aaply(data,2,class) 为所有列返回“data.frame”？

> ID：10673771
> 
> 赞同：2
> 
> 时间：2012-05-20T13:22:38.197
> 
> 标签：r, plyr

我有一个关于`aaply`. 我想检查哪一列`is.numeric`，但返回值`aaply`有点出乎意料。下面是示例代码。为什么我得到`"data.frame"`所有列（这解释了为什么即使`is.numeric`是`FALSE`带有数字向量的列）？

谢谢！

```
data=data.frame(str=rep("str",3),num=c(1:3))

is.numeric(data[,1])
# FALSE
is.numeric(data[,2])
# TRUE

aaply(data,2,is.numeric)
# FALSE FALSE

aaply(data,2,class)
# "data.frame" "data.frame" 
```

编辑：在其他情况下，这会产生警告消息：

```
aaply(data,2,mean)

# 1: mean(<data.frame>) is deprecated.
#    Use colMeans() or sapply(*, mean) instead. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:45:19.643

这是有效的方式`aaply`，您甚至可以使用`identity`来查看传递给每个函数调用的内容，一个代表每一列的 data.frame `data`：

```
aaply(data, 2, identity)
# $num
#   num
# 1   1
# 2   2
# 3   3
# 
# $str
#   str
# 1 str
# 2 str
# 3 str 
```

因此，使用`aaply`您想要的方式，您必须使用一个函数来提取每个 data.frame 的第一列，例如：

```
aaply(data, 2, function(df)is.numeric(df[[1]]))
#   num   str 
#  TRUE FALSE 
```

但这样做似乎要容易得多：

```
sapply(data, is.numeric)
#   str   num 
# FALSE  TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:43:00.123

基本原因是您提供了一个不适合使用的类的参数。plyr 函数的第一个字母表示参数的类型，在这种情况下，“a”代表`array`. 如果您提供一个数组，它会按您的预期工作：

```
> xx <- plyr::aaply(matrix(1:10, 2), 2, class)
> xx
        1         2         3         4         5 
"integer" "integer" "integer" "integer" "integer" 
```

至少在我阅读帮助页面之前，这是我的理解。它说应该接受数据帧输入，并且应该输出一个数组。因此，您发现了文档中的错误或函数中的错误。无论哪种方式，处理这个问题的正确位置是在[“manipulatr” Google-newsgroup](http://groups.google.com/group/manipulatr)上。@hadley 很有可能会一起解决问题，因为他也是这里的重要贡献者。

# curl - 无法在 Debian 上安装 php5-curl

> ID：10673772
> 
> 赞同：1
> 
> 时间：2012-05-20T13:22:53.970
> 
> 标签：curl, debian

我无法安装 curl。您可以在下面看到错误消息。当我安装 php5-fpm 和 Nginx 时，我需要 /etc/apt/sources.list 中的以下行：

```
in deb http://php53.dotdeb.org stable all 
```

没有注释掉这一行，但看起来服务器无论如何都在使用 dotdeb.org。如何在不卸载 php5-fpm 的情况下解决这个问题？

```
srv106:/etc/php5/fpm# apt-get install php5-curl
Reading package lists... Done
Building dependency tree
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 php5-curl : Depends: php5-common (= 5.3.3-7+squeeze9) but 5.3.11-1~dotdeb.0 is to be installed
E: Broken packages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:39:25.147

`php5-curl`需要`php5-common`squeeze，也`php5-fpm`需要`php5-common`dotdeb，安装不上是正常的。您是否尝试过`php5-curl`在 source.list 中不注释 dotdeb.org 的情况下安装？因为`php5-curl`存在于这些存储库中。

# android - JSON 服务调用不返回任何内容

> ID：10673773
> 
> 赞同：1
> 
> 时间：2012-05-20T13:23:02.850
> 
> 标签：android, json

我在 webservice 中调用返回字符串“true”或“false”的方法，并使用以下代码获取两个参数

```
String isLogedin = readTwitterFeed();
public String readTwitterFeed() {

        String Result = null;

        StringBuilder URL = new StringBuilder();

        URL.append("http://localhost:1539/WCFService1/Service.svc/Login/");
        URL.append(username.getText());
        URL.append("/");
        URL.append(password.getText());

        ///////////////////////////// 
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(
                URL.toString());

        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(content));

                StringBuilder builder = null ;
                String line = null;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }

                Result = builder.toString() ;

            } else {
                 Result = "error";
            }
        } catch (ClientProtocolException e) {
             Result = "error";
            e.printStackTrace();
        } catch (IOException e) {
             Result = "error";
            e.printStackTrace();
        }
        return Result;
    } 
```

但返回的字符串始终为空

知道为什么它不返回数据，也不显示任何错误（我在 textview 上显示返回值），我也设置了这样的互联网权限

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

并确定该服务正在运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:47:32.540

`Localhost`并且`127.0.0.1`是`Android emulated device's`自己的环回接口，换句话说，您使用`localhost`or连接到android模拟设备（而不是您的计算机） `127.0.0.1`。如果您尝试访问您的开发机器，请使用`10.0.2.2.`

你的代码中的一件事你没有初始化你的`StringBuilder builder`

像这样初始化它`StringBuilder builder = new StringBuilder();`

# opengl - 从 glXChooseFBConfig 复制 GLX FBConfig

> ID：10673775
> 
> 赞同：2
> 
> 时间：2012-05-20T13:23:21.017
> 
> 标签：opengl, x11

运行时`glxinfo`，或使用我自己的代码（调用`glXChooseFBConfig`以获取 GLX 帧缓冲区配置列表）时，我看到除了它们的 ID 代码之外，有些条目是相同的。

例如：

```
$ glxinfo
...
0x77  0 tc  0 32  0 r  y  .  8  8  8  8  4 24  8 16 16 16 16  0 0 None
...
0xae  0 tc  0 32  0 r  y  .  8  8  8  8  4 24  8 16 16 16 16  0 0 None
... 
```

这种重复的原因是什么？这些看似相同的模式之间是否存在潜在差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:24:46.373

尽管从 OpenGL 的角度来看它们具有相同的缓冲区配置，但从 X11 的角度来看它们是不同的。具体来说，它们具有不同的 X Visual 位深度（一个是 24 位 X 视觉，一个是 32 位 X 视觉）

[注意：我在撰写问题时发现了这一点，但由于我在网络搜索中没有找到答案，所以无论如何我都会在此处发布问题和答案——也许其他人将来会发现它很有用。 ]

# php - Facebook Graph API - 在不使用 file_get_contents 的情况下获取全名

> ID：10673776
> 
> 赞同：0
> 
> 时间：2012-05-20T13:23:36.960
> 
> 标签：php, facebook, facebook-graph-api

我不能使用 'file_get_contents' 因为我的主机不允许 php 'open_url_fopen'。

有没有办法使用没有 file_get_contents 的 PHP 从他们的 Facebook ID 获取 Facebook 用户的全名？

（从以下链接中提取全名：graph.facebook.com/zuck?ref=ts）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:48:20.780

你为什么不使用 cURL

```
$url = 'http://graph.facebook.com/zuck?fields=name';

$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch,CURLOPT_URL,$url);
$result = curl_exec($ch);
curl_close($ch);
var_dump($result); 
```

# jquery - 如何使用 jquery 删除外部 div

> ID：10673777
> 
> 赞同：6
> 
> 时间：2012-05-20T13:23:40.503
> 
> 标签：jquery

好的，所以我有这个结构

```
 <div class="field_with_errors">
    <input id="count" name="count" size="2" type="text" />
    <label class="message" for="count_for">Required</label>
 </div> 
```

我如何删除外部`field_with_errors`和内部消息，只留下输入标签

如果我做

```
$("#count").closest(".field_with_errors").remove() 
```

它删除了整个 div

我可以`.message`先移除内部，但不确定如何移除外部

```
$("#count").closest(".field_with_errors").find('.message').remove() 
```

有任何想法吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T13:26:08.240

使用`replacewith()`方法，

```
$(".field_with_errors").replaceWith($("#count"));​ 
```

[这是小提琴的例子](http://jsfiddle.net/4tj6r/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T13:26:44.993

你可以使用`replaceWith()`方法：

```
$('.field_with_errors').replaceWith($("#count")); 
```

[http://jsfiddle.net/mgy9W/](http://jsfiddle.net/mgy9W/)

# php - php对不同的值进行排序

> ID：10673778
> 
> 赞同：0
> 
> 时间：2012-05-20T13:23:41.453
> 
> 标签：php, multidimensional-array, usort

我正在使用这个 usort 函数按值对数组进行排序：

```
 function cmp($a, $b)
    {
        if ($a["value"] == $b["value"])
        { return 0; }
        return ($a["value"] < $b["value"]) ? -1 : 1;
    } 
```

现在，每个对象也有一个“active”字段，即：$a["active"]。我希望排序后的数组首先按值排序活动的（1），然后，当所有这些都排序时，非活动的（0）。在此之后我尝试使用另一个 usort，但它不能很好地工作，它有点打乱它们。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:31:40.017

```
function cmp($a,$b){
    if ($a["active"]==$b["active"]){
        if($a["value"]==$b["value"])
            return 0;
        return $a["value"]>$b["value"])?1:-1;
    }
    return $a["active"]>$b["active"]?1:-1;
} 
```

未经测试 - 但我认为它会工作。这类东西的一个很好的资源（但不是这个特殊的例子，不幸的是你）：[http ://www.the-art-of-web.com/php/sortarray/](http://www.the-art-of-web.com/php/sortarray/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:30:51.037

只需在函数中添加活动的东西作为另一个比较：

```
if ($a['active'] > $b['active'])
   return 1;
} else if ($a['value'] == $b['value']) {
   return 0;
} else {
   return ($a['value'] < $b['value']) ? -1 : 1;
} 
```

# hadoop - 大师不跑

> ID：10673779
> 
> 赞同：0
> 
> 时间：2012-05-20T13:23:48.943
> 
> 标签：hadoop, hbase

大家好，我在我的主日志中运行 HBase 时遇到了这个异常，而 HMaster 没有运行。

```
2012-05-20 11:54:38,206 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/23.21.190.123:2181
2012-05-20 11:54:38,236 INFO org.apache.zookeeper.ClientCnxn: Socket connection established to localhost/23.21.190.123:2181, initiating session
2012-05-20 11:54:38,291 INFO org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/23.21.190.123:2181, sessionid = 0x1376a1960900000, negotiated timeout = 180000
2012-05-20 11:54:38,323 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=Master, sessionId=ip-10-28-213-145.ec2.internal:60000
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: revision
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUser
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsDate
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUrl
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: date
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsRevision
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: user
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsVersion
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: url
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: MetricsString added: version
2012-05-20 11:54:38,350 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-05-20 11:54:38,351 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-05-20 11:54:38,351 INFO org.apache.hadoop.hbase.master.metrics.MasterMetrics: Initialized
2012-05-20 11:54:38,452 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Master=ip-10-28-213-145.ec2.internal:60000
2012-05-20 11:54:40,150 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 0 time(s).
2012-05-20 11:54:41,151 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 1 time(s).
2012-05-20 11:54:42,153 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 2 time(s).
2012-05-20 11:54:43,155 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 3 time(s).
2012-05-20 11:54:44,156 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 4 time(s).
2012-05-20 11:54:45,157 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 5 time(s).
2012-05-20 11:54:46,159 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 6 time(s).
2012-05-20 11:54:47,160 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 7 time(s).
2012-05-20 11:54:48,161 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 8 time(s).
2012-05-20 11:54:49,162 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/23.21.190.123:54310\. Already tried 9 time(s).
2012-05-20 11:54:49,165 FATAL org.apache.hadoop.hbase.master.HMaster: Unhandled exception. Starting shutdown.
java.net.ConnectException: Call to localhost/23.21.190.123:54310 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:767)
    at org.apache.hadoop.ipc.Client.call(Client.java:743)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)
    at $Proxy5.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:359)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:113)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:215)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:177)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:82)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1378)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1390)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:196)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:175)
    at org.apache.hadoop.hbase.util.FSUtils.getRootDir(FSUtils.java:364)
    at org.apache.hadoop.hbase.master.MasterFileSystem.<init>(MasterFileSystem.java:81)
    at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:346)
    at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:282)
Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:404)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:304)
    at org.apache.hadoop.ipc.Client$Connection.access$1700(Client.java:176)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:860)
    at org.apache.hadoop.ipc.Client.call(Client.java:720)
    ... 16 more
2012-05-20 11:54:49,168 INFO org.apache.hadoop.hbase.master.HMaster: Aborting
2012-05-20 11:54:49,168 DEBUG org.apache.hadoop.hbase.master.HMaster: Stopping service threads
2012-05-20 11:54:49,168 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 60000
2012-05-20 11:54:49,169 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60000: exiting
2012-05-20 11:54:49,169 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60000: exiting
2012-05-20 11:54:49,169 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60000: exiting
2012-05-20 11:54:49,169 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60000: exiting
2012-05-20 11:54:49,169 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000: exiting
2012-05-20 11:54:49,170 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60000: exiting
2012-05-20 11:54:49,170 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60000: exiting
2012-05-20 11:54:49,170 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60000: exiting
2012-05-20 11:54:49,170 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60000: exiting
2012-05-20 11:54:49,170 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000: exiting
2012-05-20 11:54:49,171 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server listener on 60000
2012-05-20 11:54:49,194 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server Responder
2012-05-20 11:54:49,217 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2012-05-20 11:54:49,217 INFO org.apache.zookeeper.ZooKeeper: Session: 0x1376a1960900000 closed
2012-05-20 11:54:49,217 INFO org.apache.hadoop.hbase.master.HMaster: HMaster main thread exiting 
```

我搜索了很多但找不到解决方案。这是我的 /etc/hosts 文件

```
127.0.0.1   localhost hbase-system
23.21.190.123   hbase.com.com hbase localhost 
```

我什至通过评论 localhost 条目（即＃127.0.0.1 localhost）来尝试过，但无法运行 HMaster。
这是我的 hbase-site.xml

```
<configuration>
<property>
<name>hbase.cluster.distributed</name>
<value>true</value>
</property>
<property>
<name>hbase.rootdir</name>
<value>hdfs://localhost:54310/hbase</value>
</property> 
```

这是我的 hadoop core-site.xml

```
<configuration>
<property>
<name>hadoop.tmp.dir</name>
<value>/app/hadoop/tmp</value>
</property><property>
<name>fs.default.name</name>
<value>hdfs://localhost:54310</value>
</property>
</configuration> 
```

如果有人遇到问题请帮助我
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:41:08.383

1.  将 hadoop 核心文件从 hadoop home 添加到 hbase lib 文件夹
2.  检查集群中 hbase 的版本。如果有差异，可能会出错。
3.  使用 IP 地址而不是 localhost
4.  检查 ssh 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:14:36.883

如果您在伪模式下运行 Hbase，则不需要 IP..Loopback 工作正常..所以只需将这两行设为“127.0.0.1”...还在您的 hbse-site.xml 文件中添加以下 2 个属性 -

```
<property>
  <name>hbase.zookeeper.quorum</name>
  <value>localhost</value>
</property>    
<property>
      <name>hbase.zookeeper.property.clientPort</name>
      <value>2181</value>         
</property> 
```

除此之外，将以下 jars 添加到您的“HBASE_HOME/lib”目录中 - HADOOP_HOME 中的“hadoop-core-*-.jar”和 HADOOP_HOME/lib 目录中的“commons-collections-3.2.1.jar”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T18:32:10.723

不确定这是罪魁祸首，但我确实看到您的 /etc/hosts 存在问题：
您将 localhost 定义为 2 个不同的地址。

可能你想要

```
127.0.0.1   hbase localhost hbase-system
23.21.190.123   hbase.com.com 
```

HTH、
GL

# mercurial - 是否可以在 .hgignore 中使用有根 glob 模式？

> ID：10673783
> 
> 赞同：13
> 
> 时间：2012-05-20T13:24:28.743
> 
> 标签：mercurial, hgignore

我更喜欢在 .hgignore 文件中使用 glob 语法，但现在我需要创建一个有根模式。我想忽略我的 /static 目录，而不是 /assets/static。线

```
static/ 
```

忽略两者。有没有办法做根 glob 模式？如果没有，我可以切换到正则表达式，但 glob 似乎更自然地匹配路径名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T09:03:00.257

你不能根植你的 glob 模式——这在[手册页](http://www.selenic.com/mercurial/hgignore.5.html)中有记录。但是，您可以在 glob 和 regexp 语法之间来回切换：

```
syntax: glob
*.pyc

syntax: regexp
^static/

syntax: glob
*~ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T15:23:15.440

根据[*hgignore* (5)](http://www.selenic.com/mercurial/hgignore.5.html)，使用 glob 是不可能的：

> glob 和 regexp 模式都没有根。*.c 形式的全局语法模式将匹配任何目录中以 .c 结尾的文件，而 .c$ 形式的正则表达式模式将执行相同的操作。要根正则表达式模式，请以 ^ 开头。

# android - 当按下返回按钮时，我在 Android 中强制关闭

> ID：10673784
> 
> 赞同：0
> 
> 时间：2012-05-20T13:24:29.060
> 
> 标签：android, android-emulator, android-gallery, android-image

在我的活动中，我可以去画廊并可以选择图像。之后我可以回到以前的sreecn。但是当我去画廊时，如果我不选择图像并按下后退按钮，我无法转到上一个屏幕并且我强制关闭。如何在不使用 startActivity(intent) 的情况下解决这个问题？这是我的代码：首先我定义为

```
private static final int ACTIVITY_REQUEST_PICK_ATTACHMENT = 1; 
```

关于活动结果代码：

```
protected void onActivityResult(int requestCode, int resultCode,
            Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

            mAttachments = (LinearLayout) findViewById(R.id.attachments);

            switch (requestCode) {
            case ACTIVITY_REQUEST_PICK_ATTACHMENT:

                Uri _uri = data.getData();

                addAttachment(_uri);

                Cursor cursor = getContentResolver()
                        .query(_uri,
                                new String[] { android.provider.MediaStore.Images.ImageColumns.DATA },
                                null, null, null);
                cursor.moveToFirst();
                File imageFilePath = new File(cursor.getString(0));
                uris.add(imageFilePath);
                names.add(imageFilePath.getName());

                Log.v("imageFilePath", imageFilePath.toString());
                break; 
```

我在这里称其为：

```
private void onAddAttachment2(final String mime_type) {

        // setContentView(R.layout.main);

        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType(mime_type);
        startActivityForResult(Intent.createChooser(i, null),
                ACTIVITY_REQUEST_PICK_ATTACHMENT);
    } 
```

我的 LogCat 上的错误

```
05-20 13:16:39.809: E/AndroidRuntime(374):  at my.mail.SenderActivity.onActivityResult(KepenekActivity.java:294) 
```

当我双击错误时，它会显示该行

```
Uri _uri = data.getData(); 
```

逻辑上是真的，我的 _uri 是空的，我怎么能用这个最终状态显示上一个屏幕，这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:37:39.313

您需要为结果代码添加检查。

```
protected void onActivityResult(int requestCode, int resultCode,Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    mAttachments = (LinearLayout) findViewById(R.id.attachments);

    switch (requestCode) {
        case ACTIVITY_REQUEST_PICK_ATTACHMENT:
            if (resultCode == RESULT_OK) { // <------ THIS LINE IS IMPORTANT
                Uri _uri = data.getData();

                addAttachment(_uri);

                Cursor cursor = getContentResolver()
                    .query(_uri,
                            new String[] { android.provider.MediaStore.Images.ImageColumns.DATA },
                            null, null, null);
                cursor.moveToFirst();
                File imageFilePath = new File(cursor.getString(0));
                uris.add(imageFilePath);
                names.add(imageFilePath.getName());

                Log.v("imageFilePath", imageFilePath.toString());
            }
            break; 
```

如果您按下后退按钮而不是选择某些内容，则 resultCode 将设置为 RESULT_CANCELLED 而不是 RESULT_OK。在任何一种情况下，您都可以使用这种区别来做任何您需要做的事情。

# ios - IOS通讯录框架使用问题

> ID：10673794
> 
> 赞同：0
> 
> 时间：2012-05-20T13:25:51.273
> 
> 标签：ios, xcode4.3

我正在尝试在我的项目中使用地址框架。我已经在我的项目中链接了框架 AddressBookUI.framework 和 AddressBook.framework。但是在构建应用程序时我仍然收到以下错误。

请帮我弄清楚问题。

```
Ld "/Users/sathishkumar/Library/Developer/Xcode/DerivedData/Easy_Contacts-eafemguogncacmhgnbfsjtizjcbd/Build/Products/Debug-iphonesimulator/Easy Contacts.app/Easy Contacts" normal i386
    cd "/Users/sathishkumar/projects/Easy Contacts"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/sathishkumar/Library/Developer/Xcode/DerivedData/Easy_Contacts-eafemguogncacmhgnbfsjtizjcbd/Build/Products/Debug-iphonesimulator -F/Users/sathishkumar/Library/Developer/Xcode/DerivedData/Easy_Contacts-eafemguogncacmhgnbfsjtizjcbd/Build/Products/Debug-iphonesimulator -filelist "/Users/sathishkumar/Library/Developer/Xcode/DerivedData/Easy_Contacts-eafemguogncacmhgnbfsjtizjcbd/Build/Intermediates/Easy Contacts.build/Debug-iphonesimulator/Easy Contacts.build/Objects-normal/i386/Easy Contacts.LinkFileList" -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o "/Users/sathishkumar/Library/Developer/Xcode/DerivedData/Easy_Contacts-eafemguogncacmhgnbfsjtizjcbd/Build/Products/Debug-iphonesimulator/Easy Contacts.app/Easy Contacts"

    Undefined symbols for architecture i386:
      "_ABRecordCopyValue", referenced from:
          -[ViewController displayPerson:] in ViewController.o
      "_ABMultiValueGetCount", referenced from:
          -[ViewController displayPerson:] in ViewController.o
      "_ABMultiValueCopyValueAtIndex", referenced from:
          -[ViewController displayPerson:] in ViewController.o
      "_OBJC_CLASS_$_ABPeoplePickerNavigationController", referenced from:
          objc-class-ref in ViewController.o
      "_kABPersonFirstNameProperty", referenced from:
          -[ViewController displayPerson:] in ViewController.o
      "_kABPersonPhoneProperty", referenced from:
          -[ViewController displayPerson:] in ViewController.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:36:10.360

添加`<AddressBook/AddressBook.h>`到文件中，AddressBookUI 就是那个地址簿 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:28:31.873

您是否将这些框架导入到您的 .h 文件中？

# python - 如何在 Python 中概括这种列表理解？

> ID：10673798
> 
> 赞同：2
> 
> 时间：2012-05-20T13:26:10.427
> 
> 标签：python, list-comprehension

我有一个整数列表说`l1=[a,b,c]`和`_1to9=range(1,10)`。我想得到这个：

```
 [a*i1+b*i2+c*i3 for i1 in _1to9 for i2 in _1to9 for i3 in _1to9] 
```

但问题是`l1`不一定是 3 个元素的列表。那么我该如何概括？

***编辑***：帮助可视化我想要实现的目标：

```
 >>> l1=[10001,1010, 100]
 >>> [l1[0]+i1+l1[1]*i2+l1[2]*i3 for i1 in _1to9 for i2 in _1to9 for i3 in _1to9] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T13:33:30.943

一些基本的数学可能会有所帮助。首先，实现`a*i1+b*i2+c*i3`是两个三元素列表的[内（点）积](https://en.wikipedia.org/wiki/Dot_product)，可以推广为

```
def dot_product(a, b):
    return sum(x * y for x, y in zip(a, b)) 
```

并`for i1 in _1to9 for i2 in _1to9 for i3 in _1to9`循环 的[笛卡尔](https://en.wikipedia.org/wiki/Cartesian_product)积`[_1to9] * 3`。那在 Python 标准库中`itertools.product`，所以你有

```
[dot_product([a, b, c], x) for x in itertools.product(_1to9, repeat=3)] 
```

将其推广到任意列表`l`给出

```
[dot_product(l, x) for x in itertools.product(_1to9, repeat=len(l))] 
```

# c# - 允许我的应用程序被其他应用程序使用

> ID：10673799
> 
> 赞同：0
> 
> 时间：2012-05-20T13:26:20.007
> 
> 标签：c#, .net, interop

我想知道如何允许其他人自己的应用程序使用我的 C# 应用程序。

为此目的公开相关课程是否足够？他们是否可以在他们的项目中引用我的 .exe 并自由使用我的公共类？他们只能从 .NET 应用程序中使用它吗？

我还应该考虑什么？可能有任何安全问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:51:35.843

您的 .Net dll 可以被其他 .Net 应用程序使用。您可以将代码的逻辑部分与接口分开，并将逻辑放在“库”项目中，这些项目将被编译为 Dll 文件，可以通过添加对它们的引用在 .Net 应用程序中使用。

如果您想允许使用非 .Net 应用程序，您可以使用 COM 互操作：

[维基百科 - COM 互操作](http://en.wikipedia.org/wiki/COM_Interop)

[COM 互操作 C# 教程](http://msdn.microsoft.com/en-us/library/aa645712%28v=vs.71%29.aspx)

正如 CSharpVJ 所说，您还可以使用 WCF 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T13:32:50.487

创建一个包装 WCF 服务并通过这些 WCF 服务公开您的 exe 应用程序，并且几乎所有基于 Java、Python、Ruby 等其他平台的客户端都可以使用它，具体取决于您在 WCF 服务中使用的设置。

WCF 提供了一个基于服务的模型来与基于 .Net 和其他平台的其他应用程序进行通信。

WCF在 MSDN的这篇[文章中进行了解释](http://msdn.microsoft.com/en-us/library/ms731082.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:47:08.180

例如，您总是可以在[https://github.com/](https://github.com/)上公开源代码。这将允许其他人强制查看和编辑您的源代码，这可能比 WCF 服务更好

# juice-ui - JUICEUI-块错误

> ID：10673803
> 
> 赞同：-1
> 
> 时间：2012-05-20T13:26:36.183
> 
> 标签：juice-ui

我正在尝试将 JuiceUi 添加到现有的网络表单应用程序中。我想使用 Accordion 功能，但出现以下错误。有人可以帮忙吗？谢谢

System.Web.HttpException (0x80004005)：控件集合无法修改，因为控件包含代码块（即<% ... %>）。在 System.Web.UI.ControlCollection.Add(Control child) 在 Juice.Framework.CssManager.Render(IEnumerable`1 referenceNames) 在 Juice.Framework.JuiceWidgetState.RenderCss() 在 Juice.Framework.JuiceScriptControl.OnPreRender(EventArgs e)在 Juice.Accordion.OnPreRender(EventArgs e) 在 System.Web.UI.Control.PreRenderRecursiveInternal() 在 System.Web.UI.Control.PreRenderRecursiveInternal() 在 System.Web.UI.Control.PreRenderRecursiveInternal() 在 System.Web .UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:16:23.153

带有 <% %> 标记的弹出窗口的 Javascript 代码导致了这种情况，例如

PopupModalDialog('AddTrans.aspx?regID=<%= CurrentRegID %>', '', 395, 230); 错误

# mysql - 无法从本地 mysql 服务器连接到 AWS RDS 数据库实例

> ID：10673808
> 
> 赞同：3
> 
> 时间：2012-05-20T13:27:01.120
> 
> 标签：mysql, amazon-web-services, amazon-rds

我正在尝试使用以下命令将我的 .sql 转储从本地机器导入 AWS RDS db 实例：

```
C:\Program Files\MySQL\MySQL Server 5.5\bin>mysqldump --host=localhost 
--user=root --password=admin e_learning_system | mysql 
--host=mydbinstance.cyz1k1vacvdd.us-east-1.rds.amazonaws.com 
--user=root --password=adminadmin e_learning_system 
```

但它抛出了这个错误：

> ERROR 2003 (HY000): Can't connect to MySQL server on 'mydbinstance.cyz1k1vacvdd.us-east-1.rds.amazonaws.com' (10060) mysqldump: Got errno 22 on write

我该如何纠正？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:08:46.670

是的，Amazon Beanstalk 应用程序和 RDS 安全组必须相同才能将应用程序连接到数据库实例。

右键单击数据库实例并使用 beanstalk 应用程序添加一个新的安全组..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-22T14:08:31.760

如果有人仍在寻找像我一样的解决方案，我设法通过在我的 RDS 实例中设置安全组来完成它。只需转到该安全组，您将在“安全和网络”部分找到单击。在您进入该安全组页面后，编辑入站规则，将源`0.0.0.0/0`临时更改为（意味着全部接受），然后导入您的数据库转储。那应该行得通。但请记住，您可能希望在生产中将其还原回此设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T05:02:21.110

我更喜欢使用 MySQL 工作台。它比命令行方式更容易和用户友好。

它提供了一个简单的 GUI。

MySQL 工作台或 SQL Yog。

这些是我所做的步骤。

1) 安装 MySQL 工作台。

2) 在 AWS 控制台中，您的 RDS 实例必须有一个安全组。向该组添加入站规则以允许来自您的计算机的连接。这很简单。添加您的 IP 地址。

3) 打开 MySQL 工作台，添加一个新的连接。

4) 给连接起一个您喜欢的名称。

5) 选择连接方式——标准 TCP/IP

6) 在主机名 (mydbinstance.cyz1k1vacvdd.us-east-1.rds.amazonaws.com) 字段中输入您的 RDS 端点。

7) 端口：3306

8）用户名：主用户名（您在创建RDS实例期间创建的用户名）（root）

9）密码：主密码（admin admin）

10) 单击测试连接以检查您的连接。

11) 如果连接成功，单击确定。

12) 打开连接。

13) 你会在那里看到你的数据库'e_learning_system'。

14) 现在您可以将 mysqldump 文件导出到该数据库。转到-> 服务器。单击数据导入。

15) 您可以通过简单地打开一个空白的SQL文件并输入基本的SQL命令，如使用数据库，从表中选择*来检查数据是否已经迁移；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:19:46.133

错误 2003 表示没有连接到 mysql 服务器。检查您是否允许连接到 RDS 安全组中的 RDS 的计算机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-08T18:07:59.367

我遇到了同样的错误，我通过将 mysql.exe... 添加到我正在连接的机器的防火墙来解决它。

# c++ - 在 MFC 中使用静态库

> ID：10673809
> 
> 赞同：6
> 
> 时间：2012-05-20T13:27:03.333
> 
> 标签：c++, compiler-construction, mfc, linker, static-libraries

我尝试在我的 MFC 项目中使用静态库，但出现以下链接器错误：

```
1>------ Build started: Project: Csetkliens, Configuration: Debug Win32 ------
1>Build started 2012.05.20\. 16:12:49.
1>InitializeBuildStatus:
1>  Touching "Debug\Csetkliens.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>  All outputs are up-to-date.
1>ResourceCompile:
1>  All outputs are up-to-date.
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Lockit::~_Lockit(void)" (??1_Lockit@std@@QAE@XZ) already defined in libcpmtd.lib(xlock.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Lockit::_Lockit(int)" (??0_Lockit@std@@QAE@H@Z) already defined in libcpmtd.lib(xlock.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "void __cdecl std::_Debug_message(wchar_t const *,wchar_t const *,unsigned int)" (?_Debug_message@std@@YAXPB_W0I@Z) already defined in libcpmtd.lib(stdthrow.obj)
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: void __thiscall std::_Container_base12::_Orphan_all(void)" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in Csetkliens.obj
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) already defined in Csetkliens.obj
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: __thiscall std::_Container_base12::_Container_base12(void)" (??0_Container_base12@std@@QAE@XZ) already defined in Csetkliens.obj
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "public: struct std::_Iterator_base12 * * __thiscall std::_Container_base12::_Getpfirst(void)const " (?_Getpfirst@_Container_base12@std@@QBEPAPAU_Iterator_base12@2@XZ) already defined in Csetkliens.obj
1>msvcprtd.lib(MSVCP100D.dll) : error LNK2005: "void __cdecl std::_Xlength_error(char const *)" (?_Xlength_error@std@@YAXPBD@Z) already defined in libcpmtd.lib(xthrow.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: __invalid_parameter already defined in libcmtd.lib(invarg.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: __CrtDbgReportW already defined in libcmtd.lib(dbgrptw.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: "public: __thiscall std::exception::exception(char const * const &)" (??0exception@std@@QAE@ABQBD@Z) already defined in libcmtd.lib(stdexcpt.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: "public: virtual __thiscall std::exception::~exception(void)" (??1exception@std@@UAE@XZ) already defined in libcmtd.lib(stdexcpt.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: "public: __thiscall std::exception::exception(class std::exception const &)" (??0exception@std@@QAE@ABV01@@Z) already defined in libcmtd.lib(stdexcpt.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _memmove already defined in libcmtd.lib(memmove.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _malloc already defined in libcmtd.lib(dbgmalloc.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _realloc already defined in libcmtd.lib(dbgrealloc.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _fflush already defined in libcmtd.lib(fflush.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: ___iob_func already defined in libcmtd.lib(_file.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _free already defined in libcmtd.lib(dbgfree.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _floor already defined in libcmtd.lib(_floor_pentium4_.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _ldexp already defined in libcmtd.lib(_ldexp_.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _abort already defined in libcmtd.lib(abort.obj)
1>MSVCRTD.lib(MSVCR100D.dll) : error LNK2005: _isspace already defined in libcmtd.lib(_ctype.obj)
1>MSVCRTD.lib(ti_inst.obj) : error LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) already defined in libcmtd.lib(typinfo.obj)
1>MSVCRTD.lib(ti_inst.obj) : error LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) already defined in libcmtd.lib(typinfo.obj)
1>LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library
1>D:\Projektek\V.felev\Felulettervezes (MFC) - Halozatok\Csetkliens\Debug\Csetkliens.exe : fatal error LNK1169: one or more multiply defined symbols found
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:02.29
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

静态库的名称是 kriptolib.lib，它是我自己的产品。它不使用任何 MFC。我不知道是什么问题。

当我尝试从 kriptolib 创建一个新对象时，就会出现问题。

```
theApp.encryption = new RC4(); 
```

如果我评论编译器下面的行不会显示任何错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T05:10:04.067

您需要更改测试项目以使用 MTd（多线程调试）。

从属性页中选择配置属性 ==> C/C++ ==> 代码生成 ==> 运行时库 ==> 多线程调试 (/MTd)。

# c# - C# 中的 ASP.Net 网页，需要 Facebook LIKE 和评论按钮

> ID：10673810
> 
> 赞同：0
> 
> 时间：2012-05-20T13:27:06.210
> 
> 标签：c#, asp.net, .net, windows, winforms

嗨，我正在用 ASP.net 和 C# 创建一个简单的网站。
假设我的网站名称是“XYZ”，并且在 FACEBOOK 同名页面上，即“XYZ”。
那么，当我在网站上单击它时，我如何显示 facebook 的“喜欢”按钮 n，它实际上喜欢在 FB 上。当我在网页上评论时，该评论自动添加到 Facebook。

感谢提前，需要 Uegent 帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:45:34.020

对于喜欢代码，您可以访问[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) 和评论[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

**像 iframe 代码这样的 fb 示例将其放置在您的网站正文中，并将 href 值更改为您的 facebook 页面**

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fxyz&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

# facebook-graph-api - Difference between api call '/me' and '/ '

> ID：10673823
> 
> 赞同：0
> 
> 时间：2012-05-20T13:28:15.663
> 
> 标签：facebook-graph-api, facebook-php-sdk

As the title says, what is the difference when doing a request with the php sdk, between api('/me') and api('/current_user_fbid')?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:35:17.157

Adding to `avs099's` answer.

You cannot use `me` without an access token. But you can use an `id` without access token.

e.g.

[http://graph.facebook.com/1137725463](http://graph.facebook.com/1137725463) works, but
[http://graph.facebook.com/me](http://graph.facebook.com/me) will fail

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:39:34.420

Using `me` or `current_user_id` in graph api will yield the same result.

You should check **[Developer Tool Explorer](https://developers.facebook.com/tools/explorer/)**

**[DEMO](http://www.fbrell.com/saved/1cd4cd7ad778478e02021363efba6e54)**

Hope this helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:10:39.190

as @Dhiraj Bodicherla said, "me" and "current_user_id" are the same - but there are exceptions when you cannot use "me" - for example, when you do requests using application or page tokens. So if you are writing a backend code which is dealing with multiple users/tokens etc - keep this in mind - **you can't use "me" with app token.**

# xml-parsing - 如何使用 Visual Studio 2010 构建 Xalan-C？

> ID：10673827
> 
> 赞同：3
> 
> 时间：2012-05-20T13:28:39.330
> 
> 标签：xml-parsing, xerces, xalan, xerces-c

我找不到证据证明这是可能的。经过 40 个小时让自己发疯后，我遇到了无法构建本地化项目的情况，该项目应该构建名称不佳的 AllInOne 项目（构建 Xalan-C.lib，natch）所需的头文件。

这个库是软件弊端，我迫切需要一个答案，因为它是另一个库中的依赖项，我别无选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T12:17:18.983

我已经设法在 Visual Studio 2010 中构建了与最新版本的 Xerces-C (v3.1.1) 兼容的 Xalan-C 版本 1.11。我不知道早期版本是否可行，但是这些是我的步骤接下来是为了使用 1.11 版进行构建：

*   Xerces-C 必须构建为动态库才能获得 MsgCreator.exe 所依赖的 xerces-c_3_1D.dll 文件。

*   克隆[github 仓库](https://github.com/apache/xalan-c)，获取 Xalan-C 1.11 版本的源代码。

*   `XERCESCROOT`在 windows中设置环境变量`XALANCROOT`（不在 Visual Studio 中）。

    ```
     XERCESCROOT    The Xerces-C/C++ installation directory
     XALANCROOT     The Xalan-C/C++ source directory 
    ```

*   在 VS2010 中打开 Xalan-C 解决方案并构建`MsgCreator`项目。

*   从 Xerces-C 构建中复制该`xerces-c_3_1D.dll`文件并将其放在 Xalan-C 构建文件夹中，该文件夹`MsgCreator.exe`位于同一文件夹中。

现在可以生成构建“AllInOne”项目所需的“缺失”头文件（LocalMsgIndex.hpp 和 LocalMsgData.hpp）。

*   使用提供的路径在 cmd 中运行 MsgCreator.exe，该路径`XalanMsg_en_US.xlf`位于其中，以及在构建区域设置消息时使用`$(XALANCROOT)\src\xalanc\NLS\en_US`什么[方法。](http://xml.apache.org/xalan-c/build_instruct.html#locale)

    ```
    MsgCreator.exe $(XALANCROOT)\src\xalanc\NLS\en_US\XalanMsg_en_US.xlf -TYPE=inmem 
    ```

（我使用过`-TYPE=inmem`，但请检查哪种方法最适合您的解决方案）

*   头文件现在生成并位于构建目录（MsgCreator.exe 所在的位置）中。将它们复制或移动到`$(XALANCROOT)\src`，现在应该可以找到它们。

*   现在构建`XalanMsgLib`项目。

*   在最终构建之前要做的最后一件事是处理文件`afxres.h`中的`AllInOne.rc`包含（位于`$(XALANCROOT)\Projects\Win32\Res\AllInOne`）。Visual Studio Express 版本不包含包含`afxres.h`标头的 MFC 库。我只是将其更改为`#include "windows.h"`。

现在应该可以成功构建“AllInOne”了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T20:50:15.570

我也为此苦苦挣扎，这是我的食谱（VS2015，但请查找其他 IDE 的 cmake 文档）

> 请注意，我专门针对 xerces 3.2.3 和 xalan 1.12。使用 git tag 获取你需要的版本

```
git clone https://github.com/apache/xerces-c.git
cd xerces-c
git checkout v3.2.3
mkdir build
cd build
cmake .. -BVS2015 -G "Visual Studio 14 2015" -A x64 -DCMAKE_BUILD_TYPE=Debug
cd VS2015
devenv xerces-c.sln /Build Debug /Project ALL_BUILD 
```

因为我将它与另一个以某种方式预期事物的构建过程一起使用：（假设您使用 bin/lib 子目录设置了一个名为 XERCESBUILD 的目标目录 env）

```
copy src\Debug\*.dll %XERCESBUILD%\bin
copy src\Debug\*.lib %XERCESBUILD%\lib 
```

那么对于xalan

```
git clone https://github.com/apache/xalan-c
cd xalan-c
git checkout Xalan-C_1_12_0
mkdir build
cd build
set PATH=%PATH%;%XERCESBUILD%\bin
cmake .. -BVS2015 -G "Visual Studio 14 2015" -A x64 -DCMAKE_PREFIX_PATH=%JBCRELEASEDIR% -DXALAN_DEBUG=1 -DCMAKE_BUILD_TYPE=Debug -DXerce
sC_LIBRARY_DEBUG=%XERCESBUILD%\lib\xerces-c_3D.lib
cd VS2015
devenv xalan-c.sln /Build Debug /Project ALL_BUILD 
```

请注意，**xerces-c_3D.lib**专门用于调试构建，因此在进行发布构建时删除**D。**

# java - 设置 ListView 适配器时，Android 应用程序保持强制关闭

> ID：10673830
> 
> 赞同：0
> 
> 时间：2012-05-20T13:29:38.940
> 
> 标签：java, android

我正在尝试掌握 android 开发的窍门，但我遇到了障碍。我有一个 ListView，我不想用一些随机项目填充它。但是当我尝试设置列表视图的适配器时，应用程序强制关闭。

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

   <ListView
       android:id="@+id/accountList"
       android:layout_width="match_parent"
       android:layout_height="wrap_content" >

   </ListView>

</LinearLayout> 
```

MainActivity.java：

```
package com.testapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    static final String[] TEXTS = new String[] {"test1","test2"};

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView lv = (ListView) this.findViewById(R.id.accountList);
        lv.setAdapter(new ArrayAdapter<String>(this, R.id.accountList, TEXTS));            
    }
} 
```

我究竟做错了什么？

日志猫：

```
05-20 13:44:28.154: E/AndroidRuntime(585): FATAL EXCEPTION: main
05-20 13:44:28.154: E/AndroidRuntime(585): android.content.res.Resources$NotFoundException: Resource ID #0x7f060000 type #0x12 is not valid
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2110)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.content.res.Resources.getLayout(Resources.java:857)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:371)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.ListView.onMeasure(ListView.java:1155)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.View.measure(View.java:12723)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.View.measure(View.java:12723)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.View.measure(View.java:12723)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.View.measure(View.java:12723)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
05-20 13:44:28.154: E/AndroidRuntime(585):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.View.measure(View.java:12723)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.os.Looper.loop(Looper.java:137)
05-20 13:44:28.154: E/AndroidRuntime(585):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-20 13:44:28.154: E/AndroidRuntime(585):  at java.lang.reflect.Method.invokeNative(Native Method)
05-20 13:44:28.154: E/AndroidRuntime(585):  at java.lang.reflect.Method.invoke(Method.java:511)
05-20 13:44:28.154: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-20 13:44:28.154: E/AndroidRuntime(585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-20 13:44:28.154: E/AndroidRuntime(585):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:34:23.127

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

        ListView lv = (ListView)findViewById(R.id.accountList);
        lv.setAdapter(new ArrayAdapter<String>(this, R.id.accountList, TEXTS));

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:33:47.097

错误在线

```
lv.setAdapter(new ArrayAdapter<String>(this, R.id.accountList, TEXTS)); 
```

第二个参数需要一个只有 TextView 的布局，如下所示：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" > 
```

假设您将其保存在`list_row.xml`布局文件夹中的文件中。

然后你做：

```
lv.setAdapter(new ArrayAdapter<String>(this, R.layout.list_row, TEXTS)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:40:32.873

尝试将xml设置为：

```
<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
</ListView> 
```

另外，请粘贴您的堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:05:53.123

它正在抛出`Resources$NotFoundException`，这意味着 . 可能有问题`R.id.accountList`。它找不到它。我不确定，但我认为适配器应该指向 R.layout.main 因为那是 id 所在的位置。

```
lv.setAdapter(new ArrayAdapter<String>(this, R.layout.main, TEXTS)); 
```

# php - PDO：mysql 与 postgresql 有何不同

> ID：10673835
> 
> 赞同：1
> 
> 时间：2012-05-20T13:30:43.703
> 
> 标签：php, mysql, postgresql, pdo

我想在本地使用 Mysql，在生产服务器上使用 PostgreSQL。有多难。我是mysql新手，对PostgreSQL一无所知。我将只使用带有连接的 crud。我的编码是在 PHP PDO 中，所以希望那里没有问题。还有一个简单的 postgresql 初学者指南

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T14:00:31.727

> 我想在本地使用 Mysql，在生产服务器上使用 PostgreSQL。

不，你没有，你真的没有——相信我。

> 我是mysql新手，对PostgreSQL一无所知。

然后选择一个并坚持下去。您将有足够的资源来管理学习一个系统。两者都可以在您可能遇到的所有常用平台上运行，而 PostgreSQL 可以在您可能永远不会遇到的负载上运行。确保您的应用程序在两个 RDBMS 上都能正常工作，这将是繁琐且容易出错的。

我推荐 PostgreSQL——它更严格（一开始很烦人，后来得到回报）并且有更好的标准支持和高级查询计划。话虽如此，如果您在两个系统上都只有 MySQL，请使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:59:39.433

给你一个更笼统的答案..

大多数标准查询几乎相同。虽然有细微的差别，所以不能保证您为 mysql 编写的查询也适用于 postgres。

您最好使您的生产和开发环境相同。

# mysql - mysql order by 重复，可选参数？

> ID：10673838
> 
> 赞同：0
> 
> 时间：2012-05-20T13:30:59.873
> 
> 标签：mysql

例如，列的所有行的值`rating`都为零。`ORDER BY rating DESC`将是主要的，有没有办法做次要的`ORDER BY`。

如果`ORDER BY rating DESC`有重复，那么做`ORDER BY name DESC`？这可能吗？

* * *

```
 id   | name  | rating
  1   | one   |  0
  2   | two   |  0
  3   | three |  0
  4   | four  |  0
  5   | five  |  0
  6   | six   |  0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:32:40.627

是的。

`order by`只需在子句中添加第二列

```
ORDER BY rating DESC, name DESC 
```

# php - 使用 PHP/Gettext 翻译成希伯来语失败

> ID：10673839
> 
> 赞同：1
> 
> 时间：2012-05-20T13:31:10.763
> 
> 标签：php, apache, locale, gettext

我已经搜索了几个小时来寻找解决方案，包括在文档中。

尝试使用 gettext 进行希伯来语翻译，

使用 PHP 5.3.1 和 wamp，

它打印出“hello world”而不是希伯来语的等价物

```
$directory = '/locale';
$domain = 'messages';
$locale ="he_IL";

putenv("LANG=".$locale); //not needed for my tests, but people say it's useful for windows

setlocale( LC_ALL, $locale);
bindtextdomain($domain, $directory);
textdomain($domain);
bind_textdomain_codeset($domain, 'UTF-8');

echo _("hello world"); 
```

我使用 poedit 创建 mo/po 文件，它们位于：./locale/he_IL/LC_MESSAGES/messages.mo

php 文件位于“./”

为什么我没有得到希伯来文文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:59:33.700

好的解决了

必须更新到 PHP 版本 5.3.5/5.3.10

因为我使用的是 Windows，所以我不得不使用这个语言环境“Hebrew_Israel.1255”而不是“he_IL”（这就是 Windows 调用希伯来语语言环境的方式）。

当然，我还必须将 ./locale 中的文件夹重命名为“Hebrew_Israel.1255”

现在系统成功选择了语言环境

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:45:03.147

正如 MarcB 所指出的，PHP 不会神奇地将单词翻译成不同的语言。但是有几种不同的解决方案可以帮助您。例如，您可以使用谷歌翻译 API 在不同语言之间转换文本。

```
 try {
       $gt = new Gtranslate;
       echo "Translating [Hello World] from English to German => ".$gt->english_to_german("hello world")."<br/>";
       echo "Translating [Ciao mondo] Italian to English => ".$gt->it_to_en("Ciao mondo")."<br/>";
 } catch (GTranslateException $ge) {
       echo $ge->getMessage();
 } 
```

你可以在这里阅读更多关于谷歌翻译 API 的信息[http://code.google.com/p/gtranslate-api-php/](http://code.google.com/p/gtranslate-api-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:55:29.400

您应该检查系统中是否安装了“he_IL”语言环境。我不知道如何在 Windows 中执行此操作，但在 Linux 中，您可以运行“locale -a”(http://linux.about.com/library/cmd/blcmdl1_locale.htm) 来查看安装的所有语言环境。

# android - Listview 自定义布局多项选择

> ID：10673840
> 
> 赞同：0
> 
> 时间：2012-05-20T13:31:24.747
> 
> 标签：android, xml, listview, simplecursoradapter

我想创建一个允许多项选择的列表视图。典型的解决方案是获取游标并使用 SimpleCursorAdapter。

```
 SimpleCursorAdapter adapter2 = new SimpleCursorAdapter(this,
                    R.layout.simple_list_item_multiple_choice, cur2, cols2, views2); 
```

使用`R.layout.simple_list_item_multiple_choice`. 选择多个项目时，我可以将复选标记工作。

所以我决定尝试使用定制的布局。这是我的布局的 XML 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/lookup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/hasphone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceSmall" />

    <CheckedTextView
        android:id="@+id/checkedTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:checkMark="?android:attr/listChoiceIndicatorMultiple"/>

</LinearLayout> 
```

所以这是我的问题。使用相同的代码并在我的列表视图上将 ChoiceMode 设置为多个，布局可以很好地膨胀。游标中的数据填充得很好。

但是，我遇到的问题是，当我单击该项目时，复选标记未显示为选中状态（在框中选中）。有什么我遗漏的东西不涉及创建自定义适配器吗？

* * *

```
l2.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

l2 是我的列表视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:07:22.943

我不在 CheckedTextView 上...据我了解，它应该在您单击该行时切换检查。

我想你可以尝试像这样强制它：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {  
    CheckedTextView chkTxt = (CheckedTextView) v.findViewById(R.id.CheckedTextView1); 
    chkTxt.toggle(); 
} 
```

请注意，这将是一个 hack，您应该真正找到根本问题，但同时它可能会让您继续前进。

**编辑**

经过多次谷歌搜索，我发现了问题......行布局的根需要检查才能使用 CheckedTextView，而 LinearLayout 不是。

更多谷歌搜索找到了解决方案......覆盖 LinearLayout 类。

说明/代码[在这里](http://tokudu.com/2010/android-checkable-linear-layout/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:49:47.263

“我遇到的问题*是复选标记未显示为选中”*的问题是因为您的布局错误。它应该没有 LinearLayout：

```
    <?xml 版本="1.0" 编码="utf-8"?>
    <文本视图
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceLarge" />

    <文本视图
        android:id="@+id/lookup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceSmall" />

    <文本视图
        android:id="@+id/hasphone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:textAppearance="?android:attr/textAppearanceSmall" />

    <CheckedTextView
        android:id="@+id/checkedTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:checkMark="?android:attr/listChoiceIndicatorMultiple" />

```

然后 SimpleCursorAdapter 可以正确设置您的“checkedTextView1”（具有可见效果）。

就我而言，我使用了 ArrayAdapter 并且它有效。

```
    list.setAdapter(new ArrayAdapter<String>(this, R.layout.category_layout,
                    R.id.category_checkedText, this.categories));

```

# android - Android - 在 datepickerdialog 中隐藏日期字段

> ID：10673842
> 
> 赞同：10
> 
> 时间：2012-05-20T13:31:31.223
> 
> 标签：android, android-datepicker

如何隐藏/删除 datepickerdialog 中的日期字段。实际上，我的要求是使用本机日期选择器对话框，但它显示为日、月和年。但根据我的要求，我只需要一个月和一年。所以我想从视图中隐藏或删除日期字段。

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-03T18:41:52.497

我不建议使用反射来做这种事情。

有一种更简单、更漂亮的方法可以做到这一点：

```
((ViewGroup) datePickerDialog.getDatePicker()).findViewById(Resources.getSystem().getIdentifier("day", "id", "android")).setVisibility(View.GONE); 
```

请注意，该`.getDatePicker()`方法`DatePickerDialog`适用于`API LEVEL >= 11`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T13:32:50.537

```
Private DatePickerDialog createDialogWithoutDateField(){

    DatePickerDialog dpd = new DatePickerDialog(_activity, ExpiryDateSetListener,cyear,cmonth, cday);
    try{
    Field[] datePickerDialogFields = dpd.getClass().getDeclaredFields();
    for (Field datePickerDialogField : datePickerDialogFields) { 
        if (datePickerDialogField.getName().equals("mDatePicker")) {
            datePickerDialogField.setAccessible(true);
            DatePicker datePicker = (DatePicker) datePickerDialogField.get(dpd);
            Field datePickerFields[] = datePickerDialogField.getType().getDeclaredFields();
            for (Field datePickerField : datePickerFields) {
               if ("mDayPicker".equals(datePickerField.getName())) {
                  datePickerField.setAccessible(true);
                  Object dayPicker = new Object();
                  dayPicker = datePickerField.get(datePicker);
                  ((View) dayPicker).setVisibility(View.GONE);
               }
            }
         }

      }
    }catch(Exception ex){
    }
  return dpd;

} 
```

使用上面的代码隐藏 DatePickerDialog 中的日期字段。

参考这个[链接](http://asmncl.blogspot.in/2012/04/android-hide-date-field-in.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-20T13:39:54.810

源代码可供您克隆、重构到您自己的包中，并根据需要进行修改[`DatePicker`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/DatePicker.java)。[`DatePickerDialog`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/DatePickerDialog.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-17T06:06:23.130

```
 private Calendar mCalendar;
    mCalendar = Calendar.getInstance();// Initialize Calendar 
```

dialog_date_picker.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/rounded_corners"
android:orientation="vertical"
android:padding="8dp">
<DatePicker
    android:id="@+id/date_picker"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="4"
    android:calendarViewShown="false"
    android:datePickerMode="spinner" />
<Button
    android:id="@+id/date_time_set"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="@color/colorPrimary"
    android:text="Set"
    android:textColor="@color/colorWhite" /></LinearLayout> 
```

单击时调用的 DialogMethod：

```
private void ExpiryDialog() {
    System.out.println("Inside Dialog Box");
    final Dialog dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.dialog_date_picker);
    dialog.show();
    final DatePicker datePicker = (DatePicker) dialog.findViewById(R.id.date_picker);
    date_time_set = (Button) dialog.findViewById(R.id.date_time_set);
    datePicker.init(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), null);

    LinearLayout ll = (LinearLayout) datePicker.getChildAt(0);
    LinearLayout ll2 = (LinearLayout) ll.getChildAt(0);
    ll2.getChildAt(1).setVisibility(View.INVISIBLE);

    date_time_set.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View view){
            dialog.dismiss();
            Integer month = datePicker.getMonth()+1;
            Integer year = datePicker.getYear();
            expMonth = (month.toString().length()   == 1 ? "0"+month.toString():month.toString());
            expYear = year.toString();
            etExpiryDate.setText(expMonth + "/" + expYear);
        }
    });
} 
```

此代码有效并将日期隐藏在 DatePicker 中，因此我可以显示卡片的到期日期。享受！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-12T09:41:21.403

```
((ViewGroup) datePickerDialog.getDatePicker()).findViewById(Resources.getSystem().getIdentifier("day", "id", "android")).setVisibility(View.GONE); 
```

这工作正常

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-02T12:58:16.520

```
Calendar c = Calendar.getInstance();
int mYear = c.get(Calendar.YEAR);
int mMonth = c.get(Calendar.MONTH);
int mDay = c.get(Calendar.DAY_OF_MONTH);
DatePickerDialog datePickerDialog = new DatePickerDialog(getActivity(), AlertDialog.THEME_HOLO_DARK,
new DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        txtMonth.setText(dayOfMonth + "-" + (monthOfYear + 1) + "-" + year);
    }

}, mYear, mMonth, mDay);
((ViewGroup) datePickerDialog.getDatePicker()).findViewById(Resources.getSystem().getIdentifier("day", "id", "android")).setVisibility(View.GONE);
datePickerDialog.show(); 
```

请参阅此链接[Disable day selection on datepicker example](http://learnlinky.com/2016/12/disable-day-selection-android-datepicker/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-24T20:17:12.540

我有点太晚了，但是在上面发布@ULHAS PATIL 提供的编辑答案，以防有人需要同样的东西！

```
private Calendar mCalendar;
mCalendar = Calendar.getInstance();// Initialize Calendar 
```

xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/DarkGrey"
    android:orientation="vertical"
    android:padding="8dp">
    <DatePicker
        android:id="@+id/date_picker"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="4"
        android:calendarViewShown="false"
        android:theme="@style/DialogTheme"
        android:datePickerMode="spinner" />
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_gravity="end"
        android:layout_height="wrap_content">

        <androidx.appcompat.widget.AppCompatButton
            android:id="@+id/cancel"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_centerVertical="true"
            android:layout_gravity="start"
            android:layout_marginVertical="20dp"
            android:layout_marginStart="50dp"
            android:background="@android:color/transparent"
            android:gravity="center"
            android:text="@string/cancel"
            android:textAllCaps="false"
            android:textColor="@color/grey"
            android:textSize="20sp" />

        <androidx.appcompat.widget.AppCompatButton
            android:id="@+id/ok"
            android:layout_width="48dp"
            android:layout_height="25dp"
            android:layout_centerVertical="true"
            android:layout_gravity="end"
            android:layout_marginVertical="20dp"
            android:layout_marginStart="0dp"
            android:layout_marginEnd="10dp"
            android:layout_toEndOf="@id/cancel"
            android:background="@android:color/transparent"
            android:fontFamily="@font/kontora_extra_bold"
            android:gravity="center"
            android:text="@string/ok"
            android:textAllCaps="false"
            android:textColor="@color/CoralRed"
            android:textSize="20sp" />
    </RelativeLayout>
</LinearLayout> 
```

应该有索引 0 来隐藏填充的日期，在 ll2.getChildAt(0).setVisibility(View.GONE); 并且可见性设置为 View.GONE，因此日期字段的空间未被占用。

```
private void createDialogWithoutDateField() {
    Calendar mCalendar;
    mCalendar = Calendar.getInstance();
    System.out.println("Inside Dialog Box");
    final Dialog dialog = new Dialog(requireContext());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.date_picker_layout);
    dialog.show();

    final DatePicker datePicker = (DatePicker) dialog.findViewById(R.id.date_picker);
    AppCompatButton okBtn = (AppCompatButton) dialog.findViewById(R.id.ok);
    AppCompatButton cancelBtn = (AppCompatButton) dialog.findViewById(R.id.cancel);
    datePicker.init(mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH), null);

    LinearLayout ll = (LinearLayout) datePicker.getChildAt(0);
    LinearLayout ll2 = (LinearLayout) ll.getChildAt(0);
    ll2.getChildAt(0).setVisibility(View.GONE);
    okBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.dismiss();
            Integer month = datePicker.getMonth() + 1;
            Integer year = datePicker.getYear();
            String expYear = year.toString();
            tvMonthYear.setText(month+ " " + expYear);
        }
    });
 cancelBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.dismiss();
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-07-10T15:00:04.830

我认为除非你想定制它，否则你不需要那么深入。有：

```
mDatePicker.getDatePicker().setCalendarViewShown(false); 
```

这是删除日历段的非常合法的调用。

# iphone - 适用于 iOS 的 Google Drive 与 Google Doc？

> ID：10673845
> 
> 赞同：1
> 
> 时间：2012-05-20T13:31:39.133
> 
> 标签：iphone, ios, google-docs-api, google-drive-api

我有一个 iOS 应用程序，它使用 Google Docs List API 来访问和下载电子表格数据。我已经完成了一项基本测试，将我的 Google Docs 帐户升级到 Google Drive，一切似乎仍然正常。

根据这个问题的答案[Google Document List API and Google Drive SDK](https://stackoverflow.com/questions/10320123/google-document-list-api-and-google-drive-sdk)看起来事情会继续工作一段时间。

移动开发人员现在应该采取哪些步骤来迁移到新的 API？我主要担心的是，到目前为止，大多数开发人员文档都与网络应用程序相关，而不是移动应用程序，因此注册 chrome 网上商店等要求似乎不适合。例如：

“警告：除非应用程序已安装在 Chrome Web Store 中，否则应用程序将无法对文件进行任何 API 访问。要在开发期间测试应用程序，您必须首先创建一个列表并安装它。”

任何指导或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:41:08.443

检查此答案以了解 Chrome Web Store 安装背后的基本原理：[https ://stackoverflow.com/a/10476737/186674](https://stackoverflow.com/a/10476737/186674)

此外，我们正在考虑删除开发和测试阶段的安装要求，我们应该很快就会有一些更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:21:14.187

使用 Documents List API 的 iOS 应用程序现在应该更新为使用 Google Drive API 和更新的[用于 Objective-C 的 Google APIs 客户端库](http://code.google.com/p/google-api-objectivec-client/)。

新的 API 和库比旧的 GData 替代品更容易使用和更高效。

# c - 将函数指针设置为静态地址

> ID：10673848
> 
> 赞同：3
> 
> 时间：2012-05-20T13:31:51.433
> 
> 标签：c, function-pointers

我正在将一个 DLL 注入另一个进程，并希望根据它的地址 (0x54315) 调用该二进制文件中的一个函数。

我怎样才能真正声明一个函数，然后将它设置为这个地址？

```
#define FUNC 0x54315

void *myFuncPtr;

int main()
{
 myFuncPtr = FUNC;  // pretty sure this isn't how

 myFuncPtr(); // call it?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T13:39:10.077

您需要定义`myFuncPtr`为函数指针， a`void*`不可调用。

最好为此使用 typedef：

```
typedef void (*funptr)(void);
funprt myFuncPtr; 
```

（假设你的函数什么都不带，什么也不返回。）

然后你会得到一个关于赋值的警告——使用类型转换来“沉默”它，因为这确实是你需要做的。

但是，如果签名不匹配，调用约定错误或地址错误，编译器将无法验证任何内容，那么您几乎可以自己解决问题，而您可以自行处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T15:50:13.673

现有的答案有效，但您甚至不需要函数指针的变量。你可以这样做：

```
#define myfunc ((void (*)(void))0x54315) 
```

然后`myfunc()`像调用普通函数一样调用它。请注意，您应该更改强制转换中的类型以匹配函数的实际参数和返回类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T13:35:01.470

一旦语法被更正为实际上是函数指针，您的代码应该可以工作。我没有正确阅读此答案的第一个版本。对不起。

正如 Mat 所述，函数指针的正确语法是：

```
void (*myFuncPtr)(void) = (void (*)(void)) FUNC; 
```

这通常通过使用 a 来简化，`typedef`因为 C 函数指针语法有些复杂。

此外，每次注入的 DLL 运行时，您必须确定要调用的函数位于相同的确切地址。我不知道你怎么能确定这一点，虽然......

此外，您需要注意调用约定和函数`FUNC`可能期望的任何参数，因为如果您弄错了，您可能最终会导致堆栈损坏。

# java - 如何从 hashmap 值中获取对象数组的数组？

> ID：10673854
> 
> 赞同：0
> 
> 时间：2012-05-20T13:32:20.033
> 
> 标签：java, hashmap

请原谅没有很好地阐述这个问题。我相信下面的例子会告诉你我的意思。我需要从哈希图中获取 anObject 的所有值。正如您从下面的示例中看到的那样，键是一个对象，值是一个对象的数组。

```
HashMap<anObject,anObject[]> testMap = new HashMap<anObject,anObject[]>(); //Define map

anObject someObject1 = new anObject("one");
anObject someObject2 = new anObject("two")

anObject[] manyObjects1 = new anObject[3];
manyObjects1[0] = new anObject(0);
manyObjects1[1] = new anObject(1);
manyObjects1[2] = new anObject(2);
anObject[] manyObjects2 = new anObject[3];
manyObjects2[0] = new anObject(0);
manyObjects2[1] = new anObject(1);
manyObjects2[2] = new anObject(2);

testMap.put(someObject1,manyObjects1);
testMap.put(someObject2,manyObjects2);

//Get anObject from all the values put into testMap
anObject[] getAllValues1 = (anObject[])testMap.values().toArray; //is this correct or
anObject[][] getAllValues2 = (anObject[][])testMap.values().toArray; //is this correct 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:36:13.327

你想使用[`toArray(T[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#toArray%28T%5B%5D%29)：

```
Collection values = testMap.values();
anObject[][] getAllValues2 = (anObject[][])values.toArray(new anObject[values.size()][]); 
```

因为您要返回映射中的值数组，并且映射中的值是数组，所以您需要表明您要返回数组数组，所以`[][]`.

# machine-learning - weka - 标准化标称值

> ID：10673860
> 
> 赞同：0
> 
> 时间：2012-05-20T13:33:07.697
> 
> 标签：machine-learning, normalization, weka, svm

我有这个数据集：

```
Instance num 0 : 300,24,'Social worker','Computer sciences',Music,10,5,5,1,5,''
Instance num 1 : 1000,20,Student,'Computer engineering',Education,10,5,5,5,5,Sony
Instance num 2 : 450,28,'Computer support specialist',Business,Programming,10,4,1,0,4,Lenovo
Instance num 3 : 1000,20,Student,'Computer engineering','3d Design',1,1,2,1,3,Toshiba
Instance num 4 : 1000,20,Student,'Computer engineering',Programming,2,5,1,5,4,Dell
Instance num 5 : 800,16,Student,'Computer sciences',Education,8,4,3,4,4,Toshiba 
```

我想使用 SMO 和其他多类分类器进行分类，所以我使用以下代码将所有标称值转换为数字：

```
int [] indices={2,3,4,10};  // indices of nominal columns
for (int i = 0; i < indices.length; i++) {
  int attInd = indices[i];
  Attribute att = data.attribute(attInd);
  for (int n = 0; n < att.numValues(); n++) {

    data.renameAttributeValue(att, att.value(n), "" + n);
  }
} 
```

结果是：

```
Instance num 0 : 300,24,0,0,0,10,5,5,1,5,0
Instance num 1 : 1000,20,1,1,1,10,5,5,5,5,1
Instance num 2 : 450,28,2,2,2,10,4,1,0,4,2
Instance num 3 : 1000,20,1,1,3,1,1,2,1,3,3
Instance num 4 : 1000,20,1,1,2,2,5,1,5,4,4
Instance num 5 : 800,16,1,0,1,8,4,3,4,4,3 
```

应用“标准化”过滤器后，结果将如下所示：

```
Instance num 0 : 0,0.666667,0,0,0,1,1,1,0.2,1,0
Instance num 1 : 1,0.333333,1,1,1,1,1,1,1,1,1
Instance num 2 : 0.214286,1,2,2,2,1,0.75,0,0,0.5,2
Instance num 3 : 1,0.333333,1,1,3,0,0,0.25,0.2,0,3
Instance num 4 : 1,0.333333,1,1,2,0.111111,1,0,1,0.5,4
Instance num 5 : 0.714286,0,1,0,1,0.777778,0.75,0.5,0.8,0.5,3 
```

问题是仍在字符串“标准化”过滤器中的转换列不会标准化它们......

有任何想法吗？

我的第二个问题：除了 SMO，我应该使用什么作为多类分类器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T00:07:15.093

***不要***将名词/分类转换为浮点数（/整数），然后对其进行规范化。这是没有意义的。垃圾进垃圾出。将它们视为连续数字或数字向量会给出无意义的结果，例如*“'Engineering' + 'Nursing' = 'Architecture' 的平均值”*

**处理名词/分类的正确方法是将每个变量转换为虚拟变量**（也称为“虚拟编码”或“二分法”）。假设如果 Occupation 列（或 Major、Elective 或其他）有 K 个级别，那么您创建 K 或 (K-1) 个二进制变量，除了一个包含 1 的对应列之外，它们处处为 0。查找 Weka 文档以找到正确的函数调用。

参看。例如[SO：名义属性的虚拟编码（用于逻辑回归）](https://stackoverflow.com/questions/18433672/dummy-coding-of-nominal-attributes-effect-of-using-k-dummies-effect-of-attrib)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-12T10:51:06.680

我相信将字符串转换为数字的最佳方法可以使用 filter 来完成`weka.filters.unsupervised.attribute.StringToWordVector`。

这样做之后，您可以应用“标准化”过滤器`weka.classifiers.functions.LibSVM`。

# python - 确保测试用例可以删除它创建的临时目录

> ID：10673866
> 
> 赞同：3
> 
> 时间：2012-05-20T13:33:36.053
> 
> 标签：python, apache, file-permissions, rsync

（平台：Linux，特别是 Fedora 和 Red Hat Enterprise Linux 6）

我有一个用 Python 编写的[集成测试，它执行以下操作：](http://git.fedorahosted.org/git/?p=pulpdist.git;a=blob;f=src/pulpdist/pulp_plugins/tests/test_importers.py;h=5f80e69a95392ae7fd968316cc353d3b6a343c76;hb=HEAD#l172)

*   创建一个临时目录
*   告诉 Web 服务（在 apache 下运行）运行将文件复制到该目录的 rsync 作业
*   检查文件是否已正确复制（即配置已正确从客户端传递到通过 Web 服务的 rsync 调用）
*   （试图）删除临时目录

目前，最后一步失败了，因为 rsync 正在创建文件并将其所有权设置为 apache 用户的所有权，因此测试用例没有删除文件的必要权限。

这个[服务器故障问题](https://serverfault.com/questions/150339/how-to-remove-a-non-empty-directory-which-is-not-owned-by-the-user-in-linux)很好地解释了为什么在集成测试设置的情况下清理步骤当前失败。

我目前所做的：我只是不删除测试清理中的临时目录，因此这些集成测试会留下需要`/tmp`手动清除的虚拟文件。

我目前考虑的主要解决方案是添加一个 setuid 脚本专门用于处理测试套件的清理操作。这应该可行，但我希望其他人可以提出更优雅的解决方案。具体来说，如果集成测试客户端中不需要关心 apache 进程的 uid，我会非常喜欢它。

我考虑过但由于各种原因拒绝的方法：

*   以 root 身份运行测试用例。这确实有效，但需要以 root 身份运行测试套件相当难看。
*   在测试套件创建的目录上设置粘性位。据我所知，rsync 忽略了这一点，因为它设置为从远程服务器复制标志。但是，即使将设置调整为仅复制执行位似乎也无济于事，所以我仍然不确定为什么这不起作用。
*   将测试用户添加到 apache 组。由于 rsync 在没有组写权限的情况下创建文件，这没有帮助。
*   以测试用户身份运行 Apache 实例并对其进行测试。这有一些优点（因为集成测试不需要 apache 已经在运行），但缺点是我将无法针对已使用生产设置预配置的 Apache 实例运行集成测试确保*这些*是正确的。因此，即使我最终可能会将此功能添加到测试套件中，但它不会*替代*更直接地解决当前问题。

我真的不想做的另一件事是更改传递给 rsync 的设置，以便测试套件可以正确清理临时目录。这是服务守护进程的集成测试，所以我想使用尽可能接近生产的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:37:27.333

将测试用户添加到 apache 组（或 httpd 组，以对文件具有组所有权的为准）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:08:03.717

在该服务器故障问题的答案的帮助下，我能够使用`setfacl`.

为集成测试创建临时目录的代码现在执行以下操作（它是`unittest.TestCase`实例的一部分，因此引用`addCleanup`）：

```
local_path = tempfile.mkdtemp().decode("utf-8")
self.addCleanup(shutil.rmtree, local_path)
acl = "d:u:{0}:rwX".format(os.geteuid())
subprocess.check_call(["setfacl", "-m", acl, local_path]) 
```

前两行只是创建临时目录并确保它在测试结束时被删除。

最后两行是新部分，并为目录设置默认 ACL，以便测试用户始终具有读/写访问权限，并且还将对设置了执行位的任何内容具有执行权限。

# java - 如何按我添加的顺序获取 JInternalFrame

> ID：10673867
> 
> 赞同：3
> 
> 时间：2012-05-20T13:33:52.590
> 
> 标签：java, arrays, swing, jinternalframe, jdesktoppane

我试图在我的 JDesktopPane 中访问 JInternalFrame 并使用 getAllFrames 方法。

我只想按照我添加到 JDesktopPane 中的顺序访问 JInternalFrame。例如，我添加 a,b,c

```
frames[0] contain a
frames[1] contain b
frames[2] contain c 
```

但我发现如果我改变我的选择，数组中的内容会改变。每次我改变我的选择。数组中选定的 JInternalFrame 将移动到顶部。

比如我选择 b 数组就会变成

```
frames[0] contain b
frames[1] contain a
frames[2] contain c 
```

有没有其他方法可以按照我将其添加到桌面窗格中的顺序获取内部框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:13:34.023

```
 package org.app;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.event.InternalFrameAdapter;
import javax.swing.event.InternalFrameEvent;

public class MainFrame extends JFrame{
    private static final long serialVersionUID = 1L;    
    private JDesktopPane theDesktop;
    private List<JInternalFrame> frameList=new ArrayList<>();

public MainFrame()  {
    super("Internal Frame Demo");
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(800,600);
    this.setJMenuBar(setMenubar());
    theDesktop=new JDesktopPane();
    this.add(theDesktop);
    this.setVisible(true);
}

public JMenuBar setMenubar()    {
    JMenuBar bar=new JMenuBar();
    JMenu addMenu=new JMenu("Add");
    JMenuItem newFrame=new JMenuItem("Internal Frame");
    newFrame.addActionListener(new MenuAction());
    addMenu.add(newFrame);
    bar.add(addMenu);
    return bar;
}

public JInternalFrame addInternalFrame()    {
    JInternalFrame jif=new JInternalFrame("Internal frame",true,true,true,true);
    jif.setSize(new Dimension(240, 300));       
    jif.addInternalFrameListener(new InternalFrameAdapter() {
        @Override
        public void internalFrameClosing(InternalFrameEvent e){             
            frameList.remove(e.getInternalFrame());                 
            System.out.println("from frame closing event");         
        }
    });
    jif.show();
    return jif;
}   
public JInternalFrame getInternalFrame(int index)   {
    return frameList.get(index);
}   
class MenuAction implements ActionListener  {
    @Override
    public void actionPerformed(ActionEvent e) {            
        JInternalFrame f=addInternalFrame();
        theDesktop.add(f);
        frameList.add(f);           
        System.out.println("from menu action");
    }           
}   
public static void main(String[] args){
    new MainFrame();
} 
```

}

# c# - 在 foreach 语句中处理强制转换异常

> ID：10673871
> 
> 赞同：3
> 
> 时间：2012-05-20T13:34:36.823
> 
> 标签：c#, error-handling, enumeration

好的，假设我在 C# .Net 中有一个对象数组，如下所示：

```
object[] myObjects = new object[9];
myObjects[0] = "Foo";
myObjects[1] = 3;
myObjects[2] = 2.75;
myObjects[3] = "Bar";
myObjects[4] = 675;
myObjects[5] = "FooBar";
myObjects[6] = 12;
myObjects[7] = 11;
myObjects[8] = "FooBarFooBar"; 
```

我想在 foreach 块中枚举这个数组并使用 StreamWriter 将每个字符串写入文本文档，如下所示：

```
StreamWriter sw = new StreamWriter(@"C:\z\foobar.txt");

foreach(string myObject in myObjects)
{
    sw.WriteLine(myObject);
}

sw.Flush();
sw.Close(); 
```

我的问题是，每当我尝试将`integers`and`doubles`转换`String`为时，都会引发异常。

如果我在语句`try/catch`周围放置一个块`foreach`，则在第二次迭代中引发的异常将触发对异常的捕获，并且不会将任何内容写入我的文本文档。

将 try/catch 放在 foreach 中是没有意义的，因为异常发生在演员表上。

我想使用 foreach 循环（让我们假设 for 循环不存在，并且我们不能使用索引 or `ToString()`）来枚举对象数组，将每个对象转换为字符串并使用`StreamWriter`. 如果演员工作，快乐的日子。如果没有，我想捕获抛出的异常并继续枚举剩余的对象。

谢谢

**编辑：**在有人说之前，这不是家庭作业！我正在尝试解决一个现实世界的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T13:41:24.077

因为您期望异构集合，所以最好避免`InvalidCastException`首先抛出。[阅读 Eric Lippert 出色的Vexing exceptions](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)文章中的“愚蠢的异常” 。

**选项 1：**使用 LINQ[`OfType<TResult>()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)扩展方法仅挑选指定类型的元素：

```
// using System.Linq;

foreach(string myObject in myObjects.OfType<string>())
{
    sw.WriteLine(myObject);
} 
```

**选项2：**自己检查类型：

```
foreach(object myObject in myObjects)
{
    string s = myObject as string;
    if (s != null)
        sw.WriteLine(s);
} 
```

此选项易于扩展以处理多种类型。

**更新：**

> 好的，但是如果在一些奇怪的情况下，仍然在这条线上抛出异常会发生什么。有没有办法处理异常然后继续我的枚举？

以下是在线上可能引发异常的其他方式`foreach`，您无法明智地处理这些方式：

*   `myObjects.GetEnumerator()`抛出异常。在这种情况下，根本无法启动枚举。
*   `IEnumerator<string>.MoveNext()`抛出异常。在这种情况下，枚举器很可能已损坏，无法继续枚举。
*   一些其他类型的致命异常会发生：`OutOfMemoryException`,`StackOverflowException`等。在这种情况下，你应该让进程死掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:56:10.663

您不需要将对象投射到自己的字符串中。StreamWriter 有一个重载，它接受对象并自动进行强制转换（[MSDN 链接](http://msdn.microsoft.com/en-us/library/4zcc928k.aspx)）：

```
foreach (object myObject in myObjects)
{
    sw.WriteLine(myObject);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:08:34.493

你不能抓住并继续吗？

```
StreamWriter sw = new StreamWriter(@"C:\z\foobar.txt");

foreach(string myObject in myObjects)
{
    try
    {
      sw.WriteLine(myObject);
    }
    catch (Exception ex)
    {
      // process exception here
      continue;
    }
}

sw.Flush();
sw.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T15:08:33.510

好的。我知道这个问题已经回答了。但我觉得这很有趣。如果您想真正掌握`foreach`循环中抛出的所有异常，您可以将其存储为 Exception 类型的通用列表，稍后您可以将其作为`AggregateException`

[此博客文章](http://msdn.microsoft.com/en-us/magazine/ee321571.aspx)和此[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)中的更多信息

这是我与您的场景相对应的实现（这将捕获在 foreach 循环中引发的所有异常，并且在对象数组完全循环之前循环不会中断）

```
 try
        {
            List<Exception> exceptions = null;
            foreach (object myObject in myObjects)
            {                    
                try
                {
                    string str = (string)myObject;
                    if (str != null)
                    {
                        sw.WriteLine(str);
                    }
                }
                catch (Exception ex)
                {
                    if (exceptions == null)
                        exceptions = new List<Exception>();
                    exceptions.Add(ex);
                }
            }

            if (exceptions != null) 
                throw new AggregateException(exceptions);                
        }
        catch(AggregateException ae)
        {
            //Do whatever you want with the exception or throw it
            throw ae;
        } 
```

# java - Liferay 门户中有哪些技术

> ID：10673875
> 
> 赞同：3
> 
> 时间：2012-05-20T13:35:33.623
> 
> 标签：java, liferay

我只是对着名的Java门户网站liferay门户感到好奇。但我不知道，liferay 中集成了多少技术，它们是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T13:43:00.957

Liferay 是使用当今最流行的企业 Java 开发堆栈构建的，即 Spring on Hibernate。它的 Web 端使用 JSP 和 Struts 框架，这是从 Struts 成为事实上的 Java Web 框架的日子开始的。客户端 UI 使用一个名为 AlloyUI 的 JavaScript 框架，该框架由 Liferay 内部开发，构建在 Yahoo YUI 用户界面库之上。

还有其他几个框架构成了门户的基本要素，包括名为 Kaleo 的内部 BPM 引擎、用于内容管理和索引的 Apache JackRabbit 和 Lucene。

如果您想了解有关 Liferay 的更多信息并想开始为其开发，他们的开发人员和高级开发人员课程非常好，并且可以让您快速提高工作效率，因为您已经掌握了 Java 并且知道一点 JavaScript 和 CSS。如果您还没有了解门户的逻辑架构的概述以及使它运行的开源组件的组合，请查看[此页面。](http://www.liferay.com/community/wiki/-/wiki/Main/Logical+Architecture)还可以查看[技术规格](http://www.liferay.com/products/liferay-portal/tech-specs)页面，该页面提供了所有采用的技术和框架的列表。

# java - rt.jar com.sun.istack.internal 包

> ID：10673876
> 
> 赞同：7
> 
> 时间：2012-05-20T13:35:49.837
> 
> 标签：java, sun

jre 在 rt.jar 中附带了许多库，其中之一是 com.sun.istack.internal*。我需要 com.sun.istack.internal.Nullable 的文档（~~我发现谷歌在其 CacheBuilder 中使用了它~~），首先我想去 docs.oracle.com 找到它的文档，但我什么也没找到. 接下来转到使用 jdk 获取的源文件夹，我没有在所述文件夹中找到 com 名称实体。接下来我看一下 jre7 版本并查看所有包和类，发现那里没有提到 Nullable。虽然 SO 有一次[提到它](https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use)，但没有什么具体的。如果需要，我仍然很困惑从哪里获得它的文档和 src。我什至在 oracle 上查看了遗留的 sun api 文档，但没有提及它。oracle 在哪里记录了关于移植包的政策以及它们是标准的还是非标准的。他们一定已经在某个地方记录了它，只是我花了太多时间才到达那里。

请指点我那里。

编辑：实际上 javax.annotation.Nullable 正在谷歌 CacheBuilder 中使用，而不是 com.sun.istack.internal.Nullable。同样对于可能面临这个问题的人：javax.annotation.Nullable 目前还不是 Java SE 的一部分，它正在被移植到 jsr305 jar 中。因此，如果您打算使用 CacheBuilder 或只是浏览其代码，请在您的类路径中添加 jsr305 jar，否则 eclipse 会混淆并在您将光标悬停在 Nullable 上时将您指向 com.sun.istack.intenal.Nullable .

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T13:48:06.580

番石榴不使用`com.sun.istack.internal.Nullable`. 官方 Java SE javadoc 中未记录的所有内容都是内部代码，不应在应用程序中使用。

您可能正在寻找`javax.annotation.Nullable`，它是[JSR305](http://mvnrepository.com/artifact/com.google.code.findbugs/jsr305)的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T13:47:12.390

这是源代码的链接：

*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/istack/internal/Nullable.java/](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/istack/internal/Nullable.java/)

（此链接将来可能会中断，但您应该能够使用 Google 搜索找到等效链接。）

在标准 JDK/JRE 发行版中找不到源代码或 javadocs 的原因是这是一个 INTERNAL 类。长期以来，Oracle / Sun 的政策是不鼓励开发人员编写依赖于 Java 内部类的代码。

FWIW - 这只是一个注释，其含义几乎就是类名所暗示的。

* * *

**更新**- 显然，造成这种混乱的真正原因是您没有在构建路径中包含 JSR305 jar。它是`CacheBuilder`. 然后 Eclipse 类名完成正在尽其所能......但失败了。

# java - Spring中的CancelableFormController

> ID：10673880
> 
> 赞同：2
> 
> 时间：2012-05-20T13:36:24.057
> 
> 标签：java, forms, spring, jsp

我正在尝试创建一个可以取消的表单。我发现存在 CancelableFormController 类。但是找不到一个很好的解释如何使用它。我的理解是您必须在请求中提供一个变量。但是你如何在弹簧形式中做到这一点？如果有人可以帮助我实现这一点。或者只是将我指向一个好的教程，因为我找不到一个。

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:06:08.497

这是`SimpleFormController`自 Spring 3 起已弃用的 API 的一部分，因此我不鼓励使用它。带注释的 MVC 中的替代类实际上并不存在，但可以使用多个请求映射提供（来自[spring 论坛](http://forum.springsource.org/showthread.php?113551-CancellableFormController-equivalent-with-spring-3-annotation)的修改示例）：

```
@RequestMapping(params="cancel=true")
public String doCancel() {
    return "cancelView";
}

@RequestMapping(params="cancel!=true")
public String formSubmit(@ModelAttribute MyModelObject obj) {
    processForm(obj);
    return "successView";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:17:59.047

越简单通常越好。“取消”表单的最简单方法就是不提交它。为什么不让取消“按钮”成为一个链接，将用户（直接）带到您希望用户在取消后去的任何地方？

如果您更喜欢按钮，只需将链接样式设置*为*按钮即可。

唯一不起作用的情况是您需要在取消时采取特定操作，但通常情况并非如此。如果是这样，这意味着有一些与表单相关的状态或上下文在表单*外部*。在这种情况下，您应该使用 Spring Web Flow 之类的东西，并且它具有处理状态转换的完善约定（取消只是一种特殊情况）。

但是，最有可能的`<a href="...">Cancel</a>`是，您只需要一个简单的。没有必要把事情复杂化！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:10:07.223

随着简单表单控制器的实现，有多种方法可以向客户端提供初始视图和成功视图。但是当用户取消表单时会发生什么？谁来处理 Form 的 Cancel 操作？

使用 Cancelable FormController 可以立即解决上述问题。好消息是 Cancelable FormController 扩展了 SimpleForm 控制器，因此该控制器也可以看到所有功能。假设用户单击取消按钮，框架将在请求参数中检查名称为“cancelParamKey”的键。如果是这样，那么它将调用 onCancel() 方法。考虑以下定义，

```
public class MyCompleteFormController extends CancellableFormController{

    public ModelAndView onCancel(){
        return new ModelAndView("cancelView");
    }
} 
```

# android - 用于打开从 SQL 服务器获取的 html 的 Android 应用程序

> ID：10673883
> 
> 赞同：1
> 
> 时间：2012-05-20T13:37:03.790
> 
> 标签：android, sql

我想在 SQL 服务器上存储 HTML 文件，这些 html 文件将是需要填写的表单。

然后我希望我的 Android 应用程序连接到 sql 服务器并打开一个特定的 html 文件。

我有将我的 html 表单数据提交到 sql server 的代码。只是不确定如何从服务器获取 html 文件并在我的应用程序中查看它。

注意（[http://www.roseindia.net/answers/viewqa/JSP-Servlet/12153-Sending-form-data-from-HTML-page-to-SQLserver-2005-database-by-calling-servlet- code.html](http://www.roseindia.net/answers/viewqa/JSP-Servlet/12153-Sending-form-data-from-HTML-page-to-SQLserver-2005-database-by-calling-servlet-code.html) ) 用于将 html 数据发送到 sql server

任何帮助/想法

谢谢，罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:44:45.153

最简单的方法是使用 a`WebView`并将其位置设置为用于从服务器检索 HTML 文件的 URL。

# vb.net - 我从 vb.net 应用程序连接到的网站的数据库未更新

> ID：10673888
> 
> 赞同：0
> 
> 时间：2012-05-20T13:37:51.577
> 
> 标签：vb.net, visual-studio-2010

我在 VB.NET 中有一个 Windows 应用程序和一个 IIS 网站。我正在使用 Visual Studio 2010 速成版。

我的 Windows 应用程序使用来自网站数据库的数据。我已经连接到数据库，但是当通过网站将新数据插入数据库时​​，在我的 Windows 应用程序中，数据库不包含该新数据。

我需要更新数据库。我怎样才能做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T23:08:42.607

将您的 Windows 应用程序数据库连接指向网站数据库。例如，如果您的网站位于 C:\inetpub\yourwebsite\App_Data，那么您可以执行以下任一操作：

在 AttachDbFilename 中设置路径

```
Dim con As SqlConnection = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=C:\inetpub\yourwebsite\App_Data\Service1.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True") 
```

或者使用相对路径

```
AppDomain.CurrentDomain.setData(“DataDirectory”,”C:\inetpub\yourwebsite\App_Data\”);
Dim con As SqlConnection = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Service1.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True") 
```

# c# - DTO 的自定义数组项名称

> ID：10673890
> 
> 赞同：2
> 
> 时间：2012-05-20T13:37:53.540
> 
> 标签：c#, xml, wcf, xml-serialization, datacontractserializer

我的一个客户有他想要发送到我们正在创建的服务的 XML 数据。示例消息可能如下所示：

```
<SomeRootElement>
  <Dates>
    <Date>2012-05-20T00:00:00</Date>
    <Date>2012-05-21T00:00:00</Date>
  </Dates>
</SomeRootElement> 
```

`DataContract`我在我的 WCF 服务应用程序上定义了一个相应的类型：

```
[DataContract]
public class SomeRootElement {
    [DataMember]
    public ICollection<DateTime> Dates { get; set; }
} 
```

问题在于，基于这个定义，WCF 希望`Dates`集合看起来像：

```
<Dates>
  <dateTime>2012-05-20T00:00:00</dateTime>
  <dateTime>2012-05-21T00:00:00</dateTime>
</Dates> 
```

有没有办法影响数组项的序列化元素名称？这曾经很容易使用 XML 序列化属性，但`DataContractSerializer`忽略了这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:13:46.877

这应该可以解决问题：

```
[DataContract]
[KnownType(typeof(DateList))]
public class SomeRootElement {
    [DataMember]
    public ICollection<DateTime> Dates { get; set; }
}

[CollectionDataContract(ItemName="date")]
public class DateList : Collection<DateTime>  {} 
```

您正在覆盖它可用于反序列化 ICollection 以获取自定义类型的类型。

# php - Regular expression to match single dot but not two dots?

> ID：10673892
> 
> 赞同：8
> 
> 时间：2012-05-20T13:38:14.357
> 
> 标签：php, regex, pattern-matching

Trying to create a regex pattern for email address check. That will allow a dot (.) but not if there are more than one next to each other.

Should match: test.test@test.com

Should not match: test..test@test.com

Now I know there are thousands of examples on internet for e-mail matching, so please don't post me links with complete solutions, I'm trying to learn here.

Actually the part that interests me the most is just the local part: test.test that should match and test..test that should not match. Thanks for helping out.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T13:56:58.360

You may allow any number of `[^\.]` (any character except a dot) and `[^\.])\.[^\.]` (a dot enclosed by two non-dots) by using a disjunction (the pipe symbol `|`) between them and putting the whole thing with `*` (any number of those) between `^` and `$` so that the entire string consists of those. Here's the code:

```
$s1 = "test.test@test.com";
$s2 = "test..test@test.com";
$pattern = '/^([^\.]|([^\.])\.[^\.])*$/';
echo "$s1: ", preg_match($pattern, $s1),"<p>","$s2: ", preg_match($pattern, $s2); 
```

Yields:

```
test.test@test.com: 1
test..test@test.com: 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T13:50:35.217

This seams more logical to me:

```
/[^.]([\.])[^.]/ 
```

And it's simple. The look-ahead & look-behinds are indeed useful because they don't capture values. But in this case the capture group is only around the middle dot.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:53:48.947

```
strpos($input,'..') === false 
```

`strpos` function is more simple, if `$input' has not '..' your test is success.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T13:48:37.303

```
^([^.]+\.?)+@$ 
```

That should do for the what comes before the `@`, I'll leave the rest for you. Note that you should optimise it more to avoid other strange character setups, but this seems sufficient in answering what interests you

Don't forget the `^` and `$` like I first did :(

Also forgot to slash the `.` - silly me

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-26T16:54:00.090

To answer the question *in the title*, I'd update the RegExp by Junuxx and allow dots in the beginning and end of the string:

```
'/^\.?([^\.]|([^\.]\.))*$/' 
```

which is optional `.` in the beginning followed by any number of non-`.` or [non-`.` followed by `.`].

# java - java flickr和flickrj下载用户图片

> ID：10673895
> 
> 赞同：0
> 
> 时间：2012-05-20T13:39:17.347
> 
> 标签：java, flickr, flickrj

嗨，我是 flickrj 库的新手。
虽然有基础的java知识。
我正在进行的项目要求我在 flickr 中进行身份验证，然后将带有地理标记的图像下载到本地硬盘驱动器的文件夹中。该程序将是桌面应用程序。
我正在通过分解为 3 个步骤来处理该程序。

1.要完成正确的身份验证。（我已经成功了）
2.尝试下载用户通过身份验证时拥有的所有照片。
3.试着稍微修改一下代码，让它只下载地理标记的图像。

我的问题在第 2 步。我无法下载已登录的用户图像，更不用说带有地理标记的图像了。我在[这里](https://stackoverflow.com/questions/991623/flickr-api-java-flickrj)
尝试 Daniel Cukier 提供的代码， 但我遇到了问题。我的 netbeans 只是在 .getOriginalAsStream() 部分的第 77 行删除了错误“java.lang.RuntimeException：无法编译的源代码 - 错误的 sym 类型：java.io.ByteArrayOutputStream.write”
根据我的理解，netbeans 删除了一条线意思是，它已经折旧，但它不应该仍然有效吗？是什么阻碍了整个问题？

我已经尝试过研究，基本上我不得不承认，排除故障超出了我的能力。如果有人对我做错了什么有任何想法，我将不胜感激。
Ps：我不希望被勺子喂食，但请以白痴友好的方式回答我，因为我还是个学生，我的 java 不是最好的。

这段代码是我到目前为止所拥有的。

```
import com.aetrion.flickr.*;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.Properties;

import javax.xml.parsers.ParserConfigurationException;

import org.xml.sax.SAXException;

import com.aetrion.flickr.auth.Auth;
import com.aetrion.flickr.auth.AuthInterface;
import com.aetrion.flickr.auth.Permission;
import com.aetrion.flickr.photos.Photo;
import com.aetrion.flickr.photos.PhotoList;
import com.aetrion.flickr.photos.PhotosInterface;
import com.aetrion.flickr.util.IOUtilities;
import java.io.*;
import java.util.Iterator;
import org.apache.commons.io.FileUtils;

public class authenticate {
Flickr f;
RequestContext requestContext;
String frob = "";
String token = "";
Properties properties = null;

public authenticate() throws ParserConfigurationException, IOException, SAXException {
    InputStream in = null;
    try {
        in = getClass().getResourceAsStream("/setup.properties");
        properties = new Properties();

        properties.load(in);
    } finally {
        IOUtilities.close(in);
    }
    f = new Flickr(
        properties.getProperty("apiKey"),
        properties.getProperty("secret"),
        new REST()
    );
    Flickr.debugStream = false;
    requestContext = RequestContext.getRequestContext();
    AuthInterface authInterface = f.getAuthInterface();
    try {
        frob = authInterface.getFrob();
    } catch (FlickrException e) {
        e.printStackTrace();
    }
    System.out.println("frob: " + frob);
    URL url = authInterface.buildAuthenticationUrl(Permission.DELETE, frob);
    System.out.println("Press return after you granted access at this URL:");
    System.out.println(url.toExternalForm());
    BufferedReader infile =
      new BufferedReader ( new InputStreamReader (System.in) );
    String line = infile.readLine();
    try {
        Auth auth = authInterface.getToken(frob);
        System.out.println("Authentication success");
        // This token can be used until the user revokes it.
        System.out.println("Token: " + auth.getToken());
        System.out.println("nsid: " + auth.getUser().getId());
        System.out.println("Realname: " + auth.getUser().getRealName());
        System.out.println("Username: " + auth.getUser().getUsername());
        System.out.println("Permission: " + auth.getPermission().getType());

        PhotoList list = f.getPhotosetsInterface().getPhotos("72157629794698308", 100, 1);
        for (Iterator iterator = list.iterator(); iterator.hasNext();) {
        Photo photo = (Photo) iterator.next();
        File file = new File("/tmp/" + photo.getId() + ".jpg");
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        b.write(photo.getOriginalAsStream());
        FileUtils.writeByteArrayToFile(file, b.toByteArray());
}

    } catch (FlickrException e) {
        System.out.println("Authentication failed");
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    try {
        authenticate t = new authenticate();
    } catch(Exception e) {
        e.printStackTrace();
    }
    System.exit(0);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:35:10.570

You are correct in your interpretation of the strikeout that [getOriginalAsStream()](http://flickrj.sourceforge.net/api/com/aetrion/flickr/photos/Photo.html#getOriginalAsStream%28%29) is deprecated. It looks like you might want to rework your code to use [PhotosInterface.getImageAsStream()](http://flickrj.sourceforge.net/api/com/aetrion/flickr/photos/PhotosInterface.html#getImageAsStream%28com.aetrion.flickr.photos.Photo,%20int%29), passing the ORIGINAL size as one of the arguments.

To adjust NetBeans' behavior with respect to deprecated methods, you can follow the link recommended by @AljoshaBre as well as [this one](https://stackoverflow.com/questions/7663221/where-can-i-find-the-xlint-option-in-netbeans).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-29T11:29:08.440

如果您想从 Flickr 下载所有照片，如果您有一台 Mac 电脑，这是可能的。
在 Apple Store 下载 Aperture 程序并安装。
安装后，打开光圈。
继续偏好。
单击“帐户”选项卡。
单击左下角的加号 (+) 添加照片服务。
添加闪烁选项。
按照登录和授权说明进行操作。
完毕！您的所有照片都将在您的光圈库中同步，位于 ~/images/

我希望我有所帮助。

# python - 使用 Python 从异常页面再次爬取

> ID：10673896
> 
> 赞同：0
> 
> 时间：2012-05-20T13:39:26.010
> 
> 标签：python, for-loop, try-catch, except

我使用 for 循环来抓取网页。但是，我在抓取某些页面时遇到 ip request limit 错误。当我每 20 页抓取一次时，我试图让 python 睡眠几秒钟，但是，错误仍然存​​在。我可以在 python 睡眠 60 秒后再次开始爬行。

问题是每次出现异常时，我都会丢失一页信息。似乎python使用try-except方法跳过了异常页面。

我想知道最好的方法是从遇到异常的页面重新开始爬网。

我的问题是如何从异常页面重新开始抓取。

```
pageNum = 0

for page in range(1, 200):
    pageNum += 1
    if(pageNum % 20 ==0):  # every 20 pages sleep 180 secs
        print 'sleeep 180 secs'
        time.sleep(180)  # to oppress the ip request limit
    try:
        for object in api.repost_timeline(id=id, count=200, page=page): 
            mid = object.__getattribute__("id")
            # my code here to store data
    except:
        print "Ip request limit", page
        sleep.time(60) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:51:56.250

使用`stack`一页。`pop`一个页面，如果失败则再次追加。

```
from collections import deque

page_stack = deque()
for page in range(199, 0, -1):
    page_stack.append(page)

while len(page_stack):
    page = page_stack.pop()

    try:
        ## Do something
    except IPLimitException, e:
        page_stack.append(page) 
```

代码可能会陷入无限循环。根据您的需要，您可以保留可以进行的试验的阈值。保留一个计数器，如果该阈值已用尽，则不要将页面附加回堆栈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:56:30.070

为了使代码尽可能与您的代码最接近，您可以执行以下操作：

```
pageNum = 0

for page in range(1, 200):
    pageNum += 1
    if(pageNum % 20 ==0):  # every 20 pages sleep 180 secs
        print 'sleeep 180 secs'
        time.sleep(180)  # to oppress the ip request limit
    succeeded = False
    while not succeeded:
        try:
            for object in api.repost_timeline(id=id, count=200, page=page): 
                mid = object.__getattribute__("id")
                # my code here to store data
            succeeded = True
        except:
            print "Ip request limit", page
            sleep.time(60) 
```

当然，您可能希望包含某种限制，而不是冒险进入无限循环。顺便说一句，您也可以摆脱 pageNum （只使用页面）。

# multidimensional-array - 我在matlab中重建分解张量时遇到了麻烦

> ID：10673899
> 
> 赞同：2
> 
> 时间：2012-05-20T13:39:42.690
> 
> 标签：multidimensional-array, matrix, sparse-matrix, matlab

我们在 matlab 中有一个大小为 308 x 22 x 29 x 12 x 492020 的张量，它非常大。我们对它进行了分解，效果很好。现在我们正试图重建它以获得一些预测。当我们运行它时，当我们对最后一个维度进行乘法时，它会因内存不足而崩溃。

我试图将我们的张量展平为 2 x 2 矩阵，以使重建更容易。我找不到办法，我尝试在 matlab 中使用 reshape 函数但没有成功。所以基本上我想知道在matlab中将（308 x 22 x 29 x 12 x 492020）张量转换为二维矩阵的方法。

只是为了更多地解释数据。我们有一个用户搜索汽车的数据库。我们想做推荐模型。我们创建了一个具有 5 个维度的张量：308（车型）x 22（车身类型）x 29（价格类别）x 12（制造年份）x 492020（用户）。然后我们运行张量分解，我们现在可以在最后一个分解的维度上进行聚类，通过用户的搜索对用户进行分组，并构建一些搜索日志依赖项。到这里我们还好。现在我们想从它的分解版本中重建张量，以获得一些新的记录来作为预测。鉴于张量很大，我们需要一种将其展平的方法来执行重建，如果有人可以分享一些如何做到这一点的示例 matlab 代码会很好，因为我对 matlab 比较陌生。所以我想将 5D 张量转换为 2D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:16:56.317

如果您在 MATLAB 变量列表中有巨大的 5D 张量，并且您可以访问其中的单个元素，例如`MyTensor(123,17,15,4,123456)`那么你可以做到，如果你有足够的存储空间。我没有处理这种大小的任何数据的经验，但是如果您可以访问它，那么您可以重建它。如果您将所有内容逐个元素或逐个切片或 n 维超切片逐个超切片写入磁盘，以使用运行编号分隔文件，然后以正确的顺序从这些文件中加载和重建您的元素/切片/超切片，那么您将拥有 2D 矩阵。如果元素访问适用于您的 5D 张量，我将首先创建一个小的 5D 矩阵并将其转换为 2D 矩阵，以查看维度是否按正确的顺序排列，仅使用适用于您的巨大 5D 张量的访问方法。之后，您可以使用完全相同的代码重建巨大的 5D 张量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T20:48:52.723

您不需要重建整个张量来估计“集群”用户的样本重建误差。例如，您可以对单个用户进行抽样并比较重建的切片并在进行过程中收集统计数据。通常在机器学习中，您希望通过使用“样本外”来交叉验证您的模型 - 即从测试集中随机划分训练集。

我会观察到车身类型是车型的一个属性，而价格大致是每个车型的年龄（和状况）的函数......所以在这种情况下你并没有足够的独立尺寸。

您的 492020 用户适合内存的原因可能是因为张量是稀疏的。除非您对因子强制执行稀疏性，否则重新组合分解的张量通常是密集的（尽管等级降低了）。在任何情况下，使用分解形式的计算效率要高得多。

我担心你的“做聚类”步骤 - 塔克分解是线性的（如主成分），非负张量分解可能更接近你想要做的......为每个用户分配一些“典型”的非负混合向量“ 喜好。“聚类”往往意味着硬边分类，而不是模糊。

# facebook - 在 facebook 上测试多个应用程序

> ID：10673907
> 
> 赞同：1
> 
> 时间：2012-05-20T13:41:10.553
> 
> 标签：facebook

我现在是自由职业者，我想建立一个 Facebook 帐户，这样我就可以在这个帐户下为不同的客户创建多个应用程序，然后成为管理员并将应用程序推广到他们的页面。

有没有其他人这样做，如果是这样，从一开始就设置最好，因为我需要在没有公众看到的情况下进行测试等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:43:55.277

是的 - 我经常这样做......

放置您的应用程序`sandbox_mode`将确保只有被允许查看该应用程序的人才能访问它。

您还可以将您的应用程序添加到您自己未发布的 Facebook 页面，这样任何人都无法搜索您的页面或应用程序。

混合`sandbox_mode`和未发布的页面应该是安全的方式。查看 Facebook 文档中的[应用程序安全](https://developers.facebook.com/docs/ApplicationSecurity/)`sandbox_mode`页面，了解您可以在应用程序中赋予用户的角色的确切解释。

# iphone - 通过 CLGeocoder 的方法查找一个区域中的所有位置

> ID：10673912
> 
> 赞同：0
> 
> 时间：2012-05-20T13:41:39.750
> 
> 标签：iphone, ios, location, clgeocoder

使用“–reverseGeocodeLocation:completionHandler:”方法对位置进行反向地理编码很方便。但是如何获取一个区域中的所有位置。

附言。如果一个地区有几个地方。如何使用区域信息找出所有地点？例如反向地理编码一个位置，给定一个坐标，返回一个位置。这里我想给一个区域，返回该区域的所有位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:14:31.170

有一个返回 JSON 的 google Geocoder API，它只是一种使用 GET 方法的网络服务

这是 Google Gecoder API，[这是](https://developers.google.com/maps/documentation/geocoding/)[该](http://maps.google.com/maps/api/geocode/json?sensor=true&address=london)Web 服务的链接，在此链接中，我将区域名称指定为 london。

注意：您需要在代码中包含 SBJson 库。

在该链接的末尾，我附加了地址，如果附加地址，则需要提供区域名称（或），如果附加纬度和经度，则需要提供坐标，它将相应地返回结果。

而调用google api的代码会是这样的

```
 //Call the Google API
                NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];
                NSLog(@"The get address is %@", req);
                //Pass the string to the NSURL
                NSString *result = [NSString stringWithContentsOfURL:[NSURL URLWithString:req] encoding:NSUTF8StringEncoding error:NULL];
                NSLog(@"The result is %@", result);
                //Initialize the SBJSON Class
                SBJSON *parser = [[SBJSON alloc] init];
                NSError *error = nil;
                //Get the resullts and stored in the address array
                addressArray = [parser objectWithString:result error:&error];
                //Get the latitude values for the given address
                NSDictionary *dict = [[[addressArray valueForKey:@"results"] valueForKey:@"geometry"] valueForKey:@"location"];
                self.latitudeValue = [[dict valueForKey:@"lat"] objectAtIndex:0];
                self.longitudeValue = [[dict valueForKey:@"lng"] objectAtIndex:0];
                NSLog(@"LAT : %@",self.latitudeValue);
                NSLog(@"LONG : %@",self.longitudeValue); 
```

# asp.net-mvc-2 - 为什么这个 IgnoreRoute 调用匹配这些请求？

> ID：10673917
> 
> 赞同：0
> 
> 时间：2012-05-20T13:42:34.717
> 
> 标签：asp.net-mvc-2, asp.net-mvc-routing, ignoreroute

我有一个本地化 httphandler，它在我的 ASP.Net MVC2 Content 文件夹的上下文中运行（它正在做的一部分是编译 /Content/css 中的 .less 文件）。我对这组特定请求的默认路由如下所示：

```
context.Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

context.MapRoute(
    "Area_default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new { controller = new VirtualDirectoryConstraint("VDirectory1") },
    new string[] { "Namespace.One.MVC" }
); 
```

（顺便说一句 - 我认为它不相关，但以防万一 - 如果请求不是来自传入的应用程序路径/虚拟目录，则 VirtualDirectoryConstraint 拒绝此路由上的匹配项）

使用此配置，调用`http://server.net/VDirectory1/Content/css/LessCompiler.axd`失败，因为没有 ContentController 类。一切都很好。

当我添加

```
context.Routes.IgnoreRoute("{Content}/{*pathInfo}"); 
```

该调用成功，但随后调用

```
http://server.net/VDirectory1/Localization/ClientScript/en-US.js 
```

和

```
http://server.net/VDirectory1/Authorization/ClientScript 
```

失败。查看 Phil Haack 的 RouteDebugger 工具，这些调用与 Content IgnoreRoute 路由匹配：

```
True    {Content}/{*pathInfo}   (null)  (null)  (null) 
```

因此不会分别路由到 LocalizationController 和 AuthorizationController。

显然，我误解了应该如何使用 IgnoreRoute 以及为什么那个特定的 IgnoreRoute 匹配这些请求。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:59:17.430

您的 IgnoreRoute 不应该使用`Content`而不是`{Content}`吗？

```
context.Routes.IgnoreRoute("Content/{*pathInfo}"); 
```

目前，`{Content}`可能正在将其作为变量扩展为空，这使得 pathinfo 匹配所有内容。

# opencv - opencv中大图像的关键点检测与匹配

> ID：10673918
> 
> 赞同：0
> 
> 时间：2012-05-20T13:42:36.633
> 
> 标签：opencv, sift, image-stitching

我正在opencv中进行关键点检测和匹配以拼接两个图像。

当图像很小时，它工作得很好。但是在处理较大的图像时，检测到的关键点数量会增加，因此要花费大量时间来匹配它们。但是为了拼接图像，我们似乎不需要这么多关键点。为了提高效率，有没有办法只检测有限数量的关键点？

在代码中，我使用 SiftFeatureDetector 和 SiftDiscriptorExtractor 来检测关键点并提取描述符。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:51:43.283

我的建议：

重新调整图像大小，使它们变得更小，然后执行特征匹配。一旦你有一个快速的解决方案（Homography）应用它，下一次匹配就会快得多。

您确实有办法轻松控制功能的数量。您可以提高阈值，因此将选择更少的功能。您甚至可以将阈值包装在 while() 循环中。它会提高阈值，直到特征量小于 N（但大于某些 M）。

查看我在此处发布的完整代码示例：

[在 C++ 中计算相似图像的偏移/倾斜/旋转](https://stackoverflow.com/questions/6542339/calculate-offset-skew-rotation-of-similar-images-in-c/6545111#6545111)

# objective-c - NSMutableString 没有附加，它总是为空

> ID：10673919
> 
> 赞同：0
> 
> 时间：2012-05-20T13:42:38.367
> 
> 标签：objective-c, nsmutablestring

我正在尝试设置一个 NSMutablearray，但总是得到空值，它不会在迭代中更新为不同的值。这是代码：

```
NSMutableString *tipo = [NSMutableString stringWithString:@""];

        if (self.canas.on){
             [tipo stringByAppendingString: @"0"];   
        }

        if (self.copas.on){
            if ([tipo length]==0){
                 [tipo stringByAppendingString: @"1"];

            }else{
                [tipo stringByAppendingString:@",1"];
            }
        }

        if (self.comer.on){
            if ([tipo length]==0){
             [tipo stringByAppendingString: @"2"];

        }else{
            [tipo stringByAppendingString:@",2"];
            }
        } 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:50:04.667

因为您应该使用[`appendString:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableString/appendString%3a)方法，而不是[`stringByAppendingString:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByAppendingString%3a)。

不同之处在于第一个确实将参数附加到接收器，而第二个只是返回这样的值（接收器保持不变）。第二条消息可以发送到`NSString`，而第一条消息仅用于`NSMutableString`.

希望你能看到区别。

# javascript - 如何使用 jquery 下载包含 css、js 和关联图像的模板页面

> ID：10673927
> 
> 赞同：-1
> 
> 时间：2012-05-20T13:44:27.063
> 
> 标签：javascript, jquery

我得到了一个网页/网站，并被要求为以下内容编写 SCRIPT：

1.  使用给定的网站作为模板，任何用户都必须能够创建相同布局的网站。- 这些站点将具有相似的页眉、导航、内容区域和页脚，但背景图像、页眉颜色、导航文本等必须是可编辑的。（使用脚本） - 将其存储在系统本地

2.  当我点击下载按钮时，如何下载所有相关文件（html、css、js、图像文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:47:32.707

听起来像是 GNU [wget](http://www.gnu.org/software/wget/)的工作。

# c# - 逐行插入 SQL Server CE 数据库

> ID：10673933
> 
> 赞同：0
> 
> 时间：2012-05-20T13:45:11.433
> 
> 标签：c#, razor, sql-server-ce, webmatrix

我有一个`*.TXT`大约 1 - 200 行的文件。每一行只是一个城市/郊区的名称，我试图将这个文件中的每一行插入到数据库中。

我把它全部放在一个 Try/Catch 块中，因为它不起作用，但是当我输出异常的详细信息时，什么也没有出现，如果有的话。

我已经确认我可以只用这一行一次插入 1 条记录：

```
db.Execute("insert into SuburbsPostCodesAndStates (Suburb, State) values (@0, @1)", "lol", "nsw"); 
```

我用来插入这些行的代码是：

```
@{
    var message = "";
    var db = Database.Open("SSSCCC");

    try
    {
        if(File.Exists(Href("~/NSW.txt")))
        {
            string[] text = File.ReadAllLines(Href("~/NSW.txt"));

            using (StringReader reader = new StringReader( text ))
            {
                string line;

                while ((line = reader.ReadLine()) != null)
                {
                    db.Execute("insert into SuburbsPostCodesAndStates (Suburb, State) values (@0, @1)", line, "NSW");
                }
            }
        }
    }
    catch(Exception exception)
    {
        message = exception.Message;
    }
}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        @message
    </body>
</html> 
```

我该怎么办？

任何帮助都非常感谢。

谢谢

# 解决方案：

```
@{  
    var message = "";  
    var db = Database.Open("SSSCCC");  

    try  
    {  
        if(File.Exists(Server.MapPath("NSW.txt")))  
        {  
            string[] text = File.ReadAllLines(Server.MapPath("NSW.txt"));  

            if(text.Length == 0) { throw new Exception("File does not contain any lines"); }

            foreach(string line in text)  
            {  
                db.Execute("insert into SuburbsPostCodesAndStates (Suburb, State) values (@0, @1)", line, "NSW");  

            }  
        }  
        else 
        { 
          throw new Exception("File does not exist"); 
        } 
    }  
    catch(Exception exception)  
    {  
        message = exception.Message;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:50:49.893

我不确定你为什么在这里使用 StringReader ......试试这个。

```
@{ 
          var message = ""; 
    var db = Database.Open("SSSCCC"); 
    try 
    { 
        if(File.Exists(Server.MapPath("~/NSW.txt"))) 
        { 
            string[] text = File.ReadAllLines(Server.MapPath("~/NSW.txt")); 
            if(text.Length == 0) throw new Exception("File does not contain any lines");
            foreach(string line in text) 
            { 
                db.Execute("insert into SuburbsPostCodesAndStates (Suburb, State) values (@0, @1)", line, "NSW"); 

            } 
        } 
        else
        {
          throw new Exception("File does not exist");
        }
    } 
    catch(Exception exception) 
    { 
        message = exception.Message; 

    } 
} 
```

# sas - 转置数据集中的一列，但按年份和另一列

> ID：10673936
> 
> 赞同：0
> 
> 时间：2012-05-20T13:45:44.107
> 
> 标签：sas

![在此处输入图像描述](../Images/0eb121c5748ebd2b220f022fb724c409.png)我在这里有这个数据集，如下所示：

基本上我想操纵数据集，使 GVKEY1 具有唯一性，例如 1004，然后是唯一的年份编号，例如 1996，然后是几个 gvkey2。但是，每年 gvkey2 的数量并不相同。有谁知道如何解决这个问题？这意味着我将为 1004 年的 gvkey1 提供几 12 行数据，因为我有 1996 年到 2008 年的年份。然后每年我都会有很多列，每列都有一个 gvkey2。

此致，

纳兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:43:26.920

你不能只使用 PROC TRANSPOSE 吗？

```
proc sort data=your_data_set out=temp1;
  by gvkey1 year;
run;

proc transpose data=temp1 out=temp2;
  by gvkey1 year;
  var gvkey2;
run; 
```

这将为您提供一系列变量 COL1 - COLx。对不同的变量名使用 PREFIX 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:02:54.217

我不确定我是否理解您的问题，但如果您正在寻找独特的 gvkey1/year 对，您可以执行以下任一操作：

```
proc sql;
 create table results as
 select distinct gvkey1, year
 from _your_data_set;
quit; 
```

或者

```
proc sort data=_your_data_set(keep=gvkey1 year) out=results nodupkey;
 by gvkey1 year;
run; 
```

如果这不是您想要的，我建议发布您想要的结果示例。

# winapi - 如何将 LPWSTR 转换为 LPBYTE

> ID：10673937
> 
> 赞同：0
> 
> 时间：2012-05-20T13:45:52.623
> 
> 标签：winapi, registry

我找到了很多关于如何将 LPBYTE 转换为 LPWSTR 的信息，但没有关于反向过程的信息。我试过自己做，并测试过这样的方法：

```
// my_documents declaration:
WCHAR my_documents[MAX_PATH];
//1st
const int size = WideCharToMultiByte(CP_UTF8, 0, my_documents, -1, NULL, 0, 0, NULL);
char *path = (char *)malloc( size ); 
WideCharToMultiByte(CP_UTF8, 0, my_documents, -1, path, size, 0, NULL);
//2nd
size_t i;
char *pMBBuffer = (char *)malloc( MAX_PATH );
cstombs_s(&i, pMBBuffer, MAX_PATH, my_documents, MAX_PATH-1 ); 
```

但是当我将它们写入注册表时，它们是不可读的。这就是我将它们写入注册表的方式：

```
BOOL SetKeyData(HKEY hRootKey, WCHAR *subKey, DWORD dwType, WCHAR *value, LPBYTE data, DWORD cbData)
{
    HKEY hKey;
    if(RegCreateKeyW(hRootKey, subKey, &hKey) != ERROR_SUCCESS)
        return FALSE;
    LSTATUS status = RegSetValueExW(hKey, value, 0, dwType, data, cbData);
    if(status != ERROR_SUCCESS)
    {
        RegCloseKey(hKey);
        return FALSE;
    }
    RegCloseKey(hKey);
    return TRUE;
}

SetKeyData(HKEY_CURRENT_USER, L"Software\\Microsoft\\Windows\\CurrentVersion\\Run", REG_SZ, L"My program", (LPBYTE)path, size) 
```

转换没有问题，但是当我尝试将其写入注册表时，我得到了一些奇怪的字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:28:38.203

当您将字符串写入宽注册表函数时，您不应该转换而是传递一个普通的 WCHAR*，只需转换为 LPBYTE。请记住要正确选择尺寸。LPBYTE 确实适用于编写二进制 blob 时，必须强制转换所有其他类型......

# java - UVA#523 最低运输成本

> ID：10673942
> 
> 赞同：1
> 
> 时间：2012-05-20T13:46:48.380
> 
> 标签：java, graph-theory, path-finding, shortest-path

UVA 链接：[http ://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=464](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=464)

我不知道我现在在做什么。我不知道为什么我会产生不正确的值。在寻找最短路径后，我打印出数组。它产生了这个：

```
[0, 3, 8, 8, 4]
[3, 0, 5, 11, 7]
[8, 5, 0, 9, 12]
[8, 11, 9, 0, 4]
[4, 7, 12, 4, 0] 
```

样本输入为：

```
1

0 3 22 -1 4
3 0 5 -1 -1
22 5 0 9 20
-1 -1 9 0 4
4 -1 20 4 0
5 17 8 3 1
1 3
3 5
2 4 
```

使用示例输入，我生成输出：

```
From 1 to 3 :
Path: 1-->2-->3

Total cost :8
From 3 to 5 :
Path: 3-->2-->5
Total cost :12

From 2 to 4 :
Path: 2-->5-->4
Total cost :11 
```

如果我查看我的数组，它似乎是正确的。但正确答案是：

```
From 1 to 3 :
Path: 1-->5-->4-->3
Total cost : 21

From 3 to 5 :
Path: 3-->4-->5
Total cost : 16

From 2 to 4 :
Path: 2-->1-->5-->4
Total cost : 17 
```

* * *

我想我错过了添加税，但我不知道在哪里添加它。我尝试在做最短路径`tax[j]`的`path[i][j]`同时添加，然后减去`tax[x-1]`和`tax[y-1]`（`x-1`是我的来源，`y-1`是我的目的地）。它不起作用，并且弄乱了我的路径数组（它为循环提供了价值；我真的不需要那个）。我真的不知道在哪里交税。

这是我的参考代码：

```
import java.util.*;
public class Main{
public static final int INF = 9999999;
public static int[][] path;
public static int[][] next;
public static int[] tax;
public static void main(String[] adsf){
    Scanner pp = new Scanner(System.in);
    int testCases = pp.nextInt();
    boolean first = true;
    pp.nextLine();
    pp.nextLine();
    while(testCases-- >0){
        String[] s1 = pp.nextLine().split(" ");
        int size = s1.length;
        path = new int[size][size];
        next = new int[size][size];
        for(int i = 0; i < path.length; i++)
            Arrays.fill(path[i],INF);
        tax = new int[size];
        for(int j = 0; j < path[0].length; j++){
            path[0][j] = Integer.parseInt(s1[j]);
            if(path[0][j]==-1)
                path[0][j]=INF;
        }
        for(int i = 1; i < path.length;i++){
            s1 = pp.nextLine().split(" ");
            for(int j = 0; j < path[0].length; j++){
                path[i][j] = Integer.parseInt(s1[j]);
                if(path[i][j]==-1)
                    path[i][j]=INF;
            }
        }
        for(int k=0; k<tax.length;k++){
            tax[k] = pp.nextInt();
        } pp.nextLine();    
        apsp();
        int x,y;
        //for(int i = 0; i < size; i++)
        //System.out.println(Arrays.toString(path[i]));
        while(pp.hasNextInt()){
            if(!first)
            System.out.println();
            x=pp.nextInt();
            y=pp.nextInt();
            int cost = path[x-1][y-1];
            System.out.println("From "+x+" to "+y+" :");
            System.out.print("Path: ");
            ArrayList<Integer> print = getpath(x-1,y-1);
            for(int l = 0; l < print.size(); l++){
                System.out.print(print.get(l)+1);
                if(l!=print.size()-1) System.out.print("-->");
                else System.out.println();
            }
            System.out.println("Total cost :"+cost);
            first = false;
        }
    }
}
public static void apsp(){
    for(int k=0;k<path.length;k++){
        for(int i=0;i<path.length;i++){
            for(int j=0;j<path.length;j++){
                if (path[i][k] + path[k][j] + tax[j] < path[i][j] + tax[j]) {
                    path[i][j] = path[i][k]+path[k][j];
                    next[i][j] = k;
                } else{
                    path[i][j] = path[i][j];
                }
            }   
        }   
    }
}
public static ArrayList<Integer> getpath (int i, int j) {
    ArrayList<Integer> pat = getMidPath(i,j);
    pat.add(0,i);
    pat.add(j);
    return pat;
}
public static ArrayList<Integer> getMidPath(int i, int j){
    if(next[i][j]==0)
        return new ArrayList<Integer>();
    ArrayList<Integer> pat = new ArrayList<Integer>();
    pat.addAll(getMidPath(i,next[i][j]));
    pat.add(next[i][j]);
    pat.addAll(getMidPath(next[i][j],j));
    return pat;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:33:02.440

税收适用：

> 任何货物通过一个城市时，除了来源城市和目的地城市。

因此，如果您有路径：

a -> b -> c -> d

然后你应该包括路径 (a,b) + tax(b) + (b,c) + tax(c) + (c,d) 的成本。

为了在您的算法中实现这一点，您应该能够将城市税添加到路径长度中，如下所示：

如果您知道您从 a 开始并在 d 结束，那么任何到城市 x 的有向路径（其中 x 不是 a 或 b）都应该被视为 x 的成本 + 城市 x 的税收。

您需要将路径成本值恢复为您想要计算价值的下一条路径的原始值，并为新的起点和目的地重新添加税值。

# objective-c - UINavigationBar 可编辑标题？

> ID：10673952
> 
> 赞同：13
> 
> 时间：2012-05-20T13:48:11.490
> 
> 标签：objective-c, ios, uinavigationbar

我有一个基于 UINavigationController 的应用程序。我可以在视图控制器的 viewDidLoad 方法中以编程方式设置 UINavigationBar 的标题：

```
self.navigationItem.title = m_name; 
```

我可以使导航栏中的标题可编辑吗？IE。我希望用户能够点击导航栏中的标题，并能够对其进行编辑。

这可能吗？如果可能的话，它是否可能符合 Apple 的人机界面指南？（这篇文章暗示它会，但没有告诉我如何实现它 -[使 UINavigationBar 标题可编辑](https://stackoverflow.com/questions/9920520/make-uinavigationbar-title-editable)）

非常感谢

弥敦道

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-20T13:54:47.450

您可以为标题设置自定义视图。

> **标题视图**
> 
> 当接收者是顶部项目时，显示在导航栏中心的自定义视图。
> 
> @property(nonatomic, 保留) UIView *titleView
> 
> **讨论**
> 
> 如果此属性值为 nil，则当接收者为顶部项时，导航项的标题显示在导航栏的中心。如果将此属性设置为自定义标题，则会显示它而不是标题。如果 leftBarButtonItem 不为零，则忽略此属性。
> 
> 自定义视图可以包含按钮。使用 UIButton 类中的 buttonWithType: 方法以导航栏的样式将按钮添加到自定义视图。自定义标题视图以导航栏为中心，可以调整大小以适应。

如果你要在你的 titleView 中放置一个 UITextField，你可以给它一个 clearColor 背景并将它设置为没有边框。哇，你有一个 UINavigationBar 标题，你可以点击和编辑。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-24T19:29:13.223

Ryan 的解决方案是完全正确的。如果有人在实现它时遇到困难，这里有一些示例代码应该可以帮助您。只需将其粘贴到任何具有导航控制器的类的 ViewDidLoad 中即可。

```
UITextField *textField = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 200, 22)];
textField.text = @"Insert Title Here";
textField.font = [UIFont boldSystemFontOfSize:19];
textField.textColor = [UIColor whiteColor];
textField.textAlignment = NSTextAlignmentCenter;
self.navigationItem.titleView = textField; 
```

如果您的项目不使用 ARC，请确保像这样释放 textField：

```
UITextField *textField = [[[UITextField alloc]initWithFrame:CGRectMake(0, 0, 200, 22)]autorelease]; 
```

或者像这样：

```
[textField release]; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-21T11:18:03.170

Ryan 的 swift 解决方案

```
let textField = UITextField(frame: CGRect(x: 0, y: 0, width: 200, height: 22))
textField.text = "Title"
textField.font = UIFont.systemFontOfSize(19)
textField.textColor = UIColor.whiteColor()
textField.textAlignment = .Center
self.navigationItem.titleView = textField 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-03T12:18:41.170

这是[Ciprian](https://stackoverflow.com/a/30372189/1971013)在 Swift 4 中的代码，并针对 iOS 12 进行了更正：

```
let textField = UITextField(frame: CGRect(x: 0, y: 0, width: 200, height: 21))

textField.text          = "Your Title"
textField.font          = UIFont.systemFont(ofSize: 17, weight: .semibold)
textField.textAlignment = .center

self.navigationItem.titleView = textField 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T13:53:12.940

您可以在导航栏顶部放置一个文本字段，并将其设置为隐藏/未启用。使用手势识别器检测导航栏上的点击并将文本字段设置为启用/未隐藏。然后在文本域的做结束编辑方法中，再次将其设置为隐藏并将导航栏的标题设置为文本域的标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T13:53:36.247

在导航栏上添加一个隐藏的文本字段，所以点击它会弹出一个键盘，用户可以在其中输入文本。

获取返回按钮事件，在那里您可以使用新添加的文本更改导航栏文本。并再次隐藏文本字段。

享受编码:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-20T14:03:48.600

在 NavigationBar 上放置一个 textField 并将不透明度的 textField 背景颜色设置为零。

# c# - 从解决方案中的文件夹加载图像？

> ID：10673957
> 
> 赞同：5
> 
> 时间：2012-05-20T13:48:41.023
> 
> 标签：c#

我正在尝试从解决方案中的文件夹加载图像，但我只收到一条错误消息，指出找不到它。我做错了什么？下面的代码位于与 Resource 文件夹处于同一级别的 MainForm.cs 中。帮助是preciated！谢谢！

```
 // Images
 Image imageCircle = Image.FromFile("Resources/circle.png");

 // Set deafult picture on start
 pictureBox1.Image = imageCircle; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T14:01:40.957

*编辑：修复断开的链接*

看看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/3bka19x4(v=vs.100).aspx)，它讨论了添加和编辑资源以及您的选择，还有这篇[MSDN 文章讨论了使用](http://msdn.microsoft.com/en-us/library/ht9h2dk8(v=vs.100).aspx)[资源设计器](http://msdn.microsoft.com/en-us/library/9za7fxc7)的链接和嵌入式资源。

![项目属性资源](../Images/0a67b23bc4f991aefaa4394880f2e9e6.png)

然后选择你的文件

![在此处输入图像描述](../Images/3243705b8940a0f0b125660c754469c5.png)

然后你可以像 Madurika 建议的那样访问它。

IE

```
Image imageCircle = YourPojectName.Properties.Resources.YourFileNameHere; 
```

![在此处输入图像描述](../Images/b45dc4082d23b93e1390af248d6176d1.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T14:00:26.687

它始终采用可执行文件所在的路径（bin 文件夹）。因此，如果您可以使用完整路径访问它，问题就会解决。或者你可以有一个根文件夹的配置项。然后访问像`Image.FromFile(rootFolder+ "Resources/circle.png");`. 无论如何，当您部署它时，这个问题不会存在。

如果您使用的是资源文件，

```
<projectName>.Properties.Resources.<ImageName>; 
```

将返回图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:51:40.677

该程序在 bin/debug（所有 .dll 所在的位置）中执行，将`Resources`文件夹放在那里。

# wordpress - 安装 Wordpress - 404 错误

> ID：10673958
> 
> 赞同：0
> 
> 时间：2012-05-20T13:48:51.827
> 
> 标签：wordpress

我将 wordpress 文件夹的内容上传到我的 httpdocs 文件夹中。就像是

httpdocs -> wordpress 文件夹的内容

而不是 httpdocs -> wordpress -> wordpress 文件夹的内容

我用数据库用户名、密码和数据库名更改了 wp-config.php 文件。

我点击[http://mydomain.com/wp-admin/install.php](http://mydomain.com/wp-admin/install.php)

当文件实际上在那里时，它会向我抛出 404 错误。

你们认为可能导致问题的原因是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T14:51:57.490

你填写 MySQL 服务器名称了吗？要安装 Wordpress，您必须填写 4 个元素：

```
/** MySQL database databasename */
define('DB_NAME', 'databasename');

/** MySQL database username */
define('DB_USER', 'username');

/** MySQL database password */
define('DB_PASSWORD', 'password');

/** MySQL hostname */
define('DB_HOST', 'MySQL server name'); 
```

# java - 这作用于内部类

> ID：10673960
> 
> 赞同：4
> 
> 时间：2012-05-20T13:49:23.683
> 
> 标签：java

我有一个类，其中包含内部类。我想发送等于顶级类的值，但是“this”发送的是内部类的值。我能做些什么？

```
package Controller;
public class MessageFrameListener{
private MessageFrame mf;
private User us;
private Contact cn;
private Timer timer;
private Running run;
private ListFrame lf;

public MessageFrameListener(ListFrame l_f, MessageFrame m_f, User u_s, Contact c_n, Running r_n){
    run = r_n;
    mf = m_f;
    us = u_s;
    cn = c_n;
    lf = l_f;
    m_f.addButtonListener(new SButtonListener());
    m_f.addWinListener(new FrameListener());

    timer = new Timer(500,new timerListener());
    timer.start();
}

public class FrameListener implements WindowListener{

    @Override
    public void windowClosing(WindowEvent e) {
        timer.stop();
        timer = null;
        mf.close();
        lf.removeMFL(this));
    }       
}
} 
```

所以，这条线

```
 lf.removeMFL(this)); 
```

通过这个发送“FrameListener”，但我想发送“MessageFrameListener”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T13:51:45.657

使用[合格`this`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)的：

```
MessageFrameListener.this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T13:53:27.700

采用：

```
   lf.removeMFL(MessageFrameListener.this);

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:54:20.477

在内部类本身中，您可以使用

```
MessageFrameListener.this; 
```

您还可以向外部类添加方法

```
public MessageFrameListener getInstance() {
    return this;
} 
```

# html - 无法在 Chrome 中重新播放 Mercurial 存储库中的音频文件

> ID：10673966
> 
> 赞同：1
> 
> 时间：2012-05-20T13:50:20.673
> 
> 标签：html, google-chrome, mercurial, html5-audio, sourceforge

在我的 HTML5 测试文件中，我可以播放和重新播放 mp3 声音文件，如果：

1.  我的文件在本地托管，或者
2.  它们托管在传统的网络主机上（参见[http://sgdk2.enigmadream.com/ben/iotaBuildIt/sound.html](http://sgdk2.enigmadream.com/ben/iotaBuildIt/sound.html)）或
3.  我从 Internet Explorer 播放

如果出现以下情况，我可以第一次播放声音，但*不能*第二次播放：

1.  这些文件托管在 Mercurial 存储库中，并且
2.  我正在使用 Chrome 访问文件

（使用 IE 访问 Mercurial 托管的文件时我没有遇到问题。）

在这些情况下，我无法在以下情况下*重新*播放文件：

1.  通过 HTML 页面（[http://hg.code.sf.net/u/bluemonkmn/myiota/raw-file/97ac02a717fe/HTML/sound.html](http://hg.code.sf.net/u/bluemonkmn/myiota/raw-file/97ac02a717fe/HTML/sound.html)）访问它 我不能让脚本重播它和 b。我无法使用音频控制 UI 重播它。也不
2.  直接访问文件（[http://hg.code.sf.net/u/bluemonkmn/myiota/raw-file/97ac02a717fe/HTML/bing.mp3](http://hg.code.sf.net/u/bluemonkmn/myiota/raw-file/97ac02a717fe/HTML/bing.mp3)）

有人可以解释或帮助我修复它，以便 Chrome 可以像 IE 一样重新播放 Mercurial 中托管的音频文件吗？此外，我还没有测试过 FireFox，并且很想知道它在那里是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:10:48.803

如果我不得不猜测，我会说区别在于 Apache 静态文件服务和 hgweb 提供的标头。这是来自 Apache 的静态文件服务的 .mp3 文件的输出：

```
$ HEAD -Ssed http://sgdk2.enigmadream.com/ben/iotaBuildIt/bing.mp3
HEAD http://sgdk2.enigmadream.com/ben/iotaBuildIt/bing.mp3
200 OK
Connection: close
Date: Wed, 23 May 2012 16:55:03 GMT
Accept-Ranges: bytes
ETag: "4d0cbbe-16c7-4bd83a906c040"
Server: Apache
Content-Length: 5831
Content-Type: audio/mpeg
Last-Modified: Thu, 12 Apr 2012 23:24:41 GMT 
```

这里它来自 hgweb 的原始文件处理程序：

```
HEAD http://hg.code.sf.net/u/bluemonkmn/myiota/raw-file/97ac02a717fe/HTML/bing.mp3
200 Script output follows
Connection: close
Date: Wed, 23 May 2012 16:56:33 GMT
Server: Apache/2.2.3 (CentOS)
Content-Length: 5831
Content-Type: audio/mpeg
Content-Disposition: inline; filename="bing.mp3" 
```

最大的区别在于 Apache 包含[Accept-Ranges](http://pretty-rfc.herokuapp.com/RFC2616#header.accept-ranges)标头，而 hgweb 提供了[Content-Disposition](http://pretty-rfc.herokuapp.com/RFC2616#content-disposition)标头。

此处的`Content-Disposition`标题仅向您的浏览器建议 saveAs 的默认文件名，因此它不太可能是罪魁祸首（但人们永远不知道）。

标题`Accept-Ranges`更有趣。虽然它不是最初的目的，但它已成为寻求流式音频和视频播放的支柱。如果人们*再次将播放*视为寻找（寻找为零）的一种特殊情况，那么 Chrome 可能正在禁用它，因为没有`Accept-Ranges`标题它认为它根本无法寻找（当然，寻找零只是在播放再次从零开始）。

这绝对只是吐痰，但它很容易测试。调整 hgweb 的 apache 主机以使用[mod_headers](https://httpd.apache.org/docs/2.2/mod/mod_headers.html)，如下所示：

```
header add Accept-Ranges bytes 
```

在运行您的路径中`hgweb`（无论是 wsgi 还是 cgi）。当您使用它时，您也可以删除`Content-Disposition`标题`mod_headers`。

最后，这一切都与线路上的字节有关。您可以让 hgweb 和 Apache 返回完全相同的字节，然后 Chrome**会**以相同的方式处理它。

**注意：**当然，将`Accept-Ranges: bytes`标头添加到 hgweb 的输出实际上并没有为 hgweb 添加字节范围支持，但这没关系。hgweb 只会忽略`Range: bytes=xxxx`标头，而不是给出`206 Partial Response`状态，它会给出 a`200 OK`并且 RFC 说需要客户端（Chrome）来处理它。因此，您将无法跳过文件，但 Chrome 可能足以让您搜索开始/重播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:53:25.367

我已经报告了[Chromium 错误 #129165](http://code.google.com/p/chromium/issues/detail?id=129165)，怀疑这是一个错误，因为它显然可以在工作 Linux 下工作。

# javascript - 使用javascript合并两个xml文档？

> ID：10673968
> 
> 赞同：1
> 
> 时间：2012-05-20T13:50:41.007
> 
> 标签：javascript, xml

如果我有两个 xml 文档并将它们存储到两个 javascript 变量（xA 和 xB）中，我将如何将它们合并在一起（覆盖）？

例如

xA 是

```
 <cat>
        <name type="asdf" >
            Bob
        </name>
        <color>
            brown
        </color>
        <length>
            8
        </length>
    </cat> 
```

xB 是

```
<root>
    <cat>
        <name type="fdsa" >
            Bob
        </name>
        <color>
            black
        </color>
        <weight>
            14
        </weight>
    </cat>
</root> 
```

xB 合并到 xA（存储为变量 xC）是

```
<root>
    <cat>
        <name type="fdsa" >
            Bob
        </name>
        <color>
            black
        </color>
        <length>
            8
        </length>
        <weight>
            14
        </weight>
    </cat>
</root> 
```

然后我可以将 xC 打印为字符串或保存等。我怎样才能在 javascript 中进行这种合并？

# xcode - 将 NSFetchRequest 重用于 Core Data 的多个不同提取有什么不好的吗？

> ID：10673982
> 
> 赞同：5
> 
> 时间：2012-05-20T13:52:26.100
> 
> 标签：xcode, core-data, nspredicate, nsfetchrequest

`NSFetchRequest`我的问题：使用 Core Data重复使用多个不同的 fetch 有什么不好的吗？

示例代码：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];

NSEntityDescription *logEntity = [NSEntityDescription entityForName:@"LogEntry" inManagedObjectContext:context];
[request setEntity:logEntity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"dateTimeAction" ascending:NO]; // ascending NO = start with latest date
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"status == %@",@"op tijd"];
[request setPredicate:predicate];
[request setFetchLimit:50];

NSError *error = nil;
NSInteger onTimeCount = [context countForFetchRequest:request error:&error];

NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"status == %@",@"uitgesteld"];
[request setPredicate:predicate1];
[request setFetchLimit:50];

NSInteger postponedCount = [context countForFetchRequest:request error:&error];

NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"status == %@",@"gemist"];
[request setPredicate:predicate2];
[request setFetchLimit:50];

NSInteger missedCount = [context countForFetchRequest:request error:&error]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T19:06:28.323

这不是问题，但在给出的示例中它并没有给你带来太多好处（只是一些代码简洁。）创建获取请求的最昂贵的部分是解析谓词格式字符串。

如果您给出的代码被频繁调用，并且您希望加快速度，这里有一些想法可以尝试：

*   创建所有谓词并仅获取一次请求：可能在一个`dispatch_once()`块中并静态存储它们；或在构造函数中并存储在对象字段中
*   不要指定排序描述符，因为如果您只关心计数，顺序并不重要
*   如果实际谓词比显示的更复杂或更灵活，请创建一个带有替换变量的通用模板谓词，并用于`predicateWithSubstitutionVariables:`生成指定的副本。
*   为了更简洁的代码，使用模型编辑器在对象模型中定义该模板，并使用它`fetchRequestFromTemplateWithName:substitutionVariables:`来创建获取请求。

如果您愿意，我可以编写一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:17:27.660

我认为这不是问题，因为这`NSFetchedRequest`只是一个搜索条件描述符，此外，您可以在获取的请求上拥有多个谓词，如下所示：

```
NSPredicate *predicates = [NSCompoundPredicate andPredicateWithSubpredicates:NSArray_of_predicates]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T22:24:11.320

It's OK if you reuse them with the same store, or perhaps different stores with the same model. I ran into crashes (e.g. in NSKnownKeysDictionary1) when using the same fetch request to query multiple stores that had different models. It seemed to make sense to reuse the request since I was fetching the same entity, just from two different places. The entity name and predicate were the same. You would think this would be OK since the fetch request takes an entity name rather than an entity description; the latter would be a different (but equivalent) object for the same entity in different stores/models. However, it looks like the fetch request caches the entity description and doesn't check that it's still valid for the current context that it's being executed against.

但是，您可以在多个 fetch 请求中重用相同的谓词而不会出现问题。

# png - Python scipy.ndimage.morphology.dilation

> ID：10673983
> 
> 赞同：1
> 
> 时间：2012-05-20T13:52:47.840
> 
> 标签：png, scipy, morphing

我对png图像有一个很大的问题。我的 png 是一个黑白字母（字母是白色的，背景是黑色的）。它们之间没有颜色。我的问题是，我想/必须以某种方式使用 binary_dilation/erosion ...但是当我尝试这样做时，我得到一个内部为白色而背景为蓝色的图像？

```
from scipy.ndimage.morphology import binary_dilation
from scipy.misc import imread, imsave

template = imread("temp.png")/255.0
imsave("Result.png",binary_dilation(template)) 
```

我完全不知道为什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:50:51.217

当心颜色通道 --- 如果“temp.png”有它，那么`template.shape == (nx, ny, 3)`或带有 alpha `template.shape == (nx, ny, 4)`。二进制膨胀将最后一个维度视为第三个空间维度，而不是作为颜色通道，这不是您通常想要的。您可以`binary_dilation(template[:,:,0])`执行 2-D 图像操作。

# wordpress - remove_action() 在 WordPress 插件中不起作用

> ID：10673984
> 
> 赞同：6
> 
> 时间：2012-05-20T13:53:02.160
> 
> 标签：wordpress

我是编写 WordPress 插件的新手。我正在尝试编写一个小插件来修改 woocommerce 插件在单个产品页面上显示图像的方式。具体来说，如果没有产品图片，则让包含图片的 div 为“display:none”，而不是在那里显示占位符图片。我正在使用的策略是使用 add_action 来呈现我自己版本的 woocommerce 的 product_image.php 模板，然后（尝试）使用 remove_action 来防止呈现原始 product_image.php 文件。add_action 显然可以正常工作，因为我可以在 Firebug 中看到“display:none”div。但是， remove_action 没有成功。

这是我的代码：

```
$add_result = add_action( 'woocommerce_before_single_product_summary', 'eba_wc_show_product_images', 10);

function eba_wc_show_product_images() {
    include( 'eba_product-image.php' );
}

$remove_result = remove_action( 'woocommerce_before_single_product_summary', 'woocommerce_show_product_images', 30);
echo "<hr/>result of add_result = " . $add_result . "<hr/>";
echo "<hr/>result of remove_result = " . $remove_result . "<hr/>"; 
```

woocommerce_before_single_product_summary 挂钩的原始 add_action 的优先级为 20，因此我将 remove_action 的优先级设为 30。

最后的两条调试语句显示 add_action 返回“1”，但 remove_action 的结果为空。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T17:55:35.203

我现在已经多次偶然发现这个问题，我希望有人会告诉我我可以做到这一点：

```
$priority = has_action('action_name', 'function_name');
remove_action('action_name', 'function_name', $priority); 
```

这使我不必对优先级进行实际的硬编码，这对于不同的环境可能会有所不同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-20T14:55:01.250

尝试在 plugins_loaded 期间删除该操作，这应确保在您尝试删除它之前肯定已添加它。

```
add_action('plugins_loaded','alter_woo_hooks');

function alter_woo_hooks() {
    $add_result = add_action( 'woocommerce_before_single_product_summary', 'eba_wc_show_product_images', 10);
    $remove_result = remove_action( 'woocommerce_before_single_product_summary', 'woocommerce_show_product_images', 10);

    echo "<hr/>result of add_result = " . $add_result . "<hr/>";
    echo "<hr/>result of remove_result = " . $remove_result . "<hr/>";
}

function eba_wc_show_product_images() {
    include( 'eba_product-image.php' );
} 
```

# c++ - 等待单对象函数使用

> ID：10673991
> 
> 赞同：2
> 
> 时间：2012-05-20T13:53:52.177
> 
> 标签：c++, waitforsingleobject

我正在使用`WaitForSingleObject()`函数在我的程序中实现等待。

```
WaitForSingleObject(eventToBeSigaled, timeOut); 
```

我们都知道这个函数会在指定的时间内等待事件发出信号。

但是我想知道当事件在进入这个调用之前已经单打时会发生什么，那时是等待意志`fail(WAIT_FAILED)`吗？请以适当的理由回答这个问题。我想更深入地了解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:35:41.097

回答您的第一个问题：如果事件已经发出信号，您`Wait()`将立即返回返回`WAIT_OBJECT_0`。

第二个问题：`WAIT_FAILED`返回的情况之一是事件句柄在`Wait()`被调用时是否关闭。在这种情况下，操作系统调度程序将无法处理`Wait()`调用并因此返回`WAIT_FAILED`.

请注意，归根结底，这些`Wait()`函数是用户线程将 CPU 传回操作系统直到满足特定条件的一种手段。根据您的需要，您可以使用 OS 原语之一作为条件（信号量、互斥量、事件等）。操作系统调度程序反过来检查此条件以确定是否应为您的工作线程分配 CPU 时间片，从而确保所有线程（以及所有进程）获得系统资源的公平份额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:42:24.987

你应该先检查它的文档，[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)

`Remarks`

`The WaitForSingleObject function checks the current state of the specified object. If the object's state is nonsignaled, the calling thread enters the wait state until the object is signaled or the time-out interval elapses.`

# computer-science - 创建确定性有限自动机

> ID：10673992
> 
> 赞同：1
> 
> 时间：2012-05-20T13:54:03.650
> 
> 标签：computer-science, finite-automata

我需要通过具有以下属性的语言 {a,b,c} 创建一个非空 DFA：

1.  第一个符号是a。
2.  有偶数个b。
3.  最后一个符号是c。

我只是想知道，我应该创建 3 个单独的自动机，然后使用交叉点将它们组合起来，还是应该只创建一个，如果是这样，它怎么会有偶数个 b？我知道我可以交替使用这些状态，但不知道如何将它们结合起来。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:06:32.827

这是你的自动机（假设 0 是偶数，因此 0 b 是可以的）：

```
[start](a) -> [1]
[start](b,c,<eoi>) -> [reject]

[1](a) -> [1]
[1](<eoi>) -> [reject]

[1](c) -> [2]
[1](b) -> [3]

[2](<eoi>) -> [accept]
[2](c) -> [2]
[2](a) -> [1]
[2](b) -> [3]

[3](<eoi>) -> [reject]
[3](a,c) -> [3]
[3](b)->[1] 
```

“输入结束”在哪里。

状态1：偶数个b，最后处理的符号不是c。状态2：偶数个b，最后处理的符号是c。状态3：奇数个b。

# xml - 我如何从这个 XML 中获得所有信息？视窗手机

> ID：10673993
> 
> 赞同：1
> 
> 时间：2012-05-20T13:54:14.500
> 
> 标签：xml, windows-phone-7

我有一个提要，这是我从提要中获得的 XML：我感兴趣的是路由名称（以及节点内的内容）

```
<Route z:Id="i1" xmlns="http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary" 
xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
<EntityKey z:Id="i2"  
xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses"  
xmlns:a="http://schemas.datacontract.org/2004/07/System.Data"> 
<a:EntityContainerName>busExpressEntities</a:EntityContainerName>
<a:EntityKeyValues>
  <a:EntityKeyMember>
    <a:Key>routeId</a:Key>
    <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1231</a:Value>
  </a:EntityKeyMember>
</a:EntityKeyValues>
<a:EntitySetName>RouteSet</a:EntitySetName>
</EntityKey>
<POI />
<POILines />
<dateEffectiveFrom i:nil="true" />
<dateEffectiveTo i:nil="true" />
<isLive>true</isLive>
<relativePosition>0</relativePosition>
<routeDescription />
<routeId>1231</routeId>
<routeMap />
<routeName>1 Whitehawk - Mile Oak</routeName>
<route_stop>
<route_stop z:Id="i3">
<EntityKey z:Id="i4" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
    <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
    <a:EntityKeyValues>
      <a:EntityKeyMember>
        <a:Key>routeId</a:Key>
        <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1231</a:Value>
      </a:EntityKeyMember>
      <a:EntityKeyMember>
        <a:Key>stopId</a:Key>
        <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">6882</a:Value>
      </a:EntityKeyMember>
    </a:EntityKeyValues>
    <a:EntitySetName>route_stop</a:EntitySetName>
  </EntityKey>
  <alightingTariffCode>1</alightingTariffCode>
  <boardingTariffCode>1</boardingTariffCode>
  <route z:Ref="i1" />
  <routeId>1231</routeId>
  <routeIndex>1</routeIndex>
  <routeReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
    <a:EntityKey z:Ref="i2" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
  </routeReference>
  <stop z:Id="i5">
    <EntityKey z:Id="i6" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
      <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
      <a:EntityKeyValues>
        <a:EntityKeyMember>
          <a:Key>stopId</a:Key>
          <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">6882</a:Value>
        </a:EntityKeyMember>
      </a:EntityKeyValues>
      <a:EntitySetName>StopSet</a:EntitySetName>
    </EntityKey>
    <AtcoCode>149000006612</AtcoCode>
    <GPSStopName>Swanborough Dr.</GPSStopName>
    <Lat>50.8326729229821</Lat>
    <Long>-0.103217996656901</Long>
    <LongName>Swanborough Drive</LongName>
    <NaptanCode>bridmpj</NaptanCode>
    <OperatorsCode1>06612</OperatorsCode1>
    <OperatorsCode2>6612</OperatorsCode2>
    <OperatorsCode3>51581</OperatorsCode3>
    <OperatorsCode4>bridmpj</OperatorsCode4>
    <StopName>Swanborough Drive</StopName>
    <route_stop>
      <route_stop z:Ref="i3" />
    </route_stop>
    <route_stop_stop />
    <route_stop_timetable_stop />
    <stopId>6882</stopId>
  </stop>
  <stopId>6882</stopId>
  <stopReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
    <a:EntityKey z:Ref="i6" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
  </stopReference>
</route_stop>
<route_stop z:Id="i7">
  <EntityKey z:Id="i8" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
    <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
    <a:EntityKeyValues>
      <a:EntityKeyMember>
        <a:Key>routeId</a:Key>
        <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1231</a:Value>
      </a:EntityKeyMember>
      <a:EntityKeyMember>
        <a:Key>stopId</a:Key>
        <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">6883</a:Value>
      </a:EntityKeyMember>
    </a:EntityKeyValues>
    <a:EntitySetName>route_stop</a:EntitySetName>
  </EntityKey>
  <alightingTariffCode>1</alightingTariffCode>
  <boardingTariffCode>1</boardingTariffCode>
  <route z:Ref="i1" />
  <routeId>1231</routeId>
  <routeIndex>2</routeIndex>
  <routeReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
    <a:EntityKey z:Ref="i2" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
  </routeReference>
  <stop z:Id="i9">
    <EntityKey z:Id="i10" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
      <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
      <a:EntityKeyValues>
        <a:EntityKeyMember>
          <a:Key>stopId</a:Key>
          <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">6883</a:Value>
        </a:EntityKeyMember>
      </a:EntityKeyValues>
      <a:EntitySetName>StopSet</a:EntitySetName>
    </EntityKey>
    <AtcoCode>149000006613</AtcoCode>
    <GPSStopName>Haybourne Road</GPSStopName>
    <Lat>50.8317788816436</Lat>
    <Long>-0.10486427645364671</Long>
    <LongName>Haybourne Road</LongName>
    <NaptanCode>brimapm</NaptanCode>
    <OperatorsCode1>06613</OperatorsCode1>
    <OperatorsCode2>6613</OperatorsCode2>
    <OperatorsCode3>51701</OperatorsCode3>
    <OperatorsCode4>brimapm</OperatorsCode4>
    <StopName>Haybourne Road</StopName>
    <route_stop>
      <route_stop z:Ref="i7" />
    </route_stop>
    <route_stop_stop />
    <route_stop_timetable_stop />
    <stopId>6883</stopId>
  </stop>
  <stopId>6883</stopId>
  <stopReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
    <a:EntityKey z:Ref="i10" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
  </stopReference>
</route_stop>
</Route> 
```

我有以下代码来获取 URL -

```
 WebClient client = new WebClient(); 
    client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
    Uri url = new Uri("http://www.buscms.com/brightonbuses/v1/route.aspx?routeid=1231&stops=true&maps=true", UriKind.Absolute); 
    client.OpenReadAsync(url); 
```

这部分的下一站是什么

```
public void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

    } 
```

这样我就可以在 url 中的 xml 中停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:10:07.837

首先，我不会使用 OpenRead 方法，而是使用 DownloadString ，因此您的初始调用将是：

```
 void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        WebClient client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        Uri url = new Uri("http://www.buscms.com/brightonbuses/v1/route.aspx?routeid=1231&stops=true&maps=true", UriKind.Absolute);
        client.DownloadStringAsync(url);
    } 
```

然后您的事件处理程序将如下所示

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            if (e.Result != null)
            {
                XDocument doc = XDocument.Parse(e.Result);
                XNamespace ns = "http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary";
                var routeNames = (from n in doc.Descendants(ns + "Route")
                                 select new
                                 {
                                     RouteName = n.Element(ns + "routeName").Value,
                                     Stops = (from s in n.Element(ns + "route_stop").Elements(ns + "route_stop")
                                              select new
                                              {
                                                  StopCode = s.Element(ns + "stop").Element(ns + "OperatorsCode4").Value,
                                                  StopName = s.Element(ns + "stop").Element(ns + "StopName").Value
                                                  StopId = s.Element(ns + "stop").Element(ns + "stopId").Value

                                              }).ToList()
                                 }).Single();

                listBusStops.ItemsSource = routeNames.Stops;

                // Do something with the list of Route Names in routeNames
            }
        }
    } 
```

请注意使用 XNamespace 来查找 routeName 标记。

不要忘记向您的项目添加对 System.Xml.Linq 的引用。

# android - 最佳实践 - 将服务绑定到活动

> ID：10673996
> 
> 赞同：5
> 
> 时间：2012-05-20T13:54:50.950
> 
> 标签：android, android-service, android-activity

我有一个在后台运行的网络服务。我`mConnection`在 Activity中有这个全局变量

```
protected ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName className, IBinder binder) {
        serviceobject = ((NetworkService.MyBinder) binder).getService();
    }

    public void onServiceDisconnected(ComponentName className) {
        serviceobject = null;
    }
}; 
```

然后我在活动中绑定服务`onCreate(..)`使用

```
bindService(new Intent(this, NetworkService.class), 
                 mConnection,Context.BIND_AUTO_CREATE); 
```

NetworkService 类有一个内部类 MyBinder

```
public class MyBinder extends Binder {
    NetworkService getService() {
        return NetworkService.this;
    }
} 
```

现在要从活动中调用任何服务方法，我使用`serviceobject`并为每个方法调用创建一个`AsyncTask`。（我知道从活动中调用服务方法会使使用服务无效。我将其用于不涉及的轻型方法计算量大）

这有助于我直接处理来自`Service`使用`serviceobject`. 我在`Activity`'s中取消绑定服务`onDestroy()`

```
@Override
protected void onDestroy()
{
    unbindService(mConnection);
    super.onDestroy();
} 
```

这是最好的方法还是我在某个地方错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:55:56.923

我想你想做的是运行一个`Remote Service`. 这就是`ServiceConnection`习惯`bindService`。这个想法是您的服务在后台运行，任何活动都可以“绑定”到它并通过您在 AIDL 中定义的接口进行交互。

对服务的访问速度很快，因此您可以从 UI 线程调用服务中的方法，而无需使用`AsyncTask`. 这是一个好处。

但是实现有点乏味，因为您必须编写此 AIDL 接口。

我建议你在这里阅读谷歌的教程：http: [//developer.android.com/guide/developing/tools/aidl.html](http://developer.android.com/guide/developing/tools/aidl.html)

然后用“教程”或“示例”搜索“远程服务 AIDL”。

祝你好运。

# c++ - 命名空间和私有静态类成员

> ID：10673997
> 
> 赞同：2
> 
> 时间：2012-05-20T13:54:59.117
> 
> 标签：c++, object, static, namespaces, initialization

为什么会这样：

```
#include "iostream"

class Something {
private:
    static int s_nIDGenerator;
    int m_nID;
    friend int main();
public:
     Something() { m_nID = s_nIDGenerator++; }
     int GetID() const { return m_nID; }
};

int Something::s_nIDGenerator;

int main() {
    Something::s_nIDGenerator = 1;

    Something cFirst;
    Something cSecond;
    Something cThird;

    using namespace std;
    cout << cFirst.GetID() << endl;
    cout << cSecond.GetID() << endl;
    cout << cThird.GetID() << endl;
    return 0;
} 
```

它打印：

```
1
2
3 
```

这失败了：

```
#include "iostream"

namespace test {   
    class Something {
    private:
            static int s_nIDGenerator;
            int m_nID;
            friend int main();
    public:
            Something() { m_nID = s_nIDGenerator++; }
            int GetID() const { return m_nID; }
    };
};

int test::Something::s_nIDGenerator;

int main() {
    using namespace test;
    Something::s_nIDGenerator = 1;
    // or test::Something::s_nIDGenerator = 1;  same effect if not using using.

    Something cFirst;
    Something cSecond;
    Something cThird;

    using namespace std;
    cout << cFirst.GetID() << endl;
    cout << cSecond.GetID() << endl;
    cout << cThird.GetID() << endl;
    return 0;
} 
```

编译器错误消息为：

```
**** Internal Builder is used for build               ****
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o src\tuttest1.o ..\src\tuttest1.cpp
..\src\tuttest1.cpp: In function 'int main()':
..\src\tuttest1.cpp:23:5: error: 'int test::Something::s_nIDGenerator' is private
..\src\tuttest1.cpp:27:13: error: within this context
Build error occurred, build is stopped
Time consumed: 161  ms. 
```

如何让第二个示例使用命名空间测试工作？

对象周围的命名空间声明如何/为什么阻止访问静态成员表单？

* * *

根据我对@zmo 的评论，这是我根据他的线索要做的工作：

（评论没有空间或格式，我不得不编辑，因为我无法设置这个答案......（无论需要什么。）

```
#include "iostream"

namespace test {
    class Something {
    private:
        static int s_nIDGenerator;
        int m_nID;
        friend void load(int);
    public:
        Something() { m_nID = s_nIDGenerator++; }
        int GetID() const { return m_nID; }
    };

    int Something::s_nIDGenerator;

    void load (int value) {
       Something::s_nIDGenerator = value;
    } 

};

int main() {
    using namespace test;
    load (1);

    Something cFirst;
    Something cSecond;
    Something cThird;

    using namespace std;
    cout << cFirst.GetID() << endl;
    cout << cSecond.GetID() << endl;
    cout << cThird.GetID() << endl;
    return 0;
} 
```

***对于“静态成员在一个类中而命名空间***不起作用是怎么回事？”我仍然有点松散。这是怎么回事？为什么没有`test::Something::s_nIDGenerator`工作？（仍然是我最初问题的一部分。）所以，到目前为止，我们只回答了一半。

我想知道***为什么***这不起作用，所以我不再走进这个耙子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:00:43.350

可能是因为您的`friend int main()`声明是声明命名空间也有一个自由`main()`函数，而真正的`main()`函数不在命名空间中。

要解决这个问题？首先声明`int main();`before (and outside) `namespace test`，然后`friend int ::main()`表明它在全局命名空间中。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4492062/why-does-a-c-friend-class-need-a-forward-declaration-only-in-other-namespaces)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:41:13.697

好吧，尽管我永远不会建议您像您在问题中所做的那样做，但这里是如何使您的代码“按原样”工作的方法：

```
#include <iostream>

int main(); // declare main beforehands so it can be seen by Something

namespace test {   
    class Something {
    private:
            static int s_nIDGenerator;
            int m_nID;
            friend int ::main(); // take the main from global namespace
    public:
            Something() { m_nID = s_nIDGenerator++; }
            int GetID() const { return m_nID; }
    };
};

int test::Something::s_nIDGenerator;

int main() {
    using namespace test;
    Something::s_nIDGenerator = 1; // tada that works

    Something cFirst;
    Something cSecond;
    Something cThird;

    using namespace std;
    cout << cFirst.GetID() << endl;
    cout << cSecond.GetID() << endl;
    cout << cThird.GetID() << endl;
    return 0;
} 
```

但这是友元函数的错误用例。我建议的似乎对您有用的解决方案（在您的类 Something 中使用函数）在可读性和可理解性方面要好得多。