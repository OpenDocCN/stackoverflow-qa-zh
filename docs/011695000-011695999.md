# StackOverflow 问答 11695000-11695999

# cmake - 运行 findboost.cmake 的最基本示例是什么

> ID：11695001
> 
> 赞同：0
> 
> 时间：2012-07-27T20:09:33.140
> 
> 标签：cmake, firebreath

我在准备使用 cmake 脚本的 firebreath 视觉工作室解决方案时遇到问题。问题似乎出在 findboost.cmake 模块上。这是我得到的错误：

```
CMake Error at C:/Users/chenning/cmake-2.8.8-win32-x86/share/cmake-2.8/Modules/F
indBoost.cmake:1200 (message):
  Unable to find the requested Boost libraries.

  Boost version: 1.50.0

  Boost include path: c:/boost

  The following Boost libraries could not be found:

          boost_date_time

  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
  directory containing Boost libraries or BOOST_ROOT to the location of
  Boost. 
```

我的 boost 根目录应该是 c:\boost。

测试该模块的最基本脚本或命令行（Windows 7）是什么？我需要找出参数的正确值：BOOST_ROOT、BOOST_INCLUDE_DIR 和 BOOST_LIBRARYDIR。

提前谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:55:48.600

[你可以在这里](https://stackoverflow.com/questions/9254791/cmake-and-boost)看到一些例子

您也可以使用 boost 调试选项：

```
set (Boost_DEBUG Yes) 
```

我确定，如果这个版本的 CMake 能够搜索 Boost-1.50，那么你可以使用

```
set(Boost_ADDITIONAL_VERSIONS "1.50" "1.50.0") 
```

这可以帮助找到最新版本的 Boost

# c# - 创建动态页面

> ID：11695009
> 
> 赞同：1
> 
> 时间：2012-07-27T20:09:50.887
> 
> 标签：c#, asp.net-mvc-3, razor

试图弄清楚如何创建动态（即在运行时更改）网页时，我有点不知所措-实际上不知道最好的方法是什么。情况：

我正在创建一个 ASP .NET MVC3 Web 应用程序，并希望创建一个用户在其中创建`Tariff`对象并向其中添加`TariffBand`对象的页面`Tariff.Bands`- TariffBand 对象列表（下面的类定义）。每个乐队要求：

*   下限的文本框
*   上限的文本框
*   单位费率的文本框

用户将在视图中输入每个 TariffBand 的详细信息`/Tariff/Create`，理想情况下，我希望页面上有一个按钮 ( `"Add another band"`)，它将显示关税下一个频段的另一组文本框。

我了解如何创建上面的文本框，但我无法锻炼我应该如何编辑视图文件以满足上述要求。我应该使用一些局部视图吗？或者使用javascript注入一些HTML？

我不是特别在寻找任何代码（尽管如果你想分享一些我会很感激，而是关于实现这一目标的最佳方法的指导。我对 razor/c# 没问题，但对 javascript/jQuery 没有问题。

我的最后一个问题是：如何在不使用 @Html.TextboxFor() 方法的情况下将在文本框等中输入的值分配给视图的模型属性？只是好奇是否有办法做到这一点。

任何帮助真的很感激，尝试谷歌这个有点疯狂！

**关税**

```
class Tariff
{
    public int id {get; set;}
    public List<TariffBand> Bands {get; set}
} 
```

**关税范围**

```
class TariffBands
{
    public int Id {get; set;}
    public int UpperLimit  {get; set;}
    public int LowerLimit  {get; set;}
} 
```

非常感谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:06:58.597

您可以使用非顺序索引来实现这一点。

首先，[在 Haacked 的博客中查看有关它们的一般信息](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

来自博客：

> ...我们为需要绑定到列表的每个项目提供带有 .Index 后缀的隐藏输入。这些隐藏输入中的每一个的名称都是相同的，因此如前所述，这将为模型绑定器提供一个很好的索引集合，以便在绑定到列表时查找

```
<form method="post" action="/Home/Create">

    <input type="hidden" name="products.Index" value="cold" />
    <input type="text" name="products[cold].Name" value="Beer" />
    <input type="text" name="products[cold].Price" value="7.32" />

    <input type="hidden" name="products.Index" value="123" />
    <input type="text" name="products[123].Name" value="Chips" />
    <input type="text" name="products[123].Price" value="2.23" />

    <input type="hidden" name="products.Index" value="caliente" />
    <input type="text" name="products[caliente].Name" value="Salsa" />
    <input type="text" name="products[caliente].Price" value="1.23" />

    <input type="submit" />
</form> 
```

然后，一旦你了解了这项技术的原理，就有可能使用 html 助手来构建这些：

我知道这些助手的两个版本。您可以选择一个：

1.  [Ivan Zlatev 的助手](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/)（我更喜欢这个）
2.  [史蒂文·桑德森的助手](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:27:33.357

我不会提供所有代码，但制作模型会有所帮助。

使用一些 jQuery 在客户端上动态创建 DOM 元素（即每个关税的多个关税段）和数组（即 TariffBands[0].UpperLimit 的 id 等），以提供在客户端上动态添加多个关税段的能力客户。当它发布时，默认绑定器会将其绑定到 TariffBands 数组（前提是您在客户端上具有正确的 ID）。

我通过多个文件上传来执行此操作（即 UploadedDocuments[0] 将是客户端名称属性，然后我可以使用该名称添加尽可能多的输入以及当时的索引，然后迭代 POST 以保存文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:15:26.727

您还可以创建一个`EditorTemplate`for`TariffBand`并在视图中使用它。[在这个SO 讨论](https://stackoverflow.com/questions/11167538/saving-multiple-objects-from-mvc-view/11174133#11174133)中检查我的答案

# c# - 在递归函数中引发匿名异常

> ID：11695011
> 
> 赞同：1
> 
> 时间：2012-07-27T20:09:54.163
> 
> 标签：c#, exception, recursion

几秒钟后，以下程序输出

> 进程因 StackOverflowException 而终止

而不是我的消息。为什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Numerics;

namespace maximumVariable
{
    class Program
    {

        public static BigInteger Factorial(int num)
        {
            try
            {
                return (num > 1) ? num*Factorial(num - 1) : (1);
            }
            catch
            {
                throw;
            }
        }

        static void Main(string[] args)
        {
            BigInteger kingKong=0;
            int facParameter=0;
            try
            {

                while (true)
                {
                    kingKong = Factorial(facParameter);
                    facParameter++;
                }

            }
            catch
            {
                Console.WriteLine("The maximum value " + kingKong.ToString()+"has been achieved after "+facParameter.ToString()+" iterations");
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:13:17.230

您只能`StackOverflowException`在非常特定的情况下捕获。因此，您的自定义错误消息永远不会显示。

请参见此处：[C# 捕获堆栈溢出异常](https://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)
另请参见：http: [//msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)

这说得通; 堆栈溢出表示难以处理的状态（与大多数其他异常类型相比）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:16:23.533

来自 MSDN：

> 从 .NET Framework 2.0 版开始，StackOverflowException 对象无法被 try-catch 块捕获，并且默认情况下会终止相应的进程。因此，建议用户编写代码来检测和防止堆栈溢出。例如，如果您的应用程序依赖于递归，请使用计数器或状态条件来终止递归循环。

所以你不能再捕捉到那个异常。

# jquery - JQuery 鼠标悬停问题

> ID：11695013
> 
> 赞同：2
> 
> 时间：2012-07-27T20:10:13.803
> 
> 标签：jquery, mouseover

我正在使用以下脚本，并且有占位符 div。当我将鼠标悬停在 div 播放按钮上时，应该会出现在占位符上。

我连续三个占位符。当我将鼠标悬停在一个特定的占位符上时，会出现所有播放按钮。我需要的是当我将鼠标悬停在占位符上时，只会出现播放图像。

希望你能理解我的问题。任何人都可以帮我做到这一点吗？

```
jQuery.noConflict();
       jQuery(function(){
        jQuery('.placeholder').mouseover(function(){
               jQuery('.play').show('show');
        });
        jQuery('.placeholder').mouseleave(function(){
               jQuery('.play').hide('hide');
        });
      }); 
```

HTML：

```
 <div class="placeholder item"><div class="play"><img src="images/play_ico.jpg"></div></div>
 <div class="placeholder item"><div class="play"><img src="images/play_ico.jpg"></div></div>
 <div class="placeholder item"><div class="play"><img src="images/play_ico.jpg"></div></div> 
```

CSS：

```
.placeholder{
    width:120px;
    float:left;
    background:#ccc;
    height:67px;
    position:relative;
}

.play{
    width:120px;
    height:67px;
    position:absolute;
    top:0;
    left:0;
    display:none;
    background:#000;
    opacity:0.4;
filter:alpha(opacity=40);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:13:30.163

尝试以下操作：

```
 jQuery('.placeholder').mouseenter(function(){
           jQuery(this).find('.play').show();
    });
    jQuery('.placeholder').mouseleave(function(){
           jQuery(this).find('.play').hide();
    }); 
```

作为替代方案，您可以使用`hover`以下方法：

```
 jQuery('.placeholder').hover(function() {
           jQuery(this).find('.play').show();
    }, function() {
           jQuery(this).find('.play').hide();
    }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T20:15:15.547

你确定你做对了，你真的需要使用 noConflict 吗？

```
jQuery(function(){
    jQuery('.placeholder').on({
        mouseenter: function(){
           jQuery('.play', this).show('slow');
        },
        mouseleave: function() {
           jQuery('.play', this).hide('slow');
        }
    });
}); 
```

要不就

```
jQuery('.placeholder').on('mouseenter mouseleave', function() {
    jQuery('.play', this).toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:14:16.003

在我的脑海中，我不认为“显示”和“隐藏”是传递给显示和隐藏函数的有效参数，除非您使用这些名称的自定义动画？

试试看

```
jQuery('.play').show(); 
```

和

```
jQuery('.play').hide(); 
```

除非您希望它们进出动画，否则请使用

```
jQuery('.play').show('slow'); 
```

和

```
jQuery('.play').hide('slow'); 
```

或等价物:)

[http://api.jquery.com/show/](http://api.jquery.com/show/)

# c# - 将方法分配给泛型属性

> ID：11695016
> 
> 赞同：1
> 
> 时间：2012-07-27T20:10:52.540
> 
> 标签：c#, oop, generics, .net-4.0, delegates

我正在尝试设计一个足够灵活的类来绘制关于不同类型数据的数据图表。我是 C# 中的 OOP 新手，所以我正在摸索尝试使用泛型、委托和类的某种组合来实现这一目标。

这是我到目前为止写的课程：

```
using System;
using System.Collections.Generic;

namespace Charting
{
    public class DataChart<T>
    {
        public Func<T, object> RowLabel { get; set; }
    }
} 
```

这就是我试图称呼它的方式：

```
var model = new DataChart<MyClass>()
{
    RowLabel = delegate(MyClass row)
    {
        return String.Format("{0}-hello-{1}", row.SomeColumn, row.AnotherColumn);
    }
}; 
```

这种方法的问题是我必须明确地**转换 RowLabel**发出的对象。我希望我能以某种方式使输出类型成为通用类型并为其添加约束，如下所示：

```
 public class DataChart<T>
    {
        // The output of the RowLabel method can only be a value type (e.g. int, decimal, float) or string.
        public Func<T, U> RowLabel where U : struct, string { get; set; }
    } 
```

这可能吗？如果是这样，我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:17:53.700

你可以做*一些*。

首先，泛化输出：只需向类添加另一个类型参数。

```
public class DataChart<T, U>
{
  public Func<T, U> RowLabel  { get; set; }
} 
```

但是你提到的那些类型约束没有意义。类型约束是“and”-ed，而不是“or”-ed。A`string`不是 a `struct`，因此您不能将其限制为特定的类型组合。如果你让它不受约束，它仍然可以工作，尽管你失去了一些编译时安全性。

编辑：另外，事实证明你不能指定`string`为类型参数，无论如何。是密封类！拥有一个只接受密封类类型的泛型是没有意义的，编译器会阻止它。

# java - 从字符串中删除某些单词

> ID：11695023
> 
> 赞同：0
> 
> 时间：2012-07-27T20:11:38.260
> 
> 标签：java, arrays, string, algorithm, arraylist

我在弄清楚如何从字符串中删除某些单词时遇到了一些麻烦。基本上我有一个字符串。我将字符串中的每个单词与数组中预设的单词数进行比较。如果字符串中的单词与预设单词之一匹配，我会从字符串中删除该单词。

作为一个例子，我有字符串“是一个测试句子”，在运行该方法后，我应该有一个带有单词 {“test”，“sentence”} 的数组，这是我到目前为止所拥有的......

编辑基本上问题是没有任何改变，我最终得到 {"is", "a", "test", "sentence"}

```
 private void fillerWords(){

    String[] commonWords = {"the","of","to","and","a","in","is","it","you","that","he","was","for","on","are","with","as","i"};
    List <String>wordList = new ArrayList<String>(Arrays.asList(commonWords)); 

    //Split words in sentence up by word, put them into array
    String s = "is a test sentance";
    String[] tArray = s.split(" ");
    List <String>list = new ArrayList<String>(Arrays.asList(tArray ));    

    //take out words
    for(int i=0; i<list.size(); i++){
        //Check to see if a sentence word is a common word, if so remove word
        for(int c=0; c<wordList.size(); c++){
            if(wordList.get(c) == list.get(i)){
                list.remove(i);
            }//end if
        }//end for
    }//end for

    for(int x=0; x<list.size(); x++){
        System.out.printf("%s  %s \n", x, list.get(x));
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:23:38.400

问题是您要从列表中删除索引 i 然后递增 i，因此每次删除时都会跳过一个。也许创建另一个名为 output 的列表，而不是在遇到坏词时从“列表”中删除，而是在遇到好词时添加到“输出”中。

另外，正如Failsafe所说，你不能使用“==”来比较字符串，你需要使用string1.equals(string2)来比较。

此外，这里有一个简短的方法来修复它而不会改变太多：

更改您的比较块，如下所示：

```
if(wordList.get(c).equals(list.get(i))){
   list.remove(i);
   i--;
   break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T20:22:29.317

用于`removeAll()`移除存在于另一个集合中的元素。

```
list.removeAll(wordlist) 
```

它将删除`list`存在于中的所有元素`wordlist`。

*（您的代码也应该可以工作。但这是一种更短的方法）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T20:23:37.637

您不能将字符串与

```
if(wordList.get(c) == list.get(i)){
            list.remove(i);
        }//end if 
```

你需要做：

```
if(wordList.get(c).equals(list.get(i))){
            list.remove(i);
        }//end if 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T22:00:10.763

```
 String regex;
    regex = "\\s*\\bword\\b\\s*";//word must to be removed.
    while(out.contains("word"))
    out = out.replaceAll(regex, "");//out if input String and finnaly is out.. 
```

# python - 为什么我无法在班级的 __init__ 中执行简单的操作？

> ID：11695024
> 
> 赞同：1
> 
> 时间：2012-07-27T20:11:41.603
> 
> 标签：python, class, global-variables

下面给出的是我试图创建对象并出现错误的类的一个片段：

```
class FoF(object):
        def __init__(self,path):
                filepath=[]
                filepath.append(self.FileOrFolder(path)) 
```

执行后我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "PathOps.py", line 6, in __init__
    def __init__(self,path):
  NameError: global name 'filepath' is not defined 
```

之后我尝试了：

```
filepath=[]
class FoF(object):
        def __init__(self,path):
                global filepath.append(self.FileOrFolder(path)) 
```

然后再次：

```
File "<stdin>", line 1, in <module>
  File "PathOps.py", line 6, in __init__
    global filepath.append(self.FileOrFolder(path))
NameError: global name 'filepath' is not defined 
```

是什么导致了错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:15:06.810

尝试使用 insted 的 global 特殊词`self`。

所以像这样

```
class FoF(object):
    def __init__(self,path):
        self.filepath=[]
        self.filepath.append(self.FileOrFolder(path)) 
```

出现此错误的原因是因为 python 认为您正在尝试做的是以下两件事之一：

1.  要么你试图引用一个名为 filepath 的全局变量——这显然不是你想要的
2.  不太清楚的是，您还可以定义一个名为 filepath 的类属性——唯一的问题是您不能使用该类的函数定义类属性。你只能在类内这样做——在类函数之外

因此，为了在函数中声明变量，您必须在它之前使用单词 self。

编辑**如果你希望它成为类的一个属性——正如我假设的那样，你的意思是你可以这样做：

```
class FoF(object):
    filepath=[]
    def __init__(self,path):
        self.filepath.append(self.FileOrFolder(path)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:55:25.557

我认为你没有给我们足够的信息。例如：

```
>>> class FoF(object):
...     def __init__(self, path):
...             junk = []
...             junk.append(path)
... 
>>> foo = FoF('bar/path') 
```

不会产生错误。

你到底想做什么？

# java - 在 Java 程序中运行命令行工具

> ID：11695025
> 
> 赞同：0
> 
> 时间：2012-07-27T20:11:45.583
> 
> 标签：java, command-line, junit

你好 StackOverflow 社区，

我有这个`JUnit`需要使用命令运行服务器的测试`mvn exec:java`，并且我需要在执行测试之前删除目录的内容。否则，`JUnit`测试将失败。有什么办法可以将这些步骤包含到我的源代码中？

伊杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:31:38.623

您应该使用 JUnit 的 @BeforeClass 表示法，它将在第一次测试开始清理目标目录之前调用。您还应该使用 commons-io 库来避免不必要的编码。

```
import java.io.File;
import java.io.IOException;
import org.apache.commons.io.FileUtils;
import org.junit.BeforeClass;
import org.junit.Test;

public class DeleteDirectoryTest {
    private static final String DIRECTORY_PATH = "C:/TEMP";

    @BeforeClass
    public static void cleanUp() throws IOException {
        FileUtils.deleteDirectory(new File(DIRECTORY_PATH));
    }

    @Test
    public void doSomeTest() {
        // Test code goes here
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:17:09.743

您可以在 JUnit '@BeforeClass' 初始化方法中为您的目录放置一个[递归删除。](http://www.mkyong.com/java/how-to-delete-directory-in-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:14:33.920

```
public static boolean emptyDir(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T20:22:21.693

您可以使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)执行来自 java 应用程序的命令

# java - 使用 Spring，如何手动触发 AuthenticationSuccessHandler

> ID：11695026
> 
> 赞同：2
> 
> 时间：2012-07-27T20:11:54.083
> 
> 标签：java, spring, spring-mvc

我想为用户提供一种使用令牌登录的替代方式。我已经在 PreAuthenticationFilter 类中处理了对用户的身份验证，但是我需要触发我的

`AuthenticationSuccessHandler.onAuthenticationSuccess()`

它做了一个

`super.onAuthenticationSuccess()`

触发它的基类中的方法

`SavedRequestAwareAuthenticationSuccessHandler.`

如何`AuthenticationSuccessHandler`从我的预身份验证过滤器中触发？我尝试设置身份验证，`SecurityContextHolder`认为它会自动触发，`AuthenticationSuccessHandler`但事实并非如此。这就是我尝试这样做的方式：

```
Authentication authentication = new UsernamePasswordAuthenticationToken(Username, Password);
SecurityContextHolder.getContext().setAuthentication(authentication); 
```

不幸的是，这不起作用。所以我需要知道如何`AuthenticationSuccessHandler`从预认证过滤器中触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:31:26.320

您可能会受到`RememberMeAuthenthicationFilter`spring-security 中的工作原理的启发。它引用了, 并手动`AuthenticationSuccessHandler`调用。`onAuthenticationSuccess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T11:20:49.663

您必须扩展 PreAuthenticationFilter 并覆盖方法successAuthentication。在那里你可以触发你注入的成功处理程序。

# java - 使用 simpleframework 时 Android 模拟器中的过多垃圾收集 (GC_FOR_MALLOC)

> ID：11695029
> 
> 赞同：1
> 
> 时间：2012-07-27T20:12:11.020
> 
> 标签：java, android, android-emulator, garbage-collection, simple-framework

我有一个使用[SimpleFramework](http://simple.sourceforge.net/)进行 XML 序列化的 Android 应用程序。该应用程序在我测试过的所有真实设备上运行良好，没有滞后，但在模拟器上运行时，垃圾收集器在每次启动应用程序时运行大约 3 分钟。

这是我到目前为止观察到的：

*   垃圾收集在将对象序列化为 XML 之前启动
*   它只发生在第一个对象被序列化并通过网络发送之前，并且不会发生在连续调用中。
*   序列化代码位于单独的库中，该库被打包并作为 .jar 文件添加到项目中。

这是 LogCat 的输出：

```
07-27 08:17:10.275: D/dalvikvm(682): GC_FOR_MALLOC freed 10179 objects / 482344 bytes in 32ms
07-27 08:17:10.435: D/dalvikvm(682): GC_FOR_MALLOC freed 13927 objects / 535968 bytes in 33ms
....... About 300 more similar entries... 
```

这是我目前用于序列化的代码：

```
public String fromElement(Object request) {
    Writer writer = new StringWriter();
    try {
        serializer.write(request, writer);
        String res = writer.toString();
        Log.d(LOG_TAG, res);
        return writer.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return "";
} 
```

显然，这会占用大量时间，每次我更改代码并重新部署应用程序时。有没有其他人在使用 libaray 时遇到过这种情况，如果是这样，有什么方法可以防止每次启动应用程序时（从 Eclipse）启动 GC 吗？增加堆（当前设置为`vm.heapSize=24`）会有所帮助吗？还是有不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:58:23.613

您需要升级到 2.6.7，现在注释处理已经完成了相当大的变化。事实证明，Android 有一个众所周知的注释问题，奇怪的是，它与糟糕的 java.lang.reflect.Method.equals(Object) 实现相关。简单的 2.6.7 缓存了更多的注释处理，应该会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:21:17.563

这是在黑暗中拍摄的，但是您是否尝试过更改初始 jvm 堆大小？它是 -xms 参数。它可能在您的模拟器上太低，因此在最初的几分钟内，它会不断尝试调整自身大小并卡住垃圾收集。查看此链接： http: [//www.caucho.com/resin-3.0/performance/jvm-tuning.xtp](http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp)

# python - Python：从文件中读取 '\xc2' 打印正常，但打印具有相同值的字符串变量失败

> ID：11695037
> 
> 赞同：0
> 
> 时间：2012-07-27T20:13:14.350
> 
> 标签：python

```
 with open(path) as f:
        for line in f:
            print line 
```

`path`是单行文件`\xc2`

当我运行它时，我得到

`\xc2`

现在让我们改变这个

```
with open(path) as f:
    for line in f:
                var = '\xc2'
                print var 
```

当我运行它时，我看到

```
UnicodeDecodeError: 'ascii', '\xc2d', 0, 1, 'ordinal not in range(128)' 
```

然后我尝试比较所以我做

```
with open(path) as f:
    for line in f:
        line = line.strip()
        line1 = '\xc2d'
        # print line1
        print line == line1 
```

我看到了`False`

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:21:14.580

当您从文件中读取字符时，`\`它只是另一个字符，没有特殊含义。但是，当您尝试从中创建字符串时，它被用作具有特殊含义的转义符，具体取决于后面的内容。例如`\x`意味着取接下来的 2 个十六进制数字并创建与十六进制代码对应的字符，因此`'\xc2'`是单个字符。由于此字符代码不在 0 到 127 (0x7f) 的 ASCII 范围内，因此当您尝试打印它时会出现错误。

# c++ - 如何并行打开和关闭断言的库构建？

> ID：11695046
> 
> 赞同：1
> 
> 时间：2012-07-27T20:14:15.020
> 
> 标签：c++, c, build

我编写了一个库，并在程序中使用该库。我经常对程序代码进行更改，在打开断言的情况下运行测试，然后如果测试通过，我在关闭断言的情况下运行基准测试，以测量我刚刚所做的更改对性能的影响。我还想在我的库中为测试打开断言，并在库中为基准关闭它们。所以我经常需要在程序和库中同时切换assert设置。

匹配库和程序（使用库）的断言设置（NDEBUG）不能是手动的，因为出错意味着未定义的行为，因为标头中有断言（冲突的定义导致未定义的行为），实际上我得到了崩溃当我使用 assert-on 库构建 assert-off 程序时使用 GCC 程序。我无法找出执行此操作的标准方法是什么。我正在考虑让我的库构建系统安装两个名为 libfoo-1.0 和 libfoo-assert-1.0 或类似名称的二进制文件（如果它们包含在错误的断言设置（NDEBUG）中，可能还有抱怨的头文件）。

在库和程序之间匹配断言设置的最佳方法是什么，以便同时切换两者的断言设置容易、快速且不易出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:30:28.367

通常，构建系统被设置为执行不同的构建（例如调试/发布、多线程/单线程）。生成的库和可执行文件要么放置在不同的目录中，要么具有不同的名称来区分它们。这没有什么不同。

如果您觉得您需要为 assert/noassert 提供额外的构建类型，那么只需添加这个额外的构建类型。唯一的问题是命名约定，如果没有指定特定的构建类型，默认情况下会做什么。

# ruby-on-rails - 更改 mongoid embeds_many 关联名称

> ID：11695050
> 
> 赞同：2
> 
> 时间：2012-07-27T20:14:31.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

使用 Rails 3.2 和 Mongoid 2.4。我有一个遗留模型，Organization，它嵌入了_many_organization_members。它看起来像这样：

```
class Organization
  include Mongoid::Document

  embeds_many :organization_members
end

class OrganizationMembers
  include Mongoid::Document
  embedded_in :organization
end 
```

我想做的是将用于访问成员的方法从**organization.organization_members**更改为仅**organization.members**。这是我所做的：

```
class Organization
  include Mongoid::Document

  embeds_many :members, class_name:"OrganizationMember"
end

class OrganizationMembers
  include Mongoid::Document
  embedded_in :organization
end 
```

但是，现在 organization.members 返回一个空数组，并且 organization.organization_members 返回以前的文档，即使它没有定义 Church_members。

如何说服 Mongoid 使用之前嵌入的集合名称并通过新方法调用（Organization#members 不是 Organization#organization_members）访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T20:20:26.273

有一个选项[`embeds_many`](http://mongoid.org/en/mongoid/docs/relations.html#embeds_many)，称为`store_as`。

```
class Organization
  include Mongoid::Document

  embeds_many :members, 
              class_name:"OrganizationMember", 
              store_as: 'organization_members'
end 
```

# c# - 带有悬停菜单的 ASP GridView，确定调用弹出窗口的行

> ID：11695052
> 
> 赞同：1
> 
> 时间：2012-07-27T20:14:32.690
> 
> 标签：c#, asp.net, gridview, ajaxcontroltoolkit

我`GridView`绑定了一个对象数据源和一个悬停菜单扩展器。在弹出的面板上，我有两个按钮——一个用于删除，一个用于编辑。我遇到的问题是确定哪一行触发了悬停菜单，所以我知道要删除什么。我搜索了整个网站并发现了类似的问题，但我无法正确应用它们。我关注[了这个视频](http://www.youtube.com/watch?v=5K4qgW2Qlhg)，并且能够获得一个隐藏字段来维护 ID，但仅限于创建的最后一行，所以我的删除按钮总是删除最后一个条目。我希望这有点清楚..

这是我的gridview代码：

```
 <asp:GridView runat="server" AutoGenerateColumns="False" 
            DataSourceID="source_Layout_view" ID="GridView1" 
            onrowdatabound="GridView1_RowDataBound" 
            onrowcreated="GridView1_RowCreated">
                <Columns>
                    <asp:BoundField DataField="type" HeaderText="type" SortExpression="type" />
                    <asp:BoundField DataField="code" HeaderText="code" SortExpression="code" />
                    <asp:BoundField DataField="description" HeaderText="description" 
                        SortExpression="description" />
                    <asp:BoundField DataField="position" HeaderText="position" 
                        SortExpression="position" />
                    <asp:BoundField DataField="sequence" HeaderText="sequence" 
                        SortExpression="sequence" />
                    <asp:TemplateField>
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("ID") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Image ID="img_edit" runat="server" ImageUrl='~/ui/images/wrench.png' Width="25px" Height="25px" />
                            <asp:HoverMenuExtender ID="gridview_options_extender" runat="server" PopupControlID="gridview_options_popup" TargetControlID="img_edit" 
                             OffsetX="10" OffsetY="10" PopupPosition="Right" PopDelay="50" HoverDelay="50" >
                            </asp:HoverMenuExtender>
                            <asp:Panel ID="gridview_options_popup" runat="server">
                                <asp:Button ID="btn_popup_delete" runat="server" Text="Delete Unit" OnClick="deleteRow"/>
                                <br />
                                <asp:Button ID="btn_popup_edit" runat="server" Text="Edit Unit" />
                                <asp:HiddenField ID="tellmeRow" runat="server" Value='Eval("ID")'/>
                            </asp:Panel>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

这是我的代码

```
 protected void deleteRow(object sender, EventArgs e)
    {
        Button b = sender as Button;
        Panel x = b.Parent as Panel;
        HiddenField whatiwant = (HiddenField)x.FindControl("tellmeRow");
        int idForDeletion = Int32.Parse(whatiwant.Value);

        using (var context = new cocoEntities())
        {
            context.CoCo_Current.DeleteObject(context.CoCo_Current.Single(o => o.ID == idForDeletion));
            context.SaveChanges();
        }
        Response.Redirect("default.aspx");

    }

    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
    }
    protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            HoverMenuExtender menu = (HoverMenuExtender)e.Row.FindControl("gridview_options_extender");
            e.Row.ID = e.Row.RowIndex.ToString();
            menu.TargetControlID = e.Row.ID;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:47:56.330

不要使用按钮单击处理程序对 GridView 执行某些操作。而是为按钮分配适当的 CommandName 属性值并处理 GridView 的`RowCommand`事件。[GridView.RowCommand 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand%28v=vs.90%29.aspx)

# php - 使用 PHP 打印到共享的 windows 打印机 (Linux PHP Server)

> ID：11695056
> 
> 赞同：0
> 
> 时间：2012-07-27T20:14:43.577
> 
> 标签：php, linux, printing

我有一台连接到 Windows 计算机的打印机（打印机是共享的）。有什么方法可以让我在网络上的 PHP 服务器调用 Windows 打印机进行打印？

目前我使用 Connectship 打印到这些打印机，但我想知道是否可以用 PHP 写一些东西来打印

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-27T20:19:18.210

我相信有：[http ://www.php.net/manual/en/book.printer.php](http://www.php.net/manual/en/book.printer.php)

printer_open — 打开与打印机的连接

# php - 找不到 php_sqlsrv 扩展 - 5.3，线程安全

> ID：11695061
> 
> 赞同：4
> 
> 时间：2012-07-27T20:15:11.570
> 
> 标签：php, apache, xampp

我已经按照这封信的答案回答了这个问题：

[IIS 上的 MSSQL 和 PHP 5.3.5 之间的连接不起作用](https://stackoverflow.com/questions/5425322/connection-between-mssql-and-php-5-3-5-on-iis-is-not-working)

我正在使用带有线程安全 5.3 的 XAMPP。我已将文件复制到扩展目录（同时将它们留在 /php 文件夹中）并添加了扩展行：

```
extension=php_sqlsrv_53_ts.dll
extension=php_pdo_sqlsrv_53_ts.dll 
```

当我这样做时，Apache 无法启动，给我`eventvwr`如下错误：

```
Application popup: Warning : PHP Startup: Unable to load dynamic library
'C:\xampp\php\ext\php_sqlsrv_53_ts.dll' 
- The specified module could not be found. 
```

除了，很明显，那个文件确实存在于那个地方，并且 php.ini 指向那个扩展目录。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:25:53.870

我写了一个页面，在安装 SQLSRV 驱动程序时可能会有所帮助： [http ://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html](http://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html)

不幸的是，当 MSFT 删除旧 XP/2003 驱动程序（2.0 版）的下载时，说明变得复杂，所以在开始之前阅读整个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:39:10.943

见下面网址

[php_sqlsrv.dll：检查 PHP 版本时出错，但扩展有效](https://stackoverflow.com/questions/7422452/php-sqlsrv-dll-gives-error-when-checking-php-version-but-extension-works)

阅读：-

自 PHP 5.3 起，微软有一个新的 windows 驱动程序：

[http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx)

也许你可以试试这个版本，它似乎是最近的 (06/2011)

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T22:54:27.577

可悲的是，没有一个答案解决了这个问题，也没有我已经探索过的途径。

我决定使用带有 SQL Server 连接字符串的 ODBC 驱动程序，这似乎工作正常，但我不能使用 MSSQL 和 SQLSRV 本机函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T10:57:04.837

*当您正在加载的内容*的共享库依赖项丢失时，Windows 会报告此情况。使用depends.exe 查看php_sqlsrv_53_ts.dll 的依赖关系，并确保它先前已加载或在共享库搜索路径中。

[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T12:49:09.503

安装后启动 Drupal 7 堆栈时，我收到了相同的错误消息。我正在使用带有 Win 7 x64 和 acquia-drupal-win-7.31.36-6159.54300 的 VM Ware。

我去了 PHP 站点 [http://php.net/manual/en/sqlsrv.requirements.php](http://php.net/manual/en/sqlsrv.requirements.php) 并安装了 x64 包。步骤 1) 停止 Drupal Stack 2) 运行文件：sqlncli.msi 3) 重新启动 Drupal，并且没有错误消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T19:43:01.520

错误的技术，但我在让 WAMP 连接到 MSSQL 时遇到了问题，并且出现了相同类型的错误。

我通过安装 32 位版本的 WAMP（而不是 64，即使我们在 64 位系统上）解决了这个问题。

即使这不适用于 OP，我希望有人觉得这有帮助！

# objective-c - 初学者对目标 c、分配、属性等的困惑

> ID：11695063
> 
> 赞同：3
> 
> 时间：2012-07-27T20:15:26.620
> 
> 标签：objective-c

对不起，我不能在标题中更具描述性。我知道 C++ 和 C#，以及一点 Java，我正在做一些 Objective C 教程，但无法解释这里发生了什么。

我将向您展示一个示例：

这是矩形类的标题/接口：

```
#import <Foundation/Foundation.h>

@class XYPoint;
@interface Rectangle : NSObject

@property int width, height;

-(int) area;
-(int) perimeter;
-(void) setW:(int)w andH:(int)h;
-(XYPoint *) origin;
-(void) setOrigin:(XYPoint*)pt;

@end 
```

这是实现：

```
#import "Rectangle.h"

@implementation Rectangle{
    XYPoint *origin;
}

@synthesize width, height;

-(void) setW:(int)w andH:(int)h
{
    width = w;
    height = h;
}

-(int) area{
    return width*height;
}

-(int) perimeter{
    return (width+height)*2;
}

-(XYPoint *) origin{
    return origin;
}
-(void) setOrigin:(XYPoint*)pt{
    origin = pt;
}

@end 
```

这是我的主要程序：

```
#import <Foundation/Foundation.h>
#import "Rectangle.h"
#import "XYPoint.h"

int main(int argc, const char * argv[])
{
    @autoreleasepool {

        Rectangle *r = [[Rectangle alloc]init];
        XYPoint *p = [[XYPoint alloc]init];

        [p setX:100 andY:300];
        [r setW:6 andH:8];

        r.origin = p;

        NSLog(@"Width and height is %i %i", r.width, r.height);
        NSLog(@"Origin is at %i,%i", r.origin.x, r.origin.y);
        NSLog(@"Arear and perimeter are %i and %i", [r area], [r perimeter]);

    }
    return 0;
} 
```

这条线`r.origin = p;`让我很困惑。这里具体指的是哪个来源？接口中定义的getter方法，还是实现中声明的实际成员变量？

注意来源不是属性。

老实说，我预计会出现错误。主程序应该只看到 getter 方法，但它似乎不像返回某些东西的 getter 方法可能位于赋值运算符的左侧。或者系统是否以某种方式将该语法映射到对 setOrigin 的调用？

我曾期望设置原点的唯一可能方法是`[r setOrigin: p]`

我可以看到类似的东西是如何`r.width = 5`工作的，就像在标题中声明的宽度一样，它是一个属性，但我看不到它是如何`r.origin = p`工作的。

有人可以解释这里发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:18:50.057

您的猜测是正确的 - 称为点表示法的语法被`[r setOrigin:p]`编译器转换为调用。一般的想法是，就像大多数其他语言一样，您有对象属性的 getter 和 setter。在 Objective-C 中，这些通常写成：

```
- (type)variableName;
- (void)setVariableName:(type)aVariable; 
```

只要您自己的代码符合这些约定，您就可以使用点表示法来获取和设置类上的变量，并相信您的方法被调用。

幕后显然还有很多事情要做，所以我希望这个简短的解释对你来说已经足够了。但是，如果您有兴趣，可以进一步研究：

*   综合属性和实际发生的情况 - 编译器生成上述形式的方法，以及用于实际数据存储的实例变量
*   键值编码，它利用了这些原则和约定
*   某些类型的特殊情况（例如，`BOOL`变量的 getter 通常写成`-isVariableName`而不是`-variableName`），以及如何使用`@property`属性来管理它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:27:05.177

是的，由点表示法调用的属性访问器会自动转换为编译器的方法调用；因此

```
variable = object.property; 
```

相当于

```
variable = [object property]; 
```

和

```
object.property = variable; 
```

相当于

```
[object setProperty:variable]; 
```

# jquery - 如何根据值获取选择选项

> ID：11695064
> 
> 赞同：1
> 
> 时间：2012-07-27T20:15:47.867
> 
> 标签：jquery

我将如何根据该选项的值获得选择选项。

例如：

```
<select>
  <option>option1</option>
  <option>option2</option>
  <option>option3</option>
</select> 
```

我想根据值找到 option2。

```
var temp = "option2"; 
$(select).get(temp); 
```

所以我使用 get() 作为我想要做的一个例子我知道没有一个 get ，但我希望它返回 option2 作为一个 jquery 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:19:02.470

你想要[`:contains`](http://api.jquery.com/contains-selector/)选择器。

```
$('option:contains("option2")', 'select') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:19:11.710

**编辑@Rocket 提出的每个优点::**

如果使用值，请尝试以下操作：

```
var val;

$( 'select' ).change(function(){
  val = $( 'option:selected', this ).val();
}); 
```

如果使用内部文本，试试这个：

```
var text;

$( 'select' ).change(function(){
  text = $( 'option:selected', this ).text();
}); 
```

如果抓住元素试试这个：

```
var elem;

$( 'select' ).change(function(){
  elem = $( 'option:selected', this );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:22:14.853

试试这个： http: [//jsfiddle.net/WEWcc/](http://jsfiddle.net/WEWcc/) **或者**像 Rocket 提到的没有值属性试试这个：http: [//jsfiddle.net/cbyTf/](http://jsfiddle.net/cbyTf/)

可以编写自定义过滤器功能。`:)`

**代码**

```
var temp = "option2";
$(document).ready(function() {

        var filter = temp;
        $('option').each(function() {
            if ($(this).val() == filter) {
                alert($(this).val());
            } else {

            }
            $('select').val(filter);
        })

})​ 
```

**没有值属性**

```
var temp = "option2";
$(document).ready(function() {

        var filter = temp;
        $('option').each(function() {
            if ($(this).html() == filter) {
                alert($(this).html());
            } else {

            }

        })
   $('select').val(filter);
})​ 
```

# objective-c - iPad 中 MFMailComposeViewController 上的“发送”按钮和“保存草稿”按钮上的活动指示器

> ID：11695065
> 
> 赞同：0
> 
> 时间：2012-07-27T20:15:52.007
> 
> 标签：objective-c, ipad, uiactivityindicatorview, mfmailcomposeviewcontroller

在我的 iPad 应用程序中，我正在播放一些 PDF 和视频文件。在应用程序中，用户可以选择通过电子邮件将这些文件发送给自己或朋友。电子邮件功能运行良好，并且电子邮件也可以发送。但是，当用户按下发送按钮发送电子邮件时，它会冻结应用程序一段时间，同样，当用户按下保存草稿按钮保存该电子邮件时，它也会冻结。我认为这是因为附加的 PDF 或视频文件很大，而且附加文件需要时间。当应用程序冻结时，似乎 iPad 已挂起或应用程序正在崩溃。但是，它工作正常。但是看起来不太好。这就是为什么我需要在按下发送或保存草稿按钮时应用活动指示器。它应该可以工作，直到附加文件。我会应用一个活动指标，

提前致谢

个人电脑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T19:29:12.343

我也遇到过同样的问题。不是因为附件的大小。它是任意发生的，这是一个解决方法：

*   在“收件人：”字段中输入任何内容，然后立即退格。
*   “发送”和“取消”按钮应该会重新开始工作。
*   如果没有，通过双击“主页”键退出邮件，按住“邮件”图标，当显示减号信号时，在“邮件”图标上按它。
*   重新启动邮件。你以前的工作应该是完整的。

希望这可以帮助。

# coldfusion - 什么是冷融合中的'variable.whatever'

> ID：11695067
> 
> 赞同：2
> 
> 时间：2012-07-27T20:15:57.373
> 
> 标签：coldfusion

我有这行代码：

```
<cfset variable.currentCategory = 0> 
```

我想知道`变量。部分是。这与会话变量有关吗？我看过“会议”。之前在 CF 中，但不是这个。我正在处理大量代码，而 CF 不是我的驾驶室。我不知道这是 ColdFusion 的问题，还是我还没有找到的代码中其他地方定义的东西。由于问题的性质，很难在谷歌上寻找答案（尝试谷歌搜索coldfusion变量lol）。谢谢。

**编辑** 这一行特别是“变量”而不是“变量”范围。我认为它与范围有关，但我不知道是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T20:52:19.047

它与变量范围或会话范围无关。它是一个包含结构的变量名称“变量”。这可能是一个拼写错误，或者可能是一个名称非常糟糕的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T20:37:26.057

ColdFusion 中有几个可用的范围，变量和会话只是其中的两个。您在 CF 中创建的每个变量都存在于一个范围内。变量范围是使用的默认范围。因此，如果您这样做`<cfset foo = "bar" />`，则与`<cfset variables.foo = "bar" />`.

您可以在 ColdFusion 文档中找到有关 ColdFusion 范围的更多信息：[ColdFusion 9](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7ff1.html)、[ColdFusion 10](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7ff1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T20:38:43.027

`session`您可以像您说的那样在范围内定义值。您也可以在`variables`范围内定义它们，这可能是他们打算在这里做的。他们真正做的是创建一个称为变量的新结构。因此，如果您在该线下方进行操作`<cfdump var="#variable#">`，它将转储整个结构。我的猜测是他们搞砸了，打算打字`variables`。

# reporting-services - SSRS Report Builder 3：无法移动或添加某些项目

> ID：11695071
> 
> 赞同：1
> 
> 时间：2012-07-27T20:16:07.827
> 
> 标签：reporting-services, reportbuilder3.0

我的现有报表在 Report Builder 3 中运行良好，但现在当我进入设计模式并单击某个项目时，会显示 4 箭头移动图标，但我无法用鼠标移动任何项目。不过我可以用键盘移动它们。

此外，我无法插入图表、表格、矩阵或列表项。当我单击功能区上的那些时，下拉菜单甚至不显示。报告中的其他功能（如使数据源、数据集等工作，鼠标左右键）工作正常，除了移动项目。我也可以右键单击某处并插入表格或图表，但那时没有向导选项，仍然无法移动项目。

我已经卸载并重新安装了 Report Builder 3，但没有运气。这些报表在另一台装有 Report Builder 3 的计算机上运行良好。*新*报表也有同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:02:42.093

原来是我的鼠标！从未见过像这样的失败，其中一些程序中的一些窗口无法移动，但其他一切正常。大约一周后，它不会移动任何窗口，即使拔下它并插入另一个窗口也无法修复它，我不得不重新启动并连接新鼠标。然后就没事了。很奇怪。

# xslt - 如何在 XS 中访问“其他”命名空间的元素

> ID：11695076
> 
> 赞同：1
> 
> 时间：2012-07-27T20:16:30.810
> 
> 标签：xslt, xslt-2.0

示例架构：

```
<xs:complexType name="ClassTest">
    <xs:element name="Name" type="xs:string" />
 <xs:element name="Class" type="xs:string" />
 <xs:any namespace="##other" processContents="lax"maxOccurs="Unbound" /> 
```

示例 XML：

```
<ClassTestxmlns="http://schooltest.com">
 <Name>AAA</Name>
 <Class>3</Class>
 <ns:maths>33</ns:maths>
 <ps:english>44<ps:english>
</ClassTest> 
```

如何将具有不同命名空间的元素数学和英语引用到目标命名空间？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:55:05.677

As your question is tagged as XSLT 2.0, you could also consider to use a wildcard e.g. `*:maths` and `*:english`, that selects elements with local name `maths` respectively `english` in any namespace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:04:59.743

> 如何将具有不同名称空间的元素数学和英语引用到目标名称空间。

**因为事先对此类元素的名称空间和名称一无所知，所以只有在不使用任何特定名称或名称空间的情况下选择它们才是安全的**：

```
/x:ClassTest/*[not(self::x:Name or self::x:Class)] 
```

其中前缀`"x:"`必须绑定到命名空间`"http://schooltest.com"`。

此表达式选择作为顶部元素的子元素`x:ClassTest`且不是元素之一的任何元素`x:Name`or `x:Class`。当应用于提供的 XML 文档时，它会同时选择`ns:maths`和`ps:english`元素。

# python - 为什么 .png 文件不能使用 Python 脚本下载，而它适用于其他图像类型？

> ID：11695080
> 
> 赞同：2
> 
> 时间：2012-07-27T20:16:51.190
> 
> 标签：python, image, file, png

我正在尝试搜索网页的源代码，并使用 Python 从中下载各种文件。此脚本在源代码中搜索 .jpg 文件并按预期下载它们。但是，在修改脚本时（将“.jpg”更改为“.png”，如下所示），我收到错误消息：

```
Traceback (most recent call last):
File "img.py", line 19, in <module> urllib.urlretrieve(images[z], "image"+str(z)+".png")
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 91, in urlretrieve
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 237, in retrieve
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 205, in open
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 461, in open_file
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 475, in open_local_file
IOError: [Errno 2] No such file or directory: '/images/adapt-icon-search.png?1342791397' 
```

这是我正在使用的脚本：

```
import urllib
import urllib2
import re

print "enter url of site (such as 'dribbble.com')"

url = raw_input()
fullurl = "http://"+url

src = urllib2.urlopen(fullurl)
src = src.read()

images = re.findall('src="(.*\.png[^"]*)', src)

z=0
while z < len(images):
    urllib.urlretrieve(images[z], "image"+str(z)+".png")
    print "done"
    z+=1 
```

非常感谢您了解为什么此脚本不适用于 .png 文件。提前谢谢了。

更新：下面是我要搜索的源示例：

```
<span rel="tipsy" title="This shot has rebounds." class="rebound-mark has-rebounds">1</span>
                </a>            
        </div>
    </div>
    <h2>
        <a href="/Dash" class="url" rel="contact" title="Dash"><img alt="Avatar-new" class="photo fn" src="http://dribbble.s3.amazonaws.com/users/107759/avatars/original/avatar-new.png?1339961321" /> Dash</a>
        <a href="/account/pro" class="badge-link">
    <span class="badge badge-pro">Pro</span>
</a>
    </h2> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T20:35:20.803

所以你得到的错误是这样的：

> IOError：[Errno 2] 没有这样的文件或目录：'/images/adapt-icon-search.png?1342791397'

发生的情况是，您正在抓取的网页有一些 PNG 引用，其中不包括 URL 中包含的域名。当您尝试在`while`循环中获取它们时，它会失败，因为您只提供远程主机上的位置：`/images/adapt-icon-search.png?1342791397`.

您需要扩展您的代码以检测这些类型的 URL（这是完全合法的，实际上非常常见）。对于您在此处访问的类型，您只需在匹配的 URL 前面加上服务器的主机名（例如`http://dribble.com/`）。

您可能还想处理相对 URL，它也排除主机名，但开头没有`/`字符。如果有前一页的路径，则需要在它们前面加上。因此，如果您正在抓取`http://dribble.com/foo/bar.html`，则需要在相对 URL 前面加上`http://dribble.com/foo/`.

可能有一个库可以为您自动处理非绝对 URL，这可能是网络抓取过程的一部分。恐怕我对网络抓取的第一手了解不多，但也许其他人可以在评论中提出建议。

# c# - c#是否有richtextbox刷新功能

> ID：11695083
> 
> 赞同：0
> 
> 时间：2012-07-27T20:17:03.943
> 
> 标签：c#, user-interface, printing, richtextbox, flush

**问题：**

我可以对富文本框执行类似刷新的功能吗？

**原因：**

我正在使用循环一次向 Richtextbox 写入约 20-40 行文本，我的问题是整个 GUI 在那段时间冻结，并且在所有内容都写入richtextbox 并且代码继续之前什么都看不到。如果可能的话，我想立即将每一行写到屏幕上以避免冻结。我知道在控制台中我可以使用 aFileStream.Flush() 命令来执行此功能。aFileStream.appendtext() 有类似的功能吗？我的 googleFu 今天很弱，我在网上找不到任何这样的例子。任何帮助表示赞赏。

**示例代码：**

```
 foreach (string fullPath in appDataDirectories)
                {
                    //update progess bar
                    progresbarupdate();
                    //split file path in to parts
                    string[] folders = fullPath.Split('\\');
                    //print out create time for directory
                    DateTime creationTimeUtc = Directory.GetCreationTimeUtc(fullPath);
                    String ctime = creationTimeUtc.ToString();
                    //create String
                    String printable = String.Format("{0,-50}\t{1}", ctime, fullPath);
                    output.AppendText(printable + "\n");
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:40:51.657

我不这么认为，您将能够通过刷新来解冻 RichTextBox

您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在单独的线程上在后台做一些工作，然后调用 RichTextBox 的 Text 操作

请看我的例子，显示 RichTextBox 没有冻结

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        BackgroundWorker bg = new BackgroundWorker();
        bg.DoWork += new DoWorkEventHandler(bg_DoWork);
        bg.RunWorkerAsync();
    }

    void bg_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i < 1000000000; i++)
        {
            Action action = () => richTextBox1.Text += "Line Number " + i;
            richTextBox1.Invoke(action); 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:44:06.073

你最好的办法是在一个单独的线程上处理这个问题，并使用 BeginInvoke 方法来编写你想要的文本。这应该保持主 UI 响应。

[http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)

# javascript - 按钮点击隐藏和显示列表

> ID：11695091
> 
> 赞同：0
> 
> 时间：2012-07-27T20:17:44.753
> 
> 标签：javascript, jquery, html, css, show-hide

我试图从某个点隐藏和显示一个列表。但它不起作用。我正在使用 jquery .toggle 来获得这种效果，但由于某种原因，列表项不会让步。真的需要对此进行解释以及为什么它不起作用。

**CSS**：

```
div#right-column-sidebar{position: absolute; top: 840px; right: -140px}

div#right-column-sidebar ol{position:absolute; right: 150px;margin:    
10px 0 10px 10px; font-size: 20px; color: red;list-style-type:none}

div#right-column-sidebar ol li {list-style-type:none;margin: 10px 0 10px 0; border-    
bottom: 1px dotted grey; width: 200px; display: block;}}

div#right-column-sidebar ol li a{font-size: 60%; color: blue;margin-left: 20px}
div#right-column-sidebar ol li:nth-child(11){margin-left:}      
div#right-column-sidebar ol li a:hover{text-decoration: underline;}

a.button {
    border: 1px solid lightgrey;no-repeat scroll top right;
    color: #444;
    display: block;
    float: left;
    font: normal 12px arial, sans-serif;
    height: 24px;
    margin-right: 6px;
    padding-right: 18px; /* sliding doors padding */
    text-decoration: none;
}

a.button span {
    display: block;
    line-height: 14px;
    padding: 5px 0 5px 18px;
} 
```

**HTML**：

```
<div id="right-column-sidebar">
    <ol>
        <li><a href="#">Title 1</a></li>
        <li><a href="#">Title 2</a></li>
        <li><a href="#">Title 3</a></li>
        <li><a href="#">Title 4</a></li>
        <li><a href="#">Title 5</a></li>
        <li><a href="#">Title 6</a></li>
        <li><a href="#">Title 7</a></li>
        <li><a href="#">Title 8</a></li>
        <li><a href="#">Title 9</a></li>
        <li><a href="#">Title 10</a></li>
        <li><a href="#">Title 11</a></li>
        <li><a href="#">Title 12</a></li>
        <li><a href="#">Title 13</a></li>
        <li><a href="#">Title 14</a></li>
        <li><a href="#">Title 15</a></li>
        <li><a href="#">Title 16</a></li>
        <li><a href="#">Title 17</a></li>
        <li><a href="#">Title 18</a></li>
        <li><a href="#">Title 19</a></li>
        <li><a href="#">Title 20</a></li>
    </ol>
</div>
<a class="button" href="#"><span>Show more</span></a> 
```

**JavaScript**：

```
$('a.button').click( function() { 
    $('div#right-column-sidebar ol li:nth-child(1n)').toggle(); 
}); 
```

这就是所有的代码，我想从一个点开始隐藏和显示列表项。当我再次单击时，我想再次显示它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:27:21.293

试试这个 - [http://jsfiddle.net/9HXzW/1/](http://jsfiddle.net/9HXzW/1/)

```
$('div#right-column-sidebar ol li:gt(4)').hide();
$('a.button').on("click", function() {
    $('div#right-column-sidebar ol li:gt(4)').slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:31:41.887

这工作正常：http: [//jsfiddle.net/zn55e/1/](http://jsfiddle.net/zn55e/1/)。我的猜测是，您要么没有正确加载 jQuery，要么通过`nth-child(1n)`在 Javascript 中指定而使自己感到奇怪——如果您要选择第一项，`nth-child(1)`这是正确的说法。

PS：关闭`margin-left`线路`div#right-column-sidebar ol li:nth-child(11){margin-left:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:35:26.763

像这样的东西？

[http://jsfiddle.net/nickaknudson/fkqgz/](http://jsfiddle.net/nickaknudson/fkqgz/)

# objective-c - 使用 NSNumberFormatter 获取十进制的时间值并四舍五入

> ID：11695095
> 
> 赞同：0
> 
> 时间：2012-07-27T20:18:39.967
> 
> 标签：objective-c, ios, ios5, nsnumberformatter

我需要能够计算两个日期之间的时间差，然后以一位精度十进制格式存储该值。所以如果时差是 6 分钟我需要返回 0.1，如果是 3 分钟我仍然需要返回 0.1，但如果是 7 分钟或 12 分钟，我需要返回 0.2。时间差的减法工作正常：

```
NSTimeInterval interval = [currentFlight.landtime timeIntervalSinceDate:currentFlight.takeofftime]; 
```

这会按预期返回，因此如果差值为 6（分钟），我得到的值为 0.100000。

我还需要在`UILabel`. 当我使用这个数字格式化程序时，0.100000 显示为 .2 而不是 .1：

```
NSNumberFormatter *ftDecimalFormatter = [[NSNumberFormatter alloc] init];
[ftDecimalFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[ftDecimalFormatter setMaximumFractionDigits:1];
[ftDecimalFormatter setMinimumFractionDigits:1];
[ftDecimalFormatter setRoundingMode:NSNumberFormatterRoundUp]; 
```

我已经尝试了所有不同的舍入方法，但似乎没有一个有效。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:43:55.177

将数字乘以 10，加上 0.9999999999999，截断小数部分（即下限），然后除以 10。[您可以通过其他方式获得相同的结果，这只是一种方式。] 然后您可以使用格式字符串打印您的数字指定一位十进制数字，不是吗？

# random - CUDA - 多线程

> ID：11695099
> 
> 赞同：0
> 
> 时间：2012-07-27T20:18:55.853
> 
> 标签：random, cuda, numbers, gpu

我正在尝试使用 CUDA 和 GPU 使 LCG 随机数生成器并行运行。但是，我实际上无法同时运行多个线程。这是代码的副本：

```
#include <iostream>
#include <math.h>

__global__ void rng(long *cont)
{

    int a=9, c=3, F, X=1; 
    long M=524288, Y;     
    printf("\nKernel X is %d\n", X[0]);     
    F=X;
    Y=X;
    printf("Kernel F is %d\nKernel Y is %d\n", F, Y);
    Y=(a*Y+c)%M;
    printf("%ld\t", Y);
    while(Y!=F)
    {
        Y=(a*Y+c)%M;
        printf("%ld\t", Y);
    cont[0]++;
    }
}
int main()
{
    long cont[1]={1};
    int X[1];
    long *dev_cont;
    int *dev_X;
    cudaEvent_t beginEvent;
    cudaEvent_t endEvent;
    cudaEventCreate( &beginEvent );
    cudaEventCreate( &endEvent );
    printf("Please give the value of the seed X ");
    scanf("%d", &X[0]);
    printf("Host X is: %d", *X);
    cudaEventRecord( beginEvent, 0);
    cudaMalloc( (void**)&dev_cont, sizeof(long) );
    cudaMalloc( (void**)&dev_X, sizeof(int) );
    cudaMemcpy(dev_cont, cont, 1 * sizeof(long), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_X, X, 1 * sizeof(int), cudaMemcpyHostToDevice);
    rng<<<1,1>>>(dev_cont);
    cudaMemcpy(cont, dev_cont, 1 * sizeof(long), cudaMemcpyDeviceToHost);
    cudaEventRecord( endEvent, 0);
    cudaEventSynchronize (endEvent );
    float timevalue;
    cudaEventElapsedTime (&timevalue, beginEvent, endEvent);
    printf("\n\nYou generated a total of %ld numbers", cont[0]);
    printf("\nCUDA Kernel Time: %.2f ms\n", timevalue);
    cudaFree(dev_cont);
    cudaFree(dev_X);
    cudaEventDestroy( endEvent );
    cudaEventDestroy( beginEvent );
    return 0;
} 
```

现在我只用一个线程发送一个块。但是，如果我发送 100 个线程，唯一会发生的事情是它会产生相同的数字 100 次，然后继续下一个数字。从理论上讲，这是意料之中的，但当一个数字重复时，它会自动忽略“随机数”的目的。

我想要实现的想法是拥有多个线程。一个线程将使用该公式：Y=(a*Y+c)%M 但使用初始值 Y=1，然后另一个线程将使用相同的公式但初始值为 Y=1000 等。但是，一旦第一个线程产生了 1000 个数字，它就需要停止进行更多的计算，因为如果它继续下去，它将干扰第二个线程产生值 Y=1000 的数字。

如果有人能指出正确的方向，至少在创建具有不同功能或指令的多个线程以并行运行的方式上，我将尝试找出其余的。

谢谢！

## 更新：美国东部标准时间 7 月 31 日晚上 8:14

我将我的代码更新为以下内容。基本上我正在尝试产生 256 个随机数。我创建了将存储这 256 个数字的数组。我还为线程中的 Y 值创建了一个包含 10 个不同种子值的数组。我还更改了代码以请求设备中的 10 个线程。我还保存了在数组中生成的数字。代码无法正常工作。请告知如何修复它或如何使其达到我想要的效果。

谢谢！

```
#include <iostream>
#include <math.h>

__global__ void rng(long *cont, int *L, int *N)
{

    int Y=threadIdx.x;
    Y=N[threadIdx.x];
    int a=9, c=3, i;
    long M=256;
    for(i=0;i<256;i++)
    {
        Y=(a*Y+c)%M;
        N[i]=Y;
        cont[0]++;
    }
}
int main()
{
    long cont[1]={1};
    int i;
    int L[10]={1,25,50,75,100,125,150,175,200,225}, N[256];
    long *dev_cont;
    int *dev_L, *dev_N;
    cudaEvent_t beginEvent;
    cudaEvent_t endEvent;
    cudaEventCreate( &beginEvent );
    cudaEventCreate( &endEvent );
    cudaEventRecord( beginEvent, 0);
    cudaMalloc( (void**)&dev_cont, sizeof(long) );
    cudaMalloc( (void**)&dev_L, sizeof(int) );
    cudaMalloc( (void**)&dev_N, sizeof(int) );
    cudaMemcpy(dev_cont, cont, 1 * sizeof(long), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_L, L, 10 * sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_N, N, 256 * sizeof(int), cudaMemcpyHostToDevice);
    rng<<<1,10>>>(dev_cont, dev_L, dev_N);
    cudaMemcpy(cont, dev_cont, 1 * sizeof(long), cudaMemcpyDeviceToHost);
    cudaMemcpy(N, dev_N, 256 * sizeof(int), cudaMemcpyDeviceToHost);
    cudaEventRecord( endEvent, 0);
    cudaEventSynchronize (endEvent );
    float timevalue;
    cudaEventElapsedTime (&timevalue, beginEvent, endEvent);
    printf("\n\nYou generated a total of %ld numbers", cont[0]);
    printf("\nCUDA Kernel Time: %.2f ms\n", timevalue);
    printf("Your numbers are:");
    for(i=0;i<256;i++)
    {
        printf("%d\t", N[i]);
    }
    cudaFree(dev_cont);
    cudaFree(dev_L);
    cudaFree(dev_N);
    cudaEventDestroy( endEvent );
    cudaEventDestroy( beginEvent );
    return 0;
} 
```

@Bardia - 请让我知道如何更改代码以满足我的需求。

## 更新：美国东部标准时间 8 月 1 日下午 5:39

我编辑了我的代码以适应@Bardia 对内核代码的修改。然而，数字生成过程中出现了一些错误。首先，我在内核中创建的用于计算正在创建的数字数量的计数器不起作用。最后它只显示生成了“1”号。我创建的用于测量内核执行指令所需时间的计时器也无法正常工作，因为它一直显示 0.00 毫秒。根据我为公式设置的参数，正在生成并复制到数组中然后打印在屏幕上的数字并不反映要出现（甚至接近）的数字。这些都是以前工作的。

这是新代码：

```
#include <iostream>
#include <math.h>

__global__ void rng(long *cont, int *L, int *N)
{

    int Y=threadIdx.x;
    Y=L[threadIdx.x];
    int a=9, c=3, i;
    long M=256;
    int length=ceil((float)M/10); //256 divided by the number of threads.
    for(i=(threadIdx.x*length);i<length;i++)
    {
        Y=(a*Y+c)%M;
        N[i]=Y;
        cont[0]++;
    }
}
int main()
{
    long cont[1]={1};
    int i;
    int L[10]={1,25,50,75,100,125,150,175,200,225}, N[256];
    long *dev_cont;
    int *dev_L, *dev_N;
    cudaEvent_t beginEvent;
    cudaEvent_t endEvent;
    cudaEventCreate( &beginEvent );
    cudaEventCreate( &endEvent );
    cudaEventRecord( beginEvent, 0);
    cudaMalloc( (void**)&dev_cont, sizeof(long) );
    cudaMalloc( (void**)&dev_L, sizeof(int) );
    cudaMalloc( (void**)&dev_N, sizeof(int) );
    cudaMemcpy(dev_cont, cont, 1 * sizeof(long), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_L, L, 10 * sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(dev_N, N, 256 * sizeof(int), cudaMemcpyHostToDevice);
    rng<<<1,10>>>(dev_cont, dev_L, dev_N);
    cudaMemcpy(cont, dev_cont, 1 * sizeof(long), cudaMemcpyDeviceToHost);
    cudaMemcpy(N, dev_N, 256 * sizeof(int), cudaMemcpyDeviceToHost);
    cudaEventRecord( endEvent, 0);
    cudaEventSynchronize (endEvent );
    float timevalue;
    cudaEventElapsedTime (&timevalue, beginEvent, endEvent);
    printf("\n\nYou generated a total of %ld numbers", cont[0]);
    printf("\nCUDA Kernel Time: %.2f ms\n", timevalue);
    printf("Your numbers are:");
    for(i=0;i<256;i++)
    {
        printf("%d\t", N[i]);
    }
    cudaFree(dev_cont);
    cudaFree(dev_L);
    cudaFree(dev_N);
    cudaEventDestroy( endEvent );
    cudaEventDestroy( beginEvent );
    return 0;
} 
```

这是我收到的输出：

```
[wigberto@client2 CUDA]$ ./RNG8

You generated a total of 1 numbers
CUDA Kernel Time: 0.00 ms
Your numbers are:614350480      32767   1132936976      11079   2       0       10      0       1293351837      0       -161443660      48      0       0       614350336       32767    1293351836      0       -161444681      48      614350760       32767   1132936976      11079   2       0       10      0       1057178751      0       -161443660      48       155289096       49      614350416       32767   1057178750      0       614350816       32767   614350840       32767   155210544       49      0       0       1132937352       11079   1130370784      11079   1130382061      11079   155289096       49      1130376992      11079   0       1       1610    1       1       1       1130370408      11079    614350896       32767   614350816       32767   1057178751      0       614350840       32767   0       0       -161443150      48      0       0       1132937352      11079    1       11079   0       0       1       0       614351008       32767   614351032       32767   0       0       0       0       0       0       1130369536      1       1132937352       11079   1130370400      11079   614350944       32767   1130369536      11079   1130382061      11079   1130370784      11079   1130365792      11079   6143510880       614351008       32767   -920274837      0       614351032       32767   0       0       -161443150      48      0       0       0       0       1       0       128     0-153802168      48      614350896       32767   1132839104      11079   97      0       88      0       1       0       155249184       49      1130370784      11079   0       0-1      0       1130364928      11079   2464624 0       4198536 0       4198536 0       4197546 0       372297808       0       1130373120      11079   -161427611      48      111079   0       0       1       0       -153802272      48      155249184       49      372297840       0       -1      0       -161404446      48      0       0       0       0372298000       0       372297896       0       372297984       0       0       0       0       0       1130369536      11079   84      0       1130471067      11079   6303744 0614351656       32767   0       0       -1      0       4198536 0       4198536 0       4197546 0       1130397880      11079   0       0       0       0       0       0       00       0       0       -161404446      48      0       0       4198536 0       4198536 0       6303744 0       614351280       32767   6303744 0       614351656       32767   614351640        32767   1       0       4197371 0       0       0       0       0       [wigberto@client2 CUDA]$ 
```

@Bardia - 请告知这里最好的做法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:20:21.603

`threadIdx`您可以按变量寻址块内的线程。即，在您的情况下，您可能应该设置

`Y = threadIdx.x`然后使用`Y=(a*Y+c)%M`

但总的来说，在 CUDA 上实现一个好的 RNG 可能真的很困难。所以我不知道你是否想实现自己的生成器只是为了练习..

否则，有一个可用的 CURAND 库，它提供了许多伪和准随机生成器，即。XORWOW、MersenneTwister、Sobol 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:34:52.997

它应该在所有线程中执行相同的工作，因为您希望它们执行相同的工作。您应该始终通过寻址来区分线程。

例如，你应该说线程#1 你做这个工作并保存你在这里的工作，线程#2 你做那个工作并在那里保存你的工作，然后转到主机并使用该数据。

对于每个块中具有二维线程的二维块网格，我使用此代码进行寻址：

```
int X = blockIdx.x*blockDim.x+threadIdx.x;
int Y = blockIdx.y*blockDim.y+threadIdx.y; 
```

上面代码中的`X`and`Y`是你的线程的全局地址（我认为你的一维网格和线程就足够了）。

另请记住，您不能`printf`在内核上使用该功能。GPU 不能进行任何中断。为此，您可以使用`cuPrintf`作为 CUDA SDK 示例之一的函数，但请阅读它的说明以正确使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:28:36.707

该答案与问题的已编辑部分有关。

我没有注意到它是一种递归算法，不幸的是我不知道如何并行化递归算法。

我生成这 256 个数字的唯一想法是分别生成它们。即在第一个线程中生成 26 个，在第二个线程中生成 26 个，依此类推。此代码将执行此操作（这只是内核部分）：

```
#include <iostream>
#include <math.h>

__global__ void rng(long *cont, int *L, int *N)
{

    int Y=threadIdx.x;
    Y=L[threadIdx.x];
    int a=9, c=3, i;
    long M=256;
    int length=ceil((float)M/10); //256 divided by the number of threads.
    for(i=(threadIdx.x*length);i<length;i++)
    {
        Y=(a*Y+c)%M;
        N[i]=Y;
        cont[0]++;
    }
} 
```

# javascript - 使用javascript的跨度内的html内容

> ID：11695102
> 
> 赞同：1
> 
> 时间：2012-07-27T20:19:05.080
> 
> 标签：javascript, html, dynamic-content

我有一个跨度和 5 个不同的 html 结构，它们基本上涉及列表和 div。

我有 5 个按钮。单击每个按钮应将跨度的内容更改为这些结构之一。

我知道它可以像使用一样容易地完成

```
document.getElementById("a").innerHTML = "<div> A </div>"; 
```

但是如果我有一个 20-30 行的 html 结构，这是最好的方法吗？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:24:29.823

如果你要拥有一堆这样的按钮，你应该使用一个你可以用传递的数据调用的函数，这样就不必重写东西 voer 和类似的东西

```
function insertHTML(id, content) {
    document.getElementById(id).innerHTML = content;
} 
```

然后你可以像这样在你的按钮项目上放置一个 onclick 函数：

```
<div class="button" onclick="insertHTML('idoftarget', '<div>html</div>')"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:26:22.193

首先你的例子是无效的。div 标签不应进入`a`标签或`span`标签内。

我将获取您要注入的 5 个 HTML 样本中的每一个，并将它们制作成 JS 中的字符串，然后当用户单击其中一个按钮时，只需使用 innerHTML 将它们放入相应的容器中。

# ruby-on-rails - 控制器中的 NoMethodError#new

> ID：11695108
> 
> 赞同：0
> 
> 时间：2012-07-27T20:19:19.380
> 
> 标签：ruby-on-rails, controller, nomethoderror

大家好我在我的应用程序中工作，我遇到了这个错误

```
NoMethodError in GasStationsController#new

undefined method `gas_stations' for #<Class:0x12cf77510>
Rails.root: /Users/Users/Documents/myapps/app1

Application Trace | Framework Trace | Full Trace
app/controllers/gas_stations_controller.rb:4:in `new' 
```

我不明白我的路线是否正常。我把我的 routes.rb 和我的 GasStationsController

```
Estaciones::Application.routes.draw do
    root :to => "static_pages#home"
    match '/contact', :to=>'static_pages#contact'
    match '/about', :to=>'static_pages#about'
    devise_for :users
    resources :users do
        resources :gas_stations
    end
    ....

user_gas_stations GET    /users/:user_id/gas_stations(.:format)                       gas_stations#index
                      POST   /users/:user_id/gas_stations(.:format)                       gas_stations#create
 new_user_gas_station GET    /users/:user_id/gas_stations/new(.:format)                   gas_stations#new
edit_user_gas_station GET    /users/:user_id/gas_stations/:id/edit(.:format)              gas_stations#edit
     user_gas_station GET    /users/:user_id/gas_stations/:id(.:format)                   gas_stations#show
                      PUT    /users/:user_id/gas_stations/:id(.:format)                   gas_stations#update
                      DELETE /users/:user_id/gas_stations/:id(.:format)                   gas_stations#destroy 
```

如您所见，方法是“gas_stations”

我的控制器上只有这个

```
class GasStationsController < ApplicationController
     def new
      @user = User.find(params[:user_id])
      @gas_station = @user.gas_stations.build
     end
end 
```

用户模型

```
class User < ActiveRecord::Base
 # Include default devise modules. Others available are:
 # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
 devise :database_authenticatable, :registerable,:recoverable, :rememberable, :trackable, :validatable

 # Setup accessible (or protected) attributes for your model
 attr_accessible :name, :email, :password, :password_confirmation, :remember_me
 # attr_accessible :title, :body
 has_many :cars
 validates_presence_of  :email
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:37:21.657

正如错误所说，Rails 不知道与用户有关的 gas_stations 是什么。您需要设置该关联：

```
class User ...
  ...   
  has_many :gas_stations
  ... 
```

# php - 基于会话的服务器端数据设置和检索

> ID：11695109
> 
> 赞同：2
> 
> 时间：2012-07-27T20:19:21.490
> 
> 标签：php, javascript, jquery, web-services, model-view-controller

我有一个关于如何处理当前项目的理论问题。这是一个使用 JS + PHP 的相当简单的匹配测验。我只是在服务器上处理业务逻辑（答案检查、分数更新），例如大致遵循 MVC 约定。

我目前的设置：

*   HTML + JS 页面允许用户将答案拖放到问题上。成功删除后，问题 + 答案组合将发送到以下位置：
*   基于 XML 文件检查答案正确性的服务器端 PHP 页面。我在一些 XML 客户端中返回了一些数据，例如真/假和某个问题的尝试次数。**此外，如果答案是正确的，我会在服务器上增加一个会话变量来跟踪用户的分数。**

我的问题围绕着设置上述会话变量以跟踪分数的最佳实践。我知道，在计算机关闭、浏览器意外关闭等情况下，更持久的设置很可能更可取……但严格基于此设置 -

1.  这是存储最终插入数据库的分数的安全方法吗？
2.  我最终将不得不在游戏结束时（或者甚至是游戏中期，就此而言）从服务器上拉下分数。我是否应该创建一个简单的“getter”PHP 页面来降低分数，然后访问会话变量并将其发送给客户端？
3.  目前，用户实际上可以访问 php 服务器端页面，因为它与实际测验位于同一文件夹中。这很可能是一个禁忌 - 但是隐藏这个仅限服务器的文件不让用户窥探（无需使用身份验证）的常见做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:27:36.143

> 这是存储最终插入数据库的分数的安全方法吗？

它是安全的。但是我不明白为什么您不会在数据库中更改分数时更新它们。这样，*它将*是持久的。

> 我最终将不得不在游戏结束时（或者甚至是游戏中期，就此而言）从服务器上拉下分数。我是否应该创建一个简单的“getter”PHP 页面来降低分数，然后访问会话变量并将其发送给客户端？

听起来像是个计划。

> 目前，用户实际上可以访问 php 服务器端页面，因为它与实际测验位于同一文件夹中。这很可能是一个禁忌 - 但是隐藏这个仅限服务器的文件不让用户窥探（无需使用身份验证）的常见做法是什么？

只要文件是 .php 文件并由网络服务器解析，用户就只能对文件进行请求，仅此而已（如果我理解的问题是正确的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:45:32.267

看看这个。我希望这能帮到您

[http://www.linuxforu.com/2009/01/server-side-sessions/](http://www.linuxforu.com/2009/01/server-side-sessions/)

# perl - 为什么这个程序有效？我试图创建一个语法错误

> ID：11695110
> 
> 赞同：519
> 
> 时间：2012-07-27T20:19:22.593
> 
> 标签：perl

我在 Windows 7 上运行 ActiveState 的 32 位[ActivePerl](https://www.activestate.com/activeperl) 5.14.2。我想弄乱一个 Git 预提交挂钩来检测正在签入的程序是否存在语法错误。（不知何故，我只是设法做了这么糟糕的提交。）所以作为一个测试程序，我随机记下这个：

```
use strict;
use warnings;

Syntax error!

exit 0; 
```

但是，它编译并执行时没有警告，并且错误级别在退出时为零。这个有效的语法如何？

* * *

## 回答 #1

> 赞同：568
> 
> 时间：2012-07-27T20:36:00.930

Perl 有一种称为“间接方法表示法”的语法。它允许

```
Foo->new($bar) 
```

写成

```
new Foo $bar 
```

所以这意味着

```
Syntax error ! exit 0; 
```

是相同的

```
error->Syntax(! exit 0); 
```

或者

```
error->Syntax(!exit(0)); 
```

它不仅是有效的语法，而且不会导致运行时错误，因为首先执行的是`exit(0)`.

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-07-27T20:26:55.417

我不知道为什么，但这就是 Perl 所做的：

```
perl -MO=Deparse -w yuck
BEGIN { $^W = 1; }
use warnings;
use strict 'refs';
'error'->Syntax(!exit(0));
yuck syntax OK 
```

似乎解析器认为您正在调用-object`Syntax`上的方法`error`......确实很奇怪！

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-07-27T20:36:41.493

您没有收到错误的原因是第一个执行的代码是

```
exit(0); 
```

因为第一行没有分号：

```
Syntax error! 
```

编译器将（错误地）猜测这是一个带有`not`运算符的子例程调用`!`。然后它将执行该子例程的参数，该子例程恰好是`exit(0)`，此时程序退出并将 errorlevel 设置为 0。不执行其他任何操作，因此不再报告运行时错误。

您会注意到，如果您更改`exit(0)`为类似`print "Hello world!"`的内容，则会出现错误：

```
Can't locate object method "Syntax" via package "error" ... 
```

并且您的错误级别将被设置：

```
> echo %errorlevel%
255 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-04-03T14:07:28.740

如上所述，这是由间接方法调用表示法引起的。您可以对此发出警告：

```
use strict;
use warnings;
no indirect;

Syntax error!

exit 0; 
```

产生：

```
Indirect call of method "Syntax" on object "error" at - line 5. 
```

这需要[间接 CPAN 模块](http://metacpan.org/module/indirect)。

你也可以`no indirect "fatal";`用来导致程序死掉（这就是我所做的）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-02-05T21:00:05.500

试试[Perl 6](https://perl6.org/)，它似乎更容易满足您的期望：

```
===SORRY!=== Error while compiling synerror.p6
Negation metaoperator not followed by valid infix
at synerror.p6:1
------> Syntax error!⏏&lt;EOL>
    expecting any of:
        infix
        infix stopper 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-05T14:22:17.543

> 在[本文](https://famicol.in/sigbovik/)中，我们旨在回答编程语言社区中一个长期存在的开放性问题：是否可以在不创建有效 Perl 的情况下将油漆涂抹在墙上？

TLDR；几乎不

# php - RedBeanPHP 未正确保存字符串，从重音元音开始跳过

> ID：11695111
> 
> 赞同：3
> 
> 时间：2012-07-27T20:19:23.783
> 
> 标签：php, redbean

我正在尝试使用 RedBeanPHP 保存一些简单的 PHP 对象。它工作得很好，除了在字符串字段上，它到达一个有重音元音的点，即`á`或'í'，并跳过字符串中其余的剩余字符。

例子：

```
// Actual string in PHP script.
Esta es una frase mía y me gusta!

// Saved to database.
Esta es una frase m 
```

这是我的 PHP 脚本：

```
// Setup RedBean to work with a database.
R::setup('mysql:host=localhost;dbname=noticias','root','');

foreach($parsedNews as &$tmpNews) {
    $noticia = R::dispense('noticia');
    $noticia->imagen = $tmpNews->get_image();
    $noticia->fecha = $tmpNews->get_fechanoticia();
    $noticia->titulo = $tmpNews->get_title();
    $noticia->url = $tmpNews->get_sourceurl();
    $noticia->descripcion = $tmpNews->get_description(); 
    $id = R::store($noticia);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-02T05:54:28.227

I think the correct answer is that the source encoding is not actually UTF8.

```
 $bean->property = iconv("ISO-8859-1", "UTF-8", "Esta es una frase mía y me gusta!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:25:28.290

Set your database table collations to UTF-8\. (utf8-unicode-ci is probably what you want).

# ios - 是否可以像本地通知一样从通知中心清除单个 APN

> ID：11695112
> 
> 赞同：3
> 
> 时间：2012-07-27T20:19:26.373
> 
> 标签：ios

如果我的应用程序将多个本地通知排队，那么在它们过期后它们将出现在通知中心历史列表中（当然假设用户没有禁用它）。

当用户选择这些通知之一时，我的应用程序能够从通知中心删除该特定通知。

我希望能够用 APNs 做同样的事情，这可能吗？

# macos - 将文本“粘贴”到外部 Mac App First Responder

> ID：11695114
> 
> 赞同：1
> 
> 时间：2012-07-27T20:19:35.627
> 
> 标签：macos, copy-paste, nspasteboard

是否有任何（App Store 安全）方法可以用文本自动填充另一个应用程序的第一响应者文本字段？例如，使用由 NSStatusBar 应用程序指定的热键，用户突出显示单独应用程序（如 TextEdit）中的文本，并将新文本粘贴到状态栏应用程序根据情境数据生成的 TextEdit 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:02:17.097

> 有没有办法用文本自动填充另一个应用程序的第一响应者文本字段？

是的，请查看以下 AppleScript：

```
tell application "System Events" to keystroke "Hello World" 
```

用于`NSTask`从 Objective-C 运行：

```
NSString *theText = @"Hello World";
NSString *theSource = [NSString stringWithFormat:@"tell application \"System Events\" to keystroke \"%@\"",theText];
NSAppleScript *theScript = [[NSAppleScript alloc] initWithSource:theSource]; 
[theScript executeAndReturnError:nil]; 
```

请注意，该脚本需要访问辅助设备：

> 系统偏好设置 → 通用访问 → 启用辅助设备访问

使用上述代码的应用程序不会被 Apple 拒绝。

# ruby-on-rails - 多态关联中的Rails未初始化常量

> ID：11695123
> 
> 赞同：1
> 
> 时间：2012-07-27T20:20:48.980
> 
> 标签：ruby-on-rails, polymorphism, uninitialized-constant

我正在努力将电话号码与志愿者（以及后来的其他事物）建立多态关联，目前我遇到以下错误：

```
uninitialized constant HumanVolunteer::PrimaryPhone
app/controllers/human_volunteers_controller.rb:44:in `new'
app/controllers/human_volunteers_controller.rb:44:in `create' 
```

这是我的电话号码模型：

```
class PhoneNumber < ActiveRecord::Base
  attr_accessible :notes, :number

  belongs_to :phone, :polymorphic => true
end 
```

这是我的 HumanVolunteers 模型：

```
class HumanVolunteer < ActiveRecord::Base

  attr_accessible :firstName, :lastName, :homeaddressid, :notes, :status, :workdaddressid, :home_adr, :work_adr, :primaryPhone
  has_one :primaryPhone, :as => :phone

  def home_adr=(home_adr_arg)
    # Home ADR
    home_adr = Address.new(home_adr_arg)
    if home_adr.save 
      self.homeaddressid = home_adr.id
    end
  end

  def work_adr=(work_adr_arg)
    # Work ADR
    work_adr = Address.new(work_adr_arg)
    if home_adr.save 
      self.workaddressid = work_adr.id
    end
  end
end 
```

还有我的电话号码和human_volunteers 架构：

表：human_volunteers

```
id  integer 
status  character varying(255)  
homeaddressid   integer     
workdaddressid  integer     
notes   text        
created_at  timestamp without time zone 
updated_at  timestamp without time zone 
firstName   character varying(255)      
lastName    character varying(255) 
```

表：电话号码

```
id  integer 
number  character varying(255)          
notes   text        
created_at  timestamp without time zone     
updated_at  timestamp without time zone     
phone_id    integer     
phone_type  character varying(255) 
```

当我尝试在任何输入下创建新志愿者时发生错误，这是我当前的示例请求：

```
{"human_volunteer"=>{"primaryPhone"=>"5555555555",
 "firstName"=>"",
 "notes"=>"",
 "work_adr"=>{"city"=>"",
 "state"=>"",
 "zipcode"=>"",
 "line1"=>"",
 "line2"=>""},
 "home_adr"=>{"city"=>"",
 "state"=>"",
 "zipcode"=>"",
 "line1"=>"",
 "line2"=>""},
 "lastName"=>""},
 "authenticity_token"=>"RCPTxZpzytYXcDEUo0czRxpI4A3Qw1ErwcIBJ92RhLA=",
 "utf8"=>"✓"} 
```

注意：我也有一个地址类，但我已经开始工作了，所以我没有把这篇文章弄得乱七八糟。

从论坛上的浏览来看，其他人的主要问题似乎是 plauralization，但据我所知，我已经正确地将所有内容 plauralized。

I also tried adding a phone_id or primaryPhone_id to the human volunteers table but it didnt help.

Thank you very much, - Ken

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T20:26:14.650

Your `has_one` needs to know which class its refering to.

```
  has_one :primary_phone, :class_name => "PhoneNumber", :as => :phone

```

# asp.net-mvc-3 - ASP.NET MVC3 验证错误

> ID：11695124
> 
> 赞同：0
> 
> 时间：2012-07-27T20:20:55.623
> 
> 标签：asp.net-mvc-3

如果你去这个网站，[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)，你可以看到一个教程，其中用户创建电影数据库。我顺利完成了本教程，并尝试创建一个新的 MVC 应用程序，并进行了一些小的更改，使项目与我最终想要做的更相似。

我创建了一个名为问题的模型，而不是创建一个名为 Movie 的模型。像电影一样，它有几个字段，但它们都是不同的名称和类型。我完全按照教程中的方式完成了该过程，但是每当我尝试通过 Web UI 向数据库添加问题时，我都会收到 DBEntityValidationException。在这个过程中我还没有设置任何验证规则，所以我不确定问题是什么。

有人可以给我一些解决此问题的建议，以便我可以将问题添加到我的数据库中（就像在线教程中的电影一样）？如果需要更多信息，请告诉我；我对此很陌生，可能缺乏细节。

这是模型代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace MvcApplication200.Models
{
    public class Issue
    {
        public String id { get; set; }
        public DateTime created { get; set; }
        public DateTime closed { get; set; }
        public String summary { get; set; }
        public bool? importToTFS { get; set; }
    }

    public class IssueDBContext : DbContext
    {
        public DbSet<Issue> Issues { get; set; }
    }   
} 
```

**更新：我只是重做了整个过程，但不是有不同的字段和不同的类型，而是让我的问题模型具有相同数量和相同类型的字段（只有不同​​的名称）。错误消失了，所以问题一定是db格式什么的。我希望这能让问题更清楚。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:06:02.803

我刚刚添加了这个类，它会在字段更改时从数据库中删除所有内容。然后，我刷新数据库，这在我的情况下很容易做到。可以将一些项目添加到 Seed 方法，以确保在清除后，某些内容仍保留在更新的数据库中。

```
public class IssueInitializer : DropCreateDatabaseIfModelChanges<IssueDBContext>
{
    protected override void Seed(IssueDBContext context)
    {
        //add things here
    }
} 
```

# asp.net-mvc - 当用户的访问级别被拒绝时，ASP.NET MVC 显示错误消息或页面

> ID：11695127
> 
> 赞同：0
> 
> 时间：2012-07-27T20:21:13.143
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我了解到我可以将用户重定向到不同的页面，例如[http://www.asp.net/web-forms/tutorials/security/membership/user-based-authorization-vb](http://www.asp.net/web-forms/tutorials/security/membership/user-based-authorization-vb)但我想知道是否有更好的方法? 另外，我怎样才能只发送一条错误消息，而不是重定向到不同的视图？

例如，这是我的代码：

```
<Authorize(Roles:="Administrator")>
Public Class CompanyController 
```

如果用户登录但没有正确的凭据，我可以添加类似错误消息的内容吗？我可以在 ViewBag.Error 中设置错误吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:31:00.833

Authorize 属性的要点是在不允许用户访问时阻止对控制器操作的访问。它根本不执行操作并默认重定向到 LogOn 操作。原始动作未执行的事实意味着视图未呈现。

如果您不想重定向到 LogOn 操作但创建一些将呈现的自定义视图，您可以编写自定义 Authorize 属性并覆盖[HandleUnauthorizedRequest](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.handleunauthorizedrequest.aspx)方法：

```
Public Class MyAuthorizeAttribute
    Inherits AuthorizeAttribute

    Protected Overrides Sub HandleUnauthorizedRequest(filterContext As AuthorizationContext)
        Dim result = New ViewResult()
        result.ViewName = "Forbidden"
        result.ViewBag.ErrorMessage = "oops, you are not allowed"
        filterContext.Result = result
End Sub
End Class 
```

然后定义`~/Views/Shared/Forbidden.vbhtml`将被渲染的视图：

```
<h3>@ViewBag.ErrorMessage</h3> 
```

最后用这个自定义属性装饰你的控制器：

```
<MyAuthorize(Roles:="Administrator")>
Public Class CompanyController 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:26:44.373

你总是可以在 MVC 中创建你自己的授权过滤器，然后做任何你需要的事情。

您将需要创建一个实现[IAuthorizationFilter](http://msdn.microsoft.com/en-us/library/system.web.mvc.iauthorizationfilter.aspx)的类。如果您想要这样做，您可以让此授权过滤器向 ViewBag.Error 添加内容，而不是重定向到另一个操作。不过，如果您不为用户提供身份验证方式，我不确定该消息会有多大用处。

# java - 当文件不可用时，InputStream 在读取时抛出 SocketTimeOutException

> ID：11695128
> 
> 赞同：1
> 
> 时间：2012-07-27T20:21:13.560
> 
> 标签：java, sockets, socket.io, socketexception

尝试从服务器读取一些图像文件并使用套接字编程。

但是当没有文件存在时，我得到了 socketTimeOut 异常。不仅失去与服务器的连接。

当不存在文件时，如何避免丢失与服务器的连接。

```
InputStream inputStream = new BufferedInputStream(socket().getInputStream());

int i = -1;
while ((i = bufferedInputStream.read()) != -1) {
byteArrayOutputStream.write(i);
} 
```

在上面的代码中，当我在 bufferedInputStream 上调用 read() 时，我遇到了异常。如何处理此异常并失去与服务器的连接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:49:36.213

“当文件 [不] 存在时”，您不会得到该异常。当您设置读取超时并且在超时内没有数据到达时，您会得到它，如果您的超时太短，请提高它。如果您想永远等待，请将其删除。这是你的超时，你设置它。

如果你得到一个 SocketTimeoutException 你不会失去连接。是什么让你认为你做到了？

# ruby-on-rails - haml rspec 缺少模板

> ID：11695130
> 
> 赞同：2
> 
> 时间：2012-07-27T20:21:17.867
> 
> 标签：ruby-on-rails, rspec, haml

这真的让我措手不及。安装 haml-rails gem 后，stocks/index.html.haml 在浏览器中呈现没有问题。但是，当我尝试使用 rspec/capybara 对其进行测试时

```
describe "StockPages" do
  describe "stocks/index.html.haml" do
    before {visit stocks_path}
    subject {page}
    it { should have_selector('table#Result')  }
  end
end 
```

我收到了这个错误：

```
Failure/Error: before {visit stocks_path}
     ActionView::MissingTemplate:
       Missing template stocks/index, application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:17:55.800

为了呈现 Haml 模板，您需要`haml`加载 gem。`haml-rails`确实 call `require 'haml'`，但如果你只添加`haml-rails`到你的开发组中，`Gemfile`那么`haml`也只会在开发中加载。

为了解决这个问题，您需要`haml-rails`移出任何组以便它总是被加载（因此`haml`也总是被加载），或者添加`gem 'haml'`到您的`Gemfile`（在任何组之外）。第一个选项（移出`haml-rails`开发组）可能是最简单的，但您可能希望将其留在开发组中并显式添加`gem 'haml'`，以避免在生产中加载不需要的代码。

# c# - 用户会话过期后的表单身份验证

> ID：11695132
> 
> 赞同：1
> 
> 时间：2012-07-27T20:21:23.597
> 
> 标签：c#, asp.net, .net, login

我在 jQueryUI 对话框中有一个 asp 登录控件，该控件在用户会话接近或已经过期之前是隐藏的。我正在从客户端脚本读取 aspxauth cookie 中的自定义字段以显示“扩展会话”消息，如果用户单击该消息，则会向服务器发送异步 XHR，该服务器返回具有更新值的 cookie。所有这些工作正常。当用户没有响应“延长会话”消息并且他们的会话过期时，我的问题就出现了。然后他们会看到带有登录控件的 jQuery 对话框，该对话框应该允许他们进行身份验证，而无需将他们带到默认登录页面。当用户通过登录控件提交他们的凭据时，会将他们带到默认登录页面并且不对他们进行身份验证。做什么？

*   我没有使用 ASP.NET AJAX
*   我已经在 Global.asax 中实现了 FormsAuthentication_OnAuthenticate 事件，因此如果有帮助，我确实可以访问那里的 FormsAuthenticationEventArgs 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:11:28.313

您需要在延长会话的同时延长 FormsAuthentication 超时。

这是我使用的东西

```
 public void Extend(int SessionLimit)
    {
        FormsAuthenticationTicket OriginalTicket = ((FormsIdentity)Context.User.Identity).Ticket;
        FormsAuthenticationTicket NewTicket = new FormsAuthenticationTicket(1, OriginalTicket.Name, DateTime.Now, DateTime.Now.AddMinutes(SessionLimit), false, OriginalTicket.UserData);
        HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(NewTicket));
        authCookie.HttpOnly = true;
        HttpContext.Current.Response.Cookies.Add(authCookie);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:44:49.543

我们没有与您完全相同的设置，我不确定您的重新身份验证是如何工作的，所以我可能会偏离基础，但我们有一个非常相似的问题。

我们遇到的问题是我们用于重新登录身份验证的页面处于身份验证控制之下（即要访问它，您必须登录）。

解决方案是向 web.config 添加一个条目以“取消保护”该页面。例如，我们在主配置元素中添加了以下内容：

```
 <location path="loginreauth.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

一旦我们这样做了，一切正常。

# asp.net-mvc - Orchard 页面中的嵌套布局

> ID：11695134
> 
> 赞同：3
> 
> 时间：2012-07-27T20:21:29.847
> 
> 标签：asp.net-mvc, orchardcms

我正在尝试将现有的 ASP.NET MVC 3 网站迁移到 Orchard，这样我就可以继续构建网站，同时利用 Orchard 提供的扩展功能。我正在尝试将整个现有站点包装到一个 Orchard 模块中，这样我就可以保持所有现有功能完好无损，并根据需要继续添加功能或将旧功能移植到新范例中。

我在直接复制到 Orchard 时遇到的主要问题是，我利用 MVC 3 中的布局层次结构为相关页面指定相同的父布局，而这些页面又可能有自己的父布局，依此类推.

当我在现有视图中复制时，我收到错误，即 Layout 是自定义 Orchard WebPageView 上的只读属性，但是当我将基本视图类型更改回标准 MVC 3 基本类型时，路径不匹配由于 Module 文件夹结构，我的观点。

在 Orchard 中运行的站点是否完全不支持指定嵌套布局的功能，或者是否有我缺少的内置解决方法？

谢谢！-J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:44:54.310

Orchard 的布局系统早于 MVC，并且工作方式略有不同。恐怕你将不得不重构一些东西。Orchard 中的视图依赖于形状的概念，形状是类似于视图模型的动态对象。当需要渲染形状时，系统会寻找最合适的模板将其转换为 html。大多数控制器操作返回一个形状结果，该结果将呈现为必须在布局形状中定义的内容区域的子项。布局形状渲染可以通过为其指定替代来更改（请参阅[http://weblogs.asp.net/bleroy/archive/2010/12/14/switching-the-layout-in-orchard-cms.aspx](http://weblogs.asp.net/bleroy/archive/2010/12/14/switching-the-layout-in-orchard-cms.aspx)）。

所以最终 Orchard 没有使用 Razor/ASP.NET Web Pages/MVC3 提倡的那种倒置的母版页式布局系统。相反，您使用形状及其替代物来获得相似的结果，但观点是不同的，因为形状被添加到嵌套容器中，而不是包含的对象指定它们插入的内容。

# jquery - 选择一个特定的 在嵌套的无序列表中

> ID：11695135
> 
> 赞同：1
> 
> 时间：2012-07-27T20:21:29.630
> 
> 标签：jquery, select, nested, unordered

想要选择下面*没有*嵌套列表的所有列表元素（可以按任何顺序，所以接下来需要第一个或最后一个）。

在下面的情况下，它将是这样的：

```
<li>Main Item Three</li> 
```

我可以选择那些*确实*有嵌套列表的列表元素：

```
$('ul.location_list li:has(ul)') 
```

想我可以使用类似的东西：

```
$('ul.location_list li:not(ul)') 
```

但没有骰子。想法？

```
<li>Main Item Three</li>

<ul class="location_list">
   <li>Main Item One
      <ul>
         <li>Sub-Item One A</li>
         <li>Sub-Item One B</li>
         <li>Sub-Item One B</li>
      </ul>
   </li>
   <li>Main Item Two
      <ul>
         <li>Sub-Item Two A</li>
         <li>Sub-Item Two B</li>
         <li>Sub-Item Two B</li>
      </ul>
   </li>
   <li>Main Item Three</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:27:44.140

`$('ul.location_list>li:not(:has(ul))')`

（未经测试:)

# swing - 如何知道从 JTextPane 中删除了哪些文本

> ID：11695136
> 
> 赞同：4
> 
> 时间：2012-07-27T20:21:37.327
> 
> 标签：swing

我已向 JTextPane 添加了一个文档侦听器。我想知道添加或删除了哪些文本，以便在输入某些关键词时采取行动。插入部分工作得很好，但我不知道如何检测删除了哪些文本。

插入有效，因为文本在那里并且我可以选择它，但是删除已经删除了文本，所以有时我会遇到错误的位置异常。

我想将不在引号内的保留字加粗，因此我需要知道已删除的内容，即使删除一个字符（如引号）也会产生巨大影响。

我的代码如下：

```
 @Override
public void insertUpdate(DocumentEvent e)
{
    Document doc = e.getDocument();
    String i = ""; 

    try
    {
        i = doc.getText(e.getOffset(), e.getLength());
    }
    catch(BadLocationException e1)
    {
        e1.printStackTrace();
    }

    System.out.println("INSERT:" + e + ":" + i);
}

@Override
public void removeUpdate(DocumentEvent e)
{
    Document doc = e.getDocument();
    String i = ""; 

    try
    {
        i = doc.getText(e.getOffset(), e.getLength());
    }
    catch(BadLocationException e1)
    {
        e1.printStackTrace();
    }

    System.out.println("REMOVE:" + e + ":" + i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:48:42.047

奇怪的是，没有简单的方法来获取这些信息。

为此，我查看了 Swing 库的源代码。当然 - 中有这个信息`DocumentEvent`，它属于 class `AbstractDocument$DefaultDocumentEvent`，其中 contains `protected Vector<UndoableEdit> edits`，其中包含一个 type 元素`GapContent$RemoveUndo`，其中 contains`protected String string`仅在这个类中使用（没有其他“包”类得到这个）并且这个`RemoveUndo`类没有 getter这个领域。

甚至`toString`没有显示它（因为`RemoveUndo`没有覆盖`toString`方法）：

```
[javax.swing.text.GapContent$RemoveUndo@6303ddfd hasBeenDone: true alive: true] 
```

这对我来说太奇怪了，我相信还有其他一些简单的方法可以获取删除的字符串，而我只是不知道如何完成它。

您可以做的一件事是最明显的：

```
 final JTextArea textArea = new JTextArea();
    textArea.addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            previousText = textArea.getText();
        }
    });

    textArea.getDocument().addDocumentListener(new DocumentListener() {
        @Override
        public void removeUpdate(DocumentEvent e) {
            if(previousText != null) {
                String removedStr = previousText.substring(e.getOffset(), e.getOffset() + e.getLength());
                System.out.println(removedStr);
            }
        }
        @Override
        public void insertUpdate(DocumentEvent e) {
        }
        @Override
        public void changedUpdate(DocumentEvent e) {
        }
    }); 
```

其中`previousText`是一个实例变量。

或（有史以来最讨厌的）：

```
textArea.getDocument().addDocumentListener(new DocumentListener() {
        @Override
        public void removeUpdate(DocumentEvent e) {
            String removedString = getRemovedString(e);
            System.out.println(removedString);
        }

        @Override
        public void insertUpdate(DocumentEvent e) {
        }

        @Override
        public void changedUpdate(DocumentEvent e) {
        }
    }); 
```

加上这个方法：

```
public static String getRemovedString(DocumentEvent e) {
    try {
        Field editsField = null;
        Field[] fields = CompoundEdit.class.getDeclaredFields();
        for(Field f : fields) {
            if(f.getName().equals("edits")) {
                editsField = f;
                break;
            }
        }
        editsField.setAccessible(true);
        List edits = (List) editsField.get(e);
        if(edits.size() != 1) {
            return null;
        }

        Class<?> removeUndo = null;
        for(Class<?> c : GapContent.class.getDeclaredClasses()) {
            if(c.getSimpleName().equals("RemoveUndo")) {
                removeUndo = c;
                break;
            }
        }

        Object removeUndoInstance = edits.get(0);
        fields = removeUndo.getDeclaredFields();

        Field stringField = null;
        for(Field f : fields) {
            if(f.getName().equals("string")) {
                stringField = f;
                break;
            }
        }

        stringField.setAccessible(true);
        return (String) stringField.get(removeUndoInstance);
    }
    catch(SecurityException e1) {
        e1.printStackTrace();
    }
    catch(IllegalArgumentException e1) {
        e1.printStackTrace();
    }
    catch(IllegalAccessException e1) {
        e1.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T16:43:26.993

我和你有同样的问题。Xeon 的解释也对我有很大帮助。但之后，我找到了一种方法来做到这一点。就我而言，我创建了一个扩展 DefaultStyledDocument 的自定义 StyledDocument 类：

```
 public class CustomStyledDocument extends DefaultStyledDocument
    {

        public CustomStyledDocument () {
           super();
    }

     @Override
        public void insertString(int offset, String string, AttributeSet as) throws BadLocationException {
            super.insertString(offset, string, as);
    }

    @Override
        public void remove(int offset, int i1) throws BadLocationException { 
        String previousText = getText(offset, i1);
        super.remove(offset, i1);
    }

} 
```

所以如果你在调用 super.remove(...) 之前调用 getText 方法，你会得到之前的文本。

# bash - 控制守护进程和应用程序的差异

> ID：11695138
> 
> 赞同：1
> 
> 时间：2012-07-27T20:21:50.593
> 
> 标签：bash, process, terminal, signals, daemon

关于这篇优秀的帖子：

[nohup 和守护进程有什么区别？](https://stackoverflow.com/questions/958249/whats-the-difference-between-nohup-and-a-daemon)

我想问以下问题：

从我的终端启动应用程序后，该应用程序继续在后台或前台运行，我唯一能与之交互的方法是从我的终端发送信号（假设标准输入仍然存在）。

但是，在启动守护进程后，我意识到可以通过其他方式控制它，例如查询它或重新启动它（arch方式）：

`# /etc/rc.d/daemon-name {start|stop|restart|status|...}`

有人可以向我解释该功能是否内置于通用“守护程序框架”并作为特殊功能适用于每个守护程序进程，还是只是设计为作为守护程序运行的进程必须在内部处理的规定？

更重要的是，我们究竟如何能够使用它们的名称从终端“控制”守护程序（即 sambad stop），而应用程序总是必须使用它们的名称来引用（即 kill -9 1234）？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:02:33.737

```
# /etc/rc.d/daemon-name {start|stop|restart|status|...} 
```

它不是直接查询守护进程。它通过标准接口启动脚本，这些脚本依次通过 PID 和信号与守护进程一起运行。此脚本是在守护程序的安装过程中创建的。

# c# - 如何在原始字符串中转义 xml 内容？

> ID：11695139
> 
> 赞同：0
> 
> 时间：2012-07-27T20:22:01.693
> 
> 标签：c#, xml

我得到一串“xml”，其中包含一些未转义的内容。这是一个简单的例子：

```
<link text="This is some text with "potentially" some quoted text in it." linktype="external" anchor="" target="" /> 
```

我遇到的问题是，当您尝试使用 将上述内容转换为字符串`XmlDocument.LoadXml()`时，`LoadXml()`由于缺少对属性“文本”所包含内容的内引号进行转义，因此会引发异常。有没有一种相对轻松的方式来专门逃避内容？还是我只需要自己解析/转义/重建它？

我没有生成这个文本，我只是从另一个进程中以这样的字符串获取它：

```
"<link text="This is some text with "potentially" some quoted text in it." linktype="external" anchor="" target="" />" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:28:43.820

您需要使用 html 字符编码 where `"`is`&quot;`

但是由于您的输入是格式错误的 xml 文本，您必须找到一种方法来解析该文本并用编码翻译替换引号。也许一些正则表达式解析..

请认为这只是一种创造性的工作方式。我知道它很脏，但在大多数情况下它会起作用：

```
 private static string XmlEncodeQuotes(string target) {

        string result = string.Empty;
        for (int i = 0; i < target.Length; i++)
        {
            if (target[i] == '"')
            {
                if (target[i - 1] != '=')
                    if (!Regex.IsMatch(target.Substring(i), @"^""\s[a-zA-Z]+="""))
                    {
                        result += "&quot;";
                        continue;
                    }
            }
            result += target[i];
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:25:39.750

您是否尝试过将 xml 文档的部分包装在 CDATA 标记中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:40:12.623

System.Security.SecurityElement.Escape() 会为您工作吗？如果没有，还有一个 XmlTextWriter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T20:41:33.300

如果您只是询问如何转义报价，那就完成了

```
&quot; 
```

我不确定您在处理什么，但问题的根源在于您收到的数据格式不正确。

*   选项 1) 除非您清理数据，否则您将很难让大多数解析器加载无效的 XML 数据。有些人比其他人更宽容。[您可能对HTML Agility Pack](http://www.codeplex.com/htmlagilitypack "HTML Agility Pack")有一些运气

*   选项 2)[使用正则表达式来修复您的 XML。](https://stackoverflow.com/questions/798781/using-regex-to-fix-xml-content)

*   选项 3) 如果编码解析解决方案不是一个选项，请使用 XSLT。只需创建转换，然后添加模板来解决问题。

# c# - 我的表单控件的位置在另一台计算机上以相同的分辨率不在正确的位置

> ID：11695145
> 
> 赞同：1
> 
> 时间：2012-07-27T20:22:23.493
> 
> 标签：c#, winforms

我以 1280*1024 的分辨率将控件的位置设置在窗体上，但是当将我的程序移动到具有相同分辨率的另一台计算机时，控件的位置不在正确的位置

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:49:59.397

您需要使用[停靠](http://msdn.microsoft.com/en-us/library/1w8z0xh4%28v=vs.80%29.aspx)和[锚定](http://msdn.microsoft.com/en-us/library/8y52cxte%28v=vs.80%29.aspx)，而不是仅仅将它们放在表单上。当您调整表单大小并最大化和恢复表单时，这也将有所帮助。

# python - 在 Python 中使用 argparse - 和默认文件关联

> ID：11695147
> 
> 赞同：2
> 
> 时间：2012-07-27T20:22:25.577
> 
> 标签：python, windows, argparse

我有一个名为“test.py”的文件，它使用简单的代码导入 argparse：

```
import argparse
parser = argparse.ArgumentParser(description='Description')
parser.add_argument('-e','--event', help='event', required=True)
args = vars(parser.parse_args())
myArgument = args['event'] 
```

如果我用 Windows 调用它

```
python "test.py" -e hello 
```

它工作正常，但如果我尝试直接调用它

```
test.py -e hello 
```

它正在调用 python，但我得到一个错误“-e/--event is required”——即它没有传递参数。

我在 Windows 中的关联设置为：

```
assoc .py
.py=Python.File

ftype Python.File
Python.File = "C:\Python27,python.exe" "%1" %* 
```

似乎无法弄清楚，因为我让它在另一台计算机上工作，所以我猜我有一些路径或环境变量没有设置正确？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:44:11.800

我认为您的文件关联有错误。我认为这：

```
Python.File = "C:\Python27,python.exe" "%1" %* 
```

应该：

```
Python.File = "C:\Python27\python.exe" "%1" %* 
```

（更改`,`为`\`）

...如果这只是一个错字，那么[这个](https://superuser.com/questions/204354/how-do-i-get-ftype-assoc-to-match-windows-explorer)问题和答案可能会很有趣。

基本上，这些关联不一定是您运行程序时所调用的。（即。我基本上和你有相同的关联，但是如果我运行一个 python 程序，比如：“test.py -e hello”，程序 test.py 只是在我的编辑器中打开 - 它实际上并没有运行 python程序。）

您可能希望同时查看：

*   HKEY_CURRENT_USER\Software\Classes\.py，和
*   HKEY_LOCAL_MACHINE\SOFTWARE\Classes\.py

那里的协会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T08:14:10.807

`ftype`显示了其中的内容，`HKEY_LOCAL_MACHINE\Software\Classes`但此注册表分支中的值可能已被来自`HKEY_CURRENT_USER\Software\Classes`. 看看输出是什么`reg query HKCU\Software\Classes\Python.File\shell\open\command /ve`。我猜您的问题是由于此注册表项中缺少`%*`片段引起的。

# c# - Visual Studio "Local Database Cache": Use SQL Server Tracking vs. LastEditDate/CreationDate columns

> ID：11695150
> 
> 赞同：1
> 
> 时间：2012-07-27T20:22:42.437
> 
> 标签：c#, visual-studio-2010, sql-server-2008, caching

I am using Visual Studio's "Local Database Cache" template to cache information in a WinForms application.

In my database, I am using datetime2 columns for LastEditDate and CreationDate and it seems that Visual Studio is not recognizing these fields for synchronization of updates/inserts.

The wizard gives me an option to use SQL Change tracking. Is it better performance-wise to use the columns or to use SQL change tracking? How does SQL Change tracking work? Does it use the SQL logs? I usually set my database's recovery model to Simple to avoid having the log file grow out of limits. Would that limit the ability to use change tracking?

# git - How can I fix the discrepancy between my code on Heroku and my code on Github?

> ID：11695152
> 
> 赞同：0
> 
> 时间：2012-07-27T20:23:11.210
> 
> 标签：git, heroku

My application code on Heroku is different from my application code on my computer and on Github. For the latest git commit I made, I added all of the revisions to my files using "git add ." and the correct changes I was looking for got pushed to Github, however when I pushed the code to Heroku several of the changes didn't take effect. The design of my web application on my local server has the correct attributes I'm looking for, however even after I committed the new application code to Heroku the design didn't change to reflect the changes in my code.

I'm not sure what could be causing this problem, or how I can go about fixing it. Any help you could give me would be great! Thanks so much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:44:26.273

我知道很多人会告诉你显而易见的事情。

状态

git commit -am "你的更新信息"

git push heroku 大师

heroku 重启

但是，我遇到了这个问题，真正的问题是 SSH 密钥。我注意到我只能从给定的机器上进行成功的更改。在 heroku 上删除您机器的密钥，然后重新创建并再次添加密钥。

您使用的是 Windows 还是 Linux？希望这可以帮助。

# mysql - Getting errors when trying to create an SQL table

> ID：11695154
> 
> 赞同：0
> 
> 时间：2012-07-27T20:23:26.110
> 
> 标签：mysql, sql

I already have the database created, and when I go to create a table within it, It's giving me an error of

> # 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Â INT unsigned PRIMARY KEY AUTO_INCREMENT, Â Â Â `UserID`Â INT NOT NULL, Â ' at line 2

```
CREATE TABLE `lists` 
( `ListID`     INT PRIMARY KEY AUTO_INCREMENT,
  `UserID`     INT NOT NULL,
  `ListURL`      VARCHAR(150)
) 
```

I've tried simple things, and I've added those backticks because I've seen that as a solution to a lot of issues on here, but it's still giving me back the same error. Not sure what the issue is.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:26:11.073

What text editor did you use to save this command? Did you save it with Word or another similar editor, which may be adding non-ASCII characters to the file?

# netbeans - 将 jLabel 转换为 jTextField

> ID：11695160
> 
> 赞同：2
> 
> 时间：2012-07-27T20:23:47.560
> 
> 标签：netbeans, visibility, jlabel, jtextfield

我正在开发一个`JFrame`界面，以便与大量数据轻松交互。数据保存在*.txt*文件中，当从 .txt 文件中选择名称时`JList`，我的程序会读取相应的数据行，将它们转换为我定义的对象（CounterParty），并在其中显示对象的相应字段`JLabel`s。这一切都很好。我还编写了代码来启动一个`JPanel`编辑选定对象的新对象。`JPanel`打开，已经填充了数据，当单击按钮时，.txt 文件上的现有信息将被*删除*并替换为新的、已编辑的数据。这也很有效。

但是，我想让它对*用户更友好*一点。*当单击“编辑*”按钮时，我希望`JLabel`最初显示信息的 s 转换为`JTextField`填充有来自 jLabels 的数据的 s 。这将消除完全启动新 JPanel 窗口的需要。我认为这会将s 的可见性更改为 false 并创建新对象。我遇到了麻烦。对象可以转换为s吗？我是否可以将两个对象都放在完全相同的位置，但能见度不同？我不知道该怎么做。*`JLabel``JTextField`
`JLabel``JTextField`*

 *我正在使用 NetBeans。

感谢您的帮助！让我知道是否需要任何其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:36:12.477

这是做到这一点的一种方法：
假设这`JLabel`是你`label`和`textfield`你的`JTextField`

```
 textfield = new JTextField(label.getText()); 
```

这将创建一个带有`JLabel`.
你应该把你的`JLabel`放在一个专用的`JPanel`，所以你`JLabel`从中删除并用它替换它`JTextField`，然后`repaint()`/`revalidate()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:43:12.073

我创建了一个小例子，我认为它展示了你想要什么。它使用一个按钮，按下该按钮将删除`JTextField`并添加`JLabel`，反之亦然，然后在每次单击按钮后调用`revalidate()`并`repaint()`显示对框架的更改：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class JLabelToJTextField extends JFrame {

    JLabel jLabel;
    JTextField jTextField;
    JButton jButton;
    JPanel mainPanel;

    public JLabelToJTextField() {
        jLabel = new JLabel("Name");
        jTextField = new JTextField(15);
        jButton = new JButton("Edit");
        mainPanel = new JPanel(new BorderLayout());

        createUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JLabelToJTextField().setVisible(true);
            }
        });
    }

    private void createUI() {
        setTitle("JLabel to JtextField");
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        addComponentsToPanel();
        setLocationRelativeTo(null);
        pack();

    }

    private void addComponentsToPanel() {
        mainPanel.add(jLabel, BorderLayout.CENTER);
        mainPanel.add(jButton, BorderLayout.SOUTH);
        addActionListeners();
        getContentPane().add(mainPanel);
    }

    private void addActionListeners() {
        jButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                switch (jButton.getText()) {
                    case "Edit":
                        mainPanel.remove(jLabel);//remove component
                        mainPanel.add(jTextField, BorderLayout.CENTER);//add new component
                        jButton.setText("Done");
                        //refresh JFrame
                        revalidate();
                        repaint();

                        break;
                    case "Done":
                        mainPanel.remove(jTextField);//remove component
                        mainPanel.add(jLabel, BorderLayout.CENTER);//add new component
                        jButton.setText("Edit");//set button text to original
                        //refresh JFrame
                        revalidate();
                        repaint();
                        break;
                }
            }
        });
    }
} 
```*

# python - App Engine 多个电子邮件地址返回 404

> ID：11695163
> 
> 赞同：2
> 
> 时间：2012-07-27T20:24:09.097
> 
> 标签：python, google-app-engine, email, handler

我正在尝试处理发送到不同地址的入站电子邮件（在开发服务器上），例如：

```
- url: /_ah/jogo@.*rpg2e\.appspotmail\.com
script: jogo.py

- url: /_ah/contato@.*rpg2e\.appspotmail\.com
script: contato.py

- url: /.*
script: helloworld.py 
```

但我收到以下日志消息：

```
INFO     2012-07-27 20:05:31,759 dev_appserver.py:2952] "POST /_ah/mail/jogo@rpg2e.appspotmail.com HTTP/1.1" 404 - 
```

我也试过：

```
- url: /_ah/jogo@rpg2e\.appspotmail\.com
script: jogo.py

- url: /_ah/contato@rpg2e\.appspotmail\.com
script: contato.py

- url: /.*
script: helloworld.py 
```

无济于事。

如果我只是使用 handle_all 它就像一个魅力，但我希望我的脚本只处理发送到正确的 handle@rpg2e.appspotmail.com 的电子邮件

在花了一些时间在 Web 和 Stack Overflow 中搜索之后，我遇到了许多类似我的问题，唯一可行的解​​决方案是使用 catch all 方法。其中一些甚至被 Ikai Lane[1] 以相同的结论回答——只捕获所有作品。

再说一次，有没有人成功使用多个处理程序？

[1] [https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/UGTkMV9foJ0](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/UGTkMV9foJ0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:31:20.073

来自[Google App Engine Python - 接收邮件](https://developers.google.com/appengine/docs/python/mail/receivingmail)

```
url: /_ah/mail/owner@.*your_app_id\.appspotmail\.com 
  script: handle_owner.py 
  login: admin
- url: /_ah/mail/support@.*your_app_id\.appspotmail\.com 
  script: handle_support.py 
  login: admin 
```

您缺少`/mail/`所需路径的部分。您发布到`/_ah/jogo@rpg2e.appspotmail.com`而不是`/_ah/mail/jogo@rpg2e.appspotmail.com`. 试试这个：

```
- url: /_ah/mail/jogo@rpg2e\.appspotmail\.com
  script: jogo.py

- url: /_ah/mail/contato@rpg2e\.appspotmail\.com
  script: contato.py 
```

最后，当我们遇到问题时，我们都会时不时地看到一些狭隘的观点，但值得注意的是错误消息的价值。错误消息告诉我们App Engine 在发出 POST 请求时正在查找的位置，您可以将其与您的处理程序匹配*：*

```
INFO   2012-07-27 20:05:31,759 dev_appserver.py:2952] "POST /_ah/mail/jogo@rpg2e.appspotmail.com HTTP/1.1" 404 
```

# css - 显示/隐藏时的边距/填充碰撞 div

> ID：11695167
> 
> 赞同：0
> 
> 时间：2012-07-27T20:24:31.093
> 
> 标签：css

我有一个包含几个单选按钮的 div。这些显示/隐藏文本框。

```
<p>Some text</p>
<div>
    <div>
        <input id="show" name="radioGroup" type="radio" value="1" /><label for="show">Show</label> - 
        <input id="hide" name="radioGroup" type="radio" value="0" /><label for="hide">Hide</label>
    </div>
    <div class="myTextBox">
         <input type='text'>   
    </div>
</div>

<p>Some text</p>​ 
```

当我显示/隐藏时`.myTextBox`，文本会颠簸几个像素。这是由于文本框上的填充和边距。

在不删除这些设置（填充/边距）的情况下，有没有办法消除 CSS 凹凸？

请参阅 jsFiddle [http://jsfiddle.net/nTJZN/1/上的示例](http://jsfiddle.net/nTJZN/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:27:43.523

见[这里](http://jsfiddle.net/nTJZN/2/)。

我正在做的基本上是而不是`show()`我`hide()`正在改变`visibility`财产。

```
function ShowHideTextbox()
{
    if($("#show").is(":checked"))
        $(".myTextBox").css('visibility','visible');
    else
        $(".myTextBox").css('visibility','hidden');   
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:28:18.253

这是因为你的输入框比文字高，导致输入框显示时行变长。通过检查元素，我确定当输入框可见时行高为 28px，因此应用行高 28px 可以解决问题，如下所示：

```
div
{
 display: inline-block;   
 line-height: 28px;
} 
```

见[http://jsfiddle.net/X4X3U/](http://jsfiddle.net/X4X3U/)

# objective-c - UIBezierPath 从另一个 UIBezierPath 减法

> ID：11695168
> 
> 赞同：4
> 
> 时间：2012-07-27T20:24:44.343
> 
> 标签：objective-c, ios, cocoa-touch, quartz-graphics, uibezierpath

我正在制作一个允许用户用手指在屏幕上绘制不同颜色的应用程序。这些图纸是用 UIBezierPaths 绘制的，但我需要一个橡皮擦。我确实有一个橡皮擦，它只是一条以背景图像为颜色的路径，但这种方法会导致内存问题。我想从选择橡皮擦时绘制的任何路径中删除点。

不幸的是 UIBezierPath 没有减法功能，所以我想自己做。因此，如果选择了橡皮擦，它将查看所​​有应擦除的点并查看是否有任何现有路径包含这些点，然后细分路径留下空白点。但是它应该能够看到连续删除多少个点而不是一次删除一个。从理论上讲，这是有道理的，但我在开始实施时遇到了麻烦。

有人有任何指导可以让我走上正确的“道路”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:32:06.460

乍一看，您似乎可以通过简单地使用 UIBezierPath 来进行命中检测`containsPoint:`。如果您想确定该点是否包含在 UIBezierPath 的**填充**中，这可以正常工作，但它不适用于确定 UIBezierPath 的**笔划**是否与该点相交。检测给定点是否在 UIBezierPath 的笔划中可以按照[本页](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html)底部的“在路径上进行命中检测”部分中的描述来完成。实际上，他们提供的代码示例可以使用任何一种方式。基本思想是您必须使用核心图形方法[CGContextPathContainsPoint](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextPathContainsPoint)。

根据橡皮刷的大小，您可能需要检查画笔圆边缘上的几个不同点以查看它们是否与曲线相交，并且您可能必须遍历 UIBezierPaths 直到获得成功。您应该能够使用`bounds`UIBezierPath 优化搜索。

在检测到一个点与 UIBezierPath 相交后，您必须对路径进行实际拆分。[在这篇文章](https://stackoverflow.com/a/9997476/1144176)中似乎有一个很好的算法大纲。主要思想是使用[De Casteljau 算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)来执行曲线的细分。您应该能够通过快速搜索找到该算法的各种实现，包括 C++ 中的一些。

# javascript - jquery toggle is not working properly

> ID：11695171
> 
> 赞同：1
> 
> 时间：2012-07-27T20:25:02.793
> 
> 标签：javascript, jquery, ruby-on-rails-3

javascript file

```
$('#user a').toggle(function(){
    //first function here
    $('#nav #user-menu').show();
    //$('#nav #user .profile, .account, .logout').show();
},
function(){
    // second function here
    $('#nav #user-menu').hide();
    //$('#nav #user .profile, .account, .logout').hide();
}); 
```

main.html.erb

```
<div id="nav">
    <% if !session[:user_id] %>
    <%= link_to "Please login" , :action => 'login' %>
    <%= link_to "Register", :action => 'register'%>
    <% else %>
    <div id="user"><%= link_to "#{@user.username}"%>
        <div id="user-menu">
            <div class="profile"><%= link_to "Profile" ,:controller => 'users', :action => 'profile'%></div>
            <div class="account"><%= link_to "Account" ,:controller => 'users', :action => 'account'%></div>
            <div class="logout"><%= link_to "Logout" , :action => 'logout'%></div>
            <div class="clear"></div>
        </div>
    </div>
</div> 
```

on toggling the user-menu div visibility is working properly but on clicking on the profile , logout and other links , they arent functioning as expected but if i remove the toggle condition and visibility from javascript then the link are working just fine please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:36:10.337

尝试更多类似的东西：

```
var makeVisible = true;  // put logic in here to decide whether you want it shown
$("#user-menu").toggle(makeVisible); 
```

# svn - jenkins用户中域和用户名之间的分隔符有时是\，有时是_为什么？

> ID：11695173
> 
> 赞同：11
> 
> 时间：2012-07-27T20:25:10.030
> 
> 标签：svn, jenkins, active-directory, sspi

我在詹金斯和发送邮件时看到了一些奇怪的事情。对于某些用户，邮件被发送到 DOMAIN_username@company.com - 有些很好。

Jenkins 使用 AD 进行身份验证 - 大多数用户实际上还没有登录到 jenkins，用户名来自 svn。我的 svn 服务器是使用 sspi 进行身份验证的 windows2008 服务器：

```
# authentication
AuthName "Subversion Authentication"
AuthType SSPI
SSPIAuth On
SSPIAuthoritative On
SSPIDomain COMPANY
SSPIOfferBasic On
Require valid-user 
```

最好的看它的地方是`http://jenkins/job/job-name/1234/api/json`看看罪魁祸首

```
"culprits":[
{"absoluteUrl":"http://jenkins/user/DOMAIN_asmith","fullName":"DOMAIN_asmith"},
{"absoluteUrl":"http://jenkins/user/DOMAIN_bobama","fullName":"DOMAIN\\bobama"}
] 
```

对 bobama 来说一切正常，但请注意 asmith - 电子邮件将发送至 DOMAIN_asmith@company.com（不会发送）

如果我查看用户配置页面`http://jenkins/user/DOMAIN_asmith/configure`

我看到他的电子邮件实际上列为 DOMAIN_asmith@company.com，bobama 看起来不错。

这些值不是来自用户（都没有登录到詹金斯）——它们是通过 SVN 来自 AD。我被困住了——有人给我指出一个更好的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:10:11.143

这里有几个想法：

*   如果您更改到 asmith 是最后一个提交者的目录并且您执行`svn info .`LastChanged Author 会说什么？“DOMAIN\asmith”还是别的什么？对波巴有什么看法？

*   如果进入 Jenkins 的信息对于所有用户来说确实是相同的，那么差异必须在 Jenkins 内部。我一直在查看[MailAddressResolver](https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/tasks/MailAddressResolver.java)的来源，它只是一个调用其他[解析器](https://wiki.jenkins-ci.org/display/JENKINS/Extension+points#Extensionpoints-hudson.tasks.MailAddressResolver)的调度类。但是，我不确定在您的配置中调用了哪一个。如果没有一个解析器成功，有一些后备方案会尝试猜测正确的电子邮件。一个看起来很有趣的是['MailAddressResolver questions with SVN & SSPI authentication'](https://issues.jenkins-ci.org/browse/JENKINS-5164)。这实际上应该将 'DOMAIN_user@company.com' 替换为 'DOMAIN\user@company.com'

*   我注意到登录 Jenkins 的源代码。如果日志在邮件地址解析过程中尚未指示问题，您可以在 Web 界面中[添加更多记录器。](https://wiki.jenkins-ci.org/display/JENKINS/Logging)

*   在查看错误报告时，我注意到[“给破坏构建的个人的电子邮件发送到了错误的地址”](https://issues.jenkins-ci.org/browse/JENKINS-13058)。这听起来很像您遇到的问题。而且还**没有解决**。

## 可能的解决方法

在一次搜索所有方向时，我发现了[RegEx 电子邮件插件](http://wiki.hudson-ci.org//display/HUDSON/RegEx+Email+Plugin)。它允许您使用正则表达式从用户名生成用户电子邮件地址。也许你可以用这个扭转 Jenkins 的手臂以获得你需要的邮件格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:04:37.653

为此，我创建了[Additional Identities 插件。](https://wiki.jenkins-ci.org/display/JENKINS/Additional+Identities+Plugin)在我找到更好的解决方案之前只有一种解决方法，但可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:14:29.890

我越来越认为这是 svn/sspi 相关的

我想在 linux 上安装 svn，根本不处理 windows...我想我可以将“SSPIOmitDomain On”添加到我的 conf 文件中，然后根本没有域，但这是次优的，因为我d 然后想要转储所有存储库以使用户名匹配。

# sql - 如何通过子选择获得计数

> ID：11695175
> 
> 赞同：3
> 
> 时间：2012-07-27T20:25:21.807
> 
> 标签：sql

我正在尝试编写一个 SQL，它获取与特定列具有相同值的表中的行数。在这种情况下，表格有一个名为“标题”的列。对于我返回的每一行以及该行的其他列的值，我想获取表中与该行的“标题”值具有相同值的行数。现在，我最好的方法是：select firstname, lastname, city, state, title, (select count from myTable where title = title);

显然，这给我的只是我的子选择中表中的行数。如何让标题右侧 = 引用列标题的值？

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:28:15.420

这称为“相关子查询”。它是这样的：

```
select firstname, lastname, title, 
              (select count(1) from table where title=a.title) title_count 
from table a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:30:48.420

这未经测试，但我认为它应该适用于您正在尝试做的事情

```
WITH titles AS (
    SELECT
        Title
        , COUNT(*) AS Occurences
    FROM myTable
    GROUP BY Title
)
SELECT 
    t1.FirstName
    , t1.LastName
    , t1.City
    , t1.state
    , t1.title
    , titles.Occurences
FROM myTable AS t1
INNER JOIN titles ON t1.Title = titles.Title 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:22:25.610

大多数数据库都支持窗口/分析功能。如果您使用其中之一（例如 SQL Server、Oracle、Postgres），您可以这样做：

```
select t.firstname, t.lastname, t.title, t.city, t.state,
       count(*) over (partition by title) as numwithtitle
from t 
```

# visual-c++ - Automation implementation using Busy Waiting or Threads in c++

> ID：11695181
> 
> 赞同：0
> 
> 时间：2012-07-27T20:25:40.323
> 
> 标签：visual-c++, busy-waiting

I am trying to automate the handler equipment(a robot picks a chip and put it onto a hardware platform) with the following requirement:

1.There are 6 sites for the handler , once handler puts a device onto that site, handler will return an errorcode:

code1 for ready to test, code2 for error, and if in process no code have returned.

2.There is a master PC that controls the handler operation, and the communication b/w master and site PCs are using **Staf**

3.I need to use that code to run some tests(which already implemented and working properly). Handler puts the device in a FIFO order, first site returns code first, and last site returns code last.

4.The Site PC is acting passively, which master PC will determine when to run and how to run the tests. Site PC will only know if handler is ready then execute the tests.

So my question would be: In this case, for the site-PCs(Windows based with perl and .net enabled), is busy waiting method better or is the wait condition mechanism suits better:

For example: the sample code would be:

```
void runTestonSite()
{
    for(;;)
    {
        if(returnCode == code1)
        {
            testStart(arg1,arg2,arg3);
        }
    }
} 
```

or is there any better way to do this kind of task?

```
#include <boost/thread.hpp>

void getReturnCode() { 
    // do stuff
}

void RunTestOnSite() { 
    // do stuff
}

int main (int argc, char ** argv) {
    using namespace boost; 
    thread thread_1 = thread(getReturnCode);
    thread thread_2 = thread(RunTestOnSite);

    // do other stuff
    thread_2.join();
    thread_1.join();
    return 0;
} 
```

Please advise, thanks

# ruby-on-rails - How to work with ajax when showing different partials - Rails 3

> ID：11695182
> 
> 赞同：0
> 
> 时间：2012-07-27T20:25:43.023
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, link-to

So I was wondering how to work with the link_to method and ajax in Rails 3, when redering different partials.

**Example:**

Let say I have two link in `show.html.erb` and every link have a partial to render.

```
<li><%= link_to "Group1", user_path(@user), { :action => 'group1' , :method => :get, :remote => true} %></li>
<li><%= link_to "Group2", user_path(@user), { :action => 'group2' , :method => :get, :remote => true} %></li> 
```

And we are going to render the partials in this div:

```
<div id="profile-data">
 ...render here...
</div> 
```

In the `UsersController` we have our call methods for each partial:

```
def group1
  respond_to do |format|
    format.js
  end
end
def group2
  respond_to do |format|
    format.js
  end
end 
```

And of course we have our js files in the view user folder:

*group1.js.erb*

```
$("#profile-data").html("<%= escape_javascript(render(:partial => 'group1')) %>"); 
```

*group2.js.erb*

```
$("#profile-data").html("<%= escape_javascript(render(:partial => 'group2')) %>"); 
```

**So my question is:** is this the right way to render different partials with ajax? Are I missing something? Do have to route them some way?

This code dosent work right now and I dont know why, any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:49:57.760

link_to 应该有点像

```
<%= link_to "Group1", {group1_users_path, :format => :js} , :method => :get, :remote => true  %> 
```

或者

```
<%= link_to "Group1", {:controller=>:users,:action=>:group1, :format => :js} , :method => :get, :remote => true  %> 
```

或者如果它是成员路由并且需要 user_id

```
<%= link_to "Group1", {group1_users_path(@user) :format => :js} , :method => :get, :remote => true  %> 
```

link_to 的第二个参数是 url 选项，因此只有与 url 相关的选项在其中，其他的应该不在散列中，否则它们将作为参数传递。

在 rails cocs 查看更多详细信息，他们有一些简洁的文档和示例

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

您需要在路由文件中有 group1 和 group2

它应该像

```
resourses :users do
  collection do 
    get "group1"
    get "group2"
  end
end 
```

这将添加助手 group1_user_path 和 group2_user_path

我建议您彻底阅读 Rails 文档

[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:52:16.900

您需要在您的 link_to 中明确声明您要发出 javascript 请求。这可以通过将选项哈希中的格式设置为 js 来完成：`:format => :js`.

因此，在您的情况下，它应该如下所示：

```
<li><%= link_to "Group1", user_path(@user), { :action => 'group1' , :method => :get, :remote => true, :format => :js} %></li>
<li><%= link_to "Group2", user_path(@user), { :action => 'group2' , :method => :get, :remote => true, :format => :js} %></li> 
```

# php - php浏览器在发布后返回

> ID：11695183
> 
> 赞同：0
> 
> 时间：2012-07-27T20:25:43.960
> 
> 标签：php, browser, notifications, back

我有 php 页面，我使用表单提交消息。它向自己提交：

```
action="<? php echo $_SERVER['PHP_SELF'];?>" 
```

然后它发送电子邮件，我有一个使用 jnotify 的 javascript 函数来提醒消息是否发送成功。此函数检查 php 变量是否 $sent=='yes' 然后通知成功消息，否则通知错误。

问题是当用户发送消息并转到另一个页面并使用浏览器返回按钮返回时，它正在显示通知。我希望它只显示一次通知，并在浏览器返回或刷新使用时忘记通知。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:56:46.217

尝试这样的事情：

```
<?php

session_start();

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (form_is_valid()) {
        $_SESSION['form_success'] = true;
    } else {
        $_SESSION['form_success'] = false;
    }
    header('Location: ' . $_SERVER['PHP_SELF'];
    exit;
} else if (isset($_SESSION['form_success'])) {
    if ($_SESSION['form_success'])) {
        // insert success javascript
    } else {
        // insert failure javascript
    }
    unset($_SESSION['form_success']);
}

// display_form 
```

这应该使他们只看到一次成功/失败消息，如果他们稍后使用后退按钮，他们将不会收到有关重新提交帖子数据的警告，他们也不会看到成功/失败消息两次。javascript 应该显示的唯一时间是他们是否刚刚在最后一个请求中提交了表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:35:38.370

您可以使用 ajax 请求来发送您的表单。

```
$.ajax({
  type: 'POST',
  url: processor.php,
  data: $('#form_id').serialize(),
  success: function(data){
       if(data==0){ alert('message sent'); }else{ alert('message not sent'); }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:40:50.360

我认为 Zend Helper [Flash messenger](http://akrabat.com/zend-framework/zend-frameworks-flash-messenger-action-helper/)可能是您正在寻找的。

“这意味着该消息将在下一个请求时可用于检索，但在之后的请求中不可用。”

[附加文件](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html)

# facebook - OpenGraph publish action display

> ID：11695184
> 
> 赞同：0
> 
> 时间：2012-07-27T20:25:48.067
> 
> 标签：facebook, facebook-opengraph

I am writing here to ask you for some help. I;m trying to publish action "vote" which is connected with built-in object "movie". I can post that action with image, but message is displayed above that image (thumbnail).

I've tried to add some custom properties/field such as "viewers" (Integer), but it didn't succeded. It is not displayed in my timeline.

I want to post thumbnail on the left, and on the right: name of movie and my custom fields or plain text (Side by side). Please help me achieve that effect.

I also noticed that published action is displayed in Activity Feed instead of News Feed or Timeline (profile).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:31:08.487

在您应用的 Open Graph 设置中，为**投票操作定义****Captions**。

 **[https://developers.facebook.com/docs/opengraph/define-actions/](https://developers.facebook.com/docs/opengraph/define-actions/)**

# ruby-on-rails - 使用设计更新方法覆盖 redirect_to 行为

> ID：11695185
> 
> 赞同：0
> 
> 时间：2012-07-27T20:25:52.417
> 
> 标签：ruby-on-rails, ruby

我认为是一个简单的问题给我带来了一些麻烦。我有一个使用 Devise/Omniauth 进行身份验证的应用程序。当一个新用户注册并登录时，我希望他们被引导到几个问题（连续）问：

1.  他们喜欢什么饮料？（咖啡，饮料，两者）
2.  哪些社区对他们来说很方便？

我的用户模型有一个“preferred_beverage”属性以及三个preferred_neighborhood_# 属性（preferred_neighborhood_one、preferred_neighborhood_two、preferred_neighborhood_three）。

当用户登录时，我想检查他们是否是新用户，如果是，将他们引导至问题 1 的页面：

```
<div class="center hero-unit">
  <h2>What do you like to drink?</h2>

    <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>

    <%= f.radio_button :preferred_beverage, 'Coffee', :checked => true %> 
    <%= label :preferred_beverage, 'Coffee' %>
    <%= f.radio_button :preferred_beverage, 'Drink' %> 
    <%= label :preferred_beverage, 'Drink' %>
    <%= f.radio_button :preferred_beverage, 'Both' %> 
    <%= label :preferred_beverage, 'Both' %>

    <%= f.submit "Next", class: "btn btn-large btn-primary" %>

  <% end %>
</div> 
```

问题是，在提交此表单时，即使用户的“preferred_beverage”属性正在保存，我也无法正确覆盖默认的设计“更新”方法，该方法似乎正在处理对用户的任何修改并重定向到 root_path。我想在提交“preferred_beverage”后直接重定向到我的 /app/views/neighborhood_survey/new.html.erb 表单。

我到底需要在我用来覆盖默认设计注册控制器的这个registrations_controller.rb的“更新”部分中添加什么？

应用程序/控制器/registrations_controller.rb

```
class RegistrationsController < Devise::RegistrationsController

  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  def update
  end

  private
  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

我完成了以下操作，以确保我的 registrations_controller 使用以下内容覆盖了设计注册控制器：

```
routes.rb

    devise_for :users, path_names: {sign_in: "login", sign_out: "logout"},
                       controllers: {omniauth_callbacks: "omniauth_callbacks", :registrations => "registrations"} 
```

任何输入表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:08:56.967

您不应该覆盖设计更新操作，您需要覆盖

```
after_sign_in_path_for 
```

设计路线。在用户登录后，您将能够将用户重定向到任何您喜欢的位置。您应该将其放入您的应用程序控制器中。

[http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers#after_sign_in_path_for-instance_method](http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers#after_sign_in_path_for-instance_method)

# sql - 创建用户权限报告

> ID：11695195
> 
> 赞同：1
> 
> 时间：2012-07-27T20:26:29.940
> 
> 标签：sql, sql-server-2008

我有一个表，我在其中存储用户授予或拒绝访问软件不同模块的权限。

```
idUser     idModule
  1           1
  1           2
  1           3
  2           4 
```

用户“1”可以访问模块 1、2、3，但不能访问模块 4。用户“2”只能访问模块 4。

因此，idModule 是 Module 表中的 FK，如果用户有权访问，它将在此表中保留一行，否则将被拒绝。

```
idModule           Module
   1          Can Create Users
   2          Can Edit Users
   3          Can Delete Users
   4          Can View Users 
```

我想要一个输出的查询：

```
idUser  Module1    Module2    Module3    Module4
  1        1          1          1          0
  2        0          0          0          1 
```

这种方式很容易做报告。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:40:47.653

也许是一个简单的反规范化查询：

```
select idUser
     , max(case when idModule=1 then 1 else 0 end) as Module1
     , max(case when idModule=2 then 1 else 0 end) as Module2
     , max(case when idModule=3 then 1 else 0 end) as Module3
     , max(case when idModule=4 then 1 else 0 end) as Module4
from   your_table
group by 1 
```

# python - Python: How do I make this regex work when Input is read from file

> ID：11695196
> 
> 赞同：0
> 
> 时间：2012-07-27T20:26:28.820
> 
> 标签：python, regex

```
>>> line = '\xc2d sdsdfdslkfsdkfjdsf'
>>> pattern_strings = ['\xc2d', '\xe9']
>>> pattern = '|'.join(pattern_strings)
>>> pattern
'\xc2d|\xe9'
>>> import re
>>> re.findall(pattern, line)
['\xc2d'] 
```

When I put `line` in a file and try to do the same regex, it doen't show up anything

```
def find_pattern(path):
    with open(path) as f:
        for line in f:
            line = line.strip()
            pattern_strings = ['\xc2d', '\xe9'] # or using ['\\xc2d', '\xe9'] doesn't help
            pattern = '|'.join(pattern_strings)
            print re.findall(pattern, line) 
```

where `path` is a file looked as following
`\xc2d sdsdfdslkfsdkfjdsf`

I see

```
\xc2d
[]
d\xa0
[]
\xe7
[]
\xc3\ufffdd
[]
\xc3\ufffdd
[]
\xc2\xa0
[]
\xc3\xa7
[]
\xa0\xa0
[]
'619d813\xa03697'
[] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:30:43.070

`line = "\xc2d bla"`是一个 Python 字符串，其中 `"\xc2d" 是一个包含 2 个字符的子字符串。

您的文件听起来像是其中包含文字字符串“\xc2d”，它与该模式不匹配。

如果您想匹配文字字符串，则需要匹配其每个字符（因此，请转义斜杠）。

```
pattern = r"\\xc2d" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:00:35.360

您需要以二进制模式读取文件`f = open("myfile", "rb")`以防止`\x`转换，因为在 Python 中`\xhh`表示[十六进制转义字符](http://www.python.org/dev/peps/pep-0223/)。

非二进制读取将失败 -[在此处](http://ideone.com/93txQ)检查。

# python - Python import fails for copied directory

> ID：11695197
> 
> 赞同：0
> 
> 时间：2012-07-27T20:26:37.540
> 
> 标签：python, import, python-import

I had a directory structure like the following for a Python project:

```
my_project
|_ 
   ... 
   dirA
      |_ 
        __init__.py
        scriptA.py
   dirB
      |_
        __init__.py
        scriptB.py
   ... 
```

Inside `__init__.py` of `dirA` (`__init__.py` of `dirB` is empty), I have:

```
import os
import glob
__all__ = [os.path.basename(f)[:-3] for f in glob.glob(os.path.dirname(os.path.abspath(__file__)) + "/*.py")] 
```

Inside `scriptB.py`, I do:

```
from dirA import * 
```

And the subsequent code which utilizes the imports works fine.

Then, I copied and pasted the whole project (with a different project directory name: `my_project_new`) in the same directory as the old one, and I start changing the code of `scriptA.py` in this newly duplicated directory. (*Note*: directory structure of `my_project_new` remains exactly the same as above).

After making the changes, I tried to run `scriptB.py` of `my_project_new`, and I found that **it kept importing `dirA` from the original `my_project` directory**, instead of the `dirA` in the current `my_project_new` directory. Why is this?

Further, I moved the original `my_project` folder to a different location, and tried to run `scriptB.py` of `my_project_new` again. It then failed to identify `dirA` altogether. What is happening now?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:56:52.987

我会发表评论，但我没有足够的声誉。希望我的猜测是正确的。

有`__init__.pyc`文件吗？也许当它编译字节码时，它会存储导入的绝对路径。尝试删除 .pyc 文件并导入。

# c# - Using structs for Range variable type

> ID：11695207
> 
> 赞同：1
> 
> 时间：2012-07-27T20:27:55.007
> 
> 标签：c#, dictionary, struct, variable-types

I am trying to make a struct for a range variable (minimum, maximum) with a few members and a method to know if between values.

Right now my struct looks like this:

```
public struct NumRange
{
    float maximum;
    float minimum;

    public NumRange(float min, float max) 
    {
        this.maximum = max;
        this.minimum = min;
    }

    public bool IsBetween(float value)
    {
        if (value < maximum && value > minimum)
            return true;

        return false;
    }
} 
```

I want to be able to make number ranges by

```
NumRange test = new NumRange(15, 20); 
```

The whole point of making this range variable type is to make a map key dictionary like:

```
public Dictionary<NumRange, Color> mapKey = new Dictionary<NumRange, Color>();
NumRange test = new NumRange(15, 20);
mapKey.Add(test, Color.Orange); 
```

Is this the best way to go about it? Also it doesn't like when I try to add something to mapKey. Says there is invalid tokens such as ',' ')' '('

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:42:56.993

Unless you have a finite number of values to look up, a dictionary may not be the best choice. It looks like you're mapping ranges of values to colors to apply to a height map. This stub of a class will let you do so, but note that it does not accommodate blending from color A to color B.

```
class RangeMap<T>
{
    private SortedList<float, T>  _values;

    public RangeMap()
    {
        _values = new SortedList<float, T>();
    }

    public void AddPoint(float max, T value)
    {
        _values[max] = value;
    }

    public T GetValue(float point)
    {
        if (_values.ContainsKey(point)) return _values[point];

        return (from kvp in _values where kvp.Key > point select kvp.Value)
               .FirstOrDefault();
    }
} 
```

```
var  map = new RangeMap<Color>();
map.AddPoint(0.0F, Color.Red);
map.AddPoint(0.5F, Color.Green);
map.AddPoint(1.0F, Color.Blue);

Console.WriteLine(map.GetValue(-0.25F).Name);
Console.WriteLine(map.GetValue( 0.25F).Name);
Console.WriteLine(map.GetValue( 0.75F).Name);
Console.WriteLine(map.GetValue( 1.25F).Name); 
```

Output: Red, Green, Blue, empty struct.

# ruby-on-rails - Resque 无法加载模块 - 没有这样的文件

> ID：11695211
> 
> 赞同：0
> 
> 时间：2012-07-27T20:28:18.423
> 
> 标签：ruby-on-rails, load, require, resque

我`resque`在 Rails 做。在 Rails 项目中，我有一个文件名`setup.rb`，并且`helper.rb`在同一目录中。在`setup.rb`我有

```
require './helper' 
```

当我尝试运行`bundle exec rake resque:work QUEUE="*"`或`rake resque:work QUEUE="*"`出现错误时。错误是：

```
No such file to load -- ./helper 
```

当我尝试使用 Rails 控制台时，`Dir.chdir`进入该目录并输入`require './helper'`它返回 true，这意味着它工作正常。我无法解释为什么`setup.rb`不能需要'./helper'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:33:41.413

尝试使用 Rails.root 作为文件路径并使其成为绝对而不是相对

# java - 是否可以强制 JAXB 在 XML 标记中编组非法字符？

> ID：11695215
> 
> 赞同：0
> 
> 时间：2012-07-27T20:28:39.670
> 
> 标签：java, xml, jaxb

我有一个充满对象的数据库，以及用户定义的属性。例如：

```
class Media {
  String name;
  String duration;
  Map<String,String> custom_tags;
}

Media:
  Name: day_at_the_beach.mp4
  Length: 4:22
  Custom Tags:
    Videographer: Charles
    Owner ID #: 17a 
```

我们的用户可以提出自己的自定义属性来附加到媒体，并相应地填写值。但是，当我尝试将对象编组为 XML 时，我遇到了问题：

```
<media>
  <name>day_at_the_beach.mp4</name>
  <length>4:22</length>
  <custom_tags>
    <Videographer>Charles</videographer>
    <Owner_ID_#>17a</Owner_ID_#>
  </custom_tags>
</media> 
```

`Owner_ID_#`是 XML 中的非法标记名称，因为它包含一个`#`所以 JAXB 抛出一个`org.w3c.dom.DOMException: INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified.`

我知道解决此问题的首选*正确*方法是将 xml 重新格式化为以下内容：

```
<custom_tags>
  <custom_tag>
    <name>Owner ID #</name>
    <value>17z</value>
  </custom_tag>
</custom_tags> 
```

但是，我*需要*返回以前的无效 XML，以维护以前的、不那么挑剔的代码实现的遗留行为。有什么方法可以告诉 JAXB 不要担心非法的 XML 字符，或者我会在编码之前/之后进行字符串替换吗？我目前的实现很简单：

```
public static <T> String toXml(Object o, Class<T> z) {
    try {
        StringWriter sw = new StringWriter();
        JAXBContext context = JAXBContext.newInstance(z);
        Marshaller marshaller = context.createMarshaller();
        marshaller.marshal(o, sw);
        return sw.toString();
    } catch (JAXBException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:34:42.447

我为这个特定对象构建了一个 XmlAdapter，然后：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document document = db.newDocument();
document.setStrictErrorChecking(false); // <--- This one. This accomplished it. 
```

# javascript - 骨干js是否像canjs一样使用“实时绑定”？

> ID：11695218
> 
> 赞同：1
> 
> 时间：2012-07-27T20:28:49.157
> 
> 标签：javascript, backbone.js, javascriptmvc

我一直在比较 js mvc，并注意到很多人都在吹嘘 canjs 所做的“实时绑定”。有人可以解释一下它到底是什么，以及与其他流行的 mvc 相比，它有什么帮助，如主干js、脊柱等......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T16:13:06.873

您使用实时绑定，因为使用 CanJS，您将所有代码替换为：

`<h1><%= model.attr('name') %></h1>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T21:05:32.327

Backbone 确实支持**实现**模型绑定，但它不像其他一些客户端应用程序框架那样是**自动**的，例如[AngularJS](http://angularjs.org)的数据绑定 through`ng-controller`或[EmberJS](http://emberjs.com/documentation/#toc_binding-element-attributes-with-bindattr)的`bindAttr`。

对于在模型状态更改时更新视图的一些非常基本的代码，请使用`Backbone.View`'s [`events`object](http://backbonejs.org/#View-delegateEvents)，如下例所示：

```
var ExampleView = Backbone.View.extend({
    id: 'myView',

    events: {
        // using an #id selector here is also acceptable
        'change [data-attrname=name]': function(e) {
            // update the value in the model
            this.model.set('name', $(e.target).val());
        }
    },

    initialize: function(options) {
         this.model.on('change', this.render, this);
    },

    render: function() {
        var html = _.template('<h1 data-attrname="name"><%= name %></h1>', 
                              this.model.toJSON());
        this.$el.html(html);
        return this;
    }
}); 
```

它将呈现以下 HTML（`myView`是由 ExampleView 隐式创建的 div）：

```
<div id="myView">
    <h1 data-attrname="name"></h1>
</div> 
```

这实质上是`render`在模型更改时从 UI 和批发（重新定义整个视图）进行手动绑定。Backbone 被有意设计为不像其他一些框架那样固执己见，以允许您通过添加其他库来实现您认为合适的东西。

有关如何更自动地建模绑定的一些更复杂的技术，以下是其作者列出的一些资源：

1.  [Los Techies / Derek Bailey](https://github.com/derickbailey/backbone.modelbinding)
2.  [他们的厨师](https://github.com/theironcook/Backbone.ModelBinder)
3.  [XTargets](http://xtargets.com/2011/06/11/binding-model-attributes-to-form-elements-with-backbone-js/)

# javascript - 手动渲染原型 JS 元素对象

> ID：11695223
> 
> 赞同：0
> 
> 时间：2012-07-27T20:29:00.747
> 
> 标签：javascript, html, dom, prototypejs

`update`是否可以在不使用、`insert`等方法之一的情况下手动呈现 Prototype JS 元素？如果是这样，怎么做？

也就是说，如果我有代码

```
var test = new Element('div');
test.update("This is a test"); 
```

有没有办法用字符串获取 javascript 变量

```
<div>Hello</code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:45:42.837

我对你的问题有点不清楚。如果您要求对元素（是否使用 Prototype 创建）进行字符串表示，则您正在寻找[outerHTML](https://developer.mozilla.org/en/DOM/element.outerHTML)。

```
var test = new Element('div');
test.update("This is a test");

var htmlString = test.outerHTML;
alert(htmlString);  // "<div>This is a test</div>" 
```

如果你问是否可以`<div>This is a test</div>`使用 Prototype 从字符串创建元素，答案是否定的。好吧，没有内置的东西可以做到这一点。不过，您可以轻松创建自己的函数来处理此问题。这是关于该主题的类似问答：[如何在原型中从 HTML 创建元素？](https://stackoverflow.com/questions/11551647/how-to-create-element-from-html-in-prototype/11564472#11564472)

# android - Android Handler.getLooper() 返回 null

> ID：11695224
> 
> 赞同：0
> 
> 时间：2012-07-27T20:29:08.073
> 
> 标签：android, android-location, looper, android-handler

我有以下问题。我用 Looper 实现了我的线程。

```
public class GeoLocationThread extends Thread{

public Handler handler;
private General general;

public void run(){
    Looper.prepare();       
    handler = new IncomingHandler(general);
    Looper.loop();          

}

public GeoLocationThread(General general){
    this.general=general;
}

private static class IncomingHandler extends Handler{
    private final WeakReference<General> mService; 

    IncomingHandler(General service) {
        mService = new WeakReference<General>(service);
    }

    @Override
    public void handleMessage(Message msg)
    {
         General service = mService.get();
         if (service != null) {
             Location location=service.getLl().getLocation();
                if(location.getAccuracy()<40){                                                                                      
                    service.setOrigin(new GeoPoint((int) (location.getLatitude() * 1E6),(int) (location.getLongitude() * 1E6)));
                }
         }
    }

} 
```

}

我想做以下事情：

```
GeoLocationThread locationThread=new GeoLocationThread(this);
locationThread.start();
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll, locationThread.handler.getLooper()); 
```

其中 lm 是 LocationManager。从我的日志和测试中，我可以说`locationThread.handler.getLooper()`返回 null 而不是 Looper。

我不知道为什么它是空的。我试图打电话给`locationThread.isAlive()`返回true。我也试图得到`locationThread.handler;`我知道不为空的。我也做了很多谷歌搜索，但我没有找到比文档更多的东西。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:13:58.357

您的代码`null`很可能正在读取，因为这两个操作彼此不同步。您无法成功调用`getLooper()`直到`Handler`完成`Looper.prepare()`并构造处理程序。因为`Thread.start()`在其他线程执行时不会阻塞（当然，为什么会这样？那会破坏新线程的目的），您在`run()`线程块和尝试设置位置侦听器的代码之间创建了竞争条件。这将根据谁可以先执行在不同的设备上产生不同的结果。

此外，注册位置更新已经是一个异步过程，所以有人想知道为什么需要辅助线程？您可以简单地向您的侦听器请求更新，而无需传入辅助`Looper`线程，当有新更新可用时，侦听器将获取发布的数据，在此过程中主线程不会保持阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:37:28.853

你必须在你的构造函数中调用 super() 吗？也许 Looper 没有被设置，因为父构造函数没有被调用？

好的，试试这个。做这个：

```
public class GeoLocationThread extends Thread{ 
```

是这样的：

```
public class GeoLocationThread extends HandlerThread{ 
```

那么你可以在构造 Handler 或需要 looper 时执行 this.getLooper() 。

# jquery - 从到 jquery

> ID：11695225
> 
> 赞同：1
> 
> 时间：2012-07-27T20:29:08.557
> 
> 标签：jquery, dom

有

```
var a = $("#HTMLiFRAME").contents().find('xxx'); //only reference not actual code 
```

指向对象：

```
<td>hi</td> 
```

在一个表中：

```
 <tr id="1">
     <td>hi</td>
 </tr>
 <tr id="2"></tr>
 <tr id="3"></tr>
 <tr id="4"></tr> 
```

我怎样才能下降到

```
<tr id="3></tr> 
```

仅使用 next()、offsetParents() 等方法。

```
//ids or clases are not known 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:31:58.217

这个怎么样？

```
var a = $("td:contains('hi')").parent().siblings().last(); 
```

编辑：所以你不想要最后一个......你想要倒数第二个？这个怎么样？

```
var a = $("td:contains('hi')").parent().siblings().last().prev(); 
```

编辑 2：所以你不希望倒数第二个你想要的......在第一个之后的两个？这个怎么样？

```
var a = $("td:contains('hi')").parent().next().next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:38:41.187

您的 HTML 格式不正确（需要封装表格标签）并且它会破坏您可能希望执行的任何 DOM 遍历。正确编写 HTML 代码，使用 .parent() 或 .closest('tr') 从单元格到行，然后使用 .next() 或 .nextUntil() 选择下一行。

工作示例：http:
[//jsfiddle.net/W3yqu/](http://jsfiddle.net/W3yqu/)

jQuery 选择器中的 document.getElementById 没有评论；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:36:44.403

真的有很多方法可以做到这一点。但是我会以不同的方式处理这个问题，因为我需要下一个选择。

```
var a = $(document.getElementById("id")),
    tbody = a.find('tbody');

var td = tbody.find('#1'),
    anotherTd = tbody.find('#2'); //etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T20:40:05.290

如果你想做一个完整的 jquery，你可以做这样的事情。

[http://api.jquery.com/next-siblings-selector/](http://api.jquery.com/next-siblings-selector/)

[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

var item = $("#1 ~ td:eq(1)")

# powershell - 作为数组的格式表和属性

> ID：11695226
> 
> 赞同：5
> 
> 时间：2012-07-27T20:29:08.827
> 
> 标签：powershell

我使用这个 powershell 命令：

```
get-vm | ft name, *start*, *stop*, customproperties 
```

返回具有字符串数组作为属性的对象（customproperties）：

```
Name                StartAction DelayStart      StopAction CustomProperties
----                ----------- ----------      ---------- ----------------
TKAD4        AlwaysAutoTurnOnVM          0 ShutdownGuestOS {NoStartupDelay, ...
TKAD3        AlwaysAutoTurnOnVM          0 ShutdownGuestOS {NoStartupDelay, ... 
```

我怎样才能从数组中只返回一个元素，这是一个作为对象的属性以将其显示为表格的一部分？

我想要的输出如下所示：

```
Name                StartAction DelayStart      StopAction        Custom1
----                ----------- ----------      ----------        -------
TKAD4        AlwaysAutoTurnOnVM          0 ShutdownGuestOS NoStartupDelay
TKAD3        AlwaysAutoTurnOnVM          0 ShutdownGuestOS NoStartupDelay 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T21:09:46.873

在您的格式表中，更改`customproperties`为：

```
@{label='Custom1';e={$_.CustomProperties[0]}} 
```

如果是数组。如果是集合使用：

```
@{label='Custom1';e={$_.CustomProperties | Select -First 1}} 
```

# c++ - 如何使用正确的有效小数位数打印 C++ 双精度数？

> ID：11695233
> 
> 赞同：10
> 
> 时间：2012-07-27T20:29:55.220
> 
> 标签：c++, floating-point, string-formatting, precision

在 Java 中处理浮点值时，调用该`toString()`方法会给出一个打印值，该值具有正确数量的浮点有效数字。但是，在 C++ 中，通过打印浮点数`stringstream`将在 5 位或更少位后舍入该值。有没有办法将 C++ 中的浮点数“漂亮地打印”到（假设的）正确数量的有效数字？

* * *

编辑：我想我被误解了。我希望输出具有动态长度，而不是固定精度。我熟悉setprecision。如果您查看 Double 的 java 源代码，它会以某种方式计算有效位数，我真的很想了解它是如何工作的和/或在 C++ 中轻松复制它的可行性。

```
/*
 * FIRST IMPORTANT CONSTRUCTOR: DOUBLE
 */
public FloatingDecimal( double d )
{
    long    dBits = Double.doubleToLongBits( d );
    long    fractBits;
    int     binExp;
    int     nSignificantBits;

    // discover and delete sign
    if ( (dBits&signMask) != 0 ){
        isNegative = true;
        dBits ^= signMask;
    } else {
        isNegative = false;
    }
    // Begin to unpack
    // Discover obvious special cases of NaN and Infinity.
    binExp = (int)( (dBits&expMask) >> expShift );
    fractBits = dBits&fractMask;
    if ( binExp == (int)(expMask>>expShift) ) {
        isExceptional = true;
        if ( fractBits == 0L ){
            digits =  infinity;
        } else {
            digits = notANumber;
            isNegative = false; // NaN has no sign!
        }
        nDigits = digits.length;
        return;
    }
    isExceptional = false;
    // Finish unpacking
    // Normalize denormalized numbers.
    // Insert assumed high-order bit for normalized numbers.
    // Subtract exponent bias.
    if ( binExp == 0 ){
        if ( fractBits == 0L ){
            // not a denorm, just a 0!
            decExponent = 0;
            digits = zero;
            nDigits = 1;
            return;
        }
        while ( (fractBits&fractHOB) == 0L ){
            fractBits <<= 1;
            binExp -= 1;
        }
        nSignificantBits = expShift + binExp +1; // recall binExp is  - shift count.
        binExp += 1;
    } else {
        fractBits |= fractHOB;
        nSignificantBits = expShift+1;
    }
    binExp -= expBias;
    // call the routine that actually does all the hard work.
    dtoa( binExp, fractBits, nSignificantBits );
} 
```

在这个函数之后，它会调用`dtoa( binExp, fractBits, nSignificantBits );`处理一堆案例 - 这是来自 OpenJDK6

* * *

为了更清楚，一个例子：Java：

```
double test1 = 1.2593;
double test2 = 0.004963;
double test3 = 1.55558742563;

System.out.println(test1);
System.out.println(test2);
System.out.println(test3); 
```

输出：

```
1.2593
0.004963
1.55558742563 
```

C++：

```
std::cout << test1 << "\n";
std::cout << test2 << "\n";
std::cout << test3 << "\n"; 
```

输出：

```
1.2593
0.004963
1.55559 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:02:42.863

我认为您正在谈论如何打印允许您读取完全相同的浮点数的最小浮点数。这篇论文很好地介绍了这个棘手的问题。

[http://grouper.ieee.org/groups/754/email/pdfq3pavhBfih.pdf](http://grouper.ieee.org/groups/754/email/pdfq3pavhBfih.pdf)

dtoa 函数看起来像 David Gay 的作品，您可以在此处找到源代码[http://www.netlib.org/fp/dtoa.c](http://www.netlib.org/fp/dtoa.c)（虽然这是 C 而不是 Java）。

盖伊还写了一篇关于他的方法的论文。我没有链接，但在上面的论文中引用了它，所以你可以用谷歌搜索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-20T16:39:29.410

> 有没有办法将 C++ 中的浮点数“漂亮地打印”到（假设的）正确数量的有效数字？

是的，你可以用 C++20 来做[`std::format`](https://en.cppreference.com/w/cpp/utility/format/format)，例如：

```
double test1 = 1.2593;
double test2 = 0.004963;
double test3 = 1.55558742563;
std::cout << std::format("{}", test1) << "\n";
std::cout << std::format("{}", test2) << "\n";
std::cout << std::format("{}", test3) << "\n"; 
```

印刷

```
1.2593
0.004963
1.55558742563 
```

默认格式将为您提供最短的十进制表示形式，并提供 Java 中的往返保证。

由于这是一项新功能，某些标准库可能还不支持，因此您可以使用基于[的 {fmt} 库](https://github.com/fmtlib/fmt)`std::format`。{fmt} 还提供了`print`使这更容易和更高效的功能（[godbolt](https://godbolt.org/z/TEaP4o)）：

```
fmt::print("{}", 1.2593); 
```

**免责声明**：我是 {fmt} 和 C++20 的作者`std::format`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T20:35:46.560

您可以使用 ios_base::precision 技术，您可以在其中指定所需的位数

例如

```
#include <iostream>
using namespace std;

int main () {
double f = 3.14159;
cout.unsetf(ios::floatfield);            // floatfield not set
cout.precision(5);
cout << f << endl;
cout.precision(10);
cout << f << endl;
cout.setf(ios::fixed,ios::floatfield);   // floatfield set to fixed
cout << f << endl;
return 0; 
```

上面的代码输出
3.1416
3.14159
3.1415900000

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T22:30:10.253

有一个名为 numeric_limits 的实用程序：

```
#include <limits>

    ...
    int num10 = std::numeric_limits<double>::digits10;
    int max_num10 = std::numeric_limits<double>::max_digits10; 
```

请注意，IEEE 数字不完全由十进制数字表示。这些是二进制量。更准确的数字是二进制位数：

```
 int bits = std::numeric_limits<double>::digits; 
```

要漂亮地打印所有有效数字，请使用 setprecision ：

```
out.setprecision(std::numeric_limits<double>::digits10); 
```

# php - 使用 PHP 获取 JSON 响应

> ID：11695235
> 
> 赞同：0
> 
> 时间：2012-07-27T20:30:24.470
> 
> 标签：php, json, api

我正在尝试通过 PHP 连接使用 0AUTH2 的 API。最初的计划是使用客户端 JS，但使用 0AUTH2 是不可能的。

我只是想从这里的 API 端点获取共享计数：https://api.bufferapp.com/1/links/shares.json?url=[your-url-here]&access_token=[your-access -关键在这里]

我确实有一个正确的 access_token 用于访问 json 文件，它工作正常。

这是我目前编写的代码，但我什至不确定我是否走在正确的轨道上。

```
// 0AUTH2 ACCESS TOKEN FOR AUTHENTICATION
$key = '[my-access-key-here]';

// JSON URL TO BE REQUESTED
$json_url = 'https://api.bufferapp.com/1/links/shares.json?url=http://bufferapp.com&access_token=' . $key;

// GET THE SHARE COUNT FROM THE REQUEST
$json_string = '[shares]';

// INITIALIZE CURL
$ch = curl_init( $json_url );

// CONFIG CURL OPTIONS
$options = array(
    CURLOPT_RETURNTRANSFER  => true,
    CURLOPT_HTTPHEADER      => array('Content-type: application/json') ,
    CURLOPT_POSTFIELDS      => $json_string
);

// SETTING CURL AOPTIONS
curl_setopt_array( $ch, $options );

// GET THE RESULTS
$result =  curl_exec($ch); // Getting jSON result string 
```

就像我说的，我不知道这是否是最好的方法——所以我愿意接受任何建议。我只是想用这个 PHP 脚本检索共享计数，然后用 JS 在页面上我需要的地方吐出共享计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:00:17.350

我很抱歉浪费了任何人的时间。从那以后我就可以解决这个问题了。所有的代码本质上都是一样的——为了测试你是否得到了正确的响应，只需将它打印到页面上。再次，很抱歉浪费了任何人的时间。

```
<?php

// 0AUTH2 ACCESS TOKEN FOR AUTHENTICATION
$key    = '[your_access_key_here]';

// URL TO RETRIEVE SHARE COUNT FROM
$url = '[your_url_here]';

// JSON URL TO BE REQUESTED - API ENDPOINT
$json_url = 'https://api.bufferapp.com/1/links/shares.json?url=' . $url . ' &access_token=' . $key;

// GET THE SHARE COUNT FROM THE REQUEST
$json_string = '[shares]';

// INITIALIZE CURL
$ch = curl_init( $json_url );

// CONFIG CURL OPTIONS
$options = array(
    CURLOPT_RETURNTRANSFER  => true,
    CURLOPT_HTTPHEADER      => array('Content-type: application/json') ,
    CURLOPT_POSTFIELDS      => $json_string
);

// SETTING CURL AOPTIONS
curl_setopt_array( $ch, $options );

// GET THE RESULTS
$result =  curl_exec($ch); // Getting jSON result string

print $result;

?> 
```

# css - ie9中的按钮和链接

> ID：11695236
> 
> 赞同：1
> 
> 时间：2012-07-27T20:30:33.943
> 
> 标签：css, internet-explorer-9

我已经看到了大量的 ie css 问题，但似乎没有一个可以解决我在这里提出的问题。如果我错过了一个并问了一个骗子，请原谅我：）

我有一个网站（asp.net mvc2，c#），上面有类似这样的链接：

```
<a href="<%= Url.Action("Action", "Controller")%>">
    <div class="buttons">
        <button type="button"> Click Me</button> 
    </div>
</a> 
```

这些在 Chrome、FF 和 Safari 中运行良好，但在 IE9 中却不行。按钮本身似乎取消了链接。换句话说，链接仅在按钮的最外边缘（如果有的话）是活动的。

我对Css不是很流利，但这是相关的部分（我认为，虽然我认为问题可能出在其他地方......）：

```
 .buttons a, .buttons button{
       display:inline-block;
       text-align: left;
       float:left;
       margin:0 7px 0 0;
       background-color:#f5f5f5;
       border:1px solid #0b0101;
       border-top:1px solid #eee;
       border-left:1px solid #eee;    
       font-family:"Lucida Grande", Tahoma, Arial, Verdana, sans-serif;
       border-top-left-radius: 3px;
       border-top-right-radius: 3px;
       border-bottom-left-radius: 3px;
       border-bottom-right-radius: 3px;
       line-height:130%;
       text-decoration:none;
       font-weight:bold;
       color:#565656;
       cursor:pointer;
       padding:5px 10px 6px 7px; /* Links */
   }
   .buttons button{
       width:auto;
       overflow:visible;
       padding:4px 10px 3px 7px; /* IE6 */
   }
   .buttons button[type]{
       padding:5px 10px 5px 7px; /* Firefox */
       line-height:17px; /* Safari */
   } 
```

有谁知道解决方法或破解这个？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:20:17.867

我不确定你想用`<button>`标签内的`<a>`标签实现什么，但它不是有效的 HTML，所以它不能正常工作也就不足为奇了——也许更令人惊讶的是它在某些浏览器中工作。

在任何情况下，都不需要这种东西，因为`<a>`标签可以被设计为看起来和像按钮一样工作，而不需要在其中添加任何其他元素。

例如，请参阅[http://www.cssbuttongenerator.com/](http://www.cssbuttongenerator.com/)，它为纯`<a>`标签生成 CSS，其中除了按钮文本之外没有任何内容。

还有许多其他站点具有类似的教程和技术，但我给您的基本建议是放弃`<div>`and the`<button>`并使用普通`<a>`标签。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:46:23.357

感谢您的反馈。我没有意识到将按钮包装在`<a>`标签中是无效的，但确实如此。无论如何，imo，最简单的解决方法是删除`<a>`标签，然后添加

```
onclick="window.location.href='<%=Url.Action("Action", "Controller")%>'" 
```

到`<button>`元素，本质上是把按钮变成一个链接。

# c - 在 GCC 中动态创建 va_list - 可以吗？

> ID：11695237
> 
> 赞同：8
> 
> 时间：2012-07-27T20:30:39.713
> 
> 标签：c, gcc, x86-64, variadic-functions

我的问题`vsprintf`是我无法直接获取输入参数，我必须先一个一个地获取输入并将它们保存在`void**`，然后将其传递`void**`给`vsprintf()`，这对windows来说很好，但是当我来到64位linux时，gcc无法编译因为它不允许从 to 转换`void**`，`va_list`有没有人可以给我一些帮助，我应该如何在 linux 下做到这一点？

**我可以在 GCC 中动态创建 va_list 吗？**

```
void getInputArgs(char* str, char* format, ...)
{
    va_list args;
    va_start(args, format);
    vsprintf(str, format, args);
    va_end(args);
}  

void process(void)
{
    char s[256];
    double tempValue;
    char * tempString = NULL;
    void ** args_ptr = NULL;
    ArgFormatType format;   //defined in the lib I used in the code
    int numOfArgs = GetNumInputArgs();  // library func used in my code

    if(numOfArgs>1)
    {
        args_ptr = (void**) malloc(sizeof(char)*(numOfArgs-1));
        for(i=2; i<numOfArgs; i++)
        {
            format = GetArgType();    //library funcs

            switch(format)
            {
                case ArgType_double:
                    CopyInDoubleArg(i, TRUE, &tempValue);   //lib func
                    args_ptr[i-2] = (void*) (int)tempValue;    
                    break;

                case ArgType_char:
                    args_ptr[i-2]=NULL;
                    AllocInCharArg(i, TRUE, &tempString);  //lib func
                    args_ptr[i-2]= tempString;
                break;
            }
        }
    }

    getInputArgs(s, formatString, (va_list) args_ptr);   //Here 
           // is the location where gcc cannot compile, 
           // Can I and how if I can create a va_list myself?
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-03T23:45:35.217

有一种方法可以做到这一点，但它**特定**于`gcc`Linux。它确实适用于 32 位和 64 位版本的 Linux（已测试）。

**免责声明**：我不支持使用此代码。它不便携，很老套，坦率地说，它是众所周知的钢丝绳上的一头不稳定平衡的大象。我只是在证明可以动态创建`va_list`using `gcc`，这就是原始问题所要问的。

话虽如此，以下文章详细介绍`va_list`了 amd64 ABI 的工作原理：[Amd64 和 Va_arg](https://blog.nelhage.com/2010/10/amd64-and-va_arg/)。

了解结构的内部结构后`va_list`，我们可以欺骗宏从我们自己构建`va_arg`的 a 中读取：`va_list`

```
#if (defined( __linux__) && defined(__x86_64__))
// AMD64 byte-aligns elements to 8 bytes
#define VLIST_CHUNK_SIZE 8
#else
#define VLIST_CHUNK_SIZE 4
#define _va_list_ptr _va_list
#endif

typedef struct  {
    va_list _va_list;
#if (defined( __linux__) && defined(__x86_64__))
    void* _va_list_ptr;
#endif
} my_va_list;

void my_va_start(my_va_list* args, void* arg_list)
{
#if (defined(__linux__) && defined(__x86_64__))
    /* va_args will read from the overflow area if the gp_offset
       is greater than or equal to 48 (6 gp registers * 8 bytes/register)
       and the fp_offset is greater than or equal to 304 (gp_offset +
       16 fp registers * 16 bytes/register) */
    args->_va_list[0].gp_offset = 48;
    args->_va_list[0].fp_offset = 304;
    args->_va_list[0].reg_save_area = NULL;
    args->_va_list[0].overflow_arg_area = arg_list;
#endif
    args->_va_list_ptr = arg_list;
}

void my_va_end(my_va_list* args)
{
    free(args->_va_list_ptr);
}

typedef struct {
    ArgFormatType type; // OP defined this enum for format
    union {
        int i;
        // OTHER TYPES HERE
        void* p;
    } data;
} va_data; 
```

现在，我们可以`va_list`使用类似您的`process()`方法或以下内容生成指针（对于 64 位和 32 位版本都是相同的）：

```
void* create_arg_pointer(va_data* arguments, unsigned int num_args) {
    int i, arg_list_size = 0;
    void* arg_list = NULL;

    for (i=0; i < num_args; ++i)
    {
        unsigned int native_data_size, padded_size;
        void *native_data, *vdata;

        switch(arguments[i].type)
        {
            case ArgType_int:
                native_data = &(arguments[i].data.i);
                native_data_size = sizeof(arguments[i]->data.i);
                break;
            // OTHER TYPES HERE
            case ArgType_string:
                native_data = &(arguments[i].data.p);
                native_data_size = sizeof(arguments[i]->data.p);
                break;
            default:
                // error handling
                continue;
        }

        // if needed, pad the size we will use for the argument in the va_list
        for (padded_size = native_data_size; 0 != padded_size % VLIST_CHUNK_SIZE; padded_size++);

        // reallocate more memory for the additional argument
        arg_list = (char*)realloc(arg_list, arg_list_size + padded_size);

        // save a pointer to the beginning of the free space for this argument
        vdata = &(((char *)(arg_list))[arg_list_size]);

        // increment the amount of allocated space (to provide the correct offset and size for next time)
        arg_list_size += padded_size;

        // set full padded length to 0 and copy the actual data into the location
        memset(vdata, 0, padded_size);
        memcpy(vdata, native_data, native_data_size);
    }

    return arg_list;
} 
```

最后，我们可以使用它：

```
va_data data_args[2];
data_args[0].type = ArgType_int;
data_args[0].data.i = 42;

data_args[1].type = ArgType_string;
data_args[1].data.p = "hello world";

my_va_list args;
my_va_start(&args, create_arg_pointer(data_args, 2));

vprintf("format string %d %s", args._va_list);

my_va_end(&args); 
```

你有它。它的工作方式与普通和宏*基本*相同，但允许您传递自己动态生成的字节对齐指针以供使用，而不是依赖调用约定来设置堆栈帧。`va_start``va_end`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:05:52.550

我尝试过使用其他地方提到的 libffi，它可以工作。下面是链接，希望对遇到类似问题的人有所帮助。再次感谢我在这里得到的所有帮助！

链接： http: [//www.atmark-techno.com/~yashi/libffi.html](http://www.atmark-techno.com/~yashi/libffi.html) -- 给出的简单示例 [http://www.swig.org/Doc1.3/Varargs.html](http://www.swig.org/Doc1.3/Varargs.html) -- printf() 和其他示例给定

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T23:31:35.480

类型`va_list`不是`void **`或与 64 位类似`gcc`（在 Intel x86/64 机器上）。在 Mac OS X 10.7.4 和 RHEL 5 上`stdarg.h`，`/usr/include`. 考虑以下代码：

```
#include <stdarg.h>
#include <stdio.h>
int main(void)
{
    printf("sizeof(va_list) = %zu\n", sizeof(va_list));
    return 0;
} 
```

使用 64 位编译的 RHEL 5 和 Mac OS X 10.7 上的输出为：

```
sizeof(va_list) = 24 
```

使用 32 位编译，每个平台上的输出为：

```
sizeof(va_list) = 4 
```

（您可能会认为我很惊讶地发现 32 位和 64 位版本之间存在如此大的差异。我期望 32 位版本的值介于 12 和 24 之间。）

所以，类型是不透明的；你甚至找不到能告诉你任何信息的标题；它比 64 位机器上的单个指针大得多。

即使您的代码在某些机器上工作，它也远不能保证在任何地方都能工作。

GCC 4.7.1 手册没有提到任何允许您`va_list`在运行时构建的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T07:39:34.307

以下课程对我有用：

```
class VaList
{
    va_list     _arguments;

public:

    explicit inline VaList(const void * pDummy, ...)
    {
        va_start(_arguments, pDummy);
    }

    inline operator va_list &()
    {
        return _arguments;
    }

    inline operator const va_list &() const
    {
        return _arguments;
    }

    inline ~VaList()
    {
        va_end(_arguments);
    }
}; 
```

它可以像这样使用：

```
void v(const char * format, const va_list & arguments)
{
    vprintf(format, const_cast<va_list &>(arguments));
}

...

    v("%d\n", VaList("", 1)); // Uses VaList::operator va_list &()
    v("%d %d\n", VaList(nullptr, 2, 3)); // Uses VaList::operator va_list &()
    vprintf("%s %s %s\n", VaList("", "Works", "here", "too!"));

    const VaList args(NULL, 4, 5, "howdy", "there");
    v("%d %d %s %s\n", args); // Uses VaList::operator const va_list &() const 
```

第一个虚拟参数可以是任何类型的指针，它仅用于计算以下参数的地址。

当然，同样可以在 C 中完成，但不是那么漂亮（使用指针而不是引用）！

使用 VaList 构造动态 va_list 的简单示例：

```
static void VectorToVaList(const std::vector<int> & v, va_list & t)
{
    switch (v.size())
    {
        case 1: va_copy(t, VaList("", v[0])); return;
        case 2: va_copy(t, VaList("", v[0], v[1])); return;
        case 3: va_copy(t, VaList("", v[0], v[1], v[2])); return;
        case 4: va_copy(t, VaList("", v[0], v[1], v[2], v[3])); return;
        // etc
    }

    throw std::out_of_range("Out of range vector size!");
} 
```

和用法：

```
 va_list t;
    VectorToVaList(std::vector<int>{ 1, 2, 3, 4 }, t);
    vprintf("%d %d %d %d\n", t); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-12-02T15:59:09.543

如果您要解决的问题是以`va_list`样式插入传递任意类型到函数，那么请考虑使用`union`：

```
#include <iostream>
#include <cstdarg>

union ARG
{
    int d;
    char* s;
    double f;
};

int main()
{
    printf("%d %s %f \n", 1, "two", 3.1415 );
    // Output: 1 two 3.141500

    char format[ 1024 ] = "%d %s %f\n";
    ARG args[ 5 ] = { };
    args[ 0 ].d = 1;
    args[ 1 ].s = "two";
    args[ 2 ].f = 3.1415;
    printf( format, args[ 0 ], args[ 1 ], args[ 2 ], args[ 3 ], args[ 4 ] );
    // Output: 1 two 3.141500

    return 0;
} 
```

关于我的解决方案，你会注意到一些事情：

*   没有尝试产生正确数量的参数。即我提供了过多的参数，但是，大多数函数会查看第一个参数来确定如何处理其余的（即格式）
*   我没有费心动态地创建格式，但是，构建一个动态填充`format`和`args`.

对此进行了测试： - Ubuntu，g++ - Android NDK

我做了一些更多的测试，并确认了@PeterCoordes 关于这个答案的评论不适用于双精度。

# shell - 如何删除文件中以括号开头和结尾的列

> ID：11695238
> 
> 赞同：0
> 
> 时间：2012-07-27T20:30:39.777
> 
> 标签：shell

如何删除文件中以括号开头和结尾的列

**Expected Input - input.txt 的内容**

```
ABC (BCD) EFG    
BCD (ABC) (BCD) 
DEF  BCD (ABC)  
EFG HI(JKL)
ABC EFG (HI JK) LMN 
```

**预期输出——output.txt 的内容**

```
ABC EFG    
BCD    
DEF BCD
EFG HI(JKL)    
ABC EFG LMN 
```

**只是为了清楚起见，我想再添加一个示例输入。**

```
ABC (lll) INTEGER NOT NULL -3
EDG (FK) (lll) INTEGER NOT NULL -3
HIJ (nn ooo) CHAR(16) NOT NULL 'Not Provided'
KLM (ppp) VARCHAR(75) NOT NULL 'Not Provided'
NOP (qqq) VARCHAR(75) NOT NULL 'Not Provided'
QARD (rrr) DATE NOT NULL '1900-01-01'
QRS (sss) DATE NOT NULL '1900-01-01'
TUV  DATE NOT NULL '1900-01-01'
WXY (uuu) CHAR(1) NOT NULL 'N' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:42:16.607

用法
`awk '{print $0" "}' foo.txt | awk -f foo.awk`

**foo.awk**

```
BEGIN {
    RS=ORS=" "
}

{
    n=length($0)
    if (!n) next
    split($0, s, "")
}

s[1]=="(" && s[n]==")" {
    # it is column like (abcd), skip it
    next
}

s[1]=="(" {
    # stop printing
    f=1
}

!f {
    print $0
}

s[n]==")" {
    # start printing again
    f=0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:19:58.850

基于@slitvinov 的解决方案：

```
BEGIN {
    RS = "[[:space:]]"
    ORS = ""
    eat = 0
}

/^\(.*\)$/ {
    next
}

/^\(/ {
    eat = 1
    next
}

/\)$/ {
    if (eat) {
        eat = 0
        next
    }
}

{
    if (eat)
        next
    print $0 RT
} 
```

那到一个`.awk`文件并`awk -f foo.awk foo.txt`给出：

```
ABC EFG    
BCD 
DEF  BCD  
EFG HI(JKL)
ABC EFG LMN 
```

但我认为它可以做得更简单......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:22:40.387

我可以组装的最简单的东西是：

```
perl -pe 'BEGIN { undef $<; } s/\s(\(.*?\)(\s))+/\2/cgs' foo.txt 
```

对不起 Perl，但它在 POSIX 中，它的正则表达式足以涵盖这种情况。

啊，如果文件以括号开头，它就无法处理。如果它以一个结尾，只要后面有换行符就可以了。如果这是一个问题，那么最简单的解决方案就是添加一个临时空间。

# c# - 为什么 ASP.NET 控件值更改需要 2 次回发才能显示出来？

> ID：11695239
> 
> 赞同：1
> 
> 时间：2012-07-27T20:30:40.410
> 
> 标签：c#, asp.net

我在一个论坛中有很多 ASP.NET 控件。如果我更改浏览器中的值并回发。在 C# 中显示它需要 2 次回发，这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:35:10.633

您是否在重新填充控件之前保存了值？如果不是，您的控件可能会显示陈旧的值，然后您保存，因此直到*第二次*回发和随后的渲染您才能看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:12:19.350

事实证明，我正在重新加载事件控件，该事件会在数据到达 Page_Load 之前刷新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:41:59.797

您是否确保在保存更改后再次调用您的 Binding 方法？如果不是，则您的页面正在回发，但使用的是在您保存更改之前它拥有的原始 ViewState。一个典型的过程看起来像这样。

```
// In your page load
if (!Page.IsPostBack())
{
   BindData();   // This calls the binding method the first time you hit the page.
}

// In your button click event
if (Page.IsValid())
{
   UpdateData();
   BindData();   // If you don't call this method, you'll post back, but not rebind.
}

// In your BindData method
txtThis.Text = data.this;
txtThat.Text = data.that; 
```

# css - CSS显示一个恒定的背景来掩盖

> ID：11695241
> 
> 赞同：1
> 
> 时间：2012-07-27T20:30:46.633
> 
> 标签：css, background

我想知道当用户向下滚动页面时如何让页面内容在背景图像上滚动。下面是一个链接，可以更好地理解我在说什么。我不在乎视频，也许只用一张图片就可以了。你会如何使用 CSS3 做到这一点？你能用 CSS2 做到这一点吗？

[链接在这里](http://twodoorcinemaclub.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:33:53.010

这是你要找的吗？

```
background-attachment: fixed; 
```

该属性在 CSS2 和 CSS3 中。定义背景图像，使用`background-attachment: fixed`并将页面内容放置在足够低的位置以使背景图像可见。

# python - __slots__ 和未绑定的方法

> ID：11695243
> 
> 赞同：0
> 
> 时间：2012-07-27T20:30:57.380
> 
> 标签：python, class, immutability, slots

**我需要一个关于slot**的小帮助。

```
class bstream(object):
  __slots__ = ['stream']
  stream = string()

  def __new__(self, stream, encoding=None):
    if encoding == None:
      encoding = ENCODING['default']
    if isinstance(stream, bytes):
      self.stream = stream.decode(encoding)
    elif isinstance(stream, string):
      self.stream = stream
    else: # if unknown type
      strtype = type(stream).__name__
      raise(TypeError('stream must be bytes or string, not %s' % strtype))
    return(self)

  def __repr__(self):
    '''bstream.__repr__() <==> repr(bstream)'''
    chars = ['\\x%s' % ('%02x' % ord(char)).upper() for char in self.stream]
    result = ''.join(chars)
    return(result)

  def func(self):
    return(1) 
```

不要与那些字符串类型和 ENCODINGS 字典混淆：它们是常量。问题是以下命令无法按我的预期工作：

```
>>> var = bstream('data')
>>> repr(var)
<class '__main__.bstream'> # Instead of '\\x64\\x61\\x74\\x61'
>>> var.func()
TypeError: unbound method func() must be called with bstream instance as first argument (got nothing instead) 
```

怎么了？我真的很想让我的班级不可变，所以删除**插槽**的解决方案真的不是很好。：-） 非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T20:33:24.377

你想用`__init__`，没有`__new__`。

`__new__`是一个类方法，其第一个参数（self）是*类*对象，而不是新创建的对象。它必须返回新对象。你通常不想重新定义它，但如果你想做一些事情，比如返回一个现有的对象，你可以这样做。

`__init__`是一个常规的实例方法，第一个参数（self）是新创建的实例。它像其他语言中的构造函数一样工作。

要解决此问题，请将方法名称更改为`__init__`并删除最后一行 ( `return(self)`)。`__init__`. 必须始终返回`None`；返回任何其他结果都会导致`TypeError`.

# java - 阻塞给定对象上的所有线程

> ID：11695244
> 
> 赞同：1
> 
> 时间：2012-07-27T20:30:58.713
> 
> 标签：java, concurrency

我基本上需要为我正在处理的当前项目编写一个锁，当连接失败时，调用给定方法的所有线程都应该挂起，直到重新建立连接。

如何在 Java 中再次执行此操作？自从我不得不处理这个问题以来已经有一段时间了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:56:57.193

您可以等待方法内的[条件](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Condition.html)。条件类似于：

```
while (!conn.isConnected) condition.await() 
```

当然，除了这个伪代码之外，还有很多其他的东西。

您可能还想阅读所谓的[断路器模式](http://timross.wordpress.com/2008/02/10/implementing-the-circuit-breaker-pattern-in-c/)。有点啰嗦，但它的目标是管理可能失败的集成点，比如您与数据库的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:46:46.403

在重新建立连接之前，您不能不从该方法返回吗？实际实现将取决于此方法以及如何管理此连接。您可以`wait()`在一个对象上，当另一个负责重新连接的线程重新建立连接时，调用`notify()`解除阻塞该方法。这样，任何调用该方法的东西都会阻塞，因为当连接断开时该方法永远不会返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:51:15.763

您可以使用[Object 类](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#notifyAll%28%29)的wait() 和 notifyAll() 方法：

```
public final void wait(long timeout) throws InterruptedException 
```

> 导致当前线程等待，直到另一个线程为此对象调用 notify() 方法或 notifyAll() 方法，或者经过了指定的时间量。

```
 public final void notifyAll() 
```

> 唤醒正在此对象的监视器上等待的所有线程。线程通过调用其中一个等待方法在对象的监视器上等待。

但是，这绝不是向您开放的唯一解决方案。[Java中](https://www.google.com/search?hl=en&q=java%20synchronization%20mechanisms)还有其他的同步机制

# jquery - 在单选按钮选择的输入字段上禁用日历

> ID：11695248
> 
> 赞同：1
> 
> 时间：2012-07-27T20:31:26.983
> 
> 标签：jquery, jquery-ui

我有一个带有 ui 日历的输入框。我想要`disable`该`input`框，以便日历不会在`focus`鼠标用户的输入字段中打开。

我曾经`$('#enddate').attr('readonly', true);`禁用输入框，但单击输入框仍会打开日历。

我使用的代码片段如下：

```
$('.starttime').click(function(){
    atype=$('input:radio[name=startdate]:checked').val();

    if(atype==2){
        $('#enddate').attr('readonly', true);
    }
    else
        $('#enddate').attr('readonly', false);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:34:36.830

试试这个人： http: [//jsfiddle.net/4U7BS/](http://jsfiddle.net/4U7BS/) 这个演示中**的额外内容 -** [http://jsfiddle.net/VjadE/](http://jsfiddle.net/VjadE/)（从日期开始不会打开日历，因为它的`disabled`和字段会，我想这就是你想要的`:)`

我希望你的 DOM 和 rest Jquery 是正确的！

希望对事业有帮助！

**代码**

```
$("#enddate").prop("disabled",true); 
```

启用

```
$("#enddate").prop("disabled",false); 
```

# html - 如何在点击可访问性时显示/阅读所描述的信息？

> ID：11695254
> 
> 赞同：0
> 
> 时间：2012-07-27T20:31:52.120
> 
> 标签：html, onclick, accessibility, wai-aria

我有一个帮助链接可以切换我的`<p id="hlp">`元素。在这些元素之间有一个复选框区域。我需要在链接点击时提供帮助信息（阅读 p），而不是在焦点上。

```
<form name="name">
  <fieldset>
  <legend>legend</legend>
  <a class="help" title="help-button" href="#" aria-describedby="hlp" >Help</a>
  <div class="check">
     <label class="radio">10</label><input type="radio" name="p-v">
     <label class="radio">20</label><input type="radio" name="p-v">
     <label class="radio">Input</label><input type="radio" name="p-v">
  </div>
  <div class="expln">
     <p id="hlp" aria-hidden="false">Help info: Lorem ipsum blah blah blah</p>
  </div>
</fieldset>
</form> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:50:47.123

aria- describeby 属性标识描述对象的元素，因此根据您的问题，帮助信息实际上并不代表帮助链接，当您说它应该仅在单击时可用而不是在焦点上时，它基本上所做的是控制另一个由该链接激活并由其内容描述的区域。

所以理想情况下你应该做这样的事情：

```
<a class="help" title="help-button" href="#" role="button" aria-controls="hlp">Help</a>
<div class="expln" id="hlp" tabindex="-1" role="region" aria-label="Help Info" aria-expanded="true" style="display: block; ">
   <p>Help info: Lorem ipsum blah blah blah</p>
</div> 
```

因此，像 JAWS 这样的屏幕阅读器现在只会在单击按钮时读取该区域的内容。

而且我已将链接标记为 role="button" 因为浏览器焦点没有改变并且页面位置保持不变。

也可以看看：

*   [http://www.w3.org/TR/wai-aria/roles#button](http://www.w3.org/TR/wai-aria/roles#button)
*   [http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls](http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls)

# ruby-on-rails-3 - Rails 远程开发服务器 iPad/笔记本电脑演示

> ID：11695256
> 
> 赞同：0
> 
> 时间：2012-07-27T20:31:58.677
> 
> 标签：ruby-on-rails-3, ipad, remote-access, demo

我有一个 Rails 应用程序通过 localhost 在远程 Linux 桌面上运行。当我离开桌面参加商务会议等时，我希望能够进行现场演示，而无需经历推送到生产服务器的麻烦。我想知道是否有人知道一种方法可以远程连接到我的桌面并在另一台设备上运行我的 Rails 应用程序，就好像它在本地运行一样？有问题的远程设备可能是 iPad 或上网本。

如果我的应用程序很重要，它就位于 Github 存储库中，考虑到这一点，在 iPad 上启动并运行并下载存储库会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:45:12.853

我不确定 ipad 上的 safari 是否支持它，但对于上网本场景，我认为通过[ssh 隧道](https://calomel.org/firefox_ssh_proxy.html)代理可能效果最好（我假设你不想处理图形遥控器所涉及的延迟桌面连接）。

您还可以部署到像 heroku 这样的替代环境，或者在某个地方临时提供一个可公开访问的 VM 以用于演示目的。

# ruby-on-rails - 我什么时候应该验证 ActiveRecord 关联对象与其 id 的存在？

> ID：11695262
> 
> 赞同：11
> 
> 时间：2012-07-27T20:32:23.980
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有一个 ActiveRecord 关联，例如：

```
class City < ActiveRecord::Base
  belongs_to :state
end 
```

没有国家的城市应该是无效的。似乎这两个都是可能的验证：

```
validates :state,    presence: true
# OR
validates :state_id, presence: true 
```

我猜它们是相同的，因为：

*   `belongs_to`创建方法`state`和`state=`
*   `state=`设置`state_id`

但是，我刚刚通过更改它以检查 id 而不是对象来修复失败的规范。

这两种验证方式都可以接受吗？如果是这样，您什么时候使用其中一种？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T20:43:10.973

`validates :state`将使用从城市到州的关系（belongs_to）以及外键，而`validates :state_id`单独使用列 state_id 并查看它是否有任何值。

我首选的方法是验证`state`（关系），因为这需要密钥和关系都存在。

验证 state_id 将起作用，因为它将确保存在状态 id，但它不会检查代码的有效性，即对于 City 中的任何给定状态键，状态实际上“存在”。

基本上如果 City 中使用的外键（用于 state_id）都作为 State 中的实际记录存在，效果是一样的。如果您的状态代码无效，差异将显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:20:05.357

如果你做了类似的事情怎么办

```
s = State.new
c = City.new
c.state = s
c.valid? 
```

我还没有尝试过，但我猜，如果你正在检查 c.state_id 的存在，它将会丢失，即使 c 确实有一个状态（因为尚未生成 ID，因为状态尚未保存）。

也就是说，如果你关心的是状态的存在，你应该验证状态的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T14:52:58.653

就个人而言，我更喜欢让模型更健壮并接受或。因此，在您的特定情况下， City 可以接受`State`object 或 a `state_id`，但需要发送其中一个。

```
class City < ActiveRecord::Base
  attr_accessible :state, :state_id

  validates :state,    presence: true, if: proc{|c| c.state_id.blank? }
  validates :state_id, presence: true, if: proc{|c| c.state.blank?    }

  belongs_to :state
end 
```

**编辑：**删除了验证语句中的双重否定。原本有`unless: proc{|c| !c.state_id.blank? }`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-15T21:27:58.943

根据[Obie Fernandez 的 Rails 4 Way](https://rads.stackoverflow.com/amzn/click/com/0321944275)：

> 当您尝试确保存在关联时，请传递其外键属性，而不是关联变量本身

```
validates :region_id, :presence => true
validate :region_exists

def region_exists
  errors.add(:region_id, "does not exist") unless Region.exists?(region_id)
end 
```

这本书没有解释为什么你应该使用它而不是

```
validates :region, :presence => true 
```

但我知道这些人知道他们的东西。

# c# - 将 MS Access 数据库连接到目标计算机

> ID：11695267
> 
> 赞同：0
> 
> 时间：2012-07-27T20:32:33.540
> 
> 标签：c#, database, ms-access

我在客户端（我的程序将安装在该计算机上的计算机）中连接我的数据库时遇到问题，我从[*这里*](https://stackoverflow.com/questions/11028468/change-connection-string-after-creating-setup-file-in-c-net)找到了一种方法，但是当我尝试转到我的数据库文件时，我什么也看不到！这很奇怪，因为当我再次运行程序时，我看到了变化！请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:32:20.167

我希望您在应用程序主动连接到数据库时不要检查文件。

可能您的连接保持打开状态，直到应用程序关闭。打开和关闭每个数据库访问的连接。

# c# - 如何修复“无法隐式转换类型 Generic.IEnumerable”的错误消息 ' 到 ' 通用列表 "

> ID：11695270
> 
> 赞同：0
> 
> 时间：2012-07-27T20:32:45.957
> 
> 标签：c#, asp.net, linq, list, generics

为什么我会收到此错误消息：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Collections.Generic.List”

当我构建此代码时：

```
 List<BALHotelList> searchresult=from a in bh
                join b in hr on a.HotelCode equals b.hotelCode
                orderby a.HotelName
                select new BALHotelList
                    {
                       HotelCode= a.HotelCode,
                       ImageURL_Text = a.ImageURL_Text,
                       HotelName = a.HotelName,
                       StarRating = a.StarRating,
                       HotelAddress = a.HotelAddress,
                       Destination = a.Destination,
                       Country = a.Country,
                       HotelInfo = a.HotelInfo,
                       Latitude = a.Latitude,
                       Longitude = a.Longitude,
                       totalPrice = b.totalPrice,
                       totalPriceSpecified = b.totalPriceSpecified,
                       totalSalePrice = b.totalSalePrice,
                       totalSalePriceSpecified = b.totalSalePriceSpecified,
                       rooms = b.rooms

                    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T20:35:18.330

从 LINQ 语句返回的类型是 IEnumerable，而不是 List。

如果你真的必须将它作为一个列表，那么将 () 放在整个 "From a in.... 以选择新的 xxx {};) 并首先在结果上调用 ToList() 。

否则，请执行“var searchresult = ....”，您仍然可以在“searchresult”变量上进行 foreach。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:35:41.590

您可能只需要用一些括号包裹您的 linq 并在结果上调用 .ToList ：

```
List<BALHotelList> searchresult= (from a in bh
            join b in hr on a.HotelCode equals b.hotelCode
            orderby a.HotelName
            select new BALHotelList
                {
                   HotelCode= a.HotelCode,
                   ImageURL_Text = a.ImageURL_Text,
                   HotelName = a.HotelName,
                   StarRating = a.StarRating,
                   HotelAddress = a.HotelAddress,
                   Destination = a.Destination,
                   Country = a.Country,
                   HotelInfo = a.HotelInfo,
                   Latitude = a.Latitude,
                   Longitude = a.Longitude,
                   totalPrice = b.totalPrice,
                   totalPriceSpecified = b.totalPriceSpecified,
                   totalSalePrice = b.totalSalePrice,
                   totalSalePriceSpecified = b.totalSalePriceSpecified,
                   rooms = b.rooms

                }).Tolist(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T20:36:25.033

如果您想要一个列表，您需要将 Linq 查询包装在括号中并调用`.ToList()`.

# python - 在 Python 中使用 XPath 提取属性的值

> ID：11695271
> 
> 赞同：2
> 
> 时间：2012-07-27T20:32:46.907
> 
> 标签：python, xml, xpath, lxml

我有 HTML：

```
<table>
<tbody>
<tr>
<td align="left" valign="top" style="padding: 0 10px 0 60px;">
<img src="/files/39.jpg" width="64" height="64">
</td>
<td align="left" valign="middle"><h1>30 Rock</h1></td>
</tr>
</tbody>
</table> 
```

使用 Python 和 LXML 我需要从元素的属性`src`中提取值。`<img>`这是我尝试过的：

```
import lxml.html
import urllib

# make HTTP request to site
page = urllib.urlopen("http://my.url.com")
# read the downloaded page
doc = lxml.html.document_fromstring(page.read())

txt1 = doc.xpath('/html/body/table[2]/tbody/tr/td[1]/img') 
```

当我打印时，`txt1`我只得到空列表`[]`。我该如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:49:53.467

使用这个 XPath：

```
//img/@src 
```

它将提取上下文节点`src`的所有后代`img`元素的属性。

# wcf - MonoTouch、WCF、大型 XML 响应，如何捕获进度

> ID：11695275
> 
> 赞同：1
> 
> 时间：2012-07-27T20:33:17.487
> 
> 标签：wcf, mobile, xamarin.ios, behavior

我正在使用 MonoTouch 开发应用程序，并且必须从 3rd 方网络服务获取一些数据。我有一个 WCF 绑定来执行此操作。

我正在调用的特定 Web 服务方法可能会返回数百兆字节范围内的 XML 字符串，这可能需要一段时间才能下载到移动设备。

我正在寻找某种方法来捕获在系统级别从网络读取了多少字节，最终游戏是向用户显示进度指示器。有什么方法可以使用行为来实现这一点吗？

请注意，我没有任何方法可以修改 Web 服务代码以返回 Stream 对象，这是我发现的大多数文章都需要做的。

任何帮助或方向将不胜感激。谢谢

作为最后的手段，我总是可以使用 NSURLConnection 来代替 WCF，因为我知道有 NSURLConnectionDelegate 方法可以提供这一点。我想避免使用 NSURLConnection，以便将来可以轻松地将这段代码放入 Android 项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:18:01.717

是否有理由使用 WCF 而不是普通的 HttpWebRequest？

WCF 在解析数据方面效率不高，它会在内存中保留多个副本以反序列化各种信息块。

没有可以提供此信息的系统级 API，您从 HttpWebRequest 返回的 Stream 是您将获得的最佳价值。

# android - 当可见性设置为消失时如何重新排列gridview子项？

> ID：11695278
> 
> 赞同：4
> 
> 时间：2012-07-27T20:33:44.037
> 
> 标签：android, gridview

我通过将其可见性设置为从 gridview 隐藏一个孩子`View.GONE`。问题是，即使我将它设置为 GONE，它也会变得不可见，但仍然存在它所在的位置。

是否可以重新排列gridview，使隐藏的元素不占用布局中的任何空间？

```
<GridView
    android:id="@+activity_queues/gv_queue1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnWidth="200dp"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit"
    android:padding="10dp"
    android:stretchMode="none"
    android:verticalSpacing="10dp" >
</GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:50:26.247

要从 GridView 中删除单个项目，您必须将其从适配器或 GridView 的数据源中删除。正如您所发现的，因为更改单元格的可见性不会重新排列您的布局，它只会显示该项目的空白单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T10:33:46.977

我自己也在努力解决这个问题。奇怪的是，文档提供了这个确切的场景，但是，经过试验，它不起作用：

[https://developer.android.com/reference/android/widget/GridLayout.html](https://developer.android.com/reference/android/widget/GridLayout.html)

它指出：

*“出于布局目的，GridLayout 将可见性状态为 GONE 的视图视为宽度和高度为零。这与忽略完全标记为 GONE 的视图的策略略有不同。例如，如果一个标记为 GONE 的视图是单独的在一个列中，当且仅当在视图上没有定义重力时，该列本身将折叠为零宽度。如果定义了重力，则标记为消失的视图对布局没有影响，并且容器的布局应该像视图从未添加到其中。在多余的空间分配期间，GONE 视图的权重为零。这些语句同样适用于行和列，以及行或列组。*

有人找到更好的解决方案了吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T20:41:46.840

GONE 应该完全删除它，根据文档和我的经验，它不再占用任何空间。那么，如果是，那么可能是由于 GridView 上方和下方元素的填充或边距？

# c# - 将 C# 中的 3 个数据表导出到 Excel 工作簿

> ID：11695280
> 
> 赞同：0
> 
> 时间：2012-07-27T20:33:53.487
> 
> 标签：c#, excel, datatable

我在 C# 中有 3 个单独的数据表我想导出到一个 Excel 工作簿，每个都在不同的工作表上。是否有捷径可寻？我曾考虑将表添加到单个数据集中，但这似乎不可能。我写了一个方法，可以将单个 dataTable 转换为 csv 文件，但这不适用于多个表。谢谢！

我使用了第一个链接，它正在创建一个 Excel，但后来它崩溃了，原因有两个： 它调整列大小的方式不起作用：

```
// Resize the columns 
oRange = oSheet.get_Range(oSheet.Cells[1, 1],
    oSheet.Cells[rowCount, dt.Columns.Count]); 
```

我添加了这个来制作第二张纸，但它没有用：

```
Excel.Worksheet sheet2;
oWB.Sheets.Add(name[1], Type.Missing, Type.Missing, Type.Missing); 
sheet2 = (Excel.Worksheet)oWB.Sheets[1]; 
```

我可以弄清楚如何修复我的代码并添加另一张工作表，但有谁知道为什么调整大小的列不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:42:39.960

[http://msmvps.com/blogs/deborahk/archive/2009/07/23/writing-data-from-a-datatable-to-excel.aspx](http://msmvps.com/blogs/deborahk/archive/2009/07/23/writing-data-from-a-datatable-to-excel.aspx)

只需添加另一个工作表并将第二个和第三个表导出到新工作表

另一个包含详细信息的链接：

[C# 如何以编程方式添加 Excel 工作表 Office XP / 2003](https://stackoverflow.com/questions/193092/c-sharp-how-to-add-excel-worksheet-programatically-office-xp-2003)

确保你赶上回报。

```
xlNewSheet = (Worksheet)xlSheets.Add(xlSheets[1], Type.Missing, Type.Missing, Type.Missing); 
```

# css - 列表中的独立自动宽度

> ID：11695283
> 
> 赞同：0
> 
> 时间：2012-07-27T20:34:26.577
> 
> 标签：css

如何在列表中制作独立的自动宽度？现在，如果我在*ul*中为*li设置**width:auto*，则*li*扩展为 100%。我怎样才能达到像下面这样的自动宽度？

 ***![目标](../Images/12ed751ec0cd05a27d2f0f059063dc45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:41:29.960

您可以使用`float`和`clear`属性：

```
li {
    background: #999;
    clear:left;
    float:left;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6gvew/1/)*****

# html - IE8 在 IE8 标准兼容模式下无法正确呈现

> ID：11695288
> 
> 赞同：1
> 
> 时间：2012-07-27T20:34:50.610
> 
> 标签：html, css, internet-explorer-8

我使用以下标记创建了一些嵌套表，其中第一个表包含行的示例。span 内部 HTML 最终被用户通过下拉菜单选择的图像替换。

```
<table class="outer">
<tr>
    <td>
        <table class="column" id="left_column">
            <tr>
                <td>
                    <table class="cell" id="t1">
                        <tr>
                            <td>
                                <asp:Literal runat="server" ID="t1r2c1" />
                            </td>
                            <td class="image">
                                <span id="s1" runat="server">
                                    <asp:PlaceHolder ID="p1" runat="server">
                                    </asp:PlaceHolder>
                                </span>
                            </td>
                            <td>
                                <asp:Literal runat="server" ID="t1r2c3" />
                            </td>
                            <td class="gray">
                                <asp:Literal runat="server" ID="t1r2c4" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="cell" id="t2">
                        <!-- ... -->
                    </table>
                </td>
            </tr>
        </table>
    </td>
    <td>
        <table class="column" id="rightColumn">
            <!-- ... -->
        </table>
    </td>
</tr>
</table> 
```

这是相关的CSS：

```
.outer
{
    border: none;
    margin-left: auto;
    margin-right: auto;
}
.outer td
{
    vertical-align: top;
}
.column
{
    border: none;
}
#rightColumn table, #leftColumn table
{
    width: 100%;
}
.cell
{
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
    overflow: hidden;
}
.cell td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
    padding-left: 3px;
    padding-right: 3px;
    padding-top: 0px;
    padding-bottom: 0px;
    font-size: 10pt;
}
.cell .image
{
    padding: 0;
    margin: 0;
    height: 20px;
    width: 65px;
} 
```

下面是它在标准遵从模式下在 IE8 中的显示截图：

![在此处输入图像描述](../Images/0a95349defcda2f4fb9dc1291dad3728.png)

请注意，在右侧列的第 3 和第 4 个表中，最右侧的图像字段具有任意宽度（在图像的任一侧显示空白），尽管这些单元格都是 class="image" 并且应该具有固定宽度为 65px。DOCTYPE 声明是呈现的 HTML 的第一行，我在开发人员工具中检查了 IE8 的模式符合标准。

我真的很想修复这两个表格单元格。任何建议表示赞赏。

问候。

编辑：这是受影响表的 HTML：

```
<table class="cell" id="t5">
    <tr><th colspan="9"><strong><asp:Literal runat="server" ID="t5r0c0" /></strong></th></tr>
    <tr><td class="orange" colspan="4"><asp:Literal runat="server" ID="t5r1c0" /></td><td class="blue" colspan="4"><asp:Literal runat="server" ID="t5r1c4" /></td><td class="blue span2" rowspan="2"><asp:Literal runat="server" ID="t5r1c8" /></td></tr>
    <tr><td class="blue" colspan="2"><asp:Literal runat="server" ID="t5r2c0" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t5r2c2" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t5r2c4" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t5r2c6" /></td></tr>
    <tr><td class="green" colspan="2"><asp:Literal runat="server" ID="t5r3c0" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t5r3c2" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t5r3c4" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t5r3c6" /></td><td class="image"><span id="s21" runat="server"><asp:PlaceHolder ID="p21" runat="server"></asp:PlaceHolder></span></tr>
</table>

<table class="cell" id="t6">
    <tr><th colspan="9"><strong><asp:Literal runat="server" ID="t6r0c0" /></strong></th></tr>
    <tr><td class="orange" colspan="4"><asp:Literal runat="server" ID="t6r1c0" /></td><td class="blue" colspan="4"><asp:Literal runat="server" ID="t6r1c4" /></td><td class="blue span2" rowspan="2"><asp:Literal runat="server" ID="t6r1c8" /></td></tr>
    <tr><td class="blue" colspan="2"><asp:Literal runat="server" ID="t6r2c0" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t6r2c2" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t6r2c4" /></td><td class="blue" colspan="2"><asp:Literal runat="server" ID="t6r2c6" /></tr>
    <tr><td class="green" colspan="2"><asp:Literal runat="server" ID="t6r3c0" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t6r3c2" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t6r3c4" /></td><td class="green" colspan="2"><asp:Literal runat="server" ID="t6r3c6" /></td><td class="image"><span id="s22" runat="server"><asp:PlaceHolder ID="p22" runat="server"></asp:PlaceHolder></span></td></tr>
</table> 
```

编辑：将 style="width: 100%" 添加到所有 colspan=2 元素：

![在此处输入图像描述](../Images/9191b4e80660b2502aaaad32efc3c0aa.png)

这样做的效果在两个受影响的表上是不同的。第一列大大扩展，而其他列大大减少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:54:35.223

几个想法

我注意到它是Intranet。您提到“模式”是 IE8 标准 - 是浏览器**和**文档吗？IE8在内[网模式下会做](https://stackoverflow.com/questions/2742853/force-internet-explorer-8-browser-mode-in-intranet)*奇怪*的事情。

不确定这是否是一个错字，但表 t5 没有关闭最后一个`<td>`

当您设置图像占位符的内容时，任何空格都没有机会进入标记？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T01:38:48.827

该问题可能与已`colspan`设置的其他表格单元格有关。尝试在其他单元格上设置宽度，如对此问题的回答：[Internet Explorer 8 table cell width bug with colspan set](https://stackoverflow.com/questions/2412692/internet-explorer-8-table-cell-width-bug-with-colspan-set)

# gps - Java.net.SocketException 连接重置 GPS

> ID：11695290
> 
> 赞同：0
> 
> 时间：2012-07-27T20:35:01.490
> 
> 标签：gps, connection, reset

我知道这个问题已经被问过了，但是给那个人的答案是使用 read()，直到 EOF。我应用了这个答案，我的服务器仍然发送“连接重置”。对于那些不熟悉这个问题的人，我正在尝试将安装在我车上的 GPS 连接到我的服务器。它适用于 SMS 和 GPRS 命令，因此想法是成功连接设备。这是代码：

这是我的客户套接字管理器

```
package tcp.clientservermodel;

import java.net.*;
import java.io.*;

public class ClientSocketManager extends Thread{

    Socket client_socket_;
    InputStream input_;
    OutputStream output_;
    ClientSocketCaller caller_;

    public ClientSocketManager( ClientSocketCaller caller,Socket incoming_socket){
        this.caller_=caller;
        this.client_socket_=incoming_socket;
        this.start();
    }

    public void run(){
        try{
            input_=this.client_socket_.getInputStream();
            output_=this.client_socket_.getOutputStream();
            int incoming_char=0;
            StringBuffer incoming_message=new StringBuffer();
            while((incoming_char=input_.read())!=-1){
           //     System.out.println(incoming_message.toString());
                    if(incoming_char=='\n'){ ProcessMessage(this. client_socket_.getInetAddress().toString()+": "+incoming_message.toString());
                    incoming_message=new StringBuffer();
                }else{
                    incoming_message.append((char)incoming_char);
                }
            }
        }catch(Exception err){

        }
    }

    public boolean SendMessage(String message){
        boolean success=true;
        try{
           this.output_.write(("123456G").getBytes());
        }catch(Exception err){
            success=false;
        }
        return success;
    }

    public void ProcessMessage(String message){
        System.out.println(message);
        caller_.MessageHasBeenRecieved(message);
    }

} 
```

服务器套接字管理器：

```
package tcp.clientservermodel;

import java.net.*;
import java.io.*;
import java.util.*;

public class ServerSocketManager extends Thread
        implements ClientSocketCaller{

    int port_;
    ServerSocket server_socket_;
    public boolean is_enabled_=true;
    Vector client_sockets_vector_=new Vector();

    public ServerSocketManager(int port){
        this.port_=port;
        this.start();
    }

    public void run(){
        try{
            this.server_socket_=new ServerSocket(port_);

            while(is_enabled_){
                Socket client_socket=this.server_socket_.accept();
                System.out.println("Connection Succesful "+client_socket.getInetAddress().toString());
                this.client_sockets_vector_.add(new ClientSocketManager(this,client_socket));
            }
        }catch(Exception err){
            System.out.println(err +"   3");
        }
    }

    public void MessageHasBeenRecieved(String message) {
        for(int i=0;i<this.client_sockets_vector_.size();i++){
            ClientSocketManager current=(ClientSocketManager)this.client_sockets_vector_.get(i);
            if(current!=null){
                current.SendMessage(message);
            }
        }
    }

} 
```

这是客户端套接字调用程序

```
package tcp.clientservermodel;

public interface ClientSocketCaller {

    public void MessageHasBeenRecieved(String message);

} 
```

错误位于此行

(incoming_char=input_.read())!=-1

输出是

java.net.SocketException 连接重置

我需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:53:32.617

我解决了这个问题...我使用 Wireshark 查看服务器和 GPS 之间的包。所以我注意到 Wireshark 中“win”参数的大小在两个流之间是不同的。从 GPS => win = 10880，从服务器 => win = 8019。我只是更改了服务器的 win 元素并工作了！！！！

# java - 动态设置 JPA 持久性属性

> ID：11695291
> 
> 赞同：12
> 
> 时间：2012-07-27T20:35:07.247
> 
> 标签：java, hibernate, jpa, jpa-2.0

假设我有以下persistence.xml，其中连接url、用户和密码都是硬编码的。

以下是针对 Hibernate 3.2 的。对于 Hibernate 3.5 ++，我们必须将“hibernate.connection”更改为“javax.persistence”。但是让我问这个问题，不管文字“hibernate.connection”还是“javax.persistence”。

```
<persistence-unit name="obamacare" transaction-type="RESOURCE_LOCAL">
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  <exclude-unlisted-classes>false</exclude-unlisted-classes>
  <properties>
    <property name="hibernate.archive.autodetection" value="class, hbm"/>
    <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="hibernate.connection.url" value="blah blah blah"/>
    <property name="hibernate.connection.username" value="careuser"/>
    <property name="hibernate.connection.password" value="carepass"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/>
    <property name="hibernate.show_sql" value="true"/>
  </properties>
  </persistence-unit>
</persistence> 
```

但是，我们需要动态设置 url、用户和密码。有一个提议的身份验证服务器，它提供 url、用户和密码。这样我们就不需要单独配置无数使用某种形式的 jdbc、hibernate 或 JPA 的 webapp。除了不想在可见文本文件上存储/管理密码的安全问题。

就 JPA 而言，如何动态设置这些 JPA 属性？我正在寻求两组答案：

1.  对于独立于 JPA 供应商的解决方案（toplink、eclipselink、hibernate 等）——是否有任何 JPA 功能可以让我动态设置这三个属性？

2.  如果允许我完全依赖 Hibernate，除了可能的 JPA 唯一途径之外，还有没有办法在不涉及 Spring 框架的情况下实现这一点（这似乎是一个到处都是触手的巨大怪物）？

如果您还希望在 JNDI 上投入两美分/英镑/卢比以及如何使用它来替换 persistence.xml 属性的功能，我会很高兴。但是，这不是问题的优先级。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T23:11:31.740

这取决于您如何引导 EntityManagerFactory。2 个规范定义的方法都允许您传入 java.util.Map 值。这些值应该优先于持久性单元中定义的值。

在“SE 方法”中没有问题，因为引导过程通常由您的应用程序控制：`javax.persistence.Persistence#createEntityManagerFactory(String puName, Map config`. 现在，如果其他东西（咳咳，Spring）为您“管理”EMF，您可能会遇到问题......

在“EE 方法”中，我不知道一个好的全局方法。这个 Map of values 仍然存在于 bootstrapping 中，但问题是 EE 容器是调用这个方法的那个。

在这两种情况下都可以使用的一种特定于 Hibernate 的方法是使用配置变量替换。因此，在您的持久性单元中，您将使用定义用户名或密码，`${some.key}`而 Hibernate 将为您替换它们。这是否真的有效取决于您最终要如何设置这些值；Hibernate 仍然需要访问为此命名的配置值`some.key`才能工作...

另一个“全局方法”......引导 EMF 的“EE 方法”是让容器实例化 javax.persistence.spi.PersistenceProvider 并调用它的 javax.persistence.spi.PersistenceProvider#createContainerEntityManagerFactory。createContainerEntityManagerFactory 在这里有一个有趣的签名。本质上，它传递了一个 javax.persistence.spi.PersistenceUnitInfo，它是已解析持久性单元的对象表示以及一些其他内容。一种选择是使用这种方法来引导并传入您构建自己的 javax.persistence.spi.PersistenceUnitInfo 的实例。javax.persistence.spi.PersistenceProvider 是一个接口。要实例化它，您需要知道您想要使用的提供者以及他们的 impl 的 FQN。

您专门询问 JDBC 连接创建/池。您可以在那里专门选择其他选项。您可以让您的“凭证服务”创建数据源，而您的 JPA 提供者只需使用该数据源。所有 JPA 提供程序都支持通过 JNDI 查找定位数据源。在“EE 引导”中，提供者也可以通过 PersistenceUnitInfo#getJtaDataSource 和/或 PersistenceUnitInfo#getNonJtaDataSource 传递数据源以使用。Hibernate 交替接受一个 DataSource 实例来代替典型的 DataSource JNDI 名称设置。如果您不想使用 DataSource（出于某种奇怪的原因），则特定于 Hibernate 的替代方法是自己实现 Hibernate 的 ConnectionProvider 契约，这是 Hibernate 用于在需要时获取和释放 JDBC 连接的契约（接口）。

很多选择:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T21:09:46.703

对于您的第二个问题，我可以提供仅 Hibernate 的解决方案。

```
package dev.stackoverflow;

import java.util.Properties;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class DynamicHibernateSessionFactory {
    public Session setProperties(final String provider,
                                 final Boolean excludeUnlisted,
                                 final Properties properties) {
        properties.setProperty("provider", provider);
        properties.setProperty("exclude-unlisted-classes", excludeUnlisted.toString());
        Configuration configuration = new Configuration();
        configuration.setProperties(properties);
        SessionFactory sessionFactory = configuration.configure().buildSessionFactory();
        return sessionFactory.openSession();
    }
} 
```

# c# - Visual Studio Intellisense 错误或功能？

> ID：11695292
> 
> 赞同：0
> 
> 时间：2012-07-27T20:35:09.290
> 
> 标签：c#, visual-studio, intellisense

我不知道这是 Visual Studio 中的错误或功能，但我发现至少在我的 VS 2010 上，如果我有课说：

```
public class Person
{
  public int Age { get; set; }
  public string Name { get; set; }
} 
```

然后我有`List<Person>`并且我想做如下的集合初始化：

```
public static List<Person> Persons = new List<Person>
{
  new 
}; 
```

如您所见，它没有提供`Person`对象初始化程序，即使我按`ctrl + space`，它也没有出现。

有人对此有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:38:34.680

我会说这更像是一个缺点而不是一个错误。它在 2012 RC 中也不起作用。

[这是提交建议的链接：](http://visualstudio.uservoice.com/forums/121579-visual-studio)

# php - 当我启动管理部分时站点冻结

> ID：11695302
> 
> 赞同：1
> 
> 时间：2012-07-27T20:35:34.897
> 
> 标签：php, debugging, magento, caching, reindex

该网站真的很快。我创建了一个脚本来每秒检查网站的速度。结果。

```
FAST - 17:41:54: 0.287875890732
FAST - 17:41:55: 0.311651945114
FAST - 17:41:57: 0.264428138733
FAST - 17:41:58: 0.304912805557
FAST - 17:42:00: 0.321930885315
FAST - 17:42:01: 0.29382109642
FAST - 17:42:02: 0.289844989777
FAST - 17:42:04: 0.278220891953
FAST - 17:42:05: 0.31251001358
FAST - 17:42:07: 0.285416126251
FAST - 17:42:08: 0.290918111801
FAST - 17:42:09: 0.332083940506
FAST - 17:42:11: 0.266509056091
FAST - 17:42:12: 0.281701803207
FAST - 17:42:14: 0.275447845459 
```

我对速度很满意。但我有持续的问题，我不知道去哪里解决这个问题。启动管理员的那一刻，网站完全冻结。

结果

```
SLOW - 20:50:56: 2.04331302643
SLOW - 20:51:10: 12.8588819504
SLOW - 20:51:23: 12.3065569401
FAST - 20:51:25: 0.452680110931
FAST - 20:51:27: 0.337702989578
FAST - 20:51:28: 0.332473993301
SLOW - 20:51:42: 12.5140118599
SLOW - 20:53:43: 120.119220972
FAST - 20:53:45: 0.508615016937
FAST - 20:53:47: 0.520901203156
SLOW - 20:54:05: 16.9637360573
SLOW - 20:55:20: 73.9818410873
SLOW - 20:55:36: 14.3260159492
SLOW - 20:56:08: 30.5557489395
SLOW - 20:57:51: 102.450763941
FAST - 20:57:53: 0.282537937164
FAST - 20:57:55: 0.493069887161
FAST - 20:57:56: 0.322154998779
SLOW - 20:57:59: 2.06928992271
SLOW - 20:58:03: 2.24757194519
SLOW - 20:58:06: 2.02194190025
FAST - 20:58:10: 1.7101111412 
```

如您所见，我有一些超过 100 秒的负载。奇怪的是我完全没有错误。

该站点在带有 memcache 和 apc 的专用服务器上运行。我已经做了什么来尝试解决这个问题。

*   刷新缓存/Memcache APC。
*   重启服务器
*   重新索引所有数据
*   检查错误
*   尝试一些调试工具来查找问题

我不知道必须在哪里搜索才能找到问题。

我唯一没有做的是删除数据库中的所有会话。前端会话和管理员会话之间有区别吗？

是否有任何工具/扩展来查找问题以便我可以解决它？

# c# - 动态插入的另一个用户控件中的用户控件

> ID：11695308
> 
> 赞同：1
> 
> 时间：2012-07-27T20:35:52.540
> 
> 标签：c#, asp.net, .net, dynamic-usercontrols

我有一个构建页面的引擎（必须）称为`engine.aspx`. 我只是指向一个用户控件并`engine.aspx`为我构建我需要的一切。但这一次，我必须在主用户控件中放置另一个 userControl。如果我在普通 aspx 中打开控件，一切正常！但是如果我尝试用引擎打开，第二个控件的事件不起作用。有谁知道为什么？

* * *

我以这种方式添加第一个控件：

```
form.Controls.add(controlName); 
```

第二个控件已经在第一个控件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:51:55.260

欢迎来到 SO！

有几件事要检查：

1.  确保控件正在页面的 Init 事件中加载，以便正确初始化。

2.  我不确定您是如何获得控件的，但您可能需要在添加之前调用[LoadControl 。](http://msdn.microsoft.com/en-us/library/t9ecy7tf.aspx)

3.  确保在添加控件之前已为其分配了 ID。

4.  我总是确保在添加控件之前将 EnableViewState 设置为 true，但在您的情况下这可能是必要的，也可能不是必需的。

# python - Django - 网址模式正则表达式与带重音符号的字符串参数不匹配

> ID：11695321
> 
> 赞同：3
> 
> 时间：2012-07-27T20:37:00.540
> 
> 标签：python, django

我在将带有重音符号的字符串参数传递给我的 Django 应用程序时遇到了一些问题。我有以下网址模式：

```
url(r'^galeria/(?P<page>\d+)/(?P<order>\w+)/(?P<query>[\w|\W]+)', 'possible_brastemp.views.gallery_with_page_and_query'), 
```

当我尝试这样的网址时：

```
 http://127.0.0.1:8000/galeria/1/ultimos/Julian%20Andr%E9s 
```

模式不匹配。我已将问题隔离到 '%E9' 字符（'%20' 不会破坏匹配）。

如何更改正则表达式以将参数与编码字符匹配？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:52:39.227

在 URL 中使用`%c3%a9`而不是。`%e9`正则表达式没有失败...... Django 甚至没有进入 urlconf。检查日志，您可能会收到 400 个错误。

URI 路径应仅包含 UTF-8 编码的字符。任何不能表示为正常的、可打印的 ASCII 字符（并且不在保留列表中）的 UTF-8 字符都应该进行百分比编码。

`é`(U+00E9) 是 UTF-8 中的多字节字符：`0xc3a9`。百分比编码的形式是`%C3%A9`. 单字节 0xe9 不是有效的 UTF-8 字符。

请参阅[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)。

`[\w|\W]+`成功匹配包含`%C3%A9`. Django 似乎将 URL 字节字符串百分比解码为 Unicode 字符串，然后将其转换为 UTF-8 以进行 urlconf 匹配。

# c++ - 使用指向二维数组的一维指针数组？

> ID：11695324
> 
> 赞同：0
> 
> 时间：2012-07-27T20:37:26.490
> 
> 标签：c++, arrays, pointers

所以我在做一个井字游戏，对于我的输入函数，我得到了玩家将移动存储为二维数组中的整数，输入是使用对指向位置的指针的一维数组的引用获得的在二维数组中。

但是我的问题是，当我似乎通过使用指针将多维数组的平方的值设置为某个值时，什么也没有发生。

这是输入函数：

```
void Game::input(Board b){
int *spots[9]; // Possible spots for the input
bool validInput = false;
spots[0] = &b.board[2][0];
spots[1] = &b.board[2][1];
spots[2] = &b.board[2][2];
spots[3] = &b.board[1][0];
spots[4] = &b.board[1][1];
spots[5] = &b.board[1][2];
spots[6] = &b.board[0][0];
spots[7] = &b.board[0][1];
spots[8] = &b.board[0][2];
redo:
    cout << ">> " << endl;
    int input; // Input
    cin >> input; // Get the input
    validInput = cin;
    if(!validInput){
        cout << "Numbers only please!" << endl;
        cin.clear();
        while(cin.get() != '\n');
        goto redo;
    }
    if(input > 9 || input <= 0){
        cout << "Invalid move!" << endl;
        goto redo;
    }
    input--; // Subtract 1 for array location
    if(*spots[input] != 0){
        cout << "Square is already being used!" << endl;
        goto redo;
    }
    *spots[input] = 1;
} 
```

*现在，假设我输入了数字 7。它应该将 b.board[0][0] 设置为 1。*但是这似乎没有发生。当我之后运行一个单元案例时， board[0][0] 似乎没有设置为 1，并且它没有反映在我的数组中。我在这里搞砸了关于指针的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T20:41:33.673

函数的参数是按值传递的，因此您对其所做的任何更改都不会被识别，因为按值传递会创建参数的副本。考虑改为通过指针或引用传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:46:13.127

您通过值而不是指针/引用传递`Board`实例。`input()`您对该`Board`实例所做的任何更改都不会反映在`Board`传递给的原始实例中`input()`。

顺便说一句，括号和循环是你的朋友：

```
void Game::input(Board &b)
{ 
    int* spots[9]; // Possible spots for the input 
    bool validInput; 
    int input;
    spots[0] = &(b.board[2][0]);
    spots[1] = &(b.board[2][1]); 
    spots[2] = &(b.board[2][2]); 
    spots[3] = &(b.board[1][0]); 
    spots[4] = &(b.board[1][1]); 
    spots[5] = &(b.board[1][2]); 
    spots[6] = &(b.board[0][0]); 
    spots[7] = &(b.board[0][1]); 
    spots[8] = &(b.board[0][2]); 
    do
    {
        std::cout << ">> " << std::endl; 
        std::cin >> input; // Get the input 
        validInput = std::cin; 
        if (!validInput)
        { 
            std::cout << "Numbers only please!" << std::endl; 
            std::cin.clear(); 
            while (std::cin.get() != '\n'); 
            continue; 
        } 
        if ((input > 9) || (input <= 0))
        { 
            std::cout << "Invalid move!" << std::endl; 
            continue; 
        } 
        --input; // Subtract 1 for array location 
        if (*spots[input] != 0)
        { 
            std::cout << "Square is already being used!" << std::endl; 
            continue; 
        } 
        *spots[input] = 1; 
        break;
    }
    while (true);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T20:43:23.713

将您的方法签名更改为

```
void Game::input(Board& b) 
```

这样，您实际上会看到您对其所做的更改反映出来。目前，您正在按值调用该方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T20:43:48.430

您可以尝试的另一件事是选择移动的一点数学。假设用户输入 7\. 7/3 = 2，即行。7 % 3 = 1，列。所以 7 指的是`board[2][1]`，这是正确的点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T20:45:52.510

您的输入函数声明为：

```
void Game::input(Board b) 
```

当您从另一个函数调用它时，例如

```
Board tictactoe;
Game g;

g.input(tictactoe); 
```

`b`获得. **_** _ `tictactoe`您在`input()`函数中所做的任何更改`b`都不会反映在`tictactoe`.

您至少有两种解决方案：

1) 参考传板：

```
void Game::input(Board& b) 
```

2）或将指针传递给板：

```
void Game::input(Board* b) 
```

还有其他解决方案需要重新设计您的代码。这两种可能是解决当前问题的最简单、最直接的方法。

此外，将索引从一维数组映射到二维数组的方式对我来说似乎有点奇怪。我认为如果你有

```
spots[0] = &(b.board[0][0]); 
spots[1] = &(b.board[0][1]);  
spots[2] = &(b.board[0][2]);  
spots[3] = &(b.board[1][0]);  
spots[4] = &(b.board[1][1]);  
spots[5] = &(b.board[1][2]);  
spots[6] = &(b.board[2][0]);  
spots[7] = &(b.board[2][1]);  
spots[8] = &(b.board[2][2]); 
```

事实上，正如其他人所指出的，这是不必要的，因为您可以从输入中计算行和列索引。或者，您可以要求用户输入两个数字，而不仅仅是一个。

# django - 遵循与 select_related 的子类关系

> ID：11695327
> 
> 赞同：3
> 
> 时间：2012-07-27T20:37:33.620
> 
> 标签：django, django-models, django-orm

我有一个类似于以下的多表继承架构：

```
class NodeData(models.Model):
    node = models.ForeignKey(Node, db_index = True)
    value = models.FloatField(default = 0)
    name = models.TextField(unique=True, blank=True)

class Node(models.Model):
    name = models.CharField(max_length=50, blank=True)
    description = models.TextField(blank=True)
    node_tree = models.ForeignKey(NodeTree, db_index = True)
    unique_name = models.TextField(unique=True, blank=True)
    last_updated_timestamp = models.DateTimeField('date last updated', blank=True)

class ConceptNode(Node):
    node_parent = models.ForeignKey(Node, related_name="nodeParent", null=True, blank=True)

class DerivedNode(Node):
    node_source = models.ForeignKey(Node, related_name="nodeSource")
    node_target = models.ForeignKey(Node, related_name="nodeTarget") 
```

出于性能原因，每当我获取大量 NodeData 元素时，我都会使用 select_related(depth = 2)。但是，select_related 不遵循与子类的关系，因此以下代码* 导致调用 myFunction 的 ConceptNode 实现，而该函数中使用的 ConceptNode 对象没有预取数据：

```
nd = NodeData.objects.get(id = 1)
nd.node.conceptnode.myFunction() 
```

这使得 select_related 没那么有用，因为有很多这样调用的函数，它们并没有从 select_related 缓存的数据中获益。

**我的问题是：**我可以获取 select_related 来为我获取此信息，以便我获取的每个 NodeData 对象都缓存了 Node 和 ConceptNode/DerivedNode 实例吗？*

*[注意：这实际上是使用我在这里](https://stackoverflow.com/questions/11694883/how-does-determining-subclass-through-hasattr-trigger-a-db-query-in-djangos-orm)询问的访问器函数模型完成的*

*注意：我正在尝试做的是类似于[this](https://stackoverflow.com/questions/11020813/django-orm-how-to-use-select-related-on-the-foreign-key-of-a-subclass-from-i)，但有点不同，因为我有多个子类。*

**编辑**：感谢 chris-platt 的提示，我发现以下内容可以满足我的需要：

```
nd = NodeData.objects.select_related('conceptnode','derivednode').get(id = 1)
nd.node.conceptnode.myFunction() 
```

第一行将 DerivedNode 或 ConceptNode 实例预取到相关的缓存对象中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:02:13.397

如果您执行类似`ConceptNode.objects.get(...)`的操作，`Node`则将同时获取实例，以便您拥有实例的完整数据。但是，当您执行诸如等子类中`Node.objects.get(...)`的数据之类的操作时，*不*包括在内。要选择这些，您需要使用，并且要获得多个子类，您只需将s 添加为逗号分隔的列表，例如：`ConceptNode`*`select_related(<related_name>)``related_name`*

 *```
Node.objects.select_related('nodeParent', 'nodeSource', 'nodeTarget') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:29:02.790

我认为这里对如何`select_related`工作有一点误解。它不适用于所有关系，它适用于外键或一对一关系 - 其中相关数据是单个记录，并且可以使用连接修改原始查询以获取它。所以这个例子不起作用：

```
nd = NodeData.objects.get(id = 1)
nd.node.conceptnode.myFunction() 
```

...因为 Node 是 ConceptNode 的父级，所以它可以有许多相关的。事实上，我认为你会得到一个属性错误`nd.node.conceptnode`。我认为您可以通过以下方式访问这些子概念节点：

```
nd = NodeData.objects.get(id = 1)
nd.node.nodeParent.all() # Loop through this and do stuff with the children... 
```

我在这里使用'nodeParent'，因为你已经设置了`related_name`（你可能想把它改成更合适的东西，比如'nodeChildren'或其他东西），但默认情况下它是'conceptnode_set'，例如：`nd.node.conceptnode_set.all()`

如果您使用的是 Django 1.4，则有一个名为 QuerySet 的新方法`[prefetch_related][1]`，我没有使用过，但它应该是针对这种确切情况（减少对“许多”类型关系的查询），理论上你应该能够做到就像是：

```
nd = NodeData.objects.get(id = 1).prefetch_related('conceptnode') 
```

...尽管您必须使用“conceptnode”参数，并且通常使用 prefetch_related 来查看它是否可以满足您的需求。*

# php - 如何从 Web 应用程序访问用户的 Gmail 帐户？

> ID：11695328
> 
> 赞同：0
> 
> 时间：2012-07-27T20:37:34.677
> 
> 标签：php, oauth, gmail

我正在用 PHP 构建一个 CRM webapp，它将从用户的所有电子邮件和社交媒体帐户中提取，并允许他们阅读和回复所有电子邮件，或撰写新电子邮件。现在，我只是想用 OAuth 1.0 让它与 Gmail 一起工作，但我遇到了一些麻烦。

我可以成功获取请求令牌和授权令牌，一旦用户授权我，谷歌就会像预期的那样重定向回我的应用程序......但现在我如何真正从用户的收件箱中提取消息？ [此链接](https://sites.google.com/site/oauthgoog/Home/oauthimap)说我需要使用用户的电子邮件拨打电话以访问他们的收件箱，但我如何获取用户的电子邮件地址？我该如何处理 Google 退回给我的 oauth_verifier 和 oauth_token？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:08:43.253

我想到了。有两个步骤：

首先，在您实际访问任何用户信息之前，您必须将您的请求令牌升级为访问令牌。这是OAuth流程的第三步（谷歌页面上的用户授权是第二步）；我对最后一步到底是什么感到困惑，并认为用户正在完成谷歌页面上的第二步和第三步。 [Google 的 OAuth 游乐场](http://googlecodesamples.com/oauth_playground/index.php)帮助清除了这一点。无论如何，在 Google（或您的服务提供商是谁）将用户重定向回您的应用程序后，您使用 oauth_verifier 和 oauth_token 将请求令牌升级为访问令牌。不要忘记使用您的 oauth_token_secret（除了您的 consumer_secret_key）来为最后一个请求生成签名！这个小细节花了我很多时间！有关如何正确执行此操作的更多信息，请参阅[此问题](https://stackoverflow.com/questions/11071955/whats-the-use-of-the-oauth-token-secret-in-twitter-oauth?rq=1)的答案。

现在，如果您像我一样，想让 Google 处理用户登录时使用的电子邮件地址（而不是自己在您的应用程序中收集该信息），您需要在访问用户的收件箱之前提出另一个请求。在我看来，这是 Google 文档真正失败的地方，因为您似乎需要用户的 google id（gmail 地址）才能使用他们的任何 API，但有可能完成 OAuth 过程而无需从用户那里获得它. 这就是导致我困惑的原因，也是我问题的重点。我仍然不是 100% 清楚你应该怎么做，但我现在所做的是将“ [https://www.google.com/m8/feeds/](https://www.google.com/m8/feeds/) ”添加到我的范围，然后调用“ [https://www.google.com/m8/feeds/contacts/default/full?max-results=0](https://www.google.com/m8/feeds/contacts/default/full?max-results=0)' 得到一个空的 xml 联系人列表，其中恰好包含用户的 gmail 地址。然后，您可以解析 XML 以获取用户的电子邮件并按照自己的方式进行操作。[使用“ https://www.googleapis.com/auth/userinfo#email](https://www.googleapis.com/auth/userinfo#email) ”范围获取用户的电子邮件也是可能的（也许更可取），但我还没有尝试过。

# j - 任意精度数被裁剪

> ID：11695330
> 
> 赞同：3
> 
> 时间：2012-07-27T20:37:52.717
> 
> 标签：j

J 剪辑终端中的大整数（注意输出中的省略号）。

如何防止这种情况？

### 代码

`!333x`

### 输出

* * *

1033446543458805915609396553829751655062226004168206282343290246978318859791427656855270019484987792989437595025257047708041835273259765874566592560470466922713372647724385431783663513069412389371163853300198049622987566547659856882180617030376554048981440 ...

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:51:40.877

您可以使用外部[文件](http://www.jsoftware.com/help/dictionary/dx001.htm)输出到标准输出，如下所示：

```
(":!333x) (1!:2) 4 
```

或者您可以使用[Output Control](http://www.jsoftware.com/help/dictionary/dx009.htm)外来显示更长的行：

```
(9!:37) 0 698 0 222

!333x
10334465434588059156093965538297516550622260041682062823432902469783188597914276568552700194849877929894375950252570477080418352732597658745665925604704669227133726477243854317836635130694123893711638533001980496229875665476598568821806170303765540489814402234159901540440432134155844542962445153646330595588291605924429211352279943471372817279938720974895260387784578239150931816946786416232516666251965421919651838044618050991294403546958930745419743836966520198735201123255884089263272829846640538826979843642885775791641575109178753509580001660392092396798648924375401024147883702298145910046889402880394195369984000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:01:21.077

你也可以这样写：

```
stdout":!333x 
```

# git - 在与文件同名的标签上使用 git show

> ID：11695332
> 
> 赞同：1
> 
> 时间：2012-07-27T20:37:54.450
> 
> 标签：git

我有一个名为 folicp 的带注释的标签，但也有一个同名的文件，所以当我尝试运行时

```
git show folicp 
```

我明白了`fatal: ambiguous argument 'test': both revision and filename`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:46:33.117

您可以使用`git show folicp --`. 将`--`refs 与文件名区分开来。

或者，您可以使用完全限定的标签名称，`git show refs/tags/folicp`

# database - 对一个对象图来说，多次旅行比一次查询要复杂多少？

> ID：11695334
> 
> 赞同：1
> 
> 时间：2012-07-27T20:38:00.363
> 
> 标签：database, performance

在对数据库发出查询时，在对象图的什么深度，仅使用多次行程而不是一次巨大的查询实际上会变得更高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:41:17.270

以目前的形式，这个问题是无法回答的。

这取决于复杂性的性质、所讨论的数据库平台（和版本）、网络连接等等。

根据我的经验，解决这个问题的最佳方法是

*   首先相信你的直觉
*   测量结果
*   如果性能不可接受，则更改策略
*   从经验中学习

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:45:44.817

关系数据库（假设您正在询问它们）不理解/查看中间件中的对象/实体。因此，他们不会知道您的查询来自什么深度。它们都以无状态的声明方式运行。

话虽如此，一般来说，几个简单的查询代替大型查询不会严重损害所提供的性能（1）通过池重用连接（2）连接打开-关闭生命周期很短。

如果底层数据库经过良好调整和索引，那么获取大量数据的大型查询也是可取的。它减少了流量，使用更少的连接并有助于并发。

# c# - 停止在视图加载时调用单选按钮设置器

> ID：11695336
> 
> 赞同：1
> 
> 时间：2012-07-27T20:38:28.217
> 
> 标签：c#, wpf, mvvm, radio-button

我正在使用 MVVM 模式。

在我的视图模型中，我的单选按钮有一个枚举属性。此属性连接到我的模型的枚举属性：

```
public MyEnum MyEnumVar
{
     get { return MyModel.EnumVar; }
     set { MyModel.EnumVar = value; }
} 
```

如果我更改为不同的视图然后更改回原始视图，而不是调用 getter，而是调用 setter，并且传递的值是我的单选按钮的第一个选项。

基本上每次我切换视图时，我的模型单选按钮的枚举都会被重置。有没有办法阻止二传手被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:35:48.827

> 我正在使用转换器，以便可以将生成的布尔值存储到我的枚举属性中。

转换器是一个可怕的解决方案，到目前为止它已经很普遍，并且对很多关于 binding`RadioButtons`的重复问题的公认答案，“正确”的方式是使用 a`ListBox`和`SelectedItem`属性，这样就不会有很多人`RadioButtons`可以争夺你的财产。

[在这个答案](https://stackoverflow.com/a/9145914/546730)中可以看到如何做到这一点的一个例子。如果切换视图`SelectedItem`应该将源绑定到目标，请选择`RadioButton`具有相应值的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T10:17:02.833

我使用了本教程中的解决方案：[http ://wpftutorial.net/RadioButton.html](http://wpftutorial.net/RadioButton.html)

然后从 UI 调用我的设置器并更改所有活动的单选按钮状态。对我来说，为每个单选按钮设置一个新的组名会有所帮助，这样它们就不会在同一个组中并且不会相互影响。

```
<RadioButton Grid.Row="1" Margin="20,30,0,40" GroupName="{Binding GroupName}" Content="Yes" IsChecked="{Binding RadioButton, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource EnumMatchToBooleanConverter}, ConverterParameter=Yes}" />
<RadioButton Grid.Row="1" Margin="76,30,0,40" GroupName="{Binding GroupName}" Content="No" IsChecked="{Binding RadioButton, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource EnumMatchToBooleanConverter}, ConverterParameter=No}"/> 
```

在 ViewModel 中：

```
public string GroupName
{
    get
    {
        return Guid.NewGuid().ToString();
    }
} 
```

# ios - UITableView 显示，但单元格中没有任何名称

> ID：11695347
> 
> 赞同：0
> 
> 时间：2012-07-27T20:39:52.770
> 
> 标签：ios, ipad, uitableview

为什么我在 iPad 上的 UITableView 中看不到任何文字？

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:YES];

    if(tableView != nil)
        [tableView reloadData];
}

- (void)viewDidLoad {

    tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024) style:UITableViewStylePlain];
    tableView.delegate = self;
    [self.view addSubview:tableView];
}

- (void)doneButtonSelected:(id)sender {
    [self dismissModalViewControllerAnimated:NO];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if(section == 0)
        return 1;
    else if(section == 1)
        return 2;

    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)theTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [theTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier];

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    int section = indexPath.section, row = indexPath.row;
    if(section == 0) {
        if(row == 0)
            cell.textLabel.text = @"YAY";
    }
    else if(section == 1) {
        if(row == 0)
            cell.textLabel.text = @"BLACH";
        else if(row == 1)
            cell.textLabel.text = @"GAH";
    }

    return cell;
}

- (void)tableView:(UITableView *)theTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [theTableView deselectRowAtIndexPath:indexPath animated:YES];

    int section = indexPath.section, row = indexPath.row;

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if(section == 0)
        return @"Blah";
    else if(section == 1)
        return @"Hi";

    return @"Hello!";
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:47:52.977

tableView.dataSource = 自我；?

# jquery - ajax不加载仅加载资源管理器8

> ID：11695349
> 
> 赞同：-1
> 
> 时间：2012-07-27T20:40:08.013
> 
> 标签：jquery, ajax, internet-explorer-8

我有一个使用 AJAX 将名称加载到列表中的页面，并且我还有一个搜索框。很简单，对吧？

我的页面在除 ie8 之外的任何浏览器上都可以正常工作，ie8 在页面加载时不加载任何数据，但是当我在搜索框中键入内容时，ajax 开始请求数据。

```
$(function () 
{
//Domain Search text box
$('#faq_search_input').keyup(function() {                   
  var textboxVal = $(this).val().toLowerCase();
  show_names(textboxVal);
});

//Here is how I request the data
function show_names(search)
{ 
    $.ajax({                                      
        url: 'api-visits.php?search='+search,
        data: "",
        dataType: 'json',
        success: function(rows)
          { 
            var list = $("#toggle").append('<ul></ul>').find('ul');
              for (var i in rows)
                {
                  var row = rows[i];
                  Dname = row[0];
                  list.append("<li class='ident' id='"+row[6]+"'>"+Dname+"</li>");
                }
           list.push(Dname);
           //Here I do other Not important stuff like calling an image, etc.
    });
}
});

<!--My HTML-->
<div id="tbox">
  Domain Search:
  <input class="reginput"  type="text" id="faq_search_input" />
</div>
<div id="toggle" style="border-top-width: 100px; padding-top: 50px;"></div> 
```

在其他浏览器上数据加载正常，是否有来自 IE8 的任何特殊“请求”以使我的页面正常工作？我的问题有点模棱两可，但你怎么看？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T21:34:10.473

您的成功回调需要一个右括号：

```
success: function(rows)
          { 
            var list = $("#toggle").append('<ul></ul>').find('ul');
              for (var i in rows)
                {
                  var row = rows[i];
                  Dname = row[0];
                  list.append("<li class='ident' id='"+row[6]+"'>"+Dname+"</li>");
                }
           list.push(Dname);
           //Here I do other Not important stuff like calling an image, etc.
          } 
```

# html - CSS 右边距在溢出滚动的 div 中不起作用

> ID：11695354
> 
> 赞同：51
> 
> 时间：2012-07-27T20:40:39.320
> 
> 标签：html, css, scroll, overflow, margin

我正在尝试制作两个 div，一个在另一个里面。内部 div 比外部 div 大，外部 div 有`overflow:scroll`，内部 div 有`margin:25px`。所以我这样做：

```
#outer {
    width: 200px;
    height: 100px;
    overflow: scroll;
}
#inner {
    width: 400px;
    height: 200px;
    margin: 25px;
} 
```

...

```
<div id="outer">
    <div id="inner">

    </div>
</div> 
```

内部 div 没有像预期的那样一直有 25px 的边距，而是在三边有 25px 的边距，但右侧没有。在我看来，这是非常违反直觉的。

如果我添加一个宽度足够大的中间 div 以包含内部 div + 50px，我们可以使它看起来正确，但这似乎是一个 hacky 解决方法。

请参阅我在 JSFiddle 上的示例：http: [//jsfiddle.net/d3Nhu/16/](http://jsfiddle.net/d3Nhu/16/)

这在每个主要浏览器中都以相同的方式发生。这种行为有什么好的理由吗？根据 CSS 规范，这是正确的行为吗？

注意：正如您在此示例中所期望的那样，如果您使用`overflow:auto`而不是`overflow:scroll`.

**编辑**：请注意，我*不是*在寻找解决此行为的方法。（我已经找到了。）我正在寻找有关此行为*原因*的任何见解，特别是如果它在任何地方的[CSS 规范](http://www.w3.org/TR/CSS21/)中都有记录。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-02-23T20:16:43.067

# TL;博士：

边距用于将元素从包装器中移入，而不是向外扩展包装器。

# 长解释：

此行为与在文档中的任何位置指定`width`除了水平之外的 a一致。`margin`要分解它，请考虑以下片段，其中我指定了一个没有`overflow`属性的包装器，并且`margin`不扩展包装器元素。

```
body {
    padding: 20px;
}
.outer {
    width: 400px;
    border: 1px solid black;
}
.inner {
    width: 400px;
    height: 40px;
    margin: 0 20px;
    background: grey;
}
```

```
<div class="outer">
    <div class="inner">

    </div>
</div>
```

如您所见，`margin`并没有导致包装器的大小扩大，元素只是继续溢出。此行为记录在 CSS 2.1 规范中的视觉格式化模型详细信息下。

### 摘自“[可视化格式化模型详细信息”的“](http://www.w3.org/TR/CSS21/visudet.html)[正常流程中的块级、非替换元素](http://www.w3.org/TR/CSS21/visudet.html#blockwidth)”部分：

> 在其他属性的使用值中必须保持以下约束：
> 
> > 'margin-left' + 'border-left-width' + 'padding-left' + 'width' + 'padding-right' + 'border-right-width' + 'margin-right' = 包含块的宽度
> 
> [...]
> 
> 如果以上所有的计算值都不是“auto”，则这些值被称为“过度约束”，并且使用的值之一必须与其计算值不同。如果包含块的'direction'属性的值为'ltr'，则忽略'margin-right'的指定值并计算该值以使等式成立。如果 'direction' 的值是 'rtl'，这会发生在 'margin-left' 上。

这段摘录非常密集，所以简单来说，让我们忽略 和 的宽度`border`，`padding`两者都是`0`，留下`width`,`margin-left`和`margin-right`。

现在，由于 and 有一个固定的and`width`值，因此这些值是“过度约束的”。现在在我们的示例中，由于默认方向是方向，因此强制进行补偿。`margin-left``margin-right``ltr``margin-right`

要查看方向的效果，让我们尝试向`dir="rtl"`包装元素添加一个属性。

```
body {
    padding: 20px;
}
.outer {
    width: 400px;
    border: 1px solid black;
}
.inner {
    width: 400px;
    height: 40px;
    margin: 0 20px;
    background: grey;
}
```

```
<div class="outer" dir="rtl">
    <div class="inner">

    </div>
</div>
```

现在元素溢出到左边。让我们看看这个`dir="rtl"`属性是否对您的`overflow: scroll`示例具有相同的效果。

```
#outer {
    border: 1px solid #00F;
    width: 200px;
    height: 100px;
    overflow: scroll;
}
#inner {
    border: 1px solid #F0F;
    margin: 25px;
    width: 400px;
    height: 200px;
}
```

```
<div id="outer" dir="rtl">
    <div id="inner">

    </div>
</div>
```

是的，确实如此。现在左边缺少边距，而不是右边。

# 但为什么不`overflow: scroll`包括边距？

主要是因为规范没有说应该。让我们看一下该`overflow`属性的 CSS 2 规范。

### 摘自“[视觉效果”的“](http://www.w3.org/TR/CSS2/visufx.html)[溢出和剪辑](http://www.w3.org/TR/CSS2/visufx.html#overflow-clipping)”部分：

> 每当发生溢出时，'overflow' 属性指定一个框是否被剪裁到其填充边缘，如果是，是否提供滚动机制来访问任何剪裁出来的内容。

看看它是如何具体说“剪掉的内容”的。关于“内容”的解释，让我们参考 CSS 2 规范中的下图。

### [来自“盒子模型”的“](http://www.w3.org/TR/CSS2/box.html)[盒子尺寸](http://www.w3.org/TR/CSS2/box.html#box-dimensions)”部分的图形：

![盒子模型](../Images/eb87409ffdc6ca4e4f0593d4c0f749a8.png)

正如我们所见， 与`margin`是分开的`content`。然而，此时值得注意的是，填充和边框包含在滚动区域中，所以当规范说“内容”时，它可能指的是边框框，或者至少，它似乎是这样解释的。

# 为什么`display: inline-block`有效？

基本上，边距在`inline-block`元素上的行为不同，因为它们是内容级别而不是块级别，并且它们没有“过度约束”的概念。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-27T20:47:09.903

添加 `display:inline-block;`到`#inner`div

看到这个[小提琴](http://jsfiddle.net/d3Nhu/17/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-10T20:32:22.960

所以这里的答案实际上并不能解决问题！（虽然对它不起作用的原因非常详细）

我需要一个解决方案。这是我的未来读者。使用`display:flex;`伪 ::after 元素的组合来伪造 div 的存在以提供所需的边距。

```
.wrapper {
  display: flex;
  width: 400px;
  height: 100%;
  padding: 40px;
  background: lightGrey;
}

.lists_container {
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  overflow: auto;
  position: relative;
  background: grey;
  padding: 40px;
  margin: 40px;
  width: 100%;
}

.card {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 250px;
  max-width: 500px;
  height: 100px;
  margin: 50px 0;
  padding: 20px;
  background: orange;
  margin-right: 30px;
}

.card.last::after {
  content: '';
  position: absolute;
  right: -100px;
  width: 40px;
  height: 100%;
  background: red;
}
```

```
<div class="wrapper">

  <div class="lists_container">

    <div class="card">
    </div>

    <div class="card">
    </div>

    <div class="card last">
    </div>

  </div>

</div>
```

# c# - 动画边框控件的宽度

> ID：11695363
> 
> 赞同：2
> 
> 时间：2012-07-27T20:41:13.970
> 
> 标签：c#, microsoft-metro, windows-runtime, winrt-xaml

我正在尝试在 Windows 8 Metro 应用程序中为边框控件的宽度设置动画。我设法为边框上的其他属性设置动画，例如不透明度：

```
private void Item_Tapped(object sender, RoutedEventArgs e)
{
    var border = sender as Border;

    var animation = new DoubleAnimation();
    animation.To = 0.0;
    animation.Duration = new Duration(TimeSpan.FromSeconds(1));

    var storyboard = new Storyboard();
    storyboard.Children.Add(animation);

    Storyboard.SetTarget(animation, border);
    Storyboard.SetTargetProperty(animation, "Opacity");

    storyboard.Begin();
} 
```

但是当我尝试为控件的宽度设置动画时：

```
private void Item_Tapped(object sender, RoutedEventArgs e)
{
    var border = sender as Border;

    var animation = new DoubleAnimation();
    animation.To = 600.0;
    animation.Duration = new Duration(TimeSpan.FromSeconds(1));

    var storyboard = new Storyboard();
    storyboard.Children.Add(animation);

    Storyboard.SetTarget(animation, border);
    Storyboard.SetTargetProperty(animation, "Width");

    storyboard.Begin();
} 
```

没发生什么事。

我可以在 WPF 中执行此操作，但不能在 Windows 8 中执行此操作。这是 Metro 的限制或错误，还是我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-03T14:50:14.600

我能够通过启用使其工作`EnableDependentAnimation`

```
 public static async Task Width(FrameworkElement obj, double doubleValue, int milliseconds)
    {
        var animation= new DoubleAnimation
        {
            To = doubleValue,
            Duration = TimeSpan.FromMilliseconds(milliseconds),
            EnableDependentAnimation = true// <== here
        };

        Storyboard.SetTarget(animation, obj);
        Storyboard.SetTargetProperty(animation, "Width");

        var sb = new Storyboard();
        sb.Children.Add(animation);
        await sb.BeginAsync();
    } 
```

享受！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-27T21:20:16.493

我不确定你如何让它在 WPF 中工作。根据[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.targetproperty](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.targetproperty)，目标属性必须是依赖属性。根据[http://msdn.microsoft.com/en-us/library/system.windows.controls.border](http://msdn.microsoft.com/en-us/library/system.windows.controls.border)， Width 不是依赖属性。

# ruby - 使用 attr_accessor 和初始化方法的 Ruby 类

> ID：11695364
> 
> 赞同：4
> 
> 时间：2012-07-27T20:41:16.083
> 
> 标签：ruby

努力在 Ruby 中制作一个小型命令行脚本，其中用户提供一些与餐馆相关的信息，并返回计算的信息。

目前我有以下代码：

```
class Restaurant
 attr_accessor :name :type :avg_price
 def initialize(name, type, avg_price)
   @name = name
   @type = type
   @avg_price = price
 end
 end 
```

## 问题 1

如果我们使用`attr_accessors`方法来声明`type`, 和`price`,`name` 为什么需要 Initialize 方法？这是因为我们需要为它设置输入的值吗？

## 问题2

`RestaurantList`代码中有一个名为其次的子类`< Array`。这是什么功能？

Array 类没有在代码中定义？它是 ruby​​ 中的内置类`Array`吗？如果是这样，它的具体作用是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:04:03.827

## 问题 1

该`attr_accessor`方法是在方法内的块外声明可访问变量的捷径。

ruby 中的`initializer`方法是当有人初始化该类的某些内容时要调用的方法，即`chipotle = Restaurant.new 'Chipotle', 'Mexican', 8.00`

## 问题2

`Array`确实是一个内置于 Ruby 中的类，（内置类通常被称为 Ruby 标准库，有关该类的 MRI 1.9.3 文档请参见[此处](http://www.ruby-doc.org/core-1.9.3/Array.html)`Array`。您无需进行任何特殊继承即可使用`Array`语言是在庄园中定义的，因此不需要继承诸如字符串、哈希、数组和其他常用类之类的东西。

也就是说，这些可以超载。当您发现一些看起来像数组但具有替代功能的东西时，不要感到惊讶。

## 其他注意事项

使用 Ruby 编程时要记住的一件事是，*一切*都是对象。你会经常听到这个，但当你第一次潜水时很难理解，但仍然重要的是要记住，*一切*都可以映射回`Object`Ruby 中的类，请参阅[此处](http://ruby-doc.org/core-1.9.3/Object.html)以获取有关该类的文档`Object`。

# objective-c - UIPopover 行为

> ID：11695366
> 
> 赞同：1
> 
> 时间：2012-07-27T20:41:25.023
> 
> 标签：objective-c, uipopovercontroller

我有一个弹出视图（计算器的），每当开始编辑文本字段时就会显示该视图。调用 display 方法的代码，以及 display 方法本身贴在下面。

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    //the background color may have been yellow if someone tried to submit the form with a blank field
    textField.backgroundColor = [UIColor whiteColor];

    sender = @"text field";

    [self displayCalculator:textField.frame];

    return YES;
} 
```

显示视图的方法是：

```
-(IBAction)displayCalculator:(CGRect)rect{

    calculator = [[CalculatorViewController alloc] initWithNibName:@"CalculatorViewController" bundle:nil];
    popoverController = [[[UIPopoverController alloc] initWithContentViewController:calculator] retain];

    [popoverController setPopoverContentSize:CGSizeMake(273.0f, 100.0f)];

    [popoverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

我的问题是：

1）我怎样才能让弹出框留下来？我希望用户能够单击文本字段（首先显示弹出窗口的文本字段），但是当他们这样做时，弹出窗口就会消失。

2）弹出窗口有时会以阻塞文本字段的方式出现，无论如何我可以控制弹出窗口的出现位置吗？我目前正在传递文本字段的框架，但这似乎不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:14:55.173

检查文档以查看是否有解决所需任务或功能的方法或属性总是很好的（[UIPopoverController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)）

似乎对于您的第一个问题，您应该看一下该`passthroughViews`属性：

> 直通视图
> 
> 弹出框可见时用户可以与之交互的一组视图。@property (nonatomic, copy) NSArray *passthroughViews Discussion
> 
> 当弹出框处于活动状态时，与其他视图的交互通常会被禁用，直到弹出框被解除。将视图数组分配给此属性允许弹出框之外的点击由相应的视图处理。

对于第二个问题（覆盖文本区域），您可以偏移 textField.frame 以定义一个新`CGRect`的 popoverController 用作其锚点。

```
CGRect targetRect = CGRectOffset(textField.frame, n, n); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:05:54.520

（问题 1）在您的 displayCalculator 方法中，您需要有一种方法来检查弹出窗口是否已经显示。截至目前，每次 textField 更新时，您都会重绘弹出窗口。您确实将 textFieldDelegate 调用更改为`textFieldDidBeginEditing`.

尝试这个：

```
-(BOOL)textFieldDidBeginEditing:(UITextField *)textField {

    //the background color may have been yellow if someone tried to submit the form with a blank field
    textField.backgroundColor = [UIColor whiteColor];

    sender = @"text field";

    [self displayCalculator:textField.frame];

    return YES;
}

-(IBAction)displayCalculator:(CGRect)rect{

//We don't want to continually create a new instance of popoverController. So only if it is nil we create one. 
if (popoverController == nil)
    calculator = [[CalculatorViewController alloc] initWithNibName:@"CalculatorViewController" bundle:nil];
    popoverController = [[[UIPopoverController alloc] initWithContentViewController:calculator] retain];

    [popoverController setPopoverContentSize:CGSizeMake(273.0f, 100.0f)];
}

//Check to make sure it isn't already showing. If it's not, then we show it. 
if (!popoverController.popoverVisible) {
    [popoverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

} 
```

编辑

正如瘦子指出的那样（我应该提到）。每当您触摸弹出框外部时，弹出框就会消失。这就是为什么将 textFieldDelegate 更改为 textFieldDidBeginEditing 的原因。

[这是一个很好的教程，可能会对您有所帮助。](http://geekios.wordpress.com/tag/uipopovercontroller/)

[如果一切都失败了，只需创建自己的弹出框。](http://blog.chrismiles.info/2010/12/cmpoptipview-custom-popup-view-for-ios.html)

# haskell - 使用 Data.Binary 对列表进行延迟解码

> ID：11695373
> 
> 赞同：7
> 
> 时间：2012-07-27T20:41:48.877
> 
> 标签：haskell, lazy-evaluation

我正在使用此代码懒惰地编码列表（取自此[SO question](https://stackoverflow.com/a/6205597/1241368)）：

```
import Data.Binary

newtype Stream a = Stream { unstream :: [a] }

instance Binary a => Binary (Stream a) where

    put (Stream [])     = putWord8 0
    put (Stream (x:xs)) = putWord8 1 >> put x >> put (Stream xs) 
```

问题是解码实现并不懒惰：

```
 get = do
        t <- getWord8
        case t of
            0 -> return (Stream [])
            1 -> do x         <- get
                    Stream xs <- get
                    return (Stream (x:xs)) 
```

这在我看来应该是懒惰的，但是如果我们运行这个测试代码：

```
head $ unstream (decode $ encode $ Stream [1..10000000::Integer] :: Stream Integer) 
```

内存使用量激增。出于某种原因，它想在让我查看第一个元素之前解码整个列表。

为什么这不是懒惰的，我怎样才能让它变得懒惰？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T23:26:12.437

它不是懒惰的，因为`Get`monad 是一个严格的状态 monad（在[binary-0.5.0.2 到 0.5.1.1](http://hackage.haskell.org/package/binary-0.5.1.1)；它以前是一个懒惰的状态 monad，在[binary-0.6.*](http://hackage.haskell.org/package/binary-0.6.1.0)中它已成为一个延续 monad，我没有分析了该更改的严格性含义）：

```
-- | The parse state
data S = S {-# UNPACK #-} !B.ByteString  -- current chunk
           L.ByteString                  -- the rest of the input
           {-# UNPACK #-} !Int64         -- bytes read

-- | The Get monad is just a State monad carrying around the input ByteString
-- We treat it as a strict state monad. 
newtype Get a = Get { unGet :: S -> (# a, S #) }

-- Definition directly from Control.Monad.State.Strict
instance Monad Get where
    return a  = Get $ \s -> (# a, s #)
    {-# INLINE return #-}

    m >>= k   = Get $ \s -> case unGet m s of
                             (# a, s' #) -> unGet (k a) s'
    {-# INLINE (>>=) #-} 
```

因此最终的递归

```
get >>= \x ->
get >>= \(Stream xs) ->
return (Stream (x:xs)) 
```

`Stream`强制在返回之前读取整个内容。

我认为不可能`Stream`在`Get`单子中懒惰地解码 a （所以更不用说`Binary`实例了）。但是您可以使用以下方法编写惰性解码函数`runGetState`：

```
-- | Run the Get monad applies a 'get'-based parser on the input
-- ByteString. Additional to the result of get it returns the number of
-- consumed bytes and the rest of the input.
runGetState :: Get a -> L.ByteString -> Int64 -> (a, L.ByteString, Int64)
runGetState m str off =
    case unGet m (mkState str off) of
      (# a, ~(S s ss newOff) #) -> (a, s `join` ss, newOff) 
```

首先编写一个`Get`返回 a 的解析器`Maybe a`，

```
getMaybe :: Binary a => Get (Maybe a)
getMaybe = do
    t <- getWord8
    case t of
      0 -> return Nothing
      _ -> fmap Just get 
```

然后用它来制作一个类型的函数`(ByteString,Int64) -> Maybe (a,(ByteString,Int64))`：

```
step :: Binary a => (ByteString,Int64) -> Maybe (a,(ByteString,Int64))
step (xs,offset) = case runGetState getMaybe xs offset of
                     (Just v, ys, newOffset) -> Just (v,(ys,newOffset))
                     _                       -> Nothing 
```

然后你可以`Data.List.unfoldr`用来懒惰地解码一个列表，

```
lazyDecodeList :: Binary a => ByteString -> [a]
lazyDecodeList xs = unfoldr step (xs,0) 
```

并将其包装在一个`Stream`

```
lazyDecodeStream :: Binary a => ByteString -> Stream a
lazyDecodeStream = Stream . lazyDecodeList 
```

# python - Tornado：识别/跟踪 websocket 的连接？

> ID：11695375
> 
> 赞同：18
> 
> 时间：2012-07-27T20:41:55.820
> 
> 标签：python, websocket, tornado

我有一个基本的 Tornado websocket 测试：

```
import tornado.httpserver
import tornado.websocket
import tornado.ioloop
import tornado.web

class WSHandler(tornado.websocket.WebSocketHandler):
    def open(self):
        print 'new connection'
        self.write_message("Hello World")

    def on_message(self, message):
        print 'message received %s' % message

    def on_close(self):
      print 'connection closed'

application = tornado.web.Application([
    (r'/ws', WSHandler),
])

if __name__ == "__main__":
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

我希望能够处理多个连接（它似乎已经这样做了），但也能够引用其他连接。我看不到一种识别和跟踪单个连接的方法，只是为了能够处理连接打开、接收消息和连接关闭的事件。

[编辑]
考虑创建一个字典，其中键是 Sec-websocket-key，值是 WSHandler 对象......想法？我不确定 Sec-websocket-key 的唯一性有多可靠。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-28T00:25:00.543

最简单的方法就是保留 WSHandler 实例的列表或字典：

```
class WSHandler(tornado.websocket.WebSocketHandler):
    clients = []

    def open(self):
        self.clients.append(self)
        print 'new connection'
        self.write_message("Hello World")

    def on_message(self, message):
        print 'message received %s' % message

    def on_close(self):
        self.clients.remove(self)
        print 'closed connection' 
```

如果您想识别连接，例如按用户，您可能必须通过套接字发送该信息。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-29T07:01:02.017

当您只需要所有连接的列表时，Cole Maclean asnwer 是一个简单的解决方案。但是，如果您想要更复杂的东西，可以在`WSHandler`实例之外进行监控 - 勇敢地这样做：

```
class WSHandler(tornado.websocket.WebSocketHandler):

    def open(self):
        self.id = uuid.uuid4()
        external_storage[self.id] = {'id':self.id}
        print 'new connection'
        self.write_message("Hello World")

    def on_message(self, message):
        #Some message parsing here
        if message.type == 'set_group':
           external_storage[self.id]['group'] = message.group
        print 'message received %s' % message

    def on_close(self):
        external_storage.remove(self.id)
        print 'closed connection' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T01:04:18.127

如果您的用户有访问令牌，则可以将其附加到您的 websocket 端点，并在初始化您的套接字时获取它，甚至在它打开之前（但请通过 SSL 工作）。

如果访问令牌不可用，或者是因为用户没有提供或他们提供的令牌已过期，则用户未通过身份验证，您将尽早终止套接字。

无论您如何执行此操作，访问令牌都应与将拥有标识符的用户相关联，并且该标识符甚至可以在套接字打开之前绑定到套接字。标识符可以用作字典键，其值是与该用户绑定的一组套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T19:20:42.807

我通过检查 conexion 的起源解决了这个问题。因此，覆盖该方法`def check_origin(self, origin)`可能会有所帮助。例如：

```
clients = {}

class WSHandler(tornado.websocket.WebSocketHandler):

    def check_origin(self, origin): 

        clients[origin] = self
        print(clients)
        return True 
```

# ruby-on-rails - Postgres 在 Rails 上加入查询

> ID：11695377
> 
> 赞同：0
> 
> 时间：2012-07-27T20:42:04.283
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-postgresql

我进行了很多研究，但找不到我的问题的答案。我的 Rails 应用程序有以下设置：

```
class Group < ActiveRecord::Base
  has_many :people
  # ...
end

class City < ActiveRecord::Base
  has_many :people
  # ...
end

class Person < ActiveRecord::Base
  belongs_to :city
  belongs_to :group
  # ...
end 
```

人们有`:role`或`0`的列`1`。

我想获得所有至少有一个人和`role == 0`一个人使用`role == 1`.

任何想法？顺便说一句，我正在使用 Postgres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:22:52.637

这是我刚刚在我的 SQLite3 数据库上测试的一个查询（我相信也应该在 Postgres 上工作）：

```
 Group.select("groups.*").joins("LEFT JOIN people on groups.id = people.group_id").where("people.role==0 OR people.role==1").group("id") 
```

在这里，我假设您已经在人员迁移中添加了外键 group_id。希望这可以帮助。

# jquery - 单击以允许单击表单文本输入时如何禁用单击功能？

> ID：11695378
> 
> 赞同：0
> 
> 时间：2012-07-27T20:42:06.637
> 
> 标签：jquery, onclick, click

我有一个 div，单击它会通过 jquery .click 函数在 div 内打开一个表单。

这很好用，直到我需要在文本输入的表单内单击！嗬！

当这个特定的 div “打开”（即显示表单）时，如何禁用单击功能。然后当div再次“关闭”时返回点击功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:46:43.157

假设这样的 HTML 结构：

```
<div id="outer_clicking_div">
    <div id="form_div">
        <!-- form here -->
    </div>
</div> 
```

您只需要像这样停止在表单 div 上方传播点击

```
$('#form_div').click(function (e) {
    e.stopPropagation();
}); 
```

# ios - SoundCloud 可可包装器无法在没有帐户的情况下访问资源

> ID：11695384
> 
> 赞同：1
> 
> 时间：2012-07-27T20:42:32.583
> 
> 标签：ios, cocoa, api, soundcloud

尝试访问 SoundCloud API (https://api.soundcloud.com/tracks.json) 中的公共端点，将帐户的 nil 发送到 SoundCloudAPI 库。

API 响应：

```
error: Error Domain=NXOAuth2HTTPErrorDomain Code=401 "HTTP Error: 401" UserInfo=0x7556ff0 {NSLocalizedDescription=HTTP Error: 401} 
```

我引用了他们的 GitHub 存储库的一般使用指南（https://github.com/soundcloud/CocoaSoundCloudAPI/blob/master/GeneralUsage.md）：

> 对于匿名请求，您可以在没有帐户 (nil) 的情况下调用此方法，也可以使用从 [SCSoundCloud 帐户] 获得的帐户调用此方法。

正如我在[http://developers.soundcloud.com](http://developers.soundcloud.com)中看到的那样，我可以在没有 OAuth 的情况下使用它。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T03:38:00.140

您必须附加`?consumer_key=APP_KEY`到请求的 URL，例如：`https://api.soundcloud.com/tracks.json?consumer_key=APP_KEY`

我在他们有些废弃的 Google 群组页面中发现了这一点：[https ://groups.google.com/forum/?fromgroups#!topic/soundcloudapi/ptBbe_TWSj8](https://groups.google.com/forum/?fromgroups#!topic/soundcloudapi/ptBbe_TWSj8)

github 上的一般使用页面似乎是一个奇怪的遗漏，除非他们的开发者网站有其他错误，否则它也被遗漏了。

**编辑**

我确实遇到了另一条关于此的信息，开发人员网站确实提到了一个`client_id`GET 参数，这与 consumer_key 不同，但是，如果我们能够确认是否使用`consumer_key`或`client_id`用于未经授权的公共 API 调用，那就太好了。

SoundCloud API 库在接收到 nil 帐户参数时没有将此（任何一个适当的）附加到 URL 似乎也有点奇怪。如果缺少用户帐户对象，自动切换到正确的 api 调用似乎是合乎逻辑的。

# oop - 如何在 CRUD OOP CFC 中重用查询？

> ID：11695385
> 
> 赞同：1
> 
> 时间：2012-07-27T20:42:32.750
> 
> 标签：oop, coldfusion, cfc, overriding

我有一个简单的 CFC 类来处理产品 - Product.cfc 上的 CRUD。

我正在扩展该类以允许基于应用程序的其他属性 - 例如 CartProduct.cfc 扩展 Product.cfc 以允许包含 Quantity 属性。

在 Base Product.cfc 类中，我首先传入一个 ID，并在我的 read() 方法中使用该 ID 从数据库中检索数据：

```
<cffunction name="read" returntype="Query">
    <cfquery name="qData" datasource="mydb">
        SELECT    description
        FROM      mySKUTable
        WHERE     id = '#VARIABLES.Sku#'
    </cfquery>

    <cfreturn qData />
</cffunction>

<cffunction name="setSku" returntype="Product">
    <cfargument name="Sku" type="String" required="true" />
    <cfscript>
        var qData = QueryNew("");

        VARIABLES.Sku = ARGUMENTS.Sku;

        qData = read();

        VARIABLES.description = qData.description;
    </cfscript>
</cffunction> 
```

我想在 CartProduct.cfc 中扩展它以使用 read() 方法从不同的表中检索和设置数量：

```
<cffunction name="read" returntype="Query">
    <cfquery name="qData" datasource="mydb">
        SELECT    quantity
        FROM      myCartTable
        WHERE     id = '#VARIABLES.Sku#'
    </cfquery>

    <cfreturn qData />
</cffunction>

<cffunction name="setSku" returntype="Product">
    <cfargument name="Sku" type="String" required="true" />
    <cfscript>
        var qData = QueryNew("");

        THIS = SUPER.setSku(Sku);

        qData = read();

        VARIABLES.quantity = qData.quantity;
    </cfscript>
</cffunction> 
```

当我这样做时，只有扩展的 read() 被调用。这很好，这是设计的。但是，我正在寻找一种同时调用*两个*read() 方法的方法，因此我可以先在基类中设置属性，然后在扩展类中设置属性。

对此有什么想法吗？

ps 我知道我没有使用 CFQUERYPARAM 或验证我的输入等。为了简单起见，我把那些废话留了下来，所以现在请不要给我这些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:03:41.617

好的，这就是我想出的：

我没有从 read() 方法返回 Query，而是将 Query 行转换为 Struct 并返回 Struct。这样我就可以在 read() 中调用 SUPER.read() ，然后将父 Struct 中的键和值复制到每个级别的新 Struct 中。这是一个多一点的代码，但它完成了工作。

```
<cffunction name="read" returntype="Struct" output="false">
    <cfscript>
        var _qData = QueryNew("");
        var _properties = SUPER.read();
    </cfscript>

    <cfquery>
    ...
    </cfquery>

    <cfscript>
        StructAppend(
            _properties,
            REQUEST.UDFLib.Query.queryRowToStruct(_qData)
            );

        return _properties;
    </cfscript>
</cffunction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:53:47.990

您可以使用“超级”范围来引用扩展组件。因此，要从 CartProduct.cfc 中调用 Product.cfc 的“读取”方法，请调用 Super.read()。

# c# - 图像压缩未按预期工作

> ID：11695389
> 
> 赞同：-3
> 
> 时间：2012-07-27T20:42:47.210
> 
> 标签：c#, aforge

这是我放在一起的一些代码（我没有写所有这些）

```
Bitmap thisScreenshot = new Bitmap(Width, Height);
Graphics gfxScreenshot = Graphics.FromImage(thisScreenshot);
IntPtr hdcBitmap = gfxScreenshot.GetHdc();
PrintWindow(WindowToFind, hdcBitmap, 0);
gfxScreenshot.ReleaseHdc(hdcBitmap);
//until this is part its just getting image of window(thisScreenshot)
AForge.Imaging.Filters.ResizeBilinear filter = new AForge.Imaging.Filters.ResizeBilinear(100, 60);
Bitmap forthumbnail = filter.Apply(thisScreenshot);
pictureBox1.Image = forthumbnail;
//created thumbnail

//this is where it gets slightly interesting:
Choppa = new AForge.Imaging.Filters.Crop(new Rectangle(150,55,250,200));
Bitmap croppedACCEPTtext = Choppa.Apply(thisScreenshot);
string img1_ref, img2_ref;
Bitmap img1 = croppedACCEPTtext;
Bitmap img2 = Properties.Resources.txt305;
int count1 = 0, count2 = 0;
bool flag = true;
if (img1.Width == img2.Width && img1.Height == img2.Height)
{
    for (int i = 0; i < img1.Width; i++)
    {
        for (int j = 0; j < img1.Height; j++)
        {
            img1_ref = img1.GetPixel(i, j).ToString();
            img2_ref = img2.GetPixel(i, j).ToString();
            if (img1_ref != img2_ref)
            {
                count2++;
                flag = false;
                break;
            }
            count1++;
        }
    }

    if (count2 < 200)
    {
        //THIS IS WORKS, AND HAPPENS CORRECTLY.
        //THIS IS WORKS, AND HAPPENS CORRECTLY.
    }
    else
    {

    }
}
else
{

}
//Now, remaining part above doesnt work. 
//its always false, unless when I look for count2 <400, then its always true.
AForge.Imaging.Filters.Crop Choppah = new AForge.Imaging.Filters.Crop(new Rectangle(150, 55, 350, 300));
croppedACCEPTtext = Choppah.Apply(thisScreenshot);
img1 = croppedACCEPTtext;
count1 = 0;
count2 = 0;
flag = true;
img2 = Properties.Resources.txt306;
if (img1.Width == img2.Width && img1.Height == img2.Height)
{
    for (int i = 0; i < img1.Width; i++)
    {
        for (int j = 0; j < img1.Height; j++)
        {
            img1_ref = img1.GetPixel(i, j).ToString();
            img2_ref = img2.GetPixel(i, j).ToString();
            if (img1_ref != img2_ref)
            {
                count2++;
                flag = false;
                break;
            }
            count1++;
        }
    }

    if (count2 < 400)
    {
        //fail ?
    }
    else

    {
    }
}
else
{

} 
```

这段代码不是我的，并且由于某种原因它们失败了。我似乎无法理解为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:59:40.613

你应该描述你所说的失败是什么意思。

如果我正确地遵循它，第一部分会：

1.  img1 窗口截图的裁剪版本
2.  img2 是一个名为 .txt305 的随机位图

然后我们比较相同点之间的颜色，如果它们相同，则增加一个计数器。据你说，当不超过 199 个像素匹配颜色时，它就成功了。

（或者更确切地说，不超过 199**列**的图像具有匹配的颜色，因为 break 语句不会跳出两个 for 循环。）

第二部分使：

1.  img1 是窗口截图的稍大的裁剪版本
2.  img2 是一个名为 .txt306 的随机位图

在相同的点比较颜色（假设图像大小相同），如果它们相同，则计数器增加。

根据您的说法，这失败了，因为 img1 的 399 列中包含与 img2 匹配的像素颜色。

你期望什么行为？（您希望有多少列具有相同颜色的位置等效像素？）

我的假设是第二部分将始终具有 count2 < 400，因为它是通过计算具有至少 1 个匹配像素的图像的列数得出的。但是您通过裁剪制作了其中一张图像，并通过以下方式完成裁剪：

```
new Rectangle(150, 55, 350, 300) 
```

使它看起来像新的 img2 没有超过 400 列。

也许您打算使用“继续”关键字而不是“中断”

# silverlight - 绑定到非字符串数据类型的 TextBox 的 Silverlight 验证

> ID：11695395
> 
> 赞同：1
> 
> 时间：2012-07-27T20:43:23.477
> 
> 标签：silverlight, validation, inotifydataerrorinfo

使用 INotifyDataErrorInfo 的 Silverlight 验证在我开始尝试在绑定到非字符串数据类型属性的 TextBox 上使用它之前，它的错误显示效果很好。我的计划是使用属性的设置器来执行验证逻辑，并根据需要从那里添加和删除错误。它适用于作为字符串的文本框，但是如果您有一个绑定到 Int 的文本框并且您输入了一个字符串，则设置器甚至不会被调用（我可以在其中添加一个明显非数字值的错误无效的）。从这里建议的行动方案是什么？我研究了 ValueConverters，但它们与我正在验证的类中的 INotifyDataErrorInfo 逻辑相距甚远。

假设示例：

```
public class MyClass
{
    private string _prod;
    public string Prod
    {
        get { return _prod; }
        set //This works great
        {
            if (value.Length > 15)
            {
                AddError("Prod", "Cannot exceed 15 characters", false);
            }
            else if (value != _prod)
            {
                RemoveError("Prod", "Cannot exceed 15 characters");
                _prod= value;
            }
        }
    }

    private int _quantity;
    public int Quantity
    {
        get { return _quantity; }
        set //if a string was entered into the textbox, this setter is not called.
        {
            int test;
            if (!int.TryParse(value, test))
            {
                AddError("Quantity", "Must be numeric", false);
            }
            else if (test != _quantity)
            {
                RemoveError("Quantity", "Must be numeric");
                _quantity= test;
            }
        }
    }

    protected Dictionary<String, List<String>> errors = 
        new Dictionary<string, List<string>>();

    public void AddError(string propertyName, string error, bool isWarning)
    {
        //adds error to errors
    }
    public void RemoveError(string propertyName, string error)
    {
        //removes error from errors
    }

    //INotifyDataErrorInfo members...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:47:29.730

我建议您将 TextBox 的值绑定到一个字符串值并在那里进行验证。如果验证成功，则将值传递给具有您实际查找的数据类型（例如 int）的另一个属性。在任何其他情况下，验证失败。只是一种解决方法......但对我有用。

# aptana - APTANA - 那是哪个奇怪的字符？

> ID：11695401
> 
> 赞同：4
> 
> 时间：2012-07-27T20:43:58.247
> 
> 标签：aptana, aptana3

我是 aptana 的新手，所有行末尾的这个奇怪的字符对我来说真的很奇怪！为什么这个？！这是一个屏幕截图：

![在此处输入图像描述](../Images/266e00ed3bdd8a6da91e11511c9d2792.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:48:12.987

如果我不得不猜测，我会说它们位于正确的位置来表示在使用 Windows 行尾的文件中的每行末尾找到的回车符和换行符。您是否启用了显示隐藏字符的设置？在多行的开头似乎还出现了一个 >> 来表示一个选项卡。

你的两个神秘人物中的第一个看起来没什么，但第二个看起来像一个程式化的枕头，一个旧的排版符号，用于标记新段落的开头，通常用作新段落的可见表示 -行字符。

# java - 如何在java中将零的char数组转换为int

> ID：11695402
> 
> 赞同：0
> 
> 时间：2012-07-27T20:44:01.233
> 
> 标签：java

我有一个`char`以零开头的数组，但是当我尝试将其转换为一个`int`值时，它会删除零，所以我也想保留零。

像这样的数组 char 包含 00001234 并且 int 必须是这样的`00001234`，但是当我使用`parseInt`它时，它只剩下 1234。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:48:01.833

An`int`包含一个纯数值；没有像前导零，千位分隔符等表示的概念。任何类似的东西都被认为是*格式*- 它仅在您需要以`int`某种方式显示或将其转换为文本时才相关。像这样的设施`NumberFormat`或`System.out.printf()`让您可以控制应用的格式，所以这就是您必须使用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:45:36.097

如果要在打印时保留前导零，则可能需要使用 Java [NumberFormat 。](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T20:47:19.530

您不能在 int 或任何数字类型中捕获前导零。前导零与数字的内部表示无关，仅在您打印数字时才有用。

当您输出数字时，请`int`使用 a[`NumberFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)或`String`带有[`System.out.format`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#format%28java.lang.String,%20java.lang.Object...%29)/的格式，而不是打印一个[`System.out.printf`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)。

如果您必须保留输入的数字，或者在您`char[]`的 中保留相同数量的前导零，则需要将其保留为 a `char[]`，同时使用来自 eg 的数字等价物进行数字计算`parseInt`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T20:45:32.697

int 不知道数字的格式，您必须在显示数字的任何地方添加填充

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T20:47:08.007

您不能将格式存储在简单的 int 中。您只需存储实际的 int 数字，然后在显示它时使用 NumberFormat 之类的东西来根据需要填充它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T20:47:04.357

000001234 和 1234 与整数相同。您正在寻找的是正确格式化（显示数字）整数并将其转换为字符串的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T20:49:00.927

看看[这](http://www.daniweb.com/software-development/java/threads/71046/how-use-integer-values-begins-with-zero)是否有助于它对如何打印带前导零的数字有一些建议，如果你能告诉这些数字的用法，可以提供更相关的答案......

# javascript - 如何向我的 Javascript/Jquery 滑块添加按钮？

> ID：11695405
> 
> 赞同：1
> 
> 时间：2012-07-27T20:44:21.007
> 
> 标签：javascript, jquery, html, jquery-selectors, slideshow

所以我有一个 javascript/jquery 图像滑块。每张幻灯片都是一个 <div> 元素，是 div“容器”的子元素。每五秒钟，最后一张幻灯片向上滑动，新图像淡入。简单的东西。这是我的代码：

```
window.onload = function start() {
    slide();
}

function slide() {
    var num = 0;
    window.setInterval(function () {
        $("#container div:eq(" + num + ")").slideUp(450);
        num = (num + 1) % 4;
        $("#container div:eq(" + num + ")").fadeIn(450);

    }, 5000); 
```

那么，我需要做些什么来添加将您带到下一张幻灯片和最后一张幻灯片的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:51:00.863

下一个：

```
$("#next").click(function () {
    $("#container div:eq(" + num + ")").slideUp(450);
    num = (num + 1) % 4;
    $("#container div:eq(" + num + ")").fadeIn(450);
}); 
```

最后的：

```
$("#last").click(function () {
    $("#container div:eq(" + num + ")").slideUp(450);
    num = 4;
    $("#container div:eq(" + num + ")").fadeIn(450);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:54:29.337

*HTML：*

```
<a id="next" href="#">next</a>
<a id="last" href="#">last</a> 
```

*JavaScript：*

```
$(document).ready(function () {
  var cur = 0;

  var slide = function (n) {
    $("#container div:eq(" + cur + ")").slideUp(450);
    cur = n;
    $("#container div:eq(" + cur + ")").fadeIn(450);
  )

  setInterval(function () { slide((cur + 1) % 4); }, 5000);

  $('#next').click(function () { slide((cur + 1) % 4); });
  $('#last').click(function () { slide(3); });
}); 
```

# eclipse - 如何在 Eclipse 中为 JSP scriptlet 更改语法着色？

> ID：11695410
> 
> 赞同：2
> 
> 时间：2012-07-27T20:44:39.297
> 
> 标签：eclipse, jsp

当我在 Eclipse 中的 JSP 编辑器中打开一个 jsp 文件时，scriptlet 中只有关键字和字符串是彩色的，尽管在 scriptlet 之外一切看起来都很好。如何更改脚本中的语法着色，最好使用我已经为 Java 设置的设置？

我正在使用 Eclipse Indigo 的 Java EE 包和一个 java 1.6 jdk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:49:36.107

您可以这样做：突出显示您希望进行更改的代码段，右键单击它，转到首选项> {无论您尝试更改设置，例如 jsp 等} > 编辑器> 语法着色并进行所需的更改。希望这会帮助你。

# c# - NavigationProperty 的访问关联详细信息

> ID：11695412
> 
> 赞同：2
> 
> 时间：2012-07-27T20:44:50.280
> 
> 标签：c#, entity-framework, t4, scaffolding

我正在创建一个 C# T4 模板来构建一些基于 .edmx 文件的类，到目前为止一切都很好。不过，我现在需要的是一种通过[NavigationProperty](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.navigationproperty_members%28v=vs.90%29.aspx)访问它在数据库中连接的列的名称的方法。

不久前，我意识到您可以在 .edmx 视觉设计器中访问此信息，在特定 NavigationProperty 的映射详细信息下： ![在此处输入图像描述](../Images/e96d508872c7b13bc81d76ef9aa71100.png)

所以基本上，如果在 T4 模板中；我已经有一个我想要的 NavigationProperty 实例...如何获取它连接的字段的名称？（`WeatherOnMondays`在这种情况下）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T23:29:11.843

来自的答案：[EF4：从 EDMX 的 NavigationProperty 获取链接的列名](https://stackoverflow.com/questions/5365708/ef4-get-the-linked-column-names-from-navigationproperty-of-an-edmx)

实现此目的的 2 种方法：

```
// Obtain a reference to the navigation property you are interested in
var navProp = GetNavigationProperty();
// Load the metadata workspace
MetadataWorkspace metadataWorkspace = null;
bool allMetadataLoaded =loader.TryLoadAllMetadata(inputFile, out metadataWorkspace);

// Get the association type from the storage model
var association = metadataWorkspace
    .GetItems<AssociationType>(DataSpace.SSpace)
    .Single(a => a.Name == navProp.RelationshipType.Name)

// Then look at the referential constraints
var toColumns = String.Join(",", 
    association.ReferentialConstraints.SelectMany(rc => rc.ToProperties));
var fromColumns = String.Join(",", 
    association.ReferentialConstraints.SelectMany(rc => rc.FromProperties)); 
```

第二种方法：

```
NavigationProperty[] foreignKeys = entity.NavigationProperties
  .Where(np => np.DeclaringType == entity &&
          ((AssociationType)np.RelationshipType).IsForeignKey).ToArray();

foreach (NavigationProperty foreignKey in foreignKeys)
{
   foreach(var rc in GetSourceSchemaTypes<AssociationType>()
       .Single(x => x.Name == foreignKey.RelationshipType.Name)
       .ReferentialConstraints)
   {
       foreach(var tp in rc.ToProperties)
           WriteLine(tp.Name);
       foreach(var fp in rc.FromProperties)
           WriteLine(fp.Name);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:03:48.343

如果您有`NavigationProperty`，它连接的字段由属性`ToEndMember`和`FromEndMember`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:34:22.020

这段代码更简单。它在我的 Visual Studio 2012 上运行良好。AssociationType 类的详细信息可以在 [http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.associationtype.aspx](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.associationtype.aspx)和[http://msdn找到.microsoft.com/en-us/library/system.data.metadata.edm.referentialconstraint.aspx](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.referentialconstraint.aspx)。

```
<#@ template language="C#" debug="true" hostspecific="true"#>
<#@ include file="EF.Utility.CS.ttinclude"#>
<#
string inputFile = @"DomainModel.edmx";

MetadataLoader loader = new MetadataLoader(this);

EdmItemCollection ItemCollection = loader.CreateEdmItemCollection(inputFile);

foreach (EntityType entity in ItemCollection.GetItems<EntityType>().OrderBy(e => e.Name))
{
    foreach (NavigationProperty navProperty in entity.NavigationProperties)
    {
        AssociationType association = ItemCollection.GetItems<AssociationType>().Single(a => a.Name == navProperty.RelationshipType.Name);
        string fromEntity = association.ReferentialConstraints[0].FromRole.Name;
        string fromEntityField = association.ReferentialConstraints[0].FromProperties[0].Name;
        string toEntity = association.ReferentialConstraints[0].ToRole.Name;
        string toEntityField = association.ReferentialConstraints[0].ToProperties[0].Name;
    }
}

#> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T01:27:07.197

请参阅[http://brewdawg.github.io/Tiraggo.Edmx/](http://brewdawg.github.io/Tiraggo.Edmx/)，您可以从 NuGet 安装它。它提供了 edmx 文件中的所有元数据，包括所有映射、每列的低级 SQL 数据类型，所有这些东西，看看页面上的示例，你会发现它是多么容易。

# android - Monodroid Listview.Adapter 与 ListActivity.ListAdapter

> ID：11695413
> 
> 赞同：1
> 
> 时间：2012-07-27T20:44:57.200
> 
> 标签：android, listview, android-listview, xamarin.android, listadapter

在我正在进行的项目中，我最初是从 ListActivity 继承的，以便在其中使用 Listviews 进行活动。但是，由于我有一个基类来制作设置菜单和其他更简单的东西，我想看看我是否可以将它切换到一个正常的活动，以便只有一个基类。但是我的问题是，对于其中一项活动，将 Listactivity.Listadapter 与我构建的适配器一起使用可以正常工作，但是当我尝试对 ListView.Adapter 使用相同的适配器时，它给了我一个 nullreferenceexeption。查看文档，看起来两者都在调用相同的对象类型（IListAdapter），而我终其一生都无法弄清楚原因。

```
 private ListView ticketView;
    List<TicketViewModel> tickets;
    List<String> ticketInfo;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        ticketView = (ListView)FindViewById(Android.Resource.Id.List);
        //pulls data from a remote source
        //and puts it into a string array
        tickets = new List<Ticket>();
        tickets = DataDownload();
        ticketInfo = new List<string>();
        foreach (Ticket tick in tickets)
        {
            ticketInfo.Add(tick.Subject);
        }

        //adapter I am using
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        Resource.Layout.itemList, ticketInfo);

        //this one works
        ListAdapter = adapter;

        //this one does not
        ticketView.Adapter = adapter;
    } 
```

我确定我遗漏了一些明显的东西，但我终其一生都无法弄清楚。

编辑：

这是日志猫

```
07-30 08:59:53.498 I/ActivityManager(  162): Starting: Intent { cmp=KahunaAndroid.KahunaAndroid/kahunaandroid.TicketList } from pid 2101
07-30 08:59:59.534 D/ViewConsistency( 2101): AbsListView android.widget.ListView@40845958 enabled= true
07-30 08:59:59.594 D/dalvikvm( 2101): GC_EXTERNAL_ALLOC freed 9K, 47% free 3405K/6407K, external 575K/587K, paused 55ms
07-30 08:59:59.604 D/ViewConsistency( 2101): AbsListView android.widget.ListView@40845958 enabled= true
07-30 09:00:02.947 D/ViewConsistency( 2101): AbsListView android.widget.ListView@40867758 enabled= true
07-30 09:00:02.947 D/ViewConsistency( 2101): AbsListView android.widget.ListView@40867758 enabled= true
07-30 09:00:03.498 W/ActivityManager(  162): Launch timeout has expired, giving up wake lock!
07-30 09:00:03.538 W/ActivityManager(  162): Activity idle timeout for HistoryRecord{40a0aa88 KahunaAndroid.KahunaAndroid/kahunaandroid.TicketList}
07-30 09:00:13.958 I/MonoDroid( 2101): UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
07-30 09:00:13.958 I/MonoDroid( 2101): at KahunaAndroid.TicketList.OnCreate (Android.OS.Bundle) [0x000aa] in C:\Users\david\Documents\Visual Studio 2010\Projects\AndroidApplication2\AndroidApplication2\Tickets\TicketList.cs:44
07-30 09:00:13.958 I/MonoDroid( 2101): at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.App.Activity.cs:1490
07-30 09:00:13.958 I/MonoDroid( 2101): at (wrapper dynamic-method) object.50e53c19-ce69-4f39-9dda-0aec4e7e7dcd (intptr,intptr,intptr) <IL 0x00012, 0x00033> 
```

和异常“System.NullReferenceException：对象引用未设置为对象的实例”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:22:53.177

使用我使用过的类似列表样式的另一个页面，我在玩了一下之后得到了这个页面。我认为是什么导致了错误（除了这个，我做了很多更改，所以有可能其他东西修复了它）是我忘记了：

```
SetContentView(Resource.Layout.itemList); 
```

在初始化列表视图之前。更改后，它按预期工作。由于我没有使用该视图来创建我正在使用的 ListView（来自 android.resource），所以我最初认为没有必要在获取 listview 项之前调用它。

# javascript - 使用 dojo AMD 加载条件模板（html）

> ID：11695420
> 
> 赞同：2
> 
> 时间：2012-07-27T20:45:39.007
> 
> 标签：javascript, dojo, amd

所以我有这个简单的要求：

```
require(['app/'+url,'dojo/text!content/'+url], function(module,template){
        if(module.init){
                module.init({
                        container: panel, 
                        containerId: 'contentTabs_' + idOp,
                        template: template
                });
        }
}); 
```

但是模板可能不存在（有时会存在）。所以无论发生什么，我都希望我的 require 回调被执行。

AMD 的方法是什么？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:56:49.043

而不是使用`dojo/text!`，编写自己的插件：

```
require(['foo/maybe!'+url], function(maybeTemplate) {
  if (maybeTemplate === undefined) {
    // it's there
  } else {
    // it's not there
  }
} 
```

`foo/maybe`必须解析为具有`load : function (id, require, callback)`成员的对象。

> ```
> load(
>   id,        // the string to the right of the !
>   require,   // AMD require; usually a context-sensitive require bound to the module making the plugin request
>   callback   // the function the plugin should call with the return value once it is done
> ) -> undefined 
> ```

您可以使用 XHR 调用来获取资源并解决`undefined`404 错误。

*   [livedocs 中的插件文档](http://livedocs.dojotoolkit.org/loader/amd#plugins)
*   [我博客上的 Dojo 插件示例](http://illegalargumentexception.blogspot.co.uk/2012/05/dojo-adding-your-own-loader-plugins.html)

# ajax - 如何在网页上部分显示pdf？

> ID：11695426
> 
> 赞同：0
> 
> 时间：2012-07-27T20:45:58.593
> 
> 标签：ajax, pdf, frameworks, web, binary

所以，这就是我想要实现的目标。我有一个服务器，它根据用户在我的网站上提供的一些参数动态生成 PDF。PDF 文件可能很大（~10-20MB），这会带来两个问题：对用户来说速度很慢，并且占用了我在 Amazon Web Services 上运行的服务器上的带宽。然而，我凭经验发现，大多数用户只看 PDF 的几页。因此，我想允许一次加载 PDF 一页，然后用户滚动将异步请求下一页。

我意识到我可以修改我的服务器代码以生成多个 pdf 而不是一个，但结果证明这非常耗时。因此，我想问是否有人遇到过这种情况？也许有一种方法可以从服务器检索 PDF 作为二进制数据，然后以某种方式以块的形式显示 PDF。

我仍处于构建网站的初始阶段，因此我愿意使用任何可以做到这一点的语言/框架/工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:50:07.217

您可以尝试从 HTML 文件转换 PDF。因此，您可以为文档的每一页创建单独的 HTML 文件，然后将所需的任何页面导出为 PDF。看看这个：[http](http://www.html2pdf.fr/en/default) : //www.html2pdf.fr/en/default 或者你可以使用 FPDF 或者你可以在那里找到的任何类。

# php - 无论如何，对具有相似名称的 MSSQL 行列中的计数进行分组。例如。思科、思科系统和思科系统公司？

> ID：11695427
> 
> 赞同：1
> 
> 时间：2012-07-27T20:46:04.933
> 
> 标签：php, html, sql-server, tsql, group-by

我正在尝试按网络上的 MAC 供应商前缀计算设备。我从数据库中返回的查询结果有计数，但供应商的名称略有不同，例如 Cisco、Cisco Systems 和 Cisco Systems Inc.。无论如何要添加所有这些并将它们表示为 Cisco 吗？

我将在 Web 前端显示这些信息。我正在使用 PHP 从这个数据库中检索数据。

思科只是这里的一个例子。它可以是具有不同名称长度的任何其他 MAC 供应商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:39:04.993

```
select substring(caseID,1,5), count(*) 
from docSVsys 
group by substring(caseID,1,5) 
```

# css - 并排 div，等高，IE7+

> ID：11695428
> 
> 赞同：0
> 
> 时间：2012-07-27T20:46:05.740
> 
> 标签：css, layout, css-float, html, semantic-markup

我试图避免在这个[jsFiddle](http://jsfiddle.net/uWyV9/)中使用布局表，我需要想出更多的语义和通用标记以及 CSS。

左栏中有图像，右栏中有说明。

然而，挑战很少：我们不知道任何像素尺寸，并且描述可能很长，这就是为什么我们不能简单地将两个 div 并排浮动。

图像也需要垂直对齐，但我们不知道容器高度或图像大小。

显示：表格不是一个选项。Javascript不是一个选项

```
<table>
 <tr>
    <td class="image">
        <img src="http://blog.stackoverflow.com/wp-content/uploads/stackoverflow-logo-300.png">
    </td>

    <td class="description">
        <p>Left section only needs to be as wide as image is, and we don't know pixel size of the image. It has to be vertically centered.</p>

        <p>Right section should take all available space left</p>

        <p>We do not know how much text will be in the right section.</p>            
        <p>We can not use display: table since solutions needs to work in IE7 as well</p>                        
    </td>
  </tr>
<table> 
```

请提出任何想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:58:30.023

这是您的解决方案：

[http://jsfiddle.net/ZXfFG/3/](http://jsfiddle.net/ZXfFG/3/)

解释：

所以你有2个问题：1）调整2列的宽度和高度。2) 垂直定位图像。

解决方案：

1）左列的宽度将自动调整，因为它会调整到其子（图像）的宽度。将其 float 属性设置为 left 会将文本粘贴在其旁边。当文本比图像短时这很好，但如果它像你提到的那样长怎么办？然后你会得到这样的东西：

![在此处输入图像描述](../Images/262f300bd0f50acc9d6e66e9e6d03b77.png)

所以我们需要让右列表现得像一个矩形。通常，您会将左列的高度设置为 100%，这样可以解决问题，但这不起作用，因为它的父级没有固定的高度。无论如何，设置右列的溢出属性将解决这个问题。

```
.right {
    overflow:hidden;
} 
```

2) 如果没有 JavaScript 或使用表格布局，则无法将图像垂直居中设置。但您可以这样做：通过将图像的可见性设置为隐藏来隐藏图像，这样左列仍将占据其宽度。然后将父容器的背景图像设置为图像并将其定位在左中心。

```
.container {
    background:url("http://www.sourcegate.com/images/stackoverflow-logo.png") left center no-repeat;  
} 
```

非 js、非表格的解决方案到此结束，但是如果在你心中的某个地方你想发现你想尝试一下 javascript，有很多方法可以做到这一点，但这就是我会做的：(1代码行）

​<code>$(".container").css('padding-left', $('img').width() + "px");​​​​​​​​​​​​​​​​ ​​</code>

[http://jsfiddle.net/GtEdc/](http://jsfiddle.net/GtEdc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:19:50.047

[YAML CSS 框架](http://www.yaml.de/docs/index.html#yaml-grids)有一个在 IE7 中工作的解决方案。如果您不想实现整个框架，您应该能够从他们的示例中获得一些想法（位于等高网格部分的网格模块下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:35:01.023

你确定你不能在这里考虑 jQuery 吗？如果你这样做了，看看这有多简单。

```
$(".column").height(Math.max($(".image").height(), $(".description").height()));
$(".column").width(Math.max($(".image").width(), $(".width").width())); 
```

这 2 行代码将生成两个等高、等宽的列。当我阅读忽略问题的答案时，我总是讨厌，而我正在这样做。但这只是乞求编写脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:37:09.610

我无法在 IE7 中对此进行测试，因为我有 IE8，但请尝试一下：

[http://jsfiddle.net/ZXfFG/1/](http://jsfiddle.net/ZXfFG/1/)

我会回复你垂直居中图像，因为这是 IE 的另一个问题，但它应该很简单`vertical-align: middle`

HTML：

```
<div class="container">
    <img src="http://www.sourcegate.com/images/stackoverflow-logo.png" />
    <div class="text">
        <p>The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog. Lorem ipsum. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog. This is filler text. The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog. Dolor ipsum valorum. The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog.The quick brown fox jumped over the lazy dog.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
</div> 
```

CSS：

```
body
{
    overflow-x: hidden;
}
.container
{
    display: inline-block;
    width: 100%;
    height: 100%;
}
.container img
{
    float: left;
    max-width: 50%;
    vertical-align: middle;
}
.text
{
    max-width: 50%;
    float: right;
}​
​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T13:14:05.750

如果您不知道来自后端的宽度，您可以使用最小宽度。

# objective-c - 除了 NSIndexSet 之外，还有什么方法可以存储通过测试的对象的索引吗？

> ID：11695433
> 
> 赞同：0
> 
> 时间：2012-07-27T20:46:40.800
> 
> 标签：objective-c, xcode, nsmutablearray, xcode4.3, nsindexset

我有一个表格和搜索栏。该表是从 SQLite DB 生成的，搜索栏搜索这些对象。我遇到的问题是当我想知道搜索结果的索引是什么时，如果我只是查看搜索结果数组并与我的数据库表行进行比较，它无法解释重复条目（http:// stackoverflow.com/questions/11617247/how-can-i-figure-out-what-uitableviewcell-im-clicking-on-during-a-search），然后我使用`indexesOfObjectsPassingTest`（http://stackoverflow.com /questions/11674498/how-can-i-determine-the-index-of-an-object-in-an-nsmutablearray-when-i-search-fo)。

现在的问题是，我得到一个 NSIndexSet 作为我的结果。我希望能够像查询 NSMutableArray 一样查询它，但我知道这是不可能的，所以我正在枚举 IndexSet，这会导致严重的内存问题，因为有超过 5,000 个可能的结果。有一个更好的方法吗？我需要确定哪些项目是搜索结果，然后我要在表中查看哪些特定结果。

```
//when the user searches, this function is called:
- (void) getGrapeMatches {
    numSearchGrapes=0;
    listOfTheGrapeIDs = [[NSMutableArray alloc] init];
    for (NSString *str in listOfGrapes)
    {
        NSRange titleResultsRange = [str rangeOfString:searchBar.text options:NSCaseInsensitiveSearch];
        if (titleResultsRange.length > 0) {
            [searchResult addObject:str];
            numSearchGrapes++;
        }
    }
    BOOL (^test)(id obj, NSUInteger idx, BOOL *stop);

    test = ^ (id obj, NSUInteger idx, BOOL *stop) {

        if ([searchResult containsObject: obj]) {
            return YES;
        }
        return NO;
    };

    //this is the part that takes forever because I have over 5000 items in listOfGrapes
    NSIndexSet *indexes = [listOfGrapes indexesOfObjectsPassingTest:test];
    NSUInteger index=[indexes firstIndex];
    while(index != NSNotFound)
    {
        NSString *tempString = [NSString stringWithFormat:@"%d",index];
        [listOfTheGrapeIDs addObject:tempString];
        index=[indexes indexGreaterThanIndex: index];
    }
} 
```

我依靠拥有，`listOfTheGrapeIDs`因为这是我稍后在表格单元格中找出我正在查看的项目的方式。我只是希望有一种更简单的方法来做到这一点。让我知道是否需要更多代码来帮助理解这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:25:20.227

转发为答案：

不确定我是否完全理解——但您的数据库不能使用 SQL 查询直接返回感兴趣的结果吗？现在您有了与您的搜索词匹配的对象。

# c - PAPI（性能应用程序编程）不能正常工作？

> ID：11695435
> 
> 赞同：0
> 
> 时间：2012-07-27T20:46:43.233
> 
> 标签：c, performance, performancecounter, papi

我从网站上下载了 4.4 版，将其构建在我自己的目录中，并尝试编写一个小主程序，它一直给我 num_counters 为零。然后我查看了 ctests 并选择了 hwinfo.c，并从中提取了一些代码（和 testlib）并将其放入一个看起来像这样的小 main 中：

```
#include <stdio.h>
#include <papi.h>

int main(int argc, char** argv)
{

    int retval, i, j;
    const PAPI_hw_info_t *hwinfo = NULL;
    const PAPI_mh_info_t *mh;

    retval = PAPI_library_init( PAPI_VER_CURRENT );
    if ( retval != PAPI_VER_CURRENT )
        cerr << "Failed at line " << __LINE__ << endl;

    retval =
        papi_print_header
        ( "Test case hwinfo.c: Check output of PAPI_get_hardware_info.\n",
          &hwinfo );
    if ( retval != PAPI_OK )
        cerr << "Failed at line " << __LINE__ << endl;
} 
```

我使用以下内容构建了它：

```
g++ main.cpp -I/home/pchan/rabbit/papi/include /home/pchan/rabbit/papi/lib/libpapi.a 
```

并运行它：

```
./a.out 
```

只是为了见证这个输出：

测试用例 hwinfo.c：检查 PAPI_get_hardware_info 的输出。

```
--------------------------------------------------------------------------------
PAPI Version             : 4.4.0.0
Vendor string and code   :  (0)
Model string and code    :  (0)
CPU Revision             : 0.000000
CPU Megahertz            : 0.000000
CPU Clock Megahertz      : 0
CPUs per Node            : 0
Total CPUs               : 0
Number Hardware Counters : 0
Max Multiplex Counters   : 0
-------------------------------------------------------------------------------- 
```

我对正在发生的事情以及为什么这不起作用有点迷失......这是什么症状，我可以尝试解决什么问题？我的处理器是 Intel Xeon X5760，我的 uname -a 说：

```
Linux chanbox 2.6.18-308.4.1.el5 #1 SMP Wed Mar 28 01:54:56 EDT 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T09:28:35.097

尝试“papi_avail -a”以了解您的 PC 支持什么。

# php - 我可以从“index.php”跟踪请求的页面/文件吗？

> ID：11695436
> 
> 赞同：-1
> 
> 时间：2012-07-27T20:46:45.280
> 
> 标签：php, html, request

假设我有一个网站，`www.someweb.com`并且我有一个`index.php`包含索引代码等的文件。

然后我有两个文件夹：`f1`和`f2`at`www.someweb.com/f1/`和`www.someweb.com/f2/`. 现在，如果用户请求`www.someweb.com/f1/somefile.abcd`我想增加一个计数器。如果用户访问`www.someweb.com/f2/somefile2.abcd`其他文件夹中具有相同扩展名的其他文件，我希望该计数器再次增加。

每当用户请求该页面时，我都想打印当前的计数器值。例子：

```
www.someweb.com/f1/somefile.abcd // counter = 1
www.someweb.com/f2/somefile2.abcd // counter = 2
www.someweb.com/f1/somefile.abcd // counter = 3 
```

等等

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:51:39.570

这就是服务器日志信息的用途。使用任何免费提供的服务器日志分析工具。

您还可以在 Web 服务器上定义一个全局服务器环境变量，并随每个请求服务器增加它。这实质上是在您的 Web 服务器环境中运行的一个小脚本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-27T20:48:43.623

将计数器存储在会话中。然后你可以增加它并从会话对象中打印出来。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-27T20:55:53.517

您需要调用`session_start()`以正确跟踪它，要求被跟踪的文件是 PHP。

我能想到的唯一方法是编写一个 PHP 函数来解析您的 Apache 日志以打印出您想要的统计信息。

# c# - 使用 Radiobutton 列创建 DataGridView

> ID：11695438
> 
> 赞同：4
> 
> 时间：2012-07-27T20:46:48.187
> 
> 标签：c#, datagridview, datagridviewcolumn

我正在尝试创建一个由 Radiobuttons 托管的 DataGridView 列。我一直在关注[这篇](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)MSDN 文章。

尽管我已经更改了教程中的代码来编写自己的类，但它并没有按预期工作。问题是我不完全确定我错过了什么。编译时不会出错。但它显示为复选框而不是单选按钮。![在此处输入图像描述](../Images/cecf687204921bd4507f7d803af40fc0.png)

我已在[此处](http://www65.zippyshare.com/v/40836887/file.html)附加了 Visual Studio 项目。对于那些不确定下载未知附件的人，这里是我写的 3 个类。

`RadiobuttonColumn`班级。它继承了`DataGridViewColumn`类。

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    class RadiobuttonColumn : DataGridViewColumn
    {
        public RadiobuttonColumn()
            : base(new RadiobuttonCell())
        {
        }

        public override DataGridViewCell CellTemplate
        {
            get
            {
                return base.CellTemplate;
            }
            set
            {
                if (value != null && !value.GetType().IsAssignableFrom(typeof(RadiobuttonCell)))
                {
                    throw new InvalidCastException("Must be a RadiobuttonCell");
                }
            }
        }
    }
} 
```

**UPDATED** `RadiobuttonCell`类继承`DataGridViewCell`类。

* * *

```
using System;
using System.Windows.Forms;
using System.Drawing;

namespace DataGridView_Radiobutton_column
{
    public class RadiobuttonCell : DataGridViewCell
    {
        public RadiobuttonCell()
            : base()
        { 
        }

        public override void InitializeEditingControl(int rowIndex, object initialFormattedValue, DataGridViewCellStyle dataGridViewCellStyle)
        {
            base.InitializeEditingControl(rowIndex, initialFormattedValue, dataGridViewCellStyle);
            RadiobuttonEditingControl rdb = DataGridView.EditingControl as RadiobuttonEditingControl;
            if (this.Value == null)
            {
                rdb.Checked = false;
            }
            else
            {
                rdb.Checked = (Boolean)this.Value;
            }
        }

        public override Type EditType
        {
            get
            {
                return typeof(RadiobuttonEditingControl);
            }
        }

        public override Type ValueType
        {
            get
            {
                return typeof(Boolean);
            }
        }

        public override object DefaultNewRowValue
        {
            get
            {
                return false;
            }
        }

        protected override void Paint(System.Drawing.Graphics graphics, System.Drawing.Rectangle clipBounds, System.Drawing.Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState, object value, object formattedValue, string errorText, DataGridViewCellStyle cellStyle, DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
        {
            base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState, value, formattedValue, errorText, cellStyle, advancedBorderStyle, paintParts);

            Rectangle rectRadioButton = default(Rectangle);

            rectRadioButton.Width = 14;
            rectRadioButton.Height = 14;
            rectRadioButton.X = cellBounds.X + (cellBounds.Width - rectRadioButton.Width) / 2;
            rectRadioButton.Y = cellBounds.Y + (cellBounds.Height - rectRadioButton.Height) / 2;

            ControlPaint.DrawRadioButton(graphics, rectRadioButton, ButtonState.Normal);
        }
    }
} 
```

该类`RadiobuttonEditingControl`继承`RadioButton`该类并实现`IDataGridViewEditingControl`接口的方法。

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    class RadiobuttonEditingControl : RadioButton, IDataGridViewEditingControl
    {
        DataGridView dataGridView;
        private bool valueChanged = false;
        int rowIndex;

        public RadiobuttonEditingControl()
        {
            this.Checked = false;
        }

        public object EditingControlFormattedValue
        {
            get
            {
                return this.Checked = true;
            }
            set
            {
                this.Checked = false;
            }
        }

        public object GetEditingControlFormattedValue(DataGridViewDataErrorContexts context)
        {
            return EditingControlFormattedValue;
        }

        public void ApplyCellStyleToEditingControl(DataGridViewCellStyle dataGridViewCellStyle)
        {
        }

        public int EditingControlRowIndex
        {
            get
            {
                return rowIndex;
            }
            set
            {
                rowIndex = value;
            }
        }

        public bool EditingControlWantsInputKey(Keys key, bool dataGridViewWantsInputKey)
        {
            switch (key & Keys.KeyCode)
            {
                case Keys.Space:
                    return true;
                default:
                    return !dataGridViewWantsInputKey;
            }
        }

        public void PrepareEditingControlForEdit(bool selectAll)
        {
        }

        public bool RepositionEditingControlOnValueChange
        {
            get
            {
                return false;
            }
        }

        public DataGridView EditingControlDataGridView
        {
            get
            {
                return dataGridView;
            }
            set
            {
                dataGridView = value;
            }
        }

        public bool EditingControlValueChanged
        {
            get
            {
                return valueChanged;
            }
            set
            {
                valueChanged = value;
            }
        }

        public Cursor EditingPanelCursor
        {
            get
            {
                return base.Cursor;
            }
        }

        protected override void OnCheckedChanged(EventArgs eventArgs)
        {
            valueChanged = true;
            this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
            base.Checked = false;
        }
    }
} 
```

如果有人可以看看这个并指出我应该在代码中进行哪些更改的正确方向，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:54:31.763

当您开始编辑单元格时会发生什么？它变成一个单选按钮。

这是因为您从一个将自身绘制为复选框的复选框单元格派生而来。

DGV 不是控制网格。它是一个框格，在用户尝试编辑单元格之前，它们被绘制成看起来像控件的样子。此时，DGV 将单元格的（一个也是唯一的）编辑控件移动到适当的位置，并使其可见以供用户交互。

您将不得不从基础 DataGridViewCell 类派生并实现所有绘画代码。

示例代码不必这样做，因为文本框单元格知道如何绘制文本。

**更新**

[ControlPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.aspx)类可以帮助您。

# sql - 获取结果的 SQL 查询

> ID：11695439
> 
> 赞同：0
> 
> 时间：2012-07-27T20:46:50.163
> 
> 标签：sql, sql-server, sql-server-2008

**表格1**

```
CutomerID    Salary   
1             2000              
2             3000              
3             4000      
4             6000      
5             5220 
```

**表 2**

```
 DeptID  DeptNam
  1       IT                           
  2       Finance                
  3       Marketing 
```

**表3**

```
 CustomerID    DeptID
    1            1
    2            1 
    3            2
    4            3
    5            3 
```

问题：找出每个部门薪水最高的人

要返回的行： `CustomerID DeptName Salary`

问题：找出每个部门薪水最高的人

要返回的行： `CustomerID DeptName Salary`

任何人都可以帮我解决如何为此编写 SQL 查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:53:40.270

对于 SQL Server 2005+：

```
;WITH CTE AS
(
    SELECT T1.*, T3.DeptID, RANK() OVER(PARTITION BY T3.DeptID ORDER BY T1.Salary DESC) RN
    FROM Table1 AS T1
    INNER JOIN Table3 AS T3
    ON T1.CustomerId = T3.CustomerId
)
SELECT A.CustomerId, B.DeptName, A.Salary
FROM CTE A
INNER JOIN Table2 B
ON A.DeptID = B.DeptID
WHERE RN = 1 
```

您应该考虑到，如果每个部门的最高工资重复，则此查询将为每个部门返回多个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:00:32.723

从 SQL-Server 2005 及更高版本开始，使用`CTE`with[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数：

找出每个部门薪水最高的人

```
WITH CTE AS
(
    SELECT t1.CustomerID ,t2.DeptName, t1.Salary , SalaryRank = 
      ROW_NUMBER()OVER(PARTITION BY t2.DeptID ORDER BY t1.Salary DESC)
    FROM Table1 t1
    INNER JOIN Table3 t3 ON t1.CustomerID=t3.CustomerID
    INNER JOIN Table2 t2 ON t3.DeptID=t2.DeptID
)
SELECT CustomerID, DeptName, Salary FROM CTE
WHERE SalaryRank = 1 
```

这是**sql-fiddle**：[http ://sqlfiddle.com/#!3/41ff1/2/0](http://sqlfiddle.com/#!3/41ff1/2/0)

* * *

如果您想返回多个具有相同薪水的客户，请使用@Lamak 建议[`RANK`](http://msdn.microsoft.com/en-us/library/ms176102%28v=sql.100%29.aspx)的而不是。`ROW_NUMBER`

以下是差异： http: [//mangalpardeshi.blogspot.de/2008/10/difference-between-rownumber-rank-and.html](http://mangalpardeshi.blogspot.de/2008/10/difference-between-rownumber-rank-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:43:21.667

```
SELECT a.customerid,
       c.deptnam,
       a.salary
FROM   table1 a
JOIN   table3 b ON a.customerid = b.customerid
JOIN   table2 c ON b.deptid = c.deptid
JOIN
(
    SELECT   aa.deptid, MAX(bb.salary) AS maxsalary
    FROM     table3 aa
    JOIN     table1 bb ON aa.customerid = bb.customerid
    GROUP BY aa.deptid
) d ON a.salary = d.maxsalary AND c.deptid = d.deptid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T06:23:06.503

尝试这个：

```
CREATE TABLE cust(CutomerID int,Salary float)

INSERT INTO cust
VALUES(1,2000),(2,3000),(3,4000),(4,6000),(5,5220)

CREATE TABLE dept(DeptID int,DeptNam varchar(10))

INSERT INTO dept
VALUES(1,'IT'),(2,'Finance'),(3,'Marketing') 

CREATE TABLE custDept(CustomerID int,DeptID int)

INSERT INTO custDept
VALUES(1,1),(2,1),(3,2),(4,3),(5,3)

select a.CutomerID,a.DeptNam,b.sal  from 

(select c.CutomerID ,d.DeptID,c.Salary,d.DeptNam  from cust c inner join custDept cd on 
c.CutomerID = cd.CustomerID 
inner join dept d
on cd.DeptID =d.DeptID) a

inner join 
(select d.DeptID ,MAX(c.Salary) as sal  from cust c inner join custDept cd on 
c.CutomerID = cd.CustomerID 
inner join dept d
on cd.DeptID =d.DeptID
group by  d.DeptID) b

on a.DeptID = b.DeptID and a.Salary = b.sal 
```

# python - 如何在 Python 中执行代码字符串？

> ID：11695445
> 
> 赞同：3
> 
> 时间：2012-07-27T20:47:09.913
> 
> 标签：python, execute, execfile

我知道这里有一个类似的问题，但我有一个不同的问题。

我在插件中有一些代码文件，但插件使用只有软件知道的内部路径，所以我无法访问该路径以将其与`execfile`.

但是有一个名为 的内部 python 函数`readInternalFile (path)`，我可以在其中使用这个内部路径并将这个文件的内容作为字符串返回。

所以我想我可以使用标准的python函数`exec`，但是一旦我这样做，它就会抱怨第一行是'\r\n'。

我怎样才能解决这个问题？我打印数据`readInternalFile`返回的类型，它是`str`，所以一切都应该没问题，对吧？

文件中的代码自行工作，没有语法错误等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:02:47.960

```
s1 = readInternalFile(path)
statements = s1.split("\r\n")
for stmt in statements:
    exec(stmt) 
```

应该管用

```
>>> s1 = "a=32\r\nb=a+5\r\nprint b"
>>> statements = s1.split("\r\n")
>>> for stmt in statements:
...    exec(stmt)
...
37
>>> 
```

或者你可以用“;”替换结束线 像这样

```
>>> s1 = "a=32\r\nb=a+5\r\nprint b"
>>> s2 = s1.replace("\r\n",";")
>>> exec(s2)
37 
```

我还应该提到，通常使用 exec 是一个坏主意......

如果您切换结束行编码，这也会中断....

# java - 选择列表中的项目，在文本区域显示文本

> ID：11695454
> 
> 赞同：1
> 
> 时间：2012-07-27T20:47:46.440
> 
> 标签：java, swing, user-interface, jlist, jtextarea

我正在草拟一个 gui 的草稿，查看不同的选项。我想使用 a根据选择的*项目*`JList`在 a 中显示文本。你可以看到左边和中间的。`JTextArea`*`JList``JTextArea`*

 *还是有更好的方法来做到这一点？我已经在使用将用于广泛类别的选项卡。我看到了`CardLayout`，但不太喜欢它的外观。有小费吗？

![在此处输入图像描述](../Images/cc91584f23b74c934da9e7bc9013a97c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:54:00.357

使用在 中选择的项目的位置`JList`来告诉您`JTextArea`在中间设置什么文本。设置一个`listener`并`JList`检查`onChange`事件。获取所选元素的索引。在某处的数组中，使用该索引来获取映射到`JList`所选元素的相关文本。然后将 的文本设置为`JTextArea`您从数组中获取的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:58:49.603

好吧，您可以使用 ListSelectionListener 相应地设置内容..

```
 JList list = new JList(someArrayofData);
 list.addListSelectionListener(new ListSelectionListener(){
      public void valueChanged(ListSelectionEvent e){
            int selectedIndex = list.getSelectedIndex();
            //refresh the content based on the index
            setContent(selectedIndex);
      }
}); 
```

在不知道应用程序的用途的情况下，很难说哪种 gui 布局最适合您。*

# java - JSP中的无效会话

> ID：11695457
> 
> 赞同：0
> 
> 时间：2012-07-27T20:48:03.657
> 
> 标签：java

我正在开发一个用户可以登录系统的应用程序，如果另一个用户尝试使用已登录用户的相同 id 和密码登录，我需要使该用户的会话无效已经登录和让他/她回到第一页并使用新用户登录。

我该如何开发这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:51:03.583

您可能需要在应用程序范围/数据库中跟踪已登录的用户。对于每个用户，当您尝试创建会话时，请确保不存在其他会话。如果使用[SessionListeners](http://www.coderanch.com/t/365859/Servlets/java/session-object-session-ID)存在，您可能需要执行[session invalidate](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#invalidate%28%29)。

# objective-c - 监听不同文件中的变量？

> ID：11695458
> 
> 赞同：1
> 
> 时间：2012-07-27T20:48:09.053
> 
> 标签：objective-c, ios, jailbreak

正如我所说，Objective-C 是全新的。不过，我有几年的编程经验，而且我学得很快。

**一般问题**：我想监听不同文件中的变量，然后执行特定操作以响应对该变量的更改。

**具体问题**：我想修改 iPhone 显示 WiFi 信号的方式。目前它有*4*个状态，但我想让它有*8*个状态。我希望以某种方式收听（或定期读取）变量`wifiSignalStrengthRaw`，`SBStatusBarDataManager.h`然后显示它。

**问题**：阅读或聆听该变量的最佳方法是什么？

编辑：*次要问题*：有没有办法分析已经在 Obj-C 中编译的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:12:48.123

你真正想要的是[Key-Value Observing](http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。无需修改 NSNotificationcenter 等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T01:07:26.393

Key Value Observing 是一个很棒的功能，但它不能（直接）帮助您解决这个特定问题。对于那些不熟悉他所指的类的人来说，它是 iOS SpringBoard 本身的一个私有类。因此，他无法控制它如何*发布*他感兴趣的数据。

你不能只*观察*任何旧数据。它必须被编码为符合键值观察 (KVO) 标准。如果您查看[SBStatusBarDataManager.h](https://github.com/peterhajas/SpringBoard-4.x-Headers/blob/master/SBStatusBarDataManager.h)（这是 iOS 4 版本...生成您需要的版本`class-dump`）...您会发现它不是这样编码的 :(

但是，无论如何，您都可以使用一些动态的 Objective-C 运行时特性来获取数据。请参阅[此处直接获取私有/受保护的实例变量](https://stackoverflow.com/a/1219938/119114)。

然后，只需在本地声明一个结构以匹配跳板标头中的内容，然后执行以下操作：

```
// this was coded to match the iOS 5.0 header, but of course, this may
// change with each iOS version
typedef struct {
    char itemIsEnabled[23];
    char timeString[64];
    int gsmSignalStrengthRaw;
    int gsmSignalStrengthBars;
    char serviceString[100];
    char serviceCrossfadeString[100];
    char serviceImages[3][100];
    char operatorDirectory[1024];
    unsigned int serviceContentType;
    int wifiSignalStrengthRaw;
    int wifiSignalStrengthBars;
    unsigned int dataNetworkType;
    int batteryCapacity;
    unsigned int batteryState;
    char notChargingString[150];
    int bluetoothBatteryCapacity;
    int thermalColor;
    unsigned int thermalSunlightMode:1;
    unsigned int slowActivity:1;
    unsigned int syncActivity:1;
    char activityDisplayId[256];
    unsigned int bluetoothConnected:1;
    unsigned int displayRawGSMSignal:1;
    unsigned int displayRawWifiSignal:1;
} SbStatusBarDataType; 
```

按名称检索 ivars 的助手：

```
#import <objc/runtime.h>

- (void *) instanceVariableForObject: (id)obj andKey: (NSString *)key {
    if (key != nil) {
        Ivar ivar = object_getInstanceVariable(obj, [key UTF8String], NULL);
        if (ivar) {
            return (void *)((char *)obj + ivar_getOffset(ivar));
        }
    }
    return NULL;
} 
```

最后，像这样获取数据：

```
// get an instance to the data manager this way, or however you're 
//  doing it via Mobile Substrate
SBStatusBarDataManager* mgr = [SBStatusBarDataManager sharedDataManager];
SbStatusBarDataType data = *(SbStatusBarDataType*)[self instanceVariableForObject: mgr andKey: @"_data"];
int signalStrength = data.wifiSignalStrengthRaw; 
```

然后，您可以在您认为足够快的某个时间间隔内重复查询此数据。

否则，请尝试查看 SBStatusBarDataManager.h 中的**方法**。看起来它们中的一些可能会在信号强度变化的精确时间被调用。如果您*挂钩*这些方法，您可能能够*推送*数据已更改的通知，这样您就不必不断地轮询数据。

例如：

```
- (void)_dataChanged;
- (void)_updateSignalStrengthItem;
- (void)_signalStrengthChange; 
```

如果您想确定 WiFi 信号强度何时发生变化，那么所有这些看起来都适合挂接。但是，我对这些没有经验，这将是您的反复试验。祝你好运！

*与您的次要*问题有关的一些参考资料：

[类转储](http://www.codethecode.com/projects/class-dump/)

[关于 Obj-C 运行时 API 的 Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T20:55:02.930

使用 NSNotificationCenter 向/从不同的类发送值。[这是一个在 Objective-C 中使用 NSNotifications 通过 NSNotificationCenter 发送和接收消息](https://stackoverflow.com/questions/2191594/how-to-send-and-receive-message-through-nsnotificationcenter-in-objective-c)的好例子 ？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T20:57:52.247

查看[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)。当变量更改发布到通知中心时，这将允许您向变量添加侦听器。然后，您可以在任何课程中“听到”这些变化。

NotificationCenter 的 Apple 文档描述：

> NSNotificationCenter 对象（或简称为通知中心）提供了一种在程序中广播信息的机制。NSNotificationCenter 对象本质上是一个通知调度表。

快速示例：

添加监听器

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
                                          selector:@selector(showMainMenu:) 
                                              name:@"loginComplete" object:nil]; 
```

发布通知 loginComplete

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"loginComplete" object:nil]; 
```

听到通知。

```
- (void)showMainMenu:(NSNotification *)note {
     NSLog(@"Received Notification - Someone seems to have logged in"); 
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T20:53:09.950

如果您是对要侦听的变量进行更改的人，则应使用观察者模式。

这是一个帮助您入门的教程：[Objective-C 中的模式：观察者模式](http://www.numbergrinder.com/2008/12/patterns-in-objective-c-observer-pattern/)

还可以看看关于 SO 的问题：[What's the best way to doobserver/observable in objective-c (iphone version)](https://stackoverflow.com/questions/165790)

# wpf - RadGridView 隐藏子指示器

> ID：11695459
> 
> 赞同：0
> 
> 时间：2012-07-27T20:48:10.613
> 
> 标签：wpf, telerik

有没有办法隐藏儿童加号指示器。我想在某些条件适用时隐藏它。

![在此处输入图像描述](../Images/867e8d329ec18525d10a4df4ca5fa220.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:49:06.047

我刚刚遇到了一个非常相似的问题并解决了它：

将此部分添加到您的顶级（父）网格视图：

```
 <telerik:RadGridView.Columns>
.
... your top level columns here
.
                </telerik:RadGridView.Columns>

                <telerik:RadGridView.ChildTableDefinitions>
                    <telerik:GridViewTableDefinition />
                </telerik:RadGridView.ChildTableDefinitions>

                <telerik:RadGridView.RowStyleSelector>
                    <telerik:ConditionalStyleSelector>
                        <telerik:StyleRule Condition="expandable">
                            <Style TargetType="telerik:GridViewRow">
                                <Setter Property="IsExpandable" Value="True" />
                            </Style>
                        </telerik:StyleRule>
                        <telerik:StyleRule Condition="Not expandable">
                            <Style TargetType="telerik:GridViewRow">
                                <Setter Property="IsExpandable" Value="False" />
                            </Style>
                        </telerik:StyleRule>
                    </telerik:ConditionalStyleSelector>
                </telerik:RadGridView.RowStyleSelector> 
```

然后在您的行 ViewModel 中声明“可扩展”属性，如果该行必须显示加/减图像，则该属性应评估为 true。

这是我的：

```
 public bool expandable
    {
        get { return (this.row.Count() > 0); }
    } 
```

它在这里完美运行！

希望有帮助，马里奥

# mongodb - MongoDB 查询间歇性失败

> ID：11695466
> 
> 赞同：1
> 
> 时间：2012-07-27T20:48:44.810
> 
> 标签：mongodb, mongodb-.net-driver

我在查询 mongo 时遇到了一个奇怪的问题。我插入了一堆这样的记录；

```
{
  "_id" : "1f0aad54-85ef-446c-a02b-76bb0235e49c",
  "internalId" : new BinData(3, "VP0LH++FbESgK3a7AjXknA=="),
  "Data" : [
        ["otherId", "5e3b3293-ec93-469a-ba46-101a1feb1155"], 
        ["test", "test"], 
        ["test2", "test2"]
  ]
} 
```

然后我做一个简单的查询；

```
db.testCollection.find("Data.otherId" : "5e3b3293-ec93-469a-ba46-101a1feb1155") 
```

otherId 是一个 .net guid.ToString() - 显然是几个随机的......有时这些会返回。有时他们没有。db.find() 显示它们，但显式查询它似乎随机返回 0 行。

我无法解释为什么查询会间歇性地找不到这些。我已经在我的分片集群和我的本地实例上进行了测试，这只是开箱即用的香草。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:08:41.523

您使用了错误的选择器。如果您的数据是：

```
{
  "_id" : "1f0aad54-85ef-446c-a02b-76bb0235e49c",
  "internalId" : new BinData(3, "VP0LH++FbESgK3a7AjXknA=="),
  "Data" : {
        "otherId" "5e3b3293-ec93-469a-ba46-101a1feb1155", 
        "test": "test",
        "test2": "test2"
  }
} 
```

那个选择器是正确的，但是你有数组，所以你应该使用这个选择器：

```
db.testCollection.find({"Data.0" : ["otherId","5e3b3293-ec93-469a-ba46-101a1feb1155"]}) 
```

（我刚刚测试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T00:04:35.103

我遇到了同样的问题，结果证明它与 Mongo 无关，而是调用 Node.js 应用程序中的异步竞争条件。

我无意中将程序样式仅用于一个执行路径，因此插入和选择查询没有按照我想象的顺序运行。插入是异步的，但是选择是在外部方法中运行的，而不是在回调中。有时插入确实首先到达那里，大概是由于 Node.js 中的滴答机制的一些怪癖。

在 C# 中，我认为 async/await 模式不太容易犯这种错误，因为它更明确的 await 语法，这实际上导致了看起来像过程的代码，并且不依赖于嵌套回调。但也许它仍然有可能像我一样傻。

# python - 3 和 5 的倍数相加时的整数溢出

> ID：11695467
> 
> 赞同：0
> 
> 时间：2012-07-27T20:48:48.497
> 
> 标签：python

我确信这个问题已经被问了很多，但我检查了其他论坛并尝试解决这个问题，这似乎没有帮助。我在想有一个溢出问题，但我不记得如何解决它。我从编码中休息了很长时间（我的错在那里），所以我正在尝试一些问题来帮助我重新开始工作。所以，只是想知道出了什么问题。当我尝试时`n = 1000`，答案是错误的，但比这小的数字似乎是正确的。由于大数字不起作用，我认为这是一个整数溢出。

```
def n_number():
    n = raw_input("Enter a max number: ")
    try:
        int(n)
        return n

    except ValueError:
        print 'Value is not an integer'
        exit(1)

# 'function that will add multiples of 3 and 5 that are less than the given value, n.'
def sum_multiplies(n):
    sum = long(0)
    counter3, counter5 = int(1),int(1)

    value3 = 3*counter3
    value5 = 5*counter5

    while True:
        # 'sums of multiples of 5\'s less than n'
        if value5<int(n):
            sum+= value5
            counter5+=1
            value5 = 5*counter5

        # 'sums of multiples of 3\'s less than n'
        if value3<int(n):
            sum+= value3
            counter3+=1
            value3 = 3*counter3

        else:
            break

    print "sum: %s" %sum
    print "counter3: %s" %counter3
    print "counter5: %s" %counter5

def main():
    'max number is in n'
    n = n_number()

    sum_multiplies(n)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:53:26.543

问题是你计算的是 3 和 5 的倍数（比如 15）两次。

解决它的一种方法是添加：

```
if counter3%5 == 0: continue 
```

跳过重复计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:05:08.670

您目前正在及时执行此`O(n)`操作 - 您可以在恒定时间内执行此操作！

```
' sum values from 1 to m'
def unitSum(m):
    return (m * (m + 1)) / 2

def sum_multiplies(n):
    threes = int(n / 3)
    fives = int(n / 5)
    fifteens = int(n / 15)
    threesum = unitSum(threes) * 3
    fivesum = unitSum(fives) * 5
    fifteensum = unitSum(fifteens) * 15
    return threesum + fivesum - fifteensum 
```

你必须原谅我缺乏python知识，我是一个java人。可能会有一些偶然的语法错误。但这里的想法是，对于 的示例`n = 40`，您将 相加`3 5 6 9 10 12 15 18 20 21 24 25 27 30 33 35 36 39 40`。这与`3 6 9 12 15 18 21 24 27 30 33 36 39 UNION 5 10 15 20 25 30 35 40`现在认识到`3 6 9 12 ...`与 相同，并且与五相同`3 * (1 2 3 4...)`，我们可以将“单位和”（与. 好消息是单位和可以在恒定时间内计算，因为唯一的问题是 15 的倍数将在那里两次（在 5s 和 3s 中计算）所以我们必须将它们减去也是。`1 2 3 4``n / mult``3 * (1 2 3 4)``n * (n + 1)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:31:09.410

它应该非常快，非常易读，并且可以在 CPython 2.x 和 3.x 上运行。我已经 #!'d 给 pypy 了，但这不是没有必要的。注意 range() 在 2.x 上是急切的，在 3.x 上是懒惰的：

```
#!/usr/local/pypy-1.9/bin/pypy

divisible_by_3 = set(range(0, 1000, 3))
divisible_by_5 = set(range(0, 1000, 5))

divisible_by_either = divisible_by_3 | divisible_by_5

print(sum(divisible_by_either)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T20:54:20.723

看起来你在重复计算 15 的倍数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T21:34:30.580

使用生成器表达式，这是一个单行

```
result = sum(num for num in xrange(1000) if (num % 5 ==0) or (num % 3 == 0)) 
```

# php - 浏览到图像文件，然后附加到 PHP 邮件

> ID：11695472
> 
> 赞同：1
> 
> 时间：2012-07-27T20:49:26.663
> 
> 标签：php, html, email, attachment

我不是这方面的专家，所以请原谅我提出这样一个（可能）愚蠢的问题。

我需要帮助设置（在 html 页面上）一种方法，允许访问者浏览到他们计算机上的文件（实际上是 2 个文件），当他们选择提交时，该文件将附加到 PHP 邮件表单。

我知道对于 PHP 邮件图像，我需要使用 PearMime 或 PHPMailer 之类的东西。

****更新****

好的，现在我知道如何放置 HTML 表单来获取文件了。当我使用以下 PHP 时，我做错了什么？我有 2 个通过 ID 从 HTML 页面请求的文件（HTML 正确创建了两个文件），即 PHPMailer_5.2.1 的位置，$mail->MsgHTML(file_get_contents('testfiles.html')); 实际上正在查看我在该位置创建的一个 html 页面，该页面只有一个 html 文档的模板启动器，正文中带有 Sample 一词。

```
<?php

require("PHPMailer_5.2.1/class.phpmailer.php");

$mail = new PHPMailer(); //defaults to using php "mail()"; the true param means it will throw exceptions on errors, which we need to catch

$file1 = $_REQUEST['file1'];
$file2 = $_REQUEST['file2'];

try {
  $mail->AddReplyTo('myemail@domain.com', 'FirstName LastName');
  $mail->AddAddress('myemail@domain.com', 'FirstName LastName');
  $mail->SetFrom('myemail@domain.com', 'FirstName LastName');
  $mail->AddReplyTo('myemail@domain.com', 'FirstName LastName');
  $mail->Subject = 'PHPMailer Test Subject via mail(), advanced';
  $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
  $mail->MsgHTML(file_get_contents('testfiles.html'));
  $mail->AddAttachment($file1);      // attachment
  $mail->AddAttachment($file2); // attachment
  $mail->Send();
  echo "Message Sent OK</p>\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:52:34.607

您正在寻找 HTML 属性？

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" /> 
```

在您的标签中非常重要，`enctype="multipart/form-data`否则将不允许附加图像。然后您的 PHP 脚本应根据需要处理这些字段。祝你好运 ：）

# c# - 当由事件聚合器引发时，如何限制事件订阅的数量？

> ID：11695473
> 
> 赞同：2
> 
> 时间：2012-07-27T20:49:31.493
> 
> 标签：c#, wpf, prism, eventaggregator

我需要限制使用事件聚合器引发的事件的订阅数量，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T20:52:38.417

您可以检查您的活动`InvocationList.Count`的`add`方法。

像这样的东西：

```
private EventHandler MyEventDel;       

   public event EventHandler ExplicitEvent
    {
        add
        {
            if (MyEventDel.GetInvocationList().Count() < 10)
            {
                MyEventDel+= value;
            }
        }
        remove
        {
            MyEventDel-= value;
        }
    } 
```

# java - JAXB 生成的类给定命名空间无法解析错误

> ID：11695474
> 
> 赞同：1
> 
> 时间：2012-07-27T20:49:33.733
> 
> 标签：java, namespaces, xsd, jaxb, jaxb2

参考我之前的 2 篇文章（[第 1](https://stackoverflow.com/questions/11620825/xsd-for-having-2-root-elements-1-at-a-time/11623044#11623044)篇、[第 2](https://stackoverflow.com/questions/11658181/unable-to-understand-jaxb-unmarshalling-behaviour)篇文章）。现在我陷入了另一个奇怪的问题（我是 JAXB 的菜鸟）。我使用 book.xsd 生成了 Java 类（其中包括 bookList 和 book 作为根元素）。一切正常。现在我正在为**评论**创建完全独立的 XSD 。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="reviews">
    <xs:complexType>
         <xs:sequence>
             <xs:element name="review" type="reviewType" minOccurs="0" maxOccurs="unbounded"/>
         </xs:sequence>
         <xs:attribute name="self" type="xs:anyURI" />
    </xs:complexType>
</xs:element>

<xs:complexType name="reviewType">
    <xs:sequence>
        <xs:element name="name" type="xs:string" minOccurs="1" maxOccurs="1" />
        <xs:element name="comments" type="xs:string" minOccurs="1" maxOccurs="1" />
        <xs:element name="rating" type="xs:integer" minOccurs="1" maxOccurs="1" />
    </xs:sequence>
     <xs:attribute name="self" type="xs:anyURI" />
</xs:complexType> 
```

现在，当我使用 JAXB 生成 java 类时，它开始给我以下错误，例如`The element declaration with name 'reviews' and namespace '' cannot be resolved`.

任何想法 ？

**更新我发现我正在使用一个 common.xsd，它具有跨多个 xsd 使用的基本信息**。**诸如此类的信息`authorType`现在 common.xsd 也被我的 books.xsd 和 reviews.xsd 使用，这可能就是我收到此命名空间错误的原因。我怎样才能在这里避免这个错误？**

 **Schema 已经在这里了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:29:22.040

您必须将架构的元素放入命名空间，因为 JAXB 似乎无法解析“评论”（位于全局命名空间“”中。两个 tic 表示“一个空的命名空间”）。您可以通过像这样修改架构的标头来做到这一点：

```
<?xml version='1.0' encoding='UTF-8'?>
<xs:schema targetNamespace="http://your/namespace/goes/here"
 xmlns="http://your/projects/namespace/goes/here"
 xmlns:xs='http://www.w3.org/2001/XMLSchema'
 elementFormDefault='qualified'> 
```

第 2 行将您的命名空间定义为模式的目标命名空间。第 3 行将您的命名空间放入 .xsd 文件的全局命名空间中（因此您不必为元素添加前缀，就像在架构的元素前添加 xs:)。如果您想在整个架构中使用它，您当然可以将该行更改为您自己的前缀：

```
 xmlns:mylib="http://your/namespace/goes/here" 
```

此外，由于您的元素现在位于命名空间中，因此您必须告诉 XML 文件在哪个命名空间中查找元素（您可以同时拥有多个命名空间）：

```
 <reviews xmlns="http://your/namespace/goes/here">
 ....
 </reviews> 
```

对于 Schema 命名空间的更深入讨论，我推荐这本书：XML Schema，作者：Eric van der Vlist，O'REILLY**

# java - 使用Java从终端打开一个mac应用程序

> ID：11695475
> 
> 赞同：0
> 
> 时间：2012-07-27T20:49:36.883
> 
> 标签：java, terminal, escaping, backslash

可以说我有这个代码

```
import java.io.IOException;

public class Test
{
 public static void main(String[] argv) throws InterruptedException, IOException {
    String path = "/an app with spaces.app";
    path = path.replaceAll(" ", "\\\\ ");
    System.out.println(path);
    Runtime.getRuntime().exec( new String[] { "open", path} );
     Runtime.getRuntime().exec("syslog -s -l " + path);
 }
} 
```

问题是当我在 print 中输出路径并在终端中尝试命令时，它会打开应用程序，但是当我尝试从 Java 执行命令时，它就会关闭，也许是转义反斜杠的问题？我要做的就是打开一个名称中带有空格的应用程序，无论是否使用终端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:24:24.480

使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)而不是 Runtime.exec()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:06:22.740

无需使用`exec`.

我已经尝试了您的代码，删除了`replaceAll`，并打开了一个应用程序，应用程序名称**中**包含空格，包含目录中包含空格，并且代码启动了应用程序。

此外，`syslog -l`需要一个日志级别参数。

# php - 扩展 MySQL 语句

> ID：11695476
> 
> 赞同：1
> 
> 时间：2012-07-27T20:49:54.520
> 
> 标签：php, mysql, codeigniter

是否可以在 CodeIgniter 或 PHP 中扩展 MySQL 语句。例如。如果我有`$query1`. 我可以`$query1`在另一个`$this->db->query()`实例中添加：

```
$query1 = this->db->query("SELECT * FROM users WHERE a = b");

$query1(or 2) = $this->db->query("AND b = c"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:55:39.660

将您的语句放入 var 并在需要时扩展字符串：

```
$strStatement = "SELECT * FROM users WHERE a = b";

if ( /* whatever */ )
{
    $strStatement .= " AND b = c";
}

$objResult = $this->db->query( $strStatement ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:53:48.230

[查看文档](http://codeigniter.com/user_guide/database/active_record.html)。这可以通过以下方式完成（作为一个示例）：

```
$this->db->where('a', 'b');
if($condition)
{
    $this->db->where('b', 'c');
}
$this->db->get('users'); //implicitly runs a "SELECT *" 
```

# asp.net-mvc - 使用 Automapper 将服务结果映射到视图模型

> ID：11695479
> 
> 赞同：1
> 
> 时间：2012-07-27T20:50:12.000
> 
> 标签：asp.net-mvc, domain-driven-design, automapper

我正在尝试将服务结果映射到特定的视图模型。我有一个名为 Category 的实体，其中包含一个 Id 和一个名称。我通过存储库 ICategoryRepository 公开它。我有一个服务 IInfrastructureService，它使用类别存储库来获取所有类别。GetAllCategories 返回一个 IList。在我的 MVC 项目中。我有一个名为 NavigationController 的控制器。此控制器需要调用 GetAllCategories 服务。我想将此结果映射到这样的结构中：

```
public class CategoryViewModel {
    public Guid CategoryId { get; set; }
    public string Name { get; set; }
}

public class CategoryMenuViewModel {
    public IList<CategoryViewModel> Categories { get; set; }
    public CategoryViewModel SelectedCategory { get; set; }
} 
```

我想使用 Automapper 来做到这一点。在我的 Application_Start() 中，我创建了地图：

```
Mapper.CreateMap<Category, CategoryViewModel>(); 
```

然后在我的控制器中：

```
public ViewResult CategoryMenu()
{
    CategoryMenuViewModel viewModel = new CategoryMenuViewModel();
    Mapper.CreateMap<Category, CategoryViewModel>();
    viewModel.Categories = Mapper.Map<IList<Category>, IList<CategoryViewModel>>(_infrastructureService.GetAllCategories());
    return View(viewModel);
} 
```

这给了我这个例外：程序集中的类型名称重复。

我不确定我在这里做错了什么。任何帮助或指导都会动摇！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T06:14:33.703

`Mapper.CreateMap`你为什么在你的控制器内部打电话？这应该在 AppDomain 的整个生命周期内只调用一次，最好是在`Application_Start`. 在控制器内部，您`Mapper.Map`只调用该方法。

您收到异常的原因是您已经在 Application_Start 中定义了 Category 和 CategoryViewModel 之间的映射 (.CreateMap)。所以：

```
public ViewResult CategoryMenu()
{
    var categories = _infrastructureService.GetAllCategories();
    CategoryMenuViewModel viewModel = new CategoryMenuViewModel();
    viewModel.Categories = Mapper.Map<IList<Category>, IList<CategoryViewModel>>(categories);
    return View(viewModel);
} 
```

# sql - 无法使用域用户在 Linux 上使用 perl Sybase dbi 连接到 mssql 2008

> ID：11695480
> 
> 赞同：3
> 
> 时间：2012-07-27T20:50:12.380
> 
> 标签：sql, sql-server, perl

我需要在 CentOS 机器上使用 perl (12.2) 和 freetds 0.91 连接到 mssql 2008 数据库，并且可以使用在数据库上定义的用户成功完成。但是，我需要切换到域用户，但我无法弄清楚我需要做什么才能让它工作。它看起来在数据库上正确设置，这是我的连接字符串：

```
my $dsn = [
    "DBI:Sybase:database=adx;server<server_name>",
    '<DOMAIN>\\<user>',
    '<password>',
    {
        PrintError  => 0,
        RaiseError  => 0,
        AutoCommit  => 0
    }
]; 
```

这是错误消息：

```
database connection failed for DBI:Sybase:database=<db_name>;server=<server_name>
<DOMAIN>\\<user> : OpenClient message: LAYER = (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (34)
Server <server_name>, database
Message String: Adaptive Server connection failed 
```

我相信tds错误`(LAYER = (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (34))`表明登录失败，但我确定密码是正确的，并直接在mssql客户端上尝试过。有人让这个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:00:57.600

我发现从 Linux 连接到 SQL Server(DBD::ODBC) 的唯一成功方法是使用 ODBC，SyBase 模块应与 Sybase 实例一起使用，而不是与 SQL Server 一起使用......

与 ODBC 一起使用的连接字符串应如下所示：

```
 "DBI:ODBC:driver={SQL Server};Server=192.168.1.1,1433;database=db_name"; 
```

# arraylist - 将结果集插入 ArrayList

> ID：11695487
> 
> 赞同：-1
> 
> 时间：2012-07-27T20:50:57.373
> 
> 标签：arraylist, resultset

我整天都在寻找这个，据我检查，我总是坚持使用一个空的 ArrayList。我还尝试只显示我找到的第一条记录，但我得到了空值。应该插入 ArrayList 的只是课程，所以是字符串。

```
public String getProfessorCourses(){
       ................       
       //get the id related of the name
   String s = null;
   String sqlQuery = "SELECT courses.title FROM courses INNER JOIN professors_courses ON professors_courses.course_id = course.course_id WHERE prof_id = '"+1+"'";

       ArrayList<String> result = new ArrayList<String>();

       try {
         rst = stmt.executeQuery(sqlQuery);
        } catch (SQLException e1) {
            e1.printStackTrace();
        }

       try {
           //titles are not inserted
            while(rst.next()){
              //s = new String(rst.getString(1));
              //s = rst.getString(1);
                          s = new String(rst.getString("title"));    
                }
        } catch (SQLException e) {
            e.printStackTrace();
        }
       .........................   
       return s;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:54:56.497

您在哪里将数据插入到数组列表中？你需要这一行之后：

s = new String(rst.getString("title"));

```
result.add(s) 
```

# r - 聚合 data.table 中的多个列

> ID：11695490
> 
> 赞同：17
> 
> 时间：2012-07-27T20:51:09.677
> 
> 标签：r, dataframe, aggregate, data.table

我有以下示例`data.table`：

```
dtb <- data.table(a=sample(1:100,100), b=sample(1:100,100), id=rep(1:10,10)) 
```

例如，我想通过 id 聚合所有列（a 和 b，尽管它们应该分开）`colSums`。这样做的正确方法是什么？以下不起作用：

```
 dtb[,colSums, by="id"] 
```

这只是一个示例，我的表有很多列，所以我想避免在函数名称中指定所有列

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-29T23:27:47.697

这实际上是我一直在寻找的，并在常见问题解答中提到：

```
dtb[,lapply(.SD,mean),by="id"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:50:13.547

我想在这种情况下，首先将您的数据转换为长格式并接下来进行聚合是最快的（请参阅 Matthew 在这篇[SO 帖子](https://stackoverflow.com/questions/9564588/row-wise-matrix-operations-in-r)中的评论）：

```
library(data.table)
dtb <- data.table(a=sample(1:100,100), b=sample(1:100,100), id=rep(1:10,10))
library(reshape2)
dt_long <- as.data.table(melt(dtb, id.var="id"))
dt_long[, sum(value), by=c("id","variable")]
    id variable  V1
 1:  1        a 601
 2:  2        a 440
 3:  3        a 496
 4:  4        a 553
 5:  5        a 444
 6:  6        a 466
 7:  7        a 525
 8:  8        a 553
 9:  9        a 541
... 
```

# macos - 山狮：Heroku 更新给出了奇怪的错误信息

> ID：11695497
> 
> 赞同：1
> 
> 时间：2012-07-27T20:52:29.960
> 
> 标签：macos, heroku, osx-mountain-lion

我看了又看，但找不到发生了什么。我在 Heroku 尤其是工具带上遇到了麻烦。所以我想尝试更新它并尝试做

$ heroku 更新

我得到

```
Error:       undefined method `error' for Heroku::Updater:Module (NoMethodError) 
```

有没有人看到这个，你知道发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T00:45:27.087

更新到 Mountain Lion 后，我遇到了同样的问题，但现在一切正常。我确实喜欢下面。

1.  移除 heroku 工具带

    rm -rf /usr/local/heroku
    rm -rf /usr/bin/heroku

2.  删除heroku gem

    宝石卸载heroku

    我收到要卸载哪个 gem 的消息，所以我选择了“全部”

3.  再次安装 heroku 工具带。

4.  heroku 更新-> 工作正常

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:51:22.287

不幸的是，我设法在 2.23.0 中破坏了更新（对不起）。因此，如果您遇到这种情况，您应该可以直接跳到下载并重新安装工具带。这应该覆盖任何旧的东西（之后你应该再次有一个有效的更新）。带来不便敬请谅解。

# java - 管道传输到head时如何让java退出

> ID：11695500
> 
> 赞同：18
> 
> 时间：2012-07-27T20:52:37.637
> 
> 标签：java, exception, pipe, unix-head

我有一个打印出大量文本的 java 进程。有时我只想看一点文字。使用普通程序，我可以这样做：

```
$ myprog | head 
```

我只会看到 myprog 的 10 行输出，它会立即退出。但是对于java，如果我这样做：

```
$ java MyClass | head 
```

我得到了前 10 行输出，但 java 进程在完成所有处理之前不会退出。就像java不在乎stdout（System.out）已经消失了，而head进程已经死了并且消失了。

所有其他程序要么静默退出，例如 cat：

```
$ cat /etc/group | head
root:x:0:
daemon:x:1:
bin:x:2:
sys:x:3:
adm:x:4:
tty:x:5:
disk:x:6:
lp:x:7:
mail:x:8:
news:x:9: 
```

或以损坏的管道错误/异常退出，例如 python：

```
$ python -c 'while True: print "hi"' | head
hi
hi
hi
hi
hi
hi
hi
hi
hi
hi
Traceback (most recent call last):
  File "<string>", line 1, in <module>
IOError: [Errno 32] Broken pipe 
```

当我将输出通过管道传输到诸如 head 之类的东西时，如何在调用 System.out.println() 时让 java 引发异常？我希望能够做类似的事情：

```
try {
    while(true) {
        System.out.println("hi");
    }
} catch(BrokenPipeException e) {
    // exit gracefully
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T21:11:47.473

我正在使用`checkError()`

从[PrintStream-API-Docu](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)：

> 与其他输出流不同，PrintStream 从不抛出 IOException；相反，异常情况只是设置一个内部标志，可以通过 checkError 方法进行测试。

所以尝试这样的事情：

```
 while(!System.out.checkError()) {
            System.out.println("hi");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T05:52:01.840

如果您不喜欢[Sascha 回答](https://stackoverflow.com/questions/11695500/how-do-i-get-java-to-exit-when-piped-to-head/11695708#11695708)`.checkError()`中的方法并且希望收到异常，您可以使用

```
OutputStream stream = new FileOutputStream(FileDescriptor.out); 
```

你失去了`PrintStream`特定的功能。就我而言，它们不相关，这种方法比构建一堆hacky 检查更容易。

请注意，如果您重定向了`System.out`via `System.setOut`，这将不会起作用，因为`FileDescriptor.out`它将指向原始输出描述符，而不是您重定向的描述符。

# r - barplot Y轴中的不同起点（不是0）？

> ID：11695502
> 
> 赞同：11
> 
> 时间：2012-07-27T20:52:47.617
> 
> 标签：r

我正在尝试创建一个简单的条形图，其中包括两个条形图，显示两组学生的平均数学成绩。平均值为 363.2 和 377.4。创建条形图很简单。我想做的是让我的 y 轴从 340 而不是 0 开始。我确实知道如何更改 y 轴的限制，但问题是当我将 y 轴的限制更改为 c( 340, 380)，R 仍然绘制了整个条形，其中大部分位于 x 轴下方！

这是我的代码：

```
barplot(c(363.2, 377.4), beside = T, ylim = c(340,380), col = c("orange", "blue")) 
```

我还附上了我的情节：

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T21:10:01.510

添加`xpd=FALSE`和重新添加水平轴的作品，排序：

```
b <- barplot(c(363.2, 377.4), beside = TRUE, 
   ylim = c(340,380), col = c("orange", "blue"),xpd=FALSE)
axis(side=1,at=b,labels=c("group 1", "group 2"))
box(bty="l") 
```

我声称（尽管[谷歌搜索“条形图零轴”](http://chandoo.org/wp/2008/10/21/reader-poll-axis-scaling-bar-charts/)似乎提出了有用的东西；也许其他人会加入）在垂直轴的位置绘制条形图是**不好的做法**不包括零：参数是查看器将假设条形图锚定到原点（在解释为什么 R 不能轻松地使用对数轴进行条形图时，这个参数更常见：请参阅[此处的评论](https://stackoverflow.com/questions/11646655/ggplot2-0-9-1-logarithmic-y-axis-scale-with-barchart)，对于例子）。有这种感觉的人会说你应该用积分来表示价值；在这种情况下，零锚定的隐含假设不成立。

换句话说，“你可以这样做——但你不应该”......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T21:05:58.240

如果您查看以下内容，则可以看到`?barplot`：

“xpd：合乎逻辑。应该允许酒吧走出区域吗？”

您只需要包含`xpd=FALSE`在条形图的参数中。

# jquery - jquery 小部件 _trigger 和绑定

> ID：11695504
> 
> 赞同：0
> 
> 时间：2012-07-27T20:52:59.743
> 
> 标签：jquery, jquery-widgets

我正在尝试使我的 jquery 小部件松散耦合，但是 _trigger 和 bind 的使用没有按预期工作。

这是我的小部件（使用[http://msdn.microsoft.com/en-us/library/hh404085](http://msdn.microsoft.com/en-us/library/hh404085)作为参考）：

```
(function ($, undefined) {
  $.widget('qs.tagger', {
    _create: function () {
      var that = this,
        name = this.name;

      that.element.bind('mouseenter', function (event) {
        that._trigger('activated', event, {name: 'hello'});
        console.log('mouseenter');
      });
    },
    destroy: function () {
      this._destroy();
    }
  });
}(jQuery)); 
```

调用它看起来像这样

```
$('#results').tagger(); 
```

这是实例化和绑定：

```
 $('#results').tagger();

  $('#search-form').bind('taggeractivated', function (event, data) {
    console.log('world');
  }); 
```

当我检查 console.log 时，我看到鼠标输入事件被触发，但我从未看到绑定事件被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-30T17:04:53.310

这不是小部件工厂 _trigger 方法的工作方式。如果你想使用 _trigger 你必须这样做：

```
$('#results').tagger({
     activated: function (event, data) {

          console.log('hello activated world');
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:00:51.367

在不知道您的 HTML 结构的情况下，我在黑暗中刺伤并说该`$('#results')`元素不是该元素的后代`$('#search-form')`。插件抛出的事件只能被实例化插件的对象或祖先捕获。如果您需要更多帮助，请提供 HTML，或者更好的是，通过[jsfiddle.net](http://jsfiddle.net/)提供 HTML 和 JavaScript 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:15:32.417

尝试

```
$('#results').tagger();
$('#search-form').on('activated', function (event, data) {console.log('world');}); 
```

# python - @csrf_exempt 在 @ajax_required 之前，或者在 Chrome 中反之亦然

> ID：11695505
> 
> 赞同：0
> 
> 时间：2012-07-27T20:53:03.690
> 
> 标签：python, django, csrf

如果我在 Django 中放`@ajax_required`之前`@csrf_exempt`，在 Chrome 中它会失败并出现 403 错误。在 Firefox 中，两者都可以正常工作。如果我交换它们，它适用于 Chrome。这正常吗？

# php - 一个表单两个提交按钮

> ID：11695507
> 
> 赞同：0
> 
> 时间：2012-07-27T20:53:08.977
> 
> 标签：php, forms

我在一个网站上有两个类似的表单，我想将它们合并为一个带有两个提交按钮的表单。他们使用大部分相同的数据。

第一种形式使用 GET 将数据发送到另一台服务器。第二种形式通过电子邮件发送。我强烈鼓励网站用户在尝试选项二之前使用选项一。

我知道如何用 javascript 做到这一点，但不是以一种很好的方式降级。还有其他方法可以有两个提交选项吗？或如何实现这一点的其他想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:06:05.113

*Snow Blind*提供了很好的解决方案，但是您无法确定单击了哪个按钮。
按钮必须有不同的名称，不能相同。

**例子：**

```
<input type="submit" name="server" value="Server" />
<input type="submit" name="email" value="Email" />

<?php

if(isset($_GET['server']))
{
    // Send to another server
}
else if(isset($_GET['email']))
{
    // Send to email
}
else die("None of buttons was clicked.");

?> 
```

此外，如果您在两个部分（服务器和电子邮件）中具有相同的代码，则可以执行以下操作：

```
if(isset($_GET['server']) || isset($_GET['email']))
{
    // Do something common to both methods
    if(isset($_GET['server'])) 
    {
        // Send to server
    }
    else 
    {
        // Send to email
    }
} 
```

* * *

在我看来，更好的解决方案是只放置 1 个提交按钮 + 一个带有方法选择的下拉菜单。

```
<select name="sendMethod">
    <option value="" disabled>Choose sending method...</option>
    <option value="server">Send to another server</option>
    <option value="email">Send to e-mail</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:21:45.480

就像每个人都说使用复选框/单选按钮。并将使用 GET 设置为默认选项

如果您不想使用 javascript，您始终可以获取复选框/收音机的值和并检查用户选择

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T20:57:10.457

您可以创建两个提交按钮并赋予它们相同`name`但不同的`value`.

```
<input type="submit" name="submit" value="Server">
<input type="submit" name="submit" value="Email"> 
```

然后您可以检查`$_GET['submit']`或`$_POST['submit']`（取决于`form method`）查看使用了哪个提交。

# c++ - 如何控制比特率 MEDIASUBTYPE_H264 directshow？

> ID：11695508
> 
> 赞同：5
> 
> 时间：2012-07-27T20:53:08.697
> 
> 标签：c++, windows, directshow, logitech

我有一个`logitech c920`呈现编码`h264 capture pin`（子类型：）的网络摄像头`MEDIASUBTYPE_H264`。

h264 管脚支持以下分辨率：

```
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 640x480 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 160x90 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 160x120 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 176x144 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 320x180 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 320x240 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 352x288 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 432x240 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 640x360 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 800x448 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 800x600 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 864x480 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 960x720 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 1024x576 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 1280x720 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 1600x896 @ 30 fps  
FORMAT_VideoInfo - 子类型：MEDIASUBTYPE_H264 1920x1080 @ 30 fps  

```

在我的测试中，无论选择的分辨率如何，它总是使用 3 Mbits。这有点太多了，尤其是对于较低的分辨率。

关于如何使用 directshow 以编程方式选择所需比特率的任何想法？或者也许是其他 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:31:57.757

IAMStreamConfig 接口的查询引脚，通过 GetStreamCaps() 获取此格式列表，选择您需要的格式，它将包含指向包含 dwBitRate 字段的 VIDEOINFO 结构的指针 pFormat。将此字段更改为所需的比特率并使用此新数据调用 IAMStreamConfig::SetFormat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:43:20.673

从罗技支持答案可以看出，编码是 80/20 HW/SW，并且比特率（和 GOP）无法控制。然而，他们的捆绑软件显然可以做到这一点。除此之外，经过一些限制后，比特率会下降，尽管它发生在非常低​​的分辨率/fps组合中：

```
Required bandwidth for size:  ( 1920 , 1080 )  @ 30  is 2.81771 Mbit 
Required bandwidth for size:  ( 1920 , 1080 )  @ 25  is 2.81672 Mbit 
Required bandwidth for size:  ( 1920 , 1080 )  @ 20  is 2.82701 Mbit 
Required bandwidth for size:  ( 1920 , 1080 )  @ 15  is 2.83327 Mbit 
Required bandwidth for size:  ( 1920 , 1080 )  @ 10  is 2.83594 Mbit 
Required bandwidth for size:  ( 1920 , 1080 )  @ 5  is 2.8431 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 30  is 2.82013 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 25  is 2.82436 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 20  is 2.83217 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 15  is 2.83696 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 10  is 2.83721 Mbit 
Required bandwidth for size:  ( 1280 , 720 )  @ 5  is 2.45272 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 30  is 2.82089 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 25  is 2.82313 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 20  is 2.83131 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 15  is 2.83343 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 10  is 2.79526 Mbit 
Required bandwidth for size:  ( 864 , 480 )  @ 5  is 1.15564 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 30  is 1.90123 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 25  is 1.89367 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 20  is 1.26006 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 15  is 0.957935 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 10  is 0.637158 Mbit 
Required bandwidth for size:  ( 320 , 180 )  @ 5  is 0.328456 Mbit 
```

如果您想出了解决方案，请分享。谢谢！

# grouping - 当节点集存储在变量中时，使用 XSLT 的 for-each-group 和 group-starting-with 属性对 XML 元素进行分组

> ID：11695510
> 
> 赞同：0
> 
> 时间：2012-07-27T20:53:17.857
> 
> 标签：grouping, xslt-2.0

我正在处理一个以非结构化方式保存表格数据的源 HTML 文件。基本上它是一堆绝对定位`div`的s。我的目标是重建某种结构化的 XML 数据。到目前为止，使用 XSLT 2.0 我能够生成如下所示的 XML：

```
<data>
    <line top="44">
         <item left="294">Some heading text</item>
    </line>
    <line top="47">
         <item left="718">A</item> <!-- this item is a section-start -->
         <item left="764">Section heading</item>
    </line>
    <line top="78">
        <item left="92">Data</item>
        <item left="144">Data</item>
        <item left="540">Data</item>
        <item left="588">Data</item>
    </line>
    <line top="101">
        <item left="61">B</item> <!-- this item is a section-start -->
        <item left="144">Section heading</item>
    </line>
    <line top="123">
        <item left="92">Data</item>
        <item left="144">Data</item>
    </line>
</data> 
```

但是，我接下来需要做的是将行分组。每个部分都以一行开头，其第一项的值由单个字母 A – Z 组成。我的方法是将所有`<line>`元素保存在一个`$lines`变量中，然后使用`xsl:for-each-group`with`group-starting-with`属性来标识开始新部分的元素。

相应的 XSLT 片段如下所示：

```
<xsl:for-each-group select="$lines/line" group-starting-with="...pattern here...">
    <section>
        <xsl:copy-of select="current-group()"/>
    </section>
</xsl:for-each-group> 
```

问题是我无法找出识别部分开始的工作模式。我能做的最好的事情是确保`//line/item[1]/text()[matches(., '^[A-Z]$')]`在 XPath 评估器中单独使用时有效。但是，我似乎无法派生出与`group-starting-with`.

*更新*因此想要的结果应该是这样的：

```
<data>
    <section> <!-- this section started automatically because of being at the beginning -->
        <line top="44">
             <item left="294">Some heading text</item>
        </line>
    </section>
    <section>
        <line top="47">
             <item left="718">A</item> <!-- this item is a section-start -->
             <item left="764">Section heading</item>
        </line>
        <line top="78">
            <item left="92">Data</item>
            <item left="144">Data</item>
            <item left="540">Data</item>
            <item left="588">Data</item>
        </line>
    </section>
    <section>
        <line top="101">
            <item left="61">B</item> <!-- this item is a section-start -->
            <item left="144">Section heading</item>
        </line>
        <line top="123">
            <item left="92">Data</item>
            <item left="144">Data</item>
        </line>
    </section>
</data> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:26:24.437

解决方案：

```
<xsl:for-each-group select="$lines/line" group-starting-with="line[matches(child::item[1], '^[A-Z]$')]">
    <section name="{current-group()[1]/item[1]}">
        <xsl:copy-of select="current-group()"/>
    </section>
</xsl:for-each-group> 
```

诀窍是真正理解`group-starting-with`应该是*模式*而不是*条件*。

# php - 在 PHP 中对 SQL 结果集进行分组

> ID：11695514
> 
> 赞同：4
> 
> 时间：2012-07-27T20:53:36.290
> 
> 标签：php, sql, arrays, loops

假设我有一个查询，运行以下查询：

## 编辑

添加 order 子句，因为真正的 sql 语句有一个。

```
SELECT description, amount, id FROM table ORDER BY id 
```

在这种情况下，ID 对于数据集不是唯一的。它会返回这样的东西。

```
 Description    Amount    ID
    -----------    ------    --
1    Hats            45       1
2    Pants           16       1
3    Shoes           3        1
4    Dogs            5        2
5    Cats            6        2
6    Waffles         99       3 
```

我需要做的是将ID的每个部分包含在它自己的div中（因此一个div中的第1,2,3行，另一个div中的4,5和它自己的div中的6）。

有很多解决方案，但我想不出一个不太复杂的解决方案。

我希望能够保持 SQL 的原样，并以某种方式对 PHP 中的数据集进行排序，这样我就可以在遍历整个数据集的同时遍历数据集的每个部分。

某种数组会起作用，但它的结构让我很难过。

我怎样才能让它工作？PHP 解决方案是一个想法，但理论上也会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T20:59:44.000

看看这样的东西是否适合你。

```
// execute query: Select description, amount, id from table

$results = array();

while ($row = $query_result->fetch_array()) {
    if (!isset($results[$row['id']])) $results[$row['id']] = array();
    $results[$row['id']][] = $row;  // push $row to results for this id
}

// later on
foreach($results as $id => $data) {
    // output div based on $id
    foreach($data as $datum) {
        // output individual data item that belongs to $id
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:58:34.110

一个简单的串行解决方案可能如下所示：

```
$curId = '';       // track working id
$firstDiv = true;  // track if inside first div

// open first div
echo '<div>';

// foreach $row
{
    // when id changes, transition to new div, except when in first div
    if ($row->$id != $curId) {
        if ($firstDiv) {
            $firstDiv = false;
        } else {
            // start new div
            echo '</div>';
            echo '<div>';
        }
        $curId = $row->$id;  // track new current id
    }

    // display contents of current row
}

// close last div
echo '</div>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T20:58:24.470

只需将 id 存储在 temp 变量中，如果下一个不同，请关闭 div 并打开新 div

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T21:00:36.590

假设 db 结果的关联数组：

```
$final = array();

foreach($results as $result)
{
    $final[$result['id']][] = $result;
} 
```

这为您留下了一个关联数组`$final`，该数组按 ID 对条目进行分组

# java - 将表番石榴用于 hashbasedTable

> ID：11695516
> 
> 赞同：5
> 
> 时间：2012-07-27T20:53:40.630
> 
> 标签：java, hash, hashmap, guava

我打算使用表番石榴来实现 3D 哈希图。我下载了它，我可以导入文件。我的要求如下

我手里有以下文件，我只需要相应地聚合文件，这将在下一步中显示。

```
A100|B100|3
A100|C100|2
A100|B100|5 
```

聚合部分将在下面

```
A100|B100|8
A100|C100|2 
```

我尝试使用以下

```
Table<String,String,Integer> twoDimensionalFileMap= new HashBasedTable<String,String,Integer>(); 
```

但这会给我一个错误，我只想知道两件事

1.  我只想知道，要在构造函数中传递的参数`HashBasedTable<String,String,Integer>()`
2.  如何初始化该表的行、列和值，就像我们对它的映射所做的那样`map.put(key,value)`。在类似的意义上，你们能告诉我如何插入这个表的值吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-27T21:04:28.873

番石榴贡献者在这里。

1.  不要使用构造函数，使用`HashBasedTable.create()`工厂方法。（不带参数，或带`expectedRows`and `expectedCellsPerRow`。）
2.  使用`table.put("A100", "B100", 5)`，就像 a `Map`except 有两个键一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T21:04:52.873

从文档：

> 接口表
> 
> 类型参数：
> 
> ```
> R - the type of the table row keys
> C - the type of the table column keys
> V - the type of the mapped values 
> ```

你的声明是对的。为了使用它，应该很容易：

```
Table<String,String,Integer> table = HashBasedTable.create();
table.put("r1","c1",20);
System.out.println(table.get("r1","c1")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-15T14:09:51.967

使用示例：http: [//www.leveluplunch.com/java/examples/guava-table-example/](http://www.leveluplunch.com/java/examples/guava-table-example/)

```
@Test
public void guava_table_example () {

    Random r = new Random(3000);

    Table<Integer, String, Workout> table = HashBasedTable.create();
    table.put(1, "Filthy 50", new Workout(r.nextLong()));
    table.put(1, "Fran", new Workout(r.nextLong()));
    table.put(1, "The Seven", new Workout(r.nextLong()));
    table.put(1, "Murph", new Workout(r.nextLong()));
    table.put(1, "The Ryan", new Workout(r.nextLong()));
    table.put(1, "King Kong", new Workout(r.nextLong()));

    table.put(2, "Filthy 50", new Workout(r.nextLong()));
    table.put(2, "Fran", new Workout(r.nextLong()));
    table.put(2, "The Seven", new Workout(r.nextLong()));
    table.put(2, "Murph", new Workout(r.nextLong()));
    table.put(2, "The Ryan", new Workout(r.nextLong()));
    table.put(2, "King Kong", new Workout(r.nextLong()));

    // for each row key
    for (Integer key : table.rowKeySet()) {

        logger.info("Person: " + key);

        for (Entry<String, Workout> row : table.row(key).entrySet()) {
            logger.info("Workout name: " + row.getKey() + " for elapsed time of " + row.getValue().getElapsedTime());
        }
    }
} 
```

# r - 合并（与拆分相反）r 中的行对

> ID：11695519
> 
> 赞同：7
> 
> 时间：2012-07-27T20:54:14.853
> 
> 标签：r, merge, collapse

我有如下的专栏。每列有两对，每对都有后缀“a”和“b”——例如 col1a、col1b、colNa、colNb 等，直到文件结束 (> 50000)。

```
mydataf <- data.frame (Ind = 1:5, col1a = sample (c(1:3), 5, replace = T), 
   col1b = sample (c(1:3), 5, replace = T),  colNa = sample (c(1:3), 5, replace = T),
   colNb = sample (c(1:3),5, replace = T),
     K_a = sample (c("A", "B"),5, replace = T),  
    K_b = sample (c("A", "B"),5, replace = T))

mydataf 
   Ind col1a col1b colNa colNb K_a K_b
1   1     1     1     2     3   B   A
2   2     1     3     2     2   B   B
3   3     2     1     1     1   B   B
4   4     3     1     1     3   A   B
5   5     1     1     3     2   B   A 
```

除了第一列（Ind），我想折叠这对行以使数据框如下所示，同时删除后缀“a”和“b”。还合并的字符或数字按 1 先到 2 排序，A 先到 B

```
 Ind col1   colN  K_
    1   11     23   AB   
    2   13     22   BB
    3   12     11   BB
    4   13     13   AB
    5   11     23   AB 
```

编辑：如果列的名称相似，答案中的 grep 函数（可能）有问题。

```
mydataf <- data.frame (col_1_a = sample (c(1:3), 5, replace = T),
   col_1_b = sample (c(1:3), 5, replace = T),  col_1_Na = sample (c(1:3), 5, replace = T),
   col_1_Nb = sample (c(1:3),5, replace = T),
     K_a = sample (c("A", "B"),5, replace = T),
    K_b = sample (c("A", "B"),5, replace = T))
n <- names(mydataf)
nm <- c(unique(substr(n, 1, nchar(n)-1)))
df <- data.frame(sapply(nm, function(x){
                             idx <- grep(x, n)
                             cols <- mydataf[idx]
                             x <- apply(cols, 1,
                                       function(z) paste(sort(z), collapse = ""))
                             return(x)
                            }))
names(df) <- nm
df

 col_1_ col_1_N K_
1   2233      23 BB
2   2233      22 BB
3   1123      13 AB
4   1223      12 AB
5   2333      33 AB 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:52:42.753

```
mydataf
  Ind col1a col1b colNa colNb K_a K_b
1   1     2     1     1     1   A   A
2   2     1     2     1     3   B   A
3   3     1     2     3     2   A   A
4   4     1     2     3     1   A   B
5   5     1     2     2     1   A   A
n <- names(mydataf)
nm <- c("Ind", unique(substr(n, 1, nchar(n)-1)[-1]))
df <- data.frame(sapply(nm, function(x){
                             idx <- grep(paste0(x, "[ab]?$"), n)
                             cols <- mydataf[idx]
                             x <- apply(cols, 1, 
                                       function(z) paste(sort(z), collapse = ""))
                             return(x)
                            }))
names(df) <- nm
df
  Ind col1 colN K_
1   1   12   11 AA
2   2   12   13 AB
3   3   12   23 AA
4   4   12   13 AB
5   5   12   12 AA 
```

# javascript - 无法获取画布的上下文

> ID：11695523
> 
> 赞同：1
> 
> 时间：2012-07-27T20:54:29.323
> 
> 标签：javascript, html, canvas, html5-canvas

当我想获取画布的上下文时，我遇到了一个问题。这是HTML代码：

```
<canvas id="thecanvas" width="600" height="300"></canvas> 
```

和Javascript：

```
var canvaso = document.getElementById('thecanvas');
if (!canvaso) {
    alert('Error: Cannot find the canvas element!');
    return;
}
if (!canvaso.getContext) {
    alert('Error: Canvas context does not exist!');
    return;
} 
```

“canvaso”变量已正确加载，但在“canvaso.getContext”上失败：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'getContext' 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:30:14.733

试试这个（见演示：http: [//jsbin.com/ijazum/1](http://jsbin.com/ijazum/1)）：

```
<body>
  <canvas id="canvas" width="600" height="300"></canvas>

  <script>
    function getStart() {
      var canvas = document.getElementById('canvas');

      if (!canvas) {
        alert('Error: Cannot find the canvas element!');
        return;
      }

      if (!canvas.getContext) {
        alert('Error: Canvas context does not exist!');
        return;
      }

      var ctx = canvas.getContext('2d');

      ctx.fillStyle = "#3d3";
      ctx.fillRect(0, 0, 100, 100);
    }

    getStart();
  </script>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:59:28.040

您的浏览器不兼容 HTML5。一个兼容的浏览器会返回`Object #<HTMLCanvasElement> has no method 'getContext'`（虽然 getContext 方法可以工作）

[在这里工作正常](http://jsfiddle.net/fWa86/)，你确定你在同一页面上有一个由 thecanvas 的 id 组成的画布吗？

这是一种可能性：您是否曾经在文档中的任何位置定义`div`带有 id的 a，很可能是在画布之后？`thecanvas`重复的 IDS 在语义上是不正确的，getElementById 将返回该 Id 在 DOM 中的最后一次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T21:01:08.320

这可能是因为您将 javascript 作为`<head>`页面块中的外部文件加载。这意味着您的 javascript 在`<canvas>`加载其他 html 元素（如该元素）之前运行。这就是为什么您的浏览器在页面上找不到具有给定 ID 的任何元素的原因——因为此时 canvas 元素不存在。

有几个解决方案：

1.  `<script>`在您声明区块后，随时将您的 JavaScript 代码输入`<canvas>`区块。
2.  将您的 javascript 代码插入到函数中，然后调用该函数作为对页面上任何活动的反应，例如单击按钮或加载页面（使用标记`onload`中的属性`<body>`）。

第二种解决方案的示例如下所示：

索引.html：

```
<!DOCTYPE html>
<html>
<head>
  <script src="myscript.js"> </script>
</head>
<body onload="test()">
  <canvas id="thecanvas" width="600" height="300"></canvas>
</body>
</html> 
```

myscript.js：

```
function test() {
  var canvaso = document.getElementById('thecanvas');
  if (!canvaso) {
      alert('Error: Cannot find the canvas element!');
      return;
  }
  else if (!canvaso.getContext) {
      alert('Error: Canvas context does not exist!');
      return;
  }
  else {
      alert('Success!');
  }
} 
```

# jquery - 如何将 CRUD 系统添加到 wordpress 中？

> ID：11695524
> 
> 赞同：2
> 
> 时间：2012-07-27T20:54:29.197
> 
> 标签：jquery, wordpress, integration, crud

我一直在寻找将 CRUD（创建、读取、更新、删除）表系统数据库集成到 WordPress 中的方法。

用户基本上会登录，然后被重定向到前端，前端将显示数据表/网格，并能够根据需要添加记录/编辑/删除。

必须能够通过 xls、pdf、csv 等导出数据......还需要能够以某种方式将日历与记录集成。

例如，如果我创建一个完整的患者记录，并且在名称列之后，我有一个状态列，如果它被激活，那么日历会选择它。

我知道，我在这里说话有点胡说八道；我只是想概念化我想要完成的事情。

我是一名 WordPress 兽医，我知道它非常灵活，但我所要求的只是小众需求。

# caching - WP Mobile Detector, W3 Total Cache, Home Page, Blackberry Viewport, Responsive

> ID：11695525
> 
> 赞同：1
> 
> 时间：2012-07-27T20:54:38.070
> 
> 标签：caching, mobile, blackberry, wordpress, wordpress-theming

我正在使用带有 W3 Total Cache 和响应式布局（媒体查询）的 WP Mobile Detector，但我遇到了一些问题：

1.  当我在黑莓上查看本地站点（本地主机）时，它看起来不错；缩放/视口正确，媒体查询已正确触发等。但是，当我在黑莓上查看实时站点时，视口已缩小。在响应式布局的上下文中，我在本地看到两列，但在现场我看到所有六列（即黑莓认为它是一个完整的浏览器 - 很烦人！）。

2.  我想我会停用 W3 Total Cache 以查看是否有任何效果：是的，确实如此。当缓存关闭时，视口/缩放很好，一切都很好。问题解决了？不完全的...

3.  关闭缓存后，我导航到实时站点，当我单击链接时，当站点的子页面（例如 www.SITE.com/about、www.SITE.com/contact）响应移动主题时回到家（或在地址栏中输入） - 即 www.SITE.com/ - 我不再提供移动主题，只是普通的“桌面”主题。如果我返回子页面，我会再次看到移动主题。那是怎么回事。

4.  当在黑莓上查看时（例如），如果我单击“查看完整站点”链接（触发 Javascript 函数来修改 cookie）它不会显示完整站点（即正常主题），它只是刷新并显示移动主题。但是，当在桌面上的 Firefox 中查看时（通过用户代理切换器），该链接确实会修改 cookie 并切换回正常的桌面主题。

**想法/问题**

W3TC 确实适用于 WPMD（移动主题提供缩小的 JS/CSS），但也许我没有正确配置一些东西。以下两个链接非常有用，我已经实施了建议的更改：--- [http://snipplr.com/view/47970/wp-mobile-detector--w3-total-cache-integration/](http://snipplr.com/view/47970/wp-mobile-detector--w3-total-cache-integration/) --- [http： //journal.code4lib.org/articles/6223](http://journal.code4lib.org/articles/6223)

这是一个已知的 [Blackberry HotSpot/Internet Browser] 问题吗？我在文档头中添加了必要的元标记来指示视口数据，我理解的 HandheldFriendly 元数据主要用于黑莓目的。正如我所说，除了主页问题之外，关闭缓存看起来没问题。

我应该说它在将用户代理切换器扩展设置为 iPhone 3 的 Firefox 中运行良好，而且我没有任何黑莓问题。

WPMD 通过设置 cookie 工作。这似乎有效，否则我根本不会看到移动主题。

黑莓的Javscript功能有问题吗？从手机本身不容易分辨 - 可能需要放入一个 JS 错误监视器（前几天我在看一个）。

谁会想到移动开发会如此棘手！

**更新 1**

从第一次发布到现在已经有几个星期了，我很快就会按照 Joshua 和 Frederick 的建议卸载并重新安装 W3TC [最新版本]，然后我会发布我的结果。

我发现不同的浏览器（桌面和移动）对 javascript 重定向语句的处理方式不同。例如：

```
setTimeout(function(){window.location.reload();},10)
window.location.reload();
location.reload(); 
```

上面的三行代码有效地执行了相同的操作（实现方式略有不同，具体取决于您的需要），但我在使用每一个的浏览器中取得了不同的成功——Chrome 与一个，Firefox 另一个，等等。不幸的是，我仍然无法获得黑莓浏览器通过 Javascript 执行适当的自动刷新。

还有什么...所以，事实证明，使用台式 PC/浏览器在台式机和移动设备之间切换很有趣。假设我们在桌面版本，我们切换到页面的移动版本。到目前为止我们还可以，但随后我们切换回页面的桌面版本。仍然可以，但是如果我们快速单击桌面页面上的链接以转到另一个 [桌面] 页面，那么我们可能会发现自己正在查看移动版本而不是桌面版本。

那么，那里发生了什么？由于当我们单击另一个链接时页面仍在加载，我们是否中断了什么？可能不会，因为 cookie 会在先前的请求中从移动版本的页面设置并发送，例如“show-desktop-version = true”。如果我们确实点击了 F5 或浏览器的“刷新”按钮（或者，实际上是指向任何其他页面的链接），那么我们确实会看到正确的移动版本或桌面版本（分别）。

另一件有趣的事：假设我们使用的是移动版本（使用桌面浏览器），我们正在查看 site.com/mypage，页面上有一个指向“查看完整站点”(VFS) 的链接。我们单击 VFS 一次，它会刷新，但我们仍然看到移动版本。所以我们再次点击——同样的结果。所以我们一次又一次地点击，一次又一次，然后——哦，好吧，这次它切换到了完整的站点。这个循环/过程似乎发生了一次，然后不是一段时间，然后再次发生。

**更新 2**

关于移动桌面主题切换问题，请忽略我在“更新1”中的说明。我的切换器链接之一（从桌面主题到移动），例如...

```
<a href="?dothemeswitch" onClick="funcSwitchToMobile()">View Mobile Site</a> 
```

...正在使用查询参数（如您所见）。我曾使用此技术测试移动浏览器是否阻止正确刷新，因为链接指向相同/当前的 URL。切换器链接实际上应该是这样的，

```
<a href="#" onClick="funcSwitchToMobile()">View Mobile Site</a> 
```

...只需一个散列即可允许链接可点击，同时允许 Javascript 函数发挥其魔力（更新 cookie、重新加载页面）。

问题已解决。

（W3TC + WPMD 兼容性对我来说仍然是一个问题 - 将发布更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:33:12.533

我是 WP Mobile Detector 的开发者。

您描述的问题正是安装 W3 Total Cache 时发生的情况。无论出于何种原因，有时都需要停用和删除 W3 Total Cache。

即使禁用了 W3 Total Cache，我记得有两个客户报告了问题。一旦它被删除，它就解决了这个问题。然后他们重新上传了 W3 Total Cache，在您发布的链接上进行了更改，并且似乎没问题。

无论出于何种原因，这些问题似乎在 W3 Total Cache 的较新版本中更为普遍。我需要与 Frederick（W3 Total Cache 的创建者）取得联系，并确保插件可以很好地协同工作。

确保同时清除 BlackBerry 设备上的缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T21:41:31.423

在不评估插件的情况下，这里有一些事情需要考虑。首先，W3TC 尝试默认设置一个 cookie，以正确确定用于智能手机和不太智能手机的用户代理组的页面缓存；由于在响应式网页设计和渐进增强流行之前移动主题插件的流行，它为每个人保留了唯一的缓存。

用户代理组可以被禁用或用于将访问者重定向到另一个页面或主题。下一个版本还消除了设置用户代理组时对 cookie 的需求。未来的版本也将允许 cookie 用于唯一缓存用户请求。

# css - 为什么绝对定位的 div 得到 display:block 而不是指定的表格单元格？

> ID：11695526
> 
> 赞同：3
> 
> 时间：2012-07-27T20:54:52.050
> 
> 标签：css

我确定这与`position:absolute`覆盖`display`要阻止的 css 属性有关。

正如您在下图（和这个[小提琴](http://jsfiddle.net/nupul/6zxrP/1/)）中看到的那样，左侧（绝对）的 div 不会垂直居中它的文本，但右侧的 div 会（它是相对的）。如果在 chrome 调试器中看到，前者有`display:block`，后者有`display:table-cell`.

![在此处输入图像描述](../Images/e8820cf9d23eeaca4aa5e60ed515f748.png)

**问题：**我知道定位某些东西绝对是“将其从文档流中删除”，但这是否意味着它不会覆盖显示，并且所有内容都将默认为其默认显示（即 div 的块，span 的内联等）为什么？这种行为有特定的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:02:31.323

这是[规范](http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo)要求的：

> 如果'position'的值为'absolute'或'fixed'，则框是绝对定位的，'float'的计算值为'none'，按下表设置显示

在规范的该部分中显示的表格中，“显示”的任何与表格相关的值都会计算为“块”。

正如您所说，绝对定位某些东西会将其从正常流程中移除；因此，它不再有要显示的表格，因此将其显示为表格单元格不再有意义。为了将元素显示为表格单元格，它需要适当的容器，而且这些容器似乎只能在正常流程中隐式生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:55:33.353

任何具有 position:absolute 的元素都将被视为 display:block。它不会被默认处理。

> '从文档流中删除它'

意味着它将被视为它自己的图形实体，而不是与任何其他实体相关。一个元素只能显示为与表格相关的表格单元格。大多数显示模式仅在与其他元素相关时才有意义。主要的例外是“阻止”和“无”

我做了一个非常粗略的[小提琴](http://jsfiddle.net/SoLongTony/J6zfv/2/)，显示了 div 和 span 元素的各种显示类型的相对与绝对示例。注意 display:none 既适用于相对定位也适用于绝对定位，但 display:inline 只适用于相对定位。

# android - 如何在 Andengine 中处理 TiledTextureRegion

> ID：11695532
> 
> 赞同：2
> 
> 时间：2012-07-27T20:55:37.653
> 
> 标签：android, memory-leaks, andengine

我正在开发一个游戏，我在触摸场景中显示不同的精灵。每个场景都有一组（大约 10 个精灵），根据用户操作显示和删除。当用户导航到下一个场景时，我加载该场景的精灵并从缓存中删除第一个场景的精灵。我注意到场景更改时存在少量内存泄漏，并且引脚指向在 1s 场景中创建的 TiledTextureRegion 变量。

我试过 sprite.reset() 调用，但没有帮助。我正在从场景中移除精灵。这是删除精灵代码的样子：

```
 private void removeSprite(final AnimatedSprite sprite) {
    final PhysicsConnector facePhysicsConnector = this.mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(sprite);

    this.mPhysicsWorld.unregisterPhysicsConnector(facePhysicsConnector);
    this.mPhysicsWorld.destroyBody(facePhysicsConnector.getBody());

    this.mScene.unregisterTouchArea(sprite);
    this.mScene.detachChild(sprite);

    System.gc();
} 
```

但看起来它没有清除与精灵关联的 TiledTextureRegion 对象。因为，我将在应用程序中有很多不同的场景，我担心内存泄漏会增加并导致问题。任何想法或建议将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:11:23.277

您无法清除`TiledTextureRegion`，但您可以`BitmapTextureAtlas`使用`BitmapTextureAtlas.unload();`.

例如：

```
BitmapTextureAtlas Texture1 = new BitmapTextureAtlas(null, 1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
mEngine.getTextureManager().loadTexture(Texture7);
ITextureRegion example = BitmapTextureAtlasTextureRegionFactory.createFromAsset(Texture1, this, "picture.png", 0, 0); 
```

然后，当您需要时：

```
Texture1.unload(); 
```

但可能您不需要清除内存，因为您将再次使用您的 TiledTextureRegion。您将重新创建 TiledTextureRegion，它会减慢您的应用程序。

# c++ - 递归检查超类 type_info

> ID：11695534
> 
> 赞同：0
> 
> 时间：2012-07-27T20:55:40.567
> 
> 标签：c++, superclass, typeid, typeinfo

有没有办法检查超类的 type_info 是什么？在我的系统中，对象由一组位标识。由 type_info 哈希码标识。我希望其中一些类型能够启用多态性，因为我的系统认为它们在同一位下。type_info 为每个类类型创建一个唯一的哈希码。相反，我希望派生类采用它们的超类的位集，如下所示：

```
Component > ISomeInterfaceComponent -> bit = 00001
              |
               \ ComponentContextA  -> bit = ISomeInterFaceComponent bit
              |
              \  ComponentContextB  -> bit = ISomeInterFaceComponent bit
              |
              \  ComponentContextC  -> bit = ISomeInterFaceComponent bit 
```

这应该将包含组件的对象添加到一个系统进行处理。

截至目前，情况是这样的：

```
Component > ISomeInterFaceComponent -> bit = 00001
              |
               \ ComponentContextA  -> bit = 00010
              |
              \  ComponentContextB  -> bit = 00100
              |
              \  ComponentContextC  -> bit = 01000 
```

这要求我为所有组件创建不同的系统。

如果有人能给我指点我如何实现这一点，那就太好了。

编辑：为防止混淆为类型设置位，如下所示： ComponentTypeManager::getBit();

所以我不使用实例。而且我很想保持当前系统处于锁定状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:49:06.520

我知道没有任何自动方式。但是，如果我理解你，可以通过一点额外的努力来完成。

对于您的每个“基”类，添加一个引用自身的 typedef，并在`typeid()`. 注意，子类可以选择覆盖它。如果他们这样做，那么他们将获得自己的 ID，他们的孩子将使用他们的价值。

请注意，另一种解决方案，如果您根本不想使用`typeid()`，则在基类上有一个静态成员（或成员函数），该成员为基类返回正确的值，然后直接在 getBit() 函数中调用它.

```
#include <iostream>
#include <iomanip>
#include <typeinfo>

struct Base1 
{
   typedef Base1 Base;

};

struct Base2
{
   typedef Base2 Base;
};

struct Derived1A : public Base1 { };   
struct Derived1B : public Base1 { };    
struct Derived2A : public Base2 { };    
struct Derived2B : public Base2 { };

template <typename T>
std::size_t getBit()
{
   // Do whatever you normally do here, but use T::Base instead of T
   return std::hash<std::string>()(typeid(typename T::Base).name());
}

int main()
{ 
   std::cout << std::boolalpha << getBit<Derived1A>() << " == " << getBit<Derived1B>() << " " << (getBit<Derived1A>() == getBit<Derived1B>()) << "\n";

   std::cout << std::boolalpha << getBit<Derived2A>() << " == " << getBit<Derived2B>() << " " <<(getBit<Derived2A>() == getBit<Derived2B>()) << "\n";

} 
```

[http://ideone.com/6ad08](http://ideone.com/6ad08)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:05:52.167

为什么不在基类`ISomeInterFaceComponent`中创建一个不被任何派生类修改的变量（除非您特别希望它是）。这听起来不像您想要多态性，因为您希望位值**相同**而不管派生类类型如何，而不是根据类型而变化。如果将来您需要为某个派生类型覆盖 if，您仍然可以专门为该类执行此操作。

或者，您可以在返回 int （位值 - 或任何实际类型）的基类中使用虚函数，并且简单地不要在您希望具有与基相同位值的派生类中覆盖它。

例如

```
 class ISomeInterFaceComponent {
      virtual int GetBit() { return 1;};  // return bit value
 };

 class ComponentContextA : public ISomeInterFaceComponent {
      // Do not override GetBit() - let the base class function get called.
 }; 
```

# jquery - jQuery - 复制文本字段与“检查元素”一样显示错误的值（解决方法？）

> ID：11695535
> 
> 赞同：0
> 
> 时间：2012-07-27T20:55:48.917
> 
> 标签：jquery

所以我在里面`div`有一个字段（`input[type=text]`），我正在创建这个 div 内容的副本并将副本显示给用户以编辑它的值。当他们更新副本的值时，它会被提交，这会更改原始值。

问题是，当我删除副本并再次从隐藏的 div 制作新副本时，出现在新副本字段中的文本是原始文本（加载页面时），而不是更新到的新文本。原始字段在其中显示新文本，*但是*当我检查其上的元素时， value 属性显示旧文本。

换句话说，除了副本中显示的文本和原件的 value 属性之外，一切都是正确的。

所以我想知道我是否做错了什么，或者是否有某种解决方法。

这是一个代码示例：

```
<div style="display:none">
    <input type="text" value="test" />
    <a>Submit</a>
</div>
<button class="get">Get value</button>
<button class="show">Show hidden one</button>
<button class="copy">Copy hidden one</button>​
$('button.copy').click(function(){
    $('<br><span>'+$('div').html()+'</span>').appendTo('body');
});

$('a').live('click',function(){
    $('div input').val($('span input').val());
    $('span').remove();
});

$('button.get').click(function(){
    alert($('div input').val());
});

$('button.show').click(function(){
    $('div').show();
}); 
```

[​我的 jsFiddle](http://jsfiddle.net/25Huz/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:09:55.270

`.val()`不会更新 value 属性，因此当您执行`.html()`或检查元素时，您看到的是原始 html 而不是值。如果您将上面的一行代码更改为：

```
$('div input').attr("value", $('span input').val()); 
```

它应该像您期望的那样工作。我`.data()`在尝试设置数据属性时看到了类似的问题，`.data`然后使用`.attr("data-`

# javascript - ASP MVC Javascript 链接到 uri

> ID：11695537
> 
> 赞同：0
> 
> 时间：2012-07-27T20:55:57.093
> 
> 标签：javascript, jquery, asp.net-mvc, hyperlink

我有一个 ASP.NET MVC Web 应用程序，并且有一个可以是 url 或文件链接的链接（网络共享、位置文件系统）

这是我的html....

```
<span id="link_id">link</span> 
```

这是我的 jQuery / Javascript ......

```
jQuery('#link_id').live('click', function() {
    var location = jQuery(this).attr('link');
    window.open(location, '_blank');
}); 
```

但是，当链接不是以 http:// 开头的网址时，我会收到错误消息。

有没有办法做到这一点，以便我可以访问网址和共享驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:52:02.997

**评论后编辑**

首先，'link' 不是`<span>`标签的属性，所以不能像`.attr('link');`. 我会尝试这样的事情：`

```
 jQuery('#link_id').live('click', function() {

    var location = jQuery(this).text();
    var httpFoundAt=location.search("http://");
    var httpsFoundAt    =location.search("https://");

        if ((httpFoundAt==-1) && (httpsFoundAt==-1) )
        {
            location='file://' + location;

        }

    window.open(location);
}); 
```

您可以根据您的用例检查“www”而不是 http 或 https。

# c++ - 使用 Emacs 的 c++ 模式中的不完整突出显示

> ID：11695541
> 
> 赞同：2
> 
> 时间：2012-07-27T20:56:10.540
> 
> 标签：c++, emacs, highlight, emacs23

我在 emacs 中使用 C++，它运行良好，除了突出显示代码时的细节。每当我编写一个带有多个参数的函数（有时，即使只有一个），它都不会将该函数识别为一个函数，例如，在：

```
double Gamma(double x, double mean, double gamma){
  //some code
} 
```

`Gamma`不像函数那样突出显示，而是作为纯文本，而 in `#define square(x) x*x`，`square`被正确突出显示，以及

```
complex<double> magphase2c(double mag, double phase){
// some code
} 
```

其中 magphace2c 突出显示为一个函数。

例如，当我有相同的行为时，

```
TF1 *fitBWResult = new TF1("fitBWResult", BreitWigner, ResMassMin, ResMassMax, 3);
// versus
double Mass = 0.776132; 
```

where`fitBWResult`不被识别为变量，但是`Mass`是。最后一个问题仅在我使用指针时发生。

我使用的是 Emacs 23.4.1，我不知道 cc-mode 的版本，但我正在运行最新的 Debian 测试安装（wheezy）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:54:39.090

我认为这个问题不应该没有答案，并且由于用户noisecapella的想法我解决了这个问题，所以我发布了我找到的解决方案：

当时的 Debian Wheezy 使用 cc-mode 5.31.8 和 Emacs 23.4.1，而**这个**版本的 cc-mode 就是问题所在。[解决方案是从他们的主页](http://cc-mode.sourceforge.net/index.php)安装软件包的较新版本（也许旧版本也可以完成这项工作）。特别是，我解决了安装版本 5.32.3 的问题，当时是较新的版本。

# selenium-webdriver - 从头开始编写编码的 UI 测试

> ID：11695544
> 
> 赞同：3
> 
> 时间：2012-07-27T20:56:32.863
> 
> 标签：selenium-webdriver, coded-ui-tests

我希望使用 Coded UI 在 VSTS 2010 中编写自动化测试。

当我搜索一些资源时，我发现其中大部分是关于记录测试的。

我想做的是编写测试，就像我们在 Selenium / Watin 中编写的那样。

是否有任何资源可以帮助我参考 api？

# javascript - 如何使用jquery在多个框架内查找表单元素

> ID：11695545
> 
> 赞同：1
> 
> 时间：2012-07-27T20:56:34.657
> 
> 标签：javascript, jquery, forms, find, frames

我正在开发一个当前使用旧样式框架的网站。我想通过替换一些 javascript DOM 调用，因为我遇到了跨浏览器问题。这就是我想替换的。

```
window.parent.frames['topdisplay'].document.FORMSV2DISPLAY.action = 'what ever action'; 
```

在上面的代码中，我的问题是“document.FORMSV2DISPLAY”部分在 IE 中不起作用，我必须用 document.form(0) 替换该部分，然后当然这些都不能在 Chrome 或 Safari 中正常工作。

我想使用 jquery 找到名为 FORMSV2DISPLAY 的表单，然后执行我通常的操作并提交。

我尝试过类似的东西

```
$(this).find('FORMSV2DISPLAY').action
$(parent).find('FORMSV2DISPLAY').action
$('topdisplay').find('FORMSV2DISPLAY').action 
```

这些都没有返回与我试图替换的 javascript DOM 调用相同的东西。我对 jquery 很陌生，非常感谢您的帮助或理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:04:28.460

设置动作：

```
$('#topdisplay').find('#FORMSV2DISPLAY').attr('action', 'whateveraction'); 
```

# html - 指定 HTML 元素的自然大小

> ID：11695554
> 
> 赞同：14
> 
> 时间：2012-07-27T20:57:23.220
> 
> 标签：html, css, responsive-design, aspect-ratio

让我们谈谈 HTML 中的图像。如果我在没有其他约束的情况下将图像放到页面上，它将假定其“自然大小”——即图像的字面大小（以像素为单位）。如果我指定一个 CSS `max-width`，`max-height`那么它将**保持其自然纵横比**但**缩小以适应大小约束**。惊人的！

我想要在任意元素上的确切行为。也就是说，我想创建一个`<div>`具有自然大小（我会以像素为单位指定）并在受`max-width`和影响时保持其纵横比的东西`max-height`。`min-width`（加分点：如果该技术也支持，那就太酷了`min-height`。）

以下是我收集的更多信息：

*   `naturalWidth`对于 HTML5 图像，您可以使用和属性读取图像的自然大小`naturalHeight`，前提是该`complete`属性为真。不幸的是，正如[MDN 指出的那样](https://developer.mozilla.org/en/DOM/HTMLImageElement)，这些属性是只读的并且特定于图像元素。

*   [这种方法](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)很棒，但是（即使高度响应`max-width`）宽度不响应`max-height`。

*   一些搜索未能找到仅 CSS 的解决方案，这让我认为可能不存在。我也会接受 JavaScript 解决方案，但它们需要能够适应窗口大小和父元素大小的变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:44:57.887

这是我的超级骗子解决方案：

的HTML

```
<div class="ratioBox">
    <div class="dummy"></div>

     <div class="el">This is the super duper ratio element </div>

</div> 
```

CSS

```
.ratioBox{
    position: relative;
    overflow: hidden;      /* to hide any content on the .el that might not fit in it */
    width: 75%;            /* percentage width */
    max-width: 225px;
    min-width: 100px;
    max-height: 112.5px;
    min-height: 50px;  
}

.dummy {
    padding-top: 50%;      /* percentage height */
}

.el {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: silver;
}

​ 
```

**看到它在这里工作：http:** [//jsfiddle.net/joplomacedo/7rAcH/](http://jsfiddle.net/joplomacedo/7rAcH/)

如果您无法理解发生了什么，解释将在一天结束时进行，因为不幸的是我没时间了。[我写这篇文章时是 7 月 28 日下午 2:54（格林威治标准时间）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T13:11:42.560

## 像使用 CSS 一样调整 div 的大小

**[演示](http://jsfiddle.net/webtiki/p78y4/)**：调整结果窗口的大小（宽度和高度）以查看 div 调整大小的图像。

在演示中，您可以看到图像和 div 都根据结果窗口视口的高度和宽度以相同的方式调整大小。

该技术使用**[vh/vw](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Viewport-percentage_lengths)**单位。他们允许您**根据视口**的**高度**设置宽度，根据视口的宽度设置高度。
通过结合使用 max-width 和 max-height，您可以使其行为和调整大小就像浏览器调整大小时的图像一样。
浏览器支持这些单位：IE9+。有关详细信息，请参阅[canIuse](http://caniuse.com/viewport-units)。
上面的演示使用 1:1 的纵横比，但您可以通过一些计算使用任何其他纵横比，示例：

*   4:3 纵横比：[演示](http://jsfiddle.net/webtiki/p78y4/2/)
*   16:9 宽高比：[演示](http://jsfiddle.net/webtiki/p78y4/3/)

*CSS（用于 1:1 纵横比）*

```
div{    
    width: 80vw; 
    height: 80vh;

    max-width: 80vh;
    max-height: 80vw;
} 
```

## 更进一步：vmin 和 vmax

您也可以使用[vmin/vmax](https://developer.mozilla.org/fr/docs/CSS/longueur)。这些单位选择视口宽度和高度之间的最小值或最大值，因此您可以获得所需的最大/最小高度和最大/最小宽度。但是浏览器对这些单元的支持不如`vh/vw`( [canIuse](http://caniuse.com/viewport-units) )。

**[演示](http://jsfiddle.net/webtiki/p78y4/5/)**

*CSS（对于 1:1 纵横比）：*

```
div{    
    min-width:200px;
    min-height:200px;

    width: 80vmin; 
    height: 80vmin;

    max-width: 800px;
    max-height: 800px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:42:22.873

我认为现在使用纯 CSS 不可能做到这一点。也许将来我们将全面支持 CSS 变量和计算。现在您可以使用透明图像来指定纵横比或使用脚本。也可能像[LESS](http://lesscss.org/)这样的东西很有用。

# php - PHP：导致用户下载托管在不同服务器上的文件

> ID：11695555
> 
> 赞同：-1
> 
> 时间：2012-07-27T20:57:33.503
> 
> 标签：php

如果我做

```
$file='http://notmywebsite.com/verybigimage.png';
$newfile='test.png';
copy($file,$newfile); 
```

我的服务器会下载`http://notmywebsite.com/verybigimage.png`吗？

如果是，我怎样才能让我的用户下载`http://notmywebsite.com/verybigimage.png`而不让我的服务器下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:19:57.027

不可能让客户端（用户）下载一个文件，然后以无缝的方式将该文件复制到服务器中，因为这两个环境位于不同的系统中——为了做到这一点，客户端需要上传文件下载后返回服务器，如果最终目标是在服务器中拥有文件的副本，这反过来又会给用户带来痛苦，并且比简单地让服务器下载文件并将其复制到那里要慢。

# prolog - 参数没有充分实例化 SWI-Prolog

> ID：11695556
> 
> 赞同：1
> 
> 时间：2012-07-27T20:57:34.050
> 
> 标签：prolog, swi-prolog, instantiation-error

我试图编写一个 Prolog 脚本，它可以创建一个字符串列表，在一个简单的过程之后会产生一个给定的字符串。我对 Prolog 的了解非常有限，我什至不确定它是否能够执行此操作，所以请告诉我是否不可能。

到目前为止我得到了这个

```
replace_word(Old, New, Orig, Replaced) :-
    atomic_list_concat(Split, Old, Orig),
    atomic_list_concat(Split, New, Replaced). 
```

它可以执行此操作

```
10 ?- replace_word('a','e','glava',X).
X = gleve. 
```

但它不能回溯它

```
11 ?- replace_word('a','e',X,'gleve').
ERROR: atomic_list_concat/3: Arguments are not sufficiently instantiated 
```

我可以想象是什么导致了这个问题，但是有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:14:54.203

replace_word/4 was written that way for efficiency, due to SWI-Prolog first class handling of atoms. To 'reverse' its semantic, I can't see a better way than using an helper predicate:

```
replace_word(Old, New, Orig, Replaced) :-
    (   var(Orig)
    ->  atomic_list_concat(L, New, Replaced),
        insert_alt(L, [Old, New], L1),
        atomic_list_concat(L1, Orig)
    ;   atomic_list_concat(L, Old, Orig),
        atomic_list_concat(L, New, Replaced)
    ).
insert_alt([A,B|R], Ks, [A,K|T]) :-
    member(K, Ks),
    insert_alt([B|R], Ks, T).
insert_alt([A], _Ks, [A]). 
```

insert_alt/3 it's a bit more general than required, instead of a list (Ks) the pair of Old-New could be used....

test:

```
?- replace_word('a','e',X,'gleve').
X = glava ;
X = glave ;
X = gleva ;
X = gleve ;
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:18:52.803

当然在实现这一点时应该有其他选择，而且我不是 Prolog 专家，但它似乎`atomic_list_concat/3`不会接受两个变量作为参数（考虑到这个谓词的作用，它会很棘手，对吧？），所以你可以绕过通过更改子句的顺序以“修复”您之前知道的变量来获得变量的问题。例如：

```
replace_word(Old, New, Orig, Replaced) :-
    (var(Orig), !, atomic_list_concat(Split, New, Replaced),
     atomic_list_concat(Split, Old, Orig)) ;
    (atomic_list_concat(Split, Old, Orig),
     atomic_list_concat(Split, New, Replaced)). 
```

请注意，剪切不是必需的，但现在您可以按照您的要求进行操作：

```
?- replace_word('a','e',X,'gleve').
X = glava.

?- replace_word('a','e','glava',Y).
Y = gleve. 
```

# visio - Visio 2010 动态切换图层

> ID：11695558
> 
> 赞同：0
> 
> 时间：2012-07-27T20:57:42.740
> 
> 标签：visio

我在 visio 文档中有多个图层。一个概览层和一些“详细”层。我想要做的是双击概览层（第 1 层）中的形状并切换细节层（第 2 层）（因此，当单击第 1 层中的形状时，第 1 层应该变得不可见，第 2 层应该变得可见） .

在 visio 2010 中是否有一种简单的方法可以实现这一点？我在互联网上搜索过，唯一发现的是将以下公式添加到形状的形状表“EventDblClick”中，但我收到错误消息“公式中的错误”：

```
 =SETF(GetRef(ThePage!Layers[1].Visible),NOT(ThePage!Layers.Visible)) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:36:29.867

用于设置图层的属性，将 ID 放在属性之后

```
 =SETF(GetRef(ThePage!Layers.Visible[1]),NOT(ThePage!Layers.Visible)) 
```

# string - 如何将文本字符串转换为小时

> ID：11695559
> 
> 赞同：0
> 
> 时间：2012-07-27T20:57:45.327
> 
> 标签：string, excel, text

我有格式为 d.hh.mm.ss 和 hh.mm.ss 的数据，我需要将两者转换为 HH.MM.SS 的时间值

在 A1 中，文本字符串是 16.21:38:27 在 A2 中，文本字符串是 04:08:45

我生成的单元格应显示 B1 405:38:27 B2 04:08:45

我尝试使用 =LEFT(A1,SEARCH(":",A1)-1)+TIMEVALUE(MID(A1,SEARCH(":",A1)+1,255)) 但结果错误 A1 显示为 403： 29:24 A2 显示为 104:45:00

我想要两个字符串的一个公式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:22:32.753

由于 4:08:45 是有效的时间格式，而 16.21:38:27 不是这个公式在这两种情况下都应该适用于您：

`=IF(ISNUMBER(A1+0),A1+0,RIGHT(A1,8)+LEFT(A1,FIND(".",A1)-1))`

将结果单元格格式化为 [h]:mm:ss

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:26:13.090

这里是：

```
= IF(ISERROR(FIND(".",A1)),
    TIMEVALUE(A1), 
    VALUE(LEFT(A1,FIND(".",A1)-1)) + TIMEVALUE(MID(A1, FIND(".", A1)+1, 8))) 
```

如果一个 ”。” 字符串中不存在，它只是使用 TIMEVALUE() 来解析时间。否则，它会解析“.”之前和之后的部分。分别地。天数构成结果的整数部分，时间计算为小数天数。然后使用标准格式化对话框将其格式化为 [h]:mm:ss 格式。

如果您希望 B1 存储转换后的小时/分钟/秒的*字符串*而不是格式化的数字，请将上述全部内容包装在`TEXT(formula above, "[h]:mm:ss")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:35:31.573

@TimWilliams 一针见血。你有一个错字。更改`16.21:38:27`为`16:21:38:27`，它将正常工作。您还可以包装公式以检查长度。如果超过 8 个字符，则表示添加了一个日期。看这个例子

试试这个（你可以同时使用它）

`=IF(LEN(A1)>8,LEFT(A1,SEARCH(":",A1)-1)+TIMEVALUE(MID(A1,SEARCH(":",A1)+1,255)),TIMEVALUE(A1))`

**快照**

![在此处输入图像描述](../Images/47431ab1c673709687e723352c3f03c0.png)

**编辑**

我刚刚注意到您`255`在公式中进行了硬编码。你不需要这样做。这也将起作用。

`=IF(LEN(A1)>8,LEFT(A1,SEARCH(":",A1)-1)+TIMEVALUE(MID(A1,SEARCH(":",A1)+1,LEN(A1)-SEARCH(":",A1)+1)),TIMEVALUE(A1))`

顺便说一句，为了万无一失，您还可以将`TRIM`函数添加到上述公式中......

# artifactory - Artifactory 远程仓库和 Terracota

> ID：11695560
> 
> 赞同：0
> 
> 时间：2012-07-27T20:57:48.520
> 
> 标签：artifactory

我想设置我的 maven settings.xml 文件以从 Artifactory 缓存下载所有外部依赖项，而不是直接从任何公共存储库（如 repo1、repo2 或 Jboss）下载它们。我按照[http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution)上的说明进行操作，但我遇到了 terracota 库的错误，错误是：

```
 Could not find artifact net.sf.ehcache:ehcache-terracotta:jar:2.5.0 in remote-repos 
```

我尝试在远程存储库部分添加 terracota 存储库，但这也不起作用。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:48:15.350

请将兵马俑存储库添加到您的工件中

这是 URL= [http://www.terracotta.org/download/reflector/releases](http://www.terracotta.org/download/reflector/releases) 如果 repo 的测试不起作用，请不要担心......

最后一步是进入 Edit Virtual Repository 并将新的 terracotta repo 添加到名为“Remote Repo”的虚拟存储库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:14:39.417

我可以想到几种可能性：

1.  您的远程存储库缓存未配置为指向包含 Terracotta 文件的远程存储库
2.  解决对 Terracotta 的依赖时，您的构建未使用正确的组织或模块名称。

您能否在问题中添加一些信息，详细说明您在哪里看到错误消息，以及您是否可以浏览到 Artifactory 中的 ehcache-terracotta 2.5.0 版？

# javascript - javascript事件序列/层次结构包含文件与文件内

> ID：11695563
> 
> 赞同：0
> 
> 时间：2012-07-27T20:57:55.767
> 
> 标签：javascript, jquery, html

`document.ready`我在外部脚本文件和文件中定义了相同的侦听器。我在中央外部文件中有一个，因为我总是希望在单击带有 class 的元素时执行删除`.delete`，但有时我也想做一些其他的事情。

```
//script.js
$(document).ready(function(){
    $('.delete').click(function(){
        //send AJAX delete
    });
});

//index.php
<script type="text/javascript">
    $(document).ready(function(){
        $('.delete').click(function(){
            var msg = "Are you sure you want to delete the <?=$item?>'"+$(this).attr("name")+"'?";
            if ( confirm(msg) ) {
                removeDataTableRow( $(this)... );
            }//fi
        });
    });
</script> 
```

外部 js 文件中的侦听器在文件内脚本的侦听器之前触发，但我想要相反的情况（并且我想从外部文件中取消第二个事件 if `confirm=false`）。

我想在文件内脚本中设置一个变量并在外部设置该变量以了解确认的结果，但外部脚本中的脚本仍然首先触发，因此该变量尚未正确定义： /

**编辑**：我已经阅读[了问题 282245](https://stackoverflow.com/questions/282245/)，它涵盖了不同侦听器的事件优先级，但不适用于*同一*侦听器的出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:19:26.433

Javascript 运行顺序实际上非常简单。除非您使用异步代码（例如事件处理程序、AJAX 请求或 setTimeout），否则代码总是按顺序排列。换句话说，浏览器从页面顶部开始，运行它找到的第一个脚本标签中的所有内容，然后移动到下一个脚本标签，等等。

异步的东西有点混淆，但一般规则（至少在大多数库中）是第一个连接的处理程序首先运行。因此，在这种情况下，您的外部 document.ready 处理程序将关闭，因为它在页面上比您的页内脚本标记更早。

# css - CSS 速记效率

> ID：11695566
> 
> 赞同：1
> 
> 时间：2012-07-27T20:58:23.200
> 
> 标签：css, performance, linear-gradients

`background-color: #BADA55;`和之间的效率有什么区别`background: #BADA55;`？我意识到这很简单，但是浏览器提取每个值的方式是否存在差异。另外，在一个稍微相关的注释上，在[CSS3Please](http://css3please.com)上，我注意到对于线性渐变，他们使用`background-image`. 有什么理由不简单地使用`background`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:09:53.800

该规范没有提到浏览器应该如何实现属性解析，特别是速记属性。它只是一个[语法](http://www.w3.org/TR/CSS21/grammar.html)，而语法没有说明它的实现。我怀疑，浏览器如何解析速记声明完全取决于实现并且不容易回答（当然，除非你有源代码）。

事实上，我们有大量专门针对 IE 的 CSS hack 的主要原因是它对 CSS 的理解有多么不同（而且通常很差）。

> 有什么理由不简单地使用`background`？

答案就在你上一句话：

> 另外，在一个稍微相关的注释上，在[CSS3Please](http://css3please.com/)上，我注意到对于线性渐变，他们使用`background-image`.

确实; CSS 渐变被视为与背景一起使用的图像，并记录在[图像值模块](http://www.w3.org/TR/css3-images)中。他们应用的单个背景属性是`background-image`.

如果您使用速记属性仅指定颜色或仅指定渐变，[它将使用其余值的初始值](http://www.w3.org/TR/CSS21/about.html#shorthand)。如果使用风格的这种差异很重要，那么性能差异就完全不可能了，因为它不再是一个公平的比较。

在这个例子中，第二个`background`速记声明将完全覆盖第一个，留下纯色和没有渐变的初始值`background-image`is `none`：

```
background: radial-gradient(white, rgba(255, 255, 255, 0)) /* transparent */;
background: /* none */ green; 
```

速记符号的目的是在单个声明中指定多个相关属性的值，因此为了同时应用渐变和颜色，应将其重写为：

```
background: radial-gradient(black, transparent) green; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:02:55.840

你的第二个例子应该是：`background: #BADA55;`，但无论哪种方式都很好，*不*应该是你需要担心的事情。

如果您对浏览器如何解析 CSS 感到好奇，我可以告诉您：这取决于（曾经使用过 IE 吗？）。对于 Chrome，您可以[在 GitHub 上](https://github.com/chromium/chromium)查看源代码，并且可以在[此处](https://developer.mozilla.org/en/Mozilla_Source_Code_%28Mercurial%29)找到 Firefox 源代码。

# android - 无法在 TabWidget 中进行我自己的活动

> ID：11695573
> 
> 赞同：0
> 
> 时间：2012-07-27T20:58:56.327
> 
> 标签：android, android-activity, tabwidget

我下载[了这个](http://www.techwavedev.com/?p=14)项目来编写一个带有`TabWidget`. 我试图把我的活动而不是，`MainActivity`但每次都失败了。我试图将`MainActivity`（有 TRYTOCHANGEHER​​E 的地方）更改为我自己的活动，但它不起作用。我是否需要设置特殊设置才能使其正常工作？

```
Intent intent = new Intent(this, TRYTOCHANGEHERE-->MainActivity.class);
        tabHost.addTab(tabHost.newTabSpec("Main")
                .setIndicator("Main", res.getDrawable(R.drawable.ic_tab_main))
                .setContent(intent));

        Intent intent2 = new Intent(this, SetupActivity.class);
        tabHost.addTab(tabHost
                .newTabSpec("Setup")
                .setIndicator("Setup", res.getDrawable(R.drawable.ic_tab_setup))
                .setContent(intent2));
        tabHost.setCurrentTab(0); 
```

我从 Android 开始，所以这可能是一件愚蠢的事情，我接受任何评论！

谢谢！！！！

* * *

- -编辑 - -

这是错误日志：

```
07-30 08:57:14.726: E/AndroidRuntime(1865): FATAL EXCEPTION: main
07-30 08:57:14.726: E/AndroidRuntime(1865): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tablayout/com.example.tablayout.TabLayout}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.tablayout/com.example.tablayout.IMCActivity}; have you declared this activity in your AndroidManifest.xml?
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.os.Looper.loop(Looper.java:137)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at java.lang.reflect.Method.invoke(Method.java:511)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at dalvik.system.NativeStart.main(Native Method)
07-30 08:57:14.726: E/AndroidRuntime(1865): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.tablayout/com.example.tablayout.IMCActivity}; have you declared this activity in your AndroidManifest.xml?
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.resolveActivityInfo(ActivityThread.java:1767)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:285)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.widget.TabHost.addTab(TabHost.java:236)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at com.example.tablayout.TabLayout.onCreate(TabLayout.java:24)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.Activity.performCreate(Activity.java:4465)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-30 08:57:14.726: E/AndroidRuntime(1865):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-30 08:57:14.726: E/AndroidRuntime(1865):     ... 11 more 
```

我的应用程序编译并安装，但是当我启动它时，它停止了，我收到消息“应用程序已意外停止”

我正在尝试启动的课程非常基础：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class TestActivity extends Activity {        

    TextView hw = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        hw = new TextView(this);
        hw.setText("Hello World!");
        setContentView(hw);
    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:58:44.543

尝试列出

> .TestActivity

作为你的 android xml 文件中的一个活动。那应该工作！

# jquery-masonry - Jquery-Masonry 几乎总是空白

> ID：11695574
> 
> 赞同：7
> 
> 时间：2012-07-27T20:59:06.903
> 
> 标签：jquery-masonry

我一直在尝试 Masonry，但无法让它完全按照我的意愿工作。我使用的元素的宽度和高度各不相同，但都适合网格（4 种不同的大小，所有最小+边距的倍数）。我还计算了可以精确拟合的元素分布（最小的 7 个，所有其他元素的 4 个）。

然而，很少有砖石能够整齐地安装它们，有时底部会潜伏一个，有时会错位。总是这样，在一个视图中，我可以看到需要移动哪些项目以使其适合。

有没有办法让砖石在移动元素时更具侵略性？还是重复两次以确保没有空格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:50:22.513

[您可能应该在这里](http://isotope.metafizzy.co/)查看砌体的“老大哥”同位素。请注意，如果您的元素按特定顺序排序或以特定顺序固定 - 并且比单个列宽更宽 - 它们可以在窄浏览器宽度下“阻止”一列。

[![在此处输入图像描述](../Images/543fa02ea51d09908aee476bcdea661a.png)](http://goo.gl/pT1gq)

**编辑**也许[这个小提琴](http://goo.gl/pT1gq)解释得更好一点。如果您查看那个并且 - 在观察 div 中的数字时 - 您会看到下一个砌体元素（红色元素 5）不可能适合白色方块，因为它必须在元素 4 之后；所以它必须结束的地方意味着，只有三排适合，一个会有一个白色的间隙。也许您可以使用 Isotope 的 shuffle 和/或 reLayout 方法并牺牲以严格的顺序排列您的元素？最好是解决您的问题的jsfiddle。

```
<article>
  <div class="tile blue"><p>1</p></div>
  <div class="tile black"><p>2</p></div>
  <div class="tile tall yellow"><p>3</p></div>
  <div class="tile grey"><p>4</p></div>
  <div class="tile wide red"><p>5</p></div>
  <div class="tile green"><p>6</p></div>
  <div class="tile grey"><p>7</p></div>
  <div class="tile blue"><p>8</p></div>
  <div class="tile green"><p>9</p></div>
</article> 
```

* * *

```
$('article').isotope({
    itemSelector : '.tile',
    masonry: {
        columnWidth: 100
    }
}); 
```

* * *

```
article .tile {
    display: block;
    float: left;
    box-sizing: border-box;

    width: 100px;
    height: 100px;

    font-size: 3em;
    font-weight: 700;

    padding: 0 6px;
    color: #fff;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;

    border:1px dotted black;
}

article .tile.wide {
    width: 200px;
}

article .tile.tall {
    height: 200px;
}

.tile.yellow { background: yellow; }
.tile.red { background: red; }
.tile.blue { background: blue; }
.tile.black { background: black; }
.tile.grey { background: grey; }
.tile.green { background: green; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T20:32:51.890

为了扩展丹的回答，我自己也遇到了这个问题，[Packery](http://packery.metafizzy.co/)似乎是最新的；[更多维护](https://github.com/metafizzy/packery)版本的砌体 - 来自同一作者。我不清楚为什么这两个项目作为单独的实体存在，而后者只修复了错别字。

好消息是——它几乎完全是一个替代品。我必须做的唯一更改（除了名称`masonry`->`packery`使用的地方）是*删除*一个选项，因为它是 Packery 中的*默认选项和唯一*选项。

也就是说`isFitWidth: true`，我试图让 Masonry 包装的东西接近 Packery 在没有任何选择的情况下做得很好。

Packery 的另一个不错的变化是`gutter: x`适用于垂直和水平排水沟。在 Masonry 中，这只是水平的——虽然`margin-bottom`在 CSS 中微不足道，但感觉就像是不必要的 hack。

# image - 如何创建没有 EBS 的预留实例的“实例存储”AMI 映像

> ID：11695577
> 
> 赞同：6
> 
> 时间：2012-07-27T20:59:29.383
> 
> 标签：image, amazon-ec2, amazon, instance, ec2-ami

我有一些带有 EBS 卷的微型实例，您可以从 ec2 控制台右键单击并创建整个系统的 AMI 映像。

但我购买了一些具有 500GB 存储空间的高内存预留实例，因此我安装了“Instance Store”ubuntu AMI 映像

现在我已经在我的服务器上配置了所有东西，并想创建一个实例存储 ami 映像，这样我就可以在新服务器上安装这些映像，而不必再次安装所有东西

你能帮我吗，我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T15:10:13.930

这就是你使用 Ubuntu 的方法：从这里启动所需的实例（选择一个没有 EBS 存储的实例）：[http ://cloud-images.ubuntu.com/releases/precise/release/](http://cloud-images.ubuntu.com/releases/precise/release/)

在此处遵循本指南（在下面查看有关 Ubuntu 的提示）：[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html)

1.  首先，您需要使用本指南创建您的公钥和证书（稍后您将需要它们）：[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-credentials.html#using-credentials-certificate](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-credentials.html#using-credentials-certificate)
2.  另请注意您的 AWS 账户 ID： [http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-credentials.html#using-credentials-account-id](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-credentials.html#using-credentials-account-id)
3.  将您的 pk 和证书上传到您下载的 ubuntu 实例： `scp -i <path-to-your-ec2key>.pem <your-account-pk>.pem <your-account-cert>.pem ubuntu@<yourinstance>.<yourzone>.compute.amazonaws.com:~/`
4.  这会将 pk-file 和 cert-file 放在正在运行的实例的主目录中。现在登录并将它们移动到 /mnt 目录，以便在捆绑 AMI 时不会包含它们。
5.  现在将您的图像修改为您心中的内容。
6.  安装 EC2 AMI 工具：`sudo apt-get install ec2-ami-tools`
7.  运行以下命令来创建你的包：`ec2-bundle-vol -k <your-account-pk>.pem -c <your-account-cert>.pem -u <user_id>`
8.  其余的请参见上面的指南。您需要将捆绑包上传到 S3，然后注册您的 AMI，以便启动它。

祝你好运！

# django - 在 django 中使用 postgres“with”语句

> ID：11695580
> 
> 赞同：2
> 
> 时间：2012-07-27T20:59:43.057
> 
> 标签：django, postgresql

是否可以在 django 查询集中使用 with 语句？像一个额外的参数。我可以使用 .raw，但我只是想知道这是否是一种方法（可能通过覆盖 Query 类或其他路线）

作为参考，这需要放在 select 语句之前。

所以：

```
with blah as (select * from table)

select * from blah where blah.column is not null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:01:35.620

我是这样做的：

```
 clone = kwargs.get('clone')
    if clone:
        pre_query = str(clone.query)
        pre_query = pre_query.replace('`','"')
    else:
        qs = clone.get_query_set()
        pre_query = str(qs.query)
        pre_query = pre_query.replace('`','"')

    sql = "\
    with etext as ({pre_query}),\
    words as ( \
    select lower(regexp_split_to_table(element_text , E'\\\\W+')) as word \
    from etext \
    ), \
    word_lex as ( select word, count(*) as cnt,\
    to_tsvector('english', COALESCE(word,'')) as t \
    from words \
    group by 1 order by %s desc ) \
    select * from word_lex WHERE \
    t != '' ".format(pre_query=pre_query)
    limit = kwargs.get('limit')
    order_by = kwargs.get('order_by')
    if limit != None:
        sql += 'limit {limit}'.format(limit=limit)
    if order_by != None:
        sql = sql %(order_by)
    else:
        sql = sql %('cnt')

    return custom_sql(sql) 
```

基本上，我只是使用 django 生成的整个 sql 来创建另一个带有子查询的 sql。从那里，我在随后的查询中使用了它。

# python - 如何使用 Python 的 unittest 断言数据库错误？

> ID：11695583
> 
> 赞同：3
> 
> 时间：2012-07-27T20:59:54.470
> 
> 标签：python, unit-testing

我正在运行 Python 2.6.5，所以我使用`unittest2`模块，它是 2.7 和 3.X 中 unittest 模块的未来端口。我正在执行以下集成测试：

```
def test_hits_constraint_raise(self):
    obj = Table1(...)
    self.sess.add(obj)
    self.sess.flush()

    # assert condition raises
    self.assertFailure(IntegrityError, sess.add, obj) 
```

相反，它会遇到错误。

```
======================================================================
ERROR: test_hits_constraint_raise (__main__.TestModels)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test_models.py", line 76, in test4_create_exercise_same_id_constraint_raise
    self.sess.flush()
  File "build/bdist.linux-i686/egg/sqlalchemy/orm/scoping.py", line 114, in do
    return getattr(self.registry(), name)(*args, **kwargs)
      .........
  File "build/bdist.linux-i686/egg/sqlalchemy/engine/default.py", line 331, in do_execute
    cursor.execute(statement, parameters)
IntegrityError: (IntegrityError) column exercise_id is not unique u'INSERT INTO TABLE1 (attribute1_name, attribute2_name) VALUES (?, ?)' ('value1', 'value2')

----------------------------------------------------------------------
Ran 4 tests in 0.531s

FAILED (errors=1) 
```

唯一的办法是使用`@unittest2.expectedFailure`吗？那一个会运行良好。但我想确切地知道引发了什么样的错误。

```
----------------------------------------------------------------------
Ran 4 tests in 0.513s

OK (expected failures=1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:18:32.777

您可以`assertRaises`用作`with`语句上下文：

```
with unittest.assertRaises(IntegrityError):
    sess.add(obj) 
```

[更多细节](http://www.voidspace.org.uk/python/articles/unittest2.shtml#assertraises)。

# google-apps-script - 你如何查询 ScriptDb 的部分匹配？

> ID：11695590
> 
> 赞同：2
> 
> 时间：2012-07-27T21:00:40.757
> 
> 标签：google-apps-script

我尝试使用 RegEx，但没有返回任何结果：

```
function findRecord() {
  var db = ScriptDb.getMyDb();
  var toFind = /Quality/i;
  var results = db.query({companyName: toFind});
  while (results.hasNext()) {
    var result = results.next();
    Logger.log(Utilities.jsonStringify(result));
  }
} 
```

据我所知，ScriptDb 的 query() 只会返回字符串的完全匹配。

我能看到的唯一方法是返回整个数据库，然后遍历它。我真的希望有一种方法可以查询部分匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:18:26.800

尝试使用 match 方法迭代结果

```
function testQuery() {      
  var db = ScriptDb.getMyDb();
  var results = db.query({});
  var start = new Date();
  while (results.hasNext()) {
  var result = results.next();
  if (result.companyName.match(/qual.*/i)){
  Logger.log(Utilities.jsonStringify(result));
   }
  }
  var endTime = new Date();
  Logger.log("time is " + (endTime.getTime() - start.getTime()) + "ms");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:12:30.273

ScriptDb 目前不支持字符串中的部分匹配。根据数据，您可以使用[anyOf](https://developers.google.com/apps-script/class_scriptdbinstance#anyOf)方法：

```
var results = db.query({
  companyName: db.anyOf(['Quality', 'quality'])
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:13:26.690

我不认为这是可能的。[您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开“增强请求” 。

但是根据您的使用情况，如果您以不同的方式构建数据库，可能会实现您的目标，可能会为您的对象创建某种“标签”类别属性，您事先设置，即在将对象添加到数据库时，所以您可以稍后查询。

# weblogic - APEX 迁移到 Weblogic 现在会引发证书错误

> ID：11695591
> 
> 赞同：0
> 
> 时间：2012-07-27T21:00:41.613
> 
> 标签：weblogic, ssl-certificate, oracle-apex

自从将内部顶点网站从嵌入式 PL/SQL 网关移动到 weblogic 服务器浏览器后，就会引发证书错误。

我怎样才能摆脱这些错误/修复证书？

IE浏览器：

```
The security certificate presented by this website was not issued by 
a trusted certificate authority. Security certificate problems may 
indicate an attempt to fool you or intercept any data you send to the server 
```

铬合金：

```
You attempted to reach sy02131.adt.com, but the server presented a 
certificate issued by an entity that is not trusted by your computer's
operating system. This may mean that the server has generated its own 
security credentials, which Google Chrome cannot rely on for identity 
information, or an attacker may be trying to intercept your communications. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:55:56.663

开箱即用的嵌入式 SQL 网关 (EPG) 不使用 SSL。看起来您的 Weblogic 实例确实需要 SSL，甚至需要 SSL。它可能使用了一组您打算替换的启动键。无论如何，您的浏览器导致了这个问题，而不是服务器。您应该能够绕过它作为浏览器中的警告或添加例外。如果您希望此错误在生产中消失，请从证书颁发机构获取一些正确的 SSL 密钥。

以下是获取它们后如何配置它们： http: [//docs.oracle.com/cd/E12840_01/wls/docs103/secmanage/ssl.html](http://docs.oracle.com/cd/E12840_01/wls/docs103/secmanage/ssl.html)

# ios - iOS touchesBegan 问题

> ID：11695595
> 
> 赞同：0
> 
> 时间：2012-07-27T21:01:03.993
> 
> 标签：ios, touchesbegan, touchesmoved

我有一个带有 15 个 UIImageViews 的 NSArray：

```
@interface ViewController : UIViewController{

    NSArray *ArrayImages1;
    NSArray *ArrayImages2;

} 
```

在 viewDidLoad 中：

```
 ArrayImages1 = [[NSArray alloc] initWithObjects: a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, nil]; 
```

其中 a1，a2... 是 UIImageViews 的出口，对于 ArrayImages2 也是如此

TouchesBegan 和 TouchesMoved：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];
    UIImageView *posible;
    int imagen;
    if (point.x < 161) {
        imagen = Contador1;
        if (Contador1 > 14) {imagen = Contador1 - 15;}
        imagen--;
        posible = [ArrayImages1 objectAtIndex:imagen];
    }
    else if (point.x > 159) {
        imagen = Contador2;
        if (Contador2 > 14) {imagen = Contador2 - 15;}
        imagen--;
        posible = [ArrayImages2 objectAtIndex:imagen];
    }
    if ([touch view] != posible) { return; }
    original2 = posible.center;    
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];
    UIImageView *posible;
    int imagen;
    if (point.x < 161) {
        imagen = Contador1;
        if (Contador1 > 14) {imagen = Contador1 - 15;}
        imagen--;
        posible = [ArrayImages1 objectAtIndex:imagen];
    }
    else if (point.x > 159) {
        imagen = Contador2;
        if (Contador2 > 14) {imagen = Contador2 - 15;}
        imagen--;
        posible = [ArrayImages2 objectAtIndex:imagen];
    }
    if ([touch view] != posible) { return; }
    posible.center = point;
} 
```

我必须知道触摸是否在两个可能的 UIImageView 之一中，如果是，请移动它。Contador1 和 Contador2 整数是计算有多少 UIImageView 可见的计数器，用户只能移动其中的最后 2 个。

它有效，问题是当我触摸外面时，它会使应用程序崩溃。如果我在 touchesBegan 和 TouchesMoved 中更改，“posible = [ArrayImage..”的索引为 0，它只适用于第一个 UIImageView（我明白为什么），但它不会崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:35:13.587

> 我必须知道触摸是否在两个可能的 UIImageView 之一中

我不能很好地遵循您的代码，但如果您首先检查该点是否在视图的矩形内，您似乎可以简化事情。然后根据结果建立你的逻辑。就像是

使用[CGRectContainsPoint](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)：

```
bool CGRectContainsPoint (
   CGRect rect,
   CGPoint point
);

UIImageView *foundView

for(UIImageView* theView in ArrayImages1){

 if (CGRectContainsPoint(theView.frame, touchPoint){
     foundView = theView;
     break;
 }

} 
```

然后...

```
if (foundView != nil){
// do some logical thing

} 
```

或者...

```
if ([foundView isEqual:someOtherView]){
// I may have the syntax wrong on the above

} 
```

# sql-server - 无法使用 pyodbc 使用 django 1.4 应用程序连接到 sql server 2008

> ID：11695597
> 
> 赞同：0
> 
> 时间：2012-07-27T21:01:34.813
> 
> 标签：sql-server, django, ubuntu

当我们尝试使用 django shell 时，我们无法连接并出现以下错误；

TypeError: **init** () 正好接受 2 个参数（1 个给定）

我们的数据库设置文件如下所示；

```
DATABASE_ENGINE = 'sql_server.pyodbc'                   #  'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
#DATABASE_ODBC_DSN = 'websiteredesign'
#DATABASE_ODBC_DRIVER = 'FreeTDS'
DATABASE_NAME = db             # Or path to database file if using sqlite3.
DATABASE_USER = db             # Not used with sqlite3.
DATABASE_PASSWORD = 'dcls'         # Not used with sqlite3.
DATABASE_HOST = '10.64.4.135'  # Set to empty string for localhost. Not used with sqlite3.
DATABASE_PORT = '1433'
DATABASE_OPTIONS = {
    'driver': 'FreeTDS',
    'dsn': 'dcls',
    'host_is_server': True,
    'extra_params': 'TDS_VERSION=8.0'
}

DATABASES = {
    'default': {
        'ENGINE': DATABASE_ENGINE,
        'NAME': DATABASE_NAME,
        'USER': DATABASE_USER,
        'PASSWORD': DATABASE_PASSWORD,
        'HOST': DATABASE_HOST,
        'PORT': DATABASE_PORT,
        'OPTIONS': DATABASE_OPTIONS,
    },
    'dcls': {
        'ENGINE': DATABASE_ENGINE,
        'NAME': DATABASE_NAME,
        'USER': DATABASE_USER,
        'PASSWORD': DATABASE_PASSWORD,
        'HOST': DATABASE_HOST,
        'PORT': DATABASE_PORT,
        'OPTIONS': DATABASE_OPTIONS,
    }
} 
```

你可以忽略一些重复。这只是我们所做的一些测试。似乎没有任何帮助。我们从一个正在运行的 django 1.3 系统移植过来。任何帮助，将不胜感激。

谢谢，鲍比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:41:48.183

1.4 中有许多数据库更改（时区和批量插入开始），需要更改第三方后端。然而，看起来[`django-pyodbc`](http://code.google.com/p/django-pyodbc/)一年多没有看到提交。在撰写本文时，最后一次提交是在 2011 年 6 月。这很可能意味着它`django-pyodbc`与 1.4 不兼容。

# sugarcrm - 如何添加额外的分组地址来编辑和详细视图？

> ID：11695599
> 
> 赞同：1
> 
> 时间：2012-07-27T21:02:04.430
> 
> 标签：sugarcrm

SugarCRM 6.5 在潜在客户模块中为主要地址和备用地址内置了分组地址字段，可与 Edid 和 Detail 视图一起使用。我已经能够为第三个地址添加字段，但是当我将新地址字段添加到编辑视图和详细信息视图时，它不显示分组字段，只显示一个字段。

根据文档，我可以在 Detail View 和 Edit View 定义中使用 customCode 选项，但我无法成功地让它工作。有没有人对如何做到这一点有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:37:50.777

您必须为所有地址字段（如“帐单”或“主要”）提供前缀。那么您的地址字段将采用以下形式：
billing_address_street
billing_address_city
billing_address_state
billing_address_postalcode
billing_address_country

在 Editview 中，您可以通过在 editviewdefs 中添加以下代码将其显示为单个分组地址。用您使用的任何前缀替换“帐单”。

```
array (
  'name' => 'billing_address_street',
  'hideLabel' => true,
  'type' => 'address',
  'displayParams' => 
  array (
    'key' => 'billing',
    'rows' => 2,
    'cols' => 30,
    'maxlength' => 150,
  ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T11:35:25.030

如果您有通过 studio 添加的自定义地址字段，则 Sugarcrm 不会自动对地址字段进行分组，因为字段名称以`_c`. 这是一个报告的错误：[https ://web.sugarcrm.com/support/issues/cbb00e33-351b-5448-2e5f-4eaf7551f347](https://web.sugarcrm.com/support/issues/cbb00e33-351b-5448-2e5f-4eaf7551f347)

这里有一篇博客文章解释了如何解决它：

[http://www.profilingsolutions.com/archive/custom-address-fields/](http://www.profilingsolutions.com/archive/custom-address-fields/)

（基本上 -`_c`从数据库中创建的地址字段中删除后缀并修复 vardefs）。

# ruby - 使用 RVM 和 Bundler 引用本地 gem？

> ID：11695602
> 
> 赞同：0
> 
> 时间：2012-07-27T21:02:45.170
> 
> 标签：ruby, git, rvm, bundler

我想在构建应用程序的同时使用支持库，同时使用 RVM 和 Bundler 来管理我的应用程序环境。

在我的 Gemfile 中是

```
# forked and cloned to local directory
gem 'feedzirra', :path => '../../feedzirra' 
```

然后在命令行上：

```
$ bundle install
..
Using feedzirra (0.2.0.rc2) from source at /Users/ryan/dev/feedzirra 
..
$ bundle show feedzirra
/Users/ryan/dev/feedzirra
$ gem which feedzirra
ERROR:  Can't find ruby library file or shared library feedzirra 
```

irb：

```
1.9.3p194 :001 > require 'feedzirra'
LoadError: cannot load such file -- feedzirra
    from /Users/ryan/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/ryan/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):1
    from /Users/ryan/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:27:46.260

您需要在捆绑器的上下文中运行它：

```
bundle exec gem which feedzirra 
```

或者

```
bundle exec irb 
```

# c++ - make_pair 类似于不可复制类的技巧

> ID：11695606
> 
> 赞同：1
> 
> 时间：2012-07-27T21:02:57.360
> 
> 标签：c++, std-pair, noncopyable

make_pair 可以在不提及类型的情况下创建对。我想对我的类使用相同的技巧，但它继承自 boost::noncopyable，因此无法编译：

```
template<class Iter>
struct bit_writer : boost:noncopyable
{
    Iter iter;
    bit_writer(Iter iter)
    : iter(iter)
    {}
};

template<class Iter>
bit_writer<Iter> make_bit_writer(Iter iter)
{
    return bit_writer<Iter>(iter);
}
vector<char> vec;
auto w = make_bit_writer(vec); 
```

有什么选择吗？我试着让 make_bit_writer 成为朋友，然后没有想法了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:19:09.263

如果您有 C++11，则可以使用以下方法执行此操作：

```
#include <functional>
#include <utility>
#include <type_traits>

struct noncopyable_but_still_moveable {
  noncopyable_but_still_moveable(const noncopyable_but_still_moveable&) = delete;
  noncopyable_but_still_moveable(noncopyable_but_still_moveable&&) = default;
  noncopyable_but_still_moveable() = default;
  noncopyable_but_still_moveable& operator=(const noncopyable_but_still_moveable&) = default;
  noncopyable_but_still_moveable& operator=(noncopyable_but_still_moveable&&) = default;
};

template <typename T>
struct test : noncopyable_but_still_moveable {
  test(T) {}
  // the rest is irrelevant 
};

template <typename T>
test<T> make_test(T&& val) {
  return test<typename std::remove_reference<T>::type>(std::forward<T>(val));
}

int main() {
  auto && w = make_test(0);
} 
```

请注意，我已替换`boost::noncopyable`为具有已删除复制构造函数的类型。这是使某些东西不可复制的 C++11 方法，并且是必需的，因为 boost 类也是不可移动的。当然，您可以将其放在类本身中，不再继承。

如果没有 C++11，您将需要使用[Boost move](http://www.boost.org/doc/libs/1_50_0/doc/html/move.html)之类的东西来模拟这些语义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:50:06.903

您将需要 C++11 并更新您的类以获取移动语义。对于所提出的问题，没有其他解决方案。

```
class test {
public:
    test(test&&);
    // stuff
};
test make_test(...) {
    return test(...);
}
int main() {
    // Both valid:
    auto p = make_test(...);
    auto&& p2 = make_test(...);
} 
```

# javascript - 在没有淡入淡出的ajax调用期间禁用输入

> ID：11695607
> 
> 赞同：0
> 
> 时间：2012-07-27T21:02:58.557
> 
> 标签：javascript, jquery, ajax

我有很多在单击时调用 Ajax 的输入。每个都作为一个 JavaScript 函数分配。执行 Ajax 时需要禁用这些输入。这是我到目前为止所拥有的：

```
 $("html").bind("ajaxStart", function(){
    $("input").attr("disabled", "disabled");
     $(this).addClass('busy');
  }).bind("ajaxStop", function(){
     $(this).removeClass('busy');
     $("input").removeAttr("disabled");
  }); 
```

唯一的问题是输入变为灰色。我怎样才能在没有太多麻烦的情况下避免这种情况？

我也尝试了 readonly 属性，但由于某种原因它不起作用。至少在 Chrome 中，这仍然会使按钮变灰，并且仍然允许您单击单选和复选框。

```
 $("html").bind("ajaxStart", function(){
    $("input").attr("readonly", true);
     $(this).addClass('busy');
  }).bind("ajaxStop", function(){
     $(this).removeClass('busy');
     $("input").removeAttr("readonly");
  }); 
```

**编辑：**看起来这可能单独使用 CSS 是不可能的，所以我可能需要使用 JavaScript。此技术适用于复选框。不过，单选按钮可能需要更多工作：

[http://jsfiddle.net/q3c2Y/1/](http://jsfiddle.net/q3c2Y/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:49:18.833

将`disabled`属性值设置为`true`

```
$("input").attr("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:05:12.900

而不是`disabled`你可以使用`readonly`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:05:37.447

您可以尝试“只读”属性。

# c# - 排除后代包含值的元素的 LINQ to XML 示例

> ID：11695608
> 
> 赞同：0
> 
> 时间：2012-07-27T21:02:59.943
> 
> 标签：c#, linq, linq-to-xml

我是 LINQ to XML 的新手，想知道是否有人可以帮助我构建以下查询。

我想返回所有`<response>`不包含`<status>`包含“404”的后代元素的元素。

我的 XML 如下所示。在这种情况下，只`<response>`应返回第一个元素（和后代）。

```
<multistatus xmlns="DAV:">
  <response>
    <href>/principals/users/test/</href>
    <propstat>
      <prop>
        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav">
          <href xmlns="DAV:">/calendars/__uids__/d817aaec-7d24-5b38-bc2f-6369da72cdd9</href>
        </calendar-home-set>
      </prop>
      <status>HTTP/1.1 200 OK</status>
    </propstat>
  </response>
  <response>
    <href>/principals/users/test/calendar-proxy-write/</href>
    <propstat>
      <prop>
        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav" />
      </prop>
      <status>HTTP/1.1 404 Not Found</status>
    </propstat>
  </response>
  <response>
    <href>/principals/users/test/calendar-proxy-read/</href>
    <propstat>
      <prop>
        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav" />
      </prop>
      <status>HTTP/1.1 404 Not Found</status>
    </propstat>
  </response>
</multistatus> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:29:20.607

假设您的 XML 存储在字符串变量中`xml`：

```
XDocument document = XDocument.Parse(xml);
XNamespace ns = document.Root.GetDefaultNamespace();

var responsesExcept404s = document
    .Descendants(ns + "response")
    .Where(x => !x.Descendants(ns + "status")
                  .Single()
                  .Value.Contains("404")); 
```

注意`ns`变量的使用 - 因为您的 XML 通过`xmlns`属性设置了默认命名空间，所以在使用 LINQ to XML 时（例如在`Descendants()`方法中）有必要指定该命名空间。

然后，您可以简单地迭代结果，并使其超级有用，将它们输出到控制台：

```
responsesExcept404s.ToList().ForEach(Console.WriteLine); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:49:57.157

```
XDocument xDoc = XDocument.Parse(xml);
XNamespace ns = XNamespace.Get("DAV:");
var responses = xDoc.Descendants(ns + "status")
                    .Where(s => !s.Value.Contains(" 404 "))
                    .Select(s => s.Parent.Parent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:43:09.360

来吧：（用 XPath 作弊）

```
 XDocument xdoc = XDocument.Load(new FileStream("XMLFile2.xml", FileMode.Open, FileAccess.Read));
        XPathNavigator nav = xdoc.CreateNavigator();
        var nsm = new XmlNamespaceManager(nav.NameTable);            
        nsm.AddNamespace("s", "DAV:");
        var nodes = xdoc.XPathSelectElements("s:multistatus/s:response[.//*[name(.)='status' and .='HTTP/1.1 404 Not Found']]", nsm); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T21:10:17.213

尝试这个：

```
Document doc = XDocument.Load(path);
       XNamespace nsd = doc.Root.GetDefaultNamespace();
        var res = doc.Descendants(nsd +"response");                

        var filteredEle = new List<XElement>();

                    foreach (var ele in res)
                    {
                        if (CheckEle(ele,nsd))
                        {
                            filteredEle.Add(ele);
                        }
                    }    

    private bool CheckEle(XElement ele, XNamespace nsd)
        {
            return ele.Element(nsd + "propstat").Element(nsd + "status").Value != "HTTP/1.1 404 Not Found";
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:42:04.263

您可以使用如下所示的 linq 语句

```
XDocument doc = XDocument.Parse(xml);
List<XElement> responseWithOut404 = 
    (from element in doc.Descendants("response")
     let xElement = element.Descendants("status").First() 
     where !xElement.Value.Contains("404")
     select element)
     .ToList(); 
```

# php - 如何向 Wordpress 模板文件添加结束短代码？

> ID：11695610
> 
> 赞同：4
> 
> 时间：2012-07-27T21:03:20.307
> 
> 标签：php, wordpress, templates, shortcode

好的，因此您可以将短代码添加到 WP 模板文件中，例如：

```
<?php echo do_shortcode('[my_awesome_shortcode]'); ?> 
```

但是，如果短代码旨在环绕这样的内容怎么办：

```
[my_awesome_shortcode]
Hey, this is the content within the awesome shortcode.
[/my_awesome_shortcode] 
```

我有点不确定如何将其放入模板文件中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-26T09:50:53.903

对我有用的解决方案是将短代码组合成一个字符串，所以

```
<?php echo do_shortcode('[my_awesome_shortcode]<h1>Hello world</h1>[/my_awesome_shortcode]'); ?> 
```

将工作！

如果您要执行一长串短代码命令，请像这样为它们创建一个单独的字符串

```
$shortcodes = '[row]';
    $shortcodes .= '[column width="2/3"]';
        $shortcodes .= 'Content';
    $shortcodes .= '[/column]';
    $shortcodes .= '[column width="1/3"]';
        $shortcodes .= 'More Content';
    $shortcodes .= '[/column]';
$shortcodes .= '[/row]'; 
```

然后像这样执行整个事情

```
<?php echo do_shortcode($shortcodes); ?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T21:11:55.623

根据[http://codex.wordpress.org/Shortcode_API#Enclosure_vs_self-closing_shortcodes](http://codex.wordpress.org/Shortcode_API#Enclosing_vs_self-closing_shortcodes)

添加`$content = null`到快捷功能应该可以解决问题：

```
function my_awesome_shortcode_func( $atts, $content = null ) {
   return '<awesomeness>' . $content . '</awesomeness>';
}

add_shortcode( 'my_awesome_shortcode', 'my_awesome_shortcode_func' ); 
```

以便：

```
[my_awesome_shortcode]
Hey, this is the content within the awesome shortcode.
[/my_awesome_shortcode] 
```

会导致：

```
<awesomeness>Hey, this is the content within the awesome shortcode.</awesomeness> 
```

# html - 是否可以以与图像相同的方式将文本包裹在像 div 这样的块元素周围

> ID：11695612
> 
> 赞同：0
> 
> 时间：2012-07-27T21:03:27.607
> 
> 标签：html, css

我知道对于图像，我可以应用 hspace、vspace 和/或对齐以使其移动到一侧或另一侧，文本在其周围流动，但我想知道是否可以对像 div 这样的元素做类似的事情？如果可能，如何做到这一点并遵守标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:21:44.357

试试这个它工作[http://jsfiddle.net/q5swZ/1/](http://jsfiddle.net/q5swZ/1/)

```
<div style="width:100px; height:100px; border:solid 1px red;
float:left; margin:0 10px">
</div>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer 
quis lorem dui. Aliquam ut arcu eros. Etiam viverra rhoncus     
laoreet. Ut vel quam neque, sed rutrum mauris. Lorem ipsum dolor 
sit amet, consectetur adipiscing elit. Nulla orci est, tincidunt 
id pulvinar eget, ultrices non purus. Nullam tempor posuere sem, 
quis porttitor neque eleifend quis.

<div style="clear:both"></div>
<br />

<div style="width:100px; height:100px; border:solid 1px red;
float:left; margin:0 10px">
</div>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer 
quis lorem dui. Aliquam ut arcu eros. Etiam viverra rhoncus 
laoreet. Ut vel quam neque, sed rutrum mauris. Lorem ipsum dolor 
sit amet, consectetur adipiscing elit. Nulla orci est, tincidunt 
id pulvinar eget, ultrices non purus. Nullam tempor posuere sem, 
quis porttitor neque eleifend quis. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:08:37.197

简单的 css 浮动属性可以做到，或者我错过了什么

# django - [权限被拒绝：使用 django 和 mod_wsgi 上传文件期间亚马逊实例上的“/用户”

> ID：11695615
> 
> 赞同：0
> 
> 时间：2012-07-27T21:03:34.677
> 
> 标签：django, ubuntu, file-upload, amazon-ec2, mod-wsgi

尝试通过 mod_wsgi 在运行 django 1.4 的 ubuntu amazon 实例上上传文件时出现错误

```
Exception Value:  [Errno 13] Permission denied: '/Users'
Exception Location: /usr/lib/python2.7/os.py in makedirs, line 157
Python Executable:  /usr/bin/python
Python Version: 2.7.3 
```

我希望有人能解释是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:09:58.887

我找到了我的 django 设置文件中路径错误的错误的解决方案

# javascript - 将数据附加到元素有效，但我无法检索它

> ID：11695617
> 
> 赞同：0
> 
> 时间：2012-07-27T21:03:41.260
> 
> 标签：javascript, jquery, object

设置预加载选项时，我将响应数据附加到 jquery 插件的目标。除了我设置的数据无法访问之外，这一切似乎都很有吸引力。当我登录时`$(elm).data();`，我可以看到返回的对象带有适当的数据集到适当的键。但是当我尝试时，`console.log($(elm).data('key'));`我变得不确定。当我尝试时，我也不确定`var elmData = $(elm).data(); console.dir(elmData.key);`。所以我将对象记录在一行上，在控制台中看到它，尝试访问我刚刚确认存在的属性并获取`undefined`.

这是我的功能：

```
this.preloadData = function(folders)
{
    var getString;
    for(var folder in folders ){
       getString = 'folder='+folders[folder]+'&uri='+uri+'&thumbSide='+options.thumbSide;
       $.get(options.handler, getString,
          function(response, serverStat, xhr)
          {
            $self.data(folder, response);   
          });
     }//for
     var $selfData = $self.data();
     console.log($selfData);//Object{ editorial : "data", testingdata : 'some meaningless words'}
     console.log($self.data());//Object{ editorial : "data", testingdata : 'some meaningless words'}
     console.log($self.data.editorial);//undefined
     console.dir($self.data('editorial'));//undefined
     console.log($selfData['editorial']);//undefined
     console.log($selfData.editorial);//undefined

     $self.data('testingdata', 'some meaningless words');
     console.log($self.data());//Object{ editorial : "data", testingdata : 'some meaningless words'}
     console.log($self.data('testingdata'));//'some meaningless words'
} 
```

我知道命名空间太简单了，我只是试图尽可能多地删除因素来尝试理解为什么这不起作用。我正在用 chrome 开发，但我也在 Firefox 中尝试过它并得到相同的结果。

- - - - - - - - - - - - - - -编辑 - - - - - - - - - - ----------------------

我明白现在的问题是什么。控制台会反映对对象所做的所有更改，无论它们是否是在记录对象时进行的。因此，当我记录该对象时，该属性还不存在，因为响应尚未从服务器返回，但日志仍然显示该属性存在，因为在脚本执行的某个稍后时间点它确实存在。因为原始值的记录方式不同，所以记录属性的调用显示为`undefined`因为它是未定义的。如果我在几秒钟后引用该属性，例如在单击事件上定义它（这就是我打算让它工作的方式）。在我真正实现它之前，我才真正开始调试这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:09:33.713

你能做这个吗？

`$self.data['editorial']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:09:33.963

尝试

```
console.log($self.data.editorial); 
```

# javascript - 处理 Javascript 中的浮点精度

> ID：11695618
> 
> 赞同：116
> 
> 时间：2012-07-27T21:03:42.307
> 
> 标签：javascript, floating-point, double, floating-accuracy, numerical-methods

`y`我在 javascript 中有大量的数值。我想通过将它们四舍五入到最接近的倍数来对它们进行分组并将`x`结果转换为字符串。

如何绕过烦人的浮点精度？

例如：

```
0.2 + 0.4 = 0.6000000000000001 
```

我尝试过的两件事：

```
>>> y = 1.23456789 
>>> x = 0.2 
>>> parseInt(Math.round(Math.floor(y/x))) * x; 
1.2000000000000002 
```

和：

```
>>> y = 1.23456789 
>>> x = 0.2 
>>> y - (y % x)
1.2000000000000002 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-07-27T21:14:15.550

来自这篇文章：[如何处理 JavaScript 中的浮点数精度？](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

你有几个选择：

*   对小数使用特殊的数据类型，例如[decimal.js](https://github.com/MikeMcl/decimal.js/)
*   将结果格式化为一些固定数量的有效数字，如下所示： `(Math.floor(y/x) * x).toFixed(2)`
*   将所有数字转换为整数

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T21:15:47.313

~~你可以做这样的事情~~：

```
> +(Math.floor(y/x)*x).toFixed(15);
1.2 
```

编辑：*使用 big.js 会更好。*

# [大.js](https://mikemcl.github.io/big.js/)

> 一个小型、快速、易于使用的任意精度十进制算术库。

```
>> bigX = new Big(x)
>> bigY = new Big(y)
>> bigY.div(bigX).round().times(bigX).toNumber() // => 1.2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-19T14:07:47.880

```
> var x = 0.1
> var y = 0.2
> var cf = 10
> x * y
0.020000000000000004
> (x * cf) * (y * cf) / (cf * cf)
0.02 
```

快速解决方案：

```
var _cf = (function() {
  function _shift(x) {
    var parts = x.toString().split('.');
    return (parts.length < 2) ? 1 : Math.pow(10, parts[1].length);
  }
  return function() { 
    return Array.prototype.reduce.call(arguments, function (prev, next) { return prev === undefined || next === undefined ? undefined : Math.max(prev, _shift (next)); }, -Infinity);
  };
})();

Math.a = function () {
  var f = _cf.apply(null, arguments); if(f === undefined) return undefined;
  function cb(x, y, i, o) { return x + f * y; }
  return Array.prototype.reduce.call(arguments, cb, 0) / f;
};

Math.s = function (l,r) { var f = _cf(l,r); return (l * f - r * f) / f; };

Math.m = function () {
  var f = _cf.apply(null, arguments);
  function cb(x, y, i, o) { return (x*f) * (y*f) / (f * f); }
  return Array.prototype.reduce.call(arguments, cb, 1);
};

Math.d = function (l,r) { var f = _cf(l,r); return (l * f) / (r * f); };

> Math.m(0.1, 0.2)
0.02 
```

[您可以在此处](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)查看完整说明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T15:01:55.340

看看这个链接。它对我帮助很大。

[http://www.w3schools.com/jsref/jsref_toprecision.asp](http://www.w3schools.com/jsref/jsref_toprecision.asp)

该`toPrecision(no_of_digits_required)`函数返回 a`string`所以不要忘记使用该`parseFloat()`函数转换为所需精度的小数点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:14:16.650

处理这个任务，我首先找到 中的小数位数`x`，然后相应地四舍五入`y`。我会使用：

```
y.toFixed(x.toString().split(".")[1].length); 
```

它应该转换`x`为字符串，将其拆分为小数点，找到正确部分的长度，然后根据该长度进行`y.toFixed(length)`舍入。`y`

# ruby-on-rails - 依赖于 __method__ 的重构方法

> ID：11695620
> 
> 赞同：0
> 
> 时间：2012-07-27T21:03:58.890
> 
> 标签：ruby-on-rails, ruby, methods, refactoring

因此，我迈出了将 Presenters 用于我的 Rails 应用程序的第一步，我只是在重构我的一些代码。我有几个字段可以很好地显示电话号码（即电话、手机和传真）或显示“未给出”。显然，我最初在视图中有这个，但将逻辑移到了我的演示者中。到了那里，我注意到它都是一样的，所以将它重构为一个使用方法名称和发送函数的私有方法：

```
class CustomerPresenter < BasePresenter
  presents :customer

  def phone
    format_number(__method__)
  end

  def cell
    format_number(__method__)
  end

  def fax
    format_number(__method__)
  end

private

  def format_number(method)
    hande_none customer.send(method) do
      h.number_to_phone(customer.send(method), :area_code => true)
    end
  end
end 
```

然而这段代码仍然看起来并不干燥。因为 format_number 使用方法名称，所以我似乎必须定义三个单独的方法。我很好奇这里是否还有更多我可以做的事情。

ps hande_none 如果那里有东西，则简单地返回块或返回“没有给定”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:12:35.767

我通常避免将实际的 getter/method/attributes 名称与用于格式化它们的方法混合。

这就是我使用`*_formatted`后缀的原因：使用一般后缀，您可以有一个简单的后缀，`method_missing`它会引导您：

```
class CustomerPresenter < BasePresenter
  presents :customer

  private

  def format_number(method)
    hande_none customer.send(method) do
      h.number_to_phone(customer.send(method), :area_code => true)
    end
  end

  def method_missing(method_name, *args, &block)
    case method_name
    when /(.*)_formatted$/
      #here you could create the method on the fly to avoid method missing next time
      return format_number( $1 )
    end    
    super(method_name, *args, &block)
  end
end 
```

基本上，我的 BasePresenter 中有这个`*_currency_format`

# c++ - 计算机视觉问题的开源 CRF 实现？

> ID：11695623
> 
> 赞同：0
> 
> 时间：2012-07-27T21:04:23.107
> 
> 标签：c++, opencv, open-source, machine-learning, computer-vision

C++中条件随机字段（CRFs）的开源实现有好几种，比如CRF++、FlexCRF等。但是从手册上，我只能理解如何将它们用于文本标注等一维问题，不清楚如何将它们应用于二维视觉问题，假设我已经计算了每个节点的关联势和每个边缘的交互势。

是否有人将这些软件包用于解决视觉问题，例如分割？或者它们根本不能以这种方式使用？

总而言之，是否有任何针对视力问题的 CRF 开源包？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:25:33.897

最新版本的 dlib 支持在任意图结构（包括二维网格）上学习成对马尔可夫随机场模型。它以最大边距意义（即使用结构 SVM）而不是最大似然意义（即 CRF）来估计参数，但如果您只想预测图形标记，那么任何一种方法都一样好。

有一个[示例程序](http://dlib.net/graph_labeling_ex.cpp.html)显示了如何在一个简单的示例图上使用这些东西。该示例将特征向量放在每个节点上，结构化 SVM 使用它们来学习如何正确标记图中的节点。请注意，您可以通过修改文件顶部的 typedef 来更改特征向量的维度。此外，如果您已经有一个完整的模型并且只想找到最可能的标签，那么您可以直接调用底层[基于 min-cut 的推理例程](http://dlib.net/optimization.html#find_max_factor_graph_potts)。

一般来说，我会说解决这些问题的最佳方法是定义您要使用的图形模型，然后选择一种适用于它的参数学习方法。所以在这种情况下，我想你对某种成对的马尔可夫随机场模型感兴趣。特别是，可以使用最小切/最大流算法找到最可能分配的模型。然后在这种情况下，结果证明结构 SVM 是查找模型参数的一种自然方法，因为结构 SVM 只需要找到最大概率分配的能力。通过最大似然找到参数（即，将其视为 CRF）将需要您另外有一些方法来计算图形变量的总和，但这对于这些类型的模型来说非常困难。对于这种模型，我所知道的所有 CRF 方法都是近似值，而 dlib 中的 SVM 方法使用精确求解器。我的意思是，该算法的参数之一是一个 epsilon 值，它表示“运行直到找到在 epsilon 精度范围内的最佳参数”，并且该算法每次都可以有效地执行此操作。

在今年的计算机视觉和模式识别大会上有一个关于这个主题的很好的[教程。](http://www.nowozin.net/sebastian/cvpr2012tutorial/)[演讲者还写了一本关于计算机视觉中的结构化预测和学习的](http://www.nowozin.net/sebastian/papers/nowozin2011structured-tutorial.pdf)好书。

# c# - 使用 REST 公开 WCF 回调

> ID：11695626
> 
> 赞同：0
> 
> 时间：2012-07-27T21:04:45.953
> 
> 标签：c#, vb.net, wcf, web-services

所以我有一个客户端应用程序和一个 WCF 服务发布到 IIS 服务器。我成功地让客户端订阅 WCF 服务，然后在任何一个客户端上单击一个按钮后向客户端应用程序的每个实例推送一条消息。现在我的目标是从 WCF 应用程序中推送消息，但通过 Web 浏览器中的 REST，然后允许我在 Android 中使用此接口并在 Android 客户端和 Windows 客户端应用程序之间进行交互。有人知道我需要做什么吗？这是我工作的界面的基础知识。

IService.vb：

```
 <ServiceContract(SessionMode:=SessionMode.Required, CallbackContract:=GetType(IServiceCallback))>
Public Interface IService
    <OperationContract(IsOneWay:=True)>
    Sub GetClientCount()

    <OperationContract(IsOneWay:=True)>
    Sub RegisterClient(ByVal id As Guid)

    <OperationContract(IsOneWay:=True)>
    Sub UnRegisterClient(ByVal id As Guid)
End Interface

Public Interface IServiceCallback
    <OperationContract(IsOneWay:=True)>
    Sub SendCount(ByVal count As Int32)
End Interface 
```

服务.svc.vb

```
<ServiceBehavior(InstanceContextMode:=InstanceContextMode.Single, ConcurrencyMode:=ConcurrencyMode.Multiple)>
Public Class Service
    Implements IService, IRestService
    Private clients As New Dictionary(Of Client, IServiceCallback)()
    Private locker As New Object()

    Public ReadOnly Property Callback As IServiceCallback
        Get
            Return OperationContext.Current.GetCallbackChannel(Of IServiceCallback)()
        End Get
    End Property

    'called by clients to get count
    Public Sub GetClientCount() Implements IService.GetClientCount
        Dim query = ( _
        From c In clients _
        Select c.Value).ToList()

        Dim action As Action(Of IServiceCallback) = Function(Callback) GetCount(Callback)

        query.ForEach(action)
    End Sub

    Private Function GetCount(ByVal callback As IServiceCallback) As Int32
        callback.SendCount(clients.Count)
        Return Nothing
    End Function

    '---add a newly connected client to the dictionary---
    Public Sub RegisterClient(ByVal guid As Guid) Implements IService.RegisterClient
        '---prevent multiple clients adding at the same time---
        SyncLock locker
            clients.Add(New Client With {.id = guid}, Callback)
        End SyncLock
    End Sub

    '---unregister a client by removing its GUID from 
    ' dictionary---
    Public Sub UnRegisterClient(ByVal guid As Guid) Implements IService.UnRegisterClient
        Dim query = From c In clients.Keys _
                    Where c.id = guid _
                    Select c
        clients.Remove(query.First())
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:00:28.403

通常，在 HTTP 中基于推送的实现非常困难。用于实现这一点的常用技术是**反向 Ajax**、**Web 套接字**或**长轮询**（有些甚至使用单像素 flex 对象来保持套接字永久打开）。查看此[Code Project Article](http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with)，它使用 Reverse Ajax aka Commet 来实现能够推送通知的 wcf 休息服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T16:48:40.250

您需要将消息从 Android 设备发送到 wcf 服务，然后 wcf 服务会将消息转发给已注册的 windows 客户端。

# c# - 支持删除指定项目的并发集合？

> ID：11695627
> 
> 赞同：32
> 
> 时间：2012-07-27T21:04:45.953
> 
> 标签：c#, concurrent-collections

很简单：除了 ConcurrentDictionary （如果我必须使用它，但它不是真正正确的概念）之外，是否有任何 Concurrent 集合（IProducerConsumer 实现）支持基于项目或谓词的简单相等来删除特定项目定义移除条件？

说明：我有一个多线程、多阶段的工作流算法，它从数据库中提取对象并将它们放在“开始”队列中。从那里他们被下一阶段抓住，进一步处理，并塞进其他队列。这个过程会持续几个阶段。同时，第一阶段由其主管再次调用并将对象从数据库中拉出，这些对象可能包括仍在处理中的对象（因为它们尚未完成处理，因此尚未使用标志集重新持久化）他们完成了）。

我正在设计的解决方案是“工作中”的大师系列；对象在第一阶段检索以进行处理时进入该队列，并在工作流的任何阶段完成必要处理后将它们重新保存到数据库作为“已处理”后将其删除。当对象在该列表中时，如果它被第一阶段重新检索，它将被忽略。

我曾计划使用 ConcurrentBag，但唯一的删除方法 (TryTake) 从包中删除任意项目，而不是指定的项目（并且 ConcurrentBag在 .NET 4 中很*慢）。*ConcurrentQueue 和 ConcurrentStack 也不允许删除它会给你的下一个项目以外的项目，留下 ConcurrentDictionary，它可以工作但超出我的需要（我真正需要的是存储正在处理的记录的 Id；它们在工作流程中不会改变）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-27T21:21:33.460

之所以没有这样的数据结构，是因为所有集合的查找操作时间为`O(n)`. 这些是`IndexOf`，`Remove(element)`等等。它们都枚举所有元素并检查它们是否相等。

只有哈希表的查找时间为 O(1)。在并发场景中，O(n) 查找时间会导致集合的锁定时间很长。在此期间，其他线程将无法添加元素。

在字典中，只有被哈希命中的单元格才会被锁定。当一个线程通过哈希单元中的元素检查相等性时，其他线程可以继续添加。

我的建议是继续使用 ConcurrentDictionary。

* * *

顺便说一句，您是对的，ConcurrentDictionary 对于您的解决方案来说有点过大。您真正需要的是快速检查对象是否在工作的天气。A`HashSet`将是一个完美的选择。那么它基本上什么都不做`Add(element)`，，，`Contains(element)`。`Remove(element)`java中有一个`ConcurrentHeshSet`实现。对于 c#，我发现了这个：[How to implement ConcurrentHashSet in .Net](https://stackoverflow.com/questions/4306936/how-to-implement-concurrenthashset-in-net) don't know how good it is。

作为第一步，我仍然会编写一个带有`HashSet`接口的包装器，`ConcurrentDictionary`将其启动并运行，然后尝试不同的实现并查看性能差异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-24T20:47:54.383

正如其他帖子已经解释的那样，默认情况下不可能从`Queue`或删除项目`ConcurrentQueue`，但实际上最简单的解决方法是扩展或包装项目。

```
public class QueueItem
{
    public Boolean IsRemoved { get; private set; }
    public void Remove() { IsRemoved = true; }
} 
```

出队时：

```
QueueItem item = _Queue.Dequeue(); // Or TryDequeue if you use a concurrent dictionary
if (!item.IsRemoved)
{
    // Do work here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:20:34.913

在一般意义上使集合线程安全*确实*很难。线程安全有很多因素超出了库/框架类的责任或权限范围，这些因素会影响它真正“线程安全”的能力......正如你所指出的那样的缺点之一出来的是性能。编写一个也是线程安全的高性能集合是不可能的，因为它必须假设最坏的情况......

通常推荐的做法是使用您想要的任何集合并以线程安全的方式访问它。这基本上就是为什么框架中没有更多线程安全集合的原因。有关这方面的更多信息，请访问[http://blogs.msdn.com/b/bclteam/archive/2005/03/15/396399.aspx#9534371](http://blogs.msdn.com/b/bclteam/archive/2005/03/15/396399.aspx#9534371)

# github - Github：在新存储库中使用多个分叉/克隆（长）

> ID：11695630
> 
> 赞同：3
> 
> 时间：2012-07-27T21:04:56.113
> 
> 标签：github

我显然是 GitHub 的新手，并且想确保在我开始之前做正确的事情。

我想创建一个使用来自 2 个现有项目的分叉/克隆的新存储库。现有的项目不是我的。

因此，假设我要使用的回购被称为来自开发人员“Da”的回购 A 和来自开发商“Db”的回购 B

我会 fork Repo A，然后克隆它 我会 fork Repo B，然后克隆它

这是它变得模糊的地方 - 我现在想将 2 合并到一个新的 Repo (C) 中。

这就是我迷路的地方 - 不仅仅是关于如何做到这一点，而是更多关于我将什么推回分叉回购？我假设回购 A 不想要回购 C 的东西？或者是吗？

另外，您如何将许可信息和“信用”放在 Repo 'C' 中的原始开发人员？

任何帮助表示赞赏。我尝试搜索它，但找不到明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:18:35.817

更简洁的方法是，将每个 repo 分开，同时允许你记录`A`和`B`一起记录，将声明一个父 repo ( `C`)，使用`A`和`B`作为**[submodules](http://git-scm.com/book/ch6-6.html)**。

不过，这只会简单地将`A`和`B`作为 的子目录`C`，但实际上不会将它们的代码库合并在一起。

```
C   => remote: your own C on GitHub
|
--A => remote: forkA on GitHub
|
--B => remote: forkB on GitHub 
```

正如我在“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”中解释的那样，您仍然可以直接在`A`和`B`子模块中进行更改，同时将新的组合状态记录在`C`.

# c++ - OOP C++、虚函数和新运算符

> ID：11695631
> 
> 赞同：1
> 
> 时间：2012-07-27T21:05:01.173
> 
> 标签：c++, oop, pointers, virtual-functions

我必须在下面编写代码的定义。我不了解 OOP Cpp 的一些基础知识，我知道什么是 `*x`or `&x`，但这还不够……主要的事实是我无法理解行，`B* p = new D, m, *k;`我无法理解`m`和`*k`代表什么。

```
class B {
  public: 
    virtual void msg() { cout << "classB"; }
};

class D: public B {
   public: 
     virtual void msg() { cout << "classD"; }
};

int main() {
  B* p = new D, m, *k;
  p->msg(); k = &m; k->msg();
  . . .
} 
```

帮助，如果你能解释一下这段代码是如何工作的（以及**为什么会这样）。**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:08:45.953

它一次声明多个变量。这与以下内容基本相同：

```
B *p = new D;
B  m;
B *k; 
```

指向用 new 分配`p`的实例的指针也是如此。是类的一个本地实例，是一个指向它的指针，稍后分配给指向.`D``m``B``k``B``m`

该`msg`函数通过指针`p`和对两个分配的对象调用`k`。

请注意，这`*`分别适用于每个变量声明。所以`B* a, b;`不声明两个指针，而是声明一个指针和一个本地对象。这就是很多人喜欢`*`在变量名前直接写上的原因：`B *a, b`这样会更明显一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T21:09:25.550

在 C++ 中，您可以在一个语句中声明多个变量。因此`B* p = new D, m, *k;`声明变量`p`,`m`和`k`. `*`for 指针声明绑定到变量名，因此它基本上等同于

```
B* p = new D;
B m;
B* k; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:09:57.547

没什么特别的，它只是普通的旧 C。

```
B* p = new D, m, *k; 
```

只是捷径：

```
B* p = new D;
B m;
B* k; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T21:13:08.820

`p`是指向 B 类（或 D，因为它是 B 类的子对象）的对象的指针。`p->msg();`类似于`(*p).msg();`。`m`是 B 类的对象，所以我们可以通过操作符获取指向它的指针`&`并将其存储在`k`其中（这是指向 B 类对象的指针）。

和

```
B* p = new D, m, *k; 
```

只是

```
B* p = new D;
B m;
B* k; 
```

*`*`注意：如果每次都需要，你应该放*

# php - 使用 PHP 运行多个 Mysql 查询

> ID：11695637
> 
> 赞同：1
> 
> 时间：2012-07-27T21:05:41.930
> 
> 标签：php, mysql

我需要使用 PHP 运行多个 Mysql 查询。我有一个站点并从数据库中提取所有信息

```
$sql = "SELECT * FROM $table WHERE ID=$escape";
$query = mysql_query($sql) or die(mysql_error());
$rentals = mysql_fetch_assoc($query); 
```

现在我还有另外两个查询，我还需要为上一个和下一个按钮运行

```
$sqlPrev = 'SELECT `id` FROM `table`
        WHERE `id` < '$curId' AND `catId` = '$curCat'
        ORDER BY `id` DESC LIMIT 1;

$sqlNext = 'SELECT `id` FROM `table`
        WHERE `id` > '$curId' AND `catId` = '$curCat'
        ORDER BY `id` ASC LIMIT 1; 
```

当我在 PHP MyAdmin 中运行这些代码时，我的编码是正确的，但是当我尝试通过网站执行它们时，我得到一个 mysql 错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:09:46.407

问题是 $sqlPrev 和 $sqlNext 的 " 而不是 '。{$curID} 仅适用于 ""。并且没有结束 " 或 '。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:12:03.043

[`mysql_query`](http://php.net/mysql_query)一次只能执行一个查询。

基本上你只需要 3 次调用`mysql_query`.

```
$sql = "SELECT * FROM $table WHERE ID=$escape";
$query = mysql_query($sql) or die(mysql_error());
$rentals = mysql_fetch_assoc($query);

$sqlPrev = 'SELECT `id` FROM `table`
        WHERE `id` < ' . $curId . ' AND `catId` = ' . $curCat . '
        ORDER BY `id` DESC LIMIT 1';

$sqlNext = 'SELECT `id` FROM `table`
        WHERE `id` > ' . $curId . ' AND `catId` = ' . $curCat . '
        ORDER BY `id` ASC LIMIT 1';

$resultPrev = mysql_query($sqlPrev);
$resultNext = mysql_query($sqlNext);

// todo: check that the above queries executed successfully
// if (!$resultPrev) echo mysql_error();

if (mysql_num_rows($resultPrev)) {
    $prev = mysql_fetch_array($resultPrev);
    $prevId = $prev['id'];
} else {
    $prevId = null; // there is no previous item
}

if (mysql_num_rows($resultNext)) {
    $next = mysql_fetch_array($resultNext);
    $nextId = $next['id'];
} else {
    $nextId = null; // there is no next item
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:16:20.943

您可能需要`.`在字符串文字和变量之间添加连接运算符 ( )。（在 Perl 中是必需的；我在 PHP 中做同样的事情。）

```
$sqlPrev = 'SELECT `id` FROM `table`
    WHERE `id` < '.$curId.' AND `catId` = '.$curCat.'
    ORDER BY `id` DESC LIMIT 1'; 
```

回显正在发送到数据库的 SQL 文本。这将揭示问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T06:11:24.910

对于多个查询，您需要在调用另一个查询之前使用多查询或关闭结果。例如，如果您以面向对象的风格编写。

```
$conn = new mysqli($servername, $username, $password, $dbname);
$sql="SELECT * FROM mytable";
$result=$conn->query($sql);
echo $result->num_rows;
$sql="SELECT id FROM mytable";
$result2=$conn->query($sql);
echo $result2->num_rows; // does not work because result was not closed. 
```

为了让它工作，写这个。

```
$conn = new mysqli($servername, $username, $password, $dbname);
$sql="SELECT * FROM mytable";
$result=$conn->query($sql);
echo $result->num_rows;
$result->close();  //*********notice this new line. result 
//needs to be closed before calling another query
$sql="SELECT id FROM mytable";
$result2=$conn->query($sql);
echo $result2->num_rows; // **this does work because previous result 
// was closed. 
```

如果您需要一次执行多个查询，或者需要在完成前一个行的输出之前执行一个查询，请使用多查询。我使用多查询是因为第二个原因，在输出前一个的所有行之前获取另一个查询。这对于嵌套查询很重要，例如一个在另一个中间的查询，例如在论坛中的多个嵌套线程中，或者对于某些网页上使用的嵌套回复。

这是在另一个查询中间完成的一个查询的示例。

```
$conn = new mysqli($servername, $username, $password, $dbname);
$sql="SELECT * FROM mytable";
$conn->multi_query($sql);
$result=$conn->store_result();
$count=0;
while($row = $result->fetch_assoc()) {
   echo "$result['id'] $result['name'];
   if ($count==0) {
   // now you can do another query in the middle of this one
   $sql="SELECT id FROM mytable";
   $conn->multi_query($sql);
   $result2=$conn->store_result();
   $row2=$result2->fetch_assoc();
   echo "result of second query is: $row2['id'] $row2['name']";
   }
   $count=$count+1;
} 
```

# python - 如何告诉我的主 GUI 等待工作线程？

> ID：11695649
> 
> 赞同：1
> 
> 时间：2012-07-27T21:06:23.343
> 
> 标签：python, pyqt4, qthread, python-multithreading

我已经成功地将我的 PyQT4 GUI 中一个昂贵的例程外包给了一个工作线程 QThread，以防止 GUI 无响应。但是，我希望 GUI 等到工作线程完成处理才能继续执行自己的代码。

我立即想到的解决方案是让线程在完成时发出一个信号（据我所知，QThreads 已经这样做了），然后在执行其余代码之前在主窗口中查找这个信号。这是被黑了吗？

我知道 QThread 提供了这里描述的 wait() 函数，但我不清楚它的用法。我想我想在主线程上调用它，但我不确定如何在我的应用程序中调用它......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:14:37.857

这是一个非常糟糕的计划。拆分“线程操作前”和“线程操作后”。“线程后操作”应该是由线程可以发出信号的 QueuedConnection 触发的插槽。

不要在 GUI 事件处理程序中等待！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:15:49.427

如果 GUI 线程调用了`wait()`工作线程对象上的函数，它不会从它返回，直到工作线程从其主函数返回。这不是你想要做的。

您使用信号和插槽描述的解决方案对我来说似乎很有意义。或者你可以只使用一个布尔值。

# javascript - 谷歌地图获取半径

> ID：11695652
> 
> 赞同：0
> 
> 时间：2012-07-27T21:06:36.970
> 
> 标签：javascript, google-maps

我在使用这个 google maps javascript 代码时遇到了麻烦。我想返回在谷歌地图上生成的圆的半径。Google API 提供了代码，但我不知道把它放在哪里。我到处都试过了。这是下面的代码。我做错什么了？

```
<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no">

<meta charset="utf-8">

<style type="text/css"> 
 html { height: 100% }
 body { height: 100%; margin: 0px; padding: 0px }
 #map_canvas { height: 50% }
</style> 

<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=mykey&sensor=false&libraries=drawing">
</script>

<script>
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(33.65, -84.42),
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
      mapOptions);

    var drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.MARKER,
      drawingControl: true,
      drawingControlOptions: {
        position: google.maps.ControlPosition.TOP_CENTER,
        drawingModes: [

          google.maps.drawing.OverlayType.CIRCLE
        ]
      },

      circleOptions: {
        fillColor: '#01939A',
        fillOpacity: .4,
        strokeWeight: 5,
        clickable: false,
        editable: true,
        zIndex: 1
      }
    });

    drawingManager.setMap(map);

     }

  google.maps.event.addDomListener(window, 'load', 

  initialize).addListener(drawingManager, 'circlecomplete', function(circle) 

  {

  var radius = circle.getRadius();

  });

</script>

</head>

<body>

<script type="text/javascript" >

        alert(radius);

</script>

<div id="map_canvas"></div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:18:18.133

您似乎在这里遇到了一些流程问题。尝试使用由初始化函数绑定的drawingManager 变量。

在这里： http: [//jsfiddle.net/RN3QL/](http://jsfiddle.net/RN3QL/) - 我已经将循环完成函数的绑定移动到初始化函数中，并缝合了一些较小的流程问题。

# ibm-mq - WebSphere MQ Q 程序使用

> ID：11695653
> 
> 赞同：1
> 
> 时间：2012-07-27T21:06:52.570
> 
> 标签：ibm-mq

我有一个使用以下 MQSC 命令创建的队列管理器 QM_TEST：

```
 SET AUTHREC OBJTYPE(QMGR) GROUP('mq-user') AUTHADD(INQ,DSP,CONNECT,SET,SETALL)
  SET AUTHREC PROFILE(SYSTEM.MQEXPLORER.REPLY.MODEL) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(INQ,DSP,GET)
  SET AUTHREC PROFILE(SYSTEM.ADMIN.COMMAND.QUEUE) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(INQ,DSP,PUT)
  DEFINE CHANNEL ($cname) CHLTYPE (SVRCONN) TRPTYPE (TCP) MCAUSER('tcs-mq-user') REPLACE
  SET CHLAUTH($cname) TYPE(ADDRESSMAP) ADDRESS(*) MCAUSER('tcs-mq-user')
  DEFINE QLOCAL ($dlqname) REPLACE
  SET AUTHREC PROFILE($dlqname) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(ALL)
  ALTER  QMGR DEADQ($dlqname) FORCE
  DEFINE LISTENER ($lname) TRPTYPE (TCP) CONTROL (QMGR) PORT ($port)
  START LISTENER ($lname) 
```

我有两个队列 TEST1 和 TEST2 创建使用：

```
DEFINE QLOCAL ($qname) GET(ENABLED) PUT(ENABLED) MAXDEPTH($maxdepth) REPLACE
SET AUTHREC PROFILE($qname) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(ALL) 
```

我正在尝试使用 q 程序实用程序将消息从 TEST1 复制到 TEST2：

> q -xb -mQM_TEST -iTEST1 -mQM_TEST -oTEST2 -p20

但是我收到此错误：

> Paul Clarke 的 MQSeries Q 程序 [V6.0.0 版本：2012 年 5 月 2 日] 连接...失败。对象“QM_TEST”上的 MQCONNX 返回 2035 未授权。

我正在运行 WebSphere MQ v7.1。*q* SupportPac 安装在服务器上，我正在服务器上执行 q 命令。我想不出一种方法来传递通道名称 TEST_CHANNEL 和端口号 1414，是这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:31:38.170

该程序通过共享内存而不是使用 SVRCONN 通道以绑定模式连接到 QMgr。您可以通过`ALTER QMGR AUTHOREV(ENABLED)`查看 QMgr 事件队列中生成的授权事件来验证这一点。如果您已安装[SupportPac MS0P](http://ibm.co/SupptPacMS0P)，您可以右键单击队列并选择“格式化事件消息”以以人类可读的格式查看它。无论哪种方式，您都应该看到用于连接的 ID 不是`tcs-mq-user`您用于运行 Q 程序的任何 ID。尝试：

```
q -lmqic -xc -iTEST1 -oTEST2 -p20 
```

该程序将在运行时提示您输入频道详细信息`-xc`。

Q 程序可以将队列转储到文件中，但它不是为此而设计的。[SupportPac MO03](http://ibm.co/SupptPacMO03) 的 QLoad 程序*就是*为此而设计的，它将捕获消息的所有方面，如果您获得适当的授权，还可以将它们原封不动地还原。这包括消息 ID、时间戳等。

最后，简要说明`AUTHREC`您帖子中的陈述。由于您费心为其创建低权限`MCAUSER`并为其设置权限，我推测您希望该 ID 没有管理权限。请注意，授予用户`+set`或`+setall`在 QMgr 上允许他们使用 WMQ Explorer 或使用 PCF 命令的任何其他方式管理授权记录。考虑将 QMgr 的权限限制为`+dsp +inq +connect`.

通常，应用程序无法访问 DLQ，而是访问特定于应用程序的回退队列。如果应用程序被授予对 DLQ 的访问权限，则通常只是将消息放在那里，而不是将它们取回。这是因为 DLQ 是系统范围的资源，如果共享 QMgr，来自多个应用程序的消息可能会落在 DLQ 中。作为安全预防措施，将对该队列的删除访问权限限制为管理员。这样，在他们的应用程序之后进行清理的人就不会意外（或以其他方式）删除属于另一个应用程序的消息。

**更新：**
查看您的帖子，我注意到另一个差异。我曾假设您收到 2035 授权错误，因为您在绑定模式下连接的 ID 不是`mqm`or `tcs-mq-user`。再次查看后，我意识到您从未授权该`mq-user`组访问您尝试访问的队列。您将其授权给在此场景中未使用的命令队列和回复模型。（WMQ Explorer 使用它们。）因此，添加以下规则：

```
SET AUTHREC PROFILE(TEST1) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(PUT,GET,INQ,BROWSE)
SET AUTHREC PROFILE(TEST2) OBJTYPE(QUEUE) GROUP('mq-user') AUTHADD(PUT,GET,INQ,BROWSE) 
```

如果实际上您以`tcs-mq-user`.

据我所知，没有办法在命令行上将通道传递给 Q，但它确实接受标准[MQSERVER 变量](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/cs12350_.htm)。例如：

```
export MQSERVER="$cname/TCP/localhost($port)" 
```

...`$cname`通道名称和`$port`端口在哪里。这是我的测试：

```
tcs-mq-user:~> export MQSERVER="TEST.SVRCONN/TCP/localhost(1414)"
tcs-mq-user:~> q -xb -iTEST1 -mQMTEST -lmqic
MQSeries Q Program by Paul Clarke [ V6.0.0 Build:May  2 2012 ]
Connecting ...connected to 'JMSDEMO'.
No more messages.
tcs-mq-user:~> 
```

至于为什么找不到客户端库，您是否安装了它们？

```
tcs-mq-user:~> rpm -qa | grep MQSeriesClient
MQSeriesClient-7.5.0-0 
```

# python - 贪心算法和硬币算法？

> ID：11695655
> 
> 赞同：6
> 
> 时间：2012-07-27T21:06:59.283
> 
> 标签：python, algorithm, optimization

我一直在研究 Project Euler 的一些问题/练习，希望能够使用 python 练习/学习一些最佳算法和编程习语。

我遇到了一个问题，它要求使用至少两个值总和为 100 来查找所有唯一组合。在研究这个问题时，我遇到了一些人提到硬币问题和贪心算法，这就是这个问题的意义所在。

我之前听说过贪心算法，但从未理解或使用过它。我想我会试一试。我仍然不确定这是否是正确的做法。

```
def greedy(amount):
    combos = {}
    ways = {}
    denominations = [1,5,10,25]
    ## work backwards? ##
    denominations.reverse()
    for i in denominations:
    ## check to see current denominations maximum use ##
        v = amount / i
        k = amount % i
    ## grab the remainder in a variable and use this in a while loop ##
        ways.update({i:v})
    ## update dictionarys ##
        combos.update({i:ways})
        while k != 0:
            for j in denominations:
                if j <= k:
                    n = k/j
                    k = k % j
                    ways.update({j:n})
                    combos.update({i:ways})
        ways = {}
    return combos 
```

我知道这不是解决欧拉问题的方法，但我想了解和学习使用该算法的最佳方法。我的问题是，这会被认为是一个适当的贪心算法吗？如果不是我做错了什么。如果正确，我可以改进优化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:18:52.773

贪心硬币算法计算为给定应付金额找零的最佳方式。它适用于我们的硬币面额，但可能无法使用虚构的硬币面额（例如 7 美分硬币和 12 美分硬币）

这是它的递归实现

```
>>> def pickBest(coins,due):
...     if due == 0: return []
...     for c in coins:
...        if c<= due: return [c] + pickBest(coins,due-c)
...
>>> coins = [1,5,10,25]
>>> coins = sorted(coins,reverse=True)
>>> coins
[25, 10, 5, 1]
>>> print pickBest(coins,88)
[25, 25, 25, 10, 1, 1, 1] 
```

但是，正如您所说，我认为这对您解决问题没有太大帮助

您可能希望将其视为递归问题

```
100 = 99 + 1
100 = 98 + 2  (2 = 1 + 1)
100 = 98 + (1 + 1)
100 = 97 + 3 (3 = 1 + 2)
100 = 97 + 2+1 (recall 2 = 1+1)
100 = 97 + 1+1 + 1
... 
```

至少我是这么认为的，我可能错了..（事实上我认为我错了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:00:39.297

您已经编辑了您的问题，以询问使用给定的一组硬币对给定金额进行找零的最佳方式是什么；至少，我认为这是你要问的问题。我假设每种面额的硬币都有无限数量的可用硬币，或者至少足以让您可以随意使用每种面额的硬币。

让我们以使用 1 美分、5 美分、10 美分和 25 美分硬币兑换 1 美元的问题为例；一美元是100美分。贪心算法总是取最大的硬币。因此，在第一步中，最大的硬币小于或等于目标金额，因此在输出中添加一个 25 美分硬币并将目标降低到 75 美分。在第二步，最大的硬币小于或等于减少的目标，因此在输出中添加一个 25 美分的硬币，并将目标减少到 50 美分。第三步，最大的硬币小于或等于减少的目标，所以在输出中增加一个 25 美分硬币，将目标减少到 25 美分。第四步，最大的硬币小于等于减少的目标，所以加一个25美分硬币，把目标减少到0美分。现在没有什么可做的了，所以输出是四个 25 美分的硬币。

由于这不是很有趣，让我们再试一次，目标是 47 美分。第一步输出 25 美分硬币并将目标降低到 22 美分。现在已经不能输出25美分硬币了，所以输出小于等于缩小目标的最大硬币，也就是10美分硬币，把目标缩小到12美分。第三步，小于或等于减少目标的最大硬币为10美分，因此输出该硬币并将目标减少为2美分。接下来的两个步骤将分别输出一个 1 美分硬币并将目标减少到零。所以输出是一枚 25 美分硬币、两枚 10 美分硬币和两枚 1 美分硬币，总共 47 美分。

我会留给你从那里编写代码。正如你所说，这与欧拉 76 无关。

更新回应第一条评论，该评论现已消失。

我不知道该怎么称呼你的代码。我想贪婪是一个足够好的词。以下是我的做法，其中包含调试输出，因此您可以看到中间步骤：

```
def greedy(amount, denoms):
    result = []
    while (amount > 0):
        print amount, denoms, result
        if (amount >= denoms[0]):
            num = amount // denoms[0]
            amount -= (num * denoms[0])
            result.append([denoms[0], num])
        denoms = denoms[1:]
    return result

print greedy(100, [25,10,5,1])
print ""
print greedy(100, [10,5,1])
print ""
print greedy(100, [5,1])
print ""
print greedy(100, [1])
print ""
print greedy(47, [25,10,5,1]) 
```

输出是：

```
100 [25, 10, 5, 1] []
[[25, 4]]

100 [10, 5, 1] []
[[10, 10]]

100 [5, 1] []
[[5, 20]]

100 [1] []
[[1, 100]]

47 [25, 10, 5, 1] []
22 [10, 5, 1] [[25, 1]]
2 [5, 1] [[25, 1], [10, 2]]
2 [1] [[25, 1], [10, 2]]
[[25, 1], [10, 2], [1, 2]] 
```

这有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T23:35:57.557

Euler 76 要求您计算一个数的分区。这不是硬币问题，也不是贪心算法。计算数字分区的方法归功于 Euler（惊喜！），您可以在大多数算法或数学课本或 Google 上查找它。您的程序应该几乎立即执行。

顺便说一句，Project Euler 的答案比 P(100) 的正常计算小 1，因为它忽略了 P(0)=1 的约定。因此，在编写了一个计算分区的函数后，欧拉 76 的答案是 P(100)-1。

我在博客上讨论过分区两次，[一次](http://programmingpraxis.com/2011/04/15/partition-numbers/)是计算分区数，另[一次](http://programmingpraxis.com/2012/05/11/partitions/)是枚举所有分区。

# mysql - 一个表的MySQL速度受其他表大小的影响？

> ID：11695656
> 
> 赞同：0
> 
> 时间：2012-07-27T21:07:12.180
> 
> 标签：mysql, sql, database

在具有多个表的 MySQL 数据库中，对表的查询运行时间是否受到同一数据库中所有其他表的大小的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:43:22.810

我只能想到其他表可能对查询产生的两种影响，假设这些表不参与查询，没有其他查询正在运行，并且没有链接表的约束或触发器。

第一个效果是在编译阶段。在此阶段，SQL 解析器从元数据表中获取有关表和列的信息。数据库中的更多表和列可能会减慢查询的编译速度。

另一个影响是页表和磁盘碎片。如果您有一个干净的系统并开始分配和填充页面，那么这些页面可能会填充磁盘上的连续页面（不能保证，但可能）。在访问时，操作系统可能正在预取与请求页面相邻的物理页面。在我描述的环境中，这个预取的数据可能会在查询中使用。

在具有多个表的数据库中，磁盘碎片的可能性要大得多。在这种情况下，预取的硬件页面不太可能用于查询中的相同表。这意味着它们不会被使用，因此需要额外的 I/O 请求来获取下一页。

我已经根据磁盘碎片描述了这一点，但是页面本身也会发生类似的事情。存储表数据的物理页可能不连续，结果相似。

碎片化可能是数据库的一个问题。事实上，无论数据库中有多少表，这都可能是一个问题。但是更多的表具有更多的插入/删除活动往往会增加碎片。然而，这种影响通常非常轻微，并且只有在某些极端情况下才会导致性能显着下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:12:39.620

拥有许多表（和数据）只需要一个 HDD 空间。

处理速度取决于您执行的表优化和大小 + 查询，而不是整个数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:17:19.560

查询运行时间会受到各种服务器环境问题的影响，因此虽然有人可能会说在数据库中拥有其他大表本身不会影响对不相关表的查询速度，但现实情况是这些表也可能会被查询并消耗服务器资源。这当然会影响您的查询速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T21:17:26.543

如果该表（大表）与具有某种连接的另一个表相关（外键约束就是一个例子），这应该是一个问题......否则您的表应该独立运行。也就是说，如果您有一个太大而导致速度问题的表，您可能希望找到其他解决方案来将其中一些数据重构为更小的子集。

# c# - 在.net 中另一个区域的控制器上执行操作

> ID：11695658
> 
> 赞同：0
> 
> 时间：2012-07-27T21:07:35.173
> 
> 标签：c#, asp.net, razor

所以我需要在.net 的另一个区域对另一个控制器调用一个动作

原因是我有一些条件逻辑来确定是否显示某些内容，这对我的网站和移动版本很常见。

所以在我的移动网站（在一个名为移动的单独区域）中，我希望能够做类似的事情

```
@Html.Action("GetVideoHtml","Service",null) 
```

其中 Service 是我的默认区域中的控制器，而 GetVideoHtml 是操作，但同样，我在移动区域中。我可以将动作复制并粘贴到本地动作中，但这似乎很愚蠢

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:13:41.190

`area = ""`在路由值中指定可以解决问题：

```
@Html.Action("GetVideoHtml", "Service", new { area = "" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T16:45:24.900

有人想澄清为什么会出现上述情况吗？

另外：如果该区域位于另一个文件夹 IE 中，这似乎不起作用

# asp.net-mvc-3 - 自动将所有控制器和动作节点添加到 Mvc.sitemap

> ID：11695659
> 
> 赞同：0
> 
> 时间：2012-07-27T21:07:56.360
> 
> 标签：asp.net-mvc-3, sitemap, mvcsitemapprovider

我已经在我的 MVC 3 应用程序上安装了 MVCitemapProvider 以获取面包屑路径。它在 Mvc.sitemap.xml 中自动生成以下节点

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">

  <mvcSiteMapNode title="Home" controller="Home" action="Index">

    <mvcSiteMapNode title="About" controller="Home" action="About"/>
  </mvcSiteMapNode>

</mvcSiteMap> 
```

以下是用于显示面包屑的 HTML Helper

```
 @Html.MvcSiteMap().SiteMapPath() 
```

在我的应用程序中，有很多控制器及其操作很忙，要在这些操作的 mvcSiteMap 中添加所有 mvcSiteMapNode，问题是是否可以在 Mvc.sitemap.xml 的 mvcSiteMapNode 中列出所有控制器及其各自的操作而不写所有手动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:43:59.913

我认为最接近的是在方法上使用属性，请参阅[https://github.com/maartenba/MvcSiteMapProvider/wiki/Defining-sitemap-nodes-in-code](https://github.com/maartenba/MvcSiteMapProvider/wiki/Defining-sitemap-nodes-in-code)。例子：

```
// GET: /Checkout/Complete 
[MvcSiteMapNodeAttribute(Title = "Checkout complete", ParentKey = "Checkout")] 
public ActionResult Complete(int id) 
{ 
  // ... 
} 
```

# pdf - 在 Windows 7 机器上从 Windows 服务打印 PDF

> ID：11695661
> 
> 赞同：1
> 
> 时间：2012-07-27T21:08:01.347
> 
> 标签：pdf, printing, windows-services, windows-7-x64

我在从 Windows 服务打印 PDF 文件时遇到问题。

Windows 服务具有以下元代码：

> *   System.Process 进程 = 新进程（）；
> *   分配文件路径
> *   分配动词=“打印”
> *   CreateNoWindow 设置为 true
> *   WindowStyle 设置为隐藏
> *   进程.start()

我构建了 Windows 服务并作为用户帐户安装在 Windows XP 上，它工作正常。但是当我在 Windows 7 Enterprise 上安装相同的东西时，它不再打印（尽管它安装正确）

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:10:56.520

在 Windows 7 上，可能有其他策略设置阻止服务打开后台进程。一般来说，我建议查看 Aspose.PDF、PDFTron 或 FoxIt SDK，以便从服务中打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:35:57.293

在 Windows XP 上，您的服务在“常规”、启用登录的会话 0 中运行，但在 Windows 7上，[会话 0 是隔离](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSession0Isolation)的，使用 shell 进行打印可能无法正常运行。

什么应用程序正在打印您的 PDF？您可以直接调用它，将文件传递到命令行上打印吗？

# c++ - D 是否适合编写跟踪 JIT 编译器？

> ID：11695662
> 
> 赞同：5
> 
> 时间：2012-07-27T21:08:08.933
> 
> 标签：c++, compiler-construction, go, d, jit

我想为我正在设计的编程语言编写一个解释器并跟踪 JIT。我已经有多年的 C++ 编程经验，但我一直想知道更新的替代方案是否会更好。在我的 C++ 时代，我发现最令人沮丧的一件事是不得不使用头文件来处理笨重的一次性编译器模型。问题是并非所有语言都同样适合此目的。对于我的跟踪 JIT，我需要能够将可执行代码写入内存并让解释器调用该代码。我还需要生成的代码才能回调主机函数。

我开始研究 Go，发现该语言有指针但没有指针算术。这立刻让我觉得这是一个大问题。我可能很想编写自己的分配器和垃圾收集器。我需要密切控制我的语言对象在内存中的布局方式，并能够获取特定字段的地址并写入它们。除非有办法解决这个问题，否则 Go 的底层似乎不足以满足我的目的。

D 语言似乎很有前途。它具有指针算法和调用 D 所需的 ABI 的清晰轮廓。我听说过很多关于它的好消息。它还具有垃圾收集，非常适合编译器编写，但我仍然有一些我不确定的事情：

1.  D 是否具有允许我将内存块标记为可执行的标准库？

2.  如果我分配了一大块我想自己管理的内存，用我自己的 GC，并且有一堆指针进入那里，这会对 D 的垃圾收集器造成问题吗？

3.  根据您的经验，D 与 C 代码的互操作性如何？加载 C 动态库并调用它们相当容易吗？

最后，还有整个支持方面。对于在这里使用过 D on linux 的人来说，工具链有多好？有什么问题吗？有没有人用 D 编写过 JIT 编译器，如果有，体验如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:16:59.933

1.  我相信是这样，看看`core.memory.GC`我是否记错了。

2.  不，不应该。只需调用`malloc`或任何您需要的，并确保 GC 看不到它。

3.  是的，与 C 代码互操作非常容易。

警告：您可能也*不想*依赖 GC，因为它不是“精确的”（即，如果您不走运，可能而且确实会泄漏内存）。但对于小数据块，通常没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T21:50:02.957

Go 确实允许指针算术，但您必须导入`unsafe`包才能这样做（或使用 C 函数）。指针运算是错误的常见来源，Go 有其他机制，如切片，它提供了安全的方法来执行一些需要在 C 中进行指针运算的相同活动。`unsafe`你可以将任何指针转换为 a`uintptr`和返回，并且`uintptr`是普通的数字类型，它允许你做算术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T12:37:03.277

> 我开始研究 Go，发现该语言有指针但没有指针算术。这立刻让我觉得这是一个大问题。

显然，您还没有尝试过这种语言。没有任何“指针算术”，它工作得很好。如果你真的需要改变规则，总有“不安全”的包可以让你做任何事情。

> 我可能很想编写自己的分配器和垃圾收集器。我需要密切控制我的语言对象在内存中的布局方式，并能够获取特定字段的地址并写入它们。

我自己没有编写分配器或垃圾收集器，但您可以获取结构字段的地址。所有 Go 数据结构都很简单，易于控制和推理。有关简短介绍，请参见[http://research.swtch.com/godata](http://research.swtch.com/godata)。大小和对齐保证也是语言[http://golang.org/ref/spec#Size_and_alignment_guarantees](http://golang.org/ref/spec#Size_and_alignment_guarantees)的一部分。如果不出意外，您总是可以跳入 C 或 asm。

恕我直言，您应该尝试执行一些小任务，看看 Go 是否符合您的要求。[随时在http://groups.google.com/group/golang-nuts](http://groups.google.com/group/golang-nuts)提问。

亚历克斯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T00:12:55.113

已经有一个 JIT 编译器，非常严肃，用 D 完成。我强烈建议看看[http://lycus.org/](http://lycus.org/)，更具体地说是关于 MCI 项目的页面 - [http://github.com/lycus/mci](http://github.com/lycus/mci) . [MCI 文档](http://mci.readthedocs.org/en/latest/index.html)将为您提供更多信息。正如您将看到的，MCI 不仅仅是一个 JIT，它有自己的（比我见过的任何东西都好）IR、优化器、验证器等......

# actionscript-3 - Flex 字典字面量

> ID：11695664
> 
> 赞同：0
> 
> 时间：2012-07-27T21:08:23.743
> 
> 标签：actionscript-3, apache-flex

在 Flex 中工作我需要用相当复杂的结构填充字典。基于[此文档页面](http://livedocs.adobe.com/flex/3/html/help.html?content=10_Lists_of_data_4.html)，我尝试通过以下语法创建字典文字：

```
 var defaultMarkingA =
        {
            type: 'page',
            displayText: 'XYZ',
            innerMarkings: [
                {id: 'ABC', type: 'page', displayText: 'ABC'}
            ]
        }; 
```

我希望这段代码创建的是具有三个映射的嵌套字典结构：

1.  “类型”->“页面”
2.  “显示文本”->“XYZ”
3.  "innerMarkings" => 单元素数组，其中包含另一个字典：
    1.  “身份证”->“ABC”
    2.  “类型”->“页面”
    3.  “显示文本”->“ABC”

代码实际创建的是根据 getQualifiedClassName 的“对象”。我在这里做错了什么？actionscript 是否无法处理嵌套的字典文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:47:53.080

你没有做错任何事情，这不是制作你想要的结构的方式。using`something = {}`是`something = new Object()`. 没有这样的速记来创建`Dictionary`.

从[您链接的文档中](http://livedocs.adobe.com/flex/3/html/help.html?content=10_Lists_of_data_4.html)：

> 关联数组是 Object 类的一个实例，这意味着每个键对应一个属性名称。

和

> ActionScript 3.0 引入了一种称为字典的高级关联数组类型。字典是 flash.utils 包中 Dictionary 类的实例，使用的键可以是任何数据类型，但通常是 Object 类的实例。换句话说，字典键不限于字符串类型的值。

要获得预期的结果，您必须执行以下操作：

```
var defaultMarkingA:Dictionary = new Dictionary();
defaultMarkingA["type"] = "page";
defaultMarkingA["displayText"] = "XYZ";
defaultMarkingA["innerMarkings"] = new Array();

var dict:Dictionary = new Dictionary();
dict["id"] = "ABC";
dict["type"] = "page";
dict["displayText"] = "ABC";

defaultMarkingA["innerMarkings"].push(dict); 
```

`Object`将 an用作关联数组没有任何问题。我能看到的唯一问题是使用`Object`和性能之间的性能可能会有所不同，`Dictionary`但是您需要进行一些分析以查看a）是否存在任何差异以及b）该差异是否重要。

# python - 如何将缩进从 2 个空格转换为 4 个空格

> ID：11695690
> 
> 赞同：9
> 
> 时间：2012-07-27T21:10:07.350
> 
> 标签：python, automation, edit, indentation

> **可能重复：**
> [HOWTO：修复 Python 缩进](https://stackoverflow.com/questions/1024435/howto-fix-python-indentation)

我有 Python 库，其中仅使用了**2 个空格**缩进。我需要自动化的方式将所有文件转换为**4 个空格**缩进。是否有任何工具/脚本/编辑器？

请不要推荐 Emacs。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T21:14:23.370

试试 Tim Peters 的[reindent 脚本](http://pypi.python.org/pypi/Reindent/0.1.1)，它专为将 Python 文件转换为 4 空格缩进而设计。

# javascript - 严格模式语句导致函数未定义

> ID：11695695
> 
> 赞同：1
> 
> 时间：2012-07-27T21:10:37.613
> 
> 标签：javascript

我将所有函数都包装在一个立即调用的函数表达式中，如下所示：

```
(function(){
  "use strict";

  function toggleComment(parentCommentID) {
    $("form#" + parentCommentID).toggle();
  }

  function scrollBottom() {
    window.scrollTo(0, document.body.scrollHeight);
  }

})(); 
```

但是，在通过链接调用这些函数之一时：

```
<a href="javascript:void(0)" onclick="toggleComment(159); return false;">Reply</a> 
```

Chrome 控制台输出`Uncaught ReferenceError: toggleComment is not defined`. 我是否错误地认为立即调用的函数表达式，顾名思义，应该立即被调用，因此`toggleComment`应该被调用？我应该以不同的方式调用该函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:13:24.317

该功能`toggleComment`不可见。它包含在您正在使用的 ready 函数中；如果您希望能够这样调用它（在大多数情况下不建议这样做），您必须将其提升到该函数之外并使其全局可访问。

而这与`strict`. 如果删除该`strict`行，此问题仍然相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:14:34.803

这些函数不再在全局范围内声明。尝试

```
window.toggleComment = function(parentCommentID) {
  $("form#" + parentCommentID).toggle();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:27:22.480

您已经在闭包中声明了函数。它们超出了 HTML 标记的范围。

您可以为您的`<a>`标签设置一个 id 并将您的函数发布到全局范围，因此您可以这样做：

```
(function(){
  "use strict";

  var toggleComment = function(parentCommentID) {
    $("form#" + parentCommentID).toggle();
  }

  function scrollBottom() {
    window.scrollTo(0, document.body.scrollHeight);
  }

  document.getElementById("yourATagId").onclick(function() {
    toggleComment(159);
  });

  window.toggleComment = toggleComment;
})(); 
```

也许您可以从这个简单的单例模式中受益：

```
(function() {
    var controller = {};

    controller = new function() {
        this.sampleProperty = "my property";
    }

    controller.yourFunction = function() {
        var localVariable;
        console.log("I can access " + this.property);
    };

    window.controller = controller;
})(); 
```

这样，`controller`您的全局范围就会知道。

# jar - 我无法在 kubuntu 终端中运行 jar 文件

> ID：11695697
> 
> 赞同：2
> 
> 时间：2012-07-27T21:11:03.427
> 
> 标签：jar, java, kubuntu

我认为这是我的 java 安装中的一些问题，但我不知道是什么问题以及如何解决它

我可以在可视模式下使用 openjdk 运行 jar 文件，但在终端中我无法运行 jar 文件，例如您可以在下面看到

```
root@mohammad-Inspiron-1564:/media/storage/Linux/Freedom# java -jar freedom.jar 
No protocol specified
No protocol specified
Exception in thread "main" java.lang.InternalError: Can't connect to X11 window server using ':0' as the value of the DISPLAY variable.
        at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)
        at sun.awt.X11GraphicsEnvironment.access$200(X11GraphicsEnvironment.java:65)
        at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:110)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:74)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:186)
        at java.awt.GraphicsEnvironment.createGE(GraphicsEnvironment.java:102)
        at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:81)
        at java.awt.Window.initGC(Window.java:466)
        at java.awt.Window.init(Window.java:486)
        at java.awt.Window.<init>(Window.java:535)
        at java.awt.Frame.<init>(Frame.java:420)
        at javax.swing.JFrame.<init>(JFrame.java:218)
        at de.resolution.emsgui.LanguageSelector.showButtonGrid(LanguageSelector.java:27)
        at de.resolution.emsgui.LanguageSelector.<init>(LanguageSelector.java:19)
        at emsgui.main(emsgui.java:46) 
```

也许我应该重新安装 mu kubuntu :((

谢谢穆罕默德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:35:47.373

错误消息告诉您它无法连接到 X11 窗口服务器。JAR 文件中的程序使用 Swing 并且需要某种方式来显示它创建的 GUI。如果您安装了 X11，您可以通过键入从命令行启动它`startx`。否则，您需要安装它或其他一些允许您运行基于 Swing 的程序的系统。

# css - Django - CSS 不显示 - Windows

> ID：11695698
> 
> 赞同：0
> 
> 时间：2012-07-27T21:11:05.673
> 
> 标签：css, django, django-urls

在我的 Windows DEV 环境中，我在“\SOWL\SOWL\static”文件夹中有 global.css 文件。我的“模板”也在“\SOWL\SOWL\”下。

我的 URLs.py 有以下部分：

```
import os.path
static = os.path.join(
os.path.dirname(__file__), 'static'
)
(r'^static/(?P<path>.*)$', 'django.views.static.serve',{'document_root': static}), 
```

我的 base.html 参考了：

```
<link rel="Stylesheet" type="text/css" href="/static/global.css" /> 
```

但是当我得到主页时，CSS 没有显示。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:18:18.827

也许如果你像下面这样更正你的基本模板 css 地址它可以工作

```
<link rel="Stylesheet" type="text/css" href="static/global.css" /> 
```

如果它还不起作用，请在源代码中查看页面源单击 css 文件的 url，然后您可以看到它是否正确

* * *

穆罕默德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:21:34.990

尝试改变：

```
static = os.path.join(
os.path.dirname(__file__), 'static'
) 
```

至：

```
static = os.path.join(
os.path.abspath(os.path.dirname(__file__)), 'static'
) 
```

# wpf - 绑定数据模板中定义的命令

> ID：11695701
> 
> 赞同：1
> 
> 时间：2012-07-27T21:11:12.127
> 
> 标签：wpf, xaml, binding, command

我知道关于这个话题的答案很少。但他们都没有在我的情况下工作。

我有`ListView`一个风格和一个`ItemContainerStyle`。在 中，我定义了一些触发器，以便根据是否选择列表中的项目`ItemContainer` `Style`来使用不同的触发器。`DataTemplate`然后，最后在`Datatemplate`我有一个带有命令的上下文菜单。问题是如何将命令绑定到视图模型。

这是列表视图：

```
 <ListView
        x:Name="lstPersons"
        Grid.Row="1"
        Style="{StaticResource ListViewStyle}"
        ItemContainerStyle="{StaticResource ItemContainerStyle}"
        DataContext="{Binding}"
        ItemsSource="{Binding Path=Persons}"
        Tag="{Binding}"
        SelectedItem="{Binding Path=SelectedPerson, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
    </ListView> 
```

这些是样式、数据模板和上下文菜单（在资源字典中定义）。上下文菜单中的命令不起作用....：

```
 <ContextMenu x:Key="SelectedItemContextMenu">
        <MenuItem
            Header="Do Something"
            Command="{Binding Path=DataContext.DoSomethingCmd, ElementName=LayoutRoot}">
        </MenuItem>
        <MenuItem
            Header="Do Something"
            Command="{Binding PlacementTarget.Tag.DoSomethingCmd, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
        </MenuItem>
    </ContextMenu>

<DataTemplate
    x:Key="ItemTemplate">
    <Canvas
        Margin="4"
        Width="60"
        Height="60"
        Background="LightGray">
        <TextBlock
            Foreground="Black"
            Margin="2 0 0 0"
            Opacity="0.5"
            FontFamily="Segoe UI"
            Text="{Binding Path=FirstName}" />
    </Canvas>
</DataTemplate>

<DataTemplate
    x:Key="ItemSelectedTemplate">
    <Grid>
        <Border
            BorderBrush="Black"
            BorderThickness="1"
            Margin="3"
            ContextMenu="{DynamicResource SelectedItemContextMenu}">
            <Canvas
                Width="60"
                Height="60"
                Background="LightBlue">
                <TextBlock
                    Foreground="Black"
                    Margin="2 0 0 0"
                    Opacity="0.5"
                    FontFamily="Segoe UI"
                    Text="{Binding Path=FirstName}" />
            </Canvas>
        </Border>
    </Grid>
</DataTemplate>

<!--style of the listviewitem-->
<Style
    TargetType="{x:Type ListViewItem}"
    x:Key="ItemContainerStyle">
    <Setter
        Property="ContentTemplate"
        Value="{StaticResource ItemTemplate}" />
    <Style.Triggers>
        <Trigger
            Property="IsSelected"
            Value="True">
            <Setter
                Property="ContentTemplate"
                Value="{StaticResource ItemSelectedTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style>

<!--style of the listview-->
<Style
    TargetType="{x:Type ListBox}"
    x:Key="ListViewStyle">
    <Setter
        Property="Template">
        <Setter.Value>
            <ControlTemplate
                TargetType="{x:Type ListBox}">
                <Grid>
                    <Border>
                        <ScrollViewer
                            Focusable="false">
                            <WrapPanel
                                IsItemsHost="True"
                                Orientation="Horizontal"
                                Width="{Binding (FrameworkElement.ActualWidth), RelativeSource={RelativeSource AncestorType=ScrollContentPresenter}}"/>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:34:05.897

您可以使用相对来源：

```
 <ContextMenu x:Key="SelectedItemContextMenu">
            <MenuItem
            Header="Do Something"
            Command="{Binding Path=DataContext.DoSomethingCmd, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">
            </MenuItem>           
        </ContextMenu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:24:52.443

您的 ContextMenu 在数据模板中使用。我将被置于“LayoutRoot”的不同名称范围内，并且 ElementName 绑定将不起作用。此外，上下文菜单的 PlacementTarget 是边框，并且您没有在其上设置任何标签。所以第二个命令也不起作用。

看起来您正在 ListBox 级别（或 LayoutRoot？）上实现命令。将上下文菜单放在 ListBox 上可能更容易，并使用 ListBox.SelectedItem 来查找当前选择并将您的逻辑应用于其上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:09:12.337

在这种情况下，您可能应该使用 RoutedCommands 而不是 VM 命令。您可以将 RoutedCommand 绑定到 ContextMenu，并且由于您只需要静态对象引用，因此找到它们应该不是问题。然后，您将在应该处理命令的控件上设置适当的 CommandBindings（ListView 或 ListViewItem，具体取决于您希望 List-ViewModel 还是 Item-ViewModel 来处理命令）。这些控件将知道它们的 ViewModel，因此绑定到它们不会有问题。通过 WPF 内置的命令路由过程，上下文菜单将自动为其命令找到合适的目标。

有关如何以对 MVVM 友好的方式设置 CommandBindings 的指导，您可能需要参考[http://wpfglue.wordpress.com/2012/05/07/commanding-binding-controls-to-methods/](http://wpfglue.wordpress.com/2012/05/07/commanding-binding-controls-to-methods/)

# android - 在应用程序中使用 Android 示例/示例

> ID：11695703
> 
> 赞同：0
> 
> 时间：2012-07-27T21:11:36.527
> 
> 标签：android, google-play

如果我在应用程序中使用 Android 示例/示例并对其进行更改。我可以进入游戏商店吗？例如，如果我玩蛇游戏，放置不同的精灵和功能，我可以称它为我的应用程序吗？

他们的 SDK 中包含的 Google 示例是否受版权保护且不可重复使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:52:11.527

在每个样本中都有类似下面的内容。您可能希望您的律师查看一下，以便他提供建议

> /* * 版权所有 (C) 2007 Android 开源项目 * * 根据 Apache 许可证 2.0 版（“许可证”）获得许可；* 除非遵守许可，否则您不得使用此文件。
> [* 您可以从 * * http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0) * *获得许可证的副本 * * 除非适用法律要求或书面同意，否则根据许可证分发的软件 * 在“原样”基础，* 不提供任何明示或暗示的保证或条件。* 请参阅许可证以了解许可证下的特定语言管理权限和 * 限制。*/

# c++ - 将 SetWindowText 与两个缓冲区的组合一起使用

> ID：11695704
> 
> 赞同：0
> 
> 时间：2012-07-27T21:11:37.400
> 
> 标签：c++, c, winapi, buffer

好的，所以我有一个编辑控件和一个静态文本控件。当用户单击按钮时，我希望程序从编辑控件中获取文本并将其添加到静态文本控件中的文本中，然后将该新值设置为静态控件中的文本。所以我有一个函数可以将缓冲区相互附加，但我的程序似乎没有工作。这就是我所拥有的：

```
//when button message is recieved:
SendMessage(hwndEditControl, WM_GETTEXT,255,(LPARAM)editbuffer);
GetWindowText(hwndTextControl, (LPWSTR)allText, GetWindowTextLength(hwndTextControl));
allText = appendStrings((char*)editbuffer, (char*)allText);
SetWindowText(hwndTextControl, (LPCWSTR)allText);}

 // where appendStrings is defined as:

char* appendStrings (char* buffer1, char* buffer2)
{
    std::string string1(buffer1), string2(buffer2);
    std::string string3 = string1 + string2; 
    return (char*)string3.c_str();
}
//and
static char*        editbuffer = new char;
static char*        allText    = new char; //these are defined as so 
```

所以无论如何，当我按下按钮时，我很确定 appendStrings 函数正在工作，因为我认为它需要编辑框中的内容并将其添加到文本框中。我说“我认为”的原因是因为文本框中的字符串总是乱码。它有时是随机符号或只是这些“l”（或看起来像“L”的东西）。我认为这是我的指针有问题，但我不确定。我是新手，所以如果有更简单的方法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:20:13.180

您正在返回一个指向在函数返回之前被销毁的临时对象的指针。

与其返回 a `char *`，不如返回 a `std::string`。

# ruby-on-rails - 如何修复“未初始化的常量 SampleApp”

> ID：11695705
> 
> 赞同：1
> 
> 时间：2012-07-27T21:11:38.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试跑步`rails server`，但我看到了这样的事情：

```
C:\Users\Mama  i Tata>cd  c:/rails_project/my_app

c:\rails_project\my_app>rails s
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
c:/rails_project/my_app/config/routes.rb:1:in `<top (required)>': uninitialized
constant SampleApp (NameError)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:40:in `block in load_paths'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:40:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:40:in `load_paths'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:16:in `reload!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:26:in `block in updater'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
support/file_update_checker.rb:78:in `call'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.6/lib/active_
support/file_update_checker.rb:78:in `execute'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/routes_reloader.rb:27:in `updater'
    from C:in `execute_if_updated'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation/finisher.rb:66:in `block in <module:Finisher>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
lizable.rb:30:in `instance_exec'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
lizable.rb:30:in `run'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
lizable.rb:55:in `block in run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
lizable.rb:54:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initia
lizable.rb:54:in `run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/applic
ation.rb:136:in `initialize!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/railti
e/configurable.rb:30:in `method_missing'
    from c:/rails_project/my_app/config/environment.rb:5:in `<top (required)

    from c:/rails_project/my_app/config.ru:4:in `require'
    from c:/rails_project/my_app/config.ru:4:in `block in <main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
51:in `instance_eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
51:in `initialize'
    from c:/rails_project/my_app/config.ru:1:in `new'
    from c:/rails_project/my_app/config.ru:1:in `<main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
40:in `eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
40:in `parse_file'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2
00:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
ds/server.rb:46:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:3
01:in `wrapped_app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2
52:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
ds/server.rb:70:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
ds.rb:55:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
ds.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/comman
ds.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我正在使用 Ruby 1.9.3p194 (2012-04-20) [i386-mingw32]。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:19:58.923

根据第 5 章中的调试日志和 Rails 教程，我了解您尝试复制和粘贴路由文件：

```
SampleApp::Application.routes.draw do
  get "static_pages/home"
  .......
end 
```

`SampleApp`这里代表应用程序的名称，从您的目录名称中我认为应该是`MyApp`.

您的路线文件应该是：

```
MyApp::Application.routes.draw do
  get "static_pages/home"
  .......
end 
```

这只是一个初步的猜测。

# java - 使位图“环绕”一个点

> ID：11695706
> 
> 赞同：0
> 
> 时间：2012-07-27T21:11:39.387
> 
> 标签：java, android, rotation

我正在尝试制作一个“按钮轮” - 我有一个自定义“按钮”对象，它使用 Rect 作为它的位置/大小。

我可以通过这样做来旋转：

```
Button1.Rectangle.left = (int) (Vertex.x + (radius * Math.sin(Math.toRadians(Degree))));
Button1.Rectangle.top =  (int) (Vertex.y + (radius * Math.cos(Math.toRadians(Degree))));
Button1.Rectangle.right = Button1.Rectangle.left + ButtonSize;
Button1.Rectangle.bottom = Button1.Rectangle.top + ButtonSize;

    Degree += 1; 
```

不幸的是，这仅适用于一个，因为它们然后都排成一列...我如何合并“偏移”或增量而不是分配位置

我试过了：

```
 //Using self position as vertex
    Button1.Rectangle.left = (int) (Button1.Rectangle.left + (radius * Math.sin(Math.toRadians(Degree))));
    Button1.Rectangle.top =  (int) (Button1.Rectangle.top + (radius * Math.cos(Math.toRadians(Degree)))); 
```

和

```
// using +=
 Button1.Rectangle.left += (int) (Vertex.x + (radius * Math.sin(Math.toRadians(Degree))));
Button1.Rectangle.top +=  (int) (Vertex.y + (radius * Math.cos(Math.toRadians(Degree)))); 
```

我知道这一定很容易，我只是想念它......

编辑：

通过制作一个“修复它”

```
int Degree1 = 0;
int Degree2 = 90;
int Degree3 = 180;
etc. 
```

并增加它们：

```
Degree1 += 1;
Degree2 += 1;
Degree3 += 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:24:26.463

存储您正在旋转的原点，并且每次计算它的位置时，计算原点，而不是当前点。

# heroku-cli - 无法通过 CLI 登录 Heroku

> ID：11695707
> 
> 赞同：0
> 
> 时间：2012-07-27T21:11:43.150
> 
> 标签：heroku-cli

我正在使用 Ruby 1.9.3p194（2012-04-20 修订版 35410）[i386-darwin9.8.0] 运行 OS X 10.5.8。我正在尝试从 shell 登录 Heroku。我升级了 Bash 并运行`heroku login`了以下结果：

```
/usr/local/heroku/vendor/gems/heroku-api-0.3.1/lib/heroku/api.rb:3:in `require': no such file to load -- securerandom (LoadError)
    from /usr/local/heroku/vendor/gems/heroku-api-0.3.1/lib/heroku/api.rb:3
    from /usr/local/heroku/vendor/gems/heroku-api-0.3.1/lib/heroku-api.rb:1:in `require'
    from /usr/local/heroku/vendor/gems/heroku-api-0.3.1/lib/heroku-api.rb:1
    from /usr/local/heroku/lib/heroku/cli.rb:7:in `require'
    from /usr/local/heroku/lib/heroku/cli.rb:7
    from /usr/bin/heroku:22:in `require'
    from /usr/bin/heroku:22 
```

`openssl`如果有人走上同样受折磨的道路，我会走到最糟糕的地步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:16:39.327

我已经看过几次了。他们的解决方案最终是编辑 #! /usr/bin/heroku 文件中的行（文件中的第一行）指向`which ruby`将返回给他们的机器的任何内容。默认情况下，它指向系统 ruby​​ 而不是任何已安装的版本，希望这会带来更一致的体验（通常会这样做）。希望有帮助。

# xml - 如何使用 XSLT 复制根节点的命名空间和属性？

> ID：11695710
> 
> 赞同：1
> 
> 时间：2012-07-27T21:11:55.767
> 
> 标签：xml, xslt, xslt-1.0

我是 XSL/XML 的新手，我需要有关 XSL 转换的帮助。

我有这样开始的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<Invoice
  xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 ../ws/Invoice.xsd"
  xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
  xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
  xmlns:sac="urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2"
  xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
  xmlns:sig="urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2">
<ext:UBLExtensions>
  <ext:UBLExtension>
    <cbc:ID>INVOICE1</cbc:ID>
<cbc:Name>InvoiceIssuePlaceData</cbc:Name>
    <ext:ExtensionAgencyURI>urn:invoice:hr:issueplace</ext:ExtensionAgencyURI>
    <ext:ExtensionContent>
      <ext:InvoiceIssuePlace>London</ext:InvoiceIssuePlace>
    </ext:ExtensionContent>
  </ext:UBLExtension>
</ext:UBLExtensions>
<cbc:UBLVersionID>2.1</cbc:UBLVersionID>
<cbc:ID>01 1206-2406-568</cbc:ID>
</Invoice> 
```

我想为所有属性创建元素，并在 <_> 标记之间为具有属性的节点的值创建元素。

这是xsl...

```
<?xml version='1.0' encoding='utf-8' ?>
<xsl:stylesheet 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
  xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
  xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
  xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
  xmlns:sig="urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2"
  xmlns:sac="urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 ../ws/Invoice.xsd"
  version="1.0">
  <xsl:output method="xml"/>
   <xsl:template match="/">
     <xsl:apply-templates/>
   </xsl:template>
   <xsl:template match="@*|*|text()">
    <xsl:copy>
     <xsl:apply-templates select="@*|*|text()"/>
    </xsl:copy>
   </xsl:template>
   <xsl:template match="*[@*]">
    <xsl:element name="{name()}">
     <xsl:if test="count(@*)>=count(node())">
      <_>
       <xsl:value-of select="."/>
      </_>
     </xsl:if>
     <xsl:for-each select="@*">
      <xsl:element name="{name()}">
       <xsl:value-of select="."/>
      </xsl:element>
     </xsl:for-each>
     <xsl:if test="count(node())>count(@*)">
      <xsl:apply-templates select="*|text()"/>
     </xsl:if> 
    </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

问题是这种转换不会像我需要的那样转换根节点（发票）。我越来越：

```
<?xml version="1.0"?>
<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2">
  <xsi:schemaLocation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 ../ws/Invoice.xsd</xsi:schemaLocation> 
```

Invoice 中没有其他属性并作为新元素。只有 xsi:schemaLocation，但在该节点的级别上定义了命名空间。

我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:03:49.743

这个样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="@*">
 <xsl:element name="{name()}" namespace="{namespace-uri()}">
  <_><xsl:value-of select="."/></_> 
 </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

...将您的根节点转换为...

```
<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:sac="urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2" xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2" xmlns:sig="urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2">
  <xsi:schemaLocation>
    <_ xmlns="">urn:oasis:names:specification:ubl:schema:xsd:Invoice-2 ../ws/Invoice.xsd</_>
  </xsi:schemaLocation> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:23:53.907

我不完全清楚问题是什么，但我*认为*这可能与您用来匹配具有属性的元素的模板有关

```
<xsl:template match="*[@*]"> 
   <xsl:element name="{name()}"> 
```

特别是，**xsl:element**命令将创建一个全新的元素，但您并没有说明应该为该新元素声明哪些名称空间。试试这个

```
<xsl:template match="*[@*]"> 
    <xsl:copy> 
```

这应该创建**发票**的副本以及名称空间声明（但它的属性）。

# android - 样式化选项卡和寻呼机

> ID：11695711
> 
> 赞同：0
> 
> 时间：2012-07-27T21:12:02.347
> 
> 标签：android, styles, actionbarsherlock

我正在尝试设计 ActionBarSherlock 示例[选项卡和寻呼机](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)的实现，但我无法让它工作。

我试图在我的styles.xml 文件中声明一个主题，但我一直在弄清楚我需要覆盖什么，以便文本和制表符行显示为红色。

有没有人对如何做到这一点有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:22:18.820

请阅读此[StackOverflow 答案](https://stackoverflow.com/questions/10284962/styling-the-actionbarsherlock-tabs)。

这将有助于设置实际条的样式。我还发现[Styling Android](http://blog.stylingandroid.com/)博客资源丰富。

# javascript - 建立一个telerik treeview客户端工作但不扩展显示孩子

> ID：11695716
> 
> 赞同：0
> 
> 时间：2012-07-27T21:12:38.377
> 
> 标签：javascript, asp.net, telerik

我有一个树视图。此树视图使用以下内容在 javascript 中填充有子项的客户端：

```
treeView.trackChanges();
var newNode = new Telerik.Web.UI.RadTreeNode();
newNode.set_text(node);
hasParent.get_nodes().add(newNode);
treeView.commitChanges(); 
```

缺点是在查看客户端时，树没有展开，以显示这些孩子。我错过了一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:43:11.407

问题不在于扩展，而在于基础 Telerik Control。为了解决这个问题，您需要设置 onClientNodeExpanded = "FUNCTION_CALL"，就像在这个示例中一样，它正在执行 onClientNodeExpanding。同样在这个例子中，我没有赋值。在我的最终回答中，我做到了。

# r - 向量化查找列表中列表中数据帧的逐行平均值

> ID：11695718
> 
> 赞同：1
> 
> 时间：2012-07-27T21:12:44.103
> 
> 标签：r, vectorization

我有一个子列表。每个子列表包含一个相同的数据框（除了其中的数据外，其他相同）和一个“是/否”标签。如果是/否标签为真，我想找到数据帧的逐行平均值。

```
#Create the data frames
id <- c("a", "b", "c")
df1 <- data.frame(id=id, data=c(1, 2, 3))
df2 <- df1
df3 <- data.frame(id=id, data=c(1000, 2000, 3000))

#Create the sublists that will store the data frame and the yes/no variable
sub1 <- list(data=df1, useMe=TRUE)
sub2 <- list(data=df2, useMe=TRUE)
sub3 <- list(data=df3, useMe=FALSE)

#Store the sublists in a main list
main <- list(sub1, sub2, sub3) 
```

我想要一个矢量化函数，它将返回数据帧的逐行平均值，但前提是`$useMe==TRUE`，如下所示：

```
> desiredFun(main)
   id  data
1   a     1
2   b     2
3   c     3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:35:03.857

这是解决此问题的一种相当通用的方法：

```
# Extract the "data" portion of each "main" list element
# (using lapply to return a list)
AllData <- lapply(main, "[[", "data")
# Extract the "useMe" portion of each "main" list element
# using sapply to return a vector)
UseMe <- sapply(main, "[[", "useMe")
# Select the "data" list elements where the "useMe" vector elements are TRUE
# and rbind all the data.frames together
Data <- do.call(rbind, AllData[UseMe])
library(plyr)
# Aggregate the resulting data.frame
Avg <- ddply(Data, "id", summarize, data=mean(data)) 
```

# java - 从小程序的“请求访问您的计算机”对话框中单击“拒绝”的用户恢复

> ID：11695719
> 
> 赞同：2
> 
> 时间：2012-07-27T21:12:46.153
> 
> 标签：java, applet

我正在使用 Oracle 的 deployApplet.js 库运行一个自签名小程序。（检查生成的 html，它正在使用`applet`标记 - 我还使用 Oracle 的部署教程中的 JNLP 文件）。

当用户看到请求访问其计算机的权限的对话框时，就会出现此问题。如果他们点击允许一切都很好。如果他们单击拒绝，我会在 Java 控制台中收到以下异常：

```
ExitException[ 4]java.lang.RuntimeException: exit(-1)
    at com.sun.javaws.Main.systemExit(Main.java:1316)
    at com.sun.javaws.security.AppPolicy.grantUnrestrictedAccess(AppPolicy.java:283)
    at com.sun.javaws.LaunchDownload.checkSignedResourcesHelper(LaunchDownload.java:1825)
    at com.sun.javaws.LaunchDownload.checkSignedResources(LaunchDownload.java:1508)
    at sun.plugin2.applet.JNLP2Manager.prepareLaunchFile(JNLP2Manager.java:1161)
    at sun.plugin2.applet.JNLP2Manager.loadJarFiles(JNLP2Manager.java:473)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1495)
    at java.lang.Thread.run(Thread.java:680)
Exception: ExitException[ 4]java.lang.RuntimeException: exit(-1)
java.lang.NullPointerException
    at sun.plugin.util.ErrorPanel.deniedCertificateFailure(ErrorPanel.java:334)
    at sun.plugin.util.ErrorPanel.<init>(ErrorPanel.java:61)
    at sun.plugin.util.GrayBoxPanel.setError(GrayBoxPanel.java:104)
    at sun.plugin.util.GrayBoxPainter.paintGrayBox(GrayBoxPainter.java:473)
    at sun.plugin.util.GrayBoxPainter$4.run(GrayBoxPainter.java:411)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

浏览器在此之后挂起，我需要手动终止 Java Applet 进程或重新启动浏览器。根据堆栈跟踪和在我的小程序中执行一些静态初始化程序调试步骤，在引发异常之前，我的小程序中的任何代码似乎都没有被执行。

当用户点击拒绝时，有什么方法可以优雅地恢复？理想情况下，小程序和 JVM 会干净地退出，但我愿意接受任何不会让浏览器挂起的事情。

编辑：

抛出异常之前的附加日志信息：

```
security: Showing MacOSXTrustSiteDialog
security: User permitted app to continue without priviledges
security: User has denied the privileges to the code
security: Adding certificate in Deployment denied certificate store
security: Added certificate in Deployment denied certificate store
security: We were not granted permission, exiting
basic: exception: exit(-1).
Java Plug-in 1.6.0_31
Using JRE version 1.6.0_31-b04-415-11M3646 Java HotSpot(TM) 64-Bit Server VM 
```

# sql - SELECT sql 命令错误

> ID：11695724
> 
> 赞同：0
> 
> 时间：2012-07-27T21:13:12.537
> 
> 标签：sql, ms-access

我有以下查询：

```
SELECT hrpersnl.p_empno AS a, hrpersnl.p_jobtitle AS b INTO abra2wfs
    FROM hrpersnl
    WHERE (((Left([hrpersnl].[p_empno],1))<>'A' And (Left([hrpersnl].[p_empno],1))<>'V') AND ((hrpersnl.p_active)<>'T' And (hrpersnl.p_active)<>'N')); 
```

它可以很好地获取我需要的数据，但是当我尝试对行进行排序时，我得到一个“查询中的语法错误”。现在，如果我采用上面的代码并将其更改为：

```
 SELECT hrpersnl.p_empno AS a, hrpersnl.p_jobtitle AS b
FROM hrpersnl
WHERE (((Left([hrpersnl].[p_empno],1))<>'A' And (Left([hrpersnl].[p_empno],1))<>'V') AND ((hrpersnl.p_active)<>'T' And (hrpersnl.p_active)<>'N')); 
```

我得到相同的输出，我还可以对两行进行排序，而不会出现前面提到的任何语法错误。

我的 INTO 命令正确吗？因为在我看来，这似乎是导致错误的原因。

**编辑**：这个查询应该做的是，获取我们数据库中所有处于活动状态的员工，并显示他们的员工编号和职位。

# opencv - 通过边缘（或角）匹配识别对象？

> ID：11695726
> 
> 赞同：0
> 
> 时间：2012-07-27T21:13:39.853
> 
> 标签：opencv, object-recognition

为了学术目的，我想开发一个使用（除其他外）**边缘或角落**匹配的对象识别系统。

基本上我在我的模型图像上提取角信息，然后我尝试使用角信息在查询图像中找到这个对象。

你在 OpenCV 中有什么提示吗？

附言。我知道我可以使用 SIFT/SURF/ORB 但在这种情况下我需要匹配角或边缘

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:19:38.047

[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)（轮廓匹配）呢？查看[matchShapes](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#matchShapes)函数。

# ruby - XPATH 索引不同？

> ID：11695729
> 
> 赞同：0
> 
> 时间：2012-07-27T21:14:03.097
> 
> 标签：ruby, xpath, nokogiri, mechanize

我在 Ruby 上使用 Mechanize，并在我的 Ruby 控制台中注意到以下内容：

```
1.9.3p194 :188 > testpage = Mechanize.new.get "http://www.sis.umd.edu/bin/soc?term=201208&crs=AGNR"
...
1.9.3p194 :184 > testpage.search("font[@face='arial,helvetica']").last.search("b[2]").text
 => "" 
1.9.3p194 :185 > testpage.search("font[@face='arial,helvetica']").last.search("b")[1].text
 => "Special Problems:\nSpecial Problems;" 
```

为什么访问`b`XPATH 中的第二个元素会产生不同的结果，而不是访问返回的所有 Nokogiri`b`元素的第二个元素会产生不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:22:46.300

`search("b[2]")`表示相对于其父元素`b`的第二个元素。`b`它将是一个 NodeSet，它可能有多个元素。

`search("b")[1]``b`表示它找到的第二个。它将是 Node 或 nil。

# visual-studio-2010 - VS2010中各种命令shell有什么区别？

> ID：11695736
> 
> 赞同：6
> 
> 时间：2012-07-27T21:14:46.077
> 
> 标签：visual-studio-2010, shell

开始按钮的 Visual Studio 2010 菜单中出现的“visual studio x64 win64 命令提示符”、“visual studio x64 跨工具命令提示符”和“visual studio 命令提示符”有什么区别？

对于最有用的答案，让我们明确一下我的无知程度：在任何微软或 IDE 上，我更接近新手而不是大师。Linux 长期专家，在纯文本编辑器中编辑源代码，手工制作 Makefile 等。

我确信这些差异很简单，对于在 VS2010 有一定经验的人来说可能是“显而易见的”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:22:47.837

不同的批处理文件调整，，，`PATH`以便您可以轻松运行和其他构建工具。`LIB``INCLUDE``LIBPATH``cl.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T17:51:54.117

这个答案主要集中在VS2013上。微软的文档[http://msdn.microsoft.com/en-us/library/ms229859%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms229859%28v=vs.110%29.aspx)指出：

> 从 Visual Studio 2010 开始，您可能会看到多个命令提示符，具体取决于 Visual Studio 的版本和您安装的任何其他 SDK。例如，64 位版本的 Visual Studio 提供 32 位和 64 位命令提示符。（大多数工具的 32 位和 64 位版本是相同的；但是，少数工具会针对 32 位和 64 位环境进行特定的更改。）

它补充说，相当*无益*：

> 检查各个工具的文档以确定您应该使用哪个版本的命令提示符。

该页面[http://msdn.microsoft.com/en-us/library/jj153218.aspx](http://msdn.microsoft.com/en-us/library/jj153218.aspx)列出了五个这样的命令提示符：

> *   VS2013 的开发者命令提示符
> *   VS2013 ARM Cross Tools 命令提示符
> *   VS2013 x64 跨工具命令提示符
> *   VS2013 x64 原生工具命令提示符
> *   VS2013 x86 原生工具命令提示符

在我的机器上，只有第 1 个、第 3 个和第 5 个存在，它们分别启动：

%comspec% /k ""C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\Tools\VsDevCmd.bat"" %comspec% /k ""C:\Program Files (x86)\Microsoft Visual Studio 12.0 \VC\vcvarsall.bat"" x86_amd64 %comspec% /k ""C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\vcvarsall.bat"" x86

要检查环境变量，`set`对第一个和“x86 Native”shell 运行命令会在我的机器上给出*相同的结果。*而 mmohamad 的回答 tp [Difference between VsDevCmd.bat & vcvarsall.bat in VS2012](https://stackoverflow.com/questions/13774375/difference-between-vsdevcmd-bat-vcvarsall-bat-in-vs2012)同意这一点。

但是“x64 Cross”不同：不同之处在于（不包括`Path`并`LIBPATH`为简洁起见）：

```
 + CommandPromptType=Cross
 + FrameworkDIR64=C:\WINDOWS\Microsoft.NET\Framework64
 + FrameworkVersion64=v4.0.30319
 + Platform=x64
 - LIB=C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\LIB;C:\Program Files (x86)\Windows Kits\8.1\lib\winv6.3\um\x86;
 + LIB=C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\LIB\amd64;C:\Program Files (x86)\Windows Kits\8.1\lib\winv6.3\um\x64; 
```

# asp.net - ASP.NET 中的 URL 重写将 http://example.com/abcd 转换为 http://example.com/page.aspx?id=abcd

> ID：11695738
> 
> 赞同：0
> 
> 时间：2012-07-27T21:15:08.600
> 
> 标签：asp.net

我的 Web 表单 ASP.NET 应用程序出现问题，我想从该应用程序中重写 url

[http://example.com/abcd](http://example.com/abcd)

进入

[http://example.com/page.aspx?id=abcd](http://example.com/page.aspx?id=abcd)

*   **abcd**部分将是唯一的，我无法为其创建文件夹
*   我希望用户始终看到**[http://example.com/abcd](http://example.com/abcd)**网址
*   Windows Azure 中的解决方案是否相同？

有人可以帮我一些提示吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:27:40.977

在您的 web.config 中，在 system.webServer 部分中放置如下内容：

```
<!-- This has been added to support url rewriting for ... -->
<rewrite>
  <rules>
    <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
      <match url="^Page\.aspx$" />
      <conditions>
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        <add input="{QUERY_STRING}" pattern="^id=([a-zA-Z]+)$" />
      </conditions>
      <action type="Redirect" url="{C:1}" appendQueryString="false" />
    </rule>
    <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
      <match url="^([a-zA-Z]+)$" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      </conditions>
      <action type="Rewrite" url="Page.aspx?id={R:1}" />
    </rule>
  </rules>
</rewrite> 
```

请注意，我已从生产站点中的配置中复制并进行了一些修改……需要测试。

当您只有单词 ([a-zA-Z]+) 时，配置应该可以工作，更改模式以使其适用于数字。

希望能帮助到你

# node.js - 在 Windows 上安装节点检查器

> ID：11695739
> 
> 赞同：2
> 
> 时间：2012-07-27T21:15:12.910
> 
> 标签：node.js, npm, node-inspector

当我运行 npm install node-inspector 时，我得到以下信息：

```
....

GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.8
npm http 304 https://registry.npmjs.org/redis/0.7.2
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/formidable
npm http 304 https://registry.npmjs.org/mime
npm http 304 https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/hiredis
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/xmlhttprequest/1.2.2
npm http GET https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/hiredis

> hiredis@0.1.14 preinstall C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\redis\node_modules\hiredis
> make || gmake

npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.2.2
'make' is not recognized as an internal or external command,
operable program or batch file.
'gmake' is not recognized as an internal or external command,
operable program or batch file.
npm ERR! error installing hiredis@0.1.14
npm ERR! error installing redis@0.7.2
npm ERR! error installing socket.io@0.9.8
npm ERR! error rolling back socket.io@0.9.8 Error: UNKNOWN, unknown error 'C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.io-client'
npm ERR! error installing node-inspector@0.2.0beta3

npm ERR! Error: ENOENT, no such file or directory 'C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.io-client\node_modules\___ws.npm\p
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR!
npm ERR! System Windows_NT 6.1.7601
npm ERR! command "c:\\Program Files (x86)\\nodejs\\\\node.exe" "c:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "node-inspector"
npm ERR! cwd C:\apache\expTest
npm ERR! node -v v0.6.11
npm ERR! npm -v 1.1.1
npm ERR! path C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.io-client\node_modules\___ws.npm\package\lib\Validation.fallback.js
npm ERR! fstream_path C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.io-client\node_modules\___ws.npm\package\lib\Validation.fallbac
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! message ENOENT, no such file or directory 'C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.io-client\node_modules\___ws.npm\
npm ERR! errno {}
npm ERR! fstream_stack Object.oncomplete (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\fstream\lib\writer.js:204:26)
npm ERR! error rolling back node-inspector@0.2.0beta3 Error: UNKNOWN, unknown error 'C:\apache\expTest\node_modules\node-inspector\node_modules\socket.io\node_modules\socket.

npm ERR! hiredis@0.1.14 preinstall: `make || gmake`
npm ERR! `cmd "/c" "make || gmake"` failed with 1
npm ERR!
npm ERR! Failed at the hiredis@0.1.14 preinstall script.
npm ERR! This is most likely a problem with the hiredis package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     make || gmake
npm ERR! You can get their info via:
npm ERR!     npm owner ls hiredis
npm ERR! There is likely additional logging output above.
npm ERR!
npm ERR! System Windows_NT 6.1.7601
npm ERR! command "c:\\Program Files (x86)\\nodejs\\\\node.exe" "c:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "node-inspector"
npm ERR! cwd C:\apache\expTest
npm ERR! node -v v0.6.11
npm ERR! npm -v 1.1.1
npm ERR! code ELIFECYCLE
npm ERR! message hiredis@0.1.14 preinstall: `make || gmake`
npm ERR! message `cmd "/c" "make || gmake"` failed with 1
npm ERR! errno {}
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\apache\expTest\npm-debug.log
npm not ok 
```

* * *

看起来它正试图在hiredis 上运行nix 命令，但失败了，导致整个安装崩溃。有没有办法解决这个问题？我听说很多 Windows 用户使用 node-inspector，但也许这是对较新版本的依赖。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:48:00.483

正如 M. Laing 所说，您缺少 GNU make，这是hiredis（redis 连接器）所需的。

节点检查器不需要 redis，但 socket.io 需要它，即使它是一个完全可选的功能。我在 github 上打开了一个关于此的问题：

[https://github.com/LearnBoost/socket.io/issues/978](https://github.com/LearnBoost/socket.io/issues/978)

虽然这个问题得到解决，但这里有一个解决方法：

*   [从github](https://github.com/LearnBoost/socket.io)下载 socket.io 的 ZIP 存档并解压缩。
*   编辑`package.json`文件并从依赖项中删除 redis。
*   运行 cmd，进入文件夹并输入`npm install`.
*   再次键入`npm install node-inspector`。

由于现在已安装 socket.io，它现在应该成功了。

# jsf - JSF/PrimeFaces - 创建可重用数据表对话框的方法

> ID：11695740
> 
> 赞同：2
> 
> 时间：2012-07-27T21:15:21.310
> 
> 标签：jsf

我正在使用带有 Primefaces 的 JSF 2.0。我有一个页面，其中包含一个数据表，其中包含系统中的用户列表。每个用户都可以有一组角色，所以我想有一个按钮来选择一堆角色。我希望这是一个 ajax 选择器并且可以从其他页面重用，所以这就是我的布局。

**用户列表页面**

```
<h:form prependId="false">
<p:dataTable id="userList" var="user" value="#{userBean.users}">
    <p:column id="modelHeader">
        <f:facet name="header">
                Name
        </f:facet>
        <h:outputText value="#{user.name}" />
    </p:column>

    <p:column>
        <f:facet name="header">
                Select Roles
        </f:facet>
       <p:commandButton id="selectButton" oncomplete="roleDialog.show()" icon="ui-icon-search" title="Select Roles" />               
    </p:column>

</p:dataTable>
</h:form> 
```

**在用户列表页面中定义的对话框，但内容将被移动到包含以提高可重用性**

```
<p:dialog header="Roles" widgetVar="roleDialog" resizable="true" id="roleDialog" modal="true">

    <h:form prependId="false">
    <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">

    <p:dataTable id="roleList" var="user" value="#{roleBean.roles}">
    <p:column id="modelHeader">
        <f:facet name="header">
                Name
        </f:facet>
        <h:outputText value="#{role.name}" />
    </p:column>

    <p:commandButton id="selectButton" actionListener="#{roleBean.selectRoles}" title="Select Roles" />               

    </h:panelGrid>
    </h:form>
</p:dialog> 
```

我的问题是，我不确定如何实现以下目标。

*   我想在对话框中呈现内容之前将参数作为标准传递给角色选择器。我可以通过 f:setPropertyActionListener 来做到这一点。对吗？
*   选择角色后，我想将选定的 id 传递回用户列表页面。我可以通过 addCallbackParam 做到这一点，对吗？
*   然后我想将该值传递回 userList bean 到动作侦听器以将此角色与用户相关联

在 JSF 中实现此工作流的最佳模式是什么。我不想在每个页面中复制我的角色选择器，因为我想重复使用它。感谢您耐心阅读这篇长文。感谢您的回复和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T11:31:27.683

最好的模式是实现一个[复合组件](http://docs.oracle.com/javaee/6/tutorial/doc/giqzr.html)。

# ios - ios - newbie trying to declare a method taking a string parameter and getting syntax error

> ID：11695747
> 
> 赞同：0
> 
> 时间：2012-07-27T21:16:30.933
> 
> 标签：ios, ios5

I am trying to declare a function in my .h file that looks like this:

```
-(*NSString) encode: (NSString*) unencodedString; 
```

and I get a syntax error:

```
expected a type 
```

Here is my .m header for this function:

```
- (NSString*)encode: (NSString*) unencodedString 
```

and here is how I am trying to call it:

```
EncodingUtil *encode_object = [[EncodingUtil alloc] init];
NSString *encoded_company_name = [encode_object encode: name]; 
```

Could someone please help me understand what I am doing wrong and how to fix it?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:18:15.790

Your return type says `(*NSString)`. That's completely backwards. You want `(NSString*)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:20:36.043

Of course it does (and you should really learn C first, you'll get lost in Obj-C if you don't even know how to declare a pointer type!). What you presumably wanted to write is

```
- (NSString *)encode:(NSString *)unencodedString; 
```

# entity-framework - How many nested projections can be used with .Include()?

> ID：11695748
> 
> 赞同：1
> 
> 时间：2012-07-27T21:16:43.280
> 
> 标签：entity-framework, include

How many nested projections can be used with .Include() in the Entity Framework?

For example:

Class A has a List of Class B's, which has a list of Class C's, which has a list of Class D's, etc.

```
query.Include( a => a.BList.Select( b => b.Clist.Select( c => c.DList.Select(...) ) ) ); 
```

How far can these go?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:18:23.383

They can go as far as you want. There is no programmatic limit, but I'm sure you would deplete some resource after a ridiculous amount of inclusions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:23:46.283

**MSSQL - As Many as you want**

You can have as many nested projections as you wish when using Entity Framework with a MSSQL database. The query is formed by the `System.Data.SqlClient` when using MSSQL.

* * *

**MySQL - Only 2**

However, you can only use 2 projections before you begin to receive logical errors when using Entity Framework *with MySQL*. The MySql provider `MySql.Data.MySqlClient` has a ***[`bug`](http://bugs.mysql.com/bug.php?id=67183)*** where it will begin to produce failed joins after two projections. This bug was posted to Oracle, but never fixed.

# objective-c - 核心数据数据库价值生命周期

> ID：11695750
> 
> 赞同：0
> 
> 时间：2012-07-27T21:17:07.667
> 
> 标签：objective-c, core-data

正在使用核心数据开发应用程序。每次我从模拟器中删除应用程序时，使用核心数据插入的所有数据都会被删除。这是否意味着当我发布我的应用程序时，我的数据库将为空？我希望数据库在我发布它或将它安装到另一个设备时具有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:24:43.287

您可以创建一个数据库并将其打包到您的应用程序包中以进行分发。然后，每当您的应用程序启动时，在使用任何数据之前，它都可以检查工作目录中是否存在数据库副本。如果没有，它应该复制打包的。

# objective-c - 我可以在 UITableView 的allowMultipleSelectionDuringEditing 设置为YES 的情况下使用自定义复选标记吗？

> ID：11695753
> 
> 赞同：3
> 
> 时间：2012-07-27T21:17:24.213
> 
> 标签：objective-c, cocoa-touch, ios5, uitableview

一张图抵得上一千个字……

![在此处输入图像描述](../Images/0d05ca02818443e93cb426029b1d20d1.png)

对于更多背景知识，我有一个利用 iOS 5 的 UITableView`allowsMultipleSelectionDuringEditing`设置为`YES`. 这会导致在单元格处于编辑模式时，单元格左侧会显示空的和​​填充的编辑控件。这种行为正是我想要的。我只想更改这些复选标记的外观。

我知道可以编写自定义选择逻辑并基本上推出我自己的版本（如[this](http://cocoawithlove.com/2009/01/multiple-row-selection-and-editing-in.html)和[this](http://iphonedevelopment.blogspot.com/2008/10/table-view-multi-row-edit-mode.html)），但这是我想要避免的。该系统已经到位，我想尽可能多地重复使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:17:24.213

这是我最近的一次。它简单且有效，同时重用几乎所有预烘焙系统。然而，这也是一个巨大的 hack，并且依赖于`UITableViewCell`在一点运行时内省之后利用未记录的视图层次结构。

简而言之，这只是隐藏了通常负责显示复选标记的视图，允许我添加可以在其位置显示的自己的视图。然后，当单元格的选择或编辑状态发生变化时，我可以操纵这个替代视图......

为了防止出现标准复选标记，只需要自定义`-layoutSubviews`实现即可。根据文档，在`-willTransitionToState:`and之后调用它，确保状态在or更改`-setEditing:animated:`时始终有效。`isSelected``isEditing`

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    // Find the offending view, and quietly bury it...
    for (UIView* subview in [self subviews])
    {
        // As determined by NSLogging every subview's class, and guessing which was the one I wanted
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"])
        {
            [subview setHidden:YES];
        }
    }

    if ([self isEditing])
    {
        // Show the custom view however you want. 
        // The value of [self isSelected] will be useful...
    }
    else
    {
        // Hide the custom view.
    }
} 
```

我仍然会欢迎一个更...犹太洁食的解决方案。

# opengl - OpenGL等图形库的目的是什么？

> ID：11695756
> 
> 赞同：21
> 
> 时间：2012-07-27T21:17:28.740
> 
> 标签：opengl, graphics, direct3d

我意识到这可能是一个荒谬的问题，但在试图弄清楚哪些库用于哪些项目之前，我认为首先真正理解这些库的目的是有意义的。

许多视频游戏使用 OpenGL 之类的库。我见过的所有关于此类库的教程都演示了如何编写代码来告诉计算机绘制一些东西。问题是，如今在游戏中，一切都是使用 Zbrush、Maya 或 3ds Max 等软件建模的。这些模型有纹理，很容易上手。似乎您需要做的就是编写一个动画循环来重复绘制模型和更新，而不是实际编写代码来绘制每一件小事。这将非常耗时，并且会使模型无用。那么 OpenGL 或 Direct 3D 与视频游戏和 3d 艺术有什么关系呢？当所有图形都已经创建并且只需要加载和绘制时，它们有什么如此重要？它们主要用于着色器和效果吗？

这个问题可能只是证明我对此有多么陌生，但这是我从未听说过的问题。我刚刚开始学习编程，我对代码和逻辑的理解还不错，但是我根本不了解图形库或某些框架，教程也无济于事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T21:30:44.537

> 似乎您需要做的就是编写一个动画循环来重复绘制模型和更新，而不是实际编写代码来绘制每一件小事。

计算机中发生的一切都是因为某种形式的程序准确地告诉它*要做什么*。仅显示此消息所包含的字母是因为您选择的 Web 浏览器通过 HTTP 协议通过 TCP/IP 下载了此文件，解码了其 UTF-8 编码文本，将该文本解释为 XML、HTML、JavaScript 定义的文本等标准，然后使用您的操作系统或窗口管理器或其他任何东西的显示和窗口功能，显示由文本布局的 Unicode 标准定义并符合 HTML 等的可见部分。

该操作的每个部分，从文件下载到显示，都由一段代码控制。你在屏幕上看到的每个像素都在它所在的位置，因为*有些代码*把它放在那里。

*单独*的HTML没有任何意义。您不能只获取一个 HTML 文件并将其发送到屏幕上。一些代码必须*解释*它。您可以将 HTML 解释为文本文件，但如果这样做，它会丢失所有格式，并且您可以看到所有标签。Web 浏览器可以将其解释为正确的 HTML，在这种情况下您可以看到格式。但在任何情况下，HTML 文件的含义都取决于*它的使用方式*。

您提出的算法的“绘制模型”部分必须由*某人*完成。如果您不编写该代码，那么您必须使用库或其他会导致模型出现的系统。那个图书馆是做什么的？它是如何导致模型出现的？

一个模型，就像一个 HTML 网页，*本身是没有意义的*。或者换句话说，您的算法可以归结为：

1.  动画模型。
2.  ？？？
3.  利润！

您缺少一个关键组件：如何实际解释模型并使其出现在屏幕上。OpenGL/D3D/软件光栅化器/等对于该任务至关重要。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T23:02:22.177

> 许多视频游戏使用 OpenGL 之类的库。

首先也是最重要的：OpenGL 本身不是一个库，而是一个 API（规范）。OpenGL API 可以以软件库的形式实现，但现在更常见的是以驱动程序的形式实现 OpenGL，该驱动程序将 OpenGL 函数调用转换为对位于图形卡 (GPU) 上的图形处理器的控制命令。

> 我见过的所有关于此类库的教程都演示了如何编写代码来告诉计算机绘制一些东西。

是的。这是因为需要绘制东西才能使用它们。

> 问题是，如今在游戏中，一切都是使用 Zbrush、Maya 或 3ds Max 等软件建模的。

在这一点上，模型只包含一大串数字，以及更多的数字，说明其他数字如何形成某种几何形状。这些数字不是某种即用型图像。

> 这些模型有纹理，很容易上手。

它们是一堆数字，它们有一些额外的数字来控制纹理。纹理本身又只是数字。

> 似乎您需要做的就是编写一个**绘制模型的动画循环**

你认为这幅画会如何发生？没有神奇的“这里有一个模型，展示它”功能。因为组成模型的数字可能具有任何意义。所以一些程序必须赋予这些数字意义。那是一个渲染器。

> 并反复更新，而不是实际编写代码来绘制每一件小事。

同样，没有神奇的“绘制它”功能。绘制模型涉及遍历它的每个数字，它由这些数字组成，并将其转换为 GPU 的绘图命令。

> 这将非常耗时，并且会使模型无用。

当它们控制向 OpenGL 发出命令时，模型是如何无用的。还是您认为 OpenGL 用于实际“创建”模型？

> 那么 OpenGL 或 Direct 3D 与视频游戏和 3d 艺术有什么关系呢？

它用于将 3D 模型的数字（因为它从建模者那里保存下来）变成令人愉悦的东西。

> 当所有图形都已经创建时，它们的关键是什么

模型完成后，图形尚未创建。创建的是模型，以及一些纹理和着色器形式的辅助数据，然后在程序执行时实时转换为图形。

> 只需要加载和绘制？

同样，加载后，模型只是一堆数字。绘图意味着，将这些数字变成可以查看的东西，这需要将绘图命令发送到图形处理器 (GPU)，这需要使用 OpenGL 或 Direct3D 等 API

> 它们主要用于着色器和效果吗？

它们用于将 3D 建模程序（Blender、Maya、ZBrush）生成的数字转换为实际图片。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T04:09:56.523

你有数据。像模型一样，具有顶点、法线和纹理。正如上面@datenwolf 所说，这些只是位于硬盘驱动器或 RAM 中的数字，而不是屏幕上的颜色。

您的 CPU（这是您编写的程序运行的地方）无法直接与屏幕对话。相反，您将要绘制的数据发送到 GPU。GPU 然后绘制数据。OpenGL 和 Direct3D 等图形 API 允许在 CPU 上运行的程序将数据发送到 GPU 并自定义 GPU 绘制数据的方式。这是一个粗略的简化，但听起来您只需要一个概述。

最终，每个图形程序都*必须*通过图形 API。例如，当您绘制图像时，您将图像发送给 GPU，然后 GPU 将其绘制在屏幕上。画一些文字？将数据发送到 GPU。GPU 绘制它。请记住，您的代码无法与屏幕对话。它可以通过 OpenGL 或 Direct3D 与 GPU 对话，然后 GPU 绘制数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T23:11:54.623

在 OpenGL 和 DirectX 之前，游戏必须根据您拥有的显卡使用特殊指令。当您购买新游戏时，您必须仔细检查您的卡是否支持，否则您无法使用该游戏。

OpenGL 和 DirectX 是图形卡的标准化 API。库由卡的制造商提供。如果它们遵循规范，则可以保证游戏可以正常运行（如果它们也遵循相同的规范）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-12-12T06:02:19.073

开放图形库 (OpenGL) 是一种跨语言、跨平台的应用程序编程接口 (API)，用于渲染 2D 和 3D 矢量图形。API 通常用于与图形处理单元 (GPU) 交互，以实现硬件加速渲染。

# visual-studio-2010 - 在 Visual Studio 2010 中重新排列属性设置顺序

> ID：11695759
> 
> 赞同：1
> 
> 时间：2012-07-27T21:17:41.270
> 
> 标签：visual-studio-2010, settings

是否可以在 Visual Studio 2010 中重新排列设置的顺序（在项目的项目/属性中），然后是设置选项卡。

我只能找到添加、删除和编辑选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:10:32.643

您可以手动重新排列设置。
按照这个链接 - [http://ppe.blogs.msdn.com/b/zainnab/archive/2010/11/27/change-the-order-of-your-application-settings-vstipproj0024.aspx](http://ppe.blogs.msdn.com/b/zainnab/archive/2010/11/27/change-the-order-of-your-application-settings-vstipproj0024.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:25:06.203

您可以通过单击设置名称列顶部的“名称”标签进行升序或降序排序。否则，没有。我不认为顺序在设置屏幕上非常相关。也就是说，如果您有很多设置条目，您可以仔细命名您的设置，以便更轻松地浏览列表。

# java - 使用树形图按值降序排序

> ID：11695764
> 
> 赞同：0
> 
> 时间：2012-07-27T21:17:59.080
> 
> 标签：java, tree, hashmap, treemap

我在下面只有一个地图实现来按降序对值进行排序，并且我使用了下面的实现。

```
public static Map<String,Integer> sortByComparator(Map<String,Integer> unsortMap) {

    List list = new LinkedList(unsortMap.entrySet());

    //sort list based on comparator
    Collections.sort(list, new Comparator() {
        public int compare(Object o1, Object o2) {
            return ((Comparable) ((Map.Entry) (o2)).getValue())
                    .compareTo(((Map.Entry) (o1)).getValue());
        }
    });

    //put sorted list into map again
    Map sortedMap = new LinkedHashMap();
    for (Iterator it = list.iterator(); it.hasNext();) {
        Map.Entry entry = (Map.Entry)it.next();
        sortedMap.put(entry.getKey(), entry.getValue());
    }
    return sortedMap;
} 
```

这完成了必要的功能..但我很想知道我是否能够使用树形图按降序排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:20:52.360

您不会，因为 TreeMap 是按键顺序排序的，而您是按值排序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:21:31.337

不，[Treemap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html)排序顺序是基于键的。所有其他排序要求必须像您一样实施。

# r - 将向量列表排序到具有因子列的单个频率表中

> ID：11695768
> 
> 赞同：1
> 
> 时间：2012-07-27T21:18:15.940
> 
> 标签：r

我有一个数据框，其中包含一个带有锯齿状条目的列表向量：

```
df = data.frame(x = rep(c(1,2), 2), y = rep(c("a", "b"), each = 2))

L = list()
for (each in round(runif(4, 1,5))) L = c(L, list(1:each))
df$L = L 
```

例如，

```
x y          L
1 a          1
2 a 1, 2, 3, 4
1 b    1, 2, 3
2 b    1, 2, 3 
```

我如何创建一个表格来计算每个 x 的 L 值，跨越 y 的值？所以，在这个例子中，它会输出类似的东西，

```
 1   2   3   4
X
1   2   1   1   0
2   2   2   2   1 
```

我有一些运气使用

```
tablist = function(L) table(unlist(L))
tapply(df$L, df$x, tablist) 
```

产生，

```
$`1`

1 2 3 
2 1 1 

$`2`

1 2 3 4 
2 2 2 1 
```

但是，我不确定如何从这里转到一张桌子。此外，我开始怀疑这种方法可能会开始花费大量时间来处理大型数据帧。任何想法/建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:52:13.967

使用`pylr`

```
library(plyr)
df = data.frame(x = rep(c(1,2), 2), y = rep(c("a", "b"), each = 2))

L = list()
set.seed(2)
for (each in round(runif(4, 1,5))) L = c(L, list(1:each))
df$L = L

> df
  x y          L
1 1 a       1, 2
2 2 a 1, 2, 3, 4
3 1 b    1, 2, 3
4 2 b       1, 2

table(ddply(df,.(x),summarize,unlist(L)))
>     table(ddply(df,.(x),summarize,unlist(L)))
   ..1
x   1 2 3 4
  1 2 2 1 0
  2 2 2 1 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:06:46.820

如果你不喜欢 plyr...

```
vals <- unique(unlist(df$L))
names(vals) <- vals
do.call("rbind",
    lapply(split(df,df$x),function(byx){
        sapply(vals, function(i){
            sum(unlist(sapply(byx$L,"==",i)))
        })
    })
) 
```

# erlang - 为什么这个 erlang tftpd 服务器似乎不接受客户端请求？

> ID：11695771
> 
> 赞同：0
> 
> 时间：2012-07-27T21:18:18.727
> 
> 标签：erlang, tftp

我正在尝试使用 inet 的 tftp，但我做错了一些事情。[这个简单的示例应用程序](https://github.com/blt/tftp-problems)虽然绑定到正确的端口，但从不向客户端返回数据。

要重现，请在项目根目录中打开一个终端，然后：

```
make && ./bin/console 
```

这应该会启动 tftp_hellp 应用程序，并将您放入 erlang shell。确认 inets 正在运行：

```
1> application:which_applications().
[{inets,"INETS  CXC 138 49","5.9"},
 {sasl,"SASL  CXC 138 11","2.2.1"},
 {stdlib,"ERTS  CXC 138 10","1.18.1"},
 {kernel,"ERTS  CXC 138 10","2.15.1"}] 
```

并且 tftp 守护进程正在运行：

```
2> inets:services().
[{tftpd,<0.56.0>},{httpc,<0.50.0>}] 
```

伟大的。现在，如果您查看，`etc/inets.config`您会注意到我们将 tftpd 绑定到 6969。打开另一个终端并：

```
> tftp localhost 6969
tftp> get hello.txt
Transfer timed out. 
```

打扰。如果我对 tftpd 的理解是正确的——显然不是——我们会`<<"hello world">>`回来的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:44:45.443

我最初收到了同样的错误，但后来检查了我的防火墙设置以允许 udp/6969 并获得了文件：

`-> % tftp localhost 6969`

 `tftp> get hello.txt

Received 11 bytes in 0.0 seconds

tftp> quit

-> % cat hello.txt` 

`hello world%`

# android - How do I create a shadow class to work around crashes related to custom attributes when testing an Android app with Robolectric?

> ID：11695774
> 
> 赞同：10
> 
> 时间：2012-07-27T21:18:24.603
> 
> 标签：android, unit-testing, robolectric

I'm integrating [a custom widget](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/) into my project. It uses custom attributes and is crashing Robolectric. From what I gather, [custom attributes aren't supported yet](https://github.com/pivotal/robolectric/issues/285#issuecomment-7315793). Note: the constructor is "hostile" because it throws exceptions on construction, but I've commented them out for now.

**Crash Log**

> java.lang.RuntimeException: error inflating layout/main at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:106) at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82) at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86) at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:377) at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43) at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48) at android.view.LayoutInflater.inflate(LayoutInflater.java) at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:101) at android.app.Activity.setContentView(Activity.java) at com.blah.MainActivity.onCreate(MainActivity.java:17) at com.blah.MainActivityTest.setUp(MainActivityTest.java:29) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
> 
> Caused by: java.lang.ClassCastException: com.blah.support.shadows.ShadowMultiDirectionSlidingDrawer cannot be cast to com.xtremelabs.robolectric.shadows.ShadowView at com.xtremelabs.robolectric.Robolectric.shadowOf(Robolectric.java:857) at com.xtremelabs.robolectric.shadows.ShadowViewGroup.addView(ShadowViewGroup.java:70) at android.view.ViewGroup.addView(ViewGroup.java) at com.xtremelabs.robolectric.shadows.ShadowViewGroup.addView(ShadowViewGroup.java:60) at android.view.ViewGroup.addView(ViewGroup.java) at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.addToParent(ViewLoader.java:217) at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.create(ViewLoader.java:180) at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:150) at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:153) at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:102) ... 29 more

I'm trying to work around this issue, because I don't care too much about testing this widget. Basically I want my tests not to crash and to verify that the view element is appearing on the screen.

Someone suggested [a hack of placing the java file in a android package](https://stackoverflow.com/questions/7250086/how-does-exactly-custom-shadow-objects-work-in-robolectric), but I'm not sure if it applies in my case. As suggested by this answer, the custom widget lives in package "android" which is parallel to my com.blah structure.

I created a shadow of the widget to get around the hostility issue (but currently I just comment out the exception throwing). Originally I wanted to bypass the work that was being done in the constructor since it relies on attributes that Robolectric isn't reporting correctly. The shadow constructor is getting called, but it continues through normal constructor execution. Is there a way to bypass additional construction?

**ShadowClass**

```
@Implements (MultiDirectionSlidingDrawer.class)
public class ShadowMultiDirectionSlidingDrawer
{
    public void __constructor__( Context context, AttributeSet attrs )
    {
    }

    public void __constructor__( Context context, AttributeSet attrs, int defStyle )
    {
    }
} 
```

**Custom Test Runner**

```
public class CustomTestRunner extends RobolectricTestRunner 
{
    public CustomTestRunner( Class<?> testClass ) throws InitializationError
    {
        super( testClass );
        addClassOrPackageToInstrument("android");
    }

    @Override
    protected void bindShadowClasses()
    {
        super.bindShadowClasses();
        Robolectric.bindShadowClass( ShadowMultiDirectionSlidingDrawer.class );
    }
} 
```

Is this the right approach to work around the crashes until the testing framework supports this? Am I doing something wrong with my shadow or am I missing something else?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:23:32.723

So I solved this a simple way. Instead of inflating the view as part of my main.xml, I put it in a separate layout file. In my Activity's constructor, I inflated the layout in a protected function. In my test class, I extended the class under test and instead of inflating the view element, I used a boolean to track that the functions as called.

**MainActivity.java**

```
public class MainActivity extends FragmentActivity
{
    @Override
    public void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );
        setContentView( R.layout.main );
        addOptionsShade();
    }

    protected void addOptionsShade()
    {
        ViewGroup viewGroup = (ViewGroup) findViewById( R.id.main_view );
        View view = getLayoutInflater().inflate( R.layout.options_shade, null );
        viewGroup.addView( view );
    }
} 
```

**MainActivityTest.java**

```
@Test
public void shouldHaveOptionsShade() throws Exception
{
    assertTrue( mainActivity.hostileLibraryWasCalled );
}

class TestMainActivity extends MainActivity
{
    boolean hostileLibraryWasCalled = false;

    @Override
    protected void addOptionsShade()
    {
        hostileLibraryWasCalled = true;
    }
} 
```

I removed the shadow class & bindings and put the library back in a sensible place (not in android package).

# c - 在C中连接路径和变量

> ID：11695781
> 
> 赞同：2
> 
> 时间：2012-07-27T21:19:23.790
> 
> 标签：c

这是我的代码。我需要用这种格式创建 10 个文件：

0.txt
1.txt
...

但我做不到，结果不一样。任何人都可以帮忙吗？

```
#include <stdlib.h>
#include <string.h>

char* direccion(char *dirD,int number){
    char buffer[100];
    char *n;
    char *q;
    char* formato=".txt";

    sprintf(buffer, "%i", number);
    n= strcat(dirD,buffer);
    q= strcat(n,formato);

    return q;

}
int main(){
    int u;
    int number= 0;
    int t= 0;
    char* q = "e:/c9/";
    for(t=0; t< 10 ; t++){

        char* dir = direccion(q,number);

            if(fopen(dir,"w")){
                fopen(dir,"w");
                u=1;
            }
            else{
                u=0;
                printf("Error\n");
            }
        number++;

    }
    return 0;
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:24:17.177

问题 1\. 是：

```
char *q = "e:/c9/";
for(t = 0; t < 10; t++)
{
    char *dir = direccion(q, number);
} 
```

变量 q 是一个字符串文字。然而，在函数`direccion()`中，你将它作为第一个参数传递给`strcat()`，它试图修改它——BOOM，一个段错误。解决方案：

```
char buf[1000];
strcpy(buf, "e:/c9/");
char *dir = direccion(buf, number); 
```

问题#2 正如@Charlie Martin 指出的那样，您返回一个~~静态~~自动分配的本地字符串，该字符串在`direccion()`函数返回后无效。也许

```
return strdup(buffer); 
```

在这种情况下; 使用后不要忘记释放它。

编辑：似乎你甚至不问这个。`open()`您可以使用系统调用（函数）创建文件：

```
#include <fcntl.h>
#include <stdio.h>

int fd = open("file.txt", O_RDWR | O_CREAT, 0644);
close(fd); 
```

当然，将您想要的实际文件模式替换为 0644（但不要使文件可执行，除非它包含要执行的程序）。

编辑2：我什至没有抓住这个......所以，在for循环中，你想一遍又一遍地重置基本文件名：

```
for (yadda yadda)
{
    strcpy(buf, "e:/c9/");
    char *dir = direccion(buf, i);
} 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:21:23.093

您在函数内部自动分配缓冲区，这意味着它是在堆栈上分配的。当您返回时，该记忆不再有效。您想在*调用者*中分配缓冲区并将指针传递给它，或者将其分配为静态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:59:38.390

Windows 有一系列路径处理函数，您可以使用它们来执行诸如向路径添加扩展名之类的操作。例如：

```
PathAddExtension(buffer,".txt"); 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559(v=vs.85).aspx)

此外，在处理路径时使用 _MAX_PATH 大小的缓冲区也是一个好主意。

# c# - 绑定gridview行上的每个项目

> ID：11695784
> 
> 赞同：1
> 
> 时间：2012-07-27T21:19:33.257
> 
> 标签：c#, wpf, binding, commandparameter

假设我有一个 XAML 标记，如下所示。如何将按钮的命令参数绑定到每一行。请显示最合适的绑定表达式。

```
<ListView ItemsSource="{Binding Items}">
  <ListView.View>
    <GridView>
      <GridViewColumn Header="Items" Width="Auto">
        <GridViewColumn.CellTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Path=Name, Mode=OneWay}"/>
          </DataTemplate>
        </GridViewColumn.CellTemplate>
      </GridViewColumn>
    <GridViewColumn Header="" Width="Auto">
      <GridViewColumn.CellTemplate>
        <DataTemplate>
          <Button MinWidth="100" Command="{Binding DeleteCommand}" CommandParameter="{Binding <EXPRESSION>}" >Delete</Button>
        </DataTemplate>
      </GridViewColumn.CellTemplate>
    </GridViewColumn>
  <ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:05:02.113

这行得通。

```
CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type GridViewRowPresenter}}, Path=DataContext}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T09:16:35.203

我讨厌 WPF。

**创建自引用属性**

将此属性添加到绑定的数据模型类：

```
public class MyDataObjectItem
{
    //...
    public MyDataObjectItem Self { get { return this; } }
    //...
} 
```

那么命令参数就很简单了：

```
CommandParameter="{Binding Self}" 
```

**或者，显然这有效**

```
CommandParameter="{Binding}" 
```

见[https://stackoverflow.com/a/11287478/887092](https://stackoverflow.com/a/11287478/887092)

# arrays - 以八度为单位的数组部分的平均值

> ID：11695785
> 
> 赞同：2
> 
> 时间：2012-07-27T21:19:36.723
> 
> 标签：arrays, matlab, octave, vectorization, mean

我有两个数组。一个是另一个中的长度列表。例如

```
zarray = [1 2 3 4 5 6 7 8 9 10] 
```

和

```
lengths = [1 3 2 1 3] 
```

我想对具有第二个给定长度的第一个数组的部分进行平均（平均值）。对于此示例，导致：

```
[mean([1]),mean([2,3,4]),mean([5,6]),mean([7]),mean([8,9,10])] 
```

为了速度，我试图避免循环。我尝试使用 mat2cell 和 cellfun 如下

```
zcell = mat2cell(zarray,[1],lengths);
zcellsum = cellfun('mean',zcell); 
```

但是 cellfun 部分*非常*缓慢。有没有办法在没有循环或 cellfun 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:39:13.537

这是一个完全矢量化的解决方案（没有显式的 for 循环，或带有 ARRAYFUN、CELLFUN 的隐藏循环……）。这个想法是使用极快的[ACCUMARRAY](http://www.mathworks.com/help/techdoc/ref/accumarray.html)函数：

```
%# data
zarray = [1 2 3 4 5 6 7 8 9 10];
lengths = [1 3 2 1 3];

%# generate subscripts: 1 2 2 2 3 3 4 5 5 5
endLocs = cumsum(lengths(:));
subs = zeros(endLocs(end),1);
subs([1;endLocs(1:end-1)+1]) = 1;
subs = cumsum(subs);

%# mean of each part
means = accumarray(subs, zarray) ./ lengths(:) 
```

这种情况下的结果：

```
means =
            1
            3
          5.5
            7
            9 
```

* * *

## 速度测试：

考虑以下不同方法的比较。我正在使用*Steve Eddins 的*[TIMEIT](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)函数：

 *```
function [t,v] = testMeans()
    %# generate test data
    [arr,len] = genData();

    %# define functions
    f1 = @() func1(arr,len);
    f2 = @() func2(arr,len);
    f3 = @() func3(arr,len);
    f4 = @() func4(arr,len);

    %# timeit
    t(1) = timeit( f1 );
    t(2) = timeit( f2 );
    t(3) = timeit( f3 );
    t(4) = timeit( f4 );

    %# return results to check their validity
    v{1} = f1();
    v{2} = f2();
    v{3} = f3();
    v{4} = f4();
end

function [arr,len] = genData()
    %#arr = [1 2 3 4 5 6 7 8 9 10];
    %#len = [1 3 2 1 3];

    numArr = 10000;     %# number of elements in array
    numParts = 500;     %# number of parts/regions      
    arr = rand(1,numArr);
    len = zeros(1,numParts);
    len(1:end-1) = diff(sort( randperm(numArr,numParts) ));
    len(end) = numArr - sum(len);
end

function m = func1(arr, len)
    %# @Drodbar: for-loop
    idx = 1;
    N = length(len);
    m = zeros(1,N);
    for i=1:N
        m(i) = mean( arr(idx+(0:len(i)-1)) );
        idx = idx + len(i);
    end
end

function m = func2(arr, len)
    %# @user1073959: MAT2CELL+CELLFUN
    m = cellfun(@mean, mat2cell(arr, 1, len));
end

function m = func3(arr, len)
    %# @Drodbar: ARRAYFUN+CELLFUN
    idx = arrayfun(@(a,b) a-(0:b-1), cumsum(len), len, 'UniformOutput',false);
    m = cellfun(@(a) mean(arr(a)), idx);
end

function m = func4(arr, len)
    %# @Amro: ACCUMARRAY
    endLocs = cumsum(len(:));
    subs = zeros(endLocs(end),1);
    subs([1;endLocs(1:end-1)+1]) = 1;
    subs = cumsum(subs);

    m = accumarray(subs, arr) ./ len(:);
    if isrow(len)
        m = m';
    end
end 
```

以下是时间安排。测试是在装有 MATLAB R2012a 的 WinXP 32 位机器上进行的。我的方法比所有其他方法快一个数量级。For-loop 是第二好的。

```
>> [t,v] = testMeans();
>> t
t =
   0.013098   0.013074   0.022407   0.00031807
    |           |          |          \_________ @Amro: ACCUMARRAY (!)
    |           |           \___________________ @Drodbar: ARRAYFUN+CELLFUN
    |            \______________________________ @user1073959: MAT2CELL+CELLFUN
     \__________________________________________ @Drodbar: FOR-loop 
```

此外，所有结果都是正确且相等的——差异按`eps`机器精度的顺序排列（由累积舍入误差的不同方式引起），因此被认为是垃圾并被忽略：

```
%#assert( isequal(v{:}) )
>> maxErr = max(max( diff(vertcat(v{:})) ))
maxErr =
   3.3307e-16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:40:41.703

这是使用`arrayfun`和的解决方案`cellfun`

```
zarray  = [1 2 3 4 5 6 7 8 9 10];
lengths = [1 3 2 1 3];

% Generate the indexes for the elements contained within each length specified
% subset. idx would be {[1], [4, 3, 2], [6, 5], [7], [10, 9, 8]} in this case
idx = arrayfun(@(a,b) a-(0:b-1), cumsum(lengths), lengths,'UniformOutput',false);
means = cellfun( @(a) mean(zarray(a)), idx); 
```

您想要的输出结果：

```
means =

    1.0000    3.0000    5.5000    7.0000    9.0000 
```

* * *

在@tmpearce 评论之后，我对上述解决方案进行了快速的时间性能比较，从中我创建了一个名为`subsetMeans1`

```
function means = subsetMeans1( zarray, lengths)

% Generate the indexes for the elements contained within each length specified
% subset. idx would be {[1], [4, 3, 2], [6, 5], [7], [10, 9, 8]} in this case
idx = arrayfun(@(a,b) a-(0:b-1), cumsum(lengths), lengths,'UniformOutput',false);
means = cellfun( @(a) mean(zarray(a)), idx); 
```

和一个简单的 for 循环替代方法 function `subsetMeans2`。

```
function means = subsetMeans2( zarray, lengths)

% Method based on single loop
idx = 1;
N = length(lengths);
means = zeros( 1, N);
for i = 1:N
    means(i) = mean( zarray(idx+(0:lengths(i)-1)) );
    idx = idx+lengths(i);
end 
```

使用基于[TIMEIT](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)的下一个测试脚本，它允许检查不同输入向量上的元素数量和每个子集的元素大小的性能：

```
% Generate some data for the performance test

% Total of elements on the vector to test
nVec = 100000;

% Max of elements per subset
nSubset = 5;

% Data generation aux variables
lenghtsGen = randi( nSubset, 1, nVec);
accumLen = cumsum(lenghtsGen);
maxIdx = find( accumLen < nVec, 1, 'last' );

% % Original test data
% zarray  = [1 2 3 4 5 6 7 8 9 10];
% lengths = [1 3 2 1 3];

% Vector to test
zarray = 1:nVec;
lengths = [ lenghtsGen(1:maxIdx) nVec-accumLen(maxIdx)] ;

% Double check that nVec is will be the max index
assert ( sum(lengths) == nVec)

t1(1) = timeit(@() subsetMeans1( zarray, lengths));
t1(2) = timeit(@() subsetMeans2( zarray, lengths));

fprintf('Time spent subsetMeans1: %f\n',t1(1));
fprintf('Time spent subsetMeans2: %f\n',t1(2)); 
```

`arrayfun`事实证明，没有和更快的非矢量化版本`cellfun`可能是由于这些函数的额外开销

```
Time spent subsetMeans1: 2.082457
Time spent subsetMeans2: 1.278473 
```*

# jquery - 使用 jQuery 向表单添加另一个下拉列表

> ID：11695787
> 
> 赞同：0
> 
> 时间：2012-07-27T21:19:41.300
> 
> 标签：jquery

在第一个下拉列表中选择一个选项后，我正在尝试将另一个下拉列表添加到表单中。

所以下面是表格的一部分。When the dropdown with the name is selected, in this case there are 3 classes, EDMATH 502, EDTECH 401, Math 101, I want different image IDs to appear in the next dropdown ("image_os_image_id"). 这个想法是每个类都可以访问不同的图像。

我知道这是 jquery 的工作，但我花了很长时间弄清楚如何做到这一点。我已经搜索了很多，但是由于搜索不佳或我似乎总是想出将另一个选项添加到列表中而不是添加另一个列表的事实，这让我有点受阻。

```
<div class="control-group">
    <label class="control-label" for="select01">Class</label>
    <div class="controls">
        <select id="select01" name="class_name">
            <option value='EDMATH 502'>EDMATH 502</option>
            <option value='EDTECH 401'>EDTECH 401</option>
            <option value='Math 101'>Math 101</option>
        </select>
    </div>
    <!-- class -->
</div>
<div class="control-group" </div>
    <label class="control-label" for="select01">Image</label>
    <div class="controls">
        <select id="select01" name="image_os_image_id">
            <option value='647abf63-fd95-42a7-a744-e1885f8d5c16'>photoshop</option>
            <option value='0f53de4a-1bb6-43bd-a567-fe181b25cfbe'>matlab</option>
            <option value='647abf63-fd95-42a7-a744-e1885f8d5c16'>photoshop</option>
            <option value='0f53de4a-1bb6-43bd-a567-fe181b25cfbe'>matlab</option>
        </select>
    </div>
    <!-- image -->
</div>
<!-- control group --> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:35:56.587

1.  您好，首先将您的第二个选择 ID 从“select01”更改为“select02”-ID 应该是唯一的
2.  包括jQuery
3.  添加脚本

    ```
     $(document).ready(function(){
            $('#select01').bind('change', function(){

                $('#select02 option').remove();

                switch($(this).val()) {
                case 'EDMATH 502':
                    $('#select02').append('<option value="647abf63-fd95-42a7-a744-e1885f8d5c16">photoshop</option>');
                    $('#select02').append('<option value="0f53de4a-1bb6-43bd-a567-fe181b25cfbe">matlab</option>');
                    $('#select02').append('<option value="647abf63-fd95-42a7-a744-e1885f8d5c16">photoshop</option>');
                    $('#select02').append('<option value="0f53de4a-1bb6-43bd-a567-fe181b25cfbe">matlab</option>');
                    break;
                case 'EDTECH 401':
                    $('#select02').append('<option value="test1">test1</option>');
                    $('#select02').append('<option value="test2">test11</option>');
                    break;
                case 'Math 101':
                    $('#select02').append('<option value="test2">test2</option>');
                    $('#select02').append('<option value="test22">test22</option>');
                    break;
                }

            })
        }); 
    ```

# c - 这个 sizeof 技巧在做什么？

> ID：11695794
> 
> 赞同：8
> 
> 时间：2012-07-27T21:20:06.043
> 
> 标签：c, sizeof

自从我查看 C 代码以来已经有一段时间了，但我试图确保我理解这里发生了什么。有人声明了这一点（在他们的代码中有更多成员）：

```
int trysizes[] = { 64, 64, 128, 64, }; 
```

然后他们将其用作 for 循环的一部分：

```
sizeof(trysizes)/sizeof*(trysizes) 
```

我在想第一部分是数组中的字节数，第二部分必须是每个数组成员的大小，给我们数组中的项目数。这是计算数组长度的标准方法吗？第二个 sizeof 实际在做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T21:21:26.277

是的，在修复了令人困惑的语法之后，这变成了

```
sizeof(trysizes)/sizeof(*trysizes) 
```

甚至更好

```
sizeof(trysizes)/sizeof(trysizes[0]) 
```

这是计算数组元素数量的首选方法。第二个`sizeof`确实计算了`0`数组元素的大小。

请注意，这仅在`trysizes`实际上是数组而不是指向数组的指针时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:21:48.483

你说对了。分母中的第二个`sizeof`取消引用数组的第一个元素，产生 element 的大小`0`。`sizeof`知道数组变量的总缓冲区大小 - 分子 - 所以这个习语将产生数组中元素的数量。

以我的经验，这是这个特殊习语的不常见表达，通常我见过，*我使用*：

```
sizeof(var)/sizeof(var[0]); 
```

这更清楚地将变量标识为数组而不是指针。

这是一个很常见的技巧，但请注意，它仅在变量声明为数组时才有效，例如，这不适用于已转换为作为函数参数的指针的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T03:05:19.367

关键是，在使用 sizeof 时，虽然我们主要使用`int a; sizeof(a);`，但我们也可以省略括号，如下所示：`int a; sizeof a;`
所以在这种情况下，`sizeof*(trysizes) == sizeof *trysizes == sizeof(*trysizes)`

# draggable - 如何在翻书页面中设置可拖动元素

> ID：11695797
> 
> 赞同：0
> 
> 时间：2012-07-27T21:20:28.830
> 
> 标签：draggable

我正在使用 jquery 动态翻书。我可以将便笺添加到偶数页或奇数页。此代码创建注释选择要将注释添加到哪个页面并拖动。

```
function CreatePostIt() {
                    $("#PostIt").dialog({ modal: true, autoResize: true, height: 500, width: 530,
                        open: function () {

                            $("#BookMenu").fadeOut(500);
                            BookMenuShow = false;
                            $("#pNotes").addClass("yellow");
                            $("#pNotes").removeClass("transparent");
                            $("#pNotes").removeClass("blue");
                            $("#pNotes").removeClass("green");
                            $("#note-body").text("");
                            $("#pNotes").css("font-size", $("#NoteFontSize").val());
                            color = "yellow";
                            $("#pNotes").text("");
                            if (PageIndex == 0) {
                                $("#rightTn").click();

                                $("#leftTn").attr("src", "images/blank.gif")

                                $("#rightTn").attr("src", tnNames[PageIndex]);

                            } else {
                                $("#leftTn").width(120);
                                $("#rightTn").width(120);
                                $("#leftTn").attr("src", tnNames[PageIndex - 1])
                                $("#rightTn").attr("src", tnNames[PageIndex]);
                                $("#leftTn").click();
                            }

                        },
                        buttons: {
                            "INSERT": function () {

                                var count = $(".npg" + PageSelected).length;

                                var Annotation = $("<div style='z-index:250000' class='note npg" + PageSelected + "' index='0'></div>");
                                var aId = "Page-" + PageSelected + "-Note-" + (count + 1);
                                AnnoCount = AnnoCount + 1;
                                $(Annotation).attr("id", "Page-" + PageSelected + "-Note-" + (count + 1));
                                $(Annotation).css("font-size", $("#NoteFontSize").val());
                                $(Annotation).css("display", "none");
                                $(Annotation).append("<img class='noteClose'  rel='Page-" + PageSelected + "-Note-" + (count + 1) + "' style='float:right; padding:10px 10px 5px 5px' src='images/close.gif'/>");
                                $(Annotation).append("<div style='padding:25px 25px 25px 25px;' id='noteText" + (count + 1) + "' class='noteBody'>" + $("#note-body").val() + " </div>")
                                $(Annotation).addClass("liveNote");
                                $(Annotation).addClass("npage" + PageSelected);
                                $(Annotation).addClass(color);
                                $("#pgDv" + (PageSelected)).prepend(Annotation);
                                $.cookie("Book-" + bookid + "-Page-" + PageSelected, aId + "||" + $("#note-body").val() + "||" + "0,0,0,0||" + color + "||" + $("#NoteFontSize").val() + "<*>", { expires: 365, path: "/" });

                                **if (ZoomOn != true) {
                                    if ("#rightPageShadow") {
                                   Annotation.draggable({ cusror: "pointer", containment: 'parent'                                  
                                           });
                               } else {
                                   Annotation.draggable({ cusror: "pointer", containment: "#leftPageShadow"
                                   });
                               }
                                }
                                else if (ZoomOn = true) {
                                    Annotation.draggable({
                                        create: function () {
                                            $(this).show();
                                        },
                                        cusror: "pointer",
                                        containment: "parent"
                                    });
                                }
                                $(Annotation).show();
                                //   $("#PostItNoteInd").show();
                                $(this).dialog("close");
                                $("#note-body").text("");**
                            }
                   , "CANCEL": function () {
                       $("#pNotes").text("");
                       $("#leftTn").attr("rel", -10);
                       $("#leftTn").css("border", "0px solid red");
                       $("#rightTn").attr("rel", -10);
                       $("#rightTn").css("border", "0px solid red");
                       $(this).dialog("close");
                   }
                        }
                    });
                    var cw = $("#PostItDialogContent").width();
                    $("#PostIt").dialog("option", "width", cw + 20);

                } 
```

我遇到的问题是，当便笺放在左侧页面上时，它可以正常工作。但在右侧和底部却没有。我已经尝试过 [x,y, x1, y1] 但因为每本书都不同我尝试使用我的 id 标签如果你 #leftPageShadow 是在 div 上而其他是 #rightPageShadow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:35:21.113

问题已修复，我丢失了 cookie id 更改 cookie 代码。

# c# - 无法通过 C# 将 IIS 应用程序池添加到本地用户组

> ID：11695800
> 
> 赞同：1
> 
> 时间：2012-07-27T21:20:42.993
> 
> 标签：c#, iis, permissions, active-directory

我正在尝试通过 C# 远程将 IIS 应用程序池用户添加到本地用户组，​​但遇到了一些困难。

我尝试了以下两种方法：

```
// This results in a ArgumentNullException because user is never set
using (PrincipalContext pc = new PrincipalContext(ContextType.Machine, serverName))
{
    UserPrincipal user = UserPrincipal.FindByIdentity(pc, String.Format(@"IIS APPPOOL\{0}", rootApplicationPoolName));
    GroupPrincipal myGroup = GroupPrincipal.FindByIdentity(pc, "mygroupname");
    myGroup.Members.Add(user);
    myGroup.Save();
} 
```

还：

```
// This results in a NoMatchingPrincipalException saying the user could not be found
using (PrincipalContext pc = new PrincipalContext(ContextType.Machine, serverName))
{
    GroupPrincipal myGroup= GroupPrincipal.FindByIdentity(pc, "mygroupname");
    myGroup.Members.Add(pc, IdentityType.Name, String.Format(@"IIS APPPOOL\{0}", appPoolName));
    myGroup.Save();
} 
```

我可以手动将此用户添加到组中，它工作得很好。

我错过了什么？

# python - Python：ValueError：索引1处不支持的格式字符'''（0x27）

> ID：11695801
> 
> 赞同：42
> 
> 时间：2012-07-27T21:20:50.543
> 
> 标签：python, mysql, mysql-python

我正在尝试执行查询以通过 Python 使用 MySQL 搜索数据库中的 3 个表。每次我尝试将以下字符串作为查询执行时，它都会给我一个关于字符串连接的错误。

```
"SELECT fileid FROM files WHERE description LIKE '%" + search + "%' OR filename LIKE '%" + search + "%' OR uploader LIKE '%" + search + "%' ORDER BY fileid DESC" 
```

这是它给我的错误：

```
ValueError: unsupported format character ''' (0x27) at index 1 
```

如果我删除它要求的字符，那么我还必须删除 %，这会阻止查询实际正常工作。我能做些什么来解决这个问题，因为我对 Python 很陌生。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-07-27T21:54:05.470

看起来 python 正在将 % 解释为类似 printf 的格式字符。试试用%%？

```
"SELECT fileid 
FROM files 
WHERE description LIKE '%%%s%%' 
    OR filename LIKE '%%%s%%' 
    OR uploader LIKE '%%%s%%' 
    ORDER BY fileid DESC" % (search, search, search) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-08T12:42:44.117

仅供参考：我今天在 Python 3.6 中尝试了@Pochi 的解决方案，但由于某种原因，它引发了意想不到的行为。我有两个和三个格式字符串参数，所以最后是：

```
% (Search, Search) 
```

我的字符串（“搜索”）以大写的“S”开头。我收到错误消息：

```
ValueError: unsupported format character 'S' (0x53) at index 113 
```

我将大写改为小写，错误是：

```
TypeError: not enough arguments for format string 
```

然后我只是将我的论点放在开头和结尾的 double %% 内，它就起作用了。所以我的代码看起来像：

```
"SELECT fileid 
FROM files 
WHERE description LIKE '%%search%%' 
    OR filename LIKE '%%search%%'
    ORDER BY fileid DESC" 
```

另一种解决方案是@Alice Yuan 提供的解决方案。她只是把唱歌的百分比翻了一番，而且很有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-19T10:35:05.853

我的解决方案：

```
query = """SELECT id, name FROM provice WHERE name LIKE %s"""
cursor.execute(query, '%%%s%%' % name) 
```

我认为这是解决此问题的简单方法！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T07:27:10.933

你可以这样尝试：

```
SELECT fileid 
FROM files 
WHERE description LIKE '%%%%%s%%%%' 
OR filename LIKE '%%%%%s%%%%' 
OR uploader LIKE '%%%%%s%%%%' 
ORDER BY fileid DESC" % (search, search, search) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-16T08:47:36.380

最简单的答案是将 LIKE 通配符添加`%`到值中。这正确地引用并转义了 LIKE 模式。

在 Python 3.6+ 中，您可以使用 f 字符串`%`在值中包含 LIKE 通配符，从而将转义的字符串值正确插入 SQL：

```
# string to find, e.g.,
search = 'find-me'

# Parameterised SQL template
sql = """SELECT fileid FROM files
WHERE description LIKE %s OR filename LIKE %s OR uploader LIKE %s
ORDER BY fileid DESC"""

# Combine LIKE wildcard with search value
like_val = f'%{search}%'

# Run query with correctly quoted and escaped LIKE pattern
cursor.execute(sql, (like_val, like_val, like_val)) 
```

[python3](/questions/tagged/python3 "显示标记为“python3”的问题") [mysql-python](/questions/tagged/mysql-python "显示标记为“mysql-python”的问题")

# mysql - MySQL 使用 GROUP BY 按日期排序

> ID：11695803
> 
> 赞同：11
> 
> 时间：2012-07-27T21:20:52.330
> 
> 标签：mysql, group-by, sql-order-by, left-join, max

我的桌子`titles`看起来像这样

```
id |group|date                |title
---+-----+--------------------+--------
1  |1    |2012-07-26 18:59:30 | Title 1
2  |1    |2012-07-26 19:01:20 | Title 2
3  |2    |2012-07-26 19:18:15 | Title 3
4  |2    |2012-07-26 20:09:28 | Title 4
5  |2    |2012-07-26 23:59:52 | Title 5 
```

我需要按日期降序排列的每个组的最新结果。像这样的东西

```
id |group|date                |title
---+-----+--------------------+--------
5  |2    |2012-07-26 23:59:52 | Title 5
2  |1    |2012-07-26 19:01:20 | Title 2 
```

我试过

```
SELECT *
FROM `titles`
GROUP BY `group`
ORDER BY MAX( `date` ) DESC 
```

但我从小组中得到了第一个结果。像这样

```
id |group|date                |title
---+-----+--------------------+--------
3  |2    |2012-07-26 18:59:30 | Title 3
1  |1    |2012-07-26 19:18:15 | Title 1 
```

我究竟做错了什么？如果我使用 LEFT JOIN，这个查询会更复杂吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T21:29:25.290

[这个页面](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)对我很有帮助；它教会了我如何使用自联接来获得每组的最大/最小/某事-n 行。

在您的情况下，它可以应用于您想要的效果，如下所示：

```
SELECT * FROM
(SELECT group, MAX(date) AS date FROM titles GROUP BY group)
AS x JOIN titles USING (group, date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T11:21:08.283

我通过谷歌找到了这个主题，看起来我遇到了同样的问题。如果像我一样不喜欢子查询，这是我自己的解决方案：

```
-- Create a temporary table like the output
CREATE TEMPORARY TABLE titles_tmp LIKE titles;

-- Add a unique key on where you want to GROUP BY
ALTER TABLE titles_tmp ADD UNIQUE KEY `group` (`group`);

-- Read the result into the tmp_table. Duplicates won't be inserted.
INSERT IGNORE INTO titles_tmp
  SELECT *
    FROM `titles`
    ORDER BY  `date` DESC;

-- Read the temporary table as output
SELECT * 
  FROM titles_tmp
  ORDER BY `group`; 
```

它有更好的性能。如果 date_column 与 auto_increment_one 具有相同的顺序，以下是提高速度的方法（然后您不需要 ORDER BY 语句）：

```
-- Create a temporary table like the output
CREATE TEMPORARY TABLE titles_tmp LIKE titles;

-- Add a unique key on where you want to GROUP BY
ALTER TABLE titles_tmp ADD UNIQUE KEY `group` (`group`);

-- Read the result into the tmp_table, in the natural order. Duplicates will update the temporary table with the freshest information.
INSERT INTO titles_tmp
  SELECT *
    FROM `titles`

  ON DUPLICATE KEY 
    UPDATE  `id`    = VALUES(`id`), 
            `date`  = VALUES(`date`), 
            `title` = VALUES(`title`);

-- Read the temporary table as output
SELECT * 
  FROM titles_tmp
  ORDER BY `group`; 
```

结果 ：

```
+----+-------+---------------------+---------+
| id | group | date                | title   |
+----+-------+---------------------+---------+
|  2 |     1 | 2012-07-26 19:01:20 | Title 2 |
|  5 |     2 | 2012-07-26 23:59:52 | Title 5 |
+----+-------+---------------------+---------+ 
```

在大型表上，此方法在性能方面具有重要意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:29:54.750

好吧，如果日期在组中是唯一的，这将起作用（如果不是，您将看到与组中的最大日期匹配的几行）。（此外，列的错误命名、“组”、“日期”可能会给您带来语法错误，尤其是“组”）

```
select t1.* from titles t1, (select group, max(date) date from titles group by group) t2
where t2.date = t1.date
and t1.group = t2.group
order by date desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T21:53:20.867

另一种方法是利用 MySQL 用户变量来识别`group`值中的“控制中断”。

如果您可以忍受返回的额外列，则可以使用以下方法：

```
SELECT IF(s.group = @prev_group,0,1) AS latest_in_group
     , s.id
     , @prev_group := s.group AS `group`
     , s.date
     , s.title
  FROM (SELECT t.id,t.group,t.date,t.title
          FROM titles t
         ORDER BY t.group DESC, t.date DESC, t.id DESC
       ) s
  JOIN (SELECT @prev_group := NULL) p
HAVING latest_in_group = 1
 ORDER BY s.group DESC 
```

这样做是`group`按`date`降序排列所有行。（我们在 ORDER BY 中的所有列上指定 DESC，以防`(group,date,id)`MySQL 可以对其执行“反向扫描”的索引。`id`列的包含使我们获得确定性（可重复）行为，如果有多于一行具有最新`date`值。）那是别名为的内联视图`s`。

我们使用的“技巧”是将值与前一行`group`的值进行比较。`group`每当我们有不同的值时，我们就知道我们正在开始一个“新”组，并且这一行是“最新”行（我们让 IF 函数返回 1）。否则（当组值匹配时），它不是最新的行（我们让 IF 函数返回 0）。

然后，我们过滤掉所有没有`latest_in_group`设置为 1 的行。

可以通过将该查询（作为内联视图）包装在另一个查询中来删除该额外的列：

```
SELECT r.id
     , r.group
     , r.date
     , r.title
  FROM ( SELECT IF(s.group = @prev_group,0,1) AS latest_in_group
              , s.id
              , @prev_group := s.group AS `group`
              , s.date
              , s.title
           FROM (SELECT t.id,t.group,t.date,t.title
                   FROM titles t
                  ORDER BY t.group DESC, t.date DESC, t.id DESC
                ) s
           JOIN (SELECT @prev_group := NULL) p
         HAVING latest_in_group = 1
       ) r
 ORDER BY r.group DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:55:25.030

如果您的`id`字段是自动递增字段，并且可以肯定地说该`id`字段的最大值也是`date`任何组的最大值，那么这是一个简单的解决方案：

```
SELECT   b.*
FROM     (SELECT MAX(id) AS maxid FROM titles GROUP BY group) a
JOIN     titles b ON a.maxid = b.id
ORDER BY b.date DESC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-17T07:57:11.143

使用下面的 mysql 查询从表中获取最新的更新/插入记录。

```
SELECT * FROM 
(
  select * from `titles` order by `date` desc
) as tmp_table
group by `group`
order by `date` desc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-13T10:43:55.343

使用以下查询从每个组中获取最新记录

```
SELECT 
T1.* FROM
(SELECT 
    MAX(ID) AS maxID
FROM
    T2
GROUP BY Type) AS aux
    INNER JOIN
T2 AS T2 ON T1.ID = aux.maxID ; 
```

其中 ID 是您的自动增量字段，Type 是您想要分组的记录类型。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-15T08:00:23.030

MySQL 使用了一个`GROUP BY`不可靠的哑扩展，如果你想得到这样的结果，你可以使用

```
select id, group, date, title from titles as t where id = 
(select id from titles where group = a.group order by date desc limit 1); 
```

在此查询中，每次对每个组进行完整扫描时，它都可以找到最近的日期。我找不到任何更好的替代品。希望这会对某人有所帮助。

# php - php生成的pdf损坏文件

> ID：11695810
> 
> 赞同：1
> 
> 时间：2012-07-27T21:21:27.717
> 
> 标签：php, pdf, birt, adobe-reader

我有一个以 PDF 格式生成的 BIRT 报告。然后将从网络浏览器中打开报告。但是，在 Adob​​e Reader 中打开文件时，我收到以下错误消息：

> Adobe Reader 无法打开“test.pdf”，因为它不是受支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送且未正确解码）。

当我从命令行（代码在 PHP 中）运行完全相同的代码（从 Schedule() 和 Search() 调用）时，我得到了相同的报告，但 Adob​​e Reader 能够打开它。这是我用来从浏览器读取文件的代码：

```
<?php
  require "Search.php";
  require "Schedule.php";

  Schedule( $_POST['period'], mktime(23, 59, 59, $_POST['month'] + 1,
                                     $_POST['day'] + 1, $_POST['year']) );

  Search( $param1, $param2, $param3, $param4 );

  header('Content-type: application/pdf');
  header('Content-Disposition: attachment; filename="test.pdf"');
  readfile('/home/web/test.pdf');
?> 
```

Schedule() 和 Search() 都已经过测试，它们应该不会引起任何问题。由于我还是 PHP 的新手，有什么我想念的东西我还不知道吗？非常感谢您对此问题的任何帮助。

-生锈的

更新：事实证明，我发现一个 cron 作业更新了一个被调用的文件。这将文件更新为无用，并且已被修复。

# python - 在 Python 中发送多节点 Json Post

> ID：11695811
> 
> 赞同：0
> 
> 时间：2012-07-27T21:21:30.760
> 
> 标签：python, json, google-cloud-messaging

我了解如何在 python 中发送一个简单的 JSON。

我找不到的是如何制作更复杂的 JSON 对象。它甚至不需要很复杂，我只是在测试 Google Cloud Messaging，我需要发送如下所示的内容：

```
{
    "collapse_key" : "Food-Promo",
    "time_to_live" : 3600,
    "delay_while_idle" : "true",
    "data" : {
        "Category" : "FOOD",
        "Type": "VEG",
    }
    "registration_ids": ["APA4lj5jl54l2h..."],
}, 
```

我还没有找到在 Python 中执行此操作的方法。我的大部分经验都是使用 Java，所以也许这就是我找不到这个的部分原因，因为它看起来很简单，而且我担心我已经看到了一个解决方案并忽略了它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:48:28.390

```
>>> myDict = {'x' : 1, 'y' : 2}
>>> myList = [1,2,3]
>>> post = {'uname' : 'jon', 'node' : myDict, 'access-levels' : myList}
>>> json.dumps(post)
'{"node": {"y": 2, "x": 1}, "uname": "jon", "access-levels": [1, 2, 3]}'
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:49:45.950

`data`只是一个嵌套字典。也就是说，它与字典的任何其他元素相同，只是它的值本身就是字典。

如果您逐行构建对象（几乎可以肯定永远不会这样做），您可能会执行以下操作：

```
obj = {}

obj["collapse_key"] = "Food-Promo"
obj["time_to_live"] = 3600,
obj["delay_while_idle" : "true",

data = {}
data["Category"] = "FOOD"
data["Type"] = "VEG"

obj["data"] = data

obj["registration_ids"] = ["APA4lj5jl54l2h..."] 
```

# javascript - 显示/隐藏中断图像滚动

> ID：11695816
> 
> 赞同：-1
> 
> 时间：2012-07-27T21:21:40.310
> 
> 标签：javascript, jquery, html

我在一组 div 中使用图像滚动插件，这些 div 设置为在加载页面时随机显示，然后在单击图像/徽标时显示/隐藏。我注意到的是，当它不是页面上加载的第一个 div 或显示另一个滑块时，缩略图滚动条会中断。
这是我正在处理的演示的链接： http: [//sjdunham.com/test/yzn/](http://sjdunham.com/test/yzn/)

我假设这是因为插件的加载方式：

```
$(function($){
   window.onload=function(){ 
```

由于在显示和隐藏 div 时不会重新加载页面，并且它只为第一个 div 项目加载。

我不确定我需要更改什么才能使插件正确加载所有 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:53:22.460

您有重复的 ID，ID 必须是唯一的。尝试改用 className。

```
<div class="tS2">...</div>
<div class="tS2">...</div>
<script>
$(document).ready(function(){
    $(".tS2").thumbnailScroller({...});
});
</script> 
```

# c# - 在 SQL Server 表中转储 SSIS USER 变量名称和值

> ID：11695821
> 
> 赞同：3
> 
> 时间：2012-07-27T21:22:06.480
> 
> 标签：c#, sql-server, ssis, components

**目的：**获取 SSIS 包中的所有用户变量，并将变量名称及其值写入 SQL Server 2008 表中。

**我尝试了什么：**我有一个小的“脚本**任务**”来显示变量名及其值。脚本如下。

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
namespace ST_81ec2398155247148a7dad513f3be99d.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

    public void Main()
    {

        Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
        Package pkg = app.LoadPackage(
          @"C:\package.dtsx",
          null);
        Variables pkgVars = pkg.Variables;

        foreach (Variable pkgVar in pkgVars)
        {
            if (pkgVar.Namespace.ToString() == "User")
            {
                MessageBox.Show(pkgVar.Name);
                MessageBox.Show(pkgVar.Value.ToString());
            }
        }
        Console.Read();
    }
    }

    } 
```

**需要做的事情：**我需要接受这个并将值转储到数据库表中。我正在尝试为此**编写脚本组件**，但由于缺乏.net 脚本知识，我还没有接近终点线。这就是我在组件方面所做的。

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;
using Microsoft.SqlServer.Dts;
using System.Windows.Forms;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{

   public override void CreateNewOutputRows()
    {

        #region Class Variables
        IDTSVariables100 variables;
        #endregion

        variables = null;

        this.VariableDispenser.GetVariables(out variables);
        foreach(Variable myVar in variables)
        {
            MessageBox.Show(myVar.Value.ToString());
            if (myVar.Namespace == "User")
            {
                Output0Buffer.ColumnName = myVar.Value.ToString();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:10:00.383

我现在可以想到两种解决此问题的方法。

1.  使用相同的脚本任务将值插入数据库
2.  使用 Foreach 循环枚举 ssis 包变量（如您所问）

用于插入变量名称和值的表脚本是

```
CREATE TABLE [dbo].[SSISVariables]
(
[Name] [varchar](50) NULL,
[Value] [varchar](50) NULL
) 
```

1.使用`Script task`并编写以下代码

```
[System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
{
    private static string m_connectionString = @"Data Source=Server Name;
    Initial Catalog=Practice;Integrated Security=True";
   public void Main()
    {
       List<SSISVariable> _coll = new List<SSISVariable>();
        Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
        Package pkg = app.LoadPackage(PackageLocation,Null);
                   Variables pkgVars = pkg.Variables;

        foreach (Variable pkgVar in pkgVars)
        {
            if (pkgVar.Namespace.ToString() == "User")
            {
                _coll.Add(new SSISVariable ()
                {
                 Name =pkgVar.Name.ToString(),
                 Val =pkgVar .Value.ToString () 
                });
           }
        }
        InsertIntoTable(_coll);
        Dts.TaskResult = (int)ScriptResults.Success;
    }

    public void InsertIntoTable(List<SSISVariable> _collDetails)
    {  
       using (SqlConnection conn = new SqlConnection(m_connectionString))
        {
            conn.Open();
            foreach (var item in _collDetails )
            {
             SqlCommand command = new SqlCommand("Insert into SSISVariables values (@name,@value)", conn);
             command.Parameters.Add("@name", SqlDbType.VarChar).Value = item.Name ;

             command.Parameters.Add("@value", SqlDbType.VarChar).Value = item.Val ;
             command.ExecuteNonQuery();    
            }
        }
     }
  }

   public class SSISVariable
   {
    public string Name { get; set; }
    public string Val { get; set; }
   } 
```

说明：在此，我正在创建一个具有属性 Name 和 Val 的类。使用您的代码检索包变量及其值并将它们存储在一个集合中`List<SSISVariable>`。然后将该集合传递给一个方法 ( `InsertIntoTable`)，该方法通过枚举该集合将值简单地插入到数据库中。

笔记 ：

```
There is a performance issue with the above code ,as for every variable 
im hitting the database and inserting the value.You can use
[TVP][1]( SQL Server 2008)   or stored procedure which takes
 xml( sql server 2005) as input. 
```

2.使用 ForEach 循环

设计

![在此处输入图像描述](../Images/6d1a67100e20cce68f698775aa698ae2.png)

第 1 步：创建一个类型的变量`VariableCollection`和`System.Object`另一个类型的变量`Item`来`String`存储 Foreach 循环的结果

第 2 步：对于第一个脚本任务。

`VariableCollection`用于存储变量名称及其值 ![在此处输入图像描述](../Images/55df5ee82487c1485232e16d637f30d3.png)

第 3 步：在脚本任务`Main Method`中编写以下代码

```
 public void Main()
   {
     ArrayList _coll = new ArrayList(); 

        Microsoft.SqlServer.Dts.Runtime.Application app = new Microsoft.SqlServer.Dts.Runtime.Application();
        Package pkg = app.LoadPackage(Your Package Location,null);

        Variables pkgVars = pkg.Variables;
        foreach (Variable pkgVar in pkgVars)
        {
            if (pkgVar.Namespace.ToString() == "User")
            {
                _coll.Add(string.Concat ( pkgVar.Name,',',pkgVar.Value ));
            }
        }
        Dts.Variables["User::VariableCollection"].Value = _coll;
        // TODO: Add your code here
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

第 4 步：拖动 Foreach 循环并在表达式中使用`Foreach from Variable Enumerator`

![在此处输入图像描述](../Images/bd02e7c9606cbe000a31c31dce75f2d2.png)

步骤 5：Foreach 循环枚举值并将其存储在变量中`User::Item`

![在此处输入图像描述](../Images/77382617331a4fb872564f9b76cf0e16.png)

第 6 步：在 foreach 循环中拖动脚本任务并选择变量

```
readonly variables   User::Item 
```

第 7 步：在 main 方法中编写以下代码

```
 public void Main()
    {
      string name = string.Empty;
      string[] variableCollection;
      variableCollection = Dts.Variables["User::Item"].Value.ToString().Split(',');
      using (SqlConnection conn = new SqlConnection(m_connectionString))
        {
            conn.Open();
            SqlCommand command = new SqlCommand("Insert into SSISVariables values (@name,@value)", conn);
            command.Parameters.Add("@name", SqlDbType.VarChar).Value = variableCollection[0];

            command.Parameters.Add("@value", SqlDbType.VarChar).Value = variableCollection[1];

            command.ExecuteNonQuery();
        }
        // TODO: Add your code here
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

解释：在 Foreach 循环中，我只能枚举一个变量。所以逻辑是，我需要以某种方式将变量名称及其值传递给一个变量。为此，我将名称和值连接起来

```
 string.Concat ( pkgVar.Name,',',pkgVar.Value ) 
```

foreach 循环中的脚本任务只是将变量拆分并将其存储到字符串数组中，然后您可以使用数组索引访问名称和值并将其存储在数据库中

# c# - 鼠标滚轮和检查更改值事件之间的延迟

> ID：11695822
> 
> 赞同：1
> 
> 时间：2012-07-27T21:22:10.807
> 
> 标签：c#, winforms

对于轨迹栏和数字向上/向下（除其他外），每当值更改时触发的事件似乎在更改之间具有非常短的延迟。

这对我来说是个问题，因为每当值发生变化时，我都会执行一些需要相当长的时间来处理的函数（例如，大约 100-200 毫秒，具体取决于输入的大小）

我注意到，当我使用鼠标滚轮增加/减少值时，它会注册 4 个更改事件（打印“更改！” 4 次调试控制台），因此函数执行 4 次。这可能是我的鼠标滚轮的设置。

即使我手动单击轨迹栏以使其“大幅增加”，它也会注册 2 个更改事件。

我希望函数在值更改时运行，但不希望单个鼠标滚轮滚动触发 4 个调用。我只需要最新的值。

一种解决方案是强制用户手动按下按钮来执行命令，但我想要某种“实时”更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:48:15.687

让数字控件的事件设置一个标志。添加一个`Timer`控件，每 500 毫秒运行一次，它检查标志，如果设置，则调用实际方法并清除标志。如果要确保处理最后一个值集，*请先*清除该标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:17:00.707

扩展所有行业的乔恩建议..

而不是一个简单的标志，使用`DateTime?`. 当事件触发时，设置`eventLastTriggered = DateTime.Now`. 然后在您的计时器的 Tick 处理程序中执行此操作

```
private void timer_Tick(object sender, EventArgs e)
{
    if (eventLastTriggered.HasValue
        && (DateTime.Now - eventLastTriggered.Value) >= UpdateDelay)
    {
        eventLastTriggered = null; // reset it so we don't update again
        Update();
    }
}

static readonly TimeSpan UpdateDelay = TimeSpan.FromMilliseconds(whatever); 
```

您将获得持续的更新延迟，但不会收到更新垃圾邮件。您可以调整 UpdateDelay 以获得最佳结果。

# c# - 两组控制器

> ID：11695824
> 
> 赞同：2
> 
> 时间：2012-07-27T21:22:23.450
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4

所以我正在创建一个有两个绑定的网站

```
routes.MapRoute(
  name: "Default", 
  url: "{controller}/{action}/{id}", 
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional });

routes.MapRoute(
  name: "DefaultAdmin",
  url: "Admin/{controller}/{action}/{id}",
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

这个想法是我想让 EndUsers 访问普通页面（`/account/login`等），但只有网站的管理员部分（具有不同的布局）供管理员用户使用。

问题有点双重：-

1.  就控制器而言，看起来 MVC 只是在 Controllers 文件夹中查找，有没有办法将 AdminControllers 和常规控制器分开以保持井井有条？

2.  我想为管理员显示一个单独的“主视图”而不是常规，目前我只是使用`_layout.cshtml`from`_start.cshtml`但我希望能够使用`_layout.cshtml`并且`_adminLayout.cshtml`不使用视图名称为每个视图添加前缀（如果不是那么我可以很容易地忍受这个）。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:39:25.777

您可以将控制器放置在程序集中的任何位置，只要它们是从`System.Web.Mvc.Controller`类派生的，它们将由路由逻辑标识。

您可以查看 MVC 中的“区域”以帮助满足您的特定需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T21:44:13.683

这听起来像[`Areas`](http://www.asp.net/mvc/videos/mvc-2/how-do-i/aspnet-mvc-2-areas)在 MVC 中是你正在寻找的。

# batch-file - CMD批处理不喜欢错误重定向

> ID：11695826
> 
> 赞同：2
> 
> 时间：2012-07-27T21:22:42.797
> 
> 标签：batch-file, windows-xp, cmd

我正在学习批处理编程的来龙去脉，但遇到了一个小障碍。我正在尝试递归循环遍历目录（和子目录）以找到合适的 .vob 文件。一切都很好，除了我的`dir`命令正在输出`File Not Found`. 在命令行中，我可以使用以下命令将错误重定向到遗忘：

`dir /b *.vob 2>NUL`

然而，在批处理文件中，我看到了死亡的瞬间。

```
for /R %%G IN (\) DO (
    pushd "%%G"
    for /F "usebackq" %%V in (`dir /b *.vob`) DO (
        echo: Found %%~nV in %%~dpV
    )
    popd
) 
```

将其更改为

```
for /R %%G IN (\) DO (
    pushd "%%G"
    for /F "usebackq" %%V in (`dir /b *.vob 2>NUL`) DO (
        echo: Found %%~nV in %%~dpV
    )
    popd
) 
```

我假设我的 cmd 窗口崩溃了。闪烁开和关。

顺便说一句，调试批次很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:31:55.457

您需要转义重定向`2^>NUL`，然后它应该按预期工作。

```
for /R %%G IN (\) DO (
    pushd "%%G"
    for /F "usebackq" %%V in (`dir /b *.vob 2^>NUL`) DO (
        echo: Found %%~nV in %%~dpV
    )
    popd
) 
```

# html - 以 html 显示的产品描述

> ID：11695829
> 
> 赞同：0
> 
> 时间：2012-07-27T21:22:48.133
> 
> 标签：html, css, magento

我的产品描述页面有问题。当我单击前端中的类别链接以查看产品时，一切正常。但是当我进入产品页面并单击产品的图片或链接时，它会以 HTML 格式显示页面。我是magento社区的新手，有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:54:32.897

在您的主页上加载了以下文件： [http](http://www.lightupshoelaces.com/store/skin/frontend/)`default` : //www.lightupshoelaces.com/store/skin/frontend//default/css/styles.css

尽管在您的产品详细信息页面上的 URL 不同，但会引发 404。 [http://www.lightupshoelaces.com/store/skin/frontend/](http://www.lightupshoelaces.com/store/skin/frontend/)`base` /default/css/styles.css

这就是我目前所能说的。对于目录产品详细信息页面的皮肤文件加载，您是否对布局 XML 文件进行了任何更改？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T23:04:02.003

当我查看您的网站时，我注意到主页链接到一个完全不同的样式表，然后是产品页面。

主页链接到 style.css，它位于您网站的根目录中，并且似乎具有您想要的样式（例如背景图像）。

产品页面有指向其他多个样式表的链接，但没有一个与您的主页相同。

尝试粘贴

```
<link rel="stylesheet" type="text/css" href="style.css" /> 
```

在产品页面的头文件中（对不起，我以前没有使用过 Magento，所以我不知道这些文件在哪里......）

# shell - 连接文件中括号之间的字符串

> ID：11695830
> 
> 赞同：1
> 
> 时间：2012-07-27T21:23:10.357
> 
> 标签：shell

> **可能重复：**
> [如何删除文件中以括号开头和结尾的列](https://stackoverflow.com/questions/11695238/how-can-i-delete-columns-beginning-and-ending-with-parenthesis-in-a-file)

如何在文件中的括号之间连接字符串？
**预期输入 - input.txt 的内容**

```
ABC EFG    
BCD (AB CD) EFG
DEF BCD AB(ABC) 
```

**预期输出——output.txt 的内容**

```
ABC EFG    
BCD (ABCD) EFG    
DEF BCD AB(ABC) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:30:53.887

使用括号作为分隔符，您可以这样做`awk`：

```
awk -F'[)(]' -v OFS="" ' 
  NF == 1
  NF  > 1 {
    for(i=2; i < NF; i+=2) {
      gsub(" +", "", $i)
      $i = "("$i")"
    }
    print
  }' 
```

### 解释

`NF`指定字段数。

*   `NF == 1`表示没有括号。
*   `NF > 1`表示至少一个带括号的字段。
*   每个其他字段都是括号字段，因为它们是我们的分隔符。因此，全局替换 ( `gsub`) 空间，在其他所有字段中都没有。
*   最后重新插入括号。

# clearcase - Cleartool - 查找卸载/删除的文件

> ID：11695833
> 
> 赞同：2
> 
> 时间：2012-07-27T21:23:33.123
> 
> 标签：clearcase, cleartool

Cleartool 中是否有一个命令可用于列出已从分支中删除的所有文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:24:43.200

在 ClearCase 中查找任何内容的基本命令是... [`cleartool find`](http://www-01.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_find.htm?lang=en)，在“ [ClearCase UCM：需要查看已删除文件的内容](https://stackoverflow.com/questions/9934086/clearcase-ucm-need-to-see-content-of-deleted-file)”中也有说明。

在您的情况下，您将搜索不在最新分支的文件版本：

```
cleartool find . -type f -version "! version(.../BRANCH/LATEST)" -print 
```

（有关此 ' ' 符号的更多信息，请参阅[版本选择器）](http://www-01.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.cc_ref.doc/topics/version_selector.htm?lang=en)`.../`

仅显示文件（而不是*所有*版本）：

```
cleartool find . -type f -element "! version(.../BRANCH/LATEST)" -print 
```

* * *

[OP linuxlewis](https://stackoverflow.com/users/24481/linuxlewis)在评论中提到：

> 这将显示兄弟分支之间存在的所有差异。我只想从当前分支中看到文件名（如果有的话）

我提到了`grep`for的可能性，以检测具有但不`BRANCH`具有版本的文件）`BRANCH``LATEST`

但是，更简洁的解决方案是在搜索中添加另一个过滤器：`&& version(.../BRANCH)`

```
cleartool find . -type f -element "! version(.../BRANCH/LATEST) && version(.../BRANCH)" -print 
```

这将搜索所有“元素”（ClearCase 中的文件或目录）在 branch 中具有版本`BRANCH`，但在`BRANCH/LATEST`.

# java - Android 应用程序 - 没有这样的方法异常

> ID：11695835
> 
> 赞同：2
> 
> 时间：2012-07-27T21:23:48.040
> 
> 标签：java, android, illegalstateexception

我正在尝试创建一个涉及按下拍照按钮的 android 应用程序。我的代码很干净，没有任何警告或错误，但是当我在模拟器上运行它时，只要我按下应用程序中的照片按钮，它就会说你的应用程序已停止。当我检查日志文件以获取它给出的解释时我以下

任何帮助，将不胜感激。先感谢您。

```
 07-27 20:44:11.676: E/AndroidRuntime(453): FATAL EXCEPTION: main
    07-27 20:44:11.676: E/AndroidRuntime(453): java.lang.IllegalStateException: Could not find a method dispatchTakePhotoIntent(View) in the activity class com.example.mydressingroom.MainActivity for onClick handler on view class android.widget.Button
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.view.View$1.onClick(View.java:3026)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.view.View.performClick(View.java:3480)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.view.View$PerformClick.run(View.java:13983)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.os.Handler.handleCallback(Handler.java:605)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.os.Handler.dispatchMessage(Handler.java:92)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.os.Looper.loop(Looper.java:137)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.app.ActivityThread.main(ActivityThread.java:4340)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at java.lang.reflect.Method.invokeNative(Native Method)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at java.lang.reflect.Method.invoke(Method.java:511)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at dalvik.system.NativeStart.main(Native Method)
    07-27 20:44:11.676: E/AndroidRuntime(453): Caused by: java.lang.NoSuchMethodException: dispatchTakePhotoIntent [class android.view.View]
    07-27 20:44:11.676: E/AndroidRuntime(453):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at java.lang.Class.getMethod(Class.java:915)
    07-27 20:44:11.676: E/AndroidRuntime(453):  at android.view.View$1.onClick(View.java:3019)
    07-27 20:44:11.676: E/AndroidRuntime(453):  ... 11 more 
```

这是我的代码

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.provider.MediaStore;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
    }

    /** Called when the user clicks the Photo button */
    public void dispatchTakePhotoIntent(int actionCode) {
          Intent takePhotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
          startActivityForResult(takePhotoIntent, actionCode);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:45:32.240

错误说：找不到方法**dispatchTakePhotoIntent( *View* )**

您使用 View 对象作为参数调用 dispatchTakePhotoIntent ，而在您的代码中您已定义：

```
public void dispatchTakePhotoIntent(int actionCode) 
```

它接受一个整数作为参数。

您在代码中调用方法的方式存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:49:05.660

在视图类 android.widget.Button 上的 onClick 处理程序的活动类 com.example.mydressingroom.MainActivity 中找不到方法**dispatchTakePhotoIntent(View)**

看来您可能正在向该方法发送一个视图，而不是像您在方法属性中定义的那样发送一个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:38:04.550

在调用该方法的类中创建一个常量

```
 private static final int TAKE_PHOTO_REQUEST = 100; 
```

并将方法称为

```
 dispatchTakePhotoIntent(TAKE_PHOTO_REQUEST); 
```

并在您的方法测试请求代码中：

```
 public void dispatchTakePhotoIntent(int actionCode) {
    if (actionCode == 100) {
        Intent takePhotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(takePhotoIntent, actionCode);
    }
  } 
```

问题是您通过将渲染/显示图像的视图传递给该方法来调用该方法，而不是您要执行的操作。因此，编译器找到了对**dispatchTakePhotoIntent(View)类型方法的调用，因为您已经定义了****dispatchTakePhotoIntent(int)**，所以它在您的代码中找不到该方法。

如果您在 eclipse 中开发，您的代码中应该会出现错误（错误所在的行上有一个红叉）。

# c# - 有没有办法在 Visual Studio 中设置命名参数的样式？

> ID：11695836
> 
> 赞同：13
> 
> 时间：2012-07-27T21:23:53.903
> 
> 标签：c#, visual-studio-2010, resharper

我认为命名参数很好，但我认为缺点是它们给函数调用增加了一些视觉噪音。我希望 Visual Studio 将它们着色为浅灰色（ReSharper 将死代码变灰的方式），以便强调实际参数值。

现在看起来有点像这样（一切都是黑色的）：

> **LaunchThings（飞机：真，船：假，火箭：真，核武器：假）；**

我希望它看起来像这样：

> **LaunchThings（**飞机：**真**，船：**假**，火箭：**真**，核武器：**假）；**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T21:29:48.743

目前 Visual Studio 中没有任何内容可以让您执行此操作。您可以创建一个扩展程序或加载项来执行此操作，因为我不知道已经执行此操作的任何扩展程序/加载项。 [DxCore](http://devexpress.com/Products/Visual_Studio_Add-in/DXCore/)是一个“更容易”扩展视觉工作室的库。也许这会减轻创建这样的扩展的负担。

# regex - 正则表达式以负前瞻提取日期

> ID：11695838
> 
> 赞同：0
> 
> 时间：2012-07-27T21:23:57.680
> 
> 标签：regex

我正在使用此模式从文本文件中提取确认日期并将它们转换为日期对象（请参阅我的帖子[从 MS Access 中的字符串中提取/转换日期](https://stackoverflow.com/questions/10392009/extract-convert-date-from-string-in-ms-access)）。

当前模式匹配所有看起来像日期的字符串，但可能不是确认日期（始终以 Confirmed by 开头），而且可能没有完整的日期信息（*例如*no`AM`或`PM`）。

```
 Pattern: (\d+/\d+/\d+\s+\d+:\d+:\d+\s+\w+|\d+-\w+-\d+\s+\d+:\d+:\d+) 
```

示例文本：

```
WHEN COMPARED WITH RESULT OF 7/13/12 09:06:42  NO SIGNIFICANT 
CHANGE; Confirmed by SMITH, MD, JOHN (2242) on 7/14/2012 3:46:21 PM; 
```

上述模式匹配以下内容：

```
WHEN COMPARED WITH RESULT OF 7/13/12 09:06:42  NO SIGNIFICANT 
                             ^^^^^^^^^^^^^^^^^^^^
CHANGE; Confirmed by SMITH, MD, JOHN (2242) on 7/14/2012 3:46:21 PM;
                                               ^^^^^^^^^^^^^^^^^^^^ 
```

我希望该模式在以 Confirmed by 开头并以分号结尾的文本文件段中查找日期。此外，为了正确转换时间，模式应该只匹配最后的 AM 或 PM。如何将模式限制到此段并添加额外的 AM 或 PM 条件？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:30:10.990

为了匹配字符串`$`的结尾，请在正则表达式的末尾使用。要匹配整个短语“ `Confirmed by <someone> on <date>`”，请使用纯文本（请记住，纯文本也可以在正则表达式中使用——如果您不使用特殊字符，匹配器将逐字匹配您的查询）。您需要使用否定前瞻来排除整个单词。所以可能是这样的：

`Confirmed by (?!\ on\ )(\d+/\d+/\d+\s+\d+:\d+:\d+\s+\w+|\d+-\w+-\d+\s+\d+:\d+:\d+)$`

这将允许您匹配以“Confirmed by”开头的字符串，然后是除“on”之外的任何内容，然后是您捕获的日期和字符串的结尾。

编辑：负前瞻部分很棘手，请查看下面的答案以获取更多参考：

[排除单词/字符串的正则表达式](https://stackoverflow.com/questions/2078915/a-regular-expression-to-exclude-a-word-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:30:59.807

我认为这里不需要向前看，无论是正面的*还是*负面的。这适用于您的示例字符串：

```
Confirmed by [^;]*(\d+/\d+/\d+\s+\d+:\d+:\d+(?:\s+(?:AM|PM))?|\d+-\w+-\d+\s+\d+:\d+:\d+); 
```

有效地划分了序列与其结束分号之间的`[^;]*`匹配。`Confirmed by`（我假设分号将始终存在。）

`+(?:\s+(?:AM|PM))?`使 AM/PM 及其前导空格成为可选。

实际日期将存储在捕获组 #1 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:31:05.327

试试这个：

```
(\d+/\d+/\d+\s+\d+:\d+:\d+\s+(?:AM|PM)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:33:58.827

最简单的答案通常是一个足够好的解决方案。通过关闭默认的贪婪行为（使用问号：）`.*?`，正则表达式将尝试找到与模式匹配的最短匹配。一个模式永远不会多次匹配同一个字符串，这意味着每个模式`Confirmed by`只能与一个日期相结合，在这种情况下是下一个日期。

```
Confirmed by.*?(\d+/\d+/\d+\s+\d+:\d+:\d+\s+(?:AM|PM)); 
```

# php - 有没有办法以一致的分辨率显示外部链接的图像？

> ID：11695843
> 
> 赞同：3
> 
> 时间：2012-07-27T21:24:37.413
> 
> 标签：php, html, css

我在一个网站上工作，该网站通过直接链接到其他网站的元素来显示来自各种其他网站的图像。有些图像是高分辨率的，有些则不是。在显示许多高分辨率图像的情况下，网站性能会下降。无论如何以一致（合理）的分辨率显示外部链接的图像，以便消耗更少的带宽并且站点性能不会动摇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:29:36.137

不，不是。如果这些是您无法控制的图像，而您只是链接到它们，那么您无能为力。

一种选择是创建某种带有进度条的预加载器。您必须下载所有图像，将它们处理成更小的图像，然后显示它们。但是，您并没有真正节省任何时间，因为您仍然会首先下载图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T21:30:11.530

您只需要图像要进入的元素上的类名。您可能有一堆 div，其中包含不同大小的图像。你需要`<div class="mySize">...</div>`然后，`mySize {width:100px; height:100px;}`.

# android - Android ListView 使用 AsyncTask 更新 Image Thumbnails 导致 View 回收

> ID：11695850
> 
> 赞同：10
> 
> 时间：2012-07-27T21:25:10.670
> 
> 标签：android, listview, android-asynctask, thumbnails, recycle

我一直在尝试让缩略图与 ListView 中的图像文件的 AsyncTask 一起使用。我一直遇到行回收的常见问题，因此在滚动缩略图时被分配到错误的行。我曾尝试向 ImageView 添加标签，然后在 AsyncTask 的 onPostExecute() 中确认标签，但我的尝试没有成功。有人请帮忙！

自定义适配器如下：

```
public class MySimpleAdapter extends SimpleAdapter {

        public MySimpleAdapter(Context context,
                List<? extends Map<String, ?>> data, int resource,
                String[] from, int[] to) {
            super(context, data, resource, from, to);
            // TODO Auto-generated constructor stub
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            final View v = super.getView(position, convertView, parent);
            thumbnail = (ImageView) v.findViewById(R.id.thumbnail);
            checker = (CheckBox) v.findViewById(R.id.checkBox);
            filenametext = (TextView) v.findViewById(R.id.text1);
            String pathtoimage = startLocation.concat("/"
                    + filenametext.getText().toString());
            desctext = (TextView) v.findViewById(R.id.text2);
            String temp = desctext.getText().toString();
            if (temp.equals("Directory") == true) {
                checker.setEnabled(false);
                switch (theme) {
                case 0:
                    thumbnail.setImageResource(R.drawable.folder_light);
                    break;
                case 1:
                    thumbnail.setImageResource(R.drawable.folder_dark);
                    break;
                }

            } else {
                checker.setEnabled(true);
                if (filenametext.getText().toString().endsWith(".jpg")
                        || filenametext.getText().toString().endsWith(".png")
                        || filenametext.getText().toString().endsWith(".bmp")) {
                    Boolean hashmapfound = false;
                    for (HashMap.Entry<String, Bitmap> entry : thumbnaillist
                            .entrySet()) {
                        String key = entry.getKey();
                        if (key.equals(filenametext.getText().toString())) {
                            Log.d(TAG, "HashMapKey Found!");
                            thumbnail.setImageBitmap(entry.getValue());
                            hashmapfound = true;
                        }
                    }
                    if (!hashmapfound) {
                        Log.d(TAG, "NO HashMapKey Found! Adding to HashMap!");
                        switch (theme) {
                        case 0:
                            thumbnail
                                    .setImageResource(R.drawable.unknown_image_light);
                            break;
                        case 1:
                            thumbnail
                                    .setImageResource(R.drawable.unknown_image_dark);
                            break;
                        }
                        thumbnail.setTag((filenametext.getText().toString()));
                        new GetBitMaps(thumbnail).execute(pathtoimage,
                                filenametext.getText().toString());
                    }

                } else {
                    switch (theme) {
                    case 0:
                        thumbnail.setImageResource(R.drawable.file_light);
                        break;
                    case 1:
                        thumbnail.setImageResource(R.drawable.file_dark);
                        break;
                    }
                }
            }
            return v;
        }

    } 
```

AsyncTask 如下：

```
class GetBitMaps extends AsyncTask<String, Void, Bitmap> {

    private ImageView thumbnail;
    private String imageName;

    public GetBitMaps(ImageView thumb) {
        // TODO Auto-generated constructor stub
        thumbnail = thumb;
    }

    @Override
    protected Bitmap doInBackground(String... pathtoimage) {
        Bitmap bmp = createThumbnail(pathtoimage[0]);
        thumbnaillist.put(pathtoimage[1], bmp);
        imageName = pathtoimage[1];
        return bmp;
    }

    @Override
    protected void onPostExecute(Bitmap bmp) {

        if (((String) thumbnail.getTag()).equals(imageName)) {
            thumbnail.setImageBitmap(bmp);
        }
    }

    private Bitmap createThumbnail(String filepath) {
        Bitmap bmp = BitmapFactory.decodeFile(filepath);
        int w = bmp.getWidth();
        int h = bmp.getHeight();
        if (w > h) {
            w = 80;
            h = 40;
        } else if (w < h) {
            w = 40;
            h = 80;
        }
        bmp = Bitmap.createScaledBitmap(bmp, w, h, true);

        return bmp;
    }
} 
```

我仍然无法弄清楚要在滚动时让缩略图显示在正确的行上还要做些什么。

请注意：滚动离开受影响的行并向下滚动后，一切正常，但滚动问题并没有消失！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T19:53:34.333

从[这篇博文](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)：

您想要做的是在单独的线程中异步运行所有每行 IO 或任何繁重的 CPU 绑定例程。这里的诀窍是这样做并且仍然遵守 ListView 的回收行为。例如，如果您运行 AsyncTask 以在适配器的 getView() 中加载个人资料图片，则您为其加载图像的视图可能会在 AsyncTask 完成之前被回收到另一个位置。因此，您需要一种机制来了解在完成异步操作后视图是否还没有被回收。

实现此目的的一种简单方法是将一些信息附加到视图，以标识与其关联的行。然后您可以检查异步操作完成时视图的目标行是否仍然相同。有很多方法可以实现这一点。这只是您可以做到的一种方法的简单草图：

```
public View getView(int position, View convertView,
        ViewGroup parent) {
    ViewHolder holder;

    ...

    holder.position = position;

    new ThumbnailTask(position, holder)
            .executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, null);

    return convertView;
}

private static class ThumbnailTask extends AsyncTask {
    private int mPosition;
    private ViewHolder mHolder;

    public ThumbnailTask(int position, ViewHolder holder) {
        mPosition = position;
        mHolder = holder;
    }

    @Override
    protected Cursor doInBackground(Void... arg0) {
        // Download bitmap here
    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (mHolder.position == mPosition) {
            mHolder.thumbnail.setImageBitmap(bitmap);
        }
    }
}

private static class ViewHolder {
    public ImageView thumbnail;
    public int position;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T09:15:24.023

使用 AsyncTask.THREAD_POOL_EXECUTOR 最终会运行多个线程来获取缩略图。他们运行或完成并为视图设置图像的方式没有顺序。来回滚动时，您最终可能会在视图中看到错误的图像。

我测试了 AsyncTask.THREAD_POOL_EXECUTOR，它确实导致某些视图的图像错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:12:00.077

您可以尝试将 ListView 从您的活动传递到您的适配器构造函数中（甚至可能进入您的异步任务，这取决于您希望如何实现它）。并使用 getFirstVisiblePosition() 和 getLastVisiblePosition() 与您的位置进行比较`mPosition`

# .net - WPF 应用程序查找系统空闲时间 - GetLastInputInfo 无法识别操纵杆

> ID：11695852
> 
> 赞同：0
> 
> 时间：2012-07-27T21:25:23.167
> 
> 标签：.net, wpf, windows

在我的 WPF 应用程序中，我必须检测系统空闲时间（包括不使用鼠标、键盘、操纵杆）。

我曾经`GetLastInputInfo`得到系统的空闲时间，但我发现它只适用于鼠标或键盘的输入，而不是来自操纵杆的输入。

有没有一种方法或任何 Win32 API 可以通过检测来自所有三种设备（鼠标、键盘、操纵杆）的输入来提供 LastInputInfo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:17:46.207

您可以注册以接收 RAW Input 消息。下面的示例要求来自操纵杆的原始输入，但如果需要，您也可以要求来自鼠标和键盘的原始输入......或者您可以坚持使用 GetLastInputInfo 来处理这些情况。

如果您想在应用程序不在前台时接收事件，请在 dwFlags 上使用 RIDEV_INPUTSINK。

下面的链接中应该有足够的内容来做你想做的事情......从每个参考资料中获取点点滴滴。

*   [http://www.codeproject.com/Articles/185522/Using-the-Raw-Input-API-to-Process-Joystick-Input](http://www.codeproject.com/Articles/185522/Using-the-Raw-Input-API-to-Process-Joystick-Input)

*   [http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)

*   [http://msdn.microsoft.com/en-us/library/ms645600(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms645600(v=vs.85).aspx)

然后您需要定义一个回调来接收 Windows 消息，然后查找任何 WM_INPUT 。

*   [如何在 WPF 中处理 WndProc 消息？](https://stackoverflow.com/questions/624367/how-to-handle-wndproc-messages-in-wpf)

我认为您不必使用系统挂钩，但这里有一个链接提到：

*   [为什么 Windows 挂钩不会收到某些消息？](https://stackoverflow.com/questions/4819346/why-would-windows-hooks-not-receive-certain-messages)

# html - @media 破坏 Gmail CSS

> ID：11695854
> 
> 赞同：0
> 
> 时间：2012-07-27T21:25:33.370
> 
> 标签：html, email, gmail, mailchimp

我正在使用 MailChimp 制作自定义模板。我尚未在多个电子邮件客户端上对其进行测试，但到目前为止，我对 gmail 的测试表明，当我添加此媒体查询时，它不仅不起作用，而且会导致整个 html 电子邮件在没有 css 的情况下呈现。没有查询的其他 CSS 适用于 gmail。在其他客户端上，媒体查询可以工作，并且不会阻止其他 CSS 工作。

这是 gmail（和其他）的已知问题，还是有办法做到这一点？

```
 @media only screen 
    and (max-device-width : 480px) {
       .bodyContent div{
            font-size:24px;
        }
        h1, .h1{
            font-size:36px;
        } 
        h2, .h2{
            font-size:28px;
        }
        h4, .h4{
            font-size:28px;
        }
        .preheaderContent div{
            font-size:24px;
        } 
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:55:38.333

Gmail不支持`<style>`或。由于媒体查询是嵌入的而不是内联的，因此无法在 Gmail 中使用。查看Campaign Monitor 中的[这张方便图表](http://www.campaignmonitor.com/css/)，其中详细说明了各种客户端和应用程序支持哪些样式和选择器。`<head>``<body>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T12:06:18.910

我在使用 Gmail 时遇到了完全相同的问题。就我而言，我为电子邮件通讯编写了一个 HTML。**问题是我正在缩小整个 HTML**（包括媒体查询所在的 HEAD 部分），这显然以某种方式分解了 CSS 语法，使 Gmail 部分解释了 @media 查询中包含的 css 类。如果这是你的情况，**你可以做两件事：**

1.  **不要缩小 HEAD 部分**（我所做的）。保持不变并将您的媒体查询放在那里。

2.  **尝试不同**的缩小器并检查缩小的媒体查询以确保没有损坏。

在任何情况下，如果您正在创建电子邮件通讯，请确保**尽可能多地内联 CSS 样式**，即：使用“style”属性直接将样式添加到标签中，而不是使用 CSS 类。

# fortran - 在数组中同时写入字符和数字

> ID：11695859
> 
> 赞同：0
> 
> 时间：2012-07-27T21:25:54.680
> 
> 标签：fortran

我有一个 Fortran 代码，它读取带有单独的字符和数字行的 txt 文件，然后将它们写入具有 20 个元素的一维数组中。此代码与 Fortran 77 编译器 Force 2.0.9 不兼容。我的问题是，我们如何使用 Fortran 77 编译器应用 aformenetioned 过程；即定义一维数组，然后将 txt 文件逐行写入数组的元素中？

先感谢您。

txt文件如下：

情况1：

```
10  0  1  2  0

1.104  1.008  0.6   5.0

25  125.0  175.0  0.7  1000.0

0.60

1  5 
```

高级案例

```
15 53 0 10 0 1 0 0 1 0 0 0 0

0 0 0 0

0 0 1500.0 0 0 .03

0 0.001 0

0.1 0 0.125 0.08 0.46

0.1 5.0 0.04 
```

@Jason：我是初学者，还在学习 Fortran。我猜Force 2使用g77。以下是原始代码的对应部分。Force 2 编辑器返回一个空的 txt 文件作为结果。

```
 DIMENSION CARD(20)
       CHARACTER*64 FILENAME
       DATA XHEND / 4HEND  /

       OPEN(UNIT=3,FILE='CON')
       OPEN(UNIT=4,FILE='CON')
       OPEN(UNIT=7,STATUS='SCRATCH')

       WRITE(3,9000) 'PLEASE ENTER THE INPUT FILE NAME : '
  9000 FORMAT (A)
       READ(4,9000) FILENAME

       OPEN(UNIT=5,FILE=FILENAME,STATUS='OLD')
       WRITE(3,9000) 'PLEASE ENTER THE OUTPUT FILE NAME : '
       READ(4,9000) FILENAME
       OPEN(UNIT=6,FILE=FILENAME,STATUS='NEW')
       FILENAME = '...'

       IR = 7
       IW = 6
       IP = 15
  5    REWIND IR
       I = 0
  2    READ (5,7204,END=10000) CARD
       IF (I .EQ. 0 ) WRITE (IW,7000)
  7000 FORMAT (1H1 / 10X,15HINPUT DECK ECHO / 10X,15(1H-))
       I= I + 1
       WRITE (IW,9204)  I,CARD
       IF (CARD(1) .EQ. XHEND ) GO TO 7020
       WRITE (IR,7204) CARD
  7204 FORMAT (20A4)
  9204 FORMAT (1X,I4,2X,20A4)
       GO TO 2
  7020 REWIND IR 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:47:15.967

看起来 CARD 被用作容纳 20 个 4 字符的字符串。我不认为声明是一个字符变量，只是一个数组，所以也许在非常古老的 FORTRAN 风格中，一个非字符变量被用来保存字符？您使用的是 20A4 格式，因此这些值必须在文件中精确定位为 20 组，每组 4 个字符。您必须添加空白，以便它们对齐成 4 列组。

如果您想读取数字，将它们读入数字类型并使用列表导向 IO 会容易得多：

```
real values (20)
read (5, *) values 
```

这样您就不必担心文件中值的精确定位。

这真的是过时的 FORTRAN ......甚至是 FORTRAN-77 之前的风格。我不记得上次看到 Hollerith (H) 格式是什么时候了！你从哪里学这个？

编辑：虽然我喜欢 Fortran 来完成许多编程任务，但我不会使用 FORTRAN 66！计算机应该让事情变得更容易......没有理由必须计算字符。代替

```
7000 FORMAT (1H1 / 10X,15HINPUT DECK ECHO / 10X,15(1H-)) 
```

您可以使用

```
7000 FORMAT ( / 10X, "INPUT DECK ECHO" / 10X, 15("-") ) 
```

我只能想到使用 Hollerith 代码的两个原因：不费心更改遗留源代码（当前的 Fortran 编译器可以处理 30 年前过时的功能非常了不起！Fortran 源代码永不消亡！），或学习计算语言的历史。这个名字是为了纪念一位伟大的计算先驱，他的发明在一年内完成了 1890 年美国人口普查，而 1880 年人口普查耗时八年：[http ://en.wikipedia.org/wiki/Herman_Hollerith](http://en.wikipedia.org/wiki/Herman_Hollerith)

我很怀疑你今天会在第一栏中看到“1”执行“马车控制”。我不得不查找“1”是页面弹出的代码。您更有可能在输出中看到它。请参阅[Fortran 控制字符（回车控制）是否仍在编译器中实现？](https://stackoverflow.com/questions/3296237/are-fortran-control-characters-carriage-control-still-implemented-in-compilers)

# html - 使用 php 在 iframe 中的文本

> ID：11695864
> 
> 赞同：0
> 
> 时间：2012-07-27T21:26:36.110
> 
> 标签：html, iframe

所以我认为我在 iframe 方面遗漏了一些东西。如果运行这行 php 代码：

```
 echo"<iframe>sometext</iframe>"; 
```

iframe 显示，但文本没有。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:28:31.860

您不要在 IFRAME 标记之间放置文本。相反，将页面中所需的文本放在单独的文档中，然后使用`<iframe src="otherdocument.html"></iframe>`.

如果您希望某些文本显示在单独的可滚动框架中，您还可以使用具有适当样式设置的 DIV（设置绝对或百分比高度和宽度，并设置`overflow`为`scroll`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:34:28.003

这不是一个好的做法，但是当你设置一些内容时，你必须设置 iframe 的宽度和高度

```
<iframe src="somefile" width="99" height="99></iframe> 
```

# jquery - 如何让我的 ui-widget-content 容器突出显示 jquery 中的放置事件？

> ID：11695866
> 
> 赞同：0
> 
> 时间：2012-07-27T21:26:45.033
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 jquery 来实现拖放操作。我有两个容器，它们使用类 ui-widget-content。

我已启用绑定使用

```
 // let the todo be droppable as well, accepting items from the done
        $newtask.droppable({
            accept: "#inprogress li, #done li",
            activeClass: "custom-state-active",
            drop: function( event, ui ) {
                recycleImage( ui.draggable );
            }
        }); 
```

虽然我的容器将接受传入的 LI，但它不会突出显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:31:30.910

我需要设置activeClass：“ui-state-highlight”

# asp.net-mvc - ASP.NET4.0 MVC4 IIS7.5 错误 403.14 我真的在拔头发

> ID：11695868
> 
> 赞同：2
> 
> 时间：2012-07-27T21:26:50.280
> 
> 标签：asp.net-mvc, iis, iis-7.5, asp.net-mvc-4

我想摆脱使用 PHP 进行开发，但事实证明这样做是一件非常头疼的事情。

我正在尝试在 Win7 Professional（64 位）上使用 MVC 4、ASP.NET 4.0 建立一个网站。该网站只是使用 Visual Web Developer 2010 Express 设置的基本网站，选择 New Project > C# > Website > ASP.NET MVC 4 Application。

在 IIS7.5 中设置应用程序后，我收到 HTTP 错误 403.14 - Forbidden。我已经进行了大量研究，并尝试了多种不同的建议来解决问题，但没有任何效果。以下是我尝试过的一些事情：

1.  安装/注册 ASP.NET v4。这是最烦人的事情，因为其他人的问题在他们这样做时都得到了解决，但我的问题却没有。
2.  更改应用程序池设置：
    *   设置为经典/集成模式
    *   更改应用程序池使用的用户/权限
    *   确保已启用 32 位应用程序
3.  为与网站相关的文件夹添加了安全权限（在多个帐户上）

如果我将它添加到网站根目录，我可以获得一个常规的 html 文档来显示。似乎根本没有调用 MVC 堆栈。服务器想要显示目录，我可以启用/禁用它，但没有显示网站。在我采取最后的绝望行动之前，我可以有更多潜在的修复吗？棒球棒。

ps 如果有人想深入挖掘，我非常愿意进行 Skype 对话或共享屏幕之类的事情。我对此感到非常沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:08:17.843

因此，在我无限愚蠢的情况下，我似乎将网络服务器指向了错误的文件夹。我需要将网络服务器指向包含应用程序实际文件的文件夹，而不是包含 .SLN 文件的文件夹。很抱歉浪费您的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:45:47.660

尝试运行 aspnet_regiis [http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)

打开命令行`%windir%\Microsoft.NET\Framework64\v4.0.30319`并运行

```
aspnet_regiis -ir 
```

* * *

其他可能的解决方案：

*   退出 Skype，或任何其他类似的应用程序

# mysql - “您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法错误”Hibernate 4

> ID：11695871
> 
> 赞同：9
> 
> 时间：2012-07-27T21:27:10.540
> 
> 标签：mysql, spring, hibernate, mysql5

我在使用**Hibernate 4.1**和**MySQL 5将****文件夹**实体保存到数据库时遇到了我在下面添加的错误。我对其他实体没有任何问题。

 ****```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax 
```

**这是我的文件夹表：**

```
CREATE TABLE `folder` (
  `folder_id` int(11) NOT NULL AUTO_INCREMENT,
  `folder_name` varchar(45) COLLATE utf8_turkish_ci NOT NULL,
  `order` int(11) DEFAULT NULL,
  PRIMARY KEY (`folder_id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_turkish_ci$$ 
```

**我的文件夹实体：**

```
 @Entity
    @Table(name = "folder")
    public class Folder implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "folder_id", nullable = false, insertable = true, updatable = true, length = 10, precision = 0)
    private int folderId;
    @Column(name = "folder_name", nullable = false, insertable = true, updatable = true, length = 65535, precision = 0)
    private String folderName;
    @Column(name = "order", nullable = true, insertable = true, updatable = true, length = 10, precision = 0)
    private int order;

public int getFolderId() {
    return folderId;
}

public void setFolderId(int folderId) {
    this.folderId = folderId;
}

public String getFolderName() {
    return folderName;
}

public void setFolderName(String folderName) {
    this.folderName = folderName;
}

public int getOrder() {
    return order;
}

public void setOrder(int order) {
    this.order = order;
}
} 
```

**Hibernate 生成的插入语句：**

```
insert into folder (folder_name, order) values (?, ?) 
```

**休眠设置：**

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource"><ref local="dataSource"/></property>
        <property name="packagesToScan" value="tr.edu.aibu.dms.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.use_sql_comments">true</prop>
                <prop key="hibernate.format_sql">false</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.generate_statistics">true</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
                <!-- c3p0 properties -->
                <prop key="hibernate.c3p0.min_size">2</prop>
                <prop key="hibernate.c3p0.max_size">50</prop>
                <prop key="hibernate.c3p0.maxPoolSize">50</prop>
                <prop key="hibernate.c3p0.minPoolSize">2</prop>
                <prop key="hibernate.c3p0.initialPoolSize">2</prop>
                <prop key="hibernate.c3p0.timeout">300</prop>
                <prop key="hibernate.c3p0.max_statements">50</prop>                
            </props>
        </property>
    </bean> 
```

**完整的堆栈跟踪：**

```
SEVERE: Servlet.service() for servlet [DMS] in context with path [/DMS] threw exception [Request processing failed; nested exception is org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'order) values ('sadsads', 2)' at line 1] with root cause
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'order) values ('sadsads', 2)' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2347)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeUpdate(NewProxyPreparedStatement.java:105)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy36.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:96)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:58)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2765)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3276)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:114)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:641)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:633)
    at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:629)
    at tr.edu.aibu.util.DAOHelper.saveOrUpdateObject(DAOHelper.java:32)
    at tr.edu.aibu.dms.service.FolderService.saveOrUpdate(FolderService.java:38)
    at tr.edu.aibu.dms.service.FolderService$$FastClassByCGLIB$$c3f1b1df.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at tr.edu.aibu.dms.service.FolderService$$EnhancerByCGLIB$$7dc7f06_2.saveOrUpdate(<generated>)
    at tr.edu.aibu.dms.web.FolderController.saveOrUpdate(FolderController.java:37)
    at tr.edu.aibu.dms.web.FolderController$$FastClassByCGLIB$$46e99cf3.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at tr.edu.aibu.dms.web.FolderController$$EnhancerByCGLIB$$f96c51c0.saveOrUpdate(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:119)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at tr.edu.aibu.filter.CharsetEncodingFilter.doFilter(CharsetEncodingFilter.java:24)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-27T21:47:32.120

好的，我找到了解决方案；我们仍然可以使用“**订单**”关键字作为列名，如下所示：

```
@Column(name = "`order`", length = 10, precision =0) 
private int order; 
```

感谢**Ghost**和**Dave Newton**的关心。问候..

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-27T21:38:07.150

我认为问题在于这`ORDER`是一个 MySQL 保留字。

要执行 INSERT 语句，您需要将该列名包含在反引号中，如下所示：

```
insert into folder (folder_name, `order`) values (?, ?) 
```****

# php - 在 Symfony2 WebTestCase 中访问容器，返回 NULL

> ID：11695872
> 
> 赞同：6
> 
> 时间：2012-07-27T21:27:14.850
> 
> 标签：php, symfony

我正在尝试访问 Symfony2 WebTestCase 中的容器，但我得到了 NULL。有任何想法吗？这是我的代码：

```
$this->client = static::createClient();
$container = $this->client->getContainer(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T22:07:03.913

假设您从`WebTestCase`类扩展，您应该调用`$this->createClient()`而不是静态方法。

如果您将此方法称为静态方法，则应执行`boot()`方法

```
 static::$kernel = static::createKernel($options);
    static::$kernel->boot();

    $client = static::$kernel->getContainer()->get('test.client');
    $client->setServerParameters($server); 
```

**一定要**在里面创建客户端`setUp()`

# c# - 使用 Windows Azure 服务总线扩展 SignalR

> ID：11695879
> 
> 赞同：5
> 
> 时间：2012-07-27T21:27:58.143
> 
> 标签：c#, azure, scalability, signalr, servicebus

我有一个应用程序，它使用 SignalR 连接我网站上的用户进行聊天等事情。如果我只是第一次向公众开放我的网站，我会假设在使用的前几个月我只需要一个实例（只要需求不需要另一个实例）。我是否可以在不使用 Windows Azure 服务总线的情况下仅在同一实例中运行我的 signalR 集线器类，然后在我使用 2 个或更多实例后将其移动到服务总线？

在 Windows Azure 服务总线站点上，还有一个快速的附带问题，它说：

`The Service Bus enables up to 100 concurrent connections to an entity.`

这是否意味着只有 100 个并发用户连接到服务总线？或 100 个与实例的并发连接？我可以看到就大型网站而言，只有 100 个并发用户可能非常有限，所以我假设这意味着实例？一旦您移动到具有并发连接用户的服务总线，架构将如何工作有点困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T22:10:50.563

您的用户将连接到您的实例，而您的实例将连接到服务总线。我不是说 1 个实例 = 1 个连接（我不知道 SignalR.WindowsAzureServiceBus 在内部是如何工作的），但是运行一些实例不会达到限制。

SignalR.WindowsAzureServiceBus 将使用服务总线作为...服务总线并在实例之间分发消息，以确保您可以将 SignalR 与多个实例一起使用。

而且您确实可以在没有 Windows Azure 服务总线的情况下在单个实例中运行“普通”SignalR，稍后将其更改为 SB 实现（有关步骤，请参阅此 wiki：[http ://www.asp.net/signalr/overview/performance /scaleout-with-windows-azure-service-bus](http://www.asp.net/signalr/overview/performance/scaleout-with-windows-azure-service-bus)）。但您应该考虑到，Windows Azure SLA 仅适用于您有 2 个或更多实例正在运行的情况。

# android - 音乐的所有意图过滤器

> ID：11695880
> 
> 赞同：0
> 
> 时间：2012-07-27T21:27:58.113
> 
> 标签：android, android-intent

要从 Android 音乐应用程序获取 trak 信息，我使用这些 IntentFilter 来启动接收器：

```
IntentFilter iF = new IntentFilter();
iF.addAction("com.android.music.metachanged");
iF.addAction("com.android.music.playstatechanged");
iF.addAction("com.android.music.playbackcomplete");
iF.addAction("com.android.music.queuechanged");
iF.addAction("com.android.music.metachanged");
iF.addAction("com.miui.player.metachanged");
iF.addAction("com.htc.music.metachanged");
iF.addAction("com.nullsoft.winamp.metachanged");
iF.addAction("com.sec.android.app.music.metachanged");
iF.addAction("com.real.IMP.metachanged"); 
```

你认识别人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-21T15:17:14.307

这些是我使用的过滤器：

```
IntentFilter filter = new IntentFilter();
    filter.addAction("com.android.music.metachanged");
    filter.addAction("com.android.music.playstatechanged");
    filter.addAction("com.android.music.playbackcomplete");
    filter.addAction("com.android.music.queuechanged");

    //HTC Music
    filter.addAction("com.htc.music.playstatechanged");
    filter.addAction("com.htc.music.playbackcomplete");
    filter.addAction("com.htc.music.metachanged");
    //MIUI Player
    filter.addAction("com.miui.player.playstatechanged");
    filter.addAction("com.miui.player.playbackcomplete");
    filter.addAction("com.miui.player.metachanged");
    //Real
    filter.addAction("com.real.IMP.playstatechanged");
    filter.addAction("com.real.IMP.playbackcomplete");
    filter.addAction("com.real.IMP.metachanged");
    //SEMC Music Player
    filter.addAction("com.sonyericsson.music.playbackcontrol.ACTION_TRACK_STARTED");
    filter.addAction("com.sonyericsson.music.playbackcontrol.ACTION_PAUSED");
    filter.addAction("com.sonyericsson.music.TRACK_COMPLETED");
    filter.addAction("com.sonyericsson.music.metachanged");
    filter.addAction("com.sonyericsson.music.playbackcomplete");
    filter.addAction("com.sonyericsson.music.playstatechanged");
    //rdio
    filter.addAction("com.rdio.android.metachanged");
    filter.addAction("com.rdio.android.playstatechanged");
    //Samsung Music Player
    filter.addAction("com.samsung.sec.android.MusicPlayer.playstatechanged");
    filter.addAction("com.samsung.sec.android.MusicPlayer.playbackcomplete");
    filter.addAction("com.samsung.sec.android.MusicPlayer.metachanged");
    filter.addAction("com.sec.android.app.music.playstatechanged");
    filter.addAction("com.sec.android.app.music.playbackcomplete");
    filter.addAction("com.sec.android.app.music.metachanged");
    //Winamp
    filter.addAction("com.nullsoft.winamp.playstatechanged");
    filter.addAction("com.nullsoft.winamp.metachanged");
    //Amazon
    filter.addAction("com.amazon.mp3.playstatechanged");
    filter.addAction("com.amazon.mp3.metachanged");
    //Rhapsody
    filter.addAction("com.rhapsody.playstatechanged");
    //PowerAmp
    filter.addAction("com.maxmpz.audioplayer.playstatechanged");
    //will be added any....
    //scrobblers detect for players (poweramp for example)
    //Last.fm
    filter.addAction("fm.last.android.metachanged");
    filter.addAction("fm.last.android.playbackpaused");
    filter.addAction("fm.last.android.playbackcomplete");
    //A simple last.fm scrobbler
    filter.addAction("com.adam.aslfms.notify.playstatechanged");
    // Others
    filter.addAction("net.jjc1138.android.scrobbler.action.MUSIC_STATUS");
    filter.addAction("com.andrew.apollo.metachanged"); 
```

**编辑：**我发现[了这个](https://github.com/geecko86/QuickLyric/blob/master/QuickLyric/src/main/AndroidManifest.xml)和[这个](https://github.com/tgwizard/sls/blob/master/app/src/main/AndroidManifest.xml)。它们可能有用！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:34:35.060

你可以试试这个：

```
...
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType("uri-to-your-file", "audio/*");
context.startActivity(intent); 
```

# spotify - libspotify API：从某个时间点播放曲目？

> ID：11695882
> 
> 赞同：0
> 
> 时间：2012-07-27T21:28:18.847
> 
> 标签：spotify

有没有办法从某个时间点开始播放曲目？我发现了这个旧的[提示和提示](http://www.spotify.com/int/blog/archives/2009/06/12/hints-tips-%E2%80%93-link-to-a-specific-track-time/)，但是当我在 libspotify 程序中尝试时没有用。这事有进一步更新吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:17:58.787

在 libSpotify 中，您需要开始播放曲目，然后立即寻找您想要的偏移量。

# twitter-bootstrap - Bootstrap 用更少的 bootstrap-rails gem 覆盖

> ID：11695883
> 
> 赞同：0
> 
> 时间：2012-07-27T21:28:28.520
> 
> 标签：twitter-bootstrap

我正在尝试更改`.well`.

我必须覆盖，因为`@import "twitter/bootstrap/bootstrap";`从 twitter-bootstrap-rails gem 中引入了 css，所以我无法编辑原始引导文件。

有没有一种方法可以在不执行以下操作的情况下使用 less 覆盖它：

```
.well {
    background: red;
} 
```

（因为这种方式有两个`.well`定义给浏览器 - 上面这个和来自引导程序的原始定义）

看起来 bootstrap 确实有一种覆盖方式：例如改变我可以使用的身体背景`@bodyBackground`。但我不确定这些定义是什么，`.well`没有很好的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:42:41.967

他们没有使用定义（[wells.less](https://github.com/twitter/bootstrap/blob/master/less/wells.less)）中`@bodyBackround`的任何变量。因此，这个不错且简单的解决方案不适合您。`.well`

# clojure - 在 Clojure 中为 -?> 导入什么？

> ID：11695884
> 
> 赞同：3
> 
> 时间：2012-07-27T21:28:28.847
> 
> 标签：clojure

我正在尝试[`-?>`](http://clojuredocs.org/clojure_contrib/1.2.0/clojure.contrib.core/-_q%3E)在 Clojure 中使用，但出现错误：

```
Caused by: java.lang.RuntimeException: Unable to resolve symbol: -?> in this context 
```

我需要导入什么才能使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T21:52:37.297

首先，您需要在`core.incubator`project.clj 中添加一个依赖项（如果您不使用[leiningen](https://github.com/technomancy/leiningen)，那应该是您的第一步）：

```
:dependencies [...
               [org.clojure/core.incubator "0.1.1"]] 
```

接下来，您可以像这样在代码中使用它：

```
(ns myapp.core
  (:use [clojure.core.incubator :only [-?>]])) 
```

如果您使用的是 Clojure 1.4，这也可以：

```
(ns myapp.core
  (:require [clojure.core.incubator :refer [-?>]])) 
```

如果您不打算支持 Clojure 1.4 之前的 Clojure 版本，则更可取。

# c# - c# .net 为什么 Task.Run 似乎处理 Func 与其他代码不同？

> ID：11695886
> 
> 赞同：18
> 
> 时间：2012-07-27T21:28:35.260
> 
> 标签：c#, asynchronous, tap

作为 .NET 4.5 一部分的新 Task.Run 静态方法的行为似乎与预期不同。

例如：

```
Task<Int32> t = Task.Run(()=>5); 
```

编译得很好，但是

```
Task<Int32> t = Task.Run(MyIntReturningMethod);
...
public Int32 MyIntReturningMethod() {
  return (5);
  } 
```

抱怨 MyIntReturningMethod 返回错误的类型。

也许我只是不明白 Task.Run 的哪个重载被调用。但在我看来，我上面的 lambda 代码看起来很像 a `Func<Int32>`，而 MyIntReturningMethod 绝对兼容`Func<Int32>`

有什么想法吗？迈克尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-15T20:53:41.120

（当然，要摆脱问题，简单地说`Task.Run((Func<int>)MyIntReturningMethod)`。）

`Task`这与等等完全无关。

这里要注意的一个问题是，当存在很多重载时，编译器**错误文本**将只关注一对“对”重载。所以这很令人困惑。原因是确定最佳重载的算法会考虑*所有*重载，并且当该算法得出无法找到最佳重载的结论时，它不会为错误文本产生特定的重载对，因为所有重载都可能（或可能不会）已经参与。

要了解会发生什么，请参阅以下简化版本：

```
static class Program
{
    static void Main()
    {
        Run(() => 5);  // compiles, goes to generic overload
        Run(M);        // won't compile!
    }

    static void Run(Action a)
    {
    }
    static void Run<T>(Func<T> f)
    {
    }
    static int M()
    {
        return 5;
    }
} 
```

正如我们所看到的，这绝对没有引用`Task`，但仍然产生同样的问题。

请注意，匿名函数转换和方法组转换（仍然）不是完全相同的东西。详细信息可在*C# 语言规范*中找到。

拉姆达：

```
() => 5 
```

实际上甚至不能转换为`System.Action`类型。如果您尝试这样做：

```
Action myLittleVariable = () => 5; 
```

它将失败并*出现错误 CS0201：只有 assignment、call、increment、decrement、await 和 new object 表达式可以用作语句*。所以很清楚与 lambda 一起使用哪个重载。

另一方面，方法组：

```
M 
```

可转换为`Func<int>`和`Action`。请记住，完全允许*不*获取返回值，就像下面的语句：

```
M(); // don't use return value 
```

本身是有效的。

这类回答了这个问题，但我会举一个额外的例子来说明一点。考虑这个例子：

```
static class Program
{
    static void Main()
    {
        Run(() => int.Parse("5"));  // compiles!
    }

    static void Run(Action a)
    {
    }
    static void Run<T>(Func<T> f)
    {
    }
} 
```

在最后一个示例中，lambda 实际上可以转换为两种委托类型！（只需尝试删除泛型重载。）对于 lambda 箭头的右侧`=>`是一个表达式：

```
int.Parse("5") 
```

这本身作为一个声明是有效的。但是在这种情况下，重载解析仍然可以找到更好的重载。正如我之前所说，检查 C# 规范。

* * *

受 HansPassant 和 BlueRaja-DannyPflughoeft 的启发，这是一个最终的（我认为）示例：

```
class Program
{
    static void Main()
    {
        Run(M);        // won't compile!
    }

    static void Run(Func<int> f)
    {
    }
    static void Run(Func<FileStream> f)
    {
    }

    static int M()
    {
        return 5;
    }
} 
```

请注意，在这种情况下，绝对`int` `5`不可能将 转换为`System.IO.FileStream`. 方法组转换仍然失败。这可能与具有两个普通方法的事实有关`int f();`，`FileStream f();`例如，某些接口从两个不同的基接口继承，无法解析调用`f();`。返回类型不是 C# 中方法签名的一部分。

我仍然避免`Task`在我的回答中引入，因为它可能会给人关于这个问题的错误印象。人们很难理解`Task`，而且它在 BCL 中相对较新。

* * *

这个答案已经发展了很多。最后，事实证明这与线程[Why is `Func<T>`ambiguous with中的根本问题相同`Func<IEnumerable<T>>`？](https://stackoverflow.com/questions/4573011/). 我的例子`Func<int>`和`Func<FileStream>`几乎一样清楚。Eric Lippert 在其他线程中给出了一个很好的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-08T23:38:57.537

> 这应该在 .Net 4.0 中修复，但 Task.Run() 是 .Net 4.5 的新功能

`Task.Run(Func<Task<T>>)`.NET 4.5 通过添加方法有其自身的重载歧义。以及在 C# 版本 5 中对 async/await 的支持。它允许`T foo()`从`Func<Task<T>>`.

那是对 async/await 非常友好的语法糖，但在这里会产生空洞。*在方法重载选择中没有*`async`考虑方法声明中关键字的省略，这打开了另一个痛苦的潘多拉盒子，程序员在他们本意的时候忘记了使用*异步。*否则遵循通常的 C# 约定，即仅将方法签名中的方法名称和参数考虑用于方法重载选择。

 **需要显式使用委托类型来解决歧义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-08T22:45:06.483

当您将 a 传递给`Func<TResult>`方法`Run<TResult>(Func<TResult>)`时，您不必在方法调用上指定泛型，因为它可以推断它。您的 lambda 会进行该推断。

但是，您的函数实际上不是 a`Func<TResult>`而 lambda 是。

如果你这样做`Func<Int32> f = MyIntReturningMethod`，它会起作用。现在，如果您指定`Task.Run<Int32>(MyIntReturningMethod)`，您希望它也可以工作。但是它无法决定是否应该解决`Func<Task<TResult>>`重载或`Func<TResult>`重载，这没有多大意义，因为很明显该方法没有返回任务。

如果你编译如下简单的东西：

```
void Main()
{
    Thing(MyIntReturningMethod);
}

public void Thing<T>(Func<T> o)
{
    o();
}

public Int32 MyIntReturningMethod()
{
return (5);
} 
```

IL看起来像这样....

```
IL_0001:  ldarg.0     
IL_0002:  ldarg.0     
IL_0003:  ldftn       UserQuery.MyIntReturningMethod
IL_0009:  newobj      System.Func<System.Int32>..ctor
IL_000E:  call        UserQuery.Thing 
```

（一些额外的东西来自 LINQ Pad 的添加......比如 UserQuery 部分）

IL 看起来与您进行显式转换一样。所以看起来编译器实际上并不知道使用哪种方法。所以它不知道要自动创建什么演员表。

你可以用`Task.Run<Int32>((Func<Int32>)MyIntReturningMethod)`它来帮助它一点。尽管我确实同意这似乎是编译器应该能够处理的事情。因为`Func<Task<Int32>>`与 不一样`Func<Int32>`，所以它们会混淆编译器是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T21:31:24.230

似乎是一个重载解决问题。编译器无法判断您正在调用哪个重载（因为首先它必须找到要创建的正确委托，它不知道，因为这取决于您正在调用的重载）。它必须猜测和检查，但我猜它不是那么聪明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T14:38:29.343

[Tyler Jensen](https://stackoverflow.com/users/28617/tyler-jensen)的方法对我有用。

此外，您可以使用 lambda 表达式进行尝试：

```
public class MyTest
{
    public void RunTest()
    {
        Task<Int32> t = Task.Run<Int32>(() => MyIntReturningMethod());
        t.Wait();
        Console.WriteLine(t.Result);
    }

    public int MyIntReturningMethod()
    {
        return (5);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-14T21:36:55.730

这是我的尝试：

```
public class MyTest
{
    public void RunTest()
    {
        Task<Int32> t = Task.Run<Int32>(new Func<int>(MyIntReturningMethod));
        t.Wait();
        Console.WriteLine(t.Result);
    }

    public int MyIntReturningMethod()
    {
        return (5);
    }
} 
```**

# join - solr 中的多级连接

> ID：11695887
> 
> 赞同：1
> 
> 时间：2012-07-27T21:29:04.523
> 
> 标签：join, solr

嗨，我有 3 级树结构中的数据。当用户搜索第三级节点时，我可以使用 SOlr JOIN 来获取根节点吗？

例如 -

```
 PATIENT1
       -> FirstName1
       -> LastName1
       -> DOCUMENTS1_1
            -> document_type1_1
            -> document_description1_1
            -> document_value1_1
            -> CODE_ITEMS1_1_1
                -> Code_id1_1_1
                -> code1_1_1
            -> CODE_ITEMS1_1_1
                -> Code_id1_1_2
                -> code1_1_2
       -> DOCUMENTS1_2
            -> document_type1_2
            -> document_description1_2
            -> document_value1_2
            -> CODE_ITEMS1_2_1
                -> Code_id1_2_1
                -> code1_2_1
            -> CODE_ITEMS1_2_2
                -> Code_id1_2_2
                -> code1_2_2
    PATIENT2
       -> FirstName2
       -> LastName2
       -> DOCUMENTS2_1
            -> document_type2_1
            -> document_description2_1
            -> document_value2_1
            -> CODE_ITEMS2_1_1
                -> Code_id2_1_1
                -> code2_1_1
            -> CODE_ITEMS2_1_2
                -> Code_id2_1_2
                -> code2_1_2 
```

我想搜索一个 CODE_ITEM 并返回与代码项搜索条件匹配的所有患者。如何才能做到这一点。是否可以执行两次连接。第一个连接给出了 code_item 搜索的所有文档，下一个连接给出了所有 Patient。

类似于 SQL 查询中的内容 -

```
select * from patients where docID (select DOCID from DOCUMENTS where CODEID IN (select CODEID from CODE_ITEMS where CODE LIKE '%SEARCH_TEXT%')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:59:15.040

我真的不知道 Solr 连接内部是如何工作的，但是知道 RDB 多重连接在大型数据集上效率极低，我可能最终会编写自己的[org.apache.solr.handler.component.QueryComponent](http://svn.apache.org/viewvc/lucene/dev/trunk/solr/core/src/java/org/apache/solr/handler/component/QueryComponent.java?view=markup)之后进行正常搜索，获取根父（当然，这种方法要求每个子文档都有对其根患者的引用）。

如果您选择走这条路，我将发布一些示例。在我之前的一个 Solr 项目中，我遇到了类似的（更复杂的本体）问题。

更简单的方法（在解决这个问题时更简单，而不是整个方法）是完全扁平化架构的这一部分并将所有信息（文档和代码项）存储到其父患者中，然后进行常规搜索。这更符合 Solr（您必须以不同的方式查看 Solr 架构。它与您的常规 RDB 规范化架构完全不同，Solr 鼓励数据冗余，因此您可以在没有连接的情况下快速搜索）。

第三种方法是对代表性数据集进行一些连接测试，看看搜索性能如何受到影响。

最后，这实际上取决于您的整个设置和要求（当然还有测试结果）。

**编辑1：** 我在几年前做过，所以你必须弄清楚事情是否同时发生了变化。

**1.创建自定义请求处理程序**

要完成完全干净的工作，我建议您通过简单地复制以开头的整个部分来定义自己的请求处理程序（在 solrconfig.xml 中）

`<requestHandler name="/select" class="solr.SearchHandler"> ... ... </requestHandler>`

然后更改`name`为对您的用户有意义的内容，例如`/searchPatients`. 另外，在里面添加这个部分：

```
 <arr name="components">
            <str>patients</str>
            <str>facet</str>
            <str>mlt</str>
            <str>highlight</str>            
            <str>stats</str>
            <str>debug</str>
    </arr> 
```

**2.创建自定义搜索组件**

将此添加到您的 solrconfig：

```
<searchComponent name="patients" class="org.apache.solr.handler.component.PatientQueryComponent"/> 
```

创建 PatientQueryComponent 类：
*以下源可能有错误，因为我在文本编辑器中编辑了我的原始源并在没有测试的情况下发布了它，但重要的是你得到的是配方，而不是完成的源，对吗？我抛弃了缓存、延迟加载、准备方法，只留下了基本逻辑。您必须查看性能将如何受到影响，然后在需要时调整源。我的表现很好，但我的索引中总共有几百万个文档。*

```
public class PatientQueryComponent extends SearchComponent {
...

    @Override
    public void process(ResponseBuilder rb) throws IOException {
        SolrQueryRequest req = rb.req;
        SolrQueryResponse rsp = rb.rsp;
        SolrParams params = req.getParams();
        if (!params.getBool(COMPONENT_NAME, true)) {
            return;
        }
        searcher = req.getSearcher();
        // -1 as flag if not set.
        long timeAllowed = (long)params.getInt( CommonParams.TIME_ALLOWED, -1 );

        DocList initialSearchList = null;

        SolrIndexSearcher.QueryCommand cmd = rb.getQueryCommand();
        cmd.setTimeAllowed(timeAllowed);
        cmd.setSupersetMaxDoc(UNLIMITED_MAX_COUNT);

        // fire standard query
        SolrIndexSearcher.QueryResult result = new SolrIndexSearcher.QueryResult();
        searcher.search(result, cmd);

        initialSearchList = result.getDocList();

        // Set which'll hold patient IDs
        List<String> patientIds = new ArrayList<String>();

        DocIterator iterator = initialSearchList.iterator();
        int id;

        // loop through search results
        while(iterator.hasNext()) {
            // add your if logic (doc type, ...)
            id = iterator.nextDoc();
            doc = searcher.doc(id); // , fields) you can try lazy field loading and load only patientID filed value into the doc
            String patientId = doc.get("patientID") // field that's in child doc and points to its root parent - patient
            patientIds.add(patientId);
        }

        // All all unique patient IDs in TermsFilter
        TermsFilter termsFilter = new TermsFilter();
        Term term;

        for(String pid : patientIds){
            term = new Term("patient_ID", pid); // field that's unique (name) to patient and holds patientID
            termsFilter.addTerm(term);
        }

        // get all patients whose ID is in TermsFilter
        DocList patientsList = null;        
        patientsList = searcher.getDocList(new MatchAllDocsQuery(), searcher.convertFilter(termsFilter), null, 0, 1000);

        long totalSize = initialSearchList.size() + patientsList.size();
        logger.info("Total: " + totalSize);

        SolrDocumentList solrResultList = SolrPluginUtils.docListToSolrDocumentList(patientsList, searcher, null, null);
        SolrDocumentList solrInitialList = SolrPluginUtils.docListToSolrDocumentList(initialSearchList, searcher, null, null);

        // Add patients to the end of the list
        for(SolrDocument parent : solrResultList){
            solrInitialList.add(parent);
        }

        // replace initial results in response
        SolrPluginUtils.addOrReplaceResults(rsp, solrInitialList);
        rsp.addToLog("hitsRef", patientsList.size());
        rb.setResult( result );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T14:29:35.960

看看这篇文章：http: [//blog.griddynamics.com/2013/12/grandchildren-and-siblings-with-block.html](http://blog.griddynamics.com/2013/12/grandchildren-and-siblings-with-block.html)

实际上你可以在 SOLR 4.5 中做到这一点

# android - Android 处理程序是否使应用程序保持活力？

> ID：11695888
> 
> 赞同：1
> 
> 时间：2012-07-27T21:29:08.827
> 
> 标签：android, android-handler

我有一些我想要执行的定期处理。我是这样设置的：

```
periodicHandler = new Handler(new Handler.Callback()
{
    public boolean handleMessage(Message msg)
    {
        doPeriodicStuff();

        // schedule the next call
        periodicHandler.sendEmptyMessageDelayed(0, PERIODIC_INTERVAL);

        return true;
    }
});

// schedule the initial call
periodicHandler.sendEmptyMessageDelayed(0, INITIAL_DELAY); 
```

我有一些问题：

*   当应用程序在后台时，这些处理程序会触发吗？（如果没有，当应用程序返回前台时是否会触发任何过期的处理程序？）
*   这些排队的消息会让应用程序“活着”吗？也就是说，这些排队消息的存在是否会阻止 Android 杀死应用程序，即使所有活动都消失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:32:45.730

您应该考虑使用服务。它更擅长维护后台任务，您可以将其配置为仅在内存极低的情况下停止运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:21:39.573

> 这些排队的消息会让应用程序“活着”吗？也就是说，这些排队消息的存在是否会阻止 Android 杀死应用程序，即使所有活动都消失了？

不会。Android 可以并且会在需要时终止您的进程。

# c++ - blob 内数据的对齐和填充

> ID：11695889
> 
> 赞同：0
> 
> 时间：2012-07-27T21:29:12.253
> 
> 标签：c++, visual-c++

我正在使用一个大 blob（分配的内存）将数据连续存储在内存中。

我希望 blob 中的数据按如下方式组织：

> | data1 类型 | 数据1 | data2 类型 | 数据2 | dataN 类型 | 数据N |

`dataN type`是`int`我在开关中用来将 转换`dataN`为适当类型的一个。

问题是我想保持数据正确对齐，所以我想强制 blob 内的所有数据都打包为 8 字节（我选择 8 字节进行打包，因为它可能会保持数据正确对齐？），这样数据将紧密包装（由于对齐，数据->数据类型之间不会有漏洞）。

我试过这个：

```
#pragma pack(8)
class A
{
public:
    short b;
    int x;
    char v;
}; 
```

但它不起作用，因为使用`sizeof(A)`我得到 12 个字节而不是预期的 16 个字节。

PS：在 x86 或 x64 架构中是否有任何大于 8 字节的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:49:45.713

看起来在这种情况下`#pragma pack(8)`没有效果。

在 MS 编译器文档中，pack 的参数以下列方式描述： 指定用于打包的值（以字节为单位）。n 的默认值为 8。有效值为 1、2、4、8 和 16。成员的对齐方式将位于n 的倍数或成员**大小的倍数的边界上，****以两者为准更小**。

因此，该`#pragma pack`指令不能增加成员的对齐方式，而是可以减少它（`#pragma pack(1)`例如使用）。在您的情况下，选择整个结构对齐以使其最大元素自然对齐（`int`在 32 位和 64 位 CPU 上通常为 4 个字节）。结果，总大小为 4 * 3 = 12 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:16:23.653

这个答案假设了两件事：

1.  您希望二进制 blob 紧密包装（无孔）。
2.  您不希望以未对齐的方式访问数据成员（与访问默认情况下编译器想要的对齐方式的数据成员相比，这很慢）。

如果是这种情况，那么您应该考虑将大“blob”视为面向字节的流的设计。在此流中，您编组/解组填充具有自然对齐的对象的标记/值对。

使用此方案，您可以两全其美。您会得到一个紧凑的 blob，但是一旦从 blob 中提取对象，由于自然对齐，访问对象成员的速度很快。它也是可移植的¹并且不依赖于编译器扩展。缺点是您需要为可以放入 blob 中的每种类型编写样板代码。

基本示例：

```
#include <cassert>
#include <iomanip>
#include <iostream>
#include <stdint.h>
#include <vector>

enum BlobKey
{
    kBlobKey_Widget,
    kBlobKey_Gadget
};

class Blob
{
public:
    Blob() : cursor_(0) {}

    // Extract a value from the blob. The key associated with this value should
    // already have been extracted.
    template <typename T>
    Blob& operator>>(T& value)
    {
        assert(cursor_ < bytes_.size());
        char* dest = reinterpret_cast<char*>(&value);
        for (size_t i=0; i<sizeof(T); ++i)
            dest[i] = bytes_[cursor_++];
        return *this;
    }

    // Insert a value into the blob
    template <typename T>
    Blob& operator<<(const T& value)
    {
        const char* src = reinterpret_cast<const char*>(&value);
        for (size_t i=0; i<sizeof(T); ++i)
            bytes_.push_back(src[i]);
        return *this;
    }

    // Overloads of << and >> for std::string might be useful

    bool atEnd() const {return cursor_ >= bytes_.size();}

    void rewind() {cursor_ = 0;}

    void clear() {bytes_.clear(); rewind();}

    void print() const
    {
        using namespace std;
        for (size_t i=0; i<bytes_.size(); ++i)
            cout << setfill('0') << setw(2) << hex << int(bytes_[i]) << " ";
        std::cout << "\n" << dec << bytes_.size() << " bytes\n";
    }

private:
    std::vector<uint8_t> bytes_;
    size_t cursor_;
};

class Widget
{
public:
    explicit Widget(int a=0, short b=0, char c=0) : a_(a), b_(b), c_(c) {}
    void print() const
    {
        std::cout << "Widget: a_=" << a_ << " b=" << b_
                  << " c_=" << c_ << "\n";
    }
private:
    int a_;
    short b_;
    long c_;
    friend Blob& operator>>(Blob& blob, Widget& widget)
    {
        // Demarshall members from blob
        blob >> widget.a_;
        blob >> widget.b_;
        blob >> widget.c_;
        return blob;
    };
    friend Blob& operator<<(Blob& blob, Widget& widget)
    {
        // Marshall members to blob
        blob << kBlobKey_Widget;
        blob << widget.a_;
        blob << widget.b_;
        blob << widget.c_;
        return blob;
    };
};

class Gadget
{
public:
    explicit Gadget(long a=0, char b=0, short c=0) : a_(a), b_(b), c_(c) {}
    void print() const
    {
        std::cout << "Gadget: a_=" << a_ << " b=" << b_
                  << " c_=" << c_ << "\n";
    }
private:
    long a_;
    int b_;
    short c_;
    friend Blob& operator>>(Blob& blob, Gadget& gadget)
    {
        // Demarshall members from blob
        blob >> gadget.a_;
        blob >> gadget.b_;
        blob >> gadget.c_;
        return blob;
    };
    friend Blob& operator<<(Blob& blob, Gadget& gadget)
    {
        // Marshall members to blob
        blob << kBlobKey_Gadget;
        blob << gadget.a_;
        blob << gadget.b_;
        blob << gadget.c_;
        return blob;
    };
};

int main()
{
    Widget w1(1,2,3), w2(4,5,6);
    Gadget g1(7,8,9), g2(10,11,12);

    // Fill blob with widgets and gadgets
    Blob blob;
    blob << w1 << g1 << w2 << g2;
    blob.print();

    // Retrieve widgets and gadgets from blob
    BlobKey key;
    while (!blob.atEnd())
    {
        blob >> key;
        switch (key)
        {
            case kBlobKey_Widget:
                {
                    Widget w;
                    blob >> w;
                    w.print();
                }
                break;

            case kBlobKey_Gadget:
                {
                    Gadget g;
                    blob >> g;
                    g.print();
                }
                break;

            default:
                std::cout << "Unknown object type in blob\n";
                assert(false);
        }
    }
} 
```

如果您可以使用 Boost，您可能希望将[Boost.Serialization](http://www.boost.org/doc/libs/release/libs/serialization/doc/index.html)与二进制内存流一起使用，如本[答案](https://stackoverflow.com/a/2080057/245265)所示。

* * *

[(1)*可移植*意味着源代码可以在任何地方编译。如果传输到具有不同字节序和整数大小的其他机器，生成的二进制 blob 将**不可**移植。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:09:05.567

你试过这个吗？

```
class A {
public:
    union {
        uint64_t dummy;

        int data;
    };
}; 
```

的实例`A`及其`data`成员现在将始终对齐到 8 个字节。当然，如果你在前面挤一个 4 字节的数据类型，这是没有意义的，它也必须是 8 字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:08:34.927

@Negai 解释了为什么你会得到观察到的大小。

您还应该重新考虑您对“紧密包装”数据的假设。对于上述结构，结构中有*孔*。假设 32 位 int 和 16 位 short，在 short 之后有一个两个字节的洞，在 char 之后有一个 3 个字节的洞。但这并不重要，因为这个空间在结构内部。

换句话说，要么你得到一个紧凑的数据结构，要么你得到一个对齐的数据结构，但不是两者兼而有之。

通常，您不需要做任何特别的事情来获得编译器默认执行的“对齐”行为。**如果您希望数据“打包”而不是对齐， #pragma pack**很有用，即删除编译器引入的一些漏洞以保持数据对齐。

# java - 如何添加多个编辑视图以提交到电子邮件意图

> ID：11695894
> 
> 赞同：1
> 
> 时间：2012-07-27T21:29:39.163
> 
> 标签：java, android, email, android-intent, android-edittext

我正在尝试通过电子邮件发送多个 Edittext 字段。

该代码将更能理解我想要完成的工作，

```
public class EmailSupport extends Activity {

  Button buttonSend;
  String textTo;
  EditText textSubject;
  EditText nametext;
  EditText emailtext;
  EditText phonetext;
  EditText topictext;
  EditText detailstext;

@Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.email_form_to_support);

        public void onClick(View v) {
        String[] recipients = new String[]{"email@email.com", "email@email.com",};
          String subject = textSubject.getText().toString();
          String name = nametext.getText().toString();
          String emails = emailtext.getText().toString();
          String phone = phonetext.getText().toString();
          String topic = topictext.getText().toString();
          String details = detailstext.getText().toString();

          Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);
          email.putExtra(Intent.EXTRA_SUBJECT, subject);
          email.putExtra(Intent.EXTRA_TEXT, name);
          email.putExtra(Intent.EXTRA_TEXT, emails);
          email.putExtra(Intent.EXTRA_TEXT, phone);
          email.putExtra(Intent.EXTRA_TEXT, topic);
          email.putExtra(Intent.EXTRA_TEXT, details); 
```

我需要知道如何合并所有编辑文本输入，如下面的布局文件中所示，以基本添加到电子邮件中的消息文本。我的主题 edittext 是我的电子邮件主题，我想强制电子邮件地址默认发送它。

email_form_to_support.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/name" />

    <EditText
        android:id="@+id/nametext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/email" />

    <EditText
        android:id="@+id/emailtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:minLines="1"
        android:scrollbars="vertical" />

<TextView
    android:id="@+id/phone"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/phone" />

    <EditText
        android:id="@+id/phonetext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:maxLines="8"
        android:minLines="1"
        android:scrollbars="vertical" />

    <TextView
        android:id="@+id/topic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/topic" />

    <EditText
        android:id="@+id/topictext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:maxLines="3"
        android:minLines="1"
        android:scrollbars="vertical" />

    <TextView
        android:id="@+id/details"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/details" />

    <EditText
        android:id="@+id/detailstext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:maxLines="8"
        android:minLines="1"
        android:scrollbars="vertical" />

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/submit" />

</LinearLayout> 
```

任何帮助将不胜感激。我觉得我只是错过了一些简单的东西，但我可能错了。到目前为止，使用这种来源方法，我在 String message = xxxtext.getText().toString(); 上遇到错误。因为我有好几次。我不知道该给每个人放什么。

Per Pavel Dudka 建议我将 Source 更改为 This

```
 public class EmailSupport extends Activity {

Button buttonSend;
String textTo;
EditText textSubject;
EditText nametext;
EditText emailtext;
EditText phonetext;
EditText topictext;
EditText detailstext;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.email_form_to_support);

    buttonSend = (Button) findViewById(R.id.submit);
    textTo = (String) getString(R.string.to);
    textSubject = (EditText) findViewById(R.id.topictext);
    nametext = (EditText) findViewById(R.id.nametext);
    emailtext = (EditText) findViewById(R.id.emailtext);
    phonetext = (EditText) findViewById(R.id.phonetext);
    topictext = (EditText) findViewById(R.id.topictext);
    detailstext = (EditText) findViewById(R.id.detailstext);

    buttonSend.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            StringBuilder emailBodyBuilder = new StringBuilder();

            emailBodyBuilder.append(textSubject.getText().toString());
            emailBodyBuilder.append("\n");
            emailBodyBuilder.append(nametext.getText().toString());
            emailBodyBuilder.append("\n");
            emailBodyBuilder.append(emailtext.getText().toString());
            emailBodyBuilder.append("\n");
            emailBodyBuilder.append(topictext.getText().toString());
            emailBodyBuilder.append("\n");
            emailBodyBuilder.append(phonetext.getText().toString());
            emailBodyBuilder.append("\n");
            emailBodyBuilder.append(detailstext.getText().toString());

            final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
            emailIntent.setType("plain/text");
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new  String[]{"email1@domen.com", "email2@domen.com"});
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, textSubject.getText().toString());
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailBodyBuilder.toString());
            startActivity(Intent.createChooser(emailIntent, "Send mail..."));
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:38:37.020

我不确定您要完成什么，但请更改：

```
 public void onClick(View v) {
    String[] recipients = new String[]{"email@email.com", "",};
      String subject = textSubject.getText().toString();
      String message = nametext.getText().toString();
      String message = textMessage.getText().toString();
      String message = textMessage.getText().toString();
      String message = textMessage.getText().toString(); 
```

对此：

```
public void onClick(View v) {
    String[] recipients = new String[]{"email@email.com", "email2@email.com"};
    String subject = textSubject.getText().toString();
    String name = nametext.getText().toString();
    String email = emailtext.getText().toString();
    String phone = phonetext.getText().toString();
    String topics = topicstext.getText().toString();
    String details = deatilstext.getText().toString();

    // Do something with this Strings
} 
```

在这里，每个 EditText 都存储在它自己的 String 中，供您随意使用。

**从评论添加**

简单地组合字符串，这是一种简单的方法：

```
String message = nametext.getText().toString();
message += "\n" + emailtext.getText().toString();
etc. 
```

其中 "\n" 是一个换行符，如使用`Enter`. 您可以在字段之间设置更有趣的格式，也许：

```
message += "\n\nEmail:\n" + emailtext.getText().toString(); 
```

但这取决于你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:57:28.777

您可以使用 StringBuilder 来撰写电子邮件正文。考虑使用以下代码：

```
public void onClick(View v) {

    StringBuilder emailBodyBuilder = new StringBuilder();

    emailBodyBuilder.append(textSubject.getText().toString());
    emailBodyBuilder.append("\n");
    emailBodyBuilder.append(nametext.getText().toString());
    emailBodyBuilder.append("\n");
    emailBodyBuilder.append(emailtext.getText().toString());
    emailBodyBuilder.append("\n");
    emailBodyBuilder.append(topicstext.getText().toString());
    emailBodyBuilder.append("\n");
    emailBodyBuilder.append(phonetext.getText().toString());
    emailBodyBuilder.append("\n");
    emailBodyBuilder.append(deatilstext.getText().toString());

    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("plain/text");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"email1@domen.com", "email2@domen.com"});
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, textSubject.getText().toString());
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailBodyBuilder.toString());
    activity.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
} 
```

`activity`- 是您需要存储才能发送意图的活动参考。如果您`onClick`在您的`Activity`.

```
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

如果您在访问编辑文本视图时开始收到 NullPointer 异常，请确保已初始化它们。就像是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.email_form_to_support);
    textSubject = (EditText)findViewById(R.id.email);
    ...//and so forth 
```

# asp.net - 调整 textarea 的大小时，如果父元素是表格，它会扩展以适应，但当它是 div 时则不会。为什么？

> ID：11695899
> 
> 赞同：1
> 
> 时间：2012-07-27T21:29:51.077
> 
> 标签：asp.net, css, textbox, textarea, multiline

我有一个包含在几个嵌套 div 中的 textarea (asp.net multiLine TextBox)。重新调整 textarea 的大小时，它会扩展所有其他元素。当包裹在桌子中时情况并非如此，因为它会向下和向右推动周围的元素以适应重新调整大小。如何让它在 div 中工作？

我不是 CSS 专家，但我尝试过包含子 div 的相对位置，但这只会使 textarea 在扩展时隐藏所有其他元素。我可以使用表格，但我试图摆脱表格进行布局。

我已经扩展了外部 div 以适应具有相对定位的内部 div 的内容，但它似乎在这里不起作用。此外，溢出效应也是不可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:51:02.333

`div`您可以在using中获得相同的结果（如表格）

```
div{
    display:table;
} 
```

[**这是一个小提琴**](http://jsfiddle.net/heera/TbLay/)。

# c# - 使用 jQuery 在 GridView 中水平滚动内容？

> ID：11695907
> 
> 赞同：0
> 
> 时间：2012-07-27T21:30:24.633
> 
> 标签：c#, jquery, asp.net, gridview, scroll

我正在使用 C#/.NET 开发 Web 应用程序，我的目标是找到一种使用 jQuery 在 ASP.NET gridview 控件中水平滚动内容的方法（不使用滚动条或分页）。我的 gridview 基本上包含许多包含数百行数据的列，因此我想为用户提供一种轻松水平滚动内容以查看更多列的方法，而不管他们在页面上滚动了多远。

在过去的几天里，这个看似简单的任务对我来说一直是一场噩梦，因为我在网上搜索了所有内容，但没有发现任何类似的东西。我尝试了各种解决方案，即这些：

[http://www.smoothdivscroll.com/#quickdemo](http://www.smoothdivscroll.com/#quickdemo)

[http://www.gmarwaha.com/jquery/jcarousellite/?#demo](http://www.gmarwaha.com/jquery/jcarousellite/?#demo)

我能够在这些站点上复制代码，并轻松地进行设置，以与演示相同的方式滚动图像集合。例如，在第一个链接中，我所要做的就是包含 .js 文件，然后将其添加到我的标记中：

```
$(document).ready(function() {
    $("#makeMeScrollable").smoothDivScroll({ 
        mousewheelScrolling: true
    });
}); 
```

然后我只需要在 < div id="makeMeScrollable" > 中添加 < img > 标签，一切正常。但是，如果我取出图像代替 < asp:GridView >，我的 gridview 仍会出现，但滚动将不起作用。

任何有关此问题的指导将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:27:06.813

您正在使用的库仅适用于 img 标签，即它只会显示图像。因此，smoothdivscroll javascript 库不适合滚动不是 img 的 html 元素。

访问

[访问并查看不错的演示，尤其是 Carousel](http://www.noupe.com/design/sliding-content.html)

[轮播演示的直接链接在这里](http://sorgalla.com/projects/jcarousel/examples/static_simple.html)

将您的 Gridview 包裹在 li 标签中。

这应该有效。

# html - 为什么我的输入字段不可编辑？

> ID：11695920
> 
> 赞同：2
> 
> 时间：2012-07-27T21:31:34.777
> 
> 标签：html, css, firefox

我正在构建一个包含许多混合库的网页：jQuery、Bootstrap、许多其他服务的脚本等等。我使用的是早期（修改）版本的[真正简单颜色选择器](https://github.com/laktek/really-simple-color-picker)，输入控件不可编辑，但仅在 Firefox 中。在 Chrome、Safari 和 Internet Explorer 中，该字段是可编辑的。

我在使该字段不可编辑的代码中找不到任何东西。在 Firefox 中，我可以在 firebug 面板中看到`.uneditable-input`正在应用 CSS 样式，但元素本身没有类，无论是在原始 HTML、HTML 视图还是 DOM 视图中。

在 DOM 视图中看起来相关的其他一些属性是：

```
 className ""
 contentEditable "inherit"
 disabled false
 hidden false
 indeterminate false
 readOnly false
 required false 
```

什么会使我的输入无法编辑，为什么只在一个浏览器中？

另一个转折点：输入字段本身实际上是使用颜色选择器库中的 jQuery 代码插入到页面中的。

我很想包含代码，但是页面非常大，有十几个依赖项，我现在正在寻找关于哪些类型的东西可以使字段不可编辑的想法，以便我可以寻找原因。我知道不包含代码并不好，我会努力减少它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:52:45.810

您要做的是安装 Firebug，并检查其中的 DOM 元素。它将向您显示任何自定义的 CSS 属性，您可以一一选中/取消选中它们。您可能会很快找到导致问题的原因。

![在此处输入图像描述](../Images/b03e3afbc1724f27eda63d7ea7e726f7.png)

如果它实际上没有被禁用，但你不能与之交互，你也可以在 Firebug 中看到它。只需使用鼠标点击检查功能，它就会显示哪个 DOM 元素在它上面，以及它的尺寸是多少。

![在此处输入图像描述](../Images/e01285c2eb8e0fa330b214aa9cbd2b55.png)

# c++ - vswprintf_l vswprintf 的扩展语言环境版本？

> ID：11695924
> 
> 赞同：0
> 
> 时间：2012-07-27T21:31:56.060
> 
> 标签：c++, ios, c

有谁知道什么时候使用 vswprintf_l 而不是 vswprintf？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:52:08.850

不同之处在于最后`vswprintf_l`需要一个额外的类型参数`locale_t`。这意味着您可以`vswprintf_l`使用指定的语言环境而不是当前设置的语言环境进行调用。如果您传递 NULL 作为`locale_t`C 语言环境的参数，则将使用该参数。

# python - 配置子记录器

> ID：11695926
> 
> 赞同：8
> 
> 时间：2012-07-27T21:32:04.757
> 
> 标签：python, logging

每次我认为我理解了日志记录模块时，gremlins 就会进来并改变它的工作方式。（好吧，我承认，那个 gremlin 可能是我在更改我的代码。）

我在这里做错了什么？

```
> ipython
> import logging
> log = logging.Logger("base")
> log.addHandler(logging.StreamHandler())

> log.critical("Hi")
Hi

> log2 = log.getChild("ment")

> log2.critical("hi")
No handlers could be found for logger "base.ment" 
```

我可以发誓过去，我可以在没有额外配置的情况下使用子记录器......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T21:56:50.977

如果你改变

```
log = logging.Logger('base') 
```

到

```
log = logging.getLogger('base') 
```

然后它工作：

```
import logging

log = logging.getLogger('base')
log.addHandler(logging.StreamHandler())
log.critical('Hi')
log2 = log.getChild('ment')
log2.critical('hi') 
```

产量

```
Hi
hi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T22:29:22.297

More detail: You are using the module wrong. :) From looking at the module code, it looks like they don't expect you to ever create a `logging.Logger()` directly. Many of the functions available directly on the module (ex `getLogger()`) and the methods on `logging.Logger()` (ex `getChild()`) actually proxy through an instance of `logging.Manager` that the module creates on import. When you create a `Logger` with `logging.Logger()` directly, you are actually creating a `Logger` instance outside of the `Manager`. When you subsequently call `log.getChild()`, the module is actually creating the new logger inside the `Manager`, but with the name of the `Manager`-external logger appended to the front of the logger name. So your handler added to `log` is not in the `Manager` with the spawned child, and thus the handler doesn't work. I am a little confused still though on why adding a handler to `log` before or after creating `log2` causes logging against `log2` to behave differently. I don't see what's causing that...

# c++ - 竞争条件：一个线程创建静态对象，另一个线程在完成初始化之前使用它。怎么处理？

> ID：11695928
> 
> 赞同：0
> 
> 时间：2012-07-27T21:32:10.283
> 
> 标签：c++, multithreading, static, race-condition, thread-local

我的代码中有几个地方创建了一个函数静态对象，然后在调用该函数的任何时候使用（复制）。可以从任何线程调用这些函数之一。该函数不访问除此静态对象之外的任何共享状态。

当线程 1 第一次调用该函数时，对象被创建并初始化。但是，（幸运的是）我有一个可重复的情况，即程序切换到线程 2 并在初始化完成之前调用相同的函数。该对象被分配并使用了错误数据！

我不知道如何处理这个。我在初始化代码中使用了关键部分，但这甚至不是问题。这个对象在被初始化之前就被使用了。

我尝试使用 __declspec(thread) 使这个线程成为本地线程，但这显然不适用于对象。

我可以用一个关键部分来包围整个事情，这也许是最好的解决方案，但我担心代码的其他部分会出现这样的问题——如果有一个通用的解决方案会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:45:03.300

如果您使用的是 Windows，则可以使用[InitOnceExecuteOnce](http://msdn.microsoft.com/en-us/library/ms683493%28v=VS.85%29.aspx) API。更多细节可以在Raymond Chen 的[这篇文章中找到。](http://blogs.msdn.com/b/oldnewthing/archive/2011/04/08/10151258.aspx)另请查看更通用的[std::call_once](http://en.cppreference.com/w/cpp/thread/call_once)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:36:02.253

您不能在对象上使用信号量，在创建对象时将信号量设置为 1，然后在初始化对象（并准备好使用）时将其递减为零。

不过，只需要留意资源匮乏。

# java - 将 Parsing XML 得到的数据导出到 MongoDB

> ID：11695929
> 
> 赞同：2
> 
> 时间：2012-07-27T21:32:14.633
> 
> 标签：java, xml, mongodb, jdbc

我已经使用 JDOM Parser 从 XML 中解析了数据，并将我的数据放入离散字段中。

我想将该数据以及完整的 XML 文件导出到 MongoDB。

所以在某种程度上我想要类似于 JDBC for MongoDB 的东西。

请给我建议。

# struct - 无法从 'cli::array 转换 ^' 到 'cli::array ^'

> ID：11695931
> 
> 赞同：1
> 
> 时间：2012-07-27T21:32:18.163
> 
> 标签：struct, c++-cli

C++ CLR，在 Visual Studio 2010 (C++) 中。

我有这个结构：

```
value struct Triangle{
    static array<int>^ v = gcnew array<int>(3);
    static array<int>^ t = gcnew array<int>(3);
    static array<int>^ n = gcnew array<int>(3);
}; 
```

我在班级的“私人”部分声明了以下内容：

```
static array<Triangle^>^ triangles = gcnew array<Triangle>(MAX_POLYGONS); 
```

我收到此错误，但我不知道它是什么意思（因为它似乎自相矛盾）：

```
error C2440: 'initializing' : cannot convert from 'cli::array<Type> ^' to 'cli::array<Type> ^'
         with
         [
             Type=Triangle
         ] 
```

显然它不喜欢这个结构。我应该使用 ref 而不是 value 吗？这会产生很多指针。任何朝着正确方向的推动将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:10:13.587

您的声明中只是多了一个帽子 (^)。它应该是：

```
static array<Triangle>^ triangles = gcnew array<Triangle>(MAX_POLYGONS); 
```

# javascript - after() 插入元素，然后将其取回

> ID：11695935
> 
> 赞同：15
> 
> 时间：2012-07-27T21:32:27.630
> 
> 标签：javascript, jquery, dom, jquery-after

> **可能重复：**
> [为什么 jQuery .after() 不链接新元素？](https://stackoverflow.com/questions/11114266/why-does-jquery-after-not-chain-the-new-element)

此参考代码：

```
$("#id").after(string); 
```

在需要的地方插入字符串元素做得很好。

如何获取对新插入的 HTML 元素（字符串）的引用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-27T21:35:43.437

```
var string = '<div id="some_HTML"><span>hello kitty</span></div>';

$jq_elem = $(string);  //if it's not a jQuery object, make it one

$("#id").after($jq_elem); //insert into DOM

$jq_elem.css('color', 'red'); //still available
​ 
```

[小提琴](http://jsfiddle.net/8J757/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T21:35:15.797

尝试使用`insertAfter`：

```
var $str = $(string).insertAfter('#id'); 
```

如果`string`是 HTML，这将起作用。

# java - 用于桌面应用程序的 Apache Felix

> ID：11695936
> 
> 赞同：6
> 
> 时间：2012-07-27T21:32:36.900
> 
> 标签：java, osgi, apache-felix

我使用 Apache Felix 和 Glassfish 工作了几个月。我可以创建简单的 Web 应用程序。现在我必须创建基于 OSGI 架构的 Java 守护进程。是否有任何带有示例代码的好教程可以帮助学习用于 Java 桌面应用程序的 Apache Felix。我也想问一下bundle是怎么打包的？是 Web 应用程序，它们是 jar 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:18:40.067

我会说使用 webstart 将是最简单的。在这种情况下，您将创建一个包含 Felix（可能还有更多库）的基本 jar 文件，该文件可以启动您的应用程序，并且客户端可以从那里使用 Bundle.install 下载其他包。您还可以将它与 Apache Felix OBR 结合使用，这将为您提供更大的灵活性，但代价是一些额外的基础设施。

你也可以看看[这个](http://www.toedter.com/blog/?p=45)，但我认为（如果我错了，请纠正我）它是 Equinox 特有的。

最后，[JBundle](https://github.com/jbundle/jbundle)看起来很有前途，我从未尝试过，但它看起来对你很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:40:36.247

Apache Felix OSGi 教程中有很多例子[http://felix.apache.org/site/apache-felix-osgi-tutorial.html](http://felix.apache.org/site/apache-felix-osgi-tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T06:30:20.390

现在随时查看 bndtools 和 bnd 以及 jpm：[http ://softwaresimplexity.blogspot.fr/2012/04/just-another-package-manager.html](http://softwaresimplexity.blogspot.fr/2012/04/just-another-package-manager.html)

# html - 如果 Outlook 条件语句

> ID：11695938
> 
> 赞同：0
> 
> 时间：2012-07-27T21:32:50.617
> 
> 标签：html, outlook

是否有适用于所有 Outlook 版本的条件语句？

我在第 9 版中找到了这个：

```
<!–[if gte mso 9]>
<![endif]–&gt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:41:15.957

我目前在 Linux 上，无法测试，但可能类似于`[if mso]`？

# jquery - 如何获取 HTML5 SVG 元素中所有元素的位置

> ID：11695939
> 
> 赞同：0
> 
> 时间：2012-07-27T21:32:57.623
> 
> 标签：jquery, html, svg, prototype

我正在创建一个类似于[https://moqups.com/](https://moqups.com/)的程序，但我不知道如何获取 SVG 标记内所有元素的坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:47:27.793

```
var children = $('svg').children();

for(var i in children) {
    childLoop(children[i]);                 // Start with children because I don't think svg has
                                            // A getBBox() method (only groups, rects, text..etc)
}

function childLoop(obj) {
    alert($(obj).getBBox());                // Display the objects bounding box
                                            // Bounding boxes have .x, .y, 
                                            // .width, and .height properties
    for(var a in $(obj)[0].attributes) {
        alert(a + '=' + $(obj)[0].attributes[a]);
    }
    for(var i in $(obj).children()) {
        childLoop($(obj).children()[i]);    // Do it for the rest of the children
    }
} 
```

基本上你需要在 svg 对象中选择一个元素并调用`.getBBox()`它的方法。

这将返回一个具有以下结构的对象（例如，在 (0 ,0) 位置使用一个尺寸为 100x100 的对象）：

```
.getBBox() : {
        x: 0
        y: 0
        width: 100
        height: 100
  } 
```

# java - 带有 JSF 页面的 Apache HTTPClient（特别是 Geoportal）

> ID：11695940
> 
> 赞同：1
> 
> 时间：2012-07-27T21:33:02.247
> 
> 标签：java, apache-commons-httpclient

好的，所以我正在尝试使用 Apache HTTPClient 将数据发布到 JSF 页面。如果有人曾经使用过 Geoportal，那就是收割机创建页面。无论如何，我使用 get 请求来获取页面，然后使用包含所有必需参数的 post 请求，包括从 get 请求中解析出来的 JSF 视图状态参数。调用 POST 请求时，页面被返回，但没有执行任何操作，例如保存新的收割机。以下是我的代码，任何帮助将不胜感激。谢谢。

```
 HttpMethod getReq = new GetMethod(pageURI);
    getReq.addRequestHeader("Content-Type", "text/html");
    getReq.addRequestHeader("User-Agent","Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1");
    getReq.addRequestHeader("Connection", "keep-alive");
    getReq.addRequestHeader("Cookie", "iPlanetDirectoryPro=" + token + "; JSESSIONID=" + sessionid);
    try {
        // Get the edit harvester page.
        int response = client.executeMethod(getReq);
        if(response != 200) {
            logError(responseObj, response + " error occured while trying to get the Harvester Edit page.");
            return responseObj;
        }
        String responseBody = new String(getReq.getResponseBody(), "UTF-8");
        getReq.releaseConnection();

        // Extract the View State value.
        int position = responseBody.indexOf("javax.faces.ViewState");
        if(position == -1) {
            logError(responseObj, "Unable to authenticate user. Please make sure your session has not expired.");
            return responseObj;
        }
        responseBody = responseBody.substring(position);
        int valPosition = responseBody.indexOf("value");
        String valString = responseBody.substring(valPosition + 7, valPosition + 60);
        facesValue = valString.substring(0, valString.indexOf("\""));
        System.out.println("Faces View: " + facesValue);
    }
    catch (HttpException e) {
        logError(responseObj, "Invalid HTTP retured while trying to get the Harvester Edit page.");
        return responseObj;
    }
    catch (IOException e) {
        logError(responseObj, "Unable to get the Harvester Edit page.");
        return responseObj;
    }

    // Build Post Request
    PostMethod postReq = new PostMethod(pageURI);
    postReq.addRequestHeader("Content-Type", "text/html");
    postReq.addRequestHeader("User-Agent","Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.0; .NET CLR 1.1.4322; .NET CLR 2.0.50215;)");
    postReq.addRequestHeader("Accept-Charset", "Chareset+\";q=0.7,*;q=0.7");
    postReq.addRequestHeader("Cookie", "iPlanetDirectoryPro=" + token + "; JSESSIONID=" + sessionid);
    String userDN = PropertiesService.getProperty("openldap.usersDN");
    NameValuePair data[] = {
            new NameValuePair("harvestCreate:hvSubmit", "Save"),
            new NameValuePair("javax.faces.ViewState", facesValue)
        // Note there are many more values here. I just removed them because they should serve no purpose.

    };
    postReq.setRequestBody(data);
    try {
        // Get the edit harvester page.
        int response = client.executeMethod(postReq);
        if(response != 200) {
            logError(responseObj, response + " error occured while trying to get the Harvester Edit page.");
            return responseObj;
        }
        String responseBody = new String(postReq.getResponseBody(), "UTF-8");
        postReq.releaseConnection();
    }
    catch (HttpException e) {
        logError(responseObj, "Invalid HTTP retured while trying to get the Harvester Edit page.");
        return responseObj;
    }
    catch (IOException e) {
        logError(responseObj, "Unable to get the Harvester Edit page.");
        return responseObj;
    } 
```

# submit - 在填写启用提交所需的字段期间启用禁用的提交按钮不起作用

> ID：11695945
> 
> 赞同：0
> 
> 时间：2012-07-27T21:33:27.377
> 
> 标签：submit, form-submit

对不起，如果标题不清楚，我试图以最好的方式解释。我的情况如下：我有一个带有提交按钮的时事通讯。在输入正确的电子邮件后，我使用 jquery 解锁了 SUBMIT 按钮。除了一件事之外，它工作正常 - 我必须单击字段外的任何位置（而不是在提交按钮上）以启用提交，然后在提交时。我想我必须在这条线上的某个地方添加一些东西，但我不知道是什么：

```
document.getElementById("submit").disabled = false; 
```

完整的代码在这里：

HTML：

```
<div class="element">
    <input type="text" id="email" name="email" value="Enter your email" />
</div>           

<div id="bsubmit">
    <input name="submit" id="submit" src="_images/generic/send_button.png?submit+button=" type="image" disabled="disabled" />
</div> 
```

和 jq：

```
$.fn.swapText = function(){
return this.each(function(){
    var tmpDefVal = $(this).val();
    $(this).css('color', '#999');

    $(this).focus(function(){
        if($(this).val() == tmpDefVal){
            $(this)
                .css('color', '#000')
                .val('');
        }
    });

    $(this).blur(function(){
        if($(this).val() == ''){
            $(this)
                .css('color', '#999')
                .val(tmpDefVal);
        }
    });

}); 
```

}

$(文档).ready(函数(){

```
$('#email').swapText();

$('#email').change(function(){
    var regexp = /^\w+[@]\w+\.\w{2}$/;

    if(regexp.test($(this).val())){
        $(this).removeClass('err');
        $(this).addClass('ok');
        document.getElementById("submit").disabled = false;
    }else{
        $(this).removeClass('ok');
        $(this).addClass('err');
    }
}); 
```

});

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:42:03.397

一个问题是您有两个元素的 id 为 submit。

# javascript - Backbone Event 触发不同视图之间的协调

> ID：11695948
> 
> 赞同：1
> 
> 时间：2012-07-27T21:33:38.720
> 
> 标签：javascript, user-interface, backbone.js

所以我有一个主视图，里面有一组对象。对象将在旋转木马中左右滑动。

我有一个事件绑定在主视图*内*的 mousedown 上，以跟踪他们在那段时间内滚动鼠标的距离。但是，如果他们在按住鼠标的同时滚出主视图元素，我仍然想跟踪距离以及触发 mouseup 事件的时刻。

什么是集成这样的 UI 逻辑的好方法，它从本地主干视图开始，但具有触发元素的事件？我觉得有一些陷阱，特别是在未来的易读性方面，如果我要将功能扩展到全局和本地视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:49:28.487

我认为您必须将鼠标事件捕获器移出 CarouselView。其实并没有那么奇怪。

您可以定义一个 ElasticView，它`el`是`body`. 它包含 CarouselView，它的主要工作是监听*mousedown*中的`CarouselView.$el`，也可以监听*mouseup*中的`document.body`.

如果将 CarouselView 作为参数添加到 ElasticView 构造函数中，它也可以直接与 CarouselView 通信。或者通信可以通过*EventAggregator*或通用模型之类的东西来完成。

# java - 根据值按降序对 Guava 表进行排序

> ID：11695949
> 
> 赞同：1
> 
> 时间：2012-07-27T21:33:42.650
> 
> 标签：java, hashmap, guava

我打算使用番石榴表以表格格式存储我的值。我想知道一些函数，它根据表中的值执行降序排序......你们能否对此发表一些看法。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T08:28:28.120

就像使用地图一样，您应该复制`cellSet()`，按值对单元格进行排序，然后将其放入一个 order-preserving`ImmutableTable`中。

```
Ordering<Table.Cell<String, String, Integer>> comparator =
  new Ordering<Table.Cell<String, String, Integer>>() {
    public int compare(
        Table.Cell<String, String, Integer> cell1, 
        Table.Cell<String, String, Integer> cell2) {
      return cell1.getValue().compareTo(cell2.getValue());
  }
};
// That orders cells in increasing order of value, but we want decreasing order...
ImmutableTable.Builder<String, String, Integer>
    sortedBuilder = ImmutableTable.builder(); // preserves insertion order
for (Table.Cell<String, String, Integer> cell :
    comparator.reverse().sortedCopy(table.cellSet())) {
  sortedBuilder.put(cell);
}
return sortedBuilder.build(); 
```

无论如何，这或多或少正是您编写的按值对地图进行排序的代码。

# php - 在没有框架的情况下设置 PHP 类

> ID：11695950
> 
> 赞同：0
> 
> 时间：2012-07-27T21:33:47.440
> 
> 标签：php, class

有没有人有指南或可以为我提供一个快速示例如何设置一个类并将数据从类传递到 index.php？

我在想我可以像在框架中那样做，我不能吗？

`$this->class->function();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:37:02.937

**酷类.php**

```
class coolClass
{
    public function getPrintables()
    {
        return "hello world!";
    }
} 
```

**索引.php**

```
include 'coolclass.php';
$instance = new coolClass();
echo $instance->getPrintables(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:41:47.057

一个简单的例子：

Foo.php

```
class Foo {
  public __construct() {
    ..initialize your variables here...
  }

  public function doSomething() {
    ..have your function do something...

  }
} 
```

索引.php：

```
Include('Foo.php');
$my_Foo = Foo();
$my_Foo->doSomething(); 
```

我认为这里发生的事情相当直截了当……所以我就不说了。不想放弃太多。

# .htaccess - 使用 HTACCESS 重定向而不使用任何索引文件

> ID：11695959
> 
> 赞同：0
> 
> 时间：2012-07-27T21:34:43.590
> 
> 标签：.htaccess

我有一个域，但它在虚拟主机上没有文件。我想知道是否可以在我的虚拟主机上仅使用 .htaccess 执行以下操作。

但我想使用它基本上是我想将我的网络根重定向`http://(www.)mydomain.net`到`http://domain2.net`. 我想`http://(www.)mydomain.com/1/`重定向到`domain3.net`.

有人可以帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:41:01.017

使用 htaccess`Redirect`行..

我想会是这样（我没有检查以验证它是否有效......但摆弄它）：

```
Redirect http://mydomain.net http://domain2.net
Redirect http://mydomain.net/1 http://domain3.net 
```

[http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F](http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:44:39.883

您可以使用与目录混合的简单 301 指令来执行此操作：

我会将 mydomain1.com 指向 ip xxx.xxx.xxx.xxx/mydomain1，然后在该目录的 htaccess 中：

```
Redirect 301 / http://domain1.net/ 
```

然后您可以对站点 2 重复相同的操作：将站点指向 ip xxx.xxx.xxx.xxx/mydomain2 并在该目录的 htaccess 中

```
Redirect 301 / http://domain2.net/ 
```

# haskell - 在 Haskell 中使用 Logic Monad

> ID：11695961
> 
> 赞同：25
> 
> 时间：2012-07-27T21:34:46.323
> 
> 标签：haskell, logic, backtracking, dpll

最近，我在*Haskell中实现了一个朴素的*[DPLL Sat Solver](http://en.wikipedia.org/wiki/DPLL_algorithm)，改编自 John Harrison 的[实用逻辑和自动推理手册](http://www.cambridge.org/gb/knowledge/isbn/item2327697/?site_locale=en_GB)。

 *DPLL 是多种回溯搜索，因此我想尝试使用[Oleg Kiselyov 等人](http://www.cs.rutgers.edu/~ccshan/logicprog/LogicT-icfp2005.pdf)的[Logic monad](http://hackage.haskell.org/packages/archive/logict/0.2.3/doc/html/Control-Monad-Logic.html)。但是，我真的不明白我需要改变什么。

这是我得到的代码。

*   我需要更改哪些代码才能使用 Logic monad？
*   **奖励**：使用 Logic monad 是否有任何具体的性能优势？

* * *

```
{-# LANGUAGE MonadComprehensions #-}
module DPLL where
import Prelude hiding (foldr)
import Control.Monad (join,mplus,mzero,guard,msum)
import Data.Set.Monad (Set, (\\), member, partition, toList, foldr)
import Data.Maybe (listToMaybe)

-- "Literal" propositions are either true or false
data Lit p = T p | F p deriving (Show,Ord,Eq)

neg :: Lit p -> Lit p
neg (T p) = F p
neg (F p) = T p

-- We model DPLL like a sequent calculus
-- LHS: a set of assumptions / partial model (set of literals)
-- RHS: a set of goals 
data Sequent p = (Set (Lit p)) :|-: Set (Set (Lit p)) deriving Show

{- --------------------------- Goal Reduction Rules -------------------------- -}
{- "Unit Propogation" takes literal x and A :|-: B to A,x :|-: B',
 - where B' has no clauses with x, 
 - and all instances of -x are deleted -}
unitP :: Ord p => Lit p -> Sequent p -> Sequent p
unitP x (assms :|-:  clauses) = (assms' :|-:  clauses')
  where
    assms' = (return x) `mplus` assms
    clauses_ = [ c | c <- clauses, not (x `member` c) ]
    clauses' = [ [ u | u <- c, u /= neg x] | c <- clauses_ ]

{- Find literals that only occur positively or negatively
 - and perform unit propogation on these -}
pureRule :: Ord p => Sequent p -> Maybe (Sequent p)
pureRule sequent@(_ :|-:  clauses) = 
  let 
    sign (T _) = True
    sign (F _) = False
    -- Partition the positive and negative formulae
    (positive,negative) = partition sign (join clauses)
    -- Compute the literals that are purely positive/negative
    purePositive = positive \\ (fmap neg negative)
    pureNegative = negative \\ (fmap neg positive)
    pure = purePositive `mplus` pureNegative 
    -- Unit Propagate the pure literals
    sequent' = foldr unitP sequent pure
  in if (pure /= mzero) then Just sequent'
     else Nothing

{- Add any singleton clauses to the assumptions 
 - and simplify the clauses -}
oneRule :: Ord p => Sequent p -> Maybe (Sequent p)
oneRule sequent@(_ :|-:  clauses) = 
   do
   -- Extract literals that occur alone and choose one
   let singletons = join [ c | c <- clauses, isSingle c ]
   x <- (listToMaybe . toList) singletons
   -- Return the new simplified problem
   return $ unitP x sequent
   where
     isSingle c = case (toList c) of { [a] -> True ; _ -> False }

{- ------------------------------ DPLL Algorithm ----------------------------- -}
dpll :: Ord p => Set (Set (Lit p)) -> Maybe (Set (Lit p))
dpll goalClauses = dpll' $ mzero :|-: goalClauses
  where 
     dpll' sequent@(assms :|-: clauses) = do 
       -- Fail early if falsum is a subgoal
       guard $ not (mzero `member` clauses)
       case (toList . join) $ clauses of
         -- Return the assumptions if there are no subgoals left
         []  -> return assms
         -- Otherwise try various tactics for resolving goals
         x:_ -> dpll' =<< msum [ pureRule sequent
                               , oneRule sequent
                               , return $ unitP x sequent
                               , return $ unitP (neg x) sequent ] 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T17:41:07.937

好的，改变你的代码来使用`Logic`原来是完全微不足道的。我经历并重写了所有内容以使用普通`Set`函数而不是`Set`单子，因为您并没有真正`Set`以统一的方式使用单子，当然也不是为了回溯逻辑。monad 理解也更清楚地写成映射和过滤器等。这不需要发生，但它确实帮助我理清了正在发生的事情，而且它确实清楚地表明，用于回溯的一个真正剩余的 monad 只是`Maybe`.

在任何情况下，您都可以概括, 和的类型签名`pureRule`，不仅可以对 进行操作，还可以对任何带有约束的进行操作。`oneRule``dpll``Maybe``m``MonadPlus m =>`

然后， in `pureRule`，您的类型将不匹配，因为您`Maybe`显式构造了 s，因此请稍作更改：

```
in if (pure /= mzero) then Just sequent'
   else Nothing 
```

变成

```
in if (not $ S.null pure) then return sequent' else mzero 
```

在 中`oneRule`，同样将 of 的用法更改为`listToMaybe`显式匹配，因此

```
 x <- (listToMaybe . toList) singletons 
```

变成

```
 case singletons of
   x:_ -> return $ unitP x sequent  -- Return the new simplified problem
   [] -> mzero 
```

而且，除了类型签名更改之外，`dpll`根本不需要更改！

现在，您的代码在*和* `Maybe` *上* `Logic`运行！

要运行`Logic`代码，您可以使用如下函数：

```
dpllLogic s = observe $ dpll' s 
```

您可以使用`observeAll`等查看更多结果。

作为参考，这是完整的工作代码：

```
{-# LANGUAGE MonadComprehensions #-}
module DPLL where
import Prelude hiding (foldr)
import Control.Monad (join,mplus,mzero,guard,msum)
import Data.Set (Set, (\\), member, partition, toList, foldr)
import qualified Data.Set as S
import Data.Maybe (listToMaybe)
import Control.Monad.Logic

-- "Literal" propositions are either true or false
data Lit p = T p | F p deriving (Show,Ord,Eq)

neg :: Lit p -> Lit p
neg (T p) = F p
neg (F p) = T p

-- We model DPLL like a sequent calculus
-- LHS: a set of assumptions / partial model (set of literals)
-- RHS: a set of goals
data Sequent p = (Set (Lit p)) :|-: Set (Set (Lit p)) --deriving Show

{- --------------------------- Goal Reduction Rules -------------------------- -}
{- "Unit Propogation" takes literal x and A :|-: B to A,x :|-: B',
 - where B' has no clauses with x,
 - and all instances of -x are deleted -}
unitP :: Ord p => Lit p -> Sequent p -> Sequent p
unitP x (assms :|-:  clauses) = (assms' :|-:  clauses')
  where
    assms' = S.insert x assms
    clauses_ = S.filter (not . (x `member`)) clauses
    clauses' = S.map (S.filter (/= neg x)) clauses_

{- Find literals that only occur positively or negatively
 - and perform unit propogation on these -}
pureRule sequent@(_ :|-:  clauses) =
  let
    sign (T _) = True
    sign (F _) = False
    -- Partition the positive and negative formulae
    (positive,negative) = partition sign (S.unions . S.toList $ clauses)
    -- Compute the literals that are purely positive/negative
    purePositive = positive \\ (S.map neg negative)
    pureNegative = negative \\ (S.map neg positive)
    pure = purePositive `S.union` pureNegative
    -- Unit Propagate the pure literals
    sequent' = foldr unitP sequent pure
  in if (not $ S.null pure) then return sequent'
     else mzero

{- Add any singleton clauses to the assumptions
 - and simplify the clauses -}
oneRule sequent@(_ :|-:  clauses) =
   do
   -- Extract literals that occur alone and choose one
   let singletons = concatMap toList . filter isSingle $ S.toList clauses
   case singletons of
     x:_ -> return $ unitP x sequent  -- Return the new simplified problem
     [] -> mzero
   where
     isSingle c = case (toList c) of { [a] -> True ; _ -> False }

{- ------------------------------ DPLL Algorithm ----------------------------- -}
dpll goalClauses = dpll' $ S.empty :|-: goalClauses
  where
     dpll' sequent@(assms :|-: clauses) = do
       -- Fail early if falsum is a subgoal
       guard $ not (S.empty `member` clauses)
       case concatMap S.toList $ S.toList clauses of
         -- Return the assumptions if there are no subgoals left
         []  -> return assms
         -- Otherwise try various tactics for resolving goals
         x:_ -> dpll' =<< msum [ pureRule sequent
                                , oneRule sequent
                                , return $ unitP x sequent
                                , return $ unitP (neg x) sequent ]

dpllLogic s = observe $ dpll s 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T04:37:36.450

> 使用 Logic monad 是否有任何具体的性能优势？

**TL;DR**：不是我能找到的；它似乎`Maybe`表现出色，`Logic`因为它的开销更少。

* * *

我决定实施一个简单的基准来检查`Logic`vs的性能`Maybe`。在我的测试中，我随机构造了 5000 个带有`n`子句的 CNF，每个子句包含三个文字。随着子句数量的`n`变化，评估性能。

在我的代码中，我修改`dpllLogic`如下：

```
dpllLogic s = listToMaybe $ observeMany 1 $ dpll s 
```

我还`dpll`用*fair disjunction*测试了修改，如下所示：

```
dpll goalClauses = dpll' $ S.empty :|-: goalClauses
  where
     dpll' sequent@(assms :|-: clauses) = do
       -- Fail early if falsum is a subgoal
       guard $ not (S.empty `member` clauses)
       case concatMap S.toList $ S.toList clauses of
         -- Return the assumptions if there are no subgoals left
         []  -> return assms
         -- Otherwise try various tactics for resolving goals
         x:_ -> msum [ pureRule sequent
                     , oneRule sequent
                     , return $ unitP x sequent
                     , return $ unitP (neg x) sequent ]
                >>- dpll' 
```

然后我用公平的分离测试了 using `Maybe`, `Logic`, and 。`Logic`

以下是此测试的基准测试结果： ![也许 Monad v. Logic Monad v. 具有 Fair Disjunction 的 Logic Monad](../Images/239962921cecd91fb2b0ed6a30f78edb.png)

正如我们所看到的，`Logic`在这种情况下，无论是否公平分离都没有区别。使用 monad的`dpll`求解`Maybe`似乎在 中以线性时间运行`n`，而使用`Logic`monad 会产生额外的开销。似乎开销导致平台期结束。

这是`Main.hs`用于生成这些测试的文件。希望重现这些基准的人可能希望查看[Haskell 关于 profiling 的注释](http://www.haskell.org/ghc/docs/7.2.1/html/users_guide/profiling.html)：

```
module Main where
import DPLL
import System.Environment (getArgs)
import System.Random
import Control.Monad (replicateM)
import Data.Set (fromList)

randLit = do let clauses = [ T p | p <- ['a'..'f'] ]
                        ++ [ F p | p <- ['a'..'f'] ]
             r <- randomRIO (0, (length clauses) - 1)
             return $ clauses !! r

randClause n = fmap fromList $ replicateM n $ fmap fromList $ replicateM 3 randLit

main = do args <- getArgs
          let n = read (args !! 0) :: Int
          clauses <- replicateM 5000 $ randClause n
          -- To use the Maybe monad
          --let satisfiable = filter (/= Nothing) $ map dpll clauses
          let satisfiable = filter (/= Nothing) $ map dpllLogic clauses
          putStrLn $ (show $ length satisfiable) ++ " satisfiable out of "
                  ++ (show $ length clauses) 
```*

# svg - SVG中六边形之间的空间

> ID：11695967
> 
> 赞同：3
> 
> 时间：2012-07-27T21:35:14.980
> 
> 标签：svg

我试图在 SVG 中制作一些基于六边形的地图。不幸的是，字段之间有空格。

我禁用了字段的边框（stroke="none stroke-width="0"），将所有浮点四舍五入为整数，并确保六边形有共同点（它们之间没有空格）。它没有帮助。

两张截图以不同的放大倍数显示了相同的 SVG [http://imgur.com/GLiJs,gi3pt](http://imgur.com/GLiJs,gi3pt)

源代码在这里：[http://pastebin.com/hqwTKW4M](http://pastebin.com/hqwTKW4M)（下载后记得将扩展名改为svg）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:25:39.953

将所有六边形（或其中的一组）的形状渲染属性设置为“crispEdges”可以解决此问题。例如

```
<polygon
  points="0,90 45,12 135,12 180,90 135,168 45,168"
  fill="green" stroke="none" stroke-width="0"
  shape-rendering="crispEdges" /> 
```

[http://www.w3.org/TR/SVG/painting.html#ShapeRenderingProperty](http://www.w3.org/TR/SVG/painting.html#ShapeRenderingProperty)

# xtk - 从体积中获取体素的值

> ID：11695972
> 
> 赞同：1
> 
> 时间：2012-07-27T21:35:38.127
> 
> 标签：xtk

给定 x,y,z 坐标作为输入，我需要一个函数来从 X.volume 对象获取体素（3d 像素）的值。这是为了使用 labelmap 作为 atlas 函数的参考。有没有办法做到这一点？

非常感谢，

爱德华

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:33:13.207

目前没有，尽管 XTK 开发人员正在创建类似于[从屏幕坐标中查找世界坐标](https://stackoverflow.com/questions/11530198/finding-world-coordinates-from-screen-coordinates)中解释的内容，尽管我相信那里正在做的是 Unproject 函数和 Ray/Triangle 相交测试。射线/三角形相交测试只是将一条射线从您的屏幕投射到 3d 世界中并返回第一个相交的三角形坐标，但当然您需要找到体素。您可以尝试创建一个 Unproject 函数和类似于 Ray/Triangle 相交的东西，但要找到最接近的相交体素而不是三角形。此处提供有关 Unproject 功能的帮助[http://myweb.lmu.edu/dondi/share/cg/unproject-explained.pdf](http://myweb.lmu.edu/dondi/share/cg/unproject-explained.pdf)，但请记住，该链接解释了来自 OpenGL 的 GluUnproject，但仍然解释了我们需要做什么，我们只是为 WebGL 制作 GluUnproject 的替代版本。如果您对 XTK 做出贡献，您可能会找到任何解决方案，我们将不胜感激。或者您可以等待可能来自查找 3d 坐标的相关问题的 Unproject 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:49:31.070

你的 (x,y,z) 是什么？它们是世界基坐标还是体积基坐标？在这两种情况下，都可以计算出解决方案（在第一种情况下会稍微复杂一些），但我认为这需要对源代码进行一些更改。

您想在源代码中编写一些代码并参与吗？对于像我们这样的 xtk 用户来说，这将是很棒的！您只需浏览卷的层次结构并执行一些操作：

*   如果 (x,y,z) 是世界坐标系中的坐标：复杂。必须做一些测试:-​​)
*   选择一个工作方向（1 个卷可以有 3 个方向的切片），例如第一个方向的 slicesX
*   使用体积的中心 X 坐标、体积 X 间距和拾取点的 X 坐标在 slicesX 中找到好的切片
*   使用体积的中心 (y,z)、体积 Y 和 Z 间距以及拾取点的 Y 和 Z 坐标，获得所选切片纹理贴图上的 (x',y') 坐标
*   使用所选切片的纹理大小获取 (x'',y'') 切片纹理图像上的坐标
*   读取纹理的 (x'',y'') 点

很抱歉，我这周没有时间再看下去，但也许以后再说吧。

# c++ - glutDisplayFunc 显示垃圾

> ID：11695977
> 
> 赞同：0
> 
> 时间：2012-07-27T21:35:53.637
> 
> 标签：c++, opengl

我第一次尝试将 openGL 合并到我的 c++ 代码中。作为一个开始，我编写了这个非常原始的代码，它定义了一个名为多边形的类，并且应该使用方法 polygon.draw() 显示一个多边形。现在，下面的所有内容都驻留在一个 main.cpp 文件中，但为了便于阅读，我在这里分成几个部分：

问题是，下面的代码编译并运行正常。只有在创建名为“simple”的窗口时，才会显示垃圾（主要是从我的计算机背景屏幕收集的:(。

首先，类多边形：

```
#include <GL/glut.h>
#include "utility.hpp"
#include <vector>

void init(void);

class nikPolygon{
public:
    std::vector<nikPosition> m_vertices;
    nikColor m_color;
    double m_alpha;

    // constructors
    // without alpha (default is 1.0)
    nikPolygon(std::vector<nikPosition> vList, nikColor c):
    m_vertices(vList), m_color(c), m_alpha(1.0){

    }

    nikPolygon(std::vector<nikPosition> vList, nikColor c, double a):
    m_vertices(vList), m_color(c), m_alpha(a){

    }

    // default constructor
    nikPolygon(){

    }

    // member functions
    // add vertex
    void addVertex(nikPosition v)              { m_vertices.push_back(v); }
    // remove vertex
    void removeVertex(nikPosition v);
    // adjust vertex
    void modifyVertex(unsigned int vIndex, nikPosition newPosition);
    // fill color
    void setColor(nikColor col)               { m_color = col; }
    // set alpha
    void setAlpha(double a)                   { m_alpha = a; }
    // display
    void drawPolygon(void){

        // color the objet
        glColor4f(m_color.red, 
                  m_color.green, 
                  m_color.blue, 
                  m_alpha);

        // construct polygon
        glBegin(GL_POLYGON);    
        for (std::vector<nikPosition>::iterator it = m_vertices.begin();
             it != m_vertices.end(); it++)
            glVertex2f(it->x, it->y);
        glEnd();

        // send to screen
        glFlush();

    }

    void draw(void);
}; 
```

然后是c/c++回调接口（trampoline/thunk）：

```
 // for c++/c callback
 nikPolygon* currentPolygon;

 extern "C"
 void drawCallback(void){
     currentPolygon->drawPolygon();
 }

 void nikPolygon::draw(){
     currentPolygon = this;
     glutDisplayFunc(drawCallback);
 } 
```

然后是其余的：

```
 // initialize openGL etc
 void init(void){

     // set clear color to black
     glClearColor(0.0, 0.0, 0.0, 0.0);

     // set fill color to white
     glColor3f(1.0, 1.0, 1.0);

     // enable transperancy
     glEnable(GL_BLEND);
     glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

     // setup standard orthogonal view with clipping
     // box as cube of side 2 centered at origin
     // this is the default view
     glMatrixMode(GL_PROJECTION);
     glLoadIdentity();
     gluOrtho2D(-1.0, 1.0, -1.0, 1.0);

 }

 int main(int argc, char** argv){

     nikPolygon poly;

     poly.addVertex(nikPosition(-0.5, -0.5));
     poly.addVertex(nikPosition(-0.5, 0.5));
     poly.addVertex(nikPosition(0.5, 0.5));
     poly.addVertex(nikPosition(0.5, -0.5));

     poly.setColor(nikColor(0.3, 0.5, 0.1));
     poly.setAlpha(0.4);

     glutInit(&argc, argv);
     glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
     glutInitWindowSize(500, 500);
     glutInitWindowPosition(0, 0);

     glutCreateWindow("simple");
     init();
     poly.draw();
     glutMainLoop();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:45:06.650

在你的`drawPolygon`功能开始时，你需要做一个`glClear(GL_COLOR_BUFFER_BIT);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:55:42.277

首先，原始代码完全被过度设计。这可能是原始混乱的一部分。此外，在不丢弃大部分代码的情况下，您也无能为力。例如，用自己的对象实例表示每个多边形（三角形）的效率几乎是最低的。您通常不想这样做。表示模型的常用方法是*Mesh*，它由顶点属性的列表/数组和面列表组成，面列表本质上是定义三角形的 3 元组列表，构成网格的表面。以课堂形式

```
class Mesh
{
    std::vector<float> vert_position;
    std::vector<float> vert_normal;
    std::vector<float> vert_texUV;

    std::vector<unsigned int> faces_indices;

public:
    void draw();
}; 
```

然后使用顶点数组绘制网格

```
void Mesh::draw()
{
    // This is the API as used up to including OpenGL-2.1

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXCOORD_ARRAY);

    // sizes of attributes depend on actual application
    glVertexPointer(3, GL_FLOAT, 0, &vert_position[0]);
    glNormalPointer(GL_FLOAT, 0, &vert_normal[0]);
    glTexCoordPointer(2, GL_FLOAT, 0, &vert_texUV[0]);

    glDrawElements(GL_TRIANGLES, faces_indices.size(), GL_UNSIGNED_INT, &faces_indices[0]);
} 
```

您将对这些 Mesh 对象实例的引用放入列表或数组中，并`draw`在设置适当的转换后在显示函数中对其进行迭代，调用该方法。

```
std::list<Mesh> list_meshes;

void display()
{
    clear_framebuffer();

    set_viewport_and_projection();

    for(std::list<Mesh>::iterator mesh_iter = list_meshes.begin();
        mesh_iter != list_meshes.end();
        mesh_iter++) {
        mesh_iter->draw()
    }

    swap_buffers();
} 
```

# c# - MouseOver 上的显示/隐藏按钮

> ID：11695981
> 
> 赞同：1
> 
> 时间：2012-07-27T21:36:19.940
> 
> 标签：c#, button, hide

我的 WinForms 应用程序上有一个按钮，在用户将鼠标移到按钮上之前，我希望它是不可见的。然后他们可以点击它。如果鼠标离开按钮，则需要再次隐藏。button.Visible 参数使按钮完全不可访问并禁用鼠标悬停。我可以使用任何想法或其他按钮参数吗？

这目前不起作用：

```
private void settingButton_MouseEnter(object sender, EventArgs e)
{
    settingButton.Visible = true;
}

private void settingButton_MouseLeave(object sender, EventArgs e)
{
    settingButton.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:43:52.497

在这里提出并回答了这个问题：

[C# WinForms MouseHover 和 MouseLeave 问题](https://stackoverflow.com/questions/6513601/c-sharp-winforms-mousehover-and-mouseleave-problem)

```
private void Form_MouseMove(object sender, MouseEventArgs e) {
    if(settingButton.Bounds.Contains(e.Location) && !settingButton.Visible) {
        settingButton.Show();
    }
} 
```

# ruby-on-rails-3 - 如何让邮件不再重复

> ID：11695987
> 
> 赞同：0
> 
> 时间：2012-07-27T21:37:03.793
> 
> 标签：ruby-on-rails-3, actionmailer

因此，我设法创建了一些我不知道如何调试的有趣行为。我有一个由模型和表格支持的邮件。当用户创建消息时，一个方法会生成一组联系人来发送电子邮件。既然已经在控制台中进行了测试，我们将在那里进行测试。

该模型只是遍历一组接收者......

```
class ContactMessage < ActiveRecord::Base
  ...
  def send_message(user)
    self.recipients.each do |rec|
      unless rec.include?("@")
        contact = Contact.find(rec)
        to = "\"#{contact.first_name} #{contact.last_name}\" <#{contact.email}>"
      else
        to = rec
        contact = user.contact.new('email' => rec)
      end
     ContactMail.direct_mail(user, self, to, contact).deliver
    end
  end

end 
```

然后它应该对 ContactMail.direct_mail 方法进行 n 次新调用。

```
class ContactMail < ActionMailer::Base
  helper :mail
  def direct_mail(user, contact_message, to, contact)
    @user = user
    @contact = contact
    @contact_message = contact_message
    @theme = @contact_message.theme
    mail(:to => to, :subject => contact_message.subject, :from => "no-reply" << @user.website.domain, :reply_to => @user.email)
  end

  ...
end 
```

mail() 方法使用提供的@instance 变量呈现视图。

```
<%= @user.website.title %>
<%= @user.website.motto %> 
============================================================
<%= @contact_message.message.html_safe.gsub(/<\/?[^><]*>/i, "") %>
============================================================
This message is from <%= @user.first_name << " " << @user.last_name << " of " << @user.business%>
Please reply to <%= @user.email %>
<%= @user.telephone %>
<%= @user.address_l1%>
<%= @user.address_l2 unless @user.address_l2.blank?%>
<%= @user.city << ", " << @user.state << " " << @user.zip %>
<%= @user.website.domain %> 
```

一切都很好，我正在使用 MailCatcher 接收所有的电子邮件，并且终端说它们已发送。

但是，在第一个 << @instance 之后发送的每封邮件都在不断堆积！它产生类似的东西

```
Healthy Living
Where massage makes health. 
============================================================
asdfasdfasdfasd
============================================================
This message is from Adam Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC Fluke of Healthy Living LLC
Please reply to fluke.a@gmail.com
504-638-2222
1822 Moss St
Apt E
New Orleans, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119, AL 70119
healthyliving.org 
```

(this would be the fifth message sent, it gets progressively worse with each email sent.)

This is what I don't understand, based on my understanding of Mail and method calls, each message sent should be their own unique object and should not be interacting with eachother at all. Yet, the clearly are. This happens with += and <<, in text and html. WTF?

Any thoughts or help appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:45:52.723

You are actually modifying your instance variables by using `<<`. If you use `+` I think it should work.

# flash - Flash Builder 4.6 设计模式不起作用？

> ID：11695988
> 
> 赞同：2
> 
> 时间：2012-07-27T21:37:09.723
> 
> 标签：flash, apache-flex, flex4, flash-builder, designmode

我在 Flash Builder 4.6 中工作，我无法让 Flash Builder 在设计模式下显示我的应用程序。我没有修改任何 Flash Builder 配置选项，它似乎只是自己启动的。关闭和打开项目，甚至 Flash Builder 本身都不能解决问题。

这是我看到的：

![在此处输入图像描述](../Images/4485f7ab51f8d4bec27832797f822124.png)

请注意我处于设计模式，但我无法点击“刷新设计模式”箭头，并且我的属性面板指出除非我处于设计模式，否则我无法使用它的功能，显然没有意识到我处于设计模式。

请注意屏幕底部附近的“设计模式问题”面板，注意我在第 33 行有语法错误`Theme.mxml`，导致显示问题。这是该文件的第 33 行：

![在此处输入图像描述](../Images/66ef1dfdfb1d972715e235696bb83e01.png)

请注意没有任何错误，因为我的应用程序符合并运行得很好。

关于如何解决显示模式问题的任何想法？

谢谢四位您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:06:55.833

通常当我遇到这样的错误时，我在更高的一行中有一些不正确的语法（通常是缺少括号）。您的代码在不处于设计模式时是否正确编译？如果没有，请检查所有语法，而不仅仅是第 33 行。然后再试一次。如果这不起作用，请尝试从源代码中删除代码块并缩小导致问题的部分。

# scala - 从 json JsObject 创建一个新地图

> ID：11695990
> 
> 赞同：3
> 
> 时间：2012-07-27T21:37:42.890
> 
> 标签：scala

我有以下 json 字符串：

```
{"1342558874663000":{"TEMPERATURE_C":"253","TEMPERATURE_F":"775"},
"1342558854606000":{"TEMPERATURE_C":"254","TEMPERATURE_F":"776"}} 
```

我想迭代这个对象并创建一个具有以下格式的新 json 对象：

```
{"TEMPERATURE_C":[["1342558874663000","253"], ["1342558854606000","254"]],
"TEMPERATURE_F":[["1342558874663000", "775"], ["1342558854606000","776"]]} 
```

我正在尝试执行以下操作，但不太清楚如何创建新地图：

```
json.fields.foreach {
        case (epoch, obj) => {
          val newVal = obj.as[JsObject].fields.map {
            case (temps, value) => {
              Map(temps -> (epoch, value.as[String])).toMap
            }
          }
          println(newVal)
        }
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:18:11.887

这是一个相当简单的工作示例，可以产生您想要的输出：

```
import play.api.libs.json._

val json = Json.parse("""
  {"1342558874663000":{"TEMPERATURE_C":"253","TEMPERATURE_F":"775"},
  "1342558854606000" :{"TEMPERATURE_C":"254","TEMPERATURE_F":"776"}}
""").as[JsObject]

Json.toJson(json.fields.flatMap {
  case (epoch, obj) => obj.as[JsObject].fields.map(epoch -> _)
}.groupBy(_._2._1).mapValues(
  _.map { case (epoch, (_, v)) => Seq(epoch, v.as[String]) }
)) 
```

这里的技巧是展平列表，然后重建您需要的结构。

# django - 在 Django 中，如何以任意非字母顺序通过多项选择 CharField 进行排序？

> ID：11695994
> 
> 赞同：11
> 
> 时间：2012-07-27T21:38:10.107
> 
> 标签：django, django-models, sql-order-by

想象一个`Shirts`带有`size`CharField 的模型，其值仅限于少数选择，例如“small”、“medium”、“large”、“xlarge”等。

要按尺寸对衬衫进行分组，您可以：

```
Shirts.objects.order_by('size') 
```

但是 Django 会（自然地）按字母顺序对组进行排序，即“大”然后“中”然后“小”然后“超大”。我想要的是在“大”之前的“中”之前有“小”等。

即我自然想做的是类似于以下伪代码：

```
size_order = {'small': 1, 'medium': 2, 'large': 3, 'xlarge': 4}
Shirts.objects.order_by('size_order[size]') 
```

实现这一目标的最佳方法是什么？

编辑：有关各种建议方法的想法，请参阅我对下面答案的评论。我偶然发现了一种使用我正在调查的 SQL ORDER BY CASE 语法的自定义 Manager/QuerySet 方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T13:45:05.373

我想出了最接近我正在寻找的东西，即使用`QuerySet.extra()`方法来利用 SQL 的 CASE WHEN/THEN 语法，Django 不直接支持该语法：

```
CASE_SQL = '(case when size="small" then 1 when size="medium" then 2 when size="large" then 3 when size="xlarge" then 4 end)' 
Shirt.objects.extra(select={'shirt_order': CASE_SQL}, order_by=['shirt_order']) 
```

鉴于我的（人工）示例，这可能看起来有点矫枉过正和/或肮脏，但这是我正在寻找的技巧！感谢大家对这个问题的其他完全有效的方法，这在某种程度上间接地激发了我想出这种方法。

PS 创建一个自定义模型 Manager/QuerySet 组合是很诱人的，它通过 SQL 的 CASE WHEN/THEN 语法为这种自定义排序提供更原生的 Django 接口，但我将把它作为自己的家庭作业留待下一次！

注意：CASE WHEN/THEN 的语法是特定于数据库的。上面的语法适用于 SQLite。对于 PostgreSQL，省略括号并使用转义单引号而不是双引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T22:07:02.647

听起来您不想对可能的选择进行硬编码（因为您使用了字符域），但同时您说选择的数量很少。

如果您满足于对选择进行硬编码，那么您可以改为使用整数字段：

```
class Shirt(models.Model):
  SIZE_CHOICES = (
    (1, u'small'),
    (2, u'medium'),
    (3, u'large'),
    (4, u'x-large'),
    (5, u'xx-large'),
  )
  size = models.IntegerField(choices = SIZE_CHOICES) 
```

如果您不想对尺寸选择进行硬编码，那么您可能希望将可用尺寸移到单独的模型中，并将其作为 Shirt 模型中的外键引用。要使其可任意排序，您将需要某种类型的索引，而不是可以排序的主键。也许是这样的：

```
class Size(models.Model):
  sortorder = models.IntegerField()
  name = models.CharField()
  class Meta:
    ordering = ['sortorder'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T09:51:22.630

无需编写自定义排序功能，只需`order`在模型上添加一个字段。

```
class Shirt(models.Model):
    ...
    order = models.IntegerField(default=0)
    class Meta:
        ordering = ('order',)

Shirt.objects.filter(name='Awesome Shirt') 
```

或者，更恰当地说，创建一个名为`Size`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T21:58:48.220

`size`您应该使用按您想要的方式排序的选择元组来设置您的字段。在你的`models.py`你会有类似的东西：

```
from django.db import models

SHIRT_SIZE_CHOICES = (
    (u"0", u"small"),
    (u"1", u"medium"),
    (u"2", u"large"),
    (u"3", u"xlarge"))

class Shirt(models.Model):
    ...
    size = models.CharField(max_length=2, choices=SHIRT_SIZE_CHOICES) 
```

然后`order_by`将按照您的意愿对它们进行排序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T09:45:55.240

如果您不想将字段值存储为整数，那么内置的 order_by() 方法将无法处理您的自定义案例。检索数据后，您必须创建自己的函数来对数据进行排序。

而要做到这一点，当然最好的方法是将您的任意值以相应的顺序映射到整数，然后按该排列排序:)。