# StackOverflow 问答 11717000-11717999

# asp.net - 使用 SQL Server 触发器更新插入时的旧行

> ID：11717001
> 
> 赞同：2
> 
> 时间：2012-07-30T07:23:56.180
> 
> 标签：asp.net, sql-server, entity-framework-4

我有包含所有用户帐户详细信息的 users 表，包括具有位数据类型的 IsLoggedIn 字段。当用户在前一个会话到期之前启动新会话时，我想用 IsLoggedIn = 1 更新任何旧行。实现这一目标的最佳方法是什么？可以用触发器做到这一点吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:31:46.533

你肯定会有两件事.. 1）用户 ID 和 2）数据库中的会话 ID。

现在，当新会话开始（session_Start）事件被触发时..您可以使用逻辑调用一个存储过程，逻辑将是

1）如果没有具有相同用户ID的记录，则不要进行任何更新。2) 如果有任何具有相同用户 ID 的记录，则使用 IsLoggedIn = 1 更新所有记录。

您也可以使用 TRIGGER 扩展此逻辑，并根据您的需要对其进行绑定。

基本上您需要跟踪 session_Start 事件并执行数据库操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:20:27.410

触发器不是建议的解决方案，因为您需要从 UI 处理登录。如果只有一次登录，则`Application_Start`可以使用。如果可以有多个登录，那么`Session_Start`最好。从那里您可以调用数据库并执行相应的操作。
两者的区别在：[http ://forums.asp.net/t/1230163.aspx/1?What+s+the+difference+between+Application_Start+and+Session_Start+in+Global+aspx+](http://forums.asp.net/t/1230163.aspx/1?What+s+the+difference+between+Application_Start+and+Session_Start+in+Global+aspx+)

# javascript - 在 Eclipse 中从 jslint4java 中排除文件

> ID：11717002
> 
> 赞同：6
> 
> 时间：2012-07-30T07:24:14.073
> 
> 标签：javascript, eclipse, jslint, jslint4java

我在 Eclipse 中使用 jslint4java。不幸的是，我有一些永远不会改变的巨大字典文件，但每次构建工作区时，整理这些文件需要很长时间。

是否可以从 jslint4java 中排除特定文件，如何配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:57:16.777

在我拥有的 jslint4java Eclipse 插件版本（1.0.1.201207042009）中，jslint4java 首选项中有一个“从 JSLint 中排除与这些模式匹配的文件：”字段；我相信这正是您正在寻找的。

它位于右侧的“Make JSLint Laxer”列表下方；如果您有一长串预定义的全局变量（就像我一样），您可能需要滚动才能看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:15:24.310

当您输入上述排除模式时，您需要在项目上禁用并重新启用 jslint 才能使其生效。花了我一个小时...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-13T15:57:14.127

关于使用该模式选项排除文件的另一个说明。就我而言，我想排除所有以 .min.js 结尾的文件。所以，很自然地，我假设模式是 *.min.js。

错误的！

模式只是 .min.js

# ios - NSURLCache 和 .svg 文件

> ID：11717003
> 
> 赞同：1
> 
> 时间：2012-07-30T07:24:25.813
> 
> 标签：ios, nsurlcache

我在本地缓存了 UIWebView 所需的一些较大的文件，并且有一个 NSURLCache 的子类和一个自定义实现来帮助服务这些文件。

```
- (NSCachedURLResponse *)cachedResponseForRequest:(NSURLRequest *)request 
```

我正在使用它来劫持请求并返回本地存储的文件副本（主要是 t

cachedResponseForRequest:request 的主体（没有样板）本质上是：

```
// logic to figure out what the local file is, load it into a NSData object (f)
NSURLResponse *r = [[NSHTTPURLResponse alloc] initWithURL:request.URL MIMEType:mimetype expectedContentLength:[f length] textEncodingName:nil];
NSCachedURLResponse *cr = [[NSCachedURLResponse alloc] initWithResponse:r data:f] ;
[super storeCachedResponse:cr forRequest:request];
return cr; 
```

这适用于除单个 svg 图像之外的所有缓存内容。当尝试加载 svg 图像时，它将通过 cachedResponseForRequest:request 进行，构建一个 NSCachedURLResponse 对象并返回它。

然而，应用程序要做的下一件事是从远程服务器下载文件，然后从缓存中提供任何后续请求。我们不想远程下载文件，因为它比较大并且影响性能。

NSURLCache 处理 .svg 文件是否与其他文件类型不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:12:56.073

初始化缓存时，NSUrlCache 将处理的文件的最大大小可能会受到参数的影响：

initWithMemoryCapacity:(NSUInteger)memoryCapacity diskCapacity:(NSUInteger)diskCapacity diskPath:(NSString *)diskPath

最大文件大小与内存容量有关。您应该将其设置为您要处理的最大文件大小的至少 10 倍（为什么？）。

[我已经使用https://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)对最大 15MB 的文件进行了尝试

# php - 有什么方法可以简化 PHP 构造函数参数？

> ID：11717004
> 
> 赞同：1
> 
> 时间：2012-07-30T07:24:33.800
> 
> 标签：php, constructor, variable-assignment, simplify

当我想将值传递给 PHP 构造函数时，我必须去：

```
class Rump {
    private $var1;
    private $var2;
    private $var3;

    public function __construct($var1, $var2, $var3) {
        $this->var1 = $var1;
        $this->var2 = $var2;
        $this->var3 = $var3;
    }
} 
```

有更简单的方法吗？就像是

```
class Rump {
    public function __construct($var1, $var2, $var3) {
        //call a function here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:31:55.483

```
public function __construct($var1, $var2, $var3) {
    foreach (array('var1', 'var2', 'var3') as $var) {
        $this->$var = $$var;
    }
} 
```

或者：

```
public function __construct() {
    foreach (array('var1', 'var2', 'var3') as $i => $var) {
        $this->$var = func_get_arg($i);
    }
} 
```

或者：

```
public function __construct() {
    list($this->var1, $this->var2, $this->var3) = func_get_args();
} 
```

但实际上，与其节省一两行代码并试图变得聪明，不如使用显式赋值，因为它很容易理解，即使很无聊。如果你发现你的论点太多，无法一一打出，可能是你的论点太多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-10T18:40:56.103

我知道这个问题很老，实际上这是一个重复的话题，但对于在这里偶然发现的人来说可能仍然很有趣。

自**PHP 5.6+ 起**，您可以使用`...`称为**Splat 运算符**的省略号。

```
function func(...$manyArgs) {
    foreach ($manyArgs as $each) {
        // do something with $each argument 
    }
} 
```

[RFC](https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list.new)

或者从**PHP 7.1**开始存在一个类型提示，称为`iterable`

```
function func(iterable $args) {
    foreach ($args as $arg) {
        // awesome stuff
    }
} 
```

[RFC](https://wiki.php.net/rfc/iterable)

很快，一旦 PHP 8 出来，它就会变得不那么混乱，因为您不再需要在赋值之前声明属性。

使用您的代码，此构造函数样板：

```
class Rump {
    private $var1;
    private $var2;
    private $var3;

    public function __construct($var1, $var2, $var3) {
        $this->var1 = $var1;
        $this->var2 = $var2;
        $this->var3 = $var3;
    }
} 
```

很快将缩短为：

```
class Rump {
    public function __construct(
        private $var1, 
        private $var2, 
        private $var3) {}
} 
```

[RFC](https://wiki.php.net/rfc/constructor_promotion)

因此，它与`iterable`. 不允许使用 Splat 运算符。请注意，这仅适用于构造函数。

```
class Rump {
    public function __construct(private iterable $vars) {}
} 
```

# c++ - 从双端队列中删除和对象

> ID：11717006
> 
> 赞同：1
> 
> 时间：2012-07-30T07:24:34.523
> 
> 标签：c++, iterator, deque, erase

我有这个代码：

```
 bool tuple_compare(boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> &tuple_from_done)
  {
  for(int i = 0; i < deque_wait.size(); i++) {

      boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple_from_wait = deque_wait.at(i);
      ppa::Node *father = boost::get<0>(tuple_from_wait);
      ppa::Node *son = boost::get<0>(tuple_from_wait);
      ppa::Node *second_son = boost::get<2>(tuple_from_wait);

      bool has_seq = boost::get<3>(tuple_from_wait);

      cout << "checking this two " << boost::get<1>(tuple_from_wait)->get_name() <<  " bool sequence "
              <<  boost::get<1>(tuple_from_wait)->node_has_sequence_object  << " and this " 
              << boost::get<2>(tuple_from_wait)->get_name() << " bool seq " <<  boost::get<2>(tuple_from_wait)->node_has_sequence_object
              << " with " << boost::get<0>(tuple_from_done)->get_name() << endl;

      if(boost::get<0>(tuple_from_done)->get_name() == boost::get<1>(tuple_from_wait)->get_name()
              || boost::get<0>(tuple_from_done)->get_name() == boost::get<2>(tuple_from_wait)->get_name())
      {
         cout << " found in here this we need to check if there is something if the sons have a sequences!!!! " << endl; 

         if(boost::get<1>(tuple_from_wait)->node_has_sequence_object == true && boost::get<2>(tuple_from_wait)->node_has_sequence_object == true) 
         {
             cout << " ding, ding, we have one ready!!!" << endl;

             return true;
         }
         else
         {
             cout << "not ready yet" << endl;
         }

        }    

       }

  return false;

} 
```

现在我需要删除在“叮，叮”行中找到的对象，但我不知道该怎么做，我知道迭代器使用得很好我实际上必须从 deque_wait 中删除这个元组并移动它到deque_run，但我还不太明白，所以你能帮助我吗，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:30:43.347

```
deque_wait.erase(deque_wait.begin() + i);
//               ^^^^^^^^^^^^^^^^^^^^^^
//               that's an iterator 
```

`deque`支持随机访问迭代器，它非常像指针（实际上，指针是一种随机访问迭代器），所以你可以只获取开始迭代器并添加一个整数来获取偏移量，就像你可以做的那样一个指针。

# css - Jquery-mobile css 扰乱了我为按钮定制的 css

> ID：11717007
> 
> 赞同：1
> 
> 时间：2012-07-30T07:24:34.900
> 
> 标签：css, html, jquery-mobile

我将 jquery.mobile-1.1.0 用于 PhoneGap 应用程序。我在按钮 css 中遇到问题。Jquery 有自己的按钮样式，但我不想使用它并且想要拥有自己的按钮 css。我还使用了一些 jQuery 组件，例如使用 jQuery-mobile css 的选项卡、表单搜索，所以我必须将它包含在我的应用程序中。

这是我的html代码：

```
 <div data-role="content">
    <div class="signup">
    <form action="#" id="loginForm">
    <fieldset>
    <ul>
    <li class="first">
    <label><span>Email*</span></label>
    <input name="loginemail" type="text" id="loginemail" class="input" placeholder="Enter Full Name"  />
    </li>

    <li>
    <label><span>Password*</span></label>
    <input name="loginpassword" id="loginpassword" type="text" class="input" placeholder="Pick A Password" />
    </li>

    <li>
    <input name="" type="submit" id="loginSubmit" class="button" value="Login"   />
    </li>
    </ul>

    </fieldset>
    </form>
    </div> <!-- signup- div -->
    </div><!-- - content -->
    </div> <!-- end login page --> 
```

Source 在 Firebug jQuery 中进行检查元素时会针对该按钮创建一个外层，最终会干扰我的整个按钮 css。

```
 <li><div aria-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all 
    ui-fullsize ui-btn-block ui-btn-up-c" data-mini="false" data-inline="false" 
    data-theme="c" data-iconpos="" data-icon="" data-wrapperels="span"   
    data-iconshadow="true" data-shadow="true" data-corners="true">
    <span class="ui-btn-inner ui-btn-corner-all">
    <span class="ui-btn-text">Login</span>
    </span>
    <input aria-disabled="false" name="" id="loginSubmit" 
    class="button ui-btn-hidden" value="Login" type="submit"></div></li> 
```

这是我为 css 定制的按钮类

```
 .button{ width:100% !important; height:69px !important; 
    float:left !important;
    font-size:24px !important;
    font-family:"MyriadPro-BoldCond_0",Arial, Helvetica, sans-serif !important; 
    color:#FFFFFF !important; text-align:center; 
    background:#ca2c00 !important; border:none !important; 
    background:-moz-linear-gradient(#ca2c00, #7a1a00) !important;
    background: -webkit-gradient(linear, left top, left bottom, from(#ca2c00), to(#7a1a00)) !important; 
   -pie-background: linear-gradient(#ca2c00, #7a1a00) !important;
    background: -o-linear-gradient(#ca2c00, #7a1a00) !important; 
   -moz-border-radius:0 0 7px 7px !important;
  -webkit-border-radius:0 0 7px 7px !important; 
   border-radius:0 0 7px 7px !important; behavior: url(PIE.htc) !important;   
   position:relative !important;
   cursor:pointer !important;} 
```

请帮忙。如何阻止 jQuery 在按钮周围创建外壳并允许它选择我的自定义 css。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:49:11.060

在 jquery mobile 中，基于输入的按钮和按钮元素是自动增强的，不需要数据角色。所以你有两种选择来克服这个问题。

1.  编辑 jquery 移动主题，或者使用 Theme Roller 创建自定义主题。[您可以在此处](http://jquerymobile.com/themeroller/ "JQM ThemeRoller 工具。")找到themeroller 工具。

2.  第二个选项是将输入按钮的数据角色设置为无。例如 <input type="button" data-role="none" id="btnId" class="button">。

希望对您有所帮助。

——梅乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:29:57.233

.button类**被**jQuery Mobile 使用，尝试使用另一个类名。

# php - 如何在自定义帖子类型中添加自定义字段？

> ID：11717010
> 
> 赞同：0
> 
> 时间：2012-07-30T07:24:45.543
> 
> 标签：php, javascript, wordpress

我正在为我的 wordpress 网站创建自定义帖子类型。但我想删除编辑器并放置一个用于上传文件的字段。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:44:36.677

我建议使用插件“Advance Custom Fields”，这是一个非常省时、很棒的插件，是我用于所有 WP 项目的少数插件之一。这很容易而且很流畅。

如果您真的不想使用插件，可以在此处阅读文档：http: [//codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

它包含有关如何将带有自定义字段的元框添加到您的帖子类型的示例。

```
add_meta_box( $id, $title, $callback, $post_type, $context, $priority, $callback_args ); 
```

其中 $post_type 是您的帖子类型的 slug 名称。

编辑：要删除像 WSIWYG 编辑器这样的元素，您需要在创建帖子类型时指定它。“supports”数组接收带有您希望 post-type 能够处理的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:11:36.553

如果您不通过 register_post_type 数组添加“支持”，则有一个直接功能可以实现此目的。

```
 <?php
 add_action('init', 'my_custom_init');

 function my_custom_init() {
      add_post_type_support( 'books', 'custom-fields' );
 }
 ?> 
```

[http://codex.wordpress.org/Function_Reference/add_post_type_support](http://codex.wordpress.org/Function_Reference/add_post_type_support)

# linux - 如何在 Linux 中停止 WsgiServer

> ID：11717015
> 
> 赞同：1
> 
> 时间：2012-07-30T07:25:00.183
> 
> 标签：linux, wsgi, cherrypy, wsgiserver

我是cherrypy的新手。我刚刚尝试了一个wsgiserver的示例程序。程序如下

```
from cherrypy import wsgiserver

def my_crazy_app(environ, start_response):
  status = '200 OK'
  response_headers = [('Content-type','text/plain')]
  start_response(status, response_headers)
  return ['Hello world!']

server = wsgiserver.CherryPyWSGIServer(
        ('127.0.0.1', 8080), my_crazy_app,
        server_name='localhost')
server.start() 
```

我`Hello world`成功获得了输出，但问题是当我点击`Ctrl-c`终端停止服务器时，它并没有停止。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:28:12.487

IIRC，wsgiserver 本身与任何信号无关，因此不尊重 SIGINT 中断。只有更高级别的 CherryPy 引擎才能提供。如果你不能使用它，你可能想要使用 Python 信号模块安装一个处理程序。

好吧，这些方面的东西可以完成这项工作：

```
import signal

from cherrypy import wsgiserver 
def my_crazy_app(environ, start_response): 
   status = '200 OK' 
   response_headers = [('Content-type','text/plain')] 
   start_response(status, response_headers) 
   return ['Hello world!'] 

server = wsgiserver.CherryPyWSGIServer( ('127.0.0.1', 8080), my_crazy_app, server_name='localhost')

def stop_server(*args, **kwargs):
  server.stop()

signal.signal(signal.SIGINT,  stop_server)

server.start() 
```

# ios - 为什么从加速框架计算的特征向量符号不同？

> ID：11717017
> 
> 赞同：1
> 
> 时间：2012-07-30T07:25:04.923
> 
> 标签：ios, eigenvector, accelerate-framework

嗨，以下 9x9 输入矩阵

```
6.522752 0.985874 0.000000 0.000000 0.000000 0.000000 -1.239167 1.833633 1.542076
0.985874 5.591528 0.000000 0.000000 0.000000 0.000000 1.833633 6.220998 -3.414516
0.000000 0.000000 4.000000 0.000000 0.000000 0.000000 1.542076 -3.414516 0.000000
0.000000 0.000000 0.000000 6.522752 0.985874 0.000000 -3.478164 -2.197849 -2.923418
0.000000 0.000000 0.000000 0.985874 5.591528 0.000000 -2.197849 5.979956 -5.347403
0.000000 0.000000 0.000000 0.000000 0.000000 4.000000 -2.923418 -5.347403 0.000000
-1.239167 1.833633 1.542076 -3.478164 -2.197849 -2.923418 7.943390 4.655086 2.544306
1.833633 6.220998 -3.414516 -2.197849 5.979956 -5.347403 4.655086 26.187047 -8.514617
1.542076 -3.414516 0.000000 -2.923418 -5.347403 0.000000 2.544306 -8.514617 10.540343

```

来自 dsyevd_ (lapack) 的特征向量是

```
-0.240839 -0.138424 0.519974 0.115826 -0.370674 0.288584 -0.393926 0.431228 0.277905
0.244180 -0.537519 -0.093966 0.107875 -0.362227 0.419277 0.386924 0.074391 -0.410777
-0.085046 0.080591 -0.087321 0.405798 0.480233 0.520947 0.351553 0.085795 0.425460
0.326714 -0.343211 0.687494 -0.137128 0.486896 -0.164580 0.125151 -0.051854 -0.038804
-0.025542 0.219686 0.021264 -0.732741 0.149150 0.596999 -0.112391 -0.057387 -0.138370
0.347073 0.682316 0.396621 0.256967 -0.282724 0.116437 0.200305 -0.155640 -0.181131
0.802559 -0.030022 -0.272760 -0.009368 -0.014541 0.068134 -0.376412 0.154091 0.332006
0.041949 0.027988 0.028721 -0.432580 -0.332588 -0.207674 0.588240 0.161115 0.532709
-0.037747 -0.228302 0.086833 0.036285 -0.225159 0.157222 -0.124072 -0.849258 0.354327

```

来自opencv的特征向量

```
0.037747 0.228302 -0.086833 -0.036285 0.225159 -0.157222 0.124072 0.849258 -0.354327
0.041949 0.027988 0.028721 -0.432580 -0.332588 -0.207674 0.588240 0.161115 0.532709
0.802559 -0.030022 -0.272760 -0.009368 -0.014541 0.068134 -0.376412 0.154091 0.332006
0.347073 0.682316 0.396621 0.256967 -0.282724 0.116437 0.200305 -0.155640 -0.181131
0.025542 -0.219686 -0.021264 0.732741 -0.149150 -0.596999 0.112391 0.057387 0.138370
0.326714 -0.343211 0.687494 -0.137128 0.486896 -0.164580 0.125151 -0.051854 -0.038804
-0.085046 0.080591 -0.087321 0.405798 0.480233 0.520947 0.351553 0.085795 0.425460
-0.244180 0.537519 0.093966 -0.107875 0.362227 -0.419277 -0.386924 -0.074391 0.410777
-0.240839 -0.138424 0.519974 0.115826 -0.370674 0.288584 -0.393926 0.431228 0.277905

```

这些值的位置不同，符号也不同。我如何在 lapack 中解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:56:00.530

特征向量在实际比例因子之前是唯一的。这意味着如果 x 是一个特征向量，那么`l.x`（其中 l 是一个标量）也是一个。特别是， if`x`是一个特征向量，或者`M`then`-x`也是一个。请注意，特征向量通常是单位归一化的，因此`||x|| = 1`，但当然这仍然会给您留下两个可能的向量（`x`和`-x`）。您可以通过获取特征向量来解决这种歧义，`j.x`其中`j`是 的第一个非负坐标的符号`x`。

编辑特征向量也可以以不同的顺序返回。通常，它们以相应特征值的降序返回。

在您的示例中，特征向量似乎与不同的特征值有关，您能确认一下吗？

# joomla - 升级 PHP 会破坏 JOOMLA 吗？

> ID：11717021
> 
> 赞同：1
> 
> 时间：2012-07-30T07:25:29.863
> 
> 标签：joomla

我有一个有 JOOMLA 的客户！V1.5.1，目前在 PHP 4.4.9 上运行。有谁知道升级到 PHP5 是否会破坏我的网站？将升级到更新的 JOOMLA！版本破坏了我的网站？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:52:21.117

如果您只是升级 PHP，什么都不能改变。是否从包（如 .rpm 或 .deb）中使用或安装了自定义 PHP 构建？如果您有简单的 wibsite 并且将遵循升级 Joomla 的指南（在此处列出：http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5 [）](http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5) ，那么过程必须顺利进行。但是如果有任何扩展没有 Joomla 2.5 版本，你会遇到麻烦，因为旧的升级后将无法工作。在升级之前使用 akeeba 备份备份您的站点，并尝试在单独的位置备份/恢复以进行操作。我将它配置为使用 zip 格式，因为它不需要任何额外的软件来恢复站点，但这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:24:27.370

如果您升级到 PHP 5.3+，Joomla 1.5.1 上的一些功能可能无法使用。因此，您还应该将 Joomla 升级到 1.5.26，以确保该特定版本的最大安全性和稳定性。一旦 PHP 和 Joomla 都升级了，一切都会顺利进行。

要升级您的 PHP 版本，您需要与您的主机交谈，以及为什么他仍在 PHP 4.49 上运行他的服务器，我不知道。

要将 Joomla 更新到最新版本，我建议下载此软件包：

[Joomla 1.5.0 到 1.5.26](http://joomlacode.org/gf/download/frsrelease/16891/73384/Joomla_1.5.0_to_1.5.26-Stable-Patch_Package.zip)

我知道它不是 1.5.1 的更新，但它仍然可以工作。

至于升级到 Joomla 2.5，这不是必须的。这完全取决于你。只要确保你所有的etension都兼容。

希望这可以帮助。

# ruby-on-rails - 主要是静态的网站的性能策略

> ID：11717024
> 
> 赞同：0
> 
> 时间：2012-07-30T07:25:53.103
> 
> 标签：ruby-on-rails, caching, static

我正在接管 Rails 3.2 应用程序的开发，并正在寻找改善页面加载时间的最佳方法。该网站本身更像是一个大型动态网站，而不是一个实际的 Web 应用程序（该网站是[http://korduroy.tv/](http://korduroy.tv/)，一个冲浪生活方式社区网站），虽然有一些小部分因用户而异，大部分网站对每个人来说都是一样的体验。

页面加载时间相当慢，从服务器日志看，似乎是因为每个页面都加载了太多的动态内容（例如，大多数页面正在加载来自 10+ 模型的资源）。虽然我希望尽我所能进行重构，但我正在寻找一些基本的性能胜利。知道网站的大部分内容对于每个用户来说都是相同的，他们是否可以在服务器上积极缓存内容，甚至提供通过某种后台作业生成的静态内容？

我最初的想法是创建一个使用静态站点生成器的作业，可能类似于 Jekyl，并且基本上创建站点的静态副本，然后可以在 cdn 上提供该副本。我的直觉告诉我这可能不是这样做的方法，而且还有一些页面（例如用户个人资料页面）需要动态提供。

任何建议都会很棒。免责声明，我来自前端领域，对服务器端优化的最佳实践知之甚少。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:28:05.947

从您所写的内容来看，我相信您最大的收获将是使用 memcache 存储实现片段缓存。请参阅[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)作为 Rails 缓存的权威指南。

对于某些不依赖于用户的内容（例如主页），您可能能够摆脱页面缓存或操作缓存，但除非您每天处理数百万个请求，否则我不会确定这是必要的。

我注意到虽然 javascript 和 css 似乎是根据 rails 资产管道编译的，但图像缺少允许浏览器积极缓存资源的 sha1 哈希（因为您不必担心内容会发生变化，因为它们更改图像时获取新的哈希值）。这里的关键是启用资产管道，确保将资产编译为部署 ( `rake assets:precompile`) 的一部分并使用`image_tag`and`asset_path`助手（或`image-url`sass 助手）。当您刷新页面时，还要确保 nginx 以代码 304（未修改）响应您的浏览器。这不会影响 rails 服务器上的负载（除非您在同一台服务器上同时运行 nginx 和 rails），但会减少平均页面加载时间。

您可以研究更高级的技术，例如缓存您的 sql 查询或优化这些查询，但这会导致复杂性增加，从而更难维护您的代码库。首先尝试视图缓存，看看是否可以使加载时间达到可接受的水平。

# android - 从 MapView 中提取交通信息

> ID：11717026
> 
> 赞同：2
> 
> 时间：2012-07-30T07:25:58.043
> 
> 标签：android, google-maps, android-mapview, android-maps

我是 Android 新手，并按照教程显示[MapView](https://developers.google.com/maps/documentation/android/hello-mapview)。

MapView 还使用 a 方法显示交通信息`mapview.setTraffic(true)`。

MapView 将交通信息显示为红色、绿色和黄色的线条。我的问题是可以提取此交通信息吗？

我正在尝试捕获此交通信息，然后将其转换为音频并将其转发给用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:42:37.093

您无法分离交通信息，因为它来自光栅化图块。

# ajax - 通过 Jquery Ajax 调用向 Web 服务提供参数

> ID：11717028
> 
> 赞同：0
> 
> 时间：2012-07-30T07:26:10.470
> 
> 标签：ajax, asp.net-mvc-4, revealing-module-pattern

我正在使用显示模块模式和淘汰赛来绑定表单。当以该表单（注册）输入数据时，需要将其发布回 MVC4 Web 方法。

这是Jquery代码

```
 /*
Requires JQuery
Requires Knockout
*/
op.TestCall = function () {

    // Private Area
    var _tmpl = { load: "Loading", form: "RegisterForm"};

    var
    title = ko.observable(null)
    template = ko.observable(_tmpl.load),
    msg = ko.observable(),

    postData = ko.observable(),

    PostRegistration = function () {
        console.log("Ajax Call Start");
        var test = GetPostData();
        $.ajax({

            type: "POST",
            url: obj.postURL, //Your URL here api/registration
            data: GetPostData(),
            dataType: "json",
            traditional: true,
            contentType: 'application/json; charset=utf-8'

        }).done(Success).fail(Failure);
        console.log("Ajax Call End");
    },
    GetPostData = function () {
        var postData = JSON.stringify({
            dummyText1: dummyText1(),
            dummyText2: dummyText2(),

        });
        return postData;

    }

    return {
        // Public Area
        title: title,
        template: template,
        dummyText1: dummyText1,
        dummyText2: dummyText2
    };
}(); 
```

控制器代码现在很简单

```
 // POST api/registration
    public void Post(string data)
    {

        ///TODO

    } 
```

当我尝试捕获数据（使用简单的 console.log）并在 jslint.com 中验证它时，它是一个有效的 Json。

1.  我尝试将数据硬编码为

    数据：“{data:'{\'name\':\'niall\'}'}”，但在我的网络方法中，我仍然得到空值。

2.  在受控的情况下将标签添加`[System.Web.Script.Services.ScriptMethod(UseHttpGet = false, ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]`到我的 Post 方法中，但仍然没有卓有成效的结果

3.  甚至尝试过 JSON.Stringify`data: JSON.stringify(data)`但我的网络方法仍然为空。

我无法弄清楚解决方案。

[在此链接http://forums.asp.net/t/1555940.aspx/1](http://forums.asp.net/t/1555940.aspx/1)中发现了类似的问题， 甚至[使用 jQuery Ajax 将参数传递给 WebMethod](https://stackoverflow.com/questions/736058/problem-passing-parameter-to-webmethod-with-jquery-ajax) 但对我没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:54:03.277

MVC 和 WebApi 使用[模型绑定](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)的概念。

所以最简单的解决方案是，您需要创建一个与发送的 Json 数据的结构相匹配的 Model 类来接受服务器上的数据：

```
public void Post(MyModel model)
{
   ///TODO
}

public class MyModel
{
   public string DummyText1 { get; set; }

   public string DummyText1 { get; set; }
} 
```

注意：json 和 C# 属性名称应该匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T15:20:22.970

只允许转义的双引号字符，而不是单引号，因此您只需将单引号替换为双引号：

```
data: "{data: '{\"name\":\"niall\"}'}" 
```

或者如果你想使用 stringify 函数，你可以这样使用它：

```
data: "{data: '" + JSON.stringify(data) + "'}" 
```

# .net - 部分填写 PDF 表单，使其可编辑

> ID：11717031
> 
> 赞同：1
> 
> 时间：2012-07-30T07:26:18.273
> 
> 标签：.net, pdf, itextsharp

我们想向我的用户展示一个可编辑的 PDF（表单），其中我们已经填写了一些字段。然后，用户应通过浏览器使用 Adob​​e Reader 填写其余字段，然后保存/打印文件。

有没有办法做到这一点？

我曾尝试使用 iTextSharp，它可以让我很好地将数据填充到字段中，但之后文件被“展平”以防止任何进一步的编辑。

我发现了一个先前的问题 [[在填写 pdftk 后保持 pdf 表单可编辑](https://stackoverflow.com/questions/10726664/keep-a-pdf-form-editable-after-filling-it-with-pdftk)]，据说这是不可能的。但是，在阅读了 [[使用 JavaScript 将当前日期放入 PDF 表单的文本字段](https://stackoverflow.com/questions/5396617/placing-current-date-into-a-text-field-of-a-pdf-form-using-javascript)] 之后，我感觉使用 Adob​​e JavaScript API 可能可以实现。

有人对这个有经验么？

顺便说一句，我们的用户将使用 Internet Explorer 9+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:13:39.530

我确定您已经尝试过，但请尝试调用您的压模对象，并将 Form flattening 属性设置为 false。原谅我的c#，但如果你甚至必须转换的话，转换应该不会太麻烦。

```
PdfStamper stamper = new PdfStamper(reader, new FileStream(fileName, 
FileMode.Create, FileAccess.ReadWrite));

stamper.FormFlattening = false; 
```

如果您已经这样做了，我不知道该告诉您什么，因为我没有足够的信息来确定任何替代方案。如果没有在代码中明确引用，我不完全确定默认表单展平属性设置为什么。让我知道这是否适合您。

干杯

# php - 如何在美国通过 IP 地址获取时区？

> ID：11717032
> 
> 赞同：4
> 
> 时间：2012-07-30T07:26:18.837
> 
> 标签：php

例如，
我有一个来自美国的 IP 地址。
我正在使用这个功能：

```
$timeZone = DateTimeZone::listIdentifiers(DateTimeZone::PER_COUNTRY, "US"); 
```

获取位置。
我得到一个数组：

```
0 => string 'America/Adak'   
1 => string 'America/Anchorage'  
2 => string 'America/Boise' 
```

我如何从 IP 地址知道我需要的位置是什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:43:01.303

不幸的是，没有简单的方法可以通过 IP 地址确定时区，尤其是在您使用共享主机的情况下。

但是，如果你可以安装[GeoIP 扩展](http://www.php.net/manual/en/book.geoip.php)，你可以让它像这样工作：

```
$region = geoip_region_by_name($_SERVER['REMOTE_ADDR']);
$timezone = geoip_time_zone_by_country_and_region($region['country_code'], $region['region']); 
```

阅读更多关于：

1.  [geoip_time_zone_by_country_and_region](http://www.php.net/manual/en/function.geoip-time-zone-by-country-and-region.php)
2.  [geoip_region_by_name](http://www.php.net/manual/en/function.geoip-region-by-name.php)

# android - 当从一个活动移动到另一个活动时，旋转或翻页类似于 android 中的动画

> ID：11717033
> 
> 赞同：2
> 
> 时间：2012-07-30T07:26:20.390
> 
> 标签：android, android-animation

从一个活动移动到另一个活动时，我想要一个类似翻转的动画。像这样：

[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

我遵循了在 SOF 上发布的这个解决方案：

[Android在两个活动之间旋转动画？](https://stackoverflow.com/questions/7853997/android-rotate-animation-between-two-activity#answers-header)

```
//Calls a new Activity  
startActivity(new Intent(this, NewActivity.class));  

//Set the transition -> method available from Android 2.0 and beyond  
overridePendingTransition(R.anim.rotate_out,R.anim.rotate_in); 
```

旋转输出.xml

```
<?xml version="1.0" encoding="utf-8"?>   
<set xmlns:android="http://schemas.android.com/apk/res/android">  
   <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />  
   <rotate android:fromDegrees="0" android:toDegrees="90" android:pivotX="25%" />
</set> 
```

旋转输入.xml

```
<?xml version="1.0" encoding="utf-8"?>   
<set xmlns:android="http://schemas.android.com/apk/res/android">  
   <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />  
   <rotate android:fromDegrees="90" android:toDegrees="0" android:pivotX="-25%" />
</set> 
```

但结果是：

我将持续时间从“300”更改为“3000”，只是为了清楚地检查实际动画。当我单击按钮从 ActivityA 转到 ActivityB 时，屏幕变黑，然后慢慢地 ActivityA 出现，然后突然 ActivityB 出现

我正在使用 Android 2.3.3(API 10)

任何人都可以帮助我实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:35:39.420

如果您将持续时间从 300 更改为 3000，它只会减慢动画速度。首先将其设为 1500，这可以很好地注意动画。其次，如果你想要翻页，你可以改变“从”和“到”的程度检查这个代码

在rotate_in

```
<?xml version="1.0" encoding="utf-8"?>   
<set xmlns:android="http://schemas.android.com/apk/res/android">  
 <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="1500" />  
<rotate android:fromDegrees="75" android:toDegrees="180" android:pivotX="-25%" />
</set> 
```

在旋转输出

```
<?xml version="1.0" encoding="utf-8"?>   
<set xmlns:android="http://schemas.android.com/apk/res/android">  
<alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="1500" />  
<rotate android:fromDegrees="180" android:toDegrees="-75" android:pivotX="25%" />
</set> 
```

我希望这是你想要的，这段代码是从左上角到右下角翻页。

# sockets - 如何更改套接字的 IP_MULTICAST_IF

> ID：11717039
> 
> 赞同：3
> 
> 时间：2012-07-30T07:26:51.533
> 
> 标签：sockets, interface, ip, multicast

我有一台有 5 个接口的计算机：3 个带有公共 IP 和 2 个本地 IP。我正在尝试向 UDP 服务器发送“HELLO”，但我想将接口更改为本地 IP 地址之一。我做了一些研究，这是我需要在 python 中添加的行：

```
sock.setsockopt(socket.SOL_IP, socket.IP_MULTICAST_IF, socket.inet_aton("64.195.10.11")) 
```

64.195.10.11 是我要更改为的 IP

所以我的python代码是这样的：

```
import socket

MCAST_GRP = '224.0.0.1'
MCAST_PORT = 10222

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
sock.setsockopt(socket.SOL_IP, socket.IP_MULTICAST_IF, socket.inet_aton("64.195.10.10"))
sock.sendto("HELLO", (MCAST_GRP, MCAST_PORT)) 
```

当我在我的 3 个公共 IP 地址之间进行更改时，它可以完美运行。但是，如果我在参数中输入本地 IP，它就不起作用（数据包未传递）。我不确定是脚本没有发送，还是服务器没有接收。怎么了？

SL

编辑：我正在使用两种方式收听：

```
import socket
import sys

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(("", 10222))
sock.setsockopt(socket.IPPROTO_IP,
                                 socket.IP_ADD_MEMBERSHIP,
                                 socket.inet_aton("224.0.0.1") +
                                 socket.inet_aton("64.195.10.11"))
sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_LOOP, 0)

while True:
    print >>sys.stderr, '\nwaiting to receive message'
    data, address = sock.recvfrom(1024)

    print >>sys.stderr, 'received %s bytes from %s' % (len(data), address)
    print >>sys.stderr, data

    print >>sys.stderr, 'sending acknowledgement to', address
    sock.sendto('ack', address) 
```

并使用扭曲：

```
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer

class MulticastServerUDP(DatagramProtocol):
    def __init__ (self, group, name):
        self.group = group
        self.name = name
    def startProtocol(self):
        print '%s Started Listening' % self.group
        self.transport.joinGroup(self.group)

    def datagramReceived(self, datagram, address):
        print "%s Received:"%self.name + repr(datagram) + repr(address)

reactor.listenMulticast(10222, MulticastServerUDP('224.0.0.1', 'SERVER1'), listenMultiple = True)             
reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:25:03.373

如果服务器和客户端在同一台机器上（用于测试），也许你需要`IP_MULTICAST_LOOP`像这样设置选项（c代码）：

```
int loop_on = 1;
setsockopt(socket, IPPROTO_IP, IP_MULTICAST_LOOP, &loop_on, sizeof(loop_on)); 
```

在 python 中，你可以尝试这样的事情：

```
sock.setsockopt(socket.SOL_IP, socket.IP_MULTICAST_LOOP, 1) 
```

希望这有帮助。

编辑：添加一些跟踪（来自我的 Linux 机器）

我使用的代码与 SquallLeohart 发布的代码相同：

```
#! /usr/bin/python

import socket

MCAST_GRP = '224.0.0.1'
MCAST_PORT = 10222

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
sock.setsockopt(socket.SOL_IP, socket.IP_MULTICAST_IF, socket.inet_aton("192.168.1.7"))
sock.sendto("HELLO", (MCAST_GRP, MCAST_PORT)) 
```

和：

```
#! /usr/bin/python
import socket
import sys

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(("", 10222))
sock.setsockopt(socket.IPPROTO_IP,
                                 socket.IP_ADD_MEMBERSHIP,
                                 socket.inet_aton("224.0.0.1") +
                                 socket.inet_aton("192.168.1.7"))
sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_LOOP, 0)

while True:
    print >>sys.stderr, '\nwaiting to receive message'
    data, address = sock.recvfrom(1024)

    print >>sys.stderr, 'received %s bytes from %s' % (len(data), address)
    print >>sys.stderr, data

    print >>sys.stderr, 'sending acknowledgement to', address
    sock.sendto('ack', address) 
```

我得到了这个输出：

```
waiting to receive message
received 5 bytes from ('192.168.1.7', 43761)
HELLO
sending acknowledgement to ('192.168.1.7', 43761)

waiting to receive message
received 5 bytes from ('192.168.1.7', 52326)
HELLO
sending acknowledgement to ('192.168.1.7', 52326)

waiting to receive message 
```

并使用 tcpdump：

```
21:01:33.814728 IP localhost.localdomain.34956 > all-systems.mcast.net.10222: UDP, length 5
21:01:35.364605 IP localhost.localdomain.39078 > all-systems.mcast.net.10222: UDP, length 5
21:01:36.228477 IP localhost.localdomain.49926 > all-systems.mcast.net.10222: UDP, length 5 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:46:12.237

答案：我的防火墙不接受来自那个 RFC1918 IP 地址的 udp 数据包。

# android - 安卓双卡检测

> ID：11717040
> 
> 赞同：2
> 
> 时间：2012-07-30T07:26:57.097
> 
> 标签：android, sim-card

看了很多文档，我才知道官方没有办法检测安卓手机是用双卡还是单卡，但是很明显很多app都在用这个功能，所以我决定问问有没有人知道我该如何实现那？

# php - 从 HTML 表单发布数组，并使用结果更新 mysql 表中的多行

> ID：11717044
> 
> 赞同：0
> 
> 时间：2012-07-30T07:27:37.080
> 
> 标签：php, mysql, html, arrays, forms

所以我有这个基本的html表单。我的目标是将提交给此表单的值传递到 mysql 表中。

```
 <form action="?action=settings" method="post">
      <ul>
        <li>
           <label for="settingValue[1]">Setting 1:</label>
           <input type="text" name="settingValue[1]" id="setting1" required />
        </li>
        <li>
            <label for="settingValue[2]">Setting 2:</label><br>
            <input checked type="radio" name="settingValue[2]" value="1" />On<br>
            <input type="radio" name="settingValue[2]" value="0" />Off
         </li>
         <li>
             <input type="submit" name="saveChanges" value="Save Changes" />
         </li>
       </ul>
   </form> 
```

我的 mysql 表只有 3 列（id、settingName、settingValue）所以我想通过将值存储到“settingValue”列中来使用这种形式（在本例中为第 1 行和第 2 行）更新表中的多条记录。

经过一些研究，我发现似乎最好的方法是发布一个数组（这是我在上面尝试做的），然后使用 foreach 循环遍历数组并更新表。

我想我的主要问题是弄清楚如何使用数组。因为我需要更新记录而不是创建新记录。我还需要保留 ID，以便更新相应的记录。

经过数小时的谷歌搜索，我最好的猜测是这样做：

```
if ( isset( $_POST['saveChanges'])) {
    foreach($_POST['settingValue'] as $key => $settingValue )  {
        $conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $conn->exec("UPDATE settings SET settingValue=$settingValue WHERE id=$key");
        $conn = null;
    } 
```

但它没有产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:50:23.830

总结我要添加的所有建议的解决方案。

数组`keys`可以`recordID`保留有关多条记录的参数的信息。

循环更好地组织下一种方式（**重用**现有连接，但不要在每次迭代时*重新打开）：*

```
$conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD ); // opened connection
if ( isset( $_POST['saveChanges'])) // if smth. POSTed
    foreach($_POST['settingValue'] as $key => $settingValue ) // LOOPing thorugh each item
        $conn->exec("UPDATE settings SET settingValue='".$settingValue."' WHERE id='".$key."'"); // executing query using the previously opened connection 
```

并尝试将 value `SET`value 括在引号 ( `'`) 或 ( `"`)`UPDATE settings SET settingValue='$settingValue' WHERE id='$key'`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:39:15.160

保留`$settingValue`和`$key`引号：

```
$conn->exec("UPDATE settings SET settingValue='$settingValue' WHERE id='$key'"); 
```

提示：保持`$conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );`在`foreach`循环之外。无需在每个循环上重复连接

# alfresco - 将 Orbeon 与 Alfresco 集成

> ID：11717051
> 
> 赞同：0
> 
> 时间：2012-07-30T07:27:53.157
> 
> 标签：alfresco, orbeon

我的问题很简单。我有一个 Orbeon 表单，我想将表单的 XML 文件存储在 Alfresco 中。进行这种集成的最简单方法是什么。我知道 Orbeon PE 具有此功能，但我想使用 CE。我还检查了[http://blog.ossgeeks.org/2011/12/alfresco-persistence-layer-for-orbeon.html](http://blog.ossgeeks.org/2011/12/alfresco-persistence-layer-for-orbeon.html)但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:55:44.507

使用或创建一个 Alfresco*持久层*是要走的路。这很可能意味着：

1.  让 Alexey 在该[博客文章](http://blog.ossgeeks.org/2011/12/alfresco-persistence-layer-for-orbeon.html)中提到的持久层工作。也许您可以通过发布更详细的描述作为对该帖子的评论来获得有关您遇到的特定问题的反馈。
2.  编写自己的持久层。这可能比您想象的要简单，特别是如果您不需要所有操作（例如，如果您不需要*搜索*，因为您不会使用摘要页面）。

# android - Android Dialog片段消除黑色边框（顶部和底部）

> ID：11717052
> 
> 赞同：3
> 
> 时间：2012-07-30T07:27:56.083
> 
> 标签：android, android-dialogfragment

需要从对话框片段中消除顶部和底部边框。你怎么做呢？

```
 AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setCancelable(true);

    LayoutInflater inflater = LayoutInflater.from(activity);
    View view = inflater.inflate(R.layout.variants_dialog, null);

    // setup views
    setupListView(view);
    ...

    builder.setView(view);
    return builder.create(); // HERE I HAVE TOP & BOTTOM BLACK BORDERS 
```

* * *

这无济于事：

```
 builder.setView(view);
        AlertDialog result = builder.create();
        result.getWindow().setBackgroundDrawable(new ColorDrawable());
        return result; 
```

* * *

没有这样的方法：

```
 dialog.setView(layout, 0, 0, 0, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:41:47.890

我对 DialogFragments 不太熟悉，但是，使用常规对话框来执行此操作通常会 R.value.styles 并添加：

```
 <style name="myDialog" parent="@android:style/Theme.Dialog">
    <item name="android:buttonStyle">@style/Button</item>
    <item name="android:windowBackground">@android:color/transparent</item> 
    <item name="android:windowAnimationStyle">@style/PauseDialogAnimation</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:textColor">#FFFFFFFF</item>
    <item name="android:shadowColor">#cdc9c9</item>
    <item name="android:shadowDx">0</item>
    <item name="android:shadowDy">-1</item>
    <item name="android:shadowRadius">0.5</item>
</style> 
```

并将您的对话框设置为 stile `myDialog`。但是，使用[dialogFragments](http://developer.android.com/reference/android/app/DialogFragment.html)，您似乎需要在初始化样式时定义样式`DialogFragment.STYLE_NO_FRAME;`，希望有所帮助，尽管我知道这不是一个完整的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:56:11.980

找到解决方案！！

没有

```
setView(layout, 0, 0, 0, 0); 
```

在来自 dialogFragment 的构建器上，但 AlertDialog 有这个方法.. 所以而不是返回

```
builder.create(); 
```

做这个

```
//dont set view for builder!
AlertDialog result = builder.create();
result.setView(view, 0, 0, 0, 0);
return result; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T02:20:32.327

这对我有用：

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T07:44:05.397

不久前我遇到了类似的问题。问题是 Builder 根本不允许您使用对话框的填充。我的工作是创建 AlertDialog 的子类：

```
final class PaddinglessDialog extends AlertDialog {
    public PaddinglessDialog(Context context, int theme) {
        super(context, theme);
    }
} 
```

然后我继续像这样使用它：

```
PaddinglessDialog alertDialog = new PaddinglessDialog(this, android.R.style.Theme_Holo_Light_Panel);
View layout = LayoutInflater.from(this).inflate(R.layout.my_dialog_layout, ...);
alertDialog.setView(layout, 0, 0, 0, 0);
alertDialog.setCanceledOnTouchOutside(false);
...
dialog = alertDialog; 
```

# java - 如何在 Java 中使用 Expedia XML API

> ID：11717056
> 
> 赞同：0
> 
> 时间：2012-07-30T07:28:40.087
> 
> 标签：java, api

我有 Expedia 帐户来获取酒店列表，他们提供 XML 格式的数据。

我需要使用 Java 编程语言处理 XML 并在我的网站上显示 HTML 格式的数据。我在 PHP 中使用了 file_get_contents，但我不知道在 Java 中链接到 API 的一分钱。什么是详尽的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:34:18.003

下面的代码将读取页面内容，如`file_get_contents`php

```
 import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class URLExp {

    public static void main(String[] args) {
        try {
            URL google = new URL("http://www.google.com/");
            URLConnection yc = google.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(yc
                    .getInputStream()));
            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                System.out.println(inputLine);

            }
            in.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

现在在代码中传递你的 url 后，你应该得到你所说的 xml。解析 XML 并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T13:36:02.370

使用 apache httpclient 调用 URL，通过将 headers 设置为 text /XML 来获取 XML。解析 XML 的最简单方法是使用 castor 库。发布您的代码，我们可以提供更多帮助...

# html - 如何在 HTML 树中获取节点的深度？

> ID：11717059
> 
> 赞同：0
> 
> 时间：2012-07-30T07:28:52.630
> 
> 标签：html, tree, html-agility-pack

我正在使用 HtmlAgilityPack 来解析和分析 HTML 页面，我需要知道每个节点的“深度”——与节点的距离`Body`。示例（“深度”属性仅用于说明目的）：

```
<html>
  <head></head>
  <body depth="0"> 
    <div depth="1">
      <ul depth="2">
        <li depth="3">
          <p depth="4">foo</p>
        </li>
        <li depth="3">
          <p depth="4">bar</p>
        </li>
      </ul>
    </div>
  </body>
</html> 
```

我试图避免两个明显的解决方案：

*   扫描 HTML 树（DFS、BFS 等），计算每个节点的深度，并将值存储在 Dictionary 或类似物中。
*   `node.ParentNode`通过计数直到`body`达到“按需”计算每个节点的深度。

有没有办法通过使用 HtmlAgilityPack 收集的现有数据来避免这些`Load`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:53:31.387

据我所知，AgilityPack 不存储节点的深度。

如果你想获得**所有节点的***深度*，假设，编写一个递归方法会更容易，例如从根节点开始并通过递归调用当前节点子节点来增加*深度。*

 ***至于单个节点的深度计算，您可以使用该`HtmlNode.XPath`属性，并计算该值中的斜杠（`/`）的数量。这将是节点深度。在您的情况下，您应该首先计算`<body>`节点的深度，然后从期望节点的深度中减去该值以获得*相对深度*：

```
var bodyDepth = doc.DocumentNode
    .SelectSingleNode("//body")
    .XPath
    .Count(c => c == '/');
var paragraphDepth = doc.DocumentNode
    .SelectSingleNode("//p")
    .XPath
    .Count(c => c == '/');
var result = paragraphDepth - bodyDepth; 
```

这会给你`4`，但我不确定这是否比遍历`ParentNode`属性更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:33:04.897

你问是否有内置的`NodeDepth`财产或类似的东西？我很确定答案是否定的，因为计算库解析的每个节点都会产生很少得到保证的开销。由于计算节点深度很容易通过一些递归来完成，我认为他们不会在默认情况下包含它。

为什么要避免明显的解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T06:06:16.773

HtmlAgilityPack 不会给出深度细节。我们可以使用上面提供的“/”字符计数从 XPath 变量中获取它。我们不需要遍历父项来获取详细信息。

```
 foreach (HtmlNode rootNode in document.DocumentNode.Descendants())
            {
                levels.Add(rootNode.XPath.Count(x => x == '/'));
            } 
```

它应该工作。***

# android - 将 html 文件作为附件发送

> ID：11717061
> 
> 赞同：2
> 
> 时间：2012-07-30T07:28:55.237
> 
> 标签：android, android-intent

我可以使用哪种类型来发送带有 html 页面附件的电子邮件？无论我使用什么类型，发送的邮件都包含一个空页面作为附件

这是一些代码

```
String root = "/data/data/com.email/files/";
                String fileName = "Payslip.html";
                if (true) {
                    attachment = new File(root, fileName);
                }

                final Intent emailIntent = new Intent(

                android.content.Intent.ACTION_SEND);

                emailIntent.setType("application/octet-stream");

                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,

                new String[] { address.getText().toString() });

                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,

                subject.getText());

                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,

                emailtext.getText());

                emailIntent.putExtra(Intent.EXTRA_STREAM,
                        Uri.fromFile(attachment));

                EmailActivity.this.startActivity(Intent.createChooser(
                        emailIntent,

                        "Send mail...")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:43:42.547

就目前而言，我们可以使用 context.getFilesDir() 将 File 对象检索到“files”目录。有了它，您还可以获得另一个 File 对象到您存储的 HTML 页面。您还可以使用 File.exists() 和 File.isFile() 方法进行检查。感[谢克里斯蒂安·利辛](https://stackoverflow.com/users/526369/christian-lischnig)

# java - 为什么我不能在类块中调用实例变量的方法？

> ID：11717062
> 
> 赞同：-3
> 
> 时间：2012-07-30T07:28:58.143
> 
> 标签：java, oop

考虑下面的课程

```
public class Player {

private int id;
public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}
} 
```

假设同一个包中有另一个类

```
public class Sample {
    Player p1 = new Player();
    Player p2 = new Player();
    Player p3 = new Player();
    Player p4 = new Player();
    //p1.
} 
```

在这个类中访问方法 p1.setId(int) 是不可能的，除非它在另一个方法中被调用

```
public class Sample {
    Player p1 = new Player();
    Player p2 = new Player();
    Player p3 = new Player();
    Player p4 = new Player();

    void example () {
        int x;
        p1.setId(x);                
    }
} 
```

内部示例 p1.setId() 是可能的。我知道java只允许在另一个方法中访问方法。所以它更安全。但我想澄清一下为什么会有这样的限制，以及这个限制显示了什么概念数据抽象或封装。提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:38:52.513

> 我知道java只允许在另一个方法中访问方法。所以它更安全

这完全是胡说八道。

你只是对语言的语法规则有问题，它说在类体内，[你只能有这四件事：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.6)

```
ClassMemberDeclaration
InstanceInitializer
StaticInitializer
ConstructorDeclaration 
```

您不能将任何代码放在类中，这不是定义类的方式。您*可以*使用实例初始化程序。这有效：

```
public class Sample()
{
        Player p1 = new Player();
        Player p2 = new Player();
        Player p3 = new Player();
        Player p4 = new Player();

        {
            p1.setInt(2);
        }
} 
```

但通常不会这样做，因为构造函数更适合实例初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T07:43:15.703

**-**在类范围内，您**不能**在类范围内执行那样的操作

**-**要么它必须是`inside a method`，要么`inside a block`。

**例如：**

```
public void go(){     // Inside a method

      p1.setIt(1);

   } 
```

例如：

```
{                    // Inside a block

      p1.setIt(1);

  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T07:35:46.690

因为您尝试在类块中执行操作，所以应该定义方法和变量。

如果您真的想设置此属性，请使用块。

```
public class Sample() {
    Player p1 = new Player();
    {
        p1.setId(1);
    }
} 
```

我认为更好的情况是使用一些将从构造函数调用的初始化方法。

```
public class Sample() {
    Player p1 = new Player();
    public Sample() {
        init();
    }
    private init(){
        p1.setId(1);
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-30T07:38:55.050

而且我认为您的代码中可能还有另一个错误：为什么在类名“Sample”之后使用括号？

# linux - 在 Linux 中获取“临时文件夹”的命令

> ID：11717063
> 
> 赞同：5
> 
> 时间：2012-07-30T07:28:58.513
> 
> 标签：linux

> **可能重复：**
> [如何在 Linux 中找到“临时”目录？](https://stackoverflow.com/questions/31068/how-do-i-find-the-temp-directory-in-linux)

GetTempPath 将返回 Windows 中的临时文件夹路径。是否有任何等效的命令来获取 Linux 中的临时文件夹路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:36:58.420

在 linux 上，有 2 个固定位置：`/tmp`- 重新启动时擦除，以及`/var/tmp`- 未擦除。一些应用程序也尊重`TMP`环境变量。另见`mktemp`命令。

# objective-c - 保存和播放不同的 AVAudioRecorder 文件

> ID：11717067
> 
> 赞同：0
> 
> 时间：2012-07-30T07:29:09.640
> 
> 标签：objective-c, ios, avaudioplayer, avaudiorecorder

我正在尝试玩弄，`AVAudioRecorder`我现在要做的是记录和播放不同的视图。

这是怎么回事。我在每个页面中有 20 个视图（或页面，因为我正在准备一个图书应用程序），您可以记录并在您停止时自动保存文件，然后仅在该页面上播放。当您转到其他页面时，您可以再次录制另一个页面，当您返回上一页时，您之前的录音仍然可以播放。

我怎样才能做到这一点？我尝试给文件起不同的名称并使用 播放它，`AVAudioPlayer`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:13:05.650

使用多个文件名是满足此需求的最简单方法之一。我使用多个文件来存储我的一个应用程序的音频数据。在我的情况下，我将文件中的数据预加载到内存中，然后分配一个新的 AVAudioPlayer 对象并使用数据对其进行初始化：

self.msg = [NSMutableData dataWithContentsOfURL:filePathAsString]; self.player = [[[AVAudioPlayer alloc] initWithData:self.msg error:&err] autorelease]; ... [self.msg 发布];

要再次录制给定的音频剪辑，只需将录制的数据保存在与相关视图关联的文件中的任何现有数据上，当上面的代码执行时，您的播放会自动获取新的音频。

# php - 使用 codeigniter 通过 url 渲染数据

> ID：11717069
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:29:09.967
> 
> 标签：php, codeigniter

这是我的系统。用户登录网站并使用他们创建表单的表单生成器。创建表单后，我将表单 html 转储到我的数据库中。现在我必须给他们一个 URL，他们可以用它来调用他们网站上创建的表单。我想要一些关于如何使用 codeigniter 创建 URL 的建议。如果 url 在浏览器中打开，表单应该会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:15:14.237

您可以创建一个随机字符串，将其放入数据库中并使用控制器来获取相应的数据。

所以：`site.com/getmyform/H43d0apeV` ( `domain.com/controller/randomstring`)

创建随机字符串时，您应该考虑几个因素：

*   该服务将有多少用户？
*   生成的字符串将活动多长时间？

用户越多，时间跨度越长，字符串可以变得越长以保持唯一性。我认为不需要像 bit.ly-isch 服务那样使字符串尽可能短。

要考虑的另一件事是安全性。字符串越长，某人（更有可能是某物）“猜测”它的机会就越小。

# objective-c - 似乎 null NSString 的长度为 6？

> ID：11717070
> 
> 赞同：2
> 
> 时间：2012-07-30T07:29:23.727
> 
> 标签：objective-c, nsstring

我有一个 Person 类的人对象，其属性是地址，年龄。当我检查属性时，我在屏幕上打印地址：

```
 NSLog(@"Add: %@, length: %i", person.address, [person.address length]); 
```

结果是：**加：nil，长度：6**

你能解释一下为什么字符串为空但它的长度显示为 6 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:44:45.480

您可能会以某种方式在该字段中获得“（null）”的字符串值，该字符串长度为 6 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:53:20.757

您可能正在寻找的答案是：您使用了错误的字符串格式说明符。我不确定是什么`%i`；`%d`是用于整数和`%u`无符号的，所以你需要：

```
NSLog(@"Add: %@, lenght: %u", person.address, [person.address length]); 
```

但是......长度可能不会返回您认为的内容。

如果`person.address`是`nil`，那么向它发送消息`length`将不会返回长度（“无”的长度是多少？）。碰巧的是，Objective C 运行时[将返回零](https://stackoverflow.com/questions/156395/sending-a-message-to-nil)，因此您的示例“有效”但可以说是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:33:19.897

地址是什么类型？NSString 我假设？使用 %d 或 %lu 作为长度（如果使用 %lu，则转换为 unsigned long）而不是 %i - 这应该会给出正确的结果。

结果，长度给出了 NSUInteger，因此正确的字符串格式说明符将是 %lu，尽管 %d 也应该起作用（考虑到这一点，我总是使用 %d）。我从来没有像％i...

```
NSLog(@"%lu", (unsigned long)string.length) 
```

看格式指定：

[https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

# deployment - 将 dll 复制到 VM 中的 Approot 是否会在 VM 重新启动时起作用？

> ID：11717075
> 
> 赞同：0
> 
> 时间：2012-07-30T07:30:02.723
> 
> 标签：deployment, azure

我们将 WCF 服务部署在 azure 云中并运行。我们对某些 dll 进行了一些更改，并希望在 VM 中进行更新，但不想进行常规部署/重新部署过程。

我们正在考虑手动将 dll 处理到 approot 和 siteroot 文件夹。它会起作用吗？将来VM重新启动时它会拾取新的dll吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:25:28.490

回答您的问题

*   将 dll 手动复制到 approot 和 sitesroot 文件夹是否有效：是（如果您有多个实例正在运行，请确保在**每个实例上执行此操作）**
*   这些 dll 是否会在重新启动后继续存在：是（请参阅[重新启动角色实例](http://msdn.microsoft.com/en-us/library/gg441298.aspx)：*...写入本地磁盘的任何数据都会在重新启动后保留。...*）

但我建议仅在您计划在开发服务时测试某些内容时才这样做。

不要**打算**将其用于生产部署，因为如果您的实例出现问题，Fabric Controller 可能会决定销毁该实例并部署一个新实例（同样适用于 Windows 更新）。这个新实例将回到您部署的初始状态（您部署的 cspkg 的内容）。

为了使您的**开发**部署更加轻松，您还可以在您的 Web 角色上激活 WebDeploy 以从 Visual Studio 进行部署：使用 Visual Studio[为 Windows Azure Web 角色启用 Web 部署](http://blogs.msdn.com/b/cloud/archive/2011/04/19/enabling-web-deploy-for-windows-azure-web-roles-with-visual-studio.aspx)（同样，不要将其用于实际部署，这仅适用于当您'正在测试一些东西）。

注意：Web 部署不适用于多个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:10:49.523

不，

这不是要走的路。如果你想更有活力，你必须采用[Windows Azure Accelerator for WebRoles](http://waawebroles.codeplex.com/)的方法。虽然不再支持和开发项目，但它将为您从 Blob 存储动态加载程序集（在本例中为整个站点）提供良好的基础。

# iphone - iPhone：用于图像浏览的类似 iPhoto 的平铺视图

> ID：11717080
> 
> 赞同：0
> 
> 时间：2012-07-30T07:30:45.207
> 
> 标签：iphone, ios4, photo-gallery, iphoto

在 iPhone 应用程序中，我想创建一个看起来像 iPhoto 应用程序的 UI，其中的照片将像 iPhoto 的平铺视图一样加载。

我打算使用 UITableView 来实现这一点。我如何管理显示随机尺寸的图像，就像 iPhoto 应用程序在画廊视图中显示的那样？

任何有助于实现它的图书馆？您能否提供代码示例网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:09:43.287

Shiv，您可以尝试 [AQGridView](https://github.com/AlanQuatermain/AQGridView)，它可以帮助您实现所需的目标。

您也可以等待[IOS 6并查看](http://www.apple.com/ios/ios6/#photostreams)照片工具。

也可以查看[http://three20.info/](http://three20.info/)并可能对您有所帮助。可能您可能已经点击了[iPhone 显示照片/图像滑动（如照片库和 Facebook 应用程序）？](https://stackoverflow.com/questions/4777122/iphone-show-photos-images-sliding-like-photo-library-and-facebook-app)关联。但一定要检查这个[链接](http://www.iphonedevsdk.com/forum/iphone-sdk-development/11382-implementing-picture-gallery-like-iphone-have.html)。

希望这么多东西对你有帮助；我试图在中午给出答案，但它花了我很晚，现在是晚上。

# facebook - Facebook Like 按钮没有出现

> ID：11717086
> 
> 赞同：0
> 
> 时间：2012-07-30T07:30:58.787
> 
> 标签：facebook, facebook-like

[http://www.flippish.com/boy-bawal/2012/07/25/](http://www.flippish.com/boy-bawal/2012/07/25/)

突然，facebook 之类的小部件在我的 wordpress 网站上不起作用。我尝试将链接放在 fb linter 上，但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:45:08.273

我看了看页面。你的布局出了点问题。尝试使用喜欢按钮的 iframe 版本。

# mysql - jOOQ 是如何支持 MySQL 的对偶的？

> ID：11717098
> 
> 赞同：1
> 
> 时间：2012-07-30T07:32:16.217
> 
> 标签：mysql, jooq

我不能使用[jOOQ](http://www.jooq.org)生成器为 MySQL 生成一个`Dual.java`类，但在 PostgreSQL 中是相反的

我在代码生成配置文件中包含了“双重”：

```
<includes>dual</includes>

<name>org.jooq.util.DefaultGenerator</name> 
```

我正在使用 jOOQ 的最新版本：2.4.0。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:41:55.177

使用 jOOQ，您不必担心`DUAL`桌子。jOOQ 为您处理。以下 jOOQ 查询：

```
create.select(val(1), val(2)).fetch(); 
```

将渲染

```
-- MySQL
SELECT 1, 2 FROM DUAL

-- Postgres
SELECT 1, 2 
```

有关各种 SQL 方言中的表和类似结构的更多信息`DUAL`，请阅读此博客文章：

[http://blog.jooq.org/2011/10/16/sql-trouble-with-dummy-tables/](http://blog.jooq.org/2011/10/16/sql-trouble-with-dummy-tables/)

# zend-framework - zend 框架日期选择器装饰器

> ID：11717099
> 
> 赞同：1
> 
> 时间：2012-07-30T07:32:19.467
> 
> 标签：zend-framework

```
<?php

class Application_Form_Auth extends Zend_Form
{

    public function init() 
    {   $this->setAttrib('enctype', 'multipart/form-data');
        $this->setMethod('post');

        $username = $this->createElement('text','username');
        $username->setLabel('Username:')
                 ->setRequired(true);                               

        $username->setDecorators(array(

                   'ViewHelper',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

        $password=$this->createElement('password','password');
        $password->setLabel('Password')
                 ->setRequired(true);

                $password->setDecorators(array(

                   'ViewHelper',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

        $file = new Zend_Form_Element_File('file');

        $file->setLabel('File')

            ->setDestination(BASE_PATH . '/data/uploads')

            ->setRequired(true);

                    $file->setDecorators(array(

                   'file',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

$captcha = $this->createElement('captcha', 'captcha',
array('required' => true,
'captcha' => array(
'captcha' => 'Image',
'font' => BASE_PATH .'/fonts/Average-Regular.ttf',
'fontSize' => '24',
'wordLen' => 5,
'height' => '75',
'width' => '200',
'imgDir'=> BASE_PATH.'/images/captcha',
'imgUrl'=>'../../images/captcha/',
'dotNoiseLevel' => 50,
'lineNoiseLevel' => 5)));

$captcha->setLabel('Please type the words shown:');

                    $captcha->setDecorators(array(

                   'captcha',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

           $form = new ZendX_JQuery_Form();
$date1 = new ZendX_JQuery_Form_Element_DatePicker(
                        'date1',
                        array('label' => 'Date:')
        );

           $date1->setDecorators(array(

               'FormElements',

               'Description',

               'Errors', array(array('data'=>'HtmlTag'), array('tag' => 'td',

               'colspan'=>'2','align'=>'center')),

               array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

       ));

        $reg=$this->createElement('submit','submit');
        $reg->setLabel('save'); 

            $reg->setDecorators(array(

               'ViewHelper',

               'Description',

               'Errors', array(array('data'=>'HtmlTag'), array('tag' => 'td',

               'colspan'=>'2','align'=>'center')),

               array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

       ));

    $this->setDecorators(array(

               'FormElements',

               array(array('data'=>'HtmlTag'),array('tag'=>'table')),

               'Form'

       ));

        $this->addElements(array(
        $username,
        $password,
        $file,
        $captcha,
        $date1,
        $reg

        ));

        return $this;
    }

}
?> 
```

这里 $date1->setDecorators() 不工作它向我显示这样的错误：

```
: Cannot render jQuery form element without at least one decorator implementing the 'ZendX_JQuery_Form_Decorator_UiWidgetElementMarker' interface 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:03:45.420

尝试在 DatePicker 对象上使用 UiWidgetElement 装饰器而不是 ViewHelper 装饰器。

# ios - 更新到 Mountain Lion 后构建失败

> ID：11717103
> 
> 赞同：1
> 
> 时间：2012-07-30T07:32:40.000
> 
> 标签：ios, osx-mountain-lion, xcode4.4

```
Traceback (most recent call last):   File "./Scripts/version.py", line 6, in <module>
    from Foundation import NSMutableDictionary   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC/Foundation/__init__.py", line 8, in <module>
    import objc as _objc   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC/objc/__init__.py", line 30, in <module>
    from objc._bridgesupport import *   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC/objc/_bridgesupport.py", line 9, in <module>
    import pkg_resources   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 698, in <module>
    class Environment(object):   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 701, in Environment
    def __init__(self, search_path=None, platform=get_supported_platform(), python=PY_MAJOR):   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 96, in get_supported_platform
    plat = get_build_platform(); m = macosVersionString.match(plat)   File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 222, in get_build_platform
    plat = get_platform()   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/util.py", line 98, in get_platform   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/sysconfig.py", line 498, in get_config_vars   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/sysconfig.py", line 407, in _init_posix distutils.errors.DistutilsPlatformError: $MACOSX_DEPLOYMENT_TARGET mismatch: now "10.7" but "10.8" during configure Command /bin/sh failed with exit code 1 
```

我正在使用 python 脚本对 TestFlight 进行版本控制。在构建时我遇到了一些错误。我对python一无所知。这里有什么问题？

*   XCode 版本：4.4
*   操作系统：山狮 10.8
*   MacBook PRO 2009 年中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:05:29.333

这似乎是消息的关键部分：

> $MACOSX_DEPLOYMENT_TARGET 不匹配：在配置期间现在为“10.7”但为“10.8”

您使用的任何工具集都是在 Mountain Lion 下配置的，但现在在 Lion 下运行，而您却声称相反。

您没有指定您使用的工具集，但看起来您将不得不在新的操作系统下重新设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:20:01.397

这有点奇怪，但是如果您编辑 .bash_profile 并添加：

导出 MACOSX_DEPLOYMENT_TARGET=10.8

你应该没事的。尝试运行后审查时，我遇到了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:10:11.170

我找到了解决方案，进入您的 /System/Library/Frameworks/Python.framework/Versions/2.7/lib/distutils/sysconfig.py

转到显示“引发 DistutilsPlatformError”的第 408 行并添加一个“#”以注释掉该行代码......这将“释放 python”

您基本上是在告诉 python“别担心它不是 10.7，我知道”可能会导致一些崩溃，但我认为并非如此。我非常复杂的 python 应用程序现在可以在 MacOSX 10.8 上毫无问题地编译，而且它似乎可以完成这项工作，但 QA 仍然需要对其进行测试。

我在 MacBookPro 2012 MacOSX 10.8

# ruby - Heroku 调度器的替换

> ID：11717104
> 
> 赞同：1
> 
> 时间：2012-07-30T07:32:40.483
> 
> 标签：ruby, heroku, rake

Heroku 的调度器很棒。对于每天、每小时或每隔 10 分钟运行的任务，我认为它非常简单。

我有一个（运行速度非常快的）进程，我想每 10*秒*运行一次。我将它设置为 rake 任务，我应该如何在 Heroku 平台上有效且简单地设置它，同时最大限度地减少我的 dyno 使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:38:59.730

也许这些文章给出了提示，即使它们是针对 Java 和 Python 的：

[https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes-java-quartz-rabbitmq](https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes-java-quartz-rabbitmq)

[https://devcenter.heroku.com/articles/clock-processes-python](https://devcenter.heroku.com/articles/clock-processes-python)

# iphone - UIAlertView 到 UITableViewController

> ID：11717111
> 
> 赞同：0
> 
> 时间：2012-07-30T07:33:13.363
> 
> 标签：iphone, uitableview, xcode4.3, uialertview

当我按下“确定”按钮时，`UIAlertView`我希望它返回， `UITableViewController`但当我单击它时，它不会返回。

`QuizViewController.h`：

```
@interface QuizViewController : UIViewController <UIAlertViewDelegate> { 
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex;

@end 
```

`QuizViewController.m`

```
-(IBAction)buttonWasClicked:(id)sender{

UIButton *resultebutton= (UIButton*)sender;

if (qCount < totalQuestions) {

    id prevQuestion =  [appDelegate.qs objectAtIndex:qCount-1];
    NSString * correctAns = [prevQuestion labelAns];

    if ([correctAns isEqualToString:resultebutton.titleLabel.text]) 
        myScore += 5;            

    NSLog(@"The button title is %@ ", correctAns);
    NSLog(@"The button title is %@ ", resultebutton.titleLabel.text);

    NSString *finishingStatement = [[NSString alloc] initWithFormat:@"Your score so far is %i!", myScore];
    theScore.text = finishingStatement;

    id nextQuestion = [appDelegate.qs objectAtIndex:qCount];

 quizLbl.text = [nextQuestion labelQn];
    headerLbl.text = [nextQuestion labelHeader];

 [qBtn setTitle:[nextQuestion labelBtn] forState:UIControlStateNormal];
 [qBtnB setTitle:[nextQuestion labelBtnB] forState:UIControlStateNormal];
 [qBtnC setTitle:[nextQuestion labelBtnC] forState:UIControlStateNormal];
 [qBtnD setTitle:[nextQuestion labelBtnD] forState:UIControlStateNormal];

 qCount++;

 }

 else {

     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Results" message:[[NSString alloc] initWithFormat:@"Your total score will be %i!", myScore]
                                                    delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];

     [alert show];

 }

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    QuizTableViewController *quizTable = [self.storyboard instantiateViewControllerWithIdentifier:@"quizTable"];

    [self.navigationController presentModalViewController:quizTable animated:YES]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:43:50.143

使用此代码返回。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:37:28.373

您不应该在 .h 文件中声明委托方法，例如： `-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex;`
而是在 alertView 中提供委托：self，如下所示：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Results" message:[[NSString alloc] initWithFormat:@"Your total score will be %i!", myScore]
                                                    delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil]; 
```

并在您的 .h 文件中声明

```
@interface QuizViewController : UIViewController<UIAlertViewDelegate> 
```

然后`[self.navigationController presentModalViewController:quizTable animated:YES];` 单击 button.index=0 在您的委托方法中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:39:34.893

用这个：

```
 - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
        if([alertView.title isEqualToString:@"the_title_of_your_alert"]){
           //above line is to identify your alert, if you have several ones
           if(buttonIndex == 0)
               //do this
           else if (buttonIndex == 1)
               //do that
           else if //bla bla bla, find the button, and if it is your "ok" button, 
                   //go to your TableViewController
        }
    } 
```

并且 alertView 的委托不应该这样声明，只需实现委托方法即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T07:44:52.073

您没有被回调的原因是您将`UIAlertView`委托设置为`nil`. 需要将其设置为`self`，以便该对象在解除警报时接收回调：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Results"
                                                message:[[NSString alloc] initWithFormat:@"Your total score will be %i!", myScore]  
                                               delegate:self
                                      cancelButtonTitle:@"OK" otherButtonTitles: nil]; 
```

# ruby-on-rails - 在没有 rails 环境的情况下使用 capistrano 部署 rails 应用程序

> ID：11717114
> 
> 赞同：0
> 
> 时间：2012-07-30T07:33:23.600
> 
> 标签：ruby-on-rails, deployment, capistrano

我一直在为一个非技术客户做一个 Rails 项目。但是，他们希望我发送一个部署脚本，他们的网络人员将使用该脚本来部署应用程序。

我一直在使用 capistrano。但问题是，上限严重依赖于应用程序本身。我需要的是一个脚本，它使用 cap 和 config/deploy.rb 但需要在他们的本地系统上进行最少的设置。主干中的 repo 是基于 git 的。

如果这不能通过 capistrano 实现，那么任何人都知道任何其他部署实用程序，那会让我的东西 cap 可以独立工作吗？..（我创建符号链接并在我的 :after_update 块中运行一些 rake 任务）。

谢谢，哈桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:54:21.017

如果设置运行 ruby​​ 环境`cap deploy`不是“网络人”愿意做的事情，那么您将面临一场艰苦的战斗。一些有助于缓解这种情况的建议：

*   让他们使用[railsready](https://github.com/joshfng/railsready/)脚本来设置他们的环境
*   给他们一个可用于部署实例的虚拟机（可能是 Vagrant 盒子？）
*   如果您正在进行基于 git 的部署，您要么必须设置部署密钥（并将其提供给他们），要么将它们添加到您的 github 项目（假设您使用的是 github）
*   考虑捆绑整个项目并作为 tarball 交付（或将其放入 rpm）并让它们以这种方式部署（一种快速而肮脏的方法是部署到运行与生产相同的发行版的机器上，然后将部署 tar 起来目录）
*   考虑使用更符合其网络堆栈的堆栈，例如用于部署到 Tomcat 的JRuby 和[warbler](https://github.com/jruby/warbler/)
*   为初始安装做一些配对编程或至少屏幕共享。有时，爱与恨一个平台的区别在于出现问题时能否获得帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T22:14:48.227

一种选择可能是设置类似 Jenkins 的东西，它将使用 capistrano 进行部署。您的客户可以卷曲 jenkins 构建 url 以触发部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:27:23.197

[Mina](http://nadarei.co/mina)与 Capistrano 类似，但不依赖于位于 rails 应用程序目录中。

# c++ - 从 C++ 中的函数返回字符串

> ID：11717115
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:33:28.810
> 
> 标签：c++, string

我有一些代码是从姓氏字符串中创建参考代码。它应该首先`char`考虑元音与否，然后搜索`char`数组中剩余的每个元音，丢弃仅在 temp 中存储辅音的元音`string`，然后将 temp 返回`string`到`string refCode;`C 中给我的代码，我将其转换为 C++。代码编译正确地分配了第一个值，但是如果`if`返回`true`，它将在尝试将第二个值分配给 temp 时失败`string`。代码超过 5 个 external`.cpp`和 4 个`.h`，所以我将从最少的数量开始，并根据需要发布更多。

原型：

```
string makeRefCode(string lastname, int cNo); 
```

称呼：

```
refCode = makeRefCode(e[c].lastname, cNo); cout << refCode;//Prints nothing 
```

函数定义：

```
string makeRefCode(string lastname, int cNo)
{
    string tStr;
    unsigned int i, j = 1;
    unsigned int x;
    x = lastname.length();
    tStr[0] = lastname[0];
    cout << tStr[0];//Prints correct value
    for (i = 1; i < x; i++)
    {
        if (!isVowel(toupper(lastname[i])))
        {
            //tStr[j] = lastname[i];//
            j++;
        }
    }
    //refCode[j] = '0'; // add string terminator
    return tStr;
}

bool isVowel(char aChar)
{
    switch (aChar) //<ctype>
    {
        case 'A':
        case 'E': 
        case 'I': 
        case 'O':
        case 'U': return true; break;
        default: return false;
    }
} 
```

当我尝试解决这个问题时，我得到了断言、访问冲突和一个似乎表明字符串不够大的字符串错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T07:39:11.173

字符串不会自动增大大小。如果您的字符串以零长度开始（就像`tStr`那样），那么您需要使用`push_back`将字符添加到字符串的末尾。

```
tStr.push_back(lastname[0]); 
```

和

```
tStr.push_back(lastname[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:39:56.390

你不能`tStr[0]`在一个空字符串上说！当然，目标字符串必须足够大以包含结果。要么说`tStr.push_back(lastname[0]);`or `tStr += lastname[0];`，要么初始化足够大的字符串（如 with `std::string tStr(lastname.size())`），然后在完成后截断它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T07:40:55.567

将单个字符分配给字符串时，请确保字符串已分配了这些字符。

以下代码是错误的：

```
string tStr;
//...
tStr[0] = lastname[0]; 
```

因为，它为`tStr`. 但`tStr`此时为空。

你想追加/推回字符：

```
string tStr;
//...
tStr.push_back( lastname[0] ); 
```

此外，您应该确保 lastname 不为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T07:49:13.500

您需要添加检查 0 长度：

```
if (x==0) .... 
```

您需要将注释代码替换为`tStr[j] = ...` ：

```
tStr.push_back(lastname[i]); 
```

# c - 来自 fread() 的意外返回值

> ID：11717120
> 
> 赞同：9
> 
> 时间：2012-07-30T07:34:02.613
> 
> 标签：c, fread, bmp

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

int main()
{
    FILE* bmp = NULL;
    uint32_t offset;
    uint8_t* temp = NULL;
    size_t read;
    unsigned int x_dim = 600, y_dim = 388;

    bmp = fopen("test_colour.bmp", "r");

    if (!bmp)
        return -1;

    /* Get the image data offset */
    fseek(bmp, 10, SEEK_SET);
    fgets((char*)&offset, 4, bmp);

    printf("Offset = %u\n", offset);

    temp = malloc(3*x_dim*y_dim*sizeof(uint8_t));

    if (!temp)
        return -1;

    /* Go the the position where the image data is stored */
    fseek(bmp, offset, SEEK_SET);

    /* Copy image data to array */
    printf("%u bytes requested!\n", 3*x_dim*y_dim);
    read = fread((void*)temp, sizeof(uint8_t), 3*x_dim*y_dim, bmp);
    printf("%Iu bytes read!\n", read);

    fclose(bmp);
    free(temp);

    return 0;
} 
```

我正在使用上面的代码将每像素 24 位 BMP 图像的 RGB 数据读取到数组中。根据 BMP 规范，从图像数据开始（在 BMP 标头之后）的文件开头的偏移量在偏移量 10 处给出。执行上述代码时，我得到以下输出。

```
Offset = 54
698400 bytes requested!
33018 bytes read! 
```

偏移量输出似乎是正确的，因为文件大小为 698454 字节（=698400+54）。但是，返回的值`fread()`似乎表明无法读取整个图像数据。但是，我随后使用`temp`数组中的数据将 RGB 数据转换为灰度数据并将此数据再次写入 BMP 文件。目视检查输出图像并不表示任何错误，即似乎我实际上首先阅读了整个输入图像，尽管`fread()`似乎表明不同。

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-30T07:53:13.097

（我敢打赌你在 Windows 上）

```
bmp = fopen("test_colour.bmp", "r"); 
```

应该

```
bmp = fopen("test_colour.bmp", "rb"); 
```

如果文件在 Windows 上以文本模式打开，运行时将在碰巧碰到 0x1a (Ctrl-Z) 字节时停止读取，Windows 将其视为文本文件的 EOF 标记。即使它没有按 Ctrl-Z，当 Windows 将 CR/LF 序列转换为单个 LF 字符时，您也会得到损坏的数据。

~~但是，我无法解释为什么您能够从读取的部分文件中获得良好的图像（只是幸运？）。~~

您可以从缓冲区渲染图像，因为该`fread()`实现确实将您请求的字节数（或几乎如此 - 数字被四舍五入到某个块大小的倍数）读入缓冲区，然后它扫描缓冲区寻找要转换的 CR/LF 序列和 Ctrl-Z EOF 标志。

所以即使`fread()`返回`33018`，缓冲区实际上已经几乎完全写入了文件中的数据。数据不是 100% 正确（例如，一些 CR 字符可能被丢弃）或完整，但在这种情况下，它足够接近以呈现看起来像您预期的图像。

当然，这只是对这个特定运行时当前行为方式的观察——它在未来（甚至在今天的所有系统上）可能并​​不总是这样。

# image - 将 Mediawiki 上的图像上传到单个文件夹

> ID：11717126
> 
> 赞同：0
> 
> 时间：2012-07-30T07:34:33.973
> 
> 标签：image, url, path, mediawiki

有没有办法配置 Mediawiki 将图像上传到同一文件夹而不是图像目录的随机子文件夹？

例如，当我上传图片时，我会得到这样的路径： [http ://website.com/wiki/images/5/5b/image.jpg](http://website.com/wiki/images/5/5b/image.jpg)

不能就这样吗？： [http ://website.com/wiki/images/image.jpg](http://website.com/wiki/images/image.jpg)

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:25:46.260

是的，只需在 LocalSettings.php 文件中将[$wgHashedUploadDirectory](http://www.mediawiki.org/wiki/Manual%3a%24wgHashedUploadDirectory)设置为 false。

# iphone - 检查 iphone-sdk 上是否有大写锁定

> ID：11717127
> 
> 赞同：0
> 
> 时间：2012-07-30T07:34:36.177
> 
> 标签：iphone, objective-c, uikeyboard

我如何检查 iphone-sdk 中的 caps 是否打开/关闭？

也许在方法上`- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField { }`？

（iOS 3.1.3+，Xcode 4.4，Mac OS X Lion）

# terminology - 一个潜在故障的例子？

> ID：11717129
> 
> 赞同：2
> 
> 时间：2012-07-30T07:34:48.097
> 
> 标签：terminology, theory, fault

我一直在考虑潜在的故障，无法找出一个例子。根据定义，休眠故障是不会导致错误并因此不会导致故障的故障（代码中的缺陷）。谁能给我一个例子？我唯一想到的是未使用的错误代码..谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:40:04.373

潜在故障比人们想象的要普遍得多。大多数程序员都经历过思考“我在想什么？怎么可能正确运行？”的时刻*，*即使代码没有显示错误行为。一个经典案例是错误的极端情况处理，例如内存分配失败：

```
char *foo = malloc(42);
strcpy( foo, "BarBaz" ); 
```

上面的代码在大多数情况下都可以正常工作，并且可以很好地通过测试；但是，当 malloc 由于内存耗尽而失败时，它会惨遭失败。故障存在，但处于休眠状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:17:33.353

休眠故障只是在您将正确的输入[编辑：或环境]发送到系统之前不会被发现的故障。

一个经典的例子来自[Therac-25](http://en.wikipedia.org/wiki/Therac-25)。直到技术人员“流利”地使用系统后，才出现由一组不太可能的输入键引起的竞争条件。他们记住了常用治疗的关键笔划，这意味着他们可以很快输入它们。

我想到的其他一些：

*   Y2K bug 都是休眠故障，直到 2000 年左右...
*   Photoshop 7 在我的 Windows 7 机器上仍然可以正常运行，[但它认为我的 1TB 磁盘已满](http://www.photoshopgurus.com/forum/photoshop-troubleshooting/39693-error-scratch-disk-full;-how-do-you-fix-problem.html)。一种解释是，用于保存可用空间的数据类型并非旨在考虑如此大量的可用空间，并且存在溢出导致可用空间显得不足。
*   使用 TFTP 传输大于 32MB 的文件（块计数器只能达到 16 位的 65535）可以揭示许多旧实现中的休眠错误。

在最后一组示例中，有人可能会争辩说没有规范要求这些系统支持此类实例，因此它们并不是真正的错误。但这涉及到规范的完整性。

# javascript - 在 brunch.io 中创建一个自定义 JS 目录

> ID：11717132
> 
> 赞同：3
> 
> 时间：2012-07-30T07:34:55.100
> 
> 标签：javascript, architecture, coffeescript, brunch

在[**brunch.io**](http://brunch.io)中，应用程序包含两个被编译的目录。这些在您的早午餐配置文件中进行控制，如下所示：

```
javascripts:
  defaultExtension: 'coffee'
  joinTo:
    'javascripts/app.js': /^app/
    'javascripts/vendor.js': /^vendor/ 
```

我想知道是否可以在 app.js/vendor.js 旁边创建一个命名空间，如果可以，我将如何做到这一点。我尝试在 app/vendor 旁边添加一个名为 的目录`namespace/`，其中包含我要编译的 CoffeeScript 文件。以及将其添加到配置文件中...

```
'javascripts/namespace.js': /^namespace/ 
```

1.  **这可以做到吗？**
2.  **如果是这样，我哪里错了？**

* * *

## 更新

我的文件`./public/namespace/`正在创建一个。`namespace.coffee`看来这只是没有向观察者注册？或者...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:00:55.757

它行不通。早午餐目前只看顶级`app`，`vendor`和`test`。我想我会在未来的版本中改变这一点。

但是你可以这样做：

```
joinTo:
  'javascripts/namespace.js': /^app(\/|\\)namespace/  # Only app/ns
  'javascripts/app.js': /^app(\/|\\)(?!namespace)/    # Everything but not app/ns
  'javascripts/vendor.js': /^vendor/ 
```

# sql-server - 首先使用实体 框架模型加密密码字段

> ID：11717133
> 
> 赞同：4
> 
> 时间：2012-07-30T07:34:59.063
> 
> 标签：sql-server, visual-studio-2010, entity-framework, ef-model-first

我在 VS2010 的项目中首先使用实体​​框架模型。

我想知道是否有办法在*.edmx*窗口或*属性*`password`窗口中设置要加密的字段。我不想更改生成的 .cs 文件，因为每次修改模型时都会覆盖它。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T08:15:26.670

EF 没有任何内置的加密支持，也不支持数据库加密机制（除非您在 SQL Server 中使用透明加密来加密整个数据库）。

作为一种解决方法，您可以在应用程序中进行集中加密和解密。这是高级想法：

*   为您的加密数据使用`string`属性 - 此属性将表示为`nvarchar`目标数据库中的列
*   覆盖`SaveChanges`您`ObjectContext`或`DbContext`继承的部分类中的方法（或处理继承类`SavingChanges`的事件`ObjectContext`）。在此方法/处理程序中搜索处于`Added`或`Modified`状态（使用`ObjectStateManager`或`DbChangeTracker`）的实体的所有实例，从应加密的属性中获取值，对其进行加密并将加密值以 Base64 格式存储回属性。如果在您加密所有实例的属性后进行`SaveChanges`覆盖调用。`base.SaveChanges`
*   `ObjectMaterialized`甚至在继承的类上处理`ObjectContext`（在 DbContext 中，您必须使用从您的实例`IObjectContextAdapter`中获取实例），从属性中获取加密值，将其从 Base64 格式转换为字节数组，解密并将其存储回属性。这可能会导致一些其他并发症，因为更改属性值可能会导致修改状态，但您也应该能够修复它。`ObjectContext``DbContext`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T13:16:29.300

一个更简单的选择是创建一个部分类，它添加一个处理加密和解密的新属性。然后，您将在代码中引用这个新属性，而不是表对象中的 Password 属性。

```
Partial Public Class ObjectName
  Public Property PasswordValue As String
    Get
      Return Password.Decrypt()
    End Get
    Set(value As String)
      Password = value.Encrypt()
    End Set
  End Property
End Class 
```

在这种情况下，我在字符串对象上创建了扩展方法来做到这一点。我使用以下链接中的代码进行加密和解密：

[加密和解密字符串](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)**

# javascript - dojo 的 remAttr 方法的问题

> ID：11717134
> 
> 赞同：0
> 
> 时间：2012-07-30T07:34:59.293
> 
> 标签：javascript, attributes, dojo, spring-roo, spring-js

我正在**尝试从节点中删除属性**。我使用与 Spring Roo 捆绑的 Dojo/Dijit。我不知道如何对下面的错误进行排序。有人可以帮忙吗？

这是js代码：

```
dojo.ready(function remAttr(){
     dojo.removeAttr('theId', 'value');
}); 
```

这是我要访问的节点：

```
<option id="theId" value="">Tous</option> 
```

这是我得到的错误代码：

```
byId(node) is null
toString()dojo.js (ligne 14)
node = "theId"
name = "value"
remAttr()findPl...ld&form (ligne 40)
toString()dojo.js (ligne 14)
toString()dojo.js (ligne 14)
toString()dojo.js (ligne 14)
toString()dojo.js (ligne 14)
e = DOMContentLoaded 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:06:41.913

我刚试过这个（[jsfiddle](http://jsfiddle.net/CswYe/)），它似乎工作正常。您遇到的错误表明在 DOM 树中实际上无法找到“theId”节点（byId(node) 为空）。你确定它真的存在吗？如果手动做一个document.getElementByID("theId")，能不能自己找到option节点？

每当我以前看到这种行为时，通常是我正在寻找的 UI 部分还没有被渲染。

# c# - 在远程机器上执行 shell 命令

> ID：11717139
> 
> 赞同：0
> 
> 时间：2012-07-30T07:35:23.270
> 
> 标签：c#, .net, process, command, wmi

我只是在创建一个小工具来在远程机器上执行 shell 命令并获取输出和错误。

我在所有权限下运行我的应用程序。

示例：我应该能够在远程机器上运行 dir /a 并获取其他命令的输出等。

我刚刚浏览了一下，发现 psexec 是为执行此任务而提供的工具。但我想使用 .net 框架来做到这一点。

如果我将使用 WMI，那么我不知道该过程何时完成并读取输出。

任何人以前都这样做过。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:52:20.643

你想为开发目的做一些类似远程调试的事情吗？

如果是这样：在 Visual Studio 中尝试远程调试。开始：Visual Studio > Visual Studio 工具 > Visual Studio 远程调试器

# c# - 如何控制 TemplateField 顺序

> ID：11717140
> 
> 赞同：2
> 
> 时间：2012-07-30T07:35:33.567
> 
> 标签：c#, asp.net, gridview, templatefield

我有一个网格视图，其中列是通过代码动态生成的`[AutoGenerateColumns="false"]`，`TemplateField`但我正在`TemplateField`从 ASPX创建另一个

我如何控制这两个的顺序`TemplateField` 例如，我需要`TemplateField`首先从代码生成的，然后`TemplateField`从 ASPX 生成的在 gridview 中作为新行排在第二位。

```
TemplateField templateField = new TemplateField();
TemplateField uid = new TemplateField();
uid.HeaderText = "userid";
uid.ItemTemplate = new AddItemTemplate(ListItemType.Item, "userid");
GridView1.Columns.Add(uid);
for (int i = 0; i < dt.Columns.Count; i++)
{
   BoundField boundField = new BoundField();
   if (dt.Columns[i].ColumnName.ToString() != "userid")
   {
      boundField.DataField = dt.Columns[i].ColumnName.ToString();
      boundField.HeaderText = dt.Columns[i].ColumnName.ToString();
      GridView1.Columns.Add(boundField);
   }
} 
```

aspx 代码

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <tr>
                        <td>
                            <div id="div<%# Eval("userid") %>" >
                                <asp:GridView ID="GridView2" AllowSorting="true" >
                                    <Columns>
                                        --code--
                                    </Columns>
                                </asp:GridView>
                            </div>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

有没有办法控制这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:42:45.273

代替

```
GridView1.Columns.Add(boundField); 
```

采用：

```
GridView1.Columns.Insert(0, boundField); 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfieldcollection.insert.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfieldcollection.insert.aspx)

# jquery - jquery同位素中心砌体

> ID：11717141
> 
> 赞同：3
> 
> 时间：2012-07-30T07:35:39.187
> 
> 标签：jquery, jquery-isotope

我在使用 jquery 同位素和居中砌体时遇到了最艰难的时期。它总是最终做一个float：left。我知道在较旧的 jquery 砌体上，它就像“isFitWidth：true”一样简单，并且神奇地居中。伙计们，我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:03:44.370

你有一个精简的小提琴要展示吗？你试过什么？您是否按照 isotope.metafizzy.co/custom-layout-modes/centered-masonry.html 和 github 讨论 jsfiddle.net/trewknowledge/4rEzD/1 的说明进行操作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T08:21:04.950

要获得具有中心砌体和砌体排水沟的同位素，请尝试以下要点中的说明：[https ://gist.github.com/beausmith/4760823](https://gist.github.com/beausmith/4760823)

# c# - .NET (C#) 的 Twitter OAuth 授权问题

> ID：11717144
> 
> 赞同：3
> 
> 时间：2012-07-30T07:35:57.237
> 
> 标签：c#, oauth, twitter, twitter-oauth

我一直在努力弄清楚我们这里出了什么问题，显然我做不到。我尝试创建一个基本结构，以便在 .NET（C#）中通过 OAuth 使用 Twitter API，但是出现了问题，我看不到那是什么。

例如，当我发送[请求以获取请求令牌](https://dev.twitter.com/docs/api/1/post/oauth/request_token)时，我会返回 401 Unauthorized 响应并返回如下消息：

> 无法验证 oauth 签名和令牌

我用来创建签名的签名库如下（我用虚拟值替换了我的实际消费者密钥）：

> POST＆HTTP％3A％2F％2Fapi.twitter.com％2Foauth％2Frequest_token＆oauth_callback％3Dhttp％3A％2F％2Flocalhost％3A44444％2Faccount％2Fauth％26oauth_consumer_key％3XXXXXXXXXXXXXXXXXXXXXXXXXXX％26oauth_nonce％3DNjM0NzkyMzk0OTk2ODEyNTAz％26oauth_signature_method％3DHMAC-SHA1％26oauth_timestamp％3D1343631900％26oauth_version％ 3D1.0

考虑到我还没有可用的令牌秘密，签名密钥仅包含我的消费者密钥密钥和一个 & 符号（再次，我用一个虚拟值替换了我的实际消费者密钥）：

> 签名密钥：XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&

最后，我得到了以下 Authorization 标头（再次，虚拟消费者密钥）：

> OAuth oauth_callback="http%3A%2F%2Flocalhost%3A44444%2Faccount%2Fauth",oauth_consumer_key="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",oauth_nonce="NjM0NzkyMzk0OTk2ODEyNTAz",oauth_signature_method="HMAC-SHA1",oauth_timestamp="13436310000"" ,oauth_signature="ttLvZ2Xzq4CHt%2BNM4pW7X4h1wRA%3D"

我为此使用的代码如下（它有点长，但我宁愿将它粘贴在这里，而不是提供 gist URL 或其他东西）：

```
public class OAuthMessageHandler : DelegatingHandler {

    private const string OAuthConsumerKey = "oauth_consumer_key";
    private const string OAuthNonce = "oauth_nonce";
    private const string OAuthSignature = "oauth_signature";
    private const string OAuthSignatureMethod = "oauth_signature_method";
    private const string OAuthTimestamp = "oauth_timestamp";
    private const string OAuthToken = "oauth_token";
    private const string OAuthVersion = "oauth_version";
    private const string OAuthCallback = "oauth_callback";

    private const string HMACSHA1SignatureType = "HMAC-SHA1";

    private readonly OAuthState _oAuthState;

    public OAuthMessageHandler(OAuthCredential oAuthCredential, OAuthSignatureEntity signatureEntity,
        IEnumerable<KeyValuePair<string, string>> parameters, HttpMessageHandler innerHandler) : base(innerHandler) {

        _oAuthState = new OAuthState() {
            Credential = oAuthCredential,
            SignatureEntity = signatureEntity,
            Parameters = parameters,
            Nonce = GenerateNonce(),
            SignatureMethod = GetOAuthSignatureMethod(),
            Timestamp = GetTimestamp(),
            Version = GetVersion()
        };
    }

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken) {

        //add the auth header
        request.Headers.Authorization = new AuthenticationHeaderValue(
            "OAuth", GenerateAuthHeader(_oAuthState, request)
        );

        return base.SendAsync(request, cancellationToken);
    }

    private string GetTimestamp() {

        TimeSpan timeSpan = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        return Convert.ToInt64(timeSpan.TotalSeconds).ToString();
    }

    private string GetVersion() {

        return "1.0";
    }

    private string GetOAuthSignatureMethod() {

        return HMACSHA1SignatureType;
    }

    private string GenerateNonce() {

        return Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
    }

    private string GenerateSignature(OAuthState oAuthState, HttpRequestMessage request) {

        //https://dev.twitter.com/docs/auth/creating-signature
        //http://garyshortblog.wordpress.com/2011/02/11/a-twitter-oauth-example-in-c/

        SortedDictionary<string, string> signatureCollection = new SortedDictionary<string, string>();

        //Required for all requests
        signatureCollection.Add(OAuthConsumerKey, oAuthState.Credential.ConsumerKey);
        signatureCollection.Add(OAuthNonce, oAuthState.Nonce);
        signatureCollection.Add(OAuthVersion, oAuthState.Version);
        signatureCollection.Add(OAuthTimestamp, oAuthState.Timestamp);
        signatureCollection.Add(OAuthSignatureMethod, oAuthState.SignatureMethod);

        //Parameters
        if (oAuthState.Parameters != null) {
            oAuthState.Parameters.ForEach(x => signatureCollection.Add(x.Key, x.Value));
        }

        //Optionals
        if (!string.IsNullOrEmpty(oAuthState.Credential.Token))
            signatureCollection.Add(OAuthToken, oAuthState.Credential.Token);

        if (!string.IsNullOrEmpty(oAuthState.Credential.CallbackUrl))
            signatureCollection.Add(OAuthCallback, oAuthState.Credential.CallbackUrl);

        //Build the signature
        StringBuilder strBuilder = new StringBuilder();
        strBuilder.AppendFormat("{0}&", request.Method.Method.ToUpper());
        strBuilder.AppendFormat("{0}&", Uri.EscapeDataString(request.RequestUri.ToString()));
        signatureCollection.ForEach(x =>
            strBuilder.Append(
                Uri.EscapeDataString(string.Format("{0}={1}&", x.Key, x.Value))
            )
        );

        //Remove the trailing ambersand char from the signatureBase.
        //Remember, it's been urlEncoded so you have to remove the
        //last 3 chars - %26
        string baseSignatureString = strBuilder.ToString();
        baseSignatureString = baseSignatureString.Substring(0, baseSignatureString.Length - 3);

        //Build the signing key
        string signingKey = string.Format(
            "{0}&{1}", Uri.EscapeDataString(oAuthState.SignatureEntity.ConsumerSecret),
            string.IsNullOrEmpty(oAuthState.SignatureEntity.OAuthTokenSecret) ? "" : Uri.EscapeDataString(oAuthState.SignatureEntity.OAuthTokenSecret)
        );

        //Sign the request
        using (HMACSHA1 hashAlgorithm = new HMACSHA1(new ASCIIEncoding().GetBytes(signingKey))) {

            return Convert.ToBase64String(
                hashAlgorithm.ComputeHash(
                    new ASCIIEncoding().GetBytes(baseSignatureString)
                )
            );
        }
    }

    private string GenerateAuthHeader(OAuthState oAuthState, HttpRequestMessage request) {

        SortedDictionary<string, string> sortedDictionary = new SortedDictionary<string, string>();
        sortedDictionary.Add(OAuthNonce, Uri.EscapeDataString(oAuthState.Nonce));
        sortedDictionary.Add(OAuthSignatureMethod, Uri.EscapeDataString(oAuthState.SignatureMethod));
        sortedDictionary.Add(OAuthTimestamp, Uri.EscapeDataString(oAuthState.Timestamp));
        sortedDictionary.Add(OAuthConsumerKey, Uri.EscapeDataString(oAuthState.Credential.ConsumerKey));
        sortedDictionary.Add(OAuthVersion, Uri.EscapeDataString(oAuthState.Version));

        if (!string.IsNullOrEmpty(_oAuthState.Credential.Token))
            sortedDictionary.Add(OAuthToken, Uri.EscapeDataString(oAuthState.Credential.Token));

        if (!string.IsNullOrEmpty(_oAuthState.Credential.CallbackUrl))
            sortedDictionary.Add(OAuthCallback, Uri.EscapeDataString(oAuthState.Credential.CallbackUrl));

        StringBuilder strBuilder = new StringBuilder();
        var valueFormat = "{0}=\"{1}\",";

        sortedDictionary.ForEach(x => { 
            strBuilder.AppendFormat(valueFormat, x.Key, x.Value); 
        });

        //oAuth parameters has to be sorted before sending, but signature has to be at the end of the authorization request
        //http://stackoverflow.com/questions/5591240/acquire-twitter-request-token-failed
        strBuilder.AppendFormat(valueFormat, OAuthSignature, Uri.EscapeDataString(GenerateSignature(oAuthState, request)));

        return strBuilder.ToString().TrimEnd(',');
    }

    private class OAuthState {

        public OAuthCredential Credential { get; set; }
        public OAuthSignatureEntity SignatureEntity { get; set; }
        public IEnumerable<KeyValuePair<string, string>> Parameters { get; set; }
        public string Nonce { get; set; }
        public string Timestamp { get; set; }
        public string Version { get; set; }
        public string SignatureMethod { get; set; }
    }
} 
```

这里混合了新的 .NET `HttpClient`，但 Authorization 标头生成代码很容易理解。

那么，我的问题是什么，我错过了什么？

**编辑：**

我尝试了不同的端点（例如/1/account/update_profile.json），当我发送一个正文不需要编码的请求时它可以工作。例如：`location=Marmaris`有效，但`location=Marmaris, Turkey`即使我使用`Uri.EscapeDataString`.

**编辑：**

我用 Twitter OAuth 工具试了一下，看看我的签名库和 twitter 之间是否有任何特别的区别，我可以看到 twitter 的编码与我的不同。例如，Twitter 产生`location%3DMarmaris%252C%2520Turkey`价值，`location=Marmaris, Turkey`但我产生的是`location%3DMarmaris%2C%20Turkey`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:06:53.863

似乎所有问题都与编码问题有关，现在看来我已经解决了问题。以下是有关该问题的一些信息：

当我们创建签名库时，参数值需要被编码两次。例如，我有一个如下集合：

```
var collection = new List<KeyValuePair<string, string>>();
collection.Add(new KeyValuePair<string, string>("location", Uri.EscapeDataString(locationVal)));
collection.Add(new KeyValuePair<string, string>("url", Uri.EscapeDataString(profileUrl))); 
```

当我将它传递给 GenerateSignature 方法时，该方法会再编码一次，这会导致百分比符号被编码为`%25`，这使它工作。我的一个问题得到了解决，但当时我仍然无法成功发出请求令牌请求。

然后，我查看了“request_token”请求并看到了下面的代码行：

```
OAuthCredential creds = new OAuthCredential(_consumerKey) {
    CallbackUrl = "http://localhost:44444/account/auth"
}; 
```

我按`CallbackUrl`原样发送它以便对其进行编码，但由于 twitter 需要为签名库编码两次，我认为这可能是问题所在。然后，我用以下代码替换了这段代码：

```
OAuthCredential creds = new OAuthCredential(_consumerKey) { 
    CallbackUrl = Uri.EscapeDataString("http://localhost:44444/account/auth")
}; 
```

我所做的另一项更改是在`GenerateAuthHeader`方法内部，因为我不需要编码`CallbackUrl`两次。

```
//don't encode it here again.
//we already did that and auth header doesn't require it to be encoded twice
if (!string.IsNullOrEmpty(_oAuthState.Credential.CallbackUrl))
    sortedDictionary.Add(OAuthCallback, oAuthState.Credential.CallbackUrl); 
```

我让它运行没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:19:16.383

Tugberk 这里是另一个 OAuth 库，这里没有魔法。

[http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs](http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)

# android - 两个片段不能在线性布局中加权？

> ID：11717145
> 
> 赞同：0
> 
> 时间：2012-07-30T07:35:58.637
> 
> 标签：android, android-layout, layout

我尝试显示两个窗格的 UI 设计。我尝试在具有权重的线性布局中添加两个片段。但是，线性布局似乎忽略了权重。我该如何纠正？谢谢

[链接：] [http://dl.dropbox.com/u/78582670/twopanes.png](http://dl.dropbox.com/u/78582670/twopanes.png)

我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    class="com.usci.view.fragment.CatalogFragment"
    android:id="@+id/fragment_catalog"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="0.2">
</fragment>

<fragment
    class="com.usci.education.TestFragment1"
    android:id="@+id/fragment_test"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="0.8">
</fragment>

</LinearLayout> 
```

解决方案：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    class="com.usci.view.fragment.CatalogFragment"
    android:id="@+id/fragment_catalog"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="8">
</fragment>

<fragment
    class="com.usci.education.TestFragment1"
    android:id="@+id/fragment_test"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="2">
</fragment>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:54:30.983

总是，当您使用权重时，将（孩子的）宽度/高度设置为 0px，并且更喜欢整数作为权重。

所以，解决方案是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<fragment
    class="com.usci.view.fragment.CatalogFragment"
    android:id="@+id/fragment_catalog"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="2">
</fragment>

<fragment
    class="com.usci.education.TestFragment1"
    android:id="@+id/fragment_test"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="8">
</fragment>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:38:04.497

和我一起工作，把 20,80 .. 也试试**0.8,0.2**：

```
<fragment
class="com.usci.view.fragment.CatalogFragment"
android:id="@+id/fragment_catalog"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:layout_weight="0.8">
</fragment>

<fragment
    class="com.usci.education.TestFragment1"
    android:id="@+id/fragment_test"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="0.2">
</fragment> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:45:15.967

设置 android:layout_width 和 android:layout_height 值 match_parent，然后例如设置 android:layout_weight (1 fragment 和 2 fragment) 值 1

# php - Cookie 安全 php

> ID：11717146
> 
> 赞同：0
> 
> 时间：2012-07-30T07:36:02.260
> 
> 标签：php, security, cookies

我正在为登录表单的“记住我”部分使用基本的 cookie 系统。这是代码：

```
 if(isset($_POST['submit']))
{
$username = $_POST['username'];
$password = $_POST['password'];

    if($username&&$password)
    {
        $connect = mysql_connect('localhost','root','');
        mysql_select_db('phplogin');
        $query = mysql_query("SELECT * FROM utilisateurs WHERE NomUtilisateur='$username' AND MotDePasse='$password'");

        $rows = mysql_num_rows($query);
        if($rows==1)
        {
            if($_POST['checkbox'])
            {
                setcookie('username',$username,time()+3600);
                header('Location: membre.php');     

            }else{$_SESSION['username']=$username;header('Location:membre.php');}
        }else echo "Something something error";
    }else echo "Something something darkside";
} 
```

我不确定是否需要保护 cookie，如果需要，该怎么做？我真正想做的就是不允许人们使用伪造的 cookie 登录另一个用户帐户，或者在 cookie 中明文放置敏感信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:46:35.027

目前，如果他知道用户的用户名，任何人都可以登录自己。即使设置了 cookie，您也需要有一个流程来识别用户，他们是真正的客户..例如，当用户登录时，您可以针对该用户保存保存在 cookie 和您的数据库中的随机字母数字字符串，并且下次您将字符串与数据库中的值进行交叉检查并记住每 X 天更改一次字母数字字符串时，这可以防止攻击者复制某人的 cookie 并使用它们登录。像这样的事情

```
$uniquekey     = 'A234W';
$randomstring  = sha1(strval(rand(0,microtime(true))+ $uniquekey + strval(microtime(true))));
setcookie( 'loginID', $randomstring, time()+60*60*24*7,'/', 'www.yoursite.com', false, true); 
```

并且在从 cookie 中读取时`mysql_real_escape_string`用于过滤任何恶意代码

# android - 添加小部件时打开活动（不仅一次）

> ID：11717147
> 
> 赞同：1
> 
> 时间：2012-07-30T07:36:09.010
> 
> 标签：android, android-activity, widget

我有一个通过活动配置的小部件（我不想通过 a`preference activity`进行配置），并且希望每次添加小部件时都打开配置活动。

一旦用户配置了小部件，数据就会保存在 XML 中。

我看到`onEnable()`这只在第一次添加小部件时才有效，我的问题是：每次添加小部件时是否有任何其他函数被调用？

我已经考虑将 widgetId 添加到 XML 中，并在每次`onUpdate()`调用时检查是否有一个新的 widgetId 不在 XML 文件中，但我想这很混乱。

有人可以在这里给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:13:19.093

当用户添加您的小部件的新实例时，您的 AppWidgetProvider 的方法将被调用。您可以尝试在调用时启动 Activity `onUpdate`。**编辑**： 要检测用户添加您的小部件的新实例，您将在调用和方法时保存（这是您的小部件实例的唯一 ID 数组） （可能您必须将其保存在 App 首选项或文件中或... ）。然后当 onUpdate 或 onReceive 再次调用时，检查或否？如果是真的，你可以确定用户添加了新实例，如果两者相等，你的一个小部件正常更新，如果最新长度小于最新长度，您可以确保用户删除了您的小部件实例。在最后保存`onReceive`
 **`int[] appWidgetIds``onUpdate``onReceive``length of newest appWidgetIds is greater than length of latest appWidgetIds``onUpdate``onReceive``appWidgetIds`再等等。**

# c# - 从C#文本框中的日期计算年龄

> ID：11717149
> 
> 赞同：0
> 
> 时间：2012-07-30T07:36:13.367
> 
> 标签：c#, asp.net

> **可能重复：**
> [从生日计算年龄](https://stackoverflow.com/questions/9/calculating-age-from-birthday)

您如何计算年龄，以格式从 TextBox 获取输入`dd/MM/yyyy`？

例如

> 输入：txtDOB.Text 20/02/1989（字符串格式）
> 输出：txtAge.Text 23

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:41:09.527

您可以使用( [link](http://msdn.microsoft.com/en-us/library/8ysw4sby.aspx)`Substract` ) 的方法，然后使用属性来确定实际年龄：`DateTime``Days`

```
DateTime now = DateTime.Now;
DateTime givenDate = DateTime.Parse(input);

int days = now.Subtract(givenDate).Days
int age = Math.Floor(days / 365.24219) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:40:31.697

正如评论中已经指出的，正确的答案在这里：[Calculate age in C#](https://stackoverflow.com/questions/9/c-calculating-age-from-birthday)

您只需要将生日作为 DateTime 获取：

```
DateTime bday = DateTime.ParseExact("20/02/1989", "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:42:18.777

```
TimeSpan TS = DateTime.Now - new DateTime(1989, 02, 20);
double Years = TS.TotalDays / 365.25;  // 365 1/4 days per year 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T07:58:46.850

将出生日期解析为 DateTime 后，以下操作将起作用：

```
static int AgeInYears(DateTime birthday, DateTime today)
{
    return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;
} 
```

像这样解析日期：

```
DateTime dob = DateTime.ParseExact("20/02/1989", "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

和一个示例程序：

```
using System;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            DateTime dob = new DateTime(2010, 12, 30);
            DateTime today = DateTime.Now;

            int age = AgeInYears(dob, today);

            Console.WriteLine(age); // Prints "1"
        }

        static int AgeInYears(DateTime birthday, DateTime today)
        {
            return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T12:09:43.520

这个答案不是最有效的，因为它使用循环，但它也不依赖于使用 365.25 幻数。

返回从 a`datetime`到今天的完整年数的函数：

```
public static int CalcYears(DateTime fromDate)
    {
        int years = 0;
        DateTime toDate = DateTime.Now;
        while (toDate.AddYears(-1) >= fromDate)
        {
            years++;
            toDate = toDate.AddYears(-1);
        }
        return years;
    } 
```

用法：

```
int age = CalcYears(DateTime.ParseExact(txtDateOfBirth.Text, "dd/MM/yyyy", CultureInfo.InvariantCulture)); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-30T07:43:48.793

```
var date = DateTime.ParseExact("20/02/1989", "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture);
var age = (DateTime.Today.Year - date.Year);
Console.WriteLine(age); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-07-30T07:43:19.140

尝试这个

```
string[] AgeVal=textbox.text.split('/');
string Year=AgeVal[2].tostring();
string CurrentYear= DateTime.Now.Date.Year.ToString();
int Age=Convert.ToInt16((Current))-Convert.ToInt16((Year)); 
```

减去这两个值并得到你的年龄。

# php - 使用 jQuery mobile 和 php 登录

> ID：11717153
> 
> 赞同：0
> 
> 时间：2012-07-30T07:36:34.490
> 
> 标签：php, jquery-mobile, login

我有这段代码用于登录 jQuery mobile。但是，它不起作用，什么也没有发生......当我提交时，我返回到同一页面。

就像他不输入php文件一样。

这是ajax脚本：

```
 <script>
     $(document).ready(function(){
    $("#loginform").submit( function(){
    $.post('LoginExcution.php',
    $(this).serialize(), function(data){ $("#errorm").html(data)}};
    return false;
    }); 
</script> 
```

这是html：

```
<div data-role="page" id="login">
    <div data-theme="a" data-role="header">
</div>
<div data-role="content" style="padding: 15px">
    <div style="text-align:center">
        <img style="width: 50%; height: 50%" src="logo.jpg" />
    </div>
    <form id="loginform" method='post'>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput2" style="text-align:right">
                           Email:
                        </label>
                        <input id="textinput2" name="login" value="" type="text"/>
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput3" style="text-align:right">
                            Password:                            </label>
                        <input id="textinput3" name="password" value="" type="password"/>
                    </fieldset>
                </div>     
                <h3 id="errorm"> <?php if (isset($_GET['msg'])){ 

          echo "Invalid username or password";    
 } 

 ?></h3>
                <input type="submit" name="submit" id="submit" data-inline="true" data-  icon="arrow-l" data-iconpos="left" value="login"/>
            </form> 
```

这里是LoginExecution.php：

```
 //Sanitize the POST values
$login = $_POST['login'];
$password = $_POST['password'];

         $aqry="SELECT * FROM admin WHERE name='$login' AND password='".$_POST['password']."'";

           $employeeresult=mysql_query($eqry);  
            $adminresult=mysql_query($aqry);
    if( $employeeresult || $adminresult ){
     //Check whether the query was successful or not

                  if(mysql_num_rows($adminresult) == 1) {
        //Login Successful

        $member = mysql_fetch_assoc($adminresult);
        $_SESSION['MEMBER_ID'] = $member['AdID'];
        $_SESSION['NAME'] = $member['name'];

        header("location: mlogin.php");
        exit();
        }  
                            else { 
             //Login failed 
         header("Location: mobile/mlogin.php?msg=invalid%20name%20or%20password"); 
              exit(); 
             } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:24:10.690

你的脚本搞砸了，试试这个：

```
$(document).ready(function() {
  $("#loginform").submit(function() {
    $.post('LoginExcution.php', $(this).serialize(), function(data) { 
      $("#errorm").html(data); // semicolon missing in your code
    }); // round bracket and semicolon missing in your code
  }); // round bracket missing in your code
  return false;
}); 
```

另外，我个人更喜欢 JSON 编码的结果，例如

`{ status: 'error', msg: 'some message text' }`

或者

`{ status: 'ok', msg: 'logging in...' }`.

然后，您可以通过切换接收状态来决定是显示错误消息还是通过“location.href = ...”重定向到另一个页面。

# oracle - Oracle pl-sql 转义字符（用于“'”）

> ID：11717159
> 
> 赞同：38
> 
> 时间：2012-07-30T07:37:13.997
> 
> 标签：oracle, escaping, oracle11g

当我尝试`INSERT`在 oracle 中执行语句时，出现`SQL Error: ORA-00917: missing comma`错误，因为`Alex's Tea Factory`我的`INSERT`语句中有一个值。

我怎么能逃脱`'`？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-30T07:39:17.063

为了逃避它，双引号：

```
INSERT INTO TABLE_A VALUES ( 'Alex''s Tea Factory' ); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-30T07:39:03.290

在 SQL 中，您通过另一个引号转义一个引号：

```
SELECT 'Alex''s Tea Factory' FROM DUAL 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-30T09:05:09.440

您可以像下面给出的示例一样使用 ESCAPE

'_' 通配符用于匹配一个字符，而'%' 用于匹配零次或多次出现的任何字符。这些字符可以在 SQL 中转义。

```
SELECT name FROM emp WHERE id LIKE '%/_%' ESCAPE '/'; 
```

在 PL/SQL 中也是如此：

```
 if( id like '%/_%' ESCAPE '/' ) 
```

这仅适用于类似的模式，例如在插入中不需要转义 _ 或 %，它们无论如何都用作纯字符。在任意字符串中，只有 ' 需要被 '' 转义。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-09T02:24:14.497

而不是担心你声明中的每一个撇号。您可以轻松使用`q' Notation.`

例子

```
SELECT q'(Alex's Tea Factory)' FROM DUAL; 
```

此符号中的关键组件是

*   `q'`这表示符号的开始
*   `(`一个可选符号，表示要完全转义的语句的开始。
*   *亚历克斯的茶厂*（声明本身）
*   `)'`带有撇号的右括号表示符号的结束。

这样，您可以在符号中填充多少撇号，而不必担心其中的每一个撇号，它们都将被安全处理。

**重要的提示**

既然你使用了，`(`你必须用 关闭它`)'`，并记住它是可选的，例如，下面的代码将与前一个一样运行

```
SELECT q'[Alex's Tea Factory]' FROM DUAL; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-25T04:32:36.437

```
SELECT q'[Alex's Tea Factory]' FROM DUAL 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-30T11:16:02.260

您的问题意味着您正在通过将字符串连接在一起来构建 INSERT 语句。我建议这是一个糟糕的选择，因为如果字符串是从用户输入派生的，那么它会使您容易受到 SQL 注入攻击。更好的选择是使用参数标记并将值绑定到标记。如果您搜索，`Oracle parameter markers`您可能会找到一些关于您的特定实现技术的信息（例如 C# 和 ADO、Java 和 JDBC、Ruby 和 RubyDBI 等）。

分享和享受。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-08-27T05:27:38.320

这是一种在 oracle DB 中轻松转义 & char 的方法

```
set escape '\\' 
```

并在查询中写入

```
'ERRORS &\\\ PERFORMANCE'; 
```

# java - 如何在java中获取最长的键以匹配给定的字符串

> ID：11717166
> 
> 赞同：0
> 
> 时间：2012-07-30T07:37:38.373
> 
> 标签：java

我编写了一个代码来检查字符串是否在给定 Map 中有键，并将键替换为字符串中的值。下面是代码

```
 String s ="VamshiKrishnaA";
    Map<String,String> h = new HashMap<String,String>();
    h.put("Vamshi", "89");
    h.put("VamshiKrishnaA","dataDir");
    h.put("VamshiKrishna","dataDira");

    h.put("VamshiK", "krihsn");

    String key="";

    Iterator<String> i =h.keySet().iterator();
    while(i.hasNext()){
        key=i.next();
        if(s.contains(key)){
            s=s.replace(key, h.get(key));
        }
    }
    System.out.println(s); 
```

当我运行上面的代码时，我得到了 dataDiraA 的输出，但我需要输出为 dataDir。

我无法控制自动生成的键和值的顺序。

在这方面需要任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:49:03.697

您需要跟踪当前匹配键的长度，并且只使用最长的一个：

```
String matchedKey = null;

while (i.hasNext()) {
    key = i.next();
    if (s.contains(key) && (matchedKey == null || matchedKey.length() < key.length())) {
        matchedKey = key;
    }
}
if (matchedKey != null) {
    s = s.replace(matchedKey, h.get(matchedKey));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:44:37.883

你应该打电话`equals()`而不是`contains()`：

```
if(s.equals(key)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:48:47.870

如果有某种方法可以对键进行排序，例如按长度，您可能会查看 TreeMap，其中所有键都将使用提供的比较器进行排序。

另一方面，如果没有太多键并且您知道确切的顺序，您可能只使用 LinkedHashMap。这样，键将按照您放置它们的顺序进行迭代。像这样：

```
String s = "VamshiKrishnaA";
Map<String, String> h = new LinkedHashMap<String, String>();
h.put("VamshiKrishnaA", "dataDir");
h.put("VamshiKrishna", "dataDira");
h.put("VamshiK", "krihsn");
h.put("Vamshi", "89");

for (String key : h.keySet()) {
    if (s.contains(key)) {
        s = s.replace(key, h.get(key));
    }
}
System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:05:53.787

**`contains() checks for a sub string , where as equals() checks for whole string , and other difference is , contains() takes object of CharSequence class where as equals() takes Object as its parameter !`**

使用 equals() 方法 ::

```
 String s = "VamshiKrishnaA";
        Map<String, String> h = new HashMap<String, String>();
        h.put("Vamshi", "89");
        h.put("VamshiKrishnaA", "dataDir");
        h.put("VamshiKrishna", "dataDira");

        h.put("VamshiK", "krihsn");

        String key = "";

        Iterator<String> i = h.keySet().iterator();
        while (i.hasNext()) {
            key = i.next();
            if (s.equals(key)) {
                //s = s.replace(key, h.get(key));
                System.out.println(h.get(key));
            }

        } 
```

# c# - serialprot readline() 添加问号“？”

> ID：11717168
> 
> 赞同：2
> 
> 时间：2012-07-30T07:37:45.753
> 
> 标签：c#, serial-port, readline

我想通过 readline() 从串行端口文本行读取
文本是 ASCII 并且在终端中一切正常（数据非常好），但是当我通过 readline 读取时，它会返回文本中的某个位置？示例 - 这是常规的：

```
!!!;34;248;45;215;43;226;33;235;32;240;35;250;36;240;37;246;40;263;41;272;42;261;39;270;44;256;47;241;49;8888;50;8888;38;245;46;460;48;363 
```

这将返回 readline() ：

```
!!!;34;248;45;215;43;226;?33;235;32;240;35;250;36;240?;37;246;40;263;41;272;42;261?;39;270;44;256;47;241;49;888?8;50;8888;38;245;46;460;48;3?63 
```

代码很简单：

```
this.serialPort1.PortName = "COM3";    
this.serialPort1.BaudRate = 19200;                     
this.serialPort1.Parity = System.IO.Ports.Parity.Mark; 
this.serialPort1.Open();

private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    prectenyRadek=this.serialPort1.ReadLine();
    this.Invoke(new EventHandler(DisplayText));
}

private void DisplayText(object sender, EventArgs e)
{
    richTextBox1.AppendText(prectenyRadek);    
} 
```

有没有人知道，什么以及为什么加我“？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:59:20.223

问题是平价。当我将奇偶校验从 Mark 切换到 Space 时，它​​开始正常工作。（我的行之间的数据是奇偶校验标记，但这条线没有某处 9 位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:42:38.540

“如果秤发送二进制数据，则编码属性很重要。默认值为 ASCII，因此如果二进制数据中的字节 >= 128，则会生成很多问号。在这种情况下，您应该使用 Read() 而不是 ReadLine( ). 你想用哪个来开始解决这个问题，你想查看原始字节值，从问号看不到太多。特别注意你从 a 得到的最后一两个字节阅读，他们应该很好地重复。”

来源：[SerialPort.ReadLine() 返回垃圾](https://stackoverflow.com/questions/10653211/serialport-readline-returns-garbage)

# c# - JavaScript 生成的网页问题

> ID：11717171
> 
> 赞同：0
> 
> 时间：2012-07-30T07:37:56.343
> 
> 标签：c#, javascript, css, webbrowser-control

我对 javascript 生成的网页有疑问。我在互联网上有一个由 javascript 生成的网页。我正在使用 wpf Web 浏览器控件更改网页。我必须通过插入 jquery、更改 css 和隐藏一些元素来对网页进行一些更改。

这是问题所在。

应用程序大部分时间都可以正常工作，但有时，由于未知原因，它不会更改 css 或隐藏元素。我认为它与实际生成页面的 javascript 有关。我的代码已执行，但未进行任何更改，因此我假设脚本在执行我的脚本时无法找到页面中的元素，因为它们不存在于页面中。这只是一个假设。

我需要帮助解决这个问题。我尝试将脚本的执行延迟 n 秒，等待 body.ready、document.ready 和 window.ready，但没有任何帮助。另外，我使用 wpf Web 浏览器的 LoadCompleted 事件，但是...有时，脚本对页面没有任何影响。有人遇到这个问题吗，有人知道如何解决吗？

非常感谢您提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:27:34.230

在构建单页应用程序时，请始终使用[Backbone](http://backbonejs.org/)或[Sammy.js 之](http://sammyjs.org/)类的框架以及 Mustachejs（或 Hogan.js）进行模板化。

由于我们没有任何代码可供查看，如果您使用的是 jQuery，我建议您检查`.live()`并将`.on()`事件处理程序附加到您计划加载到 div 中的元素（使它们可点击）等。

# r - 在 R 中的包“blotter”中使用 initPortf 后如何删除投资组合

> ID：11717177
> 
> 赞同：4
> 
> 时间：2012-07-30T07:38:22.510
> 
> 标签：r, package, portfolio

在R中使用函数`initPortf`初始化package中的portfolio时`blotter`，我们可以初始化一个portfolio，例如：

```
currency("USD")
stock("SPY",currency="USD",multiplier=1)
b.strategy <- "bFaber"
initPortf(b.strategy,'SPY', initDate='1997-12-31') 
```

但是当我们要再次初始化投资组合时，必须先删除投资组合b.strategy：

```
initPortf(b.strategy, "SPY", initDate = "1997-12-31") : 
Portfolio bFaber already exists, use updatePortf() or addPortfInstr() to update it. 
```

这里`rm()`不能使用，当我需要删除它时，我必须清除所有工作区。有什么功能可以删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:18:38.310

所有 quantstrat 演示脚本都执行以下操作：

```
suppressWarnings(rm("account.bFaber","portfolio.bFaber",pos=.blotter))
suppressWarnings(rm("order_book.bFaber",pos=.strategy)) 
```

# matlab - 如何在同一个图上绘制 2 个图形，以便我可以比较它们

> ID：11717178
> 
> 赞同：0
> 
> 时间：2012-07-30T07:38:27.017
> 
> 标签：matlab, plot

我有两张财务图表，我需要分析它们的表现如何相互比较。我写了这样的程序：

```
clear

fLog = fopen('log.log');
data = textscan(fLog, '%f:%f:%f:%f %f %f %f');
fclose(fLog);

% hh:min:sec:millisec
secvec = [60*60 60 1 1e-3];
x = [data{1:4}] * secvec';

y = data{5};
yPrice = data{6};

xindays = x / (24*60*60);

plot(xindays, y);
hold on
plot(xindays, yPrice);

ticklabelformat(gca,'y','%g')
ticklabelformat(gca,'x',{@tick2datestr,'x','HH:MM:SS'}) 
```

[log.log](https://dl.dropbox.com/u/49126809/stackoverflow/log.LOG)文件示例

问题在于，由于两个图形具有完全不同的“Y”值，它们看起来都像“直线”。所以我需要以某种方式有两个 Y 轴，可能一个在左边，一个在右边，但它们应该具有相同的比例，这意味着两个图形上 1% 的变化应该是相同的，所以我应该能够比较哪些股票表现更好和在哪里。如果可以做到这一点以及如何做到这一点？

我也想用不同的颜色来绘制这个图形，但是一旦上述问题得到解决，我可能可以自己谷歌自己如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:49:15.530

您正在寻找[plotyy](http://www.mathworks.nl/help/techdoc/ref/plotyy.html)。因为您还更改了 xticks，所以我建议从两个结果轴之一中删除 xticks，否则它们会重叠：

```
[AX,H1,H2] = plotyy(xindays,y,xindays,yPrice);
set(AX(1),'xtick',[])

ticklabelformat(AX(2),'y','%g')
ticklabelformat(AX(2),'x',{@tick2datestr,'x','HH:MM:SS'}) 
```

这为您提供了下图：

![在此处输入图像描述](../Images/6b0b16e124d0a13a7cbcba68e2e134a3.png)

## 编辑：

如您所见，plotyy 只是确保所有数据都在可见窗口中。所以y轴比例不相等。如果你真的想要这样，你可以在使用 plotyy 之后改变它。例如：

```
[AX,H1,H2] = plotyy(xindays,y,xindays,yPrice);
set(AX(1),'xtick',[]);

ylim(AX(1),[<lower bound>   <upper bound>]);
ylim(AX(2),[<lower bound>   <upper bound>]);

ticklabelformat(AX(2),'y','%g')
ticklabelformat(AX(2),'x',{@tick2datestr,'x','HH:MM:SS'}) 
```

理想的可见范围取决于数据本身的范围，因此您必须自己解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:07:20.560

如果它只是为了超越，试试这个：假设值在向量 x 和 y 中，得到相对变化： x_rel=x/mean(x) y_rel=x/mean(y)

现在 1% 的变化（与平均值相比）将在图表中显示完全相同的变化。

# nutch - 如何在爬行时制作 Apache Nutch 索引

> ID：11717179
> 
> 赞同：2
> 
> 时间：2012-07-30T07:38:32.023
> 
> 标签：nutch

我开始使用 Apache Nutch (v1.5.1) 来索引某个特定域下的所有网站。我的域中有大量网站（以百万计），我需要逐步索引它们，而不是等待整个过程结束。

我在 nutch wiki（这里[http://wiki.apache.org/nutch/NutchTutorial/#A3.2_Using_Individual_Commands_for_Whole-Web_Crawling](http://wiki.apache.org/nutch/NutchTutorial/#A3.2_Using_Individual_Commands_for_Whole-Web_Crawling)）中发现了这个应该起作用的东西。这个想法是让脚本在一定数量的数据（例如 1000 URL）上循环调用我的过程的每一步（抓取、获取、解析……）。

```
bin/nutch inject crawl/crawldb crawl/seed.txt

bin/nutch generate crawl/crawldb crawl/segments -topN 25
s1=`ls -d crawl/segments/2* | tail -1`
echo $s1

bin/nutch fetch $s1
bin/nutch parse $s1
bin/nutch updatedb crawl/crawldb $s1

bin/nutch generate crawl/crawldb crawl/segments -topN 25
s2=`ls -d crawl/segments/2* | tail -1`
echo $s2

bin/nutch fetch $s2
bin/nutch parse $s2
bin/nutch updatedb crawl/crawldb $s2

...

bin/nutch invertlinks crawl/linkdb -dir crawl/segments
bin/nutch index crawl/indexes crawl/crawldb crawl/linkdb crawl/segments/* 
```

我的问题是：有没有办法直接在 Nutch 中指定这个设置，让他以一种平行且更透明的方式来做这些事情？例如在分开的线程上？

感谢您的回答。

**更新**

我试图创建脚本（代码在上面），但不幸的是，我在反向链接阶段出现错误。这是输出：

```
LinkDb: starting at 2012-07-30 11:04:58
LinkDb: linkdb: crawl/linkdb
LinkDb: URL normalize: true
LinkDb: URL filter: true
LinkDb: internal links will be ignored.
LinkDb: adding segment: file:/home/apache-nutch-1.5-bin/crawl/segments/20120730102927
LinkDb: adding segment: file:/home/apache-nutch-1.5-bin/crawl/segments/20120704094625
...
LinkDb: adding segment: file:/home/apache-nutch-1.5-bin/crawl/segments/20120704095730

LinkDb: org.apache.hadoop.mapred.InvalidInputException: Input path does not exist:
file:/home/apache-nutch-1.5-bin/crawl/segments/20120730102927/parse_data

Input path does not exist:
file:/home/apache-nutch-1.5-bin/crawl/segments/20120704094625/parse_data
... 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:52:36.377

（如果我有足够的代表，我会将其发布为评论）。

请记住，-depth 开关指的是每次抓取，而不是它将抓取的站点的整体深度。这意味着 depth=1 的第二次运行将从已经索引的数据下降一个更高的级别，并在 topN 文档处停止。

因此，如果您不急于完全填充数据，我在类似情况下通过执行大量重复的浅*nutch crawl*语句（使用 smallish -depth (3-5) 和-topN (100-200) 个变量）来自大型种子列表。这将确保每批中只有 (depth * topN) 页面被编入索引，并且索引将在几分钟内开始提供 URL。

然后，我通常将抓取设置为每（1.5* 初始抓取时间平均值）秒触发一次，然后让它抓取。可以理解，每次爬取只有 1,000 个文档，通过大型基础设施可能需要大量时间，并且（在索引、暂停时间和其他开销之后）该方法可以成倍地爬取整个堆栈的时间。

最初几次通过基础设施，这是一个非常糟糕的过程。然而，随着自适应抓取算法开始发挥作用，并且重新抓取时间开始接近合理值：包裹开始真正交付。

（这有点类似于您在 nutch wiki 中提到的“[全网爬取](http://wiki.apache.org/nutch/NutchTutorial "全网爬行")”方法，它建议您将数据分成 1,000 个页面段，但对于初学者来说更简洁易懂。）

# android - 从 Intent 中检索 Extras 时出现奇怪的 NPE

> ID：11717181
> 
> 赞同：0
> 
> 时间：2012-07-30T07:38:39.277
> 
> 标签：android, android-intent, nullpointerexception, bundle

当我开始我的 CalendarPopUp 活动时，我得到一个`NullPointerException`.

这是我的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setUpWindow();
    Intent intent = getIntent();
    Bundle extras = intent.getExtras(); // This is Line 37
    boolean isForResult = extras.containsKey("result");
            //...
} 
```

这是例外

```
07-30 09:33:47.269: E/AndroidRuntime(19979): FATAL EXCEPTION: main
07-30 09:33:47.269: E/AndroidRuntime(19979): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.moveinblue.planner/com.moveinblue.planner.utils.popup.CalendarPopup}: java.lang.NullPointerException
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.os.Looper.loop(Looper.java:137)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread.main(ActivityThread.java:4575)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at java.lang.reflect.Method.invokeNative(Native Method)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at java.lang.reflect.Method.invoke(Method.java:511)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at dalvik.system.NativeStart.main(Native Method)
07-30 09:33:47.269: E/AndroidRuntime(19979): Caused by: java.lang.NullPointerException
07-30 09:33:47.269: E/AndroidRuntime(19979):    at com.moveinblue.planner.utils.popup.CalendarPopup.onCreate(CalendarPopup.java:37)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.Activity.performCreate(Activity.java:4465)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-30 09:33:47.269: E/AndroidRuntime(19979):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
07-30 09:33:47.269: E/AndroidRuntime(19979):    ... 11 more 
```

有人可以在这里帮助我吗？

调试后我知道意图的 mExtras 对象为空（意图实际上不为空，但它的大部分内部对象都是）。当然调用的`getExtras()`时候返回null，调用`containsKey()`的时候会抛出一个`NullPointerException`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:47:45.773

`getExtras()`如果没有向意图（[文档](http://developer.android.com/reference/android/content/Intent.html#getExtras%28%29)）添加额外内容，则该方法返回 null。尝试`extra`先将其添加到意图中，然后启动`CalendarPopUpActivity`，然后`Bundle`从`Intent`.

## 编辑：

如果您并不总是需要额外的，请先像这样检查

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setUpWindow();
    Intent intent = getIntent();
    Bundle extras = intent.getExtras(); // This is Line 37
    if (extras != null) {
        boolean isForResult = extras.containsKey("result");
        //...
    }
} 
```

这样，您将能够检测到意图中是否有额外内容，并且您可以从`NullPointerException`

# php - 为什么这个 PHP 代码给出“未定义的索引”？

> ID：11717184
> 
> 赞同：0
> 
> 时间：2012-07-30T07:38:46.690
> 
> 标签：php, drupal, drupal-7

我有这个代码：

```
print_r(array_keys($variables));
if (array_key_exists('form', $variables)) {
 print "YES!";
}
$imgs = $variables['form']['field_images']; 
```

它是我用来在 Drupal 中为表单页面设置主题的代码的一部分。YES 被打印出来，但是，drupal 报告未定义的索引。感谢您的慷慨帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:41:43.930

`$variables['form']`确实存在，但`$variables['form']['field_images]`可能不存在。这就是为什么您会收到有关 的通知`undefined index`。

因此，在调用它之前，您应该确保该子项也存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:14:36.390

尝试这个：-

PHP抛出通知。您可以添加 isset() 或 !empty() 检查以避免错误，如下所示：

```
if(isset($variables)) ) && !empty($variables)) ))
{

    if (array_key_exists('form', $variables)) {
     print "YES!";
    }
    $imgs = $variables['form']['field_images'];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:43:52.673

作为[Ikke](https://stackoverflow.com/a/11717228/4833)的答案的示例实现：

```
if ( !array_key_exists('form', $variables) ) {
    echo 'missing parameter form';
}
else if ( !array_key_exists('field_images', $variables['form']) ) {
        echo 'missing parameter field_images';
}
else {
    $imgs = $variables['form']['field_images'];     
} 
```

# java - 发送有关内部服务器错误的电子邮件

> ID：11717191
> 
> 赞同：0
> 
> 时间：2012-07-30T07:39:06.130
> 
> 标签：java, jsf, jboss, error-handling

你好，我在网上搜索了，但我没有找到解决我的问题的方法，

我有一个`Jboss AS6 server`并`JSF Application`在上面运行。

应用程序*有问题*，有时会出现“ `http 500, internal server errors`”

**现在我的问题：** 1）是否可以在到达时
重定向到*自定义页面*`http 500`？

2）是否可以发送`email`带有*错误堆栈跟踪的信息*？
（我完全不知道该怎么做，错误的堆栈跟踪显示在客户端`webbrowser`，但这正是我不想要的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:10:15.563

1) 代码 500 表示“内部错误”=> 发生异常。您可以像这样在 web.xml 中定义一个全局错误页面

```
<error-page> 
    <exception-type>java.lang.Throwable</exception-type> 
    <location>/generalError.jsp</location> 
</error-page> 
```

其中generalError.jsp 是您的错误页面。

2) 有两个选项 - 在 JSP 中包含通过 JavaMail API 发送电子邮件的代码（示例可在[此处](http://www.tutorialspoint.com/jsp/jsp_sending_email.htm)找到）或为 log4j 创建 SMTP 附加程序（示例可在[此处](https://community.jboss.org/thread/161516)找到），但是您必须使用 JBoss 至少 6.1 .0 因为在以前的 6.xx 版本的 JBoss AS 中有一个[错误。](https://issues.jboss.org/browse/JBAS-8791)

# objective-c - exc 错误访问代码 2

> ID：11717193
> 
> 赞同：10
> 
> 时间：2012-07-30T07:39:13.087
> 
> 标签：objective-c, ios, uiviewcontroller, uitableview, ipad-2

在过去的 3 天里，我一直在努力解决这个错误，但没有运气。我正在开发一个组合应用程序，`uiviewcontrollers`并`uitableviewcontrollers`在表格视图中单击添加按钮，它崩溃了。（尚未添加核心数据编码）。我什至启用了`NSzombies`并且`Guard Malloc`以下崩溃点在这些代码上。请帮忙，因为我需要尝试追逐截止日期，并且我不想在项目中使用 gremlin 进一步开发。

```
0x0 进入
0x93e3bef3 测试
0x93e3570c 移动
0x1f1b124 测试
0x1f18eb1 移动
0x8fecf203 添加
0x8feced68 移动
0x8fecc2c8 移动
0x8fecc25e 移动
0x8fecc25e 移动
0x8fecc25e 移动
0x8fecc25e 移动
0x8fecd268 移动
0x8fec1664 添加
0x8fec5f99 跳转
0x8febf2ef 添加

```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-30T08:41:08.377

使用 Instruments 中的“Zombie”工具。

打开菜单产品 > 配置文件。Xcode 打开仪器，您可以在其中选择一个工具。选择僵尸。该应用程序将在模拟器中打开，然后重新创建 EXC_BAD_ACCESS 错误。Instruments 将向您显示哪个变量以及在哪个函数上引发了此错误。

# iphone - ios 6 发布后，iphone 5.1 部署目标是否会覆盖所有 iphone？

> ID：11717197
> 
> 赞同：1
> 
> 时间：2012-07-30T07:39:19.963
> 
> 标签：iphone, ios

我是 iphone 应用程序开发的新手，想知道要使用哪个部署目标（作为 ios 6 方法）。我的应用程序很简单（http 网络服务交互、地图），我的自然倾向是针对 3.1 以最大限度地利用潜在用途。但是，我知道 ios 6 很快就会适用于所有 iphone，并且我认为它会被广泛采用。

那么，如果我今天以 5.1 为目标，那么一旦 ios 6 发布，我的应用程序是否可供大多数（如果不是全部）iphone 用户使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:08:37.730

现在，在我看来，要求至少 5.1 有点大胆，但这取决于你的应用程序。习惯上支持当前版本和以前的主要版本。

如果你想扩大你的目标，你可以考虑回到 4.3 甚至一路降到 4.0。但是 3.x 实际上已经过时了。但：

**警告：**不要针对无法在设备上测试的版本。如果您没有运行 4.0 的设备，则不建议仅在 4.0 模拟器上测试您的应用程序（尽管*可能*没问题。不能保证）。

iPhone 3G 可以运行到 iOS 4.2。

所有其他手机和 iPad 都可以运行最新的操作系统 (5.1.1)

不确定 iPod Touch 设备，但第 3 代（和第 4 代）。应该运行 iOS 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:44:01.660

如果 5.1.1 可用于您的菜单，则您可以将其用作部署目标。如果不是，则 5.1 目前最适合您的需求。

这样所有人（尚未更新到 IOS 6 的人）都可以使用您的应用程序...

祝应用程序开发好运。

# ruby-on-rails - 无法从我的数据库中获取用户，nil 的未定义方法“每个”：NilClass“rails 教程”

> ID：11717203
> 
> 赞同：3
> 
> 时间：2012-07-30T07:39:38.390
> 
> 标签：ruby-on-rails, sqlite

我遵循 Michael Hartl 的 RoR 教程，我在第 9.3 章“显示所有用户”到目前为止一切都很好，但现在我在尝试从 SQlite 数据库检索我的用户时为 nil:NilClass 获得了一个未定义的方法“每个”。这是我的控制器

```
class UsersController < ApplicationController

before_filter :signed_in_user, only: [:index, :edit, :update]
before_filter :correct_user,   only: [:edit, :update]

.
.
.

def index
@users = User.all
end
end

    and my index.html.erb

<ul class="users">

<% @users.each do |user| %>
<li>
<%= gravatar_for user, size: 52 %>
<%= link_to user.name, user %>
</li>
<% end %>
</ul> 
```

使用此代码，我得到 nil:NilClass 的错误未定义方法“每个”

当我将其更改为

```
<ul class="users">
<% if @users %>
<% @users.each do |user| %>
<li>
<%= gravatar_for user, size: 52 %>
<%= link_to user.name, user %>
</li>
<% end %>
<% end %>
</ul> 
```

尽管我的数据库中有用户，但我可以渲染视图但显示 0 个用户。我手动创建了一些，还使用了“faker”gem 来生成一些。在 Rails 控制台中键入 User.all 会返回一个包含 100 个用户的数组。我似乎无法在这里找到缺失的链接。我还使用 SQlite 数据库浏览器应用程序来检查我的用户模型，其中我也有 100 个用户。我已经为此做了很多工作，但似乎无法弄清楚。

这也是我的 User.rb

```
class User < ActiveRecord::Base
attr_accessible :name, :email, :password, :password_confirmation
has_secure_password

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

validates :name, presence: true, length: { maximum: 50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence:   true,
format:     { with: VALID_EMAIL_REGEX },
uniqueness: { case_sensitive: false }
validates :password, presence: true, length: { minimum: 6 }
validates :password_confirmation, presence: true

private

def create_remember_token
self.remember_token = SecureRandom.urlsafe_base64
end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:11:44.377

奇怪的`User.all`是返回`nil`而不是空数组`[]`。尝试以下操作：

1.  确保您已运行任何待处理的迁移

    ```
    rake db:migrate 
    ```

2.  如果上一步没有运行任何迁移，请尝试擦除数据库并重新开始，只是为了更好地衡量：

    ```
    rake db:drop
    rake db:create db:migrate db:seed 
    ```

3.  进入 Rails 控制台，并确保`User.all`行为正确

    ```
    rails c
    >> User.all
      User Load (0.4ms)  SELECT "users".* FROM "users" 
    => []
    >> exit 
    ```

4.  If this all works, try putting some debug statements into your controller (using pry or the ruby debugger is optimal, but even some `puts` statements will suffice here) to examine the value of `@users`

5.  Next, you'll want to either add some seeds to the database (edit db/seeds.rb and run `rake db:seed`) or use scaffolded forms to add some users.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:30:59.243

another really helpful debugging tool is the pry gem. you can find it on github.

it will stop program execution at the point in your code where you put the command:

binding.pry

and allow you to have a rails consol- access variables, call methods... whatever.

it's a great handy tool for debugging.

# python - 使用 hdf5 中的 numpy.savetxt 格式化？

> ID：11717205
> 
> 赞同：0
> 
> 时间：2012-07-30T07:39:57.940
> 
> 标签：python, numpy, formatting, hdf5

```
import numpy
import tables

file = tables.openFile( "....hdf5","r")
lon = numpy.array(file.root.lon)
lon.ravel()
lat = numpy.array(file.root.lat)
lat.ravel()
data = numpy.array(file.root.data)

v0= data.shape[0]
v1= data.shape[1]
v2= data.shape[2]
wind_spectrum_flat = data.reshape((v0, v1*v2))

interval_spectrum = numarray.arange(30) + 0.5
speed_mean = numarray.dot(interval_spectrum, wind_spectrum_flat)/days/24.
value = numarray.reshape(speed_mean, (v1, v2) )
value.ravel() 
```

打印 lat.shape,lon.shape,value.shape

(480,640) (480,640) (307200,)

```
output = numpy.column_stack((lon,lat,value)) 
```

输出如下：

```
1.131087052608466621e+02   2.245298999778770010e+01   3.922619047619047450e+001.131096961042312046e+02   2.245299666446372910e+01 
```

如何格式化它们以在每行中获取三个数字（非科学）列？IE：

```
11310870  224529 3.922
11310969  224529 4.512
11320485  223643 5.332
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:51:54.183

您可以像这样使用 savetxt fmt 关键字：

```
numpy.savetxt(out_name,output, fmt="%u %u %.3f") 
```

这样，您将输出 2 个整数和一个浮点数，点前有 3 个数字。

为确保您的每个向量具有正确的向量形状（一维数组），您可以在代码中替换：

```
x = x.flat 
```

经过 ：

```
x.ravel() 
```

其中 x 可以是您的 lon、lat 和数据向量。

# google-maps - google maps和jquery google maps api之间的位置差异

> ID：11717206
> 
> 赞同：0
> 
> 时间：2012-07-30T07:40:00.557
> 
> 标签：google-maps, google-maps-api-3, jquery-ui-map

[为什么使用jquery mobile maps api](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map)与[google maps](https://maps.google.co.in/)相比位置存在差异。

这是显示差异的图像

*谷歌地图*中的位置

 *![在此处输入图像描述](../Images/1f7b433735fdfd714f2b2fe667616daf.png)

使用*[jquery ui maps api时的位置](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map)*

![在此处输入图像描述](../Images/ddcb8e67b5f8a23086d0f36c87fe691c.png)

这是我正在测试的经纬度

+39° 44' 41.22", -104° 49' 54.15"

+39° 44' 39.28", -104° 50' 5.86"

还有其他经纬度让我有所不同。

我正在使用的 JS 库 - [http://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry](http://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry)

[演示代码](https://gist.github.com/3205645)

如何解决这个问题？

指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:24:16.453

API 在表示坐标的地理编码字符串方面存在问题，我认为这是因为涉及到反向地理编码器。由于您有坐标，您可以使用它们直接创建`LatLng`对象，这似乎有效。

```
{ 'origin': new google.maps.LatLng(39.744783, -104.831709), 
  'destination': new google.maps.LatLng(39.744244, -104.834960), 
  'travelMode': google.maps.DirectionsTravelMode.WALKING } 
```

使用这些坐标比谷歌地图更接近指定的目的地，但是（因为它更接近）它使用不同的路线到达那里。

[http://jsfiddle.net/zqtJJ/](http://jsfiddle.net/zqtJJ/)

如果您想要使用 E 17th Place 到达该建筑物的路线，您需要将目的地指定为比人行道更靠近街道。*

# iphone - 有什么办法可以在IOS中传递消息吗？

> ID：11717207
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:40:09.510
> 
> 标签：iphone, objective-c, ios, xcode

我是 IOS 新手，我在 Windows 上工作，我们有一个概念消息传递，使用它我们可以将任何消息发送到任何实例并完成工作。同样在IOS中有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:30:18.413

Feroz，Objective - C 默认支持消息传递，即当你做这样的事情时

```
[self calculateSum]; 
```

在这里，您将消息传递`calculateSum`给`self`.

然后objective-c运行时调用方法`calculateSum`。`self`进一步你可以阅读[这个](http://en.wikipedia.org/wiki/Objective-C#Messages)和[这个](http://it.toolbox.com/blogs/macsploitation/bypassing-objectivecs-message-passing-mechanism-for-speed-24946)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:13:55.417

在 Cocoa 中有一个概念可以让你监听和发送通知 - `NSNotification`. 方法（选择器）可以注册它对某些消息的兴趣，并在代码的某些部分发送该消息时被触发。

[通知编程主题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)

发送和接收通知也类似于 Key-Value Observing，您可以在其中注册属性值的更改。

[KeyValueObserving.html](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

*...也许这就是您正在寻找的*

# sql - Select 命令中的 SqlDateTime 溢出异常

> ID：11717209
> 
> 赞同：3
> 
> 时间：2012-07-30T07:40:24.003
> 
> 标签：sql, sql-server-2008, exception, stored-procedures

我使用存储过程来获取分页列表，这是我的方法：

```
using(SqlConnection conn = new SqlConnection(_connectionString)) {
   using(SqlCommand cmd = new SqlCommand("[GetPagedSP]", conn)) {
      cmd.CommandType = System.Data.CommandType.StoredProcedure;

       //Passing Parameters 
       **Update**
       SqlParameter spCreationDate = new SqlParameter("@CreationDate_9", CreationDate);
       spCreationDate.IsNullable = true;
       cmd.Parameters.Add(spCreationDate);

       // ........
       //Finished Passing Parameters
       conn.Open();

       SqlDataReader dr = cmd.ExecuteReader();

       while(dr.Read()) {
          //Get Values
       }
       conn.Close();
   }
} 
```

这是我的存储过程命令：

```
CREATE TABLE #PagingTemp  (
[RowId]           [bigint]    IDENTITY(1,1)    NOT NULL,
[RecordId]        [bigint]  
);

INSERT INTO [#PagingTemp] ([RecordId])
SELECT  [CAR].[Id]      
FROM [Article] AS [CAR] ;

SELECT [CAR].*
FROM [Collections].[Article] AS [CAR]
INNER JOIN [#PagingTemp] AS [PT] ON [CAR].[Id] = [PT].[RecordId]
WHERE [PT].[RowId] BETWEEN 1 AND 50; 
```

当我在 SQL 中运行查询时，一切都很好，但在 .NET 中，我在这一行有一个例外：

`SqlDataReader dr = cmd.ExecuteReader();`

例外是：

> System.Data.SqlTypes.SqlTypeException 未被用户代码
> Message=SqlDateTime 溢出处理。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。
> 源=系统.数据

**更新**

在 SQL 中运行 Query 的示例： ![在此处输入图像描述](../Images/68a19c5673e23f9e3d65a8e893922737.png)

太奇怪了，不明白怎么回事？

我没有任何`datetime`大于`12/31/9999`或小于的值`1/1/1753`

我在数据库中只有一些具有空值的可空日期时间值。

你怎么看？问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:03:55.637

如果可能，请在此处粘贴 SP，建议修复。目前，您可以考虑以下可能性来尝试修复它：

如果 select 导致问题，请考虑将 NULL date 替换为 min date，如下所示：

```
SELECT IsNULL(CreationDate,'1/1/1753') CreationDate, IsNULL(LastBidDate,'1/1/1753') LastBidDate from yourtable. 
```

作为参考，这是另一个已回答的问题： [error-sqldatetime-overflow-must-be between-1-1-1753-120000-am-and-12-31-999](https://stackoverflow.com/questions/468045/error-sqldatetime-overflow-must-be-between-1-1-1753-120000-am-and-12-31-999)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:26:30.020

在将任何有效日期传递给变量 CreationDate 以执行存储过程之前

```
 //Passing Parameters 

   CreationDate = DateTime.Now or any other date you want if you dont want to pass any date then assign DBNull.Value

   **Update**
   SqlParameter spCreationDate = new SqlParameter("@CreationDate_9", CreationDate);
   spCreationDate.IsNullable = true;
   cmd.Parameters.Add(spCreationDate); 
```

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:28:29.363

正如 在选择命令中的注释中提到的，当您传递`Gavin`类型参数时需要检查参数值是否在正确的范围内（）？我传递了一个参数，我认为它的值是null，在这种情况下我从来没有在查询中使用这个参数，所以null值是正确的并且在命令中使用参数并不重要，当我再次检查时我发现参数的值不是 null 并且是. 另一种解决方案是使用支持.Net 支持的所有范围的类型。`Nikola Markovinović``DateTime``1/1/1753 to 12/31/9999``Nullable DateTime``1/1/0001``DATATIME2``SQL``DateTime`

# php - 在 powermail 2.0 中出现以下错误，我在配置中缺少什么？

> ID：11717213
> 
> 赞同：0
> 
> 时间：2012-07-30T07:40:34.517
> 
> 标签：php, email, typo3

> **可能重复：**
> [TYPO3 中的 Powermail 2.0](https://stackoverflow.com/questions/11566021/powermail-2-0-in-typo3)

```
The default controller can not be determined. Please check for Tx_Extbase_Utility_Extension::configurePlugin() in your ext_localconf.php. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:36:06.557

在那边打开 CheckBe.html 文件

```
<f:form action="checkBe" controller="List"> is defined 
```

将此代码替换为

```
<f:form action="checkBe" controller="Module"> 
```

这是因为 powermail 扩展程序中没有内置列表操作。

# ios - UIButton图片+文字IOS

> ID：11717219
> 
> 赞同：148
> 
> 时间：2012-07-30T07:41:06.317
> 
> 标签：ios, iphone, ipad, uibutton

我需要一个`UIButton`带有**图像和文字**的。图片应该在顶部，文字在图片下方，两者都应该是可点击的。

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2012-08-07T13:45:51.620

我看到非常复杂的答案，所有这些都使用代码。但是，**如果您使用的是 Interface Builder**，则有一种非常简单的方法可以做到这一点：

1.  选择按钮并设置标题和图像。请注意，如果您设置背景而不是图像，则如果图像小于按钮，则图像将被调整大小。![IB基本图片和标题](../Images/358666af5b9e55b2d3186a947fd2c810.png)
2.  通过更改边缘和插图来设置这两个项目的位置。您甚至可以在“控制”部分控制两者的对齐方式。

![IB仓位设置](../Images/a76a48bf70df8d3d275562020278d4cf.png) ![IB 控制组](../Images/e2cb8a7dd57fcb7102d066cb07a0a50a.png)

您甚至可以通过代码使用相同的方法，而无需像其他建议的解决方案那样在内部创建 UILabels 和 UIImages。始终保持简单！

编辑：附上一个小例子，其中包含正确的插图（标题、图像和背景）设置了 3 个内容 ![按钮预览](../Images/5457c3cf8ea828a654a5c449d88b3c2e.png)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-08-03T09:17:31.353

我认为**您正在为您的问题寻找此解决方案**：

```
UIButton *_button = [UIButton buttonWithType:UIButtonTypeCustom];
[_button setFrame:CGRectMake(0.f, 0.f, 128.f, 128.f)]; // SET the values for your wishes
[_button setCenter:CGPointMake(128.f, 128.f)]; // SET the values for your wishes
[_button setClipsToBounds:false];
[_button setBackgroundImage:[UIImage imageNamed:@"jquery-mobile-icon.png"] forState:UIControlStateNormal]; // SET the image name for your wishes
[_button setTitle:@"Button" forState:UIControlStateNormal];
[_button.titleLabel setFont:[UIFont systemFontOfSize:24.f]];
[_button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; // SET the colour for your wishes
[_button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted]; // SET the colour for your wishes
[_button setTitleEdgeInsets:UIEdgeInsetsMake(0.f, 0.f, -110.f, 0.f)]; // SET the values for your wishes
[_button addTarget:self action:@selector(buttonTouchedUpInside:) forControlEvents:UIControlEventTouchUpInside]; // you can ADD the action to the button as well like 
```

...按钮的其余自定义现在是您的职责，并且不要忘记将按钮添加到您的视图中。

**更新 #1**和**更新 #2**

或者，**如果您不需要动态按钮**，您可以将按钮添加到*Interface Builder*中的视图中，您也可以在那里设置相同的值。它几乎相同，但在一张简单的图片中也是这个版本。

您还可以在*界面生成器*中看到屏幕截图中**的最终结果。**

 *![在此处输入图像描述](../Images/f9b660abac70f95a3faff43cce6efe7b.png)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2017-09-07T15:50:48.010

**Xcode-9**和**Xcode-10** Apple 现在对 Edge Inset 做了一些更改，您可以在 size-inspector 下进行更改。

请按照以下步骤操作：

**Step-1：** 输入文本并选择要显示的图像：

[![在此处输入图像描述](../Images/ecf4d7805b0fcb6d39c2a7971f0f4a41.png)](https://i.stack.imgur.com/ONPMf.png)

**步骤2：** 根据您的要求选择按钮控件，如下图所示：

[![在此处输入图像描述](../Images/8d100fbbb790c3325bf1827488d03ac5.png)](https://i.stack.imgur.com/RFoXU.png)

**第 3 步：** 现在转到尺寸检查员并根据您的要求增加价值：

[![在此处输入图像描述](../Images/6c33a9114c11ebe83e5468e79e3c4655.png)](https://i.stack.imgur.com/84H0j.png)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2020-07-20T07:09:33.383

快速版本：

```
var button = UIButton()

newGameButton.setTitle("Новая игра", for: .normal)
newGameButton.setImage(UIImage(named: "energi"), for: .normal)
newGameButton.backgroundColor = .blue
newGameButton.imageEdgeInsets.left = -50 
```

[![在此处输入图像描述](../Images/2d5f11963787da9aa6152a871282a89c.png)](https://i.stack.imgur.com/EOrIY.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-11-17T04:44:30.760

就我而言，我想添加`UIImage`到右侧和`UILabel`左侧。也许我可以通过编写代码来实现这一点（就像上面提到的那样），但我不喜欢编写代码并`storyboard`尽可能多地使用它来完成它。所以这是怎么做到的：

**首先，**在标签框中写下一些内容，然后选择要显示的图像：

[![在此处输入图像描述](../Images/a27a1ee115485e47805c5b74119d961b.png)](https://i.stack.imgur.com/Mkop1.png)

这将创建一个如下所示的按钮：

[![在此处输入图像描述](../Images/38adea212bae49b0dc0ded4ffafbec74.png)](https://i.stack.imgur.com/0SdyX.png)

**接下来，**查找`Semantic`并选择**Force Right-to-Left**（如果您不指定任何内容，则它将在左侧显示图像并在右侧显示标签，如上图）：

[![在此处输入图像描述](../Images/ca1aa45a744fa2dc5beec895a42d5f40.png)](https://i.stack.imgur.com/OBhsy.png)

**最后，**您会看到`UIImage`左右两侧`UILabel`：

[![在此处输入图像描述](../Images/8028fa3cf45f41b358d2fd3beb056704.png)](https://i.stack.imgur.com/PBkHe.png)

要在标签和图像之间添加空格，请转到**尺寸检查**器并根据您的要求更改这些值：

[![在此处输入图像描述](../Images/0bfd31c0644112f4f56d39f827ee131f.png)](https://i.stack.imgur.com/fyaWF.png)

**就是这样！**

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-30T08:10:34.367

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.imageView.image = [UIImage imageNamed:@"your image name here"];
button.titleLabel.text = @"your text here"; 
```

但以下代码将在上方显示标签并在背景中显示图像

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.background.image = [UIImage imageNamed:@"your image name here"];
button.titleLabel.text = @"your text here"; 
```

无需在同一控件中使用标签和按钮，因为 UIButton 具有 UILabel 和 UIimageview 属性。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-08-06T10:02:42.010

使用此代码：

```
UIButton *sampleButton = [UIButton buttonWithType:UIButtonTypeCustom];
[sampleButton setFrame:CGRectMake(0, 10, 200, 52)];
[sampleButton setTitle:@"Button Title" forState:UIControlStateNormal];
[sampleButton setFont:[UIFont boldSystemFontOfSize:20]];
[sampleButton setBackgroundImage:[[UIImage imageNamed:@"redButton.png"] 
stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal];
[sampleButton addTarget:self action:@selector(buttonPressed)
forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:sampleButton] 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-30T07:45:58.523

使用此代码：

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.imageView.frame=CGRectMake(0.0f, 0.0f, 50.0f, 44.0f);///You can replace it with your own dimensions.
    UILabel *label=[[UILabel alloc] initWithFrame:CGRectMake(0.0f, 35.0f, 50.0f, 44.0f)];///You can replace it with your own dimensions.
    [button addSubview:label]; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-07-30T07:55:55.810

制作`UIImageView`and `UILabel`，并将图像和文本设置为这两者......然后在 imageView 和 Label 上放置一个自定义按钮......

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"search.png"]];
    imageView.frame = CGRectMake(x, y, imageView.frame.size.width, imageView.frame.size.height);
    [self.view addSubview:imageView];

UILabel *yourLabel = [[UILabel alloc] initWithFrame:CGRectMake(x, y,a,b)];
yourLabel.text = @"raj";
[self.view addSubview:yourLabel];

UIButton * yourBtn=[UIButton buttonWithType:UIButtonTypeCustom];
[yourBtn setFrame:CGRectMake(x, y,c,d)];
[yourBtn addTarget:self action:@selector(@"Your Action") forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:yourBtn]; 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-08-09T11:32:34.113

我遇到了同样的问题，我通过创建一个新的子类`UIButton`并覆盖`layoutSubviews:`下面的方法来解决它：

```
-(void)layoutSubviews {
    [super layoutSubviews];

    // Center image
    CGPoint center = self.imageView.center;
    center.x = self.frame.size.width/2;
    center.y = self.imageView.frame.size.height/2;
    self.imageView.center = center;

    //Center text
    CGRect newFrame = [self titleLabel].frame;
    newFrame.origin.x = 0;
    newFrame.origin.y = self.imageView.frame.size.height + 5;
    newFrame.size.width = self.frame.size.width;

    self.titleLabel.frame = newFrame;
    self.titleLabel.textAlignment = UITextAlignmentCenter;

} 
```

我认为 Angel García Olloqui 的答案是另一个很好的解决方案，如果您使用界面构建器手动放置所有这些，但我会保留我的解决方案，因为我不必修改每个按钮的内容插图。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-08-03T11:18:47.827

您应该为图像创建自定义图像视图，为文本创建自定义标签，然后将其作为子视图添加到按钮中。就是这样。

```
UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeCustom];
yourButton.backgroundColor = [UIColor greenColor];
yourButton.frame = CGRectMake(140, 40, 175, 30);     
[yourButton addTarget:self action:@selector(yourButtonSelected:) forControlEvents:UIControlEventTouchUpInside]; 
[self.view addSubview:yourButton];

UIImageView *imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, yourButton.frame.size.width, yourButton.frame.size.height/2)];
imageView1.image =[UIImage imageNamed:@"images.jpg"];
[yourButton addSubview:imageView1];

UILabel *label=[[UILabel alloc] initWithFrame:CGRectMake(0, yourButton.frame.size.height/2, yourButton.frame.size.width, yourButton.frame.size.height/2)];
label.backgroundColor = [UIColor greenColor];
label.textAlignment= UITextAlignmentCenter;
label.text = @"ButtonTitle";
[yourButton addSubview:label]; 
```

用于测试目的，使用`yourButtonSelected:`方法

```
-(void)yourButtonSelected:(id)sender{
    NSLog(@"Your Button Selected");

} 
```

我想这会对你有所帮助。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-08-07T11:44:49.550

这真的很简单，只需将图像添加到按钮的背景，并为 uicontrolstatenormal 的按钮的标题标签提供文本。就是这样。

```
[btn setBackgroundImage:[UIImage imageNamed:@"img.png"] forState:UIControlStateNormal];
[btn setContentVerticalAlignment:UIControlContentVerticalAlignmentBottom];
[btn setTitle:@"Click Me" forState:UIControlStateNormal]; 
```*

# oracle - 如果没有数据，则不要创建空文件

> ID：11717223
> 
> 赞同：0
> 
> 时间：2012-07-30T07:41:12.883
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想检查是否没有来自 SQL 查询的数据，那么不应该创建文件。

这是我的代码：

```
CREATE OR REPLACE PROCEDURE VR_AD_INTEGRATION_EXPORT AS
    l_v_file UTL_FILE.file_type
BEGIN
 l_v_file := UTL_FILE.fopen('integration', 'HRMtoAD1_'||to_char(sysdate,'YYYYMMDD')||'_'||to_char(sysdate,'HH24MISS'), 'w', 32767);
FOR x IN (SELECT * FROM (SELECT 
           decode(pid, NULL, RPAD(' ',7,' '), RPAD(user_id, 7, ' '))|| '' ||
           decode(name_last, NULL, RPAD(' ',50,' '), RPAD(name_last, 50, ' '))
           str FROM vr_ad_integration WHERE integrated = 'N') str WHERE rownum <= 1000 ORDER BY rownum)
LOOP
    BEGIN
        UTL_FILE.put_line(l_v_file, x.str);
    END;
END LOOP;
UTL_FILE.fflush(l_v_file);
UTL_FILE.fclose(l_v_file);
END VR_AD_INTEGRATION_EXPORT; 
```

现在我可以在远程位置成功创建文件。但是，如果选择查询中没有数据怎么办？不应创建任何文件。如果我是正确的，我需要包含异常代码，但在这种情况下我不知道该怎么做。有什么建议吗？

干杯! :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:02:48.663

有几种方法可以实现这一点。一种是采用显式游标的更加程序化的方法，并且仅在获取记录后才打开文件。第二个是修改您的代码以在循环中包含一个计数，如果计数为零，则删除该文件。

这是第三种选择，它是前一种选择的变体。它测试文件的大小，如果为零，则使用 UTL_FILE.FREMOVE() 命令将其删除。注意需要将生成的文件名存储在一个变量中以供以后参考。

```
CREATE OR REPLACE PROCEDURE VR_AD_INTEGRATION_EXPORT AS
     l_v_file UTL_FILE.file_type;
     l_filename varchar2(128);  
     f_exists boolean;
     f_size pls_integer;
     f_blk_size pls_integer;
BEGIN  
    l_filename := 'HRMtoAD1_'||to_char(sysdate,'YYYYMMDD')||'_'||to_char(sysdate,'HH24MISS');
    l_v_file := UTL_FILE.fopen('integration',  l_filename , 'w', 32767); 
    FOR x IN (SELECT * FROM (SELECT
             decode(pid, NULL, RPAD(' ',7,' '), RPAD(user_id, 7, ' '))|| '' ||            decode(name_last, NULL, RPAD(' ',50,' '), RPAD(name_last, 50, ' '))
            str 
                 FROM vr_ad_integration 
                 WHERE integrated = 'N') str 
         WHERE rownum <= 1000 ORDER BY rownum) LOOP
     BEGIN
         UTL_FILE.put_line(l_v_file, x.str);
     END; 
    END LOOP; 
    utl_file.fgetattr('integration',  l_filename , f_exists, f_size, f_blk_size);
    if f_size > 0 then
        UTL_FILE.fflush(l_v_file); 
        UTL_FILE.fclose(l_v_file); 
    else
        UTL_FILE.fclose(l_v_file); 
        utl_file.fremove('integration',  l_filename);
    end if;
END VR_AD_INTEGRATION_EXPORT; 
```

除了读写行之外，UTL_FILE 包中还有一些有用的功能。我建议您阅读文档以[了解更多信息](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_file.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:48:08.950

使用标志检查文件是否已创建，并且仅在第一次运行循环时创建一次。伪代码：

```
bool fileCreatedFlag = false;
for x in (SELECT ...):
    if(!fileCreatedFlag):
        l_v_file = fopen(...);
        fileCreatedFlag = true;

    put_line(...);

if(fileCreatedFlag):
    fflush;
    fclose; 
```

# java - 获取单例集合的对象

> ID：11717227
> 
> 赞同：10
> 
> 时间：2012-07-30T07:41:36.780
> 
> 标签：java, collections

我想获取一个我知道只有一个元素的集合的对象（基本上它与它的相反`Collections.singletonList()`- 但我不知道集合是否是列表/集合/其他东西，所以我不能使用`c.get(0)`）。

目前我使用`c.iterator.next()`，想知道在 Java 中是否已经有一种方法或一个常见的库（apache-commons、guava 等）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T07:45:21.667

[`Iterables.getOnlyElement()`](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/collect/Iterables.html)（或者`Iterables.getFirst()`，如果集合可以是空的）来自 Guava。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T07:44:15.093

方法签名和[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singletonList%28T%29)清楚地表明它是一个`List`.

这是签名：

```
public static <T> List<T> singletonList(T o) 
```

这是JavaDoc：

> 返回仅包含指定对象的不可变列表。返回的列表是可序列化的。

因此，这意味着您可以简单地使用：

```
List<MyClass> singleton = Collections.singletonList(myObject);
MyClass obj = singleton.get(0); 
```

* * *

哦，现在我明白你的意思了。我不得不承认你的问题很清楚。但出于某种原因，我不明白:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-09T10:04:47.290

使用 Java 8，您可以：

```
collection.stream().findAny().get(); 
```

# plsql - pl-sql 打印表详细信息的过程

> ID：11717233
> 
> 赞同：0
> 
> 时间：2012-07-30T07:41:50.757
> 
> 标签：plsql, cursor, procedure

SQL。我创建了 1 个程序，但没有得到所需的输出。我的程序如下：

```
--/
CREATE OR REPLACE procedure Update_TB_INTERACTLOG
IS
BEGIN
    FOR records in (select TNAME from tab where TNAME like 'TB_INTERACTLOG%' and TABTYPE = 'TABLE')
    LOOP
        dbms_output.put_line(records.TNAME||' modified');
    END LOOP;
END;
/ 
```

我从选择查询中获得了 7 条记录。

这是我在日志输出中得到的。

**13:10:02 [创建 - 0 行，0.031 秒] 命令已处理。没有行受到影响... 1 条语句执行，0 行受到影响，执行/获取时间：0.031/0.000 秒 [0 成功，1 警告，0 错误]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:52:24.687

看起来好像您已经创建了过程但没有执行它。要执行它，请运行以下代码：

```
exec Update_TB_INTERACTLOG; 
```

此外，您需要在用于运行它的工具中打开 DBMS 输出（除非它是 SQL*plus）。

请注意，该程序没有正确编译（*1 个警告*）。该过程可能应以以下方式结束：

```
END Update_TB_INTERACTLOG; 
```

代替：

```
END; 
```

# vbscript - 在不到一秒的时间内显示消息框

> ID：11717234
> 
> 赞同：1
> 
> 时间：2012-07-30T07:41:54.053
> 
> 标签：vbscript

有没有办法让 msgbox 在一秒钟内显示并消失，我一直在使用下面的脚本，但只能让它在一秒钟内关闭。

Option Explicit Dim Wshell, BtnCode Set Wshell = CreateObject("wscript.shell")

BtnCode= Wshell.Popup ("测试", 1, "测试")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:08:48.693

恐怕这在弹出窗口中是不可能的。不过，您可以使用 Internet Explorer 作为 UI 来做到这一点。

```
Set oIE = CreateObject("InternetExplorer.Application") 

With oIE 
  .navigate("about:blank") 
  .Document.Title = "Countdown" & string(100, chrb(160)) 
  .resizable=0 
  .height=200 
  .width=100 
  .menubar=0 
  .toolbar=0 
  .statusBar=0 
  .visible=1 
End With 

' wait for page to load 
Do while oIE.Busy 
  wscript.sleep 50 
Loop 

' prepare document body 
oIE.document.body.innerHTML = "<div id=""countdown"" style=""font: 36pt sans-serif;text-align:center;""></div>" 
oIE.document.all.countdown.innerText= "test message"
'the parameters is in miliseconds, so here the message is shown for half a second
wscript.sleep 500
oIE.quit 
```

# windows-8 - 我可以将 roslyn 与 Windows Metro 或 RT 应用程序一起使用吗？

> ID：11717238
> 
> 赞同：1
> 
> 时间：2012-07-30T07:42:03.503
> 
> 标签：windows-8, microsoft-metro, windows-runtime, roslyn

我想知道是否可以创建一个使用 Roslyn 库的 Metro 风格（甚至是 ARM 上的 Windows RT）应用程序？

roslyn 库未列在 Metro 可用的命名空间中，但我可以将 roslyn dll 包含在我的应用程序中吗？（或者他们是否使用 Metro 不提供的 API？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:36:29.093

目前 Roslyn 正在使用 Metro 应用程序不可用的 API。然而，这是一个有趣的想法。Roslyn 团队甚至还没有尝试让代码库 Metro 友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:33:22.920

在 Metro Apps 中，您可以使用使用受限 API 的模块。但是 Windows 应用程序认证工具包将无法通过认证过程，因此您将无法将应用程序上传到 Windows 应用商店。分发此类应用程序需要用户安装开发人员许可证才能运行该应用程序。

# api - Google Apps 管理员如何冒充其他用户获取他人的 gmail？

> ID：11717244
> 
> 赞同：1
> 
> 时间：2012-07-30T07:42:26.030
> 
> 标签：api, gmail

我正在编写一个脚本来使用 IMAP 和 Google OAuth 访问所有 Google 应用程序域用户的电子邮件。这个脚本应该让我删除、移动和导出任何用户的电子邮件。但是，我在 Google API 中找不到任何线索来冒充其他用户访问他的电子邮件。（这种模拟对于 Google Docs 来说很容易，但对于 Gmail 不可用。）请帮助，任何建议都值得赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:58:47.353

2Legged OAuth 1.0 可以解决这个问题。我不知道 Google 何时会向 Gmail 和其他 API 服务发布 2 legged Oauth 2.0，但我很期待。

# perl - Perl 远程登录

> ID：11717246
> 
> 赞同：1
> 
> 时间：2012-07-30T07:42:33.143
> 
> 标签：perl, telnet

*$remote->waitfor('/​​注销/');*

我有时会收到错误消息，说当服务器不可用时模式匹配超时。我想处理这个错误。每当发生此错误时，我想让我的脚本休眠 1 分钟并尝试重新登录。

我试过这样的事情：

```
 if($remote->waitfor('/Logoff/')) 
   {
     #proceed login perform intended operations.
   }
   else
   {
      sleep(60);#control is not coming here. returning pattern match timed-out error.
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:37:47.770

大多数“ **Net::Telnet** ”方法处理错误的方式是由“ *errmode* ”选项定义的。

这当然包括`waitfor`方法和超时错误。默认的“ *errmode* ”行为是“die”，这意味着您的`waitfor`调用将不返回任何内容并且无处可去。

要检查一个值，您需要将“ *errmode* ”设置为“ **return** ”：

```
 if($remote->waitfor( -match => '/Logoff/', -errmode => 'return' )) 
   {
     #proceed login perform intended operations.
   }
   else
   {
      sleep(60); #returning pattern match timed-out error (or something else).
   } 
```

注意：当您为 指定附加选项时`waitfor`，您需要通过“*匹配*”选项设置匹配模式。

# ios - 是否可以停用：当用户触摸状态栏并向下拖动时，会出现 iPhone 信息面板

> ID：11717248
> 
> 赞同：0
> 
> 时间：2012-07-30T07:42:39.077
> 
> 标签：ios, iphone

> **可能重复：**
> [如何在下拉屏幕时禁用通知中心的显示？](https://stackoverflow.com/questions/7765103/how-can-i-disable-the-display-of-the-notification-center-when-pulling-down-on-th)

可能是这个问题是不正确的，我真的认为这是不可能实现的，但无论如何，我有兴趣找到答案。我想停用通常的 iPhone 行为：当用户触摸状态栏并向下拖动时，会出现 iPhone 信息面板。

因此，当用户这样做时，什么都不会发生。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:30:38.437

您不能“停用通常的 iPhone 行为”。您无法更改设备上的任何内容。您的应用程序唯一可以控制的是您的应用程序。您的应用不会影响设备上的任何其他内容。如果您想更改设备上的任何设置，则不能。设备的用户必须这样做。他们拥有设备，这取决于他们。不是你的应用程序。

除非它越狱，但那是另一回事。

# javascript - IE 中的宽度必须比 ff 和 ch 多 2 px

> ID：11717255
> 
> 赞同：0
> 
> 时间：2012-07-30T07:43:02.723
> 
> 标签：javascript, html, css, layout, cross-browser

嗨，我正在编写一个网络计算器，ie 中的主 div 的宽度需要比 ff 和 ch 多 2 px，这使得它在 ff 和 ch 中看起来有点松散，或者在 ie 中完全损坏。 [这是 calc](http://yovelzack.fav.cc/)和[jsFiddle](http://jsfiddle.net/Vrs42/3/)的链接。如果有人可以帮助我减少这两个像素（#main{width: 186px;} 是我不想得到的）或者至少使按钮在所有浏览器中均匀分布，那会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:50:09.120

使用 IE 黑客？

就像是

```
<!--[if lte IE 8]>
<style type="text/css">
  #main {
    width: 188px !important;
  }
</style>
<![endif]--> 
```

在您的 IE 头部标记中直到版本 8（可更改）并将您的 css 放回 css 文件中的 186px。

这有点作弊，但如果你没问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:50:25.480

添加以下脚本

```
var mainDiv = document.getElementById('main');
var divWidth = parseInt(mainDiv.style.width);
if(navigator.appName=="Microsoft Internet Explorer")
{
mainDiv.style.width = divWidth + 2 + 'px';
} 
```

# asp.net - System.Security.Permissions.FileIOPermission 异常，即使信任级别已满

> ID：11717256
> 
> 赞同：1
> 
> 时间：2012-07-30T07:43:03.040
> 
> 标签：asp.net, c#-4.0, file-upload, full-trust

我正在尝试将一些图片上传到服务器。但是当我尝试上传时，它会抛出这个错误：

```
System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

我检查了这个：[WebPermission Exception 即使我完全信任](https://stackoverflow.com/questions/2078147/webpermission-exception-even-though-im-in-full-trust)

但我无法更改 IIS 设置，因为我的应用程序位于托管公司。我给了文件夹的白权限。在我的 web.config 文件中，我有以下代码：

```
 <location allowOverride="true" path="ProductImages">
<system.web>
  <trust level="Full" originUrl=""  />
</system.web> 
```

你对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:02:06.440

授予用户`WRITE`对要上传到的文件夹的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:08:30.840

如果它是您的私人/专用托管服务器，则在您要上传图像的文件夹上设置写入权限。在共享主机中，您不允许写入所有文件夹，因此您需要在特定目录上设置写入权限，大多数情况下我们需要要求托管服务提供商启用写入权限，否则异常很明显

# android - Android - SherlockActionBar 长按图标菜单

> ID：11717257
> 
> 赞同：2
> 
> 时间：2012-07-30T07:43:07.573
> 
> 标签：android, actionbarsherlock, long-press

我正在尝试在 actionbarsherlock 中长按一下。默认操作是显示一个空的 toast。我不知道如何更改这些操作，例如显示对话框或类似的东西。例如，我在栏 (Sherlock) 上有一个显示同步的图标。我希望这个按钮在用户长按时显示祝酒词

谢谢 ！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:49:59.210

[在此处](https://groups.google.com/d/msg/actionbarsherlock/lU4yrwz47o4/fmZQkiTA8i4J)查看库开发人员 (Jake Wharton) 的回答。简而言之，

> 这不可能。长按保留用于烘烤操作项的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:48:58.210

您可以在用户单击时启动一个操作，并且您可以运行时钟并识别时间，如果时间更多（比如说 10 次），您可以显示一个 tost .. 如果更少什么也不做。

在这种情况下，您可以使用 timeinterval 捕获长按。

我希望这有帮助。谢谢

更好的是，您可以查看这篇[文章，该文章解释](http://android-developers.blogspot.in/2009/12/back-and-other-hard-keys-three-stories.html)了提供上述内容所需的内容。

# c# - 我应该如何构建我的域模型

> ID：11717259
> 
> 赞同：2
> 
> 时间：2012-07-30T07:43:09.510
> 
> 标签：c#, java, architecture, domain-driven-design, domain-model

我尝试将我的特定域问题抽象到银行账户，假设以下情况：

*   我有某个客户的银行登录。
*   每个客户可以拥有多个属于同一登录名的银行账户。
*   每个银行账户可以有数千笔交易。

我将类结构设计如下（简化）：

```
public class Login
{
    private List<Account> _bankingAccounts;
    ....more fields, ctor, getters, setters...
}

public class Account
{
   private List<Transaction> _transactions;
    ....more fields, ctor, getters, setters...
}

public class Transaction
{
   String _comment;
    ....more fields, ctor, getters, setters...
} 
```

好吧，但是如果我假设有 20 个帐户，每个帐户有 10000 个事务，并且我从数据库中加载整个模型，则会有大量内存，即使我不知道客户是否需要所有这些事务。

我想建立一个更简化的模型，如下所示：

```
public class Login
{
    private List<SimpleAccount> _bankingAccounts;
    ....more fields, ctor, getters, setters...
}

public class SimpleAccount
{
    ....more fields, ctor, getters, setters...
}

public class Account
{
   private List<Transaction> _transactions;
    ....more fields, ctor, getters, setters...
}

public class Transaction
{
   String _comment;
    ....more fields, ctor, getters, setters...
} 
```

然后我将加载一个带有简化帐户（不包含所有交易）的帐户模型，并且只有在用户请求查看特定帐户的交易时，我才会加载这个单个完整的帐户对象。

这样可以吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T08:01:42.283

从您的问题中，我发现您的基本需求是 ORM，因为（如果我没记错的话）您想要两件事
域模型映射
但
延迟加载
延迟加载我们的意思是关系对象仅在我们尝试访问它们时才加载。您想查看您永远不想自动加载学生的所有课程（可能是一个集合）的特定学生数据，除非不想看到他/她的课程（如果学生和课程有关系） .
因此，对于您的问题，您应该使用 ORM 它将为您提供两种解决方案:)
这是.Net 提供[的一些 ORM 的列表](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#.NET)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T07:47:46.047

当您构建*域*模型时，您不应该考虑性能影响，因为域模型是您的域，而不一定是您实现的。

此外，如果您使用任何体面的 ORM 框架（例如[entity-framework](/questions/tagged/entity-framework "显示标记为“实体框架”的问题")），您可以只从数据库加载您需要的数据，而不是整个对象图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:01:02.503

正如 Serg 所说，性能思想属于实现，而不是领域模型。

如果你想避免加载整个账户，你应该实现某种延迟加载，例如：

```
public class Account
{
   private List<Transaction> _transactions;

   public List<Transaction> getTransactions() {
        if(_transactions == null) {
             loadTransactions();
        }
        return _transactions;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:51:50.350

有一种称为事件溯源的模式听起来可能对您有所帮助。它依赖于事件的存储（在您的情况下，这些是事务）而不是运行总计，因此您可以对数据做更多的事情。

此模式遇到了您遇到的相同问题。所以这个模式有一个补充，叫做快照。拍摄快照，例如在每个月末拍摄，您可以及时获取一个时间点并将交易记录加载回最近的快照。快照将在快照点按原样显示帐户（可能是最后一个快照或帐户开立事件的产物，其中所有交易均已重播）。

如果你在谷歌上搜索“事件溯源快照”，就会有很多文章讨论这种模式。希望这可以帮助。

# python - 为 Sublime Text 2 的嵌入式 Python 解释器安装 IPython

> ID：11717260
> 
> 赞同：4
> 
> 时间：2012-07-30T07:43:12.050
> 
> 标签：python, ipython, sublimetext

我正在尝试在 sublime 中安装 IpythonIntegration 包，

我安装在 bash shell 中：

1.  最新的 ipython
2.  pyzmq
3.  pyside

但是，崇高的控制台仍然给我一个错误

```
Reloading plugin /home/areal/.config/sublime-text-2/Packages/User/ipython_repl.py
Traceback (most recent call last):
  File "./sublime_plugin.py", line 62, in reload_plugin
  File "./ipython_repl.py", line 13, in <module>
    from IPython.zmq.blockingkernelmanager import BlockingKernelManager
ImportError: No module named IPython.zmq.blockingkernelmanager 
```

**编辑：**
即使 a`import IPython`也行不通。

但是，当在 python 控制台中`import IPython`工作`import zmq`时：

```
from IPython.zmq.blockingkernelmanager import BlockingKernelManager 
```

失败：

```
ImportError: No module named zmq.blockingkernelmanager 
```

我已经`0MQ 3.2`（也尝试过 2.x）和最新`PyZMQ`的 . 我正在与`Python 2.7.2`.`Ubuntu 11.10`

所以总的来说我有两个问题：

1.  Sublime 中没有 IPython（我认为这是因为 sublime 与嵌入式解释器一起工作）
2.  IPython 中没有 zmq 模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:07:53.933

我没有使用 Ubuntu，但我在 Mac OS X 中遇到了类似的问题。

它在独立 python 中成功而在 sublime text 2 中失败的原因是：sublime text 2 默认使用 python 2.6，而独立 python 是 2.7。

为了解决这个问题，在我的 OS X 中，我创建了一个从 2.7 到 2.6 的软链接，如下所示：

```
cd /Library/Frameworks/Python.framework/Versions/
sudo mv 2.6 2.6-backup
ln -s 2.7 2.6 
```

我认为你可以在 Ubuntu 中做同样的事情。

# php - Mysql更新查询PHP不起作用

> ID：11717263
> 
> 赞同：0
> 
> 时间：2012-07-30T07:43:24.377
> 
> 标签：php, mysql

我需要你的帮助..我的 mysql 有问题，当我运行 UPDATE 查询时，数据不会更新..

这是结构..

```
id_demand   | nama_item | hargajual | hargabeli | barcode   | part_number   | nosc  | stat_gudang   | stat_po   | stat_gudang2  | request   | terima    | id_po | id_pr | id_npb    | id_ttb    | tanggal_request   | tanggal_terima    | final_stat    | tipe 
```

这是查询...

```
$sqlx = "UPDATE item_demand SET stat_gudang = '1' AND id_pr = '$id_PR' WHERE id_npb = '2'";        
mysql_query($sqlx) or die(mysql_error()); 
```

我不知道为什么我的查询不起作用，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:44:56.327

我假设您没有收到任何错误？这可能意味着您的 where 条件尚未得到验证。

编辑：我刚刚看到你的语法是错误的。您的 SET 子句必须用逗号而不是“AND”分​​隔。因此： SET stat_gudang = '1', id_pr = '$id_PR'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:47:48.923

确保在更新中包含主键和所有外键约束的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:22:48.600

您使用了 AND Bitween 两个字段

stat_gudang = '1' AND id_pr = '$id_PR'

更改代码

stat_gudang = '1', id_pr = '$id_PR'

```
$sqlx = "UPDATE item_demand SET stat_gudang = '1', id_pr = '$id_PR' WHERE id_npb = '2'";        
mysql_query($sqlx) or die(mysql_error()); 
```

# c# - 如何在类型变量中创建任何类型的字典？

> ID：11717264
> 
> 赞同：1
> 
> 时间：2012-07-30T07:43:24.750
> 
> 标签：c#, .net, dynamic, types, dictionary

目前我面临的问题是我需要使用任何类型的案例创建一个 Dictionary 实例。类型由方法的参数传递。我不只是想创建一个动态或对象类型的字典，因为这会通过使用我的库来面对用户很多转换问题。我也不能使用简单的构造函数，因为我的方法用真实的数据（存储在文件中）填充 Dictionary。按类型变量创建特定字典很重要。这就是我的想法：

```
public static Dictionary<dynamic, dynamic> createDict(Type type1, Type type2)
{
    // how to create the dictionary?
    // im filling my dictionary with any data ...
    return dict;
} 
```

用户在这里调用我的方法：

```
Dictionary<string, int> dict = MyLib.createDict(typeof(string), typeof(int));
// or
MyOwnType myInstance = new MyOwnType();
Dictionary<string, MyOwnType> dict = MyLib.createDict(typeof(string), myInstance.GetType()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:46:04.067

使用泛型，您可以执行以下操作：

```
public static Dictionary<T, U> CreateDict<T,U>()
{
    Dictionary<T,U> dict = new Dictionary<T,U>();

    // Fill dictionary with data     

    return dict;
} 
```

然后用户可以调用这个函数：

```
var myDict1 = CreateDict<string,int>();
var myDict2 = CreateDict<string,MyOwnType>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T08:24:36.493

```
Type dictType = typeof(Dictionary<, >).MakeGenericType(Type1, Type2);
var dict = Activator.CreateInstance(dictType); 
```

*   获取类型`Dictionary`
*   使用指定的类型创建泛型类型`MakeGenericType`
*   使用创建泛型类型的实例`Activator.CreateInstance`

# php - 传递给 foreach() 循环的无效参数？

> ID：11717268
> 
> 赞同：0
> 
> 时间：2012-07-30T07:43:53.073
> 
> 标签：php, javascript, html

我在 display.php 中收到以下错误 **警告：为 foreach() 提供的参数无效。我试图在我的显示函数中遍历这些数字中的每一个，并从 Main 中为每个数字生成一个图像。当我回显 display.php 它输出 nums[0]=$displayid nums[1]=$displayid 并且我想将 $displayid 传递到我的查询语句中。

**生成号码（）**

```
 var rndNums = new Array(16,17,18,19,20,21,22,23,24,25,26,27,28);
        var generate_numbers = function()
        {
            for(var i=0; i < 13; i++)
            {
                var idx = Math.floor(Math.random()*rndNums.length);
                var rndNum = rndNums[idx];
                rndNums[idx] = rndNums[rndNums.length - 1];
                rndNums.pop();
                document.getElementsByName("nums[]").item(i).value=rndNum;
            }
        } 
```

> * * *

**显示.php**

```
$nums = isset($_POST['nums']); // array
              foreach($nums as $key => $displayid)
                        {
                            echo 'nums['.$key.']='.$displayid."<br>\n";
                        }

        $stmt->bind_param("i", $displayid);
        $stmt->execute();
        $stmt->bind_result($image);
        $stmt->fetch();
        header("Content-Type: image/jpeg");
        echo $image; 
        ?> 
```

* * *

> **主.html**

```
<form id="numberForm" action="display.php" method="POST">
        <input type="hidden" name="nums[]">
        <input type="hidden" name="nums[]">

    </form>
    <button onClick="generate_numbers();document.getElementById('numberForm').submit()">submit</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:45:24.970

```
$nums = isset($_POST['nums']); // array 
```

返回一个布尔值（无论变量是否设置）而不是数组。

也许您正在尝试这样做：

```
$nums = isset($_POST['nums']) ? $_POST['nums'] : array(); // array 
```

另外，请注意，您不应该在图像数据之前回显文本，否则会破坏您的响应。并且`$display_id`查询中的将是循环中的最后一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:38:19.937

警告：

> **警告：为 foreach() 提供的参数无效。

意味着您有一个未提供数组的 foreach 循环。因此这意味着 $nums 要么是空的，要么是空的，或者不是一个数组。

因此，我建议更改线路：

```
$nums = isset($_POST['nums']); // array
foreach($nums as $key => $displayid)
{
    echo 'nums['.$key.']='.$displayid."<br>\n";
} 
```

至：

```
$nums = isset($_POST['nums']); // array
if (isset($nums) && is_array($nums))
{
    foreach($nums as $key => $displayid)
    {
        echo 'nums['.$key.']='.$displayid."<br>\n";
    }
} 
```

这样您就可以避免警告，并且仅在 nums 包含任何数据时才打印它（并且另外是一个数组）。

# objective-c - 我可以通过应用程序修改设置捆绑 PSMultiValueSpecifier 标题和值中的 Root.plist

> ID：11717274
> 
> 赞同：0
> 
> 时间：2012-07-30T07:44:14.960
> 
> 标签：objective-c, settings.bundle, root.plist

我想通过我的应用程序更改 PSMultiValueSpecifier 标题数组和值数组。这是我的 Root.plist 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>PreferenceSpecifiers</key>
<array>
    <dict>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
        <key>Title</key>
        <string>Login Information</string>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
        <key>Title</key>
        <string>Restaurant Code</string>
        <key>Key</key>
        <string>Restaurant_Code_key</string>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
        <key>Title</key>
        <string>Password            </string>
        <key>Key</key>
        <string>Password_key</string>
        <key>IsSecure</key>
        <true/>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSToggleSwitchSpecifier</string>
        <key>Title</key>
        <string>Remember Login Information</string>
        <key>Key</key>
        <string>Remember_Login_Information_key</string>
        <key>DefaultValue</key>
        <false/>
        <key>TrueValue</key>
        <true/>
        <key>FalseValue</key>
        <false/>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
        <key>Title</key>
        <string>Menu Content</string>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSMultiValueSpecifier</string>
        <key>Title</key>
        <string>Default Language</string>
        <key>Key</key>
        <string>Default_Language_key</string>
        <key>DefaultValue</key>
        <integer>0</integer>
        <key>Titles</key>
        <array>
            <string>English</string>
            <string>Spanish</string>
        </array>
        <key>Values</key>
        <array>
            <integer>0</integer>
            <integer>1</integer>
        </array>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSToggleSwitchSpecifier</string>
        <key>Title</key>
        <string>Update Data on Launch</string>
        <key>Key</key>
        <string>Update_Data_key</string>
        <key>DefaultValue</key>
        <false/>
        <key>TrueValue</key>
        <true/>
        <key>FalseValue</key>
        <false/>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
        <key>Title</key>
        <string></string>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSToggleSwitchSpecifier</string>
        <key>Title</key>
        <string>Reset on Next Launch</string>
        <key>Key</key>
        <string>Reset_key</string>
        <key>DefaultValue</key>
        <false/>
        <key>TrueValue</key>
        <true/>
        <key>FalseValue</key>
        <false/>
    </dict>

</array>
<key>StringsTable</key>
<string></string>
</dict>
</plist>

I tried to change like this Through my application.
<dict>
<key>Type</key>
<string>PSMultiValueSpecifier</string>
<key>Title</key>
<string>Default Language</string>
<key>Key</key>
<string>Default_Language_key</string>
<key>DefaultValue</key>
<integer>0</integer>
<key>Titles</key>
<array>
<string>English</string>
</array>
<key>Values</key>
<array>
<integer>0</integer>
</array>
</dict> 
```

但这不会改变标题和值。请有人帮助我。下面给出了我使用的代码。

```
NSURL * settingsURL =  [[NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"Settings" withExtension:@"bundle"]]
                        URLForResource:@"Root" withExtension:@"plist"];
NSMutableDictionary * settingsDict = [NSMutableDictionary    dictionaryWithContentsOfURL:settingsURL];
NSMutableArray *settingsArr = [settingsDict objectForKey:@"PreferenceSpecifiers"];

NSMutableDictionary *loTempDict = [[NSMutableDictionary alloc] init];
loTempDict = [settingsArr objectAtIndex:5];

NSArray *title_Array = [loTempDict objectForKey:@"Titles"];
NSArray *value_Array = [loTempDict objectForKey:@"Values"];

NSArray *lanArray_title = [NSArray arrayWithObject:@"French"];
NSArray *lanArray_value = [NSArray arrayWithObject:@"0"];

[loTempDict setObject:lanArray_title forKey:@"Titles"];
[loTempDict setObject:lanArray_value forKey:@"Values"];
[settingsArr replaceObjectAtIndex:5 withObject:loTempDict];

NSLog(@"final settingsArr ===%@ ",settingsArr);

NSString *settingsBundle = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"bundle"];

[settingsArr writeToFile:[settingsBundle stringByAppendingPathComponent:@"Root.plist"] atomically: TRUE]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:22:59.593

你不能这样做。出于安全原因，无法写入应用程序包。您能想到的最佳替代方案是将要修改的文件从应用程序包目录复制到库或文档目录 - 这些是可写的，并且可以更新其中的文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T07:32:38.453

这将解决您的问题

```
NSString *settingsBundle = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"bundle"];

[settingsDict setValue:settingsArr forKey:@"PreferenceSpecifiers"];

[settingsDict writeToFile:[settingsBundle stringByAppendingPathComponent:@"Root.plist"] atomically: TRUE]; 
```

# django - Django：更改模型的架构（将 CharField 替换为 ImageField）

> ID：11717279
> 
> 赞同：1
> 
> 时间：2012-07-30T07:44:46.080
> 
> 标签：django, django-models

我基于 Django 框架修改项目。我有表格来添加一个项目。商品有封面（图片）。此商品商店封面的 url 的当前模型版本如下：

```
class Item(models.Model):
    title = models.CharField(max_length = 255, db_index = True)
    slug = models.CharField(max_length = 80, db_index = True)
    categories = models.ManyToManyField(Category)
    cover_url = models.CharField(max_length = 255, null = True, default = None)
    ... 
```

重要注意，一些图像存储在其他服务器上（不同的文件托管）。

我想用 ImageField 替换 CharField。但是现有的项目呢？我想更改模型的架构并保存所有以前添加的图像。我怎样才能实现这个目标？

也许这种修改的一些原因可能会有所帮助。主要原因是为用户提供从他们的计算机上传图像的能力（不仅仅是插入网址）。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:36:13.477

如果`cover_url`可以有现有源 - 您必须有自定义存储，可以处理外部源。

这是`ImageField`来自[django 文档](https://docs.djangoproject.com/en/dev/topics/files/#the-built-in-filesystem-storage-class)的自定义存储使用示例：

```
from django.db import models
from django.core.files.storage import FileSystemStorage

fs = FileSystemStorage(location='/media/photos')

class Car(models.Model):
    ...
    photo = models.ImageField(storage=fs) 
```

让我们跳出来，我们会得到这样的代码：

```
from django.db import models
from django.core.files.storage import FileSystemStorage

def is_url(name):
    return 'http' in name

class MyStorage(FileSystemStorage):
    #We should override _save method, instead of save. 
    def _save(self, name, content=None):
        if content is None and is_url(name):
            return name
        super(MyStorage, self)._save(name, content)

fs = MyStorage()

class Item(models.Model):
    title = models.CharField(max_length = 255, db_index = True)
    slug = models.CharField(max_length = 80, db_index = True)
    categories = models.ManyToManyField(Category)
    cover_url = models.ImageField(storage=fs) 
```

它有很大的改进空间 - 这里只显示想法。

# python - Emacs24 + Pymacs -f 开关与 pymacs-load-path 冗余？

> ID：11717280
> 
> 赞同：2
> 
> 时间：2012-07-30T07:44:49.990
> 
> 标签：python, emacs, pymacs

我已经升级到 Emacs24，并且在启动 Pymacs 时它会因为超时而中断。

下面是回溯：

```
Debugger entered--Lisp error: (error "Pymacs helper did not start within 30 seconds")
  signal(error ("Pymacs helper did not start within 30 seconds"))
  pymacs-report-error("Pymacs helper did not start within %d seconds" 30)
  (if (accept-process-output process pymacs-timeout-at-start) nil (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))
  (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))
  (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)  " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start)))
  (let ((process (apply (quote start-process) "pymacs" buffer (let ((python (getenv "PYMACS_PYTHON"))) (if (or (null python) (equal python "")) "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and (>= emacs-major-version 24) (quote ("-f"))) (mapcar (quote expand-file-name) pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)    " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number (match-string 1))))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start")))))
  (progn (let ((process (apply (quote start-process) "pymacs" buffer (let ((python ...)) (if (or ... ...) "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and (>= emacs-major-version 24) (quote ...)) (mapcar (quote expand-file-name) pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\) " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number (match-string 1))))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply"))))
  (unwind-protect (progn (let ((process (apply (quote start-process) "pymacs" buffer (let (...) (if ... "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and ... ...) (mapcar ... pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)    " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number ...)))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply")))) (set-match-data save-match-data-internal (quote evaporate)))
  (let ((save-match-data-internal (match-data))) (unwind-protect (progn (let ((process (apply (quote start-process) "pymacs" buffer (let ... ...) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append ... ...)))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)    " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ ... ...))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply")))) (set-match-data save-match-data-internal (quote evaporate))))
  (save-match-data (let ((process (apply (quote start-process) "pymacs" buffer (let ((python ...)) (if (or ... ...) "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and (>= emacs-major-version 24) (quote ...)) (mapcar (quote expand-file-name) pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)   " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number (match-string 1))))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply"))))
  (save-current-buffer (set-buffer buffer) (erase-buffer) (buffer-disable-undo) (pymacs-set-buffer-multibyte nil) (set-buffer-file-coding-system (quote raw-text)) (save-match-data (let ((process (apply (quote start-process) "pymacs" buffer (let (...) (if ... "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and ... ...) (mapcar ... pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\) " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number ...)))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply")))))
  (with-current-buffer buffer (erase-buffer) (buffer-disable-undo) (pymacs-set-buffer-multibyte nil) (set-buffer-file-coding-system (quote raw-text)) (save-match-data (let ((process (apply (quote start-process) "pymacs" buffer (let (...) (if ... "python" python)) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append (and ... ...) (mapcar ... pymacs-load-path))))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)  " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ (match-end 0) (string-to-number ...)))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply")))))
  (let ((buffer (get-buffer-create "*Pymacs*"))) (with-current-buffer buffer (erase-buffer) (buffer-disable-undo) (pymacs-set-buffer-multibyte nil) (set-buffer-file-coding-system (quote raw-text)) (save-match-data (let ((process (apply (quote start-process) "pymacs" buffer (let ... ...) "-c" (concat "import sys;" " from Pymacs.pymacs import main;" " main(*sys.argv[1:])") (append ... ...)))) (pymacs-kill-without-query process) (while (progn (goto-char (point-min)) (not (re-search-forward "<\\([0-9]+\\)  " nil t))) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper did not start within %d seconds" pymacs-timeout-at-start))) (let ((marker (process-mark process)) (limit-position (+ ... ...))) (while (< (marker-position marker) limit-position) (unless (accept-process-output process pymacs-timeout-at-start) (pymacs-report-error "Pymacs helper probably was interrupted at start"))))) (goto-char (match-end 0)) (let ((reply (read (current-buffer)))) (if (and (pymacs-proper-list-p reply) (= (length reply) 2) (eq (car reply) (quote version))) (unless (string-equal (cadr reply) "0.24-beta2") (pymacs-report-error "Pymacs Lisp version is 0.24-beta2, Python is %s" (cadr reply))) (pymacs-report-error "Pymacs got an invalid initial reply"))))) (if (not pymacs-use-hash-tables) (setq pymacs-weak-hash t) (when pymacs-used-ids (let ((pymacs-transit-buffer buffer) (pymacs-forget-mutability t) (pymacs-gc-inhibit t)) (pymacs-apply "zombie_python" pymacs-used-ids)) (setq pymacs-used-ids nil)) (setq pymacs-weak-hash (make-hash-table :weakness (quote value))) (if (boundp (quote post-gc-hook)) (add-hook (quote post-gc-hook) (quote pymacs-schedule-gc)) (setq pymacs-gc-timer (run-at-time 20 20 (quote pymacs-schedule-gc))))) (setq pymacs-transit-buffer buffer))
  pymacs-start-services()
  (if (and pymacs-transit-buffer (buffer-name pymacs-transit-buffer) (get-buffer-process pymacs-transit-buffer)) nil (when pymacs-weak-hash (unless (or (eq pymacs-auto-restart t) (and (eq pymacs-auto-restart (quote ask)) (yes-or-no-p "The Pymacs helper died.  Restart it? "))) (pymacs-report-error "There is no Pymacs helper!"))) (pymacs-start-services))
  (unless (and pymacs-transit-buffer (buffer-name pymacs-transit-buffer) (get-buffer-process pymacs-transit-buffer)) (when pymacs-weak-hash (unless (or (eq pymacs-auto-restart t) (and (eq pymacs-auto-restart (quote ask)) (yes-or-no-p "The Pymacs helper died.  Restart it? "))) (pymacs-report-error "There is no Pymacs helper!"))) (pymacs-start-services))
  pymacs-serve-until-reply("eval" (pymacs-print-for-apply (quote "pymacs_load_helper") (quote ("ropemacs" "rope-"))))
  pymacs-call("pymacs_load_helper" "ropemacs" "rope-")
  (let ((lisp-code (pymacs-call "pymacs_load_helper" module prefix))) (cond (lisp-code (let ((result (eval lisp-code))) (message "Pymacs loading %s...done" module) result)) (noerror (message "Pymacs loading %s...failed" module) nil) (t (pymacs-report-error "Pymacs loading %s...failed" module))))
  pymacs-load("ropemacs" "rope-")
  eval-buffer(#<buffer  *load*> nil "/home/wvxvw/.emacs" nil t)  ; Reading at buffer position 11007
  load-with-code-conversion("/home/wvxvw/.emacs" "/home/wvxvw/.emacs" t t)
  load("~/.emacs" t t)
  #[0 "\205\262 
```

然后我调查了：

```
(defun pymacs-start-services ()
  ;; This function gets called automatically, as needed.
  (let ((buffer (get-buffer-create "*Pymacs*")))
    (with-current-buffer buffer
      ;; Erase the buffer in case some previous incarnation of the
      ;; Pymacs helper died.  Otherwise, the "(goto-char (point-min))"
      ;; below might not find the proper synchronising reply and later
      ;; trigger a spurious "Protocol error" diagnostic.
      (erase-buffer)
      (buffer-disable-undo)
      (pymacs-set-buffer-multibyte nil)
      (set-buffer-file-coding-system 'raw-text)
      (save-match-data
        ;; Launch the Pymacs helper.
        (let ((process
               (apply 'start-process "pymacs" buffer
                      (let ((python (getenv "PYMACS_PYTHON")))
                        (if (or (null python) (equal python ""))
                            "python"
                          python))
                      "-c" (concat "import sys;"
                                   " from Pymacs.pymacs import main;"
                                   " main(*sys.argv[1:])")
                      (append
                       (and (>= emacs-major-version 24) '("-f"))
                       (mapcar 'expand-file-name pymacs-load-path)))))
          (pymacs-kill-without-query process)
          ;; Receive the synchronising reply.
          (while (progn
                   (goto-char (point-min))
                   (not (re-search-forward "<\\([0-9]+\\)\t" nil t)))
            (unless (accept-process-output process pymacs-timeout-at-start)
              (pymacs-report-error
               "Pymacs helper did not start within %d seconds"
                     pymacs-timeout-at-start)))
          (let ((marker (process-mark process))
                (limit-position (+ (match-end 0)
                                   (string-to-number (match-string 1)))))
            (while (< (marker-position marker) limit-position)
              (unless (accept-process-output process pymacs-timeout-at-start)
                (pymacs-report-error
                 "Pymacs helper probably was interrupted at start")))))
        ;; Check that synchronisation occurred.
        (goto-char (match-end 0))
        (let ((reply (read (current-buffer))))
          (if (and (pymacs-proper-list-p reply)
                   (= (length reply) 2)
                   (eq (car reply) 'version))
              (unless (string-equal (cadr reply) "0.24-beta2")
                (pymacs-report-error
                 "Pymacs Lisp version is 0.24-beta2, Python is %s"
                 (cadr reply)))
            (pymacs-report-error "Pymacs got an invalid initial reply")))))
    (if (not pymacs-use-hash-tables)
        (setq pymacs-weak-hash t)
      (when pymacs-used-ids
        ;; A previous Pymacs session occurred in this Emacs session,
        ;; some IDs hang around which do not correspond to anything on
        ;; the Python side.  Python should not recycle such IDs for
        ;; new objects.
        (let ((pymacs-transit-buffer buffer)
              (pymacs-forget-mutability t)
              (pymacs-gc-inhibit t))
          (pymacs-apply "zombie_python" pymacs-used-ids))
        (setq pymacs-used-ids nil))
      (setq pymacs-weak-hash (make-hash-table :weakness 'value))
      (if (boundp 'post-gc-hook)
          (add-hook 'post-gc-hook 'pymacs-schedule-gc)
        (setq pymacs-gc-timer (run-at-time 20 20 'pymacs-schedule-gc))))
    ;; If nothing failed, only then declare that Pymacs has started!
    (setq pymacs-transit-buffer buffer))) 
```

下面的部分`;; Launch the Pymacs helper.`然后我尝试通过在控制台中运行相同的命令来重现它：

```
wvxvw@wvxvw-desktop:~$ python -c 'import sys;
from Pymacs.pymacs import main;
main(*sys.argv[1:])' -f "/home/wvxvw/programs/pymacs/" "/home/wvxvw/programs/rope-0.9.3/" "/home/wvxvw/programs/ropemacs/" "/home/wvxvw/programs/ropemode/"
> > Traceback (most recent call last):
  File "<string>", line 3, in <module>
  File "/usr/lib/python2.7/dist-packages/Pymacs/pymacs.py", line 57, in main
    options, arguments = getopt.getopt(arguments, 'd:s:')
  File "/usr/lib/python2.7/getopt.py", line 90, in getopt
    opts, args = do_shorts(opts, args[0][1:], shortopts, args[1:])
  File "/usr/lib/python2.7/getopt.py", line 190, in do_shorts
    if short_has_arg(opt, shortopts):
  File "/usr/lib/python2.7/getopt.py", line 206, in short_has_arg
    raise GetoptError('option -%s not recognized' % opt, opt)
getopt.GetoptError: option -f not recognized 
```

如果我删除`-f`开关，它似乎工作正常（就像以前一样！）。因此，我的问题是：为什么需要这个开关？如果需要此开关，我可能做错了其他事情，但它对我不起作用？

如果我随后注释掉该`-f`开关，则版本检查将失败：

~~`Debugger entered--Lisp error: (error "Pymacs Lisp version is 0.24-beta2, Python is 0.23")` 现在，我如何获得 Pymacs 的 0.24-beta2 版本？~~ 对不起，那是我忘记删除对旧 epy-setup 的引用，但是，在删除它之后，Pymacs 可以正常启动，并使用正确的版本（但它不需要 -f 开关）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:12:11.343

答案在这里：

[http://docs.python.org/library/sys.html#module-sys](http://docs.python.org/library/sys.html#module-sys)

```
The list of command line arguments passed to a Python script. argv[0] is the script name (it is operating system dependent whether this is a full pathname or not). If the command was executed using the -c command line option to the interpreter, argv[0] is set to the string '-c'. If no script name was passed to the Python interpreter, argv[0] is the empty string.

To loop over the standard input, or the list of files given on the command line, see the fileinput module. 
```

IMO 与 sys.argv[1:] 你得到所有剩余的参数；来自一些 shell 脚本的“-f”，这里不合适

# node.js - child_process spawn() 中的通配符？

> ID：11717281
> 
> 赞同：17
> 
> 时间：2012-07-30T07:44:51.270
> 
> 标签：node.js, exec, spawn

我想在 node.js 中执行类似“doSomething ./myfiles/*.csv”的命令。我想使用 spawn 而不是 exec，因为它是某种监视进程，我需要 stdout 输出。

我试过这个

```
var spawn = require('child_process').spawn; 
spawn("doSomething", ["./myfiles/*.csv"]); 
```

但是通配符 *.csv 将不会被解释。

使用 spawn() 时不能使用通配符吗？还有其他可能解决这个问题吗？

谢谢

托本

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-11T11:20:18.543

`*`正在由 shell 扩展，并且参数`child_process.spawn`是作为字符串传递的，因此永远不会正确扩展。这是一个限制`spawn`。您可以改为尝试`child_process.exec`，它将允许 shell 正确扩展任何通配符：

```
var exec = require("child_process").exec;

var child = exec("doSomething ./myfiles/*.csv",function (err,stdout,stderr) {
    // Handle result
}); 
```

如果您出于某种原因确实需要使用，也许您可​​以考虑在创建子进程之前`spawn`在 Node 中使用类似[node-glob的库自己扩展通配符文件模式？](https://github.com/isaacs/node-glob)

## 更新

在 Joyent Node 核心代码中，我们可以观察到一种在 shell 中调用任意命令的方法，`spawn`同时保留完整的 shell 通配符扩展：

[https://github.com/joyent/node/blob/937e2e351b2450cf1e9c4d8b3e1a4e2a2def58bb/lib/child_process.js#L589](https://github.com/joyent/node/blob/937e2e351b2450cf1e9c4d8b3e1a4e2a2def58bb/lib/child_process.js#L589)

这是一些伪代码：

```
var child;
var cmd = "doSomething ./myfiles/*.csv";

if ('win32' === process.platform) {
    child = spawn('cmd.exe', ['/s', '/c', '"' + cmd + '"'],{windowsVerbatimArguments:true} );
} else {
    child = spawn('/bin/sh', ['-c', cmd]);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-12T19:35:43.400

这是最简单的解决方案：

```
spawn("doSomething", ["./myfiles/*.csv"], { shell: true }); 
```

正如@JamieBirch 在他的评论中所建议的那样，关键是告诉`spawn()`使用外壳（`{ shell: true }`，[请参阅文档](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)），因此通配符已正确解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:02:26.013

您使用的是什么操作系统？在 Unix 系列操作系统（例如 Linux、MacOS）中，程序期望 shell 进程扩展通配符文件名参数并将扩展传递到`argv[]`. 在 Windows 操作系统中，程序通常需要自己扩展通配符（尽管只有当它们是 Windows 原生程序时；移植的 Unix 系列程序最多可能会尝试通过兼容层运行参数）。

您的语法看起来像是适用于 Unix 系列系统。如果是这样，那么当您调用时，`spawn()`您将绕过外壳扩展，并且您的子进程将逐字处理参数中的点和星号。尝试使用`sh child_process`代替，`child_process`看看你是否能得到更好的结果。

# php - 每个链接的 innerHTML 不起作用

> ID：11717287
> 
> 赞同：0
> 
> 时间：2012-07-30T07:45:10.723
> 
> 标签：php

我有以下代码

```
function DOMinnerHTML($element)
{
    $innerHTML="";
    $children=$element->childNodes;
    foreach($children as $child)
    {
        $tmp_dom=new DOMDocument();
        $tmp_dom->appendChild($tmp_dom->importNode($child,true));
        $innerHTML.=trim($tmp_dom->saveHTML());
    }
    return $innerHTML;
}

$doc=new DOMDocument();
$doc->loadHtmlFile('http://www.google.com/');
$links=$doc->getElementsByTagName('a');
foreach($links as $m)
{
    echo DOMinnerHTML($links[$m]).'<br />';
} 
```

它什么也不输出。

我该怎么做才能输出每个链接的内容`http://google.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:51:46.193

看起来是这样的：

```
echo DOMinnerHTML($links[$m]).'<br />'; 
```

应该是这样的：

```
echo DOMinnerHTML($m).'<br />'; 
```

# android - 创建新的android项目时出现分层父错误

> ID：11717294
> 
> 赞同：5
> 
> 时间：2012-07-30T07:45:37.297
> 
> 标签：android

当我创建新的 android 项目时，在“新建空白活动”中，向导显示如下错误 `Activity name must be specified`：

![在此处输入图像描述](../Images/c9d98b202345d78e29bd95211ea8933b.png)

这是什么错误？和分层的父母曾经是为了什么？如果我在 Hierarchical Parent 中键入一个字符串（例如：“test”），那么错误就会消失。

什么是`Error parsing XML: junk after document element`？此错误出现在我的布局 xml 文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T17:06:46.067

我有同样的问题。问题是 Eclipse/Android 插件。

您必须更新 Eclipse。

转到 Eclipse--> 帮助--> 检查更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:09:36.330

这可能是 adt 插件问题的情况。 [重新安装 adt 插件](http://developer.android.com/sdk/installing/installing-adt.html) 可能会解决此问题。但请记住，在安装 adt 插件时始终检查

> 在安装过程中联系所有更新站点以查找所需的软件

日食

# java - 识别图片上的 SWT 和 JFace 小部件

> ID：11717303
> 
> 赞同：1
> 
> 时间：2012-07-30T07:46:19.127
> 
> 标签：java, swt, jface, mockups

我创建了这个模型（见下文），使用通常的 java 外观，我知道作为用户。现在我想通过使用 SWT、JFace、Eclipse RCP 来实现这个模型。

笔记：

左侧的 NVV/RMV/KVG/RKH 应根据[手风琴模式](http://www.normansblog.de/demos/simple-jquery-accordion/)
运行 。选项卡 NVV、RMV、KVG 是模块的父选项卡，管理布局选项卡。
左侧的树形菜单打开右侧的选项卡

**问题：**

*   我应该使用哪些 SWT/JFace 类来实现这个模型？
*   你看到这个模型有什么问题吗？（关于不同的实现、可用性等）

![小样](../Images/38d475a3244b73fbbc8ce512d9753c3a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:12:52.587

您指定的大多数小部件在 Eclipse RCP 框架中都很容易获得。

首先你应该在这里查看一些教程：[vogella tutorials](http://www.vogella.com/eclipse.html)

除此之外，我强烈建议您使用 WindowBuilder，以便您可以相当轻松地设计 GUI：[WindowBuilder](http://www.eclipse.org/windowbuilder/)

对于顶部的选项卡文件夹（NVV/RMV...），您可以`TabFolder`像`TabItem`这样使用：

```
 tabFolder_1 = new TabFolder(this, SWT.NONE);
     tbtmNvv = new TabItem(tabFolder_1, SWT.NONE);
     tbtmNvv.setText("NVV");
     tbtmRmv = new TabItem(tabFolder_1, SWT.NONE);
     tbtmRmv.setText("RMV"); 
```

`this`代表`Composite`我的代码中的父级。`TabFolder`s 通过在其中放置 a 来工作，`Control`只是不要忘记调用该`setControl`方法以使其内容可见。`TabFolder`s 可以相互嵌套。或者，您可以将 RCP View-s 用于您的顶级选项卡。

对于中间的表格，您可以使用 JFace 组件，`TableViewer`例如：

```
 tableViewer = new TableViewer(tabFolder_1, SWT.BORDER | SWT.FULL_SELECTION);
    table = tableViewer.getTable();
    table.setLinesVisible(true);
    table.setHeaderVisible(true);
    tbtmRmv.setControl(table);

    tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
    tblclmnMyCol = tableViewerColumn.getColumn();
    tblclmnMyCol.setWidth(100);
    tblclmnMyCol.setText("My col"); 
```

如果您想知道如何将数据绑定到您的表，您应该查看我上面提到的教程。

对于手风琴，您可以`ExpandBar`这样使用：

```
 expandBar = new ExpandBar(this, SWT.NONE);

    xpndtmItem = new ExpandItem(expandBar, SWT.NONE);
    xpndtmItem.setText("Item 1");

    xpndtmItem_1 = new ExpandItem(expandBar, SWT.NONE);
    xpndtmItem_1.setText("Item2"); 
```

或 TreeViewer：

```
 treeViewer = new TreeViewer(composite, SWT.BORDER);
    tree = treeViewer.getTree();
    tree.setHeaderVisible(true);
    tree.setLinesVisible(true); 
```

你也可以将`TreeViewer`s 放在你的`ExpandBar`.

至于我通常坚持的布局，`GridLayout`这是一个好的多面手。

恐怕向您简要介绍如何使用这些组件/布局超出了 SO 答案的范围，但您始终可以查看我链接的教程，它们将帮助您在 Eclipse RCP 中的努力。

# ios - 为什么 NSFileSystemFreeSize 的值与 iOS 设置中报告的可用大小不同？

> ID：11717304
> 
> 赞同：1
> 
> 时间：2012-07-30T07:46:20.710
> 
> 标签：ios, storage

以下是我用来在 iOS 设备上为我的应用获取可用存储空间的方法：

```
NSDictionary *dict = [[NSFileManager defaultManager] fileSystemAttributesAtPath:@"/var"];
NSNumber *freeSpace = [dict valueForKey:@"NSFileSystemFreeSize"]; 
```

但是，该值`freeSpace`与“设置”应用程序中显示的值不对应。该值始终大于设置显示的值。例如，`freeSpace`大约为 600,000,000 字节，其中“设置”显示为 357 MB。

为什么会这样？如何获得与设置显示的值相同的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-12T02:02:16.507

我在带有 iOS 6.1.4 的 iPhone5 上得到了相同的结果。

```
double freeSpaceMB = -1.;     
long long freeSpace =
            [[[[NSFileManager defaultManager]
            attributesOfFileSystemForPath:NSHomeDirectory()
                                    error:nil] objectForKey:NSFileSystemFreeSize] longLongValue];
        freeSpaceMB = (freeSpace * 1.)/ (1024 * 1024); 
```

**X** - 来自设置的值（使用）

我总是得到**freeSpaceMB = X + 200。**

我想这是iOS中的保留空间。但这只是猜测。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-10T17:45:44.310

在 iOS 11 下，可以传递新的音量容量键，以`URL.resourceValues(forKeys:)`提供与设备设置中可用的值相匹配的值。

*   `static let volumeAvailableCapacityKey: URLResourceKey` 卷可用容量的密钥（以字节为单位）（只读）。

*   `static let volumeAvailableCapacityForImportantUsageKey: URLResourceKey` 用于存储重要资源的卷可用容量的密钥（以字节为单位）（只读）。

*   `static let volumeAvailableCapacityForOpportunisticUsageKey: URLResourceKey` 用于存储非必要资源的卷可用容量的密钥（以字节为单位）（只读）。

*   `static let volumeTotalCapacityKey: URLResourceKey` 卷总容量的键（以字节为单位）（只读）。

来自[苹果的文档](https://developer.apple.com/documentation/foundation/urlresourcekey/checking_volume_storage_capacity)：

> ### 概述
> 
> 在您尝试在本地存储大量数据之前，请先确认您有足够的存储容量。要获取卷的存储容量，您需要构造一个 URL（使用 URL 的实例），该 URL 引用要查询的卷上的对象，然后查询该卷。
> 
> ### 决定使用哪种查询类型
> 
> 要使用的查询类型取决于存储的内容。如果您根据用户请求或应用程序正常运行所需的资源（例如，用户将要观看的视频或游戏中下一关所需的资源）存储数据，请查询`volumeAvailableCapacityForImportantUsageKey`. 但是，如果您以更具预测性的方式下载数据（例如，下载用户最近观看的电视剧的新剧集），请查询`volumeAvailableCapacityForOpportunisticUsageKey`.
> 
> ### 构造查询
> 
> 使用此示例作为构建您自己的查询的指南：

```
let fileURL = URL(fileURLWithPath:"/")
do {
    let values = try fileURL.resourceValues(forKeys: [.volumeAvailableCapacityForImportantUsageKey])
    if let capacity = values.volumeAvailableCapacityForImportantUsage {
        print("Available capacity for important usage: \(capacity)")
    } else {
        print("Capacity is unavailable")
    }
} catch {
    print("Error retrieving capacity: \(error.localizedDescription)")
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T05:56:43.223

[昨天发布的另一个问题](https://stackoverflow.com/questions/13904324/wrong-file-system-infos)已作为该问题的副本关闭，并且该问题展示了您可能弄错的另一种方式。

那位提问者的做法是：

> ```
> uint64_t freeSpace = (uint64_t)[fileSystemAttributes objectForKey:NSFileSystemFreeSize];
> 
> NSLog(@"Free space in bytes: %lld.",freeSpace); 
> ```

他们将对象本身（更准确地说，对象在内存中的地址）视为空闲字节数。这是错误的；该对象是一个 NSNumber 对象，它包装了这样一个数字。正确的代码会向对象询问它`unsignedLongLongValue`的​​类型，它的类型正确，因此大到足以容纳正确的值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T15:12:38.900

我敢打赌，您正在使用 32 位整数或浮点类型来存储文件系统大小值。如果文件大小足够大，这将失败。相反，使用 unsigned long long 或 long double 类型来存储这些值。

有关如何准确读取这些文件大小的信息，请参阅[此答案](https://stackoverflow.com/a/8036586/19679)的更正版本。对该答案和其他答案的评论表明，这将返回一个与 iTunes 和其他工具报告的可用大小相匹配的值。

# android - 如何在 Android 中使用 HTML 标签更改文本的颜色

> ID：11717305
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:46:27.637
> 
> 标签：android, html

我有一个包含三个单词的字符串。我想在同一个文本视图中显示三个单词，但在不同的行中。为此，我使用了`<br>`标签。现在我想用红色显示最后一个单词。我尝试了很多代码，但没有任何对我有用。我的代码片段是

```
viewHolder.cutomerinfo.setText(
    customerDetail[0]+Html.fromHtml("<br>")+
    customerDetail[1]+Html.fromHtml("<br>")+
    Html.fromHtml("<font color='#ff0000'>")+
    customerDetail[2]+Html.fromHtml("</font>")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:03:53.890

这样做：代码：

```
String toshowstring = customerDetail[0]+customerDetail[1]+
                      "<font color='red'>"+customerDetail[2]+"</font>";
viewHolder.cutomerinfo.setText(Html.fromHtml(toshowstring)); 
```

这就是你想要的。^-^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:52:09.783

//只有一个 Html.fromHtml() 方法就足够了

```
 viewHolder.cutomerinfo.setText(
    customerDetail[0]+Html.fromHtml("<br>"+customerDetail[1]+
                                    "<br><font color='#ff0000'>"+
                                    customerDetail[2]+"</font>")); 
```

[参考：](https://stackoverflow.com/a/8152727/1012284)

# android - onItemClick 用于自定义 ArrayAdapter - 带有回收视图

> ID：11717311
> 
> 赞同：0
> 
> 时间：2012-07-30T07:46:55.670
> 
> 标签：android, listview, onitemclick

有没有人有一个很好的教程来实现`onItemClick()`由`ListView`自定义填充的`ArrayAdapter`？

我正在努力解决 Android 如何回收视图，以及如何影响所选视图（即 a `RelativeLayout`）的布局。我实现它的方式，我只是做一个简单的背景颜色更改，但每次我选择一行时，当我滚动时`ListView`，也会选择其他屏幕外项目。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:05:05.690

您可以找到很多带有适配器的自定义 Listview 的好示例。下面列出了一些示例：

(1)[自定义-listview-android](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)

(2) [android-custom-listview-with-image-and-text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

(3)[自定义阵列适配器](http://www.mkyong.com/android/android-listview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:00:20.890

看看[这个](https://stackoverflow.com/a/11693838/787375)答案。（视图回收完成的地方）的自定义代码`ArrayAdapter.getView()`可能对你有用，我试图实现类似的东西，它最后对我有用:)

# dll - LoadLibrary project.dll 失败。指定的模块无法找到

> ID：11717312
> 
> 赞同：9
> 
> 时间：2012-07-30T07:46:57.297
> 
> 标签：dll, atl, regsvr32

当我尝试注册我的 C++/ATL 项目的 32 位版本时

```
regsvr32 project.dll 
```

我收到此错误：

```
LoadLibrary("project.dll") failed - The specified module could not be found 
```

project.dll 是我在 Visual Studio 10 上使用 ATL 构建的 dll。

64 位版本注册良好。

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-30T08:28:21.110

我观察到这个完全相同的错误，但解决方案没有安装可再发行组件。根据depends.exe，所有依赖的DLL都存在于系统^(1上。)

就我而言，**KERNEL32.DLL**的图标略带红色。Depends.exe 没有提供太多解释，但四处挖掘发现系统上的 DLL 中缺少一个导入的函数。*要查看导入的函数，请在树视图中*选择依赖的 DLL ，然后在右侧面板中查找导入。按 PI 列排序以查看缺失导入的红色图标。

![看到缺少的导入](../Images/5bd7a0422140dfddc472fc84ee3b98be.png)

就我而言，缺少的功能是我悲伤的目标操作系统 Windows XP 上不存在的功能。由于我的程序不直接依赖于这个函数，我能够在我的项目中摆脱`#define`以下内容：

```
#define WINVER 0x0501
#define _WIN32_WINNT 0x0501 
```

使用这些宏进行编译使得有问题的函数没有在头文件中声明，因此不会在加载时导入。现在我可以使用`regsvr32`. 这当然是一个非常具体（也很幸运）的案例。我不依赖该导入或任何其他较新的 API，因此我可以重新定位项目。如果它不是系统 DLL，我将需要找到一个较新的版本，这很容易导致需要更新依赖关系图的整个子树。或者更糟糕的是，如果我依赖于缺失的导入，则需要进行一些认真的重构。

总结起来，这个错误信息²可能是由以下问题引起的：

1.  找不到或无法读取 DLL 文件。检查命令行。
2.  一些相关的 DLL 未找到或无法读取。
3.  某些依赖 DLL 中缺少某些导入。如果这些是系统 DLL，那么您很可能针对的是错误的 Windows 版本。如果这些是非系统 DLL，则需要安装它们的较新版本及其所有依赖项。

* * *

^(1.：除了 IESHIMS.DLL 和 WER.DLL 这显然是这个旧工具中的一个错误。
2.：或者真的，在特定系统上加载 DLL 的任何问题)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T07:59:21.063

在这种情况下，错误描述具有误导性。系统会找到您的 DLL (project.dll)，但您的 DLL 的一个（或多个）依赖项可能会丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T09:01:43.440

我刚安装

```
Microsoft Visual C++ 2010 Redistributable Package 
```

现在我可以安装dll了。

虽然这可行，但我对此不太满意，因为我不想必须在客户端上安装这个包才能让我的 dll 由他们工作。

# c# - 链接快速报告文件

> ID：11717313
> 
> 赞同：0
> 
> 时间：2012-07-30T07:46:57.427
> 
> 标签：c#, fastreport

我用我的 sql 数据设计了一个关于快速报告的表格。

现在我想将此文件链接到我的 C# 项目 - 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:54:31.330

您可以将此文件添加为嵌入式资源，并在运行时使用[Assembly.GetManifestResourceStream](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)加载它。

# ckeditor - ckeditor图片插件精细配置

> ID：11717319
> 
> 赞同：1
> 
> 时间：2012-07-30T07:47:31.503
> 
> 标签：ckeditor

可以配置图像插件对话框以更改默认值（例如，将对齐方式从右更改，HSpace 更改为某个值等），而无需实际更改插件的 javascript 代码？

cmbAlign 选择位于 image.js 中，似乎在一些长且嵌套的对象结构中，指定 UI。

引入更改的正确位置是什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-28T07:24:16.273

您应该查看 CKEditor Javascript API，它允许您修改编辑器而无需更改原始 javascript 代码，请参阅

[http://docs.cksource.com/ckeditor_api/index.html](http://docs.cksource.com/ckeditor_api/index.html)

# html - 图片下方的空格，以及 Outlook 中我的时事通讯模板中的 html 文本。

> ID：11717328
> 
> 赞同：1
> 
> 时间：2012-07-30T07:48:01.367
> 
> 标签：html, css, email

我的电子邮件活动有一些问题。我制作了所有具有正确宽度、高度属性的框，还将 img 行高设置为 0.1em 并将它们显示为块，所以问题就来了。这是什么？

每一个建议都会得到尊重。谢谢。

```
<table width="594" border="0" cellspacing="0" cellpadding="0">
<tbody><tr>
<td width="25" align="left" valign="top"></td>
    <td width="269" align="left" valign="bottom"> 
        <h1>{TITLE}</h1>
        <h2>{HOTEL} {HOTELCATEGORY}</h2>
        <p>{ROOM}</p>
        <p>{ACCOM}</p>
        <p>{START}</p>
        <p>{DATESTART} - {DATEEND}</p>
        <p>{DAYS} nap, {NIGHTS} éjszaka</p>
        <table border="0" cellpadding="0" cellspacing="0" width="230" height="67">
            <tr height="11">
                <td width="80" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_tl.png" width="80" height="11"></td>
                <td width="117" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_t.png" width="117" height="11"></td>
                <td width="33" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_tr.png" width="33" height="11"></td>
            </tr>
            <tr height="40">
                <td width="80" height="40" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_l.png" width="80" height="40"></td>
                <td width="117" height="40" align="center" valign="middle" bgcolor="#444444"><b class="priceboxb" style="margin: 0; padding: 0;">{PRICE}{CURRENCY}</b><span class="priceboxspan" style="margin: 0; padding: 0;">/fõ</span></td>
                <td width="33" height="40" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_r.png" width="33" height="40"></td>
            </tr>
            <tr height="16">
                <td width="80" height="16" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_bl.png" width="80" height="16"></td>
                <td width="117" height="16" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_b.png" width="117" height="16"></td>
                <td width="33" height="16" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/l_01_br.png" width="33" height="16"></td>
            </tr>
        </table>
    </td>
    <td width="300" align="right" valign="top"> 
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="10" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_tl.png"></td>
            <td width="278" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_t.png"></td>
            <td width="12" height="11" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_tr.png"></td>
        </tr>
        <tr>
            <td width="10" height="192" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_l.png"></td>
            <td width="278" height="192" class="imageholder"><img src="{IMGSRC}" width="278" height="192" class="image" style="width: 278pt; height: 192pt; border:0; margin:0; padding:0;"></td>
            <td width="12" height="192" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_r.png"></td>
        </tr>
        <tr>
            <td width="10" height="12" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_bl.png"></td>
            <td width="278" height="12" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_b.png"></td>
            <td width="12" height="12" align="left" valign="top"><img src="http://site.com/nwsltrv2/img/b_01_br.png"></td>
        </tr>
        </table>
    </td>
    <td width="0" align="left" valign="top"></td>
</tr>
</tbody></table> 
```

![这是 Outlook 中的最终视图](../Images/aa8f5459231288a75078bac4b7995dac.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:52:21.643

看起来像三个像素。如果您制作构成标签的图像会发生什么`display: block;`？

或者看看这个答案：[3px extra height on a div with an image inside](https://stackoverflow.com/questions/10658475/3px-extra-height-on-a-div-with-an-image-inside-it)

# django - Django模板上下文处理器与将参数传递给render_to_response

> ID：11717332
> 
> 赞同：1
> 
> 时间：2012-07-30T07:48:12.397
> 
> 标签：django, django-templates

我想使用一些自定义上下文处理器来渲染我的一些模板数据，而不是每次都将数据传递给 render_to_response 方法。

将许多上下文处理器添加到 django 项目时是否有任何缺点（例如内存使用）？

在使用上下文处理器而不是将数据传递给模板时是否有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:57:16.663

当您必须在大量模板中使用（几乎在每个模板中），例如用户，或 DEBUG 或其他参数，这些没有很多成本时，您必须使用上下文处理器。在其他情况下传递给 render_to_response

# android - Android 兼容性问题（Api 8、ActionbarSherlock）

> ID：11717334
> 
> 赞同：4
> 
> 时间：2012-07-30T07:48:32.330
> 
> 标签：android, actionbarsherlock

我正在尝试为我的项目设置一个基本结构，该结构应该在 API 级别 8 - 16 上运行，使用谷歌位置服务和 ActionBarSherlock。

[有关设置，请参阅我的其他问题。](https://stackoverflow.com/questions/11710544/configuring-the-right-android-api-level-for-my-project)

我用 Eclipse (Master-Detail-Flow) 生成了一个简单的活动。我的项目目前只有一个活动和一个片段。到目前为止，我所做的只是用它们的 ABS 对应物替换超类：

```
public class CouponListActivity extends SherlockFragmentActivity implements CouponListFragment.Callbacks {
...
} 
```

和

```
public class CouponListFragment extends SherlockListFragment {
...
} 
```

这是我正在使用的唯一一个布局元素

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:name="....activity.CouponListFragment"
    android:id="@+id/coupon_list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    tools:context=".CouponListActivity" /> 
```

这**在 API 16 上的模拟器上运行良好**，但**在另一个具有 API 8 的模拟器上失败**。

问题是我无法以任何有用的方式解释堆栈跟踪。我的代码似乎根本没有被触及......

```
java.lang.NullPointerException
    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
    at android.widget.ListView.makeAndAddView(ListView.java:1727)
    at android.widget.ListView.fillDown(ListView.java:652)
    at android.widget.ListView.fillFromTop(ListView.java:709)
    at android.widget.ListView.layoutChildren(ListView.java:1580)
    at android.widget.AbsListView.onLayout(AbsListView.java:1147)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    at android.view.View.layout(View.java:7035)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
```

我可以从哪里开始寻找问题？让我知道我是否可以提供更多信息。

**更新**：如果我排除 ABS 并尝试创建一个在 API 8 中运行的 List-Activity / -Fragment 组合，我有完全相同的堆栈跟踪。[这是项目](http://dl.dropbox.com/u/1206138/android/MyTestApp_zip.zip)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:19:41.563

查看源代码后，您正在使用`simple_list_item_activated_1`资源。这是 Android API 级别 11 的新功能，因此您的问题的解决方案是。

`onCreate`方法应该是这样的

```
@Override
 public void onCreate(final Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(), android.R.layout.simple_list_item_activated_1,android.R.id.text1, DummyContent.ITEMS));
 } 
```

由于这是 API 级别 11 的新功能，无论是否使用 ActionBarSherlock，您都会收到相同的错误。如果要使用，`simple_list_item_activated_1`则需要创建它的本地副本。对不起，来晚了

# shell - 在函数 awk 中声明的局部变量

> ID：11717336
> 
> 赞同：3
> 
> 时间：2012-07-30T07:48:33.717
> 
> 标签：shell, awk

我正在使用 awk。我想模块化我的代码，我想知道在函数中声明的变量是局部变量还是全局变量。例如

```
 main script
  update()

  function update()
  {
      array[1]="hi"
  } 
```

我想知道函数内部声明的数组是局部的还是全局的..如果不是局部的，那么..awk中局部变量的概念是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T07:52:09.907

它们是全球性的：

```
awk 'function update() { array[1]="hi" } BEGIN { update(); print array[1];}'
hi 
```

要使其成为本地化，您需要一个小技巧，将其作为参数传递：

```
awk 'function update(array) { array[1]="hi" } BEGIN { update(); print array[1];}' 
```

# android - 使用 Python 的类似 Android 的智能手机平台

> ID：11717347
> 
> 赞同：0
> 
> 时间：2012-07-30T07:49:05.173
> 
> 标签：android, mobile

我来自扎实的 C++ 背景，然后跳到 Java EE（JSF 开发）、.NET，现在我正在使用 Django + Python 开发 Web 和 Ubuntu 应用程序，最近我尝试使用 Android SDK。

我不得不说，在这些语言中，Python 对我来说是最有生产力的。这让我想知道......是否有任何移动平台专门使用 Python 和使用 Java 的 Android 一样多？

我知道 iOS 使用 Objective-C 并且很好......Windows Phone 使用 .NET..

（这不是语言与讨论）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:57:27.107

Symbian 使用 Python 和 Java ME，但没有智能手机使用 Symbian。

尽管正如 iNan 所说，您可以在 Android 上使用 python 和/或 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:54:54.843

如果 Jython 让您满意，我听说这可能有用：[http ://code.google.com/p/android-scripting/](http://code.google.com/p/android-scripting/)

# python - 谷歌驱动api python

> ID：11717351
> 
> 赞同：0
> 
> 时间：2012-07-30T07:49:13.870
> 
> 标签：python, google-drive-api

我想使用 google drive API 编写一个桌面 python 应用程序，但是 google 网站上的文档有点混乱，并且与 drive sdk 扭曲，这使得事情变得复杂并且难以找到有用的员工。任何人都可以提供一些有用的文档和一些示例代码吗？谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:53:24.497

使用 Twisted 时，您需要采用一种策略，即每个 Drive API 调用都被推迟到一个线程或线程池。我最近在这里写了一篇关于它的博客文章：

[http://unpythonic.blogspot.com/2012/07/calling-google-drive-api-and-other.html](http://unpythonic.blogspot.com/2012/07/calling-google-drive-api-and-other.html)

# google-apps-script - GoogleAppsScript for Calendar 与 Google CalendarAPI

> ID：11717354
> 
> 赞同：0
> 
> 时间：2012-07-30T07:49:24.110
> 
> 标签：google-apps-script, google-calendar-api

[Google Apps Script for Calendar](https://developers.google.com/apps-script/service_calendar)与[Google Calendar API](https://developers.google.com/google-apps/calendar/)的一般用例和注意事项有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:07:06.000

简单的 Google Apps 脚本用例是：

*   使用[Google Apps 站点](http://www.google.com/sites/overview.html)构建的站点，用于处理日历；
*   处理日历的 Google 电子表格的附加组件。

简单的 Google Calendar API 用例是：

*   一个独立的站点，使用例如 Java 或 ASP.NET 编写，可操作日历。
*   一个实用程序，使用与上述主题类似的语言和库编写，例如 Java 或 C#，它将内部公司日历系统数据库与日历同步。

# css - 使用 ie7 制表时将文本装饰设置为无

> ID：11717356
> 
> 赞同：2
> 
> 时间：2012-07-30T07:49:30.953
> 
> 标签：css, internet-explorer, cross-browser

我想`text-decoration: none`在 Internet Explorer 7 上设置选项卡。同时，我必须在将`text-decoration`鼠标悬停在元素上时显示。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:54:23.667

我实际上无法重现您的错误。看到这个小提琴：http: [//jsfiddle.net/NnKxx/1/](http://jsfiddle.net/NnKxx/1/)

在 IE7 中，这一切都很好——如果我选择没有下划线的元素，只有当我将鼠标悬停在它们上面时。这没有使用我上面提到的 CSS。

事情是在 IE7 中，`:focus`选择器不起作用，所以只需执行以下操作就足够了：

```
a {text-decoration:none;} /* this is important! */
a:hover {text-decoration:underline;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:50:09.660

这是 IE 浏览器中的默认行为。应用修复的边框：无，文本装饰：无和大纲：无；不起作用。

# unit-testing - 测试用例是每个需求、每个类还是每个方法？

> ID：11717358
> 
> 赞同：1
> 
> 时间：2012-07-30T07:49:36.060
> 
> 标签：unit-testing, testing, tdd

我开始学习单元测试。我知道如何进行单元测试，但我不知道每个测试的范围是什么。测试套件和测试方法也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:35:18.430

需求测试称为*验收测试*。通常你有一些用户故事，它指定需求，以及一些检查需求是否正确实现的场景。因此，您为每个场景编写验收测试。

回到*单元测试*。永远不要坚持正在测试的类方法，比如`TestAddMoney`. 因为测试是一种实时文档，它们应该描述你的班级在做什么，而不是如何。理想情况下，测试应该有描述性的名称，非技术人员可以查看。因此，根据您的类行为编写测试，例如`ShouldTransferMoneyToAnotherAccount`. 这种面向行为的测试更具可读性，如果您将`AddMoney`方法重命名为`InvestFunds`.

[Dan North 对行为驱动开发做了](http://dannorth.net/introducing-bdd/)很好的介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:37:30.687

如果您使用 Java，则可以查看以下两本书。这两本书都将为您提供更好地组织测试所需的所有复杂性。这两本书都有一个网站，可以让你公平地了解本书的内容。祝你好运并被测试感染；）

1.  [以测试为指导的不断发展的面向对象软件](http://www.growing-object-oriented-software.com/)
2.  [xUnit 测试模式](http://xunitpatterns.com/Test%20Organization.html)

# c# - 使用 C# 中的事件对数字进行阶乘

> ID：11717360
> 
> 赞同：0
> 
> 时间：2012-07-30T07:49:49.427
> 
> 标签：c#, events, factorial

我制作了一个计算数字阶乘的 Windows 窗体应用程序。一切都很好，但现在我必须使用事件来做到这一点。事件的概念对我来说是新的，过去三天我一直试图让它发挥作用，但无济于事。

我有表格：

```
public partial class Form1 : Form
{

    public Form1()
    {
       InitializeComponent();
    }

    ... some function declarations...

    //public event EventHandler ProgressBarChanged;

    public int OnProgressBarChanged()
    {
        progressBar1.Value++;
        return progressBar1.Value;
    }

    public void button2_Click(object sender, EventArgs e)
    {
        initialize();
        label3.Visible = false;
        int wait_time = telltime();
        int number = reading();

        Facto mth;

        if (checkBox1.Checked && checkBox2.Checked)
        {
            mth = new Facto(label3, wait_time, progressBar1);
        }
        else if(checkBox1.Checked==false && checkBox2.Checked)
        {
            mth = new Facto(label3,wait_time);
        }
        else if (checkBox1.Checked && checkBox2.Checked == false)
        {
            checkBox1.Checked = false;
            mth = new Facto();
        }
        else
        {
            mth = new Facto();
        }

        mth.Subs += new Eventhandler(OnProgressBarChanged); // Error. I don't understand why

        int result = mth.Factorial(number);

        string display = result.ToString();

        label3.Visible = true;

        label3.Text = display;
    } 
```

和`Facto`班级：

```
public class Facto
{
    public event EventHandler Subs;

    System.Windows.Forms.Label label_for_output;
    int wait_time;
    System.Windows.Forms.ProgressBar bar;

    public Facto()
    {

    }

    public Facto(System.Windows.Forms.Label l, int time)
    {
        label_for_output = l;
        wait_time = time;
    }

    public int Factorial(int number_to_calculate)
    {
        int Result;

        if (Subs != null)
        {
            Subs(this, new EventArgs());
        }

        System.Threading.Thread.Sleep(wait_time);
        if (number_to_calculate == 0)
        {
            return 1;
        }
        else
        {
            Result = (number_to_calculate * Factorial(number_to_calculate - 1));
            if (label_for_output != null)
            {
                label_for_output.Visible = true;
                label_for_output.Text = Result.ToString();
                label_for_output.Update();
            }
            else
                Console.WriteLine(Result);
            }

            System.Threading.Thread.Sleep(wait_time);
            return Result;
        }
    }

} 
```

该事件应在递归函数调用自身时触发。当事件被触发时，Form1 中的progressbar1.value 应该增加1（当它从递归返回时它也应该减少，但我更感兴趣的是让它首先工作）。

我怎样才能解决这个问题？

我真的很困惑，我只能找到显示消息或解释得很糟糕的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:53:55.577

您有此错误，因为您的方法签名不相等：.NET 假定您有 `public int OnProgressBarChanged()`as

```
public void OnProgressBarChanged(object o, EventArgs e); 
```

这是所有 .net 事件的标准签名。第一个参数 - 是引发事件的对象。第二个参数是事件数据。您可以创建从 EventErgs 继承的自定义类，以将数据传递给事件处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:05:44.807

对于此类任务，我建议使用带有 ProgressChanged 事件处理程序的 BackgroundWorker，以便在单独的线程上执行计算和 UI 更新。有关斐波那契数计算和进度条的类似示例，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

# spring - 如何对 jpa 存储库方法进行单元测试？

> ID：11717364
> 
> 赞同：4
> 
> 时间：2012-07-30T07:50:02.127
> 
> 标签：spring, unit-testing, jpa, repository, junit4

我编写了一个 JPA 存储库方法，现在我意识到**不可能进行单元测试**。

谁能建议**如何对以下方法进行单元测试**或**如何重构我的存储库**以使其可单元测试？

这是有问题的方法：

```
@Override
public List<Pli> findPlisByMultiField(String identifiant, Date dateReceptionFrom, Date dateReceptionTo, PaiementEnum paiement, AREnum ar, String numeroAR, FDVEnum FDV, ConteneurNum conteneurNum, StatutPli statut) {
    log.debug("findPlisByMultiField");

    CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    CriteriaQuery<Pli> c = criteriaBuilder.createQuery(Pli.class);
    Root<Pli> pli = c.from(Pli.class);

    List<Predicate> criteria = new ArrayList<Predicate>();

    if (identifiant != null && !identifiant.trim().equals("")) {
        ParameterExpression<String> parameterIdentifiant = criteriaBuilder.parameter(String.class, "identifiant");
        Predicate conditionIdentifiant = criteriaBuilder.like(pli.<String> get("identifiant"), parameterIdentifiant);
        criteria.add(conditionIdentifiant);
    }

    if (dateReceptionFrom != null && dateReceptionTo != null) {
        ParameterExpression<Date> parameterDateReceptionFrom = criteriaBuilder.parameter(Date.class, "dateReceptionFrom");
        ParameterExpression<Date> parameterDateReceptionTo = criteriaBuilder.parameter(Date.class, "dateReceptionTo");
        Predicate conditionDateReception = criteriaBuilder.between(pli.<Date> get("dateReception"), parameterDateReceptionFrom, parameterDateReceptionTo);
        criteria.add(conditionDateReception);
    }

    if (paiement != null) {
        if (paiement.equals(PaiementEnum.IsPaiement)) {
            Predicate conditionPaiementEnum = criteriaBuilder.equal(pli.<PaiementEnum> get("paiement"), true);
            criteria.add(conditionPaiementEnum);
        } else {
            Predicate conditionPaiementEnum = criteriaBuilder.equal(pli.<PaiementEnum> get("paiement"), false);
            criteria.add(conditionPaiementEnum);
        }
    }

    if (ar != null) {
        if (ar.equals(AREnum.IsAR)) {
            Predicate conditionAREnum = criteriaBuilder.equal(pli.<AREnum> get("AR"), true);
            criteria.add(conditionAREnum);
        } else {
            Predicate conditionAREnum = criteriaBuilder.equal(pli.<AREnum> get("AR"), false);
            criteria.add(conditionAREnum);
        }
    }

    if (numeroAR != null && !numeroAR.trim().equals("")) {
        ParameterExpression<String> parameterNumeroAR = criteriaBuilder.parameter(String.class, "numeroAR");
        Predicate conditionNumeroAR = criteriaBuilder.like(pli.<String> get("numeroAR"), parameterNumeroAR);
        criteria.add(conditionNumeroAR);
    }

    if (FDV != null) {
        if (FDV.equals(FDVEnum.IsFDV)) {
            Predicate conditionFDVEnum = criteriaBuilder.equal(pli.<FDVEnum> get("FDV"), true);
            criteria.add(conditionFDVEnum);
        } else {
            Predicate conditionFDVEnum = criteriaBuilder.equal(pli.<FDVEnum> get("FDV"), false);
            criteria.add(conditionFDVEnum);
        }
    }

    if (conteneurNum != null) {
        ParameterExpression<ConteneurNum> parameterConteneurNum = criteriaBuilder.parameter(ConteneurNum.class, "conteneurNum");
        Predicate conditionConteneurNum = criteriaBuilder.equal(pli.<ConteneurNum> get("conteneurNum"), parameterConteneurNum);
        criteria.add(conditionConteneurNum);
    }

    if (statut != null) {
        ParameterExpression<StatutPli> parameterStatut = criteriaBuilder.parameter(StatutPli.class, "statut");
        Predicate conditionStatut = criteriaBuilder.equal(pli.<StatutPli> get("statut"), parameterStatut);
        criteria.add(conditionStatut);
    }

    if (criteria.size() == 0) {
        return Pli.findAllPlis();
    } else if (criteria.size() == 1) {
        c.where(criteria.get(0));
    } else {
        c.where(criteriaBuilder.and(criteria.toArray(new Predicate[0])));
    }

    TypedQuery<Pli> q = em.createQuery(c);
    if (identifiant != null && !identifiant.trim().equals("")) {
        q.setParameter("identifiant", "%" + identifiant + "%");
    }
    if (dateReceptionFrom != null && dateReceptionTo != null) {
        q.setParameter("dateReceptionFrom", dateReceptionFrom);
        q.setParameter("dateReceptionTo", dateReceptionTo);
    }

    if (numeroAR != null && !numeroAR.trim().equals("")) {
        q.setParameter("numeroAR", "%" + numeroAR + "%");
    }

    if (conteneurNum != null) {
        q.setParameter("conteneurNum", conteneurNum);
    }

    if (statut != null) {
        q.setParameter("statut", statut);
    }

    return q.getResultList();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:05:38.727

好吧，我认为您无法按照严格规定对它进行单元测试，但是您可以使用内存数据库（注意 HSQL）进行测试，这样应用程序就不需要实际转到真实数据库仅用于测试。

这样，您将能够创建一个可以在 JUnit 中运行的自动化测试，例如，模拟可能只是其中的一些方法。

# php - 在 10 个不同的数据库系统 php 上测试 PDO 代码

> ID：11717365
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:50:04.390
> 
> 标签：php, pdo

我必须制作一个适用于 10 种不同数据库系统 Mysql、Sqlite、Oracle 等的 Web 应用程序。我需要检查我的 SQL 是否与所有这些数据库兼容。

我已经编写了代码并在 Mysql 上进行了测试，但是如何在其他数据库中进行测试呢？我应该在我的电脑上安装所有这些数据库吗？

有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:56:16.663

如果您想让您的 Web 应用程序在 10 个不同的数据库系统上运行，那么您必须针对这些系统进行测试。如果您只针对这 10 个中的一个进行测试，那么您只知道它适用于其中一个，而不是 10 个。

要针对所有 10 个数据库系统进行测试，您自然需要安装它们，然后针对这些安装运行您的应用程序的数据库测试套件。

我认为这非常简单明了。我无法想象比拥有这 10 个数据库系统并针对它们运行测试套件更容易。

如果您没有自动测试套件，请自己创建一个。因为对数据库进行手动测试——甚至在你发布版本之前是必要的（或者你让你的用户测试它）——对于你在软件中所做的每一次更改来说都是太多的工作。

# javascript - 带有滑动图片的动态 jQuery 菜单

> ID：11717368
> 
> 赞同：2
> 
> 时间：2012-07-30T07:50:13.253
> 
> 标签：javascript, jquery, jquery-ui

我需要制作一个动态 jQuery 菜单来显示产品。

将有一张带有文本和超链接的主图片，占屏幕的 60%，在它的右侧我需要三张小图片（一张在另一张上方，水平方向），屏幕宽度为 20%（但全部占用与主要高度相同）。

我需要动画方面的帮助。接下来是动画：右边的三张图片向上滑动，最上面的消失了，在最下面添加了一张新的（同时最上面消失了）。现在，消失的那一个成为了主要的。

我用 .slideUp 函数做了一个简单的解决方案，但这实际上并没有使 div 上升，而是它只是失去了它的高度，直到它变得不可见。这不是我想要的解决方案。

谢谢。

编辑：

我已经设法使用 jQuery.sliedUp 函数获得了一些解决方案，但我仍然没有得到客户要求的效果。

现在再稍微搜索一下，我发现jQuery UI隐藏功能扩展可以做到我想要的效果。

这是一个例子：http: [//jsfiddle.net/WMPRJ/](http://jsfiddle.net/WMPRJ/)

我现在的问题是，如果您单击顶部 div，当它向上滑动时，底部 div 不会跟随它并取而代之。我需要这样做。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:59:05.040

将当前的主要内容附加到缩略图的底部，然后向上滑动顶部`remove()`。获取其`src`属性并将其设置为主图像。

这里有一些（对不起，不是一个独立的示例）代码，可以让你到达你要去的地方。如果您真的花时间阅读它，您会发现它与我在前两句话中描述的完全一样。

```
$('.thumb').first().slideUp(function(){
  $('#main').attr('src', $(this).attr('src'));
  $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:25:08.613

如果这是作业，请附加**作业**标签。

我无法为您提供完整的 HTML 和 javascript，但可以提供一个想法。你有两个块。浮动右块；

```
Left Block - 60%.
Right Block - 20% (float:right) 
```

定义右和左块的高度并给出`overflow:hidden`右块。现在定义一个像这样的点击函数。

```
var nextAnimateImageId = 1;
$("#my_button").click(function{

jQuery("#my_image"+animateImageId).animate({height:'toggle'});
nextAnimateImageId  = nextAnimateImageId + 1;

}); 
```

我的想法是，如果你有 5 张图片，由于定义的高度和溢出：隐藏属性，只会显示 3 张。当您将第一个图像设置为 height=0 时（这是 toggle 所做的），由于空间被释放，第 4 个图像将出现，为您提供一个很好的向上滚动动画。

# exception - FileNotFoundException 将图像上传到 Oracle 数据库

> ID：11717374
> 
> 赞同：1
> 
> 时间：2012-07-30T07:50:44.470
> 
> 标签：exception, servlets, filenotfoundexception, servletexception, ojdbc

我制作了一个 servlet 程序来将图像插入 Oracle 数据库。程序如下。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class InsertImage extends HttpServlet {
    private static final long serialVersionUID = 1L;
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String url=request.getParameter("image");
        File image=new File(url);
        FileInputStream fis;
        PrintWriter pw=response.getWriter();
        try
        {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            String str = "jdbc:oracle:thin:@localhost:1521:XE";
            Connection con = DriverManager.getConnection(str,"system","root");
            PreparedStatement pstmt=con.prepareStatement("insert into insertimage(image) values(?)");
            fis = new FileInputStream(image);
            pstmt.setBinaryStream(1, (InputStream)fis, (int)(image.length()));
            int size=pstmt.executeUpdate();
            if(size>0)
            {
                pw.println("<html>Image Uploaded Successfully.</html>");
            }
            else
            {
                pw.println("<html>Image could not be uploaded.</html>");
            }
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
        catch(ClassNotFoundException e)
        {
            e.printStackTrace();
        }
    }
} 
```

输入来自的 HTML 页面是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    </head>
    <body>
        <form action="InsertImage" name="form1">
            INSERT IMAGE
            <input type="file" name="image"></input>
            <input type="submit" name="upload"></input>
        </form>
    </body>
</html> 
```

当我尝试从 HTML 页面运行此代码时，无论我输入什么图片，它总是抛出`FileNotFoundException`. 我不明白为什么我会得到这个。是`stacktrace`：

```
java.io.FileNotFoundException: Counter-Strike-Servers.jpg (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at InsertImage.doGet(InsertImage.java:39)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:580)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Unknown Source) 
```

我试图在 servlet 中打印 URL，但只得到了**shock.jpg**而不是完整的`filepath`. 也许完整`filepath`的没有到来，这就是找不到文件错误的原因。那么我怎样才能发送完整的`filepath`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:05:13.300

从 JSP/HTML 上传文件时，您必须将表单方法设置为`POST`并`encType`设置为`multipart/form-data`。（[HTTP 规范](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.3.3)）

```
<form action="InsertImage" method="post" encType="multipart/form-data" name="form1"> 
```

实现该`doPost`方法以获取相同的文件。您可能想看看[Apache Commons FileUpload](http://commons.apache.org/fileupload/) to upload files 和 Stack Overflow post *[How to upload files to server using JSP/Servlet?](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)* 了解更多详情。

我尝试了一种不使用 Apache Common FileUpload 上传文件的方法，它正在工作。

HTML：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    </head>
    <body>
        <form action="InsertImage" name="form1" method="post" enctype="multipart/form-data">
            INSERT IMAGE
            <input type="file" name="image"></input>
            <input type="submit" name="upload"></input>
        </form>

        </body>
        </html>

    </body>
</html> 
```

Servlet doPost：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String url=request.getParameter("image");
    InputStream is = request.getInputStream();
    BufferedReader reader = new BufferedReader(new InputStreamReader(request.getInputStream()));
    String line = null;
    PrintWriter pw=response.getWriter();
    pw.println("Reading file");
    while ((line = reader.readLine()) != null) {
         pw.println(line);
    }
    pw.flush();
} 
```

现在您必须根据需要解析文件内容。请参阅博文*[上传和存储文件](http://balusc.blogspot.in/2007/11/multipartfilter.html)*。但是，我强烈建议使用***Apache Commons FileUpload***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:16:57.903

它看起来像一个本地错误，因为它真的找不到`url`. 我建议通过打印出`url`String 并创建一个虚拟类来为该`doGet`方法提供手工请求/响应来进行调试，以确保问题出在程序本身还是在请求的某些意外传递/格式中（您可能想要评论为此方法的某些部分，例如连接和语句部分）。

**编辑：**虚拟类（或方法，在这种情况下）的示例：

```
private void testDoGet() {
    // I would suggest commenting out all the Connection and PreparedStatement
    // parts of the doGet method so you don't have to establish the connection.
    // - this is just to test if you can get to the image on your machine.
    HttpServletRequest request;
    //insert into request the image parameter with the string to the requested image
    HttpServletResponse response //TODO initialize with some class implementing it
    doGet(request, response);
    // if you want to, set a breakpoint somewhere here to check 
    // what's in the classes now        
} 
```

# android - DrawLine 在 android2.2 中不起作用，为什么？

> ID：11717375
> 
> 赞同：2
> 
> 时间：2012-07-30T07:50:44.743
> 
> 标签：android, draw, paint, android-canvas

当以下代码在模拟器上执行时`android 2.3`它可以工作，但是当它运行时`android 2.2`什么都没有出现......为什么？

```
public class BubbleView extends View {

    Paint paint,paint2;

    int pos, x2,y2;

    public BubbleView(Context context) {
        super(context);
        init();
    }

    private void init(){
        paint = new Paint();
        paint.setAntiAlias(true);
        paint.setStrokeWidth(5);
        paint.setTextSize(25);
        paint.setStyle(Paint.Style.STROKE);
        paint.setColor(Color.GREEN);

        paint2 = new Paint();
        paint2.setAntiAlias(true);
        paint2.setStrokeWidth(5);
        paint2.setTextSize(25);
        paint2.setStyle(Paint.Style.STROKE);
        paint2.setColor(Color.WHITE);
    }

    @Override
    public void onDraw(Canvas canvas){
        int x = getMeasuredWidth()/2;
        int y = getMeasuredHeight()/2;
        float r = Math.max(x, y)*0.6f;
        canvas.drawCircle(x, y, 12 , paint);
        canvas.drawCircle(x, y, r , paint);
        canvas.drawLine(x-r, y, x+r, y, paint);
        canvas.drawLine(x, y-r, x, y+r, paint);

    }

} 
```

# javascript - 谷歌分析_trackEvent问题

> ID：11717381
> 
> 赞同：2
> 
> 时间：2012-07-30T07:51:11.927
> 
> 标签：javascript, google-analytics

我已经在我的网站上添加了事件跟踪，我收到了 200 条回复，并且一切看起来都处于工作状态。我正在使用我编码的以下方法：

```
function track(event, action) {
        _gaq.push(['_trackEvent', 'Website Name and Section', event, action]);
    } 
```

并绑定它来点击事件来调用传递值的方法，如下所示：

```
track("Facebook Share", "click"); 
```

但是在谷歌分析上只显示记录的事件数量`(21,549)`，但没有显示在分解中？？？请看下面的截图：

![在此处输入图像描述](../Images/42bbed0d133eadb559c1e16817107cde.png)

请让我知道我可以做些什么来解决这个问题......因为它清楚地记录了它，但没有显示它并使其可用于查看事件信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:34:55.110

我通过确保使用最新的 GA 脚本、从 Google Analytics 控制台获取它并将其添加到结束`</head>`标记之前来修复它。

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'XX-XXXXXXX-X']); //Place correct account id
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我现有的跟踪事件代码 100% 有效！

```
function track(event, action) {
        _gaq.push(['_trackEvent', 'Website Name and Section', event, action]);
    } 
```

**用法 ：**

```
track("Facebook Share", "click"); 
```

# sharepoint - Sharepoint - 将 2 列链接到自动完成

> ID：11717382
> 
> 赞同：1
> 
> 时间：2012-07-30T07:51:21.397
> 
> 标签：sharepoint, lookup

我在 Sharepoint 中有一个包含 2 列的列表。“名和姓”。然后我有另一个列表，其中列出了有关员工的信息，其中也有这 2 列与以前的查询。

我希望，当您在此列表中的“名称”列中选择一个名称时，它旁边的“姓氏”列会立即与第一个列表中列出的关联姓氏一起完成。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:08:32.607

如果您使用 Visual Studio 执行此操作，请[单击此处](http://msdn.microsoft.com/en-us/library/ff717837.aspx)

使用 SharePoint 本身。（如果您已经提到“名称”列作为查找字段/列）

*   从“列表工具”>“列表”转到“列表设置”。

*   在“列”部分，您将看到“名称”查找列，
    单击它。

*   在“其他列设置”中，勾选“姓氏”复选框。单击确定。

现在您将自动生成“姓氏”列。

# ssis - 将执行 Sql 任务结果集对象传递给 For Each 循环容器

> ID：11717384
> 
> 赞同：1
> 
> 时间：2012-07-30T07:51:34.827
> 
> 标签：ssis

我在脚本任务中编写了一个 oracle 查询并将其分配给字符串变量。这是我的查询

```
string oracle_query = "SELECT bank_ID, Branch_ID, Trans_NUM, Trans_DT, convert(Varchar(25),quantity) AS quantity  FROM OPENQUERY(orcale_server_name,  'SELECT * "
                + "FROM oracletable" +
                 " where bank_ID =''" + Dts.Variables["User::bank_ID"].Value.ToString() + "'' AND Trans_DT = ''" + Dts.Variables["User::Trans_DT"].Value.ToString() + "'' AND quantity = " + Dts.Variables["User::quantity"].Value.ToString() + " AND Branch_ID = ''" + Dts.Variables["User::Branch_ID"].Value.ToString() + "'' ')"; 
```

此查询的结果已分配给我在包中声明的字符串变量

```
Dts.Variables["oraclequery"].Value = oracle_query; . 
```

这个查询的输出是

```
bank_ID  Branch_ID  Trans_Num  Trans_DT   Quantity  
12         13       12AS566    2012-01-01  4000 
```

基于 Trans_Num 列，我需要再更新一张表。

我可以使用 oledb TranFormation 而不是脚本任务，但是在 Oledb 源中传递运行参数时，没有数据到来。

因此，脚本任务的结果我已分配给 OracleQuery 变量，并在 Execute Sql Task 中作为源变量传递，并将结果集作为**Full Result Set**传递。

这个执行 SQl 任务结果集我已经传递给每个循环容器和变量索引，我已经分配了 OracleQuery Varibale。

但仍然没有数据填充

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:09:03.583

1.首先，您需要为从 oracle 查询中检索到的列创建变量

2.那么变量`oraclequery`应该是System.Object类型

3.在`resultSet`执行SQL任务选项卡中将结果分配给变量`oraclequery`

```
ResultName    VariableName 
 0            oraclequery 
```

4.然后在 ForEach 循环中使用`ADO Enumerator`并选择`ADO Object SourceVariable`oraclequery 并单击单选按钮`Rows in the First Table`

在 for each 循环的变量映射中，按照从查询中检索到的顺序映射列。

```
 Variable     Index 
  BankId       0
  Branch_ID    1 
 ....          .. 
```

现在您可以在放置在 Foreach 循环中的 a 内访问这些变量`DFT`，然后`OLEDB component`根据`Trans_Num`

有关更多详细信息，请参阅[本文](http://thesearchendshere.wordpress.com/category/exploring-ado-enumerator-in-execute-sql-task/)和[此](http://www.sqlis.com/post/The-Execute-SQL-Task.aspx)

# export - 导出谷歌图表？

> ID：11717387
> 
> 赞同：4
> 
> 时间：2012-07-30T07:51:47.683
> 
> 标签：export, google-visualization

我编写了这段代码来创建图表、表格和工具栏。

```
google.load("visualization", "1", { packages: ["corechart"] });
google.load('visualization', '1', { packages: ['table'] });
//google.setOnLoadCallback(drawChart);

function drawChart() {
    $.ajax({
        type: "GET",
        url: '@Url.Action("GunlukOkumalar", "Enerji")',
        data: "startDate=" + $('#start_date').val() + "&endDate=" + $('#end_date').val() + "&sayac_id=" + $("#sayaclar").val(), //belirli aralıklardaki veriyi cekmek için 

        success: function (result) {
            if (result.success) {
                var evalledData = eval("(" + result.chartData + ")");
                var opts = { curveType: "function", width: '100%', height: 500, pointSize: 5 };
                new google.visualization.LineChart($("#chart_div").get(0)).draw(new google.visualization.DataTable(evalledData, 0.5), opts);
                $('#chart_div').show();

                var visualization;
                var data;
                var options = { 'showRowNumber': true };
                data = new google.visualization.DataTable(evalledData, 0.5);
                // Set paging configuration options
                // Note: these options are changed by the UI controls in the example.
                options['page'] = 'enable';
                options['pageSize'] = 10;
                options['pagingSymbols'] = { prev: 'prev', next: 'next' };
                options['pagingButtonsConfiguration'] = 'auto';

                // Create and draw the visualization.
                visualization = new google.visualization.Table(document.getElementById('table'));
                visualization.draw(data, options);

                var components = [
                    { type: 'html', datasource: data },
                    { type: 'csv', datasource: data }
                ];

                var container = document.getElementById('toolbar_div');
                google.visualization.drawToolbar(container, components);

                return false;
            }
            else {
                $('#chart_div').html('<span style="color:red;"><b>' + result.Error + '</b></span>');
                $('#chart_div').show();

                $('#table').html('<span style="color:red;"><b>' + result.Error + '</b></span>');
                $('#table').show();
                return false;
            }
        }
    });
} 
```

[谷歌示例](https://developers.google.com/chart/interactive/docs/gallery/toolbar#Example)

```
function drawToolbar() {
  var components = [
      {type: 'igoogle', datasource: 'https://spreadsheets.google.com/tq?key=pCQbetd-CptHnwJEfo8tALA',
       gadget: 'https://www.google.com/ig/modules/pie-chart.xml',
       userprefs: {'3d': 1}},
      {type: 'html', datasource: 'https://spreadsheets.google.com/tq?key=pCQbetd-CptHnwJEfo8tALA'},
      {type: 'csv', datasource: 'https://spreadsheets.google.com/tq?key=pCQbetd-CptHnwJEfo8tALA'},
      {type: 'htmlcode', datasource: 'https://spreadsheets.google.com/tq?key=pCQbetd-CptHnwJEfo8tALA',
       gadget: 'https://www.google.com/ig/modules/pie-chart.xml',
       userprefs: {'3d': 1},
       style: 'width: 800px; height: 700px; border: 3px solid purple;'}
  ];

  var container = document.getElementById('toolbar_div');
  google.visualization.drawToolbar(container, components);
}; 
```

谷歌从 url 获取数据源，但我从控制器动态获取数据源。当我尝试导出时，它会将页面转发到另一个页面，如下所示：

```
http://localhost:49972/Enerji/%5Bobject%20Object%5D?tqx=out%3Acsv%3B 
```

如何将导出工具栏用于动态 Json 数据？有没有关于这个话题的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:59:46.390

我也有这个问题，经过大量拖网后我发现了这个！

*   [https://developers.google.com/chart/interactive/docs/dev/implementing_data_source](https://developers.google.com/chart/interactive/docs/dev/implementing_data_source)

我还没有实现它，但我认为这是要走的路。

# python - 尝试对 python httplib 中无法访问的网络进行套接字操作

> ID：11717393
> 
> 赞同：4
> 
> 时间：2012-07-30T07:52:14.433
> 
> 标签：python, django, rest, httplib

我正在尝试使用 httplib 从 django 创建一个 REST 客户端。但它拒绝连接我尝试了以下

```
import hashlib
import hmac
from django.shortcuts import render_to_response
from django.template import RequestContext

def loginAction(request):
    username=request.POST['email']
    password=request.POST['password']
    import httplib, urllib
    params = urllib.urlencode({'username': username})
    #hash username here to authenticate
    digest=hmac.new("qnscAdgRlkIhAUPY44oiexBKtQbGY0orf7OV1I50", str(request.POST['password']),hashlib.sha1).hexdigest()
    auth=username+":"+digest
    headers = {"Content-type": "application/json","Accept": "text/plain","Authorization":auth}
    conn = httplib.HTTPConnection("10.0.2.2",8000)
    conn.request("POST", "/api/ecp/profile/", params, headers) 
```

但给出以下错误

```
[Errno 10051] A socket operation was attempted to an unreachable network 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:56:25.810

该错误表明您正在运行此脚本的计算机无法访问目标 IP 地址 (10.0.2.2)，因为它没有配置从一个到另一个的网络路由。

这是您的内部网络的问题（10.xxx IP 地址始终是专用网络地址）。如果您在与您尝试访问的机器不同的网络上运行此脚本，则您需要一个公共 IP 地址来代替它。

# google-app-engine - 在 Appengine 应用中导出和导入 ODS 文件

> ID：11717397
> 
> 赞同：0
> 
> 时间：2012-07-30T07:52:26.350
> 
> 标签：google-app-engine, gwt, jakarta-ee, odf

我正在使用 gwt 和 Appengine 在 java 中开发应用程序。我的应用程序应该具备的一项功能是从 .ods 文件导入数据，并以 .ods 格式导出数据。我知道[jOpenDocument](http://www.jopendocument.org/) jar，但它不能与 Appengine 应用程序一起使用，因为它使用了一些 Appengine 受限类。请为完成此任务的替代方法提供任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:35:00.660

你可以使用谷歌文档。将您的 ODS 文件流式传输到 Google Docs，同时转换为 Google Docs 原生格式，使用 Google Docs API 处理数据并以 ODS 格式从 Google Docs 导出。

如果您的 ODS 中有过于复杂的项目（如图表、宏等），这可能不起作用，因为转换会在那里引起问题。但是对于列中的普通数据，这可能有效。

# iphone - 如何在iphone中将数据插入数据库

> ID：11717400
> 
> 赞同：0
> 
> 时间：2012-07-30T07:52:36.930
> 
> 标签：iphone, xcode, sqlite

我正在使用以下代码将数据插入数据库，但未将数据插入数据库中我正在使用以下代码

我正在将数据插入 iphone 应用程序，但它没有插入

我有表survey_question_master（question_id，question_text，question_type）

```
- (void) addCoffee {
    if(addStmt == nil) {
        const char *sql = "insert into survey_question_master(question_text,question_type) Values( ? ,?)";

        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(addStmt, 1, [question_text UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStmt, 2, [question_type UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStmt))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        question_ID = sqlite3_last_insert_rowid(database);

    //Reset the add statement.
    sqlite3_reset(addStmt);
}

   - (void) addCoffee:(DataController *)coffeeObj {

    //Add it to the database.
    [coffeeObj addCoffee];
   //Add it to the coffee array.
    [coffeeArray addObject:coffeeObj];
     NSLog(@"Succeessfully Added");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:57:12.917

```
- (NSString *) getDBPath 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"database.sqlite"];
}

-(void)SaveData:(NSMutableArray *)insertDataArray
{

    sqlite3_stmt *stmt;
    const char *dbPath = [[self getDBPath] UTF8String];
    if(sqlite3_open(dbPath, &database)==SQLITE_OK)
    {
        NSString *insertSQL = [NSString stringWithFormat:@"insert into items (c1,c2,c3,c4 , c5 ,c6,c7,c8,c9) values (\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\",\"%@\")",[insertDataArray objectAtIndex:0],[insertDataArray objectAtIndex:1],[insertDataArray objectAtIndex:2],[insertDataArray objectAtIndex:3],[insertDataArray objectAtIndex:4],[insertDataArray objectAtIndex:5],[insertDataArray objectAtIndex:6],[insertDataArray objectAtIndex:7],[insertDataArray objectAtIndex:8]];

        NSLog(@"%@",insertSQL);
        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_prepare_v2(database, insert_stmt, -1, &stmt, NULL);

        if(sqlite3_step(stmt)==SQLITE_DONE)
        {
            NSLog(@"insert success");
        }
        else
        {
            NSLog(@"insert un success");
            NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
        }
        int success=sqlite3_step(stmt);

        if (success == SQLITE_ERROR) 
        {
            NSAssert1(0, @"Error: failed to insert into the database with message '%s'.", sqlite3_errmsg(database));
        }        sqlite3_finalize(stmt);
        sqlite3_close(database);

    }

} 
```

# ios - 具有 3 种颜色的 CGGradient

> ID：11717410
> 
> 赞同：1
> 
> 时间：2012-07-30T07:53:51.300
> 
> 标签：ios, core-graphics

如何用 3 种颜色绘制 CGGradient？

我有一个像这样的数组：

```
CFArrayRef colors = (__bridge CFArrayRef) [NSArray arrayWithObjects:(id)lightGradientColor.CGColor,
                                           (id)darkGradientColor.CGColor, (id)lightGradientColor.CGColor,
                                           nil]; 
```

但我没有看到中间的深色，顶部和底部有光，而只是顶部有光，直到底部都是黑暗的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:18:30.630

您是否尝试过指定/验证颜色的位置？范围是 [0...1]：

```
const CGFloat locations[3] = {0.0, 0.5, 1.0};
CGGradientRef grad = CGGradientCreateWithColors(colorspace, colors, locations); 
```

注意：上面的位置应该与传递参数`0`的位置相同。`locations`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T14:04:35.600

使用 CGGradient 而不是 CAGardientLayer 传递多种颜色以获得更平滑的结果：

A. 创建一个自定义 UIView 类，在标题中使用 @property NSArray * 颜色。在实现文件中，粘贴以下 drawRect 方法。

```
-(void)drawRect:(CGRect)rect {

    //1\. create vars
    float increment = 1.0f / (colours.count-1);
    CGFloat * locations = (CGFloat *)malloc((int)colours.count*sizeof(CGFloat));
    CFMutableArrayRef mref = CFArrayCreateMutable(kCFAllocatorDefault, 0, &kCFTypeArrayCallBacks);

    //2\. go through the colours, creating cgColors and locations
    for (int n = 0; n < colours.count; n++){
        CFArrayAppendValue(mref, (id)[colours[n] CGColor]);
        locations[n]=(n*increment);
    }

    //3\. create gradient
    CGContextRef ref = UIGraphicsGetCurrentContext();
    CGColorSpaceRef spaceRef = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradientRef = CGGradientCreateWithColors(spaceRef, mref, locations);
    CGContextDrawLinearGradient(ref, gradientRef, CGPointMake(0.0, 0.0), CGPointMake(0.0, self.frame.size.height), kCGGradientDrawsAfterEndLocation);
    CGColorSpaceRelease(spaceRef);
    CGGradientRelease(gradientRef);
} 
```

B. 在你想使用自定义类的 viewController 中，初始化它，设置框架和它的颜色。它适用于不止一种颜色，在这种情况下从上到下运行。

```
Background * bg = [Background new];
[bg setFrame:self.view.bounds];
[bg setColours:@[[UIColor blueColor],[UIColor purpleColor]]];
[self.view addSubview:bg]; 
```

这是一个比使用 CAGradientLayer 更平滑的渐变，如果将 alpha 放在颜色上会更明显：

[![CGGradient](../Images/457eb9717804c33dcfd60c48f236d975.png)](https://i.stack.imgur.com/O0ge1.png) [![CAGradientLayer](../Images/3b7a0bcdf8565177704715e35df8c33b.png)](https://i.stack.imgur.com/8QdUK.png)

# node.js - nodejs express-服务器的get方法获取3个参数

> ID：11717413
> 
> 赞同：2
> 
> 时间：2012-07-30T07:54:03.530
> 
> 标签：node.js, express

你能帮我理解下面的代码吗？似乎这里的 get 方法接收 3 个参数而不是 2.. 它对作为第三个参数提供给它的对象做了什么？

```
app.get('/query', function(req, res) {
                console.error('we shouldn't be here');
                res.writeHead(500);
                res.end('we shouldn't be here' + req.url);
            },
            {
                id: 'my_id',
                name: 'query',
                usage: 'get query',
                example: 'get query',
                params: {},
                broadcast: true, 
                response: { representations : [ 'application/json' ] }
            }
        ); 
```

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:53:49.117

这似乎没有正确编写。在 Express 中，请求处理程序可以采用第三个参数，它是一个函数（`next()`如果处理程序决定不处理请求，通常会调用它（从而将请求传递给您定义的下一个处理程序）。但是在您的示例中，第三个参数是对象而不是函数，它实际上并没有传递给您的请求处理程序..

您的代码可能基于使用非常早期但现已过时的 Express 版本的示例。

# c# - 清除私人收藏或将其设置为空？

> ID：11717416
> 
> 赞同：8
> 
> 时间：2012-07-30T07:54:17.550
> 
> 标签：c#, collections, garbage-collection, null

我有一个可变类，里面有一个私有`List<T>`字段。在`Reset()`我的类的方法中，我应该使用它的`Clear()`方法清除列表还是只为其字段分配一个新列表？请注意，该列表不是公开的，仅由类本身使用。因此，分配一个新列表应该使旧列表无法访问。由于该`Clear()`方法[是一个 O(n) 操作](http://msdn.microsoft.com/en-us/library/dwb5h52a.aspx "List<T>.Clear 方法 - MSDN")，我想知道仅在其上分配一个新列表的缺点是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T07:58:28.647

我能想到的唯一缺点是，如果您需要再次使用该列表，则必须为其分配新空间。

取消它只会使列表及其内容（假设没有其他引用）符合 GC 条件。清除它会删除项目，但保留分配的内存。

就我个人而言，我倾向于将它归零，因为即使我再次需要它，大小也会完全改变。

**更新：**关于下面的评论，您声明这些对象将在对象池中进行管理。我建议创建一个小型分析控制台应用程序来获得最终答案。现在讨论的是您的实现细节和对象池的预期用途，这很容易改变答案。

一般来说，如果您的列表长度变化不大并且总是需要，我会`Clear`避免为列表分配新内存。如果列表长度可能会发生很大变化，或者有时使用很少 - 我倾向于将其归零以回收内存并通过列表的延迟实例化获得一些小好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:01:20.270

那么为什么为空呢？这将为您解决问题，让旧列表留在堆上进行垃圾收集，而访问该列表的现有方法可以继续在新的空列表上运行：

```
this.FooList = new List<Foo>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:10:34.227

在`Reset`调用之后，我会让对象处于调用构造函数之后的相同状态。

如果您的构造函数创建了一个新的空`List`，那么就这样做。如果不成功`null`。

# flyway - Flyway 迁移 Oracle PL/SQL 转储

> ID：11717417
> 
> 赞同：1
> 
> 时间：2012-07-30T07:54:18.523
> 
> 标签：flyway

Flyway 提供了一个 oracle pl/sql 解析器，那么是否可以使用 pl/sql 转储 (.pde) 进行迁移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:56:10.033

转储必须为 .sql 格式。不支持二进制导出。

# ios - IOS后台应用可以使用库定期下载资源吗？

> ID：11717420
> 
> 赞同：1
> 
> 时间：2012-07-30T07:54:25.417
> 
> 标签：ios, cocoa-touch

我正在为应用程序工作一个可可触摸静态库，该库具有在一段时间内通过 NSOperation 下载网络资源的功能，并提供一些方法。

我知道 IOS 应用程序进入后台是有限的，（比如主线程 5 秒，长任务 10 分钟......）所以我想知道如果某些应用程序使用了我在后台输入的库，我的库的周期下载任务会被终止还是活着？并且该应用程序还成功使用了我的库的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:44:56.857

将移动到后台想象为让您的应用程序“冻干” - 在那一刻所有状态都被冻结。当您的应用程序移动到前台时，应用程序开始使用现在有些过时的信息运行。NSTimers 等将继续工作，但最后一次射击和下一次射击之间的“差距”将是巨大的。[我相信（但不记得肯定）如果你将计时器设置为 2 分钟，然后你在剩下 1 分钟的时候进入后台比如说 10 分钟，当你移到前台时，计时器会立即触发]。

我最终做的是保留一个具有最后一次触发时间的 NSDate 对象——这样我就可以检测到由于移动到后台而导致的大间隙——并采取适当的措施。

请注意，正在进行的网络提取等应该只返回超时状态 - 但同样，如果您在启动提取时保留 NSDate，您可以检测到这种情况。

# cakephp - 如何识别 CakePHP 中的活动菜单链接

> ID：11717422
> 
> 赞同：9
> 
> 时间：2012-07-30T07:54:30.583
> 
> 标签：cakephp, accordion

我正在为管理侧边栏创建手风琴布局。现在我需要识别活动链接并向该链接添加一个类`active`。这是我的代码：

```
<div class="accordion-group">
<div class="accordion-heading">
    <a href="#collapseSeven" data-parent="#side_accordion" data-toggle="collapse" class="accordion-toggle">
        <i class="icon-th"></i> Gallery Manager
    </a>
</div>
<div class="accordion-body collapse" id="collapseSeven">
    <div class="accordion-inner">
        <ul class="nav nav-list">
            <li>
                <?php echo $this->Html->link('View All',array('controller' => 'gallaries', 'action' => 'index'));?>
            </li>
            <li>
                <?php echo $this->Html->link('Add New',array('controller' => 'gallaries', 'action' => 'add'));?>
            </li>
        </ul>
        </div>
    </div>
</div> 
```

做这个的最好方式是什么？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:49:14.207

我找到了解决方案：

```
$url = $this->Html->url('INPUT_THE_URL') ;
$active = $this->request->here == $url? true: false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T20:51:00.813

要检查给定 URL 当前是否在 Cakephp 2.x 中处于活动状态，您应该检查它是否被规范化（在[Router::normalize()](http://api.cakephp.org/2.6/class-Router.html#_normalize)的意义上）形式与当前请求的 URL 的规范化形式相同（在某种意义上) [`$this->request->here`](http://api.cakephp.org/2.6/class-CakeRequest.html#_here)。

```
$currentUrl = Router::normalize($this->request->here);
$checkedUrl = Router::normalize($myUrl);
$isActive = $currentUrl === $checkedUrl; 
```

有时，如果当前显示了子项，您可能希望松散匹配以在菜单中将页面显示为活动的。认为您想`/fruits/`在浏览 Banana 详细信息网站时将您的菜单链接显示为活动的水果概览网站`/fruits/banana/`。您可以通过仅查找部分匹配来轻松实现此目的。

```
$isActive = (0 === strpos($currentUrl, $checkedUrl)); 
```

当然，您的匹配可能会变得更加复杂，例如，如果您大量使用命名参数等并希望将其反映在您的菜单中，但您应该从这里找到自己的方式。

您的特定问题的解决方案可能如下所示：

```
$currentUrl = Router::normalize($this->request->here);
$links = array(
    array(
        'label' => __('View All'),
        'url' => array('controller' => 'galleries', 'action' => 'index'),
    ),
    array(
        'label' => __('Add New'),
        'url' => array('controller' => 'galleries', 'action' => 'add'),
    ),
    /* ... */
);

foreach ($links as $link) {
    $linkLabel = $link['label'];
    $linkUrl = Router::url($link['url']);
    $linkHtml = $this->Html->link($linkLabel, $linkUrl);

    $linkActive = $currentUrl === $linkUrl;

    echo $this->Html->tag('li', $linkHtml, array(
        'class' => $linkActive ? 'active' : '',
        'escape' => false, // to not escape anchor markup
    ));
} 
```

为了让您的生活更轻松一点，甚至不考虑这个问题，您还可以使用其他人构建的 Helper 来创建菜单，例如[torifat/cake-menu_builder](https://github.com/torifat/cake-menu_builder)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T08:39:47.487

有很多方法，这里有一些将类添加到容器中

```
<li <?php echo ($url == 'users/account')? 'class="current"' : ''?>>
<li <?php echo (preg_match("/addresses/", $url))? 'class="current"' : ''?>>
<li <?php echo ($this->params['controller'] == 'attributes')? 'class="current"' : ''?>> 
```

或者你可以将它传递到`$options`

```
$options = array();
if($this->controller == 'mycontroller' && $this->action == 'myaction'){
  $options = array_merge($options, array('class'=>'active'));
}
echo $this->Html->link('Title', '/url', $options); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-17T04:48:08.433

这里添加活动类的简单方法：

```
<ul class="nav nav-list">
    <li class="<?php echo (($this->params['controller']==='gallaries')&&($this->params['action']=='index') )?'active' :'' ?>">
            <?php echo $this->Html->link('View All',array('controller' => 'gallaries', 'action' => 'index'));?>
    </li>
    <li class="<?php echo (($this->params['controller']==='gallaries')&& ($this->params['action']=='add') )?'active' :'' ?>">
            <?php echo $this->Html->link('Add New',array('controller' => 'gallaries', 'action' => 'add'));?>
    </li>
</ul> 
```

我认为这会对你有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-07T09:47:59.963

我知道这已经很老了，但我找到了一个很好的解决方案。

根据费萨尔的回答，我编写了自己的简单助手：

```
App::uses('AppHelper', 'View/AppHelper');

class PVHtmlHelper extends AppHelper {

    public $helpers = array('Html');

    public function link($title = null, $url = null, $options) {

        if ($title == null || $url == null)
            return;

        $class = (($this->params['controller']===$url['controller']) && ($this->params['action']==$url['action']) )?'active' :'';

        echo "<li class='" . $class . "'>" . $this->Html->link($title, $url, $options) . "</li>";
    }

} 
```

也许您需要修改`echo <li>`函数内部以满足您的需求。

例子：

```
echo $this->PVHtml->link('Login', array('controller' => 'users', 'action' => 'login')); 
```

# grid - 自定义网格视图

> ID：11717423
> 
> 赞同：1
> 
> 时间：2012-07-30T07:54:36.530
> 
> 标签：grid, customization, android-view

我想创建一个架子视图。我也探索了各种代码，但这些代码非常复杂。我有一个实现相同的想法，但我不确定。我们可以将背景绘制到网格行明智吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:39:42.230

经过探索，我得到了解决方案。解决方案需要两个步骤：

1.创建扩展 GridView 类的类。

2.将该类添加到需要显示网格视图的布局中。

为了更好地理解“http://erikwalltinsen.wordpress.com/2010/11/08/android-row-background-in-gridview/”将对您有所帮助。

# svn - svn post commit hook 仅适用于里程碑

> ID：11717426
> 
> 赞同：2
> 
> 时间：2012-07-30T07:54:50.083
> 
> 标签：svn, post-commit-hook

我们有（希望有）以下设置：

网站 + Svn 在一台服务器上

和本地机器来开发和测试网站。

我找到了提交后挂钩信息（德语）：[http](http://www.yourhelpcenter.de/2010/07/svn-nach-einem-commit-automatisch-die-webseite-aktualisieren-post-commit-hook/) ://www.yourhelpcenter.de/2010/07/svn-nach-einem-commit-automatisch-die-webseite-aktualisieren-post-commit-hook/基本上更新了每次提交的网站。

和[svn post-commit 钩子：仅当某些文件已更改时才更新](https://stackoverflow.com/questions/9068905/svn-post-commit-hook-update-only-if-certain-file-has-changed)，该文件几乎归档了我正在搜索的内容。

我们只想提交到 svn，然后将稳定/抛光版本（即里程碑）合并到更新网站的分支中。

有可能存档吗？有没有办法检查合并是否完成？如果你愿意的话，一个合并后的钩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:02:46.823

将所有更改提交到开发分支并仅将经过验证的更改合并到主干呢？

然后你可以设置你的提交后挂钩只关注主干，这样你只在合并补丁时更新你的站点，即当你验证当前状态为稳定版本时。

您也可以反过来，将所有更改提交到主干（和/或其他分支）并将想要的更改合并到“稳定”分支......

# python - tkinter 强制缩进

> ID：11717428
> 
> 赞同：1
> 
> 时间：2012-07-30T07:55:16.867
> 
> 标签：python, tkinter

我正在寻求帮助 - 我正在更新我的 Tkinter wiki ( [http://sourceforge.net/projects/infolder/](http://sourceforge.net/projects/infolder/) ) 试图添加一些折叠/大纲功能。为了让它工作，我需要在文本小部件（所有操作发生的主窗口）中放置一些指示折叠的不可删除符号（例如，指示隐藏文本行的小三角形图像）。

不幸的是，我从这些问答中注意到，在 Tkinter 中创建不可删除的内容并不容易：

[如何将文本小部件的一部分标记为只读？](https://stackoverflow.com/questions/11180130/how-can-you-mark-a-portion-of-a-text-widget-as-readonly/11180132#11180132)

[tkinter 中不可删除的文本](https://stackoverflow.com/questions/7725009/unremovable-text-in-tkinter)

作为第二个选项，我可以尝试通过强制缩进显示折叠级别，例如，如果我处于一层深度，则行首不在第 1 列而是在第 5 列...

这在 Tkinter 中是可能的，没有太多的工作？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:09:07.243

您的问题说不可删除的区域“不容易”，但您还通过链接到显示如何的答案来证明它们是可能的。那么，你在问什么问题？

至于“强制缩进”，看`lmargin1`和`lmargin2`标签属性。

# c# - 检索存储在长数据类型中的图像

> ID：11717430
> 
> 赞同：1
> 
> 时间：2012-07-30T07:55:29.567
> 
> 标签：c#, oracle10g

我有一个 Web 应用程序，在 oracle10g 中有一个表，其结构如下：

```
Column Name       DataType
UserImage         long 
```

我的问题是我应该如何在以长格式存储的 aspx 页面上显示图像？

如果数据类型是 BLOB 或 CLOB，那么它可能更容易，但它存储在 long 中。

我无法更改数据类型，因为这是第三方数据库。

请建议我如何实现这一目标。解决方案可以使用 Oracle 或 C#，我都可以。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:58:06.470

您不能以“长”数据类型存储图像。

相反 - 保存键值对的静态列表，每对定义图像的索引（例如，从 1 到 n），值保存图像的文件名。

例如，下面的伪代码演示了一种类似的方法（应该在应用程序的客户端/服务器端实现，而不是在数据库中

```
SWITCH (USERIMAGE)
    CASE 1:
         SETIMAGE("IMAGES/IMAGE_NUMBER_ONE.JPG");
         BREAK:
    CASE 2:
         SETIMAGE("IMAGES/IMAGE_NUMBER_TWO.JPG");
         BREAK: 
```

等等。

另一种解决方案：

假设您的第一个表称为“Table1”。在您的数据库中创建一个名为 my_images 的新表

```
Column name     Column type       Comments
UserImage       LONG              Foreign key to Table1.UserImage
ImageData       BLOB 
```

和，

```
SELECT t1.ImageData FROM Table1 t1, my_images mi 
WHERE t1.UserImage == mi.UserImage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:07:19.070

您发布的“块”字符似乎是 TIFF 图像。这给出了如何存储图像的想法。事实上，二进制图像数据似乎是作为字符数据存储的。这当然是完全不受支持且非常脆弱的。我建议尽快转换它。

同时，我可以提出两种检索数据的方法，因此我不能保证任何一种都有效。

但是方法容易受到字符集的影响：如果涉及两个或多个字符集，您的数据将被转换并因此被破坏。两者都容易受到某些数据类型的最大长度的影响。

**方法一：**

尝试通过 RAW 数据类型并将其作为字节数组检索。它当然限于 32'000 个字符，甚至可能更少。

```
SELECT UTL_RAW.CAST_TO_RAW(UserImage) FROM UNNAMED_TABLE WHERE ... 
```

在 C# 方面，您应该获得一个[OracleBinary](http://docs.oracle.com/cd/B28359_01/win.111/b28375/OracleBinaryStructure.htm)或`byte[]`实例。

**方法二：**

尝试将其作为字符串检索。[然后使用原始编码（ Encoding.GetBytes](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx) ）将字符串转换为字节数组。运气好的话，可以恢复原始数据。

# xml - 创建 RSS 提要 JSF 2.0？

> ID：11717431
> 
> 赞同：3
> 
> 时间：2012-07-30T07:55:31.110
> 
> 标签：xml, model-view-controller, jsf-2, rss

我正在尝试在使用 JSF 2.0 构建的站点上提供 RSS 提要。在我开始自己编写代码之前，我想我会问你们是否有标准的方法来做到这一点？谷歌搜索了一下并没有带来任何结果，但是我也偶尔使用 CakePHP，在那里你可以在同一个模型（xhtml、xml、csv 等等）上使用不同的视图，这完全有意义，因为这就是使用 MVC 模式就是这样。有没有我可以使用的标准布局、组件或类似的东西？提前谢谢你们，每一个提示都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:14:24.080

我对 JSF 不是很熟悉——但是我最近使用 Spring 3（它在内部使用了非常有用的 ROME 库）非常快速地实现了一些 RSS 提要。

我特别使用了 Spring 3 的 org.springframework.web.servlet.view.feedAbstractRssFeedView，您可以扩展它以轻松地将您的域对象转换为 RSS 视图。

很棒的是 Spring 具有其他抽象视图（例如 Atom 或 JSON），可以轻松地将您的数据转换为其他格式以供 RESTful 使用。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T07:24:19.197

您可以使用[Mashups4JSF](https://code.google.com/p/mashups4jsf/)

**Mashups4JSF**是一个开源项目，旨在将 Mashup 服务与 Java 和 JSF 世界集成。JSF 开发人员将能够通过使用简单的标签来构建丰富的定制混搭。Mashups4JSF 的目标是拥有一组集成的 Mashup 标记和 API。Mashups4JSF 允许通过使用@Feed 批注对应用程序域类进行批注，将Java 企业应用程序数据导出为Mashup 提要。

**Mashups4JSF 1.0.0 提供以下功能**

```
Creating RSS Mashup feed sources in JSF applications using @Feed annotations. 

Creating ATOM Mashup feed sources in JSF applications using @Feed annotations. 

Reading RSS, Atom and JSON feed formats inside JSF application by using rssFeedReader, atomFeedReader, and jsonFeedReader components.

Creating Rich Google Maps with all of map details (Markers, Notes, Graphics, ...etc) declaratively using GMaps4JSF.

Getting yahoo weather information using yahooWeather component.

Performing public search in YouTube Videos using youTubeVideoList component.

Performing public search in Google using googleSearchList component.

Performing public search in Twitter using twitterSearchList component.

Performing public search in Digg using diggSearchList component.

Pretty Integration with Google Location Services. 
```

# iphone - 使用 FMDB 从 Sqlite 数据库中延迟读取

> ID：11717432
> 
> 赞同：2
> 
> 时间：2012-07-30T07:55:33.647
> 
> 标签：iphone, objective-c, ios, xcode

嗨，我正在使用 FMDB 包装器从 sqlite 数据库中读取数据。实际上我在数据库中有不同的引号。我有一个视图，它随机显示数据库中的所有报价，但这会影响应用程序的处理速度。我从数据库中读取报价并将其显示在`UIScrollView`
我想每次从数据库中读取 10 条记录但是当我滚动报价时并到达第 10 条引号/记录，然后其他 10 条记录应该从数据库中读取我该怎么做。
`select * from Quotes order by random() limit 10`
但这只是从数据库中读取了 10 条记录，当滚动到第 10 条记录时，我想再读取 10 条记录。我该怎么做？请帮忙！！！

# c++ - 使用生成器和分布扩展 c++11 随机的教程或示例代码

> ID：11717433
> 
> 赞同：9
> 
> 时间：2012-07-30T07:55:51.323
> 
> 标签：c++, visual-studio-2010, random, stl, c++11

我有我编写的遗留 C++ 代码来生成均匀随机数和高斯分布。它实现了 George Marsaglia 博士的算法，速度极快。（我正在使用它们为蒙特卡洛高维积分生成大量样本。）

我认为重新分解生成器和分发以使用新的 C++11 std::random 方案是一个好主意。

任何人都可以向我指出一个教程或一个很好的 std::random 参考，其中包括如何扩展它的必要信息？示例代码将是理想的。

更新。感谢大家的帮助。我现在已经为 Visual C++ 2010 附带的 std::normal_distribution 编写了一个替代品。在我的机器上，当由默认引擎提供时，替代品的速度提高了 26%。我有点失望，差异不是更大，但是，嘿，那是我的问题。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T02:54:16.347

[N3376](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)是最新的 C++ 标准草案（这是 C++11 之后的版本，但它是 C++11 的绝佳快照）。

所有 C++11-random 都在：26.5 随机数生成 [rand]

26.5.1.4 随机数引擎要求 [rand.req.eng] 具有您的统一随机数生成器需要满足的所有要求。

26.5.1.6 随机数分布要求 [rand.req.dist] 具有您的高斯分布需要满足的所有要求。

26.5.8.5.1 类模板 normal_distribution [rand.dist.norm.normal] 是描述标准定义的高斯分布的部分。

C++11`<random>`非常像 STL，它设置了对随机数生成器（容器）和随机分布（算法）的要求，然后客户端可以混合和匹配两者。这是一个非常酷的设计。

抱歉，我不知道有什么好的教程。C++ 标准是一个很好的参考和一个糟糕的教程。但是，您显然在随机数领域受过良好的教育。因此，假设您对 C++ 有所了解，C++ 标准可能还不错。

`<random>`如果您想仔细阅读其源代码（例如），可以使用 的开源实现。一个例子是[libc++](http://libcxx.llvm.org)。他们所要求的只是如果您重复使用他们的任何代码，您保留他们的版权声明。

**编辑**

**您**是编写本教程的唯一资格。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:31:02.203

你可以通过阅读 boost 库的源代码学到很多东西，因为 C++11 中的许多提议都是从 boost 中采用的。

在此处查看示例 rng 引擎的接口：

[http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine](http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine)

我将首先实现 min max 种子和 operator() 功能，看看它是否作为 C++11 的有效引擎传递

# c# - '等待'一个可观察的

> ID：11717436
> 
> 赞同：11
> 
> 时间：2012-07-30T07:56:05.223
> 
> 标签：c#, task-parallel-library, system.reactive

我的情况是，我有一个正在处理的任务列表（启用驱动器、更改位置、等待停止、禁用）。

'wait for' 监视`IObservable<Status>`我想等待的一个 （所以我可以通过线程`ContinueWith`和其他任务）。

*我开始在*订阅者的 OnNext 处理中执行以下任务，但这很丑陋。我现在想出的是这种扩展方法：

```
public static Task<T> WaitFor<T>(this IObservable<T> source, Func<T, bool> pred)
{
    var tcs = new TaskCompletionSource<T>();
    source
        .Where(pred)
        .DistinctUntilChanged()
        .Take(1)  //OnCompletes the observable, subscription will self-dispose
        .Subscribe(val => tcs.TrySetResult(val),
                    ex => tcs.TrySetException(ex),
                    () => tcs.TrySetCanceled());

    return tcs.Task;
} 
```

（更新了**svick**的处理建议`OnCompleted`和`OnError`）

### 问题：

*   这是好事、坏事还是丑陋？
*   我是否错过了可以做到这一点的现有扩展？
*   `Where`和的顺序是否`DistinctUntilChanged`正确？（我*认为*他们是）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T09:25:59.363

至少我会将此扩展方法更改为：

```
public static Task<T> WaitFor<T>(this IObservable<T> source, Func<T, bool> pred)
{
    return
        source
            .Where(pred)
            .DistinctUntilChanged()
            .Take(1)
            .ToTask();
} 
```

使用`.ToTask()`比引入要好得多`TaskCompletionSource`。您需要对`System.Reactive.Threading.Tasks`命名空间的引用才能获取`.ToTask()`扩展方法。

此外，`DistinctUntilChanged`在此代码中是多余的。您只能获得一个值，因此默认情况下它必须是不同的。

现在，我的下一个建议可能有点争议。这个扩展是一个坏主意，因为它隐藏了正在发生的事情的真正语义。

如果我有这两个代码片段：

```
var t = xs.WaitFor(x => x > 10); 
```

或者：

```
var t = xs.Where(x => x > 10).Take(1).ToTask(); 
```

我通常更喜欢第二个片段，因为它清楚地向我展示了正在发生的事情 - 我不需要记住`WaitFor`.

除非您将名称命名为`WaitFor`更具描述性——也许`TakeOneAsTaskWhere`——否则您将清楚地从使用它的代码中使用运算符，并使代码更难管理。

以下内容不是更容易记住语义吗？

```
var t = xs.TakeOneAsTaskWhere(x => x > 10); 
```

对我来说，底线是 Rx 运算符是组合的，而不是封装的，但如果你要封装它们，那么它们的含义必须清楚。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:11:09.180

对此不是 100% 确定，但通过阅读 Rx 2.0 beta 博客文章，我认为如果您可以使用 async/await，您可以“返回 await source.FirstAsync(pred)”或不使用异步，“return source.FirstAsync (pred).ToTask()"

[http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)

![使用 rx 2.0 和 firstasync 拍摄 linqpad](../Images/8451450ed21897477c36e7c4bbbdd64c.png)

# symfony - symfony2 - 树枝 - 如何从树枝模板内部渲染树枝模板

> ID：11717438
> 
> 赞同：18
> 
> 时间：2012-07-30T07:56:24.573
> 
> 标签：symfony, twig

我有一个显示页面的 xxx.html.twig 文件，但是当我想用不同的数据刷新页面并用新数据更新它时，我有一个选择和一个提交按钮。问题是我不知道如何在控制器中调用一个动作，我将参数从我的树枝传递给它并调用新数据，然后我再次使用新参数渲染相同的树枝模板。

我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-15T19:44:05.127

这里有几种不同的方法：

```
{{ render(app.request.baseUrl ~ '/helper/test', {"hostid2": hostid } ) }} 
```

或者

```
{% include 'MyCoreBundle:Helper:test.html.twig' with {"hostid2": hostid } only %} 
```

或者

```
{% render controller("MyCoreBundle:Helper:test", {'hostid2': hostid}) %} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-30T08:01:30.020

# Symfony 2.1：

```
{% render 'YourBundle:YourController:yourAction' with {'var': value} %} 
```

# Symfony 2.6+：

```
{{ render(controller('YourBundle:YourController:yourAction', {'var': value})) }} 
```

当然，还要阅读[文档。](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T10:52:57.010

我认为这里有些部分被贬低了。为了使包含在最新的 Symfony 3.1.10 中工作，我这样解决了它：

```
{% extends 'base.html.twig' %}
{% block body %}
    {{ include('AppBundle:Default:inner_content.html.twig') }}
{% endblock %} 
```

注意：include() 带括号。然后所有变量都包含在父模板中。如果您想限制子模板中的某些变量，请使用 with ... only（查看）

# objective-c - 在objective-C中使用CGMake创建Month作为标题

> ID：11717442
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:56:37.917
> 
> 标签：objective-c, ios, xcode

如图所示，我通过 CGMake 创建了 52 周按钮：

这是我的周视图日历

这是我的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
    int rows = 13, columns = 4 ;
UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 80*columns, 32*rows)];
int currentTag = 0;

for (int y = 0; y < rows; y++) {
    for (int x = 0; x < columns; x++) {

        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];  
        button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
        button.tag = currentTag;
        currentTag++;
        [button.layer setBorderColor: [[UIColor whiteColor] CGColor]];
        [button.layer setBorderWidth: 0.5];
        if (x == 0 && y == 3) {
            [button setBackgroundColor:[UIColor redColor]];
        } else if(x == 1 && y == 5) {
            [button setBackgroundColor:[UIColor redColor]];
        } else if(x == 2 && y == 5) {
            [button setBackgroundColor:[UIColor redColor]]; 

        } else if(y == 0) {
            [button setBackgroundColor:[UIColor greenColor]]; 
        } else if(y == 1) {
            [button setBackgroundColor:[UIColor greenColor]]; 

        } else if(y == 2) {
            [button setBackgroundColor:[UIColor greenColor]]; 
        } else if(y == 3) {
            [button setBackgroundColor:[UIColor greenColor]]; 
        } else if(y == 4) {
            [button setBackgroundColor:[UIColor greenColor]]; 
        } else if(x == 1 && y == 6) {
            [button setBackgroundColor:[UIColor blueColor]]; 

        } else {

            //  [button setBackgroundColor:[UIColor grayColor]];
        }

        [button setTitle:[NSString stringWithFormat:@"W %d",currentTag] forState:UIControlStateNormal];
        button.frame = CGRectMake(80*x, 32*y, 80, 32); 
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button];

    }
  }

// Center the view which contains your buttons
CGPoint centerPoint = buttonView.center;
centerPoint.x = self.view.center.x;
buttonView.center = centerPoint;
[self.view addSubview:buttonView];    

} 
```

RightNow 我想在这个日历中有 12 个月，并为每 4 周添加 1 个月作为标题

我不知道如何使用 CGMake 创建此标头并将其放入我的循环中

你能帮帮我吗

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:01:38.027

实现您要查找的内容的最佳方法是使用 UITableViewController，其中每行有一个 4 天的单元格和一个带有月份名称的标题视图。您的方法非常暴力，最终会给您带来很多非常难以解决的错误和低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:58:51.910

我建议您对 uitableview 使用自定义单元格并设置您需要的所有属性

# c++ - 生产者使用服务模式在 GUI 线程外访问 GUI

> ID：11717447
> 
> 赞同：0
> 
> 时间：2012-07-30T07:57:08.343
> 
> 标签：c++, qt, design-patterns, boost, boost-thread

我的`Producer`（*在不同的线程上运行*）需要访问`QDesktopWidget`一些 QWidget，它还需要使用`QPixmap`. 所以我设计了这样的投票。

生产者、消费者、发送者是`boost::thread`。这就是我的计划。

我有一个`device::Service`类，它`QObject`存在于 GUI 线程中。它是所有服务类的基础。有`device::PixmapService`继承`device::Service`

有一个带有以下签名的方法，由`Producer`Thread 调用。`ProxyTray<QImage, device::PixmapService> device::PixmapService::requestPixmap()`

`requestPixmap()`创建一个托盘`ProxyTray<QImage, device::PixmapService> blankTray`
并发出一个`this->pixmapRequestedSignal(tray)`并立即返回相同的`tray`结果。

`device::PixmapService::pixmapRequestedSlot`使用 Qt 的信号槽机制获取请求。并将托盘解析为`tray.resolve(image)`。

同时生产者在等待。

```
while(!tray.released());
QImage image = tray.data(); 
```

设计好吗？它甚至会起作用吗？我在重新发明一些轮子吗？

```
template <typename T, typename Manipulator>
class ProxyTray: public AbstractProxyTray{
  friend class Manipulator;
  private:
    T    _data;
  public:
    ProxyTray();
  public:
    T& data() const;
    ~ProxyTray();
  private:
    void resolve(T& data);
};

class AbstractProxyTray{
  private:
    bool _busy;
  public:
    AbstractProxyTray();
  public:
    bool released() const;//returns !_busy
    virtual ~AbstractProxyTray() = 0;
}; 
```

我还需要为 ProxyTray 写一个副本。并且复制应该没问题，因为托盘将保存基于`QSharedData`which implements的 Qt 类型`copy on write`。

# php - PHP取消链接符号链接

> ID：11717451
> 
> 赞同：5
> 
> 时间：2012-07-30T07:57:33.697
> 
> 标签：php, symlink, delete-file, unlink

当我在 Windows 下创建一个符号链接（尚未在 linux 下测试它）并想再次删除/取消链接它（我用 unlink() - 函数尝试过）时，它总是删除符号链接 + 原始文件。但我只想删除符号链接。它没有任何功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-05T11:17:41.873

检查这个答案：[https ://stackoverflow.com/a/12288764/3910083](https://stackoverflow.com/a/12288764/3910083)

unlink() 是正确的方法

我的一个项目的代码片段，只有在它是符号链接时才删除

```
if(file_exists($linkfile)) {
    if(is_link($linkfile)) {
        unlink($linkfile);
    } else {
        exit("$linkfile exists but not symbolic link\n");
    }
} 
```

readlink()，返回一个链接的目标，你可以运行 unlink

```
if(is_link($linkfile)) {
      $target = readlink($linkfile)
      unlink($target)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:03:11.370

1.  将符号链接重命名为“my_link”之类的名称，以便重用相同的 PHP 文件。
2.  使用适当的代码创建 PHP 文件。我使用了“unlink.php”。简单易记。
3.  将 PHP 文件上传到包含链接的目录。
4.  输入文件的 URL。

结果是文件消失得无影无踪。

```
<?php
unlink ('my_link');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:07:48.567

只要确保您使用的是软链接，而不是硬链接

[从这里](http://technet.microsoft.com/en-us/library/cc753194%28v=ws.10%29.aspx)检查 Mklink 的使用情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-18T22:29:14.867

在 linux 上，为了安全起见，我会选择

```
shell_exec('rm ' . $file); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-30T08:03:51.947

读这个：-

[http://php.net/manual/en/function.symlink.php](http://php.net/manual/en/function.symlink.php)

试试这个：-

```
symlink($target, $link);
unlink($link);
unlink($target); 
```

# android - 如何在预 HoneyComb 设备（> 2.2）中拥有像 Google Play 这样的 ActionBar？

> ID：11717458
> 
> 赞同：0
> 
> 时间：2012-07-30T07:58:11.950
> 
> 标签：android, android-actionbar, android-ui, android-2.2-froyo

**首先**，这可能看起来像一个重复的问题，但相信我，我已经搜索了所有这些问题，但找不到合适的答案，是的，这令人沮丧。不过，如果您投票以重复关闭，请发表评论以便我学习，类似的问题很少：- 1\. [ActionBar pre HoneyComb](https://stackoverflow.com/questions/6646169/actionbar-pre-honeycomb) 2.[另一个类似的问题](https://stackoverflow.com/questions/6031774/what-is-the-equivalent-of-actionbar-in-earlier-sdk-versions)

**我想要的是 ？** 在我的应用程序中，我想支持像 Google Play 一样的 ActionBar（还有几个按钮）。如下所示，

![在此处输入图像描述](../Images/514d7d27529274582c21868789674fec.png)

我想使用所有三个操作栏 1\. 主操作栏 2\. 选项卡操作栏和 3\. 此[设计页面](http://developer.android.com/design/patterns/actionbar.html)中提到的底部操作栏。

**我做了什么 ？** 我知道在预 HoneyComb 设备中默认不支持 ActionBar。所以我开始寻找替代品，所以我做了以下事情：-

1.  下载了 v4 支持库并试图获得一个工作示例，但不能。
2.  下载[ActionBarShelock](http://actionbarsherlock.com/)并为此创建了一个示例。
3.  从 gitHub 下载[了这个流行的库（在 SO 上）。](https://github.com/johannilsson/android-actionbar)

我有 2 和 3 的工作示例，但即使它们也远非我想要的。但是，我宁愿不使用任何预构建库。因为它是一个需要大量动态定制的大型应用程序。

请通过提供使用支持库实现 ActionBar 的分步指南来帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:33:10.330

在考虑到我决定使用[ActionBarSherlock](http://actionbarsherlock.com/)之后，它真的很容易实现和扩展......

# android - 在应用程序启动时填充 ContentProvider

> ID：11717459
> 
> 赞同：-1
> 
> 时间：2012-07-30T07:58:19.377
> 
> 标签：android, android-contentprovider

我有一个应用程序，在每次启动应用程序之前，必须将某些数据（大约 100 行）存储在 db 中。我不想每次用户启动应用程序时都插入它。解决办法是什么？如何存储数据？什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:36:55.163

onCreate 方法是每个应用程序在启动时运行一次的方法。在这里，您可以使用代码在数据库中插入值。

您也可以连接到您的数据库并查看它是否已经存在，如果不执行创建和插入。

有关 Android 中 DB 的更多想法，请参阅这些链接...

[http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# android - Android 索引滚动

> ID：11717463
> 
> 赞同：9
> 
> 时间：2012-07-30T07:58:42.927
> 
> 标签：android, scroll

[http://developer.android.com/design/building-blocks/scrolling.html](http://developer.android.com/design/building-blocks/scrolling.html)

我正在寻找执行第二部分（“索引滚动”）的解决方案，但我找不到任何例子来做到这一点。默认API中有解决方案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T16:26:10.627

要实现索引滚动，您必须调用`setFastScrollEnabled(true)`您的 ListView。此外，您的适配器必须实现该[`SectionIndexer`](http://developer.android.com/reference/android/widget/SectionIndexer.html)接口。

你可以在这里找到一个例子：http: [//spinettaro.blogspot.de/2011/11/android-snippet-code-android-listview.html](http://spinettaro.blogspot.de/2011/11/android-snippet-code-android-listview.html)

这应该适用于作为`AbsListView`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T08:31:58.693

这是发布在 GitHub 中的示例代码。看看这个，

[https://github.com/rno/Android-ScrollBarPanel](https://github.com/rno/Android-ScrollBarPanel)

# c# - 我如何设置对 SOAP 文件的引用并在 C# 中使用此函数

> ID：11717469
> 
> 赞同：0
> 
> 时间：2012-07-30T07:59:14.070
> 
> 标签：c#, asp.net, soap, wsdl, soap-client

我想创建一个与数据库连接的 ASP.NET 应用程序（aspx 站点）并为 Internet 创建用户连接。我得到一个肥皂数据（**soapapi.wsdl**）。该文件具有创建访客用户或获取有关谁应用访客用户和时间的所有功能。

**我的问题**是我不知道如何在 C# 中添加对这个 Soap 文件的引用并执行这个函数:(？我搜索它，但我没有找到一个很好的例子：/

我需要什么命名空间以及如何设置对此 wsdl 文件的引用？

塔拉索夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:03:09.353

尝试添加服务参考

右键单击项目文件->添加服务引用。在对话框中指向这个 wsdl 文件。结果将生成一个代理 c# 类，它允许您像通常的代码一样调用soap方法

# c# - Delphi Encrypt Compendium 5.2 vs Chilkat 加密

> ID：11717471
> 
> 赞同：2
> 
> 时间：2012-07-30T07:59:22.623
> 
> 标签：c#, delphi, encryption, aes, chilkat

我正在尝试使用 DEC v5.2 在 Delphi 上加密/解密一些代码，并在 C# 上加密/解密。这个想法是使用 AES128。

在德尔福我有以下内容：

```
var
 ACipherClass: TDECCipherClass = TCipher_Rijndael;
 ACipherMode: TCipherMode = cmCBCx;
 ACipherFormat: TDECFormatClass = TFormat_MIME64;
 AHashClass: TDECHashClass = THash_MD5;
 AHashFormat: TDECFormatClass = TFormat_HEX;

function Encrypt(const AText: AnsiString; const APassword: AnsiString): AnsiString;
var
  AData, APass: Binary;
begin
  with ValidCipher(ACipherClass).Create, Context do
    try
      APass := ValidHash(AHashClass).CalcBinary(APassword,AHashFormat);
      Mode := ACipherMode;
      Init(APass);
      AData:=EncodeBinary(AText,ACipherFormat);
      Done;
      Result:=AData;
    finally
      Free;
      ProtectBinary(AData);
      ProtectBinary(APass);
    end;
end; 
```

在 C# 上，我有：

```
static public string Encrypt(string data, string key)
{
    using (var crypt = new Crypt2())
    {
        crypt.UnlockComponent("LICENSE_IS_HERE");

        crypt.CryptAlgorithm = "aes";
        crypt.CipherMode = "cbc";
        crypt.KeyLength = 128;

        //  Generate a binary secret key from a password string
        //  of any length.  For 128-bit encryption, GenEncodedSecretKey
        //  generates the MD5 hash of the password and returns it
        //  in the encoded form requested.  The 2nd param can be
        //  "hex", "base64", "url", "quoted-printable", etc.
        var hexKey = crypt.GenEncodedSecretKey(key,"hex");
        crypt.SetEncodedKey(hexKey,"hex");

        crypt.EncodingMode = "base64";

        crypt.Charset = "ansi";

        return crypt.EncryptStringENC(data);
    }
} 
```

但生成的代码并不相似。我究竟做错了什么 ？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:08:10.123

检查两边的填充方法。AES 加密本身是标准的，但是当明文不是块长度的倍数时，不同的库使用不同的（默认）填充方法。我让它在 C# 端使用空填充，并且 a) 使用带有手动 #0 填充的 DCPCrypt（DCPCrypt 不做填充）和 b) Turbopower LockBox 3，作者 Sean Durkin 对其代码进行了扩展以处理C# 空填充。

旧 D2007 测试代码，按“原样”提供：

========== TPLB3 pas文件==============

```
unit uEncDecTests_LockBox;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Buttons, uTPLb_BaseNonVisualComponent,
  uTPLb_Codec, uTPLb_CryptographicLibrary;

type
  TFrmEncDecTests = class(TForm)
    EdtPlainText1: TEdit;
    EdtCypher: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    EdtPlainText2: TEdit;
    Label3: TLabel;
    Label4: TLabel;
    BiBEncrypt: TBitBtn;
    BiBDecrypt: TBitBtn;
    Label5: TLabel;
    EdtKey: TEdit;
    Label6: TLabel;
    EdtCypher64: TEdit;
    EdtIV: TEdit;
    Label7: TLabel;
    Label8: TLabel;
    EdtCypherHex: TEdit;
    AESCodec: TCodec;
    CryptographicLibrary1: TCryptographicLibrary;
    BtnInit: TButton;
    procedure BiBEncryptClick(Sender: TObject);
    procedure BiBDecryptClick(Sender: TObject);
    procedure BtnInitClick(Sender: TObject);
  private
    FOut: String;
  public
    { Public declarations }
  end;

var
  FrmEncDecTests: TFrmEncDecTests;

implementation

{$R *.dfm}

procedure TFrmEncDecTests.BiBDecryptClick(Sender: TObject);
var lPlainText: String;
begin
  AESCodec.DecryptString(FOut,lPlainText);
  EdtPlainText2.Text := lPlainText;
end;

procedure TFrmEncDecTests.BiBEncryptClick(Sender: TObject);
var
  lPlainText,
  sb,sh: String;
  b,o  : byte;
begin
  lPlainText := EdtPlaintext1.Text;
  AESCodec.EncryptString(lPlainText,FOut);
  sh := '';
  sb := '';
  for B := 0 to Length(FOut) do begin
    o := Ord(FOut[b]);
    sh := sh + IntToHex(o,2) + ' ';
    if o < 10 then sb := sb + '0';
    if o < 100 then sb := sb + '0';
    sb := sb + inttostr(o) + ' ';
  end;
  EdtCypher.Text := FOut;
  EdtCypher64.Text := sb;
  EdtCypherHex.Text := sh;
end;

procedure TFrmEncDecTests.BtnInitClick(Sender: TObject);
var
  p : PChar;
  MS: TMemoryStream;
begin
  p := pChar(EdtKey.Text);
  MS := TMemoryStream.Create;
  MS.Write(P^,Length(EdtKey.Text));
  MS.Seek(soFromBeginning,0);
  AESCodec.InitFromStream(MS);
  MS.Free;
  BiBEncrypt.Enabled := true;
  BiBDecrypt.Enabled := true;
end;

end. 
```

========== TPLB3 dfm 文件 ===============

```
object FrmEncDecTests: TFrmEncDecTests
  Left = 0
  Top = 0
  Caption = 'Encryptie/decryptie tests (LockBox)'
  ClientHeight = 328
  ClientWidth = 535
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 16
    Top = 150
    Width = 114
    Height = 13
    Caption = 'Cyphertext (raw bytes)'
  end
  object Label2: TLabel
    Left = 16
    Top = 102
    Width = 46
    Height = 13
    Caption = 'Plaintext:'
  end
  object Label3: TLabel
    Left = 16
    Top = 280
    Width = 46
    Height = 13
    Caption = 'Plaintext:'
  end
  object Label4: TLabel
    Left = 16
    Top = 16
    Width = 22
    Height = 13
    Caption = 'Key:'
  end
  object Label5: TLabel
    Left = 339
    Top = 16
    Width = 182
    Height = 13
    Caption = 'Testing LockBox 3  AES-256, CBC'
    Font.Charset = DEFAULT_CHARSET
    Font.Color = clWindowText
    Font.Height = -11
    Font.Name = 'Tahoma'
    Font.Style = [fsBold]
    ParentFont = False
  end
  object Label6: TLabel
    Left = 16
    Top = 189
    Width = 101
    Height = 13
    Caption = 'Cyphertext (Base64)'
  end
  object Label7: TLabel
    Left = 16
    Top = 59
    Width = 14
    Height = 13
    Caption = 'IV:'
  end
  object Label8: TLabel
    Left = 17
    Top = 230
    Width = 85
    Height = 13
    Caption = 'Cyphertext (Hex)'
  end
  object EdtPlainText1: TEdit
    Left = 16
    Top = 118
    Width = 505
    Height = 21
    TabOrder = 0
    Text = 'somethingorother'
  end
  object EdtCypher: TEdit
    Left = 16
    Top = 166
    Width = 505
    Height = 21
    TabOrder = 1
  end
  object EdtPlainText2: TEdit
    Left = 16
    Top = 296
    Width = 505
    Height = 21
    TabOrder = 2
  end
  object BiBEncrypt: TBitBtn
    Left = 368
    Top = 141
    Width = 73
    Height = 23
    Caption = 'Encrypt'
    Enabled = False
    TabOrder = 3
    OnClick = BiBEncryptClick
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      04000000000000010000120B0000120B00001000000000000000000000000000
      800000800000008080008000000080008000808000007F7F7F00BFBFBF000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
      333333333333333333333333333333333333333333333333FFF3333333333333
      00333333333333FF77F3333333333300903333333333FF773733333333330099
      0333333333FF77337F3333333300999903333333FF7733337333333700999990
      3333333777333337F3333333099999903333333373F333373333333330999903
      33333333F7F3337F33333333709999033333333F773FF3733333333709009033
      333333F7737737F3333333709073003333333F77377377F33333370907333733
      33333773773337333333309073333333333337F7733333333333370733333333
      3333377733333333333333333333333333333333333333333333}
    NumGlyphs = 2
  end
  object BiBDecrypt: TBitBtn
    Left = 368
    Top = 270
    Width = 73
    Height = 23
    Caption = 'Decrypt'
    Enabled = False
    TabOrder = 4
    OnClick = BiBDecryptClick
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      04000000000000010000120B0000120B00001000000000000000000000000000
      800000800000008080008000000080008000808000007F7F7F00BFBFBF000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
      33333333333333333333333333333333333333FF333333333333300333333333
      33333773FF33333333333090033333333333373773FF33333333330990033333
      3333337F3773FF33333333099990033333333373F33773FFF333333099999007
      33333337F33337773333333099999903333333373F3333733333333309999033
      333333337F3337F333333333099990733333333373F3F77F3333333330900907
      3333333337F77F77F33333333003709073333333377377F77F33333337333709
      073333333733377F77F33333333333709033333333333377F7F3333333333337
      0733333333333337773333333333333333333333333333333333}
    NumGlyphs = 2
  end
  object EdtKey: TEdit
    Left = 16
    Top = 32
    Width = 265
    Height = 21
    TabOrder = 5
    Text = '12345678912345678912345678912345'
  end
  object EdtCypher64: TEdit
    Left = 16
    Top = 205
    Width = 505
    Height = 21
    TabOrder = 6
  end
  object EdtIV: TEdit
    Left = 16
    Top = 75
    Width = 265
    Height = 21
    TabOrder = 7
    Text = '1234567891234567'
  end
  object EdtCypherHex: TEdit
    Left = 17
    Top = 246
    Width = 505
    Height = 21
    TabOrder = 8
  end
  object BtnInit: TButton
    Left = 336
    Top = 80
    Width = 75
    Height = 25
    Caption = 'Init enc'
    TabOrder = 9
    OnClick = BtnInitClick
  end
  object AESCodec: TCodec
    AsymetricKeySizeInBits = 2048
    AdvancedOptions2 = []
    CryptoLibrary = CryptographicLibrary1
    Left = 336
    Top = 40
    StreamCipherId = 'native.StreamToBlock'
    BlockCipherId = 'native.AES-256'
    ChainId = 'native.CBC'
  end
  object CryptographicLibrary1: TCryptographicLibrary
    Left = 384
    Top = 40
  end
end 
```

========== DCPCrypt 密码文件 ==============

```
unit uEncDecTests_DCPCrypt;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Buttons, LbCipher, LbClass, DCPcrypt2, DCPblockciphers,
  DCPrijndael;

const
  cOutBufSize = 1024;

type
  TFrmEncDecTests = class(TForm)
    EdtPlainText1: TEdit;
    EdtCypher: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    EdtPlainText2: TEdit;
    Label3: TLabel;
    Label4: TLabel;
    BiBEncrypt: TBitBtn;
    BiBDecrypt: TBitBtn;
    Label5: TLabel;
    EdtKey: TEdit;
    Label6: TLabel;
    EdtCypher64: TEdit;
    EdtIV: TEdit;
    Label7: TLabel;
    Label8: TLabel;
    EdtCypherHex: TEdit;
    BtnKAT: TButton;
    DCP_rijndael1: TDCP_rijndael;
    BtnHexConvert: TButton;
    procedure BiBEncryptClick(Sender: TObject);
    procedure BiBDecryptClick(Sender: TObject);
    procedure BtnKATClick(Sender: TObject);
    procedure BtnHexConvertClick(Sender: TObject);
  private
  public
  end;

var
  FrmEncDecTests: TFrmEncDecTests;

implementation

{$R *.dfm}

Uses
  DCPbase64,
  uRijndael,
  uKATVectors, uHexConvert;

procedure TFrmEncDecTests.BiBEncryptClick(Sender: TObject);
type
  KeyBuffer  = Array[1..32] of Byte;
  IVBuffer   = Array[1..16] of Byte;
var
  KeyHex, IVHex, PlainTxt, PlainHex, CypherStr, CypherHex, CypherB64, CypherBytes: String;
  i   : Integer;
begin
  KeyHex      := EdtKey.Text;
  IVHex       := EdtIV.Text;
  PlainTxt    := EdtPlainText1.Text;
  PlainHex    := StringToHex(PlainTxt);
  CypherHex   := RijndaelEncryptHex(KeyHex, IVHex, PlainHex);
  CypherStr   := HexToString(CypherHex);
  CypherB64   := Base64EncodeStr(CypherStr);
  CypherBytes := '';
  CypherBytes := '';  for i := 1 to Length(CypherStr) do CypherBytes := CypherBytes + IntToStr(Ord(CypherStr[i])) + ' ';
  EdtCypherHex.Text := CypherHex;
  EdtCypher.Text    := CypherBytes;
  EdtCypher64.Text  := CypherB64;
end;

procedure TFrmEncDecTests.BiBDecryptClick(Sender: TObject);
var
  KeyHex, IVHex, PlainHex: String;
begin
  KeyHex   := EdtKey.Text;
  IVHex    := EdtIV.Text;
  PlainHex := RijndaelDecryptHex(KeyHex,IVHex,EdtCypherHex.Text);
  EdtPlainText2.Text := HexToString(PlainHex);
end;

procedure TFrmEncDecTests.BtnHexConvertClick(Sender: TObject);
begin
  FrmHexConvert.ShowModal;
end;

procedure TFrmEncDecTests.BtnKATClick(Sender: TObject);
begin
   FrmKATVectors.ShowModal;
end;

end. 
```

========== DCPCrypt dfm 文件 ===============

```
object FrmEncDecTests: TFrmEncDecTests
  Left = 0
  Top = 0
  Caption = 'Encryptie/decryptie tests (DCPCrypt)'
  ClientHeight = 328
  ClientWidth = 535
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 16
    Top = 150
    Width = 114
    Height = 13
    Caption = 'Cyphertext (raw bytes)'
  end
  object Label2: TLabel
    Left = 16
    Top = 102
    Width = 129
    Height = 13
    Caption = 'Plaintext (readable string):'
  end
  object Label3: TLabel
    Left = 16
    Top = 280
    Width = 46
    Height = 13
    Caption = 'Plaintext:'
  end
  object Label4: TLabel
    Left = 16
    Top = 16
    Width = 78
    Height = 13
    Caption = 'Key (hexstring):'
  end
  object Label5: TLabel
    Left = 301
    Top = 16
    Width = 232
    Height = 13
    Caption = 'Testing DCPCrypt Rijndael (key 256, CBC)'
    Font.Charset = DEFAULT_CHARSET
    Font.Color = clWindowText
    Font.Height = -11
    Font.Name = 'Tahoma'
    Font.Style = [fsBold]
    ParentFont = False
  end
  object Label6: TLabel
    Left = 16
    Top = 189
    Width = 101
    Height = 13
    Caption = 'Cyphertext (Base64)'
  end
  object Label7: TLabel
    Left = 16
    Top = 59
    Width = 70
    Height = 13
    Caption = 'IV (hexstring):'
  end
  object Label8: TLabel
    Left = 17
    Top = 230
    Width = 85
    Height = 13
    Caption = 'Cyphertext (Hex)'
  end
  object EdtPlainText1: TEdit
    Left = 16
    Top = 118
    Width = 505
    Height = 21
    TabOrder = 0
    Text = 'timetellbvencryptiemethode'
  end
  object EdtCypher: TEdit
    Left = 16
    Top = 166
    Width = 505
    Height = 21
    TabOrder = 1
  end
  object EdtPlainText2: TEdit
    Left = 16
    Top = 296
    Width = 505
    Height = 21
    TabOrder = 2
  end
  object BiBEncrypt: TBitBtn
    Left = 368
    Top = 141
    Width = 73
    Height = 23
    Caption = 'Encrypt'
    TabOrder = 3
    OnClick = BiBEncryptClick
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      04000000000000010000120B0000120B00001000000000000000000000000000
      800000800000008080008000000080008000808000007F7F7F00BFBFBF000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
      333333333333333333333333333333333333333333333333FFF3333333333333
      00333333333333FF77F3333333333300903333333333FF773733333333330099
      0333333333FF77337F3333333300999903333333FF7733337333333700999990
      3333333777333337F3333333099999903333333373F333373333333330999903
      33333333F7F3337F33333333709999033333333F773FF3733333333709009033
      333333F7737737F3333333709073003333333F77377377F33333370907333733
      33333773773337333333309073333333333337F7733333333333370733333333
      3333377733333333333333333333333333333333333333333333}
    NumGlyphs = 2
  end
  object BiBDecrypt: TBitBtn
    Left = 368
    Top = 270
    Width = 73
    Height = 23
    Caption = 'Decrypt'
    TabOrder = 4
    OnClick = BiBDecryptClick
    Glyph.Data = {
      76010000424D7601000000000000760000002800000020000000100000000100
      04000000000000010000120B0000120B00001000000000000000000000000000
      800000800000008080008000000080008000808000007F7F7F00BFBFBF000000
      FF0000FF000000FFFF00FF000000FF00FF00FFFF0000FFFFFF00333333333333
      33333333333333333333333333333333333333FF333333333333300333333333
      33333773FF33333333333090033333333333373773FF33333333330990033333
      3333337F3773FF33333333099990033333333373F33773FFF333333099999007
      33333337F33337773333333099999903333333373F3333733333333309999033
      333333337F3337F333333333099990733333333373F3F77F3333333330900907
      3333333337F77F77F33333333003709073333333377377F77F33333337333709
      073333333733377F77F33333333333709033333333333377F7F3333333333337
      0733333333333337773333333333333333333333333333333333}
    NumGlyphs = 2
  end
  object EdtKey: TEdit
    Left = 16
    Top = 32
    Width = 265
    Height = 21
    TabOrder = 5
    Text = ''
  end
  object EdtCypher64: TEdit
    Left = 16
    Top = 205
    Width = 505
    Height = 21
    TabOrder = 6
  end
  object EdtIV: TEdit
    Left = 16
    Top = 75
    Width = 265
    Height = 21
    TabOrder = 7
    Text = ''
  end
  object EdtCypherHex: TEdit
    Left = 17
    Top = 246
    Width = 505
    Height = 21
    TabOrder = 8
  end
  object BtnKAT: TButton
    Left = 301
    Top = 47
    Width = 201
    Height = 25
    Caption = 'Known Answer Test (KAT) Vectors'
    TabOrder = 9
    OnClick = BtnKATClick
  end
  object BtnHexConvert: TButton
    Left = 301
    Top = 80
    Width = 75
    Height = 20
    Caption = 'Hex conversie'
    TabOrder = 10
    OnClick = BtnHexConvertClick
  end
  object DCP_rijndael1: TDCP_rijndael
    Id = 9
    Algorithm = 'Rijndael'
    MaxKeySize = 256
    BlockSize = 128
    Left = 432
    Top = 80
  end
end 
```

========== uRijndael.pas ==============

```
unit uRijndael;
// Helper functions for 256-bit Rijndael/AES encryption with DCPcrypt

interface

Uses
  StdCtrls;

function RijndaelEncryptHex(hexstrKey,hexstrIV,hexstrPlain: String; MMo: TMemo = nil): String;
function RijndaelDecryptHex(hexstrKey,hexstrIV,hexstrCypher: String; MMo: TMemo = nil): String;
// Input en output zijn strings met hex waarden ('014730f80ac625fe84f026c60bfd547d')
//
// Deze routines gebruiken een 256-key AES/Rijndael encryptie, waarbij de plaintext
// met NULL waarden ge-pad wordt tot een veelvoud van de blocksize.
// Merk op dat de initializatievector even groot moet zijn als de blocksize (128 bits, dus een hex string van 32 tekens).
//
// Als TMemo gespecificeerd is wordt daar naar toe gelogd.

// Helper routines:
function HexToString(H: String): String;
function StringtoHex(Data: string; WithSpaces: Boolean = false): string;
function HexToInt(HexNum: string): LongInt;

implementation

Uses
  SysUtils,
  DCPbase64, DCPcrypt2, DCPblockciphers, DCPrijndael;

type
  KeyBuffer  = Array[1..32] of Byte;
  IVBuffer   = Array[1..16] of Byte;

function HexToString(H: String): String;
var I : Integer;
begin
  Result:= '';
  for I := 1 to length (H) div 2 do
    Result:= Result+Char(StrToInt('$'+Copy(H,(I-1)*2+1,2)));
end;

function StringtoHex(Data: string; WithSpaces: Boolean = false): string;
var
  i, i2: Integer;
  s: string;
begin
  i2 := 1;
  for i := 1 to Length(Data) do
  begin
    Inc(i2);
    if i2 = 2 then
    begin
      if WithSpaces then s  := s + ' ';
      i2 := 1;
    end;
    s := s + IntToHex(Ord(Data[i]), 2);
  end;
  Result := s;
end;

function HexToInt(HexNum: string): LongInt;
begin
   Result := StrToInt('$' + HexNum) ;
end;

function FilterHex(S: String): String;
// Filters all hex characters 0..F (case insensitive) uit S
var
   SOut: String;
   l   : Word;
begin
   SOut := '';
   for l := 1 to Length(S) do
      if not (S[l] in ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f','A','B','C','D','E','F']) then
         SOut := SOut + S[l];
   Result := SOut;
end;

function RijndaelEncryptHex(hexstrKey,hexstrIV,hexstrPlain: String; MMo: TMemo = nil): String;
var
  InBuf,OutBuf  : array of byte;
  BufSizeInBytes: Word;
  KeyBuf        : KeyBuffer;
  IVBuf         : IVBuffer;
  l,i           : Integer;
  Bytes,SOut    : String;
  DCPR          : TDCP_rijndael;
begin
  l := Length(HexStrKey);
  Assert(l=64,'Key heeft ongeldige lengte (moet 64 chars zijn): ' + IntToStr(l));
  Assert(FilterHex(HexStrKey) = '','Key heeft ongeldige tekens: ' + HexStrKey);
  l := Length(HexStrIV);
  Assert(l=32,'IV heeft ongeldige lengte (moet 32 chars zijn): ' + IntToStr(l));
  Assert(FilterHex(HexStrIV) = '','IV heeft ongeldige tekens: ' + HexStrIV);
  Assert(FilterHex(hexstrPlain) = '','Plaintext heeft ongeldige tekens: ' + hexstrPlain);
  l := Length(hexstrPlain);
  Assert(l MOD 2 = 0,'Plaintext heeft oneven lengte: ' + hexstrPlain);
  if Mmo<> nil then begin
    Mmo.Lines.Add('Key: ' + hexstrKey);
    Mmo.Lines.Add('IV: ' + hexstrIV);
    Mmo.Lines.Add('Plaintext: ' + hexstrPlain);
    end;
  l := Length(hexstrKey) DIV 2;
  for i := 1 to l do KeyBuf[i] := HexToInt(Copy(hexstrKey,2*(i-1)+1,2));
  l := Length(hexstrIV) DIV 2;
  for i := 1 to l do IVBuf[i] := HexToInt(Copy(hexstrIV,2*(i-1)+1,2));
  // Pad with zeroes:
  while Length(hexstrPlain) MOD 32 <> 0 do hexstrPlain := hexstrPlain + '00';
  BufSizeInBytes := Length(hexstrPlain) DIV 2;
  SetLength(InBuf,BufSizeInBytes);
  SetLength(OutBuf,BufSizeInBytes);
  for i := 0 to BufSizeInBytes-1 do InBuf[i] := HexToInt(Copy(hexstrPlain,2*i+1,2));
  DCPR := TDCP_rijndael.Create(nil);
  DCPR.Init(KeyBuf,256,@IVBuf);
  DCPR.EncryptCBC(InBuf[0],OutBuf[0],BufSizeInBytes);
  DCPR.Burn; // Leeg memory buffers voor security
  DCPR.Free;
  SOut := '';
  for i := 0 to BufSizeInBytes-1 do begin SOut := SOut + Chr(OutBuf[i]); Bytes := Bytes + IntToStr(OutBuf[i]) + ' '; end;
  if Mmo<> nil then begin
    Mmo.Lines.Add('Cyphertext (bytes): ' + Bytes);
    Mmo.Lines.Add('Cyphertext (base64): ' + Base64EncodeStr(SOut));
    end;
  SOut := LowerCase(StringToHex(SOut));
  if Mmo<> nil then begin
    Mmo.Lines.Add('Cyphertext (hex): ' + SOut);
    Mmo.Lines.Add('');
    end;
  Result := SOut;
end; { RijndaelEncryptHex }

function RijndaelDecryptHex(hexstrKey,hexstrIV,hexstrCypher: String; MMo: TMemo = nil): String;
var
  InBuf,
  OutBuf: array of byte;
  BufSizeInBytes : Word;
  KeyBuf: KeyBuffer;
  IVBuf : IVBuffer;
  l,i   : Integer;
  SOut  : String;
  DCPR  : TDCP_rijndael;
begin
  l := Length(HexStrKey);
  Assert(l=64,'Key heeft ongeldige lengte (moet 64 chars zijn): ' + IntToStr(l));
  Assert(FilterHex(HexStrKey) = '','Key heeft ongeldige tekens: ' + HexStrKey);
  l := Length(HexStrIV);
  Assert(l=32,'IV heeft ongeldige lengte (moet 32 chars zijn): ' + IntToStr(l));
  Assert(FilterHex(HexStrIV) = '','IV heeft ongeldige tekens: ' + HexStrIV);
  Assert(FilterHex(hexstrCypher) = '','Cyphertext heeft ongeldige tekens: ' + hexstrCypher);
  l := Length(hexstrCypher);
  Assert(l MOD 2 = 0,'Cyphertext heeft oneven lengte: ' + hexstrCypher);
  if Mmo<> nil then begin
    Mmo.Lines.Add('Key: ' + hexstrKey);
    Mmo.Lines.Add('IV: ' + hexstrIV);
    Mmo.Lines.Add('CypherText: ' + hexstrCypher);
    end;
  l := Length(hexstrKey) DIV 2;
  for i := 1 to l do KeyBuf[i] := HexToInt(Copy(hexstrKey,2*(i-1)+1,2));
  l := Length(hexstrIV) DIV 2;
  for i := 1 to l do IVBuf[i] := HexToInt(Copy(hexstrIV,2*(i-1)+1,2));
  // Pad with zeroes:
  BufSizeInBytes := Length(hexstrCypher) DIV 2;
  SetLength(InBuf,BufSizeInBytes);
  SetLength(OutBuf,BufSizeInBytes);
  for i := 0 to BufSizeInBytes-1 do InBuf[i] := HexToInt(Copy(hexstrCypher,2*i+1,2));
  DCPR := TDCP_rijndael.Create(nil);
  DCPR.Init(KeyBuf,256,@IVBuf);
  DCPR.DecryptCBC(InBuf[0],OutBuf[0],BufSizeInBytes);
  DCPR.Burn;
  DCPR.Free;
  SOut := '';
  for i := 0 to BufSizeInBytes-1 do SOut := SOut + Chr(OutBuf[i]);
  SOut := LowerCase(StringToHex(SOut));
  if Mmo<> nil then begin
    Mmo.Lines.Add('Plaintext (hex): ' + SOut);
    Mmo.Lines.Add('');
  end;
  Result := SOut;
end; { RijndaelDecryptHex }

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:35:17.863

1) 为 Delphi 和 C# 尝试其他 AES128 实现。例如 Delphi 的 LockBox 3。也为 dot-net 寻找其他东西。这将让您检查您的环境中是否有一些库被破坏。

2) 如果 Delphi 的所有库在它们之间是一致的，并且 C# 的所有库在它们之间是一致的，但是这些集群具有不同的结果，那么你知道你对于那个字符串有不同的 BINARY 数据。

不同的 Delphi 版本具有不同的字符串表示形式，没有指定 Delphi 版本（SO 上有 Delphi 特定版本的标签）并显示 vars 的类型声明，您几乎无法在字符串后面显示二进制数据。

Java 在早期版本中将 UCS-2 用于字符串，现在它使用 UTF-16。

不知道点网。

但是 - 你必须做实验并将字符串跟踪到原始字节数组。然后确保这些数组完全匹配。这将带您了解字符串实现或始终将字符串转换为字节并返回到您的自定义桥接例程中，您始终可以完全控制。

*而且 - 毕竟 - 你最好对此进行广泛的单元测试。因此，如果以后对库、语言或编译器设置进行任何更改后会影响 cypering - 您会立即知道。一个月前，我对 Spring4D 散列函数进行了 Win64 asm 优化，但对加密一无所知 - 多亏了这些单元测试 :-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-22T12:55:12.877

加密中有许多参数，例如：

密钥长度、编码模式、oaep、charset 等等所以在双方都使用一个组件是合理的，chilkat 比其他组件更完整。所以如果可能的话，你可以在两边都使用它。

# php - php preg_match多个网址

> ID：11717475
> 
> 赞同：1
> 
> 时间：2012-07-30T07:59:35.823
> 
> 标签：php

我对 php 几乎一无所知，所以这可能会让人发笑。

我在 index.php 中有这段代码，它检查主机头并在找到匹配项时重定向。

```
if (!preg_match("/site1.net.nz/",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

但是，我需要在可能的多个站点上进行检查。如下。

```
if (!preg_match("/site1.net.nz/"|"/site2.net.nz",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

这实际上可能是我所知道的正确语法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:04:12.383

```
if (!preg_match("/(site1\.net\.nz|site2\.net\.nz|some\.other\.domain)/",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:05:00.460

尝试，

```
$hosts="/(site1\.com)|(site2\.com)/";
if (!preg_match($hosts,$host)) {
  // do something.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:01:40.780

```
// [12] to match 1 or 2
// also need to escape . for match real . otherwise . will match any char
if (!preg_match("/site[12]\.net\.nz/",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

或者

```
if (!preg_match("/site1\.net\.nz|site2\.net\.nz/",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:13:56.160

```
if (!preg_match("/(site1\.net\.nz|site2\.net\.nz)/",$host)) {
    header('Location: http://www.siteblah.net.nz/temp_internet_block.cfm');
} 
```

这将是正确的 RegEx 语法。

假设您有一个 url 数组。

```
$array = Array('site1.net.nz', 'site2.net.nz');

foreach($array as &$url) {
   // we need to escape the url properly for the regular expression
   // eg. 'site1.net.nz' -> 'site1\.net\.nz'
   $url = preg_quote($url);
}

if (!preg_match("/(" . implode("|",  $array) . ")/",$host)) {
    header('Location: http://example.com/');
} 
```

# qt - Qt 三个组合框用于一个日期

> ID：11717477
> 
> 赞同：1
> 
> 时间：2012-07-30T07:59:59.460
> 
> 标签：qt, date, combobox

我一直在寻找谷歌和 Stackoverflow，但我还没有找到任何简单的解决方案来自动填充三个组合框来表示正确的日期（如 YYYY-MM-DD）。我认为它与 QCalendarWidget 有关。有任何想法吗？

我希望能够滚动当前时间到 X 年前的日期，它不应该有像 2011 年 2 月 29 日这样不存在的日期。不确定这是否要求太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:17:39.363

现在我明白你的想法了。

答案很简单。制作三个组合框：日 (1 - 31)、月 (1 - 12) 和年 (即 1999 - 2012)。创建“确定”按钮。不需要超逻辑。

按下按钮后，只需使用用户给出的三个数字创建 QDate 对象并调用 QDate::isValid() 来验证日期。如果不是，请创建一些警告提示并要求用户更改输入内容。

验证用户输入数据的最佳方法是覆盖 QDialog::done() 方法。

```
void Dialog::done(int r)
{
    if(r == QDialog::Accepted) {
        QDate date; 
        //Create QDate from comboboxes' values
        ...
        if(!date.isValid()) { 
            //Some warning to user.
            return;
        }
    }
    QDialog::done(r);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:48:48.107

```
int X = 2;
QDate date = QDate::currentDate(), lastDate = date.addYears(-X);
for(; date > lastDate; date = date.addDays(-1))
    ui->comboBox->addItem(date.toString("yyyy-MM-dd")); 
```

# mschart - 图表区域内的 MSchart 标签

> ID：11717478
> 
> 赞同：3
> 
> 时间：2012-07-30T08:00:02.480
> 
> 标签：mschart

![在此处输入图像描述](../Images/b03f16f0e93d074c243a98b623f6e724.png)

有人可以告诉我如何在 MSChart 上显示 Total Collection

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T08:13:56.257

您可以使用[`chart.Annotations`](http://msdn.microsoft.com/en-us/library/dd456725.aspx)属性来获得类似的结果。

例如使用以下代码（位于填充图表之后）：

```
var ann = new RectangleAnnotation();
ann.Text = "Total Collection" + Environment.NewLine + "250 Billion";
ann.IsMultiline = true;
ann.AxisX = this.chart1.ChartAreas[0].AxisX;
ann.AxisY = this.chart1.ChartAreas[0].AxisY;
ann.AnchorX = 9;  // as you can see from the image below,
ann.AnchorY = 41; // these values are inside the range

// add the annotation to the chart annotations list
this.chart1.Annotations.Add(ann); 
```

我得到以下结果：

![在此处输入图像描述](../Images/7f1ef6e3896e1ed478abb38cfa4c97d6.png)

注意：
有很多注解类型（`CalloutAnnotation`, `EllipseAnnotation`...），它们有很多属性可以改变样式和行为。您甚至可以设置一个属性以允许注释移动（即`AllowMoving=true`）。

通过智能感知或 MSDN 查看注释属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T17:41:52.167

您可以将属性设置`IsDockedInsideChartArea`为`true`。您还需要指定图例停靠到哪个 ChartArea，并将 position 属性设置为`Auto`。

```
legend.IsDockedInsideChartArea = true;
legend.DockedToChartArea = "ChartArea1"; 
```

[此处](http://msdn.microsoft.com/en-CA/library/system.windows.forms.datavisualization.charting.legend.isdockedinsidechartarea.aspx)有关于此属性和其他图例属性的更多信息。

# wordpress - apache2错误403上的本地wordpress

> ID：11717479
> 
> 赞同：1
> 
> 时间：2012-07-30T08:00:19.427
> 
> 标签：wordpress, apache2, local

我想在本地网络中的 OpenSuse 上运行 wordpress。我的虚拟主机：

```
<VirtualHost 192.168.0.2:99>
 DocumentRoot /var/www/wordnews/
 ServerName local.wordnews.pl
 ErrorLog "/var/log/apache2.err"
 RewriteEngine on
 RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
 RewriteRule .* - [F]
 <Directory /var/www/wordnews>
         Options +Indexes FollowSymLinks +ExecCGI
                 AllowOverride AuthConfig Indexes
         Order allow,deny
         Deny from all
 </Directory>
 </VirtualHost> 
```

并添加到 /etc/hosts ：

```
192.168.0.2 local.wordnews.pl 
```

但是当我尝试在浏览器上打开此地址时，我看到： **错误 403** ，当我尝试 local.wordnews.pl/wp-admin/install.php 时，我看到： **错误 404**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:07:35.933

我认为在你的`Directory`街区里，你想成功`Allow`而不是`Deny`

```
<Directory /var/www/wordnews>
     Options +Indexes FollowSymLinks +ExecCGI
             AllowOverride AuthConfig Indexes
     Order allow,deny
     Allow from all
</Directory> 
```

# python - Python urllib2 错误

> ID：11717481
> 
> 赞同：5
> 
> 时间：2012-07-30T08:00:21.580
> 
> 标签：python, python-2.7, urllib2, gevent

我有一长串需要为我的服务打开的 URL。每当我尝试打开整个列表时，都会在启动程序时收到许多错误，例如：`[Errno 24] Too many open files`. 我正在使用 urllib2 和 gevent。

有没有人有任何解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:30:24.740

使用[Gevent.pool 一次](http://www.gevent.org/gevent.pool.html)只打开一定数量的 url，然后在打开 url 时重用这些 greenlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:58:00.817

由于我们仍然不知道您到底在做什么，我只能猜测：您同时打开了许多 URL，然后您才尝试阅读它们。相反，您应该/可以打开-阅读-关闭它们，然后前进到下一个。

或者，您可以创建一个支持并发的 URL 加载器：打开*一些*url 并尝试同时读取它们。关闭一个后，您可以开始打开下一个。如果您一次将其限制为 5 或 10 个，那么您应该不会再遇到问题了。

# java - JAVA：如何设置线程名称（RMI）？

> ID：11717491
> 
> 赞同：1
> 
> 时间：2012-07-30T08:01:19.810
> 
> 标签：java, multithreading, distributed

[经过我在这里](https://stackoverflow.com/questions/11664741/java-how-to-set-a-global-thread-id)的研究和讨论后，我决定我需要为在分布式系统中属于同一控制流的不同 JVM 上的线程设置相同的名称。线程由例如 RMI 创建。以这种方式创建线程时是否可以设置名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:06:15.297

没有自动方法可以将此信息从客户端传输到服务器。

`Context`听起来您想要/需要在客户端（每个线程？）上设置某种对象并作为方法参数传递给您的 RMI 服务器。该`Context`对象不仅可以包含线程名称，还可以包含其他信息，例如调用进程 pid 等。

然后，您必须使用该`Context`对象来相应地设置线程名称等，`Thread.setName()`一旦它通过电线传递。展望未来，您可以使用它在您的日志框架中设置特定于上下文的信息（例如，使用 Log4j[嵌套诊断上下文](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html)）

进一步自动化方面的使用留给读者进一步练习:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:05:33.720

Thread 类有一个静态方法来`setName(String)`. 如果您可以让线程（无论它们来自何处）运行该方法，那么您应该很高兴。[这些人](http://tomcat.10.n6.nabble.com/Change-thread-name-of-HTTP-worker-threads-at-Runtime-td2143050.html)在与 Tomcat 相关的线程上也有类似的问题。

# java - 为简单的 hadoop mapreduce 作业运行两个 mapper 和两个 reducer

> ID：11717495
> 
> 赞同：5
> 
> 时间：2012-07-30T08:01:35.583
> 
> 标签：java, hadoop, mapreduce

我只是想对使用多个映射器和减速器有更好的了解。我想用一个简单的 hadoop mapreduce 字数统计作业来试试这个。我想为这个字数统计作业运行两个映射器和两个减速器。我需要吗在配置文件上手动配置，或者仅对 WordCount.java 文件进行更改就足够了。

我在单个节点上运行这个作业。我运行这个作业是

> $ hadoop jar job.jar 输入输出

我已经开始了

```
$ hadoop namenode -format
$ hadoop namenode

$ hadoop datanode 
```

sbin$ ./yarn-daemon.sh 启动资源管理器 sbin$ ./yarn-daemon.sh 启动资源管理器

> 我正在运行 hadoop-2.0.0-cdh4.0.0

我的 WordCount.java 文件是

```
package org.apache.hadoop.examples;

import java.io.IOException;
import java.util.StringTokenizer;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.io.IntWritable;
import org.rg.apache.hadoop.fs.Path;
import oapache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class WordCount {
private static final Log LOG = LogFactory.getLog(WordCount.class);

  public static class TokenizerMapper
       extends Mapper<Object, Text, Text, IntWritable>{

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(Object key, Text value, Context context
                    ) throws IOException, InterruptedException {
      StringTokenizer itr = new StringTokenizer(value.toString());
      while (itr.hasMoreTokens()) {
        word.set(itr.nextToken());
        context.write(word, one);
      }
    }
  }

  public static class IntSumReducer
       extends Reducer<Text,IntWritable,Text,IntWritable> {
    private IntWritable result = new IntWritable();

    public void reduce(Text key, Iterable<IntWritable> values,
                       Context context
                       ) throws IOException, InterruptedException {
      int sum = 0;
      //printKeyAndValues(key, values);

      for (IntWritable val : values) {
        sum += val.get();
      LOG.info("val = " + val.get());
      }
      LOG.info("sum = " + sum + " key = " + key);
      result.set(sum);
      context.write(key, result);
      //System.err.println(String.format("[reduce] word: (%s), count: (%d)", key, result.get()));
    }

  // a little method to print debug output
    private void printKeyAndValues(Text key, Iterable<IntWritable> values)
    {
      StringBuilder sb = new StringBuilder();
      for (IntWritable val : values)
      {
        sb.append(val.get() + ", ");
      }
      System.err.println(String.format("[reduce] key: (%s), value: (%s)", key, sb.toString()));
    }
  }

  public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
    if (otherArgs.length != 2) {
      System.err.println("Usage: wordcount <in> <out>");
      System.exit(2);
    }
    Job job = new Job(conf, "word count");
    job.setJarByClass(WordCount.class);
    job.setMapperClass(TokenizerMapper.class);
    job.setCombinerClass(IntSumReducer.class);
    job.setReducerClass(IntSumReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
    FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));

    System.exit(job.waitForCompletion(true) ? 0 : 1);
}
} 
```

你们中的任何人现在可以帮我为这个字数统计工作运行两个映射器和减速器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T09:13:52.697

Gladnick：如果您打算使用默认的**TextInputFormat**，那么在输入文件的数量上至少会有尽可能多的映射器（或者更多，取决于文件大小）。因此，只需**将 2 个文件放入您的输入目录**，这样您就可以运行 2 个映射器。（建议此解决方案，因为您计划将其作为测试用例运行）。

现在您已经要求 2 个减速器，您需要做的就是在提交作业之前在您的 main 中**使用 job.setNumReduceTasks(2)**。

之后，只需准备一个应用程序的 jar 并在**hadoop 伪集群**中运行它。

如果你需要指定哪个词去哪个reducer，你可以在Partitioner类中指定。

```
 Configuration configuration = new Configuration();
        // create a configuration object that provides access to various
        // configuration parameters
        Job job = new Job(configuration, "Wordcount-Vowels & Consonants");
        // create the job object and set job name as Wordcount-Vowels &
        // Consonants
        job.setJarByClass(WordCount.class);
        // set the main class
        job.setNumReduceTasks(2);
        // set the number of reduce tasks required
        job.setMapperClass(WordCountMapper.class);
        // set the map class for the job
        job.setCombinerClass(WordCountCombiner.class);
        // set the combiner class for the job
        job.setPartitionerClass(VowelConsonantPartitioner.class);
        // set the partitioner class for the job
        job.setReducerClass(WordCountReducer.class);
        // set the reduce class for the job
        job.setOutputKeyClass(Text.class);
        // set the output type of key (the word) expected from the job, Text
        // analogous to String
        job.setOutputValueClass(IntWritable.class);
        // set the output type of value (the count) expected from the job,
        // IntWritable analogous to int
        FileInputFormat.addInputPath(job, new Path(args[0]));
        // set the input directory for fetching the input files
        FileOutputFormat.setOutputPath(job, new Path(args[1])); 
```

这应该是您的主程序的结构。如果需要，您可以包括组合器和分区器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:21:40.327

对于映射器集

```
mapred.max.split.size 
```

到文件大小的一半。

对于减速器，将它们显式设置为 2

```
 mapred.reduce.tasks=2 
```

# android - SQLiteException：无法识别的令牌：“'”

> ID：11717503
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:02:30.647
> 
> 标签：android, sqlite

```
INSERT INTO ta(id,contact_id,street_number,street_name,polygon,pcenter,address,country_id,state_id,city_name,zip,comments,latitude,longitude,geom,
status_code_id,created,modified,creator_id,isSync,company_id) values ('000c5c02-b9a3-11e1-b65f-0025900e9333','404ed266-b9a0-11e1-b65f-0025900e9333',
'694',' Samson','null','null','null','null','null','null','null','null','null','null',
'??????????????????????????3?
D?F@????_tR???????F@????ZtR?X?A??F@??R?WtR?i???F@j?$?\tR?3?
D?F@????_tR?',
'null','1969-12-31 19:00:00','1969-12-31 19:00:00','null','0','null')

07-30 12:18:07.374: W/System.err(17208): android.database.sqlite.SQLiteException: unrecognized token: "'": , while compiling: INSERT INTO ta(id,contact_id,street_number,street_name,polygon,pcenter,address,country_id,state_id,city_name,zip,comments,latitude,longitude,geom,status_code_id,created,modified,creator_id,isSync,company_id) values ('000c5cac-b9a3-11e1-b65f-0025900e9333','404ed2a2-b9a0-11e1-b65f-0025900e9333','704',' Samson','null','null','null','null','null','null','null','null','null','null','��������������������������[!?_??F@?x?atR??V???F@?A?`tR?b?????F@Yg?etR??????F@????ftR?[!?_??F@?x?atR?','null','1969-12-31 19:00:00','1969-12-31 19:00:00','null','0','null')

07-30 12:18:07.374: W/System.err(17208):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)

07-30 12:18:07.374: W/System.err(17208):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:05:57.077

可能是您将字符串值插入到 int 列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:31:07.180

您可以尝试使用以下方法将您的输入编码为正确的形式。当您尝试插入的任何值中有一个单引号字符时，就会发生此异常。

> DatabaseUtils.sqlEscapeString(String)

# php - php pdf to text - 去除特殊字符

> ID：11717504
> 
> 赞同：1
> 
> 时间：2012-07-30T08:02:36.653
> 
> 标签：php

我正在使用 phpclasses.org 网站上的一个类，将我的 pdf 文档转换为文本。生成的文本有一堆 fnny 字符，看起来像中文或文本之间的东西。查看源代码： 像这样： 茀 䠀 䠀 圀 䰀 有人可以帮我摆脱它们，还有更多，这些只是我可以输入的几个。php类：[http ://www.phpclasses.org/browse/file/31030.html](http://www.phpclasses.org/browse/file/31030.html)

# c++ - 宏增加值然后连接

> ID：11717508
> 
> 赞同：2
> 
> 时间：2012-07-30T08:02:58.040
> 
> 标签：c++, macros, concatenation

我想创建一个递归宏，它将创建“下一个”类。

例子：

```
#define PRINTME(indexNum) class m_##(indexNum+1) { } 
```

被`indexNum + 1`评估为`int`，并且不会连接到类名。

在连接之前，如何使编译器对其进行评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T08:43:09.903

如果您想在每次`PRINTME`调用时生成唯一的类名，则以下是一种方法：

```
#define CONCATE1(X,Y) X##Y
#define CONCATE(X,Y)  CONCATE1(X,Y)

#define PRINTME class CONCATE(m_,__COUNTER__) {} 
```

`__COUNTER__`是 gcc 中的一个扩展，我不确定它是否存在于其他编译器中。保证每次调用此宏时编译器都会加 1。
（在这种情况下，您无法使用`__LINE__`或`__FILE__`有效。）

[演示](http://ideone.com/m3s2t)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T08:09:01.180

简单的答案是你不能。预处理器一般处理文本和标记；唯一的算术是在 in`#if`和`#elif`指令中进行的。

此外，宏扩展不是递归的。在扩展期间，正在扩展的宏被禁用，并且不可用于进一步替换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T08:37:10.987

嗯，这是可行的，这取决于你忍受丑陋代码的动力和能力。首先定义增量宏：

```
#define PLUS_ONE(x) PLUS_ONE_##x

#define PLUS_ONE_0 1
#define PLUS_ONE_1 2
#define PLUS_ONE_2 3
#define PLUS_ONE_3 4
#define PLUS_ONE_4 5
#define PLUS_ONE_5 6
#define PLUS_ONE_7 8
#define PLUS_ONE_8 9
#define PLUS_ONE_9 10
// and so on... 
```

您不能只`PLUS_ONE(x)`在连接操作中使用，因为预处理器不会扩展它。但是，有一种方法 - 您可以滥用预处理器扩展可变参数的事实。

```
// pass to variadic macro to expand an argument
#define PRINTME(indexNum)       PRINTME_PRIMITIVE(PLUS_ONE(indexNum))
// do concatenation
#define PRINTME_PRIMITIVE(...)  class m_ ## __VA_ARGS__ { } 
```

完毕！

```
PRINTME(1); // expands to class m_2 { }; 
```

您是否考虑过改用模板？

# c++ - 使用 Boost Spirit 和 Fusion 以关联方式解析结构

> ID：11717509
> 
> 赞同：3
> 
> 时间：2012-07-30T08:02:58.643
> 
> 标签：c++, parsing, boost-spirit, boost-fusion

我正在尝试将键值字符串解析为结构。有些键值可能不存在或者顺序不同，所以我想用它`boost::fusion`来调整结构，然后用`at_key<>`指令解析成它。

```
#include <iostream>
#include <string>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/adapted.hpp>
#include <boost/fusion/sequence.hpp>

using namespace std;
namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;
namespace phx = boost::phoenix;

using boost::fusion::at_key;

typedef string::const_iterator iter_type;

struct Couple {
    int a;
    int b;
    Couple() : a(0), b(0) {}
};

namespace keys {
    struct first;
    struct second;
}

BOOST_FUSION_ADAPT_ASSOC_STRUCT(
    Couple,
    (int, a, keys::first)
    (int, b, keys::second)
    )

struct G: qi::grammar< iter_type, Couple(), ascii::space_type >
{
    G() : G::base_type( start_rule ) {
        using qi::_val;
        using qi::_1;
        using qi::_2;

        start_rule =
                        ( "first" >> qi::int_
                                [ at_key<keys::first>(_val) = _1 ]
                        )
                    ^
                        ( "second" >> qi::int_
                                [ at_key<keys::second>(_val) = _1 ]
                        );
    }

    qi::rule< iter_type, Couple(), ascii::space_type > start_rule;
};

int main() {
    Couple couple;
    string example = "second 2 first 1";
    iter_type begin( example.begin() );
    iter_type end( example.end() );

    // test at_key -- compiles with no error
    at_key<keys::second>(couple) = 5;

    bool ok = qi::phrase_parse( begin, end, G(), ascii::space, couple );
    if ( ok )
        cout << couple.a << " " << couple.b << endl;
    else
        cout << "Parse failed" << endl;

    return 0;
} 
```

问题是代码无法编译（Boost 1.50.0，g++ 4.5.0，MinGW），显然在`at_key<>`规则上失败了：

```
In file included from D:\projects\workspace\boost/boost/fusion/support/category_of.hpp:10:0,
                 from D:\projects\workspace\boost/boost/fusion/include/category_of.hpp:10,
                 from D:\projects\workspace\boost/boost/proto/fusion.hpp:20,
                 from D:\projects\workspace\boost/boost/proto/core.hpp:21,
                 from D:\projects\workspace\boost/boost/proto/proto.hpp:12,
                 from D:\projects\workspace\boost/boost/spirit/home/support/meta_compiler.hpp:19,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/include/qi.hpp:16,
                 from ..\src\spirit02_test.cpp:11:
D:\projects\workspace\boost/boost/fusion/support/detail/category_of.hpp: In instantiation of 'boost::fusion::detail::fusion_category_of<const boost::phoenix::actor<boost::spirit::attribute<0> > >':
D:\projects\workspace\boost/boost/fusion/support/category_of.hpp:44:58:   instantiated from 'boost::fusion::extension::category_of_impl<boost::fusion::non_fusion_tag>::apply<const boost::phoenix::actor<boost::spirit::attribute<0> > >'
D:\projects\workspace\boost/boost/fusion/support/category_of.hpp:66:9:   instantiated from 'boost::fusion::traits::category_of<const boost::phoenix::actor<boost::spirit::attribute<0> > >'
D:\projects\workspace\boost/boost/fusion/support/category_of.hpp:73:9:   instantiated from 'boost::fusion::traits::is_associative<const boost::phoenix::actor<boost::spirit::attribute<0> > >'
D:\projects\workspace\boost/boost/mpl/if.hpp:67:11:   instantiated from 'boost::mpl::if_<boost::fusion::traits::is_associative<const boost::phoenix::actor<boost::spirit::attribute<0> > >, boost::fusion::result_of::key_of<mpl_::arg<1> >, boost::fusion::result_of::value_of<mpl_::arg<1> > >'
D:\projects\workspace\boost/boost/fusion/algorithm/query/find.hpp:45:9:   instantiated from 'boost::fusion::result_of::find<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:38:17:   instantiated from 'boost::fusion::extension::at_key_impl<boost::fusion::non_fusion_tag>::apply<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:71:9:   instantiated from 'boost::fusion::result_of::at_key<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
..\src\spirit02_test.cpp:54:35:   instantiated from here
D:\projects\workspace\boost/boost/fusion/support/detail/category_of.hpp:15:38: error: no type named 'category' in 'const struct boost::phoenix::actor<boost::spirit::attribute<0> >'
In file included from D:\projects\workspace\boost/boost/proto/args.hpp:21:0,
                 from D:\projects\workspace\boost/boost/proto/core.hpp:14,
                 from D:\projects\workspace\boost/boost/proto/proto.hpp:12,
                 from D:\projects\workspace\boost/boost/spirit/home/support/meta_compiler.hpp:19,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/include/qi.hpp:16,
                 from ..\src\spirit02_test.cpp:11:
D:\projects\workspace\boost/boost/mpl/if.hpp: In instantiation of 'boost::mpl::if_<boost::fusion::traits::is_associative<const boost::phoenix::actor<boost::spirit::attribute<0> > >, boost::fusion::result_of::key_of<mpl_::arg<1> >, boost::fusion::result_of::value_of<mpl_::arg<1> > >':
D:\projects\workspace\boost/boost/fusion/algorithm/query/find.hpp:45:9:   instantiated from 'boost::fusion::result_of::find<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:38:17:   instantiated from 'boost::fusion::extension::at_key_impl<boost::fusion::non_fusion_tag>::apply<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:71:9:   instantiated from 'boost::fusion::result_of::at_key<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
..\src\spirit02_test.cpp:54:35:   instantiated from here
D:\projects\workspace\boost/boost/mpl/if.hpp:67:11: error: 'value' is not a member of 'boost::fusion::traits::is_associative<const boost::phoenix::actor<boost::spirit::attribute<0> > >'
D:\projects\workspace\boost/boost/mpl/if.hpp:70:41: error: 'value' is not a member of 'boost::fusion::traits::is_associative<const boost::phoenix::actor<boost::spirit::attribute<0> > >'
In file included from D:\projects\workspace\boost/boost/fusion/sequence/intrinsic.hpp:20:0,
                 from D:\projects\workspace\boost/boost/fusion/include/intrinsic.hpp:10,
                 from D:\projects\workspace\boost/boost/proto/fusion.hpp:22,
                 from D:\projects\workspace\boost/boost/proto/core.hpp:21,
                 from D:\projects\workspace\boost/boost/proto/proto.hpp:12,
                 from D:\projects\workspace\boost/boost/spirit/home/support/meta_compiler.hpp:19,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/include/qi.hpp:16,
                 from ..\src\spirit02_test.cpp:11:
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp: In instantiation of 'boost::fusion::extension::at_key_impl<boost::fusion::non_fusion_tag>::apply<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>':
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:71:9:   instantiated from 'boost::fusion::result_of::at_key<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
..\src\spirit02_test.cpp:54:35:   instantiated from here
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:38:17: error: no type named 'type' in 'struct boost::fusion::result_of::find<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::first>'
..\src\spirit02_test.cpp: In constructor 'G::G()':
..\src\spirit02_test.cpp:54:35: error: no matching function for call to 'at_key(const boost::spirit::_val_type&)'
In file included from D:\projects\workspace\boost/boost/fusion/sequence/intrinsic.hpp:20:0,
                 from D:\projects\workspace\boost/boost/fusion/include/intrinsic.hpp:10,
                 from D:\projects\workspace\boost/boost/proto/fusion.hpp:22,
                 from D:\projects\workspace\boost/boost/proto/core.hpp:21,
                 from D:\projects\workspace\boost/boost/proto/proto.hpp:12,
                 from D:\projects\workspace\boost/boost/spirit/home/support/meta_compiler.hpp:19,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi/action.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/home/qi.hpp:14,
                 from D:\projects\workspace\boost/boost/spirit/include/qi.hpp:16,
                 from ..\src\spirit02_test.cpp:11:
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp: At global scope:
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp: In instantiation of 'boost::fusion::extension::at_key_impl<boost::fusion::non_fusion_tag>::apply<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::second>':
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:71:9:   instantiated from 'boost::fusion::result_of::at_key<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::second>'
..\src\spirit02_test.cpp:58:36:   instantiated from here
D:\projects\workspace\boost/boost/fusion/sequence/intrinsic/at_key.hpp:38:17: error: no type named 'type' in 'struct boost::fusion::result_of::find<const boost::phoenix::actor<boost::spirit::attribute<0> >, keys::second>'
..\src\spirit02_test.cpp: In constructor 'G::G()':
..\src\spirit02_test.cpp:58:36: error: no matching function for call to 'at_key(const boost::spirit::_val_type&)' 
```

如果我使用更简单的规则（没有关联性），一切都可以编译并且工作正常，但是这个解决方案有点脆弱：

```
 // A non-associative solution
    //start_rule %= ( ("first" >> qi::int_) ^ ("second" >> qi::int_) ); 
```

为什么我不能`at_key`在语义动作中使用？有没有更好的方法将“关联”解析为非关联结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T23:12:41.140

你需要一个惰性版本的 at_key。遗憾的是，这个[补丁](http://boost.2283326.n4.nabble.com/Lazy-at-key-for-phoenix-2-td3746575.html)从未进入 Spirit（还）：

```
/*=============================================================================
    Copyright (c) 2005-2008 Hartmut Kaiser
    Copyright (c) 2005-2007 Joel de Guzman
    Copyright (c) 2011      Michael Caisse

    Distributed under the Boost Software License, Version 1.0\. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
==============================================================================*/
#ifndef PHOENIX_SEQUENCE_AT_KEY_HPP
#define PHOENIX_SEQUENCE_AT_KEY_HPP

#include <boost/fusion/include/at_key.hpp>
#include <boost/spirit/home/phoenix/core/actor.hpp>
#include <boost/spirit/home/phoenix/core/compose.hpp>
#include <boost/type_traits/remove_reference.hpp>

namespace boost { namespace phoenix
{
    template <typename Key>
    struct at_key_eval
    {
        template <typename Env, typename Tuple>
        struct result
        {
            typedef typename Tuple::template result<Env>::type tuple;
            typedef typename
                fusion::result_of::at_key<
                    typename remove_reference<tuple>::type, Key
                >::type
            type;
        };

        template <typename RT, typename Env, typename Tuple>
        static RT
        eval(Env const& env, Tuple const& t)
        {
            return fusion::at_key<Key>(t.eval(env));
        }
    };

    template <typename Key, typename Tuple>
    inline actor<typename as_composite<at_key_eval<Key>, Tuple>::type>
    at_key(Tuple const& tup)
    {
        return compose<at_key_eval<Key> >(tup);
    }

}}

#endif 
```

如果添加它，您可以使用`boost::phoenix::at_key`：

```
using boost::phoenix::at_key; 
```

事情将按预期编译和工作。当然，链接的补丁也修改`boost/spirit/home/phoenix/fusion.hpp`为包含这个新标题。

# java - java: 使用 ssh 命令 tom 对 gerrit 进行多行注释

> ID：11717511
> 
> 赞同：0
> 
> 时间：2012-07-30T08:03:10.217
> 
> 标签：java, ssh, multiline, gerrit

例如，当我使用 shell 对 gerrit 发表评论时，

ssh -p 29418 gerritlink gerrit 审查 --verified=0 '--message=[FAILURE] 提交消息检查失败。

PCPID 不存在。

A360-ID 不存在。d9a5d29799ada8237679efd1121cd7e3a85f333d

**这在 gerrit 评论中效果很好，你可以在那里看到多行。** ***但是当我使用java调用命令时，所有的句子都在一行中。如何在java中的多行中进行注释？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T22:09:28.177

* * *

这里有两个对我有用的解决方案：

1.  Gerrit 折叠单个换行符，所以使用双换行符“\n\n”而不是“\r\n”。
2.  在每一行前加上空格，这将说服 Gerrit 将它们显示为单独的等距行。该段落使用 HTML 预样式进行格式化，这对于代码示例很有用。

来源：[Re：gerrit](http://comments.gmane.org/gmane.comp.version-control.repo/5321)和[注释格式中的多行注释](https://groups.google.com/forum/#!topic/repo-discuss/S58dBK1nQBw)

我还必须使用 ProcessBuilder 运行 ssh 命令才能使上述解决方案正常工作。

例如，使用解决方案 #1 发送消息：

```
String solution1_msg = "Test1\n\nThis is a test\n\nTesting has completed"
String solution2_msg = "Test2\n   This is a test\n   Testing has completed"

ProcessBuilder pb = new ProcessBuilder("ssh", "-p", "29418", "<gerrit server>",
    "gerrit", "review", "--message=\"" + solution1_message + "\"commit SHA-1>");
pb.redirectErrorStream(); //redirect stderr to stdout
Process process = pb.start();
InputStream inputStream = process.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
String line = null;
while((line = reader.readLine())!= null) {
  System.out.println(line);
}
process.waitFor(); 
```

相同的代码也适用于解决方案#2；`solution2_message`作为消息传递而不是`solution1_message`.

资料来源：[如何通过 Java 在 SSH 中运行多个命令？](https://stackoverflow.com/a/7611715)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:28:41.000

我很确定这是否会有所帮助，但您可以尝试使用`;`or分隔您的命令`&&`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T15:07:50.147

我将在 shell 中解释它。问题与使用不正确的引号有关。

```
$> msg="- line1                               
- line2
- line3
- line4"
$> echo ${msg}
$> - line1 - line2 - line3 - line4
$> echo "${msg}"
- line1
- line2
- line3
- line4 
```

Gerrit 命令也是如此，您必须确保所需的引号位于所需的位置。

```
ssh -p 29418 admin@localhost gerrit review 3,2 --project test -m "'"${msg}"'" --code-review 1 
```

管理员补丁集 2：

*   你好 - wordl - line3 - line4

```
ssh -p 29418 admin@localhost gerrit review 3,2 --project test -m "'""${msg}""'" --code-review 1 
```

管理员补丁集 2：

*   第1行
*   线2
*   第 3 行
*   第 4 行

# ios - iOS 上的动态 PVRTC 压缩

> ID：11717512
> 
> 赞同：4
> 
> 时间：2012-07-30T08:03:10.847
> 
> 标签：ios, compression, textures

我正在编写一个占用大量 GPU 内存的 iPhone 应用程序。一些纹理是由应用程序以程序方式创建的，这意味着我无法将它们压缩到 PVRTC 以减少它们在 GPU 上的大小（从而减少内存）。有谁知道这样做的图书馆？我找到的最接近的是 PVRTexLib ( [http://www.imgtec.com/powervr/insider/powervr-pvrtexlib.asp](http://www.imgtec.com/powervr/insider/powervr-pvrtexlib.asp) )，但那是针对 MacOSX，而​​不是 iOS。

我发现这个问题很相似：[Convert .png to PVRTC *on* the iPhone](https://stackoverflow.com/questions/1020944/convert-png-to-pvrtc-on-the-iphone)但他们把它带到了不同的方向（为什么你不应该这样做）。但是，我的应用程序使用 OpenGL，所以我确实从能够使用 PVRTC 中受益匪浅。

有人知道这样的图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-20T00:22:49.670

Imagination 的 PVRTexTool 包括一个 SDK 和一个用于包括 arm 在内的多个平台的预编译库。这应该可以链接到 iPhone 可执行文件。

[https://community.imgtec.com/developers/powervr/tools/pvrtextool/](https://community.imgtec.com/developers/powervr/tools/pvrtextool/)

然而，也许更有趣的是，你能编写着色器来根据需要重新映射颜色吗？如果您可以在着色器中应用所需的功能，则无需重新压缩纹理或更改其位。

# php - 从 mysqli 准备好的语句生成正确数组格式的问题

> ID：11717515
> 
> 赞同：0
> 
> 时间：2012-07-30T08:03:27.580
> 
> 标签：php, json, mysqli, prepared-statement

我似乎找不到从数据库结果集中形成数组的正确方法。目的是将结果数组格式化为 JSON 格式。我目前得到的只是将第一个结果放入数组中，就像这样

> 数组 ( [title] => 岩石 [类别] => 矿物 [id] => 39 )

当 JSON 编码时，我希望得到的是

> {"title":"Rock","category":"Mineral","id":39}{"title":"Rock","category":"Music","id":40}

编码

```
 $squery = "%rock%";
    $resultArray = array();
    include_once("mysqli_connect.php");
    $table = "articles";
    $sql = "SELECT title, category, id
            FROM $table
            WHERE title LIKE ?";
    $stmt = mysqli_stmt_init($dbh);
    if (!(mysqli_stmt_prepare($stmt, $sql))) {
        echo("Write to DB failed ");
    }
    else { //statement prepared ok
        mysqli_stmt_bind_param($stmt, 's', $squery);
        mysqli_stmt_execute($stmt);
        mysqli_stmt_bind_result($stmt, $sTitle, $sCat, $sId);

        while(mysqli_stmt_fetch($stmt)) {
            $resultArray = ["title" => $sTitle,
                            "category" => $sCat,
                            "id" => $sId];
        }
        mysqli_stmt_close($stmt);
    }
    echo(json_encode(array_unique($resultArray))); 
```

我已经看到 Stack 上有一些类似的问题，但他们似乎以面向对象的风格回答了这个问题，目前我只熟悉程序。

# networking - Win32_NetworkAdapterConfiguration 与非管理用户（拒绝访问）

> ID：11717516
> 
> 赞同：0
> 
> 时间：2012-07-30T08:03:32.220
> 
> 标签：networking, wmi

我正在尝试在本地更改网络适配器的一些配置。我必须使用非管理用户，但当我尝试调用方法时，我只得到返回值“91”，它代表“拒绝访问”。可以为“EnableStatic”方法设置权限，但“SetDNSServerSearchOrder”根本不起作用。它总是返回“拒绝访问”。我什至无法禁用网络适配器（在 Win32_NetworkAdapter 中）。管理员用户一切正常。由于我对“EnableStatic”有同样的问题，我很确定，一定有办法让它与其他方法一起工作。我在 wmimgmt.msc 中为所有命名空间设置了安全选项，我在 dcomcnfg 中设置了限制，我在注册表中为 tcpip 授予了权限，在分布式 com-users、性能组、网络配置操作员中添加了用户，但没有办法让它工作。当我的工具运行时，我认识到没有 dns ip。因此，尽管该方法返回“拒绝访问”，但有些事情发生了变化。有任何想法吗？自三周以来，即使是微软也无法帮助我。当我以管理员身份登录时，该工具运行没有任何问题。这是我的 C# 代码：（对于我的书面英语中的一些错误，我深表歉意；））当我以管理员身份登录时，该工具运行没有任何问题。这是我的 C# 代码：（对于我的书面英语中的一些错误，我深表歉意；））当我以管理员身份登录时，该工具运行没有任何问题。这是我的 C# 代码：（对于我的书面英语中的一些错误，我深表歉意；））

```
 private static ManagementScope CreateScope(string strScope)
    {
        ManagementScope scope = new ManagementScope(strScope);
        scope.Options.Impersonation = ImpersonationLevel.Impersonate;
        scope.Options.Authentication = AuthenticationLevel.Packet;
        return scope;
    }

    public static void SetIP(String strScope, String strQuery, string IPAddress, string SubnetMask, string Gateway, string DNSServer1, string DNSServer2)
    {
        ManagementScope scope = CreateScope(strScope);
        SelectQuery query = new SelectQuery(strQuery);
        Collection<object> objCol = new Collection<object>();
        scope.Connect();
        ManagementObjectCollection mobjCol = null;
        using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query))
        {
            mobjCol = searcher.Get();
        }
        foreach (ManagementObject objMO in mobjCol)
        {
            try
            {
                ManagementBaseObject objNewIP = null;
                ManagementBaseObject objSetIP = null;
                ManagementBaseObject objNewGate = null;
                ManagementBaseObject objNewDNS = null;

                objNewIP = objMO.GetMethodParameters("EnableStatic");
                objNewGate = objMO.GetMethodParameters("SetGateways");
                objNewDNS = objMO.GetMethodParameters("SetDNSServerSearchOrder");

                //Set DefaultGateway
                objNewGate["DefaultIPGateway"] = new string[] { Gateway };
                objNewGate["GatewayCostMetric"] = new int[] { 1 };

                //Set IPAddress and Subnet Mask
                objNewIP["IPAddress"] = new string[] { IPAddress };
                objNewIP["SubnetMask"] = new string[] { SubnetMask };

                //Set DNS servers
                objNewDNS["DNSServerSearchOrder"] = new string[] { DNSServer1, DNSServer2 };

                //Invoke all changes
                objSetIP = objMO.InvokeMethod("EnableStatic", objNewIP, null);
                MessageBox.Show("EnableStatic: " + objSetIP["ReturnValue"].ToString());
                objSetIP = objMO.InvokeMethod("SetGateways", objNewGate, null);
                MessageBox.Show("SetGateways: " + objSetIP["ReturnValue"].ToString());
                objSetIP = objMO.InvokeMethod("SetDNSServerSearchOrder", objNewDNS,null);                                                               
                MessageBox.Show("SetDNSServerSearchOrder: " + objSetIP["ReturnValue"].ToString());

            }
            catch (ManagementException ex)
            {
                MessageBox.Show("Unable to Set IP : " + ex.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:54:50.277

非管理用户需要权限才能运行 WMI 查询。您可以使用 WMI 控件 [在 ServerManager / 配置或计算机管理 / 服务和应用程序下] 设置相关权限参考：[http ://technet.microsoft.com/en-us/library/cc775497(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc775497(v=ws.10).aspx)

尝试向 CIMV2 命名空间中的非管理员用户提供执行方法、启用帐户和提供者写入权限。

# android - WallpaperManager 错误的图像大小

> ID：11717517
> 
> 赞同：0
> 
> 时间：2012-07-30T08:03:38.620
> 
> 标签：android, wallpaper

我现在正在使用 WallpaperManager。这是我的代码：

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(MainActivity.this);
wallpaperManager.setResource(R.drawable.some_image); 
```

当我[将此图像](http://www.mobilethemesworld.com/galaxy-s3-wallpaper/)设置为我的墙纸时，它太大（[截图](https://dl.dropbox.com/u/17350105/wallpaper.png)），但我认为尺寸（720*1280）是正确的。

即使我用浏览器打开页面，长按图片，然后选择设置墙纸的选项，仍然是错误的尺寸。我能做些什么来解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:27:21.610

好的，我终于解决了。图片尺寸必须为 1280*1280，而不是 720*1280。

# performance - 为什么我的 postgreSQL 索引没有被使用？

> ID：11717524
> 
> 赞同：2
> 
> 时间：2012-07-30T08:04:11.813
> 
> 标签：performance, postgresql, datetime, indexing

当我使用以下查询时，响应时间真的很糟糕（有时超过一分钟！）。

```
select * from cdr where start_time < now() - interval '4 hours' and final = 0 limit 50 
```

我正在尝试获取 final=0 且开始时间超过 4 小时的记录。以下是我在桌子上的索引：

```
CREATE INDEX "cdr_Final_ix"
ON cdr
USING btree
(start_time , final ); 
```

以下是解释分析：

```
"Limit  (cost=0.00..167.81 rows=50 width=188) (actual time=64491.409..64650.635 rows=11 loops=1)"
"  ->  Seq Scan on cdr  (cost=0.00..749671.06 rows=223372 width=188) (actual time=64491.407..64650.625 rows=11 loops=1)"
"Filter: ((final = 0) AND (start_time < (now() - '04:00:00'::interval)))"
"Total runtime: 64650.690 ms" 
```

任何帮助将不胜感激。谢谢，阿里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:21:35.757

```
-- DROP SCHEMA tmp CASCADE;
-- CREATE SCHEMA tmp ;
SET search_path='tmp';

-- Generate some data
CREATE TABLE cdr
        ( start_time TIMESTAMP NOT NULL
        , final INTEGER
        );
INSERT INTO cdr (start_time,final)
SELECT gs, random() * 1000
FROM generate_series('2012-07-01 00:00:00', '2012-08-01 00:00:00', '1 s'::interval) gs
        ;
DROP INDEX "cdr_Final_ix";
CREATE INDEX "cdr_Final_ix"
ON cdr
USING btree
(start_time , final )
WHERE final = 0 -- partial index here
;

-- Do some data-massaging
-- UPDATE cdr
-- SET final = random() * 100
-- WHERE final = 0
-- AND random() < 0.2 ;

VACUUM ANALYZE cdr;

-- SET tuning to default (the worst possible)
SET random_page_cost = 4;
SET work_mem = 64;
SET effective_cache_size = 64;
-- SET shared_buffers = 64;

EXPLAIN ANALYZE
SELECT * from cdr
WHERE start_time < now() - interval '4 hours'
AND final = 0
ORDER BY start_time
LIMIT 50
        ; 
```

结果：

```
 QUERY PLAN                                                            
----------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.01..88.49 rows=50 width=12) (actual time=0.191..0.452 rows=50 loops=1)
   ->  Index Scan using "cdr_Final_ix" on cdr  (cost=0.01..4310.95 rows=2436 width=12) (actual time=0.188..0.321 rows=50 loops=1)
         Index Cond: ((start_time < (now() - '04:00:00'::interval)) AND (final = 0))
 Total runtime: 0.569 ms
(4 rows) 
```

# python - IF ... Elif...Else 流

> ID：11717527
> 
> 赞同：2
> 
> 时间：2012-07-30T08:04:31.393
> 
> 标签：python, flow

我创建了一个带有 if 流控制的函数，我想知道一些关于它的事情。

```
class Supplier(Process):

    def weeklySupply(self):
        global D1Vals
        xMeet = D1Vals[0]
        lead = 0
        capac = 150.0
        supply = 0
        if stocked.amount >= 15000:
            supply = 0
            yield put, self, stocked, supply
            S1Vals.append(0)
        elif supply >= capac:
            supply = capac
            yield put, self, stocked, supply
            S1Vals.append(capac)
        else:
            supply = random.triangular(.70 * xMeet , xMeet , xMeet * 1.05)
            yield put, self, stocked, supply
            print ('Week:'+'%6.0f:Supplied: %6.0f units. CurSupply = %6.0f' %
                   (now() + 1., supply, stocked.amount))
            yield hold, self, lead
            S1Vals.append(supply)
            del D1Vals[0] 
```

我虽然编码的是：

*   如果库存对象中的数量 >= 15000，则该对象生成零供应，或者如果生成的供应值大于预定义的“capac”数量，则供应值 =“capac”。

*   如果以上均不成立，则供应值生成为随机分布。但是，当我得到输出时，供应值确实超过了 150 的“容量”值。

我是否误解了如何进行流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:40:59.200

不要像您在问题中所做`if elif`的那样将结构与某种混淆。`or`仅当 条件为`elif`时才会评估`if`条件`False`。我想，你真正想要的是：

```
if stocked.amount >= 15000:
    if supply >= capac:
        supply = capac
        yield put, self, stocked, supply
        S1Vals.append(capac)
     else:
        supply = 0
        yield put, self, stocked, supply
        S1Vals.append(0)
else:
    supply = random.triangular(.70 * xMeet , xMeet , xMeet * 1.05)
    ... 
```

但这只有`supply`在函数开头没有用 0 初始化时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:59:00.133

似乎是一种享受，还有一些值得我思考的好事情。我能看到的唯一问题是现在我的 S1Vals 列表已停止将零供应附加到列表中。我可以在我的输出图上看到这一点，也可以在我执行 len(S1Vals) 时看到这一点。最终代码与您的建议是：

```
if stocked.amount >= 15000:
        if supply >= capac:
            supply = capac
            S1Vals.append(capac)
            yield put, self, stocked, supply
        else: 
            supply = 0.0
            yield put, self, stocked, supply
            S1Vals.append(supply)
    else:
        supply = min(capac, random.triangular(.70 * xMeet , xMeet , xMeet * 1.05))
        yield put, self, stocked, supply
        print ('Week:'+'%6.0f:Supplied: %6.0f units. CurSupply = %6.0f' %
               (now() + 1., supply, stocked.amount))
        yield hold, self, lead
        S1Vals.append(supply)
        del D1Vals[0] 
```

为了到达这里，我使用了上面来自 MaxPower 的流量建议，也 `min(supply,capac)`，并声明了一个`global supply`. 最后一个问题似乎`supply = 0.0`永远不会出现，但它真的应该吗？

# objective-c - 全屏加载视图不起作用

> ID：11717528
> 
> 赞同：1
> 
> 时间：2012-07-30T08:04:32.423
> 
> 标签：objective-c, ios

我一直在为我的应用程序开发全屏加载视图，但它不能阻止任何用户交互。我实现它的方式是这样的：

1.  创建一个单例对象 -`LoadingView`
2.  调用`[LoadingView show]`- 将加载视图添加到`[[[UIApplication sharedApplication] delegate] window]`

所以我想问：

1.  我的概念错了吗？
2.  是否有任何方法调用可以禁用所有用户与我的应用程序的交互？
3.  还有另一种更好的方法吗？（比起使用别人的库，我更喜欢了解里面的原理）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:29:34.200

我使用这种方式来阻止用户交互：

1.  使用窗口框架创建 UIView
2.  将视图的用户交互设置为 true
3.  （可选）添加 UIActivityIndi​​cator 以查看
4.  将视图添加到窗口子视图
5.  当我需要显示它时，我将 hidden 设置为 NO 并使用 bringSubviewToFront 函数显示加载视图
6.  当我不需要它时，我将 hidden 设置为 YES 并使用 sendSubviewToBack

* * *

```
id application = [[UIApplication sharedApplication] delegate];
UIView *loadingView = [[UIView alloc] initWithFrame:[[application window] frame]];
loadingView.userInteractionEnabled = YES;
loadingView.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
[[application window] addSubview:loadingView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:48:56.517

您想在应用程序启动时创建启动画面吗？如果是这样，您需要做的就是将名为`Default.png`和/或`Default@2x.png`（用于视网膜显示器）的图像文件添加到您的项目中。此图像将用作应用程序启动时的初始屏幕。

您还可以控制启动画面`info.plist`文件。

[在此处](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)阅读有关 iOS 启动屏幕的更多信息。

# arrays - 为什么线性探测与相对主要的步骤一起工作？

> ID：11717529
> 
> 赞同：2
> 
> 时间：2012-07-30T08:04:35.840
> 
> 标签：arrays, language-agnostic, hashtable, primes, modulo

我正在阅读[哈希表教程](http://eternallyconfuzzled.com/tuts/datastructures/jsw_tut_hashtable.aspx#openaddr)中的[线性探测](http://en.wikipedia.org/wiki/Linear_probing)并遇到了这个问题：

> 线性探测的步长几乎总是 1，但使用其他步长是可以接受的，只要步长与表大小相对质数，以便最终访问每个索引。如果不满足此限制，则可能无法访问所有索引...

（基本问题是：您需要从任意索引开始访问数组中的每个索引，并向前跳过固定数量的索引 [跳过] 到下一个索引，必要时使用模数换行到数组的开头。）

我理解为什么如果步长不是相对于表大小的素数，为什么不能访问所有索引，但我不明白为什么反过来是真的：如果步长相对素数，所有索引都将被访问数组大小。

我已经观察到这个相对主要的属性在我手工计算的几个示例中起作用，但我不明白为什么它在每种情况下都有效。

简而言之，我的问题是：为什么数组的每个索引都以相对于数组大小为质数的步长来访问？有证据吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:11:34.647

关于[循环群的维基百科](http://en.wikipedia.org/wiki/Cyclic_group)

> 环 Z/nZ 的单位是与 n 互质的数。

[还有](http://en.wikipedia.org/wiki/Coprime)：

> [如果两个数互质] 存在整数 x 和 y 使得 ax + by = 1

因此，如果“a”是您的步长，“b”是数组的长度，您可以通过以下方式达到任何索引“z”

> axz + byz = z
> 
> =>
> 
> axz = z (mod b)

即步进“xz”次（并环绕数组“yz”次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T00:20:25.393

步数是`lcm(A,P)/P`或数组大小`A/gcd(A,P)`在哪里，是这个神奇的互质数。`A``P`

所以如果`gcd(A,P) != 1`然后步数将小于`A`
相反如果`gcd(A,P) == 1`（coprimes）则步数将为A并且将访问所有索引

# iphone - 有人知道如何使用 PJSIP 吗？

> ID：11717531
> 
> 赞同：0
> 
> 时间：2012-07-30T08:04:50.707
> 
> 标签：iphone, ios, lync, pjsip

有谁知道如何在 iOS 中使用 PJSIP？使用它的第一步是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:25:06.447

你看过[iOS 网页上的 PJSIP 入门](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)吗？

# eclipse - Eclipse 的 Checkstyle：包资源管理器中的错误装饰器图标

> ID：11717537
> 
> 赞同：2
> 
> 时间：2012-07-30T08:05:20.613
> 
> 标签：eclipse, eclipse-plugin, checkstyle

目前我正在使用 Eclipse 4.2，我想知道是否可以更改包资源管理器中的 checkstyle 装饰器图标，这样它们就不会再看起来像编译器警告/错误了。这太烦人了，以至于有些人完全关闭了 checkstyle。

显然，像 m2e 这样的其他插件可以将自己的装饰器图标放到 java 文件中，那么有谁知道这样做的方法或从哪里开始（更改 checkstyle 插件的源代码来做到这一点）？

我看到了[Eclipse：checkstyle 违规图标装饰](https://stackoverflow.com/questions/8039611/eclipse-checkstyle-violations-icon-decoration)，但它已经有两年历史了，这两年可能发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:19:08.887

您可以更改每个问题的严重性，如下面的配置对话框的左上角所示。

您显然不应该尝试修改叠加层。问题是否具有警告级别。如果它具有警告级别，则应显示警告覆盖，与警告的来源（编译器或其他插件）无关。

因此，如果您不喜欢在那里显示警告，请降低问题的严重性或完全取消对问题的检查。通过首先检查样式违规然后尝试立即隐藏它们，您并没有真正获得任何东西。

![在此处输入图像描述](../Images/82c124b2f758119eff3460ba56b79085.png)

# ios - 从 quicktime MOV 文件中解析 h.264 NAL 单元

> ID：11717538
> 
> 赞同：4
> 
> 时间：2012-07-30T08:05:21.783
> 
> 标签：ios, h.264, quicktime, rtp, mov

我正在尝试从 iPhone 上的 MOV 文件中获取 h.264 NAL 单元，以便将 h.264 视频从 iPhone 相机传输到服务器。

Apple 的 API 不允许直接访问来自相机输出的编码比特流，因此我只能在写入时访问 MOV 文件。

根据[Apple 的 MOV 结构参考](http://developer.apple.com/library/mac/#documentation/QuickTime/QTFF/QTFFChap1/qtff1.html#//apple_ref/doc/uid/TP40000939-CH203-BBCGDDDF)，我已将 MOV 文件解析为**Atoms** ，但现在我需要从**mdat 原子中提取****NAL 单元**，以便将其打包到 RTP 并流式传输。

 ****我很高兴在这里得到一些帮助，因为我找不到有关**mdat 结构**的文档。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:18:52.097

mdat 原子是一大块数据，它本身没有任何意义。要了解它的内容，必须首先解析 moov 原子。您说您将 MOV 文件分解为原子——您是否比 moov、mdat、ftyp 和其他一些顶级原子更深入？您必须解析 moov 原子（其中有很多原子）才能获得所需的数据（附加到 H.264 stsd 原子的额外编解码器数据与来自 H.264 块的数据相结合，这些数据由 stco 索引或 co64 原子）。

或者使用已经为您完成所有繁琐工作的库。****

# c# - 在 C# 中验证文件名

> ID：11717540
> 
> 赞同：7
> 
> 时间：2012-07-30T08:05:28.273
> 
> 标签：c#

> **可能重复：**
> [如何检查给定的字符串是否在 Windows 下是合法的（允许的）文件名？](https://stackoverflow.com/questions/62771/how-check-if-given-string-is-legal-allowed-file-name-under-windows)

我是stackoverflow的新手。我知道这是一个愚蠢的问题，但我陷入了困境。我想验证一个文件名，以便它应该只接受合法路径。我试过下面的代码：

```
if (txtFileName.IndexOfAny(System.IO.Path.GetInvalidFileNameChars()) != -1) 
{   
   MessageBox.Show("The filename is invalid");   
   return; 
} 
```

它起作用了，但是，我有点困惑它是否会完全起作用，所以我也想知道其他答案。我认为我们也可以使用正则表达式来验证文件名。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:08:05.420

这将按预期工作。

无需发明正则表达式来执行此操作，就好像您的代码更改的无效字符集将过时，而此调用仍将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:09:31.997

这是正确的方法。将来，如果您的程序将被移植到不同的操作系统，它将继续工作。手工制作的解决方案将不太有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:12:47.450

尝试这个：

```
bool bOk = false; 
try 
{ 
    new System.IO.FileInfo(fileName); 
    bOk = true; 
} 
catch (ArgumentException) 
{ 
} 
catch (System.IO.PathTooLongException) 
{ 
} 
catch (NotSupportedException) 
{ 
} 

if (!bOk) 
{ 
    // ... 
} 
else 
{ 
    // ... 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:09:29.507

这取决于你在做什么。如果它只是您正在验证的**文件名**，那么这将起作用。框架函数将为您的特定操作系统检查无效的文件名字符，并将与 .NET 框架一起更新。而你的正则表达式不会。

虽然，如果您想检查它是否是有效**路径**，那么我猜您还需要做一些事情。比如它是一个有效的驱动器号、路径、文件夹等。

# perl - perl 脚本运行时如何读取选项？

> ID：11717541
> 
> 赞同：0
> 
> 时间：2012-07-30T08:05:28.760
> 
> 标签：perl

假设我有一个 perl 脚本，它一直在后台运行，比如说 run.pl 我如何通过调用它来与这个脚本进行交互？如：perl run.pl -reload , perl run.pl -reset

有可能做到吗？如果是，我应该学习哪个模块？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:15:21.990

[IPC ( `perldoc perlipc`)](http://p3rl.org/ipc)可以通过多种方法完成：

1.  使用套接字
2.  使用信号
3.  使用共享内存

我认为最简单的方法是在脚本中处理[信号 HUP](http://p3rl.org/sigtrap)，在收到信号后，读取一些文件以获取更多信息。当然，您必须在发送信号之前编写此文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:15:51.867

操作系统中有多种进程间通信方法（在 Linux/Unix 的情况下，这是管道、FIFO、信号、共享内存等）。Perl 支持所有这些。

我认为，您的任务的最佳解决方案是使用信号。

所以你可以在 Perl 中截取一个信号：

```
sub INT_handler {
    print("Don't Interrupt!\n");
}

$SIG{'INT'} = 'INT_handler'; 
```

所以你可以发送信号：

```
kill  9     => $pid;                    # send $pid a signal 9
kill -1     => $pgrp;                   # send whole job a signal 1
kill  USR1  => $$;                      # send myself a SIGUSR1
kill  HUP   => @pids;                   # send a SIGHUP to processes in @pids 
```

更多关于[学习 Perl](http://oreilly.com/catalog/0636920018452)中的信号的信息，第 16.8 章*发送和接收信号*。

操作系统中可用的信号不多（最多 64 个），可用于自己目的的信号更少。

如果您需要更强大的功能，请使用套接字或消息传递系统，例如[ZeroMQ](http://p3rl.org/ZeroMQ)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:15:55.043

由于您的 perl 脚本在后台运行，您可以直接与其交互。但是，解决方法很少：

1.  文件。您可以将文件用作某些操作的触发器。想象一下，你有一份 run.pl 在后台运行，它不断检查文件 /tmp/file 的存在。如果它不存在，则脚本将继续检查，如果不存在，则将脚本设置为您想要的任何内容。有些如果你的命令“perl run.pl -reload”会创建这个文件，你会得到你想要的。
2.  信号。您可以向进程发送信号。如何在 perl 脚本中使用信号，请参见[此处](http://perldoc.perl.org/perlipc.html#Handling-the-SIGHUP-Signal-in-Daemons)

# javascript - 如何遍历所有 textarea 标签并在它们之后添加一个节点？

> ID：11717542
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:05:29.543
> 
> 标签：javascript, jquery

我不是 jquery 开发人员，也不是 javascript 开发人员。我正在尝试一种让我的生活变得简单的快速技巧。这是页面： ![在此处输入图像描述](../Images/e880749d0a172276b10e5b8f565cf055.png)

我想要完成的是：

1.  我想在页面上的每个元素`div`之后添加一个 mathjax_preview 类。`textarea`
2.  那个 div 的 inner.HTML 必须是对应的里面的文本`textarea`

但这似乎不起作用。

我有以下 javascript 代码，`js/1.js`它在页面加载时被加载：

```
var preview_number = 0;
$("textarea").each(function() { 
    var d = $(this).next();
    if (!d.hasClass("mathjax_preview")) {
      preview_number++;
      var d = $("<div class='mathjax_preview' " +
         "style='padding: 5px; color: black; background: #eee; border: 1px solid #888;float:left;'" +
         "></div>");
      d.attr("id", "mathjax_preview_" + preview_number);
      d.insertAfter(this);
    } 
    d.text($(this).val());
    MathJax.Hub.Queue([ "Typeset", MathJax.Hub, d.attr("id") ]);
}); 
```

**编辑：**

我刚刚在上述文件的开头插入了以下代码段：

```
var preview_number = 0;
var elements = document.getElementsByTagName("textarea");
  alert(elements.length); 
```

它的警报`0`。怎么来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:23:40.143

尝试以下方法（我没有测试过这个，因为它直接从我的头顶上掉下来）：

```
$(document).ready(function() {
    var preview_number = 0;

    $("textarea").each(function() { 
        preview_number++;

        var d = document.createElement("div");
        $(d).attr("id", "mathjax_preview_" + preview_number);
        $(d).addClass("mathjax_preview");
        $(d).css("padding", "5px");
        $(d).css("color", "black");
        $(d).css("background", "#eee");
        $(d).css("border", "1px solid #888");
        $(d).css("float", "left");
        $(d).html($(this).val());

        MathJax.Hub.Queue([ "Typeset", MathJax.Hub, $(d).attr("id") ]);

        $(this).append(d);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:10:04.503

变量`textarea`不存在。改用`this`：

```
d.insertAfter(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:11:36.980

您没有`textarea`定义变量。

```
d.insertAfter(textarea); 
```

我相信你可以`$(this)`参考。

```
d.insertAfter($(this)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T08:12:27.200

`textarea`里面有什么`d.insertAfter(textarea);`？

似乎是`d.insertAfter($(this));`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T08:36:26.120

警报消息显示为零，因为您没有将 javascript 文件放在页面末尾，也没有使用准备好的回调。要使用就绪回调添加代码如下

$(document).ready(function() {/*在此处添加您的 javascript 代码 */});

# search - 带有任何“符号”的狮身人面像搜索会破坏搜索引擎？

> ID：11717544
> 
> 赞同：0
> 
> 时间：2012-07-30T08:05:32.053
> 
> 标签：search, unicode, utf-8, lucene, sphinx

出于某种原因，当我在查询中的任何位置键入符号时，

`. ! ^ ,`或其他任何事情，搜索引擎都会中断。

但是当我输入 "#" 时，搜索引擎并没有中断。

那是因为我修改了字符集来处理`#hashtag`s。

```
charset_table = 0..9, A..Z->a..z, _, a..z, U+23, U+410..U+42F->U+430..U+44F, U+430..U+44F 
```

我该如何解决这个问题，以便我可以在查询中包含其他符号以及使主题标签起作用？（现在标签效果很好，sphinx 将其视为普通关键字）

顺便说一句，hashtag 的 unicode 是“U+0023”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:29:45.787

我不确定`.`and `,`（Sphinx 专用？），但是`!`and `^`（除其他外，即`+ - && || ! ( ) { } [ ] ^ " ~ * ? : \`）是 Lucene 特殊字符，您需要[转义它们](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html)。请参阅页面底部的*转义特殊字符。*

# jquery - 在 var 中修改 jQuery 选择器

> ID：11717546
> 
> 赞同：1
> 
> 时间：2012-07-30T08:05:43.630
> 
> 标签：jquery, selector

我可能解释得很糟糕，但我不知道如何描述，无论如何..

我有这个变量：

```
var d_atributo=$("div.atributo"); 
```

反正有办法以这种方式选择提到的元素子元素吗？

```
d_atributo.$(" span.example).click(function(){...}); 
```

我的意思是我想使用这个 var 并动态扩展他的“定义”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T08:07:07.070

***不，你不能用默认的 jQuery 选择器来做这件事。***

你可以做：

```
d_atributo.find("span.example").click(function(){
   // your code
}); 
```

**或者**

```
d_atributo.children("span.example").click(function(){
   // your code
}); 
```

**或者**

```
$("span.example", d_atributo).click(function() {
 // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:13:31.133

你可以别名`find`：

```
jQuery.fn.$ = jQuery.fn.find; 
```

然后它将起作用：

```
var d_atributo = $("div.atributo");
d_atributo.$("span.example").click(function() {
    alert('hello');
}); 
```

演示：http: [//jsfiddle.net/9rFBS/1/](http://jsfiddle.net/9rFBS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:07:12.350

改为使用

```
d_atributo.find("span.example").click(function(){...}); 
```

如果您正在寻找直系子女，或者使用`children()`而不是`find()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:08:03.613

看来您正在寻找[children()](http://api.jquery.com/children/)方法：

```
d_atributo.children("span.example").click(function() {
    // ...
}); 
```

# php - 跨域的多个文件的 Access-Conrol-Allow-Origin

> ID：11717551
> 
> 赞同：0
> 
> 时间：2012-07-30T08:06:11.600
> 
> 标签：php, header, http-headers, cross-domain

我遇到过在使用跨域时这不适用于多个文件。有人有任何理由还是我做错了什么？我能够让它在`mydomain.com/file1.php`我从另一个域 ( `hisdomain.com`) 访问的一个 PHP 文件 ( ) 上工作。当我试图`mydomain.com/file2.php`从同一个域 ( `hisdomain.com`) 访问另一个 PHP () 时，它不会让我访问我的脚本`file2.php`，因为我已经有了

```
header("Access-Control-Allow-Origin: *"); 
```

在`file1.php`. 这是巧合吗？这不应该是问题吗？

但是，这些文件位于实际的托管站点中。（例如`mydomain.com`）。当我尝试在 localhost (`http://127.0.0.1/file1.php`和`http://127.0.0.1/file2.php`) 中使用`hisdomain.com`,`file1.php`并且`file2.php`两者都可以正常工作时

```
header("Access-Control-Allow-Origin: *"); 
```

# objective-c - 重新加载 UIViewController 而不返回 UITableView

> ID：11717554
> 
> 赞同：0
> 
> 时间：2012-07-30T08:06:32.097
> 
> 标签：objective-c, uiviewcontroller, reloaddata

我正在为 iPad 开发一个科学游戏，让您选择一个级别，并显示一些关于科学元素的问题，用户必须选择正确的答案。我使用 a`UITableview`来显示“关卡选择”屏幕，一旦用户选择关卡，就会`didSelectRowAtIndexPath`在“游戏屏幕”上设置一个 int currentLevel。

关卡完成后，我想创建一个`UIButton`这样用户就可以进入下一个关卡，而无需返回“关卡选择”屏幕 ( `UITableView`)。本质上我想重新加载视图并设置 int currentLevel 以显示游戏的正确级别

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:20:07.267

您可以分配您的级别选择器视图控制器并在当前视图中以模态方式呈现它。

```
UIViewController *levelPicker = [[UIViewController alloc]init];
[self presentModalViewController:levelPicker animated:YES];
[levelPicker release]; 
```

# android - 用于多选操作的标准 Android 菜单图标

> ID：11717562
> 
> 赞同：0
> 
> 时间：2012-07-30T08:07:20.897
> 
> 标签：android, icons, menuitem

在我的第一个应用程序中，有一个使用`GridView`布局和选项菜单的活动。其中一个菜单项是“多选”（与浏览图库时在标准图库应用程序中看到的相同）。我目前的问题是我在任何地方都找不到标准的多选图标。我尝试了以下方法：

*   通过键入 android.R.drawable 完成 Eclipse 功能。并检查 eclipse 向我显示的列表
*   搜索`android-sdk-linux/platforms/android-X/data/res/drawable-XX`
*   搜索[https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res](https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res)

*   访问[http://androiddrawableexplorer.appspot.com/](http://androiddrawableexplorer.appspot.com/)和类似网站

在哪里可以找到多选图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:33:27.830

我在我的构建（Android 4.1.1）上看不到您所指的图标，但是在寻找系统可绘制对象时，我在 SDK 中的路径下找到了它们；

`C:\Program Files\Android\android-sdk\platforms\android-16\data\res\drawable-<your_screen_res>`

菜单的“更多”图标称为`ic_menu_moreoverflow_<some style>_<some theme>.png`。我确定您正在寻找的图标在那里......

**编辑**

走开了，通过在2.1设置模拟器找到了图标，就是这样。

看起来相似`ic_menu_mark`，`btn_check_off`但不可否认的是不完全相同！

![多选图标](../Images/81da43f21dff3c07898d1a6d32774761.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:39:37.510

最后我得到了图标。谷歌搜索了一下后，我发现 GridView 没有实现对多个选择项的本机支持。所以多选图标不是标准的 Android 图标，也没有随 SDK 一起分发。该图标是相机应用程序的一部分。您可以在 /res/drawable-hdpi 下的[CyanogenMod repo android_packages_apps_Gallery中看到它。](https://github.com/CyanogenMod/android_packages_apps_Gallery)图标文件名为 ic_menu_multiselect_gallery.png。

# linux - .htaccess 代码禁止某些 ip 并重定向到其他子域

> ID：11717565
> 
> 赞同：0
> 
> 时间：2012-07-30T08:07:41.257
> 
> 标签：linux, apache, .htaccess

我需要 .htaccess 代码来重定向和禁止 ip，我的意思是如果我尝试使用**123.456.789.101 ip 地址加载****www.site.com**允许我，但如果其他人尝试加载，请将它们重定向到其他子域，如**sub.site。 com**，我写下面的代码，但不能正常工作。

 ****```
<Limit GET POST PUT> Order Deny,Allow
 Deny from all
 Allow from 123.456.789.101
</Limit>
301 redirect / http://new.site.com
<Files otherpage.html>
 Order Allow,Deny
 Allow from all
</Files> 
```

请帮忙，坦克你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:10:46.853

替换你的`Limit`块并`301 redirect`用这个：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.101$
RewriteRule ^(.*)$ http://new.site.com/$1 [L,R=301] 
```

所以它在你的块*之上*`Files`（虽然我不确定你为什么需要它）****

# tdd - 使用 IoC 测试控制器

> ID：11717568
> 
> 赞同：2
> 
> 时间：2012-07-30T08:07:57.317
> 
> 标签：tdd

我刚刚开始学习TDD。我在测试我的控制器时遇到了一些麻烦。所以，我会试着解释一下。我有一个控制器：

```
public AccountController(IStoreService storeService)
    {
        _storeService = storeService;
    }

public virtual ActionResult RenderBalance()
    {
        var model = _storeService.GetStorePageBalanceModel();
        return PartialView("MyControl", model);
    } 
```

在这里我想测试我的 RenderBalance 操作：

```
 public class when_balance_renders
    {
        private static Mock<IStoreService> storeService = new Mock<IStoreService>();
        private static AccountController controller;
        private static ActionResult result; 

        private Establish context = () =>
                                        {
                                           controller = new AccountController(storeService.Object);
                                           result = controller.RenderBalance();
                                        };

        private It should_be_not_null_result = () => { result.ShouldNotBeNull(); };
    } 
```

但是这段代码不起作用。我在调试模式下出现此错误： *无法加载文件或程序集或其依赖项之一。试图加载格式不正确的程序。*

我该如何解决？你能给我一些关于测试控制器的建议吗？谢谢，诺金安东。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T22:28:28.953

如果您刚开始使用 TDD，请尝试更简单的方法，如此处指出的经典 TDD [http://martinfowler.com/articles/mocksArentStubs.html](http://martinfowler.com/articles/mocksArentStubs.html)

此外，如果您遇到此错误，则无法加载文件或程序集或其依赖项之一。试图加载格式不正确的程序。

有一些非常基本的设置错误。删除代码行，直到您至少可以编译，然后从那里继续前进。

# c# - 使用 Rob Conery 的 Massive 从多个表中读取

> ID：11717572
> 
> 赞同：0
> 
> 时间：2012-07-30T08:08:15.290
> 
> 标签：c#, sql, massive

我最近开始使用 Rob Conery 的 Massive 来读取 C# 中的 Oracle 数据库。

它工作得非常好。但是，最近我在尝试执行内部联接时遇到了一个问题。通常你这样做只是为了指定你从哪个表中读取：

```
public class Products:DynamicModel {

    public Products():base("northwind", "products","productid") {}
} 
```

但是，在执行内部连接时，您正在从多个表中读取数据。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:54:09.240

看起来您实际上并不需要指定表名。

如果您只是将其保留为如下所示的空字符串，则连接工作得很好。

```
public class Products:DynamicModel {

    public Products():base("northwind", "", "productid") {}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:51:49.060

只需在给定的连接查询中使用 Products.Query 即可。它将提供所需的所有属性。只需浏览博客文章*[http://rob.conery.io/2011/09/27/massives-dynamic-query-syntax](http://wekeroad.com/2011/09/27/massives-dynamic-query-syntax)*。这将帮助你。这是来自创建 Massive 的 Rob Conery 本人。

# java - 如何在 Runnable JAR 中存储和检索属性？

> ID：11717574
> 
> 赞同：4
> 
> 时间：2012-07-30T08:08:21.830
> 
> 标签：java, properties, jar

我正在尝试使用 Java 类属性在执行之间保存我的应用程序的设置。之后，我想将我的应用程序导出到可运行的 JAR 文件中，并将所需的所有内容保存在这个文件中以提供可移植性。所以我的应用程序必须找到属性文件，加载它，然后在退出时将新设置保存到其中。

加载工作正常：

```
Properties prop = new Properties().load(this.getClass().getResourceAsStream("properties.cfg")); 
```

但是为了存储，我需要找到相同的文件并覆盖它。方法 Properties.store() 需要一个 OutputStream 但 getResourceAsStream 返回一个 InputStream 因此我找不到文件并访问它。

它应该始终位于 *.class 文件中。我发现许多解决方案在导出到 JAR 之前有效，但在导出后没有一个有效。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T08:11:33.000

你不能重写你的jar（或者更确切地说，它很复杂而且不是一个好主意）。

一个更好的解决方案是从以下位置读取属性：

1.  你机器上的一个目录
2.  `.jar`文件_

最初位置 1 没有属性文件，您将退回到您的`.jar`文件。当您编写属性时，您会将它们写入指定的目录，然后在下一次读取时，您将从该位置读取您的属性。这将在重新启动等后继续存在。

请注意，诸如[Apache Commons Configuration](http://commons.apache.org/configuration/)之类的库会自动支持这种分层属性定位机制，并且可能会在编写自己的解决方案时为您节省一些时间/烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:18:53.120

对于这种情况，最好的方法是将属性文件添加到类路径并使用 ResourceBundle 之类的东西加载它。

```
private static ResourceBundle _properties = ResourceBundle.getBundle("sample.properties");
String sampleProperty = _properties.getString(propertyKey); 
```

如何执行：

假设你的 jar 文件是 MyJar.jar 并且属性文件被称为 sample.properties 那么你应该在它周围写一个批处理或 sh 文件

例如：run.sh

```
java -cp MyJar.jar:conf "Class with main Method" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:23:02.367

拿spring的IO基础设施（ClasspathResource）

```
try {
        ClassPathResource r = new ClassPathResource("bdd.properties");
        Properties properties = new Properties();
        properties.load(r.getInputStream());
    } catch (IOException e) {
        Throwables.propagate(e);
    } 
```

这是真正的简化。

# java - Java：如何使容器的 Jscrollpane 背景不透明？（即透明）

> ID：11717577
> 
> 赞同：5
> 
> 时间：2012-07-30T08:08:28.703
> 
> 标签：java, swing, transparent

这个例子编译得很好。你可以通过运行它看到我面临的问题。我希望 JPanel 直接在桌面上绘制，而没有可见的 JWindow 内容窗格。我还需要一个可见的 JScrollpane 以便水平移动 JPanel 数组！

感谢任何帮助。

```
/*
 * SSCE.java
 * Short Self Contained Example
 * 
 * Problem: Cant make the containers scrollpane non-opaque! (ie. transparent)
 */
package fb;

import com.sun.awt.AWTUtilities;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Toolkit;
import javax.swing.BorderFactory;
import javax.swing.JEditorPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JWindow;
import javax.swing.ScrollPaneConstants;

/**
 *
 * @author Aubrey
 */
public class SSCE {
    JWindow w = new JWindow();
    Container c = w.getContentPane();
    JPanel[] ps;
    Toolkit toolkit =  Toolkit.getDefaultToolkit ();
    Dimension dim = toolkit.getScreenSize();
    int width = dim.width;
    int height= dim.height;

    public SSCE(){
    c.setLayout(new FlowLayout(FlowLayout.CENTER, 20, 5));

   JScrollPane scrollPane = new JScrollPane(c);   
   scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER); 
   scrollPane.setOpaque(false);
   ps = new JPanel[19];

   for(int i=0; i<19; i++){
   ps[i]=new JPanel();
    ps[i].setLocation(0, 0);
    ps[i].setSize(400, 400);
    ps[i].setVisible(true);
    JEditorPane area = new JEditorPane();
    area.setEditable(false);
    area.setOpaque(false);
    area.setSize(400, 400);
    area.setForeground(Color.WHITE);

    area.setText("Date: \nFrom: \n\nMessage: "+i);

    ps[i].add(area);
    ps[i].setBorder(BorderFactory.createLineBorder(Color.GRAY));
    ps[i].setBackground(Color.darkGray);
    c.add(ps[i]);

    }
    if (AWTUtilities.isTranslucencySupported(AWTUtilities.Translucency.TRANSLUCENT)) {
 System.out.println("TranslucencySupported !!!!");
 AWTUtilities.setWindowOpaque(w, false);

 }else{System.out.println("Translucency NOT Supported !!!!");}

    //Problem seems to be here --> either the scrollPane or the Container is not non-opaque (ie. transparent)! HOW TO FIX THIS??
    w.setContentPane(scrollPane);
    w.setLocation(0,height-490);
    w.setSize(width, 450);

    w.setVisible(true);                 
}
    public static void main(String[] args){

        new SSCE();
    }} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T09:30:19.250

试试看：

```
 scrollPane.getViewport().setOpaque(false);
    scrollPane.setBorder(null); 
```

# shell - 在 awk 中删除数组的下标/索引

> ID：11717589
> 
> 赞同：3
> 
> 时间：2012-07-30T08:09:29.993
> 
> 标签：shell, awk

我正在使用 awk 将值存储为数组的下标/索引的概念。请看下面的代码

```
stringVariable="hi,bye,cool.hot,how,see";
split(stringVariable,stringArray,",");

#This loop will iterate and stores the RIDs in the requestIds variable into an array
for(tr=1;tr<=length(stringArray);tr++)
{
Count++;
    referenceIdArray[stringArray[tr]]++;
} 
```

所以在我的 referenceId 数组中，我会有 hi,bye,cool,hot,how,see

让我考虑一个具有以下值的示例文件

```
hi
bye
gone 
```

我的目标是从文件中获取值并与先前声明的数组匹配，如果任何值匹配，则打印文件中的值

```
awk script

awk '{BEGIN (Array loading done previously)} {if($0 in referenceIdArray) {print $0}}' 
```

所以这会给我想要的结果。但是假设“hi”在数组中只出现一次，因此当动作块找到值时，应该打印该值，并且数组中的相应条目 referenceIdArray[“hi”] 也应该在为了使搜索有效。由于它们存储为下标，我不确定如何删除该条目。对此有任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T08:24:40.853

`delete`您可以使用以下语句删除数组的单个元素：

```
delete array[index] 
```

参考： http: [//www.math.utah.edu/docs/info/gawk_12.html](http://www.math.utah.edu/docs/info/gawk_12.html)

# php - 我可以使用常量名称的变量访问 PHP 类常量吗？

> ID：11717593
> 
> 赞同：13
> 
> 时间：2012-07-30T08:09:56.920
> 
> 标签：php, class-constants

当访问一个类常量时，我​​看到我可以使用一个变量作为类名，例如`$classname::CONST_VALUE`.

如果我想使用一个变量作为常量名，例如`self::$constant`. 这似乎不起作用。有解决方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T08:11:27.733

```
$variable = $classname.'::'.$constant;

constant($variable); 
```

请参阅文档： http: [//php.net/constant](http://php.net/constant)

# php - 查找字符串是否在 html 括号内

> ID：11717598
> 
> 赞同：2
> 
> 时间：2012-07-30T08:10:33.773
> 
> 标签：php, regex, preg-replace

我有一个搜索结果，我想标出字符串匹配的位置。

以前我是用 stripos 做的，只是保存了偏移量等，但是当我开始在包含 html 的字符串中搜索时，事情就搞砸了。

因此，我将有一个我想在文本中标记的单词列表（可能包含 HTML）。

所以，我想在文本中找到不是“html”语法的单词。例如，我正在寻找的字符串是 'b' 然后：

```
A b<abc>c 
```

应转换为

```
A <font style="color:red;">b</font><abc>c 
```

并不是：

```
A <font style="color:red;">b</font><a<font style="color:red;">b</font>c>c 
```

问题是我不能制作那个正则表达式。我最好的尝试是：

```
preg_replace('/(?<!<)(b)(?!>)/', '<font style="color:red;">$1</font>', 'How will this be?<abncds>Now?<br>'); 
```

但这并没有捕捉到它只有在 b 靠近 a < ofc 时才会捕捉到。但是添加一个惰性匹配，例如 .*? 也不起作用。

帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:23:03.793

如果您只在简单的 HTML 标记中查找，这样的事情不应该是工作：

```
preg_replace("/((^|>)[^<]+?)(your-string)/", "$1<span>$3</span>", $your_string); 
```

# sql-server-2008 - SQL Server 2000 和 SQL Server 2008 中的 DTS（导出和导入）选项

> ID：11717603
> 
> 赞同：0
> 
> 时间：2012-07-30T08:10:59.683
> 
> 标签：sql-server-2008, sql-server-2000

我曾经偶尔将现有数据库导出到另一个新数据库（在 SQL Server 2000 中）。它也减少了我的数据库的大小。

但相同的功能在 SQL Server 2008 中不可用。我在 SQL Server 2008 中搜索了导入和导出向导，但只找到了其他两个选项（仅表/视图导出和选择（查询）选项），另一个选项“复制SQL Server 数据库之间的对象和数据不存在？

是移到别的地方了吗？

幸福永远 BKR Shivaprakkash

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:22:09.067

如果我没记错的话，您可以将现有数据库恢复到新数据库，只需在单击恢复时在数据库名称中写入新名称

# extjs4.1 - 使用 tbfil 与 extjs 4.1 对齐按钮

> ID：11717604
> 
> 赞同：1
> 
> 时间：2012-07-30T08:11:05.940
> 
> 标签：extjs4.1

我有以下。我希望第一项“创建”与右侧对齐。

我已经阅读了有关使用 'tbfill' 对齐的信息。但我不确定如何在我的实现中使用它。

```
 dockedItems:[                        {
                        xtype:'toolbar',
                        flex:1,
                        dock:'top',
                        items:[
                            {

                                xtype:'button',
                                id: 'ContactCreate',
                                name: 'ContactCreate',
                                text:'Create',
                                action:'create',
                                align: 'right',
                                style: 'float:right',
                                width:'100',
                                iconCls:'icon-add'

                            },
                            {
                                xtype:'button',
                                id: 'ContactSave',
                                name: 'ContactSave',
                                text:'Save',
                                action:'save',
                                width:'100',
                                iconCls:'icon-save'
                            },

                            {
                                xtype:'button',
                                id: 'ContactDelete',
                                name: 'ContactDelete',
                                text:'Delete',
                                action:'delete',
                                width:'100',
                                iconCls:'icon-delete'
                            }

                        ]
                    }
                ], 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:21:46.357

我在想您将 tbfill 添加到实际项目中。这是一个工作示例。

```
 dockedItems:[
                    {
                        xtype:'toolbar',
                        flex:1,
                        dock:'top',
                        items:[
                            {
                                xtype:'button',
                                id: 'ContactSave',
                                name: 'ContactSave',
                                text:'Save',
                                action:'save',
                                width:'100',
                                iconCls:'icon-save'
                            },
                            {
                                xtype:'button',
                                id: 'ContactDelete',
                                name: 'ContactDelete',
                                text:'Delete',
                                action:'delete',
                                width:'100',
                                iconCls:'icon-delete'
                            },
                            { xtype: 'tbfill' },
                            {

                                xtype:'button',
                                id: 'ContactCreate',
                                name: 'ContactCreate',
                                text:'Create',
                                action:'create',
                                width:'100',
                                iconCls:'icon-add'

                            }

                        ]
                    }
                ], 
```

# javascript - EXTJS 日期字段验证

> ID：11717605
> 
> 赞同：0
> 
> 时间：2012-07-30T08:11:21.753
> 
> 标签：javascript, extjs, extjs3

在 EXTJS 中，我有一个 DateField。用户在该字段中输入了“abcd”，如果我获取值，它将返回一个空字符串，而不是“abcd”。

如何强制用户为 dateField 输入正确的值？或者我怎样才能获得该文件中的真实输入？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:39:46.027

datefield 也有一个不同于 getValue 的 getRawValue 方法，因为它不应用 getValue 所做的任何验证。

要强制用户输入正确的值，您可以使用 reMask 属性。默认验证逻辑将允许无效条目，并以红色突出显示该条目无效等。reMask 掩码过滤键盘输入。在此示例中，它仅限于数字和正斜杠，并且可以扩展到所需的任何日期格式。

```
Ext.create('Ext.form.Panel', {
    renderTo: Ext.getBody(),
    width: 300,
    bodyPadding: 10,
    title: 'Dates',
    items: [{
        xtype: 'datefield',
        anchor: '100%',
        fieldLabel: 'From',
        emptyText: 'mm/dd/yyyy',
        maskRe: /[0-9\/]/,
        name: 'from_date',
        maxValue: new Date()  // limited to the current date or prior
    }, {
        xtype: 'datefield',
        anchor: '100%',
        emptyText: 'mm/dd/yyyy',
        maskRe: /[0-9\/]/,
        fieldLabel: 'To',
        name: 'to_date',
        value: new Date()  // defaults to today
    }]
});? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:52:24.560

例如，当您`getValue`在 dateField 中使用方法时，返回值为：`Wed Jul 25 2012 00:00:00 GMT-0300 (BRT)`，但您可以使用格式化日期，`Ext.util.Format.date(date, 'd/m/Y H:i:s');`返回值为`"25/07/2012 00:00:00"`.

# c# - 在 Windows 应用程序中打开弹出窗口时是否可以制作阴影（禁用）类型的图像？

> ID：11717611
> 
> 赞同：3
> 
> 时间：2012-07-30T08:11:50.070
> 
> 标签：c#, windows, winforms

我是 Windows 应用程序的新手。使用 C# 和 .NET。我想要一些像我附上的图像。当我的弹出窗口打开时，我希望 mdi 父页面被遮蔽或禁用。（就像我们在 Web 应用程序或 Jquery 弹出窗口中所做的那样）

![在此处输入图像描述](../Images/9b8243e6e40b849abd496c60c2f7f5cd.png)

有可能吗？如果是的话，我该怎么做。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:10:37.007

您可以通过使用的**opacity**属性来实现`Windows.Form` 这一点，为此创建一个新表单，设置其不透明度（例如：.75）并在显示子窗口时将其显示在父级上。下面给出一个例子

```
There are three windows used here
1\. ParentForm
2\. OverlayForm
3\. ChildForm 
```

**1\. 家长表格**

```
1\. Create an instance of the Child form 
2\. Create an Instance of the Overlayform, Pass the objects Instances of Child and Parent(current form) as a parameter to the Constructor
3\. Then Show the OverLay Form by using  ShowDialog Method.

Code:

public partial class ParentForm : Form
{
    public ParentForm()
    {

        InitializeComponent();
    }

    private void ParentForm_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        ChildForm child1 = new ChildForm();
        // Create a new form.
        OverlayForm form2 = new OverlayForm(this, child1);
        child1.OverLay = form2;
        // Display the form as a modal dialog box.
        form2.ShowDialog(this);
    }
} 
```

**2.叠加形式**

```
1\. In the constructor store the childForm and ParentForm object in a local variables. 
       And Set the The properties (like width,height) to the Overlay Window
    2\. In the OverlayForm_Load show the ChildForm window.

public partial class OverlayForm : Form
{
    public Form ParentForm { get; set; }
    public Form child { get; set; }
    public OverlayForm(Form parent, Form child)
    {
        InitializeComponent();
        this.child = child;
        this.ParentForm = parent;

        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
        this.ShowInTaskbar = false;
        this.Width = ParentForm.Width;
        this.Height = ParentForm.Height;
        this.Top = ParentForm.Top;
        this.Left = ParentForm.Left;
        this.StartPosition = ParentForm.StartPosition;
        // Set the opacity to 75%.
        this.Opacity = .75;
    }

    private void OverlayForm_Load(object sender, EventArgs e)
    {
        child.Show();
        child.TopMost = true;
        child.Focus();
        child.BringToFront();
    }
} 
```

这将使父窗体看起来模糊。我们还应该编写一些代码来关闭子窗体中的覆盖

**3\. 子表**

```
1\. Set the object of the Overlay  to a property in Child Window
2\. And in the Form_Closing event of the child window, close the Overlay window.

public partial class ChildForm : Form
{
    //This is set in the Parent form where the child form instatce is created
    public Form OverLay { get; set; }
    public ChildForm()
    {
        InitializeComponent();
    }

    private void ChildForm_Load(object sender, EventArgs e)
    {
    }

    private void ChildForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        this.OverLay.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:19:56.627

对于 Microsoft Windows，实际上并没有子窗口的概念。弹出窗口或模态/非模态对话就像任何其他窗口一样，它们可以定位在屏幕上的任何位置，因此可以超出您所认为的父窗口的范围。

有些网络概念在桌面上不能很好地工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T09:06:01.217

这对我来说可以。但是在打开子 fucus 后应该在子窗体上的第一个按钮上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T21:46:45.187

我在[这个链接](https://channel9.msdn.com/Forums/TechOff/430256-WinForms-Making-the-main-form-dimmed/a8c913b2d6c245728c6a9dea018b62c4)上找到了最优雅的解决方案，它甚至有动画（尽管我出于我的目的删除了那部分）。作者是“TommyCarlier”，定义如下：

```
class FadingOverlayForm : Form
    {
        readonly double fFinalOpacity;

        public FadingOverlayForm(Form owner, double finalOpacity)
        {
            StartPosition = FormStartPosition.Manual;
            FormBorderStyle = FormBorderStyle.None;
            ShowInTaskbar = false;
            Owner = owner;
            BackColor = Color.FromArgb(235, 245, 255); // or pick your own color
            fFinalOpacity = finalOpacity;
            if (fFinalOpacity < 0.01) fFinalOpacity = 0.01;
            else if (fFinalOpacity > 1.0) fFinalOpacity = 1.0;
        }

        public void FadeIn(TimeSpan duration)
        {
            Opacity = 0.01;
            Rectangle lWorkingArea = CalculateTotalScreenBounds();
            Bounds = new Rectangle(lWorkingArea.X - 150, lWorkingArea.Y - 150, 100, 100);
            Show();
            Bounds = new Rectangle(Owner.PointToScreen(Point.Empty), Owner.ClientSize);
            Animator.Animate(this, "Opacity", 0.01, fFinalOpacity, duration);
        }

        public void FadeOut(TimeSpan duration)
        {
            Animator.Animate(this, "Opacity", Opacity, 0, duration, EndFadeOut);
        }

        void EndFadeOut()
        {
            Form lOwner = Owner;
            Dispose();
            if (lOwner != null && !lOwner.IsDisposed)
                ActivateFirstOwnedForm(lOwner);
        }

        static void ActivateFirstOwnedForm(Form form)
        {
            foreach(Form lOwnedForm in form.OwnedForms)
                if (!lOwnedForm.IsDisposed)
                {
                    ActivateFirstOwnedForm(lOwnedForm);
                    return;
                }
            form.Activate();
        }

        static Rectangle CalculateTotalScreenBounds()
        {
            Rectangle lBounds = Rectangle.Empty;
            foreach(Screen lScreen in Screen.AllScreens)
                lBounds = Rectangle.Union(lBounds, lScreen.Bounds);
            return lBounds;
        }
    } 
```

以下是如何使用它：

```
DialogResult ShowMyDialog(Form owner)
{
    using(MyDialog lDialog = new MyDialog())
    {
        FadingOverlayForm lOverlay = new FadingOverlayForm(owner, 0.6);
        lDialog.Owner = lOverlay;
        lOverlay.FadeIn(TimeSpan.FromSeconds(0.7));
        DialogResult lResult = lDialog.ShowDialog(lOverlay);
        lOverlay.FadeOut(TimeSpan.FromSeconds(0.1));
        return lResult;
    }
} 
```

# module - Drupal 在内容列表上添加一个动作

> ID：11717612
> 
> 赞同：1
> 
> 时间：2012-07-30T08:11:50.827
> 
> 标签：module, drupal-7, action

是否可以在 /admin/content 页面上添加操作。我们得到了“发布所选内容”或“删除所选内容”等...

[http://screencast.com/t/v2ZMedCqy3g](http://screencast.com/t/v2ZMedCqy3g)

我正在尝试从模块安装中添加一个操作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:08:36.327

你需要实施[`hook_node_operations`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_operations/7)

你可以看[`pathauto_node_operations`](http://drupalcontrib.org/api/drupal/contributions!pathauto!pathauto.module/function/pathauto_node_operations/7)一个例子......

```
function pathauto_node_operations() {
  $operations['pathauto_update_alias'] = array(
    'label' => t('Update URL alias'), 
    'callback' => 'pathauto_node_update_alias_multiple', 
    'callback arguments' => array('bulkupdate', array('message' => TRUE)),
  );
  return $operations;
} 
```

请注意，指定的回调接受一个节点 ID 数组，以及您在挂钩实现中指定的附加回调参数（参见上面的示例）。

```
// The call back specified above ^
function pathauto_node_update_alias_multiple(array $nids, $op, array $options = array()) {
  $options += array('message' => FALSE);

  $nodes = node_load_multiple($nids);
  foreach ($nodes as $node) {
    pathauto_node_update_alias($node, $op, $options);
  }

  if (!empty($options['message'])) {
    drupal_set_message(format_plural(count($nids), 'Updated URL alias for 1 node.', 'Updated URL aliases for @count nodes.'));
  }
} 
```

# linq-to-sql - 数据绑定 Telerik 树视图

> ID：11717614
> 
> 赞同：0
> 
> 时间：2012-07-30T08:12:19.310
> 
> 标签：linq-to-sql, data-binding, treeview, telerik

我想将数据绑定到 Telerik 树视图。我需要制作 linq to sql .dbml 文件还是可以直接使用数据库文件完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:16:48.213

它可以直接使用数据库文件来完成..但是如果你想使用 linq 你甚至可以使用它..

# android - 带有图像和文本android的gridview

> ID：11717623
> 
> 赞同：3
> 
> 时间：2012-07-30T08:13:07.293
> 
> 标签：android, gridview

我成功创建了一个填充有图像的网格视图。现在，我想做的是在图像下方放置一个文本。

这是到目前为止我的应用程序的屏幕截图。

[http://i203.photobucket.com/albums/aa266/paulocarabuena_bucket/screen-2.png](http://i203.photobucket.com/albums/aa266/paulocarabuena_bucket/screen-2.png)

这是我的 imageadapter 类中的 getView 方法。

```
public View getView(int position, View convertView, ViewGroup parent) {
ImageView imageView;

if (convertView == null) {
    imageView = new ImageView(this.context);
    imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setPadding(8, 8, 8, 8);
} else {
    imageView = (ImageView) convertView;
}

imageView.setImageResource(this.thumbs[position]);
return imageView;
} 
```

这是我的主要活动的 onCreate 方法

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.launchFullScreen();
    this.setContentView(R.layout.main);

    this.grids = (GridView) this.findViewById(R.id.elements);

    ImageAdapter adapter = new ImageAdapter(this);

    this.grids.setAdapter(adapter);

    this.grids.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

        }
    });
} 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:20:52.157

而不是直接使用 Image View ，您应该如下膨胀视图：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/widget44"android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:orientation="vertical"
 android:layout_x="201px"
 android:layout_y="165px"
 android:gravity="center_horizontal">
<ImageView
   android:id="@+id/icon_image"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
</ImageView>
<TextView
   android:id="@+id/icon_text"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="TextView"
   android:gravity="center_horizontal"
   android:textColorHighlight="#656565">
</TextView>
</LinearLayout> 
```

你的适配器应该是这样的：

```
public class ImageAdapter extends BaseAdapter{
    Context mContext;
    public static final int ACTIVITY_CREATE = 10;
    public ImageAdapter(Context c){
        mContext = c;
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 5;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v;
        if(convertView==null){
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.icon, null);
            TextView tv = (TextView)v.findViewById(R.id.icon_text);
            tv.setText("Profile "+position);
            ImageView iv = (ImageView)v.findViewById(R.id.icon_image);
            iv.setImageResource(R.drawable.icon);

        }
        else
        {
            v = convertView;
        }
        return v;
    }
} 
```

如需进一步参考，请查看这篇文章[自定义网格视图](http://mytelcoit.com/2010/02/programming-android-create-icon-with-text-using-gridview-and-layout-inflater/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:17:26.973

您可以使用定义`GridView`单元格的 XML 来执行此操作：

**图像.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:gravity="center_horizontal"
    >
    <ImageView
        android:id="@+id/image"
        android:layout_marginBottom = "10dp"
        android:src="@drawable/cell_sfondo"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">
    </ImageView>

<TextView
        android:id="@+id/title" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_gravity="center_horizontal"/>

</LinearLayout> 
```

然后在你的`getView()`：

```
if(convertView == null) {
            view = inflater.inflate(R.layout.image, null);
        }
        else
            view = convertView;
ImageView image = (ImageView)view.findViewById(R.id.image);
image.setImageResource(this.thumbs[position]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-11T07:07:10.403

Paresh Mayani 有一个非常好的和简单的例子。这对我帮助很大。

[http://www.technotalkative.com/android-gridview-example/](http://www.technotalkative.com/android-gridview-example/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T08:27:48.877

您可以为网格布局的每个单元格中的图像和文本创建布局。我建议从 xml 扩展布局。你可以尝试做这样的事情：

```
//Use a viewHolder to optimize the list
ViewHolder holder = null;

if (convertView == null) {
   //Create a new view holder to optimize the loading of elements in list
   holder = new ViewHolder();

   convertView = LayoutInflater.from(this.context).inflate(R.layout.my_custom_xml,null) ;
   holder.imageView = (ImageView)convertView.findViewByID(R.id.my_image_view);
   holder.textView = (TextView)convertView.findViewByID(R.id.my_text_view);

   convertView.setTag(holder);
} else {
   holder = (ViewHolder)convertView.getTag();
}

//Bind data to the row

//Set the position in holder
holder.position = position;
//Set the image for each row
holder.imageView ...
//Set the text for each row
holder.textView.setText()...

//And the viewholder looks like this

private class ViewHolder{
//The position of this row in list
private int position;

//The image view for each row
private ImageView imageView;

//The textView for each row
private TextView textView;
} 
```

现在您可以简单地创建包含文本和图像视图的 my_custom_xml ：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width= "fill_parent"
    android:layout_height = "wrap_content"
    android:orientation= "vertical">
       <ImageView
           android:id = "@+id/my_image_view"
           android:layout_width =  ....
           android:layout_height = ...
       />
      <TextView
          android:id = "@+id/my_text_view"
          android:layout_width = ....
          android:layout_height = ....
       />
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T08:19:29.420

`inflate layout`您可以在适配器中的 imageview 下使用 textview ，而不是采用动态 imageview ：

```
if(convertView==null){
            inflater=(LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            holder=new Holder();
            convertView=inflater.inflate(R.layout.gridinflater, null);
            holder.imageView=(ImageView) convertView.findViewById(R.id.img);

            holder.textView=(TextView) convertView.findViewById(R.id.txt);

            convertView.setTag(holder);
        }
        else {
            holder = (Holder) convertView.getTag();
        } 
```

`gridInflater`相对布局中的 imageview 下的 textview 布局在哪里作为父级。

```
public static class Holder {
        public ImageViewProgress imageView;
        public TextView textView;
    } 
```

# c# - 文件上传图像未插入..

> ID：11717628
> 
> 赞同：0
> 
> 时间：2012-07-30T08:13:33.263
> 
> 标签：c#, asp.net

我有一个 ASP.NET FileUpload 控件。在代码隐藏文件中，我使用类来插入值-

```
public void Insertcert()
        {
            String KKStech = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
            SqlConnection conn = new SqlConnection(KKStech);

            try
            {
                if (FileUpload1.HasFile)
                {
                    byte[] productImage = FileUpload1.FileBytes;
                    String insertstring2 = @"insert into Cert(CertName, CertLogo)
                                       values(@CertName, @CertLogo)";
                    SqlCommand cmd = new SqlCommand(insertstring2, conn);
                    cmd.CommandText = insertstring2;
                    cmd.CommandType = CommandType.Text;
                    conn.Open();
                    cmd.Parameters.AddWithValue("@CertName", TextBox18.Text);
                    cmd.Parameters.Add("@CertLogo", SqlDbType.VarBinary).Value = productImage;
                    cmd.ExecuteNonQuery();

                }

            }

            finally
            {
                conn.Close();
            } 
```

在这里执行它-

```
protected void Wizard1_FinishButtonClick(object sender, WizardNavigationEventArgs e)
        {
           Insertcert();
        } 
```

我正在使用向导控件插入员工的证明：

```
<asp:Wizard ID="Wizard1" runat="server"  
     OnFinishButtonClick="Wizard1_FinishButtonClick" 
        Width="266px" ActiveStepIndex="0">
        <WizardSteps>
            <asp:WizardStep ID="WizardStep1" runat="server" Title="Step 2">
<asp:Label ID="Label19" class="caption" runat="server" Text="Certification Name:"></asp:Label>
            <asp:TextBox ID="TextBox18" class="box" runat="server"></asp:TextBox> <br /><br />

            <asp:Label ID="Label20" class="caption" runat="server" Text="Certification Logo:"></asp:Label>
             <asp:FileUpload ID="FileUpload1" class="box" runat="server" /> <br /><br /> 
```

# php - JS 无法处理回显的 PHP

> ID：11717633
> 
> 赞同：0
> 
> 时间：2012-07-30T08:14:38.870
> 
> 标签：php, javascript, ajax

所以我有一个通过 Ajax POST 请求提交的表单。单击发送按钮后，表单将被移除，并在其位置放置一个处理图形。表单数据被发送到我的 PHP 脚本，经过验证，如果一切顺利，则返回感谢消息以替换处理图形。但是，如果存在验证错误，我会将整个表单的副本回显到原始表单所在的 div 中，以显示表单中的错误位置。这一切都很好，除非当表单的副本被回显时，表单的 JS 不起作用？发送按钮的 JS 或输入上的焦点/模糊功能都不是 JS。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:19:18.807

您是否尝试隐藏表单并显示处理图形而不是删除表单？当您遇到错误时，隐藏图形并再次显示表单。
使用此解决方案，错误处理会稍微困难一些，但您的表单不会出现在项目中的 2 个位置！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:19:42.143

当您从 DOM 中删除表单时，事件也会被取消。您可以拥有一个设置这些事件的函数，并在响应中出现错误时调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:58:53.470

当您将 HTML 混合 Javascript 插入某个节点（例如 div）时，它与第一次将其作为整个文档的一部分提供不同。当作为 innerHTML 或一些文本节点插入时，它不被视为脚本。

你有几个选择：

** 切换可见性并对错误响应进行编码（以 JSON 为例）

创建 2 个 div，一个保存表单，另一个保存正在处理的图像。

处理时将表单切换为无显示，并阻止图像。

当您处理完表单并且遇到错误时，以某种方式对其进行编码（例如 JSON）并将其发送回，并让页面上的现有脚本解释响应。

例如，您可以创建一些结构来保存每个表单元素名称以及与之关联的错误，因此如果您在每个可以显示错误的表单元素旁边创建一个空白跨度，则可以轻松地在表单中突出显示它们。

当答案从服务器到达时，您可以再次显示表单，并显示：无 PROCESSING div。

** 解释您的回复（使用 JAVASCRIPT）

这更困难，但也更优雅。我曾经需要这个（从 XHR 请求返回的 Javascript），而 Randy Webb 用一种聪明的方法帮助了我。

在这里解释太多了。阅读此线程以获得更详细的方法，并链接到 Randy 的脚本：

[http://tinyurl.com/6pakdu](http://tinyurl.com/6pakdu)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-30T08:25:46.057

```
$.ajax({
  url: 'mypage.html',
  success: function(){
    alert('success');
    **<ADD YOUR CUSTOM CODE AFTER AJAX SUCCESS - JS CODE>**
  },
  error: function(){ 
    alert('failure');
  }
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-30T08:30:16.257

你也可以参考。 [http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

```
 $.ajax({
   beforeSend: function(){
     // Handle the beforeSend event
   },
   complete: function(){
     // Handle the complete event
   }
   // ......
 }); 
```

# r - 在 ggplot2 中引导比例（因子水平）

> ID：11717645
> 
> 赞同：2
> 
> 时间：2012-07-30T08:16:06.330
> 
> 标签：r, ggplot2

我有一个长格式数据框，其中行代表不同人的响应（四个类别之一）。此处提供了一个示例数据集：

```
df <- data.frame(person=c(rep("A",100),rep("B",100)),resp=c(sample(4,100,replace=TRUE),sample(4,100,replace=TRUE)))
df$resp <- factor(df$resp)
summary(df)
person  resp  
A:100   1:52  
B:100   2:55  
        3:54  
        4:39 
```

我想展示一个图表，其中 x 轴绘制响应类别，y 轴显示类别中响应的比例，以及通过自举（带替换抽样）计算误差线。

我可以计算比例（以一种非常笨拙的方式；我相信这可以改进，但这不是我主要关心的问题）：

```
pFrame <- ddply(df,.(person,resp),summarise,trials = length(resp))
# can't figure out how to calculate the proportion with plyr.
pFrame$prop <- NA
people <- unique(df$person)
responses <- unique(df$resp)
for (i in 1 : length(people)){
  nTrials <- nrow(subset(df,person==people[i]))
  for (j in 1 : 4){
    pFrame$prop[pFrame$person==people[i] & pFrame$resp==responses[j]] <- pFrame$trials[pFrame$person==people[i] & pFrame$resp==responses[j]] /  nTrials 
  }
} 
```

并绘制它：

```
ggplot(pFrame,aes(x=resp,y=prop,colour=person)) + geom_point() 
```

但我真的很想使用类似的东西`stat_summary(fun.data="mean_cl_boot")`来显示比例的可变性（即作用于原始数据框`df`，并在行上引导）。我尝试了一些创建自定义函数的尝试，但这似乎并不简单，因为首先需要为引导程序转换因子水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:50:22.713

我无法让 ggplot 的“mean_cl_boot”工作。这是一个替代解决方案：

```
library(boot)

summary_for_plot <- melt(prop.table(table(df), 1))
names(summary_for_plot) <- c("person", "resp", "V1")

# function for boot()
summary_function <- function(df, d){
  melt(prop.table(table(df[d,]), 1))[, 3]
}

bootres <- boot(df, statistic = summary_function, R=100)
# get the standard deviation, used for the confidence intervals
summary_for_plot$sd <- sd(bootres$t)

ggplot(summary_for_plot, aes(x= resp, y = V1, color = person)) + geom_point() +
  geom_errorbar(aes(ymin = V1-sd, ymax = V1+sd), width = 0.2) 
```

# java - Bouncycastle RSA 密钥大小和填充

> ID：11717646
> 
> 赞同：1
> 
> 时间：2012-07-30T08:16:32.193
> 
> 标签：java, encryption, rsa, bouncycastle

我正在使用 Bouncycastle 的 RSA 实现。我得到一个具有以下选项的密码实例，

```
"RSA/ECB/PKCS1Padding" 
```

我的问题是你如何选择使用哪个填充？我可以加密的最大数据量是多少？AFAIK RSA 有一个限制。我也找不到ECB代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-23T08:30:16.290

在 rsa 中，加密模式被忽略。如果您要加密的日期很大，请自行计算块数，以下示例可能对您有所帮助：

```
 byte[] var21;
        try {

            Cipher cp = Cipher.getInstance("RSA/ECB/PKCS1Padding", new BouncyCastleProvider());
            cp.init(mode, key);
            int blockSize = cp.getBlockSize();
            int blocksNum = (int) Math.ceil((double) data.length / (double) blockSize);
            int calcSize = blockSize;
            Object buffer = null;
            outputStream = new ByteArrayOutputStream();
            for (int i = 0; i < blocksNum; ++i) {
                if (i == blocksNum - 1) {
                    calcSize = data.length - i * blockSize;
                }

                byte[] var22 = cp.doFinal(data, i * blockSize, calcSize);

                try {
                    outputStream.write(var22);
                } catch (IOException var19) {
                    throw new GeneralSecurityException("RSA error", var19);
                }
            }
            var21 = outputStream.toByteArray();
        } finally {
            if (outputStream != null) {
                try {
                    outputStream.close();
                } catch (IOException var18) {
                    ;
                }
            }

        } 
```

# foursquare - 使用商家 api，我可以创建特价、活动、提示、场地信息吗？

> ID：11717656
> 
> 赞同：1
> 
> 时间：2012-07-30T08:17:35.247
> 
> 标签：foursquare

使用商家 api，我可以创建特价、活动、提示、场地信息还是仅用于获取信息？我只查看get函数...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:35:51.203

您可以看到端点列表 @ [https://developer.foursquare.com/docs/index](https://developer.foursquare.com/docs/index)，其中包括[/specials/add](https://developer.foursquare.com/docs/specials/add)等端点，用于创建新的特价商品。

# java - MongoDB Java API：com.mongodb.DBCollection.Save() 和 com.mongodb.DBCollection.Insert() 之间的区别？

> ID：11717660
> 
> 赞同：2
> 
> 时间：2012-07-30T08:18:13.427
> 
> 标签：java, api, mongodb

看起来这两种方法都将 BasicDbObject 保存到集合实例中。这两种方法有什么区别？com.mongodb.DBCollection.Insert() com.mongodb.DBCollection.Save()

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T10:00:14.710

保存一次只能保存一个对象。如果提供了 _id 并且它已经存在，则新文档将覆盖以前存在的文档。如果它不存在，它将执行插入。

Insert 可以采用单个对象或对象的 ArrayList 并对它们进行“批量插入”。

如果您将现有的 _id 提供给插入，则会导致重复的 Id 异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T08:21:45.217

`.insert`仅用于插入，而`.save`可以插入或更新。

com.mongodb.DBCollection.Save

> 将对象保存到此集合（根据对象 _id 插入或更新）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:21:08.480

如果文档具有设置的_id，则保存将插入或更新，并且插入将只是插入。

您可以在此处阅读更多信息：[http](http://www.mongodb.org/display/DOCS/Updating/#Updating-) ://www.mongodb.org/display/DOCS/Updating/#Updating- {{save%28%29}}inthemongoshell

# android - 按下按钮时如何显示另一个布局？

> ID：11717666
> 
> 赞同：2
> 
> 时间：2012-07-30T08:18:31.097
> 
> 标签：android

我有以下代码可以翻转页面但显示相同的布局和相同的活动我想在按下按钮时更改此代码显示另一个具有不同布局的屏幕怎么可能？下面给出的源代码

```
 package com.samir;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.AccelerateInterpolator;
import android.widget.Button;
import android.widget.RelativeLayout;

import com.samir.anim.DisplayNextView;
import com.samir.anim.Rotate3dAnimation;

 public class MainActivity extends Activity implements OnClickListener {

Button btnRotateit, btnRotateBack;
RelativeLayout mContainer, relChild1, relChild2;
private boolean isFirstView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mContainer = (RelativeLayout) findViewById(R.id.mainlayout);
    relChild1 = (RelativeLayout) findViewById(R.id.child1);
    relChild2 = (RelativeLayout) findViewById(R.id.child2);

    btnRotateit = (Button) findViewById(R.id.btnrotate);
    btnRotateit.setOnClickListener(this);
    btnRotateBack = (Button) findViewById(R.id.btnback);
    btnRotateBack.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    switch (view.getId()) {
    case R.id.btnrotate:
        isFirstView = true;
        applyRotation(0, 90);
        break;
    case R.id.btnback:
        isFirstView = false;
        applyRotation(0, -90);
        break;
    default:
        break;
    }

}

private void applyRotation(float start, float end) {
    final float centerX = mContainer.getWidth() / 2.0f;
    final float centerY = mContainer.getHeight() / 2.0f;

    // The animation listener is used to trigger the next animation
    final Rotate3dAnimation rotation = new Rotate3dAnimation(start, end,
            centerX, centerY, 310.0f, true);
    rotation.setDuration(1200);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new AccelerateInterpolator());
    rotation.setAnimationListener(new DisplayNextView(isFirstView,
            mContainer, relChild1, relChild2));

    mContainer.startAnimation(rotation);

}
     }

  package com.samir.anim;

  import android.view.View;
 import android.view.animation.Animation;
 import android.view.animation.Animation.AnimationListener;
 import android.view.animation.DecelerateInterpolator;
 import android.widget.RelativeLayout;

 public class DisplayNextView implements AnimationListener {
RelativeLayout mContainer, relChild1, relChild2;
boolean isFirstView;

public DisplayNextView(boolean isFirstView, RelativeLayout mContainer,
        RelativeLayout relChild1, RelativeLayout relChild2) {
    this.mContainer = mContainer;
    this.relChild1 = relChild1;
    this.relChild2 = relChild2;

    this.isFirstView = isFirstView;
}

@Override
public void onAnimationEnd(Animation animation) {
    mContainer.post(new SwapViews());
}

@Override
public void onAnimationRepeat(Animation animation) {
}

@Override
public void onAnimationStart(Animation animation) {
}

public class SwapViews implements Runnable {
    @Override
    public void run() {

        final float centerX = mContainer.getWidth() / 2.0f;
        final float centerY = mContainer.getHeight() / 2.0f;
        Rotate3dAnimation rotation;

        if (isFirstView) {
            rotation = new Rotate3dAnimation(-90, 0, centerX, centerY,
                    310.0f, false);
        } else {
            rotation = new Rotate3dAnimation(90, 0, centerX, centerY,
                    310.0f, false);
        }
        rotation.setDuration(1500);
        rotation.setFillAfter(true);
        rotation.setInterpolator(new DecelerateInterpolator());

        mContainer.startAnimation(rotation);

        if (isFirstView) {
            relChild1.setVisibility(View.GONE);
            relChild2.setVisibility(View.VISIBLE);
        } else {
            relChild2.setVisibility(View.GONE);
            relChild1.setVisibility(View.VISIBLE);

        }
    }

}

   }

    package com.samir.anim;

 import android.graphics.Camera;
   import android.graphics.Matrix;
  import android.view.animation.Animation;
import android.view.animation.Transformation;

 public class Rotate3dAnimation extends Animation {
private final float mFromDegrees;
private final float mToDegrees;
private final float mCenterX;
private final float mCenterY;
private final float mDepthZ;
private final boolean mReverse;
private Camera mCamera;

public Rotate3dAnimation(float fromDegrees, float toDegrees, float centerX,
        float centerY, float depthZ, boolean reverse) {
    mFromDegrees = fromDegrees;
    mToDegrees = toDegrees;
    mCenterX = centerX;
    mCenterY = centerY;
    mDepthZ = depthZ;
    mReverse = reverse;
}

@Override
public void initialize(int width, int height, int parentWidth,
        int parentHeight) {
    super.initialize(width, height, parentWidth, parentHeight);
    mCamera = new Camera();
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    final float fromDegrees = mFromDegrees;
    float degrees = fromDegrees
            + ((mToDegrees - fromDegrees) * interpolatedTime);

    final float centerX = mCenterX;
    final float centerY = mCenterY;
    final Camera camera = mCamera;

    final Matrix matrix = t.getMatrix();

    camera.save();
    if (mReverse) {
        camera.translate(0.0f, 0.0f, mDepthZ * interpolatedTime);
    } else {
        camera.translate(0.0f, 0.0f, mDepthZ * (1.0f - interpolatedTime));
    }
    camera.rotateY(degrees);
    camera.getMatrix(matrix);
    camera.restore();

    matrix.preTranslate(-centerX, -centerY);
    matrix.postTranslate(centerX, centerY);
}
        }

       <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainlayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#DCDCDC"
android:orientation="vertical" >

 <RelativeLayout
    android:id="@+id/child1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/btnrotate"
        android:layout_width="170dp"
        android:layout_height="40dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/btnrotate"
        android:text="@string/rotateit" />
 </RelativeLayout>

 <RelativeLayout
    android:id="@+id/child2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone" >

    <Button
        android:id="@+id/btnback"
        android:layout_width="170dp"
        android:layout_height="40dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/btnback"
        android:text="@string/rotateback" />
     </RelativeLayout>

      </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:37:03.853

`setContentView`在您的 onclicklistener 方法上使用，例如：

```
setContentView(R.layout.layout); 
```

**编辑：**我想你想要什么时候`btnRotateit`按下然后你想要显示`relChild1`，`relChild2`然后再次按下`btnRotateBack`然后出现`mContainer`，然后试试：

`btnRotateit`在onclick 方法上添加代码：

```
relChild1.setVisibility(View.VISIBLE);
relChild2.setVisibility(View.VISIBLE);
mContainer.setVisibility(View.GONE); 
```

`btnRotateBack`并在onclick 方法上添加代码：

```
relChild1.setVisibility(View.GONE);
relChild2.setVisibility(View.GONE);
mContainer.setVisibility(View.VISIBLE); 
```

试试这个，让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:21:47.480

```
onClick(View v)
{
    setContentView(R.layout.another);
                            ^^^^^^^ 
} 
```

**编辑：** 例如你有两个视图，你可以设置可见性`INVISIBLE`或`GONE`

并在 onClick 中应用旋转并更改组件的可见性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:39:07.580

从您对 vishwa 的回复来看，您似乎不想更改现有活动的布局，而是更改为另一个活动。在哪个追逐中：

```
Intent intent = new Intent(this, secondpage.class);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:24:10.587

检查此代码

```
 private View view = null ;
 Button addbutton = null;
 ViewGroup parent = null;
 LayoutInflater inflater = null;

 inflater= (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
 addbutton = (Button)findViewById(R.id.btnAdd);

 parent = (ViewGroup) findViewById(R.id.mainxml);

 addbutton.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View view) {
        view = inflater.inflate(R.layout.other, null);
        parent.addView(view);
   }
}); 
```

# java - 如何用空的新行分割字符串

> ID：11717667
> 
> 赞同：3
> 
> 时间：2012-07-30T08:18:36.997
> 
> 标签：java, string

我的文件包含这个字符串：

```
a

b

c 
```

现在我想阅读它并用空行拆分它，所以我有这个：

```
text.split("\n\n"); where text is output of file 
```

问题是这不起作用。当我将新行转换为字节时，我看到“\n\n”表示为 10 10，但文件中的新行表示为 10 13 10 13。那么如何拆分文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T08:23:32.157

```
Escape  Description            ASCII-Value
\n      New Line Feed (LF)     10
\r      Carriage Return (CR)   13 
```

所以你需要在你的情况下尝试`string.split("\n\r")`。

### 编辑

如果要按*空行*拆分，请尝试`\n\r\n\r`。或者您可以使用`.readLine()`来读取您的文件，并跳过所有空行。

你确定是`10 13 10 13`吗？它总是应该`13 10`...

而且，你不应该`line.separator`过分依赖。因为如果您正在处理来自 *nix 平台的某些文件，则它是`\n`，反之亦然。甚至在 Windows 上，一些编辑器也将`\n`其用作换行符。所以我建议你使用一些高级方法或使用`string.replaceAll("\r\n", "\n")`来规范化你的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:27:07.183

请记住，有时您必须使用：

```
System.getProperty("line.separator"); 
```

获取行分隔符，如果你想让它独立于平台。您还可以使用[BufferedWriter 的](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html#newLine%28%29)newLine() 方法，它会自动处理该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:22:02.157

尝试使用：

```
text.split("\n\r"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:22:28.713

你为什么要分手`\n\n`？

您应该拆分，`\r\n`因为这就是文件行的分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T08:24:41.143

尝试使用正则表达式，例如：

 ~~~~```
text.split("\\W+"); 
```~~  ~~```
text.split("\\s+"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T08:32:55.367

```
LF: Line Feed, U+000A
CR: Carriage Return, U+000D

so you need to try to use  
"string".split("\r\n"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T08:34:31.853

使用[扫描器](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)对象，而不是担心字符/字节。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-30T08:24:28.857

一种解决方案是使用“\n”进行拆分并忽略空字符串

```
List<String> lines = text.split("\n");

for(String line : lines) {
  line = line.trim();
  if(line != "") {
      System.out.println(line);
  }
} 
```~~~~

# iphone - iPhone 手风琴视图

> ID：11717671
> 
> 赞同：0
> 
> 时间：2012-07-30T08:18:56.847
> 
> 标签：iphone, xcode, gridview, accordion, tableview

我创建了一个选项卡式应用程序（我不使用情节提要），第一个选项卡用于登录，第二个选项卡应该是手风琴视图，其中包含发送者、接收者、文本等的消息。手风琴视图应该是动态的，因此项目可以动态增加（更多消息=更多手风琴项目）。在标题中应该只有日期和主题。当我点击标题时，该项目应展开并应显示更多详细信息。我已经搜索了很多如何实施，但我没有找到解决问题的好方法。

编辑：这是[JQuery中的手风琴视图示例](http://jqueryui.com/demos/accordion/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:04:37.620

也许这会派上用场[http://www.roostersoftstudios.com/2011/04/14/iphone-uitableview-with-animated-expanding-cells/](http://www.roostersoftstudios.com/2011/04/14/iphone-uitableview-with-animated-expanding-cells/)

# safari - NPAPI 插件未在 Safari 中加载

> ID：11717673
> 
> 赞同：0
> 
> 时间：2012-07-30T08:19:16.777
> 
> 标签：safari, npapi, browser-plugin

大家，我做了一个NPAPI插件，它在firefox中运行良好，但在Safari中，它告诉我找不到插件。这是我的注册表

```
HKEY_LOCAL_MACHINE\Software\MozillaPlugins\@llf.com\WebGame

Descripton: REG_SZ "MP"

Path: REG_SZ "D:\Program Files\Mozilla Firefox\plugins\npFireFoxGame.dll"

ProductName: REG_SZ "npFireFoxGame"

Vendor: REG_SZ "llf"

Version: REG_SZ "1.0"

HKEY_LOCAL_MACHINE\SOFTWARE\MozillaPlugins\@llf.com/WebGame\MimeTypes\application/webgame 
```

我的 HTML 文件：

```
<embed width=1024 height=768 type="application/webgame"> 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:55:17.813

`@llf.com\WebGame`应该是`@llf.com/WebGame`。此外，`MimeTypes`条目通常包含值`Description`和`Suffixes`（两者`REG_SZ`）。

否则：

*   当您的 DLL 位于 FFs 插件文件夹以外的某个位置（您不应该使用那个）时，它在 Firefox 中是否仍然有效？
*   当您使用`object`而不是时，它的行为是否有所不同`embed`？
*   您的 DLL 是否完全加载（使用depends.exe 等）？
*   您是否尝试过在 depends.exes 跟踪模式下运行 Safari 以查看它的运行速度以及失败的原因？

# .net - 自行终止或卸载 Windows 服务

> ID：11717680
> 
> 赞同：1
> 
> 时间：2012-07-30T08:19:47.527
> 
> 标签：.net, windows, windows-services

我创建了一个工具，它提供与 Microsoft 的 PSExec 工具类似的功能，但从 Java 执行此操作（没有“Exec”命令）[https://dev.c-ware.de/confluence/display/PUBLIC/JRWShell+-+ A+Java+库+for+远程+控制+a+windows+shell](https://dev.c-ware.de/confluence/display/PUBLIC/JRWShell+-+A+Java+library+for+remote+controlling+a+windows+shell)

我的问题是，通常我的库会自动停止并卸载它创建的服务，但如果通信失败，这不会自动发生。我希望动态创建的服务启动和侦听连接并在连接关闭后终止。理想情况下，我希望 Windows 服务自行终止并自动卸载，但我认为如果不使用自动清理停止服务的第二个看门狗服务，则可能无法进行自我卸载。

所以我的问题是：服务是否可以自行卸载？如果是，这是如何完成的，如果不可能，我怎样才能让服务自行停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:26:41.197

事实证明，可以从服务中卸载该服务。然而，只要服务仍在执行并在服务终止后被删除，服务似乎就会留在服务列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T10:31:41.520

我正在使用下一个代码，它适用于我的服务。但是我还添加了“net stop serviceName”过程来卸载我的安装项目中的自定义操作（也许这很重要）。

```
 private static string getMsiexecParameters()
    {
        return string.Format("/x {0} /quiet /qn", GetProductCode(CProductName));
    }

    public static string GetProductCode(string productName)
    {
        string query = string.Format("select * from Win32_Product where Name='{0}'", productName);
        using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(query))
        {
            foreach (ManagementObject product in searcher.Get())
                return product["IdentifyingNumber"].ToString();
        }
        return null;
    }

    public static void Uninstall()
    {
        ProcessStartInfo psi = new ProcessStartInfo("msiexec.exe", getMsiexecParameters());
        Process.Start(psi);
    } 
```

对不起额外的代码，它来自我的工作项目

# javascript - Jquery 搜索 - 无法按预期工作

> ID：11717681
> 
> 赞同：1
> 
> 时间：2012-07-30T08:19:48.637
> 
> 标签：javascript, jquery, search

这是我的示例代码：http: [//jsfiddle.net/pT6dB/](http://jsfiddle.net/pT6dB/)

我有一点问题。那里有两个示例答案：

“地球有多圆？” 和“纸有多长？”

如果我输入搜索词“round Earth”，我希望它显示“地球有多圆？” 结果，但事实并非如此。

我想我需要更改查询，以便说明哪些问题同时包含“圆形”和“地球”。

这会是一个简单的修改吗？这是来自网站的示例代码，所以不幸的是我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:25:14.370

```
$('#search').keyup(function(e) {
    var s = $(this).val().trim();

    // show all results
    $('#result LI').show();

    // split the search into words
    var keywords = s.split(' ');

    // loop over the keywords and if it's not in a LI, hide it
    for(var i=0; i<keywords.length; i++) {
        $('#result LI:not(:contains('+keywords[i]+'))').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:25:04.557

您需要搜索每个单词，而不是搜索字符串“round Earth”，该字符串在任何项目中都不存在：

```
 var words = s.split(' ');

    $('#result LI').hide();

    $(words).each(function() {
        $('#result LI:contains(' + this + ')').show();
    }); 
```

[演示](http://jsfiddle.net/DUPyQ/)

当然，这里有一些可以想象的复杂情况。我们所做的只是调整脚本以涵盖更具体的场景。但这对于您的目的可能已经足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:25:15.687

我想您是在问“这会是一个简单的修改吗？” 答案是不。:)

您正在尝试在没有数据库的情况下进行全文搜索，而只是 jQuery，让我们不要谈论更复杂的情况，但至少您需要使用 split 将用户输入的单词与空格分开并一一检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:28:22.440

您正在寻找的是`full-text search`javascript 并且`contains`还不够。但是你可以做类似这个问题的公认答案：[javascript text search?](https://stackoverflow.com/questions/3274295/text-search-in-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T08:44:41.110

[尝试](http://jsfiddle.net/pT6dB/54/)它还检查您是否输入了超过 1 个在句子中不连续的单词。

# drag-and-drop - 在具有不同层 (zIndex) 的 ScatterViews 中捕获 SurfaceDragDropEventArgs

> ID：11717682
> 
> 赞同：1
> 
> 时间：2012-07-30T08:19:53.380
> 
> 标签：drag-and-drop, event-handling, pixelsense, scatterview

我正在尝试使用 Windows Touch Beta 的工具包实现一个带有两部 Android 手机和一个表面应用程序的照片共享应用程序。因此，我创建了一个`ScatterView`称为`MainScatterView`基本布局。每次用户触摸屏幕时，都会在 this 中创建一个 Blob `MainScatterView`。Blob 本身是一个`ScatterViewItem`包含一个`ScatterView`命名的`Blob`. 这`Blob`包含 Android 手机上特定相册的照片。

在两个 blob 之间拖放照片效果很好，但如果我想`MainScatterView`在依赖`onDrop`方法上拖放一个项目，则永远不会调用。我的假设是这个问题取决于 a`Blob` `ScatterView`和 the`MainScatterView`具有的不同层，但这只是一个假设。这是我的 XAML 代码：

```
<s:SurfaceWindow
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:s="http://schemas.microsoft.com/surface/2008"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="FotoSharing.SurfaceWindow1"
Width="1920" Height="1080" BorderThickness="5" BorderBrush="White" WindowStyle="None">

<s:SurfaceWindow.Resources>
    <ImageBrush x:Key="WindowBackground" Stretch="None" Opacity="0.6" ImageSource="pack://application:,,,/Resources/WindowBackground.jpg"/>
</s:SurfaceWindow.Resources>

<s:SurfaceWindow.Background>
    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
        <GradientStop Color="Black"/>
        <GradientStop Color="#FFA784C8" Offset="1"/>
    </LinearGradientBrush>
</s:SurfaceWindow.Background>
<s:ScatterView x:Name="MainScatterView" Margin="0" Width="1920" Height="1080" AllowDrop="True" s:SurfaceDragDrop.Drop="OnDrop" PreviewTouchDown="OnDragSourcePreviewTouchDown">
    <s:ScatterViewItem x:Name="sviBlob1" Width="600" Height="600" Orientation="0" CanMove="False" CanRotate="False" CanScale="False" Visibility="Collapsed">
        <Viewbox x:Name="ViewBoxBlob1">
            <s:ScatterView x:Name="Blob1" Width="600" Height="600" AllowDrop="True" s:SurfaceDragDrop.Drop="OnDrop" PreviewTouchDown="OnDragSourcePreviewTouchDown">
                <s:ScatterView.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black" Offset="0"/>
                        <GradientStop Color="#FFA784C8" Offset="1"/>
                    </LinearGradientBrush>
                </s:ScatterView.Background>
                <s:ScatterViewItem x:Name="sviBlob1Header" Width="600" Height="40" CanRotate="False" CanMove="False" CanScale="False" Orientation="0" Center="300,20" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
                    <s:ScatterViewItem.Background>
                        <LinearGradientBrush EndPoint="0,0" StartPoint="0,1">
                            <GradientStop Color="#FFA4B4BD" Offset="0"/>
                            <GradientStop Color="#FF65438F" Offset="1"/>
                        </LinearGradientBrush>
                    </s:ScatterViewItem.Background>
                    <Canvas x:Name="Blob1Header" Height="40" Width="600">
                        <Image x:Name="Blob1NavigateLeft" Height="40" Width="50" Source="Icons\navigate_left_256.png" Canvas.Left="480" TouchDown="handleTouchDownNavigateLeft" Visibility="Hidden"/>
                        <Image x:Name="Blob1NavigateRight" Height="40" Width="50" Source="Icons\navigate_right_256.png" Canvas.Left="535" TouchDown="handleTouchDownNavigateRight" Visibility="Hidden"/>
                        <Image x:Name="Blob1ZoomIn" Height="40" Width="50" Source="Icons\zoom_in_128.png" Canvas.Left="294" TouchDown="handleTouchDownZoomIn"/>
                        <Image x:Name="Blob1ZoomOut" Height="40" Width="50" Source="Icons\zoom_out_128.png" Canvas.Left="360" TouchDown="handleTouchDownZoomOut"/>
                        <Image x:Name="Blob1Pin" Height="50" Width="50" Source="Icons\pin_black_128.png" Canvas.Left="480" TouchDown="handleTouchDownPin"/>
                        <Image x:Name="Blob1DragDrop" Height="40" Width="46" Source="Icons\dragdrop.png" Canvas.Left="430" TouchDown="handleTouchDownDragDrop"/>
                        <Image x:Name="Blob1Close" Height="40" Width="50" Source="Icons\delete_blob_128.png" Canvas.Left="535" TouchDown="handleTouchDownClose"/>
                        <Image x:Name="Blob1Album" Height="40" Width="50" Source="Icons\album_128.png"/>
                        <Label x:Name="Blob1AlbumName" Content="Label" Width="250" Height="40" Canvas.Left="52" FontSize="26.667" Canvas.Top="-4" FontWeight="Bold" FontStyle="Italic"/>
                    </Canvas></s:ScatterViewItem>
            </s:ScatterView>
        </Viewbox>
    </s:ScatterViewItem>
    <s:ScatterViewItem x:Name="sviBlob2" Width="600" Height="600" Orientation="0" CanMove="False" CanRotate="False" CanScale="False" Visibility="Collapsed">
        <Viewbox x:Name="ViewBoxBlob2">
            <s:ScatterView x:Name="Blob2" Width="600" Height="600" AllowDrop="True" s:SurfaceDragDrop.Drop="OnDrop" PreviewTouchDown="OnDragSourcePreviewTouchDown">
                <s:ScatterView.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black" Offset="0"/>
                        <GradientStop Color="#FFA784C8" Offset="1"/>
                    </LinearGradientBrush>
                </s:ScatterView.Background>
                <s:ScatterViewItem x:Name="sviBlob2Header" Width="600" Height="40" CanRotate="False" CanMove="False" CanScale="False" Orientation="0" Center="300,20" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
                    <s:ScatterViewItem.Background>
                        <LinearGradientBrush EndPoint="0,0" StartPoint="0,1">
                            <GradientStop Color="#FFA4B4BD" Offset="0"/>
                            <GradientStop Color="#FF65438F" Offset="1"/>
                        </LinearGradientBrush>
                    </s:ScatterViewItem.Background>
                    <Canvas x:Name="Blob2Header" Height="40" Width="600">
                        <Image x:Name="Blob2NavigateLeft" Height="40" Width="50" Source="Icons\navigate_left_256.png" Canvas.Left="480" TouchDown="handleTouchDownNavigateLeft" Visibility="Hidden"/>
                        <Image x:Name="Blob2NavigateRight" Height="40" Width="50" Source="Icons\navigate_right_256.png" Canvas.Left="535" TouchDown="handleTouchDownNavigateRight" Visibility="Hidden"/>
                        <Image x:Name="Blob2ZoomIn" Height="40" Width="50" Source="Icons\zoom_in_128.png" Canvas.Left="294" TouchDown="handleTouchDownZoomIn"/>
                        <Image x:Name="Blob2ZoomOut" Height="40" Width="50" Source="Icons\zoom_out_128.png" Canvas.Left="360" TouchDown="handleTouchDownZoomOut"/>
                        <Image x:Name="Blob2Pin" Height="50" Width="50" Source="Icons\pin_black_128.png" Canvas.Left="480" TouchDown="handleTouchDownPin"/>
                        <Image x:Name="Blob2DragDrop" Height="40" Width="46" Source="Icons\dragdrop.png" Canvas.Left="430" TouchDown="handleTouchDownDragDrop"/>
                        <Image x:Name="Blob2Close" Height="40" Width="50" Source="Icons\delete_blob_128.png" Canvas.Left="535" TouchDown="handleTouchDownClose"/>
                        <Image x:Name="Blob2Album" Height="40" Width="50" Source="Icons\album_128.png"/>
                        <Label x:Name="Blob2AlbumName" Content="Label" Width="250" Height="40" Canvas.Left="52" FontSize="26.667" Canvas.Top="-4" FontWeight="Bold" FontStyle="Italic"/>
                    </Canvas></s:ScatterViewItem>
            </s:ScatterView>
        </Viewbox>
    </s:ScatterViewItem>
</s:ScatterView> 
```

两个依赖方法 onDrop 和 OnDragPreviewTouchDown 如下所示：

```
private void OnDragSourcePreviewTouchDown(object sender, TouchEventArgs e)
    {
        if (allowDragDrop == true)
        {
            if (e.OriginalSource is Image)
            {
                if ((e.OriginalSource as Image).Parent is ScatterViewItem) // prevent that image of Hederline is handled as foto
                {
                    Image foto = (Image)e.OriginalSource;
                    string fotoID = (string)foto.DataContext;
                    ScatterViewItem draggedElement = (ScatterViewItem)(e.OriginalSource as Image).Parent;
                    double width = draggedElement.ActualWidth;
                    double height = draggedElement.ActualHeight;
                    double orientation = draggedElement.ActualOrientation;
                    ScatterViewItemDataContext context = (ScatterViewItemDataContext)draggedElement.DataContext;
                    context.originCenter = draggedElement.ActualCenter;
                    ScatterView dragSource = (ScatterView)draggedElement.Parent;
                    ScatterViewItem clonedDraggedElement = createScatterViewItemClone(width, height, orientation, context, fotoID);

                    // Create the cursor visual.
                    ContentControl cursorVisual = new ContentControl()
                    {
                        Content = clonedDraggedElement
                    };

                    // Create a list of input devices. Add the touches that
                    // are currently captured within the dragged element and
                    // the current touch (if it isn't already in the list).
                    List<InputDevice> devices = new List<InputDevice>();
                    devices.Add(e.TouchDevice);
                    foreach (TouchDevice touch in draggedElement.TouchesCapturedWithin)
                    {
                        if (touch != e.TouchDevice)
                        {
                            devices.Add(touch);
                        }
                    }

                    SurfaceDragCursor startDragOkay =
                        SurfaceDragDrop.BeginDragDrop(
                            dragSource,                 // The ScatterView object that the cursor is dragged out from.
                            draggedElement,             // The ScatterViewItem object that is dragged from the drag source.
                            cursorVisual,               // The visual element of the cursor.
                            draggedElement,             // The data attached with the cursor.
                            devices,                    // The input devices that start dragging the cursor.
                            System.Windows.DragDropEffects.Move);      // The allowed drag-and-drop effects of the operation.

                    // This if-clause causes, that the scatterviewitems are not deleted on the dragsource!
                    if (startDragOkay != null)
                    {
                        // Set e.Handled to true, otherwise the ScatterViewItem will capture the touch 
                        // and cause the BeginDragDrop to fail.
                        e.Handled = true;
                        // Hide the ScatterViewItem.
                        draggedElement.Visibility = Visibility.Hidden;
                    }
                }
            }
        }
    }

    private void OnDrop(object sender, SurfaceDragDropEventArgs e)
    {
        e.Handled = false;
        Console.WriteLine(sender.ToString());
        if (sender is ScatterView)
        {
            // Get drag source SV and drop SV
            ScatterView dropScatterView = sender as ScatterView;
            ScatterView dragSource = (ScatterView)e.Cursor.DragSource;
            // Receive dragged Element from Cursor
            ScatterViewItem draggedElement = (ScatterViewItem)e.Cursor.Data;
            Image foto = (Image)draggedElement.Content;
            // Get informations to clone dragged item
            string fotoID = (string)foto.DataContext;
            double width = draggedElement.ActualWidth;
            double height = draggedElement.ActualHeight;
            double orientation = draggedElement.ActualOrientation;
            ScatterViewItemDataContext context = (ScatterViewItemDataContext)draggedElement.DataContext;
            // Clone dragged item
            ScatterViewItem clonedDraggedElement = createScatterViewItemClone(width, height, orientation, context, fotoID);
            clonedDraggedElement.Center = e.Cursor.GetPosition(dropScatterView);

            // Remove Item from Drag-Source
            dragSource.Items.Remove(draggedElement);

            // Item was droppeded in the same Blob
            if (dragSource.Equals(dropScatterView))
            {
                dropScatterView.Items.Add(clonedDraggedElement);
                // Update Center of Blob with Animation
                PointAnimation pa = new PointAnimation();
                pa.From = e.Cursor.GetPosition(dropScatterView);
                pa.To = context.originCenter;
                pa.Duration = TimeSpan.FromMilliseconds(500);
                pa.FillBehavior = FillBehavior.HoldEnd;
                clonedDraggedElement.BeginAnimation(ScatterViewItem.CenterProperty, pa);
            }
            else if (dropScatterView.Equals(MainScatterView) == false) // Foto was dropped to another Blob!
            {
                BlobInfo blobInfoDropSV = (BlobInfo)dropScatterView.DataContext;
                // Add new fotoID to array of fotoIDs
                blobInfoDropSV.fotoIDs.Add(fotoID);

                // Add dragged foto to grid of Blob
                FotoSampler fotoSampler = new FotoSampler();
                Image dropFoto = fotoSampler.getImageByFotoID(fotoID);
                ScatterViewItem sviToDrop = calculateFotoInGridPosition(blobInfoDropSV.fotoIDs.Count-1, dropFoto);
                dropScatterView.Items.Add(sviToDrop);

                PointAnimation pa = new PointAnimation();
                pa.From = e.Cursor.GetPosition(dropScatterView);
                pa.To = sviToDrop.Center;
                pa.Duration = TimeSpan.FromMilliseconds(500);
                pa.FillBehavior = FillBehavior.Stop;
                sviToDrop.BeginAnimation(ScatterViewItem.CenterProperty, pa);

                // refresh drag-Blob
                BlobInfo blobInfoDragSV = (BlobInfo)dragSource.DataContext;
                removeFotosFromBlob(dragSource);
                int nbrOfFotosBeforeRefresh = blobInfoDragSV.fotoIDs.Count;
                int idOfFotoToDelete = 0;
                for (int i = 0; i < nbrOfFotosBeforeRefresh; i++) // remove FotoID from List of FotoIDs
                {
                    if (blobInfoDragSV.fotoIDs[i].Equals(fotoID) == true)
                    {
                        idOfFotoToDelete = i;
                    }
                }
                blobInfoDragSV.fotoIDs.RemoveAt(idOfFotoToDelete); // delete draggedElement
                createFotosInBlob(blobInfoDragSV.blobNbr, blobInfoDragSV.fotoIDs, blobInfoDragSV.zoomLevel); // calculate and order fotos again

                // send Message mit Item to User
                TcpClient client = new TcpClient(blobInfoDropSV.user.ip);
                client.sendeNachricht("01#"+fotoID+"#");
            }
        }
    } 
```

我确实尝试了很多来解决这个问题，但没有任何结果可以带来舒适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:34:10.293

我已经认识到，`Background`必须定义 ScatterView-Property。只有设置了此属性，`SurfaceDragDropEventArgs`才能捕获类似的事件。疯狂的！

# html - 在 Internet Explorer 8 中为所有非多选标签设置 css 属性

> ID：11717698
> 
> 赞同：0
> 
> 时间：2012-07-30T08:21:59.037
> 
> 标签：html, css, select, internet-explorer-8, css-selectors

我想将所有非多选标签设置为斜体，我不希望将其设置为多选标签。到目前为止，我已经写了这个 css：

```
select
{
    font-style:italic;  
}

select[multiple="multiple"]
{
    font-style:normal;
} 
```

这适用于任何普通浏览器，但不适用于 Internet Explorer 8（和 9，但这并不重要）。我怎样才能让它在 Internet Explorer 8 中工作？

[JSFiddle](http://jsfiddle.net/aS8sf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:43:32.847

在 HTML 文档的最开始添加以下内容：

```
<!doctype html> 
```

这可以防止 IE 进入无法识别许多 CSS 功能（例如属性选择器等）的[Quirks 模式。](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)

此外，考虑将选择器简化为

```
select[multiple] 
```

这样它也将适用于语法标记变体，如`<select multiple>`.

# ios5 - iOS：设置推文收件人

> ID：11717701
> 
> 赞同：0
> 
> 时间：2012-07-30T08:22:10.150
> 
> 标签：ios5, twitter

我知道如何使用标准的 iOS 5 twitter 框架（使用下面的代码）发送消息。我不知道：

a) 如果可以向特定收件人（我自己）发送推文。我想在我的应用程序中将此作为“联系我们”功能，以便用户可以向我发送消息。

b) 如果有办法让用户在 Twitter 上关注我。

提前致谢！

```
-(IBAction)twitter:(id)sender {

if ([TWTweetComposeViewController canSendTweet])
{
    TWTweetComposeViewController *tweetSheet =
    [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:
     @"About my app"];
    [self presentModalViewController:tweetSheet animated:YES];
}
else
{
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:@"No Internet Connection"
                              delegate:self
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:29:16.963

a、发送回复：

```
[tweetSheet setInitialText:
 @"@pantelisproios About my app"]; 
```

b，然后发送推文：

```
[tweetSheet setInitialText:
 @"follow pantelisproios"]; 
```

如果你想直接使用 twitter API，你也可以使用 TWRequest。

# c# - 不使用分隔符拆分字符串的最佳方法

> ID：11717707
> 
> 赞同：0
> 
> 时间：2012-07-30T08:22:37.073
> 
> 标签：c#, .net

我有字符串：

```
MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938 
```

从上面的字符串可以看出，它是用冒号（`:`）分隔的，但在实际环境中，它并没有标准的布局。

标准是字段名称、示例`MONEY-ID`和`MONEY-STAT`。

我怎样才能以正确的方式拆分它？并从字段名称之后获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:28:59.070

正如安德烈所说，我个人会使用正则表达式。使用类似的组，

```
"MONEY-ID(?<moneyid>.*)MONEY-STAT(?<moneystat>.*)MONEY-PAYetr(?<moneypay>.*)" 
```

有关如何提取组的信息，请参见[这篇文章。](https://stackoverflow.com/questions/906493/regex-named-capturing-groups-in-net)可能后跟一个私有方法，用于修剪匹配组中的非法字符（例如：或 -）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T08:34:01.227

像这样的东西应该工作：

```
string s = "MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938";
            Regex regex = new Regex(@"MONEY-ID(?<moneyId>.*?)\:MONEY-STAT(?<moneyStat>.*?)\:MONEY-PAYetr-(?<moneyPaetr>.*?)$"); Match match = regex.Match(s);       
            if (match.Success)
            {
                Console.WriteLine("Money ID: " + match.Groups["moneyId"].Value);

                Console.WriteLine("Money Stat: " + match.Groups["moneyStat"].Value);
                Console.WriteLine("Money Paetr: " + match.Groups["moneyPaetr"].Value);

            }

            Console.WriteLine("hit <enter>");
            Console.ReadLine(); 
```

**更新** 回答其他问题，如果我们不确定格式，那么可以使用以下内容：

```
string s = "MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938";
        var itemsToExtract = new List<string> { "MONEY-STAT", "MONEY-PAYetr-", "MONEY-ID", };

        string regexFormat = @"{0}(?<{1}>[\d]*?)[^\w]";//sample - MONEY-ID(?<moneyId>.*?)\:
        foreach (var item in itemsToExtract)
        {
            string input = s + ":";// quick barbarian fix of lack of my knowledge of regex. Sorry
            var match = Regex.Match(input, string.Format(regexFormat, item, "match"));
            if (match.Success)
            {
                Console.WriteLine("Value of {0} is:{1}", item, match.Groups["match"]);
            }
        }

        Console.WriteLine("hit <enter>");
        Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:34:41.717

看一下这个：

```
string regex = @"^(?i:money-id)(?<moneyid>.*)(?i:money-stat)(?<moneystat>.*)(?i:money-pay)(?<moneypay>.*)$";
string input = "MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938";
Match regexMatch = Regex.Match(input, regex);

string moneyID = regexMatch.Groups["moneyid"].Captures[0].Value.Trim();
string moneyStat = regexMatch.Groups["moneystat"].Captures[0].Value.Trim();
string moneyPay = regexMatch.Groups["moneypay"].Captures[0].Value.Trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:27:40.920

例如，使用[正则表达式](http://www.regular-expressions.info/dotnet.html)，

```
(?<=MONEY-ID)(\d)* 
```

它会提取

```
123456 
```

从你的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T08:29:24.403

尝试

```
 string data = "MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938";
                    data = data.Replace("MONEY-", ";");

                    string[] myArray = data.Split(';');
                    foreach (string s in myArray)
                    {
                        if (!string.IsNullOrEmpty(s))
                        {
                            if (s.StartsWith("ID"))
                            { 

                            }
                            else if (s.StartsWith("STAT"))
                            {

                            }
                            else if (s.StartsWith("PAYetr"))
                            { 

                            }
                        }
                    } 
```

结果是

```
ID123456:
STAT43:
PAYetr-1232832938 
```

# java - toString：什么时候使用？

> ID：11717709
> 
> 赞同：6
> 
> 时间：2012-07-30T08:22:48.650
> 
> 标签：java, tostring

我有一堂课

```
class Configuration {
  // various stuff

  @Override
  public String toString() {
    // assemble outString
    return outString;
  }
} 
```

我还有一堂课

```
class Log {
  public static void d(String format, Object... d) {
    // print the format using d
  }
} 
```

Log 类工作得很好，我一直在使用它。现在当我这样做时：

```
Configuration config = getConfiguration();
Log.d(config); 
```

我得到编译器错误`The method d(String, Object...) in the type Log is not applicable for the arguments (Configuration)`。我可以解决这个问题：

```
Log.d("" + config);       // solution 1
Log.d(config.toString()); // solution 2 
```

我的问题：这有什么不同？在第一个解决方案中，编译器注意到它必须连接两个字符串，但第二个是配置。所以`Configuration#toString()`被称为，一切都很好。在编译器错误情况下，编译器发现需要一个字符串，但给出了一个配置。基本上同样的问题。

*   需要：字符串
*   给定：配置

这些情况有何不同，为什么`toString`不调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T08:31:42.187

在设计语言时，有人决定当程序员使用 + 运算符将任意对象附加到字符串时，他们肯定需要 a `String`，因此隐式调用`toString()`是有意义的。

但是如果你调用一个任意的方法来接受一个其他的`String`东西，那只是一个类型错误，这正是静态类型*应该*防止的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T08:33:43.617

线

```
"" + config 
```

被翻译成类似的东西

```
StringBuilder sb = new StringBuilder("");
sb.append(config); 
```

第二行调用的地方

```
StringBuilder.append(Object obj); 
```

此方法调用`obj.toString()`以获取对象的字符串表示形式。

另一方面，第一个参数`Log.d`必须是字符串，在这种情况下，Java 不会自动调用`toString()`将所有内容转换为字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T08:29:09.903

在一种情况下，您将对象参数传递给需要对象的运算符。

在较早的情况下，您将对象参数传递给需要字符串的函数。

基本上功能/运算符签名是不同的。

[在这个问题的上下文中] .tostring 在应用 + 时调用几乎是偶然的。它需要一个对象并做某事。

如您所知，当错误地需要字符串时，您可能会传入对象。所以不能一味做 .tostring()

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T08:36:16.283

`toString()`, is`print()`和`println()`的方法的常见用法之一`PrintStream`，如：

```
System.out.print(object);
System.out.println(object); 
```

基本上，这两个方法都会调用`toString()`传递的对象。这是[Polymorphism](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)的好处之一。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-30T08:37:19.953

好问题...

但是，Compiler 不会调用方法来匹配形式参数。如果可能，它只是尝试投射对象。

但是，当您使用“+”运算符时，编译器默认执行其参数（如果它们是对象）的 toString() 方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T08:41:35.517

`You are passing Configuration class object argument in case 1 but in the case 2 , you are passing string argument . so no error occures`.

# css - 针对 CSS 中没有指定 id 或类的特定元素

> ID：11717710
> 
> 赞同：0
> 
> 时间：2012-07-30T08:22:48.870
> 
> 标签：css, css-selectors

我经常遇到这个问题，我有一个带有“ID”的父元素和一组没有任何“ID”或“CLASS”作为具体目标的子元素。

有时，我真的没有为元素指定“ID”或“类”的选项，因此我可以轻松地定位元素。我也无权使用 javascript 来覆盖。所以我真的只是坚持使用 CSS 来设置它的样式。

CSS中有没有可以定位特定元素的方法？

请参阅我的示例问题：

[http://jsfiddle.net/jUeMB/](http://jsfiddle.net/jUeMB/)

我只想隔离“第 4 项”并突出显示它。这是我能做的最好的，但它也是错误的，因为它的目标是“第 5 项”，应该只突出显示“第 4 项”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:25:53.237

第 n 个子选择器就是您要寻找的。[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:30:12.267

你可以这样做：

```
#list_item li:nth-child(4) 
```

同样也适用于 table 和 div。[在此处](http://reference.sitepoint.com/css/pseudoclass-nthchild)查找浏览器支持。

# objective-c - 链接到objective-c项目中的可执行文件

> ID：11717715
> 
> 赞同：3
> 
> 时间：2012-07-30T08:23:07.867
> 
> 标签：objective-c, xcode, hyperlink, executable, binaryfiles

假设您想使用功能或与另一个第三方应用程序交互。是否可以链接到objective-c项目中的可执行文件？二进制文件可以包装在框架内吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:26:36.770

您可以使用 XCode 复制文件阶段在 Your.app/Contents/MacOS 中将附加的可执行文件与您的主要可执行文件一起放入，然后（假设您已复制`grep`）使用`[[NSBundle mainBundle] pathForAuxiliaryExecutable:@"grep"]`.

我做的有点不同，例如我有一个 Python 程序，我的应用程序调用之一（以 plist 格式获取响应，这很好），我只是将它复制到 My.app/Contents/Resources 目录并使用 [[ NSBundle mainBundle] pathForResource:@"myScript" ofType:@"py"] 来找到它。

我怀疑，你用哪种方式是一个品味问题。我认为将已编译的可执行文件与主要的可执行文件放在一起，并将 Python/Perl/其他任何东西放在资源中是有意义的。从那里只需要设置一个`NSTask`启动和管道辅助程序的输出回到您的主可执行文件的问题。更多信息在[这里](https://stackoverflow.com/questions/3208696/nstask-and-nspipe-example-to-comunicate-with-the-command-line-objective-c)。

# ipad - AFNetworking 内存分配不断上升

> ID：11717716
> 
> 赞同：5
> 
> 时间：2012-07-30T08:23:13.907
> 
> 标签：ipad, memory-management, uiimageview, afnetworking

我正在制作一个应用程序，它将从网络服务中获取图片资源和文本。我选择了很棒的 AFNetworking 的 UIImageView+AFNetworking 类别来处理图像下载的东西。

但是，我面临着内存问题。我使用了**Instruments的****分配**工具，发现每次加载更多图像时，内存分配总会增加，大小为 1-2 MB。我追查到源代码，原来是在AFNetworking的代码里。

 **确切的代码行是：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)__unused connection {
    self.responseData = [self.outputStream propertyForKey:NSStreamDataWrittenToMemoryStreamKey];

    [self.outputStream close];

    [self finish];

    self.connection = nil;
} 
```

这将占用 99.6% 的内存分配。

我在项目中使用 ARC，在 UITableView 中显示 UIImageViews 并像以下代码一样配置单元格：

```
[self.imageView setImageWithURLRequest:request
                          placeholderImage:nil
                                   success:successBlock
                                   failure:failBlock]; 
```

任何人都可以提供一些关于内存问题的想法吗？真的很头疼，因为一旦分配了内存，即使我清除了整个图像视图，它们也永远不会被清除。过了一会儿，我的应用程序将从**Instruments的****Real Memory Usage**窗口占用超过 100MB 。

 **任何帮助将不胜感激！！提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:58:47.280

可以清除图像的缓存。github上有一个关于它的讨论：

[AFNetworking 图像缓存](https://github.com/AFNetworking/AFNetworking/issues/109)

这可能会也可能不会解决您的问题。我想定期清除缓存应该可以降低内存使用量。****

# html - Add div box to list li

> ID：11717719
> 
> 赞同：0
> 
> 时间：2012-07-30T08:23:33.267
> 
> 标签：html, css

```
<ul>
    <li><div style="background-color: red; width: 10px; height: 10px; display: inline"></div>aaa</li>
    <li>bbb</li>
    <li>ccc</li>
</ul> 
```

**[fiddle](http://jsfiddle.net/cb8j7/)**

why in this example div is not visible? How can i add box with background-color in list?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:24:36.383

Because it is empty. It becomes visible if you add some text inside.

```
<ul>
    <li><div style="background-color: red; width: 10px; height: 10px; display: inline">test</div>aaa</li>
    <li>bbb</li>
    <li>ccc</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:26:04.260

`display: inline` will not display unless it contains some kind of contents. You'd need to either

`display: inline-block;` or

```
<div style="background-color: red; width: 10px; height: 10px; display: inline">&nbsp;</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:33:42.277

First of all there's no text in your `<div>` so you should do it like this :

You need to place the word `aaa` between your `<div>` tags

`<li><div style="background-color: red; width: 10px; height: 10px; display: inline">aaa</div></li>`

moreover you don't need any `display: inline;` property here you can simply do it like this :

[**My fiddle**](http://jsfiddle.net/cb8j7/5/)

And if you need all the `<li>` elements inline than you need to give `display: inline;` to your `<li>` and `display: inline-block;` to your `<div>` element also like this : [**My fiddle**](http://jsfiddle.net/cb8j7/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:29:57.117

According to the W3C validator div inside list is perfectly fine. You have to give some text in div. So that you can view the div.

# jquery - 将 ID 附加到来自其他元素单击操作的某个元素

> ID：11717720
> 
> 赞同：0
> 
> 时间：2012-07-30T08:23:33.780
> 
> 标签：jquery, click, appendto

我对 jQuery 有一点问题。我想从其他元素中添加元素的 ID，然后单击它... :) 所以，如果我单击某个列表元素，此元素 ID 将转到另一个元素，你能帮帮我吗？这是我的代码...

```
 $('#main_menu li').click(function(){
            (this.id).appendTo('.main_content ul')
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:25:02.593

```
$('#main_menu li').click(function(){
  $('.main_content ul').attr('id', this.id);
}); 
```

此处`this.id`将获取单击的元素`id`并将其设置`id`为`.main_content ul`.

### 但这会造成`id`重复，这是不允许的。

`id`你可以代替`class`：

```
$('#main_menu li').click(function(){
  $('.main_content ul').attr('class', this.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:25:09.830

尝试附加元素本身：

```
$('#main_menu li').click(function() {
    $(this).appendTo('.main_content ul')
}); 
```

演示[http://jsfiddle.net/AbeyT/](http://jsfiddle.net/AbeyT/)

# html - OGG 真的需要 HTML5 视频完全兼容吗？

> ID：11717721
> 
> 赞同：5
> 
> 时间：2012-07-30T08:23:35.857
> 
> 标签：html, html5-video, flash

我正在准备一个带有视频的网页。我想让它与各种设备兼容，因此我插入了一个 HTML5`<video>`标记，其中包含用于不兼容浏览器（主要是 Internet Explorer < 9）的 Flash Player 后备（FLV 视频文件）。

对于 HTML5 视频，我将视频转换为 MP4/H.264 和 WebM/VP8。根据[Wikipedia](http://en.wikipedia.org/wiki/HTML5_video)，H.264 用于：

*   IE浏览器
*   谷歌浏览器
*   Safari（iOS+桌面）
*   安卓浏览器

虽然 VP8 兼容：

*   火狐
*   歌剧
*   （再次）Chrome 和 Android

似乎所有内容都涵盖了（谈论今天浏览器的最新版本），Flash 回退到旧版本。

考虑到 MP4 + WebM 似乎就足够了，我可以跳过视频的 OGG 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:35:07.053

h246 涵盖智能手机和 h264 利益相关者浏览器（大坏公司）。

WebM 涵盖 Firefox 和 Opera（独立的免费浏览器）。

h264 应该是首选（第一）选择，因为智能手机可能能够解码 WebM，但它们通常只能硬件加速 h264。

**现在**所有做 Theora (ogg) 的浏览器应该也能做 WebM 了。没有理由再在 Theora 中编码视频了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:31:01.137

对不起，是的，为了完全兼容，.ogg 是必需的。我试图在我的网站上创建一个页面，用于仅使用 h.264 和 webM 共享我的视频，但是很多智能手机无法播放它们。

如果您需要，可以使用许多免费的 ogg 转换器（[以其中之一为例）。](http://download.cnet.com/Free-MP3-WMA-OGG-Converter/3000-2140_4-10793572.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-18T03:36:42.633

Firefox 和 Chrome 分别从 2009 年 6 月和 2010 年 1 月开始全面支持 OGG。Firefox 于 2013 年 4 月开始部分支持 MP4，而 Safari 和 Chrome 从 2008 年和 2010 年或更长时间开始全面支持 MP4。Firefox 和 Chrome 分别从 2011 年 3 月和 2010 年 9 月开始部分支持 WebM。IE 自 2011 年 3 月起完全支持 MP4。Edge 完全支持 MP4，部分支持 WebM。Opera 从 2011 年 6 月开始部分支持 WebM，从 2013 年 8 月开始完全支持。所有的移动浏览器都支持 MP4，所以不需要包括在内。

因此，从 2011 年 3 月开始，仅使用 MP4 和 WebM 就可以支持 Firefox 和 IE，从 2011 年 6 月开始基本上永远支持 Chrome 和 Safari，以及从 2011 年 6 月开始支持 Opera。在我看来，MP4 和 WebM 提供了大量支持。只需包含一个备用图片，如果有人 5 年或更长时间没有升级他们的浏览器，他们就不会获得完整的体验。在我看来听起来很公平。

如果你关心支持 5 年没有升级的人，OGG 在 Firefox、Chrome 和 Opera 中都有很好的支持。IE、Edge 和 Safari 根本不支持它。

# .net - 与 Lucene .Net 相比，使用 solr 有什么优势？

> ID：11717722
> 
> 赞同：5
> 
> 时间：2012-07-30T08:23:35.557
> 
> 标签：.net, solr, lucene, lucene.net

我们正在尝试将全文搜索整合到我们的产品中。在搜索 lucene 和 solr 的比较时，我发现大多数人提到 lucene（和 lucene .Net）是一个库，而 solr 是一个应用程序的明显区别。有些人还提到了诸如点击突出显示等 solr 功能，但 lucene .Net contrib 库似乎也支持它们。我看到的唯一在 solr 中支持而不在 lucene 中支持的功能是文档字段类型。

使用 Lucene .Net 将使我们的部署过程更容易（我们的产品在 IIS 上运行），因此我们倾向于使用 Lucene .NET 而不是 solr。但是，我们想知道如果我们不使用 solr 会丢失什么。我会欣赏每个功能/优势的一些细节，而不是简单的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:30:31.140

看看这个链接： http: [//www.solrtutorial.com/overview/solr-for-managers.html](http://www.solrtutorial.com/overview/solr-for-managers.html)

正如您所说，SOLR 是一个应用程序，这意味着您不必实现它（例如）：

*   搜索结果突出显示
*   数据库集成
*   搜索 Word 和 PDF 等二进制文档

通过实现我的意思是调用 Lucene.API 来使用这些特性。

基本上 ：

*   使用 SOLR 意味着调用 REST 服务的索引和搜索命令。
*   使用 Lucene.NET 意味着编写代码来管理索引创建、数据索引（Lucene 不知道如何索引 Word 文件）等等。

# ruby-on-rails - Ruby on Rails - 在视图中显示并存储在数据库中的简单计算

> ID：11717724
> 
> 赞同：2
> 
> 时间：2012-07-30T08:23:38.257
> 
> 标签：ruby-on-rails, ruby

首先对这个简单的问题感到抱歉，在花了很多时间之后，我放弃了在没有任何帮助的情况下找到它:(。

简化后我有以下情况：一个`rates`带有列的表，`rate`并`converted`使用 ruby​​ 中的脚手架语句生成。该列`rate`将显示在视图中，但该`converted`列不会仅在应用程序的后台使用。

现在我的目标是向用户询问字段中给出的费率，`rate`以便应用程序可以计算`converted`该值并将其存储在数据库中。这是一个简单的计算：`converted`= 1 / 比率。

请指教 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:30:03.937

有很多方法可以做到这一点，包括但不限于将逻辑放入模型中（可能是最干净的）、控制器中以及带有隐藏字段和 javascript 的视图本身。

我会在模型级别通过回调来做到这一点。例如，将此添加到您的 rates.rb 模型中：

```
before_save :calculate_converted_rate

private

def calculate_converted_rate
  self.converted = 1.0 / self.rate
end 
```

正如代码所建议的那样，每次在保存 Rates 实例之前，都会将转换后的字段设置为 rate 字段的倒数。

有关 ActiveRecord 回调的更多信息：http: [//api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:28:47.053

在模型中定义自己的 mutator 方法。这将允许您从用户那里获取输入，用它做您想做的事情，然后将其存储在数据库中。为了显示：

```
class Rate < ActiveRecord::Base

    def rate=(value)
        write_attribute :rate, value
        write_attribute :converted, 1.0 / value
    end

end 
```

这将覆盖 Rails 的默认`rate=`方法，当您的模型`rate`从（假设）您的表单传递数据时调用该方法。`<%= f.text_field :rate %>`使用 a或您需要做的任何事情来正常构建模型的形式。

注意`1.0 / value`, not `1 / value`- 这将确保该表达式的结果是一个浮点数，并且您不会丢失任何精度。如果你在 Ruby 中用一个整数除以一个整数，你总是会得到一个整数。

# mysql - 如何将 MySQL4 迁移到 MySQL5 数据库

> ID：11717727
> 
> 赞同：1
> 
> 时间：2012-07-30T08:23:47.913
> 
> 标签：mysql, database, linux, terminal, mysqldump

我有一个由 MySQL4 创建的数据库（db4）和一个由 MySQL5 创建的数据库（db5）。db4 包含几个具有字符集 latin1 和几个索引的表，但没有使用 MySQL“PASSWORD”函数加密的数据。db5 为空。

我想将所有表和索引从 db4 迁移到 db5（实际上在同一台服务器上）。理想情况下，这应该在不丢失任何信息的情况下并在短时间内完成。

我需要哪些终端命令从 MySQL4 下载完整的数据库，然后将数据插入 db5？我必须重新创建索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:29:39.177

您可以使用 mysqldump 在 mysql4 中转储数据库。而不是使用 mysql 命令将其上传到 MySQL5。

```
mysqldump dbname > file
mysql dbname < file 
```

所有索引都将自动重新创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T13:44:57.060

如果其他人需要将数据库从 Mysql4 移动到 Mysql5，这就是我所做的。

1.  从 mysql4 服务器转储数据库

    ```
    mysqldump -uuser -ppass db4 > db4.sql 
    ```

2.  修复一些语法问题（[来源](http://matthiaslienau.de/blog/2013/6/21/converting-mysql4-database-dump-syntax-to-mysql5)）

```
 # change comment style from -- to #
    sed -r -i -e 's/^--(.*)$/#\1/' db4.sql
    # change type declaration keyword from "TYPE" to "ENGINE"
    sed -i -e 's/) TYPE=/) ENGINE=/' db4.sql
    # adapt  timestamp field definition
    sed -i -e 's/timestamp(14) NOT NULL,$/timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,/' db4.sql 
```

3.  在 mysql5 服务器上，您现在可以导入修改后的 SQL 转储

    ```
    mysql -uuser -ppass db5 < db4.sql 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:35:57.440

Sven，我认为在 db4 中备份您的数据并在 db5 中恢复它对您有用。

**备份**

```
mysqldump database_name > file_name.sql 
```

**恢复**

```
mysql < file_name.sql 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T12:48:07.847

也可以使用以下命令在一个步骤中完成：

```
 mysqldump -u dbo4 --password="..." --default-character-set="latin1" db4 | mysql -S /tmp/mysql5.sock -u dbo5 --password="..." --default-character-set="latin1" db5 
```

不幸的是，带有特殊字符的标准值没有正确导入，似乎没有办法避免这种情况：[How to maintain character-set of standard-values when uploading MySQL-dump](https://stackoverflow.com/questions/11757158/how-to-maintain-character-set-of-standard-values-when-uploading-mysql-dump)。

# .htaccess - 无法成功应用 URL 重写

> ID：11717731
> 
> 赞同：0
> 
> 时间：2012-07-30T08:24:20.033
> 
> 标签：.htaccess, url, mod-rewrite, rewrite, clean-urls

尽管浏览了有关重写 URL 的所有资源，但我无法成功地将其应用于我的网站。

网址是`www.mysite.com/Client/?clientname=name`

我希望它是`www.mysite.com/Client/name`

客户端是根目录中的另一个目录

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:36:30.857

看起来您可以在其中使用 RewriteCond 来检查它是否与您想要的 URL 匹配。然后，您希望在匹配后将其设为最后一个 (L) RewriteRule：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} Client/ [NC]
RewriteRule (.+) index.php?clientname=$1 [L] 
```

# asp.net-mvc-3 - 如何迭代 ViewBag 或如何将 viewBag 的值从一个 Action 复制到另一个 Action

> ID：11717750
> 
> 赞同：0
> 
> 时间：2012-07-30T08:25:17.510
> 
> 标签：asp.net-mvc-3

我有一个基本控制器，如下所示

```
 public abstract class BaseController
    {

        protected ActionResult LogOn(LogOnViewModel viewModel)
        {
            SaveTestCookie();

            var returnUrl = "";
            if (HttpContext != null && HttpContext.Request != null && HttpContext.Request.UrlReferrer != null)
            {
                returnUrl = HttpContext.Request.UrlReferrer.LocalPath;
            }

            TempData["LogOnViewModel"] = viewModel;

            return RedirectToAction("ProceedLogOn", new { returnUrl });
        }

        public ActionResult ProceedLogOn(string returnUrl)
        {
            if (CookiesEnabled() == false)
            {
                return RedirectToAction("logon", "Account", new { area = "", returnUrl, actionType, cookiesEnabled = false });
            }
            var viewModel = TempData["LogOnViewModel"] as LogOnViewModel;

            if (viewModel == null)
            {
                throw new NullReferenceException("LogOnViewModel is not found in tempdata");
            }

            //Do something
            //the problem is I missed the values which are set in the ViewBag
        }
    } 
```

和另一个控制器

```
public class MyController : BaseController
    {

        [HttpPost]
        public ActionResult LogOn(LogOnViewModel viewModel)
        {
            // base.LogOn is used in differnet controller so I saved some details in view bag 

            ViewBag.Action = "LogonFromToolbar";
            ViewBag.ExtraData = "extra data related only for this action";

            return base.LogOn(viewModel);
        }

    } 
```

问题是我错过了 ProceedLogOn 操作方法中的查看包值。我在 BaseController 的 Logon 方法中有值。

如何将 ViewBag 的值从一个 Action 复制到另一个 Action？

所以我不能简单的说 `this.ViewBag=ViewBag;`

因为 ViewBag 没有设置器。我正在考虑通过 viewbag 进行迭代。我试过了`ViewBag.GetType().GetFields()`，`ViewBag.GetType().GetProperties()`但他们什么也没回来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T09:28:19.050

ViewData 反映 ViewBag
您可以像这样迭代您存储的值：

```
ViewBag.Message = "Welcome to ASP.NET MVC!";
ViewBag.Answer = 42;

foreach (KeyValuePair<string, object> item in ViewData)
{
    // if (item.Key = "Answer") ...
} 
```

这个[链接](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)也应该有用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T10:40:00.313

恐怕我不知道如何复制 ViewBag。

但是，我永远不会那样使用 ViewBag。

如果有人出于某些原因不喜欢使用 ViewModel，ViewBag 是 Controller 提供给 View 以呈现输出的一些数据。视图不应该知道任何关于控制器的信息，但你的 ViewBag 持有一个 ActionName ;)。

无论如何，ProceedLogOn 操作方法有很多参数......实际上不是一个很好的代码，所以为什么要犹豫添加更多当前保存在 MyController.Logon ViewBag 中的参数？然后在 ProceedLogOn 方法中，你有你想要的。

;)

# android - 如何使用SqliteDatabase查询方法实现联合查询

> ID：11717751
> 
> 赞同：1
> 
> 时间：2012-07-30T08:25:17.947
> 
> 标签：android

当我使用 rawQuery 方法从 sqlite 数据库中检索数据时，我正在开发一个应用程序，因为该查询是 UNION 查询并且数据显示在 listview 上。我想使用查询方法，因为我还想实现一个内容提供程序来处理从数据库中检索到的数据。有什么方法可以使用查询方法实现联合查询。

我只想知道结构，因为查询已经使用 rawQuery 方法工作了我如何使用查询方法来构建它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:52:02.097

您可以使用以下方法：

```
public String buildUnionQuery (String[] subQueries, String sortOrder, String limit)

public String buildQuery (String[] projectionIn, String selection, String groupBy, String having, String sortOrder, String limit) 
```

对于联合的 SQL 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:31:13.943

检查以下链接

[http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)

[如何在android中使用rawQuery()](https://stackoverflow.com/questions/1617280/how-to-use-rawquery-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T15:44:11.090

我已经回答了一个类似的问题，看看我的完整[答案](https://stackoverflow.com/a/41104321/5219866)。

TL; DR：我认为当您想要执行 UNION 查询时，目前不存在使用查询而不是 rawquery 的任何方式。

# c# - 如何在 C# 中设置标签的位置？

> ID：11717759
> 
> 赞同：0
> 
> 时间：2012-07-30T08:25:53.303
> 
> 标签：c#, winforms

我正在尝试为我的网站即兴聊天。我有 2 个文本框（一个用于问题的主题，另一个用于问题的内容）。单击某个按钮后，我使用结果更新标签。

标签的位置不是我想要的。如何调整标签的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:30:41.993

您需要设置标签的[边界](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.bounds%28v=vs.80%29)以更改其位置和大小（假设您指的是 WinForms）。或者，您可以直接设置[Location](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.location%28v=vs.80%29)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:33:35.740

您还可以使用`Location`属性来设置标签在表单上的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:50:00.150

```
 private void button_Click(object sender, RoutedEventArgs e)
        {
            textblock_name.Margin = new Thickness(338, 57, 0, 0);

        } 
```

您可以使用上面的代码动态更改位置

# java - 从 HttpServletRequest 获取用户名和密码

> ID：11717768
> 
> 赞同：2
> 
> 时间：2012-07-30T08:27:00.300
> 
> 标签：java, jakarta-ee, servlets, cxf

我需要从中获取用户名和密码`HttpServletRequest`来处理基本身份验证。我拥有的是`CXF`端点和基本的身份验证拦截器。`HttpServletRequest`我得到这样的：

```
public void handleMessage(Message message)            
        throws Fault {
    HttpServletRequest request = (HttpServletRequest) message.get(AbstractHTTPDestination.HTTP_REQUEST); 

} 
```

当我尝试调试代码时，我看到：

```
request.getAuthType() is null
request.getRemoteUser() is null 
```

我通过 Soap UI 的请求发送的用户名和密码。所以问题是我如何从请求中获取用户名和密码？

**编辑**

标题如下所示：

```
POST http://localhost:8011/GradIrelandUserRegistration HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: ""
Authorization: Basic UGF1bGl1czpQYXVsaXVzMTIz
Content-Length: 3170
Host: localhost:8011
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 
```

他们说授权是基本的，但是为什么调用`request.getAuthType()`返回 null 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:50:06.227

我能够弄清楚我自己。在 Soap UI 中，我需要将身份验证类型更改为：

```
Preemptive 
```

然后使用：

```
AuthorizationPolicy policy = (AuthorizationPolicy) message.get(AuthorizationPolicy.class.getName()); 
```

现在我可以从策略对象中获取用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:34:46.973

[这可能对您有所帮助](http://cxf.apache.org/docs/http-binding.html) 。我对 SOAP 数据解析有点陌生，所以如果不工作，请告诉我一个简短的问题。. 另请检查此[J-Query 插件](http://archive.plugins.jquery.com/project/jqSOAPClient)以使用数据库解析 SOAP 服务。检查这个[堆栈溢出](https://stackoverflow.com/a/8512262/1557322)

# java - 如何使用 Spring 的 JaxWsPortProxyFactoryBean 忽略无效的 xml 响应

> ID：11717774
> 
> 赞同：1
> 
> 时间：2012-07-30T08:27:23.767
> 
> 标签：java, xml, spring, jax-ws, jaxb2

我正在使用 JaxWsPortProxyFactoryBean 从 wsdl 创建一个简单的 ws 客户端。一切都按预期工作，但不幸的是，我得到的响应包含在 xml 文档中无效的 unicode 字符。不幸的是，这是第三方网络服务，所有者目前无法更改内容。因此，我得到如下异常：

```
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1563]
Message: An invalid XML character (Unicode: 0x1a) was found in the element content of the document. 
```

无论如何要忽略这些错误，接收响应并自己清除它？如果没有，是否有任何“适当”或“通常”的方式来处理这些情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:15:57.120

问题是 0x1a 不在[XML 的有效字符集范围内](http://www.w3.org/TR/2000/REC-xml-20001006#NT-Char)。可能[这个解决方案](http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html)是您正在寻找的，即使用某种过滤器/拦截器删除您自己的无效字符可能是..

此外，阅读[这篇文章](https://stackoverflow.com/questions/8425761/encoding-for-an-xml-document-containing-u001a/8427929#8427929)以了解另一种替代解决方案，即用 UNICODE 替换字符替换它。

# perl - Perl查找和替换坟墓字符

> ID：11717775
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:27:31.313
> 
> 标签：perl, character, replace

我需要用 perl 查找并替换字符串中的所有严重字符。我尝试使用以下代码执行此操作

```
$str=~ s/è/&egrave; /g; 
```

但是`è`没有找到。我需要转换严重字符，因为我必须在 XML 文件中插入有人可以帮助我吗？

正如所问，这是代码

```
sub ConvertiCaratteri()
{
    my ($variabile)=shift;
    #&lt; <
    #&gt; >
    #&amp; &
    #&apos; '
    #&quot; "
    $form{$variabile}=~ s/&/&amp; /g;
    $form{$variabile}=~ s/</&lt; /g;
    $form{$variabile}=~ s/>/&gt; /g;
    $form{$variabile}=~ s/'/&apos; /g;
    $form{$variabile}=~ s/"/&quot; /g;
    $form{$variabile}=~ s/à/&agrave; /g;
    $form{$variabile}=~ s/è/&egrave; /g;
    $form{$variabile}=~ s/é/&amp;&eacute; /g;
    $form{$variabile}=~ s/ì/&amp;&igrave; /g;
    $form{$variabile}=~ s/ò/&amp;&ograve; /g;
    $form{$variabile}=~ s/ù/&amp;&ugrave; /g;
} 
```

对于像 & < ecc 这样的字符，它可以工作，但对于严重的字母则不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:51:09.727

修复产生无效 XML 的代码。将字符传递给 XML 库并指定合适的字符编码。XML 默认编码 UTF-8 就可以了。

## 解决方案1：纯字符

```
use utf8;
use XML::LibXML qw();
my $dom = XML::LibXML->createDocument('1.0', 'UTF-8');
my $root = $dom->createElement('root');
$root->appendText('è');
$dom->setDocumentElement($root);
$dom->toFile('foo.xml'); 
```

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<root>è</root> 
```

* * *

* * *

## 解决方案 2：[数字字符引用](http://enwp.org/Numeric_character_reference)

```
use utf8;
use XML::LibXML qw();
my $dom = XML::LibXML->createDocument('1.0', 'ANSI_X3.4-1968');
my $root = $dom->createElement('root');
$root->appendText('è');
$dom->setDocumentElement($root);
$dom->toFile('foo.xml'); 
```

* * *

```
<?xml version="1.0" encoding="ANSI_X3.4-1968"?>
<root>&#232;</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:42:09.120

您的 Perl 脚本和您尝试处理的文件之间可能存在编码不匹配。如果您的 HTML 是 UTF-8 编码的，您可以尝试输入：

```
use utf8; 
```

在脚本的开头。

更好的是，使用 HTML::Entities：

```
use utf8;
use HTML::Entities qw(encode_entities);
encode_entities 'è';    # returns '&egrave;' 
```

# java - 如何在 Eclipse 中将断点切换到整个类？

> ID：11717777
> 
> 赞同：0
> 
> 时间：2012-07-30T08:27:44.000
> 
> 标签：java, android, eclipse, debugging

我想知道是否有在 Eclipse 中为整个类设置断点的选项或快捷方式，有这样的事情吗？还是必须手动将其设置为每个块/行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:29:17.037

只需在类的开头设置断点，然后使用 F6 单步执行每一行代码。

你可以

Step Over - 越过下一行

Step Into - 进入方法，看看里面发生了什么

Step Return - 从 step into 方法返回

[Eclipse - 跨步](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/debug/ref-stepover.htm)

![在此处输入图像描述](../Images/caa11818abb109716c87b595763a7ac9.png)

# android - 切换按钮高度小于 30dp 文本消失 Android

> ID：11717782
> 
> 赞同：2
> 
> 时间：2012-07-30T08:27:56.957
> 
> 标签：android, android-widget, android-button

我在这方面遇到了很大的挑战。如果切换按钮高度小于 30dp，则文本消失。我想知道这是一个设计问题还是任何人都可以帮助我解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:58:35.620

您可以尝试将填充设置为 0。有时您需要覆盖默认填充。

如果这不起作用，您可以使用自定义图形而不是 android 默认图形。android 的默认切换按钮图形是 9-patch，其中有一些内置填充，您无法从代码中禁用。

您可以尝试将IncludeFontPadding 设置为false。这可以在代码和 xml 中完成。

作为最后的手段，您必须更改文本大小以适合按钮内部。

# curl - 如何查找网站是否使用 HSTS

> ID：11717789
> 
> 赞同：13
> 
> 时间：2012-07-30T08:28:19.570
> 
> 标签：curl, https, header

我对 curl 完全陌生，正在尝试确定网站是否使用 Strict-Transport-Security。

我正在逃避建议。我被告知要检查[Chrome 的预加载列表](http://src.chromium.org/viewvc/chrome/trunk/src/net/base/transport_security_state_static.json?view=markup)并运行

```
curl -D - https://www.example.com | head -n 20 
```

检查 Strict-Transport-Security 标头。

但是“head”命令产生了一个错误并且是未知的。

有任何想法吗？

ATM 我正在​​运行 Win XP，几天后会有一个 linux 发行版。

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-03T16:26:52.573

那个方法很好。

```
$ curl -s -D- https://paypal.com/ | grep Strict
Strict-Transport-Security: max-age=14400 
```

正如您所注意到的，一些网络服务器只是拒绝接受`HEAD`请求。 `curl`将打印`GET`请求的标头`-v`：

```
$ curl -s -vv https://paypal.com/ 2>&1 | grep Strict
< Strict-Transport-Security: max-age=14400 
```

这`<`意味着标头是服务器返回给您的标头。

Actual `example.com`，如在您的示例中，将不起作用，因为它根本不听`https://`：

```
$ curl -D- https://www.example.com
curl: (7) couldn't connect to host 
```

由于`Strict-Transport-Security`标头仅在传递过来时才受到尊重`https://`，因此可以非常安全地假设任何不响应 on 的站点`https://`都没有使用 STS，尤其是因为它没有理由这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T14:00:14.267

Chrome 具有 HSTS 检查功能`chrome://net-internals#hsts`

但请注意，每当您通过 https 请求站点时，Chrome 也喜欢添加条目。

刚刚让 chrome 将我重定向到 https 以获取没有 https 证书的内部站点。甚至没有在 443 上听。不出所料，curl 没有返回 Strict 标题。然后我发现 chrome 有一个内部 HSTS 列表。可以从 chrome://net-internals#hsts 中清除，不包括全球 Google 维护的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T22:41:01.617

[扩展@FauxFaux的答案]

我想看看我的网站与业内其他网站相比如何。所以，我写了一个 bash`for`循环。我发现有些网站不仅对待`HEAD`请求的方式与实际浏览器不同`GET`，而且它们（亚马逊和微软）对待请求的方式也`curl`与真实浏览器不同。因此，我在请求中添加了一些标头以获得真正的响应。

## 脚本

```
# NOTE: You can copy/paste this whole block straight into a bash shell

apex_domains=(
    paypal.com
    amazon.com
    google.com
    microsoft.com
)
curl_command=`
`"curl -svo /dev/null "`
    `"-H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) "`
        `"AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' "`
    `"-H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif"`
        `",image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' "`
    `"-H 'accept-language: en-US,en;q=0.9' "`
    `"--compressed"

for domain in "${apex_domains[@]}"; do
    for scheme in 'http' 'https'; do
        for subdomain in '' 'www.'; do
            echo -e         "\n""  ${scheme}://${subdomain}${domain}"
            echo "  $curl_command  ${scheme}://${subdomain}${domain}"
            eval   "$curl_command  ${scheme}://${subdomain}${domain}" 2>&1 | \
                tr -d '\r' | grep -i --color=always 'strict-transport-security.*';
        done
    done
done 
```

## 输出

输出在终端上看起来更好，因为 grepped 标头被突出显示。

```
 http://paypal.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://paypal.com

  http://www.paypal.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://www.paypal.com

  https://paypal.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://paypal.com
< strict-transport-security: max-age=31536000; includeSubDomains

  https://www.paypal.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://www.paypal.com
< strict-transport-security: max-age=63072000; includeSubDomains; preload

  http://amazon.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://amazon.com

  http://www.amazon.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://www.amazon.com

  https://amazon.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://amazon.com

  https://www.amazon.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://www.amazon.com
< strict-transport-security: max-age=47474747; includeSubDomains; preload

  http://google.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://google.com

  http://www.google.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://www.google.com

  https://google.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://google.com

  https://www.google.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://www.google.com
< strict-transport-security: max-age=31536000

  http://microsoft.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://microsoft.com

  http://www.microsoft.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  http://www.microsoft.com

  https://microsoft.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://microsoft.com

  https://www.microsoft.com
  curl -svo /dev/null -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.183 Safari/537.36' -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9' -H 'accept-language: en-US,en;q=0.9' --compressed  https://www.microsoft.com
< strict-transport-security: max-age=31536000 
```

# python - 如何从 *.txt 读取文件并将数据内容导入创建图表的 png 文件

> ID：11717791
> 
> 赞同：0
> 
> 时间：2012-07-30T08:28:27.983
> 
> 标签：python, png

我有 *.txt 文件，现在我想获取数据内容并将其绘制在图表中。但是 *.png 必须是新创建的。

我不知道如何创建 png 文件，也不知道如何从 txt 中读取数据内容并将其放入最终图表的 png 文件中。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:55:01.017

你需要这些包`numpy`和`matplotlib`

```
import nunmpy as np
import matplotlib.pyplot as plt

data=np.loadtxt("YourFileName.txt", dtype="YourDataType", delimiter=",")
plt.plot(data)
plt.show()    #if you want to see the plot
plt.savefig("PngFile.png") 
```

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:44:47.123

如果您需要从数据中绘制类似图表的图表，请考虑使用[graphviz](https://en.wikipedia.org/wiki/Graphviz)。

如果您有要转换为 ASCII 艺术图，请`.png`考虑使用[ditaa](http://ditaa.sourceforge.net/)。

如果您想使用一些数据创建任意 png，请考虑使用[PIL](http://www.pythonware.com/products/pil/)。

# python - python守护进程的CPU负载

> ID：11717797
> 
> 赞同：1
> 
> 时间：2012-07-30T08:28:56.107
> 
> 标签：python, daemon

[我使用python-daemon](http://pypi.python.org/pypi/python-daemon/)库编写了一个守护进程。它一直使用大约 20% 的 CPU。我可以以某种方式检查程序的哪个部分使用了所有这些 CPU 时间，因为它实际上只是在等待用户输入？一如既往地感谢您的帮助！

我的守护进程已启动：

蟒蛇文件1：

```
context = daemon.DaemonContext()
context.pidfile = PidFile(pidfile)
with context:
    module.run() 
```

蟒蛇文件2：

```
def run():
    end = threading.Event()
    # Do something here then:
    try:
        while not end.isSet():
        # Do some more stuff

    except KeyboardInterrupt, SystemExit:
        pass
    # Except some more stuff 
```

** 编辑

也许您可以再次帮助我，现在我运行了一个分析器，但无法真正分辨出“坏人”是谁。这是[我的个人资料结果](http://tinypaste.com/eb72245b)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:39:06.440

您可以将 Python 分析器附加到您的软件：

[http://docs.python.org/library/profile.html](http://docs.python.org/library/profile.html)

...并在守护程序启动时启动分析器。然后让探查器收集探查信息一段时间，并使用发送到进程的信号（例如 SIGUSR1）让您的守护程序将探查数据转储到文件中。

[http://docs.python.org/library/signal.html](http://docs.python.org/library/signal.html)

...或当进程在 atexit 处理程序退出时替代写入分析日志。

然后你可以阅读这个文件，看看哪个函数的累积 CPU 使用率最高。

# gps - GPGGA 不显示时间

> ID：11717800
> 
> 赞同：1
> 
> 时间：2012-07-30T08:29:07.443
> 
> 标签：gps, nmea

如所见： [http ://aprs.gids.nl/nmea/#gga](http://aprs.gids.nl/nmea/#gga)

GPGGA 语句的第一部分是 UTC 时间。例如：

```
$GPGGA,123519,4807.038,N,01131.000,E,1,08,0.9,545.4,M,46.9,M,,*47 
```

UTC时间为：12:35:19

我的 GPS 设备输出语句：

```
GPGGA,000019.032,,,,,0,00,,,M,0.0,M,,0000*5F 
```

在我看来，这是一个标准——这些句子有一定的结构。还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:01:20.713

您的 GPS 似乎还没有修复。如果它没有来自卫星的信息，那么它就不知道现在几点了。

您看到的时间可能表明您的 GPS 已开启 19 秒，或者根据自上次接收时间以来一直在运行的内部时钟，它认为它是 00:00:19。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T11:26:20.480

看起来 GPS 与卫星信号不同步，所以它显示的是内部时钟的时间。

@kaushik，你有没有连接天线。如果您已连接，请检查您的 gps 是否有主动接收器或被动接收器。

# iphone - 如何在 iPhone 图像库中获取图像的嵌入式 GPS 和地理位置数据

> ID：11717802
> 
> 赞同：0
> 
> 时间：2012-07-30T08:29:11.150
> 
> 标签：iphone, ios, image, uiimage, metadata

我想在 iPhone 图片库中使用嵌入式 GPS 和图像的地理位置数据。我怎样才能得到拍摄图像的地方的纬度和经度。

先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:42:26.960

不完全确定如何以编程方式完成此操作，但我会研究如何从图像中提取 exif 数据。也许[这个](http://blog.depicus.com/index.php/2011/05/07/getting-exif-data-from-images-on-ios/)或[这个](https://stackoverflow.com/questions/3673062/how-to-access-photo-exif-in-pictures-taken-from-camera-in-ios-4-0)会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:13:16.303

看[这里](https://stackoverflow.com/questions/1238838/uiimagepickercontroller-and-extracting-exif-data-from-existing-photos)，

你可以参考一下。^-^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T21:44:29.677

到达目的地很容易。这是一个显示如何获取地理位置的[示例。](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_map)

如果您有将两者结合起来的脚本，请告诉我。

# android - 如何检查Android默认浏览器是否已打开？

> ID：11717805
> 
> 赞同：1
> 
> 时间：2012-07-30T08:29:32.820
> 
> 标签：android, android-browser

> **可能重复：** [如何检查应用程序是否在 Android 上运行？](https://stackoverflow.com/questions/4212992)

我想知道是否有办法检查 Android 默认浏览器（Android OS 中的浏览器）是否已打开。假设它已打开，我想展示一个祝酒词。如何以编程方式执行此操作？

这是我在扩展 Service 类的类中使用的代码，该类监听日志并检查 Android 默认浏览器是否已打开。如果是，那么它会在[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)中打印一条日志，说明 Android 默认浏览器已打开。

```
try {
    Process mLogcatProc = null;
    BufferedReader reader = null;
    mLogcatProc = Runtime.getRuntime().exec(new String[] { "logcat", "-d" });

    reader = new BufferedReader(new InputStreamReader(mLogcatProc.getInputStream()));

    String line;
    final StringBuilder log = new StringBuilder();
    String separator = System.getProperty("line.separator");

    while ((line = reader.readLine()) != null) {
        log.append(line);
        log.append(separator);
    }
    String w = log.toString();
    Log.d("LogService", "The log is: " + w);

    if (w.contains("Starting activity: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.android.browser/.BrowserActivity }")) {
        Log.d("LogService", "The browser has been opened");
    }

}
catch (Exception e) {
    Log.d("LogService", "The stacktrace is: " + e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:49:49.817

google 在 google IO 上表示，这种行为被视为恶意软件。

但是，在 API 15（包括）之前，您可以使用侦听日志的服务，并检查所需的应用程序是否已启动。那是因为每次运行应用程序时，android 都会将其写入日志。

这被认为是一种解决方法，但很多应用程序都使用它并且效果很好。

不确定在新版本（API 16）上阅读日志是否会那么简单。他们说从日志中读取的权限将不再起作用，并且他们允许应用程序读取自己的日志（无需任何权限）。

当然，如果您尝试监控的应用程序提供了任何类型的 API 来告诉世界（例如通过意图）它已经启动，您可以使用它。不过，我不认为内置的网络浏览器会这样做。

# java - Android寻找多边形的交点？

> ID：11717809
> 
> 赞同：0
> 
> 时间：2012-07-30T08:29:42.203
> 
> 标签：java, android, android-mapview

我目前有一些多边形形状，如下所示，它们正在使用以下代码绘制到我的地图视图上

![在此处输入图像描述](../Images/da29f4df323f3a8472d5669b26ce5de1.png)

```
 CustomPolygon customPolygon= data.getCustomPolygonList().get(i);
            Path path = new Path();
            path.setFillType(Path.FillType.EVEN_ODD);
            for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
            {

                GeoPoint sector1 = new GeoPoint((int)(customPolygon.getCorrdinateList().get(n).getLatitude()*1e6), (int)((customPolygon.getCorrdinateList().get(n).getLongitude())*1e6));
                if(n==0){
                    mapView.getProjection().toPixels(sector1, point1_draw);
                    path.moveTo(point1_draw.x,point1_draw.y);
                }else
                {
                    mapView.getProjection().toPixels(sector1, point1_draw);
                    path.lineTo(point1_draw.x,point1_draw.y);
                }
            }

            path.close();
            canvas.drawPath(path, paint); 
```

现在我正在考虑如何知道 ontap 按钮是否与任何多边形相交。例如，如果它与其中一个多边形相交，则会显示一条消息，显示当前多边形。

我被困在覆盖层的 ontap 部分。

```
 @Override
public boolean onTap(GeoPoint p, MapView ) {

        Point point1_draw = new Point();     
        mapView.getProjection().toPixels(p, point1_draw);

        for (int i =0;i<data.getCustomPolygonList().size();i++)
        {
            CustomPolygon customPolygon= data.getCustomPolygonList().get(i);
            for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
            {
            }

        }

    return  true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:38:24.730

我假设您需要一些代码来检查按钮是否在多边形内？

我现在不能给你代码，但这里有一个粗略的算法：

```
for each line segment in the polygon
  calculate the dot product for the line segment and the line formed by the starting vertex and the point to check
  if all dot products have the same sign, the point is inside the polygon 
```

请注意，要使其正常工作，您需要多边形具有连续缠绕，即所有顶点都是顺时针或逆时针添加的。此外，这种方法可能并不总是适用于凹多边形。因此，您可能希望将凹多边形拆分为一系列凸多边形。

有关更通用（但也更昂贵）的算法，请查看此 wiki 页面：[http ://en.wikipedia.org/wiki/Point_in_polygon](http://en.wikipedia.org/wiki/Point_in_polygon)

另一个信息来源（连同一些代码）：[如何确定 2D 点是否在多边形内？](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:51:04.317

我很惊讶 android.graphics.Path 和 android.graphics.PathMeasure 没有为此提供 API。它应该。

该算法[在此处描述](http://en.wikipedia.org/wiki/Point_in_polygon)。

# .htaccess - .htaccess 重定向循环和正则表达式问题

> ID：11717817
> 
> 赞同：1
> 
> 时间：2012-07-30T08:30:06.387
> 
> 标签：.htaccess

我有一个简单的 htaccess 重定向，可以将访问者从 website.com/promotions 发送到 website.com/go/promotions。如果我使用下面的代码，我会收到重定向循环错误：

```
RewriteEngine on
RewriteCond %{REQUEST_URL} !^go$
RewriteRule promotion/index.html go/promotion/index.html [R,L,NC] 
```

如果请求 url 包含“go”但它似乎不起作用，则 RewriteCond 应该通过不重定向来防止循环。

此外，我正在尝试设置一个正则表达式，以便将promotion/anypage.html 重定向到go/promotion/anypage.html。我尝试了以下代码，但它不匹配任何内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^go$
RewriteRule ^promotion/(.*)$   go/promotion/$1   [R,L,NC] 
```

有没有人知道为什么这些块中的任何一个都不能正常工作？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:35:50.083

`%{REQUEST_URL}`不是您可以匹配的 var，您可能会想到`%{REQUEST_URI}`，但它以斜杠开头，因此`^go`永远不会匹配任何内容。

你只需要一个规则：

```
RewriteEngine On
RewriteRule ^/?promotion/(.*)$ /go/promotion/$1 [R,L] 
```

或者你可以使用 mod_alias：

```
Redirect /promotion/ /go/promotion/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:31:33.197

您正在检查整个 URL 是否只是它自己的“go”，它不是：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/?go/
RewriteRule promotion/index.html go/promotion/index.html [R,L,NC] 
```

# c# - 如何在gridview中隐藏空列

> ID：11717818
> 
> 赞同：0
> 
> 时间：2012-07-30T08:30:08.833
> 
> 标签：c#, asp.net

使用 C# 和 asp.net

如果表中没有数据，gridview 显示一行（它是空的）

我想隐藏 gridview 空行。

这个怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:34:08.393

尝试使用此代码

```
gridview.Visible =  (yourDataTable.Rows.Count > 0) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:11:55.990

您可以使用[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)的以下属性。

**EmptyDataRowStyle** 获取对 TableItemStyle 对象的引用，使您能够设置当 GridView 控件绑定到不包含任何记录的数据源时呈现的空数据行的外观。

**EmptyDataTemplate** 获取或设置当 GridView 控件绑定到不包含任何记录的数据源时呈现的空数据行的用户定义内容。

**EmptyDataText** 获取或设置当 GridView 控件绑定到不包含任何记录的数据源时要在呈现的空数据行中显示的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:38:36.933

你可以使用这个：

```
yourDataGrid.Rows[0].Visible = false; 
```

# c# - Team Foundation Server 工作区消失/丢失

> ID：11717821
> 
> 赞同：4
> 
> 时间：2012-07-30T08:30:15.160
> 
> 标签：c#, visual-studio-2010, tfs

我有几个项目映射到 TFS 中的工作区。我关闭了我的 VS2010 窗口，做了一些其他工作，然后重新打开它，我所有的工作区都消失了。我尝试重新启动，但他们不会回来。在我的 Windows 资源管理器中，我的解决方案映射到的文件夹旁边的绿色小三角形也不见了。

最终，我放弃了自己，以某种方式弄乱了与源代码管理的连接，并试图重新创建我正在使用的工作区。但是，它不会让我创建工作区，因为该名称之一已经存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T08:30:15.160

经过大量的谷歌搜索、重新启动和查看愚蠢的事情后，我注意到 Visual Studio 似乎认为我是作为备用网络帐户登录的（我之前曾使用该帐户来访问我登录到我的 PC 的用户的共享网络驱动器无权访问）

我原以为重新启动 PC 并再次登录会解决这个问题，但结果我点击了“记住我”框。即使从控制面板-> 用户帐户中删除该帐户也无济于事。

最终我遇到了[这个站点，用于删除保存的网络密码](http://www.faqforge.com/windows/how-delete-saved-passwords-for-network-drives-in-windows/)

您只需单击，开始 -> 运行 -> “控制 Keymanager.dll”

这将显示您在网络驱动器上单击“记住我”的所有帐户。您删除了导致问题的那个（或者在我的情况下全部删除），重新启动 VS2010，您的所有工作区和项目绑定都将再次出现！

# c# - EF / Automapper 和 n 层架构

> ID：11717824
> 
> 赞同：1
> 
> 时间：2012-07-30T08:30:17.210
> 
> 标签：c#, entity-framework, architecture, n-layer

我的应用程序的架构结构如下：

**用户界面（客户端）**

用户界面 (XAML)

**虚拟机（客户端）**

所有视图模型的层。该层与来自服务层的 DTO 一起使用。

**服务（服务器端）**

客户端的通信接口。客户端使用此服务层的 DTO。该层执行从 DTO 到 EF-Entities（并返回）的转换。我使用自动映射器进行转换。

**域（服务器端）**

整个业务逻辑分为几个领域。该层与实体框架中的实体一起工作。

**数据访问（服务器端）：**

数据访问层与 EF 一起工作。该层采用存储库/工作单元模式设计。

**我的问题：**创建新记录效果很好。但是如果我想更新记录，EF 不知道更新。它总是想创造一个新的记录。我认为，问题在于 EF 与整个变更跟踪机制的引用一起工作。自动映射器将始终创建新记录。它是否正确？

有没有其他选择？

提前致谢。

亲切的问候，亲

**编辑：我的问题总结：**

EF 在我的 n 层架构中不会更新，它总是想创建一条新记录。

我希望这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:06:55.377

您需要根据实体的特征在业务层中做出决定。如果您的实体有一个 ID，那么它必须已经存在，因此您应该使用

```
context.YourEntities.Attach(entity);
context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified); 
```

但如果没有，那么它是新的，你可以使用

```
context.YourEntities.AddObject(entity); 
```

然后在两条路径之后，

```
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:35:31.027

您需要附加实体：

```
var existingPerson = ctx.Persons.SingleOrDefault(p => p.Name = "Joe Bloggs" };
ctx.Persons.Attach(existingPerson); 
```

查看此答案以获取完整详细信息：[Entity Framework 4 - AddObject vs Attach](https://stackoverflow.com/questions/3920111/entity-framework-4-addobject-vs-attach)

这里是 MSDN 参考：http: [//msdn.microsoft.com/en-us/library/bb896271.aspx](http://msdn.microsoft.com/en-us/library/bb896271.aspx)

有关上下文生命周期的详细信息，请查看此答案：[关于实体框架上下文生命周期的问题](https://stackoverflow.com/questions/10777630/questions-about-entity-framework-context-lifetime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:52:44.093

您需要附加实体，然后将实体状态更改为已修改

# windows - 阻止 WM_DEVICECHANGE 调度

> ID：11717826
> 
> 赞同：2
> 
> 时间：2012-07-30T08:30:18.960
> 
> 标签：windows, delphi, api, delphi-xe2, system32

我正在开发一个 Windows 7 应用程序，它必须防止 WinDVD 在插入时触发新的磁盘可用性（即插入 DVD）。

**背景资料：**

我正在为一家公司开发这个小应用程序，该公司必须同时比较两个电影播放器​​，同时从不同的驱动器播放同一张 DVD。

他们正在进行启发式质量测试，以确定目前最好的 DVD 播放器，以便将其捆绑到他们的新 PC 产品线中。

目前，他们最好的选择似乎是 WinDVD，因此必须针对它进行所有其他测试。问题是，当他们插入第一张 DVD 时，默认播放器 WinDVD 就可以启动了。

然后当他们插入第二张光盘时，默认播放器首先响应，因此他们被迫关闭窗口并打开他们正在测试的另一个播放器。

许多电影都是这样做的，这些电影代表了对专色渲染和图像质量的参考。用户在显示时关闭附加窗口变得乏味，因为此操作每周要重复数百次。

我的程序试图阻止默认玩家的第二次响应

我想拦截一条 WM_DEVICECHANGE 消息以某种方式为其创建一个全局挂钩。

问题是，拦截 WM_DEVICECHANGE 效果很好，但它不会阻止 WinDVD 触发新单元插入的能力，显然还是让消息被传递。因此，我开始考虑如何防止在我拦截后发送该消息。

为了实现我想到的这个全局钩子，我使用了这行代码：

```
CurrentHook:=setwindowshookex(WH_CALLWNDPROC,HookProcAdd,LibHandle,0); 
```

链接到我的 DLL 中包含的回调，我可以看到 WM_DEVICECHANGE 被正确拦截，但正如我所说，消息仍被发送到整个系统。

任何建议表示赞赏。

## 更新：

@TOndrej：我尝试了以下内容：

```
var
  rlen         : DWORD;
  pRelen       : ^DWORD;
  h            : THandle;
  val : Boolean;
  pVal: ^Boolean;
  res : Boolean;
begin
  rlen := 0;
  val := True;
  pVal := @val;
  pRelen := @val;
  h := CreateFile(PChar('\\.\d:'), GENERIC_READ or GENERIC_WRITE, FILE_SHARE_READ or FILE_SHARE_WRITE, nil,
    OPEN_EXISTING, 0, 0);
  if h <> INVALID_HANDLE_VALUE then
  begin
    res:= DeviceIoControl(h,
                          IOCTL_STORAGE_MCN_CONTROL,
                          pVal,
                          SizeOf(val),
                          nil,
                          0,
                          rlen,
                          nil);
    if not res then
    begin

      ShowMessage('Error');
    end;

    CloseHandle(h);
  end;
end; 
```

但 res 每次都是假的。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:33:19.273

对于 IOCTL_STORAGE_MCN_CONTROL 控制代码，必须使用 FILE_READ_ATTRIBUTES 访问权限打开文件：

```
var
  rlen: DWORD;
  pVal: PBOOL;
  res: BOOL;
begin
  rlen := 0;

  GetMem(PVal,SizeOf(BOOL));
  pVal^ := TRUE;

  h := CreateFile(PChar('\\.\D:'),
    FILE_READ_ATTRIBUTES, 
    FILE_SHARE_READ OR FILE_SHARE_WRITE,
    nil, OPEN_EXISTING, 0, 0);

  if h <> INVALID_HANDLE_VALUE then
  begin
    res:= DeviceIoControl(h,
                          IOCTL_STORAGE_MCN_CONTROL,
                          pVal,
                          SizeOf(BOOL),
                          nil,
                          0,
                          rlen,
                          nil);
    if not res then
    begin
      ShowMessage('Error');
    end else
    begin
      ShowMessage('Device Notification Disabled');
    end;

    // close file handle
    CloseHandle(h);
    // After CloseHandle, file notification is restored...
  end;
end; 
```

在我的测试中，在 CloseHandle 之后，设备通知恢复了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:06:49.823

处理此问题的正确、官方和记录的方法是以[可编程的方式抑制 AutoRun](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144204.aspx)。如果你的应用不在前台接收`"QueryCancelAutoPlay"`消息，你的全局钩子应该能够响应消息而不调度它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T00:11:26.660

为什么不通过设置注册表项来禁用 CD 自动运行功能`HKLM\System\CurrentControlSet\Services\CDRom`并将该键设置`Autorun`为`0`而不是`1`？

客户必须单独启动每个应用程序，或者选择“打开方式...”选项，但这应该非常适合基准测试。根据您的描述，他们正在测试运行时性能和播放质量，而不是自动运行能力。

# c# - 使用 linq 将不同的数据绑定到转发器以区分不同的对象

> ID：11717829
> 
> 赞同：1
> 
> 时间：2012-07-30T08:30:28.673
> 
> 标签：c#, linq, distinct

我正在尝试根据 distinct 过滤记录。我使用了以下代码

```
List<BALHotelList> searchresult = (from a in bh
                                           join b in hr on a.HotelCode equals b.hotelCode
                                           orderby a.HotelName
                                           select new BALHotelList
                                               {
                                                   HotelCode = a.HotelCode,
                                                   ImageURL_Text = a.ImageURL_Text,
                                                   HotelName = a.HotelName,
                                                   StarRating = a.StarRating,
                                                   HotelAddress = a.HotelAddress,
                                                   Destination = a.Destination,
                                                   Country = a.Country,
                                                   HotelInfo = a.HotelInfo,
                                                   Latitude = a.Latitude,
                                                   Longitude = a.Longitude,
                                                   HotelArea=a.HotelArea,
                                                   totalPrice = b.totalPrice,
                                                   totalPriceSpecified = b.totalPriceSpecified,
                                                   totalSalePrice = b.totalSalePrice,
                                                   totalSalePriceSpecified = b.totalSalePriceSpecified,
                                                   rooms = b.rooms,
                                                   boardType = b.boardType

                                               }).ToList();

        var uniqueArea =searchresult.Select(m => m.HotelArea).Distinct();

  rptHotelArea.DataSource = uniqueArea;
        rptHotelArea.DataBind(); 
```

但它没有在数据源中找到 HotelArea 。

但是当我调试它时，它会显示我所有不同的值`uniqueArea`

错误如下：

**`DataBinding: 'System.String' does not contain a property with the name 'HotelArea'.`**

**已编辑**

这是中继器 HTML

```
 <asp:Repeater ID="rptHotelArea" runat="server">
        <ItemTemplate>
            <div class="sub-part1">
                <a href="#"><%#Eval("HotelArea")%></a></div>
        </ItemTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:33:50.097

您已`HotelArea`在此处选择：

```
var uniqueArea = searchresult.Select(m => m.HotelArea).Distinct(); 
```

...所以在您的数据绑定中，您应该只选择值本身。

如果您需要数据源中的全部信息，而*不仅仅是*酒店区域，则需要类似`DistinctBy`来自[MoreLINQ](http://morelinq.googlecode.com)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:42:24.963

好的，我已将答案移至此处。

第 1 部分： [ASP.NET 中继器绑定 List<string>](https://stackoverflow.com/questions/5011617/asp-net-repeater-bind-liststring)

第 2 部分：跳过 null 和空字符串：

```
var uniqueArea =searchresult.Select(m => m.HotelArea).Where(m => !string.IsNullOrEmpty(m)).Distinct(); 
```

# c# - DataServiceQueryException 超时

> ID：11717831
> 
> 赞同：1
> 
> 时间：2012-07-30T08:30:33.447
> 
> 标签：c#, wcf-data-services

如您所见，我可以使 Web 服务超时，并且可以捕获异常。但我想捕获查询超时异常（DataServiceQueryException）。这可能吗？什么是财产？我已经搜索并找不到任何解决方案。

```
 try
 {
     rms.Timeout = 1; //to make the timeout
     List = rms.Query.Where(d => d.TimeStamp != null && d.TimeStamp > StartDate && d.TimeStamp <= EndDate).ToList();
 }
 catch (DataServiceQueryException queryExp)
 {
      //I want to catch the query timeout exception
 }
 catch (WebException ex)
 {
     if (ex.Status == System.Net.WebExceptionStatus.Timeout)
     {
        Console.WriteLine("Request Timeout");
        return false;
     } 
```

}

# facebook-like - 如果我在我的粉丝页面、私人简介等中单击“喜欢”按钮和图片分享缩影，则不显示图片缩影

> ID：11717837
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:30:43.110
> 
> 标签：facebook-like

嗨，我的页面中的视图共享和点赞按钮有问题。如果我点击我页面上的喜欢按钮，例如这张图片[http://www.debuton.com/obrazek.php?206](http://www.debuton.com/obrazek.php?206)我有这个窗口[http://scr.hu/8qi/a8n7g](http://scr.hu/8qi/a8n7g)我没有图片缩影当我单击“赞”按钮时，这是我的个人资料的视图。与共享按钮相同，他们不查看图片缩影仅链接：/请帮助我

我会很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:17:10.523

您使用的代码是什么？确保你有`data-show-faces="true"`，这样你就可以看到喜欢该页面的用户的面孔。如果用户的隐私设置很强，那么无论您更改什么设置，您都不会看到图像。

# css - CSS3：在 DIV 上叠加渐变图像

> ID：11717838
> 
> 赞同：0
> 
> 时间：2012-07-30T08:30:48.157
> 
> 标签：css, overlay

我有[这张图片](http://i50.tinypic.com/2m2b9td.png)，我想在任何颜色的 div 上使用它来提供有光泽的外观。我该怎么办？我应该将它用作背景还是将其添加到其他 div 并将其放在前一个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:48:34.117

```
.your_div {
    background: #f39 url(http://i50.tinypic.com/2m2b9td.png) no-repeat left bottom;
} 
```

# jquery - 在调整大小时破坏 jQuery Supersized

> ID：11717840
> 
> 赞同：0
> 
> 时间：2012-07-30T08:30:58.030
> 
> 标签：jquery, resize, supersized

我在响应式网站中使用 Supersized 时遇到问题。如果窗口宽度低于 480px，则应该销毁 Supersized。如果我再次调整它的大小以使窗口宽度大于 480 像素，则应该重新初始化 Supersized。我有这个代码：

```
$(document).ready(function() {
        var newWindowWidth = $(window).width();
        if(newWindowWidth < 480){
            $("#supersized").remove();
        } else {
            $.supersized({
                slides: [{ image: 'images/bg.jpg', title: ''}]
            });
        }
    });
    $(window).resize(function() {
        var newWindowWidth = $(window).width();
        if(newWindowWidth < 480){
            $("#supersized").remove();
        } else {
            /*var loadSupersizedDiv = jQuery('<div id="supersized"></div>').appendTo(document.body);*/
            $.supersized({
                slides: [{ image: 'images/bg.jpg', title: ''}]
            });
        }
    }); 
```

我知道这并不完美，但我现在遇到的问题是，超大的 div 会随着调整大小的每个像素而自我复制。有没有解决的办法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:51:04.513

您必须检查是否已经加载了超大尺寸，如果没有则加载。现在它会在每次调整大小时加载。

```
$(window).resize(function() {
    var newWindowWidth = $(window).width();
    if(newWindowWidth < 480){
        $("#supersized").remove();
    } else if ($("#supersized").length == 0 && newWindowWidth > 480) {
        var loadSupersizedDiv = jQuery('<div id="supersized"></div>').appendTo(document.body);

        $.supersized({
            slides: [{ image: 'kazvan-1.jpg', title: ''}]
        });
    }
}); 
```

好的，对其进行了测试，基本上它所做的只是检查#supersized 是否已经存在，然后不创建新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:52:44.980

您可以尝试使用`$("#supersized").width(x)`or`$("#supersized").css('width', x + 'px')`代替删除和重新创建元素。

# windows - 批处理文件协议解析器

> ID：11717849
> 
> 赞同：0
> 
> 时间：2012-07-30T08:31:41.903
> 
> 标签：windows, windows-7, batch-file

我的自定义协议（phpfile）允许我通过浏览器在编辑器中打开 php 文件。唯一的问题是，它提供了完整的 url，在每个浏览器中都不同，我见过：

*   phpfile:/[文件]
*   phpfile:/[文件]/
*   phpfile://[文件]/
*   phpfile://[文件]

所有这些都需要转换为 [file]。问题是我收到语法错误。什么是正确的语法？

```
set var=%1
if("%var:~0,9%"=="phpfile:/")
{
    set url = %var:~9% 
}
else
{
    set url = %var:~10%
}

if(%var:-1,1% == "/")
{
    url = %url:~0,-1%   
}
START "" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe" url 
```

===编辑===我现在有以下内容，但它在网址末尾添加了“”

```
SETLOCAL enabledelayedexpansion

set var=%1

if %var:~0,9%=="phpfile:/" (
    set url = %var:~9% 
) else (
    set url = %var:~10%
)

if "%var:~-1%"=="\" (
    set url = %url:~0,-1%"
)
if "%var:~-1%"=="/" (
    set url = %url:~0,-1%"
)

START "" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe" %url:"=% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:37:19.673

那是因为您在批处理文件和 C 之间编写了一些可怕的混蛋，但肯定没有在任何地方使用的语言。

尝试以下操作：

```
setlocal enabledelayedexpansion
set "var=%~1"
if "!var:~0,9!=="phpfile:/" (
    set "url=!var:~9!"
) else (
    set "url=!var:~10!"
)

if "!var:-1,1!"=="/" (
    set "url=!url:~0,-1!"
)

START "" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe" "!url!" 
```

延迟扩展主要用于更好地处理一些在批处理文件中引起问题的字符。不过，一般来说，我想知道您会如何期望您的代码能够正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:37:53.940

您的代码中有很多问题，这应该可以解决问题：

```
set var="%1"
if %var:~0,9%=="phpfile:/" (
    set url="%var:~9%"
) else (
   set url="%var:~10%"
)

if "%var:-1,1%"=="/" (
    set url="%url:~0,-1%"
)
START "" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe" url 
```

您可以使用 . 检查批处理文件命令的语法`help <command>`。IF 语句不使用花括号，或者在条件语句周围需要圆括号。

# ruby-on-rails - Bundler Gem 是否考虑了您的 Ruby 环境？

> ID：11717850
> 
> 赞同：4
> 
> 时间：2012-07-30T08:31:44.617
> 
> 标签：ruby-on-rails, ruby, gem, bundler

我的问题很简单，gem bundler 在根据 gem 文件决定采用哪个 gem 之前是否会考虑您的 ruby​​ 环境（例如 1.8.7 | 1.9.2）？

假设您的 gemfile 包含

```
gem 'thor'
gem 'json'
gem 'grit' 
```

当您运行时，`bundle install`将采用与您当前的 ruby​​ 环境兼容的 gem 版本还是只是最新的 gem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:40:52.477

这取决于！Bundler 依赖于每个 Gem 提供的 Gemspecs 的配置。

Gemspecs 提供了基于运行时环境提供不同或附加依赖项的可能性。IE 您可以更改 JRuby 的依赖项或为 i386 架构提供不同的二进制文件。

据我所知，不可能将 gem 声明为 1.9 或 1.8 兼容（这对我来说很有意义）。我认为部分是这样，因为 1.9 是 99% 向下兼容的。

您总是被迫查看宝石本身。正因为如此，有像[http://isitruby19.com/这样的网站](http://isitruby19.com/)

如您所见，这不是 Bundler 的问题，而是 RubyGems 的问题。

# visual-c#-express-2010 - 使用标签的百分比

> ID：11717853
> 
> 赞同：0
> 
> 时间：2012-07-30T08:31:56.510
> 
> 标签：visual-c#-express-2010

使用按钮 + 和 - 百分比从 0% 到 100% 不等。有没有办法在下面的链接（图像）上显示带有标签的百分比。

[图像1](http://desmond.imageshack.us/Himg19/scaled.php?server=19&filename=85320110.jpg&res=landing)

[图2](http://img28.imageshack.us/img28/1087/100eh.jpg)

PS我不会使用进度条，但如果有其他更好的方法请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:25:37.470

制作 + 和 - 按钮以及带有绿色背景的标签。

点击加号或减号调整标签的高度和标签上的文字

```
private void plusButton_Click(object sender, RoutedEventArgs e)
{
    if(percentLength.Height < 100)
        percentLength.Height = percentLength.Height + 10;
}

private void minusButton_Click(object sender, RoutedEventArgs e)
{
    if (percentLength.Height > 0)
        percentLength.Height = percentLength.Height - 10;
}

protected void percentLength_HeightChanged(object sender, EventArgs e)
{
    percentLength.Content = percentLength.Height + "%";
} 
```

# jquery - 在 iframe 父级中访问 div

> ID：11717856
> 
> 赞同：14
> 
> 时间：2012-07-30T08:32:04.620
> 
> 标签：jquery, html, iframe

我有一个包含 iframe 到另一个页面的页面，我正在寻找的是单击 iframe 内的某些内容，然后可以访问或更具体地隐藏父级中的 div。我知道一些 JQuery，但由于某种原因，当我尝试自己编写它时，我只是茫然地坐在代码编辑器前

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-30T08:38:15.133

在 iframe 中试试这个：

```
$('#DIVtobehidden', window.parent.document).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:38:00.067

```
$("#element-In-Iframe").on('click', function() {
    $('#element-in-parent-window', window.parent.document).hide();
}); 
```

[小提琴](http://jsfiddle.net/dSj4s/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:39:30.753

如果两个页面都在同一个（子）域上，您应该能够通过以下方式访问父窗口：

```
window.parent.document.getElementById('divId') 
```

好吧，这没有 jQuery，但应该可以工作

# django - 从 __init__ 初始化 django 字段

> ID：11717857
> 
> 赞同：0
> 
> 时间：2012-07-30T08:32:11.360
> 
> 标签：django, django-forms

我有一个表格：

```
class MatchForm(forms.Form):
    base_field = forms.CharField(widget=forms.Select)

   def __init__(self ,*args, **kwargs):
     BASE_FIELDS = (
                     ('job','JOB'),
                     ('car','CAR'),
     )
     super(MatchForm,self).__init__(*args, **kwargs)
     self.fields['base_field'].choices = BASE_FIELDS 
```

对于我写的这门课，选择中没有任何选项。如何`BASE_FIELDS` 在`base_field`字段中插入。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:56:57.743

```
BASE_FIELDS = (
    ('job','JOB'),
    ('car','CAR'),
)

class MatchForm(forms.Form):
    base_field = forms.ChoiceField(choices=BASE_FIELDS) 
```

# ios - GameCenter成就未完成

> ID：11717858
> 
> 赞同：0
> 
> 时间：2012-07-30T08:32:29.940
> 
> 标签：ios, ios-simulator, device, game-center, achievements

我有一个相当令人不安的问题。当我解锁成就时，我会显示有关它的通知。时触发`achievement.completed == YES`。在模拟器上，这没关系，`achievement.completed`并且`true`通知显示。但是，在任何设备上都是这样，`false`并且不会显示任何通知！我使用相同的代码，没有任何变化，我没有任何`#ifdef`模拟器。

代码：

```
if (achievement.completed) {
    [self showAchievementNotification: [_achievementDescriptions objectForKey:achievement.identifier]];
} 
```

我修改了代码，所以它现在可以工作了：

```
if (achievement.percentComplete >= 100.0f && percentComplete == achievement.percentComplete) {
    [self showAchievementNotification: [_achievementDescriptions objectForKey:achievement.identifier]];
} 
```

这完美地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:11:58.457

我设法想出另一种方法。我编辑了这个问题，最后一个代码片段有答案。

# javascript - 使用 getElementsByClassName 在点击时显示 Div 的 Javascript

> ID：11717859
> 
> 赞同：0
> 
> 时间：2012-07-30T08:32:30.190
> 
> 标签：javascript

我的`<div>`页面中有这样的：

```
 <div class="errordiv" style="display: none;">Username is empty</div> 
```

我有一个输入字段和一个这样的按钮：

```
<input type="textbox" id="txt1" />
<input type="button" value="Submit" id="btn1" onclick="validate();" /> 
```

我试过这个，

```
function validate() {
    //alert('hi');
    var inptextbox = document.getElementById('txt1');
    //alert('level zero');
    var errorMsg = document.getElementsByClassName('errordiv').item();
    //alert('level ground');
    if (inptextbox.value == '') {
        //alert('hi2');
        errorMsg.style.display = 'block';
    } else {
        errorMsg.style.display = 'none';
    }
} 
```

上面的js代码不起作用。我没有收到平地警报。我不知道缺少什么。

PS：我不想要 Jquery，因为我的页面对使用库文件有一些限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:38:07.910

您需要在验证中返回 false 以阻止表单提交，从而重新加载页面

编辑

[从https://gist.github.com/2299607](https://gist.github.com/2299607)添加了 polyfill `getElementsByClassName`以支持 IE7

```
// Add a getElementsByClassName function if the browser doesn't have one
// Limitation: only works with one class name
// Copyright: Eike Send http://eike.se/nd
// License: MIT License
if (!document.getElementsByClassName) {
  document.getElementsByClassName = function(search) {
    var d = document, elements, pattern, i, results = [];
    if (d.querySelectorAll) { // IE8
      return d.querySelectorAll("." + search);
    }
    if (d.evaluate) { // IE6, IE7
      pattern = ".//*[contains(concat(' ', @class, ' '), ' " + search + " ')]";
      elements = d.evaluate(pattern, d, null, 0, null);
      while ((i = elements.iterateNext())) {
        results.push(i);
      }
    } else {
      elements = d.getElementsByTagName("*");
      pattern = new RegExp("(^|\\s)" + search + "(\\s|$)");
      for (i = 0; i < elements.length; i++) {
        if ( pattern.test(elements[i].className) ) {
          results.push(elements[i]);
        }
      }
    }
    return results;
  }
}

function validate() {
    //alert('hi');
    var inptextbox = document.getElementById('txt1');
    //alert('level zero');
    var errorMsg = document.getElementsByClassName('errordiv')[0];
    //alert('level ground');
    if (inptextbox.value == '') {
        //alert('hi2');
        errorMsg.style.display = 'block';
        return false;
    } else {
        errorMsg.style.display = 'none';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:36:25.583

您的代码在 chrome 中运行。这是[演示](http://jsfiddle.net/rzpb5/)。

`document.getElementsByClassName`不适用于某些旧浏览器，请查看[此处](http://caniuse.com/getelementsbyclassname)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:40:01.410

首先，如果发生验证，您需要从函数返回一个值以停止返回页面，将您的 HTML 更改为：

```
<input type="button" value="Submit" id="btn1" onclick="return validate();" /> 
```

然后你的脚本：

```
function validate() {
    var inptextbox = document.getElementById('txt1');
    var errorMsg = document.getElementsByClassName('errordiv').item();

    if (inptextbox.value == '') {
        errorMsg.style.display = 'block';
        return false;
    }

    return true;
} 
```

# seo - ASP.NET Web Api 对 SEO 不利吗？

> ID：11717865
> 
> 赞同：0
> 
> 时间：2012-07-30T08:33:00.533
> 
> 标签：seo, asp.net-web-api

基于 Web API 的网站会遇到 SEO 问题吗？

鉴于页面的所有内容都是由 javascript 提取的……搜索引擎爬虫是否能够获取页面内容？

我听说爬虫在抓取页面时并不总是支持 javascript 或执行 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:23:16.297

对 SEO 不利的不是 Web API，而是选择一种架构，您可以使用 Web 浏览器导航到空的 HTML 页面，然后使用 JS 提取数据。不必以这种方式使用 ASP.NET Web API。你不能责怪锤子建造坏房子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:52:46.830

要看。

是否所有搜索引擎爬虫都能获取页面内容，我不知道。

重要的搜索引擎爬虫是否*会*获取页面内容，是的。

谷歌和必应联合拥有搜索市场，两者都可以索引由 javascript （可能还有其他）引入的内容。

[Robert Scavilla](http://ajax.rswebanalytics.com/seo-for-ajax/#!searchbot_differences_for_indexing_ajax_content)关于如何对内容进行索引。

[搜索引擎登陆](http://searchengineland.com/google-can-now-execute-ajax-javascript-for-indexing-99518)谷歌执行 javascript 进行索引。

# jquery - jQuery Position() 没有准确地跟随可拖动元素

> ID：11717866
> 
> 赞同：1
> 
> 时间：2012-07-30T08:33:02.043
> 
> 标签：jquery, jquery-ui

当拖动 A 时，我希望在元素 A 之后有一个元素 B。我使用 jQueryUI 中的可拖动对象。

我做了这个：http: [//jsfiddle.net/7KhSS/](http://jsfiddle.net/7KhSS/)

它有效，但并不准确。当 B 跟随 A 时，通常水平或垂直有 1px-3px 的间隙。

我不能将元素 B 嵌套在元素 A 内（这将解决当前问题），因为在我的情况下，元素 B 具有固定的定位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:37:35.147

而不是`$(this).position()`在作为事件的第二个参数传入的 ui 对象上使用 offset 属性：

```
$("#boxa").draggable({
    drag: function(e, ui) {
        $("#boxb").css({
            left: ui.offset.left - 100,
            top: ui.offset.top
        });
    }    
});​ 
```

[http://jsfiddle.net/7KhSS/3/](http://jsfiddle.net/7KhSS/3/)

# django - 取消有效订阅时 Amazon FPS 400 无效订阅

> ID：11717868
> 
> 赞同：1
> 
> 时间：2012-07-30T08:33:07.143
> 
> 标签：django, api, amazon-web-services, http-status-code-400, amazon-fps

感谢您花时间看我的问题。

我在 ubuntu 盒子上使用 django。

我为客户开发了“升级帐户”功能。用户点击一个按钮，然后发送一个 api 请求以取消他们当前的订阅并将用户重定向到亚马逊以创建一个新订阅。

它在沙盒中完美运行。

在部署后的前几周，我从取消方法中得到了一些错误：订阅 ID 无效。我检查了报告为无效的订阅 ID，它与客户亚马逊支付界面上的订阅 ID 完全匹配。

有谁知道为什么会发生这种情况？

以下是我收到的错误消息：

```
Error Message:
FPS Response Error: 400 ResponseError
Undefined response error.
Subscription Id xxxxxxxxxx is invalid. 
```

这在生产中从未成功过。

我也在aws论坛上发布了这个问题，没有任何回应。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:54:13.640

以防万一有人提出同样的问题：boto 应用程序使用 fps 沙箱作​​为默认端点。我需要更改它以使其正常工作。

像这样：

```
kwargs = {'host' : simplepay.FPS_HOST}
fps_conn = FPSConnection(simplepay.ACCESS_KEY, 
                simplepay.SECRET_KEY, **kwargs) 
```

其中 FPS_HOST、ACCESS_KEY 和 SECRET_KEY 在我的应用程序的**init** .py 中定义，并由调试是否为真来确定。

# java - 验证错误的BindingResult，业务错误呢？

> ID：11717870
> 
> 赞同：1
> 
> 时间：2012-07-30T08:33:19.063
> 
> 标签：java, spring, spring-mvc

我了解 BindingResult 用于与表单相关的验证错误。但是，业务错误呢，例如：

```
public String bulkUpdate(@ModelAttribute form, BindingResult r) {
//do validation, extract selected issues to be bulk updated, etc.
//any form related, binding errors to be put in r

//this part
List<String> results = service.bulkUpdate(issues, newValues);

//where is it appropriate to put the results?
//from experience we just create a request attribute and put it there
request.setAttribute("bulkUpdateErrors", StringUtils.join(results, "<br>"))

//is there an similar generic structure like Errors?
} 
```

在jsp中：

```
<div id='info'> 
    <c:if test="${not empty bulkUpdateErrors}">
        <spring:message code="bulk.update.warning" /> ${bulkUpdateErrors}
    </c:if>
</div> 
```

是否有类似的通用结构来放置业务错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:48:20.353

您可以按照建议使用分隔对象，也可以将业务错误添加到`Errors/BindingResult`. 就个人而言，我通常将业务错误放在 BindingResult 中，因为以后更容易在 JSP/View 中显示它们。我不知道是否有任何通用结构用于此目的。

使用`r.rejectValue("property", "error.object");`，就足够了。或者，如果您愿意，可以注册全局错误调用`r.reject("error.object");`

# css - 为什么应用背景渐变时边框颜色会反转？

> ID：11717873
> 
> 赞同：9
> 
> 时间：2012-07-30T08:33:29.847
> 
> 标签：css, colors, border, gradient

我偶然发现了一些奇怪的东西。当对元素应用白色虚线边框时，背景渐变的颜色会出现在元素的错误一侧，如下所示：

![错误的边框颜色](../Images/475aa914e5576afd434737cc58028eb3.png)

我在最新版本的 Firefox、Chrome、Opera 和 IE10 中看到了这一点。但是，IE9 具有我的预期效果。

我的CSS目前是：

```
aside.block { 

    width:                  259px;
    padding:                12px;
    margin:                 15px 0;

    border:                 2px dashed #fff;

    background-image:       -o-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
    background-image:       -moz-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
    background-image:       -webkit-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
    background-image:       -ms-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
    background-image:       linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
    filter:                 progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffec00', endColorstr='#dbcb00');

} 
```

左侧和右侧的边框颜色很好，但由于几乎每个浏览器都会发生这种情况，我不得不假设这是我的错误，而不是浏览器错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:05:20.640

您可以通过设置`background-origin`来解决此问题`border-box`。

[http://jsfiddle.net/LVfqe/11/](http://jsfiddle.net/LVfqe/11/)

```
.block{
        width:                  259px;
        padding:                12px;
        background-image:       -o-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
        background-image:       -moz-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
        background-image:       -webkit-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
        background-image:       -ms-linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
        background-image:       linear-gradient(bottom, rgb(219,203,0) 0%, rgb(255,236,0) 100%);
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffec00',endColorstr='#dbcb00');
border:                 2px dashed #fff;
background-origin:border-box;
} 
```

# objective-c - 以编程方式获取 TextEdit 中选定文本的字体名称

> ID：11717878
> 
> 赞同：0
> 
> 时间：2012-07-30T08:33:37.623
> 
> 标签：objective-c, macos, cocoa, delphi-xe2, macos-carbon

在尝试了两个月之后，我发现了如何从 TextEdit（或任何 NSTextView）的任何文本范围中获取 AttributedString。我的代码如下：

```
AXUIElementRef systemWideElement = AXUIElementCreateSystemWide();
AXUIElementRef focussedElement = NULL;
AXError error = AXUIElementCopyAttributeValue(systemWideElement,
    kAXFocusedUIElementAttribute, (CFTypeRef*)&focussedElement);
if (error != kAXErrorSuccess) {
    println("Could not get focussed element");
}
else {
    AXValueRef selectedRangeValue = NULL;
    AXError getSelectedRangeError =
        AXUIElementCopyAttributeValue(focussedElement,
        kAXSelectedTextRangeAttribute, (CFTypeRef*)&selectedRangeValue);
    if (getSelectedRangeError == kAXErrorSuccess) {
        CFRange selectedRange;
        AXValueGetValue(selectedRangeValue, kAXValueCFRangeType,
            &selectedRange);
        AXValueRef attributedString = NULL;
        AXError getAttrStrError =
            AXUIElementCopyParameterizedAttributeValue(focussedElement,
            kAXAttributedStringForRangeParameterizedAttribute, selectedRangeValue,
            (CFTypeRef*)&attributedString);
        CFRelease(selectedRangeValue);

        if (getAttrStrError == kAXErrorSuccess)
        {
            CFAttributedStringRef attrStr = (CFAttributedStringRef)attributedString;

            CFTypeRef value = CFAttributedStringGetAttribute(
                attrStr, 0, kAXFontTextAttribute, NULL);

            println("value: %X", value); // value is not NULL, but I can't obtain font name from it.

            CFRelease(attributedString);
        }
        else
        {
            println("Could not get attributed string for selected range");
        }
    }
    else {
        println("Could not get selected range");
    }
}
if (focussedElement != NULL)
    CFRelease(focussedElement);
CFRelease(systemWideElement); 
```

我正确获得了 CFAttributedStringRef （我可以从中获得长度或纯文本），但我无法获得**字体名称**。

**笔记：**

代码下方返回的值不为 NULL：

```
CFTypeRef value = CFAttributedStringGetAttribute(
                attrStr, 0, kAXFontTextAttribute, NULL); 
```

该值不能假定为 CTFontRef 或 CGFontRef、ATSFontRef、...（导致异常）。

我也尝试使用 kCTFontAttributeName 而不是 kAXFontTextAttribute，但返回 NULL。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:46:49.770

与键关联的值`kAXFontTextAttribute`似乎是`CFDictionaryRef`. 请参阅[AXTextAttributedString 文档](https://developer.apple.com/library/mac/#documentation/Accessibility/Reference/AccessibilityLowlevel/AXTextAttributedString_h/CompositePage.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T12:39:45.793

这可以通过以下方式完成：

定义

```
NSFont *newFont; 
```

提供默认字体，然后当字体管理器打开时，选择您的选择，然后创建一个按钮操作及其出口

接着，

```
NSFont*    oldFont = [NSFont fontWithName:@"Times" size:14];
NSFont*    newFont;
newFont = [sender convertFont:oldFont];
NSLog(@">>>>>>>>>>>: %@", newFont.fontName); 
```

# symfony-forms - 如何将违规添加到集合中？

> ID：11717882
> 
> 赞同：9
> 
> 时间：2012-07-30T08:33:46.957
> 
> 标签：symfony-forms, symfony-2.1

我的表格如下所示：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $factory = $builder->getFormFactory();

    $builder->add('name');

    $builder->add('description');

    $builder->add('manufacturers', null, array(
        'required' => false
    ));

    $builder->add('departments', 'collection', array(
        'type' => new Department
    ));
} 
```

我在表单表示的实体上有一个类验证器，它调用：

```
 if (!$valid) {
        $this->context->addViolationAtSubPath('departments', $constraint->message);
    } 
```

这只会在表单中添加“全局”错误，而不是子路径中的错误。我认为这是因为部门是嵌入另一个 FormType 的集合。

如果我更改`departments`为其他字段之一，它工作正常。

我怎样才能让这个错误出现在正确的位置？我认为如果我的错误发生在集合中的单个实体上并因此以子表单呈现，它会正常工作，但我的标准是，如果集合中的任何实体都没有标记为活动，则会发生违规，因此它需要处于父级。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T16:42:47.883

默认情况下，表单将选项“error_bubbling”设置为`true`，这会导致您刚刚描述的行为。如果您希望它们保留错误，您可以为单个表单关闭此选项。

```
$builder->add('departments', 'collection', array(
    'type' => new Department,
    'error_bubbling' => false,
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-27T04:35:45.543

我在 Symfony 3.3 中一直在努力解决这个问题，我希望验证整个集合，但将错误传递给适当的集合元素/字段。该集合被添加到表单中，因此：

```
 $form->add('grades', CollectionType::class,
            [
                'label'         => 'student.grades.label',
                'allow_add'     => true,
                'allow_delete'  => true,
                'entry_type'    => StudentGradeType::class,
                'attr'          => [
                    'class' => 'gradeList',
                    'help'  => 'student.grades.help',
                ],
                'entry_options'  => [
                    'systemYear' => $form->getConfig()->getOption('systemYear'),
                ],
                'constraints'    => [
                    new Grades(),
                ],
            ]
        ); 
```

StudentGradeType 是：

```
<?php

namespace Busybee\Management\GradeBundle\Form;

use Busybee\Core\CalendarBundle\Entity\Grade;
use Busybee\Core\SecurityBundle\Form\DataTransformer\EntityToStringTransformer;
use Busybee\Core\TemplateBundle\Type\SettingChoiceType;
use Busybee\Management\GradeBundle\Entity\StudentGrade;
use Busybee\People\StudentBundle\Entity\Student;
use Doctrine\Common\Persistence\ObjectManager;
use Doctrine\ORM\EntityRepository;
use Symfony\Bridge\Doctrine\Form\Type\EntityType;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\Extension\Core\Type\HiddenType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolver;

class StudentGradeType extends AbstractType
{
    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * StaffType constructor.
     *
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('status', SettingChoiceType::class,
                [
                    'setting_name' => 'student.enrolment.status',
                    'label'        => 'grades.label.status',
                    'placeholder'  => 'grades.placeholder.status',
                    'attr'         => [
                        'help' => 'grades.help.status',
                    ],
                ]
            )
            ->add('student', HiddenType::class)
            ->add('grade', EntityType::class,
                [
                    'class'         => Grade::class,
                    'choice_label'  => 'gradeYear',
                    'query_builder' => function (EntityRepository $er) {
                        return $er->createQueryBuilder('g')
                            ->orderBy('g.year', 'DESC')
                            ->addOrderBy('g.sequence', 'ASC');
                    },
                    'placeholder'   => 'grades.placeholder.grade',
                    'label'         => 'grades.label.grade',
                    'attr'          => [
                        'help' => 'grades.help.grade',
                    ],
                ]
            );

        $builder->get('student')->addModelTransformer(new EntityToStringTransformer($this->om, Student::class));

    }

    /**
     * {@inheritdoc}
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver
            ->setDefaults(
                [
                    'data_class'         => StudentGrade::class,
                    'translation_domain' => 'BusybeeStudentBundle',
                    'systemYear'         => null,
                    'error_bubbling'     => true,
                ]
            );
    }

    /**
     * {@inheritdoc}
     */
    public function getBlockPrefix()
    {
        return 'grade_by_student';
    }

} 
```

验证器看起来像：

```
namespace Busybee\Management\GradeBundle\Validator\Constraints;

use Busybee\Core\CalendarBundle\Entity\Year;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class GradesValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {

        if (empty($value))
            return;

        $current = 0;
        $year    = [];

        foreach ($value->toArray() as $q=>$grade)
        {
            if (empty($grade->getStudent()) || empty($grade->getGrade()))
            {

                $this->context->buildViolation('student.grades.empty')
                    ->addViolation();

                return $value;
            }

            if ($grade->getStatus() === 'Current')
            {
                $current++;

                if ($current > 1)
                {
                    $this->context->buildViolation('student.grades.current')
                        ->atPath('['.strval($q).']')  // could do a single atPath with a value of "[".strval($q)."].status"
                        ->atPath('status')      //  full path = children['grades'].data[1].status
                        ->addViolation();

                    return $value;

                }
            }

            $gy = $grade->getGradeYear();

            if (! is_null($gy))
            {
                $year[$gy] = empty($year[$gy]) ? 1 : $year[$gy]  + 1 ;

                if ($year[$gy] > 1)
                {
                    $this->context->buildViolation('student.grades.year')
                        ->atPath('['.strval($q).']')
                        ->atPath('grade')
                        ->addViolation();

                    return $value;

                }
            }
        }
    }
} 
```

这会导致根据附加图像将错误添加到集合元素中的字段中。 [![元素/字段错误](../Images/d8a92ddd7d80544360e4cfc3fbd47ada.png)](https://i.stack.imgur.com/2IkVc.jpg)

克雷格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T11:09:54.037

我有一个非常相似的案例。我有一个带有自定义表单的 CollectionType（里面有 DataTransformers，等等......），我需要一一检查元素并标记其中的错误并将其打印在视图上。

我在 ConstraintValidator （我的自定义验证器）上制作了该解决方案：

验证器必须以**CLASS_CONSTRAINT**为目标才能工作，否则 propertyPath 不起作用。

```
public function validate($value, Constraint $constraint) {
    /** @var Form $form */
    $form = $this->context->getRoot();
    $studentsForm = $form->get("students"); //CollectionType's name in the root Type
    $rootPath = $studentsForm->getPropertyPath()->getElement(0);

    /** @var Form $studentForm */
    foreach($studentsForm as $studentForm){
        //Iterate over the items in the collection type
        $studentPath = $studentForm->getPropertyPath()->getElement(0);

        //Get the data typed on the item (in my case, it use an DataTransformer and i can get an User object from the child TextType)
        /** @var User $user */
        $user = $studentForm->getData();

        //Validate your data
        $email = $user->getEmail();
        $user = $userRepository->findByEmailAndCentro($email, $centro);

        if(!$user){
            //If your data is wrong build the violation from the propertyPath getted from the item Type
            $this->context->buildViolation($constraint->message)
                ->atPath($rootPath)
                ->atPath(sprintf("[%s]", $studentPath))
                ->atPath("email") //That last is the name property on the item Type
                ->addViolation();
        }
    }
} 
```

只是我再次验证集合中的表单元素并使用来自集合中错误的项目的 propertyPath 构建违规。

# python - 在 django 中显示“true”复选框输入

> ID：11717883
> 
> 赞同：0
> 
> 时间：2012-07-30T08:33:48.490
> 
> 标签：python, django, forms, checkbox

从我的数据库中获取数据后，我试图在表单中显示一些复选框。我有一些字段可以设置是否公开。该复选框始终“未选中”。

我的课：

```
class PrivacyForm(forms.Form):
    geburtsdatum=forms.CheckboxInput()
    strasse=forms.CheckboxInput()
    plz=forms.CheckboxInput()
    ort=forms.CheckboxInput()
    land=forms.CheckboxInput()
    fon=forms.CheckboxInput() 
```

我的方法：

```
@login_required
def edit_privacy(request,template_name='user/edit_privacy.html'):
    user=Users.objects.get(id_u=request.user.id)
    if request.method=='POST':
        form=PrivacyForm(request.POST)
        if form.is_valid():
        #
            render_to_response('user/public_profil.html',{'profil':user},context_instance=RequestContext(request))
        else:
            msg="make sure all fields are entered and valid"
    else:
    #form
        form=PrivacyForm()
        msg="Select what you want to be public"

    return render_to_response(template_name,{'form':form,'profil':user,'msg':msg},context_instance=RequestContext(request)) 
```

和我的表格：

```
{% extends "home/portal.html" %}

{% block body %}
    <h3>::::: PRIVATSPHÄRE :::::</h3>
{{msg}}
<form id="formSearch" action="/user/privacy/" method="post">
{% csrf_token %}
    {{form.as_p}}
    <input type="submit" value="Speichern" class="button"/>
</form>
{% endblock %} 
```

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:06:39.943

我不确定您如何使用此表单，但这会起作用：

```
class PrivacyForm(forms.Form):
    geburtsdatum=forms.BooleanField()
    strasse=forms.BooleanField()
    plz=forms.BooleanField()
    ort=forms.BooleanField()
    land=forms.BooleanField()
    fon=forms.BooleanField() 
```

然后在视图代码中，可以设置初始值：

```
 form=PrivacyForm(initial={'geburtsdatum': True,
                           'strasse': True,...}) 
```

这会将指定的复选框呈现为选中（如果“真”）或未选中（如果“假”）..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:47:28.223

你可以在这里查看！

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

```
class  PrivacyForm(models.Model):
       pass

form = PrivacyForm(object_provacy_model_item) 
```

# string - 从 Hibernate 查询中获取 SQL 字符串

> ID：11717888
> 
> 赞同：12
> 
> 时间：2012-07-30T08:34:11.260
> 
> 标签：string, hibernate, jakarta-ee

我需要从 Hibernate 查询中获取字符串并稍后处理它（所以我无法用 解决它`"hibernate.show_sql"`）。

我已经看过[How to get SQL from Hibernate Criteria API (*not* for logging)](https://stackoverflow.com/questions/554481/how-to-get-sql-from-hibernate-criteria-api-not-for-logging)但是通过这种解决方法我得到了 SQL 查询字符串，但它没有显示参数值，而是显示'？'......有什么办法可以获取带有参数值的完整 SQL 字符串？

我的意思是，有了那个解决方案，我得到了，`"SELECT * FROM USER WHERE NAME=? AND SURNAME=?"`但我需要得到`"SELECT * FROM USER WHERE NAME='John' AND SURNAME='Doe'"`......

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T12:11:29.270

您必须`TRACE`为此休眠包设置日志记录级别，并且参数绑定应显示在您的应用程序日志中：

```
<category name="org.hibernate.type">
      <priority value="TRACE"/>
</category> 
```

输出示例：

```
13:58:51,505 DEBUG [SQL] 
 insert 
        into
            s.audit
            (action, e_s, ip, time, userid, id) 
        values
            (?, ?, ?, ?, ?, ?)
13:58:51,505 TRACE [StringType] binding 'Modify user' to parameter: 1
13:58:51,505 TRACE [StringType] binding 'E' to parameter: 2
13:58:51,505 TRACE [StringType] binding '164.20.81.65' to parameter: 3
13:58:51,505 TRACE [TimestampType] binding '2012-07-30 13:58:51' to parameter: 4
13:58:51,505 TRACE [IntegerType] binding '158' to parameter: 5
13:58:51,505 TRACE [IntegerType] binding '8851' to parameter: 6 
```

并且不要忘记`'hibernate.show_sql=true'`您之前所说的属性以显示相关的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:42:55.267

没有“带有参数值的完整 SQL 字符串”之类的东西。

Hibernate 使用准备好的语句，因此它将带有`?`s 和参数值的查询字符串分别发送到数据库，因此永远不会构造实际的查询。

也许您可以找到一种从中提取参数值的方法`QueryImpl`，但即使在这种情况下，您也无法准备好执行查询，因为您需要处理转义、将参数值转换为 SQL 文字等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T07:18:54.720

有一个名为[p6spy](https://github.com/p6spy/p6spy)的工具。它有点老了，恐怕它不再维护了。无论如何，它在过去给了我很好的结果。

编辑：刚刚发现它正在再次积极开发中。对我来说就像一个魅力！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T16:45:22.707

JdbcLogger 会这样做。[http://jdbclogger.sourceforge.net/](http://jdbclogger.sourceforge.net/)。支持 mysql、postgres 和 spring 集成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-30T13:49:51.037

另一种选择是使用[数据源代理](https://github.com/ttddyy/datasource-proxy)，它允许监听不同的 JDBC 事件，包括查询执行。

您可以实现[QueryExecutionListener.beforeQuery](http://ttddyy.github.io/datasource-proxy/docs/current/api/net/ttddyy/dsproxy/listener/QueryExecutionListener.html#beforeQuery-net.ttddyy.dsproxy.ExecutionInfo-java.util.List-)接收`QueryInfo`SQL 查询文本和所有参数。

# sql - 通过附加另一个表来改变一个表

> ID：11717889
> 
> 赞同：0
> 
> 时间：2012-07-30T08:34:20.313
> 
> 标签：sql, sql-server, tsql

真是一个关于T-SQL的菜鸟，问题很简单。我有两个具有相同方案的表。我想将一个附加到另一个。我唯一知道的是“工会”，例如

```
select * from table1 
union 
select * from table2 
```

但是，这会生成一个新表并使存储空间增加一倍。我想知道，有没有办法通过附加另一个表来直接更改一个表？就像是

```
insert into table1 values() 
```

真的需要帮助！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:40:16.417

联合不会“创建存储”，因为它会在运行时组合查询。联合可能需要的唯一存储空间是用于进行排序、分组和类似操作的临时空间。

要将选择中的数据插入另一个表，您可以使用以下命令：

```
insert into table1 (col1, col2, col3)
select col1, col2, col3
from table2 
```

但这**会使**存储空间增加一倍，因为 table2 的数据将存储在 table2*和*table1 中，直到您删除/删除 table2 （源）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:55:55.680

你的目标是什么，你想做什么？正如第一条评论所指出的，您可以使用这些表创建一个视图，然后使用该视图启动 SELECT 以获得从两个表合并的结果。但从物理上讲，原始表将保持相互独立。要创建视图，请参阅[CREATE VIEW 定义和语法](http://msdn.microsoft.com/en-us/library/ms187956.aspx)，但基本上您可以运行以下命令：

```
CREATE VIEW table1_table2
AS
SELECT *
  FROM Table1
 UNION ALL
SELECT *
  FROM Table2 
```

然后只需`SELECT * FROM table1_table2`从两个表中获取所有行

另一种选择，也许你正在寻找什么，是从一个表中获取数据，插入另一个表，然后删除第一个表。

```
INSERT INTO Table1
SELECT * FROM Table2

TRUNCATE Table2
DROP Table2

SELECT * FROM Table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:53:00.977

这可以使用 simple 来完成`insert into`，如果您不担心重复记录需要更新或保持原样。

注意：两个表应具有相同的结构和数据类型长度。

逐步查看此示例代码。此示例将 emp_backup 表中的数据插入到 emp 表中。

```
CREATE table emp
(
empid int,
fname varchar(20),
lname varchar(20)
);

INSERT INTO emp VALUES(1,'vish','dalvi');
INSERT INTO emp VALUES(2,'rohit','kale');
INSERT INTO emp VALUES(3,'vishal','gr');

SELECT * FROM emp;

CREATE table emp_backup
(
empid int,
fname varchar(20),
lname varchar(20)
);

INSERT INTO emp_backup VALUES(6,'mark','novak');
INSERT INTO emp_backup VALUES(7,'gar','pandey');

INSERT into emp
SELECT * FROM emp_backup;

SELECT * FROM emp; 
```

# c# - 查询中的数据绑定 oledb 异常缺少运算符

> ID：11717892
> 
> 赞同：1
> 
> 时间：2012-07-30T08:34:35.270
> 
> 标签：c#, data-binding, datagridview, oledbconnection

代码：

```
//this is in private void Form3_Load(object sender, EventArgs e)
{string sql = "select * from doctofact WHERE (([doctofact].[docid]=" + l + " and     [doctofact].[1userid]='"+str6+"'))";
  da = new OleDbDataAdapter(sql, con);
        cmd = new OleDbCommandBuilder(da);
        dt = new DataTable();
        BindingSource dsource = new BindingSource();
        dsource.DataSource = dt;
        da.Fill(dt);
        dataGridView1.DataSource = dt;
          dataGridView1.ReadOnly = true;

        da.Update(dt);
      }

  private void button3_Click(object sender, EventArgs e) // edit button
    {
        dataGridView1.ReadOnly = false;

        MessageBox.Show("Click on the cell you want to edit and change");
     }

      private void button4_Click(object sender, EventArgs e) //save button
    {
        da.Update(dt);
        MessageBox.Show("The changes you made have been saved!");
    } 
```

现在我的 datagridview 显示了我想要的，所以它只是意味着查询'sql'工作正常。仅当我编辑并尝试通过单击保存按钮进行绑定时才会出现问题。我得到的错误是：

```
 oledb exception missing operator in the query Syntax error (missing operator) in query expression '(((? = 1 AND DocID IS NULL) OR (DocID = ?)) AND ((? = 1 AND FactID IS NULL) OR (FactID = ?)) AND ((? = 1 AND ArticleTitle IS NULL) OR (ArticleTitle = ?)) AND ((? = 1 AND FactPreview IS NULL) OR (FactPreview = ?)) AND ((? = 1 AND 1userid IS NULL) OR (1user'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:45:35.603

我会建议你通过这个链接。 [检查此链接](http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-database)

问题是由于数据类型不匹配引起的

# assembly - ASM：代码洞穴终止

> ID：11717895
> 
> 赞同：1
> 
> 时间：2012-07-30T08:34:43.413
> 
> 标签：assembly, x86, direct3d

这实际上是反汇编 Windows 7 D3D9.dll 的 DrawIndexedPrimitive 方法。

```
CPU Disasm
Address   Hex dump          Command                                  Comments
58EBB6B1   .  8BFF          MOV EDI,EDI
58EBB6B3  /.  55            PUSH EBP
58EBB6B4  |.  8BEC          MOV EBP,ESP
58EBB6B6  |.  6A FF         PUSH -1
58EBB6B8  |.  68 28BE0259   PUSH 5902BE28                            ; Entry point
58EBB6BD  |.  64:A1 0000000 MOV EAX,DWORD PTR FS:[0]
58EBB6C3  |.  50            PUSH EAX
58EBB6C4  |.  83EC 20       SUB ESP,20
58EBB6C7  |.  53            PUSH EBX
58EBB6C8  |.  56            PUSH ESI
58EBB6C9  |.  57            PUSH EDI
58EBB6CA  |.  A1 50920359   MOV EAX,DWORD PTR DS:[59039250]
58EBB6CF  |.  33C5          XOR EAX,EBP
58EBB6D1  |.  50            PUSH EAX
58EBB6D2  |.  8D45 F4       LEA EAX,[EBP-0C]
58EBB6D5  |.  64:A3 0000000 MOV DWORD PTR FS:[0],EAX
58EBB6DB  |.  8965 F0       MOV DWORD PTR SS:[EBP-10],ESP
58EBB6DE  |.  8B7D 08       MOV EDI,DWORD PTR SS:[EBP+8]
58EBB6E1  |.  33DB          XOR EBX,EBX
58EBB6E3  |.  3BFB          CMP EDI,EBX
58EBB6E5  |.- 0F84 BA030000 JE 58EBBAA5
58EBB6EB  |.  8D77 04       LEA ESI,[EDI+4]
58EBB6EE  |.  8975 EC       MOV DWORD PTR SS:[EBP-14],ESI
58EBB6F1  |>  8975 D4       MOV DWORD PTR SS:[EBP-2C],ESI
58EBB6F4  |.  895D D8       MOV DWORD PTR SS:[EBP-28],EBX
58EBB6F7  |.  395E 18       CMP DWORD PTR DS:[ESI+18],EBX
58EBB6FA  |.- 0F85 66DE0500 JNE 58F19566
58EBB700  |>  F647 2C 02    TEST BYTE PTR DS:[EDI+2C],02
58EBB704  |.  895D FC       MOV DWORD PTR SS:[EBP-4],EBX
58EBB707  |.- 0F85 65DE0500 JNE 58F19572
58EBB70D  |.  818F 0C2A0000 OR DWORD PTR DS:[EDI+2A0C],40000000
58EBB717  |.  F647 2C 08    TEST BYTE PTR DS:[EDI+2C],08
58EBB71B  |.  C645 FC 01    MOV BYTE PTR SS:[EBP-4],1
58EBB71F  |.- 0F85 54030000 JNE 58EBBA79
58EBB725  |>  8B8F F02C0000 MOV ECX,DWORD PTR DS:[EDI+2CF0]
58EBB72B  |.  8B55 10       MOV EDX,DWORD PTR SS:[EBP+10]
58EBB72E  |.  8DB7 3C2B0000 LEA ESI,[EDI+2B3C]
58EBB734  |.  8951 14       MOV DWORD PTR DS:[ECX+14],EDX
58EBB737  |.  399E 70010000 CMP DWORD PTR DS:[ESI+170],EBX
58EBB73D  |.- 0F85 54DE0500 JNE 58F19597
58EBB743  |>  F787 0C2A0000 TEST DWORD PTR DS:[EDI+2A0C],00000200
58EBB74D  |.- 0F85 AE020000 JNE 58EBBA01
58EBB753  |>  8B4D 20       MOV ECX,DWORD PTR SS:[EBP+20]
58EBB756  |.  8B55 1C       MOV EDX,DWORD PTR SS:[EBP+1C]
58EBB759  |.  8B45 18       MOV EAX,DWORD PTR SS:[EBP+18]
58EBB75C  |.  51            PUSH ECX
58EBB75D  |.  8B4D 14       MOV ECX,DWORD PTR SS:[EBP+14]
58EBB760  |.  52            PUSH EDX
58EBB761  |.  8B55 10       MOV EDX,DWORD PTR SS:[EBP+10]
58EBB764  |.  50            PUSH EAX
58EBB765  |.  8B45 0C       MOV EAX,DWORD PTR SS:[EBP+0C]
58EBB768  |.  51            PUSH ECX
58EBB769  |.  8B8F 0C2D0000 MOV ECX,DWORD PTR DS:[EDI+2D0C]
58EBB76F  |.  52            PUSH EDX
58EBB770  |.  50            PUSH EAX
58EBB771  |.  57            PUSH EDI
58EBB772  |.  FFD1          CALL ECX
58EBB774  |.  8B45 EC       MOV EAX,DWORD PTR SS:[EBP-14]
58EBB777  |.  81A7 0C2A0000 AND DWORD PTR DS:[EDI+2A0C],BFFFFFFF
58EBB781  |.  83C4 1C       ADD ESP,1C
58EBB784  |.  3958 18       CMP DWORD PTR DS:[EAX+18],EBX
58EBB787  |.- 0F85 6ADF0500 JNE 58F196F7
58EBB78D  |>  33C0          XOR EAX,EAX
58EBB78F  |.  8B4D F4       MOV ECX,DWORD PTR SS:[EBP-0C]
58EBB792  |.  64:890D 00000 MOV DWORD PTR FS:[0],ECX
58EBB799  |.  59            POP ECX
58EBB79A  |.  5F            POP EDI
58EBB79B  |.  5E            POP ESI
58EBB79C  |.  5B            POP EBX
58EBB79D  |.  8BE5          MOV ESP,EBP
58EBB79F  |.  5D            POP EBP
58EBB7A0  \.  C2 1C00       RETN 1C 
```

比如说，我用我的跳转代码洞穴替换了 58EBB6DB（3 个字节）和 58EBB6DE（3 个字节）。这将替换 6 个字节的代码（跳转到我的代码洞穴函数地址 5 个字节，并跳过第 6 个字节）。

然后，我将替换后的原始 6 字节代码放回我的代码洞穴函数中。“MOV DWORD PTR SS:[EBP-10],ESP”和“MOV EDI,DWORD PTR SS:[EBP+8]”。然后我的代码洞穴开始做我的工作......

我的代码洞穴中有一个 If-Then-Else。

假设
1) 当结果为真时，我的代码洞穴返回 58EBB6E1 地址。
2）当结果为假时，这个DrawIndexedPrimitive方法将在我的代码洞穴编码处终止。

当我的代码洞穴返回到 58EBB6E1 地址的下一条指令行时，我对第一个没有问题。但是当我终止它时，游戏崩溃了。

这就是我终止该方法的方式。

```
TERMINATE:
        POPAD     // clear the previous PUSHAD
        POPFD     // clear the previous PUSHFD

            // restore what DrawIndexedPrimitive method called...
        POP EDI
        POP ESI
        POP EBX
        MOV ESP,EBP
        POP EBP
        RETN 1C    //CD3DBase::DrawIndexedPrimitive(enum  _D3DPRIMITIVETYPE, int, unsigned int, unsigned int, unsigned int, unsigned int) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:58:15.140

我不太确定你为什么要把你的跳转放到方法中，然后不得不担心将原始方法代码复制到目标代码中，并恢复原始方法已经进行的堆栈更改。也许你能启发我们？

轻松拦截方法调用的方法已经以以下形式存在`mov edi, edi`- 用于热补丁的 2 字节 NOP，允许您用短跳转到长跳转原子地替换它，然后将其放在 5 个空字节中到方法。参见：[热补丁](http://blogs.msdn.com/b/oldnewthing/archive/2011/09/21/10214405.aspx)

明确地 - 如果您查看方法*之前*的字节，应该（至少）有 5`nop`条指令。应按如下方式执行补丁：

1.  在要修补的方法之前的 5 个字节中，将 5 个字节的长跳转写入补丁代码。
2.  将 2 字节的短跳转写入方法开始时在步骤 1 中写入的跳转（替换`mov edi, edi`）。这将只是`0xEB 0xF9`.
3.  根据补丁中的处理，您可以：
    *   `58EBB6B3`通过跳转到（即跳过补丁的短跳转）继续该方法。
    *   通过执行一个跳过该方法`ret 0x1c`

# ios - Actionscript：如何处理具有相同类型但具有不同函数侦听器的事件？

> ID：11717897
> 
> 赞同：0
> 
> 时间：2012-07-30T08:34:43.447
> 
> 标签：ios, events, actionscript, upload

我正在尝试使用 Actionscript (adobe air) 为 ios 制作一个示例应用程序。但是我在事件/事件处理方面遇到了问题。我的应用程序基本上让用户可以选择拍照或从相机胶卷中选择一张上传到服务器。如果用户决定拍照，我必须将该照片保存到设备的相机胶卷中。我遇到问题的代码部分如下：

```
private function readMediaData():void {
    //set up some variables and data

    var file:File = tempDir.resolvePath(filename);
    var stream:FileStream = new FileStream(); 
    stream.open(file, FileMode.WRITE); 
    stream.writeBytes(imageBytes); 
    stream.close();

    file.addEventListener(Event.COMPLETE, uploadComplete, false, 0, true);

    //upload file here
}

private function uploadComplete(event:Event):void {
    //selectedImage is the MediaPromise
    if (selectedImage.file == null) {
         loader = new Loader();
         loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderCompleted);
         loader.loadFilePromise(selectedImage);
    }
}

private function loaderCompleted(event:Event):void {
    //save image
} 
```

上传工作正常，但是一旦上传完成，我会在 loaderCompleted 和 uploadComplete 之间出现一个无限循环，导致多个图像被上传到服务器。一旦文件进入 uploadComplete 函数，我尝试删除文件的侦听器，但仍然得到相同的结果。我的猜测是，一旦注册了加载程序的事件侦听器，它就会触发一个 Event.COMPLETE 通知，这两个方法（或对象）仍然可以识别。有没有办法正确处理具有相同类型但来自不同对象和不同函数侦听器的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:16:45.103

尝试将侦听器设置为流而不是文件：

```
// Changed the 'file' with 'stream'
stream.addEventListener(Event.COMPLETE, uploadComplete, false, 0, true); 
```

# liferay - 将 websphere portlet factory 迁移到 liferay 门户

> ID：11717899
> 
> 赞同：0
> 
> 时间：2012-07-30T08:34:49.280
> 
> 标签：liferay, websphere-portal, jsr286

哎嗨，

我是liferay的新手。我正在尝试将在 websphere 6.1(JSR 286) 中开发的 portlet 迁移到 liferay 6.1。暂时我已经开发了一个显示一些文本的门户（PA_test.war），我将其部署在 liferay 上。

.war 文件被选择为“上传 WAR 文件以安装布局模板、portlet 或主题”。

处理后显示以下消息 - “您的请求已成功完成。” “插件上传成功，正在安装中。”

当我尝试在安装的插件中​​查找门户时，我找不到该门户。我看到了上面写着的日志：

**信息：取消部署上下文 [/PA_test] 2012 年 7 月 30 日上午 7:54:05 org.apache.catalina.startup.HostConfig deployDirectory 信息：部署 Web 应用程序目录 E:\life\liferay-portal-6.1.0-ce-ga1 \tomcat-7.0.23\webapps\PA_test**

我想知道 ：

1) portlet 如何遵守 JSR 规范？

2) 没有哪些主要依赖项（技术方面）是无法迁移 porlet 的？

或者liferay是否提供了替代方案或桥梁来做到这一点

或者liferay中websphere 6.1（JSR 286）的等价物是什么？

请帮忙！！

* * *

**portlet.xml**

```
<?xml version="1.0"?>

<!--AUTOMATICALLY GENERATED DEPLOYMENT DESCRIPTOR - DO NOT EDIT-->
<portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" id="com.bowstreet.portlet.WebAppRunner2_test">
    <portlet>
        <description xml:lang="en">Portlet to test migration from wpf to xmlpf</description>
        <portlet-name>Test Portlet</portlet-name>
        <display-name xml:lang="en">Test Portlet</display-name>
        <portlet-class>com.bowstreet.portlet.adapter.WebAppRunnerPortlet286</portlet-class>
        <init-param>
            <name>model</name>
            <value>test</value>
        </init-param>
        <expiration-cache>0</expiration-cache>
        <supports>
            <mime-type>text/html</mime-type>
            <portlet-mode>view</portlet-mode>
        </supports>
        <supported-locale>en</supported-locale>
        <resource-bundle>nls.test</resource-bundle>
        <portlet-info>
            <title>Test Portlet</title>
            <short-title>Test Portlet</short-title>
            <keywords>Test Portlet</keywords>
        </portlet-info>
        <portlet-preferences></portlet-preferences>
    </portlet>
    <custom-portlet-mode>
        <portlet-mode>config</portlet-mode>
    </custom-portlet-mode>
    <custom-portlet-mode>
        <portlet-mode>edit_defaults</portlet-mode>
    </custom-portlet-mode>
    <user-attribute>
        <description xml:lang="en">User Given Name</description>
        <name>user.name.given</name>
    </user-attribute>
    <user-attribute>
        <description xml:lang="en">User Last Name</description>
        <name>user.name.family</name>
    </user-attribute>
</portlet-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:20:15.193

您正在使用的 portlet 类是：

```
com.bowstreet.portlet.adapter.WebAppRunnerPortlet286 
```

我认为这是问题所在。这是 Websphere 特定的 portlet 类。你能把它改成类似的东西吗

```
com.test.portlet.TestPortlet 
```

然后编写扩展 GenericPortlet 的测试类

```
 public class TestPortlet extends GenericPortlet {
 .........
 ......
 .....
 super.doView();
} 
```

或者你可以通过 Liferay 的 MVCPortlet 类来扩展它。

如果您认为您将使用框架来开发诸如 Struts、Spring、JSF 等的 portlet，您可以通过扩展这些框架提供的相应 portlet 类来创建一个 portlet 类。

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T19:48:02.043

据我所知，Web Experience Factory（以前称为 WebSphere Portlet Factory）portlet，尽管生成了 JSR（168 或 286）portlet WAR，但目前仅在 IBM WebSphere Portal 上获得许可和支持（除了 JSR API，它们还可以利用IBM 门户 API）。

我希望信息有所帮助，..Mike Burati 本网站上的帖子是我自己的，并不一定代表 IBM 的立场、策略或意见。

# .htaccess - 使用 htaccess 重写 get 请求，结果相同 - 不区分大小写

> ID：11717901
> 
> 赞同：0
> 
> 时间：2012-07-30T08:34:57.757
> 
> 标签：.htaccess

我正在使用 htaccess 重写对目录的 get 请求，这些请求是唯一的 URL 令牌，如果我更改大小写，我会出于某种原因获得相同的页面。这是怎么回事？除了标准的重写条件和规则之外还有什么？我的网址必须区分大小写。

我在 Ubuntu 12.04 LTS 上使用 Apache2，我的重写规则是：

```
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteRule ^(.*)$ content.php?query=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:30:26.250

事实证明这不是`.htaccess`问题，而是 MySQL 的问题，我已将所有 url 列设置为 varchar，varchar 不区分大小写，对于区分大小写的项目（如密码和密钥）设置为 blob 很重要。

# ios - 如何自定义 UITableViewCell 的插入和删除控件？

> ID：11717902
> 
> 赞同：1
> 
> 时间：2012-07-30T08:35:03.043
> 
> 标签：ios, uitableview

![截屏](../Images/8be9002e990bfe0fe52cf06da5bfd5dd.png)

如上图所示，我默认为所有单元格启用了这些插入/删除控件。我想知道是否有办法自定义这些控件的图形（更改加号/减号的图像）？使用自定义单元格是唯一的方法吗？我更喜欢更简单的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:20:29.450

事实证明这很简单。我所做的是将单元格编辑样式设置为无，使用自定义图像创建一个按钮并使用 target-action 触发

*   (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:

# c# - 适应参数模式

> ID：11717911
> 
> 赞同：1
> 
> 时间：2012-07-30T08:35:55.627
> 
> 标签：c#, design-patterns, adapter

Adapt Parameter Pattern VS Extract Interface 有什么区别？

根据[这个 ASP.net 博客](http://weblogs.asp.net/gunnarpeipman/archive/2009/03/20/refactoring-adapt-parameter.aspx)：

> 有时您无法使用提取接口重构，因为参数的接口可能太大或根本没有接口。你只需要传递类，你不能伪造它或扩展它来获得类可测试。

我在代码中看到的唯一区别是：提取具有不同名称的传递类的接口并手动创建。

您能否给我一个示例（最终带有源代码）以更详细地突出它们在代码上的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:44:14.500

在[ExtractInterface](http://weblogs.asp.net/gunnarpeipman/archive/2009/02/28/refactoring-extract-interface.aspx)文章中，作者创建*了一个接口*和*一个模拟实现*。

在[Adapt Parameter](http://weblogs.asp.net/gunnarpeipman/archive/2009/03/20/refactoring-adapt-parameter.aspx)文章中，作者创建*了一个接口*、*一个模拟实现*和**一个包装器实现**。原始类被改编/包装，因为由于某种原因无法修改原始类。可以说（如果他们向后阅读文章），首先他调整了参数（通过包装它），然后从包装器中提取接口。

# parallel-processing - 指定 MPI 用户

> ID：11717926
> 
> 赞同：1
> 
> 时间：2012-07-30T08:37:04.677
> 
> 标签：parallel-processing, mpi, intel-mpi

> **可能重复：**
> [将 MPI 主机文件配置为使用多个用户身份](https://stackoverflow.com/questions/6518314/configure-mpi-hostsfile-to-use-multiple-user-identities)

有谁知道可以通过*mpirun*指定必须在与给定主机或 MPI 执行中的主机列表的特定*ssh*连接中使用的用户？我需要在不同的节点中使用不同的用户。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:16:01.727

我找到的解决方案是通过在*~/.ssh/config*文件中定义主机和适当的用户来配置*ssh客户端，如*[本博客](http://mattryall.net/blog/2008/06/ssh-favourite-hosts)所述。*

# android - 开始新的意图

> ID：11717928
> 
> 赞同：0
> 
> 时间：2012-07-30T08:37:16.817
> 
> 标签：android, listview, android-intent

我试图开始单击列表视图中的项目的新意图，但不知道如何使其正常工作。

这是代码：

```
final ListView lv = getListView();
lv.setTextFilterEnabled(true);  
lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")                  
            Intent intent = new Intent(this, Profileviewer.class);  
            startActivity(intent); 
        }
}); 
```

我得到一个编译器错误`new Intent(this, Profileviewer.class);`

```
The constructor Intent(new AdapterView.OnItemClickListener(){}, Class<Profileviewer>) is undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T08:38:50.200

**您应该将活动**的上下文（通过 put ）传递给意图`YourActivity.this`，通过仅传递**this**，您正在传递`AdapterView.OnItemClickListener()`..

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
        @SuppressWarnings("unchecked")                  
        Intent intent = new Intent(YourActivity.this, Profileviewer.class);  
        startActivity(intent); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:44:08.080

我想你忘了在 AndroidManifest.xml 中添加一个新活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:43:46.857

正如您所说，您正在尝试从 ListView 启动 Intent。在您的代码中，这意味着列表视图。这就是错误消息所说的。您需要使用以下任何一种方法来使用您的包名称。

1.  `Intent intent = new Intent({package_name}, Profileviewer.class);`
2.  `Intent intent = new Intent(Profileviewer.this, Profileviewer.class);`

# ruby-on-rails - 我怎么把它变成一个按钮？

> ID：11717932
> 
> 赞同：0
> 
> 时间：2012-07-30T08:37:25.677
> 
> 标签：ruby-on-rails

嘿，我怎么能把它变成rails中的按钮？

```
 <%= link_to "+Add Attachment!", :controller => "assets", :action => "new", :lesson_id => @lesson %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:39:57.360

`<%= button_to "+ Add Attachment", ... %>`

不过，请考虑使用 RESTful 路由系统，而不是指定`:controller => "assets", :action => "new", ...`散列。

你可能会考虑使用 CSS 来让`<a>`你的 from`<%= link_to ... %>`看起来不错，而不是用一个笨拙的按钮来代替它。

*   button_to：[http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)
*   更好的路由：[在此处输入链接描述](http://guides.rubyonrails.org/routing.html)

# silverlight - 如何在silverlight应用程序中关闭鼠标退出弹出窗口

> ID：11717939
> 
> 赞同：0
> 
> 时间：2012-07-30T08:37:50.530
> 
> 标签：silverlight, popup, mouseout

我想在我的 silverlight 应用程序中关闭鼠标移出弹出窗口。我怎样才能做到这一点？

另外，如果可能的话，我的要求是在鼠标移出一些延迟后关闭弹出窗口，这意味着当用户鼠标移出时，经过一些延迟，弹出窗口应该关闭。

谢谢，帕拉克

* * *

我正在尝试处理 popup 的 mouseleave 事件，但我不知道为什么它没有被调用。你能给我一个[Dispatchertimer]的例子吗？

这是 .xaml 代码：

```
<Grid x:Name="LayoutRoot" Background="Transparent">

    <StackPanel HorizontalAlignment="Right" VerticalAlignment="Center"  Orientation="Horizontal">

        <telerik:RadButton  x:Name="rbtnSave" Content="Save" Click="rbtnSave_Click" ToolTipService.ToolTip="Save Changes">

        </telerik:RadButton>

        <Border x:Name="borderSaveChanges" BorderThickness="1,0,0,0" BorderBrush="{StaticResource SCBCxWhite}" Width="2" Height="20"></Border>

        <telerik:RadButton  x:Name="rbtnMenu" Background="{StaticResource SCBCxBlue}" Click="rbtnMenu_Click"
            Content="Menu" ToolTipService.ToolTip="Configurations Settings" >

        </telerik:RadButton>

        <Popup x:Name="PopUpMenu" FlowDirection="LeftToRight" 
           HorizontalAlignment="Left" VerticalAlignment="Center">

            <Grid x:Name="popGrid" Background="{StaticResource PopUpBackgroundImg}" Margin="-70,5,20,20" Height="100" Width="200" HorizontalAlignment="Left" VerticalAlignment="Center" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="15"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <telerik:RadButton x:Name="imgClose" Click="imgClose_Click" HorizontalAlignment="Right"
                                   VerticalAlignment="Top" Grid.Row="1" Margin="0,8,15,5" Style="{StaticResource RadButtonEllipseClose}"/>
                <ListBox Style="{StaticResource WindowControlListBox}" Background="Transparent"  Height="100" Width="200" BorderThickness="0" Grid.Row="2">
                    <ListBoxItem Style="{StaticResource WindowControlListBoxItem}" Content="Configuration"></ListBoxItem>
                    <ListBoxItem Style="{StaticResource WindowControlListBoxItem}" Content="Settings"></ListBoxItem>
                </ListBox>
            </Grid>

        </Popup>

        <Border x:Name="borderMenu" BorderThickness="1,0,0,0" BorderBrush="{StaticResource SCBCxWhite}" Width="2" Height="20"></Border>

        <telerik:RadButton  x:Name="rbtnInformation" Click="rbtnInformation_Click"   Content="Help" ToolTipService.ToolTip="Help">

        </telerik:RadButton>

        <Border x:Name="borderInfo" BorderThickness="1,0,0,0" BorderBrush="{StaticResource SCBCxWhite}" Width="2" Height="20"></Border>
        <telerik:RadButton  x:Name="rbtnMinimize" Click="rbtnMinimize_Click"  Content="Dock" ToolTipService.ToolTip="Minimize">

        </telerik:RadButton>

        <Border x:Name="borderMinimize" BorderThickness="1,0,0,0" BorderBrush="{StaticResource SCBCxWhite}" Width="2" Height="20"></Border>
        <telerik:RadButton  x:Name="rbtnClose" Click="rbtnClose_Click"  Content="Close" ToolTipService.ToolTip="Close" >

        </telerik:RadButton>

    </StackPanel>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:56:51.400

您可以处理[MouseLeave](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleave%28v=vs.95%29.aspx)事件以确定何时发生鼠标移出，然后通过[PopUp.IsOpen](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.isopen.aspx)关闭弹出窗口。您可以通过`DispatcherTimer`.

# objective-c - 在objective-c/cocoa中将整数作为* void传递

> ID：11717951
> 
> 赞同：-1
> 
> 时间：2012-07-30T08:38:45.070
> 
> 标签：objective-c, cocoa, mdns, dns-sd

我正在尝试将 DNSServiceRegister(...) 函数用作 DNS_SD 包的一部分，对于“主机”，它需要一个主机名作为字符串。但是，可以通过 IP 地址注册主机，但 IP 地址必须以二进制表示形式格式化（而不是 192.168.1.23，它将是 0x1701a8c0）。

我假设我可以通过直接传入值 1701a8c0 来欺骗函数，但我尝试过的任何方法似乎都不起作用。strncpy 不返回预期值，只是粘贴它不起作用，创建一个 NSData 然后一个 NSString 不起作用。我可以编写一个循环，一次构建 char 数组 1 个条目，但必须有另一种方法吗？

```
 struct sockaddr_in sa;
 ...
        ipBinary=[[NSData alloc] initWithBytes:&(sa.sin_addr.s_addr) length:8];
    ipBinStr=[[NSString alloc] initWithData:ipBinary encoding:NSUTF8StringEncoding]; 
```

我也无法对此进行任何变体：

```
 strncpy(str,(char *)&(sa.sin_addr.s_addr),8); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:08:16.550

要通过 IP 地址注册主机，您可能必须以 ASCII 字符串表示形式传递地址，例如字符串“192.168.1.23”。您可以使用`inet_ntoa()`或更好地`getnameinfo`使用**NI_NUMERICHOST**标志将 a 转换`struct sockaddr`为字符串。

# objective-c - 大中央调度和并发问题

> ID：11717953
> 
> 赞同：1
> 
> 时间：2012-07-30T08:38:58.633
> 
> 标签：objective-c, ios, uitableview, concurrency, grand-central-dispatch

我有一个表格视图，其中包含正在使用大中央调度延迟加载的图像。我使用了一个异步队列，里面有两个串行队列，第一个用于下载图像，第二个队列用于将图像设置到单元格。这种方法在滚动时似乎有滞后行为。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        __block UIImage *image = nil;
        dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:artist.imImage]]];
        });
        dispatch_sync(dispatch_get_main_queue(), ^{
            cell.artistImage.image = image;

        });

    }); 
```

然后我尝试使用单个异步队列来下载图像，然后将主队列放入内部并设置图像。即使我觉得这种方法不太合适。我想我在这里遗漏了一些东西。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:artist.imImage]]];
        dispatch_async(dispatch_get_main_queue(), ^{
            cell.artistImage.image = image;
        });

    }); 
```

是我在这里遗漏了什么还是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:46:34.487

UIKit 不是线程安全的，因此您应该将所有 UIKit 操作排队到主队列。目前尚不清楚使用第二种解决方案会遇到什么样的问题：

```
 UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:artist.imImage]]];
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.artistImage.image = image;
    }); 
```

但我建议在主线程中实例化 UIImage：

```
 NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:artist.imImage]];
    dispatch_async(dispatch_get_main_queue(), ^{
        UIImage *image = [UIImage imageWithData:data];
        cell.artistImage.image = image;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:30:01.490

您拥有的第二个解决方案是要走的路——创建比必要更多的任务是没有意义的（“必要”的价值取决于您当然想要做的事情）。

但是，您可能会看到一个问题：

1.  单元格出现
2.  您在 GCD 任务中请求图像
3.  用户向上滚动
4.  细胞被重复使用
5.  您在 GCD 任务中请求新图像
6.  原始请求（来自第 2 步）完成并使用“旧”图像更新单元格

在使用图像更新之前，您需要检查单元格是否仍然是“最新的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:42:45.537

我这样做了，但我在我的实现中使用了`NSOperation`和。`NSOperationQueue`当单元格离开屏幕时，它不再需要图像，因此它取消了异步下载+展开`NSOperation`。队列的最大值非常低（也限制了内存需求）。调整后非常流畅（并且在服务器上的图像尺寸正确之后）。

如果不消耗大量空间，还可以考虑缓存您可以缓存的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:14:17.080

您的第二个代码段是要走的路。我相信斯蒂芬达林顿给了你问题的原因，我想提出一种不同的方式来构建你的代码（因为它是我这样做的方式并且它现在工作得很好）。

因此，当一个单元需要图像时，它会向某个数据管理器请求它。如果图像在那里，它会被返回。如果它不存在，则启动获取操作。当图像到达并被创建时，您不应该尝试设置单元格，而是在图像保存在缓存中时在主线程上发布通知（NSDictionary 是保存它们的一种方法，以 URL 或名称作为键） .

控制您的 tableView 的对象会侦听通知。当一个到达时，它会查看所有可见的单元格，如果一个图像丢失并且它刚刚到达，则图像会得到更新。否则它什么也不做。

当表格滚动时，tableView 要求一个新的单元格，您总是会看到图像是否在缓存中，如果是，则使用它。否则，您将请求图像。

为避免对图像的多次请求（网络获取），当您创建一个图像时，您需要注意这一事实。一种方法是在开始获取时将 imageName 或 URL 放入 NSMutableSet，并在获取图像时将其删除。

这比您正在做的工作要多一些，但结果是一个非常流畅且响应迅速的 GUI。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T14:56:51.747

不幸的是，您不应该使用 Grand Central 以这种方式更新 UI。大中央调度阻塞了主线程的消息队列，即使它不应该这样做。

试试这个来证明我的观点，拿你的异步代码，而不是使用 dispatch_async，做一个简单的消息调度，比如

```
[self performSelector:@selector(blabla:) withObject:nil afterDelay:0] 
```

您会发现您的代码运行良好，但 GCD 实际上是在停止向 GUI 发送消息循环。

如果在后台进程上使用 GCD 会发生这种情况，有时它有时会起作用。

大多数情况下，当您已经在 GUI 线程中时（如用户按下按钮操作），GCD 将严重延迟 GUI 更新直到完成。

学习运行循环在 iOS 中是如何工作的，比把所有东西都扔给 GCD 更有效率。

投它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T22:39:51.867

我怀疑您看到的性能问题是因为您产生了不必要的网络活动。

我会使用字典来缓存图像。而不是在单元格出队时加载图像，我会做 on `viewDidLoad`（或每当你的数据模型初始化时），并且 on `scrollViewDidEndDecelerating:`。否则，您会为用户刚刚滚动过去的所有单元格排队图像请求。

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [self initializeData];
    self.images = [NSMutableDictionary dictionary];
    [self loadVisibleImages];
}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if (scrollView == self.tableView) {
        [self loadVisibleImages];
    }
}

-(void)loadVisibleImages {
    for (ArtistCell *cell in [self.tableview visibleCells]) {
        NSURL *artistURL = [NSURL URLWithString:cell.artist.imImage];
        UIImage *artistImage = [self.images objectForKey:artistURL];
        if (artistImage) {
            cell.artistImage.image = artistImage;
        } else {
            cell.artistImage.image = self.loadingImage;
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:artist.imImage]]];
                [self.images setObject:image forKey:artistURL];
                dispatch_sync(dispatch_get_main_queue(), ^{
                    [cell setNeedsLayout];
                });
            });
        }
    }
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ... dequeue the cell, do all your other setup
    NSURL *artistURL = [NSURL URLWithString:cell.artist.imImage];
    UIImage *artistImage = [self.images objectForKey:artistURL];
    if (artistImage) {
        cell.artistImage.image = artistImage;
    } else {
        cell.artistImage.image = self.loadingImage;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T05:48:25.007

我认为你应该做的是使用 SDWebImage 库：[https ://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

它将为您完成所有这些并在本地缓存生成的图像，并负责从缓存中拒绝 LRU 图像......

这真是太棒了。

# android - 即使使用 ActionBarSherlock 导入了支持库，也无法使用 GridLayout

> ID：11717954
> 
> 赞同：3
> 
> 时间：2012-07-30T08:39:02.613
> 
> 标签：android, actionbarsherlock, grid-layout

我有一个使用 ActionBarSherlock 的 Android 项目，我已将它作为一个单独的项目导入到工作区中，该项目还包含 Android 支持库。

我现在想使用 GridLayout 并且我假设，鉴于支持库的存在，它将被识别并可用，但事实并非如此。Eclipse 告诉我需要将项目的最小 API 设置为 14，而我不得不将其设置为 8。有没有办法解决这个问题？

我希望这已经足够清楚了。感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:58:16.447

GridLayout 仅向后移植到 API 7+，可作为 SDK 文件夹中的库项目使用。您可以在`SDK/extras/android/support/v7`.

它不是 ABS 的一部分，也不是 v4 支持库 jar 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:37:39.990

如果不查看项目设置，很难确定您的问题。我能够从头开始创建同时使用`ActionBarSherlock`和`GridLayout`库的新项目。

1.  确保您拥有最新`SDK`的`ActionBarSherlock`、`GridLayout` 和`v4-support`库以及更新的`ADT Eclipse plugin`.
2.  创建新项目并默认保留所有内容，除了：

    ```
    Build SDK = Android 4.1 (API 16)
    Minimum Required SDK = API 8 
    ```

3.  转到项目属性 --> Android 并添加 actionbarsherlock 和 gridlayout 库。

4.  转到`res`文件夹并删除`values-v11`和`values-v13` 子文件夹。

5.  编辑`res\values\styles.xml`：

    ```
    <resources>
        <style name="AppTheme" parent="Theme.Sherlock.Light" />
    </resources> 
    ```

6.  编辑`res\layout\activity_main.xml`：

    ```
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <android.support.v7.widget.GridLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            app:columnCount="2"
            tools:context=".MainActivity" >

            <TextView
                android:padding="@dimen/padding_medium"
                android:text="@string/cell1"
                tools:context=".MainActivity" />

            <TextView
                android:padding="@dimen/padding_medium"
                android:text="@string/cell2"
                tools:context=".MainActivity" />

            <TextView
                android:padding="@dimen/padding_medium"
                android:text="@string/cell3"
                tools:context=".MainActivity" />

            <TextView
                android:padding="@dimen/padding_medium"
                android:text="@string/cell4"
                tools:context=".MainActivity" />
        </android.support.v7.widget.GridLayout>

    </RelativeLayout> 
    ```

7.  创建缺少的字符串资源（cell1，...）

8.  编辑 MainActivity.java：

    ```
    package com.test.gridlayout;

    import android.os.Bundle;

    import com.actionbarsherlock.app.ActionBar;
    import com.actionbarsherlock.app.SherlockFragmentActivity;
    import com.actionbarsherlock.view.Menu;

    public class MainActivity extends SherlockFragmentActivity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            ActionBar ab = getSupportActionBar();
            ab.setDisplayShowTitleEnabled(true);
            ab.setDisplayUseLogoEnabled(false);
            ab.setDisplayHomeAsUpEnabled(false);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getSupportMenuInflater().inflate(R.menu.activity_main, menu);

            return true;
        }
    } 
    ```

9.  那它。

如果您仍有问题，请使用[此](http://dl.dropbox.com/u/434510/GridLayoutTest.zip)演示项目作为起点。

# java - 为什么通常的 Main 类是 Thread？为什么它更快？

> ID：11717959
> 
> 赞同：1
> 
> 时间：2012-07-30T08:39:12.010
> 
> 标签：java, multithreading, main

所以我试图找出一些关于线程的信息，并且到处都说每个进程至少有一个线程。这意味着如果我只有一个主类，它将是一个线程，不是吗？

但是：我认为类通过扩展 Thread 成为一个线程。那么，当我不在 main 中扩展它时，为什么每个进程都有一个 Thread 呢？

拥有多个线程只会使过程更快，如果我使用不同的资源，可以同时使用......就像我读入用户的输入，一个线程可以等待用户输入并按回车，而另一个可以使用最后一个输入等等..对吗？

但是，如果我想计算一堆方程.. 使用多个线程不会更快，因为它们无论如何都不能同时计算（如果我没有多个处理器..）

有人可以帮我清理一下吗？我试图阅读很多关于此的内容，但每个人都只是使用相同的词，这对我的问题没有帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T08:42:29.287

> 但是：我认为类通过扩展 Thread 成为一个线程。

类不是线程。它们是不同的概念。线程执行代码；*如果不*被某个线程或其他线程执行，代码就无法执行。

您使用类创建*新*线程`Thread`（或使用另一个类为您完成），但执行线程与`Thread`类本身是分开的。`Thread`对象只是执行线程的表示。JVM 本身启动线程（包括“主”线程）以执行代码。

听起来你对*线程*的观点以及它们何时有用……虽然现在很少在只有一个处理器的机器上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:47:05.387

回答您的第一个问题：是的，每个进程至少有 1 个线程。在 Java 的情况下，该方法`main (String[] args)`由主线程执行。该线程由 JVM 在您启动程序时创建。

关于您的第二个问题：如果必须执行长计算，则将其分解为较小的部分并在不同的线程上运行每个部分可以（并且将会）提高性能。这仅适用于 CPU 是多核 CPU 的情况。注意：并非所有计算/任务都可以分解成更小的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:43:36.773

> 那么，当我不在 main 中扩展它时，为什么每个进程都有一个 Thread 呢？

执行您的代码的 Java 虚拟机是您的操作系统创建的进程。该进程依次创建线程，其中之一是运行您的主线程（通常称为主线程）的线程。该线程由 JVM 自动创建。

> 使用多个线程不会更快，因为它们无论如何都无法同时计算（如果我没有多个处理器..）

是的，你就在这里。如果一项任务受 CPU 限制（计算某些东西），那么只有在您有多个处理器来运行计算时，使其成为多线程才能提高性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T08:44:01.723

Thread 简单地表示“执行流”。因此，如果您只有一个主要课程；内部语句的正常执行流程是一个线程。如果您想进一步并行化您的程序，您可以添加不同的执行流程，这些流程将并行执行。为此，您需要扩展 Thread、Callable 或 Runnable 的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T15:25:27.590

乔恩的回答很好，但它并没有解决你所有的问题。其他一些答案极具误导性。所以我想我会加上我的2美分。

> ...每个进程至少有一个线程。这意味着如果我只有一个主类，它将是一个线程，不是吗？

对。当 JVM 启动时，有一个调用该`main`方法的用户线程。还有运行垃圾收集器和其他服务的后台线程，但您不必担心它们。

> 但是：我认为类通过扩展 Thread 成为一个线程。

这有点令人困惑。您可以通过*实例*`Thread`化您的`MyThread`类来创建该类的实例`extends Thread`。但这实际上并没有启动一个新线程，直到你调用`start()`它的方法。那是创建一个新的运行线程的方法。

```
// creates an instance of the class
MyThread thread = new MyThread();
// actually starts the new thread running
thread.start(); 
```

仅供参考，建议实施`Runnable`而不是扩展`Thread`：

```
public class MyRunnable implements Runnable {
   public void run() {
      ...
   }
}
...
// this is how you start a thread with your runnable
Thread thread = new Thread(new MyRunnable());
thread.start(); 
```

> 那么，当我不在 main 中扩展它时，为什么每个进程都有一个 Thread 呢？

线程是特殊的`main`和非典型的。JVM 会为您启动它。你根本没有`Thread`在你的主类中扩展。

> 拥有多个线程只会使过程更快，如果我使用不同的资源，可以同时使用......

是的。这是我们编写多线程代码的主要原因之一。在处理 IO（网络、磁盘）时尤其如此。

> 但是，如果我想计算一堆方程.. 使用多个线程不会更快，因为它们无论如何都不能同时计算（如果我没有多个处理器..）

如果您只有一个 CPU 并且*只有*处理器计算，那么您是正确的。通过启动更多线程，您的程序不会变得更快。如果您的一个 CPU 有多个内部 CPU“核心”，那么您当然应该提高速度。

同样重要的是要意识到在大多数情况下，您是从文件中读取输入或将结果写入日志。根据我的经验，很少有工作是真正 100% 的 CPU。

希望这可以帮助。随时在评论中提出问题，我会充实我的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T09:19:22.680

> 对于第二个问题：

首先，多线程并不意味着更快：如果您的代码只能按顺序执行，那么多线程对您来说毫无意义，您的任务不能拆分为多个子任务并且不能并发执行。

其次，对于单处理器，多线程可以增加您的系统吞吐量，使您的任务看起来执行得更快。因为 CPU 总是需要等待比它响应慢得多的资源，例如磁盘 I/0、网络，而 OS(JVM) 可以在 CPU 上调度另一个线程继续执行，而不仅仅是等待（单线程场景）

第三，对于多处理器，显然多线程实际上可以并行执行任务。那肯定更快！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T09:28:22.437

当你的程序加载时，会建立一个新的进程——进程是资源管理的单位；但是，线程是调度的单位，因此每个运行的 Java 程序至少有一个进程来运行您的`Main`.

至于你的第二个问题：多线程并不总能提升程序性能。多线程将引入线程管理的开销。正如您所声称的，您的程序无法在单核 CPU 机器上的计算密集型环境中得到提升。IO 密集型程序也不会：在这种情况下，所有线程都可能被阻塞等待用户输入。多线程更适合的情况是程序同时涉及计算和IO，例如GUI程序，其中计算线程可以在IO阻塞时调度运行，例如程序可以在等待鼠标输入时渲染GUI。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-30T08:56:49.150

> 但是：我认为类通过扩展 Thread 成为一个线程。

确切地说，无论您是否扩展 Thread，JVM 都会为每个程序创建一个线程。但是如果你想要一个多线程的应用程序，你必须扩展 Thread 类。所以，如果你不扩展 Thread，你的程序就只有一个 Thread 运行，但是你的程序要多线程，你需要实现 Thread 类。

> 如果我使用可以同时使用的不同资源，拥有多个线程只会使过程更快。

拥有多个线程可以使程序运行得更快并不是强制性的。我想说“在您的应用程序中正确实现多线程可以提高代码的性能。” 线程不是魔术，它们只是对 CPU 时间的适当利用。

# iphone - 如何裁剪（调整大小）从 iPhone 捕获图像并从相册中选择？

> ID：11717962
> 
> 赞同：1
> 
> 时间：2012-07-30T08:39:19.093
> 
> 标签：iphone, ios, resize, camera, crop

我已经从这个博客[AROVerlayViewController](http://www.musicalgeometry.com/?p=1297)创建了自定义相机覆盖视图，它一切正常，但是我在捕获图像后遇到一个问题，图像在 ImageView 中显示时![第一个自定义相机图像](../Images/ee429a33e12c486253f4e3a06dfcdd01.png) ![在调整大小模式下更改的图像视图](../Images/6dded4513696eb44b81e7897541c5e49.png)会被拉伸，因为您可以看到图像将被拉伸它没有显示原始捕获的图像。以及如何在捕获图像时添加位置。对于图像裁剪，我使用[了这里的代码](https://devforums.apple.com/message/2437#2437)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:45:58.900

因此，它是您正确拍照的相机（即使它是具有自定义叠加视图的相机）。然后要获取高分辨率图像，当您的应用程序点击 UIImagePickerControllerDelegate 方法时，您需要获取实际图像（未编辑）。

具体在这个方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

字典**信息**的值与键**UIImagePickerControllerOriginalImage**是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:53:34.307

我已经通过这个例子解决了我的问题，它非常有用。 [https://github.com/Nyx0uf/NYXImagesKit](https://github.com/Nyx0uf/NYXImagesKit)

# php - 将业务日期存储为 PHP 变量。自动更新

> ID：11717965
> 
> 赞同：0
> 
> 时间：2012-07-30T08:39:36.680
> 
> 标签：php, variables, date

我想创建 5 个变量。它们应该保存`date('Y-m-d')`当前周数中每个工作日的值。

例如（本周）

```
$mon_value = 2012-07-30
$tue_value = 2012-07-31
$wed_value = 2012-08-01
$thu_value = 2012-08-02
$fri_value = 2012-08-03 
```

当周数更改时，这应该会自动更新。

我将如何实现这一目标？我对 PHP 编程相当陌生...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T08:45:44.207

PHP 有一个漂亮的函数叫做 strtotime，可以通过以下方式使用：

```
strtotime('Monday') 
```

将它与 date 函数结合起来，你可以得到每一天的日期：

```
$mon_value = date('Y-m-d', strtotime('Monday'));
$tue_value = date('Y-m-d', strtotime('Tuesday'));
// so forth... 
```

[strtotime 文档](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:46:13.523

这是我用来查找“日历”编号周的第一天和最后一天的代码：

```
//For this week, we are the 2012-07-30
$week_number = date('W', mktime(12, 0, 0 , 07, 30, 2012));
$monday = date('Y-m-d', strtotime($expl[0]."W".$week_number.'1'));
$sunday = date('Y-m-d', strtotime($expl[0]."W".$week_number.'7')); 
```

我让您创建循环并将其插入到 Array 而不是 7 vars 中！

# android - Android，为什么手机浏览器不能播放视频，而电脑浏览器可以播放？

> ID：11717971
> 
> 赞同：0
> 
> 时间：2012-07-30T08:40:06.103
> 
> 标签：android, video, webview, media-player

在我的应用程序中，我需要加载一个网页。此页面包括一个视频播放器。这是我的代码：

```
webView = (WebView) findViewById(R.id.webView);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("http://astroapps.static.appxtream.com/resepi_video.php?mediaId=209375&height=400&width=240"); 
```

我还在清单文件中激活了硬件加速。

```
<activity android:name = ".WebVideoPlayer" android:hardwareAccelerated="true"/> 
```

当我启动应用程序时，屏幕显示背景，而当我单击它时它不播放。当我在计算机浏览器中复制/粘贴上面的链接时，它会显示视频。我的错误是什么？

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:47:05.430

我检查了您代码中的 URL，该页面似乎包含一个 Flash 视频播放器。也许您的手机/模拟器没有或不支持闪存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:49:04.913

这是一个flash视频，需要开启flash插件：mWebView.getSettings().setPluginsEnabled(true);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T08:49:05.993

我很困惑。Hans 和 Rocel 指出，视频似乎需要 Flash 播放器（至少在浏览器中）。但是电影播放器​​源说在 Android 上使用 HTML5。那么它是哪一个？你能得到视频本身，没有所有的包装层吗？

**更多的：**

这是 Movideo 播放器中的错​​误吗？它*说它*更喜欢 Flash 而不是 Android（在这种情况下，上述贡献者关于安装 Flash 的建议是正确的），但阵列似乎落后了。

```
 var AndroidApplicationAliasResolver = function() {

    // ordering is important!
    // has flash, use first available of flash and android
    // has not flash, android

    var search,
        types = [
            { name:'android',   useHTML5:true },
            { name:'flash',     useHTML5:false }
        ];
    ... 
```

**更多的：**

好的，我知道这么多：在浏览器中查看时，有一个`<div>`包含有关视频播放器的数据。然后它被实例化并在下面播放`<script>`。

在 (PC/Mac) 网络浏览器中，这`<div>`包含指定 Flash 视频播放器所需的信息。

在 Android 设备上，这`<div>`只是空的。`<div>`如果封闭的网页不起作用，则视频播放器中的代码应该将正文插入 DOM。

简而言之，这就是您的视频无法播放的原因。

**我是怎么学会这一切的？**

我在 Android 上的 Chrome 网络浏览器中打开了您提供的 URL。然后我按照说明打开[远程调试](https://developers.google.com/chrome/mobile/docs/debugging)并检查了Android版本的HTML，并将其与桌面版本进行了比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:51:30.153

[首先从这里](https://play.google.com/store/apps/details?id=com.adobe.flashplayer)为您的设备安装 Flash 播放器插件： ，然后检查上面的代码。默认情况下，您的移动浏览器使用 google chrome-lite。

# pdf-generation - 在 iText 2.1.7 中获取 Chunk 的绝对边界框？

> ID：11717980
> 
> 赞同：1
> 
> 时间：2012-07-30T08:41:04.447
> 
> 标签：pdf-generation, itext

在这个例子中：

```
Document document=new Document();
PdfWriter.getInstance(document,new FileOutputStream("hello.pdf"));
document.open();  
Paragraph paragraph = new Paragraph();
paragraph.add(new Chunk("Hello ");
paragraph.add(new Chunk("world");
paragraph.add(new Chunk(" in");
paragraph.add(new Chunk(" iText 2.7.1");
document.add(paragraph);
document.close(); 
```

如何获得第二块“世界”页面上的绝对位置、宽度和高度？换句话说，用户空间中的边界框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:23:59.743

您可以使用 Chunks 上提供的通用标签工具。

```
 public class PEvents extends PdfPageEventHelper {
      @Override
      public void onGenericTag(PdfWriter w, Document doc, Rectangle r, String tag) {
         if (tag.equals("mytag")) {             
           //here r is the rectangle of "world" chunk
         }
      }
    }
    writer.setPageEvent(new PEvents());
    Chunk world = new Chunk("world");
    world.setGenericTag("mytag");
    paragraph.add(world);
    . . . 
```

# backbone.js - 通过 Javascript 访问 Cookie 以获取用户信息

> ID：11717986
> 
> 赞同：2
> 
> 时间：2012-07-30T08:42:11.497
> 
> 标签：backbone.js, playframework-1.x, securesocial

我发现了一篇关于使用backbone.js 进行客户端身份验证的好[文章。](http://blog.opperator.com/post/15671431847/backbone-js-sessions-and-authentication)

我需要访问从服务器端生成的 cookie。

这让我想到了如何访问存储一些用户信息的播放 cookie 的问题？我正在使用 Securesocial 框架，该框架也将其信息存储在 cookie 中。

有没有机会这样做或有其他选择吗？我还考虑过调用我的 REST api“/user”，如果用户登录和其他信息，它会发回给我。这些信息被放入主干中的单例中，因此我可以非常轻松地访问这些信息。我不知道这是否是最好的方法，当然每次发送获取用户信息的请求都会有点开销。

背景信息是：我正在使用主干向其他用户发表评论。因此，我需要知道当前登录的是哪个用户，以及他是否有权删除自己的评论。

登录是通过使用典型方法和呈现 html 来处理的。因此，我正在使用 SocialSecure 模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:13:22.423

读取 cookie 值是一个非常简单的过程，但我建议使用一些现成的插件来加快速度。

Cookie 存储为键值对，因此为了访问您想要的值，您需要知道键（也称为 cookie 名称）。

由于您可能已经在使用 jQuery 作为 Backbone 的库之一，一个不错的选择是以下库：[https ://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

它非常轻巧，完全可以满足您的需求。只需在包含 jQuery 库后包含该库，之后，访问 cookie 值就像以下一样简单：

```
var myCookieValue = $.cookie('cookie_name_here'); 
```

在此之后，只需解释存储在该值中的数据即可。

# django - django-cities 数据导入不起作用

> ID：11717988
> 
> 赞同：2
> 
> 时间：2012-07-30T08:42:15.043
> 
> 标签：django, geodjango

我安装了 django-cities 插件并在我的 settings.py 中设置了以下参数：

```
CITIES_FILES = {
        'city': {
            'filename': 'DE.zip',
            'urls':     ['http://download.geonames.org/export/dump/'+'{filename}']
        },
    }

CITIES_LOCALES = ['de', 'und', 'LANGUAGES']

CITIES_POSTAL_CODES = ['DE']

CITIES_PLUGINS = [
    'cities.plugin.postal_code_ca.Plugin',
] 
```

我还将我的 db-engine 更改为：`'ENGINE': 'django.contrib.gis.db.backends.mysql'`. 但是，在运行`manage.py cities --import=all`为城市数据创建的 db 表后，未填充数据，它们都是空的，尽管命令完成报告成功。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:56:19.243

它最终通过将 --force 标志添加到导入命令来工作：

```
manage.py cities --force --import=all 
```

# facebook - Facebook Like Button Plugin 发布到 og.likes 而不是 url_like

> ID：11717992
> 
> 赞同：0
> 
> 时间：2012-07-30T08:42:36.490
> 
> 标签：facebook, facebook-like, facebook-opengraph

背景：我已经使用 XFBML 在我的页面上实现了一个普通的 Facebook Like 按钮。这是按钮。

```
<div class="fb-like" data-send="false" data-width="450" data-show-faces="false"></div> 
```

我省略了 src，因为页面是动态的，并且在页面加载时我使用 jquery 绑定了 src。

```
$(".fb-like").attr("data-href", document.URL); 
```

我为按钮订阅了一个事件以进行一些数据处理。

```
FB.Event.subscribe('edge.create',
    function (response) {
        console.log("like: " + response);
        LikeUrl(response);
        console.log('like: ' + location.href);
    }); 
```

问题：我点击了喜欢按钮，例如这个网址：[http](http://www.google.com/) ://www.google.com/ 。通常当我执行以下 FQL

```
https://graph.facebook.com/fql?access_token=access_token&q=SELECT url FROM url_like where user_id=me() 
```

它会回来

```
{
   "data": [
      {
        "url": "http://www.google.com/"
      }
    ]
} 
```

相反，它返回空数据

```
{
  "data": [
  ]
} 
```

所以我检查了

```
https://graph.facebook.com/me/og.likes 
```

它在那里被发现。

这是我关于stackoverflow的第一个问题。如果信息不充分，请指出。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:55:18.117

这可能与[最近宣布](https://developers.facebook.com/blog/post/2012/07/25/platform-updates--operation-developer-love/)的 Like Button 迁移有关。[您可以在 Facebook 上](https://developers.facebook.com/docs/reference/plugins/like/migration/)阅读有关“赞”页面迁移的更多信息。我认为这基本上是 FB 在 Open Graph 上将 Pages 与 Likes 分开。

# c++ - 图形 Magick C++ API PNG 输出

> ID：11717996
> 
> 赞同：2
> 
> 时间：2012-07-30T08:42:54.677
> 
> 标签：c++, graphics, graphicsmagick

我正在尝试编写一个简单的实用程序，它通过提供的图像文件列表运行，打开它们并检查图像是 24 位还是 32 位。如果他们不是，那么他们就会被转换并被保存下来。

我已经尝试在 ImageMagick 和 Graphics Magick 下进行轻微改动 - 下面的代码在 Graphics Magick 下。我抓住了从这个[问题中保存的参数](https://stackoverflow.com/questions/7728550/imagemagick-c-api-output-16-bit-grayscale-png)

顺便说一句，我正在使用 Graphics / Image Magick，因为在我的实用程序的其他部分，我需要拆分 PSD 文件，据我所知，Image / Graphics Magick 是唯一可以正确读取/写入带有图层的 PSD 文件的图形 API。（层位很重要）

但我似乎没有运气。任何想法可能是错误的。有人成功做到这一点吗？有更适合的 API 吗？

我正在为每个构建最新的库。

干杯，

马丁

```
void
fileProcess( const std::string& pFileName )
{
    Magick::Image img;
    img.read( pFileName );

    if( img.type() != Magick::TrueColorMatteType && 
        img.type() != Magick::TrueColorType )
    {
        Magick::ImageType type = img.type();
        std::cout << "Wrong image type - " << pFileName << "\n";

        img.type(Magick::TrueColorMatteType);
        img.magick( "png" );
        img.defineSet("png:color-type", "6");
        img.defineSet("png:bit-depth", "8");
        img.defineSet("png:format", "png32");
        img.write( pFileName );
    }
}

int 
main(int argc, CHAR* argv[])
{
    Magick::InitializeMagick( *argv );

    std::ifstream fileList( ( "fileList.txt" ) );

    if( !fileList.fail() )
    {
        while( !fileList.eof() )
        {
            std::string imageFileName;
            fileList >> imageFileName;
            if( !imageFileName.empty() )
            {
                fileProcess( imageFileName );
            }
        }
    }
} 
```

# android - 无法注销 phonestatelistener

> ID：11717999
> 
> 赞同：2
> 
> 时间：2012-07-30T08:42:58.177
> 
> 标签：android, android-intent

我正在尝试将以下内容集成到我的代码中以取消注册 phonestatelistener

```
TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE); 
if(mgr != null) {
    mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE); 
} 
```

我有一项在后台运行的服务，并检查某个号码是否在阻止列表中。如果是，那么它会调用`PhonestateListener`

```
TelephonyManager mTM = (TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
mTM.listen(new phoneStateListener(NumberInbound,Msg_to_display,mTM), PhoneStateListener.LISTEN_CALL_STATE); 
```

但是当我从阻止列表中删除一个号码时，我想取消注册`phonestatelistner`。相反，`phonestatelistener`它总是被注册，而我之前删除的 msisdn 仍然被阻止！

你能帮我吗 ？

代码`phonestatelistner`

```
class phoneStateListener extends PhoneStateListener {

    String inbounda;
    int MessagetoDisplay;
    String msg;
    String reply;
    TelephonyManager myt;
    MyService calltoService;
    boolean mBound = false;
    private static final String TAG = "PHONELISTENER";

    phoneStateListener(String inbound,int Message,TelephonyManager t) {
        inbounda = inbound;
        MessagetoDisplay = Message;
        myt = t;
    }

    public void onCallStateChanged(int state, String incomingNumber) {

        if(!incomingNumber.equals(inbounda)){

        } else { 

            final String TAG = "Phone call"; 
            ITelephony telephonyService;
        //new code
            Log.v("Phone State", "state:"+state);

            switch (state) {
                case TelephonyManager.CALL_STATE_IDLE:
                   Log.v("Phone State", "incomingNumber:"+incomingNumber+" ended");
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.v("Phone State", "incomingNumber:"+incomingNumber+" picked up");
                    break;
                case TelephonyManager.CALL_STATE_RINGING:
                    if(inbounda.equalsIgnoreCase(incomingNumber)){
                        Log.v("ARE THE SAME...............................", "incomingNumber:"+incomingNumber+ "inbound:"+ inbounda + "MSG TO DISPLAY" +msg);

                        try{
                            Class c = Class.forName(myt.getClass().getName());   
                            Method m = c.getDeclaredMethod("getITelephony");   
                            m.setAccessible(true);   
                            telephonyService = (ITelephony) m.invoke(myt);   
                            telephonyService.silenceRinger();   
                            telephonyService.endCall();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try{
                            Thread.currentThread().sleep(4000);
                            replyChecker(MessagetoDisplay);
                        } catch(InterruptedException ie){

                        }
                    }
                    break;
                default:
                    break;
            }
        }
    }

    public String replyChecker(int Check) {
        SmsManager mySMS = SmsManager.getDefault();
        String destination = inbounda;     
        //open - to be extended to allow user to define own tailored message 
        String Meeting = "Sorry I am at a meeting. Graham  ";
        String Gym = "I am currently at the gym and will respond to you later. Graham ";
        String NewYearsEve = "Happy New Year to you and your loved ones. Graham ";

        if(Check == 1) {
            Log.v("HERE NOW1",":");
            reply  = Meeting;

            mySMS.sendTextMessage(destination, null, Meeting, null, null);
            return reply;
        } else if (Check == 2) {
            Log.v("HERE NOW2",":");
            reply = Gym;
            mySMS.sendTextMessage(destination, null, Gym, null, null);
            return reply;
        } else if (Check == 3) {
            Log.v("HERE NOW3",":");
            reply = NewYearsEve;
            mySMS.sendTextMessage(destination, null, NewYearsEve, null, null);
            return reply;
        }
        // TODO Auto-generated method stub
        return reply;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:18:15.850

> 我的应用程序中有多个活动，我需要一种方法来保持状态，以防手机进入待机状态并在活动之间进行导航。

当用户使用您的应用程序时，手机不会进入待机状态，并且绝对不会在活动之间，假设任何与正常应用程序流程类似的东西。设备只会在不活动后进入睡眠状态，当用户点击某物以从一个活动移动到下一个活动时，不活动计时器会重置。

如果您希望在屏幕上显示某些活动时保持设备唤醒，请使用`android:keepScreenOn`或[`setKeepScreenOn()`](http://developer.android.com/reference/android/view/View.html#setKeepScreenOn%28boolean%29)在某些活动上`View`，这样您就不必弄乱自己的`WakeLock`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:13:42.870

实际上，我通过在服务中实现广播接收器解决了这个问题。我面临的问题与 PowerManager 无关，而是该服务没有监听来电。

监听 android.intent.action.PHONE_STATE 的广播接收器完成了这项工作

谢谢格雷厄姆