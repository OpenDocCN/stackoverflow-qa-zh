# StackOverflow 问答 10823000-10823999

# android - Achartengine - 饼图在对话框中消失

> ID：10823000
> 
> 赞同：0
> 
> 时间：2012-05-30T19:31:15.290
> 
> 标签：android, achartengine

我有一个带按钮的布局。当我按下按钮时，会出现一个带有饼图的自定义对话框。为简单起见，我使用静态值。我按下后退按钮取消对话框，然后再次按下按钮以显示带有饼图的对话框，但图表不见了，我只有一个空白对话框。可能是什么原因？

顺便说一句，我在该布局中有另一个按钮来显示另一个图表。无论我首先显示哪个图表，之后都不会出现另一个图表。

我必须重新加载活动（布局）才能再次显示图表（一次，然后再次消失）。

如果这很重要，我正在使用 tabactivity。

```
btnnumpie = (Button)findViewById(R.id.btnnumpie);
        btnnumpie.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {
                    dialog_num = new Dialog(Summary.this);
                    dialog_num.setContentView(R.layout.dialog_pie_numdur);
                    dialog_num.setTitle("Pie Chart");
                    dialog_num.setCancelable(true);

                    CategorySeries series = new CategorySeries("Number of calls");
                    series.add("Incoming (" + 20  + "%)" , 20);
                    series.add("Outgoing (" + 50  + "%)" , 50);
                    series.add("Missed (" +20  + "%)" , 20);

                    int[] colors = new int [] {Color.rgb(33, 115, 6), Color.rgb(27, 82, 171), Color.rgb(206, 13, 13)};

                    DefaultRenderer renderer = new DefaultRenderer();
                    for (int color: colors){
                        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
                        r.setColor(color);
                        renderer.addSeriesRenderer(r);
                    }   
                    renderer.setFitLegend(true);
                    renderer.setLabelsColor(Color.BLACK);
                    renderer.setLabelsTextSize(16);

                  renderer.setShowLegend(false);

                    if (mChartView == null) {
                            LinearLayout graphpie = (LinearLayout)dialog_num.findViewById(R.id.graphpie);
                                mChartView = ChartFactory.getPieChartView(Summary.this, series, renderer);
                                graphpie.addView(mChartView, new LayoutParams
                            (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

                              } else {
                                mChartView.repaint();
                              }

                    dialog_num.show();
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:37:20.767

我换了这个

```
 if (mChartView == null) {
                            LinearLayout graphpie = (LinearLayout)dialog_num.findViewById(R.id.graphpie);
                                mChartView = ChartFactory.getPieChartView(Summary.this, series, renderer);
                                graphpie.addView(mChartView, new LayoutParams
                            (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

                              } else {
                                mChartView.repaint();
                              } 
```

对此：

```
LinearLayout graphpie = (LinearLayout)dialog_dur.findViewById(R.id.graphpie);
                    mChartView = ChartFactory.getPieChartView(CallStatsSummary.this, series, renderer);
                    graphpie.addView(mChartView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

# mingw - 我的 MinGW 安装中缺少 stdio.h

> ID：10823002
> 
> 赞同：0
> 
> 时间：2012-05-30T19:31:40.330
> 
> 标签：mingw

我已经使用网站上的 MinGW 安装程序安装了它，安装了 gcc 的软件包，但不知何故我仍然缺少**stdio.h**。

我不知道如何列出我所有已安装的软件包。但我已经安装了**gcc**、**mingwrt**、**w32api**等。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:56:20.527

问题是一个损坏的 mingwrt-dev 包，它是从我不记得的某个镜像下载的。如果包损坏，mingw-get 不会抱怨，甚至会打印安装成功。

从另一个镜像下载并重新安装解决了这个问题。

# jquery - jQuery 聚焦问题

> ID：10823005
> 
> 赞同：0
> 
> 时间：2012-05-30T19:31:50.743
> 
> 标签：jquery, spotlight-plugin

我试图在我的网站上插入一个 jquery Spotlight 片段（由 Dev7Studios 提供）。我必须解决以下情况：

我将鼠标悬停在“Div A”上，“Div B”被突出显示。我必须使用 jQuery 无冲突模式。到目前为止，我使用的脚本是：

```
jQuery.noConflict();
jQuery(window).load(function() {

    jQuery('#A, #B').bind('mouseover', function(){
        jQuery(this).spotlight({exitEvent:'mouseover', speed:600});

    });

}); 
```

使用以下脚本，当鼠标悬停时，每个 div 都会突出显示，但是，我需要使其成为当鼠标悬停“Div A”时，“Div B”被突出显示的方式。这将是理想的解决方案。

可能的解决方案也可以是，当鼠标悬停在“Div A”上时，“Div B”与 Div A 一起突出显示。

此时，使用我拥有的脚本，只有那个 Div 被突出显示，无论哪个有鼠标悬停在它上面。

请问有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:37:22.973

只需在鼠标悬停在#a 上之后调用#b 上的jQuery 选择器...如下所示。

```
jQuery('#A').bind('mouseover', function(){
  jQuery('#B').spotlight({exitEvent: 'mouseover', speed:600});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:38:21.630

根据 OP 评论更新：

您可以创建一个哪些元素影响其他元素的地图。也许 A 影响 Z，B 影响 A 等。这是由您定义的。然后您只需遍历地图的值

演示：http: [//jsfiddle.net/lucuma/4RFWQ/1/](http://jsfiddle.net/lucuma/4RFWQ/1/)

```
 var map = { 
"#A" : "#B",
"#B" : "#A",
"#Z" : "#A"
}; 

jQuery.each(map, function(key, value) { 
  var val = value;
  jQuery(key).on('mouseover', function() {
      jQuery(val).spotlight({exitEvent:'mouseover',      speed:600});
  });

});​ 
```

您还可以遍历数组并绑定

原来的：

我认为你应该做这样的事情来概括它：

```
<div id="a" data-coord="b"></div><div id="b" data-coord="a"></div><div id="z" data-coord="b"></div>

jQuery.noConflict();
jQuery(window).load(function() {

jQuery('#A, #B').bind('mouseover', function(){
    jQuery('#' + jQuery(this).attr('data-coord')).spotlight({exitEvent:'mouseover', speed:600});

});

}); 
```

# python - 如何在 Django 中优化这个 order_by 查询？

> ID：10823008
> 
> 赞同：0
> 
> 时间：2012-05-30T19:31:53.543
> 
> 标签：python, sql, django

我有以下型号：

```
class Movie(models.Model):
    item = models.OneToOneField(Item, primary_key=True)

class Item(models.Model):
    ...

class Popularity(models.Model):
    item = models.OneToOneField(Item, primary_key=True)
    today = models.IntegerField(default=0, db_index=True) 
```

我想执行以下查询：

```
movies = Movie.objects.order_by('-item__popularity__today') \
                      .values(...)
paginator = Paginator(movies, 12) 
```

但是，数据库中有大约 52,000 行，这需要 500-700 毫秒才能运行。有什么办法可以让这更快吗？我要做的是获取数据库中最受欢迎的 12 部电影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:46:03.130

这不是你可以在 Django 中做的事情。优化它的方法是在数据库中。

针对生成的实际查询运行`EXPLAIN`- 事实上，Django 调试工具栏可以为您执行此操作 - 并注意相关的子查询和 JOIN 是否使用索引，而不是全表扫描。您可能需要在`item, today`开始时为 Paginator 表创建一个索引。

# javascript - 在初始登录后权限发生更改时通过 Facebook 事件检测

> ID：10823011
> 
> 赞同：1
> 
> 时间：2012-05-30T19:32:06.427
> 
> 标签：javascript, facebook, permissions

我有一个允许用户发表评论的应用程序。在评论文本框附近，我提供了一个标有“也发布到我的墙上”的复选框。当用户单击提交按钮时，我会检查他们是否已登录 FB。如果是，我尝试授权我的应用程序。有时用户不想在他们的墙上发帖，所以如果他们将该复选框留空，我不会要求发布权限。然后，有时在同一个会话中，用户尝试发布另一条评论，但这次确实想发布到他们的墙上。我可以检测到我没有发布权限，如果是这种情况，我会使用扩展权限再次调用 FB.login。我遇到的麻烦是在第二次登录后似乎没有触发任何事件，无论用户现在是否允许发布权限。

以下是我正在观看的事件：

auth.login
auth.prompt
auth.statusChange
auth.authResponseChange

我目前正在使用 Javascript SDK

如果我无法收到事件，我不确定如何查看权限对话框是否关闭，以便我可以重新检查权限并发布到他们的墙上。

# c# - 从 resx 文件分配属性

> ID：10823014
> 
> 赞同：0
> 
> 时间：2012-05-30T19:32:12.460
> 
> 标签：c#, asp.net-mvc, resx

```
string thing = ComparaSave.Resources.Message.EmailAdrRequired;
[Required(ErrorMessage = thing)]    <---- The problem!!
[DataType(DataType.EmailAddress)]
[Display(Name = "Email Address")]
[StringLength(100)]
[EmailAddress]
public string Email { get; set; } 
```

抛出错误：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。

如何将资源文件读入这样的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:33:56.240

您需要使用：

```
[Required(ErrorMessageResourceName= "FullNameRequired", ErrorMessageResourceType = typeof(MyResource)] 
```

ErrorMessage 仅用于字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:34:05.490

这是不可能的。属性只能使用常量值，但资源值不是常量。

您可以将 ErrorMessage 更改为 ErrorMessageResourceName，此处不使用消息文本，而是使用错误消息字符串的资源名称。在属性代码中，您需要添加将从资源文件中按名称读取字符串的代码。

有关如何加载资源字符串的代码，请查看为您的 .resx 文件生成的 .cs 文件。

# c++ - 绘制鼠标指针图标？

> ID：10823022
> 
> 赞同：5
> 
> 时间：2012-05-30T19:32:59.713
> 
> 标签：c++, windows, mouse, gdi

我正在编写有趣的小工具。我希望能够在与原始鼠标不同的位置绘制第二个（或更多）鼠标指针图标，但要根据原始鼠标的移动来移动它。

我知道如何跟踪鼠标的移动，但我不知道如何绘制/重绘鼠标指针；谁能帮忙？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T19:56:58.727

您可以使用以下代码：

```
CURSORINFO ci;
ci.cbSize = sizeof(CURSORINFO);
GetCursorInfo(&ci); 
```

接下来，您可以通过调用来绘制光标：

```
DrawIcon(ContextDC, YourXPosition, YourYPosition, ci.hCursor); 
```

如果您需要有关光标的其他信息，例如热点，请检查 ICONINFO 结构：

```
ICONINFO ii;
GetIconInfo(ci.hCursor, &ii); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:14:21.500

这可以这样做：

1.  使用 . 从您的应用程序中获取当前鼠标光标[`LoadCursor()`](http://msdn.microsoft.com/en-us/library/aa924571.aspx)。只需指定 NULL 和您想要的游标。或者只是为光标加载位图。现在，你有一个位图。

2.  下一步是获取桌面的设备上下文：[`GetWindowDC(NULL)`](http://msdn.microsoft.com/en-us/library/dd144947%28v=vs.85%29.aspx). 这将使您有机会在任何地方的桌面上绘图。

3.  您很有可能需要[`CreateCompatibleBitmap()`](http://msdn.microsoft.com/en-us/library/aa922174)在#1 处申请图像，并在#2 处获得 DC。

4.  现在，使用 some[`BitBlt()`](https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-bitblt)将位 OUT 从在 #2 获得的 DC 复制到您想要放置光标的位置的保存图像（您需要创建这些图像）中。

现在，将#3得到的图像放到#2得到的Desktop DC上你想要的位置。

当用户移动鼠标时，使用#4 保存的数据恢复桌面上的图像。释放所有你不需要的东西（是的，这是强制性的）。

并从#1 重新开始。

这两个更多的链接可能会有所帮助：

[位图、设备上下文和 BitBlt](http://www.winprog.org/tutorial/bitmaps.html)

[捕获图像](http://msdn.microsoft.com/en-us/library/dd183402%28v=vs.85%29.aspx)

祝你好运！

# c# - 将 lambda 传递给参数化的 NUnit 测试

> ID：10823026
> 
> 赞同：15
> 
> 时间：2012-05-30T19:33:32.293
> 
> 标签：c#, nunit, parameterized

我有一个带有一堆重载运算符的类：

```
public static double[,] operator +(Matrix matrix, double[,] array)
public static double[,] operator -(Matrix matrix, double[,] array)
public static double[,] operator *(Matrix matrix, double[,] array) 
```

对于所有这些，我想测试操作数是否为空。我对此进行了`NUnit`测试：

```
public void MatrixOperatorOperandIsNullThrows(Func<Matrix, double[,], double[,]> op)
{
    Matrix m = null;
    var right = new double[,] {{1, 1}, {1, 1}};
    Assert.Throws<ArgumentException>(() => op(m, right));
} 
```

如何为每个运算符传递一个 lambda，例如`(l,r) => l + r`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T20:38:55.070

您不能立即应用包含 lambda 表达式的 TestCase 属性，即以下测试将无效：

```
[TestCase((a, b) => a + b)]
public void WillNotCompileTest(Func<double, double, double> func)
{
    Assert.GreaterOrEqual(func(1.0, 1.0), 1.0);
} 
```

但是，您可以做的是将 TestCaseSource 属性与您的 lambda 表达式的 IEnumerable 一起使用，如下所示：

```
[TestFixture]
public class TestClass
{
    private IEnumerable<Func<double, double, double>> testCases
    {
        get
        {
            yield return (a, b) => a + b;
            yield return (a, b) => a * b;
            yield return (a, b) => a / b;
        }
    }

    [TestCaseSource(nameof(testCases))]
    public void Test(Func<double, double, double> func)
    {
        Assert.GreaterOrEqual(func(1.0, 1.0), 1.0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:36:23.617

你可以完全通过：

```
MatrixOperatorOperandIsNullThrows((l,r) => l + r); 
```

# c# - 如何按值获取哈希表的键

> ID：10823027
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:33:35.753
> 
> 标签：c#, key, hashtable

我可以按值获取哈希表的键吗？我尝试查找和编码，但没有成功。任何人都可以帮助我。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:37:10.213

如果您使用的是[Hashtable 类](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)，则返回的枚举器是[IDictionaryEnumerator](http://msdn.microsoft.com/en-us/library/system.collections.idictionaryenumerator.aspx)，它应该允许您执行以下操作：

```
object key;
foreach (DictionaryEntry entry in theHashTable)
{
    if (entry.Value == theValue)
    {
        key = entry.Key;
        break;
    }
} 
```

话虽如此，我强烈推荐一种不同的数据结构。如果不出意外，升级到 using`Dictionary<TKey, TValue>`将提供类型安全性，尽管您仍然需要遍历`KeyValuePair<TKey, TValue)`Dictionary 中的项目以找到与值匹配的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:35:19.047

您需要手动遍历`KeyValuePair<>`字典中的 s 直到找到匹配的值。

# r - 依赖 ggplot2 的错误检查包

> ID：10823031
> 
> 赞同：3
> 
> 时间：2012-05-30T19:33:56.377
> 
> 标签：r, ggplot2

我有一些依赖 ggplot2 的软件包，并且在运行`R CMD check coefplot_1.1.7.tar.gz`.

我收到以下错误。

```
* checking whether the package can be loaded ... ERROR
Loading required package: ggplot2
Error: package 'ggplot2' could not be loaded
In addition: Warning message:
In library(pkg, character.only = TRUE, logical.return = TRUE, lib.loc = lib.loc) :
  there is no package called 'ggplot2'
Execution halted

It looks like this package has a loading problem: see the messages for
details. 
```

我所有依赖 ggplot2 的包都会出现此消息，而不仅仅是这个。

它构建、安装和工作都很好，但由于某种原因检查失败。

在 R 2.14.2 的 Rprofile.site 文件中，我的 .libPaths 参数发生了一些奇怪的事情，所以我重新安装了 R 2.15.0，但仍然遇到这个问题。

这是 ggplot 的一个已知问题还是我无意中开始做错了什么？

**编辑**在我的 Rgui（通过 RStudio）`.libPaths()`返回

```
[1] "C:/Users/Jared/Documents/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.0/library"        
[3] "C:/Program Files/RStudio/R/library" 
```

从 cmd 提示符返回 R 终端时

```
[1] "C:/Users/Jared/Documents/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.0/library" 
```

并通过 GitBash (MINGW32) 返回 R 终端

```
[1] "C:/Program Files/R/R-2.15.0/library" 
```

我确定这导致了一些问题？也许我需要通过 Rprofile.site: 来解决这个问题`.libPaths("~/R/win-library/2.15")`？

# android - Android ListView ContextMenu 没有出现

> ID：10823032
> 
> 赞同：0
> 
> 时间：2012-05-30T19:34:00.790
> 
> 标签：android, listview, contextmenu

我有一个自定义列表适配器。我已经重载了我的 OnItemClickListener 并为我显示上下文菜单的位置添加了一个 registerForContextMenu 行。

当我选择应该显示 MenuItem 的项目时，将显示菜单。当我按下手机上的返回按钮时，菜单消失。但是现在我的列表视图中的同一个项目不再收到 OnItemClickListener 会发生什么。我说得通吗？我的意思是在菜单消失后，同一个项目不会收到点击监听器。上面和下面的项目根据需要接收事件。我似乎菜单已经消失但仍在捕捉点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:02:11.250

这不好。你必须调用方法`registerForContextMenu`。`onCreate`

所以试试这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.contacts);
   registerForContextMenu(<yourListView>);
   ...
} 
```

对于创建`ContextMenu`你必须覆盖`onCreateContextMenu`方法

```
@Override
public void onCreateContextMenu(ContextMenu cMenu, View parent, ContextMenu.ContextMenuInfo info) {
   this.contextMenu = cMenu;
   new MenuInflater(Contacts.this).inflate(R.menu.conmenu, this.contextMenu);
} 
```

对于选择项目覆盖`onContextItemSelected`方法：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)       item.getMenuInfo();
   switch (item.getItemId()) {
      case R.id.c_odobrat:
         deleteContactDialog(info.id);
         return true;
   }
   return false;
} 
```

它应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:58:03.947

```
 quickLinkListView.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id)
            {

                Intent intent = new Intent();
                intent.setClassName(Home.this, "com.myapp.toc" + Constants.ACT_NAMES[position]);

                if (position < 4 && position > 1)
                {

                    switch (position)
                    {

                    case 3:
                        registerForContextMenu(v);
                        ViewHolder.v=v;
                        openContextMenu(v);
                        break;
                    }
                }

            }
        });

public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_home, menu);
    menu.setHeaderTitle("Select Video Type");
} 
```

# python - 将参数从批处理文件发送到 Python 脚本

> ID：10823033
> 
> 赞同：8
> 
> 时间：2012-05-30T19:34:05.263
> 
> 标签：python, batch-file, windows-xp

我在 Win XP 上运行 Python 3.2。我通过这个批处理文件运行一个python脚本：

`C:\Python32\python.exe test.py %1`

`%1`是我传递的一个参数，用于在 python 脚本中进行一些处理。

我在批处理文件中有 2 个变量，我也想将它们作为参数发送给 python 脚本。

`set $1=hey_hi_hello`

`set $2=hey_hi`

如果可能的话，我希望能够做这样的事情：

`C:\Python32\python.exe test.py %1 $1 $2`

`sys.argv[2]`然后通过和检索python脚本中的这些参数`sys.argv[3]`

对此有任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T19:41:09.883

your_script.bat：

```
set VAR_1=this
set VAR_2=that

python your_script.py %1 %VAR_1% %VAR_2% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-16T03:59:14.953

另一种选择是在 python 脚本之后立即编写参数，如下所示：

`python your_script.py this that`

如果您使用的是 Linux`.sh`文件，请记住在运行`dos2unix XXX.sh`之前运行： `bash XXX.sh`.

在一个简单的版本中，原因是 dos 和 unix 使用不同的换行符。

# css - div 内的全角背景颜色

> ID：10823036
> 
> 赞同：1
> 
> 时间：2012-05-30T19:34:13.417
> 
> 标签：css, colors, html

我有一个简单的 div，其中包含具有交替背景颜色的文本行。第一行是绿色，第二行是红色，第三行是绿色，依此类推。这个 div 是 450px 宽，大多数文本行不跨越 div 的整个长度，但我希望背景颜色从左到右跨越整个 450px。

我已经尝试将 width: 450px 添加到文本的 span 标记中，但仍然无法让它一直穿过。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:35:56.800

如果您`display: block`在 span 元素上进行设置，则背景颜色应跨越其容器的整个宽度。

当您`display: block`对 span 元素使用属性时，它们将显示为一个块，即末尾的换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:35:40.960

尝试设置`display: block`span 元素

请参阅此 jsFiddle[示例](http://jsfiddle.net/YJS9c/)

# objective-c - 更改 UITableViewCell 的选定状态

> ID：10823042
> 
> 赞同：1
> 
> 时间：2012-05-30T19:34:30.337
> 
> 标签：objective-c, ios, uitableview

我有一个标准的 UITableView，其中每个单元格都是一个自定义 UIView。一切正常，除了当单元格被选中时，它变成蓝色（如预期的那样）但 UIView 被隐藏了！

如何在选择单元格时将视图的内容更改为可见？

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView 
                         dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault
            reuseIdentifier:CellIdentifier];
}
UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 100)];
UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 5, 300, 40)];
[headerLabel setText:[[[todayCollection events]objectAtIndex:indexPath.row]name]];
[headerLabel setFont:[UIFont boldSystemFontOfSize:22]];
headerLabel.highlightedTextColor = [UIColor whiteColor];

UILabel *venueLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 40, 300, 20)];
[venueLabel setText:[[[[todayCollection events]objectAtIndex:indexPath.row]venue]name]];
[venueLabel setFont:[UIFont italicSystemFontOfSize:16]];

LBVenueBadge *venueBadge = [[LBVenueBadge alloc] initWithGenre:[[[todayCollection events]objectAtIndex:indexPath.row]genre] frame:CGRectMake(85, 73, 100, 20)];
UIImageView *pinImage = [[UIImageView alloc] initWithFrame:CGRectMake(10, 75, 18, 18)];
[pinImage setImage:[UIImage imageNamed:@"193-location-arrow.png"]];
UILabel *distanceLabel = [[UILabel alloc] initWithFrame:CGRectMake(30, 75, 100, 15)];
[distanceLabel setFont:[UIFont systemFontOfSize:12]];
NSString *distanceString = [[[[todayCollection events]objectAtIndex:indexPath.row]venue]distanceString]; 

if([[[[todayCollection events]objectAtIndex:indexPath.row]performances]count] == 1)
{
    UILabel *performanceLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 75, 50, 15)];
    [performanceLabel setText:[[[[[todayCollection events]objectAtIndex:indexPath.row]performances]objectAtIndex:0]time]];
    [performanceLabel setBackgroundColor:[UIColor clearColor]];
    [performanceLabel setFont:[UIFont systemFontOfSize:12]];

    [containerView addSubview:performanceLabel];
}else{
    UILabel *performanceLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 75, 50, 15)];
    [performanceLabel setText:[NSString stringWithFormat:@"%i shows", [[[[todayCollection events]objectAtIndex:indexPath.row]performances]count]]];
    [performanceLabel setBackgroundColor:[UIColor clearColor]];
    [performanceLabel setFont:[UIFont systemFontOfSize:12]];

    [containerView addSubview:performanceLabel];
}

[distanceLabel setText:distanceString];  
[containerView addSubview:pinImage];

[distanceLabel setBackgroundColor:[UIColor clearColor]];
[containerView addSubview:distanceLabel];

[headerLabel setBackgroundColor:[UIColor clearColor]];
[containerView addSubview:headerLabel];
[venueLabel setBackgroundColor:[UIColor clearColor]];
[containerView addSubview:venueLabel];

[containerView addSubview:venueBadge];
if(indexPath.row % 2 == 0)
{
    [containerView setBackgroundColor:[UIColor colorWithRed:0.239 green:0.239 blue:0.232 alpha:0.05]];
}else{
    [containerView setBackgroundColor:[UIColor colorWithRed:0.239 green:0.239 blue:0.232 alpha:0.02]];
}
cell.backgroundView = containerView;
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
return cell; 
```

}

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:13:11.373

由于该`contentView`属性是只读的，因此我可以向其添加子视图。

`[cell.contentView addSubview:containerView];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:38:13.483

您正在将视图添加到背景而不是单元格的 contentView 替换此行。

```
cell.backgroundView = containerView; 
```

和

```
[cell.contentView addSubview:containerView]; 
```

# heroku - Play 2 进化应用 blob 和 bytea 进行测试和生产

> ID：10823045
> 
> 赞同：0
> 
> 时间：2012-05-30T19:34:43.743
> 
> 标签：heroku, playframework-2.0, postgresql-9.1, ebean, playframework-evolutions

我在 play 2.0 下创建了一个 bean，evolutions 将为我创建一个 1.sql DDL。

这是包含 blob 类型的实体：

```
@Entity
@Table(name="image_info")
public class ImageInfo extends Model {

    .......

    @Constraints.Required
    private Blob image;

    .......
} 
```

它创建了这个 DDL。

```
create table image_info (
  id                        bigint not null,
  image                     blob) 
```

它在本地适用于 H2 db，但不适用于 Heroku Postgres。我怎样才能使进化自动化以创建单独的 DDL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:59:27.707

您可以在`application.conf`其中定义许多服务器并决定每个服务器`model`属于哪个服务器：

```
ebean.orders="models.Order,models.OrderItem"
ebean.customers="models.Customer,models.Address" 
```

然后，您可以使用此技术自动构建两个 DDL

```
# the default is some config of postgress
ebean.default="models.*"

# h2
ebean.mylocalh2="models.*" 
```

它会起作用，但是我担心你需要在本地安装 Postgres（注意 - 我用 MySQL 检查了这个技巧 - 没有本地 PG），所以在这种情况下，开发起来可能会更容易更好在与目标非常相似的环境中应用程序（通常始终是最佳选择）。

# iphone - 在从 iphone 中的 xml 获取数据之前执行等待语句？

> ID：10823052
> 
> 赞同：0
> 
> 时间：2012-05-30T19:35:20.960
> 
> 标签：iphone, ios5, xml-parsing, nsurlconnection, nsthread

我写在这里是因为我几乎尝试了一切来解决这个问题。但是失败了，我需要一个解决方案。

```
 -(NSArray *)newPosts
{
NSArray *newDataArray = [[NSArray alloc]init];
//[self performSelectorOnMainThread:@selector(feedUrl:) withObject:nextObjectArray waitUntilDone:YES]

newDataArray = [feed getUserFeed:indexValue+1];
NSLog(@"~~~~~~~~~%@",newDataArray);

return newDataArray;
 } 
```

我在重新加载表格视图之前调用了这个方法，这个函数转到作为 NSobject 类的类提要并调用这个函数来更新数组。

```
 [self performSelectorOnMainThread:@selector(feedUrl:) withObject:nextObjectArray waitUntilDone:YES];  
 return nextObjectArray; 
```

但是，当 feedurl 通过 nsurlconnection 委托函数从 xml 获取数据时，数组返回并且它是空白的。那么为什么我没有从数组中得到任何结果。我读了很多博客，有人说我尝试过使用调度队列，但我在调度队列中找不到可以放置返回语句的位置。我也尝试等待/睡眠以停止执行，但它们用于其他用途。任何身体都可以帮助摆脱这个问题。我需要在返回之前填充数组。

# javascript - Ember 路由器未在 Chrome 和 Safari 中更新 url

> ID：10823053
> 
> 赞同：3
> 
> 时间：2012-05-30T19:35:22.807
> 
> 标签：javascript, model-view-controller, url, routes, ember.js

我已经在 ember.js 中实现了关注。代码工作到一定程度。

当我在根 url 即“/”处输入应用程序时，该 URL 不会更改，它应该转到 tasks.index 并通过显示 #/tasks 来反映 url 中的更改。

但是当我转到“#/tasks”并显示消息“您好，来自索引视图”时，它的行为正确。

我正在使用 Google Chrome 版本 19 和 ember.js edge。

很感谢任何形式的帮助。

```
App = Em.Application.create({});

App.IndexView = Em.View.extend({
    template: Em.Handlebars.compile(
        'hello world from index'
    )
});

App.ShowView = Em.View.extend({
    template: Em.Handlebars.compile(
        'hello world from show'
    )
});

App.Router = Ember.Router.extend({
    location: 'hash',
    rootElement: "#my-app",
    enableLogging: true,

    root: Ember.State.extend({
        index: Ember.State.extend({
            route: '/',
            redirectsTo: 'tasks.index'
        }),

        tasks: Ember.State.extend({
            route: '/tasks',

            index: Ember.ViewState.extend({
                route: '/',
                view: App.IndexView
            }),

            show: Ember.ViewState.extend({
                route: '/show',
                view: App.ShowView
            })
        })
    })
});

App.initialize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:49:40.067

看到这个jsFiddle：

代码-> [http://jsfiddle.net/ud3323/WLcRQ/](http://jsfiddle.net/ud3323/WLcRQ/)

调试-> [http://jsfiddle.net/ud3323/WLcRQ/show/](http://jsfiddle.net/ud3323/WLcRQ/show/)

您需要做的就是更改`redirectsTo: 'tasks.index'`为`redirectsTo: 'tasks'`.

You don't need to specify the destination state's starting route when using `redirectsTo` when the destination state has a starting route defined (as you've done).

# mysql - 根据 Explain 判断 SQL Query 的长度

> ID：10823055
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:35:24.837
> 
> 标签：mysql, sql, optimization, explain

我试图根据解释的输出来估计查询需要多长时间。我正在使用 MYSQL 数据库。

我知道您无法确定查询需要多长时间。我只是在寻找一个大概的估计，即 1 小时、8 小时、1 天、2 周等。谢谢！

![在此处输入图像描述](../Images/48a872233d28c23ddbce6d01f492abf4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:38:28.293

你不能，这完全取决于你的基础设施。解释计划首先是真正的指示性，然后才是真正与您的服务器相关的。

无论如何，使用 TKPROF 以获得更好的结果。

编辑：与 Oracle 不同，Mysql 没有 tkprof（其余部分仍然有效）相反，使用 PROFILING 获取更多相关信息：[http ://dev.mysql.com/doc/refman/5.0/en/show-profiles.html](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)

# java - 从另一个 Frame 添加元素后刷新 JList

> ID：10823058
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:35:31.897
> 
> 标签：java, arrays, swing, jlist

我有一个关于更新 JLists 的紧急问题。找了几天，没找到，忘记继续搜索><现在我很着急。

我将尝试详细解释它：

1.  我打开一个 Java frame1 并显示一个 JList。Jlist 由从磁盘读取的字符串数组提供。
2.  我打开一个由 frame1 创建的新 frame2
3.  我将新元素添加到为 frame2 中的 JList 提供数据的字符串数组。元素保存在文件磁盘中。
4.  我关闭了frame2。我又在第一帧。

那么我的问题是，有什么方法或方法可以刷新 jframe1 JList 以显示添加的新元素？

在此先感谢您，如果您需要更详细的步骤说明，我会发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T00:39:02.507

在这种情况下，我将使用模式对话框，并在`dialog.setVisible(true)`.

# mysql - 返回 MySQL 中每一行的索引值

> ID：10823063
> 
> 赞同：1
> 
> 时间：2012-05-30T19:35:42.473
> 
> 标签：mysql, indexing, limit, increment

我想知道是否有一种方法可以返回 MySQL 查询中每一行的当前索引，例如：

```
SELECT current_index, name FROM table LIMIT 10,10 
```

这样生成的行将具有

```
10, 'somename',
11, 'somename',
etc.... 
```

这将是一个基于起始限值的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:38:43.930

```
SET @rn = 10;

SELECT  @rn := @rn + 1 AS current_index,
        name
FROM    mytable
LIMIT   10, 10 
```

请注意，这`LIMIT 10, 10`意味着条目`11`到`20`.

另请注意，`LIMIT`如果没有稳定`ORDER BY`，则不能保证在查询之间保持不变（并且在某些引擎中不保持不变）。

# java - 服务器端通知 Phonegap 反向 ajax

> ID：10823065
> 
> 赞同：1
> 
> 时间：2012-05-30T19:36:01.933
> 
> 标签：java, html, cordova, websocket, comet

我正在 WebShere 上编写一个 Java EE 应用程序，我想在其中通知客户端移动用户。我正在使用 Phonegap 和 HTML5。我正在寻找通知客户的解决方案。我无法使用 Websphere 和 Jetty 运行 websocket。

是否有任何解决方案可以使用 Comet、反向 Ajax 通知移动客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:01:52.503

我想你已经知道你的解决方案了。您提到了反向 Ajax 和 Comet。您想要的称为长轮询或推送技术。这可能会让你开始：

[http://www.ibm.com/developerworks/web/library/wa-cometjava/](http://www.ibm.com/developerworks/web/library/wa-cometjava/)

[彗星和 jQuery](https://stackoverflow.com/questions/136012/comet-and-jquery)

[http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)

[http://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)

# wpf - 有没有办法突出显示 DecimalUpDown 控件中的增量数字？

> ID：10823067
> 
> 赞同：0
> 
> 时间：2012-05-30T19:36:12.027
> 
> 标签：wpf, numericupdown

我正在使用 WPF 扩展工具包 DecimalUpDown 控件。我允许用户以几种方式更改此控件的 Increment 属性。我希望能够向他们反馈单击向上/向下按钮（或滚动鼠标滚轮）时哪个数字会发生变化。我想更改会增加的数字的某些属性。改变颜色、背景、下划线、粗体，几乎任何东西都是可以接受的，但我觉得没有原生支持，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:10:05.140

这似乎不可能，但我最终只是使用工具提示来提供帮助。如果用户将鼠标悬停在控件上，它会显示当前增量。如果显示工具提示并且使用了任何修改增量的方法，则工具提示将使用当前增量实时更新。不完美，但似乎有帮助。

# iphone - 如何在 UIViewController 推送上为 UINavigationBar 背景更改设置动画？

> ID：10823068
> 
> 赞同：8
> 
> 时间：2012-05-30T19:36:14.487
> 
> 标签：iphone, objective-c, ios, animation, uinavigationbar

我的应用程序为 UINavigationBar 使用两种不同的背景来向用户指示他们在层次结构中的哪个级别。当我推送一个需要第二个背景的 UIViewController 时，它缺少动画，一旦 UIViewController 被推送，背景就会立即改变。我如何制作动画，以便背景变化随着视图的变化而消失？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-07T21:15:49.783

我知道这是一个旧线程，但这对我有用：

```
CATransition *transition = [CATransition animation];
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
transition.type = kCATransitionFade;
transition.duration = 0.5;

[self.navigationController.navigationBar.layer addAnimation:transition forKey:nil];
[self.navigationController.navigationBar setBackgroundImage:[[UIImage imageNamed:@"navigationbar.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(44, 20, 44, 20)] forBarMetrics:UIBarMetricsDefault]; 
```

把它放在你的`viewDidLoad`方法中。您需要链接/导入**QuartzCore**框架。

# reporting-services - SSRS HTML 渲染和样式

> ID：10823069
> 
> 赞同：0
> 
> 时间：2012-05-30T19:36:17.650
> 
> 标签：reporting-services, ssrs-2008

在文本框中使用 HTML 呈现时，是否可以为 SSRS 中的特定标签设置一些样式？

我有一些显示为 HTML 的文本。该文本通常用 P 标签包裹。发生这种情况时，SSRS 会渲染空格，因为这是 P 标签的默认格式。我想摆脱段落之间的那些空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:25:13.927

为什么不从字段中删除**P**标签？例如，您可以使用以下表达式

```
(Fields(YourColumn.Value).Replace("<p ","")).Replace("</p>","") 
```

# windows - 在后台运行的启动脚本

> ID：10823074
> 
> 赞同：1
> 
> 时间：2012-05-30T19:36:30.637
> 
> 标签：windows, powershell, command-line, batch-file

我有以下 bat 文件：

```
@echo off
start /min powershell "& 'C:\Admin\c.ps1'"
exit 
```

我不想显示 powershell 窗口，因为这是一个在启动时运行的管理脚本。

我的印象是使用`start /min`会解决它，但它仍在显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:58:16.307

PowrShell 有一个隐藏式启动的开关。也就是说，控制台可能会在短时间内可见，直到它消失。由于这是一个管理脚本，我还建议使用 NonInteractive 开关来防止有人干扰它

```
@echo off
powershell -NonInteractive -File C:\Admin\c.ps1 
exit 
```

如果您根本无法看到控制台，请考虑使用 vbs 文件来启动 powershell：

```
Set oShell = CreateObject("WSCript.Shell")
oShell.Run("powershell -NonInteractive -File C:\Admin\c.ps1",0,False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:12:58.383

`START`命令可以选择`/b`在不创建新窗口的情况下启动应用程序。

尝试

```
start /b powershell "& 'C:\Admin\c.ps1'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:38:46.283

如果您使用“任务计划程序”、“启动时运行一次”，则可以选择隐藏这样的窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:21:15.040

您可以使用 VBScript 来阻止窗口出现。

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("C:\Admin\c.ps1"), 0, True 
```

另外，您可以使用它代替批处理文件，因此也不会有 cmd 窗口。

希望这可以帮助。

# spring - Spring Security：密码与存储的密码不匹配

> ID：10823080
> 
> 赞同：1
> 
> 时间：2012-05-30T19:36:58.903
> 
> 标签：spring, security

我有密码哈希的问题。我想用盐和 1024 次迭代应用 sha-256 来使用 Spring Security 对我的用户进行身份验证。但不知何故，我在数据库中的密码与用户输入的密码不匹配。

这是我的代码：

**安全上下文.xml**

```
<beans:bean
    id="passwordEncoder"
    class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" >
    <beans:constructor-arg value="256" />
    <beans:property
        name="iterations"
        value="1024" />
</beans:bean>

<beans:bean class="org.springframework.security.authentication.dao.ReflectionSaltSource" id="saltSource">
    <beans:property name="userPropertyToUse" value="id"/>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userLoginDetails" >
        <password-encoder ref="passwordEncoder" >
             <salt-source ref="saltSource"/>
        </password-encoder>
    </authentication-provider>
</authentication-manager> 
```

**用户登录详情**

```
@Transactional(readOnly = true)
public class UserLoginDetails implements UserDetailsService {

private EregDaoFactory daoFactory;

@Autowired
public void setDaoFactory(EregDaoFactory daoFactory) {
    this.daoFactory = daoFactory;
}

/**
 * Retrieves a user record containing the user's credentials and access.
 */
@Override
public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException,
        DataAccessException {
    Logger logger = Logger.getLogger(getClass());
    logger.setLevel(Level.ALL);

    int userId = Integer.parseInt(username);

    UzytkownikDao dao = daoFactory.getUzytkownikDao();

    LoggedUser user = null;
    Uzytkownik dbUser = null;

    try {

        dbUser = (Uzytkownik) dao.findById(Integer.parseInt(username));
        List<SimpleGrantedAuthority> grants = new ArrayList<SimpleGrantedAuthority>();
        Collection<Object> userNames = new ArrayList<Object>();

        if (dbUser.getRola() == 'U') {
            grants.add(new SimpleGrantedAuthority("ROLE_STUDENT"));
            userNames = daoFactory.getUczenDao().getNameAndLastName(userId);

        } else if (dbUser.getRola() == 'N') {
            grants.add(new SimpleGrantedAuthority("ROLE_TEACHER"));
            userNames = daoFactory.getNauczycielDao().getNameAndLastName(userId);
        } else if (dbUser.getRola() == 'O') {
            grants.add(new SimpleGrantedAuthority("ROLE_PARENT"));
            userNames = daoFactory.getOpiekunDao().getNameAndLastName(userId);
        }
        grants.add(new SimpleGrantedAuthority("ROLE_USER"));

        Object[] names = userNames.toArray();
        user =
                new LoggedUser(username, dbUser.getHaslo(), true, true, true, true, grants,
                        (String) names[0], (String) names[1], dbUser.getRola());
    } catch (Exception e) {
        logger.error(e.getLocalizedMessage());
        throw new UsernameNotFoundException("Error in retrieving user");

    }

    return user;

} 
```

}

**登录用户**

```
 package ereg.security.userdetails;

public class LoggedUser extends User {

private static final long serialVersionUID = 1L;
private final String id;
private final String imie;
private final String nazwisko;
private final char rola;
private Date lastSuccessfulLogin;
private String lastKnowIpAddress;

public LoggedUser(String username, String password, boolean enabled, boolean accountNonExpired,
        boolean credentialsNonExpired, boolean accountNonLocked,
        Collection<? extends GrantedAuthority> authorities, String name, String lastName, char rola) {
    super(username, password, enabled, accountNonExpired, credentialsNonExpired, accountNonLocked,
            authorities);
    this.imie = name;
    this.nazwisko = lastName;
    this.rola = rola;
    this.id = username;
}

public String getId() {
    return id;
}

public String getImie() {
    return imie;
}

public String getNazwisko() {
    return nazwisko;
}

public char getRola() {
    return rola;
}

public Date getLastSuccessfulLogin() {
    return lastSuccessfulLogin;
}

public String getFormattedDate() {
    if (lastSuccessfulLogin != null) {
        return new SimpleDateFormat("dd/MM/yyyy, HH:mm:ss").format(lastSuccessfulLogin);
    } else
        return null;
}

public String getLastKnowIpAddress() {
    return lastKnowIpAddress;
}

public void setLastSuccessfulLogin(Date lastSuccessfulLogin) {
    this.lastSuccessfulLogin = lastSuccessfulLogin;
}

public void setLastKnowIpAddress(String lastKnowIpAddress) {
    this.lastKnowIpAddress = lastKnowIpAddress;
} 
```

}

这是哈希密码的程序：

**加密所有用户密码**

```
private void encryptPasswords() throws Exception {
    OneWayEncryptor encryptor = OneWayEncryptor.getInstance();

    appContext =
            new FileSystemXmlApplicationContext(
                    "C:/EclipseWorkSpace/myereg/WebContent/WEB-INF/applicationContext.xml");

    ds = (DataSource) appContext.getBean("dataSource");
    JdbcTemplate jdbc = new JdbcTemplate(ds);
    BigDecimal userId = null;
    String password = "";
    String encrypted = "";

    Map<?, ?> row = new HashMap<Object, Object>();

    for (Iterator<?> it = jdbc.queryForList("SELECT id, haslo FROM UZYTKOWNIK").iterator(); it.hasNext();) {
        row = (Map<?, ?>) it.next();

        userId = (BigDecimal) row.get("ID");
        password = (String) row.get("HASLO");
        encrypted = encryptor.encrypt(password, userId.toString());

        System.out.println(userId.toString());

        jdbc.execute("UPDATE UZYTKOWNIK SET haslo = '" + encrypted + "'  WHERE id = " + userId);

    }
}

public static void main(String[] args) {

    EncryptAllUserPasswords encrypt = new EncryptAllUserPasswords();
    try {
        encrypt.encryptPasswords();
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

**单向加密器**

```
public final class OneWayEncryptor {
private static final OneWayEncryptor INSTANCE = new OneWayEncryptor();

private static final int ITERATIONS = 1024;
private static final String ALGORITHM = "SHA-256";

private OneWayEncryptor() {
}

public static OneWayEncryptor getInstance() {
    return INSTANCE;

}

public String encrypt(String plaintext, String salt) throws NoSuchAlgorithmException,
        UnsupportedEncodingException {
    MessageDigest messageDigest = MessageDigest.getInstance(ALGORITHM);

    messageDigest.reset();
    messageDigest.update(salt.getBytes());

    byte[] btPass = messageDigest.digest(plaintext.getBytes("UTF-8"));
    for (int i = 0; i < ITERATIONS; i++) {
        messageDigest.reset();
        btPass = messageDigest.digest(btPass);
    }

    String encodedPassword = byteToBase64(btPass);

    return encodedPassword;
}

private String byteToBase64(byte[] bt) throws UnsupportedEncodingException {

    return new String(Base64.encodeBase64(bt));

} 
```

}

我相信问题出在最后一个...请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:05:04.883

实际上，这有效：

```
public String encrypt(String plaintext, String salt) throws NoSuchAlgorithmException,
        UnsupportedEncodingException {
    String pass = plaintext + "{" + salt + "}";
    MessageDigest messageDigest = MessageDigest.getInstance(ALGORITHM);

    messageDigest.reset();
    byte[] btPass = messageDigest.digest(pass.getBytes("UTF-8"));

    for (int i = 0; i < ITERATIONS - 1; i++) {
        messageDigest.reset();
        btPass = messageDigest.digest(btPass);
    }

    String hashedPass = new BigInteger(1, btPass).toString(16);
    if (hashedPass.length() < 32) {
        hashedPass = "0" + hashedPass;
    }

    return hashedPass;
} 
```

有人可以告诉我为什么吗？我的意思是为什么当我尝试使用 update(salt) 方法时它会做，而当我切换到连接字符串时它会做。而且我不介意使用“{salt}”，因为这只允许我生成与 spring 完全相同的哈希。问题是，即使给定盐，它也会在生成错误哈希之前。我用 sha256 生成器检查了它。有人能告诉我为什么它在字符串连接后开始工作吗？

# ios - OpenCV findContours 崩溃

> ID：10823085
> 
> 赞同：4
> 
> 时间：2012-05-30T19:37:13.283
> 
> 标签：ios, opencv

我有这个代码：

```
mat.copyTo(tmpMat);
cvtColor(tmpMat, tmpMat, CV_BGR2GRAY);
cv::equalizeHist(tmpMat, tmpMat);
    cv::Mat browMat = tmpMat(eyebrowRect);
    std::vector<std::vector<Point> > contours;
    cv::findContours(browMat, contours, cv::RETR_LIST, cv::CHAIN_APPROX_NONE); 
```

但它因此错误而崩溃：

> OpenCV 错误：断言失败 (type == type0 || (CV_MAT_CN(type) == CV_MAT_CN(type0) && ((1 << type0) & fixedDepthMask) != 0)) 在创建，文件 /Users/robin/Projects/ OpenCVForiPhone/opencv/opencv/modules/core/src/matrix.cpp，第 1249 行终止称为抛出异常

我认为由于 cvtColor 调用，我的 Mat 已经处于 1 通道灰度...

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T18:25:51.170

代替：

```
std::vector<std::vector<Point> > contours; 
```

你有没有尝试过？

```
std::vector<std::vector<cv::Point> > contours; 
```

# list - Prolog - 生成正确的包围

> ID：10823087
> 
> 赞同：1
> 
> 时间：2012-05-30T19:37:17.543
> 
> 标签：list, prolog

我想在以下考试问题中获得一些帮助，我不知道该怎么做：

输入：一个数字列表，例如：`[1,2,3,4]` 输出：所有可能的正确括号。例如：（在输入的情况下`[1,2,3,4]`）：

```
((1 2) (3 4))
((1 (2 3)) 4)
(1 ((2 3) 4))
(1 (2 (3 4)))
(((1 2) 3) 4) 
```

这里的括号就像一个带有两个参数的方法，例如乘法 - 然后输出是可能的乘法顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:25:50.087

您的分配可以看作是“计算二叉树的产量”的逆过程。`yield`您可以使用 2 个递归调用和 append/3进行编码：

```
yield((L, R), Y) :-
    yield(L, Ly),
    yield(R, Ry),
    append(Ly, Ry, Y).
yield(T, [T]). 
```

测试：

```
?- yield(((1,2),(3,4)),Y).
Y = [1, 2, 3, 4] ;
Y = [1, 2, (3, 4)] ;
Y = [ (1, 2), 3, 4] ;
Y = [ (1, 2), (3, 4)] ;
Y = [ ((1, 2), 3, 4)]. 
```

因此抽象`yield/2`地说，当以这种方式调用时，应该解决您的分配：

```
?- yield(BinTree, [1,2,3,4]). 
```

但是，当然，这不会终止。显然，SLD 解析（Prolog 计算算法）在没有帮助的情况下无法解决这个问题。

但是，如果您还记得 append/3 可以生成构成附加项的所有替代左右列表：

```
?- append(L,R,[1,2,3,4]).
L = [],
R = [1, 2, 3, 4] ;
L = [1],
R = [2, 3, 4] ;
L = [1, 2],
R = [3, 4] ;
L = [1, 2, 3],
R = [4] ;
L = [1, 2, 3, 4],
R = [] ;
false. 
```

您可以尝试更改调用顺序以获得解决方案。

请注意，在递归之前您需要充分实例化的参数，因此请检查 append 的“输出”。你可以用

```
...
    Yr = [_|_],
... 
```

为了清楚起见，我还建议重命名谓词并更改参数的顺序：

```
?- brackets([1,2,3,4],B).
B = 1* (2* (3*4)) ;
B = 1* (2*3*4) ;
B = 1*2* (3*4) ;
B = 1* (2*3)*4 ;
B = 1*2*3*4 ;
false. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:23:58.180

此代码适用于 SWI-Prolog (nextto/3)。

你可以向 Prolog 解释你想要什么，然后问他所有的解决方案：

```
bracket([A,B], [A,B]).

bracket(In, Out) :-
    member(X, In),
    nextto(X,Y, In),
    append_3(A, [X,Y], B, In),
    append_3(A, [[X,Y]], B, Temp),
    bracket(Temp, Out).

append_3(A,B,C, Out) :-
    append(A, B, Temp),
    append(Temp, C, Out), !.

all_brackets(R) :-
    setof(L, bracket([1,2,3,4], L), R). 
```

你得到

```
?- all_brackets(R), maplist(writeln, R).
[[[1,2],3],4]
[[1,2],[3,4]]
[[1,[2,3]],4]
[1,[[2,3],4]]
[1,[2,[3,4]]]
R = [[[[1,2],3],4],[[1,2],[3,4]],[[1,[2,3]],4],[1,[[2,3],4]],[[1,2],[3,4]],[1,[2,[3,4]]]]. 
```

# c# - 您的网络访问被中断访问继续关闭数据库

> ID：10823097
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:38:11.167
> 
> 标签：c#, visual-studio-2008, ms-access-2007

我使用 c# 和 vs2008 和 access2007 数据库创建了一个 Windows 应用程序。该程序在我的计算机上正常运行，但是当安装程序安装在客户端系统中时，我收到错误“您的网络访问被中断访问以继续关闭数据库”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:49:38.300

想法：

*   假设 access2007 数据库位于网络驱动器上...驱动器是否映射到驱动器号？如果是这样，该驱动器是否总是显示“启用”，还是显示“断开连接”？
*   是否有超过 1 个用户尝试同时访问数据库。通常只允许一个用户进行读/写访问，这使得 Access 数据库有时不实用。
*   客户端是否有有线连接？网络连接是否表现良好（在做其他事情时）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:05:11.237

昨天我遇到了同样的问题，我无法在互联网上找到任何有用的东西。我解决了！所以我写在这里分享我的案例和解决方案：

我收到此误导性错误消息的原因是运行我的应用程序的用户：我的应用程序是一项服务，因此用户不是登录计算机的人，但根据任务管理器的说法，用户是 SYSTEM。

我的服务是用 Java 编写的，它试图连接到 MS Access 2007 .accdb 数据库，收到错误消息“您的网络访问被中断。继续关闭数据库然后再次打开它”。

如果我运行我的服务，将“登录身份”从“本地系统帐户”更改为“此帐户”并输入用于登录 Windows 的用户和密码，问题就消失了！如您所见，它与关闭数据库并再次打开它无关，与网络访问中断无关。一个 ERROR_ACCESS_DENIED (0x5) 会更清晰...... ;-)

我希望这个提示有帮助......

# c# - 如何在我的应用程序加载时显示图像

> ID：10823107
> 
> 赞同：2
> 
> 时间：2012-05-30T19:39:03.350
> 
> 标签：c#, .net, image, events, loading

我有和应用程序 windows form .net 并且我的 form1 需要很长时间才能出现，因为在它的事件`form1_Load`中做了很多操作。

我的目标是在操作完成时显示图像。

```
private void form1_Load(object sender, EventArgs e)
{            
    methode1();
} 
```

当我的 methode1() 工作时，我的表单不显示，我想在我的 methode1() 工作时在屏幕上显示图像，因为当 methode1() 工作时，屏幕上没有任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:43:25.533

使用静态图像创建另一个表单，仅用于加载，并在应用程序开始加载之前显示它，然后将其销毁。始终在顶部，并且没有边界是此类事物的通常设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:47:35.637

.net 中的所有视觉事物都是在表单上完成的。您可以通过创建一个包含图像的小表单来做到这一点，在 module1() 之前加载它并在完成 module1() 之后关闭它。略低于..

```
private void form1_Load(object sender, EventArgs e)
{    
        Form f = new Form();
        f.Size = new Size(400, 10);
        f.FormBorderStyle = FormBorderStyle.None;
        f.MinimizeBox = false;
        f.MaximizeBox = false;
        Image im = Image.FromFile(path);
        PictureBox pb = new PictureBox();
        pb.Dock = DockStyle.Fill;
        pb.Image = im;
        pb.Location = new Point(5, 5);
        f.Controls.Add(pb);
        f.Show();        
        methode1();
        f.Close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T20:02:41.717

试试这个代码

```
using System.Reactive.Linq;

    private void RealForm_Load(object sender, EventArgs e)
    {
        var g = new Splash();

        // place in this delegate the call to your time consuming operation
        var timeConsumingOperation = Observable.Start(() => Thread.Sleep(5000));
        timeConsumingOperation.ObserveOn(this).Subscribe(x =>
        {
            g.Close();
            this.Visible = true;
        });

        this.Visible = false;
        g.ShowDialog();
    } 
```

此代码使用 Microsoft Rx 在后台线程中执行操作以及其他很酷的功能

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

为了使此代码正常工作，您需要引用两个 nuget 包：Rx 和 Rx windows 窗体

[https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

[https://nuget.org/packages/Rx-WinForms/1.0.11226](https://nuget.org/packages/Rx-WinForms/1.0.11226)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:45:10.770

（启动屏幕c＃-谷歌它）

这是我刚刚发现的：http: [//msdn.microsoft.com/en-us/library/aa446493.aspx](http://msdn.microsoft.com/en-us/library/aa446493.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T19:45:53.927

使用内置的 SplashScreen 类怎么样？

[http://msdn.microsoft.com/en-us/library/system.windows.splashscreen.aspx](http://msdn.microsoft.com/en-us/library/system.windows.splashscreen.aspx)

# cakephp - cake php在编辑时自动选择外键

> ID：10823108
> 
> 赞同：0
> 
> 时间：2012-05-30T19:39:17.250
> 
> 标签：cakephp, cakephp-model, cakephp-bake

我正在使用带有脚手架的 Cake PHP。我对它生成的代码有疑问，想看看是否有办法解决我是否应该最终构建自定义视图。

假设我有两个模型测试和问题。测试可以有很多问题，一个问题只有一个测试。我已经设置了 hasMany 和 belongsTo 关联。

现在，cake 为测试创建的脚手架视图在“相关问题”底部为我提供了一个按钮来创建问题。当我单击此按钮时，我会看到问题的“添加”表单，但不会自动选择正确的测试。

无论如何我可以让按钮将 test_id 传递到 Question 表单并自动填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:52:01.270

我知道你*认为*这可能如何工作；但是 Cake 不知道你想要那种开箱即用的行为。

您需要调整`Question Add`方法，或创建一个新方法：

示例代码：

```
// action: tests/view/1 (viewing test 1, and all related questions)
// create a link containing the ID of the current test as a param
<?php echo $this->Html->link('Add Question to Test', 
                                          array('controller'=>'questions',
                                                'action' => 'add_question',
                                                $test['Test']['id'])
                             );
?> 
```

所以 - 假设你可以访问`id`current `test`，你可以将它作为参数传递给你的`questions`控制器（有几种方法可以做到这一点）。

然后：

```
// view - questions/add_question/1
<h1>Adding A Question to Test 1</h1>
<?php 
// create your add question form

$this->Form->input('test_id', array('type'=>'hidden', 
                                  'value' => $this->params['pass'][0])); 
// create a hidden field with the value of the first passed param (the test id) 
```

然后在你的控制器中，`test_id`已经设置好了，所以当你保存问题时，它会与适当的`test_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:21:43.133

如果您想将此应用到使用 cake bake 生成的所有 CakePHP 项目，您可以对 CakePHP 核心进行一些小的更改以启用此功能，如下所示： [https ://github.com/srs81/cakephp/commit/ 7d92c8f676c79185fa6a74ab2070f240c555a2a0](https://github.com/srs81/cakephp/commit/7d92c8f676c79185fa6a74ab2070f240c555a2a0)

基本上，这两个更改将引用模型/控制器 ID 和名称附加到“添加”操作，这在选择正确 ID 的“添加”操作中处理。

这不适用于 HABTM 模型，但应该适用于其他任何模型。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T20:32:36.317

您需要添加`var $uses = array('Question','Test');`到 questions_controller.php

# python - 将请求上下文设置为默认值

> ID：10823112
> 
> 赞同：0
> 
> 时间：2012-05-30T19:39:56.013
> 
> 标签：python, django, django-templates

在 Django 中，每当我需要访问`messages`或`user`实例时，我都需要这样做：

```
return render_to_response('news.html', {"articles": articles}, context_instance=RequestContext(request)) 
```

有没有办法使这种默认行为？这是我的 settings.py 文件的一部分：

```
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.core.context_processors.tz",
"django.contrib.messages.context_processors.messages"
) 
```

每当我想渲染模板时，我都不想指定 context_instance。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:50:51.330

如果您使用的是 Django 1.3+，则可以[`render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)改用：

> render() 与使用强制使用 RequestContext 的 context_instance 参数调用 render_to_response() 相同。

# php - 如何在 MODEL 中获取文件名以从输入表单插入数据库？

> ID：10823114
> 
> 赞同：0
> 
> 时间：2012-05-30T19:40:08.870
> 
> 标签：php, codeigniter

我是使用 CodeIgniter 的新手。如果我的问题很愚蠢，我很抱歉。
我的模型函数如下：

```
function entry_insert($fname){
$this->load->database();
$maxFileID=mysql_fetch_array(mysql_query("SELECT max(convert(substring( FileID , 1,length(FileID)-4 ) ,unsigned integer)) as val FROM docrepository"));
 // Find the maximum value of FileID
  if ($maxFileID['val']==NULL)
  {
  $temp="1.PDF";
  }
  else
  {
  //$data["FileID"]=(string)(intval(substr($row[0],0,-4))+1).".PDF"; // If there is already file 
  $temp=(string) ($maxFileID['val']+1).".PDF";
  }
   $data=array(

    'FileID'        =>$temp,
   'FileName'       =>$fname,// Not sure whether it will work---I need your suggestion
    'title'         =>$this->input->post('title'),
    'author'        =>$this->input->post('author'),
    'description'   =>$this->input->post('description'),
    'companyName'   =>$this->input->post('companyName'),
    'aircraftModel' =>$this->input->post('aircraftModel'),
    'aircraftNumber'=>$this->input->post('aircraftNumber'),
    'documentType'  =>$this->input->post('documentType'),
    'documentNumber'=>$this->input->post('documentNumber'),
    'sectionNumber' =>$this->input->post('sectionNumber'),
    'dateCreated'   =>$this->input->post('dateCreated'),
    'keywords'      =>$this->input->post('keywords'),
    'notes'         =>$this->input->post('notes')

   );
   $this->db->insert('docrepository',$data);

  } 
```

所有的数据将来自视图中的输入表单
我的目标是将原始文件名存储为数据库并将服务器中的文件上传为特定格式（FileID）。所以在这种情况下

1.  我应该将我的 do_upload() 函数放在模型中还是控制器中？
2.  我们如何在视图中获取用户上传的文件名？
3.  以及我们如何将 FileID 作为新文件名发送，以便 do_upload 函数可以将文件上传到服务器？

我会很感激任何带有示例代码的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:55:40.670

> 我应该将我的 do_upload() 函数放在模型中还是控制器中？

模型是与数据库一起工作的，所以我在这个中使用控制器。

> 我们如何在视图中获取用户上传的文件名？

好吧，$_FILES 是 PHP 原生的，可以在您的控制器中访问。您还可以查看[Upload 类](http://codeigniter.com/user_guide/libraries/file_uploading.html)。该类具有`data()`返回有关文件的所有信息的功能。

```
//sample result of $this->upload->data()
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

> 以及我们如何将 FileID 作为新文件名发送，以便 do_upload 函数可以将文件上传到服务器？

在模型中创建一个返回新名称的函数，并在启动上传类之前设置它，例如：

```
//function save in the controller
function save() {
  $fname = $_FILES["input_upload"]["name"];
  $name = $this->model->getNewFileName($fname);
  $config["file_name"] = $name; //this replaces the name of the file on upload
  $this->load->library('upload', $config);
  if( $this->upload->do_upload() ) {
    $this->model->save();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:48:17.573

您想在控制器中进行上传。您可以获取文件名作为 POST 变量并将其发送到模型。

```
$this->load->model('model_name');
$this->model_name->saveFile($_POST['fileName']; 
```

不要忘记清理数据等。希望这可以帮助。我不太明白你说的#3是什么意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:03:21.103

在您看来：

```
echo form_open('your_controller/controller_function'); 
```

例子：

```
echo form_open('userfiles/saveform'); 
```

然后，在您的控制器中：

```
public function saveform() 
{
    if($this->userfiles_model->entry_insert())
    {
        $this->load->view('your_view', $array);
    }
} 
```

并且，`entry_insert`将是您模型中的一个函数，它可能会或可能不会调用`do_upload`它也在您的模型中。

**编辑：**我的理解是控制器只是视图和模型之间的“流量控制器”。任何上传或数据库保存都应该进入模型。控制器用于：

1.  从模型中检索信息并将该信息发送到视图
2.  从视图中显示的表单向模型发送信息

# facebook - Facebook 应用程序的 Google Analytics - 使用 http:// 或 https://

> ID：10823117
> 
> 赞同：1
> 
> 时间：2012-05-30T19:40:23.163
> 
> 标签：facebook, google-analytics

我正在将分析放在 facebook 应用程序上，但我不确定协议是什么。

**这是分析设置的屏幕截图** ![在此处输入图像描述](../Images/35092efc9aeb25c9071cd448090cf849.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:59:27.987

Facebook 现在要求所有应用程序都使用 https，因此我认为没有任何理由不将 https 用于您的分析脚本。

但是，如果您使用无协议 url，您的浏览器会为您解决问题。例如

```
<script type='text/javascript' src='//www.google.com/yourscript.js'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:56:20.490

一般来说，我更喜欢https。不知道 google 用它做什么，但 https 是共享应用程序及其内容的最佳方式。如果您在 facebook iframe 选项卡中运行您的应用程序，则您的应用程序必须可以通过 https 访问。这意味着内容也通过 https 共享（因为 FB 将通过用户隐私设置（http 或 https）调用您的应用程序）。因此，我所有的应用程序及其共享 URL 都设置为 https，以便点赞数等相同，并且无论是否通过 FB 调用都可以访问。因此，我更喜欢 https 方式。

# java - 使用带有对象的 GSON 打印 JSON 对象

> ID：10823118
> 
> 赞同：5
> 
> 时间：2012-05-30T19:40:26.950
> 
> 标签：java, json, gson

阅读文档后，关于 GSON 的快速问题。这就是我对 JSON 的看法：

```
var json = { 
     id: "person1", 
     name: "person 1", 
     data: {"email": "1@test.com"},
     children: [{
                    id: "person2",
                    name: "person 2",
                    data: {"email": "2@test.com"},
                    children: []
                },{
                    id: "person3",
                    name: "person 3",
                    data: {"email": "3@test.com"},
                    children: []
                }
                ] 
} 
```

1) 我可以在不使用 Java 中的 Class 对象的情况下使用 GSON 吗？这可以使用 GSON 和 Java 轻松完成吗？意味着我可以做类似的事情

```
GSON gson = new GSON();
gson.toJson("name", "person 1"); 
```

2）当我使用这个例子时：

```
 Gson gson = new Gson();
            Person p = new Contact(rs.getString("name"));
            gson.toJson(p);
            String json = gson.toString();
            System.out.println(json); 
```

我的 Json 输出不是我所期望的。该 Person 实例是一个公共类实例，只有一个属性 - 名称（用于测试目的）。为什么我会在输出中看到基本上是 Factory、serializeNulls 等？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T04:02:53.073

替换这个：

```
gson.toJson(p);
String json = gson.toString(); 
```

有了这个：

```
String json = gson.toJson(p); 
```

# java - Java WS 仅在打开 tcp/ip 监视器时响应

> ID：10823119
> 
> 赞同：0
> 
> 时间：2012-05-30T19:40:31.317
> 
> 标签：java, eclipse, web-services, soap, jax-ws

创建了一个非常基本的 WS。我有 LoggingHandler、Test、TestImpl 和 TestPublisher。我的发布者在下面创建我的端点：

```
import javax.xml.ws.Endpoint;
public class TestPublisher {
public static void main(String[] args) {
LoggingHandler handle = new LoggingHandler();
Endpoint ep = Endpoint.publish( "http://localhost:8060/message/hello",
    new TestImpl() );
ep.getBindings().getHandlerChain().add( new LoggingHandler() );
System.out.print( handle.toString() );
}
} 
```

我的测试接口使用@WebService & @WebMethod 并且只执行“String getHello(String str);” 我的 TestImpl 实现了 Test 并使用了 @WebService(endpointInterface="my package location") 并且只有一个方法 "public String getHelloWorld(String str){ return "Hello" + str; } 我的处理程序有 handleMessage、handleFault 和 close。我也可以把这段代码放上去，但我认为这不会有帮助。

当我在同一台（开发）RH6 电脑上访问 localhost:port/message/hello 时，效果很好！我得到“你好*我的名字*”。我什至可以在 localhost:port/message/hello?wsdl 获得一个 wsdl 文件

当我尝试从*任何*其他 PC、Linux 或 Windows 访问时，我收到超时或“无法显示网页”错误。所以我在 Eclipse 中设置了 tcp/ip 监视器来监视和路由从端口 8061（新端口）到我的 WS 端口 [here][link3] 的流量，而无需更改任何代码。

结果：我仍然无法从任何其他电脑访问 8060，除了运行服务（开发）的电脑。所以我将我的浏览器指向另一台电脑的端口 8061（tcp/ip 监视器），它成功返回了我的消息！我需要运行监视器来转发到我的 java web 服务吗？

在我的 RH6 机器上，我没有运行防火墙或 Web 服务器，我在我的工作网络上。我可以在不使用 tcp/ip 监视器的情况下成功启动 tomcat6 并从其他 pc 进入 8080。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:16:43.000

使用您机器的 IP 地址尝试 Endpoint.publish，

例如：Endpoint.publish("http://192.168.0.1:8060/message/hello")

# python - 使用 mpylayer 顺序播放视频文件

> ID：10823120
> 
> 赞同：0
> 
> 时间：2012-05-30T19:40:34.157
> 
> 标签：python, mplayer

考虑以下使用[mpylayer](http://code.google.com/p/mpylayer/)的最小工作示例：

```
import mpylayer

mp = mpylayer.MPlayerControl()

files = ['/tmp/video1.mp4','/tmp/video2.mp4']
for i in range (0,2):
    mp.loadfile(files[i]) 
```

这应该播放所有的，`video1.mp4` 然后它应该打开`video2.mp4`并播放这个。但是有两个问题：

1.  它不会播放所有`video1.mp4`它*只是打开它一秒钟然后关闭它*。
2.  关闭后`video2.mp4`有几秒钟的*延迟，直到它开始播放*`video2.mp4`

那么我该如何解决这两个问题呢？

**编辑：**

为了解决我尝试使用的第一个问题，`time.sleep(mp.length)`即

```
import mpylayer
import time

mp = mpylayer.MPlayerControl()

files = ['/tmp/video1.mp4','/tmp/video2.mp4']
for i in range (0,2):
    mp.loadfile(files[i])
    time.sleep(mp.length) 
```

这适用于我不暂停视频、向前或向后搜索或关闭它的情况。所以必须有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:57:44.627

我猜 mp.loadfile() 是[异步](http://en.wikipedia.org/wiki/Asynchronous_method_invocation)的，这意味着您的程序不会停止并等待您的视频完成播放，然后再继续执行。这可能会解释为什么您的第一个视频在第二个视频加载之前会短暂打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T07:52:55.870

您可以使用[mfind](https://github.com/k1-hedayati/mfind)一个简单的 mplayer 播放列表制作工具

> 使用 mplayer 播放“定位”或“查找”输出中的所有文件和/或文件夹中的所有媒体文件。启发形式“播放文件夹中的所有文件”在“KMPlayer”和“Everything”快速搜索和合并此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T08:23:24.970

为什么不添加一个虚拟输入行。在你按下回车之前程序不会继续（我有一段时间没有编写 Python 代码）但是

```
import mpylayer
import time

mp = mpylayer.MPlayerControl()

files = ['/tmp/video1.mp4','/tmp/video2.mp4']
for i in range (0,2):
    mp.loadfile(files[i])
    dummy = input() // When user presses any button, you continue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:36:42.873

我不知道这是否是一个聪明的解决方案，但至少乍一看似乎对这两个问题都有效：

```
import mpylayer
import time

mp = mpylayer.MPlayerControl()

files = ['/tmp/video1.mp4','/tmp/video2.mp4']
for i in range (0,2):
    mp.loadfile(files[i])
    l = mp.length
    while(mp.time_pos < l -1):
        time.sleep(1) 
```

**编辑：**

```
import mpylayer
import time

mp = mpylayer.MPlayerControl()

files = ['/tmp/test1.mp4','/tmp/test2.mp4']

for i in range (0,len(files)):
    mp.loadfile(files[i])
    #mp.fullscreen=1
    while(mp.length == None):{} #Prevents that mp.length is None
    l = mp.length
    while(mp.time_pos != None and mp.time_pos < l):
        pos = mp.time_pos 
```

这是延迟较小，但是在向前搜索时会出现问题。然后`mp.time_pos`变成`None`并且循环退出。

如果有人有更好的建议，请告诉我。

# postgresql - 在 Postgresql 中分组 LIMIT 10

> ID：10823121
> 
> 赞同：2
> 
> 时间：2012-05-30T19:40:44.190
> 
> 标签：postgresql, limit

我有一个查询：

```
select
    a.kli,
    b.term_desc,
    count(distinct(a.adic)) as count,
    a.partner_id

from
    ad_delivery.sgmt_kli_adic a
    join wand.wandterms b on a.kli = b.term_code
    join wand.wandterms c on b.term_desc=c.term_desc
    join dwh.sgmt_clients e on a.partner_id::varchar = e.partner_id
    join dwh.schema_names f on e.partner_id::integer = f.partner_id::integer
where
    a.partner_id::integer in (f.partner_id)
    and c.class_code = 969
group by a.partner_id, b.term_desc, a.kli
order by partner_id, count desc; 
```

这会带回每个 partner_id 的某些条款的计数。我希望能够按计数 desc 的顺序显示每个 ~40 partner_id 的前 10

查询结果看起来像

> ```
> db=# SELECT * FROM xxx;
>  pid | term_desc | count
> ----+------------+------
>   4 | termdesc1  | 3434
>   4 | termdesc2  | 235
>   4 | termdesc3  | 367
>   4 | termdesc4  | 4533
>   5 | termdesc1  | 235
>   5 | termdesc2  | 567
>   5 | termdesc3  | 344
>   5 | termdesc4  | 56
> (10k+ rows) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:50:25.417

您可以添加一个排名列，然后按排名过滤结果：

```
select
    a.kli,
    b.term_desc,
    count(distinct(a.adic)) as count,
    a.partner_id,
    RANK() OVER (PARTITION BY a.partner_id order by a.partner_id DESC) AS r
from
    ad_delivery.sgmt_kli_adic a
    join wand.wandterms b on a.kli = b.term_code
    join wand.wandterms c on b.term_desc=c.term_desc
    join dwh.sgmt_clients e on a.partner_id::varchar = e.partner_id
    join dwh.schema_names f on e.partner_id::integer = f.partner_id::integer
where
    a.partner_id::integer in (f.partner_id)
    and c.class_code = 969
group by a.partner_id, b.term_desc, a.kli
HAVING r < 11
order by partner_id, count desc; 
```

我没有测试过代码，但是诀窍是对每一行进行排序`GROUP BY`并使用子句过滤结果集`HAVING`，只保留排名低于 11 的项目（每组将获得 10 个项目）。

# ruby - 修改 .rb 脚本测试用例以点击 DownKey

> ID：10823122
> 
> 赞同：0
> 
> 时间：2012-05-30T19:40:51.493
> 
> 标签：ruby, selenium, webdriver

我有一个由 selenium 生成的 ruby​​ 测试用例，我正在使用 WebDriver 运行测试用例。在某些时候，我必须从动态生成的列表中挑选出一个用户，而我的用户始终是我列表中的第一项。如何按 DownKey 从我的列表中选择用户？有没有可能？我已经在网上搜索了大约两天，但没有运气

这是代码

. . .

@driver.find_element(:id, "email").send_keys "xxxxxx@xxxxx.com"

@driver.find_element(:id, "pass").clear

@driver.find_element(:id, "pass").send_keys "123456\n"

@driver.find_element(:id, "fb_friend").clear

@driver.find_element(:id, "fb_friend").send_keys "Ryan Wolf"

. >>>>这是生成我的列表的地方，我必须通过向下并按回车键从列表中提取第一个名字<<<<<<

. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:43:20.947

你可以这样做箭头

```
@driver.find_element(:id, "fb_friend").send_keys [:arrow_down] 
```

更多选项在[这里](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Keys.html#KEYS-constant)

# python - 代码更改以支持 python2.x 和 beautifulsoup3.x

> ID：10823127
> 
> 赞同：0
> 
> 时间：2012-05-30T19:41:11.917
> 
> 标签：python, beautifulsoup

我希望更改以下代码，以便在 python2.x 和 beautifulsoup3.x 上运行它

```
import requests
import BeautifulSoup

session = requests.session()

pages = []

req = session.get('webpage')

content = req.content.split("</html>")

for page in content[:-1]:
    doc = BeautifulSoup.BeautifulSoup(page)

    name = doc.find('table', id='table2').find('table').findAll('td')[3].text
    print name

    tables = doc.findAll('table', id="conn")
    target_table = None
    for table in tables:
        try:
            title = table.find('thead').find('td').text
        except:
            title = None
        if title == 'ESME  DETAILS':
            target_table = table
            break
    if target_table:
        esme_trs = target_table.find('tbody').findAll('tr')
        for tr in esme_trs:
            print "\t", tr.find('td').text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:59:24.197

设置时`requests`，将默认 Python 安装设置为 Py2.x 或`requests`通过源代码安装，而不是仅仅运行，`python setup.py install`而是运行`/path/to/python2.x setup.py install`将其安装到 2.x 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:06:49.067

问题是`requests`在python2.X安装中没有安装，只针对python3.X

`requests`不是标准库所以它没有随python一起安装，所以你需要手动安装它。

请参阅[请求网站](http://docs.python-requests.org/en/latest/user/install/#install)上的说明以了解如何安装它。

# objective-c - Need to convert custom timestamp to different format in Objective-C iOS

> ID：10823129
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:41:30.667
> 
> 标签：objective-c, ios, datetime, date, nsdateformatter

I have a string "2012-06-04" and am having a hard time converting it to: **June 4, 2012**.

Is there a quick way to transform this? I come from a ruby world where you would convert everything to seconds and that back out to the format you need it. Is there a reference that shows how to do that?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:53:20.163

One way to do so is to convert the string to an NSDate using the [NSDateFormatter](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDateFormatter) with the 2012-06-04 format, and then convert the NSDate back to a string using the June 4, 2012 format:

```
NSString* input = @"2012-06-04";

NSDateFormatter* df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd"];
NSDate* date = [df dateFromString:input];
[df setDateFormat:@"MMMM d, yyyy"];

return [df stringFromDate:date]; 
```

The format string's syntax is described in [UTS #35](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:51:51.063

Something like

```
NSDateFormatter *fromDateFormatter = [[NSDateFormatter alloc] init];
fromDateFormatter.dateFormat = @"yyyy-MM-dd";

NSDate *date = [fromDateFormatter dateFromString:@"2012-06-04"];

NSLog(@"%@", date);

NSDateFormatter *toDateFormatter = [[NSDateFormatter alloc] init];
toDateFormatter.dateFormat = @"MMMM d, yyyy";

NSString *toDate = [toDateFormatter stringFromDate:date];

NSLog(@"%@", toDate);

#=> 2012-05-30 20:51:12.205 Untitled[1029:707] 2012-06-03 23:00:00 +0000
#=> 2012-05-30 20:51:12.206 Untitled[1029:707] June 4, 2012 
```

To work this out you can use Apple's class references [NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html) and other sources like this [IPHONE NSDATEFORMATTER DATE FORMATTING TABLE](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/) and some trial and error

# javascript - .gexf - 格式节点图可视化

> ID：10823134
> 
> 赞同：0
> 
> 时间：2012-05-30T19:41:47.620
> 
> 标签：javascript, sigma.js

要可视化节点图[，Sigma.js](http://sigmajs.org)看起来很棒。我尝试了一些示例，但无法显示我的图表。我使用示例代码并尝试插入我的 .gexf 文件，但没有显示任何内容。这是我从[Sigma.js 示例](http://sigmajs.org/examples/gexf_example.html)中得到的：

```
function init() {
  // Instanciate sigma.js and customize rendering :
  var sigInst = sigma.init(document.getElementById('sigma-example')).drawingProperties({
    defaultLabelColor: '#fff',
    defaultLabelSize: 14,
    defaultLabelBGColor: '#fff',
    defaultLabelHoverColor: '#000',
    labelThreshold: 6,
    defaultEdgeType: 'curve'
  }).graphProperties({
    minNodeSize: 0.5,
    maxNodeSize: 5,
    minEdgeSize: 1,
    maxEdgeSize: 1
  }).mouseProperties({
    maxRatio: 32
  });

  // Parse a GEXF encoded file to fill the graph
  // (requires "sigma.parseGexf.js" to be included)
  sigInst.parseGexf('donornet.gexf');

  // Draw the graph :
  sigInst.draw();
}

if (document.addEventListener) {
  document.addEventListener("DOMContentLoaded", init, false);
} else {
  window.onload = init;
} 
```

我用自己的donornet.gexf 文件替换了.gexf 文件并将其保存为donornet.js。然后我使用了这个[例子](http://neosigma.herokuapp.com/index.html)中的代码（来自[Max De Marzi](http://maxdemarzi.com/2012/04/12/using-sigma-js-with-neo4j/)），我用我的donornet.js 文件替换了它：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Donornet and Sigma.js Example</title>
    <script type="text/javascript" src="sigma.min.js"></script>
    <script type="text/javascript" src="sigma.parseGexf.js"></script>
    <script type="text/javascript" src="sigma.forceatlas2.js"></script>
    <link type="text/css" rel="stylesheet" href="neo_sigma.css"/>
  </head>
  <body>
    <h1>Donornet and Sigma.js Example</h1>
        <div class="buttons-container">
        <button class="btn" id="stop-layout">Stop Layout</button>
        <button class="btn" id="rescale-graph">Rescale Graph</button>
    </div>
        <div class="span12 sigma-parent" id="sigma-example-parent">
    <div class="sigma-expand" id="sigma-example"></div>
    </div>
    <script type="text/javascript" src="donornet.js"></script>
  </body>
</html> 
```

所有文件都在同一个文件夹中。parseGexf.js 与donornet.js 和donornet.gexf 在同一个文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:41:16.693

您不必将 .gexf 文件另存为 .js 文件。只需将其保留为 gexf 文件并将其上传到脚本的文件夹中即可。删除带有`<script src="donornet.js">`. 尝试再次运行。如果它不起作用，还删除按钮 div。查看[http://noduslabs.com/socialplayer/smmrussia/上的来源](http://noduslabs.com/socialplayer/smmrussia/)

# jquery - 在 jQuery 调用中获取全局变量的新副本

> ID：10823135
> 
> 赞同：0
> 
> 时间：2012-05-30T19:41:50.760
> 
> 标签：jquery, variables

尝试使用变量编辑 ID，并且每次都会为变量调用相同的值，即使变量正在更改：

好的，我正在乱用代码从一个部分拖放到另一个部分，它将在放置部分（克隆/追加）中放置原始副本的克隆副本。如果单击它，它将克隆/附加一个包含表单的 div 部分。我想将表单 ID 更改为唯一的，方法是将其更改为静态字符串 + 变量。完成克隆后，它应该增加变量，以便下次制作不同的副本时，它将获得一个新的表单 ID。

似乎正在发生的是，它在代码第一次运行时工作得很好，它获取变量并将其附加到静态字符串，但是当它被第二次调用以进行新克隆时，而不是获取当前值全局变量，它使用与上次相同的值。所以第一次调用会导致 RSS0，第二次调用也会导致 RSS0，即使 formID 变量现在为 1 - 我预计它会是 RSS1，但我很困惑为什么它不是。

变量正在正确更新，因为我使用 chrome 的检查元素（脚本选项卡，监视表达式）工具跟踪了这一点，并且当我对正在克隆的不同对象进行不同调用时，它采用全局变量的当前值 - 第一个调用，然后它做同样的事情，并在第一次调用时“卡”在其初始值上。

我尝试直接通过javascript而不是使用jQuery来更改ID，第一次它正常工作，第二次第二个克隆与第一个克隆具有相同的ID，它“正确”更改了ORIGINAL - 我是为此做一个 getElementById，然后拉起第一个匹配项（原始匹配项列在页面底部附近）以更改 ID。

好的，现在我已经解释了我正在尝试做的事情以及似乎实际发生的事情，让我提出我的代码，也许有人可以告诉我如何解决这个问题，以便每个表单都有一个唯一的 id.. ..

```
var formID = 0; //used to make each form have its own unique ID

<!-- code section removed - above = global variable,
below is within some other stuff but working 'fine' -->

$(".draggable").click(function()
{
//first check if it doesn't already have #testContents, then check if it is in the copy area
if(!$(this).is(':has(.dragContents)') && $(this).parent().hasClass('copyArea'))
{
    //if it doesn't already have this and is in the correct spot, append a new copy of the appropriate type

    switch( $(this).html() ) //use the html contents of the item to determine which one to add
    {
                        case "RSS":
                            $("#RSScontents").clone().appendTo(this);
                            //document.getElementById("RSS").id = "RSS"+formID;
                            $(this).find("#RSS").attr("id","RSS"+formID);
                            formID++;
                            break;
                        case "Advertisement":
                            $("#drag2contents").clone().appendTo(this);
                            $(this).find("#advert").attr("id","advert"+formID);
                            formID++;
                            break; 
```

以及被克隆然后修改的 div 标记，以便您可以看到我正在使用的表单：

```
<div id="RSScontents" class="dragContents" style="width:380px; padding-left:2px; margin:5px;">
This is the RSS information section
<form id="RSS" method="post">
    RSS Feed URL: <input type="text" name="rssFeedURL" size=35 /><br />
    RSS Feed Title: <input type="text" name="rssFeedTitle" size=35 /><br />
    <input type=button name="rsssave" value="Save"><input type=button name="rssdelete" class="delete" value="Delete">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:42:03.503

尝试改变

```
$(this).find("#RSS").attr("id","RSS"+formID); 
```

至

```
if (formID == 0) {
    $(this).find("#RSS").attr("id","RSS"+formID);
}
else {
$(this).find("#RSS"+(formID - 1)).attr("id","RSS"+formID);
} 
```

〜林海德利

实际修复：

```
if (formID == 0) {
    $(this).find("#RSS").attr("id","RSS"+formID);
}
else {
$(this).find("#RSS0").attr("id","RSS"+formID);
} 
```

因为在原件被克隆后出于某种原因，它一直在克隆第一个克隆（已更改为 RSS0）...不过不要问我为什么~Adarajin

# javascript - IE 在 javascript 中使用 //@ 做什么？

> ID：10823136
> 
> 赞同：11
> 
> 时间：2012-05-30T19:41:51.307
> 
> 标签：javascript, internet-explorer, activex

因此，一段 javascript 中的错误围绕着类似于以下的代码：

```
<script>
    (function() {
        if (true) {
            //@todo: do we need to set total or -- ?
            alert('hello?');
        }
    })();
</script> 
```

在更大的系统中，IE 抱怨“预期 ';' ”。在小规模示例中，IE 只是导致了有关阻止 ActiveX 控件的警告。

显然，“//@”对 IE 中的 activeX 控件有一些上下文。我找不到这个，因为搜索符号是没有用的，并且任何关于 IE 中特殊注释的搜索都会导致条件 html 注释。我只是好奇应该如何在 IE 中使用 //@。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:46:23.473

IE JScript 引擎支持[条件注释](http://en.wikipedia.org/wiki/Conditional_comment#Conditional_comments_in_JScript)，它将以特定方式编写的注释转换为代码（部分）。但是，您没有使用这些。

在您的情况下，这似乎是一种告诉例如 IDE 存在 TODO 项的方法。你得到的错误很可能是无关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:46:02.563

除非有一些我不知道的关于 IE 的怪癖，否则`//@todo`只是评论一些程序员在他们太懒/不知道如何实现某些东西时使用的绒毛。

# python - 执行 MSSQL 语句时出现 Python 线程错误

> ID：10823142
> 
> 赞同：1
> 
> 时间：2012-05-30T19:42:23.737
> 
> 标签：python, sql-server, multithreading

我有一个生产者、消费者应用程序，生产者在其中读取数据库并将结果放入网站。成功后，消费者然后获取事务的 id 并更新数据库。

该程序将根据需要运行，直到它尝试执行更新。它有时会失败并出现此错误“HY000”、“驱动程序未提供错误！”

该代码可以轻松地写入文件而没有任何问题。

我能做些什么来解决这个问题？我们需要更新数据库。

感谢笔记...在 mssql 2008 上使用 python 2.7 和 pyodbc。

下面的代码

```
 #!/usr/bin/env python

    from urlparse import urlparse
    from threading import Thread
    import httplib, sys
    import Queue
    import urllib2
    import urllib
    from time import localtime, strftime
    from ConfigParser import SafeConfigParser
    from functions import Functions
    from pyodbcclass import db_mssql

    now = strftime("%y-%m-%d-%H%M%S", localtime())
    k = db_mssql()

    thread_list = []
    thread_list2 = []
    getFromDBQueue = Queue.Queue()
    updateDBQueue = Queue.Queue()
    number_of_consumer_threads = 3

    def putURL():
        querySql = "select distinct top 3 id,url from tblURL where processed=0  order by id asc"

        re = k.query2(querySql)
        if re:

            for r in re:
                id = r.id
                params = urllib.urlencode({'user': user, 'password': password})
                ourl = urlini + "?%s" % params
                urlplusid = {'url':ourl.strip(),'id':id}
                getFromDBQueue.put(urlplusid)

    def getURL(thread_id):
        while 1:
            try:
                URL_toget = getFromDBQueue.get(block=False)
                url2 = URL_toget['url']
                msgid2 = URL_toget['id']
            except Queue.Empty:
                print "thread exiting, id: " + str(thread_id) + "++getFromDB++"
                sys.exit()
            status,url = getStatus(url2)
            if status == 200:
                updateDBQueue.put(msgid2)

            print(status)

    def updateDB(thread_id):
        while 1:
            try:

                id2 = updateDBQueue.get(block=False)
                if id2:
                    params = ['true',id2]
                    sqlupdate = "UPDATE tblURL SET processed=? WHERE id=?"
                    k.execute3(sqlupdate,params)

            except Queue.Empty:
                print "thread exiting, id: " + str(thread_id) + "**update**"
                sys.exit()

    # fill the queue with work and block until we are done filling the queue

    producer_thread = Thread(target=putURL)
    producer_thread.start()
    producer_thread.join()

    # we can now start consumers

    for i in range(number_of_consumer_threads):
        getfromDB = Thread(target=getURL, args=(i,))
        getfromDB.start()
        thread_list.append(getfromDB)

    for i in range(number_of_consumer_threads):
        update = Thread(target=updateDB, args=(i,))
        update.start()
        thread_list2.append(update)

    for thread in thread_list:
        thread.join()

    for thread2 in thread_list2:
        thread2.join() 
```

# jquery - jQuery是否禁用/启用了javascript？

> ID：10823143
> 
> 赞同：0
> 
> 时间：2012-05-30T19:42:28.027
> 
> 标签：jquery

我正在[看这个视频教程](http://tutsplus.com/lesson/slides-and-structure/)，我注意到他说他添加了这个：

`$('html').addClass('js');`

他说如果javascript被禁用，那么这个类就不会显示，但是如果它被启用，这个类就会显示出来。我不明白这是怎么回事。jQuery 如何知道 JS 是否启用，以及在启用/禁用 JS 时应用某个类？没有 if 语句。我有点困惑。

“如果 HTML 有一个 JS 类，则 javascript 可用，如果没有，则 JS 不可用”。我不明白。

他还提到了“JavaScript 钩子”..？

从 2:30 到 3:40 观看，这是他解释的地方，但我不明白。

谢谢！

**编辑：我不敢相信答案如此简单，我没有看到它。多谢你们。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:44:05.733

jQuery*是*JavaScript。它是一个用 JavaScript 编写的有用代码库。如果 JavaScript 被禁用，jQuery 也会被禁用，因此您不会看到“js”类出现。这不是您在工作场所进行的那种测试。它更多的是出于学习目的的演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:44:06.657

jQuery 是一个 javascript 库，所以如果没有启用 javascript，jQuery 代码将不会被执行，也不会添加类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:44:15.637

jQuery 是用 JavaScript 编写的，当 JS 被禁用时不会执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:52:15.643

在这里你可以看到这条线

```
$('html').addClass('js'); 
```

在里面`<script> </script>`。

仅当切换 javascript 时才会执行此操作，否则不会添加该类，并且用户查看为没有 javascript 的用户设计的正常内容。

顺便说一句，我遵循了所有的 Jeffrey Ways tuts。他们很酷。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T19:44:38.560

如果未启用 JavaSCript，则不会运行 JavaScript，因此也不会运行 jQuery。该行`$('html').addClass('js');`仅在有 JavaScript 时显示，因为那时该行将运行并将类添加到 HTML 标记。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T19:45:29.230

如果启用了 javascript 并加载了 jquery，则

```
$('html').addClass('js'); 
```

此代码块将运行，并将`js`向 html 元素添加一个类。

如果 javascript 被禁用，jQuery 将不会运行，因为 jQuery 是一个 javascript 库并且不会添加任何类。

# regex - 是否有典型的移动用户代理正则表达式模式？

> ID：10823144
> 
> 赞同：7
> 
> 时间：2012-05-30T19:42:32.427
> 
> 标签：regex, mobile, user-agent

用于检测移动用户代理的正则表达式模式管中有无穷无尽的示例，甚至在此处的答案中也有不少。您是否知道可能最广泛使用和支持的一个（已更新，可能在 Git 存储库中）？最终，一切都会有一个`It's dangerous to go alone! Take this.`版本（例如，Eric Meyer等人[的浏览器重置 CSS ），所以也许也有这个版本。](https://stackoverflow.com/questions/116754/best-css-reset)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:48:55.590

[detectmobilebrowsers.com](http://detectmobilebrowsers.com/)提供了这个解决方案（对于 JS）：

```
(function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))window.location=b})(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile'); 
```

嗯，是的，很复杂。

如果您想使用另一种语言，只需前往该网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T08:00:33.377

免责声明：我知道这个正则表达式并不完美/典型，所以不要仅仅为此投票:)

只是想分享这几点。

1.  某些服务器未设置**$_SERVER['HTTP_USER_AGENT']**，因此请务必先检查是否为空
2.  可读性对我们很重要，所以我们使用它而不是其他复杂的正则表达式。只需**添加**您认为合适的其他设备。

这是我们使用的代码：

```
<?php
if(! empty($_SERVER['HTTP_USER_AGENT'])){
    $useragent = $_SERVER['HTTP_USER_AGENT'];
    if( preg_match('@(iPad|iPod|iPhone|Android|BlackBerry|SymbianOS|SCH-M\d+|Opera Mini|Windows CE|Nokia|SonyEricsson|webOS|PalmOS)@', $useragent) ){
        header('Location: ./mobile/');
    }
}
?> 
```

# java - 避免从自身内部的 XSL 文件创建输出文件

> ID：10823145
> 
> 赞同：0
> 
> 时间：2012-05-30T19:42:45.593
> 
> 标签：java, xml, xslt, runtime

假设我想从许多具有以下格式的 xml 中编写文本输出。其中一些 xml 文件可能没有节点 [name , age , school] 的值。

* * *

<学生>

<name>迪鲁克</name>

<年龄/>

<学校>abc</学校>

</学生>

* * *

所有这些 xml 文件都位于一个目录中，我遍历它们以生成每个 xml 的输出文件。

所以基本上我正在使用一个 xsl 文件 iu 并尝试通过考虑这些类似格式的 xml 文件 [具有不同节点值] 来生成输出。

但我只需要将相应的输出写入具有一定条件的xml文件。[假设有一个名称，因为某些 xml 文件不包含名称值]。

因此，如果我有 5 个要转换的 xml 文件并且其中只有 3 个文件具有非空名称值，我只想生成其中的 3 个输出文件。

我更喜欢 XSL 方面的解决方案，我知道这是最不可能的，但是如果我们可以在不读取输出文件的内容并删除它们或根据 java 端的大小 [0kB] 删除它们的情况下做到这一点，它也真的很有帮助。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:48:48.047

在 XSLT 1.0 中，如果没有特定于供应商的扩展，就不可能在样式表级别生成多个输出。根据您使用的 XSLT 1.0 引擎，有一些扩展可以启用多个输出，我在下面放置了一些链接。作为替代方案，您可以考虑让您的客户多次调用样式表，每个输入文件一次。

至于 XSLT 2.0，我将采取的方法是：

1.  向样式表提供一个以空格分隔的输入文件名列表作为参数。
2.  对于文件名，将其作为文档打开
3.  对于每个具有名称节点的文件，使用 xsl:result-document 和模板复制到文件名基于输入文件名的输出文件。

例如样式表 (XSLT 2.0)，请参阅：

*   [http://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html](http://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html)
*   [使用 XSLT 输出多个文件](https://stackoverflow.com/questions/1122077/using-xslt-to-output-multiple-files)

对于 XSLT 1.0，Microsoft 案例，请参阅：

*   [http://msdn.microsoft.com/en-us/library/ms950784.aspx](http://msdn.microsoft.com/en-us/library/ms950784.aspx)（向下滚动到示例：发票处理）

对于 XSLT 1.0、XALAN 案例，请参见：

*   [http://www.abbeyworkshop.com/howto/xslt/xslt_split/index.html](http://www.abbeyworkshop.com/howto/xslt/xslt_split/index.html)；或者
*   [http://www.stylusstudio.com/xsllist/200108/post50930.html](http://www.stylusstudio.com/xsllist/200108/post50930.html)

另请参阅相关问题：

*   [XSLT 拆分输出文件 - muenchian 分组](https://stackoverflow.com/questions/4169961/xslt-split-output-files-muenchian-grouping)

# linux - 在一列文件中搜索和替换空和点

> ID：10823147
> 
> 赞同：2
> 
> 时间：2012-05-30T19:42:56.027
> 
> 标签：linux, sed, awk

我想使用`awk`or搜索和替换文件列中的空值和点`sed`。

该文件的内容是：

```
02-01-12 28.46
02-02-12 27.15
02-03-12 
02-04-12 27.36
02-05-12 47.57
02-06-12 27.01
02-07-12 27.41
02-08-12 27.27
02-09-12 27.39
02-10-12 .
02-11-12 27.44
02-12-12 49.93
02-13-12 26.99
02-14-12 27.47
02-15-12 27.21
02-16-12 27.48
02-17-12 27.66
02-18-12 27.15
02-19-12 51.74
02-20-12 27.37 
```

点和空值可以出现在文件的任何行中，我想用上面的值替换空和点，比如，

```
02-01-12 28.46
02-02-12 27.15
02-03-12 27.15     ****** replace with the above value
02-04-12 27.36
02-05-12 47.57
02-06-12 27.01
02-07-12 27.41
02-08-12 27.27
02-09-12 27.39
02-10-12 27.39     ****** replace with the above value
02-11-12 27.44
02-12-12 49.93
02-13-12 26.99
02-14-12 27.47
02-15-12 27.21
02-16-12 27.48
02-17-12 27.66
02-18-12 27.15
02-19-12 51.74
02-20-12 27.37 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:14:09.800

这可能对您有用（GNU sed）：

```
 sed -i '$!N;s/^\(.\{9\}\(.*\)\n.\{9\}\)\.\?$/\1\2/;P;D' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:30:21.117

```
awk 'BEGIN {prev = "00.00"} NF < 2 || $2 == "." {$2 = prev} {prev = $2; print}' filename 
```

如果您有多个可能缺少数据的列：

```
awk 'BEGIN {p = "00.00"} {for (i = 1; i <= NF; i++) {if (! $i || $i == ".") {if (prev[i]) {$i = prev[i]} else {$i = p}}; prev[i] = $i}; print}' filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:51:48.470

以下 awk 脚本应该可以工作：

```
BEGIN {
    last="00.00"
}

{
    if ($2 != "" && $2 != ".") {
        last=$2
    }
    print $1 " " last
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:03:53.633

```
$ awk -v prev=00.00 'NF<2 || $2=="." { print $1, prev; next }{prev=$2}1' input-file 
```

# c# - 我正在寻找一种将这个 T-SQL 转换为 LINQ 的方法。有任何想法吗？

> ID：10823154
> 
> 赞同：0
> 
> 时间：2012-05-30T19:43:42.867
> 
> 标签：c#, sql, linq

我正在寻找一种将这个 T-SQL 转换为 LINQ 的方法。

基本上，我有一个问题表。当一个人登录时，我想动态显示每个问题，然后从答案表中提供答案，该答案表由`questionId`（如果他们以前回答过问题）捆绑在一起。

有任何想法吗？

```
SELECT q.*, a.answer
FROM Questions q LEFT OUTER JOIN Answers a
ON q.questionId = a.questionId and a.personid = @personId
WHERE a.personid = @personId OR a.personid IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:36:21.387

感谢 marc_s 和 ChrisF 的评论，因为这些是我在过去一小时内获得的唯一有价值的信息。这是我解决问题的方法。我不知道这是否是实现我的目标的最佳方式。

```
FROM q IN db.Questions 
JOIN a IN db.Answers.Where(z=>z.personId == personId) 
ON q.questionId equals a.questionId INTO qas 
FROM suba IN qas.DefaultIfEmpty() 
WHERE suba.personId == personId || suba.personId == null 
SELECT NEW { q, a = suba }; 
```

# css - CSS级联优先级混淆

> ID：10823158
> 
> 赞同：1
> 
> 时间：2012-05-30T19:44:00.323
> 
> 标签：css

我很困惑为什么[这个网站上](http://names.darkgreener.com/)`<h1>`有一个of （至少在 Chrome 中查看时）。`font-family``Helvetica`

从 Google Developer Tools 看来，字体系列似乎是从 Bootstrap CSS 的`body`规则继承而来的（参见[bootstrap.min.css](http://names.darkgreener.com/css/bootstrap.min.css)）。

[names.css](http://names.darkgreener.com/css/names.css)文件不应该优先吗？这在标签上明确设置了 a `font-family`of 。`Lobster``h1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:48:41.017

这不是选择器优先级问题：Chrome 不会接受该`inherit`属性`font-family`作为后备。删除它，您将按预期获得字体。

[标准表示](http://www.w3.org/TR/CSS21/fonts.html#font-family-prop)接受`font-family`字体列表*或*特殊值，但不接受两者`inherit`的混合。我相当肯定，如果在列表中找不到字体，它会回退到`inherit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:46:59.980

当我打开该网页时，Chrome 会在该行上给我一个黄色感叹号三角形，因此它不会处理该 CSS 字体规范。

你声明了一个`@font-face {}`？在我看来，字体没有正确安装，因为 Chrome 不知道如何处理它。

* * *

**编辑：**

删除`inherit`即可解决问题。

![在此处输入图像描述](../Images/b72cc67f833833aeaa50c71917d0b16a.png)

# apache-flex - Flex ItemRenderer - 如何判断它何时被重用？

> ID：10823169
> 
> 赞同：0
> 
> 时间：2012-05-30T19:44:30.897
> 
> 标签：apache-flex, itemrenderer, flex-spark

我在一个带有 useVirtualLayout="true" 的列表中使用 spark ItemRenderer itemRenderer 中加载了一个图像。当列表滚动时，一个新的项目进入视图 - 图像闪烁，在 itemrenderer 中简要显示上一个图像。重用itemrenderer时，如何防止闪烁？

丢弃 itemrenderer 时是否有事件？然后我可以隐藏图像或加载空白图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:56:15.477

Try this A simple way to avoid Flickering images is to give a height according to the total images to show example

if the List have vertical layout

```
myList.height = myList.dataProvider.length; 
```

if the List have horizontal layout

```
myList.width = myList.dataProvider.length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:58:43.297

这取决于您如何使用图像。我倾向于加载图像并保存它的 BitmapData ONCE！。然后就可以直接使用了，没有任何闪烁。您只需将某种 ImageRespository 注入渲染器。

这可以通过列出 DataGroup 的 rendererAdd 事件并将 repo 填充到渲染器中来轻松完成。

# api - Spotify 是否为其 Spotify“播放按钮”嵌入提供 oEmbed API 端点？

> ID：10823170
> 
> 赞同：3
> 
> 时间：2012-05-30T19:44:31.133
> 
> 标签：api, spotify, oembed

Spotify 是否为他们的 Spotify Playbutton 提供 oembed API 端点？

[https://developer.spotify.com/technologies/spotify-play-button/](https://developer.spotify.com/technologies/spotify-play-button/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-11T12:18:06.500

有点晚了，但[现在有*oEmbed*支持，是](https://twitter.com/nicklas2k/status/330094611202723840)的。

它似乎还没有记录，但[这里有一个例子](https://embed.spotify.com/oembed/?url=http://open.spotify.com/track/298gs9ATwr2rD9tGYJKlQR)：

```
{
    "height": 380, 
    "html": "<iframe src=\"https://embed.spotify.com/?uri=spotify:track:298gs9ATwr2rD9tGYJKlQR\" width=\"300\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"></iframe>", 
    "provider_name": "Spotify", 
    "provider_url": "https://www.spotify.com", 
    "thumbnail_height": 300, 
    "thumbnail_url": "https://d3rt1990lpmkn.cloudfront.net/300/35ff8ecde854e7c713dc4ffad2f31441e7bc1207", 
    "thumbnail_width": 300, 
    "title": "John De Sohn, Kristin Amparo - Dance Our Tears Away - Radio Edit", 
    "type": "rich", 
    "version": "1.0", 
    "width": 300
} 
```

和参数似乎还不受支持`theme`。`view`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T09:27:22.583

不，没有 oEmbed 支持。

我们可能可以将它添加到丰富的类型中。我会将其添加为功能请求。（我在 Spotify 工作）

我同意功能请求不适合 Stack Overflow。

# python - 关闭 Twitty Twister 流

> ID：10823175
> 
> 赞同：0
> 
> 时间：2012-05-30T19:44:48.293
> 
> 标签：python, twitter, twisted, twitter-streaming-api

我目前正在使用[twitty-twister](https://github.com/dustin/twitty-twister/)将实时 Twitter 消息流式传输到一个长时间运行的应用程序中，但是有时我需要重新启动流来更改跟踪参数。是否可以使用此库将此流与 Twitter 断开连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:00:23.880

在对这个问题进行了一些研究之后，我发现不可能“关闭”Twitter 流。

解决方案是使用以下命令在自己的进程中运行 Twitty Twister 脚本`reactor.spawnProcess`：

```
# spawnProcess requires you to implement a ProcessProtocol
class TwitterProcess(protocol.ProcessProtocol):
    def outReceived(self, data):
        print("TWITTER: ", data)

    def errReceived(self, data):
        print("TWITTER ERR: ", data)

    def processEnded(self, reason):
        print("twitter process ended.")

# later on...

args = ["python", "twitter_stream.py"] # add other args here if necessary
pp = TwitterProcess()
feedProcess = reactor.spawnProcess(pp, "python", args) 
```

然后，如果您想关闭该进程：

```
feedProcess.signalProcess("TERM") 
```

# c# - Chrome 通过在后退按钮上保留下拉列表选择来打破表单

> ID：10823177
> 
> 赞同：3
> 
> 时间：2012-05-30T19:44:59.927
> 
> 标签：c#, forms, google-chrome, drop-down-menu, back-button

页面 A 有一个运输方式的下拉列表。

用户进行选择并单击下一步。

页面 B 允许他们更改他们的送货地址，这会改变他们的送货方式。

用户单击返回按钮。

页面 A 在下拉菜单中显示了新的运输方式，但 Chrome 在顶部添加了一个空白选项并将其设为选定选项。此空白选项在视图源中不存在。

Chrome 选择在其持久的下拉列表值不再存在时插入一个幻像空白选择项，而不是尊重 selected="selected" 标记选项。

这会导致 .net 事件验证在用户尝试与表单交互时失败，因为这个空白选择不是真实的。“无效的回发或回调参数。事件验证已启用”

我在页面加载时尝试了 form.reset() ，并在表单标签上关闭了自动完成功能。有人有想法么？非常感激。

# php - PHP str_replace 在循环中

> ID：10823179
> 
> 赞同：0
> 
> 时间：2012-05-30T19:45:03.630
> 
> 标签：php, xml, string, for-loop

我有两个字符串

```
 $xml = '<para aid:pstyle="NL_FIRST">—To the best of our knowledge, the MMSN<emph aid:cstyle="ITALIC"> protocol</emph> is the first multifrequency<emph aid:cstyle="ITALIC"> MAC protocol especially</emph> designed for WSNs, in which each device is equipped with a single radio transceiver and the MAC layer packet size is very small.</para></item><item>';
  $tex = '\begin{itemize}\item o the best of our knowledge, the MMSN protocol is the first multifrequency MAC protocol especially designed for WSNs, in which each device is equipped with a single radio transceiver and the MAC layer packet size is very small.\item'; 
```

我需要找到 `<emph aid:cstyle="ITALIC"> protocol</emph>`这种标签并在其中找到相同的文本`$tex`并将单词替换`"protocol"`为`{it protocol }`.

简单地

我需要找到这个模式

```
<emph aid:cstyle="ITALIC"> protocol</emph> 
```

并找到该模式中的文本并替换 $tex 中的相同单词。

仅供参考：内容方面都相同`$tex`，并且`$xml`.

我用了这段代码

```
 preg_match_all('/<emph aid:cstyle="ITALIC">(.*?)<\/emph>(.*?)\</',$xml,$matches);

  for($i=0;$i<count($matches[1]);$i++)
   {

    $findtext = str_replace("<","",$matches[1][$i].$matches[2][$i]);    

$replace  = "{\it".$matches[1][$i]."}".$matches[2][$i];

$finaltext = preg_replace('/'.$findtext.'/',$replace,$tex);

    }

     echo $finaltext; 
```

但它只替换一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:54:28.033

您应该将您的正则表达式更改为

```
preg_match_all('/<emph aid:cstyle="ITALIC">(.+?)<\/emph>/', $xml, $matches); 
```

我在您的示例字符串上进行了尝试，并且两者都找到了。

您当前的正则表达式消耗了大部分字符串。如果您在提供的字符串上运行它，您会看到它的匹配程度超出了您的预期

```
string(71) "<emph aid:cstyle="ITALIC"> protocol</emph> is the first multifrequency<" 
```

由于下一个“<”已经匹配，匹配器找不到下一个开始标签。

对于循环部分：您没有覆盖 $tex ，而是将其用作要处理的字符串。因此，除最后一个之外的任何更改都不会被存储。

```
$finaltext = $tex;
for ($i = 0; $i <count($matches[1]); $i++) {
    $finaltext = str_replace($matches[1][$i], '{\it'.$matches[1][$i].'}', $finaltext);
}
echo $finaltext; 
```

# jquery - 无法围绕此滑块获取容器 div

> ID：10823180
> 
> 赞同：0
> 
> 时间：2012-05-30T19:45:05.377
> 
> 标签：jquery, css, jquery-ui

我已经尝试了我能想到的所有方法来在包含 div 的内容中添加一个滑块，但它不起作用。有人有想法吗？这似乎应该很简单。

[http://jsfiddle.net/thindery/LjjmC/](http://jsfiddle.net/thindery/LjjmC/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:48:48.187

这是一个工作演示：http: [//jsfiddle.net/LjjmC/1/](http://jsfiddle.net/LjjmC/1/)

您看到的问题是滑块是浮动的，因此容器 div 似乎在流中没有内容。通过在容器的末尾添加一个“清晰”的 div，浮动 div 会出现在容器 div 内。

# c# - `Task.ContinueWith`的参数的`antecedent`参数的点？

> ID：10823181
> 
> 赞同：3
> 
> 时间：2012-05-30T19:45:05.543
> 
> 标签：c#, closures, task-parallel-library

给定 a `Task t`，两者之间是否存在语义差异

```
t.ContinueWith(ante => DoSomethingWith(ante)); 
```

和

```
t.ContinueWith(ante => DoSomethingWith(t)); 
```

，假设`t`以后没有突变？

`antecedent`这个论点是否只是为了避免像第二个变体中那样分配闭包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:48:16.930

> 是否存在先行论点只是为了避免像第二个变体中那样分配闭包？

实际上，是的。它还可以让您更简洁地编写如下：

```
 Task.Factory.StartNew( () => DoSomething())
             .ContinueWith( t => DoSomethingWith(t)); 
```

它还提供了与使用`TaskFactory.ContinueWhenAll`或类似的 API `TaskFactory.ContinueWhenAny`。

# android - 使用 Android 搜索对话框搜索多个数据库列

> ID：10823186
> 
> 赞同：1
> 
> 时间：2012-05-30T19:45:54.673
> 
> 标签：android, sqlite, search, dialog

我已经让 Android 搜索对话框正常工作，但我遇到的问题是我有一个 3 列数据库表，我希望在其中搜索所有 3 列。以下方法仅对表的第 1 列执行搜索：

```
//--- GET RECORDS FOR SEARCH
public Cursor searchDB(String query) {
    String[] allColumns = new String[]{ KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 };
    return db.query(true, DB_TABLE, new String[] { KEY_ROWID,
            KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 }, KEY_COLUMN1 + " LIKE" + "'%"   + query + "%'", null, null, null, null, null);
}
//--- END Get Records for Search 
```

所以我尝试向查询中添加一个字符串数组，如下所示：

```
//--- GET RECORDS FOR SEARCH
public Cursor searchDB(String query) {
    String[] allColumns = new String[]{ KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 };
    return db.query(true, DB_TABLE, new String[] { KEY_ROWID,
            KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 }, allColumns + " LIKE" + "'%"        + query + "%'", null, null, null, null, null);
}
//--- END Get Records for Search 
```

但这会使应用程序崩溃。那么如何修改方法来搜索三列（Column1、Column2 和 Column3）呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T04:32:28.910

您可以这样做（假设您希望所有行至少匹配一列）：

```
public Cursor searchDB(String query) { 
    return db.query(true, DB_TABLE, new String[] { KEY_ROWID, KEY_COLUMN1, KEY_COLUMN2,
    KEY_COLUMN3 }, KEY_COLUMN1 + " LIKE" + "'%" + query + "%' OR " + KEY_COLUMN2 + 
    " LIKE" + "'%" + query + "%' OR " + KEY_COLUMN3 + " LIKE" + "'%" + query + "%'", 
    null, null, null, null, null); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:49:09.840

您需要通过“Null”代替“allColumns”。这将搜索该行中的所有列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:49:30.270

```
allColumns + " LIKE" + "'%"        + query + "%'" 
```

我认为你需要尝试这样的事情

```
column1 + " LIKE '%' AND "+column2        + " LIKE '%' AND " etc., 
```

注意：可能存在语法错误。它是手写的。

# itextsharp - 使用 iTextSharp 将 pdf 文件添加到现有的 pdf 集合

> ID：10823192
> 
> 赞同：0
> 
> 时间：2012-05-30T19:46:18.867
> 
> 标签：itextsharp

我有 4-5 个 PDF，每个可能有 2-3 页。然后我使用 iTextSharp 将所有 pdf 合并在一起。所以看起来像1122233444555（每组#代表一个pdf。复制代表页面）整套是新的PDF。

我们有一个要求，在 pdf 合并后，我们可能需要在 2 和 3 之间插入另一个 PDF（2 页）。我将如何在 2 的最后一页之后和 3 的第一页之前插入？所以它现在应该看起来像 1122266633444555。

我们不存储页数，所以我不想依赖传递页码。我可以在每个页面中写一些隐藏文件名并使用 itextsharp 读取隐藏信息吗？然后我可以说在 222 的最后一页之后添加 pdf 666。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:07:47.780

一种方法是使用[PdfPageLabels](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPageLabels.html)对象将第 2 页标记为进行后处理。[一些示例代码](http://kuujinbo.info/iTextSharp/markPage.aspx)。请参阅示例代码链接的第一段中的链接，了解另一种通过向文档添加隐藏字段来执行此操作的方法。

# android - Android：如何在特定页面打开 PDF 文件

> ID：10823193
> 
> 赞同：2
> 
> 时间：2012-05-30T19:46:22.130
> 
> 标签：android, pdf-viewer

我在[这里](https://stackoverflow.com/questions/2883355/how-to-render-pdf-in-android)看到了可以在 PDF 查看器中打开 PDF 文件的代码。是否可以修改代码以使 PDF 查看器在特定页面打开 PDF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:53:12.087

不可以。您无法控制第三方应用程序，除非它提供了这种可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-06T10:10:16.210

是的，您可以在 pdf 文件中打开特定页面。

首先创建一个全局变量，例如

// 给出一个默认值

```
 int pageNumber=0;

                 //     secondly create   a button in search dilaoge to find exact page in activty.
                    btn.setOnClickListner(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    int position = 1;
                    String input = String.valueOf(textSearch.getText());
                    if (input != null && !input.equals("")) {
                        position = 

                  Integer.valueOf(String.valueOf(textSearch.getText()));
                    }

                    // assign globar var pageNumber to finding position
                    pageNumber = position-1;
                    textSearch.setText("");
                    alertDialog1.dismiss();
                } 
```

// 在第三步中，只是在默认函数中传递了 pageNumber。

```
 pdfViewr.from("Your uri String ").default(pageNumber).load(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:39:34.590

Andrejs 建议我应该修改一个开源 pdf 查看器应用程序。当我对 Android 编程更有信心时，我可能会尝试这样做。与此同时，我正在遵循不同的策略。我将各个 PDF 页面的图像存储为单独的 jpg 文件，并使用 WebView / WebViewClient 来显示各个页面。这些可以缩放和平移（如在 PDF 查看器中），当我触摸页面边缘附近的屏幕时，我的应用程序很容易移动到下一页或上一页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T07:42:37.510

对于 ezpdf 阅读器：
添加`intent.putExtra("page", 110);`

但是 ezpdf 已经很老了。因此，我建议您查看我的新开源 pdf 查看器和注释器项目：

[https://github.com/KnIfER/PolyPic](https://github.com/KnIfER/PolymPic)

```
 Intent it = new Intent(Intent.ACTION_VIEW)
        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
        .putExtra("page", yourPageIndex)
        .setDataAndType(yourUri, "application/pdf");
    startActivity(it); 
```

它基于 PDFium，速度很快，甚至可以在 android 4.4 上运行良好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T20:47:36.147

打开 PDF 文件到特定页面

要将 HTML 链接定位到 PDF 文件中的特定页面，请将 #page=[page number] 添加到链接 URL 的末尾。

例如，此 HTML 标记打开名为 myfile.pdf 的 PDF 文件的第 4 页：

```
<A HREF="http://www.example.com/myfile.pdf#page=4"> 
```

# c# - 实体类序列化为 json

> ID：10823196
> 
> 赞同：0
> 
> 时间：2012-05-30T19:46:30.160
> 
> 标签：c#, json, linq, entity-framework, serialization

```
 try
        {
            using (EXAMINATIONEntities entity = new EXAMINATIONEntities())
            {
                JavaScriptSerializer serializer = new JavaScriptSerializer();
                var exams = entity.TBL_EXAMS.Where(x => x.USERID == userId);                    
                return serializer.Serialize(exams);
            }
        }
        catch (Exception ex)
        {
            return "-1";
            throw ex;
        } 
```

这段代码工作正常。但是返回一个像这样的json字符串；

[{"EXAM_ID":1,"EXAM_TEXT":"sdf","EXAM_ORDER":1,"SITUATION":true,"USERID":100,"DBDATETIME":null,"TBL_QUESTIONS":[],"EntityState" :2,"EntityKey":{"EntitySetName":"TBL_EXAMS","EntityContainerName":"EXAMINATIONEntities","EntityKeyValues":

**我只想序列化表字段：** "EXAM_ID":1,"EXAM_TEXT":"sdf","EXAM_ORDER":1,"SITUATION":true,"USERID":100,"DBDATETIME":null

但它会序列化所有实体类字段和属性。如何序列化我想要序列化的实体类字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:52:35.900

您只能将您想要的属性投影到匿名类型：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var exams = entity.TBL_EXAMS.Where(x => x.USERID == userId)
           .Select(exam => new {
                      exam.EXAM_ID, exam.EXAM_TEXT, exam.EXAM_ORDER /* etc */
                   });                    
return serializer.Serialize(exams); 
```

# mysql - MYSQL 匹配查询两个表

> ID：10823202
> 
> 赞同：1
> 
> 时间：2012-05-30T19:47:06.437
> 
> 标签：mysql, join, match, against

是否可以使用连接对具有两个表的查询进行匹配？棘手的部分可能是表上的索引，但也许有办法.. sql 不是我的强项。非常感谢。我想它可能类似于以下内容：

```
SELECT * FROM 'pages' p
LEFT JOIN `tags` t
ON p.id = u.pageid
WHERE MATCH(p.shdescript,t.tag) AGAINST ('romance, relationship') 
```

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:29:25.560

这是可能的，但您需要有文本索引。

```
mysql> alter table pages add fulltext index_text(shdescript);

mysql> alter table tags add fulltext index_text(tag);

SELECT * FROM 'pages' p
LEFT JOIN `tags` t
ON p.id = u.pageid
WHERE MATCH(p.shdescript,t.tag) AGAINST ('romance relationship') 
```

我想这已经足够工作了。

编辑：

从 MySQL 5.6 开始，上述全文搜索可以在 MyISAM 和 InnoDB 存储引擎上完成。在早期的 MySQL 版本中，只有 MyISAM 表支持全文索引。

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)

# qt - Qt从在QtDesigner中创建为单独类的stackedWidget页面访问父级

> ID：10823203
> 
> 赞同：0
> 
> 时间：2012-05-30T19:47:13.030
> 
> 标签：qt, qt4, qt4.8

**由于集成到 QtCreator 2.4.1 中的QtDesigner**中的一些错误，我创建了单独的定义作为继承自*QWidget*的类。这解决了在*QStackedWidget*页面上的布局中放置小部件的问题。此外，这个很好分离的复杂用户界面。

但是，使用此解决方案时，我遇到了主表单和页面是单独类的问题。在内部类中，我看不到主窗体/窗口的元素（小部件、插槽），而逻辑需要在那里进行操作（启用/禁用某些按钮、绑定弹出窗口等）

我正在寻找一个如何解决此类问题的好模式。我尝试按照谷歌上的一些建议通过*父*指针访问，但是我失败并崩溃了应用程序:-)这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:03:56.117

解决此类问题的典型 Qt 方式是通过[信号](http://qt-project.org/doc/qt-4.8/signalsandslots.html)完成的。

在您的情况下，您可以从页面发出带有一些数据的信号，而主窗体具有连接到对象信号的关联函数（-s）。就像是：

*定义*

```
class page : public QObject
{
     Q_OBJECT

...

    signals:
        void my_custom_signal(int value);
}; 
```

*执行*

```
void page::function()
{
    // some code

    emit my_custom_signal(FORM_SHOW_ABOUT_DIALOG);
} 
```

# android - 从 Service 启动的 Android AsyncTask

> ID：10823204
> 
> 赞同：2
> 
> 时间：2012-05-30T19:47:14.653
> 
> 标签：android, service, android-asynctask

我想实现一个将启动 AsyncTask 的服务。

在 AsyncTask onProgressUpdate() 中，我想在主线程中更新 TableLayout。

一切都很好，但有一个疑问：**我如何处理主线程已被破坏或不可见的情况？**
该服务将继续，直到它 stopSelf() 这就是我想要的。
但是 AsyncTask 怎么知道不更新 TableLayout 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:46:08.230

好的，当我阅读您的第二篇文章时，我对事情有了更好的理解。

这里有一个经典的生产者-消费者问题。服务的 AsyncTask 正在生成消费者（主要活动）需要显示的内容。解决方案是使用 LinkedBlockingQueue 来存储所有下载的项目。Activity 需要有自己的 AsyncTask，它将从 LinkedBlockingQueue 轮询。这是基本方法：

该服务有一个下载数据的 AsyncTask。每个项目都存储在一个无界的 LinkedBlockingQueue 中。

Activity 从 onResume 启动 AsyncTask 并从 onPause 取消它。此任务将轮询 LinkedBlockingQueue，然后显示 TableLayout 中的每个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:32:34.140

我认为解决方案是通过 onResume() 和 onPause() 上的消息让服务知道主 Activity 何时可见或不可见。

该服务将依次在 AsyncTak 中设置一个标志，当该标志为 false 时，onProgressUpdate() 将退出而不进行 UI 更新。

所以我想，如果我正确理解了服务文档，我的服务将必须启动-粘性并且还受相同活动的约束。我只需要弄清楚如何重新绑定正在运行的服务。

# javascript - 未捕获异步 javascript 中引发的异常

> ID：10823205
> 
> 赞同：10
> 
> 时间：2012-05-30T19:47:21.040
> 
> 标签：javascript, node.js, asynchronous, exception-handling

基本上，为什么这个异常没有被捕获？

```
var http = require('http'),
    options = {
      host: 'www.crash-boom-bang-please.com',
      port: 80,
      method: 'GET'
    };

try {
  var req = http.request(options, function(res) {
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
      console.log('BODY: ' + chunk);
    });
  });

  req.on('error', function(e) {
    throw new Error("Oh noes");
  });
  req.end();
} catch(_error) {
  console.log("Caught the error");
} 
```

有些人建议这些错误需要用事件发射器或回调（错误）来处理（有错误的回调，数据签名不是我习惯的东西）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T19:53:04.843

当您抛出错误时，该`try {}`块已经很久了，因为回调是在 try/catch 之外异步调用的。所以你无法抓住它。

如果错误回调函数中出现错误，请执行您想做的任何事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T22:21:12.217

从节点版本 0.8 开始，您可以将异常限制为[domain](http://nodejs.org/api/domain.html)。您可以将异常限制到某个域并在该范围内捕获它们

如果你有兴趣，我在这里写了一个捕获异步异常的小函数： Javascript Asynchronous Exception Handling with [node.js。](https://stackoverflow.com/questions/14301839/javascript-asynchronous-exception-handling-with-node-js/14304061#14304061)我希望得到一些反馈这将使您执行以下操作：

```
var http = require('http'),
    options = {
      host: 'www.crash-boom-bang-please.com',
      port: 80,
      method: 'GET'
    };

atry(function(){
  var req = http.request(options, function(res) {
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
      console.log('BODY: ' + chunk);
    });
  });

  req.on('error', function(e) {
    throw new Error("Oh noes");
  });
  req.end();
}).catch(function(_error) {
  console.log("Caught the error");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T13:28:34.807

Javascript 不仅有函数作用域**，** try-catch 也是块作用域。这就是原因。

# ios - 具有垂直滚动和水平分页到新 UITableView 的 UITableView

> ID：10823207
> 
> 赞同：2
> 
> 时间：2012-05-30T19:47:24.373
> 
> 标签：ios, uitableview, uiscrollview, scroll, paging

我想水平分页到一个新的 UITableView 并保持垂直滚动的可能性。对于分页滚动问题，这应该对我有所帮助：[UIScrollView paging in single direction](https://stackoverflow.com/questions/10478586/uiscrollview-paging-in-single-direction/10480071#10480071)

但我首先想知道我应该如何设置不同的 UITableViews？我是否必须设置不同的 UITableViewController，或者（我认为正确的解决方案）我是否有一个可以加载不同 UITableViews 的 Scrollview？

像这样但使用 TableViews 而不是颜色？

```
NSArray *colors = [NSArray arrayWithObjects:[UIColor orangeColor], [UIColor greenColor], [UIColor blueColor],[UIColor   redColor], nil];
 for (int i = 0; i < colors.count; i++) {
     CGRect frame;
     frame.origin.x = self.scrollView.frame.size.width * i;
     frame.origin.y = 0;
     frame.size = self.scrollView.frame.size;

     UIView *subview = [[UIView alloc] initWithFrame:frame];
     subview.backgroundColor = [colors objectAtIndex:i];
     [self.scrollView addSubview:subview];

 }

 self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height); 
```

如果这是正确的方法，我该如何设置不同的 TableViews？

我真的不知道如何实现这一点，希望有人可以帮助我：D

# c# - 多态性不适用于 C# 中泛型类的调用

> ID：10823208
> 
> 赞同：10
> 
> 时间：2012-05-30T19:47:27.360
> 
> 标签：c#, class, generics, interface, polymorphism

看起来在以下情况下，多态性无法正常工作我有以下定义：

```
interface BaseInterface{}
interface NewInterface:BaseInterface{}
class NewClass:NewInterface{}

class GenericClass<T> where T:BaseInterface
{
    public string WhoIAm(T anObject)
    {
        return TestPolymorphism.CheckInterface(anObject);
    }
}

class ImplementedClass:GenericClass<NewInterface>{}

class TestPolymorphism
{
    public static string CheckInterface(BaseInterface anInterface)
    {
        return "BaseInterface";
    }

    public static string CheckInterface(NewInterface anInterface)
    {
        return "NewInterface";
    }
} 
```

然后当我打电话时：

```
NewClass nc = new NewClass();
ImplementedClass impClass = new ImplementedClass();
Console.WriteLine("The result is " + impClass.WhoIAm(nc)); 
```

我有“结果是 BaseInterface”

我期待“结果是 NewInterface”作为 nc 实现 BaseClass 和**NewClass**
什么是获得“NewClass”结果的最佳方法？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T19:51:30.920

请记住，对于泛型方法，非虚拟方法调用仍然在泛型本身的编译时解决，**而不是**在泛型实现的编译时解决。

因此：

```
class GenericClass<T> where T:BaseInterface
{
    public string WhoIAm(T anObject)
    {
        return TestPolymorphism.CheckInterface(anObject);
    }
} 
```

将解决需要 a 的重载，`BaseInterface`因为无论`T`实际类型如何，这都是您将其限制为的重载。

C# 中的泛型与 C++ 中的模板不太一样，在 C# 泛型中，所有引用类型共享相同的泛型代码，因此它们在编译时都以类似的方式对待泛型类型。这意味着任何编译时重载使用泛型类型占位符的泛型调用只能通过您对泛型类型本身提供的任何约束，因为泛型在实际实现之前就已编译。

也就是说，`GenericClass<T>`在考虑使用它之前先编译你的（这与 C++ 处理模板的方式非常不同——这两种方法都有其优点和缺点）。所以，如果你有一个不受约束的泛型（比如 just `T`），那么它被认为`object`是为了重载（粗略地说），但是如果你有一个受约束的泛型（比如`where T : BaseInterface`），那么它被认为`BaseInterface`是为了重载的目的。

在这种情况下，您会看到类似的内容：

```
public static bool UberEquals<T>(T left, T right) where T : class
{
    return left == right;
} 
```

所以你会想，如果你这样称呼它：

```
var s1 = "ello";
var s2 = "Hello";

UberEquals<string>('H' + s1, s2); 
```

因为`T`is type`string`那么它会调用`string`s`==`重载，但它不会，因为你没有 constrained `T`，因此在编译时它假定一个最小公分母`object`并使用`object`s`==`代替。

另一种思考方式：

```
BaseInterface bi = new ImplementedClass();

var x = TestPolymorphism.CheckInterface(bi); 
```

X 总是`BaseInterface`在上面说，因为重载是在编译时解决的，而不是在运行时动态解决的。与泛型非常相似，请记住泛型是在实现之前编译的，因此它只能在任何基类或接口上进行，以实现重载决议。

# algorithm - 在固定行数中拆分不同宽度的项目

> ID：10823209
> 
> 赞同：1
> 
> 时间：2012-05-30T19:47:32.257
> 
> 标签：algorithm

基本上，假设我有 5 个具有以下宽度的项目（高度对此并不重要，所以我们假设它们的高度均为 50 像素）：

1.  50
2.  100
3.  100
4.  100
5.  50

而且我想尽可能地将它们分成2个不同的行（它必须按那个顺序）。我如何计算行的最小宽度来做到这一点？

**注意**：这并不像将所有宽度相加并除以行数那么简单，如果您使用上面的示例进行操作，则项目将不适合，因为宽度总和 (400) 除以行数行 (2) 为 200 (400 / 2 = 200)，在这种情况下，第五项将不适合任何行。

如果使用我刚才提到的方法，这是另一个不起作用的示例：

1.  100
2.  50
3.  100
4.  50
5.  50
6.  50

在这种情况下，最后两项（5 和 6）将需要一个额外的行。

AC# 示例会非常好，因为它是我用来执行此操作的语言 =)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:02:36.067

假设您正在尝试将`N`宽度项目放入宽度`{W[i]}`行`R`中`C`；你`R`是固定的，你`C`是未知的。

首先，让我们做一些重要的观察：

*   给定 a `C`，很容易*检查*选择该特定项是否`C`会使您的排列精确到`R`行：您可以通过逐个检查项目、计算运行总数并`C`用作截止点来做到这一点。
*   的最小值`C`是最小的`W[i]`；最大值是`W[i]`s的总和
*   增加`C`可以使所需的行数`C`减少，但不能增加；因此，函数`RequiredRows(C, W[0..N])`是*单调*的。

这些观察导致了一个简单的算法：运行最小的二分搜索，`C`这样 `RequiredRows(C, W[0..N]) == R`通过在二分搜索的每一步运行基于运行总数的检查器。

这是 C# 中的骨架实现：

```
private static int RequiredRows(int C, int[] data) {
    var res = 1;
    var total = 0;
    foreach ( var w in data) {
        if (total+w <= C) {
            total += w;
        } else {
            res++;
            total = w;
        }
    }
    return res;
}
public static void Main() {
    var data = new[] {50,100,100,100,50};
    var R = 2;
    var start = data.Max();
    var end = data.Sum();
    while (start+1 < end) {
        var mid = start+((end-start)/2);
        if (RequiredRows(mid, data) > R) {
            start = mid;
        } else {
            end = mid;
        }
    }
    Console.WriteLine(end);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:02:28.783

如果顺序是固定的并且正好有两行，这是一个相当简单的问题。将您的宽度数组转换为累积数组。对于第一个示例，它将是：

1.  50
2.  150
3.  250
4.  350
5.  400

第二个是：

1.  100
2.  150
3.  250
4.  300
5.  350
6.  400

然后只需搜索最接近最后一个条目一半的条目，并将列表在该条目之后一分为二。任意解决关系（因此，在任一示例中的第 2 项或第 3 项之后）。最小行宽度是条目累积宽度的最大值或与总宽度（最后一个累积条目）之间的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:04:55.883

考虑需要两行的情况。您可以只测试列表中所有可能的分割点（索引），看看哪一个产生最好的结果（最小化最大行宽）。

对于超过两行，只需使用递归继续拆分“右半部分”，如下面的代码示例所示。（Python）

```
def split(sizes, count):
    # base case: one row, just return it
    if count == 1:
        return [sizes]
    best_score = None
    best_result = None
    # for each possible split point (don't allow empty rows)
    for i in range(1, len(sizes)):
        # the first row is the columns up to the split point
        left = [sizes[:i]]
        # recurse to process the remaining rows
        right = split(sizes[i:], count - 1)
        if right is None:
            # failed to split count - 1 times, ignore
            continue
        rows = left + right
        # minimize the maximum row width
        score = max(sum(row) for row in rows)
        if best_score is None or score < best_score:
            best_score = score
            best_result = rows
    return best_result

if __name__ == '__main__':
    sizes = [100, 50, 100, 50, 50, 50]
    print split(sizes, 2)
    print split(sizes, 3) 
```

输出：

```
[[100, 50], [100, 50, 50, 50]] # 2 rows
[[100], [50, 100], [50, 50, 50]] # 3 rows 
```

# javascript - 使用 javascript 将 GET 中的 HTML 解析为文件

> ID：10823211
> 
> 赞同：1
> 
> 时间：2012-05-30T19:47:39.277
> 
> 标签：javascript

我有一个函数在 GET 中调用带有此信息的脚本：

```
color = color_class(statistics[0]);
class = get_class(statistics[0]);
class = '<font style="color:'+color+';">'+class+'</font>';

switch(stage){
    case 1: call_file('tut_class.php?choice='+class,'main'); break;
} 
```

这看起来像这样：

```
 <font style="color:#0d84b6;">Class One</font> 
```

但在控制台中显示如下：

```
tut_class.php?choice=%3Cfont%20style=%22color:   //the rest is missing 
```

所以我无法在 PHP 脚本中获取它来显示。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:52:19.303

“类”不是保留变量名吗？我会把它换成别的东西...

编辑：对不起，[显然](http://www.quackit.com/javascript/javascript_reserved_words.cfm)这仅适用于 ecmascript，而不是 javascript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:54:48.430

[您应该在使用urlencode](http://www.php.net/manual/en/function.urlencode.php)将其添加到 URL 之前转义字符串，然后使用[urldecode](http://www.php.net/manual/en/function.urldecode.php)对其进行转义。

编辑：哎呀，你正在编写javascript。您应该使用 javascript 的 encodeURIComponent 来编码字符串，而不是 PHP 的 urlencode。

# hash - MD5 算法 - 如果最后一个块是 63 字节怎么办？

> ID：10823215
> 
> 赞同：0
> 
> 时间：2012-05-30T19:48:15.640
> 
> 标签：hash, md5, implementation

我想在我的程序中实现 MD5（用于教育）。我的理解有问题。

维基百科上写着：

1.  将“1”位附加到消息
2.  附加“0”位，直到消息长度为 ≡ 448 (mod 512)
3.  将长度 mod (2 pow 64) 附加到消息

我的想法是这样的：

1.  获取味精的大小
2.  直到 size >= 64 ==> memcpy 64 字节来缓冲和计算函数
3.  如果 size < 64，memcpy "size" 字节并准备填充。

现在，可以说，消息是 127 个字节。程序先取 64 个字节，计算，然后再取第二部分。占用了 63 个字节（504 位），因此需要添加填充。加 1，所以现在是 505 位。

现在怎么办？我应该将零添加到 448（mod 512），所以 448+7 个零？那么还会有两个块吗？要不然是啥？

我问是因为它对我来说看起来很奇怪；）可能很好，但是..我不知道。

在此先感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:52:40.190

维基百科的描述是正确的。没有可能的方法来设计至少在某些时候不会添加额外块的填充方案。（可以通过计数来证明。）

# solr - Solr Facet Range Search 按日期和中间和

> ID：10823220
> 
> 赞同：3
> 
> 时间：2012-05-30T19:48:35.610
> 
> 标签：solr

我正在使用 Solr 3.6.0 并正在使用按日期进行方面范围搜索来找出在特定时间间隔内我有多少**张发票（我的文档类型） ：**

`http://localhost:8983/solr/select?q=*:*&facet=true&facet.range=invoiceDate&f.invoiceDate.facet.range.start=2012-03-01T00:00:00Z&f.invoiceDate.facet.range.gap=%2B1DAY&f.invoiceDate.facet.range.end=2012-06-01T00:00:00Z`

我得到这样的答案——每天的单张*发票数量。*

```
...
<int name="2012-05-22T00:00:00Z">2</int>
<int name="2012-05-23T00:00:00Z">1</int>
<int name="2012-05-24T00:00:00Z">0</int>
... 
```

这很好用。现在我希望能够在我的每个日期间隔内总结*发票的金额（“invoiceAmount”）。*无论如何我可以总结每个日期范围内的另一个字段吗？

# jquery - 孙子选择器，或如何将选择器锚定在已知元素上

> ID：10823225
> 
> 赞同：19
> 
> 时间：2012-05-30T19:48:57.843
> 
> 标签：jquery, jquery-selectors, dom-traversal

假设我有一个元素层次结构，`#root`它的根。我可以`$('#root > * > *')`用来得到它所有的孙子。如果我已经有了，有什么办法可以做到`$('#root')`吗？

`$('#root').find('* > *')`绝对不是，因为它会很高兴地从第一颗星的任何后代“开始”，而不仅仅是`#root`孩子。

jQuery 中是否有任何函数可以“锚定”在当前元素上，从其子元素或自身开始？这一直困扰着我一段时间，我在文档中找不到类似的东西。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-30T19:50:52.207

要么用另一个开始查找表达式`>`（此语法已[记录](http://api.jquery.com/find)）：

```
// This is functionally the same as $('#root > * > *')
$('#root').find('> * > *') 
```

或者叫[`.children()`](http://api.jquery.com/children)两次：一次是为了它的孩子，一次是为了它的孙子：

```
$('#root').children().children() 
```

# python - 如何获得所有最大值max函数

> ID：10823227
> 
> 赞同：6
> 
> 时间：2012-05-30T19:49:05.400
> 
> 标签：python, max

```
data = ['str', 'frt']
max(data, key=len) 
```

max 函数只返回一个字符串。

我怎样才能让它返回两个字符串？

两个字符串的长度相等，所以`max`应该返回两个字符串，但它只返回一个，所以有没有办法返回所有最大项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T19:52:33.423

您可以将其写为列表理解：

```
data = ['str', 'frt']
maxlen = max(map(len, data))
result = [s for s in data if len(s) == maxlen] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-29T08:09:29.863

这是一个简单的函数，它一次性完成：

```
def maxes(a, key=None):
    if key is None:
        key = lambda x: x
    m, max_list = key(a[0]), []
    for s in a:
        k = key(s)
        if k > m:
            m, max_list = k, [s]
        elif k == m:
            max_list.append(s)
    return m, max_list 
```

在行动：

```
In [11]: maxes(['a', 'ab', 'a', 'cd'], key=len)
Out[11]: (2, ['ab', 'cd']) 
```

这可能会或可能不会比运行其他海报提到的列表理解更快，并且肯定比排序更快......但是一些测试表明它更快：

以字符串为例：

```
In [20]: a = [''.join(random.choice('abc') for _ in xrange(random.randint(1, 100)))
                                           for i in xrange(1000)]

In [21]: %timeit maxes(a, key=len)
10000 loops, best of 3: 53 µs per loop

In [22]: %timeit m = max(map(len, a)); [s for s in a if len(s) < m]
10000 loops, best of 3: 104 µs per loop

In [23]: %timeit sorted_a = sorted(a, key=len, reverse=True); [s for s in a if len(s) == len(sorted_a[0])]
1000 loops, best of 3: 322 µs per loop 
```

如果我们看整数，用一个键：

```
In [30]: a = [random.randint(1, 10000) for i in xrange(1000)]

In [31]: %timeit maxes(a, key= lambda x: x**2)
10000 loops, best of 3: 150 µs per loop

In [32]: %timeit m = max(a, key=lambda x: x**2); [s for s in a if s**2 < m]
1000 loops, best of 3: 183 µs per loop

In [33]: %timeit sorted_a = sorted(a, key=lambda x: x**2, reverse=True); [s for s in a if s ** 2 == sorted_a[0] ** 2]
1000 loops, best of 3: 441 µs per loop 
```

但是，如果没有键，列表理解会更好：

```
In [34]: %timeit maxes(a)
10000 loops, best of 3: 98.1 µs per loop

In [35]: %timeit m = max(a); [s for s in a if s < m]
10000 loops, best of 3: 49.2 µs per loop

In [36]: %timeit sorted_a = sorted(a, reverse=True); [s for s in a if s == sorted_a[0]]
10000 loops, best of 3: 152 µs per loop 
```

这是意料之中的，因为冗余键代码仍在应用中，如果我们要删除该逻辑（仅用 x 替换对 key(x) 的调用），该函数再次*稍微*快一点：

```
In [37]: %timeit maxes2(a)
10000 loops, best of 3: 39.7 µs per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:53:10.910

根据定义，max 函数返回最大值。它不返回项目，只返回唯一的值（即使有多个项目具有相同的最大值）。我建议您使用排序算法并获取您需要的任何值。

在您的示例中：

```
data = ['str','frt']
sorted(data,key=len, reverse=True)
result = [s for s in data if len(s)==len(data[0])] 
```

# javascript - 基于浏览器的应用程序使用 REST 服务进行身份验证

> ID：10823234
> 
> 赞同：0
> 
> 时间：2012-05-30T19:49:36.353
> 
> 标签：javascript, authentication

我构建了一个 RESTful 服务，为 Android 客户端和浏览器客户端提供 XML + JSON。目前，我的 REST 服务使用基于 cookie 的身份验证。一切都在同源策略中协同工作，因为浏览器客户端页面是从提供 REST 服务的同一 Web 服务器提供的。

我想分离我的浏览器应用程序并从与 REST 服务不同的 Web 服务器提供其页面。我可以使用跨域资源共享继续从浏览器向 REST 服务发出 XmlHttpRequest 调用，但我无法确定身份验证。

1.  我将 XmlHttpRequest 发送到身份验证服务
2.  REST 服务器在响应中设置一个 cookie
3.  当浏览器接收到成功的请求时，它会将应用程序移动到下一页
4.  下一页不维护登录页面上设置的 cookie，因此对 REST 服务的所有 XmlHttpRequest 调用都失败并显示 401

解决这个问题的最佳方法是什么？如果 cookie 身份验证不可行，我应该在这种情况下使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:30:54.137

我的建议是在两台服务器前运行 Apache 或类似的 Web 服务器并使用代理模块。这样一来，所有的调用都是对同一个主机的，所以 cookie 会保留。这在许多项目中对我有用，包括基于 cookie 的身份验证的项目。

# css - 将悬停效果应用于 2 个 div

> ID：10823236
> 
> 赞同：1
> 
> 时间：2012-05-30T19:49:42.153
> 
> 标签：css, html, mouseover, swap

嗨，我现在正在扯头发，我在网上找到了这个脚本，它使我能够使用自己的 google+ 按钮而不是他们丑陋的按钮

```
html:        
<div class="googleplus">  
    <div class="googlehider">  
        <g:plusone annotation="none"></g:plusone>  

        <!-- Place this render call where appropriate -->  
        <script type="text/javascript">  
          window.___gcfg = {lang: 'en-GB'};  

          (function() {  
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;  
            po.src = 'https://apis.google.com/js/plusone.js';  
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);  
          })();  
        </script>  
    </div>  
    <img src="images/googleplus.png" class="mygoogle" />  
</div>  

css:
.googleplus {  
position:relative;  
/* - use this to position your share icon on your page -  */  
}  
.googlehider {  
opacity:0;  
height:30px;  
width:30px;  
position:absolute;  
top:0;  
left:0;  
z-index:3;  
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";  
filter:alpha(opacity=0);  
}  
.mygoogle {  
position:absolute;  
top:0;  
left:0;  
z-index:2;  
margin-left:6px;  
} 
```

如果您有静态图像但我的图像有鼠标悬停效果，这很好，所以我尝试从这个示例[http://api.jquery.com/hover/](http://api.jquery.com/hover/)实现以下内容，以在多个 div 中启用多个悬停效果，这不是工作 - 我做错了什么？我在下面提到 facebook，因为我正在尝试在 google+ 和 facebook 按钮上实现

```
<script>
$('div.facebookhider').hover(
function () {
$('div.myfacebook').addClass(".facebookhover"); 
}, 
function () {
$('div.myfacebook').removeClass(".facebookhover"); 
}
);
</script>

<div class="facebookshare">
<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div class="facebookhider">  
        <div class="fb-like" data-href="mywebsite.com" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div> 
    </div>
    <div class="myfacebook"><li class="facebook"><a>Facebook</a></li></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:52:17.213

您没有任何带有`id`of`facebookhider`或的元素`myfacebook`。试试这个：

```
<script>
$(".facebookhider").hover(
function () {
$('.myfacebook').addClass("facebookhover"); 
}, 
function () {
$('.myfacebook').removeClass("facebookhover"); 
}
);
</script> 
```

## 或者只使用 CSS

[jsFiddle 示例](http://jsfiddle.net/8t2Ue/1/)

```
.social-links .facebookshare .facebookhider:hover + div li a {
    background-position: 0 0;
}
.social-links .googleplus .googlehider:hover + li a {
    background-position: 0 0;
} 
```

# java - 将日期值传递给 IReport 中的参数失败

> ID：10823240
> 
> 赞同：0
> 
> 时间：2012-05-30T19:49:47.233
> 
> 标签：java, date, jasper-reports

我尝试将我为 JDateChooser（toedter 组件）获得的日期值分配给 IReport 中的 java.util.Date 类型的参数。

这是我的代码：

```
toDate = toDatePicker.getDate();
hash.put("period2", toDate);
jasperReport = JasperCompileManager.compileReport(jasperDesign);
jasperPrint = JasperFillManager.fillReport(jasperReport, hash, con); 
```

但是碧玉查看器说该文档没有页面。当我尝试预览我的报告时，选择具有相同日期的参数，我得到了正确的报告。我希望我解释得很好。谢谢....

编辑：我的错误，我传递了错误的参数名称，它应该是“periode2”，而不是“period2”。谢谢...顺便说一句，我应该删除这个帖子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:04:40.703

经过长时间的调试，我意识到我将错误的参数名称传递给报告。

它应该是“periode2”，而不是“period2”。因此，来自 toedter 的 JDateChooser 可以安全地用于获取日期参数并将其传递给具有 java.util.Date 参数的报告。感谢并为我的错误道歉：D

# r - 完全删除整个 R 会话的科学记数法

> ID：10823241
> 
> 赞同：7
> 
> 时间：2012-05-30T19:50:10.893
> 
> 标签：r, options, scientific-notation

我**不想**在我的 R 会话中的任何计算结果中看到任何科学记数法。我想查看所有实际数字，最好在每三位数字后加一个逗号 (,)。

我怎样才能做到这一点？ `options(scipen = 999)`不削减它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T20:19:20.457

该`print.default`函数`options()['digits']`在“决定”分配什么宽度时查看值，因此您可能需要增加它以及尝试最大化“scipen”。该宽度的值高于 16 时存在特定于操作系统的问题。至于逗号请求，……算了。R 不是财务报告系统。如果您需要强制这种输出格式，您可以将对象定义为特定类并使用 sprintf 和 formatC 为它们编写打印方法，或者我想您可以重写 print.default，但这可能只会影响打印操作传递给其他 100 多种方法之一`print`。

有输出方法。`formatC()`并且`prettyNum()`两者都有一个“big.mark”参数，可以在数字中插入逗号。输出是`"character"`格式的，所以不要*尝试*对您创建的结果进行任何进一步的计算。

还有一些输入法可以读取包含逗号或货币符号的数字列：

```
setAs("character", "num.with.commas",  function(from) as.numeric(gsub(",", "", from))) 
setAs("character", "euro",
 function(from) as.numeric(gsub("€", "", from)))
setAs("character", "num_pct",
 function(from) as.numeric(gsub("%", "", from))/100)
# you will get warning messages if you have not defined the class,
#     ....  but this will still succeed

 Input <- "A B C
 1,000 1% 3.50€
 2,000 2% 4.77€
 3,000 3% €5.68
"
 DF <- read.table(textConnection(Input), header = TRUE,  
                colClasses = c("num.with.commas", "num_pct", "euro"))
 str(DF) 
```

# php - PHP 调用所有 XML 节点对象而不提及子节点名称

> ID：10823243
> 
> 赞同：0
> 
> 时间：2012-05-30T19:50:22.440
> 
> 标签：php, xml, loops

```
<Node name="node1">
  <x x="x"/>
  <x x="xxx"/>
</Node>

<Node name="node2">
  <x x="xx"/>
  <x x="xxxx"/>
</Node> 
```

好的，这是一个 XML 示例：

我使用 simplexml_load_file 调用它的内容

如果我想调用一个特定的节点内容，它应该是：

```
$xml = simplexml_load_file('file.xml');
$contents = $xml->node1 
```

并调用节点对象

```
$contents = $xml->node1->x 
```

到目前为止似乎很好，问题是，如何在不提及节点名称的情况下调用对象“x”

您注意到我在上面添加的示例有 2 个节点

从中调用 x 我应该提到 nodename 然后 x

我想从整个 XML 中调用所有“x”

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:28:10.187

当您无需担心命名空间时，SimpleXMLElement::xpath() 就可以解决问题。如果您确实有命名空间...您将需要 SimpleXMLElement::registerXPathNamespace()。

```
<?php
$xml = <<<EOT
<?xml version="1.0" encoding="UTF-8" ?>
<root>
<Node name="node1">
  <x x="x"/>
  <x x="xxx"/>
</Node>

<Node name="node2">
  <x x="xx"/>
  <x x="xxxx"/>
</Node>
</root>
EOT;

// Original question
$s = new SimpleXMLElement($xml);
$r = $s->xpath('//Node/x');
var_dump($r);

// Something about names
$r2 = $s->xpath('Node[@name]');
$names = array();
foreach($r2 as $elem){
  $names[] = "{$elem['name']}";
}
var_dump($names);

// RoseWarad's answer (more efficient than "something about names")
$r3 = $s->xpath('*/@name');
var_dump($r3);

?> 
```

# php - 在给定条件的情况下，如何在 CodeIgniter 中构建我的控制器

> ID：10823245
> 
> 赞同：0
> 
> 时间：2012-05-30T19:50:38.603
> 
> 标签：php, codeigniter

我正在尝试使用 CodeIgniter 作为 PHP 框架构建 Web API。

这不是 REST API。它只是一个 Web api，这意味着所有查询都是 POST 查询。

一个典型的查询看起来像这样

```
http://host/api1/user/get_name 
```

和

```
http://host/api2/user/get_name 
```

在这种情况下，api1 和 api2 成为控制器，而用户成为其下的方法。

我对此不满意，因为我的 api1 和 api2 类变得太大，而且我不喜欢在一个类中混合不相关的代码。

我能做些什么 ？我可以使用我的 .htaccess 文件或路由配置，以便每次服务器接收到 \^api\ 形式的请求时，它都会将其转发给适当的控制器？

请注意，api1 和 api2 不是我系统中唯一的控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:30:54.257

你必须考虑几件事

1.  它们是相互依赖的吗？
2.  您必须有一些特定的原因来维护 2 个 Web API。

如果它们不是相互依赖的，那么我会建议你这样做

```
http://host1/user/get_name
http://host2/user/get_name 
```

如果它们是相互依赖的，那么你必须这样做

```
http://host/api1/user/get_name
http://host/api2/user/get_name 
```

其背后的原因是您不需要维护 2 个不同的模型。

例如，如果您在 a 中进行了一些更改`X_model.php`，则必须将其上传到两个服务器上。

您可以在控制器下创建文件夹。我对此非常肯定。我已经在`codeigniter 1.7`.

所以你可以分别创建文件夹并继续它。！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:56:00.893

你可以试试`$route['api(:num)'] = "api$1/";`

没有测试不知道它是否会按照你想要的方式工作。

[Codeigniter 路由](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:56:19.737

API1 和 API2 是什么？它们是相互独立的吗？

如果是这样，我建议您为这两个 API 使用单独的子域，这样您就可以这样做：

```
http://api1.example.com/user/get_name
http://api2.example.com/user/get_name 
```

这提供了两个 API 之间的清晰分离，并允许`User`成为控制器而不是整个 API。

这将要求您在托管根目录中创建两个目录 ( `api1, api2`)，“安装”两个 CI 实例并将子域路由到相应的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:18:06.847

我认为您的 url 方案没有任何问题。这就是你应该如何在codeigniter中调用控制器->动作。如果您希望控制器变瘦，请移动库中的实际处理代码并为每个请求调用库。或者您可以使用重写规则将工作分配给不同的控制器。

# excel - DateDiff 函数意外返回另一个日期或默认值

> ID：10823249
> 
> 赞同：0
> 
> 时间：2012-05-30T19:50:52.810
> 
> 标签：excel, vba, datediff

我正在尝试将 DateDiff 函数用于使用 VBA 的 excel 中的宏。

据我了解，代码应该返回一个整数值。

以下是此位置在线提供的示例：[http ://www.techonthenet.com/access/functions/date/datediff.php](http://www.techonthenet.com/access/functions/date/datediff.php)

-DateDiff ("yyyy", #15/10/1998#, #22/11/2003#) 将返回 5

-DateDiff ("m", #15/10/2003#, #22/11/2003#) 将返回 1

-DateDiff ("d", #15/10/2003#, #22/11/2003#) 将返回 38

这是我使用的代码：

```
Sub macrotest()

Dim dateNow, dateThen, dateFinal As Date

dateNow = Format(Sheet1.Cells(2, 2), "DD/MM/YY")
dateThen = Format(Sheet1.Cells(3, 2), "DD/MM/YY")
dateFinal = DateDiff("d", dateNow, dateThen)

Sheet1.Cells(5, 2) = dateFinal

End Sub 
```

最后，这是我在我的 excel 行中的内容：

B2：2012 年 5 月 30 日

B3：2012 年 3 月 30 日

B5：12:00:00 AM（这个单元格应该列出结果）。

-我得到了excel默认的日期或12:00。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:04:05.270

根据帮助系统， DateDiff 返回一个**Long**。

您的代码声明了两个 Variants 和一个 Date 类型。代替

`Dim dateNow, dateThen, dateFinal As Date`

你可能是说

`Dim dateNow As Date, dateThen As Date, dateFinal As Long`

这段代码对我有用。您可能需要稍微调整它以将其应用于您的特定情况（我使用 ActiveSheet 使测试进行得更快）

```
Sub macrotest()

Dim dateNow As Date, dateThen As Date, dateFinal As Long

dateNow = ActiveSheet.Cells(2, 2).value
dateThen = ActiveSheet.Cells(3, 2).value
dateFinal = DateDiff("d", dateThen, dateNow)

ActiveSheet.Cells(5, 2) = dateFinal

End Sub 
```

此外，我相信你已经在你的函数调用`dateNow`中`dateThen`反转了。`DateDiff`

# memory - 一个字符串需要多少内存

> ID：10823251
> 
> 赞同：-2
> 
> 时间：2012-05-30T19:50:54.230
> 
> 标签：memory, memory-management, data-structures

我知道这是一个非常基本的问题。我已经从 Wikipedia 和几个 MSDN 页面阅读了内存[管理。](http://en.wikipedia.org/wiki/Memory_management)但是我仍然不确定在程序执行期间如何进行以下处理。

当我在我的程序中声明一个长字符串时

1.  哪个内存编译器用于存储值？（我认为是内存）
2.  它需要多少内存空间？（考虑到它是一个 8 位机器和字符串，例如“我是计算机编程新手”）
3.  当我在运行时更新字符串值时，编译器如何知道存在哪个内存地址字符串值
4.  当我创建一个矩阵时，单个值如何存储到内存中？

请考虑我在 .Net 中使用 C#，这是我的字符串 s = '我是计算机编程的新手'

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:15:34.090

第一部分，弦乐。

正如很多人告诉你的，有很多方法可以表示一个字符串。最常见的做法是将字符串存储为数组。但是，您需要一些额外的信息：这个数组的长度。

每种（过程式或命令式）语言都以不同的方式解决这个问题。

1.  有“帕斯卡字符串”，其中数组的前几个字节存储字符串的长度。

2.  有“C 字符串或以 null 结尾的字符串”，其中没有额外的字节来存储长度，但数组中的最后一个字节的值为零。

3.  在 COM 中使用了一种混合方法，即 BSTR。它在开头使用 4 个字节来存储字符串的长度*，并*在结尾使用一个两字节标记（两个零字节）。它允许将字符串传递给 C 程序，同时快速获取长度。

函数式语言是完全不同的商店。

第二部分，矩阵。

要存储多维（在您的情况下为二维）数组，必须对其“线性化”，即将其转换为一维数组以使用计算机的内存硬件。

所以要存储

```
float A[W][H]; 
```

你至少分配

```
sizeof(float)*W*H 
```

字节的内存来存储数据。对 A[i][j] 的访问是通过访问地址处的内存字节来完成的

```
addr(A) + (i * H + j) 
```

或地址

```
addr(A) + (j * W + i) 
```

这是 C 和 Fortran 采用的两种方法。

但是，如果您需要存储一些稀疏矩阵，可能还有其他一些选项。例如，您可以存储表示矩阵的非零元素的三元组 (i,j,value)。

# ms-access - 密码保护 MS Access 报告文件

> ID：10823252
> 
> 赞同：1
> 
> 时间：2012-05-30T19:50:58.277
> 
> 标签：ms-access, report, password-protection, prompt

我正在寻找密码保护我的 MS Access 数据库中的单个报告。有没有办法在不使用代码的情况下做到这一点？如果您确实使用了代码，那么当有人单击单个报告文件时，我如何拥有它，系统会提示用户输入密码。顺便说一句，这个数据库中有多个报告...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:11:11.740

解决此问题的一种方法是在报告的公开活动中询问密码。这个简单的例子可以作为一个起点：

```
Private Sub Report_Open(Cancel As Integer)
    Const cstrPassWord As String = "open"
    Dim strPassWord As String
    strPassWord = InputBox("Password:")
    If Not strPassWord = cstrPassWord Then
        Cancel = True
    End If
End Sub 
```

如果您想给用户多次获得正确密码的机会……或者在密码输入错误时显示一条消息……或者您想要的任何其他内容，您可以进行改进。

# javascript - 防止jquery计算后出现负值

> ID：10823253
> 
> 赞同：0
> 
> 时间：2012-05-30T19:51:03.377
> 
> 标签：javascript, jquery, html, forms, date-arithmetic

当我计算开始日期和结束日期之间的差异时 - 可以将结束日期输入为开始日期“之前” - 因此允许“总天数”中的负计算值。）我使用“分钟”来确保开始日期不能是“今天之前”。)

此外，是否有可能在计算完成之前隐藏“total_days”结果（计算结果） - 即您看不到长十进制值：例如 -15489.916666666666

我曾尝试自己完成此任务，但对 javascript / jquery 的了解非常有限。我会重视任何回应。：-） 谢谢

```
<title>Conference Form</title>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jqueryui.js"></script>
<link href="style.css" rel="stylesheet" type="text/css"/>
<link href="css/jqueryui.css" rel="stylesheet" type="text/css" />

<body>

<div id="wrapper">
<div id="header"></div>

<table width="705" border="1" align="left" cellpadding="1">
  <form action="" method="get" name="myform">

  <tr>
    <td width="151"><label>Company Name</label></td>
    <td width="158"><input type="text" name="companyname" id="companyname" /></td>
    <td width="155">Enquiry Date</td>
    <td width="213"><input type="text" name="enquiry_date" id="enquiry_date" class="datepicker" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Conference Date In</td>
    <td><input type="text" name="conference_date_in" id="conference_date_in" class="datepicker" /></td>
    <td>Conference Date Out</td>
    <td><input type="text" name="conference_date_out" id="conference_date_out" class="datepicker" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Number of Delegates</td>
    <td><input type="text" name="no_of_delegates" id="no_of_delegates" /></td>
    <td>Total Days</td>
  <td><input type="text" name="total_days" id="total_days" /></td>
  </tr>
  </form>
</table>
</div>
</body>
</html>

<script type="text/javascript">

$(function() {
    $(".datepicker").datepicker({ minDate: -0, maxDate: "+100M +10D",dateFormat: 'dd-mm-yy'})
    ({
        changeMonth: true,
        changeYear: true,
    });
        });

var enquiry_date = $.datepicker.formatDate('dd-mm-yy', new Date());
document.getElementById('enquiry_date').value = enquiry_date;

var calcDate = function() {
    var start = $('#conference_date_in').datepicker('getDate');
    var end = $('#conference_date_out').datepicker('getDate');
    var days = (end - start) / 1000 / 60 / 60 / 24;

    document.getElementById('total_days').value = days;
}

$('#conference_date_out').change(calcDate);
$('#conference_date_in').change(calcDate);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:58:27.303

只需将您的 UI 更新包装在 if 语句中

```
if( days >= 0 ) {
    document.getElementById('total_days').value = days;
} else {
    alert( "Nice try, but you can't go backwards in time" );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:58:45.053

当您搜索数字的绝对值（不带符号的值）时，请使用`Math.abs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:06:14.853

```
$(document).ready(function() {
    $(".datepicker").datepicker({ minDate: -0, maxDate: "+100M +10D",dateFormat: 'dd-mm-yy', changeMonth: true, changeYear: true });        

var enquiry_date = $.datepicker.formatDate('dd-mm-yy', new Date());
$('#enquiry_date').val(enquiry_date);

var calcDate = function() {
    var start = $('#conference_date_in').datepicker('getDate');
    var end = $('#conference_date_out').datepicker('getDate');
    if (start << end) {
        var days = (end - start) / 1000 / 60 / 60 / 24;
        $('total_days').val(days);
    } else {
        alert('Day Out must be after the Day In. Try again.');
    }
}

$('#conference_date_out').change(calcDate);
$('#conference_date_in').change(calcDate);

}); 
```

# c - 如何将 GtkWindow 的背景设置为图像？

> ID：10823256
> 
> 赞同：3
> 
> 时间：2012-05-30T19:51:11.817
> 
> 标签：c, gtk

我有一个简单的`C` `GTK`Linux 应用程序，需要将主窗口的背景设置为`GIF`文件中的图像。我做了一些阅读，看来我应该能够做到以下几点：

> 1- 将背景图像填充到`GdkPixbuf`using `gdk_pixbuf_new_from_file()`
> 2- 用于`gdk_pixbuf_render_pixmap_and_mask()`渲染`GdkPixbuf`到`GdkPixMap`
> 3- 设置`GtkWindow`using的背景`gdk_window_set_back_pixmap()`

调用`gdk_window_set_back_pixmap()`似乎需要 a`GdKWindow`而不是 a `GtkWindow`。下面是我不起作用的代码，后面是我的具体问题。

> ```
> /*
>  * Compile me with:
>  *   gcc -o reels reels.c $(pkg-config --cflags --libs gtk+-2.0 gmodule-2.0)
>  */
> 
> #include <sys/types.h>
> #include <sys/stat.h>
> #include <fcntl.h>
> #include <stdio.h>
> #include <string.h>
> #include <stdlib.h>
> #include <errno.h>
> #include <time.h>
> 
> /* GTK */
> #include <gdk/gdkx.h>
> #include <gtk/gtk.h>
> 
> /**** prototypes ****/
> static void destroy (GtkWidget*, gpointer);
> GdkPixbuf *create_pixbuf(const gchar * filename);
> /********************/
> 
> GtkWidget   *images[3][5];
> 
> static void destroy (GtkWidget *window, gpointer data)
> {
>   gtk_main_quit ();
> }
> 
> GdkPixbuf *create_pixbuf(const gchar * filename)
> {
>    GdkPixbuf *pixbuf;
>    GError *error = NULL;
>    pixbuf = gdk_pixbuf_new_from_file(filename, &error);
>    if(!pixbuf) {
>       fprintf(stderr, "%s\n", error->message);
>       g_error_free(error);
>    }
> 
>    return pixbuf;
> }
> 
> int main (int argc, char *argv[])
> {
>   GtkWidget *window, *table;
>     GdkPixbufAnimation *animation;
>     GtkWidget *image;
>     int x,y;    
>     GdkPixbuf *pixBuf;
>     GdkPixmap *pixMap;
> 
>     gtk_init (&argc, &argv);
> 
>   window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
>     gtk_window_set_default_size (GTK_WINDOW (window), 628, 530);
>   gtk_window_set_title (GTK_WINDOW (window), "Demo");
>   gtk_container_set_border_width (GTK_CONTAINER (window), 10);
>     //gtk_window_set_decorated( GTK_WINDOW(window), FALSE );
> 
>     pixBuf = create_pixbuf("background.gif");
>     gdk_pixbuf_render_pixmap_and_mask(pixBuf, &pixMap, NULL, 255);
>     gdk_window_set_back_pixmap( GDK_WINDOW (window), pixMap, (gboolean) TRUE);
> 
> #if 0
>     /*  some code I found that is supposed to create a background image..
>         Can't seem to get it converted correctly into 'C'
>     */    
> 
> area=gtk.Drawingarea()
> 
> pixbuf=gtk.gdk.pixbuf_new_from_file('background.png')
> pixmap, mask=pixbuf.render_pixmap_and_mask()
> 
> area.window.set_back_pixmap(pixmap, False)
> #endif     
> 
>   g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (destroy), NULL);
>   table = gtk_table_new (3, 5, TRUE);
> 
>     /* setup animated gifs */
>     for( y = 0; y < 3; y++ )
>     {
>         for( x = 0; x < 5; x++ )
>         {
>             /* set each Image widget to spin GIF */
>             images[y][x] = gtk_image_new_from_file("spinning.gif");;
>             gtk_table_attach (GTK_TABLE (table), images[y][x], x, x+1, y, y+1,    GTK_EXPAND, GTK_SHRINK, 0, 0);            
>         }
>     }
> 
>   /* Add five pixels of spacing between every row and every column. */
>   gtk_table_set_row_spacings (GTK_TABLE (table), 5);
>   gtk_table_set_col_spacings (GTK_TABLE (table), 5);
> 
>   gtk_container_add (GTK_CONTAINER (window), table);
>   gtk_widget_show_all (window);
> 
>   gtk_main ();
> 
>   return 0;
> } 
> ```

代码编译并运行，但我得到以下运行时错误（这是我所预料的，因为我不知道如何从 a 派生`GdkWindow`a `GtkWindow`：

> （卷轴：10951）：GLib-GObject-WARNING **：来自`GtkWindow' to`GdkWindow 的无效转换'
> 
> （卷轴：10951）：Gdk-CRITICAL **：gdk_window_set_back_pixmap：断言“GDK_IS_WINDOW（窗口）”失败

我的问题是：

1- 我如何`GdkWindow`从代码主窗口 ( `GtkWindow`) 派生一个？
2- 我需要使用绘图区吗？
3- 我需要做什么才能让`background.gif`图像在主窗口中显示为背景？

任何帮助将不胜感激。我看过很多代码片段，但我很难把它们放在一起，而且我`Gtk`还是很陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T11:51:37.197

> 我的问题是：
> 
> 1-如何从代码主窗口（ GtkWindow ）派生 GdkWindow ？
> 2- 我需要使用绘图区吗？
> 3- 我需要做什么才能让 background.gif 图像在主 > 窗口上显示为背景？

如果您想在 gtk 窗口中设置像背景一样的图像，您应该执行以下操作：
1 - 将图像加载到 GdkPixbuf 或变体。(gdk_pixbuf_new_from_file)
2 - 创建一个像素图和一个掩码位图。(gdk_pixbuf_render_pixmap_and_mask () )
3 - 创建一个 GtkStyle 来保存小部件的样式信息。
4 - 将渲染像素图加载到样式。
5 - 将 GtkStyle 设置为主窗口。

一个例子：

```
#include <gtk/gtk.h>
#include <stdio.h>
#include <stdlib.h>

GdkPixbuf *load_pixbuf_from_file (const char *filename)
{
    GError *error = NULL;
    GdkPixbuf *pixbuf = gdk_pixbuf_new_from_file (filename, &error);

    if (pixbuf == NULL)
    {
        g_print ("Error loading file: %d : %s\n", error->code, error->message);
        g_error_free (error);
        exit (1);
    }
    return pixbuf;
}

GdkPixbufAnimation *load_pixbuf_animation_from_file (const char *filename)
{
    GError *error = NULL;
    GdkPixbufAnimation *pixbuf = gdk_pixbuf_animation_new_from_file (filename, &error);

    if (pixbuf == NULL)
    {
        g_print ("Error loading file: %d : %s\n", error->code, error->message);
        g_error_free (error);
        exit (1);   
    }
    return pixbuf;
}

int main (int argc, char **argv)
{
    GtkWidget *window = NULL;
    GdkPixbuf *image = NULL;
    GdkPixbufAnimation * anim = NULL;
    GtkWidget *widget = NULL;
    GdkPixmap *background = NULL;
    GtkStyle *style = NULL;

    gtk_init (&argc, &argv);
    /* Load a non animated gif */
    image = load_pixbuf_from_file ("/home/midnigther/Desktop/pict.gif");
    //  widget = gtk_image_new_from_pixbuf (image);
    gdk_pixbuf_render_pixmap_and_mask (image, &background, NULL, 0);
    style = gtk_style_new ();
    style->bg_pixmap [0] = background;
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title (GTK_WINDOW(window), "Load Image");
    gtk_window_set_default_size (GTK_WINDOW (window), 400, 300);
    gtk_widget_set_style (GTK_WIDGET(window), GTK_STYLE (style));
    gtk_window_set_transient_for (GTK_WINDOW (window), NULL);

    GtkWidget *hbox = NULL;
    hbox = gtk_hbox_new (0, FALSE);
    gtk_container_add (GTK_CONTAINER(window), hbox);

    GtkWidget *button = NULL;
    button = gtk_button_new_with_label ("Sonic");
    gtk_box_pack_start (GTK_BOX (hbox), button, FALSE, FALSE, 0);

    gtk_widget_show_all (window);
    gtk_main ();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:11:32.523

作为部分答案，您可以使用（预期的）API 从 GtkWindow 中提取 GdkWindow `[gtk_widget_get_window()](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-get-window)`，.

# ios - viewforoverlay 永远不会被调用

> ID：10823257
> 
> 赞同：2
> 
> 时间：2012-05-30T19:51:13.003
> 
> 标签：ios, mkmapview, mkoverlay, mkmapviewdelegate

这让我发疯了。我已经浏览了 stackoveflow 上的所有帖子，但没有任何内容符合要求。我正在尝试添加一个简单的折线（即不是自定义叠加）作为我的`MKMapView`. `viewForOverlay`委托上的方法永远不会被调用。地图委托被正确地为所有其他委托函数调用。以下是该`viewForOverlay`方法的代码：

```
//maanges the overlay
- (MKOverlayView *)mapView:(MKMapView *)map viewForOverlay:(id <MKOverlay>)overlay{

    NSLog(@"does it ask for the overlay view?");

    MKOverlayView *overlayView = nil;

    return overlayView;
} 
```

这是我构造折线并将其添加到地图的代码：

```
 MKPolyline *thePolyline = [MKPolyline polylineWithPoints:pts count:[arrOfPoints count]];

    [thePolyline setTitle:@"line"];

    [mapView addOverlay:thePolyline]; 
```

折线实际上确实有我的点集合（大约 1000 个），所以我认为问题不存在。我是否缺少地图视图上的一些必需属性或其他一些实现？

**编辑**显示折线`MKMapPoint`生成的代码：

我使用一个包含大约 1100 个点的 xml 文件来生成折线，作为 appConfig 过程的一部分。`NSXMLParser`我分别用和读取和解析文件`NSXMLParserDelegate`。这是生成点的代码（来自协议`foundCharacters`中的方法`NSXMLParserDelegate`）：

```
//NSXMLParserDelegate methods...
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    if(POINT){
        NSArray *arr = [string componentsSeparatedByString:@","];

        MKMapPoint pt = MKMapPointMake([[arr objectAtIndex:1]doubleValue], [[arr objectAtIndex:0]doubleValue]);

        MapPointObject *thePoint = [[MapPointObject alloc] init];
        thePoint.mapPoint = pt;

        //gives the mkmappoint to the array of points.
        [arrOfPoints addObject:thePoint];

        [thePoint release];
    }
} 
```

这是点实际生成`MKPolyline`并将其提供给 mapView 的位置（来自协议`didEndElement`上的方法`NSXMLParserDelegate`）：

```
 if([elementName isEqualToString:@"appConfig"]){
        MKMapPoint *pts = malloc([arrOfPoints count] * sizeof(MKMapPoint));

        for(int i = 0; i <= [arrOfPoints count] - 1; i++){
            MapPointObject *pointObject = [arrOfPoints objectAtIndex:i];
            pts[i] = pointObject.mapPoint;
        }

        MKPolyline *thePolyline = [MKPolyline polylineWithPoints:pts count:[arrOfPoints count]];
        [thePolyline setTitle:@"line"];

        //adding the polyline to the model's mapview
        Model *theModel = [Model sharedModel];

        [theModel.mapView setVisibleMapRect:thePolyline.boundingMapRect animated:YES];
        [theModel.mapView addOverlay:thePolyline];

        free(pts);
    } 
```

上的点数属性`MKPolyline`实际上表示其中有 1100 个点。

**编辑：**示例 XML 值：

```
<appConfig>
<point>-94.847587,38.977967</point>
<point>-94.844111,38.977978</point>
<point>-94.844108,38.977369</point>
<point>-94.844003,38.977369</point>
<point>-94.843955,38.974886</point> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:58:00.400

xml 文件包含坐标（纬度和经度）值。这些坐标值与`MKMapPoint`值（这是地图视图的纬度/经度在平面地图上的 x、y 投影）不同。

你应该存储坐标而不是`MKMapPoint`值（你是）。

因此，不要使用`MKMapPoint`and `polylineWithPoints`，而是使用`CLLocationCoordinate2D`and `polylineWithCoordinates`。

在 xml 解析器方法中，创建并存储一个`CLLocationCoordinate2D`using `CLLocationCoordinate2DMake`.

`pts`数组应该是类型，`CLLocationCoordinate2D *`并且在执行 时`malloc`，使用`sizeof(CLLocationCoordinate2D)`.

然后调用`polylineWithCoordinates`而不是`polylineWithPoints`.

`viewForOverlay`顺便说一句，在进行上述更改后 ，您还需要实际返回一个非零覆盖视图，否则您仍然看不到该行：

```
MKPolylineView *polylineView = [[[MKPolylineView alloc] initWithPolyline:overlay] autorelease];
polylineView.strokeColor = [UIColor redColor];
polylineView.lineWidth = 2.0;
return polylineView; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:28:06.387

我解决了问题，但鉴于@AnnaKarenina 的原始解决方案解决了问题，我将其标记为答案。我只是发布此信息，以便为遇到它的任何其他人提供更多信息。

当我最初编写代码时，MKMapPointMake 采用如下参数：`MKMapPointMake(x,y)`. 当我切换它时，`CLLocationCoordinate2DMake`采用如下参数：`CLLocationCoordinate2DMake(lat,lng)`，或者用笛卡尔术语，`CLLocationCoordinate2DMake(y,x)`. 对于我的特定坐标对集，这不存在，因此它从未调用 viewForOverlay 委托方法。我更改了 CLLocationCoordinate2DMake 构造函数的参数顺序，现在一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T13:38:56.950

```
[self.mapView addOverlay:polyline];
[self.mapView setNeedsDisplay]; 
```

通过调用 setNeedsDisplay 强制刷新 mapView :)

# c++ - 有没有更有效的方法从流中设置 std::vector ？

> ID：10823264
> 
> 赞同：7
> 
> 时间：2012-05-30T19:51:34.570
> 
> 标签：c++, stl, stdvector, stringstream, ostringstream

`std::vector<char>`目前，我将 a的值设置`std::ostringstream`如下：

```
void
foo(std::vector<char> &data, std::stringstream &stream) {
  data = std::vector<char>(stream.str().begin(), stream.str().end());
} 
```

我想知道是否有更有效的方法可以在 C++ 中使用 STL 执行此操作，或者我在这里给出的方法是否被认为合适？改用我会更好`std::stringstream`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T19:55:49.923

正如评论中指出的那样，由于两次调用`str()`. 为了提高效率，你可以避免创建一个临时的`vector`，像这样：

```
void foo(std::vector<char> &data, std::stringstream &stream) {
    const std::string& str = stream.str();
    data.assign( str.begin(), str.end() );
} 
```

您也可以`std::string`通过使用`std::istreambuf_iterator`s 来避免：

```
void foo(std::vector<char> &data, std::stringstream &stream) {
    data.assign(
        std::istreambuf_iterator<char>( stream ), std::istreambuf_iterator<char>()
    );
} 
```

但鉴于这些是*输入迭代器*，`vector`因此没有机会知道将分配多少数据并且可能执行得更差，因为它没有`reserve`足够的空间来避免重新分配。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T19:58:12.837

您的方法调用*未定义的行为*。*按值*`stream.str()`返回一个字符串，也就是一个临时字符串。您使用一个临时的迭代器和另一个的迭代器，创建一个无效的范围。*`begin``end`*

 *将流转换为容器的一种方法是使用通用迭代器接口：

```
#include <iostream>
#include <sstream>
#include <vector>
#include <algorithm>
#include <iterator>

int main(){
  std::stringstream src("....");
  std::vector<char> dest;
  // for a bit of efficiency
  std::streampos beg = src.tellg();
  src.seekg(0, std::ios_base::end);
  std::streampos end = src.tellg();
  src.seekg(0, std::ios_base::beg);
  dest.reserve(end - beg);

  dest.assign(std::istreambuf_iterator<char>(src), std::istreambuf_iterator<char>());

  std::copy(dest.begin(), dest.end(), std::ostream_iterator<char>(std::cout));
} 
```

[Ideone 上的实时示例。](http://ideone.com/ptBBD)

另一种方法是缓存返回的`std::string`对象：

```
std::string const& s = stream.str();
data.reserve(s.size());
data.assign(s.begin(), s.end()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T20:47:33.547

从流迭代器复制到后插入迭代器：

```
std::istream src;
std::vector<char> dst;

std::copy(std::istream_iterator<char>(src), std::istream_iterator<char>(), std::back_inserter(dst)); 
```

istream_iterator 使用格式化转换（即跳过空格），因此这可能不是您想要的。我不确定你的目标是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:55:44.863

> 如果有更有效的方法

`reserve`您可能希望直接调用`data`并使用范围`insert`成员，`data`而不是使用复制分配。`vector`您需要记住的关于 s 的事情是每个节点都可能会增加大小（并重新定位所有元素）。所以，你最好一次性分配内存（如果你知道你将存储多少个对象——你在这里知道）并利用这个事实。*

# php - 我需要一个正则表达式来获取 URL 的国家代码

> ID：10823267
> 
> 赞同：1
> 
> 时间：2012-05-30T19:51:53.517
> 
> 标签：php, regex, url

我需要一个正则表达式来获取 URL 的扩展名，例如国家/地区代码......

例如，我有 3 个站点，它们针对三个国家/地区具有不同的域扩展名，如下所示。

```
http://www.domain.com
domain.de/
domain.co.uk 
```

我需要一个在上述字符串中获取 url 扩展名的正则表达式。返回“com”、“de”或“uk”

请记住，域可能是带有斜杠或不带斜杠的不同字符串。

因此，完美的正则表达式将能够将 de 从以下问题中剔除：

```
"domain.de" or "http://www.domain.de" or "www.domain.de/" 
```

我最接近的是使用以下内容：

```
\w*$ 
```

但这不适用于尾部斜杠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:57:29.507

限制为 HTTP 和 HTTPS，您可以使用：

```
/^(https?:\/\/)?([^@\/]+@)?[a-z0-9.]+\.([a-z]{2,4})(:[0-9]+)?\/?$/
                                      ^^^^^^^^^^^^ 
```

您会在 3 美元中找到 TLD。

```
$ php -r '$t="example.ca"; preg_match("/^(https?:\/\/)?([^@\/]+@)?[a-z0-9.]+\.([a-z]{2,4})(:[0-9]+)?\/?$/", $t, $m); print $m[3]."\n";'
ca
$ php -r '$t="http://user:password@www.example.ca/"; preg_match("/^(https?:\/\/)?([^@\/]+@)?[a-z0-9.]+\.([a-z]{2,4})(:[0-9]+)?\/?$/", $t, $m); print $m[3]."\n";'
ca 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:59:43.040

如果您需要该正则表达式仅适用于您添加的示例，它可以非常简单：

```
\.([a-z]{2,3})\/?$ 
```

这将从您提供给我们的所有类型的输入中获取国家/地区：

```
http://www.domain.com
domain.de
http://www.domain.de
www.domain.de/ 
```

国家代码在捕获组 1 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:59:19.053

使用您已有的，我们可以轻松调整它以考虑尾随斜线

```
\w*[/]?$ 
```

# objective-c - 如何使用“if”语句更改 ImageView (iOS)？

> ID：10823268
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:52:00.240
> 
> 标签：objective-c, ios

用户看到一个图像，它应该根据 if 语句（真或假）更改为另一个 - 不知道如何在objective-c中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:55:06.603

使用此代码：

```
imageView.image = (your true-or-false expression) ? [UIImage imageNamed:@"foo.png"] : [UIImage imageNamed:@"bar.png"]; 
```

如果`true`，你得到`foo.png`你的形象，否则`bar.png`。

请让我知道这对你有没有用。

# php - 是否可以使用 ssh 连接上传文件？

> ID：10823269
> 
> 赞同：1
> 
> 时间：2012-05-30T19:52:03.377
> 
> 标签：php, ssh

我使用 ssh 连接到服务器，我想知道是否有上传文件的命令，比如放在 sftp 连接上。

```
include('Net/SSH2.php');
include('Crypt/RSA.php');

$key = new Crypt_RSA();

$key->loadKey(file_get_contents('/pathtokey.pem'));

$ssh = new Net_SSH2('ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com');
if (!$ssh->login('user', $key)) {
exit('Login Failed');
} 
```

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:56:22.120

您可以使用 SCP 通过 SSH 发送文件

[http://php.net/manual/en/function.ssh2-scp-send.php](http://php.net/manual/en/function.ssh2-scp-send.php)

# neo4j - Neography：遍历与密码

> ID：10823271
> 
> 赞同：4
> 
> 时间：2012-05-30T19:52:09.513
> 
> 标签：neo4j, cypher, neography

我目前正在使用 Neo4j 和 Neography 构建一些东西，并且想知道什么是首选：使用 traverse 方法或 Cypher 查询？

就个人而言，我喜欢 Cypher，但我不知道哪个更好/性能更高

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:27:14.427

我刚刚为 Cypher vs Core API 和 Traverser 框架的朋友之友查询创建了一个基准，该图上有大约 1 个 mio 节点。FOAF 查询不是很复杂，但对于 neo4j 等图形数据库来说是一个很好的用例。

[http://www.rene-pickhardt.de/get-the-full-neo4j-power-by-using-the-core-java-api-for-traversing-your-graph-data-base-instead-of-密码查询语言/](http://www.rene-pickhardt.de/get-the-full-neo4j-power-by-using-the-core-java-api-for-traversing-your-graph-data-base-instead-of-cypher-query-language/)

![Cypher 的执行速度至少慢了一个数量级](../Images/7d020631287b536c5e2d8587503967df.png)

您可以看到 Cypher 的性能比核心 API 差得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:10:10.547

我相信他们都有自己的优势，而且 Cypher 可能已经更直观地表达您的查询。如果您喜欢，请尝试使用 Cypher 形成您的查询，并且如果性能满足您的要求，那么一切都很好！如果没有，那么也许在遍历框架中尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T22:35:02.603

正如 Matthias 所指出的，Cypher 确实很直观，但是我有以下建议：

如果它是微不足道的东西，那就去 Cypher，它更容易编写（实际上是一种乐趣）并且不应该有任何大的性能损失。但是，一旦您有更大的匹配或条件查询，如果您使用自定义遍历器甚至 Gremlin，拥有图的领域知识可能会显着提高性能

# javascript - jQuery JavaScript Datatables 列压缩/挤压在一起

> ID：10823276
> 
> 赞同：0
> 
> 时间：2012-05-30T19:52:21.670
> 
> 标签：javascript, jquery, css, html, datatables

好的，当我在页面上隐藏元素中的表上加载数据表时，我发现了一个问题。我所拥有的是少数基于“选项卡”的页面，当时唯一可见的是活动选项卡，而在激活之前的所有其他选项卡都是`display:none`. 当我手动调用一个选项卡作为主选项卡时，表或其列没有问题。仅当标签最初隐藏出表格的初始显示是一个问题时，它才有问题。

我说初始显示是因为当我单击列标题对给定列进行排序时，表格似乎会自行更正，并且列不再挤压/压缩在一起。

这是我当前的数据表代码

```
$('#'+tableID).dataTable(
{
    "sPaginationType": "full_numbers",
    "bPaginate": false,
    "bFilter": false,
    "bAutoWidth": true,
    "sScrollY": tableY+"px",
    "bScrollCollapse": true,
    "oLanguage": {
        "sInfo": "Showing _END_ Events."
    },
    "aaSorting": [[ 1, "asc" ]],
    "aoColumns": [
         null,
         null
       ]
}); 
```

我试图指定列宽，如：

```
"aoColumns": [
         { "sWidth": "80%" },
         { "sWidth": "20%" }
       ] 
```

这也行不通。所以我现在被困住了，试图解决这个问题，但不确定从哪里/如何开始。

另外为了争论，可以说我的表结构类似于..

```
<table>
   <thead>
     <tr><td></td><td></td></tr>
   </thead>
   <tfoot>
     <tr><td></td><td></td></tr>
   </tfoot>
   <tbody>
     <tr><td></td><td></td></tr>
     <tr><td></td><td></td></tr>
     <tr><td></td><td></td></tr>
   </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:00:42.043

我最终通过搜索解决了我自己的问题，并基于与数据表/jquery ui 相关的 API 文档中给出的示例。

我的解决方案是绑定到 jquery ui 的选项卡事件，然后启动我的函数以根据选择的选项卡构建我需要的表。

```
$(document).ready(function() {
    $("#storage").bind('tabsselect', function(event, ui)
    {
        if (ui.index === 1)
        {
            tables.statistics("metrics", "metric");
        }
    });
}); 
```

# python - Pygame alpha 值

> ID：10823285
> 
> 赞同：1
> 
> 时间：2012-05-30T19:52:53.463
> 
> 标签：python, pygame

我是使用 pygame 的新手，我想知道是否有人可以解释 alpha 值的使用？我不太明白那和colorkey之间的区别。

对于我目前的情况，我想我想使用 alpha 值，但不太清楚如何使用。

在我的游戏中，我有两个精灵，每个表面都加载了 .png 文件。碰撞后，我希望两个图像都消失（完全透明）。

如果有人可以解释 alpha 值的基础知识以及如何在 pygame 中具体使用它们，以及是否可以使用这些 alpha 值来解决我的问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:03:15.680

Colorkey 让您在精灵（表面）中选择一种颜色；该颜色的任何像素都将完全透明。（如果您还记得 .gif 透明度，那是同样的想法。）

'alpha' 是不透明度的度量 - 0 表示完全透明，255 表示完全不透明 - 可以应用于整个精灵（作为 alpha 平面）或每个像素（速度较慢，但​​提供更多控制）。

为了使精灵消失，我只需将它们设置为不可见，而不是使用 alpha 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T02:58:09.717

虽然如果您希望精灵在它们消失之前消失，但在它们碰撞后逐渐降低 alpha 值。当 alpha 达到 0 时，如果不再需要精灵，请使用 del sprite。

# php - 删除没有 Array_Unique 的数组元素

> ID：10823288
> 
> 赞同：2
> 
> 时间：2012-05-30T19:53:09.580
> 
> 标签：php

尝试在不使用 array_unique 的情况下删除重复的数组元素。我正在尝试使用 array_flip 方法，但这似乎对我不起作用。我到目前为止的代码是：

```
$arr = array(
   'a' => "one",
   'b' => "two",
   'c' => "three",
   'd' => "two",
   'e' => "four",
   'f' => "five",
   'g' => "three",
   'h' => "two"
);

function removeDuplicates($arr) {

$arr = array_flip($arr);
$arr = array_flip($arr);

}
print_r(removeDuplicates($arr)); 
```

我最终想要得到的输出是：

```
 [a] => one
    [e] => four
    [f] => five 
```

这纯粹是出于教育目的，因为我正在尝试找到不同的方法来做到这一点。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:17:35.497

另一种解决方案是：

```
$counts = array_count_values($arr);

foreach ($arr as $key => $value) {
        if ($counts[$value] > 1) {
                unset($arr[$key]);
        }
} 
```

此外，array_unique 确保没有重复值，而您希望数组没有重复值。这是完全不同的，我想删除对 array_unique 函数的提及将使问题不那么令人困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:23:27.710

array_flip 将确保您没有任何重复项，但不会为您提供唯一值。

您正在寻找的输出

```
[a] => one
[e] => four
[f] => five 
```

是独特的价值观。你可能得到的数组是

```
[a] => one
[b] => two
[c] => three
[e] => four
[f] => five 
```

对于您的输出，您需要执行类似的操作

```
function array_real_unique($arr, $strict = FALSE) {
    $unique = array();
    $dupes = array();
    foreach ($arr as $key => $value) {
        if (($index = array_search($value, $dupes, $strict)) === FALSE)
            $unique[$key] = $value;
        else
            unset($unique[$index]);
        $dupes[$key] = $value;
    }

    return $unique;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:13:02.243

如果您添加`return $arr;`到您的代码中，它的行为与`array_unique`. 嗯，差不多。 `array_unique`将保留元素的第一个实例，而您的将保留最后一个。

您的示例显示您要删除具有重复元素而*不是*重复元素的元素。为此，您需要获取重复条目的列表，然后删除这些值。

**更新：** 签出[`array_filter`](http://php.net/array_filter)，这应该适合您的情况。

```
// This only works in PHP 5.3+
$arr = array_filter($arr, function($a) use($arr){
    // remove the element if it exists more than once
    return count(array_keys($arr, $a)) === 1; // Get the keys for a value
}); 
```

演示：[http ://codepad.viper-7.com/l8JkSh](http://codepad.viper-7.com/l8JkSh)

# peoplesoft - PeopleSoft 使页面只读 - 特定行

> ID：10823294
> 
> 赞同：2
> 
> 时间：2012-05-30T19:53:21.437
> 
> 标签：peoplesoft, rowset

我有一个包含父记录和几个子记录的页面。有一个字段（级别 1）是一个复选框，它是“最终草案”字段 - 选中此字段后，无法进行更多更改（即使在更正模式下）；必须插入新行/effdt。孩子们的记录都在2级。现在，我拥有的是：

```
&RS7 = GetRowset(Scroll.AVZ_JD_DTL_TBL);
&final_draft = &RS7.GetRow(1).getrecord(Record.AVZ_JD_DTL_TBL).getfield     (Field.FINAL_VALUE).Value;

If &final_draft = "Y" Then
  Page.AVZ_JD_DTL_PG.DisplayOnly = True;
 Else
  Page.AVZ_JD_DTL_PG.DisplayOnly = False;
 End-If; 
```

因此，假设我处于校正模式，并且我有 3 行 - effdts 2012 年 1 月 1 日、2012 年 5 月 1 日和 2012 年 6 月 1 日，勾选了日期为 2012 年 5 月 1 日的行，当我在生效日期“分页”/“滚动”时，我希望 2012 年 1 月 1 日的行是可编辑的，2012 年 5 月 1 日的行是只读的，然后是 2012 年 6 月 1 日的行可编辑。

我想也许我需要单独“禁用”每个行集，而不是整个页面。我只是在研究行集/滚动，在程序的早期我正在做一些操作：

&RS1 = GetLevel0().GetRow(1).GetRowset(Scroll.AVZ_JD_DTL_TBL).GetRow(1).GetRowset(Scroll.AVZ_JD_RESP_TBL); &RS2 = GetLevel0().GetRow(1).GetRowset(Scroll.AVZ_JD_DTL_TBL).GetRow(1).GetRowset(Scroll.AVZ_JD_EXPR_TBL);

&RS1.Sort(AVZ_JD_RESP_TBL.ORDER_SEQ, "A"); &RS2.Sort(AVZ_JD_EXPR_TBL.ORDER_SEQ, "A");

问题是，我如何知道我当前正在查看哪一行，然后获取该行的 FINAL_VALUE 字段，然后为该 effdt 灰色/禁用页面上的所有内容？（然后，当然，如果您通过该 effdt 到没有选中该复选框的那个，则所有内容都需要再次可编辑）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:56:37.260

您可以循环遍历 1 级 scolls 以查找复选框，然后如果找到则循环遍历 2 级滚动，然后将行的**Active**属性设置为 false。

我没有可用于测试此代码的 PeopleSoft 系统，但它会是这样的：

```
&LEVEL0 = your level 0 record
&LEVEL1 = &LEVEL0.GetRowset(Scroll.AVZ_JD_DTL_TBL); /* handle to level 1 */
For &I = 1 To &LEVEL1.ActiveRowCount
    if &LEVEL1(&I).final_draft = "Y" then   /* check box is on */
        &LEVEL2 = &LEVEL0(1).&LEVEL1(&I).GetRowset(Scroll.AVZ_JD_EXPR_TBL);
        For &J = 1 to &LEVEL2.ActiveRowCount
            &LEVEL0(1).&LEVEL1(&I).&LEVEL2(&J).AVZ_JD_EXPR_TBL.Active = "False";
        End-For;
    End-If;
End-For; 
```

假设您的 1 级记录是**AVZ_JD_DTL_TBL**并且您的 2级记录是**AVZ_JD_EXPR_TBL**。请仔细检查 PeopleBooks 的确切语法，但我认为这是正确的。

# html - 隐藏 tbody 时从 HTML 表格中删除间隙

> ID：10823297
> 
> 赞同：0
> 
> 时间：2012-05-30T19:53:55.147
> 
> 标签：html, html-table

我正在尝试使用`<tbody>`标签隐藏我的表格的一部分，但它现在显示隐藏行所在的间隙。

这是我正在使用的标签：

```
<tbody style='visibility:hidden'> 
```

谢谢，

营汤1988

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:54:58.520

利用：

```
<tbody style='display: none;'> 
```

这样做的原因是`visibility: hidden`隐藏了元素的内容，但在`document`. `display: hidden`但是，隐藏内容并将其从文档流中删除。

这是“不可见”和“不存在”之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:55:43.523

尝试：

样式='显示：无'

visibility:hidden 仍然会使 tbody 占用空间（因为它是不可见的，而不是不显示的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:57:02.713

做这样的事情

```
<tbody style="display: none; margin: 0px; padding: 0px;"> 
```

# sql - sqlQuery：不可能将ID号作为字符输入R？

> ID：10823298
> 
> 赞同：7
> 
> 时间：2012-05-30T19:53:56.310
> 
> 标签：sql, r, dataframe, rodbc

我正在使用`RODBC`ORACLE DATA BASE (DB) 中的包。一切都做得很好，但我需要从这个数据库中获取一个表和一些变量作为字符类型，而不是数字。

所以，我这样查询：

```
e    ManzResul_VIII<-sqlQuery(con,"select distinct t.fono_id_dis,
            t.id_predio,
            t.co_calle,
            t.nu_casa,
            t.x,
            t.y,
            t.plancheta  from c_araya.proy_dist08_todo t  where nvl(t.fono_tipo_dis, '-') not in ('CLIENTE', 'POTENCIAL', 'CARTERA')  and nvl(t.x, 0) <> 0 ") 
```

无法将 ID 号作为 Character 获取，此查询将我的 iDs 变量的类型从 Character 类型更改为 Numeric 类型（ID 开头是零，但已将其更改为数字）。我已经阅读了功能描述，但我可以看到如何管理它。

任何想法将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:57:46.293

更改查询以将 id 转换为所需的数据类型：

```
select distinct cast(t.fono_id_dis as varchar(255)) as id
. . . 
```

这应该适用于大多数数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T17:59:16.780

这对我有用：

```
library(RODBC)
con <- odbcDriverConnect('driver={SQL Server};server=[your server name];database=[your database name];trusted_connection=true')
ManzResul_VIII<-sqlQuery(con,"select distinct ('m' + id) as id from [your table]") 
```

# c# - 在 c# 中使用 LINQ 查找分组列表的组合

> ID：10823302
> 
> 赞同：5
> 
> 时间：2012-05-30T19:54:25.817
> 
> 标签：c#, linq

假设我有一个对象，其中包含一个人的姓名和他们的原籍城市。

```
public class personDetails
{
    public string City;
    public string Name;
} 
```

我有一个添加了以下条目的列表。

```
Name   City
John | London
Jane | London
Tom  | New York
Bob  | New York
Fred | New York 
```

我正在寻找的是所有可能的名称组合，按城市分组。

```
John Tom
John Bob  
John Fred
Jane Tom
Jane Bob
Jane Fred 
```

如果我事先知道组的数量，我可以使用以下代码执行此操作

```
List<personDetails> personList = new List<personDetails>();
//populate list

var groupedPersons = personList.GroupBy(c => c.City);
foreach (var item1 in groupedPersons[0])
{
    foreach (var item2 in groupedPersons[1])
    {
        Console.WriteLine(item1.Name + " " + item2.Name);
    }          
} 
```

但是，这仅在我提前知道组数的情况下才有效，并且随着组数的增加而迅速变得笨拙。我确信使用 LINQ 有一种优雅的方法可以做到这一点，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:04:18.297

我们将从[这里](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)逐字提取的以下代码片段开始。（这是一个很好的链接，值得一读）。

```
public static class MyExtensions
{
    public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences)
    {
        IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() };
        return sequences.Aggregate(
            emptyProduct,
            (accumulator, sequence) =>
            from accseq in accumulator
            from item in sequence
            select accseq.Concat(new[] { item }));
    }
} 
```

之后我们需要做的就是：

```
var groupedPersons = personList.GroupBy(c => c.City)
    //need an enumerable of enumerables, not an enumerable of groupings, 
    //because the method isn't covariant.
    .Select(group => group.AsEnumerable());

var results = groupedPersons.CartesianProduct();
foreach (var group in results)
{
    foreach (var person in group)
    {
        Console.Write(person.Name + " ");
    }
    System.Console.WriteLine();
} 
```

# javascript - iOS 用 Ja vaScript 提交表单

> ID：10823304
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:54:38.077
> 
> 标签：javascript, objective-c, ios, uiwebview

是的，你没有看错。我觉得问这个有点傻，但一直无法给出明确的答案，只是模糊的假设。

我的应用程序中嵌入了由 UIWebView 加载的 Web 表单，一旦填写完毕，就需要提交。

现在，我知道可以通过 window.location 将此数据传递给 Objective-c 代码，然后从那里通过 POST url 请求将其发送出去。但是，我想知道是否可以跳过此步骤并将其从我嵌入的 Web 表单中的 html/javascript 直接发送到我的服务器上的表单。

即，我可以将表单从嵌入表单中的 javascript 直接指向我的服务器，然后完全跳过 iOS 吗？

任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:58:06.243

是的，完全跳过 iOS。你为什么不呢？

> 我可以……完全跳过iOS吗？

您基本上只是使用 UIWebView 作为外壳来运行您的网络应用程序。很多应用程序都这样做，以便他们可以在应用商店中拥有一个网络应用程序。没有必要在 Objective-C 中编写任何类似的代码。

# php - 使用 Amazon 的 SES 从 PHP 站点发送电子邮件

> ID：10823310
> 
> 赞同：1
> 
> 时间：2012-05-30T19:55:04.827
> 
> 标签：php, perl, amazon-web-services, sendmail, amazon-ses

我想在 Ubuntu 实例上通过 PHP 站点的[开发人员脚本使用 Amazon 的 SES（简单电子邮件服务）。](http://aws.amazon.com/developertools/Amazon-SES)

到目前为止，我成功

1.  验证电子邮件
    `./ses-verify-identity.pl -k ./aws-credentials -v email@example.com`
2.  使用`ses-send-email.pl`相同的凭据发送测试电子邮件

但是当我尝试将它们绑定到 php.ini 中的 sendmail_path 配置中时

```
sendmail_path = "/opt/third-party/amazon/ses/ses-send-email.pl -k /opt/third-party/amazon/ses/aws-credentials -f email@example.com -r" 
```

我在 Apache 错误日志中得到的只是：

```
Unknown option: oi
Usage:
    ses-send-email.pl [--help] [-e URL] [-k FILE] [--verbose] -s SUBJECT -f
    FROM_EMAIL [-c CC_EMAIL[,CC_EMAIL]...] [-b BCC_EMAIL[,BCC_EMAIL]...]
    TO_EMAIL[,TO_EMAIL]...

    ses-send-email.pl [--help] [-e URL] [-k FILE] [--verbose] -r [-f
    FROM_EMAIL] [TO_EMAIL[,TO_EMAIL]...] 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:13:26.370

发生错误是因为 PHPMailer使用以下选项[调用](http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.phpmailer.php#706)[Postfix sendmail(1)](http://www.postfix.org/sendmail.1.html)`-oi`：

> ```
>  -oi    When reading a message from standard  input,  don't
>          treat  a line with only a . character as the end of
>          input. 
> ```

这不是由`ses-send-email.pl`.

一种可能的解决方法是[放弃该选项](https://github.com/mariusbutuc/ses-tools/commit/252a7f4f7892194067dd25cd79d8d66d9bd5ef8d)。

# java - Java中的抽象类和反射

> ID：10823312
> 
> 赞同：2
> 
> 时间：2012-05-30T19:55:07.143
> 
> 标签：java, reflection, abstract-class

我有一个抽象类，它主要被实例化为匿名内部类，在那里实现了抽象方法。这些实例被传递，因此在代码中的不同位置，我想获得其中一个实例的副本，一个新实例，但方法以相同的方式实现。这是我的代码示例：

```
public abstract class AbstractClass {
String id;
Entity owner;
public AbstractClass(String id){
    this.id=id;
} 
public Mover(){
    id="This is an id";
}
abstract void update();
} 
```

我这样实例化它：

```
AbstractClass instance= new AbstractClass("This is a test"){
void update(){
//do stuff
}
} 
```

稍后，我想要该实例的副本，而不是引用，其中 update() 执行相同的操作，但所有者将是不同的实体。我尝试使用反射 (.getClass.newInstance())，但我得到了 java.lang.InstantiationException。为什么这不起作用，有没有更好的方法来做我正在做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T19:58:36.630

您不能通过 newInstance() 实例化匿名内部类。非静态内部类持有对其容器对象的引用，您需要该对象来创建它们。

请参阅[Java 教程 -> 嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:09:50.883

该异常在两种情况下引发（来自[docs](http://docs.oracle.com/javase/7/docs/api/java/lang/InstantiationException.html)）：

*   类对象表示抽象类、接口、数组类、原始类型或 void
*   该类没有空构造函数

根据[我所做的一个简单测试](http://ideone.com/gymTw)，在您的情况下，问题是生成的匿名类没有空构造函数。

测试代码：

```
import java.util.*;
import java.lang.*;

class Main
{
        public static void main (String[] args) throws java.lang.Exception
        {
            {
            Test thing = new Test(){ public void update(){ id="updated"; } };

            thing.update();

            Test thang = thing.getClass().newInstance();

            System.out.println( thing.id+" "+thang.id );
            }

            {
            Test2 thing = new Test2("name"){ public void update(){ id="updated"; } };

            thing.update();

            Test2 thang = thing.getClass().newInstance();

            System.out.println( thing.id+" "+thang.id );
            }

        }
}

abstract class Test{
    public String id;
    Test(){ id = "Empty"; }
    abstract public void update();
}

abstract class Test2{
    public String id;
    Test2(String me){ id = me; }
    abstract public void update();
} 
```

第一个测试 (with `Test`) 运行得很好，第二个测试 (with ) 在调用中`Test2`失败并出现该异常。`newInstance`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:30:46.633

匿名内部类需要 NO NAME！你不应该创建一个名为*'instance'*的对象 每当你需要抽象类的副本时，例如，作为方法的参数，直接使用它而不是创建和使用*'instance'*：

```
someObject.methodToBeUsed(new AbstractClass("This is a test"){
   void update(){
   //do stuff
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:59:01.273

听起来你想克隆对象，实现接口 Cloneable 并添加一个克隆方法来定义你需要做什么来克隆所述对象。在这个简单的情况下，它只是意味着实例化一个新对象并设置 id，但我假设您的实际实现更高级一些。

# php - 访问数组中的数组时是否应该使用单引号？

> ID：10823315
> 
> 赞同：0
> 
> 时间：2012-05-30T19:55:27.773
> 
> 标签：php

> **可能重复：**
> [PHP 数组键是否需要我们用引号括起来？](https://stackoverflow.com/questions/1381300/do-php-array-keys-need-to-we-wrapped-in-quotes)
> [可以在 PHP 中使用 array[key] 吗？](https://stackoverflow.com/questions/2405482/is-it-okay-to-use-arraykey-in-php)

这是我正在运行的代码，我想知道是否应该像本文中的第二行代码那样用单引号引用单词 message。哪个是最佳实践？

```
$post = array('message' => $result[message]); 
```

或这个？

```
$post = array('message' => $result['message']); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:57:09.490

一定要使用字符串！

如果将“ ”定义为常量，则您的第一个示例 ,`$post = array('message' => $result[message]);`将不会执行相同的操作。`message`

此外，通过语法高亮显示，

```
// this
$post = array('message' => $result['message']);
// or this
$post = array('message' => $result["message"]);
// is more readable than this
$post = array('message' => $result[message]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:01:44.133

如果`message`常量未定义或已定义但不包含值，则使用不正确`"message"`：

`$post = array('message' => $result[message]);`

为什么？

写入`message`（不带 $ 符号）意味着您正在访问一个 PHP[常量](http://php.net/manual/en/language.constants.php)。PHP 的默认行为是发出一个常量未定义的通知，然后将未定义常量的名称转换为一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:56:56.640

为了便于阅读，我建议使用引号。当有人阅读您的代码时，他们可能认为 [message] 是一个变量，而实际上它应该是一个文字字符串：'message'。

# html - 在主机上使用手动上传的字体文件

> ID：10823317
> 
> 赞同：0
> 
> 时间：2012-05-30T19:55:40.247
> 
> 标签：html, css

通常我们在 html 或 css 中使用的字体，都是用 style/id/class 这样声明的`font:"Georgia, Arial, Garamond;"`。这意味着它首先尝试查找`Georgia`，如果没有找到，则`Arial`继续下一个。但是我只想知道是否有任何方法可以通过在我的主机服务器上上传来使用字体。（我已经从互联网上下载的字体）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:02:22.050

您可以使用[Font Squirrel](http://www.fontsquirrel.com/)网站`CSS`为您生成代码。

基本上，您上传要用于网页的字体：

*   它将生成具有跨浏览器兼容性所需的版本；
*   还为您提供了一个文件下载，其中包含准备好的`CSS` 和必要的字体文件。

请参阅此[工作示例](http://dl.dropbox.com/u/76169930/stackoverflow/question/10727272/giddyup-demo.html)！

**为了更好地说明：**

```
@font-face {
    font-family: 'GiddyupWebRegular';
    src: url('giddyup-webfont.eot');
    src: url('giddyup-webfont.eot?#iefix') format('embedded-opentype'),
         url('giddyup-webfont.woff') format('woff'),
         url('giddyup-webfont.ttf') format('truetype'),
         url('giddyup-webfont.svg#GiddyupWebRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

[在此处](http://www.fontsquirrel.com/fontface/generator)直接访问字体生成器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:57:27.050

使用@font-face

```
@font-face { font-family: Delicious; src: url('Delicious-Roman.otf'); } 
@font-face { font-   family: Delicious; font-weight: bold; src: url('Delicious-Bold.otf'); } 
```

[http://www.css3.info/preview/web-fonts-with-font-face/](http://www.css3.info/preview/web-fonts-with-font-face/)

# ios - 使用 Core Audio 控制单声道播放输出

> ID：10823322
> 
> 赞同：2
> 
> 时间：2012-05-30T19:55:58.453
> 
> 标签：ios, core-audio, playback, audiounit

我正在为 iOS 开发一个应用程序，它使用 RemoteIO 音频单元从麦克风录制音频，对其进行处理并输出到扬声器（耳机）。目前我使用单通道（单声道）进行输入和输出。

我想做的是允许用户选择输出扬声器：仅左、仅右或两者兼而有之。我当前的代码仅支持“两者”设置 - 两个扬声器发出相同的声音。

下面是我设置输入和输出总线的流格式（kAudioUnitProperty_StreamFormat）的方法：

```
AudioStreamBasicDescription ASBD = {0};
size_t bytesPerSample = sizeof(SInt16);
ASBD.mFormatID = kAudioFormatLinearPCM;
ASBD.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
ASBD.mSampleRate = 44100;
ASBD.mFramesPerPacket = 1;
ASBD.mBytesPerFrame = bytesPerSample;
ASBD.mBytesPerPacket = bytesPerSample;
ASBD.mBitsPerChannel = 8 * bytesPerSample;
ASBD.mChannelsPerFrame = 1; 
```

我的渲染回调（kAudioUnitProperty_SetRenderCallback）大致如下：

```
AudioUnitRender(remoteIO, ioActionFlags, inTimeStamp, inputBus, inNumberFrames, ioData);
SInt16 *renderBuffer = ioData->mBuffers[0].mData;
// Process renderBuffer and modify the samples 
```

实现仅左/仅右设置的最简单方法是什么？如果有任何相关内容，我不介意更改设备设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:24:51.957

最简单的方法是在您控制的两个 RemoteIO 元素（即输入范围的输出元素和输出范围的输入元素）上使用立体声 ASBD，并且只发送零作为非活动通道的样本，如果有的话。

RemoteIO 单元的即时格式转换能力有限，但它可以使用其内部格式转换器将来自麦克风的单声道流分成立体声流。

正确配置后，根据确切的 ASBD，您的渲染回调将接收缓冲区列表，这些缓冲区列表为每个通道（非交错）或单个交错缓冲区具有单独的缓冲区。您需要`bzero`其中一个缓冲区（非交错情况），或迭代样本并将它们静音（设置为零；交错情况）。

（注意：选择性通道静音可能会在您自己处理之后发生，因此您可能需要更改自己的代码以适应立体声数据。或者，将 RemoteIO 单元的输入范围的输出元素设置为发出单声道样本，执行您在那里进行处理，然后使用您自己的 AudioConverter 将流拆分为立体声。）

# jquery - 使用jquery计算N个输入的值

> ID：10823329
> 
> 赞同：1
> 
> 时间：2012-05-30T19:56:17.877
> 
> 标签：jquery, jquery-plugins

我有一个表单，用户可以在其中创建无限数量的行（使用 jquery-添加新行）来添加多个产品信息。当他们创建新行时，代码如下所示。

现在我要做的是，每当用户输入产品数量和产品价格的值时，我想立即计算总数`(product quantity* product price)`并将结果放入`total[]`输入中，然后调整`total amount`表单底部的输入。

当我使用 jquery 有固定数量的输入时，我知道如何做到这一点，但由于在这种情况下输入的数量不固定，我对如何实现这一点有任何想法。

你能告诉我吗？

提前致谢 ：）

```
 <tr>

   <td><input type="text" name="name[]" id="name_1" value=""></td>
   <td><input type="text" name="quantity[]" id="quantity_1" value=""></td>
   <td><input type="text" name="rate[]" id="rate_1" value=""></td>
   <td><input type="text" name="total[]" id="total_1" value=""></td>                        

 </tr>  

 <tr>

  <td><input type="text" name="name[]" id="name_2" value=""></td>
  <td><input type="text" name="quantity[]" id="quantity_2" value=""></td>
  <td><input type="text" name="rate[]" id="rate_2" value=""></td>
  <td><input type="text" name="total[]" id="total_2" value=""></td>                     

 </tr>  

   <!-- I have N number of rows like above. and at the bottom I have input for total -->
 <tr>

   <td>&nbsp;</td>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
   <td><input type="text" name="totalamount" id="totalamount" value=""></td>                        

  </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:09:55.767

这是一种可能的解决方案：

```
$(":text[name='quantity[]'], :text[name='rate[]']").on("change", function() {
    var totalamount = 0;
    $("tr").each(function() {
        var quantity = +$(this).find(":text[name='quantity[]']").val() || 0;
        var rate = +$(this).find(":text[name='rate[]']").val() || 0;
        var subtotal = quantity * rate;
        $(this).find(":text[name='total[]']").val(subtotal);
        totalamount += subtotal;
    });
    $("#totalamount").val(totalamount);
});​ 
```

**演示：http:** [//jsfiddle.net/ak49E/](http://jsfiddle.net/ak49E/)

# objective-c - 从其他类继承方法

> ID：10823336
> 
> 赞同：0
> 
> 时间：2012-05-30T19:56:34.763
> 
> 标签：objective-c, class, inheritance

我构建了一个包含多个类的应用程序。其中一个名为“photoItem”的类包含一个图像项和一个方法。

我尝试在我的 appDelagate 中使用该方法，但没有奏效。

我的 photoitem.h 是：#import

```
@interface photoItem : NSObject
 {
     UIImage *imageView;
     NSString *photoNameLabel;
     NSString *photographerNameLabel;
     UIButton *viewPhoto;
 }
 @property(readonly) NSString *name;
 @property(readonly) NSString *nameOfPhotographer;
 @property(readonly) UIImage *imageItem;

 -(id)makePhotoItemWIthPhoto:(UIImage*)image name:(NSString*)photoName photographer:   (NSString*)photographerName;

@end 
```

这是我的 photoitem.m：

```
#import "photoItem.h"

@implementation photoItem

@synthesize name;
@synthesize nameOfPhotographer;
@synthesize imageItem;

-(id)makePhotoItemWIthPhoto:(UIImage*)image name:(NSString*)photoName photographer:(NSString*)photographerName
{
    [self setName:photoName];
    [self setNameOfPhotographer:photographerName];
    [self setImageItem:image];
    return self;
}

-(void) setName:(NSString *)name
{
    photoNameLabel = name;
}  

-(void) setNameOfPhotographer:(NSString *)nameOfPhotographer
{
    photographerNameLabel = nameOfPhotographer;
}

-(void)setImageItem:(UIImage *)imageItem
{
    imageView = imageItem;
}
@end 
```

我的应用程序是：

```
 #import "AppDelegate.h"
 #import "PersonListViewController.h"
 #import "RecentsViewController.h"
 #import "PhotoListViewController.h"
 #import "photoItem.h"

 @implementation AppDelegate

 @synthesize window = _window;

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
     // Override point for customization after application launch.

     photoArray = [[NSMutableArray alloc] init];
    [photoArray addObject:[photoItem XXXXXX];

} 
```

我想实现最后一行中的方法：[photoArray addObject:[photoItem XXXXXX] 但是xcode没有让我选择和使用这个方法。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:14:49.083

就您的代码现在而言，由于以下原因，它无法正常工作： 1\. 您的 photoArray 需要作为属性列出并合成 2\. 您还没有分配/初始化 photoItem。

在界面 (.h) 中执行以下操作：

```
@property(nonatomic,strong) NSMutableArray *photoArray; 
```

在 @implementation 指令之后的实现 (.m) 中，在您的 @synthesize 窗口之前或之后执行此操作：

```
 @synthesize photoArray; 
```

此外，您应该首先使用一组大写字母命名类，以便您（和其他人）可以快速区分类和类的实例。您可以在其前面加上您公司的首字母或您的姓名。例如，如果您的名字是 John Smith，您可以将类命名为 JSPhotoItem。代码看起来像这样：

```
photoArray = [[NSMutableArray alloc] init];
 JSPhotoItem *photoItem=[JSPhotoItem alloc] init];
  // perform any other initialization of the photoItem object

 [photoArray addObject:photoItem]; 
```

祝你好运

吨

# php - php: 为什么要声明一个数组 $array=array() - 它有什么好处？

> ID：10823337
> 
> 赞同：1
> 
> 时间：2012-05-30T19:56:46.707
> 
> 标签：php, arrays, variables

`$array[]="value 1"`如果您只是想以这种方式为变量赋值：`$array[]="value 2"`

您是否首先必须声明`$array=array()`？显然你不必这样做，因为它没有它就可以工作，但你为什么要这样做呢？或者这样做有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:59:53.143

我认为主要是可读性。可能有人（或 5 个月后的你自己）会出现并想知道 $array[] 来自哪里，因为它“神奇地出现在代码中”。使用 $myArray=array()，你至少知道（嘿，这是我们第一次看到变量的地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:08:25.287

当您构建代码时，它也可能很有用。例如如果我们首先在顶部声明变量

```
<?php
$myArray = array();

//... 
```

在底部我们加载一个模板文件`$template->render('template.html', $myArray);`

假设我们有一个 if 语句，如果某个条件为真，我们为数组分配一个新值。但是如果条件不成立，我们将不会传递任何信息（新值到数组），因此不会启动数组 - 除非未声明数组，否则它将产生错误。但既然是这样，我们只需加载一个空数组就不会出现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T00:23:25.027

您所描述的不是声明，而是初始化。您不是在声明 $array 是一个数组，而是在为它分配一个值（空数组）。

这样的初始化可以用来建立一个作用域，也许它可以使代码更具可读性（虽然我看不到如何），但通常只有在你特别想要一个空数组时才会这样做。经典示例是使用 [] 语法附加到数组时。考虑以下：

```
$a = 'old value';
$a = array();
$a[] = 1;
$a[] = 2;
$a[] = 3; 
```

如果没有第二行，这将产生错误。

顺便说一下，array() 命令不是一个普通的函数。它是一种语言结构，从 PHP 5.4 开始，您可以将其替换为更短的 [] 语法：

```
$a = 'old value';
$a = [];
$a[] = 1;
$a[] = 2;
$a[] = 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:59:49.530

主要用于文档目的。它提醒开发人员该变量旨在用作数组。

例如，在 CodeIgniter 中，您可以将值传递给视图，但它们必须是数组，否则会引发异常。将变量声明为`array()`提醒您，即使您打算传递单个值，也必须将其作为元素插入到数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T21:06:18.590

不，你没有。

通常，我唯一一次用空数组初始化数组是在这样的情况下：

```
$list = array();
for($database_result as $row)
{
    $list[] = $row['value'];
}

echo implode(', ', $list); 
```

如果碰巧在数据库结果中没有行，那么`implode`调用将失败，因为 $list 将不存在。

* * *

你给出的例子，只是设置一个你已经知道的值列表，我通常这样做：

```
$array = array
(
    "value 1",
    "value 2",
); 
```

# objective-c - 在 Obj-C 中修改数组（由 getter 作为例如 int** 返回）

> ID：10823339
> 
> 赞同：0
> 
> 时间：2012-05-30T19:56:54.293
> 
> 标签：objective-c, arrays, getter

假设有一个类：

```
@interface FooBar : NSObject

@property(readonly, getter = _getSpace) int** space;

@end 
```

空间属性实现如下：

```
@implementation FooBar

int m_space1[256];
int m_space2[256];
int* m_space[2] = { m_space1, m_space2};

-(int **) _getSpace {
    return m_space;
}

@end 
```

那么使用以下方法更改 int[2][256] 数组是否合法：

```
FooBar * f = [[FooBar alloc] init];
f.space[1][120] = 0; 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:01:08.407

是的。您正在返回一个指针，然后修改一个被指向的值。这是完全合法的。如果您不想允许这样做，则需要将适当的 const 修饰符添加到类型中。

不合法的是返回一个结构并直接修改该结构。

* * *

正如 KennyTM 在评论中提到的那样，您的`m_space{,1,2}`变量是全局变量，而不是您可能想要的实例变量。解决此问题的最简单方法是在您的 中放置一个 ivar 块`@implementation`，如

```
@implementation FooBar {
    int m_space1[256];
    int m_space2[256];
    int* m_space[2] = { m_space1, m_space2 };
}

-(int **) _getSpace {
    return m_space;
}
@end 
```

# javascript - Google Maps v3：地图未显示

> ID：10823346
> 
> 赞同：0
> 
> 时间：2012-05-30T19:57:10.030
> 
> 标签：javascript, html, google-maps, google-maps-api-3

您能帮我解决 [Google Maps API] 中的这个问题吗？我不知道为什么地图不显示。

[这是小提琴。](http://jsfiddle.net/TZyCP/2/)

**Javascript：**

```
//Map Options
var roadmap = {
  infoWindow: new google.maps.InfoWindow(),
  options: {
    map: {
      center: new google.maps.LatLng(34.02238, -118.293338),
      zoom: 15,
      mapTypeId: 'roadmap'
    },
    marker: {
      position: roadmap.options.center,
      title: "Hello",
      icon: 'http://maps.google.com/mapfiles/ms/micons/blue-dot.png',
      shadow: 'http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png'
    }
  }
};

//Street view Options
var StreetView = {
  options: {
    position: roadmap.options.map.center,
    zoom: 1
  }
};

//Functions
function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    infoWindow.getContent();
    marker.openInfoWindowTabsHtml(infoTabs);
  });
}

function googleMaps() {
  //Road map
  roadmap.map = new google.maps.Map(document.getElementById("map"), roadmap.options.map);

  //Road map's Marker
  roadmap.options.marker.map = roadmap.map;
  roadmap.marker = new google.maps.Marker(roadmap.options.marker);

  //Street view map
  StreetView.map = new google.maps.StreetViewPanorama(document.getElementById("map_StreetView"), StreetView.options);

  //Bind onClick to marker & infoWindow
  bindInfoWindow(roadmap.marker, roadmap.map, roadmap.infoWindow, roadmap.options.marker.title);
} //end of load()

/*Load | Call googleMaps after document is loaded*/
google.maps.event.addDomListener(window, 'load', function() {
  googleMaps();
  //... (add more code here)
});
```

**HTML：**

```
<!-- START: Google Maps API -->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="this_map.js"></script>
<!-- __END: Google Maps API -->

<div id="map-container" >
  <div id="map_StreetView" style="width: 350px; height: 250px"></div><br/>
  <div id="map" style="width: 350px; height: 250px"></div>
</div>
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:09:29.503

错误在这里：

```
position: roadmap.options.center 
```

您不能引用您刚刚创建的对象。

我将其更改为：

```
position: new google.maps.LatLng( 34.02238, -118.293338 ) 
```

它奏效了。

这是你的工作小提琴：http: [//jsfiddle.net/sGHqa/](http://jsfiddle.net/sGHqa/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:07:53.160

`TypeError: 'undefined' is not an object (evaluating 'roadmap.options')`Whiiiiiiiiiich 是一种预期，因为您正在定义路线图......

# html - mailto 参数无法识别

> ID：10823347
> 
> 赞同：1
> 
> 时间：2012-05-30T19:57:14.180
> 
> 标签：html, mailto

全部 - 我在 android 之外运行一个为用户发布电子邮件的应用程序。其中一些用户是移动用户，而在这些移动用户中，其中一些是安卓用户。在本机客户端中查看基于 HTML 的电子邮件时，用户可以单击 HREF 邮件，该邮件应打开一个新的邮件窗口，其中包含预先填充的主题和正文。出于某种原因，这适用于 K-9 和所有其他移动平台，但在本机客户端中则不然。这是我的邮件：

```
<a href="mail to:%Bind(:1)?cc=%Bind(:2)&bcc=%Bind(:3)&subject=%Bind(:4)&body=%Bind(:5)">%Bind(:6)</a> 
```

别担心，绑定确实会填充:)。在本机客户端中，mailto 会打开“TO”字段正确的窗口，但是，对于 CC 和 BCC，我得到一个“”，主题和正文是空的。

有任何想法吗？

# android - 如何使用 Android 自定义库？

> ID：10823350
> 
> 赞同：0
> 
> 时间：2012-05-30T19:57:30.187
> 
> 标签：android, sdk, jar

我正在尝试为将成为 jar 文件的 Android 项目创建 SDK。

我遇到的问题是该库具有返回设备 MAC 地址的函数。为此，我必须使用：

```
WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
```

此命令要求我的 sdk 类将从 Activity 类继承并实现该`onCreate`功能。

当我尝试从另一个引用该库的 Android 项目中使用库（jar）时，我收到一条错误消息：

```
system service not available to activities before oncreate 
```

甚至我的命令都在 onCreate 函数中。

有谁知道如何解决它？或者我是否需要以不同的方式实现 SDK，使我能够使用一些 Android 服务/功能？

我为库和项目添加了一个示例代码：

库（编译成 jar 文件）：

```
public class DeviceDetails
{
    public String MACAddress="";
    public String IMEI="";

    public DeviceDetails(Context context)
    {

        WifiManager wm = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
        MACAddress=wm.getConnectionInfo().getMacAddress(); 
        TelephonyManager telephonyManager =            (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        IMEI=telephonyManager.getDeviceId();
    }

} 
```

使用该库的项目

```
public class TestSDKActivity extends Activity
 {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DeviceDetails d=new DeviceDetails(getApplicationContext());
    String i=d.IMEI;
    String m=d.MACAddress;

      }
} 
```

***** 问题已解决*** *****

 **我无法获得mac地址或imei的原因是为了使用wifi服务或电话服务，我必须从使用jar文件的类中传递上下文对象。

我编辑了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:11:45.517

如果你在`onCreate`函数中调用它，那么它还没有完成加载。因此你不能调用系统服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:52:25.807

不要忘记在清单中添加 WIFI 权限。这也可能是您的 null 的原因。**

# active-directory - 组成员身份的 LDAP 查询

> ID：10823352
> 
> 赞同：0
> 
> 时间：2012-05-30T19:57:31.077
> 
> 标签：active-directory

我正在尝试查找 AD 查询来测试用户 A 是否属于 B 组。

用户A是A组的成员，A组是B组的成员；因此，用户 A 实际上是组 B 的成员。

我曾尝试查看来自[http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx)的信息，但这看起来像是从用户开始搜索并下降。我需要能够从 Group 开始并爬取子对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:35:37.157

如果您使用 .NET 3.5 及更高版本，并使用 VB.NET 或 C# 作为您的编程语言，您应该检查`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // find the group in question
   GroupPrincipal group = GroupPrincipal.FindByIdentity(ctx, "YourGroupNameHere");

   if(group != null)
   {
      bool isUserMemberOfThatGroup = user.IsMemberOf(group);
   }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# php - 将 HTML 元素插入 SQL 数据库

> ID：10823354
> 
> 赞同：0
> 
> 时间：2012-05-30T19:57:46.797
> 
> 标签：php, mysql, jquery-plugins

我正在寻找一些指导，而不是实际插入数据库，我可以用 PHP 和 MySQL 自己弄清楚。更多的是我应该如何做到这一点。

我将使用[Jeditable](http://www.appelsiini.net/projects/jeditable)来更新网站内容。

现在在网站上，作者只解释了如何使用他的插件，而不是如何执行 PHP 函数来保存更改以及如何最好地做到这一点。

因此，如果您不知道 jeditable，您可以单击 html 元素，它们可以被更改和保存，所以我需要某种 save.php。这就是我的问题所在：

我应该如何插入。我知道我将不得不将我使用插件输入的新内容写入数据库。例如有人更改以下内容：

```
<div id="content">Text here</div> 
```

至..

```
<div id="content">More content here</div> 
```

基本上我应该将“更多内容”写入数据库，DIV 将是：

```
<div id="content">*reference to cell in DB*</div> 
```

那是对的吗...？以及我将如何即时执行此操作，因为如果我知道要编辑哪些元素就足够公平了，我可以事先为它们创建表格和列，但是如果我想即时执行呢？

我可以创建一个表，然后提取 HTML 元素 ID 并将其用作主键吗？

对最佳实践的任何见解/帮助都会很棒！利亚姆

# iphone - 什么是 reloadData 函数？

> ID：10823355
> 
> 赞同：0
> 
> 时间：2012-05-30T19:57:54.560
> 
> 标签：iphone, tableview

每个人。我是iphone新手。

我看到了一些iphone开发的文档，但是我不明白[xxx reloadData]；与 tableView 呢。

当我使用这种方法时，我的所有单元格都被清除了。发生了什么？

我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:59:46.120

如文档所示，`reloadData`只需通过查询数据源和委托来强制刷新列表。请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)如果您有问题，请发布一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:03:54.307

这意味着您强制`UITableView`获取数据并自行刷新。这是您在数据源中更改某些内容后想要做的事情。

例如，我有`NSMutableArray`三个对象 a、b 和 c。我有一个删除对象的按钮，比如 b。在我按下按钮并从数组中删除对象 b 后，除非我调用`[myTableViewName reloadData]`强制它自行刷新，否则我的表视图不会重新加载。

如果你做了之后`[xxx reloadData]`，你什么都没有。这意味着，表格视图所需的数据不再存在。因此，跟踪数据源并查看数据是否已更改。

# facebook - 我可以更改测试用户的权限吗？

> ID：10823358
> 
> 赞同：3
> 
> 时间：2012-05-30T19:58:04.803
> 
> 标签：facebook, permissions

我想知道是否有办法更改测试用户的权限。它不适合真正的用户。[测试用户](https://developers.facebook.com/docs/test_users/)的 Facebook 文档没有显示该选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-07T22:07:41.613

为了直接通过 API 更改权限，您可以调用将现有测试用户添加到其他应用程序的方法。

来自[https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)

> 将现有测试用户添加到其他应用程序
> 
> 您可以将 Graph API 与您要添加用户的应用访问令牌一起使用，将现有测试用户添加到其他应用。
> 
> [https://graph.facebook.com/APP_ID/accounts/test-users](https://graph.facebook.com/APP_ID/accounts/test-users)？已安装=true &permissions=read_stream &uid=TEST_USER_ID &owner_access_token=APP_ACCESS_TOKEN_OWNER &access_token=APP_ACCESS_TOKEN &method=post

由于新App与旧App相同，只需使用相同的App Access Token，所以APP_ACCESS_TOKEN_OWNER = APP_ACCESS_TOKEN。

然后，您可以根据需要更改权限列表 ( '&permissions=read_stream' )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:00:38.953

我不确定这是否是最好的方法，但您可以作为测试用户访问您的 facebook 应用程序，它会请求额外的权限。

我想知道如何使用控制台或 REST API 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:30:57.970

您将需要重新创建测试用户，如果他们是扩展权限，我发现您不应该授权该应用程序。这是行不通的。

[然后使用https://developers.facebook.com/apps/APP_ID/permissions](https://developers.facebook.com/apps/APP_ID/permissions) 工具切换到测试用户。

如果您现在第一次点击您的应用程序，您应该会看到扩展权限对话框。之后，测试用户应该具有正确的权限。

如果您有多个应用程序，您可以将用户复制到另一个应用程序，这样您就不必在需要时删除该帐户。将它们重新添加到您正在处理的应用程序将提示权限对话框。

# asp.net - 事件未在 ListView 内的 RadioButtonList 上触发

> ID：10823365
> 
> 赞同：0
> 
> 时间：2012-05-30T19:58:25.397
> 
> 标签：asp.net, .net, events

我在 listview 的 SlectedIndexChanged 事件中将 OnSelectedIndexChanged 事件与 RadioButtoList （即在 ListView 内）附加，当我运行程序时，单击 RadioButton，即使我为这个特定的事件触发实现了所有代码，也没有事件触发。但是没有语法或编译错误。告诉我我针对哪个 ListView 或 RadioButtonList 调用什么类型的事件？

.aspx 代码：

```
<asp:ListView ID="ListView1" runat="server"  >
<itemtemplate>
    <asp:RadioButtonList ID="radiobuttonlist4" runat="server" AutoPostBack="true" RepeatDirection="Horizontal" Width="240px"  onselectedindexchanged="selected">
        <asp:ListItem Value="agree" ></asp:ListItem>
        <asp:ListItem Value="disagree"></asp:ListItem>
        <asp:ListItem Value="strongagree"></asp:ListItem>
        <asp:ListItem Value="strongdisagree"></asp:ListItem>
    </asp:RadioButtonList>
</itemtemplate>
</listview> 
```

代码背后：

```
protected void selected(object sender, EventArgs e)
{    
    RadioButtonList listtt = (RadioButtonList)sender;       
    ListViewItem item = (ListViewItem)listtt.NamingContainer;

    RadioButtonList er = (RadioButtonList)item.FindControl("radiobuttonlist4");    
    er.SelectedIndexChanged += new EventHandler(handle);                    
}

public void handle(object sender, EventArgs e)
{            
    Label3.Text = "hjeje";        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:09:49.143

您的 OnSelectedIndexChanged 位于列表视图中，而不是单选按钮列表中。尝试将事件附件移动到单选按钮列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:02:00.937

在你`ListView`的`ItemDataBound`方法中，你需要在`selected`那里绑定事件。

```
var rdo = e.Row.FindControl("radiobuttonlist4") as RadioButton;
rdo.OnSelectedIndexChanged+= new EventHandler(selected); 
```

# c# - 将字符串等转换为字节和字节数组

> ID：10823370
> 
> 赞同：-2
> 
> 时间：2012-05-30T19:58:42.027
> 
> 标签：c#, bytearray, byte, type-conversion

是否有将字符串、int 等转换为字节/字节数组的静态方法？

我已经知道这种方法：

```
 public static byte[] FromString(string Input)
    {
        ASCIIEncoding ByteEncoder = new ASCIIEncoding();
        return ByteEncoder.GetBytes(Input);
    } 
```

但我想知道是否有更好的。如果我制作了 ASCII 编码器的静态实例来使用会不会有问题？

另外 - 在性能方面 - 上面的 ASCII 转换方法与通过 for 循环或其他多行解决方案的方法相比如何？

另外 - 我什么时候应该使用 ASCII 与 Unicode？

威廉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:00:51.323

没有静态方法。但是，也有`Encoding`.

`System.Text.Encoding.ASCII.GetBytes()`.

在性能方面，您应该信任 BCL。它经过精心编写，因此您应该期待接近最佳的代码，并且当然可以更好地处理人们并不总是考虑的所有边缘情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:01:49.893

什么是[ASCIIEncoding.ASCII.GetBytes()](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.getbytes%28v=vs.71%29.aspx)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:02:39.950

看看[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)。它支持整数和浮点数。也为字符串[Encoding.UTF8](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)。

```
BitConverter.GetBytes(4); // Int32

System.Text.Enconding.UTF8.GetBytes("My string"); // String 
```

您可能想要支持 unicode，即使您不使用它。尝试使用 UTF8 而不是 ascii，以便在需要时支持扩展字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:10:48.590

主要问题已经回答，但要回答最后一个问题，如果您必须支持非英语字符集和符号，请使用 Unicode。如果您使用的是全局字符的英文子集，请坚持使用 ASCII（尽管我更喜欢 UTF-8。此外，这是分享 Spolsky 智慧的好机会 [。http://www.joelonsoftware.com/articles/Unicode .html](http://www.joelonsoftware.com/articles/Unicode.html) - 非常好的文章。

# android - 调用 BluetoothAdapter.disable() 时偶尔会出现 NullPointerException (Android)

> ID：10823372
> 
> 赞同：1
> 
> 时间：2012-05-30T19:58:47.803
> 
> 标签：android, bluetooth, nullpointerexception

我正在开发一个使用蓝牙发现的应用程序（[这里](https://stackoverflow.com/questions/10171843/how-to-prevent-name-caching-and-detect-bluetooth-name-changes-on-discovery)有一些细节）。该应用程序的本质是，我几乎让 BT 始终处于开启状态，并等待某些广播设备更改 BT 名称。电源使用不是问题，因为我的设备正在永久充电。

我发现在某些时候我的应用程序“丢失线程”并且在 BT 上没有发现任何东西，即使 BT 已打开并且范围内有设备。以手动方式，我可以通过在设备上关闭和打开 BT 来解决这个问题 - 很快！它再次起作用。所以我想在代码中做到这一点。我有一个完整的超时计时器，它向处理程序发送一条消息：

```
 bluetoothHandler = new Handler() {
        @Override
        public void  handleMessage(Message msg) {
            if (!btAdapter.isDiscovering())
            {
                btAdapter.disable();
                btAdapter.enable();
                btAdapter.startDiscovery();
                // some other stuff
            } 
```

好吧，这段代码似乎有时会在“禁用”行出现空指针异常而崩溃

这是ACRA的信息：

```
"java.lang.NullPointerException
    at android.os.Parcel.readException(Parcel.java:1328)
    at android.os.Parcel.readException(Parcel.java:1276)
    at android.bluetooth.IBluetooth$Stub$Proxy.disable(IBluetooth.java:604)
    at android.bluetooth.BluetoothAdapter.disable(BluetoothAdapter.java:562)
    at com.myapp.stuff.MainActivity$8.handleMessage(MainActivity.java:574)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    at dalvik.system.NativeStart.main(Native Method) 
```

正如你所看到的，btAdapter 真的为空是没有意义的，否则我们会在之前的行上崩溃（“if”）——即使假设代码是可重入的，我也不会将 btAdapter 为空我的代码在任何时候 - 我将它设置在 OnCreate 并永远保留它，那么它如何变为空？

我看到几个人发帖说他们得到 NullPointerException 使用启用/禁用代码执行代码 - 并建议使用 Intents 启动/停止蓝牙 - 这不是一个选项 - 没有用户干预 - 用户（如果他们想要这个而不是专门的应用程序才能运行）需要 BT 自动运行（如果没有运行，则需要修复）。

我假设我不能在 NullPointerException 周围进行尝试/捕获（即使它是伪造的） - 有没有人对蓝牙内部有足够的了解来弄清楚为什么禁用会在我身上崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:12:33.177

它发生在`disable`方法内部。可能是文件 BluetoothAdapter.java 的 android 源代码读取，第 562 行帮助您了解可能导致此问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:41:09.253

我认为你应该把一个断言作为你的handleMessage函数的第一行，例如assertNotNull(btAdapter)。 [这是 Assert 的文档](http://developer.android.com/reference/junit/framework/Assert.html)。至少这样你就可以确定 btAdapter 真的不为空。

这并不能真正解决您的问题，但您的问题是一个提醒，断言可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:26:36.383

好吧，我真的不明白出了什么问题，但我的修复相当简单和愚蠢：

我没有为 btAdapter 留下一个值，而是每次在使用它之前检查它并尝试/捕获任何异常（尽管我认为这不会捕获真正的空指针）

所以每次我禁用（崩溃）时，我都会这样做

```
 btAdapter = BluetoothAdapter.getDefaultAdapter();
                if (null == btAdapter)
                {
                    Log.e(LOG_TAG,"Bluetooth adapter is NULL!!!");
                    return;
                }
                try {
                    btAdapter.disable();
                }
                catch (Exception e) {
                    //don't do anything
                } 
```

# c - C函数：将无符号变量分配给具有带符号参数的函数

> ID：10823377
> 
> 赞同：5
> 
> 时间：2012-05-30T19:59:05.173
> 
> 标签：c, casting

我最近想出了一个问题。假设我们有：

```
void test(int32_t b){
    printf("value is %d", b);
}

int main(){
    uint32_t a = 43;
    test(a);  
   return 0;
} 
```

将无符号变量传递给有符号参数时会发生什么？值的副本如何工作，演员如何工作？

有人可以向我详细解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:00:52.093

如果值足够小，则简单地赋值。否则，它以实现定义的方式分配。通常这意味着它将“环绕”。

> *6.3.1.3-1*
> 
> 当整数类型的值转换为_Bool以外的其他整数类型时，**如果该值可以用新的类型表示，则保持不变**。
> 
> 否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。
> 
> **否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:03:48.613

`a``b`好像通过赋值转换为的类型。

> (C99, 6.5.2.2p7) “如果表示被调用函数的表达式具有包含原型的类型，则参数将隐式转换为相应参数的类型，就像通过赋值一样，采用每个参数的类型参数是其声明类型的非限定版本。”

在您的情况下，如果要转换的值可以用新类型表示，则保持不变。

> (C99, 6.3.1.3p1) “当一个整数类型的值被转换为除_Bool之外的另一个整数类型时，如果该值可以用新的类型表示，则保持不变。”

否则以实现定义的方式进行转换：

> （C99，6.3.1.3p3）“否则，新类型是有符号的，并且值不能在其中表示；结果要么是实现定义的，要么是产生实现定义的信号。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T20:03:07.057

我相信该数据类型的转换是透明的，但需要谨慎。如果 uint32_t 的值大于 int32_t 可以保持的值，则 int32_t 翻转为不希望的值。

# java - 如何在 CardLayout 中显示不同的卡片？

> ID：10823382
> 
> 赞同：7
> 
> 时间：2012-05-30T19:59:24.430
> 
> 标签：java, swing, jframe, cardlayout

我查看了使用此代码的代码示例：

```
cl.show(cardPanel, "" + (currentCard)); 
```

但是当我使用时，我`show`在 Eclipse 中收到一条消息，它已被弃用，我想知道当我单击按钮时是否有另一种方法可以在 CardLayout 中显示不同的卡片？下面是我的 CardLayout 类的代码。如果代码的某些部分是不好的做法，也欢迎提出建议。谢谢！

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class CardLayoutTest extends JFrame implements ActionListener {

// Ref
 private JPanel cardPanel, jp1, jp2, buttonPanel;
 private JLabel jl1, jl2;
 private JButton btn1, btn2;
 private CardLayout cardLayout;

// Konstruktor
 public CardLayoutTest()
 {
     setTitle("Test med CardLayout");
     setSize(600,400);

     cardPanel = new JPanel();
     buttonPanel = new JPanel();

     cardPanel.setLayout(cardLayout);

     jp1 = new JPanel();
     jp2 = new JPanel();

     jl1 = new JLabel("Card 1");
     jl2 = new JLabel("Card 2");

     jp1.add(jl1);
     jp2.add(jl2);

     cardPanel.add(jp1, "1");
     cardPanel.add(jp2, "2");

     btn1 = new JButton("Show Card 1");
     btn2 = new JButton("Show Card 2");

     buttonPanel.add(btn1);
     buttonPanel.add(btn2);

     getContentPane().add(cardPanel, BorderLayout.NORTH);
     getContentPane().add(buttonPanel, BorderLayout.SOUTH);

     btn1.addActionListener(this);
 }

     public void actionPerformed(ActionEvent event)
     {
        // ??? Show card 1 ???

        // ??? Show card 2 ???
     }

 public static void main(String[] args) {
     CardLayoutTest frame = new CardLayoutTest();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    } 
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T20:07:17.690

*   我看不到[Java7 show(Container parent, String name)](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)或[Java6 show(Container parent, String name)](http://docs.oracle.com/javase/6/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)已贬值

*   取决于是否`currentCard`返回`String``cl.show(cardPanel, "" + (currentCard));`

编辑（我试过你的代码示例）

1.你忘了初始化最重要的变量

```
private CardLayout cardLayout = new CardLayout(); 
```

2.那么SSCCE可以是

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class CardLayoutTest extends JFrame {

    private static final long serialVersionUID = 1L;
    private JPanel cardPanel, jp1, jp2, buttonPanel;
    private JLabel jl1, jl2;
    private JButton btn1, btn2;
    private CardLayout cardLayout = new CardLayout();

    public CardLayoutTest() {
        setTitle("Test med CardLayout");
        setSize(400, 300);
        cardPanel = new JPanel();
        buttonPanel = new JPanel();
        cardPanel.setLayout(cardLayout);
        jp1 = new JPanel();
        jp2 = new JPanel();
        jl1 = new JLabel("Card 1");
        jl2 = new JLabel("Card 2");
        jp1.add(jl1);
        jp2.add(jl2);
        cardPanel.add(jp1, "1");
        cardPanel.add(jp2, "2");
        btn1 = new JButton("Show Card 1");
        btn1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                cardLayout.show(cardPanel, "1");
            }
        });
        btn2 = new JButton("Show Card 2");
        btn2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                cardLayout.show(cardPanel, "2");
            }
        });
        buttonPanel.add(btn1);
        buttonPanel.add(btn2);
        add(cardPanel, BorderLayout.NORTH);
        add(buttonPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                CardLayoutTest frame = new CardLayoutTest();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T20:17:46.290

您很可能在 JPanel 上调用 show()，而不是 CardLayout。

方法 show() 曾经存在于 JPanel（更具体地说是 Component）中，并已被 setVisible() 取代。这与 CardLayout 的 show() 方法完全不同。

确保您在动作侦听器中执行以下操作

```
CardLayout cardLayout = (CardLayout)(cardPanel.getLayout());
cardLayout.show(cardPanel, "CardToShow"); 
```

附带说明一下，您似乎没有“更新”您的 CardLayout。确保你这样做。

# c++ - 如何刷新/重绘屏幕（不是程序窗口）

> ID：10823385
> 
> 赞同：1
> 
> 时间：2012-05-30T19:59:39.093
> 
> 标签：c++, draw, invalidation, ellipse

我很难弄清楚如何在其他地方绘制椭圆后删除它。我需要一个圆圈来一直跟随我的鼠标，这就是程序应该做的所有事情。我得到了鼠标位置并画了我的圆圈，但我怎样才能删除最后一个？

```
#include <Windows.h>
#include <iostream>

void drawRect(int a1, int a2){
HDC screenDC = ::GetDC(0);
//Draw circle at mouse position
::Ellipse(screenDC, a1, a2+5, a1+9, a2+14);
::ReleaseDC(0, screenDC);
//::InvalidateRect(0, NULL, TRUE); //<- I tried that but then everything flickers
//Also, the refresh rate is not fast enough... still some circles left
}

int main(void)
{

int a1;
int a2;
bool exit=false;
while (exit!=true)
    {
    POINT cursorPos;
    GetCursorPos(&cursorPos);
    float x = 0;
    x = cursorPos.x; 
    float y = 0;
    y = cursorPos.y;

    a1=(int)cursorPos.x;
    a2=(int)cursorPos.y; 
    drawRect(a1, a2);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:06:55.070

你最好在整个屏幕上使用透明窗口。这会容易得多。Windows 并非旨在按照您刚才描述的方式运行。为了优化速度，您有两种方法：

1.  使用两个 DC - 一个由`CreateCompatibleDC`. 通过这种方式，您可以先准备图像，然后快速绘制它而不是窗口的 DC。
2.  记住矩形，你在哪里画了你的圆并且只使这个矩形无效。

另请注意，您应该在 WM_MOUSEMOVE 消息上实现挂钩以便接收它们。带有循环的程序将白白消耗 99% 的处理器时间。[在MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_mousehook)中查找鼠标挂钩。

好的，这将是 WinAPI。希望，您知道如何编写 WinAPI 应用程序的基本内容，如消息循环等。在任何情况下，您都可以将 Visual Studio 模板用于 WinAPI 应用程序。我会这样做的。首先，删除关于对话框和人员的无趣代码（如果您不知道该怎么做，可以跳过它）。接下来，您应该创建您的窗口：

*   更新`MyRegisterClass`功能。代替

    wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW+1); wcex.lpszMenuName = MAKEINTRESOURCE(IDC_...);

和

```
wcex.hbrBackground = CreateSolidBrush(RGB(128, 128, 128));
wcex.lpszMenuName = NULL; 
```

*   更新`InitInstance`功能。代替

    hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);

和

```
hWnd = CreateWindowEx(WS_EX_TOPMOST|WS_EX_LAYERED, szWindowClass, szTitle, WS_POPUP|WS_VISIBLE, CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL); 
```

在检查 hWnd 的一致性之后添加以下代码行：

```
SetLayeredWindowAttributes(hWnd, RGB(128, 128, 128), 255, LWA_COLORKEY); 
```

代替

```
ShowWindow(hWnd, nCmdShow); 
```

和

```
ShowWindow(hWnd, SW_MAXIMIZE); 
```

*   现在，实现`WM_PAINT`.`WndProc`

    hdc = BeginPaint(hWnd, &ps); 点pt新；GetCursorPos(&ptNew); HBRUSH hbr = CreateSolidBrush(RGB(255, 255, 255)); HBRUSH 保持 = (HBRUSH)SelectObject(hdc, hbr); 椭圆（hdc，ptNew.x + 15，ptNew.y + 15，ptNew.x + 30，ptNew.y + 30）；选择对象（hdc，保持）；删除对象（hbr）；pt旧 = pt新；EndPaint(hWnd, &ps);

*   明天继续钩。今天太晚了。或者，手动查看[这篇文章。](http://web.archive.org/web/20091228193034/http://msdn.microsoft.com/en-us/library/ms997537.aspx)

# graphics - 无法建造碎片星球

> ID：10823388
> 
> 赞同：1
> 
> 时间：2012-05-30T19:59:45.787
> 
> 标签：graphics, generator, terrain, fractals

我最近对分形很感兴趣，所以我做了一些研究。在搜索时，我发现了这个应用程序：[fracplanet](http://www.bottlenose.demon.co.uk/share/fracplanet/) 我尝试构建它，但没有成功。你能帮我么？我已经在 Ubuntu 上试过了。如果你能帮助我，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:47:50.710

fracplanet 实际上可以作为[最后几个 Ubuntu 版本的“宇宙”包使用](http://packages.ubuntu.com/precise/graphics/fracplanet)。

如果您只想*使用*fracplanet，请通过 Ubuntu 的包管理器安装该包，然后就可以离开了。

如果您真的需要自己*构建*它来修改代码等，检查 Ubuntu 源包应该可以深入了解构建依赖项、Ubuntu 特定补丁等。当我在 Debian 上构建 fracplanet（挤压）时，构建依赖项是（在 pbuilder 中验证） ):

```
qt4-qmake libqt4-dev libqt4-opengl-dev libboost-dev libboost-program-options-dev xsltproc 
```

因此，只需安装这些（假设在 Ubuntu 上存在相同的内容）就可以很好地解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:04:23.493

FracPlanet 是用 Qt 构建的。这对你来说可能很麻烦——你还没有发布确切的错误。

还有一个替代项目——[实时程序宇宙](http://sponeil.net/)。值得去那里看看。所有的资源都包括在内，它不依赖于像 Qt 这样的可怕框架。

# windows-7-x64 - 我需要帮助将 UPS dsn 从 XP 转移到 Windows 7 64bit

> ID：10823391
> 
> 赞同：0
> 
> 时间：2012-05-30T19:59:52.713
> 
> 标签：windows-7-x64, dsn, ups

我正在“升级”我们用于运输的 Windows 计算机。作为我们工作流程的一部分，ShipGear 通过 UOLWS 内的映射“键控导入”导出到 UPS On Line World Ship (UOWLS)。我使用菜单 Start->UPS 中的 UPS Utility 来备份数据库。ShipGear 还拥有自己的 MSSQL 2008 数据库，并对其进行了备份。

我用 Windows XP 取出硬盘，放入新的 SSD 驱动器，安装 Windows 7 64 位，安装 UOLWS 和 ShipGear，从它们的备份中恢复。除了传输之外，一切似乎都很好......我尝试从旧硬盘驱动器上的先前 C:\UPS 复制文件夹（预料到这一点），但这没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:59:53.120

该地区的 UPS 技术人员出来并修复了它。所有键入的导入数据仍在数据库恢复的新 UPS 中，问题是 DSN 不可用，因此保存的映射不会显示在 UOLWS 的导入对话框中。

并且在开始->控制面板->管理工具->数据源中找不到DSN（因为这是针对64位ODBC的）

相反，需要使用 32 位...访问 32 位数据源，导航到 C:\Windows\SysWOW64 并为 odbcad32.exe 创建到桌面或 UPS 文件夹的快捷方式。运行 C:\Windows\SysWOW64\odbcad32.exe 从 ShipGear 获取 32 位 odbc 数据源（通过添加 SQL10 驱动程序，选择源，输入登录信息）。此外，连接名称必须与之前安装的 Windows XP 中使用的名称相同。

我希望这可以帮助别人！！:)

# html - 如何将文本输入与图像按钮对齐？

> ID：10823397
> 
> 赞同：5
> 
> 时间：2012-05-30T19:59:58.537
> 
> 标签：html, css, alignment

我有一个表单，其中最后一行输入字段后跟 2 个图像按钮。

无论我尝试什么，我似乎都无法将按钮与字段水平对齐。

这是所有代码：http: [//jsfiddle.net/h3ZPk/](http://jsfiddle.net/h3ZPk/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T20:03:15.103

添加此规则：

```
#buttons img, #buttons input {
    vertical-align:bottom;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/h3ZPk/4/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:03:24.883

我不经常推荐这个，但请使用一张桌子。它们是老式的，但它们在表单上工作得很好。

```
<table>
  <tr>
    <td>Label1</td><td><input type="text" /></td><td></td><td></td>
  </tr>
  <tr>
    <td>Label2</td><td><input type="text" /></td><td></td><td></td>
  </tr>
  <tr>
    <td>Label3</td><td><input type="text" /></td><td><input type="button" /></td><td><input type="button" /></td>
  </tr>
</table> 
```

* * *

**编辑：**

[http://jsfiddle.net/h3ZPk/6/](http://jsfiddle.net/h3ZPk/6/)

# perl - Perl：比较两个哈希，从一个中删除键

> ID：10823401
> 
> 赞同：2
> 
> 时间：2012-05-30T20:00:18.843
> 
> 标签：perl

我正在尝试做的事情：

将文件及其 md5 哈希值存储到哈希中，在添加或删除文件时更改哈希。

到目前为止，我能够存储 md5 哈希并在添加文件时更新哈希。但是我不确定如何删除已删除文件的密钥

我现在的方法是：

# 将数组转换为哈希进行比较

```
my %files = map { $_ => 1 } @files; 
```

# 检查它们是否相同

```
if (%files ~~  %hash).. same.. else... different 
```

我不确定如何进一步实现这一点..这是我的想法：

# 删除哈希中不再有文件的键（伪代码）

```
Where exists $hash{$_} && !exists $files{$_} delete $hash{$_} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:14:59.870

只需循环一个，并检查是否存在并删除...

```
foreach my $k ( keys %file ) {
  delete $hash{$k} if exists $hash{$k};
} 
```

此外，由于在为此目的使用哈希时的内部结构，您最好分配`undef`而不是分配`1`给它。为简单起见保留原因。

```
my %files = map { $_ => undef } @files; 
```

我不确定条件是否使它更快或更慢 - 这可能无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:12:09.793

您无需创建散列来比较列表。看看[List::Compare](https://metacpan.org/module/List%3a%3aCompare)。特别是， get_unique() 和 get_complement() 方法将识别仅出现在两个列表之一中的项目。

# javascript - 尝试使用 Three.js 重置整个场景时性能下降

> ID：10823408
> 
> 赞同：4
> 
> 时间：2012-05-30T20:01:20.730
> 
> 标签：javascript, canvas, webgl, three.js

在我当前的项目中，我使用 Threejs 构建一个带有网格的关卡。相机、场景、投影仪、渲染器等的所有图形内容都在一个对象中完成。出于测试目的，我想用不同的参数重置整个场景，例如不同的关卡大小。

因为我想要测量算法的时间，所以我想要“完全”重置。所以我目前的方法是删除包含场景/画布的 div 框并删除具有threejs代码的整个对象。在此之后，我为图形级别实例化一个新对象。不幸的是，连续 10 次这样做会导致性能大幅下降。

我还尝试使用 scene.delete() 删除场景中的所有网格，并在删除整个对象之前删除场景、渲染器等内容。但仍然存在性能问题。

那么如何在不损失性能的情况下实现所有图形 webgl 组件的整体重置呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-18T19:10:14.300

删除与三个有关的所有内容并不能解决问题，因为即使您的 WebGLRenderer 被删除，它也不会释放它的 WebGL 上下文，因此您最终会同时运行多个 WebGL 上下文。每增加一个实时上下文，性能都会下降。最终，将达到一个限制。

有关释放上下文的黑客方法，请参阅[此问题](https://stackoverflow.com/questions/14350350/how-do-we-handle-webgl-context-lost-event-in-three-js)。

three.js 不支持释放上下文，因为您确实不需要重新创建上下文。在我的例子中，使用 Angular 和多个应用程序阶段，其中一些使用 WebGL，一些不使用，我只是在页面级控制器中保留一个渲染器实例，这样我就可以在子控制器中访问它，因此永远不需要重新创建WebGLRenderer 也不是上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:04:48.187

可能会提高性能重置的两个功能：对于`obj`场景中的每个对象，请同时尝试：

```
scene.remove( obj );
renderer.deallocateObject( obj ); 
```

# php - 如何防止更新数据库的其他记录？

> ID：10823410
> 
> 赞同：0
> 
> 时间：2012-05-30T20:01:42.260
> 
> 标签：php, database, security

我有一个表格，它从 phpMyAdmin 读取所有数据库并通过 php 代码对其进行破坏。- 我也可以更新表格上的每个单元格，例如通过使用等于我数据库中 ID 的表格行和等于（名字、姓氏、密码）的列来改变工作正常。因此，如果用户单击表格中的一个单元格，则 jquery 会通过 ajax 发送参数 ID 和字段的列之一（名字、姓氏、密码）。我的问题是什么？我的问题是如何防止可以看到 jquery 代码的 haker 或智能用户，他会明白他可以更改任何 ID 或密码参数的值，并且 ajax 可以更新数据库而不是正确的 ID？假设我向用户表显示 10 行 ID 为 11-20 的用户表，用户将更改 ID 参数 ID 等于 500，它可能会发生。

```
$(document).ready(function()
{
    var COLUME, VAL,ROW,STATUS,DATASTRING;

    $('td').click(function() {
        COLUME = $(this).attr('class');   
      });
//****************
    $('tr').click(function() {
        ROW = $(this).attr('id');
        $('#display_Colume_Raw').html(COLUME+ROW);
        //$('#display').html(COLUME+ROW);
        $('#span' + COLUME + ROW).hide();
        $('#input'+ COLUME + ROW ).show();
      STATUS = $("#input" + COLUME + ROW).val();
    });
  //******************** 
    $(".edittd").mouseup(function() {
        return false;
    });
  //*************
    $(document).mouseup(function() {
        $('#span' + COLUME + ROW).show();
        $('#input'+ COLUME + ROW ).hide();
        VAL = $("#input" + COLUME + ROW).val();
        $("#span" + COLUME + ROW).html(VAL);
          if(STATUS != VAL){
          $('#statuS').removeClass('statuSnoChange')
            .addClass('statuSChange');
             $('#statuS').html('THERE IS CHANGE');
             DATASTRING=$('#display_Colume_Raw').html()+','+VAL;
            //******ajax code
                 //dataString = $.trim(this.value);
                      $.ajax({
                        type: "POST",
                         dataType: 'html',
                         url: "./public/php/ajax.php",
                         data: 'DATASTRING=' + DATASTRING, //{"dataString": dataString}
                             cache: false,
                             success: function(data)
                             {
                                //alert(data);
                                $("#statuS").html(data);
                                }
                             });
                      //******end ajax
                 }
                 else
                 {
                 //alert(DATASTRING+'status not true');
                 }

        });       
    }); 
```

![在此处输入图像描述](../Images/b46f31120a6e816eb6a9437b4fdbba2d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:07:11.883

显示前端代码没有意义，因为这是您在后端实现的。

在通过 AJAX 调用的方法中，只需检查用户是否有权执行请求的操作。您可以在方法顶部进行单独检查，如果不允许用户返回，也可以将其构建到删除查询本身中，例如，通过添加 WHERE 子句确保这些 ID 是用户的 ID允许删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:07:39.200

您不能在 MySQL 中分配每行权限，以便用户可以查看/编辑行 A，但行 B 不能。

*如果您绝对必须*有一个解决方案，那么有一种解决方法会有点痛苦，那就是不要对表使用直接查询（SELECT、INSERT 等），而是编写执行某种身份验证的存储过程和/或验证。该过程可以执行您想要的任何类型的复杂验证——检查用户 ID、检查列值等——并且只返回该用户有权查看和/或编辑的内容。

# php - target="_self" 自己神秘地变成了 "_blank"

> ID：10823415
> 
> 赞同：3
> 
> 时间：2012-05-30T20:01:51.733
> 
> 标签：php, html, hyperlink

我正在使用 php 制作一些网页，但我正在尝试制作一个链接。

基本上，我的`<a>`set 上带有 target="_self"，以便它保持在同一页面上。（注意页面是一个新窗口，我也尝试使用“_top”和“_parent”）

```
<a href="http://ordi-003/inclusion/fiche.dos.assorti.info.php?id=<?php echo $donnees[0]['NoIdentDosAssorti'] ?>&lan=<?php echo $_SESSION['lan'] ?>" target="_self"><img src="<?php echo $donnees[0]['id2_pathImgMini'] ?>" width="75" height="75" /></a> 
```

这就是其 php 形式的链接。

```
<a href="http://ordi-003/inclusion/fiche.dos.assorti.info.php?id=14&lan=fr" target="_self"><img src="../images/propriete/DosAssorti/mini/L482_mini.jpg" width="75" height="75" /></a> 
```

这是显示源代码时向浏览器编码的结果。（跨 IE、Firefox、Chrome）

```
<a target="_blank" href="http://ordi-003/inclusion/fiche.dos.assorti.info.php?id=14&lan=fr"> 
```

根据 Firebug 和 Chrome 开发工具，这是同一行。

单击链接时，预期结果是在同一页面上打开链接，但它会在新窗口中打开它。将内部萤火虫“_blank”更改为“_self”，然后单击链接会产生良好的结果并在同一页面上打开链接。

难道我做错了什么？我在这里错误地使用了`<a>`吗？

我应该寻找另一种方式来建立我的链接吗？我对任何事情都很开放，我尝试了不同的事情，在谷歌上看了很多，但找不到有同样问题的人。Firefox 缓存已停用，所以这不应该是问题。也在另一台电脑上试过，结果一样。

如果我提供的信息太短，请告诉我我还应该包括什么，因为我是堆栈溢出的新手。

编辑：我忘了说，如果我删除了目标参数并且什么都不放，“源代码页”不会显示任何应该显示的内容，但在 firefug 和 chrome 开发工具中它仍然显示 target="_blank"。另外请注意，此文件只有 1 个副本，它位于运行本地站点的机器的本地主机上。我正在直接编辑该文件。

Edit2：[http](http://pastebin.com/yrAMQEL9) ://pastebin.com/yrAMQEL9请注意，出于某种原因，pastebin 上的缩进很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:04:27.890

您运行的代码与您正在编辑的代码不同。确保您的更改正在浏览器中访问您正在访问的服务器，并且您正在编辑正确的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:11:57.227

我终于找到了导致我的_self被替换的原因。

在页脚中有一个脚本被引用并通过进一步研究我发现了这段代码

```
jQuery('a[href^=http]:not(.in)').attr({
    'target' : '_blank'
}); 
```

它导致将_self 替换为_blank。

既然我知道问题出在哪里，我只需要检查该函数的原始编码器为什么他需要它以及是否仍然需要它。

感谢你的帮助。

# xaml - Metro XAML - TemplateBinding 和 SolidColorBrush 的问题

> ID：10823417
> 
> 赞同：5
> 
> 时间：2012-05-30T20:01:58.317
> 
> 标签：xaml, windows-8, windows-runtime, microsoft-metro, winrt-xaml

这是一个简单的自定义控件来说明我的问题

```
public sealed class TestControl : Control
{
    public static DependencyProperty TestColorProperty = DependencyProperty.Register("TestColor", typeof(Brush), typeof(TestControl), new PropertyMetadata(new SolidColorBrush(Colors.Blue)));

    public Brush TestColor
    {
        get { return (Brush)GetValue(TestColorProperty); }
        set { SetValue(TestColorProperty, value); }
    }

    public TestControl()
    {
        this.DefaultStyleKey = typeof(TestControl);
    }
} 
```

如您所见，它有一个`Brush`依赖属性，默认值为`Blue`(`PropertyMetaData`如上图所示。

这是我控制的 XAML`Generic.xaml`

```
<Style TargetType="local:TestControl">
        <Setter Property="TestColor" Value="Red" />
        <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:TestControl">
                <Border
                    Background="{TemplateBinding TestColor}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                        <TextBlock Text="TEST"  />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如您所见，我`TestColor`在 setter 中将 Brush 依赖属性设置为 Red `Style`- 覆盖我的 PropertyMetaData 中声明的 Blue 的默认值。请注意，我的模板中的边框用于`TemplateBinding`将背景设置为所讨论的画笔。

那么你认为边框背景设置了什么颜色？红色还是蓝色？

答案都不是。

如果我在我的控件中设置了一个断点，该值应该可用（`OnApplyTemplate`例如），那么该值为空，而不是预期的红色（默认）。事实上，我在控件的所有生命周期点都设置了断点，并且从未使用过 ProprtyMetaData 中的默认值。

在样式中设置值也无济于事（根据我的样式设置器声明，它没有设置为蓝色。这表明样式设置器以`SolidColorBrush`某种方式失败。

但是，这有效

```
public BlankPage()
{
    this.InitializeComponent();
    testcont.TestColor = new SolidColorBrush(Colors.Orange);
} 
```

这也有效：

```
<Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <local:TestControl  TestColor="Green" />
</Grid> 
```

但这`TemplateBinding`不起作用，这很重要，因为我试图编写可重用的自定义控件。

这是一个错误吗？

院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:31:00.713

就个人而言，我认为这是 xaml 解析器中的某个错误。尝试这样的事情，它应该工作：

```
 <Setter Property="SelectedDayBrush">
        <Setter.Value>
            <SolidColorBrush>#7F7F7F7F</SolidColorBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="SelectedDayBrush">
        <Setter.Value>
            <SolidColorBrush Color="Orange"/>
        </Setter.Value>
    </Setter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:17:30.693

好像还没修好 如果您开发像自定义按钮和 PointerOver 效果只是较浅的背景，一个有效的技巧是在内容顶部有白色背景的不可见 PointerOverVisual。然后 PointerOver 动画将使它稍微可见。这就是我使用的：

```
<VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames   Storyboard.TargetProperty="Opacity" Storyboard.TargetName="pointerOverVisual">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="0.15"/>
                                    </ObjectAnimationUsingKeyFrames> 
```

…………

```
<Border x:Name="Border" BorderThickness="0" Background="{TemplateBinding Background}" Margin="3">   
        content here                                                    
</Border>
    <Rectangle x:Name="pointerOverVisual" Fill="White" Opacity="0" Margin="3"/>
    <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
    <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-17T07:51:49.660

您可以尝试下面的代码片段来绑定 TestColor，

```
 Background="{Binding  RelativeSource={RelativeSource TemplatedParent}, Path=TestColor}" 
```

我希望它会有所帮助。

问候，雷克斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-17T07:20:01.327

我有一个使用自定义控件的工作解决方案，该控件又多次放置到用户控件中（这很好，可以在我的框架中重复使用）。

（在 generic.xaml 中，回想一下我创建了一个自定义控件）

```
<Style TargetType="local:myPad">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:myPad">
                <Path Data="..." Height="60" Width="30" Fill="{TemplateBinding myPadColor}"/> 
```

（在 myPad.cs 中）

```
 public sealed class myPad : Control
    {
        public myPad()
        {
            this.DefaultStyleKey = typeof(myPad);
        }

        public SolidColorBrush myPadColor
        {
            get { return (SolidColorBrush)GetValue(PadColorProperty); }
            set { SetValue(PadColorProperty, value); }
        }

        public static readonly DependencyProperty PadColorProperty =
            DependencyProperty.Register("myPadColor", typeof(SolidColorBrush), typeof(myPad), new PropertyMetadata(null));
} 
```

在我的用户控件中，然后我删除模板控件并且可以有多个相同的“颜色”版本......

```
<UserControl
    x:Class=....
    <Canvas Width="235" Height="235">
        <local:myPad x:Name="thisPad" myPadColor="White">

... 
```

我删去了很多多余的东西（...），但我想你明白了。我现在也相信，您可以在用户控件或代码隐藏中使用 myPadColor 的另一个绑定来获得创意。

顺便说一句，我正在使用带有 SP3 的 VS2012 .. 所以也许现在事情已经解决了。

另外，我对 XAML 编程还很陌生，但是在 Tim Heuer 的博客中，我找到了执行依赖属性的正确方法（感谢 Tim！）

如果您用 (new SolidColorBrush(Colors.Black)) 替换 propertymetadata 值中的 (null) 值，您将在设计模式下获得默认值。

:)

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T21:01:42.823

这是我们希望解决的问题。同时，像这样设置它：

```
<SolidColorBrush x:Key="DefaultTestColorBrush">Red</SolidColorBrush> 
```

然后在您的模板中：

```
<Setter Property="TestColor" Value="{StaticResource DefaultTestColorBrush}" /> 
```

那么你现在应该能够清除这个障碍。

# linux - 为什么我在 .bashrc 中使用 `uname` 时会出现错误？

> ID：10823418
> 
> 赞同：1
> 
> 时间：2012-05-30T20:02:02.170
> 
> 标签：linux, bash, uname

在我的 .bashrc 我有以下代码

```
if [`uname` == "Linux"]; then
    echo "It worked"
else
    echo "It didn't work"
fi 
```

但是当我获取我的 .bashrc 时，我得到以下结果

> [Linux：找不到命令
> 
> 它没有用

奇怪的`[`是，这不是错字，而是错误的一部分。如果我注释掉 if 语句，那么错误就会消失，所以我很确定它是错误的根源。另外，如果我将 更改`Linux`为`linux`，则错误也会更改为小写。

如果我回显 uname，我会得到 Linux。

要获取我使用过的 .bashrc`source .bashrc`并且还通过`bash`在命令行终端上键入来启动新的 bash 会话。

我认为检查操作系统类型并不难，但我似乎无法找出 .bashrc 的正确语法。

我看不出我做错了什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T20:03:52.423

您忘记了方括号后的空格。第一行必须如下所示：

```
if [ `uname` == "Linux" ]; then 
```

在您的版本中，如果没有空格，`[`和 的输出将`uname`连接到一个名为 的可执行文件`[Linux`中，该可执行文件在 PATH 中不存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T20:04:28.250

对间距挑剔。你需要在你的条件空间

```
if [ `uname` == "Linux" ]; then
    echo "It worked"
else
    echo "It didn't work"
fi 
```

# xml - 使用 SQL (XMLType) 在 XML 上循环

> ID：10823420
> 
> 赞同：1
> 
> 时间：2012-05-30T20:02:03.713
> 
> 标签：xml, oracle, plsql, xmltype

我从请求中得到以下 XML：

```
<records>
  <record>
    <field name="code" value="1"/>
    <field name="dexcription" value="MyName"/>
    <field name="id" value="666">
  </record>
  <record>
    <field name="code" value="2"/>
    <field name="dexcription" value="MyName"/>
  </record>
  ...
</records> 
```

第一条记录处理成功，返回元素“id”；第二个不是，所以没有这个元素就返回了。

我需要编写一个基于返回这两列（“code”和“id”）的 XML SQL 查询，但只返回成功处理的记录。我尝试使用 XMLType，但仍然失败。谁能帮我？

在此先感谢，并为我的“谷歌搜索”英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:36:56.087

我找到了解决方案：

```
SELECT EXTRACT (COLUMN_VALUE, '/record/field[@name="code"]/@value').GETSTRINGVAL () AS CODE,
       EXTRACT (COLUMN_VALUE, '/record/field[@name="id"]/@value').GETSTRINGVAL () AS ID
  FROM TABLE (XMLSEQUENCE (XMLTYPE (:XXML).EXTRACT ('/records/record')))
 WHERE EXTRACT (COLUMN_VALUE, '/record/field[@name="id"]') IS NOT NULL 
```

# linux - linux如何拉取我的mac地址以通过链接发送？

> ID：10823432
> 
> 赞同：0
> 
> 时间：2012-05-30T20:02:49.263
> 
> 标签：linux, sockets, networking, linux-device-driver

我想构建一个 MAC 地址欺骗器，每次我的计算机启动时都会吐出一个随机的 MAC 地址。我的问题是我在 linux 中的所有计算机程序如何以及从哪里提取我的 MAC 地址。我知道我的 wi-fi 网络驱动程序负责告诉我的网卡要发送什么，但是那个驱动程序从哪里得到我的 MAC 地址？我也知道MAC地址叫做硬件地址，但是既然可以欺骗MAC地址，那只能说明发送信息时不必使用我网卡上的MAC地址。我也想知道如何做到这一点。

此外，当随机化我的 MAC 地址时，这应该适用于所有其他程序，例如我的网络浏览器和我使用的任何其他程序，这不应该是一个问题，因为那真的是一个应用层......而不是链接层

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:06:03.413

MAC 地址通常存储在网卡上的某种 EEPROM 中。该地址在初始化期间由网络适配器驱动程序读取，并由 MAC 层在组装/发送网络数据包时使用。

使用的 MAC 地址可以通过“hw”选项使用“ifconfig”在命令行上更改：

```
hw class address

Set the hardware address of this interface, if the device driver
supports  this  operation.   The keyword must be followed by the
name of the hardware class and the printable ASCII equivalent of
the  hardware  address.   Hardware  classes  currently supported
include ether (Ethernet), ax25 (AMPR AX.25), ARCnet  and  netrom
(AMPR NET/ROM). 
```

ifconfig 本质上使用 SIOCSIFHWADDR ioctl（参见[http://linux.die.net/man/7/netdevice](http://linux.die.net/man/7/netdevice)）来设置 MAC 地址。

在某些情况下，甚至可以更改存储在网络适配器本身上的 MAC 地址，请参阅[http://linux.die.net/man/8/ethtool](http://linux.die.net/man/8/ethtool) - 但我不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:04:39.223

唯一关心您的 MAC 地址的是 NIC 本身。不应有使用 MAC 地址的程序（包括浏览器）。由于 MAC 地址用于物理层 - 这是唯一可以读取您的 MAC 的东西（例如路由器、交换机等）。

要设置网卡的 MAC 地址，您可以使用 ifconfig 命令：（`ifconfig eth0 hw ether ##:##:##:##:##:##`您可能必须先关闭网络，设置它，然后再启动它。IE `ifconfig eth0 down; ifconfig eth0 hw ether ##:##:##:##:##:#; ifconfig eth0 up`：）

# javascript - Javascript：document.images[].complete 在 IE 中不起作用

> ID：10823433
> 
> 赞同：2
> 
> 时间：2012-05-30T20:02:53.243
> 
> 标签：javascript, internet-explorer-9, slideshow, xhtml-transitional

我有一个幻灯片放映已经工作了很长时间。我正在将站点更新为 XHTML 过渡，现在幻灯片在 IE 9 中不起作用。

似乎问题在于“完整”功能不起作用。以下代码开始幻灯片放映（在页面加载后调用）：

```
function Initialize() {
    document.images["carImg"].src = imgList[0];
    if (document.getElementById) {
        theLink = document.getElementById("linkTo");
        theLink.href = imgURL[0];
    }
    if (document.images["carImg"].complete) SetTheInterval();
    else setTimeout("Initialize()", 1000);
} 
```

`document.images["carImg"].complete`总是解析为 false，因此它每秒调用 Initialize。图像`imgList[0]` **已**加载，因为它正在显示。但是没有设置完整的属性。

如果我注释掉`if (document.images["carImg"].complete)`条件，然后调用`SetTheInterval()`，幻灯片就可以了。

它也适用于 Firefox（带有条件）。如果我将 IE 9 设置为“兼容性视图”，它也可以工作（尽管其他事情看起来很奇怪）。

有谁知道为什么没有在 IE 9 中设置“完整”属性？有什么改变吗？

更新：似乎完整的**只是**不适用于第一张图片。对于后续图像，在加载图像时设置完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:59:08.570

尝试查看是否存在 onload 或错误事件，即使重置 src 也可能会生成一个无法立即完成的“脏”图像，即使图像存在也是如此。

我以前没有注意到这一点，但是在 IE10（没有 9）中，您需要 onload 事件。当 onload 触发时，complete 为 true，但一旦您写入 img src，它又为 false。您也可以只设置一次 src，然后在超时中检查完成。

如果没有 onload 处理程序，即使在图像出现之后，计时器也会永远持续下去......

```
window.ready=function(){
    var img= document.images[0];
    img.onload= function(){
        clearTimeout(ready.timer);
        alert('onload called, img.complete= '+img.complete);              
    };
        // temporary error handler, if needed
        img.onerror=function(e){              
               clearTimeout(ready.timer);
               alert('Error!\n'+e.message || e);
        };
       // set the new src
    img.src= Memry.Rte+'art/sundrag.gif';
    if(!img.complete) ready.timer=setTimeout(window.ready, 300);
    else alert('complete');
}
ready() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:24:24.353

我不确定这是最好的答案，但时间是浪费的，而且有效。

`src`问题是，我已将图像标记的初始值设置为`spacer.gif`（在 HTML 中）。因此，`complete`图像的属性`true`是执行 Initialize 例程的时间。

但是，当我将`src`属性（在 javascript 中）重置为图像列表中的第一个图像时，`complete`属性变为`false`. 我不确定为什么。随后，将`src`属性更改为图像列表中的另一个图像***确实***将`complete`属性设置为`true`.

在 IE9 和 Chrome 中都是这种方式，但在 Firefox 中则不然。去搞清楚。因此，我`src`没有将图像的 设置为 ，而是`spacer.gif`在代码隐藏 (C#) 中读取包含图像名称列表的 javascript 文件，`src`并将图像标记的初始属性设置为第一个图像。现在它起作用了。

FWIW，我确实尝试在图像标签中使用 onerror ，但没有出现错误。

嘘。我不喜欢javascript。

# php - PHP textContent 删除 HTML？

> ID：10823443
> 
> 赞同：0
> 
> 时间：2012-05-30T20:03:31.230
> 
> 标签：php

我有以下脚本循环遍历 HTML 表并从中获取值，然后在 td.xml 中返回表的值。

```
$tds = $dom->getElementsByTagName('td');

                // New dom
                $dom2 = new DOMDocument;

                $x = 1;
                // Loop through all the tds printing the value with a new class
                foreach($tds as $t) {
                    if($x%2 == 1)
                        print "</tr><tr>";

                    $class = ($x%2 == 1) ? "odd" : "even";

                    var_dump($t->textContent);

                    print "<td class='$class'>".$t->textContent."</td>";
                    $x++;
                } 
```

但是 textContent 似乎正在剥离 HTML 标签（例如，它是一个`<p></p>`包装标签）。我怎样才能让它给我价值？

还是有另一种方法可以做到这一点？我有以下html

```
<table>
<tr>
<td>q1</td>
<td>a1</td>
</tr>
<tr>
<td>q2</td>
<td>a2</td>
</tr>
</table> 
```

我需要让它看起来像

```
<table>
<tr>
<td class="odd">q1</td>
<td class="even">a1</td>
</tr>
<tr>
<td class="odd">q2</td>
<td class="even">a2</td>
</tr>
</table> 
```

它总是看起来完全相同（减去额外的元素行和变化的值）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:20:25.703

根据[MDN](https://developer.mozilla.org/en/DOM/Node.textContent)，这是 textContent 的预期行为。

您只需将类添加到`td`DomDocument 中的 s

```
$tds = $dom->getElementsByTagName('td');
$x = 1;
foreach($tds as $td) {
    if($x%2 == 1){
        $td->setAttribute('class', 'odd');
    }
    else{
        $td->setAttribute('class', 'even');
    }
    $x++;
} 
```

# vba - 如何使用 VBA 检查文本文件的时间戳

> ID：10823444
> 
> 赞同：7
> 
> 时间：2012-05-30T20:03:33.017
> 
> 标签：vba, excel, timestamp, excel-2003

我正在尝试在 Excel 2003 VBA (Windows XP) 中编写代码，以确定外部 TXT 文件是否具有不同的时间戳，因此如果它发生更改，我可以“导入”它。

VBA中有什么功能可以拯救我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T20:13:56.153

我想你想要修改日期。如果是，那么看看这个

```
Debug.Print FileDateTime("C:\Sample.txt") 
```

显示的日期和时间格式取决于系统的区域设置。

**编辑**

使用`FileSystemObject`

```
Option Explicit

Sub Sample()
    Dim oFS As Object
    Dim sFile As String

    sFile = "C:\MyFile.txt"

    Set oFS = CreateObject("Scripting.FileSystemObject")

    '~~> Created Date
    Debug.Print "Created Date : "; oFS.GetFile(sFile).DateCreated

    '~~> Modified Date
    Debug.Print "Modified Date : "; oFS.GetFile(sFile).Datelastmodified

    Set oFS = Nothing
End Sub 
```

# java - 在Java中，就性能而言，<=比较是否与小于比较后跟OR后跟等于比较相同？

> ID：10823452
> 
> 赞同：0
> 
> 时间：2012-05-30T20:04:00.063
> 
> 标签：java, performance

是代码

```
 while(currentLine <= endLine)  
  {
     // more code
     currentLine++;  
  } 
```

相当于

```
 while(currentLine < endLine || currentLine == endLine)
  {
     // more code
     currentLine++;   
  } 
```

在性能方面？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T20:06:20.517

该`<=`操作通常编译为单个字节码指令`if_icmple`或`ifle`. JVM 如何解释这通常取决于机器，但大多数硬件都支持将 < 和 <= 作为单个指令进行评估。因此，您可能应该期望 for 的性能`<=`与`<`.

Java 编译器可能会将第二个代码重写为第一个代码，这意味着不会有性能损失。然而，这是一个实现细节。

一般来说，除非您确定它们是性能瓶颈的原因，否则不要担心这些类型的微优化。像这样的决定会对程序运行时产生深远影响的情况极为罕见。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:09:01.623

好吧，你可能会争论短路逻辑是否比比较更有效，我会选择第一个，无论如何如果优化器足够聪明，那么你如何编写它并不重要。

# c++ - 在 C++ 中声明变量与动态分配内存给变量？

> ID：10823454
> 
> 赞同：3
> 
> 时间：2012-05-30T20:04:03.397
> 
> 标签：c++, variables

我对仅声明变量时的区别感到有些困惑，例如：

```
int n; 
```

并使用“new”动态地将内存分配给变量，例如：

```
int m = new int; 
```

我刚刚从一个简单的链表项目中注意到，当我以节点对象的形式插入一个新值时，我必须动态创建一个新节点对象并将所需的值附加到它，然后将其链接到我的清单的其余部分。但是.. 在同一个函数中，我可以定义另一个节点对象，例如。节点类型 *N。并使用此指针遍历我的列表。我的问题是..当我们只声明一个变量时，内存不会立即分配..或者有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:07:03.963

尽可能选择自动存储分配的变量：

```
int n; 
```

超过

```
int* m = new int; // note pointer 
```

在您的情况下首选动态分配的原因是链接列表的定义方式。即每个节点都包含一个指向下一个节点的指针（可能）。因为节点必须存在于它们创建的位置之外，所以它们是动态分配的。

> 节点类型 *N。并使用此指针遍历我的列表

是的，你可以这样做。但请注意，这只是一个指针声明。您必须将其分配给有意义的东西才能实际使用它。

> 我的问题是..当我们只声明一个变量时，内存不会立即分配..或者有什么区别？

实际上，这两种情况都是定义，而不仅仅是声明。

```
int n; 
```

创建一个未初始化`int`的自动存储；

```
int* n; 
```

创建一个指向`int`. 它是悬空的，它没有指向有效的内存位置。

```
int* n = new int; 
```

创建一个指针并将其初始化为包含未初始化的有效内存位置`int`。

```
int* n = new int(); 
```

创建一个指针并将其初始化为包含值初始化`int`（即`0`）的有效内存位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:06:36.953

```
int m = new int; 
```

实际上是不正确的。`new`返回一个指向它创建的内存的指针。它应该是

```
int *m = new int; 
```

甚至更好：

```
int *m = new int(); 
```

它设置 m = 0 指向的变量的初始值。

此外，关于您的问题，大对象通常是使用指针创建的，以在按值从函数传递到函数时消除大型复制操作。当变量的生命周期需要比函数的范围更长时，也可以使用它们。

但是，对于在函数范围内使用并且在其他任何地方都没有用的变量，应该使用自动内存

```
int m; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:28:49.173

不同之处在于，只有当编译器可以在编译时确定需要多少内存以及需要多长时间时，才能使用自动存储。通常自动变量将在[堆栈](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29#Hardware_stacks)上分配。

而对于动态分配的内存，程序员负责跟踪此信息。这通常在堆上分配。由于各种原因，使用堆内存通常会产生更大的开销，并且在分配堆内存但从不释放它的情况下存在内存泄漏的风险。

在您描述的链表示例中，您不太可能在编译时知道列表的长度（如果您知道，那么您可以只使用静态数组），这就是为什么您需要显式管理内存而不是而不是让编译器自动处理内存管理。但是函数返回后就不需要你用来遍历列表的指针了，所以它可以由编译器自动管理。

# qt - 在 Qt 中完成编码桌面应用程序。如何部署和分发它？

> ID：10823455
> 
> 赞同：9
> 
> 时间：2012-05-30T20:04:03.943
> 
> 标签：qt, deployment, qt-creator

好的，这确实是一个新问题，但我必须在某个地方迈出第一步。

我刚刚使用过 DevC++ 控制台应用程序，这意味着一个简单的 .exe 将从编译中生成，从 cmd 运行。仅此而已，您可以将 .exe 发送给运行相同操作系统的绅士，他可以运行您的小程序。

但是，Qt Creator 项目会发生什么？我终于完成了我的桌面应用程序，编写和调试了所有需要完成的事情，我有一些不错的 GUI，一切都很好，但是......我如何将它提供给没有 QtC 的其他人运行它？

任何涵盖此内容的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:30:22.497

**部署**
以下是一些指南，可帮助您在不同平台上部署应用程序：

*   [X11](http://qt-project.org/doc/qt-4.8/deployment-x11.html)
*   [视窗](http://qt-project.org/doc/qt-4.8/deployment-windows.html)
*   [Mac OS X](http://qt-project.org/doc/qt-4.8/deployment-mac.html)
*   [嵌入式 Linux](http://qt-project.org/doc/qt-4.8/qt-embedded-deployment.html)
*   [塞班](http://qt-project.org/doc/qt-4.8/deployment-symbian.html)

 **我强烈推荐**安装****

 ***   [国家安全情报局](http://nsis.sourceforge.net/Main_Page)
*   [创新设置](http://www.jrsoftware.org/isinfo.php)

**分布**
看看[这个网站](http://qt-apps.org/)。在这里，您可以向其他人展示您的应用程序并让他们下载。

* * *

你的问题很简单，但我相信它会帮助很多人！你的问题是一个很好的贡献。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:08:40.093

好吧，您要做的最后一件事是找出依赖项 - 共享库，然后将它们全部压缩到安装程序中。:)

*资源：*

Qt 有一个很好的页面，叫做[Deploying an Application on Windows](http://doc-snapshot.qt-project.org/4.8/deployment-windows.html)，作为他们文档的一部分。所以所有与依赖相关的东西都在那里。

最佳免费安装程序列表可[在此处](https://stackoverflow.com/questions/3767/what-is-the-best-choice-for-building-windows-installers)获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:06:35.097

我的建议是花一些时间编写 CMake 脚本，然后使用 CPack 进行分发。

这是一个非常简单的例子 [http://www.cmake.org/Wiki/BundleUtilitiesExample](http://www.cmake.org/Wiki/BundleUtilitiesExample)

有了这个，您就可以部署一个 mac 应用程序。然后你也可以扩展它来创建 Debian 或 RPM 包！

CMake 邮件列表始终是有用建议的来源。

在 Windows 中，您可能必须在程序中重新分发 Qt DLL，而对于 Mac，您必须在包中包含 Qt 库。**

# regex - 正则表达式原子组是分布的吗？

> ID：10823457
> 
> 赞同：11
> 
> 时间：2012-05-30T20:04:09.330
> 
> 标签：regex

正则表达式原子组是分布的吗？

即`(?>A?B?)`总是等价于`(?>A?)(?>B?)`?

如果不是，请提供一个反例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T02:47:49.830

**一般原子团**

1.  原子组`(?>regex1|regex2|regex3)`只接受其中的第一个成功匹配。换句话说，它不允许回溯。

2.  正则表达式从左到右进行评估，因此您可以表达您想要匹配的顺序。引擎从第一个位置开始，尝试成功匹配，必要时回溯。如果通过表达式的任何路径将导致成功匹配，那么它将在该位置匹配。

3.  原子团不是分配性的。考虑评估这些模式`ABC`：（ `(?>(AB?))(?>(BC))`不匹配）和`(?>(AB?)(BC))`（匹配`ABC`）。

**具有所有可选组件的原子组**

但是，两个部分都是可选的情况可能会有所不同。

考虑具有 2 个贪婪可选部分 A 和 B (`(A)?`和`(B)?`) 的原子组。在任何位置，如果`A`匹配，它可以继续评估 optional `B`。否则，如果`A`不匹配，那也没关系，因为它是可选的。因此，`(A)?`匹配任何位置。相同的逻辑适用于可选的`B`. 剩下的问题是回溯是否有任何差异。

对于所有可选部分 ( `(?>A?B?)`)，由于每个部分始终匹配，因此没有理由在原子组内回溯，因此它将始终匹配。然后，由于它在一个原子组中，所以它被禁止回溯。

在单独的原子组 ( `(?>A?)(?>B?)`) 的情况下，每个部分始终匹配，并且在任何一种情况下都禁止引擎回溯。这意味着结果将是相同的。

重申一下，引擎只能使用 in 中的第一个可能匹配`(?>A?)(?>B?)`，这将始终与 in 中的第一个可能匹配相同`(?>A?B?)`。因此，如果我的推理是正确的，对于这种**特殊情况**，多个可选原子组的匹配将**与具有两个可选组件的单个原子组相同。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T02:56:34.033

由于您没有指定，我假设您指的是 Perl 正则表达式，因为我没有看到`(?>)`任何其他语言的分组运算符。

考虑以下：

```
ra = 'A?'
rb = 'B?' 
```

`/(?>${ra} ${rb})/x`是一样的`/(?>${ra})(?>${rb})/x`。

在这种情况下，是的，无论哪种方式都可以；但是，由于禁用了回溯，因此和`(?>)`的某些其他值不是这种情况。`ra``rb`

例如，给定：

```
ra = 'A*'
rb = 'AB*' 
```

`/(?>${ra} ${rb})/x`!= `/(?>${ra})(?>${rb})/x`。

在后者中， rb 永远无法匹配，因为 ra 会消耗整个 A 序列，并且不允许回溯。请注意，如果我们用作分组运算符，这*将起作用。*`(?:)`另请注意，如果我们使用 capture groups `()`，那么*匹配*将是相同的，但*副作用*（分配给`\1`, `\2`, ...）会有所不同。

# ms-access - 使用 DCOUNT 访问 VBA 错误

> ID：10823464
> 
> 赞同：0
> 
> 时间：2012-05-30T20:04:49.347
> 
> 标签：ms-access, vba

访问告诉我以下内容不正确，但我不知道如何。

```
cnt = DCount("recid", "dbo_HR_EmployeeTrainings", "EnteredDateTime > '" & CStr(DateAdd("Minute", -1, Date)) + "'") 
```

给出的错误是`Run-time error '5': Invalid procedure call or argument`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:07:24.507

那将是`n`，不是`minute`。

请参阅[http://office.microsoft.com/en-us/access-help/dateadd-function-HA001228810.aspx](http://office.microsoft.com/en-us/access-help/dateadd-function-HA001228810.aspx)

为什么您的日期存储为字符串？

重新评论尝试：

```
 DCount("recid", "dbo_HR_EmployeeTrainings", "EnteredDateTime > DateAdd('n', -1, Date())") 
```

# php - 比较 PHP 中的两个阿拉伯语字符串值？

> ID：10823470
> 
> 赞同：0
> 
> 时间：2012-05-30T20:05:24.130
> 
> 标签：php, string, arabic, strcmp

我在尝试比较 PHP 脚本中的两个阿拉伯语字符串以查看它们是否匹配时遇到问题。我尝试使用 mb_internal_encoding 将内部编码设置为 UTF-8，我尝试了一个简单的 if ($x == $y) 表达式，我尝试了 strcmp()... 没有骰子。知道我做错了什么吗？PHP 在与非英文文本进行字符串比较时是否有问题？

谢谢！

这是一段代码摘录：

```
 // Chop up HTML content into bits

             $threadPieces = explode('</div>', $innerHTML);

             // Chop up the HTML bits into data entries

             $strippedThreadPieces = strip_tags($threadPieces[1]); 
             $threadInfo = explode('-', $strippedThreadPieces);

             $threadTitleExists = trim($threadTitleExists, 'thread_title_');

             $postername = "مراسل";

             if (($threadTitleExists > 100000) && ($threadInfo[0] === $postername))
             {
             echo 'Thread title:';
             echo strip_tags($threadPieces[0]);
             echo '<p>';
             }
             else
             {

             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:47:45.450

我这样做的方法是使用函数[mb_ereg](http://www.php.net/manual/en/function.mb-ereg.php)，它是具有多字节支持的正则表达式匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:21:43.517

我认为问题在于您的 php 文件的字符集，尝试使用 utf-8 字符集保存它。

# gmail - 谷歌聊天徽章不再工作了？

> ID：10823473
> 
> 赞同：2
> 
> 时间：2012-05-30T20:05:40.717
> 
> 标签：gmail, google-gadget

多年来，我一直在使用 google talk 聊天徽章（chatback - 使远程用户能够以匿名方式与您聊天的小型 iframe 代码），但现在它不再工作了。生成的代码很好，因为它似乎打开了一个新窗口，但在一秒钟后，它重定向到 support.google.com 页面，这当然没有多大用处。

我重新检查了代码，生成了新代码，但没有帮助。再次重定向到 support.google.com。该代码是从[http://www.google.com/talk/service/badge/New生成的](http://www.google.com/talk/service/badge/New)

有谁知道发生了什么？他们是否停止了它？

此外，还有一个建议——对于其他不需要客户端在另一端的信使，是否有任何替代的网络状态按钮。对于 Skype、Windows Live 或其他信使？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:46:57.640

根据 Google 的 KatherineG 的说法，不再支持聊天徽章。 [http://productforums.google.com/forum/#!topic/chat/_VpluJc6IfU](http://productforums.google.com/forum/#!topic/chat/_VpluJc6IfU)

我们正在研究使用 Crafty Syntax 进行替换。 [http://www.craftysyntax.com/](http://www.craftysyntax.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:57:58.823

是的，已经有一段时间了——它持续的时间很棒。我使用的个人解决方法是注册实时聊天服务并将其与 Gtalk 连接。我目前正在使用 ClickDesk - [http://www.clickdesk.com/](http://www.clickdesk.com/)

访客使用实时聊天界面聊天，我使用 Gtalk 界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:58:36.053

有一段时间，我将 MeeboMe 与 MeeboMe 通知器结合使用，但后来它也死了（公司被谷歌收购，产品被杀）我自己找到了一些不错的替代品，所以我分享它们。具有讽刺意味的是，他们在停止服务后被 MeeboMe 推荐。两者都是免费的。

*   Zoho 实时支持 - [https://chat.zoho.com/](https://chat.zoho.com/)

*   雅虎！Pingbox - [http://messenger.yahoo.com/pingbox/](http://messenger.yahoo.com/pingbox/)（需要 Yahoo! 帐户，否则很棒）

太糟糕了，大公司只会扼杀有用的产品。但就我而言，雅虎！Pinbox 甚至比 Google 聊天徽章和 MeeboMe 都好（至少满足我的需要），并且可以在很大程度上进行定制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T05:45:32.187

如果您喜欢使用 Google Talk 或 Skype，我也推荐 ClickDesk - [http://www.clickdesk.com 。](http://www.clickdesk.com)

但是，如果您想编码 - 您可以使用 xmpp 协议并将其与 Pidgin 通知挂钩。Google Appengine 也有通知，我相信这是 ClickDesk 使用的。

# php - 将 RedBean ORM 集成到 Zend 框架中

> ID：10823482
> 
> 赞同：-4
> 
> 时间：2012-05-30T20:06:25.283
> 
> 标签：php, zend-framework, redbean

RedBean手册[建议了一种将 ORM 集成到 Zend Framework 中的方法](http://www.redbeanphp.com/extra/integration_with_zend)。

从手册： -

> 打开 Zend 引导文件并添加：
> 
> ```
>  public function run() {
>          $loader = Zend_Loader_Autoloader::getInstance()->registerNamespace("RedBean_");
>          require_once( APPLICATION_PATH . "/../library/RedBean/redbean.inc.php"); //or rb.php
>          R::setup( "mysql:host=localhost;dbname=timereg", "root" );
>          Zend_Registry::set("tools", R::$toolbox);
>          Zend_Registry::set("db", R::$adapter);
>          Zend_Registry::set("redbean", R::$redbean);
>          parent::run();
>    } 
> ```

这种方法在我看来并不是最有效的，因为在每个控制器中都设置了 ORM，无论是否需要。它也使用了我不喜欢的 Zend_Registry。

RedBean 的某些功能也需要正确集成，并且可能会受益于通过 application.ini 进行的配置：-

*   设置为[冷冻/流体](http://www.redbeanphp.com/manual/freeze)
*   为[Fuse](http://www.redbeanphp.com/manual/how_fuse_works)设置[模型](http://www.redbeanphp.com/manual/models_and_fuse)的位置以允许[自定义模型](http://www.redbeanphp.com/manual/fuse_custom_method)工作。
*   [设置](http://www.redbeanphp.com/manual/fuse_custom_method)与 RDBMS 的连接
*   设置[调试](http://www.redbeanphp.com/manual/debug)模式。

RedBean ORM 如何以更~~高效~~的Zend 方式集成到 Zend 框架中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:14:28.247

根据 redbean.inc.php 的功能，我认为您无法将其效率提高太多。在文件中请求和设置数据库连接的开销可能不大。

我会将建议的代码稍微更改为：

```
protected function _initRedBean()
{
    $loader = Zend_Loader_Autoloader::getInstance()->registerNamespace("RedBean_");
    require_once APPLICATION_PATH . "/../library/RedBean/redbean.inc.php"; //or rb.php
    R::setup( "mysql:host=localhost;dbname=timereg", "root" );
    Zend_Registry::set("tools", R::$toolbox);
    Zend_Registry::set("db", R::$adapter);
    Zend_Registry::set("redbean", R::$redbean);
} 
```

利用引导程序的内置资源加载，而不是覆盖 run() 方法（不好的做法）。

如果您还使用 Zend_Db，可以简单地传入现有的 PDO 连接，以避免创建第二个连接，但这需要在代码中进行一些挖掘。

# session - 安装 Lightspeed 模块后登录两次的问题

> ID：10823485
> 
> 赞同：2
> 
> 时间：2012-05-30T20:06:38.050
> 
> 标签：session, caching, magento, lightspeed

自从我们安装了 lightspeed 模块后，我们在网站上第二次登录时遇到了问题。起初我认为这可能与打孔的需要有关，但现在我不确定。如果您第一次尝试登录我们的网站，效果很好。但是，如果您再次登录，它将无法正常工作。它只是保留在客户/帐户/登录页面上，没有任何效果。

我尝试对此进行测试，并在帐户控制器的 loginPost 函数中回显用户的电子邮件。当直接从控制器回显时，很明显用户正在登录，但在重定向到站点上的页面时，用户不再登录并在 Magento 后端（您在线查看的地方）显示为访客顾客）。

在我看来，好像会话在重定向后丢失了。我不确定这是否与此处的 stackoverflow 问题中所述的 https 和 http 之间的切换有关（http://stackoverflow.com/questions/7823994/magento-session-lost-when-switching-to-https -from-http ），他们还安装了 lightspeed。那里的人解决了问题，但没有发布解决方案。他们的问题与我们的不同，但我认为这两者之间可能存在联系。

有没有人见过这样的问题？

提前致谢，

布伦达

# youtube - Fusion Tables 信息窗口中的视频被截断或不显示

> ID：10823486
> 
> 赞同：0
> 
> 时间：2012-05-30T20:06:38.200
> 
> 标签：youtube, google-fusion-tables

我使用旧的嵌入代码将 YouTube 视频添加到列中，并将列设置为 8 行图像。

当我将地图嵌入另一个站点时，视频根本不显示或被严重截断，如图[所示](https://fusion-tables-users-group.googlegroups.com/attach/dc3995e2e8e85563/FT-video.jpg?view=1&part=4)。

有时在 FT 中查看地图时，视频窗口上方会出现一个白色方块。当我在信息框打开的情况下平移地图时，那个白色方块仍然在原处，遮住了视频。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:38:40.027

8 行图像格式可能会导致问题。尝试删除此格式，将“类型文本”和“格式”列设置为“无”。

# java - Android eclipse - android.jar 在 libs 文件夹和引用的库中重复

> ID：10823490
> 
> 赞同：0
> 
> 时间：2012-05-30T20:07:08.253
> 
> 标签：java, android, eclipse, buildpath

我正在使用带有 Eclipse 的 android SDK。我正在使用 git 与其他团队成员共享我的项目。最初，“Android Dependencies”中的 android.jar 文件是绝对引用的（即相对于我的主目录）。为了使其相对于项目目录，我将 android.jar 复制到项目中的 libs/ 文件夹中，右键单击并添加到构建路径。但是，我的项目现在有两个 android.jar，一个在 /libs/ 文件夹中，另一个在“Android Dependencies”中不断出现。我需要继续删除“Android Dependencies”以阻止因拥有两个 android.jar 文件而产生的错误。有没有合适的方法来实现我想要实现的目标？

从本质上讲，我想要实现的是“Android Dependencies”中的 android.jar 是 /libs/ 文件夹中的 .jar，而不是 /my-home-directory/android-sdk-linux 中的 .jar /平台...等。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:33:43.990

“你为什么要那样做？”。'android.jar' 应该来自已安装的 SDK。对于每个开发人员来说，这条路径可能不同，这就是为什么它是绝对的。

如果您使用的是 ant，那么每个开发人员都应该在项目根文件夹中拥有“local.properties”文件。文件片段（此文件不应是 VCS 的一部分）。

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must *NOT* be checked into Version Control Systems,
# as it contains information specific to your local configuration.

# location of the SDK. This is only used by Ant
# For customization when using a Version Control System, please read the
# header note.
sdk.dir=/install/android-sdks 
```

如果您使用的是 Eclipse，那么每个人都会分别设置首选项（Eclipse > Preferences > Android > SDK Location）。

在这两种情况下，如果每个人都安装了 SDK，他们应该能够使用您的项目。`android.jar`无需在 VCS中检查。

# php - 下拉菜单列表文件夹

> ID：10823492
> 
> 赞同：0
> 
> 时间：2012-05-30T20:07:15.087
> 
> 标签：php, html, drop-down-menu, menu

我需要为我正在处理的网站制作一个下拉菜单，在该下拉菜单中我想列出目录中的所有文件，但由于我缺乏 Web 开发知识，我很难弄清楚它出去。

任何帮助将不胜感激！

编辑

```
<form>
<select name="menu">
<option value="http://www.msn.com/">MSN</option>
<option value="http://www.google.com/">Google</option>
</select>
<input type="button" onClick="location=this.form.menu.options[this.form.menu.selectedIndex].value;" value="GO">
</form> 
```

这就是我知道如何制作下拉菜单的程度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:16:56.110

看看 PHP 的[scandir](http://php.net/manual/en/function.scandir.php)函数。循环遍历结果并回显您的 HTML 代码，`<option>`每次循环迭代一个标记。

像这样的东西：

```
echo "<select name='files'>";
$files = array_map("htmlspecialchars", scandir("path/to/your/files"));
foreach ($files as $file)
    echo "<option value='$file'>$file</option>";
echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:18:28.990

你可以这样做：

```
<select>
<?php
  $source_dir = '/var/www/whatever';
  $dir_handle = opendir($source_dir);
  foreach (glob('*', GLOB_ONLYDIR) as $dir_name) {
?>
  <option value="<?= htmlentities($dir_name) ?>">
    <?= htmlentities($dir_name) ?>
  </option>
<?php } ?>
</select> 
```

如果要排序、过滤或其他任何操作，只需根据[`glob()`](http://www.php.net/manual/en/function.glob.php)需要操作返回的数组即可。或者，您可以先[`readdir()`](http://php.net/manual/en/function.readdir.php)调用后[`is_dir()`](http://www.php.net/manual/en/function.is-dir.php)调用。有很多不同的方法可以做到这一点，它只是归结为您的特定需求。

# delphi - 为什么使用 FILE_FLAG_NO_BUFFERING 打开文件时写入文件失败？

> ID：10823498
> 
> 赞同：2
> 
> 时间：2012-05-30T20:07:46.843
> 
> 标签：delphi, winapi, file-io

我正在尝试测量文件中一系列写入的影响`FILE_FLAG_WRITE_THROUGH`和影响，作为[另一个问题](https://stackoverflow.com/questions/10564575/there-is-a-comparison-or-performance-table-of-the-different-uses-of-flushfilebuf)中的请求。但是我发现我不能用set 写文件。`FILE_FLAG_NO_BUFFERING``FILE_FLAG_NO_BUFFERING`

当我使用它时，Delphi 返回`EWriteError`message `stream read error`。

使用的代码如下：

```
procedure TForm1.btn1Click(Sender: TObject);
var
  fsFSArquivoAAC: TFileStream;
  L, lastErr: Cardinal;
  R: WideString;
  hn: THandle;
begin
  hn := Windows.CreateFile( PChar('TesteAAC.AAC2'),
              GENERIC_READ or GENERIC_WRITE,
              FILE_SHARE_READ or FILE_SHARE_WRITE, nil, CREATE_ALWAYS,
              FILE_ATTRIBUTE_NORMAL  or FILE_FLAG_WRITE_THROUGH or FILE_FLAG_NO_BUFFERING, 0);

  lastErr := GetLastError();

  if (lastErr <> ERROR_SUCCESS) then
  begin
    if (lastErr <> ERROR_ALREADY_EXISTS ) then
    begin
      MessageDlg('Whoops, something went wrong with CreateFile!',
                  mtError, [mbOK], 0);
    end
    else
    begin
      SetLastError(ERROR_SUCCESS);
    end;

  end;

  fsFSArquivoAAC := TFileStream.Create( hn );

  try
    R := 'BatatinhaquandoNasceEspalharamapelochao';

    // write WideString
    L := Length(R);
    fsFSArquivoAAC.WriteBuffer(L, SizeOf(integer));
    if L > 0 then
      fsFSArquivoAAC.WriteBuffer(R[1], L * SizeOf(WideChar));
  finally
    fsFSArquivoAAC.Free;
  end; 
```

如果您评论`FILE_FLAG_NO_BUFFERING`代码有效。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T20:22:52.597

如果您使用`FILE_FLAG_WRITE_THROUGH`并且`FILE_FLAG_NO_BUFFERING`有[各种要求](http://msdn.microsoft.com/en-us/library/windows/desktop/cc644950%28v=vs.85%29.aspx)来对齐内存中的缓冲区，将写入与磁盘扇区对齐以及（我认为）写入扇区大小的倍数。你似乎没有做这些事情。

# javascript - 当我为其父元素设置动画时，为什么我的 UL 会消失？

> ID：10823501
> 
> 赞同：2
> 
> 时间：2012-05-30T20:08:00.713
> 
> 标签：javascript, jquery, html, css

免责声明：我对 jQuery 和 JavaScript 比较陌生。只要确定#statementTab 尚未打开，就会执行下面的openStatement() 函数。如果下面的代码没有足够的信息，只需查看下面的源代码。

基本上，每当用户打开#statementTab 时，包含各种选项卡的 UL 都会闪烁并消失。我想解决这个问题。

资料来源： http: [//www.cameronhermens.com/dbunkr/brochure.html](http://www.cameronhermens.com/dbunkr/brochure.html)

```
// The openStatement function opens the statement tab when the user clicks 
<a id="openIt"> (if the statement tab isn't already open). 
```

```
function openStatement() {
    $('#explore').animate({width: '70%'}, '200');
    $('#statementTab').animate({width: '213px'}, '1000');
}; 
```

```
// Here's the DIV.
<div id="explore" class="brochure">
  <ul id="brochureTab">
    <li><a href="welcome.html" >welcome</a></li>
    <li><a href="ourMission.html">our mission</a></li>
    <li><a href="whatIsdBunkr.html">what is dBunkr</a></li>
  </ul>
</div>

<div id="statementTab">
  <a id="openIt">
    <img class="opaque left-5" src="images/rightArrow.jpg" height="10" width="6" alt="Expand the Statement tab">
    <span class="statementBar">Statements</span>
  </a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:32:45.387

动画期间被隐藏，`UL#brochureTab`因为在制作`#explore`动画时，jQuery 正在对其应用样式`overflow: hidden`。然后在动画完成后删除此样式。

一个快速的解决方案（即不解决您为其余元素设置样式的方式）是将样式添加`overflow: visible !important;`到`#explore`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:36:21.630

您可以通过使用 CSS获得`ul#brochureTab`外部。`div#explore``top: -45px;`

每当您`div#explore`使用 jQuery .animate() 制作动画时，`ul#brochureTab`都会“闪烁”，因为 jQuery [.animate()](http://api.jquery.com/animate/)`overflow:"hidden"`在执行动画时会自动切换到。

解决方案是使用 a`DIV`作为 的包装器`div#explore`，并使其具有您在 上的视觉外观`div#explore`：

**CSS**

```
#wrapper {
    background-color: #FFFFFF;
    border: 3px solid #CCCCCC;
    border-radius: 7px 7px 7px 7px;
    box-shadow: 3px 3px 3px #CCCCCC;
    float: left;
    height: inherit;
    padding: 5px;
} 
```

**标记将是：**

```
<div id="wrapper">
  <div id="explorer">
    <ul id="brochureTab">
      <li>...</li>
      <li>...</li>
      <li>...</li>
    </ul>
    <div id="ui-tabs-3">...</div>
    <div id="ui-tabs-10">...</div>
    <div id="ui-tabs-12">...</div>
  </div>
  <div id="statementTab">...</div>
</div> 
```

**并防止闪烁：**

```
#brochureTab {
  float: left;
  left: 10px;
  list-style: none outside none;
  margin: 0;
  padding: 0;
  position: relative;
  /* top: -45px; remove this line */
}

.ui-tabs-panel {
  background: none repeat scroll 0 0 #FFFFFF;
  border: 2px solid #CCCCCC;
  float: left;
  left: 30px;
  margin: 0 auto 30px;
  min-height: 410px;
  padding: 10px;
  position: relative;
  /* top: -20px; remove this line */
  width: 90%;
  z-index: 1;
} 
```

对于您当前的动画方法，无需进行任何更改。

对于您的新`CSS`包装器，可能需要一些“调整”。

# csv - 将使用 CSV 和 YAML 数据文件的方法的普通 ruby 测试转换为 RSpec 测试

> ID：10823505
> 
> 赞同：0
> 
> 时间：2012-05-30T20:08:31.647
> 
> 标签：csv, rspec, yaml

我必须将我前段时间为一个名为#mapper 的方法编写的一个简单的ruby 测试转换为一个RSpec 测试。

这种方法是非常数据驱动的，需要大量的输入和输出数据存储在 CSV 和 YAML 外部数据文件的组合中。

目前这是一个 ruby​​ 独立环境，但很快将集成到 Rails 项目中。

这是一些伪代码：

```
# current test algorithm
inputs = data_load :inputs
meta_maps = data_load :meta_maps
meta_maps.each do |meta_map_name, meta_map|
  outputs = data_load "outputs_#{meta_map_name}"        
  outputs.each do | output |
    next if output_data_not_available(output)
    test_name = output[:test_name]
    input = inputs[test_name]

    test test_name, output, mapper(input, meta_map)

  end
end 
```

该`data_load`函数加载 CSV 或 YAML 文件并将其作为类似命名的哈希返回。

该`test`函数使用当前调用映射器函数，`input`并将其返回的内容与当前进行比较，`output`并使用`test_name`.

真正的问题是我必须使用外部文件（根据规范 - 它们不在我的控制之下）

我是 RSpec 的新手，但对它有基本的了解，但我之前没有使用过夹具或工厂类型设置，并且确实需要一种方法以尽可能“RSpec 方式”将 CSV 和 YAML 文件集成到 RSpec 测试中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:17:57.893

您可以“阅读精美手册”了解在 RSpec 中设置数据的所有方式：

*   [https://www.relishapp.com/rspec/rspec-core/docs/helper-methods](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods)
*   [https://www.relishapp.com/rspec/rspec-core/docs/hooks](https://www.relishapp.com/rspec/rspec-core/docs/hooks)
*   [https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/example-groups](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/example-groups)

由于 RSpec 位于 Ruby 之上，因此您可以访问 Ruby 的所有功能来设置测试所需的任何数据。

# url - Sitecore 6.5 转。120247 个媒体 url 添加一个前导斜杠

> ID：10823510
> 
> 赞同：0
> 
> 时间：2012-05-30T20:08:43.193
> 
> 标签：url, media, upgrade, sitecore

为了能够使用 Edgecast CDN，在网站从 6.5 rev 111230 升级到 120427 之前，我们必须编写一个可以很好地工作的自定义媒体提供程序。升级后，网站上没有显示任何图像。我调试了代码并找到了可能的原因。在升级中包括以下修复 -

默认情况下，媒体 URL 现在将相对于站点根目录（例如 /~/media/images/picture.ashx 或 /virtualFolder/~/media/picture.ashx）而不是相对于当前页面生成。这样的 URL 被认为是 SEO 友好的，并且还改进了缓存。(346213, 332285)

这现在在媒体网址的开头添加了一个前导斜杠“/”。所以 url 不会生成为“//mediaserver/abc.jpg”。默认情况下，“MediaUrlOptions.VirtualFolder”被设置为“/”。我想确认这是问题所在，以及是否可以在代码中覆盖它，但我想知道是否可以从配置文件中控制它在代码中进行此更改。如果这不是问题，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:22:27.333

为了在这里提供答案：

删除 Media.MediaLinkPrefix 设置中的斜线，因为 Sitecore 现在会自动添加它： `<setting name="Media.MediaLinkPrefix" value="/mediaserver" />`

以及在以下一个中： `<handler trigger="/mediaserver/" handler="sitecore_media.ashx" />`

此外，自 6.5.0 修订版以来，媒体 API 也得到了改进。120427\. 现在可以使用 SDN 上的发行说明中的​​参考编号 312358 中的 web.config 设置优雅地覆盖 MediaProvider 类：http: [//sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206 /ReleaseNotes/ChangeLog.aspx](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/ChangeLog.aspx)

# php - 简单的 xml php 数组通配符

> ID：10823512
> 
> 赞同：0
> 
> 时间：2012-05-30T20:08:51.537
> 
> 标签：php, xml, arrays, simplexml

您能否告知 php.ini 中简单 xml 的数组通配符是什么？我想从数组的第二部分获得通配符响应。它仅在错误填充有数字时才有效，通配符是什么，因此它将带回填充数组 0 中的所有错误。

例子

```
$xml->Test->Account->Information->Stuff[0]->Next->Next->Error[]['Duration']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:25:04.173

就像是

```
$results = array();
foreach ($xml->Test->Account->Information->Stuff[0]->Next->Next->Error as $error) {
    $results[] = $error['Duration'];
} 
```

# android - 带有 Intent.ACTION_EDIT 的 Android 4 startActivityForResult 始终返回结果代码 RESULT_CANCELED

> ID：10823513
> 
> 赞同：4
> 
> 时间：2012-05-30T20:08:53.290
> 
> 标签：android, android-intent, contacts, android-4.0-ice-cream-sandwich

android 版本 4.0.3 会出现此问题。我正在使用 Android Contacts 2.0 API 添加带有自定义 RawContacts.ACCOUNT_TYPE 的联系人。作为第二步，我想使用 Intent.ACTION_EDIT 使用以下代码编辑这些联系人：

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setData(contactUri);
startActivityForResult(intent, EDIT_CONTACT_RESULT); 
```

Intent 正在打开 android 内置的编辑联系人活动。但是当我按下完成时，它会将我转发到当前编辑的联系人的联系人视图活动。如果我然后点击后退按钮，我会被转发回我的应用程序。问题是 onActivityResult(); 总是返回 RESULT_CANCELED 作为结果代码。任何想法如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:26:04.073

不幸的是，许多制造商调整了他们的 SDK，并且许多应用程序无法正确实现这一点，让我们`"Android Pattern"`在应该返回正确的`RESTULT_CODE`. `Facebook`我在,等应用程序中也遇到了很多类似的行为，`Twitter`如果用户共享/或取消了操作，即使它们也无法返回正确的结果代码。

我认为您的代码没有问题，很可能问题出在您正在启动的应用程序中，该应用程序无法返回正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:12:35.003

即使在“普通 Android”（JB、Galaxy Nexus）上也会发生这种情况。似乎解决它的唯一方法是忽略结果代码并再次重新读取联系人（请注意，意图数据也将为空，因此您必须使用打开编辑活动时使用的联系人 Uri ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T19:40:34.133

添加以下内容为我解决了类似的问题：

```
intent.putExtra("finishActivityOnSaveCompleted", true); 
```

# android - 如何在不调用 OnClick 的情况下获取视图？

> ID：10823514
> 
> 赞同：0
> 
> 时间：2012-05-30T20:08:59.347
> 
> 标签：android, view, onclick

下面的代码完美运行：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) this.findViewById(R.id.btn1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            method.show(v);
        }
    });
} 
```

但是，我需要`View`不使用`onClick`

下面的代码不起作用

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) this.findViewById(R.id.btn1);

    method.show(button);
} 
```

如何获得与传递给相同的视图`button.onClick`？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:17:16.137

恐怕你不能从 onCreate() 中显示 PopupWindow。

看看这个[答案](https://stackoverflow.com/a/4713487/742660)

# opengl - OpenGL调色板交换着色器？

> ID：10823522
> 
> 赞同：3
> 
> 时间：2012-05-30T20:09:48.230
> 
> 标签：opengl, glsl, shader, palette

我正在编写一个格斗游戏，其中每个角色都有大量的精灵，每个角色都有几个不同的调色板交换。我一直在尝试为每个精灵使用灰度纹理，并为每个调色板使用 256x1 纹理。

我的着色器看起来像这样：

顶点：

```
varying vec2 coord;
void main(void)
{
    coord = gl_MultiTexCoord0.xy;
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
} 
```

分段：

```
uniform sampler2D palette;
uniform sampler2D texture;
varying vec2 coord;
void main()
{
    gl_FragColor = texture2D(palette, vec2(texture2D(texture, coord).r, 0));
} 
```

使用 glGetUniformLocation 和 glUniform1i 将“调色板”设置为 1，将“纹理”设置为 0。他们编译得很好，链接也很好。我可以在我的绘图代码中使用程序对象。

问题是，我不知道如何使用多重纹理来让“调色板”和“纹理”纹理在着色器中相互协作。这是我第一次使用多重纹理，我似乎无法弄清楚如何让它适用于这种解决方案。有谁知道如何使用这些着色器（如果它们是正确的）来模拟调色板交换？

编辑：这是我现在的绘图代码：

```
glUseProgram(paletteProgram);
glActiveTexture(GL_TEXTURE1);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, palette);
glActiveTexture(GL_TEXTURE0);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture);

glBegin(GL_QUADS);
glTexCoord2f(w1, h1);
glVertex3f(x1, y1, 0);
glTexCoord2f(w1, h2);
glVertex3f(x1, y2, 0);
glTexCoord2f(w2, h2);
glVertex3f(x2, y2, 0);
glTexCoord2f(w2, h1);
glVertex3f(x2, y1, 0);
glEnd();

glUseProgram(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:25:48.773

你的逻辑似乎很合理。您需要做的是使用[glActiveTexture](http://www.opengl.org/sdk/docs/man/xhtml/glActiveTexture.xml)设置活动纹理，然后像往常一样绑定您的纹理（对于纹理单元 0 和 1）。现在还将值 0 绑定到称为纹理的制服，将值 1 绑定到称为调色板的制服。

在 GLSL 中，您可以使用 texture2D 从适当的采样器中获取纹素。

希望这可以帮助！

这实际上在[这个](http://nehe.gamedev.net/article/glsl_an_introduction/25007/)NeHe 教程中详细解释（部分：使用纹理与 GLSL）。

这是你需要做的

```
 glUseProgramObject(my_program);
    int my_sampler_uniform_location = glGetUniformLocation(my_program, my_color_texture);

    glActiveTexture(GL_TEXTURE0 + i);
    glBindTexture(GL_TEXTURE_2D, my_texture_object);

    glUniform1i(my_sampler_uniform_location, i); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-01T20:21:27.130

好的，我想通了！

显然，每次使用脚本程序时都会重置统一变量……我只需要在每一帧都设置它们。

我现在觉得很愚蠢，但是，嘿，这就是调试。

# android - 服务启动活动时，Android全屏不起作用

> ID：10823529
> 
> 赞同：1
> 
> 时间：2012-05-30T20:10:08.610
> 
> 标签：android, service, android-activity, fullscreen

所以我正在开发一个备用锁屏应用程序，我需要防止点击通知栏

所以我尝试全屏运行这个应用程序

但是当它被服务调用时，通知栏仍然是他们的，当它被启动器调用时，它会变得不可见代码：public class app extends Activity {

```
TextView datum;
static TextView time;

static TextView temperature;
static ImageView weather_icon;
static TextView weather_refreshed;
static RelativeLayout refresh;

private static Context mContext;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main);

    this.startService(new Intent(this, lockservice.class));

    mContext = this;

     //Date
     datum = (TextView)  findViewById(R.id.datum);
     SimpleDateFormat sdf = new SimpleDateFormat("E dd MMM");
     String currentDateandTime = sdf.format(new Date());
     datum.setText(currentDateandTime);

     //Time
     time = (TextView)  findViewById(R.id.clock);
     Date date = new Date();
     int hours = date.getHours();
     String diplay_hours = String.valueOf(hours);
     int minutes = date.getMinutes();
     String diplay_minutes = String.valueOf(minutes);
     if(hours < 10)
     {
         diplay_hours = "0"+String.valueOf(hours); 
     }
     if(minutes < 10)
     {
         diplay_minutes = "0"+String.valueOf(minutes); 
     }
     time.setText(String.valueOf(diplay_hours+":"+diplay_minutes));

     //update
     Thread myThread = new Thread(new UpdateThread());
     myThread.start();

     // Weather
     temperature = (TextView)  findViewById(R.id.weather_temp);
     weather_icon = (ImageView)  findViewById(R.id.weather_icon);
     weather_refreshed = (TextView)  findViewById(R.id.weather_refreshed);

     refresh = (RelativeLayout)  findViewById(R.id.relativeLayout1);
     refresh.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
            weather.download();

        }
        });
}
@Override
public void onResume() {
    super.onResume();

}

@Override 
public void onAttachedToWindow()
{  
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);

    super.onAttachedToWindow();  

}
@Override 
public boolean onKeyDown(int iKeyCode, KeyEvent event)
{

    if(iKeyCode == KeyEvent.KEYCODE_BACK || iKeyCode == KeyEvent.KEYCODE_HOME) 
    {
        finish();
        return true;
    }
    return false;
   }

//update
public Handler updateHandler = new Handler(){
    /** Gets called on every message that is received */
    // @Override
    public void handleMessage(Message msg) {

        //Time
     time = (TextView)  findViewById(R.id.clock);
     Date date = new Date();
     int hours = date.getHours();
     String diplay_hours = String.valueOf(hours);
     int minutes = date.getMinutes();
     String diplay_minutes = String.valueOf(minutes);
     if(hours < 10)
     {
         diplay_hours = "0"+String.valueOf(hours); 
     }
     if(minutes < 10)
     {
         diplay_minutes = "0"+String.valueOf(minutes); 
     }
     time.setText(String.valueOf(diplay_hours+":"+diplay_minutes));

     //weather
     weather.display();
     try
     {
        SharedPreferences weather = app.getContext().getSharedPreferences("weather",app.getContext().MODE_WORLD_READABLE);
    app.weather_refreshed.setText(weather.getString("time",""));
     }
     catch(Exception x)
     {

     }
    super.handleMessage(msg);
    }
};

public class UpdateThread implements Runnable {

    @Override
    public void run() {
        while(true){

            long startTime = System.currentTimeMillis();
            app.this.updateHandler.sendEmptyMessage(0); //handler

            Thread.yield();                 
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    }

}

public static Context getContext(){
    return mContext;
}

 @Override
    public void onPause() {

        super.onPause();

    } 
```

我还使用 Keyguard 在我的清单中实现全屏：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".app"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="boot">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </receiver>

        <service
        android:name="lockservice" 
        android:process=":lockscreen" 
        android:icon="@drawable/ic_launcher"
        android:label="Lockscreen">
        </service>

        <activity
            android:name=".weather_update"
            android:theme="@android:style/Theme.Translucent">

        </activity>

    </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T13:46:17.390

这似乎`this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);`导致了这个问题。

其他人建议延迟该呼叫：请参阅[Activity doesn't show in full screen](https://stackoverflow.com/questions/9369144/activity-doesnt-show-in-full-screen)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:14:29.633

我之前使用全屏的方式与您的方式相同，但遇到了一些问题，但没有尝试从服务启动活动，尝试以这种方式应用全屏，

```
WindowManager.LayoutParams attrs = getWindow().getAttributes();
attrs.flags |= WindowManager.LayoutParams.FLAG_FULLSCREEN;
getWindow().setAttributes(attrs); 
```

以防万一你需要退出全屏，你可以这样做，

```
WindowManager.LayoutParams attrs = getWindow().getAttributes();
attrs.flags &= (~WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().setAttributes(attrs); 
```

试一试，祝你好运！

# android - 平面上的 OpenGL ES 2.0 Android 血液贴花

> ID：10823531
> 
> 赞同：0
> 
> 时间：2012-05-30T20:10:11.343
> 
> 标签：android, opengl-es, decal

我有一个非常简单的游戏想法，只是为了我自己学习 OpenGL。这是一个带有简单纹理平面背景（正射投影）的 2d 游戏。在此背景下，一些通用敌人会移动，并且在射击时它们必须留下血迹（贴花）。理想情况下，这些敌人应该有数百个，所以一段时间后，表面上会出现相当多的鲜血。

我的问题是这种贴花是如何实现的？有什么建议，方向吗？表面是平面的，所以我猜这是一个简单的案例。我的疯狂猜测是以某种方式在纹理上绘制所有飞溅物，然后将此纹理与平面上的原始纹理混合，但我不知道这是否是要走的路..

# facebook - 社交媒体共享和跟踪

> ID：10823532
> 
> 赞同：0
> 
> 时间：2012-05-30T20:10:19.480
> 
> 标签：facebook, twitter, tracking, pinterest

有没有办法跟踪用户何时从 facebook、twitter 或 pinterest 等社交媒体访问我们的页面？

有没有办法在 url 中添加一些参数，以便更容易跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:42:24.050

```
<?php  
  echo $_SERVER['HTTP_REFERER'];  
?> 
```

这个小小的 php 脚本使您能够知道用户来自哪里。

**编辑**

正如nyshangal要求的jsp代码

JSP

```
request.getHeader("Referer"); 
```

我不擅长 JSP。谷歌搜索后，我发现上面的代码将返回用户来自的引荐来源网址。

谢谢

# django - Postgresql localhost 连接 - 连接被拒绝

> ID：10823534
> 
> 赞同：1
> 
> 时间：2012-05-30T20:10:27.037
> 
> 标签：django, postgresql

我刚刚安装了 pgadmin iii 并尝试连接服务器。

我配置了我的设置

```
name:localhost
host: 127.0.0.1
port:5432

username:postgres 
```

但我总是收到这个错误

> 服务器不接受连接：连接库报告**无法连接到服务器：连接被拒绝服务器是否在主机“127.0.0.1”上运行并接受端口 5432 上的 TCP/IP 连接？

但是，我在 127.0.0.1 上运行 django 和 python 缺少什么？

mysql也有问题。我无法与他们联系

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:31:00.497

如果您更改 pg_hba.conf 文件以接受连接（例如：“host all all 127.0.0.1 255.255.255.0 trust”）它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T14:19:18.777

在卸载 v11 之前安装 postgre v12 我发现配置文件（postgresql.conf）有一行“port = 5433”。将其更改为“port = 5432”为我解决了这个问题。

# ios - OpenGL ES 可点击对象

> ID：10823535
> 
> 赞同：1
> 
> 时间：2012-05-30T20:10:37.160
> 
> 标签：ios, opengl-es, opengl-es-2.0

我创建了一个包含 6 个不同对象的 OpenGL 视图。有没有办法让这些对象可点击并像 iOS 中的任何其他 UIControl 一样调用方法？

如果是这样，这是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:50:25.950

之前已经在 SO 上回答了这个问题：

[iphone-opengl-es-detecting-if-you-have-tapped-a-object-cube-on-screen](https://stackoverflow.com/questions/4365856/iphone-opengl-es-detecting-if-you-have-tapped-a-object-cube-on-screen)

[iphone-openggl-es-detecting-clicks-on-a-primitive](https://stackoverflow.com/questions/4349440/iphone-openggl-es-detecting-clicks-on-a-primitive)

我通过**谷歌搜索“ios openGL ES click on object”得到了这些**

# html-lists - 在链接之间有装饰元素但仍包含在列表中？

> ID：10823538
> 
> 赞同：1
> 
> 时间：2012-05-30T20:10:43.217
> 
> 标签：html-lists, hyperlink

所以我正在考虑在链接之间放置一个装饰元素，例如 // 例如。所以它将是 LINK1 // LINK2 // LINK3 // LINK4 // LINK5 但仅在链接之间用于装饰目的，例如

[编码示例](http://jsfiddle.net/SsY2Q/)

有没有办法用 html 列表或更简洁或技术上正确的格式来做同样的事情？或者这是编写类似代码的方式，因为我一直在阅读列表是格式化链接菜单的更好方式。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:19:12.267

最简单的方法是你如何做（我也是这样做的：）

但是，是的，使用 HTML 列表在技术上是更正确的方法。特别是对于非 CSS 设备，链接将是一个看起来不错的项目符号列表，而不是一长串链接（没有 CSS 可能看起来不太好）。

# wpf - 在 WPF 桌面应用程序中实现搜索引擎

> ID：10823541
> 
> 赞同：0
> 
> 时间：2012-05-30T20:10:52.463
> 
> 标签：wpf, search, lucene, google-search-appliance

我正在考虑在需要能够在离线和在线时运行的 WPF 桌面应用程序中实现自定义搜索功能。

有没有可行的技术可以做到这一点？Google Search Appliance、Lucene 等？

# iphone - 使用 Sockets 进行 iPhone 通信

> ID：10823544
> 
> 赞同：1
> 
> 时间：2012-05-30T20:11:11.200
> 
> 标签：iphone, ios, json, sockets

我正在尝试使用应用程序通过套接字与 Windows 进行通信。至少，我试图至少弄清楚如何从 iPhone 创建连接（也许使用 iPhone 来 ping Windows 机器？）我不太清楚我需要从哪里开始。一般来说，我对 iOS 开发很陌生，对套接字/网络编程也是全新的。我已经尝试了几个没有让我走远的教程。我的目标是：

*   通过套接字连接到服务器（服务器将是一台 Windows 机器，其服务等待来自 iPhone 的传入连接）
*   我最终将向服务器发送 JSON 数据包，以及从服务器接收 JSON 数据包
*   在 iPhone 中提出一个指示成功或失败的响应

如果可能的话，我想先编写/构建客户端，但到目前为止我已经迷路了。希望 SO 社区中的好人能够伸出援助之手，为我指明正确的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:31:06.663

您的问题非常广泛，尤其是它不针对特定的编程问题。我会给你一些指导方针或起点。

对于 iPhone，您需要学习如何使用`NSStream`，您可以从这里开始：[Stream Programming Guide for Cocoa](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Streams.html#//apple_ref/doc/uid/10000188i)。您将需要一个输出流和一个输入流，以便您可以轻松并行地管理传出和传入通信。换句话说，您将从主类派生的`NSInputStream`和类中受益。当您使用流发送数据时，您将使用缓冲区发送原始数据，因此不必使用 JSON 数据包；我个人没有，但这取决于你。`NSOutputStream``NSStream``uint8_t`

在 Windows 上，我假设您将使用 C#，因此您需要了解`TcpListener`哪个 IP 地址和您指定的端口号侦听。这可以让你开始一点：[TcpListener Class](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.71%29.aspx)。您还需要`TcpClient`通过它读取和写入流。

对于高效的服务器，您需要异步工作，并`TcpClient`为此提供同步和异步方法。`BackgroundWorker`此外，为了获得更好的功能，您可能需要在服务器中使用线程，或者使用使事情变得更容易的内置类。

我不建议单独对客户端进行编程，然后对服务器进行编程，我相信它们应该并行进行，因为这是一种双向通信，如果您尝试这样做，您会发现您必须在这里少工作，而在那里少工作。如果我告诉您，当我在我的客户端/服务器应用程序上工作时，我的办公桌上有一台 Mac 和一台 PC，并且我每隔一段时间就会在它们之间切换，这并不奇怪。

最后，我想评论一些你没有问的问题。由于您的客户端是移动设备，因此您必须期望它并非始终处于打开状态（或始终没有 Internet 连接），因此请准备好在服务器中进行一些数据库工作，以便能够存储需要发送的消息之后...

我希望这可以帮助您入门。如果您有更具体的问题，我可能会更好地说明。顺便说一句，这份工作并不容易，但如果你真的喜欢编程，它会很有趣，尤其是当你开始获得第一个结果时；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:58:03.550

如果您真的必须使用套接字，请帮自己一个忙，并获取一个不错的套接字库，例如 AsyncSocket。[https://github.com/robbiehanson/CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

但最好还是先尝试通过 http 进行操作，并且仅在您确实必须这样做时才移动到套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:58:26.103

如果服务器使用某种自定义协议，您可以使用 BSD 套接字 API。如果服务器使用 HTTP 协议，则使用以下任一：

1.  NSURLConnection - 用于来自主线程的异步通信。
2.  使用 NSData 但从单独的线程同步加载。

#2 的示例：

```
NSString *url = @"http://example.com";
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString: url]];
NSString *str = [[NSString alloc] 
    initWithBytes: [data bytes]
    length:[data length] 
    encoding: NSUTF8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:25:34.357

如果您使用 HTTP，如前所述，生活会容易得多。当您已经拥有像 HTTP 一样广泛和广泛使用的协议时，重新发明轮子是没有用的。

[AFNetworking](https://github.com/AFNetworking/AFNetworking)是一个很好的与 Web 服务器通信的库，并且内置了对 JSON 进行编码/解码的能力。

使用 AFNetworking 使用 HTTP、JSON 和 REST API 进行通信的示例。

```
NSMutableURLRequest *jsonRequest = [httpClient requestWithMethod:@"POST"
                                                             path:@"user/login" 
                                                       parameters:[[NSDictionary alloc] initWithObjectsAndKeys:user, @"username", password, @"password", nil]];
    //Make operation from request
    AFJSONRequestOperation *jsonOperation = 
    [AFJSONRequestOperation JSONRequestOperationWithRequest:jsonRequest
                                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                        //Block will be called when request is successful
                                                    } 
                                                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                        //Block will be called if request has failed
                                                    }];
    //Start request
    [httpClient enqueueHTTPRequestOperation:jsonOperation]; 
```

很容易使用，我认为它比 NSURLConnection 更容易。块的使用使其更具主动性。另外，您不必担心 JSON 编码/解码。JSON 将直接为您从 Objective-c 对象编码/解码为 JSON（或从 JSON 到 Objective-c 对象）。

# c# - 如何获取具有特定属性的节点的所有子节点？

> ID：10823545
> 
> 赞同：0
> 
> 时间：2012-05-30T20:11:32.353
> 
> 标签：c#, xml, parsing, xmldocument, xmltextreader

我有一个这样的 xml 文档：

```
<Menu>
    <Category name="Comida Rapida">
        <Food cocina="si">
            <Name>Haburguesa</Name>
            <Price>10</Price>
        </Food>
        <Food>
            <Name>Papas Fritas</Name>
            <Price>20</Price>
        </Food>
    </Category>
    <Category name="Bebidas">
        <Food>
            <Name>Pepsi</Name>
            <Price>30</Price>
        </Food>
        <Food cocina="si">
            <Name>Coca Cola</Name>
            <Price>40</Price>
        </Food>
    </Category>
</Menu> 
```

我想要做的是`<Category>`检查每个属性是否是我需要的，例如“Bebidas”，所以我感兴趣的部分是：

```
<Food>
    <Name>Pepsi</Name>
    <Price>30</Price>
</Food>
<Food cocina="si">
    <Name>Coca Cola</Name>
    <Price>40</Price>
</Food> 
```

现在我有了这个，我想做一些类似于我已经做过的事情：

首先我想打印出所有：

```
Pepsi 30
Coca Cola 40 
```

而且我只想打印出 food 具有属性的那些`cocina="si"`，所以：

```
Coca Cola 40 
```

所以我有各种各样的问题：

首先要使用哪种方法，我对大量可能的方法和实现感到困惑：XmlDocument、XmlReader、XmlTextReader 等。

从[这个问题](https://stackoverflow.com/questions/1505075/deciding-on-when-to-use-xmldocument-vs-xmlreader)中，我收集到 XmlDocument 更容易使用，那就太好了，越简单越好，因为我对解析 Xml 文件很陌生，正如你所欣赏的那样。

现在到了实际的实现，我尝试了各种各样的事情，但没有多少成功，我似乎可以做一些部分，但不能一起做。

```
XmlNodeList elemList = doc.GetElementsByTagName("Category");
for (int i = 0; i < elemList.Count; i++)
{
    Console.WriteLine(elemList[i].InnerXml);
} 
```

这将输出：

```
<Food><Name>Haburguesa</Name><Price>10</Price></Food><Food><Name>Papas Fritas</Name><Price>20</Price></Food>
<Food><Name>Pepsi</Name><Price>30</Price></Food><Food><Name>Coca Cola</Name><Price>40</Price></Food> 
```

这是有道理的，但现在，我如何检查类别是否具有属性`name="cocina"`？

我猜这样的事情可能会有所帮助：

```
for (int j = 0; j < elemList[i].Attributes.Count; j++)
{
    //??                
} 
```

`MoveToAttribute()`但我在 XmlTextReader 中找不到类似的东西。

再说一遍，我如何检查是否有属性`cocina="si"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:49:06.667

LINQ to XML 很好，但很快就会变得混乱。如果您打算使用 XML，您应该知道如何使用 XPaths 来过滤您需要的节点。

尝试这个：

```
foreach (XmlNode node in doc.SelectNodes("//Food[@cocina = 'si']"))
{
    Console.WriteLine(node.SelectSingleNode("Name").InnerText
        + " " 
        + node.SelectSingleNode("Price").InnerText);
} 
```

到处都支持 XPath；在 .NET 之外，LINQ to XML 对您没有好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:25:37.323

我认为 LINQ to XML 将是这里最简单的方法：

你必须在`XDocument`这里使用类。使用静态方法创建文档对象`XDocument.Parse(DOCUMENT)`- 从字符串加载文档 - 或`XDocument.Load(PATH)`- 从具有给定路径的文件加载文档。

之后，您可以通过以下查询轻松找到您要查找的内容：

```
var doc = XDocument.Parse("<Menu> ... </Menu>");
var results = doc.Descendants("Category")
                 .Where(cat => (string)cat.Attribute("name") == "Bebidas")
                 .SelectMany(cat => cat.Elements("Food"))
                 .Where(food => (string)food.Attribute("cocina") == "si")
                 .Select(food => string.Format("{0} {1}", food.Element("Name"), food.Element("Price"))).ToList(); 
```

为了更清楚，我将尝试描述该查询的作用：

1.  获取所有名为“Category”的元素，它们是文档根元素的后代
2.  仅选择“名称”属性值为“Bebidas”的类别
3.  将该类别中的“食物”元素投射到一个集合中
4.  选择“cocina”属性值等于“si”的“food”元素
5.  将结果元素投影到格式为“名称 - 价格”的字符串中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:25:18.213

您应该使用 XPATH，而不是编写代码来检索这些节点。

您想要的 XPath 表达式是 "//Food[@cocina = 'si']"

IE 使用 doc.selectNodes(xpath) 作为 XPath 的使用方式，好的浏览器使用 doc.evaluate()。

看看这里：[http ://www.w3schools.com/xpath/xpath_examples.asp](http://www.w3schools.com/xpath/xpath_examples.asp)

# ios - 创建一个没有 nib 的视图控制器

> ID：10823547
> 
> 赞同：4
> 
> 时间：2012-05-30T20:11:40.283
> 
> 标签：ios, model-view-controller, ios5, uiview, uiviewcontroller

在 AppDelegate 中，我想创建一个 UIViewController 子类并添加它的视图。viw 本身将在代码中指定 - 没有笔尖。

基于苹果文档，我应该使用

```
initWithNibName:nil bundle:nil]; 
```

然后在控制器的 loadView 中，添加我的子视图等。

但是，下面的测试代码对我不起作用。[我在 Apple 的PageControl demo](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)上对 AppDelegate 代码进行了建模，仅仅是因为我的应用程序将实现类似的结构（特别是用于管理分页滚动视图的基本控制器，以及用于构建页面的其他控制器的数组）。

但我怀疑我的 AppDelegate 代码是问题所在，因为日志记录证明 initWithNibName:: 和 loadView 都会触发。下面的应用程序运行，但屏幕是空白的。我期待一个带有标签的绿色视图。

**应用委托**

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        ScrollerController *controller = [[ScrollerController alloc] initWithNibName:nil bundle:nil];
        [self.window addSubview:controller.view];
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

**ScrollerController**（UIViewController 子类）

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)loadView{
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
    UIView *contentView = [[UIView alloc] initWithFrame:applicationFrame];
    contentView.backgroundColor = [UIColor greenColor];
    self.view = contentView;

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(40, 40, 100, 40)];
    [label setText:@"Label created in ScrollerController.loadView"];
    [self.view addSubview:label];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:20:49.947

尝试使用： `self.window.rootViewController = controller;` 而不是 `[self.window addSubview:controller.view];`

请注意，您还应该`@synthesize window;`创建它 `self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T20:23:29.007

而不是 initWithNibNamed:，只需使用 alloc 和 init 或任何其他为视图控制器指定的初始化程序。这是一个[项目的例子](https://github.com/toolmanGitHub/BDHoverViewController/blob/fc631a6df879f77937d7d5cc4da9ec0dfda278e2/SampleHoverViewProject/SampleHoverViewProjectAppDelegate.m)

```
hoverViewController=[[BDHoverViewController alloc] initWithHoverStatusStyle:BDHoverViewStatusActivityProgressStyle];
self.window.rootViewController=hoverViewController;
[self.window makeKeyAndVisible]; 
```

此外，在应用程序委托中将根视图控制器添加到窗口的正确形式（现在无论如何）是这样的：

```
self.window.rootViewcontroller=controller;
[self.window makeKeyAndVisible]; 
```

您不需要将视图添加到窗口。上面的代码会自动完成。

祝你好运，

吨

# mouseover - Htmlunit mouseOver() 不会触发弹出窗口

> ID：10823548
> 
> 赞同：1
> 
> 时间：2012-05-30T20:11:45.490
> 
> 标签：mouseover, htmlunit, popover

我写了以下测试。看起来 htmlunit mouseOver() 函数不起作用（我没有看到弹出框的 html 代码）。我错过了什么吗？我该如何解决这个问题？

```
@Test
public void test() throws Exception {
    try {

        WebClient client = new WebClient(BrowserVersion.FIREFOX_3_6);
        HtmlPage currentPage = client.getPage("http://plugins.learningjquery.com/cluetip/demo/");
        String xpath = "//a[@title='jTip Style!']";
        HtmlElement elm = (HtmlElement) currentPage.getByXPath(xpath).get(0);
        xpath = "(//img[@src='kids-drop-sand.jpg'])[1]";
        HtmlPage newPage = (HtmlPage) elm.mouseOver();
        Assert.assertTrue(newPage.getByXPath(xpath).size() > 0, "Popover is not displayed");

    } catch (Exception ex) {
        logger.error("Exception thrown in " + this.getClass().toString()
                + " " + ex.getMessage(), ex);
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:48:56.503

你试过最新的 svn 吗？
[http://htmlunit.sourceforge.net/gettingLatestCode.html](http://htmlunit.sourceforge.net/gettingLatestCode.html)

或最后一次成功构建： [http ://build.canoo.com/htmlunit/buildresults?log=log20120530150012Lbuild.1963](http://build.canoo.com/htmlunit/buildresults?log=log20120530150012Lbuild.1963)

可用的最新版本相当陈旧，对 JS 事件的管理很差。

# python - 在 Python 中声明一个带有它的实例的类

> ID：10823556
> 
> 赞同：3
> 
> 时间：2012-05-30T20:12:26.950
> 
> 标签：python, class, instance

也许标题有点搞砸了，但是有没有办法在 Python 的同一个类中创建一个类的实例？

像这样的东西：

```
class Foo:
    foo = Foo() 
```

我知道解释器说 Foo 没有声明，但有没有办法实现这一点？

**更新：**

这就是我想要做的：

```
class NPByteRange (Structure): 
    _fields_ = [ ('offset', int32), 
                 ('lenght', uint32), 
                 ('next', POINTER(NPByteRange)) ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:18:47.277

如果您尝试在`Foo`未声明的上下文中执行此操作，解释器只会介意。有它所在的上下文。最简单的例子是在一个方法中：

```
>>> class Beer(object):
...   def have_another(self):
...     return Beer()
... 
>>> x=Beer()
>>> x.have_another()
<__main__.Beer object at 0x10052e390> 
```

如果对象是属性很重要，则可以使用`property`内置函数。

```
>>> class Beer(object):
...   @property
...   def another(self):
...     return Beer()
... 
>>> guinness=Beer()
>>> guinness.another
<__main__.Beer object at 0x10052e610> 
```

最后，如果确实有必要将它作为*类*属性，[那么您也可以这样做](https://stackoverflow.com/questions/128573/using-property-on-classmethods)。

# android - 按钮未在纵向模式下单击

> ID：10823557
> 
> 赞同：0
> 
> 时间：2012-05-30T20:12:29.140
> 
> 标签：android

我有一个按钮，我通过代码将 onClickListener 附加到该按钮。我必须通过代码来解决这个问题，因为它在一个片段中。

监听器在横向模式下工作正常，但在纵向模式下却不行。甚至没有“咔哒”声。

在我的 xml 文件中，我将按钮的初始可见性设置为不可见，然后在用户单击与按钮相同的视图组中的单选按钮时使其可见。单选按钮的 onclicklisteners 在纵向和横向模式下都可以正常工作。

现在，如果我删除 xml 中的“android:visibility="invisible" 代码，onclicksener 在纵向模式下工作正常！但当然我需要它在用户单击单选按钮之前不可见，否则 UI 没有意义。确实很奇怪.

这是我的代码：

```
private void setOnClickForSaveButton(View v) {

        Button changeFundsSave = (Button) v.findViewById(R.id.change_funds_save);
        changeFundsSave.setOnClickListener(saveListener);

    }

Button.OnClickListener saveListener = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {

            //Get the rootview
            View rootView = v.getRootView();

            EditText changeFundsEdit = (EditText) rootView.findViewById(R.id.change_funds_edit);

            if(changeFundsEdit.getText().toString().equals("")) {
                new AlertDialog.Builder(getActivity())
                .setTitle( "" )
                .setMessage( "Enter the number of units" )
                .setPositiveButton( "Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }
                })
                .show();
                return;

            }

        }
    };

    private void setOnClicksForRadioButtons(View v) {

        RadioButton rb1 = (RadioButton)v.findViewById(R.id.add_units);
        RadioButton rb2 = (RadioButton)v.findViewById(R.id.remove_units);
        RadioButton rb3 = (RadioButton)v.findViewById(R.id.set_units);

        rb1.setOnClickListener(addRemoveSetButtonListener);
        rb2.setOnClickListener(addRemoveSetButtonListener);
        rb3.setOnClickListener(addRemoveSetButtonListener);

    }

    OnClickListener addRemoveSetButtonListener = new OnClickListener() {

        @Override
        public void onClick(View v) {

            // Since we only have the radiobutton view, we need to get the parent
            View rootView = v.getRootView();

            //Make the controls visible
            TextView changeFundsText = (TextView) rootView.findViewById(R.id.change_funds_text);
            EditText changeFundsEdit = (EditText) rootView.findViewById(R.id.change_funds_edit);
            Button changeFundsSave = (Button) rootView.findViewById(R.id.change_funds_save);

            changeFundsText.setVisibility(View.VISIBLE);
            changeFundsEdit.setVisibility(View.VISIBLE);
            changeFundsSave.setVisibility(View.VISIBLE);

        }

    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:20:41.213

解决了问题！在纵向模式下，像其他人一样，我在单独的活动中加载一个片段。出于习惯，我在加载片段之前调用了 setContentView(something) ！所以最终这两种布局相互重叠，可见和不可见的按钮相互重叠，事情一定搞砸了。该死的，我不确定我是否喜欢碎片的概念。我第一次使用它们。但也许我只需要在习惯它们之前学习如何正确连接它们:) 非常感谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:23:04.513

我的猜测是

1）你是否再次为你在setOnClickForSaveButton中传递的视图findViewById？因为旧视图将被销毁，并且当您更改屏幕方向时将创建一个视图 2）您是否有多个 R.id.change_funds_save 的 ID 3）在 onclick(v) 的第一行添加一个日志以查看它是否是打电话但转到另一个你没想到的分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:30:47.023

除非您从`layout-land`和加载两个单独的 xml 布局文件`layout-port`，否则横向模式和纵向模式之间应该没有太大区别。话虽如此，我会大胆猜测并说您的应用程序可能由于配置更改而无法正常工作。让我知道这是否真的是真的......即您的应用程序一开始是否工作，但在您旋转屏幕时停止工作？

如果这是真的，您应该研究 Activity 生命周期如何影响您的视图和`onClickListener`s。

# xcode - 我如何让 NSPopover 成为 NSStatusbar 的第一响应者？

> ID：10823558
> 
> 赞同：1
> 
> 时间：2012-05-30T20:12:29.793
> 
> 标签：xcode, macos, nspopover

我的问题很简单；我如何让 NSPopover 成为 NSStatusbar 的第一响应者？

我要的是一个简短的代码，而不是一个大型 XCode 项目的链接。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:46:37.570

虽然您现在可能已经解决了您的问题，但您可以这样做：

```
[yourPopover becomeFirstResponder]; 
```

如果您想要更多控制，只需为 NSPopoverDelegate 设置包含控制器。

```
[yourPopOver setDelegate:self]; /* Don't forget including the <NSPopoverDelegate> in your headerfile */ 
```

然后你可以使用 5 个函数来更好地控制你的弹出框。

```
– popoverShouldClose:
– popoverWillShow:
– popoverDidShow:
– popoverWillClose:
– popoverDidClose: 
```

# arrays - perl 散列散列或数组数组示例

> ID：10823559
> 
> 赞同：0
> 
> 时间：2012-05-30T20:12:30.360
> 
> 标签：arrays, perl, hash

为什么我从来没有见过这样的例子，你声明了哈希，然后把它放在另一个哈希中？

```
my %hash1={};
$hash1{'key1'}='1-111';
$hash1{'key2'}='1-222';
$hash1{'key3'}='1-333';
my %hash2={};
$hash2{'key1'}='2-111';
$hash2{'key2'}='2-222';
$hash2{'key3'}='2-333';

my %main_hash1={%hash1, %hash2}; 
```

我只见过这样的例子，他们将哈希放在哈希中，而不是哈希的变量：

```
my %main_hash2=( 'hash1' => {
                            'key1' => '1-111',
                            'key2' => '1-222',
                            'key3' => '1-333'
                    },
             'hash2' => {
                            'key1' => '2-111',
                            'key2' => '2-222',
                            'key3' => '2-333'
                    }
); 
```

（也与数组类似）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:25:19.523

您不能将哈希存储在哈希中，但是可以将 hashref 存储在哈希中：

```
my %main_hash1 = ( hash1 => \%hash1, hash2 => \%hash2 ); 
```

数组也是如此：

```
my @main_array1 = ( \@array1, \@array2 ); 
```

并混合：

```
my @array_of_hrefs = ( \%hash1, \%hash2 );
my %hash_of_arefs = ( arr1 => \@arr1, arr2 => \@arr2 ); 
```

这是一直在做的；我不知道你为什么没有看到它，我怀疑 SO 上的任何人都会知道这个答案。

此外，这不会初始化哈希：

```
my %hash1={}; ## should be my %hash1; or my %hash1 = (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:25:32.357

请参阅以下示例：

Perl 代码：

```
my %hash1;
$hash1{'key1'}='1-111';
$hash1{'key2'}='1-222';
$hash1{'key3'}='1-333';

my %hash2;
$hash2{'key1'}='2-111';
$hash2{'key2'}='2-222';
$hash2{'key3'}='2-333';

my %main_hash = ( hash1 => \%hash1, hash2 => \%hash2 );
use Data::Dumper;
print Dumper %main_hash; 
```

输出 ：

```
$VAR1 = 'hash2';
$VAR2 = {
          'key2' => '2-222',
          'key1' => '2-111',
          'key3' => '2-333'
        };
$VAR3 = 'hash1';
$VAR4 = {
          'key2' => '1-222',
          'key1' => '1-111',
          'key3' => '1-333'
        }; 
```

使用参考，请参阅[http://perldoc.perl.org/perlreftut.html](http://perldoc.perl.org/perlreftut.html)和如果需要： http: [//perldoc.perl.org/perlref.html](http://perldoc.perl.org/perlref.html)

有一个 ref 技巧让事情变得有点神奇：

```
my $hash_ref = {}; # reference to a blank hash

my %h = ( foo => "1", bar => "2" );

push @{$hash_ref->{'1st_level'}->{'level-2'}->{'level_3'}->{'arr'}}, 123;
push @{$hash_ref->{'1st_level'}->{'level-2'}->{'level_3'}->{'arr'}}, 456;
$hash_ref->{'1st_level'}->{'level-2'}->{'level_3'}->{'arr'}->[2] = \%h;
use Data::Dumper;
print Dumper $hash_ref; 
```

输出 ：

```
$VAR1 = {
          '1st_level' => {
                           'level-2' => {
                                          'level_3' => {
                                                         'arr' => [
                                                                    123,
                                                                    456,
                                                                    {
                                                                      'bar' => '2',
                                                                      'foo' => '1'
                                                                    }
                                                                  ]
                                                       }
                                        }
                         }
        }; 
```

# jquery - 使用 jquery CKEDITOR 打开锚点

> ID：10823561
> 
> 赞同：1
> 
> 时间：2012-05-30T20:12:37.153
> 
> 标签：jquery, ckeditor

各位下午好

我正在使用 CKEDITOR 和 JQuery 我需要知道当我加载 html 信息时 CKEDITOR 如何将编辑器移动到 html 中的锚点。

例如：

我加载了一个 URL 数据，例如：

```
http://example.com/Books/newbook/html/Text/CR!SZ3H2DP1BD2MFEK9AMDKXC1TEQZT_split_011.html 
```

我需要编辑器向我显示指向#filepos91625 锚部分的内容。

这是我的代码的一部分：

```
var editor = $('#xhtml').ckeditorGet();
editor.config.baseHref = response.css;
var url = response.path + block;
editor.setData(response.content);

/* I NEED HERE CODE TO POINT TO ESPECIFIC ANCHOR SECTION INTO HTML EDITOR */ 
```

非常感谢，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:36:37.163

假设你有这样的事情：

```
<textarea cols="80" id="xhtml" rows="10">
<a href="#l001">Line 1</a><br />
<a href="#l002">Line 2</a><br />
<a href="index.html#filepos91625">Line 3</a><br />
    ...
<a href="#l038">Line 38</a><br />
</textarea> 
```

并且您希望 ckeditor 转到包含“#filepos91625”的 href，请使用以下代码：

```
$('#xhtml').ckeditor( function() { 
            var tags = document.getElementById('cke_contents_xhtml').firstChild.contentWindow.document.getElementsByTagName("a");
            for (var i = 0; i < tags.length; i++)
            {
                if (tags[i].href.indexOf('#filepos91625')!=-1) {
                                document.getElementById('cke_contents_xhtml').firstChild.contentWindow.scrollTo(0, tags[i].offsetTop);
                }
            }

            } ); 
```

这是 jquery 和普通 javascript 之间的混合，但它应该以这种方式工作 - jquery 无论如何都不能在 iframe 中使用。CKEDITOR 的回调处理程序遍历 href 元素并查找带有标签 #filepos91625 的链接，以及何时找到滚动到 iframe 内标签的偏移位置。

# c# - 来自 ControllerContext 的 ActionDescriptor

> ID：10823562
> 
> 赞同：14
> 
> 时间：2012-05-30T20:12:42.723
> 
> 标签：c#, asp.net-mvc-3, controller, controllercontext

鉴于我只能访问`ControllerContext`而不是`Action____Contexts`获取当前正在执行的 ActionDescriptor 的最佳方法是什么？

到目前为止，我发现的唯一方法是：

```
new ReflectedControllerDescriptor(context.Controller.GetType())
    .FindAction(context, context.RouteData.GetRequiredString("action")); 
```

这是最佳方法吗？

类被命名的事实`ReflectedControllerDescriptor`让我想知道这个操作是否有很高的成本，因为它将在每个页面请求上执行？与此相关的是这个类是在内部缓存还是我应该`ReflectedControllerDescriptors`明确地缓存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T17:51:31.647

对 MVC 源代码进行一些挖掘，这几乎是最佳方式，而无需复制完成您已经在做的事情所需的所有方法。但是，我不明白为什么您不能缓存找到的操作，以便后续调用具有更高的性能。

`ReflectedControllerDescriptor`虽然似乎有一点开销，但内部也会缓存结果，因为它每次都会检查所有属性。它看起来适用于类似的东西`HttpPostAttribute`，而不是什么。

我的建议是坚持使用您正在使用的内容，而不是自己缓存它。如果由于某种原因，底层方法的工作方式发生了变化，那么您已经是最新的并且不必担心更改存储缓存项目的方式。

# macos - 在 Mac OSX Snow Leopard 上编译带有 xft 支持的 perl-tk

> ID：10823571
> 
> 赞同：3
> 
> 时间：2012-05-30T20:13:37.620
> 
> 标签：macos, perl, osx-snow-leopard, tk

我正在尝试在 Mac OS X 10.6.8 上编译带有 XFT 支持的 perl-tk，但遇到了一些问题。

第一个是跑步

> > perl Makefile.PL XFT=1

产生以下输出（总而言之，找不到 freetype.h 标头，并且无法识别 XFT 参数）：

```
macmini:Tk-804.030 sjurisic$ perl Makefile.PL XFT=1
perl is installed in /usr/local/ActivePerl-5.8/lib okay
PPM for perl5.008009
Test Compiling config/perlrx.c
Test Compiling config/pmop.c
Test Compiling config/pregcomp2.c
Test Compiling config/regexp511.c
Test Compiling config/signedchar.c
Test Compiling config/Ksprintf.c
Test Compiling config/svtrv.c
Test Compiling config/tod.c
Test Compiling -DTIMEOFDAY_TZ config/tod.c
TZ gettimeofday()
Using -L/usr/X11R6/lib to find /usr/X11R6/lib/libX11.dylib
Using -I/usr/X11R6/include to find /usr/X11R6/include/X11/Xlib.h
Cannot find freetype.h include file
WARNING: DISTVNAME is not a known parameter.
'DISTVNAME' is not a known MakeMaker parameter name.
'XFT' is not a known MakeMaker parameter name. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T09:44:35.027

您可以尝试调整 Perl/Tk 发行版中的 myConfig 以为 freetype 包含添加额外的搜索路径。这将是行

```
my $ftinc = Ift("/usr/include","/usr/local/include",$X11INC||()); 
```

您可以在其中添加“/usr/X11/include”。

如果 libXft.so 不在 /usr/local/lib 或任何其他标准库路径中，那么您可能还需要调整`my $ftlib =`下面几行的定义。

无论您是否成功，这都值得在[https://rt.cpan.org/Ticket/Create.html?Queue=Tk](https://rt.cpan.org/Ticket/Create.html?Queue=Tk)

顺便说一句，在 Tk 804.031 XFT=1 中默认设置，因此您不必再在`perl Makefile.PL`调用中指定它。而关于的警告`'XFT' is not a known MakeMaker parameter name.`只是一个 MakeMaker 工件，可能会被忽略。

# php - 在表单提交上加载 jquery 函数，而不是在更改事件上

> ID：10823573
> 
> 赞同：0
> 
> 时间：2012-05-30T20:13:58.453
> 
> 标签：php, jquery

我有一个动态更改`select`菜单的 jQuery 脚本。`populate()`每次在其中一个菜单中发生更改事件时，该脚本都会使用该函数。我希望在`form`提交后运行相同的脚本。要知道这就是脚本的样子......

```
$(document).ready(function(){
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
    }

    function populate() {
        if ($('#STATEID').val() == 'AK' || $('#OB_USTATEID').val() == 'DC') {
            // Alaska and District Columbia have no counties
            $('#county_drop_down3').hide();
            $('#no_county_drop_down3').show();
        } 
        else {
            fetch.doPost('../../getCounties2c.php');
        }
    }

    $('#STATEID').change(populate);

    var fetch = function() {
        var counties = $('#countyid');
        return {
            doPost: function(src) {
                $('#loading_county_drop_down3').show(); // Show the Loading...
                $('#county_drop_down3').hide(); // Hide the drop down
                $('#no_county_drop_down3').hide(); // Hide the "no counties" message (if it's the case)

                if (src) 
                    $.post(src, { state_code3: $('#STATEID').val() },  this.getCounties);
                else 
                    throw new Error('No SRC was passed to getCounties!');
            },
            getCounties: function(results) {
                if (!results) 
                    return;

                var allCities = $("<option value=\"All\">All Counties</option>");
                counties.html(results);
                counties.prepend(allCities);
                var first = getUrlVars()["countyid"];
                if (first) { 
                    counties.val(first).attr('selected',true);
                }
                else {
                    counties.val("All").attr('selected',true);
                }

                $('#loading_county_drop_down3').hide(); // Hide the Loading...
                $('#county_drop_down3').show(); // Show the drop down
            }
        }
    }();

    populate();
}); 
```

我怎样才能做到这一点？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:16:58.413

用于`$(element).submit(function (e) {} );`捕获提交事件。您甚至可以通过调用`$(element).submit()`.

jQuery 文档：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

# c# - Facebook C# 使用来自多查询的结果

> ID：10823575
> 
> 赞同：4
> 
> 时间：2012-05-30T20:14:11.593
> 
> 标签：c#, .net, facebook-c#-sdk, facebook-fql

我正在使用多重查询来让朋友签到。我有查询按预期返回数据，但我想做的是创建一个包含每个查询的元素的 DataTable。我只有 3 个结果，但数据中至少有 100 个。除了我知道我的循环不正确之外，我不确定我做错了什么。具有讽刺意味的是，3 是查询的数量。我确定这是我的 foreach 但我不确定我应该循环什么。请帮忙。

```
dynamic resultCheckins = fb.Get("fql",
   new
   {
       q = new
       {
           friends_checkins = "SELECT author_uid, coords, timestamp, page_id, message FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me())",
           users = "SELECT uid, name, pic_small from user where uid IN (SELECT author_uid FROM #friends_checkins)",
           resultCheckins = "SELECT page_id, name, description from place where page_id IN (SELECT page_id FROM #friends_checkins)",
       }
   });

JObject resultCheckinsJson = JObject.Parse(resultCheckins.ToString());
DataTable CheckIn = new DataTable();
CheckIn.Columns.Add(new DataColumn("Friend", typeof(string)));
CheckIn.Columns.Add(new DataColumn("Picture", typeof(string)));
CheckIn.Columns.Add(new DataColumn("Link", typeof(string)));
CheckIn.Columns.Add(new DataColumn("Place", typeof(string)));
CheckIn.Columns.Add(new DataColumn("Coords", typeof(string)));
CheckIn.Columns.Add(new DataColumn("When", typeof(string)));
CheckIn.Columns.Add(new DataColumn("Message", typeof(string)));

int thiscounter = 0;
foreach (var row in resultCheckinsJson["data"].Children())
{
    string placename = resultCheckins.data[1].fql_result_set[thiscounter].name.ToString().Replace("\"", "");
    string NavigateURL = "http://facebook.com/" + resultCheckins.data[1].fql_result_set[thiscounter].page_id.ToString().Replace("\"", "");

    DataRow CheckInRow = CheckIn.NewRow();
    CheckInRow["Friend"] = resultCheckins.data[2].fql_result_set[thiscounter].name;
    CheckInRow["Picture"] = resultCheckins.data[2].fql_result_set[thiscounter].pic_small;
    CheckInRow["Link"] = ResolveUrl(NavigateURL);
    CheckInRow["Place"] = resultCheckins.data[1].fql_result_set[thiscounter].name.ToString().Replace("\"", "");
    CheckInRow["Coords"] = resultCheckins.data[0].fql_result_set[thiscounter].coords.ToString().Replace("\"", "");
    DateTime dtDateTime =  dtDateTime.AddSeconds(resultCheckins.data[0].fql_result_set[thiscounter].timestamp).ToLocalTime();
    CheckInRow["When"] = dtDateTime.ToString();
    CheckInRow["Message"] = resultCheckins.data[0].fql_result_set[thiscounter].message.ToString();
    CheckIn.Rows.Add(CheckInRow);
    thiscounter++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:58:03.460

尝试更改此行：

```
foreach (var row in resultCheckinsJson["data"].Children()) 
```

至：

foreach（resultCheckinsJson.data 中的动态行）

然后得到这样的属性：

```
row.name 
```

# .net - 使用与 WebBrowser 控件相关的 Application.DoEvents

> ID：10823577
> 
> 赞同：0
> 
> 时间：2012-05-30T20:14:23.530
> 
> 标签：.net, winforms

我继承了一个使用 WebBrowser 控件来显示 PDF 文件的应用程序。在整个代码中，应用程序多次调用 Application.DoEvents 方法，通常是在调用 Navigate 函数并设置 WebBrowser 控件的 Url 属性之后（将两者都设置为 null，以清除页面）。我不确定为什么这样做，但我认为根据日志它会导致崩溃。

更新进度条和设置标签时也会使用此功能，但这是在循环中完成的，因此我可以看到它的用途。

有人可以解释为什么会这样做吗？我知道这个函数在循环内使用，但在循环外我不明白它的用途。这是我正在谈论的代码的两个示例：

```
private void txtBoxFile_TextChanged(object sender, EventArgs e)
{
   browser.Navigate("");
   browser.Url = null;
   Application.DoEvents();
} 
```

和

```
private UpdateMessage(int timePassed)
{
   progressBar.Value = (int)Math.Min(timePassed, progressBar.Maximum);
   label.Text = timePassed.ToString() + " seconds have elapsed.";
   Application.DoEvents();
} 
```

如果我在一次扫描中注释掉所有调用，可能会有什么副作用？应用程序的处理时间并不多，因此即使是 UI 延迟也不是问题。

# c# - 如何验证多个数据注释并在视图中返回一条错误消息

> ID：10823578
> 
> 赞同：0
> 
> 时间：2012-05-30T20:14:23.990
> 
> 标签：c#, validation, asp.net-mvc-2, data-annotations

我正在使用带有 MVC2 的数据注释来验证出生日期。出生日期有 3 个不同的字段。（月、日和年）*（它们必须是三个单独的字段）*

现在我对每个字段都有单独的数据注释。我怎样才能使所有三个字段都得到验证并在我的视图中显示一条错误消息。我现在的设置会为每个字段创建一条错误消息。

如果这些字段中的任何一个引发错误，我想显示一条通用错误消息，例如`"Date of Birth invalid"`.

月份字段：

```
 [Required]
        [DisplayName("Month")]
        public IEnumerable<string> Months 
        { 
            get 
            {
                if (_Months == null)
                {
                    List<string> months = new List<string>();
                    months.Add("-- Select Month --");
                    months.AddRange(DateTimeFormatInfo.CurrentInfo.MonthNames.Select(Month => Month).ToList());
                    months.RemoveAt(months.Count - 1);
                    _Months = months;
                }
                return _Months;
            }
            set { _Months = value; }
        }

        private IEnumerable<string> _Months;

        public string SelectedMonth {get; set;} 
```

日场：

```
 [Required]
    [DisplayName("Day")]
    [Range(1,31, ErrorMessage = "Not a valid day")]
    public int? Day { get; set; } 
```

年份字段：

```
 [Required]
    [DisplayName("Year")]
    [Range(1900,9999, ErrorMessage = "Not a valid year")]
    [ValidateBirthYear]
    public int? Year { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:05:53.430

你可能想看看这个[问题](https://stackoverflow.com/questions/11475670/how-to-validate-a-date-using-3-dropdowns-day-month-year-using-jquery-unobtr)。他们正在寻求验证也分为三个字段的日期时间。

# javascript - knockoutjs 复选框并单击父 td

> ID：10823580
> 
> 赞同：6
> 
> 时间：2012-05-30T20:14:47.017
> 
> 标签：javascript, knockout.js

我有一张桌子，有一排。该行有一个 TD（其中有一个复选框），在 TD 上我有一个点击功能。这样当点击 TD 时，复选框将被选中/取消选中。

当我点击 TD 时它工作正常，但是当点击复选框时，复选框的（视觉）值没有改变（它没有被选中/取消选中）

想要的情况是：

1.  当我单击复选框时，复选框的（视觉）值会发生变化，我可以调用一个函数。（例如进行 AJAX 调用）

2.  当我点击 TD 时，复选框的（视觉）值会发生变化，我可以调用一个函数。（例如进行 AJAX 调用）

我们怎样才能做到这一点？

[示例代码](http://jsfiddle.net/Eatdh/5/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T22:19:31.320

问题是`TD`当您单击 时，单击处理程序也会触发`checkbox`，这意味着的默认单击处理程序和您的自定义单击处理程序`checkbox`都会更改（它们相互抵消）。解决方案是防止对 的点击冒泡到. 您可以使用此绑定在 Knockout 中执行此操作：.`checkbox``TD``checkbox``TD``click:function(){return true}, clickBubble:false`

这是在行动：http: [//jsfiddle.net/mbest/Eatdh/12/](http://jsfiddle.net/mbest/Eatdh/12/)

但是，我确实认为使用 a`label`是一种更好的方法（请参阅我的其他答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T01:32:55.410

为避免点击事件问题，请使用该`label`元素使更大的区域可点击。在这里，我将标签设置为块元素，因此它占据了整个元素`td`：

```
<td>
    <label style="display: block">
        <input type="checkbox" data-bind="checked: checkBox" />
    </label>
</td> 
```

见[http://jsfiddle.net/mbest/LsxSh/](http://jsfiddle.net/mbest/LsxSh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:27:33.547

Td 事件似乎覆盖了输入的检查点击事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T20:23:48.083

单击复选框会调用 td 的单击处理程序代码：

```
self.checkBox(!self.checkBox()); 
```

这将删除检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T00:05:45.187

这不是很干，但它快速而实用：[小提琴](http://jsfiddle.net/sSkK4/)

```
<td data-bind="click:tdClick">
      <input type="checkbox" data-bind="checked: checkBox, click:tdClick" />
</td> 
```

# asp.net-mvc - 用户控件的 MVC 替代品

> ID：10823583
> 
> 赞同：2
> 
> 时间：2012-05-30T20:14:54.067
> 
> 标签：asp.net-mvc

我们正在将一个大型 WebForms 应用程序转移到 MVC。

在 WebForms 应用程序中，我们有一些可重用的控件 ( `.ascx`)。例如，*在您键入时显示用户名建议的文本框*。该控件向页面添加了一些 JS/CSS，具有一些服务器端逻辑和自定义属性（如`SelectedUserID`）。

**在 MVC 应用程序中应该是什么？**如何将这些东西封装到 MVC 应用程序中的一个可重用实体中？也许是部分观点？但是您不能`<head>`从局部视图将 JS/CSS 添加到页面中（最好检查它是否尚未添加）......另外，我如何返回类似于`SelectedUserID`局部视图中提到的内容？

换个说法——**你将如何在 MVC 应用程序中实现这样的控件？**

PS。我知道您仍然可以在 MVC 应用程序中使用 .ascx 用户控件，但这似乎是一种“hacky/legacy”方式。什么是“合法”选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:26:55.280

你的问题很广泛。我所有的评论/答案都将在[Razor](http://www.asp.net/mvc/videos/mvc-3/mvc-3-razor-view-engine)中。在我看来，如果你要切换到 MVC，你不妨使用 Razor。有很多很好的理由来改变，但我想说，对于任何正在迁移的人来说，我的首选，最好的理由是两个；first razor 让我戒掉了一些关于如何使用 webform 进行编程的坏习惯，并且在同一个庄园里，它迫使我重新编写我的代码，而不是尝试复制、粘贴和更改原始代码以在 MVC 中工作。

> 该控件向页面添加了一些 JS/CSS，具有一些服务器端逻辑和自定义属性。在 MVC 应用程序中应该是什么？

这是一个非常[宗教的软件](http://www.codinghorror.com/blog/2006/10/software-development-its-a-religion.html)问题。有很多方法可以做到这一点。

因此，我对如何在 MVC 中添加 JS/CSS 持宗教观点。包含服务器端的一种方法是在布局/主模板中创建一个区域。

**视图/_ViewStart.cshtml**

```
@{
  Layout = "~/Views/Shared/Layout.cshtml";
} 
```

**视图/共享/Layout.cshtml**

```
<!doctype html>
  <head>
    <link href="/Styles/Global.css" rel="stylesheet" type="text/css" />
    @RenderSection("Styles", required: false)
    <script src="/Scripts/Global.js" type="text/javascript"></script>
    @RenderSection("Scritps", required: false) 
```

这将允许每个视图可选地（因为`required=false`）使用 RenderSeion 代码添加任何样式或脚本。

**视图/主页/Index.cshtml**

```
@section Styles {
    <link href="/Styles/Home/Index.css" rel="stylesheet" type="text/css" />
} 
```

这非常简单，对于许多简单到中等复杂的网站来说可能是一个很好的解决方案。这对我来说还不够，因为我需要按照您的要求进行操作，并且仅在真正需要时才包含文件。此外，部分视图和模板无法渲染部分，我发现它是一个巨大的 PITA。所以我添加了一些 HtmlHelper 扩展方法。（我只会展示 Javascript 的代码，因为样式表几乎是相同的代码。这些方法不允许重复的 url。

**域/HtmlHelperExtensions.cshtml**

```
public static class HtmlHelperExtensions
{
    private const string _JSViewDataName = "RenderJavaScript";
    private const string _StyleViewDataName = "RenderStyle";

    public static void AddJavaScript(this HtmlHelper HtmlHelper, string ScriptURL)
    {
        List<string> scriptList = HtmlHelper.ViewContext.HttpContext.Items[HtmlHelperExtensions._JSViewDataName] as List<string>;
        if (scriptList != null)
        {
            if (!scriptList.Contains(ScriptURL))
            {
                scriptList.Add(ScriptURL);
            }
        }
        else
        {
            scriptList = new List<string>();
            scriptList.Add(ScriptURL);
            HtmlHelper.ViewContext.HttpContext.Items.Add(HtmlHelperExtensions._JSViewDataName, scriptList);
        }
    }

    public static MvcHtmlString RenderJavaScripts(this HtmlHelper HtmlHelper)
    {
        StringBuilder result = new StringBuilder();

        List<string> scriptList = HtmlHelper.ViewContext.HttpContext.Items[HtmlHelperExtensions._JSViewDataName] as List<string>;
        if (scriptList != null)
        {
            foreach (string script in scriptList)
            {
                result.AppendLine(string.Format("<script type=\"text/javascript\" src=\"{0}\"></script>", script));
            }
        }

        return MvcHtmlString.Create(result.ToString());
    }
} 
```

**更新了 Views/Shared/Layout.cshtml**

```
<!doctype html>
  <head>
    <link href="/Styles/Global.css" rel="stylesheet" type="text/css" />
    @Html.RenderStyleSheets()
    <script src="/Scripts/Global.js" type="text/javascript"></script>
    @Html.RenderJavascripts() 
```

**更新了 Views/Home/Index.cshtml**

```
@Html.AddStyleSheet("/Styles/Home/Index.css") 
```

到你的下一个问题...

> 如何将这些东西封装到 MVC 应用程序中的一个可重用实体中？也许是部分观点？

Razor 支持局部视图和模板。尽管从技术上讲，每种方法的功能都存在很大的重叠，但是每种方法的设计方式都存在局限性，以使程序员可以在需要时利用每种方法。

部分视图*不需要*模型/类即可呈现。这是一个完全有效的局部视图：

**/Views/Home/Index.cshtml**

```
@Html.Partial("Partial-Menu") 
```

**/Views/Shared/Partial-Menu.cshtml**

```
<div id="menu">
  <a href="/">Home</a>
  <a href="/Home/About">About Us</a>
</div> 
```

另一方面，模板*确实*需要一个模型才能被渲染。这是因为模板是一种将任何类或结构呈现为编辑模板或显示模板的方法。

**/Models/Person.cs**

```
public class Person
{
  public string FirstName { get; set; }
  public string LastName { get; set; }
} 
```

**/控制器/HomeController.cs**

```
public ActionResult Index()
{
  Person model = new Person();
  model.FirstName = "Jon";
  model.LastName = "Doe";

  return this.View(model);
} 
```

**/Views/Home/Index.cshtml**

```
@model Project1.Models.Person

@Html.DisplayModel()

@Html.EditforModel() 
```

**/Views/Shared/DisplayTemplates/Person.cshtml**

```
@model Project1.Models.Person

<div>@Html.LabelFor(x => x.FirstName) @Html.DisplayFor(x => x.FirstName)</div>
<div>@Html.LabelFor(x => x.LastName) @Html.DisplayFor(x => x.LastName)</div> 
```

**/Views/Shared/EditorTemplates/Person.cshtml**

```
@model Project1.Models.Person

<div>@Html.LabelFor(x => x.FirstName) @Html.EditorFor(x => x.FirstName)</div>
<div>@Html.LabelFor(x => x.LastName) @Html.EditrorFor(x => x.LastName)</div> 
```

在我看来，任何可能变成数据输入表单的模型都应该是模板。这是我更喜欢封装我的模型的方式。使用前面提供的扩展方法，我的部分视图和模板都可以根据需要加载包含（目前只有我的其中一个模型实际上需要使用它）。

我的偏好是每个页面呈现最多三个包含（每个 Javascript 和样式）。我基本上有一个 Global.css/js、一个控制器 Home.css/js 和一个页面 Index.css/js 作为可能的包括。我很少包含控制器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T17:27:19.133

到目前为止，我发现的最佳解决方案是 Razor 声明性助手。他们非常适合。

```
@helper UserTextBox() {
    <input type="text" />

    <!--my own helper that registers scripts-->
    @Html.AddJS("../js/myscript.js") 
} 
```

相关问题：[Razor：声明性 HTML 助手](https://stackoverflow.com/questions/4451287/razor-declarative-html-helpers)

相关说明：您不能在声明性帮助器中使用 @Html 帮助器，但有一种解决方法：[https ://stackoverflow.com/a/5557503/56621](https://stackoverflow.com/a/5557503/56621)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:50:40.877

我会将 js/css 添加到主布局中，然后编写一个 html 助手来呈现您的自定义控件。

许多在 aspnet mvc 中使用 jquery 的控件都是这样工作的。

[在此处](http://mvcjquerycontrols.codeplex.com/)查看此控件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:27:18.877

好吧，你不能拥有“自动”包含 css/js 的东西。这是用户必须添加到页面（主/布局或当前页面）的内容。但一般来说，人们会创建一个 Html Helper。不要指望这些是复杂的系统（如 asp.net 时代的巨大网格），但您可以用它们做很多事情。

是的，对于简单的事情，部分页面可能更容易。更简单的可能是编辑器或显示模板。

然而，总的来说，如今 MVC 的大多数“控件”都是基于 jQuery 的。

此处提供了一个简短的视频：[http ://www.asp.net/mvc/videos/mvc-2/how-do-i/how-do-i-create-a-custom-html-helper-for-an -mvc-应用程序](http://www.asp.net/mvc/videos/mvc-2/how-do-i/how-do-i-create-a-custom-html-helper-for-an-mvc-application)

不要试图将您的 javascript 包含在这些机制中。虽然它可能适用于单个控件，但如果您在页面上有多个控件，您将获得重复的 css/js。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T05:53:33.260

1) 对于自定义 js/css，您可以使用如下部分：

//视图中的代码

```
@section someName
{
    ...
} 
```

//布局页面中的代码

```
@if (IsSectionDefined("someName"))
    {
        @RenderSection("someName")
    } 
```

2）我最好做到以下几点：

*   使用 Id 属性创建模型 SelectedUser
*   为此模型创建模板
*   将 SelectedUser 对象添加到需要它的任何模型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-16T12:18:42.200

它们必须用空行与周围的文本隔开。最外面的块元素的开始和结束标签不能缩进。Markdown 不能在 HTML 块中使用。

# c# - 泛型类中的方法重载

> ID：10823584
> 
> 赞同：10
> 
> 时间：2012-05-30T20:14:57.810
> 
> 标签：c#, generics, overloading

我正在使用包含以下泛型类中的重载方法的代码：

```
public class A<T>
{
    public void Process(T item) { /*impl*/ }
    public void Process(string item) { /*impl*/ }
} 
```

在对类进行参数化时，`string`我是否失去了使用泛型参数调用版本的可能性？

```
var a = new A<string>();
a.Process(""); //Always calls the non-generic Process(string) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T20:20:05.140

特定类型优先于泛型类型。

例如，这是我在 LINQPad 中测试的。

```
void Main()
{
    new A<string>().Process("Hello");
}

public class A<T>
{
    public void Process(T item) { Console.WriteLine("T"); }
    public void Process(string item) { Console.WriteLine("string"); }
}

// Output: string 
```

如果您在隐藏通用方法时遇到问题，那么您需要重新考虑一些事情。通过使用特定类型重载泛型方法，您实际上是在说：“如果需要，请使用泛型重载，但如果可以，请使用特定版本，*因为它应该知道什么是最好的。* ”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T20:26:25.523

是的。这记录在 C# 规范的第 7.5.3 节，重载决议中。

从 7.5.3.6 开始：

> *“虽然声明的签名必须是唯一的，但类型参数的替换可能会导致相同的签名。在这种情况下，上述重载决议的平局规则将选择最具体的成员。”*

那里给出的示例指出，在下面的情况下，重载解析`G<int>.F1`将选择非泛型

```
class G1<U>
{
    int F1(U u);
    int F1(int i);
} 
```

7.5.3.2，“更好的函数成员”中概述了适用于此的平局规则：

> *如果参数类型序列 {P1, P2, ..., PN} 和 {Q1, Q2, ..., QN} 是等价的（即每个 Pi 具有到相应 Qi 的恒等式转换），则应用以下平局规则，为了确定更好的功能成员。*

*   *如果 MP 是非泛型方法而 MQ 是泛型方法，则 MP 优于 MQ。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T20:26:34.697

我刚刚发现了一种方法，但有点眼花缭乱。因为泛型和重载在构建时得到解决，你可以定义一个泛型方法：

```
public static CallerClass
{
    public static CallGenericOverload<T>(GenericClass<T> cls, T val)
    {
        return cls.ProblemOverload(val); 
    }   

    //We can also make an extension method. 
    //We don't have to of course, it's just more comfortable this way.
    public static CallGenericOverloadExtension<T>(this GenericClass<T> cls, T val)
    {
        return cls.ProblemOverload(val);
    }

}

public GenericClass<T>
{
     public string ProblemOverload(T val)
     {
         return "ProblemOverload(T val)";
     }
     public string ProblemOverload(string val)
     {
         return "ProblemOverload(string val)";
     }
} 
```

现在，如果我们执行以下操作：

```
var genClass = new GenericClass<string>();
Console.WriteLine(genClass.ProblemOverload("")); //output: ProblemOverload(string val)
Console.WriteLine(CallerClass.CallGenericOverload(genClass, "")); //output: ProblemOverload(T val)
Console.WriteLine(genClass.CallGenericOverloadExtension("")); //output: ProblemOverload(T val) 
```

如果定义泛型类而不是泛型方法，则可以使用类似的技巧。重要的是您传输到的参数`ProblemOverload`需要是类型`T`而不是`string`调用中的类型。毕竟，该方法`CallGenericOverload`知道它`T`在构建时得到 a，因此它将绑定到接受参数的重载。它实际上会`string`在运行时得到 a 并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T20:22:19.443

以前这样做过，我倾向于说“不”，但总有更多有见识的人会反对。

如果内存够用，~~运行时~~编译器会选择最强类型的重载来执行。

**澄清**

我的回答措辞不好，我应该投反对票。

OP 问道，“*当为字符串参数化类时，我是否失去了使用泛型参数调用版本的可能性？* ”我没有回答“不，你不能那样做”，而是“不，你不这样做” t 失去使用泛型参数调用版本的能力。”

我应该更清楚。

# c# - 编写一个非常好的 ASP.Net Async HttpHandler

> ID：10823587
> 
> 赞同：1
> 
> 时间：2012-05-30T20:15:29.663
> 
> 标签：c#, asp.net

直到最近我还以为我写了一些非常聪明的 IHttpAsyncHandler。处理程序的功能归结为绕过对完整 Ajax web 应用程序的预定义主机的跨域限制。因此传入的请求经过验证，然后使用普通的 HttpWebRequest.BeginGetResponse 立即分派到真实服务器。

今天在调试过程中，我发现 Thread.CurrentThread.IsThreadPoolThread 在 BeginGetResponse 回调中返回 true。这意味着我已经将一个 ThreadPool 线程换成了另一个。伟大的 ：）

任何可以建议替代实施的人？

# php - 我需要设置一个 Magento 站点，有两个单独的网站，相同的产品但不同的价格/sku

> ID：10823591
> 
> 赞同：0
> 
> 时间：2012-05-30T20:15:56.033
> 
> 标签：php, magento, e-commerce

我需要建立一个 Magento 站点，有两个单独的网站，相同的产品，但不同的价格/skus。

现在，我为每个产品添加了两个自定义属性字段以及其他公司的 sku/价格。我有一个标志，可以选择要显示的产品 sku/价格。

这对 Magento 是否可行，或者我是否以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:24:23.173

您可以为每个网站的产品定价。是的，SKU 是全球性的，但正如 Mike 所说，如果你想跟踪你的库存，你应该遵循 magento 的逻辑。添加您的产品，然后为您的每个网站设置不同的价格。如果产品以任何一种方式出售，库存将相应地改变，您不会遇到更多问题。

这只是我的2美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:54:00.473

Magento 的设计使每个产品只有 1 个 SKU。他们这样做是为了让您可以使用 Magento 在 SKU 的基础上管理库存。如果您不关心库存，那么您的方式会很好。但是，正确的做法是拥有两种不同的产品。

如果两种产品相同，但您只想确定它们来自哪家商店，那么还有其他方法可以做您想做的事情。

我会说你做错了，但这只是我的意见。你可以随心所欲地去做！

# html - IE 的 XHTML 格式问题

> ID：10823593
> 
> 赞同：1
> 
> 时间：2012-05-30T20:16:03.437
> 
> 标签：html, css, internet-explorer, xhtml

我目前在 IE（非兼容模式）下的网站存在问题：www.cueprojects.ca。

当我切换到兼容模式时，页面看起来很好。

两个问题是：导航子菜单被推了 apx 75 像素，并且新闻滚动条文本没有隐藏并溢出整个页面（即使 css 属性设置为隐藏）。

附上IE不兼容模式截图：

![在此处输入图像描述](../Images/55badcc4a0d011be15763c5947f24c07.png)

以及它的外观（在 IE 兼容模式和 FF、Chrome 下）

![在此处输入图像描述](../Images/0eb42ed2ceecfc9f6151d2418196ad77.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:34:50.120

这是一个问题，因为您没有正确定位 UL。

为了确保它们位于它们的“父母”之下，您应该制作它们相对的 LI `position: relative;`，然后将样式`left: 0;`应用于 UL。当您没有明确指定定位时，IE 会出现奇怪的行为。

我不知道这是哪个确切的错误，但我建议您像瘟疫一样避免使用 IE8 及以下版本（或者至少 IE7，它几乎不再使用了）。

在修复此问题之后，您仍应使用 X-UA-Compatible 标记作为 html 中的 http 标头或元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:15:47.227

我的 IE8 也有同样的问题，其他浏览器也可以，但 IE 不能使用以下方法 IE 可以正常工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php # my php codes go here ?>
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

我从上面的第一行代码开始我的页面，然后放入我的会话数据、配置和需要文件，最后我用 html 开始标签开始我的页面

如果我在我的 php 代码之后移动第一行 IE 不能在所有模式下工作并产生视觉问题，但上述代码都可以正常工作

希望你明白我写的。

# ruby - 以编程方式确定是否安装了某个 gem，如果没有安装它

> ID：10823594
> 
> 赞同：20
> 
> 时间：2012-05-30T20:16:07.903
> 
> 标签：ruby, gem

这似乎不是一件难事。

我想要一个 ruby​​ 脚本，它可以确定系统上当前是否安装了某个 gem（任何版本和/或某个版本规范）（无论在哪里`gem list`），如果没有，则安装它。

是的，我知道在某些情况下 bundler 很擅长。相信我，我有一个案例，出于奇怪的原因，我不想使用 bundler。我真的很想以编程方式询问本地 gem 存储库。

以编程方式安装的一种方法是`gem install`，当然。

但是我无法找到一种可靠的方法来以编程方式*询问*是否安装了特定的 gem，而不是使用外壳，而不是使用 ruby​​gem api，而不是任何东西。

我错过了吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-02T16:15:27.417

```
# The version requirements are optional.
# You can also specify multiple version requirements, just append more at the end
gem_name, *gem_ver_reqs = 'json', '~> 1.8.0'
gdep = Gem::Dependency.new(gem_name, *gem_ver_reqs)
# find latest that satisifies
found_gspec = gdep.matching_specs.max_by(&:version)
# instead of using Gem::Dependency, you can also do:
# Gem::Specification.find_all_by_name(gem_name, *gem_ver_reqs)

if found_gspec
  puts "Requirement '#{gdep}' already satisfied by #{found_gspec.name}-#{found_gspec.version}"
else
  puts "Requirement '#{gdep}' not satisfied; installing..."
  # reqs_string will be in the format: "> 1.0, < 1.2"
  reqs_string = gdep.requirements_list.join(', ')
  # multi-arg is safer, to avoid injection attacks
  system('gem', 'install', gem_name, '-v', reqs_string)
end 
```

最新的 ruby​​gems 版本提供了一个安装程序 API，因此`gem`您也可以使用以下命令，而不是使用该命令：

```
# using the same "gdep" variable as above
Gem.install gem_name, gdep.requirement 
```

但是，我不确定是否`Gem.install`尊重您的`.gemrc`文件。

有很多有用的方法可以查询已安装的 gem（参见[rdocs](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/rubygems/rdoc/index.html)）。一些可能会有所帮助：

*   `Gem::Specification.find_all_by_name`
*   `Gem::Requirement#satisfied_by?(gem_version_instance)`
*   `Gem::Specification#satisfies_requirement?(gem_dependency_instance)`
*   `Gem.loaded_specs`- 您通过该`gem`方法或通过该方法实际加载的 gem 的哈希值`require`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-30T21:23:41.820

最后一个答案很好，但这更精确一点：

```
`gem install redis` unless `gem list`.lines.grep(/^redis \(.*\)/) 
```

仅匹配名为 的 gem `redis`，而不匹配其他 gem `redis-native_hash`，如 或其他。

我看到的另一种方法是尝试要求 gem。

```
begin
  require 'some_crazy_gem'
rescue LoadError
  `gem install some_crazy_gem`
  #...
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-02T13:20:31.330

检查是否安装了比特定版本更新的 gem。

```
PROMPT> gem list nakamoto -i -v ">=1.2.3"
true 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T20:57:22.640

我不知道这是否是最佳实践，但是：

```
list = `gem list`
`gem install builder` unless list.include? "builder" 
```

... 在 irb 为我工作。

# powershell - 为什么我的 Powershell 会话有时会拒绝运行外部命令行程序？

> ID：10823595
> 
> 赞同：2
> 
> 时间：2012-05-30T20:16:10.400
> 
> 标签：powershell

我有一个奇怪的问题，当在 Powershell 命令行中进行大量播放时，在某些时候它会停止执行任何命令行应用程序，如`cmd.exe`or `more.com`，但会继续执行 Powershell 函数等。我可以打开一个新的 Powershell 窗口

## 情况

*   我正在使用[Powershell 社区扩展](http://pscx.codeplex.com/)
*   我有一个[Powershell 配置文件](http://younix.us/cgit/cgit.cgi/dhd.git/tree/hbase/Microsoft.PowerShell_profile.ps1)
*   当我尝试调试[正在编写的脚本](http://pastebin.com/WqxyXQFU)时，我似乎遇到了这个问题（稍后会详细介绍）

## 举例问题

通常我应该能够运行 ping 并看到这样的正常输出：

```
PS> ping google.com
Pinging google.com [74.125.227.78] with 32 bytes of data:
Reply from 74.125.227.78: bytes=32 time=30ms TTL=49 
Reply from 74.125.227.78: bytes=32 time=38ms TTL=49 
Reply from 74.125.227.78: bytes=32 time=31ms TTL=49 
Reply from 74.125.227.78: bytes=32 time=32ms TTL=49 

Ping statistics for 74.125.227.78:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 30ms, Maximum = 38ms, Average = 32ms 
PS> 
```

但是，当我遇到此问题时，PS 提示符会立即返回：

```
PS> ping google.com
PS> 
```

我可以在任务管理器中验证这段时间内 ping 没有运行。此外，对于应该修改文件系统上的文件的程序（如`takeown.exe`GnuWin32 的`wget.exe`），不会发生修改。据我所知，该命令根本没有运行。

我能想到的每个非 Powershell 命令行应用程序都会发生这种情况（来自官方 Python 发行版的`more.com`GnuWin32 的、`less.exe`StrawberryPerl的等）。`ping.exe``cmd.exe``python.exe``perl.exe`

我仍然可以运行任何 Powershell 函数、cmdlet 或别名。此外，我可以运行非命令行应用程序，例如`notepad.exe`.

## （可能的）罪魁祸首：我的剧本

在过去的几天里，当这个问题开始出现时，我一直在尝试编写 PS 脚本。在这里粘贴太长了（目前400行），但如果你想看的话，我已经[把它上传到了pastebin 。](http://pastebin.com/WqxyXQFU)（目前效果不是很好。）

现在我正在处理该脚本中 WinPE-AddExplorer 函数中的一些权限问题，所以很多时候我在该函数运行时使用 Ctrl-C'ing ......可能有什么导致问题?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-06T14:11:03.047

我有这个确切的问题。我猜你正在使用 Powershell V2。请参阅此错误报告 ( [https://connect.microsoft.com/PowerShell/Feedback/Details/665809](https://connect.microsoft.com/PowerShell/Feedback/Details/665809) )。据说已在 Powershell v3 中修复。（我没有在 v4 中看到这个问题，使用在 v2 中不起作用的相同脚本）

The workaround is to put "[GC]::Collect()" in your loop that writes to the console.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:15:09.870

这里有一些想法：

1.  尝试使用 -NoProfile 运行 PowerShell。导入 PSCX 模块并运行您的脚本
2.  尝试在没有 PSCX 模块的情况下运行 PowerShell（如有必要，将您的配置文件脚本调整为不导入），然后尝试运行您的脚本
3.  一般尽量不要使用第 3 方模块

另一方面，我浏览了您的脚本，没有任何事情会在我身上跳出来永久调整您的 PowerShell 会话。要调试此问题，请尝试考虑您的配置文件（或脚本）可能正在进行的任何永久性环境更改。PSCX 的开发人员可能也可能没有对您的 PowerShell 环境进行永久性调整的代码。

使用传统的故障排除技术来帮助您了解导致此问题的区域（您的脚本、PSCX 或您的配置文件）。

# c# - Dropdownlist SelectedIndexChanged 在每次回发时触发

> ID：10823597
> 
> 赞同：1
> 
> 时间：2012-05-30T20:16:27.870
> 
> 标签：c#, asp.net

我正在向更新面板动态添加自定义用户控件。我的用户控件包含两个下拉列表和一个文本框。当更新面板之外的控件触发回发时，我将用户控件重新添加到更新面板。

问题是......当我重新添加用户控件时，在回发时，它会触发用户控件内下拉列表的“SelectedIndexChanged”事件。即使 selectedindex 自上次回发以来没有更改。

有任何想法吗？

如有必要，我可以发布代码，但在这种特殊情况下有很多。

提前致谢！

*编辑...下面添加的代码*

* **.ASCX**

```
<asp:DropDownList ID="ddlColumns" OnSelectedIndexChanged="ddlColumns_SelectedChanged" AppendDataBoundItems="true" AutoPostBack="true" runat="server"> 
```

* **.ASCX.CS**

```
List<dataColumnSpecs> dataColumns = new List<dataColumnSpecs>();

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        fillDDLColumns();
    }        
}

public void fillDataColumnsList()
{
    dataColumns.Clear();
    //COMMON GETDATATABLE RETURNS A DATA TABLE POPULATED WITH THE RESULTS FROM THE STORED PROC COMMAND
    DataTable dt = common.getDataTable(storedProcs.SELECT_COLUMNS, new List<SqlParameter>());
    foreach (DataRow dr in dt.Rows)
    {
        dataColumns.Add(new dataColumnSpecs(dr["columnName"].ToString(), dr["friendlyName"].ToString(), dr["dataType"].ToString(), (int)dr["dataSize"]));
    }
}

public void fillDDLColumns()
{
    fillDataColumnsList();
    ddlColumns.Items.Clear();
    foreach (dataColumnSpecs dcs in dataColumns) 
    { 
        ListItem li = new ListItem(); 
        li.Text = dcs.friendlyName; 
        li.Value = dcs.columnName; 
        ddlColumns.Items.Add(li);
    }
    ddlColumns.Items.Insert(0, new ListItem(" -SELECT A COLUMN- ", ""));
    ddlColumns.DataBind();  
}

protected void ddlColumns_SelectedChanged(object sender, EventArgs e)
{
    //THIS CODE IS BEING FIRED WHEN A BUTTON ON THE PARENT *.ASPX IS CLICKED
} 
```

* **.ASPX**

```
<asp:UpdatePanel ID="upControls" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnAddControl" runat="server" Text="+" OnClick="btnAddControl_Click" />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:Button ID="btnGo" runat="server" Text="Go" OnClick="btnGo_Click" ValidationGroup="vgGo" />
<asp:GridView... 
```

* **.ASPX.CS**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        uc_Counter = 0;
        addControl();
        gridview_DataBind();
    }
    else
    {
        reloadControls();
    }
}

protected void btnGo_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        //THIS BUTTON CLICK IS WHAT'S TRIGGERING THE 
        //SELECTEDINDEXCHANGED EVENT TO FIRE ON MY *.ASCX
        gridview_DataBind();
    }   
}

private void reloadControls()
{
    int count = this.uc_Counter;

    for (int i = 0; i < count; i++)
    {
        Control myUserControl = Page.LoadControl("~/Controls/myUserControl.ascx");
        myUserControl.ID = "scID_" + i;
        upControls.ContentTemplateContainer.Controls.AddAt(i, myUserControl);
        ((customUserControl)myUserControl).fillDDLColumns();
    }
}

private void addControl()
{
    Control myUserControl = Page.LoadControl("~/Controls/myUserControl.ascx");
    myUserControl.ID = "scID_" + uc_Counter.ToString();
    upControls.ContentTemplateContainer.Controls.AddAt(upControls.ContentTemplateContainer.Controls.IndexOf(btnAddControl), myUserControl);            
    //((customUserControl)myUserControl).fillDDLColumns();
    this.uc_Counter++;
}

protected int uc_Counter
{
    get { return (int)ViewState["uc_Counter"]; }
    set { ViewState["uc_Counter"] = value; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T21:25:42.370

尽管这已经得到解答，但我想在这里给出一个答案，因为我最近纠结于这个问题，我无法在任何地方找到对我有帮助的答案，但在大量挖掘代码后我确实找到了解决方案。

对我来说，发生这种情况的原因是有人覆盖了 PageStatePersister 以更改视图状态隐藏字段的呈现方式。为什么要这样做？我在[这里](http://www.manuelabadia.com/blog/PermaLink,guid,7924eaf8-b406-43af-9444-b816f6dfa246.aspx)找到了答案。

> 尝试优化 ASP.NET 页面以使其对搜索引擎更加友好时，最大的问题之一是视图状态隐藏字段。大多数搜索引擎对文档的第一个 [原文如此] 数千字节的内容给予更高的分数，因此如果您的前 2 KB 是查看状态垃圾，那么您的页面将受到惩罚。所以这里的目标是尽可能地向下移动视图状态数据。

我遇到的代码所做的是将 __VIEWSTATE 隐藏字段清空并在页面底部创建一个 view_state 隐藏字段。这样做的问题是它完全弄乱了视图状态，并且我收到报告为下拉列表被更改时，它们没有被更改，并且所有下拉列表在提交时都通过相同的处理程序。这是一团糟。我的解决方案是仅在此页面上关闭此自定义持久性，这样我就不必补偿所有这些怪异之处。

```
protected override PageStatePersister PageStatePersister
{
    get
    {
        if (LoginRedirectUrl == "/the_page_in_question.aspx")
        {
            return new HiddenFieldPageStatePersister(Page);
        }
        return new CustomPageStatePersister(this);
    }
} 
```

这使我能够对需要它的页面拥有正确的视图状态，但保留网站其余部分的 SEO 代码。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:53:06.277

我在这篇文章中找到了我的答案[.net DropDownList 在回发后被清除](https://stackoverflow.com/questions/3204689/net-dropdownlist-gets-cleared-after-postback)

我将存储在视图状态中的计数器更改为会话变量。然后我将我的 reloadControls() 函数从 *.ASPX 的 Page_Load 移动到 Page_Init。

关键是在 Page_Init 中动态添加我的用户控件，以便在将 Viewstate 应用于页面上的控件之前，它将成为页面的成员。

# ruby-on-rails - 为什么 mongoid 在使用变量时不允许创建新的嵌入文档？

> ID：10823599
> 
> 赞同：1
> 
> 时间：2012-05-30T20:16:37.777
> 
> 标签：ruby-on-rails, mongoid

我试图在删除嵌入文档后添加一个新的嵌入文档。但是当我使用时出现错误：

代码

```
u = User.last
u.classes.destroy_all
u.classes.create(:name => "Philsophy")
=> NoMethodError: undefined method `create' for []:Array 
```

但是，如果我不使用变量，它就可以工作。有人可以向我解释一下吗？我需要使用嵌套变量版本来遍历数百个项目的结果集。

```
User.last.classes.destroy_all
User.last.classes.create(:name => "Philsophy")
=> #<Class _id: philosophy, name: "Philosophy"> 
```

Ruby on Rails 3.0.3
Mongoid 2.0.0.beta.20（这里别无选择）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:48:22.087

我不确定您的模型到底是什么，但我只能重现您遇到的错误，如下所示：

```
class User
  include Mongoid::Document

  embeds_many :classes
end

class Class
  include Mongoid::Document
  field :name

  embedded_in :user, :inverse_of => :classes
end 
```

如果这是您所拥有的，那么问题是您正在从 Ruby 标准库中打开 Class 类并有效地将其扩展为 Mongoid 模型。我想这不是故意的。在这种情况下，您有几个选择，您可以将您的 Class 类重命名为不会与标准库冲突的东西，例如这工作正常：

```
class User
  include Mongoid::Document

  embeds_many :courses
end

class Course
  include Mongoid::Document
  field :name

  embedded_in :user, :inverse_of => :courses
end 
```

或者，如果您真的想要调用您的类“Class”，您可以将模型放在命名空间中：

```
module Models
  class User
    include Mongoid::Document

    embeds_many :classes, :class_name => 'Models::Class'
  end

  class Class
    include Mongoid::Document
    field :name

    embedded_in :user, :inverse_of => :classes, :class_name => 'Models::User'
  end
end 
```

如果你这样做，那么你将不得不给 Mongoid 一些帮助，通过指定`class_name`. 所以可能最容易重命名类。

至于为什么只有在使用第一个示例中的变量时才会出现问题，我怀疑这是因为 destroy_all 方法使类集合处于损坏状态（名称冲突的副作用）。在您的第二个示例中，第二行正在加载 User 模型的新实例，这样就不会出现问题。

# php - 获取当前页面的url

> ID：10823600
> 
> 赞同：1
> 
> 时间：2012-05-30T20:16:39.693
> 
> 标签：php, html

我正在尝试获取此人所在的当前页面的网站 url。我会在我正在创建的社交分享按钮中使用它。这些网站都是 Wordpress 网站。我得到了以下网址来获取当前网址，

```
<?php if (is_home()) { echo site_url(); } else {  echo the_permalink(); } ?> 
```

脚本不执行，当我单击按钮时，不会生成 url，但 php 脚本会按原样显示在浏览器中。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:18:00.867

你会用

```
<?php echo $_SERVER['PHP_SELF']; ?> 
```

这为您提供了当前页面的 url。例如`index.php`或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T15:46:24.413

使用 Javascript：

```
var currentURL = document.URL;
alert(currentURL); 
```

使用 PHP：

```
<?php
function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
?> 
```

如果您想要文件名，请使用 PHP 魔术常量，例如`__FILE__`

# ruby-on-rails - 通过 has_many 构建实例

> ID：10823601
> 
> 赞同：0
> 
> 时间：2012-05-30T20:16:41.410
> 
> 标签：ruby-on-rails

我有一个我认为很简单的结构：

```
class GroupEvent < ActiveRecord::Base
  attr_accessible :user_id, :title, :description, :identifier, :start_date, :end_date, :time_zone, :url, :capacity, :info_url, :logo_url, :logo_ssl_url, :status

  has_one :event_venue
  has_one :event_organizer
  has_one :event_ticket
  has_one :event_condition
  belongs_to :user
end

class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  has_many :group_events
  ...
end 
```

但是在我执行时在 Rails 控制台中

```
@user = User.new
@event = @user.group_events.build 
```

我收到一个错误：ActiveRecord::InverseOfAssociationNotFoundError: 找不到 group_events 的反向关联（：GroupEvent 中的用户）。

更新：我仍然无法让用户和 GroupEvent 看到对方。GroupEvent.new 和 EventVenue.new 创建新对象，并且

```
@event = GroupEvent.new
@venue = @event.build_event_venue 
```

应该创建一个 @event.event_venue 对象。（虽然我仍然很困惑

```
@event.event_venue.build 
```

返回 NoMethodError: undefined method `build' for nil:NilClass。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:26:07.630

更新：它现在可以工作了。

```
@event = @user.group_event.build 
```

创建一个新的 GroupEvent 对象。对于后来的任何人，我很抱歉，我不知道我做了什么。上面的代码看起来仍然一样。我不知道每次进行更改时都需要重新启动控制台，但重新启动控制台似乎可以解决我的问题。

一个挥之不去的问题困扰着我。@user.build_group_event 和 @user.group_event.build 生成相同的结果（一个 GroupEvent 对象），但对于我的其他类，@event.build_event_venue 生成一个对象，但 @event.event_venue.build 仍然返回“NoMethodError：未定义方法‘build’为 nil:NilClass”。我就是想不通。但是我有工作代码，所以我不会对此做太多的事情。

谢谢您的帮助。

# javascript - 更改输入文本以选择选项，反之亦然

> ID：10823604
> 
> 赞同：2
> 
> 时间：2012-05-30T20:16:47.157
> 
> 标签：javascript

我有两个按钮。在第一个按钮单击时，我需要将输入文本类型更改为选择框，在第二个按钮单击时，将选择框更改为通过 Javascript 输入文本类型。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T08:27:22.083

非常感谢@JoshMein、@Bergi、@Rocket 的时间和建议。这对我帮助很大。我也尝试了以下不同的方式。

* * *

```
function changeToText() {
  var obj = document.getElementById('disease1CurrentObject');
  document.getElementById('divDisease1Current').removeChild(document.getElementById(obj));
  var element = document.createElement('input');
  element.setAttribute('type', 'text');
  element.setAttribute('value', 'myVal');
  element.setAttribute('id', 'myId');
  document.getElementById('divDisease1Current').appendChild(element); 
}
function changeToSelect() {
  var obj = document.getElementById('disease1CurrentObject');
  document.getElementById('divDisease1Current').removeChild(obj));
  var element = document.createElement('select');
  element.setAttribute('type', 'text');
  element.setAttribute('value', 'myVal');
  element.setAttribute('id', 'myId');
  document.getElementById('divDisease1Current').appendChild(element);
} 
```

**& 1 以上，低于 8 或 8 的 IE 版本不支持 setAttribute()。**

# php - Jquery Ajax 请求和 PHP

> ID：10823605
> 
> 赞同：0
> 
> 时间：2012-05-30T20:16:50.680
> 
> 标签：php, javascript, jquery, ajax

Jquery 的新手，Jquery Ajax 调用的新手——这是我的问题：

我有一个小表单 - 电子邮件地址提交 - 触发一个 PHP 文件，该文件将电子邮件插入到一个表格中。

我想做以下事情：

1.  通过Ajax处理表单提交所以没有刷新
2.  成功写入表格后，我想将提交按钮的文本更改为“成功！” 持续 3 秒，然后使用淡入淡出效果返回“注册”。

这是我的表单代码：

```
<form action="" id="registerform" name="registerform" method="post" >
    <input type="text" id="email" name="email" value="Email Address" onClick="empty()" onBlur="determine()" />
    <button id="join" type="submit" name="join" onClick="validate()">Sign Up</button>
</form> 
```

这是我通过 Jquery 处理 POST 请求的糟糕尝试：

```
$('form').on('submit', function(e) {
    $.post('register.php', function() {
            $('#join').html('Success!')             
    });        
    //disable default action
    e.preventDefault();
}); 
```

任何人都可以评论如何使 Ajax 请求工作（似乎没有）？

提前致谢！

**更新**

好的，下面的 Jquery 块将数据添加到表中，但是，我的按钮文本没有改变：

```
 $('form').on('submit', function(e) {
        $.post('register.php', $("#registerform").serialize(), function() {
            $('#join').html('Success!')             
        });        
    //disable default action
    e.preventDefault();
    }); 
```

现在有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:27:03.260

这是我的 ajax 调用之一的示例

```
details = "sendEmail=true&" + $("form").serialise();

$.ajax({
    url: "yourphppage.php",
    type: "post",
    data: details,
    success: function (data, textStatus, jqXHR) {
        if (data == "false") {
            console.log("There is a problem on the server, please try again later");    
        } else {
                //Do something with what is returned
        }
    }
}) 
```

在服务器端

```
if (isset($_POST['sendEmail'])) {
  //Do something with the data
} 
```

当然这只是一个例子，你可能需要改变它以满足你的需要:)

需要注意的一件事是做什么`if (data == "false")`。好吧，在服务器端，我可以`echo "false"`告诉 ajax 调用它不成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:31:57.200

您实际上并没有向服务器发送任何数据。您需要使用 'data' 参数`$.post`来发送数据。

```
$('form').on('submit', function(e) {
    $.post('register.php', $(this).serialize(), function() {
        $('#join').html('Success!');             
    });        
    //disable default action
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:32:32.430

不确定，但是 POST 请求是否发送任何内容？尝试在 POST 请求中添加数据。

```
$('form#registerform').submit(function() {
  var email = $(this).find('input[name=email]').val();
  $.post('register.php', {email: email}, function() {
    $('#join').html('Success!');             
  }); 

  return false;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T20:23:21.130

您在 ajax 调用中将表单数据推送到服务器的位置？将代码更改为此。

```
var data = {$("#email").val()};
$('form').submit(data ,function(e) {
    $.post('register.php', function() {
            $('#join').html('Success!')             
    });        
    //disable default action
    e.preventDefault();
}); 
```

# c# - SerialPort.BytesToRead 始终评估为 0，即使它不是

> ID：10823606
> 
> 赞同：0
> 
> 时间：2012-05-30T20:16:51.757
> 
> 标签：c#, serial-port

我正在通过串行端口将秤连接到计算机。我检查值 SerialPort.BytesToRead 当它在循环内达到 0 时。但是，即使 BytesToRead 不等于 0，循环也会退出。我无法发布屏幕截图，因为我是新用户，但通过调试我可以看到 BytesToRead 实际上不是 0。

这导致我的数据没有被完全读取。我尝试过不同的表达方式，例如，`_port.BytesToRead > 0`但结果是一样的。即使将 BytesToRead 的值分配给变量也会给出 0。没有循环，ReadExisting 不会返回从秤发送的所有数据，所以我真的别无选择。ReadLine 也不起作用。那么为什么 BytesToRead 总是 0 呢？

```
private void PortDataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        {
            var input = string.Empty;
            // Reads the data one by one until it reaches the end
            do
            {
                input += _port.ReadExisting();
            } while (_port.BytesToRead != 0);

            _scaleConfig = GenerateConfig(input);

            if (ObjectReceived != null)
                ObjectReceived(this, _scaleConfig);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:32:28.447

您的原始代码很奇怪，因为无论如何我都看不到代码知道缓冲区是否为空，因为您的代码已清空缓冲区，还是因为设备尚未发送。（这似乎是您设计中的一个基本问题：您想读取直到获得所有字节，但只有在读取所有字节之后才能弄清楚应该有多少字节）。

您以后的代码甚至更奇怪，因为 DataBits 是每个字节的位数（包括 5 到 8 之间）的串行配置——只有在 RS232 中，一个字节才能小于 8 位。

也就是说，我在 BytesToRead 周围看到了非常奇怪的行为。在我看来，它几乎完全不可靠，只有在它有用后才能更新。MSDN上有一条关于它不一致的注释，但它不包括它莫名其妙地为0的情况，我也看到了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T13:59:13.837

我的老板想通了。这是代码。

```
private void PortDataReceived2(object sender, SerialDataReceivedEventArgs e)
    {
        var bytesToRead = _port.BytesToRead;
        _portDataReceived.Append(_port.ReadExisting());

        // Buffer wasn't full. We are at the end of the transmission.
        if (bytesToRead < _port.DataBits)
        {
            //Console.WriteLine(string.Format("Final Data received: {0}", _portDataReceived));
            IScalePropertiesBuilder scaleReading = null;

            scaleReading = GenerateConfig(_portDataReceived.ToString());
            _portDataReceived.Clear();

            if (ObjectReceived != null)
            {
                ObjectReceived(this, scaleReading);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:25:47.540

也许当您运行调试器时，它的速度已经足够慢以至于实际上有字节要读取，但是当您在没有调试器的情况下运行它并且因此没有发生断点时，它最终会在串行端口上的设备之前退出循环有发送数据的时间。ReadExisting 很可能会读取端口上的所有数据，然后立即退出，因为端口上没有新数据。也许为了缓解这个问题，您可以在读取数据和通过检查 BytesToRead 的值来检查是否有更多数据之间稍作等待（可能使用 Thread.Sleep()）。尽管您可能应该查看您正在读取的数据，以确定您何时实际上已经读取了您尝试接收的所有必要数据。

# events - 在 SelectionListener 上调用了两次事件

> ID：10823609
> 
> 赞同：3
> 
> 时间：2012-05-30T20:16:59.037
> 
> 标签：events

我正在尝试在 RadioButton 上实现一个事件：

```
radio_Email.addSelectionListener(
    new org.eclipse.swt.events.SelectionListener() {
        public void widgetDefaultSelected(org.eclipse.swt.events.SelectionEvent e) {
            // TODO Auto-generated Event stub widgetDefaultSelected()
        }
        public void widgetSelected(org.eclipse.swt.events.SelectionEvent e) {
            System.out.println("This is printed twice "
                    + "if i try to toggle between two radio buttons");
        }
    }
); 
```

我知道这被调用了两次：第一次取消选择第一个单选按钮，第二次选择第二个单选按钮。

**但我不知道如何解决它....任何人都可以帮我解决这个问题**

*注意：单选按钮是动态生成的，因此可能有 n 个单选按钮，因此这是在 for 循环内（以防万一..一些附加信息）...在页面加载时..当我选择第一个时，事件被调用一次......但是当我点击第二个......然后事件被触发两次。*

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:03:16.627

我已经解决了....修改widgetselected方法为

```
 public void widgetSelected(org.eclipse.swt.events.SelectionEvent e) {
                boolean isSelected = ((Button)e.getSource()).getSelection();
          if(isSelected){     

                               system.out.println("Now this solved the problem")

                          }           
                       } 
```

# python - Python 简单的裸对象

> ID：10823610
> 
> 赞同：38
> 
> 时间：2012-05-30T20:17:09.527
> 
> 标签：python, oop

创建可以为其分配属性的裸对象的最简单方法是什么？

具体用例是：我正在对一个 Django 对象实例进行各种操作，但有时该实例是 None （有实例）。在这种情况下，我想创建最简单的假对象，以便我可以为其属性分配值（例如。`myobject.foo = 'bar'`）。

基本上我正在寻找这段 Javascript 的 Python 等价物：

```
myobject = {}
myobject.foo = 'bar' 
```

我知道我可以为此使用模拟对象/库，但我希望有一个非常简单的解决方案（就像上面的 Javascript 一样简单）。有没有办法创建一个裸对象实例？就像是：

```
myobject = object()
myobject.foo = 'bar' 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-30T20:20:38.777

您需要先创建一个简单的类：

```
class Foo(object):
    pass

myobject = Foo()
myobject.foo = 'bar' 
```

你可以把它做成这样的单行：

```
myobject = type("Foo", (object,), {})()
myobject.foo = 'bar' 
```

对函数的调用`type`与前面的`class`语句相同。

如果你想*真正做到*最小...

```
myobject = type("", (), {})() 
```

关键是内置类型（例如`list`和`object`）不支持用户定义的属性，因此您需要使用`class`语句或调用`type`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-03-22T20:47:42.510

如果你使用 Python >= 3.3，你总是可以使用**[SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)**；它包含在 Python`types`模块中。

**[SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)**很棒，因为您还可以`repr`免费获得等效测试；即使对于极简主义的对象，这两者也可能派上用场。

翻译 OP 问题中的 JavaScript 如下所示：

```
from types import SimpleNamespace

myobject = SimpleNamespace() # myobject = {}
myobject.foo = 'bar' 
```

您还可以在实例化**[SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)**时使用关键字参数。这些参数将成为实例化**[SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)**的属性：

```
p = SimpleNamespace(name='gary')
p.age = 32
p # => namespace(age=32, name='gary') 
```

**[因此，将字典转换为SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)**对象的一种快速简便的方法（ 前提是字典键是正确的标识符）如下所示：

```
d = {
    'name': 'gary',
    'age': 33 # had a birthday. 
}
p = SimpleNamespace(**d) 
```

Python >= 3.7 的**[数据类](https://docs.python.org/3.7/library/dataclasses.html)**基本上是“<strong> [mutable named tuples](https://youtu.be/T-TwcmT6Rcw) ”。如果您有很多数据对象，这可能是您可能想要使用的东西。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-30T20:30:24.780

使用[束](http://pypi.python.org/pypi/bunch)模块：

```
sudo pip install bunch 
```

一堆是允许通过`dict.key`语法访问其内容的字典。

然后像这样：

```
from bunch import Bunch
b = Bunch()
b.foo = "Bar"

b["foo2"] = "Bar2"
print b
>> Bunch(foo='Bar', foo2='Bar2')
b["foo"] = "Baz"
print b
>> Bunch(foo='Baz', foo2='Bar2') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T20:20:50.477

```
class NakedObject(object):
    pass

myobject = NakedObject()
myobject.foo = 'bar' 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-12T17:59:41.043

我很晚才来这里，但我很惊讶没有人提到[`namedtuples`](https://docs.python.org/2/library/collections.html#collections.namedtuple)，它完成了这种事情：

```
Foo = namedtuple('Foo', ['x'])
f = Foo(x='myattribute')
f.x 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-01T19:16:51.353

在 Python 3 中，函数可以有属性。与裸类相比，您可以节省一整行代码。

```
naked = lambda: None
naked.foo = 'bar' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-04T11:52:33.510

对于 Python 3，

```
class Obj: pass

o = Obj()
o.name = 'gary'
o.age = 32

o
# <__main__.Obj at 0x17235ca65c0>

o.__dict__
# {'name': 'gary', 'age': 32} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-30T20:19:55.370

您需要像这样首先对对象进行子类化...

```
class Myobject(object):
    pass

myobject1 = Myobject()
myobject1.foo = 'bar' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-30T20:19:08.197

也许您正在寻找这样的东西：

```
myobject={}
myobject['foo']='bar' 
```

那么它可以被称为：

```
print myobject['foo'] 
```

或者您可以为此使用类对象：

```
class holder(object):
    pass 
```

那么你可以使用这样的东西：

```
hold=holder()
hold.myobject='bar'
print hold.myobject 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-30T20:21:19.027

根据@PsychicOak 的回答，您可能应该只使用字典。

但是，如果您真的想要一个可以操作的对象，请尝试：

```
class FooClass(object): pass 
```

`FooClass`然后，您可以根据需要为其自身或实例分配属性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-30T20:34:13.990

我通常更喜欢为我的类创建一个[空对象：](http://en.wikipedia.org/wiki/Null_Object_pattern)

```
class User(Model):
    username = CharField()
    password = CharField()

NONE_USER = User(username='', password='') 
```

然后我在我会使用你的裸体物体的地方使用它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-02T15:29:19.547

在某些情况下，扩展 a`dict`可以帮助您

喜欢：

```
class SpecificModelData(dict):
   pass
   ...

class Payload(dict):
   ... enter code here 
```

为什么`dict`？它与序列化程序一起工作得很好。

为什么是新班？- 它给你一个名字和一个新的类型

# android - 为什么我的 Android 应用程序中出现“不幸的是我的应用程序已停止”？

> ID：10823613
> 
> 赞同：0
> 
> 时间：2012-05-30T20:17:40.150
> 
> 标签：android, error-handling

在我的应用程序中单击图像按钮时，我总是收到消息：“不幸的是我的应用程序已停止”。问题是什么？？？

这是我的代码。在单击图像按钮时调用 showImageDialog 方法：

```
public class ReminderEditActivity extends Activity {

//
// Private instance variables
//
private Button mDateButton;
private Calendar mCalendar;
private Button mTimeButton;
private EditText mTitleText;
private EditText mBodyText;
private Button mConfirmButton;

private RemindersDbAdapter mDbHelper;
private ImageAdapter mImageHelper;

private Long mRowId;
private Long mImageRowId;

private ImageButton mImageButton;

private Uri mImageCaptureUri;

public String imageFilePath;

//
// Private constants
//
private static final int DATE_PICKER_DIALOG = 0;
private static final int TIME_PICKER_DIALOG = 1;
private static final String DATE_FORMAT = "dd-MM-yyyy";
private static final String TIME_FORMAT = "kk:mm";

public static final String DATE_TIME_FORMAT = "dd-MM-yyyy kk:mm:ss";

private static final int PICK_FROM_CAMERA = 1;
private static final int PICK_FROM_FILE = 2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Instantiate mDbHelper and mImageHelper
    mDbHelper = new RemindersDbAdapter(this);
    mImageHelper = new ImageAdapter(this);

    setContentView(R.layout.reminder_edit);

    //
    // Instantiate instance variables
    //
    mTimeButton = (Button)findViewById(R.id.reminder_time);
    mCalendar = Calendar.getInstance();
    mDateButton = (Button)findViewById(R.id.reminder_date);
    mConfirmButton = (Button)findViewById(R.id.confirm);
    mTitleText = (EditText)findViewById(R.id.title);
    mBodyText = (EditText)findViewById(R.id.body);

    mImageButton =(ImageButton)findViewById(R.id.image);

    //Checks whether mRowId contains any values.
    mRowId = savedInstanceState != null ? savedInstanceState.getLong(RemindersDbAdapter.KEY_ROWID) : null;
    mImageRowId = savedInstanceState != null ? savedInstanceState.getLong(ImageAdapter.KEY_ROWID) : null;

    registerButtonListenerandSetDefaultText();
}

//
// Sets the row id from the intent. If mRowId is null its content is null.
//
private void setRowIdFromIntent() {
    if(mRowId == null) {
        Bundle extras = getIntent().getExtras();
        mRowId = extras != null ? extras.getLong(RemindersDbAdapter.KEY_ROWID) : null;
    }
}

//
// Executed on pause.
//
@Override
protected void onPause() {
    super.onPause();
    mDbHelper.close();
    mImageHelper.close();
}

//
// Executed on resume
//
@Override
protected void onResume() {
    super.onResume();
    mDbHelper.open();
    mImageHelper.open();
    setRowIdFromIntent();
    populateFields();
    populateImageField();
}

//
// Register the Date, Time and Save Button and set the default text
//
private void registerButtonListenerandSetDefaultText() {

    mDateButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            showDialog(DATE_PICKER_DIALOG); 
        }
    });

    mTimeButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            showDialog(TIME_PICKER_DIALOG);
        }
    });

    mConfirmButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            saveState();
            setResult(RESULT_OK);
            Toast.makeText(ReminderEditActivity.this, getString(R.string.task_saved_message), Toast.LENGTH_SHORT).show();
            finish();
        }
    }); 

    mImageButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            showImageDialog();
        }
    });

    updateDateButtonText();
    updateTimeButtonText(); 
}

private void showImageDialog() {
    final String [] items = new String [] {"From Camera", "From SD Card"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Select Image");
    builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
        public void onClick( DialogInterface dialog, int item ) {
            if (item == 0) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file = new File(Environment.getExternalStorageDirectory(),
                                    "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
                mImageCaptureUri = Uri.fromFile(file);

                try {
                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                    intent.putExtra("return-data", true);

                    startActivityForResult(intent, PICK_FROM_CAMERA);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                dialog.cancel();
            } else {
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
            }
        }
    } );

    final AlertDialog dialog = builder.create();
    dialog.show();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
       if(requestCode == PICK_FROM_FILE && data != null && data.getData() != null) {
           Uri uri = data.getData();
           if(uri != null) {
              Cursor cursor = getContentResolver().query(uri, new String[] {   
                                       android.provider.MediaStore.Images.ImageColumns.DATA}, 
                                       null, null, null);
                    cursor.moveToFirst();
                    String imageFilePath = cursor.getString(0);             
                    cursor.close();

                    if(imageFilePath != null) {
                            // Do whatever you want like decode it into a Bitmap
                            Bitmap bitmap = BitmapFactory.decodeFile(imageFilePath);
                            mImageButton.setImageBitmap(bitmap);
                            // Or.. store it somewhere in your local db  
                        }
           }
       }
    }

//
// If mRowId is not null (it contains value and we want to edit the task)
// this method is called.
//
private void populateFields() {
    if (mRowId != null) {
        Cursor reminder = mDbHelper.fetchReminder(mRowId);
        startManagingCursor(reminder);
        mTitleText.setText(reminder.getString(reminder.getColumnIndexOrThrow(RemindersDbAdapter.KEY_TITLE)));
        mBodyText.setText(reminder.getString(reminder.getColumnIndexOrThrow(RemindersDbAdapter.KEY_BODY)));

        SimpleDateFormat dateTimeFormat = new SimpleDateFormat(DATE_TIME_FORMAT);
        Date date = null;
        try {
            String dateString = reminder.getString(reminder.getColumnIndexOrThrow(RemindersDbAdapter.KEY_DATE_TIME));
            date = dateTimeFormat.parse(dateString);
            mCalendar.setTime(date);
        } catch (ParseException e) {
            Log.e("ReminderEditActivity", e.getMessage(), e);
        }
    } 

    updateDateButtonText();
    updateTimeButtonText();
}

private void populateImageField() {
    if (mImageRowId != null) {
        Cursor reminderImage = mImageHelper.fetchReminder(mImageRowId);
        startManagingCursor(reminderImage);
        String imagePath = reminderImage.getString(reminderImage.getColumnIndexOrThrow(ImageAdapter.KEY_IMAGE));

        Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
        mImageButton.setImageBitmap(bitmap);

    }
}

//
// Saves the state so that it can be restored.
//
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putLong(RemindersDbAdapter.KEY_ROWID, mRowId);

}

//
// Saves the content by communicating with the RemindersDbAdapter.
//
private void saveState() {
    String title = mTitleText.getText().toString();
    String body = mBodyText.getText().toString();

    SimpleDateFormat dateTimeFormat = new SimpleDateFormat(DATE_TIME_FORMAT);
    String reminderDateTime = dateTimeFormat.format(mCalendar.getTime());

    // Creates a new reminder if the value is null.
    if (mRowId == null) {
        long id = mDbHelper.createReminder(title, body, reminderDateTime);
        if (id > 0) {
            mRowId = id;

        } 
    // Updates the reminder if the content is not null.     
    } else {
        mDbHelper.updateReminder(mRowId, title, body, reminderDateTime);
    }
}

//
// Opens up an alert dialog box and asks the user if he wants to discard his task.
//
@Override
public void onBackPressed() {
    AlertDialog.Builder builder = new AlertDialog.Builder(ReminderEditActivity.this);
    builder.setMessage("Are you sure you want to discard your task?");
            builder.setTitle("Are you sure?");
            builder.setCancelable(false);
            builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int id) {
                    Intent j = new Intent(((Dialog)dialog).getContext(), ReminderListActivity.class);
                    startActivity(j);
                    return;

                }
            });

            builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();

                }
            });
            builder.create().show();        
}

//
// When creating a dialog box, it either shows up a date or time picker.
//
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case DATE_PICKER_DIALOG:
            return showDatePicker();
        case TIME_PICKER_DIALOG:
            return showTimePicker();
    }
    return super.onCreateDialog(id);
}

//
// Creates the date picker dialog box.
//
private DatePickerDialog showDatePicker() {
    DatePickerDialog datePicker = new DatePickerDialog(ReminderEditActivity.this, new DatePickerDialog.OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            mCalendar.set(Calendar.YEAR, year);
            mCalendar.set(Calendar.MONTH, monthOfYear);
            mCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            updateDateButtonText();
        }
    }, mCalendar.get(Calendar.YEAR), mCalendar.get(Calendar.MONTH), mCalendar.get(Calendar.DAY_OF_MONTH));
    return datePicker;
}

//
// Creates the time picker dialog box.
//
private TimePickerDialog showTimePicker() {
    TimePickerDialog timePicker = new TimePickerDialog(ReminderEditActivity.this, new TimePickerDialog.OnTimeSetListener() {

        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            mCalendar.set(Calendar.HOUR_OF_DAY, hourOfDay);
            mCalendar.set(Calendar.MINUTE, minute);
            updateTimeButtonText();
        }
    }, mCalendar.get(Calendar.HOUR_OF_DAY), mCalendar.get(Calendar.MINUTE), true);
    return timePicker;
}

//
// Updates the Date Button text.
//
private void updateDateButtonText() {
    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);
    String dateForButton = dateFormat.format(mCalendar.getTime());
    mDateButton.setText(dateForButton);
}

//
// Updates the Time Button text.
//
private void updateTimeButtonText() {
    SimpleDateFormat timeFormat = new SimpleDateFormat(TIME_FORMAT);
    String timeForButton = timeFormat.format(mCalendar.getTime());
    mTimeButton.setText(timeForButton);
} 
```

}

这是LogCat：

```
05-30 22:09:06.726: E/AndroidRuntime(628): FATAL EXCEPTION: main
05-30 22:09:06.726: E/AndroidRuntime(628): java.lang.RuntimeException: Unable to pause activity {com.ndroidstudios.android.taskreminder/com.ndroidstudios.android.taskreminder.ReminderEditActivity}: java.lang.NullPointerException
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2706)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2662)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2640)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.access$800(ActivityThread.java:123)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1154)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:137)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-30 22:09:06.726: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method)
05-30 22:09:06.726: E/AndroidRuntime(628):  at java.lang.reflect.Method.invoke(Method.java:511)
05-30 22:09:06.726: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-30 22:09:06.726: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-30 22:09:06.726: E/AndroidRuntime(628):  at dalvik.system.NativeStart.main(Native Method)
05-30 22:09:06.726: E/AndroidRuntime(628): Caused by: java.lang.NullPointerException
05-30 22:09:06.726: E/AndroidRuntime(628):  at com.ndroidstudios.android.taskreminder.ReminderEditActivity.onSaveInstanceState(ReminderEditActivity.java:345)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.Activity.performSaveInstanceState(Activity.java:1113)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1185)
05-30 22:09:06.726: E/AndroidRuntime(628):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2688)
05-30 22:09:06.726: E/AndroidRuntime(628):  ... 12 more 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ndroidstudios.android.taskreminder"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ReminderListActivity"
        android:label="@string/app_name"
        android:configChanges="orientation|keyboardHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ReminderEditActivity"
        android:label="@string/app_name" />
    <activity 
        android:name=".ImageAdapter"
        android:label="@string/app_name" />    
</application>

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:02:36.163

第 345 行的 ReminderEditActivity 有一个空对象。我不确定它在您的代码中的哪一行，因为没有行号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:15:38.930

尝试把 super.onSaveInstanceState(outState); 将变量放入 outState 之后。

```
@Override
protected void onSaveInstanceState(Bundle outState) {

    outState.putLong(RemindersDbAdapter.KEY_ROWID, mRowId);
    super.onSaveInstanceState(outState);
} 
```

# javascript - 如何更改 jQueryMobile 多选对话框的标题？

> ID：10823618
> 
> 赞同：2
> 
> 时间：2012-05-30T20:18:01.257
> 
> 标签：javascript, jquery, select

The documentation says - When a select is large enough to where the menu will open in a new page, the placeholder text is displayed in the button when no items are selected, **and the label text is displayed in the menu's header. 这与较小的覆盖菜单不同，其中占位符文本同时显示在按钮和标题中，并且与完全不使用占位符文本的全页单选不同。**

我在这里看到 2 个选项。1，将我的代码修复到我的标签实际隐藏的位置（我无法弄清楚）。或 2\. 使多选框在标题中显示占位符而不是标签。

谢谢你的帮助。

这是我正在使用的代码： `<div data-role="fieldcontain" class="ui-hide-label"> <label for="abc" class="ui-hidden-accessible">Select</label> <select name="abc" id="abc" multiple="multiple" data-native-menu="false"> <Option data-placeholder="true">Select Multiple</option> <Option>Option1</option> </select> </div>`

# php - 解析错误：语法错误，带有来自 sharrre.php 的脚本的意外 T_OBJECT_OPERATOR

> ID：10823620
> 
> 赞同：0
> 
> 时间：2012-05-30T20:18:07.663
> 
> 标签：php

我需要在我的网站上运行这个脚本，我对 PHP 一点经验都没有

当我调用以下脚本时

```
<?php
  //Sharrre by Julien Hany
  $json = array('url'=>'','count'=>0);
  $json['url'] = $_GET['url'];
  $url = urlencode($_GET['url']);
  $type = urlencode($_GET['type']);

  if(filter_var($_GET['url'], FILTER_VALIDATE_URL)){
    if($type == 'googlePlus'){  //source http://www.helmutgranda.com/2011/11/01/get-a-url-google-count-via-php/
      $content = parse("https://plusone.google.com/u/0/_/+1/fastbutton?url=".$url."&count=true");

      $dom = new DOMDocument;
      $dom->preserveWhiteSpace = false;
      @$dom->loadHTML($content);
      $domxpath = new DOMXPath($dom);
      $newDom = new DOMDocument;
      $newDom->formatOutput = true;

      $filtered = $domxpath->query("//div[@id='aggregateCount']");
      $json['count'] = str_replace('>', '', $filtered->item(0)->nodeValue);
    }
    else if($type == 'stumbleupon'){
      $content = parse("http://www.stumbleupon.com/services/1.01/badge.getinfo?url=$url");

      $result = json_decode($content);
      $json['count'] = $result->result->views;
      if( !isset($json['count']) ) $json['count'] = 0;
    }
    else if($type == 'pinterest'){
      $content = parse("http://api.pinterest.com/v1/urls/count.json?callback=&url=$url");

      $result = json_decode(str_replace(array('(', ')'), array('', ''), $content));
      $json['count'] = $result->count;
      if( !isset($json['count']) ) $json['count'] = 0;
    }
  }
  echo str_replace('\\/','/',json_encode($json));

  function parse($encUrl){
    $options = array(
      CURLOPT_RETURNTRANSFER => true, // return web page
      CURLOPT_HEADER => false, // don't return headers
      CURLOPT_FOLLOWLOCATION => true, // follow redirects
      CURLOPT_ENCODING => "", // handle all encodings
      CURLOPT_USERAGENT => 'sharrre', // who am i
      CURLOPT_AUTOREFERER => true, // set referer on redirect
      CURLOPT_CONNECTTIMEOUT => 5, // timeout on connect
      CURLOPT_TIMEOUT => 10, // timeout on response
      CURLOPT_MAXREDIRS => 3, // stop after 10 redirects
      CURLOPT_SSL_VERIFYHOST => 0,
      CURLOPT_SSL_VERIFYPEER => false,
    );
    $ch = curl_init();

    $options[CURLOPT_URL] = $encUrl;  
    curl_setopt_array($ch, $options);

    $content = curl_exec($ch);
    $err = curl_errno($ch);
    $errmsg = curl_error($ch);

    curl_close($ch);

    if ($errmsg != '' || $err != '') {
      /*print_r($errmsg);
      print_r($errmsg);*/
    }
    return $content;
  }
?> 
```

我收到以下错误：

```
Parse error: syntax error, unexpected T_OBJECT_OPERATOR on line 20 
```

第 20 行

```
$json['count'] = str_replace('>', '', $filtered->item(0)->nodeValue); 
```

任何可以帮助我解决这个问题的建议。

谢谢你。

这是文件的链接 [https://bizonbytes.com/miscellaneous/sharrre.php?url=https%3A%2F%2Fbizonbytes.com%2F&type=googlePlus](https://bizonbytes.com/miscellaneous/sharrre.php?url=https%3A%2F%2Fbizonbytes.com%2F&type=googlePlus)

我还有一个测试文件以确保 php 正常工作 [https://bizonbytes.com/miscellaneous/test.php](https://bizonbytes.com/miscellaneous/test.php)

我将 php 版本更新为 5，现在运行 [http://bizonbytes.com/miscellaneous/sharrre.php](http://bizonbytes.com/miscellaneous/sharrre.php)

但如果我尝试以下 [https://bizonbytes.com/miscellaneous/sharrre.php?url=https%3A%2F%2Fbizonbytes.com%2F&type=googlePlus](https://bizonbytes.com/miscellaneous/sharrre.php?url=https%3A%2F%2Fbizonbytes.com%2F&type=googlePlus)

我收到以下错误：

```
Warning: curl_setopt_array() [function.curl-setopt-array]: CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in C:\Inetpub\vhosts\bizonbytes.com\httpdocs\miscellaneous\sharrre.php on line 56
{"url":"https://bizonbytes.com/","count":""} 
```

我查看了 ini 文件及其标记的 safe_mode = off ，但我不确定为 open_basedir 放置什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:22:21.377

此处使用的方法链接功能直到版本 5 才引入：

```
$filtered->item(0)->nodeValue 
```

您需要更现代的版本才能运行此代码。或者，您可以手动将调用取消堆叠到临时变量中：

```
$temp = $filtered->item(0);
$json['count'] = str_replace('>', '', $temp->nodeValue); 
```

*（删除之前的错误答案：）*

> 这是你的错误：
> 
> ```
> $filtered->item(0)->nodeValue 
> ```
> 
> 我猜应该是：
> 
> ```
> $filtered->item[0]->nodeValue 
> ```
> 
> 即，引用数组的第一个元素，而不是调用对象的方法。

# jquery - 自定义 FancyBox 的标题

> ID：10823626
> 
> 赞同：0
> 
> 时间：2012-05-30T20:18:27.040
> 
> 标签：jquery, jquery-plugins, fancybox-2

我正在尝试自定义 FancyBox 2，使其在悬停在图像上时不显示标题属性。现在我设置它的方式是让组中的第一个图像显示在页面上，当您单击它时，fancybox 加载，您可以滚动查看其他图像。我不希望它们都显示在页面上，只显示第一张图像。我通过隐藏第一个之后的锚来做到这一点（我没有在 FancyBox 的网站上看到如何执行此操作的示例，所以这是我的第一个倾向并且它有效）

**我的 HTML**

```
<li class="web">
  <a href="img/sites/salonantebellum.jpg" class="thumb web fancybox" rel="group1" title="My title">
    <h2 class="title">Web</h2>
    <span>
      <img class="button" src="web.jpg" alt="Web" title="image">Web
    </span>
  </a>
  <div id="myCaption" style="display: none;"><p>My Caption</p></div>
  <a href="img/sites/staceys.jpg" class="fancybox hidden" rel="group1" title="My title"></a>
  <a href="img/sites/mcfpd.jpg" class="fancybox hidden" rel="group1" title="My title"></a>
  <a href="img/sites/redstone.jpg" class="fancybox hidden" rel="group1" title="My title"></a>
</li> 
```

**我脑子里的剧本是**

```
$(document).ready(function() {
  $(".fancybox").fancybox({
    afterLoad: function(){
      this.title = $('#myCaption').html();
    },
    helpers: {
      title : {
        type : 'inside'
      }
    }
  }); // fancybox
}); // ready 
```

所以我的标题将是图像的长描述，所以我不希望它们在您将鼠标悬停在图像上时显示。我只需要修复第一张图像，因为其余的无论如何都被隐藏了。我发现这篇关于如何隐藏的帖子： [如何在使用 FancyBox 2.0 时从标题标签中隐藏悬停工具提示？](https://stackoverflow.com/questions/9610883/how-do-i-hide-the-tooltip-on-hover-from-the-title-tag-when-using-fancybox-2-0)

您可以在上面的代码中看到我正在尝试使用隐藏的 div，但是当我在 FancyBox 中滚动并返回到第一张图像时，它再次显示“标题”而不是“myCaption”。

我该怎么做呢？我是设计师，不是开发人员，所以请解释清楚。

更新：我觉得我没有很好地解释我的情况，所以我更新了我的网站以包含我的最新代码：[mckernanms.com](http://mckernanms.com/)请注意，当您滚动浏览 Web 图像并返回第一个“标题”时"显示。其他画廊的第一张图片显示的是第一张网络图片的标题，这是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:59:07.710

根据您的评论，这是您问题的正确解决方案：

请参阅此工作[小提琴示例](http://jsfiddle.net/zuul/JAZm6/)！

**将您的代码更改为：**

```
$(document).ready(function() {
  $(".fancybox").fancybox({
    beforeLoad : function() {
      this.title = $(this.element).find('img').attr('alt');
    }
  }); // fancybox
}); // ready 
```

就像这样，您可以将当前标题从`title`on`<a></a>`传递到`alt`on the `img`。

浏览器不会显示它，因为图像是链接的包装，并且链接不包含标题。

**例如，**

```
<a rel="example_group" title="" href="path_to_image.jpg">
    <img alt="This is the title, the title is mine!" src="path_to_image.jpg">
</a> 
```

[在此处](https://github.com/fancyapps/fancyBox#api)的文档中找到解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:38:07.643

如果您在谈论标题“弹出窗口”，那么这些是浏览器/操作系统的一部分。除了不包含标题属性外，您不能禁用它。

```
<a href="img/sites/staceys.jpg" title="My title"></a> 
```

由于浏览器的“功能”，上面的代码会在悬停时弹出一个弹出窗口，例如在 Chrome 的预览窗格和“堆栈溢出”弹出气泡中看到的：

![在此处输入图像描述](../Images/9a1654f750585180f26f7249fdb45e3c.png)

我相信 FancyBox 也使用这个属性来生成图像的标题。我对 FancyBox 不够熟悉，但解决方法可能是设计自己的自定义 HTML 来显示图像。FancyBox 可以弹出 mini-HTML 内容。

所以，你会这样：

```
<a href="#" class="fancybox">
    <img src="..." alt="" />
    <b class="caption">Lorem ipsum...</b>
</a> 
```

您可以通过 HTML 手动显示图像和标题，而不是使用 FancyBox 的默认图像视图 HTML。

这应该允许您在避免使用 A 或 IMG 标签的“标题”属性的同时拥有标题。

我希望这会有所帮助。

干杯!

*更新 1*

也许我遗漏了一些东西，但我只是删除了“标题”属性，它似乎工作得很好。

```
<ul class="gallery">
    <li class="web"><a ... title="Salon Antebellum"> 
```

只需删除 [title="Salon Antebellum"] 位和接下来 2 个元素上的等效位即可。

还要从中删除 title 属性：

```
<span><img class="button" src="web.jpg" alt="Web" title="image">Web</span> 
```

看看这是否有效，如果没有，请尝试解释缺少的内容。发生了很多事情，我可能不会了解一些细节。

# javascript - 如果选择了某个选项，则尝试更改表单中的隐藏字段值

> ID：10823628
> 
> 赞同：0
> 
> 时间：2012-05-30T20:18:28.997
> 
> 标签：javascript, javascript-events

我已经尝试对此进行研究，但无法使其正常工作。人们问过类似的问题，但我的问题有点不同。基本上，我们有一个表单，它要求用户输入表单中 id 为“amount_c”的金额。表单中的隐藏字段是这样的：

因此，如果为 amount_c 选择的金额是“$7,500 到 $9,999”，那么隐藏的买家值应该是 2，否则（如果他们选择任何其他美元金额）它应该提交值为 1 的隐藏买家字段。

目前，调用另一个脚本来验证提交时的表单。这样做是这样的：

```
<form action="http://www.example.com/submission.php" method="post" onsubmit="return  validate_form(this); "> 
```

所以，

1）我应该创建另一个脚本还是添加到现有脚本？
2）如果我可以添加到现有的，我在下面做错了什么（见下文）？
3）如果我可以创建一个单独的脚本，上面的表单操作行将如何更改以调用该附加脚本？

这是我将其添加到现有脚本中的内容：

```
$(function() {
$('#amount_c').change(function() {
    if (amount_c === "$7,500 to $9,999") {
        var buyer = $("#buyer").val(2);
        } else {
            $("#buyer").val(1);
        }
});
}); 
```

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:25:55.513

```
$(function() {
$('#amount_c').change(function() {
    if ($(this).val() === "$7,500 to $9,999") {
        $("#buyer").val(2);
        } else {
            $("#buyer").val(1);
        }
});
}); 
```

# python - Why are __getitem__(key) and get(key) significantly slower than [key]?

> ID：10823632
> 
> 赞同：12
> 
> 时间：2012-05-30T20:18:39.353
> 
> 标签：python, profiling, benchmarking

It was my understanding that brackets were nothing more than a wrapper for `__getitem__`. Here is how I benchmarked this:

First, I generated a semi-large dictionary.

```
items = {}
for i in range(1000000):
    items[i] = 1 
```

Then, I used cProfile to test the following three functions:

```
def get2(items):
    for k in items.iterkeys():
        items.get(k)

def magic3(items):
    for k in items.iterkeys():
        items.__getitem__(k)

def brackets1(items):
    for k in items.iterkeys():
        items[k] 
```

The results looked like so:

```
 1000004 function calls in 3.779 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    3.779    3.779 <string>:1(<module>)
        1    2.135    2.135    3.778    3.778 dict_get_items.py:15(get2)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
  1000000    1.644    0.000    1.644    0.000 {method 'get' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'iterkeys' of 'dict' objects}

         1000004 function calls in 3.679 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    3.679    3.679 <string>:1(<module>)
        1    2.083    2.083    3.679    3.679 dict_get_items.py:19(magic3)
  1000000    1.596    0.000    1.596    0.000 {method '__getitem__' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {method 'iterkeys' of 'dict' objects}

         4 function calls in 0.136 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.136    0.136 <string>:1(<module>)
        1    0.136    0.136    0.136    0.136 dict_get_items.py:11(brackets1)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {method 'iterkeys' of 'dict' objects} 
```

Is the issue in the way I am benchmarking? I tried replacing the bracket access with a simple "pass" to ensure that the data was actually being accessed, and found that "pass" was running much quicker. My interpretation of this was that the data was indeed being accessed. I've also tried appending to a new list, which gave similar results.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T01:09:29.917

First, the disassembly posted by Not_a_Golfer:

```
>>> d = {1:2}
>>> dis.dis(lambda: d[1])
  1           0 LOAD_GLOBAL              0 (d)
              3 LOAD_CONST               1 (1)
              6 BINARY_SUBSCR       
              7 RETURN_VALUE   

>>> dis.dis(lambda: d.get(1))
  1           0 LOAD_GLOBAL              0 (d)
              3 LOAD_ATTR                1 (get)
              6 LOAD_CONST               1 (1)
              9 CALL_FUNCTION            1
             12 RETURN_VALUE  

>>> dis.dis(lambda: d.__getitem__(1))
  1           0 LOAD_GLOBAL              0 (d)
              3 LOAD_ATTR                1 (__getitem__)
              6 LOAD_CONST               1 (1)
              9 CALL_FUNCTION            1
             12 RETURN_VALUE 
```

Now, getting the benchmarking right is obviously important to read anything into the results, and I don't know enough to help much there. But assuming there really is a difference (which makes sense to me), here's my guesses about why there is:

1.  `dict.get` simply "does more"; it has to check if the key is present, and if not return its second argument (which defaults to `None`). This means there's some form of conditional or exception-catching, so I am completely unsurprised that this would have different timing characteristics to the more basic operation of retrieving the value associated with a key.

2.  Python has a specific bytecode for the "subscription" operation (as demonstrated in the disassembly). The builtin types, including `dict`, are implemented primarily in C and their implementations do not necessarily play by the normal Python rules (only their interfaces are required to, and there are plenty of corner cases even there). So my guess would be that the implementation of the `BINARY_SUBSCR` opcode goes more-or-less *directly* to the underlying C implementations of builtin types that support this operation. For these types, I expect that it is actually `__getitem__` that exists as a Python-level method to wrap the C implementation, rather than that the bracket syntax invokes the Python-level method.

It might be interesting to benchmark `thing.__getitem__(key)` against `thing[key]` for an instance of a custom class that implements `__getitem__`; you might actually see the opposite results there as the `BINARY_SUBSCR` op-code would internally have to fall back to doing equivalent work to looking up the method and invoking it.

# linux - 如何在 bash shell 脚本中包含文件

> ID：10823635
> 
> 赞同：155
> 
> 时间：2012-05-30T20:19:02.770
> 
> 标签：linux, bash, include

有没有办法在 shell 脚本中包含另一个 shell 脚本以便能够访问它的功能？

就像在 PHP 中一样，您可以将`include`指令与其他 PHP 文件一起使用，以便通过调用函数名称来运行其中包含的函数。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-05-30T20:20:14.467

只需放入您的脚本中：

```
source FILE 
```

或者

```
. FILE # POSIX compliant 
```

```
$ LANG=C help source
source: source filename [arguments]
Execute commands from a file in the current shell.

Read and execute commands from FILENAME in the current shell.  The
entries in $PATH are used to find the directory containing FILENAME.
If any ARGUMENTS are supplied, they become the positional parameters
when FILENAME is executed.

Exit Status:
Returns the status of the last command executed in FILENAME; fails if
FILENAME cannot be read. 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-12-22T09:50:50.597

以上答案是正确的，但是如果您在另一个文件夹中运行脚本，则会出现一些问题。

例如，`a.sh`和`b.sh`在同一个文件夹中，使用a`. ./b.sh`来包含b。

例如，当您在文件夹外运行脚本时，将找不到`xx/xx/xx/a.sh`文件： .`b.sh``./b.sh: No such file or directory`

所以我用

```
. $(dirname "$0")/b.sh 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-05-30T20:20:29.863

是的，使用[source](http://ss64.com/bash/period.html)或简称`.`：

```
. other_script.sh 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-08-05T05:27:38.930

语法是`source <file-name>`

前任。`source config.sh`

脚本 - config.sh

```
USERNAME="satish"
EMAIL="satish@linuxconcept.com" 
```

调用脚本 -

```
#!/bin/bash
source config.sh
echo Welcome ${USERNAME}!
echo Your email is ${EMAIL}. 
```

您可以[在此处学习在另一个 bash 脚本中包含一个 bash 脚本](https://linuxconcept.com/how-to-include-bash-script-in-other-bash-script/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-01T02:21:13.070

在我的情况下，为了`color.sh`从同一目录中包含`init.sh`，我必须执行以下操作。

```
. ./color.sh 
```

不知道为什么`./`而不是`color.sh`直接。的内容`color.sh`如下。

```
RED=`tput setaf 1`
GREEN=`tput setaf 2`
BLUE=`tput setaf 4`
BOLD=`tput bold`
RESET=`tput sgr0` 
```

使用`File color.sh`不出错但颜色不显示。我已经对此进行`Ubuntu 18.04`了测试，`Bash`版本是：

`GNU bash, version 4.4.19(1)-release (x86_64-pc-linux-gnu)`

# vba - VBA MS Word：文本更改时触发事件

> ID：10823649
> 
> 赞同：1
> 
> 时间：2012-05-30T20:20:08.833
> 
> 标签：vba, ms-word

我想在（活动）文档中的文本更改后立即触发一个事件。据我了解，`WindowSelectionChange`最适合这个。真的是这样吗？如果是这样，我该如何使用它？我已经阅读了[这里](http://msdn.microsoft.com/en-us/library/ff821218.aspx)的文档，但我无法理解它，尤其是关于哪些代码在哪个文件中。现在，我的所有代码都在项目的“模块”文件夹中的默认模块文件中。

仅供参考：我并没有真正在文档中输入内容，而是只按 Ctr+A 选择现有内容，然后按 Ctrl+V 将其替换为新内容。在那一刻，我希望触发事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T19:13:08.267

虽然我无法为我的特定问题找到解决方案，但我确实找到了一些可以给我想要的结果的东西：

```
Sub EditPaste()

    Selection.Paste
    'Other code

End Sub 
```

它与“文本更改”事件不太一样，但对我来说确实如此，因为我只通过粘贴新文本来更改文本。因为我以与粘贴事件相同的方式命名 Sub `actual`，所以每当我粘贴一些东西时都会调用这个 Sub。然后，只需添加实际的粘贴操作，然后添加您自己的代码即可。

简而言之：与其为操作创建事件，不如重新定义操作更容易。

# objective-c - 发送MKMapKit坐标到谷歌地图APP

> ID：10823656
> 
> 赞同：0
> 
> 时间：2012-05-30T20:20:41.927
> 
> 标签：objective-c, xcode, google-maps, mapkit

我有一个带有 MapKit 和一个 Pin 的项目，我需要将 pin 的坐标发送到谷歌地图 APP，有人知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:49:04.300

假设您指的是 Maps 应用程序（是的，它由 Google Maps 提供支持，但它是由 Apple 编写的），那么以下内容将起作用：

```
- (void)openMapToLatitude:(double)lat longitude:(double) lon
{
    NSString *url = [NSString stringWithFormat:@"http://maps.google.com/maps?ll=%f,%f", lat, lon];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];

} 
```

该 URL 被操作系统截获并在地图中打开。

# javascript - Javascript 中的逗号

> ID：10823663
> 
> 赞同：3
> 
> 时间：2012-05-30T20:21:06.917
> 
> 标签：javascript

```
<script>

(function() {

$('html').addClass('js');

var contactForm = {

    container: $('#contact'),          <-- THIS COMMA

    init: function() {
        $('<button></button>', {
            text: 'Contact Me'
        })
            .insertAfter('article:first')
            .on('click', this.show);
    },  <---------------------------------- AND THIS COMMA

    show: function() {
        contactForm.container.show();
    }
};

contactForm.init();

})();

</script> 
```

在上面的脚本中，我注意到：

`container: $('#contact'),`

这是声明变量的一种方法吗？执行以下操作会破坏脚本：

`var container = $('#contact');`

此外，init 函数和容器变量（如果它是变量）后面的逗号是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T20:22:25.510

这样你声明一个对象：

```
var contactForm = {
    // properties:
    property1 : value,
    property2 : value,
    property3 : value,

    // methods:
    method1 : function() {
        // ...
    },
    method2 : function() {
        // ...
    }
}; 
```

[**您可以在MDN**](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)中找到有关 JavaScript 对象的更多信息......以及在下面的评论中：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:23:13.920

该代码块（以 开头`var contactForm = {`）正在使用对象文字表示法声明对象。逗号分隔对象字面量表示法中的不同键值对。

```
var obj = { key1: value1, key2: value2 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T20:22:48.103

定义对象时，逗号用于分隔名称/值对：

```
var newObj = {
  name: value,
  another_name: another_value
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:23:31.427

这些是您定义的由逗号分隔`key:value`的对象对`contactForm`

```
var obj = { key1 : value1, 

            key2 : value2

            method1 : function(){
              // definition
            },
            method2 : function(){
              // definition
            }
} 
```

早期让我感到困惑的是，`function(){....}`在我发现函数在 js 中也是对象之前，在变量（在本例中为对象）定义中所做的事情可能与您之前使用的语言不同。

这个`function(){....}`没有名字的函数称为匿名函数。

Here's a good thread on anonymous function[为什么需要在同一行调用匿名函数？](https://stackoverflow.com/questions/1140089/how-does-an-anonymous-function-in-javascript-work)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T20:27:39.647

这称为对象字面量表示法。

这基本上是一个**逗号分隔的名称/值对列表**，用花括号括起来。

这种表示法的优点是大括号内的所有数据都被封装而不是全局定义，这避免了与其他脚本或库的冲突。

# templates - 如果 app.js 未在文档中准备好，如何使用 this.template？

> ID：10823675
> 
> 赞同：2
> 
> 时间：2012-05-30T20:22:12.407
> 
> 标签：templates, backbone.js, underscore.js

我试图按照[http://ricostacruz.com/backbone-patterns/#inline_templates](http://ricostacruz.com/backbone-patterns/#inline_templates)来避免[http://ricostacruz.com/backbone-patterns/#abuse](http://ricostacruz.com/backbone-patterns/#abuse)但是我有这样的典型观点：

```
// in app.js
App.MyView = Backbone.View.extend({
    className: "ui-widget-content",
    template: _.template($("#myTemplate").html()),
    render: function() 
    {
        this.$el.html(this.template(this.model.toJSON()));
    } 
```

然后我像这样包含 app.js

```
<script src="./js/jquery-1.7.2.min.js"></script>
<script src="./js/jquery-ui-1.8.20.custom.min.js"></script>
<script src="./js/underscore.js"></script>
<script src="./js/backbone.js"></script>
<script src="./js/app.js"></script> 
```

浏览器抱怨`$("#myTemplate")`App.MyView.template 中的行是`null`（因为文档还没有准备好？）。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:16:08.477

为什么不延迟加载您的模板？在第一次使用时编译模板并将编译后的模板缓存在视图的“类”中。你甚至可以添加你的基本视图来处理这个缓存，如下所示：

```
var BV = Backbone.View.extend({
    template: function(data) {
        if(!this.constructor.prototype._template)
            this.constructor.prototype._template = _.template($('#' + this.tmpl_id).html());
        return this._template(data);
    }
}); 
```

然后你可以有这样的事情：

```
var V = BV.extend({
    tmpl_id: 'tmpl',
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

并且`#tmpl`模板将在第一次使用时编译，并且最多编译一次。

演示：http: [//jsfiddle.net/ambiguous/hrnqC/](http://jsfiddle.net/ambiguous/hrnqC/)

注意演示中的*no wrap (head)*并查看控制台以查看正在编译的内容以及编译频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:25:59.267

我对此的快速解决方法是在视图初始化时编译模板..

```
App.MyView = Backbone.View.extend({
    className: "ui-widget-content",
    template: '#myTemplate',
    initialize: function(){
        this.template = _.template($(this.template).html());
    },
    render: function(){
        this.$el.html(this.template(this.model.toJSON()));
    } 
```

然后其他一切仍然有效，您可以将渲染方法放在基类中..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:24:19.057

最简单的做法就是不缓存模板：

```
App.MyView = Backbone.View.extend({
    className: "ui-widget-content",
    render: function() 
    {
        var template = _.template($("#myTemplate").html())
        this.$el.html(template(this.model.toJSON()));
    } 
```

# c# - 通用存储库，嵌套类映射

> ID：10823679
> 
> 赞同：-1
> 
> 时间：2012-05-30T20:22:28.023
> 
> 标签：c#, .net, entity-framework-4.1, nested-class

我正在尝试生成一个通用存储库。到现在为止还挺好。但我得到了与之前发布的其他人相同的错误： [映射到嵌套类](https://stackoverflow.com/questions/7583996/ef-4-1-code-first-data-mapping-problem)

问题是我显然试图映射一个嵌套类。我该如何解决这个问题，所以我不再映射嵌套类？

编辑：这不应该是问题。

```
namespace MvcApplication1.Models
{
    public class MyContext :DbContext
    {

        public DbSet<ALBUM> Albums { get; set; }
        ...
}
} 
```

例如专辑：

```
[EdmEntityTypeAttribute(NamespaceName="MyDbModel", Name="ALBUM")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class ALBUM : EntityObject 
```

为什么不允许类 ALBUM 映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:53:37.233

这是您收到的错误消息。

System.InvalidOperationException：未映射类型“ContactModels+Contact”。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，**并且不是从 EntityObject 继承的。**

这是您要映射的课程：

```
[EdmEntityTypeAttribute(NamespaceName="MyDbModel", Name="ALBUM")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class ALBUM : EntityObject 
```

你继承自`EntityObject`. 它在那里说。你不能映射它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:31:11.783

嵌套意味着你在一个类中有一个类，只需提取嵌套类。

你可能有这样的事情：

```
public class SampleClass
{
      public class NestedClass
      {
      }
} 
```

将其更改为：

```
public class SampleClass
{}

public class NotNestedClass
{} 
```

# c# - C# 反射：发出 DateTime 属性值

> ID：10823680
> 
> 赞同：2
> 
> 时间：2012-05-30T20:22:31.533
> 
> 标签：c#, datetime, reflection.emit

我目前正在使用 Reflection.Emit 生成动态类型。

我有我需要工作的大部分，但是需要在构造函数中设置默认属性值。

到目前为止，我已经通过使用例如（为了简洁而减少）来为整数和字符串工作：

`ctorDefaultIL.Emit(OpCodes.Ldstr, "Hello World");`

`ctorDefaultIL.Emit(OpCodes.Ldc_I4, 42);`

这非常有效，我的问题是我将如何设置 DateTime 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:06:25.647

感谢@leppie 的未来参考这是我最终使用的代码。对于某些上下文，这被传递给另一个方法：

```
ctorDefaultIL.Emit(OpCodes.Ldc_I8, dateVal.Ticks);
ctorDefaultIL.Emit(OpCodes.Newobj, 
  typeof(DateTime).GetConstructor(new[] { typeof(long) })); 
```

# c++ - 尖锐的物体失去了它的领域

> ID：10823682
> 
> 赞同：0
> 
> 时间：2012-05-30T20:22:38.473
> 
> 标签：c++

我正在尝试构造一个简单的链表，使用指向下一个插入位置的指针，并一个一个地添加一个节点。

```
Tnode* NULL_cp = 0;
struct Tnode{
 string word;
 Tnode* left;
 Tnode* right;
};

int main(int argc, char** argv){
 int n = 0;
 Tnode head;
 head.word = "the head";
 head.left = NULL_cp;
 head.right = NULL_cp;
 Tnode* insertP = &head;
 while(n<argc-1){
  Tnode node;
  node.word = argv[n+1];
  node.left = insertP;
  node.right = NULL_cp;
  insertP->right = &node;
  insertP = &node;
  cout << "inside loop: " << insertP->word <<  endl;
  n++;
 }
 cout << "outside loop: the word is " << insertP->word << endl;
} 
```

输出是

```
inside loop: hello
outside loop: the word is 
```

如果我输入***a.out hello***。让我感到困惑的部分是，在一个循环之后， insertP 应该指向新插入的具有单词***hello***的节点，但是即使在循环内它打印出***hello***，它也什么也没打印出来，知道为什么吗？非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:25:42.297

让我们最小化这个问题：

```
while(n<argc-1)
{
   Tnode node;
   //...
} 
```

当`node`超出范围时，其`std::string`成员也是如此。您将拥有指向树中节点的悬空指针。在循环内部它可以工作，因为对象还活着。外面……没那么多。

使用动态分配：

```
while(n<argc-1){
  Tnode* node = new Tnode;
  node->word = argv[n+1];
  node->left = insertP;
  node->right = NULL_cp;
  insertP->right = node;
  insertP = node;
  cout << "inside loop: " << insertP->word <<  endl;
  n++;
} 
```

并且不要忘记`delete`最后。

# visual-c++ - 链接器错误：带有 VC++ 8.0 程序的预编译库 VC++ 6.0

> ID：10823685
> 
> 赞同：2
> 
> 时间：2012-05-30T20:22:49.537
> 
> 标签：visual-c++, linker, microsoft-runtime-library

我正在尝试为新系统重新编译一些代码。它涉及一个预编译的静态库，我没有它的源代码（只有标头），并且该库是使用 VC++ 6.0 或更早版本以及较旧的运行时库构建的。在具有 VC++ 6.0 的旧系统上，我的程序构建并运行良好，但我最近升级了一些东西，我不再可以访问 VC++ 6.0，只能访问 Express 2008 (9.0 w/SP)。

当我构建解决方案时，它会编译但有以下链接器错误：

> 1>libcpmtd.lib(xlock.obj) : 错误 LNK2005: "public: __thiscall std::_Lockit::~_Lockit(void)" (??1_Lockit@std@@QAE@XZ) 已经在 NOREC.lib(track .obj) 1>LIBCMT.lib(stdexcpt.obj) : 错误 LNK2005: "public: __thiscall std::bad_cast::bad_cast(char const *)" (??0bad_cast@std@@QAE@PBD@Z) 已经定义在 NOREC.lib(track.obj) 1>LIBCMT.lib(stdexcpt.obj) 中：错误 LNK2005: "public: __thiscall std::bad_cast::bad_cast(class std::bad_cast const &)" (??0bad_cast@std @@QAE@ABV01@@Z) 已在 NOREC.lib(track.obj) 1>LIBCMT.lib(stdexcpt.obj) 中定义：错误 LNK2005：“public: virtual __thiscall std::bad_cast::~bad_cast(void) " (??1bad_cast@std@@UAE@XZ) 已在 NOREC.lib(track.obj) 1>LINK 中定义：致命错误 LNK1104：无法打开文件 'libcp.lib'

任何如何克服这个问题的想法都将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:53:18.097

从最后一个链接错误，`libcp.lib`找不到了。自 VS 2005 起，该库已被删除。`/MT`用于多线程版本。

[http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/abx4dbyh%28v=vs.80%29.aspx)

多线程版本是您将使用标志`libcpmt.lib`自动获得的版本。`/MT`我在您使用的第一个错误中看到`libcpmtd.lib`它是相同的调试版本。如果您不使用`/MTd`. （或者如果你是，如何`libcp.lib`引用，因为你应该使用其中一个，而不是两者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:41:11.337

链接器告诉您某些符号被多次定义。说服链接器生成目标图像的蛮力是使用 /FORCE:MULTIPLE ，如此[处所述](http://msdn.microsoft.com/en-us/library/70abkas3%28v=vs.90%29.aspx)。这个开关我用过几次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:03:13.663

> 链接：致命错误 LNK1104：无法打开文件“libcp.lib”

这是链接器中的错误。只需在 LIBPATH 中创建一个名为 libcp.lib 的空文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-31T08:02:53.693

`libcp.lib`你可以在安装的 MS Visual Studio 6.0 中找到

```
c:\Program Files\Microsoft Visual Studio\VC98\Lib\ 
```

目录。

只需将其复制到您的`MSVS 2005/2008/2010`lib 目录（即`c:\Program Files\Microsoft Visual Studio 8\VC\lib\`），一切都会编译得很好。

# ios - XCode：如何在上传之前验证 IPA 是否有效？

> ID：10823695
> 
> 赞同：5
> 
> 时间：2012-05-30T20:23:24.887
> 
> 标签：ios, xcode, code-signing

我在创建 IPA 文件时遇到问题，TestFlight 向我展示了这个原因。

[http://help.testflightapp.com/customer/portal/articles/402843-mismatched-keychain-access-groups](http://help.testflightapp.com/customer/portal/articles/402843-mismatched-keychain-access-groups)

我发现钥匙串访问组不匹配，但需要一段时间才能将 IPA 文件上传到 TestFlight，然后才能告诉我该文件无效。我什至想在上传文件之前对其进行测试。我还想知道如何获取有关 IPA 文件的信息，以便我可以诊断和解决问题。我不知道它是如何失败的，因为我在调试/发布版本中使用相同的代码签名身份以及从存档中签署 IPA。我不知道出了什么问题或如何解决它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T00:55:48.540

如果您的分发配置文件包标识符与您的应用程序的包标识符匹配（例如，您的包 ID 是**com.mycompany.appname**并且您的应用程序的包 ID 至少有**com.mycompany.***，那么您不应该遇到此错误。

在 Xcode 4.3 中检查有效性反馈的另一种方法是归档应用程序，然后点击 Organizer 的 Archives 部分中的 Validate 按钮。（请注意，在您在 iTunes Connect 帐户中创建 App ID 并按照步骤将其设置为“等待上传“。如果您还没有准备好上传到商店，请不要担心，您仍然可以在不上传任何内容的情况下进行验证。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T12:59:32.810

[![工具](../Images/c8671608467831b5a115539cf0ed2824.png)](https://i.stack.imgur.com/HKla1.png)

转到终端并像下面一样使用它

```
/Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Support/altool -v -f APP.ipa -u itunesconnect@user.com -p password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T20:56:49.760

你可以使用 Xcode 自带的 altool

1.  cd /Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Versions/A/Support/
2.  ./altool --validate-app -f <'ipaFile'>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T12:34:42.137

您可以使用该命令从已签名的应用程序中提取权利信息：

```
codesign -d --entitlements 
```

然后尝试将其与配置文件的权利部分进行比较。如果它们不匹配，则您的签名过程一定有问题。

# silverlight - 在 Silverlight 5 中使用合并的 ResourceDictonaries 中的样式

> ID：10823709
> 
> 赞同：2
> 
> 时间：2012-05-30T20:23:58.603
> 
> 标签：silverlight, styles, resourcedictionary

我的 app.xaml 中有一堆样式，它们都在我的 SL5 应用程序的页面中使用得很好。我想将这些样式移动到多个资源字典中，以使其更易于管理和使用。

首先，我将样式复制到项目的 /Styles/ButtonStyles.xaml 页面中的新资源字典中......片段如下所示：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <Style x:Key="RegistrationsRolloverImage" TargetType="Button">
    <Setter Property="Template">...</Setter>
  </Style>

  <Style x:Key="FinancialLedgerRolloverImage" TargetType="Button">
    <Setter Property="Template">...</Setter>
  </Style>

</ResourceDictionary> 
```

接下来，我将以下内容添加到我的 App.xaml 中：

```
<ResourceDictionary x:Key="MergedStyles">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Styles/ButtonStyles.xaml" />
  </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

当我不断收到构建错误时，它迫使我将 ax:key 添加到 ResourceDictionary 标记。现在它构建了，但是使用该样式的按钮没有获得该样式。事实上，我收到了一个 JS 错误，它在我的资源字典中找不到具有两种样式名称的样式。如果它们在 App.xaml 中，它们就可以正常工作，但如果它们在单独的资源字典中，则不能。我反映了生成的 DLL，可以看到 DLL 中的样式/buttonstyles.xaml。

不知所措......并且无法弄清楚出了什么问题。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:21:07.870

他们在同一个项目中吗？在你的 app.xaml 中尝试更多类似的东西；

```
<Application.Resources>
   <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/YourResDictionaryContaining.Proj.Name;component/Styles/ButtonStyles.xaml" />
      </ResourceDictionary.MergedDictionaries>
   </ResourceDictionary>
</Application.Resources> 
```

我必须这样做才能将资源字典合并到一个项目中，然后将其添加到每个其他项目的 app.xaml 中，以使它们在全球范围内可用。目前，我以这种方式在同一个解决方案中运行大约 6 个 Resource Dicts 和 20 个项目，并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:09:17.937

在完整的[App.xaml 示例中](http://pastebin.com/iakhFULy)，您希望使用“本地”资源。但是当你有[“本地”资源](http://blog.wpfwonderland.com/2007/08/11/mixing-external-mergeddictionaries-with-local-resources-in-appxaml/)并且你想合并一个资源目录时，系统税有点不同。

试试这样：

```
<Application ...>
  <Application.Resources>
    <ResourceDictionary>

      <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />

      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Styles/ButtonStyles.xaml" />
      </ResourceDictionary.MergedDictionaries>

      <Style x:Key="BaseTextBlock" TargetType="TextBlock">
         ...
      </Style>

    </ResourceDictionary>
  </Application.Resources>
</Application> 
```

# html - 样式为“内联”时如何修复 div 大小

> ID：10823710
> 
> 赞同：3
> 
> 时间：2012-05-30T20:24:14.843
> 
> 标签：html, css

当一个 div 被设置为“内联”时，它的所有维度变量似乎都失去了效果。

例如

```
<div id="test" style=" border: 1px solid;padding:3px;width:40px; height:100px;">
foobar
</div> 
```

给了我一个大盒子，但在我添加内联样式后，盒子缩小到最小尺寸。

例如

```
<div id="test" style="display:inline; border: 1px solid;padding:3px;width:40px; height:100px;">
foobar
</div> 
```

我的问题是，有没有一种方法可以保持 div 内联（与前面的一些文本相同的行），同时能够修复它的大小。（div 或 span）

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T20:27:48.707

内联元素的宽度被忽略。根据我的经验，在这种情况下使用 a`float`将解决问题。

您也可以使用`inline-block`，但如果您必须支持较旧的浏览器，您可能不希望使用它。

浮动的 div 将浮动到最近的块元素父级的左侧（假设这个父级也没有浮动）。如果您需要更多地控制 div 的浮动位置，请在浮动 div 周围添加一个包装（非浮动和块）div

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:27:42.190

使用`display: inline-block`或（更好）`display: block; float: left`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:27:00.537

利用`display: inline-block;`

PS：`inline-block`在一些较旧的浏览器中不可用。

# uiviewcontroller - 来自 TableView 的 presentModalViewController

> ID：10823713
> 
> 赞同：0
> 
> 时间：2012-05-30T20:24:20.440
> 
> 标签：uiviewcontroller, delegates, presentmodalviewcontroller

我创建了一个带有按钮的自定义单元格。按钮应该呈现一个modalViewController，一个用于电子邮件，另一个用于webView。我还创建了一个委托来从类中获取回调。

所以在单元格中：

```
 _delegateAction = [[HistoryVC alloc] init];
    _delegateAction.delegate = self; 
    [_delegateAction openData:_data Type:_title.text]; //start process 
```

表所在的类是具有表视图的 UIviewController。（使用另一个类的自定义单元格从 UiTableViewCell 继承。

如果您需要 meed 信息，请告诉我。

在 UIviewController 我试图呈现一个模态视图如下：

```
-(void) openData: (NSString *)data Type:(NSString*)type
{
    QRWebView * webView = [[QRWebView alloc] init];
    webView.url = data;
    [self presentModalViewController: webView animated:YES];
} 
```

模态视图不显示。我知道我做错了什么，但这是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:59:47.473

您已经创建了一个新的视图控制器，`_delegateAction = [[HistoryVC alloc] init];`但您还没有通过以任何方式呈现它来使其成为控制器层次结构的一部分。

当您调用 时`[self presentModalViewController: webView animated:YES];`，您的`self`就是新控制器，并且由于它不在层次结构中，因此无法呈现另一个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:25:45.637

我已经设法通过实现 PresentModalView 来修复它。

我所做的是在 AppDelegate 类中创建一个 showModal 和 DismissModal 。

这些方法将我想要的视图添加到窗口中，方法是将其添加为：

```
[Window addsubview TheView]; 
```

并且对于 Dismiss 是 removeFromSuperview。

我实现了一个动画来伪造 modalView 动画。

为了获得这些方法，我使用了 shareApplication。

它的作品。

# javascript - Javascript 处理程序

> ID：10823714
> 
> 赞同：0
> 
> 时间：2012-05-30T20:24:22.037
> 
> 标签：javascript, html, event-handling

我可以在表单标签中包含以下内容吗？

```
action="handler" 
```

这合法吗？它应该运行某种javascript函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:27:18.160

是的，它是合法的，但不会调用 javascript。它会将表单提交到“handler.”指定的服务器 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:32:51.743

该`action`属性是浏览器将表单提交到的 URL。

```
<form action="submitForm.php"><input /></form> 
```

如果你想运行 JavaScript，你可以做`handler`这样的事情：

```
<form action="javascript:myFunc(this)"><input /></form> 
```

我强烈建议您不要这样做，而是使用 JavaScript 事件处理程序来捕获`onsubmit`事件。

```
<form id="myForm"><input /></form>

<script>
    document.getElementById('myForm').addEventListener('submit', function(event){
        event.preventDefault(); // prevent the form the submitting.
                                // the form will only submit if
                                // it has an "action" attribute
        myFunc(this);
    });
</script> 
```

# c# - 无法发送电子邮件交换 RPC HTTP

> ID：10823715
> 
> 赞同：0
> 
> 时间：2012-05-30T20:24:25.773
> 
> 标签：c#, email, exchange-server

好的，所以我尝试了很多方法来发送这封电子邮件，但我就是无法收到，这是服务提供商提供的仅有的两个

**交换服务器的 url**

`EXVMBX016-3.exch016.msoutlookonline.net`

**通过 http 连接的代理**

`dc016-8.exch016.msoutlookonline.net`

**注意：我尝试使用 SSL**

现在我的问题是，在我理解的默认端口中，它是`25`被拒绝的连接，所以我打开了我的 Outlook 并使用嗅探器尝试查看该 url 中打开的端口是什么，这是`135`超时。

```
 System.Net.NetworkCredentialnetworkCredentials = new System.Net.NetworkCredential("example@example.com", "*****");
 System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
 message.To.Add("example@example.com");
 message.Subject = "Esto es una prueba de direccion";
 message.From = new System.Net.Mail.MailAddress("example@example.com");
 message.Body = "Esto es una prueba del servicio de direcciones";
 System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("EXVMBX016-3.exch016.msoutlookonline.net");
 //smtp.Port = 135
 //smtp.EnableSsl = False
 smtp.UseDefaultCredentials = false;
 smtp.Credentials = networkCredentials;
 smtp.Send(message); 
```

所以如果我错过了什么？或者我做错了什么？

**更新** 这是我在 Outlook 上的配置的一些图片

![服务器网址](../Images/cce5459c862d3173fb728ea923395a62.png)

![代理人](../Images/0bf49102d367e8f9192f5c6cf4ad0d8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:10:54.383

您的问题是您使用了错误的 SMTP 地址。根据我的理解，Exchange Server 名称不能是 SMTP 名称 cEXVMBX016-3.exch016.msoutlookonline.net。您的 SMTP 服务器地址将不同于您在上面使用的地址，这就是连接被拒绝的原因。发送任何电子邮件时，您只需要正确的 SMTP 地址和正确的凭据来连接它，就是这样。我相信你的代码是正确的。

要获得正确的 SMTP 地址，请在 Outlook 中打开您的电子邮件地址联系人卡片，然后查找“电子邮件地址”属性，您将获得正确的 SMTP 地址并在上述代码中使用。

**[添加以上图片后添加]**

根据上图，您使用 Exchange Server Address 作为 SMTP 地址，这是错误的。您必须从 IT 获得正确的 SMTP 地址，然后使用该地址发送电子邮件。您的代码是正确的，因此正确的 SMPT 地址将立即生效。

# javascript - 如何使用嵌入式 ruby 动态创建 jquery 选择器（在 .js.erb 文件中）？

> ID：10823716
> 
> 赞同：3
> 
> 时间：2012-05-30T20:24:28.353
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, erb

作为 ajax 调用的一部分，我正在尝试使用嵌入式 ruby​​ 在 .js.erb 文件中生成 jquery select 的 id 部分。下面是我如何让它工作的，但我不得不稍微动一下手，让浏览器中的 javascript 将 id 连接到选择器，而不是在服务器上构建 jquery 选择器。

`$("tr.design#".concat(<%= @form_column.form_row.id.to_s %>)).html("<%= escape_javascript( render(:partial => "form_rows/row") ) %>")`

我尝试了几种组合：

`$(<%= escape_javascript("tr.design#" << @form_column.form_row.id.to_s) %>)`

`$(<%= "tr.design#" << @form_column.form_row.id.to_s %>)`

`$("tr.design#<%= @form_column.form_row.id.to_s %>")`

在每种情况下，返回给客户端的选择器都是 $(tr.design#17) （不带引号），因此没有按照我在客户端上的要求执行，即 jquery 没有找到任何匹配项。

该`.html("<%= escape_javascript( render(:partial => "form_rows/row") ) %>")`部分已正确发送到浏览器，即 <%= ... %> 的行为符合预期，并且浏览器上的 javascript 收到了格式良好、引用（和转义）在 .html 函数中传递的 html。

有人对如何避免在 .js.erb 文件中使用 .concat 有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T23:09:05.400

像这样

```
$('#user_<%= @user.id %>').click(blah blah blah); 
```

如果您将 <%= %> 放在 js.erb 文件中，则会在生成的 JS 中评估并打印该代码。你可以构造任何你想要的唯一字符串。可能 :classname_:id 是最常见的解决方案。

顺便说一句，评估的代码不必是字符串。<%=%> 调用 .to_s 进行打印。在该示例中，@user.id 被转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:28:07.993

id 是独一无二的，你可能可以做到

```
$("#"+<%= @form_column.form_row.id.to_s %>) 
```

# c# - 为什么这有时意味着基础？

> ID：10823720
> 
> 赞同：3
> 
> 时间：2012-05-30T20:24:41.380
> 
> 标签：c#

给定

```
public class Animal
{
    public Animal()
    {
        Console.WriteLine("Animal constructor called");
    }
    public virtual void Speak()
    {
        Console.WriteLine("animal speaks");
    }
}

public class Dog: Animal
{
    public Dog()
    {
        Console.WriteLine("Dog constructor called");
        this.Speak();
    }
    public override void Speak()
    {
        Console.WriteLine("dog speaks");
  base.Speak();
    }
} 
```

`this.Speak()`来电`Dog.Speak()`。从狗身上移开`Speak()`，突然`this.Speak()`叫起来`Animal.Speak()`。为什么`this`会有这种行为？换句话说，为什么`this`是`base`或`this`？

对我来说，明确调用`base.Speak()`更有意义。特别是当 speak 不是虚拟的时，令人惊讶的是 Speak() 在`virtual`被移除时仍然被调用。我从 OO 意义上理解 IS-A 关系，但我无法解决 C# 中的这个特定问题。当人们编写上帝级的 UI（几乎每个企业都这样做）时，这会变得特别烦人。当我应该查看“base”时，我正在“this”中寻找“Speak()”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:27:42.403

这并不是说。如果 里面*有*一个 speak 方法`dog`，那么它就是一个*`override`*基本方法。如果不存在，则调用 dogInstance.Speak 将在 Dog 的任何基类中查找 Speak() 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:32:14.410

子类自动从其基类继承行为。`Dog`如果您除了`Animal`从那时继承之外什么都不做，`this.Speak()`并且`base.Speak()`两者都引用了`Speak()`在`Animal`.

开始发生特殊事情的地方是 if `Dog`overrides `Speak()`。这是不可能的，除非`Speak()`is `virtual`。（`virtual`关键字不控制继承，它控制覆盖。）

只有当`Dog`覆盖`Speak()`确实`base.Speak()`做一些特殊的事情时：在这种情况下，调用`Speak()`(or `this.Speak()`) 将执行`Dog`'s 的实现，因为它`override`是 s`Animal`的实现。这就是`base`有用的地方：它允许您通过指定要执行基类的实现而不是覆盖来绕过此行为。

这种风格的一个常见用途是在构造函数中。例如：

```
public class Animal
{
    private readonly string _name;
    public Animal() : this("Animal") { }
    protected Animal(string name) { _name = name; }
    public void Speak() { Console.WriteLine(_name + " speaks"); }
}

public class NamedAnimal : Animal
{
    public NamedAnimal(name) : base(name) { }
}

// usage:
(new Animal()).Speak();  // prints "Animal speaks"
(new NamedAnimal("Dog")).Speak();     // prints "Dog speaks" 
```

在此示例中，`NamedAnimal`无法访问该`_name`字段，但仍然可以通过调用基类的构造函数来间接设置它。但基类的签名与基类中的签名相同，因此必须使用`base`.

对于非构造函数，获得原本无法访问的行为也很有用。例如，如果`Animal.Speak`是虚拟的，那么我们可以使用覆盖来将行为附加到它上，而不是简单地替换它：

```
public class NamedAnimal : Animal
{
    public NamedAnimal(name) : base(name) { }
    public override Speak()
    {
        Console.Write("The animal named ");
        base.Speak();
    }
}

// usage:
(new NamedAnimal("Dog")).Speak();  // Writes "The animal named Dog speaks" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T20:28:44.167

这是OO的基本点之一。如果您不提供覆盖，则使用父方法。

此外，即使您删除`virtual`,`Dog.Speak`也会被调用，因为您没有进行`this`多态访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:28:40.703

`this`手段`this`，仅此而已。

就在您的第一个示例中，您有一个`Speak(..)`函数覆盖，所以`this`调用它。

相反，在第二种情况下，没有任何覆盖，因此它“爬上”派生树并选择第一个合适的函数。在您的情况下，其中一个`Speak(..)`属于`Animal`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T20:29:35.357

VB.Net 有`MyClass`关键字可以做到这一点（与`My`关键字相反，它相当于`this`C# 中的关键字）。不幸的是，C# 中没有`MyClass`等效的关键字。

# xpath - XPath：如何在父元素中选择 text() 或 span 元素

> ID：10823721
> 
> 赞同：0
> 
> 时间：2012-05-30T20:24:48.147
> 
> 标签：xpath

我有一个父元素（字体），我想选择 text() 或 span 元素的所有子元素（直接后代）。我将如何构建这样的 xpath？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:33:51.323

如果当前节点是`font`元素，则如下所示：

```
text()|span 
```

否则，您必须始终结合`|`两个完整的 XPath - 一个用于文本，一个用于跨度，例如：

```
font/text()|font/span 
```

如果当前节点就在上面`font`- 或

```
//a[text()='View Larger Map']/../../../../div[contains(@class, 'paragraph')][3]/font/span|//a[text()='View Larger Map']/../../../../div[contains(@class, 'paragraph')][3]/font/text() 
```

如果从具有一些复杂选择标准的根开始。

如果您有像最后一个这样的复杂路径，最好将部分路径存储在变量中 - 例如在 XSLT 中：

```
<xsl:variable name="font" select="//a[text()='View Larger Map']/../../../../div[contains(@class, 'paragraph')][3]/font"/>

. . . 

<xsl:for-each select="$font/span|$font/text()">
  . . . 
</xsl:for-each> 
```

另一种可能性是做这样的事情：

```
//a[text()='View Larger Map']/../../../../div[contains(@class, 'paragraph')][3]/font/node()[name()='span' or name()=''] 
```

之所以有效，是因为`name()`它为节点返回了一个空字符串`text()`——但我不能 100% 确定它是否适用于所有 XPath 处理器，并且它可能会错误地匹配注释节点。

# java - 使用 Java Persistence Query Language 仅在子查询中 FETCH FIRST n ROWS

> ID：10823724
> 
> 赞同：0
> 
> 时间：2012-05-30T20:24:55.883
> 
> 标签：java, jpa, db2, jpql

我正在尝试使用 Java Persistence Query Language 对 DB2 表进行批量更新：

```
UPDATE Account  a
SET a.Status = 'r', a.Code = :code, a.Timestamp = CURRENT_TIMESTAMP
WHERE ClientNumber IN  (SELECT ClientNumber FROM Account
                        WHERE a.Status = '' AND a.Type = :type 
                        ORDER BY a.Code ASC
                        FETCH FIRST 5 ROWS ONLY) 
```

但是，JPQL 似乎不支持**FETCH FIRST n ROWS ONLY 。**

有哪些其他选择可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:55:34.780

在 JPQL 中无法执行这样的查询。您必须使用 SQL。

或者您可以执行以下查询：

```
SELECT a FROM Account a WHERE a.Status = '' AND a.Type = :type 
```

并`setMaxResults(5)`在执行查询之前调用。结果，您将获得 5 个帐户（最多），您可以更改 5 个返回帐户的状态、代码和时间戳。

不过，我发现获取没有任何`order by`子句的查询的前 5 行很奇怪。

# ruby-on-rails - Project:Class 的未定义方法“model_name”

> ID：10823736
> 
> 赞同：14
> 
> 时间：2012-05-30T20:25:27.287
> 
> 标签：ruby-on-rails, ruby

我已经浏览了所有相关问题，但这里对我来说没有什么新鲜事。

我有一个带有“新”动作的项目控制器

```
class ProjectsController < ApplicationController
  def new
    @newproject = Project.new
  end
end 
```

项目是一个简单的类，不是活动记录：

```
class Project
  attr_accessor :name, :description
  def initialize
    @name = ""
    @description = ""
  end
end 
```

我收到错误“项目：类的未定义方法`model_name'”

这是一个 erb 文件示例：

```
<%= form_tag(@newproject)  do |f| %>
  <%= f.label :name %>:
  <%= f.text_field :description %><br />
<% end %> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-30T21:16:38.507

如果 Project 不是活动记录子类，则需要这些并且可以使用`form_for`

```
class Project
  extend ActiveModel::Naming
  include ActiveModel::Conversion
  def persisted?
    false
  end
  ...
end 
```

看法：

```
<%= form_for(@newproject)  do |f| %>
  <%= f.label :name %>:
  <%= f.text_field :description %><br />
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:29:48.627

```
class Project < ActiveRecord::Base 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T23:26:10.603

仅作记录 - 这是该问题的 Railscast：

[http://railscasts.com/episodes/219-active-model](http://railscasts.com/episodes/219-active-model)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-17T14:08:51.633

我遇到了类似的问题，因为我的班级没有使用 ActiveRecord；将以下内容添加到我的课程中解决了它：`include ActiveModel::Model`

# javascript - 如何向包含黑名单单词的元素添加类

> ID：10823739
> 
> 赞同：0
> 
> 时间：2012-05-30T20:25:35.570
> 
> 标签：javascript, regex, blacklist

我想向包含黑名单单词之一的 HTML 元素添加一个类。

例如，我的黑名单由“bad”和“ugly”组成，我想在它们的 span 中添加类：

```
<div id="main">
    <span>This is good.</span>
    <span class="black">Bad things happen sometimes.</span>
    <span class="black">This is bad.</span>
    <span class="black">And this is ugly.</span>
</div>

<a onclick="blacklisterFunction();">Add Class</a> 
```

blacklisterFunction() 应该是什么样子？该函数是否应该为每个列入黑名单的单词抓取主 div 或者是否有更有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:38:52.230

使用 jQuery：

```
$('#clickme').click(function () {

    $('div span').each(function() {

        var badthings = ['bad', 'ugly', 'gross'];

        var x = 0;

        while (x <= (badthings.length - 1)) { 

            if ($(this).text().toLowerCase().search(badthings[x]) !== -1) {

                $(this).addClass('black');

            }

            x++;

        }

    });

}); 
```

jsfiddle：http: [//jsfiddle.net/DgpnQ/4/](http://jsfiddle.net/DgpnQ/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:41:32.367

这是一种方法：

```
function blacklister(el, words) {
    if (!el || !words) {
        return false;
    }
    else {
        var text = el.textContent;
        for (var i = 0, len = words.length; i < len; i++) {
            if (text.test(new RegExp(words[i],'gi'))) {
                el.className += 'black';
            }
        }
    }
}

var m = document.getElementById('main'),
    spans = m.getElementsByTagName('span'),
    blacklist = ['ugly','bad'];

for (var i = 0, len = spans.length; i < len; i++) {
    blacklister(spans[i],blacklist);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ydDee/)。

* * *

**为响应 OP 留下的评论而编辑**，在 Firefox 中使用上述内容报告错误：

>

```
function blacklister(el, words) {
    if (!el || !words) {
        return false;
    }
    else {
        var text = el.textContent;
        for (var i = 0, len = words.length; i < len; i++) {
            if (text.match(new RegExp(words[i],'gi'))) {
                if (el.className.indexOf('black') == -1){
                    el.className += 'black';
                }
            }
        }
    }
}

var m = document.getElementById('main'),
    spans = m.getElementsByTagName('span'),
    blacklist = ['ugly','bad'];

for (var i = 0, len = spans.length; i < len; i++) {
    blacklister(spans[i],blacklist);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ydDee/1/)。

参考：

*   [`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName).
*   [`match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match).
*   [`RegExp()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp).
*   [`test()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test).
*   [`textContent`](https://developer.mozilla.org/en/DOM/Node.textContent).

# xpages - 多值 Xpages 扩展名选择器？

> ID：10823740
> 
> 赞同：0
> 
> 时间：2012-05-30T20:25:36.320
> 
> 标签：xpages, xpages-extlib

如何使 xpages 扩展名称选择器具有多个值？我让它工作得很好，但只适用于一个值。我没有看到任何多值属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T03:38:18.297

在要写入名称的字段的所有属性下，将 multipleSeparator 设置为使用逗号和分号。还将 multipleTrim 设置为 True 以删除前导和尾随空格。在选择器中，用户一次可以选择一个名称，并且在添加它们时，它们会附加到列表中。按 OK 将所有选定的值写入该字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:02:55.200

从 Ext Lib 添加名称选择器。使用多行编辑框并使用多分隔符作为逗号或新行。问候， 普拉内什

# c# - 筛选大量对象

> ID：10823742
> 
> 赞同：2
> 
> 时间：2012-05-30T20:25:41.660
> 
> 标签：c#

我正在尝试从具有 142000 个对象的大型 IEnumerable 中检索名称列表。出于某种原因.. 操作超时并留下不完整的名称列表。有没有更好更快的方法来做我在下面的代码中所做的事情：

```
IEnumerable<MyClass> table = GetAll(); // Get All returns an IEnumerable<MyClass>

IEnumerable<string> allNames = new List<string>();
allNames = table.Where(r => listOfIds.Contains(r.id)).Select(r => r.name); 
```

任何帮助表示赞赏，

泰德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:30:57.870

这应该更有效：

```
List<String> allNames = (from id in listOfIds
                         join t in table on id equals t.id
                         select t.name).ToList(); 
```

[为什么 LINQ JOIN 比使用 WHERE 链接快得多？](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

顺便说一句，这里有 142000 个对象和 50000 个 ID，`Join`比你上面的要快 1262 。`Where`

**79**毫与**99705**毫

# c - 了解 FFMPEG 视频编码

> ID：10823745
> 
> 赞同：6
> 
> 时间：2012-05-30T20:25:45.873
> 
> 标签：c, video, ffmpeg, codec

从 ffmpeg 中的编码示例中得到这个。我可以在某种程度上遵循作者的音频编码示例，但我发现自己在看 C 代码时感到困惑（我在块号中进行了评论以帮助我参考我在说什么）......

```
static void video_encode_example(const char *filename)
{
AVCodec *codec;
AVCodecContext *c= NULL;
int i, out_size, size, x, y, outbuf_size;
FILE *f;
AVFrame *picture;
uint8_t *outbuf, *picture_buf;              //BLOCK ONE
printf("Video encoding\n");

/* find the mpeg1 video encoder */
codec = avcodec_find_encoder(CODEC_ID_MPEG1VIDEO);
if (!codec) {
    fprintf(stderr, "codec not found\n");
    exit(1);                                //BLOCK TWO
}

c= avcodec_alloc_context();
picture= avcodec_alloc_frame();
/* put sample parameters */
c->bit_rate = 400000;
/* resolution must be a multiple of two */
c->width = 352;
c->height = 288;
/* frames per second */
c->time_base= (AVRational){1,25};
c->gop_size = 10; /* emit one intra frame every ten frames */
c->max_b_frames=1;
c->pix_fmt = PIX_FMT_YUV420P;                   //BLOCK THREE

/* open it */
if (avcodec_open(c, codec) < 0) {
    fprintf(stderr, "could not open codec\n");
    exit(1);
}
f = fopen(filename, "wb");
if (!f) {
    fprintf(stderr, "could not open %s\n", filename);
    exit(1);
}                                               //BLOCK FOUR

/* alloc image and output buffer */
outbuf_size = 100000;
outbuf = malloc(outbuf_size);
size = c->width * c->height;
picture_buf = malloc((size * 3) / 2); /* size for YUV 420 */
picture->data[0] = picture_buf;
picture->data[1] = picture->data[0] + size;
picture->data[2] = picture->data[1] + size / 4;
picture->linesize[0] = c->width;
picture->linesize[1] = c->width / 2;
picture->linesize[2] = c->width / 2;              //BLOCK FIVE

/* encode 1 second of video */
for(i=0;i<25;i++) {
    fflush(stdout);
    /* prepare a dummy image */
    /* Y */
    for(y=0;y<c->height;y++) {
        for(x=0;x<c->width;x++) {
            picture->data[0][y * picture->linesize[0] + x] = x + y + i * 3;
        }
    }                                            //BLOCK SIX

    /* Cb and Cr */
    for(y=0;y<c->height/2;y++) {
        for(x=0;x<c->width/2;x++) {
            picture->data[1][y * picture->linesize[1] + x] = 128 + y + i * 2;
            picture->data[2][y * picture->linesize[2] + x] = 64 + x + i * 5;
        }
    }                                           //BLOCK SEVEN

    /* encode the image */
    out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
    printf("encoding frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);
}                                              //BLOCK EIGHT

/* get the delayed frames */
for(; out_size; i++) {
    fflush(stdout);
    out_size = avcodec_encode_video(c, outbuf, outbuf_size, NULL);
    printf("write frame %3d (size=%5d)\n", i, out_size);
    fwrite(outbuf, 1, out_size, f);
}                                             //BLOCK NINE

/* add sequence end code to have a real mpeg file */
outbuf[0] = 0x00;
outbuf[1] = 0x00;
outbuf[2] = 0x01;
outbuf[3] = 0xb7;
fwrite(outbuf, 1, 4, f);
fclose(f);
free(picture_buf);
free(outbuf);
avcodec_close(c);
av_free(c);
av_free(picture);
}                                            //BLOCK TEN 
```

这是我可以从作者的代码中逐块获得的...

块一：初始化变量和指针。我在 ffmpeg 源代码中还找不到 AVFrame 结构，所以我不知道它的引用是什么

块二：使用文件中的编解码器，如果未找到关闭。

块三：设置示例视频参数。我唯一没有真正得到的是gop尺寸。我阅读了有关帧内帧的信息，但我仍然不明白它们是什么。

第四块：打开文件进行写入...

第五块：这是他们真正开始失去我的地方。部分可能是因为我不确切知道 AVFrame 是什么，但为什么他们只使用图像大小的 3/2？

第六和第七块：我不明白他们想用这个数学来完成什么。

块八：看起来 avcodec 函数完成了这里的所有工作，暂时不关心这个。

块九：因为它在循环的 25 帧之外，我假设它得到了剩余的帧？

第十块：关闭，释放内存等......

我知道这是一大块要混淆的代码，任何输入都会有所帮助。我在工作中不知所措。在此先感谢 SO。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:37:24.597

正如 HonkyTonk 已经回复的那样，评论说明了这一点：准备一个虚拟图像。我猜您可能会对虚拟图像的生成方式感到困惑*，*尤其是在您不熟悉 YUV/YCbCr 颜色空间的情况下。[阅读 Wikipedia 处理以了解基础知识](http://en.wikipedia.org/wiki/YUV)。

许多视频编解码器在 YUV 颜色空间中运行。这常常让只习惯于处理 RGB 的程序员感到困惑。执行摘要是，对于这种变化（YUV 4:2:0 平面），图像中的每个像素都有一个 Y 样本（注意 Y 循环遍历每个 (x,y) 对），而每个 2x2 像素四边形共享一个 U/Cb 样本和一个 V/Cr 样本（注意块 7 中的迭代超过了宽度/2 和高度/2）。

看起来生成的图案是某种渐变。如果要产生已知变化，请将 Y/Cb/Cr 设置为 0，虚拟图像将全为绿色。将Cb和Cr设置为128，将Y设置为255，得到一个白框；将 Y 滑动到 0 以查看黑色；将 Y 设置为介于两者之间的任何值，同时将 Cb 和 Cr 保持在 128 以查看灰色阴影。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-10T10:04:49.643

我分享我的理解 [安静的迟到的回复！]

# YUV420p：

YUV 420P 或 YCbCr 是 RGB repersetation 的替代品，它包含 3

平面，即 Y（亮度分量）U（Y-Cb）和 V（Y-Cr）分量。[ans Y-Cb-Cr-Cg =

常数，我们不需要存储Cg分量，因为它通常可以计算出来。]就像RGB888，每个像素需要3个字节，YUV420每个像素需要1.5个字节[@Find(How

12位用于表示什么比例）] 这里P代表Progressive，表示帧是渐进的，意味着V跟随U，U跟随Y和YUV Frame是一个字节数组，简单！另一个是 I - 代表交错，意味着 UV 平面数据以特定方式在 Y 平面数据之间交错[@Find(What way)]

# ssrs-2008 - 如何选择符合行组的“First(Fields...)”和“Last(Fields..)”之间的行值？

> ID：10823750
> 
> 赞同：1
> 
> 时间：2012-05-30T20:26:03.390
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, ssrs-grouping

使用 SSRS 2008R2。

目前，我有一个查询几个表并返回一堆分层数据的 select 语句。

1 个商店-> 1+ 部分-> 1+ 项目

返回的数据集类似于这样（加上其他 20 列）：

```
Store_num | Section_num | Section_Name | Year_Calc | Item_name    | Item_Num
  4542    |   32        |    Fruits    |    1      |   Apple      |   1
  4542    |   32        |    Fruits    |    2      |   Apple      |   1
  4542    |   32        |    Fruits    |    3      |   Apple      |   1
  4542    |   32        |    Fruits    |    4      |   Apple      |   1
  4542    |   32        |    Fruits    |    5      |   Apple      |   1
  4542    |   32        |    Fruits    |    1      |   Berry      |   2
  4542    |   32        |    Fruits    |    2      |   Berry      |   2
  4542    |   32        |    Fruits    |    3      |   Berry      |   2
  4542    |   32        |    Fruits    |    4      |   Berry      |   2
  4542    |   32        |    Fruits    |    5      |   Berry      |   2
  4542    |   32        |    Fruits    |    1      |   Orange     |   3
  4542    |   32        |    Fruits    |    2      |   Orange     |   3
  4542    |   32        |    Fruits    |    3      |   Orange     |   3
  4542    |   32        |    Fruits    |    4      |   Orange     |   3
  4542    |   32        |    Fruits    |    5      |   Orange     |   3
  4542    |   32        |    Fruits    |    1      |   Banana     |   4
  4542    |   32        |    Fruits    |    2      |   Banana     |   4
  4542    |   32        |    Fruits    |    3      |   Banana     |   4
  4542    |   32        |    Fruits    |    4      |   Banana     |   4
  4542    |   32        |    Fruits    |    5      |   Banana     |   4
  4542    |   32        |    Fruits    |    1      |   Watermelon |   5
  4542    |   32        |    Fruits    |    2      |   Watermelon |   5
  4542    |   32        |    Fruits    |    3      |   Watermelon |   5
  4542    |   32        |    Fruits    |    4      |   Watermelon |   5
  4542    |   32        |    Fruits    |    5      |   Watermelon |   5
  4542    |   33        | Vegetables   |    1      |   Esparagus  |   12
  4542    |   33        | Vegetables   |    2      |   Esparagus  |   12
  4542    |   33        | Vegetables   |    3      |   Esparagus  |   12
  4542    |   33        | Vegetables   |    4      |   Esparagus  |   12
  4542    |   33        | Vegetables   |    5      |   Esparagus  |   12
  4542    |   33        | Vegetables   |    1      |   Lettuce    |   13
  4542    |   33        | Vegetables   |    2      |   Lettuce    |   13
  4542    |   33        | Vegetables   |    3      |   Lettuce    |   13
  4542    |   33        | Vegetables   |    4      |   Lettuce    |   13
  4542    |   33        | Vegetables   |    5      |   Lettuce    |   13
  4542    |   33        | Vegetables   |    1      |   Mushroom   |   14
  4542    |   33        | Vegetables   |    2      |   Mushroom   |   14
  4542    |   33        | Vegetables   |    3      |   Mushroom   |   14
  4542    |   33        | Vegetables   |    4      |   Mushroom   |   14
  4542    |   33        | Vegetables   |    5      |   Mushroom   |   14
  4542    |   33        | Vegetables   |    1      |   Tomato     |   15
  4542    |   33        | Vegetables   |    2      |   Tomato     |   15
  4542    |   33        | Vegetables   |    3      |   Tomato     |   15
  4542    |   33        | Vegetables   |    4      |   Tomato     |   15
  4542    |   33        | Vegetables   |    5      |   Tomato     |   15
  4542    |   33        | Vegetables   |    1      |   Spinach    |   16
  4542    |   33        | Vegetables   |    2      |   Spinach    |   16
  4542    |   33        | Vegetables   |    3      |   Spinach    |   16
  4542    |   33        | Vegetables   |    4      |   Spinach    |   16
  4542    |   33        | Vegetables   |    5      |   Spinach    |   16 
```

在我的 tablix 中，我目前正在对 Items_num 和 Section_num 进行分组，以便为​​每个 Section 的每个 Item 重复我的整个 tablix。

起初这不是一个难题，因为我刚刚创建了两个 tablix，而一个有多年的有一个列组。问题解决了。

然而，与任何工作一样，这还不够好。我需要为每个“5 年计算”重复所有信息数据。

这就是 tablix 的样子，你就会明白为什么我无法找到一个好的解决方案。

```
+--------+--------+----------------+-------------+---------+---------+----------------+
|Store   |4542                     |Store Name:  | We Sell Groceries!                 |
+--------+--------+----------------+-------------+---------+---------+----------------+
|Section |32                       |Section Name:| Fruits                             |
+--------+--------+----------------+-------------+---------+---------+----------------+
|Item    |1                        |Item Name:   | Apple                              |
+--------+--------+----------------+-------------+---------+---------+----------------+
|                 |First(Year)     |2nd(Year)    |3rd(Year)|4th(Year)|Last(Year)      |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 1    |First(Column_10)|             |         |         |Last(Column_10) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 2    |First(Column_11)|             |         |         |Last(Column_11) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 3    |First(Column_12)|             |         |         |Last(Column_12) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 4    |First(Column_13)|             |         |         |Last(Column_13) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 5    |First(Column_14)|             |         |         |Last(Column_14) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 6    |First(Column_15)|             |         |         |Last(Column_15) |
+-----------------+----------------+-------------+---------+---------+----------------+
|Calculation 7    |First(Column_16)|             |         |         |Last(Column_16) |
+-----------------+----------------+-------------+---------+---------+----------------+ 
```

我有 5 个静态列，我无法找到从数据集中获取“第 2、第 3 和第 4”值的方法。

使用 Lookup 函数不起作用，因为它在整个数据集上，并且不遵守我当前应用的行组（到整个 tablix）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:30:13.173

因为我在之前的 1 个部分和 1 个项目的尝试中使用了该报告。我恢复到那个设计并创建了一个新报表，其中一个子报表隐藏在 Tablix 中，并在那里完成了分组。

在实际的子报表中，我创建了两个 tablix。一个包含计算上方的所有数据，一个包含计算下方的数据（将基于列组增长）

答案：使用子报告

# java - 如何使用 -Xlint:unchecked 重新编译？

> ID：10823755
> 
> 赞同：8
> 
> 时间：2012-05-30T20:26:22.753
> 
> 标签：java, compiler-construction, compiler-errors, bluej

我一直在 BlueJ/Java 中收到此消息。

[http://cache.gyazo.com/19c325e77bbc120892d1035dcfda5377.png](http://cache.gyazo.com/19c325e77bbc120892d1035dcfda5377.png)

我知道在 StackOverflow 上已经有其他几个类似的问题，但没有一个答案对我这个 Java 菜鸟来说足够具体。例如，其中一个人说要在 javac 命令行上添加一些东西，“我不知道那是什么。所以使用这些信息来了解你对我的要求有多具体。对不起。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:36:34.007

在包含源文件的目录中打开命令提示符。然后输入`javac -Xlint:unchecked *.java`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:41:51.060

请参阅 BlueJ[常见问题解答](http://www.bluej.org/help/faq.html#jvmargs)，其中有确切答案。

**编辑：** 很抱歉跑偏了。这就是 Windows 的常见问题解答所说的。转到您的 Bluej 安装目录并打开`lib\bluej.defs`文件。然后转到说的部分`bluej.windows.vm.args`并添加其他用户说的值。

所以你有了：

```
bluej.windows.vm.args=-Xlint:unchecked 
```

如果您真的想了解 java，我会听取 paulsm4 的建议并从命令行开始学习。这是我能做的最好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T02:53:36.787

@viggom555：

这是一个完整的命令行示例：

1) 创建文件“ATest.java”（示例：记事本 ATest.java）：

```
import java.util.*;

public class ATest {

  public static void main (String[] args) {
    ArrayList<String> test = new ArrayList<String>();
    System.out.println ("My array has " + test.size() + " items");
    test.add ("abc");
    System.out.println ("My array has " + test.size() + " items");
  }

} 
```

2) 编译（示例：“javac -Xlint:unchecked ATest.java”；在此示例中，您实际上并不需要“XLint”；我只是向您展示如果您想要它*会*去哪里）：

```
C:\temp>javac -Xlint:unchecked ATest.java 
```

3）运行测试程序：

```
C:\temp>java ATest
My array has 0 items
My array has 1 items 
```

我希望这有帮助.. PSM

# android - Android：使用框架与裸机编程？

> ID：10823760
> 
> 赞同：0
> 
> 时间：2012-05-30T20:26:40.233
> 
> 标签：android

我刚刚完成了针对 Android 的相当简单但完整的游戏的设计，包括菜单、多个视图等。现在我想继续做一些更复杂的事情，也许使用 OpenGL。

我在 gamedev.stackexchange 上看到人们使用各种游戏框架。与在 Java 中手动执行所有操作、自己制作精灵动画等相比，这样做有什么优势？使用这些框架不会降低我的代码在 iOS 和 Android 之间的可移植性吗？

如果可移植性是未来的目标，我真的应该用 C++/JNI 编码吗？对不起，如果问题看起来很明显，但我想得到比我更有经验的人的确认。

谢谢

# monodevelop - 使用 MonoDroid 时在 MonoDevelop 中使用时添加引用

> ID：10823761
> 
> 赞同：1
> 
> 时间：2012-05-30T20:26:59.383
> 
> 标签：monodevelop, xamarin.android

我刚刚开始尝试使用 MonoDroid，这是我第一次使用 Mono 和 MonoDevelop。我想做一些 Json 的东西并添加了对 ServiceStack.Text 库的引用。但是，在我重新启动 MonoDevelop 之前，新添加的程序集引用中的命名空间在智能感知中不可用。有人遇到过这种情况么？我不能完全确定这是 MonoDevelop 问题还是更具体的 MonoDroid/MonoDevelop 组合问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:20:45.233

我认为它与 Android 的 Mono 有关。我厌倦了重新创建你的测试用例，就像你用 Mono for Android 项目描述的那样。为 MonoTouch 创建一个类似的项目，它会立即加载 IntelliSense，而无需重新启动 MonoDevelop。我建议你在他们的 BugZilla 中提交一个错误：[https ://bugzilla.xamarin.com/index.cgi](https://bugzilla.xamarin.com/index.cgi)

# xamarin.android - Monodroid：唤醒应用程序

> ID：10823766
> 
> 赞同：0
> 
> 时间：2012-05-30T20:27:11.030
> 
> 标签：xamarin.android, wakeup

如何从代码中唤醒应用程序？

我正在编写一个简单的计时器，当时间结束时，它会在主要活动上显示图片。但这意味着应用程序应该一直停留在屏幕上。如果用户切换到另一个应用程序（或只是按 Home），我的 Activity 不再可见，我需要再次在屏幕上显示它（切换回我的应用程序），其方式类似于标准 Android 手机或计时器弹出。

所以实际上有2个问题：

1.  如何在屏幕“顶部”获取应用程序？
2.  屏幕锁定时如何正确显示应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:05:51.463

为此，您需要一个在该计时器触发时启动您的活动的服务。

您可以查看 Android 闹钟源代码，了解如何在锁定屏幕上显示活动：[https ://github.com/android/platform_packages_apps_alarmclock/blob/master/src/com/android/alarmclock/AlarmAlertFullScreen .java](https://github.com/android/platform_packages_apps_alarmclock/blob/master/src/com/android/alarmclock/AlarmAlertFullScreen.java)

特别注意第 85 到 90 行，这里添加了标志，以便允许在锁定屏幕上显示。这当然也适用于 Mono for Android。

您的问题也有一个很好的答案：[Wake Android Device up](https://stackoverflow.com/questions/3621599/wake-android-device-up) 移植到 Mono for Android 应该相当容易。

# ruby-on-rails - heroku rails 应用程序域仅在没有 www 的情况下工作

> ID：10823769
> 
> 赞同：4
> 
> 时间：2012-05-30T20:27:19.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, dns, controlpanel

两天前，我将一个应用程序从现有的 ISP 移到了 heroku。

直到我意识到如果 www.railslinks.com 放在 heroku Web 控制面板界面中，它似乎不起作用。因此，当我实际尝试[http://railslinks.com](http://railslinks.com)而不是[http://www.railslinks.com](http://www.railslinks.com)时，它起作用了

所以（今天 1 小时前）我在 heroku 控制面板中添加了 www.railslinks.com。我没有使用 Network Solutions 更改我的 DNS 设置（它显示了我所有带有 www 前缀的各种域）。

到目前为止，我还不能连接到[http://www.railslinks.com](http://www.railslinks.com)

传播我的heroku更改是否存在类似dns的延迟，或者我错过了什么。

注意：'myapp' 不是实际名称，只是我在文档中的占位符。

网络解决方案的 DNS 设置：

![在此处输入图像描述](../Images/e7919166e85688e36bac0feaab55ba68.png)

Heroku 设置（我现在把它们都放在那里，单独尝试 www 没有帮助）：

![在此处输入图像描述](../Images/4111ac958601bdb98ae85edae9a4144a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T00:40:47.810

**找到了，得用我的“zergio”dns编辑工具：**

![在此处输入图像描述](../Images/4738a84f4e4ddebacdbd5c2aff00c11a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T21:50:26.343

如果您有一个指向 proxy.heroku.com 或 myappname.herokuapp.coun 的 www.myapp.com 的 CNAME 条目，那么它应该可以工作。

在 Heroku 上添加域几乎是即时的，这听起来更像是一个 DNS 问题，但如果不知道您的真实域，则很难诊断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T11:06:05.967

对我来说，这适用于[www.reactjs.co](http://www.reactjs.co)（只需在 heroku 应用程序管理面板中添加 www.）：

[herokuapp 修复 - 单击此处查看屏幕截图](http://i.stack.imgur.com/Mc0sL.jpg)

# asp.net-mvc - 仅将 ViewModel 的一个对象传递给控制器

> ID：10823772
> 
> 赞同：1
> 
> 时间：2012-05-30T20:27:28.440
> 
> 标签：asp.net-mvc

我有一个 Home ViewModel 类，其中包含其他类：

```
public class HomeVM
{
    public ProductSearchRequest ProductSearchRequest { get; set; }
    //Other class
    //Other class
    //Other class
} 
```

我的主页/索引视图有`@model HomeVM`，并且我有一个搜索文本输入：

```
@using (Html.BeginForm("Search", "Product"))
{
    @Html.TextBoxFor(m => m.ProductSearchRequest.SearchText)
    <input type="submit" value="Search" />
} 
```

但在我的产品/搜索中，我只需要接收 ProductSearchRequest，因为还有其他页面使用其他 ViewModel 但包含 ProductSearchRequest。

我正在尝试这个：

```
public ActionResult Search(ProductSearchRequest request)
{
    var response = new ProductSearchResponse
    {
        SearchText = request.SearchText,
        Products = GetProductsByName(request.SearchText)
    };

    return View(response);
} 
```

但它不起作用.. request.SearchText 始终为空..

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:32:13.607

这只是在黑暗中刺伤，但是您的操作，请尝试调用参数“ProductSearchRequest”

或者如何将您的整个表单放在该操作的视图中，即以“ProductSearchRequest”为模型的“搜索”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:42:04.880

您遇到的问题是因为`TextBoxFor()`将使用命名约定创建一个 html 输入，该命名约定预计将绑定到与`HomeVM`原始操作相同类型的模型。

您可以尝试使用这样的简单`TextBox()`辅助方法：

```
@Html.TextBox("SearchText", Model.ProductSearchRequest.SearchText) 
```

为了避免使用字符串值，您可以制作一个单独的表单部分，将`ProductSearchRequest`对象作为模型，并调用：

```
@Html.RenderPartial("SearchForm",Model.ProductSearchRequest) 
```

现在您可以`TextBoxFor()`在部分中使用这样的方法：

```
@Html.TextBoxFor(m => m.SearchRequest) 
```

# xcode - 在 /usr 中安装 Xcode

> ID：10823774
> 
> 赞同：0
> 
> 时间：2012-05-30T20:27:38.580
> 
> 标签：xcode, makefile, installation, project

我有一个想移植到 Xcode 的 makefile 项目。

我按照以下说明进行操作：

[https://developer.apple.com/library/mac/#documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html](https://developer.apple.com/library/mac/#documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html)

该文档列出了在默认“/usr”文件夹中安装 Xcode 的重要性。但是安装程序没有提供这样的选项。

并将Devoloper文件夹安装在“/”文件夹中。

将“Developer”的全部内容移动到“/usr”是否安全，还是应该在安装期间完成？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:32:14.573

[TFA](https://developer.apple.com/library/mac/#documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html)说

> 如果您使用 makefile 进行编译，您应该将 Xcode 安装在默认位置 (/usr)。如果不这样做，您可能需要做额外的工作才能让您的脚本在非标准位置运行编译器、链接器等。

我猜具体路径已经过时了，但是在标准位置安装 Xcode 的总体建议是合理的。我建议您使用 Xcode 安装程序，它将 make 和 gcc 放在适当的位置，而不必特别担心 /usr。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:48:25.223

你当然不需要`/Developer`搬到`/usr`. 文档必须谈论`/usr/llvm-gcc-4.2/`文件夹和其他将在 Xcode 安装到`/Developer`. 你不需要为此做任何特别的事情。

当 Xcode 工具安装到默认位置 (/Developer) 时，安装程​​序会`/usr`自动为位置中的开发人员工具创建别名。安装，一切都会正常工作：`make`, `gcc`，`ld`其他一切都将出现在 $PATH 中。简而言之，只需安装即可。

我不知道为什么医生会这样说，这一定是错误或误解。

# ajax - 在 GWT 中创建图像 Looper 的工具/指南

> ID：10823775
> 
> 赞同：0
> 
> 时间：2012-05-30T20:27:39.393
> 
> 标签：ajax, image, gwt

我正在着手创建一个天气模型显示工具（Web 应用程序），从我所见，我真的很喜欢使用 Google Web Tools 的想法，尤其是 SmartGWT 工具包。在这一点上，我最大的问题是找到某种方法来创建一种图像“循环器”（一个接一个地显示特定“集合”中的所有图像，与幻灯片放映不同）。作为参考，我需要与此类似的功能（至少在基本级别上）：[http ://rapidrefresh.noaa.gov/hrrrconus/jsloop.cgi?dsKeys=hrrr:&runTime=2012053007&plotName=cref_sfc&fcstInc=60&numFcsts=16&model=hrrr&ptitle= HRRR%20Model%20Fields%20-%20Experimental&maxFcstLen=15&fcstStrLen=-1&resizePlot=1&domain=full&wjet=1](http://rapidrefresh.noaa.gov/hrrrconus/jsloop.cgi?dsKeys=hrrr:&runTime=2012053007&plotName=cref_sfc&fcstInc=60&numFcsts=16&model=hrrr&ptitle=HRRR%20Model%20Fields%20-%20Experimental&maxFcstLen=15&fcstStrLen=-1&resizePlot=1&domain=full&wjet=1)（尽管它当然不必完全一样）。

有谁知道（理想情况下）某种可以进行图像循环的 GWT 模块？或者，如果不是，即使我以前从未明确使用过 GWT，这听起来是否像中级程序员可以轻松解决的问题（我愿意接受挑战）？我确信我可以拼凑出一些东西，当它通过一个循环时，它会拉入每个图像，但预取它们会更加理想。

*如果您需要澄清任何事情，请发表评论！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:23:51.430

据我所知，没有预制解决方案可以做到这一点，尽管 SmartGWT 可能有一些我不知道的东西。无论如何，自己动手都不会太难。这里有一些代码可以帮助您入门：

```
public class ImageLooper extends Composite {
    // List of images that we will loop through
    private final String[] imageUrls;

    // Index of the image currently being displayed
    private int currentImage = 0;

    // The image element that will be displayed to the user
    private final Image image = new Image();

    // The Timer provides a means to execute arbitrary
    // code after a delay or at regular intervals
    private final Timer imageUpdateTimer = new Timer() {
        public void run() {
            currentImage = (currentImage + 1) % images.length;
            image.setUrl(imageUrls[currentImage]);
        }
    }

    // Constructor. I'll leave it to you how you're going to
    // build your list of image urls.
    public ImageLooper(String[] imageUrls) {
        this.imageUrls = imageUrls;

        // Prefetching the list of images.
        for (String url : imageUrls)
            Image.prefetch(url);

        // Start by displaying the first image.
        image.setUrl(imageUrls[0]);

        // Initialize this Composite on the image. That means
        // you can attach this ImageLooper to the page like you
        // would any other Widget and it will show up as the
        // image.
        initWidget(image);
    }

    // Call this method to start the animation
    public void playAnimation() {
        // Update the image every two seconds
        imageUpdateTimer.scheduleRepeating(2000);
    }

    // Call this method to stop the animation
    public void stopAnimation() {
        imageUpdateTimer.cancel();
    }
} 
```

这个实现的一个恼人的事情是你无法知道你的图像列表何时完成加载。`Image.prefetch`在这里没有回调可以帮助您。

# javascript - 谷歌地图不显示输入的位置

> ID：10823779
> 
> 赞同：1
> 
> 时间：2012-05-30T20:27:43.167
> 
> 标签：javascript, html, google-maps

在下面的代码中，谷歌地图总是只显示巴黎而不显示输入的位置。

在下面的表单元素中，我正在调用 javascript showAddress(location) 函数。

HTML正文：

```
<body onload="loadDefaultMap()" onunload="GUnload()">

<form action="#" method="post" onsubmit="showAddress(this.address.value); return false">
<input type="text" name="address" size="40" value="Paris"/>
<input type="submit"/>
</form>
<div id="map" style="width:500px;height:400px"></div>
</body> 
```

脚本：

```
<script type="text/javascript">
    function loadDefaultMap(){
        if(GBrowserIsCompatible()){

            var center =  new GLatLng(48.85661, 2.35222); //Paris

            var map = new GMap2(document.getElementById("map"));
            map.addControl(new GSmallMapControl());
            map.addControl(new GMapTypeControl());
            map.setCenter(center,15);

            geoCoder = new GClientGeocoder();   // this will render the map on th bases of address entered

            var marker = new GMarker(center, {draggable: true});  
            map.addOverlay(marker);

            GEvent.addListener(marker, "dragend", function() {
                var point = marker.getPoint();
                map.panTo(point);
            });

            GEvent.addListener(map, "moveend", function() {
                map.clearOverlays();
                var center = map.getCenter();
                var marker = new GMarker(center, {draggable: true});
                map.addOverlay(marker);

                GEvent.addListener(marker, "dragend", function() {
                    var point =marker.getPoint();
                    map.panTo(point);
                });
            });
        }
    }

    function showAddress(address){
        var map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());

        if(geoCoder){
            geoCoder.getLatLng(address, function(point){
                if(!point){
                    alert('Location Not Available');
                }else{
                    map.clearOverlays();
                    map.setCenter(point,15);
                    var marker = new GMarker(address, {draggable: true});  
                    map.addOverlay(marker);
                }
            })

        }
    }

    </script> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:39:46.470

`map.setCenter()`接受一个`GLatLng`对象，而不是一个`point`. 尝试`GLatLng`从您的`point`. 如果点包含纬度和经度字段，您可以执行以下操作：

```
map.setCenter(new GLatLng(point.latitude, point.longitude), 15); 
```

# javascript - 从对象即数据创建多个元素

> ID：10823785
> 
> 赞同：2
> 
> 时间：2012-05-30T20:28:18.940
> 
> 标签：javascript, d3.js

在尝试使用 D3.js 制作多个 svg 元素时，我使用了以下代码，该代码适用于这种数据格式：

```
// Data that works:
    var data= [
        {x:1, y:2, z:5}, 
        {x:3, y:5, z:10}, 
        {x:8, y:9, z:11}
    ]

// Make svg elements
    var svg = d3.select('body').selectAll('svg')
              .data(data)
              .enter().append('svg')
              .style('display', 'inline-block')
              .style('width', width)
              .style('height', height)
              .append('svg:svg') 
```

但是，当我的数据嵌套时，DOM 上不会出现 svg 元素：

```
var data = {
    x: {
        val1: 10,
        val2: 20
       },
    y: {
        val1: 15,
        val2: 14
       },
   z: {
        val1: 10,
        val2: 20
       }
} 
```

我想创建对应于数据的每个子对象（x、y 和 z）的 svg 元素。似乎它们在数据的第一个表示中自动为每个对象创建。给定第二种数据结构，我如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:35:28.857

该`.data()`函数需要一个普通数组，因此只有一个对象/关联数组是行不通的。看一下[`d3.entries`函数](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_entries)，它将把它转换成一个普通的数组。

# php - PHP：时间增量

> ID：10823787
> 
> 赞同：0
> 
> 时间：2012-05-30T20:28:33.597
> 
> 标签：php, arrays, time

在我的 PHP 代码中，我有一个`array1`2 列，即：

```
ID | startDate
1  | 2012-02-03 11:50
2  | 2012-02-03 11:50
3  | 2012-02-03 11:50
4  | 2012-02-03 11:50 
```

我需要转换`array1`为以下内容`array2`：

```
ID | startDate
1  | 2012-02-03 11:50:00
2  | 2012-02-03 11:50:30
3  | 2012-02-03 11:51:00
4  | 2012-02-03 11:51:30 
```

所以，我应该从第二个条目开始将时间增加 30 秒。正如您在示例中看到的那样，这个增量应该是累积传播的。我对PHP不是很流利。有人知道与时间相关的 PHP 函数可以用几行代码完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:30:07.817

我会看看[date()](http://php.net/manual/en/function.date.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)

```
$array2 = array();
$incr = 0;
foreach ($array1 as $value) {
    $time = strtotime($value);
    $array2[] = date('Y-m-d H:i:s', $time + $incr);
    $incr += 30; 
} 
```

# nhibernate - Fluent NHibernate - 不必要的更新

> ID：10823788
> 
> 赞同：9
> 
> 时间：2012-05-30T20:28:37.353
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

`Registration`在and之间的单向多对多关系中`Item`，其中 a`Registration`有一个`ISet<Item> ItemsPurchased`并且`Item`没有返回注册的引用（这不是探索对象图的有用方法），当我查看正在生成的 SQL 时，我看到

```
INSERT INTO Registrations_Items (RegistrationId, ItemId) VALUES (@p0, @p1);@p0 = 1 [Type: Int32 (0)], @p1 = 1 [Type: Int32 (0)]
UPDATE Items SET Price = @p0, Name = @p1, [...], ListIndex = @p5, EventId = @p6 WHERE ItemId = @p7 
```

传递给更新的参数是正确的，但是关于 Item 没有任何改变，因此不需要更新。

映射是通过使用此覆盖进行自动映射，`Registration`而没有覆盖`Item`. DB Schema 看起来完全正确。我删除了所有约定并再次测试并且行为仍然存在，因此不是我的任何映射约定都在这样做。

`mapping.HasManyToMany(e => e.ItemsPurchased).AsSet().Cascade.All().Not.Inverse();`

为什么 NHibernate 会打这个`UPDATE`电话，我能做些什么来阻止它？这并没有真正伤害任何东西，但它表明我做错了什么，所以我想弄清楚是什么。

**编辑：** 根据下面的评论，我创建了一个单元测试，它创建一个`Event`（`Item`必须属于一个`Event`），向其中添加两个`Items`，从会话中驱逐第一个并刷新会话，然后通过其 ID 获取第一个。

我注意到下面的 SELECT 项目行中有一些奇怪的东西（倒数第二个）

```
INSERT INTO Events (blah blah blah...)
select @@IDENTITY
INSERT INTO Items (Price, Name, StartDate, EndDate, ExternalID, ListIndex, EventId) VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);@p0 = 100.42 [Type: Decimal (0)], @p1 = 'Item 1' [Type: String (0)], @p2 = NULL [Type: DateTime (0)], @p3 = NULL [Type: DateTime (0)], @p4 = '123' [Type: String (0)], @p5 = 0 [Type: Int32 (0)], @p6 = 1 [Type: Int32 (0)]
select @@IDENTITY
SELECT blah blah blah FROM Events event0_ WHERE event0_.EventId=@p0;@p0 = 1 [Type: Int32 (0)]
SELECT itemsforsa0_.EventId as EventId1_, itemsforsa0_.ItemId as ItemId1_, itemsforsa0_.ListIndex as ListIndex1_, itemsforsa0_.ItemId as ItemId3_0_, itemsforsa0_.Price as Price3_0_, itemsforsa0_.Name as Name3_0_, itemsforsa0_.StartDate as StartDate3_0_, itemsforsa0_.EndDate as EndDate3_0_, itemsforsa0_.ExternalID as ExternalID3_0_, itemsforsa0_.ListIndex as ListIndex3_0_, itemsforsa0_.EventId as EventId3_0_ FROM Items itemsforsa0_ WHERE itemsforsa0_.EventId=@p0;@p0 = 1 [Type: Int32 (0)]
UPDATE Items SET Price = @p0, Name = @p1, StartDate = @p2, EndDate = @p3, ExternalID = @p4, ListIndex = @p5, EventId = @p6 WHERE ItemId = @p7;@p0 = 100.42000 [Type: Decimal (0)], @p1 = 'Item 1' [Type: String (0)], @p2 = NULL [Type: DateTime (0)], @p3 = NULL [Type: DateTime (0)], @p4 = '123' [Type: String (0)], @p5 = 0 [Type: Int32 (0)], @p6 = 1 [Type: Int32 (0)], @p7 = 1 [Type: Int32 (0)] 
```

该表已正确创建：

```
create table Items (
    ItemId INT IDENTITY NOT NULL,
   Price NUMERIC(19,5) not null,
   Name NVARCHAR(255) not null,
   StartDate DATETIME null,
   EndDate DATETIME null,
   ExternalID NVARCHAR(255) not null,
   ListIndex INT not null,
   EventId INT not null,
   primary key (ItemId)
) 
```

DateTimes 是故意可以为空的，因为项目可能不需要特定于日期（例如“早鸟注册”）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T20:43:11.633

这称为：**Phantom Updates**，它通常与您的对象的映射有关

这是主要原因：

想象一下我们有一个像这样的对象

```
public class Product
{
   public Guid Id { get; set; }
   public int ReorderLevel { get; set; }
   public decimal UnitPrice { get; set; }
} 
```

和一张地图：

```
public class ProductMap : ClassMap<Product>
{
   public ProductMap()
   {
      Not.LazyLoad();
      Id(x => x.Id).GeneratedBy.GuidComb();
      Map(x => x.ReorderLevel);
      Map(x => x.UnitPrice).Not.Nullable();
   }
} 
```

请注意，`ReorderLevel`将接受空值

如果您在不指定 a 的情况下保存此实体`ReorderLevel`，它将与一个`null`值一起保存，但是当您从数据库加载它时，由于`ReorderLevel`类型为`int`，将添加一个**0**，这将导致实体被标记为脏，因此它将导致更新

这类错误很难检测和跟踪，我建议您`Nullable<>`在数据库中确实需要 null 时使用类型

我通常完成此操作的方法是创建一个约定，如果它们被声明，它将自动将 my 设置`Value Types`为，否则该字段将被标记为`null``Nullable<>``NotNullable`

作为补充，这就是我的约定的样子：

```
 mapper.BeforeMapProperty += (ins, memb, cust) =>
    {
        var type = memb.LocalMember.GetPropertyOrFieldType();

        if (type.IsValueType)
        {
            if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
            {
                cust.Column(x => { x.NotNullable(notnull: false); });
            }
            else
            {
                cust.Column(x => { x.NotNullable(notnull: true); });
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:00:51.033

如上所述（如下？谁知道。寻找​​我在另一个答案上留下的评论），我注意到`CanGenerateDatabaseSchema`单元测试和`CanGetItem`单元测试之间的区别在于一个给我`DECIMAL (6,2)`，另一个给我`DECIMAL (19,0)`。

我摸索了更多，意识到这`CanGenerateDatabaseSchema`是使用我的“真实”配置（来自 Web 项目），而另一个测试正在使用我的“单元测试”配置。我的单元测试是针对 Sql Server CE 运行的......当我将单元测试更改为使用与我的真实数据库（Sql Server 2005）相同的配置时，幻象更新突然消失了。

因此，如果其他人遇到带有小数的意外幻像更新...请检查您是否使用的是 Sql Server CE。由于测试实际上通过了（说它失败的评论是不正确的，它没有失败，只是做额外的工作），我想我会接受它，尽管为什么 Sql CE 忽略我的配置是一个很好的问题，并且可能的 NH 或 FNH 错误。

# jquery - 使用 Jasmine 测试将样式表附加到头部的单击事件

> ID：10823790
> 
> 赞同：5
> 
> 时间：2012-05-30T20:28:42.200
> 
> 标签：jquery, jasmine, jasmine-jquery

jQuery

```
$(".theme-picker").click(function () {
      $('head').append('<link rel="stylesheet" href="" type="text/css" media="screen" id="theme_switcher"/>');
}); 
```

茉莉花

```
describe("style.switcher", function() {

beforeEach( function() {
    jasmine.getFixtures().set(
        '<head></head>' +
        '<div class="switcher">' +
          '<a class="theme-picker" title="theme-picker"></a>' +
          '<a class="folder-picker" title="folder-picker"></a>' +
          '<a class="font-picker" title="font-picker"></a>' +
          '<a class="color-picker" title="color-picker"></a>' +
        '</div>' );
  });

it("loads themes switcher link in head", function() {
  $('.theme-picker').trigger('click');
  expect( $('head') ).toContain("theme_switcher");
});
}); 
```

我是茉莉花的新手，目前测试失败。我不确定它是夹具、触发事件还是其他东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T05:31:51.803

我认为选择的答案（即使它是由 OP 提供的！）具有误导性和不正确性。我不确定为什么测试一段 JavaScript 对某些目标 HTML 的影响会是“糟糕的形式”。通常这是您可以用来验证方法是否有效的唯一输出。

用作示例的测试实际上并不能证明任何事情：当然点击已触发，您只是触发了它！你想要做的是证明点击之后的一些东西，例如 DOM 或其他数据结构的变化，这是原始的（IMO 正确的）本能。

您想要的是使用[异步测试](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)等待 DOM 中的更改然后放弃，类似于 Ruby 库[Capybara](https://github.com/jnicklas/capybara/)的工作方式：

```
it('loads themes switcher link in head', function() {
  $('.theme-picker').trigger('click');

  waitsFor(function() {
    return $('head').contains('theme_switcher');
  }, 'theme switcher never loaded', 10000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:24:08.613

研究表明，测试页面特定元素的形式很差。

我目前的测试（通过）如下：

```
describe("zen switcher", function() {

beforeEach( function() {
  loadFixtures('zen_switcher.html');
  spyOnEvent($('.theme-picker'), 'click');
});

it("clicks the .theme-picker", function() {
  $('.theme-picker').click();
  expect('click').toHaveBeenTriggeredOn($('.theme-picker'));
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:00:43.010

`theme_switcher`是您的链接的 ID。`toContain`需要一个选择器，即你应该写`toContain('#theme_switcher')`.

还要确保您在沙箱中追加并检查沙箱的头部，而不是您的文档。

**编辑：**

我假设你使用[jasmine-jquery](https://github.com/velesin/jasmine-jquery)

# javascript - 带有 IF 语句的 parseFloat

> ID：10823791
> 
> 赞同：1
> 
> 时间：2012-05-30T20:28:43.913
> 
> 标签：javascript, jquery

我试图让*IF*语句在变量中工作......

查看*//paypal 变量*下的文本...当我从**价格开始时：if(item.quantity="4")**

```
 product.find('.product-buy').click(function(e) {
                    //check if option is set
                    var option = $(this).attr('option') || '';
                    var item = {
                        group: product.parent().attr('id'),
                        id: product.attr('id'),
                        option: option || 'NA',
        LOOK HERE---->>>   quantity: parseInt(product.attr('minimum'+option),10) || 1,
                        minimum: parseInt(product.attr('minimum'+option),10) || 1,
                        //TEST
                         gap: parseFloat(product.attr('gap'+option)),
                        //TEST

                        //paypal variables
                        name: product.attr('name'+option),

    AND HERE---->>>   price: if(item.quantity="4")
                        {
                            parseFloat(product.attr('price'+option))
                            }
                            if(item.quantity="8")
                        {
                            parseFloat(product.attr('price2'+option))
                            }
                            if(item.quantity="12")
                        {
                            parseFloat(product.attr('price3'+option))
                            }

                        shipping: product.attr('shipping'+option),
                        number: product.attr('number'+option),
                        handling: product.attr('handling'+option)
                    };
                    addToCart(item,true);
                    e.preventDefault();
                }).fadeTo(0, 0.7).hover(hoverHandler(300, 1), hoverHandler(300, settings.buttonsOpacity));
              //set currency sign 
              if (settings.currencySign) {
                product.find('.product-currency').html(settings.currencySign);
              }
        }); 
```

**所以基本上，如果数量**属性等于 4 ，我希望 item.price 值解析“**价格**”属性......如果**数量**等于 8，则解析“价格2”属性......并**解析****“价格3 ” ' 如果****数量**等于 12，则为属性。

 ******如您所见，现在我尝试了：

```
 price: if(item.quantity="4")
                    {
                        parseFloat(product.attr('price'+option))
                        }
                        if(item.quantity="8")
                    {
                        parseFloat(product.attr('price2'+option))
                        }
                        if(item.quantity="12")
                    {
                        parseFloat(product.attr('price3'+option))
                        } 
```

但它不起作用。有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:31:15.983

您不能在 Javascript 中这样的表达式中嵌入 if 语句。语言不允许。

将值分配给变量，然后将`price`您正在创建的对象的属性分配给该变量。

```
var price = 0;
if(item.quantity==="4") {
    price = parseFloat(product.attr('price'+option))
}
else if ... {
} 
...

var item = {..., price: price, ...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:35:36.940

从其他评论来看，这是对的，但您也可以将所有内容放在一个自动执行的匿名函数中，该函数返回价格值：

```
price: (function(){
  var price;
  ...
  return price;
}()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:36:43.070

查看三元运算符。

```
price: item.quantity == "4" ? parseFloat(product.attr('price'+option)) : (
    item.quantity == "8" ? parseFloat(product.attr('price2'+option)) : (
        item.quantity == "12" ? parseFloat(product.attr('price3'+option))
    )
), 
```

（尽管这并不能解释当时`item.quantity`未定义的事实，正如关于 matt b 答案的评论中所指出的那样。起初简单地`quantity`在对象之外定义一个变量`item`可能是一个简单的解决方法。）******

# sharepoint - CALM 查询以获取任何年份的特定日期和月份

> ID：10823793
> 
> 赞同：2
> 
> 时间：2012-05-30T20:28:44.843
> 
> 标签：sharepoint

我想创建一个 CALM 查询来获取任何一年的日期和月份。例子：

在结果如下的列表中，我想获取所有日期等于 10 和月份等于 07 的日期：

*   1984 年 7 月 10 日
*   2001 年 1 月 2 日
*   1991 年 5 月 12 日
*   2007 年 7 月 10 日

因此，结果将是：

*   1984 年 7 月 10 日
*   2007 年 7 月 10 日

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:56:11.770

我认为您无法在任何一年中直接在 CAML 中执行此操作，因此您最终会列出每年的日期和月份范围 - 有点像怪物。

您可以在列表中添加额外的计算列吗？如果是这样，那么您可以添加

```
DayAndMonth = Day([YourDate]) & "-" & Month([YourDate]) 
```

然后是使用 CAML 或普通视图过滤器进行过滤的简单案例（假设美国日期格式）

```
DayAndMonth = "7-10" 
```

# jquery - 在一个页面上使用几个 Wordpress 上传表单

> ID：10823796
> 
> 赞同：0
> 
> 时间：2012-05-30T20:28:51.107
> 
> 标签：jquery, wordpress

我正在开发一个 Wordpress 插件。使用 Wordpress 的上传系统。基本上这是我的上传表单输入：

```
<input id="upload_image" type="text" value="" />
<input id="upload_image_button" type="button" value="Upload Image" /> 
```

其他必需的 js 和 css 文件也入队（包括）。最后，此 javascript 包含在页面中：

```
jQuery(document).ready(function() {

jQuery('#upload_image_button').click(function() {
 formfield = jQuery('#upload_image').attr('name');
 // show Wordpress' uploader modal box
 tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
 return false;
});

window.send_to_editor = function(html) {
 // this will execute automatically when a image uploaded and then clicked to 'insert to post' button
 imgurl = jQuery('img',html).attr('src');
 // put uploaded image's url to #upload_image
 jQuery('#upload_image').val(imgurl);
 tb_remove();
}

}); 
```

它工作得很好，没问题。但现在我想向页面添加一些上传表单。

```
<input class="upload_image" type="text" value="" />
<input class="upload_image_button" type="button" value="Upload Image" />

<input id="upload_image" type="text" value="" />
<input id="upload_image_button" type="button" value="Upload Image" />

<input id="upload_image" type="text" value="" />
<input id="upload_image_button" type="button" value="Upload Image" /> 
```

我用过`class="upload_image"`and`class="upload_image_button"`而不是`id="upload_image"`and`id="upload_image_button"`

现在我必须更新我的 javascript 代码。

现在有几个上传按钮。但这不起作用：

```
jQuery(document).ready(function() {

jQuery('.upload_image_button').click(function() {
 formfield = jQuery('.upload_image_button').prev().attr('name');
 tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
 return false;
});

window.send_to_editor = function(html) {
 imgurl = jQuery('img',html).attr('src');
 jQuery('.upload_image_button').prev().val(imgurl);
 tb_remove();
}
}); 
```

我应该如何更新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:52:23.750

```
jQuery(document).ready(function() {
var clicked = null;

jQuery('.upload_image_button').click(function() {
 clicked = jQuery(this);
 formfield = jQuery(this).prev('input').attr('name');
 tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
 return false;
});

window.send_to_editor = function(html) {
 imgurl = jQuery('img',html).attr('src');
 clicked.prev('input').val(imgurl);
 tb_remove();
}
}); 
```

# maven - maven cargo 集成测试 - 如何获取 cargo.hostname 或配置文件？

> ID：10823797
> 
> 赞同：0
> 
> 时间：2012-05-30T20:28:54.623
> 
> 标签：maven, integration-testing, cargo

我正在使用 Maven 2 w/ cargo 根据使用的 Maven 配置文件部署到不同的远程 tomcat。

我还有想要自动运行的集成测试（带有远程 Web 服务调用的 junit）。

问题：如何设置我的测试代码以能够读取 cargo.hostname （首选，基于 maven 配置文件更改的属性值）或激活的 maven 配置文件，以便它知道要针对哪个 url 运行测试？

具体来说，这是在 java 中的测试用例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:47:27.563

Either you define a fixed value for the cargo.hostname (not the best; but sometimes it workds well, cause using a fixed test server) or better define an appropriate property in Maven for it and put the information also into a properties file which will be filtered by the build process in the src/test/resources folder which can be read before the real integration tests.

# c# - 实体框架不区分大小写的 Oracle 数据提供程序

> ID：10823798
> 
> 赞同：1
> 
> 时间：2012-05-30T20:28:56.023
> 
> 标签：c#, linq, oracle, entity-framework

一段时间以来，我一直在寻找一种方法，通过 Entity Framework 对 Oracle 进行不区分大小写的搜索，但现在没有运气。

我找到了一些方法，但不觉得任何方法都可以满足我的要求。

一种解决方案是在数据库列和参数上都使用 .ToUpper，但我已经读过可能存在一些严重的速度问题，并且通过的 SQL 可能非常混乱。

另一个解决方案是将 oracle 数据库设置为 LINGUISTIC 比较，但是当我们投入生产时可能无法设置它。

当我尝试对 currentCulutreCaseInsentive 使用 .Equals() 重载时，我收到了一个错误。

有谁知道这方面的任何最佳做法？还是返回案例密集型搜索结果的好解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:26:31.567

正如 JotaBe 所建议的那样，我一直坚持两边的 ToUpper 命令

# graph - 在grappa（graphviz）中将图形对象转换为点语言

> ID：10823803
> 
> 赞同：0
> 
> 时间：2012-05-30T20:29:55.760
> 
> 标签：graph, graphviz

有什么方法可以从 grappa(graphviz) 库中的 Graph 对象中获取表示图形的点语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:05:44.557

此片段来自*DemoApplet1_2.java*：

```
StringWriter theGraph = new StringWriter();
graph.printGraph(theGraph);
theGraph.toString(); 
```

我认为这会给你你正在寻找的东西。

# javascript - 当两者都实现相同的目标时，编写此代码的首选方法是什么？

> ID：10823804
> 
> 赞同：0
> 
> 时间：2012-05-30T20:30:02.003
> 
> 标签：javascript, jquery

我在这里有一个函数，它循环通过两个包装器，然后循环通过它各自的子级并抛出一个数字以按数字顺序列出项目。我决定使用 each jQuery 函数，而不是使用 for 循环。这是我的问题：

哪种方式更好地实现这一目标，采用一种方式或另一种方式有哪些优点/缺点？使用for循环更好吗？

这个：

```
$(".articleContentWrapper").each( function () { 
    var i = 1;
    $(this).find(".howToStepNumber").each(function () {
        var b = i++;
        $(this).html(b);
    });
}); 
```

或这个：

```
$(".articleContentWrapper").each( function () { 
    var i = 1;
    $(this).find(".howToStepNumber").each(function () {
        $(this).html(i++);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:32:15.277

这个怎么样？

```
$(".articleContentWrapper").each( function () { 
    $(this).find(".howToStepNumber").each(function (i, e) {
        $(this).html(i + 1);
    });
}); 
```

该`.each()`方法已经提供了一个索引持有者，因此您不需要自己创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:34:50.110

```
var wrapper = $(".articleContentWrapper");
$(".howToStepNumber", wrapper).text( function (i) { 
    return ( i % (wrapper.length + 1) ) + 1;
});​ 
```

[http://jsfiddle.net/kVUBu/1/](http://jsfiddle.net/kVUBu/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:39:33.900

尝试如下，

```
$(".howToStepNumber", $(".articleContentWrapper")).html( function () {
    return $(this).index() + 1;
}); 
```

[**演示**](http://jsfiddle.net/rJAgJ/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T20:34:46.467

我可能会把它写成：

```
$(".articleContentWrapper").each( function () { 
    $(".howToStepNumber", this).each(function (i) {
        $(this).html(i);  // or i+1 depending on what you want
    });
}); 
```

find 也确实没有必要，并且会使语句更长。

# android - 用于相机预览的Android单元测试？

> ID：10823805
> 
> 赞同：17
> 
> 时间：2012-05-30T20:30:02.780
> 
> 标签：android, unit-testing, opencv, camera, mocking

我尝试对我的相机预览图像进行单元测试，是否可以在测试期间将静态图像设置为“相机图像”，或者我应该尝试实现自己的模拟对象？

我正在寻找类似的东西：

```
myCameraMock.setImage(image);
myCameraDispatcher.setCamera(myCameraMock); 
```

（我正在使用 opencv 相机）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-07T15:05:16.410

一般来说，我会创建一个包装器/适配器，它只公开这种外部依赖项所需的功能。除了能够更轻松地适应外部依赖项的变化之外，您还可以在测试中模拟适配器，并让它完成依赖项本身无法轻松完成的事情。对于您的示例，您可以在测试中返回一个预定义的图像，并且如果您的代码在出现故障时表现正常（通常很难用真实的东西触发），它也更容易测试。

# android - overridePendingTransition 在 Android 中不起作用

> ID：10823809
> 
> 赞同：4
> 
> 时间：2012-05-30T20:30:24.403
> 
> 标签：android, animation

以下代码对我不起作用。

```
finish();
overridePendingTransition(R.anim.slide_up,R.anim.slide_up);
startActivity(intent);
overridePendingTransition(R.anim.slide_up,R.anim.slide_up); 
```

动画的 XML 是

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromXDelta="50%p" android:toXDelta="-50"
        android:duration="@android:integer/config_mediumAnimTime"/>
<alpha android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

我搜索了网络，查看了 Stack Overflow 中的所有线程，但无法解决此问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-30T21:15:16.503

我通过以下方式解决了问题。

我已删除

```
overridePendingTransition(R.anim.slide_up,R.anim.slide_up); 
```

从上面的代码中并将其放入`onPause()`，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T13:24:16.073

如果您激活 USB 调试模式，它可以禁用转场效果。进入开发者选项（激活调试模式的地方），找到用户界面部分，检查动画的过渡比例是否禁用了动画。如果是这样，请将其设置为 0.5 倍。完毕！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T15:09:14.940

有时动画在手机上被禁用。要检查，请转到设置 > 显示 > 动画 > 允许“所有动画”。如果它被禁用，这将允许 overridePendingTransition 正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T20:33:05.160

在完成（）之前尝试 startActivity

# opengl - glsl 双精度顶点缓冲区

> ID：10823811
> 
> 赞同：3
> 
> 时间：2012-05-30T20:30:32.447
> 
> 标签：opengl, glsl, opengl-4

如果我创建一个双精度顶点缓冲区，例如：

```
GLuint vertBuffer, spanBuffer, spanCount, patchSize, program; // already setup
glUseProgram (program);
glEnableClientState (GL_VERTEX_ARRAY);
glBindBuffer (GL_ARRAY_BUFFER, vertBuffer);
glVertexPointer (3, GL_DOUBLE, 0, 0);
glPatchParameteri (GL_PATCH_VERTICES, patchSize);
glBindBuffer (GL_ELEMENT_ARRAY_BUFFER, spanBuffer);
glDrawElements (GL_PATCHES,  spanCount * patchSize, GL_UNSIGNED_INT, 0); 
```

如何访问顶点着色器中的双精度数据？我应该能够做到这一点吗？

```
// GLSL VERTEX SHADER
#version 410

in dvec4 gl_Vertex;

void main ()
{
<snip> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:46:34.010

你没有。至少，不是那样。

如果您想使用 OpenGL 4.x+ 将双精度值读入着色器的能力，那么您*必须*使用通用顶点属性。您不能再使用旧的固定`gl_Vertex`功能`glVertexPointer`。您必须使用[`glVertexAttribLPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer), 和适当的通用顶点属性索引。

# mysql - 如何集成 Joda-Time 和 Hibernate 4/MySQL 5？

> ID：10823812
> 
> 赞同：4
> 
> 时间：2012-05-30T20:30:40.217
> 
> 标签：mysql, hibernate, jodatime, usertype

一段时间以来，我一直想搬到 Joda-Time 来申请我们的申请。有几个挂断...

1-[这里](http://www.joda.org/joda-time-hibernate/)的官方 Joda-Time 集成对于 Hibernate 4.x 应用程序似乎已经过时了

2-[这里](http://usertype.sourceforge.net/)建议的替代方案似乎有零文档/入门信息。

3-我找不到很好的参考资料，说明我的数据库（MySql 5.5.11）中的哪些类型可以很好地映射到 Joda-Time 等效项。

有人知道如何处理这些吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:22:26.413

我使用您链接到的 Jadira UserType 库取得了一些成功。在您的休眠映射配置中，您可以通过将类指定为“类型”来将 Joda`DateTime`属性映射到 MySQL DATETIME 或 TIMESTAMP 列。`org.jadira.usertype.dateandtime.joda.PersistentDateTime`例如：

```
<class name="DateTestEntity" table="DATE_TEST">
    <id name="id" column="ID">
        <generator class="native" />
    </id>

    ...

    <property name="dateOfBirth" type="org.jadira.usertype.dateandtime.joda.PersistentDateTime" column="DATE_OF_BIRTH" />
</class> 
```

我不确定其他 MySQL 和 Joda-Time 类型之间的映射，但[这些 Javadocs](http://usertype.sourceforge.net/apidocs/org/jadira/usertype/dateandtime/joda/package-summary.html)列出了可在映射配置中使用的类。

这就是您开始所需要做的一切。**但是**，关于时区，您需要考虑一些事项：

*   我链接的 Javadoc 中列出的许多映射类都有“本地”等价物；例如`PersistentLocalDateTime`对于 `PersistentDateTime`.

*   UserType 在考虑时区时使用两个属性：`jadira.usertype.databaseZone`& `jadira.usertype.javaZone`。（看看[这个问题](https://stackoverflow.com/questions/10542507/usertype-hibernate-jodatime-where-to-set-usertype-global-properties)或[这个问题](https://stackoverflow.com/questions/10238016/usertype-hibernate-jodamoney-error-persistentmoneyamount-requires-currency/10239179#10239179)，看看它们可以在哪里设置。）我不知道它们之间的区别是什么，但 databaseZone 似乎是最重要的一个，因为[这个问题](https://stackoverflow.com/questions/10075385/joda-time-datetime-incorrectly-stores-in-database)似乎表明了这一点。

在我正在处理的项目中，我们希望以 UTC（即 GMT）存储所有日期，并且仅在向用户显示它们时将它们更改为特定时区。到目前为止，我们对以下设置没有任何问题：

*   MySQL 服务器（以及我们开发机器上的所有 MySQL 实例）已配置为使用 UTC 时区
*   我们在 Hibernate 配置文件中使用`PersistentDateTime`而不是`PersistentLocalDateTime`
*   `jadira.usertype.databaseZone`&`jadira.usertype.javaZone`都设置为 UTC

如果您的应用程序需要处理国际日期，那么我建议您也这样做，或者尝试上述设置，直到您对应用程序的行为正确感到满意为止。

# c - 2008 年和 2010 年之间的 Visual C 优化差异

> ID：10823839
> 
> 赞同：0
> 
> 时间：2012-05-30T20:32:36.453
> 
> 标签：c, visual-studio, visual-c++, optimization, compiler-optimization

我正在使用visual c 2008 和visual c 2010 构建一个相当复杂的算法。当我在VC 2010 中启用优化（特别是/Og）进行编译时，该算法会产生错误的输出。

在 VC 2008（有或没有优化）或在没有优化的 VC2010 中构建完全相同的代码会产生正确运行的算法。

我很难在启用优化的情况下调试代码，并且已经坚持了很长一段时间。有谁知道不同版本的优化有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:53:34.793

这可能是编译器错误，但您应该尝试 /Wall 以启用所有警告并修复所有警告。还有运行时检查，如 /RTCu（未初始化的本地使用检查），您可以使用它来隔离问题。还要检查代码中的所有类型转换，以确保它们是合法的。

# windows - MJPEGStream 显示流 Aforge.Video.dll

> ID：10823848
> 
> 赞同：0
> 
> 时间：2012-05-30T20:33:39.217
> 
> 标签：windows, vb.net, ip-camera, aforge

我正在尝试使用 Aforge 库流式传输 IPCAM D'Link 但我没有成功：我想将视频流显示到 PB 控件中。我的代码：

```
Imports AForge.Video 
Public Class Form1
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Try
            Dim stream As New MJPEGStream("http://190.6.198.3/video/mjpg.cgi")
            stream.Login() = "admin"
            stream.Password() = ""
            stream.Start()
        Catch ex As System.Net.WebException
            MsgBox(ex.Message.ToString)
        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:23:38.673

你有点混合 MJPEGStream 和控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T16:56:17.027

```
Dim mjpegSource As New MJPEGStream("rtsp://192.0.0.64:554/cam[CHANNEL]/mjpeg")
        mjpegSource.Login = "admin"
        mjpegSource.Password = ""
    VideoSourcePlayer1.VideoSource = mjpegSource 
```

**错误**是无法识别 url 前缀这是我修复的方法，但`vlc`可以流式传输

# c# - Visual Studio 2010 MEF 与 MPF？

> ID：10823851
> 
> 赞同：6
> 
> 时间：2012-05-30T20:34:13.070
> 
> 标签：c#, visual-studio, mef, vs-extensibility, mpf

我正在考虑在 Visual sudio 2010 中添加一种新的编程语言，但我对采用的最佳方法有点困惑。

我查看了 MPF 并找到了一些关于如何进行语法突出显示、链接外部解析器等的示例，它看起来非常简单。

然后我读到了一个叫做 MEF 的东西，以及它是如何成为 Visual Studio 的新可扩展模型的。我已经玩过它，并且通过遵循一些示例，我的语法突出显示工作。现在，有了 MEF，我不知道如何在我的解析器中链接我的语言，就像 MPF 使用 ParseSource 等一样。我正在使用 ANTLR 顺便说一句。

MEF 是否仅用于编辑器的视觉方面，例如突出显示、装饰等……或者是否可以/建议使用它来实现语言服务？

据我所知，MEF 是新的推荐方法，但创建新语言似乎比使用常规 MPF 更难。强积金仍然是一个好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-16T11:23:24.437

**MEF（托管可扩展性框架）**是 .NET 中用于扩展程序（如 Visual Studio）的通用编程方法。VS 包/扩展可以使用较新的 VS-MEF 类（契约）而不是 MPF 类。MEF 被用`[Export]`属性修饰的类识别。一般来说，您继承一个特定的类（如可着色项）并将其导出到 Visual Studio，然后 Visual Studio 会查找 MEF 包中的所有导出并导入它们。

**MPF（托管包框架）**就像一个围绕非托管/本机 VS 扩展模型的旧 COM 包装器的类系统。您通过获取服务和实现 MPF 类的方法以编程方式扩展 Visual Studio（MPF 类反过来实现 VS 的 COM 包装器的类 COM 接口。例如`LanguageService`实现`IVsLanguageInfo`和一些其他接口，但它只是简单地“收集”这些方法然后您可以在`LanguageService`实现类中覆盖该接口）。

如果你想实现一个完整的编程语言，你将结合 MPF 和 MEF。您将 MEF 用于编辑器部分，如标记化（语法高亮需要）、大纲、大括号匹配等，而 MPF 用于其他 VS 内容，如新工具窗口、属性页等。

除了 MPF，您还可以使用较旧的 COM 包装器，但 MPF 类已经为您完成了一些 COM 工作，如果您选择 COM 包装器，您将不得不处理这些工作。

您也可以使用 MPF 实现标记器等，但我尝试过，发现它比 MEF 更不直观。如果你问我，它比 MEF 更难，并且需要更多的脑损伤，但我在 MEF 上还没有像 MPF 那样走得那么远。

这让我自己有点困惑，因为我注意到 MSDN 混淆了 MEF 和 MPF 的文章。您需要非常仔细地查看您进入 MSDN 的哪个小节，您可以轻松地从 MEF 类别意外切换到 MPF。但是，MSDN 在一些关于扩展 VS 的一般文章中提示您什么是什么，例如：http: [//msdn.microsoft.com/en-us/library/cc138569.aspx](http://msdn.microsoft.com/en-us/library/cc138569.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T21:44:34.177

我目前正在专门使用 MEF（在 VS2013 中）实现语言服务。

除了语法高亮（你可以用 来做`ITagger<ClassificationTag>`）和其他一些内置的特定用途的 MEF 接口（例如，用于选项页面和各种类型的智能感知）之外，你可以根据需要来执行诸如背景解析之类的事情通常`IVsTextViewCreationListener`在打开文件时执行并执行操作；或者，您可以使用包的`Initialize`方法作为入口点在后台遍历项目层次结构。

Intellisense 功能等通常会要求您响应某个命令（或监控击键以了解何时弹出完成列表框，例如）；您可以通过实现和处理相关命令来处理这个问题（您可以通过在创建文本视图时`IOleCommandTarget`调用手动挂钩命令处理程序）。`AddCommandFilter``IVsTextView`

到目前为止，我还没有遇到任何我不能通过 MEF 做的事情（除了那些根本不能做的事情）；我从来没有真正研究过强积金，因为我不需要它。

（请注意，归根结底，代码往往类似于 MEF 管道、VS SDK 接口和帮助程序类以及 EnvDTE goop 的汤。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-16T23:20:39.530

将 MEF 用于通过 MEF 公开的功能。其他功能将根据具体情况进行处理（如果您在实现特定功能时遇到问题，请询问具体问题）。我唯一仍然使用 MPF 的是项目系统（MPF for Projects，或[MPFProj](https://github.com/tunnelvisionlabs/MPFProj10)）。要处理后台解析，我建议查看我的`BackgroundParser`实现（MIT 许可证）。它工作得很好，虽然回想起来我希望我使用 TPL 并`ReParseImpl`返回 a`Task`而不是同步执行。

*   [背景解析器.cs](https://github.com/NoahRic/MarkdownMode/blob/master/BackgroundParser.cs)
*   [Commit`0d3e55e`](https://github.com/NoahRic/MarkdownMode/commit/0d3e55eb0a96542c630ef6557796ceb4f0bf1379)`BackgroundParser` ，展示了一些必要的辅助类的介绍和使用。

# objective-c - Objective-C Lion 全屏使用所有显示器

> ID：10823853
> 
> 赞同：2
> 
> 时间：2012-05-30T20:34:19.473
> 
> 标签：objective-c, osx-lion, fullscreen

我们在墙上有 4 台显示器用于绘图。希望将它们全部用于全屏模式。现在，如果我这样做，它只使用一个。只是想看看是否有可能创建一个应用程序，让我可以使用所有 4 个，就像每个监视器的简单 uiwebview 一样。

应该提到这一点.. 寻找如何执行此操作的简单代码示例或在何处获得答案的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:37:49.203

是的，有可能。

标准 Lion 全屏模式允许一个“主窗口”，其大小可以占据整个主屏幕，以及任意数量的“辅助窗口”（检查面板等），这些窗口不会以任何方式自动调整大小。

进入 Xcode，创建一个简单的项目，然后编辑 xib。对于现有窗口，转到 Attributes Inspector 并确保将 Full Screen 设置为“Primary Window”。现在在对象浏览器中，将三个面板拖到应用程序中。仔细检查它们并确保每个都有样式的“实用程序面板”，全屏的“辅助窗口”，以及 Exposé 的“推断行为”或“瞬态行为”。现在，当第一个窗口进入全屏模式时（例如，当您获得适当的通知或 NSWindowDelegate 方法时），调整其他三个窗口的大小并移动以接管其他三个屏幕。

[这一切都在 10.7 Core Library 的“Mac App Programming Guide”的实现全屏体验](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)部分中得到了很好的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T00:22:15.147

如果您只是想在每个屏幕上放置一个 web 视图，它可能更容易使用`-[NSView enterFullScreenMode:withOptions:]`。这不是 Lion 的新全屏模式，而是较早的技术。它在应用程序是否在单独的空间等方面具有不同的行为。

# mysql - 创建 MySQL 用户时使用 % 作为主机

> ID：10823854
> 
> 赞同：105
> 
> 时间：2012-05-30T20:34:21.027
> 
> 标签：mysql

我的 MySQL 数据库需要两个用户：appuser 和 support。
一位应用程序开发人员坚持要我为这些用户创建四个帐户：

```
appuser@'%'
appuser@'localhost'
support@'%'
support@'localhost' 
```

对于我的生活，我无法弄清楚为什么他认为我们需要这个。不会使用通配符作为主机来处理“本地主机”吗？

有任何想法吗？

（这里使用 MySQL 5.5）

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-05-30T20:35:32.947

`localhost`在 MySQL 中是特殊的，它意味着通过 UNIX 套接字（或 Windows 上的命名管道，我相信）而不是 TCP/IP 套接字的连接。用作`%`主机不包括`localhost`，因此需要明确指定它。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-06-13T16:27:36.480

正如@nos 在对该问题当前接受的答案的评论中指出的那样，接受的答案是不正确的。

是的，当通过套接字连接而不是标准 TCP/IP 连接进行连接时，使用`%`和用于用户帐户主机之间存在差异。`localhost`

主机值`%`不包括`localhost`套接字，因此如果要使用该方法进行连接，则必须指定。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-03-06T18:49:33.160

让我们测试一下。

以超级用户身份连接，然后：

```
SHOW VARIABLES LIKE "%version%"; 
+-------------------------+------------------------------+ 
| Variable_name           | Value                        | 
+-------------------------+------------------------------+ 
| version                 | 10.0.23-MariaDB-0+deb8u1-log | 
```

进而

```
USE mysql; 
```

**设置**

创建一个`foo`带有密码的用户`bar`进行测试：

```
CREATE USER foo@'%' IDENTIFIED BY 'bar'; FLUSH PRIVILEGES; 
```

**连接**

要连接到 Unix 域套接字（即由文件系统条目`/var/run/mysqld/mysqld.sock`或类似名称命名的 I/O 管道），请在命令行上运行它（使用该`--protocol`选项确保双重确定）

```
mysql -pbar -ufoo
mysql -pbar -ufoo --protocol=SOCKET 
```

人们期望上述匹配“用户来自本地主机”，但肯定不是“用户来自 127.0.0.1”。

要从“127.0.0.1”连接到服务器，请在命令行上运行

```
mysql -pbar -ufoo --bind-address=127.0.0.1 --protocol=TCP 
```

如果您省略`--protocol=TCP`，该`mysql`命令仍将尝试使用 Unix 域套接字。你也可以说：

```
mysql -pbar -ufoo --bind-address=127.0.0.1 --host=127.0.0.1 
```

一行中的两次连接尝试：

```
export MYSQL_PWD=bar; \
mysql -ufoo --protocol=SOCKET --execute="SELECT 1"; \
mysql -ufoo --bind-address=127.0.0.1 --host=127.0.0.1 --execute="SELECT 1" 
```

（密码在环境中设置，以便传递给`mysql`进程）

**有疑问时的验证**

真正检查连接是通过 TCP/IP 套接字还是 Unix 域套接字

1.  通过检查输出获取mysql客户端进程的PID`ps faux`
2.  运行`lsof -n -p<yourpid>`。

你会看到类似的东西：

```
mysql [PID] quux 3u IPv4 [code] 0t0 TCP 127.0.0.1:[port]->127.0.0.1:mysql (ESTABLISHED) 
```

或者

```
mysql [PID] quux 3u unix [code] 0t0 [code] socket 
```

**所以：**

# 案例 0：Host = '10.10.10.10'（空测试）

```
update user set host='10.10.10.10' where user='foo'; flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：失败

# 案例 1：主机 = '%'

```
update user set host='%' where user='foo'; flush privileges; 
```

*   使用套接字连接：OK
*   从 127.0.0.1 连接：好的

# 案例 2：主机 = 'localhost'

```
update user set host='localhost' where user='foo';flush privileges; 
```

**行为各不相同**，这显然取决于[`skip-name-resolve`](https://mariadb.com/kb/en/library/server-system-variables/#skip_name_resolve). 如果设置，将导致`localhost`根据日志忽略行。在错误日志中可以看到以下内容：*“在 --skip-name-resolve 模式中忽略了'user' entry 'root@localhost'。”* . 这意味着没有通过 Unix 域套接字进行连接。但这在经验上并非如此。`localhost`现在仅表示 Unix 域套接字，不再匹配 127.0.0.1。

`skip-name-resolve`已关闭：

*   使用套接字连接：OK
*   从 127.0.0.1 连接：好的

`skip-name-resolve`开启：

*   使用套接字连接：OK
*   从 127.0.0.1 连接：失败

# 案例 3：主机 = '127.0.0.1'

```
update user set host='127.0.0.1' where user='foo';flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：好的

# 案例4：主机=''

```
update user set host='' where user='foo';flush privileges; 
```

*   使用套接字连接：OK
*   从 127.0.0.1 连接：好的

（根据[MySQL 5.7: 6.2.4 Access Control, Stage 1: Connection Verification](https://dev.mysql.com/doc/refman/5.7/en/connection-access.html)，*空字符串 '' 也表示“任何主机”，但排序在 '%' 之后。*）

# 案例5：Host = '192.168.0.1'（额外测试）

（'192.168.0.1' 是我机器的 IP 地址之一，根据您的情况适当更改）

```
update user set host='192.168.0.1' where user='foo';flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：失败

但

*   使用连接`mysql -pbar -ufoo -h192.168.0.1`：OK (!)

后者是因为这实际上是来自的 TCP 连接`192.168.0.1`，如下所示`lsof`：

```
TCP 192.168.0.1:37059->192.168.0.1:mysql (ESTABLISHED) 
```

# 边缘案例 A：主机 = '0.0.0.0'

```
update user set host='0.0.0.0' where user='foo';flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：失败

# 边缘案例 B：主机 = '255.255.255.255'

```
update user set host='255.255.255.255' where user='foo';flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：失败

# 边缘案例 C：主机 = '127.0.0.2'

（127.0.0.2 是完全有效的环回地址，等同于[RFC6890](https://www.rfc-editor.org/rfc/rfc6890)中定义的 127.0.0.1 ）

```
update user set host='127.0.0.2' where user='foo';flush privileges; 
```

*   使用套接字连接：FAILURE
*   从 127.0.0.1 连接：失败

有趣的是：

*   `mysql -pbar -ufoo -h127.0.0.2`连接自`127.0.0.1`失败
*   `mysql -pbar -ufoo -h127.0.0.2 --bind-address=127.0.0.2`没问题

# 清理

```
delete from user where user='foo';flush privileges; 
```

# 附录

要查看`mysql.user`表中的实际内容（权限表之一），请使用：

```
SELECT SUBSTR(password,1,6) as password, user, host,
Super_priv AS su,
Grant_priv as gr,
CONCAT(Select_priv, Lock_tables_priv) AS selock,
CONCAT(Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv) AS modif,
CONCAT(References_priv, Index_priv, Alter_priv) AS ria,
CONCAT(Create_tmp_table_priv, Create_view_priv, Show_view_priv) AS views,
CONCAT(Create_routine_priv, Alter_routine_priv, Execute_priv, Event_priv, Trigger_priv) AS funcs,
CONCAT(Repl_slave_priv, Repl_client_priv) AS replic,
CONCAT(Shutdown_priv, Process_priv, File_priv, Show_db_priv, Reload_priv, Create_user_priv) AS admin
FROM user ORDER BY user, host; 
```

这给出了：

```
+----------+----------+-----------+----+----+--------+-------+-----+-------+-------+--------+--------+
    | password | user     | host      | su | gr | selock | modif | ria | views | funcs | replic | admin  |
    +----------+----------+-----------+----+----+--------+-------+-----+-------+-------+--------+--------+
    | *E8D46   | foo      |           | N  | N  | NN     | NNNNN | NNN | NNN   | NNNNN | NN     | NNNNNN | 
```

同样对于表`mysql.db`：

```
SELECT host,db,user, 
       Grant_priv as gr,
       CONCAT(Select_priv, Lock_tables_priv) AS selock, 
       CONCAT(Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv) AS modif, 
       CONCAT(References_priv, Index_priv, Alter_priv) AS ria, 
       CONCAT(Create_tmp_table_priv, Create_view_priv, Show_view_priv) AS views, 
       CONCAT(Create_routine_priv, Alter_routine_priv, Execute_priv) AS funcs 
       FROM db ORDER BY user, db, host; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-05-13T08:19:27.373

如果`user@'%'`要从 localhost 连接，请使用`mysql -h192.168.0.1 -uuser -p`.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-04T12:05:02.890

百分号表示：任何主机，包括远程和本地连接。

localhost 只允许本地连接。

（所以首先，如果您不需要远程连接到您的数据库，您可以立即摆脱 appuser@'%' 用户）

所以，是的，它们是重叠的，但是......

...设置两种类型的帐户是有原因的，这在 mysql 文档中进行了解释：http: [//dev.mysql.com/doc/refman/5.7/en/adding-users.html](http://dev.mysql.com/doc/refman/5.7/en/adding-users.html)。

如果您的本地主机上有一个匿名用户，您可以通过以下方式发现：

```
select Host from mysql.user where User='' and Host='localhost'; 
```

如果您只是创建用户 appuser@'%'（而不是 appuser@'localhost'），那么当 appuser mysql 用户从本地主机连接时，**将使用匿名用户帐户**（它优先于您的 appuser@ '%' 用户）。

对此的解决方法是（正如人们可以猜到的）创建 appuser@'localhost' （这比本地主机匿名用户更具体，如果您的 appuser 从 localhost 连接，则将使用它）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-01-19T04:50:26.207

将提供与迄今为止提供的答案略有不同的答案。

如果您的 users 表中有来自 localhost 的匿名用户的行，`''@'localhost'`那么这将被视为比使用通配符 host 的用户更具体`'user'@'%'`。这就是为什么还需要提供`'user'@'localhost'`.

[您可以在本页](http://dev.mysql.com/doc/refman/5.5/en/connection-access.html)底部看到更详细的解释。

# perl - df输出问题

> ID：10823855
> 
> 赞同：3
> 
> 时间：2012-05-30T20:34:23.107
> 
> 标签：perl, shell

```
$df_ret = `ssh -q rajesh 'df -hP'`;

print "The value is $df_ret";   

if ($df_ret =~ /\/boot/) 
{
    print "The value is $df_ret";
} 
```

预期结果：

```
/dev/sda1               126931     39530     80848  33% /boot 
```

但是，它即将全部`df -k`输出。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:42:54.570

您的正则表达式与整个输出匹配为一个字符串。您可能希望先将其分成几行，然后再匹配每一行：

```
my @df_ret = `ssh -q rajesh 'df -hP'`;

foreach my $line (@df_ret) {
    if ($line =~ m! /boot$!)
    {
        print "The value is $line";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:07:52.077

只需使用外壳：

```
ssh -q rajesh 'df -hP' | grep /boot 
```

# .htaccess - .htaccess 重定向 301 让？在网址之后

> ID：10823856
> 
> 赞同：0
> 
> 时间：2012-05-30T20:34:25.010
> 
> 标签：.htaccess, url, redirect

我的 .htaccess 文件有问题。我有一些我想用 301 重定向的旧 URL。但这给我带来了一个问题。

旧网址：

```
www.domain.com/page/1/uvod/en/ 
```

新网址：

```
www.domain.com/en/ 
```

这是我的重定向：

```
Redirect 301 /page/1/uvod/en/ http://www.domena.sk/en/ 
```

但是当我将旧 URL 插入浏览器时，它会显示：

```
http://www.domain.com/en/?id=1&name=uvod&lang=en 
```

# facebook - facebook内的锚文本？

> ID：10823864
> 
> 赞同：0
> 
> 时间：2012-05-30T20:35:06.810
> 
> 标签：facebook, hyperlink, status

我刚刚决定为`stream_publish`我的用户的时间线构建一个应用程序。除了一个小的外观错误外，一切都按预期工作，在 facebook 中我不确定如何实现锚文本。比如视频应用如何发帖：

```
the users name followed by "has watched ####." 
```

或者

```
<a href="#">Anthony Rojas</a> has watched <a href="#"> video</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:40:57.000

我这样做：

```
function publish_wall($link='',$message='',$caption='',$description='',$picture=''){
        try{                    
            $ch = curl_init('https://graph.facebook.com/'.$this->Session->read("gid").'/feed?access_token='.$this->Session->read("access_token"));
            curl_setopt ($ch, CURLOPT_POST, 1);
            curl_setopt ($ch, CURLOPT_POSTFIELDS, "link=$link&message=$message&caption=$caption&description=$description&picture=$picture");
            curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
            $res = curl_exec ($ch);
            curl_close ($ch);

        }catch(Exception $efeed){
        }
    } 
```

祝你好运！

# mysql - 子查询“有点慢”如何改善？

> ID：10823869
> 
> 赞同：0
> 
> 时间：2012-05-30T20:35:36.787
> 
> 标签：mysql, performance, join, subquery

我已经使用 MySQL 工作了一段时间，现在我遇到了一些子查询的问题，需要 60 秒才能执行！:( 我应该改变它，因为它看起来“有点慢”，而且我不是 SQL 专家，所以我想我会问是否有更聪明的方法来做这件事。这是当前的查询：

```
SELECT VAR_ID, VAR_REF, DET_VAR_NOMB, DET_VAR_IMG, DET_VAR_MEDIDA, DET_VAR_DETALLE, SEN_FECH, SEN_VALOR
FROM variable, detalle_variable, senal
WHERE equipo_EQO_ID =6
AND detalle_variable_DET_VAR_ID = DET_VAR_ID
AND variable_VAR_ID = VAR_ID
AND SEN_ID
IN (
    SELECT MAX( SEN_ID ) 
    FROM senal
    GROUP BY variable_VAR_ID
) 
```

查询结果是：（这就是我想要选择的全部）

VAR_ID VAR_REF DET_VAR_NOMB DET_VAR_IMG DET_VAR_MEDIDA DET_VAR_DETALLE SEN_FECH SEN_VALOR

8 101 vsth ../../img/foto/variable/play_blue.png 某事 2012-05-30 03:14:17 16

表格如下所示：

```
-- -----------------------------------------------------
-- Table `pgssgc_stap2`.`detalle_variable`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pgssgc_stap2`.`detalle_variable` ;

CREATE  TABLE IF NOT EXISTS `pgssgc_stap2`.`detalle_variable` (
  `DET_VAR_ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `DET_VAR_NOMB` VARCHAR(45) NOT NULL ,
  `DET_VAR_MEDIDA` VARCHAR(45) NULL DEFAULT NULL ,
  `DET_VAR_DETALLE` VARCHAR(255) NULL DEFAULT NULL ,
  `DET_VAR_IMG` VARCHAR(255) NULL DEFAULT NULL ,
  PRIMARY KEY (`DET_VAR_ID`) )
ENGINE = InnoDB
AUTO_INCREMENT = 101
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

-- -----------------------------------------------------
-- Table `pgssgc_stap2`.`variable`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pgssgc_stap2`.`variable` ;

CREATE  TABLE IF NOT EXISTS `pgssgc_stap2`.`variable` (
  `VAR_ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `VAR_REF` VARCHAR(45) NOT NULL ,
  `detalle_variable_DET_VAR_ID` INT(10) UNSIGNED NOT NULL ,
  `equipo_EQO_ID` INT(10) UNSIGNED NOT NULL ,
  PRIMARY KEY (`VAR_ID`) ,
  INDEX `fk_variable_detalle_variable1` (`detalle_variable_DET_VAR_ID` ASC) ,
  INDEX `fk_variable_equipo1` (`equipo_EQO_ID` ASC) ,
  CONSTRAINT `fk_variable_detalle_variable1`
    FOREIGN KEY (`detalle_variable_DET_VAR_ID` )
    REFERENCES `pgssgc_stap2`.`detalle_variable` (`DET_VAR_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_variable_equipo1`
    FOREIGN KEY (`equipo_EQO_ID` )
    REFERENCES `pgssgc_stap2`.`equipo` (`EQO_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci;

-- -----------------------------------------------------
-- Table `pgssgc_stap2`.`senal`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pgssgc_stap2`.`senal` ;

CREATE  TABLE IF NOT EXISTS `pgssgc_stap2`.`senal` (
  `SEN_ID` INT(11) NOT NULL AUTO_INCREMENT ,
  `variable_VAR_ID` INT(10) UNSIGNED NOT NULL ,
  `SEN_FECH` DATETIME NULL DEFAULT NULL ,
  `SEN_VALOR` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`SEN_ID`) ,
  INDEX `fk_senal_variable1` (`variable_VAR_ID` ASC) ,
  CONSTRAINT `fk_senal_variable1`
    FOREIGN KEY (`variable_VAR_ID` )
    REFERENCES `pgssgc_stap2`.`variable` (`VAR_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 2086
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_general_ci; 
```

感谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:15:19.693

假设您对子查询有问题。

确保表格的`variable_VAR_ID`列`senal`是`INDEXED`。

# graphics - 如何在gnuplot中制作水平盒须图

> ID：10823873
> 
> 赞同：2
> 
> 时间：2012-05-30T20:36:10.110
> 
> 标签：graphics, gnuplot, boxplot, candlestick-chart

如何在 gnuplot 中制作水平盒须图？与此类似：

![水平盒须图](../Images/fef7bc88a38388012c70f6e204af508e.png)

Gnuplot 可以很容易地用于生成带有“candlesticks”和“whiskerbars”关键字的垂直盒须图，但我还没有找到任何通过 gnuplot online 生成的水平烛台/盒须水平图的示例.

gnuplot 生成的垂直图示例：

[垂直盒须图示例 http://www.cise.ufl.edu/~dts/cop3530/proj02/candlesticks.6.png](http://www.cise.ufl.edu/~dts/cop3530/proj02/candlesticks.6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:26:31.257

Gnuplot 通常不能很好地切换方向......例如，您不能绘制行而不是列，并且很难使直方图（或任何其他类型的图）变为水平而不是垂直。

然而，人们已经制作了水平直方图，您也许可以修改**[在此站点上](http://gnuplot-tricks.blogspot.com/2009/10/turning-of-histogram.html)**找到的代码。

# vba - 使用 Word ContentControl DatePicker 如何获取值？

> ID：10823874
> 
> 赞同：3
> 
> 时间：2012-05-30T20:36:21.413
> 
> 标签：vba, ms-word, word-2010

我有一个 ContentControl，它是 Word 文档中的 DatePicker。我正在尝试使用它在后面的代码中填充一些值，但我似乎无法从中获得价值。

```
Private Sub Document_ContentControlOnExit(ByVal ContentControl As ContentControl, _
    Cancel As Boolean) 
```

ContentControl 上的所有属性都不接近 .Value 或 .Text。我见过其他内容控件使用：

```
ContentControl.DropdownListEntries(1).Text
ContentControl.DropdownListEntries(1).Value 
```

正如 DatePicker 所期望的那样，这不起作用，但它是 ContentControl 的唯一属性，它返回任何接近我想要的值的值。

如何从 DatePicker ContentControl 中获取日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:54:45.823

这是你正在尝试的吗？

```
Private Sub Document_ContentControlOnExit(ByVal ContentControl _
As ContentControl, Cancel As Boolean)
    MsgBox ContentControl.Range.Text
End Sub 
```

**快照**

![在此处输入图像描述](../Images/5279b6b40fa42d258635236aa7c6e612.png)

# python - 在 Python 中展平任意嵌套列表的最快方法是什么？

> ID：10823877
> 
> 赞同：59
> 
> 时间：2012-05-30T20:36:42.457
> 
> 标签：python, algorithm, optimization

> **可能的重复：在 Python 中展平**
> [浅表列表 在 Python 中](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)
> [展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

**编辑：**问题不*在于如何*去做——这已在其他[问题中](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists)[讨论过](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)——问题是，哪种方法*最快*？

 *我以前找到过解决方案，但我想知道最快的解决方案是展平包含其他任意长度列表的列表。

例如：

```
[1, 2, [3, 4, [5],[]], [6]] 
```

会成为：

```
[1,2,3,4,5,6] 
```

可以有无限多个级别。一些列表对象可以是字符串，它们不能在输出列表中被展平为它们的连续字符。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-30T21:18:01.510

这是一种对字符串友好的递归方法：

```
nests = [1, 2, [3, 4, [5],['hi']], [6, [[[7, 'hello']]]]]

def flatten(container):
    for i in container:
        if isinstance(i, (list,tuple)):
            for j in flatten(i):
                yield j
        else:
            yield i

print list(flatten(nests)) 
```

返回：

```
[1, 2, 3, 4, 5, 'hi', 6, 7, 'hello'] 
```

请注意，这并不能保证速度或开销使用，但说明了一个递归解决方案，希望会有所帮助。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-30T20:52:33.547

它不必*是*递归的。事实上，由于函数调用涉及的开销，迭代解决方案通常更快。这是我不久前写的一个迭代版本：

```
def flatten(items, seqtypes=(list, tuple)):
    for i, x in enumerate(items):
        while i < len(items) and isinstance(items[i], seqtypes):
            items[i:i+1] = items[i]
    return items 
```

尚未测试此特定实现的性能，但由于所有切片分配，它可能不是那么好，这最终可能会移动大量内存。不过，不要假设它必须是递归的，或者以这种方式编写它更简单。

这种实现确实具有“就地”展平列表而不是返回副本的优点，递归解决方案总是这样做的。当内存紧张时，这可能很有用。如果你想要一个扁平化的副本，只需传入一个你想要扁平化的列表的浅拷贝：

```
flatten(mylist)                # flattens existing list
newlist = flatten(mylist[:])   # makes a flattened copy 
```

此外，此算法不受 Python 递归限制的限制，因为它不是递归的。但是，我敢肯定，这实际上永远不会发挥作用。

`try`2021 年编辑：在我看来，使用/处理对列表末尾的检查可能会更好，`except`因为它只会发生一次，并且将测试从主循环中取出可以提供性能优势。那看起来像：

```
def flatten(items, seqtypes=(list, tuple)):
    try:
        for i, x in enumerate(items):
            while isinstance(items[i], seqtypes):    
                items[i:i+1] = items[i]
    except IndexError:
        pass
    return items 
```

通过一些进一步的调整来使用`x`返回的 by`enumerate`而不是访问`items[i]`这么多，你会得到这个，它比顶部的原始版本略快或显着快，具体取决于列表的大小和结构。

```
def flatten(items, seqtypes=(list, tuple)):
    try:
        for i, x in enumerate(items):
            while isinstance(x, seqtypes):    
                items[i:i+1] = x
                x = items[i]
    except IndexError:
        pass
    return items 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-30T21:24:07.077

这个函数应该能够在不使用任何递归的情况下快速扁平化嵌套的、可迭代的容器：

```
import collections

def flatten(iterable):
    iterator = iter(iterable)
    array, stack = collections.deque(), collections.deque()
    while True:
        try:
            value = next(iterator)
        except StopIteration:
            if not stack:
                return tuple(array)
            iterator = stack.pop()
        else:
            if not isinstance(value, str) \
               and isinstance(value, collections.Iterable):
                stack.append(iterator)
                iterator = iter(value)
            else:
                array.append(value) 
```

大约五年后，我对此事的看法发生了变化，这可能更好用：

```
def main():
    data = [1, 2, [3, 4, [5], []], [6]]
    print(list(flatten(data)))

def flatten(iterable):
    iterator, sentinel, stack = iter(iterable), object(), []
    while True:
        value = next(iterator, sentinel)
        if value is sentinel:
            if not stack:
                break
            iterator = stack.pop()
        elif isinstance(value, str):
            yield value
        else:
            try:
                new_iterator = iter(value)
            except TypeError:
                yield value
            else:
                stack.append(iterator)
                iterator = new_iterator

if __name__ == '__main__':
    main() 
```*

# c++ - XCode 上的 size_t

> ID：10823878
> 
> 赞同：3
> 
> 时间：2012-05-30T20:36:42.943
> 
> 标签：c++, xcode, visual-c++, gcc, stl

在 XCode 上似乎我需要在 Visual C++ 上使用 std::size_t 而不是 size_t 。但这很痛苦，因为我真的不想在我的代码中`#include <cstddef>`更改每个`size_t`to `std::size_t`......在我的 Windows 代码中`size_t`无需包含任何其他文件即可正常工作。

有没有办法让我现有的代码在 XCode 中工作（可能通过 .pch 文件？）或者 GCC/MSVC++ 在这方面根本不同，我的代码需要使用`std::size_t`才能跨平台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T21:24:20.783

根据 C++03 标准，17.4.1.2.4：

> 除了第 18 到 27 节中的说明外，每个头文件 cname 的内容应与相应头文件 name.h 的内容相同，如 ISO/IEC 9899:1990 编程语言 C（第 7 条）或 ISO/IEC 中规定的:1990 编程语言—C 修正案 1：C 完整性，（第 7 条），视情况而定，如同包含在内。然而，在 C++ 标准库中，声明和定义（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.5) 内。

换句话说，通过选择使用`<cstddef>`而不是`<stddef.h>`，您明确要求类型 size_t 在命名空间 std 内。

所以，这里有选择：

1.  `<stddef.h>`正如 Jesse Good 所建议的那样`size_t`，在顶级命名空间中使用。

2.  使用`<cstddef>`和使用`std::size_t`。

3.  按照 cnicutar 的建议，使用`<cstddef>`和使用 using 声明来拉`size_t`入顶级命名空间。

当然，您可以依赖这样一个事实，即一个编译器/库/平台的一个特定版本可以让您摆脱它，或者为每个平台编写不同的代码，或者用 autoconf 包装整个事情，或者编写代码生成器或 sed - 基于预处理器，或其他什么......但为什么呢？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T20:38:11.357

也许在靠近顶部的某个地方这么说？

```
using std::size_t; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T21:23:49.273

使用`#include <stddef.h>`.

`#include <stddef.h>`那么，和有什么区别`#include <cstddef>`呢？

`<cstddef>`是一个 C++ 头文件，保证定义`std`命名空间中的所有符号，也*可以*定义全局命名空间中的东西。

`<stddef.h>`是一个 C 头文件，保证定义全局命名空间中的所有符号，*也*可以定义`std`命名空间中的东西。

因此，正如您在 Visual Studio 上所说，`size_t`可以使用它，因为它`size_t`为您注入全局命名空间（可能已经包含“stddef.h”）。如果您希望它适用于任何编译器，请包含`stddef.h`.

（不过，作为一个纯粹的 C++ 爱好者，我个人更喜欢`std::size_t`）。

# ios5 - Rubymotion Base64

> ID：10823880
> 
> 赞同：2
> 
> 时间：2012-05-30T20:36:49.450
> 
> 标签：ios5, rubymotion

我正在寻找一种使用 base64 对字符串进行编码的简单方法。在 ruby​​ 运动中，我不能只使用 Ruby 的 Base64encode，因为我无法要求它。所以我想我可以使用 Cocoa 的内置功能。但是 Cocoa 似乎没有 Base64encode 功能。我在 NSData 上找到了一些类别，但不知道如何在 ruby​​ 运动项目中使用它们。我应该为此创建一个静态库吗？

我有一种感觉，我在寻找错误的方向，必须有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T21:45:58.003

如果您查看`Base64.encode64`方法的来源，您会发现它只是使用该`pack`方法。所以你可以像这样编码/解码（注意你需要把你想要编码的东西放在一个数组中）：

```
["my string"].pack("m")
# => "bXkgc3RyaW5n\n"

"bXkgc3RyaW5n\n".unpack("m").first
# => "my string" 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html#method-i-encode64](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html#method-i-encode64)

# ruby-on-rails - Rails3 + OpenID == mmmmmm; Rails3 + JQGrid == mmmmmmm; Rails3 + OpenID + JQGrid == BZZZT

> ID：10823883
> 
> 赞同：0
> 
> 时间：2012-05-30T20:36:53.120
> 
> 标签：ruby-on-rails, jqgrid, openid, ruby-openid

尝试将[JQuery 小部件](http://www.jquery.org/)（尤其是[JQGrid](http://www.trirand.com/blog/)）与 Rails 3 应用程序一起使用。我正在使用 ruby​​-openid 与 Google 进行身份验证，并使用了[Seth Ladd 的好方法](http://blog.sethladd.com/2010/09/ruby-rails-openid-and-google.html)来使其正常工作。

它的作用——用于网页表单的页面视图和帖子。

但是，每当 JQGrid 执行 POST 以更新服务器上的数据时，都会发生两件事：

1.  即使用户的浏览器已经通过登录 Google 进行了身份验证，POST 对服务器来说似乎是来自未经身份验证的，并被重定向到 OpenID 身份验证舞蹈。除了

2.  一旦服务器发回应该启动重定向和身份验证的 401，整个辣酱玉米饼馅就停止了。通常（例如，来自表单提交的 POST 请求），浏览器会看到 401，读取随附的“在此处进行身份验证”信息，然后跳舞，返回会话设置，然后循环继续。但是从 JQuery/JQGrid ......不是那么多。

有任何想法吗？我确信我在这里遗漏了一些明显的东西，但是我有一个拉姆斯菲尔德的“未知未知数”，我不知道我遗漏了什么，更不用说如何解决它了！看起来这应该是一个长期解决的问题，嗯？

我可能会与 XSS 防御发生冲突，但如果是这样，我不知道除了*** *-canning 我们已经在 OpenID 上进行的重大投资（包括已经注册和必须提供/记住密码的用户）之外的其他方法 - - 哎呀！）。

提前感谢我的专家同事。

（Rails 3.0.7、ruby-openid 2.1.8、JQGrid 3.5.3、JQuery 1.3.2，使用 Google 作为 OP，这样用户就不必输入他们的身份 URL。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:16:59.267

好的，进一步的测试证实这是一个包装，女士们和先生们。

当然，我必须弄清楚如何让 Javascript 与protect_from_forgery 一起工作，但事实证明这真的很容易，您只需获取真实性令牌并将其包含在所有Ajax 请求中，详见[http://henrik.nyh。 se/2008/05/rails-authenticity-token-with-jquery](http://henrik.nyh.se/2008/05/rails-authenticity-token-with-jquery)。非常巧妙，因为这种技术会自动将令牌构建到所有内容中，因此您不必寻找所有 POST 请求。

奥列格，谢谢你的帮助。我会听取你的建议。

还要感谢[OpenID 代码](http://lists.openid.net/mailman/listinfo/openid-code)邮件列表上的 Sante，他给了我指向 protect_from_forgery 标头内容的指针。

# c# - Infragistics：不使用设计器将 EventHandle 附加到 UltraTreeView

> ID：10823885
> 
> 赞同：1
> 
> 时间：2012-05-30T20:37:34.940
> 
> 标签：c#, infragistics, ultratree

我正在动态创建一个 UltraTree。我需要将点击事件附加到节点。当我尝试以与使用设计器创建的其他控件相同的方式执行此操作时，附件语句出现错误：

“ruleTree_AfterSelect”没有重载匹配委托“Infragistics.Win.UltraWinTree.AfterNodeSelectEventHandler”

这是我的处理程序名称和附件声明：

```
 private void ruleTree_AfterSelect(object sender, Infragistics.Win.UltraWinTree.NodeEventArgs e)

 //Attaching to handle to tree event
 tree.AfterSelect += new Infragistics.Win.UltraWinTree.AfterNodeSelectEventHandler(ruleTree_AfterSelect); 
```

为什么 Visual Studio 允许自己以这种方式附加处理程序但在通过代码执行此操作时会引发错误的任何想法？

通过设计模式添加事件时，Visual Studio 是否运行文件或后台进程来处理此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:51:32.817

不，没有隐藏代码来处理添加事件。
您可以在**InitializeComponent()方法中自行检查**

但是你的问题是不同的。**UltraTree.AfterSelect**事件
的正确签名是

 **```
private void ruleTree_AfterSelect(object sender, 
             Infragistics.Win.UltraWinTree.SelectEventArgs e)
{
.....
} 
```**

# c - 使用过多内存的运行时错误？

> ID：10823886
> 
> 赞同：0
> 
> 时间：2012-05-30T20:37:38.243
> 
> 标签：c

```
#include <stdio.h>

int main()
{
    int X = 200;
    float Y = 1500;
    printf("Enter your initial Balance and the Amount to be Withdrawn. Note the Values should lie between 0 and 2000");
    scanf("%d", "%e", &X, &Y);
    if ((0 < X < 2000) && (0 < Y < 2000)) {
        if ((X < Y) && (X % 5 == 0)) {
            Y = Y - X;
            Y = Y - 0.5;
        } else {
            printf("%f", Y);
        }
        printf("%f", Y);
    } else {
        printf("The Input is Wrong");
    }
    return 0;
} 
```

代码基本上要求一些数字 X。从 Y 中减去它，从 Y 中减去额外的 0.5。我们必须给出 Y。代码给出运行时错误，这可能是由于使用的内存超出了允许的范围。任何人都可以就如何减少内存使用或查看程序中是否存在错误提供任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:41:09.263

```
 scanf("%d,%e", &X, &Y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:05:13.807

（除了双格式字符串的scanf()，已经被别人处理过了）

```
if ((0 < X < 2000) && (0 < Y < 2000)) { 
```

这种方式不起作用的是C。您可以尝试：

```
if (X > 0 && X < 2000 && Y > 0 && Y < 2000) { 
```

另请注意，您不需要额外的括号。另一条线也一样

```
if ((X < Y) && (X % 5 == 0)) { 
```

这可能是：

```
if (X < Y && X % 5 == 0) { 
```

有时，优先规则并没有那么糟糕……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:16:32.597

我不知道这是不是作业...

...但这个例子可能有助于澄清一些事情：

```
#include <stdio.h>

int
main(int args, char *argv[])
{
    int new_balance, old_balance;
    float withdrawal;

    /* Get input */
    printf("Enter your initial Balance and the Amount to be Withdrawn.\n");
    printf("Note the values should lie between 0 and 2000\n");
    while (scanf("%d %f", &old_balance, &withdrawal) != 2) {
      printf ("please enter two valid floating point numbers\n");
    }

    /* Validate input */
    if ( (old_balance < 0.0) || (old_balance > 2000.0) ) {
      printf ("error: balance(%d): must be between 0.0 and 2000.0\n",
        old_balance);
      return 1;
    }
    if ( (withdrawal < 0.0) || (withdrawal > 2000.0) ) {
      printf ("error: withdrawal(%f): must be between 0.0 and 2000.0\n",
        withdrawal);
      return 1;
    }

    /* Compute balance */
    new_balance = old_balance - withdrawal;

    /* Print results */
    printf ("Withdrawal: %f; old balance: %d, new balance: %d.\n",
      withdrawal, old_balance, new_balance);

    return 0;
} 
```

我完全不确定“0.5”的要求是什么，所以我把它省略了。我的猜测是你想“四舍五入到最接近的美元”。在这种情况下，“％”绝对*不是*这样做的方法。

原始程序可能已经编译——但几乎可以肯定它不是“正确的”。

据我所知，原始程序应该可以在任何地方运行——我没有看到任何可能导致“内存不足”的情况。

'希望这会有所帮助..至少有点......

# ruby - 为什么我需要'active_support/core_ext'？

> ID：10823890
> 
> 赞同：2
> 
> 时间：2012-05-30T20:38:06.247
> 
> 标签：ruby, require

在非 Rails 项目中，我可以`activesupport`独立安装。当我需要它很酷的猴子补丁功能时：

```
require 'active_support/core_ext' 
```

但它是如何工作的？它是否自动需要[active_support/core_ext](https://github.com/rails/rails/tree/20768176292cbcb883ab152b4aa9ed8c664771cd/activesupport/lib/active_support/core_ext)中的所有文件？怎么`Ruby`知道他们在这里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:49:37.560

这就是（以我的平台为例）：

```
> 宝石哪一个 active_support
/usr/lib/ruby/gems/1.8/gems/activesupport-2.3.12/lib/active_support.rb
> cd /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.12/lib/active_support
> 猫 core_ext.rb

```

```
filenames = Dir["#{File.dirname(__FILE__)}/core_ext/*.rb"].sort.map do |path|
  File.basename(path, '.rb')
end

filenames.each { |filename| require "active_support/core_ext/#{filename}" } 
```

因此，您会看到`core_ext.rb`该文件将“自动加载”目录`*.rb`中的每个文件`core_ext`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:48:06.800

查找[名为`core_ext.rb`](https://github.com/rails/rails/blob/20768176292cbcb883ab152b4aa9ed8c664771cd/activesupport/lib/active_support/core_ext.rb).

但是没有`require`不能加载目录。

# javascript - CSS 将容器拉伸到最宽的隐藏子元素的宽度

> ID：10823891
> 
> 赞同：4
> 
> 时间：2012-05-30T20:38:08.873
> 
> 标签：javascript, html, css, containers

我有一个非常简单的带有黑色边框的无序列表示例，其中一个子元素隐藏：http: [//jsfiddle.net/spryno724/Sm9Lx/1/](http://jsfiddle.net/spryno724/Sm9Lx/1/)。请注意隐藏的子元素比可见元素宽得多，但容器仅缩放到可见子元素的宽度。

CSS中有没有办法自动将此容器的宽度缩放到其最宽子元素的宽度，即使该元素被隐藏？

我知道这可以通过 JavaScript 实现，但如果可能的话，我想避免脚本攻击并直接使用 CSS。

另外，我想避免设置特定的宽度，因为在我的实际应用程序中，我的容器将包含未知宽度的视觉对象。

感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:41:08.610

使用`visibility: hidden;`而不是`display: none;`隐藏`li`

*   `visibility: hidden;`保留元素空间

*   `display: none;`就好像元素不存在于标记中一样

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T20:42:57.293

怎么样：

```
<li style="visibility: hidden; height: 0;">This is not the first list element, ok?</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:41:41.243

而不是`display: none`你可以使用`opacity: 0`

# flash - 我在哪里可以找到 AS1 参考？

> ID：10823893
> 
> 赞同：2
> 
> 时间：2012-05-30T20:38:12.197
> 
> 标签：flash, actionscript, reference, adobe, actionscript-1

我需要维护一些 AS1 代码，但找不到任何语言参考。有谁知道我在哪里可以找到类似于 AS2 和 AS3 的：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/class-summary.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/class-summary.html)

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:37:37.760

ActionScript 2.0 实际上只是对 ActionScript 的增强。它在编译时添加了类型检查和使用新关键字（例如`class`and ）的基于类的语法`extends`，以及为变量和函数指定访问修饰符的能力。

这些构造除外，我相信 ActionScript 2.0 文档应该适用。

# mysql - 如何组合这 2 个 MySQL 查询？

> ID：10823896
> 
> 赞同：1
> 
> 时间：2012-05-30T20:38:27.577
> 
> 标签：mysql, query-optimization

我正在开发一个爱好计划，并认为有更好的方法来做到这一点。我在这里有这个查询：

```
SELECT username
FROM users 
```

它返回所有可能的匹配项。然后我运行这个查询：

```
SELECT username
FROM alreadyDone
WHERE Name='test' 
```

这让我得到了我们已经完成的比赛。然后，我只需将这些全部添加到 Java 中的数组列表中，然后通过集合接口删除相同的列表。

我认为有一种方法可以通过 MySQL 完成这一切，并且玩弄各种连接等，我不知道该走哪条路。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:42:22.833

如果我理解正确，您正在尝试查找那些不在“已经完成”表中的用户进行“测试”。

```
SELECT u.username
    FROM users u
    WHERE NOT EXISTS(SELECT 1
                         FROM alreadyDone ad
                         WHERE ad.username = u.username
                             AND Name = 'test'); 
```

或者，你也可以这样写：

```
SELECT u.username
    FROM users u
        LEFT JOIN alreadyDone ad
            ON u.username = ad.username
                AND Name = 'test'
    WHERE ad.username IS NULL; 
```

# php - PHP SESSION（使用 myPajamas 登录脚本）在更改网络时不起作用

> ID：10823897
> 
> 赞同：0
> 
> 时间：2012-05-30T20:38:35.377
> 
> 标签：php, networking, cross-browser, session-cookies, sessionid

我在网上到处查看，SESSION 变量的细微差别需要我澄清一下。

我有一个设置会话变量的网站（我假设它还设置了一个 cookie 来定义会话 id 是什么？不确定它是如何工作的），并且一切正常。我在通过手机漫游（使用 wifi）时发现，每当手机切换 wifi 网络时，浏览器似乎无法再访问会话，直到该窗口/选项卡关闭并重新打开。

根据我所阅读的以下内容，请为我澄清：

1.  当浏览器窗口关闭时，会话 cookie 被破坏，因此当我重新打开它时，会创建一个新的 cookie，并附加到新的会话 id。从而允许会话再次正常工作？

2.  如果网络切换，服务器会创建一个新的会话 id，但是由于浏览器窗口没有关闭，旧的会话 cookie 没有被销毁，浏览器会尝试操作一个过期的会话 id（旧的会话 cookie包含）？不知道这是否属实，我已经阅读了很多页，但我找不到任何具体的内容。但这是我得到的印象。我已经看到很多警告`session_regenerate_id()`，我对使用它感到非常紧张......

任何有关此问题的详细信息或解决方法的帮助都将非常有帮助。我已经黔驴技穷了...

***更新***

我正在使用 mypajamas 脚本来方便登录。会话正常创建。`$_SERVER['REMOTE_ADDR']`但是，在查看代码后，我发现了一个为and`$_SERVER['HTTP_USER_AGENT']`值设置会话变量的地方。然后交叉引用它们以确保它是同一 IP 上同一浏览器上的同一用户。这样做是为了防止多源攻击（使劫持不太可能）。问题是当使用移动浏览器或动态IP时，IP肯定会改变，并且身份验证失败。

我不敢相信我无法弄清楚这一点，我花了几个小时寻找有关会话 ID 更改的问题。

希望它可以帮助将来遇到类似问题的人。衷心感谢所有阅读这篇文章的人，您在评论中的指导绝对帮助我解决了这个问题。

***编辑代码***

*类.mypajamas.php*

*从：*

```
function check_ipau() { // user visits again... but is it really him? check values set above (by get_session())
    if( $_SESSION['auth'.$this->_unique_id]['ip'] == $_SERVER['REMOTE_ADDR']
    &&  $_SESSION['auth'.$this->_unique_id]['ua'] == $_SERVER['HTTP_USER_AGENT']) {
        // session data is correct -> user did not "change" ip-address or user agent (aka; hijack is unlikely)
        return true;

    }
    else {
        return false;
    }
} 
```

*到：*

```
function check_ipau() { // user visits again... but is it really him? check values set above (by get_session())
    /*if(   $_SESSION['auth'.$this->_unique_id]['ip'] == $_SERVER['REMOTE_ADDR']
    &&  $_SESSION['auth'.$this->_unique_id]['ua'] == $_SERVER['HTTP_USER_AGENT']) {
        // session data is correct -> user did not "change" ip-address or user agent (aka; hijack is unlikely)
        */
        return true;
        /*
    }
    else {
        return false;
    }*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:58:27.817

首先，会话变量实际上是 cookie。

1) 会话 cookie 有一个生命周期。如果您的代码未指定生命周期，则该值默认为您的 php 配置中的任何值。做一个 phpinfo(); 并查找**session.cookie_lifetime**，这是一个以秒为单位的值。值 0 表示 cookie 在浏览器窗口关闭时过期。

2) 如果您的代码使用样板 PHP 会话处理，那么问题不太可能与用户的 IP 地址更改有关。PHP会话不存储客户端IP，只要您连接的应用程序在两个网络上具有相同的域名/公共IP，那么您应该没问题。（请参阅[PHP Session Cookies failed with users changed IP](https://stackoverflow.com/questions/2296571/php-session-cookies-fail-with-users-changing-ip)）

可能会有一些额外的会话处理来存储客户端的 IP，但这必须是自定义编码的，而不是基于任何内置功能。

*（根据您的编辑，事实确实如此。）*

如果您在网络 A 和网络 B 上访问相同的 url，那么会话没有理由更改/受网络交换机影响。如果你不得不关闭浏览器窗口，并且发现你的会话数据不见了，那么问题就在于将会话cookie的生命周期设置为0以外的值。将以下行放在session_start（）之前：

```
session_set_cookie_params(X); 
```

其中 X 是以秒为单位的值，在该值之后 cookie 将过期。*请记住，如果您在 session_start() 的每个*实例之前调用上述代码；那么cookie实际上将永远不会过期，因为每个页面都会提前一小时重置该计数器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T20:57:58.347

会话仅在服务器端。不幸的是，如果您来自不同的网络地址，会话将无效。

如果您想保留会话值，一个好的做法是创建自己的 cookie，这样您就知道某人曾经经过身份验证/拥有有效的会话。然后，您首先检查是否设置了会话值，如果没有检查该 cookie。如果该 cookie 存在并且具有良好的值，您可以将会话值重新设置为 cookie 的值（或者像在身份验证时那样设置会话）。如果没有会话且没有 cookie，则假定会话不存在。

# string - 从 QStringList 中删除注释字符

> ID：10823901
> 
> 赞同：0
> 
> 时间：2012-05-30T20:39:10.790
> 
> 标签：string, list, parsing, comments, qstringlist

我正在`QStringList`为注释行解析 a 的值，其中注释行以“#”字符开头。我将如何从我向用户显示的内容中删除“#”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:06:35.303

我只是想出了如何做我想做的事情：

```
columnHeaderList << inputLines.remove("#").split("\t"); 
```

# css - facebook 的 Wordpress 预览问题

> ID：10823907
> 
> 赞同：0
> 
> 时间：2012-05-30T20:39:36.567
> 
> 标签：css, facebook, wordpress, preview

我只想首先说，在编程方面我是一个完全的菜鸟，并且没有太多的 HTML 或 CSS 经验。我知道这个地方更高级一些，主要面向程序员和开发人员，但我来这里的唯一原因是因为我在其他任何论坛都找不到答案。我不知道是否可以通过在 wordpress 中编辑 CSS 文件来解决我的问题，但我希望你们中的一些人可以插话并让我知道。简而言之，我遇到的问题是，当我将博客链接发布到 facebook 时，facebook 不会生成正确的数据或显示任何图像预览。这是我在 wordpress 论坛上提交的帖子：

> > 我刚刚有了一个新网站，并在他们的服务器上设置了一个新的 wordpress 博客。花了一段时间，但大部分时间一切都已启动并运行。但是，我很难在链接到 Facebook 时显示我的任何帖子预览。我的网站是[http://www.limonphotography.com/blog](http://www.limonphotography.com/blog)。当我通过 facebook 的调试器运行相同的链接时，有时会出现以下错误：
> > 
> > 无法遵循重定向路径：使用来自 .http://www.limonphotography.com/blog/ 的数据，因为重定向路径出现错误。循环重定向路径：检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）。无法遵循重定向：URL 请求了 HTTP 重定向，但无法遵循。
> > 
> > 我的 wordpress URL 是：http://limonphotography.com/blog，但我将站点 URL 指向：http://www.limonphotography.com/blog，因为它更容易。原始博客由我托管的网站托管，因此原始 WordPress 位于[http://mukul12031.c4.cmdwebsites.com/blog](http://mukul12031.c4.cmdwebsites.com/blog)。谁能告诉我为什么我会收到这些错误，或者为什么预览没有出现？

再次，如果这是一个太简单的问题，我深表歉意，但我自己无法弄清楚。如果有人可以帮助我，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:02:53.033

我的建议是尝试在您的 og:url 标签中添加一个斜杠（例如：“ [http://mysite.com/](http://mysite.com/) ”）。听起来很愚蠢，我知道，[但它对某些人有用](https://stackoverflow.com/questions/8229656/how-to-fix-facebook-circular-redirect#9901553)

关于这个问题的另一个线程已经产生了以下信息，由 Lizzbizz 在[这个 Wordpress 支持线程](http://wordpress.org/support/topic/how-to-find-the-cause-of-circular-redirect-path-error-and-fb-sharing-problem)上提供：

> “据我所知，这原来是 GoDaddy 托管服务的问题。他们对托管我的域的服务器应用了 302 重定向过滤器，这导致了问题。在我给他们发了几次电子邮件后，他们终于修复了试试谷歌搜索“GoDaddy 302 重定向问题”，你会看到很多其他帖子！
> 
> 如果您没有遇到 302 问题，但在 Facebook 上共享链接时无法显示图像或描述，您可以使用 WP 插件之一来处理 Open Graph 数据，例如[Simple Facebook Connect](http://wordpress.org/extend/plugins/simple-facebook-connect/)或[Facebook Open Graph Meta](http://wordpress.org/extend/plugins/facebook-open-graph-meta/) in WordPress，应该可以解决它！”

# solr - Solr 复制主从 - ReplicateAfter 属性

> ID：10823909
> 
> 赞同：1
> 
> 时间：2012-05-30T20:39:40.307
> 
> 标签：solr, replication

我是 Solr 中的主/从配置的新手，我试图了解 solr 的主从配置中的 replicateAfter 属性的含义。我最初认为在提交/优化之后，主服务器会将更新发送给所有从服务器。但似乎并非如此。

这是复制的请求处理程序配置。

```
<requestHandler name="/replication" class="solr.ReplicationHandler" >
  <lst name="master">
    <str name="enable">${enable.master:false}</str>
    <str name="replicateAfter">commit</str>
    <str name="replicateAfter">startup</str>
     <str name="replicateAfter">optimize</str>
    <str name="confFiles">schema.xml,stopwords.txt</str>
 </lst>
 <lst name="slave">
    <str name="enable">${enable.slave:false}</str>
    <str name="masterUrl">http://${MASTER_CORE_URL}/${solr.master.core.name}/replication</str>
    <str name="pollInterval">${POLL_TIME}</str>
 </lst> 
```

从站似乎在轮询间隔后获得更新。但我的要求是在向主服务器提交/优化后立即更新从服务器的索引。Master 可以在提交/优化时与从属通信吗？还是从从站到主站的通信只有一种方式？有人可以帮忙回答这些问题吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:34:48.963

所以，这就是答案。ReplicateAfter 告诉 Master 何时在 slave 请求更新时提供新版本的索引（感谢 Raticulin 的回答！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T23:08:30.740

从站不断轮询主站，主站不发起与从站的任何通信。您应该将 ${POLL_TIME} 足够低，以便在 master 上提交后复制会非常快地发生。

# javascript - jQuery - 如何为异步函数注册回调？

> ID：10823911
> 
> 赞同：3
> 
> 时间：2012-05-30T20:39:49.173
> 
> 标签：javascript, jquery

我是一个 jQuery 新手。我有一个核心 js 文件，我的用户看不到它。我里面有以下函数，它发出一个服务器请求 -

```
function checkMsgs(t1,t2) {

// poll the url
    // return the results 

    $.get("http://www.mySite.com/web/test.php", {
        "t1" : t1,
            "t2" : t2
    }, function(data) {
    return data;
});

} 
```

现在，我想调用这个函数，而不阻塞线程，即异步。从该方法返回后如何进行函数调用，但不阻塞任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:42:30.970

您不能从 中“返回” `$.get`，它不会那样工作。您要做的是将回调传递给`checkMsgs`并在完成时调用它`$.get`。

```
function checkMsgs(t1, t2, callback) {
    $.get("http://www.mySite.com/web/test.php", {
        "t1": t1,
        "t2": t2
    }, function (data) {
        // do whatever...
        $.isFunction(callback) && callback(data);
    });
} 
```

然后你`checkMsgs`这样调用：

```
checkMsgs('a', 'b', function(data){
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T20:43:25.797

从函数返回`$.get`并为其添加回调。

```
function checkMsgs(t1,t2) {
    return $.get("http://www.mySite.com/web/test.php");
}

checkMsg("foo","bar").done(function(){
    alert("It's Done!");
}); 
```

# performance - Powershell中Get-WmiObject和Get-Counter有什么区别

> ID：10823912
> 
> 赞同：1
> 
> 时间：2012-05-30T20:39:49.397
> 
> 标签：performance, powershell, windows-server-2008

我正在尝试学习如何进行一些简单的 Windows Server 性能监控。从我读过的内容来看，似乎有两种方法可以在 Powershell 中获取此信息：`Get-WmiObjects`和`Get-Counter`.

`Get-WmiObjects`和 和有什么不一样`Get-Counter`？我是否有理由要使用其中一个？可能这两种方法是从同一个数据源读取的，但是以不同的方式格式化它们的结果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:10:37.270

据我所知，它们之间没有区别。性能计数器都在 WMI 中注册，因此 Get-Counter cmdlet 将隐式使用 WMI 来获取其数据。

一般来说，我会推荐使用 Get-WmiObject，因为它是一个更广泛的接口，并且熟悉这个更广泛的接口对您很有价值。

请记住，并非 PowerShell 中的所有 cmdlet 都是学习和理解所必需的。有很多命令我根本不使用，因为我不需要它们的功能。Set-WmiInstance 是一个完美的例子——为什么要使用它，当我可以使用 Get-WmiObject 来抓取一个对象、更改它并在它上面调用 Put() 时？再说一次，我更喜欢将事物视为 .NET 对象，而不是（通常）使用 cmdlet。

# c# - 光子服务器新手问题

> ID：10823915
> 
> 赞同：3
> 
> 时间：2012-05-30T20:40:13.893
> 
> 标签：c#, unity3d, photon

我在 Photon Server 官方论坛上问过这个问题，但它没有这个网站那么活跃，所以可能会有人明白我在说什么，所以如果你有时间和知识，请分享一下。谢谢！

来了...

所以，我在 Photon 上有一个非常好的服务器原型和一个与服务器对话的基本 Unity3D 客户端。它是根据 cjrgaming 上的示例构建的。

客户端可以：连接，发送请求，建立和发送加密请求服务器可以：创建peer，接收操作请求，发送操作响应或事件给客户端，还有，我的小补充是：如果一个游戏有很多操作，您不必使用巨大的 switch case 语句，而是将操作划分为类别（类），并使用委托和字典来调用它们。

当我觉得它已经准备好发布时，我将发布它的工作示例，但现在，对于我的实际问题..（对不起，长篇文章，我不得不解释我所知道的以及到目前为止我所拥有的）：

从客户端发送到服务器的实际操作是什么？还是服务器向客户端引发的事件（一次所有客户端？）？

起初，我认为每个操作都是游戏中特定的用户流。例如，操作码“1”，表示玩家X想射杀玩家Y，做某事。但是后来，我意识到，根据字节限制，您不能将所有游戏逻辑仅放在 255 次操作中，而不将其扩展到 short int 或其他内容。

然后我发现还有一个channelID，它在同一个操作码请求上可以不同......这对我来说意味着操作码不是用户流，而是客户端之间相同/相似动作的数据流和服务器，channelID 可用于区分要在服务器上计算的请求操作。

然后...！我意识到（哦，傻瓜），有参数从客户端发送到服务器，反之亦然在字典中，这增加了另一层可能的用户流。

所以..现在我想了解一些事情，但他们让我更加困惑。

谁能简要解释一下操作/事件/通道ID的目的？例如，如果您做一个小型多人游戏，您将使用什么来制作用户（游戏）流程，例如 -> 玩家击中目标，玩家在世界上捡起物品，玩家发送消息。您会为每个流使用唯一的操作代码，还是按含义对操作进行分组并使用通道来区分请求，或者甚至在这里，您对许多用户流使用相同的 channelID 并通过参数内部的一些 ID 来区分它们？

希望我有任何意义。

非常感谢大家，至少，如果有的话，请帮忙！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T15:36:00.627

1）频道是一个完全不同的话题，与你想要触发的不同类型的游戏逻辑的区别无关。相反，如果一项操作依赖于另一个操作，则存在确定优先级和状态的通道。

a）如果您发送一个拍摄操作和一个 2 个聊天操作，并且由于客户端的网络连接不是最好的，那么第一个聊天消息会在途中丢失，但正如您所说发送当服务器没有确认它已收到它时，Photon 客户端将可靠地自动重新发送它。现在另一个聊天消息应该被 Photon 阻止，直到第一个可以成功发送，否则显示来自同一作者的聊天消息的顺序将不再是它们被写入的顺序。现在的问题是，不仅应该阻止相同类型的操作，而且可能还有其他操作，应该只在丢失的操作被重复之后发送（例如“用户离开”的可见结果聊天” 操作不应该显示在屏幕上，直到在他离开前发送的最后一条聊天消息之后）。另一方面，并​​非所有相同类型的操作都必须被阻止。例如，玩家可以私下与 2 个不同的其他用户交谈，当发给其中一个用户的一条消息没有立即通过时，则没有理由将所有消息保留给另一个用户。光子对这个问题的解决方案是通道：在同一个通道中发送所有相互依赖的操作，但在另一个通道中发送独立于它们的操作。如果现在必须重复其中一项操作，其他通道中的操作不会被阻止，但同一通道中的操作会被阻止。另一方面，并​​非所有相同类型的操作都必须被阻止。例如，玩家可以私下与 2 个不同的其他用户交谈，当发给其中一个用户的一条消息没有立即通过时，则没有理由将所有消息保留给另一个用户。光子对这个问题的解决方案是通道：在同一个通道中发送所有相互依赖的操作，但在另一个通道中发送独立于它们的操作。如果现在必须重复其中一项操作，其他通道中的操作不会被阻止，但同一通道中的操作会被阻止。另一方面，并​​非所有相同类型的操作都必须被阻止。例如，玩家可以私下与 2 个不同的其他用户交谈，当发给其中一个用户的一条消息没有立即通过时，则没有理由将所有消息保留给另一个用户。光子对这个问题的解决方案是通道：在同一个通道中发送所有相互依赖的操作，但在另一个通道中发送独立于它们的操作。如果现在必须重复其中一项操作，其他通道中的操作不会被阻止，但同一通道中的操作会被阻止。那么就没有理由将所有消息都保留给另一个人。光子对这个问题的解决方案是通道：在同一个通道中发送所有相互依赖的操作，但在另一个通道中发送独立于它们的操作。如果现在必须重复其中一项操作，其他通道中的操作不会被阻止，但同一通道中的操作会被阻止。那么就没有理由将所有消息都保留给另一个人。光子对这个问题的解决方案是通道：在同一个通道中发送所有相互依赖的操作，但在另一个通道中发送独立于它们的操作。如果现在必须重复其中一项操作，其他通道中的操作不会被阻止，但同一通道中的操作会被阻止。

b) 通道的另一种方式是，确定优先级：通道ID越低，优先级越高。因此，如果您有少量的高优先级数据和其他只有低优先级的数据，但可能碰巧出现大量数据，那么最好在低优先级的通道上发送高优先级数据。频道 ID。这样它仍然会立即出去，尽管在具有更高 ID 的通道中可能有很多数据已经排队等待发送，但尚未发送出去。

2) 操作和事件都是消息。实际上有三种类型的消息：操作请求、操作响应和事件。

a) 客户端可以通过 PhotonPeer.opCustom() 向服务器发送带有一定操作码的 operationRequest。一些典型的操作，如加入和离开房间，已经由 Photon 应用层的应用程序（如 Lite 或 LoadBalancing 应用程序）实现。如果有为 Photon 应用程序提供的客户端 API，那么该 API 可以提供诸如 opJoin() 之类的开箱即用的函数，这些函数使用正确的参数将调用包装到 opCustom()，就像提到的应用程序的客户端 API做。

b) 根据在应用程序级别上如何实现具有特定代码的操作，服务器可能会向客户端发送 operationResponse，它已从客户端接收到 operationReqeust。例如 LitePeer.opJoin() 将触发来自服务器的加入响应，但 LitePeer.opRaiseEvent 不会触发响应。

c) 根据应用程序级别的操作如何实现，服务器可能会也可能不会向某些客户端发送事件。例如 LitePeer.opJoin() 将触发一个加入事件，该事件将发送给该​​房间中的所有玩家。LitePeer.opRaiseEvent() 默认让服务器为同一房间中的所有客户端（发送客户端除外）引发一个事件，该事件包含您传递给它的有效负载。然而 opRaiseEvent() 为其调用客户端提供了指定接收客户端的可能性。

3）“玩家击中目标，玩家在世界上捡起物品，玩家发送消息”如果您需要任何特殊的服务器端逻辑，那么您可以使用不同的代码将它们实现为自己的操作。如果不是这种情况，那么您将使用 opRaiseEvent() 发送这些信息，但您仍将为这 3 个中的每一个指定不同的 eventCode。但是，操作和 eventCodes 旨在用于区分不同类型的信息，就像聊天消息，捡起一个命中，位置更新等。所以玩家a告诉玩家b他已经击中了玩家c，而玩家b告诉玩家d，他已经击中了玩家d，都将使用相同的代码。关于哪个玩家被击中的信息 - 就像它被击中的强度或使用哪种武器一样 - 属于操作的有效载荷。

# c# - 如何将属性添加到 MembershipUser

> ID：10823916
> 
> 赞同：0
> 
> 时间：2012-05-30T20:40:14.570
> 
> 标签：c#, asp.net, asp.net-mvc, razor

我使用 MVC4 和它附带的默认成员/用户表。我在 Membership 表中添加了一个 PhoneNumber 列。

当我使用 Membership.GetUser() 获得 MembershipUser 时，它具有诸如电子邮件之类的属性。我想让 MembershipUsers 也有一个我添加的 PhoneNumber 列的属性。我该怎么做呢？

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:46:06.153

您可能应该为此使用 Profile 提供程序。

如果您宁愿为此坚持使用 Membership，您正在考虑创建一个派生自 MembershipUser 的自定义类，以及一个自定义 Membership 提供程序来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T02:17:05.287

为什么不调用membership.getuser() 使用的存储过程。

只有3个：

*   dbo.aspnet_Membership_GetUserByEmail
*   dbo.aspnet_Membership_GetUserByName
*   dbo.aspnet_Membership_GetUserByUserId

您实际上可以增强这些或创建更安全的克隆并直接从 MVC 调用它们。

这是最受欢迎的：

```
USE [MVCTemplate]
GO

/****** Object:  StoredProcedure [dbo].[aspnet_Membership_GetUserByUserId]    Script Date: 05/30/2012 22:12:08 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER OFF
GO

CREATE PROCEDURE [dbo].[aspnet_Membership_GetUserByUserId]
    @UserId               uniqueidentifier,
    @CurrentTimeUtc       datetime,
    @UpdateLastActivity   bit = 0
AS
BEGIN
    IF ( @UpdateLastActivity = 1 )
    BEGIN
        UPDATE   dbo.aspnet_Users
        SET      LastActivityDate = @CurrentTimeUtc
        FROM     dbo.aspnet_Users
        WHERE    @UserId = UserId

        IF ( @@ROWCOUNT = 0 ) -- User ID not found
            RETURN -1
    END

    SELECT  m.Email, m.PasswordQuestion, m.Comment, m.IsApproved,
            m.CreateDate, m.LastLoginDate, u.LastActivityDate,
            m.LastPasswordChangedDate, u.UserName, m.IsLockedOut,
            m.LastLockoutDate
    FROM    dbo.aspnet_Users u, dbo.aspnet_Membership m
    WHERE   @UserId = u.UserId AND u.UserId = m.UserId

    IF ( @@ROWCOUNT = 0 ) -- User ID not found
       RETURN -1

    RETURN 0
END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T01:45:45.937

您需要为此类情况实施自定义成员资格提供程序。这是一个很好的教程。 [http://www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

# java - ACRA vs Android 开发者控制台崩溃错误报告

> ID：10823917
> 
> 赞同：10
> 
> 时间：2012-05-30T20:40:24.507
> 
> 标签：java, android, acra

我正在寻找一种方法来调试用户设备上发生的崩溃。目前我看到游戏市场出现崩溃。我看到的是堆栈跟踪，但没有其他详细信息（例如：崩溃前的日志）。有什么方法可以获取更多信息吗？
更一般地说，播放崩溃报告和 ACRA 有什么区别？使用 ACRA 的好处/坏处是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T04:25:11.757

一定要使用 ACRA。

只有在用户选择时才会发送市场错误报告，大多数人只是点击“取消”。缺乏细节（设备型号）使它们几乎毫无用处，并且显然由于隐私问题等原因，无法获得更多细节。

ACRA 允许您自定义获取的详细信息（更多详细信息可能需要更多权限），并指定/自定义报告（HTTP、电子邮件等）的发送方式。您只需要一个 Google Docs 电子表格即可开始使用，如果您无法使用它，您可以迁移到您自己的服务器或第三方服务，例如 [BugSense](http://www.bugsense.com/dashboard)。您可以自动发送报告，无需用户参与。如果您决定走那条路，提供一种关闭它的方法可能是个好主意。

# python - Python 数据库

> ID：10823918
> 
> 赞同：7
> 
> 时间：2012-05-30T20:40:27.440
> 
> 标签：python

我的问题是如何在 python 中创建一个简单的数据库。我的例子是：

```
User = {
'Name' : {'Firstname', 'Lastname'},
'Address' : {'Street','Zip','State'},
'CreditCard' : {'CCtype','CCnumber'},
} 
```

现在我可以更新这个用户的信息就好了，但是我该怎么做

1.  向此数据结构添加更多用户。字典词典？
2.  允许用户拥有多张信用卡，多对一关系

感谢您的任何回复，我一直在努力解决这个问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T20:43:29.653

您可能对[SQLAlchemy](http://www.sqlalchemy.org/)感兴趣。它使 SQLite 或 MySQL 等实际数据库的工作方式更像 Python 类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T20:45:18.933

我见过的大多数键值存储要么是字典字典（如 mongo*），要么是字符串字典（如 redis）。这两种方法各有利弊。我不知道你想要什么，所以我会给出最简单的答案：使用字典列表：

```
Users = []
Users.append({
  'Name' : {'Firstname', 'Lastname'}, # Are these sets?
  'Address' : {'Street','Zip','State'},
  'CreditCard' : {'CCtype','CCnumber'},
}) 
```

*好吧，公平地说，Mongo 更像是一本*魔法*字符串字典。它是 json，但查找是在内部处理的，因此您可以将其视为任意（但 json 可序列化）数据结构的字典。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-24T02:36:18.433

创建一个`User`类来存储信息。该类可以具有一个`creditcards`属性，该属性是`list`类`CreditCard`实例的一个属性，可以在创建类实例时或稍后使用您可以定义的类方法添加到类实例中。其他方法可以在调用时根据需要更新此（和其他）属性。它被称为面向对象编程（OOP）。

实例可以存储在各种内置容器类（如`list`s 和`dict`s）的实例中的内存中。它们可以存储在磁盘上，稍后使用`pickle`、`shelve`、`json`和`sqlite3`模块检索，仅举几例。

您不会尝试做任何以前没有做过的事情——这是个好消息，因为这意味着有很多现成的软件可供您使用，但您必须在文档中阅读它们并且可能会再问几个问题，直到你学会了如何使用它们，然后你就可以开始回答问题了。;-)

欢迎来到 Python！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T20:47:03.757

> ​1\. 向此数据结构添加更多用户。字典词典？

字典列表。

```
[{'name': ...}, {'name': ...}] 
```

> ​ 2\. 允许用户拥有多张信用卡，多对一关系

一个列表。

```
{'name': ..., 'creditcard': [['type', 'number'], ['type', 'number']]} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-30T20:43:46.237

[您可以使用sqlite](http://docs.python.org/library/sqlite3.html)在 Python 中创建一个简单的数据库，这是它的基本[教程](http://zetcode.com/db/sqlitepythontutorial/)。

# visual-studio-2010 - VSTO 加载项适用于 Office SP3，但不适用于 SP2

> ID：10823919
> 
> 赞同：1
> 
> 时间：2012-05-30T20:40:51.290
> 
> 标签：visual-studio-2010, vsto, office-interop, ms-project

我开发了一个 MS Project 插件（VS2010，针对 .Net 4），它在安装了 Office SP3（WinXP，7）的机器上运行良好。但是，在安装了 Office SP2 (Win XP) 的计算机上安装时，加载项加载但几秒钟后变得无响应。

当我在 COM 加载项对话框中切换加载项时（在它停止工作之后），我得到了这个奇怪的消息框：

```
"Com object that has been seperated from its underlying RCW cannot be used" 
```

我不太确定问题出在哪里，但我怀疑它与 SP2 类似，不支持`Microsoft.Office.Interop.MSProject 12.0`互操作库。谁能证实我的怀疑，或者至少让我指出正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:53:56.810

此消息告诉您访问已处置的 COM 实例的代码存在问题（通过[`Marshal.ReleaseComObject`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)或[`Marshal.FinalReleaseComObject`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx)）。您应该引入**try/catch 语句**来捕获/记录代码的哪一部分触发了这种情况，以便您可以解决它。

理想情况下，您可以在出现此错误的同一台机器上获得 VS.NET 调试工具，这样您就可以在它发生之前附加到该进程以查明源位置。

在管理内存方面，Office 可能非常挑剔。您可能只需要使用良好的旧试验和错误来捕获哪个部分失败。

# java - java matrix exp(A) 用矩阵计算指数

> ID：10823924
> 
> 赞同：3
> 
> 时间：2012-05-30T20:41:08.997
> 
> 标签：java, algebra, jama

我正在尝试计算函数 e^AT，其中 A 是矩阵，T 是双精度值。我尝试过同时使用 jama 和 colt/cern，但是还没有找到它们各自的功能。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T08:51:59.550

[jblas](http://mikiobraun.github.io/jblas/)中有一个矩阵指数。该方法称为`expm`. [http://mikiobraun.github.io/jblas/javadoc/org/jblas/MatrixFunctions.html#expm(org.jblas.DoubleMatrix)](http://mikiobraun.github.io/jblas/javadoc/org/jblas/MatrixFunctions.html#expm(org.jblas.DoubleMatrix))

eigen 库具有矩阵指数和矩阵对数的实现，并且有一个名为[jeigen的 Java 包装器](https://github.com/hughperkins/jeigen)

# javascript - CSS 更改 [带 JS]

> ID：10823926
> 
> 赞同：1
> 
> 时间：2012-05-30T20:41:10.867
> 
> 标签：javascript, html, css, google-chrome

我使用 StyleBot [Chrome 插件] 并对网页进行了以下更改：

* * *

```
td.forumRow {
font-style: normal;
font-family: Verdana;
font-variant: normal;
font-size: 8pt;
text-decoration: none;
}

td.forumRowHighlight {
font-size: 8pt;
font-family: Verdana;
}

span.normalTextSmaller {
font-family: Verdana;
font-size: 8pt;
}

tbody tr td {
font-family: Verdana;
font-size: 8pt;
}

a.linkMenuSink {
font-size: 8pt;
font-family: Verdana;
} 
```

* * *

除了使用 StyleBot，是否可以使用 javascript 脚本进行相同的更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T20:45:27.013

是的。这里...

```
var css = document.createElement("style");
css.type = "text/css";
css.innerHTML = "PASTE YORU CSS HERE"
top.document.body.appendChild(css); 
```

请记住，如果它说“在此处粘贴您的 CSS”，您必须删除所有换行符。使用这个工具来做到这一点：http: [//www.minifycss.com](http://www.minifycss.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:45:12.897

您可以使用 jQuery 轻松做到这一点：

在你的情况下：

```
$("<style type='text/css'> td.forumRow { font-style: normal; font-family: Verdana; font-variant: normal; font-size: 8pt; text-decoration: none;}</style>").appendTo("head"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:47:54.623

Ext-JS 使用[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.CSS](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.CSS)

源代码：[http ://docs.sencha.com/ext-js/4-1/source/CSS.html#Ext-util-CSS](http://docs.sencha.com/ext-js/4-1/source/CSS.html#Ext-util-CSS)

```
Ext.util.CSS.updateRule("td.forumRow", "font-style", "normal"); 
```

我不是建议你引入整个库，只是使用他们的代码来获得如何使其跨浏览器的灵感。

# c# - 如何在 lambda 表达式中使用子集合进行排序

> ID：10823928
> 
> 赞同：2
> 
> 时间：2012-05-30T20:41:25.007
> 
> 标签：c#, asp.net, entity-framework

我有一个使用 lambda 表达式的查询，我希望能够从作为父表的子集合的表中的列进行排序。查询如下所示：

```
 var query = ctx.Timelines.Include("Rule.DocumentRules").Where(...).OrderBy(o => o.Rule.DocumentRules.OrderBy(t => t.SortOrder)); 
```

SortOrder 列位于 Timelines 实体下的 3 层深处，我不知道使用哪个扩展来访问它。当我使用上面的代码时，我收到一个错误“DbSortClause 表达式必须具有可与顺序比较的类型。参数名称：键”。如果我使用 Select 扩展而不是 2nd OrderBy，我会得到同样的错误。有谁知道我如何按此列排序？此“SortOrder”列不是主键或外键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T15:50:16.283

我知道这是一个旧线程，但我遇到了这个帖子，因为我遇到了同样的问题，因为它没有答案，我想我会分享我的解决方案，以防它帮助别人。

假设您需要显示实际的父母（即...妈妈/爸爸）和他们的孩子，但您想在报告中按字母顺序显示孩子的姓名。如果它们在数据库中的顺序不正确，则必须按子表上的“名称”字段对其进行排序，以根据要求显示它们。

按预期工作的简单 T-SQL 示例：

```
select * from ParentTable p
inner join ChildTable c on c.ParentId = p.ParentId
where p.ParentId = 1
order by c.Name 
```

我曾尝试以与原始海报相同的方式完成此操作（如下所示），并得到“DbSortClause 表达式必须具有可与订单比较的类型”异常。

```
.OrderBy(x => x.ParentTable.ChildTable.OrderBy(y => y.Name)) 
```

我正在使用投影，所以这可能不适用于所有人，但我发现如果我在子列表的投影中执行 OrderBy，它也可以按照我的意愿工作。

```
Children = x.ParentTable.ChildTable.OrderBy(y => y.Name).Select(aa => new ChildTableModel 
```

很可能有更好/不同的方法来实现这一点，但这做了我想要的，所以我想我会分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:07:15.910

在尝试按相关实体中的列排序时，我遇到了同样的问题。唯一有效的解决方案是使用 Entity SQL。这是一个使用返回 ObjectQuery 的 ESQL 查询的简单示例：[Converting ESQL to LINQ to Entities。按相关实体排序](https://stackoverflow.com/questions/8445922/converting-esql-to-linq-to-entities-sort-by-related-entities)。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:51:00.537

看起来您正在尝试按多个子项进行排序，这对编译器来说实际上没有意义。如果这两个实体之间确实存在一对一的关系，您可以尝试类似

```
var query = ctx.Timelines.Include("Rule.DocumentRules").Where(...).OrderBy(o => o.Rule.DocumentRules.First().SortOrder)); 
```

这可能会导致空异常，具体取决于您的数据库的设置方式。

# ios - 是否可以访问 GLKTextureInfo 中的二进制图像数据？

> ID：10823934
> 
> 赞同：0
> 
> 时间：2012-05-30T20:41:54.257
> 
> 标签：ios, opengl-es, glkit

GLKTextureInfo 或某些相关对象中是否提供原始图像数据？

是否可以基于此类原始数据图像缓冲区在 GLKit 中创建纹理？像在非 ES OpenGL 中一样，使用 glTexImage2D()？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T05:32:50.530

没有必要这样做。 `GLKTextureLoader's`目的是从各种图像文件格式创建纹理中删除样板。如果您已经拥有解码后的原始二进制数据，那么您可以像往常一样调用`glGenTextures`/ `glTexImage2D`：GLKit 真的没有什么可以帮助您的了。

# applescript - Adium 从 applescript 发送两条聊天消息

> ID：10823936
> 
> 赞同：0
> 
> 时间：2012-05-30T20:41:57.063
> 
> 标签：applescript

我很想从命令行发送我的 Adium 联系人消息。语法应该看起来像`echo test | im <contact>`. 我已经采用并修改[了这个脚本](http://frefo.blogspot.com/2008/07/replacement-script-for-zwrite-using.html)来做我想做的事，但它有点旧，我正在尝试对其进行现代化改造。到目前为止，我已经完成了这项工作（我只更改了 applescript，在这里。）

```
set stdinText to do shell script "echo \"\$MESSAGE\"" without altering line endings

tell application "Adium"
    set user to get contact "$BUDDY"

    if not (exists (chats whose contacts contains user)) then
        if not (exists (first chat window)) then
            tell account of user
                set new_chat to make new chat with contacts {user} with new chat window
            end tell
        else
            set existing_window to first chat window
            tell account of user
                set new_chat to make new chat with contacts {user} in window existing_window
            end tell
        end if
    else
        set new_chat to first chat whose contacts contains user
    end if

    send new_chat message stdinText
end tell 
```

效果很好，只是聊天消息发送了两次。这是 Adium 中的错误还是我在 applescript 中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:30:16.183

我也遇到了这个错误，Adium 多次发送聊天消息。

它是由多个名为 AdiumApplescriptRunner 的正在运行的后台进程引起的。显然，这些进程中只有一个应该在任何给定时间运行，但有时会启动多个，当这种情况发生时，您会收到为每个额外的 AdiumApplescriptRunner 进程发送的重复聊天消息。

我的工作是创建一个每分钟运行一次的 cron 任务，并执行以下 bash 命令：

```
ps -aef | grep -v grep | grep 'AdiumApplescriptRunner' | awk '{print $2}' | awk 'NR == 2,/c/' | xargs -I %s kill -9 %s 
```

此命令确保只有一个名为 AdiumApplescriptRunner 的进程正在运行，并杀死除 Adium 创建的进程之外的任何进程。

# sql-server - SQL Server 2008 存储过程中的默认参数值

> ID：10823966
> 
> 赞同：0
> 
> 时间：2012-05-30T20:43:56.593
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, stored-procedures, parameters

我想使用一个存储过程，它可以使一些参数为空值，然后测试它是否参数为空并进行一些编码：我只想知道这个存储过程是否有问题

这是存储过程

```
 create proc rechercherGIACetAffiche @nomgiac varchar(20),@nom varchar(30) = null,@par varchar(50) = null
           as
            begin
            IF @nom is null and @par is null
                begin
                    select [ID_Dossier] as 'ID_Dossier'
                      ,[ID_Entreprise] as 'ID_Entreprise'
                      ,[Date_Depot] as 'Date_Dépôt'
                      ,[Type_Etude] as 'Type_Etude'
                      ,[Dernier_Type] as 'Dernier_Type'
                      ,[Eligibile] as 'Eligibilité'
                      ,[Fiche_Information] as 'Fiche_Information'
                      ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
                      ,[Fiche_Renseignment] as 'Fiche_Renseignment'
                      ,[Attestation] as 'Attestation'
                      ,[Date_Debut] as 'Date_Début'
                      ,[Date_Fin] as 'Date_Fin'
                      ,[ID_Cabinet] as 'ID_Cabinet'
                      ,[Montant_Demander] as 'Montant_Demander'
                      ,[Duree] as 'Durée'
                      ,[Porcentage_Taux] as 'Pourcentage,Taux' from Dossier where Nom_Giac = @nomgiac
                      return 
                end
            if  @par is not null and @nom='CNSS' 
              begin
              select d.[ID_Dossier] as 'ID_Dossier'
              ,d.[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux' 
              from dbo.Dossier d inner join entreprise e on d.ID_Entreprise=e.ID_Entreprise
              where CNSS_Entreprise=@par and d.Nom_Giac=@nomgiac 
              return 
              end

            else if @par is not null and @nom='RS'  
              begin
              select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
              from dbo.Dossier 
              where  Nom_Giac=@nomgiac and ID_Entreprise in( select ID_Entreprise
                                                             from dbo.Entreprise
                                                             where Raison_Social=@par) 
                                                             return                                            
              end
           else if @par is not null and @nom ='Date'
            begin
             declare @v smalldatetime,@b smalldatetime
              set @b=SUBSTRING(@par,1,4)
              set @v=SUBSTRING(@par,5,8)
            select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
            from Dossier 
            where Date_Depot between @b and @v and Nom_Giac like @nomgiac
           return 
            end 
            end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:16:10.587

看起来它在`@nomgiac`is时可能有一些问题`NULL`。在那种情况下，没有什么能满足`= @nogiac`

因为您的每个案例都以 a 结尾`RETURN`，所以不需要使用 else，这可能有助于提高可读性（您似乎在第一个案例中使用了该技术，然后在后面的案例中切换到使用 else）。

我通常不喜欢使用类型选择器重用参数的技术 - 特别是因为您在一种情况下将其用作日期（如果转换失败怎么办）。如果您要使用命名/可选参数，只需添加更多参数并让它们成为`NULL`.

虽然它并不总是在执行计划中表现最好，但您可能会将整个事情写成一个查询（在这种情况下，它是内联表值函数的候选者，这对于代码重用非常有用它本身可以用作连接中的视图或表格等）

我不会重新编写您的查询，但该技术背后的基本思想是这样的：

```
SELECT *
FROM tbl
WHERE (@param1 IS NULL OR @col1 = @param1)
    AND (@param2 IS NULL OR @col2 = @param2) 
```

组合具有连接和不连接的不同事物时唯一棘手的事情是，您可能需要将显式内连接转换为左连接，然后使用 where 子句有效地将其转换为某些参数的内连接，而不是其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:00:06.287

代码看起来也不错 - 我无法运行存储过程，但据我所见，我没有看到任何明显的错误或问题。

试试看！如果您遇到问题，请返回错误消息并再次询问！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T07:21:07.410

如果你想让参数可选所以使用它对不起我没有编辑你的代码 jst bcz 时间

```
CREATE PROCEDURE uspGetAddress @City nvarchar(30) = NULL, @AddressLine1 nvarchar(60) = NULL
AS
SELECT *
FROM AdventureWorks.Person.Address
WHERE City = ISNULL(@City,City)
AND AddressLine1 LIKE '%' + ISNULL(@AddressLine1 ,AddressLine1) + '%'
GO 
```

# sql - 对表使用相同的名称作为模式

> ID：10823968
> 
> 赞同：1
> 
> 时间：2012-05-30T20:44:05.147
> 
> 标签：sql

简而言之，如果我使用同时也是模式名称的表名，会发生不好的事情。

例如：

飞机.飞机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:47:04.797

据我所知，您没有理由不能这样做，尽管您以后可能会感到困惑。我想如果您编写的查询没有明确说明架构，事情可能会变得棘手，但如果您避免这样做，那么您应该没问题。

话虽如此，我会质疑这样做是否明智——对我来说，这表明模式名称或表名称没有正确描述它包含的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:47:27.603

我认为这不会造成问题，但我不明白您为什么要这样做。您应该将模式命名为更能描述您正在建模的内容。例如，不要将模式命名为“Aircraft”，而是将其命名为“Airport”或“Air_traffic”或其他任何名称。

# r - 清理数据集

> ID：10823971
> 
> 赞同：0
> 
> 时间：2012-05-30T20:44:26.140
> 
> 标签：r

我有这个数据集：示例：

```
x=rnorm(45)
std_d=sd(x) 
```

现在 x 看起来像：

```
 [1] -0.08059702  0.90403763 -0.18618130 -0.48590834  1.23714656  1.02248570

  [7] -0.28970333 -0.19626563  0.89060697  0.87530362 
```

令 p=abs(x[i] - x[i+1])。如果 p> sd(x)，我想用 NA 代替 x 的值。它应该以最初检查 x[i] -x[i+1] 的方式完成。如果这不满足下一个 i 的条件检查。现在如果条件满足，它应该为 x[i+1] 放置 NA。

那么下一次 p 应该是 p= x[i] - x[i+2]。它应该跳过 NA 值并保持 p (x[i]) 的第一项相同，直到条件不满足。一旦发生这种情况，第一项应该成为 NA 值旁边的项，第二项成为第一项旁边的项。

我认为这可以通过 if else 和 for 循环的组合来完成。但是即使在努力之后我也无法弄清楚算法。我需要这方面的帮助。

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:51:48.277

```
is.na(x) <- c(FALSE, abs(diff(x)) > sd(x) )
#Pass two:  Here your description could use a set.seed and a desired result.
> X1 <- x
> is.na(X1) <- c(FALSE, abs(diff(X1)) > sd(x) )
> X1
 [1]          NA -0.21797491 -1.02600445 -0.72889123 -0.62503927          NA          NA  0.15337312
 [9]          NA          NA  0.42646422 -0.29507148          NA  0.87813349  0.82158108  0.68864025
[17]  0.55391765 -0.06191171 -0.30596266 -0.38047100 -0.69470698 -0.20791728          NA          NA
[25]          NA          NA -0.40288484 -0.46665535          NA -0.08336907  0.25331851 -0.02854676
[33] -0.04287046          NA          NA          NA          NA          NA  0.12385424  0.21594157
[41]  0.37963948          NA -0.33320738 -1.01857538 -1.07179123
> X2 <- X1
> is.na(X2) <- c(FALSE, FALSE,  abs(diff(X2, lag=2)) > sd(x) )
> X2
 [1]          NA -0.21797491 -1.02600445 -0.72889123 -0.62503927          NA          NA  0.15337312
 [9]          NA          NA  0.42646422 -0.29507148          NA          NA  0.82158108  0.68864025
[17]  0.55391765 -0.06191171 -0.30596266 -0.38047100 -0.69470698 -0.20791728          NA          NA
[25]          NA          NA -0.40288484 -0.46665535          NA -0.08336907  0.25331851 -0.02854676
[33] -0.04287046          NA          NA          NA          NA          NA  0.12385424  0.21594157
[41]  0.37963948          NA -0.33320738 -1.01857538 -1.07179123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:03:31.690

必须有更好的方法......但是在可怕的c风格中：

```
x <- c(-0.08059702, 0.90403763, -0.18618130, -0.48590834, 1.23714656, 1.02248570, 0.28970333, -0.19626563, 0.89060697, 0.87530362)

std_d <- sd(x)

for(i in seq_along(x)) {
  if(is.na(x[i])) next
  ctr <- i
  while(ctr < length(x)) {
    if(abs(x[i] - x[ctr+1]) > std_d) {
      x[ctr+1] <- NA
      ctr <- ctr + 1
      std_d <- sd(x, na.rm=TRUE)
    } else {
      break
    }
  }
} 
```

如果您将内容设置为`NA`,`sd(x)`正在更改，因此我也将其包括在内...

# bluetooth - 在不实现主机堆栈的情况下使用 USB 加密狗通过蓝牙 SPP 进行通信

> ID：10823972
> 
> 赞同：0
> 
> 时间：2012-05-30T20:44:26.700
> 
> 标签：bluetooth, usb, dongle

我被要求在我们的自定义嵌入式应用程序中找到一种方法来实现与安卓智能手机的蓝牙通信。我们将 FTDI Vinculum II (VNC2) 用于 USB 主机控制器，我的老板想要一个解决方案，客户可以将任何（或大多数）蓝牙 USB 加密狗插入我们仪器上的 USB 端口，然后能够连接我们的仪器通过蓝牙连接到安卓手机。

我发现 USB 加密狗只实现了控制器堆栈（HCL/SCO、LMP 和 HCI）并且主机（在这种情况下是我的自定义固件）必须提供主机堆栈的实现，或者它的部分我们无论如何都需要（至少 HCI、L2CAP、RFCOMM）。

我的问题是，有什么办法可以从头开始实现主机堆栈？是否有任何价格合理的“无主机”加密狗（例如，它们实现了蓝牙堆栈的主机和控制器部分，并通过简单的协议进行通信）我们可以随仪器一起提供？我知道 RovingNetworks FirePlug 可以做到这一点，我们有一个并且已经让它工作，但它是 70 美元而且非常大。我正在寻找一种不那么昂贵且外形更小的类似解决方案，以便它不会离我们的手持仪器太远......

提前感谢您提供任何信息。

# javascript - Node JS - 在 Jade 中扩展布局时出错

> ID：10823973
> 
> 赞同：0
> 
> 时间：2012-05-30T20:44:29.790
> 
> 标签：javascript, pug

如果我理解的话，我可以在使用 Jade 时将模板的某些部分移动到父模板吗？

我尝试将一些 js 文件的链接移动到 head 部分，我只与网站的一部分一起使用，但出现错误。

我的layout.jade：

```
!!!
html(lang='en')
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/box.css')
    block scripts
  body
    .. 
```

我的 index.jade （仅供尝试，它将在其他文件中）

```
extends layout

block scripts
  script(src='myscriptfile.js')
div#sortable
  .. 
```

和节点服务器的某些部分：

```
app.get('/', function(req, res){
  res.render('index', 
    {title: 'My title',
    images: images}
  );
}); 
```

我切换这个选项真/假

```
app.set('view options', { pretty: true }); 
```

但仍然出现错误：

```
Express
500 ReferenceError: E:\projekt/views/index.jade:13 11| 12| > 13| 14| body is not defined 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:30:18.120

在`..`您的片段中，您引用了一个`body`尚未定义的变量。我猜在第 13 行左右`index.jade`：

> ```
> 500 ReferenceError: E:\projekt/views/index.jade:13 11| 12| > 13| 14| ... 
> ```

您要么必须从视图中删除它，要么在视图数据中定义它：

```
res.render('index', 
    {title: 'My title',
    images: images,
    body: '...'}
); 
```

* * *

边注：

如果您尚未升级到 Express 3.x，您可能需要确保禁用布局：

```
app.set('view options', {
  layout: false,
  pretty: true
}); 
```

继承和块[旨在替换布局](http://www.devthought.com/code/use-jade-blocks-not-layouts/)，而不是与它们一起使用。如[从 2.x 迁移到 3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)中所述：

> 删除了......“布局”的概念（现在特定于模板引擎）

# haskell - 为什么异步 UDP 数据报 Haskell 服务器会丢包？

> ID：10823974
> 
> 赞同：6
> 
> 时间：2012-05-30T20:44:30.683
> 
> 标签：haskell

我正在向这个 Haskell 服务器发送简单的 UDP 数据包。对于数据包的来源，我使用“aspell -l en dump master”生成的纯文本文件。但是，任何超过 120,000 条消息的列表都应该有效。如果我同时启动消费者和生产者，我不会丢失数据包。但是，我希望能够模拟一个非常忙碌的消费者。如果我在启动消费者之前引入一个 threadDelay 20 秒，我会丢失数据包。这对我来说是反直觉的，因为当我延迟消费时，我在标准输出和磁盘 IO 方面做得更少。谁能解释为什么我会因为延迟版本而感到迷茫？当我的消费者非常忙碌时，如何更好地管理套接字和 TChan 以不造成任何损失（只是更高的内存使用率）？

```
import Control.Monad (forever)
import Control.Concurrent (forkIO, threadDelay)
import Control.Concurrent.STM (writeTChan, readTChan, atomically)
import Control.Concurrent.STM.TChan
import Network.Socket hiding (send, sendTo, recv, recvFrom)
import Network.Socket.ByteString
import Data.ByteString hiding(putStrLn, head)
import qualified Data.ByteString.Char8 as Char8 (putStrLn, putStr)
import System.IO

main :: IO ()
main = withSocketsDo $  do
    hSetBuffering stdout NoBuffering
    addrinfos <- getAddrInfo
                 (Just (defaultHints {addrFlags = [AI_PASSIVE]}))
                 Nothing (Just "2000")
    let serveraddr = head addrinfos
    sock <- socket (addrFamily serveraddr) Datagram defaultProtocol
    bindSocket sock (addrAddress serveraddr)
    chan <- newTChanIO
    forkIO(producer chan sock)
    -- Uncomment the threadDelay below to see lossy version
    -- threadDelay (1000000 * 20)
    forkIO(consumer chan)
    forever $ threadDelay (1000000 * 60)

producer :: TChan ByteString -> Socket -> IO ()
producer chan sock = forever $ do
    (msg) <- recv sock 256
    atomically $ writeTChan chan msg

consumer :: TChan ByteString -> IO ()
consumer chan = forever $ do
    msg <- atomically $ readTChan chan
    Char8.putStr msg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-02T23:46:43.150

为什么您不会期望数据丢失？这在任何语言中都会发生，不仅仅是 Haskell，因为内核对于每个套接字只有有限的缓冲区空间。因为与 TCP 不同，UDP 不受流量控制，内核只会丢弃数据包。您当然可以使用 SO_RCVBUF 套接字选项增加缓冲区大小。但从根本上说，UDP 无论如何都不可靠，因此任何使用它的实际应用程序都需要处理数据包丢失。

# spotify - libspotify API：如何使用 libspotify API 检索封面艺术？

> ID：10823976
> 
> 赞同：1
> 
> 时间：2012-05-30T20:44:39.747
> 
> 标签：spotify

[使用 Spotify API 检索封面插图](https://stackoverflow.com/questions/10123804/retrieve-cover-artwork-using-spotify-api)的帖子说没有办法使用 Spotify 的 Web API 检索封面插图，但我想知道是否可以使用 libspotify API检索封面插图**URI 。**

我注意到有几个 API： **sp_album_cover**用于获取表示专辑封面的图像 ID， **sp_image_create**用于从 ID 创建图像对象，以及 **sp_image_data**用于从图像对象获取图像数据。

**sp_album_cover**返回的图片ID是图片URI的ID吗？例如 ID 是来自“spotify:image:3ad93423add99766e02d563605c6e76ed2b0e450”的“3ad93423add99766e02d563605c6e76ed2b0e450”？

**sp_image_data**返回的图像数据是什么？它是图像本身的原始数据（即隐蔽的艺术品图像）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:33:02.077

返回的图像数据采用该图像返回`sp_image_data()`的格式`sp_image_format()`- 此时通常为 JPEG。

# asp.net-mvc-3 - IIS7.5 上的 MVC3 站点 - 如何使静态内容在会话之外可用？

> ID：10823977
> 
> 赞同：1
> 
> 时间：2012-05-30T20:44:45.430
> 
> 标签：asp.net-mvc-3, iis-7.5, asp.net-mvc-routing, http-status-code-404

我有一个 MVC3 站点，静态图像从 /Content/images 很好地提供给站点的用户，但是如果我尝试**在 session 之外**访问它们，我会得到 404 。

这是 Facebook 对话框中使用的图标和小型品牌资产的问题，因为当第三方页面引用它们时，它们很自然地 404。

我将以下内容添加到 /Content 文件夹中的 web.config 中，但没有骰子：

```
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <handlers>
    <remove name="BlockViewHandler" />
  </handlers>
</system.webServer> 
```

这些只是小文件，虽然我可以将它们放到第三方 CDN 上，但它使版本控制更加复杂。

我在想我可能需要配置 IIS 以绕过 ASP.NET 路由或创建 /assets 文件夹并添加类似`routes.IgnoreRoute("assets/{*pathInfo}");`Global.asax 的内容。

最好的计划？

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:58:42.920

这似乎更多地是关于您的会话代码的问题，而不是关于如何配置 IIS 的问题。理论上，静态文件托管通过 IIS“正常工作”——与动态内容相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:01:51.880

您是否考虑过将这些资产放在子域中？

过去我将图像放在不同的域上：images.mydomain.com

# python - 对默认字典 python 进行排序

> ID：10823979
> 
> 赞同：0
> 
> 时间：2012-05-30T20:44:56.830
> 
> 标签：python

我有以下类型的默认字典：

```
 defaultdict(<type 'list'>, {573014L: [{564470L: 0.011759742609333696}, {573012L:
 0.99999999999999978}, {573013L: 0.0032456927808054942}, {573015L: 
 0.0032456927808054942}, {573016L: 0.0038420894057914217}, {573017L: 
 0.0038420894057914217}, 
{573018L: 0.0034037733703310181}, {573019L: 0.0034037733703310181}], 573012L: [{564470L:  
0.011759742609333696}, {573013L: 0.0032456927808054942}, {573014L: 0.99999999999999978}, 
{573015L: 0.0032456927808054942}, {573016L: 0.0038420894057914217}, {573017L: 
0.0038420894057914217}, {573018L: 0.0034037733703310181}, {573019L: 
 0.0034037733703310181}] } 
```

所以对于每个主键，我想根据它们的值对 (k,v) 对的列表进行排序。

例如。对于第一把钥匙

```
 573014:[{573012:0.9999},{564470: 0.11759}.... and so on... decreasing values order...] 
```

我如何以pythonic方式做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:49:14.800

您可以只使用 values 部分的内置功能`sorted()`，但请记住它不会就地排序，因此您需要更新字典。

# objective-c - 移动 MPMovieViewController 全屏控件

> ID：10823980
> 
> 赞同：0
> 
> 时间：2012-05-30T20:44:57.783
> 
> 标签：objective-c, ios, ios5, mpmovieplayercontroller

我正在编写一个包含 MPMoviePlayerViewController 的应用程序。我想使用全屏控件，但由于应用程序要求，我没有在模态全屏中显示 MPMoviewPlayer.view。问题是全屏控件出现在 parentView 顶部下方 20px 处，即好像它们正在计算状态栏是否存在。状态栏在那里，但它的位置已经被考虑在内。我想强制控件回到它们所属的视图顶部。但是，无论如何我都无法从对象中访问它们。有没有办法访问呈现控件的视图，或者如果我想解决这个问题，我是否必须实现一个自定义控件来复制苹果控件？

![应用程序中的电影播放器​​图像](../Images/8727e1c983b05455acfc25e28824f017.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:34:10.973

IOS SDK 有一个具有覆盖视图的示例项目。您可以轻松地将示例中的关闭按钮替换为全屏图标。这不是最简单的解决方案，但它应该可以工作。

[https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)

# mysql - 如何在 MySQL 数据库中查找和替换单个字符串？

> ID：10823984
> 
> 赞同：3
> 
> 时间：2012-05-30T20:45:09.607
> 
> 标签：mysql

我正在将我的 Wordpress 驱动的网站切换到新服务器并同时更改域名，这意味着我必须在我的 MySQL 数据库中查找和替换许多字段。

具体来说，每当“olddomain.com”出现在 MySQL 中的某个字段（例如“http://olddomain.com/?p=34”）中时，我必须将它们替换为“newdomain.com”。

如何在我的 MySQL 数据库中进行大量查找替换？我知道`LIKE`SQL 命令可以在其中找到带有“olddomain.com”的字段，但是如何替换字段的特定部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:59:05.013

您可以为此目的使用此搜索和替换脚本

[http://interconnectit.com/124/search-and-replace-for-wordpress-databases/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)

正如作者所说`replace`，在这些情况下，raw 不好

> 当您在域之间迁移 WordPress（或在数据库中使用序列化 PHP 字符串的任何其他平台）时，您必须使用安全的搜索和替换方法来保持序列化字符串长度的完整性。一个简单的 localhost 转储文件，例如，thenewdomain.com 是有问题的，因为字符串的长度会发生变化，但序列化字符串的索引不会。因此设置丢失并且小部件消失。不好。

在[Wordpress.org](http://codex.wordpress.org/Moving_WordPress)文档本身中引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T20:55:19.753

您可以使用 MySQL 的[`REPLACE()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)功能：

```
UPDATE `table` SET `fieldname` = REPLACE(fieldname, 'olddomain', 'newdomain'); 
```

另一种选择是转储数据库并在您选择的编辑器中使用查找和替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:57:16.507

这应该可以帮助你。它只会替换`olddomain.com`为`newdomain.com`. 左边和右边的字符串`olddomain.com`将保持不变。

```
UPDATE tablename 
SET columnname = REPLACE(columnname, 'olddomain.com', 'newdomain.com')
WHERE columnname LIKE '%olddomain.com%'; 
```

这就是函数的工作原理 -`REPLACE(text_string, from_string, to_string)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T20:58:05.260

由于切换服务器意味着必须转储数据库，因此您可以在创建脚本中将 olddomain 替换为 newdomain。

# android - onSaveInstanceState 的目的

> ID：10823987
> 
> 赞同：3
> 
> 时间：2012-05-30T20:45:17.167
> 
> 标签：android, save, android-activity

我一直在尝试在 Android 中构建一个任务列表，即使应用程序关闭，我也希望它记住列表中的内容。我一直在尝试使用`onSaveInstanceState`以下方法来做到这一点：

```
public class Main extends Activity implements OnClickListener, OnKeyListener {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ...
        if (savedInstanceState != null) {
            ToDo = savedInstanceState.getStringArrayList("MyArrayList");
            AA.notifyDataSetChanged();
        } else {
            ToDo = new ArrayList<String>(); // Initiate ToDo
        }
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        super.onSaveInstanceState(savedInstanceState);
        savedInstanceState.putStringArrayList("MyArrayList", ToDo);
    }
    // ...To-Do implementation follows
} 
```

但这不起作用，所以我开始阅读`onSaveInstanceState`，如果我理解正确，那么你实际上无法在会话之间保存数据。那么你怎么能做到呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T20:57:12.113

查看有关[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)的 Android 文档，了解有关持久数据的选项。您可以使用共享首选项、SQLite 数据库、私有内部目录中的文件或 SD 卡上的文件（如果可用）。

基本上，`onSaveInstanceState`用于 Android 终止您的活动以回收内存的场景。在这种情况下，操作系统将记录您的活动是否存在，以防用户返回它，然后它将`Bundle`from传递`onSaveInstanceState`给您的`onCreate`方法。它不适用于通用存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:01:47.113

我会将待办事项放在数据库中，并将数据保存在数据库中的“onPause()”中。当活动丢失数据等时，您可能需要阅读[活动生命周期以获取描述。](http://developer.android.com/guide/topics/fundamentals/activities.html#Lifecycle)

[这个线程](https://stackoverflow.com/questions/4701275/how-to-use-variable-in-onsaveinstancestate)也可能对 onSaveInstanceState 感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T20:54:42.123

每次销毁和重新创建活动时都会调用 onSaveInstanceState()，例如在方向更改期间或设备在低内存上运行时。使用它来保存状态变量并在活动被杀死和重新创建的情况下采取适当的措施。

您需要的是 SharedPreferences，即使在应用程序关闭并重新打开时也能保留数据。看看这个 ：

```
 //Initialize the list
    Set<String> valueSet = new HashSet<>();
    valueSet.add("A");
    valueSet.add("B");

    //Saving data in sharedPreferences
    SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
    SharedPreferences.Editor editor =  sharedPreferences.edit();
    editor.putStringSet("key_name", valueSet);
    editor.commit();

    //Retrieving saved data from sharedPreferences (even in later sessions)
    valueSet = sharedPreferences.getStringSet("key_name", null); 
```

# c# - LINQ 内连接 - 从两个表返回

> ID：10823990
> 
> 赞同：2
> 
> 时间：2012-05-30T20:45:21.077
> 
> 标签：c#, linq, inner-join

我有以下查询

```
var customers = from customer in context.tblAccounts 
                join assoc in context.tblAccountAssociations on customer.AccountCode equals assoc.ChildCode 
                where customer.AccountType == "S" || customer.AccountType == "P" 
                select customer, assoc; 
```

C# 不喜欢末尾的“assoc”。

我的错误信息是：

不能在此范围内声明名为“assoc”的局部变量，因为它会给“assoc”赋予不同的含义，后者已在“子”范围中用于表示其他内容。

我需要从两个表中返回所有列，然后使用

foreach（客户中的客户）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T20:50:19.383

为什么你有这条线：

```
select customer, assoc; 
```

您是要退回客户、同事还是两者兼而有之？假设是后者，您可以使用匿名类型将它们组合起来：

```
select new { Customer = customer, Assoc = assoc }; 
```

然后每个项目`customers`都有两个属性，`Customer`你`Assoc`可以从中获取你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:51:04.283

您可以将这两个项目包装在匿名类型中。

```
var customers = from customer in context.tblAccounts 
            join assoc in context.tblAccountAssociations on customer.AccountCode equals assoc.ChildCode 
            where customer.AccountType == "S" || customer.AccountType == "P" 
            select new {customer, assoc}; 
```

# mysql - 如何记录特定数据库的mysql慢查询

> ID：10823991
> 
> 赞同：3
> 
> 时间：2012-05-30T20:45:21.427
> 
> 标签：mysql, performance, configuration, centos

我的 sql 实例有几个不同的数据库。

我已将 my.cnf 配置为使用以下行记录慢速查询：

```
log_error=/var/log/mysql/error.log
log_queries_not_using_indexes=1
slow_query_log=1
slow_query_log_file=/var/log/mysql/mysql-slow.log
long_query_time=1 
```

它工作正常，但我只想为特定数据库提供日志。

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:49:28.367

慢查询日志是一个全局参数。

[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_slow_query_log](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_slow_query_log)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T06:13:59.467

您可以在文件中使用 mysql 慢日志，然后使用此命令查找特定数据库的慢日志行：

```
cat  /var/lib/mysql/slow.log |grep -A 3 {your_db_name} 
```

# excel - Excel（跨工作簿）

> ID：10823993
> 
> 赞同：0
> 
> 时间：2012-05-30T20:45:38.077
> 
> 标签：excel, vba

我有三个工作簿，A、B 和 C。

A 有一个名称列表，表明我应该从 B 移动到 C。

我正在 A 中编写一个宏来执行此操作。我只想打开/引用 B 和 C，并能够扫描 A 中的所有内容与 B 中的所有内容，并且每当我遇到匹配项时，从 B 中剪切行并附加到 C 的末尾。

我只是在正确打开/引用工作簿时遇到了问题，更不用说其他一切了

例如，我正在尝试使用 C 中的最后一行，但这给我带来了麻烦

```
path = "C:\MyPath\"

bBath= path & "B.xls"
cPath= path & "C.xls"

Set bBook = Application.Workbooks.Open(bPath)
Set cBook = Application.Workbooks.Open(cPath)

k = 1
While cBook.Sheets("SomeSheetName").Row(k, 1) <> ""
    k = k + 1
Wend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:55:00.777

代替

```
k = 1
While cBook.Sheets("SomeSheetName").Row(k, 1) <> ""
    k = k + 1
Wend 
```

和

```
k = cBook.Sheets("SomeSheetName").UsedRange.SpecialCells(xlCellTypeLastCell).Row 
```

这将为您提供工作表上有数据/格式的最后一行。

如果您需要该列是绝对的，您可以这样做

```
k = cBook.Sheets("SomeSheetName").Cells(cBook.Sheets("SomeSheetName").Rows.Count,1).End(xlUp).Row 
```

例如会给你在第 1 列中使用的最后一行。将 B 的 ,1 更改为 ,2 等等。（你可以把它清理一下，这样更容易阅读）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:18:41.723

将行（k，1）更改为单元格（k，1）。

# macos - Unix 屏幕实用程序错误：找不到“xterm-256color”的 termcap 条目

> ID：10823994
> 
> 赞同：15
> 
> 时间：2012-05-30T20:45:41.177
> 
> 标签：macos, ssh, gnu-screen, termcap, netbsd

我通过 Mac 的 ssh 连接在 NetBSD 系统上工作，我想使用该`screen`实用程序，以便我可以启动进程并在终端连接中断后返回它们。当我键入时，`screen`我收到错误消息：

```
Cannot find termcap entry for 'xterm-256color' 
```

浏览了论坛帖子后，我认为这与远程机器上的 termcap 有关，但似乎并非如此；我可以从另一台计算机的 ssh 会话中毫无错误地启动屏幕，而我通常无法访问该计算机。这表明我需要在本地机器上配置一些东西，但我无法弄清楚什么或如何。虽然这篇文章被标记为“gnu-screen”，但我怀疑我正在使用 Berkeley screen，尽管我不知道这是否是一个显着的区别。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-30T21:12:36.237

快速修复：运行`TERM=xterm screen`而不是`screen`.

您收到错误是因为在您的 mac 上您有`TERM=xterm-256color`，并且 xterm-256color 不在远程机器的 termcap 中。从另一台计算机连接时不会出现错误，因为它的 TERM 变量设置为其他值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-27T01:40:08.360

您可以亲自将其添加到 $HOME/.termcap - 在您的 NetBSD 帐户上运行它：

```
infocmp -C xterm-color | sed -e 's/xterm-color/xterm-256color/' > $HOME/.termcap 
```

但是您也可以作为 root（或询问 root）将 termcap 条目添加到 /usr/share/misc/termcap。这将为所有用户修复它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-28T19:10:48.713

在 OS X 中，在*Profiles*选项卡下，然后是*Advanced*，然后*是 Terminfo*，从 切换`xterm-256color`到`xterm`。

![终端设置](../Images/dc0477d2f9ad58f7639e4ec28656cd20.png)