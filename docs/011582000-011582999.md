# StackOverflow 问答 11582000-11582999

# python - 在写入标准输入之前从 os.popen4 读取输出

> ID：11582002
> 
> 赞同：0
> 
> 时间：2012-07-20T15:07:29.633
> 
> 标签：python

我有一个使用 os.popen4 执行某些命令的脚本。问题是正在执行的某些时间命令将需要用户输入（“y”或“n”）。我正在阅读 stdout/stderr 并打印它，但似乎命令中的问题没有被打印并且它挂起。为了使它工作，我不得不盲目地将“n”写入标准输入。有人可以指导如何处理吗？

代码不起作用：

```
 (f_p_stdin, f_p_stdout_stderr) = os.popen4(cmd_exec,"t")
    cmd_out = f_p_stdout_stderr.readlines()
    print cmd_out
    f_p_stdin.write("n")
    f_p_stdin.close()
    f_p_stdout_stderr.close() 
```

工作代码：

```
 (f_p_stdin, f_p_stdout_stderr) = os.popen4(cmd_exec,"t")
    cmd_out = f_p_stdout_stderr.readlines()
    f_p_stdin.write("n")
    f_p_stdin.close()
    print cmd_out
    f_p_stdout_stderr.close() 
```

注意：我知道它已被折旧并且使用了子流程模块，但现在我不知道如何使用它。因此，如果有人能帮助我使用 os.popen4 处理它，我将不胜感激。我想捕获问题并处理来自用户的输入并执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:55:27.970

`readlines()`：返回一个包含文件中所有数据行的列表。如果从这种情况下的进程中读取，很有可能它不会发送换行符和/或刷新输出。您应该从输入中读取字符并对其进行处理以查看是否提出了问题。

知道是什么`cmd_exec`样子会有所帮助，这样其他人就可以尝试模仿您的尝试。

* * *

更新：

我`uncheckout`用 Python 写了一个命令：

```
#! /usr/bin/env python
# coding: utf-8

import sys

print 'Uncheckout of {} is irreversible'.format(sys.argv[1])
print 'Do you want to proceed? [y/N]',
sys.stdout.flush()
x = raw_input()

if x == 'y':
    print sys.argv[1], "no longer checked out"
else:
    print sys.argv[1], "still checked out" 
```

我故意将提示字符串不作为 raw_input 的参数，以便能够`flush()`显式执行。

您的代码片段都不能使用它（假设`cmd_exec`是 `['./uncheckout', 'abc.txt']`or `'./uncheckout abc.txt'`，`popen4()`在后一种情况下使用 shell 来启动程序）。只有当我`readlines()`在 write() 和 close() 之后移动 until 时，命令才会继续。这对我来说很有意义，因为 close() 会刷新输出。您正在以文本模式编写，并且通常会缓冲到行尾，这不在您的`.write('n')`.

为了能够检查提示是什么并对其进行测试和反应，以下内容适用于上述内容`uncheckout`：

```
#! /usr/bin/env python
# coding: utf-8

import os
import sys

cmd_exec = ['./uncheckout', 'abc.txt']

(f_p_stdin, f_p_stdout_stderr) = os.popen4(cmd_exec,"t")
line = ''
while True:
    x = f_p_stdout_stderr.read(1)
    if not x:
        break
    sys.stdout.write(x)
    sys.stdout.flush()
    if x == '\n':
        line = ''
    else:
        line += x
    if line.endswith('[y/N]'):
        f_p_stdin.write("n\n")
        f_p_stdin.flush()
        sys.stdout.write('\n') 
```

也许你可以从那倒过来做一些适合你的东西。确保在适当的地方保持冲洗。

# ruby-on-rails - psql：致命：用户“blah”的对等身份验证失败

> ID：11582007
> 
> 赞同：3
> 
> 时间：2012-07-20T15:07:45.520
> 
> 标签：ruby-on-rails, postgresql

在 CentOS 上，我正在尝试使用 rake 将数据从 sqlite3 迁移到 postgresql。

当我尝试使用命令行连接到 PostgreSQL 时：

```
psql -d <db> -U <user> -W 
```

我得到：

```
psql: FATAL:  Peer authentication failed for user "blah" 
```

为了测试，我什至将方法设置为信任 psql。以下是我的内容`pg_hba.conf`：

```
local   all         all                               trust
# IPv4 local connections:
host    all         all         127.0.0.1/32          trust
# IPv6 local connections:
host    all         all         ::1/128               trust 
```

有什么想法可能是错的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:33:57.693

重新启动 PostgreSQL，如果失败，请发布*完整*的pg_hba.conf 供我们查看。

要么 PostgreSQL 没有重新加载这个文件，要么你正在查看错误的 pg_hba.conf。

# html - 设置框架的最小高度？

> ID：11582010
> 
> 赞同：2
> 
> 时间：2012-07-20T15:07:54.223
> 
> 标签：html, css

我的框架如下：

```
<Frameset rows="45%,*">
<Frame name = "navigation" src = "navigation.html" " marginwidth="0" marginheight="0">
<Frame name = "Index" src="HTML Structure.html">
</Frameset> 
```

我允许`navigation`调整框架的大小，但我想为框架高度设置最小值和最大值。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:14:22.923

max-height 属性，类似于在 CSS 中实现 div 宽度和高度的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:32:41.307

把事情简单化：

```
<div id="wrap">

 <div id="nav"></div>

 <div id="content"></div>

</div> 
```

像这样的一些CSS：

```
body {
 text-align:center;
}    

div#wrap {
 width:960px;
 margin:0 auto;
}

div#nav {
 width:960px;
 margin-bottom:20px;
}

div#content {
 width:960px;
 margin-bottom:20px;
} 
```

以上内容应该可以帮助您入门，但可能性显然几乎是无限的。

# java - 使用 Log4J 和 SLF4J 在 SysLog 中自定义参数

> ID：11582012
> 
> 赞同：1
> 
> 时间：2012-07-20T15:07:56.857
> 
> 标签：java, tomcat, log4j, slf4j

我在我的应用程序中使用了带有 SLF4J 的 Log4J，现在它以标准格式记录请求，并且还将默认信息发送到 syslog。我这样做是因为在记录每个请求时我都需要一些信息——发出请求的帐户和/或用户 ID、请求方法类型——发布、获取等。

有没有办法将相同的自定义信息发送到系统日志？

根据我的发现，您可以更改日志条目的格式，但您不能将其他信息附加到系统日志，因为这会破坏格式并且可能不会被拉入各种报告工具并且您无法更改内容的一段日志 - 例如，更改类别以保存请求方法类型。我在想那条路线，所以工具会收集数据。

是否有一个很好的工具可以指定日志格式并且可以解析它，或者它可以处理不同的日志格式？我需要更多地了解谁在哪里做什么，所以我需要创建自定义报告，而不是标准——每页有多少点击等。

# riak - 在保存原始 riak 对象（使用预提交挂钩）之后，是否可以（并且明智地）向 riak 搜索索引文档添加更多数据？

> ID：11582015
> 
> 赞同：2
> 
> 时间：2012-07-20T15:08:13.800
> 
> 标签：riak, riak-search

我正在使用 riak（和 riak 搜索）来存储和索引文本文件。对于每个文件，我创建一个 riak 对象（文件的文本内容是对象值）并将其保存到 riak 存储桶中。该存储桶配置为使用默认搜索分析器。

我想为这些文件存储（并能够搜索）一些元数据。比如提交日期，大小等。

所以我在 IRC 上问过，也考虑过。以下是一些解决方案，尽管它们不如我想的那么好：

1.  我可以有第二个“元数据”对象来存储有问题的数据（可能在另一个存储桶中），将其编入索引等。但这不是一个很好的解决方案，特别是如果我希望能够进行组合搜索，例如 value:someword和日期：某天

2.  我可以将文件的内容放在 JSON 对象中，例如：{"date":somedate, "value":"some big blob of text"}。这可以工作，但它会给搜索索引器带来过多的负载，因为它必须首先反序列化一个大的 json 对象（这些文件有时非常大）。

3.  我可以编写一个自定义分析器/索引器来读取我的文件对象并生成/索引相关元数据。这里唯一真正的问题是我很难找到有关如何做到这一点的文档。它可能有点像一个可操作的 PITA，因为我需要将一些 erlang 代码推送到每个 riak 节点（并记住在我更新集群、添加新节点等时这样做）我可能错了对此，如果是这样，请纠正我。

所以对我来说最好的解决方案是，如果我可以更改 riak 搜索索引文档，并在它生成后向它添加一些任意搜索字段。这可能吗，这是否明智，图书馆等是否对此提供支持？我当然可以“手动”修改有问题的文档，因为带有索引文档的存储桶会自动创建，但正如我所说，我只是不知道什么是正确的做法。

# php - 使用 Nginx 或 Apache 提供动态内容？

> ID：11582016
> 
> 赞同：6
> 
> 时间：2012-07-20T15:08:14.283
> 
> 标签：php, apache, concurrency, nginx, notifications

如果今天（2012 年夏季）正在开发一个网站，您应该使用 Apache 还是 Nginx 来提供动态内容（PHP）？

对于以下场景，Apache 和 Nginx 的优缺点是什么：

1.  使用从 Nginx 到 Apache 的反向代理，直升 Nginx，直升 Apache。
2.  推送通知：如果您想提供聊天或通知等实时功能怎么办？
3.  操作系统：我选择使用 Linux AMI 或 Ubuntu 作为操作系统的 Amazon EC2 实例，但如果我使用不同的服务进行托管，这有关系吗？

这是考虑到 Apache 和 Nginx 可以选择哪个版本没有限制。

# ruby-on-rails - 从 Model 获取默认名称或 id 输入

> ID：11582017
> 
> 赞同：0
> 
> 时间：2012-07-20T15:08:14.620
> 
> 标签：ruby-on-rails

大家好，大家都知道 Rails 默认放置 id 和名称 id=model_attribute 和 name=model[attribute]。

我的问题是如何使用 I18n 从 Model o 获取默认 ID 或名称？

例如 User.human_attribute_name 'password' 给出密码标签，以及我如何放置 User.give_me_the_id_or_name 'password' 并给出 'user[password]' 或 'user_password'

提前考虑^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:48:47.150

看源头。[http://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/tags/base.rb](http://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/tags/base.rb) 如果你真的想在你的模型类中构建你自己的构造。:)

```
def self.give_me_the_id_or_name(method)
  result = "#{self.model_name.param_key}[#{method.to_s.sub(/\?$/,"")}]"
  result.instance_eval do
    def id
      self.gsub(/\]\[|[^-a-zA-Z0-9:.]/, "_").sub(/_$/, "")
    end
  end
  result
end

User.give_me_the_id_or_name(:password) ===>  "user[password]"
User.give_me_the_id_or_name(:password).id ===> "user_password" 
```

但我实际上不明白你对 I18n 的意思是什么？当您将模型渲染为模板时，这些名称默认用作标签标题。

# map - clojure 101 将向量组合成地图

> ID：11582023
> 
> 赞同：5
> 
> 时间：2012-07-20T15:08:37.793
> 
> 标签：map, vector, clojure, functional-programming, lisp

我对 Clojure 很陌生，似乎无法找到一种方法来做一些我确信是微不足道的事情。我已经查看了该`assoc`功能，因为我认为这可能是答案，但无法使其发挥作用。

是）我有的：

```
keys => [:num, :name, :age]
people =>  [ [1, "tim", 31] [2, "bob" 33] [3, "joe", 44] ] 
```

我想要做的是创建一个地图矢量，每个地图看起来像

```
[ { :num 1, :name "tim", :age 31 } 
  { :num 2, :name "bob", :age 33 } 
  { :num 3, :name "joe", :age 44 } ] 
```

我的 OO 大脑希望我编写一堆循环，但我知道有更好的方法我只是有点迷失在大 API 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T15:31:07.023

试试这个：

```
(def ks [:num :name :age])
(def people [[1 "tim" 31] [2 "bob" 33] [3 "joe" 44]])

(map #(zipmap ks %) people)

=> ({:num 1, :name "tim", :age 31}
    {:num 2, :name "bob", :age 33}
    {:num 3, :name "joe", :age 44}) 
```

请注意，我使用了 Clojure 中的内置过程，`ks`而不是`keys`用于命名键，重新定义它是一个坏主意。`keys`还要注意`map`返回一个惰性序列；如果您绝对需要向量，请执行以下操作：

```
(vec (map #(zipmap ks %) people))

=> [{:num 1, :name "tim", :age 31}
    {:num 2, :name "bob", :age 33}
    {:num 3, :name "joe", :age 44}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:12:51.433

更优雅一点，使用[`clojure.core/partial`](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/partial)：

```
(map (partial zipmap keys) people) 
```

正如 Óscar 建议的那样，您应该为您的`keys`.

# python - 在pyqt4滚动区域python中显示一个长循环函数

> ID：11582025
> 
> 赞同：0
> 
> 时间：2012-07-20T15:08:40.883
> 
> 标签：python, pyqt, pyqt4

我正在设计一个 GUI，作为 GUI 的一部分，我想以一种特殊的方式检索数据并将其显示在滚动区域上。但是我不知道该怎么做，我已将数据库检索功能定义为 cpu_alert，但是如何将结果（行）放入滚动区域？请看一下代码。

```
from PyQt4 import QtCore, QtGui
import ui_intex_server_monitorui as intex
from PyQt4 import Qt
import sys
import os
import MySQLdb as mdb

class MyMain(QtGui.QMainWindow, intex.Ui_MainWindow):
    def __init__(self, parent=None):
        super(MyMain, self).__init__(parent)
        self.setupUi(self)  

        #Exit Button
        self.connect(self.pushButton_2, QtCore.SIGNAL('clicked()'),
            self.close)
        #Refresh Button here#
        self.testdata = QtGui.QListWidget(self)
        layout = self.scrollArea_10
        layout.setWidget(self.testdata)
        self.testdata.addItem(self.cpu_alert.rows)

def cpu_alert():
    control = True

    while (control == True):

        f = open("connection_cpu.txt","r")
        a = f.read()
        con = mdb.connect('server', 'user', 'pass', 'db')

        if a == "CPU Overload":
            with con: 
                cur = con.cursor()
                cur.execute("""SELECT *
                               FROM cpu_alert
                               WHERE date = (SELECT MAX(date) FROM cpu_alert)""")
                rows = str(cur.fetchone())
                rows = rows.strip("()" "''")
                open("connection_cpu.txt","w").close()
      return rows

def main():
   app = QtGui.QApplication(sys.argv)
   app.setStyle(QtGui.QStyleFactory.create("plastique"))
   main_window = MyMain()
   main_window.show()
   app.exec_()

if __name__ == '__main__':
   main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:36:08.837

首先让我先谈谈您如何检查是否有可用的新更新。如果您要调用此`cpu_alert`方法，您将在主线程中进入一个繁忙的循环并阻塞您的大部分 GUI 功能。此外，没有什么限制这个繁忙的循环，所以它会在你的文件上旋转得非常快。假设检查文件的内容是您打算使用的方法，它需要在一个单独的线程中。该线程将在文件上循环并休眠一个合理的量。如果它找到它需要的文本，那么它可以发出一个信号。然后，此信号将连接到更新您的表的插槽。

但是让这更简单，因为您所做的所有检查都是快速读取文件。因为不需要太多时间，我们可以使用 QTimer。计时器将触发并调用检查器。如果检查器找到并更新它，它可以直接调用表更新或使其更健壮，您只需发出一个信号。

这是一个完整的示例，我稍后将对其进行分解：

```
from PyQt4 import QtGui, QtCore, QtSql
import time

class Window(QtGui.QDialog):

    update_ready = QtCore.pyqtSignal()

    def __init__(self):
        super(Window, self).__init__()

        self.layout = QtGui.QVBoxLayout(self)
        self.table = QtGui.QTableView()
        self.layout.addWidget(self.table)

        self.db = QtSql.QSqlDatabase.addDatabase("QMYSQL")
        self.db.setHostName("server")
        self.db.setDatabaseName("db")
        self.db.setUserName("user")
        self.db.setPassword("pass")
        self.db.open()

        self.model = QtSql.QSqlTableModel(self, self.db)
        self.model.setTable("cpu_alert")
        self.model.setEditStrategy(self.model.OnManualSubmit)
        self.model.setQuery(QtSql.QSqlQuery("""
            SELECT *
            FROM cpu_alert
            WHERE date = (SELECT MAX(date) FROM cpu_alert)"""))
        self.model.select()

        self.table.setModel(self.model)

        self.button = QtGui.QPushButton("Select")
        self.layout.addWidget(self.button)

        self.button.clicked.connect(self.model.select)
        self.update_ready.connect(self.model.select)

        self.timer = QtCore.QTimer()
        self.timer.timeout.connect(self.cpu_alert_checker)
        # check every second
        self.timer.start(1000*1)

        # this is only for the temp time test
        self._now = time.time()

    def cpu_alert_checker(self):
        # You would do whatever check you want 
        # in this function
        if time.time() - self._now > 5:
            print "Update ready!"
            # emit this signal if the table should refresh
            self.update_ready.emit()
            self._now = time.time() 
```

无需执行原始驱动程序查询，您可以使用内置的 QSql 来创建自动驱动表的模型。有很多选项可以设置表格和模型应如何显示每一行。但我让它非常基本。

我创建了一个按钮并将其连接到 sql 模型上的 select()。我还创建了 QTimer，并设置它的超时来调用你的 cpu_alert_checker()。我们启动计时器，以便每秒触发一次。您可以根据自己的喜好调整此速度。

当超时触发时，cpu_alert_checker 中的代码运行。我只是在其中放置了一个计时器作为占位符，以使测试更容易查看。当时间超过 5 秒时，它将触发并重置。您会看到我们定义了一个名为 update_ready 的自定义信号。我们可以在上面发射，并连接到它。它使您的检查器更加健壮，因为它不必直接知道该功能。它可以通知您的应用程序已准备就绪。

我希望这个例子可以帮助你。我认为以这种方式管理要容易得多。如果您的检查器正在做更多繁重的工作，则需要将其移至 QThread 以不阻塞主线程。

# linux - Grep 一件事然后从下面的行中删除

> ID：11582026
> 
> 赞同：0
> 
> 时间：2012-07-20T15:08:42.477
> 
> 标签：linux, bash, shell, scripting, grep

好吧，所以我无法弄清楚这一点。就像我使用 grep 来获取某些信息的文件一样，它的设置是这样的。

```
#aaaa
<numbers 123456>

blah
blah
blah

#bbbb
<numbers 2156488>

blah
blah
blah

#cccc
<numbers 5478624>

blah
blah
blah 
```

我正在做的是我正在寻找`aaaa`或`bbbb`或`cccc`我真正需要的信息是数字。就像当我 grep 时`aaaa`我想要获得的东西实际上只是它下面的数字。在这种情况下，它会`123456`

我知道如何 grep for`aaaa`但我不知道如何转到下一行并减少数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:26:03.130

Using sed:

```
sed -n '/aaaa/{
N
s/[^0-9]*\([0-9]*\).*/\1/p
}' input_file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:14:10.400

您可以使用`-C`选项`grep`来显示一行上下文。然后您可以`tail`在最后一行 ( `-n 1`)，`cut`使用空格并选择第二个字段，`cut`再次使用`>`并选择第一个字段。因此：

```
$ grep aaaa file -C 1 | tail -n 1 | cut -f2 -d' ' | cut -d'>' -f1
123456 
```

将返回您请求的号码。

最重要的部分是`-C`选项`grep`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:22:34.367

对我来说，这更像是一份工作`sed`：

```
sed -n '/^#[a-z]\{4\}/{ N; s/#.*\n<numbers //; s/>//p; }' 
```

说默认情况下`-n`不打印。`/^#[a-z]\{4\}/`看起来`#aaaa`像; 里面的动作`{ ... }`只适用于这样的行。意思是“`N`阅读下一行”；第一个`s///`删除数字之前的材料；第二个删除尾随`>`和打印。

关于如何执行“删除无关材料”还有其他选项，例如只有一个替代命令`s/[^0-9]*\([0-9][0-9]+\).*/\1/`：这将捕获第一个数字字符串并删除其他所有内容。它将比最初显示的更受约束的正则表达式处理更多的输入变化。

样本数据的输出：

```
123456
2156488
5478624 
```

这不会自动成为`sed`; 更改它，以便有趣的信息是比赛后的第三行，并且它会变得很复杂`sed`（尽管`N;N;N;`可能是想要的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:23:59.087

@ Lars Kotthoff

Your suggestion to use the `-A 1` option worked perfectly!

The answer using your input is this:

```
grep "aaaa" file -A 1 | grep "<numbers" | cut -d" " -f2 | cut -d">" -f1 
```

I would love to give you the credit for this one!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T18:17:42.703

试试这个：

```
for i in "aaaa bbbb"
do
sed -n '/'"$i"'/,+1 p' test |tail -n1|cut -d' ' -f2| sed 's/.$//'
done 
```

它的效率不是很高，但做得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T16:28:36.387

如果你不是坚持`grep`
`+0`要去掉“>”

```
awk 'f{print $2+0; exit} /^#aaaa/{f=1}' foo.txt 
```

或者

```
awk 'f{print $2+0; f=0} /^#aaaa/{f=1}' foo.txt 
```

# javascript - Image.onload 函数返回高度和宽度为零

> ID：11582027
> 
> 赞同：3
> 
> 时间：2012-07-20T15:08:45.080
> 
> 标签：javascript

```
var icon1 = new Image();
var wid1;
var hei1;
icon1.onload = function () {
    wid1 = icon1.width;
    hei1 = icon1.height;
};
icon1.src = resource;
var rati = wid1 / hei1; 
```

我要做的是获取图像的宽度和高度，然后计算将进一步有助于保持图像纵横比的比率。

但是当我运行这段代码时，很多时候我会得到图像的宽度和高度，因为`0`这将导致转换比率`NaN`，最终图像由于`0`高度和宽度而永远不会加载。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:13:00.567

此操作异步运行。该行：

```
var rati=wid1/hei1; 
```

无论图像是否加载都运行。这意味着`wid1`and`hei1`是`undefined`和将两个未定义的值相除的结果`NaN`。

`wid1`在对它们进行操作之前，请确保`hei1`已加载。您可以做的是将除法操作放在`onload`处理程序中（以及取决于这些值的所有其他内容：

```
var icon1, wid1, hei1, rati;

//create our image object
icon1 = new Image();

icon1.onload = function () {
    wid1 = icon1.width;
    hei1 = icon1.height;
    rati = wid1 / hei1;

    //everything else that depends on these variables 
    //should be placed here as well

};

//start loadin'
icon1.src = resource; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:13:18.507

JavaScript 异步加载图像，因此您尝试在图像仍在加载时计算比率。您必须将计算移动到回调函数中：

```
var icon1 = new Image();
var wid1;
var hei1;
icon1.src = resource;
icon1.onload = function () {
    wid1 = icon1.width;
    hei1 = icon1.height;
    var rati = wid1 / hei1;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-10T18:03:20.210

我遇到了一个问题，即 onload 回调中的 image.width 和 image.height 为 0。它们是为 jpg 文件设置的，而不是在我加载 png 时设置的。我通过在 onload 回调函数中使用 this.width 和 this.height 解决了这个问题。那些不是零。
也许这会帮助别人。我用的是铬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:12:09.543

比赛条件。您是`rati`在图像加载之前定义的，所以很明显它不知道正确的大小并且`undefined/undefined`. 要修复，只需将需要加载图像的所有代码放入`icon1.onload`处理程序中。

# java - 将标志传递给对象的正确设计模式

> ID：11582028
> 
> 赞同：2
> 
> 时间：2012-07-20T15:08:45.863
> 
> 标签：java, oop, design-patterns, enum-flags

在C中我做过这种事情

```
enum { USE_COKE = 1,
        USE_PEPSI = 2,
        USE_JUICE = 4,
        USE_WATER = 8 };

 int makeDrink(int flags);

 //...

 int rcode = makeDrink(USE_COKE | USE_JUICE | USE_WATER); 
```

我知道这是非常标准的，`iostream`例如它也被使用。我想知道如何将这种设计模式翻译成 Java 或 OOP？我*很*确定多态不是这里的方法，因为我的代码有一个`if(flag_is_set)`块比重写大部分例程更好。是否有一个实用程序`Flags`类，或者使用配置对象、一个`enum`或一堆整数等来执行此操作的首选方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:11:02.317

Java有枚举。这是[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

我会在整数等上使用这些。这是一个类型安全的解决方案，并且由于枚举是对象，您可以附加行为并避免`switch`语句。

[您可以使用EnumSet](http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html)组合这些（如上）。从文档：

> 用于枚举类型的专用 Set 实现....这种表示非常紧凑和高效。这个类的空间和时间性能应该足够好，以允许它用作传统的基于 int 的“位标志”的高质量、类型安全的替代品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-10T08:20:52.390

[Brian Agnew](https://stackoverflow.com/a/11582061/642706)的答案是正确的。Java 有一个强大、灵活且非常方便的[`Enum`](http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html)工具。（不要与现在过时的[`Enumeration`](http://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html)界面混淆。）

# 示例代码

这是基于问题的示例代码。

```
public enum Liquid {
    COKE, PEPSI, JUICE, WATER
} 
```

采用[`EnumSet`](http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html)该枚举类型的方法。

```
public Drink makeDrink ( EnumSet<Liquid> ingredients ) {
    System.out.println ( "ingredients: " + ingredients );
    if ( ingredients.contains ( Liquid.JUICE ) ) {
        // Treat as a Collection. 
        // `EnumSet` is just another `Set` implementation, though a very fast one.
    }
    for ( Liquid ingredient : ingredients ) {
        // Access each item in the collection, each Liquid object in the EnumSet.
    }
} 
```

调用该方法的代码，实例化并传递必要的`EnumSet`.

```
EnumSet ingredients = EnumSet.of ( Liquid.COKE , Liquid.JUICE , Liquid.WATER );
Drink drink = this.makeDrink ( ingredients ); 
```

跑的时候。

> 成分：[可乐、果汁、水]

请记住，这些是真实的对象、类型安全的、编译器强制执行的、静态定义的和自记录的。不要将它们误认为仅仅是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:41:01.163

您还拥有[Java EnumMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumMap.html)，因此您可以在将它们的总和传递给您的方法之前从您的饮料所需`EnumMap`的所有值中获取值`USE_XXX`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T15:19:05.903

有多种选择可以实现这一点。

*   我个人喜欢 C 风格的位操作方式，只是创建一个枚举或一组最终静态。
*   Java 中的另一个选项是使用[java.util.BitSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)对象。
*   从真正的 OOP 视图来看，最简洁的方法可能是实现一个带有布尔 getter/setter 的实用程序类。然后将该实用程序类传递给需要使用标志的对象。

# javascript - 如何选择多个元素的兄弟姐妹（）？

> ID：11582035
> 
> 赞同：5
> 
> 时间：2012-07-20T15:09:07.747
> 
> 标签：javascript, jquery

假设我有一个隐藏`<dl>`所有s 的。`<dd>`单击 a使用以下代码`<dt>`切换它后面的s：`<dd>`

```
$(this).nextUntil('dt').toggle(); 
```

[http://jsfiddle.net/mblase75/FZQj7/](http://jsfiddle.net/mblase75/FZQj7/)

现在，我想自动隐藏`<dd>`其他 s 之后的`<dt>`s，所以我尝试使用以下代码获取兄弟姐妹：

```
$(this).nextUntil('dt').toggle()
    .siblings().filter('dd').hide(); 
```

[http://jsfiddle.net/mblase75/FZQj7/1/](http://jsfiddle.net/mblase75/FZQj7/1/)

但是什么都没有发生，因为`<dd>`我已经选择`.nextUntil`的每个都是彼此的兄弟姐妹。结果，它们都被隐藏了，什么也没有显示出来。

必须有一种紧凑的方式来告诉 jQuery 选择所有兄弟姐妹，除了那些我已经选择的兄弟姐妹，但我看不到它。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:12:00.790

这个怎么样？注意`not`函数的使用，[您可以在此处阅读](http://api.jquery.com/not/)。

[http://jsfiddle.net/lbstr/FZQj7/6/](http://jsfiddle.net/lbstr/FZQj7/6/)

```
$('dt').on('click',function() {
    var $this = $(this),
        $firstGroup = $this.nextUntil('dt');
    $firstGroup.toggle();
    $this.siblings('dd').not($firstGroup).hide();
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:14:31.587

~~你可以从父母那里做到：~~

```
$('dt').on('click',function() {
    $(this).nextUntil('dt').toggle().siblings("dt").not(this).nextUntil('dt').hide();
});​ 
```

[http://jsfiddle.net/FZQj7/7/](http://jsfiddle.net/FZQj7/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:20:59.957

一个简单的解决方案是将类应用于您显示的元素。每次单击时，您都可以在显示所需集合之前隐藏具有此类的元素。

[http://jsfiddle.net/FZQj7/11/](http://jsfiddle.net/FZQj7/11/)

```
$('dt').on('click',function() {
    $('.visibledd').hide().removeClass('visibledd');
    $(this)
        .nextUntil('dt')
        .toggle()
        .addClass('visibledd');
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:21:49.753

这里有一些比其他更简单的东西：

```
$('dt').on('click',function() {
    $(this).siblings('dd').hide();
    $(this).nextUntil('dt').show();
}); 
```

# jquery - 某些页面上 wrapAll() 的奇怪行为

> ID：11582039
> 
> 赞同：0
> 
> 时间：2012-07-20T15:09:37.343
> 
> 标签：jquery, jquery-selectors

我正在尝试将页面`<body>`标签中的所有内容包装在名为 bodySemex 的 div 中。对于大多数页面，这工作正常：

```
$('body').children().wrapAll('<div id="bodySemex" />') 
```

但是，在某些页面上，这会导致 body 元素完全消失。（例如，avc.com 和[http://www.theatlantic.com/technology/archive/12/07/how-the-gorgeous-sometimes-fictional-sound-of-the-olympics-gets-made/259742/](http://www.theatlantic.com/technology/archive/12/07/how-the-gorgeous-sometimes-fictional-sound-of-the-olympics-gets-made/259742/)由于这行代码，两者都消失了。

每次发生这种情况时，我都会收到一条错误消息；该消息似乎表明 jQuery 的`each()`函数正在尝试对未定义的内容进行操作。

```
Uncaught ReferenceError: _gat is not defined
(anonymous function)
e.extend.globalEval chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
e.extend.globalEval chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
bp chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
e.extend.each chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
f.fn.extend.domManip chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:4
f.fn.extend.prepend chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:3
f.each.f.fn.(anonymous function) chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:4
(anonymous function) chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/distillery.js:365
e.extend.each chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
e.fn.e.each chrome-extension://clcjngnadninklpbdkjccpoenjdomnid/js/jquery.js:2
bodySwap (Note, this is the name of the line of code the this question is about) 
```

我已经搜索了类似的问题，并尝试了一些 wrapAll 的替代方案（例如，这里讨论的替代方案：[Jquery wrapAllInner() ？- 或者 wrapAll() 内部应用？](https://stackoverflow.com/questions/3835718/jquery-wrapallinner-or-wrapall-applied-interally)）

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:40:56.947

我找到了一个适合我的解决方案。该`.each()`函数似乎在对`<script>`元素进行操作，导致它查找未定义的属性。

所以现在，我`script`在调用之前删除了所有元素`wrapAll()`，因此：

```
$('script').detach();
$('body').children().wrapAll('<div id="bodySemex" />'); 
```

# php - Magento：将导航过滤器应用于 cms 页面

> ID：11582043
> 
> 赞同：1
> 
> 时间：2012-07-20T15:09:56.090
> 
> 标签：php, magento, filter

我创建了一个 cms 页面，其中显示了所有具有特定属性为 1 的产品，为此我自定义了文件 app/code/core/Mage/Catalog/Block/Product/list.php

我在我的页面中使用了以下代码：

```
<reference name="content">
<block type="catalog/product_mylist" name="product_list" template="catalog/product/list.phtml">
<action method="setCategoryId"><category_id>2</category_id></action>
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
<block type="page/html_pager" name="product_list_toolbar_pager"/></block>
<action method="setToolbarBlockName"><name>product_list_toolbar</name></action></block>
</reference> 
```

那么如何让导航过滤器在我的页面中工作？

如果我想要实现的目标是不可能的，请建议我另一种方法来做到这一点

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:12:42.530

修改核心文件是“不不”。为此，您需要一个扩展。幸好我已经写了一篇。

[https://github.com/openstream/CustomListing](https://github.com/openstream/CustomListing)

随意，好像你有任何问题。

# jquery - 如何在 zweatherfeed 中传递插件选项？

> ID：11582045
> 
> 赞同：0
> 
> 时间：2012-07-20T15:09:57.217
> 
> 标签：jquery, jquery-plugins

插件：[http ://www.zazar.net/developers/jquery/zweatherfeed/](http://www.zazar.net/developers/jquery/zweatherfeed/)

该插件有两个参数：一个必需的数组“位置”和一个可选的“选项”（没有定义类型）。对于“选项”，给出了“插件选项”列表（请参见上面的链接）。

我想将“unit”的选项设置为“f”，但将参数作为对象传递（按照 jquery 中的正常情况？）不起作用，也没有在 Firebug 中记录任何错误。

```
<script type='text/javascript'>
jQuery(document).ready(function () {
    jQuery('.site-description').weatherfeed({
        location : ['UKXX0085'],
        unit : 'f'
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:16:58.403

根据[Zazar.net 文档](http://www.zazar.net/developers/jquery/zweatherfeed/)，您自己的脚本仅设置位置（在此示例中为伦敦）。但是，是的，这通常是您在 jQuery 中设置所有选项的地方。

```
<script>
$(document).ready(function () {
$('#test').weatherfeed(['UKXX0085']);
});
</script> 
```

要设置 zWeather 的其他选项，您必须直接编辑 jquery.zweatherfeed.js。请注意，我在缩小版本的相关部分将“单位”更改为“f”。

```
(function(h){var j="odd";h.fn.weatherfeed=function(g,c)
{c=h.extend({unit:"f",image:!0,highlow:!0,wind:!0,link:!0,showerror:!0,linktarget:"_self"},c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:27:37.083

在本视频中，您将看到如何设置 zWeatherfeed 选项：

[http://www.websopen.com/2011/06/06/1227-tweaking-zweatherfeed-display-options-tdi-project/](http://www.websopen.com/2011/06/06/1227-tweaking-zweatherfeed-display-options-tdi-project/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:21:45.937

您的脚本使用位置作为选项，而不是第一个参数。

例如，在 zWeatherFeed 上配置参数：

```
<script type="text/javascript">
$(document).ready(function () {
  $('#test').weatherfeed(['UKXX0085','EGXX0011'], {
        unit: 'c',
        image: false,
        showerror: false
  });
});
</script> 
```

[http://www.zazar.net/developers/jquery/zweatherfeed/](http://www.zazar.net/developers/jquery/zweatherfeed/)

# java - 操作系统（特别是 Android 的）进程

> ID：11582047
> 
> 赞同：0
> 
> 时间：2012-07-20T15:10:08.650
> 
> 标签：java, multithreading, service, process, components

我正在读的一本书说

> 每个进程都有自己的内存空间，与属于其他进程的空间分开。进程仅通过狭窄的、管理良好的路径相互交互。

然后继续说

> 系统调度进程的运行。为此，系统在一个进程中执行一系列语句，然后在另一个进程中执行一系列语句，然后在第三个进程中执行一个序列，最终返回到第一个进程停止的地方。

我的问题是为什么进程计划从一个到另一个运行到另一个返回到第一个。我在 Processes and Threads 下的文档中查找了有关进程的更多信息，它帮助了一些，但我仍然看不到它们是如何从 A -> B -> C -> A 开始的，除非它就像 C 中的函数堆栈和 C++。我阅读了有关流程的部分，但仍然 100% 不知道它们是什么，我被引导到文档的“服务和内容提供者”部分，因为它在“流程”部分中谈到了流程组件的优先级及其生命周期. 我不知道组件的优先级是否与理解它从 A - B - C 的变化方式有关 - 但我认为我需要知道的不仅仅是 proccess 的定义

“一个典型的操作系统（包括 Android）有用户、进程和线程。”

和

“每个进程都有自己的内存空间，与属于其他进程的空间分开。进程之间只能通过狭窄、管理良好的路径进行交互。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:49:02.580

有关背景信息，我建议阅读 Wikipedia 关于[Process (computing)](http://en.wikipedia.org/wiki/Process_(computing))和[Thread (computer science)](http://en.wikipedia.org/wiki/Thread_(computer_science))的文章。了解 Linux 内核中[关于进程调度的章节](http://oreilly.com/catalog/linuxkernel/chapter/ch10.html)也可能有用（虽然现在有点过时了） 。

对于 Android 特定的答案，有一个关于[Android Process Scheduling](https://stackoverflow.com/questions/7931032/android-process-scheduling)的先前问题有几个答案。

# facebook - 使用 Facebook for Wordpress 插件发布到页面

> ID：11582050
> 
> 赞同：2
> 
> 时间：2012-07-20T15:10:16.610
> 
> 标签：facebook, wordpress

**简短的问题**：页面所有者是否需要登录 Facebook 才能将 Wordpress 插件发布到页面？

**详细问题**：

我正在尝试[为 Wordpress 插件配置 Facebook，](http://developers.facebook.com/wordpress/)以便它自动将在 Wordpress 中发布的内容发布到指定的 Facebook 页面。我最初可以通过使用`Social Publisher`登录 Facebook 时的设置来完成这项工作。

但是，当使用 Wordpress 网站的其他作者之一尝试发布故事时，他收到了来自 Facebook 插件的身份验证错误。我试图了解页面的身份验证是如何工作的，以及是否每个想要发布到页面的用户都需要获得这样做的权限并在使用 Wordpress 时登录到 Facebook。或者有没有办法授权与 Wordpress 插件关联的 Facebook 应用程序发布到页面，即使没有人登录到 Facebook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:02:10.393

获取此处所述的页面访问令牌，[https://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)您的应用程序可以使用它发布到您的页面，无论谁是触发您的应用程序操作的实际用户。

确保您首先获得一个[长期存在的](https://developers.facebook.com/roadmap/offline-access-removal/)用户访问令牌 - 这样您将获得一个没有默认到期的页面访问令牌。（如果你用来获取它的用户更改了他们的 Facebook 密码，它也会过期。）

# eclipse-plugin - 启用/禁用菜单项

> ID：11582051
> 
> 赞同：1
> 
> 时间：2012-07-20T15:10:19.117
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在使用目标平台 3.7 编写 RCP 应用程序。我喜欢仅在特定视图处于活动状态时才启用 menuItem，否则应将其禁用。我通过如下 plugin.xml 中所示的表达式尝试它，但 menuItem 始终处于活动状态。

```
 <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="pgui.handler.SaveHandler"
            id="pgui.rcp.command.save"
            name="Save">
      </command>
   </extension>
   <extension
     point="org.eclipse.ui.views">
     <view
          allowMultiple="true"
          class="pgui.view.LogView"
          id="pgui.view.LogView"
          name="logview"
          restorable="true">
     </view>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="fileMenu"
               label="File">
            <command
                  commandId="pgui.rcp.command.save"
                  label="Save"
                  style="push"
                  tooltip="Save the active log file.">
            </command>
         </menu>
      </menuContribution>
    </extension>
    <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="pgui.rcp.command.save">
         <activeWhen>
            <with
                  variable="activePart">
               <instanceof
                     value="pgui.view.LogView">
               </instanceof>
            </with>
         </activeWhen>
      </handler>
   </extension> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:52:57.717

首先，从您的命令中删除**defaultHandler 。**

接下来，将您的处理程序类添加到您的**处理程序**扩展点。

基本上，该机制允许您为同一命令定义多个处理程序，使用不同的**activeWhen**表达式让命令在不同情况下由不同的处理程序类处理。

如果命令的所有已定义处理程序上的所有**activeWhen**表达式评估为 false，*并且为命令本身定义了**defaultHandler***，则该默认处理程序将用于命令。该命令本质上将始终处于活动状态，因为始终有一个默认处理程序来处理它。

例如，如果您同时拥有现有的 LogView 和另一个充满独角兽的视图，并且您想使用相同的**pgui.rcp.command.save**命令来处理来自任一视图的项目的保存：

```
<extension point="org.eclipse.ui.commands">
    <command
        id="pgui.rcp.command.save"
        name="Save">
    </command>
</extension>
:
<extension point="org.eclipse.ui.handlers">
    <handler
        class="pgui.handler.SaveLogHandler"
        commandId="pgui.rcp.command.save">

        <activeWhen>
            <with variable="activePart">
                <instanceof value="pgui.view.LogView">
                </instanceof>
            </with>
        </activeWhen>
    </handler>
</extension>
:
<extension point="org.eclipse.ui.handlers">
    <handler
        class="pgui.handler.SaveUnicornHandler"
        commandId="pgui.rcp.command.save">

        <activeWhen>
            <with variable="activePart">
                <instanceof value="pgui.view.UnicornView">
                </instanceof>
            </with>
        </activeWhen>
    </handler>
</extension> 
```

# linux - Bash 正在将自动文件创建合并到 1 个大文件中？

> ID：11582053
> 
> 赞同：0
> 
> 时间：2012-07-20T15:10:25.637
> 
> 标签：linux, bash

我正在使用的脚本：

```
DISKS=$(df -H | awk '{print $1}' | grep "/dev/" | sed 's/[/]/_/g' | sed 's/^.//' | sed 's/%$//')
IFS="\n\b"
for i in $DISKS; do
  rrdtool create $(echo $i + "_usage.rrd") --start $(date +%s) DS:used:GAUGE:240:U:U RRA:MAX:0.5:1:144 RRA:MAX:0.5:1:1008 RRA:MAX:0.5:1:8640
done; 
```

命令行上的文件：

```
dev_sda2?dev_sdd1?dev_sdc1?dev_mapper_truecrypt1?dev_mapper_truecrypt2 + _usage.rrd 
```

有没有人经历过这种情况，这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:34:34.400

```
DISKS=$(df -H | awk '{print $1}' | grep "/dev/" | sed 's/[/]/_/g' | sed 's/^.//' | sed 's/%$//');
while read i; rrdtool ...; done <<<"$DISKS" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:21:16.590

我不熟悉，`rrdtool`但修复您的文件名可能会有所帮助。

```
do rrdtool create $(echo $i + "_usage.rrd") 
```

打印出错误的值，尝试：

```
do rrdtool create $(echo "$i"_usage.rrd) 
```

希望修复文件名（并从文件名中删除“+”符号和空格）将有助于清理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:30:15.983

首先，您不需要命令替换来创建文件名：

```
rrdtool create "${i}_usage.rrd" ... 
```

应该可以正常工作。

真正的问题似乎`DISKS`是没有按照您期望的方式进行拆分。尝试

```
DISKS=( $(your-pipeline-here) )
for i in "${DISKS[@]}"; do
  rrdtool create ...
done; 
```

这会`DISKS`生成一个数组而不是空格分隔的字符串，让您可以遍历数组而无需（尽可能多地）担心`IFS`.

# regex - 使用正则表达式提取一个单词...如果它存在

> ID：11582057
> 
> 赞同：3
> 
> 时间：2012-07-20T15:10:45.280
> 
> 标签：regex, parsing, logging, logparser

我想使用 RE 解析日志文件并返回 orderid（如果存在）。例如：

这是一个示例日志

```
2012-07-19 12:05:04,288 [22] INFO  AddQueueCommand [(null)] - Status set to Subscribed
2012-07-19 12:05:04,288 [23] INFO  FooBarProviderFactory [(null)] - Missing Function : OrderId:102602 : Method:AddOrderToId : application:11
2012-07-19 12:05:04,288 [22] INFO  AddQueueCommand [(null)] - Status set to Pending
2012-07-19 12:05:04,288 [23] INFO  AddSubscription [(null)] - Subscription Added. OrderId:102603 : application:15
2012-07-19 12:05:04,288 [22] INFO  AddQueueCommand [(null)] - Status set to Subscribed 
```

我想要做的是使用正则表达式，这样我就可以解析日志消息的组成部分。但是当存在“OrderId”时，我希望能够解析 orderid #。

这是我到目前为止所拥有的：

```
^
(?<before>.*)
(?<order>((?<=OrderId\:\s*)\d*))
(?<after>.*)
$ 
```

这对于解析具有它们的行的 orderid 非常有用，但是当行没有它们时它会失败。我尝试添加“？” 零或一到订单行，然后解析所有行，但从不解析实际的 orderid。它们始终为空。

希望有人能看到我做错了什么。谢谢！

（我希望它解析每一行，因为我将解析每一行中的多个 id 值，它们可能存在也可能不存在。如果我正在搜索的内容存在，我希望它返回该值，如果不存在则返回 null/empty t 存在。它需要为每一行返回一些东西。这将被插入到 LogParser 中，以便我们可以查询或记录特定订单或其他变量）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:03:03.243

如果您将`<order>`组设为可选，则该`<before>`组将始终匹配整行，因此即使存在 OrderId，匹配也会成功，但不会捕获 OrderId。在这种情况下，让它变得懒惰无济于事 ( `(?<before>.*?)`) （因为该`<after>`组匹配所有内容）。

但是，如果我理解正确的话，你可以在一个正则表达式中做所有你想做的事情。例如，假设您想要每行后面的单词`Status set to`（如果存在）*和*后面的数字`OrderId:`（如果存在），那么您可以使用正则表达式

```
^
(?(?=.*Status\sset\sto\s)(?=.*Status\sset\sto\s(?<status>\w+))|)
(?(?=.*OrderId:)(?=.*OrderId:(?<order>\d+))|) 
```

在每一行上并检查组`<status>`和/或`<order>`是否匹配。根据需要展开。

这假设您的正则表达式引擎支持[条件](http://www.regular-expressions.info/conditional.html)，这是 .NET、Perl 和 PCRE 的情况。

**解释：**

```
(?               # Conditional: IF it's possible to match...
 (?=.*OrderId:)  #  any string, followed by "OrderId:"
                 # THEN try to match this:
  (?=            #  Lookahead assertion:
   .*OrderId:    #   any string, followed by "OrderId:" 
   (?<order>\d+) #   followed by a number --> capture in group <status>
  )              #  End of lookahead
 |               # ELSE try to match this:
                 #  the empty string (always succeeds)
)                # End of conditional. 
```

我们需要两个紧跟前行的原因：我们不希望正则表达式引擎实际消耗当前行中的任何字符，因为我们不知道条目的顺序，所以每次搜索都需要从行的开头。（另一方面，如果条目的顺序始终是固定的，那么正则表达式可以简化一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:18:09.327

### 使用字符串扫描方法

如果您只需要 OrderId 记录编号，则可以通过扫描字符串以查找匹配表达式来简化此任务。例如，假设您的日志数据存储在 String *log*中，在 Ruby 中您可以执行以下操作：

```
log.scan /OrderId:(\d+)/
=> [["102602"], ["102603"]] 
```

只有匹配的文本将被存储。没有匹配的行将不存储数组值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:46:13.500

您可以使用理解列表返回一个 id 列表：

```
 >>> import re
 >>> [ re.sub( r".*OrderId:(\d*).*", r"\1", line ) for line in logs.readlines() if 'OrderId' in line ]
 ['102602', '102603'] 
```

# sharepoint - Visual Basic 将密码发送到共享点站点

> ID：11582059
> 
> 赞同：0
> 
> 时间：2012-07-20T15:10:51.430
> 
> 标签：sharepoint, vba

我有一个将被许多用户使用的共享点站点，但我事先不知道这些用户是谁。该站点托管一个宏需要在其上运行的 xls 文件。我可以使用以下内容打开文件：

```
 Sub macro1()
    xlFile = "The URL"
    File: 'TheWorkbook.xls"
    Set xlApp = New Excel.Application
    xlApp.Visible = True
    Set wb = xlApp.Workbooks.Open(xlFile, , False)
    End Sub 
```

但是我需要能够向他的共享点站点发送用户名和密码。因为我事先不知道我的用户是谁，所以我使用的应用程序 ID 具有与之关联的密码。有任何想法吗？我试过 sendkeys 但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:29:29.927

如果您必须保护工作簿，则使用 Windows 安全组并确保所有需要访问权限的用户都在该组中。这将允许集成身份验证为您处理它。

如果您说您无法知道他们应该在哪个组中，那么您应该首先质疑为什么要保护工作簿。

# flash - Flex List ItemRenderer with TextInput recycle

> ID：11582060
> 
> 赞同：0
> 
> 时间：2012-07-20T15:10:56.327
> 
> 标签：flash, apache-flex, flexbuilder

我有带有文本输入的列表 itemrenderer，但是当我在文本输入中写一些东西时，另一个会得到相同的值。我曾经将 useVirtualLayout 设置为 false，但确实降低了列表的性能。我只把“data.value”放到标签上。有什么办法可以关闭这个问题？泰

# java - 读取 JScrollPane 的内容

> ID：11582062
> 
> 赞同：1
> 
> 时间：2012-07-20T15:11:03.987
> 
> 标签：java, swing, jtable, jscrollpane, defaulttablemodel

有没有办法读取 JScrollPane 的内容？

我已经实现的是使用该方法添加`DefaultTableModel`的。我将其用作声明和实现 a 的参数。这稍后用作 a 的声明和实现的参数。在代码的整个执行过程中，我在using方法中添加了 nows。我手头的目标是阅读添加的行的内容。`three columns``addColumn()``DefaultTableModel``JTable``JTable``JScrollPane``DefaultTableModel``addRow()`

有没有人有什么建议？一切将不胜感激！

```
JTabbedPane tabbedPane = new JTabbedPane();
DefaultTableModel model = new DefaultTableModel();

model.addColumn("Column1");
model.addColumn("Column2");
model.addColumn("Column3");

JTable testResults = new JTable(model) {
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
};

JScrollPane resultTab = new JScrollPane(testResults);
resultTab.setName("Tab1");
resultTab.setVisible(true);

Thread thread1 = new Thread() {
    public void run() {
        if(tabbedPane.getSelectedComponent().getName().compareTo("Tab1") == 0) {
            model.addRow(new Object[]{"content1", "content2", "content3"});
            model.addRow(new Object[]{"content4", "content5", "content6"});
            ...
            ...
            ...
            model.addRow(new Object[]{"this", "will", "continue"});
        }
        else {
            model.addRow(new Object[]{"content1", "content2", "content3"});
            model.addRow(new Object[]{"content4", "content5", "content6"});
        }
    };
thread1.start(); 
```

I want to read the data "content1", "content2", "content3", "content4", "content5", "content6", etc. The ellipses represent that there is a undefined number of rows being added throughout the source code.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:13:54.670

You want to read the data from `DefaultTableModel` and not the `JScrollPane` - it's just a Swing container.

`getDataVector()` will help you here. It returns vector of vectors representing data in your table model.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:27:58.250

```
table.getModel().getValueAt(0, 0); 
```

This will return "contents1" from the table model.

```
table.getModel().getValueAt(0, 1); 
```

This will return contents2.

Check out [TabelModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html#getValueAt%28int,%20int%29) for more details.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:05:53.503

Robin has suggested a good point. You should add rows on the EDT thread. If you have a long running process that is fetching rows, then I suggest using a [SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html) to grab those rows and add them to your TableModel. You should use the concrete implementation (DefaultTableModel in your case) to do so.

# c# - 如何在 ASP.Net 中创建和保存文档和模板？

> ID：11582068
> 
> 赞同：2
> 
> 时间：2012-07-20T15:11:24.037
> 
> 标签：c#, asp.net, document

## 我过去的经历

我在 C# win-forms 和 WPF 和其他一些语言方面有大约 04 年的经验，但对 ASP.Net（或任何 Web 应用程序）是新手。

## 问题描述

我想在我的公司内部创建一个文档管理站点，管理员可以在其中定义模板（例如在 Visual Studio 中，我们获得项目模板，因此我们可以确定是否创建文本或电子表格或其他类型的文档，如 MS Word 或 Excel ) 并且可以将多个字段添加到其中并保存。然后用户可以访问保存的模板并创建自己的文件（具有相同的模板但不同的数据）并保存。我还需要保存版本更改。

## 我该如何处理？

1.  在 ASP.Net（如 WPF）中实现丰富的文档支持是否非常困难？
2.  它是在重新发明轮子吗（因为有谷歌文档或者人们可以购买 MS Office 并创建文档并将其保存在服务器中），但并非所有人都会购买它？
3.  我应该将模板保存为数据库中的 XML 或 HTML 还是如何？

任何起点或参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:36:21.583

其实做起来没那么难。我刚刚完成了一个项目，其中整个 UI 都围绕着允许用户创建、保存、编辑然后填写模板。您实际上可以将信息保存在字节数组中，然后将其保存到数据库中。这是我使用的新模板方法的示例。这并不难，但可以在此处包含更多信息。表单的创建是最难的部分。这个表单的创建是 3100 行代码。

```
private void doNew()
    {
        try
        {
            this.m_bDialogOpen = true;
            //New instance of data object
            MergeLetterDocsDO clnt = new MergeLetterDocsDO(7);
            //Creates a new title or name for the template
            NewMergeLetterTitle title = new NewMergeLetterTitle("New Merge Letter", 7);
            DialogResult dr = title.ShowDialog();

            if (dr == DialogResult.OK)
            {

                Form1 frm = new Form1(Simple.Form1.DocumentTypes.MERGE_LETTER,  Simple.Form1.OperationModes.DESIGN_TIME, null);
                frm.ShowDialog(this);

                byte[] bb = frm.InternalFormatDocument;
                byte[] rtfbb = frm.RtfFormatDocument;
                clnt.SaveNewMergeTemplate(bb, rtfbb, bb.Length, rtfbb.Length, title.MergeLetterTitle);
            }

            this.m_bDialogOpen = false;

            this.Populate();
        }
        catch (Exception ex)
        {
            Trace.WriteLine(ex.Message);
        }
    }O 
```

# git - 何时在 git 中使用子模块与符号链接

> ID：11582079
> 
> 赞同：0
> 
> 时间：2012-07-20T15:12:08.263
> 
> 标签：git

我在一个单独的存储库中有一个组件，我想在它自己的存储库中的应用程序中使用它。稍后，我可能还会引入其他一些 3rd 方库。

据我所知，我可以使用符号链接或子模块来实现类似的事情。这是正确的理解吗？如果是这样，我应该什么时候使用一个与另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:18:50.610

它们是不同的概念，可以实现相似但不相等的事物。

符号链接指向**您计算机中的**另一个文件。了解这一点很重要，因为在存储库中放置符号链接没有任何意义，因为其他人无法使用相同的符号链接（因此，前面的冲突，因为每个人都会尝试编辑此符号链接在各自的计算机上使用子模块）。

子模块告诉您的存储库它应该依赖另一个存储库。您可以将它放在您的存储库中，因为它指向子模块的主存储库。当您发布存储库时，其他人将能够克隆它并使用子模块。

所以，我会选择子模块。这更有意义，您可以跨计算机工作，并且不依赖静态路径。

# android - 使用脚本语言实现通用逻辑，以便在 .NET、Silverlight、Android 和 iOS 上重复使用

> ID：11582081
> 
> 赞同：3
> 
> 时间：2012-07-20T15:12:11.410
> 
> 标签：android, .net, ios, silverlight

有一个相当复杂的客户端-服务器应用程序。服务器端是 .NET，3 个客户端是 Silverlight + 2 个用于 Android 和 iOS 的本机客户端。我们正在考虑将一些服务器端逻辑转移到客户端。“本地”实现这个逻辑需要付出很大的努力，并且肯定会导致很多错误，所以我们正在考虑使用脚本来实现这个共享逻辑，然后将脚本引擎嵌入到每个客户端应用程序中。

是否有一种脚本语言可以在下面列出的平台上以相同的方式工作？

*   。网
*   银光
*   安卓
*   iOS

我们正在考虑：

*   *（我知道这不是脚本）* **Mono/MonoTouch/MonoDroid**。看起来有相当大的内存使用开销，而且由于我们的客户端应用程序非常繁重，使用 Mono 似乎是个坏主意。
*   **卢阿**。可以轻松与 .NET、Android 和 iOS 集成，但感觉好像没有 Silverlight 的实际实现。
*   *（我知道这不是脚本）* **C/C++**。不适用于 Silverlight。

* * *

1.  还有哪些其他选项需要考虑？
2.  如果您有相关经验，您使用的是什么？

# css - CSS中的垂直对齐未按预期工作

> ID：11582084
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:12:42.260
> 
> 标签：css

我一定是脑子有问题，因为我无法让这个简单的垂直对齐工作。代码如下。

CSS

```
div#topHolder {
    background: #000000;
    width: 100%;
    height: 200px;
    line-height: 200px;
    text-align: center;
    border: 1px solid #0000ff;
}

img#title {
    vertical-align: middle;
    border: 1px solid #ffff00;
} 
```

HTML

```
<body>
    <form id="form1" runat="server">
    <div id="topHolder">
        <img id="title" src="images/file.gif" />
    </div>
    </form>
</body> 
```

现在，您会看到，人们会期望图像位于 div 的中心，但实际上它位于顶部。当然，对齐的其他值也不起作用。为了大声哭泣，我错过了什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:37:20.457

我建议你阅读这篇文章，它解释了为什么垂直对齐不能像你期望的那样工作。通常，它仅适用于表格（或具有表格样式的对象）和内联对象。这是标准定义的。

[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

编辑：

您可能会发现更有趣的是，在图像的任一侧添加文本。

```
<div id="topHolder">
     xx <img id="title" src="images/file.gif" /> xx
</div> 
```

原因（我认为）是图像不是普通的内联元素，它们是“替换”内联元素，因此它们的行为略有不同。这意味着被替换的元素没有实际内容（它们在渲染时被“替换”，但就渲染引擎而言，实际的 img 本身是空的）。

添加真实内容（而不是替换内容）允许垂直对齐功能。如果您放置多个元素，那么它可以工作（甚至两个 img）

它在小提琴中起作用的原因是小提琴在内部做了很多事情，因此有时会对内容产生奇怪的影响。

有许多不同的解决方法可以解决这个问题，但所有这些都需要你可能会觉得令人反感的 hack。您最好计算边距以使其居中。

顺便说一句，“宽度：100%”是多余的，块级元素（如 div）默认为 100%。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T15:34:34.700

通常垂直对齐不适用于显示块（div具有默认显示块）所以给显示表单元格或使用这种类型的js

```
document.ready(function(){
var a = $('#div1').height();
var b = $('#img1').height();
var c = (a-b)/2;
$('#img1').css("margin-top",c);
}); 
```

# c# - Windows Phone 7 列表框

> ID：11582086
> 
> 赞同：0
> 
> 时间：2012-07-20T15:12:51.973
> 
> 标签：c#, listbox

我在 Windows Phone 7 中有一个列表框，我想在列表框中显示独立存储文件的列表，当我从列表框中选择文件时，我应该能够从文件中获取内容。

这是我的代码：

```
ListBoxItem lbi = (ListBoxItem)listBox1.SelectedItem;
string t = (string)lbi.Content;

using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
using (var sr = new StreamReader(store.OpenFile(t, FileMode.Open, FileAccess.Read)))
{
    textBlock2.Text = sr.ReadToEnd();
} 
```

并将文件绑定到列表：

```
var appstorage = IsolatedStorageFile.GetUserStoreForApplication();
string[] filename = appstorage.GetFileNames();
listBox1.ItemsSource = filename; 
```

但是当我尝试应用程序时，`SelectionChanged`我收到一个错误：

> *无效的强制转换异常`ListBoxItem lbi = (ListBoxItem)listBox1.SelectedItem;`*

现在最终的问题是，当事件被触发时，如何在列表框中检索确切的文件名`SelectionChanged`，以便流阅读器可以使用文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:34:19.487

您正在绑定到`IEnumerable<string>`( `string[]`)，列表框不会将这些项目转换为`ListBoxItem`'，它们只是常规的旧字符串。

所以你应该这样做：

```
string t = (string)listBox1.SelectedItem;

using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
using (var sr = new StreamReader(store.OpenFile(t, FileMode.Open, FileAccess.Read)))
{
    textBlock2.Text = sr.ReadToEnd();
} 
```

# php - 使用 PDO 转换我的开发后，代码无法正常工作

> ID：11582091
> 
> 赞同：1
> 
> 时间：2012-07-20T15:13:09.060
> 
> 标签：php, mysql, pdo

我正在将我的 PHP/mySQL 代码转换为 PDO，但我遇到了一些困难。下面我添加了我正在使用的确切代码，以便更好地理解。我的目标是`name`从数据库中显示他们的时间与输入时间相比相差 2 小时。

这是代码

SELECT * FROM events WHERE TIMESTAMPDIFF( HOUR , TIME, :input ) < 2

这是我的数据库

```
name                        date
3D Brave                    2012-07-21 17:00:00
Bol Bachchan                2012-07-21 18:00:00
A Royal Affair              2012-07-21 19:00:00
Not Suitable For Children   2012-07-21 23:00:00 
```

如果`$input`是`2012-07-20 18:00`或者`2012-07-20 20:00`然后我得到如下所有结果，但它应该只显示那些有 2 小时差异的结果

```
3D Brave
Bol Bachchan
A Royal Affair
Not Suitable For Children 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:27:07.390

好吧，您正在查询与 column 的差异`TIME`，但在表架构中，它被称为`date`.

更正查询：

```
SELECT *
  FROM events 
  WHERE ABS(TIMESTAMPDIFF( HOUR , `date`, "2012-07-21 18:00:00")) < 2; 
```

### 我做了什么：

*   将列名更改为`date`
*   添加`ABS()`了功能（因此它现在既向前看又向后看）。

**[该查询的结果。](http://sqlfiddle.com/#!2/3f250/16/0)**

# powershell-3.0 - 尝试匹配行首的字符串，然后提取直到出现相同的字符串

> ID：11582093
> 
> 赞同：0
> 
> 时间：2012-07-20T15:13:12.550
> 
> 标签：powershell-3.0

您好，我正在尝试提取一个以目标“值”开头的字符串，然后将提取其间的所有信息，然后当它看到相同的标记“值”时，它将停止提取。我正在处理一个txt文件。

前任：

80 E4 00 80 09 4F 07 A0 00 00 01 51 53 7F 00 A4 04 00 00 80 E6 02 00 22 09 A0 00 00 00 18 20 41 43 54 00 14 AD 15 C6 80 E8 00 00 C0 E2 01 00 00 18 10 01 08 01 00 00 80 E8 00 01 C0 A0 00 00 00 18 20 01 04 05 00 02 08 A0 00 00 80 E8 00 02 C0 FF 00 01 00 00 00 07 0A C7 7 06 01 0 8 F E6 0C 00 4E 09 A0 00 00 00 18 20 41 43 54 0A A0 00 00 00 18 20 80 E8 02 00 21 08 A0 00 00 00 18 10 01 07 00 14 4F 7E 23 A9 73 80 E6 02 00 00 18 10 01 07 09 A0 00 00 00 18 10 80 C0 00 00 01 00 00 A4 04 00 0F A0 00 00 00 18 10 01 08 01 00 00 00 BA FE 02

所以我想从它从“80 E6”开始的地方提取，然后提取其间的所有信息，直到它再次显示“80 E6”的标签。

所以输出将是：

80 E6 02 00 22 09 A0 00 00 00 18 20 41 43 54 00 14 AD 15 C6 80 E8 00 00 C0 E2 1B 4F 0F A0 00 00 00 18 10 01 08 01 00 00 80 E8 00 01 0 1 C0 A0 20 01 04 05 00 02 08 A0 00 00 80 E8 00 02 C0 FF 00 01 00 00 00 07 0A C7 06 00 F3 80 77 01 80 E6 0C 00 4E 09 A0 00 00 00 180A 20 41 0 43 0 4 18 20 80 E8 02 00 21 08 A0 00 00 00 18 10 01 07 00 14 4F 7E 23 A9 73

到目前为止，我有这个作为我的脚本：

```
 Function Extractor(){

$firstTag = '^80 E6.*$'
$secondTag = '^80 E6.*$'

$t= foreach ($line in (Get-Content C:\Users\user\Desktop\dummy.txt )) { 

$x
    if ($line -match $firstTag) {

        do {             

            $foreach.current 

            $foreach.MoveNext() > $null

        } 

        until ($foreach.current -match $secondTag)         

        $foreach.current 

#        continue

        Write-Verbose "Next match"

    }
}
$t > C:\Users\nicalder\Desktop\Project1\MasterCard_Trace\modMasterCardTraceExtracted2lined.txt

}
Extractor 
```

我是不是做错了什么，因为这在其他情况下对我很有用..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:38:22.333

通过一些输入，您所拥有的内容将“从文件末尾脱落”。添加到下面“直到”子句的测试解决了这个问题。

这与输入的输出相匹配。我不得不对如何在完整案件中处理案件做出一些假设。

```
Function Extractor{

    $firstTag = '^80 E6.*$'

    $secondTag = '^80 E6.*$'

    $t= foreach ($line in (Get-Content C:\temp\input3.txt)) { 

        if ($line -match $firstTag) {

            $firstMatch = $line

            $foreach.MoveNext() > $null

            $lineCounter = 2

            do  {             

                if ($lineCounter -gt 2) {

                    if ($linecounter -eq 3) {

                        $firstMatch

                         $secondMatch

                    }

                    $foreach.current 

                }

                $secondMatch = $foreach.current # only used for the second line,     otherwise its is thrown away

                $foreach.MoveNext() > $null

                $lineCounter++

           }

           until (($foreach.current -match $secondTag) -or ($foreach.current -eq    $null))

#                $foreach.current 

    #        continue

        }

    }

    $t | Out-file "C:\temp\output3.txt"

 }

Extractor 
```

# html - 缺口 IE7

> ID：11582094
> 
> 赞同：1
> 
> 时间：2012-07-20T15:13:18.107
> 
> 标签：html, css, internet-explorer, css-float, html-lists

我知道对此有很多问题，但似乎没有一个答案能解决我的问题。

并非所有项目都过大，只有 1 个项目向右推得太远。我已经查看了一百万次，但我只在 IE8 和 IE7 中遇到了问题；这种额外的差距在 IE9 和所有其他浏览器中是不存在的。

![这就是差距](../Images/f4d8b9789be1df7deb5a3cae93e4481f.png)

我的 CSS：

```
 #navigation{
        background: url("../images/nav.png") repeat-x;
        height: 88px;
        width: 1000px;
        margin: 0 auto;
    }
    #navigation .menu{
        padding: 5px 0px 0px 155px;
    }
    #navigation .menu ul{
        display: inline;
    }
    #navigation .menu ul li{
        list-style: none;
        float: left;
        padding: 0px 0px 0px 25px;
    }
    #navigation .menu a.home{
    display: block;
    background-image: url("../images/b_home.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.home:hover,#navigation .menu a.home.current{
    background-image: url("../images/h_home.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.content{
    display: block;
    background-image: url("../images/b_content.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.content:hover,#navigation .menu a.content.current{
    background-image: url("../images/h_content.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.report{
    display: block;
    background-image: url("../images/b_report.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.report:hover,#navigation .menu a.report.current{
    background-image: url("../images/h_report.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.users{
    display: block;
    background-image: url("../images/b_users.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.users:hover,#navigation .menu a.users.current{
    background-image: url("../images/h_users.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.media{
    display: block;
    background-image: url("../images/b_media.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.media:hover,#navigation a.menu .media.current{
    background-image: url("../images/h_media.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.event{
    display: block;
    background-image: url("../images/b_events.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.event:hover,#navigation .menu a.event.current{
    background-image: url("../images/h_event.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.news{
    display: block;
    background-image: url("../images/b_news.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.news:hover,#navigation .menu a.news.current{
    background-image: url("../images/h_news.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.settings{
    display: block;
    background-image: url("../images/b_settings.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    }
    #navigation .menu a.settings:hover,#navigation .menu a.settings.current{
    background-image: url("../images/h_settings.png");
    background-repeat: no-repeat;
    height: 74px;
    width: 74px;
    } 
```

我的 HTML：

```
<div id="navigation">
    <div class="menu">
    <ul>
    <li><a rel="tooltip" class="home current" href="#" title="Home"></a></li>
    <li><a rel="tooltip" class="content" href="#" title="Content"></a></li>
    <li><a rel="tooltip" class="report" href="#" title="Reports"></a></li>
    <li><a rel="tooltip" class="users" href="#" title="Users"></a></li>
    <li><a rel="tooltip" class="media" href="#" title="Media"></a></li>
    <li><a rel="tooltip" class="events" href="#" title="Events"></a></li>
    <li><a rel="tooltip" class="news" href="#" title="News"></a></li>
    <li><a rel="tooltip" class="settings" href="#" title="Settings"></a></li>
    </ul>
    </div>
</div> 
```

朝着正确的方向前进会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:37:54.083

看来我在我的 html 中犯了一个错误，所以`<li><a class="event">`我`"events"`只需要删除 s，而 IE7 是唯一向我显示错误的浏览器！

讨厌 IE，但它今天帮助了我，谢谢大家！

# c - C 数组和指针参数

> ID：11582098
> 
> 赞同：1
> 
> 时间：2012-07-20T15:13:28.863
> 
> 标签：c, arrays, pointers, parameters

我收到以下警告：

```
expected ‘float **’ but argument is of type ‘float (*)[6]’ 
```

这是我的代码：

```
//state and error are output parameters
void func(float* state[6], float* err[6][6]);

int main()
{
  float state[6];
  float err[6][6];

  func(&state, &err);

  return 0;
} 
```

我希望 state 和 err 是输出参数，所以 state 应该是指向数组的指针，而 err 应该是指向二维数组的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:15:46.370

将您的代码更改为：

```
void func(float state[], float err[][6]);

int main()
{
  float state[6];
  float err[6][6];

  func(state, err);

  return 0;
} 
```

要了解原因，您需要知道这`float* err[6][6]`是一个指向浮点数的 6x6 指针数组，而不是指向一个 6x6 浮点数数组的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:37:46.407

```
#include <stdio.h>

void func(float (*state)[6], float (*err)[6][6]){
    printf("%f, %f\n", (*state)[2], (*err)[1][2]);//3.000000, 3.300000
}

int main()
{
  float state[6]={1.0f,2.0f,3.0f};
  float err[6][6]={{1.0f,2.0f,3.0f},{1.1f,2.2f,3.3f}};

  func(&state, &err);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:33:43.537

在大多数情况下，数组类型的表达式将被转换为指针类型的表达式；这意味着当您将数组表达式作为参数传递给函数时，函数将接收到的是一个指针。此规则的例外情况是数组表达式是一元运算符`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化数组的字符串文字。

在函数参数声明的上下文中，`T a[]`和`T a[N]`被视为与`T *a`; 这三个都声明`a`为指向 的指针`T`，而不是 . 的数组`T`。

所以，按照你的声明

```
float state[6];
float err[6][6]; 
```

表达式的类型`state`是“6-element array of `float`”，在大多数情况下将被转换为“pointer to `float`”，或者`float *`。同理，表达式的类型`err`为“6-element array of 6-element array of `float`”，将转换为“pointer to 6-element array of of `float`”，或者`float (*)[6]`。

表达式的类型`&state`是“指向 6 元素数组的指针`float`”，or`float (*)[6]`的类型`&err`是“指向 6 元素数组的 6 元素数组的指针`float`”，或者`float (*)[6][6]`。

所以，如果调用`func`是

```
func(&state, &err); 
```

那么原型必须是

```
void func(float (*state)[6], float (*err)[6][6]) 
```

`state`并且您需要`err`在应用任何下标之前显式取消引用：

```
(*state)[i] = ...;
(*err)[i][j] = ...; 
```

如果来电是

```
func(state, err); 
```

那么原型必须是

```
void func (float *state, float (*err)[6]) 
```

并且您*不需要*显式取消引用`state`or `err`：

```
state[i] = ...;
err[i][j] = ...; 
```

那么，你用哪个？就个人而言，我会选择第二种选择；它更干净一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T15:35:58.533

而在函数内部，T[][] 和 T** 几乎可以互换使用，但当它们作为参数传递时，有一些警告。“指针对指针”模式仅使用足够的内存来存储变量本身（通常与处理器的字长相同）并依赖程序员以某种方式生成正确的数据偏移量，而使用数组语法，编译器还需要知道结构的步幅，以便正确寻址行。出于这个原因，我个人不喜欢将数组作为参数传递：它使步幅在编译时固定。在我看来，最好始终使用带有行和列辅助参数的 T** 路线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T19:43:45.193

```
void func(float* state[6], float* err[6][6]);

int main()
{
  float state[6];
  float err[6][6];

  func(&state, &err);

  return 0;
} 
```

以下两个声明都是相同的......

```
char *message = "Hello World!";
char message[13] = "Hello World!"; /* "Hello World!" is 12 chars + \0 termination */ 
```

数组是指针，只是区别对待。因此，要将`message`其中任何一个声明中的地址传递给 func1(char*) 或 func1(char[])，您可以说`func1(message);`传递了地址。

数组只能作为地址传递给第一个值。运行以下程序来证明这一事实。

```
#include <stdio.h>
void func(float* array);

int main()
{
  float state[6];
  int i = 0;
  printf ( "Sizeof state: %d\n", sizeof(state) );
  for ( i = 0; i < 6; i ++ ) { state[i] = i+1; }
  func(state);

  return 0;
}

void func ( float *array )
{
 printf ( "Sizeof float: %d\n", sizeof(float) );
 printf ( "Sizeof array: %d\n", sizeof(array) );
 printf ( "Value in array[0] = %f\n", array[0] );
 printf ( "Value in *array = %f\n", *array );
 array++;
 printf ( "Value in array[-1] = %f\n", array[-1] );
 printf ( "Value in array[0] = %f\n", array[0] );
 printf ( "Value in *array = %f\n", *array );
} 
```

因此，您的调用`func(float* state[6], float* err[6][6] );`是声明一个 2 级指针和一个 3 级指针。类似的功能，但相同的调用，可以实现`func(float **state, float ***err );`

不用说，不是你的目标。

# c# - 在 64 位 Windows Server 2003 上将经典 ASP 逐步迁移到 .NET

> ID：11582100
> 
> 赞同：1
> 
> 时间：2012-07-20T15:13:33.360
> 
> 标签：c#, asp.net, asp-classic, windows-server-2003

我有一个相当大的 ASP 站点，它专门使用 VBScript（没有 COM 组件）在 64 位 Windows Server 2003 的 IIS 上的 32 位空间中运行。您可以在此处看到架构的粗略草图：

![编程架构概述](../Images/e8ec77d71f28a15d43b5309d85c74453.png)

我想开始将它迁移到 ASP.NET，但我的迫切需要是在一个可以开始使用它的地方访问数据库）。

我的想法是创建 C# .dll，然后通过互操作从 ASP 代码调用它们，并且在我迁移时，我将完成数据部分。

Interop 的性能有何影响？我最多可能有大约 200 人在几个小时的时间内点击应用程序提交数据库。当前设置没有容量或性能问题。

我在同一个子网上有一个 SQL Server (2005) 盒子，我从这个盒子连接到它；它也是 64 位 Windows Server 2003。

这是一个可行的策略吗？考虑到我的架构，有没有更好的方法来解决这个问题？

现在的一个大问题是 ASP 应用程序使用了数百个存储过程；我继承了它，开发是在重叠部分中完成的，例如，对用户的简单操作可能会在不同页面上使用不同的过程来完成。一个重要目标是集中对组件的数据访问，并抽象出数据库中的实现。因此，如果我添加或更改一个字段，ASP 应用程序将不必知道它的名称；它只会通过对象上的相同属性进行访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:21:05.647

我采取了一条非常相似的路线，将一个非常大的计费应用程序从 VB6 迁移到 C#。这是一个完全可行和合理的方法。

我将专注于首先将 UI 中的业务逻辑和数据访问迁移到适当的类中，然后开始将 UI 的某些部分从经典 ASP 迁移到 ASP.Net。

在一两个小时内有 200 人，您不会注意到互操作开销。

尤其是考虑到您必须处理使用多个代码变体直接访问数据库的 UI，可能值得花一些时间为现有代码进行自动化测试。确保为您编写的新代码遵循测试驱动的方法。如果您没有在自动化测试上投入大量资金，那么当您分阶段重新构建应用程序时，您就有可能以难以检测的方式破坏应用程序。

# ruby-on-rails - ActiveRecord::Base.store 自动类型转换

> ID：11582101
> 
> 赞同：5
> 
> 时间：2012-07-20T15:13:34.097
> 
> 标签：ruby-on-rails, ruby, casting, ruby-on-rails-3.2

有没有办法自动对使用 ActiveRecord::Base.store 存储的值进行类型转换？

举这个完全不切实际的例子：

```
class User < ActiveRecord::Base
  store :settings, accessors: [ :age ]
end

user = User.new(age: '10')
user.age # => '10' 
```

我知道我可以重写年龄的阅读器方法以将其转换为整数，但我很好奇是否有一种未记录的方法。

试图避免这种情况：

```
class User < ActiveRecord::Base
  store :settings, accessors: [ :age ]

  def age
    settings[:age].to_i
  end
end

user = User.new(age: '10')
user.age # => 10 
```

**更新**

寻找类似的东西：

```
class User < ActiveRecord::Base
  store :settings, accessors: {:age => :to_i}
end 
```

或者：

```
class User < ActiveRecord::Base
  store :settings, accessors: {:age => Integer}
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:13:21.497

从 Rails 3.2.7 开始，没有自动类型转换值的方法。如果我遇到一种方法，我会更新这个问题：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:17:09.830

我知道有两种方法可以做到这一点。其中之一是您每次设置时都会转换它。另一个只有在将其保存到数据库时才进行转换。

选项一：自定义设置器

```
class User < ActiveRecord::Base

  ...

  # public method
  def age=(age)
    self.settings[:age] = age.to_i
  end

  ...

end 
```

在控制台中：

```
$ user.age = '12'     # => "12"
$ user.age            # => 12
$ user.age.class      # => Fixnum
$ user = User.new age: '5'
$ user.age.class      # => Fixnum 
```

选项二： before_save 调用（或不同的调用前）

```
class User < ActiveRecord::Base
  before_save :age_to_int

  ...

  private

    def age_to_int
      # uncomment the if statement to avoid age being set to 0
      # if you create a user without an age
      self.age = self.age.to_i # if self.age 
    end

end 
```

在控制台中

```
$ user = User.new(age: '10')
$ user.save
$ user.age            # => 10
$ user.age.class      # => Fixnum 
```

方案二的缺点：

```
$ user.age = '12'
$ user.age            # => "12" 
```

如果我是你，我会使用自定义设置器。如果您想要一个独立于数据库列（它是一个字符串）的默认值，请在设置器之外使用 before_save。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-30T00:29:03.973

[Storext](https://github.com/G5/storext)在`ActiveRecord::Store.store_accessor`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T09:59:54.027

最好链接存储访问器方法而不是覆盖它们，因为这些魔法咒语创建的方法从来没有你想象的那么简单：

```
define_method(key) do
  send("#{store_attribute}=", {}) unless send(store_attribute).is_a?(Hash)
  send(store_attribute)[key]
end 
```

因此，例如在整数的情况下，我会这样做：

```
def age_with_typecasting
  ActiveRecord::ConnectionAdapters::Mysql2Adapter::Column.value_to_integer(age_without_typecasting)
end

alias_method_chain :age, :typecasting 
```

同样，它不是内置的，但可以解决问题。它还利用您的数据库连接适配器将存储在数据库中的字符串转换为您想要的值类型。根据您使用的数据库更改适配器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T14:06:35.560

我们没有找到任何未记录的方法，但即使您找到了，也不建议您将代码依赖于 Rails 私有方法。

这是我们在 Rails 5.2 中使用支持的 API 的方式。假设您有一个费率模型并希望将每日费率存储在名为 :rate_per_day 的单个数据库列中（我们使用的是 MySQL，因此列的类型是 TEXT）：

```
class Rate < ApplicationRecord

  DAILY_RATES = [
    :monday_rate,
    :tuesday_rate,
    :wednesday_rate,
    :thursday_rate,
    :friday_rate,
    :saturday_rate,
    :sunday_rate,
  ]

  store :rate_per_day, accessors: DAILY_RATES, coder: JSON

  DAILY_RATES.each do |method|

    define_method(method) do
      super().try(:to_i)
    end

    define_method("#{method}=") do |value|
      super(value.try(:to_i))
    end

  end 
```

这是官方支持的。[阅读https://api.rubyonrails.org/classes/ActiveRecord/Store.html](https://api.rubyonrails.org/classes/ActiveRecord/Store.html)中的覆盖默认访问器。

顺便说一句，我们使用新的 Attributes API 进行了调查，因为它支持自动类型转换，但是除非我们创建自定义类型对象，否则无法找到将所有数据存储在单个列中的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-23T19:52:42.490

activerecord-typedstore 对此非常有效，并允许您防止 null 和空白值：

[https://github.com/byroot/activerecord-typedstore](https://github.com/byroot/activerecord-typedstore)

# c++ - 将 int 转换为 float：它是如何完成的

> ID：11582108
> 
> 赞同：10
> 
> 时间：2012-07-20T15:14:00.993
> 
> 标签：c++, c, casting, type-conversion

我是 C 编程语言的新手，我想问一个问题。

这里的整数 i 被转换为浮点数，然后 f （不知何故）成功代表 5.0：

```
int i = 5;
float f = i;   //Something happened here... 
```

但是，如果我们尝试这种方法：

```
int i = 5;
float f = *(float *)&i; 
```

f 不会得到 5.0，因为它以“浮点方式”解释存储在 i 中的位。那么编译器在第一种情况下实际上做了什么魔法呢？这似乎是一项相当费力的工作......有人可以指定吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T15:16:17.953

这是一项费力的工作，但任何支持浮点的 CPU 都会提供执行此操作的指令。

如果您必须自己将 2 的补码转换`int`为 IEEE 浮点格式，您将：

*   取整数 base-2 对数（与最高设置位的索引密切相关），它为您提供指数。对此进行偏移并将其存储在浮点数的指数位中。
*   `n`将int 的最高位（从第一个设置的非符号位*之后*的位开始）复制到浮点数的有效位。`n`然而，a 中有许多有效位`float`（32 位单精度浮点数为 23）。如果 中有任何剩余位`int`（即，如果它大于 2 ^(24)），并且您有空间的位之后的下一位是`1`，您可能会或可能不会根据操作中的 IEEE 舍入模式进行舍入。
*   将符号位从 复制`int`到`float`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T15:29:01.330

如果你看组装

```
 int i = 5;
000D139E  mov         dword ptr [i],5  
    float f = i;
000D13A5  fild        dword ptr [i]  
000D13A8  fstp        dword ptr [f] 
```

**[fild](http://docs.oracle.com/cd/E19455-01/806-3773/instructionset-135/index.html)**有什么魔力

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-16T06:37:54.030

将 int 位转换为浮点数

```
float IntBitsToFloat(long long int bits)
{
    int sign     = ((bits & 0x80000000) == 0) ? 1 : -1;
    int exponent = ((bits & 0x7f800000) >> 23);
    int mantissa =  (bits & 0x007fffff);

    mantissa |= 0x00800000;
   // Calculate the result:
   float f = (float)(sign * mantissa * Power(2, exponent-150));
   return f;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T15:30:03.787

在 IA32 系统上，编译器将生成以下内容：-

```
fild dword ptr [i] ; load integer in FPU register, I believe all 32bit integers can be represented exactly in an FPU register
fstp dword ptr [f] ; store fpu register to RAM, truncating/rounding to 32 bits, so the value may not be the same as i 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T15:26:12.663

The magic depends on your platform.

One possibility is that your CPU has a special instruction to copy floating point numbers into integral registers.

Of course someone has to design these CPUs, so this is not really an explanation for the algorithm at hand.

A platform might be using a floating point format that goes like this (actually, this is a fixed-point format for the sake of example):

```
[sIIIIFFFF] 
```

where `s` is the sign, the `I`s are the part before the dot, the `F`s are the part after the dot, e.g. (dot is virtual and only for presentation)

```
 -  47.5000
[sIIII.FFFF] 
```

in this case conversion is almost trivial and can be implemented using bitshifting:

```
 -47.5000
 >> 4
 ---------------
    -47 
```

And like in this example, commodity C++ implementations use a floating point representation often referred to as [IEEE Floating Point](http://en.wikipedia.org/wiki/IEEE_floating_point), see also [IEEE 754-1985](http://en.wikipedia.org/wiki/IEEE_754-1985). These are more complicated than fixed-point numbers, as they really designate a simple formula of the form _s*m^n, however, they *have* a well defined interpretation and you can unfold them into something more suitable.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T15:31:11.080

嗯，我刚刚在VC++下编译了有问题的代码，看了下反汇编：

```
 int i = 5;
00A613BE  mov         dword ptr [i],5 

   float f = i;
00A613C5  fild        dword ptr [i] 
00A613C8  fstp        dword ptr [f] 
```

第一个汇编语句将 5 移动到由 i 表示的内存中。第二条语句 fild 将 i 表示的内存转换为浮点数，并将其压入 FPU 堆栈。第三条语句 fstp 获取 FPU 堆栈上的内存并将其移至 f。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T15:26:37.697

In almost all modern systems, the specification for floating point arithmetic is the IEEE754 standard. This details everything from layout in memory to how truncation and rounding is propagated. It's a big area and someting you quite often need to take detailed account of in scientific and engineering programming.

# php - Facebook API：无限重定向

> ID：11582109
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:01.893
> 
> 标签：php, facebook, facebook-graph-api

我对以下代码感到疯狂：

```
<?php
//Code of http://example.com/facebook/

require_once("../settings.php"); //Providing some settings
function authorize()
{
    header("HTTP/1.1 303 See Other");
    header("Location: https://www.facebook.com/dialog/oauth?client_id=".urlencode($GLOBALS["FacebookConfig"]["appId"])."&redirect_uri=".urlencode("http://example.com/facebook/".(isset($_GET["delete"])?'?delete':''))."&scope=read_mailbox,offline_access");
    exit();
}

require_once("SDK/facebook.php");

if(!isset($_GET["code"]))
{
    authorize();
}

$facebook = new Facebook($GLOBALS["FacebookConfig"]); //$GLOBALS["FacebookConfig"] is defined and set correctly
$user=$facebook->getUser(); //retreive User ID
if(!$user)
{
    header("HTTP/1.1 303 See Other");
    $LoginURL=$facebook->getLoginUrl();
    header("Location: ".$LoginURL); //Endless redirect here
    exit();
}
?> 
```

我的问题是`$user`始终存在`0`，因此客户端被无限重定向。但我看不出`$user`总是留下来的理由`0`。通常它应该是当前登录的 facebook 用户的用户 ID。

编辑：`$GLOBALS["FacebookConfig"]`设置`settings.php`如下：

```
$GLOBALS["FacebookConfig"] = array();
$GLOBALS["FacebookConfig"]['appId'] = 'appID'; //appID replaced
$GLOBALS["FacebookConfig"]['secret'] = 'appSecret'; //appSecret replaced
$GLOBALS["FacebookConfig"]['fileUpload'] = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:01:41.930

我的以下代码`settings.php`导致了错误：

```
ini_set("session.use_cookies", 0);
ini_set("session.use_only_cookies", 0);
ini_set("session.use_trans_sid", 1);
ini_set('session.gc_probability', 1);
ini_set('session.gc_divisor', 1);
ini_set('session.gc_maxlifetime', 60*10); 
```

由于我不知道这会影响 Facebook API，因此我没有将其注释掉。删除后，它工作得很好。但是我花了几个小时才发现...

# html - 使用 Safari 的 CSS 计算中缺少 2px

> ID：11582110
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:04.450
> 
> 标签：html, css, safari

我在这里的小提琴中有一个与输入框对齐的按钮（我现在在 Safari 中工作）

[http://jsfiddle.net/hNx6E/13/](http://jsfiddle.net/hNx6E/13/)

但是，按钮的高度不等于输入的高度。这是我的计算。

**按钮高度**= 字体高度 + 上边距 + 下边距 + 上边距 + 下边距 =

16+8+8+1+1 = 34

**输入高度**= 高度 + 边框顶部 + 边框底部 =

34+1+1 = 36

某处缺少 2px。

请注意，我在最后进行了规范化并规范化所有（我认为使用过的元素）。

```
p , input, div, body 
```

还要注意在小提琴中我关闭了 CSS 规范化，因为我是手动进行的。

Fiddle 退出响应，但接下来我将尝试他们的规范化，以确定我是否遗漏了一些我不知道的元素……现在……只是检查了左侧的规范化框，但这并没有改变任何东西。

现在我认为这是一个 hack，因为我只是将我的高度更改了 2px 以解决丢失的像素......但我希望它以我理解的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:22:45.840

尝试使用`height`and`line-height`而不是`top/bottom padding`垂直对齐。所以你会得到类似的东西：

```
#po_but {
  height: 34px;
  line-height: 34px;
  padding: 0 6px;
} 
```

顺便说一句，您的代码在 mac 上的 safari/chrome 中看起来不错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:23:32.503

> 34+1+1 = 36 // 固定

什么？输入的宽度是 34px + 2px 的边框，总共 36px。下一个问题是`line-height`，它增加了按钮的高度。

我设置`line-height: 1em`了 for`#po_but`和`width: 32px`for `#po_in`，[请参见此处的演示](http://jsfiddle.net/hNx6E/17/)。高度现在都有 34px。

# blackberry - 黑莓 - 如何将数据从后台传输到主 ui 应用程序

> ID：11582112
> 
> 赞同：1
> 
> 时间：2012-07-20T15:14:13.547
> 
> 标签：blackberry, push-notification

我正在使用推送通知来显示通知。它通过备用入口点工作正常。后台应用程序将监听通知。当我单击通知时，我想在我的 UI 应用程序上打开一个特定页面。它是如何完成的？我尝试使用以下代码，但它总是会从起始页面加载 Ui。如果应用程序已经在运行，我如何加载特定页面。否则从开始页面加载 UI。我还想将一些值从后台应用程序传递给 UI 应用程序。

```
try {
     ApplicationDescriptor[] appDescriptors = 
         CodeModuleManager.getApplicationDescriptors(CodeModuleManager.getModuleHandle("MYAPP"));
     ApplicationDescriptor appDescriptor = 
         new ApplicationDescriptor(appDescriptors[0], new String[] {"MYAPP"});
     ApplicationManager.getApplicationManager().runApplication(appDescriptor);
} catch (ApplicationManagerException e) {
        e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:15:12.113

您**已经**将数据从后台传输到主 UI 应用程序（字符串`"MYAPP"`）。

您的应用程序（在[上一个问题中列出的](https://stackoverflow.com/questions/11555165/blackberry-alternate-entry-point-start-app-from-background-applicationon-push)应用程序）启动，并检查传递给它的参数，然后确定是在后台运行，还是作为普通 UI 应用程序运行。

您可以添加**更多**参数。在上面的代码中，将其更改为如下内容：

```
ApplicationDescriptor appDescriptor = 
     new ApplicationDescriptor(appDescriptors[0], 
                               new String[] { "MYAPP", "4", "FirstScreen" }); 
```

然后，在您的`UiApplication`子类中（例如在 App.java 中），您可以将其更改为

```
public static void main(String[] args)
{
    Application theApp = null;

    switch (args.length) {
    case 2:
        // initial screen and number of notifications provided
        theApp = new App(args[2]);
        app.setNumberOfNotificationsReceived(Integer.parseInt(args[1]);
        break;
    case 1: 
        // just the number of notifications was provided, not an initial screen name
        theApp = new App();
        app.setNumberOfNotificationsReceived(Integer.parseInt(args[1]);
        break;
    case 0:
    default:
        // no arguments .. launch the background application
        BackgroundApplication app = new BackgroundApplication();
        app.setupBackgroundApplication();
        theApp = app;
        break;
    }

    theApp.enterEventDispatcher();
} 
```

...我在你的类中添加了`setNumberOfNotificationsReceived()`方法和`App(String)`构造函数。`App`这些只是例子。让他们随心所欲。

应用程序.java：

```
public App()
{        
    // Push a screen onto the UI stack for rendering.
    pushScreen(new DefaultScreen());
} 

public App(String screenName) {
    if (screenName.equalsIgnoreCase("FirstScreen")) {
        pushScreen(new FirstScreen());
    } else {
        pushScreen(new DefaultScreen());
    }
} 
```

# php - 如何获取服务器软件的http头并设置超时

> ID：11582113
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:16.577
> 
> 标签：php, http-headers

我正在尝试获取 HTTP 标头，但只是服务器软件示例：Apache、Microsoft-iis、Nginx 等

功能

```
get_headers($url,1); 
```

如果可能或其他方式，我想设置超时太慢了？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:17:33.263

对于本地服务器，[$_SERVER](http://docforge.com/wiki/PHP/Superglobals/%24_SERVER)变量将为您提供 Web 服务器在 SERVER_* 键中公开的所有内容。

对于远程服务器，您可以使用 libcurl 并仅请求标头。然后解析响应。根据网络连接和另一台服务器的速度，延迟仍然可能很长。为避免长时间延迟，例如对于离线服务器，请使用 .将 curl 选项设置为短超时（例如 5 秒）`curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 5)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:42:37.313

这会将代码设置为 2 秒后超时，如果需要毫秒，可以使用 CURLOPT_TIMEOUT_MS。

```
$timeoutSecs = 2;

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, true); // Return the header
curl_setopt($ch, CURLOPT_NOBODY, true); // Don't return the body
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // Return to a variable instead of echoing
curl_setopt($ch, CURLOPT_TIMEOUT, $timeoutSecs);

$header = curl_exec($ch);
curl_close($ch); 
```

编辑：请注意，您不仅可以从中获取单个标头，它将返回整个标头（老实说，这不会比仅获取一个段慢），因此您需要创建一个模式来拉“服务器：”标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:19:23.997

您可以使用 cURL 执行此操作，这将允许您从远程服务器获取响应。您也可以使用 cURL 设置超时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:04:08.123

通过 curl 或 fsockopen 获取标题，解析它你想要的。

fsockopen 的函数是超时的最后一个参数。

curl 的函数调用“curl_setopt($curl, CURLOPT_TIMEOUT, 5)”来表示超时。

例如：

```
function getHttpHead($url) {
$url = parse_url($url);
if($fp = @fsockopen($url['host'],empty($url['port']) ? 80 : $url['port'],$error,
    $errstr,2)) {
    fputs($fp,"GET " . (empty($url['path']) ? '/' : $url['path']) . " HTTP/1.1\r\n");
    fputs($fp,"Host:$url[host]\r\n\r\n");
    $ret = '';
    while (!feof($fp)) {
        $tmp = fgets($fp);
        if(trim($tmp) == '') {
            break;
        }
        $ret .= $tmp;
    }
    preg_match('/[\r\n]Server\:\s([a-zA-Z]*)/is',$ret,$match);
    return $match[1];
    //return $ret;
} else {
    return null;
}
}
$servername= getHttpHead('http://google.com');

echo $servername; 
```

# javascript - 2 秒后删除新的 jQuery 前置节点

> ID：11582115
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:21.273
> 
> 标签：javascript, jquery

> **可能重复：**
> [获取 jQuery 插入的 DOM 元素，而无需在插入后重新查询元素](https://stackoverflow.com/questions/5950318/getting-jquery-inserted-dom-elements-without-requerying-for-element-after-insert)

有没有办法将新添加的元素（使用 jQuery）存储到 var 中？

我想做这样的事情：

```
var new_div = $('#my-div').prepend('<div>Something new</div>');

setTimeout(function () {
    new_div.remove();
}, 2000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:15:26.703

为了将新创建的变量存储`div`在变量中，您必须从创建 开始`div`，然后使用[`prependTo`](http://api.jquery.com/prependTo/)：

```
var new_div = $('<div>Something new</div>').prependTo('#my-div');

setTimeout(function () {
    new_div.remove();
}, 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:16:30.507

```
var newItem = $('<div>Something new</div>');
new_div.prepend(newItem);

setTimeout(function () {
    newItem.remove();
}, 2000); 
```

假设`new_div`是 DOM 中的一个 jquery 对象（像另一个 div）

工作样本：http: [//jsfiddle.net/exQTa/](http://jsfiddle.net/exQTa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:16:07.110

```
var new_div = $('<div>Something new</div>');

$('#my-div').prepend(new_div);

var timer = setTimeout(function () {
    new_div.remove();
}, 2000); 
```

或者更多 jQuery'ish：

```
$('<div>Something new</div>').prependTo('#my-div').delay(2000).queue(function() {
    $(this).remove(); 
}); 
```

[小提琴](http://jsfiddle.net/aGg6d/)

# android - Android iosched 项目错误

> ID：11582120
> 
> 赞同：2
> 
> 时间：2012-07-20T15:14:32.217
> 
> 标签：android, googleio

我为 io 2012 下载了 iosched 项目，但是一旦将项目导入 Eclipse，我得到 import com.google.android.apps.iosched.R; 无法解决。

我研究了一下，发现项目属性中android目标下的../libprojects/abs库标有红色标记，表示无法解析。

请就这个错误提出建议。

感谢您的帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:08:20.167

请检查 abs 库的库路径是否设置正确，如果您最近通过 git 签出项目，则 iosched 和名为 abs 的目录应该存在于您拉动 git 存储库时所在的同一目录中。解决此类问题，在eclipse左侧项目资源管理器中右键项目文件夹，进入Project properties，然后在左侧面板点击Android，然后build target面板下就是Library的东西，如果是library穿上红色鞋子，删除它并使用该窗格右侧的按钮重新添加它。这对我来说是这样，似乎通往 abs 的路径没有正确设置。

# ios - UIButton backgroundImage 键是什么？iOS

> ID：11582122
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:35.090
> 
> 标签：ios, xcode, image, uibutton, setvalue

这是我的第一个问题。

我正在尝试以编程方式更改 a 的背景图像，`UIButton`但有一个问题，我找不到背景图像的键。要理解，这是我的代码：

```
 [[self.view viewWithTag:69000+i] setValue:[UIImage imageNamed:[NSString stringWithFormat:@"%d-options.png", i+1]] forKey:@"backgroundImage"]; 
```

执行此操作时，应用程序崩溃。给出这个错误：

**线程 1：** main.m
和调试器中的信号 SIGTRAP：**（lldb）**

所以，如果我是对的并且崩溃是由不正确的键（*backgroundImage*）引起的，那么引用背景图像的键是什么？

非常感谢你！！

PD：我需要通过self.view viewWithTag来完成这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:22:53.403

你为什么不使用这个：

```
 if([[self.view viewWithTag:69000+i] isKindOfClass:[UIButton class]])
    {
        UIButton *currentButton = (UIButton *)[self.view viewWithTag:69000+i];
        [currentButton setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d-options.png", i+1]] forState:UIControlStateNormal];
    } 
```

# java - Protobuf-net 和 .proto 文件？

> ID：11582123
> 
> 赞同：2
> 
> 时间：2012-07-20T15:14:40.027
> 
> 标签：java, .net, wcf, protocol-buffers, protobuf-net

我将在我的 WCF 服务中使用 protobuf-net 库。客户端是 Java-Android，我在那边使用 proto 文件。

我应该在 .NET 端手动编码类还是 protobuf-net 以某种方式支持 .proto 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:38:30.543

如果您正在使用互操作，那么从 .proto 开始是最好的选择。对于 protobuf-net，有一个命令行工具“protogen”和一个 VS IDE 插件，允许您从 .proto 创建与 protobuf-net 兼容的类，类似于为其他平台生成代码的方式。两者都可以在 protobuf-net 项目站点上找到。如果你已经有类，也有一些支持从 protobuf-net 类生成 .proto，但这是不完整的（事实上，就 v2 而言，我是昨晚才写的，所以它还没有在官方下载中）。

如果您使用跨平台，您可能还需要考虑 protobuf-csharp-port。这是 Jon 的一个单独的并行实现，它保留了与 Java API 类似的 API。您可能会发现在平台之间使用类似的 API 会很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:10:30.027

由于您正在与 Java 进行互操作，因此您不应该编写 .NET 类——相反，您应该从 .proto 文件生成 C# 类。

我没有使用过 protobuf-net（虽然我已经广泛使用了 Java protobuf），但[据说有一个 Visual Studio 工具](http://marcgravell.blogspot.com/2009/07/protobuf-net-now-with-added-orcas.html)可以从 .proto 文件自动生成 C# 代码。显然还有一个命令行工具，但[似乎并不总是可用](https://stackoverflow.com/questions/9079783/getting-protogen-with-protobuf-net)。

# android - 位图不显示在画布上

> ID：11582128
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:53.017
> 
> 标签：android, android-canvas

我目前正在开发一款适用于 Android 的小游戏。我正在使用 Canvas 及其 drawBitmap 方法来绘制游戏级别。为此，我在一定程度上移植了 XNA 原理（例如 Update - Draw Loop 等）。

我还添加了一个“drawStaticParts”方法。我使用这种方法只绘制一次某些部分。此方法在 Update-Draw 循环开始之前调用。在这种方法中，我将（使用画布）绘制到位图上。此位图稍后用于在我绘制动态部分之前“恢复”Draw 中的旧状态（就像调用 drawColor(Color.Black) 一样）。

这工作得很好。但是只针对背景，也是用drawBitmap方法绘制的。一旦我尝试添加其他位图，它们就不会显示。我已经检查了背景是否可以覆盖其他位图，但是背景绘制调用发生在任何其他 drawBitmap 调用之前。我也没有任何例外或类似情况。

这是有问题的代码片段：

```
 public void drawStaticParts(Canvas c) {
    c.drawBitmap(TextureManager.getTexture(Element.getBackgroundID(), backgroundImg), null, new RectF(0, 0, Element.getResolution_width(), Element.getResolution_height()), null);
    for(int i = 0; i < width; i++)
    {
        for(int j = 0; j < height; j++)
        {
            Element temp = spielfeld[i][j];
            if(temp != null)
            {
                if(Element.isStatic(temp))
                {
                    float x = i * Element.getElement_width();
                    float y = j * Element.getElement_height();
                    RectF place = new RectF(x, y, Element.getElement_width(), Element.getElement_height());
                    Log.w("MS:doDraw", "Draw at " + x + ", " + y + " with w=" + Element.getElement_width() + " and h=" + Element.getElement_height());
                    c.drawBitmap(TextureManager.getTexture(temp.getTextureID(), sceneryID), null, place, null);
                }
            }
        }
    }
} 
```

我检查了所有有问题的值：一切都很好。假设的宽度和高度各为 40，坐标也很合适。我不知道进一步了。

我将永远感激任何帮助/建议。先感谢您。

PS：我也尝试了类似问题的线程中提到的一些解决方案，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:19:44.887

你不能只画一次静态部分..

**你应该在每个循环**中画出它们

 **因为即使每次绘制动态部分时它们都是静态的，您也将覆盖当前画布，因此您看不到静态部分..

编辑：那么问题应该出在

```
TextureManager.getTexture(temp.getTextureID(), sceneryID) 
```

检查参数...**

# php - 在共享主机上使用 javascript 内容抓取网页

> ID：11582129
> 
> 赞同：0
> 
> 时间：2012-07-20T15:14:58.327
> 
> 标签：php, ruby, perl, web-scraping, shared-hosting

我想抓取使用 Javascript 或类似内容动态加载内容的网页。

类似于无头浏览器的东西，我可以在没有 X 的 Linux 共享主机上使用它。

我可以使用 PHP、Perl、Ruby 或 Python。

你们中有人知道一些可以帮助我的框架/无头浏览器吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:19:36.633

如果您需要模拟按键或单击以加载内容，请尝试使用[Selenium来控制浏览器。](http://seleniumhq.org/)

对于无头浏览器，这里列出了一些：[无头互联网浏览器？](https://stackoverflow.com/questions/814757/headless-internet-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:55:43.153

见图书馆[WWW::Scripter](http://search.cpan.org/~sprout/WWW-Scripter-0.029/lib/WWW/Scripter.pod)

***概要：***

```
use WWW::Scripter;

$w = new WWW::Scripter;
$w->use_plugin('Javascript');
$w->get('http://some.site.com/that/uses/javascript');
$w->content; # returns the HTML content, possibly modified by scripts
$w->eval('alert("Hello from JavaScript")');
$w->document->getElementsByTagName('div')->[0]->... 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-20T15:18:25.717

在 Perl 中使用 Perl [WWW::Mechanize](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)。该模块有许多方法可以执行类似 Web 浏览器的功能。下面是一个示例代码：

```
use WWW::Mechanize;
use strict;

my $username = "admin";
my $password = "welcome1";  
my $outpath  = "/home/data/output";
my $fromday = 7;
my $url  = "https://www.myreports.com/tax_report.php";
my $name = "tax_report";
my $outfile = "$outpath/$name.html";

my $mech = WWW::Mechanize->new(noproxy =>'0');  

$mech->get($url);
$mech->field(login => "$username");
$mech->field(passwd => "$password");

$mech->add_handler("request_send",  sub { shift->dump; return });
$mech->add_handler("response_done", sub { shift->dump; return });

$mech->click_button(value=>"Login now");

my $response = $mech->content();

print "Generating report: $name...\n";

open (OUT, ">>$outfile")|| die "Cannot create report file $outfile";
print OUT "$response";
close OUT; 
```

如果您想处理网页中的 Javascript（您想要抓取），您可以查看[WWW::Mechanize::Firefox](http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.66/lib/WWW/Mechanize/Firefox.pm)，但这可能需要安装 Mozilla 的[MozRepl](https://addons.mozilla.org/en-us/firefox/addon/mozrepl/)插件。

# c++ - SDL：程序运行正常；仅绘制两行像素

> ID：11582136
> 
> 赞同：0
> 
> 时间：2012-07-20T15:15:32.880
> 
> 标签：c++, sdl

我用 C++ 编写了一个简单的 SDL 程序，以查看是什么。我让它进入（大部分）工作状态，除了它运行得很慢（虽然我在上网本上运行它，所以也许就是这样），并且在窗口中没有绘制超过两行像素。

此问题存在于软件和硬件模式中。

```
//colorizer.h
#include <iostream>
#include "SDL.h"
#include "math.h"

class Colorizer
{
    public:
        Colorizer(int width, int height, int bpp);
        ~Colorizer();
        void frame(int rx, int ry, int gx, int gy, int bx, int by);

    protected:
        SDL_Surface* screen;
        SDL_Surface* canvas;
        void set_pixel(int x, int y, int r, int g, int b);
        double distance(int from_x, int from_y, int to_x, int to_y);
        int canvasW;
        int canvasH;
        int canvasBPP;
        long framenumber;
};

//-------------------------------------------------------------------------------------------
//colorizer.cpp
#include "colorizer.h"

Colorizer::Colorizer(int width, int height, int bpp)
{
    screen = SDL_SetVideoMode(width, height, bpp, SDL_SWSURFACE);
    if(!screen)
    {
        throw(SDL_GetError());
    }
    canvasW = width;
    canvasH = height;
    canvasBPP = bpp;
    framenumber = 0;
}

void Colorizer::frame(int rx, int ry, int gx, int gy, int bx, int by)
{
    if(SDL_LockSurface(screen) < 0){
        std::cerr << "Can't lock screen: " << SDL_GetError() << std::endl;
    }

    for(int pix = 0; pix < screen->h; pix++) //Per column
    {
        for(int row = 0; row < screen->w; row++) //Per pixel
        {
            double src_r = sin(0.5*distance(row, pix, rx, ry)*framenumber);
            double src_g = cos(0.5*distance(row, pix, gx, gy)*framenumber);
            double src_b = sin(0.5*distance(row, pix, bx, by)*framenumber);
            int dst_r = static_cast<int> (fabs(floor(255*src_r)));
            int dst_g = static_cast<int> (fabs(floor(255*src_g)));
            int dst_b = static_cast<int> (fabs(floor(255*src_b)));
            if(dst_r > 255 or dst_g > 255 or dst_b > 255 or dst_r < 0 or dst_g < 0 or dst_b < 0){
                std::cerr << "Error: Pixel: (" << row << "," << pix << ") r=" << dst_r << " g=" << dst_g << " b=" << dst_b << std::endl;
                throw ("One of the colours is invalid.");
            }
            set_pixel(row, pix, dst_r, dst_g, dst_b);
        }
    }

    SDL_UnlockSurface(screen);
    SDL_Flip(screen);
    framenumber++;
}

double Colorizer::distance(int from_x, int from_y, int to_x, int to_y)
{
    double triW = static_cast<double> (from_x) - static_cast<double> (to_x);
    double triH = static_cast<double> (from_y) - static_cast<double> (to_y);
    double distSq = triW*triW + triH*triH;
    return sqrt(distSq);
}

void Colorizer::set_pixel(int x, int y, int r, int g, int b)
{
    if(x > 640 or y > 480){
        std::cerr << "Invalid pixel: " << x << "," << y << std::endl;
        return;
    }
    int color;
    color = SDL_MapRGB(screen->format, r, g, b);

    int *pixel;
    pixel = (int*) screen->pixels + x + y;
    *pixel = color;
}

Colorizer::~Colorizer()
{
    SDL_FreeSurface(screen);
}

//-------------------------------------------------------------------------------------------
//main.cpp
#include <iostream>
#include "SDL.h"
#include "colorizer.h"

/*snip pretty bash colour functions*/

int main (int argc, char* argv[])
{
    int sdlinit = SDL_Init( SDL_INIT_EVERYTHING );
    if( sdlinit < 0 ){
        std::cerr << "Cannot initialize SDL: " << SDL_GetError() << std::endl;
        return 1;
    }

    try{
        Colorizer app(640, 480, 32);
        bool keypress = false;

        SDL_Event evt;
        while(!keypress){
            std::cerr << "."; //per frame
            app.frame(100, 230, 25, 40, 200, 100); //default points
            while(SDL_PollEvent(&evt)){
                std::cerr << "!"; //per event
                if (evt.type == SDL_QUIT or evt.type == SDL_KEYDOWN)
                {
                    keypress = true;
                }
            }
        }
        std::cout << std::endl;
        return 0;
    }catch(const char* &ex){
        SDL_Quit();
        return 1;
    }
}
//-------------------------------------------------------------------------------------------
// compile with: g++ *.cpp -O2 -o colorizer `pkg-config --cflags --libs sdl`
//------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:37:08.217

不`pixel = (int*) screen->pixels + x + y;`应该是这样的`pixel = (int*) screen->pixels + x + y * screen->w;`吗？我实际上不知道像素在 SDL 中是如何排列的，但如果你不乘 x 或 y，那么 (2,1) 将与 (1,2) 的字节相同，这显然不会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:24:00.377

除了@Paul Tomblin 指出的内容外，您还假设`typedef int Uint32`，这是不可移植的，也是一种不好的做法。还考虑到 C++ 风格，

```
int color;
color = SDL_MapRGB(screen->format, r, g, b);

int *pixel;
pixel = (int*) screen->pixels + x + y;
*pixel = color; 
```

应该是：

```
Uint32* pixels = reinterpret_cast<Uint32*>(screen->pixels);
pixels[screen->w * y + x] = SDL_MapRGB(screen->format, r, g, b); 
```

# iphone - 用户触摸 NSMutableArray 中的图像后如何向上滑动视图

> ID：11582143
> 
> 赞同：0
> 
> 时间：2012-07-20T15:15:51.930
> 
> 标签：iphone, ios

用户触摸 NSMutableArray 中的图像后，我将如何向上滑动 webview我已经创建（WebView）我提前感谢您的帮助。

代码

```
[imagesQueue = [[NSMutableArray alloc] init];
[imagesQueue addObject:[UIImage imageNamed:@"ban3.png"]];
[imagesQueue addObject:[UIImage imageNamed:@"ban1.png"]];
[imagesQueue addObject:[UIImage imageNamed:@"ban2.png"]];

//Put the last image on imageBack (UIImageView)
imageBack.image = [imagesQueue objectAtIndex:[imagesQueue count] - 1];

//Insert the last image item from array to the first position 
[imagesQueue insertObject: imageBack.image atIndex:0];

//Remove the last image item from array
[imagesQueue removeLastObject];

//Change UIImageView alpha
//The desired opacity of the image, specified as a value between 0.0 and 1.0\. 
//A value of 0.0 renders the image totally transparent while 1.0 renders it fully opaque. 
//Values larger than 1.0 are interpreted as 1.0.
imageFront.alpha = 1.0;
imageBack.alpha = 0.0;

//Call nextImageAnimation add the next picture and produce the infinite loop
[self nextImageAnimation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:01:04.440

只需遍历您的数组并为每个图像添加一个 UITapGestureRecognizer ：

```
for(UIView *image in self.myImages)
{
    UITapGestureRecognizer* recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];

    recognizer.numberOfTapsRequired = 1;
    recognizer.numberOfTouchesRequired = 1;
    [image addGestureRecognizer: recognizer];
} 
```

然后在你的`handleTap:`方法中向上滑动你的视图（也许改变它的框架）。

# magento - Magento 模块

> ID：11582146
> 
> 赞同：0
> 
> 时间：2012-07-20T15:16:10.840
> 
> 标签：magento, magento-1.9

我有几个关于 Magento 的问题：

1.  从 Magento 管理面板页面，可以找到 Magento 模块的列表，`Mage_Newsletter`例如`Mage_poll` 。我想知道，这些是从哪里来的？

    例如，如果我创建如下文件：

    ```
    /var/www/magento/app/design/frontend/[design_package]/[layout_name]/{layout,templates} 
    ```

    由存储在这样一个目录中的一组文件定义的模块需要什么才能显示在我刚刚指出的管理页面的 Magento 模块列表中？

2.  在设计包的皮肤目录下，有一个图像目录和一个单独的`images/media` 目录的目的是什么。如何决定将哪些图像直接放在 images 目录下而不是 under `images/media`？这里使用的约定是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:38:36.477

1.每个模块都有一个模块注册文件。这些注册文件存在于

```
app/etc/modules/ 
```

这些用于激活或停用模块。例如`Mage_Newsletter`注册文件是`Mage_Newsletter.xml`

如果要创建模块注册文件，`Namespace_Module.xml`请`app/etc/modules`使用

```
<?xml version="1.0"?>
<config>
    <modules>
        <Namespace_Module>
            <active>true</active>
            </codePool>local</codePool>
        </Namespace_Module>
    </modules>
</config> 
```

该模块将出现在管理面板中。

2.您上传的目录，静态块和图像在.`media`主题特定图像下 `skin/frontend/[design_package]/[layout_name]/images`

如果您是 Magento 开发新手，您应该查看[知识库](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T12:38:39.230

在 magento 2.0 中，在实现自定义模块时，我们必须定义一个文件

app\code\PackageName\Modulename\registration.php

这个文件应该有这个代码

\Magento\Framework\Component\ComponentRegistrar::register(\Magento\Framework\Component\ComponentRegistrar::MODULE, 'PACKAGENAME_MODULENAME', **DIR**

所以当使用 'php bin/magneto setup:upgrade' 安装模块时..

这个文件将被调用并且我们的模块数据被注册在magento模块配置文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T10:30:34.990

A. Magento 1.9 及其以前的版本，

1.注册文件放在`yourRootMagentoDirectory/app/etc/modules`名字类似的文件夹中`Mage_All.xml`（实际上它包含了大部分核心magento模块注册信息）。这个文件还有Mage_Newsletter和Mage_poll模块信息

2.原因是为了区分图像类型敌人示例目录，您上传的静态块和图像位于媒体和主题特定图像（如徽标）位于 skin/frontend/[design_package]/[layout_name]/images 下

B.在magento 2中

注册文件在`app/code/[CompanyName]/[moduleName]/registarion.php`文件内

这些文件通知 magento 这些模块存在并且 magento 加载这些模块。

对于相关的图像，magento2 中的答案是相同的

# chromium - 铬光环 GPU 加速

> ID：11582148
> 
> 赞同：0
> 
> 时间：2012-07-20T15:16:18.943
> 
> 标签：chromium

谁能告诉我如何为 Aura chromium OS 创建一个像素图。因为我想为我的浏览器启用 gpu 加速。请指导我如何进一步进行。任何解决此问题的想法和建议。是否有任何可用的 API 可以共享示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T04:22:32.127

如果你这样运行，它会运行更慢
chromium-browser --use-gl=osmesa --user-data-dir=/home/user1

尝试传递一些标志。

```
http://peter.sh/experiments/chromium-command-line-switches/ 
```

# postgresql - 如何从 EJB3 扩展持久性上下文访问 @Lob 字段

> ID：11582149
> 
> 赞同：3
> 
> 时间：2012-07-20T15:16:22.163
> 
> 标签：postgresql, jakarta-ee, ejb-3.0, jpa-2.0, blob

我们正在使用**EJB3** bean 和**JPA2**注释在**JaveEE6中开发一个项目。**

 ****我们有一些有状态的 EJB3 bean，它们使用**扩展的持久性上下文**来将数据库实体显示在前面（通过一些接口，消除了对 DTO 的需要）。

典型的用途是这样的：

*   所有方法都没有事务，因为我们不想立即提交用户修改
*   通过非事务性方法，我们正在加载实体，附加到扩展上下文
*   只有一个保存方法是事务性的：检查用户数据后，实体被提交并持久化到数据库中。

* * *

使用 MySQL 数据库，一切正常。

唉，在*Postgres*`@Lob`上，在非事务性方法中加载的字段会出现问题。JDBC 似乎禁止 Lob 访问外部事务，抛出： **`org.hibernate.exception.GenericJDBCException: Large Objects may not be used in auto-commit mode`**

* * *

正如[stackoverflower 所指出](https://stackoverflow.com/a/3164352/923712)的，一个 Lob 可以在多个记录中，因此它需要一个事务来保持一致性。

设置`autocommit`为 true in`persistence.xml`根本不起作用，[也不应该做](https://stackoverflow.com/a/1667859/923712)。

我不能使该方法具有事务性，因为我们不想在调用结束时提交任何内容。那么，有谁知道我怎样才能简单地访问 Lob？

我们想象的一个 hack 解决方案是将 Lob 移动到另一个实体中，然后添加一个读取 Lob 内容的事务方法，以便我们可以使用它。我觉得好脏。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:41:53.000

您似乎认为对 JPA 上下文中加载的实体所做的更改会自动提交，除非该实体已分离。事实~~并非~~如此，它显然是如何工作的。但是，即使您修改附加的实体并刷新，或者合并分离的实体，a也`rollback`可以确保更改¹对其他事务永远不可见。

在执行只读操作时打开事务是无害的，而且通常是保持一致性的好主意，*只要您不要将其打开太久*²。如果你想保证没有数据被写入并且你正在使用 JTA，只需使用`setRollbackOnly()`on`SessionContext`来确保它。对于手动 JPA 事务管理，只需确保在完成时调用`rollback()`，`EntityTransaction`而不是提交。

就个人而言，我建议在您的“getLob”方法中使用新事务并在方法结束时将其回滚。如果您的数据库不支持嵌套事务（很少支持），这通常会导致从池中获取一个新连接来执行这项工作。

如果您使用 JTA 和容器管理事务，请尝试：

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class LobTest {

    @PersistenceContext
    private EntityManager em;

    @Resource 
    private SessionContext sctx;

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public byte[] getLob() {
        // Get your LOB content by fetching a new copy of the entity from the DB
        // by ID, avoiding the need to split the LOB out. Note that you lose
        // tx consistency guarantees between the LOB and the rest of the entity by
        // doing this.
        // then after loading the LOB:
        sctx.setRollbackOnly();
    }

} 
```

或者，如果您不介意读取 LOB 中止任何周围事务的错误，请使用`TransactionAttributeType.REQUIRES`代替`REQUIRES_NEW`和不`setRollbackOnly()`。你不能改变任何东西，所以什么都不会被承诺。如果一个新事务尚未打开，它将打开一个新事务，否则加入现有事务，因此您可以获得对 LOB 的一致读取。唯一的缺点是一些数据库错误会中止整个 JTA 事务。

如果您在非 JTA 环境中使用用户管理的事务，只需获取新的 EntityManager、获取 EntityTransaction、用于`em.find(...)`加载包含实体的 LOB 的新副本等。

* * *

¹ . 好的，所以在大多数数据库中都有一些事务豁免对象类型，例如 PostgreSQL`SEQUENCE`和相关的`SERIAL`伪类型、咨询锁等，即使受到回滚事务的影响。事务也可以“写入”到数据库，因为它持有资源锁，这也可能阻止其他操作。对于实际*数据*，它是安全的。

² . 如果可以的话，请避免让 tx 保持打开状态超过几秒钟，因为长时间运行的事务会导致某些数据库出现性能问题，并且会占用连接池。避免在“用户思考时间”（您正在等待用户做某事的时间）保持交易开放，他们可能会做白日梦，或者去吃午饭，或者去度假，或者去月球......离开你的穷人数据库和连接池等待它们的返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:29:08.687

尝试`getEntityManager().flush();`

这会写入数据库，但不会提交当前事务。假设您的隔离级别是“已提交读”，在您实际提交事务之前，您不会在其他查询中看到更新。请记住，您将锁定已触摸的行...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:40:50.393

由于某些架构原因，我们选择将`Lob`字段设置在另一个字段中`Entity`并通过`@Stateless`bean 读取/写入它。

实体：

```
@Entity
@Access(AccessType.FIELD)
public class LobEntity
{
    [...]

    @Lob
    private String content;

    public String getContent()
    {
        return content;
    }

    public void setContent(String content)
    {
        this.content = content;
    }
} 
```

服务：

```
@Stateless
@LocalBean
public class LobService 
{
    @PersistenceContext
    private EntityManager em;

    public String readLob(Long lobId)
    {
        LobEntity lobEntity = em.find(LobEntity.class, lobId);
        return lobEntity.getContent();
    }

    public LobEntity writeNewLob(String content)
    {
        LobEntity lob = new LobEntity(content);
        em.persist(lob);
        return lob;
    }
} 
```

还有一个直接包含 lob 但不再包含的类：

```
@Entity
@Access(value = AccessType.FIELD)
public class MyEntity
{
    [...]

    protected Long contentLobId;
    @Transient
    protected String editableContent;

    public Long getContentLobId()
    {
        return contentLobId;
    }

    public void setContentLobId(Long contentLobId)
    {
        this.contentLobId = contentLobId;
    }

    public String getEditableContent()
    {
        return editableContent;
    }

    public void setEditableContent(String editableContent)
    {
        this.editableContent = editableContent;
    }
} 
```

实体没有`LobEntity`自身，以防止开发人员像傻瓜一样尝试访问它：如果我们想要来自非事务上下文的内容，我们正在使用`LobService`. 而当我们想要保存编辑过的内容时，我们也使用了同一个 bean。****

# c++ - 使用 c++/boost 的索引树

> ID：11582150
> 
> 赞同：-3
> 
> 时间：2012-07-20T15:16:25.807
> 
> 标签：c++, boost

我想做下一棵树：

```
 1     
                    1.1                                 1.2  
       1.1.1                 1.1.2          1.2.1                1.2.2
 1.1.1.1   1.1.1.2                                         1.2.2.1   1.2.2.2 
```

最后，我列出了所有索引的最终级别如下（无序）：

```
1.2.2.2
1.2.2.1
1.1.1.2
1.2.1        
1.1.2 
1.1.1.1 
```

如何使用 boost 库以这种方式进行索引并像这样对它们进行排序：

```
1.1.1.1 
1.1.1.2
1.1.2 
1.2.1   
1.2.2.1   
1.2.2.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:33:49.877

如果你真的认为你需要使用 Boost，那么显而易见的去处就是[Boost Graph Library](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/index.html)。然而，老实说，这有点像使用核武器杀死蚊子。

第一部分是一个简单的二叉树，甚至不需要平衡，因此只需在适当的地方遍历和插入项目即可。获得结果同样简单——遍历树，当且仅当它是叶子时才将一个节点添加到输出中。

Sorting the result takes `std::sort` along with a comparison function that compares the individual elements in each item. If you're sure each element will only be a single digit, you can use a simple lexical comparison instead.

# javascript - 如何阻止asp.net按钮被双击？

> ID：11582154
> 
> 赞同：0
> 
> 时间：2012-07-20T15:16:39.443
> 
> 标签：javascript, jquery, asp.net, vb.net, double-click

好的，让我以我已经阅读了该网站上的所有文章并尝试了大多数这些解决方案的事实作为这个问题的开头。

我有一个具有服务器端事件的按钮。此服务器端事件有一个（处理 btnSave_click）。

我的第一次尝试当然是这个。：

```
btnSave.enable = false 
```

这当然不够快。

然后我尝试了这个。：

```
btnSave.Attributes.Add("onclick", "this.disabled=true;"); 
```

和这个。：

```
btnSave.Attributes.Add("onclick", " this.disabled = true; " + ClientScript.GetPostBackEventReference(btnSave, Nothing) + ";") 
```

这不起作用，当然，然后我通过 OnClientClick 事件尝试了一堆不同的 jquery 和 javascript。这也不起作用，但据我所见，这是由于我也触发了服务器端事件，因此在逐步执行过程中我没有达到我的功能。正如你所看到的，我花了很多时间试图让它发挥作用。希望有人知道我在这里做错了什么。我所拥有的是一个非常简单的按钮和代码隐藏真的没有什么奢侈的。

这是我的按钮。：

```
<asp:Button ID="btnSave" runat="server" Width="60px" Text="Save" Enabled="False"></asp:Button> 
```

这是服务器端事件标头。：

```
Private Sub btnSave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSave.Click 
```

再次非常感谢任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:21:55.640

像这样的东西？

客户：

```
var buttonPressed = false; 
```

服务器：

```
btnSave.OnClientClick = "if (buttonPressed) return false else buttonPressed = true; return true;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:22:02.117

像这样的东西应该工作：

```
 $('#yourButtonId').click(function() {
         $(this).attr('disabled', 'disabled');
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:29:37.907

当您单击按钮并使用 javascript 禁用它时，它在客户端被禁用，并且服务器端不知道它在客户端被禁用，因为服务器端检查控件属性的视图状态。如果您想在单击和回发后保持禁用它，那么您必须在客户端和服务器上都禁用它。

**在客户端**

```
$('#<%= btnSave.ClientID %>').click(function() {
         this.disabled = true;
    }); 
```

**在服务器端**

```
btnSave.enable = false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T14:50:09.017

这是更聪明的解决方案：服务器：

```
 <asp:Button ID="btnSave" runat="server" Width="60px" 
Text="Save" Enabled="False" OnClientClick="return preventDblClick()" ></asp:Button> 
```

客户：

```
var dbl = 0;
function preventDblClick() {
    if (dbl < 1) {
        dbl += 1;
        return true;

    } else {
        return false;

    }
} 
```

# php - 将数据存储到 PHP 数组中

> ID：11582155
> 
> 赞同：0
> 
> 时间：2012-07-20T15:16:42.250
> 
> 标签：php, mysql, arrays, while-loop

total_stars这里是代码，它是我*想要*做的最好的解释：

```
$total_stars = array();
$query = "SELECT items_id FROM items";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result)) {
    $item_id = $row['items_id'];
    $sql = "Select Count(item_id) FROM ratings WHERE item_id = '{$item_id}'";
    $result = mysql_query($sql);
    $total_stars[] = mysql_fetch_array($result);
}

//  To see the output by entering the URL I want to print_r  
print_r($total_stars);

// In the end, I am trying to JSON encode this and will later output in Java for Android
print(json_encode($total_stars)); 
```

（为了不混淆，items_id 在 items 表中，item_id（没有's'）在 rating 表中）

现在用简单的英语：

我正在遍历项目表中的每一行。当我这样做时，在每个循环中，我指的是另一个名为“评级”的表，并计算该项目有多少评级。

例如，我希望数组看起来像（65、43、55、43 等）。当然是样本数。但每个都代表表中每个项目的评分总数。如何让 print__r 在循环中显示 SQL 语句的结果？

尝试使用联接的更新代码：

```
$query = "SELECT items_id FROM items";

$q = 'SELECT 
    items.items_id, 
    COUNT(ratings.item_id) AS rate 
    FROM `items`
    LEFT JOIN ratings ON (ratings.item_id = items.items_id)
    GROUP BY items_id';
$result = mysql_query($q);

while ($row = mysql_fetch_array($result)) {

    $total_stars = mysql_fetch_array($result);

}

print_r($total_stars); 
```

print_r 输出： Array ( [0] => 783 [items_id] => 783 [1] => 0 [rate] => 0 )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:23:25.027

```
$total_stars = array();
while ($row = mysql_fetch_array($result))
{
    $item_id = $row['items_id'];
    $sql = "Select Count(item_id) FROM ratings WHERE item_id = '{$item_id}'";
    $result = mysql_query($sql);
    $row = mysql_fetch_row($result);
    $total_stars[] = row[0];
} 
```

这应该这样做。

不要忘记 mysql_fetch_array 返回一个带有列索引的数组。所以 mysql_fetch_array($result) 将是一个你想要第一个元素的数组（来自 MySQL 函数 COUNT() 的结果），而不是计数本身。

但正如我在评论中所说，请改用连接查询。您将对 mysql 服务器的查询量从第一个查询中的行数+1（可能很多！）减少到只有一个，这是一个巨大的改进。

**更新：以下是如何使用连接查询（Sven 查询）：**

```
$q = 'SELECT 
    items.items_id, 
    COUNT(ratings.item_id) AS rate 
    FROM `items`
    LEFT JOIN ratings ON (ratings.item_id = items.items_id)
    GROUP BY items_id';
$result = mysql_query($q);

$total_stars = array();
while ($row = mysql_fetch_array($result))
{
    $total_stars[] = $row['rate']; // Stars count is stored in $row['rate']
    echo "Item id ".$row['items_id']." has rating ".$row['rate'];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:49:28.667

为什么不按照评论中的建议使用 JOIN ？如果您想要一个包含所有项目评级的数组，那么这是一种方法（没有测试 PHP db 代码，但我确实测试了查询）。

```
$total_stars = array();

$q = 'SELECT 
        items.item_id,
        COUNT(ratings.item_id) AS rate 
      FROM `items`
      LEFT JOIN ratings ON (ratings.item_id = items.item_id)
      GROUP BY item_id';
$result = mysql_query($q);

$total_stars = mysql_fetch_array($result); 
```

您应该改用 MYSQLi 或 PDO_MYSQL。[更多信息 MYSQLi](http://www.php.net/manual/en/book.mysqli.php) ,[更多信息 PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)

在这里您可以找到有关 JOINS 的更多信息：[有关 MYSQL 连接的信息](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

# php - 在两个分隔符之间拆分字符串

> ID：11582157
> 
> 赞同：0
> 
> 时间：2012-07-20T15:16:46.653
> 
> 标签：php, regex

我正在尝试将 HTML 源代码中的字符串与开始`<!--sliderStart-->`和结束进行匹配`<!--sliderEnd-->`

示例 1：

```
<!--sliderStart-->
<p>blah</p>
<p>blah2</p>
<!--sliderEnd--> 
```

示例 2：

```
<!--sliderStart--><p>blah</p><p>blah2</p><!--sliderEnd--> 
```

这是我的模式，但它不能有效地工作：

```
$pattern = "/<!--sliderStart-->[^\n]+(.*?)<!--sliderEnd-->/"; 
```

这种匹配的确切模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:19:01.240

你为什么`[^\n]+`在你的正则表达式中使用？这告诉正则表达式引擎*不要匹配**你*想要匹配的换行符。

只需摆脱它，您就可以开始了：

```
$pattern = "/<!--sliderStart-->(.*?)<!--sliderEnd-->/s"; 
```

**更新**：不要忘记最后的`s`修饰符，以便`.`也匹配换行符。
谢谢@Palladium。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:21:35.180

除非您告诉它们，否则正则表达式点不匹配换行符。您需要`s`在正则表达式末尾添加一个修饰符，如下所示：

```
$pattern = '/<!--sliderStart-->(.*?)<!--sliderEnd-->/s'; 
```

# python - 扩展'word'的python正则表达式定义

> ID：11582158
> 
> 赞同：1
> 
> 时间：2012-07-20T15:16:48.403
> 
> 标签：python, regex

python可以扩展`w+`and匹配的内容`W+`吗？我如何在其列表中添加更多字符？

为什么？浏览一些文本并发现有一些字符我想添加到单词定义中，例如`&`and `æ`。

如果我无法添加到单词定义中，那么如何添加到我的函数中：

```
re.findall(r'\w+', txt)
re.findall(r'\W+', txt) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:21:27.273

Well`\w`是一组预定义的字符，您不能以编程方式修改`\w`. 但是您可以使用语法设置一个匹配任何字符`\w`以及您想要的任何其他字符的组。`[]`所以你会改变你的正则表达式

```
[\w\&æ]+ 
```

或者

```
[\W\&æ]+ 
```

分别

这匹配`\w`or`\W`集中的任何字符并添加 & 和 æ。您可以在[regexpal](http://regexpal.com/?flags=g&regex=%5B%5Cw%5C&%C3%A6%5D%2b&input=KittyCat&%C3%A6)上使用这些表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:22:37.487

在预编译模式中使用字符组。

```
lower_match_chars = re.compile('[\\w\\&]+')
upper_match_chars = re.compile('[\\W\\&]+')
all_lower_matches = re.findall(lower_match_chars, txt)
all_upper_matches = re.findall(upper_match_chars, txt) 
```

# java - 在 Android 上将 Python 嵌入 Java 中

> ID：11582161
> 
> 赞同：9
> 
> 时间：2012-07-20T15:16:52.970
> 
> 标签：java, android, python

通过嵌入，我的意思是从 Java 中的 String 执行 Python 代码。

Jython 不会为 Android 编译，并且 Android[脚本层](http://code.google.com/p/android-scripting/)似乎不允许我通过我的 Java 应用程序嵌入 Python。

那么如何将 Python 嵌入到 Android 上的 Java 应用程序中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:04:45.260

看看[这个](http://jepp.sourceforge.net/)，它适用于 J2SE，你可以尝试在 Android 上运行。

# jta - 如何将 SharedEntityManagerCreator 配置为不每次都创建实体管理器。

> ID：11582165
> 
> 赞同：0
> 
> 时间：2012-07-20T15:17:12.477
> 
> 标签：jta

我在删除实体时遇到了一个奇怪的问题，我认为这是因为错误的弹簧配置/错误，我无法准确指出它是什么。我可以读取，但每当我尝试删除时，我都会收到错误..

以下是我的设置.. 我有一个基于 spring 的事务管理委托给 jboss 的 jta。以下是我的弹簧配置

```
<context:annotation-config />
<context:component-scan base-package="com.blah.blah">
    <context:exclude-filter type="regex"
        expression="com.blah.blah.batch.*" />
</context:component-scan>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="pmabDataSource" />
    <property name="persistenceUnitName" value="MABPersistenceEl" />
    <property name="jpaDialect" ref="eclipseLinkDialect" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence-eclipse.xml" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="false" />
        </bean>
    </property>

    <property name="jpaPropertyMap">
        <map>
            <entry key="eclipselink.target-server" value="JBOSS" />
            <entry key="eclipselink.target-database" value="Oracle" />
            <entry key="eclipselink.persistence-context.flush-mode" value="AUTO" />
            <entry key="eclipselink.jdbc.native-sql" value="false" />
            <entry key="eclipselink.weaving" value="false" />
            <entry key="eclipselink.logging.level" value="FINEST" />
            <entry key="eclipselink.logging.parameters" value="true" />
            <entry key="eclipselink.logging.exceptions" value="true" />
            <entry key="eclipselink.orm.throw.exceptions" value="true" />
        </map>
    </property>
</bean>

<bean id="eclipseLinkDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

<tx:jta-transaction-manager /> 
```

持久化文件如下

```
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

    <persistence-unit name="MABPersistenceEl"
        transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>pmabDataSource</jta-data-source>
        <!-- ,,,, other things ommited for brevity/> -->
    </persistence-unit>
</persistence> 
```

我的 basedao 像这样被注入 EntityManager

```
@PersistenceContext(unitName = "MABPersistenceEl")
protected EntityManager entityManager ; 
```

在我派生的 dao 的某个地方，我有以下内容

```
UserRole newRole=entityManager.find(UserRole.class,urole.getId()) ;
entityManager.remove(newRole); 
```

我得到以下 09:53:00,386 DEBUG Creating new EntityManager for shared EntityManager invocation 09:53:00,413 DEBUG [EntityManagerFactoryUtils]:328 Closing JPA EntityManager 09:53:04,119 DEBUGSharedEntityManagerCreator$SharedEntityManagerInvocationHandler:231 Creating new EntityManager for shared EntityManager 调用 09： 53:04,146 调试 [EntityManagerFactoryUtils]:328 关闭 JPA EntityManager 09:53:05,760 调试为共享 EntityManager 调用创建新 EntityManager 09:53:05,781 调试 [EntityManagerFactoryUtils]:328 关闭 JPA EntityManager

那就是 spring EntityManager 创建者在每次访问它时都会创建一个 entityManager，而不是为事务返回一个。这导致 EL 库发疯。java.lang.IllegalArgumentException: Entity must be managed to call remove: UserRole@419d，尝试合并分离的并再次尝试删除。在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.performRemove(UnitOfWorkImpl.java:3559) 在 org.eclipse.persistence.internal.jpa.EntityManagerImpl.remove(EntityManagerImpl.java:518)

如何配置 springs 实体管理器创建者以将实体管理器还给我进行事务处理，而不是每次都创建一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:32:18.473

我确实进行了以下更改，现在它可以工作了..代码：

```
<!-- the transactional advice (what 'happens'; see the <aop:advisor/> bean below) -->
<tx:advice id="pmabTxAdvice" transaction-manager="transactionManager">
    <!-- the transactional semantics... -->
    <tx:attributes>
        <!-- all methods starting with 'get' are read-only -->
        <!-- other methods use the default transaction settings (see below) -->
      <tx:method name="*" propagation="REQUIRED" read-only="false"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut id="serviceOperation"
        expression="execution(* com.foo.foobar.abc.*.*.*(..))" />
    <aop:advisor advice-ref="pmabTxAdvice" pointcut-ref="serviceOperation" />
</aop:config> 
```

希望这可以帮助某人

# objective-c - ViewController 完全搞砸了，附上截图

> ID：11582172
> 
> 赞同：0
> 
> 时间：2012-07-20T15:18:09.380
> 
> 标签：objective-c, ios, uiviewcontroller

我有一个应用程序，我使用一个控制器，它有多个字段，可以用键盘或选择器在里面写一些东西。我还有一个按钮，当你点击它时，你会导航到另一个控制器拍照，完成后你会返回到前一个控制器。如果我在访问“相机”控制器之前尝试填写字段，一切看起来都很好，如下图所示：

![在此处输入图像描述](../Images/0209fdefa5586baeb9f0c3375f53059e.png)

但是，如果我按下相机按钮导航到“相机控制器”并返回此控制器以在我点击一个字段时填充字段，则选择器会完全搞砸并看起来像这样：

![在此处输入图像描述](../Images/c4de083e45a97370251ad2cd7ae6d59f.png)

任何想法为什么会发生这种情况？我无法理解我在代码中所做的更改，并在它正常工作之前导致它作为某些版本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:26:09.470

看起来选择器正在进入横向模式，并且稍后没有将更改注册回纵向。你确定在完成后销毁选择器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:39:11.827

您 DiffMerge 以查找您在两个版本之间所做的更改（如果您想查看两个文件夹之间的所有差异）。

此外，看起来您的视图框架要么搞砸了，要么你显示的选择器错误。

如果您的相机视图在横向模式下执行某些操作或状态栏变为横向，则在关闭它时，您可能会看到帧值混乱。每次显示此选择器时只需打印/nslog 帧宽度。您将能够找出问题所在。

# html - HTML画布清除画线

> ID：11582174
> 
> 赞同：2
> 
> 时间：2012-07-20T15:18:16.013
> 
> 标签：html, canvas

我正在使用 HTML 画布做一些工作，我发现当我画一条线时，我无法清除或绘制它？

所以我在做什么：我有一个带有网格的画布，每个单元格都在其中绘制自己（一个填充的矩形，在页面加载时完成），当鼠标在网格上时，鼠标所在的单元格应该被勾勒出来（画四行在画布上没有其他重绘）。当鼠标移动到不同的单元格时，新的单元格应该被勾勒出来（和以前一样），而之前的被勾勒出来的单元格不应该再被勾勒出来（目的是重新绘制单元格，画出线条）。它是“取消概述”被证明是问题的单元格。

我假设它与画家的算法一起使用，画布上绘制的最后一件事是可见的，但我得到的效果表明填充的形状和线条与更高层上的线条分开处理？

这是一个独立页面的源代码来演示它：

```
<!DOCTYPE html>
<html>

<head>

<script type="text/javascript">

var CANVAS_DIMENSION = 200;
var CANVAS_WIDTH = 10;
var CANVAS_HEIGHT = 10;

var GRID_CELL_WIDTH = CANVAS_DIMENSION/CANVAS_WIDTH;
var GRID_CELL_HEIGHT = CANVAS_DIMENSION/CANVAS_HEIGHT;

var canvas;
var context;
var grid;
var mouseCellColumn = -1;
var mouseCellRow = -1;

function init()
{
    canvas = document.getElementById("myCanvas");

    context = canvas.getContext("2d");

    canvas.addEventListener('mousemove', updateMousePosition, false);

    grid = new Array(CANVAS_WIDTH);
    for (var i = 0; i < CANVAS_WIDTH; ++i)
    {
        grid[i] = new Array(CANVAS_HEIGHT);

        for (var j = 0; j < CANVAS_HEIGHT; ++j)
        {
            grid[i][j] = "#0000FF";
        }
    }

    renderScene()
}

function updateMousePosition(event)
{
    var initialColumn = mouseCellColumn;
    var initialRow = mouseCellRow;

    var objectPosition = findPos(this);

    var gridPosition = new Point(event.pageX - objectPosition.x, event.pageY - objectPosition.y);

    mouseCellColumn = getColumn(gridPosition.x);

    mouseCellRow = getRow(gridPosition.y);

    var cell_position = getCellPosition(mouseCellColumn, mouseCellRow);

    // outline the current cell
    drawRectangleOutlineWithColour(cell_position.x, 
                                   cell_position.y, 
                                   GRID_CELL_WIDTH, 
                                   GRID_CELL_HEIGHT, 
                                   "#FF0000");

    // if mouse has moved cell redraw
    if (((initialColumn != mouseCellColumn) ||
        (initialRow != mouseCellRow)) &&
        (initialColumn > -1) && 
        (initialRow > -1))
    {
        renderGridCell(initialColumn, initialRow);
    }

}

function renderScene()
{
    for (var i = 0; i < CANVAS_WIDTH; ++i)
    {
        for (var j = 0; j < CANVAS_HEIGHT; ++j)
        {
            renderGridCell(i, j);                
        }
    }
}

function renderGridCell(Column, Row)
{
    var position = getCellPosition(Column, Row);

    drawRectangleWithColour(position.x, 
                            position.y, 
                            GRID_CELL_WIDTH, 
                            GRID_CELL_HEIGHT, 
                            grid[Column][Row]);
}

function drawRectangleWithColour(minX, minY, width, height, colour)
{
    context.fillStyle = colour;

    context.fillRect(minX,
                     minY,
                     width,
                     height);
}

function drawRectangleOutlineWithColour(minX, minY, width, height, colour)
{
    context.strokeStyle = colour;

    context.moveTo(minX, minY);
    context.lineTo(minX + width, minY);
    context.moveTo(minX + width, minY);
    context.lineTo(minX + width, minY + height);
    context.moveTo(minX + width, minY + height);
    context.lineTo(minX, minY + height);
    context.moveTo(minX, minY + height);
    context.lineTo(minX, minY);

    context.stroke();
}

function Point(x, y)
{
    this.x = x;
    this.y = y;
}

function getColumn(xPosition)
{
    if (xPosition < 0)
    {
        xPosition = 0;
    }

    if (xPosition > CANVAS_DIMENSION)
    {
        xPosition = CANVAS_DIMENSION;
    }

    return Math.floor(xPosition/GRID_CELL_WIDTH);
}

function getRow(yPosition)
{
    if (yPosition < 0)
    {
        yPosition = 0;
    }

    if (yPosition > CANVAS_DIMENSION)
    {
        yPosition = CANVAS_DIMENSION;
    }

    return Math.floor(yPosition/GRID_CELL_HEIGHT);
}

function getCellPosition(column, row)
{
    if (row < 0)
    {
        row = 0;
    }

    if (row > CANVAS_HEIGHT)
    {
        row = CANVAS_HEIGHT - 1;
    }

    if (column < 0)
    {
        row = 0;
    }

    if (column > CANVAS_WIDTH)
    {
        column = CANVAS_WIDTH - 1;
    }

    var result = new Point(column * GRID_CELL_WIDTH, row * GRID_CELL_HEIGHT);
    return result;
}

function findPos(obj)
{
    var result = new Point(0, 0);

    if (obj.offsetParent)
    {
        do
        {
            result.x += obj.offsetLeft;
            result.y += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }

    return result;
}

</script>
</head>

<body onload="init()">

<div id="test" style="width: 200px; height:200px; margin: 0px auto;">
    <canvas id="myCanvas" width="200" height="200">
    Your browser does not support the canvas element.
    </canvas>
</div>

</body>
</html> 
```

违规区域在这里：

```
// outline the current cell
drawRectangleOutlineWithColour(cell_position.x, 
                               cell_position.y, 
                               GRID_CELL_WIDTH, 
                               GRID_CELL_HEIGHT, 
                               "#FF0000");

// if mouse has moved cell redraw
if (((initialColumn != mouseCellColumn) ||
    (initialRow != mouseCellRow)) &&
    (initialColumn > -1) && 
    (initialRow > -1))
{
    renderGridCell(initialColumn, initialRow);
} 
```

这没有效果，轮廓会累积。

一些深入研究画布重绘建议'clearRect'但这似乎没有帮助，轮廓仍然存在：

```
// outline the current cell
drawRectangleOutlineWithColour(cell_position.x, 
                               cell_position.y, 
                               GRID_CELL_WIDTH, 
                               GRID_CELL_HEIGHT, 
                               "#FF0000");

// if mouse has moved cell redraw
if (((initialColumn != mouseCellColumn) ||
    (initialRow != mouseCellRow)) &&
    (initialColumn > -1) && 
    (initialRow > -1))
{
    context.clearRect(position.x, 
                      position.y, 
                      GRID_CELL_WIDTH, 
                      GRID_CELL_HEIGHT);

    renderGridCell(initialColumn, initialRow);
} 
```

让我们用不同的颜色重新绘制轮廓区域？

```
// outline the current cell
drawRectangleOutlineWithColour(cell_position.x, 
                               cell_position.y, 
                               GRID_CELL_WIDTH, 
                               GRID_CELL_HEIGHT, 
                               "#FF0000");

// if mouse has moved cell redraw
if (((initialColumn != mouseCellColumn) ||
    (initialRow != mouseCellRow)) &&
    (initialColumn > -1) && 
    (initialRow > -1))
{
    var position = getCellPosition(initialColumn, initialRow);

    drawRectangleWithColour(position.x, 
                            position.y, 
                            GRID_CELL_WIDTH, 
                            GRID_CELL_HEIGHT, 
                            "#00FF00");
} 
```

不，网格重绘，但对线条没有影响。重绘整个网格？

```
 renderScene();

    // outline the current cell
    drawRectangleOutlineWithColour(cell_position.x, 
                                   cell_position.y, 
                                   GRID_CELL_WIDTH, 
                                   GRID_CELL_HEIGHT, 
                                   "#FF0000");
/*
    // if mouse has moved cell redraw
    if (((initialColumn != mouseCellColumn) ||
        (initialRow != mouseCellRow)) &&
        (initialColumn > -1) && 
        (initialRow > -1))
    {
        var position = getCellPosition(initialColumn, initialRow);

        drawRectangleWithColour(position.x, 
                                position.y, 
                                GRID_CELL_WIDTH, 
                                GRID_CELL_HEIGHT, 
                                "#00FF00");
    }
*/ 
```

我似乎无法很好地解释画布如何处理这个问题，我在 MacOSX 上的 Safari 和 Windows7 上的 Chrome 和 Firefox 中得到了相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:50:26.733

这里有两件事。

首先也是最重要的是，你永远不会打电话`context.beginPath()`

每次你认为你正在绘制一个新的红色轮廓时，你实际上是在添加到上下文的当前路径并使其更长。第一次上下文只有一个矩形，然后它有两个，然后它有三个，等等。

每次调用 stroke 时，您都在抚摸您曾经绘制过的每一个矩形，因为上下文的当前路径包含所有这些矩形。要解决此问题，您必须通过调用来重置当前路径`beginPath`。

第二个问题是你的线条没有画在完美的像素上，所以当你去擦除它们时，你会看到由于抗锯齿而导致的图形问题。要解决此问题，您需要绘制完美像素并注意您正在擦除的矩形。有关这方面的更多信息，请参见 Loktar 在此处的回答：[HTML5 Canvas and Line Width](https://stackoverflow.com/questions/7530593/html5-canvas-and-line-width)

这是您的代码，通过这两个修复程序实现：

[http://jsfiddle.net/QjKAp/](http://jsfiddle.net/QjKAp/)

# php - PHP mysql重复行

> ID：11582182
> 
> 赞同：0
> 
> 时间：2012-07-20T15:18:53.137
> 
> 标签：php, mysql

我在 MySQL 中有一个使用 php 的查询。查询如下

```
$sql = "select m.id, s_1.username player_1, s_2.username player_2, current_step, won
from {$table_prefix} match m left join {$table_prefix}session s_1 on s_1.id = player_1
left join {$table_prefix}session s_2 on s_2.id = player_2
where current_step < 10"; 
```

我遇到的查询问题很好，但是当它需要快速执行（背靠背）时，我得到了重复的行。我将如何防止重复行。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:23:48.450

您将需要使用 DISTINCT 来获取唯一的返回行。

```
$sql = "select DISTINCT m.id, s_1.username player_1, s_2.username player_2, current_step, won from {$table_prefix}match m left join {$table_prefix}session s_1 on s_1.id = player_1 left join {$table_prefix}session s_2 on s_2.id = player_2 where current_step < 10"; 
```

[http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)

# java - 如何在Java中的特定单词之后找到特定值？

> ID：11582184
> 
> 赞同：0
> 
> 时间：2012-07-20T15:18:56.477
> 
> 标签：java, string, find, bufferedstream

我从 a 得到了一个文本`BufferedReader`，我需要在一个特定的字符串中获取一个特定的值。

这是文本：

```
 aimtolerance = 1024;
    model = Araarrow;
    name = Bow and Arrows;
    range = 450;
    reloadtime = 3;
    soundhitclass = arrow;
    type = Ballistic;
    waterexplosionclass = small water explosion;
    weaponvelocity = 750;

        default = 213;
        fort = 0.25;
        factory = 0.25;
        stalwart = 0.25;
        mechanical = 0.5;
        naval = 0.5; 
```

我需要得到 **default =**和**;之间的确切数字**

这是“213”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:27:29.620

像这样的东西......

```
String line;
while ((line = reader.readLine())!=null) {
   int ind = line.indexOf("default =");
   if (ind >= 0) {
      String yourValue = line.substring(ind+"default =".length(), line.length()-1).trim(); // -1 to remove de ";"
      ............
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:24:40.963

If just care about the end result, i.e. getting stuff out of your '=' separated values text file, you might find the built in Properties object helpful?

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

This does much of what you need. Of course if you're specifically wanting to do this manually, it's maybe not the right option.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T15:23:43.060

在“default =”上拆分字符串，然后使用 indexOf 查找“;”的第一次出现。做一个从 0 到索引的子字符串，你就有了你的价值。

请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-21T17:50:09.407

您可以使用[Properties](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html)类来加载字符串并从中找到任何值

```
String readString = "aimtolerance = 1024;\r\n" + 
"model = Araarrow;\r\n" + 
"name = Bow and Arrows;\r\n" + 
"range = 450;\r\n" + 
"reloadtime = 3;\r\n" + 
"soundhitclass = arrow;\r\n" + 
"type = Ballistic;\r\n" + 
"waterexplosionclass = small water explosion;\r\n" + 
"weaponvelocity = 750;\r\n" + 
"default = 213;\r\n" + 
"fort = 0.25;\r\n" + 
"factory = 0.25;\r\n" + 
"stalwart = 0.25;\r\n" + 
"mechanical = 0.5;\r\n" + 
"naval = 0.5;\r\n";
readString = readString.replaceAll(";", "");
Properties properties = new Properties();

System.out.println(properties);
try {
    properties.load(new StringReader(readString));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
System.out.println(properties);

String requiredPropertyValue = properties.getProperty("default");
System.out.println("requiredPropertyValue : "+requiredPropertyValue); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T15:44:50.683

使用正则表达式：

```
private static final Pattern DEFAULT_VALUE_PATTERN
        = Pattern.compile("default = (.*?);");

private String extractDefaultValueFrom(String text) {
    Matcher matcher = DEFAULT_VALUE_PATTERN.matcher(text);
    if (!matcher.find()) {
        throw new RuntimeException("Failed to find default value in text");
    }
    return matcher.group(1);
} 
```

# sql - 可能为 NULL 的 SQL 条件 SELECT

> ID：11582190
> 
> 赞同：1
> 
> 时间：2012-07-20T15:19:11.547
> 
> 标签：sql, sql-server-2008

我试过在stackoverflow上搜索这个，但我找不到答案。

我正在简化我的问题，以便阅读更容易，如有必要，我会扩展。

我有一个 Employee SQL 表，`NAME, ADDRESS, HIRE_DATE`我们最近添加了一个`REHIRE_DATE`来跟踪新员工何时重新加入公司。我想编写一个 SQL 搜索来获取`NAME, ADDRESS`他们最近的雇用日期。如果他们是重新雇用的，我会使用该`REHIRE_DATE`字段，但如果他们是原始的，请使用该`HIRE_DATE`字段。我猜这是一个`CASE`正在寻找`NULL`该`REHIRE_DATE`领域的声明，但除此之外我迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:22:25.257

这应该会产生您想要的结果：

```
SELECT Name
    , Address
    , CASE WHEN REHIRE_DATE IS NULL THEN HIRE_DATE ELSE REHIRE_DATE END
FROM Employee 
```

这将检查重新雇用日期，如果是，`NULL`那么您将获得雇用日期，如果不是，那么您将返回重新雇用日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:22:49.247

我认为您需要做的就是：

```
SELECT
    NAME
    , ADDRESS
    , ISNULL(REHIRE_DATE, HIRE_DATE) AS MostRecentHireDate
FROM Employee 
```

在这种情况下，如果填写了重新雇用日期，则重新雇用日期应始终大于雇用日期（在被雇用之前您不能**重新**雇用。因此，除非它为空，否则您总是希望重新雇用日期，此时点你的聘用日期。听起来不错？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:22:45.893

更好的是，使用 IFNULL()：

```
SELECT IFNULL(REHIRE_DATE,HIRE_DATE) FROM Employee 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:46:43.487

您也可以使用 coalesce() 函数并这样做

```
select name, address, coalesce(rehire_date,hire_date) from table_name 
```

如果第一个值为 null 它将转到第二个值

# sprite - AndEngine粒子碰撞

> ID：11582195
> 
> 赞同：1
> 
> 时间：2012-07-20T15:19:23.263
> 
> 标签：sprite, physics, andengine, collision, particles

我是 AndEngine 的新手，在自己制作了一个超级简单的程序后，我转向了物理扩展。

我一直在玩弄这个示例的源代码，但我不知道如何实现粒子系统之间的碰撞检测，甚至更好地实现粒子系统和精灵之间的碰撞检测。

有没有人有任何想法？至少给我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:59:46.587

根据我的经验，没有办法检查精灵和粒子系统之间的碰撞，仅仅是因为 AndEngine 不会让你做 Sprite.collidesWith(particleSystem);

我猜你正在尝试做一些事情，比如看看你的角色是否走到火上（“particleSystem”），然后角色会受到一些伤害？我个人解决这个问题的方法是在您期望particleSystem的位置周围放置一个矩形形状，然后检查您的精灵和矩形之间的碰撞

希望这可以帮助！

# png - 如何使用 ImageJ 读取自定义 PNG 数据？

> ID：11582199
> 
> 赞同：0
> 
> 时间：2012-07-20T15:19:31.150
> 
> 标签：png, labview, imagej

我刚从 ImageJ 开始，我想知道是否有人知道读取可以存储在 PNG 文件中的自定义数据的方法。这样做的原因是通过 LabView 我生成了一个 16 位灰度 PNG 文件，其中每个 bin 代表一个测量值的特定高度。我想将高度方面的最小值、最大值和 bin 步骤写入 PNG 文件的自定义数据“区域”。据我所见，LabView 的 IMAQ 视觉工具允许编写它，但我需要使用 ImageJ 读取它。

甚至可能吗？我还没有找到任何似乎有用的特定宏，但我对这个程序的经验非常有限。因此，您能给我的任何帮助或建议都会非常有用。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:45:55.730

LabVIEW以自己的格式保存元数据，因此您无法使用其他工具轻松检索它。您可以考虑调用 IMAQ CVI 函数并将其链接到 ImageJ。将数据写入文本文件或其他文件可能更简单。

# android - Android，我怎么知道用户正在切换到另一个应用程序

> ID：11582206
> 
> 赞同：0
> 
> 时间：2012-07-20T15:19:54.450
> 
> 标签：android, android-activity

> **可能重复：**
> [当 Android 应用程序关闭/发送到后台时运行代码](https://stackoverflow.com/questions/5593115/run-code-when-android-app-is-closed-sent-to-background)

在我的 android 应用程序中，当用户从我的应用程序切换到任何其他应用程序时，我需要得到通知，以便执行一些安全工作。它可以通过点击返回，主页按钮，通过最近的应用程序按钮。还有其他方法吗？在 android.app.Application 中找不到任何内容。我在应用程序中有很多活动，将代码放入 Activity.onPause() 将不起作用，因为它可能会转到同一应用程序中的另一个活动。我需要找到一种方法来引起注意。这有什么好主意吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:24:04.123

重复：[当Android应用程序关闭/发送到后台时运行代码](https://stackoverflow.com/questions/5593115/run-code-when-android-app-is-closed-sent-to-background)

基本上 - 创建一个正确设置[onPause](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)的基本活动，并从该活动扩展所有其他活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:27:02.000

AFAIK 没有简单的方法可以满足您的需求。

在我们的应用程序中，我们求助于轮询当前的顶级活动，以检查它是否属于我们的应用程序。

```
ComponentName getTopActivity() {
    List<ActivityManager.RunningTaskInfo> runningTasks = activityManager.getRunningTasks(1);
    ActivityManager.RunningTaskInfo topTask = runningTasks.get(0);
    return topTask.topActivity;
} 
```

我真的很想知道有没有更好的方法。

# c# - C#多线程应用程序 - 结构？

> ID：11582211
> 
> 赞同：5
> 
> 时间：2012-07-20T15:20:14.987
> 
> 标签：c#, multithreading, structure

因此，我将创建一个应用程序来检查链接是否可访问（实时）。我的问题是如何使线程“总是很忙”。我的意思是：该应用程序运行 100 个线程（例如使用 FOR 循环创建）和 100 个不同的 URL。因此，当 1 个线程完成它的工作（检查 URL 是否可用）以获取新 URL 并立即重新开始。所以这 100 个线程将不停地工作，直到检查所有 URL。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T15:23:53.277

您正在寻找的是所谓的[Producer-Consumer Model](http://www.ni.com/white-paper/3023/en)。您有一个资源池，其中包含要检查的 url 列表，一个线程可以填充该池，并且您的消费线程可以从该池中提取，如果您有 .NET 4 [Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)为您完成大部分工作。

使用 100 个线程也很可能不是最佳线程数，只需让任务并行库为您管理线程数。

这是一个示例，如果列表将被预先填充并且在线程运行时没有添加更多项目。

```
//Parallel.Foreach will block until it is done so you may want to run this function on a background worker.
public void StartThreads()
{
    List<string> myListOfUrls = GetUrls();

    Parallel.Foreach(myListOfUrls, ProcessUrl);
}

private void ProcessUrl(string url)
{
    //Do your work here, this code will be run from multiple threads.
} 
```

如果您需要在运行时填充集合，请替换`List<string>`为像[BlockingCollection这样的并发集合](http://msdn.microsoft.com/en-us/library/dd381779)

```
BlockingCollection<string> myListOfUrls = new BlockingCollection();

//Parallel.Foreach will block until it is done so you may want to run this function on a background worker.
public void StartThreads()
{
    if(myListOfUrls.IsComplete == true)
    {
        //The collection has emptied itself and you told it you where done using it, you will either need to throw a exception or make a new collection.
        //use IsCompleatedAdding to check to see if you told it that you are done with it, but there still may be members left to process.
        throw new InvalidOperationException();
    }

    //We create a Partitioner to remove the buffering behavior of Parallel.ForEach, this gives better performance with a BlockingCollection.
    var partitioner = Partitioner.Create(myListOfUrls.GetConsumingEnumerable(), EnumerablePartitionerOptions.NoBuffering);
    Parallel.ForEach(partitioner, ProcessUrl);
}

public void StopThreads()
{
    myListOfUrls.CompletedAdding()
}

public void AddUrl(string url)
{
    myListOfUrls.Add(url);
}

private void ProcessUrl(string url)
{
    //Do your work here, this code will be run from multiple threads.
} 
```

* * *

我还想补充一点，自动线程调度可能也不是最好的，它可能会设置一些可以扩展的限制，请参阅原始问题中的此评论

> 对于那些说/赞成 100 线程是一个糟糕主意的人：在我的双核 2GB RAM XP 机器上，Parallel.Foreach 从未创建超过 5 个线程（除非我设置了 ThreadPool.SetMinThreads）并且创建 100 个线程总是导致 ~30-40%更快的操作。所以不要把一切都留给 Parallel.Foreach 。PS：我的测试代码 WebClient wc = new WebClient();var s = wc.DownloadString(url); （谷歌主页）- [LB](https://stackoverflow.com/users/932418/l-b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:23:46.493

使用 Parallel CTP 的东西，包含的并行 foreach 方法将完全符合您的要求。

谷歌是你的朋友。

此外，使用 100 个线程可能不是最好的性能，但我会使用许多可用的内核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:29:28.663

您可以使用`ThreadPool`并为其提供要处理的 url 列表，然后让一个`DoWork`方法来检查它们是否处于活动状态，例如

```
 foreach (string s in URLs)
 {
       ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), s);
 }

 public void DoWork(object sender)
 {
       string url = (string)sender;
       //do stuff with url here
  } 
```

# jquery - doctype 弄乱了整个文档如何解决？

> ID：11582214
> 
> 赞同：0
> 
> 时间：2012-07-20T15:20:19.010
> 
> 标签：jquery, html, internet-explorer, doctype

好的，所以我愚蠢地没有从一开始就添加 doctype，我需要添加一个，因为我想使用一个 jquery 脚本，并且由于某种原因它在 IE9 中出现了问题（你该死）。所以我需要添加一个文档类型

但是它弄乱了我的按钮间距等并且不知道如何修复，错误链接到两个文档

没有文档类型 [http://viewpictures-loginlive.freehostia.com/Website%202/chandeliersale1.html](http://viewpictures-loginlive.freehostia.com/Website%202/chandeliersale1.html)

带有文档类型 [http://viewpictures-loginlive.freehostia.com/Website%202/chandeliersale12.html](http://viewpictures-loginlive.freehostia.com/Website%202/chandeliersale12.html)

1) 无论如何可以在不添加doctype 的情况下使jquery 图像脚本在ie9 中工作？因为Firefox和chrome它显示完美..

2）我怎样才能使按钮间距正确，或者任何人都可以帮助处理 doctype 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:52:05.477

由于您没有从一开始就添加 !DOCTYPE，因此浏览器会以 Quirks 模式呈现代码。此模式的存在只是为了与旧网站（没有 !DOCTYPE 声明）兼容，并且可能因浏览器而异。严格或 W3C 标准模式依赖于 !DOCTYPE 声明，并且在所有浏览器中均等呈现。

怪癖和标准模式呈现完全不同的方式。这就是为什么整个网站风格在标准模式下看起来很糟糕（至少在 Chrome 上对我来说它看起来很糟糕）。恐怕没有简单的解决方法：您需要在标准模式下为您的网站重写样式。从现在开始，您应该始终从头开始添加 !DOCTYPE 声明。

# php - Zend File 表单元素 textarea 放错了位置

> ID：11582215
> 
> 赞同：0
> 
> 时间：2012-07-20T15:20:21.103
> 
> 标签：php, file-upload, zend-form-element

当我创建 Zend 文件表单元素并将其放置到我的视图中时，组件被奇怪地放置。见图片， http: [//i.imgur.com/4uQwW.png](http://i.imgur.com/4uQwW.png)。正如您在图片上看到的那样，输入字段已经跳下或标签上升了。不明白为什么会这样，请指教！

下面是我生成这个元素的代码。

```
private function _getFileElement($category = 0) {
    if ($category == 1) {
        $fileElement = $this->createElement('file', 'file_email');
    } else if ($category == 2) {
        $fileElement = $this->createElement('file', 'file_letter');
    } else {
        $fileElement = $this->createElement('file', 'file');
    }

    $fileElement->setLabel('Egen mall')
    ->setAttrib('style', 'width:300px;')
    ->setDestination('/tmp/');
    $fileElement->addValidator('Count', false, 1);

    return $fileElement;
} 
```

这是我认为稍后添加的。

最好的祝福，

加布里埃尔·保尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:00:05.153

我相信 zend 在 dd 和 dt 标签中正确输出表单。我认为浏览器会解释文件标签并使其看起来像那样。不过我可能是错的。您可能应该检查表单装饰器。

# jquery - jQuery：如何检查孩子是第一个还是最后一个

> ID：11582218
> 
> 赞同：4
> 
> 时间：2012-07-20T15:20:27.230
> 
> 标签：jquery, css-selectors

我正在尝试为以下元素设置自定义样式

*   ul - 许多孩子中的第一个（ul.first）
*   许多孩子中的最后一个（ul.last）
*   唯一的孩子（ul.first.last 或 ul.only）

HTML：

```
<ul class="selector">
    <li class="selector">some li
       <ul class="">
          <li>some fancy li - the ul parent should have first class</li>
       </ul>
       <ul class="">
          <li>some more li - the ul parent should have last class</li>
       </ul>
    </li>
    <li class="selector">some second li
        <ul class="">
          <li>some lonely li - the ul parent should have first and last classes</li>
       </ul>
    </li>
</ul> 
```

所以我想出了一个 jQuery 希望做的伎俩

```
$('ul.selector li.selector > ul').each(function () {
  if ($(this).is(':first') && $(this).is(':last')) {
    $(this).addClass('first last');
  } else if ($(this).is(':first')) {
    $(this).addClass('first');
  } else if ($(this).is(':last')) {
    $(this).addClass('last');
  }
}); 
```

感谢您的任何建议。

更新 - 这是一个你可以玩的小提琴，基于一个答案：http: [//jsfiddle.net/qAtpe/](http://jsfiddle.net/qAtpe/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T15:23:46.833

为什么不只是这个：

```
$('ul.selector li.selector > ul').each(function() {
    $this = $(this); // cache $(this)
    if ($this.is(':first')) {
        $this.addClass('first'); 
    } 
    if ($this.is(':last')) {
        $this.addClass('last'); 
    }
}); 
```

然后使用下面的 CSS

```
.first {
    //this is first
}
.last { 
    // this is last
}
.first.last {
    // this is first and last - ie the only child
} 
```

## 更新

```
$('ul.selector li.selector > ul').each(function() {
    $this = $(this); // cache $(this)
    if ($this.is(':first-child')) {
        $this.addClass('first'); 
    } 
    if ($this.is(':last-child')) {
        $this.addClass('last'); 
    }
});
​ 
```

查看您的示例 jsfiddle - 您需要选择器`:first-child`而不是`:first`..

> :first 伪类等价于 :eq(0)。它也可以写成:lt(1)。虽然这仅匹配一个元素，但 :first-child 可以匹配多个：每个父元素一个。

这现在有效：

[工作示例](http://jsfiddle.net/qAtpe/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:26:56.750

只需检查元素是否有兄弟姐妹，否则它是唯一的孩子：

```
$('ul.selector li.selector > ul').each(function() {
    if ($(this).siblings().length===0)) {
        $(this).addClass('only'); 
    } else if ($(this).is(':first') ) {
        $(this).addClass('first'); 
    } else if ($(this).is(':last') ) {
        $(this).addClass('last'); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T01:36:27.790

我不确定这是否能回答您的问题，但您可以使用下面的选择器来选择单独的 LI 元素，而不是在另一个 LI 之前/之后：

```
$('ul:first-child:last-child') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:25:53.553

可能只有一种情况

如果孩子是第一个和最后一个，它将是一个，所以使用

```
$('ul.selector li.selector > ul').children().length ==1 
```

它的孩子数是1。

并且不要使用 :first 它在 IE 中不起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T15:26:49.200

你应该试试这个。

```
$('ul.selector li.selector > ul').each(function() {
    $this = $(this);

    if  ( $this.is(':first') && $this.is(':last') ) {
        $this.addClass('first last'); 
    } else {

        if ($this.is(':first')) {
           $this.addClass('first'); 
        } 

        if ($this.is(':last')) {
            $this.addClass('last'); 
        }
    }

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T15:28:04.043

检查这个小提琴：http: [//jsfiddle.net/KCAZQ/](http://jsfiddle.net/KCAZQ/)。如果只有一个元素，我假设这些元素也会涵盖它。

```
<ul>
    <li>first</li>
    <li>second</li>
    <li>thrid</li>
    <li>fourth</li>
</ul>

$('ul').find('li').first().css('color','green');
$('ul').find('li').last().css('color','green'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-13T15:12:14.910

我在寻找相同的问题时遇到了这个问题，试图`li > a`在我的面包屑中找到不是第一个的最后一个`li`。这是我解决它的方法：

```
$(".breadcrumb > li:gt(0):last > a") 
```

# java - 在 Eclipse 中自定义 Java 编辑器

> ID：11582220
> 
> 赞同：6
> 
> 时间：2012-07-20T15:20:29.497
> 
> 标签：java, eclipse, editor

我想知道是否有一种简单的方法可以为某些自定义项目扩展 Eclipse 中 Java 编辑器的功能。

示例：当我在 eclipse 中编写时：

```
@Deprecated
public void foo(); 
```

foo 将被自动划掉，因此很容易注意到。在某些项目中，我想对 @Untested 或 @Verified 之类的自定义注释做同样的事情，以拥有更好的开发环境（但当然，有很多这样的例子（特殊的类颜色等......）。

我想创建一个简单的 Eclipse 包来扩展此类规则，但我无法为此找到足够的扩展点。我必须从头开始创建一个新的文本编辑器吗？

感谢您的任何帮助或评论，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:37:13.630

您可能需要继承和修改 JDT 编辑器。查看 JDT 源代码（org.eclipse.jdt.ui.* 包）。由于提供了 JDT 源，您可以使用经典的 Eclipse SDK 轻松地处理这些问题。使用插件视图将这些项目拉入您的工作区，以便您可以编辑它们。我认为在 JDT 源代码上工作的文档并不多。不过，请查看 Eclipse 帮助中与 JDT 相关的部分。

# ios - iOS - 确保在主线程上执行

> ID：11582223
> 
> 赞同：74
> 
> 时间：2012-07-20T15:20:33.180
> 
> 标签：ios, xcode, multithreading, multitasking, shared-resource

我想知道如何`function`在*主线程*上调用我的。

如何确保我在*主线程*`function`上被调用？

 **（这遵循我以前的[问题](https://stackoverflow.com/questions/11054457/ios-concurrent-access-to-memory-resources)）。*

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-20T15:38:27.173

这将做到：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^ {

   //Your code goes in here
   NSLog(@"Main Thread Code");

}]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-07-20T15:41:20.990

**当您使用 iOS >= 4**

```
dispatch_async(dispatch_get_main_queue(), ^{
  //Your main thread code goes in here
  NSLog(@"Im on the main thread");       
}); 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-07-20T15:36:51.267

> 我可以遵循任何规则来确保我的应用程序仅在主线程中执行我自己的代码？

通常你不需要做任何事情来确保这一点——你的事情清单通常就足够了。除非您正在与一些碰巧产生线程并在后台运行代码的 API 进行交互，否则您将在主线程上运行。

如果你想真正确定，你可以做类似的事情

```
[self performSelectorOnMainThread:@selector(myMethod:) withObject:anObj waitUntilDone:YES]; 
```

在主线程上执行一个方法。（也有一个 GCD 等价物。）

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-07T00:44:34.370

我认为这很酷，即使一般来说它的良好形式是让方法的调用者负责确保在正确的线程上调用它。

```
if (![[NSThread currentThread] isMainThread]) {
    [self performSelector:_cmd onThread:[NSThread mainThread] withObject:someObject waitUntilDone:NO];
    return;
} 
```*

# javascript - 在 Firefox 和 IE 中的 MVC 部分视图上进行 ajax 更新后，jQuery datepicker 无法正常工作

> ID：11582224
> 
> 赞同：0
> 
> 时间：2012-07-20T15:20:33.710
> 
> 标签：javascript, .net, asp.net-mvc, jquery-ui, datepicker

我有一个 MVC 视图，它有一个通过 ajax 更新的 div 容器。

```
<div id="PartialContainer"></div>

<script type="text/javascript">
$.ajax({
        url: '/my/partial_action',
        success: function(result) {
            $("#PartialContainer").html(result);
        }
    });

</script> 
```

控制器动作代码：

```
public ActionResult partial_action()
{
    return PartialView("_MyPartial");
} 
```

最后，_MyPartial 视图：

```
<input type="text" class="datepicker" />

<script type="text/javascript">
    $(function() {
        alert("before");
        $("input.datepicker").datepicker();
        alert("after");
    });
</script> 
```

问题：这在 Chrome 中运行良好，我得到了 datepicker 下拉菜单，两个警报（之前和之后）都显示。然而，在 FF 和 IE 中，日期选择器不起作用。我确实收到了两个警报，但没有收到日期选择器的行为。没有 firebug/F12 脚本错误。

我尝试在局部视图之外添加一个日期选择器输入，它在所有浏览器中都运行良好。

我正在使用 jQuery ui 1.7.2，mvc 4。

任何人都知道为什么会这样？

**编辑：**所以我解决了这个问题，这不是javascript问题，而是样式问题。我在 twitter 引导对话框中使用日期选择器，它覆盖了日期选择器。更改一些 z-indexed 为我修复了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:45:38.950

尝试删除 $.ready 调用并将其替换为 IIFE，因此您的代码将如下所示：

```
<input type="text" class="datepicker" />

<script type="text/javascript">
    (function() {
        alert("before");
        $("input.datepicker").datepicker();
        alert("after");
    })();
</script> 
```

**编辑：**我现在已经检查过了，这两种情况在 FF 13、IE 9、Opera 12 和 Safari 5 中都按预期工作。但是 IE 似乎缓存了结果，可能是问题所在。尝试在您的 url 中添加一些随机参数或设置`cache: false`（`true`默认情况下）在基本页面中调用 ajax

```
<div id="PartialContainer"></div>

<script type="text/javascript">
$.ajax({
        url: '/my/partial_action',
        cache: false,
        success: function(result) {
            $("#PartialContainer").html(result);
        }
    });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T08:20:24.403

我在使用 Bootstrap Datepicker v1.8.0 时遇到了类似的行为。datepicker 在局部视图的初始显示上按预期工作，但如果使用 Ajax 调用使用新数据刷新局部视图，则 datepicker 无法响应。

通过在重新加载部分视图后将文本字段重新绑定到 Ajax 成功中的日期选择器来解决问题。

```
function editApplicant(id) {
var dataRow = {
    'applicant' : id
};
$.ajax({
    type: 'POST',
    url: "/Cases/GetApplicant",
    data: dataRow,
    success: function (data) {
        $('#applicantDetail').html(data);
        /* Rebind the date of birth field to a datepicker */
        $('#DOBString').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true,
            orientation: 'bottom left'
        });
        showApplicantView();
    },
    error: function (data) {
        showApplicantView();
    }

}); 
```

}

# html - 如何在标题 div 中水平居中两个 div？

> ID：11582226
> 
> 赞同：3
> 
> 时间：2012-07-20T15:20:36.783
> 
> 标签：html, css, center

我有一个标题 div，它以 100% 的宽度固定在浏览器窗口的顶部。在标题 div 中有一个带有标题文本的 div 和一个带有水平列表的 div。水平列表 div 应该出现在标题文本 div 的右侧。

这是我的 CSS 和 HTML：

```
#header {
  position:fixed;
  top:0;
  left:0;
  right:0;
  background-color:#333333;
  padding:20px;
}

#title {
  float:left;
  color:#000000;
  font-size:30px;
  margin-right:24px;
  background-color:#ffffff;
  padding:8px;
}

#navigation ul {
  padding:0;
  margin:0;
  list-style-type:none;
}

#navigation ul li {
  display:inline;
  margin-right:20px;
  padding:3px;
  background-color:#ffffff;
}

#navigation ul li a {
  color:#000000;
  text-decoration:none;
}
```

```
<div id="header">
  <div id="title">Some Title Text</div>
  <div id="navigation"><ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
    </ul></div>
</div>
```

所以现在标题和导航 div 在标题 div 内左对齐。如何将标题和导航 div 水平居中？

**编辑：**更喜欢不使用硬编码宽度（例如`width: 500px`）的解决方案，因为列表大小并不总是相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:34:46.770

一种适用于更改标题和/或两个 div 宽度的方法（如果标题变长或变短，或者添加或删除导航项）：

设置`text-align: center`在`#header`,`display: inline-block`和`#title`-`#navigation`演示[http://dabblet.com/gist/3151355](http://dabblet.com/gist/3151355)

CSS 的变化：

```
#header {
    position:fixed;
    top:0;
    left:0;
    right:0;
    background-color:#333333;
    padding:20px;
    text-align: center; /* added */
}
#title {
    color:#000000;
    font-size:30px;
    margin-right:24px;
    display: inline-block; /* took out float:left and added this */
    background-color:#ffffff;
    padding:8px;
}
#navigation {
    display: inline-block; /* added */
} 
```

我还添加`#navigation ul li:last-child {margin-right:0}`了为了在最后一个列表项之后没有`24px`边距（这会使导航右侧看起来有更多空间）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:24:43.180

您可以将标题和导航 div 包装在另一个 div 中，然后使用`margin: 0 auto`.

**HTML**

```
<div id="header">
    <div id="center">
        <div id="title">Some Title Text</div>
        <div id="navigation">
            <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
            </ul>
        </div>
    </div>
</div>​​​​​​​​ 
```

**CSS**

```
#center {
    width: 500px; /* or any other width */
    margin: 0 auto;
} 
```

JS 小提琴：http: [//jsfiddle.net/rJyuJ/](http://jsfiddle.net/rJyuJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:25:11.900

嗨，您能否尝试使用 #header 的以下 css

```
#header {
    position:fixed;
    top:0;
    left:0;
    right:0;
    background-color:#333333;
    padding:20px;
    text-align:center;
} 
```

# javascript - 在javascript中添加滚动条

> ID：11582229
> 
> 赞同：1
> 
> 时间：2012-07-20T15:20:45.790
> 
> 标签：javascript, html

已成功在本站使用脚本添加独立窗口。它没有滚动条。我如何添加它们。脚本是：

```
<a href="#"
onClick="window.open(
  'popup.php?message=<?php echo $Url; ?>',
  'myWindow', 
  'status = 1, height = 350, width = 1022, resizable = 0'
)"
class="bstyle">
  E
</a> 
```

如果您能提供帮助将不胜感激。问候艾伦布朗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:22:39.570

您需要添加`scrollbars = 1`到的第三个参数`window.open`：

```
<a href="#"
onClick="window.open(
  'popup.php?message=<?php echo $Url; ?>',
  'myWindow', 
  'status = 1, height = 350, width = 1022, resizable = 0, scrollbars = 1'
)"
class="bstyle">
  E
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:23:50.900

Add `scrollbars=1` in call

`<a href="#" onClick="window.open('popup.php?message=<?php echo $Url; ?>', 'myWindow', 'status=1,height=350,width=1022,resizable=0,scrollbars=1' )" class="bstyle">E</a>`

# asp.net - 获取空白页面而不是 401 错误页面

> ID：11582230
> 
> 赞同：7
> 
> 时间：2012-07-20T15:20:50.227
> 
> 标签：asp.net, iis, iis-6

我有一个部署到 IIS6 的带有 Windows 身份验证的 ASP.NET MVC3 应用程序。当经过身份验证的用户单击他们无权查看的链接时，系统会提示他们输入用户名和密码（在浏览器对话框中，而不是在页面中），如预期的那样。

但是，在单击取消或输入无效凭据 3 次后，我没有看到 401 Unauthorized 页面，而是看到了一个空白页面。

查看 Fiddler，点击取消后有三个请求/响应。以下是响应摘要和标题：

1.  ASP.NET 访问被拒绝消息 (401.2)

    HTTP/1.1 401 未经授权日期：2012 年 7 月 20 日星期五 14:34:21 GMT 服务器：Microsoft-IIS/6.0 WWW-Authenticate：协商 WWW-Authenticate：NTLM X-Powered-By：ASP.NET X-AspNet-Version： 4.0.30319 缓存控制：私有内容类型：文本/html；charset=utf-8 内容长度：1701 代理支持：基于会话的身份验证

2.  IIS 您无权查看此页面 (401.1)

    HTTP/1.1 401 Unauthorized Content-Length: 1539 Content-Type: text/html Server: Microsoft-IIS/6.0 WWW-Authenticate: NTLM TlRMTVNTUAACAAAADAAMADgAAAAF... (为简洁起见省略) X-Powered-By: ASP.NET 日期: Fri , 2012 年 7 月 20 日 14:34:21 GMT 代理支持：基于会话的身份验证

3.  空响应

    HTTP/1.1 401 未经授权日期：2012 年 7 月 20 日星期五 14:34:21 GMT 服务器：Microsoft-IIS/6.0 WWW-Authenticate：协商 WWW-Authenticate：NTLM X-Powered-By：ASP.NET X-AspNet-Version： 4.0.30319 X-AspNetMvc 版本：3.0 缓存控制：私有内容长度：0 代理支持：基于会话的身份验证

**如何让它显示 401 错误页面？**

更新1：

这是我的 web.config 错误部分。

```
<customErrors mode="RemoteOnly" defaultRedirect="~/Error" /> 
```

我也在用[`HandleErrorAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute.aspx)。

我怀疑 IIS 返回的是空白页而不是 ASP.NET，但我不确定如何证明这一点。

更新 2：

这很有趣。如果我刷新空白页，我会看到 ASP.NET Access is Denied 消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:07:43.547

在按照@AndrewHagner 的建议查看 401 重定向后，我想出了这项工作。它基于[这个答案](https://stackoverflow.com/a/11318752/26226)。我实施`AuthorizeAttribute`并覆盖了`HandleUnauthorizedRequest()`.

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
    {
        var authenticatedUnauthorizedRouteValues =
                new RouteValueDictionary(new {controller = "Error", action = "Index"});

        filterContext.Result = new RedirectToRouteResult(authenticatedUnauthorizedRouteValues);
        filterContext.Controller.TempData["message"] = 
                "You are not authorized to view this page.";
    }
    else
    {
        base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

据我了解，这将在 MVC 管道中捕获未经授权的请求，然后再发送到 IIS。这让我有机会重定向到用户友好的未授权页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:49:57.030

您应该尝试在**web.config**文件中设置一条规则，以这种方式将用户重定向到未经授权的页面。

```
 <System.Web>
   //map all the erros presented in the application to the error.aspx webpage
   <customErrors mode="RemoteOnly" defaultRedirect ="~/error.aspx">
   //redirect the user to a Error401.pasx Page after the server get an 401 Error 
   <error statusCode="401" redirect="Error401.aspx" />
  </customErrors>
 <System.Web> 
```

我希望这对你有用。

# html - 将 div 放置在屏幕中心的 CSS 布局

> ID：11582231
> 
> 赞同：2
> 
> 时间：2012-07-20T15:20:53.950
> 
> 标签：html, css

再次关于 css 布局：

```
#container{
width:979px;
height:590px;
margin-left:auto; //works
margin-right:auto; //works
margin-top:auto; //doesn't work
margin-bottom:auto; //doesn't work
} 
```

所以，我希望#container 放置在屏幕中央。
我也试过：margin:auto - 没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:25:51.403

最好的方法是使用`display: table-cell`and `vertical-align: middle`（在 IE7 上不起作用）。

因为我们没有你的 HTML，我能做的最好的就是链接你[这篇文章](http://phrogz.net/css/vertical-align/index.html)，它向你展示了实现它的所有不同方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:27:19.463

或者也许你可以使用这个解决方案：

```
<div class="container">
    <div class="block">
        <p>Hello world, i'm a vertical align div !</p>
    </div>    
</div>

div.bloc { 
    display:inline-block;
    vertical-align:middle;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:29:25.803

如果你想用 css 来做，你应该通过填充手动设置它。否则，如果您希望它是动态的，您应该编写如下的javascript：-

```
var a = window.outerHeight;
var b = $('#id of div').height();
var c = (a-b)/2;
$('#id of div').css("margin-top",c); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T15:29:51.407

怎么样的东西：

```
#container{
width:979px;
height:590px;
position:absolute;
left:50%;
top:50%;
margin:-295px 0 0 -490px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T15:24:02.933

你有没有试过`margin-top:50%;`，你可能会成功。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T15:26:04.560

如果您知道#container 的高度和宽度，您可以执行以下操作：

1.  在容器周围添加一个包装器 div 并将其设置为 position:relative
2.  将 #container 设置为 position:absolute, top:50%, left:50%, margin-left:-XXXpx, margin-top:-XXXpx 其中 XXX 值是 #container 宽度和高度的一半。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-20T15:27:47.143

我认为您正在寻找*垂直居中*，有一个关于如何做到这一点的[博客。](http://www.vanseodesign.com/css/vertical-centering/)希望有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-20T17:12:21.013

如果您只想将容器放置在屏幕中央。试试这个

CSS：

```
html, body { margin:0; padding:0; }

#container{
width:979px;
height:590px;
margin:0 auto;
} 
```

HTML

```
<div id="container">
Data goes here
</div> 
```

希望这可以帮助

# python - Flask Python 模型验证

> ID：11582233
> 
> 赞同：13
> 
> 时间：2012-07-20T15:20:54.890
> 
> 标签：python, validation, flask

来自 php 背景，我正在通过 Flask 学习 python。我已经为客户端使用了 WTForms，这很好地处理了验证。

但是，我想使用烧瓶的一件事是公共 API，在这种情况下，我希望所有验证都在我的模型上运行。我认为 SQLAlchemy 将包含验证功能，但事实并非如此。

我遇到过[Colander](http://docs.pylonsproject.org/projects/colander/en/latest/index.html)，它看起来不错，但我有点惊讶没有更多无处不在的验证库。更令人惊讶的是 SQLAlchemy 本身并没有这样做。

这里有哪些选择？也许我遗漏了一些东西，但是如何轻松验证模型数据？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-02T19:45:29.440

## 您是否考虑过在模型层进行验证...

这将允许您拥有一个完美的 DRY 解决方案，因为无论更新源是用户发送的数据，还是作为间接更新的一部分更新模型的应用程序组件，验证都会自动触发。简而言之，您还可以在前端使用 WTForms 重用此解决方案，并且只有一个地方可以对 API 和前端进行验证。

有关在模型中进行验证的更多优点，请参阅[此答案](https://stackoverflow.com/a/5305920/2274357)。

* * *

## ...使用 SQLAlchemy 提供的工具？

### 1.简单验证[的`validates()`装饰器：](http://docs.sqlalchemy.org/en/latest/orm/mapped_attributes.html#sqlalchemy.orm.validates)

使用这个装饰器非常简单：只需将它应用于您要验证的字段：

```
from sqlalchemy.orm import validates

class EmailAddress(Base):
    __tablename__ = 'address'

    id = Column(Integer, primary_key=True)
    email = Column(String)

    @validates('email')
    def validate_email(self, key, address):
        assert '@' in address
        return address 
```

### 2.复杂业务规则的[ORM事件：](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=orm%20events#orm-events)

当模型实例的属性之一发生更改时，您可以使用属性事件直接执行复杂的验证。使用属性事件的优点是可以保证会话中的数据（内存中的对象）处于验证状态。

[这是文档](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=orm%20events#attribute-events)中的一个示例（*一个简单*的示例，但您应该在这里考虑复杂的规则）：

```
def validate_phone(target, value, oldvalue, initiator):
    "Strip non-numeric characters from a phone number"

    return re.sub(r'(?![0-9])', '', value)

# setup listener on UserContact.phone attribute, instructing
# it to use the return value
listen(UserContact.phone, 'set', validate_phone, retval=True) 
```

您还可以使用 Mapper Events，例如[`before_insert`](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=orm%20events#sqlalchemy.orm.events.MapperEvents.before_insert)推迟对`session.add()`调用的验证，甚至使用[Session Events来拦截提交……但是您失去](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=orm%20events#session-events)*了会话*中数据的完整性保证……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-08T20:53:21.567

我正在为此编写一个库，称为[Flask-Inputs](http://pythonhosted.org/Flask-Inputs/)。

与滤锅类似，您定义模式并根据它们验证您的输入。就像@Sean Vieira 的建议一样，它依赖于 WTForms 进行验证。

在内部，它将所有`request`输入数据转换为 MultiDicts。就像 WTForms 一样，您可以定义自定义验证器（一个内置的自定义验证器用于`request.json`数据，它使用 jsonschema 进行验证）。

由于听起来您正在对发布到公共 API 的数据运行验证，因此这里是 API 密钥和发布的 JSON 验证的示例。

```
from flask_inputs import Inputs
from flask_inputs.validators import JsonSchema

schema = {
    'type': 'object',
    'properties': {
        'name': {'type': 'string'}
    }
}

class ApiInputs(Inputs):
    headers = {
        'Authorization': [DataRequired(), valid_api_key]
    }
    json = [JsonSchema(schema=schema)] 
```

然后在您的路线中：

```
@app.route('/api/<version>/endpoint')
def endpoint():
    inputs = ApiInputs(request)

    if not inputs.validate():
        return jsonify(success=False, errors=inputs.errors) 
```

我发现（在生产中使用它）的最大好处是在一个地方显示所有错误。覆盖所有传入数据的良好验证器可以防止生产中出现许多意外/未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T03:44:03.570

只要传入的数据可以以类似 Multi-Dict 的格式读取，就没有理由仍然不能使用 WTForms 进行验证（尽管它比使用滤锅更尴尬）。

因此，对于生成和使用 JSON 的假设 API，您可能会执行以下操作：

```
class MyDataStructure(Form):
    widget = TextField("Widget", validators=[Required()])
    quantity = IntegerField("Quantity", validators=[Required()])

@app.route("/api/v1/widgets", methods=["POST"])
def widgets():
    try:
        new_widget_info = json.loads(request.form.data)
    except KeyError:
        return jsonify(error="Must provide widget JSON in data param")
    except ValueError:
        return jsonify(error="Invalid JSON Provided")

    data = MyDataStructure(**new_widget_info)
    if not data.validate():
        return jsonify(error="Missing or invalid data",
                           error_details=data.errors)
    else:
        # Create a new widget 
```

# asp.net - ASP.Net C# 提醒应用程序

> ID：11582245
> 
> 赞同：0
> 
> 时间：2012-07-20T15:21:16.733
> 
> 标签：asp.net, sql-server-2008, c#-4.0, reminders

我即将开始使用以下任何
ASP.Net C# 4.0 Web 表单/ASP.NET MVC 3.0 Razor Views/Console Application
SQL Server 2008/Entity FrameWork 4.1开发提醒应用程序

我已经创建了提醒表单，用户将在其中创建他们想要提醒的时间和日期的提醒。

现在我的程序应该查看数据库并检查任何活动的提醒列表并发送电子邮件提醒。

这就是我的想法：

1.  编写控制台程序
2.  计划在服务器上每分钟运行一次
3.  该程序将检查提醒表以查找所有活动的
4.  那一分钟的提醒
5.  并撰写电子邮件并将其发送出去。

但我不确定这是否是最好的方法。非常感谢任何建议/想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:24:24.687

此应用程序的核心很可能是 Windows 服务。该服务在一个计时器上运行，该计时器将发出必要的数据请求。然后发送电子邮件并启动烤面包机或应用程序窗口以在找到项目时提醒用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:47:58.647

使用 CRON 触发器而不是轮询。Quartz.NET 使用 CRON 并且运行良好。大量教程和下载 [http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html)

# jsf - Clear the form in Spring Web flow

> ID：11582246
> 
> 赞同：0
> 
> 时间：2012-07-20T15:21:18.027
> 
> 标签：jsf, spring-webflow

Can anyone help me how to clear the data in the form once the data is get saved in the database.

```
 add.xhtml

       <ui:define name="content">

       <h2 style="font-weight:bold;font-size:16px;margin-top:10px;">Register a new employee</h2>
       <p:panel header="Add a Employee" toggleable="true" toggleSpeed="100">
    <h:form style="background: 10px steelBlue;border-radius: 13px;">

        <h:panelGrid columns="3" id="leaveform" >
        <div>
        <div>
        <h:outputLabel for="employee">Select the Type employee</h:outputLabel>
        <h:selectOneMenu id="approveleavetype" value="#{userInfo.loginperson}" required="false" >
                        <f:selectItems value="#{referenceData.loginPersonType}"/>
                    </h:selectOneMenu> 
            </div>
                 <h:outputLabel for="firstname">First Name<em>*</em></h:outputLabel>

                <h:inputText id="firstname" value="#{userInfo.fname}" 
                 required="true" 
                label="fname" style="background-color:#FFF;">
            </h:inputText>

            <div>

                <h:outputLabel for="lastName">Last Name<em>*</em></h:outputLabel>

                    <h:inputText id="lastname" value="#{userInfo.lname}" 
                 required="true" 
                label="lname" style="background-color:#FFF;">
            </h:inputText>

            </div>
            <div>
                <h:outputLabel for="emailId">Email Id<em>*</em></h:outputLabel>

                    <h:inputText id="emailId" value="#{userInfo.emailId}" 
                 required="true" 
                label="emailId" style="background-color:#FFF;">
            </h:inputText>

            </div>
            <div>
                <h:outputLabel for="manager">Manager<em>*</em></h:outputLabel>

            <h:inputText id="manager" value="#{userInfo.manager}" 
                 required="true" 
                label="manager" style="background-color:#FFF;">
            </h:inputText>
            </div>

            <div>
                <h:outputLabel for="username">UserName<em>*</em></h:outputLabel>

            <h:inputText id="username" value="#{userInfo.username}" 
                 required="true" 
                label="username" style="background-color:#FFF;">
            </h:inputText>
            </div>
            <div>
                <h:outputLabel for="password">Password<em>*</em></h:outputLabel>

            <h:inputText id="password" value="#{userInfo.password}" 
                 required="true" 
                label="password" style="background-color:#FFF;" >
            </h:inputText>
            </div>

        <center><p:commandButton value="Add Employee" action="insertemployee" id="insertemployee" style="margin-left:250px;"/></center>
    </div> 
```

main-flow.xml

```
 <view-state id="addEmployee">
<on-entry>
<evaluate expression="leaveBo.getallUser()" result="viewScope.allUser"></evaluate>
</on-entry>
    <transition on="insertemployee" to="addEmployeeInfo"></transition>

</view-state>

    <action-state id="addEmployeeInfo">
    <evaluate
        expression="leaveBo.insertEmpolyee(userInfo.fname,userInfo.lname,userInfo.emailId,userInfo.manager,userInfo.loginperson,userInfo.username,userInfo.password)"></evaluate>
    <transition to="addEmployee"></transition>
</action-state> 
```

Here Once the Data is get entered it is get saved and once it get saved it is transition to same page.The problem is the value I entered is not getting cleared.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:00:07.837

You have input fields defined with attributes like `value="#{userInfo.username}"`, so I imagine you'll have to explicitly clear `userInfo` or its attributes for those fields to be blank?

Or define a "local" model bean for just that one page/view. Although I admit to having never done JSF, so I don't know exactly what WebFlow looks like with JSF.

# security - scrypt 是否使用哈希算法？

> ID：11582248
> 
> 赞同：1
> 
> 时间：2012-07-20T15:21:28.003
> 
> 标签：security, cryptography, scrypt

scrypt 程序是否在幕后使用散列算法？

scrypt 的输出大小是多少（我的意思是底层算法，是 4096 位）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T20:37:59.810

是的，它确实。事实上，它使用了两个。如果您查看[scrypt 论文](http://www.tarsnap.com/scrypt/scrypt.pdf)，您会发现它使用

1.  用于初始密钥扩展和最终输出生成的[PBKDF2构造中的](http://en.wikipedia.org/wiki/PBKDF2)[SHA-256 ，以及](http://en.wikipedia.org/wiki/SHA-256)

2.  DJ Bernstein的[Salsa 20/8 核心](http://cr.yp.to/salsa20.html)，作为实际记忆硬混音功能 SMix 的一部分。

（Salsa 20/8 核心实际上并不是一个与 SHA-256 相同的加密散列函数，而只是其中的一部分，但为了完整起见，我将其包括在内。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T23:10:29.533

输出大小是您要求 PBKDF2 的任何值；IIRC 这仅限于 4 GB 的数量级。

# c#-4.0 - 是否有任何 MSBuild 替代方案？

> ID：11582250
> 
> 赞同：4
> 
> 时间：2012-07-20T15:21:46.237
> 
> 标签：c#-4.0

**我是一名正在接受培训的学生，C# 经验很少。我们公司正在开发使用 T4 模板（C# VS2010）的解决方案。生成的文件无法在 MSBuild 下编译，因为它依赖于 VS。我的任务是找到一个工具或一个库或一个 .dll 文件或 SDK 或任何可以在构建时替代 VS 的东西。否则，我必须将生成的代码修改为 VS 独立于我自己，我认为这对我来说是一项艰巨的任务。代码示例：

```
Project GetProjectContainingT4File(DTE dte) {

// Find the .tt file's ProjectItem

ProjectItem projectItem = dte.Solution.FindProjectItem(Host.TemplateFile);

// If the .tt file is not opened, open it

if (projectItem.Document == null)

    projectItem.Open(Constants.vsViewKindCode);

if (AlwaysKeepTemplateDirty) {

    // Mark the .tt file as unsaved. This way it will be saved and update itself next time the

    // project is built. Basically, it keeps marking itself as unsaved to make the next build work.

    // Note: this is certainly hacky, but is the best I could come up with so far.

    projectItem.Document.Saved = false;

}

return projectItem.ContainingProject;

} 
```

感谢您的帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:28:21.990

限制

> 生成的文件无法在MSBuild下编译，因为它是VS依赖的

看起来很奇怪。为什么您会以 .NET 环境为目标，但希望您的构建环境独立于 MS？当然，您至少需要一个 C# 编译器。

如果你真的想使用 MSBuild 之外的东西，还有很多替代品，比如 Mono 的[Microsoft.Build](http://www.mono-project.com/Microsoft.Build)甚至[Make for Windows](http://gnuwin32.sourceforge.net/packages/make.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:45:54.217

MSBuild 基本上是 NMake 的托管且高度可扩展的版本，因此不依赖于 VS！然而，它依赖于 .NET。

因此，您应该能够使用 MSBuild 来编排您需要的一切。

甚至 C# 编译器也是 .NET 运行时的一部分，因此您甚至应该能够构建 C# 目标而不会产生 VS 依赖项。

# php - 将结果从 javascript 发布到变量

> ID：11582259
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:22:11.717
> 
> 标签：php, javascript

> **可能重复：**
> [将 js 变量传递给 php 变量](https://stackoverflow.com/questions/4716177/pass-a-js-variable-to-a-php-variable)

我有这个代码

```
 {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            alert("Current position: " + lat + " " + lng);
        } 
```

我想将警报发布到这样的 php 变量

```
$location = above result 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:24:06.093

You need to make an ajax call to your server.

```
$.post(server, {lat: lat, lng:lng}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:24:27.157

You can't pass directly from javascript to PHP.
If you want to do so, use AJAX, or just make your calculation in PHP first :)

# svn - 在工作副本中集成修订时的树冲突

> ID：11582262
> 
> 赞同：0
> 
> 时间：2012-07-20T15:22:27.207
> 
> 标签：svn

将修订版集成到工作副本中时，我遇到了奇怪的树冲突，我不明白为什么... :(

开发在 /trunk/project 中完成。修订版 619 已分支到 /branches/divB/majorwork 以实现重大更改。与此同时，在主干继续工作。在修订版 636 中，分支被重新集成到主干中。“项目”的 svn:mergeinfo 获得了条目

```
/branches/divB/majorwork:620-635 
```

最后，在修订版 680 中，在 /tags/v1.0 中创建了一个稳定的标签

现在 HEAD 是 Rev 706，我想创建 /tags/v1.1，只需将一些小错误修复向后移植到 v1.0。我想从主干合并的修订是 682-683。

现在我执行以下操作： 1.) svn 从我的工作副本切换到 /tags/v1.0 2.) svn 将 /trunk/project 的修订版 682-683 合并到工作副本中。

但是，将一小部分文件合并到我的工作副本中，我在主目录“项目”上遇到了树冲突：当我选择“检查修改”时，我得到：

```
Path      Text status             Property status
---------+-----------------------+----------------
project   normal                  modified
project   missing, tree conflict 
```

当我比较“项目”文件夹时，我发现：

svn:mergeinfo : 工作基础:

```
/branches/divB/majorwork:620-635 
```

svn:mergeinfo : 工作副本

```
/branches/divB/majorwork:620-635
/trunk:682-683 
```

我不明白为什么我在这里遇到树冲突以及我做错了什么。我的意图是合并已更改的文本文件，然后将工作副本标记到 /tags/v1.1

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:26:15.673

对不起，我真的太笨了，只见树木不见森林......

我确实从 /trunk 而不是 /trunk/project 合并...

# iphone - 可以在 PC 上开发 iPhone 应用程序吗？

> ID：11582264
> 
> 赞同：1
> 
> 时间：2012-07-20T15:22:26.777
> 
> 标签：iphone

我无权访问 MacOS 机器。我在研究 iPhone 开发时发现的所有东西都让我相信你必须有一个为 iPhone 开发。我有一个 Windows 7 开发框，在后台运行带有 IIS 6.0 的 Visual Studio 2010。我需要开发一个应用程序。我可以只使用 HTML5、Javascript 和 CSS3 创建一个图标在桌面上的浏览器应用程序吗？我可以在没有 MacOS 和 Objective-C 的情况下做到这一点吗？最重要的是，我可以在不花费数百美元或工时的情况下做到这一点吗？

## 编辑：

我将简化我的问题：我可以开发一个可以在 iPhone 上脱离浏览器使用的 IIS Web 应用程序吗？

## 进一步编辑：

PhoneGap.com 是否创建原生 iPhone 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:30:05.963

你不能。

想买个用的Mac Mini。你的很多要求都会得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:39:53.730

您需要 Mac 和 iWhatever 来开发原生 Objective-C 应用程序。

但是，正如您所观察到的，您可以使用 HTML5 等编写一个 Web 应用程序，用户可以将其部署到他们的桌面上。

请注意，Web 应用程序没有获得与 Safari 使用的完全相同的运行时引擎，因此不会那么快（[http://9to5mac.com/2011/03/17/apple-confirms-ios-web-apps-运行比 safari-dont-utilize-ios-4-3-web-performance-optimizations/ 慢](http://9to5mac.com/2011/03/17/apple-confirms-ios-web-apps-run-slower-than-safari-dont-utilize-ios-4-3-web-performance-optimizations/)）

不过这可能已经改变了。

您可以在不花费数百美元或工时的情况下做到这一点吗？那是主观的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:35:40.963

您可以使用诸如 Adob​​e AIR 之类的东西在 Windows 机器上创建一个应用程序，您可以使用 JavaScript 或 AS3 进行开发——只是要注意性能问题。请参阅：http: [//www.adobe.com/devnet/air/air_for_ios.html](http://www.adobe.com/devnet/air/air_for_ios.html)

# c++ - 传递向量 > 到一个期望向量的函数 >

> ID：11582266
> 
> 赞同：5
> 
> 时间：2012-07-20T15:22:33.040
> 
> 标签：c++, inheritance, shared-ptr, smart-pointers

我使用的代码结构存在问题，如下（简化）：

```
class SPoint
{
public:
    SPoint(double x, double y, double z) : _x(x), _y(y), _z(z) {}

protected:
    double _x, _y, _z;
}

class Point3D : public SPoint
{
public:
    Point3D(double x, double y, double z) : SPoint(x, y, z) { // default values for U and V }

protected:
    double U, V;
} 
```

这些点用于创建折线：

```
class SPolyline
{
public:
    SPolyline(const vector<shared_ptr<SPoint>>& points) { // points are cloned into _points}

protected:
    vector<shared_ptr<SPoint>> _points;
};

class Polyline3D : SPolyline
{
public :
    Polyline3D(const vector<shared_ptr<Point3D>>& points) : SPolyline(points)  // doesn't compile
}; 
```

当我尝试使用此错误编译 Polyline3D 时，VS2010 拒绝我

```
error C2664: 'SPolyline::SPolyline(const std::vector<_Ty> &)' : cannot convert parameter 1 from 'const std::vector<_Ty>' to 'const std::vector<_Ty> &'
with
[
  _Ty=std::tr1::shared_ptr<SPoint>
]
and
[
  _Ty=std::tr1::shared_ptr<Point3D>
]
and
[
  _Ty=std::tr1::shared_ptr<SPoint>
]
Reason: cannot convert from 'const std::vector<_Ty>' to 'const std::vector<_Ty>'
with
[
  _Ty=std::tr1::shared_ptr<Point3D>
]
and
[
  _Ty=std::tr1::shared_ptr<SPoint>
]
No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

没有从`vector<shared_ptr<Derived>>`到的默认转换`vector<shared_ptr<Base>>`。知道我需要对折线中的点进行共享所有权，如何解决这个问题？我使用的`shared_ptr`是标准的，不是来自 Boost 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:25:25.757

从容器中抽象出来并使用迭代器。

```
template<typename InputIterator>
Polyline3D(InputIterator begin, IntputIterator end) : SPolyline(begin ,end) {} 
```

可以为 实现这样的转换`vector`，但考虑到它可能引入的微妙事故（想想隐式转换），没有它可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:02:20.757

您可以做的另一件事是：

```
class Polyline3D : public SPolyline
{
public :
    Polyline3D(const vector<shared_ptr<Point3D>>& points) : SPolyline(std::vector<shared_ptr<SPoint> >(points.begin(), points.end())){}  
}; 
```

# json - jsRender如何进行布尔比较

> ID：11582276
> 
> 赞同：1
> 
> 时间：2012-07-20T15:22:59.097
> 
> 标签：json, templates, boolean, jsrender

我正在尝试做一些非常简单的事情 - 在 jsRender 模板中测试来自 JSON 的布尔值。

**JSON数据：**

{ ...“CanAdd”：假，“CanDelete”：假，“CanEdit”：真，...}

**模板：**

{{if CanEdit === true}} 做点什么{{/if}}

生成的输出不显示“做某事”。JSON 数据中 CanEdit 的值为 true。我已经尝试过 CanEdit === "true"、CanEdit == true、CanEdit == "true"，但没有任何效果。

我错过了什么？

**编辑** 这是我的完整模板：

```
 <section class="ManagePageContentSection">
            <h2>{{:PageTitle}} Page</h2>
            {{for SectionContentList}}
                <section class="PageSectionContent">
                    <h3>
                        {{:SectionName}} Section

                        {{if CanEdit === true}}
                            <span id="editPageSectionButton" class="editButton" title="Edit {{:SectionName}}">edit</span>
                        {{/if}}

                        {{if CanDelete === true}}
                            <span id="deletePageSectionButton" class="deleteButton" title="Delete {{:SectionName}}">delete</span>
                        {{/if}}
                    </h3>
                    {{if PageContentList.length > 0}}
                        <table class="PageContentTable">
                            <thead>
                                <tr>
                                    <th>Order</th>
                                    <th>Title</th>
                                    <th>Subtitle</th>
                                    <th>Summary</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{for PageContentList}}
                                <tr id="{{:ContentId}}">
                                    <td>{{:Ordinal}}</td>
                                    <td>{{:Title}}</td>
                                    <td>{{:SubTitle}}</td>
                                    <td>{{:Summary}}</td>
                                    <td>
                                        {{if CanEdit}}
                                            <span id="editPageSectionButton" class="editButton" title="Edit {{:Title}}">edit</span>
                                        {{/if}}
                                        {{if CanDelete}}
                                            <span id="deletePageSectionButton" class="deleteButton" title="Delete {{:Title}}">delete</span>
                                        {{/if}}
                                    </td>
                                </tr>
                                {{/for}}
                            </tbody>
                            <tfoot>
                            </tfoot>
                        </table>
                    {{/if}}
                </section>
            {{/for}}
        </section> 
```

**JSON**

```
{

"AsOfDate": "/Date(1342800529826-0500)/",
"FullPageUrl": "/home/index",
"NavigationId": 7,
"NavigationName": "Home",
"PageContainerName": "ContentRenderedContainer",
"PageId": 2,
"PageName": "Home",
"PageTitle": "Home - Home",
"SectionContentList": [
    { … },
    { … }
],
"AddContentUrl": "",
"AddSectionUrl": "/PageSection/New/2",
"AdminTemplateName": "PageSectionContentTemplate",
"CanAdd": false,
"CanDelete": false,
"CanEdit": true,
"DeletSectioneUrl": "/PageSection/Delete",
"DeleteContentUrl": "",
"EditContentUrl": "",
"EditSectionUrl": "/PageSection/Edit" 
```

}

模板正在呈现，除了 CanEdit、CandDelete 周围的逻辑。

我即将放弃做模板并返回在服务器上呈现 HTML。也许我正在做的事情太复杂了。也许模板应该只用于只读数据。

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T05:43:20.903

```
{{if variable}} do something {{/if}} 
```

如果“变量”评估为真，将显示“做某事”。

它不会显示“变量”是否为空或评估为假。

用于`!variable`检查是否为假。

# java - 如何使用 MQ Explorer 设置 MQ 以允许三个服务相互通信

> ID：11582277
> 
> 赞同：0
> 
> 时间：2012-07-20T15:23:00.970
> 
> 标签：java, c++, ibm-mq, mq

我正在尝试模拟一个工作流程，其中我有三个 MQ 服务器 A、B 和 C。

我想要做的是让 A 和 C 服务都向 B 和 B 发送消息，以便能够向 A 和 C 发送消息。

A -----> B（B从A接收消息） C -----> B（B从C接收消息）

B -----> A（B向A发送消息） B -----> C（B向C发送消息）

使用资源管理器 MQ GUI 进行设置的最佳或最直接的方法是什么？所有三个服务都将在同一台机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:25:20.457

我不会使用 MQ Explorer 进行设置（太容易出错），而是使用 MQSC 命令。

首先进行 A 和 B 队列管理器设置，然后进行 B 和 C 队列管理器设置。

这是一篇关于如何在 2 个队列管理器之间进行完整设置的 MQ 博客文章：http: [//www.capitalware.biz/rl_blog/? p=509](http://www.capitalware.biz/rl_blog/?p=509)

请记住，如果您在同一台服务器上运行 3 个队列管理器，那么每个队列管理器（侦听器）都需要自己的端口号。即A使用1414，B使用1415，C使用1416。

# php - ldap_search 将不接受搜索输入中带括号的过滤器

> ID：11582281
> 
> 赞同：5
> 
> 时间：2012-07-20T15:23:13.140
> 
> 标签：php, ldap, ldap-query

在我正在处理的 php 页面中，建立了一个 LDAP 连接，从中提取 cn 条目列表并将其放入下拉列表中。下拉列表中的选择通过表单提交发送到另一个 php 脚本，该脚本根据 LDAP 检查选定的 cn 以获取更多相关信息。

对于大多数名称来说，这没有问题；however, a cn was recently added that includes parentheses enclosing a nickname, and when that name is selected it causes the ldap_search() method to return false. 下面是代码，其中 $employeename 是经过清理的员工姓名。

```
...

$dn = "cn=users,dc=our-domain,dc=com";
$filter = "(cn=".$employeename.")";

$attrs = array("cn", "mail");
$rslt = ldap_search($ldapsvr, $dn, $filter, $attrs);

$entries = ldap_get_entries($ldapsvr, $rslt);

... 
```

$filter 字符串以

```
(cn=First (FN) Last) 
```

其中 First 是名字，Last 是姓氏，FN 是包含的昵称。我曾尝试将括号转义为 \28 和 \29 （如此处所提供[，](http://www.rlmueller.net/CharactersEscaped.htm)它还说不需要转义匹配的括号），但它没有帮助。有效的名称包括字母、空格和句点（用于中间首字母）。

```
(cn=First \28FN\29 Last) 
```

编辑： ldap_search 返回错误，而不是死亡。如果 $rslt 为假而不是数组，我在调查时包含的其中一条线将失败并死亡。

编辑：我只转义了内括号，。因为外部从来没有给过任何麻烦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:29:34.853

尝试添加操作数作为一种操作顺序。`title`在我做了类似的事情之前，我在现场遇到了类似的问题。

```
$filter = "(&(cn=$employeename))"; 
```

在某些系统上，您需要`()`使用`\`.

```
$filter = "(&(cn=James \(Jim\) Doe))"; 
```

紧紧抓住，处理逃生功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:11:25.757

Parentheses must be escaped in search filter assertion values. See also: [rfc4515](https://www.rfc-editor.org/rfc/rfc4515) (section 4).

# javascript - 使用下划线 groupby 按颜色对汽车数组进行分组

> ID：11582284
> 
> 赞同：15
> 
> 时间：2012-07-20T15:23:25.050
> 
> 标签：javascript, iterator, underscore.js

我有一系列汽车。

```
car = {
    make: "nissan",
    model: "sunny",
    colour: "red"
}; 
```

我将如何使用 underscore.js 按颜色对数组进行分组？

我尝试了一些组合，但我不确定如何指定我的迭代器条件：

```
var carsGroupedByColor = _.groupBy(cars, false, colour);
var carsGroupedByColor = _.groupBy(vars, false, function(cars){ return cars[colour]; }; 
```

他们每次都返回数组中的所有内容。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-20T15:31:56.810

您不需要`false`第二个参数，以下将起作用：

```
var redCars = _.groupBy(cars, 'colour'); 
```

请注意，第二个参数可以是 a`function`或 a `string`。如果它是`string`该属性名称的下划线组。

取自文档：

> 将集合拆分为集合，按通过**迭代器**运行每个值的结果进行分组。如果**迭代器**是字符串而不是函数，**则按迭代器**命名的属性对每个值进行分组。

这是一个[工作示例](http://jsfiddle.net/JpPjA/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T15:30:34.483

我从未使用过下划线 js，但它不会按照他们的文档

```
var groupedCars = _.groupBy(cars, function(car) { return car.make; }); 
```

事实上，我认为这更正确，因为它指出如果迭代器是一个字符串，而不是它按对象中具有该字符串名称的属性进行分组。

```
var groupedCars = _.groupBy(cars, "make"); 
```

如果您只想要红色汽车（即使我猜您确实应该使用过滤器），那么您可以执行以下操作

```
var redCars = groupedCars["red"]; 
```

改为使用过滤器

> 查看列表中的每个值，返回一个包含所有通过真值测试（迭代器）的值的数组。委托给本机过滤器方法（如果存在）。

```
var redCars = _.filter(cars, function(car) { return car.colour == "red" }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-01T07:09:44.853

```
var data = [
    {
        "name": "jim",
        "color": "blue",
        "age": "22"
    },
    {
        "name": "Sam",
        "color": "blue",
        "age": "33"
    },
    {
        "name": "eddie",
        "color": "green",
        "age": "77"
    },
    {
        "name": "Dheeraj",
        "color": "blue",
        "age": "25"
    },
    {
        "name": "Suraj",
        "color": "green",
        "age": "25"
    }
];

var result = _.groupBy(data,"color");
console.log(result); 
```

# html - 还是？有什么不同？

> ID：11582286
> 
> 赞同：15
> 
> 时间：2012-07-20T15:23:35.183
> 
> 标签：html, forms, get

我[看到](http://www.htmlgoodies.com/tutorials/buttons/article.php/3478871)我们可以写：

```
<form method="link" action="foo.html" >
<input type="submit" />
</form> 
```

制作一个“链接按钮”。

但我知道我们可以写：

```
<a href="foo.html" ><input type="button" /></a> 
```

哪个会做同样的事情。

有什么不同？他们的浏览器兼容性如何？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T15:30:59.340

您链接到的那个页面不正确。HTML 中的属性没有`link`值。`method`这将导致表单回退到方法属性的默认值`get`，这相当于`href`无论如何都有一个属性的锚元素，因为两者都会导致 HTTP`GET`请求。`method`HTML5 中表单的唯一有效值是“get”和“post”。

```
<form method="get" action="foo.html">
    <input type="submit">
</form> 
```

这与您的示例相同，但有效；相当于：

```
<a href="foo.html"> 
```

您应该使用语义来确定实现表单的方式。由于没有供用户填写的表单字段，因此这不是真正的表单，因此您无需使用`<form>`即可获得效果。

何时使用`GET`表单的一个示例是搜索框：

```
<form action="/search">
    <input type="search" name="q" placeholder="Search" value="dog">
    <button type="submit">Search</button>
</form> 
```

上面允许访问者输入他们自己的搜索查询，而这个锚元素没有：

```
<a href="/search?q=dog">Search for "dog"</a> 
```

然而，当提交/点击时，两者都将进入同一页面（假设用户没有更改第一个文本字段

* * *

顺便说一句，我使用以下 CSS 来获取看起来像按钮的链接：

```
button,
.buttons a {
    cursor: pointer;
    font-size: 9.75pt;  /* maximum size in WebKit to get native look buttons without using zoom */
    -moz-user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}
.buttons a {
    margin: 2px;
    padding: 3px 6px 3px;
    border: 2px outset buttonface;
    background-color: buttonface;
    color: buttontext;
    text-align: center;
    text-decoration: none;
    -webkit-appearance: button;
}
button img,
.buttons a img {
    -webkit-user-drag: none;
    -ms-user-drag: none;
}
.buttons form {
    display: inline;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:32:24.353

第二种情况不会处理 A 标记内的附加输入参数。它只会跟随 href ，而表单会将所有输入添加到请求 GET 字符串。

```
<form action='http://localhost/?' method='get'><input type="text" name="test"><input type="submit" value="GO"/></form> 
```

和

```
<a href='http://localhost/?'><input type="text" name="test"><input type="submit" value="GO"/></a> 
```

会有所不同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:32:52.433

**功能上的差异。**

虽然是的，但它们的行为都有些相似，但仍有一些理由将元素用于它们的用途。在大多数情况下，您会失去按钮链接的功能；例如，您不能右键单击并在新选项卡或窗口中打开。

还要考虑语义和规范：按钮元素（无论您使用哪种变体；`<input type="button">`或`<button></button>`）旨在供表单使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T15:36:30.983

使用 a `<a name="markname"></a>`，您可以使用 URL 将标签的位置滚动到视图中，例如`http://example.com/index.html#markname`。我不认为表单或输入都这样做。而且我认为要使用`<input type="button" window.location.href='foo.html'/>`，必须激活 JavaScript。另外，`<form>s`通常会导致换行，`<a>s`不要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T15:31:34.293

所有提到的方法都达到相同的结果，除非它们包含多个参数，例如：

```
<input type="button" value="Cancel">
<input type="button" value="Submit"> 
```

作为参考，我使用：

```
<form>
<INPUT TYPE='button' onClick="parent.location='location'">
</form> 
```

对于按钮链接

# visual-studio - Windows 8 Visual Studio 2012 调试器问题

> ID：11582291
> 
> 赞同：1
> 
> 时间：2012-07-20T15:23:47.727
> 
> 标签：visual-studio, windows-8, microsoft-metro

我已经在 windows8 上开发应用程序一个月了，昨天调试器突然停止工作。System.Diagnostic.Debug.WriteLine 在输出窗口上什么也没有留下，Visual Studio 甚至没有对这样的事情做出反应（当然是在点击项目之后）：

```
 private void Button_PointerPressed_1(object sender, PointerRoutedEventArgs e)
    {
        throw new Exception();
    } 
```

请帮我。重新安装 Visual Studio 对我没有帮助（重新安装 VS 后，内存中仍有一些数据：/ 最近的项目等。也许有办法完全卸载 VS？）输出窗口只显示如下内容：

```
 'xyz.exe' (Managed (v4.0.30319)): Loaded ... 
```

语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:32:09.837

您最近是否安装了 Office 2013 预览版？如果是这样，那可能会导致 Visual Studio 2012 RC 崩溃。下载此修复程序：http: [//www.microsoft.com/en-us/download/details.aspx?id=30178](http://www.microsoft.com/en-us/download/details.aspx?id=30178)（另请参阅[http://support.microsoft.com/kb/2703187](http://support.microsoft.com/kb/2703187)）。

# signalr - signalR 聊天仅在本地网络上工作

> ID：11582293
> 
> 赞同：1
> 
> 时间：2012-07-20T15:23:49.757
> 
> 标签：signalr

我制作了大多数网站上描述的聊天示例（我关注了 Hanselman 的[博客文章](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)）。我使用的代码与那里或 SignalR wiki 中的描述完全相同

它在我的本地工作正常，当我部署到我的服务器（共享的 Godaddy 托管）时，在同一网络上的两台计算机上工作正常，说两者都可以看到彼此的消息

问题是当我尝试从不同的网络访问示例时，我看不到那个人的帖子，即使正在使用同一个网页

在做了一些研究之后，我在我的集​​线器上实现了组，并在我的服务器应用程序中管理它

我的问题是，为什么会这样？这是正常/预期的行为还是我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:58:25.007

我相信您遇到了与我相同的问题，这涉及到我正在使用 GoDaddy 的 4GH 计划而不是 Legacy 计划这一事实。在他们的网站上进行了一些挖掘之后，我注意到 GH 似乎代表 Grid Hosting，后来我在他们的常见问题解答中发现了这句话 - “4GH '汇集'许多服务器的资源并且您的网站的内容驻留在多个服务器上”（[http ://support.godaddy.com/help/article/4883/4gh-frequently-asked-questions](http://support.godaddy.com/help/article/4883/4gh-frequently-asked-questions)）。在尝试与人进行测试时，我发现有些人似乎连接到我所在的同一台服务器，而其他人则连接到不同的服务器。SignalR 确实支持 Redis 作为帮助解决此问题的一种方式，但 GoDaddy 没有在其系统上运行 Redis 服务。我能够找到一个名为 redis4you.com 的地方，它允许托管 Redis 服务器，但它们只在端口 2000-4000 上通信，而且似乎 GoDaddy 阻止了大部分传出端口。虽然这不能解决您的问题，但我想与您分享我的发现，让您知道您似乎没有做错任何事情，这正是我们的托管服务提供商的工作方式。

# java - GAE - 当我部署应用程序时不起作用，但在本地主机上它可以工作？

> ID：11582304
> 
> 赞同：4
> 
> 时间：2012-07-20T15:24:04.913
> 
> 标签：java, eclipse, google-app-engine

我已经使用 app 编写了一个 gae 引擎 java mail api。

我的 appengine-web.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>mailapps</application>
  <version>1</version>

  <!--
    Allows App Engine to send multiple requests to one instance in parallel:
  -->
  <threadsafe>true</threadsafe>

  <!-- Configure java.util.logging -->
  <system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
  </system-properties>

  <!--
    HTTP Sessions are disabled by default. To enable HTTP sessions specify:

      <sessions-enabled>true</sessions-enabled>

    It's possible to reduce request latency by configuring your application to
    asynchronously write HTTP session data to the datastore:

      <async-session-persistence enabled="true" />

    With this feature enabled, there is a very small chance your app will see
    stale session data. For details, see
    http://code.google.com/appengine/docs/java/config/appconfig.html#Enabling_Sessions
  -->

</appengine-web-app> 
```

当我在 localhost 上运行该应用程序时，我一切正常，但是当我在 gae 上运行部署它并运行它时，我得到：

> 错误：服务器错误 服务器遇到错误，无法完成您的请求。
> 
> 如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

我的应用程序有什么问题？你能帮我么？

**1.更新_**

盖伊日志说：

> java.lang.RuntimeException：javax.mail.SendFailedException：发送失败（javax.mail.MessagingException：非法参数（java.lang.IllegalArgumentException：未经授权的发件人：未经授权的发件人））

**2.更新**

```
import java.io.IOException;
import java.util.Properties;
import java.util.logging.Logger;

import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class FeedbackServlet extends HttpServlet {

    private static final Logger log = Logger.getLogger(FeedbackServlet.class.getName());

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String name = req.getParameter("name");
        String description = req.getParameter("description");
        String email = req.getParameter("email");
        Properties props = new Properties();
        Session session = Session.getDefaultInstance(props, null);
        log.info(description + name + email + " :Daten extrahiert!");
        String msgBody = name  + " :Name der Person" + "\n" + description + " :Beschreibung der Person" + "\n" + email + " :EMAIL";

        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress("mailapps@gmail.com",
                    "It works"));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress("maximus@gmail.com", "Your name"));
            msg.setSubject("Bestellung");
            msg.setText(msgBody);
            log.info("Message send!");
            Transport.send(msg);

        } catch (Exception e) {
            resp.setContentType("text/plain");
            resp.getWriter().println("Something went wrong. Please try again.");
            throw new RuntimeException(e);
        }

        resp.setContentType("text/plain");
        resp.getWriter().println(
                "Thanks you for your feedback. An Email has been send out.");
    }
} 
```

那是servlet！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:20:00.780

发件人电子邮件地址有明确的限制。Google App Engine 文档提供了这方面的详细信息。

请参阅[https://developers.google.com/appengine/docs/java/mail/overview#Sending_Mail](https://developers.google.com/appengine/docs/java/mail/overview#Sending_Mail)

它会给你足够的选择，你可以考虑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:50:17.660

mailapps@gmail.com 是否有权访问您的应用程序？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T06:33:10.530

在控制台中转到**App Engine > Settings > Application Settings**。将此电子邮件地址添加到授权发件人列表中。出现此问题是因为您从未经授权的电子邮件 ID 发送电子邮件。

*   *您是否是项目的所有者都没有关系，您必须在应用引擎的应用程序设置中添加发件人电子邮件 ID >> 设置*

[![在此处输入图像描述](../Images/fe6d7bd6c6f6b764114ff007016dbc74.png)](https://i.stack.imgur.com/XzGyF.png)

# html - 当 Silverlight 控件获得焦点时，Silverlight 5 Host 上的 iframe 会出现空白

> ID：11582307
> 
> 赞同：0
> 
> 时间：2012-07-20T15:24:18.013
> 
> 标签：html, silverlight

（在 SL 3 上工作正常）我有一个 iframe 在 Silverlight 上显示一些网页（原因是 Silverlight WebBroswer 控件不会在浏览器中运行，除非您应用完全受信任的模式）。所以这个框架显示得很好，但是如果我在 iframe HTML 内容中更改一个值，比如在那个 html 中输入文本，然后我去点击 iframe 内容之外的一些 silvelright 控件（任何人）就会空白, 没有内容。但这很奇怪，因为如果 html 有链接并且我将鼠标悬停在它们曾经是 iframe 的位置上再次显示 HTML 内容。

我有以下 HTML 和它的 SilverlightHost div 来托管 Silvelright 并且我在下面的 (frameHost div) 中添加了一个 iframe 来托管 HTML 内容，我尝试首先将 iframe 添加到 Silverlight 对象所在的同一个 div 中，然后我放置它进入一个单独的 Div 看看是否有帮助，但它有同样的错误

```
#container { 
    width: 100%; 
    height: 100%; 
    position: relative; 
}
#frameHost,  
#silverlightControlHost { 
    width: 100%; 
    height: 100%; 
    position: absolute; 
    top: 0; 
    left: 0; 
    text-align:center;
} 

</style>
<script type="text/javascript" src="Silverlight.js"></script>

<form id="form1" runat="server" style="height:100%">
    <div id="container">
        <div id="silverlightControlHost">
            <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
                <param name="source" value="ClientBin/ShowHtml.xap"/>
                <param name="onError" value="onSilverlightError" />
                <param name="background" value="white" />
                <param name="minRuntimeVersion" value="5.0.61118.0" />
                <param name="autoUpgrade" value="true" />
                <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
                    <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
                </a>
            </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div>
            <div id="frameHost">
              <iframe id="HtmlContentHost"/>
            </div>
        </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:57:40.713

我不知道为什么，但不小心打开了一个托管和 iframe 的页面，因此它正在使用第二个 iframe 中的控件，所以我回来并将我的内容添加到 iframe，然后尝试将其作为 innerHTML 插入HtmlContentHost 工作得很好。所以一些双 iframe（我不喜欢）如何使它工作。

# f# - 使用 List.map 部分应用元组函数

> ID：11582313
> 
> 赞同：1
> 
> 时间：2012-07-20T15:24:32.970
> 
> 标签：f#

给定一个带有两个参数的函数：

```
let f (a:int) (b:int) : string = sprintf "%d %d" a b 
```

还有一个元组列表：

```
let myList = [(1,2) ; (3,3)] 
```

如何`(||>)`使用地图部分应用元组运算符？

```
myList |> List.map ((||>) f)            //doesn't work
myList |> List.map (fun x -> (||>) x f) //boring 
```

看来我需要扭转需要的论点`||>`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T15:35:01.370

```
myList |> List.map ((<||) f) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T15:34:12.630

好吧，`(<||)`像@desco 那样使用是最短的答案。您可以使用以下方式轻松编写无点样式`uncurry`：

```
let inline uncurry f (x, y) = f x y
myList |> List.map (uncurry f) 
```

甚至更奇怪的是内置函数：

```
myList |> List.map ((|>) f << (||>)) 
```

证明：

```
(|>) f << (||>)
<=> fun x -> ((|>) f << (||>)) x
<=> fun x -> ((|>) f) ((||>) x)
<=> fun x -> (|>) f ((||>) x)
<=> fun x -> f |> ((||>) x)
<=> fun x -> (||>) x f 
```

# facebook-like - Facebook Like Button + Open Graph + Website = Pushing Updates to Likes?

> ID：11582321
> 
> 赞同：1
> 
> 时间：2012-07-20T15:25:15.523
> 
> 标签：facebook-like, push-notification

I'm looking for a solution for a client, in which they have a page with 27k likes from a Like button installed on a microsite (instead of a Facebook page). They'd like to push an update out to those 27k people. Based off previous knowledge and documentation (noted below), this *should* be possible.

In the [Facebook Developer page for the Like button](https://developers.facebook.com/docs/reference/plugins/like/), it states the following:

> If you include Open Graph tags on your Web page, your page becomes **equivalent** to a Facebook page. This means when a user clicks a Like button on your page, a **connection** is made between your page and the user. Your page will appear in the "Likes and Interests" section of the user's profile, **and you have the ability to publish updates to the user**.

[Emphasis is mine.]

However, it doesn't actually explain how you can actually publish updates to the user in this type of connection. I've searched here on SO and elsewhere, but nobody seems to know the answer.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:59:32.220

此处描述了如何向喜欢您的 Open Graph 页面的用户发布更新：

[https://developers.facebook.com/docs/opengraphprotocol/#publishing](https://developers.facebook.com/docs/opengraphprotocol/#publishing)

# xml - XSD 无效：无法将名称 xxx 解析为（n）“元素声明”组件

> ID：11582326
> 
> 赞同：1
> 
> 时间：2012-07-20T15:25:32.197
> 
> 标签：xml, xaml, xsd, xsd-validation

我有以下 XSD，它是从使用 XAML 2009 序列化的配置文件中生成的。但是，当我将架构放入[Online Validator](http://xsdvalidation.utilities-online.info/)中时，我得到 src-resolve: Cannot resolve the name 'scg:List' to a(n) 'element声明'组件。错误。

```
 <?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:csu="clr-namespace:ConfigurationUtilityFunctions.Section.User;assembly=ConfigurationUtilityFunctions" xmlns:csw="clr-namespace:ConfigurationUtilityFunctions.Section.WebConfig;assembly=ConfigurationUtilityFunctions" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="clr-namespace:ConfigurationUtilityFunctions;assembly=ConfigurationUtilityFunctions" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import namespace="clr-namespace:System.Collections.Generic;assembly=mscorlib" />
  <xs:element name="ConfigProfile">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="ConfigProfile.ConfigSections">
          <xs:complexType>
            <xs:sequence>
              <xs:element ref="scg:List" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="ProfileId" type="xs:string" use="required" />
      <xs:attribute name="InstanceName" type="xs:string" use="required" />
      <xs:attribute name="ProfileDesc" type="xs:string" use="required" />
      <xs:attribute name="ProfileName" type="xs:string" use="required" />
      <xs:attribute name="ProfileType" type="xs:string" use="required" />
    </xs:complexType>
  </xs:element>
  <xs:element name="IISSection">
    <xs:complexType>
      <xs:attribute name="AnonymousUser" type="xs:string" use="required" />
      <xs:attribute name="ApplicationPoolName" type="xs:string" use="required" />
      <xs:attribute name="Port" type="xs:unsignedByte" use="required" />
      <xs:attribute name="VirtualDirectoryAlias" type="xs:string" use="required" />
      <xs:attribute name="WebsiteName" type="xs:string" use="required" />
      <xs:attribute name="WebsiteRoot" type="xs:string" use="required" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:28:23.743

您的 XML 命名空间`scg`实际上是指：

```
clr-namespace:System.Collections.Generic;assembly=mscorlib 
```

我怀疑您的架构验证器是否可以访问`mscorlib`程序集。

# ios - 睡眠时触发 NSTimer

> ID：11582327
> 
> 赞同：0
> 
> 时间：2012-07-20T15:25:32.057
> 
> 标签：ios, nstimer

我有一个 NSTimer 倒计时并在达到 0 时触发一个方法。但是当我按下 iPhone 上的睡眠按钮时，它会暂停计时器并在我重新唤醒 iPhone 时继续它。

当 iPhone 处于“睡眠”状态时，NSTimer 是否也有可能触发 - 类似于默认 Time-App 中的 Timer-Function？

或者我可以“伪造”睡眠模式，使屏幕变暗并且计时器继续吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T19:57:16.273

您可以通过明确声明在后台任务中运行计时器来保持计时器运行，前提是计时器不超过 Apple 指定的后台任务时间限制。我记得读到这大约是。10 分钟。

请参阅“在后台执行有限长度任务”部分下的文档 [http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# c# - With Autofac, how do I enable property injection on a single mvc controller after RegisterControllers has been called?

> ID：11582331
> 
> 赞同：2
> 
> 时间：2012-07-20T15:25:46.270
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, autofac

I'm calling Autofac.mvc.integration extension method registercontrollers in the global.asax startup

```
builder.RegisterControllers(Assembly.GetExecutingAssembly()); 
```

Notice propertiesAutowired is not being applied. I need to enable property injection on a single controller type. How can I do that? Do I re-register the type? Unregister and reregister? I'm fearful of breaking something if I apply prop injection to all controllers at once. Any tips, tricks, code, links, etc.. are always appreciated. Cheers!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:31:01.000

来自 Autofac wiki：如果多个组件公开相同的服务，Autofac 将使用最后注册的组件作为该服务的默认提供者。

所以我认为您可以随时使用 propertiesAutowired 重新注册控制器以覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:34:33.353

您可以在自动注册后手动注册该控制器。

# python - Python - 如果缺少字符串，如何排除进程

> ID：11582336
> 
> 赞同：0
> 
> 时间：2012-07-20T15:25:59.077
> 
> 标签：python, python-2.7

大家好，我是这个地方的新手，也是 Python 的新手。我一直在研究一个程序，有点卡住了。我有很多 .txt，它们看起来像这样

```
# "name" "number1" "number2" "number3" 
```

这些 .txt 提供了允许我绘制图表的信息。我有绘制图表等的代码。我要做的就是排除那些没有“number2”和“number3”之一/两者的.txt 是否有任何代码允许我这样做？我已经断线了

```
# "name" "number1" "number2" "number3" 
```

使用 split() 按空间向下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:36:01.747

如果中的行`.txt`如所写，那么这将起作用：

```
with open('filename.txt') as file:
    for line in file:
        if len(line.split()) == 5:
            #do something- these lines are the right length (assuming the line includes the '#' sign) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:39:18.550

如果我理解你的话，一个基本的 python 测试`if "number2" in line_split and "number3" in line_split`应该是好的。

# c# - LINQ 中的动态查询

> ID：11582337
> 
> 赞同：2
> 
> 时间：2012-07-20T15:26:02.220
> 
> 标签：c#, linq, linq-to-sql

我在 Web 表单中有四个按钮，它们的目的是分别加载第一条、上一条、下一条和最后一条记录。他们通过获取表单中加载的当前 ID 并根据需要执行此操作。我正在使用 Linq to SQL。下面是我用于 NEXT 记录的代码，如果我想按 ID 加载下一条记录，它可以正常工作。

```
var dx = new DataModelDataContext();
List<Dog> dogList = dx.Dogs.AsEnumerable().ToList();

try
{
    return
        dogList.SkipWhile(x => x.Id != dogId).Skip(1).FirstOrDefault().Id.ToString(
            CultureInfo.InvariantCulture);
}
catch
{
    return null;
} 
```

我再说一遍，对于前面的场景，这段代码可以正常工作。

场景发生了变化，我现在必须根据包含表单属性（名字、姓氏、性别等）的下拉列表使用前面提到的按钮检索记录，所以它不再是一个函数目的是通过 ID 定位下一条记录。

我正在考虑创建一个 LoadNextRecord(searchParameter,TextboxValue) 以便根据下拉列表中指定的属性定位下一条记录。

但是，是否可以动态指定要比较数据的属性？

例如：x =>x.[searchParameter] != textboxvalue

我知道这可以使用动态 sql...但是我想知道是否可以使用 LINQ。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:32:32.460

如果您使用[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)是可能的。通过[在此处下载示例](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)，您将在 zip 中的以下路径找到一个文件：`LinqSamples\DynamicQuery\DynamicQuery\dynamic.cs`. 通过添加该文件并正确使用，您可以获得一些`IQueryable`扩展方法，允许您以字符串格式表达条件。在 zip 中有关于如何使用的示例。使用此解决方案，您会遇到所谓的“魔术字符串”，但不是那么“魔术”，因为 linq 表达式是在幕后编译的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:36:09.543

您可以在基类上放置一个接口，该接口公开一个 searchParameter() 成员。

```
var searchValue = dogId;
return 
    dogList.SkipWhile(x => x.searchParameter() != searchValue).Skip(1).FirstOrDefault().Id.ToString(CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:36:39.470

你可以使用反射

```
 var dx = new DataModelDataContext();
        List<Dog> dogList = dx.Dogs.AsEnumerable().ToList();

        string PropetyToCheck = "MyProperty";

        PropertyInfo property = typeof(Dog).GetProperty(PropetyToCheck);

        try
        {
            return
                dogList.SkipWhile(x => property.GetValue(x, null) != dogId).Skip(1).FirstOrDefault().Id.ToString(
                    CultureInfo.InvariantCulture);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:35:29.113

编辑**对不起，误读了问题，反思会更好。

编辑***

实际上，不，您可以将组合框绑定到一组具有谓词属性的对象，然后 onchange / button 事件（无论您使用什么来转到下一条记录），您都可以将对象从组合框中取出，并在里面使用它的谓词linq 方法。

这确实意味着为您要跳过的每个属性维护一组对象，但是如果您想向组合框添加另一个对象，则必须做一些工作。

```
Dictionary<string, Predicate<YourType>> filters = new ...
filters.Add("YourProp", x => x.yourProp == "blah blah");

Combobox box = new ...
box.ValueMember = "Value";
box.DispayMember = "Key";
box.DataSource = filters;

var pred = box.SelectedValue as Predicate<YourType>;
if (pred != null)
{
    GoToNextRecord(pred);
} 
```

然后在linq方法中......

```
dogs...Skip(pred)...; 
```

# html - 元标记解释：http-equiv 和 charset

> ID：11582344
> 
> 赞同：6
> 
> 时间：2012-07-20T15:26:16.547
> 
> 标签：html

哪个最好？有什么区别？

```
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

或者

```
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

另一件事，我看到 Viewport 元标记和元 http-equiv 标记没有像 charset 和其他元标记一样获得 /> 结束标记......这是为什么呢？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T15:28:19.583

第二个更好，因为它更简洁。它在 HTML5 中以这种方式标准化。

至于以`/>`: 结尾的标签，它是什么标签没有区别。没有标签必须像 HTML5 中那样关闭。在过去的 XHTML 时代，*所有*这些标签都必须像这样关闭，因为 XHTML 与 XML 相关。

因此，要点是：

1.  使用 HTML5 文档类型：`<!DOCTYPE html>`- 这不是很好很简单吗？
2.  绝对使用`<meta charset="utf-8">`- 更简洁，更优...
3.  无需关闭标签`/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:05:39.010

参考：[http ://www.w3schools.com/html5/tag_meta.asp](http://www.w3schools.com/html5/tag_meta.asp)

HTML 4.01：meta http-equiv="content-type" content="text/html; charset=UTF-8"
HTML5：meta charset="UTF-8"

所以第二个是小（html5）和最新的

# xamarin.ios - 为什么 MvvmCross MvxGeoLocationWatcher 不返回速度或方位？

> ID：11582345
> 
> 赞同：0
> 
> 时间：2012-07-20T15:26:17.320
> 
> 标签：xamarin.ios, xamarin.android, mvvmcross

我注意到 Android 和 iOS 的 MvvmCross 框架 MvxGeoLocationWatcher 不返回速度或方位值。我已经看到Android上的代码被注释掉了，因为将这些值放在Android Location对象的MvxGeoLocation对象中，这是有原因的吗？有什么我想念的吗？

# 解决了

Mvx(Touch/Android)GeoLocationWatcher 中缺少以下代码。

在安卓中

```
position.Coordinates.Speed = androidLocation.Speed;
position.Coordinates.Heading = androidLocation.Bearing; 
```

在 iPhone 中

```
position.Coordinates.Speed = location.Speed;
position.Coordinates.Heading = location.Course; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:15:21.823

YAGNI 是为什么... Thar 代码是为不需要它的项目构建的。

* * *

当前的 geolocationwatcher 只是一个核心实现。它是作为一个项目的一部分编写的，该项目只需要一次性的相当粗略的位置信息。一些代码也是从 chrisntr 的移动扩展项目中借来的。因为那个原始项目不需要方位或速度信息（也可能是因为我们的一些测试手机行为不端），所以我们没有包含该功能。

* * *

如果您当前的项目需要更多功能，那么最简单的转发路径可能是实现符合您需求的新地理定位观察器 - 您可能可以从现有示例开始构建此代码。

另一种选择可能是在 xamarin 的移动 API 库中围绕位置代码包装一些接口。

如果您这样做，那么我很乐意看到您的代码作为开源代码被推回 - 无论是在 mvx 内部、作为插件还是作为单独的项目。

PS对不起打字...我在手机键盘上...

# python - Google Blogger API：AccessTokenRefreshError:invalid_grand 消息

> ID：11582357
> 
> 赞同：1
> 
> 时间：2012-07-20T15:26:59.963
> 
> 标签：python, blogger, google-data-api, google-api-python-client

我正在将 google-python-client-api 用于 Blogger API（服务帐户 - OAuth）。

这是我的代码（这是我的任务 api[示例](http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py)）

```
import httplib2
import pprint
import sys

from apiclient.discovery import build
from oauth2client.client import SignedJwtAssertionCredentials

f = file("privatekey.p12", "rb")
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
    "2-abcdr@developer.gserviceaccount.com",
    key,
    scope = "https://www.googleapis.com/auth/blogger")

http = httplib2.Http()
http = credentials.authorize(http)

service = build("blogger", "v3", http=http) 
```

当我运行这段代码时，它的显示

```
Message File Name   Line    Position    
Traceback               
    <module>    D:\Code\myScripts\py\gData.py   20      
    build   build\bdist.win32\egg\apiclient\discovery.py    191     
    new_request build\bdist.win32\egg\oauth2client\client.py    402     
    _refresh    build\bdist.win32\egg\oauth2client\client.py    569     
    _do_refresh_request build\bdist.win32\egg\oauth2client\client.py    625     
AccessTokenRefreshError: invalid_grant 
```

有什么问题，我应该如何解决？

我什至尝试`tasks.py`了示例代码..它甚至显示相同的错误

*我非常确定服务帐户电子邮件地址是正确的*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:53:00.273

我在查询 BigQuery 时遇到了类似的问题。从互联网上存在的少量文档来看，这似乎是一个问题，即分辨率差的时钟会导致时序错误，从而使 SignedJWTCredentials 无效。一种建议的解决方案是确保您的时钟计时器与 ntp 同步。由于我正在部署到 Heroku，我的解决方案是优雅地失败然后重试。

另请参阅[https://code.google.com/p/google-api-php-client/wiki/OAuth2#Solving_invalid_grant_errors](https://code.google.com/p/google-api-php-client/wiki/OAuth2#Solving_invalid_grant_errors)

# r - R中逐年直方图的基于值的配色方案

> ID：11582359
> 
> 赞同：1
> 
> 时间：2012-07-20T15:27:02.553
> 
> 标签：r, colors, histogram

我在 R 中使用 ggplot2 来构建一些测试结果的直方图。现在我有一个表 Glucose_Results2 的逐年分析，它有一个 Value 列和一个 Year 列（以及很多行）。

```
Gval2 <- read.csv('Glucose_Results2.csv', sep = ',', header=T)
Gdist = qplot(Value, binwidth=10, data=Gval2, geom="histogram", 
  main="Distribution of Glucose Levels",
  xlab="Glucose Levels in mg/dl",
  ylab="Frequency")
Gval2$Year = factor(Gval2$Year)
Gdist + facet_wrap( ~ Year) 
```

这给了我从 2005 年到 2012 年的图。我有兴趣改变这些图的配色方案以指示每年的参考范围内的值（见下文）。因此，对于 2005 年，我希望 70 到 110 之间的值的 bin 为红色，而该范围之外的 bin 可以保持黑色。

```
>  Gref2
  REFERENCE_LOW REFERENCE_HIGH REFERENCE_YEAR
1            70            110           2005
2            70            110           2006
3            70            110           2007
4            70            110           2008
5            70            110           2009
6            70            100           2010
7            70            100           2011
8            70            100           2012 
```

只有几周的 R 经验，我真的不知道如何做到这一点。

理想情况下，这将包括参考高和参考低的标签，或者在参考范围内影响 red = 的东西，但我并不过分担心这一点。我想要的是一个解决方案，它可以读取上表并根据直方图的年份选择适当的参考范围（尽管如果归根结底，我可以手动输入数字）。

感谢您阅读本文和任何回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:30:26.490

使用 ggplot 来控制颜色，最简单的方法是将变量放入数据框中，该变量指示它属于哪个组（参考范围内或参考范围外组）。这可以通过一系列步骤来完成。首先，对于每种情况，根据年份匹配适当的限制。

```
Gboth <- merge(Gval2, Gref2, by.x="Year", by.y="REFERENCE_YEAR") 
```

这匹配，对于 的每一行`Gval2`，适当的行是通过将in的列与 in 的列`Gref2`匹配来定义的。然后可以使用值和参考限制制作指标列。我已经把它作为一个标记因素，以便以后让事情变得更容易，但这并不是绝对必要的。`Year``Gval2``REFERENCE_YEAR``Gref2`

```
Gboth$within <- factor(Gboth$REFERENCE_LOW < Gboth$Value & 
                       Gboth$Value <= Gboth$REFERENCE_HIGH,
                       levels = c(FALSE, TRUE),
                       labels = c("Outside reference range",
                                  "Within reference range")) 
```

现在我可以使用这个变量来指定颜色（实际上是填充，因为对于直方图来说，颜色是条形周围线条的颜色，而填充是条形中填充的颜色）。另外，我已经翻译`qplot`成完整的`ggplot`语法。在您更熟悉语法之前，它`qplot`有助于从命令转换，但它没有那么富有表现力。`plot`如果你是从头开始学习，你不妨跳过它。

```
ggplot(Gboth, aes(x=Value)) +
  geom_histogram(aes(fill=within), binwidth=10) +
  facet_wrap( ~ Year) +
  scale_x_continuous("Glucose Levels in mg/dl") +
  scale_y_continuous("Frequency") +
  scale_fill_manual("", breaks=c("Outside reference range", 
                                 "Within reference range"),
                    values = c("black", "red")) +
  opts(title = "Distribution of Glucose Levels") 
```

对于 的一些组成值`Gval2`，我得到一个看起来像的图表

![在此处输入图像描述](../Images/f0cac311af309999ec9a327c81f5ae53.png)

# c++ - 在字符串中使用空字符 (C++)

> ID：11582365
> 
> 赞同：10
> 
> 时间：2012-07-20T15:27:27.390
> 
> 标签：c++, string, arrays, null-character

我正在复习我的 C++，偶然发现了一个关于字符串、字符数组和空字符 ( `'\0'`) 的奇怪行为。以下代码：

```
#include <iostream>
using namespace std;

int main() {
    cout << "hello\0there"[6] << endl;

    char word [] = "hello\0there";
    cout << word[6] << endl;

    string word2 = "hello\0there";
    cout << word2[6] << endl;

    return 0;
} 
```

产生输出：

```
> t
> t
> 
```

幕后发生了什么？为什么字符串文字和声明的 char 数组存储`'t'`at 索引 6（在 internal 之后`'\0'`），但声明的字符串不存储？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:30:34.533

据我记得，前两个本质上只是一个数组，打印字符串的方式是继续打印直到`\0`遇到 a 。因此，在前两个示例中，您从字符串中第 6 个字符的点偏移量开始，但在您的情况下，您将打印出第 6 个字符，即`t`.

该类发生的情况`string`是，它将字符串的副本复制到它自己的内部缓冲区中，并通过将字符串从数组的开头复制到`\0`它找到的第一个来实现。因此`t`没有被存储，因为它在第一个之后`\0`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T15:32:00.480

因为`std::string`接受 a 的构造函数`const char*`将其参数视为 C 风格的字符串。它只是从中复制，直到遇到空终止符，然后停止复制。

所以你的最后一个例子实际上是在调用未定义的行为；`word2[6]`越过字符串的末尾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T15:30:20.497

您正在从 a `char*`（或衰减到那个的东西）构造一个字符串。这意味着适用 C 字符串的约定。那就是他们被`'\0'`终止了。这就是为什么`word2`只包含`"hello"`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-19T13:28:44.943

问题是您根本没有打印字符串 - 您正在打印单个字符。

```
char word [] = "hello\0there";//Array of char...
cout << word[6] << endl;      //So word[6] is the char't' (NOT a string)

string word2 = "hello\0there"; //std::string...
cout << word2[6] << endl;      //so word2[6] is the char 't' (NOT a string as well) 
```

因此，您调用的是“char”重载，而不是“char*”或“string”重载，而 NULL 字符与它完全无关：您只是打印单词的第 6 个字符，而word2 的第 6 个字符。

如果我正确阅读了您的意图，则您的测试应为：

```
cout << &(word[6]) (char*, should print "there")
cout << &(word2[6]) (char* as well, undefined behaviour pre-C++11) 
```

在 C++11 及更高版本中，这也将打印 "there" 并被[明确定义](https://stackoverflow.com/questions/6077189/will-stdstring-always-be-null-terminated-in-c11)

# html - 视口 iphone4/4s 和媒体查询

> ID：11582367
> 
> 赞同：0
> 
> 时间：2012-07-20T15:27:30.700
> 
> 标签：html, css, media-queries, viewport

我有一个网站，我创建了一个分辨率为 480 像素的媒体查询。iphone 4 正确选择了这个版本，但由于某种原因，它悬在页面上，它没有使用 iphone 4 的实际分辨率，即 640px 的宽度，它使用 320px 的宽度。（我在某处读到它是为了向后兼容为 iphone 3 开发的应用程序）

有没有办法使用视口或媒体查询来纠正这个问题？非常感谢戴夫

这是我当前的视口：

```
<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=5.0; minimum-scale=0.5; target-densityDpi=device-dpi" /> 
```

媒体查询

```
@media only screen and (max-width: 480px) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:22:47.020

视口元“target-densitydpi=device-dpi”目前仅适用于 android 平台。就目前而言，iOS 没有等价物。

您可以使用双像素密度媒体查询来实现类似的目标，以 iPhone 为目标

```
@media screen and (-webkit-device-pixel-ratio: 2) {} 
```

然后在 CSS 中缩小所有内容。

如果你走这条路线，使用 % 和 EM 缩放网站上的所有内容，从长远来看可能会为你节省大量工作。

# java - Selenium 选择作为字符串传递的变量的下拉选项

> ID：11582371
> 
> 赞同：0
> 
> 时间：2012-07-20T15:27:56.150
> 
> 标签：java, drop-down-menu, selenium

背景：

*   卡片纸 - 这包含程序的详细信息、股票的位置和股票的国家
*   客户销售卡屏幕 - 当您向客户销售新卡时，您必须输入他们的地址。输入他们的国家/地区后，特定字段（州/地址第 2 行/邮政编码）要么成为强制性的，要么成为自愿的。

问题是正在使用的两个国家数据库不相同并且可能不同。卡片库存中显示“德国”，出售卡片屏幕上显示“德国，联邦共和国”

我的流量：

1）搜索预发行卡以从卡片库存中获取国家 - 将此变量分配给字符串，即`aString`

2) 卖掉那张卡

3) 在国家/地区下拉框中 - 如果`aString`在该列表中，请选择`aString`，如果不是，则创建一个“else thens”列表以捕获变化

我的代码一直告诉我该字符串不在列表中，即使我在两个国家匹配的情况下测试它也会`countrydropdown`打印出来`false`

任何帮助将不胜感激

```
Boolean countrydropdown = "xpath=//select[@id='address.country']/option]".indexOf(aString) > 0;
System.out.println("countrydropdown");
System.out.println(countrydropdown);

<tr>
    <td class="labelFormReq">*</td>
    <td class="labelForm">Country:</td>
    <td>
        <select id="address.country" onchange="validateAndSubmit(this, 'selectCountryEvent');" name="address.country">
            <option value="">Please Select</option>
            <option value="4">Afghanistan</option>
            <option value="248">Alan Islands </option>
            <option value="8">Albania</option>
            <option value="12">Algeria</option>
            <option value="16">American Samoa</option>
            <option value="20">Andorra</option>
            <option value="24">Angola</option>
            <option value="660">Anguilla</option>
            <option value="10">Antarctica</option>
            <option value="28">Antigua and Barbuda</option>
            <option value="32">Argentina</option>
            <option value="51">Armenia</option>
            <option value="533">Aruba</option>
            <option value="36">Australia</option>
        </select>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T08:27:34.013

```
Boolean countrydropdown = "xpath=//select[@id='address.country']/option]".indexOf(aString) > 0; 
```

并不真正搜索元素。实际上，它`aString`在文本中查找`"xpath=//select[@id='address.country']/option]"`。为了让它返回任何有用的东西，你必须用一个方法调用来包装它。看到这个：

```
Boolean countrydropdown = selenium.isElementPresent("xpath=//select[@id='address.country']/option[text()='" + aString + "']"); 
```

使阅读更具可读性和约定性：

```
boolean countryDropdown = selenium.isElementPresent("xpath=id('address.country')/option[text()='" + aString + "']"); 
```

当`true`且仅当元素的`<option>`子`adress.country`元素存在且文本等于您的`aString`.

或者，如果你想要更少的单线：

```
boolean countryDropdown = false;

String[] countryOptions = selenium.getSelectOptions("id=address.country");
for (String option : countryOptions) {
    if (option.equals(aString)) {
        countryDropdown = true;
        break;
    }
} 
```

# cxf - Mule CXF代理服务问题

> ID：11582377
> 
> 赞同：0
> 
> 时间：2012-07-20T15:28:15.040
> 
> 标签：cxf, mule

启动 MuleServer 时出现以下错误 -

> 11:07:44.523 [main] 错误 org.mule.MuleServer -
> 
> * * *
> 
> 消息：在定义中搜索时未找到组件“{http://xyz.com/services/mvi}ProxyService”。检查端点中的命名空间属性是否丢失或具有无效值。可能的服务匹配：“[]”。定义的所有服务：[{http://xyz.com/services/mvi}MVIService] 类型：org.mule.api.lifecycle.InitialisationException 代码：MULE_ERROR-71999 JavaDoc： http: [//www.mulesoft.org/ docs/site/current3/apidocs/org/mule/api/lifecycle/InitialisationException.html](http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/lifecycle/InitialisationException.html) 对象：org.mule.module.cxf.config.FlowConfiguringMessageProcessor@4c372a96

我不确定为什么 Mule 正在寻找 ProxyService 而我已将 MVIServiceProxy 定义为组件类。我的 cxf 代理客户端配置是——

```
<flow name="mviProxyService">
    <http:inbound-endpoint address="http://localhost:61005/mvi/service" exchange-pattern="request-response">
        <cxf:proxy-service wsdlLocation="classpath:mvi.wsdl" namespace="http://xyz.com/services/mvi" />
    </http:inbound-endpoint>

    <component>
        <prototype-object class="com.xyz.services.mvi.MVIServiceProxy">
            <property key="requestDispatchUrl" value="jms://mviq.121.order?connector=jmsConnector" />
            <property key="responsePollUrl" value="jms://mviq.async.service.reply?connector=jmsConnector" />
            <property key="serviceTimeout" value="90000" />
        </prototype-object>
    </component>
    <request-reply timeout="60000">
        <jms:outbound-endpoint queue="mviq.121.order" />
        <jms:inbound-endpoint queue="mviq.async.service.reply" exchange-pattern="one-way" />
    </request-reply>
</flow> 
```

=========== 修改流程 ================

```
<flow name="mviProxyService">
    <http:inbound-endpoint address="http://localhost:61005/mvi/service" exchange-pattern="request-response">
        <cxf:proxy-service wsdlLocation="classpath:mvi.wsdl" namespace="http://xyz.com/services/mvi" />
    </http:inbound-endpoint>

    <component class="com.xyz.services.mvi.MVIServiceProxy" />
    <request-reply timeout="60000">
        <jms:outbound-endpoint queue="mviq.121.order" />
        <jms:inbound-endpoint queue="mviq.async.service.reply" exchange-pattern="one-way" />
    </request-reply>
</flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:52:15.413

您需要`service`在`cxf:proxy-service`. 这是您在 WSDL元素的`name`属性中找到的值。`wsdl:service`

您的组件也不需要实现`org.mule.api.lifecycle.Callable`. 只要有一个接受`javax.xml.stream.XMLStreamReader`参数的公共方法，您就可以访问 XML 有效负载。

# android - 从 DialogFragment 接收回（到 Fragment）数据的最佳方式是什么

> ID：11582378
> 
> 赞同：2
> 
> 时间：2012-07-20T15:28:18.187
> 
> 标签：android

我正在与一个简单的想法斗争几天，比如从`DialogFragment`. 首先，我尝试将 a`DialogFragment`作为嵌套类，但它发生在方向更改时失败。然后我决定用户`interfaces`将 a 传递`listener`给 a `DialogFragment`，但这里有一个关于如何坚持`listener`after的问题`orientation change`。然后这里有人建议使用，但由于[已知问题](http://code.google.com/p/android/issues/detail?id=17423#c1)`setTargetFragment()`，它也不起作用。

这是一个很常见的任务，你们如何从`DialogFragment`s 中获取数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:52:31.943

使用接口和连接`onAttach(Activity)`肯定是可行[的，谷歌给出的示例](http://developer.android.com/training/basics/fragments/communicating.html)建议以这种方式在组件之间进行通信，但肯定有更好的方法来做事。[Square](https://squareup.com/)提出了一个不错的解决方案，您可以在这里找到：

[http://corner.squareup.com/2012/07/otto.html](http://corner.squareup.com/2012/07/otto.html)

它是一个事件总线，您可以注册以接收事件通知，并真正解耦您的组件通信代码。

要从您的 DialogFragment 注册一个事件（例如，您已经获得了所需的数据并且您即将关闭，因此您的事件会通知所有相关方数据），您在 Activity 中要做的就是：

```
bus.register(this); 
```

然后在同一个活动中你会有类似的东西：

```
@Subscribe
public void dataChanged(DataChangedEvent event) {
    // TODO React to data.
} 
```

然后 DialogFragment，只需要调用类似：

```
bus.post(new DataChangedEvent(/*your data here*/)); 
```

并且您的活动会收到通知。没有将您的活动耦合到您的片段，也没有跟踪听众。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:42:33.353

使用接口绝对是最好的方法。在您的`DialogFragment`中，注册监听器，`onAttach(Activity)`即使在方向更改后，您也将能够收到您的回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:42:59.077

每当您将逻辑活动附加到片段管理器时，请务必使用标记的附加参数。然后，在`onCreate`您的 DialogFragment 中，只需调用`getFragmentManager().findFragmentByTag("parent fragment");`即可获取对父级的引用。

# javascript - 语法错误：使用 jquery 库的意外标记

> ID：11582388
> 
> 赞同：0
> 
> 时间：2012-07-20T15:28:34.783
> 
> 标签：javascript

我对使用 jquery 库的 Mac 样式菜单有一个大问题。代码如下：

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'/>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js' type='text/javascript'/>

<link href='http://sites.google.com/site/.../style.css' rel='stylesheet' type='text/css'/>
<!--[if lt IE 7]>
<style type="text/css">
.dock img { behavior: url(http://sites.google.com/site/.../iepngfix.htc) }
</script>
</style>
<![endif]-->

<div class="dock" id="dock">
 <div class="dock-container">
 <a class="dock-item" href="#"><img src="images/home.png" alt="home" /><span>Home</span></a> 
<a class="dock-item" href="#"><img src="images/email.png" alt="contact" /><span>Contact</span></a> 
<a class="dock-item" href="#"><img src="images/portfolio.png" alt="portfolio" /><span>Portfolio</span></a> 
<a class="dock-item" href="#"><img src="images/music.png" alt="music" /><span>Music</span></a> 
<a class="dock-item" href="#"><img src="images/video.png" alt="video" /><span>Video</span></a> 
<a class="dock-item" href="#"><img src="images/history.png" alt="history" /><span>History</span></a> 
<a class="dock-item" href="#"><img src="images/calendar.png" alt="calendar" /><span>Calendar</span></a> 
<a class="dock-item" href="#"><img src="images/rss.png" alt="rss" /><span>RSS</span></a> 
</div>
 </div>
 <!--dock menu JS options -->
 <script type="text/javascript">
 $(document).ready(
 function()
 {
 $('#dock').Fisheye(
 {
 maxWidth: 50,
 items: 'a',
 itemsText: 'span',
 container: '.dock-container',
 itemWidth: 40,
 proximity: 90,
 halign : 'center'
 }
 )
 }
 );
 </script> 
```

我还使用带有 jquery 库的幻灯片小工具，并从多个 jquery 实例开始 - 我相信 - 所有问题。我网站的网址：http://www.24-ores.com

问题是我试图用动画菜单栏而不是6个大图标制作一个mac风格的菜单。只是为了更广泛地了解我的代码，这里是幻灯片的代码，它也使用jquery库并试图避免冲突我使用第二个 jquery 1.3.2 库。顺便说一句，该代码可以工作。

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js' type='text/javascript'/>
<script>
    jq131 = jQuery.noConflict(true);
</script>

<script type='text/javascript'>

//<![CDATA[

/* ------------------------------------------------------------------------
s3Slider

Developped By: Boban Karišik -> http://www.serie3.info/
CSS Help: Mészáros Róbert -> http://www.perspectived.com/
Version: 1.0

Copyright: Feel free to redistribute the script/modify it, as
long as you leave my infos at the top.
-------------------------------------------------------------------------- */

(function(jq131){

jq131.fn.s3Slider = function(vars) {

var element = this;
var timeOut = (vars.timeOut != undefined) ? vars.timeOut : 10000;
var current = null;
var timeOutFn = null;
var faderStat = true;
var mOver = false;
var items = jq131("#" + element[0].id + "Content ." + element[0].id + "Image");
var itemsSpan = jq131("#" + element[0].id + "Content ." + element[0].id + "Image span");

items.each(function(i) {

jq131(items[i]).mouseover(function() {
mOver = true;
});

$(items[i]).mouseout(function() {
mOver = false;
fadeElement(true);
});

});

var fadeElement = function(isMouseOut) {
var thisTimeOut = (isMouseOut) ? (timeOut/2) : timeOut;
thisTimeOut = (faderStat) ? 10 : thisTimeOut;
if(items.length > 0) {
timeOutFn = setTimeout(makeSlider, thisTimeOut);
} else {
console.log("Poof..");
}
}

var makeSlider = function() {
current = (current != null) ? current : items[(items.length-1)];
var currNo = jq131.inArray(current, items) + 1
currNo = (currNo == items.length) ? 0 : (currNo - 1);
var newMargin = $(element).width() * currNo;
if(faderStat == true) {
if(!mOver) {
jq131(items[currNo]).fadeIn((timeOut/6), function() {
if($(itemsSpan[currNo]).css('bottom') == 0) {
jq131(itemsSpan[currNo]).slideUp((timeOut/6), function() {
faderStat = false;
current = items[currNo];
if(!mOver) {
fadeElement(false);
}
});
} else {
jq131(itemsSpan[currNo]).slideDown((timeOut/6), function() {
faderStat = false;
current = items[currNo];
if(!mOver) {
fadeElement(false);
}
});
}
});
}
} else {
if(!mOver) {
if($(itemsSpan[currNo]).css('bottom') == 0) {
jq131(itemsSpan[currNo]).slideDown((timeOut/6), function() {
jq131(items[currNo]).fadeOut((timeOut/6), function() {
faderStat = true;
current = items[(currNo+1)];
if(!mOver) {
fadeElement(false);
}
});
});
} else {
jq131(itemsSpan[currNo]).slideUp((timeOut/6), function() {
jq131(items[currNo]).fadeOut((timeOut/6), function() {
faderStat = true;
current = items[(currNo+1)];
if(!mOver) {
fadeElement(false);
}
});
});
}
}
}
}

makeSlider();

};

})(jq131);

//]]>
</script>

<script type='text/javascript'>
jq131(document).ready(function() {
jq131(&#39;#s3slider&#39;).s3Slider({
timeOut: 10000
});
});
</script>

<style type='text/css'>
#s3slider {
background:#000;
border:1px solid #000033;
width: 320px;
height: 230px;
position: relative;
overflow: hidden;
}
#s3sliderContent {
width: 320px;
position: absolute;
top:-1px;
padding: 0px;
margin-left: 0;
}
.s3sliderImage {
float: left;
position: relative;
display: none;
}
.s3sliderImage span {
position: absolute;
left: 0;
font: 17px Trebuchet MS, sans-serif;
padding: 1px 0px;
width: 320px;
background-color: #000;
filter: alpha(opacity=80);
-moz-opacity: 0.8;
-khtml-opacity: 0.8;
opacity: 0.8;
color: #fefefe;
display: none;
bottom: 0;
text-align:center;
}
.clear {
clear: both;
}
</style> 
```

我将不胜感激对我的网站的任何帮助。我的网站的网址带有 6 个大图标而不是一个栏：www.24-ores.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:32:35.347

从我访问您的网站时看到的情况来看，“鱼眼”方法不存在。你错过了一部分。

`Uncaught TypeError: Object [object Object] has no method 'Fishey' http://www.24-ores.com/:702`

`Uncaught ReferenceError: cbb is not defined ads:5`

`Uncaught ReferenceError: cbb is not defined ads:5`

加载 jQuery 后，您需要在页面的某处包含鱼眼脚本。从我看到的情况来看，您编写的语法看起来不错。

**编辑**只是好奇，尝试`fisheye`而不是`Fisheye`.

# android - 为什么 URLConnection 会在 6 分钟以上而不是 5 秒后超时？

> ID：11582390
> 
> 赞同：7
> 
> 时间：2012-07-20T15:28:46.413
> 
> 标签：android, httpurlconnection, urlconnection, android-networking

我正在从我的应用程序中逐字复制此方法，该方法尚未完成，但如果事情进展不顺利，它确实会尝试为我提供超时堆栈跟踪：

```
protected boolean isHttpAlive()  {
  boolean isHttpOk = false;

  HttpURLConnection httpConnection = null;
  try {
    URL gurl = new URL("http://www.amazon.com/");
    URLConnection connection = gurl.openConnection();
    connection.setConnectTimeout(5 * 1000); // 5 seconds!
    httpConnection = (HttpURLConnection) connection;
    int responseCode = httpConnection.getResponseCode();
    if (responseCode == HttpURLConnection.HTTP_OK)
      isHttpOk = true;
  } 
  catch (Exception e) {                    
    e.printStackTrace();
  }
  finally {
    if (httpConnection != null)
      httpConnection.disconnect();
  }

  return isHttpOk;
} 
```

现在在我的一个测试设备（Droid）上，当出现问题时，我确实得到[了异常](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout%28int%29)，但只是在**6 分 36 秒**之后，而不是我在上面的代码中设置的 5 秒。

为`getResponseCode()`.

为什么？

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:23:15.463

我最好的猜测是，您要连接的 URL（在本例中为 Amazon）有多个 IP 地址。

根据[文档](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout%28int%29)中的警告：

> 如果主机名解析为多个 IP 地址，则此客户端将按 RFC 3484 顺序尝试每个地址。如果连接到这些地址中的每一个都失败，**则在连接尝试引发异常之前将经过多次超时。**同时支持 IPv6 和 IPv4 的主机名始终至少有 2 个 IP 地址。

* * *

编辑：
我仍在研究这个，因为我想将我的应用程序`HTTPClient`从`URLConnection`. 在您的情况下，我对 6 分钟以上的超时不满意。

我也偶然发现了[这个博客](http://eventuallyconsistent.net/2011/08/02/working-with-urlconnection-and-timeouts/)。他建议`connection.setReadTimeout(READ_TIMEOUT_MILLISECONDS);`也添加，不知道这是否对您的情况有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T15:47:36.860

这个代码之王对于测试连接不是很有用。连接不良的原因有很多（ip 堆栈的每一层都可能有问题）。一个例子：你可以建立一个连接并每秒接收一个字节，没有超时但对用户来说不是很有趣......如果你使用“www.amazon.com”作为测试，他们可以对你开玩笑（我我自己会这样做;D）

# windows - 流星捆绑错误（Windows）

> ID：11582391
> 
> 赞同：1
> 
> 时间：2012-07-20T15:28:50.767
> 
> 标签：windows, meteor

通过 Windows 安装程序安装 Meteor 0.3.7 我在 Windows 8 和 Windows Server 2008 中有完全相同的错误 步骤：1）安装 Meteor 2）创建应用程序 3）捆绑 4）错误

有关详细信息，请参阅屏幕截图

![错误](../Images/e4808c58db39b2736f668fc5bb985259.png)

更新：坏消息。Windows 版本的流星尚不支持捆绑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:22:54.190

这里似乎有两个不同的问题。首先是 Meteor 无法运行“tar”。您是否安装了“tar”程序？在提示符下运行“tar”会发生什么？

第二个似乎是 Meteor 的 files.rm_recursive 函数的问题。它正在尝试删除 C:\files2\ddd.meteor\local\build_tar\bundle\server 目录，但该目录不是空的，即使它已经尝试删除其中的所有文件。您可以查看该目录并查看剩下的内容（包括默认情况下可能隐藏的文件）吗？我还不够 Windows 专家在这里知道正确的命令。例如，我知道在 Mac 上这个目录会有一个“.bundle_version.txt”文件；也许 Windows 上的 rm_recursive 函数错过了删除该文件？

# ruby-on-rails - 我应该如何检查 gravatar 是否存在？

> ID：11582395
> 
> 赞同：8
> 
> 时间：2012-07-20T15:29:10.533
> 
> 标签：ruby-on-rails, gravatar

使用这个 gem [https://github.com/sinisterchipmunk/gravatar](https://github.com/sinisterchipmunk/gravatar) 我如何检查指定电子邮件的 gravatar 是否存在？我想我错过了一些强制默认选项？因为这

```
url = Gravatar.new("generic@example.com").image_url 
```

总是返回一张图片

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-22T11:45:07.127

如果人们想知道如何在没有任何宝石的情况下做到这一点：

诀窍是使用错误的默认图像获取 gravatar 图像，然后检查标题响应。它是通过 Net::HTTP ruby​​ 库实现的。

```
require 'net/http'

def gravatar?(user)
    gravatar_check = "http://gravatar.com/avatar/#{Digest::MD5.hexdigest(user.gravatar_email.downcase)}.png?d=404"
    uri = URI.parse(gravatar_check)
    http = Net::HTTP.new(uri.host, uri.port)
    request = Net::HTTP::Get.new(uri.request_uri)
    response = http.request(request)
    response.code.to_i != 404 # from d=404 parameter
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T16:47:36.307

查看该 gem 的文档，听起来您需要一个 API 密钥才能运行 exists 方法：

> 很好，但是在 en.gravatar.com/site/implement/xmlrpc 上宣传的 API 的其余部分怎么样？好吧，为此您需要用户的 Gravatar 密码或他们的 API 密钥：
> 
> api = Gravatar.new("generic@example.com", :api_key => "AbCdEfG1234")
> 
> api.exists?("another@example.com") #=> true or false，取决于指定的邮箱是否存在。

如果用户没有 gravatar，则会根据电子邮件为他们生成图像（至少这是我的经验）。我使用了 gem gravatar_image_tag - [http://rubygems.org/gems/gravatar_image_tag](http://rubygems.org/gems/gravatar_image_tag)，它可以让你更改默认的 gravatar 图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T09:18:51.230

```
if (response.code.to_i == 404)
  return false
else
  return true
end 
```

而不是整个块，只使用这个（作为最后一行）：

```
response.code.to_i != 404 
```

# windows-phone-7 - Windows Phone 中的 Windows Azure 存储

> ID：11582396
> 
> 赞同：1
> 
> 时间：2012-07-20T15:29:12.013
> 
> 标签：windows-phone-7, azure-storage

我正在尝试使用我的 Windows Phone 中的 Azure Blob 存储来进行概念验证。我安装了 NuGet 包[phone.storage](http://www.nuget.org/packages/Phone.Storage)并遵循了代码示例。尽管我收到一条错误消息，但尝试存储 blob 时：

> 服务器未能验证请求。
> 确保 Authorization 标头的值正确形成，包括签名。
> RequestId:aed05ab4-8ff0-4362-b49e-94a442c1e68b
> 时间:2012-07-20T15:25:32.3047397Z

错误消息时间比我的 PC 时间晚 1 小时 - 我位于英国，目前处于英国夏令时 (GMT+1)，所以我想知道这是否是一个问题？虽然当我在控制台应用程序中使用标准的 Windows Azure 存储包时，我可以很好地存储 blob。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:08:54.327

我有同样的问题！

要修复更改您的`region`and `language`，我必须从美国更改我的地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:21:03.897

我的猜测是你正在使用手机模拟器，它有某种 BST 错误？这种猜测可能吗？（如果您部署到实际手机而不是模拟器，它会起作用吗？）

# mysql - MySQL UPDATE 一个表，如果它们不相等，则使用另一张表中的值

> ID：11582397
> 
> 赞同：3
> 
> 时间：2012-07-20T15:29:17.037
> 
> 标签：mysql

我有两张桌子：

```
SELECT
    d.id,
    d.permission_lookup_id,
    d.permission_object_id,
    f.id,
    f.permission_lookup_id,
    f.permission_object_id
FROM
    folders f
LEFT JOIN
    documents d
    ON f.id = d.folder_id
WHERE
    d.permission_lookup_id != f.permission_lookup_id OR
    d.permission_object_id != f.permission_object_id 
```

从理论上讲，如果一切正常，这应该不会返回任何结果，但事实并非如此，我收到了数十万个结果（目前为 407,343）。我需要更新`documents`表，以便`permission_lookup_id`匹配`folders`'s`permission_lookup_id`和同样 for `permission_object_id`，基于`documents.parent_id`外键约束。

我尝试了以下查询但收效甚微：

```
UPDATE 
    folders f
LEFT JOIN
    documents d
    ON f.id = d.folder_id
SET
    d.permission_lookup_id = f.permission_lookup_id,
    d.permission_object_id = f.permission_object_id
WHERE
    d.permission_lookup_id != f.permission_lookup_id OR
    d.permission_object_id != f.permission_object_id 
```

运行后它告诉我有 70,986 行受到影响，407343 行匹配，但我仍然有第一个选择查询的结果。

编辑：以下两个查询都返回 0 行：

`SELECT * FROM folders WHERE permission_lookup_id IS NULL OR permission_object_id IS NULL;`

`SELECT * FROM documents WHERE permission_lookup_id IS NULL OR permission_object_id IS NULL;`

空白值也是如此。

编辑 2：在我原来的选择/更新查询中犯了一个业余错误。在 WHERE 子句中，我有：

```
WHERE
    d.permission_lookup_id != f.permission_lookup_id OR
    d.permission_object_id != f.permission_lookup_id 
```

我应该有的地方

```
WHERE
    d.permission_lookup_id != f.permission_lookup_id OR
    d.permission_object_id != f.permission_object_id 
```

这导致我收到误报，并且只会导致更新通过并更新每一列，无论是否需要。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:37:14.870

这种替代语法怎么样：

```
UPDATE 
    folders f, documents d
SET
    d.permission_lookup_id = f.permission_lookup_id,
    d.permission_object_id = f.permission_object_id
WHERE
    f.id = d.folder_id AND (
    d.permission_lookup_id != f.permission_lookup_id OR
    d.permission_object_id != f.permission_lookup_id) 
```

[手册](http://dev.mysql.com/doc/refman/5.0/en/update.html)说 JOIN 子句是可以的，但我很想知道是否有任何区别。

> 前面的示例显示了使用逗号运算符的内连接，但多表 UPDATE 语句可以使用 SELECT 语句中允许的任何类型的连接，例如 LEFT JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:42:43.337

来自任一表的是否有可能`permission_lookup_id`具有 NULL 值？如果是这样，您可能想尝试使用 NULL 安全运算符：

```
WHERE
    (NOT d.permission_lookup_id <=> f.permission_lookup_id) OR
    (NOT d.permission_object_id <=> f.permission_lookup_id) 
```

**更新**

一次尝试一个字段，只是为了查看和使用以下语法（这可能需要更长的时间才能运行）：

```
UPDATE folders f
SET f.permission_lookup_id =COALESCE((SELECT d.permission_lookup_id FROM documents d
                                      WHERE f.id = d.folder_id
                                      AND d.permission_lookup_id != f.permission_lookup_id),
                                      f.permission_lookup_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:44:57.023

尝试在查询中使用内连接而不是左连接，请告诉我您的 id 字段是否具有空值？如果是，那么它需要一种不同的方法

# android - 动态壁纸：OpenGL 或 Canvas

> ID：11582400
> 
> 赞同：1
> 
> 时间：2012-07-20T15:29:28.800
> 
> 标签：android

我想创建一个简单的动态壁纸，它有一个背景位图，周围有几个圆圈。（就像[ICS Phase 光束](https://play.google.com/store/apps/details?id=com.tribok.android.livewallpaper.icsclassic.lite&hl=en)壁纸一样）。

我已经在 Canvas 中完成了这项工作，而且速度不是很快，有时手机的滚动速度会有些慢。你认为我应该迁移到 OpenGL 吗？关于优化 Canvas 的任何提示？

# classloader - 由于其类加载策略，如何避免 Struts 1.3.x 中的 ClassCastException？

> ID：11582404
> 
> 赞同：0
> 
> 时间：2012-07-20T15:29:36.967
> 
> 标签：classloader, classcastexception, struts-1

**编辑：**我进行了更改，因为我认为我的问题可能缺少一些技术细节

**该问题出现在 Struts 1.3.x 中，描述如下：**

当修改与 Struts 相关的类（例如 ActionForm、Action 和/或我与它们一起使用的任何类）时，我会在测试我的修改时得到 ClassCastException（**无需重新启动我的 webapp**）。

如果我在进行相同的修改后重新启动我的 web 应用程序，那么没有例外，并且在测试时所做的更改是可见的。

**由于以下原因，这种行为被认为是正常的：**

如果进行了更改，我的 Web 容器 (weblogic) 配置为重新加载 servlet 和类

我假设对我的类进行修改时使用了不同的 ClassLoader。这可能会导致 ClassCastException。

**因此，每次我想测试我的源代码修改时，我都必须重新启动 webapp...**

**我想知道的是我该怎么做（编程模式？最佳实践？）以避免这种 ClassCastException 或避免重新启动 webapp 以查看我的更改？**

这是堆栈跟踪：

```
java.lang.ClassCastException: my.package.here.MyActionClassNameHere
    at org.apache.struts.chain.commands.servlet.CreateAction.getAction(CreateAction.java:65)
    at org.apache.struts.chain.commands.AbstractCreateAction.execute(AbstractCreateAction.java:91)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1914)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:463)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:821)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

我看过关于页面的**JRebel 。**这可能是一个解决方案，但我还没有准备好将它用于我的目的（这是使用 struts 1.3.x 进行的一些**非常简单的测试）。**

我将继续做一些并行测试，以更多地了解这个异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:07:00.227

这是您在某个时间点将一个类的实例加载到两个单独的类加载器中时所承担的风险。请参阅[http://zeroturnaround.com/blog/reloading-objects-classes-classloaders/](http://zeroturnaround.com/blog/reloading-objects-classes-classloaders/)并查找 ClassCastException。文章很好的解释了Java中类加载的核心。

至于 JRebel 以外的解决方案，您可能只需重新部署应用程序即可。您说应用程序足够小，因此不会花费太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:54:59.183

默认情况下，Struts 1.3（最新的 1.3.x）将操作类放在缓存中以优化性能（重新启动部署清除缓存）。这就是异常的原因，因为我修改的类是由与缓存中的前一个不同的类加载器加载的。

此异常发生在检索动作实例的步骤中（在堆栈跟踪中从此处开始）。

```
at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) 
```

[默认情况下，这个版本的 Struts 实现了责任链模式](http://wiki.apache.org/struts/ComposableRequestProcessor)（使用 xml 配置文件 chain-config.xml）。因此，[上面提到的请求处理器](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/chain/ComposableRequestProcessor.html)将动作实例检索（或实例化）委托给[CreationAction](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/chain/commands/servlet/CreateAction.html)实现（在 stactrace 中显示）：

```
at org.apache.struts.chain.commands.servlet.CreateAction.getAction(CreateAction.java:65) 
```

以下是在进行更改并且不想重新启动部署时避免 ClassCastException 的解决方案。

解决方案 1：

*   使用自定义类扩展 CreateAction 并重新定义其 getAction() 方法

*   在 getAction() 中：如果**super.getAction().getClass()的类加载器与新的类加载器不同，则通过调用****super.createAction()** 使其返回一个新实例*（这意味着我应该知道合格的类名使用 == 运算符进行比较时我的 Action 类，否则我不应该比较并始终使用 createAction 加载新的动作类）*

*   [使用自定义的chain-config.xml](http://struts.apache.org/1.3.10/faqs/newbie.html#chain)来指定使用自定义的[CreationAction](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/chain/commands/servlet/CreateAction.html)而不是默认的

解决方案 2：使用自定义类扩展[RequestProcessor](http://struts.apache.org/1.3.10/apidocs/org/apache/struts/action/RequestProcessor.html)并使用它而不是默认类（即更新 struts-config.xml 中的参数）

我认为只有在开发阶段才应该这样做（以节省一些测试时间），并且出于性能（和安全）原因应该避免在生产阶段。

我没有空闲时间来添加更详细的示例代码、配置文件等......我会尝试有一天（在其他地方）这样做。但可以肯定的是，我测试了这些，它为我的目的工作:)

# css - 整个部分的超链接（ie6/7 修复）

> ID：11582406
> 
> 赞同：0
> 
> 时间：2012-07-20T15:29:47.053
> 
> 标签：css, html

我想要一个包含图像和文本的框，并且可以在该区域的任何位置单击以使超链接起作用。这是一个示例小提琴：

[http://jsfiddle.net/N7RRr/](http://jsfiddle.net/N7RRr/)

如您所见，这适用于您闪亮的新浏览器！

但是，它在 IE 6/7 中不起作用，我试过谷歌搜索并没有找到答案，所以我希望你们中的一个人知道这是一种方法（请仅使用 CSS）

注意：我知道`<a>`标签不应该是 的父级`<section>`，但我真的可以在没有任何 javascript 的情况下使用此功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:30:42.820

我认为您需要将部分定义为块级元素......`section { display:block; }`因为 IE7/IE6 无法识别它并将其解析为内联。

编辑：还将 指定`a`为块级别并可能为其提供尺寸。

编辑#2：您还绝对需要 html 5 shiv，因为否则无法在较旧的 IE 中创建 HTML 5 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:42:55.917

这对你有用吗：http: [//jsfiddle.net/N7RRr/4/](http://jsfiddle.net/N7RRr/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:35:43.700

您是否正在为 IE6-7 创建节点？部分是 HTML5，因此您需要创建该节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:37:10.470

我相信，如果你没有链接[现代化器](http://modernizr.com/)（或一些这样的 javascript） ，你如何设计它们并不重要

这是因为较旧的 IE 版本会简单地忽略该`<section>`标签，因为他们不知道它。解决方法是创建一个。之后，您可以对其应用样式。现代化者为您做到这一点

抱歉，id 确实需要 javascript。

# .net - 如何从 WCF 服务返回流？

> ID：11582409
> 
> 赞同：5
> 
> 时间：2012-07-20T15:29:51.617
> 
> 标签：.net, wcf, stream, protobuf-net

我正在玩 protobuf-net 和 WCF。这是我创建的代码：

```
public class MobileServiceV2
{
    [WebGet(UriTemplate = "/some-data")]
    [Description("returns test data")]
    public Stream GetSomeData()
    {
        WebOperationContext.Current.OutgoingResponse.ContentType = "application/x-protobuf";

        var ms = new MemoryStream();
        ProtoBuf.Serializer.Serialize(ms, new MyResponse { SomeData = "Test data here" });
        return ms;
    }
}

[DataContract]
public class MyResponse
{
    [DataMember(Order = 1)] 
    public string SomeData { get; set; }
} 
```

当我查看 Fiddler 时 - 我可以看到正确的传出内容类型，并且一切看起来都不错，但我得到的响应是空的。IE 提示下载文件，此文件为空。序列化器不工作吗？还是我做的不对？

编辑：

我在方法中添加了以下代码，是的，它正确序列化。我如何从 WCF 返回流有问题..

```
using (var file = File.Create("C:\\test.bin"))
        {
            Serializer.Serialize(file, new MyResponse { SomeData = "Test data here" });
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T16:42:20.447

只需写入 MemoryStream，然后倒带即可。***在***这种情况下不要Dispose() 它：

```
var ms = new MemoryStream();
Serializer.Serialize(ms, obj);
ms.Position = 0;
return ms; 
```

然而，这确实意味着它在内存中缓冲。我可以*尝试*想出一些巫术来避免这种情况，但这会非常复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T16:04:17.113

如果我正确理解了这个问题，那么您正在尝试使用流式 WCF 绑定。在这种情况下，您可以尝试将数据拆分为单独序列化的块，并在客户端以相同的方式反序列化。唯一需要注意的是接收端 WCF 提供的 Stream 实现 - 您需要自己包装它并管理读取。以下是我用来促进这一点的一个类：

```
 public static class StreamingUtility
{

    public static IEnumerable<T> FromStream<T>(this Stream value, Action<T> perItemCallback = null)
    {

        List<T> result = new List<T>();
        StreamProxy sp = new StreamProxy(value);
        try
        {
            while (sp.CanRead)
            {

                T v = ProtoBuf.Serializer.DeserializeWithLengthPrefix<T>((Stream)sp, ProtoBuf.PrefixStyle.Base128);
                if (perItemCallback != null)
                    perItemCallback(v);

                result.Add(v);
            }
        }
        catch { }

        return result;
    }

    public static StreamingContent<T> SingleToStream<T>(this T value)
    {
        return new StreamingContent<T>(new T[] { value });
    }

    public static StreamingContent<T> ToStream<T>(this IEnumerable<T> value)
    {
        return new StreamingContent<T>(value);
    }

    public class StreamingContent<T> : Stream
    {
        private bool _canRead = true;
        private ManualResetEventSlim _dataIsReady = new ManualResetEventSlim(false);
        private bool _noMoreAdditions = false;
        private long _readingOffset = 0;

        //private IFormatter _serializer = new BinaryFormatter(null, new StreamingContext(StreamingContextStates.CrossMachine));
        private IEnumerable<T> _source = null;

        private MemoryStream _stream = new MemoryStream();

        public static StreamingContent<T> Clone(Stream origin)
        {
            return new StreamingContent<T>(origin);
        }

        private StreamingContent(Stream origin)
        {
            byte[] b = new byte[65536];

            while (true)
            {
                int count = origin.Read(b, 0, b.Length);

                if (count > 0)
                {
                    _stream.Write(b, 0, count);
                }
                else
                    break;
            }
            _noMoreAdditions = true;
        }

        public StreamingContent(IEnumerable<T> source)
        {
            if (!s_initialized)
            {
                StreamingUtility.Initialize();

                StreamingUtility.s_initialized = true;
            }

            _source = source.ToList();
            if (source.Count() > 0)
            {
                new Thread(new ParameterizedThreadStart(obj =>
                {
                    StreamingContent<T> _this = obj as StreamingContent<T>;
                    foreach (T item in _this._source)
                    {
                        lock (_this._stream)
                        {
                            if (_this._noMoreAdditions) break;
                            _stream.Seek(0, SeekOrigin.End);

                            ProtoBuf.Serializer.SerializeWithLengthPrefix<T>(_this._stream, item, ProtoBuf.PrefixStyle.Base128);

                            //_serializer.Serialize(_this._stream, item);
                            _dataIsReady.Set();
                        }
                    }

                    lock (_this._stream)
                    {
                        _this._noMoreAdditions = true;
                        _dataIsReady.Set();
                    }
                })) { IsBackground = true }.Start(this);
            }
            else
            {
                _canRead = false;
            }
        }

        public override bool CanRead
        {
            get { return _canRead; }
        }

        public override bool CanSeek
        {
            get { return false; }
        }

        public override bool CanWrite
        {
            get { return false; }
        }

        public override long Length
        {
            get
            {
                while (!_noMoreAdditions) Thread.Sleep(20);
                return _stream.Length;
            }
        }

        public override long Position
        {
            get
            {
                throw new Exception("This stream does not support getting the Position property.");
            }
            set
            {
                throw new Exception("This stream does not support setting the Position property.");
            }
        }

        public override void Close()
        {
            lock (_stream)
            {
                _noMoreAdditions = true;
                _stream.Close();
            }
        }

        public override void Flush()
        {
        }

        public override int Read(byte[] buffer, int offset, int count)
        {
            if (!CanRead) return 0;

            bool wait = false;

            lock (_stream)
            {
                wait = !_dataIsReady.IsSet && !_noMoreAdditions;
            }

            if (wait)
            {
                _dataIsReady.Wait();
            }

            lock (_stream)
            {
                if (!_noMoreAdditions)
                    _dataIsReady.Reset();

                if (_stream.Length > _readingOffset)
                {
                    _stream.Seek(_readingOffset, SeekOrigin.Begin);
                    int res = _stream.Read(buffer, 0, count);

                    if (_noMoreAdditions && count + _readingOffset >= _stream.Length)
                        _canRead = false;

                    _readingOffset += res;

                    return res;
                }
            }

            return 0;
        }

        public override long Seek(long offset, SeekOrigin origin)
        {
            throw new Exception("This stream does not support seeking.");
        }

        public override void SetLength(long value)
        {
            throw new Exception("This stream does not support setting the Length.");
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            throw new Exception("This stream does not support writing.");
        }

        protected override void Dispose(bool disposing)
        {
            try
            {
                lock (_stream)
                {
                    _noMoreAdditions = true;
                    _stream.Close();
                }
            }
            catch { }
        }
    }

    private class StreamProxy : Stream
    {
        private bool _canRead = true;
        private bool _endOfMessage = false;
        private Stream _internalStream;
        private int _readPosition = 0;
        private MemoryStream _storage = new MemoryStream();
        private int _writePosition = 0;

        public StreamProxy(Stream internalStream)
        {
            _internalStream = internalStream;
            byte[] initialRequest = new byte[1000];

            int length = _internalStream.Read(initialRequest, 0, 1000);

            if (length != 0)
                _storage.Write(initialRequest, 0, length);
            else
                _canRead = false;

            _writePosition = length;
        }

        public override bool CanRead
        {
            get { return _canRead; }
        }

        public override bool CanSeek
        {
            get { return false; }
        }

        public override bool CanWrite
        {
            get { return false; }
        }

        public override long Length
        {
            get { throw new NotImplementedException(); }
        }

        public override long Position
        {
            get
            {
                return _readPosition;
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public override void Flush()
        {
        }

        public override int ReadByte()
        {
            byte[] res = new byte[1];
            int g = Read(res, 0, 1);
            return res[0];
        }

        public override int Read(byte[] buffer, int offset, int count)
        {

            int res = 0;
            if (_readPosition + count > _writePosition)
            {
                /// add extra bytes to see if more data is available and we need to allow next read
                int readSize = _readPosition + count - _writePosition;

                if (readSize < 1024)
                    readSize = 1024;

                byte[] read = new byte[readSize];
                res = _internalStream.Read(read, 0, readSize);
                if (res > 0)
                {
                    _storage.Seek(_writePosition, SeekOrigin.Begin);
                    _writePosition += res;
                    _storage.Write(read, 0, res);

                }
                else if (res == 0)/// If the read returned 0, we're at the end
                {
                    _endOfMessage = true;

                }

                if (res > 0 && res < readSize)
                {
                    read = new byte[1024];
                    res = _internalStream.Read(read, 0, 1024);
                    if (res > 0)
                    {
                        _storage.Seek(_writePosition, SeekOrigin.Begin);
                        _writePosition += res;
                        _storage.Write(read, 0, res);

                    }
                    else if (res == 0)/// If the read returned 0, we're at the end
                    {
                        _endOfMessage = true;

                    }
                }
            }

            _storage.Seek(_readPosition, SeekOrigin.Begin);
            res = _storage.Read(buffer, offset, count);
            _readPosition += res;

            /// If end of message was reached and all the data was read from the
            /// internal storage, mark CanRead as false
            if (_readPosition >= _writePosition && _endOfMessage)
                _canRead = false;

            return res;
        }

        public override long Seek(long offset, SeekOrigin origin)
        {
            throw new NotImplementedException();
        }

        public override void SetLength(long value)
        {
            throw new NotImplementedException();
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            throw new NotImplementedException();
        }
    }
} 
```

要使用它，只需像这样调用 WCF 接口方法：

```
IEnumerable<SomeType> collection = ...
clannel.Method(collection.ToStream()); 
```

并像这样在接收端阅读它：

```
public void Method(Stream stream){
   IEnumerable<SomeType> coll = stream.FromStream<SomeType>();
} 
```

此实现仍在测试中，因此我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:43:46.050

请尝试这种方式

```
var ms = new MemoryStream();
using (var file = File.Create("C:\\test.bin"))
{
Serializer.Serialize(file, new MyResponse { SomeData = "Test data here" });
file.CopyTo(ms); 
}

return ms;//stream 
```

# android - ADB 看不到但可从 Windows XP 访问的 Android 设备

> ID：11582410
> 
> 赞同：8
> 
> 时间：2012-07-20T15:29:55.870
> 
> 标签：android, windows

我刚买了一台新的 Nexus 7 平板电脑，我正试图在上面安装我的第一个 Java 应用程序。但是，我陷入了一个非常基本的问题：ADB 看不到我的设备。当我检查我的工作站时，Windows 完美地检测到了平板电脑，我切换了 USB 端口，每一个都显示为设备，但 ADB 仍然看不到它。我重新启动，它仍然无法正常工作。对此有任何想法吗？

***更新***

实际上有两个问题。首先，我没有激活**USB 调试**模式。这就是为什么即使没有安装正确的 USB 驱动程序，我也可以从工作站使用平板电脑（作为简单的多媒体播放器）的原因。

其次，Windows XP 没有检测到驱动程序（即使我们指定了正确的存储库来搜索它）。[按照adap](https://stackoverflow.com/users/342605/adamp)描述的程序解决了这个问题

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T15:49:50.523

正如 Thomas K 所指出的，您需要从 SDK 管理器中为设备安装 ADB 驱动程序。还要确认设备上已启用 USB 调试，如 mihail 所述。

SDK 提供的基本 ADB 驱动程序是通用的，可以与任何 Android 设备一起使用。`android_winusb.inf`只需在下面的文件中添加适当的行，`extras/google/usb_driver`以使 Windows 在驱动程序安装期间识别设备硬件 ID。在 32 位 Windows 的 x86 部分或 64 位 Windows 的 amd64 部分下添加行。

对于 Nexus 7，您需要的配置是：

```
;Nexus7
%SingleAdbInterface%        = USB_Install, USB\VID_18D1&PID_4E42
%CompositeAdbInterface%     = USB_Install, USB\VID_18D1&PID_4E42&MI_01 
```

两条线上的重要部分都有 VID_XXXX 和 PID_YYYY。如果您要添加另一台 Android 设备，请首先在文件的正确部分复制上述行。您需要将硬件 ID 替换为设备的正确 ID。

打开设备管理器，找到没有安装ADB驱动的安卓设备，右键点击，选择属性。在详细信息选项卡下，从下拉列表中选择硬件 ID。您会看到一条类似于 的线`USB\VID_18D1&PID_4E42&MI_01`。将 VID_XXXX 部分和 PID_YYYY 部分复制到您在上面的 .inf 文件中添加的两行中。保存文件，然后更新设备的驱动程序并使用刚刚保存的 .inf 所在目录中的驱动程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:34:01.890

您需要适当的 ADB 驱动程序（顺便说一句：ADB =“Android 调试桥”）

请参阅：http:
[//developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)
[ADB 无法识别我的 Galaxy Nexus - Win7](https://stackoverflow.com/questions/8801829/adb-dosnt-recognize-my-galaxy-nexus-win7)

下载： http:
[//www.samsung.com/us/support/owners/product/SCH-I515MSAVZW](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)

（不要忘记在您的设备上启用调试 Settings> Applications> Development> USB-debugging ）

也很高兴知道：

> 注意：如果您在 Mac OS X 或 Linux 上进行开发，则无需安装 USB 驱动程序。要开始使用您的设备进行开发，另请阅读使用硬件设备。

如果您已经完成上述所有操作，这可能会对您有所帮助：
[https ://stackoverflow.com/a/11563780/1351347](https://stackoverflow.com/a/11563780/1351347)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T15:35:13.337

1.  你是说亚行吗？

2.  您是否在设备**设置->应用程序->开发->USB调试上启用了USB调试**

3.  您是否为 adb 接口安装了正确的 USB 驱动程序？如果没有检查[将我的设备连接到 PC 时出现问题？](https://stackoverflow.com/questions/7510471/problem-when-connecting-my-device-to-pc/7511988#7511988)了解更多信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T12:51:21.667

对我有用的是在 adb_usb.ini 中为我的设备添加条目。原来是嵌入在硬件ID中

所以 - 我的硬件 ID 是 USB\VID_ **1C9E** &PID_9E18&MI_01

我加了

0x1c9e

到 c:\users[user name].android 下的 adb_usb.ini 文件

完整的文件内容 -

```
# ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.
# USE 'android update adb' TO GENERATE.
# 1 USB VENDOR ID PER LINE.

0x1c9e 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T22:00:30.360

仍有问题？

在我的设备上打开 USB 调试并正确设置 Windows 驱动程序以识别设备后。我仍然无法让 ADB 识别我的 Insignia Flex 8 平板电脑。这是我必须做的： 创建（如果它不存在） - c:\documents and settings\your-user-name.android\adb_usb.ini 添加一行带有十六进制形式的 VID ID 值：my id值（从...设备管理器确定；右键单击android复合adb接口；属性；详细信息）为：USB\VID_2207&PID_0011&MI_00\9&1670302B&0&0000

所以我添加到 adb_usb.ini 的行是：0x2207

保存文件并重新启动 Eclipse（和/或 DDMS；左倒三角；重置 adb）。

完成此操作后，我的 NS-14T002 设备可用于调试我的应用程序。

更新-> 奇怪，当我最初写这个时，我没有看到上面的（相同的解决方案）（不知道这怎么不可见......）

# command-line - 有没有办法将 bundle show jquery-rails 的结果通过管道传输到 gnome-open 中？

> ID：11582414
> 
> 赞同：0
> 
> 时间：2012-07-20T15:30:13.357
> 
> 标签：command-line, terminal, bundler, pipe

我查看了几个在 linux 命令行中使用管道的在线帮助页面，但我无法得到任何工作。我对什么会起作用的最佳猜测如下：

```
bundle show jquery-rails | gnome-open 
```

但它失败了。相反，如果我运行`bundle show jquery-rails`然后复制结果，然后键入`gnome-open`然后粘贴，它可以正常工作。有没有办法将它组合成一个我可以从命令行运行的步骤？

*背景*

如果您想了解我为什么关心，请参阅以下问题：[如何使用 RVM (linux & gedit) 在 Rails3 中浏览 gem 的源代码](https://stackoverflow.com/questions/11546475)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:59:24.060

正如[您在 Ask Ubuntu 上发布的问题](https://askubuntu.com/questions/167818/using-pipe-with-bundle-show-and-gnome-open)中所述，您需要使用子命令。

```
gnome-open "$(bundle show jquery-rails)" 
```

# php - 如何为对象添加属性？

> ID：11582416
> 
> 赞同：0
> 
> 时间：2012-07-20T15:30:17.100
> 
> 标签：php, oop, object, attributes

我想知道如何将未在类中声明的属性添加到对象中。

让我解释 ：

我有我的订单：

```
 [0] => stdClass Object
( 
   [quantityBlack] => 3
   [quantityBlue] => 1
   [quantityGreen] => 0
   [quantityOrange] => 0
   [quantityPurple] => 0
   [quantityRed] => 0
   [dateOfOrder] => Fri, 06 Jul 12 22:21
   [user_id] => 5
   [comments] => Test
) 
```

我想用用户的属性替换 user_id，

所以我想做的是：

```
foreach ($data['orders'] as $key => $order){

        $data['orders']->$key???-> = $this->user_model->GetUsers(array('userId' => $order->user_id));

    } 
```

但我不知道最后如何专门针对单个对象（你看到关键？？？），我想获得相关用户的属性到该顺序。

我怎样才能做到这一点 ？

谢谢你 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:35:08.363

如果我正确理解您的数据结构，您正在寻求执行以下操作：

```
foreach($data['orders'] as $key => $order) {
    $data['orders'][$key]->user = $this->user_model->GetUsers(array('userId' => $data['orders'][$key]->user_id));
    unset($data['orders'][$key]->user_id);
} 
```

我假设 $data['orders'] 是一个包含一堆 stdClass 对象的数组，就像问题中引用的那样，因此为什么在这种情况下你会使用 $data['orders'][$key] 语法来在访问每个对象的属性之前先访问每个数组元素。

请注意，问题中的数据结构和您的意图都有些不清楚，因此如果这不能解决您的问题，您可能需要提供更多上下文。

# google-maps - 来自 XML 的 Google Maps API v3 标记未显示

> ID：11582419
> 
> 赞同：0
> 
> 时间：2012-07-20T15:30:31.697
> 
> 标签：google-maps, google-maps-markers

我正在尝试在地图上放置标记。这些标记是从在 onload 中读取的 XML 文件中获得的：

```
<stations>
 <station name="AKRON" state="CO" lat="40.150" lon="103.150" elev="1384.0"/>
 </stations> 
```

javascript如下：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html { height: 100% }
            body { height: 100%; margin: 0; padding: 0 }
            #map_canvas { height: 100% }
        </style>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"> </script>
        <script type="text/javascript">
            var map;
            //create map
            function initialize() {
                var mapOptions = {
                    center: new google.maps.LatLng(40.85, -96.75),
                    zoom: 8,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                this.map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);  

                //load xml file
                downloadUrl('raw_data.xml', function(data) {
                    var xml = xmlParse(data);
                    //get the lat lon data
                    var rowNodes = xml.getElementsByTagName("station");
                    for (var i = 0; i < rowNodes.length; i++) {
                        var latlng = new google.maps.LatLng(parseFloat(rowNodes[i].getAttribute("lat")),parseFloat(rowNodes[i].getAttribute("lon")));

                        createMarker(latlng);
                    }
                });             
            }

            function createMarker(latlng) {
                var marker = new google.maps.Marker({
                    map: map,
                    position: latlng
                });
            }

            function downloadUrl(url, callback) {
                var status = -1;
                var request = createXmlHttpRequest();
                if (!request) {
                    return false;
                }

                request.onreadystatechange = function() {
                    if (request.readyState == 4) {
                        try {
                            status = request.status;
                        } catch (e) {
                            // Usually indicates request timed out in FF.
                        }
                        if ((status == 200) || (status == 0)) {
                            callback(request.responseText, request.status);
                            request.onreadystatechange = function() {};
                        }
                    }
                }
                request.open('GET', url, true);
                try {
                    request.send(null);
                } catch (e) {
                    changeStatus(e);
                }
            };

            function createXmlHttpRequest() {
                try {
                    if (typeof ActiveXObject != 'undefined') {
                        return new ActiveXObject('Microsoft.XMLHTTP');
                    } else if (window["XMLHttpRequest"]) {
                        return new XMLHttpRequest();
                    }
                } catch (e) {
                    changeStatus(e);
                }
                return null;
            };

            function xmlParse(str) {
                if (typeof ActiveXObject != 'undefined' && typeof GetObject != 'undefined') {
                    var doc = new ActiveXObject('Microsoft.XMLDOM');
                    doc.loadXML(str);
                    return doc;
                }

                if (typeof DOMParser != 'undefined') {
                    return (new DOMParser()).parseFromString(str, 'text/xml');
                }

                return createElement('div', null);
            }

        </script>
    </head>
    <body onload="initialize()">
        <table border=1>
            <tr>
                <td>
                    <div id="map_canvas" style="width: 800px; height: 800px"></div>
                </td>
                <td width = 150 valign="top" style="text-decoration: underline; color: #4444ff;">
                    <div id="side_bar"></div>
                </td>
            </tr>
        </table>
        <a href="basic9.htm">Back to the tutorial page</a>
    </body>
</html> 
```

地图加载得很好，但没有显示任何标记。我已经进行了谷歌搜索，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:42:11.577

从您提供的 xml 中读取的 lat,lng 是“ `40.15,103.15`”，因此标记会在那里加载。您的地图中心位于 lat,lng " `40.85,-96.75`"。这就是为什么你看不到标记的原因。因此，要么缩小以查看标记，要么更改地图的中心

# c# - 如何在 C# 中从 httpHandlers 加载动态图像

> ID：11582424
> 
> 赞同：0
> 
> 时间：2012-07-20T15:30:44.200
> 
> 标签：c#, asp.net, image, httphandler

我有一个带有生成图像的库的 ASP.NET 应用程序。它的设置如下：

在 Web.config 中，我在**<httpHandlers>**部分有一个声明，如下所示：

```
<add path="My.image.aspx" verb="GET" type="MyProject.Handlers.MyImageHandler, MyProject" validate="false"/> 
```

这会将生成图像的代码链接到该路径，然后在我的 .aspx 页面上使用，如下所示：

```
<asp:Image ImageUrl="My.image.aspx" BorderWidth="0" ID="myImage" runat="server"/> 
```

正常查看此页面时，图像已正确加载。

但是，我需要将此图像输出到 PDF 文件，但是因为 PDF 不会正确解释带有该 URL 的页面 HTML（说它找不到资源，因为这些文件仅限于解释基本的 HTML/CSS），我想尝试在后面的代码中加载图像并以这种方式输出到 PDF。但是，我不知道如何在后面的代码中加载这个图像。我尝试了以下方法：

```
System.Drawing.Image img = System.Drawing.Image.FromFile("My.image.aspx"); 
```

但没有运气。有没有一种正确的方法可以从我指定的 httpHandler 后面的代码中加载这个图像？

**编辑：**我找到了一种解决方法，因为我无法从后面的代码中加载图像。相反，我刚刚使用 <asp:Image> 控件在页面上加载文件并触发处理程序。当处理程序创建 System.Drawing.Image 文件时，我可以将其添加到 Session 对象中，以便稍后在该页面上使用。但是，在不使用前端 ASP 控件的情况下，我仍然无法从后面的代码中触发所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:35:28.767

你 asp:image 有和 id 作为 myImage

所以在后面的代码中你可以这样使用

```
using (Bitmap theImage = new Bitmap("My.image.aspx"))
{
   using(MemoryStream stream = new MemoryStream())
   {
      theImage .Save(stream , System.Drawing.Imaging.ImageFormat.Png);
      stream .WriteTo(context.Response.OutputStream);
   }
} 
```

# mongodb-java - Java MongoDB 客户端和 MongoS 分片

> ID：11582426
> 
> 赞同：0
> 
> 时间：2012-07-20T15:30:55.437
> 
> 标签：mongodb-java

我知道，如果我使用 ServerAddresses 列表（使用[此函数](http://api.mongodb.org/java/2.7.3/com/mongodb/Mongo.html#Mongo%28java.util.List,%20com.mongodb.MongoOptions%29)）创建与 Java 中的 MongoDB 到副本集的连接`ReadPreference.SECONDARY`，客户端将平衡副本集之间的读取，更喜欢往返时间较短的节点（相同科罗拉多州，例如）。

但是，当我使用 为一堆 MongoS 服务器创建 MongoDB 客户端时`ReadPreference.SECONDARY`，所有读取/写入都转到列表中的第一个服务器，即使访问是跨 colo 并且 MongoS 存在于同一个 colo 中。

例如，如果我有三个 MongoS 服务器——SF1、SF2 和 NYC1（按此顺序）——我的客户只与 SF1 通信，无论他们是在 SF 还是 NYC。

在与 MongoS 服务器通信时，我是否需要配置一些东西或以不同的方式设置客户端？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:04:35.440

这是驾驶员的无意行为。驱动程序代码未检测到您正在传递 mongos 服务器列表，并将它们视为副本集。如果没有检测到辅助服务器，ReadPreference.SECONDARY 将向主服务器发送查询，这就是这里发生的事情：它检测到的第一个“主服务器”是列表中的第一个 mongos 服务器。没有一个 mongos 服务器标识为辅助服务器，因此它们被忽略。

因此，目前跨多个 mongos 服务器进行负载平衡的唯一方法是为每个服务器创建一个 Mongo 实例，并在应用程序代码中处理对每个服务器的查询分配。

另请注意，Java 驱动程序的下一个版本将包含对[https://jira.mongodb.org/browse/JAVA-381](https://jira.mongodb.org/browse/JAVA-381)的修复，它增加了对 mongos 故障转移的支持（尽管目前还没有负载平衡）

# c++ - 我对 C++ 中“&”运算符在指针/引用中的不一致应用感到困惑？

> ID：11582429
> 
> 赞同：-5
> 
> 时间：2012-07-20T15:31:02.680
> 
> 标签：c++, pointers, reference

我检查了许多编程语言（Java、Erlang、python 等），但我发现 C/C++ 很难学习。仅仅是因为我有时认为它不合理；

例1：

```
 #include <iostream>

    int main() {

     int ar1 = {1,2,3};
     int *p1 = ar1;

     char *msg = "message";

     std::cout << "addr: " << p1 << std::endl ;//prints the array address

     std::cout << "value: " << *p1 << std::endl ;//prints the first element

     std::cout << "addr: " << msg << std::endl ;//prints "message" , wtf why not    the addr?how can i get its address?

     std::cout << "value: " << *msg << std::endl ;//prints the first character

    } 
```

例 2：

```
 #include <iostream>

    int main() {

     int n1 = 5;
     int *p1 = &n1;

     int &r1 = *p1; // why not: int &r1 = p1; ,*p1 is NOT an address,p1 is.This does not make any sense...

     } 
```

你能给我解释一下这些例子吗？如果不解决这些问题，我就无法继续学习 Cplusplus。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:51:47.917

问题一：

```
char *msg = "message";
std::cout << "addr: " << msg << std::endl ;
//prints "message" , wtf why not    the addr? 
```

这是该语言从 C 的历史演变的产物，其中字符串通常由字符数组或指向此类数组的指针表示。为了支持这一点，`<<`有一个重载 take `char const *`，它将其视为指向字符串的指针并打印字符串内容。

您可以通过使用`std::string`类来表示字符串来避免混淆，并避免使用 C 风格的字符串，除非在（非常罕见的）它们有用的情况下。

```
how can i get its address? 
```

您可以将其转换为通用指针：

```
std::cout << "addr: " << static_cast<void*>(msg) << std::endl;
                         ^^^^^^^^^^^^^^^^^^ 
```

问题2：

```
int n1 = 5;
int p1 = &n1; 
```

这不会编译，因为`&n1`是地址，因此只能用于初始化指针，而不是`int`. 我假设你的意思是：

```
int *p1 = &n1;

int &r1 = *p1; 
// why not: int &r1 = p1; ,*p1 is NOT an address,p1 is.This does not make any sense... 
```

因为引用不是指针，也不是用地址初始化的。必须使用（有效）对象初始化引用，并成为该对象的别名。`*p1`是一个类型的对象`int`，因此可以用来初始化对 的引用`int`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:34:51.057

这个`&`符号可能会让 C++ 中的新手感到困惑。这是因为它`&`可以有多种含义。

这个：

```
int* p1 = &n1; 
```

意味着获取 n1 的地址并将其存储在指向 int 的指针中。`p1`是一个指针，保存 的地址`n1`。

这个：

```
int &r1 = *p1; 
```

意味着创建一种特殊类型的变量，称为引用。（在 C++ 中，引用实际上只是其他东西的别名）。r1 被告知为 处的值设置别名`*p1`。`*p1`表示跟随指针 p1 并获取基础值。在这种情况下，我们知道`p1`指向，`n1`所以我们知道这里`r1`是对 的引用`n1`。意思是如果我这样做：

```
r1 = 5; 
```

接着

```
std::cout << n1; 
```

输出将是`5`

& 也可以表示二进制和运算符。这是你在这里没有问的完全不同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:56:04.467

很大一部分问题是您的示例大多是错误的。

第一个例子：

```
 int ar1 = {1,2,3};
 int *p1 = ar1; 
```

正确地说，这需要是；

```
int ar1[] = {1, 2, 3};
int *p1 = ar1; 
```

在这种情况下，事情很简单：在大多数情况下（包括这种情况），数组的名称计算为该数组开头的地址（即，您分配给指针的值的类型）。主要的例外是当您使用数组作为运算符的操作数时`sizeof`，`sizeof(ar1)`会给出数组的实际大小 ( `3 *sizeof(int)`)，而不是指针的大小。

在您的第二个示例中：

```
 int n1 = 5;
 int p1 = &n1;

 int &r1 = *p1; // why not: int &r1 = p1; ,*p1 is NOT an address,p1 is.This does not make any sense... 
```

你是对的——这没有任何意义，一个正常运行的编译器不应该按原样编译它。你显然想要的是这样的：

```
int n1 = 5;
int *p1 = &n1;   // p1 is a pointer to int, holding address of n1

int &r1 = *p1;   // r1 is a reference to int, referring to what p1 points at (n1). 
```

就打印出来而言，它非常简单：如何打印出任何类型纯粹是由编写库的人做出的决定。他们认为最有意义的是，当您传递一个指向 char 的指针时，它会假设您想要打印指向的字符串。对于其他指针类型，他们决定打印出指针本身的值。不过，这一切都与语言本身无关——这只是某人做出的决定，因为这对他们来说是有意义的。

如果您有一个指向 char 的 char/指针数组，并且想要打印出地址而不是其指向的字符，则通常将其转换为指向 void 的指针：

```
 char *msg = "message";

 std::cout << static_cast<void *>(msg); 
```

至于他们为什么选择这个，我认为很简单：因为当人们说 时`cout << mystring`，他们通常希望将字符串的内容打印出来。这通常仅限于字符串，因为（几乎）每个人都同意如何打印出字符串的内容，但在涉及到 int、double 等数组的内容时却没有这么多。

# ajax - ExtJS 4：Ext.Ajax.request 错误“Web 服务方法名称无效”。

> ID：11582431
> 
> 赞同：1
> 
> 时间：2012-07-20T15:31:08.690
> 
> 标签：ajax, exception, extjs, asmx

什么会导致这个？

```
Error System.InvalidOperationException: UpdateProject Web Service method name is not valid.

   at System.Web.Services.Protocols.HttpServerProtocol.Initialize()

   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) 
```

JavaScript 代码：

```
 Ext.Ajax.request({
                        url: 'http://localhost/Controls/ProjectList/ProjectListService.asmx/UpdateProject',
                        params: {
                            'project': { project_id: 'a', project_number: 'b', project_name: 'c' }
                        },
                        success : function(response){
                            alert(response.responseText);
                        }, 
                        failure : function(response){
                            alert("Error " + response.responseText);
                        }
                }); 
```

**网络服务（ProjectListService.asmx）：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Xml;
using System.Data;
using System.Web.Script.Services;
using System.IO;
using System.Text;

namespace Web.Controls.ProjectList
{
    /// <summary>
    /// Summary description for WebService1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class ProjectListService : System.Web.Services.WebService
    {
        [Serializable]
        public class Project
        {
            public string project_id;
            public string project_number;
            public string project_name;
        }

        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json,
            UseHttpGet = false, XmlSerializeString = false)]
        public List<Project> GetProjects(string myTest, string bar)
        {
            var list = new List<Project>(new[] {
                new Project() {project_id="1", project_name="project 1", project_number="001"},
                new Project() {project_id="2", project_name= "project 2", project_number= "002" },
                new Project() {project_id="3", project_name= "project 3", project_number= "003" }
            });

            return list;
        }

        [WebMethod]
        [ScriptMethod]
        //[ScriptMethod(ResponseFormat = ResponseFormat.Json,
        //    UseHttpGet = false, XmlSerializeString = false)]
        public void UpdateProject(Project project)
        {

            string x = "";
            Project p = project;

        }
    }
} 
```

===========================

# 2012 年 7 月 20 日 @ 10:43 更新：

**新错误：**

```
Error {"Message":"Invalid JSON primitive: project.","StackTrace":"   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\r\n   at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n   at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

**JavaScript 代码：**

```
 Ext.Ajax.request({
                        url: 'http://localhost/Controls/ProjectList/ProjectListService.asmx/UpdateProject',
                    headers: { 'Content-Type': 'application/json' },
                    method: 'POST',
                    scope: this,
                        params: {
                            'project': { project_id: 'a', project_number: 'b', project_name: 'c' }
                        },
                        success : function(response){
                            alert(response.responseText);
                        }, 
                        failure : function(response){
                            alert("Error " + response.responseText);
                        }
                }); 
```

====================================

# 2012 年 7 月 20 日下午 2:40 更新：

**工作 JSON 请求：**

```
 var jsonStr = Ext.encode({ 'project_id': 'a', 'project_number': 'b', 'project_name': 'c' });

                Ext.Ajax.request({
                        url: 'http://localhost/Controls/ProjectList/ProjectListService.asmx/SaveProject',
                    method: 'POST',
                        jsonData: jsonStr,
                        success : function(response){
                            alert(response.responseText);
                        }, 
                        failure : function(response){
                            alert("Error " + response.responseText);
                        }
                }); 
```

**网络方法（到目前为止）：**

（请参阅上面有问题的项目对象）

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = false, XmlSerializeString = false)]
public string SaveProject()
{         
    return "success";
} 
```

=================================

# 2012 年 7 月 22 日 @ 晚上 9:03 更新（已修复）：

改变了两件事。为我的 Web 服务添加了“项目”类型的“项目”参数。然后将项目对象属性放在我的“jsonData”对象中该对象的内部。

**工作 JSON 请求：**

```
 //var jsonStr = Ext.encode({ 'project_id': 'a', 'project_number': 'b', 'project_name': 'c' });
            var jsonDataObject = { 'project': { 'project_id: '4', 'project_number': '004', 'project_name': 'project 4' } };

            Ext.Ajax.request({
                        url: 'http://localhost/Controls/ProjectList/ProjectListService.asmx/SaveProject',
                method: 'POST',
                        jsonData: jsonDataObject,
                        success : function(response){
                            alert(response.responseText);
                        }, 
                        failure : function(response){
                            alert("Error " + response.responseText);
                        }
            }); 
```

**网络方法（到目前为止）：**

（请参阅上面有问题的项目对象）

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = false, XmlSerializeString = false)]
public string SaveProject(Project project)
{         
    return "success";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:50:13.247

看起来序列化程序认为您不能将对象作为 JSON 节点的属性。

几件事要尝试：

*   由于 Project 是 UpdateProject 函数的唯一参数，您可以将您的项目作为数据传递吗？`params: { project_id: 'a', project_number: 'b', project_name: 'c' }`
*   [尝试使用jsonData](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Connection-method-request)而不是“参数” 。这也将使您不需要自己添加 application/json 标头，并且序列化可能会正确发生（如果问题出在客户端上）。

# html - 回发后 IE8 停止支持 CSS

> ID：11582434
> 
> 赞同：0
> 
> 时间：2012-07-20T15:31:21.370
> 
> 标签：html, css, internet-explorer, internet-explorer-8

我遇到的问题是我的网站在同一会话的不同阶段显示不同。以下是页面在 PageLoad 上的显示方式：

![在此处输入图像描述](../Images/24d528b46624566a2dd1c42abad7d9f9.png)

该表填充了一些数据，并且所有空字段都是用于用户输入的 DropDownLists。请注意，表格居中，包含 DropDownLists 的字段都具有相同的宽度。

以下是保存一些用户输入后页面的显示方式：

![在此处输入图像描述](../Images/9915f8da6ec131362d02669ec41e8365.png)

DropDownLists 已全部替换为已选择的图像（可能没有），但现在表格未居中，每个表格都缺少右侧边框，右侧列中的第 3 和第 4 个表格具有任意宽度的字段包含 DropDownLists，即使这些都是 class=image 并且应该具有 75px 的固定宽度。

这是相关的CSS：

```
.outer
{
    border: none;
    margin-left: auto;
    margin-right: auto;
}
.image
{
    padding: 0;
    margin: 0;
    width: 75px;
} 
```

外部类用于外部包含表（这些是嵌套表），图像类用于包含被选定图像替换的 DropDownLists 的字段。

我在 Firefox 中没有这个问题，我只在 Firefox 和 IE8 中测试过。

任何建议表示赞赏。

编辑：这是完整的 CSS 文件：

```
.outer
{
    border: none;
    margin-left: auto;
    margin-right: auto;
}
.outer td
{
    vertical-align: top;
}
.column
{
    border: none;
}
#rightColumn table, #leftColumn table
{
    width: 100%;
}
.cell
{
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
}
.cell td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
}
.image
{
    padding: 0;
    margin: 0;
    width: 75px;
}
.messages td
{
    border-collapse: collapse;
    border: 2px solid #FF0000;
    text-align: left;
}
h1
{
    text-align: center;
    font-size: 350%;
}
h2
{
    text-align: center;
}
th
{
    background-color: #2B60DE;
    color: #FFFFFF;
}
.gray
{
    background-color: #AAAAAA;
}
.blue
{
    background-color: #2B60DE;
}
.orange
{
    background-color: #FFA500;
}
.green
{
    background-color: #00FF00;
}
.red
{
    background-color: #FF0000;
}
.yellow
{
    background-color: #FFFF00;
}
.white
{
    background-color: #FFFFFF;
}
#lob
{
    vertical-align: bottom;
    text-align: center;
}
.centered
{
    text-align: center;
    padding: 10px;
} 
```

编辑：开发人员工具的 HTML 选项卡：

![在此处输入图像描述](../Images/0f896ed60f2ce922a2c8bdd31af9beea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:11:49.877

我要猜测一下：您的回发中的某些内容正在迫使浏览器进入 Quirks 模式。特别是，设置`margin`为`auto`在 Quirks 模式下不起作用。

要确认这一点，请在受影响的页面上按 F12。在出现的开发人员工具中，查看顶部的“文档模式”。如果是怪癖，那就有问题了。提供该窗口的“HTML”选项卡的屏幕截图将有助于进一步诊断。

# c# - 路径问题 C#.net Image

> ID：11582435
> 
> 赞同：2
> 
> 时间：2012-07-20T15:31:23.363
> 
> 标签：c#, image, path

因此，我正在尝试拍摄一张照片，并将其保存到我的服务器中的临时图像文件夹中，然后我想稍后拍摄并应用一些 System.Drawing 内容。我知道图像被正确保存，因为我可以去`http://localhost/TempImages/x.png`但是当我尝试从`Image z = Image.FromFile("TempImage/x.png");`它给我一个文件未找到异常创建图像时。我尝试了各种路径。操作，但我尝试过的似乎都没有。有人可以给我一些帮助/了解我做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:35:55.163

您提到了服务器，所以我认为您正在使用 Web 服务器做一些事情。在这种情况下，您需要根据根位置在服务器上的位置获取映像的完整物理路径。

你打电话看起来像：

```
Image z = Image.FromFile(Server.MapPath("TempImage/x.png")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:36:48.880

您需要这样的绝对路径。

```
Image image1 = Image.FromFile("c:\\FakePhoto1.jpg"); 
```

或者

```
Image image1 = Image.FromFile(Server.MapPath("http://localhost/TempImages/x.png")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T15:32:29.980

试试这个：

```
Image z = Image.FromFile("/TempImage/x.png"); 
```

表示这`TempImage`是一个文件夹而不是文件。

# c# - Linq：在访问属性之前检查空值

> ID：11582436
> 
> 赞同：0
> 
> 时间：2012-07-20T15:31:29.753
> 
> 标签：c#, .net, linq

请就错误提出建议。这是代码

```
 void Main()
   {
      var a = from id in TechnicalProducts
        where id.Id == "ID-4591"
        select new {
         Country = id.Computers.Select (x => new {x.Location.ParentLocation.ParentLocation.ParentLocation.ParentLocation.Code}),
        };
      Console.WriteLine(a);
   } 
```

错误：导航属性“代码”返回的条目为空且无法初始化。您应该在访问此属性之前检查空值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:34:42.687

你可以试试这个：

```
somevar = x.Location.ParentLocation.ParentLocation.ParentLocation.ParentLocation.Code ?? 0 
```

**编辑：** 您的代码可能如下所示：

```
var a = from id in TechnicalProducts
        where id.Id == "ID-4591"
        select new {
         Country = id.Computers.Select (
              x => new{
                x.Location.ParentLocation.ParentLocation.ParentLocation.ParentLocation.Code ?? 0
                      }
        )}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:40:48.660

您可以在查询中添加空检查：

```
WHERE x.Location.ParentLocation.ParentLocation.ParentLocation.ParentLocation.Code != null 
```

否则，按照@Behnam 的建议使用[合并运算符。](http://msdn.microsoft.com/en-us/library/ms173224.aspx)该运算符仅返回链中的第一个非空值。

# javascript - jQuery：如何记住多步 Rails 3 表单中的选择？

> ID：11582438
> 
> 赞同：2
> 
> 时间：2012-07-20T15:31:33.623
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我使用这个 railscast 在 Rails 3 中创建了一个多步骤表单：[http: //railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

在我的表单的一个步骤中，我可以添加和删除一组选择框。其中一个选择框包含一组数字，这些数字在添加新的字段组时相加以产生总和。你可以在这里看到一个例子：http: [//jsfiddle.net/beehive/HGJck/](http://jsfiddle.net/beehive/HGJck/)

我遇到的问题是，当我在多步骤表单中的步骤来回切换时，我在表单的这一步中的选择不会被记住。我怎样才能解决这个问题？

```
$(document).ready(function() {
/* Add & Remove */
var removeButton = "<button id='remove'>Remove</button>";
$('#add').click(function() {
    $('div.container:last').after($('div.container:first').clone());
    $('div.container:last').append(removeButton);

    /* Sum */
    $(".number").change(function() {
        var combined = -10;
        $(".number").each(function() {
            combined += parseInt(this.value);
        });
        $("#sum").html(combined);
    }).trigger("change"); 

    return false;

});

$('#remove').live('click', function() {
    $(this).closest('div.container').remove();
});

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:48:33.090

一种方法可能是在您前后移动时，将此控件的整个 html 保存在一个变量中，并使用不同的步骤保存该 html，当您返回此页面时，从该变量中恢复 html。如果有任何问题请告诉我

# php - .js.php 文件扩展名在文件末尾添加了奇怪的字符

> ID：11582441
> 
> 赞同：2
> 
> 时间：2012-07-20T15:31:48.657
> 
> 标签：php, javascript, apache

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:30:05.760

I had this problem too. The problem seems to be caused by the server gzipping the response incorrectly. (With mod_deflate of course).

Disabling mod_deflate through .htaccess resolved the issue for me - note that you can do something like this to disable per filetype:

```
SetEnvIfNoCase Request_URI \.*\.js\.php$ no-gzip dont-vary 
```

Strangely, I have two supposedly identical Ubuntu VMs - one where everything runs perfectly, and one where I need to disable mod_deflate. If anyone can figure why this is happening, I'd be interested to know!

# asp.net - ASP.net 将值设置为隐藏表单控件

> ID：11582443
> 
> 赞同：3
> 
> 时间：2012-07-20T15:31:54.957
> 
> 标签：asp.net

在 ASP.net 中，我尝试将变量值设置为隐藏字段，但出现异常。

在第一个输出中，它是正确的。然后我把它放到隐藏字段中，失败了。

如何解决？

```
 user name: <%= User.Identity.Name %> // output is correct
    <form runat=Server>
    <asp:HiddenField id="HiddenField1" value=<%= User.Identity.Name %> runat=Server />
    </form> 
```

错误

```
Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Server tags cannot contain <% ... %> constructs. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:33:37.920

在您的脚本周围给出报价，如下所示。

```
 value='<%= User.Identity.Name %>' 
```

**改变**

```
 <asp:HiddenField id="HiddenField1" value=<%= User.Identity.Name %> runat=Server /> 
```

**至**

```
 <asp:HiddenField id="HiddenField1" value='<%= User.Identity.Name %>' runat=Server /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:33:46.540

你忘记了引号：`value="<%= User.Identity.Name %>"`

如果您无法在标记中设置值，请在代码隐藏中执行：
在`Page_Load()`put`HiddenField1.value = User.Identity.Name;`

# java - Java 是否有带移除策略的有界集合？

> ID：11582445
> 
> 赞同：2
> 
> 时间：2012-07-20T15:31:56.170
> 
> 标签：java

> **可能的重复：**
> [包含 Java 中最后 N 个元素的大小受限队列](https://stackoverflow.com/questions/5498865/size-limited-queue-that-holds-last-n-elements-in-java)

java是否包含一个允许**最大数量**元素的本地类，如果我再输入一个元素，它会**自动删除**一个旧元素（例如基于**自然排序**）？

如果没有，我当然可以自己写，但我只是想问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:35:30.947

有很多。

您可以使用队列，并指定固定长度。使用 ArrayList 实现您自己的，每次添加新元素时都会删除元素 0，这会使大小超过您的限制。

一种流行的技术是`queue`使用 LinkedHashMap

```
 queue = new LinkedHashMap<Integer, String>()
  {
     @Override
     protected boolean removeEldestEntry(Entry<Integer, String> eldest)
     {
        return this.size() > yourMaxSize;   
     }
  }; 
```

# elf - 更改 elf 调试信息中列出的源文件

> ID：11582447
> 
> 赞同：4
> 
> 时间：2012-07-20T15:31:57.210
> 
> 标签：elf, dwarf

基本上我希望能够在 elf 二进制文件的 debug dwarf 部分中更改源文件的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T00:35:28.487

万一您的答案与 gdb（或其他调试器）相关，通常有一种方法可以更改源路径 - 在 gdb 中，您可以`set substitute-path`通过[http://sourceware.org/gdb/onlinedocs/gdb/Source-Path.html查看](http://sourceware.org/gdb/onlinedocs/gdb/Source-Path.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T11:46:00.337

debugedit 是一个包含在 RPM 包中的程序，应该很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T05:10:54.427

> 基本上我希望能够在 elf 二进制文件的 debug dwarf 部分中更改源文件的路径。

什么事拦住你了？

路径存储在`.debug_str`二进制文件的部分中，作为 -`NUL`终止的字符串。您可以从 eg 中找到部分偏移量`readelf -S`，并使用 编辑字符串`emacs`。或者编写一个程序来做到这一点。

# python - 在 Python 类之外定义类方法

> ID：11582454
> 
> 赞同：4
> 
> 时间：2012-07-20T15:32:10.853
> 
> 标签：python, class, methods

我试图了解从外部定义时如何调用该类的方法。虽然我找到了其他线程来解决这个问题，但我还没有找到一个非常明确的答案来回答我的问题，所以我想以一种简单的形式发布它。

在类外部定义函数并从内部调用它与从内部定义它相同。

```
def my_func(self_class, arg):
    do something with arg
    return something

class MyClass:
    function = my_func 
```

相对

```
class MyClass:
    def function(self, arg):
        do something with arg
        return something 
```

然后将其称为

```
object = MyClass()
object.function(arg) 
```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:34:15.523

这两个版本是完全等价的（除了第一个版本也引入`my_func`了全局命名空间，当然，以及您用于第一个参数的不同名称）。

请注意，您的代码中没有“类方法”——这两个定义都会产生常规（实例）方法。

A function definition results in the same function object regardless of whether it occurs at class or module level. Therefore, the assignment in the first version of the code lifts the function object into the class scope, and results in a completely equivalent class scope as the second version.

# compiler-construction - Javac 流程决策

> ID：11582456
> 
> 赞同：0
> 
> 时间：2012-07-20T15:32:18.403
> 
> 标签：compiler-construction, javac, flow, assertion

我正在破解 javac 以添加功能，我目前正在测试这段代码：

```
public class HelloWorld {

    int f = 0;

    int g(boolean x){
        assert(x);
        return 5;
    }

    int m(boolean x){
        return n() - g(x) + p();
    }

    int n() {
        return f == 0 ? f += 1 : 0;
    }

    int p() {
        return f == 2 ? f += 2 : 0;
    }

    public static void main(String[] args) {
        HelloWorld test = new HelloWorld();
        int val = test.m(true);

        System.out.println(val);
    }
} 
```

重要的是 g() 可能会抛出 AssertionError，但是，在生成 m() 时，它甚至会在访问 n() 之前生成断言。

有谁知道编译器为什么或如何做到这一点？

谢谢。

# php - 如何通知用户会话到期

> ID：11582457
> 
> 赞同：0
> 
> 时间：2012-07-20T15:32:19.513
> 
> 标签：php, jquery, codeigniter

我正在使用 Codeigniter 构建一个 CMS，并且我正在使用 Ion Auth 进行身份验证。

在帖子创建页面上进行一些测试时（想想 Wordpress 添加新帖子），我注意到如果用户的会话过期，一些 Ajax 内容会失败。现在我可能会添加一些内容以在 Ajax 控制器中返回一条消息，但我想在他们采取任何登录会话将要/已过期的操作之前显示一条消息。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:41:23.367

您可以添加 $_SESSION['CREATEDTIME'] 并在其中存储 datetime() 。通过 AJAX 进行比较并添加标签或类似内容以在会话即将到期时通知用户。

# sql - SQL order and limit then order the limited 结果

> ID：11582461
> 
> 赞同：1
> 
> 时间：2012-07-20T15:32:24.307
> 
> 标签：sql, postgresql

我想按 DESC 选择日期并限制为最后 3 个，然后我需要基本上翻转最后 3 个结果，以便它们按 ASC 排序

任何帮助将不胜感激我正在使用 postgresql

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:37:40.447

```
SELECT *
FROM
  ( SELECT column_list
    FROM tableX
    ORDER BY dates DESC
    LIMIT 3
  ) AS tmp
ORDER BY dates ASC ; 
```

# clearcase - 更改 clearcase_albd 用户密码

> ID：11582462
> 
> 赞同：2
> 
> 时间：2012-07-20T15:32:29.127
> 
> 标签：clearcase, clearcase-ucm

我在 IBM 的网站上找到了一些关于更改`clearcase_albd`用户密码的信息。（出于安全原因，我需要更改它。）
大多数信息都在谈论有一个发布区域，这在开始时没有设置。

这些是我找到的网站：

*   "[更改 ALBD 密码的方法`albd_server.exe`](http://www-01.ibm.com/support/docview.wss?uid=swg21146207)"
*   "[创建发布区](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_ms_install_win.doc/creating_a_release_area.htm)"

据我所知，我可能必须手动完成所有操作。
我相信这些是我必须采取的步骤：

1.  更改`clearcase_albd`密码
2.  更改服务器上服务的登录信息
3.  转到每个客户端并更改服务的登录信息（痛苦地。）

这是我需要做的吗？
有没有更短的方法可以在不向用户透露密码的情况下（或者在任何地方以纯文本形式写入？）除了用户尝试登录和锁定帐户
之外，还有其他陷阱吗？`clearcase_albd`

如果还有其他方法，我很想知道如何尽可能轻松地做到这一点。
我们正在使用 ClearCase 版本 7.1.2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:51:16.667

我进行此类操作的唯一方法，涉及影响用户的 Clearcase 设置的敏感更改是......

要求他们卸载，然后重新安装 ClearCase，使用我制作的静默安装包（例如这里使用 albd 帐户新密码）。
请参阅“[安装场景演练：使用 Installation Manager 从共享网络驱动器静默安装 ClearCase 或 ClearQuest](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.cc_ms_install.doc/topics/c_silent_inst_IM_netw_shareddrive.htm) ”。

它仍然漫长而痛苦，但是：

*   它是在用户的倡议下制作的
*   没有机密信息被泄露

在您的情况下，您需要确保尝试使用旧 ClearCase（使用旧的 albd 帐户密码）访问 ClearCase 的用户不会阻止 albd 帐户（因为使用错误密码的尝试次数过多）。
如果帐户没有被阻止，那么用户只会看到他们的 ClearCase 不起作用，这将极大地激励他们卸载然后重新安装，正如您之前在电子邮件中向他们解释的那样.

同样，没有传达任何敏感信息，并且他们的所有视图、正在进行的交付/rebase、结帐等在重新安装后仍然有效。

# iphone - 将委托附加到数组中的对象

> ID：11582467
> 
> 赞同：0
> 
> 时间：2012-07-20T15:32:37.223
> 
> 标签：iphone, ios, cocoa-touch, ios5

我创建了一个自定义 UIView，并为其附加了一个委托 -**一切都很好！**

然而，这些 UIView 中有 60 个是在一个循环中创建的一个数组。当我尝试将委托附加到这些美女之一时，我收到此分析警告：**在“__strong id”类型的对象上找不到属性“委托”**

希望这是一些简单的语法问题？

这很好用：

```
myUIView *aSimpleTest = [[myUIView alloc] init…];
aSimpleTest.delegate = self;   //nice!
... 
```

这不会：

```
for (i=0; i<60; i++){
    [arrayOfItems addObject:[[myUIView alloc] init…];
    [arrayOfItems objectAtIndex:i].delegate = self;//error, as above
    ...
} 
```

将不胜感激一些帮助。（希望我不必再花一天时间学习新东西！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:36:55.617

试试这个：

```
for (i=0; i<60; i++){
    myUIView *view = [[myUIView alloc] init…];
    view.delegate = self;
    [arrayOfItems addObject:view];
    ...
} 
```

**编辑**：您收到错误，因为`[arrayOfItems objectAtIndex:i]`返回`id`没有`delegate`属性。您还可以执行以下操作：

```
myUIView *view = (myUIView*)[arrayOfItems objectAtIndex:i];
view.delegate = self; 
```

或者：

```
[[arrayOfItems objectAtIndex:i] setDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:37:52.013

在你的循环中做：

```
myUIView *tempView = (myUIView*)[arrayOfItems objectAtIndex:i];
tempView.delegate = self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:38:19.067

使用演员表：

```
((MyUIView*)[arrayOfItems objectAtIndex:i]).delegate = self; 
```

（有一点要注意，顺便说一句：总是以大写字母开头你的类名。）

# iphone - 如何在视图加载时隐藏标签栏操作？

> ID：11582468
> 
> 赞同：1
> 
> 时间：2012-07-20T15:32:38.203
> 
> 标签：iphone, ios, ipad

我有一个 iphone 应用程序，我在调用 web 服务后添加了一个视图，在视图中有一个加载视图。但是当该视图正在加载时，有人点击我的标签栏项目，应用程序崩溃了。我需要那个标签栏操作在加载该视图之前一直隐藏。我不想隐藏标签栏，只有操作，有人知道怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:36:52.310

您可以像这样禁用用户与标签栏的交互：

```
[[[self tabBarController] tabBar] setUserInteractionEnabled:NO]; 
```

并在您的网络服务完成加载或失败后启用它。

但是您应该在

```
-(void)viewDidUnload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:38:11.967

在 webViewDidStartLoad 中将布尔值设置为 YES 作为信号量，并在 webViewDidFinishLoad 中将其设置为 NO。调整您的选项卡栏操作，以便在该布尔值为“是”时不会发生。如果您有其他不希望在此期间发生此延迟的 Web 视图加载，您可以在 webViewDidStartLoad 中进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:42:04.173

您可以使用覆盖孔窗口的加载视图（HUD），因此用户在网络操作工作时无法触摸任何东西。

SVProgressHud 是一个不错的选择。

# unmanaged - Linqpad 查询需要非托管部署项

> ID：11582472
> 
> 赞同：0
> 
> 时间：2012-07-20T15:32:55.200
> 
> 标签：unmanaged, linqpad, deploymentitem

如何在运行 Linqpad 查询时包含非托管程序集？

我正在运行最新的测试版（v4.42.06）。我通过 f4 Query 属性添加了对工作托管程序集的引用。我在 Linqpad 中输入了访问该程序集的类和方法的代码，当我点击运行时，我得到一个内部异常（来自我的托管程序集而不是 Linqpad），指出它无法打开（在这种情况下确实找到）*依赖*的非托管程序集通常与托管程序集一起驻留在目录中。

现在非托管程序集与我让 Linqpad 浏览到的添加的托管程序集一起存在，我可以以相同的方式 (f4) 添加非托管程序集，但它不会影响过程的结果。

当我在 Visual Studio 中对该模块进行单元测试时，我将属性[DeploymentItem](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28Microsoft.VisualStudio.TestTools.UnitTesting.DeploymentItemAttribute%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29;k%28DevLang-csharp%29&rd=true)附加到单元测试方法并能够执行代码。

如何让 Linqpad 使用非托管程序集部署项执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T09:06:39.420

将**“不要隐藏程序集引用**”设置为 true（在**Edit/Preferences/Advanced**中）

阴影意味着 dll 被复制到另一个文件夹并从那里加载。但是每个 dll 都被复制到一个单独的文件夹中，这意味着托管 dll 不再与非托管 dll 位于同一文件夹中，因此它们无法找到彼此。

通过设置不隐藏程序集引用的选项，dll 从其原始位置加载。

# javascript - $.ajax 未在跨域 url 上返回错误函数

> ID：11582473
> 
> 赞同：1
> 
> 时间：2012-07-20T15:33:00.017
> 
> 标签：javascript, jquery, ajax

我在这里隔离了这个问题：

[http://jsfiddle.net/ajkochanowicz/pEnMw/2/](http://jsfiddle.net/ajkochanowicz/pEnMw/2/)

基本上，如果 CDN 托管的文件失败，我会尝试在脚本中添加一项功能来查找 .js 文件的本地版本。因此，在 .done 或 error 或 complete 中加载该脚本似乎是合适的，但这些都不起作用。

**澄清**：寻找一种适用于用户定义的 js 文件的解决方案，因此测试每个函数中的单个函数是不可行的。

SO上有很多关于这个类似主题的问题，但我发现的只是让请求工作或处理JSON（P）请求。:( 我对 .js 文件的错误处理很感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:38:23.467

无法知道`script`元素是否加载失败，因此唯一的解决方案是添加超时。

引用[jQuery 的`ajax`文档](http://api.jquery.com/jQuery.ajax/)（`settings.error`部分）：

> **错误（jqXHR，textStatus，errorThrown）**
> 
> [……]
> 
> **注意**：跨域脚本和 JSONP 请求不调用此处理程序。

我已经更新[了你的小提琴](http://jsfiddle.net/pEnMw/3/)以包括`timeout`：

```
$.ajax({
    type: "GET",
    url: urlVar,
    dataType: 'script',
    timeout : 5000,
    success: function(data) {
        alert('it worked');
    },
    error: function(xhr, ajaxOptions, thrownError) {
        alert('it did not work');
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:38:33.550

`$.ajax`跨域脚本和 JSONP 请求不调用错误处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:43:02.983

一个可行的解决方案，假设你想要的库是 jquery ：

在标题中：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
```

在你的身体里：

```
 <script>
       window.onload=function(){
          if (!$) { // jquery isn't available even after the window is fully loaded, so the distant loading failed
            var head= document.getElementsByTagName('head')[0];
            var script= document.createElement('script');
            script.type= 'text/javascript';
            script.src= 'myOwnJquery.js';
            script.onload = someCallback; // <- might be usefull
            head.appendChild(script);
          }
      }
   </script> 
```

`$`在此示例中，用您要测试的库的函数替换。

这样做的主要原因是您可以设置回调，因此您现在不要尝试在拥有库之前无法完成的事情。

# .net - 是否可以有一个 MVC 控制器，其中有两个同名动作，参数为 T 和 List

> ID：11582474
> 
> 赞同：1
> 
> 时间：2012-07-20T15:33:05.863
> 
> 标签：.net, asp.net-mvc-3

我想在我的控制器上有两个具有相同名称的方法，但唯一的区别是参数一个采用 T 参数，另一个采用 List

```
[HttpPost]
public ActionResult Edit(myType parameter)
{ 
    //snip
}

[HttpPost]
public ActionResult Edit(List<myType> parameter)
{ 
    //snip
} 
```

该框架正在引发异常，所以我猜这是不可能的。

> 当前对控制器类型“MyController”的“编辑”操作请求在以下操作方法之间不明确：

我从 jQuery ajax 调用中调用这些方法，其中数据可以是 T 或 T 数组。

```
$.ajax({
    url: url,
    type: "POST",
    contentType: "application/json, charset=utf-8",
    dataType: "json",
    data: JSON.stringify({ parameter: data }),
    success: function () {
        //success
    },
    error: function (e) {
        //error
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:48:31.537

这里的关键是你当然可以只使用带有一个列表的重载，即使只传递一个对象，你最终也会得到一个包含 1 个项目的列表。您需要做的就是将数据作为 json 数组传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:48:38.900

这似乎是不可能的，框架对您真正想要调用的操作感到困惑。但是，您可以简单地保持上述操作之一吗？还是每个人做不同的事情？如果是这样，那么您的 url 方案可能需要稍作修改。

如果两者或多或少做相同的事情，如果您想要“模式 1”（单个值）或“模式 2”（更多值），可以在 specy 中添加一个参数：

```
[HttpPost]
public ActionResult Edit(List<myType> parameter, bool? multiple)
{ 
    var multipleValues = multiple.GetValueOrDefault(true);
    if (!multipleValues)  ....
} 
```

**编辑**

您可以使用自定义 ModelBinder 反序列化 json 数据。

粘合剂：

```
public class MyTypeBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var request = controllerContext.HttpContext.Request;

        // reset input stream
        request.InputStream.Position = 0;

        // read content
        var jsonString = request.ContentEncoding.GetString(request.BinaryRead((int)request.InputStream.Length));

        var serializer = new JavaScriptSerializer();

        return jsonString.TrimStart().StartsWith("[")
            // array, just parse it
            ? serializer.Deserialize<List<MyType>>(jsonString)
            // single object, add to a list
            : new List<MyType>() { serializer.Deserialize<MyType>(jsonString) };
    }
} 
```

然后，关于行动：

```
public ActionResult Test([ModelBinder(typeof(MyTypeBinder))] List<MyType> type) 
{
   ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:48:43.753

弥敦道，

你可以试试这个：

```
[HttpPost, ActionName("Edit")]
public ActionResult EditMytype(myType parameter)
{ 
    //snip
}

[HttpPost]
public ActionResult Edit(List<myType> parameter)
{ 
    //snip
} 
```

在项目中有类似的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:08:44.360

```
[HttpPost, ActionName("EditType1")]
public ActionResult Edit(myType parameter)
{ 
    //snip
}

[HttpPost, ActionName("EditType2")]
public ActionResult Edit(List<myType> parameter)
{ 
    //snip
} 
```

从观点来看，

```
/controllername/edittype1

/controllername/edittype2 
```

# visual-studio-2010 - 错误：file.OCX 的并排配置信息包含错误。应用程序启动失败

> ID：11582476
> 
> 赞同：0
> 
> 时间：2012-07-20T15:33:15.897
> 
> 标签：visual-studio-2010, visual-studio, delphi, ocx, dllregistration

尝试在特定机器上注册 ocx 时出现以下错误。（Windows XP 32 位）

错误：“file.OCX”的并排配置信息包含错误。此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决此问题 (14001)。

但它在我的 Windows7 32 位和另一台 Windows7 64 位机器上运行良好。

除了操作系统之外，我能看到的唯一区别是在它工作的两台机器上，我们安装了 Delphi 2009 和 Microsoft Visual Studio。（从我读到的 Visual Studio 可能与它有关。）

我如何才能让这个 ocx 在没有 Microsoft Visual Studio 的机器上正确注册？

谢谢

附言

如果有帮助，清单版本是 1.0（在 ocx 文件中）。

这是清单

```
 <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
- <dependency>
- <dependentAssembly>
<assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50727.762" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b" /> 
 </dependentAssembly>
 </dependency>
- <dependency>
- <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50608.0"             processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b" /> 
    </dependentAssembly>
</dependency>
 - <dependency>
- <dependentAssembly>
<assemblyIdentity type="win32" name="Microsoft.VC80.MFC" version="8.0.50608.0"    processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b" /> 
   </dependentAssembly>
   </dependency>
   </assembly> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:33:01.500

清单表明该组件依赖于 MSVCRT 和 MFC，版本 8，即 VS2008。您将需要在任何需要此 OCX 的机器上安装这些依赖项。这意味着安装 MS 提供的可再分发包。

我希望 OCX 供应商详细说明这些依赖关系，并建议查阅 OCX 文档。

# java - JComboBox 首选大小，已选择空值但未在 ComboBoxModel 中

> ID：11582478
> 
> 赞同：5
> 
> 时间：2012-07-20T15:33:29.060
> 
> 标签：java, swing, layout, jcombobox

我有以下情况：在 JCombobox 中，首选大小基于最大项目大小。但是，此计算没有考虑为 呈现的值`null`。它只关心模型内部的值。因此，当用于呈现空值的文本大于其他元素时，标签会被截断，最后会出现三个点 (...)。我想避免这种情况。

这是我正在谈论的内容的一个小演示：

![呈现截断的空值](../Images/e124bcce372399466d7110126c9882ce.png)

```
import java.awt.Component;
import java.awt.GridBagLayout;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestComboBox {

    protected void initUI() {
        JFrame frame = new JFrame(TestComboBox.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        JComboBox comboBox = new JComboBox(new Object[] { "Something", "Stuff", "Beep" });
        comboBox.setRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList<?> list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                Component comp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (value == null) {
                    setText("No selection");
                }
                return comp;
            }
        });
        comboBox.setSelectedItem(null);
        panel.add(comboBox);
        frame.add(panel);
        frame.setSize(200, 100);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestComboBox().initUI();
            }
        });
    }
} 
```

我想知道你有没有什么建议。到目前为止，我的想法是扩展 JComboBox，覆盖首选大小，还执行空值渲染，并采用调用 super.preferredSize 的最大维度和空值渲染之一。但我觉得这有点令人失望。

我真的不希望使用prototypeDisplayValue~~绝对不是一个选项，因为我不知道该下拉菜单中的值~~。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:00:57.073

我没有在代码中对此进行测试，但我的方法是：

1.  确定渲染器返回的与实际`preferredSize`的. 不是通过使用任何硬编码值，而是通过创建一个仅包含一个项目和一个已知渲染器的幕后，并将首选大小与已知渲染器返回的大小进行比较。`Component``preferredSize``JComboBox``JComboBox``JComboBox``Component`
2.  每次通过将侦听器附加到`UIManager`
3.  覆盖`getPreferredSize`实际的`JComboBox`并返回宽度的最大值`super.getPreferredSize()`和`getPreferredSize( rendererComponent ) + calculatedDifference`

这应该解决外观问题，避免不必要的计算，并且您可以轻松创建`JComboBox`包含此功能的扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:29:38.953

我将利用这样一个事实，即我们知道`Component`返回的 from`DefaultListCellRenderer.getListCellRendererComponent`是`DefaultListCellRenderer`对象本身，并且它是`JLabel`.

我还假设您的外观以通常的方式计算组合框首选大小，类似于`BasicComboBoxUI`.

有了这些信息，这个解决方案可能很丑陋且效率低下，但它确实有效：

```
 comboBox.setRenderer(new DefaultListCellRenderer() {

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Component comp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (value == null) {
                setText("No selection");
            }
            return comp;
        }

      @Override
      public Dimension getPreferredSize() {
        // this doesn't work:
        // int minWidth = (new JLabel("No selection").getPreferredSize()).width;

        // this does work:
        String oldText = getText();
        setText("No selection");
        int minWidth = (super.getPreferredSize()).width;
        setText(oldText);

        Dimension d = super.getPreferredSize();
        if (d.width < minWidth) {
          return new Dimension(minWidth, d.height);
        } else {
          return d;
        }
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:45:58.247

~~到目前为止，这就是我所得到的，但一个主要问题是交叉 L&F 问题。另一种方法是遍历 ComboBox 模型的所有值和“无选择”值，并检查哪个是最长的。然后我可以将它设置为prototypeDisplayValue。问题是我需要一个图形上下文来测量每个字符串的边界。~~

以下是我们使用@Enwired 和@Robin 找到的两个解决方案。感谢他们俩。

编辑：在与@Robin 讨论后，我发现这个解决方案实际上要简单得多，并且适用于所有平台和外观。唯一的缺点是我们需要创建一个额外的 JComboBox。

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagLayout;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox {

    protected void initUI() {
        JFrame frame = new JFrame(TestComboBox.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        JComboBox comboBox = new JComboBox(new Object[] { "Something", "Stuff", "Beep" }) {

            private JComboBox internal;

            private JComboBox getInternalComboBox() {
                if (internal == null) {
                    internal = new JComboBox(new Object[] { null });
                }
                return internal;
            }

            @Override
            public Dimension getPreferredSize() {
                Dimension preferredSize = super.getPreferredSize();
                if (getSelectedItem() == null) {
                    getInternalComboBox().setRenderer(getRenderer());
                    Dimension nullDimension = getInternalComboBox().getPreferredSize();
                    preferredSize.width = Math.max(preferredSize.width, nullDimension.width);
                    preferredSize.height = Math.max(preferredSize.height, nullDimension.height);
                }
                return preferredSize;
            }

            @Override
            public void updateUI() {
                internal = null;
                super.updateUI();
            }
        };
        comboBox.setRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                Component comp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (value == null) {
                    setText("No selection");
                }
                return comp;
            }
        });
        comboBox.setSelectedItem(null);
        panel.add(comboBox);
        frame.add(panel);
        frame.setSize(200, 100);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestComboBox().initUI();
            }
        });
    }
} 
```

编辑2：在与@Enwired 讨论后，提出了这个替代解决方案，即直接覆盖ListCellRenderer getPreferredSize。在这一个中，您可以尝试浏览不同的可用 L&F。

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox {

    protected void initUI() {
        final JFrame frame = new JFrame(TestComboBox.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        JComboBox comboBox = new JComboBox(new Object[] { "Something", "Stuff", "Beep" });
        comboBox.setRenderer(new DefaultListCellRenderer() {

            private Dimension nullDimesion;

            @Override
            public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                if (value != null && nullDimesion == null) {
                    nullDimesion = ((JComponent) getListCellRendererComponent(list, null, -1, false, false)).getPreferredSize();
                }
                Component comp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (value == null) {
                    setText("No selection");
                }
                return comp;
            }

            @Override
            public Dimension getPreferredSize() {
                Dimension preferredSize = super.getPreferredSize();
                if (nullDimesion != null) {
                    preferredSize.width = Math.max(preferredSize.width, nullDimesion.width);
                    preferredSize.height = Math.max(preferredSize.height, nullDimesion.height);
                }
                return preferredSize;
            }

            @Override
            public void updateUI() {
                nullDimesion = null;
                super.updateUI();
            }
        });
        comboBox.setSelectedItem(null);
        final JComboBox uiComboBox = new JComboBox(UIManager.getInstalledLookAndFeels());
        uiComboBox.setRenderer(new DefaultListCellRenderer() {
            @Override
            public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                Component comp = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                if (value instanceof LookAndFeelInfo) {
                    LookAndFeelInfo info = (LookAndFeelInfo) value;
                    setText(info.getName());
                }
                return comp;
            }
        });
        uiComboBox.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            UIManager.setLookAndFeel(((LookAndFeelInfo) uiComboBox.getSelectedItem()).getClassName());
                            SwingUtilities.updateComponentTreeUI(frame);
                        } catch (ClassNotFoundException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (InstantiationException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (IllegalAccessException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (UnsupportedLookAndFeelException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                    }
                });
            }
        });
        panel.add(comboBox);
        panel.add(uiComboBox);
        frame.add(panel);
        frame.setSize(300, 100);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestComboBox().initUI();
            }
        });
    }
} 
```

# javascript - 发送原生质日期时间选择器信息。到不同的div

> ID：11582479
> 
> 赞同：1
> 
> 时间：2012-07-20T15:33:29.577
> 
> 标签：javascript, datetime, datepicker

我正在尝试实现一个[Protoplasm datetimepicker](http://jongsma.org/software/protoplasm/control/datepicker)小部件，我想以一种不错的格式在 div 中显示选定的日期/时间，然后在提交表单时将日期/时间传输到 MySQL。Protoplasm 似乎完全依赖于它的内部 javascript 文件，所以我真的没有任何代码可以显示。这就是我在代码方面真正拥有的一切......

```
<input type="text" name="date" size="25px" class="datetimepicker" /> 
```

有 Protoplasm 经验的人可以在这里提供帮助吗？谢谢！

# php - 使用php的多种形式

> ID：11582480
> 
> 赞同：1
> 
> 时间：2012-07-20T15:33:29.943
> 
> 标签：php, forms

我正在尝试创建三种形式。我希望他们按一定的顺序去。然而，相反，第一种形式是单独出现的，但第二种和第三种形式是相互连接的。虽然他们提交了三遍。我如何获得它以便每个表格单独出现？这是我的php

```
 <?php if ($_POST['token'] == "2" && "3") { ?>
 <h1>Approval Decision Submited.</h1>

 <?php } else if ($_POST['token'] == "1" && "2") {
echo "<h1>Form has been submitted</h1>";
} else {

if (isset($_GET['uid']) && isset($records)){

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:37:46.960

这可能不是您想要的：

```
$_POST['token'] == "2" && "3" 
```

像这样也没有意义：

```
($_POST['token'] == "2") && "3" 
```

或者像这样：

```
$_POST['token'] == ("2" && "3") 
```

我猜你想要这个：

```
$_POST['token'] == "2" || $_POST['token'] == 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:40:52.600

一个主要问题是您使用`&&`. `if ($_POST['token'] == "2" && "3")`将被评估为：

```
$_POST['token'] == 2   // true if it's equal to 2
AND
3    // a nonzero number is always true 
```

`token`因此，只要为 2 ，条件就会评估为真。

如果你写了`$_POST['token'] == 2 && $_POST['token'] == 3`，那么它永远不会是真的，因为`token`可以是 2 或 3，但不能同时是两个。

如果您希望它在`token`2 或 3 时为真，请使用`||`代替`&&`.

# ruby - 覆盖实例方法

> ID：11582483
> 
> 赞同：0
> 
> 时间：2012-07-20T15:33:45.457
> 
> 标签：ruby, metaprogramming

我有两个文件 foo 和 bar。Foo 实现类并初始化实例。在 bar.rb 文件中，我需要 foo.rb 但我也想从 foo.rb 更改 Foo::Bar 的实现

目录树

*   foo.rb
*   bar.rb

# foo.rb

```
module Foo
  class Bar
    def random_method
      puts "Foo::Bar.random_method"
    end 
  end
end
Foo::Bar.new.random_method 
```

# bar.rb

```
#here I want overwrite Foo::Bar.random_method
require_relative 'foo' # so this line use new random_method 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:48:37.850

如果您不允许触摸，这是不可能的（AFAIK）`foo.rb`。

```
# bar.rb

# redefine another random method (to be precise, define its first version)
module Foo
  class Bar
    def random_method
      puts 'another random method'
    end
  end
end

require_relative 'foo' # this will redefine the method and execute version from foo.rb 
```

一种可能的方法是拆分声明`Foo::Bar`和使用它的代码。

```
# foo_def.rb
module Foo
  class Bar
    def random_method
      puts "Foo::Bar.random_method"
    end 
  end
end

# foo.rb
require_relative 'foo_def'
Foo::Bar.new.random_method

# bar.rb
require_relative 'foo_def'

# replace the method here
module Foo
  class Bar
    def random_method
      puts 'another random method'
    end
  end
end

require_relative 'foo' # run with updated method 
```

# asp.net - 验证是否在带有 DevEx 控件的 aspx 页面上选择了任一控件

> ID：11582486
> 
> 赞同：1
> 
> 时间：2012-07-20T15:33:51.890
> 
> 标签：asp.net, validation, devexpress, client-side

我目前正在进行一项基于 Web 的调查，并且无法确定对多个 DevEx 控件的验证。在这个特定的示例中，我有一个 ASPxRadioButtonList、一个 ASPxCheckBox 和一个 ASPxButton 来提交该页面的答案。我需要验证基本上说单选按钮列表或复选框是否有答案，然后是 IsValid。我知道如何独立地向单选按钮列表和复选框添加验证，但这意味着当我需要一个/或时，两者都是必需的。

```
<dx:ASPxRadioButtonList ID="rbRating10" runat="server" CssFilePath="~/App_Themes/DevEx/{0}/styles.css"
                CssPostfix="DevEx" SpriteCssFilePath="~/App_Themes/DevEx/{0}/sprite.css" 
                Width="151px">
                <Items>
                    <dx:ListEditItem Text="Yes" Value="Yes" />
                    <dx:ListEditItem Text="No" Value="No" />
                </Items>
                <%--<ValidationSettings CausesValidation="True">
                    <RequiredField ErrorText="Required" IsRequired="True" />
                </ValidationSettings>--%>
                <ValidationSettings ValidationGroup="answered"></ValidationSettings>
                <Border BorderStyle="None" />
            </dx:ASPxRadioButtonList>
            <br />
            <dx:ASPxCheckBox ID="NoAnswerBox" text="Guest did not answer" runat="server" 
                style="margin-left: 12px" CheckState="Unchecked">
<ValidationSettings ValidationGroup="answered"></ValidationSettings>
            </dx:ASPxCheckBox>
        </div>        
        <div style="width: 100%px; margin: 15px auto 50px auto;">
            <div style="width: 160px; margin: 15px auto 0 auto; float: right;">
                <dx:ASPxButton ID="btnFwd" runat="server" 
                    CssFilePath="~/App_Themes/Aqua/{0}/styles.css" CssPostfix="Aqua" 
                    onclick="btnFwd_Click" SpriteCssFilePath="~/App_Themes/Aqua/{0}/sprite.css" 
                    Text="next question" Width="150px">                    
                </dx:ASPxButton> 
```

我一直试图将其作为 ASPxButton 标记中的客户端事件来解决，但我什至不知道从哪里开始，以前从未做过。我就是你所说的，一个n00b。下面是我的尝试，但我真的不知道这是否是正确的方向。

```
<ClientSideEvents Click="function(s, e) {
    var valid1 = NoAnswerBox.GetChecked();
    var valid2 = rbRating10.GetSelectedItem();

    if(valid1==&quot;True&quot; || valid2&gt;=0){
    e.IsValid = True;   
    }
}" />
</dx:ASPxButton> 
```

# wcf - WCF 模拟问题

> ID：11582496
> 
> 赞同：0
> 
> 时间：2012-07-20T15:34:18.987
> 
> 标签：wcf, impersonation, delegation

在实现需要代表原始调用者访问进程外资源的服务时，需要什么模拟级别？

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.security.principal.tokenimpersonationlevel.aspx)

> **模拟**：服务器进程可以在其本地系统上模拟客户端的安全上下文。服务器无法在远程系统上模拟客户端。
> 
> **委派** 服务器进程可以在远程系统上模拟客户端的安全上下文。

我假设**模拟**就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:55:33.080

只要您留在同一台机器上：是的，模拟就足够了。进程内或进程外都没有关系。

# fancybox - 如何使用 Fancybox 版本 2 获得绝对定位？

> ID：11582501
> 
> 赞同：0
> 
> 时间：2012-07-20T15:34:33.030
> 
> 标签：fancybox, fancybox-2

我们通过像这样传递内容来手动加载fancybox：

```
$.fancybox({
    content: content,
    showCloseButton: false,
    transitionIn: 'fade',
    transitionOut: 'fade',
    speedIn: 600,
    padding: 0,
    fixed: false
}); 
```

我们希望花式框在首次加载后保持在与文档相关的位置（绝对定位）。

将fixed 设置为false 会使fancybox 在滚动期间弹性地停留在屏幕中央。我们真的很喜欢fancybox：

*   加载时在视口中居中
*   滚动时保持绝对定位并保持相对于文档的位置

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:02:49.543

想通了，您还需要将 autoCenter 设置为 false ，如下所示：

```
$.fancybox({
    content: content,
    showCloseButton: false,
    transitionIn: 'fade',
    transitionOut: 'fade',
    speedIn: 600,
    padding: 0,
    fixed: false,
    autoCenter: false
}); 
```

# database - 求解三进制创建数据库

> ID：11582505
> 
> 赞同：0
> 
> 时间：2012-07-20T15:34:42.927
> 
> 标签：database, database-design, model, relational-database, relational-model

我有这个表：电影、会话（在日期时间显示的电影）和用户。

用户可以在具体会话中预订电影。画它我有它：

```
movie **1** ----- **n** sesion
              |
            **n**
             User 
```

我正在考虑创建这样的表：

电影（id，标题，分钟）会话（id，idMovie，日期时间）用户（id，名称）预订（idSesion，idUser，numTickets）

会好吗？或者我应该在我的预订表中加入 idMovie 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:47:14.330

您不需要 idMovie 在您的预订桌，而是在您的会话桌。会话如何知道它属于哪部电影？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:49:39.040

...在日期时间显示的电影...但是，如果您试图在电影正在播放时获取列表日期时间，您怎么能做到这一点？我认为您不需要在保留表中使用电影 ID，但您可能希望在会话表中有电影 ID。

然后，您可以通过了解用户或查找参加电影或会话的所有用户来访问电影。在预订中添加电影 ID 将是重复的参考和额外的东西来保持同步，你不需要，因为它可以被其他外键关系逆转。

# javascript - 如何使用 Javascript 获取 URL 参数？

> ID：11582512
> 
> 赞同：125
> 
> 时间：2012-07-20T15:35:09.553
> 
> 标签：javascript

> **可能重复：**
> [如何在 JavaScript 中获取“GET”请求参数？](https://stackoverflow.com/questions/831030/how-to-get-get-request-parameters-in-javascript)
> [jQuery querystring](https://stackoverflow.com/questions/3788125/jquery-querystring)
> [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript)

Javascript 没有提供一个核心方法来做到这一点，那么怎么做呢？

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-07-20T15:35:09.553

```
function getURLParameter(name) {
  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\+/g, '%20')) || null;
} 
```

所以你可以使用：

```
myvar = getURLParameter('myvar'); 
```

# c# - LINQ 子记录 null

> ID：11582525
> 
> 赞同：8
> 
> 时间：2012-07-20T15:35:31.360
> 
> 标签：c#, linq, entity-framework

我使用实体框架来创建我的数据库模式并生成我的代码。我有一个名为 Employee 的表，它在 DaysOff 表中有子记录。DaysOff 对 Employee 有一个外键，并且在我的模型中有一个 1 到 * 的关联。我在 Employee 表上运行了一个 LINQ 查询，并期望我的 Domain.Employee 对象将填充 DaysOff 但 DaysOff 为空。当我深入研究对象时，我看到“employee.DaysOff.Count 引发了 System.ObjectDisposedException 类型的异常”。我认为将填充子记录是错误的吗？我该怎么做？这是我调用来获取我的员工的方法：

```
public static Domain.Employee SelectEmployee(int employeeId)
{
    using (var db = new EmployeeEntities())
    {

        Domain.Employee emp = (from e in db.Employees
                       where e.EmployeeId == employeeId
                       select e
                             ).FirstOrDefault();

        return emp;
    }
} 
```

编辑：下面接受的答案和评论（全部赞成）的组合帮助我解决了这个问题（耶！）：

```
public static Domain.Employee SelectEmployee(int employeeId)
{
    using (var db = new EmployeeEntities())
    {

        Domain.Employee emp = (from e in db.Employees.Include("DaysOff")
                       where e.EmployeeId == employeeId
                       select e).FirstOrDefault();

        return emp;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T15:38:41.747

> 我认为将填充子记录是错误的吗？

我*猜*这可能`DaysOff`是懒惰地填充，但到那时`EmployeeEntities`已经被处理掉了。您可能想尝试以下方法：

```
using (var db = new EmployeeEntities().Include("Employee.DaysOff")) 
```

另请注意，您在`using`语句中的代码会更简单地写成：

```
return db.Employees.FirstOrDefault(e => e.EmployeeId == employeeId); 
```

* * *

**编辑**

上面的代码不正确。`Include`必须用在`ObjectQuery<T>`or上`IQueryable<T>`，不能用在`ObjectContext`/`DbContext`上。正确用法是：

```
using (var db = new EmployeeEntities())
{
    return db.Employees.Include("DaysOff")
        .FirstOrDefault(e => e.EmployeeId == employeeId);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:40:55.443

这是关于加载子实体的帖子

[在 EF 4.1 第 6 部分中使用 DbContext：加载相关实体](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

**急切加载相关实体**

```
 // Load all prents and related childs
    var princesses1 = context.Parent
                          .Include(p => p.childs)
                          .ToList(); 
```

**显式加载相关实体**

```
var parent = context.parent.Find(1);
    context.Entry(parent)
        .Collection(p => p.childs)
        .Load(); 
```

# iphone - ChildViewController 推送而不是替换父 ViewController 中的视图

> ID：11582534
> 
> 赞同：0
> 
> 时间：2012-07-20T15:36:21.623
> 
> 标签：iphone, ios, cocoa-touch, segue

我有以下设置

[http://i.minus.com/j6rhBqXOkRRjl.png](http://i.minus.com/j6rhBqXOkRRjl.png)

当我触摸任一按钮时，相应 targetViewController 的内容应出现在按钮下方的白框中。

这很好用（请参阅下面的代码），但是一旦我将 ParentViewController 包含在 Navigation Controller 中，ViewController 就会使用“First”标签推送到 View，而不是将其添加到 ParentViewController 视图上的框中。

两个 segue 都被定义为“自定义”，那么为什么会发生推送呢？

这是我显示 ViewControllers 的代码：

```
-(void)swapVC:(UIViewController *)newController{

    if(_currentViewController){
        [_currentViewController removeFromParentViewController];
    }

    [self addChildViewController:newController];
    [self.contentView addSubview:newController.view];

    [newController didMoveToParentViewController:self];    
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"showFirst"]){

        [self swapVC:segue.destinationViewController];
    } else if([segue.identifier isEqualToString:@"showSecond"]){
        [self swapVC:segue.destinationViewController];        
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:22:59.150

You shouldn't use a segue. Use the `transitionFromViewController:toViewController:duration:options:animation:completion` method when you want to switch view controllers. The segue will simply push the view controller on the stack, probably because the custom segue is undefined.

**EDIT:** You can leave the segues in there, but if you perform them, it will push it onto the stack.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:26:50.957

# 苹果的解决方案

使用 a`UITabBarController`而不是导航控制器。它内置了这个功能！

如果那不是一个选项，请继续阅读下面的内容......

# 了解导航控制器以及何时使用它们

导航控制器维护视图控制器的堆栈（[先进先出](http://en.wikipedia.org/wiki/FIFO)），并在堆栈顶部显示视图控制器。它使用将视图控制器“推送”和“弹出”到堆栈上的序列来从该堆栈中添加和删除视图控制器。当您有一个清晰的屏幕流层次结构时，这非常有用，例如显示一般信息的 UITableView，以及显示有关在 UITableView 中选择的项目的详细信息的 UIViewController。UITableView 清楚地将您带到此示例中的详细视图控制器。

尽可能尝试使用 Apple 的导航控制器和标签栏控制器。它们方便且制作精良。但是，当这些都不起作用时，我们必须自己处理转换......

在您的情况下，似乎没有清晰的视图流层次结构（您的父视图拥有一个可以更改的视图，但您的父视图不会“先于”或“后于”您的第一个和第二个子视图），所以让我们开始进行过渡。

* * *

## 一个简单的解决方案

因此，我们希望我们的视图发生变化，但不是通过使用将视图推送到其堆栈的导航控制器（更准确地说，它推送具有这些视图的视图控制器）。如果您不使用导航控制器，请摆脱故事板中的 segue 和代码中的 segue 方法（也使您的父视图控制器成为根视图。为此，进入 sotryboard，选择您的父视图控制器并使用实用程序工具栏以选中标记为“初始视图控制器”的框。如果这给您带来任何问题，请确保选择视图控制器，而不是视图）。最简单的方法是使用：

```
transitionFromViewController:toViewController:duration:options:animations:completion:
```

* * *

## 从 Storyboard 实例化控制器

您可以通过在父视图控制器中实例化两个子视图控制器来获取“第一个”和“第二个”视图控制器，如下所示：

```
firstVC = [self.storyboard instantiateViewControllerWithIdentifier:firstIdentifier];
secondVC = [self.storyboard instantiateViewControllerWithIdentifier:secondIdentifier]; 
```

在情节提要中定义的位置`firstIdentifier`和位置。`secondIdentifier`（在情节提要中选择一个视图控制器，然后转到 Utilities 工具栏顶部的 Attributes Inspector 选项卡。该选项卡看起来像一个盾牌/本垒板。在 Attributes Inspector 的相应文本字段中定义标识符。在实际代码中，标识符是一个 NSString* 例如@“我的视图控制器”）

# lotus-notes - Lotus notes Document 同时出现在 Inbox 和 SentItem 中

> ID：11582535
> 
> 赞同：0
> 
> 时间：2012-07-20T15:36:28.310
> 
> 标签：lotus-notes

我创建了一个 CPP COM dll 来读取 EML 文件并将其添加到 Lotus notes NSF 文件中。使用 MIMEContent 创建邮件，但问题是当我将文档添加到文件夹视图 $Inbox 时，相同的邮件被复制 $Sent Item 文件夹。

我正在通过 chilkat 邮件将 eml 作为 mime 字符串读取并将其添加到注释文档中

```
MIMEStreamWrite(( unsigned char*)ch_mimeContent,strlen(ch_mimeContent),hMIMEStream); 
if ( error == MIME_STREAM_IO )
 { printf("MIMEStreamPutLine error.\n"); 
MIMEStreamClose(hMIMEStream); return ; } 
// itemize the mime stream to the note error = MIMEStreamItemize( handle,NULL, 0, MIME_STREAM_ITEMIZE_FULL,hMIMEStream); – 
```

给我的解决方案是设置交货日期

```
SYSTEMTIME sysdate;

char   dateFormat[100];
 TIMEDATE    start_time;                   
char        timetext[MAXALPHATIMEDATE+1];   
char        far *text_pointer;
email.get_LocalDate(sysdate);
sprintf(dateFormat,"%02d/%02d/%04d %d:%d:%d",
        //      // sysdate.wMonth, sysdate.wDay, sysdate.wYear,sysdate.wHour,sysdate.wMinute,sysdate.wSecond);
strcpy (timetext, dateFormat);
text_pointer = timetext
STATUS STATUS;
if(STATUS  error2 =     ConvertTextToTIMEDATE(NULL,NULL,
                                                      &text_pointer,
                                                      MAXALPHATIMEDATE,
                                                      &start_time))

if(Status= MailAddHeaderItem(handle, MAIL_DELIVEREDDATE_ITEM_NUM, (char *)(&start_time), (WORD)sizeof(TIMEDATE)))
MIMEStreamClose(hMIMEStream);       
newdoc.Save(); 
```

当我在“我们英语”的语言环境中运行此代码时，问题就在这里，它工作正常。但对于其他语言环境（德国），它在 Lotus note 中给出的日期为 17.06 失败。**** **:** ;

我也试过

```
LNITEM date;
getitem("Posted date",&date);
and the set the delivery date CreateItem("Delivered Date",&date) 
```

但在nsf中没有找到任何文件。

我设置交货日期的代码有什么问题吗？或我应该尝试的任何其他选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:34:31.793

首先，设置 DeliveredDate 的解决方案是正确的。

关于您的本地化问题，请参阅 C-API 文档，ConvertTextToTIMEDATE 的第一个参数（您将其设为 NULL）是指向包含有效国际化设置的结构的指针。

由于德语语言环境不理解您使用的“月/日/年”语法（在欧洲，我们通常使用更合理的 day.month.year 或 year.month.day 语法；），因此 ConvertTextToTIMEDATE 将失败，正如您所注意到的。

您要么必须根据语言环境构建 dateFormat 字符串，要么告诉 ConvertTextToTIMEDATE 你使用美国语言环境。

# character-encoding - shell 命令 iconv 没有给出询问的字符集

> ID：11582541
> 
> 赞同：0
> 
> 时间：2012-07-20T15:36:44.893
> 
> 标签：character-encoding, iconv

我有一个字符集 US-ASCII 的文件，想用 UTF-8 对其进行编码。

```
> file -i from.php
from.php: text/x-php; charset=us-ascii 
```

我输入这个命令：

```
> sudo -u www-data iconv -f US-ASCII -t UTF8 from.php > to.php 
```

文件 to.php 已创建，但字符集错误。

```
> file -i to.php
to.php: text/x-php; charset=us-ascii 
```

我检查了 charset 的 iconv 列表，US-ASCII 和 UTF8 似乎写得很好。

此命令不能更好地工作：

```
sudo -u www-data iconv -f US-ASCII -t UTF8 -o to.php from.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:50:06.183

我想我找到了解决方案。

该文件保留在 us-ascii 中，只是因为它不包含任何非 ASCII 字符，例如重音字母。

我在文件中添加了一个重音字母并重新输入命令：

```
> file -i to.php
to.php: text/x-php; charset=utf-8 
```

是的 ！

希望它会帮助某人。

# ajax - 级联中的预选选项通过 XMLHTTP 创建的菜单 我设置了一系列 3 个级联选择菜单，其中的选项取自 MySQL 数据库。我正在使用 onchange 事件触发 javascript，该 javascript 使用 XmlHttpRequest 根据第一个中的选择替换第二个菜单的选项，然后根据第二个中的选择替换第三个菜单的选项。那里一切都很好。但后来我想用数据预先填写表格。这是一个时间卡，所以每一行都包含选择项目类型、项目编号和任务编号的菜单，然后是每天的小时数，所以我必须预先填写已填写的

ID：11582545

赞同：0

时间：2012-07-20T15:36:52.077

标签：ajax, xmlhttprequest, selected, cascadingdropdown

# javascript - 使用 jQuery 和各种大小的缩略图实现居中和聚集的布局？

> ID：11582548
> 
> 赞同：1
> 
> 时间：2012-07-20T15:36:59.603
> 
> 标签：javascript, jquery, html, jquery-masonry, jquery-isotope

有没有一个 jQuery 插件可以为一堆不同宽度和高度的缩略图做一个这样的居中聚集布局？

![在此处输入图像描述](../Images/07bfacf9e555c4ce817152bd8569d4f9.png)

我正在研究 Masonry、Isotope 和 Workman jQuery 插件，但据我所知，它们都失败了。它们看起来很棒，但它们似乎只适用于相同宽度或可被最小宽度整除的重新调整大小的图像。

因为我的横向缩略图可以有不同的宽度，而我的纵向缩略图可以有不同的高度，所以这些插件看起来不太热。

我考虑过固定宽度以符合这些插件，但它使所有横向缩略图都太小了。

有谁知道这些插件的替代方案，或者配置这些插件以**实现上述****各种大小缩略图**的布局的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:14:12.497

我可以在这个问题中想到一个圆形包装算法：[在数据可视化中排列圆圈](https://stackoverflow.com/questions/7121126/arranging-circles-in-data-visualisation)。它解决了类似砌体或同位素的问题。

# r - 拆分数据框会产生奇怪的输出

> ID：11582549
> 
> 赞同：1
> 
> 时间：2012-07-20T15:37:02.590
> 
> 标签：r, list, dataframe, split

我只是想根据我的 column 的值将我的数据框拆分为几个数据框`intervention`，但是当我尝试这样做时会得到一些意外的输出。

检查我确实有一个名为的数据框`raw`：

```
print(class(raw)); 
```

产量

```
[1] "data.frame" 
```

这是拆分前的数据框：

```
 position                                   id equation      intervention
1       -2 D9E4262D-5B6D-ADB8-D605-B97D63437064      9,5            corral
2        1 B2FFB0B0-210E-022F-293A-0ABFDDB3DC4B      2,3            corral
3        1 85905A69-50F7-AF73-7A51-08B8FDCFAF2D      1,2         horseshoe
4       -2 76A55530-5A39-6A73-3216-D276EABFA2F6      3,4 test_intervention
5       -1 4CFA5D1B-EA32-8584-A1C9-540D9FFB24CB      3,4 test_intervention 
```

然后我用

```
groups <- split(raw, raw$intervention); 
```

当我打印

```
print(groups); 
```

我明白了：

```
$corral.corral.horseshoe.test_intervention.test_intervention
  position                                   id equation      intervention
1       -2 D9E4262D-5B6D-ADB8-D605-B97D63437064      9,5            corral
2        1 B2FFB0B0-210E-022F-293A-0ABFDDB3DC4B      2,3            corral
3        1 85905A69-50F7-AF73-7A51-08B8FDCFAF2D      1,2         horseshoe
4       -2 76A55530-5A39-6A73-3216-D276EABFA2F6      3,4 test_intervention
5       -1 4CFA5D1B-EA32-8584-A1C9-540D9FFB24CB      3,4 test_intervention 
```

这看起来不像是按干预分组的数据框列表。还要注意奇怪的线

```
$corral.corral.horseshoe.test_intervention.test_intervention 
```

**编辑**

dput（原始）的输出：

```
structure(list(position = list(-2, 1, 1, -2, -1), id = list("D9E4262D-5B6D-ADB8-D605-B97D63437064",
    "B2FFB0B0-210E-022F-293A-0ABFDDB3DC4B", "85905A69-50F7-AF73-7A51-08B8FDCFAF2D",
    "76A55530-5A39-6A73-3216-D276EABFA2F6", "4CFA5D1B-EA32-8584-A1C9-540D9FFB24CB"),
    equation = list("9,5", "2,3", "1,2", "3,4", "3,4"), intervention = list(
        "corral", "corral", "horseshoe", "test_intervention",
        "test_intervention")), .Names = c("position", "id", "equation",
"intervention"), row.names = c(NA, -5L), class = "data.frame") 
```

**编辑** 这是我的完整代码，它很小。

```
#!/usr/local/bin/Rscript --slave
require("rjson", quietly=TRUE);

# First we need to grab the items from the R api, and save them into a data frame
raw = fromJSON(file="http://some/url.com");

#reformats data into dataframe
raw <- as.data.frame(do.call(rbind,raw));
#we need to create a new dataframe formatted according to the needs of catR
groups <- split(raw, raw$intervention);
print(groups); 
#saveRDS(object=fromJSON(file="http://some/url.com"),file="/home/bitnami/IRT_data/core_standard.rda"); 
```

我像这样运行我的代码：

```
~/Rscript my_R_file.R 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:53:35.330

```
raw1<-read.table(header=T,text="  position                                   id equation      intervention
1       -2 D9E4262D-5B6D-ADB8-D605-B97D63437064      9,5            corral
2        1 B2FFB0B0-210E-022F-293A-0ABFDDB3DC4B      2,3            corral
3        1 85905A69-50F7-AF73-7A51-08B8FDCFAF2D      1,2         horseshoe
4       -2 76A55530-5A39-6A73-3216-D276EABFA2F6      3,4 test_intervention
5       -1 4CFA5D1B-EA32-8584-A1C9-540D9FFB24CB      3,4 test_intervention")

groups <- split(raw1, raw1$intervention)

> groups
$corral
  position                                   id equation intervention
1       -2 D9E4262D-5B6D-ADB8-D605-B97D63437064      9,5       corral
2        1 B2FFB0B0-210E-022F-293A-0ABFDDB3DC4B      2,3       corral

$horseshoe
  position                                   id equation intervention
3        1 85905A69-50F7-AF73-7A51-08B8FDCFAF2D      1,2    horseshoe

$test_intervention
  position                                   id equation      intervention
4       -2 76A55530-5A39-6A73-3216-D276EABFA2F6      3,4 test_intervention
5       -1 4CFA5D1B-EA32-8584-A1C9-540D9FFB24CB      3,4 test_intervention 
```

和你不一样。似乎工作正常

raw 是你的数据框， raw1 是 read.table 版本

```
> str(raw1$intervention)
 Factor w/ 3 levels "corral","horseshoe",..: 1 1 2 3 3
> str(raw$intervention)
List of 5
 $ : chr "corral"
 $ : chr "corral"
 $ : chr "horseshoe"
 $ : chr "test_intervention"
 $ : chr "test_intervention" 
```

当您将输出从 RJSON 转换为 data.frame 时，它​​正在创建列表的数据框

这条线是你的问题

```
#reformats data into dataframe
raw <- as.data.frame(do.call(rbind,raw)); 
```

采用

```
 raw2<-data.frame(lapply(raw,unlist)) 
```

# javascript - 将图像加载到 localStorage 并将图像 src 设置到该位置

> ID：11582556
> 
> 赞同：6
> 
> 时间：2012-07-20T15:37:15.570
> 
> 标签：javascript, html, local-storage

我已成功允许用户将图像上传到本地存储，但我希望能够拍摄该图像并用该图像填充页面上的图像元素。

```
<h3>Please upload the image you wish to use.</h3>
<input id="photoin" type="file" accept="image/*;capture=camera"></input>
<a href="#delete_1" data-role="button" onClick="save()">Submit</a>

<script>
    var i = 0; 
    function save(){                
        var input = document.getElementById("photoin").value; 
        var name = "photo_" + i; 
        localStorage.setItem(name, input);      
        $("#QR").src = window.localStorage[name]; 
        i++; 
    }
</script> 
```

我正在寻找能够成功地为我提供存储中图像的 URL 的东西，因为“window.localStorage [name]”只返回与该键配对的值。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T16:44:00.707

好吧，您可以将实际的图像数据存储在 localStorage 中（尽管要小心 - 有一个限制）

查看[HTML5 Rocks 教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/)并向下滚动到标题为**READING FILES的位**

这里正在读取文件，然后将输出放入 img:src 标记中。您还可以将其放入 localStorage

示例： http: [//jsfiddle.net/8V9w6/](http://jsfiddle.net/8V9w6/) - 选择一个图像文件，看到缩略图？然后重新加载页面。缩略图应保留在那里。（适用于最新的 Chrome/Firefox）

# c# - 无法加载文件或程序集或其依赖项之一 - 如何确切知道无法加载的内容？

> ID：11582560
> 
> 赞同：2
> 
> 时间：2012-07-20T15:37:23.357
> 
> 标签：c#

运行一个应用程序我收到这样的错误：

```
C:\Program Files\P2CGate\sdk\samples\net\basic>nsend.exe

Unhandled Exception: System.IO.FileNotFoundException: Could not load file or ass
embly 'cgate_net, Version=0.9.10.31381, Culture=neutral, PublicKeyToken=null' or
 one of its dependencies. Не удается найти указанный файл.
   at send.Send.Main(String[] args) 
```

消息太笼统了，因为我不知道究竟什么是不能加载的。它似乎`cgate_net` **已**加载，因为我确实看到了一些细节`Version=0.9.10.31381`。

所以我猜有些`dependencies`无法加载，但究竟是哪一个呢？

在不知道无法加载的情况下，我不知道如何解决此问题。为什么 C# 不打印无法加载的内容以及如何获取此信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:39:31.793

[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)是您的朋友。

融合日志查看器监视解析 .NET 程序集的尝试并以可视方式显示这些尝试。它将告诉您哪个程序集无法解决以及它如何尝试解决它。

确保**以管理员身份运行，**否则它将默默地什么也不做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T15:39:32.933

如果程序集或其依赖项之一无法加载，您可以通过查看 Fusion 日志来查看更多详细信息：

*   [Fuslogvw.exe（程序集绑定日志查看器）](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.100).aspx)

另请参阅此相关问题：

*   [如何在 .NET 中启用程序集绑定失败日志记录 (Fusion)](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net)

# cakephp - CakePHP 2.x 更改会话的调试级别

> ID：11582567
> 
> 赞同：1
> 
> 时间：2012-07-20T15:37:52.340
> 
> 标签：cakephp

我希望能够为一个会话设置调试级别。也就是说，单击管理页面中的某处并存储新的调试级别，以便 core.php 读取它并从该变量设置调试级别或将其自身设置为默认值。

在 core.php 设置调试级别时，会话组件似乎还没有准备好。

我该如何做到这一点，也许以其他方式？我真的必须建立一个数据库表吗？？？

我试过这个：

```
if(isset($_SESSION['debug'])) {
    Configure::write('debug', $_SESSION['debug']);
} 
```

但它不起作用，

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:06:04.573

我`bootstrap.php`只在我的开发服务器上使用它（只是为了摆脱 DebugKit 和其他调试东西，看看没有它们和页面速度的页面是什么样子）：

```
if (isset($_GET['debug']) && $_GET['debug'] === 'off') {
    Configure::write('debug', 0);
} 
```

我知道这是可行的。所以你可以适应你所拥有的，但试试看`bootstrap.php`：

```
if (isset($_SESSION['debug'])) {
    Configure::write('debug', $_SESSION['debug']);
} 
```

# javascript - 如何使用 Javascript Regex 仅替换一个换行符？

> ID：11582570
> 
> 赞同：-2
> 
> 时间：2012-07-20T15:37:54.877
> 
> 标签：javascript, regex

我有一段文字：

我需要用“”替换一个换行符（`\r\n`），`<br>`当有多个换行符时，用一个换行符替换它。

例如：

```
LINE1 
LINE2

LINE3
LINE4

LINE3
LINE4 
```

变成：

```
LINE1<br>LINE2
LINE3<br>LINE4
LINE5<br>LINE6 
```

回答：

```
.replace(/([^\r\n])\r\n([^\r\n])/g, '$1<br>$2').replace(/[\r\n]+/g, "\r\n"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:42:48.077

```
str
   .replace(/\r\n([^\r\n])/g, "<br>$1")
   .replace(/[\r\n]+/g, "\r\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:46:10.167

这可以通过一个简单的正则表达式来完成：

```
str.replace(/[\r\n]+/g, "<br>"); 
```

*   `[\r\n]+`匹配一个普通的换行符或回车符，后跟一个至少出现一次的换行符并将其替换为`<br>`
*   修饰符告诉它`g`匹配不止一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:46:18.340

我会建议一些可以容忍不同换行符组合的东西：

```
str = str.replace(/[\r\n]+/g, "<br>"); 
```

这将匹配是否只有 CR、LF 或它们的任何组合，它将匹配它们的任何连续序列并将其替换为`<br>`. “g”标志告诉它替换字符串中的所有此类序列。

# java - 用什么代替 postDelayed 来节省内存

> ID：11582571
> 
> 赞同：0
> 
> 时间：2012-07-20T15:38:03.463
> 
> 标签：java, android, memory, memory-management, memory-leaks

在我的应用程序中，我使用具有多个可运行对象的处理程序。为了调用这些可运行对象，我循环 postDelayed 以便它们充当计时器。我意识到随着时间的推移，这会产生一个巨大的堆（10mb 并继续增加）。所以我的问题是我可以使用什么来代替不会生成大量消息的 postDelayed？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:02:57.887

您的可运行文件不太可能消耗这么多内存。每个可运行实例在处理完后都应该被 GC 清除。如果您更快地创建和发布可运行对象，那么它们会被执行，您将获得 ANR，因为您的 UI 线程将无法调度输入事件。如果您经常创建新的可运行文件，则会导致 GC 更频繁地触发，但您的堆不应该增长。

您的应用程序中更有可能存在内存泄漏。您可以使用 MAT 检查 Java 堆中究竟是什么消耗了大量内存。

# asp.net-mvc-4 - 如何将 Kendo UI Grid 绑定到 Web API 控制器？

> ID：11582572
> 
> 赞同：3
> 
> 时间：2012-07-20T15:38:08.020
> 
> 标签：asp.net-mvc-4, asp.net-web-api, kendo-ui

我在将数据从 Web API 控制器绑定到 Kendo UI 网格时遇到问题。不幸的是，我找不到任何这样的例子。

这是 API 控制器：

```
public class FruitController : ApiController
{
    public class Fruit
    {
        public string Name { get; set; }
        public string Color { get; set; }
    }

    public IEnumerable<Fruit> GetFruits()
    {
        List<Fruit> list = new List<Fruit>();

        Fruit f = new Fruit();
        f.Name = "Apple";
        f.Color = "Red";

        list.Add(f);

        f = new Fruit();
        f.Name = "Kiwi";
        f.Color = "Green";

        list.Add(f);

        return list;
    }
} 
```

在我的 .cshtml 文件中，我有：

```
 @model IEnumerable<FruitController.Fruit>

    @(Html.Kendo().Grid(Model)    
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Bound(p => p.Name);
            columns.Bound(p => p.Color);
        })
        .Groupable()
        .Pageable()
        .Sortable()
        .Scrollable()
        .Filterable()
        .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("GetFruits", "api/Fruit").Type(HttpVerbs.Get)

            )
        )
    ) 
```

当我运行它时，我从控制器获得了成功的 JSON 响应：

[{"Name":"Apple","Color":"Red"},{"Name":"Kiwi","Color":"Green"}]

但是网格中没有数据。我有什么明显的遗漏吗？我一直无法弄清楚这一点！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:41:22.407

看看这些例子，它需要一个 DataSourceResult。在您的控制器中包含一个执行类似操作的方法，然后它就可以工作了。

我正在考虑使用 postsharp 创建一个方面，该方面将在 Kendo 所需的控制器类中引入创建/更新/删除方法。

```
using Kendo.Mvc.Extensions;

  public DataSourceResult Read([DataSourceRequest] DataSourceRequest request)
        {
            return this.Get().ToDataSourceResult(request);
        } 
```

我认为 Kendo 没有为此 API 控制器类提供属性/方面实际上很奇怪，但也许我遗漏了一些东西..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-21T13:58:08.910

我也很难让 Kendo 为 API 控制器工作。对我来说，从 切换`using Kendo.Mvc.Extensions`到`using Kendo.DynamicLinq`.

在我的 Kendo 数据源中，我删除了神秘的线`type: aspnetmvc-ajax`和`parameterMap`.

# jquery - 类似于 val() 但对于选择多个中的选定文本？

> ID：11582574
> 
> 赞同：10
> 
> 时间：2012-07-20T15:38:15.490
> 
> 标签：jquery

> **可能重复：**
> [jQuery 从下拉列表中获取选定的文本](https://stackoverflow.com/questions/1643227/jquery-get-selected-text-from-dropdownlist)

```
<select id="id_deals" name="deals" multiple="multiple">
  <option value="1">deal 2</option>
  <option value="2">deal 1</option>
</select> 
```

使用 jquery，我可以像这样获取所选项目的值：

```
var selected = $(e.target).val();

>> 2 
```

但令人惊讶的是，当我尝试获取实际选择的文本（例如交易 1）时，它给了我两个条目：

```
var selected_text = $(e.target).text();

>> "\ndeal 2\ndeal 1\n" 
```

为什么会这样，我怎样才能获得所选条目的文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T15:41:17.283

jQuery "text()" 方法返回所选元素的内部文本。在您的情况下，您正在选择整个 select 标签，因此它会为您提供其中的所有文本（不包括嵌套标签本身）。相反，使用：

`$("#yourdropdownid option:selected").text();`

参见：[Get selected text from a drop-down list (select box) using jQuery](https://stackoverflow.com/questions/1643227/jquery-get-selected-text-from-dropdownlist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:42:53.160

e.Target 包含选择列表！这就是为什么您在调用`text()`. 如果你调用`val()`，你会得到选择列表的值，它是选项之一的值。

# regex - 从专有名称中解析通用名称的正则表达式

> ID：11582584
> 
> 赞同：4
> 
> 时间：2012-07-20T15:39:01.327
> 
> 标签：regex, macos, bash, distinguishedname, dscl

我正在尝试仅从OSX 终端**bash**环境中的命令返回的以下 DN解析（使用`sed`） ...`First Last``DSCL`

 **`CN=First Last,OU=PCS,OU=guests,DC=domain,DC=edu`

我已经尝试了该站点的多个正则表达式以及其他与我想要的问题非常接近的问题......主要是[这个问题](https://stackoverflow.com/questions/97113/regular-expression-to-parse-ldap-dn)......我已经尽我所能尝试遵循建议（我不一定认为自己是新手。 ..但绝对是正则表达式的新手..）

`DSCL`返回一个 DN 列表，我只想`First Last`打印到一个文本文件。我尝试过使用`sed`，但似乎无法获得正确的功能。我愿意接受其他命令来解析输出。每行都以 和 开头，然后`CN=`有一个逗号。`Last``OU=`

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T13:37:17.117

我认为到目前为止提供的所有正则表达式答案都是错误的，因为它们没有正确处理公用名中带引号的“，”字符。例如，考虑如下的 distinctName：

```
CN=Doe\, John,CN=Users,DC=example,DC=local 
```

最好使用能够解析distinguishedName 组件的真实库。如果您在命令行上寻找快速的东西，请尝试通过管道将您的 DN 传递给如下命令：

```
 echo "CN=Doe\, John,CN=Users,DC=activedir,DC=local" | python -c 'import ldap; import sys; print ldap.dn.explode_dn(sys.stdin.read().strip(), notypes=1)[0]' 
```

（取决于安装了 python-ldap 库）。您可以使用 PHP 的内置 ldap_explode_dn() 函数来制作类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:48:54.080

两个`cut`命令可能是最简单的（虽然不一定是最好的）：

```
DSCL | cut -d, -f1 | cut -d= -f2 
```

首先，用逗号分割输出`DSCL`并打印第一个字段（“CN=First Last”）；然后将其拆分为等号并打印第二个字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:37:48.787

[http://www.gnu.org/software/gawk/manual/gawk.html#Field-Separators](http://www.gnu.org/software/gawk/manual/gawk.html#Field-Separators)

```
awk -v RS=',' -v FS='=' '$1=="CN"{print $2}' foo.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T15:57:19.377

使用 sed：

```
sed 's/^CN=\([^,]*\).*/\1/' input_file 
```

> ```
> ^           matches start of line 
> CN=         literal string match
> \([^,]*\)   everything until a comma
> .*          rest 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T17:24:34.077

我也喜欢 awk，所以我打印第四个字符的子字符串：

`DSCL | awk '{FS=","}; {print substr($1,4)}' > filterednames.txt`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-03T10:20:33.953

此正则表达式将解析一个专有名称，为每个匹配项提供`name`和捕获组。`val`

当 DN 字符串包含逗号时，它们应该被引用 - 此正则表达式正确处理带引号和不带引号的字符串，并且还处理带引号的字符串中的转义引号：

`(?:^|,\s?)(?:(?<name>[A-Z]+)=(?<val>"(?:[^"]|"")+"|[^,]+))+`

这是很好的格式：

```
(?:^|,\s?)
(?:
    (?<name>[A-Z]+)=
    (?<val>"(?:[^"]|"")+"|[^,]+)
)+ 
```

这是一个链接，因此您可以看到它的实际效果： [https ://regex101.com/r/zfZX3f/2](https://regex101.com/r/zfZX3f/2)

如果您希望正则表达式*仅*获取 CN，则此改编版本将执行此操作：

`(?:^|,\s?)(?:CN=(?<val>"(?:[^"]|"")+"|[^,]+))`**

# php - SQL 查询似乎不起作用

> ID：11582594
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:39:35.177
> 
> 标签：php, mysql

我正在尝试运行以下查询，但它似乎无法正常工作，并且出现错误：

```
Warning: mysqli_fetch_row() expects parameter 1 to be mysqli_result, boolean given in C:\wamp\www\VACANCY\pages\search\booking2.php on line 83 
```

这是同时：

```
$row = mysqli_fetch_row($Result) 
```

我只想从我的桌子上返回选择的`JOB_TITLE`AND 。请任何帮助都会很棒，因为我花了几个小时试图解决它。`LOCATION``jobs`

```
<?php
    $Query = "(SELECT FROM jobs  " .
        "WHERE jobs.JOB_TITLE ='$_POST[JOB_TITLE]' " .
        "AND jobs.LOCATION = '$_POST[LOCATION]')";
    $Result = mysqli_query($DB, $Query);
    while ($row = mysqli_fetch_row($Result))
    {
        echo $row['JOB_TITLE'] . " " . $row['LOCATION'];
        echo "<br />";
    }   
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:42:29.790

您需要在 SELECT 之后添加一些内容。例如，SELECT JOB_TITLE、LOCATION FROM...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:46:24.560

您的声明是“SELECT FROM”，因此您没有指明要选择的内容。如果您查询“SELECT * FROM”，则将选择所有字段并且查询将起作用。

但请注意，您的代码非常不安全。来自搜索表单的 POST 值可以被攻击者操纵，并且可以使用查询来截断整个表。[在http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)阅读更多内容。

# android - xlarge vs sw720dp 屏幕尺寸混淆

> ID：11582600
> 
> 赞同：8
> 
> 时间：2012-07-20T15:39:54.723
> 
> 标签：android

供参考：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

旧式大小量词已“弃用”：

> 一组四种通用尺寸：small、normal、large 和 xlarge 注意：从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅为 Android 3.2 声明平板电脑布局以获取更多信息。

我希望 3.2+ 的设备仍会使用在 drawable-large-mdpi 或 layout-xlarge 中声明的资源，但似乎并非如此。

我有一个测试项目，其中包含每种尺寸的布局文件：

*   布局-sw600dp
*   布局-720dp
*   布局-xlarge
*   布局

在运行 Android 4.0.x 的 10" 摩托罗拉 XOOM 上，设备选择 layout-720dp 文件夹中的布局。如果该文件夹不存在，它会选择 layout-sw600dp 文件夹中的布局！ **为什么不选择layout-xlarge 中的布局？**

更奇怪的是，我在这些文件夹中有可绘制对象：

*   可绘制-sw600dp-mdpi
*   可绘制-xlarge-mdpi

上面的 10" 摩托罗拉 XOOM，从 drawable-sw600dp-mdpi 中选择图像。 **为什么它不选择 drawable-xlarge-mdpi 中的 drawable？**

我们不应该期望 xlarge 量词在 Android 3.2 上运行吗？

这是否意味着我必须将 drawable-xlarge-mdpi 文件夹中的所有资产复制到 drawable-sw720dp-mdpi 文件夹中？（要支持 Android 3.0、3.1 和 3.2+？）

希望我只是在这里遗漏了一些简单的东西。请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:43:26.967

据我了解，对于 Android 3.2+，如果您至少有一个使用新大小量词的文件夹，那么它假定您在任何地方都使用这些新大小量词。所以这就是它忽略 layout-xlarge 或任何其他使用旧量词的文件夹的原因。

关于向后兼容性，您必须在项目中使用两种类型的量词。旧的将用于 API < 3.2，新的用于 API >= 3.2。为避免重复，对于布局，您可以使用别名。但是，对于可绘制对象，我不知道有任何避免重复的解决方案。

# asp.net - VisualJS - 使用 WebSockets 的双向通信示例？

> ID：11582601
> 
> 赞同：0
> 
> 时间：2012-07-20T15:39:55.627
> 
> 标签：asp.net, websocket

所以，我听说 VisualJS 通过 PokeIn 有 WebSockets，但我找不到使用 VisualJS 的示例，以及服务器将数据发送到客户端/网络浏览器的示例。

VisualJS 为我提供了不编写任何客户端凌乱的 HTML/JS 等的选项，例如 VisualWebGUI，我可以像使用普通 WinForm 应用程序一样构建我的 Web 应用程序。

太好了，但我很想看到它也可以将 WebSockets 集成到组合中......

有没有这样的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:16:12.640

因为 VisualJS.NET 是建立在 PokeIn 之上的，所以为 PokeIn 激活[websocket](http://visualjs.net)[可以](http://www.pokein.com/Help/WebSocketFeature.aspx)为[VisualJS.NET](http://pokein.com)启用它

[http://www.pokein.com/Help/WebSocketFeature.aspx](http://www.pokein.com/Help/WebSocketFeature.aspx)

# iphone - iphone应用看不到内部网络

> ID：11582604
> 
> 赞同：0
> 
> 时间：2012-07-20T15:40:14.370
> 
> 标签：iphone, networking, wifi, ssid

我正在开发与我们公司服务器通信的企业应用程序。我在手机和服务器之间通过 3G/4G 进行了完整的双向通信，它可以通过我的家庭 wifi 工作，但是在连接到公司网络的办公室使用 wifi 时，应用程序看不到服务器方法。

该应用程序设置为查找我们的外部 IP 地址，并且该端口对服务器开放。但我猜外部 IP 地址在网络内不是“可见的”。当我插入服务器的*内部*IP 地址时，一切正常。

对于我们的广大用户来说，这不是问题。我们的大多数用户（员工）在现场或其他办公室工作。但是对于我们网络内的用户，除非用户关闭他的wifi，否则这种安排是没有用的。但这不是一种专业的方法。

我需要知道我的应用程序是否有办法专门使用 3G/4G，或者发现 wifi 的 SSID 并决定使用哪个 IP 地址。我猜这两个问题的答案都是“你不能那样做”，但我想我还是会问。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:54:30.840

好吧，我发现[这段代码](https://stackoverflow.com/questions/5698039/am-i-using-cncopycurrentnetworkinfo-correctly)正是我需要的。它以字符串形式给我 SSID，我可以将 SSID 字符串与我们 wifi 的 SSID 字符串进行比较，如果匹配，则应用程序使用内部 IP 地址。如果不匹配，它将连接到外部 IP 地址。到目前为止，它完美无缺！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:42:22.800

跟进：ceejayoz，我不知道您的第二个建议是否与我们的 IT 人员所做的相同，但他创建了一个可以解析到服务器的域名，无论它是内部的还是外部的。这似乎是最好的方法。因此，即使我有一个可行的答案，URL 也可以用更少的代码更好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:43:28.547

您可以让它尝试内部 IP，如果无法连接，则回退到外部 IP。不过，更好的解决方案可能是拥有一个内部 DNS 服务器，将内部 IP 提供给网络内设备。

# c# - 定时器每 1/10 秒使用一次时如何清除定时器

> ID：11582606
> 
> 赞同：0
> 
> 时间：2012-07-20T15:40:23.480
> 
> 标签：c#, .net, visual-studio-2010, winapp

我有一个每 1/10 秒运行一次的计时器（`Interval = 100`）。它处于无限循环中，因为我想在我的`WebBrowser`控件上加载一个站点并在每次加载时将信息获取到一个跨度 ID。我的问题是如果这个进程运行了很长时间，就会出现内存泄漏。

在 30 分钟内，内存使用量可以达到 800MB 或更多。如何防止我的程序在运行时不断使用更多内存？

这是相关的代码。它还不包括任何进程创建代码。

```
private void buttonBid_Click(object sender, EventArgs e)
{
    ID = Convert.ToInt32(textBoxID.Text);
    getItem();
    return;
}

private void getItem()
{
    webBrowser.Url = new Uri("http://www.test.com/?id=" + ID);
    webBrowser.DocumentCompleted += webBrowser_DocumentCompleted;
    return;
}

private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    timerLoad.Start();
    return;
}

private void timerLoad_Tick(object sender, EventArgs e)
{
    var elem = webBrowser.Document.GetElementById("product_" + ID);

    textBoxProduct.Text = Convert.ToString(elem.InnerText);

    timerLoad.Dispose();
    timerLoad.Start();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:42:33.627

内存泄漏的一个可能来源是多个事件绑定。

`DocumentCompleted`每次`GetItem`调用方法时都绑定事件。您应该绑定`DocumentCompleted`一次，例如在类的构造函数中。

但是，如果您只按下按钮一次，这将不是您的主要问题。

我想推荐[.NET Memory Profiler 4.0](http://memprofiler.com/)来解决您的问题。

另外，我进一步搜索了一点，您的问题可能在于`WebBrowser`组件的使用：请参阅[此](https://stackoverflow.com/q/8302933/296526)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:49:30.940

这是你应该在创建时只做一次的事情

```
 webBrowser.DocumentCompleted += webBrowser_DocumentCompleted; 
```

这些可以删除。至少我认为它们没有任何作用，可能有问题

```
 timerLoad.Dispose();
    timerLoad.Start(); 
```

如果我阅读了您的代码，请更正 timerLoad.Start(); 应该是一个 Stop(); 随着 Tick 加载文档，然后应该停止工作，直到下一次单击按钮，对吗？

# firefox - 查找当前选项卡的 URL。制作 FireFox 浏览器插件

> ID：11582607
> 
> 赞同：14
> 
> 时间：2012-07-20T15:40:24.477
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在制作 Firefox 浏览器插件，需要找到当前选项卡的 url

我已经尝试过这篇文章[从 Firefox 扩展程序打开当前选项卡/窗口中的 URL，](https://stackoverflow.com/questions/312625/opening-a-url-in-current-tab-window-from-a-firefox-extension)但它告诉我未定义“窗口”。（我认为是因为我正在制作附加组件而不是扩展。）

这是我尝试做的事情：

```
var widgets = require('widget');
var tabs = require('tabs');

var widget1 = widgets.Widget({
  id: "widget1",
  label: "widget1",
  contentURL: "http://www.mozilla.org/favicon",
  onClick: function() {
    console.log(tabs.url);
  }
}) 
```

我制作了一个小部件，当我单击它时，当前选项卡的 url 应该是“console.log”。

似乎不会发生！不断收到“信息：未定义”，这显然意味着 tabs.url 没有返回任何内容。但这似乎是根据[https://addons.mozilla.org/en-US/developers/docs/sdk/1.5/packages/addon-kit/docs/tabs.html使用它的方式](https://addons.mozilla.org/en-US/developers/docs/sdk/1.5/packages/addon-kit/docs/tabs.html)

有人有想法么？

谢谢，

将要

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T19:28:53.943

您快到了：

```
const { ActionButton } = require("sdk/ui/button/action");
const clipboard = require("sdk/clipboard");
const tabs = require('sdk/tabs');

let button = ActionButton({
  id: "my-button-id",
  label: "Button Label",
  icon: {
    "32": "chrome://mozapps/skin/extensions/extensionGeneric.png"
  },
  onClick: function(state) {
    let url = tabs.activeTab.url;
    console.log("active tab url:", url);
    require("sdk/notifications").notify({
      title: "Active Tab's Url is "+url,
      text: "Click to copy.",
      onClick: function() {
        clipboard.set(url);
      }
    });
  }
}); 
```

您应该查看[tabs 模块上的文档](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/tabs)。

*注意：我已更新此代码示例以使用自 Firefox 29 以来可用的新 ui 模块 - 原始问题中使用的“小部件”模块当时有效，但已被弃用，然后被删除。*

# jquery - 针对 1 个元素并非所有 jquery js

> ID：11582609
> 
> 赞同：0
> 
> 时间：2012-07-20T15:40:31.233
> 
> 标签：jquery, mouseover

我在网格中的跨度很少，我有一个小问题。当我悬停 1 个元素时，所有隐藏的跨度都被激活。我只想激活一个悬停。

```
 $('.tried-it').live('mouseover', function(){
                    $('.tried-times').fadeIn(500).addClass("show-me").removeClass("hide-me");
                });

                $(".tried-it").live('mouseout',function() { 
                    $(".tried-times").fadeOut(500).removeClass("show-me").addClass("hide-me");
                    return false; 

                }); 
```

和跨度：

```
<span class="tried-times hide-me">30 times</span>
<span class="tried-it"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:47:32.117

这似乎是一种奇怪的方式来构建你的元素，但如果它们一个接一个地放置，我会做类似的事情：

```
$(document).on({
    mouseenter: function(){
        $(this).prev('.tried-times').addClass("show-me")
                                    .removeClass("hide-me")
                                    .fadeIn(500);
    },
    mouseleave: function() { 
        $(this).prev('.tried-times').fadeOut(500)
                                    .removeClass("show-me")
                                    .addClass("hide-me");
    }
}, '.tried-it');​ 
```

这是一个[小提琴](http://jsfiddle.net/fbxTK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:45:55.860

像这样的东西应该可以工作，只对触发事件的元素实例进行操作。请注意，选择器`$(this)`不是`$('.tried-times')`：

```
$('.tried-it').live('mouseover', function(){
    $(this).fadeIn(500).addClass("show-me").removeClass("hide-me");
});

$(".tried-it").live('mouseout',function() { 
    $(this).fadeOut(500).removeClass("show-me").addClass("hide-me");
    return false; 
}); 
```

# oracle - 蟾蜍：加速非常慢的智能感知

> ID：11582612
> 
> 赞同：0
> 
> 时间：2012-07-20T15:40:44.423
> 
> 标签：oracle, toad

当我编写表的别名并按点键时，Toad 会建议我该表的列名。

操作持续时间从一台计算机到其他计算机非常不同。从几秒到几分钟。

我怎样才能加快速度？

在“Toad Insight Objects”选项中，我应该检查哪些列名建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T13:43:16.483

当您看到显示建议列的弹出窗口时放置点后，请单击旁边的选项按钮进行刷新。这将带您进入选项屏幕。

在该屏幕中转到编辑器-> 代码辅助。现在您可以在右侧看到“延迟弹出窗口”。减少毫秒，然后应用并单击确定。

这将加速智能感知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:31:57.260

我的理解是蟾蜍缓存了智能感知的结果。而且我假设从一台计算机到另一台计算机时，当您第一次点击表时缓存不存在。因此，toad 开始在数据字典中查询对象列表。当您查询该对象时，第二次应该更快。

您也可以使用下拉列表手动刷新。左上角应该有一个刷新按钮。

# php - 检索行上特定单词之后的所有单词

> ID：11582613
> 
> 赞同：0
> 
> 时间：2012-07-20T15:40:46.817
> 
> 标签：php

我正在尝试从这三行中仅检索 Server: Microsoft-IIS/7.5 什么是 tje 代码？它是一个数组！我使用 print_r 得到这个结果

```
Content-Type: text/html; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5 
```

该代码将搜索单词服务器并在同一行中获取之后的所有单词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:44:12.790

如果该字符串在名为 $header 的变量中，

```
preg_match("/^Server: (.*)$/m", $header, $matches);
$server = $matches[1]; 
```

应该得到你的服务器名称

如果标题行在数组中，则代码：

```
$server = NULL;
for ($i = 0; $i < count($header); $i++)
{
    // Look in the line for the server header
    $is_match = preg_match("/^Server: (.*)$/", $header[$i], $matches);
    // $is_match holds the number of times our pattern matched (up to 1)
    if ($is_match > 0)
    {
        $server = $matches[1];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:49:50.533

如果该`Server: ...`行始终是最后一行，则可以使用[`strstr`](http://php.net/manual/en/function.strstr.php).

# javascript - svg 路径对齐

> ID：11582616
> 
> 赞同：1
> 
> 时间：2012-07-20T15:40:51.467
> 
> 标签：javascript, svg

我有这个代码：

```
function MyClient() {
    var personPath = "M255.968,166.154c34.206,0,61.936-27.727,61.936-61.934c0-34.208-27.729-61.936-61.936-61.936s-61.936,27.728-61.936,61.936 C194.032,138.428,221.762,166.154,255.968,166.154z M339.435,194.188c-13.082-13.088-28.625-20.924-84.83-20.924 c-56.214,0-71.38,8.505-83.796,20.924c-12.422,12.416-8.23,144.883-8.23,144.883l27.485-65.304l17.28,194.554l49.856-99.57 l46.521,99.57l16.456-194.554l27.487,65.304C347.664,339.07,352.521,207.271,339.435,194.188z";

    var self = this,
    width = $('#canvas').width(),
    mapCanvasHeight = (width * 0.75);

    this.init = function() {
        self.drawCanvas();
        self.drawRect();
        self.drawPerson();
    }

    this.drawCanvas = function () {

        // we add the svg to the #canvas id.

        self.svg = d3.select('#canvas').append('svg:svg')
        .attr("width", "100%")
        .attr("height", "100%")
        //.attr("viewBox", "0 0 " + width + " " + mapCanvasHeight);
    }

    this.drawRect = function () {
            self.svg.append("rect")
                .attr("x", 0)
                .attr("y", 0)
                .attr("width", width)
                .attr("height", mapCanvasHeight)
                .attr("fill", "black");
        }

    this.drawPerson = function () {
        self.svg.append("path")
            .attr("d", personPath)
            .attr("fill", "white")
            .attr("transform", function() {
                 return "scale(0.08) translate(" + 0 + "," + 0 + ")"; });
    }
    this.init();
};

var MyClient;
jQuery(function() {
    MyClient = new MyClient();
}); 
```

我如何定位 drawPerson 使其正确对齐到左上角？

你可以在这里看到它：http: [//jsfiddle.net/SuTZR/](http://jsfiddle.net/SuTZR/)

任何建议非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:42:58.817

好的，我不得不改变inkscape上的原始svg绘图，以便路径偏移到左上角，这是新的personPath：

```
"m 1.4194515,-160.64247 c 33.5874165,0 60.8159465,-25.97005 60.8159465,-58.00952 0,-32.0404 -27.22755,-58.0114 -60.8159465,-58.0114 -33.5883965,0 -60.8159415,25.971 -60.8159415,58.0114 0,32.0404 27.228527,58.00952 60.8159415,58.00952 z m 81.9575765,26.25762 C 70.531608,-146.64352 55.269688,-153.983 0.08110256,-153.983 c -55.19742156,0 -70.08915856,7.96609 -82.28062656,19.59815 -12.197359,11.62926 -8.081167,135.7024419 -8.081167,135.7024419 L -63.292733,-59.848397 -46.325227,122.37766 2.6291765,29.116913 48.308878,122.37766 64.467298,-59.848397 91.457218,1.3175919 c 0,-8e-4 4.76917,-123.4484419 -8.08019,-135.7024419 z" 
```

# jquery - 使用 Id 时在 Raphael 中隐藏后 FadeIn 无法正常工作

> ID：11582618
> 
> 赞同：1
> 
> 时间：2012-07-20T15:40:52.307
> 
> 标签：jquery, raphael

这不起作用：

```
<div id="draw">
        <script>
                    $(document).ready( function () {

                        var filler = {
                            'fill': 'white',
                            'stroke': 'white',
                            'stroke-width': '0',
                            'cursor': 'pointer'
                        }

                        var paper = Raphael(100, 296, 175, 5);

                        var rectangle = paper.rect(0, 0, 5, 5);
                        rectangle.attr(filler);
                        rectangle.node.id = 'rectangle';

                        $("#rectangle").hide();
                        $("#rectangle").fadeIn('2000');

                    });
        </script>
</div> 
```

什么都没有显示。如果我只使用 hide() 它会隐藏矩形。但是，我想淡入淡出然后，我尝试使用 #rectangle { display: none; } 在我的 css 文件中，然后使用 fadeIn，但它也不起作用。

我完全不明白我在做什么错。我没有使用remove()，而只使用了hide()，为什么它不会显示？

萤火虫显示**style="display:none;"** ; . 即使我从我的 css 文件中删除了用于 display none ( **#rectangle { display: none; } ) 的 css。**

似乎在 hide() 之后你不能使用 fadeIn() 函数，但为什么呢？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:37:18.500

你为什么不这样做：

```
rectangle.attr({opacity: 0});
rectangle.animate({opacity: 1}, 2000); 
```

JSFiddle：http: [//jsfiddle.net/wrDGP/](http://jsfiddle.net/wrDGP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:43:51.193

Raphael 确实只有动画不透明度来模拟fadeIn 和fadeOut。也许未来的一些版本可以实现这一点。只是暂时处理它。祝你今天过得愉快。

# android - 单击按钮时进度条未更新

> ID：11582619
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:40:54.293
> 
> 标签：android, progress-bar

当我单击按钮时，它会等待 20 秒，然后将文本显示为文本视图，我的要求是 1 秒后，进度条必须增加 5 个值。任何人都可以指导我使用以下代码

```
public class ProgressBar1 extends  Activity{

    TextView tvpbview;
    ProgressDialog pd1;
    ProgressBar pbhr1;
    Button btnhp1;
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.progressbar1);

        btnhp1 = (Button) findViewById(R.id.btnProgress);
        pbhr1 = (ProgressBar) findViewById(R.id.pbHori1);
        pbhr1.setMax(100);

    btnhp1.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                //--- For Horizontal Progress Bar------

                for(int i=0;i<=20;i++)
                {
                     pbhr1.incrementProgressBy(5);
                    tvpbview.setText(""+pbhr1.getProgress()+"% done");
                    try {
                        Thread.sleep(1000);

                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:26:25.983

您的方法不正确，您需要使用正确的线程形式。特别是对于您的情况，我建议您使用以下内容：

*   [`Handler`](http://developer.android.com/reference/android/os/Handler.html)
*   [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

很可能您需要阅读一些教程，因此请查看

*   [`Android Threads, Handlers and AsyncTask - Tutorial`](http://www.vogella.com/articles/AndroidPerformance/article.html)

    这是一个很好的来源。

**注意：** `AsyncTask`比泛型更复杂`Handler`，也是泛型，专为更新`UI`而设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:17:36.410

创建一个异步任务。为此，Android 提供了 AsyncTask 类。您在 UI 线程上创建一个进度条，然后调用 publishProgress() 方法来更新您的进度条。它使用起来非常简单，文档非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:26:16.230

尝试这个

在最初设置它们之后，如果要更改值，则需要在两者之间将其设置为零：

```
ProgressBar dataProgressBar = (ProgressBar) findViewById(R.id.progressBarData);

    //set to 0 first to stop the bug from happening

    dataProgressBar.setMax(0);
    dataProgressBar.setProgress(0);

    //set your new values

    dataProgressBar.setMax((int) dataAllowanceValue);
    dataProgressBar.setProgress((int) dataMBytes); 
```

# image - 使用 avconv => 损坏的视频从 jpeg 创建视频

> ID：11582624
> 
> 赞同：12
> 
> 时间：2012-07-20T15:41:05.110
> 
> 标签：image, video, corrupt

我试图从一个充满 jpeg 帧的目录中制作视频（无论格式如何）。

我尝试使用 avconv (v0.8)，正如互联网上的许多主题所见，以及 libav 文档：

```
avconv -i samples/*.jpeg output.mpeg 
```

它似乎运行良好并创建了 output.mpeg 文件。

但是任何阅读器（vlc、banshee、totem、...）都无法读取该文件。没有错误，但是当我按下播放时没有任何反应。

如果我检查视频文件大小，它大约是 20kB，而原始视频是 10MB。所以我们可以假设数据没有被存储到文件中（不管输入的帧数如何，它大约是 20kB）

我做了一个处理调试日志的pastebin。我不熟悉编解码器世界，所以我不懂很多东西： http: [//pastebin.com/9dfxFWZe](http://pastebin.com/9dfxFWZe)。

我还尝试了很多与 -s、-r、-b、-vcodec、-f 格式等的组合。但问题仍然存在。

我做错什么了吗？

问我有什么可以帮助你的，我会很快回答的。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T11:23:53.763

avconv 希望您以类似 printf 的语法给出输入文件名。仅使用 shell 通配符（例如 samles/*.jpeg）是不够的。

您的样本似乎被命名为 sample/lapinsnipermin/.jpeg，因此请尝试以下命令行：

```
avconv -f image2 -i samples/lapinsnipermin/%03d.jpeg output.mpeg 
```

这行得通吗？您可能还想为比特率添加选项（例如 -r 25）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-17T23:59:28.010

我发现最好将 jpg 文件通过管道传输到您想要的位置，这样您就可以使用标准通配符控制选择，试试这样的方法。这也会输出一个视频，您可以在网络和移动设备上使用（即使用标准浏览器标签）：

```
cat samples/*.jpeg | avconv -r 30 -f image2pipe -codec:v mjpeg -i - -pix_fmt yuvj420p -r 30 -c:v libx264 -vf scale=480:300 -y output.mp4 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-14T00:35:29.240

复活这个，因为它在谷歌搜索解决方案时出现。我终于让它工作了：

```
knoppix@Microknoppix:~$ avconv -r 1 -i /tmp/photo%d.jpg -r 24 -s 320x240 -vsync cfr /tmp/video.mpg 
```

我无法让 avconv 识别原始名称中的输入文件；这说明了原因：

```
knoppix@Microknoppix:~$ strace avconv -i /media/sdb1/DCIM/188_0408/IMGP%04d.JPG /tmp/video.mpg 2>&1 | grep 188_0408
execve("/usr/bin/avconv", ["avconv", "-i", "/media/sdb1/DCIM/188_0408/IMGP%0"..., "/tmp/video.mpg"], [/* 36 vars */]) = 0
stat64("/media/sdb1/DCIM/188_0408/IMGP0000.JPG", 0xbf925b00) = -1 ENOENT (No such file or directory)
stat64("/media/sdb1/DCIM/188_0408/IMGP0001.JPG", 0xbf925b00) = -1 ENOENT (No such file or directory)
stat64("/media/sdb1/DCIM/188_0408/IMGP0002.JPG", 0xbf925b00) = -1 ENOENT (No such file or directory)
stat64("/media/sdb1/DCIM/188_0408/IMGP0003.JPG", 0xbf925b00) = -1 ENOENT (No such file or directory)
stat64("/media/sdb1/DCIM/188_0408/IMGP0004.JPG", 0xbf925b00) = -1 ENOENT (No such file or directory)
write(2, "/media/sdb1/DCIM/188_0408/IMGP%0"..., 66/media/sdb1/DCIM/188_0408/IMGP%04d.JPG: No such file or directory 
```

我没有看到设置起始编号的选项，所以我这样做了：

```
i=0; for file in /media/sdb1/DCIM/188_0408/IMGP28*.JPG; do cp $file /tmp/photo$i.jpg; i=$((i+1)); done 
```

最终结果是我的照片的视频，每秒显示一个；`-vsync cfr`告诉 avconv 填充输入帧以匹配输出帧率。

# java - NetBeans 平台关闭时什么也不做

> ID：11582625
> 
> 赞同：1
> 
> 时间：2012-07-20T15:41:08.890
> 
> 标签：java, netbeans-7, netbeans-platform

我正在构建一个 NetBeans 平台应用程序。当用户单击主窗口的 X 时，我希望应用程序不执行任何操作并显示密码 JDialog。如果密码正确关闭应用程序，否则不要关闭应用程序。我该怎么做呢？我创建了一个将显示密码 JDialog 的 Listener 类，但是如何阻止应用程序关闭？类似于 JFrame 的 setDefaultCloseOperation，并将其设置为关闭时不执行任何操作。

```
 public class Listener extends WindowAdapter {

        private Frame frame;

        @Override
        public void windowActivated(WindowEvent event) {
            frame = WindowManager.getDefault().getMainWindow();
            frame.setSize(946, 768);
        }

        @Override
        public void windowClosing(WindowEvent event) {
            ShutDownMainWindowJDialog shutDownMainWindowJDialog;
            shutDownMainWindowJDialog = new ShutDownMainWindowJDialog(null, true);
            shutDownMainWindowJDialog.exeShutDownMainWindowJDialog();
            shutDownMainWindowJDialog.setLocationRelativeTo(frame);
            shutDownMainWindowJDialog.setVisible(true);
        }
    }

public class Installer extends ModuleInstall {

    @Override
    public void restored() {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Frame frame = WindowManager.getDefault().getMainWindow();
                frame.addWindowListener(new Listener());
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T07:11:33.230

这很容易。因此，使用安装程序创建模块并覆盖方法关闭（可能），然后显示您的对话框并返回 false（不关闭应用程序）。吉尔卡

所以这是结论：添加到您的模块安装程序/激活程序

```
package master;

import org.openide.modules.ModuleInstall;

/**
 * Manages a module's lifecycle. Remember that an installer is optional and
 * often not needed at all.
 */

public class Installer extends ModuleInstall {

 @Override
 public void close() {
  //your module shutdown
 }

 @Override
 public boolean closing() {

 // this is place for your Dialog() and return:
 //
 //        true if you want to enable close the app
 //        other return false
/*
 if you force shutdown app try LifecycleManager.getDefault().exit();
 System.exit(0) is very dummy, because it does not respect betweenmodule dependencyis

 }  
} 
```

吉尔卡

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T16:15:49.790

如果`windowClosing()`密码正确，请从用户和`dispose()`框架中获取密码。

```
public class PasswordToClose extends WindowAdapter {

  private JFrame frame;

  public PasswordToClose(JFrame frame) {
    this.frame = frame;
  }

  public static void main(String[] args) {
    JFrame frame = new JFrame("Password to close");
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

    frame.addWindowListener(new PasswordToClose(frame));
    frame.setSize(200, 200);
    frame.setVisible(true);
  }

  @Override
  public void windowClosing(WindowEvent evt) {
    String password = JOptionPane.showInputDialog(frame, "Enter password");
    if ("secret".equals(password)) {
      frame.dispose();
    }
  }
} 
```

# python - Python从特定日期获取微时间

> ID：11582627
> 
> 赞同：0
> 
> 时间：2012-07-20T15:41:11.433
> 
> 标签：python, file, datetime, time

我已经浏览了 Python 指南和一些搜索机器几个小时，但我真的找不到我的问题的答案。

我正在编写一个开关，其中只有某些文件在给定日期之后被修改时被选择在 file_list (list[]) 中。

在我的循环中，我执行以下代码来获取它的微时间：

```
file_time = os.path.getmtime(path + file_name) 
```

这让我很开心，就像这样：1342715246.0

现在我想比较那个时间是否在我放弃的某个日期时间之后。因此，出于测试目的，我使用了 1790:01:01 00:00:00。

```
# Preset (outside the class/object)
start_time = '1970-01-01 00:00:00'
start_time = datetime.datetime.strptime(start_time, '%Y-%m-%d %H:%M:%S')
start_time = start_time.strftime("%Y-%m-%d %H:%M:%S")

# In my Method this check makes sure I only append files to the list
#   that are modified after the given date
if file_time > self.start_time:
    file_list.append(file_name) 
```

当然这不起作用，哈哈：P。我的目标是从自定义日期制作微时间格式。我只能在网上找到从当前日期开始制作微时间格式的 ClassMethods。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:46:52.843

看看[Python datetime 到 microtime](https://stackoverflow.com/questions/7238226/python-datetime-to-microtime)。您需要以下代码段：

```
def microtime(dt):
    time.mktime(dt.timetuple()) + dt.microsecond / 1000000.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:46:50.057

您可以自己比较`datetime.datetime`对象。如果你保持`start_time`作为一个`datetime.datetime`对象并制作`file_time`一个`datetime.datetime`对象，你可以成功地做到`file_time > self.start_time`

查看[文档中支持的运算符](http://docs.python.org/library/datetime.html)

# git - git push 没有 和

> ID：11582631
> 
> 赞同：0
> 
> 时间：2012-07-20T15:41:21.130
> 
> 标签：git

我见过人们使用

```
$ git push 
```

并推送到他们默认的远程仓库/分支

我一直在使用

```
$ git push hm master 
```

当我键入时，我需要更改哪些设置：

```
$ git push 
```

我没有看到这个错误：

```
fatal: No configured push destination.
Either specify the URL from the command-line or configure a remote repository using

    git remote add <name> <url>

and then push using the remote name

    git push <name> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:49:20.940

`git push`将尝试推送到上游存储库。看起来你没有为你的分支配置。采用`git branch --set-upstream [local_branch_name] [remote_name/remote_branch_name]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:47:34.953

您将无法做到这一点，除非您在 bash 中执行一些奇怪的自定义脚本，该脚本会拦截您的 git 命令并自动将 [alias] [branch] 元素添加到 git push。Git 必须知道要推送什么以及在哪里推送。为了比较，请记住，如果没有任何其他变量，您将无法执行 grep，因为它不会执行任何操作。

# ontology - 用户画像本体

> ID：11582633
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:41:23.353
> 
> 标签：ontology, user-profile

我的工作是“在信息检索中考虑用户配置文件”。为此，我需要实现用户配置文件的本体，以使用该本体来改进研究过程。我没有太多时间。我想知道它是否已经完成以及如何完成？想出个主意？我正在等待您的建议，并在此先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:16:38.023

使用用户档案来改进信息检索是一个至少有 20 年历史的研究领域。例如，请参阅Google Scholar 或[用户建模](http://www.um.org/)研究中心[上的这些论文](http://scholar.google.co.uk/scholar?hl=en&q=personalized%20information%20retrieval&btnG=&as_sdt=1,5&as_sdtp=)。如果没有更具体的问题，就不可能提出任何更有帮助的建议。一般来说，创建一个通用的用户画像本体的目标和“我没有多少时间”的约束是不兼容的。你需要选择一个小的、可管理的特定问题并专注于解决它

# c# - AvalonEdit：每个 DocumentLine 的右边距

> ID：11582635
> 
> 赞同：0
> 
> 时间：2012-07-20T15:41:41.780
> 
> 标签：c#, .net, avalonedit

我目前正在使用 AvalonEdit 在 .NET 4 中开发电影脚本编辑器。

脚本中的每个元素类型（即：字符、对话框行等）都应该有一个右边距。换句话说，在每行字符数达到一定数量之后，接下来的字符应该在另一行。

是否可以为每个 DocumentLine 分配右边距，或者我们是否被迫单独处理每个输入，并确定何时必须跳到下一行？

我尝试使用这种方法，但必须计算何时移动、替换文本和重新定位插入符号并非易事，需要大量工作。除非我绝对需要，否则我想避免这种方法。

每个 DocumentLine 有哪些右边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:07:19.830

这个元素生成器将在每 20 列之后引入一个换行符：

```
public class WrapAtCol20 : VisualLineElementGenerator
{
    public override int GetFirstInterestedOffset(int startOffset)
    {
        DocumentLine line = CurrentContext.Document.GetLineByOffset(startOffset);
        int col = startOffset - line.Offset;
        int wrapCol = ((col / 20) + 1) * 20;
        if (wrapCol < line.Length) {
            return line.Offset + wrapCol;
        }
        return -1;
    }

    public override VisualLineElement ConstructElement(int offset)
    {
        return new WrapElement();
    }

    class WrapElement : VisualLineElement
    {
        public WrapElement() :  base(visualLength: 1, documentLength: 0)
        {
        }

        public override TextRun CreateTextRun(int startVisualColumn, ITextRunConstructionContext context)
        {
            return new TextEndOfLine(1);
        }
    }
} 
```

请注意，这可能与[大写生成器](https://stackoverflow.com/questions/11487234/uppercasing-in-avalonedit)的交互效果不佳- 一个生成器为整个文本生成单个元素，该元素将被大写，这会阻止其他生成器在其间插入元素。解决方案是更改 AvalonEdit，以便着色器可以处理大写字母。

# javascript - 如何使 div 调整包含内容的高度？

> ID：11582636
> 
> 赞同：0
> 
> 时间：2012-07-20T15:41:41.900
> 
> 标签：javascript, css, html, height

我有一个“maincontent” div，其中包含我的内容。里面有一些 javascript (Fancybox) 来显示图像。我试图让 div 的高度自动更改以伴随其中的任何内容，以便 div 本身不会滚动，但整个网页会滚动。

这是我要修复的页面：[http ://willryan.us/content/photo.html](http://willryan.us/content/photo.html)

我试过弄乱最小高度、高度：自动、溢出：自动等，但没有结果。Height:auto 认为文本是 div 中唯一的内容，就像它完全忽略 javascript 图像一样。

这是我现在的CSS：

```
div#content {
overflow:auto;
width:958px;
height: 800px;
position:absolute;
top:50px;
left:0px;
background-color:#C0CACE;

border:1px solid;
border-color:#616161;

-webkit-box-shadow:  0px 0px 50px 0px rgba(0, 0, 0, 1);
box-shadow:  0px 0px 50px 0px rgba(0, 0, 0, 1);
z-index:1; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:53:46.310

问题与photobox div有关，如果您关闭绝对位置，它可以工作到它的高度，关闭高度并且它适合。

如果您在不需要时不使用绝对定位，则可以避免此问题。

您应该使用相对定位重建您的页面。考虑到您只需要将您正在使用的 div`text-align:center;`放在他们的父母身上，这应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:50:20.177

您的问题在于使用绝对定位。对常规文档流使用静态定位（默认），您将不会遇到此问题。

**更新**

您也不使用相对定位。

常规文档流（没有明确指定）是`position: static;`您使用绝对的。绝对定位基本上将元素从文档的常规流中取出，并根据它最近的相对定位的父元素放置它。

您应该做什么...如果您需要将包装器放置在“中心”。将“wrapper”设置为`positon:relative`with`margin: 0px auto;`并从所有内部元素中删除绝对位置。如果您需要缩进包装器内的元素，请使用填充/边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:55:15.530

我建议你不要在你的 maincontent 孩子中~~使用。`position: relative`~~`position:absolute`你真的不需要绝对在这里。

1.  删除`#content`高度（或使用最小高度）
2.  删除`#photobox`高度（或使用最小高度）
3.  移除`#content`溢出
4.  将所有`#content`子位置设置为相对位置（必要时使用边距）

.

```
div#header {
   background-image:url(content/assets/elements/header.png);backround-repeat:none;
   width:960px;
   height:50px;
   z-index:2;
   -webkit-border-radius: 10px 10px 0px 0px;
   border-radius: 10px 10px 0px 0px;
   -webkit-box-shadow:  0px 0px 30px 0px rgba(0, 0, 0, 1);
   box-shadow:  0px 0px 30px 0px rgba(0, 0, 0, 1);
}

div#footer {
   background-image:url(content/assets/elements/footer.png);
   backround-repeat:none;
   width:960px;
   height:50px;
   z-index:2;
   -webkit-border-radius: 0px 0px 10px 10px;
   border-radius: 0px 0px 10px 10px;
   -webkit-box-shadow:  0px 0px 30px 0px rgba(0, 0, 0, 1);
   box-shadow:  0px 0px 30px 0px rgba(0, 0, 0, 1);
}

div#content {
   width:958px;
   background-color:#C0CACE;
   border:1px solid;
   border-color:#616161;
   -webkit-box-shadow:  0px 0px 50px 0px rgba(0, 0, 0, 1);
   box-shadow:  0px 0px 50px 0px rgba(0, 0, 0, 1);
   z-index:1;
   overflow: visible;
}

div#photobox {
   width: 769px;
   margin-left: 95.5px;
} 
```

# c# - 如何在tabcontrol中使标签页无法访问

> ID：11582637
> 
> 赞同：0
> 
> 时间：2012-07-20T15:41:51.250
> 
> 标签：c#, methods, visual-studio-2005, c#-2.0, tabcontrol

我目前有一个带有 3 个标签页的标签控件（我们称它们为 A、B 和 C），事情是我希望用户只能单击某些标签（如果在 tabA 上只能导航到 tabB，如果在 tabC 上只能导航到 tabA...) 有没有办法做到这一点？我有点难过，任何帮助表示感谢谢谢！

--C#2.0
--Windows Visual Studio 2005

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:55:28.010

为了控制一次`TabPages`可以导航到哪个，您可以`Enabled`使用`TabPage`. 将其设置为 false 以防止任何用户与其交互。

为了根据打开的选项卡动态决定启用哪些选项卡，您可以使用上的`Selected`事件`TabControl`（详细信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol。选定](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selected.aspx)的.aspx ）。每当您更改`TabControl`. 在这里，您可以确定电流`TabPage`是多少，然后根据需要使用它来启用或禁用`TabPages`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:55:35.887

将处理程序添加到[TabControl.Selecting](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selecting.aspx)事件以检查是否要允许选项卡页选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:56:00.927

您可以连接到 TabControl 上的 Selecting 事件，并在事件处理程序内部，您可以检查一些类变量，指定允许单击哪些选项卡。如果您选择的与变量不匹配，您可以取消该事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:00:19.927

也许像

```
If (SelectedIndex == 1) //tab a
{
    tabC.enabled = false;
    tabB.enabled = true;
} 
```

# c++ - 树形图：绘制可能爆炸的元素

> ID：11582640
> 
> 赞同：1
> 
> 时间：2012-07-20T15:42:07.467
> 
> 标签：c++, c, tree, graph-theory, breadth-first-search

我正在决定如何存储数据以及如何绘制树形图。假设我想要两个元素之间的最小空间 M，我想我可以在呼吸优先搜索中从顶部到底部遍历整个树结构。

如果当前元素下方只有一个元素，它将使用与他父亲相同的 X 坐标进行绘制。如果有两个元素，它们将在 -M/2 处绘制，另一个在 +M/2 处绘制，相对于它们的父 X 坐标。等等..

问题是：如果像 C 这样的元素（见下图）有大量子元素怎么办？我应该重组整个树，因为我应该将元素 D 移到左侧并为 C 的所有 EF 子级腾出空间。将 D 移到左侧会使树弯曲，我也需要移动 B。将 B 向左移动会改变树的对称性，所以我也需要移动 C，依此类推..

![在此处输入图像描述](../Images/88fe1dc16c72b7190c600d960bfdea8b.png)

如何绘制一个完美对称的树，它的元素可能有大量的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:54:38.523

反过来做：计算每个节点的水平位置后，计算其子节点的水平位置。像这样的东西（警告：完全未经测试的代码；可能完全由错误组成）：

```
void Node::place_self(coord_t x0, coord_t y0) {
  this->y0 = y0; this->y1 = y0+height;
  if (!left && !right) {
    // This is a leaf. Put its top left corner at (x0,y0).
    this->x0 = x0; this->y0 = y0;
    this->subtree_x1 = x0+width;
  }
  else if (!left || !right) {
    // Only one child. Put this immediately above it.
    Node * child = left ? left : right;
    child->place_self(x0,y0+height+gap);
    coord_t xc = child->x0 + child->width/2;
    this->x0 = xc-width/2;
    this->subtree_x1 = max(this->x0+width, child->subtree_x1);
  }
  else {
    // Two children. Put this above their midline.
    left->place_self(x0, y0+height+gap);
    right->place_self(left->subtree_x1+gap, y0+height+gap);
    coord_t xc = (x0 + right->subtree_x1)/2;
    this->x0 = xc-width/2;
    this->subtree_x1 = max(this->x0+width, right->subtree_x1);
  }
} 
```

# tomcat - Jersey Servlet - 设置根 uri 内容的最佳方式？

> ID：11582641
> 
> 赞同：0
> 
> 时间：2012-07-20T15:42:08.290
> 
> 标签：tomcat, servlets, jersey, jax-rs

我正在使用 JAX-RS 为应用程序开发 RESTful api。我将它部署在Tomcat中。它部署在 myhost:8080/api。资源位于 .../api/{resourceName} 等处。

我想拥有它，以便访问 /api 的人看到我们基于 html 的 api 文档。我想知道最好的解决方案是什么。在 web.xml 中指定欢迎文件似乎不起作用，但这会很简单。

或者，如果我创建一个资源并将路径设置为“/”，那么我可以以编程方式提供内容。这有点不灵活，因为它在代码中，但我可以让它工作。

最后，我想我可以使用 Apache 将流量引导到我想要的地方。不是 Apache 的专家，但这可能是最灵活的解决方案。

这些替代方案中哪一个会更好？我缺少任何选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:07:22.693

我在这里找到了答案：[How to mix server-side Jax-rs call with native files without prefix?](https://stackoverflow.com/questions/7210546/how-to-mix-server-side-jax-rs-call-with-native-files-without-prefix)

注册为过滤器而不是 servlet，在 404 参数上设置。

# ruby-on-rails - 未初始化的常量 Heroku::VERSION (NameError)

> ID：11582642
> 
> 赞同：0
> 
> 时间：2012-07-20T15:42:09.637
> 
> 标签：ruby-on-rails, ruby, heroku, uninitialized-constant

由于上述错误消息，我无法再在此项目上运行“rails 服务器”或“rails 控制台”，这似乎出乎意料。我很确定几天前我在这个项目的 RVM gemset 上运行了“gem update heroku”，所以这可能是根本原因。Ruby 是 ruby​​-1.9.2-p136。Rails 是 Rails 3.0.9。一旦我发现这个错误，我计划升级到最新的 Rails 3.0 版本（3.0.14），但需要先解决这个问题。有任何想法吗？我尝试安装 Heroku toolbet 无济于事。

Heroku gem 似乎在所有其他方面都很好，我可以运行“heroku login”、“heroku rake”、“heroku 控制台”等，就可以了。问题仅出现在我的开发机器上，并且仅在我尝试启动服务器或运行控制台时出现。下一步是在我的新 MacBook 上克隆这个项目并继续前进......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:05:41.720

升级到 Ruby (1.9.2) 和 Rails (3.0.14) 的最新次要版本解决了这些问题。感谢你的帮助。

# sql-server-2008 - SQL 选择中的西班牙语字符

> ID：11582644
> 
> 赞同：1
> 
> 时间：2012-07-20T15:42:13.443
> 
> 标签：sql-server-2008, character-encoding, webpage

我正在一个西班牙语网站上工作，其中一些文本存储在 MS SQL 2008 数据库表中。

文本与 á、í 和 ñ 等字符一起存储在 db 表中。

当我检索数据时，字符不会显示在页面上。

这可能是一个非常简单的修复，但请教育我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:53:43.950

您必须使用 Unicode 而不是 ANSI 字符串和函数，并且必须选择具有所需字符集的网页编码。对这些术语的一些搜索将产生您所需要的一切。查找内容类型 1252 和 8859 以防卡住（示例，而不是答案）。

# c# - 选定的组合框到文本框

> ID：11582648
> 
> 赞同：4
> 
> 时间：2012-07-20T15:42:29.837
> 
> 标签：c#, winforms, visual-studio-2010, combobox

我正在创建一个从数据库中提取数据并提供两个组合框的表单。ComboBox1 以“名字姓氏”格式显示员工姓名。ComboBox2 以“Last, First”格式显示员工姓名。这些名字毫无困难地被拉进组合框。

我试图弄清楚如何做的是，一旦用户从任一下拉框中选择一个名称，它将根据来自查询的其他信息填充某些文本框，例如 textBox1、textBox2。

我试图使用

```
textBox1.Text = comboBox1.SelectedItem; 
```

但是，我收到一条错误消息：无法将类型“对象”隐式转换为“字符串”。存在显式转换（您是否缺少演员表？）

这是我当前的代码。我故意省略了对数据库的连接查询等。

```
public partial class Employees : Form
{
    public Employees()
    {
        InitializeComponent();

        //Connect to database for Employees Table Headers
        SqlConnection myConnection = new SqlConnection(@"Server=Server...");

        try {
            myConnection.Open();
            string SqlDataPull = String.Format("SELECT * FROM Employees WHERE Lname IS NOT NULL {0} ORDER By Lname", (checkBox1.Checked ? "AND Active='Y'" : ""));
            SqlCommand cmd = new SqlCommand(SqlDataPull, myConnection);
            cmd.CommandType = CommandType.Text;
            SqlDataReader dr = cmd.ExecuteReader();

            while (dr.Read()) {
                string strEmployee = String.Format("{0}  {1}", dr["Fname"], dr["Lname"]);
                comboBox1.Items.Add(strEmployee);
                textBox1.Text = comboBox1.SelectedItem;
                string strEmployee2 = String.Format("{0}, {1}", dr["Lname"], dr["Fname"]);
                comboBox2.Items.Add(strEmployee2);
            }
        } catch (Exception e) {
            MessageBox.Show(e.ToString());
        } finally {
            if (myConnection != null) {
                myConnection.Dispose();
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Main myNewForm = new Main();
        myNewForm.Show();
        this.Close();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Reports myNewForm = new Reports();
        myNewForm.Show();
        this.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:46:39.620

如果您只需要文本，您可以简单地使用：

```
textBox1.Text = comboBox1.Text; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T15:49:42.630

在 SelectedIndexChanged 事件中，添加代码：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
  if (comboBox1.SelectedIndex == -1) {
    textBox1.Text = string.Empty;
  } else {
    textBox1.Text = comboBox1.SelectedItem.ToString();
  }
} 
```

您可能应该从您的 while 循环中删除此语句：

```
// textBox1.Text = comboBox1.SelectedItem; 
```

因为您刚刚将该项目添加到 ComboBox 项目集合中，但您实际上并不知道它已被选中。

另外，请确保将事件连接起来：

```
public Employees()
{
  InitializeComponent();

  // yada-yada-yada

  comboBox1.SelectedIndexChanged += comboBox1_SelectedIndexChanged;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T15:45:24.957

您需要的是使用 TEXT 值而不是`textBox1.Text = comboBox1.SelectedItem;`It should be`textBox1.Text = comboBox1.SelectedItem.ToString();`或简单地`textBox1.Text = comboBox1.Text`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T15:53:46.857

`ComboBox`由于您可以使用任何类型的项目（不仅仅是`string`）填充 a ，因此该`SelectedItem`属性的类型为`object`。如果您插入`strings`，您可以通过投射来检索它们

```
string s = (string)myComboBox.SelectedItem; 
```

如果您添加了其他类型的项目，例如类`Person`，您可以检索此对象或获取其字符串或某些属性

```
Person p = (Person)myComboBox.SelectedItem;
string s = myComboBox.SelectedItem.ToString();
string lastName = ((Person)myComboBox.SelectedItem).LastName; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-29T13:22:23.727

不幸的是，你不能这样做：

```
textBox1.Text = comboBox1.SelectedItem.ToString(); 
```

因为结果也是路径：

```
System.Windows.Controls.ComboBoxItem: Citroen 
```

你只需要价值例如雪铁龙

所以问题可以通过搜索这样的字符串来解决：

```
 string auto = comboBox1.SelectedItem.ToString();
      int index = auto.IndexOf(" ");
      carModel.Text = auto.Substring(index+1); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-20T15:48:38.693

你需要使用：

`textBox1.Text = comboBox1.SelectedItem.Text`获取项目的文本部分。

`SelectedItem`是一个对象，您正试图将其分配给`Text`文本框的属性。

# php - ajax php jquery

> ID：11582649
> 
> 赞同：1
> 
> 时间：2012-07-20T15:42:30.590
> 
> 标签：php, jquery, ajax

我有一个 AJAX 调用事件来`txt_RollNo`从数据库中获取,并将其填入, , 。`blur``std_name``Class``age``txt_name``txt_class``txt_age`

在一次调用中，我可以将`name`, `class`, `age`all 作为一个整体放在数组或任何一个中，如何将它分开。

```
$("#txt_RollNo").blur(function(){   
$.ajax({
            url:'getSudent.php',
            data:'stdID='+ $(this).val().trim(),
            success:function(array_from_php)
            {
            //but here i m receiving php array, how deal in jquery
                //$("#txt_name").val(array_from_php);
                //$("#txt_Class").val(array_from_php);
                //$("#txt_age").val(array_from_php);

            }
            })   
}); 
```

* * *

getSudent.php 回显数组如下

```
<?php   
  $qry=mysql_query("select * from students where studentID='".$_GET['std_ID']."'");   
  $row=mysql_fetch_array($qry);   
  echo $row;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:44:39.107

PHP：

```
<?php
  header('Content-type: application/json');
  $qry=mysql_query("select * from v_shop where shop_no='".$_GET['shopno']."'");   
  $row=mysql_fetch_array($qry);   
  echo json_encode($row);
?> 
```

JavaScript

```
...
$.ajax({
    dataType: 'json',
    ...
    success:function(array_from_php){
        console.log(array_from_php); // WTF is this? 
```

见 json_encode：[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:46:06.843

首先在 php 中将其作为 json 发送：

```
echo json_encode($row); 
```

然后将其视为任何数组：

```
$("#txt_RollNo").blur(function(){   
$.ajax({
        url:'getSudent.php',
        data:'stdID='+ $(this).val().trim(),
        dataType : 'json',
        success:function(array_from_php)
        {
           // i suggest you output the array to console so you can see it
           // more crearly
          console.log(array_from_php);
            $("#txt_name").val(array_from_php[0]);
            $("#txt_Class").val(array_from_php[1]);
            $("#txt_age").val(array_from_php[2]);

        }
        })   
}); 
```

# mysql - oracle中的mysql之类的groupby如何

> ID：11582653
> 
> 赞同：0
> 
> 时间：2012-07-20T15:42:39.810
> 
> 标签：mysql, oracle

在 Mysql 中，我有 fdllowing 查询以及下面的结果

```
drop table tab1;
CREATE TEMPORARY TABLE tab1 
(col1 integer,col2 integer(10),col3 varchar(10),col4 integer)engine=memory
insert into tab1
values(100,1,'Hello',9);
insert into tab1
values(200,1,'HelloWrld',8);
insert into tab1
values(300,1,'HelloTher',7);
insert into tab1
values(400,2,'HiThere',6);
insert into tab1
values(500,3,'Howdy',5);
insert into tab1
values(600,3,'Hiya',4);

select col1,col2,col3,col4,min(col4)
from tab1
group by col2

'100', '1', 'Hello', '9', '7'
'400', '2', 'HiThere', '6', '6'
'500', '3', 'Howdy', '5', '4' 
```

在 Oracle 中，我想要与 Mysql 相同的结果

```
with tab1 as (
 select 100 col1, 1 col2, 'Hello' col3,9 col4  from dual
 union all
 select 200 col1, 1 col2, 'HelloWrld' col3,8 col4  from dual
 union all
 select 300 col1, 1 col2, 'HelloTher' col3,7 col4  from dual
 union all
 select 400 col1, 2 col2, 'HiThere' col3,6 col4  from dual
 union all
 select 500 col1, 3 col2, 'Howdy' col3,5 col4  from dual
 union all
 select 600 col1, 3 col2, 'Hiya' col3,4 col4  from dual
 )
 select min(col1),col2,min(col3),col4,min(col4)
 from tab1
 group by col2,col4

Result I get is this
 MIN(COL1)       COL2 MIN(COL3)       COL4  MIN(COL4)
---------- ---------- --------- ---------- ----------
       100          1 Hello              9          9
       200          1 HelloWrld          8          8
       500          3 Howdy              5          5
       600          3 Hiya               4          4
       300          1 HelloTher          7          7
       400          2 HiThere            6          6 
```

**我想要的是这个**

```
'100', '1', 'Hello', '9', '7'
'400', '2', 'HiThere', '6', '6'
'500', '3', 'Howdy', '5', '4' 
```

我如何在 Oracle 中实现 Mysql like group by 我无法得到这个，这是我试图解决的长查询的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:48:43.287

根据 mysql 文档，未在 group by 中指定的列的结果可以来自任何行。

因此，Oracle 中一个完全合理的查询是：

```
 select min(col1),col2,min(col3),min(col4),min(col4)
 from tab1
 group by col2 
```

如果您的 mysql 代码取决于选择的特定值，则该代码已损坏。你需要弄清楚你想要什么，并弄清楚如何在 Oracle 中得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:49:07.853

假设您的意图是获得确定性结果（与不确定的 MySQL 结果不同）并且您要保留的`col1`-`col4`数据是`col1`给定`col2`值具有最小值的行的数据，您可以使用分析函数

```
SQL> ed
Wrote file afiedt.buf

  1  with tab1 as (
  2   select 100 col1, 1 col2, 'Hello' col3,9 col4  from dual
  3   union all
  4   select 200 col1, 1 col2, 'HelloWrld' col3,8 col4  from dual
  5   union all
  6   select 300 col1, 1 col2, 'HelloTher' col3,7 col4  from dual
  7   union all
  8   select 400 col1, 2 col2, 'HiThere' col3,6 col4  from dual
  9   union all
 10   select 500 col1, 3 col2, 'Howdy' col3,5 col4  from dual
 11   union all
 12   select 600 col1, 3 col2, 'Hiya' col3,4 col4  from dual
 13   )
 14  select col1,
 15         col2,
 16         col3,
 17         col4,
 18         min_col4
 19    from (select col1,
 20                 col2,
 21                 col3,
 22                 col4,
 23                 min(col4) over (partition by col2) min_col4,
 24                 rank() over (partition by col2 order by col1) rnk
 25            from tab1)
 26*  where rnk = 1
SQL> /

      COL1       COL2 COL3            COL4   MIN_COL4
---------- ---------- --------- ---------- ----------
       100          1 Hello              9          7
       400          2 HiThere            6          6
       500          3 Howdy              5          4 
```

# javascript - 使用更新页码加载新内容 jQuery

> ID：11582664
> 
> 赞同：0
> 
> 时间：2012-07-20T15:43:04.100
> 
> 标签：javascript, jquery, load

当像这样执行函数时，我正在使用 jQuery 加载 10 个最新帖子：

```
function loadContent() {

   jQuery("#conz").load("http://mydomain.com/wallload.php?id=1&p=1", function(){
      jQuery("#conz").slideDown(200);
   });

} 
```

但是我想在函数执行时更新页码。页码是 .load 源页面的 url 中的“&p=1”。所以首先，我想在页面加载时设置为 1 的 url 中插入一个变量或字符串，但每次执行函数时都会加上一个。

所以基本上，当他们单击链接执行该功能时，它将加载第一页。然后下次他们这样做时，它会加载下一页，明白我的意思了吗？

我想这对于那些知道 Javascript 的人来说很容易，但我一点也不知道，所以请帮忙 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:46:19.120

在函数之外保留一个变量，并在每次调用函数时递增它。

```
var page=0;
function loadContent() {
   page++;
   jQuery("#conz").load("http://mydomain.com/wallload.php?id=1&p="+page, function(){
      jQuery("#conz").slideDown(200);
      page
   });

} 
```

# http - 如何使用 Fiddler 模拟超时

> ID：11582667
> 
> 赞同：13
> 
> 时间：2012-07-20T15:43:20.510
> 
> 标签：http, post, httpwebrequest, timeout, fiddler

我有一个 C# 脚本，它通过`WebRequest`. 我想测试如果其他服务器无响应，我的 Web 应用程序将如何响应。无需更改任何应用程序代码或配置的最佳方法是什么？Fiddler 是否能够导致来自本地 IIS 的请求超时？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-22T20:37:33.443

您可以使用“模拟调制解调器速度”规则来实现它。

1.  规则 -> 自定义规则
2.  找到显示“oSession[”response-trikle-delay“]”的行并更改它。将其设置为 10000。它应该足以导致超时。保存文件。
3.  规则 -> 性能 -> 模拟调制解调器速度（应检查）。

[注意：使用 ipv4.fiddler 而不是 localhost。](http://www.fiddler2.com/fiddler/help/hookup.asp#Q-LocalTraffic)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-09T08:11:20.337

可以在您想要拦截响应的特定响应上实现，并使用“AutoResponder”模拟延迟。“启用延迟”复选框并右键单击任何规则以选择“设置延迟”，然后您可以以毫秒值调整延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T17:52:24.820

您问题的另一部分是“如何让我的服务使用 Fiddler”，这里有答案：[http ://www.fiddler2.com/Fiddler/help/hookup.asp#Q-IIS](http://www.fiddler2.com/Fiddler/help/hookup.asp#Q-IIS)

# html - ImageMap 在 Internet Explorer 9 中不起作用

> ID：11582669
> 
> 赞同：1
> 
> 时间：2012-07-20T15:43:28.297
> 
> 标签：html, internet-explorer, imagemap

图像映射功能在 Internet Explorer 9 中不起作用，这是我的代码：

我的图像标签：

```
 <img id="rechtsInMainNavBar" border ="0" src="res/images/rechts-mainNavBar.jpg" usemap="#mainnavigation"> 
```

我的地图：

```
 <map id="mainnavigation" name="mainnavigation">
    <area href="index.html"  shape="rect" coords="3,4,95,72" class="openModal">
    <area shape="rect" coords="102,4,205,72" href="#InformationTab1" alt="Information" title="Information" class="openModal">
    <area shape="rect" coords="212,4,291,72" href="#ServiceTab1" alt="Service" title="Service" class="openModal">
    <area shape="rect" coords="294,4,373,72" href="#KontaktTab1" alt="Kontakt" title="Kontakt" class="openModal">
  </map> 
```

请帮助我，我不知道...它在 Safari、Firefox 和 Chrome 中完美运行。

# kendo-ui - Kendo UI DataSource 问题将参数传递给服务

> ID：11582672
> 
> 赞同：2
> 
> 时间：2012-07-20T15:43:35.827
> 
> 标签：kendo-ui

我正在使用 Kendo UI Grid + DataSource，并且在与我的服务交互时遇到了一些问题：

我们有一个服务应该被调用如下：

```
 /find?criteria[0].FieldName=Name&criteria[0].Value=Test&criteria[1].FieldName=Description&criteria[1].Value=MyDescription 
```

如何将这些参数从我的数据源传递给我的服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:07:19.940

你必须使用这样的`parameterMap`功能：

```
var data = kendo.data.DataSource({
    transport: {
        // these are passed to $.ajax()
        read: {
            url: "/find",
            dataType: 'json',
            type: 'GET',
            cache: false
        },
        update: {
            // ...
        },
        destroy: {
            // ...
        },
        create: {
            // ...
        },
        //
        parameterMap: function(options, type) {
            // edit VARS passed to service here!
            if (type === 'read') {
                return {
                    'criteria[0].FieldName': options.name,
                    'criteria[0].Value': options.value
                    // ...
                };
            }
        }
    },

    schema: {
        model: MyModel,
        type: 'json',

        parse: function(response) {
            // edit VARS coming from the server here!
            // ...
            return response;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T19:06:11.810

如果您使用的是客户端 Json 绑定。检查：dataSource->transport->parameterMap 属性。

如：

```
$(function () {
    $("#grid").kendoGrid({
          .....
         dataSource: {
          ....
          transport: {
               parameterMap: function (data, operation) {
                    if (operation != "read") {
                        .....
                        return result;
                    } else {
                        //data sample: {"take":10,"skip":0,"page":1,"pageSize":10}
                        //alert(JSON.stringify(data)); //Need to insert custom parameters into data object here for read method routing. so, reconstruct this object.
                        data.CustomParameter1 = "@Model.Parameter1"; // Got value from MVC view model.
                        data.CustomParameter2 = "@Model.Parameter2"; // Got value from MVC view model.
                        return JSON.stringify(data); // Here using post. MVC controller action need "HttpPost"
                }
          }
     }
 } 
```

MVC 控制器：

```
[HttpPost]
public ActionResult Read(int CustomParameter1, int CustomParameter2, int take, int skip, IEnumerable<Kendo.Mvc.Grid.CRUD.Models.Sort> sort, Kendo.Mvc.Grid.CRUD.Models.Filter filter)
{
         .....
} 
```

公司项目样本在：

[http://www.telerik.com/support/code-library/grid-bound-to-asp-net-mvc-action-methods---crud-operations](http://www.telerik.com/support/code-library/grid-bound-to-asp-net-mvc-action-methods---crud-operations)

# java - 尝试使用 http get 从 Google Drive 检索文件内容时出现错误 404

> ID：11582674
> 
> 赞同：1
> 
> 时间：2012-07-20T15:43:41.593
> 
> 标签：java, android, google-drive-api

我正在尝试使用 Android 应用程序中的 HTTP 获取请求来检索 Google Drive 文件的内容。我已经对自己进行了身份验证并获得了令牌，得到了下面的文件元数据（只是将“敏感信息”替换为 <“敏感信息”>）：

```
    {
    “种类”：“驱动器#文件”，
    "id": ""myFileId"",
    "etag": ""this_etag"",
    "selfLink": "https://www.googleapis.com/drive/v2/files/"myFileId"",
    "alternateLink": "https://docs.google.com/file/d/"myFileId"/edit",
    "thumbnailLink": "https://lh4.googleusercontent.com/thumbnailCode",
    "permissionsLink": "https://www.googleapis.com/drive/v2/files/"myFileId"/permissions",
    “标题”：“文件名.txt”，
    “mimeType”：“文本/纯文本”，
    “标签”： {
     “加星标”：错误，
     “隐藏”：错误，
     “垃圾”：错误，
     “受限”：错误，
     “已查看”：真实
    },
    "createdDate": "2012-07-13T17:53:29.589Z",
    “修改日期”：“2012-07-13T18：58：36.729Z”，
    "modifiedByMeDate": "2012-07-13T17:53:29.584Z",
    "lastViewedByMeDate": "2012-07-19T20:40:03.823Z",
    “父母”： [
     {
      “种类”：“驱动器#parentReference”，
      “ID”： ””，
      "selfLink": "https://www.googleapis.com/drive/v2/files/"myFileId"/parents/"id"",
      "parentLink": "https://www.googleapis.com/drive/v2/files/"id"",
      “是根”：真
     }
    ],
    "downloadUrl": "https://doc-0k-28-docs.googleusercontent.com/docs/securesc/"bigCode"/"anotherBigCode"/"moreNumbers"/"moreNumbers"/"moreNumbers"/"myFileId"?h ="moreNumbers"&e=下载&gd=true",
    “用户权限”：{
     "kind": "drive#permission",
     "etag": ""this_etag"",
     “id”：“当前”，
     "selfLink": "https://www.googleapis.com/drive/v2/files/"myFileId"/permissions/current",
     “角色”：“所有者”，
     “类型”：“用户”
    },
    "originalFilename": "zzzz.txt",
    "文件扩展名": "txt",
    "md5Checksum": "da22f14e635aa54e97e0e09b5d03a485",
    “文件大小”：“51”，
    "quotaBytesUsed": "51",
    “所有者名称”：[
     “爱默生.yt”
    ],
    "lastModifyingUserName": "Emerson.yt",
    “可编辑”：是的，
    “writersCanShare”：是的
    }

```

当我尝试使用元数据中返回的 downloadUrl 获取内容时，它会给出错误

```
“W/System.err(612): com.google.api.client.http.HttpResponseException: 404 Not Found”
```

我正在使用的相关java代码：

```
JsonFactory jsonFactory = new JacksonFactory();
HttpTransport transport = new NetHttpTransport();

// prefs is a SharedPreferences instance 
// acquired throught PreferenceManager.getDefaultSharedPreferences(this);
CredentialStore credentialStore = new SharedPreferencesCredentialStore(prefs);
TokenResponse accessTokenResponse = credentialStore.read();

Builder bldr = new Builder();
bldr.setTransport(transport);
bldr.setJsonFactory(jsonFactory);
bldr.setClientSecrets(myGoogleApiClientId, myGoogleApiClientSecret);

GoogleCredential accessProtectedResource = bldr.build();
accessProtectedResource.setAccessToken(accessTokenResponse.getAccessToken());
accessProtectedResource.setExpiresInSeconds(accessTokenResponse.getExpiresInSeconds());
accessProtectedResource.setRefreshToken(accessTokenResponse.getRefreshToken());

// HTTP_TRANSPORT is an instance of NetHttpTransport
HttpRequestFactory httpReqFactory = HTTP_TRANSPORT.createRequestFactory(accessProtectedResource);

GenericUrl url = new GenericUrl("https://www.googleapis.com/drive/v2/files/"myFileId"");
HttpRequest httpReq = httpReqFactory.buildGetRequest(url);
HttpResponse httpResp = httpReq.execute();
String resp = httpResp.parseAsString();
// just convert json string into java attributes of FileResourceMetadata class
FileResourceMetadata frm = new FileResourceMetadata(resp); 
String downloadURL = frm.downloadUrl; 
url = new GenericUrl(downloadURL); 
httpReq = httpReqFactory.buildGetRequest(url);
httpResp = httpReq.execute(); 
```

怎么了？

谢谢，爱默生。

# asp.net-mvc-3 - JQGrid 可选的可编辑列

> ID：11582678
> 
> 赞同：0
> 
> 时间：2012-07-20T15:43:55.207
> 
> 标签：asp.net-mvc-3, jqgrid-asp.net

注意：我使用的是[JQGrid MVC 组件](http://www.trirand.net/default.aspx)而不是 jquery 插件。

我有一个可编辑的专栏。

在某些情况下，用户不应该能够对其进行编辑。我想将此决定基于另一个列值，该值将被隐藏。

我知道 ClientSideEvents.AfterEditDialogShown 但我想通过内联编辑来做到这一点。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:04:08.233

您可以使用该`beforeEditCell`事件来禁用列的单元格编辑条件。

**要应用条件编辑的列**

```
{
  cellEdit        : true,
  beforeEditCell  : function(rowid, cellname, value, iRow, iCol) {
     ...
  }
} 
```

要了解更多信息，请查看[此](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing)。

# objective-c - Objective-C：类与协议

> ID：11582685
> 
> 赞同：1
> 
> 时间：2012-07-20T15:44:40.397
> 
> 标签：objective-c, protocols

我正在阅读协议（并认为我可以使用它们重写一些代码），但我似乎陷入了到底是什么使它与类不同？

例如，如果我有一个 ColorController 类：

```
#import <Foundation/Foundation.h>

@interface ColorController : NSObject { 

UIColor* colorToReturn;

}

- (UIColor* ) setColor : (float) red : (float) green : (float) blue; 

@end 
```

还有他们

```
#import "ColorController.h"

@implementation ColorController 

- (UIColor* ) setColor : (float) red : (float) green : (float) blue { 

float newRed = red/255;
float newGreen = green/255;
float newBlue = blue/255;

colorToReturn = [UIColor colorWithRed:newRed green:newGreen blue:newBlue alpha:1.0];

return colorToReturn;
}
@end 
```

然后将其导入另一个类：

```
ColorController* colorManager = [ColorController new]; 

UIColor* newColor = [colorManager setColor:66.0:66.0:66.0]; 
```

这似乎很适合转换为协议，因为许多其他类可以使用 setColor 方法。但是我不确定我对协议的理解是否有问题，我认为一旦声明了协议，其他类就可以使用它，但是由于您仍然必须将它包含在 .h 文件中，对我来说唯一可辨别的区别是使用协议 setColor 方法可以在我已将协议导入到的任何类中直接调用，而导入类我将不得不回调类和方法 [colorManager setColor:66.0:66.0:66.0]; 这里的收益究竟是什么？

现在我的观点可能是因为我是一个新手/没有协议经验，并且对它们及其用法的看法有限，所以如果有人能给我一个简短的（除了“去阅读文档”：D）回复的好处协议，也许还有一个使用示例，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:54:24.620

协议没有给出实现，只是一些功能的声明。您仍然必须为符合该协议的任何类手动实现函数。（一个常见的例子是委托模式）。协议类似于 java 中的接口，如果你熟悉的话。

**编辑**删除死链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:53:41.223

而且 ObjC 协议很像 Java 接口： - 你不必实现你的协议 - 一个类可以实现多个协议，但只能从一个类继承

因此，如果您希望您的类或协议只会被一个类使用，一个继承了您的大部分行为的子类，那么创建一个类。但是，如果您希望多个类使用您的类或协议，那么请制定一个协议。

# macos - 如何将 Leopard 和 Snow Leopard 支持添加到 Lion Cocoa 应用程序？

> ID：11582687
> 
> 赞同：1
> 
> 时间：2012-07-20T15:44:50.913
> 
> 标签：macos, cocoa, osx-lion, backwards-compatibility

我在 Lion 上开发了一个 Cocoa 应用程序，现在我想添加与 Leopard 和 Snow Leopard 的兼容性。

我尝试将开发目标设置为 10.5，但它在 Leopard 和 Snow Leopard 上仍然存在崩溃问题。

我也尝试使用旧版本的 Xcode 打开项目，但出现数百个编译错误（我猜是因为我无法使用旧的 Mac OS SDK 编译程序）

您对解决 Cocoa Apps 的追溯兼容性问题有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:09:36.350

我认为为最新的操作系统开发然后在最后一刻尝试支持旧操作系统通常不是一个好主意。如果您使用的任何 API 在操作系统中引入的时间晚于您尝试支持的最旧版本，则您必须重写代码以避免使用这些 API。这通常不值得麻烦。

也就是说，支持旧操作系统并不是什么秘密。您只需要确保您只使用在您尝试支持的最旧操作系统上可用的 API（类、方法、函数）。在查看每种方法的文档时，您会注意到，在“可用性”下，它会告诉您哪些版本的操作系统包含该方法。就像是：

**可用性**
适用于 Mac OS X v10.6 及更高版本。

假设您不使用您所针对的操作系统版本上不可用的任何 API，您所需要做的就是将部署目标设置为您所针对的最低操作系统，然后进行构建。当然，您还需要在您支持的每个操作系统版本上进行彻底测试。

如果您详细说明您在 Leopard 和 Snow Leopard 上看到的“崩溃问题”，您的问题会更容易回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T23:15:48.190

首先，在您的 Mac 上安装 10.5 SDK。这可能不是必需的，但无论如何都要这样做。您可以在 Internet 上找到说明。请记住，使用 10.5 SDK 编译将确保兼容性，但您将无法使用更新的 OS X 功能，除非您动态加载它们。

其次，进入您的 .xib 文件并在 File Properties 选项卡上（Inspector 窗格中的第一个缺口）禁用自动布局并将部署目标设置为 10.5。

# asp.net - 在 aspx 页面中将 int 格式化为货币格式的字符串

> ID：11582689
> 
> 赞同：2
> 
> 时间：2012-07-20T15:45:05.157
> 
> 标签：asp.net

假设我的 aspx 页面中有这个标签：

```
<asp:Label ID="savings" runat="server" Text='<%# Eval("savings")%>' /> 
```

有没有办法将标签的文本格式化为货币格式的字符串？我正在寻找这样的东西：

```
<asp:Label ID="savings" runat="server" Text='<%# Eval("savings").ToString("C")%>' /> 
```

当我运行它时，我得到：

```
 No overload for method 'ToString' takes 1 arguments 
```

编译错误。

我知道我可以在我的代码隐藏中轻松地做到这一点，但我想知道它是否可以从 .aspx 文档中实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:52:56.653

试试这个代码：

```
<asp:Label ID="savings" runat="server" Text='<%# string.Format("{0:C}", Eval("savings"))%>' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T09:36:36.550

如果您正在处理字符串，请尝试此代码

```
<asp:Label ID="savings" runat="server" Text='<%# String.Format("{0:c}", Convert.ToDecimal(Eval("savings")))%>' /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:52:00.523

该`ToString(string)`方法仅对数值类型进行操作，但`Eval(string)`返回`object`.

在调用扩展方法之前将结果转换为正确的类型，如下所示：

`<%# ((decimal)Eval("savings")).ToString("C") %>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-17T06:58:07.937

晚了..但有用

任何寻找印度货币格式或任何其他货币的人都可以使用 CultureInfo 类。例子：

```
(YourData).ToString("C2",CultureInfo.CreateSpecificCulture("in-IN")); 
```

我建议您将尝试格式化的数据转换为十进制以跳过任何开销，还请查看[此](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings)页面以获取更多文化组合和更多关于格式化的信息。

# javascript - 为什么我不能遍历 getElementsByTagName 返回的所有元素？

> ID：11582691
> 
> 赞同：1
> 
> 时间：2012-07-20T15:45:15.657
> 
> 标签：javascript, dom

我正在尝试用另一个标签替换一组标签，但由于某种原因，我似乎无法遍历 getElementsByTagName() 返回的所有标签。

[在示例](http://jsfiddle.net/Xeoncross/dxNmG/1/)中，第一行中的第二个`td`由于某种原因被跳过，即使它出现在`console.log(tds)`.

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:48:05.110

将第一行更改为：

```
var tds = [].slice.call(document.getElementsByTagName('td'), 0); 
```

从返回的值`.getElementsByTagName()`是一个 NodeList，而不是一个数组。NodeList 对象是“活动的”，这意味着它们会随着您更改 DOM 而发生变化。也就是说，`tds.length`正在递减，但您`i`也在递增 - 因此每次迭代都会丢失一个元素。如果你先把它变成一个数组，如上所述，那么你的代码应该可以工作。

# asp.net - 行悬停时不可见锚标记

> ID：11582698
> 
> 赞同：0
> 
> 时间：2012-07-20T15:45:37.867
> 
> 标签：asp.net, html, css

```
<div class="container">
<div class="name">Jack</div>
<a href="#" class="modify">Edit</a>
</div>

.container .modify {display:none}
.container:hover .modify, .container:focus .modify{display:block} 
```

当用户按 Tab 键焦点位于 div 容器上时，将显示编辑链接。但是，如果用户再次按 Tab 而不是专注于编辑链接，则编辑将再次隐藏。我想如果焦点在 div 上并且用户按下选项卡焦点应该继续编辑链接。

请关注[http://jsfiddle.net/lakshya85chd/8Y74X/](http://jsfiddle.net/lakshya85chd/8Y74X/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:00:29.467

如果它不显示，则无法将鼠标悬停在其上，因此请使用隐藏的可见性

```
.container .modify {visibility:hidden;}
.container .modify:hover, .container .modify:focus{visibility:visible;} 
```

# iphone - 按下时 UIButton 保持突出显示

> ID：11582700
> 
> 赞同：1
> 
> 时间：2012-07-20T15:45:52.663
> 
> 标签：iphone, ios, uibutton

这非常令人沮丧，我搜索了很多无济于事。

我有一个按钮。当它被按下时，它会调用一个执行网络操作（NSURLRequest）的方法。

该按钮应执行以下操作：

*   按下时：显示按下状态图像，触发请求方法
*   按下后：显示按钮的禁用状态，直到方法完成请求

问题是按钮在整个请求过程中一直处于突出显示/按下状态。我附上了我目前在下面的代码。

对于按钮：

```
[myButton setBackgroundImage:[UIImage imageNamed:@"defaultbutton"] forState:UIControlStateNormal];
[myButton setBackgroundImage:[UIImage imageNamed:@"pressedbutton"] forState:UIControlStateHighlighted];
[myButton setBackgroundImage:[UIImage imageNamed:@"disabledbutton"] forState:(UIControlStateDisabled|UIControlStateSelected)];
[squishButton addTarget:self action:@selector(reqMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

在请求开始的方法中：

```
-(void)reqMethod {
NSLog(@"Starting request..");
[myButton setHighlighted:NO];
[myButton setEnabled:NO];
[myButton setSelected:YES]; 
```

当请求完成时，它会隐藏普通按钮并显示一个可以正常工作的重置按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:50:07.430

您应该查看多线程文档。 [http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html)

如果您想要一段代码，我认为这可能很有用

```
[myButton setBackgroundImage:[UIImage imageNamed:@"defaultbutton"] forState:UIControlStateNormal];
[myButton setBackgroundImage:[UIImage imageNamed:@"pressedbutton"] forState:UIControlStateHighlighted];
[myButton setBackgroundImage:[UIImage imageNamed:@"disabledbutton"] forState:(UIControlStateDisabled|UIControlStateSelected)];
[squishButton addTarget:self action:@selector(reqMethod) forControlEvents:UIControlEventTouchUpInside];

    dispatch_async(dispatch_get_global_queue(0, 0), 
                       ^{
                           //Your request
    dispatch_async(dispatch_get_main_queue(), 
                           ^{
                   NSLog(@"Starting request..");
                   [myButton setHighlighted:NO];
                   [myButton setEnabled:NO];
                   [myButton setSelected:YES];  
                     });
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:01:05.053

为什么不在后台线程上进行网络操作：

```
- (IBAction)buttonPressed:(UIButton *)button 
{

    [NSThread detachNewThreadSelector:@selector(doSomeNetworkStuff) toTarget:self    withObject:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:48:06.743

当您第一次按下它时，这将使按钮保持突出显示（您可以更改它以处理图像）。如果再次按下它，它将变得不突出。（我知道语法看起来很奇怪，试试吧……它有效）

```
@property (nonatomic) BOOL buttonHighlighted

// IBAction called when button pressed the first time
- (IBAction)buttonPressed:(UIButton *)button 
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        if(self.buttonHighlighted)
        {
            button.highlighted = NO;
            self.buttonHighlighted = NO;
        }
        else
        {
            button.highlighted = YES;
            self.buttonHighlighted = YES;
            //Fire request method
        }
    }];
} 
```

现在，只需在您的请求完成后再次调用此方法。

# forms - 提交表单时，Spring MVC 控制器如何执行方法解析？

> ID：11582702
> 
> 赞同：0
> 
> 时间：2012-07-20T15:46:01.940
> 
> 标签：forms, spring-mvc, controller

我在 jsp 中有一个 Spring MVC 表单，**但无法调用控制器方法**。

有人可以向我解释一下**Spring MVC 执行控制器方法执行的机制**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:24:41.817

如果您使用 Spring 3 和注释（推荐的实现控制器的方式），则 @RequestMapping(value="exampleMapping.do") 指定将执行的方法。这是一个例子：

```
@RequestMapping("/exampleMapping.do")
public String anExample(Model model) {
    // do some stuff
    return "someView";
} 
```

因此，在这种情况下，如果您的表单提交目标是 exampleMapping.do，则方法 anExample 将执行并返回 someView（如果您正确配置了视图解析器，它将解析到包含名为 someView.jsp 的 jsp 的视图文件夹）。

# c++ - 简单的跨平台设置管理器

> ID：11582706
> 
> 赞同：2
> 
> 时间：2012-07-20T15:46:11.147
> 
> 标签：c++, application-settings, user-profile

我正在编写一个名为 Bombz 的跨平台游戏（使用 C++），我需要一种读取/写入用户设置等的方法，其中还包括已完成关卡的记录。像 ini 文件解析器这样的东西就可以了，它并不需要高效和/或可扩展 - 我可以在启动时读取所有设置，而不是动态查找命名键。

我找到了一些简单的 ini 文件解析器，但它们忽略了在哪里存储文件的问题，看起来我可能不得不自己编写所有这些东西。我应该使用类似的东西：

*   视窗：`$APPDATA/realh/Bombz/config`
*   苹果电脑：`$HOME/Library/Bombz/config`
*   Linux 等：（`$HOME/.bombz/config`或使用 XDG 规范）

我在哪里查找`$HOME`或`$APPDATA`与`getenv()`？我知道在 Windows 中有“更好的认可”方式来查找它，但我是一个 Linux 人，我不想直接处理 Windows API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:12:00.693

嗯，这很有趣——有人试图在不调用操作系统函数的情况下编写游戏。相当的挑战。

除此之外，如果您不想调用 SHGetKnownFolderPath()，那么环境变量是您唯一的选择。尽管就我自己而言，我什至不信任 Linux 上的 $HOME——我使用 getpwuid_r()。和 NSHomeDirectory() 在 MacOS 上。

# javascript - jQuery淡入淡出图像循环

> ID：11582715
> 
> 赞同：0
> 
> 时间：2012-07-20T15:46:31.867
> 
> 标签：javascript, jquery, html

我想在我的函数中创建一个循环，以便幻灯片效果始终重新启动。

这是我的小提琴：http: [//jsfiddle.net/Be67B/](http://jsfiddle.net/Be67B/)

图像 1 转到图像 2 一切都很好，但我希望它淡化回图像 1，然后转到图像 2，依此类推……总是像这样循环。

我需要在我的代码中添加什么才能使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:51:47.760

不要使用循环，只需要求浏览器重复调用您的动画步骤：

```
setInterval(function(){
   // your animation (in fact just a step)
}, someDelay); 
```

演示：http: [//jsfiddle.net/dystroy/nPh6S/](http://jsfiddle.net/dystroy/nPh6S/)

在这种精确的情况下，动画是通过以下方式完成的：

```
setInterval(function(){
    $("#top").fadeOut(function() {
        $(this).attr("src","http://1.bp.blogspot.com/-cFt5KNrHsHc/TZMH6XUBu-I/AAAAAAAAAR4/R6hOP7lffx0/s1600/apple-logo.png").fadeIn().delay(1000).fadeOut(function(){
            $(this).attr('src', 'http://coreldrawtips.com/images/applebig.jpg').fadeIn().delay(1000);
        });
     }
    );
}, 4000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:50:49.630

看到这个 jquery 循环插件：

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

可能这就是你想要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:53:12.613

您可以创建一个执行转换的函数，该函数具有一个回调函数作为`fadeIn`方法的一部分，该函数将回调自身以触发下一个转换，并且它只是在一个恒定循环中。

这是您修改后的 jsfiddle：http: [//jsfiddle.net/Be67B/1/](http://jsfiddle.net/Be67B/1/)

**HTML：**

```
<img id="top" src="http://coreldrawtips.com/images/applebig.jpg" width="300" height="300" />​ 
```

**Javascript：**

```
$(document).ready(function(){
  transition(false);
});

function transition(first)
{
    var src = first ? "http://coreldrawtips.com/images/applebig.jpg" : "http://1.bp.blogspot.com/-cFt5KNrHsHc/TZMH6XUBu-I/AAAAAAAAAR4/R6hOP7lffx0/s1600/apple-logo.png";

    $("#top").delay(1000).fadeOut(function() {
        $(this).attr("src",src).fadeIn(function() {
            transition(!first);
        });
    });    
}
    ​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:02:02.807

我会使用插件。但是你可以用手来做。我只是建议不要更改图像的 src，因为有些浏览器不能很好地处理它，比如 safari 不会触发加载事件。

相反，将所有图像放在一个容器中，并循环它们的可见性：

```
$(document).ready(function(){
    var currentImage = $("#images img:first");

    setInterval(function(){
        currentImage.fadeOut();

        if(currentImage.next().size())
            currentImage = currentImage.next();
        else
            currentImage = currentImage.siblings().first();

        currentImage.fadeIn();
    }, 1000)
}); 
```

见小提琴：http: [//jsfiddle.net/Be67B/2/](http://jsfiddle.net/Be67B/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T16:02:53.207

又快又脏：**[jsFiddle 示例](http://jsfiddle.net/j08691/Be67B/3/)**

```
function swap(img) {
    img = (img == 'http://coreldrawtips.com/images/applebig.jpg') ? 'http://1.bp.blogspot.com/-cFt5KNrHsHc/TZMH6XUBu-I/AAAAAAAAAR4/R6hOP7lffx0/s1600/apple-logo.png' : 'http://coreldrawtips.com/images/applebig.jpg';
    $('#top').delay(2000).fadeOut(function() {
        $(this).attr('src', img)
    }).fadeIn(function() {
        setTimeout(function() {
            swap(img)
        }, 1000);
    });
};
swap($('#top').attr('src'));​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T15:58:50.913

我刚刚做了这个代码：

```
$(document).ready(function(){
   // images in the pool
   var images=["http://1.bp.blogspot.com/-cFt5KNrHsHc/TZMH6XUBu-     I/AAAAAAAAAR4/R6hOP7lffx0/s1600/apple-logo.png",
           "http://1.bp.blogspot.com/-cFt5KNrHsHc/TZMH6XUBu-I/AAAAAAAAAR4/R6hOP7lffx0/s1600/apple-logo.png"];

      // next image to display
      var next = 0;

      // interval beetween images
      var INTERVAL = 1000;

      // main function
      var doCarrousel = function() {
         $("#top").fadeOut(function() {
             $(this).attr("src", images[next]).fadeIn(
                 function() {
                   setTimeout(doCarrousel, INTERVAL);
                 });
          });
          if (++next >= images.length)
             next = 0;
       };

       //start carrousel
       doCarrousel();
}); 
```

**提琴手**：http: [//jsfiddle.net/Be67B/](http://jsfiddle.net/Be67B/)

# android - 启动 Android 虚拟设备时出现“createRenderThread 连接失败”

> ID：11582716
> 
> 赞同：0
> 
> 时间：2012-07-20T15:46:33.733
> 
> 标签：android, android-emulator

谁能告诉我如何解决以下问题，或者我可以使用哪些工具来尝试解决此问题。当我尝试启动 Jelly Bean VM 时出现此错误。

```
Starting emulator for AVD 'Nexus_7'
createRenderThread failed to connect
Failed to allocate memory: 8
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我试过从命令行执行它：

```
C:\Program Files (x86)\Android\android-sdk\tools>emulator -avd Nexus_7 -memory 1024 
```

而且还是不行。我看不到任何获取更详细信息的方法。而且我真的不知道**8**来自内存分配。

这是我的虚拟设备设置：

![在此处输入图像描述](../Images/a8b85ce21729ca1b67f4a177f4668156.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:26:10.877

就我而言，这是由于阻止了我的防火墙中的一些流量/端口造成的。

当无法访问模拟器时（例如通过 Eclipse），似乎也会显示此消息。在这种情况下，会发生以下情况：

*   从 AVD 启动模拟器时也会出现消息（创建渲染线程无法连接）
*   Eclipse 不会“看到”正在运行的模拟器，并为程序的每次运行启动一个新的模拟器
*   Eclipse 永远无法将 apk 加载到模拟器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:19:01.907

我相信[这篇](http://code.google.com/p/android/issues/detail?id=33930#c5)文章可以帮助你解决这个问题。只需下载**tools_r19-windows.zip** zip 文件并将`tools`sdk 中的文件夹替换为 zip 文件中提供的文件夹。稍后当您启动 Eclipse 时，忽略 ADT 版本警告消息，您就可以开始了。

我也遇到了同样的问题，这种技术帮助我解决了这个问题。

# android - Android：可以写入 lib 目录吗？

> ID：11582717
> 
> 赞同：0
> 
> 时间：2012-07-20T15:46:37.310
> 
> 标签：android, android-ndk

是否可以以编程方式将文件复制到 /data/data/application_package/lib 目录中或在 /data/data/application_package/lib 目录中创建符号链接？

尝试写入 lib 目录时，我总是收到权限被拒绝错误。我已经定义

```
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:07:48.877

您不能写入 lib/，但您不需要。

您可以写入应用程序私有存储区域内的任何非保留位置，并且可以使用带有完整路径名的 System.load() 从设备上您具有读取和执行权限的任何文件加载本机库，而不是 System.loadLibrary() 的短库名称。

外部存储 (sdcard) 挂载了一个不可执行的标志，但是您的私有存储目录​​中的文件将是一个可行的解决方案。只要确保它只能由您的应用程序写入，这样其他东西就无法在您背后更改它（这是因为您无法保护外部存储文件免受此类修改，因此外部存储是不可执行的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T08:37:06.613

如果你想加载so文件，你可以使用system.load(); 您可以将其复制到数据/包名称/库

并使用 system.load() 加载

# ruby-on-rails - 在 YAML 中，如何将字符串分配给具有子键的键？

> ID：11582720
> 
> 赞同：1
> 
> 时间：2012-07-20T15:46:42.210
> 
> 标签：ruby-on-rails, yaml

在 YAML 中，对于 I18n Rails 翻译，我有

```
en:
  mainkey:
    subkey: 'Some Text' 
```

我可以检索 en.mainkey.subkey，但是如何将文本分配给 en.mainkey ！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:50:27.947

你不能。的值`en.mainkey`是包含 的哈希`subkey`。它也不能是字符串。例如，您可以将它放在子键旁边的另一个键下。

# mahout - Mahout 中每个数据点的唯一标识符

> ID：11582727
> 
> 赞同：0
> 
> 时间：2012-07-20T15:47:27.197
> 
> 标签：mahout, uniqueidentifier

假设我有一个要在其上运行 Mahout 集群作业的数据集。我希望每个数据点都有一个唯一的标识符，例如 ID 号。我不想将 ID 附加到向量，因为这样它将包含在聚类计算中。如果算法在计算中不包含 ID 号，如何在数据中包含标识符？有没有办法让输入成为键值对，其中键是 ID，值是我要运行算法的向量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:02:02.430

艾莉森在担心这个之前，先看看输出。很多时候，您有几行assignedCLusterID，其中输入和输出文件中的行顺序是相同的。例如，输入文件第一行的节点将位于输出文件的第一行。因此，您可以将 id 保存在单独的文件中，将它们的向量保存在输入文件中。然后你可以结合单独的文件和输出文件来查看哪个节点分配了哪个集群。

# ios5 - 状态栏中的 iOS 环境通知，如新的 Twitter 应用程序

> ID：11582731
> 
> 赞同：3
> 
> 时间：2012-07-20T15:47:36.813
> 
> 标签：ios5, xcode4, ios6

我正在尝试在新的 twitter 应用程序中重新创建相同的应用程序通知，他们称之为环境通知。我已经搜索了 iOS 5 和 6 的苹果文档，但我没有找到任何有用的东西，甚至没有发现任何相关的东西。如果有人以前这样做过，可以给我一个例子吗？我可以解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:35:41.583

我也在寻找与我的客户在我们的应用程序中想要相同功能但仍然没有运气相同的东西。但同时你可以使用这个库来实现你的目标[https://github.com/brunow/BWStatusBarOverlay](https://github.com/brunow/BWStatusBarOverlay)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T10:22:43.457

如果您只想在 iOS 状态栏中显示通知，我建议您使用[CWStatusBarNotification](https://github.com/cezarywojcik/CWStatusBarNotification)，它可以使用[Cocoa Pods](http://www.cocoapods.org)添加到您的 Xcode 项目中。

您可以设置参数，如持续时间、背景颜色、文本颜色、动画样式等。

# android - 将一个 LinearLayout 设置为另一个具有 imagebackground 的 LinearLayout

> ID：11582732
> 
> 赞同：0
> 
> 时间：2012-07-20T15:47:43.547
> 
> 标签：android, xml, background, android-linearlayout

我想设置我的主要布局的背景并将内容放入其中。问题：内容被设置为填充整个背景**，但它被完全压缩成几个像素。**

更新：我为我的背景使用了 9 个补丁图像。

这是我的代码：

```
 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:gravity="center"
    android:background="@drawable/badgeandroid"
    android:layout_marginLeft="20sp"
    android:layout_marginRight="20sp"
    android:layout_marginBottom="20sp"
    >

    <LinearLayout 
    android:id="@+id/contentbadge"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:gravity="center"
    android:layout_margin="10sp"
    >

   <TextView 
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:text="Your badge pocket is empty"
    android:textColor="#FFFFFF"
    android:textSize="25sp"
    android:textStyle="bold" 
    android:gravity="center"
   ></TextView>

    </LinearLayout >

    </LinearLayout > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:14:17.817

尝试使用此代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="20dip"
    android:layout_marginLeft="20dip"
    android:layout_marginRight="20dip"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/contentbadge"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dip"
        android:gravity="center"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Your badge pocket is empty"
            android:textColor="#FFFFFF"
            android:textSize="25dip"
            android:textStyle="bold" >
        </TextView>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:12:02.773

好的，我终于找到了解决方案。9补丁搞砸了一切。[在这里](https://stackoverflow.com/questions/3904852/android-layout-broken-with-9-patch-background)回答。

我只是添加删除了我的填充并将它们包含到 9patch 中：

```
 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:gravity="center"
    android:background="@drawable/badgeandroid"
    android:layout_margin="0dp"
    >

    <LinearLayout 
    android:id="@+id/contentbadge"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:gravity="center"
    android:layout_margin="10sp"
    >

   <TextView 
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:text="Your badge pocket is empty"
    android:textColor="#FFFFFF"
    android:textSize="25sp"
    android:textStyle="bold" 
    android:gravity="center"
   ></TextView>

    </LinearLayout >

    </LinearLayout > 
```

[Romain Guy在这里](http://www.mail-archive.com/android-developers@googlegroups.com/msg09595.html)解释了原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:05:39.230

您的布局边距不正确。您正在使用“sp”-> 缩放像素。这是文本的尺寸。您应该使用的是“dp”或“dip”（两者相同）-> 与密度无关的像素。

# iphone - 检测独立应用程序并切换到它

> ID：11582733
> 
> 赞同：2
> 
> 时间：2012-07-20T15:47:44.873
> 
> 标签：iphone, ios, ipad, ios-standalone-mode

我认为 OkCupid 的网站能够检测您是否安装了他们的 AppStore 应用程序，然后如果它确实存在于本地设备（例如 iPhone、iPad）上，则从他们的网站切换到该应用程序。有谁知道如何做到这一点？我知道如何检测网络应用程序何时以常规或独立模式运行，但我不知道如何检测/从常规浏览器会话切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:36:31.657

### 这可以很容易地完成，使用称为*iOS URL Schemes*的东西。

就是这样：

1.  打开应用程序的`Info.plist`文件。
2.  右键单击并添加以下行：“URL 类型”（或`CFBundleURLTypes`）
3.  展开“项目 1”并添加编辑 URL 名称作为应用程序的标识符。（即`com.companyName.AppName`）
4.  将第二行添加到“项目 1”，并将其称为“URL 方案”（或`CFBundleURLSchemes`）
5.  将 URL 方案编辑为您想要的任何内容。此 URL 将自动打开您的应用程序。（即，值`appName`将导致任何以开头的 URL`appName://`打开您的应用程序）

这就是实现此功能所必需的。但是，您可能希望使用此 URL 将信息传递给您的应用程序。在这种情况下，只需实现一个自定义处理程序，如下所示：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
    if (!url) {  
        return NO; 
    }

    NSString *URLString = [url absoluteString];
    // Do whatever you want with this string.

    return YES;
} 
```

必须把它交给苹果，因为它让这个过程变得如此无缝。祝你的应用好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:56:25.260

请阅读本文档，如果 OKCupid 有一个 URL Scheme 可以这样做。

[与其他应用程序通信](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:59:08.017

自定义 URL 方案是一个应用程序加载另一个应用程序的方式。这里有一个来源位，有很多关于此的信息。

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

# ruby-on-rails - 如何以详细模式启动 webrick 服务器，以便 Rails 应用程序在控制台上查看 HTTP 请求/响应标头？

> ID：11582745
> 
> 赞同：0
> 
> 时间：2012-07-20T15:48:28.397
> 
> 标签：ruby-on-rails, webrick

我正在为我在 rails 中的一个 android 应用程序开发一个 API。我试图通过所有后续请求中的守望者/设计已经为其实现的cookie来保持用户会话处于活动状态。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:00:44.017

对于瘦服务器：瘦启动 -V

顺便说一句，我们可以用 thin --help 得到它

# java - java.awt.container.add(comp) 瓶颈

> ID：11582748
> 
> 赞同：2
> 
> 时间：2012-07-20T15:48:37.810
> 
> 标签：java, performance, swing, user-interface, containers

我正在更新/维护现有的绘图程序。这应该是一个中型程序（能够处理少于一百万个节点+它们的转换）。在 GUI 中，有一个“视口”可以直观地显示图形，还有一个侧面板，其中包含包含节点、转换等摘要的选项卡...

图形部分的效果非常好，而且速度很快，但在运行分析器 (YourKit) 后，96-99.8% 的时间都花在为节点创建摘要选项卡/表上。因此，对于 10,000 个节点，可视化生成图形需要一两秒钟，但填充表格需要几分钟！

该过程的摘要如下：选项卡收到模型更改的通知并获取节点列表。如果它需要更多行，它会添加它们，否则它会重用或丢弃旧的。然后在创建行及其单元格之后，它会填充它们。

人口是每行一个节点，每行三个单元格（JPanel）（每个都包含一些信息）。每次在添加新行或要求该行检查更新时创建一个单元格时，它都会调用下面提供的“positionPanel”方法。布局管理器是 SpringLayout。根据分析器，在生成此表的百分之九十中，百分之九十减去一是“add(newPanel);” 线。

关于速度在哪里以及如何提高速度的任何建议？

```
private void positionPanel(int row, int col) {

      JPanel upPanel = this;
      JPanel leftPanel = this;
      String upSpring = SpringLayout.NORTH;
      String leftSpring = SpringLayout.WEST;
      if (row != 0) {
        upPanel = cells.get(row - 1)[col];
        upSpring = SpringLayout.SOUTH;
      }
      if (col != 0) {
        leftPanel = cells.get(row)[col-1];
        leftSpring = SpringLayout.EAST;
      }
      Cell newPanel = cells.get(row)[col];
      //cells.get(row).set(col, newPanel);
      add(newPanel);
      layout.putConstraint(SpringLayout.NORTH, newPanel, cellSpacing, upSpring, upPanel);
      layout.putConstraint(SpringLayout.WEST, newPanel, cellSpacing, leftSpring, leftPanel); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:15:06.440

考虑的建议[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)取决于它使用[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)来实现[渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。好处来自仅渲染可见/更改的节点，而忽略其他节点。`JGraph`使用类似的方法。[此处](https://stackoverflow.com/a/7776211/230513)概述了基本机制。请注意，收益仅对视图产生，但您的分析表明它可能是值得的。

# javascript - 计算元素的剩余宽度

> ID：11582753
> 
> 赞同：0
> 
> 时间：2012-07-20T15:48:44.283
> 
> 标签：javascript, html, css

我只需要帮助使元素适合 div 的剩余空间，该空间被固定位置元素覆盖。过度简化：我有一个左固定菜单，它有 25% 的总宽度，但有一个限制：最大宽度：350 像素和最小宽度：280 像素。我还有一个中心对齐的 div，它的宽度为 80%。我想将内容放在第二个 div 中，在 div 接触点和左边距之间。我已经尝试在 div 开始和菜单结束之间放置一个间距 div （内容占用其余空间），但我得出的结论是，由于 min 和 max 无法使用 css 进行这些计算宽度。（如果我改变屏幕分辨率。宽度可能会改变或不改变）。

我怎样才能解决这个问题？它的 javascript 是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:08:16.987

我认为无论是[这个小提琴](http://jsfiddle.net/6BTc7/24/)还是[这个小提琴](http://jsfiddle.net/6BTc7/25/)都可以让你得到你想要的。在任何一种情况下，我都使用了一个伪元素来生成 a`float`来分隔它。

```
#container:before {
    content: '';
    display: block;
    float:left;
    margin-left: -12.5%; /* push float to left edge based on 80% container width */
    width: 31.25%; /* make float 25% of total width based off its 80% container */    
    max-width: 350px;
    min-width: 280px;
    height:100%; /* or 90% in first fiddle */
} 
```

如果您希望它始终保持正确，第二个小提琴也已`overflow: hidden`设置。`#content`两者都需要`height: 100%`在`body`and`html`标签上设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T15:57:18.457

你可以使用这种类型的javascript

```
var a =$('#id of outer div').height();
var b = $('#id of inner div').height();
var c = a-b;
$('#id of filling div').css("height",c); 
```

# javascript - Onbeforeunload - Windows 分配在 Chrome 中不起作用

> ID：11582754
> 
> 赞同：0
> 
> 时间：2012-07-20T15:48:44.533
> 
> 标签：javascript, google-chrome, onbeforeunload

我正在尝试将“留在页面上”按钮重定向到自定义地址。我找到了这段代码，它可以在 OSX 和 PC 上的 Firefox 中运行，但在 Chrome 中它什么也没做。

我错过了什么吗？

> $(document).ready(function() { window.onbeforeunload = function(){ location.assign('http://www.nba.com'); return "打球"; } });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:37:08.413

如果用户想要离开您的页面或关闭浏览器窗口，那么您所能做的就是`(1) Let Them [preferred]`或者您可以`(2) tap into onBeforeUnload event`，这只不过是“您确定吗？” 弹出消息，允许用户留在页面上或不留在页面上。

您上面的代码`return "Play ball"`决定了要在“您确定吗？”中显示的消息。对话。如果您不返回字符串，那么您可以在退出之前执行清理代码，而用户不会看到弹出警告。chrome 很聪明，不会让窗口导航代码在 return 语句之前执行。

你绝对不应该使用 onBeforeUnload 进行页面重定向/站点导航。

如果您发布其他代码以及您想要完成的工作，可能会有更好的活动供您利用。

# json - json 对象的车把数组

> ID：11582756
> 
> 赞同：28
> 
> 时间：2012-07-20T15:48:46.637
> 
> 标签：json, handlebars.js

我需要用把手模板化一个json对象数组：（通过chrome控制台）[object，object，object，object]其中每个对象都由这个属性组成：name，surname，ecc。

我知道将对象数组放在车把中是不可能的，但我们必须创建一个具有所有数组对象的所有属性的唯一对象。谁能建议我创建它的功能

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-20T16:52:52.723

您可以在调用模板时将数组设置为包装对象的属性。

例如，`objects`作为控股财产

```
var an_array = [
    {name: "My name"},
    {name: "Another name"}
];

var source   = /* a template source*/;
var template = Handlebars.compile(source);
var wrapper  = {objects: an_array};

console.log(template(wrapper)); 
```

并且您的模板可以按如下方式使用此属性：

```
<ul>
    {{#each objects}}
        <li>{{name}}</li>
    {{/each}}
</ul> 
```

还有一个演示[http://jsfiddle.net/YuvNY/1/](http://jsfiddle.net/YuvNY/1/)

```
var an_array=[
    {name:"My name"},
    {name:"Another name"},    
];

var source   = $("#src").html();
var template = Handlebars.compile(source);
$("body").append( template({objects:an_array}) );
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars-v2.0.0.js"></script>

<script type='text/template' id='src'>
<ul>
  {{#each objects}}
      <li>{{name}}</li>
  {{/each}}
</ul>    
</script>
```

* * *

或者您可以直接将数组传递给模板并调用`each`助手并将上下文设置为`.`（点）

```
var template = Handlebars.compile(source);
console.log(template(an_array)); 
```

```
<ul>
    {{#each .}}
        <li>{{name}}</li>
    {{/each}}
</ul> 
```

[http://jsfiddle.net/nikoshr/YuvNY/32/](http://jsfiddle.net/nikoshr/YuvNY/32/)

```
var an_array=[
    {name:"My name"},
    {name:"Another name"},    
];

var source   = $("#src").html();
var template = Handlebars.compile(source);
$("body").append( template(an_array) );
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars-v2.0.0.js"></script>

<script type='text/template' id='src'>
<ul>
  {{#each .}}
      <li>{{name}}</li>
  {{/each}}
</ul>    
</script>
```

# javascript - Twitter Bootstrap：删除/切换类似复选框的按钮组的活动状态

> ID：11582757
> 
> 赞同：9
> 
> 时间：2012-07-20T15:48:53.187
> 
> 标签：javascript, jquery, twitter-bootstrap

使用 twitters Bootstrap，我创建了一个带有单选框行为的按钮组，让用户在不同的状态之间进行选择。这是开箱即用的。

我在这里安排了一个带有示例的 jsFiddle：http: [//jsfiddle.net/jpxWj/](http://jsfiddle.net/jpxWj/)

我尝试（并且想要）的是，当我第二次单击活动按钮时，可以删除按下状态。

我尝试使用 jQuerys从类`removeClass()`中删除`active`该类，`btn`但它不起作用。*（我也尝试过删除，`.on()`但这只会使活动始终隐藏/删除）*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T16:02:06.700

[在这里](http://jsfiddle.net/Luuk/jpxWj/1/)，我认为这是一个未知的事件现象。[你可以在这里](http://api.jquery.com/event.stopImmediatePropagation/)阅读更多关于它的信息。

**编辑：**

`.removeClass`详细地说，一个简单的不起作用的原因是因为有多个监听器，监听同一个事件。因此，当`click`事件被触发时，正常`.removeClass`会删除该类，但随后 Twitter Bootstrap 处理程序会再次添加它！为了防止任何其他处理程序在您的处理程序之后执行，您可以执行`e.stopPropagation`. 但是，这不会停止附加到与您的相同元素的处理程序，它只会停止树上更远的处理程序。要完全确保在您的处理程序之后没有执行其他处理程序，您可以使用[`event.stopImmediatePropagation()`](http://api.jquery.com/event.stopImmediatePropagation/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T08:16:15.607

引导程序 3 更新：

```
 $('body').on('click', '.btn-group .btn.active',function(e){
       e.preventDefault();
       e.stopImmediatePropagation();
       $(this).find('input').removeAttr('checked');
       $(this).removeClass('active');
    }); 
```

# sql - 检索具有汇总统计信息的模型

> ID：11582763
> 
> 赞同：0
> 
> 时间：2012-07-20T15:49:10.117
> 
> 标签：sql, ruby, sequel

给定以下数据库模式和[Sequel](http://sequel.rubyforge.org)模型，我如何选择一组按其命中求和的节点，*同时将结果保留为模型实例，其中包含所有数据和工作方法*？

```
Sequel.migration{ change{
  create_table :nodes do
    primary_key :id
    String      :name
    # other columns
  end

  create_table :node_hits do
    foreign_key :node_id, :nodes, null:false
    Date        :date, null:false
    Integer     :hits, null:false
    primary_key [:node_id,:date]
  end
end

class Node < Sequel::Model
  one_to_many :node_hits
  def is_awesome?
    # use data known about the node
  end
end

class NodeHit < Sequel::Model
  many_to_one :node
end 
```

以下代码似乎“工作”，但实际上未能具有该`Node.is_awesome?`方法正常运行所需的属性（由于缺少有关节点的数据）：

```
base   = Node.filter(redacted:false)
recent = base.join(:node_hits,node_id: :id).filter{ date>Date.today-7 }
totals = recent.select_more{[ id, sum(hits)as(hits) ]}.group_by(:id)

puts totals.sql
#=> SELECT "id", sum("hits") AS "hits"
#=> FROM "nodes"
#=> INNER JOIN "node_hits" ON ("node_hits"."node_id" = "nodes"."id")
#=> WHERE (("name" != 'phrogz')
#=>       AND ("archived" IS FALSE)
#=>       AND ("date" > '2012-07-13'))
#=> GROUP BY "id"

totals.all.first.is_awesome?
#=> Error: `name` is nil for the Node instance. 
```

如何获取 Sequel 通常为模型获取的任何字段？

*我的最终要求是根据上周的点击总数以及该周的点击数获得前 N 个节点，同时允许 Node 实例具有完整功能（支持 Node 已知的所有数据）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:59:03.610

您需要从节点表中选择所有列。这是我要使用的：

```
totals = Node.filter(redacted:false).
  select_all(:nodes).
  select_more{sum(hits).as(hits)}.
  group(:nodes__id).
  join(:node_hits, node_id: :id).
  filter{ date>Date.today-7 } 
```

# ruby-on-rails-3 - 门卫访问令牌

> ID：11582771
> 
> 赞同：4
> 
> 时间：2012-07-20T15:49:35.653
> 
> 标签：ruby-on-rails-3, oauth-2.0, oauth-provider, doorkeeper

我正在尝试使用 Doorkeeper 建立一个 OAuth2 提供程序，并且我想测试所有现有的流程，但在第一次尝试时就卡住了。

我正在尝试测试授权代码流。获取授权代码一切正常，但是一旦我尝试获取访问令牌，就会出错。下面提到的是一些步骤。

```
 describe 'when sends an access token request' do

        let(:access_params) do
          { grant_type:  'authorization_code',
            code:         authorization_code,
            redirect_uri: application.redirect_uri }
        end

        let(:access_uri) { '/oauth/token' }

        before { page.driver.post access_uri, access_params }

        it 'returns valid json' do
          pp page.source
        end 
```

我期待带有最终访问令牌的 json，但我收到了这个错误。我很好地检查了客户端和参数。在我看来一切都很好。

```
 {"error":"invalid_client","error_description":"Client authentication failed due to unknown client, no client authentication included, or unsupported authentication method."} 
```

你能帮我理解缺少什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:10:40.457

我终于搞定了。我错过了关于 OAuth2 规范的一个重要方面，即客户端必须使用基本身份验证来标识自己。我解决了在发布之前添加它，并且效果很好。

```
 before do
     page.driver.browser.authorize application.uid, application.secret
     page.driver.post access_uri, access_params
  end 
```

# javascript - jQuery 表单处理，如何重新分配回调函数？

> ID：11582774
> 
> 赞同：0
> 
> 时间：2012-07-20T15:49:49.353
> 
> 标签：javascript, jquery, forms

```
 $(function(){

$(".mailbutton").click(function() {
  var email = $(".mailingfield").val();
  $.post("/PHP_scripts/mailinglist.php", { email: email }, function(data) {
        var content = $(data).find("#mailinglistform");
        $("#box").empty().append(content);
  });
 });
}); 
```

我正在使用它来处理电子邮件地址。如果它在 PHP 脚本中失败，则表单将在“.mailinglistform”中发送回，并带有新的表单和一些解释错误的文本。我遇到的问题是，即使按钮在回调表单中有“.mailbutton”类，按钮在点击时也不会做任何事情。

这是因为 jQuery 只在第一次识别它？如果是这样，有没有办法在回调时“重新加载”'mailbutton'.click 函数？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:54:48.230

你是对的，因为你只是重新渲染页面的一部分，你之前写的 jQuery 没有注册到你重新渲染的“新”邮件按钮类。为了解决这个问题，您应该使用[.on()](http://api.jquery.com/on/)，例如：

```
$(".wrapper").on('click', '.mailbutton', function() {
  var email = $(".mailingfield").val();
  $.post("/PHP_scripts/mailinglist.php", { email: email }, function(data) {
        var content = $(data).find("#mailinglistform");
        $("#box").empty().append(content);
  });
 }); 
```

在这种情况下，包装器需要是页面的重新渲染部分（例如“内容”类，可能是表单周围的类等）之外的类元素，并且是不断存在的（即不重新-在 ajax 调用中渲染）。这会将 onclick 处理程序附加到作为包装器类的子级的任何 .mailbutton 类，无论它们是在呈现页面时存在，还是稍后添加到 DOM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:53:31.220

使用[**on**](http://api.jquery.com/on/)绑定点击事件。当控件在回调函数中再次呈现时，其事件被删除。使用 on 而不是 click 可以自动重新绑定事件。

```
 $(function(){

    $(".mailbutton").on("click", function() {
    var email = $(".mailingfield").val();
    $.post("/PHP_scripts/mailinglist.php", { email: email }, function(data) {
        var content = $(data).find("#mailinglistform");
        $("#box").empty().append(content);         
    });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:53:10.117

为此，您可以将 AJAX 与 JQuery 一起使用。或者您可以使用用户`load()`。

```
$(".mailbutton").click(function() {
        $.ajax({                                      
              url: 'api.php', // Put your calling page path here
              data: "",
              dataType: 'json',
              success: function(data)
              {
                //do whatever you want to do on success
              } 
        });
    }); 
```

# php - 4级相互依赖的选择列表ajax jquery json和mysql

> ID：11582779
> 
> 赞同：1
> 
> 时间：2012-07-20T15:49:57.570
> 
> 标签：php, ajax

我已经让它工作到第三个选择列表。但是有4个。

国家、来源、目标和主题。

我可以选择目标选择列表，但我无法进入最后一个主题。这是因为我不知道如何完成那个缺失的代码。

这是脚本，下面将是处理脚本。因此，“主题”选择列表需要相应地移动到左侧：

```
jQuery(document).ready(function () {
    jQuery("#sel_pais").change(function () {
        //
        var datatosend = 'pais_id=' + jQuery(this).val();
        jQuery.ajax({
            type:'GET',
            url:'includes/getchilds2.php',
            data:datatosend,
            dataType:"json",
            success:function (data) {
                jQuery('#sel_source').find('option').remove().end();
                jQuery('#sel_target').find('option').remove().end();
                jQuery.each(data, function (index, val) {
                    var newopt = '<option value="' + val.key + '">' + val.title + '</option>';
                    jQuery('#sel_source').append(newopt);
                });
                jQuery('#sel_target').append('<option value="-1">Select</option>');

            }

        });
    });
    //////////////////////
    jQuery("#sel_source").change(function () {
        //
        var datatosend = 'id_from=' + jQuery(this).val();
        jQuery.ajax({
            type:'GET',
            url:'includes/getchilds2.php',
            data:datatosend,
            dataType:"json",
            success:function (data) {
                jQuery('#sel_target').find('option').remove().end();
                jQuery.each(data, function (index, val) {
                    var newopt = '<option value="' + val.key + '">' + val.title + '</option>';
                    jQuery('#sel_target').append(newopt);
                });
            }

        });
    });

}); 
```

这是处理之一：

```
<?php
$con = mysql_connect("localhost", "root", "");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("traducteurs", $con);
//
if (isset($_GET['pais_id'])) {
    $curid = $_GET['pais_id'];
    //  
    $result = mysql_query("SELECT * FROM tabla_from where pais_id=" . $curid);
    if (mysql_num_rows($result) > 0) {
        $op = '[';
        $op .= '{"title":"Select","key":"-1"},';
        while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
            $op .= '{';
            $op .= '"title":"' . $row['from_name'] . '", "key":"' . $row['id_from'] . '"';
            $op .= '},';
        }
        $op = substr($op, 0, -1);
        $op .= ']';
        echo $op;
    }
    else {
        echo '[{"title":"Select","key":"-1"}]';
    }
}
/////////////////////
if (isset($_GET['id_from'])) {
    $curid = $_GET['id_from'];
    //  
    $result = mysql_query("SELECT * FROM tabla_into where id_from=" . $curid);
    if (mysql_num_rows($result) > 0) {
        $op = '[';
        $op .= '{"title":"Select","key":"-1"},';
        while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
            $op .= '{';
            $op .= '"title":"' . $row['into_language'] . '", "key":"' . $row['id_into'] . '"';
            $op .= '},';
        }
        $op = substr($op, 0, -1);
        $op .= ']';
        echo $op;
    }
    else {
        echo '[{"title":"Select","key":"-1"}]';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:08:54.290

我正在使用此代码显示相互依赖的列表

```
<select id="sel_pais" name="sel_pais">
<option value="pais_id">values goes here</option>
</select>

<select id="sel_source" name="sel_source">
<option value="">Select</option>
</select>

<select id="sel_target" name="sel_target">
<option value="">select</option>
</select>

<select id="sel_subject" name="sel_subject">
<option value="">select</option>
</select>
//jquery code for source list
$('#sel_pais').change(function() {
  if ($(this).val()!='') {
    $("#sel_source").load("include/getchild2.php",{pais_id: $(this).val()});
  }
});
//code on change of sel_source
$('#sel_source').change(function() {
  if ($(this).val()!='') {
    $("#sel_target").load("include/getchild2.php",{id_from: $(this).val()});
  }
});

$('#sel_target').change(function() {
  if ($(this).val()!='') {
    $("#sel_subject").load("include/getchild2.php",{id_target: $(this).val()});
  }
}); 
```

您可以更改的php示例代码..为其他人重复以下代码。

```
 if(isset($_REQUEST['pais_id']) && !empty($_REQUEST['pais_id'])) {
    $result = mysql_query("select * from table where id='".$_REQUEST['pais_id']."' "));
    if(mysql_num_rows($result) > 0) {
        echo '<option value="">Select</option>';
        while($row = mysql_fetch_assoc($result)) {              
                echo '<option value="'.$row['id'].'">'.$row['name'].'</option>';
        }
    } else {
        echo '<option value="">Select</option>';
    }
} 
```

希望这会帮助你。

# c# - ASP.NET MVC3 ViewModel - 困惑

> ID：11582781
> 
> 赞同：2
> 
> 时间：2012-07-20T15:50:11.600
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-viewmodel

我正在学习 C# ASP.NET MVC 3 中的 ViewModels，但我一直坚持在我的视图中显示来自 ViewModel 的数据。

**型号**：_

```
public class Author
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Book> Books { get; set; }
}

public class Book
{
    public int Id { get; set; }
    public int AuthorId { get; set; }
    public string Title { get; set; }
    public decimal Price { get; set; }
} 
```

在我的索引视图中，我想显示作者和书籍的一般列表。我为此制作了一个**ViewModel**：

```
public class BookIndexViewModel
{
    public List<Book> Books { get; set; }
    public List<Author> Authors { get; set; }
} 
```

这是控制器中我的**Index() 操作方法**：

```
public ViewResult Index()
    {
        BookIndexViewModel viewModel = new BookIndexViewModel();
        viewModel.Authors = db.Authors.ToList();

        // leaving Books empty for now

        return View(viewModel);        
    } 
```

我有一个强类型的**索引视图**，我想在其中显示作者列表：

```
@model IEnumerable<NewBookStore.ViewModels.BookIndexViewModel>

@foreach (var author in Model.Authors) {
<tr>
    <td>
        @author.Name
    </td>
</tr> 
} 
```

这是**Model.Authors**部分不起作用。当我键入模型时。并等待 IntelliSense 显示作者，它未列出。错误描述是：

> “System.Collections.Generic.IEnumerable”不包含“Authors”的定义，并且找不到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“Authors”（您是否缺少 using 指令还是汇编参考？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:55:04.857

视图中的模型不应该是 IEnumerable。您正在发送一个模型，其中包含 2 个列表。您没有发送视图模型列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:54:05.683

`@model IEnumerable<NewBookStore.ViewModels.BookIndexViewModel>`应该 `@model BookIndexViewModel`改为！

您不想要`IEnumerable`of `BookIndexViewModel`- Authors 属性直接位于您的`BookIndexViewModel`.

干杯，院长

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:54:15.390

因为您没有传递`collection`您的视图，所以您只`BookIndexViewModel`从您的操作方法传递了一个类对象。

要解决此问题，请将您的视图更新为仅将其绑定到一个实例而不是`collection`

```
@model NewBookStore.ViewModels.BookIndexViewModel

@foreach (var author in Model.Authors)
{
<tr>
    <td>
        @author.Name
    </td>
</tr> 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:54:27.943

芬奈拉，

您的错误是您没有正确定义模型。您的模型已经包含 IEnumerable<> 集合，因此也无需将其设为 Enumerable。尝试：

```
@model NewBookStore.ViewModels.BookIndexViewModel 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T15:55:16.570

改用这个

```
@model NewBookStore.ViewModels.BookIndexViewModel 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T11:30:57.287

[注意-我没有足够的经验来发表评论而不是答案！]

我正在阅读另一篇关于 ViewModels 的文章，从 @Darin Dimitrov 所说的你应该避免将域对象放入你的 ViewModel，

“视图模型不应引用任何服务。视图模型不应引用任何域模型。”

请参阅-> [ASP.NET MVC 3 Viewmodel 模式](https://stackoverflow.com/questions/9553944/asp-net-mvc-3-viewmodel-pattern)

我知道模式更像是不适合所有场景的指南，但就像 OP，我需要显示域对象列表（我们将说的书籍和作者），所以在 OP 的示例中，ViewModel 应该有吗？：

```
public class BookIndexViewModel
{
   public IEnumerable<SelectListItem> Books { get; set; }
   public IEnumerable<SelectListItem> Authors { get; set; }       
} 
```

然后将 BookIndexViewModel 填充到您的控制器中（它可能使用服务来获取 Book 列表和 Author 列表以展平到 ViewModel 中）？

我也在学习这些东西，所以愿意接受建议/评论和更正！！谢谢。

# python - 在python中复制嵌套的html列表？

> ID：11582783
> 
> 赞同：1
> 
> 时间：2012-07-20T15:50:15.387
> 
> 标签：python, html

我是一个初学者程序员，所以这可能是一个微不足道的问题：我有一个带有深度嵌套无序列表的 .html 文件。例如，如何将前 4 个嵌套级别复制到 Python 中的新空 .html 文件中？我需要 BeautifulSoup 吗？为了更好的说明，这里是 Javascript 中显示效果的代码：

```
function nestless(root, selector, level) {
    var use = root;
    for (var i = 0; i <= level; i++) {
        use += ' ' + selector;
    }
    $(use).remove();
} 
```

在这里我会使用：

```
nestless('#root', 'ul', 4); 
```

看来我原来的问题写得不好，难以解析，对此我深表歉意。.html 文件并不是真正的网站，而是在 html 编辑器中手动编写的文本文档并保存在 .html 中。它们包含无法用 LaTeX 编辑器编写的任何内容。

例如，如果我想将此列表减少到前 2 个级别：

*   一个
*   乙
    *   C
    *   D
        *   乙
        *   F
*   G

至

*   一个
*   乙
    *   C
    *   D
*   G

根据我自己的研究，在 BeautifulSoup+soupselect、PyQuery 或 lxml 中有通过 CSS 选择器的 .html 解析器，但我不确定最简单的方法是什么或从哪里开始阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:54:11.320

我会查看 Mechanize [http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)来进行 html 解析以获取实际列表本身。尽量不要为此使用正则表达式，因为它会变得非常混乱，只会让事情变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:42:15.347

你不需要beautifulsoup，但没有它会很痛苦。

用它来：

*   找到您的第一级列表标签；
*   在第一层迭代；
*   对于每个元素，迭代到第二级；
*   对第三和第四级做同样的事情。
*   在第四级，迭代，删除任何子节点。

将您拥有的对象保留在 memeroy 中，并在生成新的 html 文件时将其作为子项插入到下一个 html 对象中。

# jquery - jQuery - 如何让两个 .text 工作？

> ID：11582784
> 
> 赞同：1
> 
> 时间：2012-07-20T15:50:16.997
> 
> 标签：jquery, sum, var

在过去的 4 个小时里，这让我大吃一惊，我就是无法让它工作！

我有两个函数替换“.cd_price”。当您选择黑白时，它可以工作，但是当您更改“.cd_quantity”时，它显然会被替换。

我试图将“newPrice”放入一个隐藏的跨度中，并从那里获取该信息，但这是我能做到的，不会卡住。

[您可以在http://gilliesaudio.co.uk/store/products.html](http://gilliesaudio.co.uk/store/products.html)找到示例

非常感谢你们！希望我没有错过任何信息。

**这是我的 HTML：**

```
<input type="text" value="50" min="50" class="item_Quantity cd_quantity">
<span class="item_price cd_price" data-base_price="0.53"></span> 
```

**这是我的 jQuery：**

```
$(".item_print-colour").on("change", function() {
        var base_price = $(".cd_price").data("base_price");
        var addition = (this.value == 'B&W' ? 0.20 : 0);
        var newPrice = (base_price + addition).toFixed(2);
        $(".cd_price").text(newPrice);
    });

/* CD START */
$(".cd_quantity").on("keyup", function() {
    var base_price = $(".cd_price").data("base_price");
    var discount = 0;

if (this.value > 99) discount = 0.09;
    $(".cd_price").text((base_price - discount).toFixed(2));

if (this.value > 199) discount = 0.14;
$(".cd_price").text((base_price - discount).toFixed(2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:04:00.960

首先，`$('.cd_price')`总是返回具有类的元素列表`.cd_price`。`.cd_price`所以当dvd select改变时，它会用新的价格代替第一个。而且，在您的演示页面中，我看到 DVD 价格的类别是`dvd_price`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:11:59.330

问题是您正在设置keyup 事件`base_price`中的属性。`data-base_price`您应该将变量设置为 的当前值`.cd_price`。类似于以下内容：

```
var base_price = parseFloat($(".cd_price").eq(0).text()); 
```

这会抓取第一个实例，`.cd_price`因为有 2 并将文本值解析为浮点数。

然后您可能还会考虑更改变量。

我注意到的另一个问题是，如果您输入的数量值足够高以获得折扣，则折扣将应用于每个 keyup 事件。只是想我会指出这一点。

# java - 错误：无法找到或加载主类 openWordDocument

> ID：11582791
> 
> 赞同：0
> 
> 时间：2012-07-20T15:50:32.597
> 
> 标签：java, jacob

我正在尝试使用 jacob 打开 Microsoft Word 文档。

下面是代码：

```
import com.jacob.activeX.ActiveXComponent;
import com.jacob.com.ComThread;
import com.jacob.com.Dispatch;
import com.jacob.com.Variant;
public class openWordDocument {
    private static final Integer wdNewBlankDocument = new Integer(0);
    private static final Variant vTrue = new Variant(true);
    private static final Variant vFalse = new Variant(false);
    private static ActiveXComponent activeXWord = null;
    private static Object activeXWordObject = null;

    public static void main(String[] args) {
    try {
    activeXWord = new ActiveXComponent("Word.Application");
    activeXWordObject = activeXWord.getObject();
    Dispatch.put(activeXWordObject, "Visible", vTrue);

    //activeXWordObject = null;

    }
    catch (Exception e) {
    quit();
    }
    }

    public static void quit() {
    if (activeXWord != null) {
    System.out.println("quit word");
    //calls the Quit method of MS Word, this will close MS Word
    activeXWord.invoke("Quit", new Variant[] {});
    ComThread.Release();
    activeXWord.release();
    System.out.println("quit word");
    }
    }

} 
```

当我在上面运行代码时出现错误`Error: Could not find or load main class openWordDocument`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:37:45.203

这是我的错误，我在类路径中添加了 .dll 文件，所以我无法编译 java 文件。之后我删除了那个 dll 文件，jvm 开始编译并能够精细化类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:42:58.440

**警告 ！！！**

检查您的**外部库（例如 .jar 文件）路径**是否已添加到您的项目中。路径应具有常规格式。例如，它不应该有特殊字符，如“+”、...或空格。

我之前在 Eclipse IDE 中遇到过这个严重的问题，更改我的项目库的路径目录，然后一切都好起来了。

# html5-video - HTML 5 视频问题，视频无法在页面上播放，但可以右键单击并下载并在浏览器中查看

> ID：11582792
> 
> 赞同：0
> 
> 时间：2012-07-20T15:50:39.557
> 
> 标签：html5-video

我难住了。在阅读了大量关于此的博客和帖子后，这是我编译的代码，以获得对我的 html 5 视频的完整浏览器支持

```
<video width="686" height="284" poster="http://my_S3_file.png?preset=category-hero" autoplay loop> 
        <source src="http://my_S3_file.theora.ogv" type='video/ogg; codecs="theora, vorbis"' />
        <source src="http://my_S3_file.webm" type='video/webm; codecs="vp8, vorbis"' />
        <source src="http://my_S3_file.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
        <object width="686" height="284" src="http://my_S3_file.mp4">
            <embed width="686" height="284" src="http://my_S3_file.swf" loop="false" wmode="transparent" ></embed>
        </object>
    </video> 
```

在 Chrome 中效果很好（一如既往）。但是，Firefox 和 IE 拒绝播放。更奇怪的是，在firefox中我可以右键点击视频区域并选择查看视频，在新标签页中打开webm文件并在浏览器中查看。有什么关系！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:17:33.897

可能有点晚了。

上传文件时是否为文件设置了正确的 MIME 类型？

# c# - SQLite 错误没有使用实体框架的此类列

> ID：11582797
> 
> 赞同：3
> 
> 时间：2012-07-20T15:50:52.893
> 
> 标签：c#, linq, entity-framework, sqlite

我正在尝试查找仅出现在某些客户端机器上的错误，当然我们无法在内部重现该错误。`InnerException`抛出的是

> SQLite 错误没有这样的列：Extent1.UserDefinedPid

找不到的列是 SQLite 数据库中如此定义的位字段：

```
[UserDefinedPid] bit NOT NULL DEFAULT 0 
```

EDMX 文件包含这个定义（只是部分内容）：

```
<EntityType Name="Parameter">
  <Key>
    <PropertyRef Name="ParameterID" />
  </Key>
  <Property Type="Int64" Name="ParameterID" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
  ...
  <Property Type="Boolean" Name="UserDefinedPid" Nullable="false" />
  ...
</EntityType> 
```

我们已经确认了相同的 SQLite 数据库文件，并且正在加载正确的`System.Data.SQLite`和dll，但由于某些奇怪的原因，一些机器似乎认为该列丢失了。`System.Data.SQLite.Linq`

我们使用的数据库是加密的，我们有一个应用程序的 app.config 文件，以确保 SQLite 的其他安装不会干扰应用程序。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections></configSections>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite" />
      <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
    </DbProviderFactories>
  </system.data>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Data.SQLite" culture="neutral" publicKeyToken="db937bc2d44ff139" />
        <bindingRedirect oldVersion="1.0.0.0 - 2.0.0.0" newVersion="1.0.66.0" />
      </dependentAssembly>
     </assemblyBinding>
  </runtime>
</configuration> 
```

我不知道为什么这在某些机器上会失败。任何想法都非常感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:02:30.227

我强烈怀疑您使用的是[相当旧](http://sqlite.phxsoftware.com/)的 System.Data.SQLite 版本。

也许您可以尝试一下[这里](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)找到的最新版本。

一旦你这样做了， app.config 文件将不再需要这个：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Data.SQLite" culture="neutral" publicKeyToken="db937bc2d44ff139" />
    <bindingRedirect oldVersion="1.0.0.0 - 2.0.0.0" newVersion="1.0.66.0" />
  </dependentAssembly>
 </assemblyBinding> 
```

我对您提到的加密问题有点不清楚。您是使用提供给`SQLiteConnection`连接对象的密码进行加密，还是使用[SEE 扩展](http://www.hwaci.com/sw/sqlite/see.html)？

# jquery - 成功更新操作时 Datatable jeditable 不必要的警告框

> ID：11582798
> 
> 赞同：1
> 
> 时间：2012-07-20T15:50:57.077
> 
> 标签：jquery, datatables, jquery-datatables, jeditable

我在独立应用程序上有相同的代码，它工作正常。但我试图在 codeigniter 中实现同样的目标，但这个问题发生了。我正在使用 jquery 数据表和 jeditables 来更新表中的字段。当我单击该字段时，会出现选择框，我可以根据需要更改数据。提交表单后，我看到一个警报框弹出，其中包含我选择的新值。当我单击“确定”时，该字段将更新，数据库也将更新。我的问题是警报框来自哪里？我在独立设备上有相同的代码，它只是在没有警报框的情况下工作。这是代码：

```
$('#jobs_table').dataTable({                    
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "bServerSide": true,
    "bProcessing":true,
    "sAjaxSource": "/jobs/list_all_completed",
    "sServerMethod":"POST",
    "aaSorting": [[ 0, "desc" ]]
    'fnServerData'   : function(sSource, aoData, fnCallback){
         $.ajax ({
          'dataType': 'json',
          'type'    : 'POST',
          'url'     : sSource,
          'data'    : aoData,
          'success' : fnCallback
         });
        }
}).makeEditable({
    sUpdateURL: "/jobs/invoiced_job_save",
    "aoColumns": [
    null,
    null,
    null,
    null,
    null,
    {
    "placeholder" : "Update",
    indicator : 'saving ...',
    tooltip: 'click to select',
    data   : "{'':'Please select','No':'No','Yes':'Yes'}",
    type   : "select",
    onblur: 'submit',
    event : "click",
    style  : "inherit"
    }
    ]   
    }); 
```

服务器端（invoiced_job_save）只是回显该值。

# osgi - 从独立于启动器的包中访问文件系统的正确方法是什么？

> ID：11582801
> 
> 赞同：1
> 
> 时间：2012-07-20T15:51:07.340
> 
> 标签：osgi

我希望能够从我的 OSGi 包中访问一些资源（日志文件、数据库文件、单独的配置文件等）。到目前为止，我一直在使用相对文件路径来访问它们。但是，现在我的相同包在不同的环境中运行（普通的旧 Felix 和 Glassfish）。

当然，工作目录是不同的，我希望能够使用一种目录已知且确定的方法。据我所知，不应该假设 Glassfish 的工作目录也没有指定（当前为 glassfish3/glassfish/domains/domain1/config）。

我可以尝试将这些文件自己嵌入到包中，但这样就不容易访问了。例如，我希望很容易找到日志文件，而不必分解缓存的包来访问它。另外，我不知道我是否可以为我的 H2 JDBC 驱动程序提供一个指向包内某些内容的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:26:36.693

一个好的方法是将持久文件存储在当前工作目录 (System.getProperty("user.dir") 或用户主目录 (System.getProperty("user.home")) 的子目录中

临时文件和特定于捆绑包的文件应存储在捆绑包的数据区域 (BundleContext.getData())。然后卸载捆绑包将自动清理。如果不同的包需要访问相同的文件，请使用服务来传递此信息。

最后一个选项是非常重要的文件，如主要数据库应该存储在 /var 或 Window 的等效文件中。在这些情况下，我会用 Config Admin 指出位置。

通常，最好将文件打包交付并将它们展开到适当的位置。这使得管理系统更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:38:00.793

你在这里有一些选择。第一种是使用 Configuration Admin 服务来指定配置目录，这样你就可以在需要时访问文件。

对于日志文件，我推荐 Ops4J Pax Logging。它允许您简单地使用像 slf4j 这样的日志 API，Pax Logging 进行日志管理。它可以使用 log4j 配置进行配置。

我认为您也应该将数据库安装为捆绑包。例如，我在较小的项目中经常使用 Derby。Derby 可以简单地以捆绑软件的形式启动，然后自行管理数据库文件。我不确定h2，但我想它可以类似地工作。

# alignment - 我们可以让 printf 对齐小数点上的值吗？

> ID：11582803
> 
> 赞同：3
> 
> 时间：2012-07-20T15:51:11.973
> 
> 标签：alignment, printf, string-formatting

我遇到了一个浮点值数组，我无法使用经过验证的旧 printf() 函数以合理的方式打印出来。我想，问题在于数字的范围很大……从像 -3.66542e-296 这样的小数字到 +9.5543e+301 以及介于两者之间的许多值。

通常值之间的相关性更高，类似 %23.16f 的东西会起作用。但是对于这些巨大的数字， f 说明符不起作用，因为有些数字会打印出几十到几百个数字（溢出大小规范）。这留下了 e 格式（或让 printf() 在 e 和 f 格式之间来回切换的 g 格式）。

当由于值范围大而被迫采用 e 或 g 说明符时，有没有办法：

1.  使所有值的小数点相互对齐。
2.  使所有值的 e（指数）相互对齐。
3.  使 e 后面的位数固定（始终相同）。

对于几乎任何目的，#1 是最好的选择 - 与 . 最有帮助。但在这种情况下，似乎不可能以任何方式制作漂亮、整洁、可读的专栏……除非我遗漏了一些东西。

# javascript - IE8 MIME 类型应用程序/json 未找到

> ID：11582806
> 
> 赞同：0
> 
> 时间：2012-07-20T15:51:22.863
> 
> 标签：javascript, json, internet-explorer

我有一个应用程序，它从 MIME 类型为“application/json”的 ajax 请求返回 JSON 数据。在 IE8 中，它会抛出一个错误，即找不到 MIME 类型。

除了将 MIME 类型更改为 text/plain 之外，还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:55:03.217

至少对我来说，始终有效的方法是将请求标头设置为接收`*/*`，包括`json2.js`IE<9，可以在[此处](https://github.com/douglascrockford/JSON-js)找到。然后在回调函数中`JSON.parse(this.responseText);`，你应该没问题

# eclipse - GAE、JPA 和 Hibernate 设置问题

> ID：11582814
> 
> 赞同：0
> 
> 时间：2012-07-20T15:52:40.597
> 
> 标签：eclipse, hibernate, google-app-engine, jpa

所有，我正在尝试配置 Google App Engine 以使用我的本地 MySQL 数据库实例和使用 Hibernate 的 JPA。设置后，我意识到之前讨论过一个套接字问题（http://stackoverflow.com/questions/10585140/gae-cloudsql-with-mysql-access-denied），所以我按照说明操作并尝试解决我的问题。但是由于某种原因，eclipse 正在做一些烦人的事情，并按照上述帖子中的说明清除了我对 persistence.xml 文件所做的更改。

为了测试这一点，我安装了一个新的 Eclipse (Juno) 并加载了谷歌插件。我创建了一个将 JPA 添加到 is 的测试应用程序，并将其设置为使用休眠。我谷歌应用程序属性我确保它使用本地 mysql

到现在为止还挺好。当我查看生成的 persistence.xml 时，我看到了：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="transactions-optional" transaction-type="RESOURCE_LOCAL">
    <provider></provider>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/shelem?user=root&amp;password=gandom"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="gandom"/>
        </properties>
    </persistence-unit>
</persistence> 
```

如您所见，提供程序设置为空（错误），并且 URL 和驱动程序属性也错误（如提到的帖子）。如果我按原样运行应用程序，我将得到上面帖子中提到的套接字错误异常，因此我手动将 persistence.xml 文件更改为如下所示（根据上面的帖子）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="transactions-optional" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
            <property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://localhost/Guardian"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="gandom"/>
        </properties>
    </persistence-unit>
</persistence> 
```

然后疯狂的事情发生了！一旦我这样做并且我清理/构建应用程序以便我可以启动它，Eclipse 会清除我的更改并将persistence.xml 文件变成我手动更改之前的样子......有趣的是，如果我添加评论或更改任何其他内容这些更改会保留并且不会丢失，因此似乎出于某种原因 Eclipse 只替换了建议解决我的问题的代码！！！

快把我逼疯了，有人看过吗？有什么建议么？

感谢您的意见。

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:20.423

似乎至少对于 1.7 版的应用程序引擎，除了 EclipseLink 作为持久性提供者之外，您不能使用任何东西。使用 EL 并不是一个主要问题，因为无论使用什么来访问您的本地数据库，Google 在应用引擎服务器场上都使用自己的提供程序。

也就是说，最好将 EclipseLink 用于本地开发，因为您可能嵌入代码中的任何持久性提供程序特定逻辑与谷歌的提供程序不兼容最终会在部署后返回并破坏您的代码，因此更安全的方法是在本地使用 EclipesLink。

希望这对其他人有所帮助，这样他们就不会像我一样浪费时间。

# android - 在 onClick 方法上使用 SharedPreferences

> ID：11582816
> 
> 赞同：0
> 
> 时间：2012-07-20T15:52:55.357
> 
> 标签：android, android-preferences, android-button

我的活动中有一个按钮，我想在我的偏好活动中选择单击它时打开的互联网网站。

array.xml 是这样的：

```
<resources>
    <integer-array name="sites_values">
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </integer-array>

    <string-array name="sites">
        <item>@string/site1</item>
        <item>@string/site2</item>
        <item>@string/site3</item>
    </string-array>
</resources> 
```

偏好.xml：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <ListPreference
        android:defaultValue="1"
        android:entries="@array/sites"
        android:entryValues="@array/sites_values"
        android:key="websites"
        android:persistent="true"
        android:summary="@string/summary"
        android:title="@string/title" />
</PreferenceScreen> 
```

这是 PreferenceActivity：

```
public void public class MyPreference extends PreferenceActivity {
    public static final int DEFAULT_SITE = 1;
    public static final String FAV_SITE = "websites";

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }

} 
```

最后这是 MainActivity 的 onClick 方法不起作用，出现“应用程序意外停止”错误：

```
public void click(View v) {
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this);
    String url;
    switch (pref.getInt(MyPreference.FAV_SITE,
                        MyPreference.DEFAULT_SITE)) {
        case 1:
        default:
            url = "http://www.google.com";
            break;
        case 2:
            url = "http://www.youtube.com";
            break;
        case 3:
            url = "http://www.facebook.com";
            break;
     }
     Intent BrowserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
     startActivity(BrowserIntent);
} 
```

我究竟做错了什么？onResume 已经使用 SharedPreferences 并且可以完美运行。

编辑：

这是 LogCat

```
07-08 16:18:27.540: W/dalvikvm(3041): threadid=1: thread exiting with uncaught exception (group=0xb67f44f0)
07-08 16:18:27.570: E/AndroidRuntime(3041): FATAL EXCEPTION: main
07-08 16:18:27.570: E/AndroidRuntime(3041): java.lang.IllegalStateException: Could not execute method of the activity
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.view.View$1.onClick(View.java:2144)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.view.View.performClick(View.java:2485)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.view.View$PerformClick.run(View.java:9080)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.os.Handler.handleCallback(Handler.java:587)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.os.Looper.loop(Looper.java:130)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at java.lang.reflect.Method.invokeNative(Native Method)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at java.lang.reflect.Method.invoke(Method.java:507)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at dalvik.system.NativeStart.main(Native Method)
07-08 16:18:27.570: E/AndroidRuntime(3041): Caused by: java.lang.reflect.InvocationTargetException
07-08 16:18:27.570: E/AndroidRuntime(3041):     at java.lang.reflect.Method.invokeNative(Native Method)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at java.lang.reflect.Method.invoke(Method.java:507)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.view.View$1.onClick(View.java:2139)
07-08 16:18:27.570: E/AndroidRuntime(3041):     ... 11 more
07-08 16:18:27.570: E/AndroidRuntime(3041): Caused by: java.lang.ClassCastException: java.lang.String
07-08 16:18:27.570: E/AndroidRuntime(3041):     at android.app.ContextImpl$SharedPreferencesImpl.getInt(ContextImpl.java:2857)
07-08 16:18:27.570: E/AndroidRuntime(3041):     at it.megaforum.megaapp.MainActivity.clickMegaforum(MainActivity.java:38)
07-08 16:18:27.570: E/AndroidRuntime(3041):     ... 14 more 
```

编辑2：

我注意到当我单击 MyPreference 活动中的首选项时出现另一个错误。如果我从整数数组更改为字符串数组，此错误就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:18:20.197

问题出在整数数组上。我将其更改为字符串数组，现在它可以工作了。这是代码。

数组.xml

```
<resources>
    <string-array name="sites_values">
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </string-array>

    <string-array name="sites">
        <item>@string/site1</item>
        <item>@string/site2</item>
        <item>@string/site3</item>
    </string-array>
</resources> 
```

我的偏好

```
public void public class MyPreference extends PreferenceActivity {
    public static final String DEFAULT_SITE = "1";
    public static final String FAV_SITE = "websites";

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

听众

```
public void click(View v) {
    SharedPreferences pref = PreferenceManager
            .getDefaultSharedPreferences(MainActivity.this);
    String url = "http://";
    if (pref.getString(MyPreference.FAV_SITE, MyPreference.DEFAULT_SITE).equals("1") {
        url = "http://www.google.com";
    } else if (pref.getString(MyPreference.FAV_SITE, MyPreference.DEFAULT_SITE).equals("2")) {
        url = "http://www.youtube.com";
    } else if (pref.getString(MyPreference.FAV_SITE, MyPreference.DEFAULT_SITE).equals("3")) {
        url = "http://www.facebook.com";
    }
    Intent BrowserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(BrowserIntent); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:57:16.130

我猜“这个”在：

```
PreferenceManager.getDefaultSharedPreferences(this); 
```

不适合，因为您很可能在一个内联类（按钮的侦听器）中，这意味着“this”引用侦听器类而不是外部类（您的活动）。

编辑：要解决这个问题，您只需要参考活动中的偏好。在创建 Activity 时设置它，然后在 Listener 中使用它。或者你只是从处理所有事情的活动中调用一个方法。

# sql-server - vb.net 中的查询问题

> ID：11582818
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:53:00.127
> 
> 标签：sql-server, vb.net

我收到一条错误消息，指出说列不属于表。这是我在下面的查询，它非常简单。

```
query = " SELECT A.COLUMN "
        " FROM TABLE_1 A, TABLE_2 B"
        " WHERE A.COLUMN = B.COLUMN " 
```

为简单起见，我将其放入数据集并执行 for 循环，它工作正常。顺便说一句，在管理工作室中测试了查询，一切正常。

这就是问题所在：

```
dim new_val as string

new_val = row("A.COLUMN") 'ERROR 
```

注意：当我将查询更改为：

```
SELECT A.COLUMN **AS COLUMN1** 
```

接着：

```
new_val = row("COLUMN1") it works. 
```

有谁知道这是什么原因？？还忘了注意某些列具有相同的名称，这就是我使用 A.COLUMN 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:55:40.740

只需使用：

```
new_val = row("COLUMN") 
```

没有理由在您的参考文献中包含表后缀，而只是列名。

此外，您确实应该重新编写查询以使用 INNER JOINS：

```
query = " SELECT A.COLUMN "
    " FROM TABLE_1 A INNER JOIN TABLE_2 B ON A.COLUMN = B.COLUMN " 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T15:57:19.897

我建议您在有问题的行中设置断点并在快速监视窗口中检查列的名称。在这种情况下，您将能够确定列名，从而调整您的代码。

# cassandra - 在 nodetool 修复期间 Cassandra 副本宕机？

> ID：11582819
> 
> 赞同：5
> 
> 时间：2012-07-20T15:53:03.613
> 
> 标签：cassandra, repair, nodetool

我正在开发一个用于 nodetool 修复的自动化脚本，该脚本将在所有 6 个 Cassandra 节点上每个周末执行。我们在 DC1 中有 3 个，在 DC2 中有 3 个。只是想了解最坏的情况。如果 DC1 和 DC2 之间的连接丢失或几个副本在节点工具修复之前或期间发生故障，会发生什么情况。这可能是网络问题、网络升级（通常发生在周末）或其他原因。我知道 nodetool repair 为该节点上的每个数据范围计算 Merkle 树，并将其与其他副本上的版本进行比较。因此，如果它们在副本之间没有连接性，节点工具修复将如何表现？它真的会修复节点吗？在所有节点都启动并恢复连接后，我是否必须重新运行节点工具修复。他们会不会是这个事件的任何副作用？我盯着它看，但找不到太多细节。任何见解都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T18:34:42.960

假设您正在使用 vnodes，默认情况下，这意味着每个节点有 256 个范围，但想法是相同的。

如果在 nodetool 修复已经开始之后发生网络问题，您将在日志中看到某些范围已成功修复而其他范围没有。该错误会说范围修复失败，因为节点“192.168.1.1 已死”之类的。

如果在 nodetool repair 开始之前发生网络错误，则所有范围都将失败并出现相同的错误。

在这两种情况下，您都需要在网络问题解决后运行另一个 nodetool repair。

我不知道您在这 6 个节点中拥有的数据量，但根据我的经验，如果集群可以处理它，最好在一周的不同日子每周运行一次 nodetool repair。例如，您可以在周日修复节点 1，在周一修复节点 2，依此类推。如果您有少量数据或一天中的添加/更新不是太多，您甚至可以每天运行一次修复。当您有一个已经修复的集群并且您更频繁地运行 nodetool repair 时，它将花费更少的时间来完成，但是如果您的数据太多，它可能是不可能的。

关于副作用，如果您使用一致性级别 1，您只能注意到数据的差异，如果您对“未修复”节点运行查询，则数据将与“修复”节点上的数据不同。例如，您可以通过将一致性级别提高到 2 来解决此问题，然后再次如果 2 个节点“未修复”并且您运行的查询使用这 2 个节点解决，您将再次看到差异。您需要在此处进行权衡，因为避免查询中这种“差异”的最佳选择是让一致性级别 = 复制因子，当其中 1 个节点关闭时，这会带来另一个问题，整个集群都关闭了，您将开始接收查询超时。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T19:59:56.243

有多种修复选项可用，您可以根据您的应用程序使用情况选择一种。如果您使用的是 DSE Cassandra，那么我建议您安排 OpsCenter 修复，它通过提供小于 gc_grace_seconds 的持续时间来进行增量修复。

以下是进行维修的不同选择：

1.  默认（无）：将修复所有 3 个分区范围：运行它的节点拥有的 1 个主副本和 2 个副本。总共将涉及 5 个节点 2 个节点将固定 1 个分区范围，2 个节点将固定 2 个分区范围，1 个节点将固定 3 个分区范围。
2.  -par：将并行执行上述操作。
3.  -pr ：将仅修复运行它的节点的主分区范围。如果您使用 EACH_QUORUM 的写入一致性，那么也使用 -local 选项来减少跨 DC 流量。

如果您已经投入生产，我建议您使用选项 3，以避免因维修而对性能产生任何影响。

如果您想更详细地了解维修，请在[此处查看](http://www.datastax.com/dev/blog/repair-in-cassandra)

# php - 当日期相同时，对php中修改日期的数组进行排序

> ID：11582824
> 
> 赞同：0
> 
> 时间：2012-07-20T15:53:21.577
> 
> 标签：php, arrays

我正在尝试使用以下行按上次修改日期对我的图像数组进行排序。

```
usort($temp_files, create_function('$a,$b', 'return filemtime($a) - filemtime($b);')); 
```

我的页面设置为显示一个图像，然后在其旁边显示 4 个附加图像。但是很多图像在服务器上的最后修改日期相同，我对这些图像没有太多控制权，因为最终客户端自己上传它们。当日期相同时，有没有办法解决这个问题？

编辑 7/23

所以现在我有以下内容，但它仍然不会按日期排序，有什么想法吗？

```
function cmp_by_filemtime_and_basename($a, $b) {
    $cmp = filemtime($a) - filemtime($b);
    if ($cmp == 0) {
        $cmp = strcmp(basename($a), basename($b));
    }
    return $cmp;
}

usort($temp_files, 'cmp_by_filemtime_and_basename'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:57:47.887

你可以扩展你的比较函数来比较`basename`s 当 s`filemtime`相等时：

```
function cmp_by_filemtime_and_basename($a, $b) {
    $cmp = filemtime($a) - filemtime($b);
    if (0 == $cmp) {
        $cmp = strcmp(basename($a), basename($b));
    }
    return $cmp;
} 
```

# c# - 是否可以运行他们键入的具有泛型的 ServiceHost？

> ID：11582825
> 
> 赞同：0
> 
> 时间：2012-07-20T15:53:22.920
> 
> 标签：c#, wcf, generics, app-config, servicehost

例如

```
 // Create a ServiceHost for the Service type and 
        // provide the base address.
        mServiceHost = new ServiceHost(typeof(T));

        // Open the ServiceHostBase to create listeners and start 
        // listening for messages.
        mServiceHost.Open(); 
```

在这种情况下，T 是 TransactionProcessingService。

到目前为止，我的应用程序配置出现错误，不知道应该如何修改它：

> 服务 'TransactionProcessingWindowsService.TransactionProcessingService`1[[Common.TransactionProcessing, Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 的应用程序（非基础设施）端点为零。这可能是因为没有为您的应用程序找到配置文件，或者因为在配置文件中找不到与服务名称匹配的服务元素，或者因为在服务元素中没有定义端点。

这是我尝试设置配置的方式

```
 <service name="TransactionProcessingWindowsService.TransactionProcessingService&lt;TransactionProcessingWindowsService.TransactionProcessing&gt;"
           behaviorConfiguration="TransactionProcessingServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8000/TransactionProcessingService/service"/>
      </baseAddresses>
    </host>
    <endpoint address=""
              binding="wsHttpBinding"
              contract="TransactionProcessingWindowsService.ITransactionProcessingService" />
    <endpoint address="mex"
              binding="mexHttpBinding"
              contract="IMetadataExchange" />
  </service> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:13:01.927

异常详细信息向您显示应使用的服务名称。试试这个：

```
<service name="TransactionProcessingWindowsService.TransactionProcessingService`1[[Common.TransactionProcessing, Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"
         behaviorConfiguration="TransactionProcessingServiceBehavior"> 
```

但这并不酷，因为每次更改程序集版本或签名时都需要更新配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:01:07.067

您的配置文件具有 ITransactionProcessingService 的端点，但没有 TransactionProcessingService 的端点。

因为您使用的是泛型，所以 T 可以是任何东西（或任何你限制它的东西）。但是你需要为你用作 T 的任何东西定义一个端点。

我会推荐一个接口而不是泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:54:55.127

所以，我尝试了泛型，因为我已经有了一个接口，但需要一个通用基类来实现通用功能。所以，我正在尝试这个：

```
public class TransactionProcessingService<T> : ITransactionProcessingService where T : BaseProgram 
```

因为我想拥有 BaseProgram 的通用功能和属性。我不能从 2 个接口或一个接口和一个类继承，因为我只能有一个 wsHttpBinding 绑定端点。我最终回到

```
public class TransactionProcessingService : ITransactionProcessingService 
```

和

```
public class MyServiceBase<T, U> : ServiceBase where U : BaseProgram, new() 
```

其中 MyServiceBase 提供了一个静态属性，该属性仅提供对 U 的静态实例中的属性的访问。

```
private static U mProcess;
protected ServiceHost mServiceHost = null;
public static int StatusCheckFrequency
{
    get { return mProcess.StatusCheckFrequency; }
    set { mProcess.StatusCheckFrequency = value; }
} 
```

这是可行的，因为我只打算让每个服务的一个实例在一台机器上运行。

我给即。答案，因为它似乎回答了我的问题，即使我最终没有尝试它。

# arrays - vba 变体数组错误

> ID：11582830
> 
> 赞同：1
> 
> 时间：2012-07-20T15:53:41.190
> 
> 标签：arrays, excel, vba

我对 excel vba 还很陌生，我似乎无法用 vbArrays 解决这个问题。我在 vba 中创建了函数 cumsum 只是为了让我的生活更轻松。但是，我想让代码灵活，这样我就可以从一个函数和一个范围传递两个变体。在我的代码中，当我添加行 vec=vec.value 如果我传入一个范围时，它工作得非常好，但如果我希望它在我调用函数并传入非范围类型时工作，它就不起作用. 我注意到的是，如果我的代码中没有 vec=vec.value 行并且我传入一个范围，它的维度为 0，我通过编写自己的函数进行检查。有人可以向我解释如何解决这个问题吗？谢谢。

```
Public Function cumsum(vec As Variant) As Variant
    Dim temp() As Variant
    MsgBox (getDimension(vec))
    'works if i use vec=vec.value if vec is a range but has 0 if i do not vec = vec.values
    ReDim temp(LBound(vec, 1) To UBound(vec, 1), 1 To 1) As Variant
    Dim intCounter As Integer
    For intCounter = LBound(vec) To UBound(vec)
        If intCounter = LBound(vec) Then
            temp(intCounter, 1) = vec(intCounter, 1)
        Else
            temp(intCounter, 1) = temp(intCounter - 1, 1) + vec(intCounter, 1)
        End If
    Next
    cumsum = temp()
End Function
Function getDimension(var As Variant) As Integer
On Error GoTo Err:
    Dim i As Integer
    Dim tmp As Integer
    i = 0
    Do While True:
        i = i + 1
        tmp = UBound(var, i)
    Loop
Err:
    getDimension = i - 1
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:05:30.883

为什么不`vec`使用[VarType](http://msdn.microsoft.com/en-us/library/9w51ee9c%28v=vs.80%29.aspx)和[TypeName](http://msdn.microsoft.com/en-us/library/5422sfdf%28v=vs.80%29.aspx)检查数据类型，然后执行必要的操作`vec`

```
Public Function cumsum2(vec As Variant) As Variant
    MsgBox TypeName(vec)
    MsgBox VarType(vec)

    cumsum2 = 0
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:58:20.757

@Jake 和 @chris 的回答暗示了正确的方向，但我认为他们走得还不够远。

如果您绝对确定您只会将此例程称为 UDF（即来自工作表中的公式），那么您真正需要做的就是添加以下内容：

```
If IsObject(vec) Then
    Debug.Assert TypeOf vec Is Range

    vec = vec.Value2
End If 
```

到你的功能的开始。称为 UDF，它应该被传递的唯一对象类型是`Range`. 此外，称为 UDF，您可以依赖这样一个事实，即它传递的任何数组都将从 1 开始索引。

我可以找出您日常工作中的其他问题，但它们与您最初的问题无关。简而言之：这仅适用于列向量，对于单单元格范围等将失败。

请注意，您的`getDimension`函数为`Range`s 返回零的原因`UBound`是在范围内阻塞。您的错误处理程序很高兴地捕捉到您并不真正期望得到的错误（类型不匹配）并返回零。（查找“维度”的方法假设错误将是下标超出范围错误。）

不久前我写了一个答案，描述了为什么在使用 Excel 时，我认为一般`getDimension`方法不是一个好的方法：

[https://stackoverflow.com/a/6904433/58845](https://stackoverflow.com/a/6904433/58845)

最后，问题`VarType`在于，当传递一个具有默认属性的对象时，它实际上会返回该属性的类型。所以`VarType(<range>)`要告诉你范围内的东西的类型，而不是对象的代码，因为`Range`有一个默认属性，`Range.Value`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T22:11:41.020

修改你`getDimension`的包括

```
If TypeName(var) = "Range" Then
    var = var.Value
End If 
```

# ios - 如何获取在 NSManagedObjectContext 中获取的模型对象的快照，以便在释放上下文后可用？

> ID：11582831
> 
> 赞同：3
> 
> 时间：2012-07-20T15:53:43.637
> 
> 标签：ios, core-data

`Document`根据有关文档名称的一些查询，我有兴趣编写一个返回 class 对象的方法。

`Document`发生在 subclass `NSManagedObject`，但消费者并不真正关心这一点。对象在`Document`方法内部成功出错，并且其属性是可访问的。但是，一旦离开该方法并`NSManagedObjectContext`释放用于获取的方法，该对象将再次变为故障。

有没有办法`NSManagedObject`从它的上下文中分离出来，所以它不会变成一个错误？当然这不允许保存对对象的更改，但无论如何我对此不感兴趣。

我不想诉诸任何一个：

1.  编写一个`NonManagedDocument`反映班级的`Document`班级。
2.  `NSManagedObjectContext`只要我对文档感兴趣，就可以标记。消费者不在乎，也不必知道`Document`子类`NSManagedObject`.

**笔记：**

我要补充一点，即使我*能够*保留s`Document`之后`NSManagedObjectContext`，这也不是一个很好的解决方案，因为消费者*可以*访问`Document`s 接口作为`NSManagedObjectContext`子类，这是不可取的，因为它可能会导致意外的错误。但是，为每个碰巧存储在数据库中的模型对象手动编写冻干包装器的替代方法非常没有吸引力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T21:39:33.073

我真的不明白你的问题。如果你公开了一个继承自 NSManagedObject 的类，那么该类的用户就会有这个强制，以及伴随的问题。

如果您将您的类公开为一个组合，则托管对象的详细信息就在该类中，并且这些详细信息很容易被隐藏。

您当然可以根据需要创建/销毁 MOC，它们非常便宜。但是，这似乎并不是超级有益的。

我建议保留一个用于界面的托管对象上下文。您提到担心多个线程调用到 MOC。这是一个有效的问题，但通过使用带有 NSPrivateQueueConcurrencyType 的 MOC 可以轻松有效地克服。

然后，每当您需要获取对象时，您只需执行

```
[moc performBlockAndWait:^{
    // Fetch the object from the MOC
}]; 
```

调用同步版本时要小心，因为您有可能出现死锁。

或者，您仍然可以使用为每次提取创建唯一上下文的选项...

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
moc.parentContext = myPrivateQueueContext;
// Now, you can fetch from this MOC, and do what you want with the object
// and when you are done, you just let the MOC dealloc. 
```

您可能想查看 NSFetchRequest 的选项，以及 MOC 本身的设置，特别是

```
refreshObject:mergeChanges:
retainsRegisteredObjects 
```

如果您告诉 myPrivateQueueContext 保留对象，它会将它们保留在其本地 MOC 中。然后，当您执行 fetch 时，您可以告诉 fetch 更喜欢 MOC 中的缓存版本，它甚至永远不会进入磁盘。

如果您存储托管对象的 objectID，您可以获得更多优势，并且只需调用 objectRegisteredForID: 即可查找已注册的对象。无论谁否决了答案，然后您可以手动清理缓存，因此如果需要，它不会变得太大。

或者，您可以调用 existingObjectWithID:error: 永远不会返回错误。结果将始终是已实现的对象或 nil。

无论如何，我认为您想做的事情可以通过多种方式轻松解决。不过，我会提醒您，不要过度设计您的解决方案。

找出你想要公开的接口，并实现它。如果您以后发现性能问题，请在那时处理它们。

** 编辑 **

专门针对 Danra 的评论（以及对答案投反对票的人）。我从未打算让您直接从私人 MOC 访问数据。如果要访问私有 MOC，请使用 performBlock。

但是，您可以根据需要创建任意数量的子...任何并发类型，并根据您的意愿使用它们。当他们需要与数据库对话时，他们将直接与父级对话（在适当的上下文中）。

我所说的一切都没有建议您对私有 MOC 做任何事情，但调用 performBlock 或使其成为另一个 MOC 的父级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T08:54:56.443

`NSManagedObject`s 与核心数据堆栈紧密绑定。实体不一定完全加载到内存中，关系也肯定不是。好吧，据我所知，没有支持的方式来做你要求的事情。

您很好地描述了您拥有的替代方案。很抱歉听到你讨厌他们。;)

也就是说，可以在运行时生成镜像类，您不必手动编写和维护每个实体。ObjC 运行时允许我们做一些花哨的事情。

* * *

编辑：一些关于 NSDictionary 快照的片段

```
NSManagedObject* any; // let's imagine you have an instance at hand
NSAttributeDescription* entityDescription = any.entity;

// Attributes
NSDictionary* attributeDescriptions = entityDescription.attributesByName;
for ( NSAttributeDescription* attributeDescription in attributeDescriptions.allValues )
{
    NSString* attributeName = attributeDescription.name;
    NSAttributeType attributeType = attributeDescription.attributeType;
    Class attributeClass = NSClassFromString( attributeDescription.attributeValueClassName );

    …
    id attributePrimeValue = [any primitiveValueForKey: attributeName];
    id attributeValue = [any valueForKey: attributeName];
    …

}

// Relationships
NSDictionary* relationshipDescriptions = entityDescription.relationshipsByName;
for ( NSRelationshipDescription* relationshipDescription in relationshipDescriptions.allValues )
{
    …
} 
```

以此为起点，您应该能够遍历属性，获取它们的名称、类型和值，并创建基于 NSDictionary 的快照。关系的迭代是相同的，但当然，您将对关系执行的操作与您的需求紧密相关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T14:12:02.653

为什么不直接隐藏`NSManagedObjectContext`？您的消费者可能不关心 is 是 a 的事实`NSManagedObject`，但他们不需要使用`NSManagedObjectContext`，这将是您的实现细节。您永远不需要公开`NSManagedObjectContext`和只为所有文档使用一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T14:35:55.267

我不确定您为什么要释放托管对象上下文。为什么不在应用程序委托中设置核心数据堆栈，以便您可以从程序中的任何位置访问您的 NSManagedObjects？

如果您需要执行后台任务，请确保在主线程（在应用程序委托中）创建一个 NSManagedObjectContext 并在后台线程中创建另一个 NSManagedObjectContext。

您可能需要查看 Magical Record (https://github.com/magicalpanda/MagicalRecord/) 以帮助大大简化使用 Core Data 并正确管理多个线程上的上下文。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T20:00:21.993

以@hypercrypt 的回答为基础：为什么不公开您的 API 基于托管对象的事实？这类似于@jody 的建议。

您可以使用 NSManagedObjectContext 上的类别来处理获取 per-thread `NSManagedObjectContext`。就像是：

```
@implementation NSManagedObjectContext (PerThreadContext)

+(NSManagedObjectContext*)contextForCurrentThread
{
    static OSSpinLock lock = OS_SPINLOCK_INIT ;
    @try 
    {
        OSSpinLockLock( & lock ) ;

        NSDictionary * info = [ NSThread currentThread ].threadDictionary ;
        NSManagedObjectContext * context = [ info valueForKey:@"managedObjectContext" ] ;
        if ( !context )
        {
            context = [ [ NSManagedObjectContext alloc ] initWithConcurrencyType:NSConfinementConcurrencyType ] ;
            context.persistentStoreCoordinator = [ NSPersistentStoreCoordinator sharedCoordinator ] ; // perhaps a category we added to NSPersistentStoreCoordinator? Or use your app delegate, etc...
            [ info setObject:context forKey:@"managedObjectContext" ] ;
        }
    }
    @finally 
    {
        OSSpinLockUnlock( & lock ) ;
    }
    return context ;
}

@end 
```

当您的 API 方法之一被调用时：

```
-(NSManagedObject*)getSomeObject
{
    NSManagedObjectContext * context = [ NSManagedObjectContext contextForCurrentThread ] ;

    NSManagedObject * result = ....code...
    return result ;
} 
```

现在，如果您想强制不变性，您可以向 NSManagedObject 添加一个类别（或为您的对象图实例创建一个基类）

作为一个类别：

```
@interface NSManagedObject (Freezing)
@property ( nonatomic, readonly ) BOOL frozen ;
-(void)freeze ;
@end

@implementation NSManagedObject (Freezing)

-(void)setFrozen:(BOOL)f
{
    objc_setAssociatedObject( self, "_frozen", [ NSNumber numberWithBool:f ], OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

-(BOOL)frozen
{
   return [ objc_getAssociatedObject( self, "_frozen" ) boolValue ] ;
}

-(void)freeze
{
    [ self setFrozen:YES ] ;
}

-(BOOL)validateForUpdate:(NSError**)error
{
    if ( self.frozen ) 
    { 
        if ( error ) { *error = [ NSError ... ] ; }
        return NO ; 
    }

    return [ super validateForUpdate:error ] ;
}

-(BOOL)validateForDelete:(NSError**)error
{
    if ( self.frozen ) 
    { 
        if ( error ) { *error = [ NSError ... ] ; }
        return NO ; 
    }

    return [ super validateForDelete:error ] ;
}

@end 
```

最后，如果您在拆除核心数据堆栈时已经下定决心，我会`-(NSDictionary*)dictionaryRepresentation`在 NSManagedObject 中添加一个类别，以将您的托管对象转换为您传递给消费者的字典。（你可以看到我喜欢类别？）

对于从核心数据提取返回的`NSDictionaryResultType`结果，请在您的提取请求中使用结果类型。这会将结果作为字典返回。

高温高压

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-01T17:51:37.063

你不能——`NSManagedObjects`总是在核心数据堆栈中保持绑定到他们的上下文。这是有道理的。

一种可能的解决方案是编写类似于[mogenerator](https://github.com/rentzsch/mogenerator)的东西，但它会自动创建非托管快照类，以及创建这些副本的托管类上的方法。

或者，可能有一些 obj-C 技巧来生成`NSManagedObjects`保留其上下文的子类，*并*隐藏它们子类化的事实`NSManagedObject`，因此消费者只暴露于快照属性而不暴露于整个`NSManagedObject`功能。

# ruby-on-rails - 路由到“子控制器”

> ID：11582838
> 
> 赞同：1
> 
> 时间：2012-07-20T15:53:54.440
> 
> 标签：ruby-on-rails

我有一个“companies_controller”，因为它控制着一切，它变得越来越大。一家公司有一项服务，我需要将其设置为公司的“子路线”。

我像这样路由我的公司：

```
resources :companies do
  member do
    get 'services/service'
  end
end 
```

我用它来访问我的路线： services_service_company_path

我明白了：

```
Routing Error

uninitialized constant Companies 
```

有什么帮助吗？我是 Rail/Ruby 的新手，所以我不确定如何正确陈述我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:19:04.320

你有一个 ServicesController 类吗？

你应该做这个 ：

```
resources :companies do
  resources :services do
    member do
      get 'service'
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:19:39.293

如果您想`services`成为公司的嵌套控制器，您可以执行以下操作：

```
resources :companies do
  resources :services
end 
```

如果除了资源提供的 REST 路由之外，您还需要`GET service`：

```
resources :companies do
  resources :services do
    member do
      get 'service'
    end
  end
end 
```

# android - 嵌套的 LinearLayouts 和居中对齐它们

> ID：11582841
> 
> 赞同：0
> 
> 时间：2012-07-20T15:54:06.373
> 
> 标签：android, android-linearlayout

我一直在尝试使用嵌套的 LinearLayouts 来实现这一点。尝试将宽度和高度都设置为 0dp 。但它没有达到 80% 的宽度和高度。但是当我将它切换到单一维度（即*宽度*或高度）时它正在工作。虽然我用谷歌搜索了很多，但无法获得任何信息。

*那么，现在的问题*是：布局重量是否与两个维度一起使用？

注意：我不能使用重心，因为孩子们没有合适的宽度。他们需要从 linearlayout2 (fill_parent) 中获取。

![布局图](../Images/fbd66126b2e1478ba1e96fafa0ef05f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:04:17.733

1、LinearLayout 的权重不能同时与宽度和高度一起使用，它取决于它的方向。默认为水平。

# jquery - 当窗口大于 480 像素时执行窗口调整大小的函数

> ID：11582844
> 
> 赞同：0
> 
> 时间：2012-07-20T15:54:12.593
> 
> 标签：jquery, resize

**>> [JSFIDDLE](http://jsfiddle.net/BramVanroy/VzQvP/) <<**

我认为标题是不言自明的。我不知道为什么这段代码不起作用：

```
function toolTip() {
    var list = $("#readMoreUl");
    var links = list.children("li").children("a");
    var tooltips = links.children("span.tooltip");

    links.hover(function () {
        $(this).children("span.tooltip").fadeIn(350);
        },
    function () {
        $(this).children("span.tooltip").fadeOut(40);
        });    
}

$(document).ready(function () {
    $(window).resize(function() {
        if ($(window).width() > 480) {
            toolTip();
        }
    }).resize();
}); 
```

我还想知道：我对最后一次`.resize`调用的使用是否正确？模拟实际调整大小以便调用函数`window ready`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:59:12.527

一方面，您的代码在窗口大于 480 时安装工具提示处理程序，并且每次检测到它时，它都会再次安装它（导致多个事件处理程序）。而且，如果窗口的大小小于 480，它永远不会删除工具提示事件处理程序。

我建议这样做更简单：

```
function toolTip() {
    var list = $("#readMoreUl");
    var links = list.children("li").children("a");
    var tooltips = links.children("span.tooltip");
    var overlay = $("#overlay");

    links.hover(function () {
        if ($(window).width() > 480) {
            $(this).addClass("highlight");
            $(this).children("span.tooltip").fadeIn(350);
            overlay.fadeIn(400);
        }
    },
    function () {
        $(this).children("span.tooltip").fadeOut(40);
        overlay.fadeOut(30);
        $(this).removeClass("highlight");
    });    
}

$(document).ready(function () {
    toolTip();
}); 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/yVCwS/](http://jsfiddle.net/jfriend00/yVCwS/) ​</p>

# .net - 如何为接口或委托确定类型标识

> ID：11582848
> 
> 赞同：1
> 
> 时间：2012-07-20T15:54:17.507
> 
> 标签：.net, interface, delegates, .net-assembly

如果两个不同的不相关程序集希望使用委托和/或接口类型（例如

```
接口 IFoo {void Foo(); }
委托 void ActionByRef<T>(ref T param)_;

```

每个都有自己的目的，但是使用它们的第三个程序集可能希望在两个程序集之间传递对象，.net 需要发生什么来决定应该接受一个程序集的`IFoo`或公开的作为输入`ActionByRef<T>`另一个？我知道 .net 没有对委托类型使用简单的结构相等性（这意味着例如期望 a 的例程`Func<int,bool>`将不接受 a `Predicate<int>`，即使两种类型都表示具有相同签名的函数），但确切的规则是什么？如果希望设计一个与 .net 2.0 和 4.0 兼容的程序集，并让它接受具有三个参数的方法的委托，有没有办法定义一个`Action<T1,T2,T3>`这样程序集在链接到 .net 2.0 程序时将使用其内置的程序集，但在与 .net 4.0 链接时将接受同名的框架定义委托的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:07:53.767

> .net 需要发生什么来决定应该接受一个程序集公开的 IFoo 或 ActionByRef 作为另一个程序集的输入？

.NET 永远不会接受`IFoo`来自程序集 A 的`IFoo`预期来自程序集 B 的。它们是两种不同的类型，即使它们碰巧有相同的名称。您需要在两者之间创建一个适配器。

例如，如果你有一个 A.IFoo 并且需要将它传递到需要 B.IFoo 的地方，你可以使用这个类：

```
class AToBFooAdapter : B.IFoo
{
    private readonly A.IFoo _foo;
    public AToBFooAdapter(A.IFoo foo)
    {
        _foo = foo;
    }

    public void Foo()
    {
        _foo.Foo();
    }
} 
```

对于代表来说更容易；如果他们有相同的签名，你可以这样做：

```
A.ActionByRef<string> action1 = ...
B.ActionByRef<string> action2 = new B.ActionByRef<string>(action1); 
```

# objective-c - 在 XCode 中构建自定义 UIProgressVIew

> ID：11582853
> 
> 赞同：0
> 
> 时间：2012-07-20T15:54:31.223
> 
> 标签：objective-c, ios, xcode, cocoa-touch, progress-bar

所以我正在尝试使用以下图像创建一个进度条： 这是背景： ![在此处输入图像描述](../Images/97ddd2534f03ce3bb4dcd64e46bcc3d7.png)

这是我想用来填充进度条的填充： ![在此处输入图像描述](../Images/e8fc1ee11f0427623e543ef91a6c2bf9.png)

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:42:04.077

使用此功能可能会对您有所帮助。它将提供与图像像素相同的图像图案颜色。根据下载进度更改图像帧。将此颜色设置为图像的背景。

```
 [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:12:47.927

[乐文件](http://developer.apple.com/library/ios/documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIProgressView/trackImage)？

> > trackImage 用于未填充轨道部分的图像。
> > 
> > @property(nonatomic, retain) UIImage *trackImage Discussion 如果您提供自定义图像，trackTintColor 属性将被忽略。
> > 
> > 可用性 适用于 iOS 5.0 及更高版本。在 UIProgressView.h 中声明

和

> > progressTintColor 进度条填充部分显示的颜色。
> > 
> > @property(nonatomic, retain) UIColor *progressTintColor 可用性 适用于 iOS 5.0 及更高版本。在 UIProgressView.h 中声明

# extjs4 - 重新调整面板组件的大小以适应屏幕大小

> ID：11582856
> 
> 赞同：1
> 
> 时间：2012-07-20T15:54:36.620
> 
> 标签：extjs4, extjs4.1

我添加了一个`Panel`（我称之为`My Panel 1`）和另一个`panel`（`panel`我称之为`My Panel 2`），然后在第二个面板（到`My Panel 2`）中添加了一个网格。当我单击浏览器的`Restore Down`或`re-sizing`按钮时，它不会缩小组件以适应屏幕尺寸。我该如何解决这个问题？

```
Ext.define('MyApp.view.MyPanel', {
    extend: 'Ext.panel.Panel',

    height: 469,
    width: 729,
    title: 'My Panel 1',

    initComponent: function () {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                xtype: 'panel',
                height: 238,
                title: 'My Panel 2',
                items: [{
                    xtype: 'gridpanel',
                    height: 179,
                    title: 'My Grid Panel 1',
                    columns: [{
                        xtype: 'gridcolumn',
                        dataIndex: 'string',
                        text: 'String'
                    }, {
                        xtype: 'numbercolumn',
                        dataIndex: 'number',
                        text: 'Number'
                    }, {
                        xtype: 'datecolumn',
                        dataIndex: 'date',
                        text: 'Date'
                    }, {
                        xtype: 'booleancolumn',
                        dataIndex: 'bool',
                        text: 'Boolean'
                    }],
                    viewConfig: {

                    }
                }]
            }]
        });

        me.callParent(arguments);
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:40:19.520

我建议使用视口 - 它会自动调整到浏览器的“视口”:) 如果您希望自动管理它们，也不要设置固定的宽度和高度。这是一个示例：http: [//jsfiddle.net/dbrin/gWaCv/embedded/result/](http://jsfiddle.net/dbrin/gWaCv/embedded/result/)

# oracle - Oracle 分析滚动百分位数

> ID：11582859
> 
> 赞同：6
> 
> 时间：2012-07-20T15:54:48.130
> 
> 标签：oracle, oracle11g, analytic-functions

是否可以将窗口与任何百分位函数一起使用？或者您知道获得滚动百分位值的解决方法吗？

*移动平均*线很容易：

```
select avg(foo) over (order by foo_date rows 
                      between 20 preceding and 1 preceding) foo_avg_ma
from foo_tab 
```

但我不知道如何在同一个窗口中获得中*位数*（50% 百分位数）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:29:35.660

您可以使用[PERCENTILE_CONT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions128.htm#i1000913)或[PERCENTILE_DISC](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions128.htm#i1000913) 函数来查找中位数。

> PERCENTILE_CONT 是一个逆分布函数，它假设一个连续分布模型。它接受一个百分位值和一个排序规范，并返回一个内插值，该值将落入与排序规范相关的该百分位值。在计算中忽略空值。

...

> PERCENTILE_DISC 是一个逆分布函数，它采用离散分布模型。它接受一个百分位值和一个排序规范，并从集合中返回一个元素。在计算中忽略空值。

...

> 以下示例计算每个部门的工资中位数：
> 
> ```
> SELECT department_id,
>        PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary DESC) "Median cont",
>        PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY salary DESC) "Median disc"
>   FROM employees
>   GROUP BY department_id
>   ORDER BY department_id; 
> ```

...

> PERCENTILE_CONT 和 PERCENTILE_DISC 可能会返回不同的结果。PERCENTILE_CONT 在进行线性插值后返回计算结果。PERCENTILE_DISC 只是从聚合的值集中返回一个值。当百分比值为 0.5 时，如本例所示，PERCENTILE_CONT 返回具有偶数个元素的组的两个中间值的平均值，而 PERCENTILE_DISC 返回两个中间值中的第一个值。对于具有奇数个元素的聚合组，两个函数都返回中间元素的值。

带有窗口模拟槽范围自连接的 SAMPLE

```
with sample_data as (
        select /*+materialize*/ora_hash(owner) as table_key,object_name,
            row_number() over (partition by owner order by object_name) as median_order,
            row_number() over (partition by owner order by dbms_random.value) as any_window_sort_criteria
        from dba_objects
    )
select table_key,x.any_window_sort_criteria,x.median_order,
    PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY y.median_order DESC) as rolling_median,
    listagg(to_char(y.median_order), ',' )WITHIN GROUP (ORDER BY y.median_order) as elements
from sample_data x
    join sample_data y using (table_key)
where y.any_window_sort_criteria between x.any_window_sort_criteria-3 and x.any_window_sort_criteria+3
group by table_key,x.any_window_sort_criteria,x.median_order
order by table_key, any_window_sort_criteria
/ 
```

![在此处输入图像描述](../Images/7491af2668d22301bac4f4745d8a95c2.png)

# spring - 如何使 Intellij Idea “Spring Dependencies Diagram”仅显示 bean 的一个子集？

> ID：11582860
> 
> 赞同：3
> 
> 时间：2012-07-20T15:54:49.553
> 
> 标签：spring, ide, intellij-idea, dependencies

在 Intellij Idea 11.1.2 中，我有“Spring Dependencies Diagram”，但这显示了太多信息（应用程序中有 100 多个 bean，有很多依赖项），我看不到对我重要的东西的清晰概述片刻。

我想一次只查看 bean 的一个子集。我只有一个配置文件（bean 是根据它们的注释自动发现的），所以文件集对我没有帮助。

我能想到的最好的办法是选择一些有趣的 bean，然后按“显示具有依赖关系的选定节点”，但这很不稳定，因为一旦我开始重新排列这些框，它们就会被选中，并且未选中的 bean 消失。

是否可以让“Spring Dependencies Diagram”忽略部分 bean？

编辑：我也对其他 spring 依赖图可视化工具感兴趣。Eclipse 或 Netbeans 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:11:47.360

FWIW，[STS](http://www.springsource.com/developer/sts)提供了一些视图来概述 Spring 特定的项目结构，但与 IDEA 中的可视化完全不同

# r - 为具有相似名称的所有变量创建循环

> ID：11582861
> 
> 赞同：2
> 
> 时间：2012-07-20T15:54:51.223
> 
> 标签：r, variables, loops

我是 R 新手，也是这个论坛的新手。我已经搜索但无法轻易找到这个问题的答案：

我有根据位置按周计算的疾病病例数，存储在具有变量名 case.wk24、cases.wk25 等的 .csv 文件中。我还有每个位置的人口，并且想要生成发病率（# 个病例/population) 用于每个位置。

我想编写一个循环，每周按位置生成发病率，并将这些存储在名为“ir.wk24”、“ir.wk25”等的新变量中

我被困在2点：

1.  如果遇到看起来像“cases.wk”的变量，是否可以告诉 R 运行循环？在某些程序中，人们会使用星号 - case.wk*

2.  然后我如何生成具有顺序命名的新变量并将它们存储在数据集中？

我真的很感谢这方面的任何帮助——整天都被互联网搜索困住了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:45:06.447

```
x <- data.frame(case.wk24=c(1,3),case.wk25=c(3,2), pop=c(7,8))

weeks <- 24:25
varnames <- paste("case.wk", weeks, sep="")
ir <- sapply(varnames,FUN=function(.varname){
    x[,.varname]/x[,"pop"]
})
ir <- as.data.frame(ir)
names(ir) <- paste("ir.wk", weeks, sep="")
x <- cbind(x,ir)
x 
```

# php - 执行的测试百分比

> ID：11582866
> 
> 赞同：4
> 
> 时间：2012-07-20T15:55:08.587
> 
> 标签：php, phpunit

我在一个项目中运行我的 phpunit 测试，我得到了这个响应：

```
................................. 65 / 81 ( 80%)
................

Time: 0 seconds, Memory: 9.25Mb

OK (81 tests, 190 assertions) 
```

这意味着什么？我从未在我经常从事的其他项目中看到它。该百分比 (80%) 是否代表实际执行的测试数量？为什么只有80%？我不明白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:57:25.467

它所做的只是显示一个百分比，因为有太多测试需要开始一个新行以获得更多空间来输入“。” 人物。所以在它移动到下一行之前，它会告诉你第一行完成了多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:57:32.877

因为`(65 / 81) * 100 = 80%`

是的，这是已完成测试的百分比

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:57:39.913

它只是给你一个关于进展的指示。

# django - 找不到 Django 管理页面

> ID：11582867
> 
> 赞同：8
> 
> 时间：2012-07-20T15:55:08.853
> 
> 标签：django, admin

基本上我一直在关注本教程，但是在让管理页面工作时我被卡住了。我得到的错误是：在此服务器上找不到请求的 URL /admin/。因此，我查看了很多论坛和很多 stackoverflow 问题，但由于我是一个完整的菜鸟，我不理解其中的一半，而另一半的解决方案并不能解决我的问题。这就是我的 settings.py 的样子：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'polls'
) 
```

这就是我的 urls.py 的样子：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:

from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'BoE.views.home', name='home'),
    # url(r'^BoE/', include('BoE.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

任何帮助都感激不尽。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:41:59.853

当您访问 http://127 0 0 1:8000 时，您是否获得了“欢迎使用 Django”页面？（带点）

你要去 http://127 0 0 1:8000/admin/ 吗？

教程第一部分的所有内容都有效吗？您看到数据库中的项目了吗？

* * *

在下面的评论中，我们认为问题不在于 Django，因为他的代码与我的代码完全相同（而且我的代码也有效）。他必须去 wiki.bitnami.org/Components/Django 并按照那里的说明进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:55:57.907

我将继续进行尝试，因为这是我能想到的唯一可能仍然是问题的事情。

如果你只运行`python manage.py runserver`开发服务器绑定到 127.0.0.1:8000。但是，除非您在机器上的浏览器中运行，或者通过机器直接访问它（X Window、VNC、隧道等），否则您无法远程访问它。

如果要以实际 IP 地址访问开发服务器，则需要告诉它绑定到主接口：

```
python manage.py runserver 0.0.0.0:8000 
```

然后，您将能够在本地浏览器中访问您的网站`http://<ip>:8000/admin/`

# iphone - 如何表示动画的结束？

> ID：11582870
> 
> 赞同：0
> 
> 时间：2012-07-20T15:55:23.123
> 
> 标签：iphone, objective-c, xcode, animation, uiviewanimation

嗨，我正在创建一个应用程序，它有一个在运动后播放的动画，然后它变成空白，我需要一种方法来在动画结束播放声音时在代码中声明，我有声音代码，所以我只需要知道如何为了说明这一点，我正在使用诸如`[animation startanimating]`and 和`[animation stopanimating]`and`[audioplayer play]`之类的代码`[audioplayer stop]`。谢谢，我是初学者，所以请放轻松:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:57:40.843

您可以将代码转换为使用带有完成回调的块。[此](https://stackoverflow.com/questions/7386186/uiview-animation-end)答案中的示例。

* * *

**编辑示例：**

假设您要设置动画的视图称为`myView`

```
[UIView animateWithDuration:0.5 
                  delay:0.0 
                options:UIViewAnimationOptionBeginFromCurrentState 
             animations:^{
                 myView.alpha = 0; // a fade out animation
             }
             completion:^(BOOL finished)
             {
                 [audioPlayer play];
                 // whatever else
             }

 ]; 
```

这是你试过的吗？您可以发布更多实际代码吗？它有助于了解您如何完整地处理动画和回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:06:32.847

```
[UIView animateWithDuration:0.5 
                      delay:0.0 
                    options:UIViewAnimationOptionBeginFromCurrentState 
                 animations:^{
                     //animation block
                     // perform animation here
                 }
                 completion:^(BOOL finished){
                     // play sound here
                     [audioPlayer play]

     }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:00:50.710

你会想要使用一个`CAKeyFrameAnimation`. 这将允许您通过一系列具有单独帧时间的图像进行动画处理，**并**在您到达动画结束时获得委托通知，而使用 an 进行动画处理`UIImageView`则无法提供。

一些示例代码可以帮助您入门（假设为 ARC）：

```
// create an animation overlay view to display and animate our image frames
UIView *animationView = [[UIView alloc] initWithFrame:frame];
[self.view addSubview:animationView];

// using 4 images for the example
NSArray *values = [NSArray arrayWithObjects:(id)[[UIImage imageNamed:@"Image1.png"] CGImage],
                       (id)[[UIImage imageNamed:@"Image2.png"] CGImage],
                       (id)[[UIImage imageNamed:@"Image3.png"] CGImage],
                       (id)[[UIImage imageNamed:@"Image4.png"] CGImage],
                       nil];

// change the times as you need
NSArray *keyTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0],
                         [NSNumber numberWithFloat:0.25],
                         [NSNumber numberWithFloat:0.50],
                         [NSNumber numberWithFloat:1.0],nil];

// animating the contents property of the layer
CAKeyframeAnimation *keyframe = [CAKeyframeAnimation animationWithKeyPath:@"contents"];
keyframe.values = values;
keyframe.keyTimes = keyTimes;
keyframe.calculationMode = kCAAnimationLinear;
keyframe.duration = 1.0;  // 1 second, can be whatever you want, obviously
keyframe.delegate = self;
keyframe.removedOnCompletion = NO;
keyframe.fillMode = kCAFillModeForwards;

// "user defined string" can be whatever you want and probably should be constant somewhere in 
// your source. You can use this same key if you want to remove the animation
// later using -[CALayer removeAnimationForKey:] on the animationView's layer
[animationView.layer addAnimation:keyframe forKey:@"user defined string"]; 
```

然后，在其他地方实现您的委托方法：

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)finished
{
    if ( finished ) {
        // play music
    }
} 
```

# magento - 无法更改 Magento Connect Manager 中的设置

> ID：11582872
> 
> 赞同：0
> 
> 时间：2012-07-20T15:55:32.067
> 
> 标签：magento, settings, connect

最近我将 Magento Connect Manager 中的设置更改为 FTP（包含所有数据）而不是本地文件系统。现在我需要将连接管理器设置重置为本地文件系统并禁用 FTP 设置。但是，当我对其进行调整并保存时，只需将其与所有旧数据（用户、url 等）一起放回 FTP。
我正在运行 Mangento 1.6.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:33:32.603

尝试将所有 Magento 文件夹（包括根文件夹）设置为 777。安装所需的内容，然后将权限恢复为 655 不可写模式。

# jquery - jqPlot tickInterval 简单问题

> ID：11582877
> 
> 赞同：1
> 
> 时间：2012-07-20T15:55:41.300
> 
> 标签：jquery, jqplot

我有一个带有 yaxis 的普通图表，如下所示

```
yaxis: {
        show:true,
        min:0,
        max:10000,
        tickInterval: 100
       } 
```

但它从 0 开始并向上移动 100 直到达到 10000 但我希望 yAxis 向上移动 10 的倍数，如下所示：

0、10、100、1000、10000

那可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T00:42:27.347

您所指的称为对数轴。 [jqPlot 有一个插件](http://www.jqplot.com/docs/files/plugins/jqplot-logAxisRenderer-js.html)。

# javascript - javascript/jquery 选项卡在 IE7、8 或 9 中不起作用

> ID：11582878
> 
> 赞同：0
> 
> 时间：2012-07-20T15:55:54.400
> 
> 标签：javascript, jquery, internet-explorer, tabs

此代码适用于除 IE7、8 和 9 之外的所有浏览器。我知道我可以使用 jquery 选项卡，但我喜欢以不同的方式来学习更多原生 javascript。在 IE 中打开小提琴，你会明白我的意思。在任何其他浏览器中打开它，它会工作。有人请告诉我我做错了什么。谢谢

[标签链接小提琴](http://jsfiddle.net/Chris22/rL9Mj/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:59:56.410

在 IE9 中，`this.pathname`返回`_display/`，但在 Chrome 中，它是`/_display/`.

在 IE9 和 Chrome`window.location.pathname`中都是`/_display/`.

所以`this.pathname == window.location.pathname`在IE中失败了。

更新示例：http: [//jsfiddle.net/rL9Mj/1/](http://jsfiddle.net/rL9Mj/1/)

# events - coronasdk 离开图像区域事件

> ID：11582879
> 
> 赞同：2
> 
> 时间：2012-07-20T15:55:55.140
> 
> 标签：events, coronasdk

我如何使用事件来找出手指何时离开图像区域？例如，当您解锁 iphone，但将手指移离滑块太远（触摸并移动一点后 - 手指仍在触摸屏幕，但未触摸滑块），它会跳回到开头。当我在 if 语句中使用 event.phase=="ended" 时，图像不会返回到指定位置，除非我在手指仍然“在”图像上时松开屏幕。基本上，当手指离开图像区域时，如何将图像返回到某个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:53:24.453

您需要将图像设置为焦点，即使在他们的手指离开对象之后，触摸事件也会继续在对象上触发。

这是我使用的示例代码：

```
local function switchScreenListener(event)      
    display.getCurrentStage():setFocus( event.target )

    if event.phase == "moved" then      
        local xBoundry = event.target.x + event.target.width/2 -- remember the reference point!
        print ("X Boundry: " .. xBoundry .. ", Current X: " .. event.x);
        if event.x > xBoundry then
            print ("We swiped out.")
            display.getCurrentStage():setFocus( nil )
        end
    elseif event.phase == "ended" then
        display.getCurrentStage():setFocus( nil )
        print ("Start: (" .. event.xStart .. ", " .. event.yStart .. "), End: (" .. event.x .. ", " .. event.y .. ")");

        local options = {
            effect = "slideRight",
            params = {
                isMuted = isMuted
            }
        }
        storyboard.gotoScene( "view_alphabet", options )
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:59:22.260

您需要指定触摸事件的像素范围。如果触摸事件超出此像素范围，则重置图片。

所以在你的触摸事件中做这样的事情，触摸的范围是 x = 320 -> 480 和 y = 80 -> 280

```
local function onTouch(event)    
 local t = event.target    
 if (t.x < 320 || t.x > 480) || (t.y > 280 || t.y < 80) then 
      //reset image
end 
```

//你也可以试试

```
local function onTouch(event)    
 local t = event.target
 local phase = event.phase
 if phase == "moved" then
  t.x = event.x - t.x0
  t.y = event.y = t.y0
  if (t.x < 320 || t.x > 480) || (t.y > 280 || t.y < 80) then
     //reset image
  end
 end
 return true
end

objectName:addEventListener("touch", onTouch) 
```

# jsf - 无法创建托管 bean UserBean - JSF

> ID：11582881
> 
> 赞同：0
> 
> 时间：2012-07-20T15:56:02.530
> 
> 标签：jsf, properties, javabeans

我正在尝试创建一个访问数据库的简单登录页面，以便在验证用户名和密码时，在类中设置 id、firstName、lastName 以及访问。我得到了这个错误：

```
javax.servlet.ServletException: Unable to create managed bean UserBean.  The following problems were found:
 - Property firstName for managed bean UserBean does not exist.  Check that appropriate getter and/or setter methods exist.
 - Property id for managed bean UserBean does not exist.  Check that appropriate getter and/or setter methods exist.
 - Property lastName for managed bean UserBean does not exist.  Check that appropriate getter and/or setter methods exist.
javax.faces.webapp.FacesServlet.service(FacesServlet.java:321) 
```

我有 id、firstName、lastName 的 getter，但没有 setter，因为它们是在验证后设置的。

这是类 UserBean

```
public class UserBean {
private static String password, username, id, firstName, lastName;
public enum DBfields { BLANK, USERNAME, ID, PASSWORD, FIRSTNAME, LASTNAME }; 

public String getPassword() {
    return password;
}

public void setPassword( String value ) {
    password = value;
}

public String getUsername() {
    return username;
}

public void setUsername( String value ) {
    username = value;
}

public static String getId() {
    return id;
}

public static String getFirstname() {
    return firstName;
}

public static String getLastname() {
    return lastName;
}

public String loginUser() throws Exception { 

    if( loginValidate( username, password ) )
        return "success";
    else
        return "fail";
}

public static boolean loginValidate( String username, String Password ) throws Exception{

    String DBuser;
    String DBpass = "asdf";
    PreparedStatement table = connectToTable( "firstsql", "users");
    ResultSet row = table.executeQuery();;

    while(row.next()){
        DBuser = row.getString(DBfields.USERNAME.name());
        if(username.equals(DBuser)){
            DBpass = row.getString(DBfields.PASSWORD.name());
            break;
        }
    }

    if(password.equals(DBpass)){
        id = row.getString(DBfields.ID.name());
        firstName = row.getString(DBfields.FIRSTNAME.name());
        lastName = row.getString(DBfields.LASTNAME.name());
        return true;
    } else
        return false;
} 
```

和我的面孔配置

```
 <?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
 <managed-bean>
  <managed-bean-name>UserBean</managed-bean-name>
  <managed-bean-class>com.jfsdemo.bean.UserBean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
   <property-name>firstName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>id</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>lastName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>password</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>username</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
 </managed-bean>
 <navigation-rule>
  <from-view-id>/login.xhtml</from-view-id>
  <navigation-case>
   <from-action>#{UserBean.loginUser}</from-action>
   <from-outcome>success</from-outcome>
   <to-view-id>/timesheet.xhtml</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-action>#{UserBean.loginUser}</from-action>
   <from-outcome>fail</from-outcome>
   <to-view-id>/login.xhtml</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/timesheet.xhtml</from-view-id>
 </navigation-rule>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T16:00:12.917

托管属性是通过设置器设置的。所以你真的需要提供它们。另请注意，Java 区分大小写。您的名字和姓氏属性基于调用的 getter名称`firstname`，而`lastname`不是. 相应地修复它。使用and代替等等。或者，更好的是，让您的 IDE 根据属性自动生成 getter/setter。`firstName``lastName``faces-config.xml``getFirstName()``setFirstName()``getFirstname()`

顺便说一句，为什么要声明这些属性`static`？这样，它们将在**所有**使用 webapp 的用户之间共享。这真的是你想要的吗？

# wordpress - wordpress 是缓存小部件吗？

> ID：11582883
> 
> 赞同：1
> 
> 时间：2012-07-20T15:56:06.943
> 
> 标签：wordpress

我必须将 wordpress 站点移动到另一个域 (foo.com => foo.hu) 下，因此需要更新站点上的链接。我写了一个脚本来替换帖子/选项中数据库中的 tld，但是当我检查网站时，我在侧边栏上看不到任何小部件......

我试图找到一些关于它的缓存（基于 md5 哈希或类似的东西），因为如果我将 tld 替换为文本小部件中的原始内容，一切都会再次正常。但是关于 wordpress 文档（和一些论坛），没有内置的永久缓存。

所以我的问题是，如何从外部修改文本小部件的内容？

我真的不想手动做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:50:36.873

小部件的内容是一个序列化的 DB 条目。因此，如果新域名的字符串长度与旧域名不同，则序列化 DB 条目（以及任何其他包含域名的序列化 DB 条目，例如附件 URL 等）将变得格式错误。

# objective-c - 检测新的网络连接或断开连接

> ID：11582884
> 
> 赞同：0
> 
> 时间：2012-07-20T15:56:10.163
> 
> 标签：objective-c, macos

> **可能重复：**
> [在 iOS 上检测连接的最简单方法？](https://stackoverflow.com/questions/8812459/easiest-way-to-detect-a-connection-on-ios)

如何在 Mac OS X 的 Objective-C 中检测到新的网络连接或断开连接？

# git - 如何将另一个开发人员的分支合并到我的分支中？

> ID：11582894
> 
> 赞同：82
> 
> 时间：2012-07-20T15:57:00.157
> 
> 标签：git, version-control, github

我对 git 比较陌生。我们的组织使用[Fork & Pull 模型](https://help.github.com/articles/using-pull-requests/)来管理对 master 分支的更改。每个开发人员在添加新功能时都会从他们的 fork 中分出 master 和分支。我密切关注其他开发人员在他们自己的分支中所做的提交，并且有时希望将这些更改合并到我自己的分支中。我要采取哪些步骤来实现这一目标？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-20T16:04:24.017

您首先需要将其他开发人员存储库添加为远程。

```
git remote add otherrep uriToOtherRep 
```

然后你从那里获取更改

```
git fetch otherrep 
```

然后将远程存储库中的分支合并到您的分支中

```
git merge otherrep/branchname 
```

快乐合并！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-04-27T09:04:13.123

你也可以做“git pull”，它会拉取所有分支的变化。

> git 拉

您可以在当前分支中运行 git merge

> git合并原点`<branchname>`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-11-03T10:17:44.343

假设您当前正在处理分支`feature/feature_a`，并且您想要合并在另一个名为 的分支中所做的`feature/feature_b`更改`feature/feature_a`。以下命令应该可以解决问题：

```
git checkout feature/feature_b
git pull
git checkout feature/feature_a
git merge feature/feature_b 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-20T16:00:12.417

一旦您在存储库中有问题的分支，例如`anotherdev/master`远程分支，您就可以执行`git merge anotherdev/master`.

# java - movzbl 如何与寄存器值 0xffffffffffffffff 交互？

> ID：11582904
> 
> 赞同：1
> 
> 时间：2012-07-20T15:57:35.897
> 
> 标签：java, debugging, assembly, java-native-interface, x86

我正在调试我们应用程序的本机 C 库部分中的崩溃，该部分是通过 JNI 从 Java 端调用的。

我找到了 Java 留给我的崩溃文件的这一部分：

```
# JRE version: 6.0_16-b01
# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.2-b01 mixed mode linux-amd64 )
# Problematic frame:
# C  [binaryname.so+0x2760]  functionname+0x59 
```

我已经反编译了这个：

```
[richg@SVR-LRH-ES-2A]$ gdb binaryname.so
...
(gdb) disas 0x275e 0x2768
Dump of assembler code from 0x275e to 0x2768:
0x000000000000275e <functionname+87>:  rex.RB clc
0x0000000000002760 <functionname+89>:  movzbl 0x230(%rax),%eax
0x0000000000002767 <functionname+96>:  test   %al,%al 
```

再次查看我的堆栈跟踪和寄存器部分，我可以看到：

```
RAX=0xffffffffffffffff, RBX=0x00002aab6cdf46c8, RCX=0x00002b70e0f15d73, RDX=0x000000005d5ffbe0
RSP=0x00000000463f9710, RBP=0x00000000463f9770, RSI=0x00002b70e0f27820, RDI=0x00000000463f9748
R8 =0x00002b70e0f27838, R9 =0x000000005cfa9828, R10=0x000000005cfa9478, R11=0x000000005cfa9440
R12=0x00002aab84654000, R13=0x00002aab6cdf46c8, R14=0x00000000463f9808, R15=0x00002aab84654000
RIP=0x00002aab79316760, EFL=0x0000000000010206, CSGSFS=0x0000000000000033, ERR=0x0000000000000004
TRAPNO=0x000000000000000e 
```

所以 %rax 是 0xffffffffffffffff。这看起来对我来说很可疑。

不过，我前段时间用尽了我对 x86 的了解。我已经阅读了一些有关 movz 的内容，并且了解它的作用（通过用零填充低 24 位从 8 位整数转换为 32 位整数），但我仍然有疑问：

1）调用中0x230部分的意义是什么？我可以在代码中看到 movzbl 的其他用途，其中有不同的数字。

2）我是否认为如果输入寄存器的值大于 8 位（此处为 %rax），那么这会因溢出而崩溃？（如果是这样，这将是我崩溃的根本原因。）

3) 为什么 Java 给我的寄存器转储中没有 %eax？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:11:36.963

0x230 是一个偏移量，在正常世界中的`0x230(%rax)`意思。`[rax+0x230]`

所以`movzbl 0x230(%rax),%eax`完结的意思`movzx eax, byte ptr [rax+0x230]`。

这里没有实际的输入寄存器，`rax`应该保存一个地址。-1 作为地址看起来不是很有效。这大概就是问题所在。

`eax`当然是在寄存器转储中 - 只需查看`rax`.

# apache - 如何修复我的 .htaccess

> ID：11582907
> 
> 赞同：0
> 
> 时间：2012-07-20T15:57:43.767
> 
> 标签：apache, .htaccess, mod-rewrite

所以这是我的 .htaccess 到目前为止：

```
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName site.com
#Redirect 301 / http://www.google.com/

Options +FollowSymlinks
RewriteEngine On
RewriteRule ^([^/\.]+)/?$ /index.php?page=$1 [L]

RewriteCond %{HTTP_HOST} ^site.com
RewriteRule (.*) http://www.site.com/$1 [R=301,L]

ErrorDocument 404 /404.html 
```

我想做的是以下几点：

index.php?page=pagesite -> site.com/pagesite

但是如果我去 site.com/images 它不会去 /images 它去 index.php?page=images

我该如何解决？

另外，如果“pagesite”不在/includes/pages/中，它是否会重定向到404？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:13:15.373

我假设您正在尝试返回直接返回的图像和其他纯文件，而不是 PHP：

```
RewriteEngine On
# If the file exists, return it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php?page=$1 [L] 
```

[这是我的典型设置](http://docforge.com/wiki/Mod_rewrite#Everything_Handled_By_Index.php)。

至于 404，由于其他所有内容都转到 index.php，它应该由您的 PHP 代码返回。

# javascript - 如何在 html 中使用全局变量？

> ID：11582908
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:57:45.070
> 
> 标签：javascript, html, global-variables

我想知道为什么我找不到任何好的例子：在函数内部，person 是一个对象，并且有正确的值，而 selectedPerson 是一个全局变量。不要打扰 \-signs，这是让那些可见的方法。

```
document.getElementById(heading).innerHTML="<\p><\strong>" + selectedPerson.name+"<strong><\\p>"; 
```

这不起作用，在 html 中也没有：

```
<p>
     <strong>
        <script>document.write(selectedPerson.name);</script>
     </strong>
</p> 
```

* * *

```
var selectedPerson;
function person(extra){

var extra_array=extra.split(",");

this.name=extra_array[0];
this.head=extra_array[1];
this.gValue=extra_array[2];
this.weight=extra_array[3];
alert(extra_array[0]+" "+extra_array[1]+" "+extra_array[2] +" "+extra_array[3]);
//alert(this.name" "this.head+" "+extra_array[2] +" "+extra_array[3]); 
```

}

```
selectedPerson = new person(extra);
    console.log("**************************extra-------------->" +extra); 
```

问题是：如何在 HTML 中使用全局变量/对象？我想知道这两种方法是否有？警报在使用数组时有效，但不适用于 this.name 等。如何在 HTML 中使用语法 selectedPerson.name？

谢谢！萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:29:02.607

`new person()`您正在使用`extra`which is进行实例化`undefined`。

这将在您尝试时出错`split()`，并且`undefined`没有`split`方法。

因为对象将无法创建，所以`selectedPerson`也会如此。`undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:01:36.767

我认为您在声明之前使用全局变量进行编写。

在脚本文件的顶部使用声明

# security - 如何使用 JBoss 4 配置更强的密码加密？

> ID：11582911
> 
> 赞同：1
> 
> 时间：2012-07-20T15:57:50.053
> 
> 标签：security, encryption, jboss, passwords

据我了解，对于 JBoss 4.0.5，密码加密主要配置在 server/.../conf/login-config.xml 中：

```
 <authentication>
      <login-module code = "org.jboss.security.ClientLoginModule" flag = "required">
         <module-option name = "password-stacking">useFirstPass</module-option>
         <module-option name = "multi-threaded">true</module-option>
         <module-option name = "ignorePasswordCase">false</module-option>
         <module-option name = "hashAlgorithm">md5</module-option>
         <module-option name = "hashEncoding">hex</module-option>
         <module-option name = "hashCharset">UTF-8</module-option>
      </login-module>
   </authentication> 
```

是否可以配置比 md5 更强大的东西？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:18:32.917

如果您想要比 更好的安全性，您可以将 更改`hashAlgorithm`为。有关更多信息，请参阅[此帖子](http://docs.jboss.org/jbossas/jboss4guide/r5/html/ch8.chapter.html)（特别是第 8.5.3.2 节。密码哈希。`SHA``MD5`

**更新**

从链接的网站上，它说

> 用于散列密码的 java.security.MessageDigest 算法的名称。没有默认值，因此必须指定此选项才能启用散列。典型值为 MD5 和 SHA。

查看[java.security.MessageDigest](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html)类后，您似乎可以提供：

*   MD5
*   SHA-1
*   SHA-256

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:22:23.720

好的，看来我找到了最终答案。扩展例如`org.jboss.security.auth.spi.UsernamePasswordLoginModule`并覆盖

```
protected String createPasswordHash(String,String,String) 
```

使用您喜欢的任何算法来创建并返回哈希。该方法的第二个参数是要散列的密码。

然后将您的类设置到配置中（例如 login-config.xml）。请注意，配置（例如 login-config.xml）仍然需要指定算法。我刚刚放

```
<module-option name = "hashAlgorithm">FOO</module-option> 
```

那里。

重要提示：要确定密码是否有效，将对其进行哈希处理并与之前的哈希密码进行比较。这不适用于像 bcrypt 这样的算法，它带有自己的检查方法，因为通常在相同输入上的每个散列创建不同的盐，因此产生不同的散列。对于这些算法，您必须重写该`login()`方法。

# c# - MVC模型从jQuery post绑定一个字符串数组

> ID：11582914
> 
> 赞同：6
> 
> 时间：2012-07-20T15:58:11.670
> 
> 标签：c#, javascript, jquery, asp.net-mvc, model-binding

参数`string[] orderTypeNames`即将为空。

**mvc 动作**

```
public PartialViewResult EditMultipleOrderStates(
    string[] orderTypeNames,
    int[] orderIds) 
```

**javascript**

```
$('#edit-mulitple-order-states-button').click(function () {
    ids = [];
    types = [];
    $checked = $('.order-queue-order input:checked');
    $orders = $checked.closest('.order-queue-order');
    $orders.each(function (index, elem) {
        $order = $(elem);
        ids.push($order.attr("orderId"));
        types.push($order.attr("orderType"));
    });
    data = {
        orderIds: ids,
        orderTypeNames: types
    };
    $.post('EditMultipleOrderStates', data, function (response) {
        //...
    });
}); 
```

**提琴手**

![在此处输入图像描述](../Images/641123b0835b43ad1ecc9ed39ee94577.png)

```
orderIds%5B%5D=97&orderIds%5B%5D=98&orderIds%5B%5D=93&orderTypeNames%5B%5D=DeliveryOrder&orderTypeNames%5B%5D=DeliveryOrder&orderTypeNames%5B%5D=DeliveryOrder 
```

是引起问题的方括号吗？如何绑定到这些数组？

**编辑：**我同时手动构建查询字符串。

```
query = "";
for each...
query += "orderIds=" + $order.attr("orderId") + "&";
query += "orderTypeNames=" + $order.attr("orderType") + "&"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:04:03.723

您需要调用某种`JSON.stringify`数据。

```
 $.post('EditMultipleOrderStates', JSON.stringify(data), function (response) {
        //...
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:50:51.307

@本杰明。这是我所做的更详细的示例，它有效

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#btnTest').click(function() {

            var filter = {
                OrgId: 3,
                Drivers: [{ Name: "SGT-200" }, { Name: "SGT-100"}],
                DrivenUnits: [{ Name: "Generator" }],
                Regions: [{ Name: "REU" }],
                SearchString : "Test search string"
            };

            $.ajax(
                {
                    url: "/api/Dashboard/PostFilter",
                    type: "POST",
                    contentType: "application/json",
                    dataType: "json",
                    data: JSON.stringify(filter),
                    success: function(result) {
                        alert(result);
                    },
                    error: function(error) {

                        alert("There was an error posting the data to the server: " + error.responseText);

                    }
                });
        });
    });
</script> 
```

希望这可以帮助。

编辑：这里是匹配的 C# 对象

```
public class Filter
{
    public int OrgId { get; set; }
    public List<FilterData> Drivers { get; set; }
    public List<FilterData> DrivenUnits { get; set; }
    public List<FilterData> Regions { get; set; }
    public List<FilterData> Operations { get; set; }
    public List<FilterData> Connections { get; set; }
    public string SearchString { get; set; }
}

public class FilterData
{
    public string Type { get; set; }
    public string Name { get; set; }
    public int Count { get; set; }
} 
```

您所有的类型名称都需要匹配。下面是接收呼叫的代码

```
public IQueryable<DashboardData> Post(Filter filter) {
        using(_unitOfWork)
        {
            _dashboardRepository.UsingUnitOfWork(_unitOfWork);

            return FilterDashboardData(_dashboardRepository.GetDashboardData(filter.OrgId), filter);
        }
    } 
```

# python - 可扩展的 wxwidgets

> ID：11582916
> 
> 赞同：0
> 
> 时间：2012-07-20T15:58:18.693
> 
> 标签：python, wxpython

如果可以创建可扩展的布局，我正在考虑。这将是：一个程序或套件，您无需更改基本源代码即可添加按钮或文本字段，而是将它们添加到您自己的文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:18:19.413

您可以从 XML-Resources 构建您的 GUI：

*   [http://www.blog.pythonlibrary.org/2010/05/11/wxpython-an-introduction-to-xrc/](http://www.blog.pythonlibrary.org/2010/05/11/wxpython-an-introduction-to-xrc/)
*   [http://wiki.wxpython.org/XRCTutorial](http://wiki.wxpython.org/XRCTutorial)
*   [http://wiki.wxpython.org/UsingXmlResources](http://wiki.wxpython.org/UsingXmlResources)

例如，您可以使用[wxGlade](http://wxglade.sourceforge.net/)来生成这些 XML 文件。

# java - 如何在eclipse中使用链接源？

> ID：11582919
> 
> 赞同：0
> 
> 时间：2012-07-20T15:58:28.313
> 
> 标签：java, android, eclipse

我有 Android 和纯 Java 项目。我想在 Android 中使用纯 java 项目中的代码 - 我应该如何使用链接源选项来执行此操作？我不希望 java 构建路径中的“项目”选项卡，因为它有时不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:01:30.840

选择一：

1.  将您的 java 导出到 .jar 文件。
2.  用eclipse将.jar文件复制到android项目下的libs文件夹下。

选择二：只需将代码复制到您的 android 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:17:57.033

使用[库项目](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)。使用源代码在eclipse中创建一个Android项目。将其标记为库项目，其他 Android 项目将能够将该库项目添加到它们的依赖项中。

# jquery - 如何在使用 jquery 加载方法加载之前检查文件是否为空？

> ID：11582920
> 
> 赞同：0
> 
> 时间：2012-07-20T15:58:30.367
> 
> 标签：jquery, ajax

如果尝试将空加载到 html ul 列表中，性能确实很慢，但是当加载相同的文件但有数据时，使用相同的逻辑，没有性能问题，我可以毫无延迟地单击网页上的任何按钮。

我能想出的最佳解决方案是如何在加载文件之前检查文件是否为空。

```
 $("#logList").load("logFile", function(response, status, xhr)
          {
                  if(status == "error")
                  {
                      xhr.abort();
                  }

          }); 
```

# php - 我如何知道在 PHP 中的服务器上是否打开或关闭了 eTag？

> ID：11582923
> 
> 赞同：0
> 
> 时间：2012-07-20T15:58:45.900
> 
> 标签：php, http-headers, etag

形成这个问题（[ETag vs Header Expires](https://stackoverflow.com/questions/499966/etag-vs-header-expires)）我知道我需要 Expire 标头和 eTag 标头，因为它们有两个不同的目的。因为我正在开发一个 Wordpress 插件，所以我不知道如何配置服务器，所以我想知道如何检查 eTags 是否打开。我可以

```
header( 'Content-Type: text/css' );

// Aggressive caching to save future requests from the same client.
$etag = '"' . md5( __FILE__ . $_GET['my-css-var'] ) . '"';

header( 'ETag: ' . $etag );
header( 'Expires: ' . gmdate( 'D, d M Y H:i:s', time() + 31536000 ) . ' GMT' );
header( 'Cache-Control: public, max-age=31536000' );

if ( empty( $_SERVER['HTTP_IF_NONE_MATCH'] ) || $etag != stripslashes( $_SERVER['HTTP_IF_NONE_MATCH'] ) ) {
// return the CSS
} else {
    // Not modified!
    status_header( 304 );
} 
```

这将在 Etag 关闭和 Etag 开启的情况下工作，或者如果 ETag 关闭会导致一些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:01:13.240

The web server does not need to have Etag handling turned on for your custom header to work. It will still be sent to the client.

If your server has Etags turned off, the web server will not generate Etags for static files, i.e .jpg, .css, .js.

In Apache you can unset Etags with the following config:

```
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>

FileETag None 
```

Since this is specific for Apache, and other web servers have different syntax, its a hard thing to check for in your script. But if it is set, it will remove your custom set Etag.

This is not default in Apache though.

To answer your question, no you cant check if Etags is on. But for your purpose I would not worry.

# javascript - 更改类名ie8

> ID：11582925
> 
> 赞同：3
> 
> 时间：2012-07-20T15:58:55.553
> 
> 标签：javascript, html, css, internet-explorer, internet-explorer-8

我在使用 Javascript 更改 div 元素的类时遇到了一些麻烦。我目前使用的方法（参见下面的代码）适用于 Chrome 和 Firefox，但不适用于 IE8（我没有测试过 IE9，但假设它已经可以工作，或者一旦 ie8 可以工作）。

奇怪的是，在 ie8 中，当我更改输入元素的类时，它可以工作。但改变一个 div 的类什么都不做（类根本没有改变）

JavaScript

```
function switchTab(tab, button) {
    var divs = document.getElementsByName("tab-content");
    var d;
    for (counter=0; counter<divs.length; counter++) {
      d = divs[counter];
      if (d.id == tab)
        d.className = "members";
      else
        d.className = "members-hidden";
    }
    var buttons = document.getElementsByName("button");
    var bu;
    for (counter=0; counter<buttons.length; counter++) {
      bu = buttons[counter];
      if (bu.id == button)
        bu.className = "tab-active";
      else
        bu.className = "tab";
    }
    return false; 
```

}

相关的 HTML 片段

```
<div id="nav">
<ul class="membernav">
   <li><input id="ob" type="button" class="tab-active" name="button" onclick="return switchTab('officers', 'ob')" value="Officers"></li>
   <li><input id="pb" type="button" class="tab" name="button" onclick="return switchTab('partners', 'pb')" value="Partners"></li>
   <li><input id="mb" type="button" class="tab" name="button" onclick="return switchTab('managers', 'mb')" value="Managers"></li>
   <li><input id="ab" type="button" class="tab" name="button" onclick="return switchTab('associates', 'ab')" value="Associates"></li>
</ul>
</div> 
```

并在 HTML 中进一步向下

```
<div id="tab-contents">
<div class="members" name="tab-content" id="officers">
   <!-- irrelevant content removed to save space -->
</div>

<div class="members-hidden" name="tab-content" id="partners">
  <!-- irrelevant content removed to save space -->
</div>

<div class="members-hidden" name="tab-content" id="managers">
   <!-- irrelevant content removed to save space -->
</div>

<div class="members-hidden" name="tab-content" id="associates">
   <!-- irrelevant content removed to save space -->
</div>
</div> 
```

按钮上的类已成功切换到/从选项卡和选项卡激活。

但是 div 不会从成员更改为成员隐藏。

我犯了一些愚蠢的错误吗？因为我都以同样的方式改变，为什么一个工作而另一个坏了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:19:07.510

这篇文章回答了你的问题：[getElementsByName in IE7](https://stackoverflow.com/questions/278719/getelementsbyname-in-ie7)

总结一下：默认情况下，IE 不支持按名称获取不支持 name 属性的元素。这就是为什么您的标准表单输入字段可以工作，但 div 不能工作的原因。

# php - php中的正则表达式错误

> ID：11582932
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:59:12.527
> 
> 标签：php, regex

我在 php 上使用以下正则表达式来验证日期：

```
if(!preg_match("/^(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/([12][0-9]{3})$/i",$date_born)){ 
```

但是我得到了以下错误，不知道为什么，我总是使用“（”和 Reg Exps。

> [function.preg-match]: 未知修饰符 '('

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T16:01:13.773

您的模式中有许多未转义`/`的内容：

```
if(!preg_match("/^(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[01etc...
                                           ^--- 
```

最简单的是切换到另一个分隔符：

```
if(!preg_match("#^(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[01etc...
                ^---- 
```

或逃避所有内部`/`：

```
if(!preg_match("/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[01 etc...
                                           ^^--- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:01:00.127

您的正则表达式中有分隔符`/`。您需要使用`\/`（或更改您的分隔符，正如 Marc B 指出的那样）来转义它。

```
if( !preg_match("/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/([12][0-9]{3})$/i",$date_born)){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:00:53.663

你没有在你的正则表达式中转义你的正斜杠，所以解释器只读取你的第二个正斜杠并假设其余的都是修饰符。由于`(`不存在修饰符，因此正则表达式会中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:06:53.833

为什么要用正则表达式让自己变得困难 - 改用[strptime](http://www.php.net/manual/en/function.strptime.php)。

# ruby-on-rails - yaml 文件中的新行“\n”

> ID：11582934
> 
> 赞同：10
> 
> 时间：2012-07-20T15:59:22.540
> 
> 标签：ruby-on-rails, yaml

我想这样做

```
test: >
  This is a long string
  \n\n\n
  with new lines 
```

但它会打印出“\n”而不是换行。

我知道这是可能的

```
test: "This is a long string
      \n\n\n
      with new lines" 
```

但如果可能的话，我宁愿不要在任何地方添加引号。谢谢您的帮助！

编辑：我宁愿不使用空行。换句话说，我想使用 \n 来显示空行以使我的 yml 文件更具可读性。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T16:45:01.737

尝试这个

```
test: |+
  This is a long string

  with new lines 
```

| 后键有助于缩进多行文本的开头并保持长字符串的缩进。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T16:08:32.470

你可以这样做 ：

```
test: >+
  This is a long string

  with new lines 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2021-01-07T15:19:38.240

要在 yaml 中打印新行，您可以执行以下代码 我正在使用 degub 模块 msg func 像这样

```
debug:
   msg:
     - 'hello'
     - 'name' 
```

# android - 我从未修改过的文件中的 Git 合并冲突

> ID：11582935
> 
> 赞同：0
> 
> 时间：2012-07-20T15:59:24.097
> 
> 标签：android, git, android-source, git-merge, git-rebase

过去几周我一直在研究 Android 源代码。

在平台/构建存储库中，我检查了 android-4.0.4_r2.1 标记。这成了我的“ics”分支。现在，当针对 android-4.1.1_r1 标记进行合并或变基时，我在从未编辑过的文件中遇到合并冲突。

这些是有问题的存储库（和标签）：

[https://android.googlesource.com/platform/build/+/android-4.0.4_r2.1](https://android.googlesource.com/platform/build/+/android-4.0.4_r2.1)

[https://android.googlesource.com/platform/build/+/android-4.1.1_r1](https://android.googlesource.com/platform/build/+/android-4.1.1_r1)

这是从第一个标签分叉的分支，我试图将后一个标签合并到：

[https://github.com/slimdroid/platform_build/commits/ics](https://github.com/slimdroid/platform_build/commits/ics)

我完全不知道是什么原因造成的。我不是 git 的初学者，但我不明白当应该有一个共同的基础时，我如何不能在不冲突的情况下合并这个标签。

有关信息，我的冲突在 core/build_id.mk 中指定 BUILD_ID 的行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:39:22.460

我将在这里复制 Jean-Baptiste 的回答，他是为 Google 做 AOSP 的人：

> 你没有做错什么。
> 
> 您所看到的是 Google 内部开发过程的产物。
> 
> 在某个时候，当我们准备 Jelly Bean 的第一个版本时，ICS 脱离了 Google 的主要合并流程。尽管如此，仍然有一点 ICS 活动，在 git 级别并没有合并到 Jelly Bean 中。这就是您在此处看到的：最新版本的 ICS 中有一些更改不在 Jelly Bean 中，而尝试将最新的 ICS 重新定位到 Jelly Bean 上会使这些更改脱颖而出。
> 
> 检查“repo forall platform/build -c git log android-4.1.1_r1..android-4.0.4_r2.1” - 这会发现让你感到惊讶的提交。
> 
> JBQ

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:16:25.237

我在 git 方面并不先进，所以我在这里可能完全错了。但我理解你的假设是第一个标签指向的提交是另一个标签的祖先。只有在这种情况下，您才能保证它们之间不会发生合并冲突。

您可以通过执行[`git merge-base first-tag second-tag`](http://csurs.csr.uky.edu/cgi-bin/man/man2html?1%20git-merge-base).

# websphere - WebSphere Application Server 7 中的数据源连接失败：错误代码 = 17,433

> ID：11582937
> 
> 赞同：0
> 
> 时间：2012-07-20T15:59:34.153
> 
> 标签：websphere, datasource, ws-security, websphere-7

我正在尝试在 WAS 7 中配置数据源并面临下面提到的错误。

错误：

```
Messages
The test connection operation failed for data source APDataSource on server adminagent at node appsrv01 with the following exception: java.sql.SQLException: invalid arguments in callDSRA0010E: SQL State = null, Error Code = 17,433\. View JVM logs for further details. 
```

JVM日志：

```
Error Message: javax.servlet.jsp.JspException: Cannot find bean com.ibm.ws.console.probdetermination.form.StreamRedirectDetailForm in any scope
Error Code: 500
Target Servlet: null
Error Stack:
javax.servlet.jsp.JspException: Cannot find bean com.ibm.ws.console.probdetermination.form.StreamRedirectDetailForm in any scope
     at org.apache.struts.util.RequestUtils.lookup(Unknown Source)
     at org.apache.struts.taglib.bean.DefineTag.doEndTag(Unknown Source)
     at _ibmjsp.secure.layouts._detailTitleLayout._jspService(_detailTitleLayout.java:365)
     at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:98)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
     at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
     at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
     at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:239)
     at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:673)
     at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:1045)
     at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:527)
     at org.apache.struts.tiles.TilesUtilImpl.doInclude(Unknown Source)
     at org.apache.struts.tiles.TilesUtil.doInclude(Unknown Source)
     at org.apache.struts.taglib.tiles.InsertTag.doInclude(Unknown Source)
     at org.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(Unknown Source)
     at org.apache.struts.taglib.tiles.InsertTag.doEndTag(Unknown Source)
     at _ibmjsp.secure.layouts._configboxLayout._jspService(_configboxLayout.java:343)
     at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:98)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
     at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
     at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
     at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:239)
     at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:341)
     at org.apache.struts.action.RequestProcessor.doForward(Unknown Source)
     at org.apache.struts.tiles.TilesRequestProcessor.doForward(Unknown Source)
     at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(Unknown Source)
     at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(Unknown Source)
     at com.ibm.isclite.container.controller.InformationController.processForwardConfig(InformationController.java:217)
     at org.apache.struts.action.RequestProcessor.process(Unknown Source)
     at org.apache.struts.action.ActionServlet.process(Unknown Source)
     at org.apache.struts.action.ActionServlet.doGet(Unknown Source)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
     at com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistence(WSCUrlFilter.java:927)
     at com.ibm.ws.console.core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:494)
     at com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:315)
     at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
     at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
     at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
     at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3826)
     at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:288)
     at com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1016)
     at com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyReadCompletedCallback.complete(SSLConnectionLink.java:639)
     at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1772)
     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550) 
```

我遵循的步骤：

1.  全局安全中配置的别名

全局安全 > JAAS - J2C 认证数据 > appsrv01/APDataSource

1.  在数据源 > 安全设置

    从下拉框中选择 appsrv01/APDataSource

2.  测试连接

    错误代码：17,433

参考：[IBM DEVELOPER WORKS](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/tdat_tccrtprovds.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:48:48.227

使用的数据库是什么？

该数据库供应商的错误代码 - **17,433**代表什么？

*堆栈没有显示任何涉及的 SQL*，但错误消息是**SQLException**？您的日志中是否存在此处未显示的内容？

查看***SysOut***和***SysErr***以了解 SQLException 堆栈的放置位置并将它们粘贴到此处以供人们查看和帮助。

高温高压

# javascript - JavaScript SDK 事件不会触发

> ID：11582939
> 
> 赞同：0
> 
> 时间：2012-07-20T15:59:39.100
> 
> 标签：javascript, facebook, events, sdk

我正在使用 JS SDK 绑定到 facebook。初始化（FB.init()）后，我看到了登录按钮。点击它后，它提示我登录。然后，尽管我使用 FB.Event.subscribe() 将处理程序添加到 auth.login 事件，但在我登录后对话框就消失了。

请注意，我使用 html 中的标记包含 Facebook all.js 文件，该标记在此代码之前处理。

这是我的代码：

```
FB.init({

                            appId:myId,
                            channelUrl:myChannelUrl,
                            cookie:true,
                            status:true,
                            xfbml:true
                     });
            FB.Event.subscribe('auth.login',function(response) {
                            alert("your event finally fired!!!");
            });
            FB.Event.subscribe('auth.logout',function(){
                    alert("you logged out");
            }); 
```

* * *

现在，当我登录或注销时，什么都没有发生。facebook 对话框就这样消失了。如果我故意使用不正确的凭据尝试登录，对话框会正确拒绝该尝试，这证明该事物确实在与 facebook 通信。问题似乎是事件没有触发。

感谢您在这里的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:19:51.023

请订阅此活动。

```
FB.Event.subscribe('auth.statusChange', handleStatusChange); 
```

在你的 javascript 中，

```
function handleStatusChange(response) {
if(response.authResponse ==  'connected')
//do something
else
//do something else
} 
```

参考： http: [//www.facebookmobileweb.com/hello/](http://www.facebookmobileweb.com/hello/)

# html - 使用 html onclick() 时如何运行 phtml 脚本

> ID：11582940
> 
> 赞同：0
> 
> 时间：2012-07-20T15:59:40.257
> 
> 标签：html, zend-framework, php

我有一个主 phtml 脚本，当用户单击主脚本中的提交按钮时，我希望能够运行另一个 phtml 脚本。（这一切都是使用 php 和 html 完成的）目前这就是我正在做的事情。

```
<input id="submit" type="submit" name="submit" value="Submit" onclick="self.location.href='another.phtml'"/> 
```

当我运行它时，它会加载页面，但实际上不会执行脚本中的任何内容。而且我确实知道它有效，因为我能够在使用以下命令调用它时成功执行它：

```
<a href="another.phtml">Click Here</a> 
```

我还尝试创建一个额外的 php 脚本，并使用 include 来包含额外的 phtml 文件，然后用上面相同的方法调用它。

我也尝试过使用 javascript（参见示例：[当用户单击链接时如何运行 PHP 代码？](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)）

还有其他方法可以做到这一点吗？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:23:00.617

创建一个动作并在该动作中使用此（another.phtml）视图，您可以使用[View Renderer action helper](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.viewrenderer)在动作内设置视图文件。在单击链接时发出请求（或者，用您的话来说，运行脚本）是使用 Ajax 完成的。它在互联网上的覆盖范围非常广泛，因此我不会详细介绍。

在 Zend Framework 中，phtml 文件是视图文件：它们应该只是打印变量值、打印 HTML 标记等。而且其中的 PHP 代码量非常少：循环等，正是您需要打印的东西。并且在其中发出数据库请求或任何其他类型的业务逻辑被认为是糟糕的设计，糟糕的逻辑分离。它们不打算在控制器之外运行，独立运行。

希望它有所帮助，如果我误解了什么，请告诉我。

# javascript - 使用 javascript 显示/隐藏按钮

> ID：11582941
> 
> 赞同：0
> 
> 时间：2012-07-20T15:59:45.557
> 
> 标签：javascript, jquery, button

我想通过使用下面的javascript在“.widget”中显示/隐藏类“.edit-one-button”的按钮。但是，当我第一次加载页面时，该按钮并未隐藏。知道可能出了什么问题吗？

```
<script type="text/javascript">
    $(function () {
      $('.edit-one-button').hide();  
      $('.widget').hover(function () {
        $(this).find('.edit-one-button').fadeIn(100);
      }, function () {
        $(this).find('.edit-one-button').fadeOut(100);
      });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:00:54.803

您还可以反转代码，因此`.edit-one-button`具有 display:none 的内联样式，然后在 css 中添加一个类似于`.active`on hover的类`display:block`，而不是使用 javascript 在加载时隐藏。

```
.edit-one-button {
  display:none;
}

$(function () { 
  $('.widget').hover(function () {
    $('.widget .edit-one-button').fadeIn(100);
  }, function () {
    $('.widget .edit-one-button').fadeOut(100);
  });
}); 
```

# c++ - 错误：mclmcr.h：没有这样的文件或目录从 C 调用 matlab 函数

> ID：11582950
> 
> 赞同：1
> 
> 时间：2012-07-20T16:00:17.517
> 
> 标签：c++, matlab, matlab-deployment, matlab-compiler

我正在尝试使用 C++ 中的 Matlab 用户定义函数。我使用以下命令创建了库。

mcc -B csharedlib:libMyLib myFunction.m

它不会创建 mclmcr.h 和 libmwmclmcrrt.so。我想知道它是运行时库的一部分吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:49:35.653

根据[文档](http://www.mathworks.com/help/compiler/c-shared-library-target.html#bsic1of-1)：

> MATLAB Compiler 和相关构建器产品生成的所有应用程序和软件组件只需链接到一个 MathWorks 库 mclmcrrtxx.lib

.lib 和相应的头文件可以在 中找到`$matlabroot/extern`，而 .dll/.so 共享库可以在`$matlabroot/runtime/$arch`（或在 MCR 安装中）找到

MATLAB 有一个方便的功能[`mbuild`](http://www.mathworks.com/help/compiler/mbuild.html)（您必须使用 设置一次`mbuild -setup`）。[`mbuild`](http://www.mathworks.com/help/compiler/c-shared-library-target.html#f2-1005105)知道如何使用正确的开关调用 C/C++ 编译器，以便编译器可以找到所需的包含文件和库。您可以使用它`mbuild`来创建自己的可执行文件并将它们与 MATLAB 编译器生成的共享库链接。

例如，它会在 MATLAB 中被调用为：

```
>> mbuild testProgram.c -I./distrib -L./distrib -llibMylib 
```

构建一个链接到您使用 MATLAB 编译器生成的 C 共享库的程序，其中`distrib`目录包含这些生成的文件。

其他一些参考资料：

*   [为开发和测试设置 MCR 路径](http://www.mathworks.com/help/compiler/mcr-path-settings-for-development-and-testing.html)
*   [为运行时部署设置 MCR 路径](http://www.mathworks.com/help/compiler/mcr-path-settings-for-run-time-deployment.html)

# c++ - “not, and, or, not_eq..” 是 C++ 标准的一部分吗？（为什么它们会在代码中被使用或避免？）

> ID：11582955
> 
> 赞同：6
> 
> 时间：2012-07-20T16:00:32.193
> 
> 标签：c++, syntax

所以看起来所有这些：[http](http://www.cplusplus.com/reference/clibrary/ciso646/) ://www.cplusplus.com/reference/clibrary/ciso646/是 c++ 中的关键字。

我的问题是。这是 c++ 标准的一部分吗？

我可以依靠它来获得主要编译器的支持吗？我知道 gcc 确实支持这些关键字。

最后，也许这更像是一个偏好或风格问题，但是使用关键字比标准运算符（！、！=、&& ...等）有什么优势吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T16:04:10.907

> 我的问题是。这是 c++ 标准的一部分吗？

是的。

> 我可以依靠它来获得主要编译器的支持吗？

是的。但是默认情况下 MSVC 不支持此功能，您需要[将选项传递给它`/permissive-`](https://blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch/)（或者，尽管这是错误且过时的[`/Za`](https://msdn.microsoft.com/en-us/library/0k0w269d.aspx)），它会禁用 Microsoft 语言扩展。无论如何，为几乎所有 C++ 项目启用此选项似乎是个好主意，可惜默认情况下它是关闭的。

> 但是与标准运算符相比，使用关键字有什么好处吗

一般来说，没有。但是在 , , 的情况下，`and`许多（尽管可能不是大多数）人发现它更具可读性。我个人建议使用它们。`or``not`

如果您绝对希望代码在没有`/permissive-`标志的情况下在 MSVC 上编译`#include <ciso646>`（这是一个标准头文件，在符合 C++ 实现时为空，但为 MSVC 上的运算符添加了宏）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T16:01:41.130

> 这是 c++ 标准的一部分吗？

是的。请参见 [lex.digraph] 部分中的表格。

> 与标准运算符相比，使用关键字有什么优势吗？

我的理解是，引入了原始的二合字母（`<%`而不是`{`等）是为了让使用简单键盘的人能够编写 C 代码（[维基百科证实了这一点](http://en.wikipedia.org/wiki/Digraph_%28computing%29)）。也许同样的理由也适用于`not_eq`等。但是 AFAIK，现在没有充分的理由编写这样的东西（除非你在智能手机上编码），尤其是因为 99% 的程序员不知道它是有效的 C++！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T16:02:44.767

是的，它们受支持。

就您问题的后半部分而言，它们可以产生更具可读性的代码，尤其是在同时处理按位运算符和逻辑运算时，例如：

```
if( a & 1 == 0 || c | a == 2 ); 
```

对比

```
if( a & 1 == 0 or c | a == 2 ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T16:14:52.663

它们在标准中，但支持有些不平衡。有经验的程序员发现它们的可读性不如通常的符号（`||`, `&&`,`!=`等），因此除非您只想对不支持它们的编译器供应商发表政治声明，否则最好避免使用它们。

至少在我看来，它们的定义也很差。特别是，它们是根据令牌定义的，而不是逻辑。他们发明替代标记（trigraphs、digraphs 和这些东西）的真正原因是允许在不支持该语言使用的特殊字符的古代终端上使用该语言。添加这些是为了稍微不那么烦人的三字母和有向字母。我猜他们在这方面取得了成功，但他们仍然只是稍微不那么烦人，而不是任何应该选择使用的东西。

让我们考虑几个例子。如果您真的在那些古老的终端之一上，并且您想编写通过引用传递参数的代码代码，您该怎么做？

```
void foo(T bitand param); 
```

从那里，很明显你将如何通过右值引用传递一个值：

```
void foo(T and param); 
```

`T& param`愚蠢而丑陋，但我想至少它解决了关于vs -- 的古老争论，`T &param`你`bitand`需要在两边留出空格。作为回报，它具有误导性、混淆性和不可读性。

哦，请注意不要将其拼写为`bit_and`而不是`bitand`. 还有一个名为`bit_and`的东西，但它完全不同——它`bitand`是一个预处理器标记，而`bit_and`它是一个定义在`<functional>`. 使用错误的可能会导致一些相当混乱的编译器错误。

也就是说，我可以想到一种情况，其中`and`,`bitand`等可能是合理的。如果（无论出于何种原因）您无法输入代码，而不得不使用听写软件，那么让听写软件输入可能`and`比`&&`. 区分`bitand`和可能更困难`bit_and`，但后者很少使用，可能不是什么大问题。

**概括**

对于少数人来说，使用公认的符号输入代码确实很困难，因此他们可以合理地使用基于单词的标记。

For anybody else, even if they personally find `and` more readable than `&&`, inflicting such code on others would be about like if I decided to name an addition function `biggerate`, because I thought that was a cute name for addition when I was five years old. So, if you like them and you're writing code that you're absolutely, positively certain that nobody else will ever read, sure go ahead and have a blast. Otherwise, using them is a poor idea.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-20T16:07:11.460

微软的编译器不支持它们。您可以在[此处查看关键字列表](http://msdn.microsoft.com/en-us/library/2e6a4at9%28v=vs.80%29.aspx)。

这只是风格的问题（也许像一些读者坚持的那样提高了可读性）。就个人而言，我看不出用它们代替 && 和 || 有什么好处。等等

# c - strpbrk 函数 - C

> ID：11582956
> 
> 赞同：-1
> 
> 时间：2012-07-20T16:00:32.790
> 
> 标签：c, string

我试图从给定字符的出现中断开一个字符串。我正在使用 strpbrk 函数。但我得到这个错误

```
21 G:\My Programs\C\horse.cpp invalid conversion from `char' to `const char*' 
```

我使用的代码如下

```
char horses[100], h[1];

 char *brokenstring;

 h[0] = 'H';

 brokenstring = strpbrk (horses,h[0]); 
```

我在使用 strpbrk 函数的行中收到此错误。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:05:53.060

您需要将 const char * 传递给 strpbrk() 的第二个参数，并且还需要用 null 终止字符串。

```
int main( int argc, char ** argv ) {    

 char horses[100], h[2];
 char *brokenstring;

 h[0] = 'H';
 h[1]=0;   
 brokenstring = strpbrk (horses,h);
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:03:15.907

strpbrk 的第二个参数必须是字符串，而不是字符。

不清楚你想做什么；你确定你不需要，例如，strtok()？

如果您有多个可能的分隔字符（例如 H、Y 和 K——然后您传递“HYK”），则 strpbrk() 很有用。否则 strchr() 会更好地为您服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:03:30.917

您将 strpbrk 的第二个参数传递给一个字符，而不是一个指向字符的指针。

你需要调用 strpbrk (horses, h)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T16:07:03.143

查看[http://www.cplusplus.com/reference/clibrary/cstring/strpbrk/](http://www.cplusplus.com/reference/clibrary/cstring/strpbrk/)我看到函数看起来像这样

```
char * strpbrk ( const char *, const char * ); 
```

但是你正在通过它马和`h[0]`。`h[0]`不是一个`char *`，它实际上是一个`char`。如果你只是通过它，`h`你会没事的。

编辑：正如其他人所说，您实际上需要确保您以 null 终止 h。

# c# - 使用 c# 实时检查主板传感器数据

> ID：11582958
> 
> 赞同：0
> 
> 时间：2012-07-20T16:00:42.173
> 
> 标签：c#, cpu, sensors, temperature, motherboard

我一直在寻找一种解决方案来实时检查来自主板传感器的风扇速度和温度数据。

WMI 似乎只给你一个永远不会更新的读物，而且每个人似乎都在说要使用 Open Hardware Monitor，但文档很糟糕，我无法让 .dll 在 C# 中正常工作。

不要在你准备好覆盖实现的情况下建议打开硬件监视器。必须有可靠的方法来做到这一点。

如果有帮助，我最终会将其作为脚本统一运行。我只能使用适用于 .Net 2.0 或更低版本的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:17:00.807

“硬件 <-> 驱动程序 <-> 监控软件”堆栈中的健康报告没有标准化，而 C# 是一种非常不寻常的语言来编写硬件健康信息，因此您的选择将非常有限。抱歉，OHM 可能是您最好的选择...

# android - 加载后是否可以推迟垃圾收集

> ID：11582961
> 
> 赞同：4
> 
> 时间：2012-07-20T16:00:52.833
> 
> 标签：android, jpct

我正在将 3d 模型（1MB - 10MB）加载到内存中，这需要很长时间（1.5MB 模型需要 20 秒）。当我查看日志时，我看到垃圾收集器不断释放内存并暂停。有关日志，请参见下文：

```
07-20 17:37:25.340: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 8% free 79443K/85575K, paused 86ms
07-20 17:37:25.350: I/dalvikvm-heap(2826): Grow heap (frag case) to 78.511MB for 852408-byte allocation
07-20 17:37:25.450: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 8% free 80275K/86471K, paused 95ms
07-20 17:37:25.550: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 8% free 80275K/86471K, paused 85ms
07-20 17:37:25.550: I/dalvikvm-heap(2826): Grow heap (frag case) to 79.325MB for 852408-byte allocation
07-20 17:37:25.660: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 8% free 81108K/87367K, paused 96ms
07-20 17:37:25.760: D/dalvikvm(2826): GC_FOR_ALLOC freed 0K, 8% free 81108K/87367K, paused 87ms
07-20 17:37:25.760: I/dalvikvm-heap(2826): Grow heap (frag case) to 80.137MB for 852408-byte allocation
07-20 17:37:25.870: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 8% free 81940K/88263K, paused 98ms
07-20 17:37:26.060: D/dalvikvm(2826): GC_CONCURRENT freed <1K, 5% free 83988K/88263K, paused 3ms+12ms
07-20 17:37:26.200: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 5% free 84715K/88263K, paused 120ms
07-20 17:37:26.200: I/dalvikvm-heap(2826): Grow heap (frag case) to 83.660MB for 852312-byte allocation
07-20 17:37:26.310: D/dalvikvm(2826): GC_FOR_ALLOC freed 0K, 5% free 85547K/89159K, paused 102ms
07-20 17:37:26.420: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 5% free 85547K/89159K, paused 95ms
07-20 17:37:26.420: I/dalvikvm-heap(2826): Grow heap (frag case) to 84.473MB for 852312-byte allocation
07-20 17:37:26.520: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 5% free 86379K/90055K, paused 105ms
07-20 17:37:26.640: D/dalvikvm(2826): GC_FOR_ALLOC freed <1K, 4% free 87212K/90055K, paused 117ms
07-20 17:37:26.650: I/dalvikvm-heap(2826): Grow heap (frag case) to 86.098MB for 852312-byte allocation
... 
```

是否可以将垃圾收集推迟到加载模型之后。也欢迎任何其他性能提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:11:47.547

不，您不能推迟垃圾收集或以任何其他方式控制它。

但是您可以使用`Allocation Tracker`DDMS 来查找您正在创建新对象的确切位置。尝试重用相同的对象和缓冲区，避免自动装箱等。[这篇](http://www.curious-creature.org/2009/02/07/track-memory-allocations-on-android/)关于使用的文章`Allocation Tracker`可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:11:33.987

不。

无论如何，如果您在日志中注意到，VM 正在为内存而苦苦挣扎。它有大约 5% 的免费。它*必须*执行 GC 才能继续运行您的应用程序。

此外，如果可以的话，你不想这样做。几十年来，聪明的人已经开发出最佳的垃圾收集算法。不要对我比他们聪明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T23:30:01.177

不，这是不可能的，虚拟机处理这个并且它是不可更改的。但是为了加快加载模型的速度，您可以考虑使用序列化对象而不是 .3ds/.obj/... 文件。它们将加载更快并使用更少的内存。

查看有关 jpct 和序列化对象的[wiki 。](http://www.jpct.net/wiki/index.php/Differences_between_jPCT_and_jPCT-AE#Performance_and_memory_issues.2C_serialized_objects)

# spring - Spring 3 IOC 注释

> ID：11582976
> 
> 赞同：0
> 
> 时间：2012-07-20T16:01:31.070
> 
> 标签：spring, autowired

我有以下包层次结构
-org.bmark
  --dao
   --- implementations
   --- interfaces
  --services
   --- implementations
   --- interfaces
这是我的 web.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/ApplicationContext.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
      <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

这是我的 ApplicationContext.xml 的一部分

```
<context:annotation-config/>
<context:component-scan base-package="org.bmark.dao"/>
<context:component-scan base-package="org.bmark.services"/> 
```

我有一个 UserDAO 和一个 ContentTypeDAO（两者都有实现）。我还有一个 UserService 和一个 ContentTypeService （两者都有实现）。服务类具有 @Service 注释。
UserDAO 是 @Autowired 到 UserServiceImpl 的实现中，一切正常。问题是 ContentTypeDAO 也是 @Autowired 到 ContentTypeServiceImpl 但是当我启动服务器时，我得到了这个异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contentTypeServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.bmark.dao.intefaces.ContentTypeDAO org.bmark.services.implementations.ContentTypeServiceImpl.contentTypeDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.bmark.dao.intefaces.ContentTypeDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}<br/>
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.bmark.dao.intefaces.ContentTypeDAO org.bmark.services.implementations.ContentTypeServiceImpl.contentTypeDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.bmark.dao.intefaces.ContentTypeDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}<br/>
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.bmark.dao.intefaces.ContentTypeDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

为什么我的 ContentTypeDAO 出现此异常，而我的 UserDAO 却没有？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:01:37.993

尝试更换

```
<context:component-scan base-package="org.bmark.dao"/>
<context:component-scan base-package="org.bmark.services"/> 
```

和

```
<context:component-scan base-package="org.bmark.dao, org.bmark.services"/> 
```

我不完全确定上下文是否支持多个`component-scan`定义，或者一个定义是否覆盖另一个。

# javascript - 从表单中删除输入后提交失败（在 Firefox 中）

> ID：11582981
> 
> 赞同：3
> 
> 时间：2012-07-20T16:01:45.080
> 
> 标签：javascript, jquery, file-upload

编辑：我简化了使用文本输入的示例。同样的错误。从表单中删除输入时，表单无法提交。编辑：在 Firefox 14 中重复。Chrome 没有相同的行为。

我有一个带有 jquery 的多文件上传表单，可以在表单中添加和删除文件输入元素。如果我删除其中一个输入，则 form.submit() 函数不会继续。下面是使用“文本”输入的简化代码。还有一个小提琴[http://jsfiddle.net/carbontax/rMmuE/](http://jsfiddle.net/carbontax/rMMuE/)

```
 <form id="form-foo" method="POST">
        <div id="input-container-container">
       </div>
    </form>
    <input type="button" id="add-text-input" value="ADD TEXT INPUT">
    <input type="button" id="submit" value="SUBMIT"> 
```

脚本

```
 $('#submit').click(function() {
        $('#form-foo').submit();
    });

    $("#add-text-input").click(function() {
        var div = $('<div/>', {
            'class': 'input-container'
        }).append($('<button/>', {
            'class': 'delete-text-input',
            html: "X"
        }));
        var input = $('<input/>', {
            type: 'text',
            name: 'texts',
            'class': 'input-text'
        }).appendTo(div);
        div.appendTo($('#input-container-container'));
    });

    $('#form-foo').on('click', 'button.delete-text-input', function(e) {
        e.preventDefault();
        $(this).closest('div').remove();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:37:25.683

Satya Teja 有一个有用的建议，将提交按钮放在表单中，但我不知道它为什么会起作用。就我而言，我需要根据另一个事件的结果间接提交表单。所以这是解决方案。

HTML：在表单内添加一个隐藏的提交按钮

```
 <form id="form-foo" method="POST">
        <div id="input-container-container">
       </div>
       <!-- workaround to allow submit after deleting a form element -->
       <input type="submit" id="form-foo-submit" style="display: none"/>
    </form>
    <input type="button" id="add-text-input" value="ADD TEXT INPUT">
    <input type="button" id="submit" value="SUBMIT"> 
```

脚本。不要在表单上调用 submit()，而是在隐藏的提交按钮上调用 click()。适用于 Firefox、Chrome 甚至 IE6

```
 $('#submit').click(function() {
        // Instead of calling $('#form-foo').submit()
        $('#form-foo-submit').click();
    });

    $("#add-text-input").click(function() {
        var div = $('<div/>', {
            'class': 'input-container'
        }).append($('<button/>', {
            'class': 'delete-text-input',
            html: "X"
        }));
        var input = $('<input/>', {
            type: 'text',
            name: 'texts',
            'class': 'input-text'
        }).appendTo(div);
        div.appendTo($('#input-container-container'));
    });

    $('#form-foo').on('click', 'button.delete-text-input', function(e) {
        e.preventDefault();
        $(this).closest('div').remove();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:08:38.493

保持在表格内而不是在外面提交..

```
<form id="form-foo" method="POST">
        <div id="input-container-container">
        </div>

    <input type="button" id="submit" value="SUBMIT">
    </form> 
```

提交

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:11:31.487

由于您的输入在表单之外，因此没有一个被提交。确保您要发送的所有数据都*在*表单标签之间。

# razor - Umbraco Razor - 遍历多节点选择器

> ID：11582987
> 
> 赞同：2
> 
> 时间：2012-07-20T16:02:21.500
> 
> 标签：razor, umbraco, loops

我正在尝试用剃刀遍历多节点选择器。我的小部件的别名是“venuesPicker”。我收到错误“无法加载宏文件”。这是我到目前为止所拥有的：

```
<umbraco:Macro runat="server" language="cshtml">
@{
    using uComponents.Core;
    using uComponents.Core.uQueryExtensions;

    foreach (var x in Model.venuesPicker)
    {
        @x.highlightTitle
    }
}
</umbraco:Macro> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T16:34:36.353

查看我对此[our.umbraco.org 论坛帖子的](http://our.umbraco.org/forum/developers/razor/33050-IngroupsOf?p=0#comment121481)回答。基本上，根据 MNTP 使用的是 XML 还是 CSV，您可以执行以下操作之一：

**CSV：**

```
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@if (Model.HasValue("venuesPicker"))
{
    string[] ids = Model.venuesPicker.Split(',');

    <ul>
    @foreach (string id in ids)
    {
        var node = Library.NodeById(id);
        if (node.Id != 0)
        {
            // If node exists:
            <li><a href="@node.Url">@node.Name</a></li>
        }
    }
    </ul>
} 
```

**XML:**

```
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@if (Model.HasValue("venuesPicker"))
{
    <ul>
    @foreach (var item in Model.venuesPicker)
    {
        var node = Library.NodeById(item.InnerText);
        if (node.Id != 0)
        {
            // If node exists:
            <li><a href="@node.Url">@node.Name</a></li>
        }
    }
    </ul>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:23:48.493

您也可以使用 uQuery.getNodesByCSV 或 uQuery.getMediaByCSV。我认为 uQuery 是在 4.9 中添加到 Umbraco 核心的，否则你可以安装 uComponents 包

所以例如我在 4.9.1 中有这样的东西来循环播放一些媒体

```
@using umbraco.MacroEngines
@using umbraco.cms.businesslogic.media
@inherits umbraco.MacroEngines.DynamicNodeContext
@{
    <div class="slideshow">
        @foreach (Media img in uQuery.GetMediaByCsv(Model.lightBoxImages))
        {
            <figure>
                <a href="#">
                    <img src="@img.GetImageUrl()"  />
                </a>
            </figure>   
        }
    </div>
} 
```

[关于 Umbraco 论坛的更多信息](http://our.umbraco.org/forum/developers/razor/33302-Iterating-through-ultimate-picker)

# javascript - 为什么进度没有被触发？

> ID：11582988
> 
> 赞同：0
> 
> 时间：2012-07-20T16:02:31.760
> 
> 标签：javascript, file-upload, upload

我有一个可以工作的文件上传器，因为文件和变量正在被上传，并且完整的处理程序被触发，当上传完成时..但是进度处理程序不是..有什么想法为什么不呢？...关于Ĵ

```
 function uploadFile_function(){
    var formData = new FormData();
    formData.append("var1", "jane"); 
    formData.append("varFile", fileToUpload);

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "upload.php");  

    xhr.addEventListener("progress", function (ev) {
        alert('progress');
    }, false);

    xhr.addEventListener("load", function (ev) {
        alert('complete');
    }, false);

    xhr.send(formData);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:11:24.127

您需要[在调用 xhr.open 之前调用](https://developer.mozilla.org/en/using_xmlhttprequest#Monitoring_progress)事件侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:48:09.620

下载和上传传输都存在进度事件。下载事件在 XMLHttpRequest 对象本身上触发，如上面的示例所示。上传事件在 XMLHttpRequest.upload 对象上触发，如下所示：

```
function uploadFile_function(){
    var formData = new FormData();
    formData.append("var1", "trip"); 
    formData.append("varFile", fileToUpload);

    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", function (ev) {
        alert('progress');
    }, false);

    xhr.upload.addEventListener("load", function (ev) {
        alert('complete');
    }, false);

    xhr.open("POST", "upload.php");  
    xhr.send(formData);
} 
```

# git - GitHub 中的 Fork & Pull 模型是什么？

> ID：11582995
> 
> 赞同：14
> 
> 时间：2012-07-20T16:02:55.410
> 
> 标签：git, github, terminology, dvcs

我听说这个术语用于管理 GitHub 中的代码库。这是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T16:02:55.410

如[GitHub 文档中所述](https://help.github.com/articles/about-collaborative-development-models/)：

> *Fork & Pull 模型*允许任何人分叉现有存储库并将更改推送到他们的个人分叉，而无需授予对源存储库的访问权限。然后必须由项目维护者将更改拉入源存储库。这种模型减少了新贡献者的摩擦，并且在开源项目中很受欢迎，因为它允许人们独立工作而无需预先协调。[...] 拉取请求在 Fork & Pull 模型中特别有用，因为它们提供了一种方法来通知项目维护人员您的 fork 中的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T21:13:30.477

GitHub 由许多存储库组成。您可以分叉任何存储库并开始在其上开发您的更改。完成更改后，您可以将拉取请求发送到存储库的作者，从那里您将更改合并到主存储库。如果存储库作者发现您的更改很重要，则可以接受拉取请求并合并您的更改。

# java - 更改选项卡活动

> ID：11582999
> 
> 赞同：0
> 
> 时间：2012-07-20T16:03:02.613
> 
> 标签：java, android, tabs, android-4.0-ice-cream-sandwich

当我为 android 4.0 创建一个 android 项目时，您可以选择 tabs+swipe，它给了我这段代码

```
import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding tab.
    // We can also use ActionBar.Tab#select() to do this if we have a reference to the
    // Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by the adapter.
        // Also specify this Activity object, which implements the TabListener interface, as the
        // listener for when this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_layout, menu);
    return true;
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
}
} 
```

如何更改 tab1 的活动，我知道如何处理 tabhost.setcontent 等，但有人可以帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:10:15.980

在 FragmentActivity 中，您可以选择片段，而不是活动，因此您必须为每个场景创建片段并从 getItem(i) 返回其中一个；

如您所见 - 现在有一个 DummySectionFragment，它只包含一个文本视图。取而代之的是，您可以创建并返回您自己的片段。

看这个[文件](http://developer.android.com/guide/components/fragments.html)

例如你 getItem 会是这样的：

```
 @Override
    public Fragment getItem(int i) 
    {
        switch(i)
        {
        case 0:
            Fragment fragment = new MyAwsomeFragment1();
            Bundle args = new Bundle(); //bundle that contains your arguments
            args.putInt(myAwsomeIt); //some args to pass
            fragment.setArguments(args);
            return fragment;
       case 1:
            Fragment fragment = new MyAwsomeFragment2();
            return fragment;
        }
    } 
```