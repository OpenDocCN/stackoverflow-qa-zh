# StackOverflow 问答 11061000-11061999

# php - 哪个是按国家/地区重定向用户的最佳可扩展方式？

> ID：11061002
> 
> 赞同：3
> 
> 时间：2012-06-16T05:08:06.723
> 
> 标签：php, linux, .htaccess, redirect, country

我有一个网站，几个月后将有来自不同国家的流量，但这取决于我应该显示哪个网站的国家。

目前我正在使用免费的 maxmind GeoIp 和 php 重定向流量。

但是我认为每天有 40k 的独立用户，并且每天大约有 100k 的请求，这将是非常缓慢的。

我考虑过用 .htaccess 来做这件事，但我认为请求时间会多一点。

我现在的最终想法是根据国家/地区在不同文件夹（或子域）中的站点的 html 中构建主页，例如 us.website.com 并将用户重定向到那里，但我不知道哪种方式是最快的用户体验。

服务器是 LAMP（我可以选择发行版）

请帮我决定！！感谢一切！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:58:35.670

从 PHP 访问时，下载的 MaxMind GeoIP Country 数据库（免费或付费，没有区别）非常快（即使他们的 PHP 代码没有经过优化——很明显，它是从好的 C 代码翻译过来的）。

只需在您的机器上计时（例如，通过两次调用`microtime(true)`与实际数据集的差异），您可能会发现您可以负担得起访问代码顶部的 GeoIP DB，以便切换到国家 -需要的特定代码。

下一步是使用国家代码 cookie。如果用户已经拥有 cookie，则使用它来切换到特定于国家/地区的代码，否则访问 GeoIP DB 以确定国家/地区代码，设置 cookie，然后像往常一样切换（即使用户不接受 cookie 也可以工作） . 将其设为会话 cookie，用户可能会出差。如果您有一些页面缓存，请小心：它不能忽略国家代码 cookie。

您的问题提到了重定向，这可能是特定于国家/地区的`header('Location: ...');`，但您可能不应该这样做，因为它会使事情变得更加复杂，并且会增加您的流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:02:08.950

好吧，我认为您太担心了，但让我解释一下：

1.  IP -> country 是一个哈希表，所以我希望很短的时间来解决您的查询
2.  是静态信息，解析后可以缓存
3.  100k 页面浏览量和 40k 用户意味着每 2.5 个页面浏览量有 1 个用户，“短”的导航历史（我稍后解释）

对于这种情况，我建议：

1.  使用 PHP 查询数据库（将代码放在执行的“头部”中）并将国家/地区存储/缓存在 cookie 中**并提供请求**。一个简单的*if(empty($COOKIE['country']))*将允许了解是否查询数据库
2.  避免重定向到不同的站点（us.domain.com），每个用户将传递 2.5 到 3.5 个请求（大约 40% 以上）
3.  当站点需要更多资源时，您可以添加增加云资源或添加具有相同地址（www.domain.com）但新 IP 进行 DNS 循环的新机器，在较短的导航历史中运行良好。

附言

如果您要集群 $_SESSION 共享将是真正的挑战，因此您可以从现在开始查看会话管理器

# gwt - GWT 无法使用 http 404 部署到远程 tomcat 并且找不到页面信息作为返回

> ID：11061003
> 
> 赞同：0
> 
> 时间：2012-06-16T05:08:17.403
> 
> 标签：gwt, tomcat, http-status-code-404, rpc

远程：fedora 15 和 jdk+tomcat（vmware） 本地：win7 和 jdk+tomcat（我的笔记本）

几天前，我使用 Eclipse google 插件创建了一个默认 GWT 项目并成功将其部署到“远程”，它工作正常！现在我以同样的方式创建了一个新项目。IE 给了我一个 http 404，页面未找到信息作为回报。我确信除了创建它之外我对项目文件什么都不做。前者仍然可以正常工作，后者还不能工作。它们之间的唯一区别是包含战争文件的目录。我尝试通过多种方式解决它。这里有一些有用的结果：我几乎可以确认下面的块（在 web.xml 中）导致问题

```
 <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>com.test.gwt.server.GreetingServiceImpl</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>gwtref/greet</url-pattern>
  </servlet-mapping> 
```

当我将 servlet 类内容更改为任何内容（甚至是错误的）时，http 404 错误就会消失。我可以得到正确的页面，正如您想象的那样，rpc 不适用于 servlet 类的内容被更改！我不知道这是怎么回事，除了时间流逝我什么都不做！我还将后者部署到安装在我的笔记本上的 tomcat 上。它工作正常！天哪！多么令人惊奇的问题！我是使用 java 进行 Web 应用程序开发的新手。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:44:25.987

这是一个疯狂的猜测，但我走了。

一般来说，如果您在 servlet 容器中启动战争时遇到运行时错误，则整个战争将被标记为不可用。您是说如果您删除 servlet，404 就会消失，这让我相信 com.test.gwt.server.GreetingServiceImpl 类不在您的战争文件中（一些错字？）。

看看 WEB-INF/classes/ 是否存在。如果没有你得到你的错误......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T05:06:56.170

我遇到了同样的问题，以下帮助我解决了它：

1.  从项目的 src 文件夹构建 jar （将 jar 导出到 /war/Web-Inf/lib/(name_of_jar).jar

2.  从你的war文件夹中构建一个war文件并将其部署到tomcat上（我使用Ant Build来制作war）

```
<target name="default" depends="buildwar,deploy"></target>

<target name="buildwar">
    <war basedir="war" destfile="(Some Name).war" webxml="war/WEB-INF/web.xml">
        <exclude name="WEB-INF/**" />
        <webinf dir="war/WEB-INF/">
            <include name="**/*.jar" />
        </webinf>
    </war>
</target>

<target name="deploy">
    <copy file="(Some Name).war" todir="." />
</target> 
```

# delphi - 免费使用的 TeeChart 包名称与付费产品选项

> ID：11061005
> 
> 赞同：1
> 
> 时间：2012-06-16T05:08:31.420
> 
> 标签：delphi, teechart

我有一个 Delphi 包 DPK 文件，我将它发送给客户（WebHub 客户），这需要使用“tee”包——Delphi 中包含的免费包。

```
 requires
   vcl, vclx, vcldb,
   {$IFNDEF Delphi12UP}vcljpg, {$ENDIF}  // in D07 and D11 but not in D12
   dsnap, dbexpress, dbxcds,
   tee,  // this is the problem/question: what package should be here, when?
   ldiRegExLib, ZaphodsMapLib, WebHub; 
```

当我的客户购买 TeeChart 的付费版本时，他们最终会得到不同的包名称，包括 FireMonkey、ios 和 VCL 的变体。都很棒。我的问题是：我能否确定（从包含文件、注册表设置、TeeChart 安装程序控制的东西）我应该引用哪个包名称？我只问VCL。如果我可以确定哪个包名称，那么我可以在安装过程中进行一些调整，以便包含正确的包。在我的 pas 源中，我的 uses 子句已经有了：

```
 {$IFDEF Delphi16UP} VclTee.Chart, VclTee.Series, {$ELSE} Chart, Series, {$ENDIF} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:36:59.683

您基本上需要使用的软件包，没有 FMX 是：

Tee916.bpl：总是必要的。

TeeDB916.bpl：如果您想使用 DBChart，请使用它，但如果您不使用 DBChart，则不需要包含此包。

TeeGL916.bpl：如果您想使用 GL 画布，请使用它，但如果您不使用 GL 画布，则不需要包含此包。

TeeImage916.bpl：总是必要的。

TeeLanguage916.bpl：总是必要的。

TeeMaker116.bpl：如果您想使用 TeeMaker，请使用它，但如果您不使用 TeeMaker，则不需要包含此包。

TeePro916.bpl：总是必要的。

TeeTree2D16Tee9.bpl：如果您想使用 TeeTree，请使用它，但如果您不使用 TeeTree，则不需要包含此包。

TeeUI916.bpl：总是必要的。

TeeWorld916.bpl：如果您想使用 TeeWorld，请使用它，如果您不使用 TeeWorld，则不需要包含此包。

如果您删除必要的包，您可以使项目最小化并减小他的大小。

我希望会有所帮助。

谢谢，

最好的问候，桑德拉帕索斯

Steema 支持中心 [http://support.steema.com/](http://support.steema.com/)

# objective-c - Obj-C：为什么类名只能用作消息接收者或静态类型？

> ID：11061006
> 
> 赞同：1
> 
> 时间：2012-06-16T05:08:36.137
> 
> 标签：objective-c

能够通过名称指定类对象而不是向其发送`class`消息会很方便。运行时已经知道`id`该类是什么，那么我为什么要每次都发送一条消息来检索它呢？

我的猜测是编译器会对其进行优化，以便这实际上不会导致发送消息。

必须有一些充分的理由（我寻求）来解释为什么语法必须是这种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:18:57.963

这就是它的设计工作方式：类名是一种类型。对象是指向该类型的指针。单独的 tpye 不能用作值（常量、变量、表达式，无论您想将其用作...）。如果这对您来说不方便（呃，不应该！），您可以想出一些解决方法：例如，定义一个简短的宏：

```
#define C(name) [name class] 
```

或者

```
#define C(name) objc_getClass(#name) 
```

希望这可以帮助。

# android - 用于 3D 模型增强现实的 Android 实时位置跟踪

> ID：11061010
> 
> 赞同：1
> 
> 时间：2012-06-16T05:09:20.137
> 
> 标签：android, 3d, augmented-reality, location-based

我正在尝试实现一个基于位置的 AR 解决方案，类似于 Metaio Unifeye SDK 的 GPS/位置跟踪功能（他们从 2.5 版本开始停止支持 ARMv6 设备，但我必须针对这些设备）

我希望我的用户能够在 0.5 公里半径区域内查看 10 米高的人形怪物 3D 模型。它必须是一种非光学解决方案，其中： - 位置（来自 GPS 或网络提供商）和指南针将用作相机操作的参考。- 传感器可能有助于估计。

是否有任何现有的实时位置跟踪实现（库或教程）足以满足我的要求？

# javascript - 如何使用javascript检测android设备中的键盘关闭事件

> ID：11061011
> 
> 赞同：6
> 
> 时间：2012-06-16T05:09:30.480
> 
> 标签：javascript, android, cordova, keyboard-events

我正在使用*phonegap*开发 android 应用程序。目前我正面临一个`inputbox`与特定 HTC Android 设备有关的问题，我有一个解决方案。但我需要知道**键盘关闭事件何时发生**。

所以我的问题是*如何使用phonegap*或任何可用于检测Android设备键盘事件的插件来检测键盘关闭事件。？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:43:27.933

我不使用Phonegap，但我做了一些基本的谷歌搜索，比如“phonegap android hide keyboard event”，并在几个月前遇到了这两个相关的帖子。

第一个就在这里： [Android SoftKeyboardDetect：忽略此事件是什么意思？](https://stackoverflow.com/questions/9333689/android-softkeyboarddetect-ignore-this-event-what-does-it-mean). 看起来如果您下拉到“本机”Java(...) Android 会尝试使其可用。

这另一个，[Re: [PhoneGap] Re: SoftKeyboardDetect(328): Ignore](http://osdir.com/ml/phonegap/2012-02/msg01862.html) on a phonegap-oriented website似乎暗示phonegap实现或SoftKeyboardDetect代码是罪魁祸首。

我有用 Java 编写的 Android 代码，它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:23:03.927

我在使用 phonegap 开发 iPhone 应用程序时遇到了类似的问题。我已经通过以下方式解决了这个问题。

```
$("input[type=text], textarea").
bind("blur", function(e) {
 window.scrollTo(0.0);
 loaded();
}); 
```

您可以使用“模糊”操作检测关闭事件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-27T15:07:44.687

我用 ：

```
 inputElement.bind("closeKeyboard", function() {
             //do something
 }); 
```

# jquery - jquery按钮验证

> ID：11061012
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:09:32.853
> 
> 标签：jquery

这个验证有什么问题：

查询：

```
$(document).ready(function(){

    $("#addcmd").attr("disabled","disabled");

    $("#cmdstxt").keypress( function(event){
        var txt=$("#cmdstxt");

        if( txt.val().length > 8 ){
            $("#addcmd").attr("disabled",false);

        }
        else{
        $("#addcmd").attr("disabled","disabled");   
        }
    });       }); 
```

html代码：

```
<textarea class="element"  name="about" id="cmdstxt"></textarea>
<input type="button" id="addcmd" value="Add comment"  /> 
```

这里我的问题是仅在文本框中的 7 个字符禁用 10 个字符后才启用按钮我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:12:07.890

拼写错误的长度

```
if( txt.val().lenght > 7 ){
    $("#addcmd").removeAttr("disabled");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:12:08.717

**[现场演示](http://jsfiddle.net/rsYN8/)**

在启用按钮的条件下，您的长度拼写错误。

```
$(document).ready(function(){

    $("#addcmd").attr("disabled","disabled");

    $("#cmdstxt").keypress( function(event){
        var txt=$("#cmdstxt");
        //alert(txt.val().length);  this alert successfully 
        if( txt.val().length > 7 ){
            $("#addcmd").removeAttr("disabled");
        }
    });      });​ 
```

# node.js - NodeJs VM - 将编译后的代码...保存到磁盘？

> ID：11061015
> 
> 赞同：5
> 
> 时间：2012-06-16T05:10:55.630
> 
> 标签：node.js, v8

来自[http://nodejs.org/api/vm.html](http://nodejs.org/api/vm.html)：

> JavaScript 代码可以立即编译和运行**，也可以稍后编译、保存和运行**。[...] 返回的脚本**未绑定到任何全局对象**。它在每次运行之前绑定，仅用于该运行。

然后在 API 中，没有返回任何字节的方法，什么都没有。只是一个“脚本”对象。

所以，在我礼貌地拆掉我怀里的这张桌子之前，有什么办法可以真正将编译好的脚本*保存*到磁盘上？我认为它只是普通的原始二进制数据，可能是语法树或其他。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T05:26:26.990

您引用的函数是用于在新上下文中由 javascript 运行的 javascript（因此它可以是安全的，具有新功能等）......与其说是保存预编译的二进制文件......

如果您想了解如何实际重新加载预编译脚本的详细信息，可以查看 node.js 源代码。' [node.js](https://github.com/joyent/node/blob/master/src/node.js) ' 文件本身被预编译并加载为二进制文件（如果您使用此选项构建它）。这样做，它使节点启动更快。

但是，您应该记住的是，这几乎没有什么优势，除非您使用将运行/停止/运行/停止...等的 V8 库构想一个特定的进程（例如 node.js）。原因是，V8 库只会编译您的脚本一次 - 然后每次都将其作为机器代码执行，或者只要 V8 库正在运行。

预编译和加载为二进制文件会带来一些显着的缺点，包括使您的程序架构依赖（甚至跨 x86 32 位与 x86_64）等等。所以 - 这可能不是最好的设计决策。

# perl - 为什么不推荐使用 Catalyst::Helper::View::TTSite？

> ID：11061026
> 
> 赞同：3
> 
> 时间：2012-06-16T05:12:25.893
> 
> 标签：perl, templates, deprecated, catalyst, template-toolkit

我刚开始接触 Catalyst，我发现它真的很有帮助。我最喜欢的事情之一是 TTSite，因为它让我快速前进，并为我提供了一些可以在没有黑色文本的情况下进行开发的东西（而且它不需要我进行任何设置）。但是，我在很多地方都读到它有问题，甚至不推荐使用，正如实际 Catalyst 教程中提到的[那样。](https://metacpan.org/module/Catalyst::Manual::Tutorial::03_MoreCatalystBasics)但是我发现它除了有用而且没有任何问题，所以基本上我想知道我是否有理由担心而不使用它？如果是这样，有没有人知道类似的替代方案，可以为您提供一个基本模板设置在其中工作？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:05:32.093

我不认为 TTSite 在支持方面被*正式*弃用..截至 0.39（2012 年 4 月 10 日发布），它仍包含在[Catalyst::View::TT发行版中。](http://search.cpan.org/dist/Catalyst-View-TT/)我怀疑更多的是一些开发人员不喜欢提供的基本模板，并且不再推荐将 TTSite 作为默认 Catalyst 教程的一部分。

TTSite 提供了一个非常简单的基础，它有一些怪癖。例如，上下文对象被称为 Catalyst 而不是 c，使用 TT 的 WRAPPER 命令会妨碍 AJAX 和非 html 视图。

更多背景阅读：

*   [Catalyst-Dev 邮件列表中关于将 Catalyst 教程从 TTSite 更改为直接 TT 的讨论](http://lists.scsys.co.uk/pipermail/catalyst-dev/2008-May/001215.html)
*   [Catalyst wiki：为 AJAX 请求禁用 TT 包装器](http://wiki.catalystframework.org/wiki/gettingstarted/howtos/disabling_a_tt_wrapper_for_ajax_requests)
*   [TTSite 上的一篇博文，包括将 Catalyst 上下文引用更改为 c](http://brunorc.wordpress.com/2009/07/04/catalyst-is-easy-fourth-movement/)

现代基础主题可能会从[Bootstrap](http://twitter.github.com/bootstrap/)或[960 Grid](http://960.gs/) HTML/CSS 框架之一开始。我不知道有一个积极维护的 Catalyst::View 帮助器可以更好地替代 TTSite，但也不要觉得放入最新版本的 Bootstrap 太繁琐:)

# c - setgid() 失败 - 不允许操作

> ID：11061027
> 
> 赞同：5
> 
> 时间：2012-06-16T05:12:29.217
> 
> 标签：c, linux, permissions, setuid

我在 C 中创建了一个 setuid 程序。可执行文件如下所示：

```
-r-s-r-s--- 1 root users 13073 Jun 15 21:56 server 
```

我执行程序`userA/users`并尝试将 uid/gid 设置为`userB/otherUsers`. `setgid()`失败，不允许操作。`userA`不是`otherUsers`我如何更改有效 gid 的一部分？

* * *

**[编辑]**这是我所做的一个小总结。我的 C 程序以 userA 身份执行，将 uid 和 gid 设置为 userB 并创建一个文件。与预期不同，该文件属于组 root，因为`setgid()`失败。

```
[userA@node uid]$ id
uid=11945(userA) gid=544(users) groups=544(users)
[userA@node uid]$ id userB
uid=11946(userB) gid=10792(otherUsers) groups=10792(otherUsers)
[userA@node uid]$ cat uid.c 
#include <stdio.h>
#include <unistd.h>

int main() {
  setuid(11946);
  setgid(10792);

FILE *f = fopen("userB_file", "w");
fclose(f);

return 0;
}
[userA@node uid]$ ls -l uid
-r-sr-sr-x 1 root root 7130 Jun 17 14:16 uid
[userA@node uid]$ ./uid 
[userA@node uid]$ ls -l userB_file 
-rw-r--r-- 1 userB root 0 Jun 17 14:19 userB_file 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-16T11:12:31.010

我怀疑你`setuid`之前打过电话`setgid`。一旦您调用`setuid`将 uid 更改为 root 以外的其他值，您就失去了将 gid 更改为任意值的权限。你必须先打电话`setgid`，然后`setuid`。

# javascript - Javascript 隐藏/显示切换在 Opera 中以两种方式工作，但在其他浏览器中只有一种方式

> ID：11061031
> 
> 赞同：0
> 
> 时间：2012-06-16T05:14:19.380
> 
> 标签：javascript, css, toggle, opera, transitions

我有一个自定义的显示/隐藏切换脚本，它与 CSS3 转换一起用于效果。

该脚本在单击时显示内容，并在单击“HideLink”链接时将其隐藏，并带有 CSS3 转换 - 但仅在 Opera 中。

在其他浏览器中，该脚本仅适用于显示内容，单击隐藏链接不起作用。

看到这个 JSfiddle：http: [//jsfiddle.net/xte63/](http://jsfiddle.net/xte63/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:21:54.297

这些天来显示/隐藏 javascript，我更喜欢使用 HTML5 的 data-* 属性。

这已经可以通过 getAttribute 和 setAttribute 函数在非 HTML5 浏览器中使用。

我很快就对 IE7、Chrome 和 Opera 进行了尝试，它似乎可以工作。

[http://jsfiddle.net/ThJcb/](http://jsfiddle.net/ThJcb/)

```
function showHide(shID) {
    var exDiv = document.getElementById(shID);
    if(exDiv.getAttribute("data-visible") != 'false'){
         document.getElementById(shID+'-show').style.cssText = ';height:auto;opacity:1;visibility:visible;';  
         document.getElementById(shID).style.cssText = ';height:0;opacity:0;visibility:hidden;';  
         exDiv.setAttribute("data-visible" , 'false');
    } else { 
         document.getElementById(shID+'-show').style.cssText = ';height:;opacity:0;visibility:hidden;';  
         document.getElementById(shID).style.cssText = ';height:auto;opacity:1;visibility: visible ;';   
          exDiv.setAttribute("data-visible" , 'true'); 
    }
} 
```

这允许您确定 div 的状态，而无需检查 CSS 值。

**编辑**：正如评论中指出的那样，隐藏链接（onlick 而不是 onclick）上有一个错字，这使它看起来上面的 jsfiddle 有效，而它没有。至少不完全是因为我在逻辑中犯了一个错误，将“数据可见”设置为 false 而不是 true。

这是一个更新的jsfiddle： http: [//jsfiddle.net/ThJcb/4/](http://jsfiddle.net/ThJcb/4/) （上面的javascript片段也更新了）

# c++ - 这是存储 std::allocator 状态的正确方法吗 - 在这种情况下，由 Windows 上的共享内存支持？

> ID：11061042
> 
> 赞同：0
> 
> 时间：2012-06-16T05:16:20.487
> 
> 标签：c++, visual-c++, shared-memory, allocator

由 Windows 支持的名为共享内存的 std::allocator（基于[MAllocator](http://blogs.msdn.com/b/vcblog/archive/2008/08/28/the-mallocator.aspx) ）的[实现](https://github.com/venkatperi/shm-allocator)向 MAllocator 添加了几个项目。

*   allocate()的附加参数**名称**改变了 std::allocator 上的签名。这可以**吗**，考虑到分配器通常是模板参数（错误将在编译时被捕获）？

    `template<class T> T *allocate(const size_t n, const char* name);`

*   状态以指向 deallocate() 句柄的指针映射的形式维护。分配器拒绝与其他实例相等以保持状态完整性。这是否足够或是否需要额外的保障措施？

    ```
    typedef std::map<uintptr_t, HANDLE> HandleMap;
    HandleMap mHandles;

    deallocate(T *const p, size_t n = 0) 
    {
        if (mHandles.find((uintptr_t)p) == mHandles.end())  //we don't own this pointer
        {
            std::ostringstream msg;
            msg << "Error in deallocate(): Invalid pointer - we don't own it - we can't delete it!";
            throw std::exception(msg.str().c_str() );
        }

        unmapView(p);
        closeHandle(p);
        mHandles.erase((uintptr_t)p);
    } 
    ```

[github](https://github.com/venkatperi/shm-allocator)上的完整代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:18:57.433

首先，您的问题是“对于 std::allocator”，但这不是 a `std::allocator`，而是 a `ShmAllocator`。`std::allocator`是标准库提供的类模板，你的分配器不是那个类模板，它是不同的类型。我认为您的意思是“用于分配器”或仅用于“用于标准分配器”，它指的是符合分配器要求的类型（`std::allocator`只是这种类型的一个示例。）

这不符合分配器的要求，特别是副本不等于原始对象。如果您计划将此分配器与需要符合标准的分配器的代码一起使用，它可能会失败。如果您不打算将它与需要标准分配器的代码一起使用，那么为什么还要复制它的接口呢？

复制构造函数的要求要求，对于`a`类型对象，`ShmAllocator<T>`语句`ShmAllocator<T> a1(a);`有效，后置条件为 ，对于类型`a1 == a`对象，语句有效，后置条件为and 。`b``ShmAllocator<U>``ShmAllocator<T> a(b);``ShmAllocator<U>(a) == b``a == ShmAllocator<T>(b)`

这些要求是必要的，因为容器需要能够重新绑定分配器并制作必须能够释放彼此内存的副本。有状态分配器的平等应该取决于价值而不是身份。

为了使您的分配器满足您可以存储的要求`mHandles`，`shared_ptr<mHandles>`以便分配器的副本可以共享同一个集合。

你打算如何使用这个分配器？我不知道 Windows API 函数，但似乎每次调用`allocate`时都需要使用不同的值，`name`否则会返回相同的指针，这意味着标准容器不能使用它。我希望共享内存分配器在其构造函数中创建一个共享内存区域（或通过对某些现有区域的引用来构造，例如参见 Boost.Interprocess 分配器）然后将该区域划分并返回它的不同块每次`allocate`被调用，而不是在每次调用时创建一个新区域`allocate`。这是为了让用户在进程之间共享对象吗？另一个进程如何访问现有对象？似乎另一个进程必须调用`allocate`获取指向已构造对象的指针。这很令人困惑，`allocate`应该提供新的、未初始化的内存。共享内存分配器通常会定义一个自定义指针类型，它将偏移存储到共享内存区域而不是绝对地址，因此当这样的指针用于不同的进程时，偏移仍然有效，即使该区域是映射到不同的地址。

# objective-c - 带有圆角顶角的 CAGradientLayer（不使用 .mask）

> ID：11061046
> 
> 赞同：1
> 
> 时间：2012-06-16T05:17:26.703
> 
> 标签：objective-c, screenshot, calayer, quartz-core

我正在寻找一个`CAGradientLayer`圆角。我不能使用`.cornerRadius`，因为我只想圆顶两个角。另外，我不能使用`.mask`，因为我想在之后对其进行截图并且`renderInContext`不支持`CALayer`蒙版。

我怎么能：

*   A：不使用蒙版创建一个`CALayer`带有渐变和两个圆角的

或者

*   B：截取类似于 的屏幕截图`UIGraphicsGetImageFromCurrentImageContext`，但要尊重蒙版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:58:06.690

我想出了一种程序化的方法来做到这一点。它涉及创建一个圆形图层，然后在其上绘制一个方形图层。您必须对渐变颜色和位置进行一些调整才能获得看起来不错的东西。

**注意：**鉴于您对口罩的要求，不确定此解决方案是否适合您

```
+ (void)makeGradientButton:(UIButton *)button {
    // Create a rounded layer
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = button.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
    gradient.cornerRadius = 8.0f;

    // Now create a square layer that draws over the top
    CAGradientLayer *gradient2 = [CAGradientLayer layer];
    gradient2.frame = CGRectMake(0, 9, button.bounds.size.width, button.bounds.size.height-9);
    gradient2.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor redColor] CGColor], nil];
    gradient2.cornerRadius = 0.0f;

    [gradient setMasksToBounds:YES];
    [button.layer insertSublayer:gradient atIndex:0];
    [button.layer insertSublayer:gradient2 atIndex:1];
    [button setBackgroundColor:[UIColor clearColor]];
} 
```

# ios - 将图像链接到文本以便本地化保持适当间隔的最佳方式？

> ID：11061047
> 
> 赞同：0
> 
> 时间：2012-06-16T05:17:36.400
> 
> 标签：ios, xcode, localization, interface-builder

我有一个应用程序，它有一个很大的“帮助”页面，描述了如何使用它。此页面包含大量文本和一些嵌入的图像。有什么方法可以将这些图像“链接”或附加到特定文本框的底部，这样我们所做的任何本地化工作都会合理地布置好？换句话说，如果一段文本的法语翻译最终比英语等效长两行，我希望将放置在该文本下方的图像向下推适当的量，而无需重新编辑手动布局 .xib 文件。可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:13:02.863

你可以制作HTML页面。您可以在文本之后放置任何内容并可以进行修改。由于它是 HTML 页面，它可以轻松地自动包装和自动调整。并通过将 HTML 页面保存在本地数据存储中来在 webview 中显示 html 页面

# jquery - jQuery .change 和 .click 功能同时

> ID：11061048
> 
> 赞同：0
> 
> 时间：2012-06-16T05:17:56.543
> 
> 标签：jquery, function, drop-down-menu

有人可以看看这个吗

[http://jsfiddle.net/bloodygeese/ecscY/56/](http://jsfiddle.net/bloodygeese/ecscY/56/)

看起来我已经让 2 个单独的功能工作了，但我需要让它们同时工作？所以点击image1.image2,image3,image4会改变下拉，但是我还需要同时显示下拉的值，

看来我只能单独执行此操作？

如果我能获得“标签：”以将第一个选项显示为默认值，那也很棒。我将在下拉菜单中有 16 个（也许更多）选项，有什么方法可以简化代码吗？而不是每个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:26:58.800

试试这个：

```
$('#one, #two, #three, #four').click(function() {
    $('#dropdown').val($(this).attr('id'));
    $('#dropdown').trigger('change')
}) 
```

[http://jsfiddle.net/ecscY/57/](http://jsfiddle.net/ecscY/57/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:25:57.443

打电话`.change()`后打电话`.val()`。见下文，

```
$('#dropdown').val($(this).attr('id')).change(); 
```

# c++ - WinAPI 的 Groupbox 字体问题

> ID：11061049
> 
> 赞同：1
> 
> 时间：2012-06-16T05:18:11.570
> 
> 标签：c++, winapi, user-interface, windows-7

我在通过 CreateWindowEx 创建一个简单的 Group-Box-Control 时遇到问题。其标题的字体大小/样式看起来不正确。

我使用 Visual Studio - 资源管理器创建了一个简单的 Windows 对话框（包含组框、按钮……）。当我使用 DialogBox(...) 加载该对话框时，一切看起来都很正常，但是当我通过 CreateWindowEx(...) 在同一个对话框上创建另一个组框控件时，新控件的标题具有不同的字体大小/样式。

使用 Microsoft Spy++，我能够看到其他 groub-boxes 的 dwExStyle 和 dwStyle 值，但即使我在 CreateWindowEx 中使用相同的值，我仍然会得到不同的外观。

这是我用来创建新组框的代码：

```
HWND hGroup1 = GetDlgItem(_hWnd, IDC_GROUPBOX1);
HWND hGroup2 = CreateWindowEx(            
    WS_EX_LEFT | WS_EX_LTRREADING | WS_EX_RIGHTSCROLLBAR | WS_EX_NOPARENTNOTIFY,
    L"Button",
    L"Hallo",
    WS_CHILDWINDOW | WS_VISIBLE | BS_GROUPBOX,
    20, 20, 250, 250,
    hGroup1,
    nullptr,
    _hInstance,
    nullptr); 
```

这是对话框的屏幕截图：

[http://imageshack.us/photo/my-images/856/groupboxfontissue.png/](http://imageshack.us/photo/my-images/856/groupboxfontissue.png/)

请让我知道我哪里出了问题以及我可以做些什么来解决它。

[编辑-1]

关于乔纳森波特和超人，正如你所建议的，我将新组框的字体句柄设置为与其他控件相同。

```
HFONT hFont1 = (HFONT)SendMessage(hGroup1, WM_GETFONT, 0, 0); 
HFONT hFont2 = (HFONT)SendMessage(hGroup2, WM_GETFONT, 0, 0);
HFONT hFont3 = (HFONT)SendMessage(_hWnd, WM_GETFONT, 0, 0);
SendMessage(hGroup2, WM_SETFONT, (WPARAM)hFont1, TRUE);

hFont2 = (HFONT)SendMessage(hGroup2, WM_GETFONT, 0, 0); 
```

在这段代码的最后，我可以看到所有控件和对话框窗口都具有相同的字体句柄，但只有使用资源管理器创建的控件具有正确的字体（即系统字体）。

还有什么我可以做的吗？？？

[编辑-2]

我不敢相信……它现在有效！非常感谢大家的帮助！

我只需将 CreateWindowEx(...) 中的 hWndParent 值设置为对话框句柄，然后使用 WM_GETFONT 和 WM_SETFONT 复制正确的字体。

祝大家周末愉快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:28:32.910

您手动创建的控件（通过 CreateWindowEx）不会自动设置其字体，并且将默认为“系统字体”（这是您在屏幕截图中看到的）。相反，您需要在创建控件后设置控件的字体。例如，

```
SendMessage(hGroup2, WM_SETFONT, (WPARAM)SendMessage(hGroup1, WM_GETFONT, 0, 0), TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:47:05.650

当您使用资源编辑器将控件放置在对话框中时，默认情况下将使用设置为对话框的字体，即控件的父级。

如果您正在动态创建控件，则将使用系统字体而不是对话框的字体。

要为您动态创建的控件获取相同的对话框字体，请将对话框的字体设置为 WM_INITDIALOG 处理程序中的控件。

在下面的代码片段中，将 m_hWnd 替换为父对话框的句柄。

```
HFONT font = (HFONT)::SendMessage(m_hWnd, WM_GETFONT, 0, 0);
::SendMessage(hGroup2, WM_SETFONT, (WPARAM)font, TRUE); 
```

# android - 我可以在没有用户提示的情况下以编程方式将我的应用程序添加到 android 中的 superuser.apk 列表吗？

> ID：11061052
> 
> 赞同：-1
> 
> 时间：2012-06-16T05:19:13.280
> 
> 标签：android, linux, android-ndk, linux-kernel

我的设备已植根，当我执行`su`命令时，它会显示一个**超级用户权限**对话框并将我的应用程序添加到`superuser.apk`列表中。

做什么的`superuser.apk`？我可以在 `superuser.apk`不提示用户的情况下以编程方式将我的应用添加到列表中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:34:57.357

不，您不能在没有用户提示的情况下将自己添加到列表中。

这就是 superuser.apk 的原因 - 向用户显示禁止恶意应用程序获得 root 访问权限的提示。

# objective-c - 对受 OAuth 保护的 URL 进行 GET 调用

> ID：11061055
> 
> 赞同：0
> 
> 时间：2012-06-16T05:20:13.017
> 
> 标签：objective-c, ios, oauth, nsmutableurlrequest

我正在尝试获取位于受 OAuth 保护的 URL 的图像。我查看了规范文档，但似乎无法正确处理所有内容。这就是我正在做的事情：

构造一个 OAuth 授权标头：

```
NSString *oauthHeader = @"Authorization: OAuth ";
oauthHeader = [oauthHeader stringByAppendingFormat:@"oauth_consumer_key=%@",oauthConsumerKey];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_token=%@",oauthAccessToken];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_signature_method=HMAC-SHA1"];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_signature=%@",escapedString];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_timestamp=%d",oauthTimeStamp];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_nonce=%@",oauthNonce];
oauthHeader = [oauthHeader stringByAppendingFormat:@",oauth_version=1.0"]; 
```

将授权添加到 http 请求：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:imageUrl]];
[request setValue:oauthHeader forHTTPHeaderField:@"Authorization"]; 
```

然后继续发送。

我得到一个空的响应，带有 404 代码。我确定 URL 是正确的，因为作为测试，如果我禁用 URL 上的 OAuth 保护，我可以很好地检索它。

当我做错事时，你有什么问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:16:55.260

所有 OAuth 参数看起来都不错，但您的代码还远未完成。一个疯狂的猜测是服务提供商不理解 Authorization HTTP 标头，或者您未能创建有效的 OAuth 签名（在这种情况下尝试可能是 PLAINTEXT）。

在每种情况下：回复 404 肯定是一个错误，您应该联系 OAuth 提供商，提供尽可能多的详细信息。

# objective-c - 在 Mac OSX 中监控应用程序和网络活动

> ID：11061056
> 
> 赞同：3
> 
> 时间：2012-06-16T05:21:26.717
> 
> 标签：objective-c, macos, cocoa, android-activity, monitoring

是否可以像这样在后台监控应用程序活动，

当用户登录时，访问哪个应用程序以及何时，系统何时进入睡眠等......当它与网络断开连接并连接到它时，：我相信，因为可以实现一些持续ping的服务IP 或其他方法，

# java - 当文件位于项目文件夹中时，找不到文件错误

> ID：11061057
> 
> 赞同：0
> 
> 时间：2012-06-16T05:21:36.867
> 
> 标签：java

```
import java.io.*;
import java.util.Scanner;
public class Test {
    /**
     * @param args
     */
    public static void main(String[] args) throws FileNotFoundException {
        File test = new File("test.txt");
        Scanner read = new Scanner (test);
        String input;
        input = read.next();
        System.out.println (input);
    }
} 
```

当我运行此代码时，我收到此错误

```
Exception in thread "main" java.io.FileNotFoundException: test.txt (The system cannot find the file specified)

at java.io.FileInputStream.open(Native Method)

at java.io.FileInputStream.<init>(Unknown Source)

at java.util.Scanner.<init>(Unknown Source)
    at Test.main(Test.java:9) 
```

我已经创建了文本文件，它就在项目文件夹中，但没有找到它。

编辑

```
InputStream file = getClass().getResourceAsStream("highScore.txt");
BufferedReader br = new BufferedReader (new InputStreamReader(file,"UTF-8"));
String text;
text = br.readLine();
while (text!=null) {
    System.out.println (text);
} 
```

我试过了，但我得到了 NullPointerException 错误

这是一个小程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:23:25.763

您必须与`test.txt`启动程序时位于同一目录中。例如：

```
cd dir/with/textfile
ls
  test.txt
java -cp my.jar com.toby.guo.Test 
```

或者，您可以提供文件的完整路径：

```
File test = new File("/home/dir/with/textfile/test.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:24:15.480

当您使用文件读取文件时，`new File("test.txt");`该文件应直接位于 java 程序的当前工作目录中。

或者您也可以将文件与您的 Test.java 一起放入并像这样读取它：

```
Test.class.getResourceAsStream("test.txt"); 
```

# python-3.x - 在 Python 3.2 中使用 HTMLParser

> ID：11061058
> 
> 赞同：17
> 
> 时间：2012-06-16T05:21:48.213
> 
> 标签：python-3.x, html-parsing, arguments, web-scraping, stripping

我一直在使用 HTML Parser 从网站上抓取数据并在这样做的同时剥离 html 编码。我知道各种模块，例如 Beautiful Soup，但决定走不依赖“外部”模块的道路。Eloff 提供了一段代码：[Strip HTML from strings in Python](https://stackoverflow.com/a/925630/3416774)

```
from HTMLParser import HTMLParser

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def get_data(self):
        return ''.join(self.fed)

def strip_tags(html):
    s = MLStripper()
    s.feed(html)
    return s.get_data() 
```

它适用于 Python 3.1。但是，我最近升级到 Python 3.2.x，发现上面写的关于 HTML Parser 代码的错误。

我的第一个错误指向该行：

```
s.feed(html) 
```

...并且错误说...

```
AttributeError: 'MLStripper' object has no attribute 'strict' 
```

因此，经过一番研究，我将“strict=True”添加到顶行，使其...

```
class MLStripper(HTMLParser, strict=True) 
```

但是，我收到以下新错误：

```
TypeError: type() takes 1 or 3 arguments 
```

为了看看会发生什么，我删除了“self”参数并留在了“strict=True”......这放弃了错误：

```
NameError: global name 'self' is not defined 
```

...我得到了“我在猜测”的感觉。

我不知道该`class MLStripper(HTMLParser)`行中的第三个参数是什么，在`self`and之后`strict=True`；研究并没有带来任何启示。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-16T13:26:17.990

你是子类化`HTMLParser`，但你没有调用它的`__init__`方法。您需要在方法中添加一行`__init__`：

```
def __init__(self):
    super().__init__()
    self.reset()
    self.fed = [] 
```

此外，对于 Python 3，导入行是：

```
from html.parser import HTMLParser 
```

通过这些更改，一个简单的示例就可以工作了。不要换`class`行，那不相关。

# php - 通过 file_get_contents 限制字符串加载

> ID：11061059
> 
> 赞同：-1
> 
> 时间：2012-06-16T05:21:52.263
> 
> 标签：php, limit, file-get-contents

有没有办法限制使用加载的字符数`file_get_contents('http://myurl.com/');`？

我只需要从 URL 加载前 500 个字符以节省加载时间 - 这可能吗？我听说过这样的方法，但不知道它是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:26:02.853

[`file_get_contents`有一个`maxLen`参数](http://php.net/manual/en/function.file-get-contents.php)可以做到这一点。

# javascript - 如何从 JSON 响应中获取逗号分隔的列表？

> ID：11061061
> 
> 赞同：2
> 
> 时间：2012-06-16T05:22:30.703
> 
> 标签：javascript, json

你好我有一个javascript问题，我得到一个JSON结果：

```
{"0":"San Diego acls","1":"San Diego pals","2":" San Diego CPR","3":" Temecula acls","4":" Temecula pals"} 
```

它存储在一个名为 data 的变量中。

我想解析这个数据变量并制作一个如下列表：

```
San Diego acls, San Diego pals, San Diego CPR, Temecula acls, Temecula pals 
```

有什么优雅的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T06:00:40.437

你需要的是这样的：

```
var res = [];
for (var x  in obj)
    if (obj.hasOwnProperty(x))
        res.push(obj[x]);
console.log(res.join(",")); 
```

* * *

还有另一种“优雅”的方式（取自[亚历克斯的回答](https://stackoverflow.com/a/5737192/227884)），

```
res = [];
Object.keys(obj).forEach(function(key) {
    res.push(obj[key]);
});
console.log(res.join(",")); 
```

* * *

`Object.keys(obj)`如果您需要按特定顺序的结果，在对数组调用 forEach 之前对键（来自 ）进行排序会有所帮助。像这样的东西：

```
Object.keys(obj).sort().forEach(function(key) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:28:30.420

这在 Javascript 中非常简单。您可以像这样访问变量`data`：

```
alert(data[0]); 
```

这应该提醒“圣地亚哥 acls”。使用循环对所有这些执行相同的操作。您可以使用运算符轻松连接字符串`+`。

```
var result = "";
for (var dString in data) { 
    result += dString + ", ";
} 
```

这将创建一个名为`result`的字符串并将数组中字符串的元素添加到其中。如您在问题中所述，它还将在每个元素之间添加“，”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T06:44:39.667

这个也有效。

```
$(document).ready(function(){
    var data = {"0":"San Diego acls","1":"San Diego pals","2":" San Diego CPR","3":" Temecula acls","4":" Temecula pals"};
    var csv = $.map(data,function(data){ return data;});
    alert(csv);
}); 
```

[jsfiddle 演示](http://jsfiddle.net/fzWwU/5/)

# xcode4 - 如何使用 XCode 在 Mac oSX Lion 上安装 Allegro 5

> ID：11061064
> 
> 赞同：0
> 
> 时间：2012-06-16T05:23:01.193
> 
> 标签：xcode4, osx-lion, allegro5

我是 Mac 开发的新手，想知道如何在我的 Mac 上安装 Allegro 5。我想在 Xcode 中使用 allegro，我正在运行 Lion。如何安装快板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:29:33.373

这可以在这里找到：[http ://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework](http://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework)

如果您使用的是 OS X Lion (10.7.x) 和 Xcode 4.3，您将遇到未在 wiki 中解释的问题。当我尝试创建一个新项目并按照指示包含所有框架时，经过几个小时的努力寻找答案，我终于偶然发现了我的问题。

您可能会看到类似于以下内容的错误：

`Undefined symbols for architecture x86_64: "_main", referenced from: ......`

这是因为无论出于何种原因，AllegroMain-5.0.framework 未添加到摘要->链接的框架和库中。一旦你添加它它应该工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T13:14:25.977

*   [在http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)中安装自制软件

按照以下步骤使用 Brew：

冲泡安装cmake

brew install zlib brew install freetype brew install jpeg brew install libogg brew install physfs brew install libpng brew install flac brew install ffmpeg

冲泡安装快板5

为我工作

# iphone - 如何配置iad为iphone添加adwhirl

> ID：11061070
> 
> 赞同：0
> 
> 时间：2012-06-16T05:23:50.563
> 
> 标签：iphone, objective-c

我在我的应用程序中配置了 adwhirl 但未显示添加的苹果帐户中是否需要为 iad 进行任何配置？如果需要苹果帐户中的 iad 任何设置，请指导我并告诉我如何在 adwhirl 中配置这些设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:47:20.813

请参阅[此](http://www.raywenderlich.com/5350/how-to-integrate-adwhirl-into-a-cocos2d-game)以将 adwhirl 集成到 iad 和其他广告。

[通过登录 adwhirl 在您的adwhirl](https://www.adwhirl.com/)帐户上添加 iad 帐户

下载最新的 AdwhirlAPI 并添加到您的项目中。参考[Api](https://code.google.com/p/adwhirl-with-iad/downloads/detail?name=AdWhirl_pro.zip&can=2&q=)和[设置](https://www.adwhirl.com/doc/ios/AdWhirliOSSDKSetup.html)链接

在你的控制器的 .h 中

```
@interface yourController : <AdWhirlDelegate> 
```

现在在 .m 文件中执行以下操作，您可以在其中使用 adwhirl：

1) 定义AdwhirlKey

```
 #define kSampleAppKey @"your adwhirl key" 
```

2）在viewDidLoad中添加代码

```
 AdWhirlView *awView = [AdWhirlView requestAdWhirlViewWithDelegate:self];
  [awView setFrame:CGRectMake(0,326,320,50)];//set your frame
  [awView setDelegate:self];
  [self.view addSubview:awView]; 
```

3) 添加 AdwhirlDelegate 方法

```
 - (NSString *)adWhirlApplicationKey
  {
    return kSampleAppKey;
  }

  - (UIViewController *)viewControllerForPresentingModalView
 {
   return self;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:48:10.047

要在您的应用程序中使用 AdWhirl，您需要在此处注册：

[https://www.adwhirl.com/home/register](https://www.adwhirl.com/home/register)

从这里您将获得一个唯一的密钥。下载 Adwhirl 的 API，然后将密钥集成到其中。Adwhirl 以百分比方式管理 iAd、admob 等。当一个加载失败时，adwhirl 会加载另一个。

你也可以参考这个链接：

[http://www.raywenderlich.com/5350/how-to-integrate-adwhirl-into-a-cocos2d-game](http://www.raywenderlich.com/5350/how-to-integrate-adwhirl-into-a-cocos2d-game)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T05:51:17.697

您可能需要考虑改用新的 Admob 中介，因为我相信 adwhirl 很快就会不受支持，因为他们现在专注于 AdMob（两者都归谷歌所有）。

# c - 32 位 Linux 和 64 位 Linux（英特尔台式机 CPU）上的默认 C 调用约定是什么？

> ID：11061073
> 
> 赞同：4
> 
> 时间：2012-06-16T05:24:45.823
> 
> 标签：c, linux, gcc

什么是静态函数的默认调用约定说：

```
static void PrintHelloWorld(char* s) { } 
```

在下面

Linux：

```
#36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

与

```
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 Linux ubuntu 3.2.0-23-generic 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T07:01:47.937

在您列出的体系结构和编译器（Linux x86_64）下，使用了[System V AMD64 ABI](http://www.x86-64.org/documentation/abi.pdf)中描述的调用约定。

在 Linux i386 下，使用[System V i386 ABI](http://www.uclibc.org/docs/psABI-i386.pdf)中描述的调用约定。

# javascript - 如何刷新页面中的特定div？

> ID：11061078
> 
> 赞同：0
> 
> 时间：2012-06-16T05:26:13.073
> 
> 标签：javascript, jquery, html

有谁知道如何刷新页面中的特定 div，我不想加载整个页面，而是加载某个 div。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:31:07.790

虽然我仍在自我学习的过程中，但我认为您本质上所说的是 AJAX。jQuery 库为您提供了许多进行 AJAX 调用的方法，有些是高级的，有些是低级的。在 jQuery 主页中搜索 .load() 以获得高级解决方案，并在 .ajax() 中搜索低级解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:28:48.320

不，这是不可能的，但您可以使用 ajax 更新 div 上的内容（不完全刷新）。

编辑：您可以使用简单的 javascript 来完成 ajax 请求。在 ajax 中，请求被发送到服务器，该服务器发送回一些数据，这些数据可用于更新 div 内的 html。www.w3schools.com/ajax/default.asp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T05:51:55.360

这是一种方法，告诉我它是否有效：

```
<html>
<head>
    <script>
    $(document).ready(function(){
    $.post(
        "anotherpage.php",
        {"field":"value"},
        function(r){ 
            if(r!==''){ 
                $(".replace").html(r); 
            } 
        });
    });
    </script>
</head>
<body>
    <div>Some text</div>
    <div class="replace">Default Text</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T15:16:21.750

Ajax 是您最好的选择，但它并不是 jQuery 独有的。如果您仍然不使用 jQuery，您会发现自己编写脚本比将整个 jQuery 库与您的站点一起加载更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T05:30:07.273

它被称为`jquery`。它是一个 javascript 库，可以用更少的代码使许多函数更容易编写。`Ajax`是它的一部分，也是您用来发出 Http 请求以将动态内容放入 div 的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-21T18:36:59.733

使用 jQuery 和 PHP (AJAX) 很容易做到，您可以从数据库或网页的任何地方加载新值，还可以设置时间间隔，请查看此链接：

[http://phphere.blogspot.com/2013/12/how-to-refresh-particular-div-in.html](http://phphere.blogspot.com/2013/12/how-to-refresh-particular-div-in.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T05:41:32.387

如果您不想重新加载整个页面，那么您可以使用`jQuery Ajax`。但是使用它您只能更改 div 标签的内容而不刷新整个页面

# iphone - 如何显示显示服务器端延迟的警报视图

> ID：11061079
> 
> 赞同：-1
> 
> 时间：2012-06-16T05:26:19.893
> 
> 标签：iphone, ios5, uialertview, delay

服务器端有一个延迟，大约 10 秒。我想显示一个 alertView 显示服务器中的延迟。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:34:38.597

如果延迟固定为 10 秒。然后你可以把一个自定义的 AlertView 显示一个指示器等待 10 秒并在 10 秒后关闭 AlertView。您可以使用 NSTimer 来管理 10 秒的时间间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:28:02.880

您还可以显示一个活动指示器，表明请求当前正在进行中，如果请求完成，则删除活动指示器。

# php - Zend_Filter_Encrypt 和内存

> ID：11061080
> 
> 赞同：1
> 
> 时间：2012-06-16T05:26:25.073
> 
> 标签：php, zend-framework, zend-filter

有没有办法使用`Zend_Filter_Encrypt`大文件，而不会将内存限制增加到不可接受的数量？

到目前为止，这是我的代码，但是当我必须加密大于 32 MB（这是我的内存限制）的文件时，它会失败，如果我将内存设置为 48MB，它就可以工作：

```
$vector = 'XX';

$algorithm = 'rijndael-192';

$options = array(
    'adapter'   => 'mcrypt',
    'vector'    => $vector,
    'algorithm' => $algorithm,
    'key'       => $key
);

$encrypt = new Zend_Filter_File_Encrypt($options);
$result = $encrypt->filter($file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:41:50.690

不，没有。 `Zend_Filter_Encrypt`通过一次性加密/解密数据来工作，因此需要完整的数据才能运行。

如果您需要解密大文件，您可以手动分小块进行。

```
<?php

$key    = 'secret key';
$iv     = 'xxxxxxxxxxxxxxxx';
$cipher = mcrypt_module_open('rijndael-192', '', 'cbc', '');

mcrypt_generic_init($cipher, $key, $iv);

$fp = fopen('/tmp/encrypted.txt', 'r+b');
while (!feof($fp)) {
    $data = fread($fp, 1154);

    $decrypted = mdecrypt_generic($cipher, $data);

    echo $decrypted;
}

fclose($fp);
mcrypt_generic_deinit($cipher);
mcrypt_module_close($cipher); 
```

只需确保您读取的数据量（fread）是算法使用的块大小的倍数，否则结果可能会出乎意料。

# jquery - 在 jQuery 事件上更新 MySQL 表

> ID：11061082
> 
> 赞同：0
> 
> 时间：2012-06-16T05:26:54.713
> 
> 标签：jquery, mysql

我有一个从 1 小时倒计时到零的计时器。当它达到零时，jQuery 会触发一个事件（代码如下）。

我需要将数据库表更新为当前的-1。（所以比如表格的数值设置为20，倒计时到零后变成19，以此类推）。

我的问题是 - 如何基于 jQuery 函数以这种方式更新 MySQL 数据库？我曾尝试使用 PHP，但它会立即更新表格，而不是在倒计时达到零时。（我已经尝试过搜索这个，现在我意识到 PHP 是服务器端，而 jQuery 是客户端，但我仍然不知道如何让这样的事情工作）。

非常感谢您的帮助！

```
 <script type="text/javascript">

var year=2012;        //Set initial values for timer
var month=06;          
var day=16;           
var hour=17;          
var minute=10;        
var tz=+12;            

var montharray=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");

function countdown(yr,m,d,hr,min){
    theyear=yr;themonth=m;theday=d;thehour=hr;theminute=min;
    var today=new Date();
    var todayy=today.getYear();
    if (todayy < 1000) {
    todayy+=1900; }
    var todaym=today.getMonth();
    var todayd=today.getDate();
    var todayh=today.getHours();
    var todaymin=today.getMinutes();
    var todaysec=today.getSeconds();
    var todaystring1=montharray[todaym]+" "+todayd+", "+todayy+" "+todayh+":"+todaymin+":"+todaysec;
    var todaystring=Date.parse(todaystring1)+(tz*1000*60*60);
    var futurestring1=(montharray[m-1]+" "+d+", "+yr+" "+hr+":"+min);
    var futurestring=Date.parse(futurestring1)-(today.getTimezoneOffset()*(1000*60));
    var dd=futurestring-todaystring;
  //  var dday=Math.floor(dd/(60*60*1000*24)*1);
    var dhour=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1);
    var dmin=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1);
    var dsec=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1);
    if(dhour<=0&&dmin<=0&&dsec<=0){

      //--TIMER REACHES ZERO HERE. Code needed to update MySQL would go here?

    }
    else {
        document.getElementById('count2').style.display="none";
      // document.getElementById('dday').innerHTML=dday;
        document.getElementById('dhour').innerHTML=dhour;
        document.getElementById('dmin').innerHTML=dmin;
        document.getElementById('dsec').innerHTML=dsec;
        setTimeout("countdown(theyear,themonth,theday,thehour,theminute)",1000);
    }
}
</script> 
```

PS。这是我尝试用来更新我的数据库表的 PHP 代码：

```
<?php
        include("db.php");
        mysql_select_db("myData") or die(mysql_error());
        mysql_query("UPDATE cards SET buy=0.01 WHERE id='67'") or die(mysql_error());
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:19:57.483

```
You have to use $.ajax ([http://api.jquery.com/jQuery.ajax/][1]) to do it because jQuery alone do not have access to the database on the server.
In your javascript code inside the if :     

if(dhour<=0&&dmin<=0&&dsec<=0){

      //--TIMER REACHES ZERO HERE. Code needed to update MySQL would go here?

      $.ajax({ 
          url: "pathToYourPHPUpdateScript.php",
          type: "POST",
          success: function(){
            alert("MYSQL UPDATED!");
          }
      });

    } 
```

# iphone - CTFrameGetVisibleStringRange 错误地计算字符串末尾的空格？

> ID：11061090
> 
> 赞同：0
> 
> 时间：2012-06-16T05:29:40.080
> 
> 标签：iphone, ios, cocoa-touch, core-text

我正在使用`CoreText`，我注意到`CTFrameGetVisibleStringRange`错误地将字符串末尾的空格计算为可见，这些空格在框架中不可见。仅供参考，我将空格作为字符串 @"" 添加`insertAttributedString`到我的`NSMutableAttributedString`. 有谁知道如何解决这一问题？

更新：仍然没有找到解决方案，这是预期的行为吗？或者这只是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T16:58:13.370

这是一个错误。要解决此问题，请将字符串末尾的“”替换为其他内容，执行您需要做的任何事情，然后在末尾重新插入“”。

# iphone - 请求异步ftp请求时程序卡住

> ID：11061092
> 
> 赞同：0
> 
> 时间：2012-06-16T05:30:11.347
> 
> 标签：iphone, objective-c, ipad, asynchronous

我在异步进行ftp请求时遇到了一个问题，我尝试清楚地描述确切的问题：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //I want to do a ftpListRequst in the background here
    dispatch_async(dispatch_get_global_queue(0, 0), ^{

        NewFTPListService *nfl = [[NewFTPListService alloc] initWithFtpPath:@"ftp://root:@10.0.0.3/"];

        [nfl listDirectoryContents];

        [nfl release];

    }); 

    //other main thread code
}

- (NSArray *) listDirectoryContents
{   
    [_listDir start];

    //What I want to do here is to wait until the ftp request finish
    while (!self.isFinish) {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    }

    NSLog(@"Request Finish!");

    return self.result;
}

-(void) start {
    ......
    self.streamInfo->readStream.delegate = self;
    [self.streamInfo->readStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.streamInfo->readStream open];

    //If request is blocked (may be the server is not avaliable), after a specific time, this block will be called
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, kWRDefaultTimeout * NSEC_PER_SEC), dispatch_get_current_queue(), ^{       
        [self.delegate requestFailed:self];
        [self destroy];
    });

} 
```

当请求成功时，会调用这个方法：

```
-(void) requestCompleted:(WRRequest *) request{

    self.isSucess = YES;
    self.isFinish = YES;
} 
```

此方法将在“dispatch_after”块中调用

```
-(void) requestFailed:(WRRequest *) request{
    self.isSucess = NO;
    self.isFinish = YES; 
} 
```

当请求成功时，我看到打印“请求完成！”。当请求被阻止并调用“dispatch_after”块时，会调用“requestFailed”方法，但我没有看到打印“请求完成！”。似乎程序以某种方式卡在了while循环中（循环没有运行，之后的代码也没有运行）。

更重要的是，如果我同步运行程序：

```
- (void)viewDidLoad
    {
        [super viewDidLoad];

        NewFTPListService *nfl = [[NewFTPListService alloc] initWithFtpPath:@"ftp://root:@10.0.0.3/"];

        [nfl listDirectoryContents];

        [nfl release];
    } 
```

即使请求失败，我也可以成功看到打印“请求完成！”。我想知道为什么会发生这种情况以及如何解决这个问题，以便在请求失败时可以成功运行程序。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:13:43.803

嗨只需通过 performSelector 调用此方法

```
[nfl listDirectoryContents]; 
```

或者在 viewDidAppear 方法中调用这个方法。

# c# - 使用 NPOI 1.2.5.0 时将 Excel 单元格设置为粗体时出现编译错误

> ID：11061094
> 
> 赞同：0
> 
> 时间：2012-06-16T05:30:38.080
> 
> 标签：c#, npoi

我们正在尝试在 excel 、 Visual Studio 2008 中加粗一行，

框架 3.5 NPOI 1.2.5.0 - 出现编译错误

以下是代码片段，

```
ICellStyle style1 = templateWorkbook.CreateCellStyle();
style1.SetFont(font1);
HSSFWorkbook hssfworkbook = new HSSFWorkbook();
HSSFFont font = (HSSFFont)hssfworkbook.CreateFont();
font.Boldweight = HSSFFont.BOLDWEIGHT_BOLD;
style1.SetFont(font1); 
```

它在我们编写的行上给出编译错误 `font.Boldweight = HSSFFont.BOLDWEIGHT_BOLD;`

```
compile Error    2    
'NPOI.HSSF.UserModel.HSSFFont' does not contain a definition for 'BOLDWEIGHT_BOLD'   
C:\SampleApp\XLSFormatDotNet\XLSFormatingDLL\Class1.cs   301    60    XLSFormatingDLL 
```

互联网上的示例代码显示相同的语法，但我得到这个编译器错误，看起来很奇怪，

请帮我。欢迎任何建议。

问候假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:39:37.220

HSSFFont 是一个类（参见[http://npoi.codeplex.com/SourceControl/changeset/view/64939#134674](http://npoi.codeplex.com/SourceControl/changeset/view/64939#134674)）。该`Boldweight`属性是类型`short`，并且有一个枚举可以帮助您设置属性：

```
public enum FontBoldWeight:short
{
        /**
     * Normal boldness (not bold)
     */

    NORMAL = 0x190,

    /**
     * Bold boldness (bold)
     */

    BOLD = 0x2bc,
} 
```

你应该尝试做这样的事情：

```
 font.Boldweight = FontBoldWeight.BOLD; 
```

也许他们已经从常量变为枚举并且没有更新他们的样本。

# django - 在 Django 中构建选择选项

> ID：11061098
> 
> 赞同：1
> 
> 时间：2012-06-16T05:31:37.513
> 
> 标签：django, forms, drop-down-menu

我想创建一个表单，当查看时，从数据库中查询用户最喜欢的水果并显示如下：

```
<select size="4"> 
<option selected>Apples</option>
<option>Bananas</option> 
<option>Oranges</option>
<option>Watermelon</option> 
</select> 
```

使用该表单的视图将：

1.  获取用户对象。
2.  在数据库中查询用户最喜欢的水果。（每个都是 Fruit 模型的一个单独对象。）
3.  将 (2) 中收集的水果选项加载到表单中。

我正在考虑使用 ChoiceField，但看起来您无法将选项列表动态加载到表单中，至少以简单的方式。我最好跳过表单并直接在模板上生成代码吗？或者有没有办法在视图中加载表单的 ChoiceField 和用户项？

此外，是否有任何一般的经验法则规定使用 django 表单字段构建表单与在模板中生成表单代码更容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T14:37:06.630

[我在这个堆栈溢出主题](https://stackoverflow.com/questions/5329586/django-modelchoicefield-filtering-query-set-and-setting-default-value-as-an-obj/%22this%20stack%20overflow%20topic%22)中找到了答案。诀窍是覆盖表单`__init__()`，以便它接受一个新的关键字参数，在这种情况下是用户。

**views.py 片段**

```
context = RequestContext(request)
user = User.objects.get(username=context['user'])
form = forms.FruitForm(user=user) 
```

**forms.py 片段**

```
from django import forms

class FruitForm(forms.Form):
    fruits = forms.ModelChoiceField(queryset=Fruit.objects.all())

    def __init__(self, *args, **kwargs):
        user = kwargs.pop('user', None)
        super(FruitForm, self).__init__(*args, **kwargs)
        if user:
            self.fields['fruits'].queryset = Fruit.objects.filter(user=user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:14:46.277

创建将在您的视图中使用的[Form](https://docs.djangoproject.com/en/dev/topics/forms/)或[ModelForm 。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)这两个类之间的区别在于它们的`ModelForm`构建非常类似于`models.py`文件中定义的数据库模型，其中`Form`可以具有自定义属性。

```
from django.forms import ModelForm
class FruitForm(ModelForm):
    class Meta:
        model = User
        fields = ('favorite-fruits', ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T05:42:03.990

这并不难。您可以使用模型表单轻松完成此操作。

请参阅：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

Django 框架的优势之一是它的表单处理和验证方法。因此，如果可能，最好使用 Django 表单或模型表单。

# javascript - 从循环中的克隆元素中删除元素时的奇怪行为

> ID：11061100
> 
> 赞同：0
> 
> 时间：2012-06-16T05:32:19.323
> 
> 标签：javascript, jquery

我正在制作一个 ajax 应用程序，它接收一个列表，`<li>`使用 clone() 制作一个 html 并将其附加到`<ul>`.

```
 $.each(arr, function(i) {
    var item = $('#template').clone(true);
        if(arr[i].isTypeA) {
            item.find('.TypeB').remove(); 
        } else {
            item.find('.TypeA').remove();
        }
    }); 
```

但是循环后附加的项目`<ul>`没有元素（.TypeA）。

这个问题是否来自克隆（）？还是从关闭？

我正在寻找解决方案，但还没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:37:02.550

我解决问题！

克隆模板后，删除模板的 id 属性。

```
item.attr('id', ''); 
```

# javascript - 如何在javascript中减去时间

> ID：11061101
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:32:50.273
> 
> 标签：javascript, cookies, time

我目前正在我的代码中设置一个持续 10 分钟的 cookie。在页面上，我想告诉这个人在 cookie 过期之前还剩多少分钟。所以我要做的是设置另一个代码来保持设置cookie的时间。

但我不知道如何减去 2 时间（cookie 时间 - 当前时间）。

例如，如果我将 cookie 设置为 12:55。我如何得到时间之间的差异，比如说：1:03 得到“还剩 2 分钟”？

真的不知道如何做到这一点，但我希望你这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T05:39:57.770

你可以在 JavaScript 中减去日期。

```
var millisecondsBetween = (new Date(2012, 1, 1)) - (new Date(2011, 1, 1)); 
```

将产生它们之间的毫秒数，因为`-`运算符将其参数强制转换为最终调用的数字，`Date.prototype.valueOf`该数字仅返回自纪元开始以来的毫秒数。

# java - 我的 Swing 应用程序可能不是线程安全的——虽然不知道为什么

> ID：11061105
> 
> 赞同：3
> 
> 时间：2012-06-16T05:33:49.513
> 
> 标签：java, multithreading, swing

应评论者的要求进行了编辑。我希望这是合规的。

第一次发帖！试图理解为什么我的 Swing 应用程序不会从一个面板前进到下一个面板。这是代码的一般流程：

```
public class MainWindow {

JFrame mainFrame;
ChangeablePanel currentScreen; // abstract and extends JPanel, has getters &
setters for a Timer (swing timer), a String (nextScreen), and an Image 
(background image).  also has a close(AWTEvent e) method that simply calls 
"this.setVisible(false);"

public MainWindow() {
    mainFrame = new JFrame("New Arcana");
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       
    setTitleFrame();
} // MainFrame constructor

public void changeFrame(String frameType, String frameName) {               
    switch (frameType) {
        case "Title":
            setTitleFrame();
            break;
        case "Town":
            setTownFrame(frameName);
            break;
        case "Movie":
            setMovieFrame(frameName);               
            break;
        default:
            break;
    } // switch     
} // changeFrame

private void setTitleFrame() {      
    currentScreen = new TitlePanel();
    currentScreen.addComponentListener(new ScreenChangeListener());
    ...             
    mainFrame.setContentPane(currentScreen);
    mainFrame.setSize(titleScreenLength, titleScreenHeight); // put constants here if you want
    mainFrame.setLocationRelativeTo(null);
    mainFrame.setVisible(true);
} // setTitleFrame

private void setTownFrame(String townName) {        
    currentScreen = new TownPanel(townName);
    currentScreen.addComponentListener(new ScreenChangeListener());
    ...     
    mainFrame.setContentPane(currentScreen);        
    mainFrame.setSize(townScreenLength, townScreenHeight); // put constants here if you want
    mainFrame.setVisible(true);     
} // setTownFrame

private void setMovieFrame(String movieName) {      
    currentScreen = new MoviePanel(movieName);
    currentScreen.addComponentListener(new ScreenChangeListener());
    ...
    mainFrame.setContentPane(currentScreen);
    mainFrame.setSize(titleScreenLength, titleScreenHeight); // put constants here if you want      
    mainFrame.setVisible(true);     
} // setMovieFrame

private class ScreenChangeListener implements ComponentListener {
    @Override
    public void componentHidden(ComponentEvent e) {
        gotoNextScreen(e);
    }

    public void componentMoved(ComponentEvent e) {}

    public void componentResized(ComponentEvent e) {}

    public void componentShown(ComponentEvent e) {}     
} // ScreenChangeListener

public void gotoNextScreen(ComponentEvent e) {        
    changeFrame(currentScreen.getNextScreen(), null);   
}
} // MainWindow

public class Start {
...
public static void main(String[] args) {
    initialize();   

    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new MainWindow();
        }
    });   
} // main
...
} // Start

public class TitlePanel extends ChangeablePanel implements ActionListener {

JButton newGame, continueGame;

public TitlePanel() {       
    setFocusable(true);     
    ...

    newGame = new JButton("New Game");
    continueGame = new JButton("Continue");     

    newGame.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            setNextScreen("Movie");
            close(e);               
        }       
    });

    add(newGame);
    add(continueGame);

    createTimer(10, this);
    getTimer().start();
} // TitlePanel constructor

@Override
public void actionPerformed(ActionEvent e) {
    repaint();      
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;        
    drawTitleScreen(g2d);       
} // paintComponent

private void drawTitleScreen(Graphics2D g2d) {
    g2d.drawImage(getBGImage(), 0, 0, null);
    newGame.setLocation(170, 550);
    continueGame.setLocation(605, 550);
} // drawTitleScreen
} // TitlePanel

public class MoviePanel extends ChangeablePanel implements ActionListener { 

public MoviePanel(String movieName) {       
    setFocusable(true); 

    addKeyListener(new AnyKeyActionListener());
    ...
    createTimer(10, this);
    getTimer().start();
} // TitlePanel constructor

@Override
public void actionPerformed(ActionEvent e) {
    repaint();
}

public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2d = (Graphics2D) g;        
    drawMovie(g2d);     
} // paintComponent 

private void drawMovie(Graphics2D g2d) {
    g2d.drawImage(getBGImage(), 0, 0, null);        
} // drawTitleScreen    

private class AnyKeyActionListener extends KeyAdapter {     
    public void keyTyped(KeyEvent e) {
        setNextScreen("Town");
        close(e);
    } // keyPressed     
} // listener to check for keystrokes   
} // MoviePanel 
```

随着应用程序基于用户输入的进展，MainFrame 将填充更多帧（目前，只有 MoviePanel 和 TownPanel 被编码），它们的代码与这个非常相似——我也粘贴了 MoviePanel。

在上面的基于 KeyAdapter 的侦听器之后执行中断。但是，当我在带有断点的 Eclipse 中以调试模式运行我的应用程序时，这确实完成了它应该做的事情，并从 MoviePanel 前进到 TownPanel。正因为如此，我怀疑线程是这里的罪魁祸首。请注意，我确实在上面的代码块上尝试了 SwingUtilities.invokeLater() 技术的许多不同组合，但它没有改变任何东西。任何帮助，将不胜感激; 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:01:02.357

请执行下列操作：

*   invokeLater 用于在 GUI 事件调度线程上创建
*   施工期间没有 repaint()
*   最后设置可见

特别是在事件监听器上再次使用 invokeLater，让按钮等响应，然后也采取响应行动。

```
public static void main(String[] args) {
    ...
    SwingUtilities.invokeLater() {
        @Override()
        new Runnable() {
            new MainFrame().setVisible(true);
        }
    };        
} 
```

* * *

***代码审查***

`TitlePanel.TitlePanel`更好地使用绝对布局（这意味着 null），而不是在绘画代码中使用`setLocation`。

```
 setLayout(null);
    newGame = new JButton("New Game");
    continueGame = new JButton("Continue");
    newGame.setBounds(170, 550, 120, 24);
    continueGame.setBounds(605, 550, 120, 24); 
```

在`ChangeablePanel.close`确保也`timer.stop()`。

`MainWindow`使用中`invokeLater`：

```
public void gotoNextScreen(ComponentEvent e) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            changeFrame(currentScreen.getNextScreen(), null);
        }
    });   
} 
```

在`MoviePanel` **我看不到它`addKeyListener`可以起作用**；也许是遗漏的代码？或者这可能是您看到的错误？此外，我发现一个简单的`repaint()`可疑之处；会期待这样的事情：

```
public void actionPerformed(ActionEvent e) {
    invalidate();
    repaint(10L);
} 
```

# php - 无法为 Google CSE 打印 Json 结果字符串

> ID：11061106
> 
> 赞同：0
> 
> 时间：2012-06-16T05:34:00.080
> 
> 标签：php, json

我是 Json 的新手，我已经应用了适用于谷歌图像 API 的方式，我想知道将它用于谷歌 CSE 的方式是否相同？

```
$url ="https://www.googleapis.com/customsearch/v1?key=WHATEVER&cx=017728263617760474213:e_b2kmmuyco&q=standard%20form";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, "http://localhost/GSearch2.php");
$body = curl_exec($ch);
curl_close($ch);

$json = json_decode($body);
print_r($json->items); 
```

没有结果也没有错误出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:03:13.277

[从 PHP 手册](http://us2.php.net/manual/en/function.json-decode.php)：

> 如果无法解码 json 或编码的数据深度超过递归限制，则返回 NULL。

由于递归深度在 PHP 5.3.0 中从 128 增加到 512，很有可能这不是问题，因此`$body`可能不包含有效的 JSON。确保`$url`指向有效 JSON 的值并查看[`json_last_error()`](http://us2.php.net/manual/en/function.json-last-error.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:15:28.290

您是否尝试检查 HTTP 响应正文 [可能是通过打印它]？

有时，像 Google 这样的 Web 服务会在 json 内容本身中指示服务器端错误。

前任：

你期待一个 json 字符串`{ "items": "Sample item" }`

但响应 json 字符串类似于`{ "error" : "invalid key/id1" }`

*[对不起，我不是很擅长 PHP，但我使用过 Google API 和 CURL]*

# backbone.js - Backbone.JS：实例化视图

> ID：11061109
> 
> 赞同：1
> 
> 时间：2012-06-16T05:34:34.877
> 
> 标签：backbone.js

首先，我创建了一些主干视图：

```
(function() {

    var SomeView = Backbone.View.extend({ ... });

    // finally on ready
    $(function() {
        // init my view
        var v = new SomeView({...});
    });

})(); 
```

现在，正如我们所见，我正在 jQuery 就绪函数中实例化视图，并将实例分配给**局部**变量，一旦函数退出，该变量将丢失。但是，我注意到我的视图完美地工作——即，即使我失去了对视图的引用，它也能正常工作。

我想这是因为涉及到许多闭包，并且所有必需的变量实际上都保存在这些闭包中。

所以，我的问题是：这样实例化视图是否可以。不保存对它的引用是否可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:08:22.200

如果您不再需要对视图的引用，这完全没问题。您可以在实例化视图后渲染视图（甚至在其构造函数中进行），它会将生成的 HTML 插入 DOM（取决于您在视图上设置的选项）。当然，如果您稍后需要从视图之外的某些代码中调用某些视图方法，您将需要在某处保留对视图的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:19:30.200

你的理解是正确的，如果你不需要从外部调用这个视图，那么你当然不需要记录这个引用。不过你的例子太简单了，实际情况一般需要记录下这个参考。btw：有很多backbone的最佳实践，希望对你有用：[http ://ricostacruz.com/backbone-patterns](http://ricostacruz.com/backbone-patterns)

# javascript - SVG：获得路径的精确边界框？

> ID：11061114
> 
> 赞同：2
> 
> 时间：2012-06-16T05:34:59.657
> 
> 标签：javascript, browser, svg

`SVGPath.getBBox()`至少在 WebKit 中的实现似乎有些粗制滥造；有没有比走路径更好（更便宜）的方法（或随机反复采样），手动计算其可能的边界框以获得良好的读数？

[http://bl.ocks.org/2939938](http://bl.ocks.org/2939938)（或[https://gist.github.com/2939938](https://gist.github.com/2939938)）显示了后者的一个示例，当我在几个不同的相当现代的浏览器中运行它时，本机实现。Opera 是最好的，Firefox 好，Chrome / Safari 很差：

```
616.1572 677.0540 127.6856 126.8793 - sampled, gathering random coords for 5s (reference)
616.1569 677.0538 127.6860 126.8796 - opera 11.64 build 1403
616.1563 677.0547 127.6875 126.8789 - firefox aurora 15.0a2 (2012-06-15)
614.2805 673.9761 136.2089 129.9573 - chrome canary 21.0.1176.0
614.2805 673.9761 136.2089 129.9573 - safari 5.1.7 (7534.57.2) 
```

或者，参考边界框的左侧/顶部/宽度/高度变化百分比：

```
0.00005% 0.00003% 0.00031% 0.00024% - opera
0.00015% 0.00010% 0.00149% 0.00032% - firefox
0.30458% 0.45460% 6.67522% 2.42593% - chrome
0.30458% 0.45460% 6.67522% 2.42593% - safari 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:20:11.407

事实证明[Raphael.js](http://raphaeljs.com/)实现了一个相当出色的[Raphael.pathBBox](http://raphaeljs.com/reference.html#Raphael.pathBBox)，适用于你有一个`<path>`元素的情况；它似乎在代数上是精确的，而且速度很快。添加到比较测试页面。

# php - 未发布数据：意外的 T_STRING

> ID：11061117
> 
> 赞同：0
> 
> 时间：2012-06-16T05:35:54.340
> 
> 标签：php, mysql, html, forum

我的操作方式有问题，我尝试了一些不同的方法，但似乎没有任何效果。

当我像下面的代码一样拥有它时，它可以工作，但不会插入用户名数据。

我收到带有消息“解析错误：语法错误，意外的 T_STRING”的错误页面

```
<?php

include "connect.php"; //connection string

print "<link rel='stylesheet' href='style.css' type='text/css'>";

print "<table class='maintables'>";

print "<tr class='headline'><td>Post a message</td></tr>";

print "<tr class='maintables'><td>";

if(isset($_POST['submit']))

{

   $name=$_POST['name'];

   $yourpost=$_POST['yourpost'];

   $subject=$_POST['subject'];

   if(strlen($name)<1)

   {

      print "You did not type in a name."; //no name entered

   }

   else if(strlen($yourpost)<1)

   {

      print "You did not type in a post."; //no post entered

   }

   else if(strlen($subject)<1)

   {

      print "You did not enter a subject."; //no subject entered

   }

   else

   {

      $thedate=date("U"); //get unix timestamp

      $displaytime=date("F j, Y, g:i a");

      //we now strip HTML injections

      $subject=strip_tags($subject);

      $name=strip_tags($name);

      $yourpost=strip_tags($yourpost); 

      $insertpost="INSERT INTO forumtutorial_posts(author,title,post,showtime,realtime,lastposter) values('$name','$subject','$yourpost','$displaytime','$thedate','$name')";

      mysql_query($insertpost) or die("Could not insert post"); //insert post

      print "Message posted, go back to <A href='index.php'>Forum</a>.";

   }

}

else

{

   print "<form action='post.php' method='post'>";

   print "<input type='hidden' name='name' value='<? echo("$_SESSION[usr_name]");?>' size='20'><br>";

   print "Subject:<br>";

   print "<input type='text' name='subject' size='20'><br>";

   print "Your message:<br>";

   print "<textarea name='yourpost' rows='5' cols='40'></textarea><br>";

   print "<input type='submit' name='submit' value='submit'></form>";

}

print "</td></tr></table>";

?> 
```

如果我这样做是为了让用户根据需要输入用户名，它可以工作，但我希望它像上面的代码一样与我们的系统会话一起工作。

还有其他方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:40:00.733

## 问题

您提供的细节不多，但我在这里至少看到一个语法错误：

```
print "<input type='hidden' name='name' value='<? echo("$_SESSION[usr_name]");?>' size='20'><br>"; 
```

您只是缺少字符串和变量之间的有效字符：

```
print "<input (...) echo("$_SESSION[usr_name]"); (...)";
                         ^^                 ^^ 
```

但是试图猜测你想要什么，我敢打赌你基本上在字符串中包含 PHP 代码，在 PHP 代码中，你做错了。

## 解决方案

改为这样做：

```
print "<input type='hidden' name='name' value='$_SESSION[usr_name]' size='20'><br>"; 
```

甚至更清洁：

```
print '<input type="hidden" name="name" value="' . $_SESSION[usr_name] . '" size="20"><br>'; 
```

# javascript - Node.js 请求返回 301 重定向

> ID：11061118
> 
> 赞同：11
> 
> 时间：2012-06-16T05:36:16.333
> 
> 标签：javascript, node.js, http, nginx, http-redirect

我是 node.js 的新手，但我想尝试一些基本代码并提出一些请求。目前，我正在使用 OCW 搜索（[http://www.ocwsearch.com/](http://www.ocwsearch.com/)），我正在尝试使用他们的示例搜索请求提出一些基本请求：

但是，无论我尝试提出什么请求（即使我只是查询 google.com），它都会返回给我

```
<html>
<head><title>301 Moved Permanently</title></head>
<body bgcolor="white">
<center><h1>301 Moved Permanently</h1></center>
<hr><center>nginx/0.7.65</center>
</body>
</html> 
```

我不太确定发生了什么事。我查找了 nginx，但大多数关于它的问题似乎都是由设置自己的服务器的人提出的。我尝试使用 https 请求，但返回错误“ENOTFOUND”。

我的代码如下：

```
var http = require('http');

http.createServer(function (request, response) {
  response.writeHead(200, {'Content-Type': 'text/plain'});
    response.end('Hello World\n');

    var options = {
      host:'ocwsearch.com',
      path:
      '/api/v1/search.json?q=statistics&contact=http%3a%2f%2fwww.ocwsearch.com%2fabout/',
      method: 'GET'
    }  

    var req = http.request(options, function(res) {
      console.log("statusCode: ", res.statusCode);
      console.log("headers: ", res.headers);
      res.on('data', function(d) {
            process.stdout.write(d);
      });
    });
    req.end();

    req.on('error', function(e) {
      console.error(e);
    });

}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

抱歉，如果这是一个非常简单的问题，感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-12-05T22:14:35.690

对我来说，我试图获取的网站正在将我重定向到安全协议。所以我改变了

```
require('http'); 
```

到

```
require('https'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T05:39:15.850

问题是 Node.JS 的 HTTP 请求模块没有遵循您给出的重定向。

有关更多信息，请参阅此问题： [如何在 Node.js 中遵循 HTTP 重定向？](https://stackoverflow.com/q/7323932/362536)

基本上，您可以查看标头并自己处理重定向，或者为此使用少数几个模块之一。我已经使用了“请求”库，并且我自己也很幸运。 [https://github.com/mikeal/request](https://github.com/mikeal/request)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-29T10:25:28.873

```
var http = require('http');

var find_link = function(link, callback){

  var root =''; 

  var f = function(link){

    http.get(link, function(res) {

      if (res.statusCode == 301) {
        f(res.headers.location);
      } else {
        callback(link);
      } 

    });
 }

  f(link, function(t){i(t,'*')});
}   

find_link('http://somelink.com/mJLsASAK',function(link){
  console.log(link);
});

function i(data){
  console.log( require('util').inspect(data,{depth:null,colors:true}) )
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-11T11:02:17.170

这个问题现在很老了，但我得到了同样的 301 错误，这些答案实际上并没有帮助我解决问题。

我写了同样的代码：

```
var options = {
    hostname: 'google.com',
    port: 80,
    path: '/',
    method: 'GET',
    headers: {
       'Content-Type': 'text/plain',
    }
};

var http = require('http');

var req = http.request(options, function(res) {
    console.log('STATUS:',res.statusCode);
    console.log('HEADERS: ', JSON.stringify(res.headers));
    res.setEncoding('utf8');

    res.on('data', function(chunk) {
        console.log(chunk);
    });
    res.on('end', function() {
        console.log('No more data in response.');
    });
});

req.on('error', function(e) {
    console.log('problem with request: ', e.message);
});
console.log(req);

req.end(); 
```

所以过了一段时间我意识到这段代码中有一个非常小的错误，它是主机名部分：

```
 var options = {
     hostname: 'google.com',
     ... 
```

您必须添加“www”。在你的 URL 之前获取 html 内容，否则会出现 301 错误。

```
var options = {
     hostname: 'www.google.com', 
```

# hash - 仅数字哈希或密码解密

> ID：11061119
> 
> 赞同：1
> 
> 时间：2012-06-16T05:36:22.570
> 
> 标签：hash, encryption

如果我有大量密文数据样本并且它是相应的 ASCII 文本，我想知道是否可以派生一种方法来生成密码或哈希。

密文的一个示例是：01jvaWf0SJRuEL2HM5xHVEV6C8pXHQpLGGg2gnnkdZU= 这将转换为：12540991

ASCII 文本仅包含数字。

我认为这是可能的，因为我们只处理数字，而且我确实有一个密码样本及其 ASCII 翻译。但是我不确定从哪里开始寻找，或者我错了，这样的事情是不可能的。

你们有什么感想 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:44:03.910

如果你试图推导出生成一组给定值和散列的散列的原始算法，你可以尝试主流算法，看看你是否得到任何命中，如果没有，它可能是不可能的，或者只是需要很长时间才能找到，最常见的本土算法往往是全球盐 + 唯一随机盐 + 通用散列函数 SHA256 的多次迭代的组合。

如果您试图反转主流散列函数，那将是不可能的，只有一种方法，您找不到给出散列值的原始文本，如果您仍然想要原始文本，则需要遍历所有可能的值来确定哪个生成了该散列，因为它的数字还不错，只需使用使用过的算法建立一个查找表，散列将是键，生成该散列的文本将是值，一个完成只需查找哈希以找到原始文本。这称为`online attack`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:52:41.967

您所描述的是所谓的[已知明文攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)。这是密码分析的一种形式，所以它当然是*可能的*，尽管好的单向哈希算法被设计成可以抵抗它。

虽然这是可能的，但除非您是密码学专家和经验丰富的密码破解者，否则对于众所周知的散列算法不太可能*实用*——即便如此，这也不是人们所说的短期项目。

当然，本土算法或简单的编码方案是另一回事。如果您的问题是“有可能吗？”，那么答案是“是的”。

# c# - 大量类别和信息的winform设计

> ID：11061122
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:37:18.707
> 
> 标签：c#, winforms

对于那里的应用程序设计人员来说，这将是一个更多的问题，但欢迎所有答案，所以准备好！

我即将开发一个应用程序，它将容纳许多不同的用户控件、信息、视图、类别等。

我一直在思考和研究，但我不确定要研究什么，所以也许你们可以帮助我。我的 windows 窗体需要一种设计类型，可以显示和分类大量信息。例如，想象一下本文末尾显示的类别。

我需要能够让用户以一种不那么令人困惑的方式找到解决所有这些问题的方法。我正在考虑某种选项卡系统或可能使用 Windows 功能区，但我只是觉得这会使事情变得过于复杂并使一切看起来很忙。我也有混合，所以 WPF 是一种选择。

如果您有任何想法、链接、图片或更好的示例，请回答此问题。我更像是一个程序员而不是设计师，所以只要我有东西要设计，我就可以做到。提前谢谢你，我期待看到你展示的设计类型。

（以下是类别的简短示例）

```
A
-> aa
   -> aaa
      -> aaaa
         -> Here lies the user control that will be loaded
       -> aaab
         -> Here lies the user control that will be loaded
       -> aaac
         -> Here lies the user control that will be loaded
   -> aab
      -> aaaa
         -> Here lies the user control that will be loaded
       -> aaab
         -> Here lies the user control that will be loaded
       -> aaac
         -> Here lies the user control that will be loaded
-> ab
   -> aba
      -> abaa
         -> Here lies the user control that will be loaded
       -> abab
         -> Here lies the user control that will be loaded
       -> abac
         -> Here lies the user control that will be loaded
   -> abb
      -> abaa
         -> Here lies the user control that will be loaded
       -> abab
         -> Here lies the user control that will be loaded
       -> abac
         -> Here lies the user control that will be loaded 
```

（这现在是第二个主要类别，其中将有多达 5 个）

```
B
-> ba
   -> baa
      -> baaa
         -> Here lies the user control that will be loaded
       -> baab
         -> Here lies the user control that will be loaded
       -> baac
         -> Here lies the user control that will be loaded
   -> bab
      -> baaa
         -> Here lies the user control that will be loaded
       -> baab
         -> Here lies the user control that will be loaded
       -> baac
         -> Here lies the user control that will be loaded
    -> bb
       -> bba
          -> bbaa
             -> Here lies the user control that will be loaded
           -> bbab
             -> Here lies the user control that will be loaded
           -> bbac
             -> Here lies the user control that will be loaded
       -> bbb
          -> bbaa
             -> Here lies the user control that will be loaded
           -> bbab
             -> Here lies the user control that will be loaded
           -> bbac
             -> Here lies the user control that will be loaded 
```

很可能会有 6 个主要类别，每个类别都有多个子类别。每个类别将是一个按钮或一个更深入的链接，直到单击“aaaa”深度按钮并加载用户控件。

为了帮助进一步解释可能发生的事情。

A被点击。现在你看到AA、AB、AC等，。您单击 AA，您会看到 AAA、AAC、AAAB 等。单击该按钮时，将加载用户控件。

感谢您阅读整篇文章的少数人，我想提供尽可能多的数据，因此不会因为一般或其他原因而关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:30:43.383

如果需要，我决定使用带有树列表的 2010 功能区作为内容。

# android - Android 鼓选择器活动

> ID：11061123
> 
> 赞同：0
> 
> 时间：2012-06-16T05:37:48.080
> 
> 标签：android, datepicker, android-activity

我`DatedrumPicker`从[这个链接中找到了一个](http://www.appbrain.com/app/drumpicker-demo/jp.dip.sys1.android.drumpicker)

我已经将它与我的应用程序集成，当我第一次打开它时效果很好，但是当我第二次打开它时，它不会在选择器中显示当前日期。

发现在`DrumPickerActivity.java`，第一次打开就`onDateChangedListener`进去了，第二次就没有了。

我不明白这个监听器是如何工作的？

这是活动的代码

```
public class DrumPickerActivity extends Activity {

String pday; 
Calendar calendar = Calendar.getInstance();
public static Context con;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    setContentView(R.layout.dateconversion);
    final TextView date = (TextView) findViewById(R.id.date);
 final String DATE_FORMAT = "%04d"
        +getString(R.string.year)
        +"%02d"
        +getString(R.string.month)
        +"%02d"
        +getString(R.string.day)
        ;
     Resources res= this.getResources();

    final String[] HijrimonthName = res.getStringArray(R.array.Month_ar);

    final int year = calendar.get(Calendar.YEAR);
    final int month = calendar.get(Calendar.MONTH);
    final int day = calendar.get(Calendar.DAY_OF_MONTH);

    final DateDrumPicker dPicker = (DateDrumPicker)    findViewById(R.id.datepicker);

dPicker.setOnDateChangedListener(new OnDateChangedListener() {
 @Override
public void onDateChanged(DatePicker view, int year,
                int monthOfYear, int dayOfMonth) {

 date.setText(String.format(DATE_FORMAT, year, monthOfYear,
                    dayOfMonth));
        }//end onDateChanged

    });
 } 
```

谢谢

# python - 我应该使用 Screen Scrapers 还是 API 从网站读取数据

> ID：11061135
> 
> 赞同：1
> 
> 时间：2012-06-16T05:41:15.600
> 
> 标签：python, html, screen-scraping, web-scraping

我正在构建一个 Web 应用程序作为大学项目（使用 Python），我需要从网站上读取内容。它可以是互联网上的任何网站。

起初我想使用像 BeautifulSoup、lxml 这样的屏幕抓取工具来读取内容（作者编写的数据），但由于每个网站都是按照不同的标准开发的，所以我无法基于一种逻辑搜索内容。

因此我想到了使用 RSS/Atom（使用 Universal Feed Parser），但我只能得到内容摘要！但我想要所有的内容，而不仅仅是摘要。

那么，有没有一种方法可以让我们使用 BeautifulSoup、lxml 等 lib 读取网站内容的逻辑？

或者我应该使用网站提供的 API。

如果它是博主的博客，我的工作会变得很容易，因为我可以使用 Google Data API，但问题是，我是否需要为同一个工作的每个不同 API 编写代码？

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T05:44:34.430

使用网站的公共 API（如果存在）是迄今为止最好的解决方案。这就是 API 存在的原因，它是网站管理员所说的“使用我们的内容”的方式。抓取可能会在一天工作并在下一天中断，这并不意味着网站管理员同意重用其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:59:11.937

您可以查看内容提取库——我使用了[全文 RSS](http://fivefilters.org/content-only/) (php) 和[Boilerpipe](http://boilerpipe-web.appspot.com/) (java)。
两者都有可用的网络服务，因此您可以轻松测试它是否满足您的要求。您也可以自己下载并运行它们，并进一步修改其在各个站点上的行为。

# ios - 如何使用滑块设置 CGContextAddArcToPoint 方法的参数

> ID：11061140
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:41:49.180
> 
> 标签：ios, xcode

我正在制作一个应用程序，我必须在其中控制像图形一样的面部微笑。例如，如果我向下滑动滑块（到一个小于中间的值），它应该给弧一个悲伤的脸（比如：-（）效果，如果我向上滑动滑块，弧应该给出微笑的效果（比如：- ) ). 最初的嘴唇就像 :-| . 我需要使用滑块控制作为弧线的嘴唇吗？

微笑滑块视图控制器.h

```
#import <UIKit/UIKit.h>

@interface smileSliderViewController : UIViewController
{
    IBOutlet UISlider *slider;

}
-(IBAction)valueChange:(id)sender;

@end 
```

微笑滑块视图控制器.m

```
#import "smileSliderViewController.h"
//#import "smile.h"

@implementation smileSliderViewController

-(IBAction)valueChange:(id)sender
{
    int value = (int)(slider.value);

    if(value>0 && value<25)
    {
        //value--;

        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(context, 2.0);
        CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();  
        CGFloat components[] = {0.0,0.0,1.0,1.0};                      
        CGColorRef color = CGColorCreate(colorspace, components);
        CGContextSetStrokeColorWithColor(context, color);

        CGContextMoveToPoint(context, 120,180);
        CGContextAddArcToPoint(context, 190 , 170, 270, 200, 0 );
        CGContextStrokePath(context);

    }

} 
```

微笑.h

```
#import <UIKit/UIKit.h>
#import "smile.m"

@interface smile : UIView 
{
    IBOutlet UISlider *slider;
}

@end 
```

微笑.m

```
#import "smile.h"
#import "smileSliderViewController.h"

@implementation smile

- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
      CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    //CGContextSetStrokeColor(context, [UIColor redColor].CGColor);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();  
    CGFloat components[] = {0.0,0.0,1.0,1.0};                      
    CGColorRef color = CGColorCreate(colorspace, components);  

    CGContextSetStrokeColorWithColor(context, color);
    CGRect rectangle = CGRectMake(60, 20, 200,200);
    CGContextAddEllipseInRect(context, rectangle);
    CGContextStrokePath(context);

    /*CGRect rectangle1 = CGRectMake(130,170,50,10);
    CGContextAddRect(context,rectangle1);
    CGContextStrokePath(context);*/

    /*CGContextMoveToPoint(context,100,200);
    CGContextAddArcToPoint(context,120,150,400,150,70 );
    CGContextStrokePath(context);*/

    /*CGContextMoveToPoint(context, 100,100);
    CGContextAddArcToPoint(context, -100,200, -400,200, 80);
    CGContextStrokePath(context);*/

    CGContextSetStrokeColorWithColor(context,color);
    CGRect rectangle2 = CGRectMake(80, 90, 50, 8);
    CGContextAddEllipseInRect(context, rectangle2);
    CGContextStrokePath(context);

    CGContextSetStrokeColorWithColor(context,color);
    CGRect rectangle3 = CGRectMake(180, 90, 50, 8);
    CGContextAddEllipseInRect(context, rectangle3);
    CGContextStrokePath(context);

    CGContextSetStrokeColorWithColor(context,color);
    CGContextMoveToPoint(context, 155,120);
    CGContextAddLineToPoint(context, 155,160);
    CGContextStrokePath(context);

    /*CGContextSetStrokeColorWithColor(context, color);
    CGRect rectangle4 = CGRectMake(130, 180, 50,8);
    CGContextAddEllipseInRect(context, rectangle4);
    CGContextStrokePath(context);*/

    /*CGContextSetStrokeColorWithColor(context,color);
    CGContextMoveToPoint(context, 120,180);
    CGContextAddLineToPoint(context, 190,180);
    CGContextStrokePath(context);*/
    int value = (int)(slider.value);

    if(value == 25)
    {

    CGContextMoveToPoint(context, 120,180);
    CGContextAddArcToPoint(context, 190 , 180, 250 , 180, 0 );
     CGContextStrokePath(context);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:13:15.560

中的绘图代码`sliderChange`是不必要的。`[smile setNeedsDisplay]`而是打电话给那里。

# android - 是否可以创建一个新文件夹？

> ID：11061144
> 
> 赞同：-1
> 
> 时间：2012-06-16T05:42:32.563
> 
> 标签：android, uri, directory

是否可以在 android 手机上为要存储的图像（通过我的应用程序拍摄）创建一个新文件夹？（或就我而言的SD卡）。我可以将它命名为我喜欢的名称[也许是我的应用程序的名称，以便轻松找到文件]，然后通过我的应用程序启动相机拍摄的图像将存储在那里。我认为这可能与乌里的有关。（只是猜测。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T05:49:23.797

使用此代码

```
String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/saved_images");   
myDir.mkdirs();
Random generator = new Random();
int n = 10000;
n = generator.nextInt(n);
String fname = "Image-"+ n +".jpg";
File file = new File (myDir, fname);
if (file.exists ()) file.delete (); 
try {
       FileOutputStream out = new FileOutputStream(file);
       finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
       out.flush();
       out.close();

} catch (Exception e) {
       e.printStackTrace();
} 
```

并将其添加到清单中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

检查此链接 [Android将文件保存到外部存储](https://stackoverflow.com/a/7887114/964741)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:45:14.883

只需为此使用文件操作..

```
File imageDirectory = new File("/sdcard/Images/"); // Path for location where you want to make directory, Internal or External storage
// have the object build the directory structure, if needed.
imageDirectory.mkdirs(); 
```

并在应用程序的清单文件中放置权限..

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T05:46:00.573

为什么不？

```
String path = Environment.getExternalStorageDirectory().getAbsoluteFile() + "/YourAppRootDir"; 
File dir = new File(path);
dir.mkdirs(); 
```

# .net - 使用 Open Type Fonts 写入 .net 中的图像的解决方案？

> ID：11061147
> 
> 赞同：1
> 
> 时间：2012-06-16T05:42:55.610
> 
> 标签：.net, vb.net, c#-4.0, opentype

有谁知道使用 OTF 将文本写入图像的解决方案？我知道 GDI+ 不支持 OTF 而 WPF 支持。我可以在 WPF 中将字体作为标签加载，但仍然不知道如何在图像上写这个，比如水印会做，并保存该图像。

我需要在 ASP.net 页面中使用它，因此我实际上无法使用 WPF，但我认为这可能是构建我的页面可以导入的类的开始。

我感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:48:34.650

**[ImageMagick](http://www.imagemagick.org/)**似乎支持 OTF 字体。他们有一个[工具可以将字体转换为图像](http://www.imagemagick.org/Usage/text/#text_operators)，然后您可以在后续的图像绘制操作中使用它。

由于有[.NET 的包装器](http://www.imagemagick.org/script/api.php?ImageMagick=i7tqqhnnf5sl9b2ofgg2uu2n94#dot-net)，因此您可以在 ASP.NET 应用程序中使用它们。

# ios - 我在设备上运行时找不到 SQLite 文件

> ID：11061148
> 
> 赞同：3
> 
> 时间：2012-06-16T05:43:15.117
> 
> 标签：ios, xcode, sqlite

我的项目中嵌入了一个 SQLite 数据库文件。在模拟器上，查询数据库工作正常，但在设备上却不行。我在设备上运行时的数据库文件路径是这样的（如控制台上显示的`NSLog`）：

数据库文件的路径是：`/var/mobile/Applications/5914F328-148F-52E6-1AC9-38D7FF141F9B/MyApplication.app/db.sqlite`

我寻找数据库的相关代码是：

```
 NSFileManager *fileMgr=[NSFileManager defaultManager];
    NSString *dbPath=[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"db.sqlite"];
    NSLog(@"The path for the database file is : %@",dbPath);//Display the whole path 
```

我知道模拟器和设备上的路径是完全不同的。那么我应该如何更改上面的代码以相对查找我的数据库文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:22:20.423

我解决了我的问题，对于那些在同一个问题上苦苦挣扎的人来说，我只需要将我的 SQLite 文件包含`db.sqlite`到我的 Bundle 资源中。单击`project target-->Build Phases--->Copy Bundle Resources`然后单击`+`按钮并添加您的 SQLite 文件，或者只是将您的 SQLite 文件从项目组和文件中拖放到那里。希望这有帮助:)

# javascript - 使用 JavaScript 的两个文本字段验证

> ID：11061151
> 
> 赞同：0
> 
> 时间：2012-06-16T05:43:29.420
> 
> 标签：javascript, html

我正在建立一个注册表。我有两个字段，用户可以输入他的电子邮件（一个用于电子邮件，第二个是重新输入电子邮件）。我正在尝试验证这两个字段以确认它们匹配。我所做的是，当用户移动到密码字段时，onfocus 将调用验证函数并检查两个字段是否匹配。如果有错误，错误将显示在另一个文本字段中。问题是代码不起作用！

这是代码：

```
<html>
  <head>
    <script>
      var fieldalias="Email address field"
      function verify(element1, element2){
        var passed=false
        if (element1.value==''){
          document.f1.emailerror.value='Fill out the first email field';
          element1.focus()
        }
        else if (element2.value==''){
          document.f1.emailerror.value='Fill out the second email field';
          element2.focus()
        }
        else if (element1.value!=element2.value){
          document.f1.emailerror.value='The two emails are not matching';
          element1.select()
        }
        else
          passed=true
        return passed
      }
    </script>
  </head>
  <body>
    <p>Username: <br/>
       <input class="tb10" type="text" name="username" />
    </p><br/>
    <p>Email: <br/>
       <input class="tb10" type="text" name="email1" />
    </p>
    <p>Re-Enter Email: <br/>
       <input class="tb10" type="text" name="email2" />
       <input id="emerror" type="text" readonly name="emailerror"/>
    </p><br/>
    <p>Password: <br/>
       <input class="tb10" type="password" name="password1" onfocus="verify(this.email1,this.email2)";/>
    </p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T05:54:00.313

有几个问题。首先是您调用函数的方式：

```
onfocus="verify(this.email1,this.email2)"; 
```

`this`将是该事件所属的字段，即获得焦点的字段，因此它没有`email1`和`email2`属性。（另请注意，引号*外*不需要分号。）

其次，在你的职能范围内，你说：

```
document.f1.emailerror 
```

但是您的 html 中没有`f1`表单。

如果您在字段周围添加一个表单元素，将其命名为 name `f1`，并按如下方式更新您的内联`onfocus`，那么它将起作用：

```
onfocus="verify(document.f1.email1,document.f1.email2)" 
```

演示：http: [//jsfiddle.net/jJ3YT/](http://jsfiddle.net/jJ3YT/)

注意：我并不真正赞同您在此处采用的方法 - 如果是我，我会将验证放在两个电子邮件字段中的 blur 上，但只是为了显示消息，而不是强制焦点回到第一个场地。然后，当实际提交表单时，如果仍然存在问题，那么也许我会强制将焦点移回问题字段。但无论如何，对于你想要做的事情，你几乎就在那里......

# sql - 如何在从时间到时间之间比较给定时间表的时间

> ID：11061152
> 
> 赞同：0
> 
> 时间：2012-06-16T05:43:34.547
> 
> 标签：sql, sql-server, sql-server-2008

如何在 SQL 中检查给定时间间隔之间是否存在计划更清楚地了解

```
Select * 
From [Client].[scheduler] 
Where [Scheduler_Date] = '6/16/2012' 
    and ([start]<='13:06 ') 
    and ([end]>='14:31 ') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:16:26.503

我建议避免使用字符串并使用`time`数据类型：

```
select * from  [Client].[scheduler] 
where [Scheduler_Date] = '20120616' and 
      (CONVERT(time,[time_from])>='11:00') and 
      (CONVERT(time,[time_to])<='13:06') 
```

（为什么是`time_from`而`time_to`不是已经`time`s？）

我还调整了日期字符串文字以使用安全格式（yyyymmdd）

* * *

另一方面，令我震惊的是，您可能希望找到与给定端点重叠（部分或完全）的任何时间表。诀窍是切换比较：

```
where [Scheduler_Date] = '20120616' and 
      (CONVERT(time,[time_from])<='13:06') and 
      (CONVERT(time,[time_to])>='11:00') 
```

这个新`WHERE`子句将查找与 11:00-13:06 时间段重叠的所有行，而不仅仅是那些完全包含在其中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:03:29.920

尝试这个

```
select * 
from  [Client].[scheduler] 
where [Scheduler_Date] = '6/16/2012' and 
      (CONVERT(VARCHAR(5),[time_from],108) LIKE '11%') and 
      (CONVERT(VARCHAR(5),[time_to],108) LIKE '13:06%') 
```

# php - 简单的 PHP 正则表达式字符串以

> ID：11061153
> 
> 赞同：9
> 
> 时间：2012-06-16T05:43:34.727
> 
> 标签：php, regex

如果一个字符串以另一个字符串开头，我正在寻找正则表达式。这必须是正则表达式，并且必须是 PHP 正则表达式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T06:07:51.403

```
$result = preg_match("#^startText(.*)$#i", $string);
if($result == 0)
{
    echo "No match";
}
else
{
    echo "Match found.";
} 
```

[PHP.net 正则表达式](http://au.php.net/manual/en/reference.pcre.pattern.syntax.php)

`preg_match``0`未找到匹配项或`1`, 因为`preg_match`在第一个匹配项处停止而返回。如果要计算所有匹配项，请使用`preg_match_all`.

如果您遇到更多问题，请查看 PHP 网站。

# java - 如何从 shell 脚本终止 JVM 运行？

> ID：11061154
> 
> 赞同：1
> 
> 时间：2012-06-16T05:43:37.053
> 
> 标签：java, linux, shell

我有一个启动两个 java 进程的 shell 脚本。如何确保当 shell 脚本进程被杀死时，它的所有子进程也会被杀死？例如，当我尝试杀死它时，java 进程仍然存在：

```
kill -9 myscriptID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:47:46.947

您可以通过运行以下命令检查所有 java 进程：

```
ps -aux | grep *java* 
```

[这](https://stackoverflow.com/questions/191215/how-to-stop-java-process-gracefully)看起来也可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:50:32.177

您的`kill`命令只会杀死您的脚本，而不是它产生的其他进程。 [杀死所有子进程的最佳方法对于](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)杀死整个树有一些很好的答案。

也就是说，似乎更好的设计是跟踪子进程的 PID，而不是发送父进程，而是`SIGKILL`发送它`SIGTERM`（或以其他方式）以触发它优雅地杀死其子进程。

# java - weblogic服务器中的OutOfMemoryError

> ID：11061157
> 
> 赞同：0
> 
> 时间：2012-06-16T05:44:14.240
> 
> 标签：java, weblogic, out-of-memory

我们已经更改了很多文件，现在在生产中，我们在 weblogic 10.4.3 服务器中面临 OutOfMemoryError，

从日志中我们得到以下与 outOfMemory Error 相关的错误消息：

```
1) java.lang.OutOfMemoryError: getNewTla
2) java.lang.OutOfMemoryError: allocLargeObjectOrArray: [C, size 262160 .. 
```

但是我们无法追踪，是哪个代码导致了 outOfMemoryError。

我们怎样才能追踪到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:27:04.750

> 如果有人有这方面的信息，请建议我。

对于这样一个笼统而模糊的问题，我唯一能建议的是解决此类问题的标准方法：

*   将JVM配置为在OOME时进行堆转储，并使用`jhat`或其他东西对其进行分析。

*   仔细检查堆栈跟踪（更多）。

*   通过检查您的版本控制历史来检查您所做的更改。如果您完全被难住了，请将变更集退回到最后一个已知的工作版本，并一次重新应用它们。（在您的测试服务器上......当然！）

*   运行单元测试/系统测试。

# ios5 - 使用 REST API 将 JSON 发送到服务器

> ID：11061159
> 
> 赞同：0
> 
> 时间：2012-06-16T05:44:25.413
> 
> 标签：ios5, xcode4.2, restful-authentication

我正在开发一个带有 REST 完整 Web 服务的应用程序。现在在这种情况下我遇到了一些问题，即使用 put 方法将字符串发送到服务器。我正在使用以下代码。

```
NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://176.31.113.164/app/profil/add"]];
    [request setValue:@"Digest adf@email.com:test" forHTTPHeaderField:@"Authorization"];
     [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
     [request setValue:@"application/json" forHTTPHeaderField:@"content-type"];
    //[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    NSDictionary *dic=[[NSDictionary alloc]init ];
        dic=[NSDictionary dictionaryWithObjectsAndKeys:@"15",@"@idUsers",@"17",@"@idProfils",@"ddduu",@"address",@"ddd",@"city",@"ddd",@"country",@"adf@email.com <mailto:adf@email.com>",@"email",@"1",@"enabled",@"fff55",@"firstName",@"fffdd3",@"lastName",@"fffffcc",@"nickName",@"test",@"password",@"0",@"phone",@"0",@"postCode",@"ROLE_USER",@"role", nil];
    NSString *jsonString = [jsonWriter stringWithObject:dic];
     NSData *postData= [jsonString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
     [request setHTTPBody:postData];
        [request setHTTPMethod:@"PUT"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];

        NSURLConnection* _loginConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];
     if (_loginConnection==NULL)
        {
            NSLog(@"Problem");
        }
    [_loginConnection start]; 
```

接收到的数据是这样处理的：

```
NSString* tempString =[NSJSONSerialization 
                  JSONObjectWithData:_receivedData 

                  options:kNilOptions 
                  error:&error]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:53:26.777

您可以使用[ASIHTTP](http://allseeing-i.com/ASIHTTPRequest/How-to-use)包装类在您的 iOS 应用程序中执行 REST 操作。

[从这里](https://github.com/pokeb/asi-http-request/downloads)下载最新的 ASIHTTP 。

# java - 如何解决java程序中的java.rmi.ConnectException？

> ID：11061165
> 
> 赞同：1
> 
> 时间：2012-06-16T05:45:31.770
> 
> 标签：java, sockets, rmi

我创建了一个简单的 java RMI 程序来了解它是如何工作的。但是当我尝试运行我的服务器端时，它会引发以下异常。

**编辑：我们正在使用代理连接...**

```
 Remote exception: java.rmi.ConnectException: Connection refused to host: 10.7.150.18; nested exception is: 
   java.net.ConnectException: Connection refused: connect 
```

这是我的服务器端代码供您参考...

```
import java.rmi.*;
import java.rmi.server.*;
import java.rmi.registry.*;

public class SampleServerImpl extends UnicastRemoteObject implements SampleServer
{
  SampleServerImpl() throws RemoteException
  {
     super();
  }
    @Override
  public int sum(int a,int b) throws RemoteException
  {
     return a + b;
  }

    public static void main(String[] args)
    {
      try
      {
        //set the security manager  
        //System.setSecurityManager(new RMISecurityManager());
        //create a local instance of the object
        SampleServerImpl Server = new SampleServerImpl();
        //put the local instance in the registry
        Naming.rebind("//10.7.150.18:9999" , Server);
        System.out.println("Server waiting.....");
      }
      catch (java.net.MalformedURLException me) 
      {
        System.out.println("Malformed URL: " + me.toString());  
      }
      catch (RemoteException re)
      {
         System.out.println("Remote exception: " + re.toString()); 
      }    
    }
} 
```

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:05:34.237

Naming 类提供了在远程对象注册表中存储和获取对远程对象的引用的方法。Naming 类的每个方法都将一个名称作为其参数之一，该名称是 URL 格式（没有方案组件）的 java.lang.String，形式如下：

```
//host:port/name 
```

以 URL 格式添加名称

```
//10.7.150.18:9999/Server 
```

# objective-c - Objective C 中指向 BOOL 的指针

> ID：11061166
> 
> 赞同：2
> 
> 时间：2012-06-16T05:45:31.667
> 
> 标签：objective-c, pointers

**代码：**

```
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
BOOL initial = YES;
[invocation setArgument:&initial atIndex:2]; 
```

**问题：**

是否可以在不创建临时变量的情况下传递`YES`给？`setArgument:atIndex:`

我在想，也许有一种我不知道的语言结构和/或在运行时是不变的`YES`，我总是可以指出。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T06:25:16.040

不，不是以任何干净、可靠的方式。

NSInvocation 将取消引用您发送的任何指针，并从中复制方法签名指定长度的数据。您需要在某处拥有该信息，以便获得地址，并且拥有本地变量是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:07:16.987

指针必须指向某些东西（包括垃圾）或什么都没有（意味着指针被初始化为 NULL）。指针是对对象的间接引用。如果您的指针没有这样的对象指向，您可能不需要指针。您可以简单地调用`setArgument:NULL atIndex:2`.

在代码中使用类似指针的情况是传递一个**输出参数**，其值将在您调用的函数中设置，在这种情况下，您可能不需要在将参数传递给函数之前对其进行初始化，该函数应该负责为其分配正确的值。

因此，在您的情况下，如果您不是要使用**输出参数**，则只需将原始 BOOL 传递给函数，不需要指针。

**编辑**

我刚刚查看了 NSInvocation 的文档。答案和其他人一样，NO。

您必须传递一个指针，该指针**必须**指向现有对象，NSInvocation 才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T06:29:05.717

答案是不。指针必须指向内存中的地址。因此，首先您必须分配该内存，然后将该分配的内存的地址发送到该方法中。在原语的情况下，分配的内存将在堆栈上，而对于对象，为该对象分配的内存将在堆上，并且该对象的地址将存储在堆栈上。至于你得到的`void*`参数`setArgument:atIndex:`似乎想要一个对象而不是原始的错误。您是否尝试过使用 a`NSNumber`来表示布尔值。`NSNumber`自带一个`numberWithBool:`方法。

# c# - 如何在静默模式下安装某些程序？

> ID：11061168
> 
> 赞同：-6
> 
> 时间：2012-06-16T05:45:58.210
> 
> 标签：c#, windows, .net-4.0, installation

我正在用 C# .NET 4 开发一个程序，我的程序是一种安装程序，用于安装一些应用程序和服务，例如 windows media player 11 和 adobe flash player 等。

我需要让这些安装以静默模式运行，用户只会看到我的安装表格。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:22:15.500

如果您需要部署的项目采用 MSI 格式，您始终可以使用[WiX](http://wix.sourceforge.net/)或[InstallShield](http://www.flexerasoftware.com/products/installshield.htm)等工具包来构建您的安装程序，并使用带有 /qn 命令行开关的[msiexec.exe](http://support.microsoft.com/kb/314881)静默安装其他 MSI 。（或者使用您的应用程序中的[Process 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)在您要安装的任何内容上调用 msiexec.exe /qn）。

如果他们没有要安装的 MSI，您可以做几件事。许多安装程序都有一个命令行开关，可以让他们静默安装。如果无法静默安装，可以使用[AdminStudio](http://www.flexerasoftware.com/products/adminstudio.htm)之类的工具。这些工具具有在您运行安装之前和之后扫描您的计算机并帮助您创建自己的可再分发包的功能。然后，您可以在静默模式下将它们添加到您的主包中。

# python - Python 机械化 Browser.links() - 奇怪的行为

> ID：11061171
> 
> 赞同：1
> 
> 时间：2012-06-16T05:46:15.707
> 
> 标签：python, browser, mechanize

我是 python 机械化的新手，如果有人能解释为什么会发生这种情况会很好？

```
import mechanize
br = mechanize.Browser()
a = br.open('http://www.google.co.in')
links = br.links()
for link in links:
    print link.url 
```

但是，当我再次这样做时，什么都没有打印出来

```
 for link in links:
    print link.url 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T05:54:44.953

我最好的猜测是它可能会`br.links()`返回一个生成器。这意味着它不会返回一个大的可迭代对象，而是动态的，并`next`在返回序列中的下一个值之前等待调用它，因此除非您自己将变量存储到 a`list`中，否则它只能使用一次.

# asp.net - 获取一个月中的特定日期

> ID：11061174
> 
> 赞同：3
> 
> 时间：2012-06-16T05:46:52.533
> 
> 标签：asp.net

> **可能重复：**
> [如何用 C# 找到一个月中的第三个星期五？](https://stackoverflow.com/questions/5421972/how-to-find-the-3rd-friday-in-a-month-with-c)

有一个条件是特定事件只会在每个月的**第一个**和**第三个** **星期三发生。**我正在尝试实现如下所示，

```
DateTime nextMeeting = DateTime.Today.AddDays(14);
int daysUntilWed = ((int)DayOfWeek.Wednesday - (int)nextMeeting.DayOfWeek + 7) % 7;
DateTime nextWednesday = nextMeeting.AddDays(daysUntilWed); 
```

但我没有得到想要的结果。我敢肯定，我错过了一个逻辑，或者 ASP.NET 中是否有任何方法可以做到这一点？更多详细信息：我试图通过单击将设置标签的按钮来显示下周三（以先到者为准）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:04:19.343

尝试这个：

```
var FirstDay = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1);

//first wednesday
while (FirstDat.DayOfWeek != DayOfWeek.Wednesday)
       FirstDay = FirstDate.AddDays(1);

//3rd wednesday
var ThirdWed = FirstDay.AddDays(14); 
```

# .htaccess - 如何将一系列链接重定向到主页.htacess

> ID：11061181
> 
> 赞同：0
> 
> 时间：2012-06-16T05:48:46.247
> 
> 标签：.htaccess, redirect

很抱歉我的英语不好。我正在将一个新域重定向到我的网站，并且我需要将他的链接自动重定向到我的家。如果你输入：

```
www.newdomain.com/forum/index.php?323233 
```

这重定向到我的网站：

```
www.domain.com/forum/index.php?323233 
```

但是这个链接给出了 404 错误。我需要重定向 /forum 和这个文件夹的所有这些范围，比如：

```
/forum/ddf/3434334
/forum/indexfdsfk
etc 
```

重定向到我的家 www.domain.com 请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:56:56.020

我找到了这个

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^mydomain.com [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc] 
```

这里

[帕格](http://www.kingnomar.com/111/redirect-to-www-htacces-redirect/)

# javascript - 如何建立一个不改变的 DOM 的缓存

> ID：11061184
> 
> 赞同：2
> 
> 时间：2012-06-16T05:49:17.727
> 
> 标签：javascript, jquery, html, caching, dom

所以我尝试构建 DOM 的缓存：

```
var DOM = document.getElementsByTagName('*'); 
```

但是，DOM 变量似乎是一个动态引用，因此如果我更改 DOM 中的一个元素，该`DOM`变量也会发生变化。

我尝试遍历`DOM`变量并使用该`cloneNode`方法创建每个节点的深层副本。这是因为当我更改 DOM 时它不会改变。但是，问题是当您将克隆节点与操作符进行比较时，克隆节点不等于其原始 DOM 节点`===`。

总而言之，我希望创建一个 DOM 缓存，该缓存不会更改，但其节点仍等于原始 DOM 节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:55:50.597

`document.getElementsByTagName`返回一个 "live" `NodeList`，这根本不是你想的那样。当您访问列表时，每次都会遍历 DOM（实现可能会对其进行缓存）以获取结果。这给人一种列表是实时的错觉。

```
document.getElementsByTagName("div") === document.getElementsByTagName("div") 
//true 
```

要执行您想要的操作，只需将其转换为数组即可。`DOM = [].slice.call(DOM)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:14:58.640

您似乎对 jQuery 解决方案持开放态度，因此：

```
$("*") 
```

将返回一个包含所有元素的 jQuery 对象。它不会随着 DOM 的变化而更新。

或者，如果您只想要`<body>`（即，不是`<script>`或`<meta>`元素等，来自`<head>`）中的元素，那么：

```
$("body *") 
```

作为一个 jQuery 对象，它当然允许您访问 jQuery 方法，但您也可以使用数组表示法直接访问 DOM 元素：

```
var DOM = $("body *");
DOM.show();              // example jQuery method call
alert(DOM.length);       // show count of elements in DOM
alert(DOM[4].value)      // example of direct access to fifth DOM element 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T04:19:05.000

我更喜欢使用以下方法：

[https://gist.github.com/3841424#file-domcache-js](https://gist.github.com/3841424#file-domcache-js)

或者，您可以用此实现中的方法替换 DOM 对象：

```
var myNS = {
    myEventHandler: function(event){
        this.DOM.$el.doSomething();
    },
    cacheDOM: function(){
        return {
             $el: $("#matrix")
        };
    },
    initialize: function(){
        this.DOM = this.cacheDOM();
    }
}; 
```

# c++ - C++ 中的结构和运算符重载

> ID：11061187
> 
> 赞同：2
> 
> 时间：2012-06-16T05:49:33.530
> 
> 标签：c++, overloading, operator-keyword, structure

```
struct PT 
{   
  double x, y;  
  PT() {}  
  PT(double x, double y) : x(x), y(y) {}  
  PT(const PT &p) : x(p.x), y(p.y)    {}  
  PT operator + (const PT &p)  const { return PT(x+p.x, y+p.y); }  
  PT operator - (const PT &p)  const { return PT(x-p.x, y-p.y); }  
  PT operator * (double c)     const { return PT(x*c,   y*c  ); }  
  PT operator / (double c)     const { return PT(x/c,   y/c  ); }  
}; 
```

此代码片段来自[http://stanford.edu/~liszt90/acm/notebook.html#file8](http://stanford.edu/~liszt90/acm/notebook.html#file8)。我无法理解这段代码。有人请解释一下。我知道这是运算符重载，但无法理解运算符重载是如何发生的。

有人也可以解释这些行：

```
PT() {}  
PT(double x, double y) : x(x), y(y) {}  
PT(const PT &p) : x(p.x), y(p.y)    {} 
```

结构也有构造函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:49:59.180

```
double x, y; 
```

声明组成类的两个局部类变量。

```
PT() {} 
```

默认构造函数。允许您创建不带任何参数的 PT。
例如 --> `PT myObj;`

```
PT(double x, double y) : x(x), y(y) {} 
```

构造函数从两个双打创建一个点。
例如 --> `PT myObj(3.5, 9.0);`
在声明之后 --> ***PT(double x, double y)*** : x(x), y(y) {}
我们有初始化 .--> PT(double x, double y) : ***x(x) , y(y)*** {}
`x(x)`等价于`this->x = x;`
即用构造函数参数'x'初始化类变量'x'。他们为参数赋予与类变量相同的名称，这有点令人困惑。一个更好的例子可能是：

```
 PT(double xInit, double yInit) 
    : x(xInit)
    , y(yInit) 
    {
    } 
```

```
 PT(const PT &p) : x(p.x), y(p.y)    {} 
```

复制构造函数以从另一个 PT 对象创建一个 PT 对象，
例如 --> `PT myOtherObj(myObj);`

```
PT operator + (const PT &p)  const { return PT(x+p.x, y+p.y); }  
PT operator - (const PT &p)  const { return PT(x-p.x, y-p.y); } 
```

加法和减法运算符得到两点的总和或差以进行三分之一。
例如 -->

```
 PT sumObj  = myObj + myOtherObj;
    PT diffObj = myObj - myOtherObj; 
```

`PT operator * (double c) const { return PT(x*c, y*c ); }`
`PT operator / (double c) const { return PT(x/c, y/c ); }`

乘法和除法运算符将一个点乘以（或除）一个常数。
例如 -->

```
 PT prodObj = myObj * 2.7;
    PT divObj  = myObj / 8.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:32:02.150

第 4 行和第 5 行是**构造函数**，语法`x(x)`突出显示了调用成员变量的构造函数的惯用方式（例如，向下传递）。

请注意，形式参数*不需要*不同的标识符。从构造函数体内进行赋值需要不同的命名，因为形式参数“隐藏”了成员变量。即我们需要，例如

```
 PT(double x_, double y_) { x = x_; y = y_; } 
```

另请注意，这种方式我们*不是*调用成员 x 的构造函数，而是调用赋值运算符。POD 数据没有区别，但语法允许任意的、用户定义的、类上的成员函数，如`PT`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T05:56:02.220

每当编译器遇到形式的调用

```
a + b; 
```

它实际上调用

```
a.operator+(b) 
```

如果此类方法存在于 a 或

```
operator+(a,b) 
```

如果存在这样的自由功能。

运营商？？？语法只是说您当前正在重载所述运算符 ??? （对于任何有效的???当然）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T05:56:56.133

运算符重载是一个概念，其中像`+`, '- `, '*`, ... 这样的常用运算符也对结构/类进行了“重载”。通常，此功能仅适用于原始数据类型，如`int`, `double`, ....

在这里`struct PT`，运算符方法被简单地定义。一旦您声明对象`PT`并开始使用它，它将启动。例如

```
PT pt1, pt2;
PT pt3 = pt1 + pt2;  // pt1.operator +() has instantiated 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T06:11:03.833

通过查看它的非成员版本，可能更容易理解运算符重载。如果您想通过添加两个对象来告诉编译器您的意思是什么，`PT`您可以编写以下内容：

```
PT operator + (const PT& a, const PT& b)
{
    return PT(a.x + b.x, a.y + b.y);
} 
```

上面的代码只是说，当编译器找到`a + b`两个`a`和`b`都是实例的表达式时，结果是该函数计算的`PT`一个新实例。`PT`

您可以对其他一些运算符执行相同的操作，并且由于这一点，您可以使您的类实例在正常数学方面表现得更“自然”。

您拥有的代码是相同的，但以某种不自然的不对称形式编写，您可以在其中描述例如将另一个对象添加到`this`对象时要做什么。这种方法对于二元数学运算符来说看起来很奇怪，因为例如在加法的第一个或第二个操作数中没有什么特别的，而且它们都在同一个逻辑级别上。然而，该概念的不对称性`this`是 C++ DNA 的一部分，您对此无能为力。从理论上讲，对于任何仅采用参数的方法来说，这都是一种糟糕的不对称性，但实际上，即使使用这种方法，您仍然可以使用很长一段时间。

代码的其他部分是：

```
// Default constructor. Will create an object without any parameter
// and the x, y values will be uninitialized. This is generally a bad
// practice and you should avoid it unless there are very specific and
// measured performance reasons for doing that.
// Having a constructor accepting no parameters is sometimes necessary
// if you want for example to be able to put your instances in an std::vector
// and you may need to call .resize() on the vector. Even if you will always
// just shrink the vector the compiler will require anyway a default
// constructor because there's no shrink-only call on vectors and any
// resize operation is assumed to be potentially growing the size.
PT() {}

// Copy constructor. This is totally unneeded... when you don't
// put a copy constructor in a class the C++ compiler will automatically
// generate exactly this code (i.e. a constructor that will copy-construct
// all members). In general this may be or may not be the right thing
// depending on the class, but in this case is exactly what you want
// and there was no need for this code.
// As a general rule if you see a copy constructor, an assignment operator
// or a destructor but you don't see all three of them in a class then
// most probably there's something wrong. It's difficult to think to
// a real use case in which you need some of them but not all three of
// them... in this case for example the mistake is that this code could
// and should have been omitted.
PT(const PT &p) : x(p.x), y(p.y) {} 
```

# php - MySQL 视图生成月度红利

> ID：11061188
> 
> 赞同：0
> 
> 时间：2012-06-16T05:49:40.633
> 
> 标签：php, mysql

我正在为营销公司建立一个网站。根据他们的要求，当客户进行预订时。一定数量的奖金会根据员工的等级分配给员工。分配从预订后的 60 天开始，奖金为 24 个月。

这些表是

> 预订

```
bid      book_date  
 1        2012-05-09
 2        2012-05-10 
```

> 奖金

```
bid   empid    amount
1       1        300 
1       2        400  
2       2        300
2       3        400 
```

是否可以编写 mysql 视图来生成员工每月获得的每月奖金。我没有找到有关如何使用 mysql 视图进行更新的解决方案。任何提示都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:05:03.350

通过将预订日期与今天的日期进行比较，出价和过滤器的内部联接仅包括符合条件的奖金。如果今天的日期比原书日期晚不到 60 天或超过 24 个月加 60 天，则将其排除。（你可以去 mySQL.com 了解更多关于如何在 mySQL 中操作日期。我忘了……）

您将留下多行，其中仅包含 emp id 和 amount。在第二轮中，使用“select sum(amount) from (...put your other query here...) group by empid”来获得每位员工的总奖金。

这种方法（我认为任何解决方案）都需要一个嵌套的 SQL 语句，因此如果您对该语法不满意，您可以使用该术语在 google 或 SO 中进行探索。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:05:48.533

而不是视图，我建议编写 mysql 函数，该函数将通过接受员工 ID 返回奖金。

使用 mysql 函数，您将有更多的空间来编写逻辑和 PL/SQL。

# iphone - NSDate 和 NSDateFormatting 和 unix 时间戳

> ID：11061195
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:51:02.783
> 
> 标签：iphone, objective-c, ios, ipad

所以我有以下代码：

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MM/dd/yyyy hh:mma"];
    NSString *dateString = [dateFormat stringFromDate:self.firstUsed];
 NSLog(@"FIRST USED %@ %f", dateString, [[NSDate date] timeIntervalSinceDate:self.firstUsed]);

FIRST USED 06/15/2012 10:42PM 716.087895 
```

让我感到困惑的是，当我输入 173.755023 时，它并没有转换回 2012 年 6 月 15 日 10:42。这怎么可能？我认为正确的数字应该是 1339714440

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:21:09.977

试试这个 ：

```
NSDate* referenceDate = [NSDate dateWithTimeIntervalSince1970: 0];
NSTimeZone* timeZone = [NSTimeZone timeZoneWithName:@"GMT"];
int offset = [timeZone secondsFromGMTForDate: referenceDate];
int unix_timestamp =  [curdate timeIntervalSince1970];
int Timestamp = unix_timestamp - offset; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-16T06:59:07.997

请写下以下代码：

```
NSDateFormatter *dtFormatAppointment = [[NSDateFormatter alloc] init];

[dtFormatAppointment setDateFormat:@"MM/dd/yyyy hh:mm a"];

NSString *dateString = [dateFormat stringFromDate:self.firstUsed];

NSTimeInterval time = [dateString timeIntervalSince1970];

NSLog(@"FIRST USED %@ %.f", dateString, time); 
```

这段代码对你有用。

# mysql - 不能删除索引，因为它的名字是一个整数

> ID：11061204
> 
> 赞同：1
> 
> 时间：2012-06-16T05:53:54.183
> 
> 标签：mysql, indexing

我在一个表中有一些索引，名称**是一个数字（1,2,3,4...）**

但是当我使用 drop 命令删除索引时，我得到一个**1064 错误**

```
DROP INDEX 1 ON table_name; 
```

所以我的猜测是当它的名字是一个数字时我不能删除一个索引？或者还有什么我不知道的？

它如何在本地而不是在服务器上工作？

错误输出：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 on table_name' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T05:57:01.567

用反引号包围`1`，即

```
DROP INDEX `1` ON table_name; 
```

# php - 如何一起实现jquery和CodeIgniter验证库？

> ID：11061206
> 
> 赞同：0
> 
> 时间：2012-06-16T05:54:03.640
> 
> 标签：php, codeigniter, jquery, codeigniter-2

我想创建一个注册表单，我想在其中使用 jquery 以及 CI 验证库。我怎样才能做到这一点？提交表单后，我希望控件使用 jquery 转到验证库并返回响应。然后，如果一切顺利，我希望“表单已提交”消息显示在该页面本身上。

编辑：

这是我的代码。

看法

```
<?php $this->load->view('template/header'); ?>
<div id="add_form">
    <h2>Add New Category</h2>

    <?php echo form_open('abc/abc_category_controller/add_new_category'); ?>

    <?php

    $category_data = array(
        'name' => 'category_name',
        'id' => 'category_name',
        'value' => set_value('category_name'),
        'maxlength'   => '15'
    );

    $unit_data = array(
        'name' => 'unit',
        'id' => 'unit',
        'value' => set_value('unit'),
        'maxlength'   => '10'
    );

    ?>

    <p><label for="name">Name: </label><?php echo form_input($category_data); ?></p>

    <p><label for="unit">Unit: </label><?php echo form_input($unit_data); ?></p>

    <p><?php echo form_submit('submit', 'Submit','id="submit"'); ?></p>

    <?php echo form_close(); ?>

    <?php echo validation_errors('<p class="error">'); ?>

</div><!--end add new category-form-->

<div id="success_msg">

</div>

<?php $this->load->view('template/footer') ?> 
```

控制器 - add_new_category

```
<?php

    class Stocks_category_controller extends CI_Controller{

    function add_new_category()
    {
        //$this->load->helper('form');
        $this->load->library('form_validation');

        $data['title'] = 'Add a new category';

        $this->form_validation->set_rules('category_name', 'Category Name', 'required');
        $this->form_validation->set_rules('unit', 'Unit', 'required');

        if ($this->form_validation->run() === FALSE)
        {
              $this->load->view('abc/add_new_category');

        }

        else
        {
            $category_name = $this->input->post('category_name');

            $unit = $this->input->post('unit');

            $this->load->model('abc/abc_category_model');

            $insert_id=$this->abc_category_model->add_new_category($category_name
                                ,$unit);

            if($insert_id!=NULL)
            {
              $this->load->view('template/success',$data);
            }

            else{
                $data['error_msg']='Error Occurred';
                $this->load->view('template/template',$data);
            }

        }

    }

    function success(){
        $data['success_msg']='New Category Successfully Created';
        $this->load->view('template/success',$data);
    }
  } 
```

最后是模型。

```
 function add_new_category($category_name,$unit){

      $data = array(
           'abc_category_name' => $category_name ,
           'unit' => $unit
        );

        $this->db->insert('abc_category', $data); 
        $insert_id=$this->db->insert_id();

        return $insert_id;
   } 
```

}

我想要的是，当我提交表单时，应该进行 jquery 验证。如果一切顺利，则仅使用 ajax 显示 SUccessful 消息，并且页面不应重新加载。另外，请告诉我是否可以同时使用 jquery 验证和 CI 验证库并维护 ajax？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T07:00:23.633

要实现客户端和服务器端验证，您需要使用 jquery 验证插件。

因此，您需要包括：

1.  [jQuery](http://code.jquery.com/jquery-1.6.1.min.js) javascript 库

2.  jQuery[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件

加载javascript

```
<script type="text/javascript" src="<?php echo base_url();?>js/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>js/jquery.validate.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>js/jquery.validate-rules.js"></script> 
```

然后设置您的表格：

```
$attr = array('id' => 'demo_form');
echo form_open('demo/validation_example', $attributes); 
```

并验证您的表单，例如：

```
$(document).ready(function() {
  $("#demo_form").validate({
    rules: {
            name: {
                required: true
            },
            ...
    },
    messages: {
             name: {
                required: "Name required",
            },
    },
    errorElement: "span",
        errorPlacement: function(error, element) {
                error.appendTo(element.parent());
        }

  });
}); 
```

并且也使用服务器端验证，因为仅使用客户端验证不是一个好习惯。

如需更多帮助，您可以找到关于

如何[使用codeigniter实现jquery验证](http://gazpo.com/2011/07/codeigniter-jquery-form-validation/)

和工作[演示](http://gazpo.com/gazpo-files/tut10-form/form_validation/index.php/form)

您可以在哪里检查 jquery 验证，并通过禁用浏览器的 javascript，您可以检查使用 php 完成的 codeigniter 服务器端验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:15:34.287

我认为你必须为此使用 jquery ajax。

首先，您需要发布您的数据。将您的提交按钮设置为像这样触发 jquery ajax。

```
 $.ajax({
        type: "GET",
        url: "/controller/validate",  //your controller action handler
        dataType: "json",
        data: {name:value, name: value}, //set your post data here
        cache:false,
        success: function(data){
             //handle the callback response 
             if(data.success)
                alert("Success");
             else
                alert(data.errors);
       }
 }); 
```

接下来在您的控制器操作中，使用 codeigniter 验证器验证您的发布数据。如果验证失败，您需要在视图中使用 json_encode 将错误发送回您的 js 回调函数。像这样设置数据错误，在你的视图中（你将为/controller/validate设置的视图），做这样的事情

```
$data['errors'] = validation_errors();
echo json_encode($data); 
```

您将在不刷新页面的情况下将错误返回给您。当验证成功时，只需设置一个`$data['success']`并使用`echo json_encode`using if 语句，以便仅检索成功数据。我已经设置了 ajax 脚本回调。

# java - 使用 android AccountManager 获取 OAuth2 令牌？

> ID：11061211
> 
> 赞同：2
> 
> 时间：2012-06-16T05:55:28.807
> 
> 标签：java, android, google-api, oauth-2.0, accountmanager

是否可以`OAuth2`使用 android 获取与 Google API 一起使用的令牌`AccountManager`？我知道的唯一另一种方法是拥有一个`webView`并让用户登录以获取`OAuth2`令牌，但这似乎是很多人想做的很多工作，所以如果我可以使用它来获取它`AccountManager`那会好很多。有没有这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:58:35.387

`AccountManager`根本不是用于生成令牌 - 它仅用于存储与`Account`. 这些类并不特定于 Google 服务器帐户 - 您可以将它们用于任何类型的帐户。例如，我使用它们来存储 Facebook、Twitter 等的 OAuth2 令牌。

您将需要使用 Google API 来生成 OAuth2 令牌，您`Account`使用`AccountManager`. 您需要使用 Google API，因为 OAuth2 令牌生成的一部分发生在服务器本身 - Google 将存储它提供的令牌的记录，以及与它们相关的服务器帐户。如果您没有调用 Google API 来生成令牌，Google 将不知道如何将令牌与 Google 服务器帐户匹配。

您使用 a`WebView`获取 OAuth2 令牌的方法是正确的方法。

一旦您为 存储了 OAuth2 令牌`Account`，您只需`AccountManager`在想要使用它进行查询时从 中检索它。因此，您只需要生成一次 OAuth2 令牌（除非它过期），然后您就可以一遍又一遍地使用它。

# objective-c - 如何将字典键放入数组

> ID：11061216
> 
> 赞同：-3
> 
> 时间：2012-06-16T05:56:13.030
> 
> 标签：objective-c, twrequest

我不太确定我在这里做错了什么，我已经按照教程进行了操作。这是我的问题，我有一本名为 dict 的字典，它是 TWRequest 的结果 - 由于我的日志详细信息，我知道它包含推文。我现在正在尝试创建一个包含“文本”元素的数组，但我的日志显示该数组为空白？？！这是我的代码，任何帮助将不胜感激。谢谢

```
NSArray *allTweetText = [dict objectForKey:@"text"];
NSLog(@"WHERE IS THIS: %@", allTweetText);  
NSString *singleTweet = [allTweetText objectAtIndex:indexPath.row];
NSArray *parsedTweet = [singleTweet componentsSeparatedByString:@":"];

cell.myHeader.text = [parsedTweet objectAtIndex:0];
cell.myDetails.text = [parsedTweet objectAtIndex:1];
cell.myDate.text = [parsedTweet objectAtIndex:2]; 
```

这是我的日志输出..... GNU gdb 6.3.50-20050815（Apple 版本 gdb-1708）（2011 年 8 月 15 日星期一 16:03:10 UTC）版权所有 2004 Free Software Foundation, Inc. GDB 是免费软件，涵盖GNU 通用公共许可证，欢迎您在某些条件下更改和/或分发它的副本。

```
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".Attaching to process 560.

2012-06-16 06:49:36.591 V4[560:207] WHERE IS THIS: (null)
2012-06-16 06:49:36.593 V4[560:207] WHERE IS THIS: (null)
2012-06-16 06:49:36.595 V4[560:207] WHERE IS THIS: (null)
2012-06-16 06:49:36.596 V4[560:207] WHERE IS THIS: (null)
2012-06-16 06:49:37.033 V4[560:1f03] Twitter response: {
    "completed_in" = "0.043";
    "max_id" = 213870694428184576;
    "max_id_str" = 213870694428184576;
    "next_page" = "?page=2&max_id=213870694428184576&q=euro2012";
    page = 1;
    query = euro2012;
    "refresh_url" = "?since_id=213870694428184576&q=euro2012";
    results =     (
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:41 +0000";
            "from_user" = bombenj;
            "from_user_id" = 240783256;
            "from_user_id_str" = 240783256;
            "from_user_name" = "Joe Bomben";
            geo = "<null>";
            id = 213870694428184576;
            "id_str" = 213870694428184576;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2187998849/Joey_20b_normal.jpeg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2187998849/Joey_20b_normal.jpeg";
            source = "&lt;a href=&quot;http://twitter.com/download/iphone&quot; rel=&quot;nofollow&quot;&gt;Twitter for iPhone&lt;/a&gt;";
            text = "RT @AlexButcher12: One of the longest weeks ever, but it's been class. Even Welbeck finally did something right. #euro2012 #England";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:34 +0000";
            "from_user" = paismuttaqin;
            "from_user_id" = 235785477;
            "from_user_id_str" = 235785477;
            "from_user_name" = "asisten haji muhidin";
            geo = "<null>";
            id = 213870664036261889;
            "id_str" = 213870664036261889;
            "iso_language_code" = in;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2311132920/4jqzlu9n0yvjgue6m7k9_normal.jpeg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2311132920/4jqzlu9n0yvjgue6m7k9_normal.jpeg";
            source = "&lt;a href=&quot;http://twitter.com/&quot;&gt;web&lt;/a&gt;";
            text = "RT @KampusBola: INFO: Dengan kekalahan dari Inggris, SWEDIA dipastikan menjadi negara ke-2 yang tersingkir dari #EURO2012, menyusul Republik Irlandia.";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:31 +0000";
            "from_user" = kopite32;
            "from_user_id" = 307835184;
            "from_user_id_str" = 307835184;
            "from_user_name" = "Omar, abu norah";
            geo = "<null>";
            id = 213870652027961345;
            "id_str" = 213870652027961345;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/1750305485/4598243_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/1750305485/4598243_normal.jpg";
            source = "&lt;a href=&quot;http://twitter.com/&quot;&gt;web&lt;/a&gt;";
            text = "Match Rating: (Sweden- England 9/10) one of the best 3 games in the euro so far in the tournament.. just exciting one! #euro2012";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:24 +0000";
            "from_user" = kojipunkrock;
            "from_user_id" = 275555918;
            "from_user_id_str" = 275555918;
            "from_user_name" = nabe;
            geo = "<null>";
            id = 213870621078204417;
            "id_str" = 213870621078204417;
            "in_reply_to_status_id" = 213863786203975680;
            "in_reply_to_status_id_str" = 213863786203975680;
            "iso_language_code" = ja;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/1731824655/image_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/1731824655/image_normal.jpg";
            source = "&lt;a href=&quot;http://twitter.com/download/iphone&quot; rel=&quot;nofollow&quot;&gt;Twitter for iPhone&lt;/a&gt;";
            text = "@puukyla \U6cb3\U672c\U3067\U306f\U3082\U3046\U7b11\U3048\U306a\U3044\U3063\U3059\U306d #tbs #Euro2012";
            "to_user" = puukyla;
            "to_user_id" = 280651026;
            "to_user_id_str" = 280651026;
            "to_user_name" = puukyla;
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:24 +0000";
            "from_user" = ElisabethDuran5;
            "from_user_id" = 609418234;
            "from_user_id_str" = 609418234;
            "from_user_name" = "Elisabeth Duran";
            geo = "<null>";
            id = 213870620683943936;
            "id_str" = 213870620683943936;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2311342555/DCIM78_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2311342555/DCIM78_normal.jpg";
            source = "&lt;a href=&quot;http://mobile.twitter.com&quot; rel=&quot;nofollow&quot;&gt;Mobile Web&lt;/a&gt;";
            text = "#euro2012 if you show youself too you will make me hot in several minutes http://t.co/UwQsmGoA";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:20 +0000";
            "from_user" = Pettit95;
            "from_user_id" = 295327392;
            "from_user_id_str" = 295327392;
            "from_user_name" = "Dean Pettit";
            geo = "<null>";
            id = 213870607132143616;
            "id_str" = 213870607132143616;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2165706548/munch_2012_03_31_144236_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2165706548/munch_2012_03_31_144236_normal.jpg";
            source = "&lt;a href=&quot;http://twitter.com/download/android&quot; rel=&quot;nofollow&quot;&gt;Twitter for Android&lt;/a&gt;";
            text = "RT @stamfordpigeon: Terry looks naked without that armband. Forget whatever he's been accused of, the truth is he is still the true captain &amp; leader. #Euro2012";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:20 +0000";
            "from_user" = rezzae94;
            "from_user_id" = 435928379;
            "from_user_id_str" = 435928379;
            "from_user_name" = "febry rezza onandio";
            geo = "<null>";
            id = 213870603273379840;
            "id_str" = 213870603273379840;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2307207509/IMG00393-20120316-0703_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2307207509/IMG00393-20120316-0703_normal.jpg";
            source = "&lt;a href=&quot;http://ubersocial.com&quot; rel=&quot;nofollow&quot;&gt;\U00dcberSocial for BlackBerry&lt;/a&gt;";
            text = "RT @otha_sc: Fol low Me #EURO2012 #1000ADAY #OPENFOLLOW #INSTANFOLLOW http://t.co/6C6mxBE7";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:19 +0000";
            "from_user" = "Nona_Euro2012";
            "from_user_id" = 434219378;
            "from_user_id_str" = 434219378;
            "from_user_name" = "Nona Euro 2012";
            geo = "<null>";
            id = 213870602430316546;
            "id_str" = 213870602430316546;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2292387068/nona_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2292387068/nona_normal.jpg";
            source = "&lt;a href=&quot;http://blackberry.com/twitter&quot; rel=&quot;nofollow&quot;&gt;Twitter for BlackBerry\U00ae&lt;/a&gt;";
            text = "*cium Parker* RT \"@fierblake: Selamat Siang..*smbil dadah dadah sm ibra* RT @Nona_Euro2012: Good Morning, My England \U263a\"";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:19 +0000";
            "from_user" = rifanakhmad;
            "from_user_id" = 131992519;
            "from_user_id_str" = 131992519;
            "from_user_name" = "Rifan Akhmad";
            geo = "<null>";
            id = 213870600639361025;
            "id_str" = 213870600639361025;
            "iso_language_code" = in;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2295321527/Editing_2031052012_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2295321527/Editing_2031052012_normal.jpg";
            source = "&lt;a href=&quot;http://blackberry.com/twitter&quot; rel=&quot;nofollow&quot;&gt;Twitter for BlackBerry\U00ae&lt;/a&gt;";
            text = "Juga lagu soundtracknya iklan \"penyegar cap badak\"@Liputan9: Karena #Euro2012, Lagu \"Begadang\" Dan \"Judi\" Bang Rhoma Jadi Top Request Radio\"";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:17 +0000";
            "from_user" = AfrizalAditya;
            "from_user_id" = 444414040;
            "from_user_id_str" = 444414040;
            "from_user_name" = "AFRIZAL ADITYA";
            geo = "<null>";
            id = 213870591172812800;
            "id_str" = 213870591172812800;
            "in_reply_to_status_id" = 213869718459789312;
            "in_reply_to_status_id_str" = 213869718459789312;
            "iso_language_code" = vi;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2294411946/tc7zthbd4lmc0srv01jf_normal.jpeg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2294411946/tc7zthbd4lmc0srv01jf_normal.jpeg";
            source = "&lt;a href=&quot;http://mobile.twitter.com&quot; rel=&quot;nofollow&quot;&gt;Mobile Web&lt;/a&gt;";
            text = "@fellyciousjambi ttg #EURO2012 min :DD";
            "to_user" = FellyciousJAMBI;
            "to_user_id" = 519604225;
            "to_user_id_str" = 519604225;
            "to_user_name" = "MRS.ONLINE SHOP";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:14 +0000";
            "from_user" = "day_az";
            "from_user_id" = 54593972;
            "from_user_id_str" = 54593972;
            "from_user_name" = "Day Az";
            geo = "<null>";
            id = 213870579546198016;
            "id_str" = 213870579546198016;
            "iso_language_code" = ru;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/301917015/i_normal.jpeg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/301917015/i_normal.jpeg";
            source = "&lt;a href=&quot;http://twitterfeed.com&quot; rel=&quot;nofollow&quot;&gt;twitterfeed&lt;/a&gt;";
            text = "\U041f\U0435\U0440\U0432\U044b\U0435 \U0443\U0447\U0430\U0441\U0442\U043d\U0438\U043a\U0438 \U043f\U043b\U0435\U0439-\U043e\U0444\U0444 \U0415\U0412\U0420\U041e-2012 \U043e\U043f\U0440\U0435\U0434\U0435\U043b\U044f\U044e\U0442\U0441\U044f (\U041e\U041f\U0420\U041e\U0421) http://t.co/oM8dA830";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:08 +0000";
            "from_user" = Timpireofthesun;
            "from_user_id" = 150514655;
            "from_user_id_str" = 150514655;
            "from_user_name" = "Timmy Russell";
            geo = "<null>";
            id = 213870555428954113;
            "id_str" = 213870555428954113;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2177697758/image_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2177697758/image_normal.jpg";
            source = "&lt;a href=&quot;http://www.tumblr.com/&quot; rel=&quot;nofollow&quot;&gt;Tumblr&lt;/a&gt;";
            text = "Photo: England!! Carroll Walcott and wellbeck #euro #2012 #euro2012 #europe #england (Taken with Instagram) http://t.co/CzDtz0WP";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:06 +0000";
            "from_user" = lalainlaw;
            "from_user_id" = 400505062;
            "from_user_id_str" = 400505062;
            "from_user_name" = "Willa lala fitria \U266c";
            geo = "<null>";
            id = 213870545681387520;
            "id_str" = 213870545681387520;
            "iso_language_code" = es;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2312241367/koi_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2312241367/koi_normal.jpg";
            source = "&lt;a href=&quot;http://blackberry.com/twitter&quot; rel=&quot;nofollow&quot;&gt;Twitter for BlackBerry\U00ae&lt;/a&gt;";
            text = "RT @otha_sc: Follow_Me #EURO2012 #1000ADAY #OPENFOLLOW #INSTANFOLLOW http://t.co/BBehU3J1";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:05 +0000";
            "from_user" = YvonneAdelya05;
            "from_user_id" = 350094345;
            "from_user_id_str" = 350094345;
            "from_user_name" = "Yvonne Adelya So";
            geo = "<null>";
            id = 213870541730361344;
            "id_str" = 213870541730361344;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/2302248185/Screen_20120606_15002_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/2302248185/Screen_20120606_15002_normal.jpg";
            source = "&lt;a href=&quot;http://www.pay4tweet.com&quot; rel=&quot;nofollow&quot;&gt;Pay4Tweet&lt;/a&gt;";
            text = "RT @TeamFollowWacky: RETWEET 4 '10,000' FOLLOWERS! http://t.co/2zLY4pd1 - C'MON #ENGLAND #EURO2012! SWEDEN 2 - 3 ENGLAND!!!! CONGRATULATIONS!!!\n #ad";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        },
                {
            "created_at" = "Sat, 16 Jun 2012 05:48:04 +0000";
            "from_user" = europakampioen;
            "from_user_id" = 456962739;
            "from_user_id_str" = 456962739;
            "from_user_name" = "Europees Kampioen ";
            geo = "<null>";
            id = 213870539096326147;
            "id_str" = 213870539096326147;
            "iso_language_code" = en;
            metadata =             {
                "result_type" = recent;
            };
            "profile_image_url" = "http://a0.twimg.com/profile_images/1737918047/europakampioen_normal.png";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/1737918047/europakampioen_normal.png";
            source = "&lt;a href=&quot;http://www.echofon.com/&quot; rel=&quot;nofollow&quot;&gt;Echofon&lt;/a&gt;";
            text = "RT @arminvanbuuren: Kharkov!!! Just finished playing. Crazy!!! We're ready!!! #neddui #euro2012 http://t.co/YjUhrkpY";
            "to_user" = "<null>";
            "to_user_id" = 0;
            "to_user_id_str" = 0;
            "to_user_name" = "<null>";
        }
    );
    "results_per_page" = 15;
    "since_id" = 0;
    "since_id_str" = 0;
}
2012-06-16 06:49:38.235 V4[560:207] WHERE IS THIS: (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:58:16.390

*对我来说，您的dict*字典中似乎没有关键的“文本” 。但是你有关键的*结果*。如果你执行

```
NSArray results = [dict objectForKey:@"results"]; 
```

你会得到包含 NSDictionaries 的 NSArray。那些嵌套字典有关键的“文本”。所以你需要遍历数组*结果*：

```
NSMutableArray *allTweetText = [NSMutableArray array];

for (NSDictionary *result in results) {
    NSString *text = [result objectForKey:@"text"];
    [allTweetText addObject:text];
} 
```

# objective-c - IOS - 如何在 UIApplication 之外创建模式用户/密码？

> ID：11061224
> 
> 赞同：1
> 
> 时间：2012-06-16T05:57:14.887
> 
> 标签：objective-c, ios, xcode, cocoa, dylib

我不确定这是否可以完成......

背景：我正在构建一个内部应用程序，这意味着它不会进入应用商店，因此我不受应用商店指南的限制。

我有一个在主应用程序之前加载的 dylib。它是一种用于应用程序的扩充库。我正在使用构造函数`__attribute__`来加载我的东西。在那里我想放置一个警报视图或任何类型的弹出窗口，它将接收用户/密码问题。如果密码正确，则允许用户继续进入原始应用程序。

由于这是在 dylib 我还没有 UIApplication 并且我不想干涉原始应用程序或源。

欢迎提出建议，提示...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:29:12.473

这就是我在我的应用程序中所做的非常相似的事情：

0）拦截`applicationDidFinishLaunching`消息，添加自己的代码，运行原始实现。

1) 制作不透明的全屏 UIWindow（例如黑色）。

2）将其设置`windowLevel`为`UIWindowLevelAlert + 1`因此它隐藏了应用程序中的所有其他窗口。

3) 将用户和密码字段添加到此 UIWindow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:53:22.533

我很确定你不能在没有初始化 UIApplication 和 UIWindow 实例的情况下显示 UIAlertView 。

只有 iOS 本身可以在应用程序之外显示警报，例如当它请求权限或在 iTunes 或游戏中心登录的情况下......

作为一种解决方法，您可以：

*   在应用程序中创建一个登录视图
*   为登录过程创建一个 Web 应用程序。Web 应用程序可以使用自定义 URL 方案启动本机应用程序，并将“用户”和“密码”等参数传递给应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:57:16.517

您应该为登录创建一个视图，然后如果您通过登录，您可以继续使用该应用程序，否则您只需让应用程序自行关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T08:00:06.497

您可以在加载 dylib 时启动一个线程并让它监听您`UIApplication`的可用，然后在主线程上显示警报。

# mercurial - Mercurial：不同环境下的远程操作（remotecmd .hgrc）

> ID：11061225
> 
> 赞同：3
> 
> 时间：2012-06-16T05:57:50.130
> 
> 标签：mercurial, remote-server, hgrc

我合作了两个项目，它们位于不同的服务器中，A 和 B。虽然 A 有`hg`程序`/opt/mercurial/bin/hg`，B 有它`/usr/local/bin/hg`。

当我想将更改拉/推到任一远程时，我必须手动修改`.hgrc`文件才能使选项`remotecmd`指向正确的`hg`.

我想知道是否可以`remotecmd`为不同的遥控器设置不同的路径，这样我就不必在`hg`每次需要进行远程操作时手动更改程序的路径。

我看到了这个问题：[Setup platform-dependent hgrc](https://stackoverflow.com/questions/4607273/in-mercurial-how-to-setup-and-use-per-user-platform-dependent-hgrc)，但在我看来，应该有一种更本机（类似于内置设置）的方式来执行此操作。到目前为止我还没有找到它，所以欢迎任何帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:41:33.860

理想情况下，您只需将`hg`二进制文件放入`$PATH`两台服务器上，您就不必再考虑它了。这可以在系统`/etc/profile`或`.ssh/enviironment`远程服务器上完成。大多数人**甚至从**不需要考虑`remotecmd`。

如果它们是单独的项目（甚至是同一项目的本地单独克隆），您可以在每个存储库`remotecmd`中的`.hg/hgrc`文件中设置 - 设置不必只是在您的`~/hgrc`文件中。

另请注意，`--remotecmd`它可用作推送和拉取的命令行选项，因此您可以使用它，甚至可以将其与以下内容结合使用：

```
[alias]
pusha = push --remotecmd /opt/mercurial/bin/hg 
```

然后你可以做`hg pusha`

不过，真的，试着`hg`像其他人一样进入你的道路。

# ruby-on-rails - 对 1 个模型字段使用 2 个虚拟属性

> ID：11061226
> 
> 赞同：0
> 
> 时间：2012-06-16T05:57:56.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一位经验丰富的 Web 开发人员，但对 Rails 很陌生。我正在编写基于复式记帐数据库的预算应用程序。数据库包含表示交易的日记帐分录，每个日记帐分录有多个过帐。每个过帐都有一个帐户和一个金额。我将借方金额表示为负金额，将贷方金额表示为正金额。

但是，我不希望用户记住正面和负面，因此我在模型上为贷方金额和借方金额制作了虚拟属性，以便用户看到单独的贷方金额和借方金额字段。

发布模型如下：

```
class Posting < ActiveRecord::Base
  belongs_to :account
  belongs_to :journal_entry

  attr_accessible :account_id, :credit_amount, :debit_amount
  attr_accessor :credit_amount, :debit_amount

  after_validation :set_amount
  after_find :split_amount

  validates :credit_amount, :format => { :with => /\A(?:\d+(?:\.\d{1,2})?|(?:.\d{1,2}))?\z/ }
  validates :debit_amount,  :format => { :with => /\A(?:\d+(?:\.\d{1,2})?|(?:.\d{1,2}))?\z/ }

  validate :check_amounts

  def check_amounts
    unless @account_id.blank?
      if not @debit_amount.blank? and not @credit_amount.blank?
        errors.add(:base, "cannot specify both credit and debit amount.")
      elsif @debit_amount.blank? and @credit_amount.blank?
        errors.add(:base, "must specify one of credit or debit amount.")
      end
    end
  end

  protected

  def set_amount
    unless @debit_amount.blank? and @credit_amount.blank?
      self.amount = @debit_amount.blank? ? BigDecimal.new(@credit_amount) : -BigDecimal.new(@debit_amount)
    end
  end

  def split_amount
    @credit_amount = (self.amount.nil? or self.amount >= 0) ? self.amount : nil
    @debit_amount = (self.amount.nil? or self.amount >= 0) ? nil : -self.amount
  end
end 
```

这是为 1 个模型字段（金额）使用 2 个虚拟属性（credit_amount 和 debit_amount）的正确方法吗？我尝试为直接使用基础金额字段的 credit_amount/debit_amount 编写 getter 和 setter，但这意味着我无法准确地向用户报告验证错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:18:04.793

我喜欢你写它的方式。使用正则表达式的贷方金额和借方金额验证比仅将这些字段验证为数字更严格。split amount 方法可以使用上面的注释来解释你在那里做什么，这样下一个在凌晨 3:00 调试的人就不必弄清楚（实际上，正则表达式也可以使用明确的描述注释）。

我希望这有帮助。

祝你好运！

# java - 如何将 InputStream 转换为字符串？

> ID：11061227
> 
> 赞同：0
> 
> 时间：2012-06-16T05:58:25.417
> 
> 标签：java, nullpointerexception, inputstream, bufferedreader

我试过这个：

```
 InputStream file = Test.class.getResourceAsStream("highScore.txt");
  BufferedReader br = new BufferedReader (new InputStreamReader(file));
  String text;
  text = br.readLine();
  while (text!=null) {
    System.out.println (text);
  } 
```

但我得到`NullPointerException`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:05:31.843

您尝试作为 InputStream 读取的资源应该存在于您的 Java 类路径中。否则`getResourceAsStream()`会返回 null，导致`NullPointerException`当你尝试创建`InputStreamReader`它时。有关如何读取资源的信息，请参见[加载文件作为输入流的不同方式。](https://stackoverflow.com/questions/676250/different-ways-of-loading-a-file-as-an-inputstream)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:05:50.267

尝试一个简单的文件：

```
InputStream file = new FileInputStream("highScore.txt"); 
```

### 已编辑

如果您在获取正确路径时遇到问题，请执行以下操作：

```
System.out.println(new File("highScore.txt").getAbsolutePath()); 
```

这将很快告诉您“当前”目录是什么。`"../highScore.txt"`如果您需要上一级目录，或者`"/somedir/highScore.txt"`需要下一级等，您可能会发现需要使用。

我发现打印绝对路径是解决这类问题的最快方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T06:04:45.303

干得好

```
StringWriter writer = new StringWriter();
IOUtils.copy(file, writer, encoding);
String theString = writer.toString(); 
```

我怀疑您`getResourceAsStream`是否在那里返回正确的 InputStream.put 日志

如果您想使用 BufferedReader，那么您也可以使用以下代码段。

```
 BufferedReader br = new BufferedReader(new InputStreamReader(is));

    StringBuilder sb = new StringBuilder();

    String line;

    while ((line = br.readLine()) != null) 
     {
        sb.append(line);
     } 

   System.out.println(sb.toString());

   br.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T17:53:38.647

您可以将此单线用于文件到字符串

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ScannerSample {

    public static void main(String[] args) throws FileNotFoundException {
     //Z means: "The end of the input but for the final terminator, if any"
        String output = new Scanner(new File("file.txt")).useDelimiter("\\Z").next();
        System.out.println("" + output);
    }
} 
```

# jquery - jQuery在彼此之上加载文本层

> ID：11061230
> 
> 赞同：0
> 
> 时间：2012-06-16T05:58:39.880
> 
> 标签：jquery, slideshow

我一直在使用 jQuery Tools 的幻灯片，因为我过去有过十几次。但是，在这个当前项目中，幻灯片会一次加载每张幻灯片中的所有文本，并在旋转开始之前显示它。本质上，在旋转前的 1-2 秒内，您会看到层层叠叠的文本……在视觉上非常不吸引人。有谁知道如何防止这种情况？站点参考是[www.AmyLayneLitzelman.com](http://www.AmyLayneLitzelman.com/)，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:14:36.580

查看您的 HTML 页面，您没有在包含幻灯片图像和文本的 DIV 中分配任何 .class。所以，我估计你在 .slide-image 和 .slide-txt-blk 上应用了淡入淡出效果。

您可能希望 .fadeIn()/.fadeOut() 包装 DIV，而不是逐个淡化其子元素。

我正在谈论的DIV的位置：

```
<!-- slide -->
<div class="this_one">
  <img class="slide-image" />
  <div class="slide-txt-blk" />
</div> 
```

使用 .this_one 而不是其子元素来控制淡入淡出效果。

请提供运行幻灯片的代码。所以我们可以研究更多细节。如果需要，我会尝试查看我的答案。

# java - Hibernate Identity 列但不是主键

> ID：11061243
> 
> 赞同：0
> 
> 时间：2012-06-16T06:04:16.287
> 
> 标签：java, hibernate, identity

我有一个 sqlserver 2008 r2 数据表，它有一列 autoId int identity(1,1)，但它不是主键，另一列是 varchar(20)。问题是：我如何配置 hbm 文件？下面是我的配置文件，但是当我尝试保存一个实例时出现错误。“当 IDENTITY_INSERT 设置为 OFF 时，无法在表 'acct_info' 中插入标识列的显式值。”

```
 <property name="autoId" type="int">
            <column name="auto_id" not-null="true" unique="true"  />
        </property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:17:34.663

可能有两个原因，要么您在 DB 中没有足够的权限进行 IDENTITY INSERT，要么您尝试在休眠和 DB 层设置标识符的机制不匹配。

您可以在 hibernate 定义文件中查看您的 id 生成策略

1.  在数据库中，您可以更改为`Set IDENTITY_INSERT to "ON"`
2.  选择不同的生成器类

# c# - 如何在 c# 代码隐藏中调用具有返回值的 Javascript 函数

> ID：11061247
> 
> 赞同：2
> 
> 时间：2012-06-16T06:05:21.890
> 
> 标签：c#, javascript

我有一个页面，我需要**确认**是否显示更新的网格

我正在使用调用 javascript 函数

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Error", "confirm('Are u sure');", true); 
```

我想知道的是如何在后面的C#代码中获取confirm的返回值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T06:24:27.930

而不是这个

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Error", "confirm('Are u sure');", true); 
```

用这个

```
ScriptManager.RegisterStartupScript(this, typeof(string), "Error", "ConfirmUser('Are u sure');", true);

<script type='javascript'>
 function ConfirmUser(msg)
 {
  if(confirm(msg))
    __doPostBack('','');
 }
<script> 
```

请参阅以下链接以了解更多信息`__doPostBack`

[1](http://wiki.asp.net/page.aspx/1082/dopostback-function/) [2](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T06:24:01.707

> 我有一个页面，我需要确认是否显示更新的网格

`Cancel`当使用确认对话框的选择按钮时，您可以阻止回发。

```
<asp:Button ID="Button1" runat="server" 
            OnClientClick="return confirm('Are you sure to populate the list?');" 
            Text="Button" onclick="Button1_Click" /> 
```

# ruby-on-rails - Ruby on Rails 迁移数据库不一致（Ruby on Rails 3 基础培训第 6 章）

> ID：11061249
> 
> 赞同：0
> 
> 时间：2012-06-16T06:05:32.400
> 
> 标签：ruby-on-rails, ruby

我正在学习 Lynda 课程，并且正在迁移数据库。因此，首先，我的新版 Rails (3.2.6) 中的默认语法似乎与视频中的相比存在一些语法差异，但我查看了 Ruby 网站并发现这可能无关紧要.

但是，我遇到的问题是，在创建`Users`定义要放入的列（属性）的模型时，它会创建所有内容，除了我自己定义的那些（名字、姓氏、电子邮件和密码）不会得到创建的。我假设只有创建日期、修改日期和 ID 可以，因为它们是默认的，并且开箱即用。

这是视频告诉您使用的代码：

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table :users do |t|
      t.string "first_name", :limit => 25
      t.string "last_name", :limit => 50
      t.string "email", :default => "", :null => false
      t.string "password", :limit => 40
      t.timestamps
    end
  end

  def down
    drop_table :users
  end
end 
```

我在下面的差异周围放了两个星号，主要的是`def up`我的版本中的默认值，但在视频版本中它是`def self.up`. 当我阅读 Rails 网站上的文档时，我注意到的另一件事是，您应该使用`:`. 由于视频给出的代码不起作用，我也尝试了下面的代码。但是我得到了相同的结果，`t.strings`实际上没有在表中创建。

```
class CreateUsers < ActiveRecord::Migration
  **def up**
    create_table :users do |t|
      t.string **:**first_name, :limit => 25
      t.string **:**last_name, :limit => 50
      t.string **:**email, :default => "", :null => false
      t.string **:**"password", :limit => 40
      t.timestamps
    end
  end

  **def down**
    drop_table :users
  end
end 
```

所以两个问题：

1.  我没有使用正确的语法吗？

2.  第一次“设置”表后，如果再次设置，它会覆盖旧配置吗？我必须再次创建一个全新的数据库吗？我不确定通过更改“用户”文件并重新排列语法，然后执行 rake db:migrate 是否可以覆盖所有内容。

非常感谢你的帮助。

-戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:35:42.487

符号与字符串无关紧要。Self.up 与 up 是较旧的样式，但也无关紧要。Rails 在模式迁移表中跟踪它已经运行的迁移。这样做的结果是，一旦运行迁移，rails 将不会再次运行它，即使您已经更改了它。

你可以做

```
rake db:rollback 
```

让 rails 为上次运行的迁移运行 down 方法（因此下次运行时它将再次运行`db:migrate`）

创建一个新的迁移以添加额外的列可能更合适 - 如果您已经将原始迁移推送到您的存储库，我通常会这样做

# vb.net - 在 Visual Basic 中创建国际象棋图形

> ID：11061250
> 
> 赞同：1
> 
> 时间：2012-06-16T06:05:44.433
> 
> 标签：vb.net, chess

我正在 Visual Basic.Net 中创建多人国际象棋游戏，我需要为游戏创建图块。早些时候，我使用按钮来制作图块，但后来我意识到它们不仅看起来难看，而且编码部分也成了问题。此外，棋子的图像不适合按钮，它们变得扭曲。此外，每次下棋时将图像切换到不同的按钮也变得非常低效。因此，鉴于这些困难，我想构建一个合适的板，但我不知道从哪里开始或使用什么控件进行设计。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:19:51.950

您不想使用控件来控制您应该将图像直接绘制到表单上。然后，您可以完全控制所有内容的绘制位置。

您需要保存某种形式的数据结构，以“记住”您的所有部分在哪里。

查看[此 GDI+ 链接](http://msdn.microsoft.com/en-us/library/aa289159%28v=vs.71%29.aspx)以帮助您入门

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:10:28.390

使用 VB.NET 的国际象棋程序：[http ://www.vbdotnetheaven.com/UploadFile/kaushalgol/ChessProgramInVB11142005235115PM/ChessProgramInVB.aspx](http://www.vbdotnetheaven.com/UploadFile/kaushalgol/ChessProgramInVB11142005235115PM/ChessProgramInVB.aspx)

这是用 VB6 编码的：http: [//freesourcecodevisualbasic.blogspot.se/2011/07/source-code-2-player-chess.html](http://freesourcecodevisualbasic.blogspot.se/2011/07/source-code-2-player-chess.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T06:54:46.290

我建议这对于学校项目来说可能太复杂了。也许如果你缩小范围 - 尝试人类与人类。

反正，

[国际象棋编程维基](http://chessprogramming.wikispaces.com/)

[Bruce Moreland 关于 MinMax 和其他对抗性搜索算法的旧页面](http://web.archive.org/web/20071213180053/www.seanet.com/~brucemo/topics/topics.htm)

我有更多链接，但我不能再发布任何链接了。它仅限于 2 个链接。对不起。

# android - 如何在 ListView 中删除条目？

> ID：11061254
> 
> 赞同：0
> 
> 时间：2012-06-16T06:06:10.667
> 
> 标签：android, android-listview, adapter, simplecursoradapter

我正在使用 a`ListView`来`SimpleCursorAdapter`显示我的 DB-Entries。到目前为止它工作正常：

```
public void LoadListView(){
    Cursor mCursor = mDbHelper.fetchAllFahrtenbuch();
    if (mCursor != null){     
        startManagingCursor(mCursor);
        mCursor.moveToFirst();
        ListAdapter adapter = new SimpleCursorAdapter(this,
                R.layout.fahrten_anzeigen_list_view, 
                mCursor,
                new String[] { "_id", mCursor.getColumnName(6), mCursor.getColumnName(1), mCursor.getColumnName(14), mCursor.getColumnName(15), mCursor.getColumnName(16), mCursor.getColumnName(17), mCursor.getColumnName(20)},
                new int[] { R.id.textView15, R.id.textView1, R.id.TextView3, R.id.textView5, R.id.textView6, R.id.textView9, R.id.textView10, R.id.textView13});
        setListAdapter(adapter);
        registerForContextMenu(getListView());              
        }
} 
```

如果在条目中收到特殊值，我想要做的是删除条目。如果 的值为`mCursor.getColumnName(6)`0 **，**我想*删除*.`ListView`

那可能吗？
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T06:18:27.550

干得好。

```
textView.setPaintFlags(textView.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:17:12.337

在您的适配器上设置 a[`SimpleCursorAdapter.ViewBinder`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.ViewBinder.html)并查看是否该绑定第 6 列的数据。如果您在该列并且它具有所需的值，则删除该条目：

```
adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {

     public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
          if (view.getId() == R.id.textView6) {
              TextView tv = (TextView) view;
              // bind the text to this TextView(I assume that it's a TextView)
              tv.setText(cursor.getString(cursor.getColumnIndex(columnIndex))); 
              // check if it is the special value.
              // if it is strike through this entry, whatever that means
              return true;
          }
          return false;
     }

});
setListAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T06:11:05.660

`<strike>`在文本中使用 html 标签

```
<strike>This is a line</strike> 
```

~~这是一条线~~

```
public void LoadListView(){
    Cursor mCursor = mDbHelper.fetchAllFahrtenbuch();
    if (mCursor != null){     
        startManagingCursor(mCursor);
        mCursor.moveToFirst();
        String data  = new String[] { "_id", mCursor.getColumnName(6), mCursor.getColumnName(1), mCursor.getColumnName(14), mCursor.getColumnName(15), mCursor.getColumnName(16), mCursor.getColumnName(17), mCursor.getColumnName(20);
        if (mCursor.getColumnName(6).equals("0") {
           data =  new String[] { "_id", "<strike>"+mCursor.getColumnName(6)+"</strike>", "<strike>"+mCursor.getColumnName(1)+"</strike>", "<strike>"+mCursor.getColumnName(14)+"</strike>", "<strike>"+mCursor.getColumnName(15)+"</strike>", "<strike>"+mCursor.getColumnName(16)+"</strike>", "<strike>"+mCursor.getColumnName(17)+"</strike>", "<strike>"+mCursor.getColumnName(20)+"</strike>";
        }
    ListAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.fahrten_anzeigen_list_view, 
            mCursor,
            data},
            new int[] { R.id.textView15, R.id.textView1, R.id.TextView3, R.id.textView5, R.id.textView6, R.id.textView9, R.id.textView10, R.id.textView13});
    setListAdapter(adapter);
    registerForContextMenu(getListView());              
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T06:20:19.037

是的，你可以为此你需要为listview制作custome daapter，其中在检查你的删除条件后的**getView（）**方法中你可以将第一个文本设置为你的textview，然后使用那个textview，比如

```
 yourtextview.setPaintFlags(yourtextview.getPaintFlags()|Paint.STRIKE_THRU_TEXT_FLAG); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T06:21:33.650

你可以在你的`getView`：

```
 if (strikethroughState[position] == 1) {            // your if condition
        first.setPaintFlags(first.getPaintFlags()      // set strikethrough on TextView1
                | Paint.STRIKE_THRU_TEXT_FLAG);
        second.setPaintFlags(second.getPaintFlags()
                | Paint.STRIKE_THRU_TEXT_FLAG);
        third.setPaintFlags(third.getPaintFlags()
                | Paint.STRIKE_THRU_TEXT_FLAG);
        fourth.setPaintFlags(third.getPaintFlags()
                | Paint.STRIKE_THRU_TEXT_FLAG);
    } 
```

# objective-c - 如何使用核心图形在pdf中现有文本下绘制图像

> ID：11061259
> 
> 赞同：-1
> 
> 时间：2012-06-16T06:07:26.770
> 
> 标签：objective-c, cocoa, pdf, core-graphics

我想在现有的 PDF 文本内容下绘制水印图像。目前我可以使用核心图形在现有内容之上绘制图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T10:32:39.823

我为自己的问题找到了解决方案。我通过更改目标上下文中的绘图顺序解决了这个问题。

# wcf - WCF 会话实例模式托管问题

> ID：11061262
> 
> 赞同：1
> 
> 时间：2012-06-16T06:07:58.300
> 
> 标签：wcf, session, concurrency, load-balancing

我正面临在会话实例模式下托管 WCF 的情况。我正在封装实际情况并提出一个示例来复制它……如下所示。

要托管的服务是“MyService”。我正在使用 Windows 服务来托管它。使用 http 端点。
它将需要支持 500 个并发会话。（单例和 Percall 无法完成，因为合同是基于工作流的...登录...Function1，Function2，Logout..）
我有 4 个服务器，每个服务器都具有支持 200 个并发的硬件能力会议。
因此，我将一台服务器上的服务配置为路由器（ServiceHost S = new ServiceHost(RouterService)），其托管路径为“http://myserver/MyService”。我设置了一个简单的负载平衡机制，并应用路由器表将传入请求重定向到托管实际服务副本的其他三个服务器...("http://myserver/MyService1","http://myserver/MyService2 ","http:

它仍然无法正常工作...一旦点击超过 200...通信错误开始...我想是因为当进行 500 个并发调用时，还需要路由器（功能 200）保持与客户端的连接连同实际服务服务器......（在会话调用模式下）......我的想法是否正确？

我的问题是...

1）我的方法是正确的还是概念上有缺陷...我应该要求硬件团队建立 NLB...
2）我们是否应该专门重新设计合同以确保可以通过某种方式提出请求 PerCall...
3）某人建议此类系统应托管在云（Windows Azure）上...需要查看所涉及的成本...但它是否正确...
4）托管 WCF 以处理基于会话的调用时涉及的最佳实践是什么。

我知道我的问题很复杂，不会有一个“正确”的答案......但任何帮助和洞察力将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:55:21.820

There are three seperate but connected issues here:

*   Your design requires that you maintain state between calls
*   You are dependent upon getting to the same server each time (since you store state in memory)
*   You have a limit of 200 connections per server

A solution where you are dependent on coming back to the same server will not work (well) on Windows Azure.

You could implement a Sticky IP cluster, that would solve most of your problems, but it would not guarrantee that no more than 200 connections are on one server. For the most part this would be OK.

You could store the cache in Appfabric Cache, then it would not matter which server you returned to.

You could redesign your system so that all state is stored in the database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:35:19.723

“我是否应该要求硬件团队设置 NLB...” 根据您的说法，Shiraz 的“粘性 IP 集群”是最接近托管给定 scnerio 的人。

问题是 WCF 会话是基于传输的。因此我们不能像传统的 aspnet 那样将这些“会话”存储在状态服务器/数据库上。

WCF4.0 提出了新的绑定，例如 NetTcpContextBinding、BasicHttpContextBinding、WSHttpContextBinding，可以帮助跨机器环境重新创建上下文。但是我没有生产实现知识来提供示例。

[这篇](http://www.devproconnections.com/article/net-framework2/load-balancing-and-scaling-your-wcf-services-122258)文章应该可以帮助您了解更多...

# django - 如何键入提示以便 pycharm 可以自动完成局部变量？

> ID：11061266
> 
> 赞同：2
> 
> 时间：2012-06-16T06:09:17.627
> 
> 标签：django, pycharm

在这种情况下， 我如何告诉 pycharm *form.save()的返回类型是**CategoryQuestion*对象？

```
def category_ask(request):
    if request.method == 'POST':
        form = CategoryQuestion_form(request.POST)
        if form.is_valid():
            question = form.save(commit=False)
            question.who = request.user
            question.dat<tab> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T06:09:18.263

使用“ **assert isinstance(x, Type)** ”来伪造 pycharm 以了解局部变量的正确类型。然后 Pycharm 知道正确的类型，并且制表符完成将起作用：

```
def category_ask(request):
    if request.method == 'POST':
        form = CategoryQuestion_form(request.POST)
        if form.is_valid():
            question                = form.save(commit=False)
            assert isinstance(question, models.CategoryQuestion)
            question.who            = request.user
            question.date_created<tab> 
```

从 pycharm 1.2 开始，不幸的是，您不能只使用未经检查的“ **isinstance()** ”，断言是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-18T06:58:13.403

**PyCharm 3（不确定早期版本）支持通过:type**或**@type**文档字符串对局部变量（以及参数）进行类型提示。

```
 def category_ask(request):
    if request.method == 'POST':
        form = CategoryQuestion_form(request.POST)
        if form.is_valid():
            # :type models.CategoryQuestion
            question = form.save(commit=False)
            question.who = request.user
            question.dat<tab> 
```

查看官方文档： http: [//www.jetbrains.com/pycharm/webhelp/type-hinting-in-pycharm.html#d68026e604](http://www.jetbrains.com/pycharm/webhelp/type-hinting-in-pycharm.html#d68026e604)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-02T20:47:54.057

在 Pycharm 3 中，**局部**变量的 @type 提示很挑剔，但很有效。它必须出现在赋值之后的行上，并且似乎需要三引号语法：

```
 if form.is_valid():
            question = form.save()
            """@type : CategoryQuestion"""
            question.dat<tab> 
```

查看官方文档： http: [//www.jetbrains.com/pycharm/webhelp/type-hinting-in-pycharm.html#d68026e604](http://www.jetbrains.com/pycharm/webhelp/type-hinting-in-pycharm.html#d68026e604)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-04T03:51:43.580

对于使用 python3.6 及更高版本的用户：
Type Hinting 现在是 python 的一部分，并且可以与 pycharm 很好地配合使用。
您可以`:`在变量名称后添加一个以提示其类型，例如`some_varibale: str`. 同样的规则也适用于参数。
所以，在这种情况下，变量被暗示是`CategoryQuestion`这样的：

```
question: CategoryQuestion = form.save(commit=False) 
```

要知道如何输入查询集的类型提示，`filter`请参见[此处](https://stackoverflow.com/a/56880544/6026516)
您还可以使用[django_hint](https://github.com/Vieolo/django-hint)，它具有专门用于 Django 的类型提示类。

# lex - lex中INITIAL的含义

> ID：11061268
> 
> 赞同：0
> 
> 时间：2012-06-16T06:09:33.263
> 
> 标签：lex

在以下跳过注释的代码中， 的含义是`BEGIN(INITIAL)`什么？

```
    %x C_COMMENT

    "/*" { 开始(C_COMMENT); }
    “*/” { 开始（初始）；}
    . { }

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T19:46:15.120

INITIAL 是在所有 lex 程序中隐式声明的状态。（C_COMMENT 也是一个状态，但它不是内置在 lex 中的，所以它是显式声明的。）

BEGIN(statename) 只是意味着输入状态 statename。所以这个 lex 片段的作用如下：如果读取“/*”，则进入状态 C_COMMENT，当它看到“*/”时，它会返回默认状态。

您现在可以添加在 C_COMMENT 状态时忽略所有输入（当然“*/”除外）的规则，而在您不在时（或当您处于 INITIAL 状态时）对输入执行其他操作。

# c# - csv帮助器对象引用未设置csvWriter c#

> ID：11061269
> 
> 赞同：-1
> 
> 时间：2012-06-16T06:10:00.873
> 
> 标签：c#, excel

我有一堂课

```
public class avto:IEquatable<avto>
{
    public string gorod;
    public string model;
    public string marka;
    public string god;
    public string cena;
    public string tel1="";
    public string email = "";
    public List<String> tel = new List<string>();
    public avto()
    {

    }
    public void setTel(string t)
    {          
        string[] spl = t.Split(',');
        tel.AddRange(spl);
    }

    public bool Equals(avto other)
    {
        return tel1==other.tel1 && model==other.model && marka==other.marka
            && god==other.god && cena==other.cena && gorod==other.gorod;
    }
} 
```

和 csvWriter 的代码

```
 public void save(List<avto> ls)
    {
        using (var textWriter = new StreamWriter("1.csv"))
        using (var writer = new CsvWriter(textWriter))
        {
            writer.WriteRecords(ls);
        }
    } 
```

在这一行

```
writer.WriteRecords(ls); 
```

我有错误

> 你调用的对象是空的。

Source-CsvHelper 我该怎么做才能使此代码正常工作？

`Ls`不为空，count=600

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:44:57.873

> 您传入的对象`save(List<avto> ls)`尚未实例化。

例如：

```
var ls = new List<avto>();
save(ls); 
```

# php - 用于读写密集型站点的优秀 NoSQL 数据库

> ID：11061272
> 
> 赞同：3
> 
> 时间：2012-06-16T06:10:16.847
> 
> 标签：php, database, nosql

好的，我确实为我的客户提供了一个小型消息传递网站。好吧，它更有可能是一个评论后系统（用 PHP 创建）。现在我的客户想要一个可以评论另一个现有评论并添加一些功能（如喜欢和标记）的系统。另一件事是我的客户在他的公司中大量使用现有系统，因为他们像 Skype 聊天一样使用它（这使它成为读写密集型）。好吧，我的客户希望尽可能使用开源软件。所以我使用了mysql社区版。

我的故事太多了......所以我对 NoSql 数据库进行了 1 周的研究，我发现它适合我的要求，因为我的客户想要添加功能（这意味着不时添加和添加列和表。）现在这些是引起我注意的nosql数据库系统。（如果你能推荐其他nosql数据库系统就可以了）

1.  MongoDB
2.  沙发数据库
3.  雷迪斯

现在我的问题是这三个中哪一个对我的情况有好处？我还读到了关于这 3 个 nosql 数据库的一些坏事

1.  MongoDB 的 2.x 版本很糟糕
2.  CouchDB 很慢（我的客户不想慢）
3.  Redis 是基于内存的，因此它只是以特定的时间间隔写入磁盘。所以当系统在间隔中间崩溃时，数据就会丢失

我想对此有一些意见以及任何可以帮助我应对即将到来的情况的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:43:33.647

MongoDB 是一个流行的解决方案，也是我个人的偏好。Mongo 的优点（除了无模式之外）是您可以拥有嵌套/嵌入的文档。例如，您可以有一个评论，其中包含一组子评论，每个子评论都有自己的子评论数组。我不知道任何其他具有该功能的数据存储。它也很快。

CouchDB 有一些不错的特性，但 Mongo 非常相似并且要好得多。

Redis 与其他两个非常不同。它主要用作 memcached 的替代品。所以它主要用于临时数据。尽管它内置了一些不错的 pubsub 功能。很多人同时使用 MongoDB 和 Redis，但用途不同。

# google-maps-api-3 - 试图让谷歌地图 fitbounds 工作

> ID：11061273
> 
> 赞同：0
> 
> 时间：2012-06-16T06:10:20.140
> 
> 标签：google-maps-api-3

我正在使用 Google Maps V3 API 和 StyledMarkers。数据来自返回数百个点的 PHP/MySQL 查询。

下面的代码返回了我需要的所有内容并且工作正常，除了让它缩放到适当的级别（在这种情况下我知道是 10）。

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title><?php echo returnval("event_name","events",$_GET['eid']); ?> Map - No Refresh</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="StyledMarker.js"></script>
<script type="text/javascript">
function initialize() {
  var myLatLng = new google.maps.LatLng(<?php echo $evlat; ?>, <?php echo $evlng; ?>);
  var bounds = new google.maps.LatLngBounds();
  var myOptions = {
    zoom: 9,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("show_map"), myOptions);
<?php
  $iconcntr = 0;
  while ($row = mysql_fetch_array($result)) {
    $iconcntr ++;
    $rfa_no = $row['rfa_no'];
    $longitude = $row['longitude'];
    $latitude = $row['latitude'];
    if ($row['rfa_priority'] == 1) {
      $iconclr = "FF0000";
    } elseif ($row['rfa_priority'] == 2) {
      $iconclr = "FFFF00";
    } else {
      $iconclr = "FFFFFF";
    }
?>
    var varLatLng = new google.maps.LatLng(<?php echo $latitude; ?>,<?php echo $longitude; ?>);
    bounds.extend(varLatLng);
    var styleMaker<?php echo $iconcntr; ?> = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.BUBBLE,{color:"<?php echo $iconclr; ?>",text:"<?php echo $rfa_no; ?>"}),position:new google.maps.LatLng('<?php echo $latitude; ?>', '<?php echo $longitude; ?>'),flat:true,zIndex:<?php echo ($iconcntr+1000); ?>,map:map});
<?php
  }
?>
  map.fitbounds(bounds);
}
</script>

</head />
<body style="margin:0px; padding:0px;" onload="initialize()" />
<div id="show_map" style="width:100%; height:100%;"></div>
</body>
</html> 
```

有人知道我做错了什么吗？在编程部门不是很强大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:25:19.663

JavaScript 区分大小写。

使用**`map.fitBounds(bounds)`**而不是`map.fitbounds(bounds)`. [文档](https://developers.google.com/maps/documentation/javascript/reference#Map)

您应该在 Javascript 控制台中看到关于`fitbounds`不是有效方法或类似内容的错误。

# iphone - iPhone：无法正确显示阿拉伯字体。如何使用字形来显示它？

> ID：11061276
> 
> 赞同：10
> 
> 时间：2012-06-16T06:10:34.223
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想在我的应用程序中显示阿拉伯字体（me_quran 字体）。我的数据库中有阿拉伯语文本。

阿拉伯语文本示例：“بِسْمِ ٱلَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ”

我已经尝试过以下事情。

**1）尝试：**

在 info.plist 文件中，我在选项中添加了`.ttf`文件。`fonts provided by application`

```
[UIFont fontWithName:@"me_quran" size:20.0]; 
```

**2）尝试：**

尝试使用[ArabicConverter](https://github.com/Accorpa/Arabic-Converter-From-and-To-Arabic-Presentation-Forms-B)演示代码。

**上述尝试的结果：**

应用程序未显示正确的阿拉伯字体。例如，它用于显示圆形，假设为半圆形，如月亮形状。并且很多时候它只显示线条而不是带有一些曲线的线条。

我得到了一些链接，它们是：[link1](https://stackoverflow.com/questions/5869452/arabic-ttf-truetype-font-in-uiwebview-ios-4-2-1)，[link2](https://stackoverflow.com/questions/4314082/using-arabic-fonts-with-the-extension-otf)。但是此链接不包含有关如何解决问题的太多信息。

我得到的有趣的东西是用来`glyphs`解决问题。但是不知道怎么用？

谁能给我一些关于如何`glyphs`在 iOS 中使用的想法或链接？或任何示例项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:40:11.627

阿拉伯/波斯字体在 Xcode 中没有明确定义，它们唯一的默认字体是“Geeza”字体。我没有使用过字形，但[这里](https://github.com/Momeks/MKPersianFont)有一个波斯字体的 API，它也必须适用于阿拉伯字体。检查一下，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:11:24.167

萨拉姆，

我已经使用 ArabicConverter 尝试了您的示例，它对我有用，可能是您使用的字体与 me_quran 不同

在使用阿拉伯语转换器之前：

![](../Images/f03b3ea3ad82f9b66acb1b6693aa142b.png)

使用阿拉伯语转换器后：

![](../Images/947fcb14fcbf0e9f77ef8c897f95a15f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:39:41.893

将您的字体拖到资源部分。然后将该文件名添加到应用程序提供的 info.plist 字体中。此字体名称可能与 .ttf 名称不同。所以检查正确的字体名称它将起作用。

检查您的字体在可用字体列表中是否正确匹配

```
// List all fonts on iPhone
    NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];
    NSArray *fontNames;
    NSInteger indFamily, indFont;
    for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
    {
        NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
        fontNames = [[NSArray alloc] initWithArray:
                     [UIFont fontNamesForFamilyName:
                      [familyNames objectAtIndex:indFamily]]];
        for (indFont=0; indFont<[fontNames count]; ++indFont)
        {
            NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
        }

    } 
```

# php - 警告：shuffle() 期望参数 1 是数组

> ID：11061278
> 
> 赞同：-1
> 
> 时间：2012-06-16T06:10:47.633
> 
> 标签：php, shuffle

为什么这样？

```
Warning: shuffle() expects parameter 1 to be array, resource given in /home/u801961841/public_html/img.php on line 12 
```

真正的 PHP 代码：

```
 <?php
require_once 'masterfile.php';
    $text3 = wordwrap($t[0], 31, "\n", true);
    $box = @ImageTTFBBox(23,0,'/home/u801961841/public_html/nama.TTF',$user[name]);
    $textwidth = abs($box[4] - $box[0]);
    $x_finalpos = 255-($textwidth/2);
    $image = imagecreatefromjpeg('img_empty.jpg');
    $image = imagecreatefromjpeg('img_empty1.jpg');
    $image = imagecreatefromjpeg('img_empty2.jpg');
    $image = imagecreatefromjpeg('img_empty3.jpg');
    $image = imagecreatefromjpeg('img_empty4.jpg');
shuffle($image);
    $font_color = ImageColorAllocate($image, 0, 0, 0); 
```

请帮我解决这个问题：（

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T06:13:06.710

您没有设置`$image`为数组。做这个：

```
$image[] = imagecreatefromjpeg('img_empty.jpg');
$image[] = imagecreatefromjpeg('img_empty1.jpg');
$image[] = imagecreatefromjpeg('img_empty2.jpg');
$image[] = imagecreatefromjpeg('img_empty3.jpg');
$image[] = imagecreatefromjpeg('img_empty4.jpg'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:13:15.927

`$image`不是数组，而是图像资源。

将每个`$image`放入一个数组中，然后随机播放

[http://php.net/manual/en/function.imagecreatefromjpeg.php](http://php.net/manual/en/function.imagecreatefromjpeg.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T06:19:23.060

如果我理解正确，您需要随机拍照吗？

```
$images = array(
'img_empty.jpg',
'img_empty1.jpg',
'img_empty2.jpg',
'img_empty3.jpg',
'img_empty4.jpg'     
);

$image = imagecreatefromjpeg($images[array_rand($images)]);
$font_color = ImageColorAllocate($image, 0, 0, 0); 
```

这样，您只需将资源分配给所需的图片。

# iphone - 仅从 Web 获取所需数据

> ID：11061279
> 
> 赞同：0
> 
> 时间：2012-06-16T06:10:48.147
> 
> 标签：iphone, objective-c, ios

我正在开发 ios 中的 web 基础应用程序。我只想从 web 获取所需的数据。例如，如果有一个显示火车代码、火车时刻表、座位可用性信息的站点，我想从该网页获取仅与座位可用性相关的数据并将其呈现到我自己的表格中。真的有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:28:58.433

您可以使用 HTML Parser 或使用 Regex 从给定的 url 中提取所需的数据模式。但是，请尝试检查网站提供的数据是否受版权保护，否则未经他们的许可，您不能通过其他界面公开使用他们的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:21:15.930

*我不是 iOS 开发人员，所以我不能给你如何做的代码。*

您将需要一个 HTML 解析器。该过程通常称为网页/屏幕抓取。阅读以下内容：[https ://stackoverflow.com/a/3541965/459338](https://stackoverflow.com/a/3541965/459338)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:53:06.360

对的，这是可能的。为此，您将使用 Parsing 的方法。根据您获得的 API 类型是 JSON、XML 还是 HTML 等，您可以相应地解析所需的数据。您可以在 Web 上检查 API 以了解您想要解析的信息类型。否则，数据库选项始终存在。

# android - Android - 减小图像文件大小

> ID：11061280
> 
> 赞同：60
> 
> 时间：2012-06-16T06:11:01.250
> 
> 标签：android, bitmap, image-uploading, image-resizing

我有一个 URI 图像文件，我想减小它的大小来上传它。初始图像文件大小取决于移动设备（可以是 2MB，也可以是 500KB），但我希望最终大小约为 200KB，以便我可以上传它。
从我读到的，我有（至少）2个选择：

*   使用*BitmapFactory.Options.inSampleSize*，对原始图像进行二次采样，得到更小的图像；

*   使用*Bitmap.compress*压缩指定压缩质量的图像。

最好的选择是什么？

* * *

我正在考虑最初调整图像宽度/高度的大小，直到宽度或高度超过 1000 像素（例如 1024x768 或其他），然后以降低的质量压缩图像，直到文件大小超过 200KB。这是一个例子：

```
int MAX_IMAGE_SIZE = 200 * 1024; // max final file size
Bitmap bmpPic = BitmapFactory.decodeFile(fileUri.getPath());
if ((bmpPic.getWidth() >= 1024) && (bmpPic.getHeight() >= 1024)) {
    BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
    bmpOptions.inSampleSize = 1;
    while ((bmpPic.getWidth() >= 1024) && (bmpPic.getHeight() >= 1024)) {
        bmpOptions.inSampleSize++;
        bmpPic = BitmapFactory.decodeFile(fileUri.getPath(), bmpOptions);
    }
    Log.d(TAG, "Resize: " + bmpOptions.inSampleSize);
}
int compressQuality = 104; // quality decreasing by 5 every loop. (start from 99)
int streamLength = MAX_IMAGE_SIZE;
while (streamLength >= MAX_IMAGE_SIZE) {
    ByteArrayOutputStream bmpStream = new ByteArrayOutputStream();
    compressQuality -= 5;
    Log.d(TAG, "Quality: " + compressQuality);
    bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpStream);
    byte[] bmpPicByteArray = bmpStream.toByteArray();
    streamLength = bmpPicByteArray.length;
    Log.d(TAG, "Size: " + streamLength);
}
try {
    FileOutputStream bmpFile = new FileOutputStream(finalPath);
    bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpFile);
    bmpFile.flush();
    bmpFile.close();
} catch (Exception e) {
    Log.e(TAG, "Error on saving file");
} 
```

有更好的方法吗？我应该尝试继续使用所有两种方法还是只使用一种？谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-16T06:18:13.850

使用`Bitmap.compress()`您只需指定压缩算法，顺便说一下压缩操作需要相当多的时间。如果您需要使用大小来减少图像的内存分配，您确实需要使用缩放图像`Bitmap.Options`，首先计算位图边界，然后将其解码为您指定的大小。

我在 StackOverflow 上找到的最好的示例就是[这个](https://stackoverflow.com/a/823966/556337)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-04T09:42:57.593

我找到的大多数答案只是我必须拼凑起来才能获得**工作代码的部分，发布在下面**

```
 public void compressBitmap(File file, int sampleSize, int quality) {
        try {
           BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = sampleSize;
            FileInputStream inputStream = new FileInputStream(file);

            Bitmap selectedBitmap = BitmapFactory.decodeStream(inputStream, null, options);
            inputStream.close();

            FileOutputStream outputStream = new FileOutputStream("location to save");
            selectedBitmap.compress(Bitmap.CompressFormat.JPEG, quality, outputStream);
            outputStream.close();
            long lengthInKb = photo.length() / 1024; //in kb
            if (lengthInKb > SIZE_LIMIT) {
               compressBitmap(file, (sampleSize*2), (quality/4));
            }

            selectedBitmap.recycle();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

**2 参数 sampleSize 和 quality 起重要作用**

**sampleSize**用于对**原始图像进行二次采样并返回较小的图像**，即
SampleSize == 4 返回的图像是原始图像宽度/高度的 1/4。

**质量用于提示压缩器**，输入范围在 0-100 之间。0 表示压缩为小尺寸，100 表示压缩为最大质量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T19:12:03.340

**BitmapFactory.Options** - 减小图像大小（在内存中）

**Bitmap.compress()** - 减小图像大小（在磁盘中）

* * *

*有关使用它们的更多信息，请参阅此链接：* [https ://android.jlelse.eu/loading-large-bitmaps-efficiently-in-android-66826cd4ad53](https://android.jlelse.eu/loading-large-bitmaps-efficiently-in-android-66826cd4ad53)

# python - 防止旋风评估 Handlebar 的模板

> ID：11061283
> 
> 赞同：1
> 
> 时间：2012-06-16T06:12:27.813
> 
> 标签：python, twisted, tornado, handlebars.js, cyclone

如何防止 Cyclone 转换代码？我的意思是，我希望将这一行传输到浏览器，以便 Handlebar.js 可以将其用作模板。

```
<script type="text/x-handlebars">
    My firstName is {{Employee.firstName}}
</script> 
```

{{Employee.firstName}} 应该在客户端进行评估。但是我的旋风服务器尝试在服务器端对其进行评估并引发错误。如何防止这种情况发生并将其发送到浏览器？上面给出的代码是我在浏览器端想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T23:30:56.937

您还应该考虑不要将 Handlebars 和 Tornado/Cyclone 模板混合在同一个文件中。您也可以只读取文件并将其返回并让客户端完成所有渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:11:31.413

好吧，我自己找到了答案。看起来，我必须添加一个感叹号（！），如下所示，以防止旋风评估模板。像这样，

```
<script type="text/x-handlebars">
    My firstName is {{!Employee.firstName}}
</script> 
```

它在那里。

# joomla - 无法在 wamp 服务器上的 joomla 安装中配置数据库

> ID：11061284
> 
> 赞同：1
> 
> 时间：2012-06-16T06:12:38.190
> 
> 标签：joomla, wampserver

我在我的系统上同时使用 IIS 和 wamp 服务器。我将 wampserver 端口更改为`localhost:8080`，`httpd.conf`但在 joomla 安装期间，它使用以下信息卡在数据库配置上：

> 主机名：localhost:8080，
> 用户名和密码：root，
> 数据库名称：mydatabase（我使用 wamp 的 phpmyadmin 创建）。

我不知道它为什么会卡住。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:55:59.720

端口`8080`是您网站的端口，而不是您的数据库。尝试省略`8080`端口并使用默认的`3306`MySQL 端口。

# kinect - 在kinect c#中显示骨骼每个关节的角度

> ID：11061287
> 
> 赞同：1
> 
> 时间：2012-06-16T06:12:50.557
> 
> 标签：kinect

如何显示 Kinect 骨骼关节的角度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:14:37.043

你可以试试 Kinect Angles @ [http://drenton72.wordpress.com/2012/05/23/kinect-angles-v2-4/](http://drenton72.wordpress.com/2012/05/23/kinect-angles-v2-4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:34:56.073

我创建了 Kinect Angles，我所做的只是读取关节的 X、Y 位置，然后像使用向量一样计算出两个位置之间的差异（只需从另一个向量中减去一个向量）。然后我使用简单的三角函数来计算向量的角度。我的 Kinect Angles 是开源的，所以你应该能够从我的源代码中找出它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-28T16:02:47.587

这是您正在寻找的程序：

```
namespace Microsoft.Samples.Kinect.SkeletonBasics
{
    using System.IO;
    using System.IO.Ports;
    using System.Threading;
    using System;
    using System.Windows;
    using System.Windows.Media;
    using Microsoft.Kinect;
    using Microsoft.Kinect.Toolkit.Fusion;
    using System.Windows.Media.Media3D;

    public class Angles
    {
    public double AngleBetweenTwoVectors(Vector3D vectorA, Vector3D vectorB)
        {
            double dotProduct;
            vectorA.Normalize();
            vectorB.Normalize();
            dotProduct = Vector3D.DotProduct(vectorA, vectorB);

            return (double)Math.Acos(dotProduct)/Math.PI*180;
        }

        public byte[] GetVector(Skeleton skeleton)
        {
            Vector3D ShoulderCenter = new Vector3D(skeleton.Joints[JointType.ShoulderCenter].Position.X, skeleton.Joints[JointType.ShoulderCenter].Position.Y, skeleton.Joints[JointType.ShoulderCenter].Position.Z);
            Vector3D RightShoulder = new Vector3D(skeleton.Joints[JointType.ShoulderRight].Position.X, skeleton.Joints[JointType.ShoulderRight].Position.Y, skeleton.Joints[JointType.ShoulderRight].Position.Z);
            Vector3D LeftShoulder = new Vector3D(skeleton.Joints[JointType.ShoulderLeft].Position.X, skeleton.Joints[JointType.ShoulderLeft].Position.Y, skeleton.Joints[JointType.ShoulderLeft].Position.Z);
            Vector3D RightElbow = new Vector3D(skeleton.Joints[JointType.ElbowRight].Position.X, skeleton.Joints[JointType.ElbowRight].Position.Y, skeleton.Joints[JointType.ElbowRight].Position.Z);
            Vector3D LeftElbow = new Vector3D(skeleton.Joints[JointType.ElbowLeft].Position.X, skeleton.Joints[JointType.ElbowLeft].Position.Y, skeleton.Joints[JointType.ElbowLeft].Position.Z);
            Vector3D RightWrist = new Vector3D(skeleton.Joints[JointType.WristRight].Position.X, skeleton.Joints[JointType.WristRight].Position.Y, skeleton.Joints[JointType.WristRight].Position.Z);
            Vector3D LeftWrist = new Vector3D(skeleton.Joints[JointType.WristLeft].Position.X, skeleton.Joints[JointType.WristLeft].Position.Y, skeleton.Joints[JointType.WristLeft].Position.Z);
            Vector3D UpVector = new Vector3D(0.0, 1.0, 0.0);

            double AngleRightElbow = AngleBetweenTwoVectors(RightElbow - RightShoulder, RightElbow - RightWrist);
            double AngleRightShoulder = AngleBetweenTwoVectors(UpVector, RightShoulder - RightElbow);
            double AngleLeftElbow = AngleBetweenTwoVectors(LeftElbow - LeftShoulder, LeftElbow - LeftWrist);
            double AngleLeftShoulder = AngleBetweenTwoVectors(UpVector, LeftShoulder - LeftElbow);

            byte[] Angles = {Convert.ToByte(AngleRightElbow), Convert.ToByte(AngleRightShoulder),Convert.ToByte(AngleLeftElbow),Convert.ToByte(AngleLeftShoulder)};
            return Angles;
        }
}

    /// Interaction logic for MainWindow.xaml
    public partial class MainWindow : Window
    {
        SerialPort ArduinoPort;
        /// Width of output drawing
        private const float RenderWidth = 640.0f;

        /// Height of our output drawing
        private const float RenderHeight = 480.0f;

        /// Thickness of drawn joint lines
        private const double JointThickness = 3;

        /// Thickness of body center ellipse
        private const double BodyCenterThickness = 10;

        /// Thickness of clip edge rectangles
        private const double ClipBoundsThickness = 10;

        /// Brush used to draw skeleton center point
        private readonly Brush centerPointBrush = Brushes.Blue;

        /// Brush used for drawing joints that are currently tracked
        private readonly Brush trackedJointBrush = new SolidColorBrush(Color.FromArgb(255, 68, 192, 68));

        /// Brush used for drawing joints that are currently inferred
        private readonly Brush inferredJointBrush = Brushes.Yellow;

        /// Pen used for drawing bones that are currently tracked
        private readonly Pen trackedBonePen = new Pen(Brushes.Green, 6);

        /// Pen used for drawing bones that are currently inferred
        private readonly Pen inferredBonePen = new Pen(Brushes.Gray, 1);

        /// Active Kinect sensor
        private KinectSensor sensor;

        /// Drawing group for skeleton rendering output
        private DrawingGroup drawingGroup;

        /// Drawing image that we will display
        private DrawingImage imageSource;

        /// Initializes a new instance of the MainWindow class.
        public MainWindow()
        {
            InitializeComponent();
        }

        private static void RenderClippedEdges(Skeleton skeleton, DrawingContext drawingContext)
        {
            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Bottom))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, RenderHeight - ClipBoundsThickness, RenderWidth, ClipBoundsThickness));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Top))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, 0, RenderWidth, ClipBoundsThickness));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Left))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, 0, ClipBoundsThickness, RenderHeight));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Right))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(RenderWidth - ClipBoundsThickness, 0, ClipBoundsThickness, RenderHeight));
            }
        }

        private void WindowLoaded(object sender, RoutedEventArgs e)
        {

            // Create the drawing group we'll use for drawing
            this.drawingGroup = new DrawingGroup();

            // Create an image source that we can use in our image control
            this.imageSource = new DrawingImage(this.drawingGroup);

            // Display the drawing using our image control
            Image.Source = this.imageSource;

            // Look through all sensors and start the first connected one.
            // This requires that a Kinect is connected at the time of app startup.
            // To make your app robust against plug/unplug, 
            // it is recommended to use KinectSensorChooser provided in Microsoft.Kinect.Toolkit (See components in Toolkit Browser).
            foreach (var potentialSensor in KinectSensor.KinectSensors)
            {
                if (potentialSensor.Status == KinectStatus.Connected)
                {
                    this.sensor = potentialSensor;
                    break;
                }
            }

            if (null != this.sensor)
            {
                // Turn on the skeleton stream to receive skeleton frames
                this.sensor.SkeletonStream.Enable();

                // Add an event handler to be called whenever there is new color frame data
                this.sensor.SkeletonFrameReady += this.SensorSkeletonFrameReady;

                // Start the sensor!
                try
                {
                    this.sensor.Start();
                }
                catch (IOException)
                {
                    this.sensor = null;
                }
            }

            if (null == this.sensor)
            {
                this.statusBarText.Text = Properties.Resources.NoKinectReady;
            }
        }

        private void WindowClosing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            if (null != this.sensor)
            {
                //ArduinoPort.Close();
                this.sensor.Stop();
            }
        }

        private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {

            Skeleton[] skeletons = new Skeleton[0];

            using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
            {
                if (skeletonFrame != null)
                {
                    skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
                    skeletonFrame.CopySkeletonDataTo(skeletons);

                }
            }

            using (DrawingContext dc = this.drawingGroup.Open())
            {
                // Draw a transparent background to set the render size
                dc.DrawRectangle(Brushes.Black, null, new Rect(0.0, 0.0, RenderWidth, RenderHeight));

                if (skeletons.Length != 0)
                {
                    foreach (Skeleton skel in skeletons)
                    {
                        RenderClippedEdges(skel, dc);

                        if (skel.TrackingState == SkeletonTrackingState.Tracked)
                        {
                            this.DrawBonesAndJoints(skel, dc);
                            Angles MyAngles = new Angles();
                            byte[] ReadyAngles = MyAngles.GetVector(skel);
                            RightElbow.Text = ReadyAngles[0].ToString();
                            RightShoulder.Text = ReadyAngles[1].ToString();
                            LeftElbow.Text = ReadyAngles[2].ToString();
                            LeftShoulder.Text = ReadyAngles[3].ToString();
                            byte[] SequenceStart = {255};

                            if (ArduinoPort.IsOpen)
                            {
                                ArduinoPort.Write(SequenceStart,0,1);
                                ArduinoPort.Write(ReadyAngles, 0, 4);
                            }
                        }
                        else if (skel.TrackingState == SkeletonTrackingState.PositionOnly)
                        {
                            dc.DrawEllipse(
                            this.centerPointBrush,
                            null,
                            this.SkeletonPointToScreen(skel.Position),
                            BodyCenterThickness,
                            BodyCenterThickness);
                        }
                    }
                }

                // prevent drawing outside of our render area
                this.drawingGroup.ClipGeometry = new RectangleGeometry(new Rect(0.0, 0.0, RenderWidth, RenderHeight));
            }
        }

        private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
        {
            // Render Torso
            this.DrawBone(skeleton, drawingContext, JointType.Head, JointType.ShoulderCenter);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderRight);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.Spine);
            this.DrawBone(skeleton, drawingContext, JointType.Spine, JointType.HipCenter);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipLeft);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipRight);

            // Left Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderLeft, JointType.ElbowLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowLeft, JointType.WristLeft);
            this.DrawBone(skeleton, drawingContext, JointType.WristLeft, JointType.HandLeft);

            // Right Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderRight, JointType.ElbowRight);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowRight, JointType.WristRight);
            this.DrawBone(skeleton, drawingContext, JointType.WristRight, JointType.HandRight);

            // Left Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipLeft, JointType.KneeLeft);
            this.DrawBone(skeleton, drawingContext, JointType.KneeLeft, JointType.AnkleLeft);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleLeft, JointType.FootLeft);

            // Right Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipRight, JointType.KneeRight);
            this.DrawBone(skeleton, drawingContext, JointType.KneeRight, JointType.AnkleRight);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleRight, JointType.FootRight);

            // Render Joints
            foreach (Joint joint in skeleton.Joints)
            {
                Brush drawBrush = null;

                if (joint.TrackingState == JointTrackingState.Tracked)
                {
                    drawBrush = this.trackedJointBrush;                    
                }
                else if (joint.TrackingState == JointTrackingState.Inferred)
                {
                    drawBrush = this.inferredJointBrush;                    
                }

                if (drawBrush != null)
                {
                    drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
                }
            }
        }

        private Point SkeletonPointToScreen(SkeletonPoint skelpoint)
        {
            // Convert point to depth space.  
            // We are not using depth directly, but we do want the points in our 640x480 output resolution.
            DepthImagePoint depthPoint = this.sensor.CoordinateMapper.MapSkeletonPointToDepthPoint(skelpoint, DepthImageFormat.Resolution640x480Fps30);
            return new Point(depthPoint.X, depthPoint.Y);
        }

        private void DrawBone(Skeleton skeleton, DrawingContext drawingContext, JointType jointType0, JointType jointType1)
        {
            Joint joint0 = skeleton.Joints[jointType0];
            Joint joint1 = skeleton.Joints[jointType1];

            // If we can't find either of these joints, exit
            if (joint0.TrackingState == JointTrackingState.NotTracked ||
                joint1.TrackingState == JointTrackingState.NotTracked)
            {
                return;
            }

            // Don't draw if both points are inferred
            if (joint0.TrackingState == JointTrackingState.Inferred &&
                joint1.TrackingState == JointTrackingState.Inferred)
            {
                return;
            }

            // We assume all drawn bones are inferred unless BOTH joints are tracked
            Pen drawPen = this.inferredBonePen;
            if (joint0.TrackingState == JointTrackingState.Tracked && joint1.TrackingState == JointTrackingState.Tracked)
            {
                drawPen = this.trackedBonePen;
            }

            drawingContext.DrawLine(drawPen, this.SkeletonPointToScreen(joint0.Position), this.SkeletonPointToScreen(joint1.Position));
        }

        private void CheckBoxSeatedModeChanged(object sender, RoutedEventArgs e)
        {
            if (null != this.sensor)
            {
                if (this.checkBoxSeatedMode.IsChecked.GetValueOrDefault())
                {
                    this.sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated;
                }
                else
                {
                    this.sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Default;
                }
            }
        }

        private void CheckBoxConnectArduino(object sender, RoutedEventArgs e)
        {

            if (this.checkArduinoConnected.IsChecked.GetValueOrDefault())
            {
                string MyCOM = "COM10";
                ArduinoPort = new SerialPort(MyCOM, 9600);
                ArduinoPort.Open();
            }
            else {
                ArduinoPort.Close();
            }
        }
    }
} 
```

您还需要添加 xaml：

```
<Window x:Class="Microsoft.Samples.Kinect.SkeletonBasics.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Skeleton Basics" Height="735" Width="770" Loaded="WindowLoaded" Closing="WindowClosing">

    <Window.Resources>
        <SolidColorBrush x:Key="MediumGreyBrush" Color="#ff6e6e6e"/>
        <SolidColorBrush x:Key="KinectPurpleBrush" Color="#ff52318f"/>
        <SolidColorBrush x:Key="KinectBlueBrush" Color="#ff00BCF2"/>
        <Style TargetType="{x:Type Image}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>
        <Style TargetType="{x:Type CheckBox}" x:Key="SquareCheckBox" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <Grid>
                            <StackPanel Orientation="Horizontal" Background="Transparent">
                                <Grid x:Name="SquareCheckBoxChecked">
                                    <Image x:Name="CheckedNormal" Source="Images\CheckedNormal.png" Stretch="None" HorizontalAlignment="Center"/>
                                    <Image x:Name="CheckedHover" Source="Images\CheckedHover.png" Stretch="None" HorizontalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                                <Grid x:Name="SquareCheckBoxUnchecked" Visibility="Collapsed">
                                    <Image x:Name="UncheckedNormal" Source="Images\UncheckedNormal.png" Stretch="None" HorizontalAlignment="Center"/>
                                    <Image x:Name="UncheckedHover" Source="Images\UncheckedHover.png" Stretch="None" HorizontalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                                <TextBlock x:Name="SquareCheckBoxText" Text="{TemplateBinding Content}" TextAlignment="Left"  VerticalAlignment="Center" Foreground="{StaticResource KinectPurpleBrush}" FontSize="15"  Margin="9,0,0,0"/>
                            </StackPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="false">
                                <Setter Property="Visibility" Value="Collapsed" TargetName="SquareCheckBoxChecked"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="SquareCheckBoxUnchecked"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Visibility" Value="Collapsed" TargetName="CheckedNormal"/>
                                <Setter Property="Visibility" Value="Collapsed" TargetName="UncheckedNormal"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="CheckedHover"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="UncheckedHover"/>
                                <Setter Property="Foreground" Value="{StaticResource KinectBlueBrush}" TargetName="SquareCheckBoxText"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Name="layoutGrid" Margin="10 0 10 0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <DockPanel Grid.Row="0" Margin="0 0 0 20">
            <Image DockPanel.Dock="Left" Source="Images\Logo.png" Stretch="Fill" Height="32" Width="81" Margin="0 10 0 5"/>
            <TextBlock DockPanel.Dock="Right" Margin="0 0 -1 0" VerticalAlignment="Bottom" Foreground="{StaticResource MediumGreyBrush}" FontFamily="Segoe UI" FontSize="18">Skeleton Basics</TextBlock>
            <Image Grid.Column="1" Source="Images\Status.png" Stretch="None" HorizontalAlignment="Center" Margin="0 0 0 5"/>
        </DockPanel>
        <Viewbox Grid.Row="1" Stretch="Uniform" HorizontalAlignment="Center">
            <Image Name="Image" Width="640" Height="480"/>
        </Viewbox>
        <CheckBox Grid.Row="2" Style="{StaticResource SquareCheckBox}" Content="Connect Arduino" Height="Auto" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0 10 10 10" Name="checkArduinoConnected" Checked="CheckBoxConnectArduino" Unchecked="CheckBoxConnectArduino"/>
        <CheckBox Grid.Row="2" Style="{StaticResource SquareCheckBox}" Content="Seated Mode" Height="Auto" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0 10 10 10" Name="checkBoxSeatedMode" Checked="CheckBoxSeatedModeChanged" Unchecked="CheckBoxSeatedModeChanged"/>
        <StatusBar Grid.Row="3" HorizontalAlignment="Stretch" Name="statusBar" VerticalAlignment="Bottom" Background="White" Foreground="{StaticResource MediumGreyBrush}">
            <StatusBarItem Padding="0 0 0 10">
                <TextBlock Name="statusBarText" Margin="-1 0 0 0">Click 'Seated' to change skeletal pipeline type!</TextBlock>
            </StatusBarItem>
        </StatusBar>
        <TextBox Name="RightShoulder" HorizontalAlignment="Left" Height="23" Margin="150,12,0,0" Grid.Row="2" TextWrapping="Wrap"  VerticalAlignment="Top" Width="100"/>
        <TextBox Name="RightElbow" HorizontalAlignment="Left" Height="23" Margin="250,12,0,0" Grid.Row="2" TextWrapping="Wrap"  VerticalAlignment="Top" Width="100"/>
        <TextBox Name="LeftShoulder" HorizontalAlignment="Left" Height="23" Margin="350,12,0,0" Grid.Row="2" TextWrapping="Wrap" VerticalAlignment="Top" Width="100"/>
        <TextBox Name="LeftElbow" HorizontalAlignment="Left" Height="23" Margin="450,12,0,0" Grid.Row="2" TextWrapping="Wrap"  VerticalAlignment="Top" Width="100"/>
    </Grid>
</Window> 
```

当然，您不能使用图像，但这不是必需的。如果这不能立即工作，只需将您的电子邮件发送给我，我会将完整的源代码发送给您:)

# c++ - 跳过 C++ 全局析构函数

> ID：11061302
> 
> 赞同：1
> 
> 时间：2012-06-16T06:16:00.237
> 
> 标签：c++, destructor, exit

有没有办法抑制全局对象的析构函数的生成（尤其是那些集合类型的析构函数，例如`vector`and `unordered_map`），或者在不调用此类析构函数的情况下退出程序（但仍然刷新标准输出，因为我收集`abort`不这样做）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T06:18:42.810

我相信您正在寻找[quick_exit](http://en.cppreference.com/w/cpp/utility/program/quick_exit)和 _Exit。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:19:38.657

最简单的方法是在堆上创建它们，并且永远不要释放：

```
std::vector< int > *doNotCallDestructor = new std::vector< int >;
//... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T07:31:27.993

这是可以通过*按需初始化*稳健解决的问题。

```
std::vector<int> & get_my_vector () {
    static std::vector<int> *vec;
    if (vec) return *vec;
    return *(vec = new std::vector<int>);
} 
```

在多线程上下文中，您可以使用“双重检查锁定”来初始化静态，或者如果您有 C++11，则保证以下内容是线程安全的：

```
std::vector<int> & get_my_vector () {
    static std::vector<int> *vec = new std::vector<int>;
    return *vec;
} 
```

按需初始化提供以下好处：

*   全局变量的延迟初始化——这意味着如果不使用全局变量，则不会为其分配内存。传统的全局变量一开始就占用资源。
*   不受共享库初始化依赖的影响——这意味着如果一个共享库想要使用另一个共享库的全局，单例模式会触发代码按需初始化该全局。当从不同的共享库访问时，传统的全局变量可能尚未初始化。

按需初始化与用于在单例模式中实例化单例的技术相同。因为我们没有限制`vector<int>`这个成语的实例数量，所以在任何意义上都不是单例。

# mysql - 以两种不同的方式使用 Mysql 轮函数得到不同的结果

> ID：11061305
> 
> 赞同：2
> 
> 时间：2012-06-16T06:16:33.733
> 
> 标签：mysql

我有一列只有一列'id'。表的创建语句为：

```
CREATE TABLE `test` (
  `id` float default NULL
); 
```

表中的值为：

```
id
-----
8.075 
```

当我执行查询时：

```
SELECT ROUND(id, 2) FROM test; 
```

我得到结果'8.07'。但是当我简单地执行查询时：

```
SELECT ROUND(8.075,2); 
```

我得到'8.08'的价值。

怎样做才能在这两种情况下获得一致的结果？

这些查询的演示可以在[这里](http://sqlfiddle.com/#!2/256b6/2)查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:23:47.453

一轮的结果取决于字面量的隐式类型`8.075`。

浮点数`8.075`在内部表示为最接近的浮点数，即`8.07499999999999928946`，四舍五入为 2 位`8.07`。

如果文字`8.075`被解释为小数，则可能应用了“四舍五入”规则。我会查一下，但 MySQL 的网站现在已经关闭。

# php - github API v3 - 通过 CURL 获取访问令牌

> ID：11061306
> 
> 赞同：3
> 
> 时间：2012-06-16T06:16:33.970
> 
> 标签：php, curl, github

我一直对 github API 文档（v3）感到困惑，我有点难过。对于初始步骤 - 获取访问令牌 - 在 Web 应用程序中执行此操作的唯一方法似乎是依赖回调 URL，该 URL 会发布一个临时代码。然后在对其 API 的后续查询中使用它。

有谁知道这是否可以在一个步骤中完成，例如 cURL - 即在一页中的单个代码块中？将控制流传递给不同的 URL 会导致我的特定场景出现无数问题。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:21:20.983

这就是 OAuth 的本质。您可以尝试使用[基本身份验证方法](http://developer.github.com/v3/#authentication)，但如果这不符合您的需要，那么 PHP 有一个[OAuth 库](http://php.net/manual/en/book.oauth.php)，它应该使身份验证变得非常轻松。还有一些用于 Github API 的 PHP 包装器，例如[php-github-api](https://github.com/ornicar/php-github-api)。

# android - 如何更改 ListView 中的文本颜色

> ID：11061309
> 
> 赞同：1
> 
> 时间：2012-06-16T06:17:06.883
> 
> 标签：android, listview, colors, custom-lists

我正在开发我的第一个 Android 应用程序，在阅读了这里已经发布的许多答案之后，他们提高了我的理解，但似乎无法解决我的问题。

简而言之，我有一个`ListView`并且我希望某些行中的文本与其他行不同。我试图通过将 a 转换`ListView.GetItemAtPosition`为 a`TextView`并更改其文本颜色来做到这一点，但我遇到了一个转换异常。

非常感谢帮助我找出代码中的错误或提出更好的方法！

```
public class MeetingManager extends Activity {

public ListView mAgenda;

//public Item agenda = new Item();
List<Item> agenda=new ArrayList<Item>();
ArrayAdapter<Item> adapter=null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.v(TAG, "Activity State: onCreate()");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.meeting);

    // Obtain handles to UI objects
    mAgenda = (ListView)findViewById(R.id.lstAgenda);

    adapter=new ArrayAdapter<Item>(this, R.layout.agendalist, agenda);
    mAgenda.setAdapter(adapter);        
    mAgenda.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    //Load items into agenda
    initAgenda();
}

protected void updateDetails() {
    mRecipients.setText("This message will be sent to items " + (currentItemNum + 1) + " and later:");
    mSMS.setText(currentItem.getSMS());
}

protected void initAgenda() {
    currentItem = new Item();
    currentItem.setTitle("Reset Meeting");
    adapter.add(currentItem);
    setColour(0, Color.RED);
}

public void setColour(int pos, int col) {
    TextView tv = (TextView)mAgenda.getItemAtPosition(pos); //This is where the exception is thrown
    tv.setTextColor(col);
}
} 
```

* * *

以下是我的 XML 代码`ListView`

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"  
    android:paddingTop="2dip" 
    android:paddingBottom="3dip"
    android:textSize="12pt" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:25:27.810

您需要创建一个自定义适配器并根据您的着色标准`TextView.setTextColor();`在该方法中使用。`getView`

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null)
        convertView = View.inflate(context, layout, null);
    View row = convertView;

    TextView first = (TextView) convertView.findViewById(R.id.ListItem1);
    TextView second = (TextView) convertView.findViewById(R.id.ListItem2);
    if(condition == changecolor) {
        first.setTextColor(#FFFF0000);
        second.setTextColor(#FFFF0000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:29:02.680

您可以子类`ArrayAdapter`化并在子类的 getView 方法中，您可以执行魔术

```
public View getView(int position, View convertView, ViewGroup parent) {
  TextView tv = super.getView(position, convertView, parent);

  if (position < 3) {     // I have just put dummy condition you can put your condition
    textView.setTextColor(colors);  // Here you can put your color
  } else {
    textView.setTextColor(colors);
  }
} 
```

# java - Binarysearch 未排序数组

> ID：11061314
> 
> 赞同：1
> 
> 时间：2012-06-16T06:18:12.430
> 
> 标签：java, arrays, binary-search

希望有人知道这个 Java 认证问题的答案：

```
public static void main(String[] args) {
 String[] sa = {"d", "c", "a", "b" };
 int x = Arrays.binarySearch(sa, "b");
 Arrays.sort(sa);
 int y = Arrays.binarySearch(sa, "b");
 System.out.println(x + " " + y);
} 
```

哪两个结果是可能的？（选择两项。）
A）7 0
B）7 1
C）7 3
D）-1 0
E）-1 1
F）-1 3

唯一正确的答案是 E) -1 1，因为如果您使用二分搜索算法，这是唯一可能的输出。但是他们要我选择两个...所以第二个必须是 B) 7 1 然后，因为排序数组中的第二个 binarySearch 将始终返回`1`。

所以我的问题是，为什么 B) 7 1 是可能的结果？更具体地说：未排序数组中的第一个 binarySearch 怎么可能返回 7？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T06:23:31.727

这是一个技巧问题。根据文档，对未排序数组的二进制搜索结果未定义：

> 在进行此调用之前，**必须**对数组进行排序（如上面的 sort 方法）。如果未排序，则结果未定义。

这尤其意味着任何数字，包括七，都是公平的游戏。

排序后的结果是明确定义的：你会得到一个`1`. 就像魔术一样，`1`答案列表中只有两对以结尾，所以`B`和`E`是考官希望你做出的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:30:17.890

您可能应该坚持文档，而不是您对二进制搜索一般如何工作的了解。API 文档非常清楚地使用`Array.binarySearch`未排序的数组：“如果未排序，则结果未定义。”

换句话说，如果数组没有排序，结果不需要遵循任何规则。从二分查找的实现中你可能知道结果不能超过数组长度。但是，这是实现细节。你不能依赖它。

# vb.net - 通过 vb.net 访问具有相同名称和值的 HTML 按钮

> ID：11061318
> 
> 赞同：0
> 
> 时间：2012-06-16T06:18:30.717
> 
> 标签：vb.net

我正在尝试访问一些 HTML 按钮。我正在使用 vb.net 2008 平台以编程方式单击这些按钮。问题是所有 17 个按钮都没有 id 并且具有相同的名称类型和值并且是相同的形式。所以请指导我如何单独单击每个按钮。这是这些按钮的 HTML 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:49:06.137

还有另一种方法：

```
Dim Elems As HtmlElementCollection
Dim WebOC As WebBrowser = WebBrowser1
Elems = WebOC.Document.GetElementsByTagName("button")
For Each elem As HtmlElement In Elems
    elem.InvokeMember("click")
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:11:06.607

假设你有一个 webbrowser 控件
，而 Html 是：

```
"<button id=namee>Click</button><button id=namee>Click</button><button id=namee>Click</button>" 
```

您可以更改按钮的 ID + 单击它们：

```
WebBrowser1.Navigate("")
Do While WebBrowser1.ReadyState <> WebBrowserReadyState.Complete
    Application.DoEvents()
Loop
WebBrowser1.Document.Body.InnerHtml = "<button id=namee>Click</button><button id=namee>Click</button><button id=namee>Click</button>"
For i = 1 To 3
    WebBrowser1.Document.Body.InnerHtml = Replace(WebBrowser1.Document.Body.InnerHtml, "namee", "n" & i.ToString, , 1)
Next
WebBrowser1.Document.GetElementById("n1").InvokeMember("click")
WebBrowser1.Document.GetElementById("n2").InvokeMember("click")
WebBrowser1.Document.GetElementById("n3").InvokeMember("click") 
```

# performance - 其他解决方案，而不是 NGINX 的 .htaccess

> ID：11061319
> 
> 赞同：3
> 
> 时间：2012-06-16T06:18:31.907
> 
> 标签：performance, apache, .htaccess, nginx

我正在开发一个更大的基于 Web 的项目，该项目可能在后期（或更多）每分钟必须处理几百个请求。

我从未使用过 NGINX，但阅读与 apache 的比较，似乎我应该走 NGINX 路线。阅读它，我总是看到“.htaccess”文件是一个懒惰的解决方案。现在，我想避免依赖 .htaccess 文件，但我的问题是如何？

我的意思是 - 如果 .htaccess 被认为是懒惰的、hacky的解决方案，那么这个问题的干净解决方案到底是什么：

*   将所有特定的 URL（除了 CSS / 图片和这些东西）重定向到单个 php 文件（顺便说一下，如果像 index.php 这样的单个文件处理 URL 并包含所需的模板，这是否会影响性能？我应该避免这种情况，并分成几十个文件吗？）

*   读取 CSS 文件中的 PHP 标签（“AddHandler application/x-httpd-php .css ...”）

*   另一层登录（.htaccess 身份验证，带有那个小弹出窗口）

这基本上是我使用 .htaccess 的三件事。尤其是第一个，基本上使整个应用程序完全正常工作。

但对于这个项目，我真的在努力保持清洁、最新、明智的解决方案。我的可能性是什么？我在哪里可以提高我的表现？我怎样才能解决上面提到的 3 个问题，不使用 .htaccess，在 NGINX 上进行开发？

非常感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T06:37:11.150

为了充分利用 nginx，您必须了解它不是 Web 服务器（如 Apache），而是代理。简单来说，它就像一个巨大的规则引擎，根据请求的模式匹配将内容传递给其他应用程序。

因此，要使用 nginx 运行 PHP，您需要一个运行 PHP 的*单独*服务器（或进程）。这可以是 Apache，但 PHP 包含一个[FastCGI 进程管理器 (FPM)](http://www.php.net/manual/en/install.fpm.php)。

这是帮助您前进的基本样板：

```
server {
   listen 80;
   server_name www.example.com example.com;
   access_log /var/www/www.example.com/logs/access.log;
   error_log /var/www/www.example.com/logs/error.log;
   root /var/www/www.example.com/public_html;

   location / {
       index  index.html index.htm index.php;
       auth_basic            "Username Required";
       auth_basic_user_file  /etc/nginx/htpasswd;
   }

   location ~ (\.php|\.css)$ {
       try_files $uri =404;

       include /etc/nginx/fastcgi_params;
       fastcgi_index index.php;
       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
       fastcgi_pass php;
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:29:16.133

问题是题外话，但可以帮助你：

*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)
*   [http://www.anilcetin.com/convert-apache-htaccess-to-nginx/](http://www.anilcetin.com/convert-apache-htaccess-to-nginx/)

# c# - 从 Dailymotion 获取视频数据

> ID：11061325
> 
> 赞同：1
> 
> 时间：2012-06-16T06:19:42.420
> 
> 标签：c#, asp.net, json

最近我正在使用dailymotion 视频API。但是我不确定如何将返回的数据转换为我的 ASP.NET C# 应用程序。

得到

```
https://api.dailymotion.com/videos?search=fun&page=3 
```

结果

```
{ "page": 1,
  "limit": 2,
  "total": 218248,
  "has_more": true,
  "list": [
      { "id": "xrk9mi",
        "title": "Priyanka & Shahid Kapoor get MOBBED in local train",
        "channel": "fun",
        "owner": "xlw7uu"
      },
     { "id": "xrk8fy",
        "title": "What's Up With Gaga?: Hit On Head, Perfume Bottle Leaked, Thai Fans Angry",
        "channel": "music",
        "owner": "xofeoz" }
     ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:25:51.610

您将声明一个与您返回的内容匹配的类，让我们将其分解为多个部分，从外部类声明开始：

```
public class DailyMotionVideo {
  public int page {get;set;}
  public int limit {get;set;}
  public int total {get;set;}
  public bool has_more {get;set;}
  public XXX[] list {get;set;}
} 
```

所以我会对 XXX 做同样的事情，它需要是一个单独的类型，这样我们就可以将它们组成一个数组：

```
public class DailyMotionVideoInternalList {
  public string id {get;set;}
  public string title {get;set;}
  public string channel {get;set;}
  public string owner {get;set;}
} 
```

这需要我们返回并将该名称放入我们的第一个声明中：

```
public class DailyMotionVideo {
  public int page {get;set;}
  public int limit {get;set;}
  public int total {get;set;}
  public bool has_more {get;set;}
  public DailyMotionVideoInternalList[] list {get;set;}
}

public class DailyMotionVideoInternalList {
  public string id {get;set;}
  public string title {get;set;}
  public string channel {get;set;}
  public string owner {get;set;}
} 
```

然后您可以通过多种方法将接收到的对象转换为该对象，具体取决于您使用的 .NET 版本。

由于您已经将其作为字符串获取，因此我将假设该字符串称为“result”：

```
DailyMotionVideo videoList = 
           new JavaScriptSerializer().Deserialize<DailyMotionVideo>(result); 
```

# linux - wpa_supplicant 守护程序的计划扫描

> ID：11061326
> 
> 赞同：1
> 
> 时间：2012-06-16T06:20:10.213
> 
> 标签：linux, android-wifi, wpa, wifi

我想知道如何停止 wpa_supplicant 守护程序的计划扫描？

是否可以停止由 wpa_supplicant 定期完成的扫描？启动时可以通过daemon的任何命令或参数来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:04:51.453

尝试 wpa_cli 设置 pno。wpa_cli 是 wpa_supplicant 的控制接口，pno 代表 Profile Network Offload。如果您在 pno 之后使用参数运行它，它将开始计划扫描，否则它将停止它。该命令将停止用户发起的 sched scan；停止自动尝试 wpa_cli 断开连接。

# cocoa-touch - 在属性列表（plist）文件中存储 NaN

> ID：11061328
> 
> 赞同：0
> 
> 时间：2012-06-16T06:20:47.110
> 
> 标签：cocoa-touch, cocoa, foundation

是否可以将 NaN 存储在属性列表文件中。我试过：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
     <integer>nan</integer>
</array>
</plist> 
```

但 Xcode 无法对文件进行短语处理。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:22:55.120

浮点数或双精度数可以是`NaN`s，但整数不能。

也不确定是否可以将其存储在 plist 文件中。

但是，如果您使用`NSUInteger`整数，您可以使用预定义的标记，例如`NSNotFound`，或者您可以定义您自己的值，您希望为此目的保留该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:24:50.607

是的，例如键“A_NaN_Value”的 NaN 值的字典：

```
<dict>
   <key>A_NaN_Value</key>
   <real>nan</real>
</dict> 
```

# apache-flex - Spark Datagrid中的SelectItem方法？

> ID：11061331
> 
> 赞同：1
> 
> 时间：2012-06-16T06:21:24.587
> 
> 标签：apache-flex, datagrid, flex4.5, flex-spark

我通过单击复选框项目渲染器启用多行选择。

这适用于扩展`mx:Datagrid`（[其他答案](https://stackoverflow.com/a/2346844/842112)）

```
override protected function selectItem(item:IListItemRenderer,
                                                   shiftKey:Boolean, ctrlKey:Boolean,
                                                   transition:Boolean = true):Boolean
            {
                // only run selection code if a checkbox was hit and always
                // pretend we're using ctrl selection

                if (item is CheckBox)
                    return super.selectItem(item, shiftKey, true, transition);
                else //Avenir Cokaj 23/06/11: this enables the flex's natural selection
                    return super.selectItem(item, shiftKey, ctrlKey, transition);

            } 
```

但是中没有`super.selectItem`那么`s:Datagrid`如何在spark datagrid上启用控制键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:06:49.973

使用[selectionMode](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGrid.html#selectionMode)属性。不再需要子类化。在您的情况下，您可能希望将其设置为`multipleRows`.

```
<s:DataGrid selectionMode="multipleRows" /> 
```

其他值是：

*   没有任何
*   单细胞
*   单行（默认）
*   多个细胞

我相信它们是不言自明的。

现在，如果您希望通过单击来多选行（就像不断按下控制键一样），您可以通过像这样子类化 DataGrid 来做到这一点：

```
public class MyDataGrid extends DataGrid {

    override protected function grid_mouseDownHandler(event:GridEvent):void {
        event.ctrlKey = true;
        super.grid_mouseDownHandler(event);
    }

} 
```

我们只是拦截事件并将其`ctrlKey`属性设置为 always `true`。

# c# - WinRT中不存在文件时如何创建文件？

> ID：11061334
> 
> 赞同：1
> 
> 时间：2012-06-16T06:22:19.917
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro

**我想要**
打开一个文件，如果它存在，如果它不存在就创建它

**我编码的内容**

```
 try
        {
            return await folder.GetFileAsync(fileName);

        }
        catch (FileNotFoundException )
        {
            StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName);
            return file;
        } 
```

**什么错误**
不能在 catch 子句的主体中等待

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:25:10.897

为什么不直接调用`CreateFileAsync`并指定[`OpenIfExists`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.creationcollisionoption)？

> 创建具有所需名称的新文件或文件夹，或者如果已存在具有该名称的文件或文件夹，则返回现有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:27:00.710

好吧，如果您不想过多地更改代码。您可以`exceptionOccurred = true`在 catch 标志中设置一个标志，然后如果标志为真，则在 catch 子句之后编写代码以创建文件。

# shell - 用于 unix shell 命令替换的 Windows 批处理模拟

> ID：11061337
> 
> 赞同：1
> 
> 时间：2012-06-16T06:23:46.320
> 
> 标签：shell, batch-file, windows-shell

是否有任何类似的 unix 命令替换 shell 扩展？喜欢

```
> cmd1 `cmd2 -opt1 -opt2` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:39:36.173

AFAIK 你不能直接这样做，但你可以将灵魂与 for 循环一起使用，类似于[that](https://stackoverflow.com/questions/2033338/get-stdout-into-a-variable)。

# ios - 仪器报告 libsystem_c 泄漏

> ID：11061339
> 
> 赞同：0
> 
> 时间：2012-06-16T06:23:57.530
> 
> 标签：ios, instruments, memory-leaks

我有一个非常奇怪、非常可重复的泄漏，它似乎与我定义的函数没有任何关系。如您所见，负责的库是 lybsystem_c。

当我将分组表视图向下滚动到屏幕下方（通过非常快速地拖动）时，仪器报告了 48B 泄漏。它反弹回来，并出现红色条。

![仪器屏幕截图](../Images/2c83415dc3ab55763b7eac294104bdca.png)

有没有人遇到过这个问题？
有谁知道我可能对此负责吗？有没有办法证明这是一个框架错误？还是仪器错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:36:47.037

您看到的是 iOS 5.1 中的一个已知错误，并且正在 iOS 开发者论坛中进行讨论。您可以通过在论坛中搜索“strdup”来找到相关主题。请参阅标题为“Elements App Memory Leak”的主题。搜索来自 Apple 员工的帖子。

从[这里参考](https://stackoverflow.com/questions/9762995/memory-leak-every-time-uiscrollview-is-released)

# c# - 无效操作异常线程

> ID：11061341
> 
> 赞同：0
> 
> 时间：2012-06-16T06:24:06.603
> 
> 标签：c#

```
tpide1=new Thread(new ThreadStart(pide1));
        tjunta=new Thread(new ThreadStart(junta));
public void pide1() 
    {
        while (cuadroactual1 < cuadrofinal) 
        {
            if (cuadroactual3 == cuadroactual1 )
            {
                lector.lee1(cuadroactual1);
                cuadroactual1++;
                reproductorlisto1.Set();
            }
        }
    }

    public void junta() 
    {

        while (cuadroactual3 < cuadrofinal)
        {
            AutoResetEvent.WaitAll(estanlistos);

                lector.junta(cuadroactual3);
                canvasjuntar.Dispatcher.Invoke((Action)(() => {  canvasjuntar.Background = new ImageBrush(lector.BMS); }));
                cuadroactual3++;
            }

    } 
```

当我执行程序时，它会抛出 InvalidOperationException（“调用线程无法访问此对象，因为不同的线程拥有它”）每次我运行程序时都会在不同的行中发生这种情况，并且不要让我看到错误在哪里（“无源可用”）。（当我在方法“junta（）”中调试时总是出现异常，但并不总是在同一行）请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:14:34.993

Since you did not specify I'm assuming you use wpf.

You can only access DependencyProperties from the main UI thread. What is probably happening is that on or more of your variables `cuadroactual1`, `cuadroactual3`, `cuadrofinal`, `lector` or `reproductorlisto1` were declared as DependencyProperties and the exception is thrown when one of the threads tries to access them.

# python - 由于 Python 问题，Django WSGI 脚本无法加载

> ID：11061345
> 
> 赞同：2
> 
> 时间：2012-06-16T06:24:37.327
> 
> 标签：python, django, apache, mod-wsgi

我试图让 Django 在 Apache2.22 上通过 mod_wsgi 运行，但出现内部 500 错误。我知道对此还有其他问题，但他们没有我的具体错误。这是我的回溯：

```
[Sat Jun 16 02:17:48 2012] [info] [client 128.227.11.143] mod_wsgi (pid=23071, process='partender', application='www.***.com|'): Loading WSGI script '/usr/home/***.com/zpencerq/part/apache/django.wsgi'.
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143] mod_wsgi (pid=23071): Target WSGI script '/usr/home/***.com/zpencerq/part/apache/django.wsgi' cannot be loaded as Python module.
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143] mod_wsgi (pid=23071): Exception occurred processing WSGI script '/usr/home/***.com/zpencerq/part/apache/django.wsgi'.
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143] Traceback (most recent call last):
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]   File "/usr/home/partender.myprotosite.com/zpencerq/part/apache/django.wsgi", line 9, in <module>
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]     import django.core.handlers.wsgi
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]   File "/usr/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 2, in <module>
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]     from threading import Lock
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]   File "/usr/local/lib/python2.7/threading.py", line 15, in <module>
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]     from collections import deque
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]   File "/usr/local/lib/python2.7/collections.py", line 9, in <module>
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143]     from operator import itemgetter as _itemgetter
[Sat Jun 16 02:17:48 2012] [error] [client 128.227.11.143] ImportError: /usr/local/lib/python2.7/lib-dynload/operator.so: Undefined symbol "_PyUnicodeUCS4_AsDefaultEncodedString" 
```

这似乎是 python 的一个问题，但我不知道如何处理回溯中的最后一个错误。这是python安装的问题吗？我已经完成了简单的 WSGI hello world 应用程序，而且效果很好。这是 django 调用的问题。

我在 mod_wsgi.so 上使用了 'ldd' 并得到以下输出：

```
root@blah# ldd mod_wsgi.so
mod_wsgi.so:
ldd: mod_wsgi.so: Shared object "mod_wsgi.so" not found, required by "ldd"
mod_wsgi.so: exit status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:28:30.587

您的 mod_wsgi 很可能是针对一个 Python 安装编译的，但您正试图强制它使用不同的 Python 安装。您遇到问题的原因是因为一个 Python 安装是使用 UCS2 支持和另一个 UCS4 编译的。

在 mod_wsgi.so 上使用 'ldd' 来显示它尝试使用的 Python 安装，然后提供该信息作为问题的一部分以及您试图强制它使用不同 Python 安装或不兼容的 mod_wsgi 配置或 WSGI 脚本内容虚拟环境。

# java - 遗传算法的线程池内存不足 - 为什么？

> ID：11061346
> 
> 赞同：3
> 
> 时间：2012-06-16T06:24:52.033
> 
> 标签：java, multithreading, memory, threadpool, genetic-algorithm

因此，我正在研究并行化遗传算法（用 Java 编码），并且我决定使用 Executor 来管理我群体中个体的适应性测试的异步执行。我这样做是因为这意味着我可以创建一个具有固定线程池大小的执行程序，并且只需在每一代都重用这些线程，而不是每一代都创建新线程。

现在，我已经运行了一组测试来监控我的 GA 在人口规模不断增长的情况下的性能，但我遇到了障碍。执行以下代码：

```
 for(i=1;i<=11; i++){
            PopulationSize = 10*i;
            for(j=0;j<10;j++){

            startTime = System.nanoTime();

            P = new Population(PopulationSize, crossOverProbability, mutationProbability, conGens);         

            while(P.generation()<10){
                P.breedNewPop();    
            }

            endTime = System.nanoTime();
            time = (endTime - startTime) * Math.pow(10, -9);

            System.out.println("Done Trial " + i + ", Round " + j);
            }
        } 
```

我收到以下错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: unable to create new native thread 
```

令我感到困惑的是，这发生在第 10 轮第 4 轮 - 这意味着它能够毫无问题地运行第 10 轮的前三轮。由于运行第 4 轮时应该没有区别（特别是，第 4 轮不需要比试验 10 的第 1-3 轮更多的线程），我不认为它会有任何问题。但确实如此。

我现在的一个理论是 Java 没有进行正确的垃圾收集——我的意思是，出于某种原因，它没有清除旧的未使用线程，这就是为什么它在如此特殊的时刻内存不足的原因。认为就是这样，我尝试在循环内声明和分配 P ，而不是仅仅分配它。那没有效果。我还尝试`P = null; System.gc();`在循环末尾添加以尝试在创建新线程池之前强制进行垃圾收集。同样，它没有任何区别。

以下是处理执行程序的相关代码行：

在人口（）中：`executor = Executors.newFixedThreadPool(popSize);`

在 Population.findFitness() 中：

```
for(int i=0; i<individuals.length; i++){
        executor.execute(individuals[i]);
    }try {
        cdl.await();
    } catch (InterruptedException e) {
        System.out.println("Error: Thread interrupted.");
    } 
```

（我正在使用 CountDownLatch 来等待所有线程的执行完成——我已经在并行化时通过将每个个体的适应度测试放入他们自己的线程中来实现它，而不是通过执行程序使用线程池。与 ExecutorService 的 invokeAll() 方法相比，闩锁似乎更适合我的个人实现。）

Individual.run() 的代码：

```
public void run(){
    try{
        findFitness();
    }catch (Exception e){ 
        System.out.println("Error in Individual.run(): " + e.getMessage());
    }finally{
        stopLatch.countDown();
    }
} 
```

在这一点上，我不知道是什么原因造成的。有谁知道为什么会发生这种情况以及我该如何解决？

PS我知道我可以尝试使用更多内存运行JVM，但这仍然不能解释错误的特殊时间。考虑到我在一台机器上编写这个程序并最终将它移动到另一台机器上，我更愿意了解错误背后的原因，而不是以相对蛮力的方式修复它。

更新：通过并再次运行试验，这次通过 JConsole 观察线程，我可以确认执行程序正在创建大小合适的线程池。然而，线程池并没有被破坏——每一轮测试（即每次通过计算 j 的 for 循环），都会产生一个新的线程池，但旧的线程池仍然存在。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:35:51.703

使用固定大小的线程池创建线程时内存不足听起来很奇怪。我怀疑以下情况之一：

*   您的线程池实际上不是固定大小的；即你弄错了池创建参数。
*   您的代码正在其他地方创建线程；例如通过显式调用`new Thread().start()`。这可能会出现在堆栈跟踪中。

另一种可能性是 JVM 外部的某些东西导致 JVM 无法分配线程堆栈。这些不是在普通堆内存中分配的，因此不会是 -Xmx 设置。它可能是默认的线程堆栈大小设置，也可能是外部资源限制……或您机器上的一般资源不足。

* * *

使用此异常消息：

```
Exception in thread "main" java.lang.OutOfMemoryError: 
     unable to create new native thread . 
```

这显然不是 GC 检测到的正常“堆太满”类型的问题。失败的内存分配是线程堆栈的非堆内存请求。增加堆大小无济于事……甚至可能使事情变得更糟。

强制 GC 运行也无济于事。即使问题是由分配堆对象触发的，它也无济于事......因为JVM只会在运行GC后抛出堆OOME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:39:55.263

我将把它作为“答案”，因为会有很多评论。

我认为你想要的是 ThreadPoolExecutor。

实际上，我认为您可能会发现只需回到基础并启动一堆 Thread 实例并`join`反复使用该方法来找出它们何时都完成更简单。适当的线程池可以防止您在 2 核机器上同时运行 100 个线程，但我从经验中知道 Java 可以保持 1000 个线程直接运行而无需池。（按照我的编码方式，大多数线程都在等待锁定并相互通信，它们并非都完全运行。但它们中的很多*都*运行完全并且它们不会阻塞 CPU。）率，让所有线程运行，*然后*尝试某种池。

Java 现在提供了各种类来使多线程处理更容易和更好，但它们的实际作用并不总是很清楚，特别是当你试图让程序工作而不是写硕士论文时。

# c# - 通过jQuery缩放特定部分的图像

> ID：11061347
> 
> 赞同：0
> 
> 时间：2012-06-16T06:25:03.940
> 
> 标签：c#, jquery, asp.net

我有 150 dpi 的灰度图像。问题是我正在在线扫描文档并以`tiff`格式将其保存到数据库中，然后在我显示图像之后，像表格和身份证明这样的文档，其中行的字体非常小，因此在扫描后图像显示不是很清晰。所以请指导我什么是可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:19:35.863

您可以使用 javascript 缩放库。看看这里

[http://blog.insicdesigns.com/2010/04/introducing-wadda-the-image-zoomer-using-canvas/](http://blog.insicdesigns.com/2010/04/introducing-wadda-the-image-zoomer-using-canvas/)

# php - 上传的安全威胁

> ID：11061355
> 
> 赞同：21
> 
> 时间：2012-06-16T06:26:19.403
> 
> 标签：php, upload

我允许用户将文件上传到我的服务器。我面临哪些可能的安全威胁，如何消除它们？

假设我允许用户从他们的系统或网络上传图像到我的服务器。现在要检查这些图像的大小，我必须将它们存储在我的`/tmp`文件夹中。不是很危险吗？我怎样才能把风险降到最低？

还假设我正在使用`wget`从用户在我的表单中上传的链接下载图像。我首先必须将这些文件保存在我的服务器中以检查它们是否真的是图像。另外，如果恶作剧者给了我一个 URL，我最终下载了一个充满恶意软件的整个网站怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-16T07:16:49.000

首先，要意识到上传文件意味着用户向您**提供了大量**各种格式的数据，并且用户可以完全控制这些数据。这甚至是普通表单文本字段的一个问题，文件上传是相同的，而且更多。第一条规则是：不要相信任何一个。

您通过文件上传从用户那里得到什么：

*   文件数据
*   一个文件名
*   MIME 类型

这是文件上传的三个主要组成部分，没有一个是可信的。

1.  不要相信`$_FILES['file']['type']`. 这是一个完全任意的、用户提供的值。

2.  不要将文件名用于任何重要的事情。这是一个完全任意的、用户提供的值。通常，您不能信任文件扩展名或名称。不要使用类似`'dir/' . $_FILES['file']['name']`. 如果名称是`'../../../passwd'`，则您正在覆盖其他目录中的文件。始终自己生成一个随机名称以将文件另存为。如果您愿意，您可以将原始文件名作为元数据存储在数据库中。

3.  永远不要让任何人或任何东西任意访问该文件。例如，如果攻击者将`malicious.php`文件上传到您的服务器，并且您将其存储在站点的 webroot 目录中，则用户可以简单地`example.com/uploads/malicious.php`执行该文件并在您的服务器上运行任意 PHP 代码。

    *   永远不要在任何地方公开存储任意上传的文件，始终将它们存储在只有您的应用程序可以访问它们的地方。

    *   只允许特定进程访问文件。如果它应该是图像文件，则只允许读取图像并调整它们大小的脚本直接访问该文件。如果此脚本在读取文件时出现问题，则可能不是图像文件，标记它和/或丢弃它。其他文件类型也是如此。如果该文件应该可供其他用户下载，请创建一个脚本来提供该文件以供下载，并且不对其进行任何其他操作。

    *   如果您不知道要处理的文件类型，请自行检测文件的 MIME 类型和/或尝试让特定进程打开文件（例如，让图像调整大小进程尝试调整假定图像的大小）。在这里也要小心，如果该过程中存在漏洞，恶意制作的文件可能会利用它，这可能会导致安全漏洞（此类攻击的最常见示例是 Adob​​e 的 PDF 阅读器）。

* * *

要解决您的具体问题：

> [T] 要检查这些图像的大小，我必须将它们存储在我的 /tmp 文件夹中。不是很危险吗？

不会。如果您不对这些数据进行任何操作，那么仅将数据存储在临时文件夹中的文件中是没有风险的。数据只是数据，无论其内容如何。如果您尝试执行数据，或者如果程序正在解析数据，如果程序包含解析缺陷，则可能会被恶意数据诱使做出意想不到的事情，这才是有风险的。

当然，在磁盘上存放任何类型的恶意数据比在任何地方都没有恶意数据风险更大。你永远不知道谁会来和它一起做点什么。所以你应该验证任何上传的数据，如果它没有通过验证，请尽快丢弃它。

> 如果恶作剧者给了我一个网址，我最终下载了一个充满恶意软件的整个网站怎么办？

具体下载什么取决于您。一个 URL 最多会产生一个数据块。如果您正在解析该数据并基于该初始 blob 下载更多 URL 的内容，那是您的问题。不要这样做。但即使你这样做了，那么你也会有一个临时目录，里面装满了东西。同样，如果您没有对这些东西做任何危险的事情，这并不危险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T06:31:08.577

一个简单的场景是：如果您使用的上传接口对允许上传的文件类型没有限制，那么攻击者可以上传带有恶意代码的 PHP 或 .NET 文件，这可能会导致服务器受损。

参考： [http](http://www.acunetix.com/websitesecurity/upload-forms-threat.htm) ://www.acunetix.com/websitesecurity/upload-forms-threat.htm 以上链接讨论了常见问题

另请参阅： http: [//php.net/manual/en/features.file-upload.php](http://php.net/manual/en/features.file-upload.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T06:32:38.553

这里是其中的一些：

*   当文件上传到服务器时，PHP 会将变量 $_FILES['uploadedfile']['type'] 设置为客户端使用的 Web 浏览器提供的 MIME 类型。但是，文件上传表单验证不能仅取决于此值。恶意用户可以使用脚本或其他允许发送 HTTP POST 请求的自动化应用程序轻松上传文件，从而允许他发送虚假的 mime 类型。

*   编译一个包含攻击者可以使用的所有可能扩展的列表几乎是不可能的。例如，如果代码在托管环境中运行，通常此类环境允许使用大量脚本语言，例如 Perl、Python、Ruby 等，并且列表可能无穷无尽。

    > 恶意用户可以通过上传名为“.htaccess”的文件轻松绕过此类检查，该文件包含类似于以下的代码行：`AddType application/x-httpd-php .jpg`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T08:00:38.507

有一些通用规则可以避免文件上传的一般问题：

*   将上传的文件存储在您的网站根文件夹之外 - 因此用户将**无法**重写您的应用程序文件并直接访问上传的文件（例如**/var/uploads**而您的应用程序位于**/var/www**中）。
*   将清理过的文件名存储在数据库中，物理文件给出文件哈希值的名称（这也解决了存储文件重复的问题 - 它们将具有相等的哈希值）。
*   为了避免在 /var/uploads 文件夹中有太多文件时文件系统出现问题，请考虑将文件存储在文件夹树中，如下所示：

    `file hash = 234wffqwdedqwdcs`-> 将其存储在`/var/uploads/23/234wffqwdedqwdcs`

    **通则：** `/var/uploads/<first 2 hash letters>/<hash>`

*   如果您还没有安装**nginx ，请安装它 - 它像魔术一样提供静态服务，它****的“X-Accel-Redirect”**标头将允许您提供文件，其中权限首先由自定义脚本检查

# java - 从支持 bean 访问 JSF 组件标记属性值

> ID：11061356
> 
> 赞同：3
> 
> 时间：2012-06-16T06:26:25.250
> 
> 标签：java, jsf, attributes, tags, web

我需要访问组件标签属性，例如：

```
<h:inputtext id="input_age"/> 
```

来自支持 bean，例如：

```
public class UserInfo {
    String inputAgeId;
    public UserInfo() {
        inputAgeId = { /*code to access component tag attribute*/ }.getStyleClass();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T11:29:16.213

```
UIViewRoot view = FacesContext.getCurrentInstance().getViewRoot(); 
```

然后，您可以使用[view.find("component_id")](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)来获取正确的组件。拥有组件后，您可以使用[getAttributes()](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)来获取`Map<String, Object>`组件的所有属性。

如果您始终访问相同的组件，则可以[将其绑定到支持 bean](https://stackoverflow.com/q/4532955/1073063)。

# database - 分配给 SQLite 内存数据库的内存大小

> ID：11061357
> 
> 赞同：4
> 
> 时间：2012-06-16T06:26:34.060
> 
> 标签：database, sqlite, size, in-memory

如果使用以下语法创建内存中的 sqlite 数据库，那么分配给它的最大内存大小是多少？

```
my $dbh = DBI->connect('dbi:SQLite:dbname=:memory:'); 
```

如果内存数据库的大小变得大于最大可用内存会发生什么。

假设我有 1 GB 的空闲空间，而数据库大小变为 1.1 GB，那么将一些数据写入磁盘还是什么？

有没有办法改变分配给内存 sqlite 数据库的 max-memory 的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T06:39:10.187

它将使用虚拟内存，是的，一旦您超过了所有可用内存，它就会写入磁盘，当超过时，它可能会抛出异常，具有未定义的行为，或者它可能取决于操作系统。这些是 SQLite 限制：[http](http://www.sqlite.org/limits.html) ://www.sqlite.org/limits.html 。

如果要设置最大数据库大小，可以执行以下 SQL 命令：

```
PRAGMA page_size = 512
PRAGMA max_page_count = 195313 
```

在 Perl 中：

```
$dbh = DBI->connect('dbi:SQLite:dbname=:memory:');
$query_handle = $dbh->prepare("PRAGMA page_size = 512");
$query_handle->execute();
$query_handle = $dbh->prepare("PRAGMA max_page_count = 195313");
$query_handle->execute(); 
```

您可以通过创建一个临时表并使用循环插入大量对象来对其进行测试，直到达到限制为止。

这会将您的最大数据库大小设置为 100,000,256 字节。

SQlite 数据库存储在页面中，这将为您的数据库设置页面大小和最大页面数。您可以使用任一参数来满足您的需求；更大的页面意味着更高的性能，但更快的增长。

这些是 sqlite 支持的所有 PRAGMAS：[http](http://www.sqlite.org/pragma.html#pragma_page_size) ://www.sqlite.org/pragma.html#pragma_page_size 。

这是 Python 中的一个简单测试：

```
import sqlite3

con = sqlite3.connect(':memory:')
cur = con.cursor() 
cur.execute("PRAGMA max_page_count = 195313")
cur.execute("PRAGMA page_size = 512")
cur.execute("CREATE TABLE test (random_values TEXT)")
index = 0
query = "INSERT INTO test (random_values) VALUES ('%s')" % "".join(['a' for index in xrange(1000)])
while True:
    try:
        c = cur.execute(query)
        index += 1
    except Exception as ex:
        print str(ex)  
        break       

print index * 1000 
```

很快你就会得到这样的东西：

> sqlite3.OperationalError：数据库或磁盘已满

由于开销，我得到`93915000`字节，所以如果你想要 100 兆字节，请使用这些设置。

# ios - 如何以编程方式为一组 UIButtons 设置单独的背景图像

> ID：11061362
> 
> 赞同：7
> 
> 时间：2012-06-16T06:27:42.973
> 
> 标签：ios, iphone, uibutton, programmatically-created

这是我以编程方式创建按钮的代码：

```
NSArray *buttonImage=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                      [UIImage imageNamed:@"Cover_1.png"],
                      [UIImage imageNamed:@"Cover_2.png"],
                      [UIImage imageNamed:@"Cover_3.png"],
                      [UIImage imageNamed:@"Cover_4.png"],
                      [UIImage imageNamed:@"Cover_5.png"],
                      [UIImage imageNamed:@"Cover_6.png"],
                      [UIImage imageNamed:@"Cover_7.png"],nil];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f);
[button setTitle:[NSString stringWithFormat:@"%i", index] forState:UIControlStateNormal];
[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
button.titleLabel.font = [button.titleLabel.font fontWithSize:50];

[button setImage:buttonImage forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
return button; 
```

但是在运行它时，我无法进入模拟器并且它会抛出 Signal Sigabart 错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T11:48:40.263

要使用选择器数组以编程方式创建按钮，您可以使用以下代码片段：

//定义策略

```
@interface DataItemStrategy : NSObject
@property(nonatomic, assign) SEL someSelector;
@end

@implementation DataItemStrategy

@synthesize someSelector = _someSelector;

-(id)initWithSelector:(SEL)someSelector
{
    self = [super init];
    if (self)
    {
        self.someSelector = someSelector;
    }
    return self;
}

@end

-(void)createButtons
{
    NSArray *buttonImages =[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                          [UIImage imageNamed:@"Cover_1.png"],
                          [UIImage imageNamed:@"Cover_2.png"],nil];

    NSArray *dataStrategies = [NSArray arrayWithObjects:
                                   [[[DataItemStrategy alloc] initWithSelector:@selector(buttonAction0:)] autorelease],
                                   [[[DataItemStrategy alloc] initWithSelector:@selector(buttonAction1:)] autorelease],
                                   [[[DataItemStrategy alloc] initWithSelector:@selector(buttonAction2:)] autorelease], nil];

    CGRect buttonFrame = CGRectMake(0, 0, 50, 50);
    for (NSInteger i = 0; i < [buttonImages count]; i++)
    {
        buttonFrame.origin.y += 50;
        UIImage *buttonImage = [buttonImages objectAtIndex:i];
        DataItemStrategy *dataStrategie = [dataStrategies objectAtIndex:i];
        NSString *title = [NSString stringWithFormat:@"%d", i];
        UIButton *button = [self buttonWithFrame:buttonFrame image:buttonImage action:dataStrategie.someSelector title:title];
        [self.view addSubview:button];
    }    
}

-(UIButton *)buttonWithFrame:(CGRect)buttonFrame image:(UIImage *)buttonImage action:(SEL)buttonAction title:(NSString *)title
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = buttonFrame;
    [button setTitle:title forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    button.titleLabel.font = [button.titleLabel.font fontWithSize:50];

    [button setImage:buttonImage forState:UIControlStateNormal];
    [button addTarget:self action:buttonAction forControlEvents:UIControlEventTouchUpInside];
    return button;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T06:35:29.000

您不能将图像数组设置为`UIButton`图像属性。如果您查看[UIButton](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setImage%3aforState%3a)的文档，您会发现它需要一个`UIImage`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T06:55:11.803

您的代码中的索引是什么？设置这个：

```
[button setBackgroundImage:[buttonImage objectAtIndex:index] forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T06:33:15.497

修改如下代码以将第一个图像设置为按钮/您可以使用 for 循环创建图像并将其设置为 uibuttons

```
NSArray *buttonImage=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                  [UIImage imageNamed:@"Cover_1.png"],
                  [UIImage imageNamed:@"Cover_2.png"],
                  [UIImage imageNamed:@"Cover_3.png"],
                  [UIImage imageNamed:@"Cover_4.png"],
                  [UIImage imageNamed:@"Cover_5.png"],
                  [UIImage imageNamed:@"Cover_6.png"],
                  [UIImage imageNamed:@"Cover_7.png"],nil];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f);
[button setTitle:[NSString stringWithFormat:@"%i", index] forState:UIControlStateNormal];
[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
button.titleLabel.font = [button.titleLabel.font fontWithSize:50];

[button setImage:(UIImage*)[buttonImage objectAtIndex:1] forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
return button; 
```

换线

```
[button setImage:(UIImage*)[buttonImage objectAtIndex:1] forState:UIControlStateNormal]; 
```

这会将图像设置为按钮。您已发送一个数组来设置图像，因此应用程序将崩溃

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T06:37:54.713

试试：[button setImage:[buttonImage objectAtIndex:index] forState:UIControlStateNormal];

# javascript - 更改图像标签列表的图像源并将其替换为特定列表

> ID：11061365
> 
> 赞同：1
> 
> 时间：2012-06-16T06:28:07.340
> 
> 标签：javascript, jquery

我需要替换 div 标签中的图像 src 列表。例如 ：

```
<!-- language-all: lang-html -->  
<div id="Listofimages">
    <img src="images\2page_img_3.jpg">
    <img src="images\2page_img_3.jpg">
    <img src="images\2page_img_3.jpg">
</div> 
```

所以在这里我想更改这 3 个图像源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:37:25.727

你可以这样做：

```
$('#Listofimages img').eq(0).attr('src', 'new_image_1');
$('#Listofimages img').eq(1).attr('src', 'new_image_2');
$('#Listofimages img').eq(2).attr('src', 'new_image_3'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:38:19.187

**另一个演示** [http://jsfiddle.net/ac52D/](http://jsfiddle.net/ac52D/)

好读：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

小解释：

下面的代码使用 id获取所有`img`标签并更改其 img src。`div``Listofimages`

该演示包含之前和之后的警报。

希望这可以帮助，

**代码**

```
var src = "google.com";
$('#Listofimages img').each(function(){
         alert("IMG Source before change => " + $(this).prop('src'));
         $(this).prop('src', src);
        alert("IMG Source After change => " + $(this).prop('src'));
    }
);​ 
```

**HTML**

```
 <div id="Listofimages">
     <img src="images\2page_img_3.jpg"/>
     <img src="images\2page_img_3.jpg"/>
     <img src="images\2page_img_3.jpg"/>
</div> 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T07:12:38.707

你可以像下面这样轻松地做到这一点：

***你的 HTML***

```
<div id="Listofimages">
    <img src="images\2page_img_3.jpg">
    <img src="images\2page_img_3.jpg">
    <img src="images\2page_img_3.jpg">
</div> 
```

***jQuery代码***

```
var url = 'http://assets.techdreams.org/wp-content/uploads/2009/09/GoogleChromeLogo1.png';
$('#Listofimages img').prop('src', function(index, oldSource) {
    return url;
}); 
```

**[演示](http://jsfiddle.net/ac52D/4/)**

[**`.prop()`**](http://api.jquery.com/prop)接受第二个参数作为函数，该函数的参数分别是`index`和`oldValue`。

# asp.net-mvc - 在 asp.net mvc 2.0 中使用报告服务

> ID：11061366
> 
> 赞同：-3
> 
> 时间：2012-06-16T06:28:23.200
> 
> 标签：asp.net-mvc, reporting-services

我是一个非常新的.net 开发人员，现在我想知道如何在我的项目的 asp.net mvc 中打印报告。我想用从数据库中查询的数据打印报告。

请分享任何关于它的想法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:18:24.130

First of all Generate rdlc file for report. ADD New Item -> Select Report Than , further give database for that report.

# javascript - 节点和一般的 MVC：模型如何与视图相关联？

> ID：11061374
> 
> 赞同：4
> 
> 时间：2012-06-16T06:29:42.117
> 
> 标签：javascript, model-view-controller, node.js

我从 node.js 开始，正在制作一个简单的 MVC 框架。到目前为止，我有一个前端控制器（或“调度员”，如果你愿意的话）正在工作。如图所示，路由通过调度程序配置模块发生。

我的问题在最后，紧跟在代码之后。另外，这是一个学习node的练习，请不要推荐express.js之类的。

**调度程序配置.js**：

```
var url = require('url');

(function() {
    var dispatcherConfig = {
        '/'                 : 'homeController',
        '/index.html'       : 'homeController',
        '/sayHello.html'    : 'helloController',
        '404'               : '404Controller'
    };

    module.exports.getController = function(request) {
        var route = url.parse(request.url, true).pathname;
        if(dispatcherConfig[route]) {
            return dispatcherConfig[route];
        }
        return dispatcherConfig['404'];
    }
}()); 
```

这由**dispatcher.js**使用：

```
var dispatcherConfig = require('./config/dispatcherConfig');

(function() {
    module.exports.dispatch = function(request, response) {
        var requiredController = dispatcherConfig.getController(request);
        var controller = require('./controllers/' + requiredController);
        controller.doService(request, response);
    }
}()); 
```

这是一个示例控制器的样子（也很有效） - **homeController.js**：（
请暂时忽略内联视图代码）

```
(function() {
    var homeController = {
        doService: function(request, response) {
            response.write('<form action="/sayHello.html" method="GET">' + 
                '<input id="name" name="name" size="20" />' + 
                '<input type="submit" value="Submit" />' + 
                '</form>');
        }
    }

    module.exports.doService = function(request, response) {
        return homeController.doService(request, response);
    }
}()); 
```

此路由效果很好。通过进一步检查请求对象，我可以轻松地将控制器连接到 url 模式，并且正在模拟 spring 的多动作控制器类型。

这里需要做的三个明显的事情是：

1.  创建视图对象
2.  创建模型对象
3.  绑定视图和模型

* * *

**问题**：

1.  在 MVC（至少是 spring）中，控制器将视图与模型绑定。这是最好的方法吗？如果我单独维护一个单独的配置来描述什么视图绑定到什么模型，并且控制器只路由到一个视图。这是错误的而不是 MVC 吗？

2.  在 node.js 中表示视图的好方法是什么？由于它大量基于模板，因此提供了哪些模板选项（成熟的）？

3.  如果我加载一个要静态服务的文件（比如 CSS 文件，通过文件读入内存加载），并且我在 global/app 范围内保留对内容的引用，那么后续请求可以直接从内存中提供，从而产生惊人的结果速度，这个假设正确吗？事实上，我们可以保证在第一个请求进入节点服务器后（这会触发文件读取和内容被加载到 mem 中），所有后续请求都将从内存中服务（对于此类静态内容）。

4.  在原始 node.js 中获取 POST 数据的低级（无框架）方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T06:34:52.027

## 为了回答您的标题问题，这就是我向我解释的方式：

控制器是路由器，它接收传入的请求，将它们与一些业务逻辑（包括获取数据）和一些渲染方法配对，然后将它们吐回队列。把它想象成一个邮件分拣机或其他东西：“这是一个地址，有一个垃圾箱”。

观点应该是愚蠢的。它应该获取数据并将其填充到插槽中，并且可能为表执行一些循环，并且可能包含一些其他视图，但仅此而已。呈现 HTML。更好的是“呈现” XML 或 JSON 输出的“视图”，或者只是将原始数据返回给客户端。（所有观点）

模型是棘手的部分，因为这是您处理传入的数据或来自数据库的结果的地方。所以这里可能有很多“层”，你实际上可能会进行很多嵌套调用。这是您要验证完整性检查之外的输入（并在故障时将适当的运营商消息返回给控制器）​​的地方，这是您要在存储之前进行预处理的地方，并对来自数据库的内容进行后处理。这就是逻辑存在的地方。

事情是这样的：我们不再单一地做事，我们正在调用我们打算发生的事情。所以通过调用一个特定的控制器，你已经在语义上指定了一些信息（看看他们为什么称之为语义网，因为这个）。

所以我们可以让控制器变得更笨（调用者知道意图）。我们可以让模型变得更笨（它为控制器处理特定的业务逻辑和存储）。观点总是愚蠢的。

这并不是说单个模型类不能很大。但是单个控制器应该调用的部分应该很窄。

## 对于您的其他要求：

> 在 MVC（至少是 spring）中，控制器将视图与模型绑定。这是最好的方法吗？如果我单独维护一个单独的配置来描述什么视图绑定到什么模型，并且控制器只路由到一个视图。这是错误的而不是 MVC 吗？

见上文，我想我已经涵盖了这一点。要求控制器根据您的语义要求做某件事。控制器不是单一的 switch 语句，因此不需要在其中进行大量配置。

> 在 node.js 中表示视图的好方法是什么？由于它大量基于模板，因此提供了哪些模板选项（成熟的）？

“代表一种观点”？嗯，视图引擎自己进行匹配。您真的要编写自己的视图引擎吗？可以办到。标记一个视图文件，找到“控制动词”（因为没有更好的名称，我相信他们有一个），在那里插入数据，然后将整个标记化结构呈现为字符串（HTML 本质上是一个字符串，不？）。简而言之，这就是我所得到的。我的建议是，让视图人做视图工作，你不需要全部重写。

> 如果我加载一个要静态服务的文件（比如 CSS 文件，通过文件读入内存加载），并且我在 global/app 范围内保留对内容的引用，那么后续请求可以直接从内存中提供，从而产生惊人的结果速度，这个假设正确吗？事实上，我们可以保证在第一个请求进入节点服务器后（这会触发文件读取和内容被加载到 mem 中），所有后续请求都将从内存中服务（对于此类静态内容）。

这是一个正确的假设。这就是我要做的，使用一般的垃圾收集例程每隔几分钟检查一次并粉碎任何早于 n 分钟的文件，然后在后续请求中重新加载，确保您获得相对较新的文件。但这实际上是缓存代理所做的，所以是的，这是完全可以接受的。

> 在原始 node.js 中获取 POST 数据的低级（无框架）方法是什么？

你没有。Node 会为你做这件事。它已经出现在请求对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:59:48.093

我见过的最常用的与 node 一起使用的模板引擎是 Jade 和 EJS，主要是因为 Express 内置了对它们的支持。如果你不打算使用 Express，我也会认真研究 Mustache（我个人更喜欢它的哲学而不是 Jade/EJS）。

# android - Android 和 SQLite：有没有很好的方法来使用 ContactsContract API 加入查询

> ID：11061380
> 
> 赞同：1
> 
> 时间：2012-06-16T06:31:28.427
> 
> 标签：android, sql, contactscontract

我觉得我可能在 ContactsContract API 中遗漏了一些东西。在我的应用程序中，我有几个 SQLite 表，其中引用了联系人或组（来自 ContactsContract API）。我这样做了，而不是用我自己的联系人和组表重新发明轮子。

然而，让查询一起工作变成了一场噩梦。假设我想使用来自特定组的所有联系人对我的 SQL 表执行操作。我必须查询 ContactsContract 以获取组成员的contact_id，将这些contact_id 加入字符串，然后将该字符串放入单独的查询中。（或者在循环中使用 SQL 查询。）

这是如此糟糕的 SQL，我觉得我一定做错了什么，但我找不到任何其他方法的参考。我即将维护自己的联系人列表。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:25:27.403

不，你没有处于任何错误的边缘。Contacts ContentProvider（以及我见过的几乎所有 ContentProvider）都与传统的 SQL 智慧相矛盾，哦，好吧。

如果要从多种类型的 ContactsContracts.CommonDataKinds 中获取数据，则需要检测您所在行的 mime-type 并确定它是哪种实体（或进行额外查询，我的首选解决方案是这一切都在一个查询中......）

屏住呼吸，这是我编写的一些代码示例。您应该能够看到不同的行如何可以是不同类型的实体，因此它们的通用列可以保存不同类型的数据，这就是我们使用 CommonDataKinds.* 类在上下文中引用它们的原因：

```
public class ContactsHelper {

    private static String[] PROJECTION = {
        Data.CONTACT_ID,
        Data.MIMETYPE,
        StructuredName.GIVEN_NAME,
        StructuredName.FAMILY_NAME,
        StructuredName.DISPLAY_NAME,
        StructuredName.MIDDLE_NAME,
        Email.ADDRESS
    };

    public static void readContacts(Context context) {
        ContentResolver resolver = context.getContentResolver();
        Uri contactsUri = ContactsContract.Data.CONTENT_URI;

        SQLiteDatabase conn = DatabaseHelper.openDatabase(context);

        Cursor cursor = resolver.query(contactsUri, PROJECTION, null, null, null);

        int idxContactId = cursor.getColumnIndex(Data.CONTACT_ID);
        int idxMimeType = cursor.getColumnIndex(Data.MIMETYPE);
        int idxGivenName = cursor.getColumnIndex(StructuredName.GIVEN_NAME);
        int idxFamilyName = cursor.getColumnIndex(StructuredName.FAMILY_NAME);
        int idxDisplayName = cursor.getColumnIndex(StructuredName.DISPLAY_NAME);
        int idxMiddleName = cursor.getColumnIndex(StructuredName.MIDDLE_NAME);
        int idxEmail = cursor.getColumnIndex(Email.ADDRESS);

        for (cursor.moveToFirst(); ! cursor.isAfterLast(); cursor.moveToNext()) {
            String mimeType = cursor.getString(idxMimeType);

            Integer contactId = cursor.getInt(idxContactId);

            if (StructuredName.CONTENT_ITEM_TYPE.equals(mimeType)) {
                String firstName = cursor.getString(idxGivenName);
                String middleName = cursor.getString(idxMiddleName);
                String lastName = cursor.getString(idxFamilyName);
                String displayName = cursor.getString(idxDisplayName);

                            Log.d(TAG, all the values ^^^);

            }

            if (Email.CONTENT_ITEM_TYPE.equals(mimeType)) {
                String emailName = cursor.getString(idxEmail);
                Log.d(TAG, all the values ^^^);
            }
        }

        DatabaseHelper.closeDatabase(conn);
        cursor.close();
    }   
} 
```

是的，这个完全严肃的解决方案确实使用了字符串比较。如果有更好的方法，请告诉我！

# windows - 有选择地控制鼠标输入设备

> ID：11061384
> 
> 赞同：0
> 
> 时间：2012-06-16T06:32:14.957
> 
> 标签：windows, unity3d, multipoint

我想为 Windows 开发一个多鼠标输入工具，能够有选择地控制单个鼠标设备。我还想跟踪禁用单击事件的设备的 MouseMove 事件并显示指针。

我所知道的最接近的现有解决方案（对于 Win7）是[TeamPlayer](http://www.dicolab.com/wunderworks/)，但它缺乏将控制限制为单个鼠标（或自定义光标图像）的功能，而是通过左键单击自由转移控制。我曾尝试通过 DeviceID 手动禁用设备，但一旦重新启用 TeamPlayer 将无法识别它们。此外，我的许多鼠标设备都具有相同的 DeviceID。

我一直在考虑微软的 MultiPoint SDK，已经使用 MultiPoint TUIO（MultiPoint SDK 的多点触控 TUIO 框架模拟器）和 Mindstorm 的 Unity3D-TUIO 在 Unity3D 中开发了一个交互式多鼠标游戏。

MultiPoint TUIO 使用 MultiPoint 覆盖窗口并将 TUIO 消息发送到底层目标窗口。但是，我看到这种方法（即路由[MultipointMouseEvents](http://msdn.microsoft.com/en-us/library/microsoft.multipoint.sdk.multipointmouseevents_members)）来控制非多点窗口中的指针存在问题。例如，单击事件将焦点从 MultiPoint 窗口移开，将控制权返回给所有输入设备。

任何人都可以提出更好的方法吗？

**更新**

关于在 Unity 中使用 MultiPoint，我发现调整 MultiPoint TUIO 有点矫枉过正，但使用了相同的方法。

我创建了一个应用程序（在 WPF 中）实现了一个 UDP 服务器和一个用 MultiPoint 注册的透明窗口，它会定位和调整自身大小以完全覆盖 Unity 窗口。[注意：您必须在 Unity Player 设置中启用“后台运行”。]

然后，我将 MultiPoint 鼠标位置和事件流式传输到`UdpClient`Unity 中的一个接收器，该接收器位于一个名为 的类中，该类`MultiPointInput`跟踪静态成员中的状态。然后，例如，使用`MultiPointInput.mousePosition(mouseID)`（类似于`Input.mousePosition`）访问特定的鼠标位置。

我已经在教室里成功使用了 15-20 个无线鼠标。SDK 非常稳定，但在使用多个无线鼠标（范围和干扰不同）时会出现潜在的硬件问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:14:59.753

我正在寻找从多个鼠标输入中检测输入的方法，但找不到任何容易做到的有用的东西。我一直在碰到这个 Multipoint SDK，但它似乎已经死了很长时间，或者它从来没有活着——几乎没有人记录任何用法。

我还找到了尝试捕获原始输入数据的建议，我发现了这个： http: [//www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)

据说它在非常低的级别单独管理键盘设备，但我不知道如何实现类似的东西。你有没有尝试过这样的事情？您能否就为什么/为什么其他人不应该继续这样做提供任何反馈？

另外，您能否提供更多有关 TUIO 解决方案的可管理性的详细信息？我目前正在尝试为我的统一游戏解决这个问题，其中我需要多个鼠标的单独移动输入。

**更新**：我使用 SDG 工具包： [http://grouplab.cpsc.ucalgary.ca/cookbook/index.php/Toolkits/SDGToolkit](http://grouplab.cpsc.ucalgary.ca/cookbook/index.php/Toolkits/SDGToolkit) 读取多个鼠标输入，并证明是成功的。我不得不搞砸了一段时间，但终于让它工作了，我的应用程序基于他们提供的最简单的示例应用程序。我基本上将一个套接字服务器/客户端项目与这个 SDG 应用程序结合在一起。服务器是我的 Unity 游戏，客户端是应用程序，每次鼠标移动都会发送数据。

有趣的是，它在我尝试过的任何其他计算机上都不起作用，而且我无法弄清楚我到底做了什么才能让它在我的计算机上运行。我测试了很多关于为什么服务器/客户端无法工作，而实际上是 SDG 的东西对其他人不起作用。基本上，我的错误是使用 2007 年（几乎已经死去）的图书馆并假装它应该是无懈可击的。

无论如何，如果有人（阅读：solus :D）想给这个可持续发展目标一些时间，并检查它是否对他们有用，那就太棒了。该库看起来直观、简单且高效。唯一的问题是由于某些奇怪的原因它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T14:20:14.597

如果您正在为 Unity 寻找即用型和多平台库，那么您可能对 Multi-Input 感兴趣：[https](https://www.assetstore.unity3d.com/en/#!/content/59967) ://www.assetstore.unity3d.com/en/#!/content/59967 - 它支持同时连接多个鼠标、键盘和打击板。

# asp.net-mvc - 从对象动态导航

> ID：11061385
> 
> 赞同：3
> 
> 时间：2012-06-16T06:32:36.033
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在开发一个 ASP.NET MVC3 Web 应用程序，我想创建一个导航菜单，该菜单具有从对象动态创建的子菜单。例如，我有一个包含书籍列表的库对象/模型。我希望我的导航能够动态填充指向每本书的链接并显示它们的标题。

前任：

```
Home
Book List
 - Book 1
 - Book 2
 - Book 3
About 
```

我通过从我的控制器中通过 ViewData 传递 Library 对象来实现这一点。然后我共享的 _Layout.cshtml 页面读取 ViewData 并填充导航菜单。然而，这个解决方案的缺点是在我的控制器中返回视图的每个方法都必须将 Library 对象放入 ViewData。所以我想知道是否有更好或更简单的方法来做到这一点？

我确信它可以用 jQuery 完成，但也许你们都有更好的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:01:39.850

看看 Phil Haacked 的博客[Html.RenderAction 和 Html.Action](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)。他的示例实际上是一个菜单，您可以轻松地从布局中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:29:38.820

Erik 发布到 Phil Haack 博客的链接是正确的解决方案，但我花了一段时间才弄清楚 Phil 的示例在做什么。这是一个非常古老的 MVC2 示例，所以这是我的程序最终看起来的示例，以防有人有同样的问题。

家庭控制器：

```
[ChildActionOnly]
public ActionResult Menu()
{
Library library = something.getLibrary();

return PartialView("_MenuPartial", library);
} 
```

共享局部视图_MenuPartial.cshtml：

```
@model ProjectName.Models.Library

<ul>  
@foreach (var book in @Model.BookList)
{
     <li><a href="#">@book.Title</a></li>
}
</ul> 
```

共享视图_Layout.cshtml：

```
<html>
<head>
</head>
<body>
   <nav>
   @{Html.RenderAction("Menu","Home");} 
   </nav>
</body>
</html> 
```

# xcode - UIImageViews 的顺序

> ID：11061394
> 
> 赞同：1
> 
> 时间：2012-06-16T06:35:46.173
> 
> 标签：xcode, random, uiimageview, layer

我正在制作一个纸牌游戏，玩家可以在其中触摸和拖动 3 个 UIImageView，比如说从上到下 ImageA、ImageB、ImageC。我的问题是顺序总是一样的，所以即使玩家将一张牌传过另一张牌，ImageA 也总是在最上面。无论如何，有没有随机化哪张卡将在堆栈顶部？提前致谢。

ps 如果我知道 Cocos2d 中的编码，我会使用图层，但我不知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:55:12.897

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[[self superview] bringSubviewToFront:self];} 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T07:22:40.717

您可以使用以下代码更改 UIImageViews 的分层（z-index/layer）`theView.layer.zPosition = x`

x 是一个数值。层越高，越占优势/越上/越靠前。UIImages 的默认值为 0。

注意：您需要使用 QuartzCore 框架来使用此方法，但它非常简单实用。只需在头文件中弹出这一行。

`#import "QuartzCore/QuartzCore.h`

# xna - 为什么常量的值会影响 HLSL 着色器编译？

> ID：11061401
> 
> 赞同：1
> 
> 时间：2012-06-16T06:38:04.990
> 
> 标签：xna, directx, xna-4.0, hlsl

我在 XNA4 中有一个效果文件，被编译为 Shader Model 3。

这条线编译得很好（在两种颜色之间插值）：

```
return lerp(float4(1,0,0,1),float4(0,0,1,1),pf.x); 
```

将第一种颜色的绿色分量从 0 更改为 0.5：

```
return lerp(float4(1,0.5,0,1),float4(0,0,1,1),pf.x); 
```

导致编译失败：

```
error X6045: When constant registers are read multiple times in a single 
instruction, the _abs modifier must either be present on all of the 
constants, or none of them. 
```

谷歌搜索错误代码不返回任何内容*（编辑：除了这个问题）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:53:34.990

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509618%28v=vs.85%29.aspx)，传递给的所有值都`lerp()`应该具有相同的类型和大小，所以也许这会起作用：

```
return lerp(float4(1,0.5,0,1),float4(0,0,1,1),float4(pf.x,pf.x,pf.x,pf.x)); 
```

# c++ - 右值引用不在 Mac OS X 10.7.4 和 FreeBSD 9.0 上

> ID：11061402
> 
> 赞同：1
> 
> 时间：2012-06-16T06:38:16.460
> 
> 标签：c++, macos, boost, c++11, rvalue

这是我的代码

```
#include <iostream>
#include <vector>
int main()
{
  std::vector<size_t> v1, v2;
  v1.push_back(3);
  v1.push_back(4);
  v2 = static_cast<std::vector<size_t>&&>(v1);
  std::cout << v1.size() << '\n';
  std::cout << v2.size() << '\n';  
} 
```

当我使用 GCC 4.7.0 或 clang 3.1 和 --std=c++0x 在 Linux 上编译代码时，它输出 0 和 2。但是，当我在 Mac OS X 10.7.4 或 FreeBSD 9.0 上使用带有--std=c++0x 的clang 3.0 或clang 3.1，它输出2 和2。我的Mac OS X 和FreeBSD 上的GCC 是v4.2.1，它不支持--std=c++0x。所以我使用了 Boost.Move：

```
#include <boost/move/move.hpp>
v2 = boost::move(v1); 
```

当我使用带有 -I~/boost_1_49_0 的 GCC 4.2.1 在 Mac OS X 上编译代码时，它仍然输出 2 和 2。

**更新：**当我添加 --stdlib=libc++ 时，代码输出 0 和 2。右值引用似乎工作。但是，当我将向量类型从 size_t 更改为 string 时，我得到了一个编译错误，即使我注释了最后三行代码。这次问题与右值引用无关，而是来自 push_back() 函数。当我删除 --stdlib=libc++ 时，它可以通过编译。

```
#include <iostream>
#include <string>
#include <vector>
int main()
{
  std::vector<std::string> v1, v2;
  v1.push_back("hello");
  /*
  v2 = static_cast<std::vector<std::string>&&>(v1);
  std::cout << v1.size() << '\n';
  std::cout << v2.size() << '\n';  
  */
} 
```

哪个铿锵

```
/uac/gds/hjli/clang+llvm-3.1-x86_64-apple-darwin11/bin/clang 
```

clang++ --std=c++11 --stdlib=libc++ rval.cpp

```
In file included from rval.cpp:1:
In file included from /usr/include/c++/v1/iostream:38:
In file included from /usr/include/c++/v1/ios:216:
In file included from /usr/include/c++/v1/__locale:15:
/usr/include/c++/v1/string:1952:10: error: overload resolution selected
      implicitly-deleted copy assignment operator
    __r_ = _STD::move(__str.__r_);
         ^
/usr/include/c++/v1/string:1942:9: note: in instantiation of member function
      'std::__1::basic_string<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >::__move_assign' requested here
        __move_assign(__str, true_type());
        ^
/usr/include/c++/v1/string:1961:5: note: in instantiation of member function
      'std::__1::basic_string<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >::__move_assign' requested here
    __move_assign(__str, integral_constant<bool,
    ^
/usr/include/c++/v1/algorithm:1595:19: note: in instantiation of member function
      'std::__1::basic_string<char, std::__1::char_traits<char>,
      std::__1::allocator<char> >::operator=' requested here
        *__result = _STD::move(*__first);
                  ^
/usr/include/c++/v1/algorithm:1619:12: note: in instantiation of function
      template specialization 'std::__1::__move<std::__1::basic_string<char> *,
      std::__1::basic_string<char> *>' requested here
    return _STD::__move(__unwrap_iter(__first), __unwrap_iter(__last),...
           ^
/usr/include/c++/v1/__config:153:14: note: expanded from macro '_STD'
#define _STD std::_LIBCPP_NAMESPACE
             ^
/usr/include/c++/v1/__split_buffer:557:22: note: in instantiation of function
      template specialization 'std::__1::move<std::__1::basic_string<char> *,
      std::__1::basic_string<char> *>' requested here
            __end_ = _STD::move(__begin_, __end_, __begin_ - __d);
                     ^
/usr/include/c++/v1/__config:153:14: note: expanded from macro '_STD'
#define _STD std::_LIBCPP_NAMESPACE
             ^
/usr/include/c++/v1/vector:1289:13: note: in instantiation of member function
      'std::__1::__split_buffer<std::__1::basic_string<char>,
      std::__1::allocator<std::__1::basic_string<char> > &>::push_back'
      requested here
        __v.push_back(_STD::move(__x));
            ^
rval.cpp:10:5: note: in instantiation of member function
      'std::__1::vector<std::__1::basic_string<char>,
      std::__1::allocator<std::__1::basic_string<char> > >::push_back' requested
      here
        v1.push_back("nice");
           ^
/usr/include/c++/v1/memory:1941:5: note: copy assignment operator is implicitly
      deleted because '__compressed_pair<std::__1::basic_string<char,
      std::__1::char_traits<char>, std::__1::allocator<char> >::__rep,
      std::__1::allocator<char> >' has a user-declared move constructor
    __compressed_pair(__compressed_pair&& __p)
    ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:52:42.333

GCC 4.2 是古老的，所以它`std::vector`不支持右值引用。使用`boost::move`不会改变这一点，它不能神奇地将右值引用支持添加到不支持它的编译器 + 库中。这意味着它是*复制*而不是移动。

我怀疑当您在 Mac 上使用 Clang 时，它使用的是 GCC 4.2 中的旧标准库，即使编译器支持右值引用，它*仍然*不支持。你可以改用 libc++ 库吗，它应该支持 C++11 吗？

当您在 Linux 上使用 Clang 时，它使用 GCC 4.7 中的标准库，它支持 C++11。

NB Clang 3.1 和 GCC 4.7 都支持`-std=c++11`而不是`-std=c++0x`，我认为 Clang 3.0 也支持。如果您的所有编译器都为该选项使用较新的名称，您不妨使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:55:54.597

```
rvalue_reference boost::move(input_reference) 
```

> 此函数提供了一种在具有右值引用的编译器中将引用转换为右值引用的方法。对于其他编译器转换`T&`为`::boost::rv<T>&`，以便激活移动仿真。

如果 std::vector::operator=(boost::rv&) 未定义，则它可能会退回到常规复制构造。我认为你必须做一些特别的事情来处理 boost::rvs 的课程

# java - 如何使用jstl在jsp中获取日历类型方法中的日期设置？

> ID：11061409
> 
> 赞同：1
> 
> 时间：2012-06-16T06:39:16.970
> 
> 标签：java, jsp, spring-mvc, jstl, gregorian-calendar

我正在使用执行查询

```
select lastlevel as VERSION,name as DESCRIPTION,
TO_DATE(lastdate, 'DDMONYYYY_HH24:MI:SS') as RELEASEDATE
from mytable where rownum<=10 
```

这里 lastdate 列是 varchar 类型

给出这样的结果

```
Version     Release Date        
1.0         2002-11-22

2.0     2003-02-08 
```

我在这里设置上述查询的结果 setLastDate 是日历类型，所以我在方法中设置发布日期的结果

```
if (rs.getString("VERSION") != null ) {             bean.setLastLevel(rs.getString("VERSION").trim());
}

if (rs.getDate("RELEASEDATE") != null ) 
{
Calendar calendar = Calendar.getInstance();
calendar.setTime(rs.getDate("RELEASEDATE"));
bean.setLastDate(calendar);
} 
```

该值正在像这样 2003-02-08 的 bean 中设置。最后，我将此结果 bean 添加到数组列表“列表”中，例如 list.add(bean);

现在我想要jsp中的所有这些值。我正在使用spring mvc，所以我使用arraylist“列表”返回视图。当我像这样迭代jsp中的值时

```
<c:forEach var="list" items="${list}">
<td valign="top">${list.lastLevel}</td>
<td valign="top">${list.lastDate}</td>
</c:forEach> 
```

在jsp而不是获取日期我得到这样

```
Version     Release Date        
1.0          java.util.GregorianCalendar[time=1037775600000,areFieldsSet=true, 
```

areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="US/Arizona",offset=-25200000,dstSavings=0,useDaylight=false,transitions=12,lastRule=null],firstDayOfWeek= 1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2002,MONTH=10,WEEK_OF_YEAR=47,WEEK_OF_MONTH=4,DAY_OF_MONTH=20,DAY_OF_YEAR=324,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=3,AM_PM=0,HOUR=0, HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=-25200000,DST_OFFSET=0]

```
2.0          java.util.GregorianCalendar[time=1044687600000,areFieldsSet=true,
areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="US/Arizona",offset=-25200000,dstSavings=0,useDaylight=false,transitions=12,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2003,MONTH=1,WEEK_OF_YEAR=6,WEEK_OF_MONTH=2,DAY_OF_MONTH=8,DAY_OF_YEAR=39,DAY_OF_WEEK=7,DAY_OF_WEEK_IN_MONTH=2,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=-25200000,DST_OFFSET=0] 
```

请帮我解决这个问题。我需要得到结果中的日期。如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:40:08.753

采用

```
<td valign="top">${list.lastDate.time}</td> 
```

它将调用返回实例`getTime()`的日历实例上的方法`Date`

最好不要使用与属性相同的 var 名称，而是调用它`row`（或其他合理的变量名称），然后`${row.lastDate.time}`

```
<c:forEach var="row" items="${list}">
</c:forEach> 
```

如果你想要自定义格式输出然后

添加

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %> 
```

并像使用它一样

```
<fmt:formatDate pattern="yyyy-MM-dd"  value="${list.lastDate.time}" /> 
```

# jquery - 通过拖动分隔处理程序调整元素大小

> ID：11061414
> 
> 赞同：2
> 
> 时间：2012-06-16T06:40:05.393
> 
> 标签：jquery, event-handling, resize, drag

我希望能够上下拖动分隔线以在固定页面高度上调整分隔线上方和下方的 div 大小。这些 div 可以在一个表中，尽管它们不必是。

简而言之，我希望能够模拟[jsFiddle](http://jsfiddle.net/)站点上发生的情况，尽管我只需要垂直调整大小。jsFiddle 使用过 mooTools，但我想用 jQuery 来做。

一个重要的复杂性：在实际动态构建之前，我不会知道分隔线上方的 div 的大小，所以我不能只从设置的绝对定位开始。

最好的前进方式是什么？我有一种感觉，如果我不问，我只会重新发明轮子:)

[顺便说一句：一些名称相似的问题与不起作用的 jsFiddle 示例相关联（例如，[this](https://stackoverflow.com/questions/9307362/resize-the-content-in-div-with-the-drag)）。

到目前为止，我已经使用了这个：

```
 $('.rsh').draggable({
        axis:'y',
        drag: function (event, ui) {            
            var offsettop = ui.offset.top;
            $(this).prev().css({
                height: offsettop
            });
    }); 
```

不用说，它还没有正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T09:41:51.157

如果有人对未来感兴趣，我可以很好地解决这个问题：

```
$('.rsh').draggable({
    axis: 'y', 
    containment: 'parent',
    helper: 'clone', 
    drag: function (event, ui) { 
        var height = ui.offset.top - 85; 
        $(this).prev().height(height); 
    } 
}); 
```

这就是[小提琴](http://jsfiddle.net/QpqX8/)。

使用`clone`是关键。可拖动元素 ( `.rsh`) 是相对的，因此如果您不使用克隆，则该元素移动的距离是鼠标的两倍，因为它也受到前一个 高度变化的影响`div`。

注意：这`- 85`只是页面布局的一个怪癖，允许标题等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:34:33.340

这是 Nick 代码的一个版本（非常有用，谢谢！），它允许后续的分隔符保持静态。它通过在相反方向调整拖动分隔线上方和下方的 div 大小来工作。

```
$('.rsh').draggable({
    axis: 'y'
    ,containment: 'parent'
    ,helper: 'clone'
    , start: function(event, ui) { 
        $(this).attr('start_offset',$(this).offset().top);
        $(this).attr('start_next_height',$(this).next().height());
    }
    ,drag: function (event, ui) {           
        var prev_element=$(this).prev();
        var next_element=$(this).next();
        var y_difference=$(this).attr('start_offset')-ui.offset.top;            
        prev_element.height(ui.offset.top-prev_element.offset().top);
        next_element.height(parseInt($(this).attr('start_next_height'))+y_difference);
    } 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T14:06:27.720

这是 Nick 版本的另一种替代方案，它自动将水平处理程序移动到顶部并归零作为一个很好的效果。此外，它还相互调整两个部分的高度大小。

```
$('.horizontal_handler').draggable({

        axis: 'y', 
        containment: 'parent',
        helper: 'clone', 
        drag: function (event, ui) { 

            var height = ui.offset.top - 220 // 220 : initial top margin to the previousDiv
            , referenceHeight = nextDivHeight + previousDivHeight  //500 px initial height size
            , previousSection = $(this).prev()
            , nextSection = $(this).next();

            if ((nextSection.height() === 0) && (referenceHeight - height < 0)){
                return;
            }

            previousSection.height(height); 
            nextSection.height(referenceHeight - height ) ;

            if (nextSection.height()< 20){
                    previousSection.height( height+ nextSection.height() );
                    nextSection.height(0);
                }

            if (previousSection.height()< 20){
                    nextSection.height(referenceHeight - height - previousSection.height() );
                    previousSection.height(0); 
                }
        } 
    }); 
```

# android - Android 上缺少 cocos2d-x opengl 上下文（适用于 iPhone）

> ID：11061417
> 
> 赞同：4
> 
> 时间：2012-06-16T06:40:57.907
> 
> 标签：android, iphone, opengl-es, cocos2d-x

当我退出应用程序并重新输入时，出现错误：

```
libEGL   call to OpenGL ES API with no current context (logged once per thread)      (red warning text)
libc     Fatal signal 11 (SIGSEGV) at 0x5f012000 (code=2)                  (black text) 
```

错误文件是：（不知道在哪里，但如果我不使用这个文件就可以）

。H：

```
#ifndef __CCMaskLayer__LAYER_H__
#define __CCMaskLayer__LAYER_H__

#include "cocos2d.h"
using namespace cocos2d;

class CCMaskLayer : public cocos2d::CCLayer
{
public:
    CCMaskLayer();

    ~CCMaskLayer();

    virtual bool initWithRGBASizeCenterPosition(float red, float green, float blue, float alpha, CCSize s, CCPoint p);  

    virtual void onExit();

    virtual void onEnterTransitionDidFinish();

    LAYER_NODE_FUNC(CCMaskLayer);

    static CCMaskLayer* layerWithCCColor4FSizeCenterPosition(ccColor4F c, CCSize s, CCPoint p);
    static CCMaskLayer* layerWithRGBASizeCenterPosition(float red, float green, float blue, float alpha, CCSize s, CCPoint p);

    void scratchOffCircle(CCPoint center, float radius);
    void scratchOffRect(CCRect rect);

    CC_SYNTHESIZE_RETAIN(CCRenderTexture* , masked, masked);
    CC_SYNTHESIZE(float, r, r);
    CC_SYNTHESIZE(float, g, g);
    CC_SYNTHESIZE(float, b, b);
    CC_SYNTHESIZE(float, a, a);

private:

    void setClear(float red, float green, float blue, float alpha);

};

#endif // __CCMaskLayer__LAYER_H__ 
```

.cpp：

```
#include "CCMaskLayer.h"

using namespace cocos2d;

CCMaskLayer::CCMaskLayer()
{
}

CCMaskLayer::~CCMaskLayer()
{

    masked->release();

}
bool CCMaskLayer::initWithRGBASizeCenterPosition(float red, float green, float blue, float alpha, CCSize s, CCPoint p) {

    if ( !CCLayer::init() )
    {
        return false;
    }

    this->setClear(red, green, blue, alpha);

    CCSize size = s;

    masked = CCRenderTexture::renderTextureWithWidthAndHeight(size.width, size.height);

    masked->getSprite()->setBlendFunc((ccBlendFunc){GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA});

    masked->setPosition(p);
    this->addChild(masked);

    this->setIsTouchEnabled(true);

    return true;
}

void CCMaskLayer::onEnterTransitionDidFinish()
{
    CCLayer::onEnterTransitionDidFinish();
}

void CCMaskLayer::onExit()
{
    CCLayer::onExit();
}

CCMaskLayer* CCMaskLayer::layerWithCCColor4FSizeCenterPosition(ccColor4F c, CCSize s, CCPoint p) {

    return CCMaskLayer::layerWithRGBASizeCenterPosition(c.r, c.g, c.b, c.a, s, p);
}

CCMaskLayer* CCMaskLayer::layerWithRGBASizeCenterPosition(float r, float g, float b, float a, CCSize s, CCPoint p) {
    CCMaskLayer* layer = new CCMaskLayer;
    layer->initWithRGBASizeCenterPosition(r, g, b, a, s, p);
    layer->autorelease();
    return layer;
}

void CCMaskLayer::setClear(float red, float green, float blue, float alpha) {
    r = red;
    g = green;
    b = blue;
    a = alpha;

}

void CCMaskLayer::scratchOffCircle(CCPoint center, float radius) {

    masked->beginWithClear(r, g, b, a);

    glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_ALPHA);

    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glColorMask(0.0f, 0.0f, 0.0f, 1.0f);

    glPointSize(radius * 2 * CC_CONTENT_SCALE_FACTOR());
    glEnable(GL_POINT_SMOOTH);
    glVertexPointer(2, GL_FLOAT, 0, &center);   
    glDrawArrays(GL_POINTS, 0, 1);    

    glColorMask(1.0f, 1.0f, 1.0f, 1.0f);    
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);        

    masked->end();

 } 

void CCMaskLayer::scratchOffRect(CCRect rect) {

    masked->beginWithClear(r, g, b, a);

    glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_ALPHA);

    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glColorMask(0.0f, 0.0f, 0.0f, 1.0f);

    CCPoint vertices[4] = {
         rect.origin,                                                                    // bottom, left
         CCPointMake(rect.origin.x, rect.origin.y + rect.size.height),                   // top, left
         CCPointMake(rect.origin.x + rect.size.width, rect.origin.y),                    // bottom, right
         CCPointMake(rect.origin.x + rect.size.width, rect.origin.y + rect.size.height), // top, right
    };
    glVertexPointer(2, GL_FLOAT, 0, &vertices); 
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    glColorMask(1.0f, 1.0f, 1.0f, 1.0f);    
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);        

    masked->end();

 } 
```

请注意，它适用于 iOS，但适用于 android 时崩溃。

编辑：：

如果我注释掉圆形/矩形方法的最后一行，则不会绘制任何内容，但不会崩溃。所以问题出在这条线上： masked->end() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:12:20.533

这恰好是 cocos2d-x 的错误。固定在新版本 v2.x 上。（似乎 cocos2d-x 停止更新使用 opengl es 1.x 的 1.x 版本）因此遗憾地不支持 iPhone 和 iPhone 3g。无论如何更新 cocos2d-x 2.x 现在可以工作了。

# php - 刷新html页面中的框架

> ID：11061419
> 
> 赞同：0
> 
> 时间：2012-06-16T06:41:20.170
> 
> 标签：php, javascript, html

一个非常简单的问题。我有一个 html 页面，它分为三个框架，实际上显示了三个 html 页面，如下所示：

```
<HTML>
<HEAD>
<TITLE>A simple frameset document</TITLE>
</HEAD>
<FRAMESET cols="20%, 80%" border="5">
<FRAMESET rows="100, 200" border="5">
  <FRAME src="abc.html">
  <FRAME src="xyz.html">
</FRAMESET>
<FRAME src="ijk.html">
<NOFRAMES>
  <P>This frameset document contains:
  <UL>
     <li>some text</li>
  </UL>
</NOFRAMES>
</FRAMESET>
</HTML> 
```

我需要的是每个页面上一个强大的刷新按钮（可以支持JS/PHP/等），这样页面可以在按钮点击时独立刷新，刷新一个页面不影响其他页面。这是一种可能吗？框架中的一个页面（比如 abc.html）的示例代码（我想要的）可以是：

```
<html>
<body>
<img src='123.jpg'><br />
<input type="button" Onclick="refresh">
</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:57:41.600

只是：

```
document.frames[i].location.reload(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:59:45.377

在你的功能刷新中，写

```
window.location.reload() 
```

# android - Android：java.io.IOException：空 SSL 指针

> ID：11061422
> 
> 赞同：0
> 
> 时间：2012-06-16T06:42:27.287
> 
> 标签：android, amazon-s3

在我的 Android 应用程序中，我必须从亚马逊存储桶下载视频。当我尝试从亚马逊存储桶下载视频时，一段时间后它会出现错误

```
06-16 12:01:55.792: I/System.out(577): ERROR in Thread : java.io.IOException: null SSL pointer 
```

这里是从 Amazon s3 存储桶下载视频的代码

```
public class AmazonS3Helper 
{
GeneralHelper objHelper;
Context myContext;
String bucketName;
String accessKey;
String secretKey;

ProgressBar myProgressBar;

AWSCredentials credential;

int len;
int total = 0;

public AmazonS3Helper(Context context,List list)
{
    try
    {
        myContext = context;
        objHelper = new GeneralHelper(myContext);

        bucketName = "mybucketName";
        accessKey = "myaccesskey";
        secretKey = "mysecretkey";

        credential = new BasicAWSCredentials(accessKey, secretKey);

        getFileFromAmazonS3(list);
    }
    catch (Exception ex) 
    {
        System.out.println("ERROR : "+ex.toString());
    }
}

public AmazonS3Helper(Context context,String amazonObjectName,ProgressBar progress)
{
    try
    {
        myContext = context;
        objHelper = new GeneralHelper(myContext);
        //progressBar = progress;

        bucketName = "mybucketname";
        accessKey = "key";
        secretKey = "key";

        credential = new BasicAWSCredentials(accessKey, secretKey);

        getFileFromAmazonS3(amazonObjectName,progress);
    }
    catch (Exception ex) 
    {
        System.out.println("ERROR : "+ex.toString());
    }
}

public void getFileFromAmazonS3(List list)
{
    try
    {
        List<DownloadItemList> downloadList = list;

        List<S3Object> s3ObjectList = new ArrayList<S3Object>();

        for(int i=0;i<downloadList.size();i++)
        {
            DownloadItemList downloadItem = downloadList.get(i);

            String objectImageKey = downloadItem.getEncryptName()+".app/"+downloadItem.getImageName();
            String objectAudioKey = downloadItem.getEncryptName()+".app/"+downloadItem.getAudioName();

            GetObjectRequest objRequest = new GetObjectRequest(bucketName,objectImageKey);
            AmazonS3Client myS3Client = new AmazonS3Client(credential);
            S3Object s3Object = myS3Client.getObject(objRequest);

            s3ObjectList.add(s3Object);             

            objRequest = new GetObjectRequest(bucketName,objectImageKey);
            myS3Client = new AmazonS3Client(credential);
            s3Object = myS3Client.getObject(objRequest);

            s3ObjectList.add(s3Object);
        }
    }
    catch (Exception ex) 
    {
        System.out.println("ERROR : "+ex.toString());
    }
}

// For Video
public void getFileFromAmazonS3(String strObjectName,ProgressBar progress)
{
    try
    {   
                    String md5Name = objHelper.getMD5HasCode(strObjectName);

        String strObjectKey = "video path";

        GetObjectRequest objRequest = new GetObjectRequest(bucketName,strObjectKey);

        AmazonS3Client myS3Client = new AmazonS3Client(credential);

        S3Object s3Object = myS3Client.getObject(objRequest);

        String filePath = strObjectName+"_video.mp4";

        System.out.println("OK - 8");

        downloadObject(s3Object,filePath,progress);         

    }
    catch (Exception ex) 
    {
        System.out.println("ERROR : "+ex.toString());
    }
}

private void downloadObject(S3Object s3Object,String path,ProgressBar progress)
{
    try
    {
        myProgressBar = progress;

        System.out.println("OK - 8");

        String filePath = objHelper.getFullFilePath(path); // + "noha_video1.mp4";

        System.out.println("FilePath : "+filePath);

        final long fileSize = s3Object.getObjectMetadata().getContentLength();
        final InputStream input = s3Object.getObjectContent();
        final FileOutputStream fos = new FileOutputStream(filePath);

        myProgressBar.setMax((int) fileSize);

        System.out.println("Input Stream Length : " + fileSize);

        final byte[] buf = new byte[1024];

        Thread thread = new Thread()
        {
            public void run()
            {
                try
                {
                    total = 0;

                    while((len = input.read(buf)) > 0)
                    {
                        fos.write(buf,0,len);

                        total = total + len;

                        Message msg = handler.obtainMessage();
                        Bundle b = new Bundle();
                        b.putInt("total", total);
                        msg.setData(b);
                        handler.sendMessage(msg);

                    }
                    if(len == -1 && total==Integer.parseInt(String.valueOf(fileSize)))
                    {
                        Thread.currentThread().interrupt();

                        input.close();
                        fos.close();

                        objHelper.startTargetActivity(myContext, VideoActivity.class);
                    }
                }
                catch (Exception ex) 
                {
                    System.out.println("ERROR in Thread : "+ex.toString());
                }
            }
        };

        thread.start();
    }
    catch (Exception ex) 
    {
        System.out.println("ERROR in Run Thread : "+ex.toString());
    }
}

Handler handler=new Handler() 
{

    @Override

    public void handleMessage(Message msg) 
    {
        myProgressBar.setProgress(msg.getData().getInt("total"));

    }

}; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:19:12.987

您能否检查最终为获取文件生成的 URL，将相同的 URL 粘贴到浏览器中并检查天气，`'http'`有时`'https'`当您发布时`'http'`它会转换为`'https'`如果是，`'https'`那么您必须获取证书。

# php - Facebook SDK 3 我什至不知道这个错误是什么

> ID：11061423
> 
> 赞同：0
> 
> 时间：2012-06-16T06:42:46.130
> 
> 标签：php, facebook, facebook-graph-api

好的，今晚我遇到了一个奇怪的错误，出乎意料，因为当我昨晚工作时，我工作正常，当我进入我正在工作的页面时，作为开始编码之前的参考点我收到了如此庞大的数据集，我不知道它是什么或意味着什么，目前似乎也找不到太多关于它的信息。有一个参考文献提到如果没有设置 cURL 是一个问题，但就像我昨晚说的那样，现在它不会在底部包含我的 curl 的 phpinfo 设置。这是我得到的数组或数据集[http： //pastebin.com/mX9BsLBz](http://pastebin.com/mX9BsLBz)

我正在使用的 php 是

```
 // Try to get the user's id on Facebook
    $user = null;
$user_profile = null;

// See if there is a user from a cookie
$user = $this->facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $this->facebook->api('/me');
  } catch (FacebookApiException $e) {
    show_error(print_r($e, TRUE), 500);
  }
}

//session_destroy();
$this->data['facebook'] = $this->facebook;
$this->data['user'] = $user;
$this->data['user_profile'] = $user_profile;

echo $this->facebook->getAccessToken();
$this->genfunc->debugArray('php', $_SESSION);
$this->genfunc->debugArray('php', $this->session->all_userdata()); 
```

html是

```
<?php if ($user) { ?>
      Your user profile is
      <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre>
      <?php echo anchor($facebook->getLogoutUrl(), 'Logout'); ?>
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script> 
```

我已经尝试刷新我的 DNS 以查看这是否也是一个问题。但再次没有运气。如果需要登录，则会显示登录按钮，但是一旦我登录并开始处理，就会失败

![在此处输入图像描述](../Images/b98bcdce63d2788224ec725fb36e05a6.png) ![在此处输入图像描述](../Images/f9f94be545265bf25f2318c573ac2b78.png)

***编辑*** 通过开发人员区域找到了 facebook 调试工具这是我的消息，不知道这意味着什么，但正如我所说的昨天有效，而不是今天。就像现在一样。

> 应修复的开放图警告 推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。

# php - 如何填充这个 PHP 数组？

> ID：11061424
> 
> 赞同：0
> 
> 时间：2012-06-16T06:42:48.690
> 
> 标签：php, arrays

我有一个外包数据：

[http://example.com/data/news.json](http://example.com/data/news.json)

这是解码后的示例结果：

```
Array
(
    [popular] => Array
        (
            [last_week] => Array
                (
                    [0] => Array
                        (
                           [title] => Business 1
                            [category] => blog/business/local
                        )
                    [1] => Array
                        (
                        [title] => Health 1
                        [category] => blog/health/skincare
                    )
                [2] => Array
                    (
                        [title] => Business 2
                        [category] => blog/business/local
                    )
                [3] => Array
                    (
                        [title] => Health 2
                        [category] => blog/health/skincare
                    )
            )
    )

) 
```

我使用以下方法来显示它：

```
$url = 'http://example.com/data/news.json';
$json = file_get_contents($url);
if(!empty($json)) {
$json_data = json_decode($json, true);
$popular_last_week = $json_data['popular']['last_week'];
$count = count($popular_last_week);
$result .= $count.' last week popular article' . "\n";
for ($i = 0;  $i <$count; $i++) {
$result .= 'Title : '.$popular_last_week[$i]['title'] . "\n";
$result .= 'Category : '.$popular_last_week[$i]['category'] . "\n\n";
}
echo $result;
} 
```

输出数据为：

*4 上周热门文章*

*标题：业务 1*
类别：博客/业务/本地

*标题：健康 1*
*类别：博客/健康/护肤*

*标题：业务 2*
*类别：博客/业务/本地*

*标题：健康 2*
*类别：博客/健康/护肤*

问题是如何显示输出如下：

*2 上周热门商业文章*

*标题：业务 1*
*类别：业务*

*标题：业务 2*
*类别：业务*

*2 上周热门健康文章*

*标题：健康 1*
*类别：健康*

*标题：健康 2*
*类别：健康*

帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:55:14.303

```
$url = 'http://example.com/data/news.json';
$json = file_get_contents($url);
if(!empty($json)) {
    $json_data = json_decode($json, true);
    $popular_last_week = $json_data['popular']['last_week'];

    //  This loop will group all entries by category.
    $categories = array();
    foreach ($popular_last_week as $item) {
        $categories[$item['category']][] = $item['title'];
    }

    //  This loop will echo the titles grouped by categories.
    foreach ($categories as $category => $titles) {
        $result = count($titles) . ' popular in "' . $category . '"' . "\n";
        foreach ($titles as $title) {
            $result .= 'Title: ' . $title . "\n";
        }
        echo $result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:54:34.670

你的意思是你只想显示2个项目？您需要使用`for`循环。

```
for ($i = 0;  $i < 2; $i++) {
    # display for $i
} 
```

更新：

啊，我想我明白了。您应该使用`foreach`循环并循环两次：

```
$categoryItems = array();
foreach ($popular_last_week as $item) {
    $categoryItems[$item['category']][] = $item['title'];
}
foreach ($categoryItems as $category => $items) {
    $result .= count($items) . ' popular in category ' . $category;
    foreach ($items as $item){
        $result .= 'Title: ' . $item['title'] . "\n";
    }
}
echo $result; 
```

# php - 如何在 Yii 中更新用户登录的 TIMESTAMP？

> ID：11061425
> 
> 赞同：2
> 
> 时间：2012-06-16T06:43:04.913
> 
> 标签：php, login, yii

每当用户登录我的网站（使用 Yii 框架构建）时，我希望能够更新我的用户模型`last_login_at`中使用 TIMESTAMP 调用的字段。

如何才能做到这一点？

我想`actionLogin()`SiteController.php 中需要某种类型的编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T17:47:52.327

您要覆盖的是`CWebUser::afterLogin`方法，它应该是这样的：

```
protected function afterLogin($fromCookie) {
  if (!$fromCookie) { #User Explicitly logged in
    $user = $this->model;
    $user->saveAttributes(array('last_login_at' => date(DateTime::W3C)));
  }
  return parent::afterLogin($fromCookie);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T07:45:24.767

您自己在问题中给出了答案，请参阅最后一行。
在您的站点控制器登录操作中

```
public function actionLogin()
 {
    $model=new LoginForm;

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())

    $userid=Yii::app()->user->id;//to get user id 
           $timestamp=date('Y-m-d H:i:s');//current time stamp
     User::model()->updateByPk($userid, array('last_login_time' =>$timestamp));//hope last_login_time field in user table

            $this->redirect(Yii::app()->user->returnUrl);
            //$this->redirect(array('loginsuccess'));
    }
    // display the login form
    $this->render('login',array('model'=>$model));
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:52:00.053

身份验证发生在调用 UserIdentity::authenticate() 时。

```
class UserIdentity extends CUserIdentity
{
    private $_id;

    public function authenticate()
    {
        $user = User::model()->findByAttributes(array('username' => $this->username));
        if ($user === null) {
            $this->errorCode = self::ERROR_USERNAME_INVALID;
        } else if ($user->password !== $user->encrypt($this->password)) {
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
        } else {
            $this->_id = $user->id;
            if (null === $user->last_login_at) {
                $lastLogin = time();
            } else {
                $lastLogin = strtotime($user->last_login_at);
            }
            $this->setState('lastLoginAt', $lastLogin);
            $this->errorCode = self::ERROR_NONE;
        }
        return !$this->errorCode;
    }

    public function getId()
    {
        return $this->_id;
    }

} 
```

现在 lastLoginAt 在您的会话中。下一个问题是“我怎样才能得到这个值？”。这就是答案。这是我用来显示 lastLoginAt 的代码

```
'lastLoginAt' => Yii::app()->user->isGuest ?
    null :
    date('l, F d, Y, g:i a', Yii::app()->user->lastLoginAt) 
```

链接这个：

```
public function actionIndex()
{
    // renders the view file 'protected/views/site/index.php'
    // using the default layout 'protected/views/layouts/main.php'
    $this->render('index', array(
        'lastLoginAt' => Yii::app()->user->isGuest ?
                null :
                date('l, F d, Y, g:i a', Yii::app()->user->lastLoginAt)
    ));
} 
```

此外，您希望将此值保存在数据库中。因此，尝试使用以下方法更改 LoginForm 类：

```
User::model()->updateByPk($this->_identity->id, array(
    'last_login_at' => new CDbExpression('NOW()')
)); 
```

以这种方式使用此代码段：

```
class LoginForm extends CFormModel
{
    public function login()
    {
        if ($this->_identity === null) {
            $this->_identity = new UserIdentity($this->username, $this->password);
            $this->_identity->authenticate();
        }
        if ($this->_identity->errorCode === UserIdentity::ERROR_NONE) {
            $duration = $this->rememberMe ? 3600 * 24 * 30 : 0; // 30 days
            Yii::app()->user->login($this->_identity, $duration);
            User::model()->updateByPk($this->_identity->id, array(
                'last_login_at' => new CDbExpression('NOW()')
            ));
            return true;
        } else {
            return false;
        }
    }
} 
```

# java - 在java中嵌入wav？

> ID：11061432
> 
> 赞同：1
> 
> 时间：2012-06-16T06:43:40.390
> 
> 标签：java, swing, netbeans, embedded-resource, javasound

我正在编写一个小闹钟程序，当闹钟时间到时，它会多次播放音频文件。

程序的报警端就完成了。现在我要播放文件了。我使用 jFileChooser 来选择文件。javax.sound.sampled.AudioInputStream 、 javax.sound.sampled.AudioSystem 和 javax.sound.sampled.Clip 播放我的 wav 文件。工作也一样。

但我真的只想播放一个 wav 文件，而且我还希望能够在多个系统上移动这个闹钟，所以我想避免使用 jFileChooser 来选择我的闹钟铃声。我不想每次运行程序时都必须浏览和选择文件。

给文件一个相对路径（例如，在与 jar 相同的文件夹中）然后修复路径字符串会更容易吗？或者以某种方式使 wav 成为 jar 文件的一部分会更容易（这是我更喜欢的，因为那时我根本不必担心 wav 文件。它只是一个独立的 jar 文件作为闹钟。一个字节数组，也许？）

提前致谢！对不起，如果这太愚蠢了。我是新手！

这是我的 AudioInputStream 代码。

```
 public void getaudPath() {
try {
    JFileChooser chooser;
   String choosertitle=null;
    chooser = new JFileChooser();
      FileNameExtensionFilter filter = new FileNameExtensionFilter(
        "WAV only", "wav");
    chooser.setFileFilter(filter);
    chooser.setCurrentDirectory(new java.io.File("."));
    chooser.setDialogTitle(choosertitle);
        chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    if (chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
        apath = (chooser.getSelectedFile()).toString();
      File soundFile = new File(apath);
AudioInputStream audioIn = AudioSystem.getAudioInputStream(soundFile);
     URL url = this.getClass().getClassLoader().getResource(apath);
         clip = AudioSystem.getClip();
         clip.open(audioIn);
         JOptionPane.showMessageDialog(this,"Got file, A-okay!");
}  else {
          apath = null;
      }} catch (Exception e) {JOptionPane.showMessageDialog(this,"Error in getting sound file:=> "+e); }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T06:52:41.647

*   将音频剪辑添加到 Jar
*   将 Jar 添加到应用程序的运行时类路径。（如果剪辑和类在同一个 Jar 中，则不需要）。
*   用于`Class.getResource("/path/to/the.wav)`获取剪辑的 URL。
*   使用基于[Java 声音信息中的代码播放剪辑。页](https://stackoverflow.com/tags/javasound/info)。

> AudioInputStream 需要文件对象。

**不，他们不是！** 这是我在 Java Sound 信息中向您推荐的源的副本/粘贴。页。

```
import java.net.URL;
import javax.swing.*;
import javax.sound.sampled.*;

public class LoopSound {

    public static void main(String[] args) throws Exception {
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        Clip clip = AudioSystem.getClip();
        // getAudioInputStream() also accepts a File or InputStream
        AudioInputStream ais = AudioSystem.
            getAudioInputStream( url );
        clip.open(ais);
        clip.loop(Clip.LOOP_CONTINUOUSLY);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // A GUI element to prevent the Clip's daemon Thread
                // from terminating at the end of the main()
                JOptionPane.showMessageDialog(null, "Close to exit!");
            }
        });
    }
} 
```

它使用**URL**来获取`AudioInputStream`，而不是`File`.

调用`AudioSystem.getAudioInputStream`被重载以接受 5 种不同的参数类型。最重要/最通用的 3 个是。

*   [`File`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.File%29)
*   [`InputStream`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.InputStream%29) **&**
*   [`URL`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.net.URL%29)

# java - 如何通过检查其值从哈希图中删除条目？

> ID：11061435
> 
> 赞同：1
> 
> 时间：2012-06-16T06:44:13.647
> 
> 标签：java, collections, hashmap, iteration

我有一个 java 映射，其键为字符串，值为整数。我想从这张地图中删除一个值不大于 5 的特定条目（键/值）。任何人都可以建议我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T06:48:20.370

如果您只有一个常规映射（即没有实现反向映射的附加数据结构），那么您最好的选择是迭代值集，测试每个值，并使用`Iterator.remove()`删除相关的值。

如果您有辅助数据结构，您可以使用它来识别要删除的条目。但是“成本”是这样的数据结构需要空间来表示和时间来更新......而且你的代码更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:04:30.427

行！我做了以下工作。感谢斯蒂芬 C：

```
Iterator<Map.Entry<String,Integer>> iter = TestMap.entrySet().iterator();
while (iter.hasNext()) {
    Map.Entry<String,Integer> entry = iter.next();
    if(entry.getValue() <= 5){
        iter.remove();
    }
} 
```

# html - 谷歌浏览器中的白线？

> ID：11061442
> 
> 赞同：2
> 
> 时间：2012-06-16T06:45:39.797
> 
> 标签：html, css, google-chrome, webkit, line

我正在为一位朋友设计一个网站，当她访问该网站时，她坚持认为她在页面顶部看到了一条白线。我一直在尝试重现这条白线，但没有成功。我查看了背景图像，边框上没有白线，我还更改了缩放和屏幕分辨率。奇怪的是我们都在使用最新版本的谷歌浏览器（19.0.1084.56 m）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:36:18.540

在她的 chrome 浏览器中安装 firebug (lite) 扩展并“检查”白线（选择检查器，检查导致白线的代码）。这将使您更接近解决方案，因为这会准确地向您显示在标记中创建白线的位置。

# c# - C#和Javascript中的函数之间的区别？

> ID：11061444
> 
> 赞同：5
> 
> 时间：2012-06-16T06:46:19.383
> 
> 标签：c#, javascript

我正在学习 Javascript，我读过函数是一流的对象，大多数作者提到函数可以返回函数（它们是对象）并将它们作为参数传递给其他函数。

我确信它还有很多东西，那么 C# 中的函数和 javascript 中的函数之间有什么区别？

在 C# 中，我是否可以正确地说函数不是对象（没有方法、属性等），即使使用闭包（使用 lambda 表达式和委托）它们看起来就像 javascript 中的函数对象一样？

我觉得使用 C# 中的 lambda 表达式，对于刚接触该语言的人来说，区别变得有点模糊。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T06:59:24.980

大多数作者所说的是javascript中的“函数是[一等](http://en.wikipedia.org/wiki/First-class_function)公民”。它们*不是*C# 中的第一类，因为它们只是那里的*方法*，附加到一个类。方法委托（和 lambdas）是特定的类，目的是使方法*像*一等公民。

所以这就是事情，尽我所能解释它，而不是告诉你回去阅读 Crockford 的“Javascript：The Good Parts”和类似 Skeet 或其他人的东西：

Javascript 的部分比 C# 少得多。不要将您可以在 C# 中直接执行的操作与您可以（或不能）在 Javascript 中执行的操作（反之亦然）进行比较。

那么为什么不是所有的语言（或者至少是 C#）都有“一流的功能”呢？答案通常是最简单的：因为那不是语言设计要求。然而，这对我来说是一种逃避，因为显然他们现在已经添加了它。但是，如果没有人告诉你将它包含在你未来的语言中，你会吗？

所以要记住的关键是：在 C# 中，函数（方法）必须附加到一个类。在Javascript中他们没有。原因在语言定义（规范）中。

此外，我应该在此之后发表关于对象创建的声明：

您可以通过以下两种方式之一在 javascript 中创建新对象：

```
//using object syntax
var ob1 = { name: value, nestedFunction: function(){} }; 
```

或者

```
//using a function
function MyFunc(){
  var name = value;
  function nestedFunction(){}
}
var ob2 = new MyFunc(); 
```

在第二种情况下，我们使用函数来声明对象，在第一种情况下，我们只是使用文字语法声明它。

为了在 C# 中做同样的事情，我们必须创建一个新对象作为一个类：

```
MyClass ob1 = new MyClass(); //constructor is a member function of the class
public class MyClass {
  public MyClass() {
  }
  public void nestedFunction(){
  }
} 
```

请注意，在 Javascript 中，我仍然必须定义要返回的方法。

好吧，我想今晚就够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T07:40:41.483

可以创建 Javascript 函数并将其分配给变量，它们是语言中的一等公民，并且比 C# 应用的语法糖具有更大的灵活性。

在 C# 中，当您编写代码时

`x => x * x`

编译器创建一个真正的命名方法并将该方法包装在`delegate`可以执行的 a 中。

委托以及 C# 应用的语法糖给人一种与 JavaScript 非常相似的感觉，但它在内部做着非常不同的事情。

在 JavaScript 中，您可以创建一个函数并将其直接分配给一个变量并执行它，而无需将其包装在任何其他结构中以启用该操作。函数是 JavaScript 中的一等公民。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T07:45:57.287

我能想到的*最大* 区别是，在 C# 函数中，变量是**词法****范围**的，而 Javascript 中的变量是词法范围的，*除了***动态**范围。`this`

 **例如，在 Javascript 中，你可以这样说

```
var foo = new Object();
foo.x = 0;
var bar = function() { this.x = 2; };  // first-class function... what's "this"?
foo.baz = bar;   // Now foo has a method called 'baz', which is 'bar'.
foo.baz();
alert(foo.x);   // Displays 2 -- 'this' magically refers to 'foo'! 
```

尝试用 C# 编写它。

或者实际上，不要打扰——这没有任何意义。

为什么？因为`this`在这里没有引用任何东西，词法上！它的含义是动态变化的，不像在 C# 中，它的含义仅仅取决于封闭的类，而不是调用者的实际身份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-04T23:57:21.357

关于 JS 和 C# 的区别，我有一些粗略的想法：

1、Js是一种解释型语言，也就是说JS需要浏览器内置的ECMAScript解释器才能工作。而 C# 是一种编译语言，这意味着 C# 代码将被编译为 IL 才能工作。

2，JS是动态类型语言，定义时不需要指定变量的类型。而 C# 是静态类型语言，这意味着您需要指定变量的确切类型。

3、OOP-封装，在JS中，很多人说函数是一等公民。通常，函数有两种用法：a）只是一个操作某些工作的函数 b）类和构造函数，您可以使用它来实例化对象。而在 C# 中，函数就是函数，它应该属于类（或接口）。

4、OOp-inheritance，在JS中，我们使用prototype来实现继承。而在 C# 中，我们严格使用类来实现继承。

5、OOP-polymorphism，在JS中，据我所知，我们可以使用arguments，这是一个伪数组，来实现函数重载来模拟多态，这是一个伤痕累累的事情。而对于 C# 来说，多态性得到了如此完美的体现。

6、在JS中，我们没有GC。而对于 C#，有一个强大的 GC。

可能有些想法不正确，欢迎提出建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-15T04:20:28.137

只是为了澄清一些混乱；

1) JavaScript 确实是一种编译语言。代码的编译方式就在浏览器上执行之前，而且速度很快！这就是为什么一些开发人员认为它是一种“解释”语言。

2) C# 没有 JS 意义上的函数。它有类方法。**

# asp.net - iframe 中抛出的异常

> ID：11061448
> 
> 赞同：0
> 
> 时间：2012-06-16T06:47:15.633
> 
> 标签：asp.net, exception, iframe

如何确定异常是在 iframe 中还是在页面本身中引发的？（在`Global.asax`页面和`Application_Error`方法中，当然在 C# 中！）

有什么办法吗？

# ms-access - 如何在点击事件中打开表单以进行编辑？

> ID：11061449
> 
> 赞同：0
> 
> 时间：2012-06-16T06:47:37.043
> 
> 标签：ms-access, vba, vbscript

我有一个包含两个列的主表单，其中列出了一个否/产品。我已经为产品字段单击事件提供了 vba 代码，以使用所选产品打开产品详细信息表单，并对其详细信息进行编辑。我给出的代码如下

```
Dim stDocName As String
    Dim stLinkCriteria As String
    stLinkCriteria = Me.Product

    stDocName = "ProductDetail"
    DoCmd.openform stDocName, , , "Product = " & stLinkCriteria 
```

当我单击产品时，它会显示一个输入框，并在输入值时打开带有正确信息的产品详细信息。

我不想每次都输入产品名称。我希望这可以在单击产品时直接工作，并且应该打开它的产品详细信息。

请让我知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:58:44.127

如果 [Product] 字段是文本数据类型，请在语句`stLinkCriteria`中用引号引起来。`OpenForm`

```
DoCmd.OpenForm stDocName, , , "Product = '" & stLinkCriteria & "'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:49:24.733

此代码帮助我解决上述问题

```
Forms!Frm.SetFocus 

Const FORMNAME = "frm1"

Dim ctrl As Control
Dim strCriteria As String

On Error GoTo Err_Handler

Set ctrl = Me.ActiveControl

strCriteria = "[Product] = """ & ctrl & """"

DoCmd.OpenForm FORMNAME, WhereCondition:=strCriteria

Exit_Here:
Exit Sub

Err_Handler:
MsgBox Err.Description, vbExclamation, "Error"
Resume Exit_Here 
```

# asp.net - 如何为 obout 网格中的超链接按钮编写代码？

> ID：11061451
> 
> 赞同：0
> 
> 时间：2012-06-16T06:48:09.133
> 
> 标签：asp.net

我只想知道，如何为网格视图中的超链接按钮编写代码背后（Hyperlink1_Click（））。点击--%>

```
<asp:LinkButton ID="l1" runat="server" PostBackUrl="~/Mine.aspx" 
                CssClass="s11">Click Me</asp:LinkButton>

$(document).ready(function () {
     $("#GridBusOne a[id*='l1']").fancybox( {
        'type' : 'iframe',
        'hideOnOverlayClick':false,
        'hideOnContentClick': false,
        'closeClick' : false,
    });
 });  
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:15:15.163

尝试使用 a `LinkButton`，如下所示：

```
<asp:GridView runat="server" OnRowCommand="grdProducts_RowCommand" ID="grdProducts" >
    <Columns>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="false" 
                    CommandName="myLink" CommandArgument='<%# Eval("Id") %>' Text="Button"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

以及背后的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var r = new Repository();
        this.grdProducts.DataSource = r.GetProducts();
        this.grdProducts.DataBind();
    }

    protected void grdProducts_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "myLink":
                this.lblMessage.Text = e.CommandName + " " + e.CommandArgument + " " + DateTime.Now.ToString();
                break;
            default:
                break;
        }
    } 
```

这会产生类似的东西：

![在此处输入图像描述](../Images/d2ffbb3ab822413bf2e2aaabf4d671f9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:53:19.227

使用`GridView`Control 的`ItemCommand`事件获取更多信息[Go here](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

# emacs - 在 emacs 中，如何在 C/C++ 中禁用注释自动缩进？

> ID：11061453
> 
> 赞同：11
> 
> 时间：2012-06-16T06:48:21.213
> 
> 标签：emacs, indentation, mode

有时我想让临时注释在一行`(//)`或一组行上完全对齐`/* */`。但是，`CC Mode`通过在键入第二个键时自动缩进来覆盖它。一般来说，我喜欢关键字等的自动缩进，但我更希望禁用它的评论。（更新：即我想禁用*c-electric* -key-bindings 触发注释缩进的方式，但注释仍应正常缩进）

我试过把这些线放进去`.emacs`，但它并没有阻止这种行为。

```
(c-electric-slash nil)
(c-electric-star nil) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T20:29:41.393

**简短的回答：**

```
(eval-after-load 'cc-mode
  '(progn
     (define-key c-mode-base-map "/" 'self-insert-command)
     (define-key c-mode-base-map "*" 'self-insert-command))) 
```

**这是我的做法：**

找出绑定到的函数`/`：`C-h k /`

它说“/ 运行命令 c-electric-slash，它是 'cc-cmds.el' 中的交互式编译 Lisp 函数”。

*（如果您没有看到 的链接`cc-cmds.el`，则说明您没有安装 elisp 源。假设您不在 Windows 上，您可以使用系统的包管理器安装`emacs-el`包并重试。）*

按照该链接打开`cc-cmds.el`。搜索`c-electric-slash`除了函数定义之外没有找到任何东西，因此键未绑定在此文件中。`cc-mode.el`从此目录中搜索显示：

```
(define-key c-mode-base-map "/" 'c-electric-slash) 
```

现在我们知道要在其中覆盖`/`键绑定的“键映射”的名称。

如果你在你的 init 文件中添加这样的东西，你可能会在启动时得到一个错误：

```
(define-key c-mode-base-map "/" 'self-insert-command) 
```

...因为您的 init 文件是在 cc-mode.el 之前加载的，并且`c-mode-base-map`未定义。所以我们使用`eval-after-load`（如我回答的顶部）。第一个参数`'cc-mode`必须与`provide`cc-mode.el 末尾的语句匹配。如果您不知道是什么`progn`意思，请执行`C-h f progn`.

如果您喜欢这种学习/发现 Emacs 的方式，可以考虑阅读我的[“如何学习 Emacs”](http://david.rothlis.net/emacs/howtolearn.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:06:56.530

我建议查看`c-indent-comment-alist`&`c-indent-comments-syntactically-p`变量。请参阅此变量的帮助 ( `C-h v`) 以及CC 模式手册的“[自定义缩进](http://cc-mode.sourceforge.net/html-manual/Customizing-Indentation.html#Customizing-Indentation)”和“[样式变量”部分中的更多信息](http://cc-mode.sourceforge.net/html-manual/Style-Variables.html#Style-Variables)

# facet - marklogic中的单词数组

> ID：11061455
> 
> 赞同：4
> 
> 时间：2012-06-16T06:49:02.527
> 
> 标签：facet, marklogic

我是 marklogic 的新手，我开始使用 Corona APi 进行探索。我使用 store API 存储了一些文档。现在我想对一组单词进行分面。我已经索引了一个看起来像的 json 文档

... "aothor":"name", "published_date":"20-10-2011", "nouns":["n1","n2"], .... 我可以在作者字段上进行分面在使其成为范围索引字段之后。我不确定如何计算这个“名词”字段中的所有单词。

请建议我如何在这个或任何其他方式上进行刻面以获得这些词的频率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:59:14.567

目前没有对数组对象的分面的本机支持。他们计划将其包含在下一个 Marklogic 版本中。这里建议解决方法[https://github.com/marklogic/Corona/issues/86](https://github.com/marklogic/Corona/issues/86)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:58:09.397

我不确定 Corona 如何存储 JSON。但是如果每个名词都存储在自己的元素中，您可以创建另一个范围索引。频率数据来自范围索引。

如果您尚未查看它们，[https://github.com/marklogic/Corona/wiki/Facet-Queries](https://github.com/marklogic/Corona/wiki/Facet-Queries)和[https://github.com/marklogic/Corona/wiki/Range-Management](https://github.com/marklogic/Corona/wiki/Range-Management)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:05:12.173

要获取作者提交的方面，您需要通过汤 UI 或 Curl 工具在作者元素上创建第一个范围索引。如果您尝试通过数据库中的 MarkLogic 管理屏幕创建范围索引，则需要在 MarkLogic 中进行一些配置。请按照以下步骤操作：

1.  在数据库中创建范围索引，例如：用于“作者”元素

2.  转到，Configure->Gropus->Deafult->Namespcaes->然后单击添加选项卡

3.  在前缀字段中输入值：“corona-index-author”

4.  在命名空间 uri 中输入值：`http://xqdev.com/prop/xml/<index+type%3d"range"+name%3d"author"><structure>xmlelement</structure><element>author</element><type>string</type><collation/></index>`

5.  单击确定。

6.  重新启动 MarkLogic 服务器（如果需要）。

现在点击您的特定网址以获取作者方面的信息，如下所示：

`http://localhost or ip":"corona-port-no"/facet/author?StructuredQuery={"and":[{"element":"author","equals":"Shakespear"},{"element":"published_date","equals":"20-10-2011"}]}&outputFormat=xml`

# asp.net - 在 Crystal 报表打印按钮单击中调用自定义方法

> ID：11061456
> 
> 赞同：0
> 
> 时间：2012-06-16T06:49:22.557
> 
> 标签：asp.net, crystal-reports-2008

使用 Visual Studio 2008、ASP.net 我创建了一个 Crystal 报表，一切正常，但是当我单击默认打印按钮时，我需要添加一个自定义方法来插入数据库。我已经浏览了与 Windows 应用程序相关的几个示例。请建议我该怎么做。预先感谢。

谢谢和问候，吉文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:32:21.430

首先，您必须将水晶报表查看器放置在您设计的自定义表单中。然后从属性表中隐藏水晶报表查看器控件中的打印按钮。然后在表单中放置一个打印按钮，并使用 .NET 中提供的打印对话框控制打印功能

下面给出几个链接供您参考

[http://msdn.microsoft.com/en-us/library/aa691452%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa691452%28v=VS.71%29.aspx) [http://msdn.microsoft.com/en-us/library/ms226031%28v=VS.90 %29.aspx](http://msdn.microsoft.com/en-us/library/ms226031%28v=VS.90%29.aspx)

# java - 如何在 Java 中创建有限状态机

> ID：11061460
> 
> 赞同：0
> 
> 时间：2012-06-16T06:50:03.080
> 
> 标签：java, fsm, state-machine

如何编写一个程序来读取 FSM 的状态集。输入数据将来自格式为（状态输入下一个状态）的文本文件，最后一行是最终状态。例如 ：

```
 s0   a   s1
    s1   a   s2 
    s2   a   s2 
    s1 
```

程序输出将是：

a) FSM 生成的字符串列表。

b) 程序可以判断FSM是DFA还是NDFA并打印结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:19:22.037

我不会给你一个编码的解决方案，而是一些思路。

首先，FSM 需要开始状态和结束状态，因此您缺少重要信息。

如果您正在生成一个字符串列表，那么您可能正在处理一个非常有限的 FSM 子集，这些 FSM 接受有限数量的字符串。因此，尝试每一种可能性是合理的；遵循图表中的每条路径，并在达到结束状态时打印。

想想 DFSM 与 NDFSM 的区别。如果有多种方法可以使用某些输入，则它是不确定的。因此，当您构建图表时，如果您有一个节点具有两个相同的转换到不同状态的节点，那是不确定的。由于任何非确定性都会使整个系统成为非确定性的，因此确定性就是完全没有非确定性。

因此，您可能希望从实际创建表示开始。我想到了两种简单的方法。更直观地，您可以创建图表。最简单的方法是创建一个节点类，然后为每个节点创建一个对象，其中包含转换和目的地对。

我更喜欢表示 FSM 的一种方式是使用哈希映射/字典。使用节点和转换作为键，目的地作为值。这使得导航相当容易。

祝你好运！

编辑：在确定非确定性时，不要忘记考虑 epsilon 转换（就像我刚刚做的那样。:)）

# php - 如何更改文本颜色代码？

> ID：11061461
> 
> 赞同：1
> 
> 时间：2012-06-16T06:50:05.360
> 
> 标签：php, colors

真实代码：

```
$font_color = ImageColorAllocate($image, 0, 0, 0);
    imagettftext($image, 50, 0, 80, 80, $font_color, '/home/u801961841/public_html/nama.TTF', $user[name]);
    imagettftext($image, 20, 0, 80, 130, $font_color, '/home/u801961841/public_html/nama.TTF', $text3); 
```

我试过了..但没有任何改变。应该更改哪个代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:56:31.460

您的 '$font_color' 变量负责您叠加在图像上的文本颜色。因此，您应该将 ImageColorAllocate 方法中的第 2、3 和第 4 个变量更改为您想要的颜色的相应 RG 和 B 值。

按照这些示例，您应该对什么不适合您有所了解：http: [//php.net/manual/en/function.imagettftext.php#example-3068](http://php.net/manual/en/function.imagettftext.php#example-3068)

# multidimensional-array - 从 Array 到 setValues 给出：“无法转换为。”

> ID：11061470
> 
> 赞同：7
> 
> 时间：2012-06-16T06:52:54.347
> 
> 标签：multidimensional-array, google-apps-script, setvalue

背景。我想从一周格式更改时间表（每行显示 7 天，从 yyww 中只有一周没有日期可用（例如 1225）。在另一张表中，一列列出周，另一列列出日期。

方法。我将这两张表放入两个数组中，将第三个数组打包，我设置的值放入第三张表中。

问题。此行给出错误消息：“无法转换为。”

```
 sheet_IndataTabell.getRange(1,1,IndataTable.length+1,7).setValues(IndataTable); 
```

资源。[您可以在此处](https://docs.google.com/spreadsheet/ccc?key=0ApxaA4SMQFandHZWM00wSlZQWWU3VlBHNU81d2VGa2c)查看文档以及以下完整功能：

```
function UpdateTable() {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet_Indata = ss.getSheetByName("Indata");
var sheet_IndataTabell = ss.getSheetByName("Indata_Tabell");
var sheet_Calendar = ss.getSheetByName("Kalender");

//Get the table into arrays
var Indata = sheet_Indata.getDataRange();
var CalendarTable = sheet_Calendar.getDataRange();

//Gets the values in the Indata to an Array
var NumberRows = Indata.getLastRow();
var NumberCols = Indata.getLastColumn();
//Browser.msgBox(NumberRows + " " + NumberCols);
var IndataArray = new Array(NumberRows,NumberCols);
var IndataArray = Indata.getValues();

//Create an Array to store the result
var IndataTable = new Array(((NumberCols-1)*(NumberRows-1)),7);
//Browser.msgBox("First the IndataTable is defined as: (NumberCols-1)*(NumberRows-1) (" + (NumberCols-1)*(NumberRows-1) + ").");

//Gets the values in the Calendar to an Array
var NumberRows_Cal = CalendarTable.getLastRow();
var NumberCols_Cal = CalendarTable.getLastColumn();
//Browser.msgBox(NumberRows + " " + NumberCols);
var CalendarArray = new Array(NumberRows_Cal,NumberCols_Cal);
var CalendarArray = CalendarTable.getValues();

for (i=1; i<(IndataArray.length); i++)
{

  for (j=3; j<10; j++) {

  IndataTable[i*7+j-3-7] = {};

  //adds the users
  IndataTable[i*7+j-3-7][0] = IndataArray[i][1];

  //adds the week numbers
  var Vecka = IndataArray[i][2];
  IndataTable[i*7+j-3-7][1] = Vecka;

  //adds the hours
  IndataTable[i*7+j-3-7][2] = IndataArray[i][j];

  //adds the projects
  IndataTable[i*7+j-3-7][3] = IndataArray[i][10];

  //adds the day
  var Dag = (j-2);
  IndataTable[i*7+j-3-7][4] = Dag;

  //Gets the date from the Calendar
  IndataTable[i*7+j-3-7][5] = "=VLOOKUP(G" + (i*7+j-9) + ";Kalender!$B$1:C;2)+E" + (i*7+j-9) + "-1";

  IndataTable[i*7+j-3-7][6] = Vecka+"_"+Dag;

  //Browser.msgBox("[" + (i*7+j-3-7) + "][n]: " + IndataTable[i*7+j-3-7][0] + ", " + IndataTable[i*7+j-3-7][1] + ", " + IndataTable[i*7+j-3-7][2] + ", " + IndataTable[i*7+j-3-7][3] + ", " + IndataTable[i*7+j-3-7][4] + ", " + IndataTable[i*7+j-3-7][5] + ", " + IndataTable[i*7+j-3-7][6]);

  }

}

sheet_IndataTabell.clear();
//Browser.msgBox("IndataTable.length: " + IndataTable.length);
//Browser.msgBox("IndataTable[0].length: " + IndataTable[0].length);
//Browser.msgBox("Last row on Range: " + sheet_IndataTabell.getRange(1, 1, IndataTable.length,7).getLastRow());
//Browser.msgBox(IndataTable);

sheet_IndataTabell.getRange("A1:G28").setValues(IndataTable);

//sheet_Indata.sort(3,true); 

//Browser.msgBox("Uppdatering klar!");
sheet_IndataTabell.getRange("J1").setValue(Date());

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-16T19:16:51.817

`setValues()`并且`getValues()`总是使用二维数组，即使范围只有 1 行高，所以你应该使用：

```
LINE 212     sheet_IndataTabell.getRange(1, 1, 1, 2).setValues([IndataTable_Temp]) 
```

（注意我添加的那对括号。）

此外，即使这不是问题，您也不需要在使用之前定义数组的大小`Range.getValues()`，只需删除`(NumberRows_Cal,NumberCols_Cal)`您作为参数放置的，

```
var CalendarArray = new Array() 
```

足够了。

编辑：关于您的评论：请在您的代码中的第 225 行添加这两个 Logger.log，当您获得 2 个数组时，其中一个在 setValues() 中不可用，您会看到发生了什么：

```
 Logger.log(IndataTable);//this one contains JS objects between {}
    Logger.log(IndataTable_Temp);// this one contains array elements between [[]] 
  //Writes the array content to the sheet
  sheet_IndataTabell.getRange(1, 1, i, 11).setValues(IndataTable_Temp); 
```

EDIT2：我对脚本的末尾做了一个小改动，现在数据是纯字符串，数组是真正的 2D（再次查看括号）：

```
 //Reconstruction the Array, I do not know why this is needed
  var IndataTable_Temp = new Array();
  for (i=0; i<IndataTable.length; i++) {
//  Logger.log(typeof(IndataTable[i][0]))
    IndataTable_Temp.push([
      IndataTable[i][0],
      IndataTable[i][1],
      IndataTable[i][2],
      IndataTable[i][3],
      IndataTable[i][4],
      IndataTable[i][5],
      IndataTable[i][6],
      IndataTable[i][7],
      IndataTable[i][8],
      IndataTable[i][9],
      IndataTable[i][10]
    ]);
  }
    Logger.log(IndataTable)
    Logger.log(IndataTable_Temp)
  //Writes the array content to the sheet
  sheet_IndataTabell.getRange(1, 1, IndataTable_Temp.length, IndataTable_Temp[0].length).setValues(IndataTable_Temp);

  //Sets timestamp
  sheet_IndataTabell.getRange("L1").setValue(Date()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-10T07:34:43.083

虽然这是一个旧线程，但我的回答可以帮助其他人在这里解决这个问题，

基本上，这个函数循环遍历一个数组并检查是否有一个空槽，然后它从前一个槽中获取值并向其中添加文本。

```
function addText(){
  var ss = SpreadsheetApp.getActiveSpreadsheet(); //Getting active spreadsheet
  var s = ss.getActiveSheet();  //Getting active sheet

  var sheetName = s.getSheetName(); //Getting active sheet name
  var lastRow = s.getLastRow(); //Getting sheets last row number

  if (sheetName == "sheetName") { //Checking if active sheet is that we want to be
  var jobValuesRange = s.getRange("C8:C" + lastRow); //Getting range that is only one column
  var jobValues = jobValuesRange.getValues(); //Getting values from only one column

    for (var i = 0; i < jobValues.length + 1; i++) { //Looping through all array values
     if (jobValues[i] == "") { 
       //Here is MAGIC where you must add brackets to create two dimension array.
       //Array should be like with lot of rows like first dimension and second dimension,
       //like one cell in that row. 
       jobValues[i] = [jobValues[i - 1] + " night"]; 
     }
    }
    jobValuesRange.setValues(jobValues); // Here you are just updating old values to new values
  }
} 
```

# git - 如何使用原子 git-svn dcommit 操作保留本地分支历史记录？

> ID：11061472
> 
> 赞同：1
> 
> 时间：2012-06-16T06:54:00.643
> 
> 标签：git, git-svn

我在 git 分支中开发各种功能。当我想通过 git-svn 将我的代码签入 SVN 时，我执行以下操作：

```
git co feature_branch
git svn rebase
git co master
git svn rebase
git merge --no-ff feature_branch
git commit --amend
git svn dcommit 
```

这工作得相当好，除非另一个开发人员在此过程中的任何时候提交给 SVN，在这种情况下：

*   如果在我 rebase feature_branch 和 master 之间进行 SVN 提交，我会得到一个如下所示的日志：

```
*   4e6992a BUG-003 My SVN commit (containing cdb40ba and 3b18ea4)
|\
| * cdb40ba local commit 1
| * 3b18ea4 local commit 2
* | cf8a028 BUG-002 Another developer's SVN commit
|/
* 940c613 BUG-001 Another developer's SVN commit
```

*   如果在我 rebase master 和 之间进行 SVN 提交`svn dcommit`，则后者由于合并问题而失败（在这种情况下，我会进行硬重置并重新开始）

如何在单个原子操作中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:51:59.473

我认为，由于 SVN 的工作方式，git-svn 无法解决这个问题（每个修订创建都是一个单独的事务，但您可以创建一个创建多个修订的事务）。也许您可以使用 SVN 锁来解决它，但是这种方法有其缺点。

Pure Git 将您所有的历史作为您需要的原子操作推送到一起。如果您有权访问您的 SVN 存储库，则可以将 SubGit 安装到其中并使用它将为您的 SVN 存储库创建的 Git 接口（纯 Git 接口，而不是 git-svn）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:03:36.920

我不明白你为什么要与`--no-ff`. 这总是会产生合并提交，我对您的第一个项目符号的理解是您希望避免这样做。

没有办法总是在单个原子操作中做到这一点。特别是，你的第二颗子弹几乎是不可避免的，尽管我认为你不需要回到开始来修复它。

这是我的做法：

1.  查看包含要推送到 Subversion 的提交的分支：`git checkout feature_branch`。

2.  检查我正在提交的内容以及提交到的位置：`git svn dcommit --dry-run`. 我通常会检查将要推出的提交的数量，并验证它们是否被提交到正确的 Subversion 分支。

3.  如果我认为可能会有合并问题，`git svn rebase`. 不过，我通常不会为此烦恼，只有在第 4 步遇到错误时才这样做。

4.  将更改推出：`git svn dcommit`. 如果遇到任何问题，请返回第 3 步。

注意我根本不涉及“master”分支。这大大减少了我需要做的合并量，因此在第 3 步和第 4 步之间其他人的提交可能会妨碍我自己的提交。

# ios - 单例类还是实用类？

> ID：11061480
> 
> 赞同：0
> 
> 时间：2012-06-16T06:55:28.277
> 
> 标签：ios, enums, typedef

我有一个 iOS 应用程序，它使用多个枚举作为有效值，主要是因为我使用一些整数驱动的状态转换表，但也允许较低的内存使用和在 SQLite 中进行索引搜索的能力，我正在使用它后端。

我将所有枚举都放在一个通用的 .h 文件中，该文件包含在许多基于枚举类型创建变量的类中。我还有几种方法可以在许多类中使用。其中一些正在将枚举转换回字符串，其中 typedef 和（人类）语言作为参数。

typedef 之一如下：

```
typedef enum {
    Ben,
    Sen,
    O,
    Biz,
    Siz,
    Onlar
} pronoun_typedef; 
```

还有另一组方法，主要是字符串操作，它们输入几个参数并返回一个`NSString*`or `NSMutableString*`。

我已经将这些移动到不同的类几次，我认为最好的方法可能是创建一个“实用程序”类并将其包含在每个相关类中，并根据需要进行实例化。

这是一个好方法吗？我考虑的另一个选项是创建一个单例，然后将它转发到需要它的每个类。关于使用哪种方法的任何建议，或对其他方法的任何建议？

我知道这是一个与这个和其他一些类似的问题，但我觉得它没有得到最终的回答，所以我想我再问一次。[单例和静态实用程序类](https://stackoverflow.com/questions/5582881/singleton-and-static-utility-classes)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:18:16.530

如果实用程序方法不需要对 self 的引用，我会将它们作为 C 函数定义在与常量相同的模块中。您需要一个包含常量定义和函数声明（原型）的 .h 文件，以及一个定义了函数体的 .c 文件。

如果它需要是一个对象，如果单个实例有意义，则使用单例，如果每个实例都需要其内部数据/状态的私有、独立副本，则使用多个实例。

# android - 从android中输入流类型的arraylist将图像上传到facebook？

> ID：11061491
> 
> 赞同：0
> 
> 时间：2012-06-16T06:58:36.707
> 
> 标签：android, facebook

我可以从 url 创建输入流并将图像成功上传到 facebook。

```
HttpURLConnection conn = (HttpURLConnection) uploadFileUrl.openConnection();
conn.setDoInput(true);
conn.connect();
int length = conn.getContentLength();
imgData = new byte[length];
InputStream is = conn.getInputStream(); 
```

但我正在从捆绑包中获取 Inputstream -

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    int img_pos = extras.getInt("image_pos");
    mInputStream = com.LiveWallapper.LiveWallapperActivity.mInput.get(img_pos);
    System.out.println("input in readbytes++++++++++++++" + mInputStream);
} 
```

并想在 Example.java 中上传图片，例如-

```
params.putString("method", "photos.upload");
params.putByteArray("picture", readBytes(mInputStream));
mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null); 
```

readBytes 方法是——

```
public byte[] readBytes(InputStream inputStream) throws IOException {
    // this dynamically extends to take the bytes you read
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
    // this is storage overwritten on each iteration with bytes

    // we need to know how may bytes were read to write them to the
    // byteBuffer

    int bufferSize = 10000;//i can not getcontent length from inputstream so i give //10000, pls help
    byte[] imgData = new byte[bufferSize];
    int len = 0;

    while ((len = inputStream.read(imgData)) != -1) {
        byteBuffer.write(imgData, 0, len);
    }

    // and then we can return your byte array.
    return byteBuffer.toByteArray();
} 
```

# git - git拒绝密码，仅在以root身份登录时

> ID：11061495
> 
> 赞同：3
> 
> 时间：2012-06-16T06:58:44.690
> 
> 标签：git, ssh, freebsd

## 概括

出于某种原因，当我以 root 身份登录时，git 命令的工作方式不同。例如，当我以普通用户身份登录时，我可以克隆一个存储库，但我不能将同一个存储库克隆到与 root 相同的目录中。

## 例子

普通用户：

```
> git clone git@192.168.1.103:testing
Cloning into 'testing'...
Enter passphrase for key '/home/Matthew/.ssh/id_rsa': 
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 6 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (6/6), done. 
```

（然后我 su 到 root 并删除 repo ...）

根：

```
# git clone git@192.168.1.103:testing
Cloning into 'testing'...
Password:
Password:
Password:
Permission denied (publickey,keyboard-interactive).
fatal: The remote end hung up unexpectedly 
```

## 我的故障排除尝试

起初我认为这是与 ssh 相关的某种问题，但从各种可能的方式进行 ssh-ing 似乎都可以正常工作。（我没有更改设置以使您能够通过 ssh 直接以 root 身份登录。）

## 设置详情

*   我已经为 root 和其他用户生成了 ssh 密钥。
*   我试图将 repos 克隆到的机器正在运行 FreeBSD 9（我刚刚安装了它——试图了解 *nix、托管、系统管理员等）
*   git server 是 mac 上的 gitolite（我已经使用了一段时间没有问题）

## 结论

我有一种感觉，这对于拥有更多 *nix/git 印章的人来说是显而易见的，但到目前为止我还没有弄清楚/在互联网上找到答案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T07:07:31.227

### 问题

请注意，系统不会提示您的普通用户输入密码，但会提示您的超级用户。这是根的私钥没有加载到可访问的 ssh 代理中的一个重要线索。

### 解决方案

在你 su 到 root 之后，你需要启动你的 ssh-agent 并加载你的密钥。例如：

```
sudo su - root
eval `ssh-agent`
ssh-add 
```

如果您的密钥在您的代理中可见，`ssh-add -l`那么您此时应该能够成功克隆。

### 注意事项

由于您在服务器上使用 gitolite，因此您不能使用密码认证——您*必须*使用公钥认证。为了完成这项工作，您还需要确保已将 root 的公钥添加到 gitolite 配置中，并授权 root 用户访问您希望该帐户访问的任何存储库。

# linux - 如何从远程位置打开系统端口（WIN、Linux、Mac）？

> ID：11061497
> 
> 赞同：-4
> 
> 时间：2012-06-16T06:58:49.037
> 
> 标签：linux, networking, network-programming, port

我正在进行研发，需要**从远程位置打开任何端口**；

我的要求和收集的信息如下：

我使用工具 [ ***nmap***等] 来检查（获取列表）远程计算机上打开了哪些端口！我无法打开从我的系统到远程系统的封闭端口。如果任何远程系统端口打开，我可以打开一个端口。

**但是如果所有端口都关闭了，我需要做什么？**远程系统连接在**LAN 中（并且有 Internet）**。**SSH**未安装在远程系统上...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:09:31.940

无法从远程 PC 外部

# c++ - XCB STRING 和 WM_NAME 未定义

> ID：11061507
> 
> 赞同：5
> 
> 时间：2012-06-16T07:00:19.880
> 
> 标签：c++, c, x11, xcb

在哪里`STRING`定义`WM_NAME`？

我的`xcb_atom.h`文件只包含 3 个函数声明，当我期望它看起来像这样时：[http ://www.opensource.apple.com/source/X11libs/X11libs-40/xcb-util/xcb-util-0.3.3/原子/xcb_atom.h](http://www.opensource.apple.com/source/X11libs/X11libs-40/xcb-util/xcb-util-0.3.3/atom/xcb_atom.h)

我也有一个`xcb_ewmh.h`包含类似原子的文件，但我找不到任何文档。

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T14:05:40.523

如另一个答案中所述，符号在`xproto.h`其中被 拖入`xcb.h`，但未像 XCB 教程中那样命名。您需要使用`XCB_ATOM_WM_NAME`和`XCB_ATOM_WM_STRING`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:49:59.643

我grep了我的`/usr/include/xcb`目录：

```
$ grep -r WM_NAME
xproto.h:    XCB_ATOM_WM_NAME 
```

因此，它们被定义在 中`xproto.h`，包括在以下内容中：

```
$ grep -l -r xproto.h
xvmc.h
shape.h
shm.h
xselinux.h
render.h
glx.h
xcb.h
screensaver.h
xtest.h
xkb.h
sync.h
xinerama.h
res.h
composite.h
damage.h
xprint.h
xv.h
xfixes.h
xinput.h
randr.h
dri2.h 
```

# c++ - 使用重载函数将 Python 'int' 提升为 C++ int

> ID：11061509
> 
> 赞同：1
> 
> 时间：2012-06-16T07:00:33.733
> 
> 标签：c++, boost-python

当我收到此错误消息时，我有些惊讶。

```
TypeError: unsupported operand type(s) for <<: 'Packet' and 'int' 
```

我正在尝试做的是通过boost python公开一个类，该类重载`__lshift__`操作数以采用几种不同的对象类型——例如int、float、char *等。我正确地公开了这个类，但是当我尝试类似`packet << 10`我得到的东西时上述错误。

我明白为什么会这样，但我不确定我应该如何解决这个问题。我不能完全有一个 boost::python::object 的重载，因为它无法区分`packet << 10`and `packet << 10.5`。

一种可能的解决方案是将函数公开为`__lshift__`. 然后我可以得到`packet.saveInt(10)`and`packet.saveFloat(10.5)`但这破坏了我们在 python 中都非常钦佩的语法糖。

我的另一个想法是，我可以围绕内置的 int 类型创建一个非常薄的类并将其纳入。

```
struct Int32 {
    Int32(bp::object obj) {
        if (PyInt_Check(obj.get()) {
            value = bp::extract<int>(obj);
        }
        PyErr_SetObject(PyExc_ValueError, obj);
        bp::throw_error_already_set();
    }
    int value;
}

BOOST_PYTHON_MODULE(intwrapper)
{
        bp::class_<Int32>("Int32", bp::init<bp::object>)
            .def("value", &Int32::value);
} 
```

有了这个，我可以做以下事情。`packet << Int32(10)`和类似`packet << Float(10.5)`的。这有点骇人听闻，我希望有更好的方法。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:59:02.817

经过更多调查，我发现问题是我试图通过引用传递一个 int 而 Python 不支持。

我尽力保留语法糖，但最终将不同的运算符 <<() 和运算符 >>() 方法公开为 saveInt32(value)、saveString(value)、loadInt32()、loadString() 等。

# linux - 使用 iptables 规则记录 https 上的所有流量

> ID：11061512
> 
> 赞同：0
> 
> 时间：2012-06-16T07:00:59.070
> 
> 标签：linux, https, router, iptables

我有兴趣记录来自端口 443 的所有流量，以便对我们正在处理的某些连接处理/阻塞进行故障排除。记录所有 https / 端口 443 流量的最佳方式是什么（即使起初在完整性方面有点过分）？

哦...这将记录在网关/路由器上...因此它将记录从 LAN 端进入的所有流量。在这种情况下，不关心 WAN 端 - 只想记录来自 LAN 端的所有**传出流量。**我知道我不会看到它的内容——我只想看到通过 iptables 的连接（源 IP 和目标 IP）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T07:16:33.580

请试试这个。

iptables -I INPUT -i LAN_Interface -s 0.0.0.0/0 -p tcp --dport 443 -j LOG

您将在 /var/log/messages 中看到日志

# sql-server - 如何创建 SCD 2 表的每日更改报告

> ID：11061515
> 
> 赞同：3
> 
> 时间：2012-06-16T07:01:39.087
> 
> 标签：sql-server, tsql, data-warehouse, scd2

我需要生成报告，该报告将显示 SCD 表每天的新/更改行数。

下面是创建表的 SQL：

```
create table #scd(
  code      nvarchar not null
, startdate date     not null
, enddate   date
);
alter table #scd add constraint pk_scd primary key (code, startdate);

insert into #scd values
 ('A', '2012-06-01', '2012-06-02')
,('B', '2012-06-01', '2012-06-02')
,('A', '2012-06-02', '2012-06-03')
,('B', '2012-06-02', '2012-06-04')
,('A', '2012-06-03', '2012-06-04')
,('A', '2012-06-04', null)
,('B', '2012-06-04', null)
,('C', '2012-06-04', null)

select * from #scd 
```

结果如下所示：

```
code    startdate   enddate
A   2012-06-01  2012-06-02
B   2012-06-01  2012-06-02
A   2012-06-02  2012-06-03
B   2012-06-02  2012-06-04
A   2012-06-03  2012-06-04
A   2012-06-04  NULL
B   2012-06-04  NULL
C   2012-06-04  NULL 
```

现在，我需要制作这样的东西：

```
date            new changed
2012-06-01      2   0
2012-06-02      0   2
2012-06-03      0   1
2012-06-04      1   2 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:19:08.697

```
; with
q_00 as ( -- get new records
    select
          code 
        , startdate
    from #scd as s
    where s.startdate = (select MIN(xx.startdate) from #scd as xx where xx.code = s.code)
),
q_01 as ( -- get changed records, those that are not new
    select
          s.code 
        , s.startdate
    from #scd      as s
    left join q_00 as b on b.code = s.code and b.startdate = s.startdate
    where b.code is null
),
q_03 as ( -- get the list of all possible dates
    select distinct 
        startdate
    from #scd
),
q_04 as ( -- count new records per date
    select
          startdate
        , COUNT(1)  as new_rec
    from q_00
    group by startdate
),
q_05 as ( -- count changed records per date
    select
          startdate
        , COUNT(1)  as chn_rec
    from q_01
    group by startdate
)
select
      a.startdate          as OnDate
    , coalesce(new_rec, 0) as new_records
    , coalesce(chn_rec, 0) as changed_records
from      q_03 as a
left join q_04 as b on b.startdate = a.startdate
left join q_05 as c on c.startdate = a.startdate
order by  a.startdate
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:49:50.967

**获得结果的另一种方法**

```
Select A.startdate,isnull(B.cnt,0) [new],(A.Cnt-isnull(B.cnt,0)) [changed]
from
(select startdate,COUNT(*) Cnt from #scd
group by startdate)A
left outer join
(select startdate,COUNT(*) cnt from #scd S1 where code not in
                     (select code from #scd S2 where S2.startdate<S1.startdate)
group by startdate)B
on A.startdate=B.startdate 
```

# mapping - 敲除映射导致stackoverflow

> ID：11061522
> 
> 赞同：2
> 
> 时间：2012-06-16T07:03:42.127
> 
> 标签：mapping, knockout.js

我正在试验淘汰赛和映射插件，想知道为什么这不起作用。我有一个要使用映射扩展加载的视图模型

```
function todoListViewModel(data) {
    ko.mapping.fromJSON(data, { todos: TodoItem.options }, self);
    ko.mapping.fromJSON(data, { todos: TodoItem.options }, self);
} 
```

映射有一个看起来像这样的选项：

```
 var TodoItem = function (options) {
        var todoItem = ko.mapping.fromJS(options.data);

        todoItem.remove = function () {
            alert('remove');
        };

        return todoItem;
    };
    TodoItem.options = {
            create: TodoItem 
    }; 
```

JSON 数据如下所示：

```
{
    "id": "0",
    "todo": "",
    "todos": [
        {
            "todo": "Kevin",
            "isDone": true
        }
    ]
} 
```

对映射的第一次调用成功，但第二次调用失败并出现堆栈溢出：（Chrome 中的“未捕获 RangeError：超出最大调用堆栈大小”）

如果我更改代码以便不将选项传递给映射，则不会引发异常。

我也尝试过将 ToDo 构造函数简化为此

```
var TodoItem = function (options) {
    var todoItem = {};

    return todoItem;
}; 
```

但我仍然得到同样的错误。

看起来我不能这样做，但我想知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:57:43.607

问题在于这一点：

```
TodoItem.options = {
    create: TodoItem 
}; 
```

您正在使用属性“选项”扩展 TodoItem，该属性再次包含 TodoItem - 因此函数 TodoItem 具有包含自身的属性。

```
TodoItem.options.create == TodoItem
TodoItem.options.create.options.create == TodoItem
TodoItem.options.create.options.create.options.create == TodoItem
... 
```

因为它只是一个参考，所以这在 JavaScript 中没有问题。但是淘汰映射插件似乎对该选项对象执行了一些复制操作（或具有相同效果的操作），即它尝试迭代其所有属性并因此以无限循环结束。

您可以通过使用匿名函数作为包装器轻松解决此问题：

```
TodoItem.options = {
    create: function(options) {
        return new TodoItem(options);
    }
}; 
```

# ios - UIScrollView 在缩放或滚动时阻止所有触摸

> ID：11061528
> 
> 赞同：2
> 
> 时间：2012-06-16T07:05:17.763
> 
> 标签：ios, uiscrollview

当 UIScrollView 使用捏合手势或滚动进行缩放时，我无法在同一窗口中按下任何其他按钮。有没有办法启用这种行为？就像滚动视图具有排他性一样（尽管我尝试将其显式设置为`NO`）。我在视图中有一个滚动视图，我希望它仅在用户按住滚动按钮时滚动。否则，用一根手指平移可以徒手绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:27:16.473

正如评论中所指出的，答案是我愚蠢地有一个`exclusiveTouch`在滚动视图的子视图中启用的子视图。

# c# - XNA 3D 程序的正确 OOP 设计是什么？

> ID：11061533
> 
> 赞同：1
> 
> 时间：2012-06-16T07:06:43.297
> 
> 标签：c#, oop, 3d, xna

我想写一个简单的程序。

将有单个场景、一个摄像机和某些 3d 对象。我知道，如何实现这一点，这不是问题。问题是 - 如何在 OOP 原则中设计它。我打算制作一类相机和一类 3d 对象。

我的问题是谁在实现 Draw 方法？我认为相机需要实现draw方法，相机将合成BasicEffect和RasterizerState实例，并实现Update和Draw方法。我还想过什么，3D 对象将获取相机状态和设置并自行绘制，或者会有一些第三方类将获取 3D 对象的顶点和相机设置和状态并绘制所有内容。那么什么是正确的 OOP 设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:16:50.620

我想你可能问错了问题。

大多数时候，“正确的 OOP 原则”不会在游戏开发过程中出现。当然，在编写游戏代码时，如何将事物划分为类是相当明显的，而不是让“封装和所有那些爵士乐”100% 完美。

游戏开发中的“*传统*”方法，*最简单*的说是拥有一个带有虚拟和方法的基类（例如：`GameObject`或）。然后为游戏中的每种对象创建一个类，该类继承自该基类并根据需要覆盖这些方法。`Actor``Draw``Update`

然后，您只需将这些类的实例粘贴到游戏类的列表中，然后循环访问`Game.Draw`并`Game.Update`在每个实例上调用相应的方法。

您可能需要考虑添加除`Draw`and之外的其他方法`Update`。`LoadContent`就是一个很好的例子。

该类`DrawableGameComponent`是这种架构的一个很好的例子（注意它使用内置的`Game.Components`作为它的列表）。我个人不推荐使用 XNA 的组件架构（我提倡自己滚动的方法）。但是，如果您以前从未见过`Draw`/`Update`的东西，那么值得一看。

为了处理你的相机对象，我建议让你的 draw 方法的签名看起来像这样：

```
public virtual void Draw(Camera camera) 
```

这样，每个游戏对象都可以访问相机并知道如何绘制自己。（请注意，这是不可能的`DrawableGameComponent`。）

我强烈建议看一下这个描述可能的游戏架构的[答案- 越来越复杂。](https://stackoverflow.com/a/5459955/165500)特别是它更详细地介绍了“Actor 类”方法以及不同的参与者如何交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:28:49.707

你的问题很广泛。您可以查看[Microsoft App Hub](http://create.msdn.com/en-US/education/catalog/)上的示例。有许多基本示例，还有一些更复杂的示例，例如[Ship Game](http://create.msdn.com/en-US/education/catalog/starterkit/shipgame)和其他几个完整游戏。这可以给你一些想法来思考。

# c# - 如何在 c#.net 中获取 HP Scanner 5590 平板的状态？

> ID：11061537
> 
> 赞同：1
> 
> 时间：2012-06-16T07:08:12.250
> 
> 标签：c#, .net, vb.net, device, status

我的系统上连接了 HP 扫描仪 Scanjet 5590。我想通过 c#.net 了解扫描仪的状态。怎么做？状态是：

开/关、空闲、扫描等。

**更新：**我也尝试过使用 WMI，但它没有检测到它。在 Win-7 的控制面板中，扫描仪显示在头部 DEVICES 下方，而不是头部 PRINTERS 下方。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T07:35:34.390

你可以使用 WMI 来获取这样的信息。请参阅这篇文章[如何在 .NET 中获取打印机信息？](https://stackoverflow.com/questions/296182/how-to-get-printer-info-in-net)作为参考。

**更新：** 尝试搜索 PnP 实体：

```
 ManagementObjectSearcher searcher = new ManagementObjectSearcher("Select * from Win32_PnPEntity");
            ManagementObjectCollection coll = searcher.Get();

            foreach (ManagementObject any in coll)
            {
                   // Check for device name
            } 
```

这应该为您提供所有设备的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:06:44.577

您可以尝试使用 Windows Image Acquisition (WIA) API。WIA 2.0 随 Windows Vista 一起发布，主要针对扫描仪。Windows 7 仍然支持它。不久前，我使用 HP Scanjet 4670 扫描仪对其进行了测试。您的扫描仪应该与 WIA API 兼容。

要访问 WIA 2.0，您需要添加对 COM 库“Microsoft Windows Image Acquisition Library v2.0”的引用。

![在此处输入图像描述](../Images/57dadc48c6d9ffe7e70d4ba36f83d403.png)

添加参考后，您可以枚举 WIA 兼容设备。

```
var deviceManager = new DeviceManager();    
for (int i = 1; i <= deviceManager.DeviceInfos.Count; i++)
{
    var deviceName = 
        deviceManager.DeviceInfos[i].Properties["Name"].get_Value().ToString();

    // Is the device a scanner?
    if (deviceManager.DeviceInfos[i].Type == WiaDeviceType.ScannerDeviceType)
    {
        //...etc.
    }
} 
```

**备注**：请务必将 DeviceInfos 数组视为 1 基数组，而不是从零开始的数组！如果你不这样做，你会得到 COM 异常。

当您在 DeviceInfos[...] 数组中找到您的扫描仪时，您可以连接到它。

```
DeviceInfo deviceInfo = deviceManager.DeviceInfos[1];
deviceInfo.Connect(); 
```

连接好后就可以操作了。让我们扫描图像。

```
// Start the scan   
var item = deviceInfo.Items[1];
var imageFile = (ImageFile) item.Transfer(FormatID.wiaFormatJPEG); 
```

您可以在此处找到有关上述内容的更多信息：

[Windows 图像采集 (WIA)](http://cgeers.com/2011/05/15/windows-image-acquisition-wia/)

使用 WIA API，您至少能够检测扫描仪是否已连接到您的系统并已打开电源。这涉及开/关问题。

您还可以使用 WIA 查询设备属性。

[扫描仪设备属性常量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630195%28v=vs.85%29.aspx)

您可能会对以下设备属性感兴趣：

**WIA_DPS_DOCUMENT_HANDLING_STATUS**：包含扫描仪安装的平板、文档进纸器或双面打印器的当前状态（就绪、卡纸、灯错误...等）。

查询 WIA_DPS_DOCUMENT_HANDLING_STATUS 以检查扫描仪的当前状态。

例如：

```
class WIA_PROPERTIES
{
    public const uint WIA_RESERVED_FOR_NEW_PROPS = 1024;
    public const uint WIA_DIP_FIRST = 2;
    public const uint WIA_DPA_FIRST = WIA_DIP_FIRST + WIA_RESERVED_FOR_NEW_PROPS;
    public const uint WIA_DPC_FIRST = WIA_DPA_FIRST + WIA_RESERVED_FOR_NEW_PROPS;

    // Scanner only device properties
    public const uint WIA_DPS_FIRST = WIA_DPC_FIRST + WIA_RESERVED_FOR_NEW_PROPS;
    public const uint WIA_DPS_DOCUMENT_HANDLING_STATUS = WIA_DPS_FIRST + 13;
}

Property documentHandlingStatus = null;
foreach (Property property in device.Properties)
{
    string propertyName = property.Name;
    string propertyValue = property.get_Value().ToString();

    if (property.PropertyID == WIA_PROPERTIES.WIA_DPS_DOCUMENT_HANDLING_STATUS)
    {
       // ...
    }
} 
```

查看 Microsoft 的 WiaDef.h 头文件以获取这些设备属性常量的值。

[WiaDef.h](http://www.koders.com/c/fid685EF43A9C4BCB6120448A76824B136AD2C57A70.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:42:15.093

```
string printerName = "HP Scanner Scanjet 5590"; 
string query = string.Format("SELECT * from Win32_Printer WHERE Name LIKE '%{0}'", printerName); 
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query); 
ManagementObjectCollection coll = searcher.Get();  
foreach (ManagementObject printer in coll)
{     
    foreach (PropertyData property in printer.Properties)     
    {         
        Console.WriteLine(string.Format("{0}: {1}", property.Name, property.Value));     
    } 
} 
```

# php - 列出 JSON 数组

> ID：11061538
> 
> 赞同：1
> 
> 时间：2012-06-16T07:08:22.027
> 
> 标签：php, javascript, jquery, json

我有一个创建 json 的 php (history.php)

```
$i=1;
 $q=mysql_query("select * from participants where phone='".mysql_real_escape_string($_GET['phone'])."' limit 10");
 while($rs=mysql_fetch_array($q)){
      $response[$i] = $rs['code'];
$i++;   
    }
    print json_encode($response);
    exit; 
```

在js中我访问这个文件：

```
var req=$.get("history.php", { phone: "" + phone + ""},

                        function(data) {
        //data="1":"code1","2":"code2","3":"code3","4":"code4","5":"code5"};
                            var msg = "";
                            for(i=1;i<=5;i++){
                                msg+= "<li>"+data[i];
                            }
                            $(form_message).html(msg);

                        }) 
```

执行此代码后，我的输出是

*   **"***   **1***   **"***   **：***   **"**

*这意味着“数据”不是作为数组传递的。它像字符串一样传递。但是，如果我取消注释 js 中的数据变量，一切正常。输出是：*

**   **代码1***   **代码2***   **代码3***   **代码4***   **代码5**

*你能告诉我从 php.ini 传递数据时我做错了什么吗？*

 *提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:14:27.903

As in your case returned content is interpreted as `text`, not as `json`, you need to use [$.getJSON](http://api.jquery.com/jQuery.getJSON/) instead of `$.get`:

```
var req=$.getJSON("history.php", { phone: "" + phone + ""}, function(data) {
    var msg = "";
    for(var i in data){
        msg+= "<li>"+data[i]+"</li>";
    }
    $(form_message).html(msg);
}); 
```**

# php - 如何使用 PHP cURL 登录亚马逊

> ID：11061543
> 
> 赞同：3
> 
> 时间：2012-06-16T07:08:56.083
> 
> 标签：php, curl, amazon, autologin

我需要使用 PHP cURL（没有 Amazon Web Service）登录到亚马逊页面： [https ://sellercentral-japan.amazon.com/gp/sign-in/sign-in.html/ref=pt_login_lgin_login。](https://sellercentral-japan.amazon.com/gp/sign-in/sign-in.html/ref=pt_login_lgin_login)

这是我如何尝试的代码：

```
const AMAZON_LOGIN_URL = "https://sellercentral-japan.amazon.com/gp/sign-in/sign-in.html/ref=pt_login_lgin_login";

$this->crawler = new crawler();        
// login with Amazon account
$parameters ='protocol=https&action=sign-in&email='.self::AMAZON_USER.'&password='.self::AMAZON_PWD;
$status = $this->crawler->logIn(self::AMAZON_LOGIN_URL, $parameters);

/* in crawler class */
//This is used for login.
function logIn($loginActionUrl, $parameters) {
    $strCookie = 'D:\public_html\project\cookie.txt';

    curl_setopt($this->curl, CURLOPT_URL, $loginActionUrl);
    curl_setopt($this->curl, CURLOPT_POST, 1);
    curl_setopt($this->curl, CURLOPT_POSTFIELDS, $parameters);

    curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($this->curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($this->curl, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($this->curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($this->curl, CURLOPT_HEADER, 0);

    curl_setopt($this->curl, CURLOPT_COOKIEJAR, $strCookie);
    curl_setopt($this->curl, CURLOPT_COOKIEFILE, $strCookie);

    $content = curl_exec($this->curl);
    return $content;
} 
```

作为响应，我收到带有错误消息的登录页面：“您的登录会话已过期。请重新登录。” 并且还会显示此消息：

“未找到

在此服务器上找不到请求的 URL /aan/2009-09-09/static/amazon/iframeproxy-12.html。”

我已经尝试了大多数在网上找到的解决方案。这个解决方案很有希望，但仍然不起作用： [PHP Curl - Cookies 问题](https://stackoverflow.com/questions/7522149/php-curl-cookies-problem) 我已经更改了所需的登录页面 URL 并进行了一些其他更改，但它给出了这个错误：

“尝试执行此操作时出错。请在 15 分钟后重试。” 即使在 15 分钟后，它也会给出相同的错误。

如果有人可以提供帮助，那将是有帮助的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:22:46.973

只是为了标记为答案：
你必须做两件事：

1.  使用 get 方法从服务器请求登录页面
2.  使用新会话和隐藏输入发送登录数据

查看脚本：[https ://stackoverflow.com/a/7532730/889678](https://stackoverflow.com/a/7532730/889678)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-25T04:18:48.647

使用他们的官方 Curl API... 在这里查看 php 示例[http://login.amazon.com/website](http://login.amazon.com/website)

# android - 如何使用 Android 通过 3G 连接到手机

> ID：11061547
> 
> 赞同：2
> 
> 时间：2012-06-16T07:09:43.493
> 
> 标签：android, telephony

我正在 Android 上创建一个移动应用程序，该应用程序需要设备在很远的距离内相互通信。当手机通过 WiFi 连接到互联网时，我可以使用 IP 地址。但是如果它是通过 3G 连接的，我除了电话号码之外什么都没有，我可以通过 SMS 进行通信，但我想使用更好的东西，比如 3G 连接。

那么问题来了，如果 WiFi 不可用，Android 设备如何通过 3G 网络直接连接到另一台设备？

注意：我想到了一个充当代理的服务器，将电话号码映射到 IP 地址，但如果我可以建立一个直接通道，只需使用电话号码作为 3G 上的 ID。

提前感谢任何可以提供任何信息的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:41:33.530

这里：http: [//developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

和： [Google Android - 如何判断 3g 和 2g 是否打开](https://stackoverflow.com/questions/763972/google-android-how-to-figure-out-if-3g-and-2g-is-turned-on)

和： [如何在 Android 应用程序中使用 3G 连接而不是 Wi-fi？](https://stackoverflow.com/questions/2513713/how-to-use-3g-connection-in-android-application-instead-of-wi-fi)

和： [即使数据流量处于活动状态，ConnectivityManager getActiveNetworkInfo() 也始终为空](https://stackoverflow.com/questions/6098639/connectivitymanager-getactivenetworkinfo-is-always-null-even-with-data-traffic)

和： http: [//www.chrisdadswell.co.uk/android-coding-example-checking-for-the-presence-of-an-internet-connection-on-an-android-device/](http://www.chrisdadswell.co.uk/android-coding-example-checking-for-the-presence-of-an-internet-connection-on-an-android-device/)

和： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/net/ConnectivityManager.java#376](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/net/ConnectivityManager.java#376)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:35:33.067

谷歌搜索 3G 网络是如何工作的，我发现出站和入站连接涉及 NATing（NAT Traversal）。通过 WiFi 连接时不需要这样做。因此，在 android+NAT+3G+sockets 上进行一些搜索导致了我对这个问题的回答。

[Android 客户端、PC 服务器套接字不能超过 3g](https://stackoverflow.com/questions/6748435/android-client-pc-server-socket-dont-work-over-3g)

[https://stackoverflow.com/questions/917385/nat-traversal-with-java](https://stackoverflow.com/questions/917385/nat-traversal-with-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T16:05:33.480

我已经使用 Google Play Games Services 来实现这一点，iOS / Android 跨平台也是如此。

您可以根据需要使用实时或回合制 API。 [https://developers.google.com/games/services/common/concepts/realtimeMultiplayer](https://developers.google.com/games/services/common/concepts/realtimeMultiplayer)

# c# - 添加到 ObjectSet 的对象的多态移除 不会在 ObjectSet 上引发 IBindingList.ListChanged .IListSource.GetList()

> ID：11061548
> 
> 赞同：4
> 
> 时间：2012-06-16T07:10:28.280
> 
> 标签：c#, .net, entity-framework, data-binding, polymorphic-associations

**概述/描述**

简单：多态删除从添加到 an 的运行时类型的对象**不会**`TEntity`引发方法`ObjectSet<TEntity>`返回的对象`IBindingList.ListChanged`上的事件。`IBindingList``ObjectSet<TEntity>.IListSource.GetList()`

但是，删除运行时类型**匹配** 的实例会在事件中`TEntity`得到有效通知。`ListChanged`

为了澄清，在任何时候，对象都有效地从底层集合或数据视图/存储中删除，但是当这些对象是严格派生自实际`TEntity`使用的类型的实例时，`ListChanged`不会引发事件来通知它们的删除。

为了对集合的运行时多态性提供适当的数据绑定支持，这只是一个惊人的 BUG。

**复制**

**模型设置**

1.  每个类型策略的表。
2.  实体模型在 Server 2012 Express 上针对生成的 SQL 数据库进行映射和验证。

这是实体层次结构（伪 UML）：

```
FiascoEntityContext : ObjectContext
  + Foos : ObjectSet<Foo>

Foo : EntityObject
  + Id: Int32
  + Name: String

SpecialFoo : Foo
  + SpecialProperty: String 
```

**示范代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Data.Objects;

namespace FiascoEF {
    class Program {
        static void Main(string[] args) {
            using (FiascoEntityContext context = new FiascoEntityContext()) {
                //
                // add some foos
                //
                context.Foos.AddObject(new Foo { Name = "Foo1" });
                context.Foos.AddObject(new BetterFoo { Name = "BetterFoo1", SpecialProperty = "Something Special" });
                context.SaveChanges();
                //
                // show the contents
                //
                Console.WriteLine("Listing all foos:");
                foreach (var foo in context.Foos) {
                    Console.WriteLine("     Got {0}: Id={1} Name={2} (State={3})", foo, foo.Id, foo.Name, foo.EntityState);
                }
                //
                // attach handler for the ListChanged event of the IBindingList returned by context.Foos as IListSource
                // NOTE: have to do this here bacause SaveChanges() above will reset the internal IBindingList
                //
                var bindingList = (context.Foos as IListSource).GetList() as IBindingList;
                bindingList.ListChanged += new ListChangedEventHandler(bindingList_ListChanged);
                //
                // delete all foos and show state. expect the event handler above to be invoked.
                //
                Console.WriteLine("Deleting all foos:");
                foreach (var foo in context.Foos) {
                    context.Foos.DeleteObject(foo);
                    Console.WriteLine("     Deleted {0}: Id={1} Name={2} (State={3})", foo, foo.Id, foo.Name, foo.EntityState);
                }
                context.SaveChanges();
            }
        }

        static void bindingList_ListChanged(object sender, ListChangedEventArgs e) {
            Console.WriteLine("     Event on {0}: {1}", sender, e.ListChangedType);
        }
    }
} 
```

**预期成绩**

```
Listing all foos:
     Got FiascoEF.Foo: Id=257 Name=Foo1 (State=Unchanged)
     Got FiascoEF.BetterFoo: Id=258 Name=BetterFoo1 (State=Unchanged)
Deleting all foos:
     Event on System.Data.Objects.ObjectView`1[FiascoEF.Foo]: ItemDeleted
     Deleted FiascoEF.Foo: Id=257 Name=Foo1 (State=Deleted)
     Event on System.Data.Objects.ObjectView`1[FiascoEF.Foo]: ItemDeleted
     Deleted FiascoEF.BetterFoo: Id=258 Name=BetterFoo1 (State=Deleted) 
```

**实际结果**

```
Listing all foos:
     Got FiascoEF.Foo: Id=257 Name=Foo1 (State=Unchanged)
     Got FiascoEF.BetterFoo: Id=258 Name=BetterFoo1 (State=Unchanged)
Deleting all foos:
     Event on System.Data.Objects.ObjectView`1[FiascoEF.Foo]: ItemDeleted
     Deleted FiascoEF.Foo: Id=257 Name=Foo1 (State=Deleted)
     Deleted FiascoEF.BetterFoo: Id=258 Name=BetterFoo1 (State=Deleted) 
```

**研究**

通过反射器发现实际`IBindingList`返回的是一个类型`ObjectView<TElement>`，并且这个类型将移除操作委托给了一个内部`IObjectViewData<TElement>`。为该接口找到的实现`ObjectViewQueryResultData<TElement>`定义：

```
public ListChangedEventArgs OnCollectionChanged(object sender, CollectionChangeEventArgs e, ObjectViewListener listener) {

    ListChangedEventArgs changeArgs = null;

    if (e.Element.GetType().IsAssignableFrom(typeof(TElement)) && _bindingList.Contains((TElement) (e.Element))) {
        ...
        changeArgs = new ListChangedEventArgs(ListChangedType.ItemDeleted, ...);
        ...
    }

    return changeArgs;
} 
```

支票：

```
if (e.Element.GetType().IsAssignableFrom(typeof(TElement)) && ...) { ... } 
```

似乎是假的......可能是以下意图？

```
if (typeof(TElement).IsAssignableFrom(e.Element.GetType()) && ...) { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:15:06.773

很公平，错误报告给了微软[——http://connect.microsoft.com/VisualStudio/feedback/details/749368](http://connect.microsoft.com/VisualStudio/feedback/details/749368) ......他们似乎已经承认了这个问题，但不清楚他们会做什么。

请记住，我们讨论的是当被视为用于数据绑定的目的时`IBindingList`检索到的实现，因此该事件预计会被触发，就像它在同构列表的情况下一样。`ObjectSet<T>``IListSource`

我通过定义一个继承`ObservableCollection<T>`并包装 的类来打破常规`ObjectSet<T>`，然后在扩展方法`IListSource`的帮助下实现。`DbExtensions.ToBindingList<T>(this ObservableCollection<T>)`

或者，我可以继续并开始`DbContext`完全使用 API，但是定义我自己的 API`ObservableCollection<T>`可以让我现在继续使用`ObjectContext`，这就是我想要的。

# gwt - GWT 中的颜色过滤

> ID：11061549
> 
> 赞同：1
> 
> 时间：2012-06-16T07:10:55.270
> 
> 标签：gwt, colormatrixfilter

有没有办法在 Google Web Toolkit 中进行图像颜色过滤？类似于使用动作脚本 3 的颜色矩阵过滤器。这是动作脚本示例： [AS3：如何将彩色位图的 BitmapData 更改为黑白？](https://stackoverflow.com/questions/1098890/as3how-to-change-a-colored-bitmaps-bitmapdata-to-black-and-white)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:06:49.573

对于 HTML（以及 GWT）中的图像操作，您需要使用 canvas 元素。据我所知，画布没有为您提供应用过滤器的任何快捷方式，您需要手动进入并修改像素。让我们以黑白为例。在调用此方法之前，您需要确保图像已经加载：

```
public void toBlackAndWhite(Image image)
{
    // Create an off-screen canvas element to do the work.
    Canvas canvas = Canvas.createIfSupported();

    // Do nothing if canvas is not supported.
    if (canvas == null)
        return;

    // Size the canvas to fit the image.
    canvas.setCoordinateSpaceHeight(image.getHeight());
    canvas.setCoordinateSpaceWidth(image.getWidth());

    // Pull the image's underlying DOM element
    ImageElement img = ImageElement.as(image.getElement());

    // The 2D context does all the drawing work on the canvas
    Context2d context = canvas.getContext2d();

    context.drawImage(img, 0, 0); // Now the canvas contains the image.

    // ImageData represents the canvas rgba data as an array of bytes.
    ImageData imageData = context.getImageData(0, 0,
                              image.getWidth(), image.getHeight());

    // Now the real work:
    for (int x = 0; x < imageData.getWidth(); ++x) {
        for (int y = 0; y < imageData.getHeight(); ++y) {
             // RGB values are 0-255
             int average = (imageData.getRedAt(x,y) +
                            imageData.getGreenAt(x,y) +
                            imageData.getBlueAt(x,y)) / 3;

             imageData.setRedAt(average, x,y);
             imageData.setGreenAt(average, x,y);
             imageData.setBlueAt(average, x,y);
         }
    }

    // ImageData is a copy of the data on the canvas, so
    // we need to write it back.
    context.putImageData(imageData,0,0);

    // Now the canvas contains a black and white version
    // of the image. Canvas is a Widget so you could attach
    // it to the page directly if you want. Here we're going
    // to replace the contents of the original image element
    // with a url-encoded version of the canvas contents.
    image.setUrl(canvas.toDataUrl());
} 
```

Not quite as elegant as actionscript but it will do the job. As you can imagine this will chew up a good deal of processor time on larger images, if you need better performance you might consider [gwtgl](http://code.google.com/p/gwtgl/).

# c# - Extract decimal from start of string

> ID：11061550
> 
> 赞同：10
> 
> 时间：2012-06-16T07:11:03.607
> 
> 标签：c#, .net

I have a string like `5.5kg` or `7.90gram` and I want to get `5.5` or `7.90` as a decimal value. How can I get such result in C# and one more thing that my string will always starts with decimal.

Here is my code that throws an error whenever it will encounter anything except a decimal.

```
string weight = attributeValue;
if (!string.IsNullOrEmpty(weight))
{
    product.Weight = Convert.ToDecimal(attributeValue);
}
else
{
    product.Weight = 0.00m;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-16T07:18:55.363

我会创建一个匹配前导数字部分的正则表达式。这部分取决于您是否*总是*有小数点，是否允许逗号作为千位分隔符，是否总是`.`用作小数点等。它可能看起来像这样：

```
^-?\d+(?:\.\d+)? 
```

然后将该正则表达式与您的文本进行匹配，获取匹配的值（如果成功）并在该值上使用`decimal.Parse`或`double.Parse`：

```
Regex regex = new Regex(@"^-?\d+(?:\.\d+)?");
Match match = regex.Match(text);
if (match.Success)
{
    weight = decimal.Parse(match.Value, CultureInfo.InvariantCulture);
} 
```

请注意，对于诸如质量之类的“自然”值，使用than*可能*会更好。后者更适合货币等“人工”值，这些值自然最好用十进制表示并具有精确值。这取决于你在做什么。`double``decimal`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:53:39.120

这是一种完全不同的方法

```
 string oldstr = "1.7meter";
        Char[] strarr = oldstr.ToCharArray().Where(c => Char.IsDigit(c) || Char.IsPunctuation(c)).ToArray();
        decimal number = Convert.ToDecimal( new string(strarr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:44:16.177

> 对于您的输入格式，您可以通过此代码获得十进制

```
var weight =Decimal.Parse( Regex.Match(input_string, "[0-9]*\\.*[0-9]*").Value); 
```

> 如果您的输入字符串格式不同，那么您必须更改**正则表达式模式**。

# excel - 在 .net 中使用 SharedStringTable 和 xml sdk 设置文本值

> ID：11061551
> 
> 赞同：3
> 
> 时间：2012-06-16T07:11:04.783
> 
> 标签：excel, vsto, openxml-sdk, vba

我有一段代码（如下）可以在excel中获取特定单元格的文本，但我不知道如何修改此文本以更改单元格文本。

```
public static void UpdateTextCell(string docName, string text, uint rowIndex, 
    string columnName, string sheetName)
{
   // Open the document for editing.
   using (SpreadsheetDocument spreadSheet = SpreadsheetDocument
       .Open(docName, true))
   {
        WorksheetPart worksheetPart = GetWorksheetPartByName(spreadSheet, 
            sheetName);

        if (worksheetPart != null)
        {

          SharedStringTablePart sharedstringtablepart=spreadSheet.WorkbookPart
              .GetPartsOfType<SharedStringTablePart>().First();
          SharedStringTable sharedStringTable = sharedstringtablepart
              .SharedStringTable;
          Cell cell = GetCell(worksheetPart.Worksheet, columnName, rowIndex);
          if (cell.DataType.Value == CellValues.SharedString)
          {
             var value = cell.InnerText;
             value = sharedStringTable.ElementAt(int.Parse(value)).InnerText;
             sharedStringTable.ElementAt(int.Parse(value)).InnerXml
                 .Replace("value", "Modified");
          }
          // Save the worksheet.
          worksheetPart.Worksheet.Save();
        }
   }
} 
```

由于`sharedStringTable.ElementAt(int.Parse(value)).InnerText`是只读的，我尝试使用修改文本字符串，`sharedStringTable.ElementAt(int.Parse(value)).InnerXml.Replace("value", "Modified");`但这也不起作用。

你知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:21:02.907

尝试添加

```
sharedStringTable.Save(); 
```

后

```
sharedStringTable.ElementAt(int.Parse(value)).InnerXml
                 .Replace("value", "Modified"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:00:59.383

Replace 是一个字符串函数，它只返回新字符串。您需要做的就是为 InnerXml 设置新值。

```
sharedStringTable.ElementAt(int.Parse(value)).InnerXml = sharedStringTable.ElementAt(int.Parse(value)).InnerXml
             .Replace("value", "Modified"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-14T12:18:37.253

Replace 的解决方案在文本的情况下存在问题，它也是 xml 的一部分，例如仅包含字母“m”的字符串。然后替换也将替换 m in

< x:t xmlns:x= ... >，使单元格无效。相反，替换确实是 InnerText 的 FirstChild 绕过了可替换文本的限制。

```
sharedStringTable.ElementAt(int.Parse(cell.CellValue.Text)).ReplaceChild(
    new Text("Modified"),  // OpenXmlElement 
    sharedStringTable.ElementAt(int.Parse(cell.CellValue.Text)).FirstChild
); 
```

# php - does anybody know when and where the shipping method in magento is first called

> ID：11061552
> 
> 赞同：2
> 
> 时间：2012-06-16T07:11:07.850
> 
> 标签：php, magento, shipping, rates

Where in magentos php source code is the shipping method rates first called? In other words, when is the shipping methods info (flatrate,tablerate,freeshipping) first extracted from the database into php code? I i want to remove the default shipping methods and render my own shipping method only for testing in the shopping cart.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:31:38.620

Magento 的所有默认运输方法都使用其模型从数据库中提取费率。

例如：如果您想检查 Flatrate 运输方式从哪里提取费率，而不是转到 app/code/core/Mage/Shipping/Model/Carrier/Flatrate.php。

此文件导致从数据库中提取统一运费方法的费率。

谢谢！

# php - Forum not showing HTML from mysql

> ID：11061553
> 
> 赞同：-2
> 
> 时间：2012-06-16T07:11:10.663
> 
> 标签：php, mysql, html, forum

I have another problem with this forum. Everything is working good, just not posting HTML.

When I post threads without any html it shows on the thread view, but if I post stuff with html, bold etc it won't show at all.

Heres the post file

```
<?php

include "connect.php"; //connection string

if(isset($_POST['submit']))

{

   $name=$_POST['name'];

   $yourpost=$_POST['yourpost'];

   $subject=$_POST['subject'];

   if(strlen($name)<1)

   {

      print "You did not type in a name."; //no name entered

   }

   else if(strlen($yourpost)<1)

   {

      print "You did not type in a post."; //no post entered

   }

   else if(strlen($subject)<1)

   {

      print "You did not enter a subject."; //no subject entered

   }

   else

   {

      $thedate=date("U"); //get unix timestamp

      $displaytime=date("F j, Y, g:i a");

      //we now strip HTML injections

      $subject=strip_tags($subject);

      $name=strip_tags($name);

      $yourpost=strip_tags($yourpost); 

      $insertpost="INSERT INTO forumtutorial_posts(author,title,post,showtime,realtime,lastposter) values('$name','$subject','$yourpost','$displaytime','$thedate','$name')";

      mysql_query($insertpost) or die("Could not insert post"); //insert post

      print "Message posted, go back to <A href='index.php'>Forum</a>.";

   }

}

else

{

   print "<form action='post.php' method='post'>";

   print '<input type="hidden" name="name" value="' . $_SESSION[usr_name] . '" size="20"><br>';

   print "Topic title:<br>";

   print "<input type='text' name='subject' size='20'><br>";

   print "Your message:<br>";

   print "<textarea name='yourpost' rows='5' cols='40' id='new_thread'></textarea><br>";

   print "<input type='submit' name='submit' value='submit'></form>";

}

?>
<script language="JavaScript">
  generate_wysiwyg('new_thread');
</script> 
```

And here is the thread view

```
<?php 

include "connect.php"; //mysql db connection here

$id=$_GET['id'];

$gettopic="SELECT * from forumtutorial_posts where postid='$id'";

$gettopic2=mysql_query($gettopic) or die("Could not get topic");

$gettopic3=mysql_fetch_array($gettopic2);

print "<div id='left'>";

print "<div id='navi-body'>";

print "<a href='index.php'>Back to main forum</a> <a href='post.php'>New Topic</a> <A href='reply.php?id=$id'>Reply</a>";

print "</div>";

print "<div class='content'>";

print "<div class='content-header yellow'>$gettopic3[title]</div>";

print "<div class='content-mid'>";

$message=strip_tags($gettopic3['post']);

$message=nl2br($message);

print "$message";

print "<br /><br />";

print "Posted by: $gettopic3[author] Created at: $gettopic3[showtime]";

print "</div>";

print "<div class='content-footer'></div>";

print "</div>";

$getreplies="Select * from forumtutorial_posts where parentid='$id' order by postid desc"; //getting replies

$getreplies2=mysql_query($getreplies) or die("Could not get replies");

while($getreplies3=mysql_fetch_array($getreplies2))

{

   print "<div class='content'>";

   print "<div class='content-header yellow'>$getreplies3[author] replied at $getreplies3[showtime]</div>";

   print "<div class='content-mid'>";

   $message=strip_tags($getreplies3['post']);

   $message=nl2br($message);

   print "$message";

   print "</div>";

   print "<div class='content-footer'></div>";

   print "</div>";

}

print " ";

?> 
```

I want it to show HTML and non html.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:21:10.310

..但是你有 strip_tags() 函数，它从字符串（post）中删除任何 HTML 或 PHP 标记。

```
$message=strip_tags($getreplies3['post']); 
```

您可能希望使用此函数的第二部分并为您希望允许的那些标签添加一些额外的参数。（如粗体、斜体等）

```
$message_with_some_html = strip_tags($getreplies3['post'], '<strong><em>'); 
```

我希望我是对的，请检查 PHP 文档... :)

此外，您可能希望在使用带有 htmlentities() 的客户端输入和一些正则表达式语句来过滤掉可能的攻击之前对 $_POST 变量进行消毒

# java - upcasting - while calling the subcalss object

> ID：11061557
> 
> 赞同：0
> 
> 时间：2012-06-16T07:12:41.993
> 
> 标签：java, casting

A simple upcasting is going on where the sub calss(dog)'s object is referenced by its super class(Animal)...

Why i am not able to call the method 'callme2()'

CODE:-

```
class Animal 
    { 
        public void callme()
        {
            System.out.println("In callme of Animal");
        }

    }

    class Dog extends Animal 
    { 
        public void callme()
        {
            System.out.println("In callme of Dog");
        }

        public void callme2()
        {
            System.out.println("In callme2 of Dog");
        }
    }

    class upcasting
    {
        public static void main (String [] args) throws Exception
        {
            Animal a = new Dog();     
    a.callme(); //-In call me of Dog       
    a.callme2(); // - error why ?
     }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:15:03.127

Because `a` is assigned to superclass `Animal`

You can call the methed as follow:

```
((Dog)a).callme2() 
```

# powershell - New-Item error in powershell

> ID：11061558
> 
> 赞同：2
> 
> 时间：2012-06-16T07:12:42.993
> 
> 标签：powershell

I found this interesting behavior. Why could this happen

I am using the cmdlet New-Item for create a folder. If I write something like this it works

```
New-Item "D:\logeando9091" -type directory 
```

I have a variable of type string. It contains the value of the path where I want the new folder.

Why when Use New-Item with this variable it fails?

```
New-Item $settings.get_Item("LogFolder") -type directory 
```

Here is a screenshot ![enter image description here](../Images/aad4a6b6704932cc245ea374c3f19051.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:49:10.047

无论出于何种原因，您的字符串都包含双引号，所以这当然不起作用。删除它们，您应该会很好：

```
$logFolder = $settings.get_Item("LogFolder") -replace '^"|"$'
mkdir $logFlder 
```

不过，您可能应该修复读取设置的代码。

另一种方法是使用`Invoke-Expression`，但我不推荐它。最好避免它。

# ios - ios - App crashes when InApp mail command gets called

> ID：11061559
> 
> 赞同：3
> 
> 时间：2012-06-16T07:13:35.173
> 
> 标签：ios, delegates, uiactionsheet, mfmailcomposeviewcontroller

When I cll the Message Compose sheet via a UIActionSheet button I get the following error. Sorry these don't mean much to me yet - still learning:-)

Could anyone help please?

These are the sources of problems that come up.

![list that appears when the app crashes.](../Images/9659a3843a2b474bd3030dac3387a3f4.png)

![Green Bar error](../Images/9be861992b3628610f5b8338f9f81f63.png)

This is in the log:

> 2012-06-16 19:10:43.437 Multi Web[2665:4013] XPCProxy received bad message: target did not supply method signature for bodyFinishedDrawing 2012-06-16 19:10:43.489 Multi Web[2665:907] _serviceViewControllerReady:error: Error Domain=XPCObjectsErrorDomain Code=3 "The operation couldn’t be completed. (XPCObjectsErrorDomain error 3.)"

Cheers Jeff

```
 if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;

        NSString *subject = [[NSString alloc] initWithFormat:@"Multi Web - Sending %@.txt", _documentFile];

        [mailer setSubject:subject];

        // Attach an image to the email
        NSString *pathFile01 = [NSString stringWithFormat:_documentTXTPath];
        NSURL *pdfURLFile01 =  [NSURL URLWithString:pathFile01];
        NSData *pdfDataFile01 = [NSData dataWithContentsOfURL:pdfURLFile01];
        NSString *fileName = [[NSString alloc] initWithFormat:@"%@.txt", _documentFile];
        [mailer addAttachmentData:pdfDataFile01 mimeType:@"application/txt" fileName:fileName];

        NSString *emailBody = 
       @"Hi,<br><br>Please find attached the note exported from Multi Web.<br/><br/>Thanks you for using the app.<br/><br/>Kind Regards,<br/>Multi Web Team.";

        [mailer setMessageBody:emailBody isHTML:YES];

        [self presentModalViewController:mailer animated:YES];
    }

    // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];

- (void)mailComposeController:(MFMailComposeViewController*)controller  didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
 {
 switch (result)
 {
    case MFMailComposeResultCancelled:
        NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Mail saved: you saved the email message in the drafts folder.");
        break;
    case MFMailComposeResultSent:
        NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
        break;
    case MFMailComposeResultFailed:
        NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
        break;
    default:
        NSLog(@"Mail not sent.");
        break;
}

// Remove the mail view
[self dismissModalViewControllerAnimated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:30:00.833

正确答案是删除

```
[self dismissModalViewControllerAnimated:YES] 
```

就在 presentModalViewController 方法之后。

您正在崩溃，因为您在模态视图控制器出现后不久就将其关闭，并尝试在回调委托中再次关闭它（已被解除分配）。

您可以在我的帖子中阅读有关如何发送应用内电子邮件的信息。

[http://blog.mugunthkumar.com/coding/iphone-tutorial-in-app-email/](http://blog.mugunthkumar.com/coding/iphone-tutorial-in-app-email/)

# mysql - Drupal MySQL query optimizazion

> ID：11061562
> 
> 赞同：1
> 
> 时间：2012-06-16T07:14:15.523
> 
> 标签：mysql, drupal, optimization

I'm trying to optimize a MySQL query to speed up a Drupal view.

The tables are node, term_node and term_data. Node has about 500k rows, term_node about 800k and term_data about 300k.

Below the query:

```
 SELECT SQL_NO_CACHE DISTINCT(node.nid) AS nid
    FROM drupal_node node
    LEFT JOIN drupal_term_node term_node ON node.vid = term_node.vid
    LEFT JOIN drupal_term_data term_data ON term_node.tid = term_data.tid 
    WHERE (node.status = 1) AND (node.type in ('foto_foto')) 
    AND (
      (UPPER(term_data.name) LIKE UPPER('%Hanaa%') OR 
      UPPER(term_data.name) LIKE UPPER('%Bouchaib%')))
    GROUP BY nid
    LIMIT 0, 10; 
```

This query takes about 11s to show up result. All the columns involved in the join are indexed, as well as term_data.name. node.vid, term_node.vid, term_node.tid and term_data.tid are int(10), term_data.name is a varchar(255).

The strange thing is, running the composing queries like:

```
SELECT SQL_NO_CACHE DISTINCT(term_node.tid)
FROM drupal_term_data term_data
LEFT JOIN drupal_term_node term_node ON term_node.tid = term_data.tid 
WHERE ((UPPER(term_data.name) LIKE UPPER('%Hanaa%') 
  OR UPPER(term_data.name) LIKE UPPER('%Bouchaib%')))
group by term_node.tid 
```

and

```
SELECT SQL_NO_CACHE DISTINCT(node.nid) AS nid
FROM drupal_node node
LEFT JOIN drupal_term_node term_node ON node.vid = term_node.vid
WHERE (node.status = 1) AND (node.type in ('foto_foto')) 
GROUP BY nid 
```

takes 0.23s for the firs and 0.12s for the last. So I'm expecting that the main query should run below 0.5s at least. It's like the optimizer had not ran on the query.

I've already ran ANALYZE and OPTIMIZE on the involved tables, and below is the result of EXPLAIN EXTENDED.

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: node
         type: range
possible_keys: vid,node_status_type,node_type
          key: node_status_type
      key_len: 102
          ref: NULL
         rows: 496217
     filtered: 100.00
        Extra: Using where
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: term_node
         type: ref
possible_keys: PRIMARY,vid
          key: vid
      key_len: 4
          ref: drupal_foto.node.vid
         rows: 7
     filtered: 100.00
        Extra: Using where
*************************** 3\. row ***************************
           id: 1
  select_type: SIMPLE
        table: term_data
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 4
          ref: drupal_foto.term_node.tid
         rows: 1
     filtered: 100.00
        Extra: Using where
3 rows in set, 1 warning (0.00 sec) 
```

The warning provide only a note level warning with code 1003.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:35:00.910

我想保证结果，但这里有一些可以尝试的方法：

1.  因为查询在 term_data 上有一个比较过滤器，所以它不应该使用左连接。将左连接更改为内连接，因为它只会返回每个表中的两个表中的行，这将允许它首先通过术语表。

2.  Distinct 和 group by 是多余的。你不应该两者都需要。使用其中一种。

# java - File Reader only read even number line of file

> ID：11061569
> 
> 赞同：1
> 
> 时间：2012-06-16T07:15:06.410
> 
> 标签：java, filestream

```
public static void main(String[] args) {
    // TODO Auto-generated method stub

    BufferedReader br1 = null;
    try {
        br1= new BufferedReader(new FileReader(new File("D:\\Users\\qding\\Desktop\\spy.log")));
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String str1;
    try {
        while((str1 = br1.readLine()) != null){
            str1 = br1.readLine();
            System.out.println(str1);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally{
        try {
            br1.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

The content of file have nine lines, but the result only show the even number line content, and the last line as null. so why this method only reads the even number line of the file? So strange....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T07:17:45.160

This is because you are invoking `readLine` method twice and each invocation reads a new line from the underlying source (if it exists of course). The solution here is simply to use the `str1` variable from the `while` loop and not invoke the `readLine` for the second time.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T07:18:20.120

In your code

```
while((str1 = br1.readLine()) != null){   // <= 1
    str1 = br1.readLine();                // <= 2
    System.out.println(str1);
} 
```

You are reading a line two times in one loop iteration. Remove line 2 and it will work.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T07:17:49.793

Notice that you read the line twice:
once in the 'while' declaration, and once inside the loop.
Remove the 'str1 = br1.readLine();' in the first line of the 'while' loop.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T07:19:51.380

因为你使用`readLine()`了两次。你应该修改它如下

```
str1 =  br1.readLine();
while(str1 != null){
        System.out.println(str1);
        str1 = br1.readLine();            
    } 
```

# iphone - Free voip server sending PJSIP_INV_STATE_DISCONNECTED to both the devices while call transfer causing call drop

> ID：11061573
> 
> 赞同：0
> 
> 时间：2012-06-16T07:16:26.147
> 
> 标签：iphone, ios4, sip, pjsip, sip-server

We have developed a VOIP client in iphone. Initally we tested it on Asterisk server and call transfer was working fine there.

Now we are using a free SIP server for testing. Now the problem is that when i am doing call transfer through this server, it's sending message PJSIP_INV_STATE_DISCONNECTED to both the end, it should send this message only to that party who are transferring the call. Because of that other end dismissing it's screen.

The problem is that this is the general event for call disconnect, so other end thinks that calling party has disconnected so it also disconnects.

anybody has ever faced such type of issue? Please give me some suggestion.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T08:29:22.620

我只是想回答我自己的问题。实际上这是正常的 SIP 行为。我以错误的方式解释它。谢谢

# c# - C#中的404错误

> ID：11061575
> 
> 赞同：0
> 
> 时间：2012-06-16T07:16:40.323
> 
> 标签：c#, error-handling, http-status-code-404

如何`404 error`在 C# 中手动处理？

我想检查一些条件，`404 error`然后将其重定向到正确的页面。

我知道`web.config`设置，但是您不能检查`web.config`文件中的条件，可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T07:22:04.160

使用 HttpStatusCode 枚举，特别是`HttpStatusCode.NotFound`：

就像是：

```
WebException we;
HttpWebResponse errorResponse = (HttpWebResponse)we.Response;
if (errorResponse.StatusCode == HttpStatusCode.NotFound)
{
    //
} 
```

参考： [如何捕获 404？](https://stackoverflow.com/questions/1949610/c-how-can-i-catch-a-404)

类似的问题：

*   [如何在 .NET 中正确捕获 404 错误](https://stackoverflow.com/questions/2149208/how-to-properly-catch-a-404-error-in-net)

*   [在 .NET 中更好地处理 404](https://stackoverflow.com/questions/1582189/handling-404s-better-in-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:36:24.393

我自己找到了解决方案：

```
var sr = Server.GetLastError() as HttpException;
if (sr.GetHttpCode() == 404)
    ... 
```

# android - Android Layout Weight not working with relative layout

> ID：11061579
> 
> 赞同：6
> 
> 时间：2012-06-16T07:17:21.883
> 
> 标签：android, android-layout, android-intent, android-emulator

![enter image description here](../Images/9cef3c9483ea0e25acd583e0a63cdea4.png)

I am trying to implement layout weight for the first time, a bit I tried with linear layout it works good, but when I tried with relative and linear layout something went wrong. What is wrong here?

My XML File

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/Linearlayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="100" >

<RelativeLayout
    android:id="@+id/Rlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="45" >

    <Gallery
        android:id="@+id/Gallery01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:spacing="4dip" >
    </Gallery>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/Rlayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="10"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY" />

    <ImageView
        android:id="@+id/ImageView02"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY" />
</RelativeLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/navbar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="45"
    android:background="@drawable/button1"
    android:orientation="horizontal"
    android:weightSum="100" >

    <Button
        android:id="@+id/makerback"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="20"
        android:background="@drawable/makerback" />

    <Button
        android:id="@+id/makerphoto"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="20"
        android:background="@drawable/makerphoto" />

    <Button
        android:id="@+id/makerselves"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="20"
        android:background="@drawable/makerselves" />

    <Button
        android:id="@+id/makerskins"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="20"
        android:background="@drawable/makerskins" />

    <Button
        android:id="@+id/makersave"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="20"
        android:background="@drawable/makersave" />
</LinearLayout>

</LinearLayout> 
```

I need to achieve the above image:

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T08:19:02.160

> 您不能使用百分比来定义相对布局中视图的尺寸。最好的方法是使用 LinearLayout 和权重，或自定义布局。-罗曼盖伊

[相对布局中的百分比宽度](https://stackoverflow.com/questions/4961355/percentage-width-in-a-relativelayout)

来自文档：http: [//developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#weight](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#weight)

**更新**

我们现在可以使用[PercentRelativeLayout](http://developer.android.com/reference/android/support/percent/PercentRelativeLayout.html)。来自文档的示例：

```
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        app:layout_widthPercent="50%"
        app:layout_heightPercent="50%"
        app:layout_marginTopPercent="25%"
        app:layout_marginLeftPercent="25%" />

</android.support.percent.PercentFrameLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T03:52:30.447

试试这个：（请注意星号内的变化）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Linearlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <RelativeLayout
        android:id="@+id/Rlayout"
        android:layout_width="fill_parent"
        *android:layout_height="0dp"*
        android:layout_weight="45" >

        <Gallery
            android:id="@+id/Gallery01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:spacing="4dip" >
        </Gallery>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/Rlayout1"
        android:layout_width="fill_parent"
        *android:layout_height="0"*
        android:layout_weight="10"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scaleType="fitXY" />

        <ImageView
            android:id="@+id/ImageView02"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scaleType="fitXY" />
    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/navbar"
        android:layout_width="fill_parent"
        *android:layout_height="0"*
        android:layout_weight="45"
        android:background="@drawable/button1"
        android:orientation="horizontal"
        android:weightSum="100" >

        <Button
            android:id="@+id/makerback"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="20"
            android:background="@drawable/makerback" />

        <Button
            android:id="@+id/makerphoto"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="20"
            android:background="@drawable/makerphoto" />

        <Button
            android:id="@+id/makerselves"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="20"
            android:background="@drawable/makerselves" />

        <Button
            android:id="@+id/makerskins"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="20"
            android:background="@drawable/makerskins" />

        <Button
            android:id="@+id/makersave"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_weight="20"
            android:background="@drawable/makersave" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T07:19:51.287

你不使用那样的重量。尝试

```
<RelativeLayout
    android:layout_height="0dip"
    android:layout_weight=1
    ... /> 
```

例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T10:26:59.073

这可能会用完

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Linearlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"   >

    <RelativeLayout
        android:id="@+id/Rlayout"
        android:layout_width="fill_parent"
        android:layout_height="150dp"  >
        <Gallery
            android:id="@+id/Gallery01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:spacing="4dip"
            android:background="@drawable/ic_launcher">
        </Gallery>
    </RelativeLayout>

    <!-- <RelativeLayout
           android:id="@+id/Rlayout1"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"    
           android:orientation="vertical" >

       <ImageView
          android:id="@+id/ImageView01"
          android:layout_width="fill_parent"
          android:layout_height="250dp"
          android:background="@drawable/ic_launcher"
          android:scaleType="fitXY" />

     </RelativeLayout> -->

    <ImageButton
        android:id="@+id/help"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="15dp"
        android:background="@drawable/ic_launcher" />

    <ImageButton
        android:id="@+id/numbers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@drawable/ic_launcher" />

    <ImageButton
        android:id="@+id/small"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="16dp"
        android:layout_toLeftOf="@+id/numbers"
        android:background="@drawable/ic_launcher" />

    <ImageButton
        android:id="@+id/forword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="14dp"
        android:layout_toRightOf="@+id/numbers"
        android:background="@drawable/ic_launcher" />

    <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="14dp"
        android:background="@drawable/ic_launcher" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-16T17:43:10.633

您可以使用传统的布局层次结构来实现它，但您应该意识到嵌套布局对 UI 性能的负面影响。阅读[了解 ConstraintLayout 的性能优势以](https://android-developers.googleblog.com/2017/08/understanding-performance-benefits-of.html)供参考。

要展平您的布局并使用百分比值，您可以使用 ConstraintLayout 的指南：

[![布局编辑器](../Images/c7a422f807e52b126f1deab76756a9fd.png)](https://i.stack.imgur.com/0wwA5.png)

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="fitXY"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline1"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <ImageView
        android:id="@+id/ImageView02"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:scaleType="fitXY"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline1"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <Gallery
        android:id="@+id/Gallery01"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:spacing="4dip"
        app:layout_constraintBottom_toTopOf="@+id/horGuideline2"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="@+id/horGuideline1" />

    <Button
        android:id="@+id/makerback"
        style="@style/Widget.AppCompat.Button.Borderless"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline1"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="@+id/horGuideline2" />

    <Button
        android:id="@+id/makerphoto"
        style="@style/Widget.AppCompat.Button.Borderless"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline2"
        app:layout_constraintStart_toEndOf="@+id/verGuideline1"
        app:layout_constraintTop_toTopOf="@+id/horGuideline2" />

    <Button
        android:id="@+id/makerselves"
        style="@style/Widget.AppCompat.Button.Borderless"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline3"
        app:layout_constraintStart_toEndOf="@+id/verGuideline2"
        app:layout_constraintTop_toTopOf="@+id/horGuideline2" />

    <Button
        android:id="@+id/makerskins"
        style="@style/Widget.AppCompat.Button.Borderless"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@+id/verGuideline4"
        app:layout_constraintStart_toEndOf="@+id/verGuideline3"
        app:layout_constraintTop_toTopOf="@+id/horGuideline2" />

    <Button
        android:id="@+id/makersave"
        style="@style/Widget.AppCompat.Button.Borderless"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toEndOf="@+id/verGuideline4"
        app:layout_constraintTop_toTopOf="@+id/horGuideline2" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.1" />

    <android.support.constraint.Guideline
        android:id="@+id/horGuideline2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.9" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.2" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.4" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.6" />

    <android.support.constraint.Guideline
        android:id="@+id/verGuideline4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.8" />

</android.support.constraint.ConstraintLayout> 
```

# javascript - How do I hide an element with jQuery using a javascript variable

> ID：11061580
> 
> 赞同：1
> 
> 时间：2012-06-16T07:17:32.573
> 
> 标签：javascript, jquery, hide, show, getelementbyid

I am having trouble hiding this page element with the id below in the html code

```
<table cellspacing=5 cellpadding=3>
  <tr>
    <td id="lst2"><h4>Apple Ipad for sale N70,000 (negotiable)</h4></td>
    <td><a href="unibay.php" class="button edit">EDIT</a></td>
    <td><a href="#" onclick="del('lst1');" class="button cross">DELETE</a></td>
  </tr>
  <tr id="lst2">
    <td><h4>Apple Ipad for sale N70,000 (negotiable)</h4></td>
    <td><a href="unibay.php" class="button edit">EDIT</a></td>
    <td><a href="#" value="list2" onclick="del('lst1');" class="button">DELETE</a></td>
  </tr>
</table> 
```

I want to be able to hide the element with the selected id using jQuery called in a javascript function. Below is the code but its not working:

```
function del(obj) {
    $(document).ready(function(){
        var tdiv = document.getElementById(obj) ;
        var sdiv = "#" + tdiv ;
        $('.button').click(function () {
            $(sdiv).fadeOut('slow');
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:18:42.603

我认为你应该这样做，因为你`obj`包含一个字符串，`id`你的目标，那么下面的方法就足够了。

```
var sdiv = "#" + obj;
$('.button').click(function () {
   $(sdiv).fadeOut('slow');
}); 
```

### 您的代码中的问题

*   `var tdiv = document.getElementById(obj);`行返回一个 DOM 元素。因此，如果您需要在代码中使用它，那么它将如下所示：

    ```
    function del() {
       var tdiv = document.getElementById(obj);
       $('.button').click(function() {
         $(tdiv).fadeOut('slow');
       });
    } 
    ```

在这里，`$(tdiv)`将把你的`tdiv`元素变成一个 jQuery 对象。但`tdiv.fadeOut('slow')`不会工作。

*   而且你不需要`$(document).ready()`在你的`del()`函数中。所以你的代码看起来像：

    ```
    function del(obj) {
        var sdiv = "#" + obj;
        $('.button').click(function () {
          $(sdiv).fadeOut('slow');
        });
     } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:23:19.230

```
$(function() {

    $('.button').click(function () {
        $(this).parent().parent().fadeOut('slow');
    });

}); 
```

您的代码有问题：

*   `document.ready`不应该在函数内部。你把函数放在里面`document.ready`
*   您将 click 事件绑定在一个函数内。这不是必需的，因为您可以`this`在 click 事件中使用来获取单击的元素，然后使用`.parent()`两次来获取`tr`它所属的元素。（一旦得到你`td`，再次得到你`td`的父级`tr`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:54:33.800

在这一行：

```
 var tdiv = document.getElementById(obj); 
```

getElementById() 返回您分配给“tdiv”的 DOM 元素。因此，当您将它连接到“#”字符串时，您实际上是在添加一个字符串 + 一个 DOM 对象（这不起作用）。

有一个简单的解决方法。由于您已经将元素的 id 存储在变量 'obj' 中，因此可以将其连接起来：

```
 var sdiv = "#" + obj;
        $('.button').click(function () {
            $(sdiv).fadeOut('slow');
        }); 
```

其他一些海报指出，您不应将 document.ready() 放在 del 函数中，而应将其放在函数之外。我完全不同意。如果您遵循他们的建议，您的代码将中断，因为“del”函数在全局命名空间中不可用。

# jquery - 获取jQuery中没有子节点的所有元素

> ID：11061594
> 
> 赞同：43
> 
> 时间：2012-06-16T07:19:28.873
> 
> 标签：jquery

我需要选择没有子节点的元素（包括文本，因为在`<p>`文本中是子节点）。

我用过`empty`，但它也将空间视为子节点。

**例子：**

标记：

```
 <span> </span>
 <span></span> 
```

脚本：

```
$("span:empty").html("this was empty!"); 
```

不幸的是，只有第二个元素被选中和更改，因为第一个元素有空间并且它被认为是子节点。

如何选择没有子节点的元素？我想将空间视为虚无。最好，我希望代码不要使用循环来选择它们，可能还有其他方法。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-06-16T07:35:17.353

怎么样

```
$("span:not(:has(*))") 
```

选择没有孩子的所有跨度。

**解释**

选择[`:has()`](http://api.jquery.com/has-selector/)器“选择包含至少一个与指定选择器匹配的元素的元素。” 通配符`*`表示所有元素。

> 如果 a存在于其后代中的任何位置，则表达式`$('div:has(p)')`匹配 a ，而不仅仅是直接子代。`<div>``<p>`

选择[`:not()`](http://api.jquery.com/not-selector/)器“选择所有与给定选择器不匹配的元素。”

在这种情况下，`:has()`选择所有内容，然后我们用它`:not()`来查找与“所有内容”不匹配的元素......换句话说，什么都没有。

[演示](http://jsfiddle.net/WrHtg/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-16T07:22:02.443

```
$.expr[":"]["no-children"] = function( elem ) {
    return !elem.firstChild || !$.trim(""+ elem.firstChild.nodeValue);
};
$("span:no-children").html("this was empty"); 
```

​</p>

[http://jsfiddle.net/k5eTS/6/](http://jsfiddle.net/k5eTS/6/)

jQuery 有一个令人惊讶的“功能” ，可以在我期待的时候`$.trim`转换`null`为. 手动转换为字符串可以解决此问题。`""``"null"`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T07:23:02.070

我想你可以试试这个：

```
$('span').filter(function() {
   return !this.innerHTML.replace(/\s/g,'').length;
}); 
```

**[演示](http://jsfiddle.net/TkfVP/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T07:33:58.727

试试这个

```
$("span").each(function(){
if($(this).text().trim()=='')
$(this).text('Empty');
}); 
```

如果您不喜欢每个功能，那么

```
$("span").html(function(){
if($(this).text().trim()=='')
return 'Empty';
}); 
```

# objective-c - 碰撞后如何恢复 b2Body 状态？

> ID：11061598
> 
> 赞同：0
> 
> 时间：2012-06-16T07:19:55.610
> 
> 标签：objective-c, ios, box2d

我有**两**具尸体。**碰撞后第二个身体消失**，**第**一个必须**继续以**与碰撞前相同的方式移动。

*现在的样子：*

1) 我在 contactListener::BeginContact(..) { } 中检测到碰撞；

2) 保存第二个要删除的物体，第一个恢复它的速度和角度。

3)

```
-(void) update: (ccTime) dt {
int32 velocityIterations = 8;
int32 positionIterations = 1;
_world->Step(dt, velocityIterations, positionIterations);
...
world->DestroyBody(secondBody);
firstBody->SetLinearVelocity(linearVelocityBeforeTouching);
firstBody->SetTransform(firstBody->GetPosition(), angleBeforeTouching );
...
} 
```

*结果，第一个物体向同一方向移动，但它像碰撞后一样旋转*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:17:15.067

当两个物体发生碰撞时，您可以在碰撞侦听器的 PreSolve 中执行 contact->SetEnabled(false) 以取消默认的碰撞响应。

# python - 传递给其他命令时编码更改？

> ID：11061605
> 
> 赞同：2
> 
> 时间：2012-06-16T07:21:18.057
> 
> 标签：python, encoding, character-encoding

我有一个文件，我从`test`. 此文件为 UTF-8。在我的简单示例中，它仅包含丹麦字母“Ø”。

然后我有一个 Python 脚本，它读取这个文件，在这个例子中，只打印每一行。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import codecs
import sys

filename = sys.argv[1]

f = codecs.open(filename, 'r', 'utf-8')

for lines in f:
  print lines 
```

打电话给这个`parse.py`。现在，当我`./parse.py test`在终端中运行时，我得到以下输出：

```
Ø 
```

打电话`./parse.py test | less`给我：

```
Traceback (most recent call last):
  File "./test.py", line 12, in <module>
    print lines
UnicodeEncodeError: 'ascii' codec can't encode character u'\xd8' in position 11: ordinal not in range(128) 
```

我确定我的`test`文件是“UTF-8”：

```
$ file -I test
test: text/plain; charset=utf-8 
```

以及我`$LC_TYPE`是 'UTF-8'

我究竟做错了什么？如何让它工作，以便我可以将输出传递`parse.py`给下一个命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:26:11.380

这可能是less的问题，请参阅[本文](http://www.greenwoodsoftware.com/less/faq.html#intl)以获取一些提示。也许更改 less 的配置会有所帮助。

> 如果您的系统支持非 ASCII 文本的 Unicode UTF-8 编码，就像许多现代系统所做的那样，您应该将您的语言环境设置为包含字符串“UTF-8”或“UTF8”（大写或小写都是ok)，或将 LESSCHARSET 设置为“utf-8”。

好的，这不是问题......所以根据评论更新答案。需要在打印之前对字符串进行编码。[这篇文章](http://boodebr.org/main/python/all-about-python-and-unicode#WHYNOPRINT)给出了原因，总结：需要告诉python如何编码unicode。

# c++ - 如何将 C++/Ogre3D 代码链接到 Haskell

> ID：11061610
> 
> 赞同：1
> 
> 时间：2012-06-16T07:22:21.290
> 
> 标签：c++, haskell, ogre3d

我正在尝试用 C++ 和 Haskell 中的所有其他内容为我的应用程序编写渲染代码。我的 C++ 代码链接到 boost 和 Ogre3D 库。

我正在尝试用 GHC 中的已编译 .o 文件编译/链接我的 Haskell 程序，但无济于事，出现如下错误：

```
undefined reference to `Ogre::Vector3::ZERO' 
```

到目前为止，我想出的链接代码的命令如下：

```
ghc --make Main.hs obj/Debug/BaseApplication.o obj/Debug/Application.o -lstdc++ -L"C:/Ogre/OgreSDK_MinGW_v1-8-0/bin/Debug" -L"C:/Ogre/OgreSDK_MinGW_v1-8-0/bin/Release" -I"C:/Ogre/OgreSDK_MinGW_v1-8-0/include" -I"C:/Ogre/OgreSDK_MinGW_v1-8-0/include/OGRE" -I"C:/Ogre/OgreSDK_MinGW_v1-8-0/include/OIS" -I"C:/Ogre/OgreSDK_MinGW_v1-8-0/boost" -optl-Wl -optl--enable-runtime-pseudo-reloc -optl--enable-auto-image-base -optl--enable-auto-import -optl--add-stdcall-alias -optl-mthreads 
```

它试图链接两个 BaseApplication.o 和 Application.o，我的两个文件，以及 Ogre3D 和 boost 库。它还有一些我从 Code::Blocks 复制的链接器选项。

我知道 Haskell ( [http://hackage.haskell.org/package/hogre](http://hackage.haskell.org/package/hogre) ) 与 Ogre3D 有一个小的绑定，但我是该库的初学者，学习该库的所有资源都是用 C++ 编写的；我不想有将它翻译成 Haskell 的障碍。

如何将外部 C++ 库链接到我的 Haskell 代码？需要明确的是，我在 C++ 例程上使用了 C 包装器，以确保名称不会被编译器破坏，并且我使用的是 FFI。我是否使用了错误的选项来为 Haskell 提供目录，或者我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:50:21.133

您想要的是一项艰巨而繁琐的任务，原因有两个：

*   FFI 仅使用 C，而不是 C++（您可能知道并在上面提到过）
*   为大型 C++ 库编写 C 包装器很痛苦，原因有很多
*   Windows C++ 库经常使用 MS 编译器，例如在 Ogre 中，MS 版本的支持比 gcc 版本更好（这是一个观察，基于一个案例，背后并不是真正的实质性事实）

对于 Ogre，我还编写了一个 haskell 包装器，请参见此处：[http](http://www.hgamer3d.org) ://www.hgamer3d.org 。

它已经包含了很多功能，下一个版本 0.1.9 甚至会包含 CEGUI API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:10:59.040

如果您使用自己的包装器，这里是此类项目的链接：[Low level C Ogre3D Interface](http://code.google.com/p/llcoi/)。

至于“未定义的引用”错误——libker 是正确的，你没有传入 Ogre 库，只有指向它们的路径。尝试添加`-lOgreMain`或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:42:23.120

您不应该使用 GHC（它使用 gcc 而不是 g++）来链接 C++ 代码。

您应该拥有引用 libstdc++.so 并公开 C 接口的自包含 C++ 库 (.so)。GHC 调用 gcc 进行链接，并且不会为内联函数的 vtables 生成正确的符号/代码（它们是在链接时而不是编译时生成的）。Bullet Physics 的 Haskell 绑定遇到了几乎相同的问题，您可能想看看。

Ogre 并不是真的被设计成被包装的，因为它使用了太多 C++ 特定的东西。

# .net - 如何有一个带有图片框的滚动面板？

> ID：11061616
> 
> 赞同：1
> 
> 时间：2012-06-16T07:23:47.853
> 
> 标签：.net, winforms, scroll

我有一个固定在 Windows 窗体的顶部、左侧、右侧、底部的面板。在那个面板里面是一个图片框。该图片框通过 TrackBar 控件（位于同一窗体的另一个面板上，“Dock”属性设置为 Top）上下调整大小，并在每次调整大小时重新居中。图片框有时会变得太宽或太高，以至于面板无法容纳它。如何向面板添加水平和垂直滚动条以允许它“平移”图片框中的图像？我尝试过使用 autoscroll 属性，但我似乎无法让它做任何事情，而且 MSDN 文档有些模糊并列出了一些错误。我已经在堆栈上查看了以前的问题，但找不到任何适合我情况的东西。有任何想法吗？

我正在使用 Visual Studio 2010 和 VB.NET 项目，但 VB.NET 或 C# 建议会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:57:37.483

这种类型的操作没有单一设置，因为当 PictureBox 尺寸小于 Panel 的客户空间时，您希望 PictureBox 居中，但当 PictureBox 尺寸超过 Panel 客户空间的大小时，您希望位置在零点并让滚动条处理视图。

尝试处理面板的调整大小事件，并在调整图片框大小时调用该事件：

```
Private Sub TrackBar1_Scroll(sender As Object, e As EventArgs) Handles TrackBar1.Scroll
  PictureBox1.Size = New Size(64 * TrackBar1.Value, 64 * TrackBar1.Value)
  Panel1.AutoScrollMinSize = PictureBox1.Size
  Panel1_Resize(Panel1, EventArgs.Empty)
End Sub

Private Sub Panel1_Resize(sender As Object, e As EventArgs) Handles Panel1.Resize
  If PictureBox1.Width > Panel1.ClientSize.Width Then
    PictureBox1.Left = Panel1.AutoScrollPosition.X
  Else
    PictureBox1.Left = Panel1.ClientSize.Width / 2 - PictureBox1.Width / 2
  End If

  If PictureBox1.Height > Panel1.ClientSize.Height Then
    PictureBox1.Top = Panel1.AutoScrollPosition.Y
  Else
    PictureBox1.Top = Panel1.ClientSize.Height / 2 - PictureBox1.Height / 2
  End If
End Sub 
```

# mysql - 通过 SSH 隧道的 MySQL 连接

> ID：11061621
> 
> 赞同：28
> 
> 时间：2012-06-16T07:25:25.563
> 
> 标签：mysql, ssh, ssh-tunnel

**我已经在两台服务器A**和**B**之间建立了 SSH 隧道。**B**有 MySQL 服务器，这有效：

```
mysql -h localhost -P 3306 -u user -p 
```

虽然这不是：

```
mysql -h 127.0.0.1 -P 3306 -u user -p 
```

虽然 my.cnf 有以下几行：

```
bind-address        = 127.0.0.1
# Next addr differs slightly, but anyway
bind-address        = 99.99.99.99 
```

现在关于隧道。它连接以下内容：`(A) localhost(9989) -> (B) localhost(3306)` 但是当（在**A**上，端口转发）我做

```
mysql -v -h 127.0.0.1 -P 9989 -u user userdb -p 
```

我明白了`ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0`

当我这样做时

```
mysql -v -h localhost -P 9989 -u user userdb -p 
```

我明白了`ERROR 1045 (28000): Access denied for user 'user'@'localhost' (using password: YES)`

可能是什么原因？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-16T08:55:32.143

这里有三个问题。

1 - 暂时忘记 SSH 隧道

您不能将 MySQL 绑定到多个特定 IP。第一个`bind-address`子句被第二个子句覆盖（因此被忽略）。您的服务器只收听`99.99.99.99`.

`-h localhost`可以连接但不能连接的原因`-h 127.0.0.1`是，在第一种形式中，您实际上不是通过 TCP/IP 连接，而是通过本地套接字。

在你的`my.cnf`for`socket`子句中查找。

删除一个多余`bind-address`的子句。您可能想要使用`bind-address=0.0.0.0`，它指示 MySQL 守护程序侦听*所有*网络接口。

2 - 让我们设置你的 SSH 隧道

你错误的原因对`ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0`我来说并不明显。我*怀疑*SSH 隧道实际上仅在收到连接请求时才建立（在您的情况下，当您运行`mysql`客户端时）。由于您的服务器不监听 127.0.0.1（参见上一段），因此无法建立 SSH 隧道，连接失败，您的客户端将其解释为网络故障。

3 - 为什么`mysql -v -h localhost -P 9989 -u user userdb -p`失败

请张贴输出

*[编辑：刚刚在`...OR host LIKE 'localhost'`下面添加，因为这可能与故障排除有关]*

```
mysql > SELECT user, host FROM mysql.user WHERE user LIKE 'user' OR host LIKE 'localhost'; 
```

（如果需要，将子句`'user'`后的, 替换为实际用户名）`LIKE`

MySQL 访问控制检查用户名/密码 ( `user`) 和连接的来源 ( `host`) 以识别用户。您可能没有创建用户`'user'@'localhost'`。

注意：此时无法从我的位置访问 mysql.com，我无法链接到相关的手册页。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-25T18:13:14.680

我刚刚遇到了这个问题。

在我的情况下，MySQL 服务器配置为`bind-address: 192.168.4.4`. 我最初使用常用`-L 3306:localhost:3306 user@server`字符串设置 SSH 隧道，并从我的计算机连接到`mysql -h 127.0.0.1`.

这不起作用，因为 MySQL 不再监听*0.0.0.0*甚至`"localhost"`（又名 127.0.0.1），只有`192.168.4.4`.

正确的隧道字符串应该是`-L 3306:192.168.4.4:3306 user@server`. 这将告诉远程隧道端使用 MySQL 实际侦听的 IP 连接到 MySQL。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-11-15T20:34:56.043

循序渐进的 SSH 隧道

- - 服务器端 - -

在目标机器（可以通过 IP 或托管域进行寻址）中有配置文件**/etc/mysql/my.cnf**有一行

```
bind-address    = 127.0.0.1 
```

通过控制台确认

```
netstat -tapn |  grep mysql
// tcp    0    0 127.0.0.1:3306     0.0.0.0:*    LISTEN      18469/mysqld 
```

这意味着mysql服务器将只响应来自本地主机的请求

- - 客户端 - -

你有一个使用 cygwin、putty 或 linux_shell 登录的帐户（最终是一个 ssh 密钥）

```
ssh user_name@host_name 
```

创建 SSH 隧道

```
ssh -f -N -L 1000:127.0.0.1:3306    user_name@host_name 
```

这意味着嘿 ssh 创建一个从我键入的机器上的端口 1000 到远程 host_name:3306 的永久连接 .... 127.0.0.1 在这里表示远程 (host_name) 并且不应替换为 localhost 单词，因为这将在 unix（命名）套接字上建立连接，而不是通过 IP ...你会得到*'ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysql.sock' (2)'*尝试共同连接mysql时

-f = 进入后台 -N = 不执行

两种 -f -N 类型的 nohoop - 您可以关闭控制台并且隧道仍然存在

- - 服务器端 - -

```
netstat -tapn |  grep ssh
// tcp  0  0  server_ip:22   clint_ip:port  ESTABLISHED 24915/sshd: user_name 
```

这意味着通过 shh 协议存在永久连接

- - 客户端 - -

```
mysql -h 127.0.0.1 -P 1000 -u mysql_user -pmysql_pass 
```

现在你的（客户端）mysql客户端连接到远程mysql服务器......这里127.0.0.1是客户端机器

相同的工作台，heidiSQL

* * *

如何杀死 ssh 隧道

```
ps fax | grep ssh
kill process_id 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-08T14:58:32.523

就我而言，SSH 守护程序中的配置阻止了隧道。应启用 AllowTcpForwarding。

```
AllowTcpForwarding yes 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-28T11:05:23.583

我在 Windows 上确实遇到了同样的问题（`"Lost connection..."`）（通过 Putty 使用 ssh 隧道时）。我在这里遇到了两个问题：

1.  使用了错误的端口，请仔细检查您是否设置正确
2.  我忘了启用`Putty: Connection > SSH > Tunnels > Local ports accept connections from other hosts`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-19T13:50:53.487

一个简单的步骤对我有用......我会分享这个，所以也许你们中的一些人可以免于头痛。

我的设置

在我的特殊情况下，我有一个在 Ubuntu 上运行的 Percona 服务器，通过 SSH 连接到 MySQL Workbench（在 Windows VM 中）；服务器运行了好几天，然后在处理查询时吐出错误 10060。

什么对我有用

我在 Acquia.com 的一个论坛中发现，在某些情况下，Workbench 不会接受“127.0.0.1”作为主机，因此您必须将其更改为“localhost”。我做到了，并且成功了（奇怪的是，工作台再次要求输入密码，即使密码已经存储，但仍然有效）。

# qt - Game Enabler Ogg Vorbis 播放未正确结束

> ID：11061626
> 
> 赞同：1
> 
> 时间：2012-06-16T07:26:06.283
> 
> 标签：qt, audio, symbian, ogg

我最近发现了[Qt Game Enabler](http://projects.developer.nokia.com/qtgameenabler)库，并想在我使用 Qt 组件的 Symbian 项目中使用它。

我已经成功地抓取了库的音频部分，并且能够播放 Ogg Vorbis 文件，但有一个小问题。当我播放一个文件并且它第一次到达结尾时，它不会回到开头（因为我已将其设置为无限循环），它将返回几秒钟并播放到最后。当它第二次结束时，那是它正确地回到起点并且整个循环再次开始的时候（走到最后，回到几秒钟，再次回到结尾，回到开头，依此类推向前）。

我已经设法找出它决定返回几秒钟的代码中的哪个位置，但不知道足以进行任何更改。

源文件称为 VorbisSource，是一个 GameEnabler::AudioSource。播放音频的相关源码如下：

```
unsigned int channelLength(m_decoder->decodedLength() - 2);
unsigned int samplesToWrite(bufferLength / 2);
unsigned int amount(0);
unsigned int totalMixed(0);

while (samplesToWrite > 0) {
    unsigned int samplesLeft;

    if (m_fixedInc == 0) {
        // No speed set. Will lead to division by zero error if not set.
        setSpeed(GEDefaultAudioSpeed);
    }

    samplesLeft = m_fixedInc > 0 ? channelLength - (m_fixedPos >> 12) :
        (m_fixedPos >> 12);

    // This is how much we can mix at least.
    unsigned int maxMixAmount = (int)(((long long int)(samplesLeft) << 12) /
                             qAbs(m_fixedInc));

    if (maxMixAmount > samplesToWrite) {
        maxMixAmount = samplesToWrite;
    }

    if (maxMixAmount > 0) {
        amount = mixBlock(target+totalMixed * 2, maxMixAmount);

        if (amount == 0) {
            // Error!
            break;
        }

        totalMixed += amount;
    }
    else {
        amount = 0;
        m_fixedPos = m_fixedInc > 0 ? channelLength<<12 : 0; // <------------------------------- THIS IS WHERE THE PROBLEM IS
    }

    // The sample ended. Check the looping variables and see what to do.
    if ((m_fixedPos >> 12) >= channelLength || m_fixedPos <= 0) {
        m_fixedPos += m_fixedInc > 0 ? -((qint64)channelLength << 12) :
            ((qint64)channelLength << 12);

        if (m_loopCount > 0)
            m_loopCount--;

        if (m_loopCount == 0) {
            // No more loops, stop the sample and return the amount of
            // samples already mixed.
            stop();
            break;
        }
    }

    samplesToWrite -= amount;

    if (samplesToWrite < 1)
        break;
} 
```

在某些时候，maxMixAmount 设置为零（我相信它在文件的末尾），而不是结束声音，而是根据这行代码返回几秒钟：

```
m_fixedPos = m_fixedInc > 0 ? channelLength<<12 : 0; 
```

我的第一个想法可能是因为 vorbis 文件的比特率是可变的，而 VorbisSource 并没有预料到它，但是在更改此设置后，会出现同样的问题。我选择哪个文件也没有关系，这是相同的行为。

我的下一个猜测是它移动了错误的数量，但我不知道正确的数量是多少。

如果有帮助，以下是 Game Enabler 的一些输出信息：

```
GE::AudioOut::AudioOut(GE::AudioSource*, QObject*) : 65 : Buffer size:  32768 
virtual void GE::AudioOut::run() : 145 : Starting thread. 
int GE::VorbisDecoder::vorbisInit() : 400 : stb vorbis init complete, used 3527 bytes, error 0 
int GE::VorbisDecoder::vorbisInit() : 408 :    sample_rate: 44100 
int GE::VorbisDecoder::vorbisInit() : 409 :       channels: 1 
int GE::VorbisDecoder::vorbisInit() : 410 : max_frame_size: 2048 
```

先感谢您。

# c# - 水晶报表不显示设计和工具

> ID：11061628
> 
> 赞同：0
> 
> 时间：2012-06-16T07:26:13.227
> 
> 标签：c#, asp.net, crystal-reports

我正在使用 VS 2010 并安装了 Crystal 报表运行时 13_0_1。当我创建一个新的 rpt 时，它没有显示设计和工具，它显示了一些代码。像这样

[![http://i45.tinypic.com/hs6rk3.png](../Images/9a274bd19983f4e8c3a91def5e97f7a9.png)](https://i.stack.imgur.com/ZVwGj.png)

请就此给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:01:35.693

安装 Crystal Report 2007 或从安装 Visual Studio 的位置找到文件夹并搜索 Crystal Report 设置文件。这应该可以解决您的问题。一切顺利。

# android - 应用小部件中的是/否对话框

> ID：11061633
> 
> 赞同：2
> 
> 时间：2012-06-16T07:27:49.887
> 
> 标签：android, database, dialog, widget

我需要在小部件上有一个是/否对话框，允许直接在小部件上按是/否而不启动另一个对话框。基本上在小部件本身上放置一个`yes`和一个`no`按钮。

虽然添加回调 `views.setOnClickPendingIntent(R.id.xxx, pendIntent);`没有问题，但我不知道如何根据用户按下是按钮或否按钮来传递是/否参数。

每次用户按“是”或“否”时，都应该有一个带有答案的数据库更新。

我知道我应该以`IntentService`某种方式使用 a 但我不清楚如何将它连接到小部件的两个按钮。

ps我也将感谢任何提示/链接到示例小部件/应用程序，该示例小部件/应用程序显示了如何最好地设计小部件上这种是/否对话框的布局

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:40:07.223

```
DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which){
        case DialogInterface.BUTTON_POSITIVE:
            //Yes button clicked
            break;

        case DialogInterface.BUTTON_NEGATIVE:
            //No button clicked
            break;
        }
    }
};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
    .setNegativeButton("No", dialogClickListener).show(); 
```

# python - Python RAD（桌面部署）

> ID：11061639
> 
> 赞同：3
> 
> 时间：2012-06-16T07:30:01.140
> 
> 标签：python

如果这个问题被回答了很多次，请原谅我！

如何使用 python 部署桌面应用程序（以 RAD 方式），我的意思是： 1\. 有一个 IDE，我可以创建像虚拟工作室这样的用户界面（gui），您只需***拖放对象***（标签、组合框、单选按钮 .. .) 到表格。

2.编辑该对象（标签，组合框，单选按钮...）背后的代码，例如***当我用鼠标单击按钮时会发生某些事情***。

提前感谢您的回答。（原谅我可能是英国人！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:20:52.750

一个好的、非免费的 IDE 是[Wing](http://wingware.com/doc/howtos/pyqt)

如果您不想为此付费，我建议将带有[PyDev](http://pydev.org/)插件的[Eclipse与](http://www.eclipse.org/)[Qt Creator](http://qt.nokia.com/downloads)结合使用。您需要使用PyQt 附带的脚本将文件从 Qt Creator 转换为 python 代码，但这是一项简单的任务。`pyuic4``.ui`

运行此命令将为您转换。 `pyuic form1.ui > form1.py`

# sql - SQL server 2012 SP_HELPTEXT 额外行问题

> ID：11061642
> 
> 赞同：20
> 
> 时间：2012-06-16T07:31:14.887
> 
> 标签：sql, sql-server, ide, formatting

我正在使用 SQL Server 2012，并且总是`SP_HELPTEXT`用来获取我以前创建的存储过程，在以前版本的 SQL Server 中，这个过程没有问题，但是在 2012 年，我的存储过程带有额外的行，例如，这是我写

```
Create proc SP_Test
as
begin
 Select * 
 from table_ABC
end 
```

现在使用`SP_HELPTEXT`此过程（或任何其他过程）后，我得到了这个输出

```
Create proc SP_Test

as

begin

 Select * 

 from table_ABC

end 
```

是否还有其他人也面临这个问题，或者我是这个星球上唯一一个与这个问题作斗争的人？有没有人知道如何解决这个问题？

我的 SQL 服务器的配置如下（从**Help -> About**复制）

```
Microsoft SQL Server Management Studio          11.0.2100.60
Microsoft Analysis Services Client Tools        11.0.2100.60
Microsoft Data Access Components (MDAC)         6.1.7601.17514
Microsoft MSXML                     3.0 6.0 
Microsoft Internet Explorer             9.0.8112.16421
Microsoft .NET Framework                4.0.30319.269
Operating System                    6.1.7601 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-16T10:06:46.997

如果我`sp_helptext`使用`Results to grid`set 运行，我可以复制此行为，然后将结果从网格复制并粘贴到新查询或任何其他文本编辑器中。

这似乎是对`sp_helptext`以前版本的行为的更改，因为标准网格结果集不显示此效果。

最简单的解决方法是`sp_helptext`使用`Results to text`set ( `Query`-> `Results to`> `Results to text`，shortcut `CTRL`+ `T`.

您可能需要增加每行的最大字符数`Results to text`才能获得您期望的输出 - `Tools`> `Options`> `Query Results`> `Results to text`- 将“每列中显示的最大字符数”设置为最大值 8192。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T14:55:28.830

在我看来，一个更好的解决方法（与使用结果到文本相比）是创建一个 sp_helptext2 存储过程，如下所述：

[http://sql-javier-villegas.blogspot.com/2012/08/a-workaround-for-sphelptext-bug-in-ssms.html](http://sql-javier-villegas.blogspot.com/2012/08/a-workaround-for-sphelptext-bug-in-ssms.html)

注意：如果末尾没有新行，则该解决方案存在遗漏最后一行的错误。更正了 T-SQL：

```
CREATE PROCEDURE [dbo].[sp_helptext2] (@ProcName NVARCHAR(256))
AS
BEGIN
  DECLARE @PROC_TABLE TABLE (X1  NVARCHAR(MAX))

  DECLARE @Proc NVARCHAR(MAX)
  DECLARE @Procedure NVARCHAR(MAX)
  DECLARE @ProcLines TABLE (PLID INT IDENTITY(1,1), Line NVARCHAR(MAX))

  SELECT @Procedure = 'SELECT DEFINITION FROM '+db_name()+'.SYS.SQL_MODULES WHERE OBJECT_ID = OBJECT_ID('''+@ProcName+''')'

  insert into @PROC_TABLE (X1)
        exec  (@Procedure)

  SELECT @Proc=X1 from @PROC_TABLE

  WHILE CHARINDEX(CHAR(13)+CHAR(10),@Proc) > 0
  BEGIN
        INSERT @ProcLines
        SELECT LEFT(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)-1)
        SELECT @Proc = SUBSTRING(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)+2,LEN(@Proc))
  END
  --* inserts last line
  insert @ProcLines 
  select @Proc ;

  SELECT Line FROM @ProcLines ORDER BY PLID
END 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-15T07:56:54.917

Rufo发布的答案仍然产生空白行。最后一行代码的一点改变为我解决了这个问题。这是编辑后的代码：

```
CREATE PROCEDURE [dbo].[sp_helptext2] (@ProcName NVARCHAR(256))
AS
BEGIN
  DECLARE @PROC_TABLE TABLE (X1  NVARCHAR(MAX))

  DECLARE @Proc NVARCHAR(MAX)
  DECLARE @Procedure NVARCHAR(MAX)
  DECLARE @ProcLines TABLE (PLID INT IDENTITY(1,1), Line NVARCHAR(MAX))

  SELECT @Procedure = 'SELECT DEFINITION FROM '+db_name()+'.SYS.SQL_MODULES WHERE OBJECT_ID = OBJECT_ID('''+@ProcName+''')'

  insert into @PROC_TABLE (X1)
        exec  (@Procedure)

  SELECT @Proc=X1 from @PROC_TABLE

  WHILE CHARINDEX(CHAR(13)+CHAR(10),@Proc) > 0
  BEGIN
        INSERT @ProcLines
        SELECT LEFT(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)-1)
        SELECT @Proc = SUBSTRING(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)+2,LEN(@Proc))
  END
 --* inserts last line
 insert @ProcLines 
 select @Proc ;

 --edited here. (where Line<>'')
 SELECT Line FROM @ProcLines where Line<>'' ORDER BY PLID
END 
```

即使这删除了“原始回车符”，但这也更好。我通过 DB 从 SQL 2008 迁移到 SQL 2012，并且在使用 sp_helptext 时，所有存储过程（超过 200 个）在每行代码后都返回了大约 5 个回车符。

上面的代码帮助我解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T21:31:37.500

我写了另一个替代 CrLf 的解决方法：

```
DECLARE @results table ([Text] nvarchar(255))

INSERT @results
Exec sp_helptext spStudyRoleCacheFlushNotificationGet

SELECT REPLACE(REPLACE([Text], CHAR(10), ''), CHAR(13), '')
FROM @results 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-04T21:40:07.990

我一直在使用 Rufo 的解决方案，但我只是意识到当数据库有破折号时它会中断。示例：`[ST-SALES]`。

对于它的价值，这是基于 Rufo 解决方案的更新答案。

```
ALTER PROCEDURE [dbo].[sp_helptext2] (@ProcName NVARCHAR(256))
AS
BEGIN
  DECLARE @PROC_TABLE TABLE (X1  NVARCHAR(MAX))

  DECLARE @Proc NVARCHAR(MAX)
  DECLARE @Procedure NVARCHAR(MAX)
  DECLARE @ProcLines TABLE (PLID INT IDENTITY(1,1), Line NVARCHAR(MAX))

  SELECT @Procedure = 'SELECT DEFINITION FROM ['+db_name()+'].SYS.SQL_MODULES WHERE OBJECT_ID = OBJECT_ID('''+@ProcName+''')'

  insert into @PROC_TABLE (X1)
        exec  (@Procedure)

  SELECT @Proc=X1 from @PROC_TABLE

  WHILE CHARINDEX(CHAR(13)+CHAR(10),@Proc) > 0
  BEGIN
        INSERT @ProcLines
        SELECT LEFT(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)-1)
        SELECT @Proc = SUBSTRING(@Proc,CHARINDEX(CHAR(13)+CHAR(10),@Proc)+2,LEN(@Proc))
  END
  --* inserts last line
  insert @ProcLines 
  select @Proc ;

  SELECT Line FROM @ProcLines ORDER BY PLID
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-31T10:53:56.493

使用下面的查询来获得准确的 SP 查询，没有额外的空格：

```
(SELECT  OBJECT_DEFINITION (OBJECT_ID('SPname' ))) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-17T05:23:03.507

我也面临这个问题的看法。

以下是我用来解决问题的步骤（请注意只是临时修复）

1）选择查询

2）然后右键单击并在查询设计器中打开

3）点击确定

你会注意到所有多余的空格都被删除了。

注意：这仅适用于简单查询，不适用于程序等

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-05T13:23:53.237

有两种解决方案可用于从 sp_helptext 输出中删除多余的空间

1.  转到工具>选项>查询结果>结果到文本（从下拉列表中）
2.  复制 sp_helptext 输出 在 Notepad++ 中粘贴。按 cntl+H 打开查找和替换窗口，输入以下文本以替换为给定图片中的新文本。 [在此处输入图像描述](https://i.stack.imgur.com/YWJ31.jpg)

# optimization - OpenCL 小于等于和布尔向量

> ID：11061643
> 
> 赞同：0
> 
> 时间：2012-06-16T07:31:26.013
> 
> 标签：optimization, opencl

我有一种情况，我通过以下方式解决了：

```
//cube_potentials is float8
//level_vec is float8
//shift_vec is int8 and contains (non-overlapping) bit shifts
int8 shifts = (cube_potentials<=level_vec);
int flag_index = 0;\n"
if (shifts.s0) flag_index |= shift_vec.s0;
if (shifts.s1) flag_index |= shift_vec.s1;
if (shifts.s2) flag_index |= shift_vec.s2;
if (shifts.s3) flag_index |= shift_vec.s3;
if (shifts.s4) flag_index |= shift_vec.s4;
if (shifts.s5) flag_index |= shift_vec.s5;
if (shifts.s6) flag_index |= shift_vec.s6;
if (shifts.s7) flag_index |= shift_vec.s7; 
```

有用。问题是所有那些 if 语句让我厌烦，我也无法想象它们是世界上最快的东西。我想像这样解决它：

```
//Method 1
bool8 less = (bool8)(cube_potentials<=level_vec);
int8 shifts = (int8)(less) * shift_vec;
int flag_index = shifts.s0 | shifts.s1 | shifts.s2 | shifts.s3 | shifts.s4 | shifts.s5 | shifts.s6 | shifts.s7;

//Method 2 (more simply)
int8 shifts = ((int8)(cube_potentials<=level_vec)) * shift_vec;
int flag_index = shifts.s0 | shifts.s1 | shifts.s2 | shifts.s3 | shifts.s4 | shifts.s5 | shifts.s6 | shifts.s7; 
```

问题是 bool8 是*保留*类型，不是真正的类型，所以方法 1 不可用。但是，方法 2 不能正常工作。我怀疑原因与它的第一行有关。<= 在两个浮点向量上，我不知道它返回什么，但大概当它被转换为 int8 时，它不全是 0 和 1。

我的问题是，是否有任何方法可以以更清晰、更并行的方式重写原始代码？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:45:30.950

试试这个。它可能有效：

```
// gives -1 (0xFFFFFFFF) or 0 for when T or F for each comparison:
int8 shifts = cube_potentials <= level_vec;

// leaves only the elements that passed the above compare:
shift_vec &= shifts;

// start combining (with all 8 elements):
shift_vec.lo |= shift_vec.hi;

// keep going (down to the bottom 4):
shift_vec.lo.lo |= shift_vec.lo.hi;

// last one (only considering the bottom two):
int flag_index = shift_vec.lo.lo.lo |= shift_vec.lo.lo.hi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:43:25.430

编辑：好的，第二次尝试：

```
flag_index = dot(shift_vecs, -islessequal(cube_potentials, level_vec)); 
```

不过，我想要一个很好的评论。

*   `islessequal()`应该返回 -1 或 0 来表示 true 和 false。
*   我们取反得到 1 或 0
*   然后我们使用点积对 shift_vecs 中返回 true 的组件求和。

笔记：

*   dot() 通常是硬件指令，所以应该很快。
*   `islessequal()`可以替换为`<=`
*   仅当`shift_vec`由于使用求和而导致位值不重叠（您说它们重叠）时才有效。

# php - Modx - 如何从子文件夹部署到根目录？

> ID：11061645
> 
> 赞同：0
> 
> 时间：2012-06-16T07:31:40.417
> 
> 标签：php, apache, modx, modx-revolution

当我谦卑地提出我的要求时，问候和好消息：D

我刚开始使用 Modx 并用它来重新设计我的网站。

我的旧网站仍然完好无损并且正在运行。

例如，让我们调用旧网站 - www.thisismywebsitefoo.com/

新的基于 MODX 的网站已启动并正在运行。

再次出于示例目的，我们将其称为 - www.thisismywebsitefoo.com/modx

好的，现在我想破坏我的旧网站并让新的 Modx 网站接管......唯一的事情是我不知道如何*正确地*做到这一点。

我想我可以做一些网络服务器设置或使网站指向 modx 暂存目录同时仍显示为 www.thisismywebsitefoo.com

如何从子文件夹部署到根目录？这样做的正确方法是什么？

=======

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:29:51.533

我正在回答我自己的问题......哇哦！

我在 bluehost 网站上找到了一篇好文章。对于那些使用 CPanel 的网站，有一种方法 - [http://www.bluehost.com/cgi/help/347](http://www.bluehost.com/cgi/help/347)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T20:52:37.713

备份网站。

更改配置中的路径并使用该站点。

通过 Apache .htaccess 和其他方式强制重定向只会减慢站点速度并增加服务器的整体负载。

参考资料： [http ://forums.modx.com/thread/70111/moving-modx-site-from-sub-folder-to-root-folder#dis-post-392762](http://forums.modx.com/thread/70111/moving-modx-site-from-sub-folder-to-root-folder#dis-post-392762)

[https://rtfm.modx.com/revolution/2.x/administering-your-site/moving-your-site-to-a-new-server](https://rtfm.modx.com/revolution/2.x/administering-your-site/moving-your-site-to-a-new-server)

# c - 将带有双数的字符串转换为双数

> ID：11061648
> 
> 赞同：3
> 
> 时间：2012-06-16T07:32:22.017
> 
> 标签：c

我有字符串`temp[256]`，里面有一个双数，诸如此类`0.125`，虽然有时它得到的数字对于双数来说太大了，比如`0.888888888888888888888888888888888888888883`，而双数只包含 7 个数字而不是全部。

我一直在使用`atof`将字符串转换为双精度，但我认为问题出在这里的双精度，因为它没有足够的空间容纳所有数字......这就是我写的：

```
char temp[256]; // Has the number inside it
double temp_num = 0; // need to put the string inside this variable
temp_num = atof(temp);
printf ("%f\n", temp_num); 
```

只要数字不大于零后的 7 位数字，打印的输出就可以了，但如果它是`0.8815818188888888888888888888888888888888888888888143`一个`8815818`像整数...所以我想我需要一个更大的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:37:13.360

在处理双精度或浮点数时，Printf 具有默认行为，即在零后仅打印 7 位数字，但是您可以更改该行为并控制在零 printf 之后打印多少个数字，如下所示

```
printf ("%.20f\n", temp_num); 
```

在这里，您在零之后得到 20 位数字。

更多详情请参考：

1.  [http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)
2.  c编程语言第二版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:38:47.550

两个问题：

1）我更喜欢[“sscanf()”](http://linux.die.net/man/3/sscanf)而不是“atof()”：它允许您检查转换错误（即非法数字）。

2）正如[刚才](http://en.wikipedia.org/wiki/Dirk_Gently%27s_Holistic_Detective_Agency) 所说，您可以[“格式化”](http://www.dgp.toronto.edu/~ajr/209/notes/printf.html)任何浮点值 - 使用“格式字符串”限制#/digits等。

# java - 在android中重复计时器任务间隔的最佳方法

> ID：11061649
> 
> 赞同：0
> 
> 时间：2012-06-16T07:32:23.617
> 
> 标签：java, android, timer, intervals

在我的 android 应用程序中，一个计时器以 X 间隔运行（重复）。现在我想更改计时器间隔。为此，我是否需要取消计时器并使用我的新频率创建新计时器？如果是，有什么方法可以更改计时器间隔而不取消它？

目前，我通过取消并创建具有新间隔的新计时器来更改计时器间隔。但有时它会给我带来问题。取消计时器后，它不会变为空。

我想知道改变重复定时器任务间隔的最佳方法是什么？如果我喜欢上面，会有任何内存泄漏吗？

# .htaccess - htaccess url'重定向和重写

> ID：11061651
> 
> 赞同：0
> 
> 时间：2012-06-16T07:33:56.957
> 
> 标签：.htaccess, redirect, url-rewriting

希望有人可以帮助我，因为我完全不喜欢 .htaccess 调整。

我正在开发一个基于 php 的网站。在这个网站上，我包含基于查询字符串的特定页面

例如：**index.php?q=somePage。**

在 .htaccess 我寻找例如：**/somepage/**并告诉服务器加载**q=somePage**。完成此操作后，服务器会从 url 中删除所有其他查询字符串，因此它不会传递它们。

现在的问题是，有没有办法设置 .htaccess 来捕获**[q]**参数并传递所有其他查询字符串（服务器端）？

例如：如果我调用**/somepage¶meter=someparameter**或**/somepage/¶meter=someparameter**服务器会将 url 重写为**/somepage/**但调用页面（服务器端），如下所示：

**index.php?q=somePage¶meter=someparameter**

这是我的 htaccess 现在的样子：

```
Options +SymLinksIfOwnerMatch
RewriteEngine on
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?q=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?q=$1 
```

如果不是，我想我只需将参数存储在会话中并以这种方式传递它们。但我希望有人可以提供帮助:)

*PS：如果您知道一本书涉及 htaccess 并且可以将我从完整的 n00b 带到专家，如果您能指出我正确的方向，那将是史诗般的。正则表达式实际上也是如此；）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:38:33.037

通常很多框架将*解析请求* 的逻辑移到PHP**内部**

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\?*$ index.php/$1 [L,QSA] 
```

如果 URL 不能识别文件或 e 目录，则将其传递给 index.php

编辑您可以查看[http://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)以了解 regexp 的介绍，但建议 htaccess 将所有参数传递给索引 PHP。

使用*phpinfo();* 看看你的请求是如何被 PHP 看到的

根据您的要求，**index.php**

```
<?php
phpinfo(); 
```

这里有一些你可以尝试的查询（我想你的代码在 localhost 的根目录上）：

```
http://localhost/
http://localhost/test
http://localhost/a/b
http://localhost/?p1=v1&p2&v2&p3&p4
http://localhost/a/b?p1=v1&p2&v2&p3&p4
http://localhost/a/b/?p1=v1&p2&v2&p3&p4 
```

# jquery - 需要在jqgrid中显示默认的排序列图标

> ID：11061653
> 
> 赞同：1
> 
> 时间：2012-06-16T07:34:29.880
> 
> 标签：jquery, jqgrid

我必须在 Jqgrid 中显示排序列图标。我自己在这里找到了答案。我试过了，现在我可以看到所有可排序列标题上的排序图标，但默认排序列没有显示突出显示的图标。

这是我的脚本：

```
var $tempX= $(divId), colModel, sortName;

    jQuery(divId).jqGrid({
        datatype: "local",
        height: 250,
        width:1000,
        colNames:eval(colNamesVal),
        colModel:eval(colModelVal),
        rowNum:35, 
        rowList:[35,60,100,1000000000],
        rownumbers: true,
        rownumWidth:50,
        height:"auto",
        pager: '#pager2',
        ignoreCase: true,
        //altRows:true,
        pagination:true,
        headertitles:true,
        sortable:true,
        sortorder: "asc",
        viewrecords: true,
        onSortCol: function (index, idxcol, sortorder) {
            if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                    && this.p.colModel[this.p.lastsort].sortable !== false) {
                // show the icons of last sorted column
                $(this.grid.headers[this.p.lastsort].el)
                    .find(">div.ui-jqgrid-sortable>span.s-ico").show();
                $(this.grid.headers[this.p.lastsort].el).removeClass('sortedColumnHeader');
            }
            $(this.grid.headers[idxcol].el).addClass('sortedColumnHeader');
        },
        loadComplete: function(){
            $("option[value=1000000000]").text('All');
        } 
    });

colModel = $tempX.jqGrid('getGridParam', 'colModel');
    sortName = $tempX.jqGrid('getGridParam', 'sortname');
    $('#gbox_' + $.jgrid.jqID($tempX[0].id) +
        ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
        var cmi = colModel[i], colName = cmi.name;

        if (cmi.sortable !== false) {
            // show the sorting icons
            $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
        } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
            // change the mouse cursor on the columns which are non-sortable
            $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
        }
        if (cmi.name === sortName) {
            $(this).addClass('sortedColumnHeader');
        }
    }); 
```

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:20:37.107

您的意思可能是以下[我的旧答案](https://stackoverflow.com/a/8914163/315935)。[演示](http://www.ok-soft-gmbh.com/jqGrid/ShowAlwaysSortableIcons2.htm)或你使用的[这个。](http://www.ok-soft-gmbh.com/jqGrid/ShowAlwaysSortableIcons1.htm)

您写道，您希望在默认排序列中看到突出显示的图标。要解决问题，您必须`sortname`在网格中有选项。`.sortedColumnHeader > div`定义CSS 设置也很重要。如果您像在[演示](http://www.ok-soft-gmbh.com/jqGrid/ShowAlwaysSortableIcons1.htm)中那样执行此操作，那么一切都会按预期进行。

# ckeditor - 如何隐藏或删除 CKEditor 的“折叠工具栏”按钮？

> ID：11061655
> 
> 赞同：-2
> 
> 时间：2012-06-16T07:34:51.520
> 
> 标签：ckeditor, toolbar

我已经成功设置了 CKEditor 并且效果很好，但是折叠工具栏按钮 (3) 让我很恼火：

![在右下角，有一个带有向上箭头的按钮，用标签 3 圈出。](../Images/86055f8cb3932681f3c1eb385bbf807d.png)

有没有办法隐藏或删除它？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:50:08.330

从这个[来源](http://dev.ckeditor.com/ticket/3960)

您可以在 plugins/toolbar/plugin.js 中轻松禁用它

```
CKEDITOR.replace( 'editor1', 
 {
    toolbarCanCollapse : false
 }
); 
```

或者

```
CKEDITOR.config.toolbarCanCollapse = false; 
```

# php - get_category_link() 没有显示任何内容

> ID：11061663
> 
> 赞同：1
> 
> 时间：2012-06-16T07:35:47.280
> 
> 标签：php, wordpress

我使用以下代码创建了一个自定义侧边栏壁纸侧边栏.php。除了链接之外，一切都显示得很完美。

```
<div id="wallpaper-categories" class="widget widget_categories">
    <h4 class="widgettitle">Wallpaper Categories</h4>
    <ul>
    <?php
        $args = array( 'type' => 'post' , 'taxonomy' => 'wallpaper' , 'order' => 'ASC' , 'orderby' => 'name' );
        $categories = get_categories($args);
        foreach ($categories as $category) {
    ?>
        <li class="cat-item cat-item-<?php echo $category->cat_ID; ?>">
            <a title="<?php echo sprintf( __( "View all posts in %s" ), $category->name ); ?>" href="<?php get_category_link( $category->term_id ); ?>"><?php echo $category->name; ?></a>
        </li>
    <?php
        }
    ?>
    </ul>       
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:41:57.387

试试这样：

```
<?php echo get_category_link( $category->term_id ); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:41:57.853

`get_category_link()`只返回链接，但不打印它。您需要更改`<?php get_category_link($category->term_id) ?>`为`<?php echo get_category_link($category->term_id) ?>`.

在大多数需要打印但不需要打印的情况下，这也是最可能的罪魁祸首，因此`echo`在这种情况下，您应该首先检查缺失。

另外，尝试更改`get_category_link($category->term_id)`为`get_category_link($category->cat_ID)`. 我`get_categories`在 WP Codex use 中看到了该示例`term_id`，但文档`get_category_link`明确指出它希望通过类别 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-31T14:48:48.930

**`wallpaper`** 使分类名称像**`wallpaper_kjdsnjds`**一些独特和随机的，尝试我希望它的工作。

# c# - 限制对象的创建

> ID：11061664
> 
> 赞同：0
> 
> 时间：2012-06-16T07:35:50.620
> 
> 标签：c#, .net, instantiation, encapsulation, access-modifiers

我在这里有一个非常奇怪的问题。我有A类，B类和C类。我想创建B类的对象，它可以创建A类的对象。但是如何限制C类创建A类的对象。

一种方法是在 Class B 中定义 Class A，这样只有 Class B 可以创建 Class A 的实例，Class C 不能访问 Class A。

但是，我认为嵌套是一种错误的方式。

我们有什么办法限制对象的创建吗？是否可以使用属性和反射来帮助限制？如果可能的话，有推荐的方法吗？

请分享你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:38:13.390

您可以将 A 类和 B 类放在一个程序集中，并将 A 类的构造函数标记为内部。

这样，只有该程序集中的类才能创建类 A 的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:47:33.543

您可以将构造函数设为私有，并创建返回 A 实例的结构方法，该方法中的参数将是 B 的实例。

```
public class A
{
  private A (){}

    public static Instance(B BInstance)
    {
       A result = null;
       if (BInstance != null)
       {
         result = new A(); 
         //create here 
       }

       return result;

    }

    } 
```

# wcf - 使用定位器管理全景页面中的多个视图-视图模型对

> ID：11061665
> 
> 赞同：1
> 
> 时间：2012-06-16T07:36:11.393
> 
> 标签：wcf, windows-phone-7, mvvm, viewmodel, mvvm-light

我是 Silverlight/MVVM 的新手。我尝试了一些 MVVM Light 的示例，它看起来很棒。

对于我的场景，我想为每个全景项目创建一个全景页面，显示我的用户控件，一个客户的项目列表。

我已经构建了 usercontrol(view)、viewmodel 和 WCF 服务模型，并且在单个全景项目中运行良好（仅使用第一个客户）。另外，我使用 MIX10 演示中显示的 MVVM Light 的定位器，它使我能够为 Expression Blend 制作设计时数据。

我的 viewmodel 将收到一个客户 ID 参数，然后根据此 ID 与 WCF 交换数据。客户名单也来自WCF。所以我实际上不能在 Locator 的静态构造函数中创建视图模型。

如果视图模型是通过调用Locator在运行时构建的，如何进行数据绑定？

我想到的唯一方法是在usercontrol的构造函数中创建viewmodel对象并使其成为datacontext。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:21:47.707

如果要在 XAML 中保留相同的声明性模型，可以将 CurrentCustomerViewModel 属性放在定位器上，然后在导航到页面之前将属性设置为正确的视图模型。

就个人而言，尽管对于这样的页面，我通常在定位器上放置一个视图模型工厂方法（因此它可以缓存它们等）并从 OnNavigatedTo 方法调用它，就像这样。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    string id = NavigationContext.QueryString["customerID"];
    vm = ViewModelLocator.GetCustomerViewModel(id);
    DataContext = vm;
    base.OnNavigatedTo(e);
} 
```

然后我只使用 Blend 的示例数据功能来处理设计时数据。这种方式还有助于支持将页面固定到开始屏幕，因为这将是应用程序的入口点，而且我不一定有机会设置“CurrentCustomerVM”属性。

# cakephp-1.2 - Cakephp CSS不起作用

> ID：11061671
> 
> 赞同：2
> 
> 时间：2012-06-16T07:36:55.433
> 
> 标签：cakephp-1.2

我的 cakephp 没有加载任何 css、js。我取消了**Configure::write('App.baseUrl',env('SCRIPT_NAME'));行的注释。**在 core.php 中。现在得到所有的 css 和 js，但我缺少控制器。我必须将 index.php 放在 url 中。例如：-http://localhost/myapp/index.php/login 我启用了 mod_rewrite 但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:03:21.737

如果您不使用 mod_rewrite，那么您必须：

A. 取消注释**Configure::write('App.baseUrl', env('SCRIPT_NAME'));** （你说你已经完成了）

B. 删除或禁用你的 3 个 .htaccess 文件（你没有提到这样做......）

/.htaccess

/app/.htaccess

/app/webroot/.htaccess

不要删除文件，只需将它们重命名为例如。.htaccessXXX 以便您以后可以轻松地重新启用它们。还要记住 .htaccess 是隐藏文件 - 如果您还不能在文件浏览器中看到它们，请使用 Google“如何显示隐藏文件”。

C. 您必须在所有 URL 中包含 index.php。例如。[http://www.example.com/index.php/my_controller/my_action](http://www.example.com/index.php/my_controller/my_action)

您还记得第 2 步 - 禁用您的 .htaccess 文件吗？

请记住，如果您想再次重新启用 mod_rewrite，那么您必须撤消以上所有三件事，即注释掉**Configure::write('App.baseUrl', env('SCRIPT_NAME'));** ，启用所有 3 个 .htaccess 文件，并且不再在您的 URL 中包含 /index.php。

但这里最大的问题是，你真的在​​使用 Cakephp 1.2 吗？这个问题已经被标记为 CakePHP 1.2 - 但是现在已经发布了 2.1 版，所以你可能应该使用它。

# c# - 按钮数组上的单击事件

> ID：11061675
> 
> 赞同：1
> 
> 时间：2012-06-16T07:37:43.093
> 
> 标签：c#, asp.net, visual-studio-2008

如何获取最后一次单击面板的对象的名称？诀窍是面板上有一大堆按钮（btn[1] ... btn [200]）。如何检查我是否单击了按钮 b[180] 或 b[11] 甚至在面板之外（无按钮）？按钮也是在页面加载时通过编码生成的。谢谢你。安娜

编辑：谢谢！出现的另一个问题（这生成了一个 NULL 对象引用）：我有一个与 buttonHandler() 处于同一级别的方法，它被命名为 HowManyClicked()，它是从 buttonHandler() 中调用的。在 HowManyClicked() 我想将 Button btn1 = Panel2.FindControl(x) 识别为 Button; 例如，其中 x 是 buttonArray[2,3]。但我总是得到NULL。**按钮数组 buttonArray 在生成它的方法之后是否无法通过名称识别**？

```
 public void buttonHandler(object sender, EventArgs e)
        {
            Button btn = sender as Button;
            //string tt = btn.ToolTip.ToString();
            btn.BackColor = Color.Red;
            statusL.Text = HowManyClicked().ToString();

        }

        public int HowManyClicked()
        {
            int sum=0;
            for (int a = 0; a < 10; a++)
                for (int b = 0; b < 14; b++)
                {
                    string x = "buttonArray[" + a + ", " + b + "]";
                    statusL.Text = x;
                    Button btn1 = Panel2.FindControl(x) as Button;
                    if (btn1.BackColor == Color.Red) sum += 1;

                }
            return sum;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:03:32.350

正如@AVD评论的那样，您可以获取发起回发的按钮来投射发送者对象，您还可以使用按钮对象中的`CommandName`and`CommandArgument`属性（它们通常在按钮位于 a等时使用`Grid`，`DataList`但您可以在这种情况下使用它们如果你需要）：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        var s = Enumerable.Range(1, 10);
        foreach (var item in s)
        {
            var b = new Button();
            b.Text = "My Button " + item.ToString();
            b.CommandName = "custom command";
            b.CommandArgument = item.ToString();
            b.Click += new EventHandler(b_Click);
            this.myPanel.Controls.Add(b);
        }
    }

    void b_Click(object sender, EventArgs e)
    {
        var current = sender as Button;
        this.lblMessage2.Text = "Clicked from array buttons: <br/>Command Name: " + current.CommandName + "<br/>Args: " + current.CommandArgument + "<br/>Button Unique ID: " + current.UniqueID + "<br/>Client ID: " + current.ClientID;
    } 
```

页：

```
<asp:Panel runat="server" ID="myPanel">
</asp:Panel>

<asp:Label ID="lblMessage2" runat="server" /> 
```

此代码生成如下内容：

![在此处输入图像描述](../Images/74cfb033a2758788958fc22dbfe35159.png)

作为附加说明，Microsoft 建议在`PreInit`事件中创建动态控件，或者在您使用母版页的情况下，在`Init`事件中

[来源](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# 已编辑

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.ViewState["count"] = 0;
        }

    }

    protected void Page_Init(object sender, EventArgs e)
    {
        var s = Enumerable.Range(1, 10);
        foreach (var item in s)
        {
            var b = new Button();
            b.Text = "My Button " + item.ToString();
            b.Click += new EventHandler(buttonHandler);
            this.myPanel.Controls.Add(b);
        }
    }

    void buttonHandler(object sender, EventArgs e)
    {
        // update here your control
        var b = sender as Button;
        b.BackColor = Color.Red;
        HowManyClicked();
    }

    private void HowManyClicked()
    {
        var c = (int)this.ViewState["count"];
        c++;
        this.ViewState["count"] = c;
        this.lblMessage2.Text = "Clicked controls: " + this.ViewState["count"].ToString();
    } 
```

这产生了：

![在此处输入图像描述](../Images/d7924e783d697198c4632946b63a88f7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:41:24.010

> 如何获取最后一次单击面板的对象的名称？

单击处理程序的第一个参数返回控件/对象的引用已引发事件。

```
public void buttonHandler(object sender, EventArgs e)
{
   Button btn=sender as Button;
   ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:15:14.560

我刚刚通过重新定义 HowManyClicked() 找到了另一个解决方法，所以我在下面添加它。仍然不确定为什么第一种方法（我的问题中的那个）也不起作用。开始：

```
public int HowManyClicked()
        {
            int sum=0;
            foreach (Control cnt in this.Panel2.Controls)
                if (cnt is Button)
                {
                    Button btn = (Button)cnt;
                    if (btn.BackColor == Color.Red)
                        sum += 1;
                }
            return sum;
           }

        } 
```

谢谢大家！

# c++ - 将二维动态数组传递给我在 C++ 中的类的函数

> ID：11061678
> 
> 赞同：0
> 
> 时间：2012-06-16T07:38:16.330
> 
> 标签：c++, arrays, dynamic

我在将 2d 动态数组传递给我的类的函数时遇到问题。

```
void s::LoadData(long int &Num_Of_InputDataId,
                 long int **PresentData,
                 long int **InputDataId,
                 long int **InputData)
{
    long int b;

    for (long int i=0;i<Num_Of_InputDataId;i++)
    {
        b = InputDataId[i][0];
        for(long int j=0;j<Num_Of_InputDataId;j++)
        {  
           InputData[i][j]=PresentData[b][j]; //error occur here
        } // end of internal for
    } //end of external for
} 
```

主要的：

```
long int Num_Of_InputDataId=10;

long int **PresentData;
PresentData = new long int *[Num_Of_InputDataId];

for (long int ii = 0; ii < Num_Of_InputDataId; ++ii)
    PresentData[ii] = new long int[Num_Of_InputDataId];

long int ** InputDataId;
InputDataId = new long int *[Num_Of_InputDataId];

for (long int ii = 0; ii < Num_Of_InputDataId; ++ii)
    InputDataId[ii] = new long int[2];

long int ** InputData;
InputData = new long int *[Num_Of_InputDataId];

for (long int ii = 0; ii < Num_Of_InputDataId; ++ii)
    InputData[ii] = new long int[Num_Of_InputDataId];

Load.LoadData(Num_Of_InputDataId, PresentData, InputDataId, InputData); 
```

Num_Of_InputDataId、PresentData 和 InputDataId 中的每一个都来自不同的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:48:38.133

对于一些`i`，`InputDataId[i][0]`大于或等于`Num_of_InputDataId`。

因此，当您致电时：

```
b = InputDataId[i][0];
... = PresentData[b][...]; 
```

数组索引`PresentData`越界，导致内存错误和崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:23:51.670

由于您没有给出确切的错误，我将对问题进行常识猜测。b 的值是您的 Id 数组中的一个元素。鉴于这是 a`long int`并且您的代码暗示它是某种 ID 代码（而不是另一个数组的索引），它的值很可能超出了另一个数组的索引范围，`PresentData`这可能会导致您越界访问尝试导致的内存错误。您在代码中将 b 视为一个索引，而它看起来可能不是。

最简单的检查方法是使用调试器单步执行代码（这应该自动成为您确定问题实际问题的第一次尝试），而不是从程序错误报告中猜测。事实上，使用调试器可能比在此处粘贴代码并提出问题所花费的时间更少，因此，如果您还没有使用调试工具，那么您真的应该这样做，因为它将无休止地帮助您。

正如超人的评论所暗示的那样，鉴于您使用 C++，请利用 STL 可以为您做的所有好事并使用向量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T11:15:58.590

正如@Superman 对您的问题发表的评论一样，这里有一个简单的片段，可以让生活变得轻松。

```
#define V(x) std::vector< x>  
typedef V(int)  VI;  
typedef V(VI)  VII; 

void functionDoSomething(VII & arr) {  } 
```

（通过引用传递向量）。通过在代码中使用这样的 typedef，代码的可读性会更好，并且可以轻松定义嵌套结构。

# java - 超级受保护的java

> ID：11061684
> 
> 赞同：0
> 
> 时间：2012-06-16T07:40:21.483
> 
> 标签：java, protected, super, inheritance

关于java继承的问题...

```
class Base {
    private int val = 10;
}

class Derive extends Base{
    public void setVal(int value) {
        super.val = value;
    }
} 
```

既然我们可以在子`private`类中使用`super`关键字来改变超类中的字段，那么为什么要`protected`在超类中声明字段呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T07:41:32.617

你不能那样做。您给出的代码无法编译，除非`Derive`被声明为嵌套类`Base`（这是一种非常罕见的情况）。

您应该收到如下错误：

```
error: val has private access in Base 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T17:29:44.053

检查您的代码，即使您继承了该类，您也永远无法在该类之外访问私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T17:23:20.787

super 是一个引用变量，用于调用父构造函数。

# javascript - 用于查看大图像（地图）的 HTML/Javascript 选项，带有叠加层

> ID：11061687
> 
> 赞同：2
> 
> 时间：2012-06-16T07:40:55.447
> 
> 标签：javascript, html, maps

谁能推荐一个好的 javascript 库来显示和导航 HTML 中的巨大图像？

我需要一种方法让我的用户导航一些自定义地图[1]，其缩放和拖动类似于 Google 地图。我需要离线工作的解决方案，因为我将它嵌入到 iPad html (phonegap) 应用程序 [2]。

实际上，我已经（大部分）使用 PanoJS 进行了这项工作。但是它缺少一种将小部件浮动到地图中的项目上方的方法，例如，在地图的某个区域上浮动一个按钮，单击该按钮可以导航到其他地方。

我能够将我的大图像分割成图块。我只是在寻找比 PanoJS 稍微高级一点的查看器，而不必自己构建它:)

有人有什么想法吗？有些人建议使用 OpenLayers。战争故事？

谢谢，

担

[1] 地图是风格化的，并不映射到现实世界的坐标。[2] 所有图像和图块均随应用程序提供并在本地加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:12:08.067

最后我选择了leaflet.js。这能够给我地图、图层、标记和我需要的其他零碎。( [http://leaflet.cloudmade.com/](http://leaflet.cloudmade.com/) )

在此过程中，我花了很多时间使用 ModestMaps.js。这是一个很棒的图书馆，但水平很低。传单最终成为最好的组合。

感谢大家的帮助。

# jsoup - 如何从一组元素中删除一个元素？

> ID：11061693
> 
> 赞同：4
> 
> 时间：2012-06-16T07:41:52.523
> 
> 标签：jsoup

鉴于以下代码：

**HTML：**

```
<div>a</div>
<div>b</div>
<div>c</div> 
```

**JS：**

```
Document doc = Jsoup.parse(baseHtml);
Elements elements = doc.select("div");
elements.get(1).remove();
// remove doesn't affect elements. why?
elements.size();   // equal 3
// but this works
doc.outerHtml() // <div>a</div><div>c</div> 
```

我必须使用此代码来获取删除的元素吗？好像太啰嗦了。

```
Document doc = Jsoup.parse(baseHtml);
Elements elements = doc.select("div");
elements.get(1).remove();
elements = doc.select("div"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:07:17.463

这应该可以帮助您：

```
public class TestJsoup {

    public static void main(String[] args) {
        try {
            Document doc = Jsoup.connect("http://www.google.ro").get();
            Elements select = doc.select("div");
            System.out.println(select.size());
            select.remove(1);
            System.out.println(select.size());
        } catch (IOException ex) {
            Logger.getLogger(TestJsoup.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T21:17:07.400

你问为什么这不起作用

```
elements.get(1).remove();
// remove doesn't affect elements. why? 
```

答案可以在实现中找到。您在元素上调用的方法是在`Node`类中实现的方法。

```
public void remove() {
    Validate.notNull(this.parentNode);
    this.parentNode.removeChild(this);
} 
```

如您所见，调用`remove()`从父级中删除了此元素（如果您打印文档，您将看到该元素`b`已被删除。但这并不意味着该元素已从该类所`Elements`包含的元素列表中删除。

```
public class Elements implements List<Element>, Cloneable {
    private List<Element> contents; 
```

为了做到这一点，您必须按照@Silviu Burcea 向您展示的方式进行操作，通过调用`remove(int index)`您正在调用以下方法的方法，该方法可以在`Elements`类中实现

```
public Element remove(int index) {
    return ((Element) this.contents.remove(index));
} 
```

尽管牢记在心，但如果您这样做，您唯一要做的就是从`Elements`该类包含的列表中删除第 i 个元素。

检查这些示例

**示例 1：**元素的大小减小，但文档保持不变

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class Main {

    public static void main(String[] args) throws Exception {
        String baseHtml =   "<div>a</div>" +
                            "<div>b</div>" +
                            "<div>c</div>";

        Document doc = Jsoup.parse(baseHtml);
        Elements elements = doc.select("div");
        elements.remove(1);
        System.out.println(doc.outerHtml());
        System.out.println("-----------------------------------");
        System.out.println(elements.size());   
        System.out.println("-----------------------------------");
        System.out.println(doc.outerHtml()); 
    }
} 
```

**示例 2：**元素保持不变，但文档发生了变化

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class Main {

    public static void main(String[] args) throws Exception {
        String baseHtml =   "<div>a</div>" +
                            "<div>b</div>" +
                            "<div>c</div>";

        Document doc = Jsoup.parse(baseHtml);
        Elements elements = doc.select("div");
        elements.get(1).remove();
        System.out.println(doc.outerHtml());
        System.out.println("-----------------------------------");
        System.out.println(elements.size());   
        System.out.println("-----------------------------------");
        System.out.println(doc.outerHtml()); 
    }
} 
```

我希望这有助于消除混乱。

# android - 自定义 ListView 奇怪的行为

> ID：11061694
> 
> 赞同：0
> 
> 时间：2012-06-16T07:41:56.793
> 
> 标签：android, listview, customization

每个人。我的习惯有一种奇怪的行为`ListView`

![在此处输入图像描述](../Images/0640a3539aff5c96b8795c8d71de6f85.png)

`ListView`长于 的分隔符`ListView`。任何人都可以帮助我吗？

这是我的布局文件：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@color/back_button_color" >

        <TextView
            android:id="@+id/message_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="100dp"
            android:layout_marginTop="12dp"
            android:layout_weight="0.93"
            android:text="@string/messages"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/light_gray" />

        <Button
            android:id="@+id/new_message_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="15dp"
            android:layout_marginTop="10dp"
            android:background="@color/back_button_color"
            android:drawableRight="@drawable/compose" />

    </LinearLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:listSelector="@drawable/dialog_list" >

    </ListView>

</LinearLayout> 
```

和 list_row 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white_color" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/ava_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:src="@drawable/ava_background" />

        <TextView
            android:id="@+id/time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:text="TextView" />

        <TextView
            android:id="@+id/name_intelocutor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/ava_image"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/message_body"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/name_intelocutor"
            android:layout_below="@+id/name_intelocutor"
            android:layout_marginTop="5dp"
            android:text="TextView" />

        <ImageView
            android:id="@+id/online_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/name_intelocutor"
            android:layout_margin="5dp"
            android:layout_marginBottom="7dp"
            android:layout_marginLeft="10dp"
            android:layout_toRightOf="@+id/name_intelocutor"
            android:src="@drawable/online_list" />

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:43:10.427

您已将 ListView 的宽度属性提供给 fill_parent。

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:listSelector="@drawable/dialog_list" >

</ListView> 
```

将其更改为包装内容，

```
<ListView
    android:id="@+id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:listSelector="@drawable/dialog_list" >

</ListView> 
```

**更改list_row.xml**中的边距和填充不会影响分隔线长度，因为它认为您的列表占据了屏幕的整个宽度。

# javascript - 检索php中的特殊字符通过ajax发送

> ID：11061696
> 
> 赞同：0
> 
> 时间：2012-06-16T07:43:07.637
> 
> 标签：javascript, php, ajax, special-characters, send

我正在使用 ajax jquery 向 php 发送数据，作为数据我从 ajax 发送一个 url 作为字符串，其中包含特殊字符，即“&”所以我没有得到完整的 url，即我的数据直到 '&' 才检索到休息 id忽略且不显示。

下面是我的 ajax 和 php 代码：

```
dummytest.php

$temp=$_POST['address'];
echo $temp; 
```

test.html (ajax 发送数据)

```
 var send="http//192..../oracle/master.php?result=2&table=1"
    $.ajax({
        type: "POST",
        url: "dummytest.php",
        dataType: "text",
        data: send,
        success: onSuccess,
        error: onError
         }); 
```

我正在发送数据“发送”，即一个 url 作为字符串数据，但我只在我的 php 中接收到“&”，即

```
http//192..../oracle/master.php?result=2 
```

谁能告诉我如何获得完整的数据/网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:52:53.920

您将 URL 作为 POST 请求的整个正文发送，而在 PHP 端，您希望在`address`参数中找到它。您应该`send`在 Javascript 端更改为

```
var send = { address: 'http://...' } 
```

并且 jQuery 将负责在请求正文中对其进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:29:52.650

使用 $(selector).serialize() 方法。serialize() 方法通过序列化表单值来创建一个 URL 编码的文本字符串。

# c# - 在 c# winform 应用程序中使用已安装字体时出现问题

> ID：11061698
> 
> 赞同：3
> 
> 时间：2012-06-16T07:43:27.357
> 
> 标签：c#, .net, winforms, fonts

在我的应用程序中，我希望用户从用户系统中可用的字体列表中选择一种字体，并将该字体设置为richtextbox。我试过了 ：：

```
 System.Drawing.Text.InstalledFontCollection fonts = new System.Drawing.Text.InstalledFontCollection();
        foreach (FontFamily family in fonts.Families)
        {
           comboBox1.Items.Add(family.Name);
        } 
```

和

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        richTextBox1.Font = new Font(comboBox1.SelectedText, 14);
    } 
```

但它改变了文本的默认行为。例如：文本包括粗体和斜体的标题。使用上面的代码设置字体会以常规形式转换文本。我的问题是，可能保持文本的行为与以前一样，而不是通过将粗体文本保持为粗体并以斜体保持斜体来以常规形式更改完整的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:56:00.193

有一个使用字体原型初始化字体的选项。尝试使用 micrsoftsansserif 将字体原型定义为具有所需大小和样式的字体，然后将新字体作为第二个参数传递。msdn 有所有的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:13:42.627

`SelectedText`用于 ComboBox 文本属性的突出显示部分。可能不是你想要的：

```
richTextBox1.Font = new Font(comboBox1.Text, 14); 
```

此外，如果您只希望 RichTextBox 的突出显示部分具有新字体：

```
richTextBox1.SelectionFont = new Font(comboBox1.Text, 14); 
```

如果突出显示的文本的任何部分混合了粗体和斜体以及不同的大小等，RichTextBox 不能很好地保留这些属性。请参阅[更改任何元素时如何保持 RichText 格式（粗体/斜体/等）？](https://stackoverflow.com/q/5325918/719186)

# ios5 - 在 cocos2d 计划方法中访问实例变量崩溃

> ID：11061703
> 
> 赞同：0
> 
> 时间：2012-06-16T07:44:24.783
> 
> 标签：ios5, cocos2d-iphone

对 objC 和 cocos2d 来说很新鲜 :)

我正在关注“用iOS5学习cocos2d游戏开发”，在第4章，有一个“DoodleDrop”游戏。

`GameScene.h`像这样定义一些变量

```
@interface GameScene : CCLayer
{
    CCSprite *player;
    CGPoint playerVelocity;
    CCArray *spiders;
    CGSize screenSize;
    int dropedSpidersCount;
    float duration;
}
    + (CCScene *)scene;
@end 
```

在方法看起来像`GameScene.m`这样`init`

```
- (id)init
{
    if (self = [super init]) {
        duration = 4.0;
        [self createPlayer]; 
        [self createSpiders]; // spiders were inited here.
        [self resetSpiders];
        [self schedule:@selector(chooseSpider:) interval:0.7];
    }
    return self;
} 
```

在里面`chooseSpider`，我无法访问`spiders`，xcode坏了

![在此处输入图像描述](../Images/3113d1b79c6686914808d5bc181cf125.png)

在其他方法中，`spiders`或者`duration`只是表现正常，为什么会发生这种情况？

* * *

**添加了要点代码**

[https://gist.github.com/2940466](https://gist.github.com/2940466)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:04:39.287

检查您的代码后，我建议您尝试此修复：

```
- (void)createSpiders
{
CCSprite *tempSpider = [CCSprite spriteWithFile:@"spider.png"];
CGSize spiderSize = [tempSpider texture].contentSize;
int spiderCount = screenSize.width / spiderSize.width;
spiders = [[CCArray arrayWithCapacity:spiderCount] retain];

for (int i = 0; i < spiderCount; i++) {
    CCSprite *spider = [CCSprite spriteWithFile:@"spider.png"];
    [self addChild:spider];
    [spiders addObject:spider];
}
} 
```

唯一的区别在于：

```
spiders = [[CCArray arrayWithCapacity:spiderCount] retain]; 
```

事实上，如果你不保留你`spiders`的对象，它将在下一次运行循环迭代时自动释放。

旧答案：

如果没有看到更多代码，就不可能确切地说出发生了什么，但似乎在创建蜘蛛和实际执行之间的时间间隔内`chooseSpiders`，您的`spiders`数组被释放了。

作为快速尝试，我建议添加：

```
[spiders retain]; 
```

打电话之前

```
 [self schedule:@selector(chooseSpider:) interval:0.7]; 
```

看看崩溃是否继续发生。

如果您提供更多代码，则可以进一步帮助您。

# c# - 无法使用 xpath 从 XDocument 中提取值

> ID：11061705
> 
> 赞同：1
> 
> 时间：2012-06-16T07:44:58.630
> 
> 标签：c#, .net, xpath

我有一个简单的用户 xml。我有一个`StudentId`，我只需要根据studentid从xml中获取学生姓名。似乎很简单，但我无法使用 xpath 完成它。

这是xml：

```
<Students>
  <Student>
    <StudentId>1</StudentId>
    <StudentName>Mad</StudentName>
  </Student>
  <Student>
    <StudentId>2</StudentId>
    <StudentName>Cad</StudentName>
  </Student>
</Students> 
```

这是我的代码：

```
XDocument xmldoc = XDocument.Load(Server.MapPath("~/xmlsample.xml"));

string StudentId = "2"; // id to be selected

var username = xmldoc.XPathSelectElement("Students/Student/StudentName").Value;// Not sure how to use where condition here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:50:03.677

您只需要按 studentId 进行过滤。应该：

```
var username = xmldoc.XPathSelectElement(String.Format("Students/Student[StudentId={0}]/StudentName", StudentId)).Value; 
```

# java - 如何在标签 xml 或 html 之外精确字符串值，我必须使用 java 将其存储在列表中？

> ID：11061707
> 
> 赞同：2
> 
> 时间：2012-06-16T07:46:03.980
> 
> 标签：java, string, extract

我有类似的字符串

```
String str="<?xml version="1.0" encoding="UTF-8"?><head><heading>Appliance Repairs</heading></head><?xml version="1.0" encoding="UTF-8"?>Appliance Repairs<?xml version="1.0" encoding="UTF-8"?>Air conditioning and refrigeration services<?xml version="1.0" encoding="UTF-8"?>Accountants<?xml version="1.0" encoding="UTF-8"?>Accident Management" 
```

在这里，我只需要提取标签之外的字符串。我在这里需要的输出如下：

```
Appliance Repairs
Appliance Repairs
Air conditioning and refrigeration services
Accident Management 
```

我必须将这些值存储到列表中，请帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:58:24.207

使用[`SAXParser`](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/SAXParser.html). 从 继承您的处理程序[`DefaultHandlder`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/helpers/DefaultHandler.html)，并覆盖[`characters`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/helpers/DefaultHandler.html#characters%28char%5B%5D,%20int,%20int%29)以连接来自解析器的字符串部分（您可以使用[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)它）。

清除中的构建器 `startElement`；将完成的字符串添加到您的列表中`endElement`。

这里是一个关于使用 SAX 解析器在 Java 中解析 XML 的快速教程的[链接。](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:52:20.297

你必须使用正则表达式。我认为正则表达式非常有用，以至于编写直接解决问题的方法毫无意义。我建议您熟悉它们并自己尝试一下。将来你会经常使用正则表达式，所以偷工减料是没有意义的。这是一个很好的教程：[http ://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

# android - 应用程序在锁定/睡眠屏幕上崩溃 - NullPointerException

> ID：11061708
> 
> 赞同：5
> 
> 时间：2012-06-16T07:46:18.273
> 
> 标签：android, nullpointerexception

使用设备进行测试 - 每当我锁定屏幕（或闲置 1 分钟后进入睡眠状态）时，应用程序就会崩溃，并在方法中`logcat`显示`NullPointerException`始终开启。`imageView.setOnClickListener``onResume()`

这是我得到异常的一小部分代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.critical_items_list);

    // instantiate member variables

    mExtras = getIntent().getExtras();
    mItems_P1 = mExtras.getParcelableArrayList(EXTRA_ITEMS_P1);
    mItems_P2 = mExtras.getParcelableArrayList(EXTRA_ITEMS_P2);
    mItems_Engine = mExtras.getParcelableArrayList(EXTRA_ITEMS_ENGINE); 
}

protected void onResume() {
    super.onResume();

    ImageView imageAddToMultiple = (ImageView) findViewById(R.id.image_add_to_multiple);

    //This is where the I get the NullPointer
    imageAddToMultiple.setOnClickListener(listenerAddToMultipleItems); 

    refreshLists();
    ListView listP1 = (ListView) findViewById(R.id.list_p1);
    ListView listP2 = (ListView) findViewById(R.id.list_p2);
    ListView listEngine = (ListView) findViewById(R.id.list_engine);

    listP1.setAdapter(new MyAdapter(mList_P1));
    listP2.setAdapter(new MyAdapter(mList_P2));
    listEngine.setAdapter(new MyAdapter(mList_Engine));
} 
```

imageView 本身位于`RelativeLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="@dimen/standard_bar_height"
    android:background="@color/green"
    android:baselineAligned="false" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="@string/plant_1"
            android:textColor="@android:color/black" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="@string/plant_2"
            android:textColor="@android:color/black" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/image_add_to_multiple"
            android:layout_width="@dimen/standard_bar_height"
            android:layout_height="@dimen/standard_bar_height"
            android:layout_alignParentRight="true"
            android:layout_centerHorizontal="true"
            android:contentDescription="@string/description_add_to_multiple_items"
            android:src="@android:drawable/ic_menu_add" />

        <TextView
            android:id="@+id/TextView1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_centerInParent="true"
            android:gravity="center"
            android:text="@string/engine"
            android:textColor="@android:color/black" />
    </RelativeLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/list_p1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>

        <View
            android:layout_width="2dp"
            android:layout_height="fill_parent"
            android:background="@color/green" />

        <ListView
            android:id="@+id/list_p2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>

        <View
            android:layout_width="2dp"
            android:layout_height="fill_parent"
            android:background="@color/green" />

        <ListView
            android:id="@+id/list_engine"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </ListView>
    </LinearLayout>
</LinearLayout> 
```

我不知道为什么我会得到这个`NullPointer`。

> 致命异常：主要 java.lang.RuntimeException：无法恢复活动 {nmw.nss/nmw.nss.CriticalList}：android.app 的 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2820) 处的 java.lang.NullPointerException .ActivityThread.handleResumeActivity(ActivityThread.java:2859) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2242) 在 android.app.ActivityThread.access$600(ActivityThread.java:139) 在 android.app.ActivityThread$H .handleMessage(ActivityThread.java:1262) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:154) 在 android.app.ActivityThread.main(ActivityThread. java:4974) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os。ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method) 原因：java.lang。 nmw.nss.CriticalList.onResume 处的 NullPointerException（CriticalList.java:93）
> 
> 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4620) 在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2804) ... 还有 12 个

谢谢。

编辑：我已经添加了完整的活动（某种）、`xml`和`logcat`。我是否需要覆盖任何`Activity`方法，也许是`onStop`or`onPause`才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T06:04:30.770

终于找到了！我的应用程序基本上设计为在横向模式下运行，并且在清单中我添加了 ------- android:screenOrientation="landscape"。

好吧，问题来了：锁定设备的模式无关紧要，findViewById() 总是以纵向模式搜索 XML，而在我的情况下，它根本没有 ImageView。因此出现 NullPointerException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:22:03.060

我假设您之前没有调用`setContentView()`过，因此`Imageview imageAddToMultiple`为 null，当您尝试设置侦听器时，它会崩溃。

希望能帮助到你！

# java - 无法加载库“gsdll32”

> ID：11061709
> 
> 赞同：5
> 
> 时间：2012-06-16T07:46:24.677
> 
> 标签：java, ghostscript

我正在运行以下代码以使用 Ghost4j 从 pdf 创建 bmp 图像

我有一个由 GhostScript 生成器执行的命令，用于从 pdf 生成页面的 Bmp 图像。代码是：

```
package ghost;

import net.sf.ghost4j.Ghostscript;
import net.sf.ghost4j.GhostscriptException;

public class GhostDemo {
public static void main(String[] a){
    Ghostscript gs = Ghostscript.getInstance(); //create gs instance
    String[] gsArgs = new String[10];/*command string array*/
    gsArgs[0] = "-dUseCropBox";/*use crop box*/
    gsArgs[1] = "-dNOPAUSE";
    gsArgs[2] = "-dBATCH";
    gsArgs[3] = "-dSAFER";
    gsArgs[3] = "-r300";
    gsArgs[4] = "-sDEVICE=bmp16m";
    gsArgs[6] = "-dTextAlphaBits=4";
    gsArgs[5] = "-sOutputFile=C:/PagesWorkspace/1/masterData/1.bmp";/*bmp file location with name*/
    gsArgs[6] = "C:/MasterWorkspace/pipeline.pdf";/*pdf location with name*/

    try {

        gs.initialize(gsArgs);  /*initialise ghost interpreter*/
        gs.exit();

    } catch (GhostscriptException e) {
       e.printStackTrace();
    }
}
} 
```

我得到了例外

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'gsdll32': The specified module could not be found.

    at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:145)
    at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:188)
    at com.sun.jna.Library$Handler.<init>(Library.java:123)
    at com.sun.jna.Native.loadLibrary(Native.java:255)
    at com.sun.jna.Native.loadLibrary(Native.java:241)
    at net.sf.ghost4j.GhostscriptLibraryLoader.loadLibrary(GhostscriptLibraryLoader.java:36)
    at net.sf.ghost4j.GhostscriptLibrary.<clinit>(GhostscriptLibrary.java:32)
    at net.sf.ghost4j.Ghostscript.initialize(Ghostscript.java:292)
    at ghost.GhostDemo.main(GhostDemo.java:22) 
```

谁能告诉我为什么我会得到这个例外？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T20:23:05.977

你有安装 Ghostscript 吗？

*   如果是，是哪个版本？
*   如果是，在哪个位置？
*   它包括一个文件`gsdll32.dll`吗？

如果没有，[**请下载适用于 Win32 的 Ghostscript 安装程序**](http://downloads.ghostscript.com/public/gs905w32.exe)并运行它。`gsdll32.dll`安装后，目录下应该有一个文件`%your_install_dir%\gs\gs9.05\bin\`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T11:12:06.583

在eclipse项目中粘贴dll文件使我的程序工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T22:17:27.443

对于 SO 社区，要检查此错误的另一件事是您使用的是 32 位 Java。如果您的 Java 实例是 64 位，您将收到完全相同的消息：

`Unable to load library 'gsdll32': The specified module could not be found.`

即使您指向正确的 dll，也无需任何进一步*的*解释。

# wix - WiX - 创建用于修补的 MSI 和 MSP

> ID：11061710
> 
> 赞同：1
> 
> 时间：2012-06-16T07:46:38.563
> 
> 标签：wix, windows-installer, msp

我创建了一个配置工具，它使用 WiX 创建 MSI，并参考以前的 MSI 可以构建 MSP。

甚至客户也将使用此配置工具来创建他们的 MSI 和 MSP。

我会将安装程序交付给客户（MSI 或 MSP）在这里我想确保当客户使用它时，所有 GUID 产品代码、升级代码、组件 ID 都需要相同......

一种维护方法是将所有 GUID 存储在 XML 文件中，并将其作为二进制文件存储在安装程序中，当客户创建他们的 MSI 或 MSP 时，他们会引用我提供的 MSI 或 MSP 中的二进制文件。

我想让你看看有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T10:55:45.580

您还需要在存档中存储 .wixpdb 和 msi 文件，因为 MSP Wix 需要 wixpdb 以供参考和创建补丁。仅当您保留 .wixpdb 和 msi 的副本时，才能参考原始配置和文件。

wix教程中有如何创建MSP...

# jquery - jQuery可拖动 - 如何访问坐标

> ID：11061711
> 
> 赞同：4
> 
> 时间：2012-06-16T07:46:48.633
> 
> 标签：jquery, coordinates, draggable

如何访问可拖动对象的动态变化坐标？我不仅想要 处的坐标`stop`，还想要源源不断的位置信息流。

换句话说，如果我`object A`四处拖动，我应该能够通过（1）观察 的变化然后（2）将它们应用到 的位置来`object B`平行移动。`object A``object B`

在这段代码中，我希望红色块 ( `obj2`) 与蓝色 ( ) 一起移动`obj1`。

```
<html>
<head>
<style>
#obj1 {
   position:fixed;
   top:50px;
   left:50px;
   width: 40px;
   height: 40px;
   background-color: blue;
}
#obj2 {
   position:fixed;
   top:150px;
   left:150px;
   width: 40px;
   height: 40px;
   background-color: red;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#obj1').draggable();
    })
</script>
</head>

<body>
    <div id="obj1"></div>
    <div id="obj2"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T07:57:08.637

您可以使用`drag`可拖动事件：

```
$("#obj1").draggable({
    drag: function(event, ui) {
        var pos = ui.position;
        $("#obj2").css({
            left: pos.left + 100,
            top: pos.top + 100
        });
    }
});​ 
```

**演示：http:** [//jsfiddle.net/kPEfL/](http://jsfiddle.net/kPEfL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:54:35.313

可拖动插件有 3 个事件：开始、拖动和停止（所有这些都提供坐标）。您可以绑定到拖动事件并在回调中获取您需要的信息。

[在这里](http://jqueryui.com/demos/draggable/#events)您可以找到示例和演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:04:16.400

和event 属性适用于该目的，您可以附加一个`offsetY`处理程序来获取它们：`offsetY``drag`

```
$('#obj1').bind('drag', function(event) {
    console.log(event.offsetY); // dymamic y position
    console.log(event.offsetX); // dymamic x position
}); 
```

参考：

*   [可拖动演示页面](http://threedubmedia.com/demo/drag/)

# user-interface - 在 iOS 中使用 UIAutomation 点击 标签栏上的按钮

> ID：11061717
> 
> 赞同：1
> 
> 时间：2012-06-16T07:49:17.467
> 
> 标签：user-interface, ios4, ui-automation, ios-ui-automation

我的应用程序中有一个标签栏，我必须编写一个 JavaScript 文件来单击标签栏上的按钮，但问题是我找不到任何有关标签栏和`UIAutomation`.

我的标签栏中有 4 个按钮，我无法弄清楚我应该如何在我必须编写的 JavaScript 文件中引用我的标签栏，因为`navigationbar`我已经使用过

```
navBar = mainWindow().navigationBar();
navBar.leftButton().tap(); 
```

但我找不到任何类似的标签栏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:22:30.950

您正在撰写有关标签栏的文章并尝试通过导航栏访问它。

试试这个代码：

```
var tabBar = UIATarget.localTarget().frontMostApp().tabBar();
var tabButton = tabBar.buttons()["First"];  
// Tap the tab bar !
tabButton.tap(); 
```

教程 => [http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation](http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation)

# iphone - iPhone 中未显示 Phonegap 图像

> ID：11061718
> 
> 赞同：1
> 
> 时间：2012-06-16T07:49:44.440
> 
> 标签：iphone, ios, xcode, cordova

我已经用 Xcode 在 Phonegap 1.4 中完成了一个应用程序，它运行良好。

现在我正在 iPhone 上测试该应用程序。第一次在屏幕上显示所有图像，如果我转到其他页面并返回，则图像不显示。我不知道为什么。它在 Xcode 模拟器中运行良好。图像是（如果单击更改为其他图像）。编码是：

```
$("#jsEmployerRole").click(function(e){

                             $("#jsEmployeeTick").attr("src",'dulTick.png');
                             $("#jsEmployerTick").attr("src",'Tick.png');

                             });
    $("#jsEmployeeRole").click(function(e){
                          $("#jsEmployeeTick").attr("src",'Tick.png');
                             $("#jsEmployerTick").attr("src",'dulTick.png');

                             }); 
```

# html - 如何自动化 Twitter 卡片？

> ID：11061724
> 
> 赞同：2
> 
> 时间：2012-06-16T07:51:19.733
> 
> 标签：html, twitter

我正在寻找在 Wordpress 上运行的网站上实现 Twitter Cards（Twitter Cards 上的文档：[https](https://dev.twitter.com/docs/cards) ://dev.twitter.com/docs/cards ）

Twitter 要求以下内容：

*   元名称=“推特：卡”值=“摘要”
*   元名称=“推特：网站”值=“@nytimes”
*   元名称="twitter:url" value="http://www.nytimes.com/2012/02/19/arts/music/amid-police-presence-fans-congregate-for-whitney-houstons-funeral-in -newark.html"
*   meta name="twitter:title" value="休斯顿葬礼粉丝游行"
*   meta name="twitter:description" value="NEWARK - 客人名单和豪华轿车的游行与名人从他们身上出现似乎更适合好莱坞或纽约的红地毯活动，而不是旧址附近的苏塞克斯大道的坚韧地带James M. Baxter Terrace 公共住房项目在这里。”

我的问题是关于上述三个（网址、标题和描述） - 如果我将此代码添加到网站的 HEAD 部分，是否可以放入任何内容来避免硬编码网址、标题和描述，而不是从每一页自动拉出来？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:59:02.393

您可以在您网站的 header.php 中添加一些代码，这些代码将提取当前 URL、标题和摘录以进行描述。我最近创建了一篇文章，将 Twitter 卡片设置为您网站主页、博客文章、页面和类别的“自动”。

您使用以下组合：

```
<?php if (is_single() || is_page() ) : if (have_posts() ) : while (have_posts() ) : the_post(); ?> 
```

其次是：

```
<meta name="twitter:description" content="<?php echo get_the_excerpt();?>" />
<meta name="twitter:url" content="<?php the_permalink();?>" />
<meta name="twitter:title" content="<?php the_title();?>" /> 
```

有关更多详细信息和图片，请参阅我的博客文章[http://www.davidtiong.com/how-to-add-twitter-cards-code-to-your-wordpress-website/](http://www.davidtiong.com/how-to-add-twitter-cards-code-to-your-wordpress-website/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:33:17.650

使用 php： 您的博客文章的标题`<meta name="twitter:title" value="<?php echo $title ?>" >` 在哪里。`$title`

这是关于 Twitter 卡 WP 插件的讨论：[https ://dev.twitter.com/discussions/8548](https://dev.twitter.com/discussions/8548)

# r - 我自己的qplot传奇

> ID：11061725
> 
> 赞同：3
> 
> 时间：2012-06-16T07:51:21.620
> 
> 标签：r, legend, ggplot2

有人可以帮我将 `A-atype B-btype C-ctype` *仅*作为图例添加到下面的 qplot 图中。我的图例应该在图表的顶部，并且应该是水平的。另请参阅下面的数据和我用于生成图表的 qplot 代码。

数据：

```
type    name    value
A john  47.6
B john  55.6
C john  57.7
A amy   13.15
B amy   23.1
C amy   24.9
A lily  14.0
B lily  18.1
C lily  21.9
A sam   38.8
B sam   44.8
C sam   45.9
A frank 63.6
B frank 64.4
C frank 64.7
A xia   52.8
B xia   54.1
C xia   56.4
A yan   53.8
B yan   56.1
C yan   58.6 
```

代码：

```
qplot(type, value, geom="bar", fill=c(""),data=temp, group=name,
  facets= .~name,stat="identity")
+ theme_bw()             
+ opts(axis.title.y=theme_text(size=16,angle=90),axis.title.x=theme_text(size=16,angle=0))
+ opts(axis.text.x=theme_text(size=10))   
+ opts(axis.text.y=theme_text(size=14))    
+ opts(strip.background = theme_rect(colour = 'steelblue', fill = 'white', size = 2))  
+ opts(legend.title=theme_blank())  
+ opts(legend.position="top") 
```

![在此处输入图像描述](../Images/846c5a873566b72b68135dd26c201326.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T08:36:14.950

你追求的是这样的吗？首先，绘制图例，然后移除图例的彩色键。`fill = type`绘制图例。`scale_fill_manual`确保条具有相同的颜色，并在图例中插入所需的标签。`guides`删除彩色键，或者将键着色为白色，只留下图例标签。可能，`fill = NA`在调用 to 时`guides`也会起作用。 **编辑：**更新 ggplot2 版本 2 的代码

```
library(ggplot2)

temp = read.table(text = "
type    name    value
A john  47.6
B john  55.6
C john  57.7
A amy   13.15
B amy   23.1
C amy   24.9
A lily  14.0
B lily  18.1
C lily  21.9
A sam   38.8
B sam   44.8
C sam   45.9
A frank 63.6
B frank 64.4
C frank 64.7
A xia   52.8
B xia   54.1
C xia   56.4
A yan   53.8
B yan   56.1
C yan   58.6", header = TRUE, sep = "")

qplot(type, value, geom="col", fill=type, data=temp, group=name, facets= .~name) + 
   scale_fill_manual(values = rep("salmon",3), labels = c("A - atype", "B - btype", "C - ctype")) +
   guides(fill = guide_legend(override.aes = list(fill = "white"))) +
   theme_bw() + 
   theme(axis.title.y=element_text(size=16,angle=90),
         axis.title.x=element_text(size=16,angle=0), 
         axis.text.x=element_text(size=10), 
         axis.text.y=element_text(size=14), 
         strip.background = element_rect(colour = 'steelblue', fill = 'white', size = 2),
         legend.title=element_blank(), 
         legend.position="top", 
         legend.key = element_rect(colour = NA)) 
```

![在此处输入图像描述](../Images/9fc2141795766bbf23a80d874d90cffb.png)

# android - 在android中分析用户定义的方法

> ID：11061726
> 
> 赞同：1
> 
> 时间：2012-06-16T07:51:49.717
> 
> 标签：android, methods, profiling, user-defined

我不能在 android 中对用户定义的方法使用分析吗？我在分析窗口的“查找：”框中搜索了我的方法名称。但是，没有用。我在 Ubuntu 12.04 中使用 Eclipse 3.7.2。任何答案将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:03:37.043

使用基于 VM 的语言（例如 Java）进行分析有些棘手，尤其是在使用采样分析器时。VM 偶尔会决定内联一些方法，这可能会从分析器的视图中完全删除它们，或者减少分析器认为在它们中花费的时间。我在我[的旧答案中](https://stackoverflow.com/a/9344922/507519)提到了采样分析器的一些一般警告。

您可以尝试搜索调用它的方法或被它调用的方法，而不是搜索此特定方法。希望您能够辨别出足够的信息来确定您的方法是否存在性能问题。

除非您提供有关您的代码以及您*如何*准确地分析您的应用程序的更多信息，否则很难更具体。如果您使用的是仪器或采样分析器，您至少应该提及...

# bash - 为什么脚本可以使用 /bin/bash 而不是 /bin/sh？

> ID：11061727
> 
> 赞同：0
> 
> 时间：2012-06-16T07:51:52.387
> 
> 标签：bash, shell, sh

我试图理解为什么脚本可以使用`#!/bin/bash`但不能使用`#!/bin/sh`。我正在运行 Cygwin，两者`sh.exe`似乎`bash.exe`都相同（文件大小相同）。

```
$ cat 1.sh
#!/bin/sh
while read line; do
  echo ${line:0:9}
done < <(help | head -5)

$ ./1.sh
./1.sh: line 4: syntax error near unexpected token `<'
./1.sh: line 4: `done < <(help | head -5)'

$ cat 2.sh
#!/bin/bash
while read line; do
  echo ${line:0:9}
done < <(help | head -5)

$ ./2.sh
GNU bash,
These she
Type `hel
Use `info
Use `man 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T07:55:25.207

尽管是同一个文件，shell 在运行时会分析自己的名称并切换到普通 shell 或 bash 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:03:13.443

### 问题

1.  Bash 是 Bourne shell 的超集，在 Bash 中可以实现的许多事情在更有限的 shell 中是不可能的。
2.  即使*sh*是到*bash的硬链接，它在作为**sh*调用时的行为也会有所不同。Bash shell 支持的许多功能在此模式下将不起作用。

### 解决方案

1.  从脚本中删除你的[bashisms](http://mywiki.wooledge.org/Bashism)，包括漂亮的特性，比如你在第 4 行的进程替换。
2.  以 Bash 的身份运行您的脚本，而不是普通的 Bourne。

# php - 要按字母顺序排序的 PHP 列表

> ID：11061729
> 
> 赞同：-1
> 
> 时间：2012-06-16T07:52:02.770
> 
> 标签：php, alphabetical, alphabetical-sort

> **可能重复：**
> [我应该如何使用 usort 按键对该数组进行排序？](https://stackoverflow.com/questions/5915682/how-should-i-sort-this-array-by-key-with-usort)

我尝试按照很多提示在这段代码上按字母顺序对列表进行排序，但没有成功。

```
<?php
foreach ($this->link_items as &$item) :
?>
<li>
<a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($item->slug, $item->catid)); ?>">
            <?php echo $item->title; ?></a>
</li>
<?php endforeach; ?> 
```

我需要在输出之前对这个列表进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:55:12.587

```
sort($this->link_items); 
```

这将按值对值进行排序。要按键排序，请使用`ksort`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T08:05:45.200

利用：

```
$sorted_array = array_multisort($this->link_items, SORT_ASC);
<?php
foreach ($sorted_array as &$item) :
?>
<li>
<a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($item->slug, $item->catid)); ?>">
            <?php echo $item->title; ?></a>
</li>
<?php endforeach; ?> 
```

# arrays - C++/CLI 中的托管数组问题

> ID：11061739
> 
> 赞同：1
> 
> 时间：2012-06-16T07:54:46.983
> 
> 标签：arrays, c++-cli, clr, managed, managed-c++

用 /clr 编译

```
array<Byte>^ byteArray =  gcnew array<Byte>(25); 
```

为什么我会得到这些编译器错误？

```
error C2065: 'array' : undeclared identifier
error C2065: 'gcnew' : undeclared identifier
error C2275: 'System::Byte' : illegal use of this type as an expression
error C3192: syntax error : '^' is not a prefix operator (did you mean '*'?) 
```

我在一个类中调用这个方法

```
using namespace System;

__gc class MyClass 
```

这感觉就像我在这里遗漏了一些非常基本的东西。即使这会导致错误：

```
array<Byte>^ byteArray; 
```

或者

```
array<Byte> * byteArray; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:17:19.193

该语法`__gc class`在现已过时的托管 C++ 中使用。在 C++/CLI 中，使用`ref class`.

有关更多信息，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Syntax_changes)[*C++/CLI中的*](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Syntax_changes)[*语法更改*](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Syntax_changes)[部分](http://en.wikipedia.org/wiki/C%2B%2B/CLI#Syntax_changes)**。**

# sencha-touch - 详细隐藏搜索字段卡片

> ID：11061744
> 
> 赞同：0
> 
> 时间：2012-06-16T07:56:07.217
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我对列表的元素进行了搜索，但问题是搜索字段显示在列表项的详细卡片上。我需要在详细卡片中隐藏搜索字段。我试图将其隐藏在控制器中：

```
showDetail: function(list, record) {
    this.getMain().push({
        xtype: 'recipedetail',
        title: record.fullName(),
        data: record.data
    }),
     this.getMain().getNavigationBar.hide({   
    xtype: 'searchfield',
    itemId:'contact_search'     

      })
        } 
```

并试图将其隐藏在详细卡中：

```
config: {
   ...,
   items: [{
    xtype: 'searchfield',
    itemId:'contact_search',
    hidden: true
    }] 
} 
```

但是搜索字段仍然显示。代码错误或我的想法错误？ [http://www.senchafiddle.com/#4hKD8#uZlr7#JywGI#3D6PK#DOaF9#oVfK0#jdzF3](http://www.senchafiddle.com/#4hKD8#uZlr7#JywGI#3D6PK#DOaF9#oVfK0#jdzF3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:31:20.203

隐藏搜索栏的代码中有很多错误。

*   你对于()处的`getNavigationbar`函数
*   hide 函数将动画或布尔值作为参数，而不是您要隐藏的组件
*   你忘了分号

现在，要隐藏搜索字段，首先在控制器的配置中添加对此搜索字段的引用：

```
config: {
    refs: {
        main: 'mainpanel',
        searchfield: 'mainpanel searchfield'
    },
    ... 
```

现在您可以使用 访问您的`searchfield`组件`this.getSearchfield()`，因此您只需要执行以下操作：

```
this.getSearchfield().hide(); 
```

希望这可以帮助

# ruby-on-rails - 编辑制作后如何更新 Ruby 实时站点？

> ID：11061745
> 
> 赞同：0
> 
> 时间：2012-06-16T07:56:09.167
> 
> 标签：ruby-on-rails, ruby, unicorn

我对 Ruby 非常陌生，想知道如何在直接在生产环境中编辑一些文件（用于 UI 目的）后更新实时站点。

我们目前正在运行 Unicorn。该脚本安装在 /root/ribbot/ribbot/ 文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:09:25.103

Rails 缓存源代码、视图模板等：如果它们发生变化，则需要重新启动 unicorn。

Unicorn 确实具有无缝重启功能：向 unicorn 主进程发送 USR2 信号：这会导致启动一个新的主进程。当它启动并运行时，将 QUIT 发送给旧的。GitHub 有一篇关于他们如何做到这一点的好[博文](https://github.com/blog/517-unicorn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:17:05.390

这取决于您如何为您的应用程序提供服务。如果您使用的是 heroku，请执行`git add .`, `git commit -m "init`"（将 init 替换为您的提交消息）和`git push heroku master`.

如果您正在运行其他东西，只需重新部署即可。

# c# - 如何找到打印机的流控是硬件还是软件

> ID：11061746
> 
> 赞同：2
> 
> 时间：2012-06-16T07:56:49.027
> 
> 标签：c#, wpf

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Printing;
using System.IO.Ports;

namespace Printer
{   
    public partial class portname : Window
    {  

    PrintServer server = new PrintServer();  
    public portname()
    {
        this.InitializeComponent();

        foreach (PrintQueue queue in server.GetPrintQueues())
        {

            com_pinter.Items.Add(queue.FullName);

        }

        var DefaultPrinter = new LocalPrintServer().DefaultPrintQueue;      

        string default_name=DefaultPrinter.FullName;

        txt_dpn.Text = "Default printe is " + " " + default_name.ToUpper();

        string default_port = DefaultPrinter.QueuePort.Name; 

        txt_pn.Text = "PortName is" + " " + default_port.ToUpper();
    }

    private void com_pinter_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        foreach (PrintQueue queue in server.GetPrintQueues())
        {
            string selecteditem = com_pinter.SelectedItem.ToString();
            string portname = queue.FullName;

            SerialPort mySerialPort = new SerialPort(queue.QueuePort.Name);
            btn_br.Content = mySerialPort.BaudRate;
            btn_db.Content = mySerialPort.DataBits;
            btn_pty.Content = mySerialPort.Parity;
            btn_sb.Content = mySerialPort.StopBits;

            if (selecteditem == portname)
            {
                string select_portname = queue.QueuePort.Name;
                txt_pn.Text = "PortName is" + " " + select_portname.ToUpper();
            }
        }
    }

}

} 
```

但我不知道这种方式是否正确以获得这样的输出（上图）。我只是搞砸了。如果你知道正确的方式，请告诉我我只是升级它。

最后我需要找到流控制（软件或硬件）。根据上图，组合框必须是软件设备的设备。所以我必须动态找到该值（s/w 或 h/w）。

# html - IE 9 中的 X-UA 兼容 IE=7 问题

> ID：11061747
> 
> 赞同：1
> 
> 时间：2012-06-16T07:56:56.903
> 
> 标签：html, internet-explorer-9

我有像下面这样的 html，当我试图在 IE9 中浏览它时，在你将鼠标悬停在 div 上之前什么都不会出现。如果我将“X-UA-Compatible”更改为“IE=8”，它就会出现。非常感谢您的建议。

```
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
 </head>
 <body>
 <table>
     <tr>
        <td>
            <div style="height:400px; width:400px">
              <OBJECT ID="Player" HEIGHT="100%" WIDTH="100%" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6">
             </OBJECT>
           </div>
       </td>
   </tr>
  </table>
 </body>
</html> 
```

# java - Java Swing：JButton 创建新的 JTextField(s)

> ID：11061748
> 
> 赞同：1
> 
> 时间：2012-06-16T07:56:57.453
> 
> 标签：java, swing, jpanel, jbutton, jtextfield

您好 :) 我是 Java Swing 的初学者，我无法通过谷歌解决我的问题。我有一个 JPanel，想在按下 JButton 后动态添加 JTextField。以后如何从他们那里获取文本（）？我的代码，注释部分无法正常工作。

变量“计数器”计算面板中有多少个字段。

```
public class AppPanel extends JPanel {

    private JTextField tfData[];
    private JButton btAdd;
    private int counter = 1;

    public AppPanel() {
            setLayout(null);

            //tfData[counter] = new JTextField();
            //tfData[counter-1].setBounds(20, 20, 250, 20);
            //add(tfData[counter-1]);

            btAdd = new JButton("Add field");
            btAdd.setBounds(280, 20, 120, 20);
            btAdd.addActionListener(new alAdd());
            add(btAdd); 
    }

    class alAdd implements ActionListener {
            public void actionPerformed(ActionEvent e) {
                    //tfData[counter] = new JTextField();
                    //tfData[counter].setBounds(20, 20+20*counter, 250, 20);
                    //add(tfData[counter]);
                    ++counter;
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:20:57.697

由于您已经存储了对文本字段的引用，因此只需使用此数组来查询文本字段的文本：

```
tfData[counter-1].getText(); 
```

将显示最后添加的文本字段的文本。

但是您确实应该在之前初始化您的数组，否则您将无法向其中添加任何项目。我认为这是您注释掉添加代码时的主要问题。

```
// think about how many text fields you will need (here: 16)
private JTextField tfData[] = new tfData[16]; 
```

如果您使用的是数组，请注意不要超出其界限。但是最好[使用](https://stackoverflow.com/questions/5522279/how-can-i-add-a-textfield-dynamically-after-clicking-a-button)之前评论中建议的列表，因为它会动态增长，您不必处理数组边界，甚至可以跳过计数（该列表也可以为您做到这一点）。

# jquery - 删除最近的类 - jQuery

> ID：11061753
> 
> 赞同：1
> 
> 时间：2012-06-16T07:57:19.527
> 
> 标签：jquery, asp.net

实际上，我有一个表格格式的 html 查询来绑定 div 中的数据。我的 html 查询就像，

```
var myTable = <table>
    <tr>
       <td class='deleteMe'>
            <table><tr><td>1</td><td class='close'></td></tr></table>
       </td>
       <td class='deleteMe'>
            <table><tr><td>2</td><td class='close'></td></tr></table>
       </td>
       <td class='deleteMe'>
            <table><tr><td>3</td><td class='close'></td></tr></table>
       <td>
    </tr>
</table> 
```

这里的类`close`包含一个`delete`图标。所以当我点击这个删除图标时，我可以删除完整的`td`喜欢，

```
$(document).on('click', '.close', function () {                
            $(this).closest('table').remove();
        }); 
```

但我在这里想要的是，我需要获得完整的结构，除了`deleted one`. 这类似于，

```
var myTable = <table>
    <tr>
       <td class='deleteMe'>
            <table><tr><td>1</td><td class='close'></td></tr></table>
       </td>
       <td class='deleteMe'>
            <table><tr><td>2</td><td class='close'></td></tr></table>
       </td>
    </tr>
</table> 
```

为什么在这里尝试这样做是，在将它绑定`myTable`到我之后`div`，当我`2`从这里删除时，它被删除但它显示`1 and 3`. 我不想要这个，这就是试图获取除已删除结构之外的结构并将其重新绑定到同一个 div 的原因。

任何人都可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:00:21.687

```
$(this).closest('.deleteMe').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:01:59.447

```
$(document).on('click', '.close', function () {                
            $(this).parents('.deleteme').remove();
        }); 
```

删除删除的元素后做喜欢

```
<script>var data='';
  $(document).on('click', '.close', function () {  data='';            
                $(this).parents('.deleteMe:first').remove();
                $(".deleteMe").each(function(){
                data+=$(this).html();
                });
                }); 
```

它将剩余deleteme的html存储在var data中；

# c# - 点击事件后按钮数组消失

> ID：11061754
> 
> 赞同：1
> 
> 时间：2012-06-16T07:57:57.060
> 
> 标签：c#, asp.net, visual-studio-2008

为什么我的按钮（按钮数组）在我单击其中任何一个后消失？这是代码结构。提前非常感谢。

```
public partial class Seatalloc2 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                PopulateControls();
            }

        }

        protected void PopulateControls()
        {

            Button[,] buttonArray = new Button[10, 14];
            for (int a = 0; a < 10; a++)
            for (int b = 0; b < 14; b++)
            { 
               buttonArray[a, b] = new Button();
               Panel2.Controls.Add(buttonArray[a, b]);
             } 

        }

        public void buttonHandler(object sender, EventArgs e)
        {
            Button btn = sender as Button;
            btn.BackColor = Color.Red;           
        } 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:13:46.167

如果您查看我对上一个问题的回答，您会发现一个解决此问题的示例：

[https://stackoverflow.com/a/11061782/1268570](https://stackoverflow.com/a/11061782/1268570)

根本问题是了解 ASP.Net 页面生命周期（我讨厌它），但了解其背后的基础知识非常有用且至关重要

Microsoft 的此文档详细解释了页面生命周期

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

基本上控件正在消失，因为您需要在每次回发时在页面中重新创建它们，并且在您的代码中，您只是在第一次加载页面时创建它们

创建动态控件的推荐事件是`PreInit`如果您没有母版页或`Init`如果您有一个母版页

因此，如果您将代码更改为：

```
void Page_Init(object sender, EventArgs e)
{
   PopulateControls();
} 
```

您的按钮将保存它们的状态。不要担心状态，即使它们在每个帖子中重新创建，因为您在`Init`事件中这样做，ASP.Net 将`ViewState`自动加载到您的控件（这是可能的，因为 ASP.Net 加载视图状态后`Init`事件和事件之前`Load`）

作为快速参考，请查看页面生命周期：

![在此处输入图像描述](../Images/627ea3d0807d48c60e1e35f477a5bfdd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:01:39.213

您必须最迟在 Page_Load 中使用与以前相同的 ID 在每次回发时重新创建动态创建的控件，以确保`ViewState`正确加载并触发事件。`PopulateControls`在您使用静态数量的控件的情况下，即使在回发时也足以调用：

```
protected void Page_Load(object sender, EventArgs e)
{
   PopulateControls();
} 
```

但是您还需要将 添加`Buttons`到`Page`的控件集合中，例如添加到`Panel`. 您的按钮阵列没有任何用途：

```
protected void PopulateControls()
{
    for (int a = 0; a < 10; a++)
    for (int b = 0; b < 14; b++)
    {
        var btn = new Button();
        btn.ID = "Btn_" + a + "_" + b;
        // add an event handler for the click-event
        btn.Click += buttonHandler;
        MyButtonPanel.Controls.Add(btn);
    }
} 
```

# ruby-on-rails-3 - 设计：如何自定义注册控制器销毁方法

> ID：11061757
> 
> 赞同：0
> 
> 时间：2012-06-16T07:58:28.187
> 
> 标签：ruby-on-rails-3, devise, crud, destroy, rails-models

我在不同的模型中有我的用户和个人资料。当用户被删除时，链接的配置文件仍然存在，这是所需的结果。我想做的是将个人资料记录标记为已删除。

我已在我的配置文件表中添加了一个已删除的列（布尔值），但无法弄清楚如何将设置添加为 true 设置到设计销毁方法？

应用\控制器\registrations_controller.rb

```
class RegistrationsController < Devise::RegistrationsController
   def destroy
     delete_profile(params) 
   end

   private

   def delete_profile(params)
     profile = Profile.find(params[:id])
     profile.deleted = true
   end  
end 
```

但我可以弄清楚如何解决这个错误

```
Couldn't find Profile without an ID 
```

如何在我的视图中从删除用户传递正确的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:32:08.107

Devise 不使用 a`params[:id]`来销毁当前用户（因此它不是通过路由提供的），而是使用`current_user`.

以下是控制器的相关部分：

```
class Devise::RegistrationsController < DeviseController
  prepend_before_filter :authenticate_scope!, :only => [:edit, :update, :destroy]

  def destroy
    resource.destroy
    Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name)
    set_flash_message :notice, :destroyed if is_navigational_format?
    respond_with_navigational(resource){ redirect_to after_sign_out_path_for(resource_name)       }
  end

  protected 

  def authenticate_scope!
    send(:"authenticate_#{resource_name}!", :force => true)
    self.resource = send(:"current_#{resource_name}")
  end
end 
```

所以你的选择是做类似的事情

```
class RegistrationsController < Devise::RegistrationsController
  def destroy
    current_user.deleted = true
    current_user.save
    #some more stuff
  end
end 
```

# mysql - 如何使用 Delphi 连接到 MySQL 服务器

> ID：11061762
> 
> 赞同：0
> 
> 时间：2012-06-16T07:59:53.113
> 
> 标签：mysql, delphi, odbc, ado

我知道如何使用 ODBC 连接到同一台机器上的 MySQL 数据库，但现在我想知道如何通过网络连接到另一台服务器上的 MySQL 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:04:07.107

`Server=`在连接字符串的后面写上数据库计算机的名称或 IP 地址。例如：

```
Driver={MySQL ODBC 5.1 Driver};Server=myServerAddress;Database=myDataBase;User=myUsername; Password=myPassword;Option=3; 
```

更多示例在这里[http://www.connectionstrings.com/mysql#p31](http://www.connectionstrings.com/mysql#p31)

# php - CURL FOLLOWLOCATION 不显示

> ID：11061772
> 
> 赞同：0
> 
> 时间：2012-06-16T08:01:50.683
> 
> 标签：php, curl

当我向 CURL 初始化函数添加参数时：

`curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);`

它确实打印了我向其发送请求的网站内容，问题是我想手动解析返回的内容（`$response = curl_exec($ch);`）但问题是，网站正在显示页面内容，我想继续拥有网站内容在我的`$response`变量上，以便我可以解析它，但同时阻止它显示它。

这可行吗？

卷曲代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $action);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, '');
curl_setopt($ch, CURLOPT_COOKIEFILE, '');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
$response = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:07:32.987

您应该将该`CURLOPT_RETURNTRANSFER`标志设置为 true。来自 PHP.NET 手册

> `CURLOPT_RETURNTRANSFER` `TRUE`
> 
> 将传输**作为返回值的字符串返回，** `curl_exec()` **而不是直接输出**。

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

# java - java new 运算符和 hashcode()

> ID：11061773
> 
> 赞同：3
> 
> 时间：2012-06-16T08:01:54.687
> 
> 标签：java, new-operator, hashcode

首先，我在这里谈论的是默认的 hashCode() 方法，而不是被覆盖的东西。当我们创建一个新对象时，'new' 操作符返回它创建的那个对象的内存地址；在java中我们说它更普遍地返回引用。我想知道的是，这和hashCode()返回的值一样吗？

我相信它们是一样的。但是话又说回来，当我们有超过 2^32 个对象并且给定 hashCode() 返回一个整数（2^32 个不同的数字）时，到处都会发生冲突，当我们传递对象时，这将是一个真正的混乱。JVM是如何处理的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:07:23.550

> 当我们创建一个新对象时，'new' 操作符返回它创建的那个对象的内存地址；在java中我们说它更普遍地返回引用。

好吧，引用当然不必是地址。这是一种引用对象的方式 - 位的确切值取决于 JVM 实现。

> 我想知道的是，这和hashCode()返回的值一样吗？

不必要。你当然不应该在这方面做出任何假设。同样，这是一个实现细节。

值得记住的是，虽然垃圾收集器可以在内存中移动对象（随时更新引用），但哈希码*不能*基于此更改，这是反对您建议的论据。

> 但是话又说回来，当我们有超过 2^32 个对象并且给定 hashCode() 返回一个整数（2^32 个不同的数字）时，到处都会发生冲突，当我们传递对象时，这将是一个真正的混乱。

会有*哈希码*冲突，是的。这是不可避免的——任何使用哈希码的东西都需要考虑到冲突的可能性。但是不能存在*引用*冲突——能够同时支持超过 2 ^(32 个)值的 JVM 显然不能*只*使哈希码和引用具有相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:19:33.073

> 在java中我们说它更普遍地返回引用。我想知道的是，这和hashCode()返回的值一样吗？

从[Object#HashCode](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)（我的亮点）：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常**通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术**。）

所以这对程序员来说是不透明的。
您需要知道的是，通过`new`您获得`handler`对象的 a 并且 a`hashCode`是基于将内部地址转换为表示对象 hashCode 的整数的“配方”，无论您的内存区域如何，这都是相同的对象当前位于（例如由于 GC 移动）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:09:44.060

由于哈希码不需要唯一，所以如果在 64 位空间中转换两个对象的地址导致哈希码冲突是没有问题的：不要求不同对象的哈希码不同 - 只需要相等对象的哈希码相同。

在 Real Life ^(TM)中，默认`hashCode`值看起来确实与对象的地址非常相似。然而，这些信息对 Java 程序员没有用处：即使哈希码等于对象的地址，Java 也没有提供一种机制来利用这些知识，使其成为无用的实现细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T08:09:05.240

`new`在 Java 中不返回内存地址。甚至更多：Java 可以（并且确实）在内存中重新定位对象。因此，尽管`hashCode()`Java 中的实现*可以*返回一个内存地址，但它可能不会，因为它在对象的整个生命周期内都不稳定。

hashCode 不必是唯一的。在 hashCode 用于识别对象的情况下（例如 in `HashMap`），它需要与 的实现配对`equals()`以解决冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T12:31:46.350

> 当我们创建一个新对象时，'new' 操作符返回它创建的那个对象的内存地址

不，它返回一个 Java 引用。由于垃圾收集和对象可以移动的含义，您可以打赌的一件事是它*不是*内存地址。

> 这与 hashCode() 返回的值相同吗？

不，hashCode 不是内存地址，尤其是在 hashCode() 已被覆盖的情况下。

> 我相信它们是一样的。

你的信念是没有根据的。

> 但是话又说回来，当我们有超过 2^32 个对象并且给定 hashCode() 返回一个整数（2^32 个不同的数字）时，到处都会发生冲突，当我们传递对象时，这将是一个真正的混乱。JVM是如何处理的？

所以很明显你的信念是错误的。还要考虑 64 位实现。这里唯一的问题是你的假设。

# php - Facebook Open Graph-动态标题

> ID：11061776
> 
> 赞同：1
> 
> 时间：2012-06-16T08:02:36.120
> 
> 标签：php, mysql, facebook-opengraph

我正在开发一个需要一些 Open Graph 操作的社交应用程序。我希望标题的元数据标签来自我的数据库，因为我的操作标题的名称取决于用户的选择。

是否可以从数据库中获取标题元数据，而不是硬编码？例如：

```
<meta property="og:title"  content="<?php echo $someTitle ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:20:29.553

当然有*可能*——但是你怎么想知道*什么时候发布什么*内容*呢*？

当 Facebook 抓取您的 URL 时，您网站的用户不会参与其中。这意味着您必须通过查询字符串或其他方式传输一些信息；这将使它们成为*不同的*URL，因此您最终也会得到不同的 OG 对象。

# c++ - 打印浮点数，使得指数用“*10^”而不是“e”标记

> ID：11061780
> 
> 赞同：4
> 
> 时间：2012-06-16T08:03:10.820
> 
> 标签：c++, c, floating-point, representation

我正在寻找在 C/C++ 中打印浮点（或双精度）f 的可能性`f = 1.234e-15`，例如，它被打印为

*   `f = 1.234*10^-15`, 或者, 甚至更好, 作为
*   `f = 1.234*10^{-15}`

谁能帮我？也许有一种方法可以得到以 10 为底的指数“-15”和尾数“1.234”。我发现了[如何提取 double 的尾数的](https://stackoverflow.com/questions/5672960/how-can-i-extract-the-mantissa-of-a-double)问题，但不幸的是，这并没有真正帮助，因为它只得到尾数在基地 2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T08:14:30.720

您可以使用输出字符串流打印到 a `string`，然后替换`"e"`为`"*10^"`.

```
ostringstream ss;
ss << scientific << 123456789.87654321;
string s = ss.str();
s.replace(s.find("e"), 1, "*10^");
cout << s << endl; 
```

这个片段[产生](http://ideone.com/TzEvs)

```
1.234568*10^+08 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:14:01.017

为什么不使用字符串解析？扫描字符串并将 e 替换为 10^。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T08:22:50.273

```
#include <cmath>
#include <iostream>

using namespace std;

template <typename F>
F round_away_from_zero (F x)
{
  return x < 0 ? floor(x) : ceil(x);
}

template <class O, typename F>
O &print_float (O &out, F f) {
    signed ex = round_away_from_zero(log10(f)); // exponent
    F mant = f / pow(10, ex);                   // mantissa
    out << mant << "*10^" << ex;
}

int main () {
    double f = 1.234e-15;
    print_float(cout, f) << endl; // prints 1.234*10^-15
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:16:27.117

在等待您的解决方案时，我想出了以下想法：

使用 sprintf() 将 float 或 double 打印到 char 数组。解析它以获得指数和尾数。代码现在看起来如下：

```
void printDoubleToChar(double d, char* c){
    char valAsChar[256];

    sprintf(valAsChar, "%.12e", d);

    int expStart = 0, expWidth = 0;
    for(int i=0; i<sizeof(valAsChar); i++){
        if(valAsChar[i] == 'e'){
            expStart = i+1;
            break;
        }
    }
    for(int i=expStart; i<sizeof(valAsChar); i++){
        if(valAsChar[i] == '\0'){
            expWidth = i - expStart;
            break;
        }
    }

    char chValExp[32];
    memcpy(chValExp, &valAsChar[expStart], expWidth+1);

    char chValMan[128];
    memcpy(chValMan, valAsChar, expStart-1);
    chValMan[expStart-1] = '\0';

    sprintf(c, "%s*10^{%s}", chValMan, chValExp);
}

int main(){
    double myNewDbl = 3.95743e-5;
    char chDbl[256];
    printDoubleToChar(myNewDbl, chDbl);
    printf("\nchDbl: %s\n", chDbl); // output: chDbl: 3.957430000000*10^{-05}
} 
```

但老实说，我更喜欢 dasblinkenlight 提供的更简单的解决方案 :)

感谢大家的帮助！

亚历克斯

# c# - wp7 联系人的自动完成列表

> ID：11061786
> 
> 赞同：1
> 
> 时间：2012-06-16T08:04:22.983
> 
> 标签：c#, windows-phone-7

当用户在文本框中键入任何内容时，我不知道如何获取联系人的自动完整列表。我对此一无所知。我研究了很多地方，但没有取得任何成果。例如，我还添加了一张图片。谁能帮我这个？在此先感谢您的帮助！

![在此处输入图像描述](../Images/758ea45048414321251edfef45730e64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:58:25.960

`AutoCompleteBox`从下载`Silverlight Toolkit`。将所有联系人加载到`AutoCompleteBox.ItemsSource`. 设置`ValueMemberPath="propertyName"`为包含手机的属性（即您搜索的）或制作您自己的过滤条件 ( `AutoCompleteBox.ItemFilter += ...`)

或者

`ListBox`在下方创建`TextBox`并订阅`TextBox.TextChanged`事件。通过过滤手动`ListBox`处理项目`TextBox.Text`

# image - 保存为 Photoshop 中的 Web 功能以减小图像尺寸

> ID：11061787
> 
> 赞同：0
> 
> 时间：2012-06-16T08:04:28.697
> 
> 标签：image, photoshop

保存 Photoshop 中的 Web 功能以减小图像大小，对于初学者（如我自己）来说，这是尝试并节省（一些）加载时间的最简单方法。

我正在为我的菜单按钮、背景、标题、帖子页面等使用图像

我刚刚发现这个保存为网络功能，我想知道它真的有助于图像大小还是没有太大的区别。

还有其他选择吗？

（参考网站：www.kizzieskorner.com）

PS：如果你把我的问题记下来，请你解释一下为什么，这样我就知道下次不该做什么了——因为我也是这些问题论坛的新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:35:08.693

当然，任何尺寸的减小都会有所帮助。我实际上建议查看其他图像优化工具。

如果您使用的是 Mac，那么 ImageOptim 现在是我常规工作流程的一部分。CodeKit 中还有一个优化器。

该站点还列出了许多其他站点，并且可能会为您提供有关该主题的更多信息。

[http://devstand.com/apps/compress-images-apps/](http://devstand.com/apps/compress-images-apps/)

希望这可以帮助

# configuration - nginx到localhost的正确配置？

> ID：11061788
> 
> 赞同：51
> 
> 时间：2012-06-16T08:04:36.543
> 
> 标签：configuration, nginx, localhost

大约一个小时前，我刚刚安装了 nginx 和 php fastcgi，在阅读了快速启动配置的示例以及 nginx 文档等之后，我无法让它工作。

无论我改变或尝试什么，我总是只得到“欢迎使用 Nginx！” “localhost/...”上的屏幕 - 我什至不能调用一个简单的 index.html

我的配置：

（评论里的东西是我试过的）

```
// default nginx stuff (unchanged)

server {
    #listen 80 default_server;
    #listen 80 default;
    listen 80;

    #server_name localhost;
    #server_name _;

    #access_log /var/log/nginx/board.access_log;
    #error_log /var/log/nginx/board.error_log;

    #root /var/www/board;
    #root /var/www/board/public/;
    root /var/www/board/public;

    #index index.html;
    index index.html index.htm index.php;
} 
```

如果我理解正确，这应该是最简单的设置，对吧？只是定义`listen 80;`， `index index.html;`但我就是不能让它工作

文件 /var/www/board/public/index.html 存在并且有内容

在我再浪费 2 个小时尝试某些东西之前，你们中的某个人可以快速观察一下并告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-16T08:12:11.030

从根本上说，您没有声明 nginx 用来将 URL 与资源绑定的位置。

```
 server {
            listen       80;
            server_name  localhost;

            access_log  logs/localhost.access.log  main;

            location / {
                root /var/www/board/public;
                index index.html index.htm index.php;
            }
       } 
```

# jquery - JQuery：鼠标移动事件？

> ID：11061790
> 
> 赞同：2
> 
> 时间：2012-06-16T08:04:39.740
> 
> 标签：jquery

我知道我可以像这样移动鼠标时进行跟踪：

```
$("body").mousemove( function(e){
    alert( "You moved to WIDTH " + e.pageX );
} ); 
```

行。我想知道鼠标指针是向左还是向右移动。

我知道要做到这一点，我必须知道以前的鼠标位置，然后简单地将其与当前位置进行比较。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:09:37.680

```
var prevX = 0;
$(window).mousemove(function(e) {
    $("div").text(prevX >= e.pageX ? "left" : "right");
    prevX = e.pageX;
});​ 
```

**演示：http:** [//jsfiddle.net/tb86F/](http://jsfiddle.net/tb86F/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:10:43.313

```
<script>var pos=0;
$("body").mousemove( function(e){
    if(pos<e.pageX)
    alert( "You moved to RIGHT" );
else alert("oved to left");
    pos=e.pageX;

} ); 
```

# linux - 如何更改可执行文本文件的 mimetype

> ID：11061793
> 
> 赞同：2
> 
> 时间：2012-06-16T08:05:22.800
> 
> 标签：linux, mime-types

我正在使用 linux slotaz 3.0 操作系统和 pcmanfm 0.5.2 文件管理器。

我的 ext3 分区上有 .mplayer/config 文件

```
$ls -l  ~/.mplayer/config
-rw-r--r--    1 tux      tux            94 Jun 14 20:38 /home/tux/.mplayer/config 
```

该文件默认使用 gvim 打开。如果我将此文件复制到我的 ntfs 分区，它将变为

```
-rwxrwxrwx    1 root     root           94 Jun 14 20:38 config 
```

现在我想用 gvim 默认打开它。我应该添加`~/.local/share/applications/defaults.list`什么？我已经添加了

```
application/x-executable=gvim.desktop 
```

然而，第一个选项是执行，而“打开方式”子菜单按顺序包含 vim、beaver、leafpad。

# ruby-on-rails - Ruby on rails 将用户添加到组

> ID：11061797
> 
> 赞同：0
> 
> 时间：2012-06-16T08:06:11.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用用户、学校和学校组模型构建一个社交网站。用户通过 has_many 到 schoolgroups 加入学校，并在学校中扮演不同的角色。我在编写用户可以单击以申请学校的在线 form_for 按钮时遇到问题。创建 schoolgroup 对象时需要包含的参数是 user_id、school_id 和角色“申请人”。我知道我可以使用 current_user.schoolgroups.build 让表单初始化创建操作并包含正确的 user_id，但我遇到的问题是如何编写一个表单，将 school_id 发送到控制器以创建新的 schoolgroup 对象. 我的代码中的 @school 实例变量只是正确代码的占位符

```
def create
  @school = School.find(params[:schoolgroups][:school_id)
  current_user.schoolgroups.build(school_id: @school.id, user_id: current_user.id, role: 'applicant')
  respond_with school_path
 end

<%= form_for( current_user.schoolgroups.build(params[school_id: @school.id]), 
                                                       remote: true) do |f| %>
  <div><%= f.hidden_field :school_id %></div>
   <%= f.submit "Apply", class: "btn btn-large btn-primary" %>
   <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:44:57.973

我会走这条路

```
# in routes
resources :schools do
  member do
    put :apply
  end
end

# in schools_controller.rb
def apply
  @school = School.find(params[:id])
  @schoolgroup = current_user.schoolgroups.create(school: @school, role: 'applicant')
  respond_with @schoolgroup
end

#in your view
<%= link_to "Apply", apply_school_path(@the_school_var_you_define_somewhere), remote: true, method: :put,
  class: "btn btn-large btn-primary" %> 
```

这更简单，更符合 Rails 精神。

# erlang - 如何计算文件日志中的唯一用户？

> ID：11061799
> 
> 赞同：1
> 
> 时间：2012-06-16T08:06:54.907
> 
> 标签：erlang

给定一个txt日志文件，格式如下：

```
USER_A timestamp1 otherstuff
USER_B timestamp2 otherstuff
USER_C timestamp3 otherstuff
USER_A timestamp4 otherstuff
USER_A timestamp5 otherstuff
USER_C timestamp6 otherstuff
USER_B timestamp7 otherstuff 
```

您将如何计算 erlang 中不同唯一用户的数量？我正在考虑逐行读取文件并使用 proplists 模块。每个用户将是一个键，其值将是出现次数。读取文件后，我调用：

```
length(proplists:get_keys(List)). 
```

这是实现我的结果的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:28:30.227

我也会为此使用 sets 模块，因为它既快速又不包含重复项。

以下代码应该可以完成这项工作：

```
{ok,Bin} = file:read_file("test"),
List = binary_to_list(Bin),
Usernames = [hd(string:tokens(X," ")) || X <- string:tokens(List,[$\n])],
sets:size(sets:from_list(Usernames)). 
```

编辑：我删除了单行，因为它没有增加任何价值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T09:05:48.527

使用[`sets`](http://www.erlang.org/doc/man/sets.html)模块中的一组来存储用户名然后使用[`sets:size/1`](http://www.erlang.org/doc/man/sets.html#size-1).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T11:52:32.477

日志文件通常很大，因此请考虑在递归函数中一次使用一行：

```
% Count the number of distinct users in the file named Filename                        
count_users(Filename) ->
    {ok, File} = file:open(Filename, [read, raw, read_ahead]),
    Usernames = usernames(File, sets:new()),
    file:close(File),
    sets:size(Usernames).

% Add all users in File, from the current file pointer position and forward,
% to Set.
% Side-effects: File is read and the file pointer is moved to the end.          
usernames(File, Set) ->
    case file:read_line(File) of
        {ok, Line} ->
            Username = hd(string:tokens(Line, " ")),
            usernames(File, sets:add_element(Username, Set));
        eof ->
            Set
    end. 
```

你只是这样称呼它：`count_users("logfile")`.

请注意，它`usernames/2`必须是[尾递归](http://learnyousomeerlang.com/recursion#length-tail-recursion)才能有效地工作。否则它只会消耗更多的内存。

# silverlight - Silverlight 将元素带到最前面

> ID：11061800
> 
> 赞同：0
> 
> 时间：2012-06-16T08:07:18.643
> 
> 标签：silverlight, element

我们有一个项目，其中有一个矩形和一些按钮。当程序启动时，我们正在生成一些图像。这些图像位于按钮的顶部，因为它们已添加到按钮之后。问题是我们希望在图像前面有按钮。在 Winforms 中，我们可以使用 button1.BringToFront 执行此操作，但这在 Silverlight 中不起作用。怎么做到呢？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T19:29:05.563

您可以使用对 Canvas.SetZIndex 的调用将 z 索引设置为一个大数字：

```
Canvas.SetZIndex(aUIControl, 100) 
```

# java - 克隆带有摆动组件/按钮的框架/选项卡

> ID：11061808
> 
> 赞同：0
> 
> 时间：2012-06-16T08:07:41.207
> 
> 标签：java, swing

OK 一个完整的修改：

我有一个带有标签的 JFrame，里面有按钮/文本字段等。按钮有一些事件，可以做一些简单的事情，比如从 SQL 服务器读取并从收到的查询中填充文本字段。很简单吧？现在，我需要向此框架添加更多选项卡，并且必须有多个选项卡。在每个选项卡中，我“必须”具有相同的组件/事件。所以我要问的是，如何将所有组件/事件/keylisteners 等（无论我在该选项卡内有什么）克隆到另一个选项卡？我总是可以从代码中添加具有不同名称的相同组件，但我需要找到一种方法来克隆整个选项卡..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:42:31.713

为什么不保留已有的组件而不复制它们，并找出一种方法来存储要在某种模型中显示的所有数据。您可以只创建一些按钮来模拟选项卡，并在单击一个按钮时显示与其关联的数据。

# ruby-on-rails - 如何使用 OR 语句创建 Active Record 选择查询？

> ID：11061810
> 
> 赞同：0
> 
> 时间：2012-06-16T08:08:07.690
> 
> 标签：ruby-on-rails, activerecord

这应该很简单，但我无法弄清楚语法。

我有一个 AR 查询

```
ActiveRecord::Base.connection.tables.select { |t| t != 'schema_migrations' } 
```

我想添加一个 OR 语句

```
ActiveRecord::Base.connection.tables.select { |t| t != 'schema_migrations' OR 'pg_search_documents' } 
```

什么是正确的语法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:19:49.097

正确的语法是：

```
ActiveRecord::Base.connection.tables.select { |t| t != 'schema_migrations' && t != 'pg_search_documents' } 
```

块内的代码只是一个 Ruby 表达式，需要返回一个布尔结果，因此您可以使用逻辑 AND 运算符`&&`来表达逻辑“表名不是 'schema_migrations' AND 表名不是 'pg_search_documents'”

也许表达相同逻辑的更简单方法是减去要过滤掉的表名数组，如下所示：

```
ActiveRecord::Base.connection.tables - ['schema_migrations', 'pg_search_documents'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:03:03.250

您可以将拒绝模式与 array 一起使用`include?`，因为它可以轻松地将更多表添加到拒绝列表中。

```
ActiveRecord::Base.connection.tables.reject do |t| 
  %w(schema_migrations pg_search_documents).include?(t)
end 
```

# android - 更改设备方向时如何停止再次调用 Activity？

> ID：11061817
> 
> 赞同：1
> 
> 时间：2012-06-16T08:09:34.653
> 
> 标签：android, android-intent

我的应用程序使用条形码扫描仪。我想在打开应用程序时启动扫描仪，所以我在 onCreate 方法中有它。问题是，如果我有这样的设备，当我转动设备时，它会再次调用 onCreate 并调用另一个扫描仪。

我还有第一个调用扫描仪的活动。它有一个菜单，所以如果用户按回，它会转到该菜单。如果我打开该菜单上的屏幕，它会再次进入条形码扫描仪。

为了解决这个问题，我有一个标志，表明这是否是我第一次调用扫描仪，如果不是我不再调用它。现在的问题是，如果我退出应用程序并再次进入，它不会进入扫描仪，而是进入菜单，因为这不是我第一次调用它。

有任何想法吗？当我退出主要活动或任何其他解决方案时，有没有办法更改标志？我的代码。

```
private static boolean first = true;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    integrator = new IntentIntegrator(this);
    if (first) {
        first = false;
        integrator.initiateScan();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:18:46.193

在您的应用程序 manifest.xml 中，将此添加到调用此条码扫描器的 Activity

```
android:configChanges="orientation" 
```

像这样

```
<activity
android:name=".YourActivity"
android:configChanges="orientation"
android:label="@string/app_name" /> 
```

它的作用是，当设备旋转时，它将“什么也不做”，这意味着它不会再次调用活动（最终避免调用 onCreate()）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:19:53.993

您可以覆盖 onResume 方法并进行任何您想要的更改。

```
public void onResume(Bundle savedInstanceState) {
    super.onResume();
//reset the flag here as you wish
} 
```

# python - 如何在 python 和 lxml 中找到具有某些值的标签

> ID：11061823
> 
> 赞同：2
> 
> 时间：2012-06-16T08:10:39.583
> 
> 标签：python, xml, lxml

我有一个具有以下结构的 xml 文件：

```
<main_tag>
   <first>
     <tag1>val1</tag1>
     <conf>
       <tag2>val2</tag2>
       <tag3>val3</tag3>
       <tag4>val4</tag4>
     </conf>
   </first>
   <second>
     <tag1>val2</tag1>
     <conf>
       <tag2>val6</tag2>
       <tag3>val7</tag3>
       <tag4>val8</tag4>
     </conf>
   </second>
</main_tag> 
```

我必须更改 tag2 的值。可能的值存储在字典中：

```
{tag2values:[newvalue1, newvalue2]} 
```

如果 tag1 的值为 val1，那么我们将 tag2 的值更改为 newvalue1。如果 tag1 的值为 val2，那么我们将 tag2 的值更改为 newvalue2。

所以问题是：有没有办法在 lxml 中找到与其父值匹配的元素？或者通过它的父邻居值找到一个元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T09:08:08.463

该[`.xpath`方法](http://lxml.de/xpathxslt.html#the-xpath-method)让您通过 XPath 1.0 表达式查找标签：

```
>>> from lxml import etree
>>> from cStringIO import StringIO
>>> tag2values = ['newvalue1', 'newvalue2']
>>> example = StringIO("""\
... <main_tag>
...    <first>
...      <tag1>val1</tag1>
...      <conf>
...        <tag2>val2</tag2>
...        <tag3>val3</tag3>
...        <tag4>val4</tag4>
...      </conf>
...    </first>
...    <second>
...      <tag1>val2</tag1>
...      <conf>
...        <tag2>val6</tag2>
...        <tag3>val7</tag3>
...        <tag4>val8</tag4>
...      </conf>
...    </second>
... </main_tag>
... """)
>>> tree = etree.parse(example)
>>> value1selector = '*/conf/tag2[../../tag1/text() = "val1"]'
>>> value2selector = '*/conf/tag2[../../tag1/text() = "val2"]'
>>> for elem in tree.xpath(value1selector):
...     elem.text = tag2values[0]
... 
>>> for elem in tree.xpath(value2selector):
...     elem.text = tag2values[1]
... 
>>> print(etree.tostring(tree, pretty_print=True))
<main_tag>
   <first>
     <tag1>val1</tag1>
     <conf>
       <tag2>newvalue1</tag2>
       <tag3>val3</tag3>
       <tag4>val4</tag4>
     </conf>
   </first>
   <second>
     <tag1>val2</tag1>
     <conf>
       <tag2>newvalue2</tag2>
       <tag3>val7</tag3>
       <tag4>val8</tag4>
     </conf>
   </second>
</main_tag> 
```

在上面的示例中，XPath 表达式`value1selector`为您提供了作为 ElementTree实例的 的所有`tag2`子元素，以及带有 text`conf`的兄弟`tag1`标签，因此替换它们的文本内容变得微不足道。`val1``Element`

# c# - IIS 7.5 虚拟目录运行时错误

> ID：11061824
> 
> 赞同：0
> 
> 时间：2012-06-16T08:10:41.937
> 
> 标签：c#, iis-7, asp.net-mvc-4, virtual-directory

我有 IIS 7.5 和一个网站

我添加了新的虚拟目录并得到`Runtime Error`

[http://ngg-l.com/admin](http://ngg-l.com/admin)

我尝试将此 Web 应用程序添加为新网站，一切正常，但它在虚拟目录中不起作用

有什么建议吗？

事件查看器警告：

```
Exception information: 
    Exception type: ConfigurationErrorsException 
    Exception message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS. (C:\inetpub\wwwroot\Admin\web.config line 49)
   at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Web.Configuration.RuntimeConfig.GetSectionObject(String sectionName)
   at System.Web.Configuration.RuntimeConfig.GetSection(String sectionName, Type type, ResultsIndex index)
   at System.Web.Configuration.RuntimeConfig.get_Identity()
   at System.Web.HttpContext.SetImpersonationEnabled()
   at System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context)

Request information: 
    Request URL: http://ngg-l.com/admin 
    Request path: /admin 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: IIS APPPOOL\NGG 

Thread information: 
    Thread ID: 13 
    Thread account name: IIS APPPOOL\NGG 
    Is impersonating: False 
    Stack trace:    at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Web.Configuration.RuntimeConfig.GetSectionObject(String sectionName)
   at System.Web.Configuration.RuntimeConfig.GetSection(String sectionName, Type type, ResultsIndex index)
   at System.Web.Configuration.RuntimeConfig.get_Identity()
   at System.Web.HttpContext.SetImpersonationEnabled()
   at System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:48:07.867

正如错误消息所示，您需要将添加的虚拟目录转换为应用程序。在 IIS 中右键单击它，您应该会看到执行此操作的选项。

# php - 当我将视频转换为 mp4 时 PHP FFMPEG 不起作用

> ID：11061828
> 
> 赞同：-6
> 
> 时间：2012-06-16T08:11:36.240
> 
> 标签：php, ffmpeg, mp4

我使用此代码将 youtube 视频转换为 mp4。但它需要很多时间。请任何人都可以帮助我。我的代码如下所示。

```
'ffmpeg -i "'.$from.'" -ab '.$audio.' -vb '.$video.' -vol '.$volume.' -ac 2 -acodec mp2 -ss '.$start.' -t '.$duration.' "/ebs/dls/mp4/'.$to.'_dl.mp4"' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:23:02.260

*“花费很多时间”*并不表示特定问题，或以任何其他方式有用：

1.  这仅意味着该过程花费的时间比您想要/预期的要长。您对应用程序的性能有什么要求？您可接受的延迟限制是多少？您想处理多少个视频，例如每小时？

2.  您确实意识到将视频文件转换为另一种格式是一个耗时的过程，对吧？该文件必须被解码然后再次编码，这是计算密集型的。此外，总时间与输入文件的长度和分辨率成正比。如果您希望在几秒钟内转换一部 1 小时的高清电影，您可能期望过高。

# javascript - 循环中的 Javascript 参考：“未捕获的 TypeError：无法读取未定义的属性‘值’”

> ID：11061832
> 
> 赞同：3
> 
> 时间：2012-06-16T08:13:44.847
> 
> 标签：javascript, forms, this, document

我尝试调试我的代码几个小时，但我什么也没得到。问题是，为什么每次我尝试在事件侦听器中使用 document.forms[0][i] *（i 作为迭代器）但***“this”**满足代码时它报告错误是绝对没有意义的。

```
//broken
var addListeners = function() {
    var i;
    var formFields = document.forms[0];
    var formSubmit = formFields["submit"];

    for (i = 0; i < formFields.length; i++) {
        if (formFields[i] != formSubmit) {
            formFields[i].onblur = (function () {
                checkNonEmpty(formFields[i]);
            });
        }
    }
};

//works
var addListeners = function() {
    var i;
    var formFields = document.forms[0];
    var formSubmit = formFields["submit"];

    for (i = 0; i < formFields.length; i++) {
        if (formFields[i] != formSubmit) {
            formFields[i].onblur = (function () {
                checkNonEmpty(this);
            });
        }
    }
}; 
```

**“this”**不是指 document.forms[0][i] 吗？... formFields 对 document.forms[0] 的引用。然而，完全相同的代码*（在 formFields[i] 所在的“this”处）*工作得很好。

这是演示：http: [//jsfiddle.net/PbHwy/](http://jsfiddle.net/PbHwy/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:17:35.610

因为您`formFields`在事件侦听器之外（或更好，不同）的范围内定义。调用事件侦听器时，它不是在`addListeners`您定义的函数中调用`formFields`，而是“独立”调用，因此引用丢失并且其值未定义（但`this`可以工作，因为它不依赖于该范围）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:24:06.737

[克拉尼奥的回答](https://stackoverflow.com/a/11061857/1139697)已经包含了问题的根源。要摆脱这种情况，您可以`formFields[i]`使用闭包来包含

```
var blurCallbackGenerator = function(element){
    return function () {
        checkNonEmpty(element);
    };
};
formFields[i].onblur = blurCallbackGenerator(formFields[i]);

/* // dense version:
formFields[i].onblur = (function(element){
    return function () {
        checkNonEmpty(element);
    };
})(formFields[i]);
*/ 
```

或简单地使用`this`.

也可以看看：

*   MDN：[在循环中创建闭包：一个常见错误](https://developer.mozilla.org/en/JavaScript/Guide/Closures#Creating_closures_in_loops:_A_common_mistake)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:20:14.127

问题是变量`i`（在您的每个处理程序中引用）在每个处理程序中都是*完全相同的变量*，当循环完成时，它具有值`formFields.length+1`，因此对所有处理程序都是错误的。试试这个[注意：在我编辑之前，下面的内容曾经说过一些非常错误的东西——感谢 Zeta 指出我的错误]：

```
var addListeners = function() {
    var i;
    var formFields = document.forms[0];
    var formSubmit = formFields["submit"];

    for (i = 0; i < formFields.length; i++) {
        if (formFields[i] != formSubmit) {
            formFields[i].onblur = (function(j) {
                return (function () {
                    checkNonEmpty(formFields[j]);
                })(i);
            });
        }
    }
}; 
```

你会发现它有效（除非有另一个我没有注意到的错误）。

如果您负担得起仅支持 Javascript 1.7 及更高版本，则可以改为编写旧代码，但让您的代码`for`看起来像这样：`for (let i=0; i<formFields.length; i++)`. 但你很可能做不到。

# objective-c - applicationBadgeNumber 未设置

> ID：11061840
> 
> 赞同：1
> 
> 时间：2012-06-16T08:14:50.097
> 
> 标签：objective-c, ios, xcode

我已经用 1 个视图控制器启动了一个应用程序。在应用程序委托中，我想在应用程序启动后将通知发送 1 分钟

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[phil_croweViewController alloc] initWithNibName:@"phil_croweViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    NSDate *mydate = [NSDate date];
    NSTimeInterval secondsInEightHours = 60;
    NSDate *dateOneMinsAhead = [mydate dateByAddingTimeInterval:secondsInEightHours];

    timeInTwoMinutes = [NSDateFormatter localizedStringFromDate:dateOneMinsAhead dateStyle:NSDateFormatterShortStyle timeStyle:NSDateFormatterShortStyle];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];

    localNotif.fireDate = dateOneMinsAhead;
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody = @"alert";
    localNotif.alertAction = @"View";
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 1;

    // Schedule the notification
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    NSLog(@"alert scheduled");

    return YES;
} 
```

除了 applicationBadgeNumber 没有显示 1 之外，这工作正常。我想了解 applicationBadgeNumber 的作用吗？是红色圆圈里面有数字吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:30:24.890

很可能是因为您的应用程序的“徽章应用程序图标”设置未在新通知中心打开。

![在此处输入图像描述](../Images/d09ebc78f18e6c457ccbd5da966680fb.png)

转到设置 > 通知。在“通知中心”部分或“不在通知中心”部分中找到您的应用，然后点击它。然后打开“徽章应用程序图标”设置。p/s：如果你的应用不在通知中心也没关系（即通知中心=OFF）；徽章图标设置确实生效

# iphone - glGenBuffers 和 glGenFramebuffers 和 glGenRenderbuffers 有什么区别

> ID：11061842
> 
> 赞同：7
> 
> 时间：2012-06-16T08:15:03.113
> 
> 标签：iphone, ios5, opengl-es-2.0

[http://www.khronos.org/opengles/sdk/docs/man/](http://www.khronos.org/opengles/sdk/docs/man/)中对它们的描述几乎相同。唯一的区别是名字

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-20T16:40:55.400

**glGenBuffers**为顶点数据等创建常规缓冲区。

**glGenFrameBuffers**创建一个帧缓冲区对象，主要用作离屏渲染的渲染目标。

**glGenRenderBuffers**创建一个渲染缓冲区对象，该对象专门与帧缓冲区对象一起用于所需的任何深度测试。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-16T08:20:25.653

[普通旧缓冲区与帧缓冲区和渲染缓冲区（用于屏幕外渲染](http://www.songho.ca/opengl/gl_fbo.html#renderbuffer)）之间存在差异。这些“glGen_ *_* ”函数的整体功能是相同的，但它们只是生成不同类型的缓冲区对象名称。

# iphone - 显示警报地址的 Facebook 集成无效

> ID：11061843
> 
> 赞同：2
> 
> 时间：2012-06-16T08:15:07.960
> 
> 标签：iphone, facebook

我是 iPhone 应用程序开发的新手。现在我正在为 iPhone 开发应用程序 在这个应用程序中，我需要将视频上传到 Facebook。我在下面的代码中使用。现在输入 Facebook 的用户名和密码。**显示错误消息警报。like safari 无法打开页面，因为地址无效。**

```
 - (void)viewDidLoad
{
    facebook = [[Facebook alloc] initWithAppId:@"Facebook_App_Id"];

                //@"com.facebook.samples.VideoUploadTest"];
    facebook.sessionDelegate = self;

}

- (IBAction)buttonClicked:(id)sender {
    NSArray* permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream", nil];
    [facebook authorize:permissions delegate:self];
    [permissions release];
}

- (void)fbDidLogin {
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"mov"];
    NSData *videoData = [NSData dataWithContentsOfFile:filePath];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, @"video.mov",
                                   @"video/quicktime", @"contentType",
                                   @"Video Test Title", @"title",
                                   @"Video Test Description", @"description",
                                   nil];
    [facebook requestWithGraphPath:@"me/videos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];
} 
```

从此网址引用[[http://developers.facebook.com/blog/post/532/]](http://developers.facebook.com/blog/post/532/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:45:56.997

有关 SSO 设置，请参阅此处。

[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

# python - 生成目录/子目录和文件

> ID：11061844
> 
> 赞同：0
> 
> 时间：2012-06-16T08:15:20.057
> 
> 标签：python, file-io

嗨，我目前是 python 语言的初学者，它也是我的第一语言。我需要一些帮助我发现很难知道使用什么来生成永久目录子目录和文件，例如；如果目录等不存在，我希望路径生成我输入的任何路径，我希望创建它们，所以我输入 C:\user\python\directory\sub-directory\file，然后我无法锻炼我应该做什么导入以完成以下工作。

我正在使用 Python 3.2，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:27:00.000

你可以做：

```
import os
os.makedirs('a/b/c', exist_ok=True) 
```

[http://docs.python.org/py3k/library/os.html](http://docs.python.org/py3k/library/os.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:27:03.173

```
f = open("c:\file\path","w")
f.write("content of file") 
```

首先，您打开文件，将其存储在变量`f`.

然后你写它，使用`f.write()`

我认为，如果文件和路径不存在，Python 将创建它。（我确定我以前做过，但我不记得了）

使用完文件后，您应该使用

```
f.close() 
```

安全地关闭文件。

# facebook - as3 安全错误 #2048

> ID：11061846
> 
> 赞同：1
> 
> 时间：2012-06-16T08:15:47.240
> 
> 标签：facebook, actionscript-3

我在 Facebook 上有一个 Flash 应用程序。我使用以下代码将图像发送到我的服务器：

```
var byte_array:ByteArray = PNGEncoder.encode(bitmap_data);
var encoded:String = Base64.encodeByteArray(byte_array);
var variables:URLVariables = new URLVariables();
variables.png = encoded;

var requestToMySite:URLRequest = new URLRequest();
requestToMySite.url = SITE_URL_HTTPS + 'copy.php';
requestToMySite.method=URLRequestMethod.POST;
requestToMySite.data = variables;
var loader : URLLoader = new URLLoader();  
loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
loader.addEventListener(Event.COMPLETE, onExportComplete);
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);
loader.load(requestToMySite); 
```

问题是它对某些人（比如我）很好用，但对另一些人却不起作用。我记录了问题，发现他们有一个 SecurityError ：

```
[SecurityErrorEvent type="securityError" bubbles=false cancelable=false eventPhase=2 text="Error #2048"] 
```

我不明白为什么它适用于某些人而不适用于其他人。也许是一个奇怪的巧合：它适用于在法国（4 名测试人员）而不是在国外（在瑞士进行测试，在比利时进行测试）的人。

我尝试输入以下 crossdomain.xml ：

```
<?xml version="1.0" ?>
<cross-domain-policy>
   <site-control permitted-cross-domain-policies="all"/>
   <allow-access-from domain="*" to-ports="*"/>
   <allow-http-request-headers-from domain="*" headers="*"/>
   <allow-http-request-headers-from domain="*"/>
</cross-domain-policy> 
```

我加载它

```
Security.loadPolicyFile(SITE_URL_HTTP + "crossdomain.xml"); 
```

（不是 https 网址）。但这并没有改变任何东西。

任何想法 ？

# ios - 使 uiview 跳跃 20px 的所有可能场景是什么？

> ID：11061847
> 
> 赞同：2
> 
> 时间：2012-06-16T08:15:56.747
> 
> 标签：ios, uiview

...

```
[[UIApplication sharedApplication] setStatusBarHidden:YES];

self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[window makeKeyAndVisible]; 
```

...

这是我的应用程序委托中的代码，它正在加载视图控制器（或根视图控制器）。此视图控制器执行一些检查并根据检查加载另一个视图。

但是viewcontroller加载的视图向上跳了20px，我对此进行了很多搜索，主要是状态栏受到指责，所以我试图隐藏它，但没有用。

请再告诉我一件事 initWithNibName 和 init 之间的区别似乎都在做同样的工作。

在搜索了很多之后仍然没有得到任何解决方案，这就是我想知道的原因，让 uiview 跳跃 20px 的所有可能场景是什么

...在这种情况下，手动调整视图大小不是一个好习惯。我想找出这种跳跃的实际原因，以便可以以标准方式解决问题，而不是通过黑客攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:19:35.420

与viewController 的区别在于，`initWithNibName`您可以为此 viewController nib 文件指定任何名称，其中 init 仅搜索要加载的特定 nib 名称`init``initWithNibName`

例如，如果你的 viewController 名称是`MyViewController`，那么当你调用 init 时，`MyViewController.xib`会搜索并加载带有 name 的 nib 控制器，如果你调用`initWithNibName`，你可以指定任何 nib 名称

关于跳跃问题，我猜是状态栏问题，请提供更多信息

# iphone - 将非活动 UIView 捕获为 UIImage

> ID：11061850
> 
> 赞同：2
> 
> 时间：2012-06-16T08:16:25.740
> 
> 标签：iphone, ios5, ios4

下面的代码运行良好，但只抓取屏幕上可见的 UIView。如何获取当前未显示的 UIView？

谢谢！

```
 //Take a screenshot of the view...
UIGraphicsBeginImageContext(View_1.frame.size);
    [View_1.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *View_1 = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(View_1, nil, nil, nil);

//...and attach it as an image to the email
NSData *myData3 = UIImagePNGRepresentation(View_1);
[picker addAttachmentData:myData3 mimeType:@"image/png" fileName:@"screenshot2"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:35:55.887

如果您的意思是隐藏，`view.hidden = YES;`那么您将无法绘制它，而不是隐藏它，您可以将其从超级视图中删除，或者甚至`view.hidden = NO;`在绘制之前调用，然后在绘制`view.hidden = YES;`之后调用

例子

```
//Take a screenshot of the view...
UIGraphicsBeginImageContext(View_1.frame.size);
//Set it to visible
View_1.hidden = NO;
[View_1.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *View_1 = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(View_1, nil, nil, nil);
//Hide it again
View_1.hidden = YES;
//...and attach it as an image to the email
NSData *myData3 = UIImagePNGRepresentation(View_1);
[picker addAttachmentData:myData3 mimeType:@"image/png" fileName:@"screenshot2"]; 
```

# php - 如何更改数据库行位置并维护php和mysql中的顺序

> ID：11061853
> 
> 赞同：3
> 
> 时间：2012-06-16T08:16:52.893
> 
> 标签：php, mysql, algorithm

我有一个 php 项目，我一直在使用 Doctrine 1.2.4、mysql 和 Zend（与问题无关）。有一项新要求，可以从管理面板中按位置更改团队成员在团队页面上的外观。

所以我在表格中添加了一个位置 int 列。现在主要的问题是改变位置和维持秩序。我一直在摸索，并找到了在 php 中使用数组的解决方法，但它有问题。这是我的方法：选择位置作为键，选择 id 作为数组中的值，然后对该数组进行重新排序，并根据重新排列的数组重新更新表。这是我的代码：

```
//here i use string as my id to be able to view the changes .  
//you can swap to this:
  $anarray = array("23", "12", "4", "6", "2");
//$anarray = array("car", "dog", "cow", "cup", "plane");

var_dump($anarray);

function preserveSort($oldposition, $newposition, $arraytosort) {
  // this assumes that there is no zero in position
  $oldposition--;$newposition--;
  $indice = $newposition - $oldposition;
  $tmpNewPosistionData = $arraytosort[$oldposition];
  if ($indice > 0) {

      for ($i = $oldposition; $i < $newposition; ++$i) {
          echo $i . "<br/>";
          $arraytosort[$i] = $arraytosort[$i + 1];
      }
  } else {
      for($i=$oldposition;$i >$newposition; $i--){
          echo $i."<br/>";
          $arraytosort[$i] = $arraytosort[$i-1];        
      }
  }
  $arraytosort[$newposition] = $tmpNewPosistionData;
  var_dump($arraytosort);
}

echo "<br/>";
echo "changing position 1 to 4 <br/>";
preserveSort(1, 4, $anarray); 
```

我认为它可以完美地工作，但经过一些尝试后，位置变得混乱了。我想知道是否有人已经解决了这个问题。如果是的话，我将不胜感激

感谢您阅读本文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:48:59.603

```
function move_element($input, $from, $to) { // I suggest $input as first paramter, to match the PHP array_* API
    // TODO: make sure $from and $to are within $input bounds
    // Assuming numeric and sequential (i.e. no gaps) keys
    if ($from == $to) {
        return $input;
    } else if ($from < $to) {
        return array_merge(
            array_slice($input, 0, $from),
            array_slice($input, $from +1, $to - $from),
            array($input[$from]),
            array_slice($input, $to +1, count($input) - $to)
        );
    } else if ($from > $to) {
        return array_merge(
            array_slice($input, 0, $to),
            array($input[$from]),
            array_slice($input, $to, $from - $to),
            array_slice($input, $from +1, count($input) - $from)
        );
    }
} 
```

# java - Hadoop - 直接从 Mapper 写入 HBase

> ID：11061854
> 
> 赞同：8
> 
> 时间：2012-06-16T08:17:00.970
> 
> 标签：java, hadoop, mapreduce, hbase

我有一个 haddop 工作，它的输出应该写入 HBase。我真的不需要reducer，我想插入的行类型在Mapper中确定。

如何使用 TableOutputFormat 来实现这一点？从我所看到的所有示例中，假设是 reducer 是创建 Put 的那个，而 TableMapper 只是用于从 HBase 表中读取。

在我的情况下，输入是 HDFS，输出是放入特定表，我在 TableMapReduceUtil 中找不到任何可以帮助我的东西。

有没有可以帮助我的例子？

顺便说一句，我正在使用新的 Hadoop API

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T10:08:06.310

这是从文件读取并将所有行放入 Hbase 的示例。此示例来自“Hbase：权威指南”，您可以在存储库中找到它。要获得它，只需在您的计算机上克隆 repo：

```
git clone git://github.com/larsgeorge/hbase-book.git 
```

在本书中，您还可以找到有关代码的所有解释。但是，如果您有什么不明白的地方，请随时提出。

```
`    public class ImportFromFile {
     public static final String NAME = "ImportFromFile"; 
     public enum Counters { LINES }

     static class ImportMapper
     extends Mapper<LongWritable, Text, ImmutableBytesWritable, Writable> { 
       private byte[] family = null;
       private byte[] qualifier = null;

       @Override
       protected void setup(Context context)
         throws IOException, InterruptedException {
         String column = context.getConfiguration().get("conf.column");
         byte[][] colkey = KeyValue.parseColumn(Bytes.toBytes(column));
         family = colkey[0];
         if (colkey.length > 1) {
           qualifier = colkey[1];
         }
       }

       @Override
       public void map(LongWritable offset, Text line, Context context) 
       throws IOException {
          try {
           String lineString = line.toString();
           byte[] rowkey = DigestUtils.md5(lineString); 
           Put put = new Put(rowkey);
           put.add(family, qualifier, Bytes.toBytes(lineString)); 
           context.write(new ImmutableBytesWritable(rowkey), put);
           context.getCounter(Counters.LINES).increment(1);
         } catch (Exception e) {
           e.printStackTrace();
         }
       }
     }

     private static CommandLine parseArgs(String[] args) throws ParseException { 
       Options options = new Options();
       Option o = new Option("t", "table", true,
         "table to import into (must exist)");
       o.setArgName("table-name");
       o.setRequired(true);
       options.addOption(o);
       o = new Option("c", "column", true,
         "column to store row data into (must exist)");
       o.setArgName("family:qualifier");
       o.setRequired(true);
       options.addOption(o);
       o = new Option("i", "input", true,
         "the directory or file to read from");
       o.setArgName("path-in-HDFS");
       o.setRequired(true);
       options.addOption(o);
       options.addOption("d", "debug", false, "switch on DEBUG log level");
       CommandLineParser parser = new PosixParser();
       CommandLine cmd = null;
       try {
         cmd = parser.parse(options, args);
       } catch (Exception e) {
         System.err.println("ERROR: " + e.getMessage() + "\n");
         HelpFormatter formatter = new HelpFormatter();
         formatter.printHelp(NAME + " ", options, true);
         System.exit(-1);
       }
       return cmd;
     }

     public static void main(String[] args) throws Exception {
       Configuration conf = HBaseConfiguration.create();
       String[] otherArgs =
         new GenericOptionsParser(conf, args).getRemainingArgs(); 
       CommandLine cmd = parseArgs(otherArgs);
       String table = cmd.getOptionValue("t");
       String input = cmd.getOptionValue("i");
       String column = cmd.getOptionValue("c");
       conf.set("conf.column", column);
       Job job = new Job(conf, "Import from file " + input + " into table " + table); 

            job.setJarByClass(ImportFromFile.class);
       job.setMapperClass(ImportMapper.class);
       job.setOutputFormatClass(TableOutputFormat.class);
       job.getConfiguration().set(TableOutputFormat.OUTPUT_TABLE, table);
       job.setOutputKeyClass(ImmutableBytesWritable.class);
       job.setOutputValueClass(Writable.class);
       job.setNumReduceTasks(0); 
       FileInputFormat.addInputPath(job, new Path(input));
       System.exit(job.waitForCompletion(true) ? 0 : 1);
     }
    }` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:25:55.950

你只需要让映射器输出这对。`OutputFormat`仅指定如何持久化输出键值。这并不一定意味着键值来自reducer。您需要在映射器中执行以下操作：

```
... extends TableMapper<ImmutableBytesWritable, Put>() {
    ...
    ...
    context.write(<some key>, <some Put or Delete object>);
} 
```

# php - 如何使用while循环连续制作4个项目？

> ID：11061856
> 
> 赞同：2
> 
> 时间：2012-06-16T08:17:30.237
> 
> 标签：php, mysql

我正在尝试从数据库中显示我的产品。我正在尝试使用 if 4%=0 来拆分它，但我无法让它连续显示 4 个项目。

**这是我的代码：**

```
<table>
<tr>
     <?php
        include "connect_to_mysql.php";
        $split = 0;
        $display_all = mysql_query("SELECT * FROM products 
            ORDER BY FIELD(category, 'ipad','iphone','others')");
        while($row=mysql_fetch_array($display_all)) {
        $id = $row['id'];
        $product_code = $row['product_code'];
        $title = $row['title'];
        $price = $row['price'];
        $split++;   
        if ($split%4==0){
        echo '</tr><tr>';   
        }
        ?>
        <td>
        <table class="normal_text" align="center">
        <tr>
        <td><a href="product.php?product_id=<?php echo $id?>">
            <img width="200px" height="133px" src="products/<?php echo $product_code?>.jpg" />
            </a></td>
        </tr>
        <tr>
        <td align="center" style="font-weight:bold"><?php echo $title;?></td>
        </tr>
        <tr>
        <td align="center">$<?php echo $price;?></td>
        </tr>
        </table>
        </td>
        <?php
        }
        ?>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:33:17.110

*您之前*已经获得了 PHP 逻辑，而不是*在*HTML 表格输出中。
尝试像这样重新组织：

```
<?php
include "connect_to_mysql.php";
$split = 0;
$display_all = mysql_query("SELECT * FROM products 
    ORDER BY FIELD(category, 'ipad','iphone','others')");
?>
<table class="normal_text" align="center">
<tr>
<?php
while($row=mysql_fetch_array($display_all)) {
    $id = $row['id'];
    $product_code = $row['product_code'];
    $title = $row['title'];
    $price = $row['price'];

    // output product details -- note use of quotes to include PHP vars
    $rowHTML = "<td><a href='product.php?product_id=$id'>";
    $rowHTML .= "<img width='200px' height='133px' src='products/$product_code.jpg' />";
    $rowHTML .= "</a><br/>";
    $rowHTML .= "<strong>$title</strong>";
    $rowHTML .= "$price</td>";
    echo $rowHTML;

    $split++;   
    if ($split%4==0){
        echo '</tr><tr>';
    }
}
?>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:39:22.393

```
while($row=mysql_fetch_assoc($display_all)) {
    $id = $row['id'];
    $product_code = $row['product_code'];
    $title = $row['title'];
    $price = $row['price'];
    if ($split % 4 === 0) echo "\n<tr>";
?> 
```

> > // 这里只写`<td>`代码`</td>`。没有`<tr>`和没有`</table>`

```
<?php
 if ($split % 4 === 3) echo "</tr>"; 
  $split++;
 }
?> 
```

您同时开始和结束，然后为每个放置表。你想从什么时候开始，`<tr>`什么时候`%4==0`结束。`</tr>``%4==3`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T08:36:10.757

而不是使用模数 ( `%`)，只需添加第二个名为 的变量`$cols`，将其分配给所需的列数，然后进行比较。例如：

```
 $rows = 1;
    $cols = 4;

    $display_all = mysql_query("SELECT * FROM products ORDER BY FIELD(category, 'ipad','iphone','others')");

    while($row=mysql_fetch_array($display_all)) {
    $id = $row['id'];
    $product_code = $row['product_code'];
    $title = $row['title'];
    $price = $row['price'];
    $split++;   
    if ($rows==$cols){
        echo '</tr><tr>'; 
        $rows = 1;
    } 
```

# c - 为什么我看不到在 netstat / ifconfig 中运行的服务器？

> ID：11061859
> 
> 赞同：3
> 
> 时间：2012-06-16T08:19:00.060
> 
> 标签：c, macos, bash, sockets

我在 unix 下的 c 中的服务器代码有此代码：

```
/* A simple server in the internet domain using TCP
   The port number is passed as an argument */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

int main(int argc, char *argv[])
{
     int sockfd, newsockfd, portno;
     socklen_t clilen;
     char buffer[256];
     struct sockaddr_in serv_addr, cli_addr;
     int n;
     if (argc < 2) {
         fprintf(stderr,"ERROR, no port provided\n");
         exit(1);
     }
     sockfd = socket(AF_INET, SOCK_STREAM, 0);
     if (sockfd < 0) 
        error("ERROR opening socket");
     bzero((char *) &serv_addr, sizeof(serv_addr));
     portno = atoi(argv[1]);
     serv_addr.sin_family = AF_INET;
     serv_addr.sin_addr.s_addr = INADDR_ANY;
     serv_addr.sin_port = htons(portno);
     if (bind(sockfd, (struct sockaddr *) &serv_addr,
              sizeof(serv_addr)) < 0) 
              error("ERROR on binding");
     listen(sockfd,5);
     clilen = sizeof(cli_addr);
     newsockfd = accept(sockfd, 
                 (struct sockaddr *) &cli_addr, 
                 &clilen);
     if (newsockfd < 0) 
          error("ERROR on accept");
     bzero(buffer,256);
     n = read(newsockfd,buffer,255);
     if (n < 0) error("ERROR reading from socket");
     printf("Here is the message: %s\n",buffer);
     n = write(newsockfd,"I got your message",18);
     if (n < 0) error("ERROR writing to socket");
     close(newsockfd);
     close(sockfd);
     return 0; 
} 
```

[我从这里](http://www.linuxhowtos.org/C_C++/socket.htm)拿了这段代码。

我在端口上运行代码`8888` 我的问题是为什么我在 bash 中运行这些命令时看不到它：

```
netstat -a | grep 8888 
```

或者

```
ifconfig -a | grep 8888 
```

但如果我这样做：

```
sudo cat /etc/services | grep 8888 
```

我能看到它。

我可以使用其他任何相关的 shell 命令来查看它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:24:15.373

`/etc/services`如果您的文件中列出了端口 8888 ，则将`netstat`端口号替换为此处给出的名称。这就是`grep`找不到的原因。`-n`您可以使用以下标志将其关闭：

```
$ netstat -a
...
tcp        0      0 *:ssh                   *:*                     LISTEN     
...
$ netstat -an
...
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
... 
```

我通常`netstat -lpn -t tcp`只显示正在监听的 TCP 套接字；那么这个列表通常足够短，可以用我的眼睛 grep。该`-p`标志显示正在收听的节目，这通常很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:30:05.670

除了**Thomas**所说的 - 我不认为**ifconfig**有一种机制来识别机器上的开放端口：它是一个用于接口配置的实用程序，而不是用于服务/端口公开。**此外，打开套接字和/etc/services**之间没有*动态*关系，因为后者是描述已知（常规）端口映射的静态文件 - 这意味着，运行具有网络功能的代码不会对上述文件进行任何更改.

 **您可以使用：

> lsof -ni

或者

> lsof -ni:8888

用于所需端口的直接状态识别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T21:25:25.400

您可以使用

```
netstat -na 
```

反而**

# ruby - 如何调试被静默忽略的插件？

> ID：11061865
> 
> 赞同：7
> 
> 时间：2012-06-16T08:19:43.487
> 
> 标签：ruby, plugins, jekyll

这里是 Jekyll 的新人（之前在海德）。

*   放置在 _plugins/ 目录中的 Ruby 文件显然会被忽略。
*   我在 Ubuntu 12.04 上使用 0.11.2 版的 Jekyll，以及 ruby​​ 1.8.7。

是否应该添加额外的配置参数来加载这些插件？文档没有这么说 - 理智的默认值应该是查看_plugins，它们应该是自动需要的。如何调试 Jekyll 插件的加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:21:36.677

对于我的 jekyll 实例（也是 0.11.2，但在 Mac 上使用 ruby​​ 1.9.2p290），我不必添加任何额外的配置，但您可以尝试将以下行添加到顶层“_config.yml”文件。

```
plugins:     _plugins 
```

或者，可能，

```
plugins:     ./_plugins 
```

* * *

测试您的插件是否正常工作的最简单方法是删除所有插件，除了您知道可以工作的插件。我汇总了以下内容，这些内容在我的安装中按预期工作。

1.  在 jekyll 源目录的根目录中创建一个名为“plugin_test.md”的新文件，其内容如下：

    ```
    ---
    layout: default
    title: Plugin Test
    ---

    the quick brown fox jumps over the lazy dog.

    Testing plugin output of '_plugins/testplugin.rb': {% testplugin %} 
    ```

    请注意，您可能需要将“布局：默认”更改为您实际使用的任何内容。

2.  在“_plugins/testplugin.rb”创建一个新文件，内容如下：

    ```
    module Jekyll
      class TestPlugin < Liquid::Tag
        def render(context)
          "It's Working!"
        end
      end
    end

    Liquid::Template.register_tag('testplugin', Jekyll::TestPlugin) 
    ```

3.  在源目录上运行 jekyll。

testplugin.rb 所做的只是用`{% testplugin %}`文本“它正在工作！”替换液体标签的实例。如果您的插件正在触发，您将看到输出

```
Testing plugin output of '_plugins/testplugin.rb': It's Working!" 
```

在输出站点根目录的“plugin_test.html”页面上。如果你看到：

```
Testing plugin output of '_plugins/testplugin.rb': 
```

这意味着插件没有触发。如果您遇到这种情况，我认为这表明某些东西很不正常，并且建议您重新安装 jekyll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-15T21:36:53.210

我知道我有点晚了，但对于仍然遇到这个问题的其他人，我想添加我的解决方案：重新启动服务器以使新添加的插件正常工作。所以停止`jekyll serve`(Ctrl C) 并用 重新启动它`jekyll serve`。

# batch-file - 如何在 CMD 中检测字符串中的数字

> ID：11061870
> 
> 赞同：0
> 
> 时间：2012-06-16T08:20:14.810
> 
> 标签：batch-file, cmd

我尝试解析文件并需要检测标签中每一列的数字。我需要检测：

1.  如果有号码
2.  如果数字是 1-3 位数字。
3.  如果在开头、结尾或分隔点处有一个点（我可以用字符串替换对点进行最后两次检测，但检测到我不知道的数字）。

我已经有了在标签中提取数据的 for 循环：

```
for %%Z in (hide_2.htm) do (
    for /F "tokens=1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20 delims=<>" %%A on ('grep -B 1411 -E "</table>" %%Z ^| grep -E ^"^(display^|^^\d\d{1,3}^|country^|^<td^>HTTP^|rightborder^).*$^" ') do (
        echo A:%%A + %%B + %%C + %%D + %%E + %%F + %%G + %%H + %%I + %%J + %%K + %%L
        pause
    )
) 
```

输入为：A: + td + span + span + **41** + /span + span style="display: none;" + **111** + /span + div + +
A: style="display: none;" + **190** + /div + span class="" style="" + **.** + /span + span + **197** + /span + span + +
A: style="display: none;" + **24** + /跨度 + 跨度 + /跨度 + **。**+ span style="display: + + + +
A:inline;" + **132** + /span + span style="display: none;" + **39** + /跨度 + **。**+ 跨度 + + + +
A:style="display: inline;" + 186 + /span + /span + /td + + + + + + +
A: + td rel="rw" + span class="country" + img + + + + + + + +
A: + td + HTTPS + /td + + + + + + + +

源数据取自[这里](http://codepaste.net/1kj4xb)。

**编辑：** 最好是保留两个变量。第一个变量保留数字，第二个变量保留点或标记（如果点存在）。

**Edit2：** 输入值可以是例如：120,132,186,24,111,41,., or .120,.132,.186,.24,.111,.41 ...这些值可以在任何列中。

**Edit3：** 数字总是在列的末尾。点可以在开始，但不能在数字变量的结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:55:46.917

```
set "$=0" &if defined $ if !$! equ +!$! echo. isNumber: '!$!'
set "$=NaN" &if defined $ if !$! equ +!$! echo. isNumber: '!$!'

if "%VAR%" neq "" if %VAR% equ +%VAR% echo. %VAR% is a number. 
```

Solution by Ed Dyreen, thanks!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T00:03:55.510

可能最简单和最灵活的方法是使用[`findstr`命令](http://ss64.com/nt/findstr.html "查找字符串")：

```
@echo off
set "_VALUE=%~1" & rem // (take value from first command line argument)

cmd /V /C echo(!_VALUE!| > nul findstr /R /X ^
    /C:"00*" /C:"[-+]00*" ^
    /C:"[123456789][0123456789]*" ^
    /C:"[-+][123456789][0123456789]*" ^
    && echo The value "%_VALUE%" is numeric. 
```

您可以指定多个搜索字符串，其中一个必须匹配才能将值视为数字。

额外的`cmd`实例旨在启用[延迟扩展](http://ss64.com/nt/delayedexpansion.html "启用延迟扩展")（由于），即使使用不平衡的引号和特殊字符（例如, `/V`），也需要能够处理每个任意字符串。如果不能发生这种情况，您可以用 替换该部分。`echo``^``&``cmd /V /C echo(!_VALUE!``echo(%_VALUE%`

# c# - 动态创建一个 ImageButton

> ID：11061872
> 
> 赞同：3
> 
> 时间：2012-06-16T08:20:28.820
> 
> 标签：c#, asp.net

我正在尝试动态声明一个 ImageButton。

我声明它并为其分配一个 ID 和图像，如下所示：

```
ImageButton btn = new ImageButton();
btn.ImageUrl = "img/Delete.png";
btn.ID = oa1[i] + "_" + i;
btn.OnClick = "someMethod"; 
```

但是，当我尝试为按钮分配 OnClick 处理程序时，它会引发以下异常：

```
System.Web.UI.WebControls.ImageButton.OnClick is inaccessible due to protection level 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:22:13.250

你不能给这样的方法赋值，即使它*是*可访问的。您需要订阅该事件：

```
btn.Click += ClickHandlingMethod; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T08:30:44.660

一个例子：

```
private void CreateAButton()
{
    var button = new ImageButton();
    button.ImageUrl = "yourimage.png";
    button.ID = "Button1";
    button.Click += ButtonClick;

    Page.Form.Controls.Add(button);
}

private void ButtonClick(object sender, ImageClickEventArgs e)
{
    // Do stuff here
    // ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T08:32:40.523

看看这个[答案](https://stackoverflow.com/a/11061782/1268570)，它与动态控件和事件有关

正如 Jon 评论的那样，您不能向事件添加字符串，在这种情况下，您需要为事件添加处理程序：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        var i = new ImageButton();
        i.Click += new ImageClickEventHandler(i_Click);
        this.myPanel.Controls.Add(i);
    }

    void i_Click(object sender, ImageClickEventArgs e)
    {
        // do something
    } 
```

替代利

```
 protected void Page_Init(object sender, EventArgs e)
    {
        var i = new ImageButton();
        i.Click += (source, args) =>
        {
            // do something
        };
        this.myPanel.Controls.Add(i);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T09:15:11.413

您可以使用此代码（一项重大更改）：

```
private void CreateAButton()
    {
        var button = new ImageButton();
        button.ImageUrl = "yourimage.png";
        button.ID = "Button1";           
        button.PostBackUrl = "http://www.towi.lt";
        Page.Form.Controls.Add(button);
    } 
```

技巧在“PostBackUrl”中。如果您编写正确的链接，它将重定向到它（如示例所示）。在其他情况下，这将添加原始服务器名称、“/”和您输入的文本。例如 'xxx' 将变成“ [http://yourservername/xxx](http://yourservername/xxx) ”。当您使用重定向到同一个 ISS 但不同的站点并为用户动态创建按钮时，它非常有用。

# java - 如何显示变量的值？- 安卓

> ID：11061878
> 
> 赞同：0
> 
> 时间：2012-06-16T08:21:29.400
> 
> 标签：java, android, variables, textview, show

我想在 TextView 中显示变量的值，例如 php 中的 echo ..

我会解释......我有一个名为“ **contadorRegistros** ”的变量，它存储应用程序的记录数......我想在 TextView 中显示它的值......

在php中我会这样做：

```
<php

echo "this is my variable $contadorRegistros"

?> 
```

如何在安卓上做到这一点？

对不起我的英语......我是巴西人..

编辑：

我可以使用以下代码显示文本：

```
TextView t = (TextView) findViewById (R.id.tvCont);
t.setText ("Test"); 
```

但是当我通过我想要的变量切换“测试”时，它不起作用：

```
TextView t = (TextView) findViewById (R.id.tvCont);
t.setText (contadorRegistros); 
```

* * *

我可以为工作做什么？=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:29:14.080

你想要在你的java代码中这样的东西：

```
t=new TextView(this);

t=(TextView)findViewById(R.id.TextView1); 
t.setText("I changed the text"); 
```

R.id 必须按照您命名文本视图的方式进行更改。此外，只需创建一个字符串并将您的变量名称添加到字符串中。然后让 setText 显示它。

编辑：另见[http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:47:38.477

如果你的变量是一个 int 那么做这样的事情会有所帮助，

```
t.setText (contadorRegistros+""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:52:39.937

该数字没有显示，因为它是一个整数，而 setText() 方法将 String 或 CharSequence 作为其参数。因此，您应该首先将数字转换为字符串。只有这样您才能在 setText() 方法中使用它。你可以这样做：

```
 t.setText(Integer.toString(contadorRegistros)); 
```

# c++ - 使用 WinAPI/C++ 在 Windows 上的进程之间进行多读单写同步锁

> ID：11061890
> 
> 赞同：0
> 
> 时间：2012-06-16T08:23:58.307
> 
> 标签：c++, windows, winapi, synchronization, readerwriterlock

有一种众所周知的算法，它使用纯 WinAPI/C++ 在 Windows 平台上的单个进程的线程之间使用读取器/写入器锁同步：

[这是一个例子](http://www.glennslayden.com/code/win32/reader-writer-lock)

在我的情况下，我需要在多个进程之间执行此操作，即作者在一个进程中，而读者在其他进程中。知道怎么做吗？

PS。对于一个已经开发的项目，我需要这个，所以我不能使用 C++/MFC 或纯 WinAPI 以外的任何东西。换句话说，我不能使用 Boost 或类似的扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:58:40.530

您可以使用相同的算法，但`CriticalSection`可以使用WinAPI 中的[互斥锁来代替。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)
如果您对 Mutex 对象使用相同的名称，则可以在多个进程中使用它们。

# blackberry - 单击列表时如何显示详细信息？

> ID：11061900
> 
> 赞同：0
> 
> 时间：2012-06-16T08:25:59.967
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

嗨，朋友，我想在单击带有图像（位置）的此列表字段时显示详细信息，这意味着您要花很长时间并用它显示图像地图。所以请帮我解决这个问题。

怎么可能请帮助我。谢谢

[在此链接上显示我也创建的列表字段，就像这个 listfiled 一样，当我单击并显示带有图像映射的详细信息时](https://stackoverflow.com/questions/1872160/how-to-customize-a-list-field-in-blackberry)

怎么可能请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:47:23.037

您可以将图像映射字符串 URI 或位图字节传递到另一个屏幕并显示它
`UiApplication.getUiApplication().invokeLater(new Runnable(){ public void run() { UiApplication.getUiApplication().pushScreen(new NewsScreen(IMAGE MAP STRING));
} });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:14:08.873

在这里，我给出一些示例，试试这个（为列表视图中的每个字段分配索引）。您可以在 NewsScreen() 中显示您的详细信息。

```
protected boolean navigationClick(int status, int time) {
    int index;
    System.out.println("CLICKED!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");

    index = this.getFieldWithFocusIndex();

    UiApplication.getUiApplication().invokeLater(new Runnable(){
        public void run() {
            UiApplication.getUiApplication().pushScreen(new NewsScreen());      
        }
    });

    System.out.println("OUTPUTTTTTTTTTTTTTTT"+this.getFieldWithFocusIndex());
    return true;
} 
```

# python - 如何使用 Python 的 stdlib 可移植地查找本地 IPv4 _and_ IPv6 地址？

> ID：11061901
> 
> 赞同：0
> 
> 时间：2012-06-16T08:26:08.307
> 
> 标签：python

我有兴趣枚举系统上的*所有*本地 ipv4*和*ipv6 地址。

解决方案需要是纯python（无需脱壳）。

理想情况下它是可移植的（Linux、OSX、Windows），但我怀疑这是可能的，所以每个平台的答案也可以工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:40:57.583

没有便携的方法可以做到这一点。

在 Linux 上，您可以使用fcntl.ioctl [（](http://docs.python.org/library/fcntl.html#fcntl.ioctl)`op=SIOCGIFCONF`定义为 0x8912）。

如果您愿意使用图书馆，请查看[netifaces](http://pypi.python.org/pypi/netifaces/)。它完全满足您的需求，并支持 Linux、Mac、Solaris 和 Windows。[这个答案](https://stackoverflow.com/a/8287065/298054)可能会给你和想法。

# java - 找不到 Java -cp 类

> ID：11061905
> 
> 赞同：4
> 
> 时间：2012-06-16T08:26:25.420
> 
> 标签：java, classpath

```
java -server -Xmx2G -cp config:./* l2p.loginserver.LoginServer

MAC: OK!
WINDOWS: Cannot find class l2p.loginserver.LoginServer
LINUX: Cannot find class l2p.loginserver.LoginServer 
```

附加信息：jar 文件名为 kernel.jar，它位于执行命令的同一文件夹中

如果我使用 java -server -cp kernel.jar l2p.loginserver.LoginServer 类开始加载，但我需要配置，因为我在那里有 log4j xml。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:29:02.940

看到[这个答案](https://stackoverflow.com/a/10847949/373151)

在 java 类路径中，如果使用通配符 *，它只会`.jar`从该位置加载文件。

```
java -server -Xmx2G -cp config:kernel.jar l2p.loginserver.LoginServer 
```

log4j 的问题是类路径中的第一个 log4j.xml 将被加载。所以把配置放在前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:29:33.767

我不认为你可以在`-cp`争论中使用这样的通配符。它们不会以正确的方式扩展，根据需要用冒号分隔。尝试

```
java -cp config:kernel.jar l2p.loginserver.LoginServer 
```

（当然，还有你需要的其他论点。）

请注意，这是假设您使用的是 Unix。在 Windows 上，您需要

```
java -cp config;kernel.jar l2p.loginserver.LoginServer 
```

（路径分隔符`;`在 Windows 上，但`:`在 Unix 上。）

# android - sqlite 中的错误：无法在行中打开文件

> ID：11061909
> 
> 赞同：3
> 
> 时间：2012-06-16T08:27:08.813
> 
> 标签：android, sqlite

我像往常一样创建了一个数据库，但今天我收到了这个错误，我无法理解我的数据库有什么问题。

我试过用谷歌搜索，但这里没有答案我下面的代码用于创建数据库

```
error in sqlite : cannot open file at line 27701 of [8609a15dfa], 
```

```
 public static final String ProvinceTable = "Provinces";
            public static final String COLUMN_PID = "PID";
            public static final String COLUMN_PName = "ProvinceNames";

     public void onCreate(SQLiteDatabase db )
       {
        try {
     db.execSQL(" CREATE TABLE " + ProvinceTable + " (" + COLUMN_PID + " INTEGER PRIMARY KEY  AUTOINCREMENT, " + COLUMN_PName + " TEXT)" );

    }

  public void onUpgrade(SQLiteDatabase db, int oldVersion , int newVesion) {

    Log.w(TAG, "Upgrading database from version " + oldVersion + "to"
            + newVesion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + Cities_TABLE);

    onCreate(db);

      } 
    } 
```

活动中

```
public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);
        setContentView(R.layout.insertstock);       

        DBAdapter db = new DBAdapter(this);

        db.open();

       Log.d("Adding", "Added");

       long id = db.insertRecord("name", "surname","***",  "address", "email", "number","province", "City", "payment", "delivery", "cardnumber", "username","password");            

       db.close();

 }
} 
```

* * *

我在 logcat 中遇到了这个很长的错误。请帮我。

```
06-16 10:23:17.741: I/SqliteDatabaseCpp(5397): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/de.vogella.android.locationapi.simple/databases/DataInfo.db
06-16 10:23:17.741: I/SqliteDatabaseCpp(5397): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/data/data/de.vogella.android.locationapi.simple/databases/DataInfo.db, db=/data/data/de.vogella.android.locationapi.simple/databases/DataInfo.db
06-16 10:23:17.741: E/SqliteDatabaseCpp(5397): sqlite3_open_v2("/data/data/de.vogella.android.locationapi.simple/databases/DataInfo.db", &handle, 6, NULL) failed
06-16 10:23:17.811: E/SQLiteDatabase(5397): Failed to open the database. closing it.
06-16 10:23:17.811: E/SQLiteDatabase(5397): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:734)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at de.vogella.android.locationapi.simple.DBAdapter.open(DBAdapter.java:125)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at de.vogella.android.locationapi.simple.InsertStock.onCreate(InsertStock.java:22)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.os.Looper.loop(Looper.java:132)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at android.app.ActivityThread.main(ActivityThread.java:4025)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at java.lang.reflect.Method.invokeNative(Native Method)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at java.lang.reflect.Method.invoke(Method.java:491)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-16 10:23:17.811: E/SQLiteDatabase(5397):     at dalvik.system.NativeStart.main(Native Method)
06-16 10:23:17.831: D/AndroidRuntime(5397): Shutting down VM
06-16 10:23:17.831: W/dalvikvm(5397): threadid=1: thread exiting with uncaught exception (group=0x40014760)
06-16 10:23:17.871: E/AndroidRuntime(5397): FATAL EXCEPTION: main
06-16 10:23:17.871: E/AndroidRuntime(5397): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.vogella.android.locationapi.simple/de.vogella.android.locationapi.simple.InsertStock}: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.os.Looper.loop(Looper.java:132)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread.main(ActivityThread.java:4025)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at java.lang.reflect.Method.invokeNative(Native Method)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at java.lang.reflect.Method.invoke(Method.java:491)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at dalvik.system.NativeStart.main(Native Method)
06-16 10:23:17.871: E/AndroidRuntime(5397): Caused by: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1021)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:734)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at de.vogella.android.locationapi.simple.DBAdapter.open(DBAdapter.java:125)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at de.vogella.android.locationapi.simple.InsertStock.onCreate(InsertStock.java:22)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
06-16 10:23:17.871: E/AndroidRuntime(5397):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
06-16 10:23:17.871: E/AndroidRuntime(5397):     ... 11 more 
```

# shell - 通过 Shell 打开 .tar.gz 以安装 Apache Maven 时出错

> ID：11061910
> 
> 赞同：1
> 
> 时间：2012-06-16T08:27:09.327
> 
> 标签：shell, maven, jung, unpack, gzip

**机器：**

Mac OSX 10.5.8 32 位。

* * *

**目标：**

[按照其网站说明](http://maven.apache.org/download.html)安装 apache maven ，以便根据其[安装说明](http://sourceforge.net/apps/trac/jung/wiki/JUNGManual)安装 JUNG 包，这样我就可以在各种 Java GUI 中使用 JUNG 类。

* * *

**我做了什么：**

下载了一个 .tar.gz 文件，并使用 shell，将其移动到我为它创建的目录（使用*mv ）（使用**mkdir*），*usr/local/apache-maven*根据网站说明我下载了文件*apache-maven- 3.0.4-bin.tar.gz*。接下来，我尝试使用*tar -zxvf apache-maven-3.0.4-bin.tar.gz*提取文件。

* * *

**错误：**

当我尝试在 shell 中提取 apache-maven .gz（安装？）文件时收到错误消息。

```
tar: apache-maven-3.0.4/direcoryandfile: Cannot open: No such file or directory
... 
apache-maven-3.0.4/lib/ext: Cannot mkdir: No such file or directory apache-maven-3.0.4/lib/ext/README.txt 
tar: apache-maven-3.0.4/lib/ext/README.txt: Cannot open: No such file or directory tar:       
Error exit delayed from previous errors 
```

* * *

**指示：**

对于 Maven 建筑物

> 1.  将分发存档，即 apache-maven-3.0.4-bin.tar.gz 解压缩到您希望安装 Maven 3.0.4 的目录... 将从存档创建子目录 apache-maven-3.0.4。...

用于 JUNG 安装

> 附录：如何构建 JUNG
> 
> 获取 Maven
> 
> 从 maven.apache.org 下载并安装 maven2：[http](http://maven.apache.org/download.html) ://maven.apache.org/download.html 。在撰写本文时（2012 年 6 月上旬），最新版本是 maven-3.0.4。安装下载的maven2（Maven官网有安装说明）。
> 
> 按照安装说明并通过在命令终端窗口中键入“mvn --version”来确认安装成功。

* * *

**自我纠正尝试**

据我所知，存档文件缺少一些目录或其他东西。我尝试删除该文件，从另一个镜像重新下载 .tar.gz 文件并重复该过程。结果相同。再次感谢您的帮助

* * *

**背景：**

我正在尝试将[JUNG](http://jung.sourceforge.net/index.html)包安装到我系统的 Java 中，因此我可以使用 JUNG 中的类使用各种 GUI（Ecliplse，Java 博士）编写面向对象的代码。我不明白构建/安装过程是如何工作的，以及如何让我构建/安装的东西在各种 GUI 和命令行上工作。我是 shell 和命令行的新手，并且大多有使用简单 IDE（DrJava、Python IDLE、R GUI）编写和编译面向对象代码的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:23:15.947

要解压 tar.gz 存档，您需要分两步完成：

```
gunzip apache-maven-3.0.4.tar.gz 
tar -xf apache-maven-3.0.4.tar 
```

或者您可以尝试一步完成：

```
tar -zxf apache-maven-3.0.4.tar.gz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:28:45.590

[两步过程](https://stackoverflow.com/a/11588491/1077083)： 1.使用*gunzip*从*.tar.gz中提取**.tar*，并使用*-v*让*gunzip*打印它在做什么。 2.使用*tar提取**.tar*文件，*-x*告诉程序进行提取，*-v*让*tar*打印它在做什么，*-f*让*tar*知道以下文件是存档并附加*sudo*所以*tar*有权创建目录。****`gunzip -v apache-maven-3.0.4.tar.gz`*********`sudo tar -xvf apache-maven-3.0.4.tar`*************

# javascript - 在 Ajax 请求中以 JSON 格式包含服务器端信息的可取性

> ID：11061912
> 
> 赞同：1
> 
> 时间：2012-06-16T08:27:20.617
> 
> 标签：javascript, json, yui, security

我正在为教师和学生开发一个材料交换网站。该材料是机密的，因为它是我们的，我们不希望其他教官窃取它。另一方面，它没有个人或敏感信息，因此安全性不是一个大问题。如果你偷了我的语法练习，我不会起诉你。我在 Codeigniter 框架中使用 Ion Auth，对此我很满意。我使用 YUI 2.8 来显示可编辑的数据表和可编辑的树。基于 Codeigniter MVC 框架，我有一个控制器来处理 Ajax 请求。当我通过 YUI Connection 类发布请求时，我传递了一个称为`data`唯一参数的序列化对象，该参数来自通过将配置对象传递给客户端组装的 JSON 对象，`YAHOO.si.factory.Method`如下所示：

```
addTreeNode: new YAHOO.si.factory.Method({
    className: "instructors_model",
    methodName: "add_exercise_tree_node",
    key: "id",
    mode: "child",
    fields: ['n0', 'n1','n2', 'n3'],
    params: [{
        key: "nodeData",
        name: "nodeData",
        type: "text",
        direction: "IN",
        value: "34"
    },{
        key: "name",
        name: "name",
        type: "text",
        direction: "IN",
        value: "Grammar"
    }],
    success: "You have successfully added a node to the tree."      
}), 
```

控制器解析由 组装的 JSON 字符串，`YAHOO.si.factory.Method`并确定它必须调用`add_exercise_tree_node`并`instructors_model`传递 2 个参数。该`add_exercise_tree_node`方法在数据库上执行脏工作，并希望返回成功消息。如果是这样，则在客户端显示成功消息，并更新树以包含新节点。

我的问题是，我是否在这个纯文本查询字符串中泄露了太多关于服务器的信息？这是一个帖子，因此它不会出现在 URL 中，但当然它在诸如 Firebug 控制台之类的东西中是完全可见的。

当然，这个问题背后的问题是，对于在 MVC 框架中分配 Ajax 的责任，你们那里的安全专家有什么建议？我希望只有一个控制器负责处理 Ajax 请求的可管理性，所以我最终在客户端出现了一个稍微复杂（而且不安全？）的重载。您对此有何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T11:20:01.673

我在评论中的主张是，您违背了 MVC 范式中 RESTful 架构的目的，主要是关注“所有 AJAX 调用都转到一个控制器”。所以让我们把它分解成可用的东西，然后重建我们对为什么/如何的理解。

REST 只是表示[代表性状态传输](http://en.wikipedia.org/wiki/Representational_state_transfer)，但这不是我们所说的 REST 或 RESTful的*意思。*我们的意思是我们希望每个 URL 代表一种资源，并且我们使用[动词](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)来指示我们对每个请求所做的事情。所以“GET”、“POST”、“PUT”等都有一个目的，我们使用这个目的来决定我们如何与各个资源进行交互。

所以让我们把它放在眼里，让我们做点什么；考虑一个 HR 应用程序（这是人们采用的那些简单的应用程序之一）。我们有人员和部门。部门有一个 ID、一个名称和一个经理（他是一个人）。人们有一个 ID、一个姓名、一个经理（在我们的系统中可能是 -1 表示没有经理，或一个人的 ID）和一个电话号码。

当我们 HTTP GET [http://server.domain/app/Person](http://server.domain/app/Person)时，我们会得到一个所有人的目录，其中包含他们的姓名和 ID。

```
[ {Name: "Cole Brand", ID: 1}, {Name: "user341180", ID: 2} ] 
```

当我们 HTTP GET [http://server.domain/app/Person/1](http://server.domain/app/Person/1)我们得到

```
{ Name: "Cole Brand", ID: 1, Manager: -1, "Phone Number": "222-555-1234" } 
```

当我们 HTTP GET [http://server.domain/app/Person/2](http://server.domain/app/Person/2)我们得到

```
{ Name: "user341180", ID: 2, Manager: 1, "Phone Number": "222-555-6789" } 
```

为了完整起见，列出部门列表：

HTTP GET [http://server.domain/app/Department/](http://server.domain/app/Department/)

```
{ Name: "HR", Manager: 1 } 
```

现在显然，我的示例有点枯燥，因为例如，员工肯定在一个部门工作，但我没有通过他们的个人资料将他们与该部门相关联。数据库肯定会跟踪它，但我们这里没有。这是一个简单的例子。

所以你可以从这里看到没有返回 HTML。我们将回到这一点。

对于下一部分，请注意我一直在使用 HTTP GET。如果我们使用 HTTP POST 会怎样？这意味着无论我们通过什么，都会覆盖该数据。所以让我举一个简单的例子：

HTTP POST [http://server.domain/app/Person/2](http://server.domain/app/Person/2)

```
send this data in the post body { Manager: -1, "Phone Number": "222-555-0089" }
get nothing in response (we could return the object, but my API doesn't for whatever reason, call it a specification deficiency) 
```

当我们 HTTP GET [http://server.domain/app/Person/2](http://server.domain/app/Person/2)我们现在得到

```
{ Name: "user341180", ID: 2, Manager: -1, "Phone Number": "222-555-0089" } 
```

看看我们如何使用 HTTP POST 来*更新*记录？这就是我们使用 RESTful 方法的方式，我们使用动词来表示动作。

那么我们还能用什么来与服务器通信呢？如果我们想让 RESTful 方法既返回网页又返回数据，但使用 GET 怎么办？我们可以使用 HTTP HEADER（可能是 X-Header？）来指定我们正在进行数据调用，因此默认情况下我们向 HTTP GET [http://server.domain/app/Person/1](http://server.domain/app/Person/1)发出请求，然后我们得到一个网页。如果您想要一个示例（提供网页的休息响应），请查看我们现在所在的页面。`https://stackoverflow.com/questions/11061912/`<-- 实际上是由 MVC 宁静原则提供的（但我不认为他们通过这种方法提供 JSON，因为这不是他们的系统设置方式）。

所以我可能把你们都搞砸了，我只是想回顾一下 REST，以及我们今天如何将它用于 MVC 目的。让我们再看看其中的一部分，我们做[http://server.domain/app/Person的部分](http://server.domain/app/Person)

在 MVC 术语中，这意味着我们的应用程序中有一个 Person 控制器。对 Person 控制器发出的任何请求都将首先根据其动词类型进行路由，然后是任何其他参数。例如，提交此答案会发布到`https://stackoverflow.com/questions/11061912/answer/submit`. 所以控制器知道它期望收到“发布 ID”（所以它知道答案所属的父级），“答案”告诉它我正在添加一个答案，然后“提交”它知道我是什么正在做。如果我正在编辑，它将是编辑提交而不是回答/提交。

好的，所以我觉得我让事情变得混乱了，我不知道您是否阅读了我[在节点和一般 MVC 上的回答：模型如何与视图相关联？](https://stackoverflow.com/questions/11061374/mvc-in-node-and-general-how-are-models-tied-to-views/11061392#11061392)但让我澄清一下：控制器是一个路由设备，用于接收输入，将其发送到适当的模型，然后呈现一些视图（HTML、JSON、XML、纯文本等）。请注意，不需要渲染视图（还记得我在 HTTP POST 上没有返回任何内容的糟糕 API 吗？）。

因此，现在我们谈到了我之前在回复中试图表达的观点，但我仍然不够清楚。当您从“适当的资源”（在这篇文章 /question/ 中）移动方法时，您打破了一个 URL 根是一个资源的想法。哦，我把这一切都搞砸了不是吗？

在 REST 原则中，每个 URL 根是一个资源。您可以从该资源中执行操作，例如根据一些数据呈现某个视图，或者您可以使用某个动词添加/修改数据，或者如果这是您的风格，您可以制作烙饼。但是所有 Person 将始终位于[http://server.domain/app/Person](http://server.domain/app/Person)，而不是“有些人命令在[http://server.domain/app/Person](http://server.domain/app/Person)上，有些人命令在[http://server 上。 domain/app/Department](http://server.domain/app/Department) ”，因为那样你就会举起双臂然后去“我怎么知道在哪里可以找到人们的行动？！？！”

简而言之，这就是为什么您不想在一个控制器上放置一些用于访问数据的方法（呈现视图）以及在另一个控制器（JSON）上为相同的资源类型放置一些用于访问数据的方法。

* * *

既然我已经把所有的脑残都放到了一个帖子中，我对哪些部分感到困惑？随意编辑帖子并插入一些`**what do you mean here?**`或`**you seem to be jumping around on this point a lot**`任何您认为合适的内容。

# iphone - Objective C / iPhone中普通空间的ASCII值

> ID：11061916
> 
> 赞同：0
> 
> 时间：2012-06-16T08:28:11.697
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-text

我正在尝试在 Objective C / iPhone 中为纯空格找到正确的 ASCII 值。基本上，我处于一种`@" "`不会削减它的情况，因为`CoreText`没有识别它（有关更多信息，请参阅我的其他[问题](https://stackoverflow.com/questions/11061090/ctframegetvisiblestringrange-incorrectly-counting-spaces-at-end-of-string)）。当我使用以下内容时：

```
[self.delegate insertText: @"\u00A0"]; 
```

我遇到的问题消失了，但是我得到了不得不使用非破坏空间的意外副作用。我尝试使用 0020 作为 ASCII 表中列出的纯空格，但是我收到编译器的投诉：“无效的通用字符”

有人对我可以在这里插入什么有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:44:06.497

@" "**是**一个普通的空格。您的其他问题并没有以任何方式表示。不可能，因为这是事实。

使用 ASCII 码不会改变任何东西。

如果您想向自己证明这一点，请尝试：

```
NSLog(@"%#x", [@" " characterAtIndex:0]); 
```

它将记录“0x20”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:38:44.153

空格绝对是 ASCII 码 x20（十进制 32），所以只需使用：

```
@"\x20" 
```

IE，

```
[self.delegate insertText: @"\x20"]; 
```

# oracle - 如何从 Rational Rose 创建 Oracle 数据库？

> ID：11061917
> 
> 赞同：1
> 
> 时间：2012-06-16T08:28:17.683
> 
> 标签：oracle, rational-rose

请我尝试在 Rational Rose 中创建 Oracle 数据库，但该选项已停用：

![在此处输入图像描述](../Images/ac2df1da21bcf88b9a9cf99927d64d1f.png)

我需要先安装 Oracle 客户端吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:48:22.517

我找到了原因：我必须右键单击组件视图，而不是逻辑视图

# python - Numpy 数组切片

> ID：11061928
> 
> 赞同：4
> 
> 时间：2012-06-16T08:30:00.383
> 
> 标签：python, arrays, numpy, scipy, numeric

我有一个 1D numpy 数组和一些偏移量/长度值。我想从这个数组中提取所有属于偏移量、偏移量+长度的条目，然后用于从原始数组构建一个新的“缩减”数组，该数组只包含偏移量/长度对选择的那些值.

对于单个偏移量/长度对，这对于标准数组切片来说是微不足道的`[offset:offset+length]`。但是对于许多偏移量/长度值，我怎样才能有效地做到这一点（即没有任何循环）？

谢谢，马克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:51:53.747

```
>>> import numpy as np
>>> a = np.arange(100)
>>> ind = np.concatenate((np.arange(5),np.arange(10,15),np.arange(20,30,2),np.array([8])))
>>> a[[ind]]
array([ 0,  1,  2,  3,  4, 10, 11, 12, 13, 14, 20, 22, 24, 26, 28,  8]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T08:54:17.720

有朴素的方法；只是做切片：

```
>>> import numpy as np
>>> a = np.arange(100)
>>> 
>>> offset_length = [(3,10),(50,3),(60,20),(95,1)]
>>>
>>> np.concatenate([a[offset:offset+length] for offset,length in offset_length])
array([ 3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 50, 51, 52, 60, 61, 62, 63,
       64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 95]) 
```

* * *

以下*可能*会更快，但您必须进行测试/基准测试。

它通过构建所需索引的列表来工作，这是索引 numpy 数组的有效方法。

```
>>> indices = [offset + i for offset,length in offset_length for i in xrange(length)]
>>> a[indices]
array([ 3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 50, 51, 52, 60, 61, 62, 63,
       64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 95]) 
```

目前尚不清楚这是否真的比天真的方法更快，但如果你有很多非常短的时间间隔，它可能会更快。但我不知道。

（这最后一种方法与@fraxel 的解决方案基本相同，只是使用了不同的制作索引列表的方法。）

* * *

### 性能测试

我测试了几种不同的情况：一些短间隔，一些长间隔，很多短间隔。我使用了以下脚本：

```
import timeit

setup = 'import numpy as np; a = np.arange(1000); offset_length = %s'

for title, ol in [('few short', '[(3,10),(50,3),(60,10),(95,1)]'),
                  ('few long', '[(3,100),(200,200),(600,300)]'),
                  ('many short', '[(2*x,1) for x in range(400)]')]:
  print '**',title,'**'
  print 'dbaupp 1st:', timeit.timeit('np.concatenate([a[offset:offset+length] for offset,length in offset_length])', setup % ol, number=10000)
  print 'dbaupp 2nd:', timeit.timeit('a[[offset + i for offset,length in offset_length for i in xrange(length)]]', setup % ol, number=10000)
  print '    fraxel:', timeit.timeit('a[np.concatenate([np.arange(offset,offset+length) for offset,length in offset_length])]', setup % ol, number=10000) 
```

这输出：

```
** few short **
dbaupp 1st: 0.0474979877472
dbaupp 2nd: 0.190793991089
    fraxel: 0.128381967545
** few long **
dbaupp 1st: 0.0416231155396
dbaupp 2nd: 1.58000087738
    fraxel: 0.228138923645
** many short **
dbaupp 1st: 3.97210478783
dbaupp 2nd: 2.73584890366
    fraxel: 7.34302687645 
```

这表明我的第一种方法在您有几个间隔时是最快的（并且它明显更快），而我的第二种方法在您有很多间隔时是最快的。

# php - PHP - 从不同的文件格式 Word/Excel/Powerpoint/PDF/RTF 中提取文本

> ID：11061929
> 
> 赞同：4
> 
> 时间：2012-06-16T08:30:00.787
> 
> 标签：php, excel, pdf, ms-word, powerpoint

我正在开发一个 Web 应用程序，用户可以在其中上传不同的文件 MS Word（.doc 和 .docx）、Excel（.xls 和 .xlsx）、Power point、PDF、文本文件和富文本文件（.rtf）。

作为应用程序流程的一部分，我想在 IFrame 中显示文件内容的预览，最好是 HTML，但我可以使用 PHP 类来处理文本

我使用的方法是：

1.  识别每个文件的扩展名

2.  以不同方式处理每个文件

3.  显示文本或 HMTL

有没有这样做的图书馆？

**更新：**

将我的最终解决方案发布为答案，而不是更新问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T05:05:57.970

没有一个库可以解决这个问题，所以我为每种文件类型使用以下库解决了这个问题：

a) MS Word 文档 - Live Docx (http://www.phplivedocx.org/2009/08/13/convert-docx-doc-rtf-to-html-in-php/)

b) MS Excel - PHP Excel (http://phpexcel.codeplex.com/)

c) PDF 中的文本 - 此 Pastebin 中的类[http://pastebin.com/hRviHKp1](http://pastebin.com/hRviHKp1)

d) Powerpoint - 仍在进行中

我在我的博客[http://ssmusoke.wordpress.com/2012/06/16/display-contents-of-different-file-formats-wordexcelpowerpointpdfrtf-as-html/上提供了更多详细信息](http://ssmusoke.wordpress.com/2012/06/16/display-contents-of-different-file-formats-wordexcelpowerpointpdfrtf-as-html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:46:17.530

几年前我有一个类似的任务，我们最终在服务器模式下使用 OpenOffice 和 ImageMagick 来检索 PowerPoint 文档的缩略图。对于某种演示文稿库。

基本上，这个想法是运行 OpenOffice 并将您的文档转换为 PDF，然后使用 ImageMagick 创建该 PDF 第一页的缩略图。

这里的这个人使用 OpenOffice 和另一个工具来转换文档：[https](https://stackoverflow.com/a/1046159/626621) ://stackoverflow.com/a/1046159/626621 （可以帮助你）

我认为这样做的好处是，作为文档预览的图像将比文本更能告诉您的用户。

# c# - aspx sql 中的代码

> ID：11061930
> 
> 赞同：0
> 
> 时间：2012-06-16T08:30:01.927
> 
> 标签：c#, asp.net, sql, parameters, webforms

我可以知道如何从后面的代码中传递驱动程序的值并将其放入 aspx 文件中的查询中吗？

这是我的 aspx 部分：

```
<asp:SqlDataSource ID="cs_sc" runat="server" 
ConnectionString="<%$ ConnectionStrings:MIMConnectionString %>"
SelectCommand="SELECT * FROM [Cash_Sales] WHERE [driver] = @driver">
<SelectParameters>
    <asp:Parameter Name="driver" Direction="Input" Type="String" />
</SelectParameters></asp:SqlDataSource> 
```

后面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    driver = driverUpdateBox.SelectedItem.Text;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:46:23.417

```
cs_sc.SelectParameters["driver"].DefaultValue = driverUpdateBox.SelectedItem.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:42:28.087

你有没有尝试过这样的事情：

```
SelectCommand="SELECT * FROM [Cash_Sales] WHERE [driver] = <%$ this.driver %>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:44:40.453

SqlDataSource 有 SelectParameters 属性，像这样使用它：

```
protected void Button1_Click(object sender, EventArgs e)
{
  cs_sc.SelectParameters["driver"] = driverUpdateBox.SelectedItem.Text;
} 
```

# scala - 比较 sbt 和 Gradle

> ID：11061938
> 
> 赞同：112
> 
> 时间：2012-06-16T08:31:59.633
> 
> 标签：scala, sbt, gradle

我正在潜入 Scala 并注意到 sbt。我对 Java/groovy 项目中的 Gradle 非常满意，而且我知道 Gradle 有一个 scala 插件。

在 Scala 项目中偏爱 sbt 而不是 Gradle 的充分理由是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-16T17:01:43.520

请注意，SBT 和 Gradle 之间的一个关键区别是它的**依赖管理**：

*   [SBT](https://github.com/harrah/xsbt/wiki)：[Ivy](http://ant.apache.org/ivy/)，带有一个修订版，可以作为固定版本（例如 1.5.2）或最新（或动态）版本给出。
    请参阅“ [Ivy Dependency](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html) ”
    这意味着“-SNAPSHOT”机制支持可能会出现问题，尽管[此线程中的](https://groups.google.com/d/msg/simple-build-tool/XeQmdUwC6iU/vdCIlCGYxBwJ)[Mark Harrah](https://github.com/harrah)详细信息：

> 缓存确实会混淆，但 Ivy 不理解解析快照的说法是不正确的。Eugene 在另一个线程中解释了这一点，也许在管理员列表中。0.12 中解决了 sbt 的自动更新问题。
> 
> 据我所知，Ivy 不支持的是以 Maven 的方式发布快照。我相信我已经在别处说明了这一点，但如果有人想改善这种情况，我认为最好与 Gradle 团队合作，重用他们的依赖管理代码。

*   [Gradle](http://www.gradle.org/)：[该线程](https://groups.google.com/d/msg/simple-build-tool/XeQmdUwC6iU/vdCIlCGYxBwJ)提到（[Peter Niederwieser](https://twitter.com/#!/pniederw)）：

> 只是让您知道，Ivy 和 Maven 快照依赖项的问题是 Gradle 最终用自己的依赖项管理代码替换 Ivy 的原因之一。这是一项艰巨的任务，但给我们带来了很多好处。

[这条推文](https://twitter.com/ijuma/status/212441297129193472)提到未来所有情况都可能发生变化：

> Mark 过去曾说过，他对使用 Gradle 代替 Ivy 进行 SBT 很感兴趣。

（两种工具可以[互相学习](https://twitter.com/timperrett/status/212452663810457601)）

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-06-16T14:50:12.023

对我来说，SBT 的主要特点是：

*   快速编译（比 快`fsc`）。
*   持续编译/测试：每次保存修改时，该命令`~test`都会重新编译并测试您的项目。
*   跨多个 Scala 版本的交叉编译和交叉发布。
*   自动检索具有正确 scala 版本兼容性的依赖项。

缺点是：

*   一种倾向于阻止新用户的象形文字语法（特别是如果他们来自 Java）
*   定义“任务”没有简单的方法：如果您需要特殊的构建过程，您将需要找到一个插件，或者自己编写一个插件。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-06-16T08:51:43.740

sbt 是一个 Scala DSL，对它来说 Scala 是一等公民，所以原则上它似乎很合适。

但是 sbt 存在版本之间的主要不兼容更改，这使得很难为任务找到正确的工作插件并使其工作。

我个人放弃了 sbt，因为它造成的问题多于解决的问题。我实际上切换到gradle。

去搞清楚。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-27T15:31:01.630

我对 gradle 还很陌生，对 sbt 也很陌生——到目前为止，我真正喜欢 sbt 的是交互式控制台。它允许我使用“检查”之类的命令来更好地了解正在发生的事情。AFAIK gradle 不提供这样的自动取款机。

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2015-12-08T07:06:07.753

Sbt 和 gradle，两者都是基于静态类型语言....但是 sbt 几乎没有优势：

*   更好的插件支持，特别是自动插件
*   任务创建和任务之间的依赖管理
*   sbt 特别适合 scala 项目，因为它支持增量构建，并且大多数 sbt 本身是用 scala 编写的，而 sbt 构建定义是用 scala 编写的
*   sbt 有许多有用的内置任务的交互式 shell 支持
*   sbt 默认生命周期非常有用，新手可以轻松上手

# android - Android 的无 GUI 编程，就好像它是一个普通的 Linux 系统一样

> ID：11061939
> 
> 赞同：3
> 
> 时间：2012-06-16T08:32:02.803
> 
> 标签：android, android-activity, scripting, command-line-interface

我需要在我的手机上做一些琐碎的批处理任务，我不想跳过使用 GUI 制作“应用程序”的所有环节，而所有这些只是为了完成它们（任务属于你想要的类型在一个健全的系统上在五分钟内一起在 BASH 中破解）。我似乎在网上找不到任何地方解释如何简单地制作一个普通程序（使用任何语言，但如果这可以简化与 Android 的交互，Java 就可以了）*并可以访问*可以通过 SSH 运行的 Android API进入手机并将其作为正常进程运行。不需要 APK 包，不需要 GUI，什么都不需要。这应该是世界上最简单的事情，但是那里的每个示例似乎首先关注的是制作 GUI 和使用 Eclipse 和 SDK，而不是先做基础。

有小费吗？

（我知道这可能是边缘超级用户，但话又说回来，底部有一个编程问题：你如何制作一个可以从 Android 手机上的终端运行并仍然使用 API 的普通（Java）程序？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:01:32.090

这里：[使用 adb 在 android 设备上运行 shell 脚本](https://stackoverflow.com/questions/8108004/running-bash-script-on-android-device-using-adb)

和：[https ://play.google.com/store/apps/details?id=stericson.busybox&hl=en](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)

和： http: [//forum.xda-developers.com/showthread.php?t=537827](http://forum.xda-developers.com/showthread.php?t=537827)

和：[http ://strawp.net/archive/recipe-for-a-decent-bash-shell-in-android/](http://strawp.net/archive/recipe-for-a-decent-bash-shell-in-android/)

和：[http ://digitaldumptruck.jotabout.com/?p=938](http://digitaldumptruck.jotabout.com/?p=938)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:39:39.703

> 我似乎在网上找不到任何地方解释如何简单地制作一个普通程序（使用任何语言，但如果这可以简化与 Android 的交互，Java 就可以了）并可以访问可以通过 SSH 运行的 Android API进入手机并将其作为正常进程运行。

那是因为它对大多数 Android 用户或开发人员来说并不是特别重要。

> 你如何制作一个普通的（Java）程序，可以在 Android 手机的终端上运行并且仍然使用 API？

欢迎您使用[Android 脚本层](http://code.google.com/p/android-scripting/)编写一些脚本，但您对 Android SDK 的访问权限有限，它们不能“简单地通过 SSH 进入手机运行”。这得到了 SL4A 团队的支持。

欢迎您试用[该`dalvikvm`命令](http://www.milk.com/kodebase/dalvik-docs-mirror/docs/hello-world.html)，尽管我不记得它是否在生产设备上可用，并且我不知道它是否可以“只需通过 SSH 连接到手机即可运行”。而且，请记住，完全不支持使用它。

欢迎您为 ARM（或您的设备运行的任何 CPU 架构）编写自己的 C/C++ 代码。这“只需通过 SSH 进入手机即可运行”，但无法访问 Android SDK。

> 我仍然无法相信那种东西不在每个 Android 开发介绍的第一页上。

有超过 2 亿的 Android 设备用户。您认为这些用户中有多少百分比想要“制作一个普通的程序......访问可以通过 SSH 连接到手机并作为正常进程运行它简单地运行的 Android API”？0.01%？0.001%？我的钱是 0.0001%。

“每一个 Android 开发介绍的第一页”应该关注对接近 100% 的用户群很重要的东西。当然，欢迎您建立自己的专注于此类事物的网站，以满足那些对创建此类程序感兴趣的用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T22:23:47.843

来自[http://git-annex.branchable.com/design/assistant/blog/day_184__just_wanna_run_something/](http://git-annex.branchable.com/design/assistant/blog/day_184__just_wanna_run_something/)：

> 虽然我已经尝试了 Android “hello world” 可执行文件，但我还不能运行它们。似乎找不到我可以在 Asus Transformer 上写入的目录，其文件系统支持 +x 位。你真的需要root安卓才能运行简单的二进制文件吗？我在里面哭。
> 
> 似乎有福的 Android NDK 方式将涉及制作一个 Java 应用程序，该应用程序拉入一个包含本机代码的共享库。对于haskell，库需要包含一个C shim，它可能调用Haskell 运行时系统的入口点。一旦运行，它可能会使用 FFI 与 Java 端进行通信。好消息是，CJ van den Berg 曾经通过开发 ghc-android 拯救了我的培根，他告诉我他正在努力做这件事。

以及以下评论中的一些具体建议：

> 请参阅[http://kevinboone.net/android_nonroot.html](http://kevinboone.net/android_nonroot.html)了解有关您在 android 文件系统中的哪个位置具有写入、执行能力的信息。
> 
> 基本上，您在 adb shell 中的 /data/local （以及使用带有 adb shell 的 run-as 的可调试应用程序的文件夹中）和每个应用程序的 /data/data// 中具有这些功能（例如，使用终端仿真器时的数据目录）终端模拟器）。
> 
> ...

[http://git-annex.branchable.com/design/assistant/blog/day_185__android_liftoff/](http://git-annex.branchable.com/design/assistant/blog/day_185__android_liftoff/)：

> 感谢 hhm，他将我指向[KBOX](http://kevinboone.net/kbox.html)，我已经验证我可以构建在 Android 上运行的 haskell 程序。

[http://kevinboone.net/kbox.html](http://kevinboone.net/kbox.html)：

> KBOX [...] 为您提供终端仿真器、一套不错的 Linux 实用程序（由 bu​​sybox 提供）、ssh 和 rsync 客户端和服务器，以及其他一些东西。此外，还有许多用于扩展功能的附加包。

好吧，这只是关于在 Android 上运行一个可执行文件，而不是编写一个可以访问 Android API 的可执行文件......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-23T11:26:47.950

> 我似乎在网上找不到任何地方解释如何简单地制作一个普通程序 [...] 访问 Android API 可以简单地通过 SSH 连接到手机并作为正常进程运行它来运行。

一个答案，翻译自[vitus-wagner 的注释](https://vitus-wagner.dreamwidth.org/1989724.html)：

[Termux](https://f-droid.org/en/packages/com.termux/)是一个高级终端仿真器，外加许多带有命令行界面的类 Unix 软件（在 APT 管理的包中）。实际上，不仅是 CLI（命令行），还有 GUI（虽然 GUI 软件还没有尝试过）。

与各种流行的“linux 部署”方式不同（它制作类似于容器的东西，至少是一个 chroot，根据传统的文件系统层次结构将东西安装到目录中），Termux 似乎旨在集成到主机系统中。为此，它有一个插件，[Termux:api](https://termux.com/add-on-api.html)，它能够与系统进行大量交互：在原生 Android 应用程序中打开文件、发送短信、用相机拍照，甚至通过系统TTS引擎的手段。

还有更多插件 - 请参阅[wiki](https://wiki.termux.com/wiki/Main_Page)。

（附带说明。如果不是来自 MSYS 的话，来自 GnuWin32 的集成是可以预期的，但是在集成程度方面，在 Windows 下没有任何东西接近 Termux。

然而，出于某种奇怪的原因，人们在论坛上更多地询问如何使它更像“Linux”，而不是如何有效地使用它来解决智能手机特定的任务......）

[提供了一个交叉编译工具包](https://github.com/termux/termux-packages/)，这样人们就可以尝试打包他最喜欢的软件。

实际上，它可以在设备上进行本地编译，但似乎无法在本地打包。

一些事情要知道：

1.  需要[黑客的键盘](https://f-droid.org/en/packages/org.pocketworkstation.pckeyboard/)或类似的东西。没有 Esc、Tab、Control 就无法生存。或者可以尝试学习[触控键盘](https://wiki.termux.com/wiki/Touch_Keyboard)。

2.  `vim`使用不同于 utf-8 的编码运行，并且俄罗斯字母显示不正确。所以，`set encoding=utf-8`必须写成`.vimrc`。

3.  ssh 到家中的另一台计算机无法登录。原因很简单：它使用用户名`u0_a95`而不是常用用户名。`User your_username`（可以写入`.ssh/config`永久“修复”它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T08:36:24.857

我建议对[XDA-Developers 板进行研究](http://forum.xda-developers.com)

# javascript - (object Object) 从 Node 中的 JSON 请求返回

> ID：11061942
> 
> 赞同：2
> 
> 时间：2012-06-16T08:32:28.357
> 
> 标签：javascript, json, http, node.js

我还有一个关于 Node.js 的简单问题。我正在尝试向开放课件搜索 API ( [http://www.ocwsearch.com/api](http://www.ocwsearch.com/api) ) 发出一个简单的 http 请求，但我在实际解析 JSON 时遇到了一些问题......通常没有一直是个问题。该请求返回一个包含转义字符和斜杠的字符串，因此我在响应字符串上运行了替换和取消转义，但这最终返回了类似“[object Object]”的内容。现在，我真正想做的就是能够看到最终返回的内容，因此我可以判断我是否最终可以将其解析为有效的 JSON。不幸的是，这也不起作用。我已经阅读了几个关于堆栈溢出的类似线程，但我仍然无法让它工作。

我试过的：

*   遍历正在传递的对象，因为我认为它会是带有键值对的东西，然后运行它，每次都记录它。但是，这会将其打印为字符串：

[

○

b

...一直到最后（]）

给定 x 作为返回的格式化对象，

*   使用 "" + x, toString(), 尝试将其转换为字符串
*   [根据如何在 Node.js 中记录 JSON 对象的内容，](https://stackoverflow.com/questions/7428235/how-to-print-json-object-content-in-node-js)使用 console.log("%j", x) ？

但这些似乎都不起作用，它们都在返回我 [object Object]。

我什至在 jsfiddle 中尝试过：http: [//jsfiddle.net/S47QL/2/](http://jsfiddle.net/S47QL/2/) 我正在用警报替换 console.log，它似乎是重新

我的代码：

```
var request = require('request');$
request('http://www.ocwsearch.com/api/v1/search.json?q=' + skill +     '&contact=http%3a%2f%2fwww.ocwsearch.com%2fabout/',$
  function(error, response, body){$
  if(!error && response.statusCode == 200){~$
      console.log(response.toString().replace(/\\\//g, "/"));$
        var x = response.toString().replace(/\\\//g, "/");$
        console.log(x)$
        console.log(x.keys());$
  }$  
});$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:55:14.410

> 现在，我真正想做的就是能够看到最终返回的内容，因此我可以判断我是否最终可以将其解析为有效的 JSON。

然后在浏览器窗口中发出请求（使用 Chrome，您可以在检查器选项卡中看到返回的实际结果 - 按 F12）。

示例：[http ://www.ocwsearch.com/api/v1/search.json?q=ios&contact=http%3a%2f%2fwww.ocwsearch.com%2fabout/](http://www.ocwsearch.com/api/v1/search.json?q=ios&contact=http%3a%2f%2fwww.ocwsearch.com%2fabout/)

根据[http://jsonlint.com/](http://jsonlint.com/) ，这是返回的有效 JSON。你*确定*你不是为了你自己的利益而试图变得太聪明吗？

您不能将响应写入字符串，因为它是一个对象。您需要返回的数据，但我认为 body 字段可以满足您的需求。您是否尝试过仅打印`body`？

# python - 鼻子测试的奇怪行为

> ID：11061943
> 
> 赞同：1
> 
> 时间：2012-06-16T08:32:37.107
> 
> 标签：python, unit-testing, nose

我尝试使用鼻子测试但是当我运行下面的测试用例时

```
import unittest

class TestSuite(unittest.TestCase):
    b = []

    def setUp(self):
        self.b.extend([10, 20])

    def tearDown(self):
        self.b = []

    def test_case_1(self):
        self.b.append(30)
        assert len(self.b) == 3
        assert self.b == [10, 20, 30]

    def test_case_2(self):
        self.b.append(40)
        assert len(self.b) == 3
        assert self.b == [10, 20, 40] 
```

但是所有测试用例都没有通过

```
$> nosetest test_module.py
.F
======================================================================
FAIL: test_case_2 (test_module2.TestSuite)
----------------------------------------------------------------------
Traceback (most recent call last):
File "/Users/knt/test_module2.py", line 19, in test_case_2
    assert len(self.b) == 3
AssertionError

----------------------------------------------------------------------
Ran 2 tests in 0.001s

FAILED (failures=1) 
```

发生了什么 ？？？我希望在运行 test_case_1 之后，会调用 tearDown ，`self.b`所以`[]`. 所以对于下一个测试用例`test_case_2`，`setUp`运行并且`self.b`是`[10, 20]`。

但实际上，`setUp`在`self.b is [10, 20, 30]`.

我不知道为什么。我认为 statement 一定有一些问题`self.b = []`。

有什么相关的指针，我猜？我仍然没有弄清楚，但我找到了修复这个错误的方法。只需更改`self.b = []`为`del self.b[:]`.

任何人都可以帮我找出问题吗？太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:03:28.383

据我所知，问题可能与 unitests 的工作方式以及类字段在 python 中的工作方式有关，这是一个简单的测试：

```
class A:
    b = []
    def reset(self):
        self.b = []

a = A()    
a.b.append(3) # we are actually accessing the class variable here
print A.b is a.b # True
print a.b # [3] same here
a.reset() # We just hid the class variable with our own which points to []
print A.b is a.b # False as expected.
print a.b # [] we think its being clear but rather we are using our own not the class variable

b = A()
print b.b # [3] b here is using the class that a previously modified but is no longer pointing to
print b.b is A.b # True

# Also note
c = A()
d = A()
print c.b is d.b # True, since both are using the same class variable. 
```

我认为unittest多次创建对象，对于每个测试函数，创建对象，触发访问类变量的设置，测试运行，调用简单隐藏它的teardown，创建另一个对象，调用访问相同类变量的设置先前的对象已修改并且没有影响，因为它的拆除只是创建了一个绑定到自身的新实例，隐藏了类版本。

我们总是在`__init__`using self 中声明成员字段。

```
def __init__(self):
    self.b = [] 
```

这样每个实例都会有自己的副本，尽管我们不能在这里这样做，因为我们是从那里继承的，`unittest.TestCase`这就是我们拥有的原因`setUp`

```
import unittest
class TestSuite(unittest.TestCase):
    def setUp(self):
        self.b = [10, 20]

    def tearDown(self):
        self.b = []

    def test_case_1(self):
        self.b.append(30)
        assert len(self.b) == 3
        assert self.b == [10, 20, 30]

    def test_case_2(self):
        self.b.append(40)
        assert len(self.b) == 3
        assert self.b == [10, 20, 40] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:13:36.323

问题是您在第 2 行中的类属性：

```
b = [] 
```

那是类的一个属性`TestSuite`。Nosetests 创建一个新的类实例`TestSuite`，然后调用`setUp`. 在`setUp`中，您修改类的**类**属性`TestSuite`：

```
self.b.extend([10, 20]) 
```

然后，在`tearDown`运行第一个测试之后，创建一个新列表并将其分配给一个新的**实例**属性，该属性也恰好被调用`b`：

```
self.b = [] 
```

这根本不会修改**类**属性。进一步尝试`self.b`从此实例进行访问将返回**实例**属性，而不是类属性。

但这没有任何效果，因为接下来发生的事情是，nosetests 会丢弃 的当前实例，包括您在 中设置的**实例**属性`TestSuite`中的新空列表。**`b``tearDown`**

 **然后 nosetests 创建一个全新的 class 实例`TestSuite`，来运行你的第二个测试。但是该类`TestSuite`仍然有一个包含 的`b` **类**属性`[10, 20, 30]`，因为它在您的第一个测试运行时被修改了。

然后nosetests`setUp`方法运行，添加`10`和`20`到`TestSuite`的**类**属性`b`。然后您的第二个测试运行，添加`40`到`TestSuite`的**class**属性，并且您的第二个测试失败，因为它在该**class**属性中找到六个项目：

```
[10,20,30,10,20,40] 
```

起作用的原因`del self.b[:]`是，就像 一样`append`，`del`正在修改**类**属性，而不是创建新的**实例**属性。

确保你了解类和实例之间、类属性和实例属性之间的区别，否则只要你在使用 Python，就会被类​​似的问题所困扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T08:41:37.760

好吧，尝试替换：

```
self.b.extend([10,20]) 
```

和

```
self.b = [10,20] 
```

也许扔掉类变量，你不需要它，这可能是发生这种情况的原因。**

# php - 照片上传失败，出现 Curl 异常#26

> ID：11061948
> 
> 赞同：0
> 
> 时间：2012-06-16T08:33:14.797
> 
> 标签：php, facebook, facebook-php-sdk, photo-upload

你好，

我正在尝试通过我的 facebook 应用程序将照片上传到 facebook。

这是我的代码：

```
$photo_details = array(
        'message'=> 'my photo'
    );
$file = "http://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Waves_lajolla.jpg/300px-Waves_lajolla.jpg";  
$photo_details['image'] = '@'.realpath($file);

try {
    $upload_photo = $facebook->api('/'.'almbumId'.'/photos', 'post', $photo_details);
} catch (FacebookApiException $e) {
    echo 'Error'.$e;
    error_log($e);
} 
```

但它总是给我

> CurlException：26：创建表单数据失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:47:27.277

您的图像路径不能是 URL，它必须是本地的。例如：

```
$file='images/logo.jpg'; //Example image file 
```

但是你有没有得到任何关于如何从 URL 中发布图像的解决方案？如果是这样，请分享，因为我也在寻找从 URL 发布图像的解决方案。

# caching - 计划缓存和执行计划中缓存计划大小的不同值

> ID：11061953
> 
> 赞同：-1
> 
> 时间：2012-06-16T08:34:35.657
> 
> 标签：caching, sql-server-2012, sql-execution-plan

刚刚发现对于在 sql server 2012 中运行的查询 .. 实际执行计划中的缓存计划大小为 16KB，其中计划缓存的值为 24KB（24576 字节）.. 知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:10:31.750

估计的执行计划当时并不知道所有细节，他们只是查看表的“粗略”大小并使用它们来估计缓存计划和执行计划。

如果您以在表中搜索条目为例，则该表的访问方式可能与“估计的”不同，因此索引缓存可能已以不同的顺序创建。

请记住，执行计划只是最好的猜测，因为实际计划更现实，实际计划会根据数据库的访问统计信息不时更改。

# c# - C# 实体框架：更新查询不起作用

> ID：11061956
> 
> 赞同：0
> 
> 时间：2012-06-16T08:35:27.153
> 
> 标签：c#, sql-server, entity-framework

我有这个简单的代码：（更新值）

我正在尝试更新列“c”

```
 using (MaxEntities ctx = new MaxEntities())
            {
                aa orders = (from order in ctx.aa
                             select order).First();
                orders.c = 22;
                ctx.SaveChanges();
            } 
```

这是表格：

```
CREATE TABLE [dbo].[aa](
    [a] [int] NULL,
    [b] [int] NOT NULL,
    [c] [int] NOT NULL
) ON [PRIMARY] 
```

和里面的值： ![在此处输入图像描述](../Images/1d7ed484e3a501a6a23fa71e4975e574.png)

但我得到一个例外：

*属性“c”是对象的关键信息的一部分，不能修改。*

![在此处输入图像描述](../Images/fb20fe535f24efe924f0a1468b0bde31.png)

我是 EF 的新手。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:40:34.280

```
The property 'c' is part of the object's key information and cannot be modified. 
```

这就是为什么你不能编辑它。也许您需要将`id`列添加为指定身份的键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:24:06.757

如另一个答案中所述，EF 必须唯一标识每个实体。如果数据库中没有 PK，EF 会推断出一些密钥。键被认为是固定的，因此如果 EF 被推断`c`为键的一部分（并且这样做是因为它使用所有不可为空的非二进制列），则您无法更改其值。此外，EF 将所有没有主键的表都视为只读，因此即使您`c`从设计器中的键中删除并修改`c`值，您在执行时也会遇到另一个异常`SaveChanges`。

第二个例外的原因在于 EF 描述模型和数据库的方式。当 EF 推断密钥时，它只是为了描述您的实体和上下文的内部需求而不是为了描述数据库。当 EF 尝试保存更改时，它会根据数据库描述构建 UPDATE 语句并且没有关于真实数据库 PK 列的信息，它将无法识别正确的更新记录（EF 中的每个更新都只能影响单个记录 - EF 检查`ROWCOUNT`）。这可以通过欺骗 EF 并更新其数据库描述 = 通过将表描述中的某些列描述为主键来解决。这会导致多个问题：

*   您必须在数据库中有一些唯一的列，否则此方法将不起作用。
*   您必须手动编辑 EDMX（作为 XML）以添加此更改
*   您不能使用默认 MS EDMX 设计器从数据库更新您的模型，因为它会删除您的更改

简单的建议：要么使用带有主键的数据库表，要么不要使用实体框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:45:44.310

这里缺少主键。在表中添加主键就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T13:59:07.277

我相信如果根本没有 PK，EF 会使用所有字段/列作为关键信息的一部分。[这是一个很好的解释：](https://stackoverflow.com/a/10174466/1166147) @SteveWilkes 为什么。但是您的实体是什么样的？另一种可能性是它没有属性，因为关联在不同的实体内，如果这是一个外键。

**编辑**

这让我开始思考。在某些情况下，您必须使用没有 PK 的遗留表，即使您永远不会创建这样的东西。观点呢？EF 是一个映射器 - 它必须唯一标识该记录，以便推断和定义该键。是的，您可以使用存储过程，但您也可以破解`XML`并从表定义中删除键吗？

**并再次编辑** 发布此内容后，我看到@Ladislav Mrnka 已经说过类似的想法（欺骗 EF 并更新其数据库描述），所以它已经完成（警告：自担风险消费 - 从未尝试过）。快速谷歌给我[这个博客](http://www.ericsdavis.net/index.php/2009/03/14/entity-framework-and-primary-key-inference/)有明确的说明：

```
Close the model designer in Visual Studio if it is still open and re-open the .edmx file in an XML editor
Find the edmx:StorageModels -> Schema -> Entity Container -> EntitySet element that refers to the      table in question
On the EntitySet element, rename the store:Schema attribute to Schema
Remove the store:Name attribute altogether
Remove the opening and closing DefiningQuery tags and everything in between them
Save and close the .edmx file 
```

但说真的，谁不喜欢PK呢？不能加个id吗？

# ios - 从 iOS 中的代码创建 localizable.strings

> ID：11061957
> 
> 赞同：2
> 
> 时间：2012-06-16T08:35:39.477
> 
> 标签：ios, xcode, cocoa-touch, localization, nslocalizedstring

我目前正在本地化我的 iOS 应用程序。到目前为止，这工作相当不错。

我已经创建了 localizable.strings 和几个 xib 文件，因此大约 80% 的应用程序已经被翻译。

但是该应用程序还从向我传递密钥的 WebService 加载数据，例如：“TITEL 1”以及附加到它的所有支持的语言（值），例如：“Titel One”“Titel Eins”“Titolo Uno”。

现在我想将这些值存储在相应的 localizable.strings 文件中。

例如：

Localizable.strings（英文）应包含：

```
"TITLE 1" = "Title One"; 
```

Localizable.strings（德语）应包含：

```
"TITLE 1" = "Titel Eins"; 
```

Localizable.strings（意大利语）应包含：

```
"TITLE 1" = "Titolo Uno"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:06:11.833

您将无法在运行时将它们插入本地化字符串中，如果网络服务器由您管理，我建议您发送用户使用的语言，请考虑这个例子

```
//Get the language code
NSString* languageCode = [[NSLocale preferredLanguages] objectAtIndex:0];
//Now send the request to the server with the language you want
NSString *str = [NSString stringWithFormat:@"www.yourserve.com/yourfunctiom?lang=%@", languageCode];
//Request it 
```

现在根据您在服务器中收到的语言，您将返回适当的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:57:53.907

这可能会稍微扩展框架，但是如果您想使用 Apple 的字符串加载功能，您可以尝试`NSBundle`在您的文档目录中构建一个（毕竟捆绑只是一个目录），用来自服务器的文件填充它，然后用于`NSLocalizedStringFromTableInBundle`获取您的字符串。

不过，与 Omar Abdelhafith 的回答中的方法相比，不确定它是否值得。

# javascript - HTML5 Canvas A* 星形路径查找

> ID：11061961
> 
> 赞同：2
> 
> 时间：2012-06-16T08:36:17.933
> 
> 标签：javascript, html, canvas, path-finding

我正在尝试学习使用此库的 A* Star Path 查找 - [https://github.com/qiao/PathFinding.js](https://github.com/qiao/PathFinding.js)

但我不明白一件事该怎么做。

我需要找到从 player.x/player.y （player.x 和 player.y 都是 0）到 10/10 的路径

此代码返回我需要移动的位置的数组 -

```
var path = finder.findPath(player.x, player.y, 10, 10, grid); 
```

我得到一个数组作为输出，它给出了玩家的位置，但是如何将此数组应用于我的 player.x 和 player.y？

数组结构类似于 - `0: 0 1: 0 length: 2`, `0: 1 1: 0 length: 2`, ...

谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:57:48.687

[自述文件：基本用法](https://github.com/qiao/PathFinding.js/blob/master/README.md#basic-usage)

只需从第一个（开始位置）迭代到最后一个（结束位置）条目并相应地“移动”你的玩家

```
var path = findPath(player.x, player.y, 10, 10, grid);

for (var i = 0, length = path.length; i < length; i++) {
    player.x = path[i][0];
    player.y = path[i][1];

    // draw the new position
} 
```

# java - 获取子字符串图像名称

> ID：11061963
> 
> 赞同：0
> 
> 时间：2012-06-16T08:36:21.473
> 
> 标签：java, android

我有一个字符串，例如`myweb.com/blabla/blabla/image.jpg`我如何获得从末尾开始并在第一个“/”字符时结束的子字符串？预期的字符串将是`image.jpg`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:40:08.210

为此使用下面的代码。

```
String s="myweb.com/blabla/blabla/image.jpg";
int i=s.lastIndexOf("/");
s=s.substring(i+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:38:05.947

```
String string = "myweb.com/blabla/blabla/image.jpg";    
string.subString(string.lastIndexOf("/")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T08:46:04.717

显然，作为`String.substring`通用案例的解决方案，还有另一种在 android 中执行特定任务的方法：

```
String url = "myweb.com/blabla/blabla/image.jpg";
Uri uri = Uri.parse(url);
uri.getLastPathSegment(); 
```

在您的情况下，getLastPathSegment 将返回 image.jpg。除此之外，您还可以使用 uri 对象轻松提取其他信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T08:38:36.340

```
String name = fullpath.subString(fullpath.lastIndexOf("/")+1); 
```

fullPath 是`myweb.com/blabla/blabla/image.jpg`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T08:39:41.393

String类的使用`lastIndexOf`方法..

```
String string = "myweb.com/blabla/blabla/image.jpg ";
String imageName = string.subString(string.lastIndexOf("/")+1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-16T08:41:16.603

看一下 File 类。拥有获取路径、文件名、扩展名等所需的一切。

[http://developer.android.com/reference/java/io/File.html](http://developer.android.com/reference/java/io/File.html)

getName() 会有所帮助。

[http://developer.android.com/reference/java/io/File.html#getName()](http://developer.android.com/reference/java/io/File.html#getName%28%29)

# c++ - 通过清理杀死子进程

> ID：11061965
> 
> 赞同：1
> 
> 时间：2012-06-16T08:36:38.040
> 
> 标签：c++, winapi

有没有办法杀死我的应用程序的子进程并执行它的清理（调用解构函数和 atexit 函数），类似于`exit(exit_code)`，但在另一个进程上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:23:16.107

如果您在 Windows 上，您可能通过 CreateProcess 启动子进程，它的最后一个参数是 PROCESS_INFORMATION。

[MSDN 上的 CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)

[MSDN 上的进程信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx)

**选项1：**

此进程信息包含在 hProcess 成员中启动的进程的句柄。

您可以存储此句柄并使用它来终止您的子进程。

**插入** 您可能想要发送 WM_CLOSE 和/或 WM_QUIT？“干净地”结束该过程：

这是一篇关于做什么的知识库文章[知识库如何干净地杀死win32进程](http://support.microsoft.com/kb/178893)

** 结束插入**

**选项 2：**

以下是关于如何正确终止进程树的讨论：[Terminate a process tree on windows](https://stackoverflow.com/questions/1173342/terminate-a-process-tree-c-for-windows)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:59:36.597

这种事情没有简单的 Win32 API。操作系统并不关心程序的源代码是用什么语言编写的，编译后的程序在它看来只是一系列 CPU 指令和数据。

最干净的方法是在进程之间建立某种通信通道（例如通过共享内存）并简单地请求进程终止。

您可以通过将子进程作为已调试进程启动，然后使用调试 API 来更改子进程的行为来实现相同的目的，但这太侵入性并且不太容易实现。

# twitter-bootstrap - 在 .less 文件中使用 Twitter Bootstrap .span12 时出错

> ID：11061968
> 
> 赞同：4
> 
> 时间：2012-06-16T08:37:06.013
> 
> 标签：twitter-bootstrap, less

我想使用我自己的默认引导类`.span12`，但它显示错误`.row``style.less``.row is undefined`

```
.my-class{
  .span12; // returns error undefined
  // or .span(12);
} 
```

有没有办法在`.less`文件中使用它们？例如`.span(12)`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:13:26.440

根据文档，您必须使用 mixin `makeColumn`。有关详细信息，请参阅[相关部分](http://twitter.github.com/bootstrap/less.html#mixins)。您可能需要搜索`span`.

# c - 激活优化选项时的警告

> ID：11061970
> 
> 赞同：8
> 
> 时间：2012-06-16T08:37:46.573
> 
> 标签：c, linux, gcc, scanf

我在 ac 程序中使用 scanf 从 STDIN 读取一个 int：

```
scanf("%d", &n); 
```

当我编译启用优化的 c 程序时，我收到一些警告：

```
gcc main.c -lm -lpthread -O2 -o main
main.c: In function ‘main’:
main.c:45: warning: ignoring return value of ‘scanf’, declared with attribute warn_unused_result
main.c:50: warning: ignoring return value of ‘scanf’, declared with attribute warn_unused_result 
```

但是当我删除优化选项时，为什么我没有收到这些警告？

```
gcc main.c -lm -lpthread -o main 
```

PS：我没有使用 -Wall 或类似的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T08:46:35.490

更改优化器设置会更改编译器分析代码的程度（以及方式）。

某些程序流分析在未启用优化（或设置不够高）时未完成，因此不会发出相关警告。
您会经常看到“未使用的变量”警告 - 这些需要对代码进行分析，超出了简单编译所需的范围，因此您通常只会在启用优化的情况下获得它们。

（你真的应该用 . 编译`-Wall`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T09:17:31.097

`-Wunused-result`[默认情况下启用](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wno_002dunused_002dparameter-331)：因为您将积极地需要装饰一个函数`__attribute__ ((warn_unused_result))`来触发警告，所以误报只会在使用过度时发生。

即使没有传递额外的标志，gcc*也应该*产生警告。然而，正如 Mat 解释的那样，编译器不会在不提高优化级别的情况下进行必要的控制流分析。

通过添加来修复您的代码或使警告静音`-Wno-unused-result`。~~将返回值转换为`void`也可能会这样做。~~

要使代码中的警告静音，您需要将返回值分配给一个虚拟变量，然后您可以将其转换`void`为避免有关未使用变量的新警告。也可以用 C99 复合文字代替显式声明的变量（用 gcc 4.5.3 测试）。

这确实不是最佳选择 - 我真的希望`void`我最初打算使用的 -cast ......

# php - 如何检查一个文本是否包含在另一个文本中？

> ID：11061974
> 
> 赞同：1
> 
> 时间：2012-06-16T08:38:08.273
> 
> 标签：php, text, levenshtein-distance

我正在开发一个文档系统，每次创建一个新系统时，它都必须检测并丢弃大约 500.000 条记录的数据库中的重复项。

目前，我正在使用搜索引擎检索 20 个最相似的文档，并将它们与我们正在尝试创建的新文档进行比较。问题是我必须检查新文档是否相似（使用similar_text 很容易），或者即使它包含在其他文本中，所有这些操作都考虑到文本可能已被用户部分更改（这里是问题）。我怎么能这样做？

例如：

```
<?php

$new = "the wild lion";

$candidates = array(
  'the dangerous lion lives in Africa',//$new is contained into this one, but has changed 'wild' to 'dangerous', it has to be detected as duplicate
  'rhinoceros are native to Africa and three to southern Asia.'
);

foreach ( $candidates as $candidate ) {
  if( $candidate is similar or $new is contained in it) {
       //Duplicated!!
  }
} 
```

当然，在我的系统中，文档长度超过 3 个单词 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:46:46.427

这是我正在使用的时间解决方案：

```
function contained($text1, $text2, $factor = 0.9) {
    //Split into words
    $pattern= '/((^\p{P}+)|(\p{P}*\s+\p{P}*)|(\p{P}+$))/u';
    $words1 = preg_split($pattern, mb_strtolower($text1), -1, PREG_SPLIT_NO_EMPTY);
    $words2 = preg_split($pattern, mb_strtolower($text2), -1, PREG_SPLIT_NO_EMPTY);

    //Set long and short text
    if (count($words1) > count($words2)) {
        $long = $words1;
        $short = $words2;
    } else {
        $long = $words2;
        $short = $words1;
    }

    //Count the number of words of the short text that also are in the long
    $count = 0;
    foreach ($short as $word) {
        if (in_array($word, $long)) {
            $count++;
        }
    }

    return ($count / count($short)) > $factor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:09:00.460

您可能会进行或进一步调查的一些想法是：

1.  索引文档，然后搜索类似的文档。所以开源索引/搜索系统，如[Solr](http://www.ibm.com/developerworks/opensource/library/os-php-apachesolr/)、[Sphinx](http://sphinxsearch.com/about/)或[Zend Search Lucene](http://framework.zend.com/manual/en/zend.search.lucene.overview.html)可以派上用场。

2.  您可以使用[sim hashing algorithm](http://matpalm.com/resemblance/simhash/)或[shingling](http://nlp.stanford.edu/IR-book/html/htmledition/near-duplicates-and-shingling-1.html)。简而言之，simhash 算法将让您计算相似文档的相似哈希值。因此，您可以将这个值存储在每个文档中，并检查各种文档的相似程度。

您可能会发现有助于从中获得一些想法的其他算法是：

1\. [莱文斯坦距离](http://en.wikipedia.org/wiki/Levenshtein_distance)

2\. [贝叶斯过滤](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)- [SO 问题重新贝叶斯过滤](https://stackoverflow.com/search?q=bayesian%20filtering)。此列表项中的第一个链接指向 Wiki 上的贝叶斯垃圾邮件过滤文章，但此算法可以适应您尝试执行的操作。

# html - 用 CSS 扩展边框线

> ID：11061977
> 
> 赞同：1
> 
> 时间：2012-06-16T08:38:36.887
> 
> 标签：html, css, height, border, line

**问题：**

我正在尝试扩展每个 div 的边界线，使其具有全高，请参见下图：

![在此处输入图像描述](../Images/8ed415da08206cff257a48ee3de322ce.png)

**HTML 代码：**

```
<div class="wrapper">
    <div class="box1row box1top">
        <div class="arrow"><img src="./img/circle_arrow_right.png" class="arrowimage"></div>
        <div class="numbers">1.</div>
        <div class="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce non lacus scelerisque dui eleifend viverra. Vestibulum venenatis ornare pulvinar.</div>
    </div>
    <div class="box1row box1bottom">
        <div class="arrow">&nbsp;</div>
        <div class="numbers">2.</div>
        <div class="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce non lacus scelerisque dui eleifend viverra. Vestibulum venenatis ornare pulvinar. Mauris euismod sem ornare nisi consequat quis tincidunt turpis tempor. Vivamus mollis luctus nulla sit amet consequat.</div>
    </div>
</div> 
```

**CSS 代码：**

```
.wrapper {
    margin-bottom: 1.5em;
}

.arrow {
    display: block;
    float: left;
    border-right: 1px solid #ddd;
    width:40px;
    text-align:center;
    padding-top:5px;
}

.arrowimage {
    width: 16px;
    height: 16px;
}

.text {
    display: block;
    float:left;
    border-left: 1px solid #ddd;
    width:585px;
    padding-left:5px;
    margin-left: -1px;
}

.numbers {
    display: block;
    float:left;
    border-left: 1px solid #ddd;
    width:30px;
    text-align:center;
    margin-left: -1px;
}

.box1row {
    border: 1px solid #ddd;
    margin-bottom: -1px;
}

.box1top {
    border-top-right-radius: 4px;
    border-top-left-radius: 4px;
}

.box1bottom {
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;
} 
```

**问题：**

如何使用 CSS 垂直延长线？

**笔记。**我将它与 mPDF 一起使用，mPDF 是一个将 HTML/CSS 转换为 PDF 的类。mPDF 不允许将边框半径应用于表格元素，因此我正在做一个 div 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:41:50.180

由于它是表格数据，因此使用`<table>`with`border-collapse:collapse`并关闭所有外部边框：

### HTML

```
<div class="wrapper">
  <table>
    <tr>        
        <td class="arrow"><img src="./img/circle_arrow_right.png" class="arrowimage"></td>
        <td class="numbers">1.</td>
        <td class="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce non lacus scelerisque dui eleifend viverra. Vestibulum venenatis ornare pulvinar.</td>
    </tr>
         <! -- ...... -->
    <tr>
        <td class="arrow">&nbsp;</td>
        <td class="numbers">2.</td>
        <td class="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce non lacus scelerisque dui eleifend viverra. Vestibulum venenatis ornare pulvinar. Mauris euismod sem ornare nisi consequat quis tincidunt turpis tempor. Vivamus mollis luctus nulla sit amet consequat.</td>
    </tr>
 </table>
</div> 
```

### CSS

```
/* collapse all borders */
.wrapper table{
    width:100%;
    border-collapse:collapse;
}

/* activate all borders */
.wrapper table td {
    border:1px solid #ddd;
}

/* turn off unnecessary borders: */
.wrapper table tr:first-child td{
    border-top:none;
}

.wrapper table tr:last-child td{
    border-bottom:none;
}

.wrapper table tr td:last-child{
    border-right:none;
}

.wrapper table tr td:first-child{
    border-left:none;
}

/* other elements */
.arrow {    
    width:40px;
    text-align:center;
    padding-top:5px;
}

.arrowimage {
    width: 16px;
    height: 16px;
}

.text {    
    width:585px;
    padding-left:5px;    
}

.numbers {    
    width:30px;
    text-align:center;
} 
```

然后你可以`rounded borders`通过`border-radius`在你的上使用来达到效果`.wrapper`：

```
.wrapper {
    margin-bottom: 1.5em;    
    border: 1px solid #ddd;
    border-radius: 4px;
} 
```

[**JSFiddle 演示**](http://jsfiddle.net/XYZWt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:38:41.113

虽然不是纯 CSS 解决方案，但可以通过将带有 repeat-y 的 1px 背景图像应用到 .box1row 来解决该问题。您已经在 .number 上具有固定宽度，因此可以正确定位背景图像以替换边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:40:40.540

鉴于我的第一个建议（在评论中）不起作用，因为它与 mPDF 不兼容，另一种可能性是使用`display:table-cell`而不是浮动元素：

```
.wrapper {
    margin-bottom: 1.5em;
}
.arrow {
    display: table-cell;
    width:40px;
    text-align:center;
    padding-top:5px;
}
.arrowimage {
    width: 16px;
    height: 16px;
}
.text {
    display: table-cell;
    border-left: 1px solid #ddd;
    width:585px;
    padding-left:5px;
    margin-left: -1px;
}
.numbers {
    display: table-cell;
    border-left: 1px solid #ddd;
    width:30px;
    text-align:center;
    margin-left: -1px;
}
.box1row {
    border: 1px solid #ddd;
    margin-bottom: -1px;
    display: table;
}
.box1top {
    border-top-right-radius: 4px;
    border-top-left-radius: 4px;
}
.box1bottom {
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;
} 
```

[更新的演示](http://jsfiddle.net/Snf3N/5/)

我不确定 mPDF 会如何，请记住它不兼容 IE7。

否则，如果您的数据在语义上符合表格形式，那么您可以将其标记为表格，我想这不会给 mPDF 带来任何痛苦。

# php - PHP中的多类关联数组

> ID：11061980
> 
> 赞同：12
> 
> 时间：2012-06-16T08:39:00.240
> 
> 标签：php, arrays, sorting

考虑以下关联数组

```
$arr = Array
(        
    [banana] => 2
    [cherry] => 1
    [orange] => 3
    [grapefruit] => 1
    [apple] => 1
) 
```

我想以类似于 PLSQL 术语的方式对其进行排序：（`A DESC, B ASC` 其中 A 是值，B 是键）含义：

```
$arr = Array
(
    [orange] => 3
    [banana] => 2
    [apple] => 1
    [cherry] => 1
    [grapefruit] => 1        
) 
```

所以橙子和香蕉首先是因为价值，然后我有苹果，樱桃和葡萄柚按字母顺序排列，因为它们具有相同的价值。

**我尝试了什么：**
1\. 运行ksort( [)](http://www.php.net/manual/en/function.ksort.php)然后[asort()](http://www.php.net/manual/en/function.asort.php) / [rsort()](http://www.php.net/manual/en/function.rsort.php)希望第二个排序将橙色和香蕉撞到数组的开头，而不会弄乱其他 3 个项目的字母排序。我错了。它确实把一切都搞砸了。所以我检查了：
2.[排序函数](http://php.net/manual/en/array.sorting.php)和[array_multisort()](http://www.php.net/manual/en/function.array-multisort.php)。但显然它一次对多个数组或多维数组进行排序。
3.我也尝试定义如下比较函数：

```
function cmp($a, $b)
{
    foreach ($a as $key1 => $val1) {
        foreach ($b as $key2 => $val2) {
            if($val1 == $val2){
                return strcmp($key1,$key2);
            }
            else if ($val1 > $val2){
                return 1;
            }
            else{ // $val1 < $val2
                return -1;
            }
        }
    }    
} 
```

[并用usort()](http://php.net/manual/en/function.usort.php)调用它，但它也不起作用。

所以我的问题是：是否有实现请求行为的 PHP 方法？

**对于 Eugen：**
我试过了，但在排序之前它不起作用：

```
Array
(
    [lamb] => 3
    [rule] => 1
    [children] => 1
    [teacher] => 2
    [eager] => 1
) 
```

排序后：

```
Array
(
    [children] => 1
    [eager] => 1
    [rule] => 1
    [teacher] => 2
    [lamb] => 3
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T09:01:56.907

您可以使用[array_multisort](http://www.php.net/manual/en/function.array-multisort.php)

```
<?php
    $arr = Array
    (        
        'banana' => 2,
        'cherry' => 1,
        'orange' => 3,
        'grapefruit' => 1,
        'apple' => 1
    );

    $values = array_values($arr);
    $keys = array_keys($arr);

    //first sort by values desc, then sort by keys asc
    array_multisort($values, SORT_DESC, $keys, SORT_ASC, $arr);

    print_r($arr);
    // output:
    /*
    Array
    (
        [orange] => 3
        [banana] => 2
        [apple] => 1
        [cherry] => 1
        [grapefruit] => 1
    )
    */

?> 
```

它是这样工作的：

*   对于用于排序的每一列（为您提供值和键），创建新的一维数组及其内容
*   将这些一维数组按排序顺序传递给 array_multisort 函数（所以首先是 $values，然后是 $keys），为每个数组添加排序顺序
*   最后一个参数必须是要排序的数组

（也许你会发现[这个解释](http://isambard.com.au/blog/2009/07/03/sorting-a-php-multi-column-array/)更容易理解）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:53:47.553

```
function polysortcmp($a, $b) {
  if ($a[1]<$b[1]) return 1;
  if ($a[1]>$b[1]) return -1;
  if ($a[0]<$b[0]) return -1;
  if ($a[0]>$b[0]) return 1;
  return 0;
}

function polysort(&$arr) {
  foreach ($arr as $k=>$v) $arr[$k]=array($k,$v);
  uasort($arr, "polysortcmp");
  foreach ($arr as $k=>$v) $arr[$k]=$v[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T10:04:43.533

数组排序函数arsort使用..

```
$arr = array(        
        'banana' => 2,
        'cherry' => 1,
        'orange' => 3,
        'grapefruit' => 1,
        'apple' => 1
    );

arsort($arr);
print_r($arr); 
```

输出

```
Array ( [orange] => 3 [banana] => 2 [apple] => 1 [grapefruit] => 1 [cherry] => 1 ) 
```

# objective-c - 用户更新时 NSUserDefaults 是否会重置

> ID：11061994
> 
> 赞同：0
> 
> 时间：2012-06-16T08:41:34.280
> 
> 标签：objective-c, ios, xcode, nsuserdefaults

> **可能重复：**
> [NSUserDefaults 是否通过更新到 Appstore 中的应用程序持续存在？](https://stackoverflow.com/questions/1638766/do-nsuserdefaults-persist-through-an-update-to-an-app-in-the-appstore)

这只是我害怕的事情。我知道当您删除该应用程序时，其中的数据`NSUserDefaults`将被清除。当用户更新时会发生这种情况吗？在这种情况下，我应该将默认数据备份到另一个服务器/系统。

谢谢各位，只是想防备一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T08:47:48.500

不。

您可以使用设备上已有的需要更新的应用程序对其进行测试。

确保您在可以见证的应用程序中完成了某些操作，更新它，关闭互联网以确保它没有从服务器获取信息，并检查数据是否消失。

例如，这可能是游戏中的关卡进度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:45:50.817

不，值是从以前开始的。

如果用户不使用 iTunes 备份数据并从设备中删除应用程序，您可能会丢失用户默认设置。