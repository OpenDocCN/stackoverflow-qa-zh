# StackOverflow 问答 11226000-11226999

# multithreading - 如何使任务的 updateMessage() 即时？

> ID：11226000
> 
> 赞同：1
> 
> 时间：2012-06-27T12:17:38.193
> 
> 标签：multithreading, javafx, javafx-2

我正在使用 JavaFx API 中的[Task 类](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)来执行网络操作。该类提供了一个似乎非常适合这种情况的进度系统，例如，允许报告上传到调用者线程的文件数量。为此，每次成功上传文件时，我都会调用[updateMessage(x + "files Uploads") 。](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#updateMessage%28java.lang.String%29)

问题是我收到的唯一一条消息是最后一条消息，此时每个文件都已上传。我想Javadoc以某种方式解释了这种现象：

> 对 updateMessage 的调用被合并并稍后在 FX 应用程序线程上运行，因此对 updateMessage 的调用，即使是从 FX 应用程序线程，也不一定会立即更新此属性，并且可能会合并中间消息值以保存事件通知。

我怎样才能让它正确地报告每条消息，或者至少是一些消息？我试图在它周围添加一些 Thread.sleep(20) 但它不起作用。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:45:58.020

很可能您正在事件线程上运行任务，因此它会阻止更新。Task 实现了 Runnable，这有点误导，但通过查看 javadoc，您可以发现运行 Task 的正确方法是将其分配给新线程：`new Thread(task).start();`

请参见下一个示例：

```
public class TaskTask extends Application {
    public static void main(String[] args) { launch(args); }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle(VersionInfo.getRuntimeVersion());
        Button btn = new Button();

        final Task<Integer> task = new Task<Integer>() {
            @Override
            protected Integer call() throws Exception {
                int iterations;
                for (iterations = 0; iterations < 100; iterations++) {
                    if (isCancelled()) {
                        break;
                    }
                    Thread.sleep(100); // imitate activity
                    updateMessage("Iteration " + iterations);
                }
                return iterations;
            }
        };

        // here we monitor task updates
        btn.textProperty().bind(task.messageProperty());

        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                //here it goes
                new Thread(task).start();
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:53:39.523

好吧，我的错。我错误地收听了消息更新：我在 Task 上使用了 EventHandler，而不是在 messageProperty 上使用了 ChangeListener。javadoc 仅指示如何发送更新，而不是接收更新，所以我尝试了，但 Sergey 的回答是正确的方法。

# ruby-on-rails - Rails 匹配 validates_format_of 数字 1-9

> ID：11226006
> 
> 赞同：2
> 
> 时间：2012-06-27T12:17:52.717
> 
> 标签：ruby-on-rails, ruby

嗨我想验证一个表单输入，所以它只需要数字 1-9 作为输入，如何实现

我的模型中有这个，但似乎无法正确匹配

validates_format_of :myfield, :with => ??????, :on => :create

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:22:46.673

请看这里：[http ://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of)

```
 validates :myfield, :inclusion => { :in => 1..9 } 
```

或者

```
 validates_inclusion_of :myfield, :in => 1..9 
```

**编辑**- 我认为`myfield`是一个`integer`，但如果你已经定义它，`string`你需要添加`validates_numericality_of`：

```
validates_numericality_of :myfield, :only_integer => true
validates_inclusion_of :myfield, :in => 1..9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:30:49.070

`validates_format_of :myfield, :with => /([^a-zA-Z][1-9]?)/, :on => :create`

如果您使用的是 2.3.x，应该会很好

注意2.3.8后去掉

# c++ - 对 QJson::Parser::Parser 的未定义引用

> ID：11226009
> 
> 赞同：3
> 
> 时间：2012-06-27T12:18:09.067
> 
> 标签：c++, json, qt, undefined-reference, qjson

我已经按照存档中的说明成功（？）安装了 QJson 库。但是编译器给了我这个错误：

```
Undefined reference to QJSon::Parser::Parser(). 
```

我找到了安装库文件的位置：它的`/usr/local/include/json`目录。但是里面只有`*.h`文件。

最小代码：

**主文件**

```
#include <QtGui/QApplication>
#include <qjson/parser.h>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QJson::Parser parser;
    return a.exec();
} 
```

我使用Linux。

文件在哪里`*.cpp`？我做错了什么？为什么图书馆不完整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:43:21.580

首先你必须找到一个库文件而不是一个`*.cpp`文件。也许它的名称类似于`"libqjson.a"`or`"libqjson.so"`并使用您的代码编译此库或将此密钥传递给

```
g++ -L(lib path) -lqjson 
```

事实证明（见下面的评论），你的库路径是`/usr/local/lib`，所以这一行变成：

```
g++ -L/usr/local/lib -lqjson 
```

使用 Qt (qmake)，只需将此行添加到您的`.pro`文件中，以便将这两个标志传递给 g++：

```
LIBS += -L/usr/local/lib -lqjson 
```

# sql - SQL Server - 如何从日期时间字段中选择日期时间

> ID：11226018
> 
> 赞同：3
> 
> 时间：2012-06-27T12:18:33.593
> 
> 标签：sql, sql-server, sql-server-2008, datetime, sql-server-2008-r2

我怎样才能做oracle相当于：

```
to_char(date_field, 'YYYY-MM-DD:HH')  # e.g. 2012-05-25:19 
```

在 SQL Server 中？

我想要订购栏，这就是我想要的原因`year-month-day-hour`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:56:07.910

```
select convert(varchar(10),date_field,120) + ':'+
convert(varchar(2), datepart(hour,date_field)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:59:16.737

Unfortunately mssql isn't great at custom date formats. You're stuck with string parsing:

e.g.

```
select replace(CONVERT(varchar(13),date_field,121),' ',':') 
```

The full details of the formats that are available are here: [http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

Note: If you're lucky enough to be in SQL 2012 you get a new `FORMAT` function, which is basically a wrapper of the .Net equivalent: See here: [http://msdn.microsoft.com/en-us/library/hh213505.aspx](http://msdn.microsoft.com/en-us/library/hh213505.aspx)

# php - 通过 jQuery-AJAX load() 函数将 PHP 变量作为变量传递给 JavaScript

> ID：11226019
> 
> 赞同：1
> 
> 时间：2012-06-27T12:18:37.910
> 
> 标签：php, javascript, jquery, variables

我有 2 个文件，`main.html`并且`search.php`.

在`main.html`页面内，有这段代码：

```
$("#results").load("search.php",queryString,function(response,status,xhr){
... some code here
}) 
```

在`search.php`页面内，有这段代码：

```
$image_id=mysql_insert_id() // getting the last ID of the last query - works perfectly 
```

我想要做的是将此变量回显到`main.html`文件中，并将其存储在一个名为的 JS 变量`im_id`中，我可以通过`main.html`页面调用该变量。

我试着这样做

```
echo "<script type=\"text/javascript\">$im_id=".mysql_insert_id()."</script>"; 
```

但它根本不起作用。

我找到了一种解决方法，将内容存储在这样的文本框中

```
echo "<script type=\"text/javascript\">$(\"#textbox\").val(".$image_id.")</script>"; 
```

然后在 JScript 中，使用

```
$im_id=$("#textbox").val(); 
```

以及许多其他使用“中介”的方法，但没有直接设置变量的直接方法吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:21:12.857

它不工作，因为你输出`$im_id=1`，你应该输出`var im_id = 1;`。

在您的 PHP 中：

```
echo "<script type=\"text/javascript\">var im_id = ".mysql_insert_id().";</script>"; 
```

如果它仍然不起作用，请查看生成的代码，而不是 PHP 源代码。只需在浏览器中查看源代码，然后使用调试器找出问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:24:59.873

它不起作用的原因是 php 用变量的值替换了双引号内的变量。这使得模板变得容易。有关更多信息，请参阅 php 文档的[变量解析部分](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)。

> ```
> <?php
> $juice = "apple";
> 
> echo "He drank some $juice juice.".PHP_EOL;
> // Invalid. "s" is a valid character for a variable name, but the variable is $juice.
> echo "He drank some juice made of $juices.";
> ?> 
> ```
> 
> 上面的示例将输出：
> 
> ```
> He drank some apple juice.
> He drank some juice made of . 
> ```

如果您想在 javascript 中使用以 $ 开头的变量名，请用单引号替换双引号：

```
echo '<script type=\"text/javascript\">$im_id='.mysql_insert_id().'</script>'; 
```

或者，不要在变量名中使用 $：

```
echo "<script type=\"text/javascript\">im_id=".mysql_insert_id()."</script>"; 
```

# c# - 适用于 Windows 窗体的 PetaPoco 示例应用程序

> ID：11226023
> 
> 赞同：0
> 
> 时间：2012-06-27T12:18:51.300
> 
> 标签：c#, sql, petapoco

我遇到了 [PetaPoco](http://www.toptensoftware.com/petapoco/)并决定试一试 有没有人遇到过这样的示例 WindowsForms 应用程序？到目前为止，我只找到了示例 Web 应用程序。

我了解类似于 NHibranate 的 PetaPoco 概念，但我找不到一个示例来了解如何将 Grid 绑定到查询结果。如果有人手头有一个，最好是一个示例应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:50:24.263

您可以像这样绑定 Winform DataGridView：

```
 Dim ppdb = New PetaPoco.Database("Data Source=XXXX;Initial Catalog=xxxx;Integrated Security=True;", "System.Data.SqlClient")
    Dim blTable = New BindingList(Of TableItem)(ppdb.Query(Of TableItem)("select * from table").ToList)
    Dim bsTable As New BindingSource(blTable, "")
    DataGridView.DataSource = bsTable 
```

如果要保留更改，则需要将对象保存回数据库。

要将 POCO 绑定到一行，请使用：

```
Dim obj = DataGridView.Rows(RowIndex).DataBoundItem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:38:54.963

您应该能够直接绑定到`List<T>`返回的`public IEnumerable<T> Query<T>(string sql, params object[] args)`- 示例取自[GitHub 上 PetaPoco.cs @ source 的第 752 行](https://github.com/toptensoftware/PetaPoco/blob/master/PetaPoco/PetaPoco.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T12:29:48.173

即使它是相当古老的线程，也许有人会需要这个。直接绑定到 List 就是这样。

```
 using (var db = new PetaPoco.Database(string_connection, string_provider))
    {
        try
        {
            var ret = db.Query<MyTable>("select * from my_table_name").ToList();

            if(ret != null)
            {
                dgv.DataSource = ret; 
            }
        }
        catch (Exception ex)
        {
            Trace.WriteLine("Error: " + ex.Message); 
        }
    } // using 
```

# javascript - Node.js - 我什么时候应该做异步的事情，什么时候做同步

> ID：11226026
> 
> 赞同：2
> 
> 时间：2012-06-27T12:19:00.130
> 
> 标签：javascript, node.js, asynchronous, sync

我对 node.js 的异步性质感到困惑。我正在其中编写一个小项目，而我之前的（同步）编程经验妨碍了我。

我应该如何决定是否/在哪里编写异步代码？

例如，我有一个带有字段的模型，其中每个都有一些验证规则：

```
model = { title: text_validation, 
  subtitle: text_validation }

text_validation = { max_len: 10,
  required: true,
  url: true } 
```

当我验证模型时，我会遍历所有字段，检查规则是否通过 - 这些是非常快速的功能。

```
Model.validate = function() {
  validator = {};
  fields = Object.keys(Model);
  fields.forEach(function(field) {
    validator[field_name] = field.validate();
  });
}

Field.validate = function() {
  validator = [];
  rules.forEach(function(rule) {
    if (rule is not valid)
      validator.push(rule)
  });

  return validator;
} 
```

我应该使用具有如此短而快速迭代的回调吗？

这里的界限在哪里？node.js 应该始终是异步的，或者如果它足够快，我可以允许同步循环或 w/e 吗？如果可能，请参考何时何地使用同步/异步的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:28:34.213

你可能不应该。在大多数情况下，只有在等待应用程序外部的某些内容（主要是文件、数据库和网络操作）时才需要异步逻辑。*异步延迟应用程序中的代码不会给您带来任何性能优势，因为您的代码在某些时候*仍需要运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:46:31.083

我已经在评论中说过，但我认为举个例子也是个好主意。

*回调*和*异步操作*的概念是不同的，尽管是相关的。`forEach`您使用的 循环**根本不是**异步的。以下是或多或少的`forEach`外观定义：

```
Array.prototype.forEach = function(callback) {
    var l = this.length;
    for (var i = 0; i < l; i++)
        callback(this[i], i);
}; 
```

如您所见，其中没有任何异步内容。在`callback`循环中一步一步地同步执行。

那么如何使循环异步呢？好吧，你可以试试这个：

```
Array.prototype.asyncForEach = function(applier, finished) {
    var self = this;
    var l = self.length;
    var call = function(i) {
        process.nextTick(function() {
            applier(self[i], i);
            if (i == l-1)
                finished();
            else
                call(i+1);
        });
    }
    call(0);
}; 
```

你可以像这样使用它：

```
var x = [1,2,3,4,5,6,7,8,9,10];
x.asyncForEach(function(el, index) {
    /* apply function to each el and index */
    console.log(el);
}, function() {
    /* This will be called when the loop finishes! */
    console.log('Finished!');
});
/* Let us check whether the loop is really asynchronous.
   The following code should fire BEFORE loop! */
console.log('Is it asynchronous?'); 
```

如您所见，它并不像`forEach`. 但这允许其他代码在循环的迭代之间运行（[`process.nextTick`](http://nodejs.org/api/process.html#process_process_nexttick_callback)方法的魔力）。因此，您获得了[High Availability](http://en.wikipedia.org/wiki/High_availability)，但代价是循环完成需要更多时间。请注意，可以在迭代之间修改数组，这可能会导致您的应用程序崩溃。:D

正如我在评论中所说：我从来没有见过一个循环工作这么长时间，以至于它实际上需要变成异步循环。而且我处理了一些我处理了很多的市场数据（尽管使用 Python，而不是 JavaScript - 这可能是一个原因）。正如 lanzz 所评论的，如果循环花费了太多时间，那么分叉它可能是一个好主意。或者创建一个用某种高效语言（C？）编写的 WebService（或[Node.JS 插件](http://nodejs.org/api/addons.html)）。

# c# - iOS 应用内购买（消耗品）- 服务器超时

> ID：11226032
> 
> 赞同：3
> 
> 时间：2012-06-27T12:19:18.413
> 
> 标签：c#, objective-c, ios, xamarin.ios, in-app-purchase

我对应用内购买的特定情况有疑问。

我们的应用中有一个用于购买硬币的消耗品：

*   使用通过 IAP 购买 0.99 美元的硬币包
*   我们向我们的服务器发送请求以记录购买并将硬币添加到他们的帐户（这些硬币在多个设备之间共享，我们的服务器在这里完成工作）
*   完成 IAP 交易

问题是，如果对我们服务器的请求超时或失败，我们应该怎么做？用户花了钱，但永远不会得到硬币。如果他们在那时再次尝试购买，它会给他们一个错误，说购买尚未下载。

我看到了“恢复交易”选项，但不知道如何在这里应用它。我宁愿在应用程序的某个地方没有按钮。

别担心这个应用程序还没有发布，这个应用程序是用 MonoTouch 用 C# 编写的，但是欢迎使用 Objective-C 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:18:17.943

我所做的方法是在 NSUserDefaults 中保存失败的事务。因此，每次应用程序来自后台时，它都会检查任何失败交易的用户默认设置，然后再次重试。

我不确定它是否正确。但是，我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:25:49.237

恢复事务就可以了。它只是再次重新下载购买。看看这里的第五个帖子：

[http://monogame.codeplex.com/discussions/359109](http://monogame.codeplex.com/discussions/359109)

这是实现它的代码：

InAppPurchaseManager > MySKPaymentObserver：

```
 public override void PaymentQueueRestoreCompletedTransactionsFinished (SKPaymentQueue queue)
        {
            foreach(SKPaymentTransaction transaction in queue.Transactions)
            {

                #if DEBUG
                Console.WriteLine("Restoring Transaction " + transaction.Payment.ProductIdentifier);
                #endif
                theManager.restoreTransaction(transaction);
            }
        } 
```

以下是如何在游戏中调用代码：

```
 app = new InAppPurchaseManager ();
 app.LoadStore();
 SKPaymentQueue.DefaultQueue.RestoreCompletedTransactions(); 
```

# validation - 具有一对多的未保存域类以随机顺序返回子对象

> ID：11226033
> 
> 赞同：1
> 
> 时间：2012-06-27T12:19:18.673
> 
> 标签：validation, grails, constraints, children

所以情况如下：

我有一堂课。例如：

```
 class Author {
       String name

       static hasMany = [books: Book]
       static mapping = {
         books cascade: "all-delete-orphan"
       }
    }

    class Book {
       String text

       static belongsTo = [author: Author]

       static constraints = {
         text minSize: 500
       }
   } 
```

现在，我为这个一对多创建了一个表单，当我尝试验证时，该人没有输入至少 500 个字符的文本，所以我将对象返回到表单。

问题是子对象没有按照我创建它们的顺序返回！！！你们都如何验证从未保存过的域类的子对象？！？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:29:46.383

试试这个方法

```
class Author {
   String name
   ArrayList<Book> books = []
   static hasMany = [books: Book]
   static mapping = {
     books cascade: "all-delete-orphan"
   }
} 
```

如果不起作用，我认为您必须按某个字段订购

您可以通过这种方式指定排序顺序

```
class Author {
   String name

   static hasMany = [books: Book]
   static mapping = {
     books cascade: "all-delete-orphan"
     books sort: 'id', order: 'desc'
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:19:37.837

默认情况下，`hasMany`使用 a`Set`来存储相关对象，并且 a`Set`没有按顺序排列的概念。如果订单对您的应用程序很重要，我建议您使用 a`List`代替。

# android - 每当我尝试覆盖 getView 方法时，为什么 ArrayAdapter 会丢失顺序？

> ID：11226035
> 
> 赞同：0
> 
> 时间：2012-06-27T12:19:19.283
> 
> 标签：android, android-arrayadapter, listactivity

考虑以下示例，列表项的顺序在重写 getView() 方法之前是正确的。每当我重写它以完成一些额外的工作（示例中未显示）时，项目的顺序就会变得一团糟。我向下滚动以查看一个数字，然后向上滚动以再次查看相同的数字。这种奇怪行为的原因是什么，我该如何解决？

```
package com.staticlist;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class MainActivity extends ListActivity {
    String[] items = { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16",
            "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33",
            "34", "35", "36", "37", "38", "39", "40" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new MyListAdapter(this, R.layout.main, items));
    }
}

class MyListAdapter extends ArrayAdapter<String> {
    public MyListAdapter(MainActivity mainActivity, int main, String[] items) {
        super(mainActivity, main, items);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row;

        if (convertView == null) {
            row = super.getView(position, convertView, parent);
        } else {
            row = convertView;
        }

        return row;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:23:24.617

由于您在向下滚动时没有创建新视图并使用旧视图（当时 convertView 不会为空）

试试这个方法它会正确的

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return super.getView(position, convertView, parent);
    } 
```

您需要这样做（在此处使用 convertview），因为 ArrayAdapter 已经具有相同的逻辑

来自小部件/ [ArrayAdapter.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)

```
public View getView(int position, View convertView, ViewGroup parent) {
        return createViewFromResource(position, convertView, parent, mResource);
    }

    private View createViewFromResource(int position, View convertView, ViewGroup parent,
            int resource) {
        View view;
        TextView text;

        if (convertView == null) {
            view = mInflater.inflate(resource, parent, false);
        } else {
            view = convertView;
        } 
```

[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:08:54.580

在您的情况下，如果您使用自定义 ArrayAdapter，则需要添加以下内容。

```
adapter.sort(new Comparator<String>() {

            @Override
            public int compare(String lhs, String rhs) {
                if (Integer.parseInt(lhs) == Integer.parseInt(rhs))
                    return 0;
                else if (Integer.parseInt(lhs) > Integer.parseInt(rhs))
                    return 1;
                else
                    return -1;
            }
        });
adapter.notifyDataSetChanged(); 
```

# java - 处理图块中的 ActionErrors

> ID：11226036
> 
> 赞同：1
> 
> 时间：2012-06-27T12:19:20.937
> 
> 标签：java, struts, tiles

我在我的 struts 1 应用程序中使用瓷砖。

我在其中一个图块中有一个登录页面，并且在我的 validate 中有一个 validate 方法`ActionForm`，该方法对登录名进行了一些验证。如果出现验证错误，则会显示错误消息，但有错误的登录页面显示为独立的——也就是说，不显示图块结构。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:20:42.337

在您的操作定义中，您可能在输入参数中指定了 login.jsp 而不是登录磁贴名称：

```
<action path="/login"
        type="..."
        name="loginForm"
        scope="request"
        input="/login.jsp"
        validate="true" /> 
```

应该

```
<action path="/login"
        type="..."
        name="loginForm"
        scope="request"
        input="login.tile.name"
        validate="true" /> 
```

# c# - 在代码中获取 ItemsControl 中包含的控件

> ID：11226041
> 
> 赞同：3
> 
> 时间：2012-06-27T12:19:35.507
> 
> 标签：c#, .net, wpf, itemscontrol

当我得到`ItemsSource`my`ItemsControl`时，它会将`ObservableCollection`视图模型边界返回给我的用户控件，但我想获得`ObservableCollection`我的用户控件。如何获得包含在我的用户控件`ItemsControl`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:23:53.660

首先，您需要调用 ItemsControl.ContainerFromElement 以获取显示的每个数据项的“根控件”。您可以使用 VisualTreeHelper 来迭代控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:26:58.563

您还可以查看[ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.aspx)。您可能可以使用[ContainerFromIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.containerfromindex.aspx)或[ContainerFromItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.containerfromitem.aspx)方法来获取每个元素的容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:41:36.123

您可以使用根控件的 FindByName，或使用此功能遍历可视化树

```
public static FrameworkElement FindByName(string name, FrameworkElement root)
{
    Stack<FrameworkElement> tree = new Stack<FrameworkElement>();
    tree.Push(root);

    while (tree.Count > 0)
    {
        FrameworkElement current = tree.Pop();
        if (current.Name == name)
            return current;

        int count = VisualTreeHelper.GetChildrenCount(current);
        for (int i = 0; i < count; ++i)
        {
            DependencyObject child = VisualTreeHelper.GetChild(current, i);
            if (child is FrameworkElement)
                tree.Push((FrameworkElement)child);
        }
    }

    return null;
} 
```

# windows-phone-7 - Windows Phone 7中的Sha256 +盐算法

> ID：11226043
> 
> 赞同：0
> 
> 时间：2012-06-27T12:19:43.397
> 
> 标签：windows-phone-7, encryption, salt, sha, sha256

我想使用 SHA256 算法和盐密钥加密我的用户名和密码，以便通过 xml 发送到服务器。我怎样才能做到这一点？

我用 SHA256 做了一个示例代码并粘贴了 bleow。我如何在这个中使用盐键？

```
 void myBtn_Click(object sender, RoutedEventArgs e)
      {
        var sha = new  SHA256Managed();
        var bytes = System.Text.Encoding.UTF8.GetBytes(testPass.Text);
        byte[] resultHash = sha.ComputeHash(bytes);
        string sha256 = ConvertToString(resultHash);
      }

       public static string ConvertToString(byte[] buff)
       {
         string sbinary = "";

         for (int i = 0; i < buff.Length; i++)
         {
             //hex-formatted
            sbinary += buff[i].ToString("X2");
         }
         return (sbinary);
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:25:59.937

SHA 是一种哈希算法，而不是一种加密算法。无法从您的结果字符串中提取密码。你确定你采取了正确的方法吗？你愿意更好地解释一下这个场景吗？

# php - 从字符串/网址中删除文本

> ID：11226051
> 
> 赞同：1
> 
> 时间：2012-06-27T12:20:11.517
> 
> 标签：php, regex

我有很多网址（字符串）：

```
 $one = 'http://www.site.com/first/1/two/2/three/3/number/342';
        $two = '/first/1/two/2/number/32';
        $three = 'site.com/first/1/three/3/number/7';
        $four = 'http://www.site.com/first/13/two/2/three/33/number/33/four/23'; 
```

如何使用 PHP删除这个变量**/number/x ？**我的例子应该是：

```
 $one = 'http://www.site.com/first/1/two/2/three/3';
    $two = '/first/1/two/2';
    $three = 'site.com/first/1/three/3';
    $four = 'http://www.site.com/first/13/two/2/three/33/four/23'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:23:54.930

```
$one = 'http://www.site.com/first/1/two/2/number/33/three/3';
$one = preg_replace('/\/number\/\d+/', '', $one);
echo $one; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:33:18.737

我建议以下模式：

```
'@/number/[0-9]{1,}@i' 
```

**原因是：**

1.  `i`修饰符将捕获 '/NumBer/42' 之类的url
2.  使用`@`分隔模式可以使模式更具可读性并减少转义斜杠的需要（例如`\/\d+`）
3.  虽然`[0-9]{1,}`比 更冗长`\d+`，但它还有一个额外的好处，那就是更能揭示意图。

**下面是它的用法演示：**

```
<?php

$urls[] = 'http://www.site.com/first/1/two/2/three/3/number/342';
$urls[] = '/first/1/two/2/number/32';
$urls[] = 'site.com/first/1/three/3/number/7';
$urls[] = 'http://www.site.com/first/13/two/2/three/33/number/33/four/23';
$urls[] = '/first/1/Number/55/two/2/number/32';

$actual = array_map(function($url){
  return preg_replace('@/number/[0-9]{1,}@i', '', $url);
}, $urls);

$expected = array(
  'http://www.site.com/first/1/two/2/three/3',
  '/first/1/two/2',
  'site.com/first/1/three/3',
  'http://www.site.com/first/13/two/2/three/33/four/23',
  '/first/1/two/2'
);

assert($expected === $actual); // true 
```

# mysql - MySQL 基于字段内容连接

> ID：11226054
> 
> 赞同：0
> 
> 时间：2012-06-27T12:20:18.690
> 
> 标签：mysql

我有一个结构如下的 MySQL 表：

![MySQL 字段](../Images/c33faf924d442fb70ea007eaae01c854.png)

我正在寻找一个选择语句，它将连接最后四个字段，如下所示：

```
ID    Source
1     Search engine
2     Email
3     Coupon mailout
4     Relative of owner 
```

我可以想办法做到这一点，通过使用子查询来选择基于类型连接的相关字段，嵌套子查询来选择不是 NULL 或“其他”的值，然后是 JOIN、CONCAT() 和 UNION，但是这似乎是解决问题的一种非常复杂的方法。

这是我想太多了吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:31:45.340

如果你不能修复你的数据，你可以简单地使用[IF()](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html)函数。在我的示例中，我使用简单的列名使其更清晰：

```
mysql> SELECT IF(c1 IS NOT NULL AND c1 != 'Other', c1,
        IF(c2 IS NOT NULL AND c2 != 'Other', c2,
        IF(c3 IS NOT NULL AND c3 != 'Other', c3, c4))) FROM t1; 
```

以上经过测试。

如果你需要经常使用它，你可以用它来做一个存储函数。

但是，如果可以的话，修复表结构？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:29:02.677

我认为您将需要一些[IF](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)和[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)，例如：

```
SELECT ID, IF(Type='Online', IFNULL(OnlineSourceOther, OnlineSource), IFNULL(OfflineSourceOther, OfflineSource)) AS Source FROM referrals 
```

完全未经测试，YMMV，祝你好运，让我们知道它是怎么回事。

# jquery - 提交表单后关闭颜色框（iframe）并在父页面中加载新网址

> ID：11226065
> 
> 赞同：0
> 
> 时间：2012-06-27T12:20:45.787
> 
> 标签：jquery, hyperlink, refresh, colorbox

我正在 iframe 颜色框中加载页面。在这个页面上有一个可以提交的表格。我想在提交表单后自动关闭颜色框并在父页面中加载一个新的 url。我怎么能意识到这一点？

现在我在提交表单后使用了 onclick 功能，但我希望自动完成：

```
<a onclick="parent.$.fn.colorbox.close();" target="_parent" href="http://www.test.com">Test</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:34:53.480

目前尚不完全清楚问题出在哪里。

一般来说，您需要在 iframed 表单上使用提交操作来触发您想要的行为。例如，您可以捕获该事件并执行以下操作：

*   处理表单提交
*   关闭颜色框
*   将新的 uri 加载到父级的位置

您已经知道如何关闭颜色框，因此请继续研究 parent.window.location，然后您就可以参加比赛了。

就个人而言，我会在 javascript 中执行此操作，而不是尝试使用默认浏览器行为来解决它。

祝一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:49:36.083

Kevin 给出了很好的建议，而 Ajax 将是一种优雅的处理方式。但是，最简单的做法是让表单响应页面看起来像这样：

```
<!DOCTYPE html>
<html>
  <head>
    <script>
      parent.$('document').bind('cbox_closed', function(){
        location.href = "http://example.com";
      });
      parent.$.colorbox.close();
    </script>
  </head>
</html> 
```

# git - 如何使用别名扩展内置 Git 命令？

> ID：11226066
> 
> 赞同：3
> 
> 时间：2012-06-27T12:20:49.830
> 
> 标签：git, alias

在回答“[在本地执行的 Git pull hook 脚本](https://stackoverflow.com/questions/11207749/git-pull-hook-script-which-executes-locally)”时，我偶然发现了一个用例来给内置 git 命令起别名，例如`pull`或`push`带有扩展名。我怎么做？

第一个想法是：

```
[alias]
    push = "!echo -n \"really push? [y/n]\";read -s -n 1 really;if [[ $really == \"y\" ]];then git push; else echo \"aborting\"; fi" 
```

只要我不命名我的别名`push`（例如`qp`或类似的名称），这就可以正常工作。但是，一旦我调用它`push`，它就会以某种方式被忽略。

有没有一种 git 方法可以使用别名扩展内置 git 命令，或者我是否必须在我的 git 中设置别名`.bashrc`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:25:11.753

简短的回答：**你不能**。

Git 明确禁止这样做，以防止可能影响 git 命令调用（在脚本等中）的混淆和阴影。请参阅**[git-config 手册页](http://git-scm.com/docs/git-config)**。

> `alias.*`
> 
> git(1) 命令包装器的命令别名 - 例如，在定义“alias.last = cat-file commit HEAD”之后，调用“git last”等效于“git cat-file commit HEAD”。为了避免脚本使用的混乱和麻烦**，隐藏现有 git 命令的别名将被忽略**。参数由空格分隔，支持通常的 shell 引用和转义。引号对和反斜杠可用于引用它们。

正如您所指出的，您可以将别名命名为其他名称并使用它，或者在`bash`. 但是，请注意 bash 中的多字别名是不可能的，因此您不能有“git push”的别名。相反，您需要使用一个函数——请参阅 SuperUser 上的“ [Bash：别名中的空格](https://superuser.com/questions/105375/bash-spaces-in-alias-name)”以获取一些提示（您可能可以批量采用它）。

# jar - Flyway 在 jar 文件中找不到迁移

> ID：11226070
> 
> 赞同：1
> 
> 时间：2012-06-27T12:20:56.760
> 
> 标签：jar, classpath, flyway

我在我支持的许多应用程序中实现了 Flyway，它的工作就像做梦一样。

但是，一旦我将应用程序部署到测试环境，迁移就会停止工作。

经过一番调查，我发现当它们被加载到 jar 文件中时，Flyway 没有找到迁移，但是当它们没有被压缩时（比如当我在 Eclipse 中工作或者我将 jar 提取到类路径中时）它可以工作正如预期的那样。

由于应用程序的插件架构，我无法使用“默认”设置，因此我将 Flyway 对象设置如下：

```
Flyway flyway = new Flyway();
flyway.setDataSource(dataSource);
flyway.setBaseDir("za/co/company/application/plugin1/db/migration");
flyway.setTable(tableName);
flyway.setBasePackage("za.co.company.application.plugin1.db.migration");
flyway.init();
flyway.migrate(); 
```

如果要解压缩 jar 文件，则 sql 文件将位于：za/co/company/application/db/migration

如前所述，我知道迁移有效，只是在 jar 文件中时无效。上面的代码执行完美，只是没有找到作为迁移的一部分运行的 sql 文件。

虽然最初是使用 flyway-core-1.6 开发的，但我已经在 1.6.1 和 1.7_SNAPSHOT 版本中尝试过（同样的负面结果），我在[这里](http://code.google.com/p/flyway/issues/detail?id=242)和[这里](https://stackoverflow.com/questions/10214887/unable-migrate-using-flyway-1-6-in-spring-application)发现了类似的问题。

**编辑：附加信息**

操作系统：Windows XP
JDK：1.7.0_04
DB：SQL Server 2005
通过 bat 文件直接从命令窗口运行。

```
2012-06-27 15:50:05.855 main: flyway.migrate()
2012-06-27 15:50:05.886 Database: Microsoft SQL Server
2012-06-27 15:50:05.902 Schema: dbo
2012-06-27 15:50:05.902 Unable to find path for sql migrations: za\co\company\application\plugin1\db\migration
2012-06-27 15:50:05.918 Scanning URL: jar:file:/C:/Temp/lib/plugin1.jar!/za/co/company/application/plugin1/db/migration
2012-06-27 15:50:05.918 Filtering out resource: za/co/company/application/plugin1/db/migration/ (filename: )
2012-06-27 15:50:05.918 Filtering out resource: za/co/company/application/plugin1/db/migration/V1_1__Allows_cancelations.sql (filename: V1_1__Allows_cancelations.sql)
2012-06-27 15:50:05.918 Filtering out resource: za/co/company/application/plugin1/db/migration/V1__Base_version.sql (filename: V1__Base_version.sql)
2012-06-27 15:50:05.933 main: done Migrate. 
```

我已确认我使用的是默认前缀 (V) 和后缀 (.sql)。日志中提到的被过滤掉的迁移文件的名称确实是我想要执行的迁移。

**编辑：还有更多信息。** 我克隆了源存储库并在资源被记录为被过滤之前获得了堆栈跟踪。

```
at com.googlecode.flyway.core.util.scanner.ClassPathScanner.filterResourceNames(ClassPathScanner.java:203)
at com.googlecode.flyway.core.util.scanner.ClassPathScanner.findResourceNames(ClassPathScanner.java:136)
at com.googlecode.flyway.core.util.scanner.ClassPathScanner.scanForClasses(ClassPathScanner.java:67)
at com.googlecode.flyway.core.migration.jdbc.JdbcMigrationResolver.resolveMigrations(JdbcMigrationResolver.java:51)
at com.googlecode.flyway.core.migration.CompositeMigrationResolver.collectMigrations(CompositeMigrationResolver.java:175)
at com.googlecode.flyway.core.migration.CompositeMigrationResolver.doFindAvailableMigrations(CompositeMigrationResolver.java:156)
at com.googlecode.flyway.core.migration.CompositeMigrationResolver.resolveMigrations(CompositeMigrationResolver.java:119)
at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:565)
at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:1)
at com.googlecode.flyway.core.Flyway.execute(Flyway.java:850)
at com.googlecode.flyway.core.Flyway.migrate(Flyway.java:561) 
```

我已经确认迁移被过滤掉的唯一时间是当它在 jar 文件中找到它们时。就好像 .sql 迁移在 jar 文件中时甚至没有被扫描。

我仍在四处寻找，并将相应地更新。

**编辑：源代码查询：** 我对 Flyway 源代码并不太熟悉，我只在其中闲逛了几个小时......

SqlMigrationResolver 类的 resolveMigrations 方法中的这段代码应该做什么？如果我从代码中删除它，SQLmigrations 会从 Jar 文件中完美加载，否则它们不会加载并记录警告。

```
 if (StringUtils.hasText(normalizedBaseDir)) && !new ClassPathResource(normalizedBaseDir + "/").exists() ) {
        LOG.warn("Unable to find path for sql migrations: " + location);
        return migrations;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:51:06.090

试试新发布的 1.7。违规声明已被删除。

# c++ - Windows C++ - 使用 CloseHandle 关闭线程

> ID：11226072
> 
> 赞同：13
> 
> 时间：2012-06-27T12:21:02.167
> 
> 标签：c++, windows

我通过“CreateThread”函数创建了一个线程。

在这个线程中，我有一个“while(true)”循环（读取输入）。

现在，当我想关闭线程时，我使用“CloseHandle”函数。

这是正确的做法吗？或者我应该退出 'while(true)' 循环，然后使用 'CloseHandle' 函数？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T12:44:46.593

CloseHandle() 不会破坏、终止或暂停线程，它只会破坏句柄本身（因此您没有句柄来杀死线程或等待它）。线程继续正常工作（我在很多情况下都使用过它），停止它的唯一方法是退出线程函数（ThreadProc（）），或者杀死它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T12:24:42.917

一般来说，这（调用 TerminateThread）是一件坏事，因为线程可能会分配一些资源（即文件描述符），这些资源在整个进程终止之前将不可用。更重要的是，CloseHandle 不会停止线程。

如果您的线程中有一些冗长的操作，那么至少使用

```
while(!ShouldExit)
{
     DoOneMoreIteration();
} 
```

循环。这样，您可以通过将 ShouldExit 设置为 1（或“true”，如果它是 C++ 和 bool 变量）并在此线程的句柄上调用 WaitForSingleObject 来终止线程，以确保它已完成。

对于eran 的评论：ShouldExit 必须声明为'volatile'。

如果您正在等待某些输入（我想是一个控制台），那么您可以将非阻塞（“重叠”）I/O 与标准输入一起使用。

例如，请参阅以下问题：[检查 Win32 文件流以获取可用输入](https://stackoverflow.com/questions/8347642/checking-win32-file-streams-for-available-input)

会是这样的

```
HANDLE h = GetStdHandle(STD_INPUT_HANDLE);

while(!ShouldExit) {
   if(WaitForSingleObject(h, FALSE, SomeTimeoutValue) == WAIT_OBJECT_0)
   {
      ... use std::cin - it has some input and won't block
   }
} 
```

为了让事情变得更好（避免 CPU 过载），请使用 WaitForMultipleObjects 并在某些外部事件上中断循环。

```
/// Global var
HANDLE SomeGlobalEvent;

/// ThreadProc():
HANDLE h[2];
h[0] = GetStdHandle(STD_INPUT_HANDLE);
h[1] = SomeGlobalEvent;

while(true) {
   DWORD which = WaitForMultipleObjects(2, h, FALSE, SomeTimeoutValue);
   if(which == WAIT_OBJECT_0)
   {
      ... use std::cin - it has some input and won't block
   } else
   if(which == WAIT_OBJECT_1)
   {
      // got the termination event
      break;
   }
}

/// "Main" thread:

SomeGlobalEvent = CreateEvent(NULL, false, false, NULL);

HANDLE hThread = _beginthread(ThreadProc, 4096, NULL);

 ....
 /// send termination signal
 SetEvent(SomeGlobalEvent);

 /// Wait for thread completion
 WaitForSingleObject(hThread); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T12:24:50.370

最好的办法是仔细阅读文档。Win32 API 有据可查。

来自[MSDN on CreateThread 在备注部分](http://msdn.microsoft.com/en-us/library/ms885186.aspx)它说

> 线程执行从 lpStartAddr 参数指定的函数开始。如果此函数返回，则 DWORD 返回值用于在对 ExitThread 函数的隐式调用中终止线程。使用 GetExitCodeThread 函数获取线程的返回值。

从那以后，你应该让线程入口函数完成它的工作并完成。即退出将返回线程入口函数的循环。

# php - MySQL PHP 从数据库表中获取倒数

> ID：11226073
> 
> 赞同：1
> 
> 时间：2012-06-27T12:21:05.917
> 
> 标签：php, mysql, datetime, time

所以我有 2 个表，一个用户表和一个约会表。我想要做的是从不存在的数据库中获取时间。

我将举几个例子，因为这可能没有任何意义，下面是我的 2 个表。

```
+-----------------+
|      Users      |
+-----------------+
|  ID  |   Name   |
+------+----------+
|  1   |   Bill   |
|  2   |   John   |
+------+----------+

+-------------------------------------------------------------------------+
|                                   Appointments                          |   
+----------+--------------------+-------------------+---------------------+
|  UserID  |    DateTimeFrom    |    DateTimeTo     |   AppointmentName   |     
+----------+--------------------+-------------------+---------------------+
|     1    |  2012-06-16 10:00  |  2012-06-16 11:00 |      Hair Cut       |
|     1    |  2012-06-16 14:30  |  2012-06-16 16:00 |         Work        |
|     1    |  2012-06-16 19:00  |  2012-06-16 22:00 |  Dinner and Drinks  |
|     2    |  2012-06-16 07:00  |  2012-06-16 10:30 |      Travelling     |
|     2    |  2012-06-16 16:00  |  2012-06-16 16:30 |        Dentist      |
+----------+--------------------+-------------------+---------------------+ 
```

我想要返回的是空时间或倒数时间，例如，如果我只是在 6 月 16 日为 Bill 做这件事，那么我想要返回的是：

```
+--------------+------------+
|   TimeFrom   |   TimeTo   |
+--------------+------------+
|    00:00     |    10:00   |
|    11:00     |    14:30   |
|    16:00     |    19:00   |
|    22:00     |    23:59   |
+--------------+------------+ 
```

如果我在 6 月 16 日为两个用户都这样做，那么我会得到类似的结果：

```
+--------------+------------+
|   TimeFrom   |   TimeTo   |
+--------------+------------+
|    00:00     |    07:00   |
|    11:30     |    14:30   |
|    16:30     |    19:00   |
|    22:00     |    23:59   |
+--------------+------------+ 
```

或者尽可能接近的东西。我不知道在 MySQL 中是否有一个好的方法，或者我是否必须使用 PHP 将时间转换为它们的倒数。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:50:43.420

据我所知，mysql 中没有直接处理此问题的功能，但是在 PHP 中很容易处理。

如果您没有任何从一天到另一天的事件，那么您需要做的就是将所有时间按顺序放入一个数组中（开始，结束，开始，结束，开始，结束......）然后 array_unshift '00:00' 开始，array_push '23:59' 结束，然后 array_chunk 两个，你会得到你想要的输出。

如果您确实有跨越一天到另一天的事件，那么您采用相同的方法，但使用时间戳，将 00:00 替换为第一天开始的时间戳，将 23:59 替换为结束的时间戳最后一天。

很抱歉没有发布代码，但我觉得在这种情况下，这种方法比简单地提供代码来解释更好。

# java - 如何在 Java 中将 16 位灰度图像转换为 RGB 图像？

> ID：11226074
> 
> 赞同：1
> 
> 时间：2012-06-27T12:21:07.847
> 
> 标签：java, image, swing, jai

我正在使用 Netbeans 平台在 Java Swing 中制作桌面应用程序。我想将 16 位灰度图像转换为 RGB 图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:25:49.460

Incompl 描述的 getRGB/setRGB 方法应该可以工作。但是，如果我没记错的话，它的性能相当差（在这种情况下，这些方法做了很多不必要的工作）。`BufferedImage.TYPE_USHORT_GRAY`我认为绘制新图像并让Java优化从到的转换会快得多`BufferedImage.TYPE_INT_RGB`：

```
int width = grayImage.getWidth();
int height = grayImage.getHeight()

BufferedImage newImage = new BufferedImage(
    width, height, BufferedImage.TYPE_INT_RGB);
Graphics g = newImage.getGraphics();  
g.drawImage(grayImage, 0, 0, null);  
g.dispose(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:47:07.207

灰度保持在一个单一的值，黑色，而 RBG 保持在三个，红色，蓝色和绿色。你能做的最好的就是单色图像，你可以用课堂上的`getRGB(x, y)`方法来做。`BufferedImage`由于您的输入图像是灰度的，因此您可以从中获取三个颜色值中的任何一个，因为它们应该是相同的。然后将该值用于您选择作为单色基础的任何颜色。

这是一个红色的例子：

```
public BufferedImage changeToRedMonochrome(BufferedImage grayImage)
{
    int width = grayImage.getWidth();
    int height = grayImage.getHeight()

    BufferedImage redImage = new BufferedImage(
        width, height, BufferedImage.TYPE_INT_RGB);

    for (int y=0; y<height; y++)
    {
        for (int x=0; x<width; x++)
        {
            Color grayColor = new Color(grayImage.getRGB);
            int gray = grayColor.getRed();

            int red = (gray > 127) ? 255 : gray/2;
            int blue = (gray > 127 ? gray/2 : 0;
            int green = (gray > 127 ? gray/2 : 0;

            Color redColor = new Color(red, blue, green);
            redImage.setRGB(x, y, redColor);
        }
    }
} 
```

这不是完美的代码，当然您需要对其进行调整以适应您的特定需求，但这是制作单色图像的一种方法。

# mysql - 设置变量结果，来自查询

> ID：11226079
> 
> 赞同：30
> 
> 时间：2012-06-27T12:21:20.233
> 
> 标签：mysql, variables, stored-procedures, variable-assignment, multiple-columns

当我创建保存的过程时，我可以创建一些变量是吗？例如：

```
CREATE PROCEDURE `some_proc` ()  
BEGIN  

   DECLARE some_var INT; 
   SET some_var = 3;
.... 
```

问题：但是如何从查询中设置变量结果，即如何制作一些这样的：

```
DECLARE some_var INT;
SET some_var = SELECT COUNT(*) FROM mytable ; 
```

?

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-27T12:24:31.117

有多种方法可以做到这一点。

您可以使用子查询：

```
SET @some_var = (SELECT COUNT(*) FROM mytable); 
```

（就像你原来的一样，只需在查询周围添加括号）

或使用 SELECT INTO 语法分配多个值：

```
SELECT COUNT(*), MAX(col)
INTO   @some_var, @some_other_var
FROM   tab; 
```

子查询语法稍快（我不知道为什么），但只能分配一个值。select into 语法允许您一次设置多个值，因此如果您需要从查询中获取多个值，您应该这样做，而不是为每个变量一次又一次地执行查询。

最后，如果您的查询返回的不是单行而是结果集，您可以使用[游标](http://dev.mysql.com/doc/refman/5.5/en/cursors.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T12:23:49.890

以下 select 语句应该允许您保存 count(*) 的结果。

```
SELECT COUNT(*) FROM mytable INTO some_var; 
```

# layout - 在报告中间更改页面布局 (SSRS)

> ID：11226083
> 
> 赞同：4
> 
> 时间：2012-06-27T12:21:45.823
> 
> 标签：layout, reporting-services, report

嘿，

我有一个纵向布局的主报表，但主报表包含子报表，并且一些子报表需要采用横向布局。

是否可以更改主报表布局，以便将一些子报表显示为横向和一些纵向？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:32:57.707

对不起，我认为这是不可能的，至少在 SSRS 2008 中是不可能的。

在此[渲染报告项 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb677570%28v=sql.100%29.aspx)末尾的子报告**部分**：

> 子报表可以增长到定义子报表的 .rdl 文件中定义的正文的大小。例如，如果子报表的 RDL 声明子报表主体为 5 英寸宽，则子报表在父报表中将是 5 英寸宽。

此外，它还提到子报表中的页眉和页脚被省略。所有这些都表明，如果报表呈现为子报表，则根本不使用报表中的页面大小。父级的页面大小在整个报表中使用，因此在整个报表上强制执行单个布局（页面大小）。

# android - ICS 中的多点触控行为

> ID：11226086
> 
> 赞同：0
> 
> 时间：2012-06-27T12:21:59.877
> 
> 标签：android, touch

我正在做一个项目，我想修改 android 4.0 框架，这样当我进行多点触控时，所有以前的触控都应该被取消，并且当前的触控应该同时被计为按下事件。

当前行为类似于多点触控，发出第一个取消事件，而对于下一个触控事件，仅发出向下指针。

但我不确定要修改哪个类/方法以及要修改什么。请就此向我提出建议。

谢谢。

# sse - 将内存中的 32 位加载到 xmm 寄存器中

> ID：11226088
> 
> 赞同：1
> 
> 时间：2012-06-27T12:22:18.880
> 
> 标签：sse, inline-assembly, intrinsics, sse2, mmx

内联汇编：

```
__asm__("movd (%0), %%xmm1" : : "r"(some_pointer) :); 
```

什么是等效的内在代码？

```
__m128i foo = _mm_?????(some_pointer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:26:16.713

```
int32_t *foo_pointer;

__m128i foo = _mm_cvtsi32_si128(*foo_pointer); // MOVD 
```

如需将来参考，请参阅方便的[英特尔内部指南](https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:29:24.947

鉴于您希望将其放入整数 SSE 寄存器，您可能正在寻找[_mm_cvtsi32_si128](http://msdn.microsoft.com/en-us/library/ct3539ha%28v=vs.80%29.aspx)。

# mysql - 如何查看查询中的参数？

> ID：11226103
> 
> 赞同：11
> 
> 时间：2012-06-27T12:22:57.197
> 
> 标签：mysql, symfony, doctrine-orm, doctrine-query

为了调试我的代码，我想查看执行的显式 sql 查询。

我使用创建查询`createQueryBuilder`，我实现的最明确的事情是使用原始查询：

```
$qb->getQuery()->getSQL(); 
```

问题是我看到的是持有者（`?`）而不是参数。我在网上找到了一些解决方案，但它们适用于 1.3 和 1.4，不适用于 Symfony-2。

想法？谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-07T23:43:34.917

您可以使用 访问占位符使用的参数`$query->getParameters()`，因此您可以使用以下方法调试查询：

```
$query = $qb->getQuery();
print_r(array(
    'sql'        => $query->getSQL(),
    'parameters' => $query->getParameters(),
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-03T08:35:44.543

您可以使用以下方法轻松访问 SQL 参数。

```
 $result = $qb->getQuery()->getSQL();

   $param_values = '';  
   $col_names = '';   

   foreach ($result->getParameters() as $index => $param){              
            $param_values .= $param->getValue().',';
            $col_names .= $param->getName().',';
   } 

   //echo rtrim($param_values,',');
   //echo rtrim($col_names,','); 
```

因此，如果您打印出`$param_values`and `$col_names`，您可以获取通过 sql 和相应列名的参数值。

注意：如果`$param`返回一个数组，则需要重新迭代，因为里面的参数`IN (:?)`通常是嵌套数组。

同时，如果您发现了另一种方法，请与我们分享 :)

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-06T18:39:09.137

我还一直在寻找一种从 DQL 查询中获取参数注入 SQL 的方法，以帮助调试，例如，允许我输出可以直接粘贴到 phpmyadmin 中的 SQL 字符串，并为其添加解释等。

无论如何，我的答案基于 Néo 的答案，由于私有方法调用，我无法让它工作，我通过在 Doctrine\ORM\Query 中创建一个函数来进行调整，如下所示：

```
/**
 * Execute query and return the SQL with params injected.
 *
 * @return string
 * @throws QueryException
 */
public function executeAndGetSqlWithParams(): string
{
    // Execute the query to get the parser result.
    $this->execute();

    // Declare the SQL for use in the vsprintf function.
    $sql = str_replace('?', '%s', $this->getSQL());

    // Declare the SQL parameter mappings.
    $parameterMappings = $this->processParameterMappings($this->_parserResult->getParameterMappings());

    /**
     * TODO: Possibly replace each question mark by the correct vsprintf argument using $parameterMappings[1].
     *
     * Right now all parameters are treated as strings.
     */

    // Declare and define the SQL parameters.
    $sqlParameters = [];

    foreach ($parameterMappings[0] as $parameter)
    {
        if (is_array($parameter))
        {
            $sqlParameters[] = implode(',', $parameter);
        }
        else
        {
            $sqlParameters[] = $parameter;
        }
    }

    // Return the SQL with its parameters injected.
    return vsprintf($sql, $sqlParameters);
} 
```

顾名思义，它执行查询以从解析器结果中获取参数映射，然后将其与 vsprintf 一起使用以将参数替换为其值。

这当然是对核心代码的破解，由于我不熟悉为公共项目做出贡献，如果有人想尝试将其包含在其中，请随意复制它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-27T18:45:59.460

我必须建立一个 requete union（用 DQL 或 QueryBuilder 不可能），其中已经用 QueryBuilder 构建了 5 个查询。所以我重用了这些查询，但我在使用 getParameters() 函数时遇到了问题，因为它以与你给出的相同顺序给出参数。使用查询构建器的优点之一是您可以按您想要的顺序创建查询，但是当您检索参数时，您可能会在检索时混乱。为避免这种情况，我构建了以下功能：

```
 $getSqlWithParams = \Closure::bind(function(){
        return [$this->getSql(), $this->processParameterMappings($this->_parserResult->getParameterMappings())];
    }, null, Query::class); 
```

现在，当您要检索 sql 和排序参数时：

```
$getSqlWithParams()->call($query) 
```

不要忘记使用 \Doctrine\ORM\Query 语句。瞧！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-06T18:44:09.710

我会在 SQL Server 中使用 Profiler 来获取发送到数据库的内容。显然，mySQL 也有一些类似的工具。[是否有与 MySql 等效的 Profiler？](https://stackoverflow.com/questions/20263/is-there-a-profiler-equivalent-for-mysql)

# php - 验证后PHP表单为空

> ID：11226104
> 
> 赞同：1
> 
> 时间：2012-06-27T12:23:00.360
> 
> 标签：php, mysql, sql, forms, validation

我制作了注册表，您必须在其中输入所有个人信息。现在，当您提交并遇到一些错误时，它会使所有表单都为空，因此您必须重新填写所有内容。我该如何防止这种情况并让一切都保持原样？（可能除了密码）

这是我的代码：

```
<html>
<head>
  <title>Westpop</title>
  <link rel="stylesheet" href="opmaak.css">
</head>
<body>
<fblack>
<div id="header"><a href="Index.php"></a></div>

<div id="registreer">
<table cellpadding="5" align="center">
<th colspan="2" align="left">Registeren</th>
<form name="registreren"  method="post" action="registreer.php">
<tr>
    <td><fblackbold>Inloggegevens:<fblackbold></td>
</tr>

<tr>
    <td>Email</td>
    <td><input type="text" size="50" placeholder="email@provider.com" name="email"></td>
</tr>
<tr>
    <td>Wachtwoord</td>
    <td><input type="password" size="50" placeholder="min. 8 tekens, 1 hoofdletter, 1 cijfer" name="wachtwoord"></td>
</tr>
<tr>
    <td><fblackbold>Persoonlijke gegevens:<fblackbold></td>
</tr>
<tr>
    <td>Voornaam</td>
    <td><input type="text" size="50" placeholder="" name="voornaam" ></td>
</tr>
<tr>
    <td>Achternaam</td>
    <td><input type="text" size="50" placeholder="" name="achternaam"></td>
</tr>
<tr>
    <td>Geboorte Datum</td>
    <td><input type="hidden" size="8" name="action" value="submitform" />
    <input type="text" size="50" placeholder="jjjj-mm-dd" name="geboortedatum"></td>

</tr>
<tr>
    <td>Geslacht</td>
    <td>M<input type="radio" size="50" value="m" name="geslacht">
    V<input type="radio" size="50" value="v" name="geslacht"></td>

</tr>
<tr>
    <td>Adres</td>
    <td><input type="text" size="50" placeholder="Straat 00" name="adres"></td>
</tr>
<tr>
    <td>Woonplaats</td>
    <td><input type="text" size="50" placeholder="" name="woonplaats"></td>
</tr>

<tr>
    <td>Telefoonnummer</td>
    <td><input type="text" size="50" placeholder="min. 9 tekens" name="telefoonnummer"></td>
</tr>
<tr>
    <td>Functie</td>
    <td><select name="functie">
<option value="catering">Catering</option>
<option value="muziekpodia">Muziek en podia</option>
<option value="vervoerovernachten">Vervoer en overnachten</option>
<option value="logistiekbeveiliging">Logistiek en beveiliging</option>
<option value="diversen">Diversen</option>
</select></td>
</tr>
<tr align="right">
    <td></td>
    <td><input type="reset" value="Wissen"><input type="submit" name="verzenden" value="Verzenden"></td>
</tr>
</form>
</table>
 <?php
if (isset($_POST['action']) && $_POST['action']=='submitform') {

    $host = "localhost";
    $gebruikersnaam = "root";
    $wachtwoord = "";
    mysql_connect($host, $gebruikersnaam, $wachtwoord);

    $demooistedatabase = "c5g4westpopintranet";
    mysql_select_db($demooistedatabase);

    $achternaam = $_POST["achternaam"];
    $voornaam = $_POST["voornaam"];
    $gbdatum = $_POST["geboortedatum"];
    $email = $_POST["email"];
    $geslacht = $_POST["geslacht"];
    $wachtwoord = $_POST["wachtwoord"];
    $woonplaats = $_POST["woonplaats"];
    $adres = $_POST["adres"];
    $telefoonnummer = $_POST["telefoonnummer"];
    $functie = $_POST["functie"];

    $achternaam = stripslashes($achternaam);
    $voornaam = stripslashes($voornaam);
    $gbdatum = stripslashes($gbdatum);
    $email = stripslashes($email);
    $geslacht = stripslashes($geslacht);
    $wachtwoord = stripslashes($wachtwoord);
    $woonplaats = stripslashes($woonplaats);
    $adres = stripslashes($adres);
    $telefoonnummer = stripslashes($telefoonnummer);
    $functie = stripslashes($functie);

    $query ="INSERT INTO vrijwilliger (voornaam, achternaam, gbdatum, geslacht, wachtwoord, woonplaats, adres, telefoonnummer, functie, activiteitID, groepID, email)
                VALUES('$voornaam','$achternaam','$gbdatum','$geslacht','$wachtwoord','$woonplaats','$adres','$telefoonnummer','$functie',null,null,'$email')";

 $foutloos=true;

if(preg_match("/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $wachtwoord) === 0)
{
echo '<fblack>Wachtwoord moet minstens 8 tekens lang zijn, een kleine letter, grote letter en cijfer bevatten.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[0-9]{10}+$/", $telefoonnummer) === 0)
{
echo '<fblack>Het telefoonnummer moet 10 cijfers bevatten.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $gbdatum) === 0)
{
echo '<fblack>Geboorte datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i", $email) === 0)
{
echo '<fblack>Email moet hier op lijken: email@provider.com<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $voornaam) === 0)
{
echo '<fblack>Voornaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[A-Z][a-zA-Z -]+$/", $achternaam) === 0)
{
echo '<fblack>Achternaam is niet geldig ingevoerd, heeft u een hoofdletter gebruikt?<br><fblack>';
$foutloos = false; 
}

if ($geslacht == '') 
{
echo '<fblack>U heeft uw geslacht niet aangegeven.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-zA-Z]+\ +[0-9]+$/", $adres) === 0)
{
echo '<fblack>Het adres is verkeerd ingevoerd.<br><fblack>';
$foutloos = false; 
}

if(preg_match("/^[a-zA-Z\s]+$/", $woonplaats) === 0)
{
echo '<fblack>De woonplaats is verkeerd ingevoerd.<br><fblack>';
$foutloos = false; 
}

if ($foutloos == true)
{
mysql_query($query)
or die('<fblack>U staat al in ons systeem<A HREF="javascript:javascript:history.go(-1)"><br><br>Klik hier om terug te gaan</A><fblack>');
echo "<fblack>Uw registratie is succesvol verwerkt!<br>Log <a href='login.php' MEDIA=screen>hier</a> in<fblack>";
}
}
?>
</div>
<?php
include ("html_end.php");
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:26:44.540

您可以回显发布的值，例如：

```
<input type="text" size="50" placeholder="email@provider.com" name="email" value="<?php echo isset($_POST['email']) ? $_POST['email'] : ''; ?>"> 
```

对其他输入执行相同操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:27:15.870

您必须将值从表单操作传回页面。

一旦它们在页面上可用，您就可以将它们设置为值。例如：

在进行验证的 PHP 中，设置

```
$emailEntered = $_POST['email']; 
```

然后在您的表单中，回显该值：

```
<tr>
    <td>Email</td>
    <td><input type="text" size="50" placeholder="email@provider.com" name="email" value="<?php echo $emailEntered; ?>"></td>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:32:39.363

您可以使用 javascript 在客户端验证字段，而不是在某些服务器端错误后重新加载值

//HTML

```
// the submit button on page 
<input type="submit" name="verzenden" id= 'verzenden' value="verzenden" onclick='return validate();' /> 
```

// javascript

```
 <script type='text/javascript'>
   function validate()
  {
    // check for all the text fields if they are null
    var fname= document.getElementById('firstname');
    var lname= document.getElementById('lastname');

    if(fname.value == '')
   {
     // if the field is null it does not submit page and focus() function means
     // cursor will be in that textbox
      alert('Please enter first name');
      fname.focus();
      return false;  

   }

  }
 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:27:32.030

您必须将字段的值设置为用户输入的值，因此类似于

```
<input type="text" size="50" placeholder="Straat 00" name="adres" value="<?php echo $_POST['adres']; ?>"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:28:25.833

而不是返回`history.go(-1)`（如果您的用户不使用 javascript，这将不起作用，您应该再次生成包含表单的页面，即将您的 HTML 代码放在名为 form.php 的文件中，并在某些情况下包含该文件出错 ：

```
include ('form.php');

if (isset($_POST) {
    deal_with_post_data();

    if (something_wrong()) {
        include('form.php');
    } else {
        include('proceed.php');
    }
} 
```

并且，在您的表单中，执行以下操作：

```
<input type="text" name="foo" value="<?php echo $_POST['foo']; ?>"/> 
```

这样，您将获得先前的值（如果有）。

顺便提一下，小心`stripslashes`。阻止 SQL 注入可能还不够。由于您使用的是 MySQL，请`mysql_real_escape_string`改用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T12:29:34.727

浏览器不会保存您的数据，因此您需要自己重新放置收到的数据。

```
 <?php
 $email = isset($_POST['email']) ? $_POST['email'] : '';
 ?>
<td><input type="text" ... name="email" value="<?php echo $email; ?>"></td> 
```

你可以做更复杂的，但我希望你明白。不要忘记清理您从 $_POST 收到的值！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T12:31:29.283

您可以使用会话变量：

在页面的开头

```
<?php
session_start();

//checking if variables are setted
if !(isset($_SESSION("achternaam")){
     $_SESSION["achternaam"]=""
}
//same for all fields 
```

在表格中

```
<td><input type="text" size="50" placeholder="" name="achternaam" value="<?php echo $_SESSION["achternaam"];?>"></td> 
```

对所有人都一样

然后在 $query 之前：

```
$_SESSION["achternaam"] = $achternaam; 
```

最后，如果成功，您必须重置变量

```
$_SESSION["achternaam"] = ""; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T12:33:40.593

我不确定这是否适合您，但通常我的表单操作在同一页面上，因此当出现错误时，我会将值回显到 values 属性中。由于这不是您的情况，您可以将操作更改为同一页面，并在该页面中执行以下操作：

```
<?php
if (sizeof($_POST)) {
    require 'the_action_you_have_now.php';
    // If it succeeds, it would redirect to another page and exit, otherwise, just continue, and set a variable with a message that says there's an error.
}
?> 
```

要设置值：

```
value="<?php print (isset($_POST['email']) ? $_POST['email'] : '');?> 
```

或者，它可能会根据您的配置起作用：

```
value="<?=(isset($_POST['email']) ? $_POST['email'] : '')?> 
```

这对于 s 和 s 是不同的：

```
<textarea><?php print htmlentities($_POST['comment']); ?></textarea>

<select>
<?php
foreach ($options as $value => $text) {
    $selected = ($_POST['the_select'] == $value)? "selected='selected'" : "";
    print "<option value='$value' $selected>$text</option>";
}
?>
</select> 
```

# jquery - jqgrid中的内联编辑不起作用

> ID：11226105
> 
> 赞同：0
> 
> 时间：2012-06-27T12:23:01.683
> 
> 标签：jquery, asp.net-mvc, jqgrid

我有这样的 jQuery 代码

 `````
$(document).ready(function () {

         var lastsel;

    $('#jqgProducts').jqGrid({
             //url from wich data should be requested
             url: '@Url.Action("CompOff")',
         //type of data
         datatype: 'json',
         //url access method type

         mtype: 'POST',
         //columns names

         ondblClickRow: function (id) {
             if (id && id !== lastsel) {
                 jQuery('#list').restoreRow(lastsel);
                 jQuery('#list').editRow(id, true);
                 lastsel = id;
             }
             $('#jqgProducts').editRow(id, true,null, null);
         },

         editurl: '@Url.Action("CompOffEdit")',
         colNames: ['IdNr', 'CompOffDate', 'Description', 'ExpiryDate', 'IsApproved', 'AppliedOn'],
         //columns model
         colModel: [
                    { name: 'Id', index: 'Id', align: 'center', editable: true, hidden: true},
                        { name: 'CompOffDate', index: 'CompOffDate', align: 'center', formatter: 'date', formatoptions: { newformat: 'd/m/Y' }, editable: true },
                          { name: 'Description', index: 'Description', align: 'center', editable: true, editoptions: { maxlength: 200} },
                        { name: 'ExpiryDate', index: 'ExpiryDate', align: 'center', formatter: 'date', formatoptions: { newformat: 'd/m/Y' }, editable: false },
                        { name: 'IsApproved', index: 'IsApproved', align: 'center', editable: false },

                        { name: 'AppliedOn', index: 'AppliedOn', align: 'center', formatter: 'date', formatoptions: { newformat: 'd/m/Y' }, editable: false }

                      ],
         //pager for grid
         pager: $('#jqgpProducts'),
         //number of rows per page
         rowNum: 10,
         //initial sorting column
         sortname: 'CompOffDate',
         //initial sorting direction
         sortorder: 'asc',
         //we want to display total records count
         viewrecords: true,

         caption: 'Comp Off Details',
         //grid height
         height: '100%',

         jsonReader: {
             root: "rows",
             page: "page",
             total: "total",
             records: "records",
             repeatitems: false,
             cell: "cell",
             id: "id",
             userdata: "userdata"
         }
     }); 
```

});`  `我的控制器是这样的

 `````
 public ActionResult CompOffEdit(int Id,DateTime CompOffDate, string Description)
    {
        RegisterCompOff r = db.RegisterCompOffs.Where(l=>l.Id==Id).SingleOrDefault();
        if (!(r == null))
        {
            r.CompOffDate = CompOffDate;
            r.Description = Description;
            db.Entry(r).State = EntityState.Modified;
            db.SaveChanges();
            return Content("true");
        }
        else
        {
            return Content("false");
        }

    } 
````  `当我试图将编辑保存到 db..我得到这个异常

`The parameters dictionary contains a null entry for parameter 'idnr' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult CompOffEdit(Int32, System.DateTime, System.String)' in 'AGS.Hrms.Controllers.CompOffController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. Parameter name: parameters`

用户只能在此处编辑补偿日期和描述...并且我从数据库中选择的 id 字段被隐藏。

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:01:28.473

您应该将操作的`idnr`参数重命名为，或者您应该将在行编辑期间发送到服务器的参数的默认名称重命名为。您可以为此使用 jqGrid 选项。`CompOffEdit``id``id``idnr``prmNames: {id: "idnr"}`

以同样的方式，您应该将操作`compOff`参数重命名`CompOffEdit`为`CompOffDate`和。或者，您可以使用一些具有和作为属性的类实例作为操作的参数。在这种情况下，and属性将使用编辑行中的值进行初始化。`reason``Description``CompOffDate``Description``CompOffEdit``CompOffDate``Description`````

# objective-c - Numbers 中的标记文本字段

> ID：11226106
> 
> 赞同：7
> 
> 时间：2012-06-27T12:23:05.860
> 
> 标签：objective-c, cocoa, nstextfield, appkit, nstokenfield

我想要一个文本字段，例如 Numbers 中的表达式编辑器文本字段：

![在此处输入图像描述](../Images/2891df6b36c4bc3e927833edde028902.png)

它与 非常相似`NSTokenField`，但`NSTokenField`仅支持分隔符分隔的标记列表，例如 Mail.app 中的“To:”字段。

![在此处输入图像描述](../Images/a0020a912a29ca4fe9078318669f6eca.png)

我必须将这些标记嵌入到特定位置的文本中，否则它们的工作方式完全一样`NSTokenField`（退格删除一个标记，您可以将它们拖动等等）。

是否有任何第一方或第三方控件可以执行此类操作？我什么也没找到。

如果没有，你会如何建议实施它？使用 Core Text 并重新发明轮子（`NSTextField`使用更好的令牌支持实现）？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T00:35:15.293

我认为没有可用的替代控件`NSTokenField`（好吧，几周前我也找不到）。

一个可能的选择可能是遵循 Apple 的示例项目[LayoutManagerDemo](http://developer.apple.com/library/mac/#samplecode/LayoutManagerDemo/Introduction/Intro.html)中提供的解决方案。这显示了一个`NSTextView`能够检测鼠标在文本上移动的子类。安装并运行演示以获得基本概念。

该示例用于`NSLayoutManager`检测鼠标移动，但代码可能适用于检测文本中的特定字符序列，例如文本字段中的标记。从 获得令牌及其位置后`NSLocationManager`，您可以根据令牌的特征插入自己的表示。一个可能的解决方案是使用`NSTextAttachmentCell`它将成为文本中的字形。使用的好处`NSTextAttachmentCell`是它被 Cocoa 的文本系统视为字形（您可以选择它，它遵循格式等）。通过实现`drawWithFrame:inView:`，您可以添加每个令牌的各种可见属性。

# objective-c - 如何从 iPhone 上录制的音频中获取 PCM 数据？

> ID：11226111
> 
> 赞同：3
> 
> 时间：2012-06-27T12:23:10.670
> 
> 标签：objective-c, ios, audio-recording, avaudiorecorder, endianness

我正在使用`AVAudioRecorder`和`AVAudioPlayer`框架在 iphone 上录制和播放录制的音频。它正在工作。我可以使用麦克风录制，然后我可以播放它。

但我需要从录制的音频中获取 pcm 数据。因为我`LE_SpectrumWorkx`用来修改声音，它需要“.pcm”作为输入数据。我必须获取 pcm 数据并将其发送到`LE_SpectrumWorkx`（有关此的更多信息：[http](http://www.littleendian.com) ://www.littleendian.com ）。

**如何从录制的音频中获取 pcm 数据？**我应该将“sound.caf”转换为任何类型吗？

这是当前代码：

```
@synthesize btnRecord, btnPlay, btnStop, txtResult;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    btnPlay.enabled = NO;
    btnStop.enabled = NO;

    NSArray *dirPaths;
    NSString *docsDir;

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *recordSettings =
    [
        NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithInt:kAudioFormatLinearPCM],AVFormatIDKey,
        [NSNumber numberWithInt:AVAudioQualityMin],    AVEncoderAudioQualityKey,
        [NSNumber numberWithInt:16],                   AVEncoderBitRateKey, 
        [NSNumber numberWithInt:2],                    AVNumberOfChannelsKey,
        [NSNumber numberWithFloat:44100.0],            AVSampleRateKey,
        nil
     ];

    NSError *error = nil;

    audioRecorder = 
    [
     [AVAudioRecorder alloc] 
     initWithURL:soundFileURL 
     settings:recordSettings 
     error:&error
    ];

    if(error)
    {
        NSLog(@"error: %@", [error localizedDescription]);
    }
    else 
    {
        [audioRecorder prepareToRecord];
    }     
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    audioPlayer = nil;
    audioRecorder = nil;
    btnRecord = nil;
    btnPlay = nil;
    btnStop = nil;
}

- (void)dealloc 
{

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(IBAction)onRecord:(id)sender
{
    NSLog(@" //-- record start button clicked");
    if(!audioRecorder.recording)
    {
        btnPlay.enabled = NO;
        btnStop.enabled = YES;
        [audioRecorder record];
    }
}

-(IBAction)onStop:(id)sender
{
    NSLog(@" //-- record stop button clicked");
    btnStop.enabled = NO;
    btnPlay.enabled = YES;
    btnRecord.enabled = YES;

    if(audioRecorder.recording)
    {
        [audioRecorder stop];
    }
    else 
    {
        [audioPlayer stop];
    }
}

-(IBAction)onPlayAudio:(id)sender
{
    NSLog(@" //-- play");

    if(!audioRecorder.recording)
    {
        btnStop.enabled = YES;
        btnRecord.enabled = NO;

       // if(audioPlayer) [audioPlayer release];

        NSError *error;

        audioPlayer = [
                        [AVAudioPlayer alloc]
                        initWithContentsOfURL:audioRecorder.url 
                        error:&error
                       ];
        audioPlayer.delegate = self;
        if(error)
        {
            NSLog(@"Error: %@", [error localizedDescription]);
        }
        else 
        {
            [audioPlayer play];
        }
    }
}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    NSLog(@"Playback Finished");

    btnRecord.enabled = YES;
    btnStop.enabled = NO;

    [self onStop:nil];
}

-(void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error
{
    NSLog(@"Decode Error occured");
}

-(void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag
{
    NSLog(@"Record Finished");
}

-(void)audioRecorderEncodeErrorDidOccur:(AVAudioRecorder *)recorder error:(NSError *)error
{
    NSLog(@"Encode Error occured");
} 
```

# asp.net-mvc-3 - 如何在 LINQ to SQL 中创建此 SQL？

> ID：11226112
> 
> 赞同：3
> 
> 时间：2012-06-27T12:23:18.943
> 
> 标签：asp.net-mvc-3, linq-to-sql

我熟悉 SQL 的工作方式，但使用 LINQ to SQL 让我很头疼。我有以下查询，但我无法将其更改为 LINQ to SQL。有人可以帮我解决这个问题或解释我如何解决这个问题吗？

```
 SELECT
         DISTINCT Pr.Pcode_,
         Pr.Omschrijving,
         Pt.TypeOmschr 
    FROM 
        Projecten AS Pr
    INNER JOIN 
        ProjectTypen AS Pt 
        ON Pr.ProjType_ = Pt.TypeID 
        AND
        Pr.Status NOT IN ( 'Afgerond', 'Afgewezen' ) 
        LEFT OUTER JOIN 
        Personeel AS Pe
        ON Pr.SeniorId_ = Pe.PerId_ 
        OR 
        Pr.CorId_ = Pe.PerId_
        WHERE  
        ( Pe.Naam LIKE '%%' ) 
         OR  
        ( Pr.Omschrijving LIKE '%%' ) 
        OR
        ( Pr.Pcode_ LIKE '%%' ) 
        OR 
       ( Pt.TypeOmschr LIKE '%%' )
        ORDER  BY 
        Pr.Pcode_ 
```

**编辑：**
我有以下 L2S，但它不工作。我收到以下错误：*名称“Pe”不在“等于”左侧的范围内。*我想问题是左连接，但解决方案是什么？

```
 from Pr in _db.Projectens  
    join Pt in _db.ProjectTypens on Pr.ProjType_ equals Pt.TypeID  
    join Pe in _db.Personeels on ((Pr.SeniorId_ == Pe.PerId_) || (Pr.SeniorId_ == Pe.PerId_)) into P  
    where Pr.Pcode_.Contains(search) || Pr.Omschrijving.Contains(search) || Pt.TypeOmschr.Contains(search) || Pe.Naam.Contains(search)  
    select new SearchProjectViewModel {  
        ProjectCode = Pr.Pcode_,  
        ProjectName = Pr.Omschrijving,  
        ProjectType = Pt.TypeOmschr  
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:32:24.793

我认为

```
join Pe in _db.Personeels on ((Pr.SeniorId_ == Pe.PerId_) || (Pr.SeniorId_ == Pe.PerId_)) into P 
```

应该

```
join Pe in _db.Personeels on ((Pr.SeniorId_ equals Pe.PerId_) || (Pr.SeniorId_ equals Pe.PerId_)) into P 
```

如果可行，请尝试让我知道。

# prestashop - Prestashop - 使用模块（而不是覆盖目录）更改核心功能

> ID：11226115
> 
> 赞同：1
> 
> 时间：2012-06-27T12:23:34.567
> 
> 标签：prestashop

我需要解析传递给 Prestashop 中任何静态页面的任何变量，并将以“http”（纯文本）开头的任何内容替换为“a href”。我已经有了正则表达式，但我需要知道如何在不修改核心功能和不使用类或控制器的覆盖目录的情况下使用模块来做到这一点。

在将结果发送到 tpl 文件之前，需要解析变量；我已经找到了一个覆盖 ObjectModel 类的解决方案，但我需要在模块中执行此操作。问题是我不清楚如何做到这一点，因为 ObjectModel 使用其构造函数从数据库中获取数据。

不知何故，我需要在我的模块中覆盖 ObjectModel 构造函数，并能够在将数据发送到页面上包含的任何 tpl 之前解析数据库值。

任何人都可以帮助我吗？

编辑：我还需要能够为电子邮件模板做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:35:23.943

确保捕获所有实例的最简单方法可能是在 smarty 而不是 Prestashop 本身中执行所需的处理。

根据您的需要，您可以将其实现为 Smarty[前置过滤器或后置过滤器](http://www.smarty.net/docsv2/en/plugins.prefilters.postfilters.tpl)

# wordpress - 小部件在 wordpress 插件中动态创建

> ID：11226116
> 
> 赞同：2
> 
> 时间：2012-06-27T12:23:40.423
> 
> 标签：wordpress

我正在写 wordpress 插件。该插件将根据 API 调用的响应创建小部件。我的 API 返回一些第三方站点链接的数组。所以根据数组的数量，我必须创建小部件。比如说，响应有 10 个条目，我必须根据响应创建 10 个小部件。目前我正在根据响应创建 10 个类。但我需要遍历数组并动态创建 10 个小部件。有没有其他方法可以完成这项任务？请帮忙。

```
class widget_Mywidget extends WP_Widget {

    function widget_Mywidget() {
     $widget_ops = array( 'classname' => 'widget_Mywidget', 'description' => __( "My Widget" ) );
        $this->WP_Widget('My Widget', __('This is sample Widget'), $widget_ops);    

    }

    function widget($args, $instance) {
        extract($args);

        echo $before_widget;
        echo $before_title;

        if(!empty($instance['title'])) {
            echo $instance['title'];
        } else {
            echo "Sample";
        }

        echo $after_title;

        echo '<script src="www.google.com"></script>';
        echo $after_widget;
    }

    function update($new_instance, $old_instance) {
        return $new_instance;
    }

    function form($instance) {
        //error_check();
        $title = (isset($instance['title'])) ? $instance['title'] : '';

        echo '<div id="myadmin-panel">';

        echo '<label for="' . $this->get_field_id("title") .'">Widget Title:</label>';
        echo '<input type="text" ';
        echo 'name="' . $this->get_field_name("title") . '" ';
        echo 'id="' . $this->get_field_id("title") . '" ';
        echo 'value="' . $title . '" /><br /><br />';
        echo '</div>';

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:22:41.907

您可以使用旧的小部件界面来注册您的小部件，但它自 2.8 以来已被弃用，因此他们可能随时将其删除（另外它会在 WP_DEBUG 模式下输出警告）。

我知道的最简单的方法是使用[eval()](http://php.net/manual/en/function.eval.php)将基类扩展为完全相同的基类（但请注意不要使用私有方法）：

```
class widget_Mywidget_base extends WP_Widget {
    //Your stuff here
}

for ($i=1;$i<=10;$i++) {
    $widget_class = 'widget_Mywidget_'.$i;
    eval("class $widget_class extends widget_Mywidget_Base { };");
    register_widget( $widget_class );
} 
```

# c# - 为什么我需要检查是否大于 Int32.MaxValue？

> ID：11226118
> 
> 赞同：13
> 
> 时间：2012-06-27T12:23:50.297
> 
> 标签：c#, .net

我在 ac# 类库项目（.net 4）上使用 Visual Studio 2010 SP1 Ultimate，我对某些东西很好奇......

鉴于此方法：

```
public void DoSomethingBrilliant(int input)
{
    if (input == int.MaxValue)
        throw new ArgumentOutOfRangeException("input");

    input++;

    Console.WriteLine(input);
} 
```

我从代码分析中得到这个警告：

> > CA2233：Microsoft.Usage：更正“Test.DoSomethingBrilliant(int)”中操作“input+1”中的潜在溢出。

我心想，这有点奇怪，因为我正在检查`input++`操作是否会通过在开始时抛出那个时髦的异常来溢出，但我将其更改为：

```
public void DoSomethingBrilliant(int input)
{
    if (input >= int.MaxValue)
        throw new ArgumentOutOfRangeException("input");

    input++;

    Console.WriteLine(input);
} 
```

果然警告消失了。

现在我的小脑袋都糊涂了，因为考虑到我得到一个[int](http://msdn.microsoft.com/en-us/library/system.int32.aspx)作为参数，为什么要检查它是否大于整数允许的最大值会提供任何值？

然后我回到原始代码并切换到调试，它在没有警告的情况下构建！好奇和好奇...

我检查了调试和发布之间的差异，发现如果我勾选*优化代码*选项，代码分析的警告会立即弹出。

所以优化结果意味着我需要检查大于[int.MaxValue](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)。嗯？为什么？我是不是超级密集？优化做了什么，这意味着我可能会得到一个大于[int.MaxValue](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)的 int传递给接受[int](http://msdn.microsoft.com/en-us/library/system.int32.aspx)的方法？

或者，这只是代码分析功能中的一个错误？

**更新**

这是“未优化”版本的 IL（代码分析正确）：

```
.method public hidebysig instance void  DoSomethingBrilliant(int32 input) cil managed
{
  // Code size       40 (0x28)
  .maxstack  2
  .locals init ([0] bool CS$4$0000)
  IL_0000:  nop
  IL_0001:  ldarg.1
  IL_0002:  ldc.i4     0x7fffffff
  IL_0007:  ceq
  IL_0009:  ldc.i4.0
  IL_000a:  ceq
  IL_000c:  stloc.0
  IL_000d:  ldloc.0
  IL_000e:  brtrue.s   IL_001b
  IL_0010:  ldstr      "input"
  IL_0015:  newobj     instance void [mscorlib]System.ArgumentOutOfRangeException::.ctor(string)
  IL_001a:  throw
  IL_001b:  ldarg.1
  IL_001c:  ldc.i4.1
  IL_001d:  add
  IL_001e:  starg.s    input
  IL_0020:  ldarg.1
  IL_0021:  call       void [mscorlib]System.Console::WriteLine(int32)
  IL_0026:  nop
  IL_0027:  ret
} // end of method Test::DoSomethingBrilliant 
```

这是针对优化版本的（它出错的地方）：

```
.method public hidebysig instance void  DoSomethingBrilliant(int32 input) cil managed
{
  // Code size       31 (0x1f)
  .maxstack  8
  IL_0000:  ldarg.1
  IL_0001:  ldc.i4     0x7fffffff
  IL_0006:  bne.un.s   IL_0013
  IL_0008:  ldstr      "input"
  IL_000d:  newobj     instance void [mscorlib]System.ArgumentOutOfRangeException::.ctor(string)
  IL_0012:  throw
  IL_0013:  ldarg.1
  IL_0014:  ldc.i4.1
  IL_0015:  add
  IL_0016:  starg.s    input
  IL_0018:  ldarg.1
  IL_0019:  call       void [mscorlib]System.Console::WriteLine(int32)
  IL_001e:  ret
} // end of method Test::DoSomethingBrilliant 
```

在投掷操作之前我看到了一堆额外的调用，但我要说实话 - 我不知道他们做了什么！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T12:28:36.540

> 或者，这只是代码分析功能中的一个错误？

看起来像。老实说，这并不奇怪——让这种代码分析变得完美是非常棘手的。鉴于任何特定`int` *不能*大于`int.MaxValue`，`>=`并且`==`绝对等价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T10:56:31.183

查看这些代码片段：

```
if (x == int.MaxValue) return;
// x != int.MaxValue 
```

和

```
if (x >= int.MaxValue) return;
// x < int.MaxValue 
```

和

```
// x < int.MaxValue
// rewrite
// x + 1 <= int.MaxValue
x++;
// x <= int.MaxValue 
```

x++ 的后置条件表明（通过推导）前置条件必须是：

```
x < int.MaxValue 
```

只有在您检查时才能确定：

```
x >= int.MaxValue 
```

# javascript - 将 setTimeout 分配给全局变量并在单独的函数中多次清除

> ID：11226124
> 
> 赞同：0
> 
> 时间：2012-06-27T12:23:58.893
> 
> 标签：javascript, dom, settimeout

下面的代码是为了在用户按下空格键时在屏幕上移动一个小的红色 div。在“拍摄”功能中，我创建了一个新的 div 并设置了超时，然后它将开始从“moveLazer”功能向上移动屏幕。

问题：如果你拍摄了几次，“lazerLifeCycle”变量会在一个 div 到达屏幕顶部时清除，但也会清除仍在移动但尚未到达顶部的第二个或第三个 div 的超时。据我所知，使用 setInterval 并不能解决问题。我知道它是因为 lazerLifeCycle 是全球性的，但我没有看到正确的方法。请帮忙！js和html如下。请注意，如果您想复制/粘贴并尝试，它们是 2 个不同的文件。在 Firefox 或 chrome 中运行它。它在 IE 中没有任何作用。

```
//level3.js

var lazerId = 1;

var init = function(){
    var ship = document.getElementById('randRect');
    ship.style.left = '700px';
    ship.style.top = '300px';
}

document.onkeyup = function(e) {
  if(e.keyCode == 37) {
    moveLeft();
  } else if(e.keyCode == 39){
    moveRight();
  } else if(e.keyCode == 32){
    shoot();
  }
}

var shoot = function(){
    lazerId = lazerId + 1;
    var ship = document.getElementById('randRect');
    width = parseInt(ship.clientWidth);
    xPos = parseInt(ship.style.left);
    middle = ((xPos + (width/2)) - 3) + 'px'; //-3 is to center it i think
    var lazer = document.createElement('div');
    lazer.id = lazerId;
    var body = document.getElementById('body');
    body.appendChild(lazer);
    lazer.style.position = 'absolute';
    lazer.style.width = '7px';
    lazer.style.height = '13px';
    lazer.style.left = middle;
    lazer.style.top = '287px';
    lazer.style.backgroundColor = 'red';
    lazerLifeCycle = setTimeout('moveLazer(' + lazerId.toString() + ');', 10);
}

var moveLazer = function(lazerElementId){
    var lazer = document.getElementById(lazerElementId.toString());
    var lazerTop = parseInt(lazer.style.top);
    if( (lazerTop - 1) < 0){
        lazer.style.top = '0px';
        clearTimeout(lazerLifeCycle);
    } else {
        lazer.style.top = (lazerTop - 1) +'px'
        lazerLifeCycle = setTimeout('moveLazer(' + lazerElementId.toString() + ');', 10);
    }
}

var moveLeft = function(){
    var ship = document.getElementById('randRect');
    shipXPos = parseInt(ship.style.left);
    if( (shipXPos - 15) < 0){
        ship.style.left = 0+'px';
    } else {
        ship.style.left = shipXPos - 15+'px';
    }
}

var moveRight = function(){
        var ship = document.getElementById('randRect');
    shipXPos = parseInt(ship.style.left);
    if( (shipXPos + 15) > 1300){
        ship.style.left = 1300+'px';
    } else {
        ship.style.left = shipXPos + 15+'px';
    }
}

window.onload = init;

//level3.html
<html>
    <head>
        <title>random</title>
        <style type="text/css">
            .random{
                position:absolute;
                background: orange;
                padding: 7px;
            }
        </style>
        <script src="level3.js" type="text/javascript">
        </script>
    </head>
    <body id="body">
        <div id="randRect" class="random"><center><-- or --><center></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:08:55.773

**[工作演示](http://jsfiddle.net/loktar/9PUaf/1/)**

好的，这是一个简化的与更改代码的对比。

```
var shoot = function(){
    lazerLifeCycle = moveLazer(lazerId);
}

var moveLazer = function(lazerElementId){
    var lazer = document.getElementById(lazerElementId.toString());
    var lazerTop = parseInt(lazer.style.top);
    if( (lazerTop - 1) < 0){
        lazer.style.top = '0px';
    } else {
        lazer.style.top = (lazerTop - 1) +'px'
        setTimeout(function(){moveLazer(lazerElementId);}, 10);
    }
} 
```

基本上你不需要担心清除超时，因为除非你告诉他们，否则它们不会再次发生。此外，要使其到达可以拍摄多个激光的位置，您只需参考一`moveLazer`开始就传递给的 ID。基本上它会一直持续到激光到达顶部。还允许支持多个镜头。​</p>

# html - 如何使用 html 和 css 创建一个小彩盒？

> ID：11226126
> 
> 赞同：39
> 
> 时间：2012-06-27T12:24:05.977
> 
> 标签：html, css

我在 html 文件/站点上有一张图片，我想为该图片添加可用颜色列表。我想创建非常小的盒子或点，每种颜色的小盒子。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-27T12:48:19.770

对于旧的浏览器，您会经常使用[`float`](https://developer.mozilla.org/en-US/docs/Web/CSS/float).，但是您需要一个[clearfix](https://stackoverflow.com/questions/8554043/what-is-a-clearfix)，因此这种方法现在不经常使用。

```
.box {
  float: left;
  width: 20px;
  height: 20px;
  border: 1px solid rgba(0, 0, 0, .2);
}

.blue {
  background: #13b4ff;
}

.purple {
  background: #ab3fdd;
}

.wine {
  background: #ae163e;
}
```

```
<div class="box blue"></div>
<div class="box purple"></div>
<div class="box wine"></div>
```

在现代浏览器中，最简单的方法是使用[flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/flex)：

```
.wrapper {
  display: flex;
}

.box {
  width: 20px;
  height: 20px;
  border: 1px solid rgba(0, 0, 0, .2);
}

.blue {
  background: #13b4ff;
}

.purple {
  background: #ab3fdd;
}

.wine {
  background: #ae163e;
}
```

```
<div class="wrapper">
  <div class="box blue"></div>
  <div class="box purple"></div>
  <div class="box wine"></div>
</div>
```

或者使用`display: inline-block`：

```
.box {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 1px solid rgba(0, 0, 0, .2);
}

.blue {
  background: #13b4ff;
}

.purple {
  background: #ab3fdd;
}

.wine {
  background: #ae163e;
}
```

```
<div class="box blue"></div>
<div class="box purple"></div>
<div class="box wine"></div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-13T07:12:27.937

如果你想创建一个小点，只需使用来自 font awesome 的图标。

```
fa fa-circle 
```

# symfony - 自定义 text_widget 时“变量“值”不存在”疑难解答

> ID：11226127
> 
> 赞同：1
> 
> 时间：2012-06-27T12:24:09.097
> 
> 标签：symfony, symfony-forms

尝试自定义 Symfony2 表单以生成类似于以下示例的 html 代码：

```
<div class="cform_box">
  <div><label>First name:</label></div>
  <input name="" type="text" id="" class="TextBox" />
</div>
<div class="cform_box" style="height:auto">
   <div><label>Message:</label></div>
  <textarea name="" rows="10" cols="38" id="" class="TextBox" style="height:100px;" /></textarea>
</div> 
```

我的表单代码：

```
$builder->add('name', 'text', array('label' =>'First Name:'));
$builder->add('message', 'textarea', array('label' =>'Message:')); 
```

模板`contact.html.twig`：

```
{% form_theme form _self %}
{% block text_widget %}
{% spaceless %}
    <input type="text" class='TextBox' {% if value is not empty %}value="{{ value }}"     {% endif %}/>
{% endspaceless %}
{% endblock %}
{% block textarea_widget %}
{% spaceless %}
    <div class="textarea_widget">
        <textarea rows="10" cols="38" id="{{ id }}" class="TextBox" style="height:100px;">{{ value }}</textarea>
    </div>
{% endspaceless %}
{% endblock textarea_widget %}

<div class="cform_box">    
    <div>{{ form_label(form.name) }}</div>{{ form_widget(form.name) }}
</div>
<div class="cform_box" style="height:auto">
    <div>{{ form_label(form.message) }}</div>{{ form_widget(form.message) }}
</div> 
```

我要么得到要么`Variable "value" does not exist in contact.html.twig`发表`Variable "id" does not exist in form_div_layout.html.twig`评论`{% block text_widget %}`。

我正在使用 Symfony 2.0.15

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:59:26.017

Symfony2 表单助手中不存在名为“text_widget”的块。这是一个 field_widget `type = 'text'`。

您应该使用 'attr' 从 php 表单定义中添加类“textBox”：

```
$builder->add('name', 'text', array('label' =>'First Name:', 'attr' => array('class' => 'textBox')));
$builder->add('message', 'textarea', array('label' =>'Message:', 'attr' => array('class' => 'textBox'))); 
```

或在您的 form_theme 文件中：

```
{% block field_widget %}
{% spaceless %}
    {% if type == 'text' or type == 'textarea' %}
        {% set attr = attr|merge({'class': attr.class|default('') ~ ' textBox'}) %}
    {% endif %}
    {% set type = type|default('text') %}
    <input type="{{ type }}" {{ block('widget_attributes') }} value="{{ value }}" />
{% endspaceless %}
{% endblock field_widget %} 
```

# sql-server - 优化 T-SQL 中局部变量的赋值

> ID：11226128
> 
> 赞同：1
> 
> 时间：2012-06-27T12:24:12.620
> 
> 标签：sql-server, tsql

有什么方法可以将以下内容和 set `@FH_RecordKey`and组合`@VF_dept_seq`在一个`SET`or`SELECT`语句中？

```
 set @FH_RecordKey =(
        case @lnktble
            when 'ems' then (select FH_inci_id from FH_Catherine_live.dbo.FH_MAP_EMS_INCI where VF_ems_seq = @tempseq)
            when 'imaster' then (select FH_insp_id from FH_Catherine_live.dbo.FH_MAP_INSPID where VF_in_seq = @tempseq)
            when 'n5basic' then (select inci_id from [dbo].[VF_IncWorkTable] where inc_seq = @tempseq)
        END)

    set @VF_dept_seq = (
        case @lnktble
            when 'ems' then (select VF_dept_seq from FH_Catherine_Live.dbo.FH_MAP_EMS_INCI where VF_ems_seq = @tempseq)
            when 'imaster' then (select VF_dept_seq from FH_Catherine_Live.dbo.FH_MAP_INSPID where VF_in_seq = @tempseq)
            when 'n5basic' then (select dept_seq from [dbo].[VF_IncWorkTable] where inc_seq = @tempseq)
        end) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:08:25.580

使用`IF`语句而不是`CASE`

```
IF @lnktble = 'ems'
select  @FH_RecordKey = FH_inci_id ,@VF_dept_seq = VF_dept_seq
from FH_Catherine_live.dbo.FH_MAP_EMS_INCI 
where VF_ems_seq = @tempseq
ELSE IF @lnktble = 'imaster' /*...*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:30:19.610

```
Select @FH_RecordKey = 
  (case statement here),
@VF_dept_seq = 
  (case statement here) 
```

# c# - 如何使用 C# Excel 互操作向 ThisWorkbook Workbook_Open 添加宏

> ID：11226132
> 
> 赞同：0
> 
> 时间：2012-06-27T12:24:30.610
> 
> 标签：c#, excel-interop

我使用 C# 开发了一个 Windows 服务，它处理文件夹中的多个 Excel 文件以添加条件格式、调整页面布局和打印设置，并添加一个宏来调整分页符。我遇到的问题是尝试向 Workbook_Open 例程中的 ThisWorkbook 对象添加一行代码，以便在打开文件时自动运行宏。我用来将宏添加到 Module1 的代码如下：

```
 using Excel = Microsoft.Office.Interop.Excel;
    using VBIDE = Microsoft.Vbe.Interop;

    VBIDE.VBComponent oModule;
    String sCode;

    oModule = wb.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule);

    sCode = 
@"Sub FixPageBreaks()
    On Error GoTo ErrMsg

    Dim wb As Workbook
    Set wb = ActiveWorkbook

    Dim sheet As Worksheet
    Set sheet = wb.Worksheets(1)

    Dim vBreaks As VPageBreaks
    Set vBreaks = sheet.VPageBreaks

    If vBreaks.Count > 0 Then
        Dim lastCol As Integer
        lastCol = ActiveSheet.Cells.Find(What:=""*"", After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious, MatchCase:=False, SearchFormat:=False).Column

        Dim lCount As Integer
        lCount = 1

        Dim brkCol As Integer

        Dim brkRng As Range

        Dim iReply As VbMsgBoxResult

        Do
            If vBreaks(lCount).Location.Column = lastCol Then
                brkCol = vBreaks(lCount).Location.Column + 1
            Else
                brkCol = vBreaks(lCount).Location.Column - 1
            End If

            Set brkRng = Range(sheet.Cells(1, brkCol), sheet.Cells(1, brkCol))

            If brkCol Mod 2 = 1 And lastCol > brkCol Then
                Set vBreaks(lCount).Location = brkRng
            ElseIf brkCol Mod 2 = 1 Then
                vBreaks(lCount).DragOff Direction:=xlToRight, RegionIndex:=1
            End If

            lCount = lCount + 1
        Loop While lCount <= vBreaks.Count

        sheet.PrintPreview
    End If
Exit Sub
ErrMsg:
    MsgBox Err.Description
End Sub";

    oModule.CodeModule.AddFromString(sCode); 
```

在行

```
wb.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule); 
```

**wb**是前面在代码中实例化的工作簿对象。这一切都有效，但是，我似乎找不到太多关于 vbext_ComponentType 枚举的文档来确定哪个（如果有）代表工作簿中的 ThisWorkbook 对象以及如何向其中添加代码。我也会很高兴找到与 Excel 文档中的宏执行相同分页符的 C# 代码。我没有像其他处理一样在 C# 中执行此操作的唯一原因是我无法使其工作。那里的任何帮助都会同样有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:38:53.487

```
var workbookMainModule = wkBk.VBProject.VBComponents.Item("ThisWorkbook");
                workbookMainModule.CodeModule.AddFromString(sCode); 
```

# facebook-graph-api - Facebook Graph API Explorer 不会显示所有状态

> ID：11226138
> 
> 赞同：-1
> 
> 时间：2012-06-27T12:24:55.610
> 
> 标签：facebook-graph-api, graph

我是[https://graph.facebook.com/me/statuses?limit=250000](https://graph.facebook.com/me/statuses?limit=250000)，但它仅显示自 2011-09-19 以来的状态。我也尝试使用[https://graph.facebook.com/me/statuses?since=1199167200](https://graph.facebook.com/me/statuses?since=1199167200)，但结果是一样的。

有什么选择，如何获得我的所有状态？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:54:01.923

是的，大于 100 的限制将始终返回 100 结果，因此只需`limit=100`使用`offset`
示例请求
第一个 100 状态
[https://graph.facebook.com/me/statuses?limit=100&offset=0](https://graph.facebook.com/me/statuses?limit=100&offset=0)
以获得第二个 100 状态
[https://graph。 facebook.com/me/statuses?limit=100&offset=100](https://graph.facebook.com/me/statuses?limit=100&offset=100)

依此类推，直到您得到空响应。

# php - Ajax php 搜索中的错误

> ID：11226142
> 
> 赞同：0
> 
> 时间：2012-06-27T12:25:05.447
> 
> 标签：php, ajax

在以下基于 Ajax 的搜索框中，如果字符位于位置 0，则数组中的相应名称不会返回，但对于其他位置的字符，一切正常。请解决这个...

PHP

```
$query = $_GET['query'];

$names = array('abc', 'hello', 'cool', 'fun', 'demo', 'test');
foreach($names as $name)
{
$str = strpos($name, $query);

if(!empty($str))
{
    echo "$name ";

}

} 
```

HTML

```
<form name='myForm'>
Name: <input type='text' onblur="ajaxFunction(this.value);" name='username' /> <br />
Time: <input type='text' disabled="disabled" name='time' />
</form> 
```

AJAX

```
function ajaxFunction(val) {
var ajaxRequest;

try {
    //Opera, Safari and Firefox xml object
    ajaxRequest = new XMLHttpRequest(); 
} catch(e) {
    try {
        //Internet Explorer xml object
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch(e) {
        try {
            //Old browser's xml object
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");                   
        } catch(e) {
            return false;
        }
    }

}

ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        document.myForm.time.value = ajaxRequest.responseText;
    } else {
        //do nothing
    }
}
ajaxRequest.open("GET", "names.php?query="+val, true);
ajaxRequest.send(null); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:35:00.547

这可能是 strpos 返回的 0 值（它返回一个整数）......我的意思是“如果”语句可以将其视为假。

尝试比较喜欢

```
if(strpos($name, $query) === false){ .... do something..... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:38:11.217

您可以使用以下 -

```
if($str !== FALSE)
{
   echo "$name ";
} 
```

# c++ - 在 C++ 中格式化输出

> ID：11226143
> 
> 赞同：22
> 
> 时间：2012-06-27T12:25:07.320
> 
> 标签：c++, output-formatting

在 C++ 代码中，我有一个双变量矩阵，可以打印出来。但是，因为它们都有不同的位数，所以输出格式被破坏了。一种解决方案是这样做， `cout.precision(5)`但我希望不同的列具有不同的精度。此外，由于在某些情况下存在负值，因此`-`符号的存在也会导致问题。如何解决这个问题并产生格式正确的输出？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T12:36:48.113

Off the top of my head, you can use setw(int) to specify the width of the output.

like this:

```
std::cout << std::setw(5) << 0.2 << std::setw(10) << 123456 << std::endl;
std::cout << std::setw(5) << 0.12 << std::setw(10) << 123456789 << std::endl; 
```

gives this:

```
 0.2    123456
   0.12 123456789 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T12:55:12.230

正如其他人所说，关键是使用机械手。他们忽略了说的是您通常使用自己编写的操纵器。一个`FFmt`操纵器（对应`F`于 Fortran 中的格式相当简单：

```
class FFmt
{
    int myWidth;
    int myPrecision;
public:
    FFmt( int width, int precision )
        : myWidth( width )
        , myPrecision( precision )
    {
    }

    friend std::ostream& 
    operator<<( std::ostream& dest, FFmt const& fmt )
    {
        dest.setf( std::ios_base::fixed, std::ios_base::formatfield );
        dest.precision( myPrecision );
        dest.width( myWidth );
        return dest;
    }
}; 
```

这样，您可以为每一列定义一个变量，例如：

```
FFmt col1( 8, 2 );
FFmt col2( 6, 3 );
//  ... 
```

和写：

```
std::cout  << col1 << value1
    << ' ' << col2 << value2... 
```

一般来说，除了在最简单的程序中，您可能不应该使用标准操纵器，而应该使用基于您的应用程序的自定义操纵器；例如`temperature`，`pressure`如果这是你处理的那种事情。通过这种方式，您在代码中很清楚您正在格式化什么，如果客户突然要求再增加一位压力，您就知道在哪里进行更改。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T12:33:27.337

使用[机械手](http://en.cppreference.com/w/cpp/io/manip)。

[从这里的](http://en.cppreference.com/w/cpp/io/manip/left)示例：

```
#include <iostream>
#include <iomanip>
#include <locale>
int main()
{
    std::cout.imbue(std::locale("en_US.utf8"));
    std::cout << "Left fill:\n" << std::left << std::setfill('*')
              << std::setw(12) << -1.23  << '\n'
              << std::setw(12) << std::hex << std::showbase << 42 << '\n'
              << std::setw(12) << std::put_money(123, true) << "\n\n";

    std::cout << "Internal fill:\n" << std::internal
              << std::setw(12) << -1.23  << '\n'
              << std::setw(12) << 42 << '\n'
              << std::setw(12) << std::put_money(123, true) << "\n\n";

    std::cout << "Right fill:\n" << std::right
              << std::setw(12) << -1.23  << '\n'
              << std::setw(12) << 42 << '\n'
              << std::setw(12) << std::put_money(123, true) << '\n';
} 
```

输出：

```
Left fill:
-1.23*******
0x2a********
USD *1.23***

Internal fill:
-*******1.23
0x********2a
USD ****1.23

Right fill:
*******-1.23
********0x2a
***USD *1.23 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T12:34:13.623

看看流[操纵器](http://en.cppreference.com/w/cpp/io/manip)，尤其是`std::setw`和`std::setfill`。

```
float f = 3.1415926535;
std::cout << std::setprecision(5)   // precision of floating point output
          << std::setfill(' ')      // character used to fill the column
          << std::setw(20)          // width of column
          << f << '\n';             // your number 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:34:46.490

尝试使用 setw 操纵器。请参阅[http://www.cplusplus.com/reference/iostream/manipulators/setw/](http://www.cplusplus.com/reference/iostream/manipulators/setw/)了解更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T12:34:55.183

有一种使用 i/o 操纵器的方法，但我觉得它很笨拙。我只想写一个这样的函数：

```
template<typename T>
std::string RightAligned(int size, const T & val)
{
    std::string x = boost::lexical_cast<std::string>(val);
    if (x.size() < size)
        x = std::string(size - x.size(), ' ') + x;
    return x;
} 
```

# qt - 如何设置 Qmessagebox 某个元素的样式表

> ID：11226145
> 
> 赞同：2
> 
> 时间：2012-06-27T12:25:10.597
> 
> 标签：qt, stylesheet, messagebox

我通过以下方式制作了一个 QMessageBox：

```
msgBox.setText("Are you sure?");
msgBox.setStandardButtons(QMessageBox::Yes| QMessageBox::No);
msgBox.setStyleSheet("background-image: url(image)");
msgBox.exec(); 
```

不幸的是，在消息框上使用 setStyleSheet 会为按钮、文本框和实际的 msgbox 设置背景。这不是我想要的。我只希望 msgbox 有背景而不是消息框的其他组件。我发现使用：

```
msgBox.button(QMessageBox::Yes)->setStyleSheet(...) 
```

可用于仅在按钮上设置背景。是否有一个命令可以只设置 msgBox 的背景，而不向按钮和文本框添加背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:57:28.880

您可以使用选择器来限制将应用样式的元素。因此，要将样式仅应用于`QMessageBox`自身而不是其子级，您将使用：

```
msgBox.setStyleSheet("QMessageBox { background-image: url(image) }"); 
```

有关更多详细信息，请参阅[样式表语法 - 选择器类型](http://qt-project.org/doc/stylesheet-syntax.html#selector-types)。

# php - 从字符串中解码河豚

> ID：11226147
> 
> 赞同：0
> 
> 时间：2012-06-27T12:25:12.367
> 
> 标签：php, base64, session-variables, pear, blowfish

使用河豚 cbc 模式，我想创建一个加密令牌。当我创建令牌并立即解密它时，它可以正常工作。但是，如果我将加密令牌放入`SESSION`并尝试在后续请求期间对其进行解密，则解密会产生垃圾。

这是我的代码。我`SESSION`用于测试；最终，我会将这些字符串存储在数据库中。

```
session_start();
define("key","v8nga4r76qlipm111jnioool");
define("iv",substr(md5(uniqid(rand(),1)),0,8));
require_once("Crypt/Blowfish.php");

$str = "Blowfish_test";
// encode start!!
$blowfish = Crypt_Blowfish::factory("cbc", key, iv);
$encrypt = $blowfish->encrypt($str);
$encrypt64 = base64_encode($encrypt);
$_SESSION["test"] = $encrypt64; 
```

到目前为止，一切都是正确的。如果在同一个请求下，我立即（从`SESSION`）对其进行解码，则结果与预期一致：

```
// decode start!!
$blowfish = Crypt_Blowfish::factory("cbc", key, iv);
$decrypt64 = base64_decode($_SESSION["test"]);
$decrypt = $blowfish->decrypt($decrypt64);
$trim_decrypt = rtrim($decrypt, "\0");
echo "Before encryption : " . $str ."<br>";
echo "Encrypted string &nbsp&nbsp: " .$encrypt64\. "<br>";
echo "decrypted string &nbsp&nbsp: " .$trim_decrypt. "<br>"; 
```

如果我只将第二个代码块放在不同的页面上（因此正在解密先前生成的字符串），则解密的字符串是垃圾。

加密 -> session["test"] -> 解密 --- 没问题

session["test"] -> 解密 --- 问题

这里发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-23T02:43:56.017

我很抱歉这个超级延迟。我当时通过评论解决了这个问题，所以我使用社区 wiki 关闭了这个问题。

---添加---
问题解决了

```
// encode
// At the same time save the initialization vector
$_SESSION["test"] = $encrypt64;
$_SESSION["iv"]   = iv;

--- other file ---
// decode
$blowfish = Crypt_Blowfish::factory("cbc", key, $_SESSION["iv"]); 
```

# c++ - QString 到 const std::string

> ID：11226148
> 
> 赞同：0
> 
> 时间：2012-06-27T12:25:12.777
> 
> 标签：c++, string, constants, qstring

我想将 QString 中的值分配给 const std::string

```
QString qfile("some value"); 
```

这是 const std::string 变量

```
const std::string file 
```

我正在使用的代码

```
file = qfile.toStdString(); 
```

上面的代码适用于普通的 std::string 。但是由于关键字'const'存在一些问题。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T12:27:40.263

不要使用赋值运算符来初始化`std::string`对象，而是直接初始化变量。

```
const std::string file = qfile.toStdString(); 
```

除此之外，请确保您了解编码的`QString::toStdString()`用途；不像`QString`,`std::string`与编码无关（它是一串字节，而不是字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:27:36.263

**常量**是具有固定值的表达式。

[http://www.cplusplus.com/doc/tutorial/constants/](http://www.cplusplus.com/doc/tutorial/constants/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:57:53.977

`const`您还可以通过复制 的返回值来摆脱`toStdString()`：

```
QString str("text");
std::string std_str(str.toStdString()); 
```

# jquery - JQuery 对话框显示隐藏效果

> ID：11226149
> 
> 赞同：0
> 
> 时间：2012-06-27T12:25:13.187
> 
> 标签：jquery, jquery-ui

我正在尝试这样做：

```
$('#mypopup').dialog({
    modal: true,
    autoOpen: true,
    resizable: false,
    show: {effect:'slide',duration:250},
    hide: {effect:'slide',duration:250}
}); 
```

然后打开它...

```
function showPopup() {
        if ($('#mypopup').length == 0) {
            $('#mypopup-div').load('mypopupurl/show.php'); 
        } else {
            //reopen the login dialog previously rendered, don't load again
            $('#mypopup').dialog('open'); 
        }
    } 
```

然后关闭它...

```
$('#mypopup').dialog('close'); 
```

我的问题是，上面代码中的显示幻灯片效果仅在第一次起作用时，它实际上是从 .load('mypopupurl/show.php'); 加载的。当我关闭它并重新打开弹出对话框时，它会使用 .dialog('open'); 命中 else 语句。代码，这次没有出现幻灯片效果。（不是错误，只是正常弹出，但没有效果）

这是 JQuery 中的一个小故障吗？还是设计使然？当它点击对话框（'打开'）时，如何使效果起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:30:30.887

我认为你可以做类似 `$('#mypopup').show();`或`$('#mypopup').dialog().show();`

# python - YAML 作为故障安全文件转储格式（使用 pyyaml）？

> ID：11226151
> 
> 赞同：0
> 
> 时间：2012-06-27T12:25:37.067
> 
> 标签：python, yaml

我想将结构化数据（主要是带有一些附加元数据的表格）转储到文件中，作为另一个程序的输入。但是，某些数据字段可以是任意 Unicode 数据。您知道 PyYaml 是否是故障安全解决方案（例如，它可以避开所有问题案例）还是您会建议其他基于文件的简单解决方案？恐怕特殊字符会破坏格式或解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:33:01.543

任何好的序列化程序都可以处理任意 Unicode，方法是将其转换为 Unicode 点引用。

使用 YAML：

```
>>> yaml.dump({'foo': u'τί ἐστίν; 統一碼!!! ✢✪✺'})
'{foo: "\\u03C4\\u1F77 \\u1F10\\u03C3\\u03C4\\u1F77\\u03BD; \\u7D71\\u4E00\\u78BC!!! \\u2722\\u272A\\\n    \\u273A"}\n' 
```

使用 JSON：

```
>>> json.dumps({'foo': u'τί ἐστίν; 統一碼!!! ✢✪✺'})
'{"foo": "\\u03c4\\u1f77 \\u1f10\\u03c3\\u03c4\\u1f77\\u03bd; \\u7d71\\u4e00\\u78bc!!! \\u2722\\u272a\\u273a"}' 
```

# sql - SQL-Server 2005 的 Oracle 等效 ROWNUM？

> ID：11226153
> 
> 赞同：3
> 
> 时间：2012-06-27T12:25:47.013
> 
> 标签：sql, sql-server-2005

在 Oracle PL/SQL 中，我曾经写过：

```
SELECT * FROM MY_TABLE WHERE ROWNUM <= 100; 
```

为了只获取名为 MY_TABLE 的表的前 100 条记录。

SQL SERVER 中的等效 SELECT 语句可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:27:01.467

在 SQL-Server 中，您可以使用[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)选择编号。的行。

```
SELECT TOP 100 * FROM MY_TABLE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:27:51.060

```
select top 100 * from tbl 
```

列名是必需的或使用 *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:28:56.083

```
SELECT TOP 100 * FROM MY_TABLE 
```

对不起，如果我误解了。

**编辑：**必须更快

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:34:06.057

```
SELECT TOP 100 * FROM TABLE 
```

您还可以使用 where class 过滤行

```
SELECT TOP 100 * FROM YOURTABLE WHERE YOURCONDITION 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:38:33.120

在 SQL Server 2012 中，您可以使用`OFFSET`和`FETCH`来确定要返回的行。它们记录在[`ORDER BY`](http://msdn.microsoft.com/en-us/library/ms188385.aspx); 这是有道理的，因为当表*根据定义*无序时，要求 100 行会产生不可预测的结果。

Similarly, if you use other's answers, re: `TOP`, you should *also* have an `ORDER BY` clause, or else it's **not defined** which rows will be returned.

# java - 来自 XML 数据的网格视图

> ID：11226154
> 
> 赞同：-1
> 
> 时间：2012-06-27T12:25:51.193
> 
> 标签：java, xml, jsp

我有xml格式的数据如下

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <Row>
        <Sales_Doc>OR</Sales_Doc>
        <Sales_Org>0001</Sales_Org>
        <Dist_Ch>01</Dist_Ch>
        <Division>01</Division>
        <Sold_to_Party>SCEM_02</Sold_to_Party>
        <MatNo/>
        <Net_Weight>PC</Net_Weight>
        <Net_Weight_Item>590000</Net_Weight_Item>
        <Weight_Unit>KG/Weight_Unit>    
        <Sales_Unit>PC</Sales_Unit>
    </Row>
</xml> 
```

我需要使用 jsp 或 java 语言将其转换为表格或网格格式。请分享你的想法

问候

喜悦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:33:14.210

您可以按如下方式解析 xml 文件：

```
<%
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse("http://localhost:8080/practice/test.xml");

NodeList nl= doc.getElementsByTagName("Sales_Doc");
NodeList n2= doc.getElementsByTagName("Sales_Org");
NodeList n3= doc.getElementsByTagName("Dist_Ch");
NodeList n4= doc.getElementsByTagName("Division");
NodeList n5= doc.getElementsByTagName("Sold_to_Party");
 // here more nodes in your xml file ....
%> 
```

并在jsp页面中显示如下：

```
<table>
<tr>
 <%
 for(int i=0;i<3;i++)
 {
 %>
 <td><%= nl.item(i).getFirstChild().getNodeValue() %></td>
 <td><%= n2.item(i).getFirstChild().getNodeValue() %></td>
 <td><%= n3.item(i).getFirstChild().getNodeValue() %></td>
 <td><%= n4.item(i).getFirstChild().getNodeValue() %></td>
 // here more tds depending on your xml file ...
 </tr>
 <%
 }
 %>
 </table> 
```

参考[http://wowjava.wordpress.com/2010/04/02/displaying-xml-data-in-jsp-page/](http://wowjava.wordpress.com/2010/04/02/displaying-xml-data-in-jsp-page/)

另一种方法是使用 xslt ：

[xslt](http://en.wikipedia.org/wiki/XSLT)：XSLT（可扩展样式表语言转换）是一种声明性的、基于 XML 的语言，用于转换 XML 文档。原文件不变；相反，新文档是基于现有文档的内容创建的。[2](http://en.wikipedia.org/wiki/XSLT)新文档可以由处理器以标准 XML 语法或其他格式（例如 HTML 或纯文本）序列化（输出）。[3](http://www.w3schools.com/xml/xml_to_html.asp) XSLT 最常用于在不同 XML 模式之间转换数据或将 XML 数据转换为网页或 PDF 文档。

[这是一个例子](http://www.w3schools.com/xml/xml_to_html.asp)

# ruby-on-rails - Rails 转换日期格式

> ID：11226155
> 
> 赞同：5
> 
> 时间：2012-06-27T12:25:58.060
> 
> 标签：ruby-on-rails, date

我的应用程序中有一个表单输入，它接受 DD/MM/YYYY 格式的日期，例如 02/05/2012 是 2012 年 5 月 2 日。

我将其转换为合适的格式以通过 ActiveRecord 添加到数据库的最佳方法是什么？

在添加到数据库之前，是否有一种简单的方法可以将 02/05/2012 转换为 05/02/2012？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T12:34:36.873

这类似于[让 rails 接受欧洲日期格式 (dd/mm/yyyy)](https://stackoverflow.com/questions/2204992/getting-rails-to-accept-european-date-format-dd-mm-yyyy?rq=1)

在您的模型中，创建一个 setter 方法，其中“my_date”是您的数据库字段。

```
def my_date=(val)
  Date.strptime(val, "%d/%m/%Y") if val.present?
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T12:38:15.530

对于这种特定格式，您可以调用[`DateTime.parse`](http://corelib.rubyonrails.org/classes/DateTime.html#M000528)：

```
DateTime.parse("02/05/2012") # => Thu, 02 May 2012 00:00:00 +0000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-22T18:50:46.640

2 年后，但这也是我遇到的问题，这是我的解决方法。

在您看来，使用：<%= l article.created_at, format: :euro %> **确保添加 l

然后在 /config/locales/en.yml 添加：

```
en:

 time:

  formats:

    euro: "%d/%m/%Y" 
```

** 您也可以只添加欧元：“%D”以美国日期格式显示。

谢谢。

# iphone - 将整数添加到 NSMUtableArray

> ID：11226159
> 
> 赞同：1
> 
> 时间：2012-06-27T12:26:07.217
> 
> 标签：iphone, ipad, nsmutablearray, integer, uipopovercontroller

我是一名新的 iPad 开发人员。

我在按钮单击时实现 UIPopover，并且 popover 包含整数值，

当我尝试用整数填充我的数组时，它向我显示`SIGABRT`：**索引 3 超出范围**我无法看到我的日志，应用程序崩溃。

这是我的代码片段：

```
-(void)btnClick:(id)sender {

    for (int i=3; i<=31; i++) {
        [remindarray addObject:[NSNumber numberWithInteger:i]];
         NSLog(@"no=%@",[remindarray objectAtIndex:i]);
    }

    UIViewController* popoverContent = [[UIViewController alloc]init];
    UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(110, 0, 500, 4)];

    popoverTable = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 250, 665) style:UITableViewStylePlain];
    [popoverTable setDelegate:(id<UITableViewDelegate>)self]; 
    [popoverTable setDataSource:(id<UITableViewDataSource>)self]; 
    [self.view addSubview:popoverTable];
    [popoverTable release];

    [popoverView addSubview:popoverTable];
    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(250, 600);
    self.popoverController = [[UIPopoverController alloc]
                              initWithContentViewController:popoverContent];

    [self.popoverController  presentPopoverFromRect:CGRectMake(100,0, 535, 35) 
                                             inView:self.view permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];

    [popoverView release];
    [popoverContent release];
} 
```

最后`remind array`我传递给`cellForRowAtIndexPath`

代码：

```
...
cell.textLabel.text=[remindarray objectAtIndex:indexPath.row];
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:29:09.690

您的 for 循环从 3 开始，因此在数组中以 0 个项目开始，然后插入 1 个项目并尝试在索引 3 处记录该项目，该项目仍然不在数组内

快速解决方法是

改变

```
NSLog(@"no=%@",[remindarray objectAtIndex:i]); 
```

到

```
NSLog(@"no=%@",[remindarray objectAtIndex:i - 3]); 
```

或者从 0 开始数组

你也需要改变

```
cell.textLabel.text=[remindarray objectAtIndex:indexPath.row]; 
```

到

```
cell.textLabel.text=[NSString stringWithFormat:@"%@", [remindarray objectAtIndex:indexPath.row]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:29:22.587

因为新创建的数组索引从索引开始而`0`不是从`3`

问题出在这个循环中

```
for (int i=3; i<=31; i++) {
        [remindarray addObject:[NSNumber numberWithInteger:i]];
         NSLog(@"no=%@",[remindarray objectAtIndex:i]);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:30:11.883

```
for (int i=3; i<=31; i++) {
    [remindarray addObject:[NSNumber numberWithInteger:i]];
     NSLog(@"no=%@",[remindarray objectAtIndex:i]);
} 
```

在这里，您从 3 开始 i 并且您将单个对象分配给提醒数组，因此起初它仅包含一个对象，因此 objectAtIndex:3 将为零，因此请像这样修改代码

```
NSLog(@"no=%@",[remindarray objectAtIndex:i-3]); 
```

或者

```
NSLog(@"no=%@",[remindarray objectAtIndex:0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:34:59.800

我认为引发异常的是这一行

```
NSLog(@"no=%@",[remindarray objectAtIndex:i]);

//
-(void)btnClick:(id)sender {
for (int i=3; i<=31; i++) {
    [remindarray addObject:[NSNumber numberWithInteger:i]];
    //your remindArray has one object, index is 0, but you are accessing the 
    //object which is at the index of 3, but the remindArray
    // has only one object [0]
     NSLog(@"no=%@",[remindarray objectAtIndex:i]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:41:49.127

解决方案很简单：在数组的索引 0 处添加一个对象，然后要在索引 3 处打印该对象。使用：

```
NSLog(@"no=%@",[remindarray objectAtIndex:i - 3]); 
```

# zend-framework - Zend 重定向器和模块作为子域

> ID：11226172
> 
> 赞同：0
> 
> 时间：2012-06-27T12:26:28.080
> 
> 标签：zend-framework, module, routing, subdomain

我已经在我的项目中为 cms 配置了路由到 cms.m.dev

```
resources.router.routes.cms.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.cms.route = "m.dev"
resources.router.routes.cms.defaults.module = "cms"
resources.router.routes.cms.chains.admin_default.route = "/:controller/:action/*"
resources.router.routes.cms.chains.admin_default.defaults.action = "index"
resources.router.routes.cms.chains.admin_default.defaults.controller = "dashboard" 
```

但现在我遇到了重定向器的问题：

```
$this->_redirector->gotoUrl('/doctor/edit/');
$this->_redirector->gotoSimple('edit', 'doctor', 'cms'); 
```

当我这样称呼它时，它会将我重定向到**m.dev/cms/doctor/edit**而不是**cms.m.dev/doctor/edit**。有什么办法可以告诉重定向器模块是子域，而不是子目录？

更新：我创建了路线：

```
resources.router.routes.cms_doctor_index.route = "/doctor/"
resources.router.routes.cms_doctor_index.type =     "Zend_Controller_Router_Route_Static"
resources.router.routes.cms_doctor_index.defaults.module = "cms"
resources.router.routes.cms_doctor_index.defaults.controller = "doctor"
resources.router.routes.cms_doctor_index.defaults.action = "index" 
```

但它仍然将我重定向到 m.dev/doctor/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:47:41.367

您应该尝试`gotoRoute()`指定您希望重定向器使用您的特殊路由

```
gotoRoute  ( 
    array $urlOptions = array(),  
          $name = null,  // $name = "m.dev"
          $reset = false,  
          $encode = true   
 ) 
```

我没有对此进行测试，但它*应该可以*工作。

# sql - 如何计算间隔内的小时数

> ID：11226173
> 
> 赞同：0
> 
> 时间：2012-06-27T12:26:30.263
> 
> 标签：sql, expression, reportbuilder3.0

我们正在使用 ReportBuilder 3.0 构建报告。在我们的数据库中，我们有一个正在执行的工作的开始时间和结束时间。在 ReportBuilder 3.0 中，我们希望创建一个字段来显示在某个时间间隔内有多少工作时间。

示例：开始时间：20.00 - 结束时间：04.30 +1... 22.00 到 06.00 +1 = 6.5 小时之间的间隔是多少。

有没有人有一个很好的例子来说明如何创建一个可以给出结果的表达式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:29:47.460

```
differnce(new Date(dayear,damonth-1,dadate),new Date(endyear,endmonth-1,enddate)) 
```

# google-app-engine - Google App Engine 在 Oauth2 身份验证中出现 GoLang“权限被拒绝”错误

> ID：11226181
> 
> 赞同：1
> 
> 时间：2012-06-27T12:26:49.843
> 
> 标签：google-app-engine, go, oauth-2.0

Oauth2 身份验证库在本地主机上运行良好，但在上传到 Google App Engine 时崩溃

[oauth.go](http://code.google.com/p/goauth2/source/browse/oauth/oauth.go)

当它执行上述代码的第 250 行时

`r, err := (&http.Client{Transport: t.transport()}).PostForm(t.TokenURL, v)`

错误响应是“权限被拒绝”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:49:27.840

从[api.go 文档](http://code.google.com/p/google-plus-go-starter/source/browse/appengine/app/api/api.go?r=749cfb1ec838494751ff9b8199db22d2f7dc8032)：

> 由于 Google App Engine URL Fetch API 需要每个请求的上下文，因此您必须在 HTTP 处理程序中使用 *plus.Service。这个包提供了 WithNoAuthPlus 和 WithOAuthPlus 函数，您可以使用它们来包装您的 HTTP 处理程序，为它们提供完全初始化的 *plus.Services。

例子：

```
c := appengine.NewContext(r)
trans := &oauth.Transport{
    Config:    oauthConfig,
    Transport: &urlfetch.Transport{Context: c},
}
trans.Exchange(code)
resp, err := trans.Client().Get(profileInfoURL) 
```

# opengl - 片段着色器作为纹理的输出

> ID：11226186
> 
> 赞同：1
> 
> 时间：2012-06-27T12:27:14.090
> 
> 标签：opengl, shader, jogl

我的片段着色器有问题，这是我的情况：

我有一个 3d 场景，中间有一个简单的 2d 正方形代表一堵墙（带有“GL.GL_QUADS”）。我使用函数“glu.gluLookAt”移动虚拟相机。

我为墙壁实现了一个简单的片段着色器，它基本上根据墙壁到虚拟相机的距离来改变墙壁的颜色（使用 dFdx 和 dFdy）。

问题是，我不想在墙上可视化着色器的输出，而是将输出存储在缓冲区或纹理中。

我尝试使用“gl.glBindFramebufferEXT”，但在这种情况下，输出是虚拟场景的整个渲染，而不仅仅是引用墙壁的着色器的输出。

那么我如何才能“提取”仅引用 GL_QUADS 的片段着色器的输出而不“提取”所有渲染场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:40:20.767

您将需要设置正射投影并仅渲染 FBO 所需的四边形（或仅渲染屏幕对齐的四边形）。然后，使用绑定为纹理的 FBO 的内容来渲染场景。

# c# - 在 asp 向导中的验证问题

> ID：11226189
> 
> 赞同：0
> 
> 时间：2012-06-27T12:27:20.500
> 
> 标签：c#

我有一组 5 个文本框，我正在使用一个 asp:wizard。我想检查是否所有的文本框都是空的 我想触发一个名为 lblItemBlock 的标签。到目前为止，我尝试过的任何方法都没有奏效，因此我尝试将其剪得更小以进行测试。我使标签在页面上可见，并且在活动步骤上尝试将可见属性设置为 false。无论出于何种原因，它都不起作用

这是我所拥有的：

```
protected void OnActiveStepChanged(object sender, EventArgs e)
{
if (Wizard1.ActiveStepIndex == Wizard1.WizardSteps.IndexOf(this.WizardStep3))
    {
        lblItemBlock.Visible = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:34:25.487

在 asp.net 中使用文本框/输入验证器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:22:27.150

使用带有客户端脚本的自定义验证器。可能有 5 个输入的更好方法，但是当我需要同时验证多个输入时我会使用它。以下检查至少有一个文本框有内容：

```
function searchValidate(oSrc, args) {
            var fName = document.getElementById('<%= txtFName.ClientID %>').value;
            var mName = document.getElementById('<%= txtMName.ClientID %>').value;
            var lName = document.getElementById('<%= txtName.ClientID %>').value;
            if (fName == "" && mName == "" && lName == "") {
                args.IsValid = false;
            } else {
                args.IsValid = true;
            }
        } 
```

# javascript - 轮播没有开始循环加载

> ID：11226192
> 
> 赞同：1
> 
> 时间：2012-06-27T12:27:33.717
> 
> 标签：javascript, jquery, html, twitter-bootstrap, carousel

问题出在标题上。

我的html：

```
 <div id="myCarousel" class="carousel">
    <div class="carousel-inner">
      <div class="active item"><%=  image_tag("/images/home_page_1.png")%></div>
      <div class="item"><%= image_tag("/images/home_page_2.png", :size => '600x260') %></div>
      <div class="item"><%= image_tag("/images/home_page_3.png", :size => '600x260') %></div>
    </div>
  </div> 
```

我的js：

```
$('#myCarousel').carousel({ interval: 200 }) 
```

文件在我的 js 文件夹中。其他一切正常工作。谷歌浏览器给了我错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“轮播”：3000/assets/application.js?body=1:17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:47:39.960

确保：

*   只加载了一个 jQuery。

*   jQuery 包含在`bootstrap.js`或之前`bootstrap-carousel.js`

*   不要同时包含`bootstrap.js`和`bootstrap-carousel.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:47:48.100

您是否正确加载了 jquery carousel 扩展 javascript 文件？jquery默认没有carousel方法，你必须使用像[http://thomaslanciaux.pro/jquery/jquery_carousel.htm这样的扩展](http://thomaslanciaux.pro/jquery/jquery_carousel.htm)

# date - 带有两个日期类型轴的 Jasper 报表折线图

> ID：11226196
> 
> 赞同：0
> 
> 时间：2012-06-27T12:27:40.190
> 
> 标签：date, jasper-reports, report

![所需报告](../Images/b9d2f56fd4c21a82d895ecfd32b2f502.png)

你好 ！

我需要使用 Jasper Reports 创建一个像附件显示的报告。

我用折线图试过了。结果：折线图需要 2 个轴的数字类型字段。

我已经用时间序列试过了。结果：时间序列期望轴有 1 个数字和 1 个日期类型字段。

我必须使用日期，所以我需要一个可以处理日期的图表类型。

有什么建议我该如何解决？我已经尝试了谷歌至少 10 个小时。现在我非常绝望。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:02:30.423

我想我已经解决了我的问题。我写了一个定制器类：

```
package com.test;

import java.text.DateFormat;
import java.text.SimpleDateFormat;

import net.sf.jasperreports.engine.JRChart;
import net.sf.jasperreports.engine.JRChartCustomizer;

import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.DateTickUnit;
import org.jfree.chart.plot.XYPlot;

public class TrendCustomizer implements JRChartCustomizer {
public void customize(JFreeChart chart, JRChart jasperChart) {
    DateAxis xAxis = new DateAxis();
    DateAxis yAxis = new DateAxis();

    DateTickUnit unit = null; 
    unit = new DateTickUnit(DateTickUnit.MONTH, 6); 

    DateFormat chartFormatter = new SimpleDateFormat("yyyy.MM.dd"); 

    xAxis.setDateFormatOverride(chartFormatter); 
    xAxis.setTickUnit(unit); 
    yAxis.setDateFormatOverride(chartFormatter); 
    yAxis.setTickUnit(unit); 

    ((XYPlot)chart.getPlot()).setDomainAxis(xAxis);
    ((XYPlot)chart.getPlot()).setRangeAxis(yAxis);
}
} 
```

# desire2learn - Desire2Learn Office 扩展无法与 Office 2010 和 D2L 10 一起正常工作

> ID：11226198
> 
> 赞同：1
> 
> 时间：2012-06-27T12:27:45.980
> 
> 标签：desire2learn

当我们尝试在 Windows 7 上将 Desire2Learn Office Extension 与 Office 2010 一起用于我们的 D2L v10 开发实例时，登录集成无法正常工作。我为我们的开发实例输入 URL：

[截图#1](http://s.lundrigan.ca/d87e6c.png)

当我单击 Word 中 Desire2Learn 选项卡上的“登录”按钮时，我会看到一个带有标准 D2L 登录页面的弹出对话框：

[截图#2](http://s.lundrigan.ca/7c6940.png)

但是，当我输入有效凭据时，我会在同一个小弹出窗口中重定向到 D2L 组织级主页，这不是 IDKey 身份验证重定向的预期行为。我对 D2L Valence API 还没有太多经验，但似乎对 /d2l/auth/api/token 的初始请求失败，然后被重定向到标准 D2L 登录页面。

这里有没有人能够成功配置 D2L 10 以使用 Office Extension 来帮助我完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:54:20.133

在某些站点中，用于组织登录的自定义门户页面没有将“target=”参数适当地传递到登录步骤。缺少这一点会导致“深层链接”不起作用（这又是在价身份验证期间所必需的）。

如果您控制自己的门户页面，则可以直接对其进行更新。

否则，我建议您向 Desire2Learn 帮助台开一张支持票，这通常是一个快速更改。

# amazon-ec2 - AWS 弹性地图上的加入性能降低运行配置单元

> ID：11226199
> 
> 赞同：2
> 
> 时间：2012-06-27T12:27:48.433
> 
> 标签：amazon-ec2, hive, hdfs, elastic-map-reduce

我正在运行一个简单的连接查询

```
 select count(*) from t1 join t2 on t1.sno=t2.sno 
```

表 t1 和 t2 都有 2000 万条记录，列 sno 是字符串数据类型。

表数据以 rcfile 格式从 Amazon s3 导入 HDFS。15 个 Amazon 大型实例的查询耗时 109 秒，但在 16 GB RAM 和 16 个 cpu 内核的 sql server 上耗时 42 秒。

我错过了什么吗？不明白为什么我在亚马逊上的表现会变慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:03:48.577

一些有助于调整 Hadoop 性能的问题：

*   您在这些实例上的 IO 利用率如何？也许大型实例不是该作业的 CPU / 磁盘 / 内存的正确平衡。
*   您的文件是如何存储的？是单个文件，还是多个小文件？Hadoop 对许多小文件并不那么热，即使它们是可组合的
*   你运行了多少个减速器？你想有大约 0.9*totalReduceCapacity 作为理想
*   你的数据有多倾斜？如果有许多具有相同键的记录，它们都将进入同一个减速器，如果你不小心，你将在那个减速器中有 O(n*n) 上限。

sql-server 可以处理 40 毫米的记录，但是等到你有 20 亿条记录后再看看它是如何工作的。它可能会破裂。我将 hive 更多地视为 Map Reduce 的巧妙包装器，而不是真实数据库的替代品。

同样根据经验，我认为拥有 15 个 c1.mediums 的性能可能与大型机器一样好，如果不是更好的话。老实说，大型机器没有适当的 CPU/内存平衡。

# asp.net-mvc - MVC ViewPathProvider，数据库视图和布局

> ID：11226202
> 
> 赞同：1
> 
> 时间：2012-06-27T12:27:56.733
> 
> 标签：asp.net-mvc

我正在尝试使用 MVC 框架创建一个 CMS。一切进展顺利，我创建了表来存储我的 ViewData、ViewTitle 和 virtualPath。我使用 VirthPathProvider，它看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Hosting;
using CMS;
using System.Collections.ObjectModel;
using CMS.Components;
using System.Web;

namespace CMS.Providers
{
    public class PageVirtualPathProvider : VirtualPathProvider
    {
        private Directory current { get; set; }
        private Collection<Directory> directories { get; set; }
        private Collection<BasePage> pages { get; set; }

        public override bool FileExists(string virtualPath)
        {
            string Path = (VirtualPathUtility.GetDirectory(virtualPath) != "~/") ? VirtualPathUtility.RemoveTrailingSlash(VirtualPathUtility.GetDirectory(virtualPath)) : VirtualPathUtility.GetDirectory(virtualPath);
            if (IsVirtualPath(Path))
            {
                BasePage oPage = FindPage(virtualPath);
                if (oPage != null) 
                    return true;
            }

            bool bExists = base.FileExists(virtualPath);
            return bExists;
        }

        public override VirtualFile GetFile(string virtualPath)
        {
            string Path = (VirtualPathUtility.GetDirectory(virtualPath) != "~/") ? VirtualPathUtility.RemoveTrailingSlash(VirtualPathUtility.GetDirectory(virtualPath)) : VirtualPathUtility.GetDirectory(virtualPath);
            if (IsVirtualPath(Path))
            {
                BasePage oPage = FindPage(virtualPath);
                if (oPage != null) 
                    return new PageVirtualFile(virtualPath, oPage.ViewData.ToArray());
            }

            return base.GetFile(virtualPath);
        }

        public override bool DirectoryExists(string virtualDir)
        {
            if (IsVirtualPath(virtualDir))
            {
                if (current != null)
                {
                    if (current.Path.ToLower() != virtualDir.ToLower())
                        current = new Directory(virtualDir, "53AF0033-4011-4C8F-A14D-7CE9301E264D");
                }
                else
                {
                    current = new Directory(virtualDir, "53AF0033-4011-4C8F-A14D-7CE9301E264D");
                }
                if (current != null)
                    return true;
            }

            return base.DirectoryExists(virtualDir);
        }

        public override VirtualDirectory GetDirectory(string virtualDir)
        {
            if (IsVirtualPath(virtualDir))
            {
                if (current != null)
                {
                    if (current.Path.ToLower() != virtualDir.ToLower())
                        current = new Directory(virtualDir, "53AF0033-4011-4C8F-A14D-7CE9301E264D");
                }
                else
                {
                    current = new Directory(virtualDir, "53AF0033-4011-4C8F-A14D-7CE9301E264D");
                }
                if (current != null)
                    return new CmsVirtualDirectory(virtualDir, "53AF0033-4011-4C8F-A14D-7CE9301E264D");
            }

            return base.GetDirectory(virtualDir);
        }

        public override System.Web.Caching.CacheDependency GetCacheDependency(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)
        {
            string Path = (VirtualPathUtility.GetDirectory(virtualPath) != "~/") ? VirtualPathUtility.RemoveTrailingSlash(VirtualPathUtility.GetDirectory(virtualPath)) : VirtualPathUtility.GetDirectory(virtualPath);
            if (IsVirtualPath(Path)) 
                return null;

            return base.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
        }

        public override string GetFileHash(string virtualPath, System.Collections.IEnumerable virtualPathDependencies)
        {
            string Path = (VirtualPathUtility.GetDirectory(virtualPath) != "~/") ? VirtualPathUtility.RemoveTrailingSlash(VirtualPathUtility.GetDirectory(virtualPath)) : VirtualPathUtility.GetDirectory(virtualPath);
            if (IsVirtualPath(Path))
                return Guid.NewGuid().ToString();

            return base.GetFileHash(virtualPath, virtualPathDependencies);
        }

        private BasePage FindPage(string virtualPath)
        {
            string VirtualName = VirtualPathUtility.GetFileName(virtualPath).ToLower();
            if (pages == null)
            {
                pages = PageManager.getAllPages("53AF0033-4011-4C8F-A14D-7CE9301E264D", false);
            }
            BasePage oPage = pages.SingleOrDefault(page => page.Path.ToLower() == VirtualName);
            return oPage;
        }

        private bool IsVirtualPath(string virtualPath)
        {
            string Path = VirtualPathUtility.ToAppRelative(virtualPath);
            if (directories == null)
            {
                directories = DirectoryManager.GetAllDirectories("53AF0033-4011-4C8F-A14D-7CE9301E264D");
            }
            Directory oDir = directories.SingleOrDefault(dir => dir.Path.ToLower() == Path.ToLower());

            if (oDir == null || virtualPath == "~/") return false; // If we don't have directory, return false
            return true; // Hit only if we are null
        }
    }
} 
```

现在我的问题是：获取页面很好，当它们是虚拟的时，它返回 null 作为 Cache 并且 FileHash 总是一个不同的字符串，所以调用 GetFile 。我的文件被返回，但它永远找不到布局。

我相信这是因为没有 _ViewStart.cshtml 因为没有视图目录....那么我该如何强制它使用布局？我已经尝试了很多东西，比如让我的虚拟页面从@inherits System.Web.Mvc.WebViewPage 继承等，但我仍然遇到同样的问题......

当我导航到虚拟页面时，出现此错误：无法将“ASP._Page_Guidelines_index_cshtml”类型的对象转换为“System.Web.IHttpHandler”类型。

请帮我; 我已经坚持了3周......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T14:42:46.127

如果其他人有这个问题。我确实解决了。这是我的完整代码:) 首先，创建我们的 RouteHandler

```
public class CmsRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new CmsHandler(requestContext); // Return the requestContext and handle as normal
    }
} 
```

然后我们需要创建我们的 MvcHanlder

```
class CmsHandler : MvcHandler, IRequiresSessionState
{    
    public CmsHandler(RequestContext requestContext)
        : base(requestContext)
    {
    }

    protected override IAsyncResult BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, object state)
    {
        return base.BeginProcessRequest(httpContext, callback, state);
    }

    protected override IAsyncResult BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, object state)
    {
        try
        {
            // If we are using a company Url, then the session should not be null
            if (CompanyProvider.CurrentCompanyId() != null)
            {
                var vpp = new CmsVirtualPathProvider(); // Create an instance of our VirtualPathProvider class
                var requestContext = ((MvcHandler)httpContext.Handler).RequestContext; // Get our request context
                string path = requestContext.HttpContext.Request.Url.AbsolutePath; // Get our requested path

                // If we have a path
                if (path != null)
                {
                    Collection<IPage> pages = vpp.pages; // Get all the published pages for this company

                    // If we have pages
                    if (pages != null)
                    {
                        IPage oPage = pages.SingleOrDefault(page => page.Path.ToLower() == path.ToLower()); // Select the page matching our requested path (if any)
                        if (oPage != null) // If we find the page
                        {
                            requestContext.RouteData.Values["controller"] = "_Cms"; // Set the controller
                            requestContext.RouteData.Values["action"] = "Index"; // And the action
                        }
                    }
                }
            }

            return base.BeginProcessRequest(httpContext, callback, state);
        }
        catch (Exception ex)
        {
            log4net.ILog _log = log4net.LogManager.GetLogger(this.GetType());
            _log.Fatal(ex);
            throw new Exception(ex.Message);
        }
    }

    protected override void ProcessRequest(HttpContext httpContext)
    {
        base.ProcessRequest(httpContext);
    }
} 
```

您可以在我的应用程序中看到我有一个 companyId，这是因为我正在为多家公司使用子域，但在正常情况下不需要。

完整的 VirtualPathProvider 如下所示：

```
public class CmsVirtualPathProvider : VirtualPathProvider
{
    public Collection<IPage> pages 
    { 
        get 
        {
            if (HttpContext.Current.Session != null)
            {
                return PageProvider.GetPublishedPages(CompanyProvider.CurrentCompanyId(), true);
            }
            else
                return null;
        } 
    }

    public override bool FileExists(string virtualPath)
    {
        if (IsVirtualPath(virtualPath))
        {
            if (FindPage(virtualPath) != null)
            {
                PageVirtualFile file = (PageVirtualFile)GetFile(virtualPath);
                return file.Exists;
            }
        }

        return Previous.FileExists(virtualPath);
    }

    public override VirtualFile GetFile(string virtualPath)
    {
        if (IsVirtualPath(virtualPath))
        {
            IPage oPage = FindPage(virtualPath);
            if (oPage != null)
                return new PageVirtualFile(virtualPath, oPage.ViewData);
        }

        return Previous.GetFile(virtualPath);
    }

    public override System.Web.Caching.CacheDependency GetCacheDependency(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)
    {
        if (IsVirtualPath(virtualPath)) 
            return null;

        return Previous.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
    }

    public override string GetFileHash(string virtualPath, System.Collections.IEnumerable virtualPathDependencies)
    {
        if (IsVirtualPath(virtualPath))
            return Guid.NewGuid().ToString();

        return Previous.GetFileHash(virtualPath, virtualPathDependencies);
    }

    private IPage FindPage(string virtualPath)
    {
        string VirtualName = VirtualPathUtility.GetFileName(virtualPath).ToLower();

        if (pages != null)
        {
            IPage oPage = pages.SingleOrDefault(page => page.FileName == VirtualName);
            return oPage;
        }
        else
            return null;
    }

    private bool IsVirtualPath(string virtualPath)
    {
        string Path = (VirtualPathUtility.GetDirectory(virtualPath) != "~/") ? VirtualPathUtility.RemoveTrailingSlash(VirtualPathUtility.GetDirectory(virtualPath)) : VirtualPathUtility.GetDirectory(virtualPath);
        if (Path.StartsWith("/Views/_Cms", StringComparison.InvariantCultureIgnoreCase))
            return true;
        else
            return false;
    }
} 
```

现在你只需要一个控制器来处理所有的页面请求。我的看起来像这样：

```
public class _CmsController : Controller
{
    private Collection<IPage> pages { get; set; }

    public ActionResult Index()
    {
        string uri = Request.Url.AbsolutePath; // Get our Requested Url
        string queryString = Request.Url.Query;
        Profile currentUser = ProfileProvider.CurrentUser(); // Get our current user if we have one

        if (pages == null) // If pages is null
            pages = PageProvider.GetPublishedPages(CompanyProvider.CurrentCompanyId(), true); // Get our published pages

        IPage page = pages.SingleOrDefault(p => p.Path.ToLower() == uri.ToLower()); // Get the current page

        if (page == null) // If our page is null
            throw new HttpException(404, "Are you sure this page exists?"); // Throw the 404 error

        if (page.Restricted && currentUser == null) // If our page is restricted and we are not logged in
            return Redirect("~/Account/LogOn?ReturnUrl=" + page.Path + queryString); // Redirect to the login page

        if (currentUser != null)
        {
            IPage oForbidden = currentUser.GetForbiddenPages().SingleOrDefault(p => p.Id == page.Id); // Finds the page in our forbidden pages, if it exists

            if (oForbidden != null) // If we find the forbidden page
                throw new HttpException(401, "You do not have permission to view this page."); // Throw 401 error

            AuditProvider.Create(currentUser, page, Event.View); // Create our audit trail if we get this far
        }

        return View(Path.GetFileNameWithoutExtension(page.Id.ToString())); // Show the page
    }
} 
```

只是因为我感觉很好，这是我的表格结构

```
CREATE TABLE [dbo].[cms_Pages](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [DateCreated] [datetime] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [Author] [nvarchar](256) NOT NULL,
    [DateModified] [datetime] NULL,
    [ModifiedById] [uniqueidentifier] NULL,
    [ModifiedBy] [nvarchar](256) NULL,
    [CompanyId] [uniqueidentifier] NOT NULL,
    [Name] [varchar](100) NOT NULL,
    [Description] [text] NULL,
    [FileName] [varchar](255) NULL,
    [Path] [varchar](255) NULL,
    [Link] [varchar](255) NULL,
    [Published] [bit] NOT NULL,
    [TypeId] [int] NOT NULL,
    [Order] [int] NOT NULL,
    [Lineage] [nvarchar](255) NOT NULL,
    [ParentId] [int] NULL,
    [ViewData] [varbinary](max) NULL,
    [ViewTitle] [varchar](255) NULL,
    [Restricted] [bit] NOT NULL,
 CONSTRAINT [PK_cg_Pages] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

显然，您不需要 companyId :) 这是表中包含的数据的一瞥

![在此处输入图像描述](../Images/088683399d5ccce5a424f5add0fc4066.png)

我使用这行代码将页面的 html 转换为字节：

```
ASCIIEncoding encoding = new ASCIIEncoding();
var decodedContent = HttpUtility.UrlDecode(Content, Encoding.Default);
Byte[] bytes = encoding.GetBytes(decodedContent); 
```

如果在将 HTML 提交到保存函数之前转义 HTML，则只需要 UrlDecode。如果你不是，那么你可以使用：

```
ASCIIEncoding encoding = new ASCIIEncoding();
Byte[] bytes = encoding.GetBytes(Content); 
```

我真的希望这可以帮助某人。我正试图解决这个问题：）

干杯，r3plica

# sql-server - 尝试用 1 个查询更新 3 个表 [徒劳]

> ID：11226203
> 
> 赞同：0
> 
> 时间：2012-06-27T12:27:58.703
> 
> 标签：sql-server, sql-update, inner-join, multiple-tables

当我想填充我的网格时，我使用这个 Select 命令：

```
SELECT t1.Id, t1.emertimi, kredite, pershkrim, Viti, t2.Emertimi as Expr1, emri, mbiemri
FROM Kurse as t1 INNER JOIN 
     Deget as t2 ON t1.degID = t2.Id INNER JOIN
     Pedgoge ON t1.Id = Pedgoge.kurs_id 
```

现在，当我尝试使用在 EditCommand 完成后触发的 Update 命令更新网格时（您将 Update 作为链接），我以这种方式使用它：

```
UPDATE Kurse
SET t1.emertimi=@emertimi,
    kredite=@kredite,
    pershkrim=@pershkrim,
    Viti=@Viti,
    t2.Emertimi as Expr1 = @Expr1, emri=@emri, mbiemri=@mbiemri
FROM Kurse as t1 INNER JOIN 
     Deget as t2 ON t1.degID = t2.Id INNER JOIN
     Pedgoge ON t1.Id = Pedgoge.kurs_id 
```

但这不起作用。请因为我是一名学生并且非英语母语是有点难以理解在这种情况下我应该做什么。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:35:52.683

[UPDATE](http://msdn.microsoft.com/en-us/library/ms177523.aspx)语句只更改**一个**表或视图

它失败了，因为子句中有两个不同的别名 ( `t1`and `t2`)`SET`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:45:24.260

正如 Vadim 已经说过的，UPDATE 命令只能更改一张表。因此，您必须编写 3 个不同的 Update 语句。

```
UPDATE Kurse
SET emertimi=@emertimi,
    kredite=@kredite,
    pershkrim=@pershkrim,
    Viti=@Viti
WHERE.......

UPDATE Deget 
SET Emertimi = @Expr1, 
    emri=@emri, 
    mbiemri=@mbiemri
WHERE ...... 
```

从您的查询中，不清楚您究竟想更新什么以及在哪里更新，因此您必须`where`自己理清条件。

# sql - 三张表连接给了我所有的记录组合

> ID：11226205
> 
> 赞同：0
> 
> 时间：2012-06-27T12:28:31.327
> 
> 标签：sql, inner-join

当我编写如下查询时.. 它写了所有记录的组合。查询中有什么错误？

```
SELECT ven.vendor_code, add.address1 
    FROM vendor ven INNER JOIN employee emp 
    ON ven.emp_fk = emp.id 
    INNER JOIN address add 
    ON add.emp_name = emp.emp_name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:40:16.940

使用内连接，您必须将两个表之间的所有链接（关系）放在`ON`子句中。

假设关系良好，您可以测试以下查询，看看它们是否真的组合了所有记录：

```
SELECT count(*)
from vendor ven
inner join employee emp on ven.emp_fk = emp.id 
inner join address add on add.emp_name = emp.emp_name;

SELECT count(*)
       add.address1
from vendor ven, employee emp, address add 
```

如果两个查询都返回相同的结果（我对此表示怀疑），那么您确实有您所说的。

如果不是，正如我所假设的那样，您可能缺少过滤结果数量的关系或限制。

# javascript - 从 XSL 文件运行 JavaScript 时出错

> ID：11226206
> 
> 赞同：-2
> 
> 时间：2012-06-27T12:28:32.853
> 
> 标签：javascript, xslt

我有一个具有 JavaScript 函数的 XSL 文件。我在调用 JavaScript 函数时遇到错误，我不明白出了什么问题。请帮忙。

这是JavaScript：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                              xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:import href="page_layout.xsl"/>
    <xsl:output method="html" indent="yes"/>

    <msxsl:script language="JScript">
        <![CDATA[
        function EnableSubmit() 
        {
        alert ("Hello there");
        }
    ]]>
    </msxsl:script> 
```

这是调用函数的形式 -

```
< form action="NewUserNavigation" method="post" name="NewUserNavigationForm">
            < input name="eventName" type="hidden" value="NewUserNavigationEvent"/>
            < div class="sansIcon">
            < input type="checkbox" name="chk" onClick="EnableSubmit()">I accept< /input>
            < /div>
            < div class="buttonBarPage">
            < input name="Submit" class="primary" type="submit" value="Continue"/>
            < /div>
        < /form> 
```

表单和 JavaScript 都是同一个 .xml 文件的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:36:23.153

**You misunderstand the role and meaning of [`<msxsl:script>`](http://msdn.microsoft.com/en-us/magazine/cc302079.aspx).**

It allows javascript functions that it contains to be called *during the transformation* -- not before or after the transformation has been run.

You actually want the XSLT transformation that creates the form also to *generate* the javascript text as its result, so that its functions are accessible by the form.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-19T15:25:22.040

这个对我有用

```
var sh = new ActiveXObject("WScript.Shell")
sh.Popup("hello") 
```

# asp.net-mvc - 在 MVC4 中，从视图到控制器的发布参数始终为空

> ID：11226222
> 
> 赞同：1
> 
> 时间：2012-06-27T12:29:14.203
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我在使用 MVC4 将参数从视图返回到控制器时遇到问题。

这是我的模型的类（对不起所有这些代码，我一开始想发布一张图片，但我太新手了，不能这样做）：

```
 public class Form
{
    public Form()
    {
        this.Rows = new List<Row>();
    }

    public List<Row> Rows { get; set; }
}

public abstract class Row
{
    protected Row()
    {
        this.Label = string.Empty;
        this.Type = string.Empty;
    }

    public string Label { get; set; }

    public string Type { get; set; }
}

    public class SimpleRow : Row
{

    public SimpleRow()
    {
        this.Value = string.Empty;
    }

    public string Value { get; set; }
}

    public class CheckRow : Row
{
    public CheckRow()
    {
        this.CheckedItems = new List<CheckedItem>();
        this.Id = 0;
    }

    public List<CheckedItem> CheckedItems { get; set; }

    public int Id { get; set; }
}

    public class CheckedItem
{
    public CheckedItem()
    {
        this.Title = string.Empty;
        this.Checked = false;
    }

    public string Title { get; set; }

    public bool Checked { get; set; }
} 
```

我设法从一个输入 xml 文件构建我的视图，该文件是我的模型的序列化。但我的问题是，当我更改视图中的某个值并按下保存按钮时，我会在控制器函数中返回一个空参数。

控制器：

```
public class FormController : Controller
{
    // GET: /Form/
    #region Public Methods and Operators

    [Authorize]
    public ActionResult Index(HttpPostedFileBase file)
    {
        this.ViewBag.Title = "Formulaire Collaborateur";

        if (file != null && file.ContentLength > 0)
        {
            return this.View(SerialisationHelper.DeserializeFromStream<Form>(file.InputStream));
        }

        return this.View();
    }

    [HttpPost]
    [Authorize]
    public ActionResult EmailForm(Form updatedForm)
    {
        Form f = updatedForm;  // Empty instance of Form       

        return this.View("Index");
    }
    #endregion
} 
```

我的观点：

```
@model Form
@{
ViewBag.Title = "Index";
}
@using (Html.BeginForm("EmailForm", "Form", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<fieldset>
       @foreach (var row in Model.Rows)
    {
        @Html.Partial("Row", row)
    }
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
<br />
} 
```

此视图调用与我的模型类关联的另一个视图。

如果您需要更多代码，我会发布它。而且，请原谅我的英语，我不是母语人士。

弗洛朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:39:10.613

从您的代码中不清楚您在做什么`@Html.Partial("Row", row)`但无论如何您应该为这种类型制作一个[EditorTemplate](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)`Row`然后使用它：

```
@foreach (var row in Model.Rows)
{
    @Html.EditorFor(m=>row)
} 
```

# ckeditor - 在CKeditor中将句子的第一个字母大写

> ID：11226226
> 
> 赞同：0
> 
> 时间：2012-06-27T12:29:26.060
> 
> 标签：ckeditor, fckeditor

当用户在 CKEditor 内容实例中键入文本时，我希望即时将句子的第一个字母大写。

该策略包括捕获每个击键并在必要时尝试替换它，例如，当插入的字符跟随一个点和一个空格时。我可以捕捉事件，但找不到解析插入符号位置周围字符的方法：

```
var instance = CKEDITOR.instances.htmlarea
instance.document.getBody().on('keyup', function(event) {
    console.log(event);
    // Would like to parse here from the event object...
    event.data.preventDefault();
}); 
```

任何帮助将不胜感激，包括替代策略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:33:52.823

您应该使用`keydown`事件（接近您的建议）：

```
var editor = CKEDITOR.instances.editor1;

editor.document.getBody().on('keydown', function(event) {
    if (event.data.getKeystroke() === 65 /*a*/ && isFirstLetter()) {
        // insert 'A' instead of 'a'
        editor.insertText('A');
        event.data.preventDefault();
    }
}); 
```

现在 - 应该`isFirstLetter()`是什么样子？

1.  您必须从`editor.getSelection().getRanges()`获得插入符号位置开始。
2.  您只对集合中的第一个范围感兴趣。
3.  要从插入符号之前提取文本内容，请使用小技巧：
    *   将范围的开头移动到文档的开头：`range.setStartAt( editor.document.getBody(), CKEDITOR.POSITION_AFTER_START )`，
    *   用于`CKEDITOR.dom.walker`按源顺序遍历 DOM 树，
    *   收集文本节点并找出插入符号之前的内容（是`/\. $/`吗） - 请记住，您必须跳过内联标签并在块标签上停止 - 提示：`false`从`guard`函数返回以停止遍历。

如何使用`walker`on的示例`range`：

```
var range, walker, node;

range = editor.getSelection().getRanges()[0];
range.setStartAt(editor.document.getBody(), CKEDITOR.POSITION_AFTER_START);
walker = new CKEDITOR.dom.walker(range);
walker.guard = function(node) {
    console.log(node);
};

while (node = walker.previous()) {} 
```

现在很少有悲伤的事情了。

*   我们假设您键入时选择为空 - 这不一定是真的。When selection is not collapsed (empty) then you'll have to manually remove its content before calling `insertText`. 您可以使用它`range#deleteContents`来执行此操作。
*   但这还不是全部 - 删除范围的内容后，您必须将插入符号放置在正确的位置 - 这不是微不足道的。基本上您可以使用`range#select`（在 之后的范围内`deleteContents`），但在某些情况下，它可以将插入符号放置在不正确的位置 - 例如段落之间。如果没有关于 HTML+editables+insertions+其他东西的 deeeeeeeep 知识，解决这个问题是不可行的 :)。
*   这个解决方案并不完整——你必须处理`paste`事件、删除内容（可以从句子的开头删除单词）等等。
*   我想还有几个我什至没有想过的其他问题：P。

所以这种方法是不现实的。如果您仍想实现此功能，我认为您应该设置计时器并通过遍历 DOM（您可以`walker`在包含整个文档的范围内使用，或最近键入的文本（很难找到它在哪里））找到从小写字母开始的所有句子并修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-01T06:56:24.803

这就是在 Ckeditor 4 中对我有用的方法。

```
var editor = CKEDITOR.instances.editor1;

editor.document.getBody().on('keydown', function(event) {

    if (event.data.getKeystroke() >= 65 && event.data.getKeystroke()<=91 && encodeURI(this.getText())=="%0A" && this.getText().length==1 ) {
        //uppercase the char
        editor.insertText(String.fromCharCode(event.data.getKeystroke()));
        event.data.preventDefault();
    }
}); 
```

# javascript - Google 地图 API 地理编码 - 附加参数

> ID：11226229
> 
> 赞同：0
> 
> 时间：2012-06-27T12:29:44.073
> 
> 标签：javascript, google-maps-api-3

我有

```
var marker  = geo.geocode({address: adr}, geoc); 
```

在哪里

```
function geoc(results, status) {... 
```

我想为函数**geoc**设置附加参数，但我不知道如何使用三个参数调用**geoc 。**怎么做，请帮忙，我是JS的菜鸟：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:32:39.350

尝试为此使用匿名功能：

```
var marker  = geo.geocode({address: adr}, function(results, status) {
    geoc(results, status, thirdParam);
}); 
```

在你的`geoc`功能中：

```
function geoc(results, status, someParam) {... 
```

# css - 具有 100% 高度的顶部和底部边框 - 怎么样？

> ID：11226236
> 
> 赞同：0
> 
> 时间：2012-06-27T12:30:04.647
> 
> 标签：css

如果主要内容小于 100%，如果内容大于屏幕，我怎么能有一个绝对顶部和底部的顶部和底部边距？

请参阅：http: [//jsfiddle.net/FGBZc/](http://jsfiddle.net/FGBZc/)

（即 7 及以上。）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:44:00.417

使用 box-sizing 将是最简单的。

`box-sizing: border-box`在那个 div 上使用。给它一个`min-height`。`100%`给它你想要`top`的。`border-bottom`

这是小提琴。-> [http://jsfiddle.net/FGBZc/11/](http://jsfiddle.net/FGBZc/11/)

不幸的是，它不适用于ie7。只是ie8+。

要做到这一点，`box-sizing`需要一些额外的元素。这是粘页脚的情况。如果你用谷歌搜索“sticky footer”，你会发现我在下面的小提琴中做了什么。

看看 -> [http://jsfiddle.net/FGBZc/23/](http://jsfiddle.net/FGBZc/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:34:19.807

尝试将其与绝对位置对齐，然后在 CSS 中将底部设置为 0，这样：

```
position: absolute;
bottom: 0; 
```

# android - 在android中单击按钮更改视图的颜色？

> ID：11226238
> 
> 赞同：0
> 
> 时间：2012-06-27T12:30:09.767
> 
> 标签：android, view, buttonclick

这是为了创建一个贺卡应用程序，在这里我必须在单击按钮时更改视图的背景颜色（即卡片的背景）。当我单击标记为红色的按钮时，视图应将其颜色更改为红色。等等。有人可以帮我弄这个吗？

```
 public void myClickHandler(View view) {
    switch (view.getId()) {
      case R.id.btn1:

        layout= (FrameLayout) findViewById(R.id.laidout);
        layout.setBackgroundColor(Color.RED);
        break;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:37:36.163

我不认为你的 myClickHandler 会工作，试试这个：

```
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // your switch case etc...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:55:48.363

您应该在 onClick(View view) 方法而不是 myClickHandler() 中编写代码。并且 id "btn1" 应该是您在 xml 文件中声明的 id 名称。

# scala - 使用 Future.flow 时如何进行错误处理 - CPS 继续传递样式

> ID：11226239
> 
> 赞同：2
> 
> 时间：2012-06-27T12:30:10.363
> 
> 标签：scala, akka

我正在尝试在下面的函数中实现错误处理。我的问题是每次我使用 MyValue 作为参数时，我都需要打开 Future[Either[Exception,MyValue]] 并测试“正确”。

如果 f1 到 f4 中的任何一个失败，策略是让 Future.flow 失败。

一种解决方案是将 Either[Exception,MyValue] 作为参数传递给 funcReturnFutureEitherX()，就像 funcReturnFutureEither3(f2()) 一样，但这只是向下传播错误处理，而不是在主程序 MyFlowFunc() 中处理它。

如何在下面的函数中实现错误处理并保持它运行无阻塞？

```
def MyFlowFunc():Future[(MyValue,MyValue,MyValue,MyValue)] =
    val v = Future.flow {
        // fail flow if below functions fails with a Either.Left() 
        val f1 = funcReturnFutureEither1()   
        val f2 = funcReturnFutureEither2(f1())
        val f3 = funcReturnFutureEither3(f2())
        val f4 = funcReturnFutureEither4(f1())
        val res = (f1(),f2(),f3(),f4())
    }
}
def funcReturnEitherX(val:MyValue):Future[Either[Exception,MyValue]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:05:36.967

如果您使用`scalaz`，以下内容可能会有意义。如果没有，阅读它可能会很有趣：

`Either[L,R]`与 同构`Validation[E,A]`，但后者通常用作`Applicative Functor`. 由于`Future`也是一个应用函子，它们的组合类型`Future[Validation[E, A]]`也是一个应用程序。

然后，您可以使用`|@|`运算符组合参数并将它们传递给无上下文函数。在实践中，您可能需要`Applicative`为`Future`.

**更新**：请参阅[此要点](https://gist.github.com/3005729)以获取示例代码。

# winforms - 在 VC++ 的 Winform 应用程序中单击使用 UI 自动化的按钮

> ID：11226246
> 
> 赞同：1
> 
> 时间：2012-06-27T12:30:22.113
> 
> 标签：winforms, visual-studio-2010, visual-c++, ui-automation

我想单击使用 UI 自动化的按钮。我在 Winform VC++ 中使用 UI 自动化。

这是我的代码..

```
 AutomationElement^  Select_connect_button= aeForm->FindFirst(TreeScope::Children,gcnew PropertyCondition(AutomationElement::NameProperty, "Select/Connect"));
InvokePattern^ ipClickButton1 = (InvokePattern)Select_connect_button->GetCurrentPattern(InvokePattern::Pattern);
 ipClickButton1->Invoke(); 
```

但它显示这些错误：

```
error C2440: 'type cast' : cannot convert from 'System::Object ^' to 'System::Windows::Automation::InvokePattern'

error C2440: 'initializing' : cannot convert from 'System::Windows::Automation::InvokePattern' to 'System::Windows::Automation::InvokePattern ^' 
```

谁能帮我解决这些错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:08:52.350

构建错误是您将 (InvokePattern) 转换为“InvokePattern^”。

在我的测试中，将第二行更新为以下代码将解决此问题：

> InvokePattern^ ipClickButton1 = ( **InvokePattern^** )Select_connect_button->GetCurrentPattern(InvokePattern::Pattern);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:26:18.743

您不能使用这些对象进行投射。这是在 C# 中执行此操作的一种方法。您可以在此处获取方法名称等。您需要的各种常量类似于：

C:\Program Files\Microsoft SDKs\Windows\v7.0\Include\UIAutomationClient.h（可能是 v7.1 目录）

```
public static IUIAutomationInvokePattern elementToInvokePattern(this IUIAutomationElement element)
    {
        var conditionInvokePattern = auto.CreatePropertyCondition(
                                                        WindowsConstants.UIA_IsInvokePatternAvailablePropertyId,
                                                        true);

        var cacheRequest = auto.CreateCacheRequest();
        cacheRequest.AddPattern(WindowsConstants.UIA_InvokePatternId);

        var cachedElement = element.FindFirstBuildCache(TreeScope.TreeScope_Element,
                                            conditionInvokePattern,
                                            cacheRequest);

        var invokePattern = (IUIAutomationInvokePattern)
            cachedElement.GetCachedPattern(WindowsConstants.UIA_InvokePatternId);
        return invokePattern;
    } 
```

看起来示例中的常量来自这里：http: [//msdn.microsoft.com/en-us/library/dd757483.aspx](http://msdn.microsoft.com/en-us/library/dd757483.aspx)

# python - Python：忽略 elementtree.ElementTree 中的 xmlns

> ID：11226247
> 
> 赞同：16
> 
> 时间：2012-06-27T12:30:26.360
> 
> 标签：python, xml, xml-namespaces, elementtree

有没有办法忽略标签名称中的 XML 命名空间`elementtree.ElementTree`？

我尝试打印所有`technicalContact`标签：

```
for item in root.getiterator(tag='{http://www.example.com}technicalContact'):
        print item.tag, item.text 
```

我得到类似的东西：

```
{http://www.example.com}technicalContact blah@example.com 
```

但我真正想要的是：

```
technicalContact blah@example.com 
```

有没有办法只显示后缀（sans xmlns），或者更好 - 在不明确说明 xmlns 的情况下迭代元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T13:25:56.807

您可以定义一个生成器以递归方式搜索元素树，以便找到以适当标签名称结尾的标签。例如，像这样：

```
def get_element_by_tag(element, tag):
    if element.tag.endswith(tag):
        yield element
    for child in element:
        for g in get_element_by_tag(child, tag):
            yield g 
```

这只是检查以 结尾的标签`tag`，即忽略任何前导命名空间。然后，您可以遍历所需的任何标签，如下所示：

```
for item in get_element_by_tag(elemettree, 'technicalContact'):
    ... 
```

这个生成器在运行：

```
>>> xml_str = """<root xmlns="http://www.example.com">
... <technicalContact>Test1</technicalContact>
... <technicalContact>Test2</technicalContact>
... </root>
... """

xml_etree = etree.fromstring(xml_str)

>>> for item in get_element_by_tag(xml_etree, 'technicalContact')
...     print item.tag, item.text
... 
{http://www.example.com}technicalContact Test1
{http://www.example.com}technicalContact Test2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:00:24.257

我总是最终使用类似的东西

```
item.tag.split("}")[1][0:] 
```

# python - python -c 和 `while`

> ID：11226252
> 
> 赞同：8
> 
> 时间：2012-06-27T12:30:45.187
> 
> 标签：python, windows, linux, command-line

`while`如果你用 启动脚本，有没有办法循环`python -c`？这似乎与平台或python版本无关......

**Linux**

```
[mpenning@Hotcoffee ~]$ python -c "import os;while (True):    os.system('ls')"
  File "<string>", line 1
    import os;while (True):    os.system('ls')
                  ^
SyntaxError: invalid syntax
[mpenning@Hotcoffee ~]$
[mpenning@Hotcoffee ~]$ python -V
Python 2.6.6
[mpenning@Hotcoffee ~]$ uname -a
Linux Hotcoffee 2.6.32-5-amd64 #1 SMP Sun May 6 04:00:17 UTC 2012 x86_64 GNU/Linux
[mpenning@Hotcoffee ~]$ 
```

**视窗**

```
C:\Users\mike_pennington>python -c "import os;while True: os.system('dir')"
  File "<string>", line 1
    import os;while True: os.system('dir')
                  ^
SyntaxError: invalid syntax

C:\Users\mike_pennington>python -V
Python 2.7.2

C:\Users\mike_pennington> 
```

我曾尝试删除`while`语句中的括号，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T12:37:32.357

```
python -c $'import subprocess\nwhile True: subprocess.call(["ls"])' 
```

会工作（注意`$'...'`和`\n`）。

但它可能只适用于[bash](/questions/tagged/bash "显示标记为“bash”的问题") - 我不确定......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T12:34:20.457

多行语句可能不会`;`在 Python 中的语句分隔之后开始 - 否则，代码块可能会出现歧义。只需使用换行符代替`;`. 这在 Linux 上“有效”：

```
$ python -c "import os
while True: os.system('ls')" 
```

`.py`不知道如何在 Windows 上输入它，但如果它不止一行，为什么不简单地将命令写入文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T12:34:30.057

不了解windows，如果你想要的只是能够输入单行，你可以考虑引号内的换行符：

```
% python -c "import os;
while (True):
  os.system('ls')" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T12:48:35.497

如果您真的必须在 Windows 中执行此操作，您可以使用 exec：

```
python -c "exec \"import os;\rwhile True:\r  os.system('dir')\"" 
```

（我替换`dir`了它，所以它可以在我的 Windows 系统上运行）

# ui-automation - 如何在整个屏幕上查找图像？

> ID：11226254
> 
> 赞同：0
> 
> 时间：2012-06-27T12:30:48.857
> 
> 标签：ui-automation, ranorex

是否可以单击不在特定容器元素中的图像？

当我确实有一个容器时，我会使用这样的东西：

```
MyRepo.AnyForm.AnyElement.Click(new Location(Imaging.Load(anyPicture.bmp))); 
```

这很好用。但是现在，我想单击 Ranorex 无法识别的上下文菜单中的菜单项。所以我想让 Ranorex 轻松地在整个屏幕上搜索目标图像。像这样的东西：

```
AnyElementThatRepresentsTheWholeScreen.Click(new Location(Imaging.Load(anyPicture.bmp))) 
```

谢谢和问候，fahexot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:04:21.710

我已经找到了。如果有人有同样的问题，这里的解决方案：

```
Host.Local.Click(new Location(Imaging.Load(anyPicture.bmp))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:53:45.847

我在 GridItem 中有图像。我能够找到 GridItem 和 Image。我无法从我的 UI 自动化示例中单击它。我在 C++ 中进行操作

```
IUIAutomationElement* p1
.......
.......
POINT clickable;
BOOL gotClickable; 
hr = p1->GetClickablePoint(&clickable,&gotClickable);

mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP,clickable.x,clickable.y,0,0); 
```

# android - 为什么 ItemizeOverlay 产生 ArrayOutOfBoundException 并不总是出现这个问题？

> ID：11226257
> 
> 赞同：0
> 
> 时间：2012-06-27T12:30:59.870
> 
> 标签：android, google-maps

我在谷歌地图上显示 POI 的列表为：-

1- 用户放大或缩小 Web 服务调用，响应特定位置的属性 xml。

2- 获得属性后，我们必须过滤那些具有相同纬度、经度的属性，并在地图上的气泡上显示这些数字（比如 3 个列表具有相同的纬度，长将该列表放入 arrayList 并显示在气泡 3 上）。

3-但是当我很少不总是在发生异常后缩放地图时：

```
 06-27 15:10:57.269: E/AndroidRuntime(4968): FATAL EXCEPTION: main
  06-27 15:10:57.269: E/AndroidRuntime(4968): java.lang.ArrayIndexOutOfBoundsException: index=0 length=0
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at com.google.android.maps.ItemizedOverlay.getIndexToDraw(ItemizedOverlay.java:211)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at com.google.android.maps.ItemizedOverlay.draw(ItemizedOverlay.java:240)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at com.google.android.maps.Overlay.draw(Overlay.java:179)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at com.google.android.maps.MapView.onDraw(MapView.java:530)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.View.draw(View.java:9304)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.drawChild(ViewGroup.java:2586)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
  06-27 15:10:57.269: E/AndroidRuntime(4968):   at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.drawChild(ViewGroup.java:2584)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2189)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.View.draw(View.java:9307)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.widget.FrameLayout.draw(FrameLayout.java:419)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2076)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewRoot.draw(ViewRoot.java:1706)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1420)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2066)
 06-27 15:10:57.269: E/AndroidRuntime(4968):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at android.os.Looper.loop(Looper.java:132)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at android.app.ActivityThread.main(ActivityThread.java:4126)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at java.lang.reflect.Method.invokeNative(Native Method)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at java.lang.reflect.Method.invoke(Method.java:491)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
06-27 15:10:57.269: E/AndroidRuntime(4968):     at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用这段代码：-`

```
 mapView.setOnTouchListener(new OnTouchListener() {

private class Mapdatatask extends AsyncTask<Void, Void, Integer> {

    @Override
    protected Integer doInBackground(Void... params) {

        try 
        {
            StringBuilder sb=new StringBuilder();  
            URL sourceUrl=new URL(ListURL);
            System.out.println("----ListURL------"+ListURL);
            InputStream inputStream=sourceUrl.openStream();  
            //add if necessary the PushBack measure to safeguard the intended purpose here if really happening  
            //that you can actually ascertain it by saving a local copy for inspection  
            BufferedReader br=new BufferedReader(new InputStreamReader(inputStream));  
            String line;  
            while ((line=br.readLine())!=null) {  
                sb.append(line+"\n");  
            }  
            br.close(); 

            SAXParserFactory spff=SAXParserFactory.newInstance();
            spff.setNamespaceAware(true); 
            SAXParser spp=spff.newSAXParser();
            XMLReader xr=spp.getXMLReader();
            myHandler=new ApplicationHandler();
            xr.setContentHandler(myHandler);
            xr.parse(new InputSource(new StringReader(sb.toString())));  
            //xr.parse(new InputSource(sourceUrl.openStream()));
            valueoftotal = ApplicationHandler.value;

        }
        catch(IOException e) {
            e.printStackTrace();
        } catch (SAXException e) {

            try 
            {
                StringBuilder sb=new StringBuilder();  
                URL sourceUrl=new URL(ListURL);
                InputStream inputStream=sourceUrl.openStream();  
                //add if necessary the PushBack measure to safeguard the intended purpose here if really happening  
                //that you can actually ascertain it by saving a local copy for inspection  
                BufferedReader br=new BufferedReader(new InputStreamReader(inputStream));  
                String line;  
                while ((line=br.readLine())!=null) {  
                    sb.append(line+"\n");  
                }  
                br.close(); 
                inputStream.close();
                SAXParserFactory spff=SAXParserFactory.newInstance();
                spff.setNamespaceAware(true); 
                SAXParser spp=spff.newSAXParser();
                XMLReader xr=spp.getXMLReader();
                Log.e("ListURL to parse ",""+ListURL);

                myHandler=new ApplicationHandler();
                xr.setContentHandler(myHandler);
                System.out.println(""+sb);
                xr.parse(new InputSource(new StringReader(sb.toString())));  
                //xr.parse(new InputSource(sourceUrl.openStream()));
                valueoftotal = ApplicationHandler.value;
                //arrayList = myHandler.getParsedData();

            }
            catch(IOException e1) {
                e1.printStackTrace();
                Log.e("parse exception0"," dont know why");
                Log.e("XML Error ",e.toString());

        return 1;

    }

    @Override
    protected void onPostExecute(Integer result) 
    {
        if(valueoftotal!=null && !valueoftotal.equalsIgnoreCase(""))
        {
            if(Integer.parseInt(valueoftotal) > 0 && Integer.parseInt(valueoftotal) <= 100)
            {
                OverlayItem oi=null;
                if(myHandler.getParsedData()!=null)
                {
                    ArrayList<Applicationdataset> arrayList = myHandler.getParsedData();
                    //mlist = new ArrayList<Applicationdataset>();
                    myvectorlist = new Vector<ArrayList<Applicationdataset>>();
                    //mlist.addAll(arrayList);
                    System.out.println(arrayList.size()+"++++++++++");
                    Map<Key, ArrayList<Applicationdataset>> mlistVector = groupTheList(arrayList);
                    myvectorlist = putIntoVector(mlistVector);
                    for(int mindex=0;mindex<myvectorlist.size();mindex++)
                    {
                        if(myvectorlist.get(mindex)==null)
                        {
                            myvectorlist.remove(mindex);
                        }
                        if(myvectorlist.get(mindex).size()==0)
                        {
                            myvectorlist.remove(mindex);
                        }
                    }
                }
                linearbottom2.setClickable(true);
                synchronized (oi) {
                    mapOverlays.clear();
                    overlay.removeAll();
                }

                lineartabbar.setBackgroundResource(R.drawable.mapbar);

                if(myvectorlist != null && myvectorlist.size() > 1)
                {
                    Applicationdataset data = null;
                    for(int i = 0; i < myvectorlist.size(); i++)
                    { 
                        {
                            data = myvectorlist.get(i).get(0);
                            String latvalue = data.getLatitude().toString();
                            String lonvalue = data.getLongitude().toString();

                            GeoPoint point = null;
                            try
                            {
                                point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                            }
                            catch (NumberFormatException e) 
                            {
                            }

                            if(point != null)
                            {
                                oi = overlay.createItem(i);
                                if(overlay!=null)
                                {
                                  if(oi!=null)
                                  {
                                      System.out.println("overlay.size()--"+overlay.size());
                                    if(overlay.size()!=0) 
                                    {
                                        overlay.addItem(oi);

                                        if(myvectorlist.size() == 1)
                                        {
                                            mc.animateTo(point);
                                            mc.setCenter(point);
                                            mc.setZoom(16);
                                        }   
                                    }
                                  }

                                }//end
                            }

                    }

                    System.out.println("+++size of overlay++++"+overlay.size());

                    mapOverlays.add(overlay);

                    mapView.invalidate();
                }

                textViewpopup.setText(valueoftotal+" listings found.");
                linearlayoutpopup.setVisibility(View.VISIBLE);
                RunAnimationslisting();

            }
            else if(Integer.parseInt(valueoftotal) > 100)
            {

                Eyelidmessage(valueoftotal+" listings found. \n Zoom-in, press the locate button below or select the refine button above to display fewer properties. ");
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);                  

            }
            else if(Integer.parseInt(valueoftotal) == 0)
            {
                GoneAnimations();
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);
                customizeDialog = new CustomizeDialog(activity);  
                customizeDialog.setTitle("Sorry");  
                customizeDialog.setMessage("No Listing Found");  
                customizeDialog.show();
            }
        }

        super.onPostExecute(result);
    }

    @Override
    protected void onCancelled() {
        currenttask = null;
    }

}

private  class GoogleMapViewOverlay extends ItemizedOverlay 
{
    ImageButton bluebutton,savebutton,closebutton;

    ImageThreadLoader imageloader;

    //final MapController mc;
    TextView text1,text2,text3,text4,textup;
    ImageView imageview;

    private PopupPanel panel = new PopupPanel(R.layout.mappopup);
    private Drawable marker;
    private Context mContext;

    public GoogleMapViewOverlay(Drawable drawable, MapView mapView,
            Activity activity2)
    {
        //super(drawable);
        super(boundCenterBottom(drawable));
        setLastFocusedIndex(-1);
        populate();         

        items = new ArrayList<OverlayItem>();
        marker = drawable;
        mContext = mapView.getContext();
        mc = mapView.getController();
        this.activity = activity2;
        DB = new DatabaseHelper(activity2);
    }

    public void removeAll()
    {
        items.clear();
        setLastFocusedIndex(-1);
        populate();
    }       

    @Override
    protected OverlayItem createItem(int index) 
    {
        Projection getcoords;
        GeoPoint point = null;
        int size =0;
        String latvalue="";
        String lonvalue="";
        Point pcon = new Point(0,0);
        getcoords = mapView.getProjection();

        if(myvectorlist!=null)
        {
            if(myvectorlist.size()!=0)
            {
            size = myvectorlist.get(index).size();
            latvalue = myvectorlist.get(index).get(0).getLatitude().toString();
            lonvalue = myvectorlist.get(index).get(0).getLongitude().toString();    
            }
        }

        try
        {
            point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
        }
        catch (NumberFormatException e)
        {
            e.printStackTrace();
        }

        if(getcoords!=null)
        {
            if(point!=null)
            {
                if(pcon!=null)
                {
                    getcoords.toPixels(point, pcon);        
                }                   
            }               
        }

        OverlayItem oi = new OverlayItem(point,"", "");
        if(size == 1)
         {
            boundCenterBottom(drawable);                
            oi.setMarker(drawable);
        }else
        if(size>1) 
        {
            Drawable d= writeOnDrawable(drawable1,size);
            boundCenterBottom(d);//drawable1                
            oi.setMarker(d);//drawable1 
        }

        return oi;
    }

    @Override
    public int size() 
    {
        //Log.e("","items.size()"+items.size());
        if (items != null && items.size() > 0)
            return items.size();
        else 
            return 0;       
    }

    public void addItem(OverlayItem item) 
    {
        System.out.println("adddoverlayitem "+items+"\titem"+item);
        try {

            items.add(item);
            setLastFocusedIndex(-1);
            populate();
        } catch (NullPointerException e) {

            e.printStackTrace();
        }
    }

class PopupPanel
  {
    // View popup;
     PopupPanel(int layout)
       {
        ViewGroup parent=(ViewGroup)mapView.getParent();
        popup = getLayoutInflater().inflate(layout, parent, false);
        }
    View getView() {
        return(popup);
    }

    void show(boolean alignTop)
    {
        popup.setVisibility(View.VISIBLE);
        RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT
        );

        if (alignTop) 
        {
            lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);            

            lp.setMargins(65, 100, 0, 0);

        }
        else
        {
            lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
            lp.setMargins(0, 0, 0, 60);
        }

        hide();

        ((ViewGroup)mapView.getParent()).addView(popup, lp);            

        isVisible=true;

    }

    void hide() {

        if (isVisible)
        {
            isVisible=false;
            ((ViewGroup)popup.getParent()).removeView(popup);
        }
    }
}

public void Eyelidmessage(String message)
{
    textViewpopup.setText(message);
    linearlayoutpopup.setVisibility(View.VISIBLE);              
    RunAnimations();
}

private void RunAnimationslisting() {

    Animation a;
    a = AnimationUtils.loadAnimation(this, R.anim.translate);
    a.reset();

    linearlayoutpopup.clearAnimation();
    a.setFillAfter(true);
    linearlayoutpopup.startAnimation(a);

    a.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            System.out.println("@@doneanimation listner works 1@@");

            try {
                Thread.sleep(2000);
                GoneAnimationslisting();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationStart(Animation animation) {

        }

    });

}

private void GoneAnimationslisting() {

    Animation a1;
    a1 = AnimationUtils.loadAnimation(this, R.anim.translate1);
    a1.reset();

    linearlayoutpopup.clearAnimation();
    a1.setFillAfter(true);
    linearlayoutpopup.startAnimation(a1);

    a1.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            System.out.println("@@doneanimation listner works 1@@");

            linearlayoutpopup.setVisibility(View.GONE);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationStart(Animation animation) {

        }
    });
}

private Drawable writeOnDrawable(Drawable objdrawable, int size)
 {
    String text = ""+size;
    Bitmap bitmap = ((BitmapDrawable)objdrawable).getBitmap().copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.WHITE); 
    paint.setTypeface((Typeface.defaultFromStyle(Typeface.BOLD)));
    paint.setTextSize(20);
    float txtwidth = paint.measureText(text);

    Canvas canvas = new Canvas(bitmap);

   // canvas.drawText(text, 0, , paint);
    canvas.drawText(text,((bitmap.getWidth()/2)-(txtwidth/2)),bitmap.getHeight()/2, paint);

    Drawable d =new BitmapDrawable(getResources(),bitmap);
    return d;
}

private Map<Key, ArrayList<Applicationdataset>> groupTheList(ArrayList<Applicationdataset> arrayList) {
    Map<Key, ArrayList<Applicationdataset>> map = new HashMap<Key, ArrayList<Applicationdataset>>();
    for (Applicationdataset appSet : arrayList) {
        Key key = new Key(appSet.getLatitude(), appSet.getLongitude());
        ArrayList<Applicationdataset> list = map.get(key);
        if (list == null) {
            list = new ArrayList<Applicationdataset>();
            map.put(key, list);
        }
        list.add(appSet);
    }
    return map;
}

public class Key {
    String _lat;
    String _lon;

    Key(String lat, String lon) {
        _lat = lat.trim();
        _lon = lon.trim();
    }

    @Override
    public boolean equals(Object o) {
        //if (this == o) return true;
       // if (o == null || getClass() != o.getClass()) return false;

        //Key key = (Key) o;

        //if (!_lat.equals(key._lat)) return false;
        //if (!_lon.equals(key._lon)) return false;
        return o instanceof Key
        && (_lat.equals(((Key)o)._lat))
        && (_lon.equals(((Key)o)._lon));

        //return true;
    }

    @Override
    public int hashCode() {

        return _lat.hashCode() + _lon.hashCode();

    }
}

private Vector<ArrayList<Applicationdataset>> putIntoVector(Map<Key, ArrayList<Applicationdataset>> myMap)
 {
    Vector<ArrayList<Applicationdataset>> mvectorlist = new Vector<ArrayList<Applicationdataset>>();
    Iterator<Entry<Key, ArrayList<Applicationdataset>>> miterator = myMap.entrySet().iterator();
    while (miterator.hasNext()) {
        Map.Entry<Key, ArrayList<Applicationdataset>> pairs = (Map.Entry<Key, ArrayList<Applicationdataset>>)miterator.next();
        mvectorlist.add(pairs.getValue());
        miterator.remove(); // avoids a ConcurrentModificationException
    }

    return mvectorlist;

}
} 
```

任何人都可以帮助我，直到现在我已经花了大约 10 个小时才能解决这个问题，请看这个..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:41:26.643

`java.lang.ArrayIndexOutOfBoundsException: index=0 length=0``ArrayList`表示当大小为零时您正试图访问 an 的元素。回顾您的代码并确保您没有尝试访问空列表。

**编辑：**

好的，我想我知道你的问题是什么。我认为您正在`createItem`尝试将叠加层添加到您的`ItemizedOverlay`. 这个函数名字不好，实际上并没有创建一个项目。它只是从您的数组中返回一个项目`OverlayItems`。您需要使用`GoogleMapViewOverlay.addOverlay(OverlayItem)`才能真正添加`OverlayItem`​​到地图中。尝试使用随机坐标创建一对测试叠加层，看看是否可行。记住停止使用`createItem()`并开始使用`addItem()`。如果这不是您的问题，请发布您的所有代码，也许我们可以为您提供更好的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:45:01.820

我不确定在您的代码中的哪一点出现错误，但您可以尝试更改：

```
if (size == 1) {
} else {
} 
```

到：

```
if (size == 1) {
} else if (size > 1) {
} 
```

这可能会摆脱您的 ArrayIndexOutOfBoundsException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T06:25:59.567

花更多时间后，由于这篇文章，我已经解决了我的问题：- [异步任务抛出 ConCurrent 修改异常？](https://stackoverflow.com/q/11257003/1417177)

# search - 如何在 wiki 页面上制作可搜索的“文本/内容”？

> ID：11226258
> 
> 赞同：0
> 
> 时间：2012-06-27T12:31:00.343
> 
> 标签：search, search-engine, wiki, meta-tags, wikipedia

我在 Wiki 上创建了一个页面，我想通过 wiki 搜索选项使该页面的内容可搜索。

维基意味着维基百科

即页面的标题/标题是“ABCDEFG”。如果有人在 wiki 搜索中搜索“ABCD”，则该页面应出现在搜索列表中。

可能通过在 wiki 页面中添加标签来实现，但我不知道如何在 wiki 中添加元标签。或者有人知道其他方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:43:31.893

将搜索页面中的所有内容（标题和内容），因此当您的页面包含该单词时，就会找到它。

您可以通过创建从 ABCD 到 ABCDEFG 的重定向来强制查找，尽管当重定向标题是实际标题的第一部分时它是无用的 - 人们会通过搜索自动完成/建议找到它。

请注意，新创建页面的索引可能需要一些时间，尤其是在像 Wikipedia 这样的大型 wiki 上。保存页面后，您的页面可能无法立即找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:34:00.040

为了以这种方式找到，页面必须在其标题或内容中包含 ABCD。当然，如果用户搜索 ABCD*，他们会找到它，但实际上没有人这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:27:47.283

以下页面帮助我解决了我的问题。

[http://www.imagwiki.nibib.nih.gov/mediawiki/index.php?title=Creating_a_New_Wiki_Page](http://www.imagwiki.nibib.nih.gov/mediawiki/index.php?title=Creating_a_New_Wiki_Page)

# java - 对于两组不同的日期，joda time api 的行为不同

> ID：11226260
> 
> 赞同：4
> 
> 时间：2012-06-27T12:31:10.297
> 
> 标签：java, jodatime

两个不同的代码片段（有微小的变化）在 joda time api 的计算中显示了一些错误：

**第一个：给出正确的结果**

```
DateTime date1 = new DateTime(2010,1,5, 0, 0, 0, 0);
DateTime date2 = new DateTime(2012,6,11, 0, 0, 0, 0);
Period age =new  Period(date1,date2);
System.out.println(age.getYears()+" years "+age.getMonths()+" months "+age.getDays()+" days"); 
```

**给出结果：** `2 years 5 months 6 days`

**第二个：给出不正确的结果**

> **代码段更改**： DateTime date2 = new DateTime(2012,6, **12** , 0, 0, 0, 0);

```
DateTime date1 = new DateTime(2010,1,5, 0, 0, 0, 0);
DateTime date2 = new DateTime(2012,6,12, 0, 0, 0, 0);
Period age =new  Period(date1,date2);
System.out.println(age.getYears()+" years "+age.getMonths()+" months "+age.getDays()+" days"); 
```

**给出结果：** `2 years 5 months 0 days`

这是计算错误还是我缺少一些配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:42:56.057

我相信这是因为 7 天现在是 1 周。发生的情况是，将始终使用封装剩余部分的最大可能时间值。

IE 如果你有 8 天，这是 1 周 1 天。如果您有 294 天（取决于开始日期），则为 1 年、1 个月、1 周和 1 天。ETC...

所以你需要的是这样的：

System.out.println(age.getYears()+"年"+age.getMonths()+"月"+(age.getWeeks()*7+age.getDays())+"天");

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:40:09.347

发生的事情是你已经滚动了一周。我想如果你尝试“2012,6,13,0,0,0,0”作为你的输入，你会得到一个`...1 days`结果。

添加调用以`getWeeks`使您的输出更清晰。将您的 println 更改为：

```
System.out.println(age.getYears()+" years "+age.getMonths()+" months "+age.getWeeks()+" weeks "  + age.getDays()+" days"); 
```

# php - Cakephp Js 助手

> ID：11226263
> 
> 赞同：1
> 
> 时间：2012-06-27T12:31:23.373
> 
> 标签：php, cakephp

我正在使用 Js 助手帮助我将 index.ctp 中“div”的内容替换为另一个文件 changeto.ctp 的内容。

此应用程序有几个带有相应图像的复选框。当我选择一个复选框时，设置存储在数据库中，并显示相应的图像。同样，当未选中时，它将从数据库中删除，并且图像应该消失。

我为此使用 Js 助手：

我的 changeto.ctp 是我的 index.ctp 的子集，可以毫无问题地访问相同的变量和加载（除了没有响应任何单击/更改事件。复选框的 Id 名称完全相同）。

我的索引文件在所有 Html 的底部包含以下 Js 代码：

```
$this->Js->get($change_checkbox1 )->event('click',
            $this->Js->request(array(
            'controller'=>'testing',
            'action'=>'changeto'
            ), array(
            'update'=>'#changeDiv',
            'async' => true,
            'method' => 'post',
            'dataExpression'=>true,
            'data'=> $this->Js->serializeForm(array(
                    'isForm' => false,
                    'inline' => true
                    ))
            ))

    ); 
```

这正在生成以下 Jquery/javascript

```
 $(document).ready(function () {$("#ck0_1_8").bind("click", function (event)      {$.ajax({async:true, data:$("#ck0_1_8").closest("form").serialize(), dataType:"html", success:function (data, textStatus) {$("#changeDiv").html(data);}, type:"post",   url:"\/mytest-site\/options\/testing"});
        return false;});

} 
```

我的控制器有一个名为

```
 changeto()
    {

     $this->layout = 'ajax';
    } 
```

我第一次单击此复选框时，它可以正常工作。但是，任何后续点击都不起作用。甚至没有调用 javascript。

我的问题是：

有任何想法吗 ？如果我以某种方式要求 cakephp 在 bind() 中使用 on() / live() 会有所帮助。如果是的话，如何？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:49:05.797

通过编辑 cakephp 核心文件解决了这个问题：

```
lib/Cake/View/Helper/JqueryEngineHelper.php 
```

第 184 行：更改

```
return sprintf('%s.bind("%s", %s);', $this->selection, $type, $callback); 
```

至

```
return sprintf('%s.live("%s", %s);', $this->selection, $type, $callback); 
```

蛋糕版 2.2.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T14:54:24.603

你必须使用`on`而不是`bind`他们在这个问题中建议的[.live() vs .bind()](https://stackoverflow.com/questions/2690370/live-vs-bind)

`Helper`这就是我所做的就是在`View/Helper`添加以下方法时创建自己的：

```
public function onEvent($selector, $type, $callback, $options = array()) {
    $defaults = array('wrap' => true, 'stop' => true);
    $options = array_merge($defaults, $options);
    $function = 'function (event) {%s}';

    if ($options['wrap'] && $options['stop']) {
        $callback .= "\nreturn false;";
    }

    if ($options['wrap']) {
        $callback = sprintf($function, $callback);
    }
    return sprintf('$(document).on("%s", "%s", %s);', $type, $selector, $callback);
} 
```

并从我的观点使用该方法：

```
echo $this->MyJs->onEvent('#creditcards', 'change', $eventCode, array('stop' => false)); 
```

# c# - 带有 Ninject 拦截、Castle DynamicProxy 和 WPF 窗口的 AOP：在窗口的 DynamicProxy 中找不到 XAML 资源

> ID：11226271
> 
> 赞同：3
> 
> 时间：2012-06-27T12:31:37.300
> 
> 标签：c#, wpf, ninject, aop, ninject-interception

在我们的实际应用程序中，我们定义了一个属性，用于启用方法或类的日志记录（通常的 AOP 用例）。当我们将此属性应用于 WPF 窗口类时，Ninject 无法创建此类的对象。这是重现该问题的最小示例：

**用于日志记录的虚拟拦截器：**

```
public class MyInterceptor: IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        Console.WriteLine("Calling {0} at {1}", invocation.Request.Method.Name, DateTime.Now);
        invocation.Proceed();
    }
} 
```

**对应的属性：**

```
public class MyAttribute: InterceptAttribute
{
    public override IInterceptor CreateInterceptor(IProxyRequest request)
    {
        return new MyInterceptor();
    }
} 
```

**窗口类（完全为空，里面只有自动生成的空网格）：**

```
[My]
public partial class MainWindow: Window 
{
    public MainWindow()
    {
        InitializeComponent();
    }
} 
```

**最后是请求对象的应用程序启动代码：**

```
public partial class App: Application
{
    private void Application_Startup(object sender, StartupEventArgs e)
    {
        var kernel = new StandardKernel(new NinjectSettings() { LoadExtensions = false }, new DynamicProxyModule());
        var window = kernel.Get<MainWindow>();
        window.ShowDialog();
    }
} 
```

`kernel.Get<MainWindow>();`当通过an请求窗口时，`TargetInvocationException`会抛出一个内部异常，告诉我`Castle.Proxies.MainWindowProxy`没有由 URI 指定的资源，我们的程序集的短名称`"/NinjectInterceptionWPF;component/mainwindow.xaml"`在哪里。`NinjectInterceptionWPF`

当我们查看自动创建`InitializeComponent`的时，`MainWindow`我们可以看到创建了一个 URI 来处理 XAML 代码，而代理似乎缺少该 URI：

```
System.Uri resourceLocater = new System.Uri("/NinjectInterceptionWPF;component/mainwindow.xaml", System.UriKind.Relative);
#line 1 "..\..\..\MainWindow.xaml"
System.Windows.Application.LoadComponent(this, resourceLocater); 
```

我已经玩了一点，并尝试使用绝对 URI，但`LoadComponent`只接受相对 URI。

一些互联网搜索表明，很多人使用 Ninject Interception 和 DynmaicProxy 进行 WPF 绑定（INotifyPropertyChanged），所以我认为总的来说应该可以构建 WPF 窗口的代理。

但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:18:28.200

Ninject 的拦截扩展创建了一个新的动态程序集。这意味着您将无法使用相对路径加载资源。但这里的问题是你是否真的想为视图创建一个动态代理。通常你应该在你的 ViewModel 上这样做。

# javascript - 未在 html 表中读取 JavaScript DOM

> ID：11226283
> 
> 赞同：1
> 
> 时间：2012-06-27T12:32:19.333
> 
> 标签：javascript, html, dom, html-table

我从 JSON 数据生成一个 int

```
var f_page = ["TheHouseofMarley"];

retrieveData(f_page[0]);

function retrieveData(teamName) {               
    var baseURL = 'http://graph.facebook.com/';
    $.getJSON(baseURL+teamName+"&callback=?", function(data) {
    $('#FBlikes').append(data.likes)
        });
    }; 
```

这行得通，它给了〜8407

我有一个从 <table id="chartData"> 读取数据的图表

从表中获取数据我使用 jQuery 选择器 - $('#chartData td') - 来选择表中的所有数据单元格。然后我可以使用 jQuery each() 方法遍历这些单元格。对于每个单元格，我根据它是在左列还是右列来确定它是标签（例如“SuperWidget”）还是值（例如“FBLike”）单元格。然后，我将单元格内容存储在关联数组中的“标签”或“值”键下，然后我们将其放置在 chartData 数组中。

```
$('#chartData td').each( function() {
  currentCell++;
  if ( currentCell % 2 != 0 ) {
    currentRow++;
    chartData[currentRow] = [];
    chartData[currentRow]['label'] = $(this).text();
  } else {
   var value = parseFloat($(this).text());
   totalValue += value;
   value = value.toFixed(2);
   chartData[currentRow]['value'] = value;
  }

  // Store the slice index in this cell, and attach a click handler to it
  $(this).data( 'slice', currentRow );
  $(this).click( handleTableClick ); 
```

问题是当我将此数字插入 <table id="chartData"> 时，图表不会读取它！

```
<table id="chartData">

<tr style="color: #0DA068">
  <td>Number of Likes </td><td><span id='FBlikes'></span> </td> //Not Read!
</tr>

<tr style="color: #194E9C">
  <td>MegaWidget</td><td>20000</td> //This is Read by the Chart!
</tr> 
```

简而言之：没有从 HTML 表中读取 Javascript 输出。有人能指出我的方向吗？我对代码真的很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:37:45.763

通常这个问题发生在 Ajax 中。

构建一个附加“data.likes”的字符串。然后最后将字符串分配给元素。

这听起来绝对愚蠢，但它对我有用。每当我使用 ajax 响应字符串在 jQuery 中动态构建表时，我永远不会得到表。然后我按照我提到的程序进行。

如果我的解决方案有效，请有人帮助我理解为什么会这样。

# lisp - 打印分成 X 列的长列表

> ID：11226284
> 
> 赞同：2
> 
> 时间：2012-06-27T12:32:19.380
> 
> 标签：lisp, format, common-lisp

有没有办法做到这一点：

```
(defvar long-list ((1 1 1 1) (2 2 2 2) (3 3 3 3)
        (4 4 4 4) (5 5 5 5) (6 6 6 6))
(format t "magic" long-list) 
```

输出类似的东西：

```
(1 1 1 1) (2 2 2 2) (3 3 3 3)
(4 4 4 4) (5 5 5 5) (6 6 6 6) 
```

我将在哪里定义要打印的列数？

我知道`(format t "~/my-function/" long-list)`选项，但也许有一些内置的东西？

该参考资料对这个特定主题非常无用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:50:50.660

好的，对不起，我实际上找到了它：[http](http://www.lispworks.com/documentation/lw51/CLHS/Body/f_ppr_fi.htm#pprint-tabular) ://www.lispworks.com/documentation/lw51/CLHS/Body/f_ppr_fi.htm#pprint-tabular但在我找到它之前，我写了这个：

```
(defun pplist-as-string (stream fmt colon at)
  (declare (ignore colon at))
  (dolist (i fmt)
    (princ i stream)))

(defun ppcolumns (stream fmt colon at cols)
  (declare (ignore at colon))
  (when (or (not cols) (< cols 1)) (setq cols 1))
  (let* ((fmt-length (length fmt))
         (column-height (floor fmt-length cols))
         (remainder (mod fmt-length cols))
         (printed 0)
         columns
         column-sizes)
    (do ((c fmt (cdr c))
         (j 0 (1+ j))
         (r (if (zerop remainder) 0 1) (if (zerop remainder) 0 1))
         (i 0 (1+ i)))
        ((null c))
      (when (or (= j (+ r column-height)) (zerop i))
        (setq columns (cons c columns)
              column-sizes
              (cons
               (+ r column-height) column-sizes))
        (unless (zerop remainder)
          (unless (zerop i) (decf remainder)))
        (setq j 0)))
    (setq columns (reverse columns)
          column-sizes (reverse column-sizes))
    (when (/= fmt-length (* column-height cols))
      (incf column-height))
    (dotimes (i column-height)
      (do ((c columns (cdr c))
           (size column-sizes (cdr size)))
          ((or (null c)))
        (when (> printed (1- fmt-length))
          (return-from ppcolumns))
        (when (< 0 (car size))
          (pplist-as-string stream (caar c) nil nil)
          (when (caar c) (incf printed))
          (unless (null c) (princ #\ ))
          (rplaca c (cdar c))))
      (princ #\newline)))) 
```

它以另一个方向打印它。如果你需要它。

# model-view-controller - Zend Framework 实现模型的初学者教程并从控制器调用它

> ID：11226285
> 
> 赞同：0
> 
> 时间：2012-06-27T12:32:26.063
> 
> 标签：model-view-controller, zend-framework, model

我对 ZF 很陌生，现在，我尝试编写一个基于 ZF 的小型应用程序。到目前为止，它或多或少都可以正常工作。我想访问我的 db- 数据。对于初学者，我只想使用查询字符串，然后再开始使用 zend_db。所以为了保持一个好的 mvc 结构，我创建了 application/models/IndexMapper.php

```
class Application_Models_IndexMapper{...} 
```

它现在只包含一个功能，看看它是否有效

```
 public function test(){
    return ('yay');
} 
```

在我正在工作的 IndexController 中，我尝试通过以下方式访问我的模型

```
$indexMapper = new Application_Models_IndexMapper();
$x = $indexMapper->test(); 
```

但第一行抛出一个

```
Fatal error: Class 'Application_Models_IndexMapper' not found in /path/to/application/controllers/IndexController.php on line 31 
```

因为我是新手，所以我不懂更复杂的教程，它们也不能帮助我解决问题。我究竟做错了什么？我必须以某种方式包含它吗？

谢谢

编辑：我的应用程序/bootstrap.php

```
<?php

defined('APPLICATION_PATH')
    or define('APPLICATION_PATH' , dirname(__FILE__));

defined('APPLICATION_ENVIRONMENT')
    or define('APPLICATION_ENVIRONMENT' , 'development');

require_once 'Zend/Loader.php';
Zend_Loader::registerAutoload();

$frontController = Zend_Controller_Front::getInstance();

$frontController->setControllerDirectory(APPLICATION_PATH . '/controllers');

$frontController->setParam('env', APPLICATION_ENVIRONMENT);

Zend_Layout::startMvc(APPLICATION_PATH . '/layouts/scripts');

//Doctype
$view = Zend_Layout::getMvcInstance()->getView();
$view->doctype('HTML5');

$view->addHelperPath('App/View/Helper', 'App_View_Helper');

unset($frontController); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:34:55.143

模型的结构可以在下面找到`./application/models/IndexMapper.php`。在该文件中，您将拥有您命名的类，然后自动加载将起作用。

一个很棒的初学者教程可以在 www.akrabat.com 上找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:53:51.890

你把你的班级放在了错误的地方，并且错误地命名了它。

您的班级应该在`application/models/Indexmapper.php`并且应该如下所示：-

```
class Application_Model_Indexmapper
{
    public function test(){
        return ('yay');
    }
} 
```

然后你这样称呼它：-

```
$indexMapper = new Application_Model_Indexmapper();
$x = $indexMapper->test(); 
```

请注意，我从 Models 末尾删除了“s”，它不是必需的，并且会导致您发现的错误。该类也位于模型文件夹中，而不是模块中。如果你想使用模块，那么你需要从手册中阅读[这个](http://framework.zend.com/manual/1.11/en/project-structure.filesystem.html)和[这个。](http://framework.zend.com/manual/1.11/en/zend.controller.modular.html)

对于第一个基本项目，您的 bootstrap.php 应该如下所示：-

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    //Yes, it's empty!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:54:37.633

好吧，我想我的教程不是很有帮助。我会按照建议做，从头开始。不过谢谢

# php - 将输入表单分配给变量

> ID：11226290
> 
> 赞同：2
> 
> 时间：2012-06-27T12:32:42.813
> 
> 标签：php

我有这样的输入表单：

```
<input type="checkbox" name="vehicle" value="Bike" /> 
```

我想在这个变量中打印它：

```
$return .= '<div class="flink">'.$checkbox.'</div>'; 
```

或者我可以将它分配给任何其他变量吗？

我该怎么做？我试着把：

```
$checkbox.= '<input type="checkbox" name="vehicle" value="Bike" />'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:37:52.573

只需添加：

```
$return = '<div class="flink">'.$checkbox.'</div>';
echo $return; // Somewhere on the page. 
```

看起来你定义它很好，你可能没有在页面上呼应它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:34:42.937

如果您希望将变量打印到网页，您可以使用几个不同的命令。

*   当变量是 HTML 时，该[`echo`](http://php.net/manual/en/function.echo.php)命令很有用。
*   该[`var_dump`](http://php.net/manual/en/function.var-dump.php)命令可用于调试目的，因为它适用于所有类型的变量。
*   [`print_r`](http://php.net/manual/en/function.print-r.php)也很好，因为它以可读的方式格式化输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:37:46.883

```
 <?php
                $q="select * from stores";
                $res=mysql_query($q);
                $StoreOPtion = '<option value="">--select--</option>';
                while($rs=mysql_fetch_object($res))
                 { 
                 $StoreOPtion .= '<option   value="'.$rs->StoreId.'||StoreName:'.$rs->StoreName.'..  Street:'.$rs->StoreStreet.'..Phone:'.$rs->StorePhone.'..Email:'.$rs->StoreEmail.'..Area:'.$rs->StoreArea.'..Pin:'.$rs->StorePincode.'">'.$rs->StoreName.'</option>';

                } 
                ?>
        <select name="StoreName" type="text" id="StoreName"  onchange="getStoreAdd()"/>
       <?php echo $StoreOPtion; ?>
         </select> 
```

我在这里使用下拉框。ypu sehe这个例子并使用它

# php - 过滤 PDO SQL 查询

> ID：11226299
> 
> 赞同：0
> 
> 时间：2012-06-27T12:33:05.917
> 
> 标签：php, mysql, select, filter, pdo

我在我的 PHP 页面中使用 PDO 方法来内爆两个字符串（为了创建一个图表......长篇大论！），但我不知道如何过滤它们。MySQL中的表结构是这样的：

Column Name： **item**（被投票的item的名称）； **nvote**（该项目获得的票数）； **日期**（投票日期）

这是我到目前为止所拥有的：

```
$stmt1 = $db->prepare("SELECT date FROM vote"); 
$stmt1->execute();

$stmt2 = $db->prepare("SELECT nvote FROM vote"); 
$stmt2->execute();

$line1 = implode( ',', $stmt1->fetchAll (PDO::FETCH_COLUMN) ); 
$line2 = implode( ',', $stmt2->fetchAll (PDO::FETCH_COLUMN) ); 
```

（Line1 创建我的图形的 x 轴，line2 创建 y 轴）

这非常适合为我的图表生成字符串。

我如何过滤这些以便被投票的项目的名称（在“**项目**”列中）被一个 var 过滤（在这种情况下，`$nameofitem`）？我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:40:11.120

```
$params = array(':value' => 'Hello World');
$stmt1 = $db->prepare("SELECT date FROM vote WHERE item = :value ORDER BY date"); 
$stmt1->execute($params);

$stmt2 = $db->prepare("SELECT nvote FROM vote WHERE item = :value ORDER BY date"); 
$stmt2->execute($params);

$line1 = implode( ',', $stmt1->fetchAll (PDO::FETCH_COLUMN) ); 
$line2 = implode( ',', $stmt2->fetchAll (PDO::FETCH_COLUMN) ); 
```

关键是在 SQL 查询中添加 WHERE 条件，并在传递数组时使用由执行绑定的参数。

请注意，我还为您添加了一个订单声明，因为没有它就无法保证结果排序，这意味着您在图表上看到的点可能与错误的点相关联。日期可能不是最佳选择，如果可以，请使用唯一键。或者，您可以在单个查询中获取所有内容并使用后处理构建您的列表。

# c# - 在哪里可以找到我的数据上下文的名称？

> ID：11226301
> 
> 赞同：0
> 
> 时间：2012-06-27T12:33:13.053
> 
> 标签：c#, linq-to-sql

我有以下代码：

```
DefaultModel.RegisterContext(typeof(YourDataContextType), 
                             new ContextConfiguration() { 
                                 ScaffoldAllTables = true }); 
```

我知道“yourdatacontexttype”有什么作用，但我似乎找不到它在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:36:50.733

It's usually the name of your .edmx file with 'Entities' appended, so if your edmx is called 'Foo' you're looking for `FooEntities`. This is of course under the assumption you use database first and have generated an .edmx from your db.

As found [here](http://csharpbits.notaclue.net/2010/07/using-entity-framework-code-first-ctp4.html), when you use Code First, you need the following:

Replace

```
typeof(Models.ProductCatalog) 
```

with

```
() => new Models.{YourModel}(connectionString).ObjectContext 
```

# c# - 如何检查处理器架构运行时的类型

> ID：11226304
> 
> 赞同：-2
> 
> 时间：2012-06-27T12:33:14.590
> 
> 标签：c#, x86-64, itanium

> **可能重复：**
> [使用 C# 识别 CPU 架构类型](https://stackoverflow.com/questions/767613/identifying-the-cpu-architecture-type-using-c-sharp)

我的程序在其最后一部分使用不同的程序集。问题是 amd 和 intelx64 程序集不完全兼容。它适用于我正在使用的编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:38:17.977

你可以使用异常处理，使用try和catch。

```
try
{
    // intel assembly
}
catch
{
    // amd assembly
} 
```

# drupal-7 - 样式/主题 Drupal 7 内容类型记录

> ID：11226310
> 
> 赞同：0
> 
> 时间：2012-06-27T12:33:35.783
> 
> 标签：drupal-7, drupal-views, drupal-theming

我开发了“汽车销售”的内容类型，其中包含以下字段：

1.  制造商
2.  模型
3.  制作
4.  汽油种类
5.  传输（手动/自动）
6.  颜色
7.  挂号的？（是/否）
8.  里程
9.  发动机功率
10.  状况（新/翻新/二手）
11.  价格
12.  图片（多次上传）

我开发了这种内容类型的视图来显示汽车列表。现在我想为个人汽车销售记录开发一个屏幕/视图，如下所示： ![在此处输入图像描述](../Images/69ffbb229b75c7552aeb32ab7e18d6ef.png)

除了排列字段，请注意我想在两者之间嵌入一个图片库。这可以通过 Drupal 7 Admin UI 实现，还是我需要创建自定义 CSS 和模板文件？如果我需要编辑某些模板文件/css，那些是什么？我正在使用 Zen 子主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:02:47.677

我将通过创建一个页面，然后创建一个节点模板来完成此操作。首先创建一个新节点，然后记录模板名称的 NID。

然后，在您的模板中，创建一个新文件，并按以下方式命名：`node--[node id].tpl.php`

然后，在该文件中，粘贴以下帮助函数（或者，如果您要在站点的其他地方使用它，也可以将其放在 template.php 中）：

```
/**
 * Gets the resulting output of a view as an array of rows,
 * each containing the rendered fields of the view
 */
function views_get_rendered_fields($name, $display_id = NULL) {
    $args = func_get_args();
    array_shift($args); // remove $name
    if (count($args)) {
        array_shift($args); // remove $display_id
    }

    $view = views_get_view($name);
    if (is_object($view)) {
        if (is_array($args)) {
          $view->set_arguments($args);
        }
        if (is_string($display_id)) {
          $view->set_display($display_id);
        }
        else {
          $view->init_display();
        }
        $view->pre_execute();
        $view->execute();
        $view->render();
        //dd($view->style_plugin);
        return $view->style_plugin->rendered_fields;
    } else {
        return array();
    }
} 
```

然后将以下代码添加到您的模板中：

```
<?php
  $cars = views_get_rendered_fields('view name', 'default', [...any arguments to be passed to the view]);
  foreach ($cars as $car): ?>
    <div>Put your mockup in here. It might be helpful to run <?php die('<pre>'.print_r($car, 1).'</pre>'); ?> to see what the $car array looks like.</div>
  <?php endforeach;
?> 
```

只需将代码中的占位符更改为您希望标记的任何内容，您就应该设置好！

`<?php die('<pre>'.print_r($car,1).'</pre>'); ?>`正如我上面提到的，对阵列打印的样子进行视觉表示总是有帮助的。

我`views_get_rendered_fields`一直在我的代码中使用它，因为它允许我完全自定义视图的输出。

**提醒：**每次创建新模板时，请务必清除缓存。

祝你好运！

# java - jsp标签表达式的使用方法?

> ID：11226312
> 
> 赞同：0
> 
> 时间：2012-06-27T12:33:38.297
> 
> 标签：java, jsp, jakarta-ee, struts

我想根据 if 条件显示下拉菜单，我的代码片段如下

```
 <%if(userType.equalsIgnoreCase("O")) {String user=(String)session.getAttribute("executorname"); %>
            <html:select style="width:190;" value="<%=user%>" property="jobOwner">
                <html:option value="<%=user %>"><%=user %></html:option>
            </html:select>
            <%} %> 
```

我明白了`org.apache.jasper.JasperException: /jsp/frmQueryExecutor.jsp(73,23) quote symbol expected`

我想要下拉列表中的值 os session 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T06:30:21.513

试试这个方法

```
<c:choose>
  <c:when test="${not empty sessionScope.executorname}"> //if loop
     <html:select style="width:190;" value="<%=user%>" property="jobOwner">
         <html:option value="${sessionScope.executorname}"><${sessionScope.executorname}></html:option>
     </html:select>
  </c:when>
  <c:otherwise> // else loop
      //do whatever
  </c:otherwise>
</c:choose> 
```

并尽量避免在一起。

# textmate - 如何在 sublime text 2 片段中跳过变量？

> ID：11226313
> 
> 赞同：1
> 
> 时间：2012-06-27T12:33:40.373
> 
> 标签：textmate, code-snippets, sublimetext, textmatebundles, sublimetext2

我有一个像这样的崇高文本 2 片段：

```
on('${1:click}', ${2:'$3', }function (e) {
    $0
    return false;
}); 
```

如果我首先触发的代码片段被突出显示`click`，下一个被突出显示`'',`，在这里我可以选择在下一个选项卡点击时输入一个值，或者如果我根本不想使用这个突出显示的块，则只删除选定的文本。

问题是，如果我点击 Delete 删除我想要的突出显示的文本，下一个选项卡点击跳转到下一个 var，在这种情况下是 $0。但相反，我得到了一个空白选项卡，它位于已删除的 var $2 块内的 $3 var。

例如，E-texteditor 的工作方式是：如果我删除了一些其中包含另一个 var 的 var，然后我再次点击选项卡，我在删除的 var 不在其中之后直接跳转到下一个。

**这可以通过 Sublime Text 2 实现吗？**

我希望你能理解我的问题，这是整个片段代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>name</key>
    <string>m2k-on</string>
    <key>uuid</key>
    <string>6D67B0C4-96B1-4986-902B-2F6ACC17403F</string>
    <key>tabTrigger</key>
    <string>on</string>
    <key>content</key>
    <string>on('${1:click}', ${2:'$3', }function (e) {
$0
return false;
});</string>
</dict>
</plist> 
```

将其复制粘贴到新的代码段文件中以对其进行测试。

# django - Django 中的独立前端模块

> ID：11226316
> 
> 赞同：1
> 
> 时间：2012-06-27T12:33:53.700
> 
> 标签：django, frontend

我正在尝试创建独立的前端模块（HTML、CSS 和 JS）以集成到 Django 应用程序中。我的意思最好的例子是“地图”模块，我想将它包含在各种不相关的页面中，可能在每个页面的不同位置。

我有一个模板，它提供了地图所需的 HTML 代码，并且我希望 CSS 和 JS 代码也包含在此模板中，以简化前端依赖项的处理。到目前为止，这可以使用`{% include %}`标签来实现。

*但是*在前端性能方面，在 HTML 页面中间包含样式表和脚本是一种非常糟糕的做法。（CSS 应该包含在 中`<head>`，JS 应该包含在末尾`<body>`）

`{% include %}`如果标签被呈现为包含它们的模板的一部分并且可能具有覆盖标签，那么我的问题可能已经解决`{% block %}`。在 Django 中情况并非如此。`{% include %}`标签首先呈现为 HTML，然后才包含在内，因此它们不能覆盖`{% block %}`标签。

回顾过去围绕这个主题提出的问题表明，普遍的智慧是使用模板继承（即`{% extends %}`）而不是`{% include %}`，但由于我希望我的模块是独立的，所以我不知道如何在我的情况下使用继承。

在保持前端性能最佳实践的同时，我可以做些什么来维护模板内的前端依赖项？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:39:33.457

要首先创建地图模板标签，请使用[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

关于静态文件的问题，我会创建一个相关的模板标签，将静态文件引用转储到您当前的模板中。然后将该模板标签包含在一个块中。

如果您的基本模板在 base.html 中，而页面模板在 page.html 中：

base.html

```
<html>
    <head>
        {% block css %}
            <link rel="stylesheet...
        {% endblock %}
    </head>
    <body>
        {% block content %}{% endblock %}
        {% block scripts %}{% endblock %}
    </body>
</html> 
```

page.html

```
{% extends 'base.html' %}

{% block css %}
    {{ block.super }}
    {% map_css %}
{% endblock %}

{% block scripts %}
    {{ block.super }}
    {% map_scripts %}
{% endblock %}

{% block content %}
    content...
    {% map_html %}
    content...
{% endblock %} 
```

# linux - 如何连接两个字符串以构建完整路径

> ID：11226322
> 
> 赞同：113
> 
> 时间：2012-06-27T12:34:16.787
> 
> 标签：linux, bash

我正在尝试编写一个 bash 脚本。在此脚本中，我希望用户输入目录的路径。然后我想在这个字符串的末尾附加一些字符串并建立一个到一些子目录的路径。例如假设用户输入这样的字符串：

```
/home/user1/MyFolder 
```

现在我想在这个目录中创建 2 个子目录并在那里复制一些文件。

```
/home/user1/MyFolder/subFold1
/home/user1/MyFolder/subFold2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2014-06-03T22:31:02.383

POSIX 标准要求在文件名中将多个`/`视为单个`/`。因此 `//dir///subdir////file`与 相同`/dir/subdir/file`。

因此，连接两个字符串以构建完整路径很简单：

```
full_path="$part1/$part2" 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-06-27T12:40:16.517

```
#!/bin/bash

read -p "Enter a directory: " BASEPATH

SUBFOLD1=${BASEPATH%%/}/subFold1
SUBFOLD2=${BASEPATH%%/}/subFold2

echo "I will create $SUBFOLD1 and $SUBFOLD2"

# mkdir -p $SUBFOLD1
# mkdir -p $SUBFOLD2 
```

如果您想使用 readline 来完成所有这些，`-e`请在调用中添加一个`read`：

```
read -e -p "Enter a directory: " BASEPATH 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-27T12:38:38.490

简单地连接你的路径部分不会完成你想要的吗？

```
$ base="/home/user1/MyFolder/"
$ subdir="subFold1"
$ new_path=$base$subdir
$ echo $new_path
/home/user1/MyFolder/subFold1 
```

然后，您可以根据需要创建文件夹/目录。

一种约定是用`/`(eg `/home/`) 结束目录路径，因为以 / 开头的路径可能与根目录混淆。如果在路径中使用双斜杠 ( `//`)，它仍然是正确的。但是，如果任何一个变量都没有使用斜线，则它是不正确的（例如`/home/user1/MyFoldersubFold1`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-03T22:34:14.657

以下脚本将多个（相对/绝对）路径 (BASEPATH) 与相对路径 (SUBDIR) 连接起来：

```
shopt -s extglob
SUBDIR="subdir"
for BASEPATH in '' / base base/ base// /base /base/ /base//; do
  echo "BASEPATH = \"$BASEPATH\" --> ${BASEPATH%%+(/)}${BASEPATH:+/}$SUBDIR"
done 
```

其输出为：

```
BASEPATH = "" --> subdir
BASEPATH = "/" --> /subdir
BASEPATH = "base" --> base/subdir
BASEPATH = "base/" --> base/subdir
BASEPATH = "base//" --> base/subdir
BASEPATH = "/base" --> /base/subdir
BASEPATH = "/base/" --> /base/subdir
BASEPATH = "/base//" --> /base/subdir 
```

`shopt -s extglob`仅需要允许 BASEPATH 以多个斜杠结束（这可能是无稽之谈）。如果没有扩展的全球范围，您可以使用：

```
echo ${BASEPATH%%/}${BASEPATH:+/}$SUBDIR 
```

这将导致不那么整洁但仍然有效：

```
BASEPATH = "" --> subdir
BASEPATH = "/" --> /subdir
BASEPATH = "base" --> base/subdir
BASEPATH = "base/" --> base/subdir
BASEPATH = "base//" --> base//subdir
BASEPATH = "/base" --> /base/subdir
BASEPATH = "/base/" --> /base/subdir
BASEPATH = "/base//" --> /base//subdir 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-27T09:37:27.373

我正在使用我的 shell 脚本，它需要像你一样做一些路径连接的东西。

问题是，两条路径都像

```
/data/foo/bar

/data/foo/bar/ 
```

是有效的。

如果我想将文件附加到此路径，例如

```
/data/foo/bar/myfile 
```

shell 中没有本地方法（如 python 中的 os.path.join() ）来处理这种情况。

但我确实发现了一个窍门

例如，基本路径被存储在一个shell变量中。

```
BASE=~/mydir 
```

你想加入的最后一个文件名是

```
FILE=myfile 
```

然后你可以像这样分配你的新路径

```
NEW_PATH=$(realpath ${BASE})/FILE 
```

然后你会得到

```
$ echo $NEW_PATH

/path/to/your/home/mydir/myfile 
```

原因很简单，如果需要，“realpath”命令总是会为你修剪终止斜线

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T13:04:32.840

```
#!/usr/bin/env bash

mvFiles() {
    local -a files=( file1 file2 ... ) \
             subDirs=( subDir1 subDir2 ) \
             subDirs=( "${subDirs[@]/#/$baseDir/}" )

    mkdir -p "${subDirs[@]}" || return 1

    local x
    for x in "${subDirs[@]}"; do
        cp "${files[@]}" "$x"
    done
}

main() {
    local baseDir
    [[ -t 1 ]] && echo 'Enter a path:'
    read -re baseDir
    mvFiles "$baseDir"
}

main "$@" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-20T02:48:06.717

这应该适用于空目录（您可能需要检查第二个字符串是否以`/`应该被视为绝对路径的开头？）：

```
#!/bin/bash

join_path() {
    echo "${1:+$1/}$2" | sed 's#//#/#g'
}

join_path "" a.bin
join_path "/data" a.bin
join_path "/data/" a.bin 
```

输出：

```
a.bin
/data/a.bin
/data/a.bin 
```

参考：[Shell 参数扩展](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

# javascript - 遍历每个 html 标签

> ID：11226329
> 
> 赞同：1
> 
> 时间：2012-06-27T12:34:23.753
> 
> 标签：javascript, jquery

我想将每个圆圈放在一个 div 中，这样我就可以使用 jquery 调整它的大小。我的代码如下：

```
<div id="DG_circles">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="200" height="75">
<desc>Created with Raphaël</desc>
<defs>
<circle cx="39" cy="39.5" r="16" fill="#d57b19" stroke="none" style="stroke-width: 0;" stroke-width="0">
<image x="28.8" y="29.3" width="22.4" height="22.4" preserveAspectRatio="none" href="load?name=icon-hotel-chart">
<text x="39" y="17.5" text-anchor="middle" style="text-anchor: middle; font: bold 9px Arial,Verdana,Courier; stroke-width: 0;" font="10px "Arial"" stroke="none" fill="#333333" font-size="9px" font-family="Arial, Verdana, Courier" stroke-width="0" font-weight="bold">
<circle cx="91" cy="39.5" r="16" fill="#b1102b" stroke="none" style="stroke-width: 0;" stroke-width="0">
<image x="80.8" y="29.3" width="22.4" height="22.4" preserveAspectRatio="none" href="load?name=icon-card-chart">
<text x="91" y="17.5" text-anchor="middle" style="text-anchor: middle; font: bold 9px Arial,Verdana,Courier; stroke-width: 0;" font="10px "Arial"" stroke="none" fill="#333333" font-size="9px" font-family="Arial, Verdana, Courier" stroke-width="0" font-weight="bold">
<circle cx="143" cy="39.5" r="16" fill="#85bb3c" stroke="none" style="stroke-width: 0;" stroke-width="0">
<image x="132.8" y="29.3" width="22.4" height="22.4" preserveAspectRatio="none" href="load?name=icon-airplane-chart">
<text x="143" y="17.5" text-anchor="middle" style="text-anchor: middle; font: bold 9px Arial,Verdana,Courier; stroke-width: 0;" font="10px "Arial"" stroke="none" fill="#333333" font-size="9px" font-family="Arial, Verdana, Courier" stroke-width="0" font-weight="bold">
</svg>
</div>​

var $circle = $('#DG_circles').find("circle");

$circle.each(function(index, value){
    if(index == 0){
        $this.attr("r", "24");
    } else if(index == 1){
        $this.attr("r", "20");
    } else if(index == 2){
        $this.attr("r", "18");
    }
}); 
```

但它不会改变圆的“r”属性。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:39:29.620

为什么你甚至需要在`each`这里使用？

```
var $circle = $('#DG_circles').find("circle");
$circle.eq(0).attr("r", "24");
$circle.eq(1).attr("r", "20");
$circle.eq(2).attr("r", "18"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:37:14.003

`this`是一个 dom 元素，而不是 jQuery。您必须将其转换为 jQuery 元素才能使用 jQuery 函数。

```
$(this).attr('r', 24); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:37:42.513

尝试....

```
var circle = $('#DG_circles').find("circle");

circle.each(function(index, value){
    if(index == 0){
        $(this).attr("r", "24");
    } else if(index == 1){
        $(this).attr("r", "20");
    } else if(index == 2){
        $(this).attr("r", "18");
    }
}); 
```

# jquery - WCF Jquery Ajax 跨域策略 - “方法不允许”

> ID：11226333
> 
> 赞同：1
> 
> 时间：2012-06-27T12:34:31.030
> 
> 标签：jquery, wcf, cross-domain

我正在尝试使用 WCF 服务，使用从 Localhost 到服务器的 Jquery，但不断收到“405 Method Not Allowed”。

这是我正在使用的配置：

```
<system.serviceModel>
<bindings>
  <webHttpBinding>
      <binding name="jsonp" crossDomainScriptAccessEnabled="true" />
      <binding name="jsonpSsl" crossDomainScriptAccessEnabled="true">
          <security mode="Transport" />
      </binding>
  </webHttpBinding>
</bindings>
<behaviors>
    <serviceBehaviors>
       <behavior name="MyBehavior">
           <serviceMetadata httpGetEnabled="true" />
           <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
   </serviceBehaviors>
   <endpointBehaviors>
       <behavior name="MyBehavior">
          <webHttp />        
       </behavior>
    </endpointBehaviors>
</behaviors>
<services>
 <service behaviorConfiguration="MyBehavior" 
              name="MyWs.Service1">
            <endpoint address="" binding="webHttpBinding"
               bindingConfiguration="jsonp" contract="MyWs.IService1" 
               behaviorConfiguration="MyBehavior"/> 
            <endpoint address="" binding="webHttpBinding"
               bindingConfiguration="jsonpSsl" contract="MyWs.IService1" 
               behaviorConfiguration="MyBehavior"/>                        
     </service>
</services> 
```

jQuery函数：

```
 $.ajax({
            type: "POST",
            url: "http://XXX.XXX.XXX.XXX/wcf/Service1.svc/GetData",
            data: '{"value":"2340"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccessCall,
            error: OnErrorCall
        });

        function OnSuccessCall(response) {
            alert(response);
        }

        function OnErrorCall(response) {
            alert(response.status + " " + response.statusText);
        } 
```

WCF 接口：

```
 [OperationContract]
    [WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
    string GetData(int value); 
```

方法实现：

```
 public string GetData(int value)
    {
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
        System.Web.Script.Serialization.JavaScriptSerializer oSerializer =
         new System.Web.Script.Serialization.JavaScriptSerializer();
        string json = oSerializer.Serialize(string.Format("You entered: {0}", value));
        return json;
    } 
```

任何想法如何解决它？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:00:21.510

遵循此步骤。[http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T07:39:24.817

```
[OperationContract]
[WebGet( ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, RequestFormat=WebMessageFormat.Json,
        UriTemplate = "GetEmployeeJson")]
  List<EmployeeData> GetEmployeeJson(); 
```

网络配置

```
 <bindings>
      <webHttpBinding>
          <binding name="webHttpBindingWithJsonP"
                   crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
  </bindings>
  <behaviors>
      <serviceBehaviors>
          <behavior name="WcfExample.Service1Behavior">
              <serviceMetadata httpGetEnabled="true"/>
              <serviceDebug includeExceptionDetailInFaults="true"/>
          </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
          <behavior name="WebBehavior">
              <webHttp/>
          </behavior>
      </endpointBehaviors>
  </behaviors>
  <services>
      <service behaviorConfiguration="WcfExample.Service1Behavior" name="WcfExample.Service1">
          <endpoint address="" binding="webHttpBinding" contract="WcfExample.IService1" bindingConfiguration="webHttpBindingWithJsonP" behaviorConfiguration="WebBehavior" />
      </service>
  </services> 
```

jquery 调用 wcf 服务

```
 $.ajax({
            type: "GET",
            contentType: "application/javascript",
            crossDomain: true,
            dataType: 'jsonp',
            cache: true,
            url: 'http://localhost:49349/Service1.svc/GetEmployeeJson',
            success: function (data) {
                var html = [];

                alert(data[0].lastname);

                $.each(data, function (index, value) {
                    $("#TableID").append("<tr><td>" + value.HREmpId + "</td><td>" + value.firstName + "</td><td>" + value.lastname + "</td><td>" + value.address + "</td><td>" + value.city + "</td></tr>");

                });

            },

            error: function (xhr, ajaxOptions, thrownError) {
                alert("here error");
                alert(thrownError);
                if (xhr != null) {

                    var err = JSON.parse(xhr.responseText); //you can throw a code-behinde Exception and it will automatically                                                 //render to a valid JSON string when we rerieve the responseText
                    alert("ErrorMessage: " + err.Message + " StackTrace: " + err.StackTrace);

                }
            }
        }); 
```

# spring - 访问集合时出现 Hibernate LazyInitializationException

> ID：11226334
> 
> 赞同：0
> 
> 时间：2012-06-27T12:34:35.097
> 
> 标签：spring, hibernate, jsf

**当我想从另一个表中获取数据时出现以下异常**

```
17:38:45,823 ERROR [org.hibernate.LazyInitializationException] failed to lazily initialize a collection of role: com.sinergia.ea.model.TypeOfArtifactModel.checkedItems, no session or session was closed: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.sinergia.ea.model.TypeOfArtifactModel.checkedItems, no session or session was closed
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:358) [:3.2.6.ga]
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:350) [:3.2.6.ga]
        at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:343) [:3.2.6.ga]
        at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:86) [:3.2.6.ga]
        at org.hibernate.collection.PersistentSet.toString(PersistentSet.java:309) [:3.2.6.ga]
        at java.lang.String.valueOf(String.java:2826) [:1.6.0_18]
        at java.lang.StringBuilder.append(StringBuilder.java:115) [:1.6.0_18]
        at com.sinergia.ea.view.TypeOfArtifactBean.editTypeOfArtifact(TypeOfArtifactBean.java:203) [:]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_18]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_18]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_18]
        at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_18]
        at org.apache.el.parser.AstValue.invoke(AstValue.java:196) [:6.0.0.Final]
        at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276) [:6.0.0.Final]
        at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [:2.1.3-SNAPSHOT]
        at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [:2.1.0-FCS]
        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [:2.1.3-SNAPSHOT]
        at javax.faces.component.UICommand.broadcast(UICommand.java:315) [:2.1.0-FCS]
        at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [:2.1.0-FCS]
        at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [:2.1.0-FCS]
        at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [:2.1.3-SNAPSHOT]
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.3-SNAPSHOT]
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [:2.1.3-SNAPSHOT]
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409) [:2.1.0-FCS]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.0.0.Final]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final] 
```

**模型类：**

```
@Entity
@Table(name="TYPE_OF_ARTIFACT")
public class TypeOfArtifactModel implements java.io.Serializable , Identifiable{

    /**
     * 
     */
    private static final long serialVersionUID = 2662289176706818360L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "TYPE_OF_ARTIFACT_SEQ")
    @SequenceGenerator(name = "TYPE_OF_ARTIFACT_SEQ", sequenceName = "TYPE_OF_ARTIFACT_SEQ")
    @Column(name="ID",unique=true, nullable=false)
    private Integer id;

    @Column(name="DESCRIPTION", nullable=true, length=400)
    private String description;

    @Column(name="NAME", nullable=false, length=50)
    private String name;

    @OneToMany(targetEntity = AdditionalInfoModel.class, mappedBy = "typeOfArtifactID",cascade = CascadeType.ALL)
    private Set<AdditionalInfoModel> additionalInfos = new HashSet<AdditionalInfoModel>(0);

    @OneToMany
    @JoinTable(name = "TYPE_ARTIFACT_OPERATE_RELATION", joinColumns = { @JoinColumn(name = "TYPE_OF_ARTIFACT_ID") }, inverseJoinColumns = { @JoinColumn(name = "OPERATE_ARTIFACT_ID") })
    private Set<TypeOfArtifactModel> checkedItems = new HashSet<TypeOfArtifactModel>(0);

    public TypeOfArtifactModel() {
    } 
```

**看豆**

```
public String editTypeOfArtifact() {
        additionalInfoModelList = additionalInfoService.getAdditionalInfoList(getCurrentItem());
        setAdditionalInfoModelList(additionalInfoModelList);
        if(getCurrentItem() != null){
            Set<TypeOfArtifactModel> typeOfArtifactCheckedItems = getCurrentItem().getCheckedItems();
            System.out.println("TypeOfArtifactCheckedItems :"+typeOfArtifactCheckedItems);
            if(typeOfArtifactModelList != null && !(typeOfArtifactModelList.isEmpty())){
                if(typeOfArtifactCheckedItems != null && !(typeOfArtifactCheckedItems.isEmpty())){
                for (TypeOfArtifactModel item : typeOfArtifactModelList) {
                    for (TypeOfArtifactModel checkedItem : typeOfArtifactCheckedItems) {
                        if(item.getId()==checkedItem.getId()){
                            checked.put(checkedItem.getId().longValue(), true);
                        }
                    }
                }
            }
         }
        }

        return null;
    } 
```

**设置 typeOfArtifactCheckedItems = getCurrentItem().getCheckedItems();**

我在特定情况下收到上述错误为什么会发生我不知道请给我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:07:17.120

默认情况下，`@OneToMany`集合例如`checkedItems`由 Hibernate 延迟加载。这意味着当您加载时`TypeOfArtifactModel`会创建一个代理来代替实际的集合。

当您第一次访问该集合时，Hibernate 将尝试从数据库中加载所需的实体。但是，该加载必须使用与原始实体相同的会话进行。在您的情况下，在您尝试访问该集合之前，会话似乎已关闭。

为避免这种情况，您需要：

*   使用 FetchType.EAGER 使集合急切加载（不建议这样做）
*   `TypeOfArtifactModel`使用 HQL 获取连接或使用 Hibernate.initialize(model.getCheckedItems())获取集合时获取集合

您尚未显示任何事务管理代码，但请确保在会话关闭（或事务提交）之前执行上述操作。

还值得指出的是，在 Stack Overflow 上每天都会询问一次这个问题。

# haskell - 函数中的访问环境

> ID：11226338
> 
> 赞同：11
> 
> 时间：2012-06-27T12:34:39.207
> 
> 标签：haskell

在`main`我可以读取我的配置文件，并提供它`runReader (somefunc) myEnv`就好了。但`somefunc`不需要访问`myEnv`阅读器用品，链中的下一对也不需要。需要来自 myEnv 的函数是一个小叶函数。

如何在不将所有干预函数标记为的情况下访问函数中的环境`(Reader Env)`？那不可能是正确的，因为否则您首先会传递 myEnv 。并且通过多个级别的函数传递未使用的参数只是丑陋的（不是吗？）。

我可以在网上找到很多示例，但它们似乎都在 runReader 和访问环境之间只有一个级别。

* * *

我接受 Chris Taylor 的，因为它是最彻底的，而且我认为它对其他人有用。也感谢 Heatsink，他是唯一一个试图直接回答我问题的人。

对于有问题的测试应用程序，我可能会完全放弃 Reader 并传递环境。它没有给我任何东西。

我必须说我仍然对这样的想法感到困惑，即为函数 h 提供静态数据不仅会改变它的类型签名，还会改变调用它的 g 和调用 g 的 f 的类型签名。即使所涉及的实际类型和计​​算没有改变，这一切也是如此。似乎实现细节在代码中泄漏，没有真正的好处。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:45:49.863

您*确实*为所有内容提供了返回类型`Reader Env a`，尽管这并不像您想象的那么糟糕。一切都需要这个标签的原因是，如果`f`取决于环境：

```
type Env = Int

f :: Int -> Reader Int Int
f x = do
  env <- ask
  return (x + env) 
```

并`g`调用`f`：

```
g x = do
  y <- f x
  return (x + y) 
```

然后`g`还取决于环境 - 行中绑定的值`y <- f x`可能不同，具体取决于传入的环境，因此适当的类型`g`是

```
g :: Int -> Reader Int Int 
```

这其实是一件好事！类型系统迫使您明确识别函数依赖于全局环境的位置。您可以通过为该短语定义一个快捷方式来节省一些打字痛苦`Reader Int`：

```
type Global = Reader Int 
```

所以现在你的类型注释是：

```
f, g :: Int -> Global Int 
```

这更具可读性。

* * *

对此的替代方法是将环境显式传递给您的所有函数：

```
f :: Env -> Int -> Int
f env x = x + env

g :: Env -> Int -> Int
g x = x + (f env x) 
```

这可以工作，事实上在语法方面它并不比使用`Reader`monad 差。当您想要扩展语义时，困难就来了。假设您还依赖于`Int`计算功能应用程序的类型的可更新状态。现在您必须将功能更改为：

```
type Counter = Int

f :: Env -> Counter -> Int -> (Int, Counter)
f env counter x = (x + env, counter + 1)

g :: Env -> Counter -> Int -> (Int, Counter)
g env counter x = let (y, newcounter) = f env counter x
                  in (x + y, newcounter + 1) 
```

这显然不那么令人愉快。另一方面，如果我们采用单子方法，我们只需重新定义

```
type Global = ReaderT Env (State Counter) 
```

`f`和的旧定义`g`继续有效，没有任何麻烦。为了更新它们以具有应用程序计数语义，我们只需将它们更改为

```
f :: Int -> Global Int
f x = do
  modify (+1)
  env <- ask
  return (x + env)

g :: Int -> Global Int
g x = do
  modify(+1)
  y <- f x
  return (x + y) 
```

他们现在完美地工作。比较两种方法：

*   当我们想向程序添加新功能时，显式传递环境和状态需要完全重写。

*   使用 monadic 接口需要更改三行 - 即使在我们更改了第一行之后程序仍然可以工作，这意味着我们可以增量地进行重构（并在每次更改后对其进行测试），从而降低了重构引入的可能性新的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T13:19:16.813

没有。您*完全可以将*所有中间函数标记为`Reader Env`，或者至少标记为在某个带有`Env`环境的 monad 中运行。它*确实*到处传播。这是完全正常的——尽管没有你想象的那么低效，而且编译器经常会在很多地方优化这些东西。

基本上，任何使用`Reader`monad 的东西——即使它很远——都应该是 a`Reader`本身。（如果某些东西不使用`Reader`monad，并且不调用其他任何东西，它不必是`Reader`.）

也就是说，使用`Reader`monad 意味着您不必*显式地*传递环境——它由 monad 自动处理。

（请记住，它只是指向环境的指针，而不是环境本身，所以它非常便宜。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T14:02:43.503

这些是真正的全局变量，因为它们在`main`. 对于这种情况，使用全局变量是合适的。如果需要 IO，您必须使用`unsafePerformIO`它们来编写它们。

如果您只是读取配置文件，则非常简单：

```
config :: Config
{-# NOINLINE config #-}
config = unsafePerformIO readConfigurationFile 
```

如果对其他代码有一些依赖，以至于你必须控制何时加载配置文件，那就更复杂了：

```
globalConfig :: MVar Config
{-# NOINLINE globalConfig #-}
globalConfig = unsafePerformIO newEmptyMVar

-- Call this from 'main'
initializeGlobalConfig :: Config -> IO ()
initializeGlobalConfig x = putMVar globalConfig x

config :: Config
config = unsafePerformIO $ do
  when (isEmptyMVar globalConfig) $ fail "Configuration has not been loaded"
  readMVar globalConfig 
```

### 也可以看看：

1.  [在 Haskell 中处理全局标志的正确方法](https://stackoverflow.com/questions/10285454/proper-way-to-treat-global-flags-in-haskell)
2.  [Haskell中通过unsafePerformIO的全局变量](https://stackoverflow.com/questions/6488703/global-variables-via-unsafeperformio-in-haskell)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T14:17:28.760

另一种可能有用的技术是传递叶子函数本身，部分应用来自配置文件的值。当然，这只有在能够以某种方式替换叶子函数对您有利的情况下才有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T13:54:08.120

如果您不想将所有小叶函数都放在monad 中，您的数据是否允许您从顶层`Reader`的 monad 中提取必要的项目，然后将它们作为普通参数向下传递`Reader`通过叶子函数？这将消除介于两者之间的所有内容的需要 in `Reader`，尽管如果叶函数确实需要知道它在内部`Reader`以便使用`Reader`'s 设施，那么您就不得不在您的`Reader`实例中运行它。

# sql - 我们如何在不使用聚合函数的情况下进行旋转？

> ID：11226341
> 
> 赞同：2
> 
> 时间：2012-06-27T12:34:48.490
> 
> 标签：sql, sql-server-2008, pivot

我想在没有 sql 聚合函数的情况下进行旋转。这里使用了“max”聚合函数，但是当我删除聚合函数时，会显示语法错误。当我使用“max”聚合函数时，只显示字符串值中最大的字符串，当使用“min”聚合函数时，显示字符串中的最小字符串值。我需要 minimum 和 maximum ，来自“FieldSubValues”的所有字符串值。

我需要在不使用聚合函数的情况下进行旋转。谁能帮我。

```
SELECT   *  
FROM
(
     SELECT FieldSubName,FieldSubValues 
    FROM FormFieldValue where FieldID=182 
)as p    
PIVOT 
( 
    min(FieldSubValues) 
    FOR FieldSubName IN ([Name],[Gender],[Days],[Message]) 
) AS pvt 
```

在这里，我想要“消息”值，即“测试”和“fsdfds” ![在此处输入图像描述](../Images/f0030b96770ea0fb584d22ba7993d569.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:11:35.370

如果您需要两者`Min()`和`Max()`字符串值，您可以只使用`UNION`两次`PIVOT`。

```
select *
from 
(
  select FieldSubName, FieldSubValues
  from FormFieldValue
) x
PIVOT
(
  min(FieldSubValues)
  for FieldSubName IN ([Name], [Gender], [Days], [Message])
) p
UNION
select *
from 
(
  select FieldSubName, FieldSubValues
  from FormFieldValue
) x
PIVOT
(
  max(FieldSubValues)
  for FieldSubName IN ([Name], [Gender], [Days], [Message])
) p 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/1643d/2)。

如果您想要所有值而不仅仅是`max`/`min`值，那么您可以将 a 添加`row_number()`到子查询中。通过添加行号，您可以通过 FieldName 对数据进行分区，这将允许您旋转多行 - 而不仅仅是最大值和最小值：

```
select [Name], [Gender], [Days], [Message]
from 
(
  select FieldSubName, FieldSubValues,
    row_number() over(partition by FieldName order by FieldId) seq
  from FormFieldValue
) x
PIVOT
(
  max(FieldSubValues)
  for FieldSubName IN ([Name], [Gender], [Days], [Message])
) p; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1643d/14)

# jsp - 支柱 1.3 - 预选

> ID：11226342
> 
> 赞同：0
> 
> 时间：2012-06-27T12:34:49.147
> 
> 标签：jsp, struts

我一直在使用 struts 1.3 制作应用程序，但遇到了一个非常琐碎的问题。在登录表单中，有两个单选按钮可供选择，分别作为“test”和“admin”登录。代码如下

```
...          
<div class="radioLabel" >Test </div> 
<div class="radioButton" ><html:radio property="usertype" value="test" ></html:radio></div>

<div class="radioLabel" >&nbsp;&nbsp;Admin</div> 
<div class="radioButton" ><html:radio property="usertype" value="admin" ></html:radio></div>
... 
```

在浏览一些帖子时，我发现设置对应于单选按钮的 form-property 标记的“初始”属性会起作用。但它在我的情况下不起作用。

```
<form-bean name="LoginForm" type="company.project.model.LoginForm">
    ...  
    <form-property name="usertype" type="java.lang.String" initial="test" ></form-property>
</form-bean> 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:17:30.777

根据我的经验，单选按钮在 Struts 1.x 中**无法正常工作**

您可以通过更改组合框的单选按钮来验证这一点，您将看到一切如何完美运行。

如果您不想被这个问题困扰，尝试使用 javascript 模拟所需的行为是一个不错的选择

问候

# android - 在 HTC Sensation XE 上测试时，WebView 上出现奇怪的白色边框

> ID：11226343
> 
> 赞同：3
> 
> 时间：2012-06-27T12:34:50.447
> 
> 标签：android, webview

在装有 Android 2.3.4 的 HTC Sensation XE 上（也许在其他 HTC 设备上，不幸的是我只能在这个设备上），WebView 的右边框上有一条奇怪的白线（下面的截图）。我还在具有相同参数的模拟器和华硕 TF101 上测试了我的应用程序，**但一切正常**。

![这是问题](../Images/599d6b469dd4884e6ad8c6ee6a97dc49.png)

这个布局在这里发布非常复杂，所以我已经在这个上进行了测试（也有同样的错误）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background"
    android:orientation="vertical" >

    <!-- This WebView created dynamically -->
    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

[这是我正在测试的页面](http://kupitut.webtm.ru/index.php?longitude=10.0&lattitude=10.0&myLongitude=10.0&myLattitude=10.0)。如您所见，没有填充和边距 ( `<body style="padding:0; margin:0;">`)。

谁能给我一个建议，问题可能出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:50:08.727

好吧，我认为您可以使用它`webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);` 来隐藏奇怪的滚动条。希望能帮助到你。阅读此内容以获取更多详细信息[在 WebView 中隐藏滚动条](https://stackoverflow.com/questions/7088826/hiding-the-scroll-bar-in-webview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:45:12.240

我遇到了这个问题，因为 SCROLLBARS_OUTSIDE_OVERLAY 什么也没做，这让我发疯了。原来是一个盒子阴影！！！！

# sql - 无法在 clojure 中使用 jdbc

> ID：11226346
> 
> 赞同：4
> 
> 时间：2012-06-27T12:34:56.100
> 
> 标签：sql, clojure

我正在尝试将 clojure 连接到 mysql，但不知何故失败了。我的 project.clj 是：

```
(defproject my-project "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
  :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.clojure/java.jdbc "0.2.3"]]
  :jvm-opts ["-Djdbc.drivers=com.mysql.jdbc.Driver"]) 
```

我的文件是：

```
(ns my-project
  (:require [clojure.java.jdbc :as sql]))

(def db {:classname "com.mysql.jdbc.Driver"
         :subprotocol "mysql"
         :subname "//localhost:3306/db"
         :user "xxx"
         :password "xxx"}) 
```

我正在尝试从 REPL 运行以下内容：

```
(sql/with-connection db (sql/with-query-results rows "show tables;")) 
```

我得到的错误是：

```
No suitable driver found for jdbc:mysql://localhost:3306/db 
```

我在 sql 中有一个名为 db 的数据库，我确保 mysql.server 在端口 3306 上运行。如果有人能给我提示，我将不胜感激。此外，我的错误消息不依赖于我提供的用户名和密码，mysql 的日志文件中也没有显示任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T12:39:51.957

您仍然无法将驱动程序放在类路径中。`org.clojure/java.jdbc`仅提供客户端库，而不是驱动程序本身。将以下内容添加到您的`:dependencies`:

```
[mysql/mysql-connector-java "5.1.18"] 
```

# c# - 动态文本框并将它们附加并保存到 sql server 数据库

> ID：11226347
> 
> 赞同：0
> 
> 时间：2012-06-27T12:34:59.660
> 
> 标签：c#, asp.net

嗨，我有要求 1) 动态显示给定的文本框数量并保存到 DB 2) 如果我更改数字，那么新的文本框应该附加到 UI

例如：文本框添加按钮

如果我在文本框中输入 2 并单击添加，那么应该会出现 2 个文本框。我在这些文本框中填写了一些数据。现在，当我将值 2 更改为 5 时，应追加 3 个文本框（条件：旧文本框数据应保留）如果第二个值小于或等于第一个值，则什么也不做。

我的代码是

```
 void Append()
    {
        string Data = string.Empty;
        TextBox tb;
        if (Convert.ToInt32(hdnCnt.Value) < Convert.ToInt32(txtNoofGames.Text))
        {
            for (int i = 0; i < Convert.ToInt16(txtNoofGames.Text); i++)
            {
                if (i <= Convert.ToInt32(hdnCnt.Value))
                {
                    tb = (TextBox)Form.FindControl("txtGame1");
                    Data = tb.Text;
                }
                TextBox Newtb = new TextBox();
                Newtb.ID = "txtGame" + i;
                Form.Controls.Add(Newtb);
                if (i <= Convert.ToInt32(hdnCnt.Value))
                {
                    Newtb.Text = Data;
                }
            }
        }
    }
    protected void btnAdd_Click(object sender, EventArgs e)
    {
        if (hdnCnt.Value != "")
            Append();
        hdnCnt.Value = txtNoofGames.Text;
        for (int i = 0; i < Convert.ToInt16(txtNoofGames.Text); i++)
        {
            TextBox tb = new TextBox();
            tb.ID = "txtGame" + i;
            Form.Controls.Add(tb);
        }
    } 
```

我在 Data = tb.Text 处收到异常“对象引用未设置为对象实例”；在附加方法中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:10:49.837

而不是 Form.Controls.Add(tb);

请尝试使用 Page.Form.Controls.Add(tb);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:54:36.197

你没有从它的外观初始化它

```
 TextBox tb = new TextBox(); 
```

希望有帮助，

# javascript - 识别第三方 cookie

> ID：11226351
> 
> 赞同：4
> 
> 时间：2012-06-27T12:35:06.693
> 
> 标签：javascript, firefox, cookies

给定一个具有通用属性（名称、id 等）的 cookie，我们是否可以识别该 cookie 是否是第三方 cookie？我们指的是网站 B 在访问网站 A 时放置的 cookie。目前，我看不出有什么方法可以实现，但也许我错过了一些东西。我正在从事与在线用户隐私相关的项目，并希望获得在用户浏览器中留下第三方 cookie 的网站列表。我使用 Mozilla Firefox 浏览器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:24:16.160

在查看 cookie 商店时无法判断。问题是 cookie 始终是*某些*网站的第一方；第三方性与cookie的*来源有关。*识别 cookie 是否为第三方 cookie 的唯一方法是检查设置 cookie 的实际标头，并查看该 cookie 是否为原始域以外的域设置。`foo.bar.com`由于可以为整个域设置 cookie（因此允许设置，`.bar.com`以便`grill.bar.com`也可以看到 cookie）并且确定后缀是否是域并不*容易*，因此一切都变得更加复杂（例如，一些国家有多层域）。

最后一个问题是，站点很容易从另一个域真正请求一些资源，并以这种方式设置 cookie。这正式不是第三方 cookie，因为它是由它引用的域设置的，但它以相同的方式有效地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:37:19.650

每个 cookie 都是为一个域设置的。您可以比较域名以识别第 3 方 cookie。但也许我没有完全理解你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:38:28.380

仅根据目前在浏览器中创建的 cookie 列表，无法判断 cookie 是否为第三方 cookie。

# java - 垃圾收集 YGCT 和垃圾收集时间不断上升

> ID：11226352
> 
> 赞同：1
> 
> 时间：2012-06-27T12:35:21.560
> 
> 标签：java, tomcat6, garbage

我遇到了垃圾收集问题，在我们的系统上，垃圾收集时间一直线性上升，直到达到大约 25 秒的常数。

```
 S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT
  0.00  84.18  76.65  35.47  60.16    441   15.581    16    1.834   17.415
 75.72   0.00  97.32  35.47  60.16    442   15.770    16    1.834   17.604
  0.00  64.69  35.56  35.86  60.16    443   16.318    16    1.834   18.153
100.00   0.00  19.91  35.87  60.16    444   16.381    16    1.834   18.215
  0.00  70.61  40.85  36.82  60.17    445   17.488    16    1.834   19.322
 28.80   0.00  19.61  36.82  60.17    446   17.535    16    1.834   19.369
 34.51   0.00  48.01  36.82  60.18    448   17.561    16    1.834   19.395
  0.00  10.86  20.48  37.11  60.21    453   17.979    16    1.834   19.813
  9.04   0.00  47.39  37.12  60.23    454   18.063    16    1.834   19.898
  0.00  71.26   2.65  37.14  60.23    455   18.173    16    1.834   20.007
 63.64   0.00  90.91  38.04  60.23    456   19.562    16    1.834   21.396
  0.00  76.45  42.70  38.04  60.23    457   19.592    16    1.834   21.426 
```

这只是我执行了一个小负载测试时的活动快照。

我查看了一些我不是专家的快照，实际上确实发现了一些内存问题。明显的问题现在已经解决了。

本机有以下设置

```
JAVA_OPTS="$JAVA_OPTS 
-server 
-Xms704m 
-Xmx704m 
-XX:+HeapDumpOnOutOfMemoryError 
-XX:HeapDumpPath=/var/log/tomcat6 
-XX:MaxPermSize=192m 
-XX:+UseConcMarkSweepGC 
-XX:+CMSIncrementalMode 
-XX:+CMSIncrementalPacing 
-XX:+DisableExplicitGC
" 
```

我们使用 Java 6、Tomcat6、Spring Framework、Hibernate、EHCache 进行缓存，使用 Quartz 进行各种调度任务。这个项目[链接](https://stackoverflow.com/questions/1071631/trying-to-track-down-a-memory-leak-garbage-collection-problem-in-java)实际上帮助解决了一些问题，这些问题确实导致 MAT 报告潜在的内存泄漏，现在情况不再如此。

我们在我们的测试盒上玩了很多各种 JVM 设置，但在所有情况下，垃圾收集时间一直增长到不可接受的水平，这主要是因为 YGCT 不断增长。最初，我认为缓存是罪魁祸首，因为我们缓存对象图，而不仅仅是使用 Hibernate 二级缓存。但是 MAT 中缓存的内存使用量在 18Mbs 左右时似乎并不过分。

这是内存泄漏还是我应该扔更多内存？如果是内存泄漏，我怎样才能最好地在 MAT 中调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:01:06.397

据我了解，这是绝对正常的。YGCT 列报告自 JVM 启动以来所有 YGC 操作的总和。当然，FGCT 和 GCT 也是如此。

您是否注意到一段时间后性能受到影响，还是这个问题纯粹是科学性质的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:14:18.743

YGC YGCT FGC FGCT GCT 都会随着时间的推移而增加，因为它们是累积的。您应该感兴趣的是差异。

要么你监控的速度不够快，要么你经常 GCing。我会尝试增加内存量，直到它看起来没有太大区别。例如，我通常从 8 GB 堆和 6 GB 伊甸园空间开始，但您可能更喜欢不同的东西。

# login - 无论如何，当我登录到 Alfresco 而不是进入仪表板时，它应该打开存储库页面吗？

> ID：11226357
> 
> 赞同：3
> 
> 时间：2012-06-27T12:36:04.620
> 
> 标签：login, alfresco, dashboard, login-control

当我登录到 Alfresco 时，它直接将我带到 Dashboard。但是我想在登录时打开存储库页面。请告诉我我需要在哪个文件中更改链接以重定向到存储库页面，这样当我登录时，我只能看到文档，即数据字典，用户主页？ . 我注意到当我使用用户名和密码登录并单击登录按钮时，Rest Url 是“share/page/dologin”。在这个 dologin 文件中，提到了仪表板的链接。但我不知道 Dologin 的映射。任何人都可以帮忙吗？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:50:35.563

您可以修改 site-index.jsp（在共享 webapp 的根目录中）以重定向到文档库而不是用户的仪表板。

换行

`response.sendRedirect(request.getContextPath() + "/page/user/" + URLEncoder.encode(userid) + "/dashboard");`

到

`response.sendRedirect(request.getContextPath() + "/page/repository");`

这应该在登录时将每个人重定向到存储库页面。

# php - php gettext fails loading html tag

> ID：11226359
> 
> 赞同：1
> 
> 时间：2012-06-27T12:36:06.203
> 
> 标签：php, gettext, php-gettext

I'm using gettext to translate my website. One key has a translations with a html tag:

```
msgid "BANNER_TAG_START"
msgstr "<!-- // MY BANNER TAG -->" 
```

if I use this code in php now:

```
var_dump(htmlspecialchars(gettext('BANNER_TAG_START'))); 
```

it normally should returns:

```
<!-- // MY BANNER TAG --> 
```

most times it works like this, but sometimes I get:

```
MY BANNER TAG 
```

Why do I sometimes get this wrong code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:06:31.083

In my env, running the following code,

```
var_dump(htmlspecialchars("<!-- // MY BANNER TAG -->")); 
```

returns this,

```
string(31) "&lt;!-- // MY BANNER TAG --&gt;" 
```

not

```
<!-- // MY BANNER TAG --> 
```

as you reported. So I assume you are reporting the final rendered text on your browser, instead of the generated HTML source code.

Please check the 3-5 in 100 times where the problem happen in the generated HTML source code, and check if the what kind of other letters or line-breaks exist BEFORE the "<!-- //", then you may find the difference for the 3-5 cases.

# ios - Do animations keep playing after ViewController is dismissed?

> ID：11226360
> 
> 赞同：3
> 
> 时间：2012-06-27T12:36:06.350
> 
> 标签：ios, uiviewcontroller, core-animation

I'm working on an interactive book for iPad, each page of the book has its individual ViewController. Each page has around twenty different `UIImageViews` with different animations each.

However, I'm suspecting that the animations are still playing after the View Controller is dismissed. For example, In some, I have set `UIViewAnimationOptionRepeat` in their `options`, and in others and I set `1000` as their `repeatCount`.

Each view controller calls this:

```
-(void) viewDidDisappear:(BOOL)animated{
    for(UIView *v in self.view.subviews){
        if([v isKindOfClass:[UIImageView class]]){
            [v.layer removeAllAnimations];
        }
    } 
```

But it looks like they're still playing after it gets dismissed... Any thoughts?

# drupal - custom page-xxxx.tpl.php doesnt works

> ID：11226362
> 
> 赞同：2
> 
> 时间：2012-06-27T12:36:07.410
> 
> 标签：drupal, drupal-7, drupal-theming

I have page named page--news.tpl.php, which i created for my news page. But after i cleared my cache, page still not using, and drupal use the original page.tpl.php. Any ideas how to solve it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:41:00.653

另一种方法是通过几行代码的预处理钩子。这是怎么回事

```
function <module_name>_preprocess_page(&$variables) {
    if (isset($variables['node'])) {
        $variables['theme_hook_suggestions'][] = 'page__'.$variables['node']->type;
    }
} 
```

假设您有一个节点类型为“news”，那么 tpl 应该看起来像“page--news.tpl.php”，上面的代码将处理其余部分。

# c# - How do you organise a Java solution into multiple projects, like in Visual Studio?

> ID：11226363
> 
> 赞同：9
> 
> 时间：2012-06-27T12:36:09.127
> 
> 标签：c#, java, maven, architecture

I'm a .NET developer who needs to use the Java platform for a new project.

"Solutions" are a useful Visual Studio concept. How do I break my Java solution into "projects" (I guess Java packages) which have build interdependencies in the same source control repository?

We're planning to use Maven for third-party dependencies, and Scala for writing some of the libraries.

We also need to be IDE-independent.

Recommendations gratefully received!

Edit: Let us assume the solution will contain a web application, a console application, and a library written in Scala.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T08:53:18.277

我建立了一个类似的模型，你可以学习。

通过使用 Maven，它将尽可能地与 IDE 无关。您不必在 VCS 中存储任何特定的 IDE 设置，只需存储源代码和 pom 文件即可。每个开发人员将启动他的 IDE 并指向顶部的 pom，并且项目应该加载。将创建本地设置，但在提交到 VCS 时应忽略。

首先，多模块 Maven 项目的布局肯定与 C# 解决方案及其项目非常相似。具有 parent-pom 的顶级文件夹将类似于具有共享配置和构建顺序等的解决方案。然后具有子 pom 的子文件夹将匹配项目定义与其他项目之间的依赖关系。

`directory layout`

```
+- pom.xml
+- scala
| +- pom.xml
| +- src
|   +- main
|     +- scala
+- console
| +- pom.xml
| +- src
|   +- main
|     +- java
+- web
  +- pom.xml
  +- src
    +- main
     +- java
     +- resources
     +- webapp
       +- WEB-INF
         -- web.xml 
```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q11226363</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <scala.version>2.9.2</scala.version>
    </properties>

    <modules>
        <module>scala</module>
        <module>web</module>
        <module>console</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <!-- Inter-Module dependencies -->
            <dependency>
                <groupId>com.stackoverflow</groupId>
                <artifactId>Q11226363-scala</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>org.scala-lang</groupId>
                <artifactId>scala-library</artifactId>
                <version>${scala.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <repositories>
        <repository>
            <id>scala-tools.org</id>
            <name>Scala Tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>scala-tools.org</id>
            <name>Scala Tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </pluginRepository>
    </pluginRepositories>

</project> 
```

`scala/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q11226363</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q11226363-scala</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src/main/scala</sourceDirectory>

        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <executions>
                    <execution>
                        <id>compile</id>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <phase>compile</phase>
                    </execution>
                    <execution>
                        <id>test-compile</id>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                        <phase>test-compile</phase>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

`console/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q11226363</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q11226363-console</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow</groupId>
            <artifactId>Q11226363-scala</artifactId>
        </dependency>
    </dependencies>

</project> 
```

`web/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q11226363</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q11226363-web</artifactId>
    <packaging>war</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow</groupId>
            <artifactId>Q11226363-scala</artifactId>
        </dependency>
    </dependencies>

    <build>
        <finalName>webapp</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
            </plugin>
        </plugins>
    </build>

</project> 
```

`scala/src/main/scala/com/stackoverflow/Q11226363/ScalaApp.scala`

```
/**
 * @author maba, 2012-06-28
 */
package com.stackoverflow.Q11226363

class ScalaApp {
  def helloScala():String = "Hello from Scala!"
} 
```

`console/src/main/java/com/stackoverflow/Q11226363/JavaApp.java`

```
package com.stackoverflow.Q11226363;

/**
 * @author maba, 2012-06-28
 */
public class JavaApp {
    public static void main(String[] args) {
        ScalaApp scalaApp = new ScalaApp();
        System.out.println("Scala says: " + scalaApp.helloScala());
    }
} 
```

这是我测试过的。当然可以对 pom 文件和依赖项进行一些改进，但这是一个好的开始。

如果您查看，`web/target`您会发现`webapp.war`其中包含所需的依赖项。

当然可以将所有这些模块拆分并单独构建它们，并且它们之间仍然存在依赖关系，但正如我所说，这是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:41:25.160

我个人的方法是同时使用 Maven：

*   第三方依赖（通常通过 Maven Central）
*   不同项目之间的相互依赖关系（通常通过本地存储库）

这工作得很好，我相信它是独立于 IDE 的（虽然我只在 Eclipse 上测试过）

**笔记：**

如果您有一个团队一起处理相同的工件，您将需要某种方式来拥有一个包含它们的共享存储库，尽管这可以通过以下方式非常简单地完成：

*   将存储库放在共享文件服务器上（请参阅：[http](http://maven.apache.org/guides/introduction/introduction-to-repositories.html) ://maven.apache.org/guides/introduction/introduction-to-repositories.html ）
*   在 GitHub 上托管存储库（参见：[http](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/) ://cemerick.com/2010/08/24/hosting-maven-repos-on-github/ ）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T12:44:41.330

使用[gradle](http://www.gradle.org)，您将创建一个超级项目并将各种模块创建为子项目。从那里，您可以为各种 IDE 创建工作区/项目描述。

由于 gradle 与 Maven 风格的存储库完全兼容，@mikera 对存储库的评论也是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:44:50.710

在项目结构的根目录中使用一个多模块（pom-packaging）Maven 项目来使用 Maven 构建所有源代码。

然后使用工作区 (Eclipse) 或组 (NetBeans) 来显示您想要使用的项目子集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:43:33.817

您实际上创建了不同的项目，这些项目将部署为不同的 jar 文件；然后，使用 Maven，可以在需要的地方添加这些依赖项。

Maven 还带来了 IDE 独立性；有针对不同 IDE 的插件。例如与

```
mvn idea:idea 
```

Maven 自动为 Intellij IDE 创建项目文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T12:40:59.207

您的 C# 解决方案依赖于 Visual Studio，就像 Java 解决方案依赖于它的工具一样。

答案还取决于打包：JAR 用于桌面，WAR 用于 Web，EAR 用于具有 EJB 的企业。

如果您决定朝那个方向发展（例如目录结构等），Maven 会为您提供很多选择。

Eclipse 和 IntelliJ 都会以不同的方式做这件事。IntelliJ 使用了一个我觉得效果很好的模块概念。我更喜欢它而不是 Eclipse；我现在不熟悉它在那个 IDE 中是如何完成的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-27T12:44:20.490

**解决方案**是 Visual Studio 而非 .Net 的属性。将来，eclipse 可能会支持解决方案（可能是）。

您可以使用Eclipse中的**WORKSPACE**概念来模拟解决方案的想法

1.  创建新工作区
2.  导入所有项目（确保选中“将项目复制到工作区，以便创建物理副本）
3.  现在，无论何时打开此工作区，您始终可以看到所有项目。

您还可以使用 Build->Configure Build Path -> Project 和 Add Projects 引用工作区中的其他项目

如果要“从解决方案中排除”，可以通过“关闭项目”在 Eclipse 中执行相同操作

# c# - How to access a shared folder as an active directory user

> ID：11226364
> 
> 赞同：0
> 
> 时间：2012-06-27T12:36:14.450
> 
> 标签：c#, asp.net, active-directory, iis-6, impersonation

I am running an web application on IIS 6, Windows Server 2003 and it runs under local user IUSR_MachineName.

We have a shared folder, for example `\\server\path` somewhere on our network and only one active directory user has read/write access to it. How can I read/write files from asp.net from/to this folder with this user's active directory credential?

I could change the user under which IIS runs, but I can't (read - not allowed). Now I am reading about impersonation, but any tips on this would be much appreciated...

Edit - I need those basic functionality on the shared folder:

*   Directory.Delete
*   Directory.Exists
*   File.Exists
*   File.Delete
*   DirectoryInfo.GetFiles
*   FileUpload.SaveAs
*   ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:55:51.810

将应用程序池标识更改为允许访问该文件夹的用户。

# javascript - Force missing parameters in JavaScript

> ID：11226368
> 
> 赞同：5
> 
> 时间：2012-06-27T12:36:25.383
> 
> 标签：javascript

When you call a function in JavaScript and you miss to pass some parameter, nothing happens.

This makes the code harder to debug, so I would like to change that behavior.

I've seen [How best to determine if an argument is not sent to the JavaScript function](https://stackoverflow.com/questions/411352/how-best-to-determine-if-an-argument-is-not-sent-to-the-javascript-function) but I want a solution with a constant number of typed lines of code; not typing extra code for each function.

I've thought about automatically prefixing the code of all functions with that code, by modifying the constructor of the ("first-class") Function object.

Inspired by [Changing constructor in JavaScript](https://stackoverflow.com/questions/6529195/changing-constructor-in-javascript) I've first tested whether I can change the constructor of the Function object, like this:

```
function Function2 () {
    this.color = "white";
}

Function.prototype = new Function2();
f = new Function();
alert(f.color); 
```

But it alerts "undefined" instead of "white", so it is not working, so I've don't further explored this technique.

Do you know any solution for this problem at any level? Hacking the guts of JavaScript would be OK but any other practical tip on how to find missing arguments would be OK as well.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T12:47:54.043

如果您的函数需要传递某些参数，您应该专门检查这些参数作为函数验证的一部分。

扩展`Function`对象并不是最好的主意，因为许多库依赖于未传递的默认参数的行为（例如 jQuery 不向其作用域`undefined`变量传递任何内容）。

我倾向于使用两种方法：

1) 函数需要一个参数才能工作

```
var foo = function (requiredParam) {
    if (typeof requiredParam === 'undefined') {
        throw new Error('You must pass requiredParam to function Foo!');
    }

    // solve world hunger here
}; 
```

2) 一个参数未传递但可以默认为某事（使用 jQuery）

```
var foo = function (argumentObject) {
    argumentObject = $.extend({
        someArgument1: 'defaultValue1',
        someArgument2: 'defaultValue2'
    }, argumentObject || {});

    // save the world from alien invaders here
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:38:11.293

正如其他人所说，有很多理由不这样做，但我知道几种方法，所以我会告诉你如何！为了科学！

这是第一个，从[Gaby](https://stackoverflow.com/a/3919564/62829)那里偷来的，给他点个赞吧！以下是其工作原理的粗略概述：

```
//example function
function thing(a, b, c) {

}

var functionPool = {} // create a variable to hold the original versions of the functions

for( var func in window ) // scan all items in window scope
{
  if (typeof(window[func]) === 'function') // if item is a function
  {
    functionPool[func] = window[func]; // store the original to our global pool
    (function(){ // create an closure to maintain function name
         var functionName = func;
         window[functionName] = function(){ // overwrite the function with our own version
         var args = [].splice.call(arguments,0); // convert arguments to array
         // do the logging before callling the method
         if(functionPool[functionName].length > args.length)
              throw "Not enough arguments for function " + functionName + " expected " + functionPool[functionName].length + " got " + args.length;                     
         // call the original method but in the window scope, and return the results
         return functionPool[functionName].apply(window, args );
         // additional logging could take place here if we stored the return value ..
        }
      })();
  }
}

thing(1,2 ,3); //fine
thing(1,2); //throws error 
```

第二种方式：

现在有另一种方法可以做到这一点，我不记得确切的细节，基本上你 overrride `Function.prototype.call`。但正如它在[这个问题](https://stackoverflow.com/questions/5226550/can-i-override-the-javascript-function-object-to-log-all-function-calls)中所说，这涉及到一个无限循环。所以你需要一个未污染的函数对象来调用，这是通过将变量转换为字符串然后使用`eval`在未污染的上下文中调用函数来完成的！从网络的早期开始，有一个非常棒的片段向您展示了如何，但可惜我现在找不到它。正确传递变量需要一个技巧，我认为您实际上可能会丢失上下文，因此它非常脆弱。

尽管如此，如前所述，不要试图强迫 javascript 做一些违背其本质的事情，要么信任你的程序员同事，要么提供默认值，就像所有其他答案一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:48:26.450

您可以使用装饰器模式。以下装饰器允许您指定需要传递的最小和最大参数数量以及可选的错误处理程序。

```
/* Wrap the function *f*, so that *error_callback* is called when the number
   of passed arguments is not with range *nmin* to *nmax*. *error_callback*
   may be ommited to make the wrapper just throw an error message.
   The wrapped function is returned. */
function require_arguments(f, nmin, nmax, error_callback) {
    if (!error_callback) {
        error_callback = function(n, nmin, nmax) {
            throw 'Expected arguments from ' + nmin + ' to ' + nmax + ' (' +
                  n + ' passed).';
        }
    }
    function wrapper() {
        var n_args = arguments.length;
        console.log(n_args, nmin, nmax);
        console.log((nmin <= 0) && (0 <= nmax));
        if ((nmin <= n_args) && (n_args <= nmax)) {
            return f.apply(this, arguments);
        }
        return error_callback(n_args, nmin, nmax);
    }
    for (e in f) {
        wrapper[e] = f[e];
    }
    return wrapper;
}

var foo = require_arguments(function(a, b, c) {
    /* .. */
}, 1, 3);
foo(1);
foo(1, 2);
foo(1, 2, 3);
foo(1, 2, 3, 4); // uncaught exception: Expected arguments from 1 to 3 (4 passed).
foo(); // uncaught exception: Expected arguments from 1 to 3 (0 passed). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:48:35.270

你可以模仿 Python 的装饰器之类的东西。这确实需要每个函数额外输入，但不需要额外的行。

```
function force(inner) {
    return function() {
        if (arguments.length === inner.length) {
            return inner.apply(this, arguments);
        } else {
            throw "expected " + inner.length +
                " arguments, got " + arguments.length;
        }
    }
}

var myFunc = force(function(foo, bar, baz) {
    // ...
}); 
```

一般来说，这听起来是个坏主意，因为你基本上是在搞乱语言。你真的忘记经常传递参数吗？

# php - 使用会话和重定向的 php 错误处理

> ID：11226371
> 
> 赞同：0
> 
> 时间：2012-06-27T12:36:29.623
> 
> 标签：php, mysql, redirect, login

我有一个 php 文件，用于检查用户数据库中的登录名和密码，它工作正常。

但是，如果用户不存在或用户密码不正确，我无法验证要显示的确切错误，并在错误后返回上一页，请帮助我如何显示这些错误。

```
<?php // access.php
include_once 'common.php';
include_once 'db.php';

session_start();

$uid = isset($_POST['uid']) ? $_POST['uid'] : $_SESSION['uid'];
$pwd = isset($_POST['pwd']) ? $_POST['pwd'] : $_SESSION['pwd'];

if(!isset($uid)) {
  ?>

  <!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<title>Login</title>
    <meta http-equiv="Content-Type"
      content="text/html; charset=iso-8859-1" />
<head>
<style type="text/css">
<!--
.style1 {
    font-size: 16px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}
.style3 {
    font-size: 12px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}
-->
</style>

  </head>
<body>
  <h1 class="style1"> <br><br>  Login Required </h1>
  <span class="style3"><br>
  You <strong>must login to access this area </strong>of the site. <br>
  <br>
  If you are not a registered user, please contact your Admin
     to sign up for instant access!</span>
  <p><form method="post" action="<?=$_SERVER['PHP_SELF']?>">
    <span class="style3">User ID:&nbsp;&nbsp;&nbsp;&nbsp;    
    <input type="text" name="uid" size="12" />
    <br>
    <br />
    Password:</span>    
    <input type="password" name="pwd" SIZE="12" />
    <br>
    <br />
    <input type="submit" value="Login" />
  </form></p>
</body>
 </html>

  <?php
  exit;
}

$_SESSION['uid'] = $uid;
$_SESSION['pwd'] = $pwd;

dbConnect("svga");
$sql = "SELECT * FROM user WHERE
        userid = '$uid' AND password = '$pwd'";
$result = mysql_query($sql);
if (!$result) {
  error('A database error occurred while checking your '.
        'login details.\\nIf this error persists, please '.
        'contact you@example.com.');
   }

if (mysql_num_rows($result) == 0) {
  unset($_SESSION['uid']);
  unset($_SESSION['pwd']);
  ?>

  <!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
    <title> Access Denied </title>
    <meta http-equiv="Content-Type"
      content="text/html; charset=iso-8859-1" />
        <style type="text/css">
<!--
.style1 {
    font-size: 16px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}
.style3 {
    font-size: 12px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}
-->
</style>  

  </head>
  <body>
  <br/>
  <br/>

  <h1 class="style1"> Access Denied </h1>
  <p class="style3">Your user ID or password is incorrect, or you are not a
     registered user on this site. To try logging in again, click
     <a href="<?=$_SERVER['PHP_SELF']?>">here</a>. To access, please contact our Admin     !</a>.</p>
  </body>
  </html>

<?php
  exit;
}
$username = mysql_result($result,0,'fullname');
$_SESSION['user'] = mysql_result($result,0,'userid');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:41:36.590

简单的说

```
if(mysql_num_rows($result)==0) {
header('location:your_page.php');
} 
```

这会将您重定向到页面并假设您已定义`error()`方法，只需

```
echo error(); 
```

# jquery - jQuery Form file upload IE8 error response null

> ID：11226373
> 
> 赞同：1
> 
> 时间：2012-06-27T12:36:42.100
> 
> 标签：jquery, ajax, forms, internet-explorer-8, response

I have an issue specific to IE8 with the jQuery form plugin.

I am uploading a single file through a multipart/form-data and am using the jQuery plugin to do error handling. Everything works fine in FF but in IE8, the jqHXR object that gets passed in the error handling method is empty (status = 0, text = null, etc. instead of status = 500, text = "Some error message"). Here is some of the code I am using:

HTML Form:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<form name=\"myForm\" id=\"myForm\" action=\"uploadServlet\" method=\"POST\" enctype=\"multipart/form-data\">");
<input type=\"file\" id=\"browseBox\" name=\"file1\"/>
<input type=\"submit\" id=\"uploadButton\"/>
</form> 
```

jQuery:

```
$("#myForm").submit(upload);
$("#myForm").ajaxForm();

function upload() {
    var options = {
    async: false,
    success: uploadSuccessful,
    error: uploadError
}

    $("#myForm").ajaxSubmit(options);
    return false;
}

function uploadSuccessful(data) {
    alert(data);
}

function uploadError(jqXHR, textStatus, err) {
    alert(jqXHR.responseText);
} 
```

Like I mentioned jqXHR is empty in IE8, but not so in FF. The servlet responds with plain text that I display to the user. Any ideas why IE8 specifically fails at getting the response from my servlet ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:20:12.863

IE8 将文件表单作为 GET 请求发送，当您使用 JqueryForms... 您必须设置

```
type: "post" 
```

在您的 jquery 表单设置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:12:39.927

它也发生在我身上，当我运行 Fiddler 时，我发现使用 ff/ie9/chrome/etc 时，请求是通过 POST 发送的，但对于 ie8，它是使用 GET - 从服务器返回 404 错误（在我的情况下） ).. 我的解决方案是在表单中添加 method=post，但我看到你已经写过了。尝试比较 fiddler 中来自 ff 和 ie8 的请求并寻找差异。

# ruby - 在 Ruby 中创建自定义数组类并努力使用基本功能

> ID：11226375
> 
> 赞同：1
> 
> 时间：2012-06-27T12:36:46.470
> 
> 标签：ruby

我正在创建一个创建数组的类。（是的，我意识到这已经在 ruby​​ 中可用。这更像是一个练习。）SpecialArray 类基于输入创建一个数组，该输入要么由用户在创建新数组时给出，要么稍后添加到数组中。我无法连接这两个功能。创建一个数组可以正常工作，但添加它却不行。我曾认为输出 atrr_reader 会将现有数组保存在内存中，但现在我不确定。知道我怎样才能完成这项工作吗？

```
 class SpecialArray
      attr_reader :input, :output

      def initialize(*input)
        @input = input.flatten
        @output = []
        generate_array
      end

      def generate_array
        input.each do |e|
          add(e)
        end
        output
      end

            #update start
    def numerical(element)
      element.class == Fixnum
    end

    def unique(element)
      output.include? element ? false : true
    end

    def valid_e(element)
      unique(element) && numerical(element)
    end

    def numerical(elment)
      element.class == Fixnum
    end

    def unique(element)
      output.include? element ? false : true
    end

    def valid_e(element)
      unique(element) && numerical(element)
    end
        #update end

      def add(element)
        unless valid_e(element) == false
          output.push(element)
        end
        output
      end

    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:45:59.467

对我来说似乎工作正常，两者都`@input`包含`@output`我传入的数组：

```
irb(main):032:0> a = SpecialArray.new(1,2,3,4,5,6,7);
irb(main):034:0> puts a.inspect
#<SpecialArray:0x296e7e8 @input=[1, 2, 3, 4, 5, 6, 7], 
                         @output=[1, 2, 3, 4, 5, 6, 7]>
=> nil 
```

**编辑完整代码**

```
irb(main):001:0> class SpecialArray
irb(main):002:1>       attr_reader :input, :output
irb(main):003:1>
irb(main):004:1*       def initialize(*input)
irb(main):005:2>         @input = input.flatten
irb(main):006:2>         @output = []
irb(main):007:2>         generate_array
irb(main):008:2>       end
irb(main):009:1>
irb(main):010:1*       def generate_array
irb(main):011:2>         input.each do |e|
irb(main):012:3*           add(e)
irb(main):013:3>         end
irb(main):014:2>         output
irb(main):015:2>       end
irb(main):016:1>
irb(main):017:1*         #...
irb(main):018:1*
irb(main):019:1*       def add(element)
irb(main):020:2>         unless valid_e(element) == false
irb(main):021:3>           output.push(element)
irb(main):022:3>         end
irb(main):023:2>         output
irb(main):024:2>       end
irb(main):025:1>
irb(main):026:1*       def valid_e(e)
irb(main):027:2>         return true;
irb(main):028:2*       end
irb(main):029:1>
irb(main):030:1*         #...
irb(main):031:1*     end
=> nil
irb(main):032:0> a = SpecialArray.new(1,2,3,4,5,6,7);
irb(main):034:0> puts a.inspect
#<SpecialArray:0x296e7e8 @input=[1, 2, 3, 4, 5, 6, 7], 
                         @output=[1, 2, 3, 4, 5, 6, 7]>
=> nil 
```

# c# - 使用 Timer 和 color 显示莫尔斯电码

> ID：11226381
> 
> 赞同：-2
> 
> 时间：2012-06-27T12:36:55.473
> 
> 标签：c#, windows-8, microsoft-metro

嗨，伙计们，我正试图让我的屏幕使用计时器闪烁莫尔斯电码，但没有运气，你能发现任何问题吗？

对不起，但我为那些无法跳出框框思考并且甚至在不了解情况的情况下仅标记-2的人感到难过。

无论如何，发现关于使用 await Task.Delay(100) 但 gridHalfFront.Opacity = 1; 读取时没有被“激活”。不知道为什么。

```
async public void RunMorseCode()
        {
            foreach (char c in word.ToCharArray())
            {
                string rslt = Codes[c.ToString()].Trim();
                foreach (char c2 in rslt.ToCharArray())
                {
                    if (c2 == '.')
                    {
                        gridHalfFront.Opacity = 0;
                       await Task.Delay(100);

                    }
                    else
                    {
                        gridHalfFront.Opacity = 0;
                        await Task.Delay(1000);

                    }
                    gridHalfFront.Opacity = 1;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:38:41.247

您的代码缺少 Timer 事件处理程序。在调用 Start() 并经过一段时间后，将引发来自 Timer 的 Tick 事件。在那里你必须改变不透明度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:52:33.227

我认为您误解了计时器的使用。如果您将以下代码放在顶部，`StartTimer`您将明白我的意思。

```
Console.WriteLine("Started {0}", inputTiming); 
```

当您运行时，您将立即创建一堆计时器。这不是您想要的，原因有两个。首先，它们都被分配给同一个变量，所以第二个是“逻辑上”杀死第一个，等等。其次，你不希望它们一次全部创建，因为所有 1 秒都将在1 秒后相同时间，3 秒后所有 3 秒将一起运行。而且，如前所述，要在计时器到期后运行代码，您需要连接事件。

**大编辑**抱歉没有意识到你在看 Metro。我上面所说的仍然有效，但我将不再提供解决方案。

鉴于有关`Sleep()`不在 Metro 上工作的评论，我认为您需要将计时器内的所有代码用于一个字符，然后从计时器内设置下一个字符的间隔。将在几分钟内提供一些代码...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:57:14.243

在 yr 循环中使用 System.Threading.Thread.Sleep(1000) 和/或 System.Threading.Thread.Sleep(3000) 使屏幕闪烁

```
 gridHalfFront.Opacity = 1;
    if (c2 == '.')
    {
        System.Threading.Thread.Sleep(1000);
    }
    else
    {
        System.Threading.Thread.Sleep(3000);
    }
    gridHalfFront.Opacity = 0; 
```

将其更改为最适合您的方式，但不要使用那些计时器

# python - 相当于龙卷风中的@inlineCallbacks？

> ID：11226383
> 
> 赞同：2
> 
> 时间：2012-06-27T12:36:58.610
> 
> 标签：python, callback, twisted, tornado

我的 Tornado 应用程序中有很多代码，如下所示：

```
@tornado.web.asynchronous
def get(self):
    ...
    some_async_call(..., callback=self._step1)

def _step1(self, response):
    ...
    some_async_call(..., callback=self._step2)

def _step2(self, response):
    ...
    some_async_call(..., callback=self._finish_request)

def _finish_request(self, response):
    ...
    self.write(something)
    self.finish() 
```

显然，内联回调会大大简化该代码，它看起来像：

```
@inlineCallbacks
@tornado.web.asynchronous
def get(self):
    ...
    response = yield some_async_call(...)
    ...
    response = yield some_async_call(...)
    ...
    response = yield some_async_call(...)
    ...
    self.write(something)
    self.finish() 
```

有没有办法在 Tornado 中进行内联回调或以其他方式简化代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:16:41.487

你甚至可以分解电话。

我认为您所做的事情是一个接一个地调用异步调用，因此没有提供最大的延迟改进。

如果调用没有任何依赖关系（例如，将一个调用的结果用于第二个调用），您可以同时启动所有调用：

```
@tornado.web.asynchronous
@gen.engine
def get(self):
    responses = yield [ gen.Task(call) for call in required_calls ] 
```

这样，所有呼叫同时开始，因此您的整体延迟是最大（所有呼叫）而不是总和（所有呼叫）。

我在一个需要聚合许多第三方 WS 或数据库调用的应用程序中使用了它，它大大改善了整体延迟。

当然，如果调用之间存在依赖关系（如上所述），则它不起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:54:37.877

找到了。在 Tornado 中，它不被称为内联回调，而是“基于生成器的接口”—— [`tornado.gen`](http://www.tornadoweb.org/documentation/gen.html#module-tornado.gen). 因此我的代码应该类似于：

```
@tornado.web.asynchronous
@gen.engine
def get(self):
    ...
    response = yield gen.Task(some_async_call(...))
    ...
    response = yield gen.Task(some_async_call(...))
    ...
    response = yield gen.Task(some_async_call(...))
    ...
    self.write(something)
    self.finish() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T22:45:09.800

您也可以考虑只使用[Cyclone](http://cyclone.io)，这将允许您直接使用`@inlineCallbacks`（以及您想要的任何其他 Twisted 代码）。

# performance - Sending 100's of page request at the same time

> ID：11226386
> 
> 赞同：2
> 
> 时间：2012-06-27T12:37:00.873
> 
> 标签：performance, request

I want to test the performance of my website. I have hosted it on godaddy and I want to see how it performance when 100s of users are trying to access it.

Is their a way to do the above? Is their a script that can be developed to send multiple page request?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:39:53.610

考虑尝试[Jmeter](http://jmeter.apache.org/)或[siege](http://www.joedog.org/siege-home/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T20:22:43.370

[Apache Bench](http://httpd.apache.org/docs/2.0/programs/ab.html)通常用于进行负载测试（这几乎就是您所描述的）。还有许多服务可以为您完成（有些是免费的，大多数费用各不相同）。

您可以简单地编写 curl 或 whet 脚本以并行处理它，但如果您不跟踪站点在负载下的执行情况（这是其他工具的用武之地），那么仅仅对其施加负载并不是非常有用。

需要注意的一件事是，如果您只测试基本页面/应用程序，或者您是否使用真正的浏览器引擎来测试整个页面（包括图像和静态资源）。

# c++ - Alternating reads and writes to an SQLite database from within a single process

> ID：11226388
> 
> 赞同：0
> 
> 时间：2012-06-27T12:37:02.170
> 
> 标签：c++, c, sqlite

I'm using an SQLite database as a substitute for a very large in-memory data structure, so I have a simple single-threaded process repeatedly reading from and writing to the database through a single database connection. (I'm using the SQLite C API directly from within a C++ application.) If I perform a write operation, can I later read that data back in without first performing a COMMIT operation? That is, would it work to execute "BEGIN TRANSACTION" when I open the file, do all of my data processing (interleaving reads and writes), then execute "COMMIT" just before closing the file?

I was hoping that OS-level file buffers would allow for this sort of behaviour (e.g., see ["Are Unix reads and writes to a single file atomically serialized?"](https://stackoverflow.com/questions/5200923/are-unix-reads-and-writes-to-a-single-file-atomically-serialized)), or perhaps some sort of internal SQLite buffering would come into play, but couldn't find this addressed specifically anywhere.

# c++ - Function with weak atributte can not be overwritten

> ID：11226389
> 
> 赞同：2
> 
> 时间：2012-06-27T12:37:02.400
> 
> 标签：c++, c, gcc, arm, weak-linking

I would like to overwrite function (interupt handlers) with the weak attribute, but linker does not link my definition. Codes are shorted for better reading.

vectors.c

```
void NMI_Handler (void) __attribute__((weak));
void HardFault_Handler (void) __attribute__((weak));

__attribute__ ((section(".vectors"), used))
void (* const gVectors[])(void) = 
{
      NMI_Handler,
      HardFault_Handler
};

void NMI_Handler (void) { while(1); }
void HardFault_Handler (void) { while(1); } 
```

I redefine default definition in the file cpuexcept.cpp

```
extern "C" __attribute__((naked))
void NMI_Handler()
{  
    EXCEPT_ENTRY(CPUExcept);
}

extern "C" __attribute__((naked))
void HardFault_Handler()
{  
    EXCEPT_ENTRY(CPUExcept);
} 
```

If I compile and dump it, output (library lib.a) is:

```
cpuexcept.oo:     file format elf32-littlearm
rw-rw-rw- 0/0   4728 Jun 26 16:20 2012 cpuexcept.oo
architecture: arm, flags 0x00000011:
HAS_RELOC, HAS_SYMS
start address 0x00000000
private flags = 5000000: [Version5 EABI]

Sections:
Idx Name          Size      VMA       LMA       File off  Algn  Flags
  0 .text         0000051c  00000000  00000000  00000034  2**2  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000000  00000000  00000000  00000550  2**0  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000550  2**0  ALLOC
  3 .rodata       000001dc  00000000  00000000  00000550  2**2  CONTENTS, ALLOC, LOAD, READONLY, DATA
  4 .comment      00000012  00000000  00000000  0000072c  2**0  CONTENTS, READONLY
  5 .ARM.attributes 00000031  00000000  00000000  0000073e  2**0  CONTENTS, READONLY
SYMBOL TABLE:
00000000 l    df *ABS*  00000000 cpuexcept.cpp
00000000 l    d  .text  00000000 .text
00000000 l    d  .data  00000000 .data
00000000 l    d  .bss   00000000 .bss
000004e0 g     F .text  0000000a NMI_Handler
000004ec g     F .text  0000000a HardFault_Handler

000004e0 <NMI_Handler>:
4e0:    e92d 0ff0   stmdb   sp!, {r4, r5, r6, r7, r8, r9, sl, fp}
4e4:    4668        mov r0, sp
4e6:    f7ff fffe   bl  c0 <CPUExcept>  4e6: R_ARM_THM_CALL CPUExcept
4ea:    bf00        nop

000004ec <HardFault_Handler>:
4ec:    e92d 0ff0   stmdb   sp!, {r4, r5, r6, r7, r8, r9, sl, fp}
4f0:    4668        mov r0, sp
4f2:    f7ff fffe   bl  c0 <CPUExcept>  4f2: R_ARM_THM_CALL CPUExcept
4f6:    bf00        nop

vectors.o:     file format elf32-littlearm
rw-rw-rw- 0/0   4464 Jun 27 13:52 2012 vectors.o
architecture: arm, flags 0x00000011:
HAS_RELOC, HAS_SYMS
start address 0x00000000
private flags = 5000000: [Version5 EABI]

Sections:
Idx Name          Size      VMA       LMA       File off  Algn  Flags
  0 .text         00000114  00000000  00000000  00000034  2**2  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .data         00000000  00000000  00000000  00000148  2**0  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000148  2**0  ALLOC
  3 .vectors      00000130  00000000  00000000  00000148  2**2  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA
  4 .comment      00000012  00000000  00000000  00000278  2**0  CONTENTS, READONLY
  5 .ARM.attributes 00000031  00000000  00000000  0000028a  2**0  CONTENTS, READONLY
SYMBOL TABLE:
00000000 l    df *ABS*  00000000 vectors.c
00000000 l    d  .text  00000000 .text
00000000 l    d  .data  00000000 .data
00000000 l    d  .bss   00000000 .bss
00000000 l    d  .vectors   00000000 .vectors
00000000 l    d  .comment   00000000 .comment
00000000 l    d  .ARM.attributes    00000000 .ARM.attributes
00000000  w    F .text  00000002 NMI_Handler
00000004  w    F .text  00000002 HardFault_Handler

00000000 <NMI_Handler>:
0:  e7fe        b.n 0 <NMI_Handler>
2:  bf00        nop

00000004 <HardFault_Handler>:
4:  e7fe        b.n 4 <HardFault_Handler>
6:  bf00        nop 
```

Default function with the weak attribute is linked in to target application. My definition is linked correct, if I define function f() in cpuexcept.cpp and I use it in main function or if my definiton of handler is in other .c module. I use arm-none-eabi-gcc 4.6.2 (YAGARTO) compiler in cygwin.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:59:44.037

您可以尝试将您的功能定义为 like
`void NMI_Handler(void)`
而不是
`void NMI_Handler()`

由于弱定义也是`void NMI_Handler (void) __attribute__((weak));`
如此，因此链接器不会看到任何区别。

# c++ - G++ ABI compatibility list

> ID：11226391
> 
> 赞同：4
> 
> 时间：2012-06-27T12:37:09.253
> 
> 标签：c++, linux, unix, g++, abi

I have compiled my preload file on Ubuntu server (two files for x32 and x64). Where I can get list, in which I will see with what OS my compiled files are compatible and with what I should recompile for compatibility?

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:34:16.453

使用由 ISPRAS 和 Linux 基金会开发的[Linux App Checker 。](http://www.linuxfoundation.org/collaborate/workgroups/lsb/linux-application-checker-getting-started)它旨在为 Linux 应用程序执行跨发行版兼容性检查。[在此处](http://ispras.linuxbase.org/index.php/Linux_App_Checker_Getting_Started#Using_Web-UI)查看示例报告。

![在此处输入图像描述](../Images/cea1f2d5b27ef710d96ed4c8b11aef63.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:51:38.753

我将首先尝试在虚拟机中的各种 Linux 发行版上执行该程序。选择前三个最受欢迎的 Linux 发行版或您的用户最有可能拥有的发行版。

此外，您最好分发静态链接的二进制文件并将源代码提供给希望自己构建它的其他人（如果您被允许分发源代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:54:02.403

我不知道我是否完全理解你，但是，如果我的理解没有那么错误，我会从`ldd -v`. 任何架构兼容*并且*在兼容版本中安装了依赖库的操作系统都应该可以工作。

接下来，如果您计划支持更多架构，您需要明确了解它并为其中的每一种进行交叉编译。

因此，您必须重新编译： 1\. 每个不同的架构。2\. 当库版本不兼容时。

最后一个更棘手，因为您的代码可能需要特定版本才能工作，但无论如何您必须从一开始就知道它。

请告诉我这是否不是您想要的。

# asp.net - when upload larger file, getting this error:Error 404 - File or directory not found

> ID：11226392
> 
> 赞同：16
> 
> 时间：2012-06-27T12:37:12.840
> 
> 标签：asp.net, web-config

We are getting error when trying to upload a large size video file to our admin site. We are able to upload small size file without a problem, this error start happening when file size more then 10Mb, where as we already increase size by following configuration setting in web.config:

```
<httpRuntime executionTimeout="2400" maxRequestLength="102400"  useFullyQualifiedRedirectUrl="false" minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="100" enableVersionHeader="true" /> 
```

and Error message is when we upload larger file:

```
Error 404 - File or directory not found. The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable. 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T05:31:15.040

o 终于为这个问题找到了正确的解决方案，我们需要在 web 配置的安全性下添加 requestFiltering，以下是我在 web.config 中添加的代码，它开始允许我上传更大的文件：

```
<security>
       <requestFiltering>
               <requestLimits maxAllowedContentLength="104857600" />
       </requestFiltering>
</security> 
```

谢谢！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T12:15:16.063

在 web.config 中添加以下代码。

```
<system.web>
    <httpRuntime maxRequestLength="xxxxxx" />
  </system.web> 
```

`"xxx" is in KB`. 默认为`4096`, 等于`4MB`.

# sql-server-2008-r2 - 临时扩大 SQL Server 命令队列

> ID：11226400
> 
> 赞同：0
> 
> 时间：2012-06-27T12:37:37.300
> 
> 标签：sql-server-2008-r2

使用 SQL Server 2008 R2

是否可以扩大命令队列和/或命令执行的等待时间限制？

我有这个简单的应用程序，它不会耗尽 SQL Server，但不时有许多几乎同时的并发类似请求，其中一些达到死锁。

可靠性（确保命令被执行）对我来说比性能更重要（我不介意命令是否会在几秒钟的延迟内执行）。

是否有开关或命令允许更多命令驻留在队列中直到执行，或者有某种方法可以使死锁之前的时间限制[暂时]更长[，只要执行特定类型的命令]（命令可以编程作为存储过程）？

* * *

编辑：

令人惊讶的是，使用`with (tablockx)`解决了我的问题。

有人可以解释吗？

我会将其作为答案，但不会因此而受到赞扬（不会将其标记为答案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:12:22.357

我是这个问题的作者。我已经解决了我的问题。

我解决了我的问题`with (tablockx)`

这个问题比我的问题更广泛，因此它不是一个完整的答案。

我不认为这个答案是答案。

# xpages - 带有组合框控件的 optgroup

> ID：11226402
> 
> 赞同：1
> 
> 时间：2012-06-27T12:37:43.697
> 
> 标签：xpages

`<optgroup>`是否可以通过本机或 ExtLib 组合框控件在 select 内呈现标签？

我想使用本机解决方案，因此 getComponent() 或验证器将起作用。我认为，这使内联 html 与 jQuery/dojo 无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:19:10.097

`<optGroup>`tag jet似乎没有原生支持。然而，与取消 jQuery/dojo 资格的假设相反，这似乎是解决方案。getComponent()、getValue()、setValue() 等在哪里仍然有效。

唯一需要为每个`<optGroup>`您想要做的事情就是添加一个`<xp:selectItem itemLabel="With your optGroup label" itemValue"optGroup1"></xp:selectItem>`. 当使用多个`<optGroups>'s`时，`itemValue`需要增加 1。我在下面粘贴了一个示例，希望这会有所帮助。

```
<xp:this.resources>
    <xp:script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" clientSide="true"></xp:script>
</xp:this.resources>
...
<xp:comboBox id="comboBox1" styleClass="optGroup">
    <xp:selectItem itemLabel="Swedish Cars" itemValue="optGroup1"></xp:selectItem>
    <xp:selectItem itemLabel="Volvo" itemValue="volvo"></xp:selectItem>
    <xp:selectItem itemLabel="Saab" itemValue="saab"></xp:selectItem>
    <xp:selectItem itemLabel="German Cars" itemValue="optGroup2"></xp:selectItem>
    <xp:selectItem itemLabel="Mercedes" itemValue="mercedes"></xp:selectItem>
    <xp:selectItem itemLabel="Audi" itemValue="audi"></xp:selectItem>
</xp:comboBox>

<xp:scriptBlock id="scriptBlock1">
    <xp:this.value><![CDATA[
    //Iterate across the <option>'s for which the itemValues begin with "optGroup".
    $('.optGroup option[value^="optGroup"]').each(function(index, node) {
        //Use the actual itemValue ("optGroup1") to get all its siblings until the next
        //<option> is found with (again) an itemValue of "optGroup" (i.e. "optGroup2").
        $('.optGroup option[value="' + node.value + '"]').
            //No harm for last iteration: .nextAll() will be used if the selector is
            //not matched or is not supplied (in this example "optGroup3" won't get a match).
            nextUntil('.optGroup option[value="optGroup' + (index + 2) + '"]').
            //Wrap them in a <optGroup> tag and give it its label (itemLabel).
            wrapAll('<optGroup label="' + node.text + '"></optGroup>');
        //Remove the initial <option> since we no longer need it.
        $(this).remove();   
    });
    ]]></xp:this.value>
</xp:scriptBlock>

<xp:button value="Submit" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:
        print("Submitting: " + getComponent("comboBox1").getValue() );
        }]]></xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:10:52.843

我找到了我的问题的答案。Domino Designer 中组合框的计算值可以返回字符串向量/数组，通常作为@DbLookup 或@DbColumn 的返回值。在试验过程中，我发现您可以为选择项返回本机组件，包括组（从选择项继承）。以下片段将构建我想要的：项目的分组层次结构。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:comboBox id="comboBox1" value="#{viewScope.combo}">
        <xp:selectItems>
            <xp:this.value><![CDATA[${javascript:var itms = new javax.faces.model.SelectItem[2];
var itm = null;
itm = new javax.faces.model.SelectItem();
itm.setLabel("label1");
itms[0] = itm;
itm = new javax.faces.model.SelectItem();
itm.setLabel("label2");
itms[1] = itm;

var g = new javax.faces.model.SelectItemGroup();
g.setLabel("Group");
g.setSelectItems(itms);
g
}]]></xp:this.value>
        </xp:selectItems>
    </xp:comboBox>
</xp:view> 
```

样本：

![组合示例](../Images/b4ba7b0c74416c37d999fc8298b8d77c.png)

基于此示例，您可以组合许多数据源来构建计算`<optgroup>`组合，包括支持 bean 或作用域变量。

# php - 如何从另一个控制器加载方法？

> ID：11226408
> 
> 赞同：0
> 
> 时间：2012-06-27T12:38:12.710
> 
> 标签：php, codeigniter

我有以下控制器：

```
class Tests extends CI_Controller {

        public function update_record_test()
        {
              //some methods
        }
}

?> 
```

但我需要从 Controller1 控制器执行 Method1 方法。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:40:51.993

这里没有太多信息，或者我可能遗漏了一些东西，但是有什么问题

```
class Tests extends CI_Controller {

    public function update_record_test()
    {
          $controller1 = new Controller1();
          $controller1->Method1();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:41:30.683

如果你的意思是你想执行你的主类 CI_CONTROLLER 的一个函数，试试这个。

```
 parent::Method1(); 
```

查看[http://php.net/manual/en/keyword.extends.php](http://php.net/manual/en/keyword.extends.php)获取更多示例

# google-apps-script - 单击提交时发生 Google Apps 脚本服务器错误 - 在没有更改脚本的情况下突然发生

> ID：11226411
> 
> 赞同：1
> 
> 时间：2012-06-27T12:38:20.213
> 
> 标签：google-apps-script

我们的电子表格脚本在 3 个月内没有更改。截至昨天，当单击已完美运行 3 个月的特定功能上的提交按钮时，我们收到错误“遇到错误：我们很抱歉发生了服务器错误，请稍候，然后重试”。什么都没有改变，这已通过查看脚本修订历史得到验证。此外，其他函数也会出现问题，例如“无法在对象中找到函数 trim()....” - 同样，这一直很好。

唯一改变的是，对于有问题的文档，我们在昨天早上和用户开始报告此问题后不久删除了 1 个用户并读取了一个用户（gmail 地址）。顺便说一句，我不相信我在昨天之前曾经删除过共享用户。

我唯一的办法是重新制作床单吗？？？同样，此脚本没有任何更改，并且在我将用户从共享中删除之前它可以完美运行。

谢谢。

# ajax - 没有静态控制器 URL（魔术字符串）的 ASP.NET MVC AJAX 调用

> ID：11226413
> 
> 赞同：0
> 
> 时间：2012-06-27T12:38:37.393
> 
> 标签：ajax, asp.net-mvc

**问题：**

什么是从 JavaScript 调用我的 MVC 控制器/操作的清晰、安全和系统的方法，但将相关的 URL 保存在中心位置以便在控制器更改时进行更新？还是在运行时动态生成 URL？或者获取 AJAX 控制器链接的编译时检查？

**研究/过去的尝试：**

我最近将 T4MVC 插入到我的 MVC 项目中。伟大的！编译时检查我的视图中的控制器链接 - 但我的 JavaScript 中仍然散落着控制器 URL。更糟糕的是，我已经在项目生命周期中改进了我的工作方式，所以我以多种方式进行，但我仍然不满意。

* * *

1）一种方式：

```
locationAutoComplete = new AjaxQueue({
 Controller: "Utilities", // null for current controller
 Action: "GetMatchingLocations",
 DataModel: null, // null for raw JSON, or a local model to populate
 MaxQueuedRequests: 0
}); 
```

* * *

2）另一种方式：

```
locationAutoComplete = function (location) {
 return $.ajaxPost(resolveUrl("~/Utilities/GetMatchingLocations"));
} 
```

* * *

3) 上面的 1 和 2 都使用了在 Master/Layout JavaScript 片段中定义的项目根，但仍然使用未经检查的 URL 字符串。所以现在我通过在我的 .CSHTML 视图中简单地定义控制器字符串开始从 T4MVC 中受益：

```
var locationLookupController = @Url.Action(MVC.Utilities.GetMatchingLocations()); 
```

* * *

4) SO 文章（[Ajax call Into MVC Controller-Url Issue](https://stackoverflow.com/questions/9988634/ajax-call-into-mvc-controller-url-issue)）稍微解决了这个问题。它讨论了方法 3，但也建议使用 AjaxHelper 命名空间。由于我大量使用 jQuery AJAX 和一些非常自定义的交互（例如，将结果加载到本地数据模型中，而不是在单击事件中，而是在时间间隔中），我认为它对我没有多大帮助。今天，我什至没有在我的任何页面上包含 MS AJAX JavaScript 代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:46:22.300

继续使用 T4MVC。将它与一些 jQuery 和 HTML5 data-* 属性混合在一起。这是一个例子：

```
<div data-location-lookup-url="@Url.Action(MVC.Utilities.GetMatchingLocations())">

...

locationAutoComplete = function (location) {
    var url = $('[data-location-lookup-url]').data('location-lookup-url');
    return $.ajaxPost(url);
} 
```

# java - Java 中的迭代器行为

> ID：11226418
> 
> 赞同：1
> 
> 时间：2012-06-27T12:38:54.767
> 
> 标签：java, iterator, iterable

我对 Java 中的迭代器行为有疑问。

我有这样的电话：

`myIterable.iterator().hasNext()`

如果此调用返回 true，我可以确定该集合至少有两个元素吗？从 Java API 规范中，我只能发现 true 意味着还有一个元素可以通过`next()`. 但是如果指针在最开始会发生什么（意味着是否`hasNext()`可以单独识别第一个元素）

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html)

如果迭代有更多元素，则为 true。但是更多元素也可能意味着第一个元素？

[编辑]

我怎么知道迭代器是否有两个元素要遍历？当然，我可以迭代和计数，但在我的情况下，我不能返回或迭代两次或克隆迭代器，这是一个 Hadoop 迭代器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:40:34.387

它可能意味着第一个。你只能确定它有*多个*元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:03:47.113

hasNext() 返回 true 或 false 使您能够区分零个项目和一个或多个（在迭代开始时）。

您想知道它是否有两个或更多，而无需开始迭代。我认为，基本上，你不能。公开该信息不仅仅是迭代器必须做的：使下一个且仅下一个项目可用（以及有关该项目是否存在的信息）。

可能迭代器本身甚至还没有这些知识！

当然，您可以自由地记住您已经从列表中取出的项目。然后你可以稍后使用它们，一旦你知道列表中实际上有两个或更多项目。

*如果您需要将迭代器传递给其他代码，您可以编写自己的实现迭代器的类，在内部将前两项作为成员变量记住并首先分发它们，然后继续迭代原始迭代器中的其余项（如果还有剩余） - 因此对原始迭代器的引用也需要存储在您的定制迭代器中*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T12:41:29.207

Java 迭代器位于第一个元素*之前。*你的表达`myIterable.iterator().hasNext()`表明至少有一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:41:27.540

`hasNext`告诉你还有另一个元素可以用`next()`. 所以这只是意味着你至少有一个元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:46:00.543

如果`myIterable.iterator().hasNext()`返回`true`，则表示至少有一个元素，您可以使用它`next()`来访问它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T12:51:08.407

不。如果 hasNext() 返回 true 意味着该集合具有**至少一个元素**，因为迭代器的**原点位置应该****在第一个元素之前**。

```
List l = new ArrayList();
l.add(1);
Iterator it = l.iterator();
while (it.hasNext()) {
System.out.println(it.next());
} 
```

结果将是**1**因为迭代器的**原点位置应该****在第一个元素之前**。当我们第一次检查it.hasNext **(** **)**时，它会返回**true**，因为它只有一个元素。然后，使用 it.next() 打印元素。**现在只是，迭代器在第一个位置。**当我们**第二次检查****it.hasNext()**时，它会返回**false**。

 ******* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-27T12:58:05.227

> 我怎么知道迭代器是否有两个元素要迭代？当然，我可以迭代和计数，但在我的情况下，我不能返回或迭代两次或克隆迭代器，这是 hadoop 可迭代的。

没有办法做到这一点。也许迭代器不适合您的场景。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T13:21:00.383

在迭代器中，它有一个名为 cursor 的字段。这个 cursor 的初始值是集合对象的大小。当你调用方法 next() 时，它会--。hasNext() 方法检查光标是否等于零。它的零返回false，否则返回true。

But the list and map is not the same, their difference is the concrete realization, the original is the same.List check size, map check end node.******

# azure - 在 Azure 云中创建子文件夹时出现问题

> ID：11226420
> 
> 赞同：0
> 
> 时间：2012-06-27T12:38:57.003
> 
> 标签：azure, azure-storage

我正在使用 Microsoft 提供的 Azure Api 进行云存储...在创建子文件夹时遇到了一个不寻常的错误。即，当我在任何容器中创建子文件夹时，它可以在几秒钟内轻松创建。但是，当我尝试再次创建一个具有不同名称的子文件夹时，与前一个相比，它需要更多时间。

我再次尝试它很容易创建。这意味着子文件夹编号。1 , 3 ,5 ,7 等很容易创建，甚至没有。例如 2、4 等子文件夹是延迟创建的。即“创建备用子文件夹花费了太多时间”

请让我知道是否有任何解决此错误的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:37:51.930

您是在 blob 存储中创建这些吗？文件夹，严格来说是不存在的。它们只是嵌入在文件名中的“/”字符（或您指定的任何分隔符）。因此，您使用路径保存文件而不隐式创建路径。

在文档中，他们甚至将这些称为“虚拟文件夹”，因为它们实际上并不存在。

# android - MapView的Overlay的onTap调用activity中的方法

> ID：11226428
> 
> 赞同：0
> 
> 时间：2012-06-27T12:39:40.097
> 
> 标签：android, overlay, android-mapview, android-maps

我希望在我的叠加项目中根据 onTap 事件更新 Spinner。在这种情况下，最佳做法是什么？我应该将 Spinner 传递给覆盖项目吗？更新 Spinner 的方法目前在 MapActivity 中，有没有办法从 onTap 事件中调用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:45:14.127

我做了类似的事情，最后我`Overlay`在构造函数中将 Spinner 传递给了我。然后您可以更新代码`Spinner`内部的数组适配器。`Overlay`希望它有效！

# java - Glassfish 服务器中的记录器错误

> ID：11226429
> 
> 赞同：1
> 
> 时间：2012-06-27T12:39:42.290
> 
> 标签：java, jakarta-ee, glassfish, jetty, java-server

我们在码头服务器上的项目并完全工作，然后这个项目部署在 Glassfish 服务器上，但这里有一些错误。

像记录器和一些东西等。

错误 ：：

```
 [#|2012-06-27T17:14:18.710+0530|SEVERE|glassfish3.1.2|org.apache.catalina.core.ContainerBase|_ThreadID=52;_ThreadName=AutoDeployer;|ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: java.lang.ExceptionInInitializerError
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:353)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at org.glassfish.deployment.autodeploy.AutoOperation.run(AutoOperation.java:145)
        at org.glassfish.deployment.autodeploy.AutoDeployer.deploy(AutoDeployer.java:575)
        at org.glassfish.deployment.autodeploy.AutoDeployer.deployAll(AutoDeployer.java:461)
        at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:389)
        at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:380)
        at org.glassfish.deployment.autodeploy.AutoDeployService$1.run(AutoDeployService.java:220)
        at java.util.TimerThread.mainLoop(Timer.java:555)
        at java.util.TimerThread.run(Timer.java:505)
Caused by: java.lang.IllegalArgumentException: javax.servlet.ServletException: java.lang.ExceptionInInitializerError
        at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2743)
        at org.apache.catalina.core.StandardContext.addApplicationListener(StandardContext.java:1966)
        at com.sun.enterprise.web.TomcatDeploymentConfig.configureApplicationListener(TomcatDeploymentConfig.java:235)
        at com.sun.enterprise.web.TomcatDeploymentConfig.configureWebModule(TomcatDeploymentConfig.java:94)
        at com.sun.enterprise.web.WebModuleContextConfig.start(WebModuleContextConfig.java:274)
        at com.sun.enterprise.web.WebModuleContextConfig.lifecycleEvent(WebModuleContextConfig.java:172)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:149)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5329)
        ... 26 more
Caused by: javax.servlet.ServletException: java.lang.ExceptionInInitializerError
        at org.apache.catalina.core.StandardContext.createListener(StandardContext.java:2853)
        at org.apache.catalina.core.StandardContext.loadListener(StandardContext.java:4806)
        at com.sun.enterprise.web.WebModule.loadListener(WebModule.java:1599)
        at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2740)
        ... 33 more
Caused by: java.lang.ExceptionInInitializerError
        at org.apache.log4j.Logger.getLogger(Logger.java:118)
        at mwp.slktechlabs.web.SessionListener.<clinit>(SessionListener.java:35)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.createManagedObject(InjectionManagerImpl.java:307)
        at com.sun.enterprise.web.WebContainer.createListenerInstance(WebContainer.java:761)
        at com.sun.enterprise.web.WebModule.createListenerInstance(WebModule.java:1987)
        at org.apache.catalina.core.StandardContext.createListener(StandardContext.java:2851)
        ... 36 more
Caused by: java.lang.SecurityException: Access to default session denied
        at javax.mail.Session.getDefaultInstance(Session.java:320)
        at mwp.slktechlabs.log.SMTPSSLAppender.createSession(SMTPSSLAppender.java:31)
        at org.apache.log4j.net.SMTPAppender.activateOptions(SMTPAppender.java:121)
        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
        at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)
        at org.apache.log4j.PropertyConfigurator.parseCatsAndRenderers(PropertyConfigurator.java:568)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:442)
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)
        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
        at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
        ... 46 more
|#] 
```

mwp 是我们的项目和记录器错误。

```
Caused by: java.lang.ExceptionInInitializerError
        at org.apache.log4j.Logger.getLogger(Logger.java:118)
        at mwp.slktechlabs.web.SessionListener.<clinit>(SessionListener.java:35) 
```

和行号：35 是

```
private static final Logger logger = Logger.getLogger(SessionListener.class); 
```

在 mwp.slktechlabs.web.SessionListener.java 文件中。

所以请帮忙，如何消除这个错误？

谢谢，

卡姆莱什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:44:14.200

您已将记录器配置为也使用电子邮件传输。

> 原因：java.lang.SecurityException：在 mwp.slktechlabs.log.SMTPSSLAppender.createSession(SMTPSSLAppender.java:31) 的 javax.mail.Session.getDefaultInstance(Session.java:320) 拒绝访问默认会话

安全管理器不允许在您的配置中使用它，因此您应该重新配置记录器以不发送电子邮件，或重新配置安全管理器以允许这样做。

# iphone - uiscrollView 中的 UIActionSheet

> ID：11226438
> 
> 赞同：0
> 
> 时间：2012-06-27T12:40:00.677
> 
> 标签：iphone, uiview, uiscrollview, uiactionsheet

**来自评论的**更新：****

 **> 雅它为我工作。犯了一个愚蠢的错误:-(在viewDidLoad中，我为删除按钮调用了一个backAction方法而不是showDeleteActionSheet。这就是它造成这个麻烦的原因。非常感谢

* * *

我有一个 UIScrollView，其中添加了多个 UIView。我想通过使用 UIActionSheet 从 UIScrollView 中删除特定视图。但它不起作用..

```
.h file
-------
@interface myScrollViewController : UIViewController <UIScrollViewDelegate,UIActionSheetDelegate>
{
UIScrollView *holdSlideScrollView;
UIImageView *editPaperView;
}

@property (nonatomic, strong) UIScrollView *holdSlideScrollView;
@property (nonatomic, strong) UIScrollView *holdSlideScrollView;

- (void) showDeleteActionSheet;
@end

.m file
———

@implementation SlideViewController
- (void) loadView
{ 
    [super loadView];
     for (int i= 0; i < 2; i++)
     {
      UIImageView *editPaperView = [[UIImageView alloc] initWithFrame:CGRectMake(6.0f+i*320, 4.0f, 307.0f, 409.0f)];
        [editPaperView setImage:[UIImage imageNamed:@"paper.png"]];
        editPaperView.userInteractionEnabled = YES;
        editPaperView.tag = i;

       UIButton *deleteButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [deleteButton setAlpha:0.8f];
        [deleteButton setFrame:CGRectMake(265.0f, 378.0f, 30.0f, 30.0f)];
        [deleteButton setImage:[UIImage imageNamed:@"ps_delete.png"] forState:UIControlStateNormal];
        //[deleteButton setImage:[UIImage imageNamed:@“delete_bplushigh.png"] forState:UIControlStateHighlighted];
        [deleteButton addTarget:self action:@selector(showDeleteActionSheet) forControlEvents:UIControlEventTouchUpInside];
        [editPaperView addSubview:deleteButton];

        [holdSlideScrollView addSubview:editPaperView];
    }

    [self.view addSubview:holdSlideScrollView];

}

- (void) showDeleteActionSheet
{
       UIActionSheet *popupDeleteActionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:nil];
        popupDeleteActionSheet.actionSheetStyle = UIActionSheetStyleBlackOpaque;
        [popupDeleteActionSheet showInView:self.view];
        //popupDeleteActionSheet = nil;
}
@end 
```

这有什么问题？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:48:36.400

如果您添加，似乎`UIActionSheet+UIScrollView`总是有问题`UIActionSheet``self.view`

试试[这个](http://jomnius.blogspot.in/2010/11/uiactionsheet-last-button-not.html)。它对我有用..**

# git - git blame - 忽略未提交的更改

> ID：11226439
> 
> 赞同：17
> 
> 时间：2012-06-27T12:40:04.010
> 
> 标签：git, blame

部分输出`git blame <file>`：

```
 ...
   d6182477 (<author>          2012-06-22 09:44:02 -0400 239) ...
   d6182477 (<author>          2012-06-22 09:44:02 -0400 240) ...
   25f98f3f (<author>          2012-06-15 15:44:00 -0400 245) ...
   25f98f3f (<author>          2012-06-15 15:44:00 -0400 246) ...
   35853aa2 (<author>          2012-06-22 08:12:41 -0400 247) ...
   25f98f3f (<author>          2012-06-15 15:44:00 -0400 248) ...
-> 00000000 (Not Committed Yet 2012-06-27 08:33:35 -0400 249) ...
-> 00000000 (Not Committed Yet 2012-06-27 08:33:35 -0400 249) ...
   25f98f3f (<author>          2012-06-15 15:44:00 -0400 250) ...
   35853aa2 (<author>          2012-06-22 08:12:41 -0400 251) ...
   25f98f3f (<author>          2012-06-15 15:44:00 -0400 252) ...
    ... 
```

如何`git blame`忽略文件中未提交的更改？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T12:41:41.123

```
git blame HEAD <file> 
```

从`git blame`手册：

> 使用上次修改该行的修订版中的信息注释给定文件中的每一行。**或者，从给定的修订开始注释。**

# postgresql - Postgresql 选择限制相等的值？

> ID：11226441
> 
> 赞同：0
> 
> 时间：2012-06-27T12:40:09.613
> 
> 标签：postgresql

我有一张 postgresql 表，用于存储来自不同站点的一些故事。在这张桌子上，我得到了 story_id 和 site_id 字段。其中story_id 是主键，site_id 是我从中获取这个故事的站点的ID。

我需要从这个表中选择最新的 30 个添加的故事。但我不想从同一个站点获得超过 2 个故事......

所以，如果我有这样的事情：

```
story_id  | site_id
    1     |    1
    2     |    1
    3     |    2
    4     |    1
    5     |    3 
```

我的结果必须是：story_ids = 1,2,3,5！
必须跳过 4，因为我已经选择了 2 个 site_id 为 1 的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:50:54.353

```
select story_id,
       site_id 
from (
   select story_id,
          site_id,
          row_number() over (partition by site_id order by story_id desc) as rn
   from the_table
) t
where rn <= 2
order by story_id desc
limit 30 
```

如果您想要“每组”多于或少于 2 个条目，则必须调整外部 where 子句中的值。

# c# - 从 Internet 下载图像并在 WinRT 中将其转换为 byte[]

> ID：11226446
> 
> 赞同：1
> 
> 时间：2012-06-27T12:40:20.047
> 
> 标签：c#, wpf, windows-runtime

我正在尝试通过 URL 从 Internet 将图像下载到我的 Windows8 应用程序并将其转换为字节 []。（BitmapImage 不可序列化）

不幸的是，当我尝试处理此代码时，它在字节数组初始化时崩溃，因为 Stream 不可搜索。

有没有办法做到这一点？我已经红了，在 WinRT 中还没有可搜索的流......

```
private async Task<byte[]> DownloadImageFromWebsite(string url)
        {
            //BitmapImage result = null;
            byte[] result = null;

            try
            {
                HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);

                WebResponse response = await request.GetResponseAsync();

                Stream imageStream = response.GetResponseStream();
                result = new byte[imageStream.Length];
                await imageStream.ReadAsync(result, 0, (int)imageStream.Length);

                response.Dispose();
            }
            catch (Exception ex)
            {
                return null;
            }

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:57:47.873

你的问题是这一行：

```
result = new byte[imageStream.Length]; 
```

对于 HTTP 响应流，在读取之前您不知道它有多大。

*如果*服务器发送一个`Content-Length`标头，那么您应该能够读取它并使用它来调整您的数组大小。但是，您仍然必须退回到将整个流（大小未知）读入内存，如下所示：

```
private async Task<byte[]> DownloadImageFromWebsiteAsync(string url)
{
  try
  {
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
    using (WebResponse response = await request.GetResponseAsync())
    using (var result = new MemoryStream())
    {
      await imageStream.CopyToAsync(result);
      return result.ToArray();
    }
  }
  catch (WebException ex)
  {
    return null;
  }
} 
```

PS 我建议你使用[`HttpClient`](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.http.httpclient%28v=vs.110%29.aspx)而不是`HttpWebRequest`.

# c# - InvalidCastException long 到 ulong

> ID：11226448
> 
> 赞同：6
> 
> 时间：2012-06-27T12:40:22.837
> 
> 标签：c#, .net

我有以下方法：

```
public static T ExecuteScalar<T>(
    string query, 
    SqlConnection connection, 
    params SqlParameter[] parameters) where T : new()
{
    // Create SqlCommand
    SqlCommand command = CreateCommand(query, connection, parameters);

    // Execute command using ExecuteScalar
    object result = command.ExecuteScalar();

    // Return value as expected type
    if (result == null || result is DBNull) return default(T);
    return (T)result;
} 
```

我想`MIN_ACTIVE_ROWVERSION`将数据库作为`ulong`. 奇怪的是.. 下面的第一个方法调用会产生错误，但第二个方法调用工作正常。

*方法调用 1*产生错误：

```
ulong minActiveRowversion = 
    SqlUtils.ExecuteScalar<ulong>(
        "SELECT CAST(MIN_ACTIVE_ROWVERSION() AS BIGINT)"
        , _connectionString); 
```

错误：

```
System.InvalidCastException: Specified cast is not valid. 
```

*方法调用 2*工作正常：

```
ulong minActiveRowversion = 
    (ulong)SqlUtils.ExecuteScalar<long>(
        "SELECT CAST(MIN_ACTIVE_ROWVERSION() AS BIGINT)"
        , _connectionString); 
```

我不明白这是怎么可能的，因为该`command.ExecuteScalar()` 方法的结果是这样的：

```
object result       | 1955612
result.GetType()    | {Name = "Int64" FullName = "System.Int64"} 
```

1.  有人能告诉我**为什么**第一种情况不可能，而第二种情况有效吗？
2.  有人可以告诉我**如何**解决它，以便我可以使用场景 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:42:25.547

**为什么**

You can only unbox a value type to it's original type. In your case, the cast first needs to go to `long` from `object` and *then* to `ulong`.

See this question for more detail:

[Why can't I unbox an int as a decimal?](https://stackoverflow.com/questions/1085097/why-cant-i-unbox-an-int-as-a-decimal)

It also links a [blog post](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx) by Eric Lippert.

**How**

One way, as you know, is to cast to the original type before casting to `T` - unless, of course, the original type *is* `T`.

As mentioned in the comments, another way is to use conversion routines (`Convert.ToUInt64`) and not explicit casting.

This could potentially be achieved using a `Func<object, T>`:

```
public static T ExecuteScalar<T>(
    Func<object, T> conversionFunctor,
    string query, 
    SqlConnection connection, 
    params SqlParameter[] parameters) where T : new()
{
    // Create SqlCommand
    SqlCommand command = CreateCommand(query, connection, parameters);

    // Execute command using ExecuteScalar
    object result = command.ExecuteScalar();

    // Return value as expected type
    if (result == null || result is DBNull) 
        return default(T);

    return conversionFunctor(result);
} 
```

Making your call:

```
ulong minActiveRowversion = 
    SqlUtils.ExecuteScalar<ulong>(
        Convert.ToUInt64,
        "SELECT CAST(MIN_ACTIVE_ROWVERSION() AS BIGINT)"
        , _connectionString); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T13:01:24.783

Adam's answer correctly identifies the problem; here is a solution: you can use LINQ to unbox any type, as long as it can be cast to `T` with a built-in or a custom conversion.

```
static T UnboxUnchecked<T>(object obj) {
    var pe = Expression.Parameter(typeof(object));
    return Expression.Lambda<Func<object,T>>(
        Expression.Convert(
            Expression.Convert(pe, obj.GetType())
        ,   typeof (T)
        )
    ,   pe
    ).Compile()(obj);
} 
```

This method produces a LINQ expression that first unboxes the object to its actual type, and then applies the conversion. Replace the last line of your method

```
return (T)result; 
```

with

```
return UnboxUnchecked<T>(result); 
```

to make it work.

Here is [a link to an article](http://www.codeproject.com/Articles/61460/Using-LINQ-for-type-conversion) that explains how to make conversions of this kind more efficient by caching the compiled lambdas.

# dns - 鱿鱼 /etc/hosts

> ID：11226453
> 
> 赞同：0
> 
> 时间：2012-06-27T12:40:50.500
> 
> 标签：dns, squid

我有一个 LAN XXXX/24 和一个网关，我们被告知在其上运行 Squid。在同一个局域网中，我们有商业部门和软件开发人员。

我们的网站在公共 IP YYYY 上有一个生产版本，在不同的私有 LAN ZZZZ/24 上有一个开发版本

XXXX/24 的开发者需要对我们网站的两个不同版本进行 HTTP 请求。他们过去常常相应地更改 /etc/hosts 。

现在我们在中间有透明的 squid，它在 HTTP 请求之前解析 DNS，所以所有请求最终都在我们网站的公共生产版本中。

我不知道允许透明代理工作的 squid 内部如何工作，但是否有一种解决方法只允许开发人员的机器在他们的机器上本地控制他们的请求将去哪里？像“如果这些机器，比如 XXXX/29，机器，不要进行 DNS 查询”之类的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:07:26.550

作为透明代理的 Squid看*不到*目标服务器的 IP 地址——它只看到主机名，然后使用 DNS 自己进行地址解析。

但是您的路由器/互联网网关上的某处必须有一个“透明代理”规则，透明代理才能工作。您需要将其更改为：“如果目标 IP 为 ZZZZ/24，请勿使用透明代理” - 这样您的开发服务器将无需代理直接访问。这样你仍然可以使用你的`/etc/hosts`技巧。

# jquery - 骨干直接 url 访问中断集合

> ID：11226455
> 
> 赞同：2
> 
> 时间：2012-06-27T12:40:54.320
> 
> 标签：jquery, backbone.js

当用户转到 时`http://example.com/#/playlist`，我想列出一些歌曲。

`http://example.com`当您第一次访问并单击链接时，它会起作用（列出所有歌曲）`<a href="#/playlist">Playlist</a>`。

但是，如果您直接转到`http://example.com/#/playlist`，则不会显示任何内容。

当我记录 this.collection 属性时，集合总是相同的（如果你使用链接，或者直接访问）。

唯一不同的是，`this.collection.each( function ( song ) {} );`在下面的 render-function 中，直接访问 URL 时不会循环。

这是代码：

```
define(
    [
        'jQuery',
        'Underscore',
        'Backbone',
        'collections/songlist',
        'views/song'
    ],

    function ($, _, Backbone, SonglistCollection, SongView)
    {
        var PlaylistView = Backbone.View.extend({

            // properties
            el: '#content',
            tagName: 'ul',
            collection: new SonglistCollection(),

            /**
             * Initialize
             */
            initialize: function()
            {
                // load songs
                this.collection.bind( 'reset', this.render(), this );
                this.collection.fetch();
            },

            /**
             * Render
             */
            render: function ()
            {
                this.$el.html('');

                console.log(this.collection);

                this.collection.each( function ( song )
                {
                    var songItem = new SongView( { model: song } );
                    this.$el.append( songItem.el );

                }, this);
            }

        });

        return new PlaylistView;

    }
); 
```

问题出现在这里，在“*每个循环*”中：

```
render: function ()
                {
                    this.$el.html('');

                    console.log(this.collection);

                    this.collection.each( function ( song )
                    {
                        var songItem = new SongView( { model: song } );
                        this.$el.append( songItem.el );

                    }, this);
                } 
```

**更新**

这是我的路由代码：

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'views/start',
    'views/playlist'
],

    function ($, _, Backbone, startView, playlistView)
    {
        var AppRouter = Backbone.Router.extend({
           routes: {
               'playlist': 'playlist',

               // default
               '*actions': 'start'
           },

           start: function ()
           {
               // call render on the module we loaded via the dependency array
               // views/items/list
               startView.render();
           },

            playlist: function ()
            {
                playlistView.render();
            },

            defaultAction: function ( actions )
            {
                // no default action, let's just log what the url was
                console.log('No route:', actions)
            }
        });

        var initialize = function ()
        {
            var app_router = new AppRouter;
            Backbone.history.start();
        }

        return {
            initialize: initialize
        };
    }

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:48:53.613

我认为问题在于，当您调用时`playlistView.render();`，仍然没有填充。`Router``playlist.collection`

你相信`console.log(this.collection);`向你展示的东西，但你不能相信`console.log()`复杂的对象。

查看：

*   [https://stackoverflow.com/a/9912865/316700](https://stackoverflow.com/a/9912865/316700)
*   [http://jsfiddle.net/fguillen/2NZzQ/3/](http://jsfiddle.net/fguillen/2NZzQ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:43:07.813

我认为问题与您`PlayListView`在将其返回到`require.js`. `render`此外，您在集合绝对完成获取之前任意调用 PlaylistView 的方法。

1.  所以当你通过`http://example.com`：
    1.  需要初始化 startView
    2.  需要 init playListView -> 集合获取开始
    3.  到 startView 的路线
    4.  playListView 获取返回 -> 集合现在已填充
    5.  单击链接-> 正确渲染 playListView
2.  当你通过时`http://example.com/#/playlist`：
    1.  需要初始化 startView
    2.  需要 init playListView -> 集合获取开始
    3.  路由到 playListView -> 不正确地渲染 playListView，因为集合仍在获取（也就是没有可循环的内容）
    4.  playListView 获取返回 -> 集合现在已填充

将此行更改 `return new PlaylistView;` 为此 `return PlaylistView;`

当然也`Router`应该改变

```
function ($, _, Backbone, startView, **PlaylistView**) // change the variable name
...
var AppRouter = Backbone.Router.extend({
  ...
  playlistView: null, // Add attribute for the router
  ...
  playlist: function () {
    playlistView = new PlayListView();
    // No render because you bound the render to the reset of the collection !!!
  },
  ...
}
... 
```

现在你不会初始化你的 PlaylistView，而必要的东西仍然没有加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:13:50.447

在 MVC 模式中，视图响应模型的变化。您在代码中进行了以下设置：

```
this.collection.on('reset', this.render, this); 
```

但问题是您不会导致重置，这反过来会导致您的视图重新渲染。因此，不要在“播放列表”中调用渲染方法，而是将集合的 url 更改为适当的 REST 端点，然后执行 collection.fetch。一旦你进行了获取，将触发一个“重置”，然后你的渲染将被调用，正确地反映更新的集合。

# c# - 在集合中的每一行上循环，除了新行。

> ID：11226458
> 
> 赞同：1
> 
> 时间：2012-06-27T12:41:04.977
> 
> 标签：c#, datagridview

我正在使用 c# 开发一个 WinApp 项目。我正在使用datagridview，当我尝试在单元格内写入时，会自动创建一个新行。因此，如果我使用 2 行，则会自动创建第 3 行，并将其计入集合中。

```
 foreach (DataGridViewRow row in grdCrew.Rows)
        {

        } 
```

因此，这条语句被执行了 3 次，共 2 次。我怎样才能避免这种情况并执行语句 2\. ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:44:55.237

`DataGridViewRow`s 有一个`IsNewRow`属性，如果它是由 插入的空行，则该属性为真`DataGridView`。

```
foreach (DataGridViewRow row in grdCrew.Rows)
{
    if (!row.IsNewRow)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:43:07.150

一种方法是制作集合的副本：

```
foreach (DataGridViewRow row in grdCrew.Rows.ToArray())
{

} 
```

# cygwin - cygwin下用vim共享系统剪贴板

> ID：11226469
> 
> 赞同：3
> 
> 时间：2012-06-27T12:41:39.277
> 
> 标签：cygwin, vim

我在 Windows7 下构建了一个非常好的 cygwin 设置。我在cygwin下安装了vim。现在，我无法与 vim 共享系统剪贴板。`vim --version`给出：

```
+clientserver +clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments
+xsmp_interact +xterm_clipboard -xterm_save 
```

我尝试`set clipboard+=unnamed`在我的 .vimrc 中进行设置，但没有用。我尝试了`P`, `"+p`，`*p`但`"*p`这些都没有从系统剪贴板粘贴。但是，在 cygwin 提示符上按 SHIFT+Ins 会从系统剪贴板粘贴。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-28T08:00:11.527

在 cygwin 下从 vim 复制文本，只需在可视模式下按`"`key `+`key key ：`y`

> "+y

在cygwin下粘贴文本到vim，在普通模式下按`"`key `+`key key即可：`p`

> "+p

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:26:29.903

Cygwin 用于`/dev/clipboard`访问 Windows 剪贴板。对于在可视模式下复制，您可以执行以下操作：

```
:'<,'>w !cat > /dev/clipboard 
```

为了从 Windows 剪贴板粘贴，您可以执行以下操作：

```
:r !cat /dev/clipboard 
```

我已经使用这种方法一段时间了，没有任何问题。但它只适用于控制台版本的 vim。Gvim for windows 有 + register 允许你从 windows 剪贴板复制和粘贴。所以，它就像“+y（复制）和”+p（粘贴）一样简单。

来源：http: [//vim.wikia.com/wiki/Using_the_Windows_clipboard_in_Cygwin_Vim](http://vim.wikia.com/wiki/Using_the_Windows_clipboard_in_Cygwin_Vim)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:23:51.443

安装插件[fakeclip](https://github.com/kana/vim-fakeclip)。这将使系统剪贴板行为能够在 cygwin 中工作。

# matlab - 矩阵中元素的频率 - Matlab

> ID：11226474
> 
> 赞同：3
> 
> 时间：2012-06-27T12:41:50.163
> 
> 标签：matlab, frequency, frequency-distribution

从我在 matlab 中运行的函数中，我得到一个 225x400 矩阵。我想计算这个矩阵中每个元素的频率，这意味着我需要计算每个元素出现在矩阵上的次数。我的矩阵名称是“Idiff”

我在用：

```
B=unique(Idiff); 
```

找出 Idiff 矩阵中的唯一元素。我收到一列 1138 个元素，所以我知道这些元素是唯一的，并且 Idiff 矩阵中的所有其他元素都是重复的这些元素。

现在我尝试使用以下方法计算每个唯一元素在我的 Idiff 矩阵中出现的次数：

```
C=histc(Idiff,B); 
```

但我得到的是一列 47761 个元素，我很困惑。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:09:30.060

采用

```
C=histc(Idiff(:),B); 
```

否则 histc 分别在每一列上运行。

# iphone - 如何将数组值放入字符串或整数中？

> ID：11226476
> 
> 赞同：0
> 
> 时间：2012-06-27T12:42:06.607
> 
> 标签：iphone

谁能告诉我如何将数组值放入字符串或整数中。

假设一个数组 a=[1,2,3]。

转换后应该是这样的

1) 字符串=123

对于整数，它应该是

数字=123。

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:45:06.500

您可以加入数组，然后将其转换为

```
NSArray *array = [NSArray arrayWithObjects:@"1", @"2", @"3", nil];

NSString *string = [array componentsJoinedByString:@""];
int integer = [string intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:44:17.240

你可以试试这段代码。

```
NSMutableString * result = [[NSMutableString alloc] init];
for (id  obj in yourArray)
{
    if([obj isKindOfClass:[NSString class]]){
    [result appendFormat:@"%@", obj];
    }
}

NSLog(@"result = %@",result); 
```

# perl - 使用 Perl 连接到 Postgres

> ID：11226477
> 
> 赞同：0
> 
> 时间：2012-06-27T12:42:07.700
> 
> 标签：perl, postgresql

我已经在我的机器上安装了 Postgres，我正在尝试使用`Perl`.

```
$database = "heatmap";
$user = "postgres";
$password = "<password>";

#connect to Postgres database
my $db = DBI->connect(
        "DBI:Pg:database=$db;",
        $user,
        $password
) or die "Can't Connect to database: $DBI::errstr\n"; 
```

但是，我收到以下错误：

```
DBI connect('database=;','postgres',...) failed: FATAL:  password authentication failed for user "souzamor" at C:/Users/souzamor/workspace/Parser/Parser.pl line 13.
Can't Connect to database: FATAL:  password authentication failed for user "souzamor" 
```

`souzamor`是我的 Windows 用户名。但是，我正在尝试以`postgres`. 我继续创建了一个名为`souzamor`Postgres 的用户，但我得到了：

```
DBI connect('database=;','souzamor',...) failed: FATAL:  database "user='souzamor'" does not exist at C:/Users/souzamor/workspace/Parser/Parser.pl line 13.
Can't Connect to database: FATAL:  database "user='souzamor'" does not exist 
```

我对 Postgres 完全陌生。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:45:29.947

我想你的意思是

```
my $db = DBI->connect(
        "DBI:Pg:database=$database", 
```

代替

```
my $db = DBI->connect(
        "DBI:Pg:database=$db;", 
```

*编辑*

据此[，](http://search.cpan.org/~rudy/DBD-Pg/Pg.pm)应该是：

```
my $dbh = DBI->connect("dbi:Pg:dbname=$database", $user, $password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T15:31:39.653

你想连接到你在评论中说的mysql

```
#connect to MySQL database
my $db = DBI->connect(
        "DBI:Pg:database=$db;",
        $user,
        $password 
```

但不知何故为什么你使用 DBI::Pg << 而不是使用模块 DBI::mysql ？

*PG - PostgreSQL

*如果我的答案错误，请纠正我*

# android - android 在 setContentView() 上保存内容

> ID：11226478
> 
> 赞同：0
> 
> 时间：2012-06-27T12:42:12.737
> 
> 标签：android, android-layout, android-activity

我创建了一个活动，在该活动中创建了两个类，以便在单击时`radiobutton`使用`setContentView()`.

但我的问题是当我尝试在两种布局之间切换时**，一种布局的内容被破坏了**。

我还尝试为两个布局制作两个活动并使用 Intent 调用另一个活动。

谁能建议我一种在保存内容的布局之间切换的方法？
我也尝试使用`android:saveenabled="true"`特定的小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:13:38.057

您可以在布局中使用一个带有 ViewFlipper 的活动。例如：

```
<ViewFlipper android:id="@+id/flipper" 
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"
 >
    <include android:id="@+id/include1" android:layout_width="fill_parent" android:layout_height="wrap_content" layout="@layout/layout1"/>
    <include android:id="@+id/include2" android:layout_width="fill_parent" android:layout_height="wrap_content" layout="@layout/layout2"/>

</ViewFlipper> 
```

然后，在您的活动代码中，您应该有如下内容：

```
ViewFlipper flip = (ViewFlipper)findViewById(R.id.flipper);
flip.showNext();
flip.showPrevious(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:48:28.103

尝试将两个布局放在 a 中`ViewSwitcher`，然后通过使用`showNext()`来切换显示的布局。

# grails - Grails 集合

> ID：11226480
> 
> 赞同：1
> 
> 时间：2012-06-27T12:42:17.940
> 
> 标签：grails, collections, groovy, grails-orm

我想检查是否有任何当前登录的用户角色在特定的角色列表中。但它可以是任意两个集合。

基本上我想检查 [x1,x3,x4] 集合的任何成员是否包含在 [x2,x3,x7] 中

如何在 Groovy (Grails) 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:16:00.683

您可以使用以下[`Collection#disjoint`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#disjoint%28java.util.Collection%29)方法：

```
def a = [5, 4, 3]
def b = [7, 6, 5]

// a contains a member of b if they are not disjoint.
assert !a.disjoint(b)
assert a.disjoint([8, 7, 6]) 
```

其他替代方案是`!a.intersect(b).empty`or`a.any { it in b }`但我认为`disjoint`解决方案是最直接的解决方案，并且（此处疯狂猜测）可能是性能最高的解决方案，因为它不需要中间集合或闭包（更新：好吧，[代码`disjoint`](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L7828-7852)显示它确实有些时髦引擎盖下的东西......但几乎所有的 Groovy 方法都这样做 =P)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:02:21.547

将列表中的一个转换为集合并使用[retainAll](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)方法查找交集。

```
def s1 = [x1,x3,x4] as Set
s1.retainAll([x2,x3,xy]).size() > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:12:02.503

```
boolean check(Collection c1, Collection c2) {
    for(def i in c1) {
        if(c2.contains(i)) {
            return true
            break
        }
    }
    return false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T06:19:42.957

```
def a = [1,2,3] 
    def b = [3,4,5]
    def result = false 
    a.each{it->
         if(b.contains(it))
         result =true
    }
    return result 
```

# java - 是否可以通过某种方式查看 AMQ 主题的内容？

> ID：11226485
> 
> 赞同：5
> 
> 时间：2012-06-27T12:42:26.287
> 
> 标签：java, jms, activemq

我正在尝试使用`activemq-admin`.

这就是我正在尝试的：

```
./activemq-admin browse --amqurl tcp://localhost:61616 my.topic 
```

这就是我得到的输出：

```
Java Runtime: Sun Microsystems Inc. 1.6.0_24 /usr/lib/jvm/java-6-sun-1.6.0.24/jre
Heap sizes: current=62848k  free=62190k  max=932096k
JVM args: -Dactivemq.classpath=/home/pc/dev/apache-activemq-5.3.1/conf; -Dactivemq.home=/home/pc/dev/apache-activemq-5.3.1 -Dactivemq.base=/home/pc/dev/apache-activemq-5.3.1
ACTIVEMQ_HOME: /home/pc/dev/apache-activemq-5.3.1
ACTIVEMQ_BASE: /home/pc/dev/apache-activemq-5.3.1 
```

这不是我想要的。我想以某种方式以原始形式查看队列中的消息。那可能吗 ？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:45:24.840

由于主题的性质，您无法浏览主题的内容。消息被发送进来，如果有任何订阅者，每个订阅者都会在那个时间点收到一条消息。消息通常不会保留（有一些与此处无关的例外情况）。

但是，有时出于调试目的，查看发送到主题的消息很有用。最简单的方法是设置一个[虚拟目的地](http://activemq.apache.org/virtual-destinations.html)，将发送到主题的每条消息复制到一个队列中。

```
<destinationInterceptors>
    <virtualDestinationInterceptor>
        <virtualDestinations>
            <compositeTopic name="events" forwardOnly="false">
                <forwardTo>
                    <queue physicalName="events.thatHaveHappened" />
                </forwardTo>
            </compositeTopic>
        </virtualDestinations>
    </virtualDestinationInterceptor>
</destinationInterceptors> 
```

然后，您可以通过 JMX 或 Web 控制台浏览队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-01T22:44:25.293

此第三方工具可让您订阅主题并检查主题的消息：

[http://sourceforge.net/projects/activemqbrowser/](http://sourceforge.net/projects/activemqbrowser/)

连接到服务器，然后订阅您想要的主题。查看消息详细信息和有效负载对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:13:55.987

[您可以使用Web 控制台](http://activemq.apache.org/web-console.html)查看队列中的消息内容

![在此处输入图像描述](../Images/3609c8ae336b551730e1c64401bb577f.png)

# php - 未在 Codeigniter 中加载视图

> ID：11226487
> 
> 赞同：1
> 
> 时间：2012-06-27T12:42:32.897
> 
> 标签：php, html, codeigniter

这是我写的一小段代码。但我没有在视图中获取数据。它在视图中显示未定义的变量

控制器

```
$data= array(); 
$data['']= json_decode(file_get_contents('http://localhost:8888/api/colleges'));
$this->load->view('colleges/index',$data); 
```

看法

```
 foreach($data as $college) : 
 ?>
<ul>
    <li><label>ID:</label> <?php echo $college;?></li>
</ul>
 <?php endforeach;?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:47:07.887

你需要使用：

控制器：
$data['colleges']= json_decode(file_get_contents('http://localhost:8888/api/colleges'));

视图：
foreach($colleges as $college)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:47:00.863

CodeIgniter根据要在视图中使用的键将 $data 数组转换为变量*。*

因此，如果（在您的控制器中）您有：

```
$data['poop'] = "Poop is stinky." 
```

然后，在您看来，您将不会使用 $data，您将使用

```
echo $poop;
// Poop is stinky. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:50:07.927

我认为您可能需要使用： array_push($data,json_decode(file_get_contents('http://localhost:8888/api/colleges'))

或者您需要为 $data 指定一个索引，例如 $data[0]

# iphone - 关于复制 Xcode 产品。为什么名称是红色的，我该如何更改名称？

> ID：11226488
> 
> 赞同：3
> 
> 时间：2012-06-27T12:42:35.547
> 
> 标签：iphone, xcode, xcode4

我正在尝试复制 Xcode 目标（Xcode 4.3.2）以制作我的 iPhone 应用程序的免费版本。

在 Xcode 中，我选择了旧目标，右键单击，然后“复制”。结果，我得到了`myapp copy.app`和`myapp copy-info.plist`。

但是，名称`myapp copy.app`以**红色**打印（即使在构建之后）。我猜这表明文件丢失了！

问题1：如何解决上述问题？

问题2：如何更改新目标的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:34:15.550

我可以回答问题 2。您可以从项目编辑器中更改目标名称。从项目窗口左侧的项目导航器中选择您的项目以打开项目窗口。从项目编辑器左侧的目标列表中选择目标。按 Return 键重命名目标。

不幸的是，当您重命名目标时，Xcode 不会重命名相关文件，例如 info.plist 文件。您将不得不使用文件检查器重命名 info.plist 文件。您还必须重命名为目标创建的方案 Xcode。单击工具栏中的方案菜单并选择管理方案以重命名方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T10:34:10.300

复制目标后：

1.  选择目标
2.  转到右侧面板中的“构建设置”
3.  在“包装”部分，重命名产品名称和 Info.pList 文件
4.  在文件资源管理器中，重命名 pList 以匹配 3 中的设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:23:58.247

我认为 .app 文件只有在您为设备构建时才会变为活动状态（不是红色）。将您的构建设置更改为 iOS 设备而不是模拟器，您应该会看到在 Build 目录的 Debug-iphoneos 文件夹中创建了一个 .app。HTH。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:04:48.960

我也对 Products 文件夹中的红色 .app 文件有疑问。我尝试了许多提供的补救措施，但都没有奏效。我的特定问题可能有所不同。如果您有相同的症状，我的解决方案也可能对您有用。

## 症状

1.  Navigator 区域的 Products 文件夹中的红色 .app 文件（xcode 的左侧部分） ![症状 1](../Images/01e7547416318da43ec51ce71ff0d3ca.png)
2.  选择 .app 时，实用程序区域（xcode 的右侧部分）文件检查器视图“完整路径”显示：

    /Users/[用户名]/Library/Developer/Xcode/DerivedData//Build/Products/Debug/[应用名称].app ![症状 2](../Images/6afce63483859b68bd682b0fd48383f9.png)

3.  该应用程序文件位于*（注意调试后的-iphoneos）*：

    /Users/[用户名]/Library/Developer/Xcode/DerivedData//Build/Products/Debug-iphoneos/[应用名称].app

4.  选择以下内容：

    一种。Navigator 区域中的项目（xcode 的左侧部分）（症状 4 - A）

    湾。编辑器区域中的项目（xcode 的中间部分）（症状 4 - B）

    C。“构建设置”选项卡（症状 4 - C）

搜索“Per-configuration Build Products Path”（症状 4 - D）。该值`build/Debug`而不是`build/Debug-iphoneos`。![症状 4](../Images/7be4b88e527ac248ba74e08aa8f533f3.png)

## 解决方案

1.  选择以下内容：

    一种。Navigator 区域中的项目（xcode 的左侧部分）（解决方案 1 - A）

    湾。编辑器区域中的项目（xcode 的中间部分）（解决方案 1 - B）

    C。“构建设置”选项卡（解决方案 1 - C）

2.  将“Base SDK”的值设置为`Latest iOS (iOS 6.0)`。实际上，任何 iOS 选项都应该可以工作。（解决方案 1 - D）

3.  将“架构”的值设置为`Standard (armv7, armv7s)`。（解决方案 1 - E）

4.  将“支持的平台”的值设置为`iOS`（解决方案 1 - F） ![解决方案 1](../Images/af830de260b12193d78854298d510983.png)

## 注意

1.  Per-configuration Build Products Path – Debug 的值为 build/Debug-iphoneos（解决方案 1 - G）

2.  .app 文件不再是红色的。（解决方案 1 - H）

3.  .app 的“完整路径”是：

    /Users/[用户名]/Library/Developer/Xcode/DerivedData//Build/Products/Debug-iphoneos/[应用名称].app

# javascript - 使用按钮和 JavaScript 显示/隐藏表单

> ID：11226489
> 
> 赞同：14
> 
> 时间：2012-06-27T12:42:47.747
> 
> 标签：javascript, html

我需要使用一个按钮显示一个表单，并在用户按下另一个按钮时隐藏它，因为另一个按钮显示另一个表单。我用选择框做了类似的事情，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-27T12:45:44.730

使用以下代码片段在按钮单击时隐藏表单。

```
document.getElementById("your form id").style.display="none"; 
```

下面的代码来显示它：

```
document.getElementById("your form id").style.display="block"; 
```

或者您可以为这两个目的使用相同的功能：

```
function asd(a)
{
    if(a==1)
        document.getElementById("asd").style.display="none";
    else
        document.getElementById("asd").style.display="block";
} 
```

和 HTML：

```
<form id="asd">form </form>
<button onclick="asd(1)">Hide</button>
<button onclick="asd(2)">Show</button> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T12:46:08.897

我打赌你已经听说过这件事！它被称为[jQuery](https://en.wikipedia.org/wiki/JQuery)。

```
$("#button1").click(function() {
    $("#form1").show();
}; 
```

这真的很简单，您可以使用类似 CSS 的选择器，还可以添加动画。这真的很容易学习。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-08T08:34:14.033

如果你有一个容器和两个子容器，你可以这样做

jQuery

```
 $("#previousbutton").click(function() {
    $("#form_sub_container1").show();
    $("#form_sub_container2").hide(); })

    $("#nextbutton").click(function() {
    $("#form_container").find(":hidden").show().next();
    $("#form_sub_container1").hide();
}) 
```

HTML

```
 <div id="form_container">
            <div id="form_sub_container1" style="display: block;">
            </div>

            <div id="form_sub_container2" style="display: none;">
            </div>
     </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-02T07:30:12.327

有一个名为 的全局属性`hidden`。但我对这一切都很陌生，也许还有一个原因还没有提到？

```
var someCondition = true;

if (someCondition == true){
    document.getElementById('hidden div').hidden = false;
}
```

```
<div id="hidden div" hidden>
    stuff hidden by default
</div>
```

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/hidden](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/hidden)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-19T01:11:59.737

您是否想要具有不同部分的相同表单，并使用按钮相应地显示每个部分？

这里是一个包含三个步骤的示例，即三个表单部分，但它可以扩展到任意数量的表单部分。HTML 字符`&laquo;`和`&raquo;`分别打印 « 和 » 这对于上一个和下一个按钮字符可能很有趣。

```
shows_form_part(1)

/* this function shows form part [n] and hides the remaining form parts */
function shows_form_part(n){
  var i = 1, p = document.getElementById("form_part"+1);
  while (p !== null){
    if (i === n){
      p.style.display = "";
    }
    else{
      p.style.display = "none";
    }
    i++;
    p = document.getElementById("form_part"+i);
  }
}

/* this is called at the last step using info filled during the previous steps*/
function calc_sum() {
  var sum =
    parseInt(document.getElementById("num1").value) +
    parseInt(document.getElementById("num2").value) +
    parseInt(document.getElementById("num3").value);

  alert("The sum is: " + sum);
}
```

```
<div id="form_part1">
  Part 1<br>
  <input type="number" value="1" id="num1"><br>
  <button type="button" onclick="shows_form_part(2)">&raquo;</button>
</div>

<div id="form_part2">
  Part 2<br>
  <input type="number" value="2" id="num2"><br>
  <button type="button" onclick="shows_form_part(1)">&laquo;</button>
  <button type="button" onclick="shows_form_part(3)">&raquo;</button>
</div>

<div id="form_part3">
  Part 3<br>
  <input type="number" value="3" id="num3"><br>
  <button type="button" onclick="shows_form_part(2)">&laquo;</button>
  <button type="button" onclick="calc_sum()">Sum</button>
</div>
```

# java - Eclipse Indigo - JPA 验证问题

> ID：11226491
> 
> 赞同：3
> 
> 时间：2012-06-27T12:42:53.333
> 
> 标签：java, eclipse, validation, jpa, jpql

我正在使用 eclipse indigo 并且遇到“JPA 验证问题”。

我的命名查询是：

```
from Person p where p.name = :name 
```

并且有这个错误：

```
The query does not start with a valid identifier, has to be either SELECT, UPDATE or DELETE FROM. 
```

但这是一个有效的 JPQL 查询。有人知道我可以如何消除这个错误吗？

如果我将查询更改为

```
select p from Person p where p.name = :name 
```

没有更多错误，但我不想更改所有查询。

谢谢

mp5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T14:55:11.813

如果您不关心可移植性，您可以关闭在 Indigo 版本中添加到 Dali 的 JPQL 验证。如果您有一个选择了 Hibernate 平台的 JPA 项目，您仍然可以获得 Hibernate Tools 对 JPQL/HQL 的任何验证。

转到“查询和生成器”下的工作区首选项“Java 持久性”->JPA->错误/警告，并将“无效或不完整的 JPQL 查询”更改为“忽略”。如果您希望 Hibernate 工具为 Hibernate 平台扩展 Dali JPQL 验证或只是默认将其关闭，您可以输入针对 Hibernate 工具的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:06:14.037

事实上，这不是一个有效的 JPQL 查询。JPQL 以“SELECT”、“UPDATE”或“DELETE”开头。

显然它可以在 Hibernate（即 HQL）中工作，但该查询不是标准的，也不是可移植的。因此，如果您不想更改查询，那么您就没有使用 JPA，并且您的应用程序是不可移植的。

JPA 规范将证实这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:08:22.447

在我看来，任何形式的查询都像：

```
from Person p where p.name = :name 
```

实际上不是有效的 JPQL。根据语言参考：

[http://docs.oracle.com/javaee/5/tutorial/doc/bnbuf.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnbuf.html)

每个语句都需要在该部分之前有一个`SELECT`,`UPDATE`或`DELETE`语句`FROM`。

以下是更多示例：

[http://en.wikipedia.org/wiki/Java_Persistence_Query_Language](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language)

不幸的是，您似乎需要更新所有查询以使其适合这种格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T13:08:37.500

这不是有效的 JPQL 查询。这是一个有效的 HQL 查询，但 HQL 不是 JPQL。JPQL 查询必须有一个选择子句。

这是来自规范的 JPQL 子句的 BNF 语法：

```
select_statement :: = select_clause from_clause [where_clause] [groupby_clause [having_clause] [orderby_clause] 
```

# java - servlet 小程序通信中的访问会话

> ID：11226495
> 
> 赞同：1
> 
> 时间：2012-06-27T12:42:57.877
> 
> 标签：java, jakarta-ee, servlets, applet

我在开发 servlet 小程序通信程序时遇到了会话问题。用户成功登录后，我在 jsp 中有登录页面，我将用户引导到具有小程序的 index.jsp 页面。在重定向到 index.jsp 之前，我在 servlet 中设置了一个会话变量。在我的小程序中，我必须获取会话中的数据以及数据库和属性文件中的一些数据。我的代码是
//Servlet

```
if(action.equals("login")){
            uinfo = new UserInformation();

            String uid = request.getParameter("txt_UserName");
            String pwd = request.getParameter("pwd_PassWord");

            int i = uinfo.authenticateUser(uid, pwd);
            //System.out.println(i);
            if(i==1){
                session.setAttribute("uName", uid);
                request.getRequestDispatcher("index.jsp").forward(request, response);
else if(action.equals("applet")){
            try{

                output =  new ObjectOutputStream(response.getOutputStream());
                uinfob= new UserInformationBean();

               Properties prop = new Properties();

                    try {
                           prop.load(new FileInputStream(path+"/connection.properties"));
                    } catch (IOException ex) {
                            ex.printStackTrace();
                    }

              uinfob.setHost(prop.getProperty("host"));
              uinfob.setIs_Active("Y");
              uinfob.setUid(session.getAttribute("uName").toString());

                 output.writeObject(uinfob);
                 output.flush();

                //output.close();

            }catch(IOException iox){
                iox.printStackTrace();
            }catch(Exception e){
                e.printStackTrace();
            }finally{
                output.close();
            }
        } 
```

在我的小程序中

```
public void init() {

    try{

        String queryString="action=applet";

        URL codeBase = getCodeBase();
        URL servletURL = new URL(codeBase.getProtocol(), codeBase.getHost(), codeBase.getPort(), "/SwingBrowser1/UserServlet?"+queryString);

         servletConnection = servletURL.openConnection();
         servletConnection.setDoInput(true);
         servletConnection.setDoOutput(true);
         servletConnection.setUseCaches(false);
         servletConnection.setDefaultUseCaches(false);
         servletConnection.setRequestProperty("Content-Type","application/octet-stream");
         getData();

    }catch(Exception e){
        e.printStackTrace();
    }

}
// TODO overwrite start(), stop() and destroy() methods

    public void getData()
    {
        try{
            ObjectInputStream input = new ObjectInputStream(servletConnection.getInputStream());

           UserInformationBean uib =(UserInformationBean)input.readObject();

             System.out.println(uib.getHost()+"-------------"+uib.getIs_Active()+"-----------------"+uib.getUid());
            input.close();
        }
        catch( Exception e)
        {
            e.printStackTrace();
        } 
```

它出现了 java.io.EOFException 错误，我在我的 else servlet 块中使用了一个 sop 对此进行了测试。我之前设置的属性返回空值。

# python - Python调试打印命令

> ID：11226500
> 
> 赞同：-3
> 
> 时间：2012-06-27T12:43:21.013
> 
> 标签：python, debug-symbols

乡亲

我对 Python 不是很了解，但继承了一堆 Python 脚本，其中一个给我带来了一个问题，我不能 100% 确定哪一行正在运行

我需要做的是打印出命令行及其变量。

有问题的行是

```
ldapModify(userdn, mods, uri=uri) 
```

我希望看到的是

```
/usr/bin/ldapmodify xxxx cn=...... 
```

任何善良的灵魂都可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:45:33.180

在有问题的行之前，您可以调用 python 的交互式调试器。然后你可以打印出有问题的变量：

```
import pdb
pdb.set_trace()
ldapModify(userdn, mods, uri=uri) 
```

在 (pdb) 提示符下，您可以打印出任何或所有变量的值。

[这是有关调试器的链接](http://docs.python.org/library/pdb.html#debugger-commands)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:38:55.867

Python ldap lib 不调用 ldap 命令行客户端，它直接绑定到底层系统 ldap lib。

如果您想要知道传递给 ldapModify 的参数的值，这很简单：将它们打印到 sys.stderr ：

```
import sys
try:
   ldapModify(userdn,mods,uri=uri)
except Exception, e:
   print >> sys.stderr, "oops, ldapModify failed with '%s'" % e
   print >> sys.stderr, "userdns : '%s' - uri : '%s' - mods : '%s'" % (userdns, uri, mods)
   # and reraise the error so you get the whole traceback
   raise 
```

# drupal - Drupal Webform 文本字段动态增长列表

> ID：11226504
> 
> 赞同：0
> 
> 时间：2012-06-27T12:43:28.980
> 
> 标签：drupal, dynamic

只是好奇...

我有一个项目，人们可以输入他们的烹饪食谱。我想构建一个具有文本字段的网络表单，当它被填写时，下面会出现一个新的文本字段。“不断增长的文本字段列表”。让我尝试在这里展示它：

```
Ingredient #1  _________________________________  [add] 
```

当您键入和成分单击“添加”时，您将看到：

```
Ingredient #1  Potatoes_________________________
Ingredient #2  _________________________________  [add] 
```

很抱歉不知道正确的标记。但是，如果有人知道：

a）这个的正确术语（我称之为不断增长的文本字段列表）？b）如何在drupal中使用webform？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:12:58.790

无需任何编程，有两种方法可以做到这一点：

*   如果您使用的是 Webform 模块（不确定 Webform 是指节点表单还是 Webform 模块），那么您可以尝试使用[Webform Add More](http://drupal.org/project/webform_addmore)模块来启用您想要的功能。唯一的缺点是它仅适用于字段集，因此您必须将文本字段放在字段集中并启用在该字段集上添加更多功能。

*   如果您使用 CCK，那么它非常简单：只需添加一个新的文本表单字段并将其值的数量设置为“无限”。但是我会使用像[Hierarchical Select](http://drupal.org/project/hierarchical_select/)这样的东西，它允许用户重复使用成分，添加新成分，它还允许您对它们进行分类。

# vb.net - 如何使用 HttpWebRequest 登录路由器？

> ID：11226506
> 
> 赞同：2
> 
> 时间：2012-06-27T12:43:36.993
> 
> 标签：vb.net, login, httpwebrequest, router

我试图弄清楚如何成功登录 DSL 路由器（型号：Speedport w504v A 型）。我使用 HttpWebRequest 和 HttpWebResponse 编写了一个函数。到目前为止，这个功能还没有完成，只是为了找出正确的登录过程。

```
Public Function DoRequest(ByVal url As String, ByVal password As String, ByVal container As CookieContainer) As String

    'Login Request
    Dim reqLogin As HttpWebRequest = DirectCast(HttpWebRequest.Create("https://speedport.ip/cgi-bin/login.cgi"), HttpWebRequest)
    reqLogin.CookieContainer = container
    reqLogin.Method = "POST"
    reqLogin.Referer = "https://speedport.ip/hcti_start_passwort.stm"
    reqLogin.KeepAlive = True
    reqLogin.Host = "speedport.ip"
    reqLogin.ContentType = "application/x-www-form-urlencoded"
    reqLogin.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
    reqLogin.Headers.Add("Accept-Language", "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3")
    reqLogin.Headers.Add("Accept-Encoding", "gzip, deflate")

    'Login Data
    Dim encoding As New ASCIIEncoding()
    Dim data As String = Uri.EscapeDataString("pws") & "=" & Uri.EscapeDataString(password)
    Dim bytes As Byte() = encoding.GetBytes(data)
    reqLogin.ContentLength = bytes.Length
    Dim stream As Stream = reqLogin.GetRequestStream
    stream.Write(bytes, 0, bytes.Length)
    stream.Close()

    'Login Response
    Dim resLogin As HttpWebResponse = DirectCast(reqLogin.GetResponse(), HttpWebResponse)

    'Receive Cookie
    Dim CookieHeaderValue As String = reqLogin.Headers.Get("Cookie")
    If CookieHeaderValue <> Nothing Then
        Dim aCookie As String() = CookieHeaderValue.Split("=")
        Dim Cookie As New Cookie
        Cookie.Domain = "speedport.ip"
        Cookie.Path = "/"
        Cookie.Secure = True
        Cookie.Name = aCookie(0)
        Cookie.Value = aCookie(1)
        container.Add(Cookie)
    End If

    'Url Request
    Dim reqIndex As HttpWebRequest = DirectCast(HttpWebRequest.Create(url), HttpWebRequest)
    reqIndex.CookieContainer = container
    reqIndex.Method = "GET"
    reqIndex.Referer = "https://speedport.ip/wait_login.stm"
    reqIndex.KeepAlive = True
    reqIndex.Host = "speedport.ip"
    reqIndex.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"

    'Url Content
    Dim resIndex As HttpWebResponse = DirectCast(reqIndex.GetResponse(), HttpWebResponse)
    Dim sr As StreamReader = New StreamReader(resIndex.GetResponseStream())
    Dim output As String = sr.ReadToEnd
    resIndex.Close()

    Return output
End Function 
```

不幸的是，我没有得到正确的内容。相反，我从错误页面获取站点内容：

> 双重管理权限！

当您尝试登录时返回此站点，但已经有另一个会话在运行。所以也许我已经成功登录但没有获得网站内容。

我从一个名为 HTTP Live Header 的 Firefox AddOn 获取标题信息。我也尝试运行 curl 但也没有工作：

```
curl -d "pws=PASSWORD" -c cookies.txt -e https://speedport.ip/hcti_start_passwort.stm -k https://speedport.ip/cgi-bin/login.cgi
curl -c cookies.txt -e https://speedport.ip/wait_login.stm -k https://speedport.ip/index.stm 
```

也许有人知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:40:56.867

使用 Fiddler 我想通了。我还必须为第一个请求设置用户代理标头。

```
reqLogin.UserAgent = "YOUR USERAGNET STRING" 
```

此外，我不必获得`reqLogin.Headers.Get("Cookie")`. 它已经设置为 CookieContainer，因此取消“接收 Cookie”部分。

# fonts - 在 Monotouch 程序集中打包自定义字体

> ID：11226507
> 
> 赞同：0
> 
> 时间：2012-06-27T12:43:41.440
> 
> 标签：fonts, xamarin.ios

我有一个 iPad 应用程序，它通过主要可执行文件的 Info.plist 中的**UIAppFonts元素使用自定义字体，**[如本答案中所述](https://stackoverflow.com/questions/2927348/monotouch-bundle-font-with-binary)。我想知道是否有办法将这些字体打包到一个可重用的程序集中，这样我就可以在多个应用程序之间共享这些字体。Monotouch 程序集可以包含它自己的 Info.plist 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:36:22.167

MonoTouch 目前没有打包部分 Info.plist 的方法，这些部分 Info.plist 稍后会与主 Info.plist 合并。

[这是个好主意，您能在http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)上提交错误报告吗？

# ebay-api - 从 eBay 收集物品清单

> ID：11226508
> 
> 赞同：0
> 
> 时间：2012-06-27T12:43:44.413
> 
> 标签：ebay-api

我试图找出一种方法来以某种方式从给定类别中获取所有项目。我什至不知道这样做是否合法。但我很好奇 :) 我需要收集这些项目，然后我将使用 C#.net 或 java 将它们放入我自己的数据库中，没关系。

是否有任何 API 或服务可以这样做？

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:17:50.473

Ebay 有一个开发者网络。还有一个查找东西的 API 您可以在此处查看信息： [https ://www.x.com/developers/ebay/products/finding-api](https://www.x.com/developers/ebay/products/finding-api)

另一种选择是写一个刮板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T21:24:03.353

我不同意 tester123 的回答。

> 另一种选择是写一个刮板。

这违反了 eBay 的用户协议 ( [http://pages.ebay.com/help/policies/user-agreement.html](http://pages.ebay.com/help/policies/user-agreement.html) ) (ctrl+f "scrape")。

但手头更大的问题是 API 的问题。看到这个问题：[获取一个类别中的所有项目？](https://stackoverflow.com/questions/18615605/)

正如我在那里回答的那样，呼叫限制是每页最多 100 个项目，任何搜索最多 100 个页面。第一个限制很明显，第二个限制意味着即使您打算从那里开始，也永远无法到达结果的第 101 页。你被限制在你进行的搜索的前 10,000 个结果中，所以如果一个类别中的项目多于这个数量（并且对于热门类别会有），那么它就无法完成。

我希望这对您更有帮助，即使它可能令人失望。但是，确实，抓取将是超越这些限制的唯一方法（因为您设置了自己的；），尽管它会更困难......）。

# ios - UIProgressView 没有更新？

> ID：11226509
> 
> 赞同：5
> 
> 时间：2012-06-27T12:43:47.413
> 
> 标签：ios, multithreading, ios5, uiprogressview

我已经开始在 iOS5 中使用 UIProgressView，但还没有真正的运气。我在更新视图时遇到问题。每次更新进度后，我都有一组顺序操作。问题是，进度视图不会一点一点地更新，而是在全部完成之后才更新。它是这样的：

```
float cnt = 0.2;
for (Photo *photo in [Photo photos]) {
    [photos addObject:[photo createJSON]];
    [progressBar setProgress:cnt animated:YES];
    cnt += 0.2;
} 
```

浏览堆栈溢出，我发现了这样的帖子 - [setProgress 自 iOS 5 以来不再更新 UIProgressView](https://stackoverflow.com/questions/8803189/setprogress-is-no-longer-updating-uiprogressview-since-ios-5)，这意味着为了使其正常工作，我需要运行一个单独的线程。

我想澄清一下，我真的需要单独的线程来让 UIProgressView 正常工作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T12:57:00.813

Yes the entire purpose of progress view is for threading.

If you're running that loop on the main thread you're blocking the UI. If you block the UI then users can interact and the UI can't update. YOu should do all heavy lifting on the background thread and update the UI on the main Thread.

Heres a little sample

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self performSelectorInBackground:@selector(backgroundProcess) withObject:nil];

}

- (void)backgroundProcess
{    
    for (int i = 0; i < 500; i++) {
        // Do Work...

        // Update UI
        [self performSelectorOnMainThread:@selector(setLoaderProgress:) withObject:[NSNumber numberWithFloat:i/500.0] waitUntilDone:NO];
    }
}

- (void)setLoaderProgress:(NSNumber *)number
{
    [progressView setProgress:number.floatValue animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T12:17:36.340

`UIProgressView`在`.h`文件中定义：

```
IBOutlet UIProgressView *progress1; 
```

在`.m`文件中：

```
test=1.0;
progress1.progress = 0.0;
[self performSelectorOnMainThread:@selector(makeMyProgressBarMoving) withObject:nil waitUntilDone:NO];

- (void)makeMyProgressBarMoving {
    NSLog(@"test    %f",test);
    float actual = [progress1 progress];
    NSLog(@"actual  %f",actual);

    if (progress1.progress >1.0){
        progress1.progress = 0.0;
        test=0.0;
    }

    NSLog(@"progress1.progress        %f",progress1.progress);
    lbl4.text=[NSString stringWithFormat:@" %i %%",(int)((progress1.progress) * 100)  ] ;
    progress1.progress = test/100.00;//actual + ((float)recievedData/(float)xpectedTotalSize);
    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(makeMyProgressBarMoving) userInfo:nil repeats:NO];
    test++;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-11T18:01:11.830

我有类似的问题。UIProgressView 没有更新，虽然我做了 setProgress 甚至尝试了 setNeedsDisplay 等。

```
float progress = (float)currentPlaybackTime / (float)totalPlaybackTime;
[self.progressView setProgress:progress animated:YES]; 
```

在 setProgress 部分取得进展之前，我有 (int)。如果你用 int 调用 setProgress，它不会像 UISlider 那样更新。人们应该只用从 0 到 1 的浮点值来调用它。

# iphone - 如何同时播放 iPod 库中的两个音频文件？

> ID：11226511
> 
> 赞同：0
> 
> 时间：2012-06-27T12:43:57.493
> 
> 标签：iphone, ios, audio, avfoundation, mpmediapickercontroller

我知道 MediaPickerConroller 可用于访问 iPod 库，但我不确定它是否可以同时播放两首歌曲。AVFoundation 将允许这样做，但是您如何让 AVFoundation 访问该库？有没有更简单的方法来做到这一点？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:22:30.230

同时播放多个音频文件的一种方法（尽管不是一种简单的方法）是使用音频处理图。Apple 的示例应用程序“MixerHost”是一个很好的起点。“AudioGraph”（https://github.com/tkzic/audiograph）的功能比您想要的要多，但是该手册有助于理解音频处理图的基础知识。

MediaPickerConroller 将允许您从 iTunes 库中选择多个项目。您必须从媒体选择器中获取 URL 列表，然后自己将它们连接到图表。

# php - WordPress 商店日期

> ID：11226512
> 
> 赞同：-2
> 
> 时间：2012-06-27T12:43:58.717
> 
> 标签：php, mysql, wordpress, datetime

我是 php 和 Wordpress 的新手。我正在尝试创建一个脚本，将数据存储到 wordpress 中的自定义表中。我希望脚本将当前日期和时间存储在 mysql 数据库中。我在 Mysql 表中创建了一个列，其数据类型设置为，`DATETIME`但是当我尝试将数据插入到表中时，没有显示当前日期。可能是什么问题？我的脚本如下所示。

```
 $wpdb->insert($table,array('account_id' => $account_id, 'billing_first_name'=>$first_name,'billing_last_name' => $last_name, 'feature_level' => 'FreeAccount','created_at'=> date("Y-m-d, h:i a"),'billing_interval' => "Manual")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:52:56.410

我认为您在查询中传递的日期格式存在问题。

考虑 created_at 作为 MySql 中具有`DATETIME`格式的列，您应该以正确的格式传递 created_at。我认为`DATETIME`字段接受格式的日期和时间`YYYY-MM-DD HH:MM:SS`。

你可以试试这个查询：

```
$wpdb->insert($table,array('account_id' => $account_id, 'billing_first_name'=>$first_name,'billing_last_name' => $last_name, 'feature_level' => 'FreeAccount','created_at'=> date("Y-m-d h:i:s"),'billing_interval' => "Manual")); 
```

这里查询中的唯一变化是您将其传递给 MySql 的 create_at 字段值。

```
date("Y-m-d h:i:s") 
```

如果 created_at 不是`DATETIME`db 中的字段，并且您设置了另一列`DATETIME`并且希望在插入记录时对其进行更新，则更改 db 结构以`DATETIME`在更新时自动更新该字段。将默认设置为`CURRENT TIMESTAMP`。因此，即使您没有将值传递给该字段，它也会自动更新。

希望这是你想要的。:)

# google-chrome - 如何防止谷歌浏览器保存会话

> ID：11226514
> 
> 赞同：0
> 
> 时间：2012-06-27T12:44:10.353
> 
> 标签：google-chrome

如果我意外关闭它，则在使用谷歌浏览器时。像打开电脑或终止进程。它保存了所有信息。比如当前账户的id密码。任何人都可以恢复并可以访问最后一个会话。如何关闭此功能或停止 chrome 以保存信息。除隐身模式外的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:49:13.413

使用隐身模式..
[https://support.google.com/chrome/bin/answer.py?hl=en&answer=95464&p=cpn_incognito](https://support.google.com/chrome/bin/answer.py?hl=en&answer=95464&p=cpn_incognito)

*退出访客会话后，会话中的所有浏览信息都会被完全删除。*

**如果您真的不想使用隐身模式，请在评论** 后使用此应用程序...它会停止记录所有浏览历史记录..
[https://chrome.google.com/webstore/detail/ljamgkbcojbnmcaonjokopmcblmmpfch#](https://chrome.google.com/webstore/detail/ljamgkbcojbnmcaonjokopmcblmmpfch#)

# ruby-on-rails-3 - Rails 3 嵌套属性

> ID：11226517
> 
> 赞同：1
> 
> 时间：2012-06-27T12:44:14.397
> 
> 标签：ruby-on-rails-3, nested-attributes

我已经有这个问题几天了，并查看了每个教程和堆栈溢出。我似乎无法解决。我似乎无法使用有效的嵌套属性。我收到此表单视图的错误。

```
 **Form View**

<%= form_for @trip, :html => { :class => 'form-horizontal' } do |f| %>
 <div class="control-group">
<%= f.label :start, :class => 'control-label' %>
<div class="controls">
  <%= f.text_field :start, :class => 'text_field' %>
</div>

<div class="control-group">
 <%= f.label :end, :class => 'control-label' %>
 <div class="controls">
  <%= f.text_field :end, :class => 'text_field' %>
</div> 
```

```
<div class="control-group">
 <% f.fields_for :driver do |d| -%>
 <%= d.label :driver, :class => 'control-label' %>
 <div class="controls">
   <%= d.text_field :driver, :class => 'text_field' %>
 </div> 
```

模型：

```
 class Trip < ActiveRecord::Base
     attr_accessible :end, :start
     belongs_to :driver
     belongs_to :customer

     accepts_nested_attributes_for :driver
 end

class Driver < ActiveRecord::Base
 attr_accessible :name
 has_many :trips
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:11:54.980

正如你所说，你需要结束结束标签。如果您遇到“无法批量处理受保护的属性：驱动程序”错误，您必须在行程模型的 :drivers_attributes 上声明“attr_accessible”。

# php - 使用php修剪多个字符

> ID：11226518
> 
> 赞同：19
> 
> 时间：2012-06-27T12:44:16.500
> 
> 标签：php

如何在字符串的开头和结尾修剪多个字符。
字符串应该类似于`{Hello {W}orld}`.
我想在开始和结束时都`{`修剪`}`。

不想使用多个`trim`功能。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-27T12:46:12.833

使用[`trim`](https://www.php.net/manual/en/function.trim.php)允许您指定要修剪的字符列表的可选第二个参数：

```
<?php
$str = "{Hello {W}orld}";
$str = trim($str, "{}");

echo "Trimmed: $str"; 
```

输出：

```
Trimmed: Hello {W}orld 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-27T12:47:53.003

是否总是在开头和结尾有一个要删除的字符？如果是这样，您可以使用以下内容：

```
<?php
$string = '{Hello {W}orld}';
echo substr( $string, 1, strlen( $string )-2 );
?> 
```

见：[http ://codepad.org/IDbG6Km2](http://codepad.org/IDbG6Km2)

# python - networkx 的数据光标模式

> ID：11226521
> 
> 赞同：1
> 
> 时间：2012-06-27T12:44:26.327
> 
> 标签：python, matplotlib, graphing, networkx

我已经用 networkx 绘制了一个大图，并希望查看每个顶点的名称，不幸的是有太多难以阅读。环顾四周，我在 matplotlib 中找到了 datacursormode 的实现，但由于 networkx.draw 不返回对象，因此无法使它们工作。这是原始问题

[是否有相当于 MATLAB 的 datacursormode 的 matplotlib？](https://stackoverflow.com/questions/4652439/is-there-a-matplotlib-equivalent-of-matlabs-datacursormode/4674445#4674445)

非常感谢

[编辑：我可以通过编辑http://www.scipy.org/Cookbook/Matplotlib/Interactive_Plotting](http://www.scipy.org/Cookbook/Matplotlib/Interactive_Plotting)让它工作，但理想情况下我会知道我选择了哪个顶点，这样我就可以改变相邻边缘的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:21:14.290

您通常可以在回调函数中使用以下命令检索相关艺术家：

```
thisline = event.artist 
```

然后从那里检查标签 ( `thisline.get_label()`) 或您感兴趣的任何其他艺术家属性。

然而，这假设已经为顶点设置了一些标签系统，或者以另一种方式确定哪个 virtex 是哪个。如果你不这样做，那就完全是另一回事了。

# unix - autoconf不生成makefile？

> ID：11226523
> 
> 赞同：9
> 
> 时间：2012-06-27T12:44:39.210
> 
> 标签：unix, configure, autoconf

我目前正在尝试创建一个安装包，使用 autoconf 生成配置文件。我已经成功地自动生成了这些，但是，当我运行时`./configure`，没有生成任何生成文件`Makefile.in`。

我的问题是：**如何调试此问题以缩小失败的原因？**

以下是我在尝试生成 Makefile 时收到的错误消息：

```
configure: error: cannot find install-sh, install.sh, or shtool 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T06:06:40.643

我在升级 autotools 版本时遇到了同样的问题，在我的情况下，configure.ac 文件缺少以下行：

```
AM_INIT_AUTOMAKE([1.9 foreign]) 
```

（插入您需要的任何版本或选项）

然后运行`autoreconf --install`。

要回答有关调试的问题：我去查看了类似的 configure.ac 文件并处理了差异，直到错误消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:55:51.497

首先，检查是否`configure.ac`包含以下内容：

```
AC_CONFIG_FILES([Makefile])
AC_OUTPUT 
```

否则它不会为您创建生成文件。

如果不是这样，`config.log`应该有关于出了什么问题的线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:21:44.860

想通了，原来我需要从配置文件中删除 ac_dirs，这解决了问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T05:35:43.903

我遇到了这个问题，发现这是由于以下行`configure.ac`：

```
AC_CONFIG_AUX_DIR([build-aux]) 
```

该行本身还不错，但是需要将其移近`configure.ac`文件顶部。

# macos - 使用 Applescript/mkdir 创建具有变量名的嵌套文件夹

> ID：11226530
> 
> 赞同：1
> 
> 时间：2012-06-27T12:44:53.487
> 
> 标签：macos, applescript, finder, mkdir

我正在尝试创建一个提示输入作业名称的applescript，然后是一个所需的目录，在该目录中创建一个带有作业名称的文件夹。然后它应该在初始文件夹中创建一系列子文件夹，其名称例如“作业名称-链接”和“作业名称-PDF”等。

我从不同的来源拼凑了这个脚本，希望得到有关如何改进它的反馈，因为我确信它丑陋得像罪恶一样。

```
tell application "Finder"
activate

set jobNum to text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
set folderpath to POSIX path of (choose folder with prompt "Select client folder")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Links")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-PDFs")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Supplied")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Versions")

end tell 
```

任何想法和评论将不胜感激。这是我第一次尝试脚本。我想我会发布这个，因为我多年来一直在寻找这个特定的用例，但只找到了一些零碎的东西。希望有人可以帮助我，这样其他人也会发现它也很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T10:44:13.053

我正在使用 jackjr300 脚本的变体来生成网站文件夹模板/

```
do shell script "mkdir -p " & (quoted form of (folderpath & jName & "/")) & "{\"codey\",\"js\",\"fonts\",\"images\"}" 
```

再加上另一个运行以生成子文件夹并使用现有框架和脚本填充这些子文件夹，并使用重复文件夹操作。

非常方便谢谢...！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:13:53.683

我不是脚本编写者，但我一直在寻找相同类型的结构化文件夹解决方案。在浏览了这些其他示例之后，我想出了一个稍作修改的版本，用于为我们的设计师组设置项目文件夹。

```
set TID to AppleScript's text item delimiters

-- Ensure the answer is formatted properly
repeat
    try
        set theAnswer to text returned of (display dialog "Please create a job folder, with the name in this format:" default answer "JobNumber-JobCode-ClientDescription")
        set AppleScript's text item delimiters to "-"
        set {jobNum, JobCod, CliDes} to {text item 1 of theAnswer, text item 2 of theAnswer, text item 3 of theAnswer}
        exit repeat
    on error
        display dialog "Please enter your job details in this format [JobNumber]-[JobCode]-[ClientDescription]" buttons {"Cancel", "Try again"} default button "Try again"
    end try
end repeat

set folderpath to POSIX path of (choose folder with prompt "Where to create your project folder?")

set folderNames to {"Links", "Client_input", "SourceBuilds", "Review-Proofs"}
repeat with aName in folderNames
    do shell script "mkdir -p " & quoted form of (folderpath & jobNum & "-" & JobCod & "-" & CliDes & "/" & aName as text)
end repeat

set AppleScript's text item delimiters to TID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T17:35:10.933

改进脚本的第一件事就是不要使用 shell 脚本。Shell 脚本就像一个手提钻，但您所做的只需要最小的手持锤。

这是您的原始脚本：

```
tell application "Finder"
activate
set jobNum to text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
set folderpath to POSIX path of (choose folder with prompt "Select client folder")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Links")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-PDFs")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Supplied")
do shell script "/bin/mkdir -p " & quoted form of folderpath & "/" & quoted form of (jobNum) & "/" & quoted form of (jobNum & "-Versions")
end tell 
```

与更易于阅读、编写和维护的“脱壳”版本相比：

```
tell application "Finder"
    activate
    set jobNum to text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
    set theClientFolder to (choose folder with prompt "Select client folder")
    set theSubFolderNames to {"Links", "PDFs", "Supplied", "Versions"}
    repeat with theSubFolderName in theSubFolderNames
        make new folder at theClientFolder with properties {name:jobNum & "-" & theSubFolderName}
    end repeat
end tell 
```

请注意，变量“folderpath”已更改为“theClientFolder”，因为选择文件夹不返回路径，它返回所选文件夹的别名对象。告诉 Finder 创建新文件夹的命令是“在 [您希望创建文件夹的别名] 处创建新文件夹”，因此您无需将该别名转换为在其中创建新文件夹的路径。

另请注意，文件夹的名称已被声明为列表中的变量，这使它们更易于阅读或以后更改。即使是不了解 AppleScript 的人也可以打开此脚本并将“PDFs”文件夹的名称更改为“Documents”或类似的名称。

我可以建议的另一个改进是使您从用户那里收集输入的方式更加复杂。除了客户文件夹之外，您似乎还要求提供 2 项信息——工作编号和工作描述——所以使用 2 个对话框，因为这对用户来说更容易并且不易出错，因为你可以给出 2 个实际示例你希望他们输入。您还可以通过几种方式改善这些对话框的外观。并且您可以添加一些错误处理——如果用户取消您正在呈现的对话框，则会产生错误。您可以通过检查用户是否单击“确定”来优雅地处理它们。

这是您的脚本的一个版本，其中对用户输入进行了一些清理：

```
tell application "Finder"
    activate
    display dialog "Enter a job number:" default answer "100" buttons {"Cancel", "OK"} default button "OK" with title (the name as text) with icon note giving up after 180
    if the button returned of the result is equal to "OK" then
        set theJobNumber to the text returned of the result
        display dialog "Enter a job description:" default answer "Photos" buttons {"Cancel", "OK"} default button "OK" with title (the name as text) with icon note giving up after 180
        if the button returned of the result is equal to "OK" then
            set theJobDescription to the text returned of the result
            try
                choose folder with prompt "Select client folder:" default location (the path to the desktop folder as alias) without multiple selections allowed, invisibles and showing package contents
                set theClientFolder to the result
            on error
                set theClientFolder to ""
            end try
            if theClientFolder is not equal to "" then
                set theSubFolderNames to {"Links", "PDFs", "Supplied", "Versions"}
                repeat with theSubFolderName in theSubFolderNames
                    make new folder at theClientFolder with properties {name:theJobNumber & "-" & theJobDescription & "-" & theSubFolderName}
                end repeat
            end if
        end if
    end if
end tell 
```

这将为您提供顶部显示“Finder”的对话框，并包含 Finder 图标，该图标将在 180 秒后放弃（以防止出现超时错误），并且如果用户在任何时候按下“取消”，它将只优雅地死掉而不会产生任何错误。您可以调整输入对话框的默认答案，以便它们帮助用户输入正确的输入，例如，如果工作编号是 4 位数字，则在此处输入 4 位数字。选择文件夹提示将从显示桌面开始 - 如果有存储所有客户端文件夹的磁盘或文件夹，您可以将其更改为另一个位置：

```
choose folder with prompt "Select client folder:" default location (disk "Clients" as alias) … 
```

需要明确的是，shell 脚本非常棒，但我建议您只使用“执行 shell 脚本”来获得 UNIX 层的独特功能，例如 PHP 函数、Perl 正则表达式等。Mac 层中已经为您提供的任何内容都将更容易、更安全地使用，并且在 AppleScript 中更易于阅读、编写和维护。尤其是非常基本的事情，比如创建文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:24:33.057

**mkdir**可以创建层次结构，只需将这些名称放在 {} 示例中：`'/destFolderPath/jobName/prefix'{"suffix1","suffix2","suffix3","suffix4"}`

这是脚本。

```
set jName to my getJobNum()
set folderpath to POSIX path of (choose folder with prompt "Select client folder")
do shell script "mkdir -p " & (quoted form of (folderpath & jName & "/" & jName)) & "{\"-Links\",\"-PDFs\",\"-Supplied\",\"-Versions\"}"

on getJobNum()
    activate
    text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
    tell the result to if it is not "" then return it
    getJobNum() -- else text returned is empty
end getJobNum 
```

重要的是，如果您打算在名称中包含斜杠，则必须用冒号字符替换它们，很容易在脚本中添加处理程序来替换它们，否则会创建其他子文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:12:33.170

你可以这样做：

```
 set TID to AppleScript's text item delimiters

-- Ensure the answer is formatted properly
repeat
    try
        set theAnswer to text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
        set AppleScript's text item delimiters to "-"
        set {jobNum, jobDes} to {text item 1 of theAnswer, text item 2 of theAnswer}
        exit repeat
    on error
        display dialog "Please enter your response in this format [JobNumber]-[Description]" buttons {"Cancel", "Try again"} default button "Try again"
    end try
end repeat

set folderpath to POSIX path of (choose folder with prompt "Select client folder")

set folderNames to {"-Links", "-PDFs", "-Supplied", "-Versions"}
repeat with aName in folderNames
    do shell script "mkdir -p " & quoted form of (folderpath & jobNum & "-" & jobDes & "/" & jobNum & "-" & jobDes & aName as text)
end repeat

set AppleScript's text item delimiters to TID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T16:02:04.007

另一个想法是在某处创建所需文件夹结构的模板，然后让脚本使用客户端前缀复制该结构。这种方法的几个好处是，如果将文件夹添加到模板中，您不需要更改脚本（处理程序也将添加到现有结构中），并且您不必弄清楚如何编写复杂的脚本（或大）结构。

```
property template : "/path/to/template/folder" -- the folder structure to copy from

on run -- example
    set jobNum to text returned of (display dialog "Enter a job number:" default answer "[JobNumber]-[Description]")
    set folderPath to (choose folder with prompt "Select a location for the client folder")
    tell application "Finder" to try
        set clientFolder to (make new folder at folderPath with properties {name:jobNum})
    on error number -48 -- folder already exists
        set clientFolder to (folderPath as text) & jobNum
    end try
    copyFolderStructure_toFolder_withPrefix_(template, clientFolder, jobNum)
end run

to copyFolderStructure_toFolder_withPrefix_(source, destination, additions) -- copy folder structure using mkdir
    set {source, destination} to {source as text, destination as text}
    if source begins with "/" then set source to POSIX file source
    if destination begins with "/" then set destination to POSIX file destination
    set {source, destination} to {source as alias, destination as alias}

    set additions to additions as text
    tell application "Finder" to set theFolders to (folders of entire contents of source) as alias list
    set folderNames to ""

    repeat with someFolder in theFolders -- set up the folder names parameter for the shell script
        set {tempTID, AppleScript's text item delimiters} to {AppleScript's text item delimiters, ":"}
        set namePieces to text items of (text ((count (source as text)) + 1) thru -2 of (someFolder as text))
        set AppleScript's text item delimiters to ("/" & additions)
        set namePieces to space & quoted form of (additions & (namePieces as text))
        set AppleScript's text item delimiters to tempTID
        set folderNames to folderNames & namePieces
    end repeat
    do shell script "cd " & quoted form of POSIX path of destination & "; mkdir -p" & folderNames
end copyFolderStructure_toFolder_withPrefix_ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-22T21:40:19.743

我有一个从模板位置复制文件夹的解决方案。它还创建了一个快捷方式，允许向设计经理发送电子邮件，主题为工作编号/项目编号

```
global jobNum
global newJobFolder
set jobNum to text returned of (display dialog "Enter a job number:" default answer "")
set jobName to text returned of (display dialog "Enter a job name:" default answer "")
set jobMgr to text returned of (display dialog "Enter account manager email:" default answer "")
set folderpath to (choose folder with prompt "Select client folder")
set newJobFolder to my newFold(jobNum, jobName, folderpath, jobMgr)

on newFold(theNumber, theName, thefolder, jobMgr)
    set emailAddress to jobMgr
    set emailSubject to theNumber & " -" & theName
    set bodyText to ""
    set emailLinkFileName to theNumber & " -" & theName

    set subNameList to {"Designs", "Documents", "Received"}
    set itemCount to count of subNameList
    set linkBody to "mailto:" & emailAddress & "?subject=" & my 
replace_chars(emailSubject, " ", "%20") & "&body=" & my 
replace_chars(bodyText, " ", "%20")
    tell application "Finder"
        set newJobFolder to (make new folder at thefolder with properties ¬
            {name:theNumber & " " & theName})
        repeat with i from 1 to itemCount
            set aSubFolder to make new folder at newJobFolder with properties {name:jobNum & " " & item i of subNameList}
            set theMailto to make new internet location file to linkBody at aSubFolder with properties {name:emailLinkFileName, name extension:"mailloc"}
            set the name extension of theMailto to "mailloc"
        end repeat
        duplicate file "Users:ace:Dropbox:Company:0000-1_E.xlsx" of startup disk to folder (jobNum & " Documents") of newJobFolder
        set name of the result to jobNum & " E.xlsx"
        set theMailto to make new internet location file to linkBody at newJobFolder with properties {name:emailLinkFileName, name extension:"mailloc"}
        set the name extension of theMailto to "mailloc"
    end tell
end newFold

-- Generic find and replace functionality
on replace_chars(this_text, search_string, replacement_string)
    set AppleScript's text item delimiters to the search_string
    set the item_list to every text item of this_text
    set AppleScript's text item delimiters to the replacement_string
    set this_text to the item_list as string
    set AppleScript's text item delimiters to ""
    return this_text
end replace_chars 
```

# c++ - 是否可以构造一个匹配 3 个或更多非连续 UTF 代码点的 PCRE UTF-8 正则表达式

> ID：11226534
> 
> 赞同：0
> 
> 时间：2012-06-27T12:45:07.127
> 
> 标签：c++, windows, pcre

早上好，我们正在尝试使用 C/C++ PCRE regex 匹配德语字符串 'DAS tausendschÃ¶ne JungfrÃ¤ulein tausendschÃ§ne' `"\x{00F6}.*\x{00E4}.*\x{00E7}"`。PCRE 正则表达式仅从字节位置 14 和 43 开始匹配一次。我们的 PCRE 正则表达式是正确的还是应该更正？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:34:38.547

您误解了返回的数据。

PCRE 返回匹配的开始和结束位置。它在每种情况下只匹配一次，但匹配包括匹配的整个字符串，包括被“无聊”之类匹配的部分`.*`。

因此，对于您的输入字符串，它与以下部分匹配：

```
DAS tausendschöne Jungfräulein tausendschçne
..............mmmmmmmmmmmmmmmmmmmmmmmmmmmm.. 
```

或者等效地匹配这些字节：

```
0         1         2         3         4  4
01234567890123456789012345678901234567890123456789
DAS tausendschÃ¶ne JungfrÃ¤ulein tausendschÃ§ne
..............mmmmmmmmmmmmmmmmmmmmmmmmmmmmmm... 
```

它的行为正确。来自[http://www.pcre.org/pcre.txt](http://www.pcre.org/pcre.txt)：

> 当匹配成功时，有关捕获的子字符串的信息以整数对的形式返回，从 ovector 的开头开始，最多持续到其长度的三分之二。每对的第一个元素设置为子字符串中第一个字符的字节偏移量，第二个元素设置为子字符串末尾后第一个字符的字节偏移量。注意：这些值始终是字节偏移量，即使在 UTF-8 模式下也是如此。它们不是字符数。
> 
> 第一对整数 ovector[0] 和 ovector[1] 标识与整个模式匹配的主题字符串部分。下一对用于第一个捕获子模式，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:41:12.397

下午好，我们刚刚发现了正确的 PCRE 正则表达式。(?=.+(\x{00F6})){1}(?=.+(\x{00E4})){1}(?=.+(\x{00E7})){1}

它在字节位置 (14,16)、(25,27) 和 (42,43) 处匹配 DAS tausendschÃ¶ne JungfrÃ¤ulein ausendschÃ§ne。问候， 弗兰克

# iphone - 在 ios5 中使用 MPMoviePlayer 控制器播放视频

> ID：11226536
> 
> 赞同：0
> 
> 时间：2012-06-27T12:45:14.293
> 
> 标签：iphone, ios, ios5, mpmovieplayercontroller

我正在从本地项目资源在 mpmovieplayercontroller 上播放视频。我正在启动应用程序控制台，显示发生的一些错误以及如何在 mpmovieplayercontroller 或 mpmovieplayercontroller 的任何替代方案中修复和播放正确的方式。下面显示了我进入控制台输出但应用程序没有崩溃的错误：

```
Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-06-27 18:08:49.171 Chellame Chellam[3088:11f03] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-06-27 18:08:49.229 Chellame Chellam[3088:11f03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-06-27 18:08:49.237 Chellame Chellam[3088:11f03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-06-27 18:08:49.252 Chellame Chellam[3088:11f03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-06-27 18:08:49.260 Chellame Chellam[3088:11f03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

这是我播放视频的代码：

```
#import "VideoPlayerControllerViewController.h"

@interface VideoPlayerControllerViewController ()

@end

@implementation VideoPlayerControllerViewController
@synthesize moviePlayer;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self playMovie];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
-(void)moviePlayBackDidFinish:(NSNotification*)aNotification{
    NSLog(@"Play Back Finished!");
    [moviePlayer play];
}
-(void)playMovie
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                         pathForResource:@"Menu_Free" ofType:@"mp4"]];
    moviePlayer =  [[MPMoviePlayerController alloc]
                    initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    moviePlayer.view.frame = self.view.bounds;
    moviePlayer.scalingMode= MPMovieScalingModeFill;
    moviePlayer.controlStyle =MPMovieControlStyleNone;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:50:16.957

用这个替换你的方法......

```
-(void)playMovie
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                         pathForResource:@"Menu_Free.mp4" ofType:@""]];
    moviePlayer =  [[MPMoviePlayerController alloc]
                    initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    moviePlayer.view.frame = self.view.bounds;
    moviePlayer.scalingMode= MPMovieScalingModeFill;
    moviePlayer.controlStyle =MPMovieControlStyleNone;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
} 
```

当您添加文件夹资源时，请确保您选择以下选项。

![在此处输入图像描述](../Images/f28d66ccc08617bab2e00d0658ec397c.png)

# c# - 创建 WebService 实例时出错

> ID：11226537
> 
> 赞同：0
> 
> 时间：2012-06-27T12:45:16.457
> 
> 标签：c#, web-services

我有一个 WebService，当我使用这个 WebService 的实例时，会出现以下错误

```
// Instance of WebService
ServicoZap.EnvArqSenhaSoapClient envia = new ServicoZap.EnvArqSenhaSoapClient(); 
```

错误：

> 在 ServiceModel 客户端配置部分中找不到引用合同“合同名称”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

在我的 app.config 中，参考是可以的。

但是为了测试 web 服务，我在我的解决方案中使用了另一个项目，称为 Test。

在这个项目（测试）中，我没有 app.config（我不知道是否有必要）。

可以帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:54:00.660

在这种情况下，您也需要测试项目中的 app.config - 将其复制到测试项目是解决此问题的一种方法

# url - 关于替换 url 中的丹麦语字符的 Sitecore 问题

> ID：11226540
> 
> 赞同：1
> 
> 时间：2012-06-27T12:45:42.837
> 
> 标签：url, replace, seo, sitecore

我使用[此解决方案](http://blog.navigationarts.com/seo-url-sitecore/)优化 url，一切正常，但丹麦字符（æ 和 ø）存在问题，应替换为“a”和“o”。我在 Web.config 中使用了这个：

```
 <replace mode="on" find="æ" replaceWith="a" />
 <replace mode="on" find="ø" replaceWith="o" /> 
```

Urls 看起来不错，但是当我尝试通过此链接时，我收到 404 错误，并且如果我在打开的 url 页面中手动将“a”更改为“æ”。请帮帮我！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:15:12.937

请记住，替换是两种方式。生成的 URL 将用 a 代替 æ。在查找项目时，传入的 URL 将替换为 æ。

由于丹麦语使用这两个字母，在生成 URL 时将 æ 简单地替换为 a 会导致您各种头痛 - 例如项目**at-spise-æbler**（“吃苹果”）将生成 URL **at-spise-abler**，这将是在项目查找期间反向替换以尝试找到项目**æt-spise-æbler**。

为了更加一致，如果您想替换丹麦语字符，您应该将 æ 替换为 ae，将 å 替换为 aa，将 ø 替换为 oe。

如果您还使用替换模式来确保所有 URL 都是小写的（例如`<replace mode="on" find="A" replaceWith="a" />`），那么包含“a”的传入 URL 将被解释为包含“A”（假设替换按 web.config 中的条目顺序并且你的小写匹配是第一个 - 如果它是相反的，那么你还有其他问题！）。项目**at-spise-æbler**仍会生成一个 URL **at-spise-abler**，但您的项目查找可能首先与 A 匹配，试图找到不存在**的 At-spise-Abler 。**

双字母替换在这里也无济于事，因为 Sitecore 只会将每个字母与其大写版本匹配

一个更好的解决方案是在创建或编辑项目时实际重命名项目（或其显示名称）。

此链接应该为您指明正确的方向：[http ://briancaos.wordpress.com/2007/05/30/sc-53-ensure-item-names/](http://briancaos.wordpress.com/2007/05/30/sc-53-ensure-item-names/)

# php - 面向对象的 PHP 在函数成功时将消息传递给用户

> ID：11226542
> 
> 赞同：0
> 
> 时间：2012-06-27T12:45:45.657
> 
> 标签：php, forms, oop, post-redirect-get

我是 OO php 的新手，所以这看起来很基本..

基本上我有一个用户可以预订的课程列表。我已经得到它，因此用户可以从他们的列表中删除课程，但我希望在他们删除后向他们显示一条消息。我做了一些类似于我想要的东西：

```
<form name="removecourse" action="<?php bloginfo('url');?>/user/<?php echo $current_user->first_name ; ?>" method="post">
<input type="hidden" value="<?php the_id();?>" name="courseid" />
<input id="removebutton" type="submit" name="removecourse" value="Remove">
</form> 
```

表单将所需的数据发送到同一页面，并在该页面的顶部检查表单帖子名称是否存在于 $_POST[] 中，如下所示：

```
 if(isset($_POST['removecourse']) && !empty($_POST['removecourse'])){        
    $courseManager->delete_post($_POST['courseid'], $_POST['cancel-reason']);
    echo $courseManager->delete_response;
}; 
```

这就是类和对象部分的用武之地......

```
 public $delete_response;

function delete_post($postid, $reason){

     //stuff to actually delete the post

    $this->delete_response = 'Thanks, your course has been removed.';

} 
```

所以在这里我向 delete_response 变量添加一个值，并在页面顶部调用它。这可行，但是当我刷新页面时，消息仍然存在，因为我正在重新提交 POST。我只是想知道我正在做的事情是否正确，以及如何实现发布/重定向/获取类型功能以阻止消息出现在页面刷新上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:55:19.627

你必须检查一下，要么你的课程已经被删除，就这么简单:)。

你的再次显示它，因为：

```
if(isset($_POST['removecourse']) && !empty($_POST['removecourse'])){
//is always true when posted again. 
} 
```

你必须检查存在

# mongodb - 将集合/块固定到特定的分片/节点

> ID：11226543
> 
> 赞同：0
> 
> 时间：2012-06-27T12:45:54.877
> 
> 标签：mongodb, sharding

MonogDB 的自动分片将集合或块（即集合的一部分）分发到不同的节点/分片。是否可以配置哪些节点用于特定的集合或块？

示例：假设我们有集合 C1、C2 和 C3 以及节点/分片 N1、N2。

是否可以以 C1 始终存储在 N1 上的方式配置分片？

分片是否可以配置为 C3 的块 A 将始终存储在 N1 上？

我知道键范围存储在一个特殊的配置数据库中，并且平衡器进程会修改此数据以分配负载。但是，手动修改这些数据是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T22:27:40.673

我有同样的问题，但没有找到明确的解决方案，但似乎 10Gen 正在朝这个方向做一些事情：

[https://jira.mongodb.org/browse/SERVER-4621](https://jira.mongodb.org/browse/SERVER-4621) 这个： [https ://jira.mongodb.org/browse/SERVER-939](https://jira.mongodb.org/browse/SERVER-939)

第二个将于 11 月到期，所以我想我们可能会在 2.6 版中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:53:39.537

强烈建议**不要自行**编辑配置数据。您最终可能会损坏数据库。

没有办法将一个块固定到一个分片上。它被称为自动分片是有原因的:)

从理论上讲，您可以关闭平衡器，将数据移动到您想要的位置并修改块配置。但是在这种情况下，你不能打开自动平衡（或者它会移动你的“固定”块）。

目前所有未分片的集合都驻留在数据库的主分片上。所有分片集合均匀（或多或少）分布在所有分片中。有[一张](https://jira.mongodb.org/browse/SERVER-939)关于将未分片的集合移动到其他分片的票，但尚不清楚何时（或是否）会实施。

# php - Facebook API - 如何在用户无需再次登录的情况下存储多个访问令牌？

> ID：11226546
> 
> 赞同：1
> 
> 时间：2012-06-27T12:45:58.210
> 
> 标签：php, facebook

对于我的应用程序，我需要能够从每个人的 0-x FB 帐户中获取一些数据。

我的身份验证过程正常工作，我得到了不同的访问令牌，但它们很快就失效了，因为当用户以不同的帐户登录时，前一个帐户的令牌变得无效。

问题是，我需要同时获取我想要的所有数据，所以我不能要求他们每次访问网站时都使用多个帐户登录......

如果有人有想法...

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:45:10.760

您可以在应用程序中增加 2 个表列，即每个用户的 short_access_token 和 long_access_token。

一旦用户对您的应用程序进行身份验证，就会生成一个访问令牌，并将其存储在 short_access_token 中。然后将此访问令牌传递给：

[https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)？client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN

运行此命令后，将生成一个有效期为 60 天的访问令牌。将其存储在 long_access_token 中。现在，使用这个 long_access_token 60 天。

您每天只能生成一次长寿命访问令牌，即第一次。将此长期访问令牌用于您的任务（如果您已经获得许可）。

参考：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# asp.net - 会话值在代码执行期间发生变化

> ID：11226550
> 
> 赞同：1
> 
> 时间：2012-06-27T12:46:06.680
> 
> 标签：asp.net, c#-4.0

我在一个 asp.net 项目中工作。我`Page_Load`在`Master Page`. 我在 a 中访问这些值`Web-UserControl`，它位于模板页面中（继承自`MasterPage`）。

现在的问题是我没有正确获取用户控件中的会话值。当我在调试模式下执行代码时，我知道我在函数开始时获取会话值，但在**函数结束时该值被清除**。这是一个荒谬的情况。

有没有人遇到过这种问题？谁能帮我解决这个问题？

# intellij-idea - Phpstorm 光标在长行中不断跳回

> ID：11226553
> 
> 赞同：2
> 
> 时间：2012-06-27T12:46:16.020
> 
> 标签：intellij-idea, phpstorm, cursor-position

当我的行很长，想在最后输入文字时，光标不断跳回文字中间，例如：
from here: ![在此处输入图像描述](../Images/7381dfd3ca32ff661fa73a818913d0cf.png)to here: ![在此处输入图像描述](../Images/8b47e9dc8252acec9880ab1323dda685.png)。
它是错误还是功能？我怎样才能把它关掉？我的 PHPstorm 版本是 4.0.2 (#PS-117.501)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:03:44.570

原因是ideaVIM插件。当你禁用它时，它工作得很好！
这是他的问题：http: [//youtrack.jetbrains.com/issue/IDEA-85578](http://youtrack.jetbrains.com/issue/IDEA-85578)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:11:05.947

可能是字体特定的错误，请尝试更改`Settings`（`Preferences`在 Mac 上）中的字体 | `Editor`| `Colors & Fonts`.

# wcf - 启动具有相同合约的不同服务主机失败

> ID：11226555
> 
> 赞同：1
> 
> 时间：2012-06-27T12:46:25.947
> 
> 标签：wcf

我正在尝试编写一个通用主机进程（WinForm），它托管同一合同的不同 WCF 服务实现。当我运行第一个时，它工作正常，但是当我使用不同的地址启动另一个（并行）时，我会两次使用相同的地址（地址和端口）-> 路径虽然不同..

```
 private bool InitializeServiceHost()
    {
        bool isInitialized = true;
        try
        {
            Log.InfoFormat("Loading service DLL {0} and class {1}", _dllPath, _serviceClassName);
            var asm = Assembly.LoadFile(_dllPath);
            _service = (IGfnService) asm.CreateInstance(_serviceClassName);
            if (_service == null)
                throw new ApplicationException(string.Format("Could not instansiate {0} from DLL {1}", _serviceClassName, _dllPath));

            _service.Init(_myGuidStr);
            Uri uri = new Uri("net.tcp://localhost:9085/GfnService/" + _myGuidStr);

            var host = new ServiceHost(_service, uri);

            Log.InfoFormat("About to open host, State: {0}, URI: {1} ", host.State, uri);
            host.Open();
            _serviceUri = uri.ToString();
            Log.InfoFormat("Gfn service started successfully, State: {0}, URI: {1} ", host.State, uri);
        }
        catch (Exception ex)
        {
            Log.Error(ex.Message, ex);
            isInitialized = false;
            Application.Exit();
        }
        return isInitialized;
    } 
```

任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:28:07.003

知道了！现在可以了！（感谢所有评论者）

```
 var host = new ServiceHost(_service);
            Log.Info("Service host generated.");

            ServiceEndpoint serviceEndpoint = host.Description.Endpoints.Find(typeof(IGfnService));
            if (serviceEndpoint == null)
            {
                serviceEndpoint = host.AddServiceEndpoint(typeof(IGfnService), new NetTcpBinding
                {
                    MaxConnections = 10,
                    PortSharingEnabled = true
                }, uri);
                Log.InfoFormat("Endpoint [{0}] added", serviceEndpoint);
            } 
```

诀窍是添加 PortSharingEnabled！所以两个实例可以共享同一个端口！（我之前应该有过，但至少我有机会分享！）

谢谢！

# c++ - 错误 - 不完整类型的无效使用/前向声明

> ID：11226561
> 
> 赞同：23
> 
> 时间：2012-06-27T12:46:56.447
> 
> 标签：c++, inheritance, compiler-errors, g++

我知道我的问题很常见，但我一直在搜索并尝试找到的所有解决方案，但仍然无法正常工作。所以任何帮助将不胜感激！=)

提前致谢！

我在编译时遇到此错误：

```
g++ -ISFML/include -Iclasses/ -W -Wall -Werror   -c -o classes/Object.o classes/Object.cpp
In file included from classes/Core.hh:18:0,
         from classes/Object.hh:4,
         from classes/Object.cpp:1:
classes/MapLink.hh:9:1: error: invalid use of incomplete type ‘struct Object’
classes/MapLink.hh:6:7: error: forward declaration of ‘struct Object’
In file included from classes/Core.hh:19:0,
         from classes/Object.hh:4,
         from classes/Object.cpp:1:
classes/Player.hh:9:1: error: invalid use of incomplete type ‘struct Object’
classes/MapLink.hh:6:7: error: forward declaration of ‘struct Object’
make: *** [classes/Object.o] Error 1 
```

所以基本上，我有一个主要包含（main.cpp）

```
#include "Core.hh"

int        main(void)
{
  ...
} 
```

这是包含我所有包含的头文件（Core.hh）

```
#ifndef __CORE_HH__
# define __CORE_HH__

#include ...
#include "Object.hh"
#include "MapLink.hh"
#include "Player.hh"

class Core
{
  ...
};

#endif /* __CORE_HH__ */ 
```

然后是给我带来麻烦的文件（Object.hh）

```
#ifndef __OBJECT_HH__
# define __OBJECT_HH__

#include "Core.hh"

class Object
{
  ...
};

#endif /* __OBJECT_HH__ */ 
```

(MapLink.hh)

```
#ifndef __MAPLINK_H__
# define __MAPLINK_H__

#include "Core.hh"

class Object;

class MapLink : public Object
{
  ...
};

#endif /* __MAPLINK_H__ */ 
```

（播放器.hh）

```
#ifndef __PLAYER_H__
# define __PLAYER_H__

#include "Core.hh"

class Object;

class Player : public Object
{
  ...
};

#endif /* __PLAYER_H__ */ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T12:53:14.943

**问题 #1：**
您必须仅从完全声明的类派生，否则编译器将不知道该做什么。
删除前向声明`class Object;`。

**问题#2：**
你有一个循环依赖：

*   在“Core.hh”中包含“Object.hh”、“MapLink.hh”和“Player.hh”。
*   在“Object.hh”、“MapLink.hh”和“Player.hh”中包含“Core.hh”。

您需要确保每个类都完全包含它所继承的类。
我不确定这些类如何相互交互，您应该在问题中提供该详细信息。
我的猜测是你需要修改你的包含如下：

*   修改“MapLink.hh”和“PlayerLink.hh”，使其包含“Object.hh”，而不是“Core.hh”
*   修改“Object.hh”，使其不包含“Core.hh”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T12:53:33.840

编译器必须知道类的完整接口才能继承。在这种情况下，编译器看不到您的对象。必须`object.hh`在其他文件中包含文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:57:47.983

遵循包括：

1.  `Object.hh`-`__OBJECT_H__`被定义
2.  `Core.hh`-`__CORE_H__`被定义
3.  `MapLink.hh`- 包含`Core.hh`，但由于步骤 2 和`#ifndef`.
4.  `Player.hh`- 与第 3 步相同。

所以在你尝试继承它之前不要看到它的定义，你`MapLink.hh`不能`Player.hh`从*一个*没有完全定义的类继承。`Object`

 *修复：特别包括您继承的类的标题。
也就是说，添加`#include "Object.hh"`到`MapLink.hh`和`Player.hh`。*

# javascript - 使用静态选项进行选择时的值绑定

> ID：11226564
> 
> 赞同：2
> 
> 时间：2012-06-27T12:46:59.663
> 
> 标签：javascript, knockout.js

是否可以在包含这样的静态选项的选择上使用值绑定？

```
<select data-bind="value: optionValue">
   <option value="a">a</option>
   <option value="b">b</option>
   <option value="c">c</option> 
</select> 
```

Actually the bind is writing the value, if I select an option the value will change, but I am not able to read it when the select is initialized. 加载页面时，始终设置第一个选项。

# c# - 设置内容边框的圆角半径

> ID：11226567
> 
> 赞同：3
> 
> 时间：2012-06-27T12:47:01.083
> 
> 标签：c#, .net, wpf, winapi, cornerradius

我想要一个内容边框的边框半径为5的窗口。就像图片上一样：

![在此处输入图像描述](../Images/905558af8f437bb332482c6c64f21001.png)

如何使用 C# 和 WPF 做到这一点？有没有办法用 Windows API 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:04:02.147

WPF 在标准操作系统窗口中呈现，如果您需要更改该样式，则必须更改所谓的 windows chrome。基本是创建一个透明的托管窗口并使用 WPF 在其中绘制所有内容，这样您就可以驱动任何您想要的东西，当然还有圆角半径，[看看这里的例子](http://weblogs.asp.net/psheriff/archive/2009/10/12/creating-border-less-windows-in-wpf.aspx)。[这篇文章的内容更完整](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)。如果您想自己搜索，关键字*wpf custom chrome*会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:57:08.307

我找到了如何做这项工作：

首先我需要 WindowsAPICodePack，我从[http://archive.msdn.microsoft.com/WindowsAPICodePack/](http://archive.msdn.microsoft.com/WindowsAPICodePack/)   下载它，下载后，我解压它并在 /binaries 文件夹中找到必要的 DLL。需要两个 DLL II：

> Microsoft.WindowsAPICodePack.dll
> 
> Microsoft.WindowsAPICodePack.Shell.dll

然后我在 Visual Studio (.NET 3.5) 中创建了一个 WPF 应用程序，并在我的应用程序中添加了这两个 dll

> 右键单击解决方案资源管理器选项卡中的引用 > 添加引用

然后我更改了 MainWindow XAML 代码：

```
<WindowsAPICodePackShell:GlassWindow x:Class="WpfApplication1.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:WindowsAPICodePackPresentation="clr-namespace:Microsoft.WindowsAPICodePack.Controls.WindowsPresentationFoundation;assembly=Microsoft.WindowsAPICodePack.Shell"
xmlns:WindowsAPICodePackShell="clr-namespace:Microsoft.WindowsAPICodePack.Shell;assembly=Microsoft.WindowsAPICodePack.Shell"
Title="WPF AeroGlass Demo" Height="300" Width="300" Loaded="GlassWindow_Loaded">
<Border CornerRadius="10" Background="Gray"></Border>
</WindowsAPICodePackShell:GlassWindow> 
```

我的 MainWindow.xaml.cs 代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.WindowsAPICodePack.Shell;

namespace WpfApplication1
{
    /// 
    /// Interaction logic for MainWindow.xaml
    /// 
    public partial class MainWindow : GlassWindow
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void GlassWindow_Loaded(object sender, RoutedEventArgs e)
        {
            SetAeroGlassTransparency();
        }
    }
} 

```

当我运行应用程序时： ![在此处输入图像描述](../Images/80a9fdb8330d93c27ab5a3c452483cdd.png)

# android - 如何在android应用程序的数据库中存储视频文件

> ID：11226572
> 
> 赞同：0
> 
> 时间：2012-06-27T12:47:12.187
> 
> 标签：android, database, video

在我的应用程序中，我希望数据库包含一些视频。
是否可以**将视频存储在数据库中？**
如果可能的话给我示例链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T12:49:17.713

将视频文件存储在数据库中是不好的做法，**不是一种方便的方法**。因此将您的视频文件存储在**External Storage**或**Internal Storage**中，并将这些视频文件的路径存储在数据库中。因此，您可以从数据库中快速访问您的数据。它对您的应用程序性能也有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:01:44.620

```
package database;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Environment;
import android.util.Log;

public class DataBaseHelper extends SQLiteOpenHelper {

    private static String DB_NAME = "your_db_name.sqlite";
    private SQLiteDatabase myDataBase;
    private final Context myContext;
    private String DB_PATH;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
        this.DB_PATH = Environment.getDataDirectory() + "/data/"
                + myContext.getPackageName() + "/databases/";
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();
        SQLiteDatabase db_Read = null;
        if (dbExist) {
            Log.i("DataBase", "do nothing - database already exist");
        } else {

            // By calling this method and empty database will be created into
            // the default system path
            // of your application so we are gonna be able to overwrite that
            // database with our database.
            db_Read = this.getReadableDatabase();
            db_Read.close();
            try {
                copyDataBase();
                Log.i("DataBase", "Copy DataBase");

            } catch (Exception e) {
                // TODO: handle exception
                throw new Error("Error copying database");
            }

        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
public boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            // this path value is coming correct?
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READWRITE);

        } catch (SQLiteException e) {
            // database does't exist yet.
        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * 
     * @throws IOException
     * */
    private void copyDataBase() {

        // Open your local db as the input stream

        try {
            InputStream myInput = myContext.getAssets().open(DB_NAME);
            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;

            // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);

    }

    public void deleteEntry(String table_name ,String whereclause ,String[] field_value) throws SQLException {

        // delete the database
        myDataBase.delete(table_name, whereclause, field_value);

    }

    public void insertEntry(String table_name ,ContentValues field_value) throws SQLException {

        // insert the database
        myDataBase.insert(table_name, null, field_value);

    }

    public void updateEntry(String table_name ,ContentValues field_value,String whereClause,String[] whereArgs) throws SQLException {

        // insert the database
        myDataBase.update(table_name, field_value, whereClause, whereArgs);

    }

    @Override
    public void close() {

        if (myDataBase != null)
            myDataBase.close();

        super.close();

    }

    public Cursor fetchDataFromDataBase(String query) {
        Cursor cursor = null;
        if (myDataBase != null) {
            cursor = myDataBase.rawQuery(query, null);
        }
        return cursor;

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

*   项目清单

    ```
    // and call from your application level class when your application launche first
    // then use your database by using sq-lite query

         myDbHelper = new DataBaseHelper(this);

    try {
        // calling from here to creat databases from assets
        myDbHelper.createDataBase();
    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    } 
    ```

*   项目清单

    ```
     // just use query like that
         // calling from here to open databases from assets
    DataBaseHelper myDbHelper = new DataBaseHelper(m_context);
    if (myDbHelper != null) {
        myDbHelper.openDataBase();
    }

    Cursor cursor = myDbHelper.fetchDataFromDataBase(squery); 
    ```

# php - PHP 5.3 - 5.4 垫片

> ID：11226573
> 
> 赞同：3
> 
> 时间：2012-06-27T12:47:19.670
> 
> 标签：php, polyfills, shim

我的服务器正在运行 PHP 5.2。是否有一些垫片，所以我可以在 PHP 5.2 中使用至少一些 PHP 5.3 的新功能？像：

`<?php if ( !defined('__DIR__') ) define('__DIR__', dirname(__FILE__)); ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T12:22:37.060

我不记得 5.3 和 5.4 带来的所有功能，但简短的回答是：不。

5.3：你提到的特性（`__DIR__`常量）是不可能复制的，除非你想用提到的声明开始每个文件（记住每个文件都有不同的位置）。

5.3：可以使用闭包来模拟闭包，但不能访问`create_function()`上下文传递或任何新语法。`use()`

5.4：可以使用外部配置和`__call()`处理程序模拟特征，但您需要在每个类中编写或继承它们。

5.4：短数组语法是不可能的。

列表还在继续（二进制表示法、数组项取消引用等），但答案仍然是 - 否。

至于它工作的一个例子，PHP 5.5 的`array_column()`函数有一个“polyfill”，你可以在下面找到它。包含在答案中太长了，因此请不要将其投票为仅链接。

[http://benramsey.com/blog/2013/07/the-array-column-php-userland-library/](http://benramsey.com/blog/2013/07/the-array-column-php-userland-library/) [https://github.com/ramsey/array_column](https://github.com/ramsey/array_column)

还请查看模拟 PHP 5.1 及更高版本中提出的所有功能的项目：[https ://github.com/Polycademy/upgradephp](https://github.com/Polycademy/upgradephp)

# javascript - 设置单元格值并在内联编辑中保持可编辑

> ID：11226580
> 
> 赞同：1
> 
> 时间：2012-06-27T12:47:49.103
> 
> 标签：javascript, jquery, jqgrid

我必须通过代码更改单元格值并使其保持可编辑状态。使用此代码，我可以更改另一个单元格的值，但单元格“paidHour”更改为不可编辑状态。如何让它再次可编辑？

```
 editoptions: { dataEvents: [{ type: 'keyup', fn: function (e) {
             var rowId = $(e.target).closest("tr.jqgrow").attr("id");
             var total = parseInt(e.target.value, 10);
             var paidWeek = parseInt($("#List").getCell(rowId, 'paidWeek'), 10);
             var addHourBank = 0;

             if (total >= paidWeek) {
                  addHourBank += (total - paidWeek);
                  total = paidWeek;
             }

             $("#List").setCell(rowId, 'paidHour', total); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:51:07.530

我不确定我的理解是否正确。区分*编辑*和*可编辑*单元格/行很重要。可编辑是可以在表单编辑、内联编辑或单元格编辑方面进行编辑的行或单元格。可能该单元格当前*正在*编辑并且您想要更改该单元格的值。在你不能使用`setCell`方法的情况下。取而代之的是，您必须获取`<td>`as DOM 或 jQuery 包装器，然后设置`<input>`单元格子元素的值。

例如，您可以使用 getColumnIndexByName 函数定义如下

```
var getColumnIndexByName = function (grid, columnName) {
    var cm = grid.jqGrid('getGridParam', 'colModel'), l = cm.length, i;
    for (i = 0; i < l; i++) {
        if (cm[i].name === columnName) {
            return i; // return the index
        }
    }
    return -1;
} 
```

它为您获取行内列的索引。所以你可以分割线

```
var rowId = $(e.target).closest("tr.jqgrow").attr("id"); 
```

进入

```
var $tr = $(e.target).closest("tr.jqgrow"), rowId = $tr.attr("id"); 
```

`$tr`表示 DOM 的 jQuery 包装器`<tr>`。因此，要为您获取`<td>`单元格，`'paidHour'`您可以使用

```
var iCol = getColumnIndexByName ($(this), 'paidHour');
var $td = $tr.find(">td:nth-child(" + (iCol + 1) + ")"); 
```

并更改您可以使用的单元格的值

```
$td.find("input").val(total); 
```

# c# - 嵌套方法调用和委托有什么区别？

> ID：11226584
> 
> 赞同：4
> 
> 时间：2012-06-27T12:48:07.650
> 
> 标签：c#, function, c#-4.0, delegates

考虑以下：

**第一种方法：**

```
public void f3()
{
f2();
f1();
} 
```

和这个 ...

**第二种方法：**

```
 class Sample
{
    public delegate void MyDelegate(string s);
    MyDelegate obj;

    public Sample()
    {
        obj += new MyDelegate(input);
        obj+=new MyDelegate(something);
        obj += new MyDelegate(someStaticMethod);
    }
} 
```

当我调用 f3() 时，它将调用其中列出的函数......当我调用委托时也会发生同样的情况......所以当我可以使用第一种方法时，委托处理某些事件的用途是什么......**第一种方法也封装了方法调用..**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T12:50:38.117

在委托的情况下，未指定附加函数的调用顺序。

此外，您可以将任意数量的函数附加到它，即使在运行时，也可以从其他对象，而不仅仅是第一种方法中的硬编码函数。委托有更广泛的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:55:52.213

第一种方法是静态的。委托方法允许您或调用者确定稍后调用什么。

# java - 在java中使用正则表达式拆分字符串

> ID：11226585
> 
> 赞同：-2
> 
> 时间：2012-06-27T12:48:19.490
> 
> 标签：java, regex, pattern-matching

date=2011-07-08 time=10:55:06 timezone="IST" device_name="CR1000i" device_id=C010600504-TYGJD3 deployment_mode="Route" log_id=031006209001 log_type="Anti Virus" log_component="FTP" log_subtype= "清理" status="Denied" priority=Critical fw_rule_id="" user_name="hemant" virus="codevirus" FTP_URL="ftp.myftp.com" FTP_direction="download" filename="hemantresume.doc" file_size="550k " file_path="deepti/virus.lnk 的快捷方式" ftpcommand="RETR" src_ip=10.103.6.100 dst_ip=10.103.6.66 protocol="TCP" src_port=2458 dst_port=21 dstdomain="myftp.cpm" sent_bytes=162 recv_bytes= 45 message="从服务器 ftp.myftp 下载大小为 550k 的文件 resume.doc。com 无法完成，因为文件感染了病毒 codevirus"

现在我希望将上面的字符串拆分并根据键值对给我输出，如下所示：

```
array[0]=date=2011-07-08

array[1]=time=10:55:06

array[2]=timezone="IST"

array[3]=device_name='CR1000i"

.......

....... 
```

所以请帮助我..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:23:07.000

您可以使用@Hlopik 建议的正则表达式（几乎），然后循环查找所有匹配项：

```
String text = "dstdomain=\"myftp.cpm\" sent_bytes=162 recv_bytes=45 message=\"An FTP download of File resume.doc of size 550k from server ftp.myftp.com could not be completed as file was infected with virus codevirus\"";
String patternText = "\\w+=([^ \"]+|\"[^\"]*\")";
Matcher matcher = Pattern.compile(patternText).matcher(text);
List<String> matches = new ArrayList<String>();
while (matcher.find()) {
    matches.add(matcher.group());
} 
```

`Array`如果您出于某种原因确实需要结果，则可以使用`matches.toArray()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:58:19.920

just for an inspiration consider this regex: `\w*=(["][^"]*["]|[^ ]*)` it matches any number of word (\w) characters, equals sign, and anything in the quotes or anything to the first space.. It matches your example, but surely there will be something that this regex will be too simple for :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T06:10:17.140

请找到以下代码。请注意，代码是 JAVA 格式的。

```
StringBuilder testt = new StringBuilder("date=2011-07-08 time=10:55:06 timezone=\"IST\" device_name=\"CR1000i\" device_id=C010600504-TYGJD3 deployment_mode=\"Route\" log_id=031006209001 log_type=\"Anti Virus\" log_component=\"FTP\" log_subtype=\"Clean\" status=\"Denied\" priority=Critical fw_rule_id=\"\" user_name=\"hemant\" virus=\"codevirus\" FTP_URL=\"ftp.myftp.com\" FTP_direction=\"download\" filename=\"hemantresume.doc\" file_size=\"550k\" file_path=\"deepti/Shortcut to virus.lnk\" ftpcommand=\"RETR\" src_ip=10.103.6.100 dst_ip=10.103.6.66 protocol=\"TCP\" src_port=2458 dst_port=21 dstdomain=\"myftp.cpm\" sent_bytes=162 recv_bytes=45 message=\"An FTP download of File resume.doc of size 550k from server ftp.myftp.com could not be completed as file was infected with virus codevirus\"");

Pattern varPattern = Pattern.compile("[A-Z_]+=", Pattern.CASE_INSENSITIVE);

Matcher varMatcher = varPattern.matcher(testt);

List<String> list = new ArrayList<String>();

int startIndex = 0, endIndex=0;

boolean found=false;

while (varMatcher.find()) {

 endIndex = varMatcher.start();

 list.add(testt.substring(startIndex, endIndex));

 startIndex= varMatcher.start();

 found=true;

}

if(found){
 list.add(testt.substring(startIndex));
}

for(String s:list){
 System.out.println(s);
} 
```

# iframe - 如何在基于 Windows 的安装程序中加载网络表单？

> ID：11226590
> 
> 赞同：1
> 
> 时间：2012-06-27T12:48:34.407
> 
> 标签：iframe, installation, webpage

我想知道如何将网页加载到安装程序中，如下例所示：

![带有电子邮件订阅的表单示例](../Images/e8d29741bf0d3073019a2ac987b73540.png)

如何做到这一点？而且，市场上哪个安装程序支持此功能？我试过 NSIS 和 SetupFactory，但找不到。

还有可能如果有人没有填写网页中提到的字段，“下一步”按钮仍然禁用吗？

任何帮助将非常感激。

# ios - 如何在 IOS 中减小音频文件大小

> ID：11226595
> 
> 赞同：6
> 
> 时间：2012-06-27T12:48:41.230
> 
> 标签：ios, core-audio, aac, mpmediapickercontroller

我正在做一个从 mediapicker 获取歌曲并将其保存到我的应用程序的应用程序。我想减小文件的大小，但是我得到了一个名为“AACConverter”的示例，我测试了该应用程序，但它没有减小文件大小。可以任何人都可以帮助我解决这个问题。

```
- (IBAction)convert:(id)sender {
    if ( ![TPAACAudioConverter AACConverterAvailable] ) {
        [[[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Converting audio", @"")
                                     message:NSLocalizedString(@"Couldn't convert audio: Not supported on this device", @"")
                                    delegate:nil
                           cancelButtonTitle:nil
                           otherButtonTitles:NSLocalizedString(@"OK", @""), nil] autorelease] show];
        return;
    }

    // Initialise audio session, and register an interruption listener, important for AAC conversion
    if ( !checkResult(AudioSessionInitialize(NULL, NULL, interruptionListener, self), "initialise audio session") ) {
        [[[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Converting audio", @"")
                                 message:NSLocalizedString(@"Couldn't initialise audio session!", @"")
                                delegate:nil
                       cancelButtonTitle:nil
                       otherButtonTitles:NSLocalizedString(@"OK", @""), nil] autorelease] show];
        return;
    }

    // Set up an audio session compatible with AAC conversion.  Note that AAC conversion is incompatible with any session that provides mixing with other device audio.
    UInt32 audioCategory = kAudioSessionCategory_MediaPlayback;
    if ( !checkResult(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory), &audioCategory), "setup session category") ) {
        [[[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Converting audio", @"")
                                 message:NSLocalizedString(@"Couldn't setup audio category!", @"")
                                delegate:nil
                       cancelButtonTitle:nil
                       otherButtonTitles:NSLocalizedString(@"OK", @""), nil] autorelease] show];
        return;
    } 

    NSArray *documentsFolders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    audioConverter = [[[TPAACAudioConverter alloc] initWithDelegate:self 
                                                             source:[[NSBundle mainBundle] pathForResource:@"audio" ofType:@"mp3"]
                                                        destination:[[documentsFolders objectAtIndex:0] stringByAppendingPathComponent:@"audio.m4a"]] autorelease];

    NSLog(@"destinatiion path is %@",[[documentsFolders objectAtIndex:0]stringByAppendingFormat:@"audio.m4a"]);
    ((UIButton*)sender).enabled = NO;
    [self.spinner startAnimating];
    self.progressView.progress = 0.0;
    self.progressView.hidden = NO;

    [audioConverter start];
}

- (IBAction)playConverted:(id)sender {
    if ( audioPlayer ) {
        [audioPlayer stop];
        [audioPlayer release];
        audioPlayer = nil;
        [(UIButton*)sender setTitle:@"Play converted" forState:UIControlStateNormal];
    } else {
        NSArray *documentsFolders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *path = [[documentsFolders objectAtIndex:0] stringByAppendingPathComponent:@"audio.m4a"];
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
        [audioPlayer play];

        [(UIButton*)sender setTitle:@"Stop" forState:UIControlStateNormal];
    }
}

- (IBAction)emailConverted:(id)sender {
    NSArray *documentsFolders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [[documentsFolders objectAtIndex:0] stringByAppendingPathComponent:@"audio.m4a"];

    MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
    mailController.mailComposeDelegate = self;
    [mailController setSubject:NSLocalizedString(@"Recording", @"")];
    [mailController addAttachmentData:[NSData dataWithContentsOfMappedFile:path] 
                             mimeType:@"audio/mp4a-latm"
                             fileName:[path lastPathComponent]];

    [self presentModalViewController:mailController animated:YES];
}

#pragma mark - Audio converter delegate

-(void)AACAudioConverter:(TPAACAudioConverter *)converter didMakeProgress:(CGFloat)progress {
    self.progressView.progress = progress;
}

-(void)AACAudioConverterDidFinishConversion:(TPAACAudioConverter *)converter {
    self.progressView.hidden = YES;
    [self.spinner stopAnimating];
    self.convertButton.enabled = YES;
    self.playConvertedButton.enabled = YES;
    self.emailConvertedButton.enabled = YES;
    audioConverter = nil;
}

-(void)AACAudioConverter:(TPAACAudioConverter *)converter didFailWithError:(NSError *)error {
    [[[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Converting audio", @"")
                                 message:[NSString stringWithFormat:NSLocalizedString(@"Couldn't convert audio: %@", @""), [error localizedDescription]]
                                delegate:nil
                       cancelButtonTitle:nil
                       otherButtonTitles:NSLocalizedString(@"OK", @""), nil] autorelease] show];
    self.convertButton.enabled = YES;
    audioConverter = nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:30:01.653

有多种方法可以解决此问题。如果您希望音频在后台播放，您可以使用

[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"BGM.mp3" loop:YES];

通过使用它，您可以使用一个小的音频剪辑，并循环播放它。同样的事情也可以应用于效果音频。

除此之外，降低音频剪辑的比特率也有助于减小文件的大小。对于所有这些编辑操作，包括编辑/剪辑/修剪声音剪辑、降低比特率、以不同格式保存，我建议您使用

[Audacity](http://audacity.sourceforge.net/)（开源，免费）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:09:33.773

如果您关心大小而不是质量，也许您想将歌曲转换为 amr 格式。

# jquery - IE8 中与 CSS 相关的 Html.DropDownFor 绑定问题

> ID：11226597
> 
> 赞同：0
> 
> 时间：2012-06-27T12:48:51.013
> 
> 标签：jquery, css, asp.net-mvc, razor, html.dropdownlistfor

全部，

我在 IE8 中遇到了这个奇怪的问题，涉及将模型数据绑定到应用了 CSS 宽度属性的 Html.DropDownListFor 元素。

我有一个父下拉列表，当更改时会导致数据查找，然后具有新数据的模型应该绑定到子下拉列表。

在 IE8 中，如果我尝试在 Html.DropListFor 元素中或通过 Javascript 属性添加 CSS 宽度属性，下拉列表将不会绑定到模型中的新数据。

如果我现在有宽度属性，即使在 IE8 中也可以正常工作。

代码：

```
 @Html.DropDownListFor(model => model.EnrollmentToBatchDataContract.Spl, new SelectList(Model.SPLs, "Text", "Value"), "-- Please choose an SPL --", new {id="ddlSPL", name="ddlSPL"}) 
```

JS函数：

```
 function updateSPL(data) {
    $('#ddlSPL >option').remove();
    $('#ddlSPL').append($('<option></option>').html(""));
        for (var x = 0; x < data.SPLs.length; x++) {
            $('#ddlSPL').append($('<option value="' + data.SPLs[x].Value + '"> ' + data.SPLs[x].Text + '</option>').html(data.SPLs[x].Text));
        }
}; 
```

我知道模型正在更新并传递给 JS 函数。我测试了预期值是否在数据对象中。

这在 Chrome 和 FF 中也可以正常工作。

谢谢，德里克

# c - C中的指针存储

> ID：11226601
> 
> 赞同：0
> 
> 时间：2012-06-27T12:48:53.687
> 
> 标签：c

在 C 中，指针包含另一个变量的内存位置。指针变量是存储在栈上还是堆上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:53:54.570

指针只是一个变量。把它想象成一个保存内存位置的整数，所以如果你有：

```
int main(...) {
    char *ptr = malloc( 100 );
    ...
} 
```

then`ptr`是堆栈上的 4 或 8 字节值，其中包含从堆中分配的 100 字节缓冲区的内存位置。**内存**本身在堆中，指针**在**栈中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:52:00.237

它存储在某个地方！

这取决于你，你如何定义指针。

如果它是一个局部变量，它可能在堆栈上，也可能在寄存器中。
如果你通过 malloc() 创建它，它就在堆上。
或者全局，如果它是在模块范围内定义的。

```
int *pInt_global;

void foo(void)
{
  int *pIntStack;

  int **ppIntHeap;

  ppIntHeap = malloc(sizeof(int *));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:54:33.710

这取决于。堆内存是使用 malloc 创建的，堆栈内存是您不使用 malloc 创建的内存（简而言之，但我也应该谈谈静态内存）。

```
int a;
int* ps;
int* ph;

ps = &a;
ph = malloc(sizeof(int));
a  = 5;

if (ph != NULL) {
    *ph = 5;
} 
```

这里， ps 包含来自堆栈 (a) 的变量的地址，而 ph 包含来自堆的变量的地址。请注意，如果 malloc 没有失败，则两者都引用值 5。另请注意，分配给 ph 的内存应该在某个时候释放，而不是来自 ps 的内存！

如果您在函数中接收到指向某物的指针，则您无法知道它是从堆栈还是从堆引用内存。

# django - Django 表单未得到处理

> ID：11226602
> 
> 赞同：0
> 
> 时间：2012-06-27T12:49:07.213
> 
> 标签：django, forms, post, contact

当我单击按钮并且表单有效时，它只会刷新页面。我检查了 POST 数据，它是正确的。可能是什么问题？

我有一个具有相同设置的不同联系表，它可以工作。

forms.py 文件：

```
class ContactFormDebate(forms.Form):

subject = forms.CharField(max_length=100)
debate_title = forms.CharField(max_length=100)
debate_description = forms.CharField()
debate_scope = forms.CharField(max_length=200)
sender = forms.EmailField()
cc_myself = forms.BooleanField(required=False) 
```

视图.py：

```
def contactDebate(request):
if request.method == 'POST': # If the form has been submitted...
    form = ContactFormDebate(request.POST) # A form bound to the POST data
    if form.is_valid():
        subject = form.cleaned_data['subject']
        debate_title = form.cleaed_data['debate_title']
        debate_description = form.cleaned.data['debate_description']
        sender = form.cleaned_data['sender']
        cc_myself = form.cleaned_data['cc_myself']

        recipients = ['someemail@email.com']
        if cc_myself:
            recipients.append(sender)

        from django.core.mail import send_mail
        message = debate_title.append(debate_descripton)
        send_mail(subject, message, sender, recipients)
        return HttpResponseRedirect('/thanks/') # Redirect after POST
else:
    form = ContactFormDebate() # An unbound form

return render(request, 'newdebate.html', {
    'form': form,
}) 
```

模板：

```
<h2 class="page-heading"><span>ПОДНЕСИ НОВА ДЕБАТА</span></h2>
<form action="." method="post">{% csrf_token %}
{{ form.non_field_errors }}
<div class="fieldWrapper">
    {{ form.subject.errors }}
    <label for="id_subject">Наслов на пораката:</label>
    {{ form.subject }}
</div>
<div class="fieldWrapper">
    {{ form.debate_title.errors }}
    <label for="id_debate_title">Наслов на дебатата:</label>
    {{ form.debate_title }}
</div>
<div class="fieldWrapper">
    {{ form.debate_description.errors }}
    <label for="id_debate_description">Опис на дебатата:</label>
    {{ form.debate_description }}
</div>
<div class="fieldWrapper">
    {{ form.sender.errors }}
    <label for="id_sender">Email адреса:</label>
    {{ form.sender }}
</div>
<div class="fieldWrapper">
    {{ form.cc_myself.errors }}
    {{ form.cc_myself }}
    <label for="id_cc_myself" id="myself">Сакам да ми пристигне копија од пораката</label>
</div>
<p>
<div style="clear: both;"></div>
<input type="submit" value="Испрати" class="btn1 btn-primary1" /></p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:12:52.663

`debate_scope`您的 HTML 中缺少一个字段。

此外，您在正确的情况下有拼写错误：`cleaed_data`, `cleaned.data`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:05:30.137

如果表单无效，则没有 else 条件；你应该补充一点。其次，你应该确保你的电子邮件设置是正确的，否则你会得到一个例外。

```
def contactDebate(request):
    if request.method == 'POST': # If the form has been submitted...
        form = ContactFormDebate(request.POST) # A form bound to the POST data
        if form.is_valid():
            subject = form.cleaned_data['subject']
            debate_title = form.cleaed_data['debate_title']
            debate_description = form.cleaned.data['debate_description']
            sender = form.cleaned_data['sender']
            cc_myself = form.cleaned_data['cc_myself']

            recipients = ['someemail@email.com']
            if cc_myself:
                recipients.append(sender)

            from django.core.mail import send_mail
            message = debate_title.append(debate_descripton)
            send_mail(subject, message, sender, recipients, fail_silenty=True)
            return HttpResponseRedirect('/thanks/') # Redirect after POST
         else:
            return render(request,'newdebate.html',{'form':form})
    else:
         form = ContactFormDebate() # An unbound form

    return render(request, 'newdebate.html', {'form': form}) 
```

# jsp - 使用 Apache POI 创建供用户下载的 excel 文件

> ID：11226603
> 
> 赞同：19
> 
> 时间：2012-06-27T12:49:11.277
> 
> 标签：jsp, servlets, apache-poi

我可以使用 apache poi 创建一个 excel 文件。但是，我希望用户能够将其下载为“真正的”excel 文件。我想要达到的效果是有一个弹出框允许用户下载文件。这类似于使用

```
<%@ page contentType="application/vnd.ms-excel" pageEncoding="ISO-8859-1"%> 
<%response.setHeader("Content-Disposition", "attachment;filename=myfile.xls"); %> 
```

有一个严重的例外：我必须允许用户下载正确的 excel 文件。我在某处读到上面的代码只是对客户端说服务器正在发送一个 excel 文件

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-27T13:27:35.230

在普通的 servlet 而不是 JSP 文件中完成这项工作。JSP 文件用于动态生成 HTML 代码，并且为此使用字符编写器而不是二进制输出流，因此只会损坏 POI 生成的 Excel 文件，该文件本质上是二进制流。

所以，基本上你在`doGet()`servlet 的方法中需要做的事情如下：

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment; filename=filename.xls");
HSSFWorkbook workbook = new HSSFWorkbook();
// ...
// Now populate workbook the usual way.
// ...
workbook.write(response.getOutputStream()); // Write workbook to response.
workbook.close(); 
```

现在，要下载它，请通过其 URL 而不是 JSP 文件调用 servlet。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-28T16:31:53.250

虽然使用 servlet 而不是 jsp 编写二进制附件确实更常见，但从 jsp 编写二进制附件当然是可能的。这样做的好处是您不必担心配置 web.xml 或重新加载您的应用程序。这可能是一个重要的考虑因素，具体取决于您的 Web 服务器环境。

这是一个使用 poi 将二进制附件发送到浏览器的示例 jsp。

```
<%@page import="org.apache.poi.hssf.usermodel.*" %><%@page import="java.io.*" %><%

// create a small spreadsheet
HSSFWorkbook wb = new HSSFWorkbook();
HSSFSheet sheet = wb.createSheet();
HSSFRow row = sheet.createRow(0);
HSSFCell cell = row.createCell(0);
cell.setCellValue("Some text");

// write it as an excel attachment
ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
wb.write(outByteStream);
byte [] outArray = outByteStream.toByteArray();
response.setContentType("application/ms-excel");
response.setContentLength(outArray.length);
response.setHeader("Expires:", "0"); // eliminates browser caching
response.setHeader("Content-Disposition", "attachment; filename=testxls.xls");
OutputStream outStream = response.getOutputStream();
outStream.write(outArray);
outStream.flush();

%> 
```

重要的技巧是确保在开始代码的“<%”之前只有一行包含所有导入和其他指令。否则，jsp 可能会输出一些初始的新行并破坏您的输出。

另外，我建议您始终设置内容长度。如果未设置，某些浏览器将无法正常工作。这就是为什么我首先将电子表格输出到一个字节数组，这样我就可以在实际发送数据之前设置长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T13:34:26.493

如果你想下载不要使用 hssf 工作簿，它会变慢并消耗更多空间使用 apche poi 3.17 beta-1

```
SXSSFWorkbook workbook = new SXSSFWorkbook(100); 
workbook.setCompressTempFiles(true);
Sheet sh = workbook.createSheet();
//write your data on sheet

//below code will download file in browser default download folder
response.setContentType("application/vnd.ms-excel");
            response.setHeader("Content-Disposition", "attachment; filename="+filename+".xlsx");
            workbook.write(response.getOutputStream());
            workbook.close();
            workbook.dispose(); 
```

对于 Pdf 使用 Itext

```
 Document document = new Document();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            PdfWriter.getInstance(document, baos);
            document.open(); 
//write your code

 document.add("content");
            document.close();
            response.setHeader("Expires", "0");
            response.setHeader("Cache-Control","must-revalidate, post-check=0, pre-check=0");
            response.setHeader("Pragma", "public");
            response.setContentType("application/pdf");
            response.addHeader("Content-Disposition", "attachment; filename="+filename+".pdf");
            response.setContentLength(baos.size());
            OutputStream os = response.getOutputStream();
            baos.writeTo(os);
            os.flush();
            os.close(); 
```

# c# - 带有数据网格的组合框上的事件已更改

> ID：11226608
> 
> 赞同：-1
> 
> 时间：2012-06-27T12:49:32.860
> 
> 标签：c#, wpf

示例组合框（xaml）：

```
<ComboBox Height="23" Name="status" IsReadOnly="True" ItemsSource="{Binding}" Width="120" SelectedItem="test">
</ComboBox> 
```

我如何在我的组合框中启动事件单击（等...）或更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:41:24.990

您可以通过键入 Mouse 并查看可用选项来将鼠标事件添加到组合框。这是您可以添加的事件：**MouseDown="ComboBox_MouseDown"**

```
<ComboBox MouseDown="ComboBox_MouseDown" Height="23" Name="status" IsReadOnly="True" ItemsSource="{Binding}" Width="120" SelectedItem="test">
                                </ComboBox> 
```

然后在后面的代码中添加：

```
private void ComboBox_MouseDown(object sender, MouseButtonEventArgs e)
{
    //Your code here
} 
```

# jquery-datatables - 数据表创建过滤器复选框

> ID：11226614
> 
> 赞同：6
> 
> 时间：2012-06-27T12:50:06.637
> 
> 标签：jquery-datatables

有没有人有关于如何创建 Datatablest 过滤器复选框的示例？我只想显示由复选框控制的值高于 X 或低于 Y 的行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T13:18:55.050

您必须编写自己的自定义过滤函数，但之后代码会变得很简单

```
$(document).ready(function() {
    $.fn.dataTableExt.afnFiltering.push(function(oSettings, aData, iDataIndex) {
        var checked = $('#checkbox').is(':checked');

        if (checked && aData[4] > 1.5) {
            return true;
        }
        if (!checked && aData[4] <= 1.5) {
            return true;
        }
        return false;
    });
    var oTable = $('#example').dataTable();
    $('#checkbox').on("click", function(e) {
        oTable.fnDraw();
    });

});​ 
```

小提琴[http://jsfiddle.net/nicolapeluchetti/WVYNX/2/](http://jsfiddle.net/nicolapeluchetti/WVYNX/2/)

# xcode - 主-详细视图中的文本字段显示 (" " ...而不是正确的值

> ID：11226617
> 
> 赞同：0
> 
> 时间：2012-06-27T12:50:09.520
> 
> 标签：xcode, osx-lion, cocoa-bindings

我正在关注 Aaron Hillegrass 的书（正在尝试），并且正在尝试绑定一些视图单元格。我在下面的屏幕截图中得到了结果。

右侧的单元格至少是可编辑的。标题单元格不是。

我会很感激任何关于我做错了什么的建议。

谢谢

![在此处输入图像描述](../Images/95fc0d8d54e88e8cae4889c7ccae7c46.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:39:18.743

根据我的最后评论。我必须将表绑定到实体 > 安排对象，然后将 tableView 单元格绑定到 objectValue.name。

# mercurial - Mercurial 共享扩展不适用于嵌套的子存储库

> ID：11226621
> 
> 赞同：0
> 
> 时间：2012-06-27T12:50:19.737
> 
> 标签：mercurial, mercurial-subrepos, mercurial-extension

我无法使用 mercurial**共享**扩展来处理嵌套存储库。

测试库结构：

*   子repoTest/
    *   嵌套/

SubrepoTest/.hgsub 内容：

`nested = nested`

尝试共享 repo 会出现此错误：

```
 hg share --debug --traceback SubrepoTest Copy
updating working directory
resolving manifests
 overwrite: False, partial: False
 ancestor: 000000000000, local: 000000000000+, remote: 9d3080714601
 .hgsub: remote created -> g
 .hgsubstate: remote created -> g
 New Text Document.txt: remote created -> g
calling hook preupdate.auto_update_hooks: 
calling hook preupdate.auto_rhapsody: 
Rhapsody not running.
updating: .hgsub 1/3 files (33.33%)
getting .hgsub
updating: .hgsubstate 2/3 files (66.67%)
getting .hgsubstate
subrepo merge 000000000000+ 9d3080714601 000000000000+
  subrepo nested: remote added, get nested:6a97f6c97cf7b1fd1bd82cb528a7494980e17d62:hg
Traceback (most recent call last):
  File "mercurial\dispatch.pyo", line 87, in _runcatch
  File "mercurial\dispatch.pyo", line 696, in _dispatch
  File "mercurial\dispatch.pyo", line 472, in runcommand
  File "mercurial\extensions.pyo", line 184, in wrap
  File "hgext\color.pyo", line 362, in colorcmd
  File "mercurial\dispatch.pyo", line 786, in _runcommand
  File "mercurial\dispatch.pyo", line 757, in checkargs
  File "mercurial\dispatch.pyo", line 693, in 
  File "mercurial\util.pyo", line 463, in check
  File "hgext\share.pyo", line 29, in share
  File "mercurial\hg.pyo", line 175, in share
  File "mercurial\hg.pyo", line 416, in update
  File "mercurial\merge.pyo", line 596, in update
  File "mercurial\merge.pyo", line 391, in applyupdates
  File "mercurial\subrepo.pyo", line 183, in submerge
  File "mercurial\subrepo.pyo", line 512, in get
  File "mercurial\subrepo.pyo", line 494, in _get
  File "mercurial\subrepo.pyo", line 247, in _abssource
Abort: default path for subrepository nested not found
abort: default path for subrepository nested not found 
```

我正在使用来自 TortoiseHG for Windows 的 Mercurial Distributed SCM（版本 2.2.2）。

我该如何解决这个问题？

# java - 如何在番石榴订购中找到哪个比较器“打破平局”

> ID：11226623
> 
> 赞同：4
> 
> 时间：2012-06-27T12:50:22.340
> 
> 标签：java, guava, comparator

我使用 Guava 的`Ordering`类来执行排序以从给定列表中选择“最佳”。它看起来像这样：

```
// Create the Ordering, with a list of Comparators
Ordering<String> ranker = Ordering.compound(ImmutableList.of(
    STRING_LENGTH,
    PERCENTAGE_UPPERCASE,
    NUMBER_OF_VOWELS));

// Use the ordering to find the 'best' from a list of Strings
String best = ranker.max(asList("foo", "fooz", "Bar", "AEro")); 
```

有了这个`Ordering`，字符串 "AEro" 是最好的，因为它是最长的，与 "fooz" 并列最好，但大写字符的比例更高。

我正在寻找一种方法来判断哪个`Comparator`“打破平局”，在这个愚蠢的人为示例中，哪个是比较器`PERCENTAGE_UPPERCASE`。

我有一个可行的解决方案，但它不是特别优雅，并且意味着复制`Comparator`s 列表。它是使用`Ordering`提供一个排序列表（`Ordering.sortedCopy`），拉出前两个元素（当然是范围检查），遍历相同`Comparator`s 的 List，比较这两个元素，当`compareTo`方法返回非零结果时中断。

有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:06:54.890

番石榴贡献者在这里。

您的解决方案似乎几乎与您将要获得的一样好，但与其进行排序复制并提取前两个元素，您应该更高效

```
List<E> best2 = ranker.greatestOf(list, 2); 
```

然后，确实，遍历比较器，尽管您可能可以重构，以便重用来自 的比较器列表`Ordering.compound`，而不是重新创建它。

# configuration - 在nginx上部署concrete5

> ID：11226624
> 
> 赞同：1
> 
> 时间：2012-06-27T12:50:29.077
> 
> 标签：configuration, url-rewriting, nginx, concrete5

我有一个可在 apache 服务器中“开箱即用”的具体站点。但是我在 nginx 中运行它时遇到了很多麻烦。

以下是我正在使用的 nginx 配置：

```
server {
    root /home/test/public;
    index index.php;

    access_log /home/test/logs/access.log;
    error_log /home/test/logs/error.log;

    location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to index.html
            try_files $uri $uri/ index.php;
            # Uncomment to enable naxsi on this location
            # include /etc/nginx/naxsi.rules
    }
    # pass the PHP scripts to FastCGI server listening on unix socket
    #
    location ~ \.php($|/) {
            fastcgi_pass unix:/tmp/phpfpm.sock;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            include fastcgi_params;
    }
    location ~ /\.ht {
            deny  all;
    }
} 
```

我能够获得主页，但内页有问题。内页显示“拒绝访问”。可能重写不起作用，实际上我认为它查询并尝试直接执行 php 文件，而不是通过具体的调度程序。

我完全迷失在这里。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:39:39.697

将配置更改为：

```
server {
    root /home/test/public;
    index index.php;

    access_log /home/test/logs/access.log;
    error_log /home/test/logs/error.log;

    location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to index.html
            try_files $uri $uri/ /index.php/$request_uri;
            # Uncomment to enable naxsi on this location
            # include /etc/nginx/naxsi.rules
    }

    # pass the PHP scripts to FastCGI server listening on unix socket
    #
    location ~ \.php($|/) {
            set $script $uri;
            if ($uri ~ "^(.+\.php)(/.+)") {
                    set $script $1;
            }
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$script;
            fastcgi_intercept_errors on;
            fastcgi_pass unix:/tmp/phpfpm.sock;
    }

    location ~ /\.ht {
            deny  all;
    }
} 
```

多亏了 hangover 和他在 serverfault 中提供的[链接，它才有效。](http://blog.walterebert.com/using-prtty-urls-in-concrete5-with-nginx/)

我仍然不清楚我做错了什么，也许 nginx 专家可以帮助我理解。

# r - R中的Jensen Shannon散度

> ID：11226627
> 
> 赞同：6
> 
> 时间：2012-06-27T12:50:43.390
> 
> 标签：r

我是 R 新手，并试图找到一个计算 R 中 JS 散度的函数。我可以看到 R 有 KLdiv 用于计算 KL 散度，但是有什么可用于 JS 散度的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-14T22:27:27.460

我一直在寻找[JS 分歧](http://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence#Definition)的简单实现， 而不是 R 库。由于我在任何回复中都没有看到，所以我想出了下面的一个。

假设我们有以下输入分布：

```
# p & q are distributions so their elements should sum up to 1
p <- c(0.00029421, 0.42837957, 0.1371827, 0.00029419, 0.00029419,
       0.40526004, 0.02741252, 0.00029422, 0.00029417, 0.00029418)

q <- c(0.00476199, 0.004762, 0.004762, 0.00476202, 0.95714168,
       0.00476213, 0.00476212, 0.00476202, 0.00476202, 0.00476202) 
```

Jensen-Shannon 散度将是：

```
n <- 0.5 * (p + q)
JS <- 0.5 * (sum(p * log(p / n)) + sum(q * log(q / n)))
> JS
[1] 0.6457538 
```

[对于超过 2 个分布（这里](https://stats.stackexchange.com/questions/29578/jensen-shannon-divergence-calculation-for-3-prob-distributions-is-this-ok)已经讨论过），我们需要一个函数来计算[熵](http://en.wikipedia.org/wiki/Entropy_(information_theory)#Definition)：

```
H <- function(v) {
      v <- v[v > 0]
      return(sum(-v * log(v)))
} 
```

那么 JS 分歧将是：

```
JSD <- function(w, m) {
  return(H(m %*% w) - apply(m, 2, H) %*% w)
}

> JSD(w = c(1/3, 1/3, 1/3), m = cbind(p, q, n))
          [,1]
[1,] 0.4305025 
```

其中`w`是一个权重向量，其总和应为 1，并且`m`是一个以输入分布为列的矩阵。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-02T00:08:26.757

如果有人仍在寻找答案（我是），在 R 包 phyloseq 中有一个计算这个的函数：[http ://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone .0061217](http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0061217)

我还发现本教程很有用：[http ://enterotype.embl.de/enterotypes.html](http://enterotype.embl.de/enterotypes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:29:12.843

根据维基百科 Jensen-Shannon 散度是 KL 散度的变换。应用定义中的公式应该会给你 JS 分歧然后......

见：[http ://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence](http://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)

# php - PHP正则表达式先提取嵌套表达式，然后提取外部表达式

> ID：11226633
> 
> 赞同：3
> 
> 时间：2012-06-27T12:51:10.003
> 
> 标签：php, regex

我遇到了一些代码问题。

这是代码

```
$test ='<number>1<number>2</number>3</number>';

$i=0;
$find[$i]="#<number>(.*)</number>#is";
$replace[$i]="5";

$i++;
$find[$i]="#<number>(.*)</number>#is";
$replace[$i]="$1";

echo htmlentities(preg_replace($find, $replace, $test)); 
```

目前，这仅在结果中显示数字 5。但我希望它显示 153 有谁知道我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:55:05.743

是的，因为`.*`匹配所有内容（包括标签），你匹配的太多了。如果通过阻止正则表达式匹配尖括号来限制正则表达式不跨标签边界匹配，则会得到所需的结果：

```
$test ='<number>1<number>2</number>3</number>';

$i=0;
$find[$i]="%<number>([^<>]*)</number>%is";
$replace[$i]="5";

$i++;
$find[$i]="%<number>([^<>]*)</number>%is";
$replace[$i]="$1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:54:11.123

将第一个替换模式更改为：

```
$find[$i] = "#<number>\d+<number>(.*)</number>\d+</number>#is"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:08:19.280

```
$s ='<number>1<number>2</number>3</number>'; 
echo preg_replace('#<number>(\d+)<number>\d+</number>(\d+)</number>#', "$1 5 $2", $s); 
```

测试代码[在这里](http://ideone.com/6W7qx)。

# android - MonoDroid 图像条带

> ID：11226642
> 
> 赞同：0
> 
> 时间：2012-06-27T12:52:08.937
> 
> 标签：android, image, bitmap, xamarin.android

我的背景有问题。在设置带有渐变的背景图像时，我得到了可怕的图像条纹。当我在我的根布局中设置背景时，我这样做如下：

```
 android:background="@drawable/GradientImage" 
```

我还尝试在代码中设置我的根布局的背景（从 axml 中删除背景后）：

```
 Window.SetFormat(Android.Graphics.Format.Rgbx8888); 
        Window.AddFlags(Android.Views.WindowManagerFlags.Dither); 

        BitmapFactory.Options options = new BitmapFactory.Options(); 
        options.InPreferredConfig = Bitmap.Config.Argb8888; 
        Bitmap gradient = BitmapFactory.DecodeResource(Resources, Resource.Drawable.Background_640,options); 
        sv.SetBackgroundDrawable(new BitmapDrawable(gradient)); 
```

这是在 OnCreate 中完成的，不幸的是不能解决问题，

有没有人遇到过这个问题？有谁现在如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:58:04.787

This code works for me (in onCreate())

```
getWindow().setFormat(PixelFormat.RGBA_8888);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER); 
```

Also, when using PNG images, make sure they are using 32-bit color depth,
because some image editing programs save them as 24-bit by default.
For example, in GIMP, you can force the PNG image to be saved as 32-bit
by adding alpha channel.

# mysql - 将mysql中的正值更新为负值

> ID：11226644
> 
> 赞同：11
> 
> 时间：2012-06-27T12:52:22.077
> 
> 标签：mysql

我有付款表字段

![在此处输入图像描述](../Images/18cc523b4b11f4469d41ade44cf8ff96.png)

更新原因和金额和总计字段更改为负数

```
UPDATE payment 
SET reason = 'refund' 
WHERE uid =5 AND date = '2012-05-01' AND accid =2 
```

更新单个查询是否可能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T13:01:40.040

如果我理解正确，您还希望将金额列与上述语句一起设置为正值。

你可以使用这样的东西

```
UPDATE payment 
SET reason = 'refund', amount = amount * -1, total = total * -1
WHERE uid =5 AND date = '2012-05-01' AND accid =2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-04T11:12:36.813

`ABS(amount)`如果您希望始终获得正整数，请使用。

```
SELECT ABS(5); 
```

将输出 5

```
SELECT ABS(-5); 
```

也会输出 5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T02:41:40.047

当我寻找解决方案时，提供的建议破坏了我的结果：

```
SELECT @TotalAmount:=( SELECT FORMAT(SUM(Amount),   4)  FROM MPPayment WHERE PaymentBatchID = 6 and CompanyID=3); 
```

正确的结果：

[![在此处输入图像描述](../Images/f95166d6150cf3fbaaad07224ee6ca52.png)](https://i.stack.imgur.com/RKrPs.png)

格式化后：

```
SELECT @TotalAmount:=( SELECT FORMAT(SUM(Amount),   4)  FROM MPPayment WHERE PaymentBatchID = 6 and CompanyID=3);
SELECT @TotalAmount * -1; 
```

[![在此处输入图像描述](../Images/26459eb341d77dc62921ce0170387fcf.png)](https://i.stack.imgur.com/7jcUl.png) 可能不适用于格式化。

另一种解决方案是从零中减去您的数字：

```
SELECT @TotalAmount:=( SELECT SUM(Amount)  FROM MPPayment WHERE PaymentBatchID = 6 and CompanyID=3);
 select FORMAT((0 - @TotalAmount), 4 ); 
```

为了避免上述结果的损坏，我在操作结束时进行了格式化。结果很好：

[![在此处输入图像描述](../Images/7dfb18e191d7aadeb922ec5cfa615b75.png)](https://i.stack.imgur.com/mT03T.png)

也适用于乘以 -1：

```
 SELECT @TotalAmount:=( SELECT SUM(Amount)  FROM MPPayment WHERE PaymentBatchID = 6 and CompanyID=3);
 select FORMAT(( @TotalAmount *-1), 4 ); 
```

# java - 如何使日期时间选择器仅按日期选择器而不是手动选择值

> ID：11226645
> 
> 赞同：0
> 
> 时间：2012-06-27T12:52:30.173
> 
> 标签：java, html, jsp, datepicker

这是我的代码，由用户从日期值中选择我只想通过 datepicker 选择日期值而不是手动输入

```
<td style="width:25%;">
<s:datetimepicker id="fromDate" key="fromDate" name='fromDate' label="Format(dd/MM/yyyy)" displayFormat="dd/MM/yyyy" theme="simple"/>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:57:49.830

Set the field to read only

```
<input type="text" name="someName" id="datePicker" readonly="readonly" /> 
```

Should do the trick

# sql - 可以将 SELECT 中的多个乘法分解为对所有行仅执行一次吗？

> ID：11226647
> 
> 赞同：1
> 
> 时间：2012-06-27T12:52:40.280
> 
> 标签：sql, optimization, query-optimization

假设我有以下 SQL 查询，涉及“AS ...”阶段的浮点运算。

```
SELECT

T1.A * T2.B *  T1.D1 * T3.C AS A1
T1.A * T2.B *  T1.D2 * T3.C AS A2
(...)
T1.A * T2.B * T1.D100 * T3.C  AS A100

FROM TableName1 as T1
INNER JOIN TableName2 AS T2
LEFT JOIN  TableName3 AS T3 
```

其中 TableName 有 5.000.000 行，A、BC 和 D 是来自 A 的行，它们因行而异。2个问题：

1 - **A * B * C**会实际执行**100 次**吗？2 - 有没有办法将**A * B * C**运算分解为 2 次循环乘法只对一行的 100 列执行一次？

此外，我们可以认为“B”例如是一个复杂的函数调用 (SQRT(ARTCTAN(...(x)))，因此每**行**只执行一次是合法的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:59:34.553

I would assume it would pre-calculate what it can (SQL Server), and then apply that to the column(s).

I'm pretty sure if you put the multiplied numbers in a single-row, cross joined select, that would do it. something like:

```
select D1 * res
from tableName
cross join (select A * B * C as res) as multiplied 
```

**EDIT**

If the data is in columns, not scalar values, then maybe:

```
select t1.D1 * myAlias.res, t1.D2 * myAlias.res, t1.D3 * myAlias.res
from tableName t1
inner join 
    (
    select t2.keyCol, t2.A * t2.B * t2.C as res
    from tableName t2
    ) myAlias 
on t1.keyCol = myAlias.keyCol 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:08:12.087

一种方法可能是在表上创建一个计算列。在 SQL Server 中，这看起来像：

```
CREATE TABLE TableName
 (
   A  float  not null
  ,B  float  not null
  ,C  float  not null
  ,AxBxC  AS  A * B * C
 ) 
```

该列将（好的，*应该，*这取决于 RDBMS 的实现方式）每行读取一次计算一次，之后每次都使用。作为计算列，公式为表存储一次，因此不会显着增加存储空间。

* * *

更新更新问题：

您现在正在执行涉及 5,000,000 行的三向表连接（外连接，不少于）。这将很容易达到 10 秒甚至 100 兆字节的磁盘 I/O（除非数据是从之前的读取中缓存的），并且需要合并、循环、散列连接等等来链接所有数据。当所有这些都完成时，相比之下，执行单纯的算术运算所需的 CPU 量将变得微不足道。CPU*擅长*数学。

要对此进行测试：

*   如您的问题所示，构建并运行“完整”查询
*   构建并运行*只*返回A * B* C 计算的查询。
*   获取“calc once”查询，并将其用作连接到“base”查询的子查询或临时表。

最后一种是我能想到的强制 SQL 每行只执行一次计算的唯一方法。但是，这会引发额外的连接（跨越 500 万行），并且从我所见过或读过的所有内容来看，这是您的性能将受到最大影响的地方。

（如果你做这个测试，我很想看到结果！）

# selenium - 是否可以使用 Selenium WebDriver 来驱动 PhantomJS？

> ID：11226648
> 
> 赞同：35
> 
> 时间：2012-06-27T12:52:43.043
> 
> 标签：selenium, web-scraping, webdriver, phantomjs

我正在浏览 Selenium WebDriver 的文档，例如它可以驱动 Chrome。我在想，“驱动” PhantomJS 不是更有效率吗？

有没有办法将 Selenium 与 PhantomJS 一起使用？

我的预期用途是网页抓取：我抓取的网站加载了 AJAX 和许多可爱的 JavaScript，我认为这个设置可以很好地替代我目前正在使用的 Scrapy Python 框架。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-27T14:25:51.447

PhantomJS 现在包括[GhostDriver 项目](https://github.com/detro/ghostdriver)。

还建议您直接使用 PhantomJS 或与[CasperJS](http://casperjs.org)等便利库一起使用。CasperJS 专门设计用于轻松对网页进行顺序操作，非常适合许多自动化任务。

免责声明：我是 PhantomJS 的作者。

**编辑**：正如尼克的回答中所述，GhostDriver 现在包含在 PhantomJS 中。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-25T23:38:10.260

@Joseph，因为 1.8 版本的 GhostDriver 包含在 PhantomJS 的稳定版本中。这是确切的发行说明： http: [//phantomjs.org/release-1.8.html](http://phantomjs.org/release-1.8.html)。您可以简单地启动 PhantomJS 进程来监听某个端口，如下所示：

```
phantomjs --webdriver=PORT 
```

感谢@detro 和 PhantomJS 团队的出色工作！

# use-case - 如何为两个用户编写用例图和描述

> ID：11226653
> 
> 赞同：1
> 
> 时间：2012-06-27T12:52:59.407
> 
> 标签：use-case

如何为两个用户 A 和 B 编写用例图和描述做相同的用例，但用户 B 可以在 A 不可用的用例中做事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:35:42.237

为用户编写用例并从 B 为用户 A 引用，这仅用于用例描述，如果要创建 UML 图，请从 B 继承 A。

# perl - Perltk - 记住文本小部件中的位置

> ID：11226668
> 
> 赞同：1
> 
> 时间：2012-06-27T12:53:56.833
> 
> 标签：perl, perltk

我刚刚编写了一个非常简单的 perl tk 脚本来读取一个巨大的文本文件并使用 Text 小部件显示它并将其附加到 Scrollbar 小部件。现在我的问题是，每次我运行脚本时，它都会从第一句（整个文本文件的）开始显示。如何让脚本记住我在文本中的位置并在我退出并再次启动脚本时显示相同的区域，*即*如果我阅读文本的第 1000 行并退出脚本，脚本应该在我开始时显示第 1000 行再次运行它。（或者换句话说记住滚动位置）

我不是 perl tk 或 perl 的专业人士，但我尽我所能去学习它。请回复解释清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:30:09.037

如果你关闭你的 perl 脚本，它就会结束。它什么都不记得了，它已经不存在了。**但是**，您可以制作脚本将位置保存到文件中，并且在启动时，您可以尝试从文件中读取位置。请参见以下示例：

```
#!/usr/bin/perl
use warnings;
use strict;

use Tk;

my $file   = 'input.txt';
my $config = '.viewtext.conf';

my $mw = MainWindow->new(-title => 'Remember Position');
my $t = $mw->Scrolled("Text", -scrollbars => 'se')->pack;
my $b = $mw->Button(-text => 'Quit', -command => \&quit)->pack;

open my $FH, '<', $file or die $!;
$t->Contents(<$FH>);
close $FH;

if (-f $config) {
    open my $FH, '<', $config or die $!;
    my ($x0, $x1, $y0, $y1) = split / /, <$FH>;
    $t->xviewMoveto($x0);                            # Here we restore the saved position
    $t->yviewMoveto($y0);
}

MainLoop();

sub quit {
    open my $CONF, '>', $config or die $!;
    print {$CONF} join ' ', $t->xview, $t->yview;    # This is the current position
    close $CONF;
    $mw->destroy;
} 
```

如果要打开多个不同的文件，则必须记住文件的路径和位置。

# delphi - Delphi - 使用进程 ID 和名称将系统中的所有 OutputDebugString 钩子\绕过\捕获到我的应用程序中

> ID：11226669
> 
> 赞同：1
> 
> 时间：2012-06-27T12:53:58.393
> 
> 标签：delphi, delphi-xe, outputdebugstring

基于[这个问题](https://stackoverflow.com/questions/6384785/how-can-i-receive-outputdebugstring-from-service)，我创建了一个小应用程序，它将所有调试字符串捕获到我的应用程序中。线程的代码如下所示。

我想为我得到的每个调试字符串获取进程 ID 及其名称。在我做了一些研究之后，我得到了[这篇文章](http://philondev.blogspot.ro/2009/12/monitoring-outputdebugstring-on-windows.html)，上面写着：“前 4 个字节（32 位 DWORD）是使用 OutputDebugString 编写文本的进程的进程 ID。”。我试图通过调用下面的函数来获取该过程，但结果为空。

```
TempString := '';
CopyMemory(PChar(TempString), SharedMemory, sizeof(SharedMemory)); // - returns 0....
TempString := String(PAnsiChar(SharedMemory) + SizeOf(DWORD)); 
```

我不知道这是怎么回事。

也可以获得发送调试字符串的进程的名称吗？

线程代码：

```
interface

uses Classes,
     windows,
     Forms,
     StdCtrls,
     SysUtils;

type
  TDebugStringThread = class(TThread)
    private
      FMemo : TMemo;
    protected
      procedure Execute; override;
      procedure DoShowData;
      procedure DoShowErrors;
    public
     constructor Create(aMemo : TMemo);
  end;

implementation

var SharedMessage: string;
    ErrsMess      : String;

constructor TDebugStringThread.Create(aMemo: TMemo);
begin
  FMemo := aMemo;
  FreeOnTerminate := True;
  inherited Create(False);
end;

procedure TDebugStringThread.DoShowData;
begin
 FMemo.Lines.Add(SharedMessage);
end;

procedure TDebugStringThread.DoShowErrors;
begin
 FMemo.Lines.Add('Error ' + ErrsMess);
 ErrsMess := '';
end;

procedure TDebugStringThread.Execute;
var SharedMem: Pointer;
    SharedFile: THandle;
    WaitingResult: DWORD;
    DataReadyEvent: THandle;
    BufferReadyEvent: THandle;
    SecurityAttributes: SECURITY_ATTRIBUTES;
    SecurityDescriptor: SECURITY_DESCRIPTOR;
    SharedMemory : Pointer;
    TempString : String;
begin
  ErrsMess := '';

  SecurityAttributes.nLength := SizeOf(SECURITY_ATTRIBUTES);
  SecurityAttributes.bInheritHandle := True;
  SecurityAttributes.lpSecurityDescriptor := @SecurityDescriptor;

  if not InitializeSecurityDescriptor(@SecurityDescriptor,       SECURITY_DESCRIPTOR_REVISION) then
    Exit;

  if not SetSecurityDescriptorDacl(@SecurityDescriptor, True, nil, False) then
    Exit;

  BufferReadyEvent := CreateEvent(@SecurityAttributes, False, True, 'DBWIN_BUFFER_READY');

  if BufferReadyEvent = 0 then
    Exit;

  DataReadyEvent := CreateEvent(@SecurityAttributes, False, False, 'DBWIN_DATA_READY');

  if DataReadyEvent = 0 then
    Exit;

  SharedFile := CreateFileMapping(THandle(-1), @SecurityAttributes, PAGE_READWRITE, 0, 4096, 'Global\DBWIN_BUFFER');

  if SharedFile = 0 then
  begin
    ErrsMess := SysErrorMessage(GetLastError);
    Synchronize(DoShowErrors);
    Exit;
  end;

  SharedMem    := MapViewOfFile(SharedFile, FILE_MAP_READ,  0, 0, 512);
  SharedMemory := MapViewOfFile(SharedFile, SECTION_MAP_READ, 0, 0, 1024);

  if not Assigned(SharedMem) then
  begin
    ErrsMess := SysErrorMessage(GetLastError);
    Synchronize(DoShowErrors);
    Exit;
  end;

  if not Assigned(SharedMemory) then
  begin
    ErrsMess := SysErrorMessage(GetLastError);
    Synchronize(DoShowErrors);
  end;

  while (not Terminated) and (not Application.Terminated) do
    begin
      SetEvent(BufferReadyEvent);
      WaitingResult := WaitForSingleObject(DataReadyEvent, INFINITE);

      case WaitingResult of
        WAIT_TIMEOUT: Continue;
        WAIT_OBJECT_0:
          begin
          try
            TempString := '';
            //CopyMemory(PChar(TempString), SharedMemory, sizeof(SharedMemory)); // - returns 0....
            TempString := String(PAnsiChar(SharedMemory) + SizeOf(DWORD));
            SharedMessage := TempString + ' ' + String(PAnsiChar(SharedMem) + SizeOf(DWORD));
            Synchronize(DoShowData);
          finally
          end;
          end;

       WAIT_FAILED: Continue;
     end;
   end;

   UnmapViewOfFile(SharedMem);
   CloseHandle(SharedFile);
end; 
```

结尾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:42:46.293

将前四个字节读取为`DWORD`：

```
var
  ProcessID: DWORD;

  ...

  ProcessID := PDWORD(SharedMemory)^; 
```

请参阅[此处](https://stackoverflow.com/questions/6771682/not-getting-path-of-various-system-processes-by-getmodulefilenameex)如何获取进程的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:40:43.637

如果前四个字节真的是一个双字，那么你需要做的第一件事就是停止尝试将它复制到一个*字符串*中。整数不是字符串，将一个存储在另一个中不会对其进行转换。

```
var
  ProcessID: DWord;

ProcessID := PDWord(SharedMemory)^; 
```

如果您从中得到零，则内存的前四个字节包含零。如果你期待别的东西，那么要么你的期望是错误的，要么你没有从正确的地方阅读。

# java - 使用 Querydsl 和 ConstructorExpression.create() 构建 DTO:s

> ID：11226676
> 
> 赞同：3
> 
> 时间：2012-06-27T12:54:15.647
> 
> 标签：java, querydsl

我有一个涉及 querydsl 和 DTO:s 的问题

我有一些查询对象：

```
QPerson person = QPerson.person;
QExamCode examCode = QExamCode.examCode;
QExamGrade examGrade = QExamGrade.examGrade;
QProgram gradeProgram = examGrade.program; 
```

我尝试从它们中查询并列出名为 CompletedCreditsSummary 的 DTO 类（不是实体）的实例。CompletedCreditsSummary 有一个构造函数，它采用：Long、Long、Float。

```
JPQLQuery query = new JPAQuery(manager);
query = query.from(person, examCode, examGrade);
query = query.where(person.studies.examGrades.contains(examGrade).and(examGrade.examCode.eq(examCode)).and(examGrade.passed.isTrue())); 
```

我能够做到这一点（没有 group by 和 CompletedCreditsSummary 需要能够创建人员和程序对象所需的所有参数，在这种情况下简化为 person.id 和 program.id）

```
ConstructorExpression.create(CompletedCreditsSummary.class,person.id,program.id,examCode.credits);

return   query.list(completedCreditsSummaryExpression); 
```

这行得通。但是当我想将此添加到查询中时：

```
query.groupBy(person, examGrade.program); 
```

并使用examCode.credits.sum() 创建CompletedCreditssummary，即

```
ConstructorExpression.create(CompletedCreditsSummary.class,person.id,gradeProgram.id,examCode.credits.sum()); 
```

代替

```
ConstructorExpression.create(CompletedCreditsSummary.class,person.id,gradeProgram.id,examCode.credits); 
```

我得到一个：java.lang.IllegalArgumentException：参数类型不匹配。

这里的问题是examcode.credits (NumberPath) 和examcode.credits.sum() (NumberExpression) 之间的区别以及我可以做些什么来解决我的问题。

当我通过反复试验学习 querydsl 时，我可能忽略了一些基本的东西。非常感谢任何帮助！

问候拉斯穆斯

编辑：最好我会这样做（使用 group by 和 CompletedCreditsSummary 构造函数采用 Person、Program、Float。）：

```
ConstructorExpression<Person> personExpression = ConstructorExpression.create(Person.class,person.id);
ConstructorExpression<Program> programExpression = ConstructorExpression.create(Program.class,gradeProgram.id);
ConstructorExpression<CompletedCreditsSummary> completedCreditsSummaryExpression = ConstructorExpression.create(CompletedCreditsSummary.class,personExpression,programExpression,examCode.credits.sum()); 
```

编辑：通过让 CompletedCreditsSummary 构造函数接受：Long，Long，Number 使其工作。那就是我将浮点数更改为数字。这不是一个理想的解决方案，但至少它有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:41:34.427

尝试这样的事情

```
JPAQuery query = new JPAQuery(manager);
query.from(person, examCode, examGrade)
  .where(
    person.studies.examGrades.contains(examGrade),   
    examGrade.examCode.eq(examCode),
    examGrade.passed.isTrue())
  .groupBy(person, examGrade.program)
  .list(ConstructorExpression.create(
    CompletedCreditsSummary.class, 
    person, examGrade.program, examCode.credits.sum())); 
```

您需要确保类后面的 ConstructorExpression 的参数与您要调用的构造函数的参数兼容。用 id 替换实体会导致您的问题。

# python - python中的一对一哈希

> ID：11226678
> 
> 赞同：0
> 
> 时间：2012-06-27T12:54:20.810
> 
> 标签：python, hash

如果我有两个值相同的字符串，是否可以保证`hash(s1) == hash(s2)`不使用`hashlib`？另外，哈希中位数的上限是多少？是否有替代方案`hash`是可逆的？我知道哈希函数不应该像这样使用。但是从字符串到可以反转并保证每个字符串不同的短十六进制字符串的 1-1 映射？

这会起作用吗：

```
import zlib
# compress
zlib.compress("foo")
zlib.decompress(zlib.compress("foo")) == "foo"  # always true? 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T12:56:18.817

是的。

```
>>>help(hash)
    Help on built-in function hash in module builtins:

    hash(...)
        hash(object) -> integer

        Return a hash value for the object.  Two objects with the same value have
        the same hash value.  The reverse is not necessarily true, but likely. 
```

# c++ - 使用恒定长度时 char[] 和 new char[] 之间的区别

> ID：11226680
> 
> 赞同：3
> 
> 时间：2012-06-27T12:54:22.920
> 
> 标签：c++, memory, initialization, arrays, dynamic-allocation

所以这似乎是一个被广泛回答的问题，但我更感兴趣的是两者之间究竟发生了什么不同的内部结构。

**除了第二个示例不仅创建了内存，还创建了指向内存的指针这一事实之外，**当以下情况发生时*，内存中会发生什么：*

```
char a[5];
char b* = new char[5]; 
```

*和我为什么*问这个问题更直接相关，我怎么能做

```
const int len = 5;
char* c = new char[len]; 
```

但不是

```
const int len = 5;
char d[len]; // Compiler error 
```

**编辑**应该提到我在 VC++ 上遇到了这个编译器错误（去图......）

```
1>.\input.cpp(138) : error C2057: expected constant expression
1>.\input.cpp(138) : error C2466: cannot allocate an array of constant size 0
1>.\input.cpp(138) : error C2133: 'd' : unknown size 
```

**编辑 2**：应该发布我正在使用的确切代码。当使用运行时值计算动态分配数组的恒定长度时，会产生此错误。

假设`random(a,b)`返回一个和`int`，`a``b`

```
const int len1 = random(1,5);
char a[len1]; // Errors, since the value
              // is not known at compile time (thanks to answers) 
```

然而

```
const int len2 = 5;
char b[len2]; // Compiles just fine 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T13:04:01.993

不同之处在于数组的生命周期。如果你写：

```
char a[5]; 
```

那么数组具有它定义的块的生命周期（如果它是在块范围内定义的）、包含它的类对象的生命周期（如果它是在类范围内定义的）或静态生命周期（如果它是在命名空间范围内定义的）。如果你写：

```
char* b = new char[5]; 
```

, 那么数组有任何你想给它的生命周期——你必须明确地终止它的生命周期：

```
delete [] b; 
```

关于你的最后一个问题：

```
int const len = 5;
char d[len]; 
```

是完全合法的，应该编译。有区别的地方：

```
int len = 5;    //  _not_ const
char d[len];    //  illegal
char* e = new char[len];    //  legal 
```

造成差异的原因主要是编译器技术和历史之一：在早期，编译器必须知道长度才能将数组创建为局部变量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T13:12:04.033

> 当以下情况发生时，内存中会发生什么：

```
char a[5]; 
char *b = new char[5]; 
```

假设一个典型但有些简化的 C++ 实现，并且上面的代码出现在一个函数中：

```
char a[5]; 
```

堆栈指针移动 5 个字节，形成 5 个字节的空间。该名称`a`现在指的是 5 个字节的内存块。

```
char *b = new char[5]; 
```

堆栈指针移动`sizeof(char*)`, 为 腾出空间`b`。一个函数被调用，它从一个叫做“自由存储”的东西中分配 5 个字节，基本上它从操作系统获得的一大块内存中分割出 5 个或更多字节，并做一些簿记以确保当您使用 释放这些字节`delete[]`，它们将可用于将来的分配以重新使用。它返回分配的 5 字节块的地址，该地址存储在堆栈上的空间中`b`。

第二个比第一个工作更多的原因是分配的对象`new`可以按任何顺序删除。局部变量（又名“堆栈上的对象”）总是以与创建相反的顺序被销毁，因此需要较少的簿记。在普通可破坏类型的情况下，实现只需将堆栈指针沿相反方向移动相同的距离。

为了消除我所做的一些简化：堆栈指针并没有真正为每个变量移动一次，可能它只在函数中所有变量的函数入口处移动一次，在这种情况下，所需的空间至少为`sizeof(char*) + 5`. 堆栈指针或各个变量可能存在对齐要求，这意味着它不会移动所需的大小，而是移动一些四舍五入的量。实现（通常是优化器）可以消除未使用的变量，或者为它们使用寄存器而不是堆栈空间。可能还有一些我没有想到的事情。

> `const int len1 = random(1,5);`

语言规则相当简单：数组的大小必须是一个常量表达式。如果一个`const int`变量在同一个 TU 中有一个初始化器，并且初始化器是一个常量表达式，那么变量名可以用在常量表达式中。`random(1,5)`不是常量表达式，因此`len1`不能在常量表达式中使用。`5`是一个常数表达式，所以`len2`很好。

What the language rule is there for, is to ensure that array sizes are known at compile time. So to move the stack, the compiler can emit an instruction equivalent to `stack_pointer -= 5` (where `stack_pointer` will be `esp`, or `r13`, or whatever). After doing that, it still "knows" exactly what offsets every variable has from the new value of the stack pointer -- 5 different from the old stack pointer. Variable stack allocations create a greater burden on the implementation.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T13:03:49.810

> **当以下情况发生时，内存中会发生什么**：
> 
> ```
> char a[5];
> char b* = new char[5]; 
> ```

`char a[5]`在堆栈内存上分配 5 个字符。
`new char[5]`在堆内存上分配 5 个字符。

> **更直接地与我问这个问题的原因有关，我怎么能这样做：**
> 
> ```
> const int len = 5;
> char* c = new char[len]; 
> ```
> 
> **但不是**
> 
> ```
> const int len = 5;
> char d[len]; // Compiler error 
> ```

两者都为我成功编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T13:05:04.343

在 C++ 中，堆栈中不能有动态数组。C99 有这个特性，但 C++ 没有。

当您声明`char d[ len ]`您正在分配空间时**stack**。当你这样做时，你在**堆上**`char *c = new char[ len ]`分配空间。

 **堆有它的管理器，可以分配可变数量的内存。在 C++ 中，堆栈必须由*常量表达式*值分配，因此编译器有很多优化空间。编译器知道以这种方式将在给定上下文上花费多少空间，并且能够预测堆栈帧。使用动态数组是不可能的，所以语言工作人员决定禁止它（至少在 C++11 之前）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T13:01:53.303

第三对行应该可以工作，这不应该是编译器错误。那里一定有其他事情发生。

前两个示例之间的区别在于，for 的内存`char a[5];`将自动被释放，而`char* b = new char[5];`分配的内存在您明确释放之前不会被释放。一旦特定变量超出范围，就不能使用第一种方式分配的数组，因为它的析构函数被自动调用并且内存可以被覆盖。对于使用创建的数组`new`，您可以传递指针并在原始变量的范围之外自由使用它，甚至可以在创建它的函数之外使用`delete`它。

你不能做的是：

```
int a = 5;
int *b = new int[a]; 
```

对于动态内存分配，大小必须在编译时已知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T13:02:25.863

您的数组在堆栈上分配；这意味着，一旦程序被编译，它就知道它必须保留 5 个字节来存储 a 的字符。相反，b 只是被声明为一个指针，它的内容将在运行时在堆上分配，如果内存太稀缺，这可能会失败。最后，由于是新的，它必须在某个时候被删除，否则你会泄漏内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T13:04:34.407

当你使用 new 时，你是从自由存储/堆中分配内存，你需要自己释放它。此外，定位空闲内存实际上可能需要一些时间，释放它也一样。

当您不使用 new 时，您的内存将保留在堆栈上，并被隐式分配和释放。即，当您输入一个函数时，调用堆栈将仅扩展所有局部变量的大小（至少在概念上-例如，某些变量可以完全存在于寄存器中），并且在您离开该函数时它只会递减。

当您像上一个示例一样在堆栈上分配具有动态大小的变量时，这意味着您在进入函数范围时需要一些额外的信息。具体来说，需要保留的空间量取决于函数输入。现在，如果可以在函数的开头确定上下文，那么一切都很好——这大概是 C99 中允许这样做的原因——但是如果你有一个变量的大小，你只知道函数中间的值，你最终会添加“假”函数调用。再加上 C++ 的作用域规则，这可能会变得很麻烦，所以从概念上讲，让 C++ 作用域通过 std::vector 来处理这个问题在概念上要容易得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T13:07:44.067

`char a[5]``sizeof(char)`当将这些字节分配给堆内存时，分配 5个字节给堆栈`new char[5]`内存。分配给堆栈内存的字节也保证在作用域结束时被释放，这与堆内存不同，您应该显式释放内存。

`char d[len]`应该允许，因为变量被声明为 const ，因此编译器可以轻松地使代码将这些字节分配给堆栈内存。**

# objective-c - 是否不鼓励使用实例变量？

> ID：11226685
> 
> 赞同：0
> 
> 时间：2012-06-27T12:54:35.150
> 
> 标签：objective-c

最近，Objective-C 中显式声明的实例变量似乎被认为是要避免的事情，首选是使用“私有”属性，即在 .m 文件的类扩展中声明的属性。

最后一个例子是关于 Objective-C 进步的 WWDC '12 演示文稿。

我无法找到这种偏好的理由，我已经搜索了很多。它显然为脆弱的基类问题提供了一种解决方案，但这已经用 Objective-C 2 解决了。

是否有一些我遗漏的重要文件，或者有一个善良的灵魂可以在这里提供的简单解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:07:04.283

你是这个意思？

```
@interface Foo : NSObject {
    float bar;
    id baz;
} 
```

如果这些实例变量不是公共接口的一部分，最好将它们移动到实现文件中，或者作为类扩展中的声明属性或`@implementation`块中：

```
@interface Foo ()
@property(assign) float bar;
@property(strong) id baz;
@end 
```

…或者：

```
@implementation Foo {
    float bar;
    id baz;
} 
```

这样，在标头中声明的公共接口保持简单，实现中的更改不会强制重新编译导入标头的所有源文件。

# snmp - 网络流量的 SNMP OID

> ID：11226688
> 
> 赞同：3
> 
> 时间：2012-06-27T12:54:41.047
> 
> 标签：snmp, nagios, net-snmp, oid, mib

我正在编写一个脚本，该脚本将监视来自 nagios 的特定主机上的流量。我研究了一些已经制作的脚本，并收集了几乎所有我需要做的信息，但我在识别流量所需的 OID 时遇到了问题。我想使用`IF-MIB::ifOutOctets.1`并`IF-MIB::ifInOctets.1`获取传入和传出流量，但是当我使用以下行进行测试时：

```
snmpwalk -v 1 -c public myComputer OID 
```

我对两个 OID 都得到了相同的结果，但这似乎不正确。如果有其他变量我可以尝试而不是我现在使用的变量，我会徘徊。

即使您可以指出我在哪里可以`IF-MIB`找到`snmpwalk`有关

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:33:47.197

好的，经过一番搜索，我找到了答案。这些值是相等的，因为我没有问正确的接口（我问的是环回）。这个命令`snmpwalk -v 1 -c public hostname 1.3.6.1.2.1.31.1.1.1`列出了很多 OID，从那里您可以看到代表接口的“IF-MIB::ifName”。如果您执行`IF-MIB::ifInOctets.x`x 对应于您感兴趣的接口的位置，您可以找到一个以字节为单位的数字。我不确定它是什么意思，或者它是如何生成的，但我测试了执行两次命令：

```
date ; snmpwalk -v 1 -c public myComputer ifOutOctets.x 
```

以大约 1 分钟的间隔，然后我减去这两个值并将它们除以执行之间经过的秒数。我将该值与从 iptraf 获得的值进行了比较，它们有点匹配，所以我认为您可以使用这种方式来查找带有 snmp 的站点的流量。

# android - 在布局参数中填充图像按钮：android

> ID：11226690
> 
> 赞同：0
> 
> 时间：2012-06-27T12:54:44.293
> 
> 标签：android, android-layout

我正在使用 RelativeLayout 创建一个简单的工具栏

对于按钮图像，我正在使用以下代码，

```
ImageButton back = new ImageButton(ctx.getContext());
                RelativeLayout.LayoutParams backLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                backLayoutParams.addRule(RelativeLayout.CENTER_VERTICAL);

                back.setLayoutParams(backLayoutParams);
                back.setContentDescription("Back Button");
                back.setId(2);
                try {
                    back.setImageBitmap(loadDrawable("icon_left.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                back.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                       //
                    }
                }); 
```

用于将其添加到工具栏

```
toolbar.addView(back); 
```

对于我正在使用的工具栏，

```
RelativeLayout toolbar = new RelativeLayout(ctx.getContext());
toolbar.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,60)); 
```

问题是按钮图像没有填充到布局参数中。

我尝试使用 setMargin 它可以工作，但它不能随各种屏幕分辨率缩放。

![在此处输入图像描述](../Images/76f860c4bfd372319d39abc944644572.png)

需要有关如何执行此操作的说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:58:52.743

Try setting the back image as the background - it should be scaled automatically by the Android Operating System. I advise you turn that image into a .9.png so that it doesnt stretch the text, just the button appearance you have.

BTW, awesome looking button there.

EDIT: After looking carefully at your code, i think you can simply replace the code

```
back.setImageBitmap(loadDrawable("icon_left.png")); 
```

with

```
back.setBackgroundDrawable(loadDrawable("icon_left.png")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:19:22.647

它没有填充布局，因为您写道：

```
RelativeLayout.LayoutParams backLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

你想要什么结果？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:02:48.280

默认情况下，`ImageButton`它的图像后面有一个按钮背景，就像`Button`它的文本后面一样。

通过调用`setBackgroundDrawable(null)`您的代码来禁用背景。

# c# - 如何将 WCF 项目平台目标更改为 x86？

> ID：11226691
> 
> 赞同：2
> 
> 时间：2012-06-27T12:54:57.837
> 
> 标签：c#, wcf, visual-studio-2010, projects-and-solutions, platform

我编写了一个使用第三方项目的项目，如果我的项目中“项目属性”下的“构建”下的“平台目标”设置为“X86”而不是“任何 CPU”，我只能运行它。

但是，当我尝试将此第三方项目与我的 WCF 项目一起使用时，“平台目标”功能不会出现在 WCF 项目属性下，因此无法运行。

有谁知道如何设置 WCF 项目的“平台目标”或如何让第三方项目在“任何 CPU”上运行

谢谢 ！

**更新：**
嗨，
首先感谢
第二，我已经尝试了史蒂夫的建议，但是该项目没有为我提供 x86，也没有创建新的（像其他项目一样），也没有将配置从调试更改为发布。

此外，我的意思是“平台目标”而**不是**“平台”。
正如您在以下屏幕截图中看到的那样，**我需要更改 Green Circle**。配置管理器更改红圈。
项目属性的屏幕截图来自另一个项目，我能够更改其“目标属性”
谢谢！ ![在此处输入图像描述](../Images/0aa266df4a365804127561c00f9e6449.png)

# linux - git sudo 用户访问被拒绝

> ID：11226694
> 
> 赞同：0
> 
> 时间：2012-06-27T12:55:13.370
> 
> 标签：linux, ruby-on-rails-3, git, permissions

在我跑步的时候

```
git clone -q git@codebasehq.com:zzzz/yyyy/plat.git 
```

我能够克隆该项目，但如果我运行

```
sudo git clone -q git@codebasehq.com:zzzz/yyyy/plat.git 
```

并给出我得到的正确密码

```
 Permission denied (publickey).
 fatal: The remote end hung up unexpectedly 
```

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:04:45.300

您的**root**用户只是没有正确的**公钥**。`/root/.ssh`

您的**用户**肯定有一个 in `~/.ssh`，但 root 没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T12:59:55.880

codebasehq 使用公钥/私钥对进行身份验证，因此当您 sudo 时，您尝试使用 root 的密钥对进行身份验证，这与您的不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:59:27.390

我认为它真的很简单。

当您使用 sudo 运行**git clone**时，您将在 root 用户下运行它。而且我认为您的 root 用户没有有效的公钥来克隆 repo。

有一些方法可以仅启用密钥身份验证。

# web-services - 使用 kendo ui 创建数据源时，在 firebug 控制台中获取回调是未定义的错误

> ID：11226698
> 
> 赞同：0
> 
> 时间：2012-06-27T12:55:20.297
> 
> 标签：web-services, kendo-ui

[我的网络服务生成与http:](http://demos.kendoui.com/service/products) //demos.kendoui.c​​om/service/products 相同的 jsonp 响应。

当我尝试为我的 web 服务创建数据源时，我在 firebug 控制台中收到回调未定义错误。

网络服务响应。

callback([{"category":null,"productName":"Puma","productId":1,"quantity":0,"price":3000.0,"categoryId":1,"description":"ok"} ])

但是当我使用 kendo ui webservice (http://demos.kendoui.c​​om/service/Products) 时，我得到了一个有效的数据源。

代码 ：

```
$(document).ready(function() {
            var dataSource = new kendo.data.DataSource({
                    transport: {
                        read: {
                            //url: "http://demos.kendoui.com/service/products",
                            url: "http://localhost:8080/mobile-services/rest/categories/1/products.json",
                            dataType: "jsonp"
                        }
                    },
                    pageSize: 12
                });

            $("#pager").kendoPager({
                dataSource: dataSource
            });

            $("#listView").kendoListView({
                dataSource: dataSource,
                template: kendo.template($("#template").html())
            });
        }); 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:25:56.027

您已将 JSONP 指定为`dataType`，并且您正在请求一个 JSON 文件。JSONP 和 JSON 不一样。尝试使用`dataType: "json"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:18:24.840

我猜函数名称不是`callback`
回调只是关键，函数本身可能会被调用，比如`jQuery17101014779508113`
你能看看你的数据源在读取操作期间向服务器发送了什么吗？（Chrome / Firebug 网络选项卡）
我正在使用 $_REQUEST['callback'] 变量（使用 PHP 脚本）并将其作为填充返回。由于您只是使用静态 .json 文件，并且回调函数名称将在每个请求上更改（以防止缓存），因此您将永远不会拥有正确的函数名称。
所以：我建议您使用 JSON 而不是 P 或者您动态返回您收到的相同回调。

干杯....

# java - 属性文件路径 Eclipse vs Deployed Java Web App

> ID：11226701
> 
> 赞同：1
> 
> 时间：2012-06-27T12:55:29.593
> 
> 标签：java, eclipse, path

我正在为我部署的每个应用程序在内部服务器上的受保护文件夹中维护包含数据库凭据的属性文件。我不允许将凭据存储在 WAR 文件中。

在我的 PC 上测试时，路径是 windows mount，但是当我部署到服务器时，它是 unix 路径

我一直在处理这样的检索

```
//siteDbCedentialFolder obtained from web.xml

Properties prop = new Properties();
InputStream in = null;
try {
    //assume running on server first
      in = new FileInputStream("/abc/data/" + siteDbCedentialFolder + "/props.txt");
    } catch (java.io.IOException ex) {
    // Probabaly Running locally
      in = new FileInputStream("W:/internal/abc/data/" + siteDbCedentialFolder + "/props.txt");
    } catch (Exception xx) {
    xx.printStackTrace();
    }
prop.load(in);
in.close(); 
```

我的方法是使用 catch 来获取本地路径，还是有更好的方法来编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:57:13.663

Better way is to put the txt file in user home directory and get it by

```
System.getProperty("user.home"); 
```

and to get the full path

```
String pathToFile = System.getProperty("user.home") + File.separator + "data" + File.separator + "props.txt"; 
```

It would work across all the platform, provided that you need to put the file at proper place (user home)

# php - 什么是 php 中的流和流包装器

> ID：11226702
> 
> 赞同：8
> 
> 时间：2012-06-27T12:55:33.700
> 
> 标签：php, file, stream

就我对 PHP 中流的理解而言，流是提供
读取和写入资源的方法的接口，该接口由不同
类型的流包装器（http、ftp、文件等）实现，以提供特定的功能。那么当我们说 fopen() 打开流时，它是否意味着特定流
包装对象的实例化？如果我错了，请澄清我
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T13:35:40.883

并非所有流都在该级别实现，大多数内置程序都在 C 级别，所以不，就 PHP 而言不是`streamwrapper`对象。该接口确保它像流一样*工作*，而不是相反。（本质上：所有流包装器都可以像流资源一样访问，但并非所有流资源都由流包装器类提供）。但是，您可以覆盖例如`file:///`包装器和其他内置程序，非常有趣。

# c#-4.0 - 远程服务器返回错误：(404) Not Found

> ID：11226703
> 
> 赞同：2
> 
> 时间：2012-06-27T12:55:47.613
> 
> 标签：c#-4.0

我想将文件上传到 https 服务器我已经编写了以下代码将文件上传到 https 服务器。但它给出的错误：

> 远程服务器返回错误：(404) Not Found。

我的代码如下。检查代码有什么问题？

```
 try
        {
            using (WebClient webClient = new WebClient())
            {
                webClient.Credentials = new NetworkCredential(username, password);
                string filePath = filepath;
                webClient.UploadFile(@"https://us.itranscript.net:444/Upload/test.txt", "PUT", filePath);
                webClient.Dispose();
            }
        }
        catch (Exception err)
        {

        } 
```

帮我

# ruby - 正则表达式在 textwrangler 中有效，但在我的 ruby 脚本中有些问题

> ID：11226704
> 
> 赞同：0
> 
> 时间：2012-06-27T12:55:47.850
> 
> 标签：ruby, regex

我可以找人在我的剧本上打洞吗？我的正则表达式可以很好地在 textwrangler 中找到 url，但是当我运行我的脚本时，parseducc.txt 文件会将一些零碎的东西放在不同的行上。

```
export = File.new("parseducc.txt" , "w+")
File.open("uccdata.txt").each_line do |line|

    line.scan(/(([a-zA-Z0-9-])+\.)+([a-zA-Z]){3,4}/) do |x|
        export.puts x
    end
end 
```

## 样本输出

> dhl-美国。
> 一
> 米加
> 价。
> t
> 米
> 联邦快递。
> x
> 米
> 黄色。
> 米
> _

我使用此脚本的目标是逐行扫描文件并提取 URL 并将它们每行一个转储到新的输出文件中。我已经尝试了这个脚本的几种变体，但显然我遗漏了一些东西。我猜它在我的正则表达式中，但我使用了我在 regexlib.com 上找到的不同变体，它们显示出不同的类似问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:24:14.253

*试试这个：*

```
export = File.new("parseducc.txt" , "w+") 
File.open("uccdata.txt").each_line do |line| 
  line.scan(/(https?:\/\/\S+)/) do |x| 
    export.puts x 
  end 
end 
```

# android - 如何将光标放置到某个 EditText 框？

> ID：11226710
> 
> 赞同：9
> 
> 时间：2012-06-27T12:56:06.130
> 
> 标签：android

我的 XML 包含五个`EditText`框和一个按钮。我的光标现在指向第一个`EditText`框。如何单击按钮将光标自动放置到第三个`EditText`框。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T12:59:03.803

在你的按钮上`onClick()`放..

```
thirdEditText.requestFocus(); 
```

就像是，

```
button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            thirdEditText.requestFocus(); 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:59:16.860

> editText3.requestFocus();

添加按钮的onClick方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:58:46.070

使用`requestFocus()`方法来获得焦点。

或者将 <requestFocus/> 放在你的 XML 布局中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T13:00:52.153

这是代码：

```
btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            edittext.setFocusableInTouchMode(true);
            edittext.requestFocus();

        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T12:57:24.570

尝试

```
EditText editText = (EditText) findViewById(R.id.textId);
editText.requestFocus(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T13:01:40.763

只需添加`<requestFocus/>`标签`EditText`：

```
<EditText
        android:id="@+id/editText"
        android:layout_width="320dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/label"
        android:inputType="numberDecimal"
        android:textSize="25dp" >

        <requestFocus />
</EditText> 
```

# iphone - 如何在另一个 UIView 控制器中显示复杂的 UIViewController？

> ID：11226711
> 
> 赞同：1
> 
> 时间：2012-06-27T12:56:06.177
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

好的，情况就是这样。我目前有一个名为的视图控制器`MainViewController`，它有一个带有许多不同单元格的 UITableView。当我单击一个单元格时，我希望该单元格展开（增加高度）并显示一些“附加信息”。问题是，这个附加信息非常复杂，可以包含 UILabels、其他 UITableViews、UIWebViews 和 UIImageViews。此外，这个“附加数据”需要相当多的计算才能确定要显示的确切内容（即 UILabel 所说的内容，UIImageView 的大小）。因此，由于这种“附加信息”的复杂性，我不知道如何设计我的程序。

“附加信息”需要大量代码，因此我不想只是将该代码`MainViewController.`扔进以编程方式。

Currently I have each set of additional information as its own separate UIViewController (thus allowing me to have separate classes for the data and allowing me to use interface builder) and I just segue to a new screen when a cell is selected. 但是，我不想切换到新屏幕；我希望这个 UIView 控制器显示的所有数据都显示在`MainViewController`. 最好的方法是什么？

总之，我目前有一个 UIViewController 连接到另一个 UIViewController；但是，我希望第二个 UIViewController 的内容显示在第一个中。如果可能的话，我想使用某种 Interface Builder 并将第二个 UIViewController 的逻辑分离到另一个类中。

详细信息：~ 我只为 iOS 5 开发，我正在使用 ARC。~ 我以前从未为 iOS 4 或更低版本开发过，也从未使用过 nib 文件，但如果需要，我愿意学习。简单的示例代码会很有帮助。~ 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:48:18.510

这里有一些很好的建议，但请注意，这`loadNibNamed:owner:`是一个相当昂贵的重复调用 API，因为它每次都从文件系统读取 nib。相反，考虑做这样的事情。

将您的 nib 文件注册到`viewDidLoad`. 在 Interface Builder 中，确保为您的自定义单元格提供重用标识符。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UINib *myNib = [UINib nibWithNibName:@"MyNib" bundle:nil];
    [self.tableView registerNib:myNib forCellReuseIdentifier:@"MyCell"];

    // Do any other stuff you need to do...
} 
```

然后，只要您需要，只需将您的自定义单元格出列即可。`UINib`会将 nib 文件缓存在内存中，以避免每次从文件系统重新加载它。

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    // Configure cell as needed...

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:23:59.787

与 SmartWork 相同的观点。

您应该使用其 xib 文件创建自定义 UITableViewCell 类，并将 UITableViewCell 作为主 xib 视图

在您的 tableView 数据源中，您可以将其导入如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"MyViewCell";
    MyViewCell *cell = (MyViewCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"MyViewCell" owner:nil options:nil];
        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (MyViewCell *)currentObject;
                break;
            }
        }
    }
    [self configureCell:cell atIndexPath:indexPath]; // your own function to customize your cell.
    return cell;
} 
```

然后，在单元格xib中，您可以设置单元格的最大高度，并在 UITableViewDelegate 类中决定有效高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:37:50.527

只是为了补充 SmartWork 所说的，当您点击特定单元格时，您可以使用以下代码行更新该行的高度：

```
- (CGFloat)tableView:(UITableView *)aTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
     // set a dynamic value for the cell height depending on the state of the data in the cell 
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{ 

    // update the state of the data in the cells here..  
    // calling these below lines will change the height of the cells smoothly 

    [tableView beginUpdates]; 
    [tableView endUpdates]; 

} 
```

您还需要自定义 UITableViewCells。将它们视为简单视图，并添加和删除您需要的任意数量的子视图

如果您热衷于将 Nibs 用于单元格内的子视图，您可以创建它们的 nib 并将它们连接到您的自定义 TableView 单元格，如下所示：（子视图可以是您的 tableViewCell 的属性）

```
NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"MyTableViewCellNib" owner:self options:nil];

mySubview = [(SubView *)[nib objectAtIndex:0]retain]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T13:04:21.353

在我看来，没有必要在另一个内部使用一个 UiviewController。

您可以将 Uiview 与 nib 文件一起使用，因此您可以以图形方式设计这些“附加信息”视图。它很容易实现和维护。

# c# - EndPoint：C# 中的语法 - 这是什么？

> ID：11226712
> 
> 赞同：5
> 
> 时间：2012-06-27T12:56:06.630
> 
> 标签：c#, .net, windows, winforms, .net-3.5

我正在查看我最近加入的项目的一些代码，并在**.NET 3.5的****C# Win Forms Application**中发现：

 **```
public void foo()
{
    //Normal code for function foo.

//This is at the end and it is left-indented just as I put it here.
EndPoint:
    {
    }
} 
```

当我单击“*端点/转到定义”*时，它显示*“无法导航到端点”*，但整个项目非常小并且编译/运行没有错误，所以它不是缺少参考或任何东西。

**什么是 EndPoint？这个名称为 {} 的语法是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:56:40.407

其为`goto`。请参阅：http: [//msdn.microsoft.com/en-us/library/13940fs2%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/13940fs2%28VS.71%29.aspx)

`goto`带有冒号的语法指定语句将控制转移到的标签。您*可以*在 C# 中使用它，但大多数开发人员倾向于避免使用它。有时打破嵌套循环可能很有用（这是我能想到的最好的“合法”用法）

这是一篇关于以下一些更有用用法的精彩文章`goto`：[http ://weblogs.asp.net/stevewellens/archive/2009/06/01/why-goto-still-exists-in-c.aspx](http://weblogs.asp.net/stevewellens/archive/2009/06/01/why-goto-still-exists-in-c.aspx)

编辑：只是为了评论你在定义时遇到的错误，这是可以理解的。标签没有“定义”来源。也许“去定义”`goto Endpoint;`可能会跳到标签上，但我不确定——从未尝试过。如果您在那里的代码只有`Endpoint:`标签但没有`goto Endpoint;`任何地方，那么删除标签应该是安全的，因为（我假设）它是旧代码的未使用残余。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:02:39.793

其他人已经解释了它`EndPoint:`是什么。额外的大括号正在创建一个新的范围。通过创建一个内部范围，你可以做这样的事情

```
public Foo()
{
    {
        int bar = 10;
        Console.WriteLine(bar);
    }

    Console.WriteLine(bar); //Error: "Cannot resolve symbol bar."  It does not exist in this scope.

    {
        int bar = 20;  //Declare bar again because the first bar is out of scope.
        Console.Writeline(bar);
    }
} 
```**

# iphone - contact notes are not transferred when exporting/importing via the built-in vCard representation methods

> ID：11226715
> 
> 赞同：2
> 
> 时间：2012-06-27T12:56:14.727
> 
> 标签：iphone, objective-c, abaddressbook, vcf-vcard

Using the ABPersonCreateVCardRepresentationWithPeople method for export, and the ABPersonCreatePeopleInSourceWithVCardRepresentation for import, I have successfully transfered contact data between devices. However, the data in the contact's "notes" field isn't transfered. Here's my export function:

```
+(NSData*)exportContactsToVcard:(NSArray*)contacts
{
    NSMutableArray *people  = [NSMutableArray arrayWithCapacity:contacts.count];
    ABAddressBookRef ab = ABAddressBookCreate();
    for (Contact *contact in contacts) 
    {
        ABRecordRef person = ABAddressBookGetPersonWithRecordID(ab,contact.contactId);
        [people addObject:(__bridge id)person];
    }
    NSData *vCard = (__bridge NSData*)ABPersonCreateVCardRepresentationWithPeople((__bridge CFArrayRef) people);
    return vCard;
} 
```

and part of my import function:

```
+(NSArray*)importContactsFromVcardData:(NSData*)vcardData
{
    NSMutableArray *addedContactIds = [NSMutableArray array];
    ABAddressBookRef addressBook = ABAddressBookCreate();
    ABRecordRef defaultSource = ABAddressBookCopyDefaultSource(addressBook);
    NSArray *createdPeople = (__bridge_transfer NSArray*)ABPersonCreatePeopleInSourceWithVCardRepresentation(defaultSource,(__bridge CFDataRef)vcardData);
    CFErrorRef error = NULL;
    for (id person in createdPeople)
    {
        error = NULL;
        ABRecordRef personRecord = (__bridge ABRecordRef)person;
        NSString *notes = (__bridge NSString *)ABRecordCopyValue(personRecord, kABPersonNoteProperty); 
```

In the last line, notes is always nil, even if the contact had notes before it was exported. All the other standard contact fields seem to be in place. For example, if I replace the last line with:

```
NSString *firstName = (__bridge NSString *)ABRecordCopyValue(personRecord, kABPersonFirstNameProperty); 
```

the firstName string will hold the contact's first name.

Any idea how I can work around this, and get the contact notes?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:25:36.553

出于测试目的，您可以从通讯簿中导出 vCard。然后将其拖到 TextEdit 以查看各个字段。

在底部你会发现这样的东西：

注意：这是一个注释！

此外，有关 vCard 格式的信息，请参阅此链接：

[http://en.wikipedia.org/wiki/VCard](http://en.wikipedia.org/wiki/VCard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:43:02.777

ABPersonCreateVCardRepresentationWithPeople will only transfer the important contact details of a vCard...thats my identifying in much tests with the vCard and the iOS import-export function. It has many mistakes, e.g. if you try to import it with social networks like facebook, it won't do it with (just look in my other thread [THREADLINK](https://stackoverflow.com/questions/14589216/cfarraygetvalueatindex-wont-get-the-social-profiles) )

But if you try to add some vCard Information over ABNewPersonViewController, it will work perfectly.

# c++ - C++ / Boost 共享资源类，用于管理资源生命周期，如 shared_ptr

> ID：11226719
> 
> 赞同：3
> 
> 时间：2012-06-27T12:56:36.957
> 
> 标签：c++, boost, shared-ptr

Boost 或其他任何东西是否包含容器将像共享指针一样运行，但允许我控制共享“资源”在其生命周期结束时会发生什么？我想封装一个可以传递的对象，但是当不再需要时可以以上下文定义的方式关闭。

例如，我可能想创建和传递一个文件句柄，知道当它超出范围时，文件将自动关闭，但我不想删除句柄。

我可以自己实现它，但如果框架已经存在，我宁愿不参与 - 毫无疑问有人做得更好。我不能使用`boost::shared_ptr`，至少不能以它的正常形式使用，因为资源不应该在生命结束时被删除。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T13:00:38.903

您知道`std::shared_ptr`可以使用自定义删除器类吗？这实际上不需要使用“delete”或“free”，但可以很容易地使用某种其他类型的机制（例如引用计数机制`release`等）。

这是一个非常简单的例子：

```
std::shared_ptr<FILE> foo(fopen("la", "r"), fclose); 
```

删除器只需要是一个接受`shared_ptr`包装的指针类型的函数。在这种情况下，当foo 超出范围时，`shared_ptr`将为您关闭文件。（注意：这不是一个完全明智的实现，因为没有检查错误值。这只是一个示例）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:00:13.820

如果您使用的是支持 C++11 的编译器，则`std::shared_ptr`其中一个构造函数采用自定义“删除器”函数。这将允许您编写自己的函数来“释放”资源。

编辑 - 我忘记了 std::shared_ptr 实际上是在 TR1 对 C++ 的更新中，所以如果你的编译器支持 TR1，你应该处于良好状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:41:32.657

由于您不能使用 Boost 或 std::shared_ptr，因此您可以编写一个智能指针，无论它是共享的还是具有自定义删除器的唯一指针。

# python - 从字符串中获取域？- Python

> ID：11226722
> 
> 赞同：1
> 
> 时间：2012-06-27T12:56:38.563
> 
> 标签：python, string, url, dns

我需要帮助。如何从字符串中获取域？

例如：“*嗨，我是夏目，查看我的网站[http://www.mysite.com/](http://www.mysite.com/)* ”

我如何获得**mysite.com**？

输出示例：

[http://www.mysite.com/](http://www.mysite.com/)（如果输入了 http）

www.mysite.com（如果未输入 http）

mysite.com（如果未输入 http 和 www）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:58:48.597

好吧...您需要某种方式来定义您认为*具有*“域”的东西。一种方法可能是查找 URL 匹配的正则表达式，并将其应用于字符串。如果成功，您至少知道该字符串包含一个 URL，并且可以继续解释该 URL 以查找主机名，然后您可以从中提取域（可能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:00:49.713

```
myString = "Hi im Natsume, check out my site http://www.mysite.com/"
>>> a = re.search("(?P<url>https?://[^\s]+)", myString) or re.search("(?P<url>www[^\s]+)", myString)
>>> a.group("url")
'http://www.mysite.com/'
>>> myString = "Hi im Natsume, check out my site www.mysite.com/"
>>> a = re.search("(?P<url>https?://[^\s]+)", myString) or re.search("(?P<url>www[^\s]+)", myString)
>>> a.group("url")
'www.mysite.com/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:01:17.880

如果所有站点都具有相同的格式，您可以使用这样的正则表达式（在这种特定情况下有效）：

```
re.findall('http://www\.(\w+)\.com', url) 
```

但是，您需要一个更复杂的正则表达式来解析任何 url 并提取域名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T13:03:09.823

如果你想使用正则表达式，一种方法可能是 -

```
>>> s = "Hi im Natsume, check out my site http://www.mysite.com/"
>>> re.findall(r'http\:\/\/www\.([a-zA-Z0-9\.-_]*)\/', s)
['mysite.com'] 
```

..考虑url以'/'结尾

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T13:07:20.077

```
s= "Hi im Natsume, check out my site http://www.mysite.com/"
start=s.find("http://") if s.find("http://")!=-1 else s.find("https://")+1
t = s[start+11:s.find(" ",start+11)]
print(t) 
```

**输出：** `mysite.com`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-13T06:56:11.603

最好的方法是使用正则表达式来提取 URL。然后用于`tldextract`从 URL 中获取有效的域名。

```
import re
import tldextract

text = "Hi im Natsume, check out my site http://www.example.com/"
urls = re.findall('http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+', text)
found_url = urls[0]
info = tldextract.extract(found_url)
domain_name = info.domain
suffix_name = info.suffix
final_domain_name  = domain_name+"."+suffix_name
print(final_domain_name) 
```

# javascript - 如何在 jQuery 中触发父事件而不是子事件

> ID：11226724
> 
> 赞同：0
> 
> 时间：2012-06-27T12:56:43.217
> 
> 标签：javascript, jquery, html

我有这段 html：

```
<div id="parent">
     <div id="child></div>
</div> 
```

它看起来像这样：

```
---------------------------
-                         -
-    #parent              -
-                         -
-         ----------      -
-         -        -      -
-         - #Child -      -
-         -        -      -
-         ----------      -
-                         -
--------------------------- 
```

如何在 jQuery 中触发一个事件（例如翻转），该事件仅在悬停时有效，`#parent`但在悬停时**无效**`#child`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:00:38.970

你可以使用**[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)**

类似的问题是[jquery stop child triggering parent event](https://stackoverflow.com/questions/2364629/jquery-stop-child-triggering-parent-event)

```
$("#parent").click(function(event){
  //do something with parent

});
$("#child").click(function(event){
  event.stopPropagation();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:00:52.090

我认为调查 event.stopPropagation 可以解决问题...

```
$("#someElement").click(function(event){
  event.stopPropagation();
  // do something
}); 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:07:45.303

如果您`return false`来自事件处理程序，它将阻止事件冒泡到下一个祖先。

[http://jsfiddle.net/jbabey/CV76D/](http://jsfiddle.net/jbabey/CV76D/)

```
$('#outer').mouseover(function () {
    $(this).addClass('green');
});

$('#inner').mouseover(function () {
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T13:07:46.053

```
$('#parent').on('click',function(e){
    if(e.target === document.getElementById('child')) return false;
    // your code 
}) 
```

`.stopPropagation()`但是，正如其他人所说，在我看来，求助于会更好。

# android - 将 inputStream 传递给 XmlParser 时出现 FileNotFound 异常

> ID：11226725
> 
> 赞同：0
> 
> 时间：2012-06-27T12:56:43.820
> 
> 标签：android, inputstream, saxparser, filenotfoundexception

我是android开发的初学者。我将 SAX 解析器用于 xml 解析器。我找不到这个例外的原因。我尝试了 getAsset() 方法。但它没有奏效。

xmlParser 代码 :::

```
 public class XMLParser {

     public static Country parseCountry(InputStream is) {
        try {
         Country country= new Country(null, null, null);

         XMLReader xmlReader =  SAXParserFactory.newInstance().newSAXParser().getXMLReader();
         XMLHandler xmlHandler = new XMLHandler();
         xmlReader.setContentHandler(xmlHandler);     
         xmlReader.parse(new InputSource(new FileInputStream(http://64.85.165.53/dharatest/xmlarray.xml));
         country = xmlHandler.getParsedCountryData();

        } catch(ParserConfigurationException pce) { 
               Log.e("SAX XML", "sax parse error", pce); 
        } catch(SAXException se) { 
               Log.e("SAX XML", "sax error", se);       
        } catch(IOException ioe) { 
               Log.e("SAX XML", "sax parse io error", ioe); 
        }     
       return country;
   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:03:19.607

为什么要使用带有 URL 的 FileInputStream？尝试：

```
 public class XMLParser {

     public static Country parseCountry(InputStream is) {
        try {
         Country country= new Country(null, null, null);

         XMLReader xmlReader =  SAXParserFactory.newInstance().newSAXParser().getXMLReader();
         XMLHandler xmlHandler = new XMLHandler();
         xmlReader.setContentHandler(xmlHandler);     
         xmlReader.parse(new InputSource(new URL("http://64.85.165.53/dharatest/xmlarray.xml").openStream());
         country = xmlHandler.getParsedCountryData();

        } catch(ParserConfigurationException pce) { 
               Log.e("SAX XML", "sax parse error", pce); 
        } catch(SAXException se) { 
               Log.e("SAX XML", "sax error", se);       
        } catch(IOException ioe) { 
               Log.e("SAX XML", "sax parse io error", ioe); 
        }     
       return country;
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:37:50.107

```
 public class XMLParser {

     public static Country parseCountry(InputStream is) {
         try {
         Country country= new Country(null, null, null);

       XMLReader xmlReader =SAXParserFactory.newInstance().newSAXParser().getXMLReader();
     XMLHandler xmlHandler = new XMLHandler();
     xmlReader.setContentHandler(xmlHandler);     
     xmlReader.parse(new InputSource(getAssets().open("data.xml"));
     country = xmlHandler.getParsedCountryData();

    } catch(ParserConfigurationException pce) { 
           Log.e("SAX XML", "sax parse error", pce); 
    } catch(SAXException se) { 
           Log.e("SAX XML", "sax error", se);       
    } catch(IOException ioe) { 
           Log.e("SAX XML", "sax parse io error", ioe); 
    }     
  return country;
   }
   } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T13:10:14.360

改变你的线路

```
xmlReader.parse(new InputSource(new FileInputStream(http://64.85.165.53/dharatest/xmlarray.xml)); 
```

经过

```
 xmlReader.parse(new InputSource(callWebservice("http://64.85.165.53/dharatest/xmlarray.xml"))); 
```

其中**callWebservice**方法如下图

```
 private InputStream callWebservice(String serviceURL) {
        HttpClient client=new DefaultHttpClient();
        HttpGet getRequest=new HttpGet();

           try {
             // construct a URI object
             getRequest.setURI(new URI(serviceURL));
              } catch (URISyntaxException e) {
                Log.e("URISyntaxException", e.toString());
               }

            // buffer reader to read the response
           BufferedReader in=null;
           // the service response
          HttpResponse response=null;
             try {
                  // execute the request
                  response = client.execute(getRequest);
               } catch (ClientProtocolException e) {
                 Log.e("ClientProtocolException", e.toString());
               } catch (IOException e) {
                 Log.e("IO exception", e.toString());
            }
      if(response!=null)
            try {
                return response.getEntity().getContent();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block

                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block

                e.printStackTrace();
            }
        else
          return null;
        return null;

    } 
```

# c# - How do I jump between XML doc comments in C#?

> ID：11226726
> 
> 赞同：19
> 
> 时间：2012-06-27T12:56:45.897
> 
> 标签：c#, visual-studio-2010, resharper, keyboard-shortcuts, xml-comments

OK, this is a silly question, but when using Visual Studio, if I am writing XML doc comments in Visual Basic, I can use the tab key to switch between fields (e.g. Summary to Param to Returns). In C#, however, hitting the Tab key inserts a Tab, so I have to click on the individual fields to navigate to them (or use the arrow keys). This makes what should have been a simple process tedious and time-consuming.

Anybody know if there is a default keyboard shortcut I can use, or if there is a specific command I can map to an unused keyboard shortcut? I am using Visual Studio 2010, with ReSharper 6.1\. Did some searching in the SO archives, but either nobody else has this problem, or I don't know the right keywords to ask (the latter is much more likely). Thanks in advance!

EDIT: I should clarify, a bit. The tabbing behavior in VB is native to Visual Studio 2010; the ReSharper install is fairly recent (after I switched to C#), and I wanted to mention it in case someone might know whether ReSharper had added their own navigation shortcuts (as they have tons) for this. Thanks again!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-14T15:31:31.420

Resharper 确实具有结构导航的可能性。通常，您可以使用*Tab*或*Shift+Tab*快捷键转到下一个或上一个代码元素。如果您的光标位于代码元素中（即不在代码行之前的空白区域中），则*Tab*键不应插入选项卡，而是导航到下一部分。结构导航的配置可以在**Environment|Editor|Editor Behavior**中完成。

如果它仍然无法按描述工作，我会尝试重置设置（尤其是 Resharper 的设置）并检查 Resharper 是否安装正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:46:12.533

我可能误解了这个问题，但也许听起来您可以重置您的用户设置？ [http://msdn.microsoft.com/en-us/library/ms247075%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms247075%28v=vs.100%29.aspx)？或者只是运行 devenv / resetuserdata 。这样做，当你启动 Visual Studio 时，也许选择“常规”设置而不是 C# 或 vb.net 特定的设置？

# wpf - 在可调整大小的画布中拖动项目

> ID：11226729
> 
> 赞同：0
> 
> 时间：2012-06-27T12:57:03.523
> 
> 标签：wpf, resize, controls, traversal

我正在设计一个样条编辑器，它由两部分（用户控件）组成，左侧控件是**DesignerControl**，右侧是**InfoControl**。它们共享相同的 DataContext：**DesignerVM**和

```
ObservableCollection<SplineVM> SplineVMList; 
```

**DesignerControl**是一个**ItemsControl**模板化为**Canvas**（“mycanvas”）， ItemsSource 绑定到**SplineVMList**和 ItemTemplate 设置为**SplineControl**。
**InfoControl**是一个显示**SplineVM**的列表框和一个显示 SplineVM 属性的**网格。**

在**SplineControl 中**，我有一个包含 4 个可拖动点（矩形）和 2 条将绑定到这些点的线的画布。一切正常，我可以拖动我的点，我的线条移动。

```
<UserControl>
    <Canvas Width="300" Height="300" x:Name="mycanvas" Background="Transparent">
        <Path x:Name="curve" Stroke="#F02828" StrokeThickness="3">
            <Path.Data>
                <PathGeometry>
                    <PathGeometry.Figures>
                        <PathFigureCollection>
                            <PathFigure>
                                <PathFigure.Segments>
                                    <PathSegmentCollection x:Name="pathsegment"/>
                                </PathFigure.Segments>
                            </PathFigure>
                        </PathFigureCollection>
                    </PathGeometry.Figures>
                </PathGeometry>
            </Path.Data>
        </Path>
        <Rectangle x:Name="curvePoint1" Width="10" Height="10" Canvas.Bottom="0" Canvas.Left="0" />
        <Rectangle x:Name="curvePoint2" Width="10" Height="10" RadiusX="4" RadiusY="4" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE/4)}"/>
        <Rectangle x:Name="curvePoint3" Width="10" Height="10" RadiusX="4" RadiusY="4" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE/2)}"/>
        <Rectangle x:Name="curvepoint4" Width="10" Height="10" Canvas.Bottom="0" Canvas.Left="{Binding ElementName=mycanvas, Path=ActualWidth, Converter={StaticResource mathconverter}, ConverterParameter=(@VALUE)}"/>
        <Line x:Name="line1" Stroke="#dfdfdf" StrokeThickness="1"/>
        <Line x:Name="line2" Stroke="#dfdfdf" StrokeThickness="1"/>
    </Canvas>
</UserControl> 
```

**我的第一个问题**是我必须使用一个容器（这里是 Canvas）来保存路径、矩形和线条。

当我在 mycanvas 中添加**SplineControl**时，它的位置很好，我可以立即拖动我的点，但是当我添加另一个 UserControl 时，它被放置在前一个的上方，我无法选择第一个 Usercontrol 的点。

我不想使用 IsHitTestVisible，因为我想从第一个 userControl 到第二个中选择点。

**我的第二个问题：** 由于我使用 Canvas 将我的东西保存在 SplineControl 中，我可以将点拖动到画布之外并仍然与它进行交互，乍一看它很棒。

但是再想一想，当我移动一个点以始终将我的点放在画布中时，我想调整我的画布的大小。但也让我的其他点位置更新关于 mycanvas 的比例。

您知道任何具有这种行为并且可以替换我的 Canvas 的控件吗？我应该使用 CustomControl 而不是 UserControl 吗？

我可以重新考虑我的项目概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:13:54.550

查看您的应用程序详细信息`Canvas`对我来说很有意义。我曾在一个类似的应用程序上工作过，并创建了一个`DesignerCanvas`允许项目移动、调整大小等并且运行良好。

**第一个问题：**我也遇到了类似的问题，并决定在我的控件的位置添加一个增量；所以说第一个控件的位置是 0,0 那么下一个控件将放置在 10,10；接下来是 20,20；这样，所有控件都有可见区域并且可以选择（一旦选择它就会出现在顶部）。

**第二个问题**：在拖动控件时增加Canvas的宽度和高度并确保控件不允许放置在Canvas之外，这不是一个大问题。将尝试查看是否可以找到与此相关的代码。

看看这个具有类似实现的文章系列 -

WPF 图表设计器 -[第 4](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)部分、[第 3](http://www.codeproject.com/Articles/23871/WPF-Diagram-Designer-Part-3)部分、[第 2](http://www.codeproject.com/Articles/23265/WPF-Diagram-Designer-Part-2)部分、[第 1 部分](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:58:41.573

事实上，我找到了一种方法来解决我通过其他项目选择项目的第一个问题。

`Canvas`位于选定项下的那些是不可点击的，因为 的`Color`被`Canvas`设置为`Transparent`。所以我可以看到他们，但不能与他们互动。

由于我已将`Background`属性设置为`Null`（或未明确设置），因此我可以单击并选择顶部项下的项目。

这是WPF的一种奇怪行为......有人有解释吗？

它也将解决我的第二个问题，因为我会设置我`UserControl`想要的大小，并且仍然`UserControls`在我的视图中选择其他。

这是一个肮脏的把戏，但我会避免这`CustomPanel`件事。

无论如何，谢谢 akjoshi 和 Danny Varod 为您的关注 ^^ 您的回答仍然有用，因为我将在我正在处理的另一个项目中使用它们。只是这个时间太短了。

# php - 将 php 变量 'foobar' 与 mysql 中的 'Foo Bar' 匹配

> ID：11226731
> 
> 赞同：2
> 
> 时间：2012-06-27T12:57:11.137
> 
> 标签：php, mysql, regex

我的 mysql 表包含一个条目

```
Foo Bar 
```

*（即可能包括大写字母和空格）*

我需要使用字符串 'foobar' 搜索数据库并匹配它

*foob​​ar 最初是使用以下数据库从数据库生成的：*

```
$i = str_replace(' ','',$i);
$i = preg_replace("/[^A-Za-z0-9]/", "", $i);
$i = strtolower($i); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:08:43.607

`Foo Bar`在执行比较之前`foobar`在 MySQL 中进行转换并不容易（尽管[可以使用 UDFs](http://www.mysqludf.org/lib_mysqludf_preg/)）。然后你只需要这样做：

```
WHERE LOWER(preg_replace('/[^A-Za-z0-9]/', '', field)) = 'foobar' 
```

最简单的选择是使用[正则表达式模式匹配](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)，默认情况下不区分大小写——只需`[^[:alnum:]]*`在（PHP 中）的每个字符之间插入`foobar`，然后搜索数据库：

```
WHERE field RLIKE '^[^[:alnum:]]*f[^[:alnum:]]*o[^[:alnum:]]*o[^[:alnum:]]*b[^[:alnum:]]*a[^[:alnum:]]*r[^[:alnum:]]*$' 
```

我认为最优雅（虽然有点困难）的解决方案是[定义自己的排序](http://dev.mysql.com/doc/en/adding-collation.html)规则，忽略非字母数字字符和字母大小写，然后使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:21:12.987

MySQL 没有任何等同于 gawk`gensub()`或 PHP 的`preg_replace()`. 虽然您可以使用 MySQL 的[**`REPLACE()`**](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_replace)和[**`LOWER()`**](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_lower)函数来删除特定字符，但您不能告诉 MySQL 删除`/[^[:alnum:]]/`.

我的建议是使用[UDF](https://launchpad.net/mysql-udf-regexp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:27:39.137

如果只有空格是问题，并且您的排序规则不区分大小写：

```
WHERE REPLACE(tn.fieldname,' ','') LIKE 'foobar'; 
```

如果您的排序规则区分大小写：

```
WHERE LOWER(REPLACE(tn.fieldname,' ','')) LIKE LOWER('foobar'); 
```

但是，它会导致全表扫描，因此性能不佳。规范化`fieldname`到您正在搜索的内容，或者具有规范化的另一列`fieldname`会执行得更好，尤其是在其上有索引的情况下。

# ios - iOS 6 turn by turn navigation API

> ID：11226737
> 
> 赞同：1
> 
> 时间：2012-06-27T12:57:24.883
> 
> 标签：ios, api, mapkit, navigator, ios6

Is there anyone who can give me same reference, support, example link or other info about iOS 6 Map API? (I made a long search on the web finding only the apple reference)

First of all I'm interested in "turn by turn navigation" feature and its integration in custom app.

Thanks to all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:17:22.407

我将从[WWDC 2012 session 300](https://developer.apple.com/videos/wwdc/2012/?id=300)开始，其中包括最后对其他信息源的引用。

# node.js - 如何检查 npm 包是否支持 Node.js v0.8.x？

> ID：11226738
> 
> 赞同：5
> 
> 时间：2012-06-27T12:57:26.113
> 
> 标签：node.js, npm

我已经部署了 Node.js 的 0.6 版本，其中为各种项目安装了大量的包。

有没有一种直接的方法来检查所有使用 NPM 安装的包，看看它们是否支持 Node.js v 0.8.x？

我可以看到 package.json 文件*应该*说明它们的 Node 版本，尽管我猜很多人不会包含这个 - 所以我真的只对那些说它们肯定与 Node v 0.8**不**兼容的包感兴趣。X

例如，他们在 package.json 中有这样的内容：

```
"engines": {
  "node": "<0.8.0"
}, 
```

或者

```
"engines": {
  "node": "=0.6.*"
}, 
```

我只想要一个不兼容的软件包的简单列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:20:50.690

在应用程序的基本目录中尝试此操作：

```
find . -name package.json -exec node -e 'var e = JSON.parse(require("fs").readFileSync(process.argv[1]))["engines"]; if (e && e.node) { var bad = false; if (e.node.match(/<\s*0\.[0-8]([^.]|\.0)/)) bad = true; if (e.node.match(/(^|[^>])=\s*0\.[^8]/)) bad = true; if (bad) console.log(process.argv[1], "appears no good (", e.node, ")") }' '{}' \; 
```

翻译成普通风格：

```
var fs = require("fs");

var contents = fs.readFileSync(process.argv[1]);
var package = JSON.parse(contents);
var engines = package.engines;

if (engines && engines.node) {
    var node = engines.node,
        bad = false;

    if (node.match(/<\s*0\.[0-8]([^.]|\.0)/)) {
        // Looks like "< 0.8.0" or "< 0.8" (but not "< 0.8.1").
        bad = true;
    }

    if (node.match(/(^|[^>])=\s*0\.[^8]/)) {
        // Looks like "= 0.7" or "= 0.9" (but not ">= 0.6").
        bad = true;
    }

    if (bad) {
        console.log(process.argv[1], "appears no good (", node, ")");
    }
} 
```

然后，我们使用在我们能找到`find`的每一个上运行它。`package.json`

这是我在[express-template.coffee](https://github.com/unnali/express-template.coffee)包上运行它时得到的结果：

```
./node_modules/jade/node_modules/commander/package.json appears no good ( >= 0.4.x < 0.8.0 )
./node_modules/mocha/node_modules/commander/package.json appears no good ( >= 0.4.x < 0.8.0 )
./node_modules/mocha/package.json appears no good ( >= 0.4.x < 0.8.0 ) 
```

似乎[TJ](http://github.com/visionmedia)反对 0.8 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-02T04:08:08.400

`npm view <packageName> engines`

有关更多信息，请参阅**npm 查看** [文档](https://docs.npmjs.com/cli/v7/commands/npm-view)。

例如：

`npm view jest verson`返回最新版本，在我的情况下 27.1.0 `npm view jest engines`给你：

```
{ node: '^10.13.0 || ^12.13.0 || ^14.15.0 || >=15.0.0' } 
```

其中告诉你最新版本的 jest v27 支持节点 10.13、12.13、14.15 和 15。

`npm view jest@25 engines`但是，告诉您它支持节点 8.3 上的任何内容：

```
jest@25.5.2 { node: '>= 8.3' }
jest@25.5.3 { node: '>= 8.3' }
jest@25.5.4 { node: '>= 8.3' } 
```

（这个回答是对一个老问题，但它仍然出现在我的谷歌搜索中）

# wpf - WPF中的打印Web浏览器控件

> ID：11226739
> 
> 赞同：2
> 
> 时间：2012-06-27T12:57:28.967
> 
> 标签：wpf, printing, scrollbar, webbrowser-control

在应用程序窗口中有滚动视图，
在将打印从窗口中取出时，整个滚动视图没有出现，只有窗口大小的打印出现了，

我只能打印滚动视图，但有没有办法用窗口打印整个滚动视图？

> PrintDialog printDialog = new PrintDialog(); if (printDialog.ShowDialog() == true) { // printDialog.PrintVisual(canvas, "Scrollview Description"); printDialog.PrintVisual(this, this.Title); }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:18:57.950

即使在编辑后我也没有得到这个问题的任何答案，好吧，我多次查看谷歌，在多次尝试失败后终于找到了解决方案，我的代码中的问题是，我在滚动视图中使用了 webbrowser 控件，在阅读了一个解决方案后我删除了滚动视图并放置了用于从浏览器控件中打印出来的代码，它可以工作，这是我使用的代码

```
 mshtml.IHTMLDocument2 doc = webbrwsr.Document as mshtml.IHTMLDocument2;
            doc.execCommand("Print", true, null); 
```

为此，我必须包含一个 .NET 参考 **Microsoft.mshtml**
，希望此解决方案适用于面临相同问题的任何其他人。

# java - 以编程方式删除过滤后的文本？

> ID：11226743
> 
> 赞同：0
> 
> 时间：2012-06-27T12:57:51.360
> 
> 标签：java, gwt, extjs, gxt

我正在使用 GXT 的过滤网格（[http://www.sencha.com/examples-2/#filtergrid](http://www.sencha.com/examples-2/#filtergrid)）。应用过滤器后，我需要删除用户输入的过滤文本。

![在此处输入图像描述](../Images/727cca83acd89367f45477818ee869a2.png)

是否可以在没有用户干预的情况下以编程方式删除“abc”文本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:50:41.490

请尝试以下代码。我没有测试过这个。

```
new StringFilter("someValue") {
            @Override
            protected void fireUpdate() {
                super.fireUpdate();
                List<Component> items = menu.getItems();
                if (!items.isEmpty()) {
                    ((Field) items.get(0)).setValue("");
                }
// Not tested this. If the above code is not working try to get the 
textfield instance somehow from the menu and clear it 
            }

        }; 
```

如果您只想清除用户键输入上的值而不是编程过滤器上的值（通过 setValue()），那么上述方法将不起作用。您必须覆盖 onFieldKeyUp 方法并使用一些调度程序清除它。

# java - 从流输入中解析没有根元素的 XML 片段列表

> ID：11226747
> 
> 赞同：9
> 
> 时间：2012-06-27T12:58:02.370
> 
> 标签：java, xml, xml-parsing, sax

在 Java 中使用 SAX api 从流输入中解析没有根元素的 XML 片段列表是否可行？

我尝试解析这样的 XML 但得到了

```
org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed. 
```

甚至在 endDocument 事件被触发之前。

我不想解决明显但笨拙的解决方案，例如“预先附加自定义根元素或使用缓冲片段解析”。

我正在使用 Java 1.6 的标准 SAX API。SAX 工厂有 setValidating(false) 以防有人想知道。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T13:18:37.857

首先，也是最重要的一点，您要解析的内容**不是 XML 文档**。从[XML 规范](http://www.w3.org/TR/REC-xml/#dt-root)：

> [定义：**只有一个元素，称为 root**或文档元素，它的任何部分都不会出现在任何其他元素的内容中。]

现在，关于用 SAX 解析它——尽管你说的是笨拙——我建议采用以下方法：

```
Enumeration<InputStream> streams = Collections.enumeration(
    Arrays.asList(new InputStream[] {
        new ByteArrayInputStream("<root>".getBytes()),
        yourXmlLikeStream,
        new ByteArrayInputStream("</root>".getBytes()),
    }));

SequenceInputStream seqStream = new SequenceInputStream(streams);

// Now pass the `seqStream` into the SAX parser. 
```

使用[`SequenceInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/SequenceInputStream.html)是一种将多个输入流连接成单个流的便捷方式。它们将按照传递给构造函数的顺序被读取（或者在这种情况下 - 由`Enumeration`.

将它传递给您的 SAX 解析器，您就完成了。

# iphone - 脸书、图形 API

> ID：11226751
> 
> 赞同：1
> 
> 时间：2012-06-27T12:58:12.447
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我可以从哪里开始与 Facebook 互动，例如在墙上发布图片、获取朋友列表、在朋友墙上发布图片等。我已经从[这里](http://developers.facebook.com/docs/mobile/ios/build/)阅读了基础知识（Facebook GuideLines）。任何学习 Graph API 和最新 API 文档或教程的好资源？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:02:22.650

[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

# objective-c - 关闭模态视图控制器后呈现不同的视图控制器

> ID：11226753
> 
> 赞同：2
> 
> 时间：2012-06-27T12:58:22.243
> 
> 标签：objective-c, ios, uiviewcontroller

我为 iOS 应用程序中的各种 UI 设置提供了一个模式视图控制器。其中一项设置允许用户选择不同的主视图。当他们点击“完成”时，我想关闭模态视图并让新选择的视图控制器出现，而不会出现旧视图控制器与新视图控制器分离的瞬间延迟。这怎么可能实现？

**更新：**

这是我使用 Eugene 的技术成功实现的一种方法，但没有应用程序委托。相反，此实现特定于我的场景，其中导航堆栈中的视图控制器在实用程序应用程序中呈现模态视图控制器。

```
- (void)swapFrontSideViewController;
{
    UINavigationController *navigationVC = (UINavigationController *)[self presentingViewController];
    NSMutableArray *viewControllers      = [NSMutableArray arrayWithArray:navigationVC.viewControllers];
    UIViewControllerSubclass *selectedViewController = nil;
    if ([self.selectedFrontSide isEqualToString:FRONT_SIDE_NAME1]) {
        selectedViewController = [self.storyboard instantiateViewControllerWithIdentifier:FRONT_SIDE_NAME1];
    } else if ([self.selectedFrontSide isEqualToString:FRONT_SIDE_NAME2]) {
        selectedViewController = [self.storyboard instantiateViewControllerWithIdentifier:FRONT_SIDE_NAME2];
    }
    if (selectedViewController) {
        [viewControllers replaceObjectAtIndex:viewControllers.count -1 withObject:selectedViewController];
        [navigationVC setViewControllers:viewControllers];
        self.delegate = selectedViewController;
    } else {
        NSLog(@"Error: Undefined Front Side Selected.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:08:36.813

```
- (IBAction)doDismiss:(id)sender {
  AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate; // Get the app delegate
  NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:appDelegate.navigationController.viewControllers]; // fetch its navigationController viewControllers stack
  UIViewController *replacementController; //initialize replacement controller
  [viewControllers replaceObjectAtIndex:viewControllers.count -1 withObject:replacementController]; // replace the top view controller in stack with the replacement one
  [appDelegate.navigationController setViewControllers:viewControllers]; //change the stack
  [self dismissModalViewControllerAnimated:YES];
} 
```

# android - 一旦在 android 中执行，就阻止活动

> ID：11226755
> 
> 赞同：0
> 
> 时间：2012-06-27T12:58:26.893
> 
> 标签：android, android-activity

我正在开发一个包含注册活动的应用程序，因为它是选项卡上的第一页。我希望一旦用户注册，那么每当用户启动应用程序时，它应该始终从主菜单屏幕运行，并且在用户卸载应用程序并重新安装之前不应该显示注册屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:07:11.967

您可以使用 SharedPreferences。这是一个例子：

```
SharedPreferences mPrefs = getSharedPreferences("MyPreferences", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = mPrefs.edit();
editor.putBoolean("firstTime", true);
editor.commit(); 
```

因此，您可以检查 firstTime 是否为 true 这样做：

```
SharedPreferences mPrefs = getSharedPreferences("MyPreferences", Context.MODE_PRIVATE);
if(mPrefs.getBoolean(firstTime, false){
    //show screen
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:05:27.090

将您的 AndroidManifest 设置为将 MainActivity 作为默认活动启动。

然后`onCreate`检查用户是否已注册（可能将其存储在 中`SharedPreferences`），如果他们尚未注册 - 立即启动 RegisterActivity 的意图，否则照常进行。

# c# - CopyToDataTable 不是 system.array 的成员

> ID：11226769
> 
> 赞同：1
> 
> 时间：2012-06-27T12:59:10.590
> 
> 标签：c#, vb.net, visual-studio-2010

我在 VB.Net 脚本文件中有一个函数，但它产生错误“CopyToDataTable”不是“system.array”的成员。有任何想法吗？

```
Public Function CollectionFromTable(tableName As String, sql As String, sortOrder As String) As DataTable
    Dim foundRows() As DataRow
    foundRows = ds.Tables(tableName).Select(sql, sortOrder)

    Return foundRows.CopyToDataTable
End Function 
```

注意：我在顶部有以下导入，但仍然出现错误。

```
Imports System
Imports System.Data
Imports System.Windows.Forms
Imports System.Math
Imports Microsoft.VisualBasic
Imports System.Collections.Generic
Imports System.Data.DataRow
Imports System.Linq
Imports System.Drawing
Imports System.Xml
Imports System.Collections 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:01:33.963

它是[类](http://msdn.microsoft.com/en-us/library/bb396189.aspx)[中的扩展方法`DataTableExtensions`](http://msdn.microsoft.com/en-us/library/bb396189.aspx)。您需要对`System.Data.DataSetExtensions.dll`. （您已经导入了正确的命名空间。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:02:51.787

如果您正在寻找[这种方法](http://msdn.microsoft.com/en-us/library/bb396189.aspx)（`CopyToDataTable`from `DataTableExtensions`），它在`System.Data.DataSetExtensions`. 您的项目中是否引用了该程序集？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T08:56:14.683

我在 VS2010 中遇到了同样的问题，现在通过添加上述参考解决了。添加参考。在VS2010菜单中转到>项目>>属性>>从右侧选项卡中选择参考>>单击添加按钮>>单击.NET选项卡>>选择System.Data.DataSetExtensions参考>>完成！

谢谢乔恩·斯基特。

# c# - Getting data from listview in WPF

> ID：11226770
> 
> 赞同：0
> 
> 时间：2012-06-27T12:59:11.203
> 
> 标签：c#, wpf, listview

I have created listview in C# and filled it with data from SQL server. But when I assign mouse double click, I don't know how to get clicked data. Please help:

My XAML:

```
<ListView Name="ListViewEmployeeDetails" ItemsSource="{Binding Path=Table}" Margin="0,0,0,67" MouseDoubleClick="ListViewEmployeeDetails_MouseDoubleClick">
    <ListView.Background>
        <LinearGradientBrush>
            <GradientStop Color="white" Offset="0"/>
        </LinearGradientBrush>
    </ListView.Background>
    <ListView.View>
        <GridView>
            <GridViewColumn Width="70" Header="Číslo bytu" DisplayMemberBinding="{Binding Path=cislo_Bytu}"/>
            <GridViewColumn Width="70" Header="Podlaží" DisplayMemberBinding="{Binding Path=podlazi}"/>
            <GridViewColumn Width="70" Header="Účel" DisplayMemberBinding="{Binding Path=ucel}"/>
            <GridViewColumn  Width="70" Header="Plocha" DisplayMemberBinding="{Binding Path=plocha}"/>
            <GridViewColumn Width="70" Header="Stav" DisplayMemberBinding="{Binding Path=stav}"/>
            <GridViewColumn Width="70" Header="Country" DisplayMemberBinding="{Binding Path=Country}"/>
        </GridView>
    </ListView.View>
</ListView> 
```

And my code:

```
SqlDataAdapter ad = new SqlDataAdapter();
SqlCommand cmd = new SqlCommand();

String str = "SELECT cislo_Bytu, podlazi, ucel, plocha, stav, poznamky FROM prostory";
cmd.CommandText = str;
ad.SelectCommand = cmd;
cmd.Connection = datovéPřipojení;
DataSet ds = new DataSet();
ad.Fill(ds);

ListViewEmployeeDetails.DataContext = ds.Tables[0].DefaultView;
datovéPřipojení.Close(); 
```

So my question is, what I should write into the

```
private void ListViewEmployeeDetails_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    // Here
} 
```

To get the data (`cislo_Bytu`) from the row which was clicked on?

Thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:12:50.180

发件人将是 ListView。

```
((ListView)sender).SelectedItem 
```

由于您绑定到 a `DataView`，因此`SelectedItem`将是 类型`DataRowView`。然后，您可以使用列名引用相关值。例如，要将`cislo_bytu`列的值分配给`textBox1.Text`属性，请执行以下操作：

```
textBox1.Text = ((DataRowView)((ListView)sender).SelectedItem)["cislo_bytu"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:08:49.573

我相信你想要的是[OriginalSource MSDN](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)

```
e.OriginalSource 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:09:10.963

使用以下代码通过在双击事件中更改 ItemArray 中的索引值来获取每个项目

```
((System.Data.DataRowView)(ListViewEmployeeDetails.SelectedItem)).Row.ItemArray[0] 
```

`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:53:01.637

您必须强制转换选择的对象才能访问每个属性..

例子：

```
((Class)listView1.SelectedItem).cislo_bytu 
```

只需将 Class 更改为具有 cislo_bytu 属性的原始类

# php - 在'order（`pcode`）附近获取错误检查你的mysql语法

> ID：11226773
> 
> 赞同：0
> 
> 时间：2012-06-27T12:59:24.303
> 
> 标签：php, mysql

我使用 `` 作为列名虽然我收到错误...我的代码是

```
$sql = "INSERT INTO order(`pcode`) VALUES ('$pcode')";

if(!mysql_query($sql,$con))
die('cant connect ' .mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:00:34.557

order 是 “ORDER BY”子句的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

```
"INSERT INTO `order`(pcode) VALUES ('$pcode')"; 
```

注意：请确保 $pcode 正在通过[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)运行，或者最好查看[PDO 扩展](http://php.net/manual/en/book.pdo.php)及其准备好的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:08:31.930

如果 order 是您的表名并且 pcode 是您的列名，那么您可以使用它：

```
$sql = sprintf("INSERT INTO `order` (pcode) VALUES('%s')", $pcode); 
```

# hibernate - Update struts 2 autocompleter from another autocompleter

> ID：11226777
> 
> 赞同：0
> 
> 时间：2012-06-27T12:59:39.030
> 
> 标签：hibernate, spring-mvc, struts2, foreign-keys

I'm using struts+spring+hibernate.

On my .jsp page, I have two autocompleter drop down menus. Each one returns a list of VOs from their specific table in the database, which is then used to call a search action that searches from another table. Menu A links to table A, and menu B links to table B, and they are used to search in table C. However, table B has a foreign key that links it to table A Table C has a foreign key that links it to table B.

I would like it to be that when the user picks an option from menu A, menu B is updated so it only includes options that contain the proper foreign key. The user then can pick something specific from menu B and have the action search table C only for rows containing the proper foreign key. If the user does not touch table B, then the action will search for all rows in table C containing all foreign keys from Table B that match the one chosen in table A.

I hope this is understandable and let me know if I need to clarify. I've been googling for some time and it might be a simple solution but I can't find anything. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:35:28.280

您必须将第二个自动完成器的小部件的 href 绑定到旧的 json 查询 + 使用的额外参数

```
jQuery.struts2_jquery_ui.bind(widget,options_auto_iban_widget); 
```

我只是发布了一个示例：[How to reload the struts2-jquery autocompleter X with value selected from another struts2-jquery autocompleter Y](https://stackoverflow.com/questions/18608149/how-to-reload-the-struts2-jquery-autocompleter-x-with-value-selected-from-anothe/19301212#19301212)

# database - 将数据绑定到 DropDownList MVC Razor

> ID：11226780
> 
> 赞同：1
> 
> 时间：2012-06-27T12:59:52.633
> 
> 标签：database, asp.net-mvc, razor, drop-down-menu, bind

我刚刚开始使用 MVC 和 Razor 进行我的项目。现在我在将来自数据库的数据绑定到下拉列表时遇到了问题。请参考我下面的代码：

专业模型：

```
public class SpecializationModel
{
    [Display(Name = "SpecializationID")]
    public string SpecializationID { get; set; }

    [Display(Name = "SpecializationDescription")]
    public string SpecializationDescription { get; set; }

    public IEnumerable<SelectListItem> Items { get; set; }
    public int SelectedSpecializationID { get; set; }
} 
```

控制器：

```
public ActionResult Physicians()
{
    SpecializationManager spec = new SpecializationManager();
    List<Specialization> SpecializationList = spec.GetAllSpecialization();

    var obj = new SpecializationModel();

    obj.Items = new[]
    {
        foreach(var x in SpecializationList)
        {
            new SelectListItem { Value = x.SpecializationID.ToString(), Text = x.SpecializationDescription };
        }
    };

    return View(obj);
} 
```

我有这个管理器，其中包含我的 LINQ 查询以从数据库中提取数据。我在控制器上遇到问题。其中`foreach`语法上的错误点说`Invalid expression term foreach`

谁能指出我正确的方向？非常感谢！

编辑：

我现在有这个代码，在 foreach 部分没有错误（感谢下面的帖子，我结合了上面的内容）。但是，我似乎无法完成最后一行。它会产生一个关于隐式转换的错误：

```
var items = new List<SelectListItem>();
foreach (var x in SpecializationList)
{
    items.Add(new SelectListItem { Value = x.SpecializationID.ToString(), Text = x.SpecializationDescription });
}

obj.Items = items.ToList(); 
```

请帮帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:05:53.580

yopu 不能在构造函数中放置 foreach，请尝试：

```
var items = new List<SelectListItem >();
foreach(var x in SpecializationList)
{
           items.add(new SelectListItem { Value = x.SpecializationID.ToString(), Text = x.SpecializationDescription });
}

obj.Items = items; 
```

**已编辑**

# android - android更改布局dpi

> ID：11226781
> 
> 赞同：0
> 
> 时间：2012-06-27T12:59:53.747
> 
> 标签：android, android-layout

我可以更改在设备上使用我的应用程序的布局 dpi 吗？

（在开发的应用程序上运行良好，但在小屏幕尺寸的设备上一切看起来都很大）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:02:53.067

> 小屏幕尺寸的设备一切看起来都很大。

阅读此[支持不同的设备](http://developer.android.com/training/basics/supporting-devices/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:03:12.067

您需要为所有屏幕大小的存储桶提供资源：

```
/drawable/ (default images)
/drawable-ldpi/ (small dpi screens)
/drawable-mdpi/ (medium dpi screens)
/drawable-hldpi/ (large dpi screens)
/drawable-xhdpi/ (xtra large dpi screens) 
```

请参阅此处获取帮助：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

在这里查看使用哪个 DPI 存储桶的设备列表：http: [//blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:32:42.717

您需要为所有 DPI 屏幕制作图像，以便所有类型的设备都支持它。Android 会根据您的设备 DPI 自动为您的应用程序设置这些图像。请确保您的所有资源并查看[链接](http://developer.android.com/guide/practices/screens_support.html)。它会帮助你更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:07:39.197

这是一个布局问题，尝试使用相对布局和线性布局将对象放置在 xml 中。对于图像使用 .png 扩展名并使用九个补丁图像，使其适合所有屏幕，这将支持大多数屏幕

# ruby-on-rails-3 - Rails 路由在控制台中工作，但在服务器中不工作

> ID：11226784
> 
> 赞同：0
> 
> 时间：2012-06-27T13:00:05.410
> 
> 标签：ruby-on-rails-3, routes, rails-routing, http-method

我遇到了一个在控制台中似乎正确的路由，但是当我在服务器中使用它时给我一个路由错误。这种情况类似于“编辑”和“更新”对。调用 GET 'messages/25/followup' 应该路由到 messages#followup，而与 POST 相同的 URL 应该路由到 messages#followup_send。在我的 routes.rb 文件中，我有

```
get "messages/:id/followup", :to => "messages#followup"
match "messages/:id/followup", :to => "messages#followup_send", :via => :post 
```

显示路线给出

```
ruby-1.9.2-p0 :092 > puts fu
GET  /messages/:id/followup(.:format)  {:controller=>"messages", :action=>"followup"}
POST /messages/:id/followup(.:format)  {:controller=>"messages", :action=>"followup_send"} 
```

在控制台中测试给出

```
ruby-1.9.2-p0 :088 > r.recognize_path "/messages/54/followup", :method=>'POST'
=> {:controller=>"messages", :action=>"followup_send", :id=>"54"} 
```

表格中的代码是

```
<form id="edit_message_42" class="edit_message" method="post" action="/messages/42/followup?method=post" accept-charset="UTF-8">
...
<input type="submit" value="Send" name="commit"> 
```

但是，如果我单击按钮，我会进入日志

```
Started POST "/messages/42/followup?method=post" for 127.0.0.1 at 2012-06-27 13:54:48 +0100
ActionController::RoutingError (No route matches "/messages/42/followup") 
```

如果我手动输入 URL（包括“method=post”），也会发生同样的事情。我现在将通过使用单独的名称（例如 /messages/42/send_followup）而不是依赖 GET-POST 来解决这个问题区别，但我想了解这里发生了什么。

感谢您的任何想法。

# c# - C# COM Add In 在从线程调用时失败

> ID：11226789
> 
> 赞同：0
> 
> 时间：2012-06-27T13:00:19.343
> 
> 标签：c#, excel, com, user-defined-functions

我正在用 C# 为 Excel 编写 UDF 库。我将长期运行 UDF，所以我想让我的 UDF 异步，以便 Excel UI 在调用 UDF 时保持可用。以下是我的代码；但是从生成的线程调用Excel时失败了...

```
[ClassInterface(ClassInterfaceType.AutoDual)]
[ComVisible(true)]
[ComDefaultInterface(typeof(IRAPDataAddIn))]
public class RAPDataAddIn : IRAPDataAddIn
{

    public string GetPositionData(Excel.Range Portfolios, Excel.Range Security)
    {

        Excel.Application excelApp = (Excel.Application)Marshal.GetActiveObject("Excel.Application");

        Excel.Range target = (Excel.Range)excelApp.get_Caller(System.Type.Missing);

        Thread _workerThread = new Thread(new ParameterizedThreadStart(this.GetData));
        _workerThread.CurrentCulture = System.Globalization.CultureInfo.CurrentCulture;
        _workerThread.CurrentUICulture = System.Globalization.CultureInfo.CurrentUICulture;

        _workerThread.Start(target);

        return "Getting Data";
    }

    public void GetData(object Range)
    {
        Excel.Range target = Range as Excel.Range;

        Thread.Sleep(1000);

        object[,] returnData = new object[2,2];

        returnData[0, 0] = " FirstThread";       
        returnData[0, 1] = " SecondThread"; 
        returnData[1, 0] = " ThirdThread";              
        returnData[1, 1] = " FourthThread";  

        var Start = (Excel.Range)target.Worksheet.Cells[1,1];
        var End = (Excel.Range)target.Worksheet.Cells[2,2];

        Excel.Range r = (Excel.Range)target.Worksheet.Range[Start, End];

        try
        {
            r.Value2 = returnData; ***//It fails here***
        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:47:37.527

*（免责声明：我开发 Excel-DNA 库）*

[我建议您使用（免费） Excel-DNA](http://exceldna.codeplex.com)库来实现您的 Excel UDF 。我最近添加了一些对异步函数的实验性支持，所以现在是尝试它的好时机。我在这里对当前的异步函数支持进行了初步概述：[http](http://exceldna.codeplex.com/wikipage?title=Asynchronous%20Functions&referringTitle=Documentation) ://exceldna.codeplex.com/wikipage?title=Asynchronous%20Functions&referringTitle=Documentation 。支持 Excel-DNA 的最佳地点是[Excel-DNA Google 组](http://groups.google.com/group/exceldna)。

您的方法存在一些潜在问题：

*   您检索的 Application 对象`Marshal.GetActiveObject`可能不是您正在运行的 Excel 实例。如果已启动多个 Excel 实例，它将是最近启动的 Excel。

*   您不能只将“Range”COM 对象传递给另一个线程 - 它是一个 STA 单元绑定对象，因此如果没有显式的跨线程封送处理，就不能从不是主 Excel 线程的线程中使用。

*   如果 Excel 正忙于计算，或者用户正在编辑单元格，甚至只是按下鼠标按钮，则从其他线程到 Excel 的任何 COM 调用都可能会失败。因此，作为正常操作的一部分，每个 COM 调用都需要处理可能的异常。

有几种方法可以使用 Excel-DNA 实现这种工作，因此如果您需要更具体的指导，您应该查看库并发布到 Google 小组。

# domain-driven-design - 不在 CQRS 中使用消息系统

> ID：11226790
> 
> 赞同：0
> 
> 时间：2012-06-27T13:00:22.040
> 
> 标签：domain-driven-design, cqrs

我在同一台机器上有一个域（读取）和报告（写入）数据库。

目前，事件被引发并放在内存队列中，然后调用相应的处理程序来更新报告数据库。

如果报告数据库存在问题并且由于某种原因导致事件写入失败，则需要注意什么。我想这是 NserviceBus 等有用的地方，但在这个阶段我们没有时间投资研究它。

现在，如果正在引发新事件，我是否应该在处理问题事件之前不处理它们？这会是人工干预吗？此外，其他事件都将在问题事件之后排队，并且报告数据库中没有任何更新。

另外我想我需要坚持这些事件，以防机器出现故障。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:43:07.850

恐怕你最终会实现自己但更差的 NServiceBus。你不会这样节省时间。NSB 已经存在，只需阅读手册，不要重新发明轮子。

# c# - 分配给事件的 lambda 是否会阻止对拥有对象进行垃圾收集？

> ID：11226793
> 
> 赞同：9
> 
> 时间：2012-06-27T13:00:30.247
> 
> 标签：c#, events, lambda, garbage-collection

假设您有一个具有事件属性的类。如果您在本地上下文中实例化此类，而没有外部引用，那么将 lambda 表达式分配给事件会阻止实例被垃圾收集吗？

```
{
    var o = new MyClass();
    o.MyClassEvent += (args) => {};
}
// Will 'o' be eligible for garbage collection here? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T13:03:34.910

不，`o`将被释放，lambda 函数也将被释放。没有`o`来自其他任何地方的引用，因此没有理由不应该释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:15:44.790

简短的回答，不，`o`将被释放。别担心。

稍微长一点的答案：

您的代码或多或少地执行以下操作：

1.  在该线程上创建一些本地存储以引用新的 MyClass ( `o`)。
2.  创建新的 MyClass
3.  将对新 MyClass 的引用存储在`o`.
4.  从 lambda 创建一个新委托。
5.  将该委托分配给事件（`o`现在有对委托的引用）。

在此期间的任何时候，GC 都可能会停止线程，然后检查哪些对象是有根的或没有根的。根是静态对象或线程本地存储中的对象（我的意思是给定线程执行中的局部变量，由堆栈实现，而不是本质上是静态形式的“线程本地存储”）。有根对象是根、它们引用的对象、它们引用的对象等等。有根对象不会被收集，其余的会被收集（除了一些额外的东西与我们暂时忽略的终结器有关）。

在创建 MyClass 对象之后，到目前为止，它还没有被线程的本地存储所植根。

在创建委托对象之后，到目前为止，它还没有被线程的本地存储或 MyClass 引用过。

现在，接下来会发生什么？

这取决于。lambda 不会让 MyClass 保持活动状态（MyClass 保持活动状态，但是当 MyClass 消失时，lambda 也会保持活动状态）。这还不足以回答“'o' 是否有资格在这里进行垃圾收集？” 尽管。

```
void Meth0()
{
    var o = new MyClass();
    o.MyClassEvent += (args) => {};
}//o is likely eligible for collection, though it doesn't have to be.

void Meth1()
{
  int i = 0;
  {
    var o = new MyClass();
    o.MyClassEvent += (args) => {};
  }//o is likely not eligible for collection, though it could be.
  while(i > 100000000);//just wasting time
}

void Meth2()
{
  {
    var o = new MyClass();
    o.MyClassEvent += (args) => {};
    int i = 0;//o is likely eligible for collection, though it doesn't have to be.
    while(i > 100000000);//just wasting time
  }
}

void Meth3()
{
  {
    var o = new MyClass();
    o.MyClassEvent += (args) => {};
    var x0 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x1 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x2 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x3 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x4 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x5 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x6 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x7 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x8 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x9 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x10 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    var x11 = new MyClass();//o is even more likely eligible for collection, though it doesn't have to be.
    int i = 0;
    while(i > 100000000);//just wasting time
  }
} 
```

Meth0 看起来是最简单的，但实际上并非如此，所以我们会回到它。

在 Meth1 中，实现**可能**会保留本地存储，因为它不再需要，所以虽然`o`不在范围内，但实现仍将使用该本地存储。

在 Meth2 中，实现**可以**使用它用于的相同本地存储，`o`因此`i`即使它仍在范围内，它也有资格收集（“范围内”意味着程序员可以选择用它做某事，但他或她没有，编译后的代码不需要这样的概念）。

Meth3 更有可能重用存储，因为它的额外临时使用使得该实现与一开始就将所有存储留出相比，更有意义。

这些事情**都不必**是这样的。Meth2 和 Meth3 都可以在开始时预留该方法所需的所有存储空间。Meth1 可以重用存储，因为重新排序`i`和`o`分配没有区别。

Meth0 更复杂，因为它可能取决于调用方法接下来对本地存储执行的操作，而不是当时的清理（两者都是合法的实现）。IIRC 总是对当前的实现进行清理，但我不确定，反正也没关系。

总之，作用域不是相关的东西，而是编译器和后来的 JITter 是否可以并且确实使用与对象相关的本地存储。甚至可以在调用对象的方法和属性之前清理对象（如果这些方法和属性不使用`this`对象的任何字段，因为如果对象已被删除，它会正常工作！） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:04:00.797

当运行时离开该代码块时，不再有对该对象的引用，因此它会被垃圾回收。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T13:30:19.150

这取决于您所说的“本地上下文”到底是什么意思。相比：

```
static void highMem()
{
    var r = new Random();
    var o = new MyClass();
    o.MyClassEvent += a => { };
}
static void Main(string[] args)
{
    highMem();
    GC.Collect(); //yes, it was collected
} 
```

至：

```
static void Main(string[] args)
{
    var r = new Random();
    {
        var o = new MyClass();
        o.MyClassEvent += a => { };
    }
    GC.Collect(); //no, it wasn't collected
} 
```

在我的环境（调试版本，VS 2010，Win7 x64）中，第一个符合 GC 条件，而第二个没有（通过让 MyClass 占用 200MB 内存并在任务管理器中检查），即使它超出范围。我想这是因为编译器在方法的开头声明了所有局部变量，因此对于 CLR，`o`即使您无法在 C# 代码中使用它，也不会超出范围。

# java - 第一次调用后迭代器的删除方法不起作用

> ID：11226798
> 
> 赞同：1
> 
> 时间：2012-06-27T13:00:36.520
> 
> 标签：java, iterator

我正在尝试将一些集合分组为不相交的集合。例如，如果我有这 5 套：

> [[1, 3], [2], [1, 5], [6, 8], [1, 7]]

我想要这个结果：

> [[2], [6, 8], [1, 3, 5, 7]]

这是代码：

```
import java.util.*;

public class SetTest {

public static void main(String[] args) {
    // ---- Initialisation
    Set<Set<Integer>> groups = new LinkedHashSet<Set<Integer>>();
    for (int[] set : new int[][] { {1, 3 }, {2 }, {1, 5 }, {6, 8 }, {1, 7} }) {
        Set<Integer> group = new TreeSet<Integer>();
        for (int i : set) {
            group.add(i);
        }
        groups.add(group);
    }
    System.out.println(groups);
    // ---- Grouping values in disjoint sets
    for (Iterator<Set<Integer>> iterator = groups.iterator(); iterator.hasNext();) {
        Set<Integer> group = iterator.next();
        System.out.println(String.format(" + Checking %20s in \t %s", group, groups));
        for (Set<Integer> other : groups) {
            if (!group.equals(other) && !Collections.disjoint(group, other)) {
                other.addAll(group);
                iterator.remove();
                System.out.println(String.format(" - Removed  %20s -> \t %s", group, groups));
                break;
            }
        }
    }
    System.out.println(groups);
}
} 
```

我在集合上使用迭代器，我想将 2 个集合组合为一个，删除其中一个。但是，我的[`Iterator.remove()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html#remove%28%29)方法有问题。
这个程序打印的是：

```
[[1, 3], [2], [1, 5], [6, 8], [1, 7]]
 + Checking               [1, 3] in      [[1, 3], [2], [1, 5], [6, 8], [1, 7]]
 - Removed                [1, 3] ->      [[2], [1, 3, 5], [6, 8], [1, 7]]
 + Checking                  [2] in      [[2], [1, 3, 5], [6, 8], [1, 7]]
 + Checking            [1, 3, 5] in      [[2], [1, 3, 5], [6, 8], [1, 7]]
 - Removed             [1, 3, 5] ->      [[2], [1, 3, 5], [6, 8], [1, 3, 5, 7]]
 + Checking               [6, 8] in      [[2], [1, 3, 5], [6, 8], [1, 3, 5, 7]]
 + Checking         [1, 3, 5, 7] in      [[2], [1, 3, 5], [6, 8], [1, 3, 5, 7]]
 - Removed          [1, 3, 5, 7] ->      [[2], [1, 3, 5, 7], [6, 8], [1, 3, 5, 7]]
[[2], [1, 3, 5, 7], [6, 8], [1, 3, 5, 7]] 
```

第一次，删除`[1, 3]`按预期工作，但其余时间，它不会删除该项目。我认为这是因为我使用`addAll()`，但这是为什么呢？因为我没有在`groups`; 我只改变了它里面的一个元素（`other`）——而且引用是一样的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:13:54.243

a 的一个元素`HashSet`应该有一个 stable `hashCode`，但是当你迭代外部集合时，你正在改变它们。这以不可预测但记录在案的方式失败了。

在 a`TreeSet`中，通过突变改变元素的排序顺序也可能存在问题。

# xamarin.android - 开始一项新活动，但意图不同

> ID：11226802
> 
> 赞同：1
> 
> 时间：2012-06-27T13:00:41.477
> 
> 标签：xamarin.android

通常，如果我想开始一项新活动，我可以使用

```
StartActivity(typeof(foo)); 
```

这可以。

我也可以设置一个意图

```
Intent i = new Intent(this, typeof(foo));
StartActivity(i); 
```

问题是这样的。我有 Activity A。这会触发 Activity B。但是，我需要在使用 PutExtra 后触发 Activity B。如果我做

```
Intent i = new Intent(this, typeof(ActivityB)); 
```

当我在 Activity 中定义一个新的 Intent 时，monodroid 会很恼火。

有没有办法做到这一点

（伪代码）

```
[Activity]
public partial class A
{
   protected override void OnCreate(Bundle savedInstance)
   {
       SetContentView(Resource.Layout.layout);
       Button btnClick = FindViewById<Button>(Resource.Id.btnClicky);
       btnClick.Click += new EventHandler(button_click);
   }

   private void button_Click(object s, EventArgs e)
   {
       Intent i = new Intent(this, typeof(B)); // <- gets annoyed
       i.PutExtra("foo", 1);
       i.PutExtra("bar", true);
       StartActivity(i);
   }
 } 
```

这里的任何帮助将不胜感激。

PFJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:17:57.470

看起来我需要添加一个在其他地方不需要的 using。

感谢您的回答，很抱歉延迟回来:)

保证将来，我会确保事情更清楚。

# c# - 线程无法访问对象

> ID：11226806
> 
> 赞同：3
> 
> 时间：2012-06-27T13:00:50.977
> 
> 标签：c#, wpf, multithreading, invalidoperationexception

我声明了一个字段：

```
WriteableBitmap colorBitmap; 
```

然后我创建了一个简单的线程来做一些事情：

```
private void doSomething()
{
    // ... bla bla bla
    colorBitmap = new WriteableBitmap(/* parameters */);
    myImage.Source = colorBitmap; // error here:S
} 
```

在 Windows_Loaded 事件中，我声明并启动了一个新线程：

```
private void window_Loaded(object sender, RoutedEventArgs e)
{
    Thread th = new Thread(new ThreadStart(doSomething));
    th.Start();
} 
```

问题是我无法更改 myImage 的来源。我有一个错误，如：

> InvalidOperationException 未处理调用线程无法访问此对象，因为不同的线程拥有它。

我尝试使用 Dispatcher.Invoke，但没有帮助...

```
Application.Current.Dispatcher.Invoke((Action)delegate
{
    myImage.Source = colorBitmap;
}); 
```

我正在寻找一些答案，但从未找到与我完全一样的案例。any1 可以帮助我理解如何解决这样的问题（我最近遇到了同样的问题，但我无法调用该方法，因为其他线程拥有它）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T13:14:36.970

您的代码有两个问题：

1.  您不能`WriteableBitmap`从与创建它的线程不同的另一个线程访问它。如果你想这样做，你需要先调用来冻结你的位`WriteableBitmap.Freeze()`图

2.  您不能`myImage.Source`在不是调度程序线程的线程中访问。

这应该可以解决这两个问题：

```
private void doSomething()
{
    // ... bla bla bla
    colorBitmap = new WriteableBitmap(/* parameters */);
    colorBitmap.Freeze();
    Application.Current.Dispatcher.Invoke((Action)delegate
    {
        myImage.Source = colorBitmap;
    });
} 
```

**编辑** 请注意，这种方法允许您在线程中的任何位置创建和更新位图。一旦位图被冻结，它就不能再被修改，在这种情况下你应该把它扔掉并创建一个新的。

附带说明一下，如果您不希望阻止线程更新`myImage.Source`使用`BeginInvoke`而不是`Invoke`

# c - C中的printf不占用内存？

> ID：11226811
> 
> 赞同：0
> 
> 时间：2012-06-27T13:00:59.560
> 
> 标签：c

是否`printf`占用堆栈中的内存？

```
printf("Hello world"); 
```

`"Hello world"`有固定地址吗？

请帮我理解。

**编辑：**

我们为 传递的参数`printf`是否存储在本地指针变量中。如果我使用数组来存储 50 个字符串文字，它会占用堆栈内存，但如果我使用`printf`它，它不会占用内存 - 这就是我所听到的。但是我不知道怎么`printf`不把内存作为我们声明的数组。

请帮我理解！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T13:02:56.220

字符串字面量，这就是什么`"Hello world"`，占用内存，但不在堆栈上，而是在只读静态段中。除了`read-only memory`，其余的都是实现细节。

相同的字符串文字不必占用相同的内存（因此不能保证地址是恒定的），但它们可能会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:05:22.693

在 C 语言中，字符串文字具有静态*存储持续时间*。这意味着它们在整个程序期间都存在（并且指向它们的指针保持有效）；这与通常在调用帧堆栈上实现的自动局部变量相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:11:54.790

这取决于您平台的调用约定以及标准库的实现方式。

例如，采取以下程序：

```
#include <stdio.h>

int main(void)
{
  printf("Hello, World\n");
  return 0;
} 
```

和下面的命令行来编译它：

```
gcc -S -std=c99 -pedantic -Wall -Werror syscall.c 
```

在使用 gcc 2.96 的 32 位 Red Hat 机器（i686）上，我们得到以下机器代码：

```
      1 .文件“系统调用.c”
      2.版本“01.01”
      3 gcc2_compiled.:
      4 .section .rodata
      5 .LC0：
      6 .string "你好，世界\n"
      7.文本
      8 .对齐 4
      9 .globl 主要
     10 .type main,@function
     11 主要：
     12 推升 %ebp
     13 移动 %esp, %ebp
     14 美元 8 美元，%esp
     15 美元 12 美元，%esp
     16 推力 $.LC0
     17 调用 printf
     18 加 16 美元，%esp
     19 移动 $0, %eax
     20 离开
     21 退休
     22.Lfe1：
     23 .size main,.Lfe1-main
     24 .ident “GCC：（GNU）2.96 20000731（红帽 Linux 7.2 2.96-112.7.2）”

```

第 16 行将字符串文字的地址压入堆栈，然后`printf`被调用。

这是使用 gcc 4.1.2 在 64 位 SLES 10 机器 (x86_64) 上以相同方式编译的相同代码：

```
      1 .文件“系统调用.c”
      2 .section .rodata
      3 .LC0：
      4 .string "你好，世界"
      5.文本
      6 .globl 主要
      7 .type main, @function
      8个主要：
      9.LFB2：
     10 pushq %rbp
     11 .LCFI0：
     12 movq %rsp, %rbp
     13.LCFI1：
     14 movl $.LC0, %edi
     15个看涨期权
     16 移动 $0, %eax
     17 离开
     18 点
;;
;; 不包括附加内容
;;

```

在这种情况下，第 14 行将字符串文字的地址写入*寄存器*( `%edi`)，而不是将其压入堆栈。另请注意，此版本的 gcc 足够聪明，可以意识到由于我传递了一个类型的参数`char *`，它可以替代对`puts`.

无论哪种情况，您都在调用时创建了一个新的堆栈帧；不同之处在于堆栈帧中的内容。在 Red Hat 盒子上，它将包含字符串文字的地址；在 SLES 10 盒子上，它不会。

# c - 如何使内存总线饱和

> ID：11226812
> 
> 赞同：2
> 
> 时间：2012-06-27T13:01:03.573
> 
> 标签：c, optimization, memory, hardware

我想测试一个具有各种内存总线使用级别的程序。例如，我想知道当其他进程使用 50% 的内存总线时，我的程序是否按预期工作。我将如何模拟这种干扰？

我的尝试是运行一个具有多个线程的进程，每个线程从一大块内存中随机读取。这似乎对我的程序没有太大影响。我的程序有很多内存操作，所以我预计会有明显的干扰。我想使总线饱和但不使用太多 CPU 周期，这样任何性能下降都只会由总线争用引起。

笔记：

*   我正在使用 Xeon E5645 处理器，DDR3 内存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:22:14.670

“进程使用 50% 的内存总线”的心智模型并不是一个很好的模型。已获得核心并访问不在缓存中的内存的线程使用内存总线。

让线程饱和总线很简单，只需使用 memcpy()。复制几次适合最后一个缓存的数量，并通过多次运行它来预热它，这样就不会出现页面错误来减慢代码速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:04:37.667

我的第一直觉是设置一堆 DMA 操作来反弹数据，而不会过多地使用 CPU。这一切都取决于您正在运行的操作系统和硬件。这是嵌入式系统吗？我很乐意在评论中提供更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:59:20.317

我会使用 SSE2 movntps 指令来传输数据，以避免同一核心中其他线程的缓存冲突。也许展开该循环 16 次以最小化每次内存传输的指令数。虽然 DMA 想法听起来不错，但链接的手册很旧，并且适用于 32 位 linux，而且您的处理器型号让我认为您可能拥有 64 位操作系统，这让我想知道其中有多少是正确的。在最坏的情况下，您的测试代码中的错误可能会破坏您的硬盘驱动器。

# asp.net-mvc-3 - ASP.NET MVC3 - 与 SQL Server 2008 R2 数据库建立连接

> ID：11226824
> 
> 赞同：0
> 
> 时间：2012-06-27T13:01:47.903
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008-r2

如何从 ASP.NET MVC3 应用程序连接到 SQL Server 2008 R2 数据库？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:32:37.020

您可以使用 Data First 方法连接到数据库。您已在 SQL Server 中准备好数据库。一旦您的数据库准备就绪，您就可以通过以下[http://msdn.microsoft.com/en-us/data/gg685489.aspx将所有数据库实体放入应用程序](http://msdn.microsoft.com/en-us/data/gg685489.aspx)

它只是一个起点！希望这可以帮助！

# c++ - 如何从父类调用函数？

> ID：11226825
> 
> 赞同：2
> 
> 时间：2012-06-27T13:01:49.563
> 
> 标签：c++, oop, function

我想在 C++ 中调用超类（父类）的继承函数。
这怎么可能？

```
class Patient{
protected:
  char* name;
public:
  void print() const;
}
class sickPatient: Patient{
  char* diagnose;
  void print() const;
}

void Patient:print() const
{
  cout << name;
}

void sickPatient::print() const
{
  inherited ??? // problem
  cout << diagnose;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T13:02:44.597

```
void sickPatient::print() const
{
    Patient::print();
    cout << diagnose;
} 
```

而且如果你想要多态行为，你必须`virtual`在基类中进行打印：

```
class Patient
{
    char* name;
    virtual void print() const;
} 
```

在这种情况下，您可以编写：

```
Patient *p = new sickPatient();
p->print(); // sickPatient::print() will be called now.
// In your case (without virtual) it would be Patient::print() 
```

# iphone - Objective C中函数键的ASCII键码？

> ID：11226827
> 
> 赞同：1
> 
> 时间：2012-06-27T13:01:54.320
> 
> 标签：iphone, objective-c, xcode, nsstring, ascii

我正在开发一个需要 ASCII 代码的应用程序。我知道我可以通过字符串函数`characterAtIndex`，但我的任务是获取 f1 和 f2 等功能键的 ASCII 我通过代码添加了这些按钮，因为据我所知 iPhone 键盘中没有提到功能键。所以我应该手动添加他们的 ASCII 键，比如 f1 有 112 或任何其他方法。如果有人有更好的想法，请与我分享。提前致谢。

# c# - 如何使用 java 脚本设置 CascadingDropDown 值

> ID：11226831
> 
> 赞同：0
> 
> 时间：2012-06-27T13:02:19.050
> 
> 标签：c#, asp.net, web-services, cascadingdropdown

我有两个级联下拉菜单和一个 gridview 控件。在页面加载 iam 绑定 gridview 时，当我单击特定行时，iam 试图填充 Rowcommand 事件中的级联下拉列表。 **aspx 代码**

```
<asp:DropDownList ID="txttechnology" runat="server" ClientIDMode="Static" Font-Size="8pt"
                        Width="155px" TabIndex="7">
                    </asp:DropDownList>
                    <asp:CascadingDropDown ID="CascadingDropDown1" runat="server" TargetControlID="txttechnology" ClientIDMode="Static"
                        Category="Make" PromptText="Select Technology" ServicePath="~/google.asmx" ServiceMethod="GetTechnology" SelectedValue=""/>

<asp:DropDownList ID="txtprimaryskills" runat="server" ClientIDMode="Static" Font-Size="8pt"
                        Width="155px" TabIndex="8">
                    </asp:DropDownList>
                    <asp:CascadingDropDown ID="CascadingDropDown2" runat="server" TargetControlID="txtprimaryskills" ClientIDMode="Static"
                        ParentControlID="txttechnology" PromptText="Select Skill" ServiceMethod="GetSkill"
                        ServicePath="~/google.asmx" Category="Model" SelectedValue="" /> 
```

**行命令事件代码**

```
int type = convert.toint32(e.commandargument.tostring());
 cascadingdropdown1.selectedvalue =grdindirectconsultant.rows[type].cells[2].text.tostring().trim();
cascadingdropdown2.selectedvalue = grdindirectconsultant.rows[type].cells[3].text.tostring().trim(); 
```

**网络服务方法**

```
 [WebMethod]
    public CascadingDropDownNameValue[] GetTechnology(string knownCategoryValues,string category)
    {
        List<CascadingDropDownNameValue> values = new List<CascadingDropDownNameValue>();
        try
        {           
            DataSet makes = SqlHelper.ExecuteDataset(LITRMSConnection, "usp_getskills");
            for (int i = 0; i < makes.Tables[0].Rows.Count; i++)
            {
                string make = makes.Tables[0].Rows[i]["Technology"].ToString();
                string makeId = makes.Tables[0].Rows[i]["ID"].ToString();
                values.Add(new CascadingDropDownNameValue(make, makeId));
            }
        }
        catch (Exception ex)
        {

        }
        return values.ToArray();
    }
    [WebMethod]
      public CascadingDropDownNameValue[] GetSkill(string knownCategoryValues, string category)
      {
          List<CascadingDropDownNameValue> values = new List<CascadingDropDownNameValue>();
          try
          {
              System.Collections.Specialized.StringDictionary kv = CascadingDropDown.ParseKnownCategoryValuesString(knownCategoryValues);
              int makeId;
              if (!kv.ContainsKey("Make") || !Int32.TryParse(kv["Make"], out makeId))
              {
                  return null;
              }             
              DataSet models = SqlHelper.ExecuteDataset(LITRMSConnection, "usp_GetSkillsList", new SqlParameter("@technology", makeId));
              for (int i = 0; i < models.Tables[0].Rows.Count; i++)
              {
                  values.Add(new CascadingDropDownNameValue(models.Tables[0].Rows[i]["Skill"].ToString(), models.Tables[0].Rows[i]["Technology"].ToString() + "," + models.Tables[0].Rows[i]["SkillID"].ToString()));
              }
          }
          catch (Exception ex)
          {

          }
        return values.ToArray();
      }
 i am getting values in to cascadingdropdown1 & cascadingdropdown2  but not able to set(selected Value) value in cascadingdropdown2. 
```

我发现一个原因是在 rowcommand 中绑定后它会转到 Getskills()。如何防止调用 Getskills()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:49:35.573

Hi我可以找到答案，删除CascadingDropDown2 selectedValue 属性并编写行命令事件代码

```
int type = Convert.ToInt32(e.CommandArgument.ToString());
                    Label filename = (Label)grdindirectconsultant.Rows[type].Cells[1].FindControl("lblresume");
                    string txtfile = grdindirectconsultant.Rows[type].Cells[1].Text.ToString();
                    CascadingDropDown1.SelectedValue = grdindirectconsultant.Rows[type].Cells[8].Text.ToString();

                    txttechnology.SelectedItem.Value = grdindirectconsultant.Rows[type].Cells[8].Text.ToString();
                    Fillskills(); //Fill the primary skills depended up on the technology
                    CascadingDropDown2.SelectedValue = grdindirectconsultant.Rows[type].Cells[8].Text.ToString() + "," + grdindirectconsultant.Rows[type].Cells[9].Text.ToString(); 
```

# sql - 按类别分组

> ID：11226833
> 
> 赞同：0
> 
> 时间：2012-06-27T13:02:21.837
> 
> 标签：sql, sql-server-2008, tsql

我有一组项目。每个组都有主要的项目或标题，假设这个组里面有项目。

我想在这个组中选择这些项目并对它们进行一些数学运算，假设我想对它们求和。

例如：这样的表

```
Code          Description        Price
-----------   -------------      -----
12-5000       Toys
12-5000-100   FIFA Game          200$
12-5000-200   PEPSI MAN          150$
12-5000-300   X-MEN              120$
12-6000       Movies
12-6000-100   Scarface           200$
12-6000-200   BADBOYS1           200$
12-6000-300   GODFAther1         120$ 
```

我渴望得到的结果：

```
Description   Total
-----------   -----
Toys          470
Movies        520 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T13:06:05.987

```
;WITH x AS 
(
   SELECT Code, Description FROM dbo.Table 
   WHERE price IS NULL -- =0? can't tell what blank means
)
SELECT x.Description, SUM(t.Price)
 FROM dbo.Table AS t
 INNER JOIN x 
 ON LEFT(t.Code, 7) = x.Code
 AND t.Code > x.Code
 GROUP BY x.Description; 
```

**编辑**

因为我们已经了解到价格实际上存储为一个字符串，如`'400$'`...

```
;WITH x AS 
(
   SELECT Code, Description FROM dbo.Table 
   WHERE LEN(price) = 0
)
SELECT x.Description, SUM(CONVERT(DECIMAL(18,2), REPLACE(t.Price,'$','')))
 FROM dbo.Table AS t
 INNER JOIN x 
 ON LEFT(t.Code, 7) = x.Code
 AND t.Code > x.Code
 GROUP BY x.Description; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:03:39.027

```
select description, sum(price)
from tableName
group by description 
```

不能那么容易吗？

***编辑***

我懂了。您在同一张表中有标题（th）和行（tr）。然后你需要将它们隔离成两个伪表。也许是这样：

```
select th.description, SUM(tr.price)
from tableName th
left join tableName tr
on tr.code like th.code + '-%'
where th.code like '[0-9][0-9]-[0-9][0-9][0-9][0-9]'
group by th.description 
```

# javascript - jQuery | 获取定义区域中的 div 元素

> ID：11226836
> 
> 赞同：15
> 
> 时间：2012-06-27T13:02:26.023
> 
> 标签：javascript, jquery, jquery-selectors

有没有一种简单的方法可以让`div`元素完全适合定义的区域？

例子：

![http://i.imgur.com/oIw6i.png](../Images/0e5a266159d796dc43069d955eb2fd5f.png)

```
<div id="redbox"> RESIZE DIV </div>

<div id="grid">
  <div id="box1"></div>
  <div id="box2"></div>
  <div id="box3"></div>
  <div id="box4"></div>
</div> 
```

我有 4 个盒子（灰色），我可以调整一个`div`（所有盒子顶部的红色）。调整大小后，我想知道哪些 div 元素完全适合该区域。

有谁知道该怎么做？中是否有方法或功能`JQUERY`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T13:08:33.437

在我看来，该`withinBox`插件可能会帮助您解决这个问题（[`jquery.fn.withinBox`](http://donejs.com/docs.html#!jQuery.fn.withinBox)）。你可以使用这样的代码：

```
var area = $('#redbox'),
    offset = area.offset(),
    selected = $('#grid div').withinBox(offset.left,
                                        offset.top,
                                        area.width(),
                                        area.height()
                                        ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:12:46.797

我对 JQuery 所做的是遍历所有要检查的元素，获取它们的`.offset()`值，加上**width**和**height**。

然后对于每个元素，我将得到这四个值：

```
X1 (offset().top)
Y1 (offset().left)
X2 (= X1 + width)
Y2 (= Y1 + height) 
```

我将使用这些值来检查以下四点（仍然要检查每个元素）

```
x1,y1  x1,y2  x2,y2  x2,y1  (the four corners) 
```

如果我们对“覆盖”DIV 进行了相同的处理（检索它的四个角 xd1、yd1、xd2、yd2），我会这样推理：

> 如果这些点中的**一个或多个**属于我的“覆盖”DIV，则认为DIV“覆盖”。

**编辑：**我不知道有一个插件，我猜它的内部机制就像我的一样，但我敢打赌这是一个比我的更简单的解决方案:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:04:31.130

我认为目前还没有完整的解决方案。据认为这可能是多种多样的。

但是您可以[`document.elementFromPoint`](https://developer.mozilla.org/en/DOM/document.elementFromPoint)为此使用函数。

知道可重新调整大小的绝对位置，`div`您可以创建坐标图，然后查看其下的元素`div`。

# python - Python中字典查找的时间复杂度

> ID：11226838
> 
> 赞同：-1
> 
> 时间：2012-06-27T13:02:33.113
> 
> 标签：python

我有一个函数可以递归地构建给定字符串的子字符串。谁能告诉我这有什么复杂性？我猜它是 O(2* *n)，因为给定输入 n，可以有 2* *n 个子字符串，但我不是 100% 确定。

这是代码：

```
def build_substrings(string):
    """ Returns all subsets that can be formed with letters in string. """
    result = []
    if len(string) == 1:
        result.append(string)
    else:
        for substring in build_substrings(string[:-1]):
            result.append(substring)
            substring = substring + string[-1]
            result.append(substring)
        result.append(string[-1])
    return result 
```

我实际上有更多我认为不值得新话题的问题。我想知道在 Python 中搜索字典中的键的复杂性是什么（如果字典中有项目）？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:31:51.117

首先，这里有另外两种编写函数的方法。

```
# this one's about the same speed
import itertools
def build_substrings_2(s):
    return [''.join(r) for r in itertools.product(*(['',ch] for ch in s))]

# this one's about 4 times faster
def build_substrings_3(s):
    res = [""]
    for ch in s:
        res += [r+ch for r in res]
    return res 
```

以下是测量速度的方法：

```
import matplotlib.pyplot as plt
from itertools import izip
import timeit

xs = range(3, 25)
fns = ['build_substrings_1', 'build_substrings_2', 'build_substrings_3']
res = [(fn, []) for fn in fns]
for i,s in ((chars,"a"*chars) for chars in xs):
    ts  = [
        timeit.Timer(
            '{}({})'.format(fn, repr(s)),
            'from __main__ import {}'.format(fn)
        )
        for fn in fns
    ]
    for t,r in izip(ts, res):
        r[1].append(min(t.repeat(number=10)))

fig = plt.figure()
ax = fig.add_subplot(111, yscale='log')
for label,dat in res:
    ax.plot(xs, dat, label=label)
legend = plt.legend(loc='upper left') 
```

![在此处输入图像描述](../Images/daffcd7d9c9f21d154de36ed58f1eaf5.png)

（y 轴是以秒为单位的运行时间日志，x 轴是以字符为单位的输入字符串的长度）

以下是您找到最佳多项式拟合的方法：

```
import numpy

data = [numpy.log10(r[1]) for r in res]       # take log of data
best = [numpy.polyfit(xs[5:], dat[5:], 1) for dat in data]   # find best-fit line
big_o = [10**(b[0]) for b in best]         # convert slope back to power 
```

（感谢 DSM 提供了这种简化的方法！）

这导致

```
[2.0099844256336676, 2.0731239717002787, 2.0204035253442099] 
```

...您的功能约为 O(n**2.00998)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T13:21:14.860

如果 N 是字符串的长度。长度 >=1<=N 的子字符串的个数是 (N * N+1)/2。

所以时间复杂度是 O(N**2)

python dict是一个hashmap，因此如果hash函数不好并导致很多冲突，最坏的情况是O(n)。然而，这是一种非常罕见的情况，其中添加的每个项目都具有相同的哈希值，因此被添加到同一个链中，这对于主要的 Python 实现来说是极不可能的。平均时间复杂度当然是 O(1)。

# internet-explorer - 强制 32 位 Internet Explorer ComObject

> ID：11226839
> 
> 赞同：2
> 
> 时间：2012-06-27T13:02:36.503
> 
> 标签：internet-explorer, powershell, 32bit-64bit, comobject

我正在编写一个脚本，该脚本应该从 Internet Explorer 中的链接安装一些软件，不幸的是，该站点需要 32 位 Internet Explorer 才能工作。有没有办法强制 32 位 Internet Explorer 窗口在 64 位机器上打开？在 32 位机器上运行时，该脚本运行良好。

```
$ie = New-Object -ComObject InternetExplorer.Application
$ie.Navigate2($url)
$ie.Visible = $true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:23:59.320

```
$url = "http://www.google.com"
$shell = New-Object -ComObject WScript.Shell
$shell.Exec("C:\Program Files (x86)\Internet Explorer\iexplore.exe $url") | Out-Null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:20:22.783

`powershell.exe`一种解决方案是使用文件夹下的完整路径`SysWOW64`(C:\windows\syswow64\WindowsPowerShell\v1.0\powershell.exe)显式启动32 位版本并运行您的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T15:04:42.743

需要注意的是，MSIE 的位级别很大程度上取决于版本。IE9 有单独的 32/64 位版本，可以独立执行，但 IE10+ 是完全 64 位内核（在 64 位系统上），其子进程可以基于逻辑树以 32 位或 64 位运行页面（参见下面的链接）。增强保护模式 (EPM) 可以强制不受信任的站点以完整的 64 位模式运行（有关详细信息，请参阅下面的文章）。这导致许多附加组件与 EPM 不兼容，例如 Adob​​e Reader 的浏览器内查看器，在 v11.0.7 之前它没有支持 64 位的组件（EPM 强制执行 64 位）。

[http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx](http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx)

[http://blogs.msdn.com/b/asiatech/archive/2013/12/25/how-internet-explorer-enhanced-protected-mode-epm-is-enabled-under-different-configurations.aspx](http://blogs.msdn.com/b/asiatech/archive/2013/12/25/how-internet-explorer-enhanced-protected-mode-epm-is-enabled-under-different-configurations.aspx)

我不知道如何实现您正在寻找的东西，但上述信息可能会帮助您避免陷入困境。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T13:08:40.450

我不知道 PowerShell 的答案，但在 C 中你会传递`CLSCTX_ACTIVATE_32_BIT_SERVER`给`CoCreateInstance`. 也许您知道如何将其转换为 PowerShell-land？

注意：在我这样做的代码中，有一条评论：“在 32 位 XP 上存在此标志会使调用失败”（随后是针对微软 API 开发人员的一些暴力威胁，我不会在此处发布） . 只有在 64 位 Windows 上运行时，代码才会继续添加标志。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-12T09:03:22.260

解决问题的最简单方法是以 32 位启动 Powershell。

发射

```
Windows Powershellx86 
```

小路

```
C:\Windows\syswow64\Windowspowershell\v1.0\powershell.exe 
```

# c# - WPF 用户控件中的数据绑定

> ID：11226843
> 
> 赞同：43
> 
> 时间：2012-06-27T13:02:43.817
> 
> 标签：c#, wpf, xaml, data-binding, user-controls

我正在为多个窗口共享的一系列控件创建一个 UserControl。其中一个控件是一个标签，它以“协议号”的形式显示一些其他过程的流程。

我正在尝试使用此标签提供 DataBinding，以便窗口在协议编号变量更改时自动反映进程的状态。

这是用户控件 XAML：

```
<UserControl Name="MainOptionsPanel"
    x:Class="ExperienceMainControls.MainControls"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    >
<Label Height="Auto" Name="numberLabel">Protocol:</Label>
<Label Content="{Binding Path=ProtocolNumber}" Name="protocolNumberLabel"/>
(...)
</UserControl> 
```

这是背后的代码：

```
public partial class MainControls 
{
    public MainControls()
    {
        InitializeComponent();
    }

    public int ProtocolNumber
    {
        get { return (int)GetValue(ProtocolNumberProperty); }
        set { SetValue(ProtocolNumberProperty, value); }
    }

    public static DependencyProperty ProtocolNumberProperty = 
       DependencyProperty.Register("ProtocolNumber", typeof(int), typeof(MainControls));
} 
```

这似乎有效，因为如果在构造函数上我将 ProtocolNumber 设置为任意值，它会反映在用户控件中。

但是，在最终窗口上使用此用户控件时，数据绑定会中断。

XAML：

```
<Window x:Class="UserControlTesting.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:expControl="clr-namespace:ExperienceMainControls;assembly=ExperienceMainControls"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    >
    <StackPanel>
        <expControl:MainControls ProtocolNumber="{Binding Path=Number, Mode=TwoWay}" />
    </StackPanel>

</Window> 
```

窗口的代码隐藏：

```
public partial class Window1 : Window
{
    public Window1()
    {
        Number= 15;
        InitializeComponent();
    }

    public int Number { get; set; }
} 
```

这会将协议编号设置为零，忽略设置为编号的值。

我读过例子

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-27T13:18:14.797

如果您查看输出窗口，您应该会看到绑定异常。

您遇到的问题如下：在您的用户控件中，您会将标签绑定到您的用户控件的 DP ProtocolNumber 而不是`DataContext`，因此您必须将例如元素名称添加到绑定中。

```
<UserControl Name="MainOptionsPanel"
    x:Class="ExperienceMainControls.MainControls"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="uc"
    >
<Label Height="Auto" Name="numberLabel">Protocol:</Label>
<Label Content="{Binding Path=ProtocolNumber, ElementName=uc}" Name="protocolNumberLabel"/>
(...)
</UserControl> 
```

编辑：为了清除一些东西，如果您更改 MainWindow 中的绑定，您的用户控件也可以工作。但是您必须使用RelativeSource 绑定到MainWindow 的DataContext。

```
 <expControl:MainControls ProtocolNumber="{Binding Path=Number, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T13:05:52.877

你有什么效果：

```
<expControl:MainControls DataContext="{Binding RelativeSource={RelativeSource Self}}"
                         ProtocolNumber="{Binding Path=Number, Mode=TwoWay}"/> 
```

=> 不要**设置**in`DataContext`声明`UserControl`、使用`RelativeSource`或`ElementName`绑定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T13:05:43.100

如果您没有指定`RelativeSource`绑定，请尝试`DataContext`在构造函数中设置：

```
 public Window1()
    {
        Number= 15;
        DataContext = this;
        InitializeComponent();
    } 
```

# solr - Solr Lucene - 不确定如何索引数据以便文档正确评分

> ID：11226844
> 
> 赞同：0
> 
> 时间：2012-06-27T13:02:43.883
> 
> 标签：solr, lucene, solrj

这是我的目标。一个用户有一个技能+熟练度元组的列表。

我们希望根据一些技能/经验标准来寻找用户：

*   java, 新手

*   php，专家

    mysql，高级

* 技能非常需要并且所有其他技能都很好。达到或超过（基于经验）的用户将排名最高。但它也应该很好地降解。如果没有用户同时拥有 java 和 php 经验，但他们拥有一项非常需要的技能，那么他们应该排在首位。只有一项可选技能的用户可能会出现在底部。

我的一个想法是在如下领域索引用户的技能：

```
skill_novice: java
skill_novice: php
skill_advanced: php
skill_expert: php
skill_novice: mysql
skill_advanced: mysql 
```

...这样我至少可以做一个逻辑查询来找到满足高度期望技能的人：

```
(skill_novice:java AND skill_expert:php) 
```

但这不会很好地降低（如果没有找到匹配项），也不会找到可选技能。也许相反，我可以做这样的事情：

```
skill_novice:java AND
  (skill_novice:php^0.1 OR skill_advanced:php^0.2 OR skill_expert:php^0.3) 
```

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:41:55.940

我认为您可以在索引时使用不同的值来提升字段：

```
 // mysql expert
  Field mysqlf = new Field("skill", "mysql", 
                                    Field.Store.YES, 
                                    Field.Index.ANALYZED); 
  mysqlf.setBoost(10.0F); 
  // mysql begginer
  mysqlf = new Field("skill", "mysql", 
                                    Field.Store.YES, 
                                    Field.Index.ANALYZED); 
  mysqlf.setBoost(1.0F); 
```

您需要启用规范才能使其正常工作。

# ruby-on-rails - 仅当该表尚未加入时，是否可以“动态”加入表？

> ID：11226849
> 
> 赞同：9
> 
> 时间：2012-06-27T13:02:55.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, join, conditional

我正在使用 Ruby on Rails 3.2.2，我想知道在范围方法中是否可以“动态”加入一个表，前提是该表尚未加入。那就是，我有：

```
def self.scope_method_name(user)
  joins(:joining_association_name).where("joining_table_name.user_id = ?", user.id)
end 
```

我想做如下的东西：

```
# Note: the following code is just a sample in order to understand what I mean.
def self.scope_method_name(user)
  if table_is_joined?(joining_table_name)
    where("joining_table_name.user_id = ?", user.id)
  else
    joins(:joining_association_name).where("joining_table_name.user_id = ?", user.id)
  end
end 
```

**是否有可能/建议这样做？如果是这样，我该如何/应该继续？**

* * *

我想使用这种方法来避免[SQL 查询](https://stackoverflow.com/questions/11210241/what-means-happens-when-using-the-inner-join-with-multiple-database-table-st/11210262#11210262)[中的多个数据库表语句`INNER JOIN`](https://stackoverflow.com/questions/11210241/what-means-happens-when-using-the-inner-join-with-multiple-database-table-st/11210262#11210262)（*在某些情况下，由于多个表语句，它似乎使我的 SQL 查询无法按预期工作*），因此使用`scope_method_name`无需关心相关的 SQL 查询问题（在我的情况下，不关心加入数据库表）。

*注意：当您还**没有加入*数据库表时，它可能会引发 SQL 错误（例如，错误为“ `ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'joining_table_name.user_id' in 'where clause'`”）（例如，当您运行代码时可能会发生这种情况，*而无需先前加入*，因此没有加入相关表）。*`ClassName.scope_method_name(@user)` *`joining_association_name``joining_table_name`**

 *** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T13:23:46.463

`loaded?`检查关联是否已加载的方法在哪里。你可以尝试使用它。

```
if association_name.loaded?
   where("joining_table_name.user_id = ?", user.id)
else
   joins(:joining_association_name).where("joining_table_name.user_id = ?", user.id)
end 
```**

# html - 如何用水平线分隔表格

> ID：11226851
> 
> 赞同：0
> 
> 时间：2012-06-27T13:03:00.017
> 
> 标签：html, css

在我的 html 页面中，我有带有 css 的 div：

```
padding: 0px;
color: rgb(51, 51, 51);
background: none repeat scroll 0% 0% rgb(255, 255, 255);
position: relative;
overflow: visible; 
```

在这个 div 中，我有表格和水平线：

```
<hr color="#424242" size="2"> 
```

我怎样才能在表单之后添加这一行？他的示例在更大的显示器上工作，但是当我在电话线上看到我的页面在 div 旁边时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:05:06.757

您可以使用 CSS：

```
clear: both; 
```

使 div 清除（或进入）另一个元素。

你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:21:15.797

除非你有特殊的理由使用展示和非标准标记，比如`<hr color="#424242" size="2">`，省略这个元素并使用 CSS 来在`form`元素上绘制底部边框：

```
form {
  border-bottom: solid #424242 2px;
} 
```

如果需要，添加一些`padding-bottom`和/或`margin-bottom`到此规则，以分别在行之前和/或之后创建垂直间距。

如果您需要使用标记，请参阅我对问题的评论。但无论问题的原因是什么，CSS 方法都应该避免它，因为 at 将水平线附加到`form`元素上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T13:12:23.787

```
hr {
border-bottom: 1px solid #424242;
clear: both;
display: block;
margin-bottom: 10px;
padding-top: 10px;
width: 100%;

} 
```

# json - 谷歌烛台图的 JSON 输出（AJAX 更新）

> ID：11226852
> 
> 赞同：0
> 
> 时间：2012-06-27T13:03:05.913
> 
> 标签：json, google-visualization

我正在尝试实现 Candlestick Google Chart，但我希望能够使用 AJAX 重新加载具有不同数据的图表。我从谷歌提供的示例中复制了一些代码，但我遗漏了一些东西——我认为这与格式不正确的 JSON 有关。这是我的调用代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

      function drawChart() {
      var jsonData = $.ajax({
          url: "http://www.mydomain.com/chart_data.php",
          dataType:"json",
          async: false
          }).responseText;

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.CandlestickChart(document.getElementById('chart_div'));
      chart.draw(data, {width: 400, height: 240});
    }

    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
    <div style="width: 900px;">
        <div style="float: right;">&gt;&gt;</div>
        <div style="float: left;">&lt;&lt;</div>
    </div>
  </body>
</html> 
```

chart_data.php 如下所示：

```
{

    "rows": [

        {c:[{v: 'Mon'}, {v: 12634}, {v: 12818.9}, {v: 12695.3}, {v: 12818.9}]},

        {c:[{v: 'Tue'}, {v: 12583.7}, {v: 12694.8}, {v: 12632}, {v: 12795.7}]},

        {c:[{v: 'Wed'}, {v: 12559.6}, {v: 12617.4}, {v: 12598.5}, {v: 12764.7}]},

        {c:[{v: 'Thu'}, {v: 12415.8}, {v: 12598.5}, {v: 12442.5}, {v: 12670.2}]},

        {c:[{v: 'Fri'}, {v: 12309.6}, {v: 12442.9}, {v: 12369.4}, {v: 12539.5}]}

    ]

} 
```

我猜 JSON 数据的格式可能是错误的？但我没有看到任何关于如何为烛台图表填充它的示例。

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:12:12.967

希望这会帮助你，

```
// first change google.visualization.DataTable to google.visualization.arrayToDataTable and JSON   format not perfect.

      <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {

      var jsonData = $.ajax({
          url: "chart_data.php",
             contentType:"application/json",
          dataType:"json",
          async: false
          }).responseText;

var array=$.parseJSON( jsonData);
 var data =google.visualization.arrayToDataTable(array,true);

        var options = {width: 400, height: 240};

        var chart = new google.visualization.CandlestickChart(document.getElementById('chart_div'));
        chart.draw(data, options);

      }

      google.setOnLoadCallback(drawVisualization);
    </script> 
```

chart_data.php json 看起来像这样：

```
[["Mon",12634, 12818.9, 12695.3, 12818.9], ["Tue", 12583.7, 12694.8, 12632, 12795.7],["Wed", 12559.6, 12617.4, 12598.5, 12764.7],["Thu", 12415.8, 12598.5, 12442.5, 12670.2],["Fri", 12309.6, 12442.9,12369.4, 12539.5]] 
```

[更多请看这里](https://code.google.com/apis/ajax/playground/?type=visualization#candlestick_chart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T12:59:17.830

json 文件的格式必须如下：

```
{
  cols: [
    { label: "label", type: "string" },
    { label: "open", type: "number" },
    { label: "high", type: "number" },
    { label: "low", type: "number" },
    { label: "close", type: "number" },
  ],
  rows: [
    { c: [{ v: "Luna" }, { v: 0 }, { v: 0 }, { v: 100 }, { v: 100 }] },
    { c: [{ v: "Marte" }, { v: 0 }, { v: 0 }, { v: 150 }, { v: 150 }] },
    { c: [{ v: "Mercurio" }, { v: 0 }, { v: 0 }, { v: 200 }, { v: 200 }] },
    { c: [{ v: "Giove" }, { v: 0 }, { v: 0 }, { v: 250 }, { v: 250 }] },
    { c: [{ v: "Venere" }, { v: 0 }, { v: 0 }, { v: 250 }, { v: 500 }] },
    { c: [{ v: "Saturno" }, { v: 0 }, { v: 0 }, { v: 250 }, { v: 700 }] },
    { c: [{ v: "Sole" }, { v: 0 }, { v: 0 }, { v: 250 }, { v: 1200 }] },
  ],
}; 
```

# php - 使用 javascript 从 php 中获取变量

> ID：11226864
> 
> 赞同：0
> 
> 时间：2012-06-27T13:03:40.803
> 
> 标签：php, javascript, ajax

我有一个包含以下代码的 php 文件：

```
 function render() {
    //fetches all the data from input.
    $date = date("Y-m-d H:i:s");
    $con = mysql_connect("127.0.0.1","root","");
    $database = mysql_select_db("guestbook");
    $name = $_POST['name'];
    $email = $_POST['email'];
    $post = $_POST['post'];
    $sql = "INSERT INTO gast(name, email, post, date) VALUES('$name','$email','$post','$date')";
    $input = mysql_query($sql);
    mysql_close($con);
} 
```

使用 javascript，我想检索这些变量，如下所示：

```
document.getElementById('button').onclick = clicked;
    function clicked() {
    var name = document.render.name.value;
    var post = document.render.post.value;
    var email = document.render.email.value;
    } 
```

我已经在我的正文中包含了该 javascript 代码，但它不起作用。我如何获得价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:26:28.813

使用 AJAX。使用 jQuery，您可以非常轻松地从服务器获取任何数据。

```
$.get('test.php', function(data) {
  alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:06:09.747

你真的不能，除非js和php代码在同一个页面上，那么你可以这样做

```
var namn = "<?php echo $name; ?>"; 
```

但除非 php 将变量传递给您的 js 所在的文件，否则您实际上无能为力。

# wcf - 在 IIS 上运行的 WCF 应用程序使用哪些标识？

> ID：11226877
> 
> 赞同：0
> 
> 时间：2012-06-27T13:04:11.060
> 
> 标签：wcf, iis, windows-server-2008, application-pool

我的网络应用程序具有以下设置..

*   IIS7 上托管的 WCF 应用程序
*   基本 HTTP 绑定 - SecurityMode = TransportCredentialOnly 和 ClientCredentialType = Windows。
*   .Net 4.0
*   该应用程序使用“ApplicationPoolIdentity”在 .Net 4.0 应用程序池中运行。
*   IIS 使用“应用程序直通”身份验证连接到文件系统。
*   客户端和服务都在 IIS 下运行 - 即客户端是网站，服务是 IIS 托管的 WCF 服务。

我想了解的是，在身份验证和使用服务的各个方面都使用了哪些用户帐户。

*   我了解 ApplicationPoolIdentity 是为每个创建的应用程序池生成的内置 Windows 帐户 - 这是 w3wp.exe 为网站运行的帐户吗？

*   在 clent 和 server 之间没有指定凭据 - 这是最有趣的一点。当我的客户端连接到我的 WCF 应用程序时，使用什么身份对服务进行身份验证。我假设应用程序池托管客户端网站的应用程序池身份？

*   如果是这样，那么如果两个站点使用两个不同的应用程序池会发生什么？

*   或者该服务是否只需要机器（或域）上的有效帐户并且足以进行身份​​验证？

*   如果我将应用程序池更改为使用特定的用户帐户，这会改变什么吗？我再次假设只要客户通过有效的机器帐户就可以了吗？

还，，，

*   文件系统使用什么身份？

*   “ApplicationPoolIdentity”对机器和文件系统有什么权限。

*   最后，在 SQL Server Integrated security 的情况下，如果我的服务与 SQL Server 数据库通信，则将什么身份传递给 SQL Server。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:56:58.523

> 我了解 ApplicationPoolIdentity 是为每个创建的应用程序池生成的内置 Windows 帐户 - 这是 w3wp.exe 为网站运行的帐户吗？

是的。这称为虚拟帐户，它允许 IIS 为每个定义的应用程序池创建唯一帐户，还创建一个表示应用程序池名称的安全标识符。请记住，这不是真正的用户帐户。有关它的更多信息，您可以查看以下链接：[http ://technet.microsoft.com/en-us/library/dd548356.aspx](http://technet.microsoft.com/en-us/library/dd548356.aspx)

> 在 clent 和 server 之间没有指定凭据 - 这是最有趣的一点。当我的客户端连接到我的 WCF 应用程序时，使用什么身份对服务进行身份验证。我假设应用程序池托管客户端网站的应用程序池身份？

是的，同样的规则适用于使用本地服务帐户或网络服务帐户。

> 如果是这样，那么如果两个站点使用两个不同的应用程序池会发生什么？

没什么，除非您提升这些应用程序池身份的权限。

> 或者该服务是否只需要机器（或域）上的有效帐户并且足以进行身份​​验证？

然后，您将不会使用为您的应用程序池创建的默认虚拟帐户。相反，您会将这些应用程序池与现有的 Windows 帐户相关联。请记住这些 Windows/域帐户具有什么样的权限。

> 如果我将应用程序池更改为使用特定的用户帐户，这会改变什么吗？我再次假设只要客户通过有效的机器帐户就可以了吗？

只要这些帐户根据您的需要具有权限，它就可以正常工作。

> 文件系统使用什么身份？

更详细地定义文件系统的含义；您是否严格指代您的应用程序目录？

> “ApplicationPoolIdentity”对机器和文件系统有什么权限。

ApplicationPoolIdentity 是 Users 和 IIS_IUSRS 组的成员，因此将“继承”前面提到的组的权限。

> 最后，在 SQL Server Integrated security 的情况下，如果我的服务与 SQL Server 数据库通信，则将什么身份传递给 SQL Server。

ApplicationPoolIdentity 或您配置为供您的应用程序池使用的帐户。

# java - 为什么我需要在 java 源文件中转义 unicode？

> ID：11226878
> 
> 赞同：12
> 
> 时间：2012-06-27T13:04:11.387
> 
> 标签：java, unicode, eclipse-rcp, unicode-escapes

请注意，我不是在问如何，而是在问为什么。而且我不知道这是否是特定于 RCP 的问题，或者它是否是 java 固有的问题。

我的 java 源文件以 UTF-8 编码。

如果我这样定义我的文字字符串：

```
 new Language("fr", "Français"),
    new Language("zh", "中文") 
```

当我通过从 Eclipse 将字符串作为 Eclipse 应用程序启动来在应用程序中使用该字符串时，它可以按预期工作：

![在此处输入图像描述](../Images/0749315cfae7b6f61fa9972531f1b482.png)

但是，如果在我启动由“Eclipse 产品导出向导”构建的 .exe 时失败：

![在此处输入图像描述](../Images/ee732dbb86b8292c7329db90098d68b6.png)

我使用的解决方案是像这样逃避字符：

```
 new Language("fr", "Fran\u00e7ais"), // Français
    new Language("zh", "\u4e2d\u6587") // 中文 
```

这样做没有问题（我所有的其他字符串都在属性文件中，只有语言名称是硬编码的）但我想了解。

[我认为编译器在构建字节码](http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool)时必须转换 java 文字字符串。那么为什么需要 unicode 转义呢？在 java 源文件中使用高范围的 unicode 字符是错误的吗？这些字符在编译时到底发生了什么，它与处理转义字符有什么不同？问题仅与 RCP 缓存有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T13:26:10.690

Eclipse 产品导出向导似乎没有将您的文件解释为 UTF-8。也许您需要运行 Eclipse 的 JVM，并将编码设置为 UTF-8 ( `-Dfile.encoding=UTF8`in `eclipse.ini`)？

[（应 OP 要求复制粘贴）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-06T10:50:14.250

导出插件时，它会通过与 IDE 中的正常构建过程不同的过程进行编译。存在一个[已知错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=155015)，即构建过程 (PDE.Bu​​ild) 会忽略 IDE 使用的文本编码。

通过在插件的 build.properties 文件中指定文本编码，可以使导出正常工作

```
javacDefaultEncoding.. =UTF-8 
```

# apache-flex - 如何使用 ArrayList 导航到动态视图

> ID：11226882
> 
> 赞同：1
> 
> 时间：2012-06-27T13:04:21.647
> 
> 标签：apache-flex, flash-builder, flex4.5

对不起我糟糕的英语。我搜索了几个小时，但找不到任何解决问题的方法。

我想通过从 DataProvider 中的 arrayList 获取视图名称将我的视图导航到另一个视图。

如何获取单击项目的 url 并以 View 方式导航。谢谢..

```
<s:List id="listMenu" top="0" bottom="0" left="0" right="0" height="100%" width="100%" 
click="navigator.pushView(listMenu.url as View)">
<s:dataProvider>
    <s:ArrayList>
        <fx:Object name="Title1" detail="Detail1" src="@Embed('../media/graphics/credit-card.png')" url="View1" />
        <fx:Object name="Title2 Sorgulama" detail="Detail2" src="@Embed('../media/graphics/IMEI.png')" url="View2" />       
    </s:ArrayList>
</s:dataProvider>
<s:itemRenderer>
    <fx:Component>
        <s:IconItemRenderer labelField="name" messageField="detail" iconField="src" iconWidth="64" iconHeight="64" height="68" />               
    </fx:Component>
</s:itemRenderer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:17:36.873

干得好 -

**资产/图标/FB.png：**

![在此处输入图像描述](../Images/c8a2fa63f68b6c7fd9084fa6ec53b8fe.png)

**资产/图标/GG.png：**

![在此处输入图像描述](../Images/aa0d563de5362cce34632a0d138af30e.png)

**意见/Home.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Script>
        <![CDATA[
            import mx.core.BitmapAsset;
            import mx.events.FlexEvent;

            import spark.components.SplitViewNavigator;
            import spark.components.ViewNavigator;
            import spark.core.SpriteVisualElement;
            import spark.events.IndexChangeEvent;

            [Embed(source="assets/icons/FB.png")] 
            private static const FB_CLASS:Class;
            [Embed(source="assets/icons/GG.png")] 
            private static const GG_CLASS:Class;

            private static const FB_ICON:BitmapAsset = new FB_CLASS() as BitmapAsset;
            private static const GG_ICON:BitmapAsset = new GG_CLASS() as BitmapAsset;

            protected function handleChange(event:IndexChangeEvent):void {
                var item:Object = login.selectedItem;
                navigator.pushView(item.view, item.str);
            }
        ]]>
    </fx:Script>    

    <s:List width="100%" height="100%" id="login" change="handleChange(event);">
        <s:dataProvider> 
            <s:ArrayCollection> 
                <fx:Object icon="{FB_ICON}" view="{FB}" label="Play at" msg="Facebook.com" /> 
                <fx:Object icon="{GG_ICON}" view="{GG}" label="Play at" msg="Google+" /> 
            </s:ArrayCollection> 
        </s:dataProvider>
        <s:itemRenderer>
            <fx:Component>
                <s:IconItemRenderer labelField="label" iconField="icon" messageField="msg"/>
            </fx:Component>
        </s:itemRenderer>
    </s:List>
</s:View> 
```

**应用程序.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="views.Home">
</s:ViewNavigatorApplication> 
```

上面引用的**views/FB.mxml**和**views/GG.mxml** - 由您自己创建；-)

# android - ListView Rowlayout 在自己的编码聊天中

> ID：11226884
> 
> 赞同：2
> 
> 时间：2012-06-27T13:04:24.660
> 
> 标签：android, android-layout, chat

## **我正在尝试做的事情**

我正在尝试创建一个必须不同行的聊天。对于每一行，我都制作了自己的布局文件，但问题是一行的布局文件不适合屏幕。

## **问题**

我需要在行布局中进行哪些更改以使其适合。您会找到代码以及我正在尝试的打印屏幕。

![在此处输入图像描述](../Images/c032b8d014b060703fd58f391612e645.png)

**代码**

* * *

ListAdapter 公共类 ChatListAdapter 扩展 BaseAdapter {

```
 private ArrayList<String> ContentList;
            private ArrayList<Integer> ChatUserList;

            private static LayoutInflater inflater = null;

            public ChatListAdapter(Activity activity, ArrayList<String> _ContentList,
                                   ArrayList<Integer> _ChatUserList) {
                        ContentList = _ContentList;
                        ChatUserList = _ChatUserList;
                        inflater = (LayoutInflater) activity
                                               .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            }

            public int getCount() {
                        return ContentList.size();
            }

            public Object getItem(int position) {
                        return position;
            }

            public long getItemId(int position) {
                        return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                        View vi = convertView;
                        TextView tv_text;
                        TextView tv_date;

                        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");

                        if (ChatUserList.get(position) == 1) {
                                   // I'm RECIVER -> Message is left align
                                   vi = inflater.inflate(R.layout.rowlayout_leftalign, null);
                                   tv_text = (TextView) vi.findViewById(R.id.tv_chat_leftalign);
                                   tv_date = (TextView) vi.findViewById(R.id.tv_chat_leftalign_date);
                        } else {
                                   // I'm SENDER -> Message is right align
                                   vi = inflater.inflate(R.layout.rowlayout_rightalign, null);
                                   tv_text = (TextView) vi.findViewById(R.id.tv_chat_rightalign);
                                   tv_date = (TextView) vi.findViewById(R.id.tv_chat_rightalign_date);
                        }

                        tv_date.setText(sdf.format(new Date()));
                        tv_text.setText(ContentList.get(position));
                        tv_text.setMaxWidth(((Chat.display.getWidth() / 4) * 3));

                        return vi;
            } 
```

RowLayout XML 左侧（蓝色气泡）

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@android:color/transparent" >

    <RelativeLayout
        android:id="@+id/ly_rf_row_r"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="2.5dp"
        android:layout_marginTop="2.5dp"
        android:background="@drawable/shape_rightalign"
        android:paddingBottom="2.5dp"
        android:paddingTop="2.5dp" >

        <TextView
            android:id="@+id/tv_chat_rightalign"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:gravity="right"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:textColor="@android:color/black" />

        <TextView
            android:id="@+id/tv_chat_rightalign_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="-3dp"
            android:layout_marginLeft="-3dp"
            android:layout_toLeftOf="@id/tv_chat_rightalign"
            android:paddingLeft="4dp"
            android:paddingRight="4dp"
            android:textColor="@android:color/black"
            android:textSize="8.5dp" />
    </RelativeLayout>

</RelativeLayout> 
```

RowLayout XML 右（红色气泡）

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@android:color/transparent" >

    <RelativeLayout
        android:id="@+id/ly_rf_row_l"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="2.5dp"
        android:layout_marginTop="2.5dp"
        android:background="@drawable/shape_leftalign"
        android:paddingBottom="2.5dp"
        android:paddingTop="2.5dp" >

        <TextView
            android:id="@+id/tv_chat_leftalign"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:gravity="left"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:textColor="@android:color/black" />

        <TextView
            android:id="@+id/tv_chat_leftalign_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="-3dp"
            android:layout_marginLeft="-3dp"
            android:layout_toRightOf="@id/tv_chat_leftalign"
            android:paddingLeft="4dp"
            android:paddingRight="4dp"
            android:textColor="@android:color/black"
            android:textSize="8.5dp" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:13:43.210

对于 XML 添加 `android:layout_width="fill_parent"`和`android:layout_height="wrap_content"`类似以下内容

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:background="@android:color/transparent" 
            android:layout_height="wrap_content"
            android:layout_width="fill_parent" > 
```

等等...

# c++ - 如何正确构建静态库？

> ID：11226889
> 
> 赞同：1
> 
> 时间：2012-06-27T13:04:37.030
> 
> 标签：c++, c, linker, makefile, cmake

我使用 log4cxx 日志库。我需要链接它的静态版本以避免额外的二进制依赖。我在我的动态库中使用它。log4cxx 的默认构建会生成静态库，但我无法链接它，因为它是在没有 -fPIC 标志的情况下编译的。所以我将 log4cxx bulding 更改为：

```
CPPFLAGS="-fPIC -static" ./configure
make 
```

结果`liblog4cxx.a`，我收到了一个可以链接到我的 .so 库的文件。链接是由 Cmake 完成的，类似于：

```
target_link_libraries(my_dynamic_lib log4cxx)
link_directories(relative_path_to_dir_where_liblog4cxx.a_lives) 
```

一切看起来都很好，直到运行时。我无法加载 my_dynamic_lib.so 因为`undefined symbol "logger"`

请解释我出了什么问题以及如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:57:37.537

您可以使用以下方法验证共享库是否包含符号

```
nm -g my_dynamic_lib.so | grep logger 
```

如果它以符号类型显示，`U`则表示它未定义。

通常共享库直到运行时才会解析它需要的所有符号，因此可以（并且完全正常）链接缺少符号的共享库。

如果您将其放在`-llog4cxx`链接器命令行的开头，`my_dynamic_lib.so`那么它将不会链接到其中的任何代码，并且会在`logger`运行时之前保留该符号未解析。要强制它使用静态库中的符号，请确保在需要它的对象*之后列出静态库：*

```
g++ -fPIC -shared -o my_dynamic_lib.so obj1.o obj2.o -llog4cxx ... 
```

我不知道如何用 cmake 做到这一点，但看起来你的 CMakefile 只`log4cxx`在链接主可执行文件时链接到，而不是动态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:37:51.287

通常你会将 liblog4cxx.a 与你的可执行文件而不是你的 my_dynamic_lib.so 链接。我认为您不能像示例中那样进行链接，除非您可以提供另有说明的文档。

# iphone - 为什么加载 UIDocument 需要 40 秒？

> ID：11226892
> 
> 赞同：2
> 
> 时间：2012-06-27T13:04:45.097
> 
> 标签：iphone, objective-c, icloud, uidocument

我正在尝试加载 UIDocument 以快速预览其内容（包装在文件包装器中）。我称这段代码为：

```
-(void)previewLoadDocAtURL:(NSURL*)fileURL {
NSLog(@"... loading for preview: %@", [fileURL lastPathComponent]);
FRNBDocument *doc = [[FRNBDocument alloc] initWithFileURL:fileURL];        
[doc openWithCompletionHandler:^(BOOL success) {

    NSLog(@"... loaded for preview: %@", [doc.fileURL lastPathComponent]); 
```

问题是有时需要 40 秒才能获得日志，而有时只需要几毫秒。这是40秒：

```
2012-06-27 13:58:31.612 Meernotes[4444:11303] ... loading for preview: NOTEBOOK-C759AD40-E6DE-4241-9E5A-22C458BEF8DA.MBOOK
2012-06-27 13:59:11.870 Meernotes[4444:11303] ... loaded for preview: NOTEBOOK-C759AD40-E6DE-4241-9E5A-22C458BEF8DA.MBOOK 
```

这是几毫秒：

```
2012-06-27 14:02:50.829 Meernotes[4510:11303] ... loading for preview: NOTEBOOK-C759AD40-E6DE-4241-9E5A-22C458BEF8DA.MBOOK
2012-06-27 14:02:50.896 Meernotes[4510:11303] ... loaded for preview: NOTEBOOK-C759AD40-E6DE-4241-9E5A-22C458BEF8DA.MBOOK 
```

为什么会这样，我怎样才能防止它需要 40 秒？

* * *

编辑

我做了更多的测试。事实证明，这仅在加载本地文件时在模拟器中发生。有趣的是，我启动模拟器需要 40 秒。然后我再次启动模拟器，需要几毫秒。然后我再次启动模拟器，需要 40 秒。等等所以这实际上看起来像一个错误。我正在使用最新的 xCode 4.5 DP2，所以我想是时候提交错误了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:16:12.447

通常 iCloud 文件是按需下载的，因此如果您的文档在 iCloud 中并且之前从未打开过，则可能需要一段时间，这取决于您的互联网连接和文件大小:)

我注意到 iCloud 第一次加载某些内容时比平时多花几秒钟的时间。

最后，iCloud API 非常有问题。难怪在 iOS5/OSX10.7 中很少有官方应用采用它。但是不要过多地责怪苹果，毕竟这是他们的第一次迭代 :)

# sql-server - Sql Server Reporting Services 必须声明标量变量@param

> ID：11226894
> 
> 赞同：5
> 
> 时间：2012-06-27T13:04:47.390
> 
> 标签：sql-server, reporting-services, parameters

我有一个 Sql Server 报告服务项目。我有一个名为 Total 的数据集查询，我在其中根据参数选择某些数据：

```
select ...
  from ...
group by ...

having prop_id = @PropID 
```

现在要填充此参数的多个值的列表，我有一个名为 AllProps 的数据集查询，它选择所有可能的 prop_id：

```
select prop_id from proposal
order by prop_id 
```

现在在报告数据窗格中，我从@PropID 中选择参数属性并填写如下表格：

```
Under General I have,
   Name: PropID
   Data type: Text
   (I select "Allow multiple values")

Under Available values I have,
   Get values from a query
   Dataset: AllProps
   Value Fields: prop_id
   label field:  prop_id

Under Default Values I have,
   Get values from a query
   Dataset: AllProps
   Valuefield: prop_id 
```

当我单击预览选项卡查看我的报告时，我收到以下错误：

本地报告处理过程中发生错误。报告处理过程中发生错误。数据集“总计”的查询执行失败。

必须声明标量变量“@PropID”。

我哪里做错了？什么是 SSRS 中的标量变量以及如何正确使用它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:24:34.843

您编写的查询需要更正。由于您选择了多个值，因此您需要使用`in`子句。

```
Select col1,col2....
from TableName 
where prop_id in  (@PropID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-25T15:55:15.823

在存储过程中，您可以直接传递参数并使用存储过程中的函数拆分值。

如果参数直接传递给 sql 查询而不是存储过程，则使用连接连接参数值并传递给数据集[在此处输入图像描述](https://i.stack.imgur.com/DAA01.png)

# magento - Magento Javascript 合并 - 为什么它在某些情况下会中断？

> ID：11226902
> 
> 赞同：3
> 
> 时间：2012-06-27T13:05:11.427
> 
> 标签：magento

好的，我已经做了一段时间的 JS 合并，但仍然无法弄清楚成功合并背后的逻辑。它归结为在合并列表上向上和向下重新定位库。有时 jquery 必须在顶部，有时则不是。有时fancybox需要添加为addJs，有时需要添加为addItem。

那么，当您使用 Magento 的合并 JS 时，导致 JS 库崩溃的经验是什么？成功合并有什么规则吗？

更新：刚才在我的 local.xml 我从

```
<action method="addItem"><type>skin_js</type><name>js/magiczoomplus.js</name></action> 
```

到

```
<action method="addJs"><script>jquery/magiczoomplus.js</script></action> 
```

这解决了我在页面上遇到的 magiczoomplus 错误。怎么会这样？

我正在尝试理解这个问题，以便将来更好地解决它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T13:21:09.320

您需要了解这里的核心原则 javascript 库之间有什么冲突，什么没有。

在 jQuery 和 Prototype 冲突的情况下以及在 Magento 中：

*   始终在页面上的任何其他脚本之前包含 jQuery，在必须使用原型之前
*   添加 jQuery.noConflict(); 直接调用到你的 jQuery 库文件的末尾
*   确保所有基于 jQuery 的脚本都没有使用 $ 作为方法名称（这里的冲突本质）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:43:44.480

如果启用 Javascript 合并后有任何问题，我总是尝试用这些文件的非最小化版本替换最小化的 Javascript 文件。它总能解决问题。（不知道为什么最小化文件有问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T22:45:05.830

实际修复合并的选项并不多，但是

1.)`group`在 local.xml 文件中使用 -ing 以确保更好的合并。

[http://fishpig.co.uk/blog/why-you-shouldnt-merge-javascript-in-magento.html](http://fishpig.co.uk/blog/why-you-shouldnt-merge-javascript-in-magento.html)

2.) 完全放弃 Magento 的内置合并，`Fooman_Speedster`转而使用。

[http://www.magentocommerce.com/magento-connect/fooman-speedster.html](http://www.magentocommerce.com/magento-connect/fooman-speedster.html)

到目前为止，第二个对我来说效果很好。我正在使用 jQuery 库甚至更多（Handlebars 等），我没有任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T22:49:19.393

对我有用的是在原型之后移动 jQuery 包含并添加 jQuery.noConflict(); 在 jQuery 包含之后。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T11:06:14.387

经过这么长时间对我有用的是：

1.  始终将 jQuery 放在首位，然后是 noConflict
2.  在包含的 JS 的压缩版本和未压缩版本之间切换（如果启用 gzip 压缩，则不必担心最终大小 - 它将以一种或另一种方式压缩）
3.  在 addItem 和 addJs 包含方法之间切换
4.  随机重新定位错误库

# android - 构造函数 ArrayAdapter onclick 问题

> ID：11226903
> 
> 赞同：0
> 
> 时间：2012-06-27T13:05:14.750
> 
> 标签：android, listview

当我单击按钮搜索时，我需要在我的列表视图中显示图像和文本，但它在我的`setListAdapter(new MobileArrayAdapter(this, PNames,PImages));`.. 中给了我一个错误。我有两个类。当我显示 onformLoad 它工作但现在我需要使用按钮显示它，这里是我的两个类：

```
 B_KZN.setOnClickListener(new View .OnClickListener() {

        @Override
            public void onClick(View Kv) {
    // TODO Auto-generated method stub

   JSONObject json = JSONfunctions.getJSONfromURL("http://10.0.2.2/php/p.php");

   try{

            JSONArray  earthquakes = json.getJSONArray("SKZN");

           for(int i=0;i<earthquakes.length();i++){                     

            JSONObject e = earthquakes.getJSONObject(i);    
            String BookName = e.getString("P_City");
        PNames.add(BookName);
    String BookImg = e.getString("Pname");
        PImages.add(BookImg);
    }       
        }catch(JSONException e){
         Log.e("log_tag", "Error parsing data "+e.toString());
    }                   
        setListAdapter(new MobileArrayAdapter(this, PNames,PImages)); 
```

我的第二堂课：

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] myBookNamelist = null;
    private ArrayList<String> MyP = new ArrayList<String>();
    private ArrayList<String> myPurl = new ArrayList<String>();

    public MobileArrayAdapter(Context context,ArrayList<String> Bname,ArrayList<String> BUrl) {
        super(context, R.layout.list_mobile, Bname);
        this.context = context;
        this.MyP = Bname;
        this.myPurl = BUrl;
    } 
```

这是我的错误：`The constructor MobileArrayAdapter(new View.OnClickListener(){}, ArrayList<String>, ArrayList<String>) is undefined`...**它显示了我的红线。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:08:57.320

您声明`this`为您的`Context`. 但是您属于 Annoymous 类型`View.OnClickListener`

试试这个：

```
 setListAdapter(new MobileArrayAdapter(YourActivityName.this, PNames,PImages)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:09:28.373

构造函数的第一个参数是类型`Context`，但是当传递`this`给构造函数时，你是在`View.OnClickListener`. 由于您在（最有可能的）活动的内部类中，您只需要表明您想要传递父活动实例。

在您创建适配器的地方，使用`MyActivity.this`：

```
setListAdapter(new MobileArrayAdapter(MyActivity.this, PNames,PImages)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:24:03.627

在您将适配器设置为 ListView 的活动中使用此代码，它将起作用

```
setListAdapter(new MobileArrayAdapter(yourActivityname.this, PNames,PImages)); 
```

# c# - 如何区分系统的访问者和用户？

> ID：11226906
> 
> 赞同：1
> 
> 时间：2012-06-27T13:05:21.607
> 
> 标签：c#, asp.net, user-controls

我是一个新的 ASP.NET 开发人员，我在上面做了两个项目。现在，我正在开发一个简单的 Intranet 培训开发基于 Web 的应用程序，其中我有三个不同的角色：管理员、贡献者和用户。它们之间的区别在于，在 Admin 和 Contribute 的情况下会出现一个新的菜单选项卡。我通过将菜单栏设置为用户控件来开发此功能，并为角色创建属性以显示每个角色的特定选项卡。

**用户控件代码（菜单选项卡）（.ascx 文件）：**

```
<ul class="menu" runat="server" >
                    <li><a href="Default.aspx">Home</a></li>
                    <li><a href="Services.aspx">Services</a>
                        <ul>
                            <li><a href="Quiz.aspx">Quiz Engine</a></li>
                            <li><a href="Suggestion.aspx">Safety Suggestions Box</a></li>
                            <li><a href="#">PMOD Saftey Management System</a></li>
                        </ul>
                    </li>
                    <li><a href="BeSafe.aspx">Be Safe !</a>
                        <ul>        
                            <li><a href="Newsletter.aspx">Newsletter</a></li>
                            <li><a href="Library.aspx">PSSP Library</a></li>
                            <li><a href="Links.aspx">Useful Links</a></li>
                        </ul>
                    </li>

                    <li><a href="UserProfile.aspx">Profile</a></li>

                    <li><a href="About.aspx">About</a></li>
                    <li><a href="Contact.aspx">Contact Us</a></li>
                    <li><a href="Faq.aspx">FAQ</a></li>
                    <li><a href="Help.aspx">Help</a></li>

                    <li id="menuItem1ToHide" runat="server"><a href="Admin.aspx">Admin</a>
                    </li>

                    <li id="menuItem2ToHide" runat="server"><a href="Contribute.aspx">Settings</a>
                        <ul>        
                            <li><a href="KPIReport.aspx">PMOD Safety Training Detailed Matrix</a></li>
                            <li><a href="UpdateKPIReport.aspx">Update Safety Training Matrix</a></li>
                        </ul>
                    </li>

                    <li id="menuItem3ToHide" runat="server"><a href="Contribute.aspx">Management</a>
                        <ul>
                            <li><a href="Dashboard.aspx">Department Dashboard</a></li>
                            <li><a href="KPIReport.aspx">PMOD Safety Training Detailed Matrix</a></li>
                        </ul>
                    </li>

                </ul> 
```

该系统只能由我部门的员工访问。现在，他们要求我让每个人都可以访问它，而不向他们展示包含部门数据的真正功能。我很困惑我将如何开发它，因为我用于 Admin 和 Contribute 角色的方式似乎在这里不起作用。因为访问者将能够像我部门中具有用户角色的任何员工一样查看大部分页面。

**如何区分两者？**

**更新：**

我正在开发一个基于 Intranet Web 的应用程序，因此我使用的是 Windows 身份验证，并且我已经开发了用户管理子系统，而不是使用 ASP.NET 成员资格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:06:42.980

您需要熟悉[ASP.NET Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)，然后您将准确了解如何区分具有不同角色的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:31:35.317

如果还不算太晚，或者对于其他任何人，请检查以下内容：

```
http://www.aspnettutorials.com/tutorials/navigation/role-based-permissions-asp4.aspx 
```

# javascript - 比较避免无样式内容闪现的策略 (fouc)

> ID：11226909
> 
> 赞同：0
> 
> 时间：2012-06-27T13:05:23.940
> 
> 标签：javascript, cookies, dhtml, api-design, fouc

我需要用 cookie 控制 CSS：

*   当用户通过我在所有页面上包含的控件选择样式时，该设置需要持续存在，直到用户更改它或 cookie 过期
*   用户返回时不应出现默认样式或 FOUC
*   没有 jquery 或其他库或框架
*   适用于 Windows 上的 IE、Firefox、Chrome、Opera、Safari；MacOS 上的最后四个；iOS 上的 Safari；Linux 上的 Firefox 和 Chrome）
*   将使用的网络字体绑定到特定的@class 属性
*   按钮收缩其文本值
*   用于切换样式和显示 cookie 状态的复选框

我的第一个策略是在 <body> 元素上设置一个 onload 处理程序。我已经看到至少有两种其他方法的讨论：

*   `document.write`在构建页面时，在 <head> 中创建指向样式表的 <link>。
*   [sitewizard.com](http://www.thesitewizard.com/javascripts/change-style-sheets.shtml)创建一组小型样式表，并让用户一次设置一个以激活。

我将不胜感激有关选择易于编码和维护的策略的建议，并在我需要支持的浏览器中提供我需要的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:55:48.293

使用多种技术来避免根本原因，即[重绘和回流](http://blog.letitialew.com/post/30425074101/repaints-and-reflows-manipulating-the-dom)：

*   [DOM 计算](http://www.webkit.org/blog/66/the-fouc-problem/)
*   [CSS 源码顺序](http://stevesouders.com/hpws/css-fouc.php)
*   [鼠标事件](https://dojotoolkit.org/reference-guide/1.10/dojo/window/scrollIntoView.html)
*   [内联 CSS](https://joe-watkins.io/javascript/inline-critical-css-with-wordpress/)
*   [缓冲区冲洗](https://www.sitepoint.com/faster-web-pages-php-buffer-flush/)
*   [缩小和连接](https://ikreativ.com/combine-minify-css-with-php/)
*   [延迟加载/延迟脚本](https://www.stevesouders.com/blog/2010/09/30/render-first-js-second/)

**参考**

*   [Web 应用程序解决方案：设计师指南](http://static.lukew.com/webapplicationsolutions.pdf)

# .net - 使用 MS Sync 框架同步相关表

> ID：11226917
> 
> 赞同：0
> 
> 时间：2012-06-27T13:05:35.770
> 
> 标签：.net, synchronization, microsoft-sync-framework

我的应用程序中有以下表格。

用户（用户 ID，......）

类别（CategoryId，......）

用户类别（用户 ID，类别 ID）；

项目（ItemId，CategoryId，......）

“UserCategory”表用于控制对项目的访问。给定用户只能访问属于他有权访问的类别的项目。我需要将此数据同步到 iPad 应用程序（它是一种同步方式，并且在 iPad 上没有修改任何数据）。我使用过滤器来确保只有相关的类别和项目被发送到客户端应用程序。问题是如果稍后我们将现有类别分配给用户，则属于该类别的项目不会同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:05:36.773

同步框架不支持分区重新对齐或行进出范围（或动态过滤）。

在您的情况下，即使您将现有类别分配给用户，用户类别表中也会发生更改，但类别表没有实际更改，因此未检测到类别的更改。

尝试对您刚刚分配的 Category 行进行虚拟更新，这应该将其标记为已更改。但是，这也意味着即使没有变化，其他客户端也会下载它。

# javascript - Facebook like 错误 - 已禁用/不可见

> ID：11226918
> 
> 赞同：1
> 
> 时间：2012-06-27T13:05:38.167
> 
> 标签：javascript, facebook-like

我们有许多使用相同功能的内容管理网站。我们最近添加了一个网站，Facebook 的like 按钮在点击时出现错误（在 Facebook 登录后）：

> 此页面要么被禁用，要么对当前用户不可见。

这只发生在 Facebook 用户不是页面管理员或我们为页面创建的应用程序的管理员时。

失败的网站在这里：[http ://beachhousemilfordonsea.co.uk/](http://beachhousemilfordonsea.co.uk/)

一个有效的网站示例（相同的代码）： http: [//monmouthash.co.uk/](http://monmouthash.co.uk/)

Facebook 喜欢的代码：

```
<fb:like href="http://beachhousemilfordonsea.co.uk/" width="380"></fb:like> 
```

**已经采取的行动**

我已经检查了 FB Linter 并且有几个 Opengraph 警告确实需要修复（添加描述，增加图像大小） - 但这些对于所有站点都是相同的，所以应该会影响这一点（它在开发计划在下一个版本中纠正这些问题）。

我查看了我们在问题页面上运行的 Facebook 应用程序，并将其与其他工作应用程序进行了检查，据我所知，设置是相同的，除了这个新应用程序缺少选项：

*   加密访问令牌（假设这是默认设置，现在不可更改）
*   包括最近的活动故事

感觉应用程序不会对此产生太大影响，因为我们将应用程序用于页面中的其他功能（一切正常！）。

我搜索了可能的问题，并检查了更常见的问题：

*   没有年龄/地域限制
*   我已经向 Facebook 提交了 2 个请求以防内容被阻止，但没有响应或更改

关于还有什么可以尝试的建议？

在此先感谢，凯夫

PS我一周前问过这个问题，但它的形式不是很好 - 希望这是一个更好的尝试，但如果您需要其他任何东西，请告诉我。

# sql - 确保业务规则不会被多个用户破坏

> ID：11226923
> 
> 赞同：0
> 
> 时间：2012-06-27T13:06:00.740
> 
> 标签：sql, database, domain-driven-design

假设我有一个包含订单行的订单，并且我们有一个多用户系统，不同的用户可以在其中添加订单行。订单被持久化到数据库

一个业务规则是一个订单只能创建 10 个订单行。

我有什么选择来确保这条规则不被破坏？我应该检查内存并应用锁还是通过过程在数据库中处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:28:26.540

对于如何处理这个问题，您有很多选择，包括：触发器、约束、业务规则逻辑和数据结构。

我的偏好如下。将所有插入/删除/更新包装到存储过程中的订单行中，并且只允许应用层通过存储过程访问表。然后，此过程可以强制执行此业务规则和其他业务规则。它还会在运行时锁定表以进行更新，因此只有一个用户可以在任何给定时刻更改表。

类似的方法是在表上使用插入而不是触发器。当这个（和其他）业务规则失败时，这将导致插入失败。与此相关的主要问题是可维护性。一张桌子上的一个触发器很好。但是，如果您开始对具有级联插入/删除的多个表执行此操作，则最终可能会引发一场噩梦。

正如其中一条评论所建议的那样，您可以尝试使用约束来执行此操作。您肯定会想要测试它的性能，因为您几乎无法控制约束的实现方式。

此外，您可以在订单表中有十个订单行列。这将着重执行此规则。但是，为每个订单行设置单独的列并且必须处理诸如删除之类的问题是有成本的。

在这种情况下不适合的另一种选择是在应用程序级别强制执行业务规则。但是，对于多个并发用户，您应该在数据库中完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:40:46.457

假设最坏的情况，大量（又名超过 2 个）用户都同时尝试向单个订单添加行。（更糟糕的是，假设他们都在尝试添加不同数量的行，尽管一次不超过 10 行——GUI 至少可以控制那么多）。这会导致以下情况：

*   检查她的行是否有空间，没问题
*   B 检查他的行是否有空间，没问题
*   A加她的行，生活是美好的
*   B 添加他的行，现在有 11 个
*   这一切都发生在不到十分之一秒的时间内

为了避免这种情况，需要有某种形式的中央“检查点”或调节器，所有用户都可以在其中确定他们是否可以添加行。如果他们通过了检查点，他们可以添加；如果不通过，他们就不能。检查点必须是绝对的：一旦收到/分配批准，该决定会影响所有后续检查（即，当您检查并被授予第 10 行时，之前没有其他人被授予，并且随后也没有其他人被授予） .

有几种方法可以实现这一点，它们都涉及数据库事务（ACID 属性）。事务必须始终尽可能简短，以避免与其他用户发生阻塞或死锁。这可能是棘手的代码，对我来说，实现/控制该过程的最佳方法是通过存储过程（如@Gordon Linoff 所说）。

# multithreading - Spring AbstractRoutingDataSource 后台线程

> ID：11226924
> 
> 赞同：2
> 
> 时间：2012-06-27T13:06:03.893
> 
> 标签：multithreading, spring

我们正在构建一个多租户服务器，每个租户都有一个数据库/模式。为此，我们使用 Springs AbstractRoutingDataSource 根据租户切换数据源。

租户由 servlet 过滤器中 url 的子域确定。此租户存储在线程本地中。

在启动线程之前，这一切都很好。例如，当休眠搜索重新索引时，它会启动很多线程。

当这些线程之一尝试获取连接时，线程本地返回 null 并且我无法确定租户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:54:10.087

我通过使用存储我的租户的会话范围的 spring bean 来修复它。

样品见[链接](http://blog.trixi.cz/2012/01/multitenancy-using-spring-and-postgresql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-16T23:09:28.770

您可以将租户标识符存储在`InheritableThreadLocal`. 子线程将有权访问相同的 ThreadLocal 变量，因此将了解租户并使用相同的数据库。

# java - 带有 JComboBox 的 Java JTable

> ID：11226926
> 
> 赞同：2
> 
> 时间：2012-06-27T13:06:06.393
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

我正在尝试将 JComboBox 放置在 JTable 的某个列中。我有这段代码，它正在工作：

```
 model = new DefaultTableModel();
    JComboBox<String> optionComboCell = new JComboBox<String>();
    optionComboCell.addItem("Option 1");
    optionComboCell.addItem("Option 2");
    optionComboCell.setSelectedIndex(1);

    table = new JTable(model);
    // Adding here all the columns, removed for clarity
    model.addColumn("Options");
    TableColumn optionsColumn = table.getColumn("Options");
    optionsColumn.setCellEditor(new DefaultCellEditor(optionComboCell)); 
```

我的问题是，在选择该列中的单元格之前，它不会显示为 JComboBox。当 JFrame 被加载时，整个表格看起来是一样的，好像所有的单元格都只有文本。单击时，它会显示组合框的箭头和选项，但再次取消选择时，它看起来像一个常规单元格。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:11:45.487

是的，使用 JComboBox 来呈现您的单元格：

```
import java.awt.Component;
import java.util.Enumeration;
import java.util.Vector;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class Test4 {

    private static class ComboBoxCellRenderer extends JComboBox implements TableCellRenderer {

        public ComboBoxCellRenderer(int column) {
            for (int i = 0; i < 10; i++) {
                addItem("Cell (" + i + "," + column + ")");
            }
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setSelectedItem(value);
            return this;
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame("test");
        frame.add(getTable());
        frame.pack();
        frame.setVisible(true);
    }

    private Component getTable() {
        Vector<Vector<String>> data = new Vector<Vector<String>>();
        for (int i = 0; i < 10; i++) {
            Vector<String> row = new Vector<String>();
            for (int j = 0; j < 3; j++) {
                row.add("Cell (" + i + "," + j + ")");
            }
            data.add(row);
        }
        Vector<String> columns = new Vector<String>();
        columns.add("Column 1");
        columns.add("Column 2");
        columns.add("Column 3");
        DefaultTableModel model = new DefaultTableModel(data, columns);
        JTable table = new JTable(model);
        table.setRowHeight(20);
        int i = 0;
        Enumeration<TableColumn> c = table.getColumnModel().getColumns();
        while (c.hasMoreElements()) {
            TableColumn column = c.nextElement();
            column.setCellRenderer(new ComboBoxCellRenderer(i));
            i++;
        }
        JScrollPane scroll = new JScrollPane(table);
        scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        return scroll;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test4().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T13:14:48.623

您将需要定义自己的渲染器来在表格上显示组件，因为只有在编辑表格单元格中的值时才需要 CellEditor（这就是为什么它只会在您单击单元格时做出反应）。

也许看看[Java Tutorials](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)来了解更多关于 JTables 的渲染器和编辑器的概念。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T13:11:31.873

尝试设置单元格渲染器。

# asp.net - 解决方案根目录中的共享文件夹

> ID：11226928
> 
> 赞同：0
> 
> 时间：2012-06-27T13:06:09.277
> 
> 标签：asp.net

我在 VS2010 的解决方案中有 3 个 Web 应用程序。他们使用相同的 CSS、图像等。如何在解决方案的根目录中创建一个共享文件夹以从所有 Web 应用程序访问？因此，例如，我希望在根目录中有一个“CSS”文件夹来存储 CSS 文件，并从所有 Web 应用程序访问它们。
谢谢

结构：

解决方案
- Project1
- Project2
- Project3
- Images
- CSS

我想将 css 文件和图像存储在中心位置（在解决方案的根文件夹中），但不在任何项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:53:38.243

正如 Furqan 所说，将这些通用元素作为它们自己的 Web 应用程序部署在服务器上。然后使用完整的 url 引用元素，例如 media.yourcompany.com/css/site.css

# c++ - 在 C++ 中创建向量的排列

> ID：11226929
> 
> 赞同：-4
> 
> 时间：2012-06-27T13:06:09.600
> 
> 标签：c++, stl

我正在尝试创建存储在向量内的图形边缘的组合。我还需要生成并将生成的向量存储在向量中。以下是我到目前为止所做的，但目前尚未编译；

```
#include <stdlib.h>
#include<iostream>
#include<vector>
#include<algorithm>

struct edge{

int a;
int b;
int weight;
edge(int u,int v,int cost)
{
    a=u;
    b=v;
    weight=cost;
}

};

int main()
 {
  typedef std::vector<edge> V; //<or_any_class>
  V v;

    v.push_back(1,2,10);
    v.push_back(1,3,10);
    v.push_back(1,4,10);
    v.push_back(3,4,10);
    v.push_back(3,5,10);
    v.push_back(3,5,10);

  do{
        std::cout<<v[0]<<" "<<v[1]<<" "<<v[2]<<" "<<v[3]<<" "<<v[4]<<std::endl;
    }

   while(std::next_permutation(v.begin(),v.end()));
return 0;
 }

What Im trying to get as output;

 1 2
 1 3
 1 4
 3 4
 3 5
 4 3
 1 2 1 3
 1 2 1 4 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T13:08:11.073

**错误一：**

```
 v.push_back(1,2,10); 
```

应该

```
 v.push_back(edge(1,2,10));
             ^^^^ 
```

**错误二：**

您需要`operator <<`为您的`edge`类定义以便`std::cout<<v[0]`可以编译

```
std::ostream& operator << (std::ostream& o, const edge& e)
{
     return o << e.a << " " << e.b << " " << e.weight;
} 
```

**错误三：**

您需要`operator <`为您的`egde`类定义，以便`std::next_permutation(v.begin(),v.end())`可以编译和工作

```
bool operator < (const edge& e1, const edge& e2)
{
    if(e1.a != e2.a) return e1.a < e2.a;
    if(e1.b != e2.b) return e1.b < e2.b;
    return e1.weight < e2.weight; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:08:46.610

这个：

```
v.push_back(1,2,10); 
```

应该：

```
v.push_back(edge(1,2,10)); 
```

# shell - 如果文件为空，则删除文件的第一行

> ID：11226938
> 
> 赞同：16
> 
> 时间：2012-06-27T13:06:53.503
> 
> 标签：shell, unix, sed

如果文本文件为空，我如何使用例如 sed 或其他标准 UNIX 工具删除文本文件的第一行 (!)。我试过这个命令：

```
sed '/^$/d' < somefile 
```

但这将删除第一个空行，而不是文件的第一行，如果它是空的。关于行号，我可以给 sed 一些条件吗？

随着 Levon 的回答，我基于 awk 构建了这个小脚本：

```
#!/bin/bash

for FILE in $(find some_directory -name "*.csv")
do
    echo Processing ${FILE}

    awk '{if (NR==1 && NF==0) next};1' < ${FILE} > ${FILE}.killfirstline
    mv ${FILE}.killfirstline ${FILE}

done 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-27T16:19:09.510

sed 中最简单的事情是：

```
sed '1{/^$/d}' 
```

请注意，这不会删除包含所有空格的行，而只会删除仅包含单个换行符的行。摆脱空白：

```
sed '1{/^ *$/d}' 
```

并消除所有空格：

```
sed '1{/^[[:space:]]*$/d}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:15:07.303

如果您不必就地执行此操作，则可以使用`awk`输出并将其重定向到不同的文件中。

```
awk '{if (NR==1 && NF==0) next};1' somefile 
```

这将打印文件的内容，除非它是第一行 ( `NR == 1`) 并且不包含任何数据 ( `NF == 0`)。

`NR`当前行号，`NF`给定行上由空格/制表符分隔的字段数

例如，

```
$ cat -n data.txt
     1  
     2  this is some text
     3  and here
     4  too
     5  
     6  blank above
     7  the end

$ awk '{if (NR==1 && NF==0) next};1' data.txt | cat -n
     1  this is some text
     2  and here
     3  too
     4  
     5  blank above
     6  the end 
```

和

```
cat -n data2.txt
     1  this is some text
     2  and here
     3  too
     4  
     5  blank above
     6  the end

$ awk '{if (NR==1 && NF==0) next};1' data2.txt | cat -n
     1  this is some text
     2  and here
     3  too
     4  
     5  blank above
     6  the end 
```

*更新*：

此`sed`解决方案也适用于就地替换：

```
sed -i.bak '1{/^$/d}'  somefile 
```

原始文件将使用`.bak`扩展名保存

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T13:41:14.610

使用 sed，试试这个：

```
sed -e '2,$b' -e '/^$/d' < somefile 
```

或进行更改：

```
sed -i~ -e '2,$b' -e '/^$/d' somefile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-05T13:31:26.997

如果第一行为空，则删除实际目录下所有文件的第一行：
`find -type f | xargs sed -i -e '2,$b' -e '/^$/d'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:49:55.567

这可能对您有用：

```
sed '1!b;/^$/d' file 
```

# import - 将值硬编码到 Dynamics CRM 的数据映射中

> ID：11226940
> 
> 赞同：1
> 
> 时间：2012-06-27T13:06:56.747
> 
> 标签：import, dynamics-crm-2011

我有一个要使用本机导入实用程序导入 Microsoft Dynamics CRM 2011 的文件。该文件不包含我要导入的实体所需的字段，是否可以在数据映射中设置该字段的值？

例如。必填字段是“来源”，我希望它始终设置为“技术调查”而不将其添加到源文件中。我可以在导入时为我填写此字段的数据映射中添加一些内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:39:44.190

您可以创建并添加自动为您设置字段的预验证插件，但在我看来，这似乎比仅更新文件更困难......

# android - android中ZXing项目Switch case报错

> ID：11226941
> 
> 赞同：5
> 
> 时间：2012-06-27T13:06:58.183
> 
> 标签：android

我已经从[http://code.google.com/p/zxing/downloads/detail?name=ZXing-2.0.zip&can=2&q=下载了 ZXing 项目，并按照](http://code.google.com/p/zxing/downloads/detail?name=ZXing-2.0.zip&can=2&q=)[http://damianflannery.wordpress](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)的所有步骤进行操作。 [com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)。

但是我的 ZXing 项目在 ZXing Library 的 switch case 中出现错误。

错误在以下代码中

```
private final Handler handler = new Handler() {
    @Override
    public void handleMessage(Message message) {
      switch (message.what) {
        case R.id.search_book_contents_succeeded:
          handleSearchResults((JSONObject) message.obj);
          resetForNewQuery();
          break;
        case R.id.search_book_contents_failed:
          resetForNewQuery();
          headerView.setText(R.string.msg_sbc_failed);
          break;
      }
    }
  }; 
```

错误在 switch 语句中错误是“ **case 表达式必须是常量表达式**”

任何的想法 ？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T21:01:21.470

如果将 zxing 编译为库，则需要将 case 语句转换为 if 语句。选择eclipse中的文本并使用ctrl+1让eclipse为你做这件事。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-27T09:44:42.773

点击 switch 关键字，在 Windows/Linux 上按 Ctrl + 1，在 Mac 上按 Cmd + 1，选择“convert switch to if else”。

# vb.net - 你如何在窗口之间浏览

> ID：11226943
> 
> 赞同：0
> 
> 时间：2012-06-27T13:07:09.943
> 
> 标签：vb.net, winforms, visual-studio-2010

我从 Visual basic 2010 开始，想学习这个程序。我正在阅读一些教程，但有一件事我找不到。

我想要一个程序中的不同部分。我添加了一个带有一些选项的菜单。现在，当我单击“人事”选项上的备忘录时，我想显示人事表格。我做了这个

```
Public Class Form1

Private Sub NieuwToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles NieuwToolStripMenuItem.Click
    formPersoneel.Show()
End Sub
End Class 
```

这将仅在新窗口中打开表单。我如何在程序本身中加载这些表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:23:08.463

表单是一个“窗口”，要在主表单中加载某些内容，您必须创建 à UserControl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:05:31.750

我认为您想要的是多文档界面 MDI。

[这是](http://msdn.microsoft.com/en-us/library/ms973874.aspx)对此的一些解释的链接。

您必须将`IsMdiContainer`表单的属性设置为`True`

# jquery - jQuery 通过鼠标指针跟踪 div 的名称

> ID：11226947
> 
> 赞同：2
> 
> 时间：2012-06-27T13:07:15.997
> 
> 标签：jquery, html, css

当我将鼠标悬停在 DIV 名称上时，是否可以将其存储到变量中？

例子：

`<div class="bar1">Text 1</div>
<div class="bar2">Text 2</div>`

当我将鼠标悬停在“Text 1”上时，DIV 的名称将存储在 jQuery 变量中。当我将鼠标悬停到“文本 2”时，DIV 名称将存储到变量中。

`var class_name = $("");`存储在其中的 DIV 名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:10:34.163

当然...

```
$('.bar1,.bar2').mouseover(function(event){
    var class_name = $(event.currentTarget).attr('class');
});​ 
```

...看到它在[这里](http://jsfiddle.net/Yy6bP/1/)运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:11:45.337

应该很容易......给所有你想悬停在同一个类上的元素......然后给它们一个ID来区分。然后使用这个 JQuery：

```
$(document).ready(function(){
    $('.hoverDivs').mouseover(function(){
        var elementId = $(this).attr('id');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:13:13.197

是的，你可以使用 jQuery 做同样的事情，

**HTML**

```
<div class="bar1" name="d1">Text 1</div>
<div class="bar2" name="d2">Text 2</div>​ 
```

**JavaScript**

```
 var name;
 var className;
    $("div").hover(function(){
     name = $(this).attr("name");
     className = $(this).attr("class");
     Console.log(name);
     //alert(name);
    });
​ 
```

* * *

**[演示](http://jsfiddle.net/aFyrx/2/)**

# java - s.replaceAll() 不工作 Java/AndroidSDK

> ID：11226951
> 
> 赞同：0
> 
> 时间：2012-06-27T13:07:24.707
> 
> 标签：java, android, string, replace, replaceall

您好，我正在尝试替换（html）字符串的一部分，但它不起作用。是的，我将它设置为一个新变量。

```
String newsBody = item.htcontent.replaceAll("resolveuid", "www.urlnotimportant.nl/resolveuid"); 
```

为什么这不起作用？

我认为这与 [img/] 标签有关。其中是我要替换的“resolveuid”字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:13:07.173

ReplaceAll() 方法将正则表达式作为第一个参数。也许您的第一个参数与您期望的方式不匹配。请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll(java.lang.String) , java.lang。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:29:19.380

此代码是从以下为图像链接添加前缀的正确实现：

```
 <img src="resolveuid/832c2b08888aba0faccae78a14e9c764" alt="photo"> 
```

对此：

```
 <img src="www.urlnotimportant.nl/resolveuid/832c2b08888aba0faccae78a14e9c764" alt="photo"> 
```

当然，除了问题中没有显示将修改后的 HTML 移回原位的代码。

您需要做的是在替换之后将修改后的字符串分配回来：

```
item.htcontent = newsBody; 
```

# sql - 唯一记录的 SQL 查询

> ID：11226954
> 
> 赞同：0
> 
> 时间：2012-06-27T13:07:37.720
> 
> 标签：sql, unique

我正在尝试构建一个查询，该查询为我提供基于列的唯一记录。这是数据的简化样本：

```
version        first            last
a              joe              smith
b              jane             smith
c              biff             mcelroy
a              thad             dussledorf 
```

我希望查询基于`version`（因此在本例中为 a、b 和 c 的 1 个实例）返回唯一记录。对于这些返回的行，应表示所有 3 列。所以理想的结果是：

```
version        first            last
a              joe              smith
b              jane             smith
c              biff             mcelroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:30:28.380

假设您的数据库支持窗口函数，最好的方法是：

```
select t.*
from (select t.*, row_number() over (partition by version order by version) as seqnum
      from t
     ) t
where seqnum = 1 
```

这会为每个版本选择一个任意的“第一”行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:16:46.737

我不确定这是否会有任何错误/问题：

```
select distinct version,
 (select top 1 [first] from tableName t1 where t1.version = t.version) as [first],
 (select top 1 [last] from tableName t1 where t1.version = t.version) as [last]
from tableName t 
```

您可以在每个子查询中使用某种“按 xxx 排序”。

我不确定这两个子查询是否总是会带回相同的“顶级”记录......？

但这并不理想。您最好拥有一个记录 ID 或时间戳或其他可以使用的东西，然后您将使用不同的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:37:36.530

如果您不关心应该在多个版本中返回哪些唯一版本，您可以简单地使用 group by：

```
select version, first_name, last_name from table name group by version; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:59:58.700

您的问题的答案取决于数据库。如果您使用的是 Oracle (pl/sql)，那么您可以使用 Rank over 函数：

SELECT * FROM (SELECT version, first, last RANK() OVER (PARTITION BY version ORDER BY first) RANK FROM SomeTable) WHERE RANK = 1;

复制和粘贴此查询可能不起作用。因此，请阅读[http://www.techonthenet.com/oracle/functions/rank.php](http://www.techonthenet.com/oracle/functions/rank.php)以了解需要做什么。

# android - Android - 如何在虚拟键盘上获得按键？

> ID：11226959
> 
> 赞同：0
> 
> 时间：2012-06-27T13:07:48.290
> 
> 标签：android, key, android-softkeyboard

我正在尝试写一个文字游戏。这就是为什么在某些时候我需要在虚拟键盘上按下按键。我需要将这封信写到 textView。不应使用 EditText。我完全被听众等困住了。

任何帮助，将不胜感激。

```
public class Oyun extends Activity implements OnKeyboardActionListener
{

@Override
public void onCreate(Bundle savedInstanceState)
{
    overridePendingTransition(R.anim.push_left_in,R.anim.push_up_out);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.oyun);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    in = this.getResources().openRawResource(R.raw.source);
    reader = new BufferedReader(new InputStreamReader(in));

    sayac  = (TextView)findViewById(R.id.counterDown);
    soru = (TextView)findViewById(R.id.Soru);
    answerButton = (ImageButton)findViewById(R.id.CevapButon);
    harfAlButton = (ImageButton)findViewById(R.id.HarfAlButon);
    leyat  = (LinearLayout)findViewById(R.id.leyat);

    final MyCounter timer = new MyCounter(240000, 1000);
    timer.start();

    try
    {
        bringQuestion(reader, in);
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    harfAlButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {   
            harfAl();
            if(alinanHarfSayisi == uzunluk)
            {
                alinanHarfSayisi = 0;
                   try
                    {
                        bringQuestion(reader, in);
                    }
                    catch (IOException e)
                    {
                        e.printStackTrace();
                    }
            }
        }

    }); 

    answerButton.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            letter[5].setVisibility(View.INVISIBLE);
            if(keyCode==KeyEvent.KEYCODE_A)
            {
                letter[1].setText("A");
            }
            return false;
        }
    });

    answerButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {   

            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0);

                    /*try
                    {
                        bringQuestion(reader, in);

                    }
                    catch (IOException e)
                    {
                        e.printStackTrace();
                    }*/     
        }

    }); 
}

public int harfAl()
{
    alinanHarfSayisi++;
    rand = rastgeleHarf.nextInt(uzunluk);

    while(letter[rand].getText() != "")
    {
        rand = rastgeleHarf.nextInt(uzunluk);
    }

    desired = cevap.charAt(rand);
    letter[rand].setText(""+ desired);
    return alinanHarfSayisi;    
}

public class MyCounter extends CountDownTimer
{

    public MyCounter(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onTick(long millisUntilFinished)
    {
        long minutes = millisUntilFinished/60000;
        long rSeconds = millisUntilFinished%60000;
        long seconds = rSeconds/1000;

        if(seconds>=10)
        {
            sayac.setText(minutes + ":" + seconds);
        }
        else
        {
            sayac.setText(minutes + ":0" + seconds);
        }

    }

    @Override
    public void onFinish()
    {

    }
}

public void bringQuestion(BufferedReader rea, InputStream inputS) throws IOException
{       
    if (inputS!=null)
    {                           
        if ((line = rea.readLine()) != null)
        {   
            soru.setText(line);
            cevap = rea.readLine();     
        }
    }       
    //is.close();       
    for(int i = 0; i<uzunluk; i++)
    {
        letter[i].setVisibility(View.GONE);
    }

    uzunluk = cevap.length();

    letter = new TextView[uzunluk];
    for(int i = 0; i<uzunluk; i++)
    {
        letter[i]=new TextView(this);
        letter[i].setBackgroundResource(R.drawable.shape);
        letter[i].setGravity(17);
        letter[i].setTextColor(Color.BLACK);
        letter[i].setTextSize(20);
        letter[i].setTypeface(Typeface.SERIF, Typeface.BOLD);
        letter[i].setText("");
        this.leyat.addView(letter[i]);
    }   
}

@Override
public void onKey(int primaryCode, int[] keyCodes)
{
    if(primaryCode==KeyEvent.KEYCODE_A)
    {
        letter[1].setText("B");
    }

}

@Override
public void onPress(int primaryCode)
{
    if(primaryCode==KeyEvent.KEYCODE_A)
    {
        letter[1].setText("C");
    }

}

@Override
public void onRelease(int primaryCode) {
    // TODO Auto-generated method stub

}

@Override
public void onText(CharSequence text) {
    // TODO Auto-generated method stub

}

@Override
public void swipeDown() {
    // TODO Auto-generated method stub

}

@Override
public void swipeLeft() {
    // TODO Auto-generated method stub

}

@Override
public void swipeRight() {
    // TODO Auto-generated method stub

}

@Override
public void swipeUp() {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:17:34.473

如果你真的想捕捉击键，你可以使用 OnKeyListener。按照这个链接 [在这里](https://stackoverflow.com/questions/1951766/android-virtual-keyboard-keylistener-for-getting-virtual-keyboard-key-presses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:12:03.380

该`KeyEvent`对象应该为您提供所需的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:48:28.887

嘿，请遵循以下代码：-

```
addCourseText = (EditText) findViewById(R.id.clEtAddCourse);
addCourseText.setOnKeyListener(new OnKeyListener()
{
    public boolean onKey(View v, int keyCode, KeyEvent event)
    {
        if (event.getAction() == KeyEvent.ACTION_DOWN)
        {
            switch (keyCode)
            {
                case KeyEvent.KEYCODE_DPAD_CENTER:
                case KeyEvent.KEYCODE_ENTER:
                    addCourseFromTextBox();
                    return true;
                default:
                    break;
            }
        }
        return false;
    }
}); 
```

# javascript - js将两个函数传递给一个方法

> ID：11226960
> 
> 赞同：0
> 
> 时间：2012-06-27T13:07:50.130
> 
> 标签：javascript, syntax

例如，将两个或多个函数传递给方法的正确语法是什么

`setInterval("javascript function",milliseconds);` 以下是正确的吗？

`setInterval("pushmarkers();clearOverlays();loadmarkers();",5000);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:09:18.387

将它们包装在另一个函数中：

```
setInterval(function() {
  pushmarkers();
  clearOverlays();
  loadmarkers();
}, 5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:12:25.990

您不应该将字符串传递给`setInterval`，这使用`eval`（这是邪恶的）。

您可以传递一个匿名函数：

```
setInterval(function () {
    pushmarkers();
    clearOverlays();
    loadmarkers();
}, 5000); 
```

或命名函数：

```
var functionForSetInterval = function () {
    pushmarkers();
    clearOverlays();
    loadmarkers();
};

setInterval(functionForSetInterval, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:12:35.960

两者都不是好习惯，因为您提供的是`setInterval`字符串，而不是对函数的引用。

您需要给 setInterval 一个函数，并且您可以轻松地制作一个调用其他函数的函数（将它们包装在一个函数中）：

```
setInterval(function(){ pushmarkers(); clearOverlays(); loadmarkers(); }, 5000); 
```

或者

```
function multifunction(){
    pushmarkers();
    clearOverlays();
    loadmarkers();
}

setInterval(multifunction, 5000); 
```

# asp.net-mvc - ASP.NET MVC - 具有动态模型的 RenderPartial

> ID：11226962
> 
> 赞同：2
> 
> 时间：2012-06-27T13:08:03.863
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dynamic

我们有一个 ViewModel 集合`Widget<dynamic>`：

```
public class Widget<T>
{
    public string ViewName { get; set; }
    public T Data { get; set; }
} 
```

在我们的视图中，我们循环遍历小部件的集合并调用`Html.Partial`.

```
@foreach (var widget in Model) {
    @Html.Partial(widget.ViewName, widget)
} 
```

如果部分*具有*动态模型或`Widget<dynamic>`.

但是，我想在局部视图中进行智能感知，所以我给我的视图一个适当的小部件数据类型的模型，例如：

```
@model Widget<string> 
```

不幸的是，这会引发异常，因为`@Html.Partial`将动态模型转换为 System.Object。

除了在部分中再次手动转换小部件之外，有没有一种方法可以在`Html.Partial`不将动态模型转换为对象的情况下进行调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:36:49.637

创建一个界面，所有动态对象类型的小部件都必须实现该界面，我之前做过同样的事情并且工作顺利

带有渲染的简单示例：（这只是一个您必须完成的快速示例）

```
 public interface IWidget{

     public System.Web.Mvc.MvcHtmlString RenderMyWidget(HtmlHelper helper);

}

public class ContenidoWidgets : IWidget{

    private String Controller { get; set; }

    private String Action { get; set; }

    private Object Parms {get; set; }

    public ContenidoWidgets(String controller, String action, Object parms)
    {

        this.Controller = controller;
        this.Action = action;
        this.Parms = parms;

    }

    public System.Web.Mvc.MvcHtmlString RenderMyWidget(HtmlHelper helper){

        return System.Web.Mvc.Html.ChildActionExtensions.Action(helper, this.Action, this.Controller, this.Parms);

    } 
```

风景....

```
@model IWidget

@model.RenderMyWidget(this.html); 
```

# symfony - 自定义 KnpMenuBundle

> ID：11226963
> 
> 赞同：45
> 
> 时间：2012-06-27T13:08:04.587
> 
> 标签：symfony, knpmenubundle

**如何自定义 KNPMenuBundle？**

我不知道如何使用 KnpMenuBundle 添加图像或跨度标签。

我只是想要这个：

```
<ul>
    <li>
         <img src="{{asset('bundles/mybundle/images/my_image.png')}} /">
         <span>My Title</span>        
     </li>
</ul> 
```

在 MenuBuilder 中，这将从：

```
$menu->addChild('My Title'); 
```

如何在`<li>`声明中添加图像？

* * *

## 编辑：简单的方法

在捆绑包中实际上有一种简单的方法可以做到这一点：

**`1`** **将模板复制** `vendor\KnpMenu\src\Knp\Menu\Resources\views\knp_menu.html.twig` 到您的`Acme\AcmeBundle\Resources\views\Menu\knp_menu.html.twig`并扩展如下：

```
{% extends 'knp_menu.html.twig' %} 
```

**`2`** **根据您的需要**修改模板。**例如，如果您决定每次使用时都添加一个 span 标签 `$menu->addChild('Your Title');`，只需在 之间添加 span 标签`<a></a>`：**

 **```
{% block linkElement %}
    <a href="{{ item.uri }}"{{ _self.attributes(item.linkAttributes) }}>
        <span>{{ block('label') }}</span>
    </a>
{% endblock %} 
```

**`3`** **您现在可以**在使用菜单时选择自定义布局：

```
{{ knp_menu_render('main', {'template': 'AcmeBundle:Menu:knp_menu.html.twig'}) }} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T16:17:33.483

CSS 适用于这种情况，但有时您可能需要更显着地添加或更改标记。为此，您可以使用此处定义的自定义渲染器：[https ://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/custom_renderer.md](https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/custom_renderer.md)

执行此操作的包的一个示例是[MopaBoostrapBundle](https://github.com/phiamo/MopaBootstrapBundle)，我在这里强调了重要部分。

`knp_menu.renderer`添加标签的服务定义：

```
services:
    mopa_bootstrap.navbar_renderer:
        class: Mopa\Bundle\BootstrapBundle\Navbar\Renderer\NavbarRenderer
        arguments: [ @service_container, [] ]
        tags:
            # The alias is what is used to retrieve the menu
            - { name: knp_menu.renderer, alias: navbar } 
```

例如，树枝模板可以这样写。

```
<div class="navbar {{ (navbar.hasOption('fixedTop') and  navbar.getOption('fixedTop')) ? 'navbar-fixed-top' : '' }}">
    <div class="navbar-inner">
        <div class="container{{ (navbar.hasOption('isFluid') and navbar.getOption('isFluid')) ? '-fluid' : '' }}">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            {% if navbar.hasOption('title') %}<a class="brand" href="{{ path(navbar.getOption('titleRoute')) }}">{{ navbar.getOption('title') }}</a>{% endif %}
            <div class="nav-collapse">
                {{ navbar.hasMenu('leftmenu') ? knp_menu_render(navbar.getMenu('leftmenu'), {'currentClass': 'active', 'ancestorClass': 'active', 'allow_safe_labels': 'true'}) : '' }}
                {% if navbar.hasFormView('searchform') %}
                    {%- set form_view = navbar.getFormView('searchform') -%}
                    {%- set form_type = navbar.getFormType('searchform') -%}
                    {%- set form_attrs = form_view.vars.attr -%}
                    {% form_theme form_view _self %}
                    <form class="navbar-search pull-{{ form_attrs.pull|default('left') }}" method="{{ form_attrs.method|default('post') }}" action="{{ path(navbar.getFormRoute('searchform')) }}">
                    {{ form_widget(form_view) }}
                    </form>
                {% endif %}
                {{ navbar.hasMenu('rightmenu') ? knp_menu_render(navbar.getMenu('rightmenu'), {'currentClass': 'active', 'ancestorClass': 'active', 'allow_safe_labels': 'true'}) : '' }}
            </div>

        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T01:54:39.047

我花了一段时间才弄清楚这一点。

在定义名为“safe_label”的菜单项时，您可以应用一个参数。通过将此设置为 true，它会在导航栏中而不是 html 中输出图像。

```
 $image = "<img src='/path/to/image' />";
    $menu->addChild( $image , 
      array(
        'route' => 'url_route_name',
        'extras' => array(
          'safe_label' => true
        )
      )
    ); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-19T17:19:01.380

您需要先从父模板导入宏，然后才能使用它们。

```
{% block linkElement %}
    {% import 'knp_menu.html.twig' as knp_menu %}
    <a href="{{ item.uri }}"{{ knp_menu.attributes(item.linkAttributes) }}>
        <span>{{ block('label') }}</span>
    </a>
{% endblock %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-18T17:50:28.840

**要简单地添加类和其他 HTML 属性**（例如，将菜单与 Twitter Bootstrap 集成并添加其类和 ID），您可以使用为此类定制提供的方法。

以下是一些有用的资源：

*   **以下是 KNP Menu Bundle 文档中的所有详细信息：[Creating Menus: The Basics - Menu attributes](https://github.com/KnpLabs/KnpMenu/blob/master/doc/01-Basic-Menus.markdown#menu-attributes)**
*   **下面是一些具体的例子：（[在 GitHub 上）KNP Menu Bundle with Bootstrap 3 and Font Awesome 4](https://gist.github.com/nateevans/9958390)**

KnpMenuBundles 提供了一些文档化的方法，如 setAttributes、selLinkAttirbute 或 setLabelAttribute（以及其他方法），这些方法对于自定义菜单呈现很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T14:21:34.237

为什么不定义`<li>`or`<span>`元素的属性并在 css 中添加图像？**

# ruby-on-rails - 在 Rails 中的一个对象上使用 f.select 和 f.text_field？

> ID：11226964
> 
> 赞同：0
> 
> 时间：2012-06-27T13:08:08.220
> 
> 标签：ruby-on-rails, forms, models

是否可以有多个选项 egfselect 或者用户可以在一个对象上输入任何内容，例如 f.text_field ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:39:43.270

您所要求的称为组合框。在 rails 或基本 html 中没有对此的直接支持。您将需要使用 javascript。

看看这个：[jquery.combobox](http://jquery.sanchezsalvador.com/page/jquerycombobox.aspx)

# c - 复制堆栈的算法

> ID：11226970
> 
> 赞同：7
> 
> 时间：2012-06-27T13:08:19.673
> 
> 标签：c, algorithm, data-structures, stack

是否可以在不使用任何外部堆栈或数组的情况下将堆栈复制到 C 中的另一个堆栈？

我知道它可以使用递归来完成，但是在提到的约束范围内还有其他可能的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T13:14:21.263

是的，这是可能的，但需要`O(N^2)`. 考虑堆栈`S`（源）和`T`（目标）。

1.  初始化`count`为零
2.  `E`从堆栈中弹出顶部元素`S`，然后将剩余数据压入堆栈`T`，将`count`项目留在堆栈上`S`
3.  压`E`在上面`S`
4.  将元素复制`T`回`S`
5.  增量`count`
6.  如果 count 不等于 on 的项目数`S`，则返回步骤 1
7.  弹出元素`S`并推到`T`

步骤 0 到 5 反向堆叠`S`到位；第 6 步将其移至`T`，颠倒顺序并生成原件的副本。不过，这是一个破坏性的副本，因为原始堆栈现在是空的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T13:34:32.790

它不是很有效，但是是的，它是可行的。

```
Stack S = source, Stack T = target, int size = number of elements;
while(size >0 ) {
  pop size-1 elements from S (all but last), pushing them onto T (using it as temp storage)
  pop and copy the last element from S; push it back onto S;
  pop and push size-1 elements on T back to S.
  push your copy  of the last element onto T
  decrement size;
} 
```

引用 ugoren，这类似于“河内有 2 个钉子，加上恒定数量的 1 盘存储空间”的塔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T13:51:27.870

好的，我将展示我自己的可视化和从一个堆栈到另一个堆栈的真正无损复制的解决方案。

所以我们有一对堆栈`S`和`T`，我们可以想象它们像这样相互接近：

```
 ____________        _______________
    |                                  |
S   | S0 S1 S2   ........     T2 T1 T0 | T
    |____________       _______________| 
```

如果我们将整个数据结构视为单个序列`(S0, S1, S2, ...., T2, T1, T0)`，我们可以执行将特定元素从一个位置移动或复制到另一个`i`位置的动作`j`。我们如何做到这一点？我们可以像这样分小步完成这个序列：

```
void MoveLeft()
{
    T.push( S.pop() );
    curPosition--;
}

void MoveRight()
{
    S.push( T.pop() );
    curPosition++;
} 
```

然后我们可以访问任何元素，记住它，然后移动到任何其他位置并将该元素放在那里。这是辅助函数：

```
void MoveToI(int i)
{
    while( curPosition > i ) {
        MoveLeft();
    }

    while( curPosition < i ) {
        MoveRight();
    }
} 
```

因此，使用这些操作，我们基本上将序列转换`(S0,S1,S2,...,SN)`为`(S0,S1,S2,...,SN,SN,SN-1,...,S2,S1,S0)`.

这是算法：

```
curPosition = NElements;
for( int i = 0; i < NElements; ++i ) {
    MoveToI( i );
    x = T.peek();
    MoveToI(Nelements);
    T.push( x );
}

MoveToI( Nelements ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-11T08:29:43.187

这是一个 O(N) 操作，因为堆栈是一个已知开始和结束的连续区域，可以是`memlcpy()`或`memcpy_s()`从一个进程到共享内存或通过 IPC 发送。理想情况下，如果这是一些进程重播或实时迁移代码，请在执行任何操作之前检查数据结构和 ABI 是否足够接近。另外，复制堆。然后，诀窍是在某处设置一个魔术变量，以指示一个进程应该等待准备运行，而另一个应该关闭。文件句柄、互斥体、信号量和其他内核模式状态也需要复制。a) 使用更便宜`fork()`它为您完成所有这些工作，或者 b) 有一个可检查点的反应器（堆栈、堆和外部资源），它可以“停止世界”暂停所有线程并在子进程中重新启动它们，然后再杀死它。我会 fork() + exec() 并复制堆栈和堆。可能需要一个辅助入口指针补丁表（两个指针的数组：旧指针 -> 新指针），它必须修补代码、堆栈、堆、常量表，以免崩溃。

# .net - 没有端点在监听.. 无法连接到远程服务器

> ID：11226987
> 
> 赞同：1
> 
> 时间：2012-06-27T13:08:56.043
> 
> 标签：.net, wcf, service, service-reference

大家好，实际上它上周工作，但我不知道发生了什么，现在它不工作。

问题是我在不同的机器上有两种解决方案。第一个有 2 个项目，一个是 WCF 服务项目，另一个是 wpf 项目，它使用这个 localhost 服务并且工作正常。但是，当其他机器想要连接不是本地主机的服务器时，它会出现此错误。

> 下载“（地址）：8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/_vti_bin/ListData.svc/$metadata”时出错。无法连接到远程服务器 无法建立连接，因为目标计算机主动拒绝它（地址）：8732 元数据包含无法解析的引用：“（地址）：8732/Design_Time_Addresses/WcfServiceLibrary1/Service1”。在 (address):8732/Design_Time_Addresses/WcfServiceLibrary1/Service1 处没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。Unable to connect to the remote server No connection could be made because the target machine主动拒绝它（地址）：8732如果在当前解决方案中定义了服务，

我ping了我的地址，它发送和接收数据我关闭了windows防火墙

我的 app.config 是这样的

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="WSHttpBinding_IService11" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService1"
                contract="ServiceReference1.IService1" name="WSHttpBinding_IService1">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService11"
                contract="ServiceReference2.IService1" name="WSHttpBinding_IService11">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:02:00.357

为什么您使用完全相同的地址在客户端上定义了两次相同的端点？

```
<client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService1"
                contract="ServiceReference1.IService1" name="WSHttpBinding_IService1">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService11"
                contract="ServiceReference2.IService1" name="WSHttpBinding_IService11">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client> 
```

# javascript - Javascript：在特定单元格中写入

> ID：11226989
> 
> 赞同：0
> 
> 时间：2012-06-27T13:08:57.877
> 
> 标签：javascript, jquery, html

所以我在我的 div 表中有这个单元格：

```
<body>
    <div>
    <table id="TableName" width="auto">
        <thead>
            <tr>
                ...
                <th colspan="7" style="background-color: black; color: white; text-align: left;">
                    <div id="last_thursday" />
                </th>
            </tr> 
```

这段代码将最后一个星期四的日期值写入其中。

```
$(document).ready(Main);

    function Main() {
        ConfigDate();        
    }

    function ConfigDate() {
        var currentTime = new Date();
        var dayofWeek = currentTime.getDay();

        var daysSinceThursday = (dayofWeek + 3) % 7
        var lastThursday = new Date(currentTime.GetDate() - daysSinceThursday);
        var dd = lastThursday.getDate();

        var mm = lastThursday.getMonth() + 1;
        var yyyy = lastThursday.getFullYear();

        $("#last_thursday").text(yyyy + " / " + mm + " / " + dd);
    } 
```

有人可以告诉我我在这里做错了什么，因为我的代码根本没有写在我的单元格中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:12:09.003

我收到 javascript 错误：

```
Uncaught TypeError: Object Wed Jun 27 2012 14:14:28 GMT+0100 (BST) has no method 'GetDate' 
```

当我运行它时。我相信这个方法是`getDate()`用一个小`g`的获取。

Javascript 控制台是您的朋友。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:14:59.137

控制台说：

```
Uncaught TypeError: Object (...) has no method 'GetDate' 
```

改用`getDate`：http: [//jsfiddle.net/6axfn/1/](http://jsfiddle.net/6axfn/1/)。

# asp.net-mvc-3 - 为什么回收应用程序池时没有释放 IIS 应用程序的系统内存消耗？

> ID：11226990
> 
> 赞同：0
> 
> 时间：2012-06-27T13:08:59.013
> 
> 标签：asp.net-mvc-3, c#-4.0, iis-7, memory-leaks

我正在尝试调试我们的一个生产应用程序中可能存在的内存泄漏。

在我们的生产服务器上，我有一个在其自己的应用程序池中运行的 .Net 应用程序。回收应用程序的应用程序池和 ASP.Net v4.0 应用程序池不会释放使用的内存。

只有当我重新启动 IIS 服务器时才会释放内存资源。

想知道为什么会这样，我可以在服务器上使用哪些推荐的分析工具来检测是否存在内存泄漏？

此外，当我添加新的二进制文件（重新编译代码并将新的 DLL 添加到 bin 文件夹）时，应用程序级计数会重置，但内存不会。

# vba - VBA - 如果范围包括值然后 Array(i) = 1，循环，求和

> ID：11226992
> 
> 赞同：2
> 
> 时间：2012-06-27T13:09:05.173
> 
> 标签：vba, excel

我是 VBA 新手，但以前有 PHP 编程逻辑和各种统计编程语法方面的经验。我正在尝试编写代码来搜索一系列单元格范围以查找特定值 - 如果该值存在于范围中，我希望它将 1 插入数组，如果不插入 0。

我的数据看起来像：

```
**Item  R1  R2**
1121    1   3
1121    2   
1121        
1121    3   2
1121    3   
1122    4   5
1122    3   5
1122    5   
1122    4   
1122    5 
```

我的最终目标是能够对数组中的值求和并计算每个评分的项目总数。例如，在上面的示例中，我希望能够生成：

> 评分为 1 = 1 的项目数
> 
> 评分为 2 = 1 的项目数
> 
> 评分为 3 = 2 的项目数
> 
> 等等。

我写的代码是：

```
Sub Items()

    Dim myArray() As Variant
    Dim i As Integer
    Dim k As Integer
    i = 0
    k = 0
    R5 = Range("G(2+k):H(6+k)")
    mycount = Application.WorksheetFunction.Sum(myArray)

    Sheets("Operational").Select

    For Each R5 In Range("G2:H206")
        ReDim myArray(0 To i)
        myArray(i) = Cell.Value
        i = i + 1
        k = k + 4

        R5.Select
        If R5.Value = "1" Then
            myArray(i) = 1
        Else
            myArray(i) = 0
        End If
    Next

End Sub 
```

每个项目我有 5 行，所以我认为我可以将其作为一个重复的、一致的循环来处理。但是，当我尝试运行它时出现错误 - “应用程序定义的或对象定义的错误”。

我知道这可能不是最好的方法，而且我对此很陌生，我不知道从哪里开始进行故障排除。任何帮助将非常感激。

另外，如果有人对 VBA 结构/代码或初学者教程有很好的参考，请告诉我！我没有太多运气找到任何好的参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:09:58.807

如果我正确阅读了您的要求，则无需 VBA，您就可以非常轻松且更简单地做到这一点。

这是解决方案的屏幕截图。

H:K 列对每个项目的每个评级列执行 CountIf（请参见公式栏）。G 列是每个评级的简单 H:K 总和。

![在此处输入图像描述](../Images/f3810b65316ab37c984addb06a0e70d5.png)

**更新**

为了按项目反映评级，非 VBA 方法变为：

![在此处输入图像描述](../Images/eee3aff310a8106b89371523c7ce8e13.png)

您可能可以重新安排或修改它以使其更漂亮。此外，您可以通过将项目编号复制到新范围并使用删除重复项（XL2007 及更高版本）或高级过滤器 > 唯一值 (XL2003) 来获得唯一的项目编号列表。此外，如果您使用的是 XL 2003，CountIF 将不起作用，您需要使用**=Count(If(**数组公式。如果需要，我可以解释一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:19:12.087

您需要更改一些内容才能完成这项工作。我在下面的代码中更改/添加了注释...

```
Option Explicit ' Helps with ensuring all variables are declared correctly.

' Need to add reference to 'Microsoft Scripting Runtime' when using Scripting.Dictionary

Sub Items()

Dim Ratings As Range
Dim cell As Range
Dim ItemTracking As New Scripting.Dictionary
Dim DictKey As Variant

    ' Use SET to assign objects
    Set Ratings = ActiveSheet.Range("B2:H206") ' The Range takes (in this case) a complete STRING argument, which can be manipulated with variables through concatenation with '&'.

    For Each cell In Ratings ' First column is R1, second is R2, etc.
        If Len(Trim$(ActiveSheet.Range("A" & cell.Row).Value)) > 0 Then ' Make sure we actually have an item before continuing...
            If Val(cell.Value) > 0 Then ' Make sure we have a rating before continuing...
                DictKey = Trim$(ActiveSheet.Range("A" & cell.Row).Value) & "R" & cell.Column - 1 & "V" & Val(cell.Value) ' If you need a more descriptive output than '1121 R1V1`, then just change this to match. Be careful of the string concatenation/variable usage.
                If ItemTracking.Exists(DictKey) Then ' When using a Dictionary (versus a Collection), we have the nifty Exists() function to help us see if we already have something.
                    ' If we do, add to it...
                    ItemTracking.Item(DictKey) = ItemTracking.Item(DictKey) + 1
                Else
                    ' Else, we do not, add it to the Dictionary.
                    ItemTracking.Add DictKey, 1
                End If
            End If
        End If
    Next

    For Each DictKey In ItemTracking
        Debug.Print DictKey & " - " & ItemTracking.Item(DictKey)
    Next

End Sub 
```

我已经用`Scripting.Dictionary`来得到这个。要使用，您需要引用该`Microsoft Scripting Runtime`库（请参阅代码中的注释）。这并没有多大用处，只是将结果打印到即时窗口，但我认为你可以修改以获得你需要的东西。