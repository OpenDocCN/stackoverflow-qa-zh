# StackOverflow 问答 10215000-10215999

# jquery - each() 和 prev() 可以一起使用吗？

> ID：10215000
> 
> 赞同：-2
> 
> 时间：2012-04-18T17:47:40.640
> 
> 标签：jquery, each

我的代码中有一些 div，我想循环它们检查最后一个的实际情况。

为什么这不起作用？

```
<div class="tarefa">1</div>
<div class="tarefa">2</div>
<div class="tarefa">3</div>

<script>
    $(function() {

        i = 0 ;  
        $('.tarefa').each(function(index) {
            i++;
            if($(this).css("left") == $(this).prev('.tarefa').css("left")){
                alert(i);
            }
        });
    });
</script> 
```

这`$(this).prev('.tarefa').css("left")`总是不确定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:50:54.700

如果您包含了您的 HTML，那么我们可以更直接地回答。我发现您的代码存在两个潜在问题。

1）当比较 .each() 中的第一项时，可能没有 .prev() 所以你要求`.css("left")`一个空的 jQuery 对象。这充其量是未定义的，可能无法通过平等测试，但通常不是一个好主意。

2）如果您的所有`.tarefa`对象都不是没有中间对象的直接兄弟，那么`$(this).prev('.tarefa')`就没有按照您的期望进行。

如果您检查[jQuery 文档，`.prev()`](http://api.jquery.com/prev/)则仅当它与该类匹配时才会获取上一个兄弟。它不会在您的 jQuery 对象中获取上一项，因此如果您的 .tarefa 对象不是彼此的直接兄弟，您的代码将无法按预期工作。

您可以针对此版本的这两个问题修复代码：

```
$(function() {

    i = 0 ;  
    var items = $('.tarefa');
    items.each(function(index) {
        i++;
        if(index > 0 && $(this).css("left") == items.eq(index-1).css("left")){
            alert(i);
        }
    });
}); 
```

**稍后编辑：**

使用您在评论中添加的 HTML，您的原始代码将真正起作用。第一次通过`.each()`.prev() CSS 值将得到一个未定义的值，但它会适当地使您的比较失败，并且您的原始代码将实际工作。我不会推荐它，因为这是一种更安全的方法，而且性能可能也会更好一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:50:45.957

循环第一次运行时，当`this`使用 class 引用 DOM 中的第一个元素时`tarefa`，没有带有 class 的前一个元素`tarefa`- 因此`.prev('.tarefa')`不会选择任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:57:00.803

你应该可以一起使用它们。这个例子有效：

```
<script type="text/javascript">
    ​$(function(){
        $(".test").each(function(index){
            if (index){
                alert($(this).prev().text());
            }            
        });        
    });​
</script>
​&lt;div class="test" style="background-color:yellow;">Test 1</div>
<div class="test" style="background-color:blue;">Test 2</div>
<div class="test" style="background-color:green;">Test 3</div>​ 
```

这是[jsFiddle](http://jsfiddle.net/US7EH/)

# java - netty 中 ChannelBuffer.copy() 和 ChannelBuffer.duplicate() 有什么区别

> ID：10215001
> 
> 赞同：1
> 
> 时间：2012-04-18T17:47:43.913
> 
> 标签：java, netty

ChannelBuffer.copy() 和 ChannelBuffer.duplicate() 有什么区别？

在[netty 的多个处理程序中，](https://stackoverflow.com/questions/10197714/multiple-handlers-in-netty)我最终遇到了一个问题，如果我传递了 ChannelBuffer 的副本或者我在其上调用了副本，则该问题已解决，但我不确定应该使用哪个，并且 javadoc 没有帮助知道我应该使用哪一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:52:47.017

`copy()`创建一个全新的缓冲区（逐字节）。

`duplicate()`创建一个共享原始缓冲区数据的缓冲区，但具有自己的索引。

# c++ - c++朋友继承

> ID：10215004
> 
> 赞同：0
> 
> 时间：2012-04-18T17:47:55.427
> 
> 标签：c++, inheritance, virtual, friend

我知道这`friend`不是继承的。我有课`Parent Person Child`。Parent 和 Person 是彼此的朋友。父母具有以下保护功能...

```
class Person
{
    friend class Parent;
    public:
        Parent * parent;
}

class Parent
{
    friend class Person;
    protected:
        virtual void Answer() = 0;
}

class Child : public Parent
{
    void Answer()
    {
        std::cout << "Child!" << endl;
    }
} 
```

我的问题是，如果没有继承友谊，我怎么能拥有以下......？（人有一个指向父母的指针）

```
Person person;
Child child;
person.parent->Answer(); 
```

为什么是这个 Child! 的输出，并且在尝试访问虚函数时不会抛出运行时错误？

我对如何实现孩子的功能感到困惑，并且程序在运行时没有出错，因为我预计它正在尝试调用父母的虚拟应答功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:05:23.813

你没有访问，`Child::Answer`但`Parent::Answer`在这里，没关系，因为`Parent`是你的朋友。这是一个`Child`对象这一事实并不重要。但是，在运行时实际调用什么方法很重要。因为`Parent::Answer`is `virtual`，用它覆盖它`Child::Answer`意味着不知道 a 是什么的调用者即使通过引用或指针访问`Child`仍然会调用（有一个间接层可以在运行时解析适当的函数）。`Child::Answer``Child``Parent`

你甚至可以在实现之前编译它`Child`，然后链接到这个`.o`文件，给它一个`Child`实例，伪装成`Parent&`or `Parent*`。`Person`将永远没有机会甚至*知道*有什么叫做`Child`但仍然能够“找到”正确的实现。这就是动态绑定的威力。

# assembly - 使用 GNU Assember 英特尔语法进行内存寻址

> ID：10215006
> 
> 赞同：8
> 
> 时间：2012-04-18T17:48:05.367
> 
> 标签：assembly, gnu-assembler, intel-syntax

我阅读[了这个页面](http://www.lxhp.in-berlin.de/lhpas86.html)，其中列出了 GAS 的 Intel 和 AT&T 语法之间的差异，但它没有涵盖仅指定具有位移的地址的情况。

在这里，我用 AT&T 语法组装了四行：

```
 .text
0000 48C7C008000000      mov    $8, %rax
0007 488B042508000000    mov    (8), %rax
000f 4889F0              mov    %rsi, %rax
0012 488B06              mov    (%rsi), %rax 
```

正如预期的那样，前两行是不同的。第一个将立即数 8 移入 rax，第二个将地址 8 的内容移入 rax。但是使用英特尔语法，我得到以下奇怪的行为：

```
 .text
                         .intel_syntax
0000 48C7C008000000      mov    %rax, 8
0007 48C7C008000000      mov    %rax, [8]
000e 4889F0              mov    %rax, %rsi
0011 488B06              mov    %rax, [%rsi] 
```

这里第一行和第二行组装成*相同*的机器代码！首先我认为方括号是错误的，所以我在测试中添加了第三和第四行，至少在涉及寄存器时，方括号确实可以用于内存寻址。

我读过的所有文档都显示了内存寻址示例，其中至少有一个基址或索引寄存器，有时还有比例和位移，但绝不是只有位移。

我确实有使用 NASM 汇编器的英特尔语法的经验，它*确实*区分`mov rax, 8`和`mov rax, [8]`.

这是 GAS 中的错误吗？或者如果不是，我如何指定 NASM 的等价物`mov rax, [8]`？

我意识到指定仅位移地址可能并不常见，但我想使用这种语法全面了解所有内存寻址形式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:11:41.263

确实存在这样的错误`gas`- 请参阅[http://sourceware.org/bugzilla/show_bug.cgi?id=10637](http://sourceware.org/bugzilla/show_bug.cgi?id=10637)。

它似乎已在 binutils 2.21.51 中（或之前）修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:33:13.533

您在这里看到了 AT&T 语法的一个非常特殊的极端情况。通常，对于地址操作数，您有：

```
<op> [ src, ] displacement(base,index,scale) [, tgt ] 
```

AT&T 语法中地址操作数的任何组成部分都是可选的，因此您可以编写`mov (%rax, %rbx), ...`或`mov 0(%rax, %rbx, 1), ...`任何其他此类组合。

*在*括号内，`()`您通常可以拥有的唯一数字是比例因子（如果存在）。

但汇编器也接受（并为其创建相同的代码）：

```
mov <absolute>, ...
mov (<absolute>), ... 
```

仅当 中的操作数`()`是简单的数字/绝对地址时才有效，否则汇编程序会抱怨您给出的不是有效的比例因子。这种等价是 AT&T 语法中的一种*特殊情况*——我不知道为什么它是/被允许的。

但是，AT&T 语法中的使用`$`总是指定一个*常量*，而不是地址操作数，这与英特尔语法中的*裸数字相同。*

下面说明了等价关系：

```
$ cat t.s
        mov     (8), %rax
        mov     $8, %rax
        mov     8, %rax
.intel_syntax
        mov %rax, [ 8 ]
        mov %rax, 8
        mov %rax, %ds:8

$ objdump -w -d t.o

t.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <.text>:
   0:   48 8b 04 25 08 00 00 00         mov    0x8,%rax
   8:   48 c7 c0 08 00 00 00            mov    $0x8,%rax
   f:   48 8b 04 25 08 00 00 00         mov    0x8,%rax
  17:   48 8b 04 25 08 00 00 00         mov    0x8,%rax
  1f:   48 c7 c0 08 00 00 00            mov    $0x8,%rax
  26:   48 8b 04 25 08 00 00 00         mov    0x8,%rax

$ objdump -w -M intel -d t.o

t.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 :
   0:   48 8b 04 25 08 00 00 00         mov    rax,ds:0x8
   8:   48 c7 c0 08 00 00 00            mov    rax,0x8
   f:   48 8b 04 25 08 00 00 00         mov    rax,ds:0x8
  17:   48 8b 04 25 08 00 00 00         mov    0x8,%rax
  1f:   48 c7 c0 08 00 00 00            mov    rax,0x8
  26:   48 8b 04 25 08 00 00 00         mov    rax,ds:0x8
```

# android - 没有图像资源时无法设置图像视图的背景颜色

> ID：10215008
> 
> 赞同：4
> 
> 时间：2012-04-18T17:48:06.457
> 
> 标签：android, android-imageview, setbackground

我想为 ImageView 设置背景颜色，当 imageview 有图像资源时，它可以工作并且我得到我的背景颜色但是当图像视图没有图像资源时，SetBackgroundColor 不起作用并且什么也不做，这是我的代码：

xml布局：

```
 <ImageView android:layout_centerHorizontal="true"
        android:id="@+id/favor_item_image" 
        android:layout_alignParentTop="true" android:layout_height="wrap_content"
        android:layout_width="match_parent" android:adjustViewBounds="true"/> 
```

爪哇代码：

```
 ImageView favorImage = (ImageView) MyView.findViewById(R.id.favor_item_image);  
       //favorImage.setImageResource(R.drawable.btndelete);
       favorImage.setBackgroundColor(Color.argb(255,255,0,0)); 
```

所以，当我评论这一行时： //favorImage.setImageResource(R.drawable.btndelete); 我无法设置图像视图背景颜色，但是当我取消注释此行时，setBackgroundColor 工作正常。

请提供任何帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:52:13.247

您没有看到任何内容的原因是您将 layout_height 设置为 wrap_content。当您没有在 ImageView 上设置图像时，wrap_content 将高度设置为 0。如果您希望在没有图像的情况下显示颜色，则必须将 layout_height 设置为实际值，例如 50dp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:52:28.657

您`ImageView`的高度为`wrap_content`，当您只设置背景颜色时，它没有内容。因此不出现。您应该能够通过设置不同的高度来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:51:55.377

尝试设置：`android:adjustViewBounds=false`我可能弄错了，但是当它设置为`true`视图时，如果没有图像，它可能会缩放到 0 宽度和 0 高度。

# php - 依赖注入模式在控制类中似乎很极端

> ID：10215010
> 
> 赞同：2
> 
> 时间：2012-04-18T17:48:07.720
> 
> 标签：php

我的控制类基本上选择要实例化的对象/类。因为这基本上就是它所做的，所以它自然有许多它调用的对象/类。

如果我使用依赖注入，我将注入所有这些对象。这似乎很糟糕，原因有两个。

1.  我听说大约 3 个依赖对象/类对 KISS 来说是正常的（保持简单聪明）

2.  只会使用其中一个对象/类。因此，从某种意义上说，其他人无缘无故地被实例化。

我如何解决这些设计考虑以满足 - 解耦代码，但简单且使用的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:42:38.230

您所做的是实际上将某些参数映射到某些功能上，即所谓的*script*或*action*。

所以最后你只需要一个约定如何将该参数或名称映射到某个函数上。由于函数可以在某个地方（在某个其他对象中，在全局空间中，匿名），您实际上并不需要将许多对象注入到您的控件类中，而是函数和映射。

如果您甚至要使用函数名称和参数（或“模块”和“操作”）添加更多差异化，那么您可以大大减少代码，并且实际上可以使请求注入依赖项：

**脚本或动作**

```
 Mapping:                  Actions:                  

 "*"                       "_.Exception.Invalid ajax_type"                        
 "signin_control"          "A.SignIn.invoke"
 "signup_control"          "A.SignUp.invoke"  
 "tweet_control"           "A.Tweet.add"      
 "ControlBookmark_add"     "A.Bookmark.add"   
 "ControlBookmark_delete"  "A.Bookmark.delete"
 "ControlTryIt"            "B.ControlTryIt"   
 "ControlSignOut"          "C.SignOut"

 Implementation:

 $action = $map[isset($map[$ajax_type]) ? $ajax_type : '*'];

 Session::start();

 call_user_func_array(
     'call_user_func_array',
     explode('.', $action) + array(NULL, NULL, NULL)
 );

 function _($a, $b) {
     throw new $a($b);
 }

 function A($a, $b) {         
     $maker = new ObjectMaker();
     $maker->$a()->$b();
 }

 function B($a) {
     new $a();
 }

 function C($a) {
    Session::finish();
    B($a);
 } 
```

这个伪代码展示了你的控件类的实际业务：根据它的输入调用一些函数。具体的依赖是：

*   `ObjectMaker`
*   `Session`
*   `$map`

由于会话是静态的，您应该将其替换为实际可以注入的内容。

作为`$map`一个数组，它可以被注入，但是映射的逻辑可能需要变得更加内部，所以如果`$map`是一个`ArrayAccess`，这可能已经发生了。

非具体的依赖隐藏在实际的内部`$ajax_type`，所以这些依赖通过映射依赖于那个参数，这已经是一个依赖。所以最后一个依赖是：

*   `$ajax_type`

这种依赖关系与控制类和映射有关。因此，控制类本身也可以成为 ajax 类型的依赖项。但是当您使用静态全局函数时，我将在类函数中对其进行简化，以便实际上可以将依赖项传递给它。我将工厂放入全局函数中，并从 ini 文件加载 ajax 类型：

```
function ajax_control_factory($inifile)
{
    $maker   = new ObjectMaker();
    $session = new SessionWrap();
    $types   = new AjaxTypesIni($inifile);
    return new AjaxControl($maker, $session, $types);
}

$control = ajax_control_factory($inifile);

printf("Call an nonexistent ajax type: ");
try {
    $control->invokeByType('blurb');
    printf(" - I so failed!\n");
} catch (Exception $e) {
    printf("Exception caught! All good!\n");
}

printf("Add me a bookmark: ");
$control->invokeByType("ControlBookmark_add");
printf("Done! Fine! Superb this works!\n");
printf("Do the two control functions: ");

$control->invokeByType("ControlTryIt");
$control->invokeByType("ControlSignOut");
printf("Done! Fine! Superb this works!\n"); 
```

.ini文件：

```
*                       = _.Exception.Invalid ajax_type
signin_control          = A.SignIn.invoke
signup_control          = A.SignUp.invoke
tweet_control           = A.Tweet.add
ControlBookmark_add     = A.Bookmark.add
ControlBookmark_delete  = A.Bookmark.delete
ControlTryIt            = B.ControlTryIt
ControlSignOut          = C.SignOut 
```

要进行这项工作，这需要一些用于模拟的存根，这在您的示例中很容易：

```
class Mock
{
    public $stub;

    public function __call($name, $args)
    {
        return class_exists($this->stub) ? new $this->stub() : $this->stub;
    }
}

class ObjectMaker extends Mock
{
    public $stub = 'Mock';
}

class ControlTryIt {}
class SignOut {}

class SessionWrap
{
    public function start()
    {
        // session::start();
    }

    public function stop()
    {
        // session::finish();
    }
} 
```

这些足以运行上面的代码，它将给出：

```
Call an nonexistent ajax type: Exception caught! All good!
Add me a bookmark: Done! Fine! Superb this works!
Do the two control functions: Done! Fine! Superb this works! 
```

ajax 类型：

```
class AjaxTypes extends ArrayObject
{
    private $default;
    private $types;

    public function __construct(array $types, $default)
    {
        parent::__construct($types);
        $this->default = $default;
    }

    public function offsetGet($index)
    {
        return parent::offsetExists($index) ? parent::offsetGet($index) : $this->default;
    }
}

class AjaxTypesIni extends AjaxTypes
{
    public function __construct($inifile)
    {
        $map = parse_ini_file($inifile);
        if (!isset($map['*'])) throw new UnexpectedValueException('No * entry found.');
        $default = $map['*'];
        unset($map['*']);
        parent::__construct($map, $default);
    }
} 
```

和 ajax 控制器：

```
class AjaxControl
{
    private $types;
    private $maker;
    private $session;

    public function __construct(ObjectMaker $maker, SessionWrap $session, AjaxTypes $types)
    {
        $this->types   = $types;
        $this->maker   = $maker;
        $this->session = $session;
    }

    public function invokeByType($type)
    {
        $session = $this->session;
        $maker   = $this->maker;
        $invoke = function($action) use ($session, $maker)
        {
            $_ = function($a, $b)
            {
                throw new $a($b);
            };
            $A = function($a, $b) use ($maker)
            {
                $maker->$a()->$b();
            };

            $B = function ($a)
            {
                new $a();
            };

            $C = function ($a) use ($B, $session)
            {
                $session->stop();
                $B($a);
            };

            $args = explode('.', $action) + array(NULL, NULL, NULL);
            $func = array_shift($args);
            call_user_func_array(${$func}, $args);
        };
        $invoke($this->types[$type]);
        $this->session->start();
    }
} 
```

这只是示例性的。仅出于演示目的，无法保证这适合您的需求设计。它表明您的实际控制器功能不够规范化/模块化。当您更好地分析存在的依赖关系并注入它们而不是硬编码它们时，您将自动找到设计系统的最佳*方法*。

此示例还显示，您对请求和响应有大量隐藏的依赖项。您确实需要在某处画线并定义您经过的地方和方向。告别全局静态。总是注入。如果有帮助，您甚至可以从需要所有内容作为参数的函数开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:54:48.593

**解决了：**

通过将依赖注入置于工厂模式 (Object Maker) 中，我可以将所有依赖项提取到一个依赖项 - Object Maker - 请注意下面。

**PHP 控制**

```
class Control
{
    public static function ajax($ajax_type)
    {
        Session::start();
        switch($ajax_type) 
        {
            case 'signin_control': // uses Message, Text, Database
                $Object = new ObjectMaker();
                $ObjectSignIn=$Object->makeSignIn();
                $ObjectSignIn->invoke();
                break; 
            case 'signup_control':// uses Message, Text, Database
                $Object = new ObjectMaker();
                $ObjectSignUp=$Object->makeSignUp();
                $ObjectSignUp->invoke(); 
                break;
            case 'tweet_control':// uses Message, Text, Database
                $Object = new ObjectMaker();
                $ObjectTweet=$Object->makeTweet();
                $ObjectTweet->add(); 
                break; 
            case 'ControlBookmark_add': // uses Message, Text, Database
                $Object = new ObjectMaker();
                $ObjectBookmark = $Object->makeBookmark();
                $ObjectBookmark->add();
                break; 
            case 'ControlBookmark_delete':// uses Database
                $Object = new ObjectMaker();
                $ObjectBookmark=$Object->makeBookmark();
                $ObjectBookmark->delete(); 
                break; 
            case 'ControlTryIt': // Why Not Session
                new ControlTryIt();
                break; 
            case 'ControlSignOut': 
                Session::finish();
                new ControlSignOut();
                break;
            default:
                throw new Exception('Invalid ajax_type');
        }
    } 
```

**对象制造者**

```
class ObjectMaker
{
    public function makeSignUp()
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();

        $SignUpObject = new ControlSignUp();        
        $SignUpObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $SignUpObject;
    }
    public function makeSignIn()
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();

        $SignInObject = new ControlSignIn();
        $SignInObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $SignInObject;
    }
    public function makeTweet( $DatabaseObject = NULL, $TextObject = NULL, $MessageObject = NULL )
    {
        if( $DatabaseObject == 'small' )
        {
            $DatabaseObject = new Database();
        }
        else if( $DatabaseObject == NULL )
        {
            $DatabaseObject = new Database();
            $TextObject = new Text();
            $MessageObject = new Message();
        }
        $TweetObject = new ControlTweet();        
        $TweetObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $TweetObject;
    }
    public function makeBookmark( $DatabaseObject = NULL, $TextObject = NULL, $MessageObject = NULL )
    {
        if( $DatabaseObject == 'small' )
        {
            $DatabaseObject = new Database();
        }
        else if( $DatabaseObject == NULL )
        {
            $DatabaseObject = new Database();
            $TextObject = new Text();
            $MessageObject = new Message();
        }
        $BookmarkObject = new ControlBookmark();        
        $BookmarkObject->setObjects($DatabaseObject,$TextObject,$MessageObject);
        return $BookmarkObject;
    }
} 
```

# c# - 基类或派生类是运行时类型？

> ID：10215011
> 
> 赞同：0
> 
> 时间：2012-04-18T17:48:09.933
> 
> 标签：c#, .net, clr

我一直在阅读有关`virtual`方法的文档：

> 在虚拟方法调用中，发生该调用的实例的运行时类型决定了要调用的实际方法实现。在非虚拟方法调用中，实例的编译时类型是决定因素。**准确地说，当在编译时类型为 C 和运行时类型为 R（其中 R 是 C 或从 C 派生的类**）的实例上使用参数列表 A 调用名为 N 的方法时，调用是处理如下...： http: [//msdn.microsoft.com/en-us/library/aa645767 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645767(v=vs.71).aspx)

但是，我注意到上面加粗的东西。假设我们有这样的代码：

```
class Planet{
  public string Name;
  public float Size;
  public virtual void SpinPlanet(){
     Console.WriteLine("Hoooraaay!!!");
  }
}

class Earth : Planet{

} 
```

在我的代码中某处我做：

```
Earth world = new Earth();
world.SpinPlanet(); 
```

在这种情况下：

*   **N**是`SpinPlanet()`
*   **C**是`Earth`
*   **R**是`Planet`

那么怎么会`R`派生出编译时类型的类呢`C`。基类类型不是在运行时解析的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:55:04.770

你错了——编译时类型（C）是`Earth` *，*运行时类型（R）*也是* `Earth`。您指出的规范部分在这里并不真正相关。

相关的是[http://msdn.microsoft.com/en-us/library/aa691356(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691356(v=vs.71).aspx)，具体来说：

> 构造方法调用的候选方法集。从与 M 相关联的一组方法开始，这些方法是通过先前的成员查找（第 7.3 节）找到的，该组被简化为适用于参数列表 A 的那些方法。

just的唯一候选实现`SpinPlanet`恰好在 的基类中`Earth`，而不是派生类中。

如果代码是，您引用的规范部分将适用：

```
Planet world = new Earth();
world.SpinPlanet(); 
```

（特别是如果 Earth 为 定义了覆盖`SpinPlanet`），因为编译类型（变量的类型）将是`Planet`，但运行时类型将是`Earth`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:52:38.327

*调用*的正确方法将在运行时通过从[Virtual Methods Table](http://en.wikipedia.org/wiki/Virtual_method_table)中选择来解决。所以如果你添加到`Earth`

```
class Earth : Planet{
   public override void SpinPlanet(){
     Console.WriteLine("Hoooraaay Earth!!!");
  }
} 
```

在这样的代码上

```
Planet world = new Earth();
world.SpinPlanet(); //even if declared type Planet, 
                    // the real type remain Earth, so its  method will be called 
```

将被调用`Earth's`方法。

在*我的*示例中，编译时类型是`Planet`，但运行时类型是`Earth`.

在*您的*示例中，编译时和运行时类型是相同的`Earth`。

# php - 从 Facebook 好友列表中检索 Castleville 邻居的应用程序

> ID：10215026
> 
> 赞同：1
> 
> 时间：2012-04-18T17:49:28.780
> 
> 标签：php, facebook, facebook-fql, app-id

我正在开发一个 php 应用程序来创建我玩 Castleville 的 Facebook 朋友的列表。我成功地将我的项目设置为连接到 Facebook，并执行 FQL 查询以检索我所有的 Facebook 朋友：

```
// other stuff, init, etc...

$fql =
"SELECT uid, name, pic_square
FROM user
WHERE uid IN
(SELECT uid2 FROM friend WHERE uid1 = me())";

$param = array(
        'method'    => 'fql.query',
        'query'     => $fql,
        'callback'  => ''
    );

//  query facebook
$fqlResult = $facebook->api($param);

//  parse results
foreach ($fqlResult as $values) {
   // process values 
} 
```

...

Castleville 有 app_id = 107040076067341

我想知道如何查询应用程序表以达到预期的结果。

任何帮助，将不胜感激。

...

...

后期编辑：（成功）

谢谢你的帮助，它真的很有用。我更改了代码以从每个朋友的流中检索条目，并检查 app_id 是否是 Castleville 的。对于我的每个朋友，我运行了以下 FQL 查询：

```
$fql_select_stream =
"SELECT attribution
FROM stream
WHERE source_id = " . $values['uid'] . " and app_id = " . CASTLEVILLE_APP_ID . " limit 1";

// $values['uid'] is the facebook user ID for the friend

$res = $facebook->api(array(
                'method'    => 'fql.query',
                'query'     => $fql_select_stream,
                'callback'  => '')); 
```

如果 $res 不为空...我们有一个活跃的 Castleville 玩家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:54:36.887

除非您代表同一个应用程序进行 API 调用，否则您无法查看用户的朋友是否使用特定应用程序我在这里的回答中解释了重新询问：http: [//facebook.stackoverflow.com/a/7957310/21062](http://facebook.stackoverflow.com/a/7957310/21062)

Aso 相关：[是否可以对拥有特定手机的朋友的 FQL 列表？（来自 wallpost 来源的查询）](http://facebook.stackoverflow.com/questions/6691025/is-it-possible-to-fql-list-of-friends-who-own-specific-phone-query-from-wallpo/6774447#6774447) -有人想知道如何查看用户的哪些朋友使用某些手机-我建议他们检查用户的新闻提要并查看哪些应用发布了帖子。在您的情况下，您可以检查用户的任何朋友是否已将 Castleville 中的内容发布到他们的时间线上

# algorithm - 是否有多项式时间算法来测试某个数是否为某个数的指数？

> ID：10215034
> 
> 赞同：2
> 
> 时间：2012-04-18T17:49:58.860
> 
> 标签：algorithm, analysis, computation-theory

只要研究那篇著名的论文`PRIMES is in P`，就会感到困惑。

所提出算法的第一步是`If (n=a^b for nature number a and b>1), output COMPOSITE.`由于整个算法在多项式时间内运行，因此这一步也必须在 O((log n)^c) 内完成（给定输入大小为 O(log n)。但是，我无法弄清楚谷歌搜索后命中目标的任何算法。

问题：

是否有任何算法可用于测试多项式时间内某个其他数字的指数是否为指数？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:27:42.163

如果`n=a^b`（对于 a > 1）然后 b ≤ log [2] n，我们可以检查 all`b`的小于`log n`来测试这个，我们可以迭代以查找`b`从 2 到 log n，并且为了找到`a`我们应该在 1..平方（n）。但是二分查找需要 O( `logn`) 时间进行迭代，最后在每个搜索步骤中（对于任何找到`a`的检查）我们应该检查是否 a ^b == n 并且这需要 O(log n)，所以总搜索时间将为 O （日志³ ñ）。可能有更快的方法，但是通过知道[AKS](http://en.wikipedia.org/wiki/AKS_primality_test)是 O(log ⁶ n) 这个 O(log ³ n) 不会伤害任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:23:11.920

如果存在 b^e = n 的 b 和 e，则数 n 是完美幂。例如 216 = 6^3 = 2^3 * 3^3 是完美幂，但 72 = 2^3 * 3^2 不是。确定一个数是否为完美幂的诀窍是要知道，如果该数是完美幂，则指数 e 必须小于 log2 n，因为如果 e 大于则 2^e 将大于 n。此外，只需要测试素数 e，因为如果一个数是复合指数的完美幂，它也将是复合分量的素因数的完美幂；例如，2^15 = 32768 = 32^3 = 8^5 是一个完美的立方根，也是一个完美的五次根。因此，该算法是制作一个小于 log2 n 的素数列表并测试每个素数。由于 log2 n 很小，并且素数列表更小，因此即使对于较大的 n，这也没什么用。

[你可以在这里](http://programmingpraxis.com/2012/03/13/perfect-power-predicate/)看到一个实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T18:48:33.343

```
public boolean isPerfectPower(int a) {
    if(a == 1) return true;
    for(int i = 2; i <= (int)Math.sqrt(a); i++){
        double pow = Math.log10(a)/Math.log10(i);
        if(pow == Math.floor(pow) && pow > 1) return true;
    }
    return false;
} 
```

# visual-studio-2010 - 多个解决方案/项目引用公共程序集的最佳方式是什么？

> ID：10215035
> 
> 赞同：1
> 
> 时间：2012-04-18T17:49:59.653
> 
> 标签：visual-studio-2010, reference

我有几个 Visual Studio 解决方案/项目（一些 VB，一些 C#），它们在设计时都引用了一个通用 DLL。此 DLL 不必复制到输出文件夹，因为它仅在编写代码时需要。每隔几个月，这个 DLL 就会更新到更新的版本，我的所有项目都需要引用更新的版本。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:56:38.653

您必须使用在 GAC（全局程序集缓存）中共享的共享程序集。

比如说，你已经编写了一个类、一个软件，无论你有什么，你想让它成为一个共享的程序集。

首先，您通过在 VS 中创建一个新的类库项目并将所有代码传输到该项目来使其成为一个程序集。不要构建/运行它！请注意，我们只是传输代码，但尚未实际制作程序集（.DLL 文件），因为我们尚未构建项目。

在构建程序集之前，我们必须通过两个步骤创建/共享一个已知程序集的密钥：

a) 通过在 VS cmd 中执行以下 cmd 来创建密钥：

sn -k "C:[DirectoryToPlaceKey][KeyName].key" b) 通过将以下属性添加到类库项目的属性文件夹中的 AsseblyInfo.vb/cs 文件来共享它：

在 VB.Net 中：

在 C# 中：

[Assembly: AssemblyKeyFile("C:[directory contains the key file][KeyName].key")] （只需将其复制并粘贴到 AssemblyInfo.vb/cs 文件中，但改写您的目录和文件名）。

现在，您通过构建项目来制作程序集。只需构建项目（至少按 F5 一次！）。通过这样做，我们需要的 .dll 文件（程序集）在项目的同一文件夹中的“bin”文件夹中创建。

现在我们通过将 .dll 文件复制到 GAC 中来共享它（全局程序集缓存：它是所有程序集聚集在一起的地方。目录是：“C:\windows\Microsoft.Net\assembly\GAC_MSIL”但你没有需要知道，因为下面的工具会为您执行此操作~）通过在 VS cmd 中执行以下命令：

gacutil -I "C:[PathToBinDirectoryInVSProject]\myGAC.dll"

你完成了！您现在可以从所有应用程序中引用和使用共享程序集，并且只要您想更新，只需更新共享程序集。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:54:18.360

您可以创建 nuget 资源，并使用 Nuget 服务器（最新版本的 teamcity 支持它） - 所有更新都将由 nuget 处理。

其他方法是在此文件夹中创建公共文件夹和所有项目指向 dll（相对），在这种情况下，您需要在一个文件夹中更新 dll（重建解决方案后 dll 将自动更新）

当然，您总是可以在 GAC（全局程序集缓存）中安装 dll，这是由名为 gacutil.exe 的工具处理的（在网络中有很多示例如何处理它）。

# c# - C# 中的 X 和 Y 位置错误

> ID：10215041
> 
> 赞同：1
> 
> 时间：2012-04-18T17:50:24.350
> 
> 标签：c#, location, point

我用 C# 制作了一个小型 2D 游戏，但问题是：

当我在分辨率为 1366x768 的笔记本电脑或 1920x1080 的笔记本电脑上启动游戏时，它可以正常工作（所有英特尔显卡），但是当我在我的电脑上以 HD6850 和 1920x1080 分辨率启动游戏时，坐标（位置）关闭，就像它们应该像的一半：

图片框应该在点 x100 和 y100 上，但在点 x50 和 y50 上。

我想知道为什么会发生这种情况以及如何解决它。

提前致谢

编辑：是的，我在说明问题，如何修复 DPI 错误？例如：pictureBox1.location = new Point(100, 100);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:03:21.010

看看[Graphics.PageUnit](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.pageunit.aspx)或[Graphics.PageScale](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.pagescale.aspx)。

如果您的笔记本电脑和 PC 之间的这些值中的任何一个不同，请调整它们。

# ipad - iOS：无线安装 iPad App 不起作用

> ID：10215042
> 
> 赞同：3
> 
> 时间：2012-04-18T17:50:30.910
> 
> 标签：ipad, ios5, wireless, software-distribution

我已经精确地遵循[了这](http://help.apple.com/iosdeployment-apps/#app43ad871e)一点来无线安装应用程序，并且还关注了不同的博客和帖子，但无法让企业分发工作。

我做了以下事情。

Index.html 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>My app</title>
</head>
<body>
<ul>

    <a href="itms-services://?action=download-manifest&url=http://10.0.20.600:5151/MyApp.plist">
            Install App</a>
</ul>
</body>
</html> 
```

MyApp.plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>URL</key>
    <string>http://10.0.20.600:5151/MyApp.ipa</string>
    <key>display-image</key>
    <string>http://10.0.20.600:5151/icon72x72.png</string>
    <key>full-size-image</key>
    <string>http://10.0.20.600:5151/icon512x512.png</string>
    <key>bundle-identifier</key>
    <string>com.MyCompany.MyApp</string>
    <key>bundle-version</key>
    <string>1.0</string>
    <key>title</key>
    <string>MyAppName</string>
</dict>
</plist> 
```

启用的 MIME 类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <staticContent>
        <mimeMap fileExtension=".ipa" mimeType="application/octet-stream" />
        <mimeMap fileExtension=".plist" mimeType="text/xml" />
    </staticContent>
</system.webServer>
</configuration> 
```

授予对 MyApp.plist 文件的完全权限。

当我在 iPad 上的 Safari 上打开[http://10.0.20.600:5151/index.html](http://10.0.20.600:5151/index.html)页面时，我得到该页面并单击安装应用程序，*** 它什么也没做 ***没有错误，什么也没有！

有人还提到要下载移动配置文件，所以我在 index.html 中添加了以下内容

```
<a href="http://10.0.20.600:5151/MyApp.mobileprovision">
            Install Provisioning File</a> 
```

..但是当我单击它时，它显示“找不到文件或目录”。

谁能告诉我我在这里错过了什么？我现在花了半天时间来完成这项工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:13:07.917

我有完全一样的问题。

我添加了 MIME 类型。我能够打开图标。尝试在 iPad 上打开 ipa 时会遇到与您相同的错误。但是，我可以从 PC 上的浏览​​器打开 ipa。

我已按照此[链接](http://www.syndicatedmethods.com/SyndicatedBlogs/post/2011/02/25/Fun-With-Distributing-iPhone-Apps-OTA.aspx)中的步骤进行操作，但是当我单击该链接时仍然没有任何反应。即使链接对我没有任何帮助，也许该链接会对您有所帮助？

我的清单文件看起来也有点不同（不是由 xcode btw 创建的）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
        <dict>
            <key>items</key>
            <array>
                <dict>
                    <key>kind</key>
                    <string>software-package</string>
                    <key>url</key>
                    <string>http://url/to/ipa.ipa</string>
                </dict>
                <dict>
                    <key>kind</key>
                    <string>display-image</string>
                    <key>needs-shine</key>
                    <true/>
                    <key>url</key>
                    <string>http://url/to/icon/57.png</string>
                </dict>
                <dict>
                    <key>kind</key>
                    <string>full-size-image</string>
                    <key>needs-shine</key>
                    <true/>
                    <key>url</key>
                    <string>http://url/to/full/icon.png</string>
                </dict>
            </array>
            <key>metadata</key>
            <dict>
                <key>bundle-identifier</key>
                <string>com.app.myapp</string>
                <key>bundle-version</key>
                <string>1.1</string>
                <key>kind</key>
                <string>software</string>
                <key>title</key>
                <string>myApp</string>
            </dict>
        </dict>
    </plist> 
```

对不起，我无法提供更多帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:56:22.290

以下设置总是对我有用！

安装.html 文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Remote App Install</title>
</head>
<body>
<ul>

    <a href="itms-services://?action=download-manifest&url=http://us.www.mysite.com/install.plist">
        Install App</a>
</ul>
</body>
</html> 
```

安装.plist 文件

```
<plist version="1.0">
<dict>
<key>items</key>
  <array>
    <dict>
    <key>assets</key>
      <array>
        <dict>
        <key>kind</key>
        <string>software-package</string>
        <key>url</key>
         <string>http://us.www.mysite.com/myapp1_0.ipa</string>
        </dict>
                <dict>
                    <key>kind</key>
                    <string>display-image</string>
                    <key>url</key>
                    <string>http://us.www.mysite.com/icon.png</string>
                </dict>
                <dict>
                    <key>kind</key>
                    <string>full-size-image</string>
                    <key>url</key>
                    <string>http://us.www.mysite.com/icon@2x.png</string>
                </dict>
      </array>

             <key>metadata</key>
        <dict>
        <key>bundle-identifier</key>
        <string>com.mysite.myapp</string>
        <key>bundle-version</key>
        <string>1.0</string>
        <key>kind</key>
        <string>software</string>
        <key>title</key>
        <string>My App</string>
        </dict>
      </dict>
    </array>
 </dict> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-18T23:25:14.447

看来您应该尝试使用标签`HyperLink`以外的其他方法。`A`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-17T15:28:00.157

`<?xml version="1.0" encoding="UTF-8"?>` 从您的 plist 文件中删除第一行，它应该可以工作。

# php - 使用 AJAX 更新 MySQL 数据库的多个 jQuery 可排序列表

> ID：10215060
> 
> 赞同：0
> 
> 时间：2012-04-18T17:51:29.937
> 
> 标签：php, jquery, ajax, jquery-ui-sortable

我有多个从 MySQL 中的列表动态生成的可排序列表。每个列表的 id 使用数据库中的部分 id 附加。排序后，数据被序列化并发送到 sort_order_piece.php 以运行 MySQL 查询以更新记录的顺序，一切正常。不起作用的是我编写以下 jQuery 以说明每个列表的动态生成的 id 的方式：

```
$(".sortme_piece").each(
    function(e) {
        num = e+1;
        $('#sortme_piece_'+num).sortable({
            placeholder: "ui-state-highlight",
            update : function () {
                serial = $('#sortme_piece_'+num).sortable('serialize');
                alert(serial);
                $.ajax({
                    url: "sort_order_piece.php",
                    type: "post",
                    data: serial,
                    beforeSend: function(){$('#updated').html('updating');},
                    success: function(data){$('#updated').html(data);},
                    error: function(){alert("theres an error with AJAX");}

                });
            }
        });
    }); 
```

这条线似乎是麻烦：

```
serial = $('#sortme_piece_'+num).sortable('serialize'); 
```

当我在警告框中查看变量时，它是空白的。如果我删除附加的“数字”并添加一个与列表 ID 之一相对应的实际数字，它就可以正常工作。

我到底做错了什么？我只是无法确定它。

帮助和感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:35:53.790

我变了

```
serial = $('#sortme_piece_'+num).sortable('serialize'); 
```

到

```
serial = $(this).sortable('serialize'); 
```

并修复了它。

# git - Git推送到heroku

> ID：10215063
> 
> 赞同：5
> 
> 时间：2012-04-18T17:51:41.993
> 
> 标签：git, heroku

首先，我使用创建新密钥

```
ssh-keygen -t rsa -C "user@mail.com" 
```

然后我将生成的密钥添加到heroku by `heroku keys:add`。之后，我尝试使用`git push heroku master`.

在此之前，我使用以下命令配置了我的 git 存储库：`git init`, `git add .`, `git commit`, `heroku create`, `git remote add heroku git@heroku:sth.git`.

但是，我收到了这个错误`Host key verification failed`。

我正在运行 ubuntu 11.10 版。这很奇怪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T08:26:55.660

这是非常愚蠢的。当它问我是否要添加主机时，我没有说是就直接进入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:19:08.433

我认为

```
git remote add heroku git@heroku:sth.git 
```

应该

```
git remote add heroku git@heroku.com:sth.git 
```

即heroku.com 而不仅仅是heroku。

# android - 使用 LOOKUP_URI 在 Android (API 8) 中获取联系人照片

> ID：10215065
> 
> 赞同：2
> 
> 时间：2012-04-18T17:51:46.613
> 
> 标签：android, api, uri, photo

我正在尝试使用其查找 URI 获取联系人图像。我使用以下代码成功获取了 DISPLAY_NAME：

```
Cursor c = context.getContentResolver().query(contactLookupUri,
                new String[] { ContactsContract.Contacts.DISPLAY_NAME }, null,
                null, null); 
```

但是我没有找到获取照片的方法。Photo.PHOTO 选项对我正在使用的 API 无效，并且尝试使用 inputStream 获取它也不起作用（也许我在那里做错了什么）：

```
InputStream input = ContactsContract.Contacts
                    .openContactPhotoInputStream(context.getContentResolver(),
                            contactUri); 
```

谢谢，约尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:50:01.040

最终我通过获取联系人 ID 并使用 inputStream 解决了这个问题：

```
public static Uri getContactLookupUri(String contactLookupKey) {
        return Uri.withAppendedPath(
                ContactsContract.Contacts.CONTENT_LOOKUP_URI, contactLookupKey);
    }

public static Bitmap getContactImage(Context context, String contactLookupKey) {

    long contactId;

    try {
        Uri contactLookupUri = getContactLookupUri(contactLookupKey);
        Cursor c = context.getContentResolver().query(contactLookupUri,
                new String[] { ContactsContract.Contacts._ID }, null, null,
                null);
        try {
            if (c == null || c.moveToFirst() == false) {
                return null;
            }
            contactId = c.getLong(0);
        } finally {
            c.close();
        }

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

    Uri contactUri = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, contactId);
    InputStream input = ContactsContract.Contacts
            .openContactPhotoInputStream(context.getContentResolver(),
                    contactUri);

    if (input != null) {
        return BitmapFactory.decodeStream(input);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:59:24.110

下面的函数返回你的contact_id的图像uri

```
/**
 * @return the photo URI
 */
public Uri getPhotoUri() {
    try {
        Cursor cur = this.ctx.getContentResolver().query(
                ContactsContract.Data.CONTENT_URI,
                null,
                ContactsContract.Data.CONTACT_ID + "=" + this.getId() + " AND "
                        + ContactsContract.Data.MIMETYPE + "='"
                        + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'", null,
                null);
        if (cur != null) {
            if (!cur.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long
            .parseLong(getId()));
    return Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

另请参阅此[链接](https://stackoverflow.com/questions/2383580/android-how-do-i-load-a-contact-photo)

# c# - WPF + 将 DataGrid ItemSource 绑定到列表

> ID：10215071
> 
> 赞同：1
> 
> 时间：2012-04-18T17:51:59.920
> 
> 标签：c#, wpf

我试图弄清楚如何将数据网格的 itemsource 绑定到列表。特别是，我使用 LINQ to SQL 从表中提取数据，并将其转换为列表：

```
 var tempTable = (from p in dc.LiveData
                         select new Custom_GridResult
                         {   x = p.x,
                                 y = p.y,
                                 z = p.z
                        }).ToList();
        dataGrid.ItemsSource = tempTable.ToList();    

public class CustomETO_GridResult
{
    public CustomETO_GridResult()
    { }
    double x { get; set; }
    public double y{ get; set; }
    public double z{ get; set; }

} 
```

我的计划是每隔几分钟重新提取一次数据（因为它会不断更新），我希望我的 DataGrid 能够自动反映这些更改。我更容易不断地重新设置 ItemsSource，还是有其他方法？

非常感谢

编辑：我应该补充一点，数据库的行数是恒定的（它们是预定义的）。不断更新的是数据库中的值。例如，假设它是一个飞机数据库，并且列值会不断更新飞机飞行位置的 GPS 坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:03:57.117

要让 DataGrid 从您的源集合接收更新，它需要实现[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged(v=vs.100).aspx)。幸运的是，[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)已经做到了。让您的数据库查询填充 ObservableCollection 并将您的 DataGrid 绑定到 ObservableCollection。

**更新：**

一个更好的答案是使用 MVVM 模式。您将创建一个与数据库接口的 Model 类和一个 ViewModel 类，用于准备数据以供呈现，但将其放入 ObservableCollection（例如）。然后，您的 View 将绑定到 ViewModel，您将在其中将 DataGrid 的 ItemsSource 设置为 ObservableCollection。请参阅[这篇文章](https://stackoverflow.com/questions/483367/are-there-any-good-books-on-m-v-vm-in-wpf)了解 MVVM 入门。

**更新 #2：** 在控件的构造函数中创建 ViewModel 实例并将其分配给控件的 DataContext。您的 DataGrid 将绑定到 ViewModel 上的 Results 属性。当 ObservableCollection 的内容发生变化时，DataGrid 的内容会自动更新。ñ

代码：

```
public class ViewModel
{
    public ObservableCollection<CustomETO_GridResult> Results {get;set;}

    // Call this method to update the ObservableCollection, obviously could use some optimization
    public void UpdateFromDatabase()
    {
         var query = // make your database query
         Results.Clear();
         foreach(CustomETO_GridResult result in query)
              Results.add(result);
    }

    ... // Initialize ObservableCollection,  do other work, etc.
} 
```

XAML：

```
<DataGrid ItemsSource="{Binding Results}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:04:43.827

将 tempTable 放入 observable 集合中，将其分配给 datagrid 的 ItemsSource（当然是一次），然后在不断拉取新数据时，继续将其推入您的 observable 集合中，它将为您完成剩下的魔术。

# r - 通过 RMySQL 连接到 sequel pro 数据库远程服务器

> ID：10215080
> 
> 赞同：1
> 
> 时间：2012-04-18T17:52:36.097
> 
> 标签：r, ssh, database-connection, rmysql, sequelpro

我正在运行 Sequel Pro 0.9.9.1 并且可以连接到托管在仅允许 SSH 连接的服务器上的远程 mySQL (v 14.14) 数据库。当我通过 Sequel Pro 连接时，我只需要填写 ssh 用户和密码即可正常连接。我能够以这种方式访问​​所有数据库。

然后我尝试使用 RMySQL (0.9-3) 连接到 R (2.14.0) 中的数据库，但此命令失败：

```
conn <- dbConnect(MySQL(), user="ssh_user", password="ssh_password", host="localhost") 
```

出现错误：“RS-DBI 驱动程序：（无法连接到数据库：错误：无法通过套接字'/tmp/mysql.sock'（2）连接到本地 MySQL 服务器”，无论我是否使用单引号（建议其他地方），将用户和/或密码更改为“root”或“”，或将“127.0.0.1”替换为“localhost”。如果我在 R 命令中将服务器主机替换为主机，则会被告知我无法访问服务器（这是真的，它被配置为只能通过 ssh 访问）。

以这种方式通过 Sequel Pro 连接到通过 ssh 访问的数据库的正确用户、密码和主机是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:36:04.707

我从来没有这样做过，但我假设你可以使用 SSH 来隧道适当的端口，如下所述：http: [//www.howtogeek.com/howto/ubuntu/access-your-mysql-server-remotely-over- ssh/](http://www.howtogeek.com/howto/ubuntu/access-your-mysql-server-remotely-over-ssh/) .

简而言之，您将：

1.  通过 SSH 隧道连接适当的端口，对于 MySQL，默认情况下为 3306。
2.  用于`dbConnect()`连接到 MySQL 服务器，就像它在本地计算机上一样。

这绕过了对 Sequel Pro 的需求。隧道本质上允许本地 3306 端口上的流量通过本地计算机和服务器之间的端口 22 上的 SSH 连接进行隧道传输，然后转发到服务器上本地的端口 3306。

# jquery - 刷新数据时jquery datatables表中断

> ID：10215083
> 
> 赞同：0
> 
> 时间：2012-04-18T17:52:43.477
> 
> 标签：jquery, datatables

动态刷新数据会导致我的表完全崩溃。想象一下踩在一个空的汽水罐上。然后，当数据重新填充时，它会恢复到正常大小。我想看看是否有人遇到过类似的问题，如果有，您的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:57:42.443

表格元素（td、th 等）需要在为其分配的 CSS 中具有一些固定的宽度/高度/填充/边距设置。也许您应该首先出于测试目的呈现没有任何数据的表 - 空表。添加 min-width 或 padding 或其他任何内容以使表格以您想要的方式呈现而无需任何数据。一旦你能做到这一点，然后添加数据，现在如果你刷新它，表格可能不会再损坏了。

# iis - 从主机访问托管在虚拟机中的网站

> ID：10215086
> 
> 赞同：4
> 
> 时间：2012-04-18T17:52:45.220
> 
> 标签：iis, virtualbox, windows-server-2008-r2

我在 VirtualBox 中安装了 Windows 2008 Server，我希望能够从主机操作系统 (Windows 7) 访问默认网站 (localhost)。

在 IIS 中，我为默认网站设置了一个主机名，我将其命名为“webserver”。然后我将以下行添加到我的主机文件（dns）

127.0.0.1 网络服务器

现在，如果我在来宾操作系统中浏览到[http://webserver](http://webserver)，它就可以正常工作。

但是我如何从主机操作系统访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:59:42.230

如果您的虚拟机已连接到 Internet，则它基本上将您的物理 PC 用作路由器。也就是说，主机操作系统正在分配一些私有地址（例如 192.168.XX）。

您需要将其放在浏览器中才能从主机操作系统访问虚拟服务器。我从未使用过 Windows Server，但在 Windows 下，您可以通过键入找到您的 IP

```
ipconfig 
```

在命令提示符下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-07T11:28:22.367

据我所知，如果使用 NAT，虚拟机的默认 IP 地址是 10.0.2.15，但您仍然可以使用**ipconfig**进行验证。

Nat 使您能够访问您的虚拟机来宾操作系统，即使您的主机操作系统未连接到路由器/接入点。

您可以将主机操作系统的端口映射到来宾操作系统，如下所示。

*   进入您的 vbox 访客操作系统设置
*   单击网络选项卡
*   确保附加到设置为 NAT
*   点击高级然后端口转发
*   然后您将看到一个屏幕，您可以在其中将主机端口映射到访客端口

[![Virtual Box NAT 端口转发](../Images/304fa83f531d4f4a25936f7ef5523298.png)](https://i.stack.imgur.com/bxjBp.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-01T01:43:39.400

在 Virtualbox 中转到虚拟机的网络设置。

设置网卡不是通过 NAT 连接，而是通过 BRIDGED ADAPTER。如果您的主机上有多个适配器，请选择主要的适配器，即您用来从路由器获取 IP 的适配器。

现在您的来宾虚拟机与您的主机位于同一网络上。

因此，您可以通过虚拟机的计算机名称简单地访问网络服务器。前任。 [http://virtserv](http://virtserv)
（请注意：不是 Virtualbox 中的虚拟机名称，而是来宾 Windows 安装中的 COMPUTER NAME）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T19:26:49.107

您所要做的就是使用主机操作系统的 IP 地址。在主机操作系统中打开命令提示符并键入`ipconfig`. 找到`IPv4 address`：EG

`IPv4Address........ : 10.1.1.100`--如果有多个，则全部尝试

进入虚拟机操作系统并打开浏览器。输入网址：

`http://10.1.1.100/optionalPathInfo`

这将从 VM 浏览器打开主机 IIS 站点。

# jquery - 尝试从 JQuery 中的表单元素打印 id 值时，为什么会出现“未定义”？

> ID：10215097
> 
> 赞同：4
> 
> 时间：2012-04-18T17:53:31.887
> 
> 标签：jquery, forms, iteration, undefined

这是我的表格：

```
<form action="/Admin/usuarios/obtener_valores" method="POST">
<div class="span-16">
    <input type="hidden" value="1" name="usuarioPinIdHidden" id="usuarioPinIdHidden">
    <table class="summary" style="border: none;">
        <tr>
            <td colspan="2">¿A que edad tuvo sus primeras vacaciones?</td>
        </tr>
        <tr>
            <td colspan="2"><input id="text@&#39;+1+^+1" name="respuesta[0].respuesta" type="text" value=""/></td>
        </tr>
        <tr>
            <td colspan="2">¿Estaba casado en 1991?</td>
        </tr>
        <tr>
            <td colspan="2"><input id="boolean@&#39;+3+^+1" name="respuesta[1].respuesta" type="radio" value="true"/>
                <label for="boolean@'+3+^+1">Si</label>
                <br />
                <input id="boolean@&#39;+3+^+1" name="respuesta[1].respuesta" type="radio" value="false"/>
                <label for="boolean@'+3+^+1">No</label></td>
        </tr>
    </table>
</div> 
```

这是一个在单击提交按钮后打印所有 id 值的函数：

```
$(document).ready(function() {
        $('form').submit(function (){
            return verificarRespuestas();
        });
    });

    function verificarRespuestas(){
        alert('hola');
        $('form').children().each(function(){
            var child = $(this);
            alert(child.id);
        });
        return false;
    } 
```

但这就是它的打印内容：

*   你好
*   不明确的
*   不明确的

当我期望获得这些值时：

*   你好
*   文字@'+1+^+1
*   布尔@'+3+^+1

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T17:55:55.913

*   `children`只选择元素的直接子元素，您想要`$('form').find('input')`或`$('form').find('input[id]')`只获取那些具有 ID 的元素，或者`$('form').find('input:visible')`只获取那些可见的（即不隐藏的）。
*   到达那里后，您可以简单地`this.id`在`each`. 或者，通过 jQuery `$(this).attr('id')`，.
*   您的 ID 无效 - 它们不仅包含无效字符，而且您不能像第二次输入那样复制它们。所有的胡言乱语有什么意义？

如果您正在执行某种客户端验证或样式设置，则有许多更智能的方法可以在输入中表示字段类型，最常见的是通过类，也可以通过 HTML5 中的自定义属性或字段类型。ID 绝对不是您想要放置`booleanXXX`信息的地方。HTML 规范说：

> > ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T17:55:58.420

### 描述

You should use the jQuery `attr()` function to get the id.

> **jQuery.attr()** Get the value of an attribute for the first element in the set of matched elements.

### Sample

```
alert(child.attr('id'); 
```

### More Information

*   [jQuery.attr()](http://api.jquery.com/attr/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:55:53.667

`child`是一个 jquery 对象，因此它没有属性`id`。

你应该使用这个：

```
 $('form').children().each(function(){
        var child = this;
        alert(child.id); 
```

或这个：

```
 $('form').children().each(function(){
        var $child = $(this);
        alert(child.attr('id')); 
```

`$`您应该为您的 jQuery 变量添加前缀。

阅读本文：
[在 jQuery 中使用带有变量的 $ 是否有任何特定原因](https://stackoverflow.com/q/10204606/601179)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T17:56:22.413

**NOTE:** YOU have invalid IDS

```
 $('form input').each(function(){
            alert(this.id);
        }); 
```

# sql-server - 对 SELECT UNION 进行分页超级慢并杀死我的服务器

> ID：10215098
> 
> 赞同：1
> 
> 时间：2012-04-18T17:53:35.083
> 
> 标签：sql-server, sql-server-2008, query-optimization

我有一个 SP，它从包含 UNION 的查询中返回分页数据。这正在杀死我的数据库并且有时需要 30 秒才能运行，我在这里遗漏了一些明显的东西吗？我能做些什么来提高它的性能？

涉及的表：产品、类别、类别产品

目标：任何不在类别中或已从类别中删除的产品联合当前在一个类别中的所有产品，并为 Web 服务在这些产品上翻页。

我加入的所有列都有索引，数据库中有 427,996 个产品、6148 个类别和 409,691 个类别产品。

这是我的查询，运行时间在 6 到 30 秒之间：

```
 SELECT * FROM (
    SELECT ROW_NUMBER() OVER(ORDER BY Products.ItemID, Products.ManufacturerID) AS RowNum, *
        FROM
        (
        SELECT  Products.*,
              CategoryID = NULL, CategoryName = NULL, 
              CategoryProductID = NULL, 
                          ContainerMinimumQuantity = 
                            CASE  COALESCE(Products.ContainerMinQty, 0)
                                WHEN 0 THEN Products.OrderMinimumQuantity
                                ELSE Products.ContainerMinQty
                            END 
                            Products.IsDeleted, 
                           SortOrder = NULL
    FROM    CategoryProducts RIGHT OUTER JOIN   Products 
        ON CategoryProducts.ManufacturerID = Products.ManufacturerID 
            AND CategoryProducts.ItemID = Products.ItemID
            WHERE     (Products.ManufacturerID = @ManufacturerID)
                AND (Products.ModifiedOn > @tStamp )
                 AND  ((CategoryProducts.IsDeleted = 1) OR (CategoryProducts.IsDeleted IS NULL))

                UNION

                SELECT Products.*, 
 CategoryProducts.CategoryID , CategoryProducts.CategoryName, 
          CategoryProducts.CategoryProductID , 
                          ContainerMinimumQuantity = 
                            CASE  COALESCE(Products.ContainerMinQty, 0)
                                WHEN 0 THEN Products.OrderMinimumQuantity
                                ELSE Products.ContainerMinQty
                            END 
                            CategoryProducts.IsDeleted,
                           CategoryProducts.SortOrder
    FROM      Categories INNER JOIN
                          CategoryProducts ON Categories.CategoryID = CategoryProducts.CategoryID INNER JOIN
                          Products ON CategoryProducts.ManufacturerID = Products.ManufacturerID
             AND CategoryProducts.ItemID = Products.ItemID
    WHERE     (Products.ManufacturerID = @ManufacturerID) 
            AND  (Products.ModifiedOn > @tStamp OR  CategoryProducts.ModifiedOn > @tStamp))  
            AS Products) AS C 
        WHERE RowNum >= @StartRow AND RowNum <= @EndRow 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:10:34.067

如果我正确阅读了您的情况，那么有两个不同查询的唯一原因是处理丢失/删除的 CategoryProducts。我试图通过左连接来解决这个问题，`IsDeleted = 0`以将所有已删除的 CategoryProducts 变为空值，因此我不必再次测试它们。对于您希望检索的丢失/删除的 Categoryproducts，ModifiedOn 部分对 null 进行了另一次测试。

```
select *
from (
    SELECT 
      Products.*, 
      -- Following three columns will be null for deleted/missing categories
      CategoryProducts.CategoryID, 
      CategoryProducts.CategoryName, 
      CategoryProducts.CategoryProductID , 
      ContainerMinimumQuantity = COALESCE(nullif(Products.ContainerMinQty, 0),
                                          Products.OrderMinimumQuantity),
      CategoryProducts.IsDeleted,
      CategoryProducts.SortOrder,
      ROW_NUMBER() OVER(ORDER BY Products.ItemID, 
                                 Products.ManufacturerID) AS RowNum
    FROM Products 
      LEFT JOIN CategoryProducts 
         ON CategoryProducts.ManufacturerID = Products.ManufacturerID
        AND CategoryProducts.ItemID = Products.ItemID
    -- Filter IsDeleted in join so we get nulls for deleted categories
    -- And treat them the same as missing ones
        AND CategoryProducts.IsDeleted = 0
      LEFT JOIN Categories
         ON Categories.CategoryID = CategoryProducts.CategoryID 
    WHERE Products.ManufacturerID = @ManufacturerID
      AND (Products.ModifiedOn > @tStamp 
        -- Deleted/missing categories
           OR CategoryProducts.ModifiedOn is null
           OR CategoryProducts.ModifiedOn > @tStamp)
    ) C
WHERE RowNum >= @StartRow AND RowNum <= @EndRow 
```

第三次看，除了作为 CategoryProducts 的过滤器之外，我根本没有使用 Category。如果是这种情况，则应将第二个 LEFT JOIN 更改为 INNER JOIN，并且此部分应括在括号中。

# ruby-on-rails - 将口水与 Rails 集成？

> ID：10215101
> 
> 赞同：4
> 
> 时间：2012-04-18T17:53:58.237
> 
> 标签：ruby-on-rails, jruby, rule-engine

你们中有人曾经使用 JRuby 将 JBoss 规则引擎集成到 Rails 应用程序中吗？

# jquery - jQueryUI 对话框，是否可以使用您自己的按钮而不是对话框生成的按钮？

> ID：10215102
> 
> 赞同：1
> 
> 时间：2012-04-18T17:54:01.337
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我有一个与这个几乎相同的模态表单：http: [//jqueryui.com/demos/dialog/modal-form.html](http://jqueryui.com/demos/dialog/modal-form.html)

该表单已经有一个提交按钮。我可以设法使用此按钮提交表单，但回调函数不起作用。有没有办法使用我自己的提交按钮并使回调函数工作？

```
buttons: {
    "Create an account": function () {            
        $("#dialog-form").html("thank you for <b>submit</a>");
    },
    Cancel: function () {
        $(this).dialog("close");
    }
} 
```

**你可以在 jsFiddle 上测试我的代码**

[http://jsfiddle.net/QSJpS/3/](http://jsfiddle.net/QSJpS/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:16:34.603

***[这是一个有效的 jsFiddle 演示：](http://jsfiddle.net/DotNetScott/2SV6R/)***

我更改的部分位于“创建帐户”部分中：

```
if ( bValid ) {
    $( "#users tbody" ).append( "<tr>" +
        "<td>" + name.val() + "</td>" + 
        "<td>" + email.val() + "</td>" + 
        "<td>" + password.val() + "</td>" +
        "</tr>" ); 
    $( this ).html("Thank you!");
} 
```

## 输出：

![在此处输入图像描述](../Images/9924cb46fe81cfd6eeb330999992175f.png)

* * *

## 编辑 Ajax 解决方案：

您需要做的是通过 ajax 发布您的表单，这样您就不会因为页面刷新而搞砸了您的消息。你可以这样做：

```
$("#submit-button-id").click(function(e) {

    var data = 'name='+ $("#name").val() + 
               '&email=' + $("#email").val() + 
               '&password=' + $("#password").val() ;  

    $.ajax({  
        type: "POST",  
        url: "some-processing-page.html",  
        data: data,  
        success: function() {  
            $('#dialog-form').html("Thank you for your submission!");  
            $(".ui-dialog-buttonpane").hide();
        }  
    });  

    e.preventDefault();  

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:51:41.030

所以，像这样：

[http://jsfiddle.net/QSJpS/4/](http://jsfiddle.net/QSJpS/4/)？

```
$(function(){
    $("#submitButton").click(function () {

                    var bValid = true;

                    if (bValid) {
                        $("#users tbody").append("<tr>" +
                        "<td>" + $("#name").val() + "</td>" +
                        "<td>" + $("#email").val() + "</td>" +
                        "<td>" + $("#password").val() + "</td>" +
                    "</tr>");
                        $("#dialog-form").html("thank you for <b>submit</a>");
                        $(".ui-dialog-buttonpane").hide();
                    }
     });
});               
​ 
```

# sql-server - 我可以在不编写 SQL 查询的情况下找出 SQL Server 实例使用的数据库列表和空间吗？

> ID：10215104
> 
> 赞同：0
> 
> 时间：2012-04-18T17:54:18.733
> 
> 标签：sql-server, wmi

我需要获取计算机上存在的 SQL Server 实例列表，获取每个实例中的数据库列表，然后确定每个数据库占用了多少空间。

我可以轻松地从注册表中获取实例名称，但我无权查询表以获取数据库的名称。是否有另一种方法可以做到这一点，也许是 WMI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:46:28.120

经过一番挖掘，我终于找到了可以得到我需要的信息的 WMI 类。在我有 3 个 SQL Server 实例的服务器上，我在以下类中找到了我的数据

```
Win32_PerfFormattedData_MSSQLINST2_MSSQLINST2Databases
Win32_PerfFormattedData_MSSQLINST3_MSSQLINST3Databases
Win32_PerfFormattedData_MSSQLSERVER_SQLServerDatabases 
```

我的实例`MSSQLINST2`是`MSSQLINST3`和`MSSQLSERVER`。我无法弄清楚命名方案，所以我不得不查看所有类以找出我需要的信息。无论如何，这是有效的代码。也许有人会发现它很有用。

```
ManagementObjectSearcher sqlInstancesSearcher = new ManagementObjectSearcher(
    new ManagementScope(@"Root\Microsoft\SqlServer\ComputerManagement10"),
    new WqlObjectQuery("select * from SqlServiceAdvancedProperty where propertyindex = 12"),
    null);

foreach (ManagementObject instance in sqlInstancesSearcher.Get())
{
    string instanceName = instance["ServiceName"].ToString().Replace("$", String.Empty);
    Console.WriteLine("INSTANCE: " + instanceName);

    ManagementObjectSearcher classNameSearcher = new ManagementObjectSearcher(
        new ManagementScope(@"root\cimv2"),
        new WqlObjectQuery("select * from meta_class where __CLASS Like 'Win32_PerfFormattedData_" + instanceName + "%Databases%'"),
        null);

    foreach (ManagementClass wmiClass in classNameSearcher.Get())
    {
        string className = wmiClass["__CLASS"].ToString();
        string query = "select * from " + className;

        ManagementObjectSearcher databaseSearcher = new ManagementObjectSearcher(
            new ManagementScope(@"root\cimv2"),
            new WqlObjectQuery(query),
            null);

        foreach (ManagementObject database in databaseSearcher.Get())
        {
            Console.WriteLine("  " + database["Name"]);
            Console.WriteLine("    Data Files     : " + database["DataFilesSizeKB"]);
            Console.WriteLine("    Log Files      : " + database["LogFilesSizeKB"]);
            Console.WriteLine("    Log Files Used : " + database["LogFilesSizeKB"]);
        }
    }
} 
```

# php - 如何为 PHP 数组获取类似 SQL 的 HAVING 和 GROUP BY？

> ID：10215112
> 
> 赞同：1
> 
> 时间：2012-04-18T17:54:56.767
> 
> 标签：php, arrays

是否有一个 PHP 代码片段或一个内置的数组函数可以做类似于具有和分组依据的 sql 语句的功能？那就是删除重复项并计算出现次数，并返回一个可用于报告/调试目的的数组。

一个例子可以澄清；

说你的数组是这样的

```
Array (
['0'] => usa
['1'] => minnesota
['2'] => california
['3'] => san fransisco
['4'] => los angeles
['5'] => san fransisco
['6'] => malibu
['7'] => malibu
['8'] => malibu
['9'] => usa
} 
```

你想要这样的东西，或者这样的东西..

```
Array (
['usa'] => 2
['minnesota'] => 1
['california'] => 1
['san fransisco'] => 2
['los angeles'] => 1
['malibu'] => 3
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:57:08.237

[http://www.php.net/manual/en/function.array-count-values.php](http://www.php.net/manual/en/function.array-count-values.php)

您可以使用以下代码来执行此操作：

```
array_count_values ($myArray) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:56:55.397

手动执行：

```
$new = array();
foreach($array as $key => $val) {
  if (!isset($new[$key]) {
    $new[$key] = 0;
  }
  $new[$key]++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:58:48.470

用于[`array_count_values()`](http://www.php.net/manual/en/function.array-count-values.php)获取重复的数量

```
$array = array(...);
$duplicate = array_count_values($array); 
```

# perl - 在 DB Query 之后写入文件然后将此文件用作 BCP 的数据文件的最佳方式

> ID：10215117
> 
> 赞同：0
> 
> 时间：2012-04-18T17:55:13.630
> 
> 标签：perl, perl-module

要求是将服务器 A 中的表（例如 account）复制到服务器 B 中的表 account_two 中。有很多这样的表，每个表都有数千行。

我想为此尝试 BCP。问题是 account_two 的列数可能比 account 少。我知道在这种情况下我可以使用格式文件或临时表。

问题是我没有服务器 A 表。如果有人更改 col 的顺序和编号，bcp 将失败。

在 Sybase 中，查询输出不起作用。剩下的唯一选择是从服务器 A 中的帐户中选择 A ， B 然后将此输出写入文件并将此文件用作 BCP IN 中的日期文件。

但是，由于它是庞大的数据，我无法找到一种方便的方法来执行此操作。

```
while ( $my row = $isth->fetchrow_arrayref) {
    print FILE JOIN ("\t",@$row),"\n";
} 
```

但是使用这种性能会受到打击。

我不能使用 dump_results() 或 dumper。将数千行数据转换为 bcp 数据文件格式将是一项额外的任务。

如果有人可以帮助我决定最佳方法。

PS：我是PERL的新手。对不起，如果有一个明显的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:16:27.087

```
#!/usr/local/bin/perl

use strict;
use warnings;
use Sybase::BCP;

my $bcp = new Sybase::BCP $user, $passwd;
$bcp->config(INPUT => 'foo.bcp',
             OUTPUT => 'mydb.dbo.bar',
             SEPARATOR => '|');
$bcp->run; 
```

您还应该记录列名，以便稍后您可以检查 order 是否没有更改。没有 bcp 选项可以检索列名，因此您必须获取该信息并将其单独存储。

如果您需要重新排序它们，那么：

```
$bcp->config(...
             REORDER => { 1 => 2,
                          3 => 1,
                          2 => 'foobar',
                          12 => 4},
             ...); 
```

* * *

非 Perl 解决方案：

```
-- Create the headers file
sqlcmd -Q"SET NOCOUNT ON SELECT 'col1','col2'" -Syour_server -dtempdb -E -W -h-1 -s" " >c:\temp\headers.txt

-- Output data
bcp "SELECT i.col1, col2 FROM x" queryout c:\temp\temp.txt -Syour_server -T -c

-- Combine the files using DOS copy command. NB switches: /B - binary; avoids appending invalid EOF character 26 to end of file.
copy c:\temp\headers.txt + c:\temp\temp.txt c:\temp\output.txt /B 
```

# django - Django-Celery 2.5.3 BROKER_URL 错误“没有这样的传输：mysql”

> ID：10215118
> 
> 赞同：1
> 
> 时间：2012-04-18T17:55:23.020
> 
> 标签：django, sqlalchemy, celery, kombu

我将我的 celery 从 2.4.X 升级到 celery-2.5.2，然后将 Broker_URL 修改为

```
BROKER_TRANSPORT = "sqlalchemy"
BROKER_URL = "sqla+mysql://root:root@localhost:3306/db" 
```

此配置可以通过[http://docs.celeryproject.org/en/latest/getting-started/brokers/sqlalchemy.html#broker-sqlalchemy的页面引用](http://docs.celeryproject.org/en/latest/getting-started/brokers/sqlalchemy.html#broker-sqlalchemy)

Celery 进程可以成功启动，但是我打电话给 . **delay**或**apply_async**进程将抛出异常KeyError **: 'No such transport: mysql'** 我对此一无所知.. 看起来一切都应该是正确的。

* * *

**追溯**

> 回溯（最近一次通话最后）：

```
File "<console>", line 1, in <module>
File "C:\Python27\lib\site-packages\celery-2.5.2-py2.7.egg\celery\app\task\__init__.py", line 353, in delay
   return self.apply_async(args, kwargs)
File "C:\Python27\lib\site-packages\celery-2.5.2-py2.7.egg\celery\app\task\__init__.py", line 449, in apply_async
   publish = publisher or self.app.amqp.publisher_pool.acquire(block=True)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 625, in acquire
   R = self.prepare(R)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\pools.py", line 55, in prepare
   p = p()
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\pools.py", line 46, in <lambda>
   return lambda: self.create_producer()
File "C:\Python27\lib\site-packages\celery-2.5.2-py2.7.egg\celery\app\amqp.py", line 265, in create_producer
   pub = self.app.amqp.TaskPublisher(conn, auto_declare=False)
File "C:\Python27\lib\site-packages\celery-2.5.2-py2.7.egg\celery\app\amqp.py", line 328, in TaskPublisher
   return TaskPublisher(*args, **self.app.merge(defaults, kwargs))
File "C:\Python27\lib\site-packages\celery-2.5.2-py2.7.egg\celery\app\amqp.py", line 158, in __init__
   super(TaskPublisher, self).__init__(*args, **kwargs)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\compat.py", line 61, in __init__
   super(Publisher, self).__init__(connection, self.exchange, **kwargs)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\messaging.py", line 69, in __init__
   channel = channel.default_channel
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 556, in default_channel
   self.connection
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 549, in connection
self._connection = self._establish_connection()
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 509, in _establish_connection
   conn = self.transport.establish_connection()
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 569, in transport
   self._transport = self.create_transport()
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 324, in create_transport
   return self.get_transport_cls()(client=self)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\connection.py", line 331, in get_transport_cls
   transport_cls = get_transport_cls(transport_cls)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\transport__init__.py", line 94, in get_transport_cls
   _transport_cache[transport] = _get_transport_cls(transport)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\transport\__init__.py", line 75, in _get_transport_cls
   transport_module_name, transport_cls_name = resolve_transport(transport)
File "C:\Python27\lib\site-packages\kombu-2.1.5-py2.7.egg\kombu\transport\__init__.py", line 70, in resolve_transport
   raise KeyError("No such transport: %s" % (transport, ))
KeyError: 'No such transport: mysql' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:40:35.983

经过一些调试后，我已将其追踪到`kombu`正在安装的版本。[Kombu 2.1.5 于 4 月 13 日发布](http://pypi.python.org/pypi/kombu/2.1.5)，似乎不兼容。我能够通过显式降级到版本 2.1.3 来解决此问题。

# .net - ITextSharp：从表单字段中删除字符限制

> ID：10215119
> 
> 赞同：1
> 
> 时间：2012-04-18T17:55:39.967
> 
> 标签：.net, c#-4.0, pdf, itextsharp

我正在尝试在使用 iTextSharp 设置表单字段之前从表单字段中删除字符限制。我可以使用 Adob​​e Acrobat 手动执行此操作，但我们正在处理大量 PDF 文档，我们正在使用 iTextSharp 动态标记表单字段。我们没有构建这些 PDF 文档，我们只是将它们用作我们正在填充数据的模板。我想知道是否有一种方法可以使用 api 删除表单字段的字符限制，这样我们就不必手动检查每个字段的字符限制。

我猜这可以通过 SetFieldProperty 方法完成，但我不确定具体如何。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:29:54.780

如果您了解 PDF 格式的内部结构，这很容易！[下面的代码与我在此处为不同类型的 PDF 注释编写](https://stackoverflow.com/a/8141831/231316)的代码几乎相同。该页面将更详细地解释事情并为您提供一些参考。但基本上诀窍是遍历每个页面，然后遍历每个页面的注释（表单字段属于此类），然后查找设置了最大长度的文本字段并删除该限制。所有这些工作都是在一个只读`PdfReader`对象上完成的，所以一旦我们完成了，我们需要再次循环并使用某种 a 将其写回`PdfWriter`。

以下是针对 iTextSharp 5.2.1 的完整工作 C# 2010 WinForms 应用程序，它显示了所有这些。有关详细信息，请参阅代码中的注释。

```
using System;
using System.IO;
using System.Windows.Forms;
using iTextSharp.text;
using iTextSharp.text.pdf;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) {
            var inputFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "test.pdf");
            var outputFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "output.pdf");

            //Setup some variables to be used later
            PdfDictionary PageDictionary = default(PdfDictionary);
            PdfArray Annots = default(PdfArray);

            //Bind a reader to our input PDF
            PdfReader R = new PdfReader(inputFile);
            //Store the number of pages
            int PageCount = R.NumberOfPages;
            //Loop through each page remember that page numbers start at 1
            for (int i = 1; i <= PageCount; i++) {
                //Get the current page
                PageDictionary = R.GetPageN(i);

                //Get all of the annotations for the current page
                Annots = PageDictionary.GetAsArray(PdfName.ANNOTS);

                //Make sure we have something
                if ((Annots == null) || (Annots.Length == 0)) { continue; }

                //Loop through each annotation
                foreach (PdfObject A in Annots.ArrayList) {
                    //Convert the itext-specific object as a generic PDF object
                    PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(A);

                    //See if this annotation has a WIDGET which would be the UI implementation of a form field
                    if (!AnnotationDictionary.Get(PdfName.SUBTYPE).Equals(PdfName.WIDGET)) { continue; }

                    //See if this annotation is a text field (TX)
                    if (!AnnotationDictionary.Get(PdfName.FT).Equals(PdfName.TX)) { continue; }

                    //See if it has a maximum length specified (MAXLEN)
                    if (AnnotationDictionary.Contains(PdfName.MAXLEN)) {
                        //If so, remove it
                        AnnotationDictionary.Remove(PdfName.MAXLEN);
                    }
                }
            }
            //Next we create a new document add import each page from the reader above
            using (FileStream FS = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (Document Doc = new Document()) {
                    using (PdfCopy writer = new PdfCopy(Doc, FS)) {
                        Doc.Open();
                        for (int i = 1; i <= R.NumberOfPages; i++) {
                            writer.AddPage(writer.GetImportedPage(R, i));
                        }
                        Doc.Close();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:40:34.540

我能够使用克里斯提供的信息来解决这个问题。在设置值之前，我试图删除任何字段的任何最大长度限制。

```
 //TargetObject is an AcroFields object
            AcroFields.Item item = TargetObject.GetFieldItem({FieldName});
            if (item != null)
            {
                foreach (var i in item.merged)
                {
                    if (i.GetType() == typeof(PdfDictionary))
                    {
                        PdfDictionary dictionary = (PdfDictionary)i;
                        if (dictionary.Contains(PdfName.MAXLEN))
                        {
                            dictionary.Remove(PdfName.MAXLEN);
                        }
                        break; //no need to continue once we find the dictionary and remove max length
                    }
                }
            } 
```

# prolog - Prolog：使用 dcg 规则忽略空格

> ID：10215122
> 
> 赞同：2
> 
> 时间：2012-04-18T17:55:54.253
> 
> 标签：prolog, spaces, palindrome, dcg

我在 SWI Prolog 中编写了一个程序来测试字符串是否是回文。DCG 中的这个任务我能够弄清楚，而且非常简单。

```
palindrome --> [X], palindrome, [X].  
palindrome --> [X],[X]. 
palindrome --> [X]. 
```

我想写一个忽略空格的规则，但是在搜索了一段时间后，没有什么真正符合我的要求。我对 DCG 还是很陌生，任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:24:51.323

您可以添加一个新子句来忽略空格：

```
palindrome --> " ", palindrome.
?- phrase(palindrome, "ab cba",[]).
true 
```

# objective-c - 获取 Web 服务响应数据

> ID：10215124
> 
> 赞同：0
> 
> 时间：2012-04-18T17:55:56.630
> 
> 标签：objective-c, ios, ios5

到目前为止，我已经做到了。它将使用 http Header 发出 json String 请求的代码。当我运行此代码时，我没有收到任何错误。但我得到一个表达式结果未使用的警告。发送此 http 标头后，我应该从 Web 服务获得响应。

代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *nid = @"";
    NSString *vocab = @"";
    NSString *inturl = @"testoverview";
    NSString *mail = @"chh@fbr.dk";
    NSString *md5pw = @"4d57e7ef1b7c3f431aca424764e9d786";

    NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                    nid, @"nid", 
                                    vocab, @"vocab",
                                    inturl, @"inturl",
                                    mail, @"mail",
                                    md5pw, @"md5pw",nil];
    NSError *error;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];
    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    if (!jsonData) {
        NSLog(@"Got an error; %@", error);
            } else if(jsonData) {

                NSString *url = @"http://www.taenk.dk/services/mobile";
                NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLCacheStorageAllowed timeoutInterval:30.0];

                [request setValue:jsonString forHTTPHeaderField:@"X-FBR-App"];
                [[NSURLConnection alloc] initWithRequest:request delegate:self]; <-- this line triggers the warning: "Expression result unused"

                NSLog(@"jsonString %@", jsonString);

            } 
```

任何人都可以为我澄清两件事：

1.  这是否会在请求 Web 服务后立即触发响应？
2.  如果是，我如何打印这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:15:24.050

您需要将结果分配给一个变量，例如

```
NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:... 
```

供以后使用（例如`[con cancel];`）

那么你至少应该实现委托方法`connection:didFailWithError:`。在课堂参考中，我再也看不到`connection:didFinishLoading...`了。你能用那个`sendSynchronousRequest:returningResponse:error:`代替，那么你就会得到结果，无论是正面的还是负面的。

这就是我检索数据的方式（这个版本没有 ARC）：

```
- (void) connection :(NSURLConnection *)conn didReceiveData :(NSData *)data {
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    [self checkAutoMailReply:msg];
    [msg release];
} 
```

`msg`包含纯响应数据，没有标题等。

# javascript - JS 有没有办法检查事件是否存在？

> ID：10215130
> 
> 赞同：7
> 
> 时间：2012-04-18T17:56:17.530
> 
> 标签：javascript, events, animation, webkit

我正在尝试检测`webkitAnimationEnd`浏览器是否支持某个 webkit 事件“”，为此我想检查该事件是否存在。但我似乎无法弄清楚如何。有人有线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:59:38.773

[在没有浏览器嗅探的情况下检测事件支持](http://perfectionkills.com/detecting-event-support-without-browser-sniffing/)表明这应该有效：

```
'onWebkitAnimationEnd' in document.createElement('div'); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-18T17:59:26.980

“支持”是什么意思？假设您的意思是*“将在特定情况下被浏览器触发”*，那么您需要简单地重新创建这些情况（通过脚本）并查看是否触发了事件；如果从未处理过事件，您可以使用超时处理程序做出否定响应。

通过测试来检测功能，而不是通过查看其他任何地方。

# r - gsub 返回表达式的所有匹配项，而不仅仅是最后一个匹配项

> ID：10215142
> 
> 赞同：4
> 
> 时间：2012-04-18T17:56:59.283
> 
> 标签：r, regex

我正在寻找一个 gsub 字符串，它将返回表达式的所有匹配项，而不仅仅是最后一个匹配项。IE：

```
data <- list("a sentence with citation (Ref. 12) and another (Ref. 13)", "single (Ref. 14)")
gsub(".*(Ref. (\\d+)).*", "\\1", data) 
```

退货

```
[1] "Ref. 13" "Ref. 14" 
```

所以我失去了参考。12\.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:13:13.003

您可以使用包中的`strapply`函数`gsubfn`来执行此操作：

```
library(gsubfn)

data <- list("a sentence with citation (Ref. 12) and another (Ref. 13)", "single (Ref. 14)") 
unlist(strapply(data,"(Ref. (\\d+))")) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T18:44:12.323

怎么样

```
sapply(data,stringr::str_extract_all,pattern="Ref. (\\d+))") 
```

?

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T18:03:52.047

这是一个函数——本质上是一个包装器`gregexpr()`——它将从单个字符串中捕获多个引用。

```
extractMatches <- function(data, pattern) {
    start <-  gregexpr(pattern, data)[[1]]
    stop  <-  start + attr(start, "match.length") - 1
    if(-1 %in% start) {
        ""    ## **Note** you could return NULL if there are no matches 
    } else {
        mapply(substr, start, stop, MoreArgs = list(x = data))
    }
}    

data <- list("a sentence with citation (Ref. 12), (Ref. 13), and then (Ref. 14)",
             "another sentence without reference")
pat <- "Ref. (\\d+)"

res <- lapply(data, extractMatches, pattern = pat)
res
# [[1]]
# [1] "Ref. 12" "Ref. 13" "Ref. 14"
# 
# [[2]]
# [1] "" 
```

（** 注意 **：如果您返回`NULL`而不是`""`在字符串中没有引用时返回，那么您可以对结果进行后处理`do.call("c", res)`以获取仅包含匹配引用的单个向量）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T19:49:18.867

我之前有一个非常相似的问题（[http://thebiobucket.blogspot.com/2012/03/how-to-extract-citation-from-body-of.html](http://thebiobucket.blogspot.com/2012/03/how-to-extract-citation-from-body-of.html)）并想出了这个（实际上非​​常接近本的） 解决方案：

```
require(stringr)
unlist(str_extract_all(unlist(data), pattern = "\\(.*?\\)")) 
```

给予：

```
[1] "(Ref. 12)" "(Ref. 13)" "(Ref. 14)" 
```

# c# - 使用 AttributeRouting 在 URL 中隐藏区域

> ID：10215144
> 
> 赞同：4
> 
> 时间：2012-04-18T17:57:05.720
> 
> 标签：c#, asp.net-mvc-3, routing, asp.net-mvc-routing, attributerouting

我们正在使用 Areas 对用 ASP.NET MVC3 编写的 API 进行版本控制，并使用 AttributeRouting 来定义我们的路由。

现在我们有一个“v1”区域，它是我们的第一个 API 版本。当我们到达 v2 时，我们将复制 v1 并进行修改。

我想对网站使用相同的版本控制，并且我不希望 /v1 出现在路由中。

我的问题是，如何在我的 URL 中隐藏区域以便我可以调用

```
mywebsite.com/Users/1 
```

代替

```
mywebsite.com/v1/Users/1 
```

这是我的控制器中的内容

```
 [RouteArea("/")]
    public class HomeController : Controller
    {
        //
        // GET: /v1/Home/
        [GET("")]
        public ActionResult Index()
        {
            return View();
        }

    } 
```

这是我尝试访问 mywebsite.com/ 时得到的结果

![错误](../Images/1ab833de2773c8113fbe9707d9a982a2.png)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T22:39:39.190

做这个：

```
[RouteArea("AreaName", AreaUrl = "")] 
```

默认情况下，区域以区域名称为前缀。AreaUrl 属性允许您覆盖它。我将在此处更新 wiki：[https ://github.com/mccalltd/AttributeRouting/wiki/Areas](https://github.com/mccalltd/AttributeRouting/wiki/Areas)

对困惑感到抱歉！

此外，您不应在通过 AR 定义的任何 url 的开头或结尾添加正斜杠。您的堆栈跟踪转储突出显示 MVC 正在名为“/”的文件夹中寻找视图。如果你想要一个空的网址，只需使用“”。

# ms-access - 用于对数据库执行多种 DDL 操作的 MS-Access 库（以方便应用程序版本升级）？

> ID：10215151
> 
> 赞同：1
> 
> 时间：2012-04-18T17:57:38.510
> 
> 标签：ms-access

我需要一个库来促进 MS Access 数据库上的大量 DDL 操作，以便执行产品升级。

例如，如果我向当前正在运行 1.0 的客户发布 3.0 版升级，我需要应用多个 DDL 操作以使其数据库架构与当前发布的版本保持一致。

因此，这可能包括添加新表、列、执行插入/更新查询等。

当然，可以手动编写所有这些，但是*可以*将各种最常见的操作封装到一个用户友好的库中，这使得编写（以及阅读）这些升级脚本变得更好。

有没有人遇到过这样的图书馆（或者在你愿意分享的项目中甚至有一个像样的图书馆？）

*（或者，是否有价格合理的商业产品，我可以指向 2 个不同的版本，并让它生成升级脚本？）*

# c++builder - 带有 c++Builder 错误的 libFLAC++

> ID：10215154
> 
> 赞同：0
> 
> 时间：2012-04-18T17:57:46.937
> 
> 标签：c++builder

libflac++ 包含器进行项目但有错误.. 有什么问题？

```
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::File::~File()' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::Stream::~Stream()' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::File::File()' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::Stream::is_valid() const' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::Stream::set_ogg_serial_number(long)' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::Stream::set_verify(bool)' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ
[ILINK32 Error] Error: Unresolved external 'FLAC::Encoder::Stream::set_streamable_subset(bool)' referenced from C:\USERS\INK\DESKTOP\AMUU UI\RELEASE\UNIT1.OBJ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:47:40.523

确保将 libFLAC 源代码编译到项目中或与库链接。

# entity-framework - 自动属性：DBSet vs ObjectSet

> ID：10215155
> 
> 赞同：3
> 
> 时间：2012-04-18T17:57:54.017
> 
> 标签：entity-framework, dbcontext

为什么我们可以使用自动属性`DBSet`，但不能使用`ObjectSet`：

```
public class SomeContext : DbContext
{        
    public DbSet<Address> Addresses { get; set; }
             ...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T19:57:22.930

DbContext 使用约定优于配置范式。它根据在 DbContext 派生类上定义的 DbSet 属性发现实体集（或者通常，它根据您的代码发现您的模型）。ObjectContext 不进行任何发现并且不基于约定。它只是从 csdl、ssdl 和 msl 工件中读取您的模型。因此，ObjectContext 要求用户准确地告知需要公开的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:57:11.640

仅仅是因为 DbContext API 是较新的版本，旨在提供简化的 API 以获得更好的开发体验。

# ruby-on-rails - Rails respond_with & Rspec 控制器：测试更新不成功

> ID：10215156
> 
> 赞同：5
> 
> 时间：2012-04-18T17:57:55.033
> 
> 标签：ruby-on-rails, rspec, respond-with

我正在尝试在 Rails 控制器中从使用 respond_to 切换到 respond_with。一切都很顺利，除了在控制器规格中测试无效保存。这是一个例子：

描述 MyController 做...

```
describe "PUT update" do
    context "with invalid attributes" do
      it "should re-render the edit page" do
        style = stub_model(Style)
        Style.stub(:find) { style } 
        Style.any_instance.stub(:save).and_return(false)
        put :update
        response.should render_template(:edit)
      end
    end
  end
end 
```

这适用于我的旧 response_to 样式更新操作，但使用 respond_with，我得到

> 失败/错误：response.should render_template("edit")

所以，简而言之 - 我如何测试这个？...或者我应该假设 render_with 知道它在做什么，根本不测试？有什么一般性的建议吗？

提前喝彩

PS：更新动作：

```
 def update
    @style = Style.find(params[:id])
    flash[:notice] = "Style updated" if @style.update_attributes(params[:style])
    respond_with(@style)
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T08:48:09.240

我一直在研究这个确切的东西（我是如何找到这个主题的） - 到目前为止，我有以下内容：

```
Location.any_instance.stub(:valid?).and_return(false)
Location.any_instance.stub(:errors).and_return('anything') 
```

（其中 Location 是我使用 respond_with 的模型）

但是我相信一定有更好的方法来做到这一点 - 如果我找到它，我一定会发布它！

*注意*：我也在使用响应者 gem，因此如果您不使用这些行之一，您可能不需要它！

# iphone - 获取具有唯一标识符的 NSManagedObject？

> ID：10215157
> 
> 赞同：0
> 
> 时间：2012-04-18T17:57:56.483
> 
> 标签：iphone, objective-c, core-data, nsmanagedobject

NSManagedObjects 是否带有任何类型的唯一标识符？

我需要获取几个对象，但它们很有可能具有相同的属性，那么在获取这些对象之后，我该如何区分它们呢？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T18:02:33.133

是的。每个[NSManagedObject](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/)都有一个[`-objectId`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/doc/uid/TP30001171-BAJGEDIA)返回[`NSManagedObjectID`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectID_Class/)实例的访问器。这些唯一标识有问题的对象。然后，您可以使用 NSManagedObjectContext 的方法[`-objectWithID:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/uid/TP30001182-BAJIFIGA)或[`-existingObjectWithID:error:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/uid/TP30001182-SW2).

请注意，如果插入后对象尚未保存，则对象 ID 将是一个临时 ID，在保存时会更改。您可以强制为持久 ID 分配[`-[NSManagedObjectContext obtainPermanentIDsForObjects:error:]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/uid/TP30001182-SW7)，尽管这与实际保存一样昂贵。

# mysql - 为什么我没有从我的关系表中得到任何输出？

> ID：10215160
> 
> 赞同：1
> 
> 时间：2012-04-18T17:58:12.693
> 
> 标签：mysql, database

我创建了 'students' 表，其中 'sid' 是主键，并且我在 sid 中​​插入了许多值。我创建了第二个名为“课程”的表，它有一个主键“cid”，我也输入了 cid 的值。现在，我想创建一个名为“enroll”的关系表，我已经这样做了——

```
create table enroll(
    grade char(2),
    sid int not null,
    cid int not null,
    primary key(sid,cid),
    foreign key (cid) references courses(cid) on delete cascade,
    foreign key (sid) references students(sid) on delete cascade
); 
```

现在，当我尝试使用查看表格时，`select * from enroll;` 我没有得到任何输出。它说“返回0行”。为什么是这样？它不应该具有其他表中 sid 和 cid 的所有值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:09:26.130

你刚刚创建了表结构，模式，你的表是空的，所以你没有得到任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:15:42.500

为了从其他表中的值创建一个新表，您可以执行以下操作：

```
CREATE TABLE new_table AS (SELECT * FROM old_table); 
```

*   选择语句将是要提取的字段。
*   您可以将列重命名为：选择 [字段名称] 作为 [您希望字段名称是什么]

欲了解更多信息，请阅读[这篇](http://www.techonthenet.com/sql/tables/create_table2.php)文章

无论如何，对于您的特定情况：

```
 Create table enroll AS (Select s.sid AS 'Sid', c.cid AS 'Cid' from courses c inner join students s on c.something = s.something) 
```

用学生的 id 替换 '.something'

# python - 在 gevent 中检测客户端断开连接

> ID：10215161
> 
> 赞同：2
> 
> 时间：2012-04-18T17:58:23.473
> 
> 标签：python, exception-handling, gevent, disconnect

如果我使用队列生成响应数据，我应该如何检测客户端是否与我的 gevent 网络服务器断开连接？现在我不断收到`Broken pipe`错误，但我不太明白我应该在哪里捕获这个异常（回溯只包括 gevent 自己的`pywsgi.py`和`socket.py`文件，没有我的代码）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:39:13.613

如果您从 WSGI 应用程序返回队列，我不确定该怎么做（如果我理解正确的话）。

如果您可以以不同的方式构建应用程序并使用 WSGI 的 write()，那么您可以像这样捕获套接字异常：

```
def application(environ, start_response):
    write = start_response('200 OK', [])
    try:
       write("response")
    except socket.error, ex:
       print ex 
```

# macos - 是否有一些用于 mac 的简单开发人员工具/IDE？

> ID：10215163
> 
> 赞同：-3
> 
> 时间：2012-04-18T17:58:41.863
> 
> 标签：macos

我需要编写将在 mac 上运行的简单应用程序。应用程序需要获取一些文本文件并通过 http 发送（使用 REST）。

是否有一些免费的 IDE 可以下载和使用？如果我会用 java 编写它 - 它是否在 mac 上运行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:00:35.000

不确定问题是否适用于此，但如果您想编写 Java，请使用 Eclipse。它是免费的，可以在 Mac 上运行。

# python - 如何从具有日期时间字段的 Django 模型中获取每个不同的“年份”值？

> ID：10215164
> 
> 赞同：6
> 
> 时间：2012-04-18T17:58:42.163
> 
> 标签：python, django

我可以在我的 Django 模型中按给定年份成功过滤，但我无法找到列出有效年份以便用户访问它们的方法。

我有一个 django 模型，其中定义了“日期时间”字段，哦，原来命名为“日期”。在我的模板中，我可以成功访问“bar.date.date.year”字段，所以我知道它存在，但是当我尝试以下功能时......

```
blog_years=[]
for entry in blog_entries:
    if entry.date.date.year not in blog_years:
        blog_years.append(entry.date.date.year) 
```

有人告诉我“'builtin_function_or_method' 对象没有属性 'year'”

我只能假设我正在绊倒我不熟悉的 Python 的某些方面，但我无法弄清楚它是什么。我很确定它必须是语法的，但除此之外......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-04-18T16:18:32.333

Django 有一种优雅而有效的方式来做到这一点。您可以从他们的文档中查看[https://docs.djangoproject.com/en/3.0/ref/models/querysets/#dates](https://docs.djangoproject.com/en/3.0/ref/models/querysets/#dates) 但要仔细阅读

```
Entry.objects.dates('pub_date', 'year') 
```

这将在查询中显示不同的年份值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-03T21:42:48.700

如果您使用的是 postgres，您可以这样做

```
  BlogEntry.objects.extra(select={"year": "EXTRACT(YEAR FROM date)"}).distinct().values_list("year", flat=True)

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-27T14:55:29.347

Python`set`不允许重复，所以如果你想要一个不同年份的列表：

`blog_years = list(set([entry.date.year for entry in blog_entries]))`

或者，您可以使用[`distinct()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)：

`blog_years = blog_entries.distinct(entry__date__year).values(entry__date__year)`

当然，根据您的模型调整上述内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T18:02:34.487

第一个`.date`访问日期时间对象。

第二个`.date`是访问返回日期对象但不调用它的日期时间对象上的方法（此步骤是不必要的）。

最后一部分（您编写它的方式）是尝试访问`year`date 方法的属性，而不是访问date 方法调用*结果*`year`的属性。

 *更正代码以查看差异，它看起来像这样......

```
blog_years=[]
for entry in blog_entries:
    if entry.date.date().year not in blog_years:
        blog_years.append(entry.date.date().year) 
```

但是你应该做的更像是这样......

```
blog_years=[]
for entry in blog_entries:
    if entry.date.year not in blog_years:
        blog_years.append(entry.date.year) 
```

因为 datetime 对象也有 date 属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T18:02:45.310

`date()`是一种方法`datetime`，使用

```
blog_years=[]
for entry in blog_entries:
    if entry.date.date().year not in blog_years:
        blog_years.append(entry.date.date().year) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-04T04:19:30.213

从 django 1.10 开始，它变得非常简单

```
from django.db.models.functions import ExtractYear 

blog_years= blog_entries.annotate(
      year=ExtractYear('created_on')
).values_list('year', flat=True)
blog_years = sorted(set(blog_years), reverse=True) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-27T14:46:31.720

它可能不是您所期望的（它可以在没有博客文章的情况下返回数年）：

```
from datetime import date
from django.db.models import Min

def blog_years():
    current_year = date.today().year
    queryset = Entry.objects.annotate(Min('date')).order_by('date')
    if queryset:
        oldest_year = queryset[0].date.date().year
    else:
        oldest_year = current_year
    return range(oldest_year, current_year + 1) 
```*

# python - 合并切片列表

> ID：10215167
> 
> 赞同：3
> 
> 时间：2012-04-18T17:58:51.373
> 
> 标签：python, list

我有一个包含 N 个元素的列表，我使用某个步骤对其进行切片，比如说 3：

```
slice0 = text[0::3]
slice1 = text[1::3]
slice2 = text[2::3] 
```

在分别进行一些处理之后，现在我需要将它们合并回它们在原始列表中的相同位置。有没有类似（简单）的方法来做到这一点？

例子：

```
L = [1,2,3,4,5,6] -> L0 = [1,4], L1 = [2,5], L2 = [3,6] 
```

然后进行一些处理（比如将每个列表分别乘以 1、2 和 3：

```
L0 = [1,4], L1 = [4,10], L2 = [9,18] 
```

将它们合并回原来的位置

```
L = [1,4,9,4,10,18] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:01:58.190

您可以使用该[`zip()`](http://docs.python.org/library/functions.html#zip)功能将它们重新组合在一起：

```
>>> l0 = [1,4]; l1 = [4,10]; l2 = [9,18]
>>> zip(l0, l1, l2)
[(1, 4, 9), (4, 10, 18)]
>>> [x for t in zip(l0, l1, l2) for x in t]
[1, 4, 9, 4, 10, 18] 
```

或使用[`itertools.chain`](http://docs.python.org/library/itertools.html#itertools.chain)：

```
>>> from itertools import chain
>>> list(chain(*zip(l0, l1, l2)))
[1, 4, 9, 4, 10, 18] 
```

正如其他人已经指出的那样，在 Python 3 中，`zip`生成器函数在哪里可能是更可取的。[`itertools.chain.from_iterable`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:02:27.403

```
>>> L0 = [1,4]
>>> L1 = [4,10]
>>> L2 = [9,18]
>>> [x for zipped in zip(L0, L1, L2) for x in zipped]
[1, 4, 9, 4, 10, 18] 
```

或替代使用[`itertools.chain`](http://docs.python.org/library/itertools.html#itertools.chain)：

```
>>> from itertools import chain
>>> list(chain.from_iterable(zip(L0, L1, L2)))
[1, 4, 9, 4, 10, 18] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:04:49.600

```
>>> from itertools import chain
>>> l0, l1, l2, = [1,4], [4,10], [9,18]
>>> list(chain.from_iterable(zip(l0,l1,l2)))
[1, 4, 9, 4, 10, 18] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:25:11.123

```
L0 = [1,4]
L1 = [4,10] 
L2 = [9,18]

#returns a tuple

my_data = sum(zip(L0,L1,L2),())

#or if you need a list

my_data = list(sum(zip(L0,L1,L2),())) 
```

元组：

```
>>> my_data
(1, 4, 9, 4, 10, 18) 
```

列表：

```
>>> my_data
[1, 4, 9, 4, 10, 18] 
```

# authentication - 在玩！2.0 带有安全特性的我如何在登录后重定向到原始 URL？

> ID：10215169
> 
> 赞同：6
> 
> 时间：2012-04-18T17:59:08.030
> 
> 标签：authentication, playframework-2.0

玩！框架 2.0，使用[安全特性](https://github.com/playframework/Play20/wiki/ScalaSecurity)：

如果我让用户在未经身份验证的情况下浏览网站的几个部分，但在某些操作上他们需要进行身份验证，我如何在身份验证之前将他们重定向到他们的原始 url，而不是所有的 url？

Play! 的要求与此问题类似！1.x [Playframework 的 Secure 模块在 login 后不会重定向到原始 url](https://stackoverflow.com/questions/7469312/playframeworks-secure-module-is-not-redirecting-to-the-original-url-after-login)。

但是，据我所知，原始 url 的 flash 参数在 2.0 中不可用。

基本上我正在寻找的更改将在**身份验证**方法处理程序中

```
def authenticate = Action { implicit request =>
    loginForm.bindFromRequest.fold(
      formWithErrors => BadRequest(html.login(formWithErrors)),
      user => Redirect(routes.Application.index).withSession(Security.username -> user._1)
    )
  } 
```

某种**Redirect(originalRequestUrl)**会很方便。

对干净的解决方案有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T09:10:02.480

您可以使用`Referer`标头，或在您的身份验证操作中显式携带*返回 url*：

# 使用`Referer`标题

```
def authenticate = Action { implicit request =>
  loginForm.bindFromRequest.fold(
    errors => BadRequest(html.login(errors)),
    user => {
      val returnUrl = request.headers.get(REFERER).getOrElse(routes.Application.index.url)
      Redirect(returnUrl).withSession(Security.username -> user._1)
    }
} 
```

# 显式携带返回 url

```
def authenticate(returnUrl: String) = Action { implicit request =>
  loginForm.bindFromRequest.fold(
    errors => BadRequest(html.login(errors, returnUrl)),
    user => Redirect(returnUrl).withSession(Security.username -> user._1)
  )
} 
```

通过使用`Referer`HTTP 标头，您仍然必须处理浏览器不填充此标头的情况，并且通过显式携带返回 url 作为您的`authenticate`操作的参数，您可能会在代码处理中通过身份验证获得更多样板......</p >

# fiddler - 如何在帖子正文到达服务器之前更改它？

> ID：10215170
> 
> 赞同：4
> 
> 时间：2012-04-18T17:59:10.147
> 
> 标签：fiddler

尝试编写我的第一个提琴手脚本。

如何在帖子到达服务器之前更改帖子正文？

我的意思是，我填写表格，单击提交，然后暂停以更改我想要的内容，最后发送到服务器。

我找到了这个脚本来更改响应，但我想更改请求。

```
if (oSession.HostnameIs("www.bayden.com") && oSession.oResponse.headers.ExistsAndContains("Content-Type","text/html")){
  oSession.utilDecodeResponse();
  oSession.utilReplaceInResponse('<b>','<u>');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:03:33.303

试试这个

```
if (oSession.uriContains("/myposturl")) {
   if (oSession.HTTPMethodIs("POST")){
      oSession["x-breakrequest"]="pause";
   }
} 
```

OnBeforeRequest

# sql-server - 将 varchar 值“N”转换为数据类型 int 时转换失败

> ID：10215171
> 
> 赞同：2
> 
> 时间：2012-04-18T17:59:10.680
> 
> 标签：sql-server, sql-server-2008

这是在 SQL Server 2008 R2 中。

我用这个拉头发。请密切关注。

当我运行它时，我得到 27 行返回：

```
select * 
from dbo.[12STD_NO_VISIT] 
where (
         (dbo.fPhoneExists(PhoneNumber1) = 1  
         AND (NextCall1 BETWEEN GETDATE() AND DATEADD(hh, 1, GETDATE())))
      ) 
```

当我运行它时，我返回了 21 行（注意对 PhoneNumber2 和 NextCall2 的更改）：

```
select * 
from dbo.[12STD_NO_VISIT] 
where (
          (dbo.fPhoneExists(PhoneNumber2) = 1  
           AND (NextCall2 BETWEEN GETDATE() AND DATEADD(hh, 1, GETDATE())))
      ) 
```

但是，当我运行这个，“ORing”这两个条件时，我得到一个错误：

> 将 varchar 值“N”转换为数据类型 int 时转换失败

```
select * 
from dbo.[12STD_NO_VISIT] 
where (
          (dbo.fPhoneExists(PhoneNumber1) = 1  
           AND (NextCall1 BETWEEN GETDATE() AND DATEADD(hh, 1, GETDATE())))
       OR  
          (dbo.fPhoneExists(PhoneNumber2) = 1
           AND (NextCall2 BETWEEN GETDATE() AND  DATEADD(hh, 1, GETDATE())))
      ) 
```

但它不只是给我错误。它首先检索 42 行，并在瞬间显示（结果选项卡），然后显示错误（消息选项卡）。

我想不通这个。非常感谢任何帮助。

谢谢！

```
FUNCTION [dbo].[fPhoneExists](@PhoneNumber varchar) 
RETURNS BIT 
WITH EXECUTE AS CALLER 
AS 
BEGIN 
DECLARE @GoodNumber bit 
IF (@PhoneNumber is NULL or @PhoneNumber = 0 or @PhoneNumber = '') 
  SET @GoodNumber = 0; 
ELSE 
  SET @GoodNumber = 1; 
  Return(@GoodNumber); 
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:05:22.330

`PhoneNumber1`和的数据类型是`PhoneNumber2`什么？的定义是`dbo.fPhoneExists`什么？我怀疑问题出在某个地方——或者正如 Lynn 所暗示的，查询可能比您向我们展示的要多（查询整体上要么成功要么失败；它不会产生 42 行然后出现错误）。

现在我们看到了函数，这里是一个重写：

```
ALTER FUNCTION [dbo].[fPhoneExists]
(
  @PhoneNumber VARCHAR -- varchar(what)? This should match definition of column
) 
RETURNS BIT 
WITH EXECUTE AS CALLER 
AS 
BEGIN
  RETURN (SELECT CASE WHEN COALESCE(@PhoneNumber, '') IN ('0', '') THEN 0 ELSE 1 END);
END
GO 
```

没有理由将临时逻辑存储在变量中，还要注意您*仅*在 ELSE 条件下返回变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:37:56.747

您的`dbo.fPhoneExists`函数在表达式中包含隐式转换`PhoneNumber = 0`，根据[数据类型 Peecendence](http://msdn.microsoft.com/en-us/library/ms190309.aspx)的规则将`PhoneNumber`VARCHAR 值转换为 int。如果字符串中的值不是数字，则此转换将失败。您还陷入了假设在 SQL 中保证布尔运算符短路的谬误，这根本不是真的。SQL 是一种声明性语言，[**不保证**](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)[布尔运算符的求值顺序](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)**。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T19:13:14.453

`fnPhoneExists`通过用以下函数替换函数，您将获得更好的性能`CASE`：

```
select * 
from dbo.[12STD_NO_VISIT] 
where (
          (case when ISNULL(PhoneNumber1,'') not in ('0','') then 1 else 0 end=1
           AND (NextCall1 BETWEEN GETDATE() AND DATEADD(hh, 1, GETDATE())))
       OR  
          (case when ISNULL(PhoneNumber2,'') not in ('0','') then 1 else 0 end=1
           AND (NextCall2 BETWEEN GETDATE() AND  DATEADD(hh, 1, GETDATE())))
      ) 
```

这是因为优化器不会优化 fnPhoneExists 的内容。**

# jsf-2 - JSF 2\. 使用 IE7 在页面之间导航的奇怪行为

> ID：10215173
> 
> 赞同：1
> 
> 时间：2012-04-18T17:59:17.917
> 
> 标签：jsf-2, internet-explorer-7

我有一个 Web 应用程序，其中第一页是登录页面，一旦我正确登录，就会显示主页。该页面有一个选项卡式菜单，**如果我第一次单击其中一个选项卡，主页面会再次刷新，而不是转到请求的页面**。这仅发生在第一个 clic 上。其他时候，一切正常。

我用 Firefox、Chrome 和 IE7 给它发短信，**这种行为只发生在 IE7**上。为什么会这样？错误可能在哪里？因为我不知道我应该在这里复制哪一段代码来澄清我的问题。

PD：我使用过滤器，主页使用 bean 来填充表格。我也试过`<redirect/>`tag in `faces-cofig.xml`，它解决了这个问题。但是该页面始终显示登录页面中包含的“无效用户”弹出窗口。最后，我丢弃了它。

## 更新一些代码

我认为问题不在于主页，因为我将其替换为其他页面并且行为相同...（更新 2）但是使用简单的 html 页面可以正常工作。

*登录.xhtml：*

```
<h:form id="login">
    <h:outputText value="#{msg['login.user']}"/>
    <h:inputText value="#{LogBean.name}" required="true"/>
    <h:outputText value="#{msg['login.password']}"/>
    <h:inputSecret value="#{LogBean.pass}" required="true"/>
    <p:commandButton id="botonAccesoPrim"
                    value="#{msg['login.enter']}"
                    action="#{LogBean.checkLog}"
            oncomplete="dlg1.show();">
</p:commandButton>

<p:dialog id="popup" 
      visible="#{LogBean.popup}"
      widgetVar="dlg1"
      modal="true">  
          <h:outputText value="Invalid User." />  
</p:dialog> 
```

*日志豆：*

```
public class LogBean {

private String name;
private String pass;
private String validate = "";
private String popup = "false";

    //Getters, setters

public String checkLog() throws Exception {

    if (correctLog(md5Final)) {
        popup = "false";
        validate= "success";
        return validate;
    }
    else {
        popup = "true";
        validate = "fail";
        return validate;
    }
}

public boolean correctLog(String md5) throws SQLException {

    boolean correct = false;
    String sql = "SELECT ...";
    String passBBDD = null;

    cConexionOracle.conecta();
    ResultSet result = OracleConnection.query(sql);
    if (!(result.next()))
        return correct;
    else {
        passBBDD = result.getString("pass");
        if (md5.equals(passBBDD))
            correct = true;
    }
    OracleConnection.desconect();
    return correct;
}

public boolean isLogged () {
    return name != null;

} 
```

*面孔配置：*

```
 <managed-bean>
       <managed-bean-name>LogBean</managed-bean-name>  
       <managed-bean-class>LogBeanClass</managed-bean-class>  
       <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
       <managed-bean-name>mainBean</managed-bean-name>  
       <managed-bean-class>MainBeanClass</managed-bean-class>  
       <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

<navigation-rule>
   <from-view-id>/HTML/login.xhtml</from-view-id>
   <navigation-case>
    <from-action>#{LogBean.checkLog}</from-action>
    <from-outcome>success</from-outcome>
    <to-view-id>/HTML/main.xhtml</to-view-id>
    <redirect/>
   </navigation-case>
   <navigation-case>
    <from-action>#{LogBean.checkLog}</from-action>
    <from-outcome>fail</from-outcome>
    <to-view-id>/HTML/login.xhtml</to-view-id>
   </navigation-case>
</navigation-rule> 
```

*过滤登录：*

```
public void doFilter (ServletRequest request, ServletResponse response,
                    FilterChain chain) throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse resp = (HttpServletResponse) response;

    if (req.getRequestURI().endsWith("login.jsf")) {
        chain.doFilter(req, resp);
        return;
    }

    HttpSession session = req.getSession(false);
    if (session != null) {
        LogBean BeanConnection = (LogBean) req.getSession().getAttribute("LogBean");
        if (BeanConnection != null && BeanConnection.isLogged()) {
            chain.doFilter(req, resp);
            return;
        }
    }
    resp.sendRedirect(req.getContextPath() + "/HTML/login.jsf");
} 
```

*web.xml*

```
<filter>
  <filter-name>Filter</filter-name>
  <filter-class>FilterLogin</filter-class>
</filter>
<filter-mapping>
  <filter-name>Filter</filter-name>
  <url-pattern>/HTML/*</url-pattern>
</filter-mapping> 
```

*mainBean：（*更新 2）

```
private ArrayList<mainClass> mainList = new ArrayList<mainClass>();
private String name;
//...

//Getters, setters.

@PostConstruct
public void populateMainList() {

    String sql = null;
    if (name == null) {
        sql = "SELECT ...";
    }
    else
        sql = "SELECT ... LIKE '%"+name+"%'";

    OracleConnection.connect();
    ResultSet result = OracleConnection.query(sql);
    try {
        while(result.next()){
            mainClass main = new mainClass();           
            main.set...(result.getLong("someProperty"));
            mainList.add(main);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    OracleConnection.disconnect();
}

public ArrayList<mainClass> getMainList() throws SQLException {
    return mainList;
} 
```

*main.xhtml*

```
<h:inputText id="search" value="#{mainBean.name}"> </h:inputText>
<h:commandButton id ="SubmitSearch" action="#{mainBean.seachButton}"></h:commandButton>    
<h:commandButton id ="new" value="New" action="#{sistemaBean.newButton}"> </h:commandButton>
<t:dataTable id="data" rows="1" value="#{mainBean.mainList}" var="item"
             width="95%" border="0" align="center" cellpadding="0" cellspacing="0">
   <t:column width="42%">
      <f:facet name="header">
         <h:outputText value="Name"/>
      </f:facet>
      <h:commandLink value="#{item.shortName}" action="#{detailledMainBean.mainDetail}">
        <f:param name="idMain" value="#{item.idMain}"/>
      </h:commandLink>
   </t:column>
   <t:column>
      <f:facet name="header">
         <h:outputText value="Description"/>
      </f:facet>
      <h:outputText value="#{item.description}"/>
   </t:column>
</t:dataTable>
<t:dataScroller id="scroller" for="data"
                paginator="false" paginatorMaxPages="5"
                paginatorColumnClass="style"
                immediate="true"
                pageCountVar="pageCount" pageIndexVar="pageIndex"
                disableFacetLinksIfFirstPage="true"
                disableFacetLinksIfLastPage="true"
                renderFacetLinksIfFirstPage="false"
                renderFacetLinksIfLastPage="false"
                paginatorRenderLinkForActive="false"
                renderFacetsIfSinglePage="false"
                displayedRowsCountVar="true">   
   <f:facet name="previous">
      <t:outputText styleClass="style" value=" &laquo; Previous | "/>
      <t:outputText styleClass="style" value="Page #{pageIndex} / #{pageCount}"/>
   </f:facet>
   <f:facet name="next">
      <t:outputText styleClass="style" value=" | Next &raquo;"/>
   </f:facet>
</t:dataScroller> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:07:30.247

IE7 和 jsf 2 会给你带来各种各样的问题。我们没有专门遇到这个问题，但还有很多其他问题。

我们的问题主要归结为表格。JSF 以表格为中心，许多组件通过一个或多个表格转换为 html。例如，我们通常不得不使用一些额外的 css 来对齐。

对于某些表格，我们必须使用 javascript 设置表格标题宽度。问题是 IE7 打破了表格，因为它无法确定标题宽度。

不确定您是否可以从中得出任何线索。但我建议您考虑解决方法，而不是“代码有什么问题”。

# android - Android FileObserver 在 USB 大容量存储模式下未调用 onEvent

> ID：10215183
> 
> 赞同：0
> 
> 时间：2012-04-18T17:59:46.623
> 
> 标签：android, inotify, usb-mass-storage, fileobserver

我将 FileObserver 连接到 /mnt/sdcard/X 中的特定目录及其后代递归。当我从手机本身（例如从 Gallery 应用程序）修改此目录的内容时，我的 FileObserver 的 onEvent() 被正确调用并且一切正常。

当我通过 USB 连接到计算机并切换到大容量存储模式时，通过计算机对同一目录所做的所有更改都不会转换为 FileObserver 的事件。FileObserver 是否存在不能在 USB 大容量存储中工作的限制？

我尝试了“adb push xx /mnt/sdcard/X/xx”，并且这个更改也被正确记录了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:42:35.660

> FileObserver 是否存在不能在 USB 大容量存储中工作的限制？

*当通过 USB 大容量存储 (Android 1.x/2.x) 挂载时，Android 中的*任何内容都不适用于外部存储。*外部存储由安装它的操作系统专有。`FileObserver`当存储如此安装时，您将不会收到事件。*

 *Android 3.0+ 使用媒体传输协议 (MTP) 而不是 USB 大容量存储，因此`FileObserver`应该可以在较新版本的 Android 上使用外部存储，即使另一个操作系统可以访问该存储。*

# objective-c - AFHTTPRequestOperation 阻塞 UI

> ID：10215185
> 
> 赞同：0
> 
> 时间：2012-04-18T17:59:56.200
> 
> 标签：objective-c, ios, afnetworking

我有以下代码从 php 脚本中获取一些数据。我发现它阻塞了界面，因此进度指示器不会旋转。有没有一种简单的方法可以将它发送到后台，以便 UI 可以自由地做任何需要的事情？我的印象是使用块可以实现这一点，但我显然错了（一步一步地学习 Obj-C！）

谢谢！

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        self.user.username, @"username",
                        self.user.password, @"password",
                        nil];
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:
                        [NSURL URLWithString:@"http://domain.com"]];

    // Show animated progress indicator, etc    
[self enbleLoadingState:YES];

[client postPath:@"/en/api/login" parameters:params success:^(AFHTTPRequestOperation *operation, id response) {
    [self enbleLoadingState:NO];
    // Do stuff

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    [self enbleLoadingState:NO];
    // Show error
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:43:59.510

此代码应该可以工作，请求在后台加载。问题一定出在其他地方。我不知道时间花在主线程上，也许在`enbleLoadingState:`？启动请求的方法应该立即返回。通过在方法的开头和结尾以及成功块内插入 NSLog 来测试这一点。成功块中的 NSLog 应该最后打印出来。

# java - 如何为 PopupWindow 制作选项菜单？

> ID：10215188
> 
> 赞同：0
> 
> 时间：2012-04-18T18:00:00.743
> 
> 标签：java, android, android-ui

我的应用程序有一个选项菜单，它在几乎所有活动中都可用，它是通过实现 onCreateOptionsMenu() 创建的。但是在一个 Activity 中有一个 PopupWindow，当此 PopupWindow 具有焦点（正常运行所需）时，点击菜单按钮不会显示选项菜单。

PopupWindows 没有 onCreateOptionsMenu() 函数。还有其他方法可以将选项菜单添加到 PopupWindow 吗？

或者，当用户点击菜单按钮时，有没有办法从它后面的 Activity 中获取选项菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:30:41.537

我通过拦截菜单键并在活动上调用 openOptionsMenu() 解决了这个问题。这是关键的监听器：

```
OnKeyListener mMenuKeyListener = new OnKeyListener() {
    @Override
    public boolean onKey(View view, int keyCode, KeyEvent event) {
        if(keyCode==KeyEvent.KEYCODE_MENU) {
            activity.openOptionsMenu();
            return true;
        } else {
            return false;
        }
    }
}; 
```

我认为您必须将此关键侦听器添加到 PopupWindow 中的每个视图才能使其正常工作，因此我编写了一个函数来做到这一点：

```
public void setupMenuKeyListenerRecursive(View v) {
    if (v != null) {
        try {
            ViewGroup viewGroup = (ViewGroup)v;
            int childCount = viewGroup.getChildCount();
            for (int index = 0; index < childCount; index++) {
                View child = viewGroup.getChildAt(index);
                setupMenuKeyListenerRecursive(child);
            }
        } catch (Exception e) {
        }
        v.setOnKeyListener(mMenuKeyListener);
    }
} 
```

# entity-framework - 内存查询：DBSet vs ObjectSet

> ID：10215191
> 
> 赞同：1
> 
> 时间：2012-04-18T18:00:06.747
> 
> 标签：entity-framework, dbcontext

执行的内存查询`DBSet<T>.Local`也将返回尚未保存到数据库的新添加的实体。是否有一些功能可以让我们在`ObjectSet`（顺便说一句——我知道我们可以用它`ObjectStateManager.GetObjectStateEntries`来获得类似的结果）上执行这样的内存查询？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:55:54.170

`Local`只是`ObservableCollection`围绕`ObjectStateManager.GetObjectStateEntries`.

# c# - EF4 Code First 数据库生成

> ID：10215192
> 
> 赞同：2
> 
> 时间：2012-04-18T18:00:15.523
> 
> 标签：c#, asp.net-mvc, database-design, entity-framework-4

我是 Entity Framework 的初学者，我被困在无法让代码生成数据库的地方。

我的上下文是这样的：

```
 public class ChatContext : DbContext
    {
        public ChatContext()
            : base("ChatContext")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<ChatRoom>()
                         .Map(c => c.ToTable("chat_rooms"));

            modelBuilder.Entity<ChatUser>()
                        .HasMany(u => u.Rooms)
                        .WithMany(r => r.Users)
                        .Map(c => c.ToTable("chat_users"));

            modelBuilder.Entity<ChatUser>()
                       .HasMany(u => u.ConnectedUsers);

            base.OnModelCreating(modelBuilder);
        }

        public DbSet<ChatUser> Users { get; set; }
        public DbSet<ChatRoom> Rooms { get; set; }
        public DbSet<ChatMessage> Messages { get; set; }    
    } 
```

还有我的 Global.asax：

```
public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        }

        protected void Application_Start()
        {
            Database.SetInitializer<ChatContext>(new DropCreateDatabaseIfModelChanges<ChatContext>());

            RegisterRoutes(RouteTable.Routes);
        }
    } 
```

我在 Web.config 中的连接字符串：

```
<connectionStrings>
    <add name="ChatContext" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=ChatContext;Integrated Security=True" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

谁能发现问题出在哪里？当我构建项目时，不会返回任何错误。Global.axax 中的断点显示它命中了 Application_Start()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:12:05.440

您需要执行查询。这将检查数据库是否存在，如果不存在，则将创建它。

# ajax - 按下带有 Insert into RenderBody() 的 asp.net mvc Ajax.ActionLink 会导致无限循环

> ID：10215193
> 
> 赞同：0
> 
> 时间：2012-04-18T18:00:17.577
> 
> 标签：ajax, asp.net-mvc, jquery, actionlink

我的主索引视图中有这些 ActionLink：

```
<p>@Ajax.ActionLink("Releases", "Index", "Release", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentPanel" })</p>
<p>@Ajax.ActionLink("Templates", "Index", "Template", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentPanel" })</p>
<p>@Ajax.ActionLink("Testplans", "Index", "Testplan", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentPanel" })</p> 
```

下面是这个：

```
<div id="ContentPanel">
    @RenderBody()
</div> 
```

当我依次单击每个链接 Release、Templates、Testplans 时，视图的切换工作。

当我按此顺序单击时：

```
Releases
Templates
Releases
Templates 
```

切换不再起作用。问题似乎是当我在控制器索引方法中设置断点时：

```
public ActionResult Index()
{
    return View();
} 
```

索引操作在 looooooop 中调用？？

为什么这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:00:47.060

你可以试试这个代码：

```
Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Layout.cshtml"; 
```

# php - 提交按钮生成 if else 语句

> ID：10215195
> 
> 赞同：0
> 
> 时间：2012-04-18T18:00:18.877
> 
> 标签：php

当单击以使用 if else 语句时，我想要我的提交按钮。如果一个字段是 6+，提交应该发送一封电子邮件，如果不是，它应该重定向到一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:04:52.157

所以你的表单中有 6 个字段？

如果是这样，那么就这样做：

```
if($_POST['fieldname'] != null)
{
  send mail
}
else
{
  redirect
} 
```

您可以对所有 6 个字段执行此操作，或者您可以轻松简化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:07:39.720

您可能需要`if($isSending >= 6):`并且可能会检查，`$isSending === false`但除此之外它应该可以工作。

您是否有特定的部分有问题？

# git - Git在单个文件的历史记录中搜索字符串

> ID：10215197
> 
> 赞同：210
> 
> 时间：2012-04-18T18:00:25.873
> 
> 标签：git

因此，如果我有一个名为**foo.rb**的文件，并且它给我一个名为**bar**的缺失方法的错误，那么我想在**foo.rb**的历史记录中搜索该字符串`bar`以查看它是否在过去被定义过。

我发现这个[Search all of Git history for a string?](https://stackoverflow.com/questions/4468361/search-all-of-git-history-for-string)

但这会搜索所有文件。我只想在一个文件中搜索。

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-04-18T18:55:53.163

为此，您可以使用 -S 选项来 git log：

```
git log -S'bar' -- foo.rb 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T07:02:55.530

或者也许你可以试试这个（来自相关问题*[Search all of git history for string](https://stackoverflow.com/questions/4468361/search-all-of-git-history-for-string)*）

```
git rev-list --all foo.rb | (
    while read revision; do
        git grep -F 'bar' $revision foo.rb
    done
) 
```

它实际上会查找文件内容，而不是为任何出现的 bar 提交消息/补丁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:16:21.457

git log 命令有一个覆盖（来自[手册](http://book.git-scm.com/3_reviewing_history_-_git_log.html)）：

```
$ git log Makefile      # commits that modify Makefile 
```

所以你可以使用：

```
git log foo.rb | grep "bar" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-29T11:26:52.967

我使用 `git log -S "string" --follow -p "path of file"`它显示了该字符串的所有更改的完整历史记录。

# java - UDP在这里丢失了我的数据包的一部分吗？

> ID：10215207
> 
> 赞同：0
> 
> 时间：2012-04-18T18:00:54.347
> 
> 标签：java

我试图向用户发送一个数据包，通知他们当前在服务器上的所有人，当他们向服务器发送一条包含“谁”字样的消息时。

这是我的代码：

```
else if( response.contains( "who" ) )
{
     System.out.println( "Size of names collection: "+names.size() );

     buf = null;
     buf = names.toString().getBytes();

     int thisPort = packet.getPort();
     packet = new DatagramPacket( buf, buf.length,packet.getAddress(),thisPort );
     socket.send(packet);
} 
```

上面 print 语句的输出是 2 表示有两个人在上面，例如 andrew 和 james。现在，当我将其打包并发送时，我希望它会输出以下内容：

[安德鲁，詹姆斯]

但相反，客户得到：

[安德鲁，

就是这样。有什么问题？顺便说一句，我必须为此使用 UDP 并且无法切换到 TCP

***更新***

这是接收数据包的客户端类中的代码：

```
 while( true )
        {
            try
            {
                // Set the buf to 256 to receive data back from same address and port
                buf = null;
                buf = new byte[256];
                packet = new DatagramPacket(buf, buf.length, address, 4445);
                socket.receive(packet);

                String response = new String( packet.getData() );

                // Receive the packet back
                System.out.println( response );
            }
            catch( IOException e )
            {

            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T22:03:19.990

您的数据报被截断为 256 个字节，因为这是您为接收 DatagramPacket 声明的缓冲区的大小。如果您的数据报可以更长，请使缓冲区更大。

最佳做法是使其比您期望接收的最大数据报大一。然后，如果您收到一个这样的大小，您就会遇到应用程序协议错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:54:39.787

您应该在发送/接收操作之后分别在客户端和服务器上检查 DatagramPacket 的长度（使用 getLength 方法）以确保它是相同的，这将是第一个提示。你用什么集合来*命名*？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:09:29.300

你的问题不完整。然而..

UDP 丢包。这就是为什么将 UDP 用于文件传输目的不可靠的原因。Adobe RTMFP 使用 UDP 传输音频和视频数据，其中许多数据包丢失。但与 TCP 相比，音频/视频内容流式传输确实更快。我不知道这是否回答了您的问题，我只想说 UDP 确实会丢失数据包。

# javascript - DIV Style 和 DIV Position 不协调

> ID：10215208
> 
> 赞同：0
> 
> 时间：2012-04-18T18:01:11.643
> 
> 标签：javascript, html, stylesheet

```
<div id=mmactivate style='display: none'>
<form>
<INPUT TYPE="text" NAME="date1xx" VALUE="" SIZE=25>
<IMG SRC=CalandarIcon.png HREF="#" onClick="cal1xx.select(document.forms[0].date1xx,'anchor1xx','MM/dd/yyyy'); return false;" TITLE="cal1xx.select(document.forms[0].date1xx,'anchor1xx','MM/dd/yyyy'); return false;" NAME="anchor1xx" ID="anchor1xx">
<DIV ID="testdiv1" STYLE="position:absolute;background-color:white;layer-background-color:white;"></DIV>
</form>
</div> 
```

此代码用于激活弹出式 Java 日历。由于某种原因， style='display: none' 和 position:absolute; 不一起玩。如果我删除一个或另一个它可以工作，否则当我单击它时它什么也不做......

关于如何使其工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:08:01.407

这么多错误

1.  Java 不是 JavaScript。^(*[金属蛙]*)
2.  第 1 行：`id=mmactivate`应该是`id="mmactivate"`
3.  第 2 行：表单不包含方法、动作或编码类型。^(*[先生。李斯特]*)
4.  第 4 行：为什么字段中有脚本`title`？
5.  第 4 行：为什么图像具有`href`属性。^(*[先生。李斯特]*)
6.  第 4 行：内联事件处理程序是一个糟糕的选择。
7.  第 5 行：`testdiv1`是“mmactivate”的子代，所以它必须跟随其父代`display: none;`

# android - 安卓谷歌地图问题

> ID：10215209
> 
> 赞同：1
> 
> 时间：2012-04-18T18:01:14.793
> 
> 标签：android, google-maps-api-3

1.  我正在尝试为每个活动构建一个基本布局。布局有一个操作栏和一个页脚。我在常规活动中显示页脚没有问题，但 MapView 活动没有显示我的页脚，尽管我将它添加到 xml：

    ```
    <include layout="@layout/actionbar"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">
    </include>

    <com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:clickable="true" 
    android:enabled="true"   
    android:apiKey="@string/mapAppId" />

    <include layout="@layout/footer"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">
    </include> 
    ```

2.  地图加载完成后，有没有办法在 MapView 中加载我的标记？现在有时我的标记会在地图加载完成之前显示出来..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:43:08.630

```
<include layout="@layout/actionbar"
android:id="@+id/headerlayout"
android:layout_height="wrap_content"
android:layout_width="fill_parent">
</include>

<com.google.android.maps.MapView
android:layout_below="@+id/headerlayout"
android:layout_above="@+id/footerlayout"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapView"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:clickable="true" 
android:enabled="true"   
android:apiKey="@string/mapAppId" />

<include layout="@layout/footer"
    android:id="@+id/footerlayout"
android:layout_height="wrap_content"
android:layout_width="fill_parent">
</include> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:13:44.550

好的，我在可能的地图中发现了错误，
这是正确的代码：

```
 <com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="0dp"
android:layout_weight="2"   
android:clickable="true" 
android:enabled="true"   
android:apiKey="@string/mapAppId" />

<include layout="@layout/footer"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">
 </include> 
```

注意地图中的 android:layout_height 和 android:layout_weight 。

我仍然不知道如何在显示标记之前检查地图是否已经加载

# ms-access - 将直通查询中的记录附加到本地表

> ID：10215212
> 
> 赞同：2
> 
> 时间：2012-04-18T18:01:32.083
> 
> 标签：ms-access, ado, vba

我有一个 Access 数据库，我正在使用传递查询从 AS400 表中返回记录。连接字符串和通过查询工作正常，但现在我试图将 pt 查询的结果填充到数据库中的本地表中，并且我的代码超时。这是我第一次尝试 ADO，所以我用“我不是 100% 确定我在做什么！”来否认我的代码。你能看看这个，看看我做错了什么明显的事情吗？任何方向将不胜感激。先感谢您。

```
 Sub mod_ADODBConnect()
      Const NewTableName = "MyNewTable"
      Dim cn As ADODB.Connection
      Dim rs As ADODB.Recordset
      Dim db As DAO.Database
      Dim sSQL1 As String
      Dim sSQL2 As String

      sSQL1 = "SELECT ITMNUM, ITMDS, ITPKDS, MJCMCD, SBCMCD, STATUS, PRITIN, OGEXDT         from PDBLLIB007.BLPMST07"
      sSQL2 = "INSERT INTO ' & NewTableName & ' SELECT [" & sSQL1 & "].* from [" & sSQL1 & "]"

      Set cn = New ADODB.Connection
      cn.Open "Driver={Client Access ODBC Driver (32-bit)};" & _
        "System=DC007; Uid=XXXXX; Pwd=XXXXXX; MgDSN=0; ConnType=2;" & _
        "BlockSize=512; MaxFieldLen=2048; LazyClose=1; Prefetch=1; QueryTimeOut=0;     Translate=1"

     Set rs = New ADODB.Recordset
     rs.Open sSQL1, cn, adOpenDynamic, adLockOptimistic

     Do While Not rs.EOF
        rs.MoveNext
     Loop

   Set db = CurrentDb
   db.Execute ("sSQL2")

   rs.Close
   cn.Close

   Set rs = Nothing
   Set cn = Nothing
   Set db = Nothing
   End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:28:12.240

您有一个传递查询，它工作正常并返回您想要的行。现在您想将这些行存储在一个新的本地 (Jet/ACE) 表中。*在我看来，一种更简单的方法是在新的“制作表*”查询中使用传递作为数据源。

```
SELECT * INTO MyNewTable FROM YourPassThruQuery; 
```

糟糕，您似乎打算将这些行附加到现有表中。

```
INSERT INTO MyNewTable
SELECT * FROM YourPassThruQuery; 
```

如果表结构不匹配，您可以使用两个表的字段列表。

```
INSERT INTO MyNewTable (fld1, fld2)
SELECT first_field, second_field FROM YourPassThruQuery; 
```

# xcode - NSXMLParser 无法解析特殊字符（重音）

> ID：10215221
> 
> 赞同：10
> 
> 时间：2012-04-18T18:02:09.957
> 
> 标签：xcode, xml-parsing, nsxmlparser, nsxml, nsxmlelement

[我正在使用 NSXMLParser 从 url 解析 xml （我的代码几乎与此处](https://stackoverflow.com/questions/5070237/problemas-com-parse-xml-iphone)完全相同）

一些元素包含特殊字符，例如“á”，这会导致单词 likándre 分成两个（á 和 ndre）。

这是我的 loadXMLByURL

```
-(id) loadXMLByURL:(NSString *)urlString{
tickets     = [[NSMutableArray alloc] init];
NSURL *url      = [NSURL URLWithString:urlString];
NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
parser          = [[NSXMLParser alloc] initWithData:data];
parser.delegate = self;
[parser parse];
return self;} 
```

我很确定这是因为未设置编码（我认为它需要是 NSUTF8StringEncoding），但我不确定在哪里/如何应用它。

[更新]我的其余代码......

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{    
    if ([elementname isEqualToString:@"ticket"]) 
    {
        currentTicket = [Ticket alloc];
    }

}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementname isEqualToString:@"name"]) 
    {
        currentTicket.name = currentNodeContent;
    }
    else if ([elementname isEqualToString:@"title"]) 
    {
        currentTicket.title = currentNodeContent;
    }
    else if ([elementname isEqualToString:@"status"]) 
    {
        currentTicket.status = currentNodeContent;
    }
    else if ([elementname isEqualToString:@"ticket"])
    {
        [tickets addObject:currentTicket];
        [currentTicket release];
        currentTicket = nil;
        [currentNodeContent release];
        currentNodeContent = nil;
    }

}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

[更新 2] 示例 xml...

```
<RB>
    <list>
        <ticket>
            <name>Andrew Ford</name>
            <title>3rd release</title>
            <status>1</status>
        </ticket>

        <ticket>
            <name>David Jenkins</name>
            <title>3rd release</title>
            <status>0</status>
        </ticket>

        <ticket>
            <name>Luis gomez ándre</name>
            <title>3rd release</title>
            <status>1</status>
        </ticket>
    </list>
</RB> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:22:46.447

我会将 url 加载到 an`NSString` 然后像这样转换。

```
-(id) loadXMLByURL:(NSString *)urlString{

    tickets     = [[NSMutableArray alloc] init];
    NSURL *url      = [NSURL URLWithString:urlString];
    NSError *error;
    NSString * dataString = [[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];
    NSData *data = [dataString dataUsingEncoding:NSUTF8StringEncoding];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;

} 
```

编辑：部分问题可能是您的`parser:foundCharacters:`方法分配给您`currentNodeContent`而不是附加。请参阅以下链接中的 Apple Doc。

[http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

从文档：

> 因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-16T00:41:54.937

发现问题了！它确实存在于发现的字符中。您应该将代码更改为：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"found characters: %@", string);
    if (!currentNodeContent) {
        currentNodeContent = [[NSMutableString alloc] init];
    }
    [currentNodeContent appendString:string];
} 
```

我之前也遇到过同样的问题，上面的代码已经解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:16:43.987

采用

```
NSData *data = [dataString dataUsingEncoding:NSUTF8StringEncoding]; 
```

并从中获取字符串，请执行以下操作：

```
NSString *theXML = [[NSString alloc] initWithBytes:[data mutableBytes]
                                                    length:[data length]
                                                 encoding:NSUTF8StringEncoding]; 
```

然后你可以在你的 NSXMLParserDelegate 方法中解析 xml。

希望这可以帮助。

# gwt - 如何设置 HyperLink 小部件的 rel 属性？

> ID：10215224
> 
> 赞同：0
> 
> 时间：2012-04-18T18:02:27.513
> 
> 标签：gwt

```
@UiField Hyperlink historyLink;
this.historyLink.getElement().setAttribute("rel", "nofollow"); 
```

这将设置包含 div 的 rel 属性。

```
<div class="gwt-Hyperlink" rel="nofollow"><a href="#!h:home">history</a></div> 
```

我如何获得`a`标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T00:38:41.257

您可以通过`a`这种方式获取元素

```
Element a = historyLink.getElement().getFirstChildElement(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:17:56.690

也许您可以使用 an`InlineHyperlink`代替（如果您根本不想要`div`包装器），但实际上我不明白在`rel=nofollow`带有*#hash -only* href 的链接上的使用：如果那是用于 Google AJAX 爬行，不能您只是避免在响应`_escaped_fragment_`请求而发送的 HTML 快照中输出链接？

# java - Java中的Hello world：理解概念与python

> ID：10215225
> 
> 赞同：3
> 
> 时间：2012-04-18T18:02:28.640
> 
> 标签：java, python

我现在正在尝试学习 Java，这是 hello world 程序，它已经开始让我感到困惑。我习惯了 python，我发现[本](http://qatar.cmu.edu/~dfossati/15-121-spring12/resources/Java4Python.pdf)教程（电子书）对于具有 python 背景的程序员来说简单而简洁。

本书中的 Java 中的 Hello world 程序：

```
public class Hello {

public static void main (String[] args) {

     System.out.println("Hello World!");
}
} 
```

正如书中所说，python中的等效代码是：

```
class Hello(object):
  @staticmethod
  def main(args):
     print "Hello World!" 
```

我完全理解python代码。但是，我对 Java 代码有一个问题，我想在进一步进行之前先弄清楚，以便在我的大脑中获得语言的基本知识。

这本书说（从书中复制）：

> ...我们有一个参数。然而，参数的名称是 args，因为 Java 中的所有内容都必须有一个类型，我们还必须告诉编译器 args 的值是一个字符串数组。目前，您可以将数组视为与 Python 中的列表相同的东西。声明方法 main 必须接受一个参数并且参数必须是字符串数组的实际好处是，如果您在代码中的其他地方调用 main 并将其传递给整数数组甚至单个字符串，编译器会将其标记为错误。

这对我来说没有任何意义。为什么我不能传递任何东西，因为我的函数不需要任何东西？如果我只是通过（String args）会发生什么。

由于我是Java的新手，请多多包涵。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:05:33.827

好吧，你正在传递一些东西。每当您运行 java 程序时，命令行参数都会作为参数传入`args`，因此您需要接受这些参数，即使您不使用它们也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:07:13.610

好吧，这里发生了两件事。首先，是函数签名——因为你声明`main`期望并只接受一个字符串数组，如果你尝试传递其他东西，它会引发错误。但不是因为函数拒绝接受它，而是因为编译器不知道你要调用什么。看，你可以有*多个*同名但参数不同的函数。因此，如果您尝试调用`main(1)`，编译器会寻找一个接受一个（或多个）整数的 main 函数，但找不到它并引发异常。

这里发生的另一件事是，当你启动一个程序时，编译器会寻找这个特定的签名——`public static void main (String[] args)`而不是别的。找不到？程序不会运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:08:55.650

如您所知，Python 使用“鸭子类型”：事物是什么类型并不重要，重要的是它可以做什么。因此，您永远不需要为变量声明类型。

在 Java 中，情况并非如此：每个变量都有一个声明的类型，而编译器强制执行该类型。例如，尝试`String`在 -declared 变量中存储引用`int`将产生编译时错误。鸭子类型的支持者声称这会降低灵活性，但强类型爱好者指出编译时错误比运行时错误更容易修复。

但是您的方法参数也是如此。因为你的方法需要一个类型的参数`String[]`，所以它必须提供一个类型的参数`String[]`。没有其他事情会做。

幸运的是，由于它是`main`方法，Java 解释器负责传入一个参数：具体来说，是一个命令行参数数组，您的程序是使用该数组执行的。如果您想忽略它，请随意。你的程序运行得很好，不用注意参数，但如果没有传入参数，它是无效的。

（顺便说一句，如果这是除了方法之外的任何方法`main`，您可以使用您想要的任何参数类型自由声明它，包括根本没有参数。但是由于 Java 解释器将传入一个命令行参数，这个特定的方法必须准备好接受它们。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T18:10:02.673

在 Java 中，没有像 Python 那样的顶级代码（即没有直接等价于

```
print('Hello world') 
```

）。然而，Java 程序需要某种入口点才能开始执行代码。与许多其他语言（即 C/C++、C#、Haskell）一样，[具有此名称的函数`main`](http://en.wikipedia.org/wiki/Main_function_(programming))用于此目的，并由运行时（即 Java 解释器）调用。

调用`main`函数时，运行时使用[一定数量（和类型）的参数](http://en.wikipedia.org/wiki/Function_signature#Signature)。函数必须与这些匹配。然后，您可以随意使用您喜欢的任何签名调用其他方法：

```
public class Hello {
  public static void hi() {
    System.out.println("Hello World!");
  }
  public static void main (String[] args) {
    hi();
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T18:28:02.633

每个程序都有一个入口点/起点，从那里开始执行。Java 会搜索一个特定的方法签名，它将从一个类中开始运行您的应用程序，它是“主要”方法。

```
public static void main(String args[]); 
```

这必须实施才能让您开始您的程序（在您想要开始的课程中）。由于这个规则/限制，我们必须将字符串数组（类似于 Python 中的字符串列表）作为参数传递。

现在对于第二部分，如果您的程序在启动时不需要任何参数，请不要传递任何参数。您将在 main 方法中将 args 作为空字符串数组。以下行将打印出传递给您的 main 方法的参数长度。

```
System.out.println("Length of arguments = " + args.length); 
```

您可能还想查看[Sun 的 Java 初学者指南](http://docs.oracle.com/javase/tutorial/java/index.html)。我希望这回答了你的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T18:06:34.503

如果您的函数不需要任何东西（因此它没有参数），那么您可以避免传递任何东西，这是通过将其声明为

```
void noArgumentsFunction() {
  // body
} 
```

但是作为`main`样板的函数必须接受一个`String`s 数组。这就是为什么你被迫声明签名接受它（然后忽略它以防万一）。该函数必须接受此参数，因为它是您的程序的[入口点](http://en.wikipedia.org/wiki/Main_function_%28programming%29)，并且任何 Java 程序都必须支持通过命令行传递的参数数组（就像每个 C/C++ 程序一样，如果您不是被迫这样做的话）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-18T18:16:11.507

首先，注意main方法是由JVM调用来启动程序并传递命令行参数的。它可以由 Java 代码调用，但很少这样做。

无论如何，这是该方法的签名：

```
public static void main (String[] args) 
```

它说它需要一个参数，它是一个字符串数组。如果你这样称呼它：

```
main(new String[1]); 
```

或这个：

```
main(methodThatReturnsAStringArray()); 
```

它会起作用的。但是这些会导致编译器错误：

```
main(new int[0]); 
main("test"); 
```

因为调用中参数的类型与方法签名要求的类型不匹配。您*可以*传递一个空指针：

```
main(null); 
```

因为数组是一种引用类型，并且`null`是所有引用类型的有效值。但是该方法必须针对这种情况进行测试，否则它会`NullPointerException`在尝试访问数组时抛出 a 。

您可以做的另一件事是通过声明*另一个*方法来重载：

```
public static void main (String args) 
```

所以当你打电话

```
main("test"); 
```

编译器将确定存在具有匹配签名的方法并调用它。

基本上，所有这一切的重点是许多程序员错误是由编译器而不是在运行时捕获的（如果它是一个很少执行的代码路径，它们可能只会在某些特殊情况下被发现）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-18T18:08:10.457

从命令行执行程序时，命令行参数可以是多个字符串。

例如。

Java myprogramme 参数 1 参数 2 参数 3

所有这些参数 - param1、param2、param3 作为字符串 [] 传递。

这对于传递零个、一个或多个参数的所有程序都很常见。

作为程序员，您有责任检查这些命令行参数。

# c++ - 什么会使 ios::fail() 评估为 1？

> ID：10215227
> 
> 赞同：0
> 
> 时间：2012-04-18T18:02:29.210
> 
> 标签：c++, linux, fstream

我正在尝试打开一个文件

```
27   string tline;
28   ifstream finp; // input file
29   ifstream dinp; // data files
30 
31   finp.open(argv[1]);
32 
33 
34   cout << "finp.good() = " << finp.good() << endl;
35   cout << "finp.bad() = " << finp.bad() << endl;
36   cout << "finp.fail() = " << finp.fail() << endl; 
```

我最终得到了输出

```
finp.good() = 0
finp.bad() = 0
finp.fail() = 1 
```

现在，除了这是一个内部逻辑问题之外，我找不到任何关于导致此问题的好的文档。我该怎么做才能纠正这个问题？

如果有帮助，我在 linux 上运行，我需要同时包含两者`<cstring>`，`<cstdlib>`而在 OSX 上运行时我不必这样做。这可能是问题吗？如果是这样，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:05:56.263

`fail()`当您尝试转换并且失败时将返回 1。例如，如果文件中的下一个字符不是数字，并且您尝试读取`int`，则将设置故障位并`fail()`返回 1。当您已经在文件末尾时尝试进行任何转换还将设置故障位。

`fail()`当/如果`badbit`设置了，也将返回 1。这表明文件本身存在严重问题，而不仅仅是无法从文件中读取某些特定数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:07:05.497

原谅我，我犯了一个简单的错误。当我将源文件移植到 linux 系统时，我也移植了一个脚本。我将可执行文件与脚本混淆了，脚本有一个硬编码的文件名，它不在目录中。

基本上，我不小心试图读取一个不存在的文件！

# c# - WP7 从 WCF 填充列表框

> ID：10215231
> 
> 赞同：0
> 
> 时间：2012-04-18T18:02:33.767
> 
> 标签：c#, wcf, windows-phone-7

谁能告诉我如何通过 WCF 服务使用 SQL Azure 上的表中的数据填充 wp7 中的列表框。

我在服务上做了很多工作，只是我似乎找不到一个可以用数据填充列表框的示例。

基本上我需要这个列表框来包含来自数据库的 10 个字段中的 2 个，然后我需要根据用户选择将 ID 号（即第三个不可见字段）保存回数据库。

任何人都可以提供一个示例/链接吗？

我在这里和其他网站上找到了一两个，但它们对我不起作用/不确认我在服务中的操作合同是否正确。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:21:31.653

看看这篇[文章](http://anindita9.wordpress.com/2012/01/02/consuming-sql-serversql-azure-data-in-windows-phone-7-1-android-through-odata-wcf-data-services-entity-frameworks/)。只需使用 WCF 数据服务 ussign OData 公开您的 SQL Azure 表。本文逐步解释了如何执行此操作。

另一方面，一旦您获得源数据，请将其设置为 ItemsSource listBox 属性。

研究生，

# android - 如何从班级运行服务？

> ID：10215235
> 
> 赞同：0
> 
> 时间：2012-04-18T18:02:39.670
> 
> 标签：android, service, android-activity

我有这样的课：

`public class ExpandableListAdapter extends BaseExpandableListAdapter {`

我想从这个类运行一个服务。但据我所知，服务只能从`Activitys`. 那么解决方案是什么？

如何启动服务并从另一个类控制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:04:10.597

> > 但据我所知，服务只能从 Activity 运行

这不是真的。为了运行服务，您只需要一个上下文，这通常是对您的活动的引用。

因此，在 ExpandableListAdapter 中，您只需确保构造函数接收到您的活动实例：

```
public ExpandableListAdapter(Context context){
    mContext = context;
}

// somewhere else
mContext.startService(theIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:04:24.053

大多数适配器都有上下文，因此您可以调用 getContext() 来返回上下文。这个适配器没有上下文，所以你应该有一个自定义构造函数，它接受一个上下文并调用它的 super。使用您传入的上下文，您可以像在活动中一样调用[startService(Intent intent) 。](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)

# c# - 我如何找到启动我的进程的计划任务的实例 ID/相关 ID

> ID：10215238
> 
> 赞同：5
> 
> 时间：2012-04-18T18:02:46.223
> 
> 标签：c#, scheduled-tasks

如果我有一个运行我的 EXE 的 Windows 计划任务。有没有办法从我的 EXE 中找到触发我的计划任务实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:30:36.380

简单的答案是：不。

您可以做的最好的事情是以编程方式访问任务调度程序库并查看您所在的进程是否处于“运行”模式，获取进程的 PID（调度程序实际上将其写入其历史记录）并将其与您的进行比较。

更简单的做法是访问系统事件日志并查看是否有提及执行您的 exe 文件（尽管如果实际执行了 exe，它们可能不是这样的日志）。

唯一可以与进程关联的是调用者（可能是 NETWORK SERVICE 或一些预定义的帐户），它不提供有关它被调度的任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:02:43.367

我尝试了一段时间来解决同样的问题，但是我认为使用当前的 API 是不可能的。如果您有对正在运行的任务的引用，您可以获得启动它的任务引擎的 PID。从那里，您*可以*转到任务事件日志并查找具有相同引擎 PID 的 ID 为 200（操作已启动）的最新事件，但是由于您可以在单个任务引擎下运行多个任务进程，因此您不能绝对确定地走得更远（例如，您的进程的第二个实例可能在相同的引擎 PID 下运行——您将无法分辨哪个关联 ID 属于您的目标进程。）

# java - 如何在jsp页面中使用jquery和jstl动态选择列表框中的选项

> ID：10215241
> 
> 赞同：1
> 
> 时间：2012-04-18T18:02:56.683
> 
> 标签：java

嗨，我有一个包含一些值的列表框。我想使用 JSTL 根据数组列表中的值来选择它的值。我的代码是这样的

```
<select id='lstType' name="lstType">
        <option value="abc" selected="yes">abc</option>
        <option value="bcd">bcd</option>
    <option value="efg">efg</option>
 </select> 
```

和一个具有某些实体类对象的数组列表。

```
class entity{
   String str;
} 
```

现在在 jsp 页面上，我正在获取这样的内容

```
$("#lstCategory option[value = <c:out value="${entity.str}"/>]").attr("selected", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:10:12.220

而不是 attr 使用道具

```
$('#lstType option[value="${entity.str}"]').prop("selected", "selected"); 
```

编辑：

仅当您使用 jQuery 1.6 时才使用上面的版本，如果使用之前的版本使用

```
 $('#lstType option[value="${entity.str}"]').attr("selected", "selected"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:08:46.180

尝试使用以下语句：

```
$('#lstType option[value="${entity.str}"]').attr("selected", "selected"); 
```

# c++ - 在动态库中隐藏符号而不修改源代码

> ID：10215250
> 
> 赞同：6
> 
> 时间：2012-04-18T18:03:34.633
> 
> 标签：c++, symbols, dynamic-library

我有一个需要链接的闭源第 3 方共享库。不幸的是，第 3 方库的创建者并没有费心限制导出哪些符号并导出所有符号。第 3 方库在内部使用了我在代码中使用的流行库的不兼容版本，但导出了冲突的符号（google 的 protobuf 库）。当 protobuffer 库版本检查发现库的编译时和运行时版本不兼容时，这会导致运行时错误。我可以通过恢复到与 3rd 方库中使用的版本相匹配的旧版本 protobufs 2.3 来解决问题。但是，protbuf 2.3 存在性能问题，导致我的应用程序无法使用它。我需要一种在我的代码中使用 protobuf 2.4 并让第 3 方库使用它的方法'

有没有办法生成一个新版本的 3rd 方库，它不会从仅给定 so 文件的内部使用的 protobuf v 2.3 库中导出符号？如果我有来源，那将是一个更容易的问题。似乎objcopy和strip之类的工具实际上并不能修改动态符号表。到目前为止，我唯一的想法是创建自己的 shim 库，通过将调用重定向到第 3 方库（也许用 dlopen 打开？），只导出我需要的符号。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T04:42:12.107

我找到了一个可行的解决方案......我创建了一个 shim 库，它将调用重定向到第三方库，允许库外的代码看到 protbuf v2.4 符号，而第三方库内的代码看到 protobuf v2.3 符号。此解决方法基于此处发布的想法：[http ://www.linuxjournal.com/article/7795](http://www.linuxjournal.com/article/7795)

我不得不修改 dlopen 标志以包含 RTLD_LAZY | RTLD_LOCAL | RTLD_DEEPBIND。RTLD_LOCAL 标志可防止第三方库中的符号在 shim 库之外被看到（防止符号泄漏）。RTLD_DEEPBIND 强制来自 3rd 方库内部的调用仅查看符号的内部版本（防止符号泄漏）。

具体来说，这是我的 shim 库中的一个示例摘录。

```
#include <stdio.h>
#include <stdint.h>
#include <dlfcn.h>
#include "libhdfs/hdfs.h"

//#define PRINT_DEBUG_STUFF

// Helper function to retrieve a function pointer to a function from libMapRClient
// while isolating the symbols used internally from those already linked externaly
// to workaround symbol collision problem with the current version of libMapRClient.
void* GetFunc(const char* name){
  #ifdef PRINT_DEBUG_STUFF
    printf("redirecting %s\n", name);
  #endif
  void *handle;
  char *error;

  handle = dlopen("/opt/mapr/lib/libMapRClient.so", RTLD_LAZY | RTLD_LOCAL | RTLD_DEEPBIND);

  if (!handle) {
    fputs(dlerror(), stderr);
    exit(1);
  }
  void* fp = dlsym(handle, name);
  if ((error = dlerror()) != 0) {
    fprintf(stderr, "%s\n", error);
    exit(1);
  }
  return fp;
}

hdfsFS hdfsConnect(const char* host, tPort port) {
  typedef hdfsFS (*FP) (const char* host, tPort port);
  static FP ext = 0;
  if (!ext) {
    ext = (FP)GetFunc("hdfsConnect");
  }
  return ext(host, port);
}

int hdfsCloseFile(hdfsFS fs, hdfsFile file) {
  typedef int (*FP) (hdfsFS fs, hdfsFile file);
  static FP ext = 0;
  if (!ext) {
    ext = (FP)GetFunc("hdfsCloseFile");
  }
  return ext(fs, file);
} 
```

...对于其他公共 API 函数，依此类推

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:37:39.180

更改传递给链接器的库的顺序可能会有所帮助。如果多个库导出相同的符号，则链接器应使用第一个库中的符号。但是，并不是所有的链接器都符合这一点，所以请查看它的文档。

# c# - 文本属性中的全局资源

> ID：10215252
> 
> 赞同：3
> 
> 时间：2012-04-18T18:03:39.113
> 
> 标签：c#, asp.net, globalization

我想更改网站的语言时遇到问题。我为此使用全球资源。当我使用默认语言时，它会显示正确的文本。那就没有问题了。

但是当我更改文化时，它不会更新 ASP.NET 控件属性中的文本。我不知道为什么。

此代码完美运行

```
<h1><%= Resources.Default.Register %></h1> 
```

但不幸的是，这段代码并没有改变它的语言

```
<asp:Button ID="Button2" runat="server" Text="<%$ Resources:Default, Register %>" /> 
```

我通过单击链接按钮更改语言，就像这样

```
protected void lbNL_Click(object sender, EventArgs e)
        {
            Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("nl-BE");
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("nl-BE");

            Page.Culture = "nl-BE";
            Page.UICulture = "nl-BE";

        } 
```

你能帮我么

文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:00:57.553

这就是我将语言从英语（默认）更改为法语的方式。

```
<h3><asp:Label runat="server" ID="lblWelcome" Text="<%$ Resources:Resource, Welcome %>" /></h3> 
```

我不得不使用诸如 asp:Label 或 asp:Literal 之类的控件。

此外，我的全局资源文件位于 App_GlobalResources 文件夹中，名为**Resource.fr.resx**。Welcome 是资源文件中键的名称。

另外，当我将文化信息更改为法语时，我只是使用两个字母代码**fr**

** * ** ** * 编辑 * * * * * * * * *

这可能是你的问题。您可能需要覆盖 InitializeCulture。

```
protected override void InitializeCulture()
{
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("nl-BE");
    Thread.CurrentThread.CurrentUICulture = new CultureInfo("nl-BE");

    base.InitializeCulture();
} 
```

# python - pandas 将数据聚合到 numpy 数组：数据结构转换

> ID：10215259
> 
> 赞同：5
> 
> 时间：2012-04-18T18:04:04.190
> 
> 标签：python, pandas

我使用熊猫数据框聚合了数据。下面是显示的一些实际数据以及我如何汇总它。

`fdf.groupby(['row',col'])['percent'].sum()`

[http://pastebin.com/R8XWpgtU](http://pastebin.com/R8XWpgtU)

我想做的是创建一个二维numpy数组（行=行，列=列）。有什么巧妙的方法可以做到这一点吗？

我做类似事情的另一种方法是创建一个数据透视表

`pivot_table(fdf,values='percent',rows='row',cols='col', aggfunc=np.sum)`

在这种情况下，我想将此数据透视表转换为 2d numpy 数组。有没有办法让我索引到这个表的每个单元格。如果是这样，那么我可能会对桌子本身没问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T21:50:13.353

尝试：

```
result = fdf.groupby(['row',col'])['percent'].sum()
result.unstack('col').values 
```

交替：

```
fdf.pivot_table('percent', rows='row', cols='col', aggfunc='sum').values 
```

# android - 有没有办法从模拟器中清理空间/内存？

> ID：10215278
> 
> 赞同：0
> 
> 时间：2012-04-18T18:05:15.617
> 
> 标签：android

[2012-04-18 23:20:03 - MyVideo] 无法在设备“emulator-5554”上安装 MyVideo.apk：设备上没有剩余空间

[2012-04-18 23:20:03 - MyVideo] com.android.ddmlib.SyncException：设备上没有剩余空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:08:11.000

制作更大的SD卡并将它们安装到那个？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:09:30.813

删除应用程序的缓存或数据

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:07:37.350

只需从您的模拟器中删除/卸载其他应用程序。

在模拟器内转到设置应用程序，然后应用程序 -> 管理应用程序 - 您可以从那里删除它们。

要在 ecllipse 中增加 sd 卡大小，请转到 windows-> AVD 管理器-> 选择您的 avd 名称-> 单击编辑-> 输入大小并单击编辑 AVD。

另请参阅此[链接](http://www.swfgeek.net/2011/09/07/quicktip-uninstall-your-android-app-from-the-avd-emulator/)以从命令提示符中删除应用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-20T14:47:41.133

您是否尝试擦除数据？

从操作表转到 AVD 管理器 → 选择向下箭头 → 选择擦除数据

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-11T13:11:04.590

它非常简单。转到 AVD 管理器。然后单击设备上要清除其存储的选项> 擦除数据

完毕

[![在此处输入图像描述](../Images/41156dd0db3cc707ef05b4b06d98e68d.png)](https://i.stack.imgur.com/Dmbc5.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T18:44:15.730

每次都必须删除应用程序很乏味而且很慢。相反，让您的应用程序安装到模拟器 SD 卡（可以有千兆字节的空间）。

查看您的 android manifest 并确保您已启用安装到 SD 卡。

[http://developer.android.com/guide/appendix/install-location.html](http://developer.android.com/guide/appendix/install-location.html)

# asp.net - 如何在处理程序处理它之前以编程方式修改 aspx 文件内容？

> ID：10215284
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:01.847
> 
> 标签：asp.net, httphandler, httpmodule

我需要修改 aspx 的内容（不是物理上，而是更改内存中的内容）的原因是因为在整个 aspx 由 HttpHandler 处理之前，我制作的某些自定义标签需要解析为正确的数据。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:28:18.560

您可以使用响应过滤器 (HttpFilter) 并即时修改内容，基本上是在响应形成之后，在 EndRequest 调用您的过滤器之前（它是流后代），您可以根据需要对其进行修改。在 HttpModule 的 Init 方法中，您必须安装 HttpFilter (Response.Filter)，它将为该请求调用。

这是一篇好文章：

[http://aspnetresources.com/articles/HttpFilters](http://aspnetresources.com/articles/HttpFilters)

更新：也许这是[XY Problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)的一个案例，您可以使用简单的服务器控件来解决您的问题，该控件将正确呈现这些自定义标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:38:05.560

你可以使用渲染事件

```
Protected Overrides Sub Render(ByVal writer As HtmlTextWriter)

    Dim sw As New System.IO.StringWriter
    Dim hw As New HtmlTextWriter(sw)
    MyBase.Render(hw)
    Dim html As String = sw.ToString()

    ' html = html.Replace() etc to change your html code in here

    writer.Write(html)
End Sub 
```

编辑我看到你想在asp.net处理aspx之前动态注入标记，也许[FileLevelPageControlBuilder](http://msdn.microsoft.com/en-us/library/system.web.ui.filelevelpagecontrolbuilder.aspx)类是有用的

# android - 有没有办法让 ICS 选项卡栏向后兼容 Gingerbread 和 Froyo？

> ID：10215287
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:08.490
> 
> 标签：android, user-interface, android-4.0-ice-cream-sandwich

或者是否有一个接近的等价物使这种控制在 ICS 之前工作？

我用 ActionBarSherlock 覆盖了 ActionBar，但我不确定如何让 TabBar 以相同的方式工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:40:19.670

任何版本的Android中都没有`TabBar`。

如果您的意思是“操作栏中的选项卡”，ActionBarSherlock 支持。

# javascript - CoffeeScript 服务器不如 Node.js 服务器可靠吗？

> ID：10215289
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:28.147
> 
> 标签：javascript, web-services, node.js, heroku, coffeescript

我为我的 Node.js 服务器获取了代码并将其转换为 CoffeeScript，然后我在 Heroku 上进行了尝试。当它收到一个长的 JSON 字符串时它会崩溃，而原始版本可以毫无问题地处理它。这是正常的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:04:46.073

我想说的是，用 CoffeeScript 编写（可能）比编写纯 JavaScript 可靠得多*。*

来自[CoffeeScript 的文档](http://coffeescript.org/#try%3azip%20%3D%20lottery.drawWinner%3F%28%29.address%3F.zipcode%0A)：

**咖啡脚本：**

```
zip = lottery.drawWinner?().address?.zipcode 
```

**生成的 JavaScript：**

```
var zip, _ref;

zip = typeof lottery.drawWinner === "function" ? 
      (_ref = lottery.drawWinner().address) != null ? 
      _ref.zipcode : void 0 : void 0; 
```

我不了解你，但我通常忘记检查类型`function`，否则懒得考虑`null`或`undefined`。此外，它使 JavaScript 代码更丑陋，更难阅读和维护。

这肯定是你研究你的应用程序的一个错误。确保您了解并利用`do(i){}`, `for key, value of hash`, `for item,index in array`. 明确`return`在函数的末尾，并仔细检查变量范围。我相信您会发现这是您的端口中的一个错误（就像我一样，几周前）。

# objective-c - 在本地和远程之间切换 iOS 应用程序中使用的 url

> ID：10215290
> 
> 赞同：1
> 
> 时间：2012-04-18T18:06:34.357
> 
> 标签：objective-c, ios, cocoa-touch, compilation, plist

我有一个 iPhone 应用程序，它大量使用了我构建的 Rails json API。大多数时候我在测试我的 API 的本地版本（像 localhost:3000/api/log_in 这样的 URL），但我还需要不时在远程服务器上测试它（像 someapp.com/api/log_in 这样的 URL ）。

如何根据我是要针对本地服务器还是远程服务器进行测试来轻松切换应用程序使用的 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:27:56.720

好的。你应该这样：

1.  创建另一个目标（通过复制现有目标） ![在此处输入图像描述](../Images/041ceb7222d0b523608d1873d3d7455c.png)

2.  在 Build Settings 下，将 Prefix Header 更改为另一个文件名 ![在此处输入图像描述](../Images/9b28ec172b94df25db6cdbe9e2650449.png)

3.  创建新的前缀标题（只需添加一个文件或复制/添加现有的标题前缀文件） ![在此处输入图像描述](../Images/2e362f7460de3987ecbc537cc56ce2ac.png)

4.  将相同的预编译器常量 (#define) 添加到两个 .pch 文件中。一个带有您的生产 URL，一个带有您的 localhost URL。使用新设置的预编译器常量，而不是代码中的“静态”URL。

5.  现在，您可以使用运行/停止按钮旁边的切换目标在 localhost/production 之间切换

![在此处输入图像描述](../Images/d479d55ca8bdad90a16274d0c20b1b58.png)

# python - 快速将值附加到列表

> ID：10215292
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:38.850
> 
> 标签：python, list, dictionary

PHP 有一种非常快速的方法可以将值附加到数组：

```
$array[] = 'value'; 
```

在不需要索引号的情况下，在 python 中执行此操作的最简单方法是什么？此外，有没有一种简单的方法可以使用嵌套在字典中的列表来做到这一点，就像这个 PHP 等价物..

```
$array['associative'][] = 'value'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:07:57.123

```
my_list.append(value) 
```

或者

```
my_dict[key].append(value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:40:52.737

列表 dict 的最佳方法是：

```
my_dict.setdefault(key,list()).append(value) 
```

这相当于

```
if not key in my_dict:
    my_dict[key] = list()
nested_list = my_dict[key]
nested_list.append(value) 
```

当 my_dict 没有任何关键列表时，这是安全的。

在较早提出的变体中：

```
my_dict[key].append(value) 
```

这相当于

```
nested_list = my_dict[key]
nested_list.append(value) 
```

`KeyError`如果 my_dict 没有 key 项，将引发

但是，如果 my_dict[key] 没有 'append' 方法`AttributeError`，两种变体都会出现

**UPD（重要！**）`my_dict.setdefault(key,list())`：`list`即使有！`my_dict``key`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:07:54.370

`append()`列表方法怎么样？例如，

```
 myList.append(value) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T18:07:55.527

```
mylist.append(value) 
```

请参阅“pydoc 列表”。

# salesforce - 我可以将自定义小部件添加到 Salesforce Service Cloud 控制台吗？

> ID：10215293
> 
> 赞同：2
> 
> 时间：2012-04-18T18:06:42.640
> 
> 标签：salesforce, salesforce-service-cloud

我需要在 Salesforce Service Cloud Console 上有一个自定义小部件。我真的不在乎它在哪里，只要它易于访问（有点像软电话小部件）。

我需要这个有两个原因：

1.  我需要一种快速的方法让用户更改他们的“状态”（用户的自定义字段）。
2.  我需要执行一些自定义 javascript 来隐藏某些页面布局中的某些元素。

知道这是否可以做到吗？

注意：当我说“服务云控制台”时，我指的是这种控制台： ![服务云控制台截图](../Images/5b482b48d07374b48866e7bf2f52af8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:21:52.503

我认为[自定义控制台组件](http://eu1.salesforce.com/help/doc/en/console2_components_overview.htm)可能是您正在寻找的？（[以下](http://eu1.salesforce.com/help/doc/en/console2_components_create_app.htm)是制作它们后如何将它们添加到控制台的方法。请注意，在 11 个步骤之后，它会显示“在您可以访问之前...”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T16:29:35.387

我已经使用自定义控制台组件实现了类似的东西，您可以在其中添加一个视觉力页面并在其上添加一个按钮“更改状态”。一旦用户单击它，就会得到谁是登录用户。 `String userid = UserInfo.getUserId()` rest 是更改页面控制器上用户记录状态的简单逻辑。

# node.js - 发帖时网址发生变化

> ID：10215295
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:50.267
> 
> 标签：node.js

我有这个html：

```
<form action="/Home/Insert" method="POST" name="form1">
    Name:
    <input type="text" name="Name"/>
    <br/>
    Price:
    <input type="text" name="Price"/>
    <br/>
    <button id="btnPost">Post Data</button>
</form> 
```

当表单发布时，我的 url 更改为 .../Home/Insert。我不想在发帖时更改我的网址，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:10:02.763

重定向客户端（[HTTP 3xx](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)，服务器端）或使用[AJAX 请求](http://en.wikipedia.org/wiki/AJAX)（用户端）以使用户保持在同一页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:08:21.653

这就是 HTTP 的工作原理。
当您发布到 URL 时，浏览器会导航到该 URL。

您可能希望修改服务器以在 POST 之后重定向回原始 URL。

# objective-c - 故事板中 IBAction 的预期表达式

> ID：10215296
> 
> 赞同：0
> 
> 时间：2012-04-18T18:06:51.280
> 
> 标签：objective-c, xcode, uistoryboard

我收到“预期表达式”错误，但无法弄清楚 IBAction 方法的原因。已将错误注释掉。

你能告诉我有什么问题吗？谢谢你。

```
#import "RTViewController.h"
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>

@interface RTViewController () {
  AVAudioPlayer *backgroundAudioPlayer;
  SystemSoundID burnRubberSoundID;
  BOOL touchInCar;
}

@end

@implementation RTViewController
@synthesize car;
@synthesize testDriveButton;
@synthesize backgroundImage;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Road Trip";

  NSURL* backgroundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                                 pathForResource:@"CarRunning" 
                                                 ofType:@"aif"]];
  backgroundAudioPlayer = [[AVAudioPlayer alloc]
                           initWithContentsOfURL:backgroundURL error:nil];
  backgroundAudioPlayer.numberOfLoops = -1;
  [backgroundAudioPlayer prepareToPlay];

  NSURL* burnRubberURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"BurnRubber" ofType:@"aif"]];
  AudioServicesCreateSystemSoundID((__bridge CFURLRef)burnRubberURL, &burnRubberSoundID);
  [testDriveButton setBackgroundImage:[UIImage animatedImageNamed:@"Button" duration:1.0 ] forState:UIControlStateNormal];

}

- (void)viewDidUnload
{
    [self setCar:nil];
    [self setTestDriveButton:nil];
    [self setBackgroundImage:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  //return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)TestDrive:(id)sender {
  AudioServicesPlaySystemSound(burnRubberSoundID);
  [self performSelector:@selector(playCarSound) withObject:self afterDelay:.2];

  CGPoint center = CGPointMake(car.center.x, self.view.frame.origin.y + car.frame.size.height/2);
  [UIView animateWithDuration:3 animations:^ {
    car.center = center;
  }
                   completion:^(BOOL finished) {
                     [self rotate];
                   }];
}

-(void)playCarSound {
  [backgroundAudioPlayer play];
}

- (void)rotate {
  CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);

  void (^animation) () = ^() {
    car.transform = transform;
  };

  void (^completion) (BOOL) = ^ (BOOL finished) {
    [self returnCar];
  };

  [UIView animateWithDuration:3 animations:animation completion:completion];

}

- (void)returnCar {
  CGPoint center = CGPointMake(car.center.x, self.view.frame.origin.y + self.view.frame.size.height - car.frame.size.height/2);

  void (^animation)() = ^() {
    car.center = center;
  };

  void (^completion)(BOOL) = ^(BOOL finished) {
    [self continueRotation];
  };

  [UIView animateWithDuration:3 animations:animation completion:completion];

}

- (void)continueRotation {
  CGAffineTransform transform = CGAffineTransformMakeRotation(0);

  void (^animation)() = ^() {
    car.transform = transform;
  };

  void (^completion)(BOOL) = ^(BOOL finished) {  
    [backgroundAudioPlayer stop];
    [backgroundAudioPlayer prepareToPlay];
  };

  [UIView animateWithDuration:3 animations:animation completion:completion];

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  UITouch *touch = [touches anyObject];
  if(CGRectContainsPoint(car.frame, [touch locationInView:self.view]))
    touchInCar=YES;
  else {
    touchInCar=NO;
    [super touchesBegan:touches withEvent:event];
  }

  UISwipeGestureRecognizer *swipeGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(handleSwipeGesture:)];
  swipeGesture.direction = UISwipeGestureRecognizerDirectionLeft;
  [self.view addGestureRecognizer:swipeGesture];

  - (IBAction)handleSwipeGesture:(id)sender { // Expected expression

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"Content"];
    [[self navigationController]pushViewController:viewController animated:YES];
  }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:47:44.803

问题是您从未关闭该方法

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

有自己的花括号。一个视觉提示是该方法

```
- (IBAction)handleSwipeGesture:(id)sender 
```

（你的错误所在）开始缩进。

# portability - 如何实现基于证书的 JAAS LoginModule

> ID：10215297
> 
> 赞同：2
> 
> 时间：2012-04-18T18:07:01.010
> 
> 标签：portability, x509certificate, jaas, client-certificates

为了对用户进行身份验证，JAAS通过将适当的 's 传递给其封闭的.，`LoginModule`向其环境询问用户的数据和凭据。相同的机制也用于用户交互。`Callback``CallbackHandler`

如果`LoginModule`需要进行身份验证的唯一信息是用户名和密码，则没有问题：使用标准`Callback`类型`javax.security.auth.callback.NameCallback`和`javax.security.auth.callback.PasswordCallback`. 但显然没有这样的标准来检索 X509 证书。

那么 a 是如何`LoginModule`向其环境询问 X509 证书的呢？我知道有特定于应用程序服务器的`Callback`类型，但如果有的话，我正在寻找一种可移植的解决方案。

# ruby-on-rails - rake assets:precompile 和 assets:precompile:all 有什么区别？

> ID：10215298
> 
> 赞同：4
> 
> 时间：2012-04-18T18:07:03.823
> 
> 标签：ruby-on-rails, rake, asset-pipeline

这两个任务有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:19:45.960

```
# from assets.rake
desc "Compile all the assets named in config.assets.precompile"
task :precompile do
  invoke_or_reboot_rake_task "assets:precompile:all"
end 
```

看起来你可以省略`:all`.

# distributed-computing - 如何设计一个分布式系统来“在 X 英里内找到东西”？

> ID：10215300
> 
> 赞同：1
> 
> 时间：2012-04-18T18:07:12.113
> 
> 标签：distributed-computing

问题：

> 设计一个分布式系统来响应客户关于“在 X 英里内找到东西”的查询。

如果 X 是无限的，则获取世界上所有的“某物”（如果它们都存储在您的数据库中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:36:27.120

您可以考虑两种方法：

*   *当潜在结果数量少而查询数量大时，*划分可用机器之间的坐标空间，并仅向负责与 X 英里圆相交区域的机器发送查询
*   *当潜在结果的数量很大时，*存储对象分散，以便它们均匀分布在所有机器上（您可以通过随机化或对象的来源选择机器 - 这取决于）并将每个查询发布到所有机器并合并接收到的结果。

进一步的更改取决于获得有关问题性质的更多信息。

# javascript - JavaScript Prompt() 方法

> ID：10215302
> 
> 赞同：3
> 
> 时间：2012-04-18T18:07:13.857
> 
> 标签：javascript, prompt

我有一项正在处理的任务，但我的`prompt()`方法有问题。我看到我可以做一个提示，但我需要几个和数量。

例如...

我创建了一个 HTML 表格，其中包含许多艺术家和包含 DVD、CD 和音频的列。所有价格都在他们的行中。我需要编写一个提示来执行此操作。

使用该`prompt()`方法，要求用户输入艺术家的姓名、DVD的数量、CD的数量和用户希望购买的录音带的数量。将答案保存在单独的变量中。还要对每个值使用单独的提示。任何建议将不胜感激！

编辑：来自下面评论的代码：

```
var w=window.prompt("please enter your name");
window.alert(w);
var x=widow.prompt ("Enter how many DVDs you want to buy");
window.alert(x);
var y=window.alert ("Enter how many CDs you want to buy");
window.alert(y);
var z=window.alert ("Enter how many Audio Cassettes you want to buy");
window.alert(z); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T02:39:48.277

从它的声音来看，以下满足您的要求：

```
var a, d, t;

while ( ! a ) a = prompt( "Which Artist?" );
while ( ! d ) d = prompt( "How many DVDs?" );
while ( ! t ) t = prompt( "How many tapes?" );

alert( "You want " + t + " Tapes, and " + d + " DVDs, of " + a + "." ); 
```

让我们分解它，以便了解发生了什么：

```
var a, d, t; 
```

在第一行，我声明了我计划在下面的代码中使用的各种变量。这是一种常见的做法，如果您想保持干净和可管理的代码，这将是一个好习惯。

```
while ( ! a ) 
```

while 循环是一个循环，将反复运行，直到满足条件。在这个例子中，只要我们没有 for 的值，我们就告诉循环运行`a`。接下来是我们尝试`a`从用户那里收集价值：

```
while ( ! a ) a = prompt( "Which Artist?" ); 
```

每次 while 循环运行时，我们都会提示用户回答问题。我们接受他们的答案，并将其分配给`a`. 如果他们什么也没输入，我们的 while 循环会再次运行，再次提示他们。此时您可能会理解接下来的两个 while 循环。

最后是我们的警报，它收集各种值并将它们显示给用户：

```
alert( 'Artist ' + a ); 
```

这也提供了字符串连接的示例，或将两个字符串连接在一起。我们有一个存储在里面的值`a`，以及一个明确写为文本的值。我们使用`+`操作符将两者连接在一起，就像将绳子的两端用胶水绑在一起一样。随着我们添加更多字符串和更多变量，我们`+`越来越多地使用运算符：

```
alert( "You want " + t + " Tapes, and " + d + " DVDs, of " + a + "." ); 
```

运行此代码时`t`，`d`、 和`a`将全部替换为最终用户插入的实际值。

请注意，这是您的作业所需的非常基本的实现。一个真正的解决方案是测试输入的类型以确保它是预期的格式。例如，当询问用户想要多少 DVD 时，您可能希望将“可接受”的答案限制为仅整数。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:09:50.143

在值对象/数组上使用循环。也许使用第二个（嵌套）循环再次提示，直到输入一个值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:26:51.967

使用多个函数，以便在单击第一个提示时调用另一个函数，该函数处理另一个提示，您可以在其中单独保存变量值。递归地使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-16T05:51:07.857

提示很简单，这就是我使用它的方式：

```
var value = prompt( message ); 
```

# linux - ARM 汇编函数有问题吗？

> ID：10215307
> 
> 赞同：1
> 
> 时间：2012-04-18T18:07:33.610
> 
> 标签：linux, assembly, arm

我有一个用 ARM 汇编程序编写的简单函数。第一次运行时，一切都按预期工作（打印`BOOT\n`）。但是，第二次执行该函数时，没有打印任何内容。

```
.globl __printTest
.text
.align 2

__printTest:
 sub sp, #64 /* yes, I know this is too much */

 mov r0, #66
 str r0, [sp]
 mov r0, #79
 str r0, [sp, #1]
 mov r0, #79
 str r0, [sp, #2]
 mov r0, #84
 str r0, [sp, #3]
 mov r0, #10
 str r0, [sp, #4]

 mov r0, #0
 mov r1, sp
 mov r2, #5

 bl _write
 add sp, #64

 bx lr 
```

**可能是什么问题？**我怀疑这以某种方式破坏了它不再起作用的缓冲区。Write 是一个使用指令`write`在 Linux 上调用系统调用的函数。`svc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:26:49.227

问题是你没有保存`lr`。

```
 bl _write
     add sp, #64
     bx lr 
```

`bl _write`将覆盖`lr`which 然后指向`add sp, #64`，因此您`bx lr`只会在最后两条指令上导致无限循环。

如果您像这样修改代码，它应该可以工作：

```
__printTest:
 push {lr}
 sub sp, #64 /* yes, I know this is too much */
 ....
 bl _write
 add sp, #64
 pop {pc} 
```

如另一个答案中所述，您还应该使用 strb 而不是 str 进行字节存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:21:21.113

该函数将 32 位值压入未对齐的堆栈指针地址。它应该`strb`用于写入单个字节。对于 unaligned `str`，ARM Architecture Reference Manual 说：

```
if UnalignedSupport() || address<1:0> == ‘00’ then
    MemU[address,4] = R[t];
else // Can only occur before ARMv7
    MemU[address,4] = bits(32) UNKNOWN; 
```

因此，根据您的配置，如果您遇到 UNKNOWN 情况，您的堆栈中可能会出现垃圾。

# java - 使用 JLWGL 将现有的基于 2d 网格的游戏转换为 3d

> ID：10215310
> 
> 赞同：-2
> 
> 时间：2012-04-18T18:07:51.123
> 
> 标签：java, opengl, 3d, 2d

我的任务是为计算机科学 2A 创建一个 2d 游戏（在 JAVA 中）。我已经创建了游戏并且一切正常，但是我该如何将这个 2D 游戏转换为 3D，即。游戏将在 2D 平面（2D 阵列）中进行，但将以 3D 呈现。

更具体地说 - 使用 JLWGL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T21:10:13.030

无法从基于 2D 的游戏（由精灵或其他动画 2D 图像组成）自动创建 3D 游戏（使用纹理化 3D 模型）。

* * *

至于制作具有 2D 物理特性的 3D 游戏。好吧，您实际上将创建一个 3D 游戏，就物理而言，它是一个短轴或有限轴。

该轴是什么取决于您的游戏。“Z”**通常**（不是标准，您必须自己进行调整！）指的是**深度**，因此在仅左右移动（X 轴）和上下移动（Y轴），您只需跳过为该 Z 轴执行任何**玩家命令的移动。**

不要忘记您**不能**完全跳过与轴相关的所有内容！人物和物体都是3D的！因此，按照相同的示例，它们仍将具有深度（Z 轴），并且它们的动画仍将进行与深度相关的运动。

所以，最后，就像[Tim](https://stackoverflow.com/users/1236185/tim)试图解释的那样，没有“简单的方法”，你只需要掌握如何渲染 3D 游戏（你只是不会在上面使用复杂的物理，但是这几乎是唯一的区别）。

# php - 将数组拆分为 key => array()

> ID：10215321
> 
> 赞同：1
> 
> 时间：2012-04-18T18:08:15.137
> 
> 标签：php

考虑以下数组：

```
$array[23] = array(
  [0] => 'FOO'
  [1] => 'BAR'
  [2] => 'BAZ'
); 
```

每当我想使用内部数组时，我都会这样做：

```
foreach ($array as $key => $values) {
  foreach ($values as $value) {
    echo $value;
  }
} 
```

外部 foreach 循环用于拆分 $array 的 $key 和 $value 对。这适用于具有许多键（[23]、[24]、...）的数组，但**如果您事先知道 $array 只有一个键**（在这种情况下为 23），这似乎是多余的。在这种情况下，没有更好的方法将键与值分开吗？就像是

```
split($array into $key => $values)
foreach ($values as $value) {
  echo $value;
} 
```

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:11:35.830

[`reset`](http://php.net/manual/en/function.reset.php)返回数组的第一个元素并[`key`](http://php.net/manual/en/function.key.php)返回其键：

```
$your_inner_arr = reset($array);
$your_key = key($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:11:34.183

是的，只需摆脱您的第一个 foreach 并使用外部数组的已知 $key 定义您正在使用的数组。

```
foreach ($array[23] as $key =>$val):
   //do whatever you want in here
endforeach; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:11:44.420

如果一个数组只有一个元素，您可以通过以下方式获取它[`reset`](http://php.net/manual/en/function.reset.php)：

```
$ar = array(23 => array('foo', 'bar'));
$firstElement = reset($ar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T01:27:15.203

一个非常简洁的方法是

```
foreach(array_shift($array) as $item) {
    echo $item;
} 
```

# java - 如何正确将 byte[] 转换为 String？

> ID：10215323
> 
> 赞同：1
> 
> 时间：2012-04-18T18:08:31.580
> 
> 标签：java, string, byte, type-conversion

我正在`swing`用 Java 构建一个接口，我构建了一个`middleware`不断读取串行端口并保存即将发生的内容的接口`String`，这就是我这样做的方式：

```
public class RFID {
  private static RFIDReader rReader;
  private static boolean state;

  public RFID(RFIDReader rReader) {
    this.rReader = rReader;
    this.state = true;
  }

  public void connect(String portName) throws Exception {
    CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
    if (portIdentifier.isCurrentlyOwned()) {
        System.out.println("Error: Port is currently in use");
    } else {
        CommPort commPort = portIdentifier.open(this.getClass().getName(), 2000);

        if (commPort instanceof SerialPort) {
            SerialPort serialPort = (SerialPort) commPort;
            serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

            InputStream in = serialPort.getInputStream();
            OutputStream out = serialPort.getOutputStream();

            (new Thread(new SerialReader(in))).start();
            //(new Thread(new SerialWriter(out))).start();

        } else {
            System.out.println("Error: Only serial ports are handled by this example.");
        }
    }
}

public static class SerialReader implements Runnable {

    InputStream in;

    public SerialReader(InputStream in) {
        this.in = in;
    }

    public void run() {
        byte[] buffer = new byte[1024];
        int len = -1;
        String code;
        try {
            while (state == true && (len = this.in.read(buffer)) > -1) {
                code = new String(buffer, 0, len);
                if (code.length() > 1)
                    rReader.setCode(code);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public void finish(){
    state = false;
}

public static class SerialWriter implements Runnable {

    OutputStream out;

    public SerialWriter(OutputStream out) {
        this.out = out;
    }

    public void run() {
        try {
            int c = 0;
            while ((c = System.in.read()) > -1) {
                this.out.write(c);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

因此，当我尝试打印`code`正在存储的内容时，它显示如下：

```
AC000F9
3
BB 
```

实际上应该是这样的：

```
AC000F93BB 
```

我在这里做错了什么？这种从`byte[]`to的转换`String`是不对的？

**编辑：** 我需要读取一个总共有 10 个字符的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:11:44.030

不要使用 an`InputStream`来阅读 - 使用 a`Reader`的一些描述。如果您*需要*以 开头`InputStream`，请将其包装在`InputStreamReader`. 我会更改您的构造函数以接受 a `Reader`，并允许客户端传递他们想要的任何阅读器。这将使测试更容易（因为您可以只使用 a `StringReader`）。

编辑：注意 - 如果您*确实*需要从二进制文件创建阅读器`InputStream`，请明确选择`Charset`（编码）。所以使用`InputStreamReader`指定一个的构造函数重载。即使您想使用平台默认值，我也会明确说明您在做什么。

编辑：除了“字符串转换发生的位置”之外，还不清楚您希望阅读什么。您正在处理流式 API - 是什么决定了您在调用之前真正想阅读多少内容`setCode`？是一整条线吗？它是一些固定数量的字符吗？它是特定分隔符之前的字符吗？

编辑：现在我们知道得更多了，我建议你写一个这样的辅助方法：

```
// Assuming you now have a field of type Reader, called reader
private String readEntry() throws IOException {
    char[] buffer = new char[10];
    int index = 0;
    while (index < buffer.length) {
        int charsRead = reader.read(buffer, index, buffer.length - index);
        if (charsRead == -1) {
            throw new IOException("Couldn't read entry - end of data");
        }
        index += charsRead;
    }
    return new String(buffer);
} 
```

# html - CSS 菜单图标悬停重复

> ID：10215327
> 
> 赞同：1
> 
> 时间：2012-04-18T18:08:37.983
> 
> 标签：html, css, menu, icons, drop-down-menu

有问题的页面是[http://www.streetstyles4all.co.uk/test4.html](http://www.streetstyles4all.co.uk/test4.html)（一般菜单下拉问题）

你好

我决定更新我的菜单以使用图标。我有一个下拉菜单，没有 java 脚本等，只有 css 和 html，我试图将图标放在下拉菜单中的每个链接旁边，但在我可以继续前进之前，我无法解决这个问题，并摆脱用于主导航的悬停图像。图像出现在每个菜单旁边

*   这个我过不去 任何人都可以请建议。

    我的菜单代码是：

    ```
    <ul id="menu">
    <li id="home"><a href="http://www.streetstyles4all.co.uk" title="home page">Home</a></li>
    <li id="general"><a href="general.html" class="drop" title="General">General</a>
        <div class="dropdown_4columns">
            <div class="col_1">
                <h3>Street Styles 4 All</h3>

                <ul id="submenu">
                    <li id="ss4aaboutus"><a href="about_us.html" title="About Street Styles 4 All">About Us</a></li>
                    <li id="ss4aagency"><a href="contact_us.html" title="Contact Us">Agency</a></li>
                </ul>

            </div>
            <div class="col_1">
                <h3>Events</h3>
                    <ul>
                        <li><a href="whats-on-next.html" title="What is the next event from Street Styles 4 All">What's on next</a></li>
                        <li><a href="street-dance-battles-and-competitions.html" title="Street Dance Competitions and Battles">Competitions</a></li>
                        <li><a href="end-of-year-show.html" title="End Of Year Show">End of Year Show</a></li>
                        <li><a href="street-dance-summer-school.html" title="Summer School">Summer School</a></li>
                        <li><a href="street-dance-master-class-workshops.html" title="Street Dance masterclass workshops">Master Classes</a></li>
                    </ul>
            </div>
            <div class="col_1">
                <h3>Dance Crew</h3>
                    <ul>
                        <li><a href="demosquad.html" title="What is the next event from Street Styles 4 All">Demo Squad</a></li>
                        <li><a href="pureskillz.html" title="End Of Year Show">Pure Skillz</a></li>
                        <li><a href="performance-dates.html" title="Street Dance Competitions and Battles">Performance Dates</a></li>
                        <li><a href="join-the-crew.html" title="Street Dance Competitions and Battles">How to Join</a></li>
                    </ul>
            </div>
            <div class="col_1">
                <h3>Dance Crew</h3>
                    <ul>
                        <li><a href="demosquad.html" title="What is the next event from Street Styles 4 All">Demo Squad</a></li>
                        <li><a href="pureskillz.html" title="End Of Year Show">Pure Skillz</a></li>
                        <li><a href="performance-dates.html" title="Street Dance Competitions and Battles">Performance Dates</a></li>
                        <li><a href="join-the-crew.html" title="Street Dance Competitions and Battles">How to Join</a></li>
                    </ul>
            </div>
        </div>
        </li>
    <li id="nearestclass"><a href="street-dance-dvd.html" class="drop" title="street dance dvd">Nearest Class</a></li>
    <li id="tutorials"><a href="classes.html" class="drop" title="Street Dance Classes">Tutorials</a></li>
    <li id="shop"><a href="street-dancers-for-hire.html" title="Street Dancers for Hire">Shop</a></li>
    <li id="hireus"><a href="street-dancers-for-hire.html" title="Street Dancers for Hire">Hire Us</a></li>
    <li id="contact"><a href="contact-us.html" title="Contact Us">Contact</a></li> 
    ```

    有问题的页面是[http://www.streetstyles4all.co.uk/test4.html](http://www.streetstyles4all.co.uk/test4.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:33:12.803

我认为#general 的悬停状态和高度正在应用于#general LI 元素内的LI 元素。您可能需要为内部 LI 元素定义一个类并将背景设置为无并将其标记为 !important。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:24:05.503

尝试为您的图像使用 css [z-index 属性](http://www.w3schools.com/cssref/pr_pos_z-index.asp)。一样容易`z-index: 3;`

或者尝试使用 css 调整图像大小。

# c# - 在 Xpath 中使用引号

> ID：10215331
> 
> 赞同：4
> 
> 时间：2012-04-18T18:08:50.737
> 
> 标签：c#, xpath, special-characters, quotes

假设我是否需要使用 XPath 表达式，如下所示

```
v:MapLink[@Entity='TOM'S RESTAURANT'] 
```

但是由于 TOM'S 中的引用引发了异常。

有没有解决的办法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:13:13.373

大概这一切都在字符串本身内，所以这行得通吗？

```
"v:MapLink[@Entity=\"TOM'S RESTAURANT\"]" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:11:18.070

只需在属性周围使用不同的引号：

```
v:MapLink[@Entity="TOM'S RESTAURANT"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:19:25.187

您始终可以在 XPath 表达式的字符串中使用“其他”引号（引号与撇号），如其他答案所示。

如果你有一个包含两者的文字，你可以使用这样的`concat()`函数：

```
Tom's "Napoli" Pizza 
```

因为 XPath 表达式中的文字将变为

```
concat("Tom's ", '"Napoli" Pizza') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T07:50:37.027

上述所有的; 另外，在 XPath 2.0 中，您可以使用加倍分隔引号的 SQL 约定。所以你可以写

```
"Tom's ""Nopoli"" Pizza" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-03T04:28:33.383

就我而言，例如 2 Forms 中的搜索元素 XPath ：

```
(1) Parameters/Parameter[Key="{0}"]

(2) Parameters/Parameter[Key='{0}'] 
```

什么时候`{0} = CCC[AAA="BBB"]DDD`

第一种形式会出错，第二种形式使引号 ' , " 不同会起作用。

那是

```
// All using " Get Error
Parameters/Parameter[Key="CCC[AAA="BBB"]DDD"] 

// Using ' Out,  and " In  Work
Parameters/Parameter[Key='CCC[AAA="BBB"]DDD'] 
```

# javascript - ASP评分系统不会评分？- 为什么？

> ID：10215334
> 
> 赞同：2
> 
> 时间：2012-04-18T18:08:52.263
> 
> 标签：javascript, asp-classic, rating, rating-system

我正在使用这个评级系统：http: [//www.chrishardy.co.uk/asp/scripts/accessible-star-ratings/](http://www.chrishardy.co.uk/asp/scripts/accessible-star-ratings/)

问题是，现在一切都已设置好并可以使用，我不能给任何星星。

查看此页面以了解我的意思：[http ://bit.ly/HQgxQq](http://bit.ly/HQgxQq)

我希望你能帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:24:51.410

我收到了这个错误：

```
POST http://klasse.aabc.dk/rating/rpc.asp?rating=5&url=/ve-aspnet/akemver1/test.asp 404 (Not Found) 
```

我假设您尚未上传“rpc.asp”文件。您必须上传所有文件才能使一切正常工作。请检查您是否已将“rpc.asp”上传到与其余文件相同的目录中。

我发现 /rating 是错误的......我能够得到：

[http://klasse.aabc.dk/ve-aspnet/akemver1/rating/rpc.asp?rating=4&url=/ve-aspnet/akemver1/test.asp](http://klasse.aabc.dk/ve-aspnet/akemver1/rating/rpc.asp?rating=4&url=/ve-aspnet/akemver1/test.asp)

不要抛出 404 错误。这意味着您的虚拟路径是错误的？

我建议你这样做：

1.  解压 .zip

2.  更新“common.asp”的第 30 行

    ```
    ...
    Const NEAREST_HALF = false
    Const RATING_DIR = "ve-aspnet/akemver1/rating" 'This is line 30, you must edit it.

    '--- Database connection string ----------------------------------------------
    dim sConnectionString
    '-----------------------------------------------------------------------------
    ... 
    ```

3.  编辑 rating.css 并使其看起来像这样：

    ```
    .starlight {
        color: #e00;
    }
    #star-rating ul {
        list-style: none;
        margin: 3px;
        padding: 0px;
        width: 150px;
        height: 30px;
        position: relative;
        background: url(/ve-aspnet/akemver1/rating/rating.gif) top left repeat-x;
    }
    #star-rating li {
        padding: 0px;
        margin: 0px;
        /*\*/
        float: left;
        /* */
    }
    #star-rating li.current-rating {
        background: url(/ve-aspnet/akemver1/rating/rating.gif) left bottom;
        position: absolute;
        height: 30px;
        display: block;
        text-indent: -9000px;
        z-index: 1;
    }
    #star-rating li a {
        display: block;
        width: 30px;
        height: 30px;
        text-decoration: none;
        text-indent: -9000px;
        z-index: 20;
        position: absolute;
        padding: 0px;
        background-image: none;
    }
    #star-rating li a:hover {
        background: url(ve-aspnet/akemver1/rating/rating.gif) left center;
        z-index: 1;
        left: 0px;
    }
    #star-rating a.star-1 {
        left: 0px;
    }
    #star-rating a.star-1:hover {
        width: 30px;
    }
    #star-rating a.star-2 {
        left: 30px;
    }
    #star-rating a.star-2:hover {
        width: 60px;
    }
    #star-rating a.star-3 {
        left: 60px;
    }
    #star-rating a.star-3:hover {
        width: 90px;
    }
    #star-rating a.star-4 {
        left: 90px;
    }
    #star-rating a.star-4:hover {
        width: 120px;
    }
    #star-rating a.star-5 {
        left: 120px;
    }
    #star-rating a.star-5:hover {
        width: 150px;
    } 
    ```

4.  将整个 .zip（当然是编辑过的！）上传到 /ve-aspnet/akemver1/rating

5.  让您的 test.asp 包含以下代码：

    ```
    <html>
    <head>
    <script type="text/javascript" src="/ve-aspnet/akemver1/rating/rating.js"></script>
    <link type="text/css" rel="stylesheet" href="/ve-aspnet/akemver1/rating/rating.css" />
    </head>
    <body>
    <h3>This is a test...</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam imperdiet varius magna, non molestie libero porttitor a. Fusce vel lorem at nisl egestas placerat eget non mauris. Fusce consequat tortor id nunc blandit id pretium libero egestas. Mauris egestas, nulla sed consequat congue, enim nibh ullamcorper nisl, id aliquam lectus urna ac nibh. Nunc in dolor justo, eu lacinia dolor. Donec velit augue, facilisis at interdum vel, sagittis id urna. Maecenas blandit mollis augue, sit amet ultrices mauris aliquam vitae. Nullam eu magna urna. Sed bibendum nunc ut nunc molestie ullamcorper. Vivamus ut erat ultrices elit tincidunt viverra id sed ligula. In in lorem arcu. Pellentesque varius mi egestas est vehicula vitae posuere arcu pharetra. Phasellus sodales ullamcorper bibendum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum consequat justo eu arcu pharetra porttitor. Etiam condimentum lacus a dui blandit cursus eu in lorem.</p>
    <!--#include virtual="/ve-aspnet/akemver1/rating/rating.asp"-->
    </body>
    </html> 
    ```

6.  将 test.asp 上传到“/ve-aspnet/akemver1”

7.  它应该工作：D

**编辑：** 再三考虑，您可以将 .zip 的全部内容放入“/rating”

# c# - 如何在 C# 中读取和更改 xml 文件

> ID：10215335
> 
> 赞同：1
> 
> 时间：2012-04-18T18:08:52.687
> 
> 标签：c#, .net, xml

非常感谢您阅读我的问题。

这是我的 xml 文件。（对于节点 Songs，有很多名为 Song 的子节点）

```
<?xml version="1.0" encoding="utf-8" ?>
<xmlData>
    <version>1.0</version>
    <Songs>
        <Song>
            <artist>mic</artist>
            <track>2</track>
            <column>happy</column>
            <date>14</date>
        </Song>
        <Song>
            <artist>cool</artist>
            <track>2</track>
            <column>work</column>
            <date>4</date>
        </Song>
    </Songs>
</xmlData> 
```

阅读xml，我使用以下代码：

```
 XmlDocument doc = new XmlDocument();
        doc.Load(xmlFilePath);

        XmlNode versionNode = doc.SelectSingleNode(@"/xmlData/version");
        Console.WriteLine(versionNode.Name + ":\t" + versionNode.InnerText);

        XmlNode SongsNode = doc.SelectSingleNode(@"/xmlData/Songs");
        Console.WriteLine(SongsNode.Name + "\n");

        XmlDocument docSub = new XmlDocument();
        docSub.LoadXml(SongsNode.OuterXml);

        XmlNodeList SongList = docSub.SelectNodes(@"/Songs/Song");

        if (SongList != null)
        {
            foreach (XmlNode SongNode in SongList)
            {
                XmlNode artistDetail = SongNode.SelectSingleNode("artist");
                Console.WriteLine(artistDetail.Name + "\t: " + artistDetail.InnerText);

                XmlNode trackDetail = SongNode.SelectSingleNode("track");
                Console.WriteLine(trackDetail.Name + "\t: " + trackDetail.InnerText);

                XmlNode columnDetail = SongNode.SelectSingleNode("column");
                Console.WriteLine(columnDetail.Name + "\t: " + columnDetail.InnerText);

                XmlNode dateDetail = SongNode.SelectSingleNode("date");
                Console.WriteLine(dateDetail.Name + "\t: " + dateDetail.InnerText + "\n");

            }
        } 
```

它似乎工作。但是如何将更改写入 xml 文件？也许，我会更改 Song 中的一些 childNode，并可能通过艺术家关键字删除整个 chindNode。

有没有可能像这个函数 bool DeleteSongByArtist(string sArtist); bool ChangeNodeInSong（字符串 sArtist，字符串 sNodeName，字符串值）；

因为“阅读解决方案”是“XmlDucoment”，所以最好使用“XmlDocument”“更改解决方案”

但是，如果您有更好的想法来阅读和更改 xml 文件，请给我示例代码...请不要写解决方案的名称，例如“Ling to xml”...实际上，我做了很多睾丸，但失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:11:20.223

**欢迎来到 Stackoverflow！**

您可以简单地通过设置新的`.Value`或在您的情况下更改节点`.InnerText`。

### 样本

```
// change the node
trackDetail.InnerText = "NewValue"
// save the document
doc.Save(xmlFilePath); 
```

### 更多信息

*   [如何：修改现有 Xml 文件](http://geekswithblogs.net/chrisfalter/archive/2006/03/27/73515.aspx)
*   [MSDN - XmlDocument.Save 方法](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:11:53.060

您需要使用 XmlWriter。最简单的方法是这样的......

```
using(XmlWriter writer = new XmlWriter(textWriter))
{
   doc.WriteTo(writer);
} 
```

其中 textWriter 是您初始化的文本编写器。

实际上，忘记那个...最简单的方法是打电话给...

```
doc.Save(xmlFilePath); 
```

要按艺术家名称删除艺术家，请添加以下方法：

```
 bool DeleteSongByArtist(XmlDocument doc, string artistName)
    {
        XmlNodeList SongList = doc.SelectNodes(@"/Songs/Song");
        if (SongList != null)
        {
            for (int i = SongList.Count - 1; i >= 0; i--)
            {
                if (SongList[i]["artist"].InnerText == artistName && SongList[i].ParentNode != null)
                {
                    SongList[i].ParentNode.RemoveChild(SongList[i]);
                }
            }

        }
    } 
```

您可能希望对其进行更多清理以使其更具弹性。当您调用它时，将您的初始代码更改为这样。不要创建`subDocument`您想要使用整个 XmlDocument 的文件。

```
 XmlDocument doc = new XmlDocument();
    doc.Load(xmlFilePath);

    XmlNode versionNode = doc.SelectSingleNode(@"/xmlData/version");
    Console.WriteLine(versionNode.Name + ":\t" + versionNode.InnerText);

    XmlNode SongsNode = doc.SelectSingleNode(@"/xmlData/Songs");
    Console.WriteLine(SongsNode.Name + "\n");

    XmlNodeList SongList = doc.SelectNodes(@"/Songs/Song");

    if (SongList != null)
    {
        foreach (XmlNode SongNode in SongList)
        {
            XmlNode artistDetail = SongNode.SelectSingleNode("artist");
            Console.WriteLine(artistDetail.Name + "\t: " + artistDetail.InnerText);

            XmlNode trackDetail = SongNode.SelectSingleNode("track");
            Console.WriteLine(trackDetail.Name + "\t: " + trackDetail.InnerText);

            XmlNode columnDetail = SongNode.SelectSingleNode("column");
            Console.WriteLine(columnDetail.Name + "\t: " + columnDetail.InnerText);

            XmlNode dateDetail = SongNode.SelectSingleNode("date");
            Console.WriteLine(dateDetail.Name + "\t: " + dateDetail.InnerText + "\n");

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:02:31.413

> 请不要写解决方案的名称，例如“Ling to xml”……实际上，我做了很多睾丸，但都失败了。

我仍然认为，这是开始使用 Linq2Xml 的好时机。如果您不喜欢它，请忽略它。

```
XDocument xDoc = XDocument.Load(new StringReader(xml));

//Load Songs
var songs = xDoc.Descendants("Song")
                .Select(s => new
                {
                    Artist = s.Element("artist").Value,
                    Track = s.Element("track").Value,
                    Column = s.Element("column").Value,
                    Date = s.Element("date").Value,
                })
                .ToArray();

//Delete Songs
string songByArtist="mic";
xDoc.Descendants("Song")
    .Where(s => s.Element("artist").Value == songByArtist)
    .Remove();
string newXml = xDoc.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T19:05:43.127

你可以做

```
 XmlNodeList SongList = doc.SelectNodes(@"//Songs/Song"); 
```

// 告诉它选择文档中任意位置的 Songs 节点。这比

```
 doc.SelectNodes(@"/document/level1/music/Songs") 
```

请注意，上述声明显然不是针对您的 xml，而是为了证明 //
使用 // 消除了对 docSub 文档和 SongsNode 元素的需要。要添加然后删除一首歌曲，只需使用以下命令

```
 XmlDocument doc = new XmlDocument();
        XmlElement ea = doc.SelectSingleNode("//songs");
        XmlElement el = doc.CreateElement("song");
        XmlElement er;
        ea.AppendChild(el);
        //doing my work with ea
        //you could use innerxml.
        el.InnerXml = "<artist>Judas Priest</artist><track>7</track><column>good</column><date>1</date>";
        //or you can treat each node as above
        er = doc.CreateElement("Name");
        el.AppendChild(er);
        er.InnerText = "The Ripper";
        //but you don't nead this song any more?
        ea.RemoveChild(el);
        //so it's gone. 
```

这就是它的全部内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T18:24:07.890

您无法保存更改，因为您对一个全新的文档进行了更改！

您可能打算执行以下操作：

```
XmlNode SongsNode = doc.SelectSingleNode(@"/xmlData/Songs");
Console.WriteLine(SongsNode.Name + "\n");

// Don't make a new XmlDocument here! Use your existing one
XmlNodeList SongList = SongsNode.SelectNodes(@"/Song"); 
```

此时`SongList`仍是*住在里面* `doc`。现在当你打电话时：

```
doc.Save(xmlFilePath); 
```

您的更改将按您的预期保存。

如果您要删除符合特定条件的节点：

```
// Use XPath to find the matching node
XmlNode song = SongsNode.SelectSingleNode(@"/Song[artist='" + artist + "']");

// Remove it from its Parent
SongsNode.RemoveChild(song); 
```

如果您要添加新节点：

```
// Create the new nodes using doc
XmlNode newSong = doc.CreateElement("Song");

XmlNode artist = doc.CreateElement("artist");
artist.InnerText = "Hello";

// Begin the painstaking process of creation/appending
newSong.AppendChild(artist);

// rinse...repeat...

// Finally add the new song to the SongsNode
SongsNode.AppendChild(newSong); 
```

# javascript - 在backbone.js中为孩子对父母使用手动ID绑定是否正确

> ID：10215340
> 
> 赞同：0
> 
> 时间：2012-04-18T18:09:02.537
> 
> 标签：javascript, jquery, backbone.js

我正在做一个基本上像 facebook 墙一样工作的应用程序。

本质上是帖子和评论。

它正在工作，但为了呈现 CommentView，我在我的帖子模板中使用了与此类似的代码

```
<div class="wall-post"> 
    <div class="wall-post-content">${PostContent}</div>        
    <div class="wall-post-comments" id="wall-post-comments-${PostId}"></div>
</div> 
```

然后我像这样使用该帖子的评论区的ID。

```
var comment_view = new PostCommentView({ model: post.get("Comments") });
this.$('#wall-post-comments-'+ post.get("PostId")).append($(comment_view.render())); 
```

这可行，但有些事情告诉我我不应该手动绑定我自己的 ID。我觉得我应该用 this.el 做一些聪明的事情？

谁能指出我正确的方向。

我正在使用 BackBone Relational 来管理关系。

//编辑

根据要求进行更多的实施

//一些与点击事件相关的功能和功能被删除，因为我认为它们与我的问题无关。

```
PostModel = Backbone.RelationalModel.extend({
urlRoot: '/api/post',
idAttribute: 'PostId',
relations: [{
    type: Backbone.HasMany,
    key: 'Comments',
    relatedModel: 'CommentModel',
    reverseRelation: {
        key: 'Post',
        includeInJSON: 'PostId'
    }
}]
});

CommentModel = Backbone.RelationalModel.extend({
    urlRoot: '/api/comment',
    idAttribute: 'PostId'
});

PostCollection = Backbone.Collection.extend({
    url: '/api/post',
    model: PostModel
});

PostListView = Backbone.View.extend({
tagName: 'div',

className: 'PostListView',

initialize: function(){
    _.bindAll(this, 'render', 'render_thread_summary', 'on_submit', 'on_thread_created', 'on_error');
    this.model.bind('reset', this.render); 
    this.model.bind('change', this.render); 
    this.model.bind('add', this.render_thread_summary); 
},
 template: $('#wall-post-template').html(),

render: function() {
    $(this.el).html($(this.template).tmpl(this.model.toJSON()));

    this.model.forEach(this.render_thread_summary);
    return $(this.el).html();
},
render_thread_summary: function(post) {
        var comment_view = new PostCommentView({ model: post.get("Comments") });
        this.$('#wall-post-comments-'+ post.get("PostId")).append($(comment_view.render()));
}
});

PostCommentView = Backbone.View.extend({   

initialize: function(){
    _.bindAll(this, 'render', 'on_click');
    this.model.bind('change', this.render);
},

template: $('#wall-comments-template').html(),
render: function() {
    var html = $(this.el).html($(this.template).tmpl(this.model.toJSON()));
    return html;
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:22:28.617

我刚刚开始深入研究 Backbone（还没有对 Backbone Relational 做任何事情），所以考虑到这一点，这是我的 2 美分：

*   Backbone 为其模型定义了 id，因此无需定义您自己的 id attr。如果你检查一个模型实例，你会看到它的 id，即使它没有在你的 impl 中明确定义。
*   在我看来，您缺少由单个评论模型组成的评论集合。然后在您的视图中适当地附加模型事件。这样您就不必手动管理评论视图呈现（这一切都由 Backbone 基于事件触发器完成）。

如果您还没有查看 BB 示例 Todos 应用程序，我建议您看一下 - 这应该有助于您设计评论模型并更好地查看。

[todos.js](http://documentcloud.github.com/backbone/docs/todos.html)

[todos app](http://documentcloud.github.com/backbone/examples/todos/index.html) - 使用 Fire/ChromeBug 检查代码

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:18:41.537

我大大没有充分利用 this.el 参考。对于页面上的大多数内容，通常不需要使用 id，因为在视图中您可以只引用 $(this.el)，然后从页面的该部分引用。$(".className", this.el) 将选择页面上项目中的任何类。el 本质上是对页面上视图呈现到的区域的引用。一旦你掌握了它，它真的很干净。

# jquery - 如何订购（排序） 包含数字内容的列表？

> ID：10215341
> 
> 赞同：8
> 
> 时间：2012-04-18T18:09:03.210
> 
> 标签：jquery, list, sorting, html-lists

我有一个如下动态创建的列表：

```
<ul>
  <li>20</li>
  <li>10</li>
  <li>5</li>
  <li>3</li>
  <li>32</li>
  <li>25</li>
  <li>6</li>
  <li>12</li>
  <li>8</li>
</ul>
```

是否可以使用 jQuery 订购此列表？我需要它从小到大排序，如下所示：

```
<ul>
  <li>3</li>
  <li>5</li>
  <li>6</li>
  <li>8</li>
  <li>10</li>
  <li>12</li>
  <li>20</li>
  <li>25</li>
  <li>32</li>
</ul>
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T18:15:38.067

下面应该做的伎俩：

```
$(function() {
  $('button').click(function() {
    var liContents = [];
    $('ul li').each(function() {
      liContents.push(parseInt($(this).text(), 10));
    });
    liContents.sort(numOrdDesc);
    $('ul li').each(function() {
      $(this).text(liContents.pop());
    });
  });
});

function numOrdDesc(a, b) {
  return (b - a);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul>
  <li>20</li>
  <li>10</li>
  <li>5</li>
  <li>3</li>
  <li>32</li>
  <li>25</li>
  <li>6</li>
  <li>12</li>
  <li>8</li>
</ul>

<button>Sort</button>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T18:24:47.530

```
var li = $('ul li');
li.sort(function(a, b) {
    if(parseInt($(a).text()) > parseInt($(b).text()))
        return 1;
    else return -1;
});
$('ul').empty().html(li); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:16:53.463

也有 jQuery 插件来处理这个问题。查看[TinySort](http://tinysort.sjeiti.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T18:18:58.400

这是一种可能的方法：

```
$(function() {
  var elems = $('ul').children('li').remove();
  elems.sort(function(a, b) {
    return parseInt($(a).text()) > parseInt($(b).text());
  });
  $('ul').append(elems);
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul>
  <li>20</li>
  <li>10</li>
  <li>5</li>
  <li>3</li>
  <li>32</li>
  <li>25</li>
  <li>6</li>
  <li>12</li>
  <li>8</li>
</ul>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T18:32:14.750

你可以做：

```
var listItems = [];
$("#list li").each(function() {
  console.log($(this).text());
  listItems.push(parseInt($(this).text()));
});

listItems.sort(function(a, b) {
  return a - b
});

$("#list").html("");
$.each(listItems, function(i, v) {
  $("#list").append($("<li>" + v + "</li>"));
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul id="list">
  <li>20</li>
  <li>10</li>
  <li>5</li>
  <li>3</li>
  <li>32</li>
  <li>25</li>
  <li>6</li>
  <li>12</li>
  <li>8</li>
</ul>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-06T07:43:06.973

使用**sortContent**插件，一切都会变得简单、**干净**并且可以重复使用：

```
 $('ul').sortContent({helper:myhelper}); 
```

已知：

```
myhelper=function(e){
   return $('a',$(e)).attr('href');
} 
```

# [演示](http://jsfiddle.net/abdennour/eVG5p/)

* * *

如果您想发现其他选项，请访问[插件主页](https://github.com/abdennour/jquery.sortContent)

# c# - 负载测试期间的 CommunicationException

> ID：10215342
> 
> 赞同：1
> 
> 时间：2012-04-18T18:09:04.370
> 
> 标签：c#, .net, wcf, exception-handling, high-load

我正在开发一个 wcf 应用程序，我开始看到一个奇怪的超时行为。我创建了一个与真实配置相同的 foo 应用程序，以确定问题是否与 wcf 相关。

客户端应用程序代码是这样的：

```
public class Clients
{
    public static void Main(string[] args)
    {
        var random = new Random();
        var run = true;
        var threads = 100;

        for (int i = 0; i < threads; i++)
        {
            int delay = random.Next(1000, 1500);

            var t = new Thread(() => {
                var id = Guid.NewGuid().ToString("N").Substring(0, 10);
                var client = new Client(@"client");

                while (run)
                {
                    Console.WriteLine(@"Sending thread id " + id);
                    client.Operation(@"Thread " + id);
                    Thread.Sleep(delay);
                }
            });
            t.Start();
        }
    }
} 
```

服务器应用程序代码只记录发送到控制台的数据：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple,
    InstanceContextMode = InstanceContextMode.Single,
    IncludeExceptionDetailInFaults = true,
    UseSynchronizationContext = false,
    ValidateMustUnderstand = false)]
public class Service : IService
{
    public void Operation(string data)
    {
        Console.WriteLine(@"Data received: {0}", data);
    }
} 
```

这是 app.config 文件：

```
<?xml version="1.0"?>
<configuration>
<system.serviceModel>
<services>
  <service name="Test.Service" behaviorConfiguration="throttle">
    <endpoint name="service" 
              address="net.tcp://localhost/service" 
              binding="netTcpBinding" 
              bindingConfiguration="NetTcpBinding" 
              contract="Test.IService"/>
  </service>
</services>
<client>
  <endpoint name="client"
        address="net.tcp://localhost/service"
        binding="netTcpBinding" 
        bindingConfiguration="NetTcpBinding" 
        contract="Test.IService"/>
</client>
<bindings>
  <netTcpBinding>
    <binding name="NetTcpBinding"
             portSharingEnabled="true" 
             closeTimeout="00:01:00" 
             openTimeout="00:00:30" 
             receiveTimeout="00:00:10"
             sendTimeout="00:00:10"
             transactionFlow="false" 
             transferMode="Streamed" 
             transactionProtocol="OleTransactions"
             hostNameComparisonMode="StrongWildcard" 
             maxBufferPoolSize="6553600"
             maxBufferSize="6553600"
             maxConnections="500"
             maxReceivedMessageSize="6553600">
      <readerQuotas maxDepth="128" 
                    maxStringContentLength="3276800" 
                    maxArrayLength="6553600" 
                    maxBytesPerRead="1638400"
                    maxNameTableCharCount="6553600"/>
      <security mode="None">
        <transport protectionLevel="None"/>
      </security>
    </binding>
  </netTcpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="throttle">
      <serviceThrottling maxConcurrentCalls="1000" 
                         maxConcurrentInstances="10"
                         maxConcurrentSessions="500"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

如果同时运行两个应用程序并且客户端应用程序的线程数为 100，则一切正常。但是，如果我将线程数更改为 300，则会出现以下异常：

```
System.ServiceModel.CommunicationException: The socket connection was aborted. 
This could be caused by an error processing your message or a receive timeout 
being exceeded by the remote host, or an underlying network resource issue. 
Local socket timeout was '00:00:10'.---> System.Net.Sockets.SocketException: 
An existing connection was forcibly closed by the remote host at
System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 
offset, Int32 size, TimeSpan timeout, Boolean closing) 
```

我在四核机器上使用端口共享，服务是自托管的。

这与我在实际应用程序中遇到的问题相同，但超时时间更长（2 分半钟）。我不敢相信 300 是具有 InstanceContextMode.Single 的服务可以处理的最大连接数。我阅读了有关默认 ChannelInitializationTimeout 值（设置为 5）的问题，但我认为这不是问题（在另一个测试中，我开始为所有线程创建并打开一个客户端，并等待 6 秒以启动所有线程）线程，结果是 10 秒后的相同异常）。也许我正在以错误的方式配置某些东西。

如果有人有线索或想法，他们会有所帮助。提前致谢。

**更新**

我将绑定从 netTcp 更改为 basicHttpBinding，现在一切正常（没有引发 CommunicationExceptions）。此外，我开始比以前更快地在服务中获取消息，有谁知道为什么我会通过 basicHttpBinding 获得这种改进？

# android - 如何在 Android 中向此警报对话框添加关闭按钮

> ID：10215343
> 
> 赞同：0
> 
> 时间：2012-04-18T18:09:12.527
> 
> 标签：android, android-alertdialog

我需要帮助实现代码以添加否定或肯定按钮以关闭我的警报对话框（任何帮助将不胜感激）。我认为我在代码中的一些标点符号也需要更改，所以任何帮助都会很棒:)

```
package kevin.erica.box;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.TextView;
import java.util.Random;

public class TheKevinAndEricaBoxActivity extends Activity {
/** Called when the activity is first created. */
private String[] myString;
private String list;
private String[] myString2;
private String list2;
private static final Random rgenerator = new Random();
private static final Random rgenerator2 = new Random();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Resources res = getResources();

    myString = res.getStringArray(R.array.myArray);

    list = myString[rgenerator.nextInt(myString.length)];

    myString2 = res.getStringArray(R.array.myArray2);

    list2 = myString2[rgenerator.nextInt(myString2.length)];

    ImageButton ib = (ImageButton) findViewById(R.id.imagebutton1);
    ib.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View erica) {
            AlertDialog.Builder b = new AlertDialog.Builder(
                    TheKevinAndEricaBoxActivity.this);
                  b.setMessage(myString[rgenerator.nextInt(myString.length)]);
            b.setTitle(R.string.title1); 
Dialog d = b.create();
            d.show();

        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:14:39.860

您可以在您的应用程序中使用以下代码::::

```
AlertDialog.Builder b = new AlertDialog.Builder(TheKevinAndEricaBoxActivity.this);
b.setMessage(myString[rgenerator.nextInt(myString.length)]);
b.setTitle(R.string.title1); 
b.setPositiveButton("Button Text", new DialogInterface.OnClickListener(){
@Override
public void onClick(DialogInterface dialog, int which){
    //stuff you want the button to do
}
});
b.setNegativeButton("Button Text", new DialogInterface.OnClickListener(){
@Override
public void onClick(DialogInterface dialog, int which){
    //stuff you want the button to do
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:16:12.737

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

            // set title
            alertDialogBuilder.setTitle("Your Title");

            // set dialog message
            alertDialogBuilder
                .setMessage("Click yes to exit!")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, close
                        // current activity
                        MainActivity.this.finish();
                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show(); 
```

在发布问题之前在 Google 中搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:14:05.467

[这是一个指南。](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)

注意函数“ set_ *_* _Button”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:13:17.323

```
b.setNegativeButton("Button Text", new DialogInterface.OnClickListener(){
@Override
public void onClick(DialogInterface dialog, int which){
    //stuff you want the button to do
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T18:15:26.603

您需要制作一个自定义对话框。请参阅示例：

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext);

dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Custom Dialog");

TextView text = (TextView) dialog.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");
ImageView image = (ImageView) dialog.findViewById(R.id.image);
image.setImageResource(R.drawable.android); 
```

这是完整的示例：

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

# javascript - 获取 div 中锚点的 href 并将其应用于图像？

> ID：10215345
> 
> 赞同：0
> 
> 时间：2012-04-18T18:09:20.083
> 
> 标签：javascript, jquery

我有一个带有图像和链接的 div。

是否有可能在页面加载时，我可以以某种方式找到链接的 href 并应用图像的锚标记？

我知道这似乎是一个奇怪的要求，我只是问是否可以做到，如果可以，怎么做？

[http://jsfiddle.net/fFgwb/](http://jsfiddle.net/fFgwb/)

* * *

对不起大家，我希望图像被包裹在一个锚标签中，与“继续阅读”链接相同的href

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:22:46.853

仍在对元素的定位进行假设，但基础知识如下。在纯JS中执行此操作*非常*简单，无需包含 jQuery。

**[现场演示](http://jsfiddle.net/loktar/fFgwb/14/)**

```
var link = document.querySelectorAll('.card-prod a');
link[0].href = link[1].href; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:20:35.087

尝试这个：

```
$(document).ready(function(){

    $("#theDiv").find("a").attr("href", $('img').attr('src'));

}); 
```

* * *

更新：

```
$(document).ready(function(){

     $("#anchor").attr("href", $('#continue').attr('href'));

}); 
```

[http://jsfiddle.net/fFgwb/5/](http://jsfiddle.net/fFgwb/5/)

* * *

因此，您应该将类​​添加`.divs`到 div 和其他类以锚链接：

```
$(document).ready(function(){

    $(".divs").each(function(){

        $(this).find("a").hasClass("anchor").attr("href", $(this).find("a").hasClass("continue").attr('href'))

     });

}); 
```

# html - iPad 多栏布局问题

> ID：10215352
> 
> 赞同：1
> 
> 时间：2012-04-18T18:09:30.423
> 
> 标签：html, css, ios, ipad, webkit

我使用以下代码在 iPad 的 UIWebView 中成功实现了多列文本：

```
<html>
<head>
<style type="text/css">
div.body {
        direction:rtl;
    -webkit-column-count: 3;
    text-align: justify;
    font-size:24px;
}
</style>
</head>
<body >
<div class="body">
<img src="http://d2o0t5hpnwv4c1.cloudfront.net/958_placeholders/placehold.gif"/>
<p>Long text goes here</p>
<img src="http://d2o0t5hpnwv4c1.cloudfront.net/958_placeholders/placehold.gif" align="left"/>

</div>
</body>
</html> 
```

但是有两件事我不能做：

1.  如何使第二列位于文本的第三列**之上**，而不是结尾。请记住，文本是可变的，所以我不能放入内联。
2.  如何将其演变为多列和多行布局。例如，长文本太长了，我希望它跨越到具有相同 3 列的第二行，而不是让一行文本的长度超过横向 iPad 的高度。改写：我想在需要时在**2x3**网格中排列一段文本，而不是 1x3。

我愿意为此进行任何类型的重组。

# c# - 如何防止 form.target 导致历史上的所有 HTTP GET 再次往返服务器？

> ID：10215354
> 
> 赞同：0
> 
> 时间：2012-04-18T18:09:48.203
> 
> 标签：c#, javascript, asp.net, html

好的，我正在使用 form.target 在新窗口中打开内容。但是，当我执行此操作然后单击浏览器上的后退按钮时，我发现由 GET 产生的任何条目正在与服务器进行另一次往返。这是一个问题，因为会话变量可能在过渡期间已更改，因此新的 GET 不再与旧的匹配。

我正在为这个 Web 应用程序使用 C# 和 javascript，如果有帮助的话。

此行为发生在 IE8 上，但不在 Firefox 10 上。有什么方法可以在 IE 中阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:39:02.937

我通过在 URL 上添加一个半随机 ID 作为查询字符串解决了这个问题。

我还将它添加到我的 OnInit 事件中。出于某种原因，明确设置缓存设置会有所帮助。

```
Response.AppendHeader("Cache-Control", "private, max-age=600"); 
```

结合起来，这赋予了页面唯一性并强制浏览器缓存。这阻止了浏览器在浏览历史记录中遇到 GET 操作时始终检索页面的最新版本。

# oracle - Executing triggers in Oracle for copying the old values to a Mirror table

> ID：10215364
> 
> 赞同：2
> 
> 时间：2012-04-18T18:10:12.983
> 
> 标签：oracle, triggers

We are trying to copy the current row of a table to mirror table by using a trigger before delete / update. Below is the working query

```
 BEFORE UPDATE OR DELETE 
  ON CurrentTable FOR EACH ROW
  BEGIN
      INSERT INTO MirrorTable
 ( EMPFIRSTNAME,
   EMPLASTNAME,
   CELLNO,
   SALARY
    )
VALUES
 ( :old.EMPFIRSTNAME,
   :old.EMPLASTNAME,
   :old.CELLNO,
   :old.SALARY
    ); 
END; 
```

But the problem is we have more than 50 coulmns in the current table and dont want to mention all those column names. Is there a way to select all coulmns like :old.*

```
SELECT  * INTO MirrorTable FROM CurrentTable 
```

Any suggestions would be helpful.

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:25:52.997

Realistically, no. You'll need to list all the columns.

*   You could, of course, dynamically generate the trigger code pulling the column names from `DBA_TAB_COLUMNS`. But that is going to be dramatically more work than simply typing in 50 column names.
*   If your table happens to be an object table, `:new` would be an instance of that object so you could insert that. But it would be rather rare to have an object table.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:37:32.393

If your 'current' and 'mirror' tables have **EXACTLY** the same structure you may be able to use something like

```
INSERT INTO MirrorTable
  SELECT *
    FROM CurrentTable
    WHERE CurrentTable.primary_key_column = :old.primary_key_column 
```

Honestly, I think that this is a poor choice and wouldn't do it, but it's a more-or-less free world and you're free (more or less :-) to make your own choices.

Share and enjoy.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T18:42:50.347

For what it's worth, I've been writing the same stuff and used this to generate the code:

SQL> set pagesize 0
SQL> select ':old.'||COLUMN_NAME||',' from all_tab_columns where table_name='BIGTABLE' and owner='BOB';
:old.COL1,
:old.COL2,
:old.COL3,
:old.COL4,
:old.COL5,
...

If you feed all columns, no need to mention them twice (and you may use NULL for empty columns):

INSERT INTO bigtable VALUES (
:old.COL1,
:old.COL2,
:old.COL3,
:old.COL4,
:old.COL5,
NULL,
NULL);

people writing tables with that many columns should have no desserts ;-)

# android - 带有嵌入式ScrollView的RelativeLayout中的循环依赖

> ID：10215368
> 
> 赞同：0
> 
> 时间：2012-04-18T18:10:28.630
> 
> 标签：android, scrollview, android-relativelayout

基本上，一个活动应该显示在屏幕上：
1\. 顶部的标志。必须始终显示。Must center both vertically and horizo​​ntally, when choices leaves extra space on screen.
2.底部有一个ScrollView。托管垂直线性布局，后者又托管一组用户可以选择的选项。必须占用最少的空间来显示所有选项（因此徽标垂直居中）。最多可占用屏幕上的 (Screen - Logo) 空间。以编程方式添加选项。

现在，我在布局中将其定义为：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:padding="5dp"
            android:src="@drawable/logo" />

        <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_below="@id/imageView"
            >

            <LinearLayout
                android:id="@+id/ChoicesPanel"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >
            </LinearLayout>
        </ScrollView>
    </RelativeLayout> 
```

1.  如果 ImageView 使用 layout_above=scrollView 布局，则 ScrollView 在之前布局，不考虑 ImageView 的最小尺寸。

2.  如果使用 layout_below=ImageView 对 ScrollView 进行布局，则 ImageView 将停留在顶部。当只有 2-3 个选项时，屏幕看起来很丑。

    有没有办法可以满足约束？或者我应该定义两个不同的布局 xml 文件，并以编程方式切换到正确的一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:06:47.590

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:padding="5dp"
        android:src="@drawable/ic_launcher" />

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/imageView" >

        <LinearLayout
            android:id="@+id/ChoicesPanel"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_1"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_1"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_2"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_2"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_3"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_3"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_4"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_4"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_5"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_5"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_6"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_6"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_1"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_2"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_2"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_3"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_3"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_4"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_4"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_5"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_5"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_text_6"/>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="scroll_view_1_button_6"/>

        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

这似乎对我有用。它就像滚动视图中的 14 个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:29:24.907

```
public class TestActivity extends Activity {

private RelativeLayout mRelativeLayout;
private RelativeLayout mRelativeLayout2;
private ImageView mImageView;
private ScrollView mScrollView;
private TextView TV1;
private TextView TV2;
private TextView TV3;
private TextView TV4;
private Button B1;
private Button B2;
private Button B3;
private Button B4;
private RelativeLayout.LayoutParams lp;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

mRelativeLayout = new RelativeLayout(this);
    setContentView(mRelativeLayout);

mImageView = new ImageView(this);
mImageView.setId(1);
RelativeLayout.LayoutParams lp = new      RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
mImageView.setImageResource(R.drawable.ic_launcher);
mRelativeLayout.addView(mImageView, lp);

mScrollView = new ScrollView(this);
RelativeLayout.LayoutParams lp2 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
lp2.addRule(RelativeLayout.BELOW, mImageView.getId());
mRelativeLayout.addView(mScrollView, lp2);

mRelativeLayout2 = new RelativeLayout(this);
int itemcounts = mRelativeLayout2.getChildCount();
mScrollView.addView(mRelativeLayout2);

TV1 = new TextView(this);
TV1.setId(2);
TV1.setTextSize(20);
TV1.setText("Im a Text View. The First");
mRelativeLayout2.addView(TV1);

B1 = new Button(this);
B1.setId(3);
RelativeLayout.LayoutParams bl1 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
bl1.addRule(RelativeLayout.BELOW, TV1.getId());
B1.setText("Im a Button. The First");
B1.setTextSize(25);
mRelativeLayout2.addView(B1, bl1);

TV2 = new TextView(this);
RelativeLayout.LayoutParams tvl2 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
tvl2.addRule(RelativeLayout.BELOW, B1.getId());
TV2.setId(4);
TV2.setTextSize(20);
TV2.setText("Im a Text View. The Second");
mRelativeLayout2.addView(TV2, tvl2);

B2 = new Button(this);
B2.setId(5);
RelativeLayout.LayoutParams bl2 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
bl2.addRule(RelativeLayout.BELOW, TV2.getI());
B2.setText("Im a Button. The Second");
B2.setTextSize(25);
mRelativeLayout2.addView(B2, bl2);

TV3 = new TextView(this);
TV3.setId(6);
RelativeLayout.LayoutParams tvl3 = new      RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
tvl3.addRule(RelativeLayout.BELOW, B2.getId());
TV3.setTextSize(20);
TV3.setText("Im a Text View. The Third");
mRelativeLayout2.addView(TV3, tvl3);

B3 = new Button(this);
B3.setId(7); 
RelativeLayout.LayoutParams bl3 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
bl3.addRule(RelativeLayout.BELOW, TV3.getId());
B3.setText("Im a Button. The Third");
B3.setTextSize(25);
mRelativeLayout2.addView(B3, bl3);

TV4 = new TextView(this);
TV4.setId(8);
RelativeLayout.LayoutParams tvl4 = new     RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
tvl4.addRule(RelativeLayout.BELOW, B3.getId());
TV4.setTextSize(20);
TV4.setText("Im a Text View. The Fourth");
mRelativeLayout2.addView(TV4, tvl4);

if (itemcounts < 4) {
    lp = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
    lp.addRule(RelativeLayout.CENTER_IN_PARENT);
}
if (itemcounts > 4) {
    lp = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
}

}
} 
```

尝试这个

# java - Java/Android - 从 Inputstream 读取后写入 Outputstream

> ID：10215369
> 
> 赞同：0
> 
> 时间：2012-04-18T18:10:35.180
> 
> 标签：java, android, bluetooth, inputstream, outputstream

在我的 PC 上，我启动了一个服务器以通过蓝牙将字节发送到 Android 手机。我使用相同的输出流每 10 秒发送一次不同的字节。

```
outputStream.write(buffer);
outputStream.flush();
thisThread.sleep(10000); 
```

缓冲区是一个字节数组，它改变每个循环

现在我想读取 Android 手机上的缓冲区：

```
while((bytes = inputStream.read(buffer)) != -1) {
  //do something
}
//do more 
```

我现在的问题是 read(buffer) 不返回-1。我如何通知 Android 手机字节已被传输，以便我可以在 while 循环后做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:13:49.497

您是否尝试过在 PC 端关闭连接？从您的示例看来，您没有。

[编辑] 如果您不想在 PC 端关闭连接，则发送已知字节序列，这将向 Andorid 应用程序指示 PC 端完成发送数据，即。正在等待回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:38:59.210

尝试这个...

```
while((bytes = inputStream.read(buffer)) > 0)
{
//
} 
```

# ios - 创建滚动视图

> ID：10215373
> 
> 赞同：0
> 
> 时间：2012-04-18T18:10:40.910
> 
> 标签：ios, objective-c, cocos2d-iphone, ccsprite, ccscrolllayer

这是我目前的情况：我创建了一个名为 StoreScene 的 CCScene。在那个场景中，我初始化了一个 CCLayer 并将其命名为 Store 层。

现在，我想要一个包含用户可以触摸的内容的可滚动层。为此，我创建了另一个名为 Store Container 的 CCLayer。我创建了该层的一个实例并将其作为子级添加到 StoreScene。

在 StoreContainer 中，我添加了多个精灵，每个精灵都有一个唯一的标签。滚动是在 StoreScene 中完成的，触摸将向上或向下移动整个 Storecontainer 层。

我在滚动层（存储容器）中添加了 4 个精灵 最初，精灵 1 位于 0,10 精灵 2 位于 0,20 精灵 3 位于 0,30 精灵 4 位于 0,40

显然，随着整个 storecontainer 层的移动，精灵的位置也会移动。但是，当我在 TouchesEnded 方法中执行此操作时： if (CGRectContainsPoint(sprite1.boundingBox, touchpoint)){ NSLog(@"TouchedSprite1"); } ...等每个精灵

每个精灵的触摸位置保持在同一个地方！！！在视觉上，精灵很好地上下移动。但是它们在接收触摸时的位置保持不变..这是有原因的吗？接近滚动层的任何其他方式？我已经看过 UIKit 的滚动视图，也看过 CCScrollLayer，但对我来说都不够好。我的方式可能更简单，但它没有按计划工作。提前致谢！^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:53:16.320

我猜你已经`touchesEnded`在你的`StoreContainer`. 在这种情况下，触摸的坐标将相对于该层，这解释了为什么它们的坐标系跟随屏幕周围的层。您可以`touchesEnded`改为在场景中实现，或者将`StoreContainer`实例放在一个新的、固定的层中，其目的只是处理触摸。

或者，您可以保留当前设置并使用您对[这个问题](https://stackoverflow.com/questions/10215869/getting-absolute-position-of-ccsprite-in-cocos2d)的回答来获取世界上的触摸坐标...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T01:04:33.900

查看[CCKit](https://github.com/jerrodputman/CCKit)，其中包含一个不错的[CCScrollLayer](https://github.com/jerrodputman/CCKit/blob/master/CCKit/CCScrollLayer.h)实现。

# web-config - validateRequest 和 requestValidationMode 不适用于 .net 2.0

> ID：10215378
> 
> 赞同：13
> 
> 时间：2012-04-18T18:10:56.463
> 
> 标签：web-config, asp.net-2.0, validate-request

我在 IIS 7 中托管 WCF 服务。它们在 .net 2.0 版下运行。一切正常。但最近，我收到错误列表“潜在危险请求......”。我在互联网上搜索，发现我必须像这样设置我的 web.config。

```
<system.web>
    <httpRuntime requestValidationMode="2.0" />
    <pages validateRequest="false" />
</system.web> 
```

我更新了我的 web.config，但后来我无法浏览到服务。它给了我这个错误。

解析器错误消息：无法识别的属性“requestValidationMode”。请注意，属性名称区分大小写。

请帮我解决这个错误。谢谢，维维克

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-09T04:08:12.657

requestValidationMode 属性是在 .NET 4.0 中引入的。

在 .NET 2.0 下，您应该只需要添加`<pages validateRequest="false" />`到您的 Web.config 以避免*潜在危险的请求*错误。

您还可以使用 关闭单个页面的请求验证`<%@ Page ValidateRequest="false" %>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-20T11:17:33.393

如果您`requestValidationMode="2.0"`在 web.config 中找到，很可能开发人员一直在针对框架 4.0 或更高版本，您可能应该将应用程序池设置为相应的版本，而不是更改设置。

# iphone - 用户如何使 iOS 5.1 UIKit UIDatePicker 组件在 AM/PM 中的返回时间与所选时间不同

> ID：10215379
> 
> 赞同：1
> 
> 时间：2012-04-18T18:11:01.353
> 
> 标签：iphone, ios, user-interface, uikit, uidatepicker

我使用iOS 5.1 库中的[UIDatePicker 组件](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/Art/datepicker_a.jpg)来选择日期时间值，该值位于从 self.datePicker.date 读取的按钮操作上，格式化并显示在 iPhone 模拟器的标签中。一切正常。

当我更用力地推动小时和/或分钟轮时，它需要几秒钟才能停止并选择新时间。如果小时转动轮穿过 AM/PM 边界，AM/PM 轮会自动更改其状态。还可以。

但是，当我在其他两个轮子停止之前更改 AM/PM 轮时，日期选择器不会反映更改，它会将相反的 AM/PM 时间返回到所选时间（前提是时轮没有意外启动另一个 AM/PM过渡到等于它刚刚选择的那个）。

您能否确认我没有弄错并建议如何确保此组件的安全性？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:15:08.300

我在新约会的 datetimepicker 中看到了相同的行为，因此这似乎是控制实现方式的一个怪癖。我不确定这是一个多大的问题，因为同时旋转多个轮子并不是 datetimepicker 的常见使用模式。

# php - mysql检索集合整数之间的最新条目

> ID：10215388
> 
> 赞同：0
> 
> 时间：2012-04-18T18:11:39.870
> 
> 标签：php, mysql

好的，标题可能无法证明我在这里尝试做的事情，但对我的问题了解得不够充分，无法完美地解释它。

我正在尝试做的事情：

我需要从响应 = 8 或 9 的 MySQL 数据库中检索行，但如果有多个匹配项则显示最新条目。假设我有 6 行，1 行有响应 = 8 和 2 行，其中响应 = 9 我想根据行 ID 检索最新条目。

例子：

row1 id=12 user_id = 15 响应 = 8

row2 id=11 user_id = 15 响应 = 9

row3 id=10 user_id = 15 响应 = 1

row4 id=09 user_id = 15 响应 = 9

第 5 行 id=08 user_id = 15 响应 = 4

row6 id=07 user_id = 15 响应 = 5

我想检索第 1 行，因为它是响应 = 8 或 9 的最新条目

我试过但失败了：

`SELECT a.id, MAX(a.response) FROM user a WHERE a.user_id = $userID AND a.response IN (8,9) GROUP BY a.user_id`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:13:51.270

```
SELECT a.id, MAX(a.response) -- Your columns
FROM user a -- Table
WHERE a.user_id = $userID -- your ESCAPED parameters (see mysql prepared stmts)
AND a.response IN (8,9)
GROUP BY a.response
ORDER BY a.id DESC -- the greater the ID, the 'newer'
LIMIT 1 -- just get one record 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:25:18.097

假设我已经理解了您的问题，并且您想要指定用户的最新行（即列中的最大值`id`）但仅在响应为 8 或 9 的情况下，请尝试

```
SELECT id 
FROM user 
WHERE user_id = $userID 
  AND response IN (8,9)
ORDER BY id DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:26:32.010

```
SELECT u.id, u.user_id, u.response
FROM user u
WHERE u.id in 
(
 SELECT max(id) FROM user WHERE user_id = $userID  and response IN (8,9)
) ;

ID  USER_ID RESPONSE
12  15  8 
```

# java - Java - 如果已经存在，如何连接到无线网络？

> ID：10215399
> 
> 赞同：2
> 
> 时间：2012-04-18T18:12:15.687
> 
> 标签：java, android

我正在使用下面的代码在 Android 手机上创建无线配置文件。出于某种原因，它每次都会创建一个新的配置文件，因此手机将为同一无线网络拥有多个配置文件。如果它已经存在，有没有办法让它不创建新的配置文件？

```
import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.util.Log;
import android.widget.TextView;

public class IVMOBILEActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);
    TextView tv = new TextView(this);       
    TextView status = new TextView(this);                  

    WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
    WifiConfiguration wc = new WifiConfiguration();  
    wc.SSID = "\"MyNetwork\""; //IMP! This should be in Quotes!! 

    wc.hiddenSSID = true; 
    wc.status = WifiConfiguration.Status.ENABLED;      
    wc.priority = 10; 
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK); 
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);  
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP); 
    wc.preSharedKey = "\"Password\""; 
    WifiManager  wifiManag = (WifiManager) this.getSystemService(WIFI_SERVICE); 
    boolean res1 = wifiManag.setWifiEnabled(true); 
    int res = wifi.addNetwork(wc); 
    Log.d("WifiPreference", "add Network returned " + res ); 
    boolean es = wifi.saveConfiguration(); 
    Log.d("WifiPreference", "saveConfiguration returned " + es ); 
    boolean b = wifi.enableNetwork(res, true);    
    Log.d("WifiPreference", "enableNetwork returned " + b );   

    tv.setText("You are now connected!  " +
            "Version 1.0");

    status.setText("The was an error connecting, please try again.");

    try {

        Thread.sleep(5000);

         ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

         if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  
                //You are connected, do something online. 
                setContentView(tv);

            }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
                //Not connected.         
               setContentView(status);
            }  

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:59:13.687

在将其添加到`WifiManager`. 伪代码例如：

```
//Check if this SSID is already stored. If it is, return that configuration.
//If not, return the configuration being tested.
public WifiConfiguration checkPreviousConfiguration(WifiConfiguration wc) {
    List<WifiConfiguration configs = wifi.getConfigurations();
    for(WifiConfiguration config : configs) {
        if(config.SSID.equals(wc.SSID)) return config;
    }
    return wc;
}

//......
int res = wifi.addNetwork(checkPreviousConfiguration(wc)); 
```

有道理？

编辑：显然，您可能想要检查除了 SSID 之外的其他因素（因为 SSID 不一定是唯一标识符），并在构建新`WifiConfiguration`实例之前检查这些因素，但这是我的想法将开始。

# android - 复选框和其他组件中的辅助文本？

> ID：10215402
> 
> 赞同：1
> 
> 时间：2012-04-18T18:12:38.280
> 
> 标签：android, user-interface

我正在寻找一种方法来在我的应用程序中的某些设置表单组件中提供额外的一两行文本（以比通常更小的字体）。这样的附加文本在 Android 设计指南的许多地方都被称为“辅助文本”（例如：http: [//developer.android.com/design/patterns/settings.html](http://developer.android.com/design/patterns/settings.html)）。但是，我找不到任何方法在组件中指定它，例如 TextView 或 Checkbox。

对不起，作为一个新用户，我不能在这里发布图片。这些示例可以在上面链接的设计指南中找到:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:43:08.420

“辅助文本”称为**摘要**。

所以在xml中你可以有

```
 <CheckBoxPreference
            android:key="@string/keep_screen_on_KEY"
            android:summary="@string/general_battery_warning_one"
            android:title="@string/keep_screen_on_title" /> 
```

在哪里

```
<string name="keep_screen_on_KEY">keep_screen_on_key</string>
<string name="general_battery_warning_one">Increases battery drain</string>
<string name="keep_screen_on_title">Keep display on</string> 
```

这将为您提供首选项中的复选框

![在此处输入图像描述](../Images/b71cd2e120be7911cf3530befa4657b1.png)

您可以使用 .setSummary(CharSequence summary) 方法在代码中更改此设置，该方法可用于 ListPreference 和 CheckBoxPreference。

# mysql - 不完全信任时出现 MySQL 连接器/网络错误

> ID：10215406
> 
> 赞同：0
> 
> 时间：2012-04-18T18:12:53.327
> 
> 标签：mysql, asp.net-mvc, entity-framework, mysql-connector

在托管服务提供商的服务器上运行我的 MVC asp.net (.net 4.0) 网站时出现以下错误： *尝试通过方法“MySql.Data.MySqlClient.MySqlClientFactory.System.IServiceProvider.GetService(System.Type)”访问字段'MySql.Data.MySqlClient.MySqlProviderServices.Instance' 失败。*

关于此应用程序应了解以下内容：

*   它使用实体框架。托管服务提供商在我的网站上放置了一个测试 .aspx 页面，该页面不使用可以连接到数据库的实体框架。
*   该网站在我的本地主机上运行，​​除非我使用他们的信任策略配置文件。在这种情况下，我会遇到同样的错误。
*   在他们进行一些更新之前它就起作用了，其中包括添加 SecurityClass MySqlClientPermission

我已经搜索了解决方案，但只找到了 mysql 连接器其他问题的答案。为了表明这些不是问题，我在此处包括了这些： 这包含在 web.config 中：

```
<DbProviderFactories>
<clear />
<add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" /> </DbProviderFactories> 
```

他们确实将其包含在信任配置中：

```
<SecurityClass Name="MySqlClientPermission" Description="MySql.Data.MySqlClient.MySqlClientPermission, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />

<IPermission class="MySqlClientPermission" version="1"> <add connectionString="Server=;Database=;User=;Password=;Port=;Pooling=;" restrictions="" KeyRestrictionBehavior="PreventUsage" />
</IPermission> 
```

也许有人可以为我指明正确的方向，因为在尝试了很多事情之后，我不知所措。

# android - Android SDK ICS flash 全屏 -> 崩溃

> ID：10215407
> 
> 赞同：3
> 
> 时间：2012-04-18T18:13:00.720
> 
> 标签：android

在我的应用程序中，我有一个嵌入了 Flash 播放器的 web 视图。该应用程序可在 Android 版本 < 4.0 的设备上完美运行。在具有 ICS 的设备上，当用户想要启动 flash 播放器时，应用程序会崩溃，因为它直接进入全屏模式。我用谷歌搜索了很多，并找到了解决此问题的解决方法： `mWebView.setWebChromeClient(new WebChromeClient(){ ... });`

现在启动播放器后，它不会再崩溃了，但是 webview 变得不可见。

所以我想问一下，有没有办法解决这个问题？

谢谢！

# javascript - 在画布中切换图像

> ID：10215408
> 
> 赞同：0
> 
> 时间：2012-04-18T18:13:00.853
> 
> 标签：javascript, html, canvas, toggle

这是为 Uni 做作业的开始。但是现在我很难在图像之间切换。这意味着开始转身比赛游戏。它假设是图像和文字并匹配它们，但到目前为止我对这个切换功能有问题。到目前为止我有这个代码：

```
 var myButton = new Image();
        var mouseX = 0;
        var mouseY = 0;
        var backgroundImage = new Image();
        var nothing = "num/w/2.png";
        var something = "num/w/3.png";

        function drawButton(buttonObj)
        {
            canvasContext.drawImage(buttonObj, buttonObj.x, buttonObj.y);
        }

        function checkIfInsideButtonCoordinates(buttonObj, mouseX, mouseY)
        {
            if(((mouseX > buttonObj.x) && (mouseX < (buttonObj.x + buttonObj.width))) && ((mouseY > buttonObj.y) && (mouseY < (buttonObj.y + buttonObj.height))))
                {return true;}
            else
                {return false;}
        }

        $(function() {
            var canvas = $("#canvas").get(0);
            canvasContext = canvas.getContext('2d');
            backgroundImage.src = "num/back.jpg";

            $(backgroundImage).load(function() {
                canvasContext.drawImage(backgroundImage, 0, 0);
                myButton.x = 100;
                myButton.y = 100;
                myButton.width = 100;
                myButton.height = 100;
                myButton.src = something;
                drawButton(myButton);
            });

            $("#canvas").click(function(eventObject) {
                mouseX = eventObject.pageX - this.offsetLeft;
                mouseY = eventObject.pageY - this.offsetTop;

                if(checkIfInsideButtonCoordinates(myButton, mouseX, mouseY))
                {
                    if(myButton.src = something)
                    {
                    myButton.src = nothing;
                    }

                    else if(myButton.src = nothing)
                    {
                    myButton.src = something;
                    }

                    drawButton(myButton);
                }
            });
}); 
```

知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:31:03.490

[jsfiddle](http://jsfiddle.net/ryanwfiorini/nbfaz/)

您需要在 if 语句中设置 ==。

```
if (myButton.src == something) {
            myButton.src = nothing;
        }

        else if (myButton.src == nothing) {
            myButton.src = something;
        } 
```

# javascript - 使用闭包强制同步 javascript

> ID：10215410
> 
> 赞同：0
> 
> 时间：2012-04-18T18:13:05.260
> 
> 标签：javascript

此代码挂起。

我有理由确定这是因为匿名函数中的响应是一个与外部范围无关的新变量。我该如何解决这个问题？

```
function foo() { //...

    var url = "http://urliciously-urlish-url"
    response = null;
    $.get(url, function (data) {response = data;
                               });

    while( response === null)
    {
        1;
    }
    console.log(response);

    //...
} 
```

*注意*我知道这种设计将（像通常的轮询系统一样）挂起页面，直到响应变为非空。在这种情况下没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:18:39.423

`$.get`是异步的。如果您*真的*希望这是同步的，则必须使用该`$.ajax`功能：

```
$.ajax({
    url: url,
    async: false,
    success: function(data) {
        response = data;
    }
}); 
```

话虽如此，我同意 cHao 的观点——你应该习惯于编写异步代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:17:19.493

当您的代码正在运行时，事件处理程序不会。

翻译：此代码不起作用。

如果你想使用 JS，你几乎肯定要习惯于编写异步代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:18:04.743

不，问题是回调永远不会被执行，因为 JS 线程仍在运行。它将等待当前上下文结束，然后继续执行“下一个滴答声”（此处的回调）。在滴答声之间，它还可以更新 DOM 并处理其他事情。

[使用同步 ajax 请求](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest#Synchronous_request)而不是使用悬挂循环（是的，这是可能的）。在 jQuery 中：[`{async:false}`](http://api.jquery.com/jQuery.ajax/). 但是，它将“仅”挂起，直到请求结束——这可能永远不会发生。不负责任的 GUI 是最糟糕的事情，所以不要使用它。

# javascript - Javascript 功能在 localhost 上工作，但在部署到 Heroku 时不工作

> ID：10215416
> 
> 赞同：20
> 
> 时间：2012-04-18T18:13:29.817
> 
> 标签：javascript, heroku, twitter-bootstrap, popover

我注意到，当我部署到 Heroku 时，javascript 功能不起作用（例如 Bootstrap Popover、Buttons 等）。我正在使用 rails 3.2.2，ruby 1.9.3。这些功能在本地主机上工作。部署到 Heroku 时似乎没有显示任何错误（这些功能根本不显示）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T20:54:02.980

手动预编译对我有用。

`bundle exec rake assets:precompile`在你推到heroku之前。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T19:25:28.510

我有完全相同的问题（我对 Rails 很陌生）。我最终通过重新排列 application.js 中文件的顺序解决了这个问题：

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap 
```

为了使 javascript 在开发中工作，“require jquery”需要在“require twitter/bootstrap”之后。在生产中，jquery 需要放在第一位。不确定是什么原因造成的，但现在部署到 Heroku 时它可以工作。

我用了这两个帖子：

[javascript - 未为生产编译的 Twitter 引导 jquery 插件](https://stackoverflow.com/questions/10241976/javascript-twitter-bootstrap-jquery-plugins-not-compiled-for-production)

[twitter bootstrap下拉突然不起作用](https://stackoverflow.com/questions/10218587/twitter-bootstrap-drop-down-suddenly-not-working)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-03T05:07:51.850

检查您的 production.rb 文件。我相信这条线需要是：

```
config.assets.compile = true 
```

我相信这默认设置为 false 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-16T18:32:26.903

请记住，您通常在 localhost 上执行的所有操作都必须使用 heroku。确保你`heroku run rake assets:precompile`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T21:22:32.860

我也有类似的问题，但问题也发生在本地主机上。

您可能正在使用 rails-bootstrap gem。它安装了一个文件 bootstrap.coffee.js 这个文件是罪魁祸首。它使用了 .popover 并且不包括相关插件。我对此进行了评论，因为无论如何我都没有使用它，但是您应该考虑包括用于引导的 popover 插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-09T02:39:20.157

检查了我的应用程序的缩小 js，并且 popover 在文件中出现了两次。

确保在您的 javascript 资产中仅声明`bootstrap`和之一`boostrap-sprockets`

从文档：

> bootstrap-sprockets 和 bootstrap 不应同时包含在 application.js 中。
> 
> bootstrap-sprockets 提供单独的 Bootstrap Javascript 文件（例如，alert.js 或 dropdown.js），而 bootstrap 提供包含所有 Bootstrap Javascript 的串联文件。
> 
> 确保只有自举链轮和自举链轮之一

参考：[bootstrap-sass github 问题](https://github.com/twbs/bootstrap-sass/issues/829#issuecomment-75153827)和 [此处](https://github.com/twbs/bootstrap-sass#a-ruby-on-rails)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-24T04:47:57.727

更新链轮对我有用：`bundle update sprockets`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-09-15T22:21:36.920

如果您已经尝试过`heroku run rake assets:precompile`，但 JS 仍然无法正常工作，请尝试`heroku restart`在预编译资产后重新启动服务器。

# database - Sqlite 连接可以附加多少个数据库？

> ID：10215419
> 
> 赞同：1
> 
> 时间：2012-04-18T18:13:57.943
> 
> 标签：database, sqlite

我正在重构 .NET 中的 Sqlite Helper 类，以便它支持附加数据库，并且想知道可以将多少个数据库附加到连接？

在[http://sqlite.org](http://sqlite.org)它说限制是 SQLITE_LIMIT_ATTACHED 但我找不到它的默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:19:32.907

根据[SQLite 的限制](http://www.sqlite.org/limits.html)，默认数量为**10**。

# jsf-2 - java.lang.ClassNotFoundException: org.ajax4jsf.component.html.HtmlAjaxSupport

> ID：10215422
> 
> 赞同：-1
> 
> 时间：2012-04-18T18:14:16.523
> 
> 标签：jsf-2, richfaces, jboss7.x

我们正在从 Richfaces 3.3 迁移到 Richfaces 4.2 并出现以下错误。我们的页面有很多 a4j 标签，无法安静地获取导致此问题的标签。任何输入将不胜感激

```
14:13:35,367 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/appContext].[Faces Servlet]] (http--127.0.0.1-8080-2) Servlet.service() for servlet Faces Servlet threw exception: java.lang.ClassNotFoundException: org.ajax4jsf.component.html.HtmlAjaxSupport from [Module "deployment.app.ear.appContext.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) [rt.jar:1.6.0_16]
    at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.6.0_16]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [rt.jar:1.6.0_16]
    at java.lang.Class.getDeclaredMethods(Class.java:1791) [rt.jar:1.6.0_16]
    at com.sun.faces.mgbean.BeanBuilder.scanForAnnotations(BeanBuilder.java:489) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanBuilder.loadBeanClass(BeanBuilder.java:453) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanBuilder.bake(BeanBuilder.java:383) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.ManagedBeanBuilder.bake(ManagedBeanBuilder.java:90) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanManager.preProcessBean(BeanManager.java:353) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:262) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72) [jbossweb-7.0.10.Final.jar:]
    at org.apache.el.parser.AstValue.getValue(AstValue.java:147) [jbossweb-7.0.10.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.10.Final.jar:]
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.renderkit.html.AjaxOutputPanelRenderer.encodeChildren(AjaxOutputPanelRenderer.java:57) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.renderkit.html.AjaxOutputPanelRenderer.encodeChildren(AjaxOutputPanelRenderer.java:57) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.renderkit.html.AjaxOutputPanelRenderer.encodeChildren(AjaxOutputPanelRenderer.java:57) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.renderkit.html.AjaxOutputPanelRenderer.encodeChildren(AjaxOutputPanelRenderer.java:57) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.renderkit.html.AjaxOutputPanelRenderer.encodeChildren(AjaxOutputPanelRenderer.java:57) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_16] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:24:00.757

已`<a4j:support>`替换为`<a4j:ajax>`。相应地更新所有代码。堆栈跟踪表明其中一个支持 bean 具有`HtmlAjaxSupport`属性。您需要将其删除。

阅读[RichFaces 3.3.x 到 4.x 迁移指南](http://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration)，了解在将现有 RichFaces 3.3.x webapp 迁移到 RichFaces 4.x 时需要对其进行的所有必要更改。这真的不仅仅是更换 JAR 的问题。

# java - 关闭便利班的连接

> ID：10215423
> 
> 赞同：0
> 
> 时间：2012-04-18T18:14:33.170
> 
> 标签：java, jdbc

我当前的设计模式在单个便利类中包含大量数据库访问方法。当它被实例化时，它会抓取它需要的连接并等待方法。

我的想法是，当我要使用该连接运行 10 个方法时打开单个连接会比为 10 个单独的方法中的每一个打开和关闭该连接要好。

但是，我意识到我没有关闭任何这些连接。我得出的结论是，我必须返回并重构对该方法的所有调用，以包含一个`closeConnections`释放所有活动连接的方法。

我的问题是：我应该在每个方法中打开和关闭连接，遵循良好的设计实践（这会产生很大的开销），还是应该通过调用方法重构对便利类的`closeConnections`调用

伪代码

```
class convenience{
    public contructor(){
        a = new Connection();
    }

    public void methodA(){
        /* do stuff */
    }
    public void methodB(){
        /* do stuff */
    }
    public void methodC(){
        /* do stuff */
        //should I do this?
        a = new Connection();
        /* do stuff */
        a.close();
    }
    public void close(){
        //or this
        a.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:18:41.487

也许您不应该在这个便利类中保留连接，而是在每次方法调用时将其传递。这样，您将能够控制连接的生命周期，并且 - 例如 - 以有用的方式使用事务。

将此连接保留在此便利类中也会增加与多个线程共享连接的风险，这通常是不可取的。

通过使用像 c3p0、DBCP、BoneCP（和其他）这样的连接池，可以减轻/消除打开和关闭连接的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:24:06.020

我建议无论何时打开连接，都应该将其注册到服务中。然后，您可以稍后与服务检查特定连接是否已打开或已关闭，以处理应用程序中的泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:28:18.543

> 遵循良好的设计实践

如果你想要，那么不要重新发明轮子。使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。

# openlayers - 如何将标题设置为 openlayers 标记？

> ID：10215424
> 
> 赞同：1
> 
> 时间：2012-04-18T18:14:37.527
> 
> 标签：openlayers

我想将标题设置为 OpenLayers Marker。但我没有找到任何东西。

在谷歌地图中我可以很容易地做到这一点

```
 var marker= new google.maps.Marker({
            position: pos,
            title: userType,
            clickable: true,
            map: map
        }); 
```

但是在 OpenLayers 标记中

```
var marker = new OpenLayers.Marker(pos, new OpenLayers.Icon('images/'+color+'.png',size,offset), userType); 
```

但是当我访问`marker.markerText is giving undefined`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:02:43.467

你可以这样做[http://doesterr.github.com/OpenLayers-Examples/examples/marker-with-title.html](http://doesterr.github.com/OpenLayers-Examples/examples/marker-with-title.html)

# javascript - 使用 Facebook Graph API 和 JavaScript 上传照片：将画布图像转换为多部分/表单数据作为 POST 正文？

> ID：10215425
> 
> 赞同：2
> 
> 时间：2012-04-18T18:14:37.733
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, cordova

从这个关于该主题的[SO question](https://stackoverflow.com/questions/4999024/facebook-graph-api-upload-photo-using-javascript)和我们在网络上其他地方的研究（如这个 Facebook[文档链接](http://developers.facebook.com/blog/post/498/)），似乎可以将图像从 canvas.toDataURL() 直接上传到 Facebook——无需在服务器上托管图像。

我们面临的问题是如何将 base64 编码的数据从 toDataURL() 转换为 Facebook 期望的 multipart/form-data。这在客户端使用 JavaScript 和[jQuery.post()](http://api.jquery.com/jQuery.post/)是否可行？如果没有，我们可以先将图像保存在服务器上，但如果可能的话，我们更愿意绕过这一步，从客户端做所有事情。

这是针对 PhoneGap 应用程序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:20:14.930

可以将画布作为图片上传到服务器上。我2年前做过一个测试，你可以查一下代码：[http ://standupweb.net/canvas/swSaveCanvas.php](http://standupweb.net/canvas/swSaveCanvas.php)

那是使用mootools，但那里真的不需要，保存功能中的所有内容都是本机JS代码。

将其与 facebook 集成应该不是一个大问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:36:43.283

基本上，您需要从[URI 方案](http://en.wikipedia.org/wiki/URI_scheme)中删除 'data:image/png;base64' （例如使用 canvas.toDataURL("image/png") ）并将其解码为图像源的原始形式。

这是我的代码。我需要使用 dojo.toJson 因为 facebook 发生了一个奇怪的错误。

```
jQuery.post('index.php',{ 
    data : dojo.toJson({
    image_data: img,
    signed_request: signedRequest
 })
},function(d){

}); 
```

这是PHP

```
$data = json_decode($_POST['data']);        
$message = $data->message;
$uploadImage = $data->image_data;
$uploadImage = str_replace('data:image/png;base64,', '', $uploadImage);
$uploadImage = base64_decode($uploadImage);

$name = uniqid('image_') . '.png';
file_put_contents('public/images/users/' . $name, $uploadImage);

$image = array(
    'message' => $message,
    'src' => '@' . realpath('public/images/users/' . $name),
);
$result = $this->_facebook->uploadPhoto($image); 
```

# c# - 为什么 ToLookup 和 GroupBy 不同？

> ID：10215428
> 
> 赞同：128
> 
> 时间：2012-04-18T18:14:46.537
> 
> 标签：c#, linq

`.ToLookup<TSource, TKey>`返回一个`ILookup<TKey, TSource>`. `ILookup<TKey, TSource>`还实现了接口`IEnumerable<IGrouping<TKey, TSource>>`。

`.GroupBy<TSource, TKey>`返回一个`IEnumerable<IGrouping<Tkey, TSource>>`.

ILookup 具有方便的索引器属性，因此它可以以类似字典（或类似查找）的方式使用，而 GroupBy 不能。没有索引器的 GroupBy 使用起来很痛苦；几乎唯一可以引用返回对象的方法是循环遍历它（或使用另一种 LINQ 扩展方法）。换句话说，任何 GroupBy 工作的情况，ToLookup 也能工作。

所有这一切都给我留下了一个问题，我为什么要打扰 GroupBy？为什么它应该存在？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-04-18T18:22:03.640

> 我为什么要打扰 GroupBy？为什么它应该存在？

当您对一个表示包含十亿行的远程数据库表的对象调用 ToLookup 时会发生什么？

十亿行通过网络发送，您在本地构建查找表。

当您在这样的对象上调用 GroupBy 时会发生什么？

构建了一个查询对象；故事结局。

当枚举该查询对象时，然后在*数据库服务器上完成对表的分析，并且一次根据**需要*将分组结果发送回几个。

从逻辑上讲，它们是相同的，但每个的*性能影响*是完全不同的。调用 ToLookup 意味着*我想要现在按 group 组织的整个事物的缓存*。调用 GroupBy 的意思是“我正在构建一个对象来表示‘如果我按组组织这些东西会是什么样子？’”

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-08-15T12:46:47.037

用简单的 LINQ 世界的话来说：

*   `ToLookup()`- 立即执行
*   `GroupBy()`- 延期执行

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-18T18:24:26.830

两者相似，但用于不同的场景。`.ToLookup()`返回一个准备好使用的对象，该对象已经急切地加载了所有组（但不是组的内容）。另一方面，`.GroupBy()`返回延迟加载的组序列。

不同的 LINQ 提供程序对于组的急切和延迟加载可能有不同的行为。使用 LINQ-to-Object 可能没什么区别，但是使用 LINQ-to-SQL（或 LINQ-to-EF 等），分组操作是在数据库服务器而不是客户端上执行的，因此您可能想要对组键（生成一个`HAVING`子句）进行额外的过滤，然后只获取一些组而不是所有组。`.ToLookup()`不允许这样的语义，因为所有项目都急切地分组。

# ruby-on-rails - HAML 链接不起作用

> ID：10215429
> 
> 赞同：0
> 
> 时间：2012-04-18T18:14:50.923
> 
> 标签：ruby-on-rails, ruby, routing

我做了这个 HAML 链接：

```
= link_to "Create Profile", signup_path 
```

我在想它应该可以工作，因为这个网址有效：

```
http://m.cmply.local:8800/signup 
```

但是我得到了这个错误：

```
undefined local variable or method `signup_path' for #<#<Class:0x129a08190>:0x129a027e0> 
```

这是我的 routes.rb 片段

```
 scope :module => :mobile, :as => :mobile do
    constraints(:subdomain => /m/) do
      devise_for :users, :path => "", :path_names =>
               { :sign_in => "login", :sign_out => "logout",
                 :sign_up => "signup" },
                 :controllers => {:sessions => "mobile/sessions"}

      resources :home

      resources :disclosures # Will have new, get, look up a disclosure

    end
  end 
```

这是耙路线片段

```
{:action=>"create", :controller=>"registrations"}
 new_user_registration GET    /signup(.:format) 
```

知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:20:28.773

发生这种情况是因为 rails 不知道“signup_path”是什么。我建议您跑步`bundle exec rake routes`并*确保*它`signup_path`实际上在这些路线中。我可以通过查看您的`routes.rb`文件来判断您不会拥有该`signup_path`路线。

您正在寻找的路线将更像`users_signup_path`，因为设计喜欢将其路线包装在这样的名称空间中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:46:07.310

更改`signup_path`为`new_user_registration_path`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:29:44.610

尝试放置 app_main.signup_path。似乎在不同的引擎上被调用。我以前遇到过这个问题。

并按照他人的指示，例如检查您的路线。

# ios - NSMutableDictionary 中 NSMutableArray 中的 Dynamica 字符串计数

> ID：10215432
> 
> 赞同：0
> 
> 时间：2012-04-18T18:15:14.573
> 
> 标签：ios, nsmutabledictionary, nsmutablestring

我熟悉从已知数组中获取字符串计数

```
 int numberOfWords = [self.wordArray count]; 
```

但我在未知数量的数组中有未知数量的字符串，全部由字典引用。这行得通 - 很好。

```
 NSMutableDictionary *eqClasses = [[NSMutableDictionary alloc] init]; 
```

数组和字符串在运行时添加（在此板的帮助下）：

```
 NSMutableArray* array = [eqClasses objectForKey:wordPattern];
            if(!array) {
                // create new array and add to dictionary if wordPattern not found
                array = [NSMutableArray array];
                [eqClasses setObject:array forKey:wordPattern];
            }
            [array addObject:tempWordStr]; 
```

现在我需要遍历字典并获取具有最大字数的数组。有没有办法在不使用键的情况下滚动字典中的所有数组（我不会知道所有的单词模式，因为它们是动态生成的），并且一旦我找到单词最多的数组，就得到那个数组/值和关键字/文字模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:10:27.417

试试这个代码：

```
NSArray *largestArray = nil;

for (NSString *key in dictionary)
{
    NSArray *array = [dictionary objectForKey:key];
    if (array.count > largestArray.count) // largestArray.count is 0 if largestArray is nil
    {
        largestArray = array;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:54:55.177

^_^ 好的，现在你有了一个包含字典中所有键的数组，你可以遍历整个数组并为每个键获取相应的值（字符串）。

```
NSArray *keyArray = [myDict allKeys]; //This gets all the keys
NSString *tempString = @""; //This is the string you will save the longest string in. It gets updated when a longer string is found in the following loop.

for (NSString *string in keyArray){
    NSString *stringFromCurrentKey = [myDict objectForKey:string];
    if(stringFromCurrentKey.length > tempString.length){
        tempString = stringFromCurrentKey;
    }
} //By the end, you should be left with the longest string contained in tempString! 
```

^_^ 希望这有意义并有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:23:52.493

好吧，有一种方法可以获取字典中的所有键：

```
NSArray *keyArray = [myDict allKeys]; 
```

然后您只需遍历数组并获取每个键的对象。快速枚举应该可以很好地工作。

```
for (NSString *string in NSArray){
    ...
} //Assuming your keys are strings! 
```

您可以将每个字符串保存到一个临时字符串中，当遇到新字符串时，比较查找较长的字符串。如果它更长，请将旧字符串替换为更长的字符串。

希望这有帮助！^_^

# java - 删除对象后更新arraylist

> ID：10215437
> 
> 赞同：0
> 
> 时间：2012-04-18T18:15:37.443
> 
> 标签：java, arrays

我有一个 Java 程序，它使用数组列表存储板球俱乐部球员的列表。在俱乐部类中，我有一个静态字段，用于跟踪俱乐部中注册的球员数量。我还为静态字段分配了一个玩家 ID，这样每次添加玩家时，他都会获得一个 ID。这是如何

```
id = regPlayer++; 
```

regPlayer为静态字段，初始化为1

我遇到的问题是，如果我想从数组列表中删除一个播放器，我似乎无法更新 ID。例如，如果我有四个玩家，在我移除其中任何一个玩家之前，他们将拥有以下 ID：

```
Player 1 ID = 1
Player 2 ID = 2
Player 3 ID = 3
Player 4 ID = 4 
```

如果我删除玩家 2，我现在希望第三个玩家的 ID 为 2，第四个玩家的 ID 为 3，如下所示：

```
Player 1 = 1
Player 3 = 2
Player 4 = 3 
```

有没有办法用 arraylists 实现这一点以及如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:26:52.823

ID 通常应该是不可变的。您不应该移动 ID，仅仅因为您想让 ID 加倍作为列表中的索引。所以*不要*更新ID。这与尝试更新某人的社会安全号码差不多……坏主意。

我只能猜测您希望 ID 反映索引位置，以便您可以以某种方式快速知道给定 Object 占据的位置。如果是这种情况，只需使用:`List.indexOf(Object)`来查找位置，而不是指望 ID*也*代表位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:20:19.437

您需要根据数组列表的索引分配 ID。当您删除元素并重新组织索引时，可以重新分配它。

# c++ - 二叉搜索树插入 C++

> ID：10215440
> 
> 赞同：3
> 
> 时间：2012-04-18T18:15:40.627
> 
> 标签：c++, algorithm, binary-search-tree

也许之前被问过数百万次，但我根本无法理解这有什么问题。我不想在互联网上使用任何代码，所以我只是尝试对我的想法进行编程。这个或我的打印功能是错误的。下面的代码有什么问题吗？

```
void addNode(int value)
    {
        Node* newNode=new Node;
        newNode->data=value;
        if(root==NULL)
            root=newNode;
        else {
            Node* temp=root,*parent;
            while(temp!=NULL)
            {
                parent=temp;
                if(temp->data == value)
                    return;
                else if(temp->data < value)
                    temp=temp->left;
                else 
                    temp=temp->right;
            }
            temp=newNode;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:23:17.547

```
temp=newNode; 
```

这会将指针分配给局部变量，该变量在函数返回时被丢弃，从而丢失新节点。相反，您希望将其分配给树中的指针；也许是这样的：

```
if (temp->data < value) {        // If the new node should be to the left
    if (temp->left) {            //   If there is a left subtree
        temp = temp->left;       //      Move into the left subtree
    } else {                     //   Otherwise
        temp->left = newNode;    //      Insert the new node there
        return;                  //      Done.
    }
} 
```

同样对于`temp->right`if `value < temp->data`。

还：

```
if (temp->data == value) 
    return; 
```

你那里有内存泄漏；你应该`delete newNode`在返回之前。

# c# - 无法从另一个类调用方法

> ID：10215443
> 
> 赞同：1
> 
> 时间：2012-04-18T18:15:54.213
> 
> 标签：c#, datetime, methods, argument-passing

我有一个程序，用户在其中输入用户名和日期，然后单击将数据输入数据库的按钮。

我遇到的问题是我似乎无法将文本框日期数据作为方法中的参数传递给我的 BOL 类。我收到以下错误：“无法使用实例引用访问成员 'P90XPRogramt.ProgramLoginBOL.TestParsing(string)'；改为使用类型名称对其进行限定”

这是我的 UI 层的代码：

```
public partial class ProgramLoginForm : Form
{
    private ProgramLoginBOL busObject =
        new ProgramLoginBOL();       

    //default constructor
    public ProgramLoginForm(string dayNo)
    {
        InitializeComponent();
        busObject.InitializeConnection();
    } 

    private void btnBeginProgram_Click(object sender, EventArgs e)
    {
        busObject.UserName = txtEnterName.Text;            

        busObject.TestParsing(txtStartDate.Text);            

    }

    //event handler to close program
    private void btnExitProgram_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }        
} 
```

这是我的 BOL 类的代码：

```
class ProgramLoginBOL
{
    //declare variables
    string userName = "";

    //instantiate a connecttion object to Access database
    OleDbConnection aConnection =
        new OleDbConnection(
            "Provider=Microsoft.ACE.OLEDB.12.0;" +
            "Data Source=P90XDatabase.accdb;");

    public ProgramLoginBOL()
    {
    }

    //property for userName variable
    public string UserName
    {
        get { return userName; }
        set { userName = value; }
    }

    public static DateTime TestParsing(string datetext)
    {
        DateTime dt;

        if (DateTime.TryParseExact(datetext, "d", null, 0, out dt))
        {
            Console.WriteLine("Parsed to {0}", dt);
        }
        else
        {
            Console.WriteLine("Bad date");
        }
        return dt;
    }

    public void InitializeConnection()
    {
        ProgramLoginDAL.InitializeConnection(aConnection);
    }
} 
```

我不确定它告诉我要做什么。按类型名称，我假设它们的意思是数据类型，所以我尝试了以下方法：

```
string busObject.TestParsing(txtStartDate.Text);

string.busObject.TestParsing(txtStartDate.Text);

string.TestParsing(txtStartDate.Text);

busObject.TestParsing(string txtStartDate.Text); 
```

这些都没有奏效。我也尝试使用 DateTime 而不是字符串。正如我所说，我不知道它要我做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:19:04.477

您尝试调用的方法是`static`-method 而不是实例方法。

应该在`class` `ProgramLoginBOL`而不是在具体实例上调用 TestParsing 方法，如下所示：

```
ProgramLoginBOL.TestParsing(txtStartDate.Text); 
```

当不需要实例的特定属性时使用静态方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:19:06.730

它希望你改变：

```
busObject.TestParsing(txtStartDate.Text); 
```

到：

```
ProgramLoginBOL.TestParsing(txtStartDate.Text); 
```

由于`TestParsing`是`ProgramLoginBOL`类的静态方法，并且不与特定实例相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:18:55.103

正如错误消息所说，不能用类的实例调用静态方法。

```
P90XPRogramt.ProgramLoginBOL.TestParsing(txtStartDate.Text); 
```

对于未来的错误，请先尝试搜索错误代码 - 通常 MSDN 文章包含解释和示例，如本例中的[CS0176](http://msdn.microsoft.com/en-us/library/zhcxt2bd%28v=vs.90%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T18:21:13.843

您的方法是静态的，您不能使用该类的实例来调用它。做这个

```
ProgramLoginBOL.TestParsing("text to pass"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T18:23:37.423

您可以使用类名而不是类对象调用静态方法，因此请尝试

```
ProgramLoginBOL.TestParsing(txtStartDate.Text); 
```

# jquery - jquery mobile 方法列表

> ID：10215445
> 
> 赞同：-1
> 
> 时间：2012-04-18T18:16:09.423
> 
> 标签：jquery, jquery-mobile

我正在寻找 jQM 的可用方法列表。当我尝试创建移动网站或原生应用程序时，我需要知道我可以使用什么。例如jQM框架中包含的.ajax方法或.load方法（只是一个例子不是我的问题）

我的总体目标是了解我的能力，以便我可以决定是使用 jQuery 还是 jQM。

谢谢，米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:19:14.030

以与 JqueryUI 相同的方式考虑 Jquery Mobile，您仍然拥有所有 .ajax 以及常规 Jquery 中没有的内容，但是您通过 JqueryMobile 引入了更多功能和 UI 相关的东西

看

[http://jquerymobile.com/demos/1.1.0/](http://jquerymobile.com/demos/1.1.0/)

# php - 更新后PHP语法检查不正确

> ID：10215448
> 
> 赞同：1
> 
> 时间：2012-04-18T18:16:19.253
> 
> 标签：php, syntax, aptana3

在 Ubuntu 10.04 64 位上运行 Aptana Studio 3，构建：3.1.1.201204131931。

我今天早上刚刚安装了最新的更新，现在注意到 PHP 文件的语法检查不再正常工作。

这是一个显示语法错误的屏幕截图，但脚本实际上执行没有问题。这在更新之前没有发生。 ![在此处输入图像描述](../Images/1ffc696a4634b6b6a8a711de4ea23e4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:18:03.400

重新启动 Aptana Studio 应用程序似乎已解决该问题。

# ruby - 从服务器发送请求和响应 - 需要 RUBY 中此 WSDL 文件的工作代码

> ID：10215451
> 
> 赞同：1
> 
> 时间：2012-04-18T18:16:31.793
> 
> 标签：ruby, rhomobile, rhodes

请帮助我，我需要我的 WSDL 文件的代码，用于使用 RUBY 语言参数的以下 wsdl 文件 url 可以作为 pcEmployeecode 传递...

参数可以作为 STRING 传递，即 pcEmployeeCode="02385"

网址="http://online.mccolls.com.au:8080/wsa/wsa1/wsdl?targetURI=urn:OHWebServiceFMGT"

请参考此 WSDL 文件，如果您已成功获得响应结果，请发帖给我...

有任何想法吗....

我是这样用的，还是报错。

```
require 'rubygems'
#require 'soap4r'
require 'http-access2'
require 'soap/rpc/driver'
require 'soap/rpc/driver'
require 'net/http'
Net::HTTP.version_1_2
url =
"http://online.mccolls.com.au:8080/wsa/wsa1/wsdl?targetURI=urn:OHWebServiceFMGT"
soap = SOAP::RPC::Driver.new(url,"urn:OHWebServiceFMGT")
soap.wiredump_dev = STDERR
soap.options["protocol.http.ssl_config.verify_mode"] =
OpenSSL::SSL::VERIFY_NONE
soap.add_method('getEmployeeFmgtDetails','pcEmployeeCode')
puts soap.getEmployeeFmgtDetails('02385') 
```

# javascript - 点击交换类

> ID：10215452
> 
> 赞同：0
> 
> 时间：2012-04-18T18:16:32.340
> 
> 标签：javascript, jquery, class, onclick, swap

我一直在试图弄清楚当你点击它时我应该如何改变一个元素的类。

目前我有两个课程（cOpen 和 cClosed）。当您打开页面时，div 设置为“cClosed”。

```
<div id="camera" class="cClosed" onClick="cameraToggle('weekLoaderWrapper', 'cameraContainer');">Kamera</div></a> 
```

onClick 中的内容与我的问题无关。

我也把这个脚本放在代码中

```
$('#camera').click(function() {
    $(this).toggleClass('cOpen');
    $(this).toggleClass('cClosed');
}); 
```

我想要它做的是当你按下“相机”-div 时，类只是切换到 cClosed 而不是 cOpen，当你再次单击它时反之亦然。这不工作atm。

我的问题是我应该如何“切换” div，以便它交换“相机”-div 的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:25:06.200

你为什么使用两个类？使用一个类来标识打开，使用无表示关闭。

```
$('#camera').click(function() {
    $(this).toggleClass('cOpen');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:26:22.210

它很简单：

```
$('div').click(
    function(){
        $(this).toggleClass('cClosed cOpen');
    });​​​​​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kcB32/1/)。

虽然我[同意 Starx](https://stackoverflow.com/a/10215572/82548)在这方面的建议；但这是你的 HTML。

参考：

*   [`toggleClass()`](http://api.jquery.com/toggleClass/).

# c# - 调用 Func 作为参数传递给使用 Moq 和 C# 的模拟

> ID：10215454
> 
> 赞同：9
> 
> 时间：2012-04-18T18:16:38.767
> 
> 标签：c#, .net, moq, capture, xunit

我有一个看起来像这样的模拟方法：

```
 class NotMineClass {
  T Execute(Func operation) 
  {
    // do something
    return operation();
  }
} 
```

在我的代码中，我这样做：

```
 public MyType MyMethod()
{
  MyType object = new MyType();
  bool success = notMineClassInstance.Execute(() =>
  {
    // some things
    retVal = injectedObject1.method();
    object.attribute = injectedObject2.method();
    // some other things
    return retVal;
  }
  if (success) 
  {
    object.otherAttribute = someValue;
  }
  return object;
} 
```

我的情况是，我正在使用 Moq 测试 MyMethod，并且我想验证 Func 行为是否符合预期。我在它的主体中有一些注入的对象，它们是模拟的，应该被验证；它也开始构建我的返回值，所以我不能做任何断言，除非我调用作为参数传递的函数。

在 Java 和 jUnit + EasyMock 中，我会捕获传递的参数，如下所示：

```
 public void testMyMethod() {
  // ...
  Capture < Function < void, Boolean > > functionCapture = Captures.last();
  expect(notMineClassInstance.execute(EasyMock.capture(functionCapture)));
  // Expectations for the body of the function

  replay();

  functionCapture.getValue().apply(null);
} 
```

如何使用 C# + Moq 做同样的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T19:37:26.517

`Returns`您可以在提供方法时捕获调用参数：

```
Mock<NotMineClassInstance> mock = new Mock<NotMineClassInstance>();
mock.Setup(x => x.Execute<bool>(It.IsAny<Func<bool>>()))
    .Returns((Func<bool> captured) => { captured(); return true; }); 
```

这是您的代码的完整测试：

```
[Test]
public void TestingSomething()
{
    // Arrange
    Mock<NotMineClassInstance> mockNotMine = new Mock<NotMineClassInstance>();
    mockDep.Setup(x => x.Execute<bool>(It.IsAny<Func<bool>>())).Returns((Func<bool> func) => func());

    Mock<Injected1> mockInjected1 = new Mock<Injected1>();
    mockInjected1.Setup(i => i.Method()).Returns(true);

    Mock<Injected2> mockInjected2 = new Mock<Injected2>();
    mockInjected2.Setup(i => i.Method()).Returns("xxx");

    YourClass yourObject = new YourClass(mockDep.Object, mockInjected1.Object, mockInjected2.Object);

    // Act
    MyType my = yourObject.MyMethod();    

    // Assert
    mockNotMine.Verify(d => d.Execute<bool>(It.IsAny<Func<bool>>()));
    mockInjected1.Verify(i => i.Method());
    mockInjected2.Verify(i => i.Method());

    Assert.That(my.Attribute, Is.EqualTo("xxx"));
    Assert.That(my.OtherAttribute, Is.EqualTo(someValue));            
} 
```

当 mockInjected1.Method 返回 false 时，您还需要测试案例。

# sql - 需要帮助/工具来比较 SQL 查询

> ID：10215457
> 
> 赞同：1
> 
> 时间：2012-04-18T18:17:04.593
> 
> 标签：sql, performance, text, compare

我有这个超过 400 万行的评论表：

```
CREATE TABLE `comments` 
(
     `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
     `gid` int(11) unsigned NOT NULL DEFAULT '0',
     `userid` int(6) unsigned DEFAULT NULL,
     `date` int(11) unsigned DEFAULT NULL,
     `comment` text NOT NULL,
     `status` enum('on','alert') NOT NULL DEFAULT 'on',
     PRIMARY KEY (`id`),
     KEY `gid_2` (`gid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

现在我正在考虑提取文本字段以减少 400 MB 并提高性能。像这样：

```
CREATE TABLE commentstext 
(
    id int(11) unsigned NOT NULL AUTO_INCREMENT,
    `comment` text NOT NULL,
    PRIMARY KEY (id)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

但我不确定这是否会以这种方式表现更好。我需要通过使用不同的查询（也）来测试这种情况。到目前为止，我的结果差异很大。在 0.001* - 3.321 秒之间。我无法通过在 phpmyadmin 中查询来检查这一点。

有没有更好更简单的方法或工具来比较查询性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:38:31.650

这就是我一直在寻找的：

```
SELECT BENCHMARK(1000000000, (
SELECT
comments.comment
FROM
comments
WHERE
`gid`=303410
LIMIT 1
)); 
```

（结果 34.1612 秒）（结果 32.2737 秒）

```
SELECT BENCHMARK(1000000000, (
SELECT
commentstext.comment
FROM
commentsindex,
commentstext
WHERE
`gid`=303410
AND commentsindex.`id` = commentstext.`id`
LIMIT 1
)); 
```

（结果 34.1237 秒）（结果 34.2914 秒）

```
SELECT BENCHMARK(1000000000, (
SELECT
commentstext.comment
FROM
commentsindex
INNER JOIN
commentstext
ON commentstext.`id` = commentsindex.`id`
WHERE
`gid`=303410
LIMIT 1
)); 
```

（结果 32.8471 秒）（结果 34.7079 秒）

...但现在我真的很想知道使用哪种桌子设计并不重要。*使困惑*

# visual-studio-2010 - 安装的快捷方式导致安装重新运行 Visual Studio 2010

> ID：10215458
> 
> 赞同：0
> 
> 时间：2012-04-18T18:17:05.213
> 
> 标签：visual-studio-2010, installation

我正在使用 Visual Studio 2010 设置为我的应用程序创建安装程序。从文件系统编辑器中，我选择了在我的解决方案中创建的两个主要输出文件之一。我已经右键单击并为我的可执行文件创建了一个快捷方式。我已将快捷方式拖放到用户的程序菜单中。我构建了安装程序，一切都成功完成。我运行安装程序，一切都运行成功。现在我继续双击快捷方式，安装程序重新运行并失败！！！。我检查了快捷方式，它与我手动创建的用于比较的快捷方式不同。目标是灰色的。任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:02:27.803

通过公布的快捷方式启动应用程序时，Windows Installer 会验证应用程序资源是否完好无损。如果缺少一个或多个资源，Windows Installer 会使用缓存的 MSI 自动重新安装它们。这就是执行第二次安装的原因。

在 Visual Studio 中创建的快捷方式会被公布，因此如果您安装的某些文件丢失，则会触发修复。

要确定触发修复的原因，您可以尝试以下操作：

*   收到“准备安装”消息后打开事件查看器（您可以在开始菜单中搜索或启动“eventvwr.msc”）
*   转到“Windows 日志”->“应用程序”</li>
*   查找具有以下形式的“MsiInstaller”信息消息：

    事件类型：警告事件源：MsiInstaller 事件 ID：1001 描述：检测产品“{1F7D16F0-836D-4CE4-9123-D30B2F24A17B}”，在请求组件“{068153F4-B9E0-4745-9A47-”期间功能“FeatureId”失败833764D9D60C}'

GUID 在您的机器上会有所不同，但它们可以帮助您确定是哪个组件导致了问题。第一个 GUID 是您的包 ProductCode，第二个 GUID 用于有问题的组件。尝试创建[安装日志](http://setupanddeployment.com/debugging/msi-log/)并查看组件未正确安装的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T22:52:23.273

这最终成为注册表配置单元的问题。Visual Studio 2010 注册表编辑器允许我在 'HKEY_USERS(64)\S-1-5-20\Fileopen 中指定值。然而，这就是上述错误的原因。也就是说，当使用 Visual Studio 2010 中的设置和部署生成注册表时，您不能在注册表的这一部分中拥有值。我将这些值移动到 local_Machine 下，快捷方式就像一个魅力。

# javascript - 对包含 20 个变量的列表进行排序，然后选择前五个

> ID：10215468
> 
> 赞同：0
> 
> 时间：2012-04-18T18:17:50.267
> 
> 标签：javascript, arrays

所以这是我的困境，我已经做了几天的研究，试图找出如何解决它。

问题：我有一个函数，它使用 js 读取 xml 文件的行，然后将某些行（a1、a2、a3 等）存储到变量/数组中。然后我需要按值对它们进行排序，并选择前五个最大的数字并使用它们的 id 从 xml 文件中选择其他信息。

例如，我有 a1、a4、a5、a6 和 a2 是该文件的最大行（值因文件而异）。然后，我需要选择这些变量，从 10 行中获取具有相似名称的数据并对它们执行数学方程式（新行与第一行相同，除了末尾带有“a”或“b”） .

我的理论解决方案：将xml中的行读入一个数组，并将相应的行读入另外两个数组。然后，当我对第一个数组进行排序时，我可以获取前五个数组的单元格名称，并使用它来定义我使用其他两个数组中的哪些数组单元格来完成我的方程式。

这是我的三个数组。

```
indSort[0] = Number($(this).find("n0").text());
indSort[1] = Number($(this).find("n1").text());
indSort[2] = Number($(this).find("n2").text());
indSort[3] = Number($(this).find("n3").text());
indSort[4] = Number($(this).find("n4").text());
indSort[5] = Number($(this).find("n5").text());
indSort[6] = Number($(this).find("n6").text());
indSort[7] = Number($(this).find("n7").text());
indSort[8] = Number($(this).find("n8").text());
indSort[9] = Number($(this).find("n9").text());
indSort[10] = Number($(this).find("n10").text());
indSort[11] = Number($(this).find("n11").text());
indSort[12] = Number($(this).find("n12").text());
indSort[13] = Number($(this).find("n13").text());
indSort[14] = Number($(this).find("n14").text());
indSort[15] = Number($(this).find("n15").text());
indSort[16] = Number($(this).find("n16").text());
indSort[17] = Number($(this).find("n17").text());
indSort[18] = Number($(this).find("n18").text());
indSort[19] = Number($(this).find("n19").text());
indSort[20] = Number($(this).find("n20").text());

indSorta[0] = Number($(this).find("n0a").text());
indSorta[1] = Number($(this).find("n1a").text());
indSorta[2] = Number($(this).find("n2a").text());
indSorta[3] = Number($(this).find("n3a").text());
indSorta[4] = Number($(this).find("n4a").text());
indSorta[5] = Number($(this).find("n5a").text());
indSorta[6] = Number($(this).find("n6a").text());
indSorta[7] = Number($(this).find("n7a").text());
indSorta[8] = Number($(this).find("n8a").text());
indSorta[9] = Number($(this).find("n9a").text());
indSorta[10] = Number($(this).find("n10a").text());
indSorta[11] = Number($(this).find("n11a").text());
indSorta[12] = Number($(this).find("n12a").text());
indSorta[13] = Number($(this).find("n13a").text());
indSorta[14] = Number($(this).find("n14a").text());
indSorta[15] = Number($(this).find("n15a").text());
indSorta[16] = Number($(this).find("n16a").text());
indSorta[17] = Number($(this).find("n17a").text());
indSorta[18] = Number($(this).find("n18a").text());
indSorta[19] = Number($(this).find("n19a").text());
indSorta[20] = Number($(this).find("n20a").text());

indSortb[0] = Number($(this).find("n0b").text());
indSortb[1] = Number($(this).find("n1b").text());
indSortb[2] = Number($(this).find("n2b").text());
indSortb[3] = Number($(this).find("n3b").text());
indSortb[4] = Number($(this).find("n4b").text());
indSortb[5] = Number($(this).find("n5b").text());
indSortb[6] = Number($(this).find("n6b").text());
indSortb[7] = Number($(this).find("n7b").text());
indSortb[8] = Number($(this).find("n8b").text());
indSortb[9] = Number($(this).find("n9b").text());
indSortb[10] = Number($(this).find("n10b").text());
indSortb[11] = Number($(this).find("n11b").text());
indSortb[12] = Number($(this).find("n12b").text());
indSortb[13] = Number($(this).find("n13b").text());
indSortb[14] = Number($(this).find("n14b").text());
indSortb[15] = Number($(this).find("n15b").text());
indSortb[16] = Number($(this).find("n16b").text());
indSortb[17] = Number($(this).find("n17b").text());
indSortb[18] = Number($(this).find("n18b").text());
indSortb[19] = Number($(this).find("n19b").text());
indSortb[20] = Number($(this).find("n20b").text()); 
```

任何帮助都会非常棒！！！！

编辑：我也愿意以不同的方式做事。例子真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:33:11.007

一种优雅的元素排序方式：

```
$(this).find("*").sort(function(a, b){
  return +b.innerHTML-a.innerHTML;
}) 
```

之后可以使用 slice() 获取前 5 个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:28:39.573

您可以使用[自定义比较功能](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)，`.sort()`您可以在其中比较行的某些值。然后只使用：

```
array.sort(customCompare).slice(0, 5); 
```

# macos - 在 Mac 中配置 Google App Engine

> ID：10215469
> 
> 赞同：1
> 
> 时间：2012-04-18T18:17:56.153
> 
> 标签：macos, google-app-engine, installation

这更像是一个初学者的问题..所以请忍耐..

我开始使用谷歌应用程序启动器 - python，我创建了一个端口为 8080 的新应用程序。当我运行默认的 Hello, World 应用程序时（我从 main.py 注意到）

我总是遇到 500 错误 - 内部服务器。

我在日志中发现了这种奇怪的错误：- ImportError：没有名为 urllib 的模块。

我被卡住了..你能帮忙解决问题吗？

谢谢！

PS：我运行的是预先安装了 python 2.6.1 的雪豹，因此我没有安装新包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:45:12.687

我通过以下方式解决了这个问题：

1.  从 python 站点安装了 python 2.7.3。
2.  在 google 应用启动器首选项中添加 python 路径 /usr/local/bin/python2.7。
3.  输入路径后按回车键，然后关闭首选项。
4.  重新启动应用程序和 tadaaa .. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:03:45.403

我也见过这种情况——事实上，我的一个 OS X 机器有时仍然存在这个问题。我相信您的 .profile 或 site-packages 中可能有一些东西会导致这种情况，但很难调试。您可以尝试从 python.org 安装 Python 2.7 并使用它。（抱歉说得这么模糊。）

# html - 在 HTML 中嵌入 PDF

> ID：10215470
> 
> 赞同：4
> 
> 时间：2012-04-18T18:17:56.473
> 
> 标签：html, pdf, iframe, embed, acrobat

我需要在 HTML 页面中嵌入 PDF 文档。PDF 是动态生成的，即不是静态文件，而是使用 PDF 工具包（在我的例子中为“Apache PDFBox”）生成的字节数组。我有一个 Java Web 应用程序。

据我了解，嵌入 PDF 有两种方法：使用 OBJECT 和 IFRAME 标签。

*   标签对`<object>`我不起作用。当我有一个动态生成的源时，它需要 20 秒。渲染。我不确定这是否是 Acrobat Reader 插件的问题，但我无法解决这种奇怪的行为。

*   该`<iframe>`标签工作正常并显示 PDF。但问题是：我的 PDF 有一个提交表单的提交按钮。提交表单后，我需要重新显示带有某种状态消息的 PDF。表单输出到**同一**帧。因此，我得到了一个Frame-inside-a-Frame。没有办法跳出当前框架，因为我无权访问`<form>`标签。表单包含在 PDF 中，Acrobat 负责提交表单。如果我的框架中有额外的元素，例如文本消息，我将得到级联框架。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:13:26.360

```
<object data="myfile.pdf" type="application/pdf" width="100%" height="100%">

  <p>It appears you don't have a PDF plugin for this browser.
  No biggie... you can <a href="myfile.pdf">click here to
  download the PDF file.</a></p>

</object> 
```

有关更多详细信息和示例.. 访问此 URL： http: [//pdfobject.com/markup/index.php](http://pdfobject.com/markup/index.php)

# ruby-on-rails - Rails 2.3：服务器重启后第一次请求会话不可用

> ID：10215472
> 
> 赞同：1
> 
> 时间：2012-04-18T18:18:05.467
> 
> 标签：ruby-on-rails, session

我目前正在将 Rails 应用程序从 2.1.0 升级到 2.3.14。现在大多数事情都运行良好，但是用户会话存在一个奇怪的问题：

当用户登录时，它会保存在会话中，即使在浏览器重新启动后也可以使用 - 应该如此。

但是：当我重新启动本地服务器并加载需要身份验证的页面时，会发生以下情况：

1.  Rails 在数据库中创建一个新的会话行，其 session_id 与以前完全相同。
2.  在应用程序内部，“旧”会话不可用，旧会话数据不可用。
3.  如果我之后只是重新加载页面（F5），则包含旧数据的正确会话将被加载。

该应用程序使用`ActionController::Base.session_store = :active_record_store`多个数据库（每个子域一个，不是我的决定）。选择正确的数据库作为 before_filter 和 rails 在这些数据库中保存会话。

我的猜测是，在服务器重新启动后，某些内容尚未正确设置，并且在错误的数据库中搜索会话并保留第一个请求（但在通过 设置后它保存在正确的数据库中`ActiveRecord::Base.establish_connection`）。

如果我的猜测是正确的，在建立连接后加载正确的会话应该可以解决这个问题。有没有办法从数据库中完全重新加载会话或告诉 Rails 为所有会话使用自定义数据库？

提前致谢！

# asp.net - asp.ControlParamter 控件id冲突

> ID：10215474
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:18.970
> 
> 标签：asp.net

```
<asp:ControlParameter ControlID="ddListPlayerPointSystems" Name="profileid" PropertyName="SelectedValue" />
            <asp:ControlParameter ControlID="ddListCmty" Name="cmty" PropertyName="SelectedValue" />
            <asp:ControlParameter ControlID="ctl00$MainContent$TabContainer1$TabPanel1$FormView3$pointsTextBox" Name="InsertPts" PropertyName="Text" Type="Decimal" /> 
```

我无法理解为什么在第一个控制参数中我可以调用下拉框 id 而不是文本框 id，即 pointsTextBox。我正在使用带有多个面板的 asp ajax 选项卡容器的母版页。如果我取下“ctl00$MainContent$TabContainer1$TabPanel1$FormView3$”，我会得到一个未找到的控件，但我不知道为什么这适用于其他两个控制参数

**编辑** 所以我找到了解决我的问题的方法。感谢@TheGeekYouNeed 和@JamesJ，我明白为什么我需要为那个特定的文本框提供更长的路径名（drop 在 tabcontainer 之外，所以直接名称有效）。但我发现，由于我是通过 '<%# Bind("name", "{0:n}") %>' 分配该文本框的值，因此我可以只使用 asp:Parameter 而不是 ControlParameter像这样：

```
"<asp:Parameter Name="name" Type="String" />" 
```

问题是我不太明白这一切是如何运作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:24:05.830

pointsTextBox 的 ControlID 在服务器端不是 'ct100$MainContent$TabContainer..etc...。

在后面的代码中设置 COntrolID，这样您就可以使用 FindControl("pointsTextBox") 来获取对文本框控件的引用。

您可以执行以下操作：

```
TextBox t = this.FindControl("pointsTextBox") as TextBox;
if(t != null)
{
    ddListPlayerPOintSystems.Add(new { COntrolID = t, Name = "InsertPts", PropertyName="Text", Type="Decimal"});
} 
```

我还没有测试过，所以我并不是说代码是完美的，但是这里说明了你需要遵循的方法。

# windows-phone-7 - 如何在 Windows Phone 7 中重新加载（刷新）网格上的数据

> ID：10215475
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:20.427
> 
> 标签：windows-phone-7

我有点击图片，在这种方法中，我有这两张图片来为它们设置来源：

```
image4.Source = (ImageSource)new ImageSourceConverter().ConvertFromString("Cards/" + player12.First() + ".png"); 
```

和

```
image5.Source = (ImageSource)new ImageSourceConverter().ConvertFromString("Cards/" + comp1.First() + ".png"); 
```

我有计时器要等待，但它们会同时显示该方法的执行时间。我想在第一个 image4.Source 之后重新加载网格，然后用计时器停止两秒钟，然后显示 image5.source。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:15:22.110

为延迟执行创建一个类：

```
public class OneShowDispatcherTimer
{
    public static void FireAfter(TimeSpan inverval, Action callback)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            DispatcherTimer Timer = new DispatcherTimer()
            {
                Interval = interval
            };
            Timer.Tick += (s, e) =>
            {
                Timer.Stop();
                callback();
            };
            Timer.Start();
        });
    }
} 
```

并以这种方式使用：

```
OneShowDispatcherTimer.FireAfter(TimeSpan.FromSeconds(2), () =>
{
    image4.Source = ...

    OneShowDispatcherTimer.FireAfter(TimeSpan.FromSeconds(2), () =>
    {
        image5.Source = ...
    });
}); 
```

# python - PIL 模块 / 无法初始化图像 API

> ID：10215479
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:48.570
> 
> 标签：python, macos, python-2.7

我正在运行 OSX 和 Python 2.7。我拥有的应用程序需要 PIL 模块，当我尝试安装它时会出现此错误。

我已经尝试了几次安装，但似乎没有任何效果。我怎样才能让它工作？

```
WARNING  2012-04-18 18:15:54,222 dev_appserver.py:3394] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: dlopen(/Library/Python/2.7/site-packages/PIL/_imaging.so, 2): Symbol not found: _jpeg_resync_to_restart
  Referenced from: /Library/Python/2.7/site-packages/PIL/_imaging.so
  Expected in: flat namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:09:05.757

对此的答案是卸载所有内容，然后使用 pip install pil。

# jquery - 如何将文件夹中的图像与该用户相关联？

> ID：10215480
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:48.977
> 
> 标签：jquery, jsp, servlets

我有一个论坛网站，用户可以（用户无需注册）可以上传图片。

我不想将图片存储在数据库中，所以我将其存储到服务器中的文件夹中。

作为图片上传的一部分，用户将输入他们的邮件 ID（可选）、手机号码（可选）、姓名和图片。

完成此操作后，作为以网格形式显示搜索结果的一部分，如何将图像与存储文件夹中的该用户关联？

请看图片理解？？

![在此处输入图像描述](../Images/632dc7d897b68c7ab15c0e762edd8ad3.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:24:42.430

根据您的描述名称是必填字段，它应该是唯一的。因此，您只能将图像按照用户的名称存储在一个文件夹中。这样您就可以仅根据一个文件夹中的用户名关联图像。您必须保留一个在所有用户中唯一的字段，并且您可以关联 avata、DOB 等字段。

# jquery - 为什么我的移动网站无法发送 AJAX 请求？

> ID：10215481
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:52.167
> 
> 标签：jquery, ajax, jquery-mobile

我的移动应用程序中可用的第一个操作是登录。表单调用 javascript：

```
$.post('http://www.website.com/m/users/login', ... 
```

我使用了一个包罗万象的 ajax 错误：

```
$(document).ajaxError(ajaxError);
function ajaxError() {
    hideLoader();
    enableForm( $('form:visible') );
    alert('Uh oh! An error occurred. Please make sure you have an internet connection and try again.');
} 
```

当我尝试登录时，我得到的只是那个警报。

即使它不是跨域（移动站点位于`mobile.website.com`），我也尝试过：

```
$.support.cors = true;
$.mobile.allowCrossDomainPages = true; 
```

但它仍然无法正常工作。在这一点上，我没有想法，所以我想看看是否有人知道 JQM ajax 请求的任何其他可能的障碍。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:21:40.410

您正在执行跨域请求，`www.website.com`与`mobile.website.com`. 您要么需要在 mobile.website.com 域上公开方法，使 www.website.com 支持 CORS，要么在两者之间提供某种代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:28:43.723

尝试使用名为 JSONP 的审查技术，您可以通过这种方式执行跨站点调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:37:56.083

使用[YQL](http://developer.yahoo.com/yql/)还可以让您进行跨域 AJAX 调用

[使用YQL 控制台](http://developer.yahoo.com/yql/console/)构建您的 URL 查询并直接在您的代码中使用 YQL 查询，您将获得可靠的响应

# wordpress - 如果自定义帖子类型字段为空，则插入默认值

> ID：10215482
> 
> 赞同：0
> 
> 时间：2012-04-18T18:18:53.907
> 
> 标签：wordpress, admin, default

在我的自定义帖子类型中，如果其中一个字段留空，如何在将默认值保存到数据库之前插入默认值？这发生在用户在我插入默认值之前单击**发布**之后，所以这一切都发生在幕后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:15:34.530

您可以使用`pre_post_update`或`save_post`挂钩： [http ://codex.wordpress.org/Plugin_API/Action_Reference/save_post](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)

或者将此默认值保存在 db 中，您可以在字段为空白时简单地显示它。

# visual-studio-2010 - Sqlite 不在 Visual Studio 数据源选项列表中

> ID：10215488
> 
> 赞同：26
> 
> 时间：2012-04-18T18:18:59.273
> 
> 标签：visual-studio-2010, sqlite

下载并运行 SQLite 设置。
添加了对我的项目的 dll 引用
在服务器资源管理器中，添加了新连接，单击数据源的“更改”，SQLite 是选项之一。
连接并使用我的桌子。

然后... VS 2010 崩溃了。当我重新加载我的项目时，我的连接不在服务器资源管理器中，所以尝试再次添加它。
SQLite 不在选项列表中。
重新运行 SQLite 设置，删除/重新添加参考，重新启动项目......列表中仍然没有 SQLite。

如何在服务器资源管理器中连接 SQLite ？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-01-15T10:45:12.347

这是一个老问题，但对于像我这样的人来说，在有新答案之前就发现了这个问题：

[VS 2013 中缺少 SQLite 数据提供程序](https://stackoverflow.com/questions/19665370/missing-sqlite-data-provider-in-vs-2013)

基本上，对于最新版本的 SQLite，您可以下载包含组件的安装程序

[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

为您选择正确的设置，对我来说是：32 位 Windows (.NET Framework 4.5.1) 的设置 sqlite-netFx451-setup-bundle-x86-2013-1.0.94.0.exe

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-20T14:50:37.527

我有 Windows 7 x64 和 Visual Studio community 2015，这个解决方案对我有用。
基本上你需要安装 SQLite bundel 并检查“安装 Visual Studio 2015 的设计器组件”。
如果您的版本与 2015（2010/2013 等）不同，只需搜索适合您版本的捆绑包。

**1\. 访问：**
[http ://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

**2.下载**“sqlite-netFx46-setup-bundle-x86-2015-1.0.104.0”（下载最新的，我找到的就是这个）。

[![在此处输入图像描述](../Images/3c3a5fa78e4e21e0eab5fd06145f931f.png)](https://i.stack.imgur.com/MzMPz.png)

或通过直接链接：
[http ://system.data.sqlite.org/downloads/1.0.104.0/sqlite-netFx46-setup-bundle-x86-2015-1.0.104.0.exe](http://system.data.sqlite.org/downloads/1.0.104.0/sqlite-netFx46-setup-bundle-x86-2015-1.0.104.0.exe)

**3\. 运行设置：**
[![在此处输入图像描述](../Images/6d9b975c9685bb675aa80edcfe2ba5fe.png)](https://i.stack.imgur.com/la4W7.png) [![在此处输入图像描述](../Images/66dfe750c18ced99c6069cefaf835791.png)](https://i.stack.imgur.com/XDp2I.png)

**4\. 结果：**
[![在此处输入图像描述](../Images/3dfdd85f096430f87de9d7a3f4b3cd64.png)](https://i.stack.imgur.com/BClrL.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:47:59.083

[您可以在System.Data.SQLite 下载页面](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)上找到安装程序。Seteps 文件将满足您的需求。

例如，*64 位 Windows (.NET Framework 4.0) 的安装程序*的描述如下：

> 此安装程序包具有混合模式程序集，将为 x64 版本的 System.Data.SQLite 1.0.81.0 (3.7.12.1) 程序包安装所有必要的运行时组件和依赖项。包含适用于 x64 的 Visual C++ 2010 SP1 运行时。需要 .NET Framework 4.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T11:54:38.143

没有一个答案对我有用。除了@E235 答案我添加了 sqlite nuget 包更新 ef 到 6.1.3 然后它工作我能够看到数据源

# javascript - 使用 javascript 为 facebook 页面“like”创建一个 keylistener 热键

> ID：10215492
> 
> 赞同：1
> 
> 时间：2012-04-18T18:19:16.027
> 
> 标签：javascript, jquery, keyboard-shortcuts, greasemonkey, userscripts

*我正在为学校做一个艺术项目，用户拥抱一个物体并在 Facebook 上获得“喜欢”状态。一切都很好；但是，我需要在用户脚本中设置一个键盘监听器。*

**问题：**
如何让热键执行 unsafeWindow.Otomatislike 函数？如果是这样，任何人都可以告诉我如何组合这些代码。我很确定我的语义是让它失败的原因。

100%**像状态码一样工作**

```
 body = document.body;
if(body != null) {
    div = document.createElement("div");
    div.setAttribute('id','like2');
    div.style.position = "fixed";
    div.style.display = "block";
    div.style.width = "125px"; 
    div.style.opacity= 0.90;
    div.style.bottom = "+42px";
    div.style.left = "+6px";
    div.style.backgroundColor = "#eceff5";
    div.style.border = "1px solid #94a3c4";
    div.style.padding = "2px";
    div.innerHTML = "<img src='http://g1203.hizliresim.com/v/n/3pnck.png' width='16' height='14' align='absmiddle' />&nbsp;&nbsp;<a onclick='OtomatisLike()'>Like</a>"

    body.appendChild(div);

    unsafeWindow.OtomatisLike = function() {

        input = document.getElementsByTagName("input");
        for(i = 0; i < input.length; i++) {
            myID = input[i].getAttribute("data-profileid");
            if(myID != null && myID.indexOf("14226545351") >= 0)
                input[i].click();
        }

    };
} 
```

此代码在左下角创建一个小按钮，以便在其上时喜欢 redbull 页面。IE。[http://vvcap.net/db/CTHpxz8qeuuZX1yy5tEd.htp](http://vvcap.net/db/CTHpxz8qeuuZX1yy5tEd.htp)

**问题** 我想为此添加一个键盘侦听器，而不是我设计的辅助 div“按钮”。 [http://vvcap.net/db/M0XbpT5Sw8BmOtfAHJ4m.htp](http://vvcap.net/db/M0XbpT5Sw8BmOtfAHJ4m.htp)

我发现了一些看起来很有趣的示例代码；但是，我在弄清楚如何实现它时遇到了很多麻烦：[热键引用](http://www.catswhocode.com/blog/using-keyboard-shortcuts-in-javascript)

```
 var isCtrl = false;
document.onkeyup=function(e) {
    if(e.which == 17) isCtrl=false;
}document.onkeydown=function(e){
    if(e.which == 17) isCtrl=true;
    if(e.which == 96 && isCtrl == true) {
         alert('Keyboard shortcuts are cool!');
         return false;
    }
} 
```

虽然这段代码合乎逻辑，但我完全无法实现它。17 = ctnl 键，而 96 == 小键盘 0。因此热键 == ctnl + 0（小键盘）。当然，警报将被 facebook 之类的功能所取代

**最终代码已回答**

```
 // ==UserScript==
// @name            Facebook Like By Virgan
// @namespace               http://userscripts.org/scripts/show/123303
// @version         0.3
// @copyright               Virgan
// @description             Auto Like And Confirm (mass) | You can mass like and confirm
// @author          Virgan (http://userscripts.org/users/430638)
// @icon            https://lh4.googleusercontent.com/-2A1Jpr4-1qM/TxPUbMq8IQI/AAAAAAAAAIU/_50N6LEgkxE/h120/FB.png
// @require         http://code.jquery.com/jquery.min.js
// @include         http://www.facebook.com/*
// @include         https://www.facebook.com/*
// @exclude         htt*://developers.facebook.com/*
//
// Copyright (c) 2012, Virgan
// Auto Like/Unlike, And Another Function.

// ==/UserScript==

// ==Profile==
unsafeWindow.OtomatisLike = OtomatisLike;
function OtomatisLike() 
    {   
        input = document.getElementsByTagName("input");
        for(i = 0; i < input.length; i++) 
            {
                myID = input[i].getAttribute("data-profileid");
                if(myID != null && myID.indexOf("14226545351") >= 0)
                input[i].click();
            }

    }

$(window).load(function(){

    var isCtrl = false;
    document.onkeyup=function(e) {
        if(e.which == 17) isCtrl=false;
    }
    document.onkeydown=function(e){
        if(e.which == 17) isCtrl=true;
        if(e.which == 96 && isCtrl == true) {
            OtomatisLike()

            return false;
        }
    }

}); 
```

如果您想了解有关项目[pdf 预设的更多信息，感谢您的所有帮助](http://designobvio.us/CLASSES/like+pillowv3.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:26:25.527

这里：
我创建了一个包含函数的 HTML 页面`OtomatisLike()`。

```
<html lang="en">
<head>
<title>test - keylistener</title>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function OtomatisLike() { alert('alert fired from html page') }
</script>
</head>
<body>
    <button id="btnstart">click to start</button>
    <script type="text/javascript">
        $('#btnstart').click(function() { OtomatisLike() })
    </script>
</body>
</html> 
```

在禁用 GM 的情况下，当您单击按钮时，您将看到警报说“从 html 页面触发警报”。

然后我创建了一个greasemonkey脚本来改变这个功能

```
// ==UserScript==
// @name        TESTE 2
// @require     http://code.jquery.com/jquery.min.js
// @include     file://*
// ==/UserScript==

function OtomatisLike() { alert('alert fired from greasemonkey') }
unsafeWindow.OtomatisLike = OtomatisLike;

$(window).load(function(){

    var isCtrl = false;
    document.onkeyup=function(e) {
        if(e.which == 17) isCtrl=false;
    }
    document.onkeydown=function(e){
        if(e.which == 17) isCtrl=true;
        if(e.which == 96 && isCtrl == true) {
            OtomatisLike()
            //alert('Keyboard shortcuts are cool!');
            return false;
        }
    }

}); 
```

现在启用 GM，您可以单击按钮或按下来`ctrl` `0`调用该功能`OtomatisLike()`，该功能已被脚本中的功能所取代，现在将提示“从greasemonkey 发出警报”。

# ejb-3.0 - 消息驱动 bean avec jboss 6

> ID：10215493
> 
> 赞同：0
> 
> 时间：2012-04-18T18:19:19.173
> 
> 标签：ejb-3.0, jboss6.x, message-driven-bean

嗨，我想在发生关键操作时通知我的客户，所以我想使用我编写的这个 mdb 的消息驱动 bean `

```
@MessageDriven(mappedName = "topic/MailConfirmationMdbTopic", 
activationConfig = {
 //@ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
 //@ActivationConfigProperty(propertyName="subscriptionDurability", propertyValue="Durable"),
 //@ActivationConfigProperty(propertyName="subscriptionName", propertyValue="topicmdb"),
 //@ActivationConfigProperty(propertyName="clientId", propertyValue="mdbtopic-test"),

 @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Topic"),
 @ActivationConfigProperty(propertyName = "destination", propertyValue = "topic/MailConfirmationMdbTopic")  
})

public class MailConfirmationMdbBean implements MessageListener {

    private static final Logger log = Logger.getLogger(MailConfirmationMdbBean.class);

     public MailConfirmationMdbBean(){
         log.info("Initialisation de l'envoi du mail depuis MailConfirmationMdbBean");  
     }

     public void onMessage(Message message) { 

        // Pour la classe de test MailConfirmationProducteur
      if (message instanceof TextMessage) {
           TextMessage mail = (TextMessage) message;
           // L'envoi d'un mail de confirmation au client est ici simul� par l'affichage d'un message au niveau des logs.
           try {
            String leMail = mail.getText();
            log.info(" Envoi du mail : " + leMail);
            log.info(" --------------------------------------------------- ");
            //sendMsg("eniejb3@gmail.com", "Confirmation de commande.", leMail);
            log.info(" --------------------------------------------------- ");
            log.info(" Mail envoy�.");
           }

           catch (JMSException e) {
            e.printStackTrace();
           } 
      } else if  (message instanceof ObjectMessage) {
          ObjectMessage lemessage = (ObjectMessage) message;

          try {
               Commande commande = (Commande)lemessage.getObject();
                Client client = commande.getUtilisateurFk();
                Adresse adresse = client.getAdresseFk();
                String contenuMail = "Bonjour " + client.getNom() + " " + client.getPrenom() + ". \n" 
                + "Votre num�ro de commande est : " + commande.getCommandeid()
                + " \n" + "Vous avez command� les articles suivants : " + " \n" ;

                String lesArticles = "";                        
                Set <Lignecommande> listeArticles = commande.getLignecommandeCollection();
                for (Lignecommande lc :  listeArticles){                    
                    Article article = lc.getArticleFk();
                    lesArticles += article.getNom() + " : " + article.getPrix()  + " euros. \n" ;               
                }

                contenuMail += lesArticles;

                String ladresse = 
                " \n" + "Votre adresse est : "+ " \n" 
                + adresse.getNumero()  + " rue " + adresse.getRue()  + " " + adresse.getCodepostal()  + " " + adresse.getVille();

                contenuMail += ladresse;

                contenuMail += "\n Votre commande est en cours de traitement."; 

                log.info(" Envoi du mail au client: " );
                log.info(" --------------------------------------------------- ");

                sendMsg(client.getEmail(), "Confirmation de votre commande.", contenuMail);
                log.info(" --------------------------------------------------- ");
                log.info(" Mail envoy� au client.");
               }
                catch (MessagingException e) {
                    e.printStackTrace();
                }
                catch (NamingException e) {
                    e.printStackTrace();                
               } catch (JMSException e) {
                    e.printStackTrace();
               } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
               }                  
      }
     }

        protected void sendMsg(String email, String subject, String body) throws MessagingException, NamingException, UnsupportedEncodingException {

            Properties props = new Properties();
            InitialContext ictx = new InitialContext(props);
            javax.mail.Session mailSession = (javax.mail.Session) ictx.lookup("java:/Mail");

            MimeMessage message = new MimeMessage(mailSession);

            message.setSubject(subject);
            message.setRecipients(javax.mail.Message.RecipientType.TO, javax.mail.internet.InternetAddress.parse(email, false));
            message.setText(body);
            message.saveChanges();

            Transport transport = mailSession.getTransport("smtp");
            try {
                transport.connect();
                transport.sendMessage(message, message.getAllRecipients());
                log.info("Message envoy�");
            }
            finally {
                transport.close();
            }
        }

     @PreDestroy  
     public void remove() {
         log.info("Suppression de MailConfirmationMdbBean.");
     }
}` 
```

并且为了测试我有这个两个程序：

```
public class MailConfirmationConsommateur implements MessageListener {
 public static void main(String[] args) throws Exception {
     new MailConfirmationConsommateur();
 }

 public MailConfirmationConsommateur() throws Exception {

    Properties props = new Properties(); //System.getProperties(); 
      //proprietes.load(new FileInputStream("jndi.properties")); 
     props.put(Context.INITIAL_CONTEXT_FACTORY,
                "org.jnp.interfaces.NamingContextFactory");
        props.put(Context.URL_PKG_PREFIXES,
                "org.jboss.naming:org.jnp.interfaces");
        props.put(Context.PROVIDER_URL, "jnp://localhost:1099");
      InitialContext ctx = new InitialContext(props);       
      // 1:  recherche d'une connection factory
      ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");
      // 2:  création d'une connection JMS
      Connection conn = factory.createConnection();   
      // 3: création d'une session
      Session session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
      // 4\. Recherche d'une destination
      Topic topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");        
      // 5: création d'un consommateur de message
      MessageConsumer consommateur =session.createConsumer(topic);  
      consommateur.setMessageListener(this);

      System.out.println("Client JMS MailConfirmationConsommateur é l'écoute de messages.");
      conn.start();   // 
 }

 public void onMessage(Message msg) {
      if (msg instanceof TextMessage) {
       TextMessage tm = (TextMessage) msg;  
       // L'envoi d'un mail de confirmation au client est ici simulé 
       // par l'affichage d'un message au niveau des logs.
       try {
        String mail = tm.getText();
        System.out.println("Le client JMS MailConfirmationConsommateur a reçu le message : " + mail);
       } catch (JMSException e) {
        e.printStackTrace();
       }
      }
 }

 @PreDestroy 
 public void remove() {
     System.out.println("Suppression du client JMS MailConfirmationConsommateur.");
 } 
```

}

和

```
 public class MailConfirmationProducteur {

     private static final Logger log = Logger.getLogger(MailConfirmationProducteur.class);

     public static void main(String[] args) throws Exception { 
         // Properties proprietes = new Properties();  
         // proprietes.load(new FileInputStream("jndi.properties")); 
          InitialContext ctx = new InitialContext();
          // 1: recherche d'une connection factory
          ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");  
          // 2: création d'une connection JMS
          Connection conn = factory.createConnection();

          // 3: création d'une session
          Session session = conn.createSession(false,Session.AUTO_ACKNOWLEDGE);

          // 4: Recherche d'une destination
          Topic topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");

          // 5: création d'un producteur de message
          MessageProducer producteur = session.createProducer(topic);

          // 6: publication d'un message
          TextMessage msg = session.createTextMessage();
          msg.setText("Mail de confirmation pour le client.");
          producteur.send(msg);

          producteur.close(); 
          log.info("Message envoyé.");
     }
    } 
```

我现在不知道，如果我在正确的方式上或在控制台上没有，我有这个错误

```
 Exception in thread "main" javax.naming.NameNotFoundException: topic not     bound
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:771)
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:779)
        at org.jnp.server.NamingServer.getObject(NamingServer.java:785)
        at org.jnp.server.NamingServer.lookup(NamingServer.java:396)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
        at sun.rmi.transport.Transport$1.run(Transport.java:177)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
        at org.jnp.server.NamingServer_Stub.lookup(Unknown Source)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:728)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:688)
        at javax.naming.InitialContext.lookup(InitialContext.java:392)
        at com.soutem.ejb.mdb.MailConfirmationConsommateur.<init>(MailConfirmationConsommateur.java:42)
        at com.soutem.ejb.mdb.MailConfirmationConsommateur.main(MailConfirmationConsommateur.java:22) 
```

当我运行 producteur

```
public class MailConfirmationProducteur {

 private static final Logger log = Logger.getLogger(MailConfirmationProducteur.class);

 public static void main(String[] args) throws Exception { 
     // Properties proprietes = new Properties();  
     // proprietes.load(new FileInputStream("jndi.properties")); 
      InitialContext ctx = new InitialContext();
      // 1: recherche d'une connection factory
      ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");  
      // 2: création d'une connection JMS
      Connection conn = factory.createConnection();

      // 3: création d'une session
      Session session = conn.createSession(false,Session.AUTO_ACKNOWLEDGE);

      // 4: Recherche d'une destination
      Topic topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");

      // 5: création d'un producteur de message
      MessageProducer producteur = session.createProducer(topic);

      // 6: publication d'un message
      TextMessage msg = session.createTextMessage();
      msg.setText("Mail de confirmation pour le client.");
      producteur.send(msg);

      producteur.close(); 
      log.info("Message envoyé.");
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:52:44.370

```
it works now , i fill the solution : here 

the  methode on my session bean for producing mail :

    public void producteurMail(Commande commande) {
        // Properties proprietes = new Properties();
        // proprietes.load(new FileInputStream("jndi.properties")
        InitialContext ctx = null;
        try {
            ctx = new InitialContext();
        } catch (NamingException e) {
            e.printStackTrace();
        }
        // 1: recherche d'une connection factory
        ConnectionFactory factory = null;
        try {
            factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");
        } catch (NamingException e) {
            e.printStackTrace();
        }
        // 2: création d'une connection JMS
        Connection conn = null;
        try {
            conn = factory.createConnection();
        } catch (JMSException e) {
            e.printStackTrace();
        }
        // 3: création d'une session
        Session session = null;
        try {
            session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        } catch (JMSException e) {
            e.printStackTrace();
        }
        // 4: Recherche d'une destination
        Topic topic = null;
        try {
            topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");

        } catch (NamingException e) {
            e.printStackTrace();
        }
        // 5: cr�ation d'un producteur de message
        MessageProducer producteur = null;
        try {
            producteur = session.createProducer(topic);
        // 6: publication d'un message
        TextMessage msg = null;

            msg = session.createTextMessage();
            msg.setText("Votre Commande est en cour de traitment .");
            //producteur.
            producteur.send(msg);
            producteur.close();
            conn.close();
            session.close();
        } catch (JMSException e) {
            e.printStackTrace();
        }
        log.info("Message envoyé.");
    }

my message driven bean : 

     package com.soutem.ejb.mdb;

    import java.io.UnsupportedEncodingException;
    import java.util.Properties;
    import java.util.Set;
    import javax.activation.DataHandler;
    import javax.activation.DataSource;
    import javax.activation.FileDataSource;
    import javax.annotation.PreDestroy;
    import javax.annotation.Resource;
    import javax.ejb.ActivationConfigProperty;
    import javax.ejb.MessageDriven;
    import javax.ejb.MessageDrivenContext;
    import javax.jms.JMSException;
    import javax.jms.Message;
    import javax.jms.MessageListener;
    import javax.jms.ObjectMessage;
    import javax.jms.TextMessage;
    import javax.mail.BodyPart;
    import javax.mail.MessagingException;
    import javax.mail.Transport;
    import javax.mail.internet.MimeBodyPart;
    import javax.mail.internet.MimeMessage;
    import javax.naming.InitialContext;
    import javax.naming.NamingException;
    import org.jboss.logging.Logger;

    @MessageDriven(mappedName = "topic/MailConfirmationMdbTopic", 
    activationConfig = {
     @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
     @ActivationConfigProperty(propertyName="subscriptionDurability", propertyValue="Durable"),
     @ActivationConfigProperty(propertyName="subscriptionName", propertyValue="topicmdb"),
    @ActivationConfigProperty(propertyName="clientId", propertyValue="mdbtopic-test"),
    //        
     @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Topic"),
     @ActivationConfigProperty(propertyName = "destination", propertyValue = "topic/MailConfirmationMdbTopic")  
    })

    public class MailConfirmationMdbBean implements MessageListener {

        private static final Logger log = Logger.getLogger(MailConfirmationMdbBean.class);
    //  @Resource MessageDrivenContext mdc;
         public MailConfirmationMdbBean(){
             log.info("Initialisation de l'envoi du mail depuis MailConfirmationMdbBean");  
         }

         public void onMessage(Message message) { //Message de javax.jms.Message

            // Pour la classe de test MailConfirmationProducteur
          if (message instanceof TextMessage) {
               TextMessage mail = (TextMessage) message;
               // L'envoi d'un mail de confirmation au client est ici simulé par l'affichage d'un message au niveau des logs.
               try {
                String leMail = mail.getText();
                log.info(" Envoi du mail : " + leMail);
                log.info(" --------------------------------------------------- ");
                sendMsg("ahmed.drira@gmail.com", "Confirmation de commande.",leMail /*leMail*/);
                log.info(" --------------------------------------------------- ");
                log.info(" Mail envoyé.");
               }
               catch (JMSException e) {
                e.printStackTrace();
               } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (MessagingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NamingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
          } else if  (message instanceof ObjectMessage) {
              ObjectMessage lemessage = (ObjectMessage) message;                  
          }
         }

            protected void sendMsg(String email, String subject, String body) throws MessagingException, NamingException, UnsupportedEncodingException {

                Properties props = new Properties();
                InitialContext ictx = new InitialContext(props);
                javax.mail.Session mailSession = (javax.mail.Session) ictx.lookup("java:/Mail");

                MimeMessage message = new MimeMessage(mailSession);

                message.setSubject(subject);
                message.setRecipients(javax.mail.Message.RecipientType.TO, javax.mail.internet.InternetAddress.parse(email, false));
                message.setText(body);
                message.saveChanges();
                Transport transport = mailSession.getTransport("smtp");
                try {
                    transport.connect();
                    transport.sendMessage(message, message.getAllRecipients());
                    log.info("Message envoyé");
                }
                finally {
                    transport.close();
                }
            }   
         @PreDestroy  
         public void remove() {
             log.info("Suppression de MailConfirmationMdbBean.");
         }
    }  

for the producer and consumer programe , you can test with this :

     package com.soutem.ejb.mdb;

    import java.io.FileInputStream;
    import java.util.Properties;

    import javax.annotation.PreDestroy;
    import javax.jms.Connection;
    import javax.jms.ConnectionFactory;
    import javax.jms.JMSException;
    import javax.jms.Message;
    import javax.jms.MessageConsumer;
    import javax.jms.MessageListener;
    import javax.jms.Session;
    import javax.jms.TextMessage;
    import javax.jms.Topic;
    import javax.naming.Context;
    import javax.naming.InitialContext;

    public class MailConfirmationConsommateur implements MessageListener {

         public static void main(String[] args) throws Exception {
             new MailConfirmationConsommateur();
         }
     public MailConfirmationConsommateur() throws Exception {

          Properties proprietes = new Properties();  
          proprietes.load(new FileInputStream("jndi.properties")); 
          InitialContext ctx = new InitialContext(proprietes);

          // 1:  recherche d'une connection factory
          ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");

          // 2:  cr�ation d'une connection JMS
          Connection conn = factory.createConnection();

          // 3: cr�ation d'une session
          Session session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);

          // 4\. Recherche d'une destination
          Topic topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");     

          // 5: cr�ation d'un consommateur de message
          MessageConsumer consommateur = session.createConsumer(topic);  
          consommateur.setMessageListener(this);

          System.out.println("Client JMS MailConfirmationConsommateur à l'écoute de messages.");
          conn.start();   // 
     }

         public void onMessage(Message msg) {
              if (msg instanceof TextMessage) {
               TextMessage tm = (TextMessage) msg;  

               // L'envoi d'un mail de confirmation au client est ici simul� 
               // par l'affichage d'un message au niveau des logs.
               try {
                String mail = tm.getText();
                System.out.println("Le client JMS MailConfirmationConsommateur a reçu le message : " + mail);
               } catch (JMSException e) {
                e.printStackTrace();
               }
              }
         }

         @PreDestroy 
         public void remove() {
             System.out.println("Suppression du client JMS     MailConfirmationConsommateur.");
         }
    }
    package com.soutem.ejb.mdb;

    import java.io.FileInputStream;
    import java.util.Properties;

    import javax.annotation.Resource;
    import javax.jms.*;
    import javax.naming.InitialContext;

    import org.jboss.logging.Logger;

    public class MailConfirmationProducteur {

         private static final Logger log = Logger.getLogger(MailConfirmationProducteur.class);

         public static void main(String[] args) throws Exception {

              Properties proprietes = new Properties();  
              proprietes.load(new FileInputStream("jndi.properties")); 
              InitialContext ctx = new InitialContext(proprietes);

              // 1: recherche d'une connection factory
              ConnectionFactory factory = (ConnectionFactory) ctx.lookup("ConnectionFactory");

              // 2: cr�ation d'une connection JMS
              Connection conn = factory.createConnection();

              // 3: cr�ation d'une session
              Session session = conn.createSession(false,Session.AUTO_ACKNOWLEDGE);

              // 4: Recherche d'une destination
              Topic topic = (Topic) ctx.lookup("topic/MailConfirmationMdbTopic");
          // 5: cr�ation d'un producteur de message
          MessageProducer producteur = session.createProducer(topic);

          // 6: publication d'un message
          TextMessage msg = session.createTextMessage();
          msg.setText("Mail de confirmation pour le client.");
          producteur.send(msg);

          producteur.close(); 
          log.info("Message envoy�.");
     }
    }

you need also some configuration on the server to set up the topic so you need to add this lines on the /server/default/deploy/hornetq/hornetq-jms.xml

    <topic name="/topic/MailConfirmationMdbTopic">
        <entry name="/topic/MailConfirmationMdbTopic"/>
    </topic>
you need also to configure the java mail by adding your smtp privider , mail and pass  here is the config 

    <mbean code="org.jboss.mail.MailService"
         name="jboss:service=Mail">
    <attribute name="JNDIName">java:/Mail</attribute>
    <attribute name="User">.......@gmail.com</attribute>
    <attribute name="Password">.........</attribute>
    <attribute name="Configuration">
      <!-- A test configuration -->
     <configuration>
    <property name="mail.smtp.host" value="smtp.gmail.com">
    <property name="mail.smtp.port" value="465">
    <property name="mail.smtp.auth" value="true">
    <property name="mail.smtp.ssl.enable" value="true">
   </property></property></property></property></configuration>
    </attribute>
    <depends>jboss:service=Naming</depends>
  </mbean>

So hope it can be helpful any question i can give a hand 
```

# python - 如何防止 Python 的 unittest 模块找到它不应该找到的文件？

> ID：10215494
> 
> 赞同：0
> 
> 时间：2012-04-18T18:19:20.597
> 
> 标签：python, macos, unit-testing

我的代码在 Linux 服务器上运行。我从恰好是 Mac 的笔记本电脑上编辑代码。我使用 netatalk，以便可以轻松地将代码目录从笔记本电脑安装到服务器上。我最近开始使用 Pyramid 和 SQLalchemy，我想在我的开发实践中添加“单元测试”。

当我从笔记本电脑查看任何目录时，OS X / Netatalk 会创建一个 .AppleDouble 子目录。通常，这不是问题，我只是忽略 .AppleDouble 子目录。

当我访问运行测试的目录时，OS X / netatalk 添加 .AppleDouble 目录，在此目录中，我可以找到与父目录中存在的名称完全相同的文件。这是一个问题，因为 unittest 在它找到的所有目录中递归查找“test*.py”模式并尝试导入这些文件。.AppleDouble 目录中的任何文件（包含图标数据、桌面位置等）都失败了。

我知道一种选择是不使用 netatalk。如果可能的话，我想避免这种情况。

查看 unittest 中的代码（特别是 loader.py），似乎测试用例的发现发生在一个名为 discover() 的函数和一个相关的函数 _find_files() 中。

我正在寻找一些关于如何最好地覆盖 discover() 和 _find_files() 函数的想法。我没有很多重写 Python 库的经验，也没有看到任何明显的钩子。

如果重要的话，我正在使用 virtualenv 并且很确定如果我将 unittest 的副本放在 virtualenv 中，它将覆盖系统版本。这可能是一个好的开始，但我很想知道其他人认为什么是更好的解决方案，而不仅仅是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:34:18.623

你如何运行测试？如果您正在开发一个包，`setup.py`您可以使用 testsuite 参数告诉它在特定包（/文件夹）中查找测试。或者尝试将[nosetests](http://readthedocs.org/docs/nose/en/latest/)作为测试运行者。

另一种选择是自己加载测试，即：

```
import unittest

def runtest(testclass):
    suite = unittest.TestLoader().loadTestsFromTestCase(testclass)
    testResult = unittest.TextTestRunner(verbosity=2).run(suite) 
```

# perl - 找不到方法 Apache2::RequesUtil->request

> ID：10215500
> 
> 赞同：1
> 
> 时间：2012-04-18T18:19:45.207
> 
> 标签：perl, soap, apache2, mod-perl2

我对 SOAP::Lite 有一个小问题，当我尝试运行以下代码时，出现此错误（无法通过 b.pl 第 3 行的包“Apache2::RequesUtil”找到对象方法“request”）：

```
#!/usr/bin/perl
use SOAP::Transport::HTTP2;
Apache2::RequestUtil->request(); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:43:15.740

`use Apache2::RequestUtil ();`

# android - 在android中的文件中写入/读取简单值的最佳方法？

> ID：10215502
> 
> 赞同：0
> 
> 时间：2012-04-18T18:19:56.043
> 
> 标签：android, performance, file-io

好的，这就是我的问题：我正在制作一个接收短信的应用程序，并且可以对它们进行排序等等。一切正常，但我现在必须上课，这会导致手机在收到短信时振动、播放声音并点亮屏幕。您登录系统，因此不同的用户将有不同的方式希望应用程序在收到短信时进行通知。我正在创建一个类，该类在构造时会从文件中读取 3 个通知方法的用户设置作为整数，可以为这些整数保存新值，然后可以进行实际通知。我这样做是为了在构造对象时将用户名作为参数，然后从特定于他的文件中读取和写入设置。我的问题是这样的：从文件中保存和检索这些整数的最佳方法是什么？我知道 SharedPreferences，它很容易使用，但我能相信它吗？如果我关闭应用程序，关闭手机，然后重新启动一切，信息还在吗？我目前正在考虑制作一个具有 3 个公共 int 字段的小类，它实现 java.io.Serializable，然后将整个对象保存到一个文件中，这样在我需要它们时很容易获得特定的 int（键/值，就像 SharedPreferences 一样），但我读到这是一个相当缓慢的过程，并且由于该应用程序会收到很多消息（可能每分钟不止一次），因此每次接收时都必须从文件中读取可能会使应用程序有点重，因为电池寿命也很重要。所以这就是我的问题，我应该制作自己的读/写文件系统，

我选择了sharedpreferences，效果很好，谢谢！=)

要详细说明存储的整个性能，需要存储多少数据才能使 sqlite 数据库值得？因为所有这些短信都必须以某种方式存储，而且一次可能有数百条，这对于使用 sqlite 数据库是否足够？因为我在某处读到使用数据库比 io 方式慢一点，直到达到一定数量的数据？我希望数据库是值得的，因为它可能会让事情变得更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:38:32.990

SharedPreferences 对您保存数据是安全的。这是存储数据的推荐方法之一，请参阅[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

另一种方法，也是非常安全的，是使用具有用户名和这些整数的 Sql 表。只是几个值，这应该很容易实现。在同一链接中有关此的更多信息。

我看不出有任何理由避免使用这两种方法中的任何一种并使用文件系统。它们之前已经被使用过很多次，而且它们只是工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:34:50.180

SharedPreferences 应该非常适合您正在做的事情。我实现了将我需要的所有内容存储在首选项中，除了密码。永远不会丢失。

此外，SharedPreferences 也写入文件以及[SharedPreferences 文件](https://stackoverflow.com/questions/2566430/sharedpreferences-file)

除非您希望即使在用户删除应用程序后仍保留这些设置，否则它适合您的目的。

如果你坚持写一个文件，最好的方法可能是将它写为 xml 或 json。后者可能会快一点。然后在适当的时候加载这个文件。

尽管如此，您确实应该考虑很难选择通过 SharedPreferences 写入文件。是值得信赖的！如果您不信任它，请相信我以及其他编写 Android 及其应用程序的人。

# javascript - JQuery 1.7 中的 JSONP 错误

> ID：10215512
> 
> 赞同：4
> 
> 时间：2012-04-18T18:20:41.550
> 
> 标签：javascript, jquery, cross-domain, jsonp

**注意**：我已经检查了其他答案，包括[这个问题 re: a pre-jQuery 1.5 JSONP error issue that now has been resolved](https://stackoverflow.com/questions/309953/how-do-i-catch-jquery-getjson-or-ajax-with-datatype-set-to-jsonp-error-w)。我正在使用 JQuery 1.7，我相信它不会受到这个问题的影响。

从[JQuery 1.5开始**，JSONP 可以使用正确的错误函数**](http://api.jquery.com/jQuery.getJSON/)（参见“jqXHR 对象”）。但是错误功能似乎没有被触发。

```
$.getJSON(url, function(response) { 
    console.log(response)   
}).error( function() { console.log('Error occurred.') } ) 
```

查看 Chrome 开发工具，JSONP 请求会生成以下错误：

```
GET https://twitter.com/status/user_timeline/somepretendusername.json?count=2&callback=jQuery171005595548846758902_1334772179012&_=1334772179132 400 (Bad Request) 
```

但是 .error() 回调似乎根本没有运行。使用 JSONP 进行正确的错误处理需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:26:15.063

错误功能仅在请求出现错误时触发。正在发出请求，但如果用户名不存在，Twitter 会返回 400。我尝试使用假用户名并得到与您相同的响应，但后来我使用了我的用户名，它就像一个冠军一样工作。

[编辑] 我看到您只是在询问如何使用 JSONP 处理错误。无论出于何种原因，jQuery 似乎都没有对此进行良好的错误处理。我确实找到了一个承诺对 JSONP 进行实际错误处理的插件。[在这里](http://code.google.com/p/jquery-jsonp/)查看。

[edit2]检查一下，它有效！

```
$(document).ready(function() {
    var url = 'https://twitter.com/status/user_timeline/thisisnotarealtwitterhandle.json?count=2&callback=?';
    var jqxhr = $.jsonp({
        url: url,
        success: function(response) {
            console.log(response)
        }
    }).fail(function() { console.log('error'); });
}); 
```

# itext - 在 iText 中水平添加带有 MultiColumnText 的 PdfPTable

> ID：10215513
> 
> 赞同：0
> 
> 时间：2012-04-18T18:20:49.397
> 
> 标签：itext

我有一个使用 iText 生成的 pdf 报告，其中包含添加到 MultiColumnText 的 PdfPTable，有时会变得如此之大，以至于它会被拆分为多个页面。

目前 MultiColumnText 已被分为两列，MultiColumnText 垂直填充 PdfPTable 就像：

第 1 页
+--+--+
|T1|T5|
+--+--+
|T2|T6|
+--+--+
|T3|T7|
+--+--+
|T4|T8|
+--+--+

第 2 页
+---+---+
|T9 |T13|
+---+---+
|T10|T14|
+---+---+
|T11|T15|
+---+---+
|T12|T16|
+---+---+

....我想做这个：

第 1 页
+--+--+
|T1|T2|
+--+--+
|T3|T4|
+--+--+
|T5|T6|
+--+--+
|T7|T8|
+--+--+

第 2 页
+---+---+
|T9 |T10|
+---+---+
|T11|T12|
+---+---+
|T13|T14|
+---+---+
|T15|T16|
+---+---+

代码是：

```
/**
 * Initializes the fonts and collections.
 * Creates a PDF document.
 * 
 * @param from as a Date
 * @param to as a Date
 * @param weeklyComplianceMap as a Map for print weekly compliance
 * @param monthlyComplianceMap as a Map for print monthly compliance
 * @param calLogList as a List for calculate the add event
 * @param locale Locale in case you want to create a Calendar in another language
 * @throws DocumentException, IOException, ParseException
 * @return ByteArrayOutputStream of PDF output
 */
public ByteArrayOutputStream createPdf(Date from, Date to, Map<String, Integer> weeklyComplianceMap,
        Map<String, Double> monthlyComplianceMap, List<InjectionLogInfo> calLogList, Locale locale) 
        throws DocumentException, ParseException, IOException {

    calendar = new GregorianCalendar();
    calendar.setTime(from);

    BaseFont bf_normal = BaseFont.createFont(
            "C:/Windows/Fonts/arial.ttf", BaseFont.WINANSI,
            BaseFont.EMBEDDED);
    small = new Font(bf_normal, 8);
    normal = new Font(bf_normal, 11);
    BaseFont bf_bold = BaseFont.createFont(
            "C:/Windows/Fonts/arialbd.ttf", BaseFont.WINANSI,
            BaseFont.EMBEDDED);
    smallBold = new Font(bf_bold, 10);
    normalBold = new Font(bf_bold, 12);
    bigBold = new Font(bf_bold, 14);

    document = new Document(PageSize.A4, 20, 20, 40, 30);
    baos = new ByteArrayOutputStream();
    writer = PdfWriter.getInstance(document, baos);

    ResourceBundle rb = ResourceBundle.getBundle("com.resources.messages", locale);

    Paragraph hText = new Paragraph(rb.getString("lbl.calendar.view"), bigBold);
    hText.setAlignment(Element.ALIGN_CENTER);

    Chunk c1 = new Chunk(rb.getString("lbl.document.generated") + " ", normal);
    Chunk c2 = new Chunk(fdf.format(new Date()), normal);
    Chunk c3 = new Chunk(" " + rb.getString("lbl.at") + " ", normal);
    Chunk c4 = new Chunk(tdf.format(new Date()), normal);
    Chunk c5 = new Chunk(new VerticalPositionMark(), 500f, false);
    Chunk c6 = new Chunk(rb.getString("lbl.page") + " ", normal);

    Phrase fText = new Phrase();
    fText.add(c1);fText.add(c2);fText.add(c3);
    fText.add(c4);fText.add(c5);fText.add(c6);

    HeaderFooter header = new HeaderFooter(hText, false);
    HeaderFooter footer = new HeaderFooter(fText, true);
    document.setHeader(header);
    document.setFooter(footer);

    document.open();
    document.leftMargin();

    mct = new MultiColumnText();
    mct.addRegularColumns(document.left(), document.right(), 20, 2);
    mct.setRunDirection(PdfWriter.RUN_DIRECTION_LTR);

    for (int month = 0; month < monthsBetween(from, to, Calendar.MONTH); month++) {
        // create a table with 8 columns
        float[] colsWidth = {35f, 35f, 35f, 35f, 35f, 35f, 35f, 50f};
        table = new PdfPTable(colsWidth);
        table.setWidthPercentage(100);

        // add the name of the month
        table.getDefaultCell().setBackgroundColor(Color.WHITE);
        table.addCell(getMonthCell(calendar, locale));

        Double monAdh = monthlyComplianceMap.get(mdf.format(calendar.getTime()));           
        table.addCell(getMonthlyAdherence(monAdherence));

        // add the name of the days
        String[] days = getDayNames();
        for (String day : days) {
            table.addCell(getDayNamesCell(day, locale));
        }

        int day = 1;
        int position = 2;
        int dayofWeek = calendar.get(Calendar.DAY_OF_WEEK);
        int daysinMonth = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);

        // add empty cells
        int rc = 0;
        while (position != dayofWeek) {
            rc++;
            position = (position % 7) + 1;
            table.addCell("");
        }

        // add cells for each day
        while (day <= daysinMonth) {                
            calendar = new GregorianCalendar(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), day++);
            table.addCell(getDayCell(calLogList, calendar, locale));

            if (calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
                rc++;
                String week = (calendar.get(Calendar.WEEK_OF_YEAR)-1) + ", " + calendar.get(Calendar.YEAR);

                if (null != weeklyComplianceMap) {
                    wa = weeklyComplianceMap.get(week);
                    table.addCell(getDayAdherenceCell(weekAdherence));
                } else {
                    String weekAdherence = "0%";
                    table.addCell(getDayAdherenceCell(weekAdherence));
                }
            }
        }

        if (9 < rc)
            table.setSpacingAfter(20);
        else
            table.setSpacingAfter(40);

        // complete the table
        table.completeRow();

        // add the table to MultiColumnText object
        mct.addElement(table);

        // increment the day by 1
        calendar.add(Calendar.DATE, 1);
    }
    document.add(mct);
    document.newPage();

    document.close();

    return baos;
}

/**
 * Creates a PdfPCell with the name of the month
 * 
 * @param calendar a date
 * @param locale a locale
 * @return a PdfPCell with rowspan 7, containing the name of the month
 */
public PdfPCell getMonthCell(Calendar calendar, Locale locale) {
    PdfPCell cell = new PdfPCell();
    cell.setColspan(7);
    cell.setMinimumHeight(30);
    cell.setBackgroundColor(Color.GRAY);

    Paragraph p = new Paragraph(String.format(locale, "%1$tB %1$tY", calendar), normalBold);
    p.setAlignment(Element.ALIGN_LEFT);
    cell.addElement(p);
    return cell;
}

/**
 * Creates a PdfPCell for a month
 * 
 * @param string adherence of a month
 * @return a PdfPCell
 */
private PdfPCell getMonthlyAdherence(String adherence) {
    PdfPCell cell = new PdfPCell();
    cell.setMinimumHeight(35);
    //cell.setBorderColorLeft(Color.GRAY);
    cell.setBackgroundColor(Color.GRAY);

    Paragraph p = new Paragraph(adherence, smallBold);
    p.setAlignment(Element.ALIGN_RIGHT);
    cell.addElement(p);
    return cell;
}

/**
 * Creates a PdfPCell with the name of the day
 * 
 * @param day name of a day
 * @param locale a locale
 * @return a PdfPCell, containing the name of the day
 */
public PdfPCell getDayNamesCell(String day, Locale locale) {
    PdfPCell cell = new PdfPCell();
    cell.setPadding(3);
    cell.setBackgroundColor(Color.LIGHT_GRAY);

    Paragraph p = new Paragraph(day, smallBold);
    p.setAlignment(Element.ALIGN_CENTER);
    cell.addElement(p);
    return cell;
}

/**
 * Creates a PdfPCell for a specific day
 * 
 * @param calendar a date
 * @param locale a locale
 * @return a PdfPCell
 */
public PdfPCell getDayCell(List<InjectionLogInfo> calLogList, Calendar calendar, Locale locale) {
    PdfPCell cell = new PdfPCell();
    cell.setPadding(3);

    // set the content in the language of the locale
    Chunk chunk = new Chunk(String.format(locale, "%1$te", calendar), small);

    // a paragraph with the day
    Paragraph p = new Paragraph(chunk);
    p.setAlignment(Element.ALIGN_CENTER);
    cell.addElement(p);
    return cell;
}

/**
 * Creates a PdfPCell for a week
 * 
 * @param string adherence of a week
 * @return a PdfPCell
 */
public PdfPCell getDayAdherenceCell(String adherence) {
    PdfPCell cell = new PdfPCell();
    cell.setPadding(3);

    // set the adherence for each week
    Chunk chunk = new Chunk(adherence, small);

    // a paragraph with the adherence
    Paragraph p = new Paragraph(chunk);
    p.setAlignment(Element.ALIGN_CENTER);
    cell.addElement(p);
    return cell;
}

/**
 * Retrieves a Day Names for a single week
 * 
 * @return a String array of day names
 */
public String[] getDayNames() {
    DateFormatSymbols symbols = new DateFormatSymbols();
    String[] dayNames = symbols.getShortWeekdays();

    List<String> stringList = new ArrayList<String>();

    for (String string : dayNames) {
        if (string != null && string.length() > 0) {
            stringList.add(string);
        }
    }

    if (stringList.size() > 0) {
        String one = stringList.get(0);
        stringList.remove(0);
        stringList.add(one);
        stringList.add("%");
    }

    dayNames = stringList.toArray(new String[stringList.size()]);
    return dayNames;
} 
```

我坚持这一点，所以非常感谢任何帮助。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:21:11.287

我认为您正在使用`new PdfPtable(1)`每个 MultiColumnText。将其更改为`new PdfPtable(2)`每 1 个 MultiColumnText 获得 2 个列表。

# asp.net - ASP.Net Web API - 授权标头空白

> ID：10215515
> 
> 赞同：7
> 
> 时间：2012-04-18T18:20:56.260
> 
> 标签：asp.net, asp.net-mvc-4, rest, asp.net-web-api

我不得不使用 .NET（最初用 Ruby 编写）重写现有的 REST API。从客户端的角度来看，它必须以与旧 API 完全相同的方式工作 - 即客户端代码不需要更改。当前的 API 需要基本身份验证。因此，要调用旧 API，以下内容可以完美运行：-

```
 var wc = new System.Net.WebClient();
        var myCache = new CredentialCache();
        myCache.Add(new Uri(url), "Basic", new NetworkCredential("XXX", "XXX"));
        wc.Credentials = myCache;
        var returnBytes = wc.DownloadData("http://xxxx"); 
```

（出于安全原因，我不得不省略真实的 URL/用户名/密码等）。

现在我正在使用带有 MVC4 的 ASP.Net Web API 编写新的 API。我有一个奇怪的问题，找不到其他人有完全相同的问题。为了支持基本身份验证，我遵循了这里的指南：

[http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/](http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/)

有一件事，我将代码放在 Application_Start() 事件的 Global.asax.cs 文件中的“处理程序中”（没有解释，所以我猜想）。

无论如何，如果我使用上面的代码调用我的 API（我已经在 IIS 中部署），Authorization 标头始终为空，并且上面的失败并显示 401 Unauthorized。但是，如果我使用此代码手动设置标头，它工作正常 - 即授权标头现在存在并且我能够验证用户。

```
 private void SetBasicAuthHeader(WebClient request, String userName, String userPassword)
    {
        string authInfo = userName + ":" + userPassword;
        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
        request.Headers["Authorization"] = "Basic " + authInfo;
    }
   .......
    var wc = new System.Net.WebClient();
    SetBasicAuthHeader(request, "XXXX", "XXXX");
    var returnBytes = wc.DownloadData("http://xxxx"); 
```

虽然这可行，但对我没有好处，因为现有 API 的现有用户不会手动设置标头。

阅读基本身份验证的工作原理，初始请求是匿名的，然后客户端返回 401，然后客户端再次尝试。但是，如果我在代码中设置断点，它将永远不会在 Antony 的示例中再次命中代码。我期待我的断点被击中两次。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T00:22:15.863

你期待正确的行为。System.Net.WebClient 不会在初始请求时自动包含授权标头。它仅在受到响应正确挑战时才发送它们，据我所知，响应是 401 状态代码*和*正确的 WWW-Authenticate 标头。请参阅[此处](http://www.hashemian.com/blog/2007/06/http-authorization-and-net-webrequest-webclient-classes.htm)和[此处](http://msdn.microsoft.com/en-us/library/aa479391.aspx)了解更多信息。

我假设您的基本身份验证处理程序没有返回 WWW-Authenticate 标头，因此 WebClient 甚至从未尝试在第二个请求中发送凭据。您应该可以在 Fiddler 或类似工具中观看此内容。

如果你的处理程序做了这样的事情，你应该见证 WebClient 方法的工作：

```
//if is not authenticated or Authorization header is null
return base.SendAsync(request, cancellationToken).ContinueWith(task =>
    {
        var response = task.Result;
        response.StatusCode = HttpStatusCode.Unauthorized;
        response.Headers.Add("WWW-Authenticate", "Basic realm=\"www.whatever.com\"");
        return response;
    });

//else (is authenticated)
return base.SendAsync(request, cancellationToken); 
```

正如您所注意到的，如果您在每个请求中都包含 Authorization 标头（就像您在替代方法中所做的那样），那么您的处理程序已经按原样工作。所以它可能就足够了——它只是不适用于以相同方式运行的 WebClient 和其他客户端。

# ruby-on-rails - 在带有关联的rails控制台中创建模型？

> ID：10215516
> 
> 赞同：3
> 
> 时间：2012-04-18T18:20:58.623
> 
> 标签：ruby-on-rails, ruby

我目前有 2 个模型设置：

```
class Topic < ActiveRecord::Base
  belongs_to :category
end

class Category < ActiveRecord::Base
  has_many :topics
end 
```

我现在正在尝试创建一个与 rails 控制台中关联的类别的主题：

```
t = Topic.new :name => "Test", :category => Category.find(1) 
```

问题是模型有 category_id，所以我需要使用：

```
c = Category.find(1)
t = Topic.new :name => "Test", :category_id => c.id 
```

但是，我已经多次看到简单地使用 :category 而不是 :category_id 并传入类别对象而不是对象 id 的能力。我哪里错了？

当我做：

```
c = Category.find(1)
t = Topic.new :name => "Test", :category => c 
```

我收到：

```
ActiveRecord::UnknownAttributeError: unknown attribute: category 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T18:28:45.360

你应该能够做到这一点：

```
c = Category.find(1)
t = Topic.new :name => "Test", :category => c 
```

模型上的关联定义使您可以执行此操作。

有趣的是，您可以使用 :category_id 并且仍然只是传入对象，它会为您获取 ID：

```
t = Topic.new :name => "Test", :category_id => c 
```

另一种方法可以更好地做到这一点：

```
t = c.topics.build(:name => "Test") # Builds an object without saving

t = c.topics.create(:name => "Test") # Builds an object and saves it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-14T17:58:12.997

这是对我有用的 MRE

```
u = User.first

Trainer.create(name: "John", user: u) 
```

请注意，Trainer 模型中没有“用户”列，只有 user_id，但是当我们`.create`在 Trainer 中记录时，我们仍然使用`user`（rails 知道将该用户的 id 放入`user_id`）

# c# - 尝试使用 C# ftpwebrequest 将 xml 文件 ftp 到 Zebra 打印机时出错

> ID：10215519
> 
> 赞同：2
> 
> 时间：2012-04-18T18:21:06.040
> 
> 标签：c#, visual-studio-2010, ftp, ftpwebrequest

我使用 ZebraDesigner for xml ver2.0 为 Zebra 170PAX4 打印机创建了一些标签模板。我已成功将 zpl 导出到 Zebra，我可以在 Windows 命令提示符中使用 ftp 编辑 xml 文件并将其发送到 Zebra，如下所示：`c:\ftp 10.161.41.212 Connected to 10.161.41.212. 220 ZBR-46688 Version 1.01.7 ready. User (10.161.41.212:(none)): 230 User logged in. ftp> put c:SPver1_1.xml 200 PORT command successful. 150 Opening ASCII mode data connection for SPver1_1.xml. 226 Transfer complete. ftp: 324 bytes sent in 0.00Seconds 324000.00Kbytes/sec`

现在，我正在尝试使用 MS VS2010 和 C# 从 WinForms 应用程序自动执行此操作。但是由于某种原因，我似乎没有尝试使用 FtpWebRequest 类，我也收到一个错误

> 远程服务器返回错误：(502) 命令未执行。

据我了解，ftp 方法 UploadFile 与 STOR 相同，与别名 put 相同。我正在使用的代码如下所示：

```
public bool PutXmlFile(CZebraPrinter printer, CDeviceContainer devices)
    {
        bool OK = true;
        CDevice currDevice = new CDevice();
        currDevice = devices.GetDevice(this.m_devName);
        string ftpHost = "ftp://" + printer.m_IPAddress + "/";
        string ftpPath = "E:";
        Uri printerUri = new Uri(ftpHost + ftpPath);

        try
        {
            FtpWebRequest ftpRequest = (FtpWebRequest)WebRequest.Create(printerUri);
            ftpRequest.Method = WebRequestMethods.Ftp.UploadFile;
            ftpRequest.KeepAlive = false;
            ftpRequest.UseBinary = false;
            ftpRequest.UsePassive = false;
            ftpRequest.Timeout = 5000;  //milliseconds

            // The Zebra printer uses anonymous login
            ftpRequest.Credentials = new NetworkCredential("anonymous", "");

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader(currDevice.m_defaultDataFile);
            byte[] fileContents = Encoding.ASCII.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();

            Stream requestStream = ftpRequest.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)ftpRequest.GetResponse();
            //Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);
            //Check response
            response.Close();
        }
        catch (Exception ex)
        {
            string errMessage = string.Format("An error occured trying to ftp the device xml file to the Zebra printer.  \n\nReason:\n{0}", ex.Message);
            MessageBox.Show(errMessage, m_mfgInfoErr, MessageBoxButtons.OK, MessageBoxIcon.Error);
            return !OK;
        }
        return OK;
    } 
```

有谁看到我可能做错了什么。任何想法，将不胜感激。谢谢。

我运行了 TRACE，这是输出：

```
System.Net Information: 0 : [4780] FtpWebRequest#14993092::.ctor(ftp://10.161.41.212/E:)
System.Net Verbose: 0 : [4780] Exiting WebRequest::Create()     -> FtpWebRequest#14993092
System.Net Verbose: 0 : [4780] FtpWebRequest#14993092::GetRequestStream()
System.Net Information: 0 : [4780] FtpWebRequest#14993092::GetRequestStream(Method=STOR.)
System.Net Information: 0 : [4780] Associating FtpWebRequest#14993092 with FtpControlStream#720107
System.Net Information: 0 : [4780] FtpControlStream#720107 - Received response [220 ZBR-46688 Version 1.01.7 ready.]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Sending command [USER anonymous]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Received response [230 User logged in.]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Sending command [OPTS utf8 on]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Received response [502 Command 'OPTS' not implemented.]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Sending command [PWD]
System.Net Information: 0 : [4780] FtpControlStream#720107 - Received response [502 Command 'PWD' not implemented.]
System.Net Information: 0 : [4780] FtpWebRequest#14993092::(Releasing FTP connection#720107.)
System.Net Error: 0 : [4780] Exception in the FtpWebRequest#14993092::GetRequestStream - The remote server returned an error: (502) Command not implemented. 
```

所以看起来**OPTS**和**PWD**是问题所在。有什么方法可以控制 FtpWebRequest 发送的内容还是我需要第 3 方库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:39:35.823

UploadFile 使用 STOR 命令，但在发送此命令之前，.NET 有时会发送其他命令，例如“OPTS utf8 on”或“TYPE I”等。如果您为应用程序创建具有以下内容的配置文件：

```
<?xml version="1.0"?>
<configuration>
  <system.diagnostics>
    <sharedListeners>
      <add name="console" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\logfile.txt" />
    </sharedListeners>
    <sources>
      <source name="System.Net" switchName="sourceSwitch">
        <listeners>
          <add name="console" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="sourceSwitch" value="Verbose"/>
    </switches>
  </system.diagnostics>
</configuration> 
```

所有命令和响应都将记录在文件中，因此您可以查看是哪一个导致了问题。

**更新：** 所以问题是，在发出 STOR 命令之前，FTP 客户端发送 OPTS 和 PWD 命令，您的打印机不理解这些命令，可能是因为它是非常轻量级的 FTP 服务器。不幸的是，我不知道如何防止发送这些命令。我只有两个解决方法：

*   找到一些第三方 FTP 库，它不会发送那些有问题的命令。
*   由于从命令行上传文件有效，请使用适当的“put”命令创建文件（commands.txt），然后从您的程序开始 FTP 传输，如下所示：

`Process.Start("ftp", "-A -s:commands.txt " + printer.m_IPAddress);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-18T05:07:41.127

我知道这个问题已经有一年多了，但其他人可能会觉得这很有用。如果您的目标是将 ZPL 代码或 XML 文件发送到您的打印机，则您不受 ftp 协议的约束。我通过 TCP/IP 套接字发送我的代码。这是我使用的：

```
public void SendCode(string ipAddress, string zplCode)
    {
        Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        clientSocket.NoDelay = true;

        IPAddress ip = IPAddress.Parse(ipAdress);
        IPEndPoint ipep = new IPEndPoint(ip, 9100);
        clientSocket.Connect(ipep);

        byte[] stringBytes = Encoding.UTF8.GetBytes(zplCode);

        clientSocket.Send(stringBytes);
        clientSocket.Close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T12:33:24.573

在`ftpRequest`（FtpWebRequest）创建的时候，我们有一个属性EnableSsl。如果在 FTP 站点中禁用 SSL，则需要将此标志设置为 false，否则需要将此标志设置为 true。

```
ftpRequest.EnableSsl = true; 
```

这必须在打开`StreamReader`.

# c# - 使用 Visual Studio 2010 远程调试 C# .dll - 获取 .PDB 文件不匹配 - 任何但它绝对是来自构建

> ID：10215521
> 
> 赞同：5
> 
> 时间：2012-04-18T18:21:07.427
> 
> 标签：c#, debugging, settings, pdb

使用 Visual Studio 2010 远程调试 C# .dll - 获取 .PDB 文件不匹配 - 任何但它绝对是来自构建......

新信息：[[此问题未解决。我有三台计算机：a)XP sp3、b)XP sp3 和 c)Vista sp1，我可以在 a) 和 c) 上构建最简单的测试程序，并使用模块窗口 -- 选择我的 test5.exe 并加载创建时创建的 .pdb - 同一日期同一时间同一文件夹......但 Visual Studio 说“在此文件夹中找不到匹配的符号文件” - 加载正确 .pdb 的所有努力都因不匹配而失败投诉......无论是：a）远程到b）或c）-或-c）远程到a）或b）---帮助！]]

我已经隐式和显式地设置了 .PDB 的位置 - 没关系....

我已将符号设置设置为取消选中源文件必须完全匹配....

我没有看到任何错误....

只是：

* * *

```
C:\POSWIN\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\obj\Debug\DBS.KGW.tst7.pdb: PDB does not match image.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\symbols\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\DBS.KGW.tst7.pdb: PDB does not match image.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\MicrosoftPublicSymbols\symbols\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\MicrosoftPublicSymbols\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\Projects\SP\DBS.KGW.tst7STUB\DBS.KGW.tst7\bin\Debug\MicrosoftPublicSymbols\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\WINDOWS\symbols\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\WINDOWS\DLL\DBS.KGW.tst7.pdb: Cannot find or open the PDB file.
C:\WINDOWS\DBS.KGW.tst7.pdb: Cannot find or open the PDB file. 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:35:44.640

几个建议：

*   在 Visual Studio 中，当您附加到进程时，打开模块调试窗口，`Ctrl+D`（`M`或`Debug`-> `Windows`->`Modules`从菜单中）并找到导致问题的 dll。右键单击它并选择`Load Symbols From`然后`Symbol Path`找到正确的 pdb 文件并查看它是否加载。
*   如果您的应用程序是 asp.net，那么您可以尝试清除临时文件夹，因为它有时会导致类似于您的问题。该文件夹应位于如下位置：

    `bootdrive:\%windir%\Microsoft.NET\Framework\v2.0.5 0727\Temporary ASP.NET`

取决于您的 .net 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:19:13.627

我遇到了同样的问题，解决方案非常简单......

就我而言，我有两个 VS 解决方案，第一个是带有 .exe 的主应用程序，第二个是 .dll 插件项目。当我尝试调试一个 dll 项目时，我得到一个 pdb 不匹配错误（在模块窗口中）。原因是 pdb 实际上根本不匹配，因为：

当我测试第一个解决方案时，我将 .dll 文件从第二个解决方案复制到带有 .exe 文件的调试文件夹。
然后，当我尝试调试第二个（.dll）解决方案时，它使用了第一个解决方案中的 .exe 文件以及该目录中的 .dll 文件，但是该 .dll 已过时并且与新的 pdb 文件不匹配。因此，将新的 .dll 文件从第二个项目复制到 .exe 目录解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:20:24.147

解决办法是，对于远程调试连接，有两种连接方式，授权的和未授权的……对于防火墙问题，我默认是未授权的。对于 VS 2010 C# 解决方案，投诉仅仅是 .PDB 不匹配。用尽了我能想到的所有选项后，我用 C++ 复制了我的简单测试解决方案，界面不同且更好，并且在您设置它时会发出警告，除非您处于授权连接上，否则您将不会获得符号！ ！-- 一旦我克服了防火墙问题 -- 并通过与正在调试的远程 PC 的授权连接查看我的符号，我将发布该确认信息......顺便说一句，通常会在您登录时收到警告通过授权连接，主机和被调试计算机的用户 ID 和密码必须相同，

# javascript - HTML 画布不起作用

> ID：10215523
> 
> 赞同：-1
> 
> 时间：2012-04-18T18:21:14.583
> 
> 标签：javascript, html, canvas, drawing

我正在研究显示几个航点的地图。现在它们应该用一个简单的笔划连接以显示我尝试使用标签的路径。

画布已设置好，绘制发生在 javascript 中，该 javascript 评估绘制位置的位置并描边路径。问题是画布没有显示，但脚本中调用的所有函数都正确编写和调用。

html代码如下：

```
<body>
    <div id="controller">
        <div id="zeichenfenster">
            <span id="maps"></span>
            <span id="objects"></span>
            <canvas id="canvas" height="1000px" width="2000px"></canvas>
        </div>
    </div>
</body> 
```

...这是javascript：

```
function connectDrawables(drawable1, drawable2, id) {

    connections[id] = "" + drawable1 + "|" + drawable2;

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, 2000, 1000);
    ctx.lineWidth = 5.0;
    ctx.lineCap = "round";
    ctx.strokeStyle = "#FFFFFF";

    for(var k in connections) {

            var string = connections[k];
            var sub = string.split("|");

            var element1 = document.getElementById(sub[0]);
            var element2 = document.getElementById(sub[1]);

            var x1 = 0.0 + parseFloat((element1.style.marginLeft).replace("px", "")) + 8;
            var y1 = 0.0 + parseFloat((element1.style.marginTop).replace("px", "")) + 7;
            var x2 = 0.0 + parseFloat((element2.style.marginLeft).replace("px", "")) + 5;
            var y2 = 0.0 + parseFloat((element2.style.marginTop).replace("px", "")) + 4;                
            //alert("ID: " + id + "\nElement1: " + drawable1 + " x1: " + x1 + " y1: " + y1 + "\nElement2: " + drawable2 + " x2: " + x2 + " y2: " + y2);

            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

    }

} 
```

drawable1 和 2 是航点的 id，connections 是一个关联数组，id 是唯一的 id。

如果我将画布放在其他标签“上方”的 html 代码中，则只有一个很大的空白区域，但绘图也不起作用。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:24:50.403

最后“ctx.closePath()”呢？

```
 ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.stroke();
        ctx.closePath(); 
```

# objective-c - Xcode 4：如何在两个不同的类中使用 int？

> ID：10215526
> 
> 赞同：0
> 
> 时间：2012-04-18T18:21:34.060
> 
> 标签：objective-c, ios, sdk, uitabbarcontroller, xcode4.2

首先对不起我的英语。

我正在创建一个应用程序来计算您在按钮内触摸的次数。该应用程序由 UITabBarController 划分：在第一个视图（类：ViewController）中有一个按钮和一个显示“int”值的标签（int counter;），问题是我想设置一个最大数量，因此当您触摸按钮 50 次时，会出现一个 alertView。我想让这个最大数量灵活，以便您可以通过 tabBar 的第二个视图中的滑块调整它。

这是代码：

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    int counter;
    IBOutlet UILabel *counterLabel;
}

-(IBAction)counter:(id)sender;
-(IBAction)Reset:(id)sender;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@implementation ViewController

-(IBAction)counter:(id)sender{
    if (counter < end)  // in spite of end, I want to put Max (declared in AjustesView.h)
    {
        counter = counter+1;
        counterLabel.text = [NSString stringWithFormat:@"%i", Jugador1];

    }else
    {
        UIAlertView *alerta = [[UIAlertView alloc] initWithTitle:@"Alerta!" message:@"Ha llegado a 100 cliks" delegate:self cancelButtonTitle:@"Aceptar" otherButtonTitles:nil, nil];
        [alerta show];
        [alerta release];
    }
}

-(IBAction)Reset:(id)sender{
    counter = 0;
    counterLabel.text = [NSString stringWithFormat:@"%i", counter];
} 
```

**调整视图.h**

```
 @interface AjustesView : UIViewController{
    IBOutlet UISlider *maxSlider;
    IBOutlet UILabel *maxLabel;
    int max;
}

@property (nonatomic, retain) IBOutlet UISlider *maxSlider;

-(IBAction)AdjustmentOfMaximum:(id)sender;

@end 
```

**AjustesView.m**

```
#import "AjustesView.h"

@implementation AjustesView

@synthesize maxSlider;

-(IBAction)AdjustmentOfMaximum:(id)sender{
    max = self.maxSlider.value;
    maxLabel.text = [NSString stringWithFormat:@"%i", max];
} 
```

IB 文件是 .xib 而不是情节提要 感谢您抽出宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:28:34.613

您可以做的一件事是将 int 值存储在应用程序的 AppDelegate 中，并将其合成为属性。每当您想更新或获取值时，您只需要像这样从 AppDelegate 获取值

```
#include "AppDelegate.h"

..

//whenever you want to access the value or update the value
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
appDelegate.myCounter = newvalue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:29:56.100

听起来您想要一个用户定义的首选项。为此，使用`NSUserDefaults`

使用以下方法设置并从中获取整数`NSUserDefaults`。

```
-(void)setInt:(int)myInt{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    //To set a value
    [prefs setInteger:myInt ForKey:@"myInt"];
    [prefs syncronize];
}

-(int)getInt{
//to get a value
    return [[NSUserDefaults standardUserDefaults] integerForKey:@"myInt"];
} 
```

[这是 Apple NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

# visual-studio - 设计模式下的即时窗口

> ID：10215528
> 
> 赞同：8
> 
> 时间：2012-04-18T18:21:39.700
> 
> 标签：visual-studio, immediate-window

根据微软的说法：“即时窗口**在设计时**用于调试和评估表达式、执行语句、打印变量值等等。”

注意它说“在设计时”。我也已经阅读了网络上的其他声明。

但是，当有人问他们为什么会得到“在设计模式下无法评估表达式”时。错误，每个人总是说它只能在调试模式下工作。

我可以理解当它们引用文本框框值等项目时，有些东西在设计模式下不起作用。但是我真的不明白为什么我必须设置一个断点，运行我的应用程序，然后等待它到达断点，只是为了找出是什么`1 + 1`。

我承认因为我来自 Visual Basic 6.0 而感到沮丧。在那里我可以在设计模式下打印`1 + 1`和获取。`2`我还可以在设计模式下调用公共函数并获得答案。

所有这些都来自我寻找类型转换的答案。因为我在网上找不到答案，所以我决定最快和最简单的方法是在即时窗口中测试一些语句 REAL QUICK 看看哪个有效。

使用即时窗口时.NET 是不是倒退了一步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-23T08:10:24.160

我理解你的沮丧。幸运的是，Roslyn（微软的开源 C# 编译器）的开发允许在 Visual Studio 中拥有所谓的“交互式 Windows”。您需要安装 Roslyn，经过一些简单的设置步骤后，您可以在该窗口中评估 C# 表达式： [https ://github.com/dotnet/roslyn/wiki/Interactive-Window](https://github.com/dotnet/roslyn/wiki/Interactive-Window)

它与即时窗口非常不同，因为 REPL 循环可以在一定程度上被隔离，但似乎您甚至可以在某种程度上与您的项目进行交互：[C# 交互窗口可以与我的代码交互吗？](https://stackoverflow.com/questions/11135571/can-the-c-sharp-interactive-window-interact-with-my-code)

这甚至可以追溯到 2011-2012 年，它是自 2015 年底以来 Visual Studio 2015 CTP1 的默认部分：`View -> Other Windows -> C# Interactive`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T16:23:07.220

简而言之，这取决于您的应用程序的上下文，即您当前在解决方案资源管理器中选择了哪个解决方案及其项目类型。例如，Web 项目不会在设计时评估即时表达式，因为它需要设置该环境，但是，库和控制台类型的项目会。

[MSDN 状态：](https://msdn.microsoft.com/en-us/library/f177hahy.aspx)

> “在为设计时表达式评估建立上下文时，Visual Studio 会引用解决方案资源管理器中当前选择的项目。如果在解决方案资源管理器中未选择任何项目，Visual Studio 会尝试针对启动项目评估该函数。如果无法在当前上下文，您将收到一条错误消息。如果您尝试在不是解决方案启动项目的项目中评估函数并且收到错误消息，请尝试在解决方案资源管理器中选择该项目并再次尝试评估。 "

但是，如果您在一个 Web 项目中，则需要打断点才能在即时窗口中计算表达式。

[这可能包含在其他答案中](https://stackoverflow.com/questions/5867344/immediate-window-the-expression-cannot-be-evaluated)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:33:38.370

对我来说，我可以做你在 Visual Studio 2008 的即时窗口中提到的任何事情，比如找出 1+1 的总和或找出“sdfd”的长度。长度等可以从即时窗口完成。所以这不是.NET 的倒退。

# ios - 没有可用的身份 - 管理员请求

> ID：10215530
> 
> 赞同：111
> 
> 时间：2012-04-18T18:21:59.253
> 
> 标签：ios, iphone, xcode, certificate

我在“归档”我的应用程序时遇到了问题。我认为由于 iPhone 更新到 5.1 和 XCode 更新到 4.2.2，配置文件无效。

我现在花了 4 个多小时来解决认证问题，同时逐步使用此线程 3 次（这会花费大量时间）：

[获取“在您的钥匙串中找不到与此配置文件匹配的有效签名身份”警告](https://stackoverflow.com/questions/2714517/a-valid-signing-identity-matching-this-profile-could-not-be-found-in-your-ke)

我仍然有以下错误： ![XCode 认证错误](../Images/bdf4bb202eecce8b5722ed1f48b3413f.png)

没有可用的身份 管理员必须在下载身份之前请求身份。

处理几秒钟后，“下载身份”按钮返回此窗口。

你知道如何摆脱认证文件的困境并解决这个问题吗？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-06-27T16:00:44.270

1.  访问[会员中心](https://developer.apple.com/membercenter/index.action)

2.  转到**“iOS 配置门户”** -> **“证书”**（左侧边栏）>> **“分发”**选项卡

3.  选中**“Provisioning Profiles”**字段。如果为空，则下一个 (4)

4.  转到**“配置”**（左侧栏）-> **“分发”**选项卡。按“新配置文件”并完成它。返回 (3) 再次检查该字段。

5.  下载并**“运行”**（双击）新的配置文件。

6.  在项目的构建设置中选择新的配置文件（它可能与旧的同名）

7.  在您的项目的构建设置中，将您的代码签名身份（全部）更新为新的（如果有的话）。（旧的可能已过期，这是您看到错误消息的最大原因之一）

8.  验证您的捆绑包 ID 是否正确 (CaSe SeNsEtIvE)

9.  返回 XCode Organizer - 设备。单击 TEAM（左侧栏），然后单击“刷新”（右下角）。你会发现 XCode 获取新的配置文件。如果加载了新内容，请重复第 6 步和第 7 步（它们将被更改！）

    *如果您因为运行的是较新版本的 xCode 而找不到团队，请转到 Xcode 首选项（单击 Mac 工具栏上的“Xcode”屏幕的左上角）并转到帐户，选择您的团队并单击刷新。如果加载了新内容，请重复步骤 6 和 7（它们将被更改！）

    如果您在**Preferences** -> **Accounts**中*仍然*无法刷新，则：

    *   单击“帐户”选项卡
    *   在列表中选择一个 Apple ID
    *   点击右下角的“查看详情”
    *   点击左下角的刷新箭头
    *   Xcode 现在将刷新更新的凭据，您可以继续验证或分发您的应用程序。

10.  再次验证或分发您的应用程序。它应该工作。

11.  如果这不起作用，请转到项目设置 > 目标下的“团队”并选择“无”...既然您已选择无，您将需要重复第 7 步并更改代码签名身份（所有这些身份）和再次尝试存档。

12.  最后，如果以上都不起作用。只需创建一个新的生产证书并创建一个具有相同捆绑 ID 的新配置文件。（是的，如果您要更新已经上线的应用程序，这将起作用）。下载证书和证明。配置文件并同时运行（双击）。现在重复步骤 6 并存档。这应该有效。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-19T22:29:04.097

@Takoi 的回答是正确的。但是，在我最新版本的 Xcode 中，Organizer 的 Devices 部分中没有 TEAM 选项。我必须执行以下操作来刷新凭据：

1.  转到 Xcode-> 首选项
2.  单击“帐户”选项卡
3.  在列表中选择一个 Apple ID
4.  点击右下角的“查看详情”
5.  点击左下角的刷新箭头

Xcode 现在将刷新更新的凭据，您可以继续验证或分发您的应用程序。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T14:17:09.587

确保 XCode 中 .plist 文件中的包 ID 与 itunesconnect 中的包 ID 相同，如果它关闭，则在验证/分发时将无法将存档与 itunesconnect 上的配置文件匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-01T21:03:24.537

现在这更容易了。

1.  你去应用程序[itunesconnect](http://itunesconnect.apple.com)并登录
2.  点击“证书”
3.  配置文件/分发
4.  生成个人资料，
5.  下载个人资料
6.  双击它

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-21T15:02:33.490

我是 2 个团队的成员，在上传其中一个项目时遇到了同样的问题。**在项目设置（XCode 5）中将 General -> Identity -> Team**
更改为**None**允许我将应用程序上传到 iTunesConnect。

 ****[截图在这里](http://codewithchris.wpengine.netdna-cdn.com/img/XCode_5_ProjectSettings.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-16T14:38:28.847

我的证书已过期，导致我的配置文件过期。
有一次，我 -

*   在 iOS 门户网站上更新了我的证书
*   单击配置文件上的已编辑
*   选择新证书并单击生成
*   在 Xcode 中，我刷新了我的配置文件

错误消失了

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-13T17:33:12.933

我猜它是写在流中的某个地方，我没有详细阅读。我只想强调这一点：

由于令人讨厌的 xCode 行为，一旦您设置了所有内容，**您必须清理项目并退出 xCode**。

然后重新启动并构建。现在你知道它是否有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-23T03:23:47.227

看起来您将不得不申请另一个开发人员证书。转到 iOS 开发中心网站并转到配置门户。单击证书选项卡并按照说明进行操作。[https://developer.apple.com/ios/manage/certificates/team/howto.action](https://developer.apple.com/ios/manage/certificates/team/howto.action)

需要明确的是，您的问题似乎与配置无关，特别是开发人员证书。如果您确实获得了另一个证书，则必须创建所有新配置文件来签署您的应用程序。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-16T13:38:30.633

我的包标识符的名称不同。我不得不将它从 Nyquist.GasBro 更改为 com.Nyquist.GasBro，这就是我在配置文件中的内容。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-13T08:17:14.083

以前的答案都没有帮助我，所以我发布了我的问题。

1.  开发中心：[证书、标识符和配置文件](https://developer.apple.com/account/ios/profile/profileList.action?type=production)> 配置文件 > 分发

确保有一个分发配置文件，并且其中的 App ID 与 Xcode 中您的应用程序的 Bundle ID 完全相同（项目设置 > 常规 > 身份 > Bundle Identifier）。

2.  Xcode：项目设置>构建设置>代码签名：
    *   供应配置文件 - 选择分发供应配置文件名称（不是开发！）
    *   代码签名身份 - 我选择了自动，因为我只有一个。

PS 在此之前，我从开发中心和 Xcode 中删除了所有未使用和过期的配置文件和签名身份。然后，如其他答案中所述刷新：Xcode：首选项>帐户>（我的Apple ID）>查看详细信息>刷新。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-08T00:26:21.870

您正在寻找的答案是，当您生成 COMMON NAME 的证书请求时，您需要将您的 HUMAN NAME 放在 John Smith 中，而不是您的应用程序名称。Apple 以 2 种不同的方式使用这个术语 Common Name，并且没有告诉您证书上应该有您的名字，而在另一个领域，他们要求提供通用名称并想要 APP 名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-06T10:37:15.510

我有同样的问题。在我从存档中删除所有内容之前，此页面上没有提到任何内容对我有用。之后那个问题就消失了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-07T09:55:32.850

对于那些说 Ad Hoc Distribution 配置文件在 2014 年将不起作用的人，我必须同意。

在 Build Settings 中找到 Code Signing 设置：对于 Release 选择您的 Store Distribution，然后选择 Menu>Product>Archive。

稍后，在管理器窗口中，选择您的存档并单击验证。它会让您选择 Ad Hoc 配置文件并验证...然后选择分发，它将让您保存为 .ipa 文件。****

# octave - Octave 的 start:step:end 循环

> ID：10215532
> 
> 赞同：2
> 
> 时间：2012-04-18T18:22:28.523
> 
> 标签：octave

我无法理解如何

```
input = [];
for i = 1:8
    input(i) = sin( (2*pi) * 1000 * ((i-1)*ts) ) +  (0.5*sin( (2*pi) * 2000 * ((i-1)*ts) + 3*pi/4 ));
endfor 
```

是相同的

```
i = 0 : (1/8000) : (1/1000);
input = sin( 2*pi*1000*i ) +  0.5*sin( 2*pi*2000*i + 3*pi/4 ); 
```

从 0 到 8 的 for 循环如何与我以 1/8000 的步长从 0 到 1/1000 时相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:20:55.837

假设`ts = 1/8000`并且您实际上的意思是`for i = 1:9`...否则您最终会得到大小不同的结果向量...

也许将 1/8000 视为 1/1000 的八分之一会有所帮助。这样，每一步都会为您带来从 0 到 1/1000 的八分之一。

除非我遗漏了关于您的问题的某些内容？

# ruby - Ruby ODT 文件打开 Zip/Zip

> ID：10215533
> 
> 赞同：0
> 
> 时间：2012-04-18T18:22:37.537
> 
> 标签：ruby, xml, rubygems, zip, irb

我正在尝试访问 ODT 文件的内部。我将通过 IRB 运行它，它会运行得很好，但是当我尝试编写脚本来执行它时，它会失败并出现以下错误：

```
./replace_odf.rb:3:in `require': no such file to load -- rubygems (LoadError)
from ./replace_odf.rb:3 
```

这是我通过 IRB 运行时的代码。正如您在最后看到的那样，它可以访问该文件。

```
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'zip/zip'
=> true
irb(main):003:0> odt = Zip::ZipFile.open('java.odt')
=> java.odt
irb(main):004:0> odt.entries.each do |entry|
irb(main):005:1*   puts entry.name
irb(main):006:1> end
mimetype
Configurations2/statusbar/
Configurations2/accelerator/current.xml
Configurations2/floater/
... etc 
```

这是我的脚本代码。运行时，它会给出上面发布的错误。

```
require 'rubygems'
require 'zip/zip'
require 'rexml/document'

odt = Zip::ZipFile.open('java.odt')
file1 = odt.entries[0]

odt.entries.each do |entry|
puts entry.name if entry.name =~ /\.xml$/
end

puts odt.read("mimetype")
xml = odt.read("content.xml")
doc = REXML::Document.new(xml)
doc.root.each_element do |o|
    o.each_element do |i|
        puts i
    end
end 
```

# repository - 存储库是否应该通过传入 id 或实体本身来删除/删除实体

> ID：10215534
> 
> 赞同：8
> 
> 时间：2012-04-18T18:22:45.697
> 
> 标签：repository, domain-driven-design

我目前正在创建一个存储库，并且想知道实体的删除操作的“最佳实践”是什么。在下面的选项中，品牌和型号构成了 Car 实体的键。

**选项1：**

```
deleteCar(Car car) 
```

**选项 2：**

```
deleteCar(String make, String model) 
```

**选项 3：**

```
deleteCar(CarKey carKey) 
```

起初我认为选项 1，但实际上选项 2 似乎更有吸引力（当我只有 id 时我不想获取一个对象，以便我可以将它传递给 delete 方法）。我之所以选择选项 3，是因为我见过类似的东西，但这对我来说似乎不正确，因为 CarKey 并不是一个真正的域对象。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:50:19.657

如果严格遵守DDD 中[存储库](http://domaindrivendesign.org/node/123)的定义，那么选项 1 是可行的方法，因为存储库模拟内存集合的方式。但是，我不认为这是存储库的关键组成部分，如果做得太多，可能会导致抽象泄漏。另一方面，要求实体对象整体删除可能表明存储库的调用者（例如应用程序服务）应首先检索要通过 ID 删除的实体，解决任何业务问题，然后将其删除它。像 Hibernate 这样的 ORM 可以通过查询删除，因此您只需要 ID 即可调用删除，但最终还是会从数据库中加载实体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T12:50:07.047

选项 3。

CarKey 不是域对象（尽管它可以是值对象）并不重要，您需要一个 id 来执行该操作。这是因为，如果 Car 是 AR，存储库应该知道如何获取它以及如何处理删除。

# c++ - 平方/立方根查找表

> ID：10215536
> 
> 赞同：5
> 
> 时间：2012-04-18T18:22:47.600
> 
> 标签：c++, floating-point, lookup-tables

我想知道哪个是为 range 中浮点值的平方根和立方根创建两个查找表的最佳方法`[0.0, 1.0)`。

我已经对代码进行了概要分析，发现这是一个相当强的性能瓶颈（因为我需要为每个值计算它们的几十万个值）。然后我想起了查找表，并认为它们会帮助我提高性能。

由于我的值在一个很小的范围内，我正在考虑用步骤来分割范围，比如说，`0.0025`（希望它足够了）但我不确定哪种方法应该是最有效的检索它们的方法。

我可以轻松地填充查找表，但我需要一种方法来有效地获取给定浮点数的正确值（在任何步骤中都没有离散化）。对此问题有任何建议或众所周知的方法吗？

我正在使用移动平台，只是为了指定。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:28:26.693

你有 (1.0-0.0)/0.0025 = 400 步

只需创建一个 400x1 矩阵并通过将您想要正方形/立方体的浮点数乘以 400 来访问它。

例如，如果您想查找 0.0075 的平方。将 0.0075 乘以 400 并得到 3，这是您在矩阵中的索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:27:30.540

```
double table_sqrt(double v)
{
    return table[(unsigned int)(v / 0.0025)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:26:36.997

您可以将值乘以您想要的任何精度，然后使用哈希表，因为结果将是整数值。

例如，与其使用浮点键值`0.002`，不如给自己一个小数点后三位或四位的精度，使您的键值`0.002`等于`200`或`2000`。`2000`然后，您可以快速查找存储在槽的哈希表键中的平方根和三次根的结果浮点值。

如果您还想从插槽之间的非离散范围中获取值，则可以使用数组或树而不是哈希表，以便您可以通过在根之间插值来生成“中间”值存储在两个相邻的键值槽中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:52:28.943

如果您只需要分成 10 个不同的条带，请找到与条带之间的阈值相对应的输入，并使用展开的二进制搜索来测试这 9 个值。或者在阈值测试完成之前是否需要额外的计算，以便查找的值不是最终结果。

# asp.net - 如何在页面加载上获取控件 ID

> ID：10215537
> 
> 赞同：-2
> 
> 时间：2012-04-18T18:22:54.610
> 
> 标签：asp.net, vb.net

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load 
    Dim lbl_Date As New Label
    Dim i as int16
    i = 20
    While (i < i + 1)
       lbl_Date = TryCast(Page.FindControl("lbl_Date" + i.ToString), Label)
       lbl_Date = "Value"
   i = i + 1
   End While
End Sub 
```

`lbl_Date`这是在变量中返回 Nothing 。如果我不使用它`Page_Load`，它工作得很好。只有在`Page_Load`它不起作用。任何**解释**:::: 好吧，我在这里要做的是。我有 100 个标签名称是从 lable1 到 lable100。我可以这样做 label1 =Value 和 label2 =Value 等等，但我试图放入循环中，所以我的代码更少。仅用于信息...**此代码有效但不在 Page_Load 中，我认为每个人都在寻找代码，但这与页面生命周期有关**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T12:53:27.070

```
<asp:content runat="server" id="leftcontent" contentplaceholderid="LeftSidePanel" xmlns:asp="#unknown"> 
<div id="mydiv" runat="server"> 
<asp:linkbutton id="Lnk_Heading1" runat="server"> </asp:linkbutton>
<asp:label id="lbl_Date1" runat="server"> </asp:label>
<asp:label id="lbl_Detail1" runat="server"> </asp:label>
<asp:button id="Button1" runat="server" text="Button" /> 
</div> 
</asp:content>

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load 
Dim lbl_Date As New Label 
Dim i as int16 i = 20 
While (i &lt; i + 1) lbl_Date = TryCast(Mydiv.FindControl("lbl_Date" + i.ToString), Label) 
lbl_Date = "Value" 
i = i + 1 
End While 
End Sub 
```

问题是，我没有在我的 aspx 页面中使用 DIV。当我将代码放入 div 并在代码隐藏中使用 div 的引用时，它就可以工作了。

# jqgrid - 需要在 JQGrid 编辑对话框的“提交”点击上显示一个确认框

> ID：10215541
> 
> 赞同：1
> 
> 时间：2012-04-18T18:23:15.090
> 
> 标签：jqgrid

我正在研究当用户选择要编辑的行并单击对话框中的“提交”按钮时显示确认框的要求，打开 EditGridRow。

代码：

```
jQuery(this).jqGrid('editGridRow', id,
                    {
                        editCaption: "Edit App Settings",
                        bSubmit: "Submit",
                        bCancel: "Cancel",
                        bClose: "Close",
                        saveData: "Data has been changed! Save changes?",
                        bYes : "Yes",
                        bNo : "No",
                        bExit : "Cancel",
                        recreateForm:true,
                        closeAfterEdit:true,
                        closeOnEscape:true,
                        reloadAfterSubmit:false
                        //onclickSubmit:ConfirmEdit()//function(){confirm('Are you sure you want to Edit the Record?');}
                     }                         
                ); 
```

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:25:16.463

已经有一个名为的选项`checkOnSubmit`听起来像是您正在寻找的。来自[表单编辑的 jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)：

> **checkOnSubmit**
> 
> 此选项仅在编辑模式下有效。如果设置为 true，则此选项仅在单击提交按钮并且表单中的任何数据发生更改时才有效。如果数据发生更改，则会出现一条对话框消息，要求用户确认更改或取消更改。按新对话框的取消按钮将返回表单，但不会将值设置为其原始状态。

# asp.net - 如何在服务器控件中使用客户端 ID？

> ID：10215545
> 
> 赞同：0
> 
> 时间：2012-04-18T18:23:23.837
> 
> 标签：asp.net

我能够在中继器中执行以下操作，并且效果很好：

```
 <asp:TextBox ID="txtOtherPartyName" Text='<%# Eval("Name") %>' runat="server" />
 <asp:RequiredFieldValidator ID="reqLoss" ControlToValidate="txtOtherPartyName"
    data-valmsg-for='<%# Container.FindControl("txtOtherPartyName").ClientID%>' 
    Display="Dynamic" ErrorMessage="Name of party involved is required." runat="server" /> 
```

所需验证器中的 data-valmsg-for 属性可以很好地呈现服务器控件 ID。如何对位于页面上且不在中继器内的控件执行相同操作？我没有任何运气尝试过类似的事情。

**更新**

所以这就是我想要做的事情：

```
<asp:Textbox id="txtTest" runat="server" />
<asp:RequiredFieldValidator id="reqTest" data-valmsg-for=**[i want the html rendered id of "txtTest" here]** runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:12:14.983

您可以在后面的代码中将该自定义属性绑定到控件的客户端 ID。

```
butthead.Attributes.Add("data-custom-prop", beavis.ClientID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:28:40.947

在`Repeater`您使用数据绑定语法 ( `<%# ... %>`) 中，但这不适用于这种情况。您*应该*能够像这样设置属性：

```
data-valmsg-for='<%= TextBox1.ClientID %>' 
```

但是，如果您不介意我问，为什么要首先向验证器添加自定义属性？它有什么其他方式无法达到的目的？

**编辑**

您是否考虑过预先在代码隐藏中构建控件 ID 列表并将其存储在某个地方？这样的事情可以作为一个起点吗？：

```
var controlList = Page.Validators.OfType<BaseValidator>()
    .Select(v => Page.FindControl(v.ControlToValidate).ClientID).ToList(); 
```

**编辑**

扩展这个想法，您可以使用`JavaScriptSerializer`( `System.Web.Script.Serialization`) 将列表序列化为 JSON：

```
//initialize the javascript serializer
var serializer = new JavaScriptSerializer();

//retrieve all of the validators on the page and store the client ids in a list
var controlList = Page.Validators.OfType<BaseValidator>()
    .Select(v => Page.FindControl(v.ControlToValidate).ClientID).ToList();

//serialize the control id list and register the script block on the page
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "data", string.Format("var data = {0}", serializer.Serialize(controlList)), true); 
```

根据表单的复杂程度，您可能需要创建一个递归函数来查找所有控件，但希望这能证明这个概念。

# objective-c - NSMutableArray 在 init 中创建后为空（带代码）

> ID：10215549
> 
> 赞同：0
> 
> 时间：2012-04-18T18:23:39.123
> 
> 标签：objective-c, ios, xcode, nsmutablearray

> @property (nonatomic, strong) NSMutableArray *authorMutableArray;

```
- (id)init {
    self = [super init];
    if (self) {

        self.authorMutableArray = [[NSMutableArray alloc] initWithObjects:@"First Row", @"Second Row", nil];

        for (NSString *string in authorMutableArray) {
            NSLog(@"String: %@", string);
        }

        NSLog(@"Init in Add Model with Author count:%i", [authorMutableArray count]);

    }
} 
```

访问属性的示例。NSLog 始终显示计数为 0。

```
 - (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0) { 
        if (indexPath.row == [self.addModel.authorMutableArray count] - 1 ) {
            NSLog(@"count of %i", [self.addModel.authorMutableArray count]);
            return  UITableViewCellEditingStyleInsert;
        }

        else {
            return  UITableViewCellEditingStyleDelete;

        }
    }

    else {
        return UITableViewCellEditingStyleNone;
    }
} 
```

我在 init 中创建的数组没有保持它的值超过这个方法。有什么理由吗？for 循环将显示数组中的两个对象。如果我在调用 init 方法后尝试询问此问题，则数组为空。

更新：谢谢大家的时间和眼睛。我忘记在 init 方法中返回 self 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:55:21.807

init 方法不应该返回 self 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:54:51.857

在您的类的接口文件（.h 文件）中声明如下：

```
@interface Your_Class_Name : UIViewController {
   NSMutableArray *authorMutableArray;

}

@property (nonatomic, strong) NSMutableArray *authorMutableArray;
//i dont know why you prefered strong, chose retain and try again please 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:06:37.227

我们在这里不是在处理 C++ 或 Java，`-init`对象的方法`MUST`返回一个值。

这个怪癖实际上允许一些非常有趣的东西，例如：

```
-(id) init {
    NSLog(@"Creating new instance of singleton object...");

    #if __has_feature(objc-arc)
    self = singleton_instance;
    #else
    [self release];
    self = [singleton_instance retain];
    #endif   

    return self;
} 
```

它还允许某种类的“摆姿势”，允许您准确跟踪特定类的对象何时被初始化（对于这个答案来说，这个话题太深了）。

# drupal-6 - 无法在 Drupal 6 中向我的内容类型添加字段

> ID：10215552
> 
> 赞同：0
> 
> 时间：2012-04-18T18:23:55.350
> 
> 标签：drupal-6, cck, custom-fields

在我的 localhost drupal 站点中，我创建了一个内容类型“奖学金”。现在我需要向它添加更多字段（复选框、收音机等）。

问题是，我在页面上的任何地方都看不到“添加新字段”选项。当我单击“管理字段”选项时，我被重定向到“内容/节点类型/奖学金/字段”，并且没有添加新字段的选项。

关于是什么导致这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:59:03.573

使用 cck 模块下载并启用它，然后它显示内容类型的 managefiled 选项..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:21:29.007

检查 page.tpl.php 末尾的 $closure 并尝试清除缓存一次。

# php - Doctrine 2 leftJoin, with, manytomany 关系，返回的行数错误

> ID：10215553
> 
> 赞同：6
> 
> 时间：2012-04-18T18:23:56.673
> 
> 标签：php, doctrine, many-to-many, doctrine-orm

我对 Doctrine 2 有疑问，并且在我试图开始工作的 Maytomany 关系上左加入。这可能是我的查询生成器，但我似乎无法弄清楚。

我有一个像这样的连接表：

```
----------------------------------
| user_id    |   attraction_id   |
----------------------------------
| 4              1               |
| 4              2               |
| 4              3               |
---------------------------------- 
```

对于两个模型，用户和吸引力，其中用户是关系的所有者。

当我执行此查询时：

```
$attractions = $CI->em->createQueryBuilder()
        ->select('a', 'u')
        ->from('\ListLovers\Model\Attraction', 'a')
        ->leftJoin('a.users', 'u', \Doctrine\ORM\Query\Expr\Join::WITH, 'u.id = 4')
->getQuery()->getResult(); 
```

我的用户对 id 为 1 的景点的计数为 1。太棒了！

现在，如果我像这样在连接表中添加另一行：

```
----------------------------------
| user_id    |   attraction_id   |
----------------------------------
| 1              1               |
| 4              1               |
| 4              2               |
| 4              3               |
---------------------------------- 
```

...并执行相同的查询，我的用户对 id 为 1 的吸引力的计数是 ...零。什么？

我错过了什么吗？

谢谢，马克。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-09T15:14:18.047

多对多的最佳方式是`MEMBER OF`or `NOT MEMBER OF`。

```
$attractions = $CI->em->createQueryBuilder()
        ->select('a', 'u')
        ->from('\ListLovers\Model\Attraction', 'a')
        ->where(':uid MEMBER OF a.users')
        ->setParameter('uid', 4)
        ->getQuery()->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T13:50:46.593

如果您以这种方式尝试会怎样：

```
 $attractions = $CI->em->createQueryBuilder()
                        ->from('\ListLovers\Model\Attraction', 'a')
                        ->addSelect('a')
                        ->leftJoin('a.users', 'u')
                        ->addSelect('u')
                        ->where('u.id = :uid')
                        ->setParameter('uid', 4)
                    ->getQuery()
                    ->getResult(); 
```

# java - 终止程序 On -1 -1 输入不起作用

> ID：10215559
> 
> 赞同：1
> 
> 时间：2012-04-18T18:24:08.967
> 
> 标签：java

为了好玩，我正在做一些 ICPC 编程问题，这是 Collat​​z。我得到了一个正确符合预期输出的输出。但是当涉及到 -1 -1 输入时，我一直无法让程序根据需要结束。

样本输入

```
3 100
34 100
75 250
27 2147483647
101 304
101 303
-1 -1 
```

预期产出

```
Case 1: A = 3, limit = 100, number of terms = 8 

Case 2: A = 34, limit = 100, number of terms = 14 

Case 3: A = 75, limit = 250, number of terms = 3  

Case 4: A = 27, limit = 2147483647, number of terms = 112

Case 5: A = 101, limit = 304, number of terms = 26 

Case 6: A = 101, limit = 303, number of terms = 1 
```

Java 代码

```
import java.util.Scanner;
import java.lang.Integer;

public class Collatz {
    private static int caseNumber = 0;

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        while(in.hasNext()) {
            caseNumber++;
            int a = in.nextInt();
            Integer limit = in.nextInt();
            if(a == -1 && limit == -1)
                break;
            int numberOfTerms = 0;
            for(Integer value = a; value != 1; numberOfTerms++){
                if(value%2 == 0){
                    value /= 2;
                }else{
                    value = 3 * value + 1;
                }
                if(limit < value)
                    break;
            }
            numberOfTerms +=1;
            System.out.println("Case " + caseNumber + ": A = " + a + ", limit = "
                    + limit + ", number of terms = " + numberOfTerms);
            System.out.println();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:43:07.790

在 Eclipse (3.7.2) 中运行代码并在控制台窗口中输入值，它运行良好并按预期终止。（即输入两次“-1”时）

程序未终止的可能原因：

1.  Scanner 根据系统的默认字符集将字节转换为字符。您的系统字符集是否会导致“-1”转换为预期值以外的值？

2.  您用于输入“-1”值的方式是否会在输入流中添加一个或多个尾随字符，从而导致扫描器读取 -1 以外的值？

尝试在每次调用后添加打印语句`in.nextInt()`以查看生成的值。

# grails - Grails 控制器重定向和 SEO

> ID：10215567
> 
> 赞同：2
> 
> 时间：2012-04-18T18:24:48.930
> 
> 标签：grails, redirect, seo, http-status-code-301, http-status-code-302

我不确定我的问题是否有意义。我已经阅读了有关该主题的所有内容，但它没有回答我的询问。

所以这里是：我知道搜索引擎不考虑临时重定向，状态为 302。他们在将一个页面重定向到另一个页面时不会传递任何*链接。*这不是 301 状态重定向的情况。

Grails 默认所有重定向为 302 状态。

我的问题是：这是否会以任何不好的方式影响 SEO，或者根本不会？

在处理动作调用时，我在这里谈论控制器的重定向。由于它不是将一个页面位置更改为另一个页面位置，而只是用户进入应用程序的方式，我是否应该关心我的控制器操作发出了什么样的重定向？

任何一点解释都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:18:40.677

通常重定向 (302) 用于响应某些用户输入，例如用户发布表单并且控制器基于表单输入重定向到不同的页面。如果这是您的情况，您不必担心 SEO，搜索引擎永远不会编译表单。但是，如果您使用 grails 控制器重定向作为应用程序的默认导航系统，这是错误的。在网络中，每个页面都可能有一个唯一的 uri，因此搜索引擎可以找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:41:28.887

如果您在 Google 网站管理员工具中正确包含规范标签并设置首选域，它不会影响搜索引擎排名

# django - Django 管理员“现场查看”重定向错误

> ID：10215570
> 
> 赞同：1
> 
> 时间：2012-04-18T18:24:52.337
> 
> 标签：django, django-admin

我刚刚将一个工作中的 Django 项目从开发服务器复制到了生产服务器。我没有以任何方式接触过代码。在管理界面中有一个博客应用程序，在每篇博客文章中都有一个 get_absolute_url，因此管理员创建了“现场查看”按钮。在开发服务器上，当我单击此按钮时，它会按预期打开网站上的帖子：示例链接将是 /admin/r/25/515/，加载时会重定向到 /blog_app/posts/515/slug。那很完美。在生产服务器上，虽然“现场查看”链接的值与 /admin/r/25/515/ 完全相同，但加载时返回一个奇怪的 url，导致无处可去：admin/r/25/515/.com/ blog_app/posts/515/slug。我不知道这个“.com”是从哪里来的，我开始到处寻找，但不知道。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:13:58.493

那是一个 Nginx 配置问题，我将它用作代理/负载均衡器，并且在 proxy_pass 设置中我没有输入完整的域名，认为它是一种变量。我的错。不是真正与 Django 相关，但由于许多人以这种方式使用它，因此了解它会很有用。

# android - 使用 Android 语音控制启动我的活动

> ID：10215571
> 
> 赞同：0
> 
> 时间：2012-04-18T18:25:01.057
> 
> 标签：android, speech-recognition, voice-recognition, android-hardware

我已经阅读了关于 SO 的[这篇](https://stackoverflow.com/questions/6316937/how-can-i-use-speech-recognition-without-the-annoying-dialog-in-android-phones)文章，并尝试了代码来启动我自己的语音识别活动。有效！。所以我的问题是，如何自定义内置语音命令按钮（硬件）的操作来启动我编写的活动而不是内置语音搜索？我已经彻底搜索了包括[这个](http://www.askvg.com/google-android-hidden-secret-codes/)网站在内的网络。但我找不到解决方案。我知道有人在SO上有它！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:02:53.867

您必须使用`SpeechRecognizer`而不是`RecognizerIntent`. 它有点难使用，但你可以完全控制。

[有关代码，请参见我的](https://stackoverflow.com/questions/9625045/speech-recognition-help/9631708#9631708)回复：

[以及我在这里](https://stackoverflow.com/questions/10223490/)对两种方法之间差异的讨论

# python - 将 dict 与其自身进行比较并有效地删除相似的键

> ID：10215573
> 
> 赞同：9
> 
> 时间：2012-04-18T18:25:08.000
> 
> 标签：python

我想将字典中的元素相互比较，并根据一些比较标准删除项目。我希望它高效。我有一个功能可以做到这一点，但它反复复制字典。当然有一个更好的方法：

```
mydict = {1:5,2:7,3:9,4:9,7:7,8:0,111:43,110:77}

def partial_duplicate_destroyer(mydict,tolerance):
    for key1 in mydict.keys():
        mydict_copy = mydict.copy()
        for key2 in mydict_copy.keys():
            if key2 - tolerance < key1 < key2 + tolerance and not(key1 == key2):
                del(mydict[key1])
                break
    return mydict

print partial_duplicate_destroyer(mydict,2)
print partial_duplicate_destroyer(mydict,20)
print partial_duplicate_destroyer(mydict,200)

#correct output:
# {4: 9, 8: 0, 111: 43}
# {8: 0, 111: 43}
# {111: 43} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:39:01.347

这种方法可以简化为：

```
from itertools import combinations

def partial_duplicate_destroyer(mydict, tolerance):
    #Modifies in-place. Returns only as a convenience. Copy if you don't want this behaviour.
    for key1, key2 in combinations(mydict, 2):
       if key1 in mydict and key2 - tolerance < key1 < key2 + tolerance:
         del mydict[key1]
    return mydict 
```

如果我们试试这个：

```
>>> mydict = {1:5,2:7,3:9,4:9,7:7,8:0,111:43,110:77}
>>> partial_duplicate_destroyer(mydict, 2)
{4: 9, 8: 0, 111: 43}
>>> partial_duplicate_destroyer(mydict, 20)
{8: 0, 111: 43}
>>> partial_duplicate_destroyer(mydict, 200)
{111: 43}
>>> mydict
{111: 43} 
```

这用于[`itertools.combinations()`](http://docs.python.org/library/itertools.html#itertools.combinations)生成所有可能的键组合（不重复）。这更有效，因为您不必费心在拥有相同密钥的地方工作，并且在 C 中而不是在 Python 中更有效地完成。

请注意，在这里您正在`mydict`就地修改 - 即在此结束时`mydict`-`{111: 43}`如果您不想要这种行为，您需要复制 dict 并在函数中处理它，而不是直接处理它。这就是最后一行中显示的内容。

# unit-testing - 为 WinRT 自动运行 C++ 单元测试

> ID：10215578
> 
> 赞同：2
> 
> 时间：2012-04-18T18:25:44.463
> 
> 标签：unit-testing, visual-c++, mstest, windows-runtime

由于无头运行 Metro 应用程序仍然是一个灰色地带：无头运行 Metro 应用[程序](https://stackoverflow.com/questions/10179135/running-a-metro-app-headlessly)，我最近决定将本机单元测试项目添加到我的 Windows Metro 应用程序中，希望我能找到一种方法来自动运行这些单元测试构建服务器上的时尚。基本上，我正在寻找类似于 MSTest.exe 的东西——一个非常适合从批处理文件和/或脚本运行测试的实用程序。

事实上，我已经尝试在生成的测试 .dll 上使用 VS11 附带的新版本 MSTest.exe，但它失败并出现错误：

“无法加载测试容器'test.dll'或其依赖项之一......错误详细信息：无法加载文件或程序集文件：//test.dll'或其依赖项之一。模块应包含一个装配清单。”

MSTest.exe 是否适用于包含 WinRT 代码的测试容器？如果没有，是否有一个实用程序可以满足我的需求？

* * *

编辑：我刚刚发现 MSTest 不支持在 Metro 风格应用程序上运行测试。在这里找到：http: [//msdn.microsoft.com/en-us/library/ms253138%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms253138%28v=vs.110%29.aspx)这真的太糟糕了。我仍然希望那里有一个可以工作的实用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T23:28:56.780

盲目地翻遍了VS文件夹后，碰巧在下面找到了一个新的test runner：

> C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe

此实用程序允许您从命令行执行 WinRT 单元测试。它与 MSTest.exe 非常相似。

似乎还没有任何文档，但至少存在一个帮助命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:22:13.557

如果您正在执行 vstest.console.exe <filename>.dll，那么您的测试不会在 appcontainer 模式下执行。您需要提供 <filename>.appx 以在 appcontainer 模式下执行测试。有关如何从命令行为 Windows Metro 风格应用程序执行测试的更多信息，请参阅从命令行[运行 Windows Metro 风格应用程序的单元测试](http://blogs.msdn.com/b/vikramagrawal/archive/2012/05/06/running-unit-tests-for-windows-metro-style-apps-from-command-line.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T14:10:22.510

有一个关于（除其他外）为 Windows Phone 运行单元测试的文档：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/dn168930 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/dn168930(v=vs.105).aspx)

它还描述了使用 vstest.console.exe 执行此操作的命令行方式。

它还比较了 Windows Phone 和 WinRT 的单元测试之间支持的功能。

一个重要的细节是 WinRT 的单元测试不能在设备上运行。这是一个遗憾并且与问题有关[如何在 Microsoft Surface 上自动化非交互式测试](https://stackoverflow.com/questions/20349429/how-to-automate-non-interactive-tests-on-microsoft-surface)

# c# - SQL Server CE 4 Entity Framework 4.3.1 Code First 不区分重音和不区分大小写的搜索

> ID：10215579
> 
> 赞同：1
> 
> 时间：2012-04-18T18:25:51.200
> 
> 标签：c#, linq, entity-framework, sql-server-ce, sql-server-ce-4

我将 EF 4.3.1 Code First 与 SQL Server CE 4 数据库一起使用，它运行良好，可以轻松创建所有表和数据库

但是现在我遇到了这个问题，我正在使用 LINQ 查询数据库

```
using (var db = new PeopleContext())
{    
      var people = from e1 in db.People
                   where e1.Name.Contains("maria")
                   select e1;
} 
```

我想得到 Name 包含`María`or `Maria`or `maría`or的每个人的结果`maria`- 注意 i - í 中的重音

我想要一个不区分重音和不区分大小写的搜索

提前感谢您的帮助

* * *

**更新：**好的，我找到了一种在 .NET 端使用的方法`string.Compare()`

```
string.Compare(string1, string2, CultureInfo.CurrentCulture,
CompareOptions.IgnoreNonSpace | CompareOptions.IgnoreCase); 
```

IgnoreNonSpace 标志将忽略重音符号，而 IgnoreCase 标志将忽略大小写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:50:51.653

SQL Server Compact 仅支持 CI_AS（不支持 CI_AI） - 请参阅[http://msdn.microsoft.com/en-us/library/ms174596(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms174596(v=sql.105).aspx) - 因此您必须使用其他数据库产品，或存储另一列中数据的可搜索版本

# javascript - 定位dom元素而不使用样式属性？

> ID：10215582
> 
> 赞同：1
> 
> 时间：2012-04-18T18:26:02.793
> 
> 标签：javascript, css, spreadsheet

先说一点背景。我正在开发一个与电子表格类似的可视化组件。可以在两个维度上滚动的内容区域，以及始终可见的左侧和顶部的轴指示符。

为了获得灵感，我一直在查看谷歌电子表格的 html/css。我已经构建了一个类似的可行的解决方案，但是他们的解决方案的确切机制，更优雅一点，让我望而却步。

他们的解决方案的相关结构如下。

*   [容器] 分区。显式大小。溢出隐藏。相对位置。
    *   [V-Scroll] 分区。'内容大小'，完全没有使用萤火虫或铬的样式。
    *   [左侧] 分区。内容大小。显示：内联块。溢出隐藏。相对位置。
        *   包含标题的表
    *   [右侧] 分区。内容大小。显示：内联块。溢出隐藏。相对位置。
        *   包含内容的表格

为了进行垂直滚动，他们将 V-Scroll div 向上移动，可以通过设置 top: -15px 作为示例来完成。使用 FireBug 和 chrome 检查工具，我可以看到：

*   执行垂直滚动时，V-Scroll div 向上移动。
*   在 V-Scroll div 上看不到 top 或 style 属性更改。
*   内部内容与 V-scroll div 一起向上移动。

关于他们如何定位 V-scroll div 的任何建议？似乎很奇怪，既没有顶部样式，也没有与元素上的固定设置不同的定位样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:58:39.177

我不熟悉谷歌代码的内部结构，但我想他们正在`scrollTop`通过 javascript 操作容器 div。即使溢出被隐藏导致没有滚动条，这实际上也会滚动 div。

# jquery - 如何将数组的显示限制为仅 8？

> ID：10215583
> 
> 赞同：0
> 
> 时间：2012-04-18T18:26:07.297
> 
> 标签：jquery, arrays, haml

我正在使用 jquery 和 haml 来实现我的应用程序。我正在显示头像列表，但想将数量限制为最多 8 个。

```
<% $.each(question.friends, function(i, e){ %>
<% if (typeof(e) !== 'undefined') { %>
%a{href: "/<%= e.nickname %>", rel: "tooltip", title: "<%= e.nickname %>"}
  %img{src: "<%= e.avatar_url%>"}
<% } %>
<% }); %> 
```

如何更新上面的代码以确保只显示 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:27:48.317

`i`是索引，所以只要确保它小于 8：

```
if (typeof(e) !== 'undefined' && i < 8) 
```

或者，如果`question.friends`是数组，`slice`则最多包含 8 个元素：

```
$.each(question.friends.slice(0, 8), function(i, e) { 
```

# linux - Bash脚本：检查共享文件是否在另一台服务器上打开

> ID：10215588
> 
> 赞同：1
> 
> 时间：2012-04-18T18:26:24.630
> 
> 标签：linux, bash, file-access

所以我有 3 个服务器，s1、s2 和 d1，其中 d1 是一个 samba 服务器。我的过程是在 s1 上运行的脚本生成文件并将它们复制到 d1，s2 然后从 d1 中提取这些文件并在它们上运行一些进程。

我的问题是，在 s2 上，我需要确保 s1 已将文件完全写入 d1，然后再将其拾取。这些有时是大文件，因此根据我在 s2 上的 crontab 设置，当 s2 准备好接收文件时，s1 仍在尝试复制文件的位置可能会重叠。

我的第一个倾向是使用 lsof ，但这只会告诉我运行命令的服务器正在使用哪些文件，而不是另一个服务器是否正在使用该文件。关于如何编写此文件检查脚本的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:55:33.480

如果您在远程计算机和用户的 authorized_keys 文件中有本地计算机和用户的公钥，您可以通过 ssh 和 grep 运行 lsof 作为文件名

```
ssh user@host lsof | grep filename
if [ $? -eq 0 ]
    then
        docommand
    else
        dontdoit
fi 
```

# ruby - 检查字符串是否包含Ruby数组中的任何子字符串

> ID：10215590
> 
> 赞同：44
> 
> 时间：2012-04-18T18:26:29.020
> 
> 标签：ruby, regex, substring

我正在使用**Tmail 库**，对于电子邮件中的每个附件，当我这样做时`attachment.content_type`，有时我不仅会得到内容类型，还会得到名称。例子：

```
image/jpeg; name=example3.jpg

image/jpeg; name=example.jpg

image/jpeg; name=photo.JPG

image/png 
```

我有一组像这样的有效内容类型：

```
VALID_CONTENT_TYPES = ['image/jpeg'] 
```

我希望能够检查内容类型是否包含在任何有效的内容类型数组元素中。

在 Ruby 中这样做的最佳方式是什么？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-18T18:42:43.733

有多种方法可以做到这一点。您可以使用以下命令检查每个字符串，直到找到匹配项[`Enumerable#any?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)：

```
str = "alo eh tu"
['alo','hola','test'].any? { |word| str.include?(word) } 
```

尽管将字符串数组转换为正则表达式可能会更快：

```
words = ['alo','hola','test']
r = /#{words.join("|")}/ # assuming there are no special chars
r === "alo eh tu" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:45:36.107

因此，如果我们只想存在匹配项：

```
VALID_CONTENT_TYPES.inject(false) do |sofar, type| 
    sofar or attachment.content_type.start_with? type
end 
```

如果我们想要匹配，这将给出数组中匹配字符串的列表：

```
VALID_CONTENT_TYPES.select { |type| attachment.content_type.start_with? type } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T18:43:42.027

如果`image/jpeg; name=example3.jpg`是字符串：

```
("image/jpeg; name=example3.jpg".split("; ") & VALID_CONTENT_TYPES).length > 0 
```

即VALID_CONTENT_TYPES数组和`attachment.content_type`数组（包括类型）的交集（两个数组共有的元素）应该大于0。

这至少是*许多*方法中的一种。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T18:51:02.480

```
# will be true if the content type is included    
VALID_CONTENT_TYPES.include? attachment.content_type.gsub!(/^(image\/[a-z]+).+$/, "\1") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-03T21:30:29.863

我想我们可以把这个问题一分为二：

1.  如何清理不需要的数据
2.  如何检查清理后的数据是否有效

第一个在上面得到了很好的回答。对于第二个，我会做以下事情：

```
(cleaned_content_types - VALID_CONTENT_TYPES) == 0 
```

这个解决方案的好处是您可以轻松地创建一个变量来存储不需要的类型，以便稍后列出它们，如下例所示：

```
VALID_CONTENT_TYPES = ['image/jpeg']
cleaned_content_types = ['image/png', 'image/jpeg', 'image/gif', 'image/jpeg']

undesired_types = cleaned_content_types - VALID_CONTENT_TYPES
if undesired_types.size > 0
  error_message = "The types #{undesired_types.join(', ')} are not allowed"
else
  # The happy path here
end 
```

# javascript - 变量检查（讨论 5113374 的扩展）

> ID：10215592
> 
> 赞同：1
> 
> 时间：2012-04-18T18:26:35.767
> 
> 标签：javascript, variables, variable-assignment

[这个讨论](https://stackoverflow.com/questions/5113374/javascript-check-if-variable-exists-which-method-is-better)很有趣，但我一直找不到真正适合我的东西，因为我真的只想返回`true`或`false`对象的存在。我也非常不喜欢冗长的代码，并且正在寻找一种简单易行的方式来写东西，而且不会大惊小怪。

例如，它应该这样定义：`Bigobject.option`但这可能还不存在。

所以我想出了这个：

`(!Bigobject.option == false)`,`false`如果它`option`还不存在，并且`true`它已被设置为任何值，包括“无”或空字符串、对象或数组，则返回。

## 我想了解的：

这是一种奇怪的方法吗？是否“合法”？这会始终如一地工作吗？我应该做不同的事情吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:51:51.567

对我来说，这是关于功能之后的可读性。

`(!Bigobject.option == false)`阅读您尚未从事的工作时会感到困惑。尝试以从未见过您的代码的人的身份阅读您的代码。你能预测什么`(!Bigobject.option == false)`会立即返回吗？

我同意链接问题中选择的答案，因为`(Bigobject.option === null)`作为新读者，您（可能）会知道什么。

做你所要求的：返回一个变量存在的布尔值。`(typeof(Bigobject.option) === "undefined")`除非有可能`Bigobject.option`成为字符串，否则我会使用`"undefined"`

编辑：我意识到我并没有真正回答你的问题......

**这是一种奇怪的方法吗？是否“合法”？**

*   IMO 这很奇怪，但我很确定这是合法的。jslint 会警告您有关“==”的信息。

**这会始终如一地工作吗？**

*   如果 Bigobject.option = false 它将返回 false。

**我应该做不同的事情吗？**

*   我建议你这样做。

# python - 使用 ctypes 模块将 blake 哈希函数 C 实现包装到 Python 中，还包括简单的 python ctypes testvector 脚本

> ID：10215595
> 
> 赞同：0
> 
> 时间：2012-04-18T18:26:37.640
> 
> 标签：python, c, hash, ctypes

我正在尝试使用 C 中的 python ctypes 制作简单的库 blake 哈希函数包装器。但最初只是为了测试我的简单 C 辅助函数是否可以正常工作，我编写了小的 python 脚本 blake 哈希函数测试向量。这个小脚本出现了我的问题。我在几个小时内偶然发现解决这个问题。通过使用这个小助手测试向量脚本，我总是得到意外的“blake 512 usage”的 64 字节输出值。我意识到，我的问题来自我在尝试返回 64 个字节的数量（并且应该是准确的）时编写的 c 辅助函数，以便稍后通过使用这个小的 python ctypes 脚本测试向量来使用。

我使用的纯 C 实现源是直接从 NIST Blake Submission for Optimiezed 32bit Processor 下载的，文件名为 blake_opt32.c 和 blake_opt32.h 。并且可以在这里下载[http://csrc.nist.gov/groups/ST/hash/sha-3/Round3/documents/Blake_FinalRnd.zip](http://csrc.nist.gov/groups/ST/hash/sha-3/Round3/documents/Blake_FinalRnd.zip)

这是我的简单 C 辅助函数，供以后使用 python ctypes 调用。

```
#include <stdio.h>
#include "blake_opt32.h"
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <string.h>
#include <stdint.h>

BitSequence msg[65];

size_t    strlcpy(unsigned char *dst, const char *src, size_t siz)
{
unsigned char *d = dst;
const char *s = src;
size_t n = siz;

/* Copy as many bytes as will fit */
if (n != 0) {
    while (--n != 0) {
        if ((*d++ = *s++) == '\0')
            break;
    }
}

/* Not enough room in dst, add NUL and traverse rest of src */
if (n == 0) {
    if (siz != 0)
        *d = '\0';      /* NUL-terminate dst */
    while (*s++)
        ;
}

return(s - src - 1);    /* count does not include NUL */
}

BitSequence * bl(char *input)
{
BitSequence output[65];
BitSequence msg[sizeof(output)];
int dInt;

memset(output,0,sizeof(output));
dInt = strlen(input);

if (dInt > 0xffff){
    exit( 1);
}
BitSequence data[dInt];

memset(data, 0, dInt);
strlcpy(data, input, sizeof(data));
DataLength dLen =1152;
Hash(512, data, dLen, output);
int x;
for (x=0;x<64;++x){
    printf("%02X",output[x]);
}
memcpy(msg,output,sizeof(output));
//here the problem araised, when trying to return unsigned char or BitSequence value, the unexpected output of small python scipt test vectors value is detected 
return  msg; 
} 
```

简单的小python脚本测试向量就在这里，只需通过将输出重定向到文件的任何文本来尝试这个小脚本，稍后会捕获意外的值。

```
from ctypes import *
from string import printable
from itertools import permutations
from random import *
d = CDLL('blake.dll') #edit here your own dll or .so library
d.bl.restype = c_char_p

print '[+] Simple Test-vectors Blake hash function\n'
s = SystemRandom()
for x in permutations(printable):
p = ''.join(map(str,x))
q = list(p)
s.shuffle(q)
r= d.bl(''.join(map(str,q)))
if ((len(r)*2) != 0x80):
    print '\n[-] Not persistent value of 64 bytes was detected : %d'% len(r) 
    w = r.encode('hex')
    print w, '-->', len(w) 
    print '\n'
elif ((len(r)*2) == 0x80):
    print '\n',len(r), '\n',r.encode('hex')
    print '\n' 
```

因此，我将不胜感激对我上面的辅助 C 函数进行任何更正，以便稍后使用这个小的 Python 脚本测试向量调用，以便得到预期的输出值，非常感谢您！顺便说一句，上面是更新的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T02:39:12.247

函数结束时`BitSequence * bl(char *input)`，返回值`output`是一个局部变量，函数退出后将不存在。

# python - 需要与 PyKML 交互的 Python 库。需要一些关于 libxml2 和 libxslt 的指导

> ID：10215597
> 
> 赞同：0
> 
> 时间：2012-04-18T18:26:42.893
> 
> 标签：python, lxml, libxml2, libxslt, pykml

我正在自学 Python，多亏了当我遇到困难时得到的大力帮助，我对自己的进步感到满意。

我正在从事一个项目，该项目从多个 API 中检索一堆记录、数据挖掘地址、提取地理位置（使用 GeoPy），现在我想在 Google 地球中将它们可视化。

我想做的完美库是 PyKML。它看起来很简单，特别是因为我想在 PyKML 文档中重新创建“[环绕位置](http://packages.python.org/pykml/examples/tour_examples.html)”之旅，使我能够以编程方式创建 KML 文档。

我遇到的问题是 PyKML 依赖于 lxml，而 lxml 依赖于 libxml2 和 libxslt，我无法安装它们中的任何一个。

我不确定这些库的用途，我什至不知道我是否可以在我的机器上运行（我正在使用 Windows）。libxml2 和 libxslt 的文档让我特别困惑，因为其中提到了 C 语言和编译器。

谁能告诉我“安装”和测试 lxml、libxml2 和 libxslt 以与 Python 一起使用的正确方法是什么？是否有人知道其他允许以编程方式创建 KML 文档的 Python 库，并且最好不依赖于其他库？

在此先感谢您的帮助。干杯

* * *

**解决了**

我通过卸载 64 位版本的 Python for Windows 并安装 32 位版本解决了这个问题。

此外，我从这里为 Python 2.6 安装了 lxml 2.3 的 32 位二进制版本：

[http://pypi.python.org/pypi/lxml/2.3](http://pypi.python.org/pypi/lxml/2.3)

我认为问题在于 Python 2.6 64 的某些组件与 lxml 工作所需的所有库之间的不兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:07:55.997

但是，所有这些库都应该安装`easy_install`.

PyKML[文档](http://packages.python.org/pykml/installation.html)说

> 鉴于此，安装 pyKML 的第一步是让 lxml 在您的系统上运行。[有关如何安装 lxml](http://lxml.de/installation.html)的说明，请参阅 lxml 网站。

如果您使用的是类 unix 系统（包括 OS X），可能已经安装了 libxml2 和 libxslt，或者可以通过本机包管理器轻松安装。

**对于 windows**，lxml 提供了带有静态编译的 libxml2 和 libxslt 的预构建鸡蛋（如[lxml 安装文档](http://lxml.de/installation.html#ms-windows)中所述），因此您不需要*单独*安装它们。从 lxml 文档：

> 获取 easy_install 工具并以超级用户（或管理员）身份运行以下命令：

```
easy_install --allow-hosts=lxml.de,*.python.org lxml 
```

> 在 MS Windows 上，以上将安装我们提供的二进制构建。如果还没有最新版本的二进制构建，请在 PyPI 中搜索包含它们的最后一个版本，并将该版本传递给 easy_install。

看来最新版本是2.3，所以*只有在上面的命令不起作用的情况下*，尝试：

```
easy_install --allow-hosts=lxml.de,*.python.org lxml==2.3 
```

从您收到的错误消息`easy_install PyKML`中，听起来 easy_install 没有找到您安装的 lxml 包，并且正在尝试为 PyKML 安装它。您可以尝试使用 强制解决问题`easy_install --no-deps pykml`，这将忽略依赖项并仅安装 PyKML（这是一个简单的仅 python 库）。然后测试是否`import pykml`有效，如果有效，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:04:18.397

我通过卸载 64 位版本的 Python for Windows 并安装 32 位版本解决了这个问题。

此外，我从这里为 Python 2.6 安装了 lxml 2.3 的 32 位二进制版本：

[http://pypi.python.org/pypi/lxml/2.3](http://pypi.python.org/pypi/lxml/2.3)

我认为问题在于 Python 2.6 64 的某些组件与 lxml 工作所需的所有库之间的不兼容。

# php - 使用表单上传图片

> ID：10215599
> 
> 赞同：0
> 
> 时间：2012-04-18T18:26:46.053
> 
> 标签：php

我在用户使用此注册表单上传图片时遇到问题：

```
<?php
errors = array();
$missing = array();
// check if the form has been submitted
if (isset($_POST{'submit'}) && !empty($_FILES)){
    require_once('./classes/Ps2/Upload.php');
 try {
    $upload = new Ps2_Upload('my address');
    $upload->move();
    $messages = $upload->getMessages();
  }catch (Exception $e) {
    echo $e->getMessage();
  }

   $tmp_name = $_FILES['image']['tmp_name'];
   $type = $_FILES['image']['type'];
   $name = $_FILES['image']['name'];
  $size = $_FILES['image']['size'];
   $names = $_POST['names'];
   $number = $_POST['number'];
   $email = $_POST['email'];
   $seminar = $_POST['seminar'];
   $address = $_POST['address'];

$response = recaptcha_check_answer($private_key, $_SERVER['REMOTE_ADDR'],       $_POST['recaptcha_challenge_field'], $_POST['recaptcha_response_field']);
if (!$response->is_valid) {
$errors['recaptcha'] = true;
}
<? 
```

这是表单（至少是影响图像上传的部分）：

```
<form id="register" name="register" method="post" enctype="multipart/form-data" action="">
  <p>
  <fieldset><legend class="caption">Registration Details</legend>
    <p>
      <label for="image">Upload image photograph:
      <?php if ($missing && in_array('image', $missing)) { ?>
<span class="warning">Please pick your passport</span>
<?php } ?>
      </label>
    <input type="hidden" name="MAX_FILE_SIZE" value="<?php echo $max; ?>">
    <input name="image" id="image" type="file" value="image" tabindex="1">
      </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:37:24.560

如果您要做的是确保用户不会跳过选择要上传的文件，那么您可以使用 Javascript 进行检查：

```
<script type="text/javascript">
    function checkImage()
    {
        if (document.getElementById('image').value == "")
        {
            alert("Please select an image to upload.");
            return false;
        }

        return true;
    }
</script>

<form onsubmit="return checkImage()" ... > 
```

如果这不是你的意思，请澄清你面临的问题。

# javascript - 地理标签中的 jQuery 错误：a.getAttribute 不是函数

> ID：10215603
> 
> 赞同：1
> 
> 时间：2012-04-18T18:26:53.973
> 
> 标签：javascript, jquery

功能 setMarkers（地图、海滩、标题、商店信息）{

```
 for (var i = 0; i < beaches.length; i++) {

                ad = titles[i].toString();
                var  beache =  beaches[i].toString().split(',');
                lt = beache[0];
                lg = beache[1];
                var myLatLng = new google.maps.LatLng(lt,lg);
                j=i+1;
                var marker = new google.maps.Marker({ position: myLatLng,   map: map,  title:ad,  zIndex:j, icon: 'http://chart.googleapis.com/chart?chst=d_map_pin_letter&chld='+j+'|FC6355|000000&.png%3f'});

                google.maps.event.addDomListener(marker, 'mouseover', function (event) {

               var m =$(this).attr("zIndex"); //In this point,I am getting a error :"a.getAttribute is not a function"
                var html = "<p>My Store</p>" ; 
                html += "<p><i>"+storeinfo[m]+"</i></p>";
                html += "<p style='font-size:10px'>"+titles+"</p>";
                pixelCoordsCenter = map.getProjection().fromLatLngToPoint(event.latLng);
                showInfowWindow(html,pixelCoordsCenter,event);
                highlightedMarker = 1;
            });

             google.maps.event.addDomListener(marker, 'mouseout', function (event) {
                $("#mapPopup").hide();
            });
            }
        } 
```

你好，这里有问题吗：$(this).attr("zIndex"); 错误：a.getAttribute 不是函数请帮助我...

# c++ - 通过命令行设置 CPPFLAGS

> ID：10215604
> 
> 赞同：2
> 
> 时间：2012-04-18T18:26:55.797
> 
> 标签：c++, makefile

假设在我的makefile中我有

```
 program_INCLUDE_DIRS += ../inc 
   CPPFLAGS += $(foreach includedir,$(program_INCLUDE_DIRS),-I$(includedir)) 
```

现在我想在通过命令行运行 makefile 时包含一个名为 ../inc2 的目录（它位于我运行 makefile 的上方的一个目录）

我知道我应该将 ../inc2 目录设置为 CPPFLAGS。

请建议我通过命令行包含目录 ../inc2 的命令语法。我也不想覆盖makefile（上面的../inc）中包含的现有目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:45:56.317

`+=`手段`CPPFLAGS`被附加而不是被替换。这意味着您可以在 shell 中设置它，现有目录将被附加，如下所示：

```
export CPPFLAGS=-I../inc2
make 
```

如果您经常需要这样做，更好的解决方案是将您的 makefile 更改为：

```
program_INCLUDE_DIRS += ../inc ../inc2 
```

# xslt - 连接xsl中的两个字段

> ID：10215605
> 
> 赞同：1
> 
> 时间：2012-04-18T18:26:56.890
> 
> 标签：xslt

我有一些 xml 字段，我需要将所有字段连接到一个字段中

```
<fields>
<field name="first"><value>example</value></field>
<field name="last"><value>hello</value></field>
<field name="age"><value>25</value></field>
<field name="enable"><value>1</value></field>
<fields> 
```

我需要转换如下

```
<fields>
<field name="all"><value>example hello 25 1</value></field>
</field> 
```

使用 XSL 带空格分隔符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T23:10:16.363

**这个简短而简单（没有明确的条件指令）的 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <fields>
    <field name="all">
      <xsl:variable name="vfieldConcat">
        <xsl:for-each select="field/value">
          <xsl:value-of select="concat(., ' ')"/>
        </xsl:for-each>
      </xsl:variable>
      <value><xsl:value-of select=
         "normalize-space($vfieldConcat)"/></value>
    </field>
  </fields>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于所提供的 XML 文档时（针对格式正确进行了更正）：**

```
<fields>
    <field name="first">
        <value>example</value>
    </field>
    <field name="last">
        <value>hello</value>
    </field>
    <field name="age">
        <value>25</value>
    </field>
    <field name="enable">
        <value>1</value>
    </field>
</fields> 
```

**产生想要的正确结果：**

```
<fields>
   <field name="all">
      <value>example hello 25 1</value>
   </field>
</fields> 
```

* * *

**二、XSLT 2.0 解决方案**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <fields>
    <field name="all">
      <value><xsl:value-of select="field/value"/></value>
    </field>
  </fields>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果：**

```
<fields>
   <field name="all">
      <value>example hello 25 1</value>
   </field>
</fields> 
```

**解释：使用****[`separator`属性`xsl:value-of`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#value-of)**的默认值是一个空格这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:37:52.740

就像是：

```
...
<fields>
<field name="all">
    <value><xsl:apply-templates select="fields/field"/></value>
</field>
</fields>
...
<xsl:template match="field[value/text()]">
  <xsl:value-of select="value"/>
  <xsl:if test="position() != last()"><xsl:text> </xsl:text></xsl:if>
</xsl:template>
... 
```

# vba - 如何将当前目录指定为 VBA 中的路径？

> ID：10215606
> 
> 赞同：16
> 
> 时间：2012-04-18T18:27:03.753
> 
> 标签：vba, excel

我有一个启用宏的工作簿。我需要将启用宏的文件所在的当前文件夹指定为路径。我试过设置

```
path = ActiveWorkbook.Path 
```

*和*

```
path = CurDir() 
```

但这些都不适合我。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-18T19:04:12.690

如果您想要的路径是运行宏的工作簿的路径，并且该工作簿已保存，则

`ThisWorkbook.Path`

是你会使用的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T20:14:10.843

我以为我误解了，但我是对的。在这种情况下，它将`ActiveWorkbook.Path`

但主要问题不在这里。问题在于这两行代码

```
strFile = Dir(strPath & "*.csv") 
```

应该写成

```
strFile = Dir(strPath & "\*.csv") 
```

和

```
With .QueryTables.Add(Connection:="TEXT;" & strPath & strFile, _ 
```

应该写成

```
With .QueryTables.Add(Connection:="TEXT;" & strPath & "\" & strFile, _ 
```

# wcf-data-services - 有没有办法使用 SoapUI 测试 WCF 数据服务 (OData)？

> ID：10215607
> 
> 赞同：0
> 
> 时间：2012-04-18T18:27:06.577
> 
> 标签：wcf-data-services, odata, soapui

我希望能够针对我的 OData 服务运行一些 SoapUI 测试。

SoapUI 支持休息，我知道在核心，OData 就像一个休息服务。但我无法让 SoapUI 与 OData 一起使用。

我看过一些其他教程，但它们似乎不适合 OData 模型。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:28:52.353

我能够将我的一项服务加载到其中，以便我可以查看响应并弄乱请求标头。使用 SoapUI 4.0.0，我刚刚检查了新项目窗口上的 Add REST Service 选项，并将初始 WSDL/WADL 框留空。按照那里的提示，它应该可以工作。

为了导航它，我只是更改了服务端点。

# javascript - 模拟退格键功能以向上箭头键事件？

> ID：10215612
> 
> 赞同：2
> 
> 时间：2012-04-18T18:27:32.707
> 
> 标签：javascript, jquery, keyevent

当我按下向上箭头时，如何模拟退格键功能？

这是我到目前为止所拥有的，但它不起作用：

```
if ( e.keycode === 38 ) {
        e.preventDefault();
        $(e.target).trigger({
            type: "keypress",
            which: 8
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:33:00.663

### 描述

您可以使用 jQuery 的`keyup`方法来完成这项工作。据我了解，您想删除该字段中的最后一个字符。查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/qzhtE/3/)

### 样本

```
$("input").keyup(function(e) {
     if (e.which=== 38 ) {
        e.preventDefault();
        var value = $("input").val();
        var newValue = $("input").val().substring(0, value.length-1);
        $("input").val(newValue);
     }
});
​ 
```

### 更多信息

*   [jQuery.keyup()](http://api.jquery.com/keyup/) ​</li>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:29:37.270

出于安全原因，您不能在 Javascript/JQuery 中触发按键。想象一下，如果一个网站可以接管你的键盘？不是个好主意！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:37:20.900

主意：

也许您可以在 textarea 或其他东西上找到当前位置，并且在按下 upkey 时模拟退格键功能

这里说如何在文本输入中获取当前位置[插入符在文本区域中的位置，从一开始就以字符为单位](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)

# c# - 如何阻止我的 Visual Studio 构建从我的 bin 目录中清除 aws.xml？

> ID：10215613
> 
> 赞同：0
> 
> 时间：2012-04-18T18:27:36.647
> 
> 标签：c#, visual-studio-2010

我正在对我的项目进行清理和构建。在 bin 文件夹中有一个 AWSSDK.dll 和一个 AWSSDK.xml 文件。两者都包含在 cs proj 文件中，并且都添加到 SVN。真正奇怪的是，当我执行清理和构建时，我不明白为什么

1) AWSSDK.dll 文件没有被删除 2) AWSSDK.xml 被删除（如果上面不删除肯定不会被删除）。

我想我对 Visual Studio 如何决定在重新构建项目时从 bin 中清除哪些文件有一些普遍的困惑？

# c++ - 如何为指向 NULL 的指针赋值

> ID：10215615
> 
> 赞同：2
> 
> 时间：2012-04-18T18:27:47.387
> 
> 标签：c++

我有一个指向 null 的指针，我想给它赋值。但如果我尊重它，我会得到一个错误。我试过这个：

```
*nullPointer=value; 
```

但就像我说的，我得到一个错误。我怎样才能做到这一点？。我做不到

```
nullPointer=&value 
```

因为后来的值（它是一个对象）被删除并且 nullPointer 将指向无效的内存。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T18:30:20.477

一个指针必须指向一个有效的对象才能有意义，你有责任确保它指向的对象仍然有效。

如果它指向的对象在堆栈上，并且一旦其范围结束就变得无效您应该使用动态内存在堆上分配对象。但是，信息太少，无法知道您在做什么以及您是否需要在这里。

```
int *ptr = new int;
*ptr = value;
...
...
delete ptr; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:30:38.667

指针指的是内存 (RAM) 中的一个位置。当您有 a`null pointer`它指向 null 时，这意味着它没有指向内存中的位置。只要指针为空，它就不能用于存储任何信息，因为没有内存支持它。

要使用空指针，您必须首先分配内存，然后让指针指向新分配的内存。

```
*int p = null;    
*p = 10; //this won't work as there is no memory backing up this pointer
p = new int;
*p = 10; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:43:10.847

听起来您想要一个指向对象的指针，直到/除非该对象被删除，此时它再次大致像空指针一样 - 即，您至少可以检测到它不再指向任何东西.

如果是这种情况，您可能需要一个`weak_ptr`（在 C++11、TR1 和 Boost 中可用）。您将其与`shared_ptr`s 一起使用。当最后`shared_ptr`一个对象被销毁时，对象本身也将被销毁。之后，您可以检测到`weak_ptr`不再引用任何内容（[Boost 文档](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/weak_ptr.htm)等有更多详细信息）。

编辑：这是 Boost 文档中的一个示例`weak_ptr`：

```
shared_ptr<int> p(new int(5));
weak_ptr<int> q(p);

// some time later

// this will succeed *only* if at least one other reference to the pointee still exists.
if(shared_ptr<int> r = q.lock())
{
    // use *r
} 
```

# core-data - 核心数据金融应用数据模型

> ID：10215617
> 
> 赞同：0
> 
> 时间：2012-04-18T18:27:52.193
> 
> 标签：core-data, financial

我有一个关于在 iOS 上一个非常简单的个人财务应用程序中我应该为 Core Data 拥有哪些实体的问题。

我有一个“帐户”实体，其中包含许多“交易”实体，其中包含交易日期、金额、类别和收款人等详细信息。

我的问题是我应该如何模拟“转账”交易，其中交易将适用于多个账户，即从账户 A 借记并记入账户 B。

我了解复式记帐的原则，但这可能超出了我对这个应用程序的需要。我只是想要一种简单的方法来模拟 2 个帐户之间的转移？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:39:22.073

您将希望在 Transaction 和 Account 实体之间使用多对多关系。

# php - 将mysql数据库从开发导出并上传到生产

> ID：10215619
> 
> 赞同：1
> 
> 时间：2012-04-18T18:27:54.907
> 
> 标签：php, mysql

我正在对我的小型网站进行升级，主要包括向我的 mysql 数据库中添加 13 个表，每个表加载几行（类型代码和参考数据）。当我在生产中创建数据库并用一个表填充它时，我之前能够进行发布。

我通过 php mysql 管理工具（godaddy 的共享主机）手动创建了它，我想我可以再次做同样的事情，因为我的版本仍然很小。但是，我想知道将数据库上传到生产环境的最佳方式是什么。我希望能够根据一些参考表的内容拍摄数据库表的快照，并将它们通过 ftp 传输到生产环境并加载它们。而且，我想知道什么最适合用于更复杂的站点（我的站点将随着​​时间的推移而存在）并说明任何程序或触发器（我还没有）。

由于我的网站是实时的，我不想在它关闭时通过反复试验来解决这个问题，所以 . 提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:39:32.477

这是一个[图片教程](http://www.viiratech.com/tutorials/software/exporting-mysql-database-with-phpmyadmin.html)，说明如何使用 phpMyAdmin 执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:32:11.647

我想，你要找的是转储导入导出功能。Phpmyadmin 允许通过单击几个按钮来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:32:48.433

大多数托管公司都为您提供了一个接口来针对您的数据库执行 SQL 脚本。您可以编写一个脚本来创建您的表并将数据插入其中。

# java - jrat - java 分析失败

> ID：10215622
> 
> 赞同：1
> 
> 时间：2012-04-18T18:28:11.417
> 
> 标签：java, profiler

我跑：

```
~/dan/java/hello $ java -javaagent:shiftone-jrat.jar -cp '..' hello.hello 
```

并获得（在更长的跟踪输出中）：

```
Exception in thread "main" java.lang.VerifyError: Expecting a stackmap frame at branch target 35 in method hello.hello.main([Ljava/lang/String;)V at offset 14
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:488)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480) 
```

与 jrat 一起去，因为它似乎交钥匙。我愿意接受有关其他交钥匙、命令行 Linux 兼容分析器的建议。只需要知道非常简单的信息，即我的程序大部分时间都花在了哪些功能上，同时我会~~与这里建议的其他分析器一起玩，在那里~~添加大量打印语句，直到我意识到我的正则表达式很好并且我的流-> 字符串转换需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:43:20.833

你用的是JDK6还是JDK7。JDK7 为堆栈图帧添加了更多限制性检查，当字节码被不知道 JDK7 验证程序更改的工具（例如旧版本的 ASM）修改时，它们可能会导致此类错误。

# php - 2个相邻字段之间的差异 - 日期 - PHP MYSQL

> ID：10215627
> 
> 赞同：2
> 
> 时间：2012-04-18T18:28:20.733
> 
> 标签：php, mysql, loops

我有一张表格，日期格式为 yyyy-mm-dd。

我如何能够遍历此表并显示回声，例如“这些日期之间的 1 天”？

我知道如何使用它找到差异，但我不知道如何循环并从 mysql 表中获取差异

```
$interval = $newDate->diff($datetime2); //(http:www.php.net/manual/en/datetime.diff.php) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:42:01.070

为您的实现调整变量，但这应该遍历表。

```
<?PHP

    $db_handle = mysql_connect($server, $user_name, $password);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $SQL = "SELECT dte FROM tb_name";
        $result = mysql_query($SQL);

    while ($db_field = mysql_fetch_assoc($result)) {
        print date_diff($db_field['dte'], $datetime2) . "<BR>";
        $datetime2=$db_field['dte'];
    }

    mysql_close($db_handle);

}
else {
    print "Database NOT Found ";
    mysql_close($db_handle);
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:58:33.880

使用`DATEDIFF`MySql 函数：

```
SELECT DATEDIFF(first_date_column, second_date_column) FROM your_table 
```

手册中的描述：

> DATEDIFF(expr1, expr2) 返回 expr1 – expr2 表示为从一个日期到另一个日期的天数

或者`TIMEDIFF`如果这更适合您的需要，请使用：

> TIMEDIFF(expr1, expr2) 返回 expr1 – expr2 表示为时间值

# ruby-on-rails - 如何让 Rails 3.1 在开发模式下连接资产？

> ID：10215629
> 
> 赞同：9
> 
> 时间：2012-04-18T18:28:24.207
> 
> 标签：ruby-on-rails, asset-pipeline

我无法让资产管道连接（但不压缩！）开发中的资产。这个想法是，我可以停止为每个开发页面加载发出 70 多个对微小 css/js 文件的请求，但仍然可以查看行号，以便找出问题所在。

我`config/environments/development.rb`有这个，我将 rails 指南解释为应该将资产编译到一个文件中，而不是压缩：

```
config.assets.compress = false
config.assets.compile = true
config.assets.digest = false
config.assets.debug = false 
```

但没有骰子：资产仍然单独提供，而不是在 application.js 中连接。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T19:19:59.173

尝试添加`debug: false`到您的包含/链接标签

```
# in views/layouts/application.html.haml (or .erb, then use <%= %>)
= stylesheet_link_tag    "application", debug: false
= javascript_include_tag "application", debug: false 
```

无需重新启动应用程序！我希望你在改变你的`development.rb`;-) 之后不要忘记这样做。

告诉它是否适合您（因为您的设置使我的开发模式可以轻松连接 js/css-files）。

当然，只是作为临时解决方案。

# php - php if 语句的奇怪问题

> ID：10215631
> 
> 赞同：1
> 
> 时间：2012-04-18T18:28:32.950
> 
> 标签：php, mysql, if-statement

我想使用此页面来确定用户是否更新了时事通讯或创建了新的时事通讯。它连接到数据库没有问题并且会更新，但我无法让它插入一个新的，因为它给了我这个错误：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

如果我删除 if 语句并强制它插入一条新记录，它将毫无问题地工作。

任何建议将不胜感激，谢谢。

```
<?php
$server = "localhost";
$username = "user";
$password = "****";
$database = "test";

$con = mysql_connect($server, $username, $password);

$title = $_POST["title"];
$body = $_POST["body"];
$transaction = "Record Added";

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db($database, $con);

if(isset($_POST["id"]))
{
    $sql = "INSERT INTO newsletter (date, title, body)
    VALUES('1990-12-12', '$title', '$body')";       
}
else
{
    $id = $_POST["id"];
    $transaction = "Record Updated";
    $sql = "UPDATE newsletter SET title='".$title."', body='".$body."' WHERE newsletterId =".$id;   
}

if (!mysql_query($sql,$con))
{
    die('Error: ' . mysql_error());
}

echo $transaction;

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:31:49.650

您的逻辑似乎有缺陷，如果发布了 ID，您尝试插入，而当没有发布 ID 时，您尝试更新：

```
if(isset($_POST["id"]))
{
    $id = $_POST["id"];
    $transaction = "Record Updated";
    $sql = "UPDATE newsletter SET title='".$title."', body='".$body."' WHERE newsletterId =".$id;        
}
else
{
    $sql = "INSERT INTO newsletter (date, title, body)
    VALUES('1990-12-12', '$title', '$body')";   
} 
```

那就是你的错误来自哪里，你`$id`是空的。

除此之外，您应该查看 sql 注入。切换到准备好的语句是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:35:24.177

正确引用您的查询

```
$sql = "UPDATE newsletter SET title='".$title."', body='".$body."' WHERE newsletterId ='$id'"; 
```

# c# - LINQ 过滤包含的实体

> ID：10215633
> 
> 赞同：2
> 
> 时间：2012-04-18T18:28:37.247
> 
> 标签：c#, linq

我有这个**LINQ**

```
var userGroups = this.ObjectContext.UserGroups.Include("Users"); 
```

问题是，如果字段**IsActive**处于活动状态，我必须过滤“**用户**” 。

 **因此，我需要按**IsActive**所在的包含表“ **Users** ”的字段进行过滤。

 **我怎么能用 LINQ 做到这一点？

谢谢！

***_* __ *_* __ *_* __ *_* __ PS**

我尝试执行以下操作，但我不确定...

```
 var userGroups = this.ObjectContext.UserGroups;

 foreach (var userGroup in userGroups )
 {
     var ussers = this.ObjectContext.Users.Where(f => f.UserGroupID == item.ID && f.IsActive == true).ToList<User>();

     userGroup.Users = users;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:34:33.847

这是 linq-to-entities 吗？那么就不可能对预先加载的包含实体进行任何类型的过滤。[Ladislav Mrnka 在他最新的博](http://www.ladislavmrnka.com/2012/04/eager-loading-improvements-needed-in-ef/)文中写到了它。

当然可以使用 linq-to-objects 来处理加载到内存中的实体，但是如果您只想要一部分可用实体，那将是低效的。

一个 linq-to-objects 解决方案：

```
var userGroups = this.ObjectContext.UserGroups.Include("Users")
.Select(ug => new UserGroup {
Name = ug.Name,
// Copy all fields
Users = ug.Users.Where(u => u.Active)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:36:26.713

你能把这句话倒过来

```
var userGroups = this.ObjectContext.Users.Include("UserGroups").Where(f=>f.IsActive == true); 
```

然后在 UserGroups 字段上使用 GroupBy？****

# android - 网页到 Uri？

> ID：10215634
> 
> 赞同：0
> 
> 时间：2012-04-18T18:28:38.327
> 
> 标签：android, google-cloud-print

我正在努力将 Google Cloud Print 应用到我的 Android 应用程序中，但我不太了解 Uri 和 MimeTypes，这让我很难弄清楚我哪里出错了。我想打印一个包含 Html/Css/Javascript 的字符串数组。这是我当前的代码：

```
public void printScore(String[] pages) {

    Uri docUri = Uri.parse("<html><head><title>Hello</title></head><body>Hello, Printer!</body></html>");

//      for(int i = 0; i < pages.length; i++  ) {
//          docUri = Uri.parse("<html><head><title>Hello</title></head><body>Hello, Printer!</body></html>");       
//      }

    String docMimeType = "text/html";
    String docTitle = "My Web Pages";

    Intent printIntent = new Intent(this, PrintDialogActivity.class);
    printIntent.setDataAndType(docUri, docMimeType);
    printIntent.putExtra("title", docTitle);
    startActivity(printIntent);
} 
```

这根本行不通。我收到 Google Cloud Print 提示“缺少文档”。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:38:14.330

我不知道云打印 API，但[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)类似于`http://google.com`,`file:///sdcard/file.txt`等`content://sms/inbox/5`。

`Uri.parse`除非您将 Uri 作为字符串放入其中，否则将无法工作（或产生有意义的结果）。Mimetype 似乎没问题。

我的猜测是您应该将字符串保存到文件中并`Uri.fromFile(thefile)`用作`docUri`.

# c# - 如何转换为 IList 的子类型 来自列表

> ID：10215637
> 
> 赞同：1
> 
> 时间：2012-04-18T18:28:41.930
> 
> 标签：c#, .net, list

我已经设法使用我在 MSDN 上的另一个线程上找到的一些代码创建了自己的 IList 子类。我添加了一些我自己的方法，并在基本场景中测试了这个类，它似乎工作正常。

问题是当我尝试使用常规的 .ToList() 方法时，我返回了一个 List 而不是我的自定义 pList。显然我需要将它转换为我的新类型，但我不确定如何。我是否需要在我的自定义 iList 中实现另一种方法以允许为其分配不同的格式？

我的班级声明如下所示。

```
public class pList<T> : IList<T> 
```

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:33:02.253

我不确定您打算完成什么，但也许您可以添加以下代码：

```
// Constructor which handles enumerations of items
public pList(IEnumerable<T> items)
{
    // this.innerCollection = new Something(items);
} 
```

然后使用扩展方法：

```
public static class pListExtensions
{
    public static pList<T> ToPList<T>(this IEnumerable<T> items)
    {
        return new pList<T>(items);
    }
} 
```

稍后在您的代码中使用：

```
var items = (from t in db.Table
             where condition(t)
             select new { Foo = bar(t), Frob = t.ToString() }).ToPList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:31:06.000

您将无法将 a`List<T>`直接投射到`pList<T>`. 您可以制作一个扩展方法（就像`ToList`）。假设你的类有一个构造函数，它需要一个`IEnumerable<T>`来填充列表：

```
static class EnumerableExtensions
{
    static pList<T> ToPList<T>(this IEnumerable<T> sequence) { return new pList<T>(sequence); }
} 
```

如果您的类没有这样的构造函数，您可以添加一个，或者执行以下操作：

```
static class EnumerableExtensions
{
    static pList<T> ToPList<T>(this IEnumerable<T> sequence)
    {
        var result = new pList<T>();
        foreach (var item in sequence)
            result.Add(item);
        return result;
    }
} 
```

> 我的 pList 类确实有一个采用 IEnumerable 的构造函数添加了您的扩展方法，但我仍然无法在列表中看到 ToPList() 我错过了什么吗？

首先，如果你有这样一个构造函数，并且你想将一个现有的转换`List<T>`为一个`pList<T>`，你当然可以这样做：

```
List<T> originalList = GetTheListSomehow();
var newList = new pList<T>(originalList); 
```

要使用扩展方法，您必须确保该方法在范围内。我没有在我的示例中添加访问修饰符。放入`internal`或`public`放入，视情况而定：

```
public static class EnumerableExtensions
{
    internal static pList<T> ToPList<T> //... 
```

此外，如果您想在不同的命名空间中使用扩展方法，则必须`using`在范围内有一个指令。例如：

```
namespace A { public static class EnumerableExtensions { ... 
```

别处：

```
using A;
// here you can use the extension method

namespace B
{
    public class C
    {
        ... 
```

或者

```
namespace B
{
    using A;
    // here you can use the extension method

    public class C
    {
        ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:32:53.807

您还可以定义[隐式](http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx)强制转换。

```
public static implicit operator pList<T>(List<T> other)
{
     //Code returning a pList
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T18:33:20.817

您需要创建一个返回新列表类型的扩展方法

```
public static List<TSource> ToMyList<TSource>(this IEnumerable<TSource> source)
{
    if (source == null)
    {
        throw ArgumentNullException("source");
    }
    return new pList<TSource>(source);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T18:31:22.667

`IList<T>`是一个接口。不是一堂课。如果您将类视为 的实例`IList<T>`，则可以简单地回退而不是调用`ToList()`：

```
// assume you're working with IList<string> instance = new pList<string>()
pList<string> castedBack = (pList<string>)instance; 
```

# ruby-on-rails - 将表单发送到其内容的 url

> ID：10215642
> 
> 赞同：2
> 
> 时间：2012-04-18T18:28:57.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, rest

如果我有一个带有一个文本字段的表单，我可以以某种方式访问​​ url

```
/some/url/contents_of_form 
```

就像当用户在 text_field 中输入“google.com”并按“提交”时我进行域搜索一样，它会转到`/domain/google.com`然后路由分派 google.com 和………… whois 显示给用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:17:56.990

在您放置的 routes.rb 文件中

```
resource domain, :only => [] do
  get search_form
  get search
end
match 'domain/:location_name' => 'domains#whois' 
```

在 app/controllers/domains_controller.rb

```
class DomainsController < ApplicationController
  def search_form
    #serve search form with text field.  Text field has name="location"
  end

  def search
    redirect_to "domain/#{params[:location]}"
  end

  def whois
    @location = params[:location]
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:32:54.727

您可以从 javascript 更改 window.location.href：[http ://www.ezineasp.net/post/Javascript-Window-Location-Href-URL.aspx](http://www.ezineasp.net/post/Javascript-Window-Location-Href-URL.aspx)

# firefox-addon - 如何从firefox插件执行windows命令？

> ID：10215643
> 
> 赞同：5
> 
> 时间：2012-04-18T18:29:14.270
> 
> 标签：firefox-addon, executable, launching-application

如何使用 firefox 插件执行 windows 命令并显示其输出？

例如：ping www.stackoverfow.com

我只是想通过执行打包在一起的二进制文件（或）可执行文件或运行 windows 命令来探索更多的 firefox 插件开发。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T19:22:55.567

您将为此使用[nsIProcess](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIProcess)。在您的情况下，事情变得更加复杂，因为您不知道要运行哪个应用程序 - 通常会`c:\windows\system32\ping.exe`，但您不能确定。如果您不想自己解析`PATH`环境变量，可以让命令行 shell 为您完成：

```
Components.utils.import("resource://gre/modules/FileUtils.jsm");

var env = Components.classes["@mozilla.org/process/environment;1"]
                    .getService(Components.interfaces.nsIEnvironment);
var shell = new FileUtils.File(env.get("COMSPEC"));
var args = ["/c", "ping stackoverflow.org"];

var process = Components.classes["@mozilla.org/process/util;1"]
                        .createInstance(Components.interfaces.nsIProcess);
process.init(shell);
process.runAsync(args, args.length); 
```

供参考：[`COMSPEC`环境变量](http://en.wikipedia.org/wiki/ComSpec)，[nsIEnvironment](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIEnvironment)。

请注意，您无法从该过程接收数据，您只能在它完成时收到通知并了解它是否失败。如果要获取命令的输出，则必须将输出重定向到文件（`ping stackoverflow.org > c:\\temp\\foo.txt`通过 shell 运行命令）并随后读出该文件。

# php - 为给定月/年的每一天创建文本输入行

> ID：10215644
> 
> 赞同：0
> 
> 时间：2012-04-18T18:29:24.673
> 
> 标签：php, javascript, html

在我的网页中，我试图合并一个 JavaScript 日历，然后当用户选择月份和年份（通过下拉菜单）时，会在表中为该月份的每一天创建行。然后，这些行旁边将有文本输入框，仅允许数值。验证不是问题，它为该月的每一天创建行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:59:40.510

这可以使用 Javascript 来完成。创建一个确定一个月天数的方法：*（1 = 一月，2 = 二月...）*

```
function daysInMonth(month, year) {
    return new Date(year, month, 0).getDate();
} 
```

在下拉列表中选择年份和月份时，运行一个循环，为该月的每一天添加一个表格行。

```
var year = document.myForm.listYear.value;   // Value of year dropdown (ex 2012).
var month = document.myForm.listMonth.value; // Value of month dropdown (1-12).
var table = document.getElementById('myTable');   // Table element.

var numDays = daysInMonth(month, year);
for(var i = 0; i < numDays; i++) {
    table.innerHTML += '<tr><td>' + (i+1) + '</td><td><input type="text" name="day[]" /></td></tr>';
} 
```

# php - PHP PDO 访问问题

> ID：10215645
> 
> 赞同：1
> 
> 时间：2012-04-18T18:29:27.700
> 
> 标签：php, pdo

我目前有一个数据库调用，它可以在一个区域工作，但不能在另一个区域工作。

我的数据库类被标记为 $database 并将`$db`PDO 对象传递给数据库构造函数。

这一切都很好。

此代码调用有效

```
$user_info = $database->get_user($user); 
```

这个函数被称为

```
public function get_user($user){
        $user = $this->db->quote($user);
        $query = "SELECT * FROM login where username = $user";
        $user = $this->db->query($query);
        $user_info = $user->fetch();
        return $user_info;} 
```

这将按预期返回用户信息

另一个电话是

```
 $user = $database->confirm($confirm);
        $user_info = $database->get_user($user); 
```

确认函数如下所示

```
 public function confirm($confirm){
        $confirm = $this->db->quote($confirm);
        $query = "SELECT * FROM temp_data WHERE hash = $confirm;";
        $count = $this->db->query($query);
        $info = $count->fetch();

        $user = $info['username'];
        $user = $this->db->quote($user);
        $query = "DELETE FROM temp_data WHERE username = $user;";
        $this->db->exec($query);
        $query = "UPDATE login SET confirm = '1' WHERE  username = $user;";
        $this->db->exec($query);
        return $info['username'];} 
```

这个电话完美地工作。

它以不带引号的格式返回用户名，`get_user`接受

然而`get_user`失败

我已经完成了故障排除，发现问题是下面的行`get_user`没有返回任何 PDO 对象，或者根本没有返回任何数据

```
$user = $this->db->query($query); 
```

这是有趣的部分。我做了一个尝试捕获，PDO 没有抛出任何 PDO 异常，它甚至没有抛出一般异常。错误日志中没有错误。它似乎不起作用。我已经逐步使用`Print_r`,`get_class`和 `echo`a`die;`来输出我的结果，这一切都可以正常工作，直到我进行第二次数据库调用。fetch 正在返回一个错误，但这只是因为 exec 似乎根本没有运行

我确实尝试`unset()`在所有东西上使用，但我的主数据库连接在创建时创建并传递到我的数据库对象中

这是脚本运行时发生的情况

1.  用户点击带有随机哈希的链接
2.  系统从 GET 中获取哈希值，然后使用它从临时数据库中提取用户名。
3.  然后将用户修改为已确认，删除临时条目，然后返回用户名
4.  然后从这里调用`get_user`. 在这种情况下，它只是返回用户信息来设置 twilio 子帐户。这是系统出现故障的地方
5.  之后会发生什么（它确实尝试从我的测试中做，因为我在这里遇到错误）是它访问 twilio API，获取子帐户 AUTH 和 SID 令牌并将其写入用户文件
6.  然后新用户被重定向到登录页面

我曾尝试使用关闭光标，但没有奏效。

如果有人可以让我深入了解我遇到的问题，或者我做错了什么，我将不胜感激。我是使用 PDO 对象的新手，所以我确信我在某个地方犯了一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:50:09.827

我能够从 PHPFreaks IRC 频道的一个好人那里得到答案。

```
public function get_user($user){
        $stmt = $this->db->prepare('SELECT * FROM login where username = :u');
        $stmt->bindValue(':u', $user);
        $stmt->execute();

        $user_info = $stmt->fetch();
        $stmt->closeCursor();

        return $user_info;
}

public function confirm($confirm){
        $stmt = $this->db->prepare('SELECT * FROM temp_data WHERE hash = :h');
        $stmt->bindValue(':h', $confirm);
        $stmt->execute();
        $info = $stmt->fetch();
        $stmt->closeCursor();

        $stmt = $this->db->prepare('DELETE FROM temp_data WHERE username = :u');
        $stmt->bindValue(':u', $info['username']);
        $stmt->execute();

        $stmt = $this->db->prepare('UPDATE login SET confirm = '1' WHERE  username = :u');
        $stmt->bindValue(':u', $info['username']);
        $stmt->execute();

        return $info['username'];
} 
```

# php - 删除不允许使用 href 的链接

> ID：10215647
> 
> 赞同：0
> 
> 时间：2012-04-18T18:29:31.850
> 
> 标签：php, regex, dom

我有一些这样的链接：

```
<a href="http://illegallink.com"><img src="something.jpg" /><a href="http://legallink.com">legal</a></a> 
```

我想删除所有**没有**“legallink.com”的链接。但**仍然**保留内容。所以上面的输入会输出：

```
<img src="something.jpg" /><a href="http://legallink.com">legal</a> 
```

它应该通过链接递归地工作。

我发现这个删除**所有**链接的正则表达式：`/<\\/?a(\\s+.*?>|>)/`，但我希望它保留 href 是 legallink.com 的链接。

这可以用正则表达式完成吗？还是应该使用 DOM 解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:29:51.357

```
error_reporting(~0); display_errors(1);

$code = '<a href="http://illegallink.com"><img src="something.jpg" /><a href="http://legallink.com">legal</a></a>';

$document = new DOMDocument(); 
$document->loadHTML($code); 
$parser = new DOMXPath($document);  

foreach($parser->query("//a") as $node)  
{ 
  if (!preg_match("/^http:\/\/legallink.com/i", $node->getAttribute("href")))
  {
    $node->parentNode->replaceChild($node->nodeValue, $node);
  }
}
echo $document->saveXML(); 
```

# android - 在异步任务之后返回活动？

> ID：10215649
> 
> 赞同：0
> 
> 时间：2012-04-18T18:29:38.933
> 
> 标签：android, android-asynctask

我想禁用我的视图并在从 asynctask 返回后显示一个警报对话框，我从后台线程得到一些结果，基于此我必须禁用我的所有视图 - 按钮和 textview 并希望显示一个警报对话框！！是否可以？？？以及我该如何处理？？？？PLz 回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:32:16.700

在`onPostExecute`方法中你可以做到......并且它在 `doinBackground(...)`.

`btn.setVisibility(View.GONE)`/// 隐藏任何视图,view.setVisibility(View.GONE);

并在此方法中创建 AlertDialog 之后...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:37:59.193

`onPostExecute`将在主线程上运行，并且可以在您的 Activity 中调用方法或直接调整 UI，就像您通常在 Activity 中一样。

如果您`AsyncTask`不是 Activity 的内部类并且没有对 Activity 对象的引用，则可以在 Activity 中注册一个意图侦听器，当接收到正确的意图时将调整您的 UI。广播你的意图`AsyncTask`

# parsing - yacc (bison) 解析树无序打印

> ID：10215654
> 
> 赞同：0
> 
> 时间：2012-04-18T18:30:04.517
> 
> 标签：parsing, tree, bison, yacc

我有一个语法示例，其中一个符号可以采用不同的值

```
StatementList : Statement RepeatStatementList { $$=insert_statement_list($1, $2); }
                ;

RepeatStatementList : RepeatStatementList SEMICOLON Statement { $$=insert_repeat_statement_list($1, $3); }
        | { $$ = NULL; }
                    ;

Statement : NUMBER { $$=insert_statement(NULL, $1); }
            ;

Statement : ID { $$=insert_statement($1, NULL); }
; 
```

我定义了结构和插入如下：

```
struct statement_list_
{
    st* s;
    struct rstlist *r;

} stlist;

struct repeat_statement_list_
{
    st* s;
    struct repeat_statement_list_ *next;
} rstlist;

struct statement_
{
    char *id;
    int number;

} st;

stlist* insert_statement_list(rstlist *r, st* s)
{
    stlist* l = (stlist*)malloc(sizeof(stlist));
    l->s = s;
    l->r = r;

    return l;
} 

rstlist* insert_repeat_statement_list(rstlist *next, st *s)
{
    rstlist* l = (rstlist*)malloc(sizeof(rstlist));
    l->s = s;
    l->next = next;

    return l;
}

st* insert_statement(char* id, int n)
{
    st* l = (st*)malloc(sizeof(st));
    l->id = id;
    l->number = n;

    return l;
} 
```

我遇到的问题是，如果我传递如下输入：

```
id1
1
2
3
id2 
```

我在访问项目方面得到的是：

```
id1
1
id2
3
2 
```

我的结构有什么问题？

请记住，这是一个示例，因此可以忽略丢失或错放的分号或括号。:-)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:26:38.260

insert_repeat_statement_list 需要将语句附加到现有 rstlist 的末尾，而不是将其添加到列表的开头。

insert_statement_list 将 a`rstlist *`作为其第一个参数，将 a`st *`作为第二个参数，但是您在调用它时将这些参数类型颠倒了。这应该会给你一个编译错误，除非你的`%type`声明（你没有显示）被搞砸了（如果他们搞砸了，一切都可能行为不端。）

# r - 如何更改 ggplot 图上直接标签的文本大小？

> ID：10215656
> 
> 赞同：3
> 
> 时间：2012-04-18T18:30:13.417
> 
> 标签：r, ggplot2, direct-labels

我正在尝试使用[directlabels将标签应用于套索图，如此](http://directlabels.r-forge.r-project.org/)[处](http://directlabels.r-forge.r-project.org/docs/lineplot/plots/lars.html)所示。我可以将标签放在页面上，但无法更改大小。在列表中传递其他参数允许我更改其他元素，但不能更改文本大小。

```
require(ggplot2)
require(directlabels)
dat_test <- data.frame(x=1:10, value=c(sin(1:10), cos(1:10), tan(1:10)), fun=rep(c('sin', 'cos', 'tan'), each=10))
p <- ggplot(dat_test, aes(x=x, y=value, group=fun, colour=fun)) + geom_line()

direct.label(p, 'last.qp') # adds labels
direct.label(p, list('last.qp', size=2)) # does not work, same as above
direct.label(p, list('last.qp', rot=30)) # correct rotates text 
```

是否可以更改直接标签的文本大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T20:20:10.760

利用：

```
direct.label(p, list('last.qp', cex=2)) 
```

# php - 多维数组中的计数值

> ID：10215659
> 
> 赞同：10
> 
> 时间：2012-04-18T18:30:21.693
> 
> 标签：php, arrays, foreach, counting

我目前有以下数组：

```
Array(
        [0] => Array
            (
                [user] => Name 1
                [group] => 1
            )
        [1] => Array
            (
                [user] => Name 2
                [group] => 1
            )
        [2] => Array
            (
                [user] => Name 3
                [group] => 2
            )
        [3] => Array
            (
                [user] => Name 4
                [group] => 2
            )
        [4] => Array
            (
                [user] => Name 5
                [group] => 3
            )
) 
```

我正在尝试创建一个以各种`group`值作为键的新数组，然后计算每个组中有多少个以给出以下内容：

```
Array
(
    [1] => 2
    [2] => 2
    [3] => 1
) 
```

我尝试使用以下内容，但是收到未定义的索引警告：

```
$newArr = array();
foreach ($details['user_groups'] as $key => $value) {
        $newArr[$value['user_groups']]++;
} 
```

（我确实检查了其他答案，但是找不到尝试这样做的答案）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T18:34:46.997

这可以通过简单的迭代来完成：

```
$counts = array();
foreach ($array as $key=>$subarr) {
  // Add to the current group count if it exists
  if (isset($counts[$subarr['group']]) {
    $counts[$subarr['group']]++;
  }
  // or initialize to 1 if it doesn't exist
  else $counts[$subarr['group']] = 1;

  // Or the ternary one-liner version 
  // instead of the preceding if/else block
  $counts[$subarr['group']] = isset($counts[$subarr['group']]) ? $counts[$subarr['group']]++ : 1;
} 
```

### PHP 5.5 更新

在 PHP 5.5 中，添加了[`array_column()`](http://us2.php.net/manual/en/function.array-column.php)从 2D 数组聚合内部键的功能，这可以简化为：

```
$counts = array_count_values(array_flip(array_column($array, 'group'))); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-19T06:32:39.097

这可以通过一个简单的`array_map`函数来完成

```
$array = array_map(function($element){
    return $element['group'];
}, $array1);

$array2 = (array_count_values($array));

print_r($array2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:00:02.623

您最初的尝试很接近。您只是在循环中使用了错误的键：

```
$newArr = array();
foreach ($details['user_groups'] as $key => $value) {
        // What you were using:
        // $newArr[$value['user_groups']]++;

        // What you should be using:
        $newArr[$value['group']]++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T10:28:49.133

试试这个简单但有效的方法

```
$count = call_user_func_array('array_merge_recursive', $Array);
echo count($count['user']).'<br>';
echo count($count['group']).'<br>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-25T06:55:47.777

```
$output = array();
  foreach($data as $key => $value){
    $output[$value['group']]['count']++;
}

$final = array();
foreach($output as $key => $value){
    $final[$key] = $value['count'];    
}

print_r($final); 
```

```
//out put result:=========
Array(
    [1] => 2
    [2] => 2
    [3] => 1
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-09T21:09:11.063

您只需要两次本机函数调用即可完成此任务。用 隔离所需的数据列`array_column()`，然后用 计算出现次数`array_count_values()`。这是我在我的一个项目中编写此任务的唯一方法。

使用的额外好处`array_column()`是，如果您的某些子数组不包含目标列键，则不会生成通知/警告。如果您要使用常见的循环技术或`array_map`/`array_walk()`代替，您可能需要编写条件检查以防止出现通知/警告。

代码：（[演示](https://3v4l.org/qflh2)）

```
$array = [
    ['user' => 'Name 1', 'group' => 1],
    ['user' => 'Name 2', 'group' => 1],
    ['user' => 'Name 3', 'group' => 2],
    ['user' => 'Name 4', 'group' => 2],
    ['user' => 'Name 5', 'group' => 3],
];

var_export(
    array_count_values(array_column($array, 'group'))
); 
```

输出：

```
array (
  1 => 2,
  2 => 2,
  3 => 1,
) 
```

# jpa - playframework 多态关联工作流程

> ID：10215660
> 
> 赞同：0
> 
> 时间：2012-04-18T18:30:25.647
> 
> 标签：jpa, playframework, polymorphism

我需要帮助以使一个模型属于任何其他模型，多态方式？作为一个例子，我想使用评论模型，它可以属于用户、帖子和其他一些实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:00:04.047

我认为你应该通过 play 的[基本教程](http://www.playframework.org/documentation/1.2.4/home#guide)来证明这一点。

# regex - 将属性添加到具有特定值的属性的元素

> ID：10215662
> 
> 赞同：1
> 
> 时间：2012-04-18T18:30:35.477
> 
> 标签：regex, c#-4.0

我正在寻找一个正则表达式，它将向已经具有具有特定值的属性的元素添加属性。

例如：

```
<meta name="stack" /> 
```

我想向具有属性 name="stack" 的 meta 元素添加一个属性，使其看起来像

```
<meta name="stack" value="overflow" /> 
```

一些用于匹配和替换的 C# 代码也会有所帮助。

由于输入中的 xml 格式错误，我无法使用 XmlDocument 或 HtmlAgilityPack。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:46:00.143

```
(<\s*meta\s+name\s*=\s*"stack")(\s*/>) 
```

用。。。来代替

```
$1 value="overflow" $2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:41:46.307

从以下正则表达式开始...

```
<meta[^>]+name="stack" 
```

并替换为...

```
$0 value="overflow" 
```

替换字符串中的`$0`代表整个匹配。然后你只是附加`value="overflow"`到它的末尾。

这是一个工作示例...

[http://regexhero.net/tester/?id=586c2040-8700-4ea2-a146-1477ca1bcb62](http://regexhero.net/tester/?id=586c2040-8700-4ea2-a146-1477ca1bcb62)

只需单击 Regex Hero 顶部的“.NET”按钮即可查看 .NET 代码。或者这里有一个简化版本...

```
return Regex.Replace(text, @"<meta[^>]+name=""stack""", @"$0 value=""overflow"""); 
```

# javascript - 我注意到我倾向于在 JavaScript/jQuery 中创建 DOM 对象并附加它们。这可以吗，还是我应该在 HTML 中创建它们？

> ID：10215667
> 
> 赞同：0
> 
> 时间：2012-04-18T18:30:50.167
> 
> 标签：javascript, jquery, html

我一直在开发一个应用程序，我注意到我倾向于在 JavaScript/jQuery 中创建 DOM 对象，然后像这样执行 appendTo('body') ：

```
$list = $('<ul/>', {
    id : "thelist",
    class : "listclass"
}
$list.appendTo('body');
$list.html(whateverAjaxStuff); 
```

我的页面源最终只是一个带有空主体标签的头部。

我只是想知道这种方法是否有任何优点/缺点。我应该在 HTML 中构建基本框架，然后只用 JavaScript 操作 innerHTML 吗？想法？

编辑：想澄清。我只对必须动态生成的东西进行此操作。$list 元素使用 AJAX 加载，用户选择填充另一个列表，等等。

[如果有人仍然感兴趣，请链接](http://tidehousedesign.com/alchemy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:33:31.637

最好将任何 HTML 放在 HTML 中，而不是 JQuery 中:)。

使用 JQuery 实际构建页面这一事实的不必要开销远远超过了在 JQuery 中构建页面所获得的任何好处，尽管我目前想不出任何好处:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:39:36.667

最终，这取决于您的用例。使用 jQuery 会降低性能，但很可能您实际上并没有注意到它。对于许多 DOM 更改，这变得更加重要。如果首先在 jQuery 中执行此操作对您来说快速/容易，那么请务必使用它，然后看看它是否足够快以适合您的场景。如果不是，您可以返回并根据需要进行更改。

一般的经验法则是 - 尽可能少地修改 DOM，因为每次都会导致文档重排。jQuery 可以在幕后隐藏很多操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:48:35.333

我不认为上面的其他答案真的足以说服你为什么绝对不应该做你现在正在做的事情。有很多理由**不**这样做；

1.  SEO（搜索引擎优化）
2.  速度
3.  禁用 Javascript 的浏览器
4.  WYSIWYG 编辑器（这可能会大大加快您的开发速度，并且它们不会与您的方法一起使用）
5.  调试和获得帮助要容易得多 - 如果您使用上面的代码在 Stackoverflow 上寻求帮助，很少有人会帮助您。
6.  让我们再次提一下速度 - 重要的是尽量减少在显示任何内容之前需要发生的处理量，具有大量 JS 处理（广告等）的网站在慢速计算机上浏览非常痛苦。

我想不出任何理由使用 jQuery 构建所有页面，您似乎正在尝试模拟服务器端发生的事情（Ruby、ASP.net、PHP 等）

您可能想从 JS 编辑 DOM。但是完全从头开始构建它是一个*非常*糟糕的主意！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T18:38:55.640

除了创建一个重载页面外，它还阻止禁用 JavaScript 的用户访问该页面，他们将看到一个空白页面。

# objective-c - UILabel 中数值的对齐方式

> ID：10215668
> 
> 赞同：2
> 
> 时间：2012-04-18T18:30:50.183
> 
> 标签：objective-c, ios, uilabel, nsnumber

我有一个带有自定义 UITableViewCells 的 UITableView。

这些单元格中的每一个都有六个 UILabel，其中显示了数值（请参阅下面的屏幕截图）。

不幸的是，最后一行中的数值没有正确对齐。让它们右对齐也无济于事。正确的对齐方式应该是“，”逗号。

如何在 iOS 中以逗号对齐数值？你有什么想法？

![在此处输入图像描述](../Images/3acd19a25b5bc76b3b2aa5cdaa8ba664.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:54:08.137

使用像 Courier 这样的固定宽度字体的右对齐。

# java - 在java中设计一个简单的用户偏好对象？

> ID：10215670
> 
> 赞同：0
> 
> 时间：2012-04-18T18:30:57.920
> 
> 标签：java, oop, design-patterns

我想设计一个简单的用户偏好对象及其层次结构。它应该是这样的

```
preference
   String Name
   Object Value

booleanPreference
   String Name
   Boolean Value 
```

……

就这样继续下去。偏好类型因班级而异。我将如何实现这样一个简单的设计“抽象类/接口/”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:34:00.833

从一个界面开始：

```
public interface Preference<T>  {
    String getName();
    T getValue();
} 
```

实现可能看起来像这样（不确定通用；没有编译检查）：

```
public class PreferenceImpl implements Preference<T> {
    private final String name;
    private final T value;

    public PreferenceImpl(String name, T value) {
        this.name = name;
        this.value = value;
    }

    public String getName() { return this.name; }
    public T getValue() { return this.value; }
} 
```

# vb6 - .vbp 文件中列出的所有模块是否对同一文件中列出的所有其他 .frm 模块可见？

> ID：10215675
> 
> 赞同：1
> 
> 时间：2012-04-18T18:31:14.113
> 
> 标签：vb6

我是 VB6 的新手。我碰巧打开了一个 .vbp 文件，发现它包含一个项目列表，例如

```
 Form=ABC.frm
  Module=PQR; PQR.bas
  Class=clsXYZ; XYZ.cls 
```

我的问题是，这是否意味着模块 PQR 和 clsXYZ 对 ABC 可见并且可以访问它们的公共变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:11:56.090

表格 ABC 可以看到模块 PQR，但它只能访问范围为公共（或“更糟”，全局）的变量或函数。Form ABC 将能够实例化类 clsXYZ 的对象。

# google-app-engine - 为 App Engine NDB 模型指定 key_name 的最佳方法是什么？

> ID：10215676
> 
> 赞同：8
> 
> 时间：2012-04-18T18:31:17.567
> 
> 标签：google-app-engine, app-engine-ndb

我正在尝试创建一个 ndb 模型，其中每条记录都有一个唯一的字段“名称”。我想将此字段定义为 key_name 字段并使用它来查找记录。我是否必须包含一个名称字段，或者我可以以某种方式将 key_name 字段设置为用户可以指定的任意字符串，只要它是唯一的？

我正在考虑使用 Model.get_or_insert 来确保旧记录不会被覆盖，但是有没有办法判断返回值是新创建的还是预先存在的？如果用户输入了重复的名称，我希望能够显示错误消息。

最后，我尝试在使用上述 ndb 模型作为元类的 DjangoForms 模型上创建一个 key_name 字段，因此我可以使用 djangoforms 进行验证/渲染，但由于某种原因，我定义的字段没有显示。

类 UserProfileForm(djangoforms.ModelForm): key_name = djangoforms.StringProperty() 类 Meta: 模型 = UserProfile

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T19:16:16.587

> 我是否必须包含一个名称字段，或者我可以以某种方式将 key_name 字段设置为用户可以指定的任意字符串，只要它是唯一的？

您可以将您的唯一键名作为`id`参数传递给模型构造函数：`profile = UserProfile(id='my_unique_name')`。

> 我正在考虑使用 Model.get_or_insert 来确保旧记录不会被覆盖，但是有没有办法判断返回值是新创建的还是预先存在的？如果用户输入了重复的名称，我希望能够显示错误消息。

使用`Model.get_by_id()`. 它将返回一个模型实例，或者`None`如果找不到模型：

```
profile = UserProfile.get_by_id('my_unique_name')
if profile:
    # display error message saying that the user already exists. 
```

> 最后，我尝试在使用上述 ndb 模型作为元类的 DjangoForms 模型上创建一个 key_name 字段，因此我可以使用 djangoforms 进行验证/渲染，但由于某种原因，我定义的字段没有显示。

我不知道 DjangoForms 是如何工作的，但很可能它们与 NDB 不兼容。您将需要创建自己的验证逻辑。

# mysql - 需要将 MySQL 查询修改为不允许重复条目到表中

> ID：10215677
> 
> 赞同：5
> 
> 时间：2012-04-18T18:31:19.853
> 
> 标签：mysql, duplicates

首先，我对 MySQL 非常陌生，并且我在尝试学习它。

我有一个在页面加载时运行的脚本，它检索联合类型数据并将其添加到 MySQL 数据库表中。

我要做的就是将找到的新数据添加到数据库表中，而不添加从前一页加载中找到的重复数据。

我的数据库表如下：

```
// Creates a Database Table only if the Table does not already exist
        mysql_query("CREATE TABLE IF NOT EXISTS $TableName(
          id INT NOT NULL AUTO_INCREMENT,
          PRIMARY KEY (id),
          Field_2    varchar(255) NOT NULL default '',
          Post_Date  int(11) NOT NULL default '0',
          Field_4    varchar(10) NOT NULL default '',
          Field_5    varchar(12) NOT NULL default '',
          Field_6    longtext NOT NULL default '',
          Field_7    longtext NOT NULL default '',
          Field_8    longtext NOT NULL default '') ") or die(mysql_error()
        ); 
```

有一个索引，如下所示：

```
Action     Keyname  Type  Unique Packed Column Cardinality Collation Null Comment
Edit Drop  PRIMARY  BTREE Yes    No     id     830         A 
```

Post_Date字段**始终**是唯一的（UNIX 格式），因此可用于确定重复项。

我目前正在使用以下代码将数据输入到数据库表中，然后删除重复项：

```
// Enter the $sql Data into the MySQL Database Table
     mysql_query("INSERT INTO $TableName (id, Field_2, Post_Date, Field_4, Field_5, Field_6, Field_7, Field_8) VALUES ".implode(',', $sql));
// Removes Duplicates from the MySQL Database Table based on the 'Post_Date' field
     mysql_query("Alter IGNORE table $TableName add unique key (Post_Date)");
// Deletes the added index key created by the Removes Duplicates function
     mysql_query("ALTER TABLE $TableName DROP INDEX Post_Date"); 
```

问题是如果网页被多次点击并导致创建许多索引，则 DROP INDEX 查询将失败。

虽然我有一个删除附加索引的解决方案，但其他用户告诉我要完全避免这种方法并尝试另一种类似于 INSERT ... ON DUPLICATE KEY UPDATE [http://dev.mysql.com/doc/refman/的方法5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

但我不知道如何构建查询以使其工作。

我做了研究，发现以下网页说明了如何将数据输入到没有重复的表中：[http ://www.tutorialspoint.com/mysql/mysql-handling-duplicates.htm](http://www.tutorialspoint.com/mysql/mysql-handling-duplicates.htm)

该网页说明了这个例子：

```
mysql> INSERT IGNORE INTO person_tbl (last_name, first_name) -> VALUES( 'Jay', 'Thomas'); 
```

但我不知道如何修改我的查询代码以使其工作。

我尝试将 IGNORE 添加到查询中，但它也允许重复条目进入表：

```
mysql_query("INSERT IGNORE INTO $TableName (id, Field_2, Post_Date, Field_4, Field_5, Field_6, Field_7, Field_8) VALUES ".implode(',', $sql)); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:44:34.010

放置您的唯一索引以防止重复记录，并通过添加忽略关键字来执行插入查询，以免出现错误（如果您的插入重复）表示文档化，您可以这样做。

> 如果您将一条记录插入到与定义该索引的一个或多个列中的现有记录重复的表中，则表中存在唯一索引通常会导致发生错误。
> 
> 使用 INSERT IGNORE 而不是 INSERT。如果一条记录不复制现有记录，MySQL 照常插入它。如果记录是重复的，则 IGNORE 关键字告诉 MySQL 静默丢弃它而不产生错误。

编辑：

在 sqlfiddle 检查示例：

[http://sqlfiddle.com/#!2/4ad8a/3](http://sqlfiddle.com/#!2/4ad8a/3)

编辑2：

```
CREATE TABLE IF NOT EXISTS TestTable(
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `Field_2` VARCHAR(255) NOT NULL DEFAULT '',
    `Post_Date` INT(11) NOT NULL DEFAULT '0',
    `Field_4` VARCHAR(10) NOT NULL DEFAULT '',
    `Field_5` VARCHAR(12) NOT NULL DEFAULT '',
    `Field_6` LONGTEXT NOT NULL,
    `Field_7` LONGTEXT NOT NULL,
    `Field_8` LONGTEXT NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE INDEX `Post_Date` (`Post_Date`)
) 
```

# c# - 检测请求是来自“网站项目”还是“控制台项目”

> ID：10215679
> 
> 赞同：0
> 
> 时间：2012-04-18T18:31:24.610
> 
> 标签：c#, web, console-application

我想知道从何处发送请求（函数调用）检测的最佳方法是什么

含义：我的项目是这样的：

*   引擎
*   Web 项目（使用引擎）
*   测试项目-控制台项目（使用引擎）

现在我希望在运行测试项目时不会在函数中执行某些代码。

我知道我可以发送一个布尔参数来检测这一点，但我想知道是否有任何原因要检测请求是否来自网络项目......

谢谢！！

奥廖尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:33:42.400

如果被调用的代码应该根据调用来自 Web 项目还是控制台项目而表现不同，则代码不应位于共享库中。它确实属于各自的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:03:59.197

您可以检查它`HttpContext.Current`不为空。但是，@JustinNiessner 的建议仍然适用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:17:50.517

使用 TESTPROJECT 符号集和不带此符号的 Web 项目编译您的测试项目。然后由于[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/aa664622%28VS.71%29.aspx)，仅当您的代码是从测试项目中调用时才会执行 SetIsFromTest() 方法（因此字段 IsFromTest 将设置为 true）。

```
static class Class1
{
    static bool IsFromTest = false;

    static Class1()
    {
        SetIsFromTest();
    }

    [Conditional("TESTPROJECT")]
    public static void SetIsFromTest()
    {
        IsFromTest = true;
    } 
```

}

另一种选择是测试从您的共享库中调用程序集的名称。

```
if(System.Reflection.Assembly.GetCallingAssembly().FullName == "...") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:37:41.090

您可以使用[StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)对象访问堆栈跟踪，并查看调用您的前一个方法是什么。通过使用该方法，您可以轻松找到相应的项目。来自较早[的帖子](https://stackoverflow.com/questions/1310145/get-calling-function-name-from-called-function-in-c-sharp)：

```
StackTrace trace = new StackTrace();
int caller = 1;
StackFrame frame = trace.GetFrame(caller);
MethodBase callerMethod = frame.GetMethod(); 
```

尽管我应该警告您，那是您应该仅用于娱乐/调试时使用的东西。

# c# - 在 RichTextBox 中格式化文本时的性能问题

> ID：10215690
> 
> 赞同：3
> 
> 时间：2012-04-18T18:32:43.707
> 
> 标签：c#, wpf, richtextbox

我正在使用 RichTextBox 创建一个具有简单语法突出显示的编辑器。突出显示自身的过程是使用以下函数实现的：

```
 TextRange documentRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);
        documentRange.ClearAllProperties();

        .......

        tags.Sort((i, j) => i.Level > j.Level ? 1 : i.Level == j.Level ? 0 : -1);
        Color []_colors=new Color[]{Colors.Blue,Colors.Brown,Colors.BlueViolet,Colors.Crimson,Colors.DarkBlue,
            Colors.Green,Colors.DimGray,Colors.DarkGray,Colors.Maroon,Colors.Navy,Colors.Red};
        foreach (var tag in tags)
        {
            TextRange range = new TextRange(tag.StartPosition, tag.EndPosition);
            range.ApplyPropertyValue(TextElement.ForegroundProperty, new SolidColorBrush(_colors[tag.Level%_colors.Length]));
            range.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold);
        } 
```

问题是，当我使用这种方法时，当文本中有很多关键字时，应用程序的性能会受到很大影响，尤其是每次 RichTextBoxe 的文本更改时我都会这样做。

我运行分析器，似乎应用程序在 documentRange.ClearAllProperties() 中花费了一半的处理器时间。

我应该改变什么来提高应用程序的持久性？

谁能提供一个使用 WPF RichTextBox 快速突出显示语法的好例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:28:19.233

我推荐的一件事可能会有所帮助，但可能不是一个完整的解决方案，那就是使用计时器来调用您的语法高亮代码。类似的东西：（伪代码）

```
OnRichTextChanged() 
{
   StopExisingSyntaxHighlighterTimer();
   StartSyntaxHighlighterTimer(TimeSpan.FromSeconds(5));
}

OnSyntaxHighlighterTimerFired() 
{
   StopExisingSyntaxHighlighterTimer();
   DoSyntaxHighlighting();
} 
```

您只是在用户暂停 5 秒或更长时间时才进行语法突出显示的想法，这样您就不会尝试在每次击键时重新突出显示整个 RichTextBox。

此外，您甚至可以更进一步，实际上使`DoSyntaxHighlighting`可取消，这样如果它开始突出显示并且用户再次开始输入，则突出显示停止处理并等待用户再次停止输入。

这可能看起来有点古怪，因为突出显示会在他们输入和停止时消失并重新出现。但它肯定会提高性能。

您还可以查看[AvalonEdit 之](http://wiki.sharpdevelop.net/AvalonEdit.ashx)类的内容。

# websphere - 如何更改从 WEB-INF/lib 加载的罐子的顺序？

> ID：10215695
> 
> 赞同：1
> 
> 时间：2012-04-18T18:33:02.153
> 
> 标签：websphere, websphere-7

我正在 WAS 7.0 中配置 Java Web 模块。我的所有模块 JAR 都在 WEB-INF/lib 目录中，它们都在加载。我的问题是它们加载的顺序。我有 2 个罐子：它们`someJar.jar`都`aPatchForSomeJar.jar`位于 WEB-INF/lib 中。`aPatchForSomeJar.jar`修补在`someJar.jar`. 问题是`someJar.jar`模块类路径比补丁更高。这导致原始 jar 中的类被用于修补 jar 中的修补版本。

在我的开发环境（win XP 上的 RAD 7.5）中，模块类路径按字母顺序加载（导致在`aPatchForSomeJar.jar`之前加载`someJar.jar`）。但是，当部署到测试环境（GNU/Linux 上的 WAS 7.0）时，模块类路径似乎是以随机顺序加载的（至少绝对不是字母顺序），其中补丁是在原始 Jar 之后加载的。

有谁知道我如何更改模块加载 WEB-INF/lib jar 的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:13:31.470

据我所知，没有按字母顺序加载 jar 文件的概念。

你的打包模型需要重新审视——同时打包 patch.jar 和 original.jar 会让你很伤心。

当 patch.jar 包含固定的 jar 时，为什么需要原始 jar？

即使您想保留 original.jar 和 patch.jar（假设它是完整的），您也可以尝试使用类加载器层次结构来确保 patch.jar 与 original.jar 相比总是先加载。

例如，您可以使用 parent_last 的类加载策略在共享库级别打包 original.jar，并将 patch.jar 保存在您的 WEB-INF/lib 中。

虽然我建议将此作为替代方案，但您应该考虑用 patch.jar 替换 orginal.jar 或让补丁包含所有更改的文件（并将它们从 original.jar 中删除）

高温高压

芒鲁

# wpf - ScrollViewer 中的 RadGridView 超出屏幕

> ID：10215700
> 
> 赞同：3
> 
> 时间：2012-04-18T18:33:14.563
> 
> 标签：wpf, xaml, expression-blend, scrollviewer, radgridview

我有一个我正在设计的应用程序，它的默认大小是 1440x900。如果应用程序的大小调整得比这小，我希望用户能够上下滚动。

我尝试在应用程序的主网格控件周围包裹一个 ScrollView 控件，它似乎可以工作。但是，该应用程序有很多页面，每当我导航到其中包含 RadGridView 控件的页面时，RadGridView 的列就会从页面扩展。

我知道这是由 ScrollView 控件引起的，因为它基本上是让 RadGridView 增长到它想要的大小。

有什么方法可以阻止 RadGridView 控件不停地拉伸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:57:03.863

Telerik RadGridView 控件允许行和列虚拟化，其中该控件将回收用于网格的每个单元格的控件。这减少了网格的内存使用，并使其在处理大量数据时表现得更好。当启用虚拟化并且网格不够大而无法显示其包含的所有数据时，网格将提供自己的滚动条

为了启用虚拟化，RadGridView 控件需要有界的宽度和高度。将 RadGridView 放入 ScrollViewer 会使其具有无限的宽度和高度，从而禁用虚拟化。[`MaxWidth`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.maxwidth.aspx)我的建议是使用and属性来限制网格的宽度和高度，[`MaxHeight`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.maxheight.aspx)然后将网格从您包裹的 ScrollViewer 中取出。使用RadGridView 控件的`EnableRowVirtualization`and属性启用行和列虚拟化，但是`EnableColumnVirtualization`我似乎记得这两个都是`True`默认的。

免责声明：我没有使用 Telerik 控件的 WPF 版本，只使用了 Silverlight 版本。两者都来自相同的代码库，因此它们的行为应该相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:01:46.293

默认情况下，如果没有足够的空间来显示内容，RadGridView 控件将自动放入滚动条，以便对其行进行水平和垂直滚动。没错，ScrollViewer 只是让 RadGridView 确定它自己的大小不受约束，因此它将填充宽度以容纳所有列，并填充高度以容纳所有行。

您*希望*RadGridView 受其容器的约束，因此您需要将其放入网格单元中（除非它应该占据整个视图）。您不应该在 RadGridView 上设置任何宽度或高度，因为您希望它们设置为自动（默认）以适当地增长或缩小。听起来可能有其他东西阻碍了这一点，所以我建议你发布一些代码。

这是我的 RadGridView，它会填满容器并像你想要的那样滚动。请注意，我已经覆盖了行定义并且正在使用自定义用户控件，它根本不应该影响滚动。

```
 <telerik:RadGridView ItemsSource="{Binding Shipments}" RowStyle="{StaticResource rowStyle}" 
                            RowDetailsVisibilityMode="Collapsed"
                            RowIndicatorVisibility="Collapsed"
                            CanUserDeleteRows="False"
                            CanUserInsertRows="False" 
                            CanUserSelect="False" telerik:StyleManager.Theme="Windows7" /> 
```

这是我自定义的行模板（在我的本地资源字典中）：

```
<ControlTemplate x:Key="MyCustomRowTemplate" TargetType="telerik:GridViewRow">
            <Border x:Name="rowsContainer" BorderBrush="#FFA0AFC3" BorderThickness="0,0,0,1" >
                <Grid Width="Auto" HorizontalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <view:ActiveReleaseItemView DataContext="{Binding}" />
                </Grid>
            </Border>
</ControlTemplate>
<Style x:Key="rowStyle" TargetType="telerik:GridViewRow">
     <Setter Property="Template" Value="{StaticResource MyCustomRowTemplate}" />
</Style> 
```

# vb.net - 在带有 VB 的 MVC 中使用 CheckBoxFor 时出错

> ID：10215703
> 
> 赞同：0
> 
> 时间：2012-04-18T18:33:22.753
> 
> 标签：vb.net, model-view-controller, checkboxfor

我正在尝试使用以下代码创建一个复选框：

```
@Html.CheckBoxFor(Function(model) model.PotentialDishmachineProducts)
@Html.ValidationMessageFor(Function(model) model.PotentialDishmachineProducts) 
```

但是，它不断抛出错误：

“模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。”

这是模型中的属性：

```
Public Property PotentialDishmachineProducts As String 
```

它不绑定到数据库或任何东西。任何想法如何让这个复选框工作？顺便说一句，如果不是很明显，我是 MVC 和 VB 的新手。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T01:50:05.513

切换`As String`到`As Boolean`.

# c# - MVC3图片上传路径

> ID：10215704
> 
> 赞同：0
> 
> 时间：2012-04-18T18:33:28.657
> 
> 标签：c#, asp.net-mvc-3, image

我有一个后台办公室，我用它上传图片。我将它们上传到

```
d:\images\ 
```

然后我有一个应该显示这些图像的前端应用程序。

我拥有的图像之一是显然我无法`d:\images\foo.jpg`在 html 中显示。

处理不同应用程序之间共享的图像和路径的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:20:25.757

您可以将每个 IIS 站点中的虚拟文件夹映射到共享位置。我会首先为文件夹结构制定一套规则，但是您可以直接通过 IIS 访问文件，而不是编写代码来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:09:57.900

如何创建将在响应中返回图像的处理程序或控制器。

```
public ActionResult LoadImage(string name)
{

    string imageBasePath = "[GET FROM CONFIG]";
string fullPath = imageBasePath + name;

    return base.File(fullPath, "image/jpg");
} 
```

**更新** 我同意 mgnoonan，如果您可以在 IIS 中映射目录，这比编写和处理代码要好得多。如果这不是您的选择，那么建议的代码应该可以工作

# php - 包含的文件和数据库连接

> ID：10215706
> 
> 赞同：1
> 
> 时间：2012-04-18T18:33:33.643
> 
> 标签：php, mysql

我的 php 函数无法识别在同一文件中包含的另一个 php 文件中定义的变量。dbconnect.php 进行数据库连接。add_user.php 具有使用该数据库连接 $dbco 的 add_user 函数。我收到一条错误消息，指出没有为此函数调用定义 $dbco：`mysql_select_db("luxcal", $dbco);` 这一定是非常明显的事情，但我不知道发生了什么。

数据库连接.php

* * *

```
<?php
    $dbco = mysql_connect("localhost","myuser","mypassword");
    if (!$dbco)
    {
        die('Could not connect: ' . mysql_error());
    }
?> 
```

add_user.php

* * *

```
<?php include("dbconnect.php"); ?>

<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

function add_user($username, $email, $password_text, $copasswd_text) {

    $password = md5($password_text);
    $copasswd = md5($password_text);
    $privPost = 1; // 3: max.
    $privSedit = 0;

    mysql_select_db("luxcal", $dbco);

    $q_add_user = "INSERT INTO users (`user_name`, `email`, `password`) VALUES ( '".mysql_real_escape_string($username)."', '".mysql_real_escape_string($email)."', '$password' )";
    $r_add_user = mysql_query($q_add_user);

    return;
}

echo add_user(trim($_REQUEST['uname']), trim($_REQUEST['uemail']), trim($_REQUEST['upass']), trim($_REQUEST['cpass']));

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:42:42.007

尝试做一个 Singleton 数据库类。在您的情况下，您最终可能会得到许多不同的数据库连接，这很糟糕。

像这样的东西（取自并编辑自： http: [//www.matthewelliston.com/php-singleton-database-class/](http://www.matthewelliston.com/php-singleton-database-class/)）

```
class Database {

    private static $instance;
    private $connection;

    private function __construct(){
        $this->connection = mysql_connect("localhost","root","pw"); // or whatever connection you use
    }
    public static function getInstance(){
        if(empty(self::$instance)){
            try{
                self::$instance = new Database();
            } catch (Exception $e) {
                echo 'Connection failed: ' . $e->getMessage();
            }
        }
        return self::$instance;
    }

    public function query($query, $args){ 
        ... //general query function
    }
} 
```

然后，您可以通过调用获取数据库实例

```
$db = Database::getInstance();
//and do
$db.query("INSERT INTO ..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:37:20.660

该变量`$dbco`在函数中不可用，`add_user`因为它不在函数的[变量范围内](http://php.net/manual/en/language.variables.scope.php)。

您可以通过在函数`global $dbco;`内部添加`add_user`以使其可用来访问它，或者您可以使用它`$GLOBALS['dbco']`。

尝试：

```
function add_user($username, $email, $password_text, $copasswd_text) {
    global $dbco;
    // rest of code...
} 
```

在函数外部定义的变量在函数内部不可用，除非您将它们传入或使用`global`. 类似地，在函数中定义的变量在函数外部不可用（并且在函数返回时被释放）。

# sql - 我可以将数据从字符串转换为列中的数据，该列还包含 Null 且没有错误？

> ID：10215708
> 
> 赞同：0
> 
> 时间：2012-04-18T18:33:40.077
> 
> 标签：sql, ms-access-2007

我有一列包含这样的日期：Access 2010 中的 20120418。

我想将其转换为：4/18/2012 我可以，问题是我在行中得到#Error 为空。

```
cdate(format(mydate, "####/##/##")) as myNewDate 
```

我该如何解决这个问题？

感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:41:24.670

使用 IIf

```
IIF(IsNull(MyDate),Null,cdate(format(mydate, "####/##/##"))) as myNewDate 
```

# jpa - 您试图设置类实体类型的值

> ID：10215710
> 
> 赞同：0
> 
> 时间：2012-04-18T18:33:43.673
> 
> 标签：jpa, eclipselink

我正在使用带有 eclipslink 的 jpa 2 ...

我正在尝试执行此查询：

List postEntityList = entityManager.createQuery(" select p from PostEntity p where p.organizationEntity=?1 and p.organizationUnitEntity=?2 and p.organizationLocationEntity=?3 and p.organizationBatchEntity=?4 and p.postCategoryEntity=?5 and p .dateOfPosting 在 ?6 和 ?7 之间按 p.rating desc 排序").setParameter(1, organizationEntity).setParameter(2, organizationUnitEntity).setParameter(3, organizationLocationEntity).setParameter(4, organizationBatchEntity).setParameter(5, postCategoryEntity ).setParameter(6, minimumTime).setParameter(7, maximumTime).getResultList();

但我收到错误：

您已尝试为参数 5 设置类 entity.PostCategoryEntity 类型的值，预期类型为 class entity.OrganizationEntity from query string select p from PostEntity p where p.organizationEntity=?1 and p.organizationUnitEntity=?2 and p.organizationLocationEntity =?3 和 p.organizationBatchEntity=?4 和 p.postCategoryEntity=?5 和 p.dateOfPosting 在 ?6 和 ?7 之间按 p.rating desc 排序。

为什么会这样！！！任何想法...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-15T02:28:45.750

parameter5 的类应该是实体。

也许你的parameter5是一个FK，如果是，你需要使用parameter5.parameter来找到真正的变量。

# javascript - 如果 window.open() 被弹出窗口阻止程序阻止，回退？

> ID：10215713
> 
> 赞同：1
> 
> 时间：2012-04-18T18:33:58.230
> 
> 标签：javascript, jquery, popup

我想默认为`target=_blank`如果`window.open()`失败。

例如。用户单击调用 的链接`window.open()`。但是，弹出窗口被弹出窗口阻止程序阻止。在这种情况下，我希望打开一个新窗口。这可能吗？

PS我已经加载了jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:54:58.250

尝试这个

假设这是你的 A 标签

```
<a href="http://www.w3schools.com" id="myLink" target="_blank">Click me</a> 
```

然后使用jquery，添加一个点击事件处理程序：

```
$("#myLink").click(function(e){
    if(!window.open("http://www.w3schools.com")){
        e.preventDefault();
    } 
}); 
```

# ruby-on-rails - Rails：我或他们，来自 config/initializers/*.rb 的文件中不需要的文件

> ID：10215714
> 
> 赞同：1
> 
> 时间：2012-04-18T18:33:59.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 Rails 的行为非常奇怪，我似乎无法找出问题所在。当我在 config/initializers 中的文件中确实需要时，什么都不需要……这里有一个例子：

```
From: /home/jordon/development/test1/config/initializers/test1.rb @ line 6:

   1: Dir[Test1::Application.config.root + '/lib/test1/**/*.rb'].each do |file|
   2:   # Test1::Patches::Redirecting
   3:   require file
   4: end
   5: 
 * 6: binding.pry

[1] pry(main)> Test1::Patches
               ^> NameError: uninitialized constant Test1::Patches
               ^> From (pry):1:in `<top (required)>'

[2] # The required file is from lib/test1.
[3] pry(main)> require 'rails/actionpack/lib/action_controller/metal/redirecting'
               ^> Return: true 
```

谁能解释发生了什么？Rails 中是否内置了某种反需求精灵？不认真，除了开玩笑之外，任何人都可以认真解释为什么 Rails 实际上不允许我的文件被要求，以及我如何说服它要求我的文件，以便我可以尝试使用包装器扩展 redirect_to。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:46:11.237

尝试添加

```
require file 
```

在您的 environment.rb 中，然后重新启动您的服务器。

# javascript - jwPlayer sendEvent 未在 IE 中启动

> ID：10215715
> 
> 赞同：0
> 
> 时间：2012-04-18T18:34:00.850
> 
> 标签：javascript, jquery, html, internet-explorer, jwplayer

我有几个嵌入在 HTML 和 JS 中的视频，我使用 jQuery 工具方法**OnBeforeSeek: function(event, index)**来查找当前视频并设置一个间隔来执行 sendEvent 以播放找到的视频。下面的代码适用于所有浏览器，**但 IE**。

```
if (currentIsVideo.length > 0) {
              playLoop = setInterval(function () { currentIsVideo.each(function () { try { this.sendEvent('PLAY'); clearInterval(playLoop); } catch (e) { } }); }, 200); 
```

有解决办法吗？

**编辑：**此代码也在 FireFox 中中断。我正在使用可滚动浏览资产，前 2 个资产是使用 jwPlayer 嵌入 HTML 中的视频。在 Firefox 中，我相信这会破坏第一个视频之后的可滚动性。

**EDIT2：** Firefox 不再中断。使用 sendEvent('PLAY', ' **true** ')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:25:08.977

我必须更新到最新版本的 jwPlayer 才能在 IE 中工作。我无法使用当前版本编辑任何 JS 对象。

# java - JUNG：按顺序放置树节点

> ID：10215718
> 
> 赞同：1
> 
> 时间：2012-04-18T18:34:03.167
> 
> 标签：java, tree, visualization, jung

将节点添加到 my`DelegateTree`时，它们不会按照我添加它们的顺序在视觉上出现。我一直在寻找解决方案，但还没有找到任何东西。有没有人可能知道如何改变这个？

提前致谢！

**编辑**：我的代码

```
/**
 * Generate a visualization of the decision tree.
 * 
 * @param tree
 *            The decision tree
 * @return A component to be placed inside a JPanel
 */
public static GraphZoomScrollPane generateTree(Tree tree,
        GraphicalUserInterface gui) {

    /* Create a new tree */
    DelegateTree<Node, Edge> graphTree = new DelegateTree<Node, Edge>();

    /* Add all nodes and vertices to the tree */
    graphTree.addVertex(tree.getRoot());
    addChildren(tree.getRoot(), graphTree);

    /* Create the visualization */
    DynamicTreeLayout<Node, Edge> treeLayout = new DynamicTreeLayout<Node, Edge>(graphTree, 100, 100);
    VisualizationViewer<Node, Edge> vv = new VisualizationViewer<Node, Edge>(
            treeLayout);
    vv.setDoubleBuffered(true);
    vv.setBackground(Color.WHITE);
    vv.getRenderContext().setEdgeLabelTransformer(
            new ToStringLabeller<Edge>());
    vv.getRenderContext().setEdgeShapeTransformer(
            new EdgeShape.Line<Node, Edge>());
    vv.getRenderContext().setVertexLabelTransformer(
            new ToStringLabeller<Node>());
    vv.getRenderer().getVertexLabelRenderer()
            .setPosition(Renderer.VertexLabel.Position.S);

    vv.addGraphMouseListener(new ClickNode(gui, vv));

    final DefaultModalGraphMouse<Node, Edge> graphMouse = new DefaultModalGraphMouse<Node, Edge>();

    graphMouse.setMode(ModalGraphMouse.Mode.TRANSFORMING);

    vv.setGraphMouse(graphMouse);

    final GraphZoomScrollPane gzsp = new GraphZoomScrollPane(vv);

    return gzsp;
}

/**
 * Recursively add all nodes and edges to the tree.
 * 
 * @param node
 *            The parent node
 * @param tree
 *            The tree visualization
 */
private static void addChildren(Node node, DelegateTree<Node, Edge> tree) {
    for (int i = 0; i < node.getChildren().size(); i++) {
        tree.addChild(new Edge(node.getChildren().get(i).getEdgeLabel()), node, node
        .getChildren().get(i));
        addChildren(node.getChildren().get(i), tree);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:45:52.677

使用 DelegateTree 的底层实现，该实现要么根据顶点的自然顺序 (*Sorted*Graph) 对其顶点进行排序，要么使用插入顺序 (*Ordered*Graph)。

# python - 如何检查 2D 列表中的所有项目是否都相同？

> ID：10215719
> 
> 赞同：3
> 
> 时间：2012-04-18T18:34:09.047
> 
> 标签：python

我需要帮助检查二维列表中的所有项目是否相同（在这种情况下，我正在检查它们是否都等于一个）。

我做了一个函数`allOnes(L)`来检查一维数组中的所有项目是否都是 1。我像这样使用 all() 函数：

```
def allOnes(L):
    """Tests to see if the numbers in the list L are all 1's
    """
    return all(x == 1 for x in L) 
```

现在我需要检查 2D 列表中的所有项目是否都是 1。我希望函数 allOnes2d 在检查这样的列表时返回 True `[[1,1,1], [1,1,1], [1,1,1]]`：这可以使用`all()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:39:34.230

```
def allOnes2d(L):
    return all(allOnes(a) for a in L) 
```

并做一个任何维度的数组，使用[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)将 N 维数组减少为一个常规数组，然后将它提供给您的 allOnes 函数。（感谢 Lattyware）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:43:29.630

对于快速矩形数组，请使用 numpy。

```
import numpy
table= numpy.array([[1,1,1], [1,1,1], [1,1,1]])
print numpy.all( table == 1 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:51:20.547

虽然使用`all()`和你定义的函数是一个很好的方法，你也可以看看这个替代方案

```
>>> from itertools import chain
>>> sum(1 for e in chain(*[[1,1,1], [1,1,1], [1,1,1]]) if e!= 1)
0 
```

或者您也可以`allOnes`在打开列表后调用`itertools.chain`

```
>>> allOnes(chain(*[[1,1,1], [1,1,1], [1,1,1]]))
True
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:31:02.897

我喜欢这种东西的递归：

```
from collections import Iterable
def allOnes(I):
    if isinstance(I, Iterable):
        return all(allOnes(i) for i in I)
    else:
        return I == 1 
```

一个例子：

```
>>> L = [[1,1,1], (1,1,1), 1]
>>> allOnes(L)
True
>>> L = [[1,1,1], (1,0,1), 1]
>>> allOnes(L)
False 
```

# polymorphism - 在多态变量 Fortran 中分配类型

> ID：10215721
> 
> 赞同：0
> 
> 时间：2012-04-18T18:34:11.973
> 
> 标签：polymorphism, fortran

我正在尝试在 Fortran 中使用多态性，但我在分配类型时遇到了问题。我不知道如何使这项工作。英特尔编译器抛出此错误：

```
error #6460: This is not a field name that is defined in the encompassing structure.
analitic%param%a0=2
---------------^ 
```

这是一个最小的例子：

```
program new

implicit none

integer, parameter    :: dp = kind(1.0d0)

type :: potential
  class(*),allocatable                        :: param
endtype

type(potential)          :: analitic
type  :: pa1d_param
  real(dp)     :: a0
  real(dp)     :: b0
end type

allocate(pa1d_param::analitic%param)

analitic%param%a0=2.0_dp     

end program 
```

这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T21:32:18.470

通过声明`param`as `class(*)`，您声明了一个无限的多态对象。这些不能以正常方式引用 - 它们只能用作实际参数、指针或指针赋值中的目标，或用作`select type`语句中的选择器（16.3.1，Fortran 95/2003 解释，Metcalf 和 Reid）。

为了按照您的意图执行此操作，您必须以`param`这种方式声明：（使用 ifort 12.0.2.137 编译并产生正确的输出）

```
program new

 implicit none

 integer, parameter :: dp = kind(1.0d0)

 type pa1d_param
   real(dp) :: a0
   real(dp) :: b0
 end type pa1d_param

 type :: potential
   class(pa1d_param),allocatable :: param
 endtype

 type(potential)          :: analitic

 allocate(analitic%param)

 analitic%param%a0 = 2.0_dp

 write(*,*)analitic%param%a0

end program 
```

# android - 无法通过模拟器运行android应用程序

> ID：10215730
> 
> 赞同：0
> 
> 时间：2012-04-18T18:34:47.807
> 
> 标签：android, cordova, android-emulator, aptana

我已经在 aptana 上安装了 android sdk 和 JDK。现在我正在尝试创建 phonegap 应用程序，但是当我按照 phonegap 网站上的描述创建新的 android 项目并尝试运行它时，我收到一个错误，即找不到 .apk 文件。这是错误日志：

```
[2012-04-18 22:28:37 - androidApp] ------------------------------
[2012-04-18 22:28:37 - androidApp] Android Launch!
[2012-04-18 22:28:37 - androidApp] adb is running normally.
[2012-04-18 22:28:37 - androidApp] Could not find androidApp.apk! 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:59:26.957

猜猜是时候自己回答这个问题了:)

此问题的解决方案是使用以下命令导出 adb 路径：

> 导出 PATH=$PATH{}:/path/to/android-sdk/tools:/path/to/android/platform-tools

发出此命令后，模拟器成功启动并生成了 apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:58:00.257

好吧，我遇到了同样的问题。而我刚刚做的是 1\. 停止当前正在运行的模拟器 2\. 杀死 adb.exe 3\. 重新启动 eclipse 4\. 重新运行项目作为 Android 应用程序

我得到了它 ：）

# java - Java：枚举 toString()

> ID：10215735
> 
> 赞同：6
> 
> 时间：2012-04-18T18:35:13.063
> 
> 标签：java, string, enums

我创建了一个枚举，我试图让我的枚举支持一个 String.format 操作，该操作获得无限数量的参数并返回一个字符串。我只设法返回一个对象，在使用此方法后，我必须进行`toString()`/casting。我猜有一种更“干净”的方法可以做到这一点，或者可能会更好地覆盖该`toString()`方法。基本上，我想支持该`toString()`方法，但遗憾的是没能做到，所以我创建了这个方法。如您所见，它被命名`text(..)`而不是`toString()`.

我怎样才能做得更好？我想要的理想解决方案是`toString(..)`返回一个字符串。

```
public enum MY_ENUM {

    VALUE_A("aaa %s"), VALUE_B("bbb %s");

    private String text;

    MY_ENUM(String text) {
        this.text = text;
    }

    public String text() {
        return this.text;
    }

    public Object text(final Object... o) {
        return new Object() {
            @Override
            public String toString() {
                return String.format(text(), o);
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T18:48:33.883

我知道你要去哪里......我认为这就是你想要的（经过测试，并且有效）：

```
public String toString(Object... o) {
    return String.format(text, o);
} 
```

从设计的角度来看，除非您确实需要，否则我*不会*`text`发布文本（即具有 getter）-用作格式字符串的事实是一种实现选择。我会这样做：

```
public static enum MY_ENUM {

    VALUE_A("aaa %s bbb %s"),
    VALUE_B("bbb %s");

    private final String text;

    MY_ENUM(String text) {
        this.text = text;
    }

    public String toString(Object... o) {
        return String.format(text, o);
    }
} 
```

顺便说一句，我真的很喜欢这门课的想法。以前没见过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:48:36.367

`toString()`如果您需要传递更多参数（`toString()`不接收任何参数），则无法覆盖。只需在枚举中定义一个新方法，无需重写：

```
public String getAsFormattedText(Object... o) {
    return String.format(text, o);
} 
```

你不应该命名这个方法`toString()`，它会令人困惑，因为你没有返回当前对象的字符串表示，而是返回作为参数传递的对象的格式化字符串。此外，`text()`应该调用该方法`getText()`，这是 Java 约定。

最好使用一个清楚地表明返回的字符串不是任何字符串的名称——它是一个格式化的字符串，期望文本被格式化为参数——`getAsFormattedText()`清楚地表达了这一点。

# ruby - 海吉和红宝石

> ID：10215736
> 
> 赞同：6
> 
> 时间：2012-04-18T18:35:18.823
> 
> 标签：ruby, opencv

我需要编写一个简单的项目，我正在使用 opencv、ruby 和 mac。我已经通过 brew 安装了 opencv，并通过 gem install 安装了 rb_webcam。

```
# -*- coding: utf-8 -*-

require "opencv"
require "rb_webcam"

capture = Webcam.new 
```

此代码抛出

```
$ ruby tracking.rb
/Users/evilgeniuz/.rvm/gems/ruby-1.9.3-p125/gems/nice-ffi-0.4/lib/nice-ffi/library.rb:98:in `load_library': Could not load highgui. (LoadError)
    from /Users/evilgeniuz/.rvm/gems/ruby-1.9.3-p125/gems/rb_webcam-0.3.0/lib/rb_webcam.rb:7:in `<module:Highgui>'
    from /Users/evilgeniuz/.rvm/gems/ruby-1.9.3-p125/gems/rb_webcam-0.3.0/lib/rb_webcam.rb:4:in `<top (required)>'
    from /Users/evilgeniuz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:59:in `require'
    from /Users/evilgeniuz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
    from /Users/evilgeniuz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from tracking.rb:4:in `<main>' 
```

我不知道我怎么能指出 highgui 在哪里。

UPD：通过从这里下载 gem 解决它[https://github.com/TyounanMOTI/rb_webcam](https://github.com/TyounanMOTI/rb_webcam)并手动构建和安装它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:52:56.427

不确定您使用的是哪个包装器，但您应该看看这个：[Ruby/OpenCV - An OpenCV Ruby wrapper](http://d.hatena.ne.jp/ser1zw/20101208/1291816370)。

人脸检测示例：

```
#!/usr/bin/env ruby

require 'opencv'

include OpenCV

# Load an image
img = IplImage.load('sample.jpg')

# Load the cascade for detecting faces
detector = CvHaarClassifierCascade::load('haarcascade_frontalface_alt.xml.gz')

# Detect faces and draw rectangles around them
detector.detect_objects(img) do |rect|
  img.rectangle!(rect.top_left, rect.bottom_right, color: CvColor::Red)
end

# Create a window and show the image
window = GUI::Window.new('Face Detection')
window.show(img)
GUI::wait_key 
```

分类器可以在[这里](https://github.com/ruby-opencv/ruby-opencv/raw/master/test/samples/haarcascade_frontalface_alt.xml.gz)下载。

**编辑**：

> [以下代码](http://swik.net/Ruby/Code+Snippets:+ruby/Capture+a+webcam+image+using+Ruby/dzv8l)使用 OpenCV、rb_webcam gem 和 RMagick 从网络摄像头捕获图像并将其保存为 jpg 文件：

```
require 'rb_webcam'
require 'RMagick'

capture = Webcam.new

image = capture.grab
width = image.size[:width]
rows = image.data.unpack("C*").each_slice(3).to_a.each_slice(width).to_a
capture.close

height = rows.length
img = Magick::Image.new width, height

rows.each_with_index do |r, i|
q = r.map {|b, g, r| Magick::Pixel.new r * 256, g * 256, b * 256, 0}
img.store_pixels(0, i, width, 1, q)
end

img.format = 'jpg'
img.write 'webcam.jpg' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-25T23:23:42.913

也许为时已晚，但我也在苦苦挣扎，让我的网络摄像头工作，直到我不小心尝试了绝望的愤怒：

```
#!/usr/bin/env ruby

require "rubygems"
gem "ruby-opencv"

require "opencv"

window = OpenCV::GUI::Window.new("webcam")
capture = OpenCV::CvCapture.open

while true
  key = OpenCV::GUI::wait_key(1)
  image = capture.query
  window.show image

  next unless key
    case key.chr
  when "\e"
    exit
  end
end 
```

`rb_webcam`希望这会有所帮助，因为我在一个多星期的 highgui 麻烦后放弃了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-08T22:37:54.810

使用`ruby-opencv`宝石：

```
require "opencv"

capture = OpenCV::CvCapture.open
sleep 1 # Warming up the webcam
capture.query.save("image.jpg")
capture.close 
```

（在 macOS 上安装 OpenCV `brew install homebrew/science/opencv --HEAD`：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-10T13:30:34.653

开箱即用的最佳跨平台

```
<!doctype html>
<html lang="de">
<head>
<style type="text/css">
        form > input { margin-right: 15px; }
        #results { float:center; margin:5px; padding:5px; border:1px solid; background:#ccc; }
    </style>
</head>
<table class="reference notranslate"> 
 <tr>
    <th>Webcam</th>
    <th>Your captured image will appear here..</th>
 </tr>
 </tr>
    <td>
<video autoplay id="vid" width="320" height="240" style="border:1px solid #d3d3d3;"></video></br>
<button onclick="snapshot()">Take Picture</button>
    </td>
    <td>
<div id="results">Your captured image will appear here...<
<canvas id="canvas" width="320" height="240"></canvas>
</div>
<br>

 <button onclick="upload()">upload</button>
    </td>
 </tr>
</table>
<script type="text/javascript">

    var video = document.querySelector("#vid");
    var canvas = document.querySelector('#canvas');
    var ctx = canvas.getContext('2d');
    ctx.scale(0.5,0.5);
    var localMediaStream = null;      

    var onCameraFail = function (e) {
        console.log('Camera did not work.', e);
    }

    function snapshot() {
        if (localMediaStream) {
            ctx.drawImage(video, 0, 0);

    } 
    }
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||  navigator.mozGetUserMedia || navigator.msGetUserMedia;
    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia({video:true}, function (stream) {
        video.src = window.URL.createObjectURL(stream);
        localMediaStream = stream;
    }, onCameraFail);

 redirectTime = "1500";

function timedRedirect() {

    setTimeout("history.back();",redirectTime);
};

function upload()  {
var oCanvas = document.getElementById("canvas");  
Canvas2Image.saveAsPNG(oCanvas);  // will prompt the user to save the image as PNG 
var oImgPNG = Canvas2Image.saveAsPNG(oCanvas, true);   
 JavaScript:timedRedirect()

};

</script> 
```

-cartasu-:-)忘记了他的密码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-11T05:19:35.000

至少在 Windows 上，我们应该在 load_library 中指定版本号，如下 rb_webcam.rb 第 7 行：

```
load_library("opencv_highgui2413") 
```

# python - python中的正则表达式使用

> ID：10215739
> 
> 赞同：4
> 
> 时间：2012-04-18T18:35:30.710
> 
> 标签：python, regex

我是 python 的新手，在使用正则表达式方面需要一些帮助。

我有一个这样的字符串：

新版本可用版本：20120418-abcdef-1（基于 SDK 0.0.0.1）

从上面的字符串中，我想使用正则表达式提取以下文本

20120418-abcdef-1 0.0.0.1

我可以通过拆分来做到这一点，但我觉得这是一种无效的方式。我尝试使用正则表达式，但无法缩小范围。

例如，我用

```
sdk_version = re.search(r"SDK(.*)", lines,)
                    print sdk_version.group(1) 
```

但这给出了版本 0.0.0.1) 以及我不知道如何删除 ')' 的括号 .. 在这里需要一些帮助..

谢谢-维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:46:00.063

好的，我不知道您的所有字符串是否与提供的完全一样，但是您提供的确切字符串的正则表达式将是：

```
: (.*) \(based on SDK (.*)\) 
```

这将执行以下操作：

**:** - 出现 : 后开始匹配。

**(** - 这将打开一个组（这是正则表达式的特殊构造，允许您稍后引用捕获的值）。

**.*** - 这部分只是匹配所有内容，直到一个空格。

**\(** - 这将匹配一个“真正的”大括号，而不是打开一个子组。

**\)** - 这将匹配一个“真正的”右大括号，而不是关闭一个子组。

所以在`python`这看起来像这样：

```
import re
s = "New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1)"
r = re.compile(r": (.*) \(based on SDK (.*)\)")
m = r.search(s)
m.groups()
>> ('20120418-abcdef-1', '0.0.0.1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:39:28.120

```
>>> s = "New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1)"
>>> import re
>>> version = re.compile(r"(?<=Version: )\d*-[a-z]*-\d")
>>> version.search(s).group()
'20120418-abcdef-1' 
```

这匹配

```
(preceded by "Version: ")
a string of digits
hyphen
a string of lowercase letters
hyphen
a digit 
```

* * *

相似地，

```
>>> subversion = re.compile(r"(?<=SDK )\d*.\d*.\d*.\d*")
>>> subversion.search(s).group()
'0.0.0.1' 
```

火柴

```
(preceded by "SDK ")
a string of digits
a dot
a string of digits
a dot
a string of digits
a dot
a string of digits 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:21:32.000

假设版本号只能包含字母、数字、点和破折号，这就是你所需要的：

```
version, sdk = re.findall(r'(?:Version: |SDK )([\w.-]+)', s) 
```

例子：

```
s = "New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1)"

import re
version, sdk = re.findall(r'(?:Version: |SDK )([\w.-]+)', s)

print version
print sdk

## 20120418-abcdef-1
## 0.0.0.1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:07:39.583

@Gjallar 已经写了一个很好的答案。这是对他的回答的轻微调整：

```
import re
s = "New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1)"
r = re.compile(r":\s+(.*)\s+\(based on SDK\s+(\S+)\s*\)")
m = r.search(s)
m.groups()
>> ('20120418-abcdef-1', '0.0.0.1') 
```

在他有空格的几个地方，我将其替换为`\s+`匹配一个或多个任何类型的空白。因此，如果那里有一个额外的空间，或者一个选项卡，或者其他什么，这仍然会匹配。

同样，我更改了 SDK 字符串的模式。首先，我将它从 更改`.*`为`\S+`，所以它现在只匹配非空白字符，而不是匹配任何内容，并且必须至少有一个。我还添加`\s*`了匹配零个或多个任何类型的空白。如果没有空格，这将无济于事，但如果有一些，它将匹配它；但它在括号之外，所以它不会捕获空白。因此，SDK 字符串将匹配但不包含任何空格：

```
s = "New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1 )" 
```

使用@Gjallar 的原始模式，SDK 字符串将是`"0.0.0.1 "`，但使用我的模式，你仍然会得到`"0.0.0.1"`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T18:38:40.510

可能你可能想做

```
>>> st="New builds available Version: 20120418-abcdef-1 (based on SDK 0.0.0.1)"
>>> "".join(re.findall(":[ ]*(.*?)[ ]*\(.*SDK(.*)\)",st)[0])
'20120418-abcdef-1 0.0.0.1' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T18:38:55.093

特别是对于 SDK 版本， .* 对于您想要的内容来说太宽泛了——它匹配所有内容，因此它将匹配整个字符串的其余部分。您可以使用正则表达式主体“SDK ([0-9.]+)”，然后取第一组。（“[0-9.]+”将匹配一串数字字符和句点。）

对于版本字符串，您可以匹配类似 "Version: ([a-bA-B0-9-]+) (" 并获取第一组 - 这表示您正在寻找由字母数字字符组成的字符串，并且连字符，后跟一个空格和一个左括号。

# sql-server - SSRS 计数上一组的行（矩阵中的表）

> ID：10215740
> 
> 赞同：0
> 
> 时间：2012-04-18T18:35:44.600
> 
> 标签：sql-server, reporting-services, count

使用下面的示例，我正在寻找一种方法来计算前一组中表中的行数。我的报告是在矩阵的数据区域中使用矩阵和表格（“Tablix3”）设置的。

列分组称为“DayOfTheWeek”和“AMPM”。

在蓝色框周围的区域，我需要PM组统计当天AM组在“Tablix3”中的行数，即2。当值大于1时，我将使用表达式来改变背景颜色相应地作为右下角的粉红色背景不应该存在。

我正在使用 SSRS 2008。

![样本报告](../Images/131a7903893a8b4c7001b6c856404dba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:52:53.617

抱歉不行。您必须在查询中执行此操作。

# c++ - 将 GL 模型视图矩阵转换为世界坐标

> ID：10215743
> 
> 赞同：1
> 
> 时间：2012-04-18T18:35:59.150
> 
> 标签：c++, opengl-es, matrix, qcar-sdk

我正在使用 Qualcomm 的 AR SDK 来跟踪对象。我有以下可用功能：

[https://ar.qualcomm.at/qdevnet/api](https://ar.qualcomm.at/qdevnet/api)（具体看“命名空间列表->QCAR::Tool”）。

我可以通过使用 convertPose2GLMatrix (const Matrix34F &pose) 函数来获取被跟踪项目的模型视图矩阵，因为我得到了每个被跟踪项目的姿势矩阵。

我的目标 - 确定标记在“现实世界”中的位置。你可以假设我的相机是静止的。

我在网上阅读了很多文章，我的一般理解是：我需要从中选择一个模型视图矩阵，从中选择轴的 0,0,0 点（即 - 复制我为该点获得的矩阵）。然后我需要转置该矩阵。然后，我提取的每个模型视图矩阵应乘以该矩阵，然后乘以 (x,y,z,1) 向量，以获得坐标（忽略第 4 项）。

我对么？这是要走的路吗？如果不是 - 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:59:11.520

我喜欢将正交矩阵视为从一个坐标空间移动到另一个坐标空间，所以你的建议是正确的，但我会反过来做：

1.) 使用相对于您的相机的参考坐标系 S（即只是由姿势估计确定的矩阵之一） 2.) 对于每个姿势估计 T，请计算以下内容：

W = S * T^-1 = S * 转置(T)

3.) 从矩阵 W 中选择第 4 列，作为您的世界位置。

# python - 如何在非默认数据库中创建用户？

> ID：10215745
> 
> 赞同：2
> 
> 时间：2012-04-18T18:36:06.637
> 
> 标签：python, database, django

我正在阅读文档并让我的第二个数据库同步并准备就绪。我找到了关于告诉 django 它应该使用什么数据库的部分`.using('database')`。

在同样的思路上，我试图向 django 展示它应该在哪里保存用户，一旦它像这样创建：

```
User.objects.using('user_data').create_user(username=username, password=password, email='') 
```

当我尝试这段代码时，我得到了这个错误：

```
AttributeError at /signup/

'QuerySet' object has no attribute 'create_user' 
```

所以我只是好奇是否有一种不同的方式我必须告诉 django 我希望它保存在 user_data 而不是默认数据库中？我不想使用路由器，因为我发现它们很混乱。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:52:46.483

关于错误`'QuerySet' object has no attribute 'create_user'`，根据[Using manager with multiple databases](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#using-managers-with-multiple-databases)的文档：

> 例如，假设您有一个接触数据库的自定义管理器方法——User.objects.create_user()。因为 create_user() 是一个管理器方法，而不是一个 QuerySet 方法，**所以你不能做 User.objects.using('new_users').create_user()**。（create_user() 方法仅适用于管理器 User.objects，而不适用于从管理器派生的 QuerySet 对象。）

强调我的。你需要这样做：

```
User.objects.db_manager('new_users').create_user(username=username, password=password, email='') 
```

另外，您可以试试这个（尚未测试）：

```
new_user = User()
new_user.username = username
new_user.password = password
new_user.email = ''
new_user.save(using='user_data') 
```

Django 文档中[有关为 save() 选择数据库的](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#selecting-a-database-for-save)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T20:07:32.490

`.using('database')`返回一个查询集，因此您使用此函数仅获取一个查询。如果使用 create()，则必须通过 db_manager() 使用它，如下所示：

```
User.objects.db_manager('database').create_user(...) 
```

看看：[多数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)以获取更多信息。

# pbs - 查看 pbs 作业当前使用的内存量

> ID：10215748
> 
> 赞同：5
> 
> 时间：2012-04-18T18:36:20.553
> 
> 标签：pbs

我知道我可以看到一个 pbs 作业使用 qstat 请求了多少内存，但是有没有办法查看该作业当前使用了多少内存？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T19:21:54.133

`qstat -f <jobid>`应该向您显示有关您的工作的内存使用情况的最新信息

# jquery - 当父子都切换时，jQuery切换不会改变可见元素的子元素样式？

> ID：10215751
> 
> 赞同：1
> 
> 时间：2012-04-18T18:36:32.383
> 
> 标签：jquery

在 jQuery 中 - 我有一个可见的父元素和子元素 - 两者都有相同的类。

如果我`toggle()`使用该类作为选择器，则孩子的样式不会更新为`display: none;`- 即使它具有选择器。

但是，如果我有一个隐藏元素和一个隐藏的子元素 - 两者都具有相同的类 - 两个 element.styles 都会更新为`display: block;` on `toggle()`。当第二次切换时，现在可见元素的行为方式与原始可见元素相同，并且子元素的 element.style 不会更新以显示它是隐藏的。

这导致从第二个切换开始似乎正在消失的子元素。

是否可以使用`toggle()`同时关闭可见元素的可见子元素将子元素的 element.style 更新为 display:none？

请参阅此工作示例：

[http://jsfiddle.net/bMMhy/1/](http://jsfiddle.net/bMMhy/1/)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:50:21.647

经过一番挖掘，我弄清楚了为什么子元素没有被切换：

jQuery的toggle的源函数如下：

```
function (fn, fn2, callback) {
    var bool = typeof fn === "boolean";

    if (jQuery.isFunction(fn) && jQuery.isFunction(fn2)) {
        this._toggle.apply(this, arguments);

    } else if (fn == null || bool) {
        this.each(function () {
            var state = bool ? fn : jQuery(this).is(":hidden");
            jQuery(this)[state ? "show" : "hide"]();
        });

    } else {
        this.animate(genFx("toggle", 3), fn, fn2, callback);
    }

    return this;
} 
```

如果没有参数传递给函数，则执行以下内容：

```
var state = bool ? fn : jQuery(this).is(":hidden");
jQuery(this)[state ? "show" : "hide"](); 
```

首先隐藏包含元素，然后检查子元素......这意味着子元素将返回 true on `jQuery(this).is(":hidden")`。反过来，jQuery 实际上会将“显示”应用于元素。

**解决方法：**

通过传递 1 的参数，jQuery 将改为调用持续时间为 1 毫秒的 animate 函数来执行切换。

```
$(document).ready(function(){
    $('#myb').click(function(){
        $('.child').toggle(1);
    });    
});​ 
```

在这里看到：http: [//jsfiddle.net/bMMhy/3/](http://jsfiddle.net/bMMhy/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:51:14.393

发生的事情是调用`.toggle`. 我不确定这是否是因为底部继承了显示导致它切换一次，然后因为它具有类，事件与之绑定再次切换 - 或者如果还有其他原因，也许隐藏的嵌套 div 不去很好的jQuery事件。无论哪种方式，这是解决方案：仅隐藏父级。

html:

```
<div class="child">
 Child 1.1
 <div class="nestedchild">
  Child 1.2
 </div>
</div>
<div class="child hidden">
 Child 2.1
 <div class="nestedchild">
  Child 2.2
 </div>
</div>
<button id="myb">Toggle Divs with Class 'Child'</button> 
```

js：

```
$(document).ready(function(){
 $('#myb').click(function(){
     $('.child').toggle();
 });    
});​ 
```

CSS：

```
.child, .nestedchild{
 position:relative;
 width:90%;
 height:90%;
 border: 1px solid blue;    
 margin:20px;
}

.hidden{
 display:none;    
} 
```

​ ​</p>

# wordpress - Wordpress 图片似乎可以上传，但实际上并没有上传

> ID：10215752
> 
> 赞同：2
> 
> 时间：2012-04-18T18:36:37.527
> 
> 标签：wordpress, file-upload, image-uploading

在干净的 WordPress 安装中，重新下载最新版本的 WordPress，我在上传图像时遇到问题……但这不是我通常遇到的问题。

这就是问题所在：**WordPress 让我上传一张图片，并将其保存到媒体列表中并允许我给它一个标题等，但实际文件从未上传。你无法在任何地方查看它。**将图像的完整路径复制到地址栏中也表明那里没有文件。当我使用 FTP 检查上传文件夹时，它是空的。我检查了其他目录以查看是否由于某种原因将图像上传到了错误的位置，但它在服务器上不存在。在 WordPress 中，如果我单击“编辑图像”按钮，则会出现此消息：“图像数据不存在。请重新上传图像。”

wp-content当前设置为767。通常我可以将wp-content设置为767，上传第一张图片，以便WP在uploads文件夹中有写入权限，然后将wp-content改回755。通常它可以工作。不过，这是我第一次遇到这个特定问题。

在 WordPress 设置中，我将“在此文件夹中存储上传”和“文件的完整 URL 路径”留空，但是我尝试输入正确的路径，但仍然无法正常工作。

我在任何地方都找不到解决方案，希望能得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:55:57.007

不要更改 wp_content 文件夹的权限，而是尝试更改 wp-content/upload/ 文件夹的权限。

还要查看 error_log 中是否有任何问题。

# jquery - jQuery：克隆的下拉列表不会对更改做出反应

> ID：10215760
> 
> 赞同：0
> 
> 时间：2012-04-18T18:37:26.607
> 
> 标签：jquery, jquery-mobile

我有一个 div 克隆到一个 jQuery 对象，例如：-

`$dependent = $page.find("div[data-name=dependent]").clone();`

这`$page.find("div[data-name=dependent]")`是隐藏的，即`display: none`在 HTML 中。

现在克隆`div`的也有`<select>`一个明显的克隆了。我对以下内容进行了一些修改`$dependent`：-

```
$dependent.attr("data-name", "dependent-clone");
$dependent.find("a").attr("onclick", 'functionCall()'); 
```

没有对`<select>`.

现在，当我附加克隆的`div`ie`$dependent`时，下拉列表不会显示更改的值。它响应`onChange()`事件但不显示更改的值。

我正在使用 jquery-1.6.4.js 和 jquery.mobile-1.0.1.js。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:57:45.557

Hiya**工作演示**:) [http://jsfiddle.net/EGQEL/7/](http://jsfiddle.net/EGQEL/7/)（如果我错过了什么，请告诉我）

绑定需要在最新的 Jquery 中动态追加使用 .on 或 .live .on 替换 .live

`.on`可以用来代替`.live`

这也会有帮助： http: [//jsfiddle.net/pbWEp/2/](http://jsfiddle.net/pbWEp/2/) Link==> [copy/Clone dropdown list with selected option in jquery](https://stackoverflow.com/questions/3861729/copy-clone-dropdown-list-with-selected-option-in-jquery)

**或** [http://jsfiddle.net/ZTF5J/2/](http://jsfiddle.net/ZTF5J/2/) - 链接==>[下拉克隆使用 jquery 添加和删除](https://stackoverflow.com/questions/9756669/drop-down-clone-add-and-remove-using-jquery)

**或者**你可以提供你的 jsfiddle 我可以看看；**请注意**上面的jsfiddle是给你一个提示:)

希望对你有帮助，祝你愉快，加油！

# jquery - 日期选择器选择的值未提交

> ID：10215763
> 
> 赞同：0
> 
> 时间：2012-04-18T18:37:32.987
> 
> 标签：jquery, jquery-plugins, struts2

一旦用户在struts jquery datepicker中选择了一些东西，我就会尝试提交一个动作，尽管表单正在提交给动作，但这里的datepicker值没有设置是我的代码。

```
main.jsp
<html lang="en">
<head>
 <sj:head compressed="false"/>
<title><s:text name="title.search.main" /></title></head>
<body>
<s:form action="ProcessRoutes.action" id="processRoutesForm">
<s:url id="findDCs" value="/xxxDCs.action"/>
<sj:datepicker name="strRouteDate" id="strRouteDate"
value="%{getText('format.date', '',{routeDate})}"
cssClass="smallField"
onCompleteTopics="datepickerSelectedDate"/>
<sj:div id="findDCsDiv" href="%{findDCs}" listenTopics="datepickerSelectedDate">
  <sj:select id="dcSelect" name="selectedDc" list="%{#session.shipDCList}"
  listKey="number" listValue="name"
  headerKey="" headerValue="Select DC" onChangeTopics="dcSelectChanged"
  src="findRoutes.action">
  </sj:select>
 </sj:div>
</s:form></body></html> 
```

struts.xml

```
<action name="xxxDCs"    
    class="XXX.SearchMainAction"
    method="xxxDCs">
        <result name="input">/jsp/shipdcs.jsp</result>
        <result name="success">/jsp/shipdcs.jsp</result>
        </action> 
```

动作类包含数据类型为字符串的 strRouteDate 的 getter setter 我也尝试将其更改为日期数据类型。我哪里出错了，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:31:12.240

我们需要将 elementIds 或 formIds 添加到 sj:div 以获取提交的表单值

# java - 在 Java 中复制复杂的对象层次结构

> ID：10215767
> 
> 赞同：0
> 
> 时间：2012-04-18T18:37:50.800
> 
> 标签：java

我有一个复杂的对象层次结构，它有几个扩展。

> 类一 { 字符串名称；颜色颜色；列出衣服；}
> 
> 类二扩展一{测试测试；}
> 
> Foo类{一一；二二；}

我想将 One 类对象的所有属性复制到另一个类的新对象中。这该怎么做 ？有没有可用的图书馆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:54:07.330

这里有一对：

*   [推土机](http://dozer.sourceforge.net)
*   [Apache PropertyUtils](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html)
*   [折花](http://code.google.com/p/orika/)
*   [模型映射器](http://modelmapper.org)

推土机速度非常快，并且有很多配置选项。Orika 据说速度非常快，尽管我没有不雅地证实这一点（查看他们在其网站上发布的基准）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:40:57.743

[Dozer](http://dozer.sourceforge.net/)是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。

您可以使用注释或 XML 以编程方式定义用于复制对象字段的映射。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T14:32:17.783

嗯，我用过 orika 和 dozer，我可以说 orika 在我的项目中比 dozer 在更换后至少快 10 倍。而且 orika 需要更少的 jvm 堆内存。orika 更快是因为它将映射规则编译为运行时 java 类来执行属性映射，而不是在运行时查看映射规则并使用 java 反射在运行时获取和设置属性值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-15T09:24:49.043

还有一个比 Orika 更快的框架，看看那里 - [http://inspire-software.com/confluence/display/GeDA/Benchmarks](http://inspire-software.com/confluence/display/GeDA/Benchmarks)

我对一个类中的 4 个字段和 1000000 次复制操作进行简单测试，GeDA 用了 100 毫秒，Orika 用了 1000 毫秒，Dozer 用了 4000 毫秒

# javascript - 显示最多两位小数的数字，不带尾随零

> ID：10215770
> 
> 赞同：11
> 
> 时间：2012-04-18T18:37:57.453
> 
> 标签：javascript, numbers, parsefloat

在我的代码中，我将接受多个值，例如：

```
8.7456
8.7
8 
```

我需要让它们显示为

```
8.74
8.7
8 
```

即显示最多两位小数。

我知道这`.toFixed(2)`将帮助我处理第一个值，但在第二个和第三个值上会有我不想要的尾随零。

如何产生我想要的结果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T19:26:26.243

用于[`Number.toFixed`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed)将数字四舍五入到两位数并格式化为字符串。然后使用[`String.replace`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)切断尾随零：

```
[8.7456, 8.745, 8.74, 8.7, 8].forEach(function(num) {
  var str = num.toFixed(2).replace(/\.?0+$/, "");
  console.log(num, str);
});
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T18:40:54.737

乘以 100 `floor`，除以 100。

```
var n = 8.7456;
var result = Math.floor(n * 100) / 100; // 8.74 
```

编辑：如果你在事后看这个问题，这可能不是你想要的。它满足`8.7456`出现为的奇数要求`8.74`。另见[相关评论](https://stackoverflow.com/questions/10215770/display-numbers-up-to-two-decimals-places-without-trailing-zeros/10215818#comment13122758_10216503)。

# c++ - 析构函数，不会删除我的对象

> ID：10215775
> 
> 赞同：-1
> 
> 时间：2012-04-18T18:38:07.387
> 
> 标签：c++, list, linked-list, destructor

我有一个大问题 - 即我的析构函数没有删除对象，在我的代码中，当我调用`l3.~list();`它时我将粘贴在 main 的下面只删除单链表（这很好），但它不会删除 char* 名称，甚至虽然我在我的析构函数中说明`delete [] name;`。有什么想法有什么问题吗？

这是代码；

```
#include <iostream>
#include <cstdlib>
#include <string>
using namespace std;

class list{

    struct lista
    {
        int num;
        char* word;
        lista* next;
    };
    lista* head;
    char* name;
    public:
    list(char* name1){head=NULL;name=new char[strlen(name1)+1];strcpy(name,name1);}
    char getChar(int key, int index);
    void setChar(int key, int index, char c);
    void insert(int number,char* txt);
    void remove(int number);
    void print();
    list(const list &o);
    list& operator=(const list &x);
    ~list();
};
void list::insert(int number,char* txt){
    lista* ptr,*tmp;
    ptr=head;
    lista* newlista=new lista;
    newlista->num=number;
    newlista->next=NULL;
    newlista->word= new char[strlen(txt)+1];
    strcpy(newlista->word,txt);
    if(head==NULL){
        head=newlista;
        newlista->next=NULL;
    }
    else while(ptr!=NULL){
        if(strcmp(txt,ptr->word)>=0){
            if(ptr->next!=NULL && strcmp(txt,ptr->next->word)<=0)
            {
                tmp=ptr->next;
                ptr->next=newlista;
                newlista->next=tmp;
                break;
            }
            else if(ptr->next!=NULL && strcmp(txt,ptr->next->word)>0)
                ptr=ptr->next;
            else
            {
                //next is empty
                ptr->next=newlista;
                break;
            }
        }
        else{
            //txt mniejszy niz w 1szym elemencie
            newlista->next=head;
            head=newlista;
            break;
        }      
    }
    return;
}

void list::print(){
    cout<<name<<";"<<endl;
    lista *druk;
    druk=head;
    while(druk!=NULL){
        cout<<"txt: "<<druk->word<<" | "<<"num: "<<druk->num<<endl;
        druk=druk->next;
    }
    cout<<endl;
    return;
}

void list::remove(int number){
    if(head==NULL)
        return;
    if(head->num==number){
        lista* ptr=head;
        head=head->next;
        delete [] ptr->word;
        delete ptr;
        return;
    }
    lista* ptr=head;
    while(ptr->next!=NULL && ptr->next->num!=number)
        ptr=ptr->next;
    if(ptr->next==NULL){
        cout<<number<<" element not found"<<endl;
        return;
    }
    lista* todelete=ptr->next;
    ptr->next=todelete->next;
    delete [] todelete->word;
    delete todelete;
    return;
}
list::list(const list &o)
{
    lista *xtr = o.head;
    head=NULL;// bez tego nie działa
    lista *etr=head;// nastawic etr na head?
    while (xtr)
    {
        lista* ntr = new lista;
        if (!ntr)
        {
            cerr << "list::CopyConstructor: Allocation memory failure!";
            cerr << endl;
            break;
        }
        ntr->num = xtr->num;
        ntr->word= new char[strlen(xtr->word)+1];
        strcpy(ntr->word,xtr->word);
        ntr->next = NULL;
        if (head)
            etr->next = ntr;    
        else
            head = ntr;
        etr = ntr; // keep track of the last element in *this
        xtr = xtr->next;
    }
    name = new char[strlen(o.name)+5];
    strcpy(name,o.name);
    strcat(name,"Copy");
}

list& list::operator=(const list &x)
{
    if(this==&x)
        return *this;
    lista *etr=head;
    while(etr) // removing list from this
    {
        etr=etr->next;
        delete head;
        head=etr;
    }
    lista *xtr=x.head;
    while(xtr)
    {
        int copied=xtr->num;
        lista *ntr= new lista;
        ntr->word=new char[strlen(xtr->word)+1];
        if (!ntr) 
        {
            cerr << "list::operator=: Allocation memory failure!" << endl;
            break;
        }
        ntr->num=copied;
        strcpy(ntr->word,xtr->word);
        ntr->next=NULL;
        if (!head)
            head = ntr;
        else
            etr->next = ntr;

        etr = ntr; // keep track of the last element in *this
        xtr = xtr->next;
    }
    char *name=new char[strlen(x.name)+1];
    strcpy(name,x.name);
    return *this;
}

list::~list()
{
    cout<<"Object with name:"<<name<<" destroyed!"<<endl;
    delete [] name;
    lista *dtr=head;
    while(dtr) // removing lista from this
    {
        dtr=dtr->next;
        delete [] head->word;
        delete head;
        head=dtr;
    }

}
void f();
void f(){
    list o("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
    o.insert(4,"kazio");
    o.insert(100,"312jh31io2");
    o.insert(34,"kz31231azio");
    o.insert(1020,"123213312jh31io2");
    o.insert(213123,"z3213io");
    o.insert(1100,"zdrf312jh31io2");
    o.print();
}
int main(){
    list l1("lista1");
    l1.insert(5,"Endian");
    l1.insert(7,"Endianness");
    l1.insert(100,"Hexediting");
    l1.insert(34,".mil");

    l1.print();
    list l2(l1); // usage of CC - the same as list l2=l1; 
    l2.print();
    l2.remove(5);
    l2.print();
    l1.print();

    list l3("asajnment");
    l3=l2=l1;
    l3.print();
    l2.print();
    f();
    l3.print();
    l3.~list(); // here i use destructor on l3
    l3.print(); // l3 is being printed with weird name, even though it should be destroyed
    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:46:06.770

在调用析构函数后调用任何方法都会导致未定义的行为——它可能会也可能不会起作用，并且会产生奇怪的结果。

此外，您不应该直接调用析构函数：

*   当对象在堆栈上分配时，它会在作用域结束时自动销毁。（范围是大括号之间的东西`{}`）
*   当对象在堆上分配时，使用`new`，它应该使用 销毁`delete`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:56:03.930

C++ 析构函数不像您可能在 C 中编写的释放函数。它们更好：在[RAII 惯用语](http://en.wikipedia.org/wiki/RAII)中，您可以在对象退出作用域的那一刻对其进行销毁。这意味着您通常根本不必关心释放资源：只需等到不再需要该对象（因为它无法访问），此时它会自动删除（包括调用析构函数，是的，这是可以安全调用它的唯一方法）。编写良好的 C++ 在许多方面都与垃圾收集语言一样好，但没有它们的一些缺点。

获得 RAII 好处的最简单方法是使用标准容器和智能指针。在您的情况下，`lista* next`用`std::unique_ptr<lista> next`和`char* word`替换，一切都很好，*根本*`std::string word`不需要定义析构函数。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:32:04.777

这段代码有很多错误，我不知道从哪里开始......

*   使用 std::string
*   使用 std::map 将 int 值与字符串相关联。这几乎已经可以满足您的需求了。
*   不要为任何不是新的东西调用析构函数。要删除某些内容，请使用 delete/delete[] 并且不要直接调用析构函数。如果您确实使用 new，请使用 RAII 习惯用法来管理对象，例如 std::unique_ptr 或 std::shared_ptr 以避免手动调用 delete/delete[] 并编写异常安全代码

这是一个稍微改进的版本。请注意，没有一次调用 new/delete。

```
#include <iostream>
#include <string>
#include <map>
#include <cstdio>

class list
{
public:
    explicit
    list( std::string n ) : name( n ) {}

    ~list() { std::cout << "~list:" << name << std::endl; }

    void list::insert(int number, std::string const& txt ){
        items.insert( std::make_pair(number,txt));
    }

    void list::remove(int number){
        items.erase( number );
    }

    void print( ){
        std::cout << name << ";" << std::endl;
        for( Items::const_iterator it = items.begin(), end = items.end(); it != end; ++it  )
        {
            std::cout << "num: " << it->first << " | " << "txt: " << it->second << std::endl;
        }
        std::cout << std::endl;
    }

private:
    typedef std::map<int,std::string> Items;
    Items items;
    std::string name;
};

int main()
{
    list l1( "lista1" );
    l1.insert( 5, "Endian");
    l1.insert( 7, "Endianness");
    l1.insert( 100, "Hexediting");
    l1.insert( 34, ".mil");
    // extra scope so the destructor of l2 is called before call to getchar
    { 
        list l2( l1 ); 
        l2.remove( 5 );
        l2.print();
    }
    l1.print();

    getchar();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:56:44.277

确保在销毁后不会错误地访问您的成员的一种方法是在删除它们后将所有指针设置为 NULL。

这样，您就可以放心，之后没有人可以访问您的敏感数据，因为您不再指向它。而且您可以再次调用析构函数而不会产生不良副作用，因为允许在 NULL 指针上调用 delete 并且什么也不做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-20T07:36:25.220

如果您在删除对象后打印对象的内存状态，您将看到该值保持不变，直到您不分配新对象。为您的程序分配的内存只能变得更大。当您删除数据时，它们不会设置为“0”，只是标记为空闲以供下一个分配对象使用。

编辑：我的意思是，如果您在释放后创建一个具有未初始化值的新对象，他可以取回存储在内存中的旧值。*

# delphi - TVirtualStringTree 中错误绘制的主题复选框

> ID：10215780
> 
> 赞同：4
> 
> 时间：2012-04-18T18:38:38.197
> 
> 标签：delphi, delphi-xe2, virtualtreeview, vcl-styles, tvirtualstringtree

启用 toThemeAware 时，VirtualTrees.pas 版本 5.0.0 中的复选框处理出现损坏。csUncheckedNormal 的节点被绘制为选中 + 热。

要使用 DrawElement 正确绘制未选中的主题复选框，详细信息记录必须是：Element = teButton、Part = 3 和 State = 5。但是，当节点设置为 csUncheckedNormal 时，VirtualTrees.pas 最终会调用 State = 1 的 DrawElement .

VirtualTrees 中似乎声明了很多间接和额外的常量，所以我不确定如何最好地解决这个问题。欢迎提出想法...

（即使是在屏幕上获取 TVirtualStringTree 并填充一些数据的最小代码也有点冗长，无法在此处发布。除了基础知识之外，重现此内容所需要做的就是在 TreeOptions.MiscOptions 中启用 toCheckSupport 并设置 Node.CheckType ： = InitNode 回调中的 ctTriStateCheckBox。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:58:22.407

好吧，因为我认为 VirtualTreeView 在移植到 delphi XE2 时不计入 VCL 样式，所以这可能会解决您的问题。您必须在绘制之前获取元素详细信息，否则您会得到类似的东西（它是 VirtualTreeView 绘制复选框状态的模拟）。注意不同的顺序和工件；这是禁用 VCL 样式的相同代码的结果，第二次启用：

![在此处输入图像描述](../Images/104d6b3caa8ccfeac4ae85dc42f610c6.png)

我知道这很奇怪，但我无法回答你为什么会这样。我可以告诉你，你应该调用[`TThemeServices.GetElementDetails`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Themes.TThemeServices.GetElementDetails)或可选地自己计算状态索引，以使元素渲染正常工作。您可以尝试使用以下修复：

```
procedure TBaseVirtualTree.PaintCheckImage(Canvas: TCanvas; 
  const ImageInfo: TVTImageInfo; Selected: Boolean);
var
  // add a new variable for calculating TThemedButton state from the input
  // ImageInfo.Index; I hope ImageInfo.Index has the proper state order
  State: Integer;
begin
...
  case Index of
    0..8: // radio buttons
    begin
      // get the low index of the first radio button state and increment it by 
      // the ImageInfo.Index and get details of the button element
      State := Ord(TThemedButton(tbRadioButtonUncheckedNormal)) + Index - 1;
      Details := StyleServices.GetElementDetails(TThemedButton(State));
    end;
    9..20: // check boxes
    begin
      // get the low index of the first check box state and increment it by 
      // the ImageInfo.Index and get details of the button element
      State := Ord(TThemedButton(tbCheckBoxUncheckedNormal)) + Index - 9;
      Details := StyleServices.GetElementDetails(TThemedButton(State));
    end;
    21..24: // buttons
    begin
      // get the low index of the first push button state and increment it by 
      // the ImageInfo.Index and get details of the button element
      State := Ord(TThemedButton(tbPushButtonNormal)) + Index - 21;
      Details := StyleServices.GetElementDetails(TThemedButton(State));
    end;
  else
    Details.Part := 0;
    Details.State := 0;
  end;
...
end; 
```

我已经对所有检查类型进行了测试，它对我有用。

# clojure - 确定是否存在空白键

> ID：10215781
> 
> 赞同：2
> 
> 时间：2012-04-18T18:38:39.040
> 
> 标签：clojure

## 编辑：

我的问题是如何过滤掉 zipmap 中似乎是空白键的内容？

尽管我有解决问题的方法，但知道如何过滤密钥会很有帮助。

## 结束编辑：

这个输出

```
:   [: [ ]]   ([ ])   3   ,, 
```

由

```
(println first-ent, " ", map-ent, " ", val-ent, " ", (count out-csv), " ", out-csv) 
```

在这个函数中

```
(defn missing-accts 
    "Prints accounts found in one report but not the other."

    [report-header mapped-data out-file]
    (spit out-file (str "\n\n" report-header "\n\n") :append true)

    (doseq [map-ent mapped-data]
            (let [first-ent (first map-ent)
                  val-ent   (rest  map-ent)
                  out-csv   (if first-ent
                                (str (name (key map-ent)) "," (first (val map-ent)) "," (last (val map-ent)) "\n")
                                nil)]

                (println first-ent, " ", map-ent, " ", val-ent, " ", (count out-csv), " ", out-csv)
                (if (> (count out-csv) 3)                    
                    (spit out-file out-csv :append true)
                    (println "Skipping: ", out-csv))))) 
```

带有空白键的输出的计数为 3 的事实使我可以进行过滤，这一事实似乎不像能够检测到空白键那样干净。找到并过滤掉一个空白键是让我难过的地方。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:19:53.953

您可以使用以下方法创建空白关键字：

```
(keyword "") 
```

您可以使用它来过滤您的列表并删除所有空白关键字：

```
(filter (fn [[key _]] (not= (keyword "") key)) map-ent) 
```

# silverlight - 重新激活应用程序时，Silverlight 工具包转换中途停止

> ID：10215784
> 
> 赞同：1
> 
> 时间：2012-04-18T18:38:48.210
> 
> 标签：silverlight, windows-phone-7, xaml, transitions

我正在使用 nov 11 silverlight 工具包，我只是复制粘贴了基本的过渡来为我的应用程序增添一点趣味，而无需做太多工作。我指的是这段代码：

```
<!--some really simple basic navigation animations to get us started-->
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

这很好用，除非我在应用程序被墓碑化后重新激活它。过渡似乎中途停止。该应用程序保持响应，但看起来完全一团糟。像这样：

![这个截图](../Images/44baf38a40d0f59a87dda66bd04d3d82.png)

有谁知道如何解决这个问题？我认为这可能与我的视图模型有关，并且它在转换过程中被填充......所以如果是这种情况，当转换完成时我可以订阅一个事件吗？然后我可以在我的视图模型中取消抑制属性更改事件。但是当我只是在我的应用程序中导航时，过渡效果很好，所以可能不是这样。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:46:26.877

试试这个代码：[http ://blog.rsuter.com/?p=74](http://blog.rsuter.com/?p=74)

您可以在中定义多个转换`App.xaml`：

```
<Application.Resources>
    <ResourceDictionary>
        <Style x:Key="Transition" TargetType="phone:PhoneApplicationPage">
            ...
        </Style>
        <Style x:Key="Transition2" TargetType="phone:PhoneApplicationPage">
            ...
        </Style>
        <Style x:Key="Transition3" TargetType="phone:PhoneApplicationPage">
            ...
        </Style>
    </ResourceDictionary>
</Application.Resources> 
```

**并为每个页面设置过渡：**

在第 1 页中：

```
<phone:PhoneApplicationPage ... Style="{StaticResource Transition}"> 
```

在第 2 页中：

```
<phone:PhoneApplicationPage ... Style="{StaticResource Transition2}"> 
```

在第 3 页：

```
<phone:PhoneApplicationPage ... Style="{StaticResource Transition3}"> 
```

**您是否尝试过将资源声明移至页面？**

像这样的东西：

```
<phone:PhoneApplicationPage x:Name="MyPage">
    <phone:PhoneApplicationPage.Resources>
        <Style x:Key="LocalTransition">
            ...
        </Style>
    </phone:PhoneApplicationPage.Resources>
</phone:PhoneApplicationPage> 
```

后面的 C# 代码：

```
public class MyPage
{
    public MyPage()
    {
        InitializeComponent();
        Style = (Style)Resources["LocalTransition"];
    }
} 
```

# php - PHP变量被切断

> ID：10215790
> 
> 赞同：2
> 
> 时间：2012-04-18T18:39:10.283
> 
> 标签：php, mysql, html, drop-down-menu

```
while ($row = sqlite_fetch_array($result))
{
$category = $row[0];
    echo "<option value=". $category .">". $category ."</option>\n";

} 
```

好的，基本上，$category 是一个字符串，如：Java Network Programming，在“VALUE”部分它只通过“Java”，而在第二部分，它通过整个字符串？

任何原因，因为这是至关重要的。我试过了 ：

```
<option value=$category> 
```

仍然没有运气，我只是不明白为什么它适用于一个变量而不适用于另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:41:08.427

引用您的属性，并通过 将它们编码为 html [`htmlentities($value, ENT_QUOTES)`](http://php.net/manual/en/function.htmlentities.php)，以防它们包含内部引号。

```
echo "<option value='". htmlentities($category, ENT_QUOTES) ."'>". $category ."</option>\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T18:41:38.247

对我来说，这似乎是一个缺少引号的问题：

```
while ($row = sqlite_fetch_array($result))
{
    $category = $row[0];
    echo '<option value="'. $category .'">'. $category ."</option>\n";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T18:40:34.183

您需要引用您的 HTML 属性。

```
echo "<option value='". $category ."'>". $category ."</option>\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:48:08.703

我不确定为什么会发生这种情况，但是如果您尝试这样做，它应该可以工作

```
echo "<option value='". $category ."'>". $category ."</option>\n"; 
```

就像我所做的那样，将 $category 括在 '' 中。

希望这可以帮助

# java - 项目转maven后JSP类未定义类型

> ID：10215791
> 
> 赞同：0
> 
> 时间：2012-04-18T18:39:10.730
> 
> 标签：java, eclipse, jsp, jakarta-ee, maven

我正在尝试编译这个项目 h__p://ross-warren.co.uk/my-twitter-clone-using-jsp-and-cassandra/

我已经下载了它，花了将近一天的时间搜索所有依赖 jar 文件，但我仍然无法运行该项目。当我进行一些搜索时，我发现了 Maven。所以我已经下载了它，在eclipse中我点击转换为maven或其他东西，我在pom.xml中添加了一些依赖记录，但我仍然无法运行该项目。jsp文件有一些错误。这些错误以前不存在。

例如在文件**LogChech.jsp**

```
 <jsp:useBean id="User"    
    class="uk.co.ross_warren.litter.stores.UserStore"
    scope="session"
    ></jsp:useBean> 
```

我有错误**Undefined type: UserStore**。我不知道问题出在哪里，但我认为包有问题，因为在项目转换之前我有包中的所有java文件（至少eclipse显示包图标），现在只有正常的文件夹图标和文件夹树结构所有java 文件，但是 java 文件中的第一行是打包的东西，我认为这很好。

感谢您的帮助

**编辑**

这是我的 pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Cinnamon</groupId>
  <artifactId>Cinnamon</artifactId>
  <version>0.0.1-SNAPSHOT</version>

      <dependencies>
          <dependency>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-api</artifactId>
                        <version>1.6.4</version>
              </dependency>
              <dependency>
                        <groupId>org.slf4j</groupId>
                        <artifactId>slf4j-log4j12</artifactId>
                        <version>1.6.4</version>
              </dependency>
              <dependency>
                        <groupId>me.prettyprint</groupId>
                        <artifactId>hector-core</artifactId>
                        <version>1.0-4</version>
              </dependency>
      </dependencies>
      <packaging>war</packaging>
</project> 
```

这是 maven 转换 [http://oi39.tinypic.com/2q84o5z](http://oi39.tinypic.com/2q84o5z)之前的第一张图片。

这就是它现在的样子 [http://oi44.tinypic.com/14nmgyf](http://oi44.tinypic.com/14nmgyf)。

好的堆栈溢出说我无法提交图片，所以请使用该网址并添加 jpg 扩展名以查看图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:57:09.810

标准的 maven 目录布局需要 java 源代码`src/main/java`和 web 资源在`src/main/webapp`. 所以你的java源代码`src`甚至没有被编译。这些目录可以在`build`您的 pom.xml 部分中配置。要设置 Web 资源的目录，您还必须配置 maven-war-plugin。

**编辑：**似乎您还缺少一些依赖项，下面的 pom 在命令行上编译时没有错误。我自己不是 eclipse 用户，但这也应该在 eclipse 中工作。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Cinnamon</groupId>
    <artifactId>Cinnamon</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <build>
        <directory>build</directory>
        <sourceDirectory>src</sourceDirectory>
        <outputDirectory>build/classes</outputDirectory>
        <!-- not used in your project -->
        <testSourceDirectory>srcTest</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <warSourceDirectory>WebContent</warSourceDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>me.prettyprint</groupId>
            <artifactId>hector-core</artifactId>
            <version>1.0-4</version>
        </dependency>
        <dependency>
            <groupId>org.expressme</groupId>
            <artifactId>JOpenId</artifactId>
            <version>1.08</version>
        </dependency>
        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>
        <dependency>
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.6.2</version>
        </dependency>
    </dependencies>
</project> 
```

# javascript - javascript更改按钮的值

> ID：10215792
> 
> 赞同：5
> 
> 时间：2012-04-18T18:39:12.740
> 
> 标签：javascript, html, forms

如何更改此按钮的值？我正在看一个教程，但似乎只有 url 发生了变化，而不是按钮。

```
<form name="form" id="form">
<button name="button" id="button">Click Me!</button>
</form>

<script type="text/javascript">
document.form.button.value=new Date();
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T18:44:04.877

我在您的按钮上添加了一个 onclick 以使用该功能更改值。

如果您添加`onsubmit="return false"`到表单标签，它不会刷新页面。

```
<form name="form" id="form" onsubmit="return false">
    <button name="button" id="button" onclick="changeValue();" value="before" >Click Me!</button>
</form>

<script type="text/javascript">
    function changeValue()
    {
        // Changes the value of the button
        document.form.button.value = new Date();

        // Changes the text on the button
        document.form.button.innerHTML = new Date();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T18:41:13.217

```
document.form.button.innerHTML = new Date(); 
```

* * *

**编辑：**

如果您要在单击按钮时将按钮上的文本更改为当前日期，那么这就是您想要做的：

```
<script type="text/Javascript">
    function changeLabel()
    {
        document.getElementById('button').innerHTML = new Date();
    }
</script>

<button id="button" onclick="changeLabel()">Click Me!</button> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T05:37:07.177

这肯定有效...

```
onclick="changeValue(this);"

function changeValue(button)
{
    // Changes the value of the button
    button.value = new Date();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:41:23.303

使用`innerHTML`：

```
document.form1.button1.innerHTML=new Date(); 
```

**更新：**替代你可以定义你的按钮，如：

```
<input name="button" id="button" type="button" value="Click Me!" /> 
```

在这种情况下

```
document.form.button.value=new Date(); 
```

应该像您预期的那样工作。

# c - 在“C”中访问共享内存中的结构成员

> ID：10215793
> 
> 赞同：1
> 
> 时间：2012-04-18T18:39:19.020
> 
> 标签：c, struct, posix, semaphore, shared-memory

我正在尝试编写共享结构类型的代码，但是在尝试写入共享内存中的结构成员时出现分段错误，共享内存位于父进程和子进程之间。正如我在代码中显示的那样，我现在只是尝试访问结构成员，所以我可以稍后使用信号量进行同步。

提前谢谢。

```
typedef struct file
{
    char *shmPtr;
} file_entry;

int main (void)
{

    int shmid;
    int n;
    file_entry *entries;

    if (fork() == 0) {
        /*wait for a while*/

        if ((shmid = shmget(20441, sizeof(file_entry), 0666)) == -1) {
            printf("shmget");
            exit(2);
        }

        entries = (file_entry*) shmat(shmid, 0, 0);
        if (entries->shmPtr == (char *) -1) {
            printf("problem2");
            exit(2);
        }

        printf("\nChild Reading ....\n\n");
        printf("%s\n", entries->shmPtr[0]);
        printf("%s\n", entries->shmPtr[1]);
        putchar('\n');
        printf("\nDone\n\n");
    } else {
        if ((shmid = shmget(20441, sizeof(file_entry), IPC_CREAT | 0666)) == -1) {
            printf("problem3");
            exit(2);
        }

        entries = (file_entry *) shmat(shmid, 0, 0);
        if (entries->shmPtr == (char *) -1) {
            printf("problem4");
            exit(2);
        }
        printf("done attachment");  /*the parent prints this statment, then segmentation fault*/

        entries->shmPtr[0]='a';
        entries->shmPtr[1]='b';
        putchar('\n');

        wait();
        shmdt(&shmid);
    }
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:16:42.093

`shmat`返回一个指向共享内存区域的指针。在您的代码中，在调用 后`shmat`，`entries`指向共享区域。然后，您将该共享区域的前几个字节视为指向 char ( `shmPtr`) 的指针。的值`shmPtr`未初始化，它指向某个随机位置。然后你尝试写入它并得到一个段错误。

**编辑：**

正如理查德建议的那样，您可以摆脱结构并只使用`char *`. 但是，我猜您使用 a`struct`而不仅仅是 a的原因`char *`是您计划将来向结构添加一些额外的字段。如果是这种情况，您可以使用*灵活的数组成员*：

```
typedef struct file
{
    int flag;
    int blah;
    char shmPtr[];
} file_entry; 
```

并且分配变为

```
shmget(20441, sizeof(file_entry) + bufsize, IPC_CREAT | 0666) 
```

当然，如果缓冲区大小是固定的，你可以硬编码它：

```
typedef struct file
{
    int flag;
    int blah;
    char shmPtr[BUFSIZE];
} file_entry;

/* ... */
shmget(20441, sizeof(file_entry), IPC_CREAT | 0666) 
```

# eclipse - 将制表符转换为空格宽度

> ID：10215802
> 
> 赞同：0
> 
> 时间：2012-04-18T18:40:05.910
> 
> 标签：eclipse, indentation

我有许多用 8 个空格字符标识的源代码文件，我想将它们转换为 4 个字符缩进。这样做的最佳方法是什么？使用 eclipse 的技术会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:17:32.380

选择项目，然后按 Ctrl+H 打开“搜索”对话框（或单击“**搜索”** > “**文件**”菜单）。

*   确保在顶部选择了“**文件搜索”选项卡。**
*   **在包含文本：**字段中输入 8 个空格
*   选择您的**文件名模式**（可能`*.java`或只是`*`）
*   选择范围（可能是**Selected Resources**）
*   按 **替换...*按钮。

然而，正如我在上面的评论中所说，使用空格进行缩进是愚蠢的游戏。制表符是缩进的适当抽象，因此您不会遇到此问题。

# python - 使用 pygame 在位置获取像素颜色

> ID：10215803
> 
> 赞同：14
> 
> 时间：2012-04-18T18:40:07.757
> 
> 标签：python, pygame

我在 siaply 屏幕上绘制了一堆矩形，我想知道如何在某个像素位置读取 rgb 颜色？例如，我想获取显示屏上位置 0,0 处像素的颜色，并返回值 [0,0,0]（或类似值）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T18:52:15.770

[http://www.pygame.org/docs/ref/surface.html#Surface.get_at](http://www.pygame.org/docs/ref/surface.html#Surface.get_at)

`Surface.get_at((x, y)): return Color`

> 返回给定像素的 RGBA 颜色值的副本。如果 Surface 没有每像素 alpha，则 alpha 值将始终为 255（不透明）。如果像素位置在 Surface 区域之外，则会引发 IndexError 异常。

# jquery - jQuery 验证 - 如何不接受文件扩展名

> ID：10215805
> 
> 赞同：1
> 
> 时间：2012-04-18T18:40:11.970
> 
> 标签：jquery, file, validation, jquery-validate

我想找到一种在表单提交时拒绝文本字段中的特定扩展名的方法。

我有一个字段，您可以在其中指定 URL，但此 URL 不应链接到 PDF 文件。

我认为有一个名为 jQuery 的验证方法[`accept`](http://docs.jquery.com/Plugins/Validation/Methods/accept#extension)与我想做的完全相反。

有没有办法使用`not()`函数或类似的东西？这比创建自定义验证方法要容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:42:20.713

这是任何想法

```
var ext = $('#fieldid').val().split('.').pop().toLowerCase();
if($.inArray(ext, ['gif','jpg', ...]) == -1) {
    alert('invalid extension!');
} 
```

# django - Django：通过另一个多对多关系访问多对多对象

> ID：10215806
> 
> 赞同：13
> 
> 时间：2012-04-18T18:40:17.930
> 
> 标签：django, django-models, many-to-many, django-views

我已经简化了我的模型，以使我想要做的事情更清楚。

（应用团队中的models.py）

```
 from django.db import models
 from django.contrib.auth.models import User
 import datetime

class Team(models.Model):
    users = models.ManyToManyField(User)
    team_title = models.CharField(max_length=200)
    team_description = models.CharField(max_length=200)

    def __unicode__(self):
        return self.team_title 
```

（应用文档中的models.py）

```
from django.db import models
import datetime

class Document(models.Model):    
   teams = models.ManyToManyField("Teams.Team", blank=True)
   document_title = models.CharField(max_length=200)
   document_description = models.TextField()

def __unicode__(self):
    return self.document_title 
```

我想要实现的是获取与文档关联的用户列表，方法是首先获取与文档关联的所有团队，然后从中获取与这些团队关联的所有用户。

到目前为止，我的尝试是这样的

（应用文档中的view.py）

```
from django.contrib.auth.models import User
from Documents.models import *
from Teams.models import *

def docUsers(request, doc_id):
    current_document = Documents.objects.get(pk = doc_id)
    associated_users = current_document.teams.all().users

    .... 
```

**错误：** “QuerySet”对象没有“用户”属性

```
associated_users = current_document.items.all().users.all() 
```

**错误：** “QuerySet”对象没有“用户”属性

```
associated_users = current_document.items.users.all() 
```

**错误：** “ManyRelatedManager”对象没有属性“用户”

我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T19:01:39.923

嗯，是。`current_document.teams.all()`是一个查询集 - 或多或少是一个团队列表。要求 是没有意义的`current_document.teams.all().users`，因为查询集本身没有“用户”属性，因此会出现错误。`users`是该查询集中每个 Team 元素的*属性*。因此，一种方法是遍历查询集并询问与每个团队关联的用户。

然而，这将是非常低效的——每个团队调用一次数据库。更好的方法是直接询问数据库：给我与当前文档相关联的团队中的所有用户。像这样：

```
User.objects.filter(team__documents=current_document) 
```

# http - 从 Salesforce.com APEX 发布“multipart/form-data”

> ID：10215808
> 
> 赞同：4
> 
> 时间：2012-04-18T18:40:23.953
> 
> 标签：http, salesforce, apex-code

我有一个 APEX 方法，它尝试使用SFDC 的 APEX 代码将表单*发布*到远程端点。

一切似乎都正确编码，服务器发回了 200 响应，但附件没有随请求一起到达……SFDC 是否在发送之前删除了我的帖子正文的内容？

```
HttpRequest req = new HttpRequest();
req.setHeader('Authorization','Basic '+EncodingUtil.base64Encode(Blob.valueOf('removed:removed')));
req.setHeader('Content-Type','multipart/form-data; boundary=-----------------------------153501500631101');
req.setHeader('X-Atlassian-Token','nocheck');
req.setMethod('POST');  
req.setEndpoint(endPoint+'issue/'+c.Internal_Bug_Number__c+'/attachments');

String body = '-----------------------------153501500631101\r\n';
body = body + 'Content-Disposition: form-data; name="Filedata"; filename="'+attachments[0].Name+'"\r\n';
body = body + 'Content-Type: '+attachments[0].ContentType+'\r\n';
body = body + 'Content-transfer-encoding: base64\r\n\r\n';
body = body + attachments[0].Body+ '\r\n';
body = body + '-----------------------------153501500631101--\r\n';

req.setBody(body); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:37:43.567

试试这个解决方案。这是我提出的 Blob+HttpResponse 的混乱解决方案。[http://enreeco.blogspot.it/2013/01/salesforce-apex-post-mutipartform-data.html](http://enreeco.blogspot.it/2013/01/salesforce-apex-post-mutipartform-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T22:03:59.653

您应该能够使用 EncodingUtil.urlEncode 来确保表单参数。请参阅[https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_restful_encodingUtil.htm](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_restful_encodingUtil.htm)

# python - 'easy_install' 不是内部或外部命令、可运行程序或批处理文件

> ID：10215810
> 
> 赞同：10
> 
> 时间：2012-04-18T18:40:35.120
> 
> 标签：python, windows-7, python-2.7, easy-install

我刚刚在我的 Windows 7 机器上下载并安装了最新版本的 Python。

```
Python 2.7.3 
```

现在我想安装一个我在网上找到的[Twitter 库：](http://tweepy.github.com/)

但是，当我尝试运行时`easy_install tweepy`，我收到以下错误消息：

> 'easy_install' 不是内部或外部命令、可运行程序或批处理文件。

Python 已经放在我的路径中，因为我可以在命令行中调用 Python 程序。

* * *

这是我安装 Python 的文件夹的屏幕截图。

![在此处输入图像描述](../Images/009647aedb8f62bb4e416a7e402324c2.png)

在 Tools 文件夹中：

![在此处输入图像描述](../Images/7136688d1ebffcc5ec5e04447538b05e.png)

在脚本文件夹中：

![在此处输入图像描述](../Images/1e75dbf887aa50d989d60a9e847d415a.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T18:44:23.777

你需要：

1.  安装easy_install：[http://pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)

2.  添加`C:\Python27\Scripts`到您的`PATH`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-26T09:07:37.127

我对 Python 3.4 也有同样的问题。使用以下步骤修复它：

> cd C:\Python34\Scripts .\easy_install pip

（或您需要安装的）带有 .\ 您授予该命令的管理员权限

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:45:24.370

我认为您应该[设置“PATH”](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)变量才能执行它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T18:44:05.527

看起来 easy-install 本身并没有安装在您的系统上。

有关安装的说明，请参阅[上一个问题](https://stackoverflow.com/questions/4930216/how-to-install-easy-install-in-python-2-7-1-on-windows-7)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-03T06:17:34.653

> > **Basics 官方python包需要安装**

*您可以通过输入以下命令通过命令行安装软件包：*

```
python -m pip install --user numpy scipy matplotlib ipython jupyter pandas sympy nose 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-22T13:57:15.843

0.安装easy_install

1.在搜索中搜索“编辑系统环境变量”。

2.点击环境变量。

3.在“系统变量”下单击“路径”，然后单击编辑。

4.点击“新建”。

5.返回并复制安装python包（easy_install）的路径并将其粘贴到那里。

6.单击确定一切。

7.检查现在它工作...

# javascript - 文本字段中的实时语法突出显示？

> ID：10215813
> 
> 赞同：1
> 
> 时间：2012-04-18T18:40:45.043
> 
> 标签：javascript, syntax-highlighting, textfield

许多流行的网站（例如[JSFiddle）](http://www.jsfiddle.net)都有编辑器，可以在您在文本字段中键入代码时直接突出显示您的代码。

对于我自己的 Rails 应用程序，我需要一个插件，它可以在您键入代码时突出显示您的代码，并支持多种语言。如何快速创建或使用插件来进行这种类型的突出显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:42:33.857

我听说了关于[CodeMirror的好消息](http://codemirror.net/)

# xslt - XSLT：嵌套的 for-each 和动态变量

> ID：10215815
> 
> 赞同：0
> 
> 时间：2012-04-18T18:40:46.400
> 
> 标签：xslt

这是我的 XML 和 XSLT 代码

```
<root>
    <act>
        <acts id>123</acts>
    </act>
    <comp>
        <comps id>233</comps>
    </comp>
</root>

<xsl:for-each select="act/acts">
    <xsl:variable name="contactid" select="@id"/>
    <xsl:for-each select="root/comp/comps">
        <xsl:variable name="var" select="boolean(contactid=@id)"/>
    </xsl:for-each>
    <xsl:choose>
        <xsl:when test="$var='true'">
          . . . do this . . .
        </xsl:when>
        <xsl:otherwise>
          . . . do that . . .
        </xsl:otherwise>
    </xsl:choose>
</xsl:for-each> 
```

我想动态分配真或假`var`并在内部使用它`<xsl:choose>`进行布尔测试。`for-each`我希望这有助于找到更好的解决方案来摆脱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:25:27.623

首先要注意的是 XSLT 中的变量是不可变的，一旦初始化就不能更改。XSLT 的主要问题是您在**xsl:for-each**块中定义变量，因此它只存在于该块的范围内。它不是全局变量。每次都会定义一个只能在**xsl:for-each中使用的新变量**

从您的 XSLT 来看，您似乎想要遍历 act**元素**并根据是否存在具有相同值的**comps元素执行特定操作。**另一种方法是定义一个键来查找**comps**元素，就像这样

```
<xsl:key name="comps" match="comps" use="@id" /> 
```

然后你可以简单地检查一个**comps**元素是否存在（假设你定位在一个**act**元素上。

```
<xsl:choose>
   <xsl:when test="key('comps', @id)">Yes</xsl:when>
   <xsl:otherwise>No</xsl:otherwise>
</xsl:choose> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="comps" match="comps" use="@id" />

   <xsl:template match="/root">
      <xsl:apply-templates select="act/acts" />
   </xsl:template>

   <xsl:template match="acts">
      <xsl:choose>
         <xsl:when test="key('comps', @id)"><res>Yes</res></xsl:when>
         <xsl:otherwise><res>No</res></xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下（格式良好的）XML 时

```
<root>
   <act>
      <acts id="123"/>
   </act>
   <comp>
      <comps id="233"/>
   </comp>
</root> 
```

以下是输出

不

但是，通常最好在 XSLT 中避免使用诸如**xsl:choose**和**xsl:if**之类的条件语句。相反，您可以构建 XSLT 以利用模板匹配。这是替代方法

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="comps" match="comps" use="@id" />

   <xsl:template match="/root">
      <xsl:apply-templates select="act/acts" />
   </xsl:template>

   <xsl:template match="acts[key('comps', @id)]">
      <res>Yes</res>
   </xsl:template>

   <xsl:template match="acts">
      <res>No</res>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于相同的 XML 时，输出相同的结果。**请注意，在匹配存在组合的情况时，****行为**节点的更具体的模板将优先考虑。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:58:48.083

您的 xml 文件中有一些错误，但假设您的意思是：

```
<root>
    <act><acts id="123"></acts></act>
    <comp><comps id="233"></comps></comp>
</root> 
```

这是一个完整的解决方案：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"> 

    <xsl:template match="/">
        <doc>   
           <xsl:apply-templates select="root/comp/comps"/>  
        </doc>
    </xsl:template>

    <xsl:template match="root/comp/comps"> 
        <xsl:variable name="compsid" select="@id"></xsl:variable>
        <xsl:choose>
            <xsl:when test="count(/root/act/acts[@id=$compsid])&gt;0">Do This</xsl:when>
            <xsl:otherwise>Do That</xsl:otherwise>
        </xsl:choose>
    </xsl:template> 

</xsl:stylesheet> 
```**

# .net - 数据库对象上的 .NET 事件处理程序

> ID：10215819
> 
> 赞同：1
> 
> 时间：2012-04-18T18:40:56.873
> 
> 标签：.net, sql-server

我想减少我的应用程序解决方案（许多应用程序、1 个数据库、一些第 3 方）中的轮询，客户想要最新的 GUI 状态正在发生的事情。是否可以通过 .NET 代码将事件处理程序添加到使用 SQL Server 技术的表或数据库中？

以下是我遇到的一些解决方案：

*   具有外部激活的 SQL Server Service Broker - 仅启动新应用程序，而不是真正的“事件处理程序”类型的场景
*   CLR 存储过程 - 功能有限，显然在获取 GUI 状态屏幕的事件时会遇到同样的问题
*   去自定义 - 我可以做一些疯狂的事情，比如让 SQL Server 在一个文件夹中创建一个文件（使用 XP 命令 shell），当一个合格的事件发生时，一个触发器，然后让一个`FileSystemWatcher`对象拾取文件更改事件并以这种方式触发它，但不知何故闻起来很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:46:02.810

您可能想查看[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)。唯一需要注意的是，正如文档所述，

> SqlDependency 设计用于 ASP.NET 或中间层服务，在这些服务中，相对少量的服务器对数据库具有活动的依赖项。它不是为在客户端应用程序中使用而设计的，在客户端应用程序中，成百上千的客户端计算机将为单个数据库服务器设置 SqlDependency 对象。如果您正在开发的应用程序在数据更改时需要可靠的亚秒级通知，请查看 SQL Server 联机丛书中的“规划通知”主题中的规划有效的查询通知策略和查询通知的替代方案部分。

一般来说，尽管我发现上述陈述对于大多数 SQL Server 客户端应用程序都是正确的，所以希望这不应该是一个问题。

# asp.net-mvc-3 - 实体框架、通用存储库和单元测试

> ID：10215822
> 
> 赞同：0
> 
> 时间：2012-04-18T18:40:59.810
> 
> 标签：asp.net-mvc-3, unit-testing, repository, moq

我解决了我的问题，但不确定为什么事情会正常工作并且我会问，因为我总是想知道为什么事情会以他们的方式工作。

好的，我正在开发一个 MVC 3 应用程序，它使用通用存储库、用于 DI 的统一和用于单元测试的起订量。在我编辑项目的单元测试中，我的控制器最初具有以下内容： AnEntity obj = _anEntityService.GetById(id);

但是，当我的单元测试在控制器中调用 Edit(1) 时，会返回 null。当我将读取更改为 AnEntity obj = _anEntityService.GetAll().FirstOrDefault(p => p.Id == id);

它正确返回了模拟项目。

现在，我很高兴我弄明白了，但是，我仍然对为什么这对单元测试有效，但 GetById 在我运行应用程序时正在工作。

任何见解都将是最有帮助的。

提前致谢。

这是模拟的数据：

```
public class AdministrationMockData
{
    #region Administration Mock Data
    #region County Mock Data
    public static void CreateCounty(ref Mock<ICountyService> mock)
    {
        mock.Setup(m => m.GetAll()).Returns(new List<County> 
        {
    new County { Id = 1, Name = "Adams", StateId = 39, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new County { Id = 2, Name = "Berks",  StateId = 39, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new County { Id = 3, Name = "Chester",  StateId = 39, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new County { Id = 4, Name = "York",  StateId = 39, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new County { Id = 5, Name = "Baltimore",  StateId = 21, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new County { Id = 6, Name = "Montgomery",  StateId = 21, IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" }
  }.AsQueryable());
    }
    #endregion County Mock Data

    #region State Mock Data
    public static void CreateState(ref Mock<IStateService> mock)
    {
        mock.Setup(m => m.GetAll()).Returns(new List<State> 
        {
    new State { Id = 21, Name = "Maryland", Code = "MD", IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" },
    new State { Id = 39, Name = "Pennsylvania",  Code = "PA", IsActive = true, LastChangedDate = DateTime.Now, LastChangedBy = "dba", AddedDate = DateTime.Now, AddedBy = "dba" }        
  }.AsQueryable());
    }
    #endregion State Mock Data
    #endregion Administration Mock Data
} 
```

这是编辑的单元测试

```
 [TestMethod]
    public void Can_Edit_County()
    {
        // Arrange
        // - create the mock repositories
        Mock<ICountyService> mockCounty = new Mock<ICountyService>();
        Mock<IStateService> mockState = new Mock<IStateService>();
        AdministrationMockData.CreateCounty(ref mockCounty);
        AdministrationMockData.CreateState(ref mockState);

        // Arrange
        // - create a controller and make the page size 6 items
        CountyController controller = new CountyController(mockCounty.Object, mockState.Object);
        controller.PageSize = 6;
        controller.Testing = true;

        // Act
        County c1 = controller.Edit(1).ViewData.Model as County;
        County c2 = controller.Edit(2).ViewData.Model as County;
        County c3 = controller.Edit(3).ViewData.Model as County;

        // Assert
        Assert.AreEqual(1, c1.Id);
        Assert.AreEqual(2, c2.Id);
        Assert.AreEqual(3, c3.Id);
    } 
```

这是控制器编辑例程：

```
 public ViewResult Edit(int id)
    {
        //County obj = _countyService.GetById(id);
        County obj = _countyService.GetAll().FirstOrDefault(p => p.Id == id);
        if (!Testing)
        {
            PopulateCountyDropDownLists(obj.StateId);
        }
        return View(obj);
    } 
```

我有一个通用存储库和接口存储库，它由 TEntity 为每个特定实体实例化，并且还有一个服务和接口服务来执行存储库。我的存储库和服务基于：[http ://efmvc.codeplex.com/releases/view/58663](http://efmvc.codeplex.com/releases/view/58663)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:48:45.277

你得到 null 因为你从来没有设置你`CountyService`在调用时返回正确的数据`GetById`。添加下面的代码来设置模拟，你会很好地使用这个`GetById`方法：

```
mock.Setup(m => m.GetById(1).Returns(new State { Id = 1, ... }); 
```

或将其设置为与传递给方法的任何参数一起使用：

```
mock.Setup(m => m.GetById(It.IsAny<int>()).Returns(new State { ... }); 
```

# java - Java：如何根据文件创建日期从文件夹中选择最新的 10 个文件？

> ID：10215825
> 
> 赞同：-2
> 
> 时间：2012-04-18T18:41:14.600
> 
> 标签：java, performance, file

我的服务器中有一个包含 10,000 张图像的文件夹，其中可以存在从当前日期到最近 2 个月的图像。

是否有可能我只能拾取最新的 10 个文件而不会出现大的性能问题？

Java：如何根据文件创建日期从文件夹中选择最新的 10 个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:07:29.353

我会说完全一样 Nitin 但我知道你不希望内存中的 100 000 张图像

是否可以修改文件名以包含其创建日期？例如图片765.jpeg -> 20120418_picture765.jpeg

如果是，请使用 FileFilter 仅检索有限数量的文件，例如：今天的文件 将它们存储在 ArrayList 中 您没有 10 张图像吗？继续寻找昨天，然后是前一天，...

另一种方法：使用两个文件夹 一个用于活动图片 第二个用于存档 由您决定何时将图片从一个目录移动到另一个目录

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:49:14.780

创建一个`File`指向该目录的对象。用于`listFiles()`获取目录中的文件数组。排序它`lastModified()`，你得到你需要的。

你可以看到这个[参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:44:14.367

获取所有文件，按日期对它们进行排序，然后取最后 10 个元素。

# asp.net-mvc - 如何让控制器在 MVC asp.net 中允许 http 和 https 流量？

> ID：10215826
> 
> 赞同：1
> 
> 时间：2012-04-18T18:41:14.963
> 
> 标签：asp.net-mvc, model-view-controller, http, ssl, https

我有一个通常从 javascript 函数触发的控制器方法。但是，我并不是要强迫每个人都使用 ssl。我是否可以同时允许 http 和 https 流量？

例子：

[http://analytics.site.com/visit/new?blah=blahblah](http://analytics.site.com/visit/new?blah=blahblah)

[https://analytics.site.com/visit/new?blah=blahblah](https://analytics.site.com/visit/new?blah=blahblah)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:47:52.640

你可以这样做

1.  不要`[Https]`在您的操作方法上设置属性。
2.  在没有协议的情况下调用操作（在 javascript 中）。

`//analytics.site.com/visit/new?blah=blahblah`

**代替**

`https://analytics.site.com/visit/new?blah=blahblah`

# c# - 从 C# 中的私钥中提取公钥

> ID：10215828
> 
> 赞同：-8
> 
> 时间：2012-04-18T18:41:22.857
> 
> 标签：c#, public-key-encryption

我曾经`sn.exe`生成一个密钥对（私钥和公钥）。我从私钥中提取公钥，如下所示：

`sn -p keyPair.snk publicKey.snk`

我使用 C# 读取它并将其作为二进制文件存储在数据库中以用于加密我的数据。

有什么方法可以在不使用 C# 的情况下从私钥中提取公钥`sn.exe`？

**注意**：我想要一个公钥`byte`来与我存储在数据库中的公钥进行比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T19:37:44.477

> 有没有办法在不使用 sn.exe 的情况下从 C# 中的私钥中提取公钥？

很难做到这一点，但这是可能的；我已经这样做了。

您需要做的是 p/invoke 到 mscorwks.dll 中的 StrongNameGetPublicKey。

> 我使用 C# 读取它并将其作为二进制文件存储在数据库中以用于加密我的数据

**这是一个极其糟糕的主意**。强名称公钥的目的不是加密您的数据！强名称公钥的目的是**让您的客户验证您提供给他们的程序集是否由您编写。**如果您将公钥用于该任务以外的任何事情，*那么您正在做非常非常错误的事情，*您应该立即停止这样做。

强名称使用加密，但它们不是加密技术；它们是用于*代码访问安全策略评估的**证据生成*技术。

# ruby-on-rails - 跨应用程序/服务器的 Rails 身份验证

> ID：10215831
> 
> 赞同：30
> 
> 时间：2012-04-18T18:41:35.353
> 
> 标签：ruby-on-rails, ruby, authentication, oauth, single-sign-on

我一直在开发我的 Rails 应用程序，同时尽可能保持它们的模块化。我试图在下面实现不同的部分作为服务。

以 Facebook 为例：
a) 一个允许用户拥有墙、帖子等的**MainApp。b) 一个存储照片、允许用户查看他的照片等的 PhotoApp** 。**这**是一个独立的应用程序，它将具有MainApp 也可以使用 REST API。

 **我正在考虑使用 OAuth 作为单点登录解决方案（如本教程[http://blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on /](http://blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on/) ) 其中每个应用程序都将通过 OAuth 进行授权，并将根据 cookie 访问当前用户会话。

***第一个问题：***这是一个可行的解决方案吗？

***第二个问题：***我希望能够**从MainApp**服务器（而不是用户的浏览器）**调用PhotoApp** API在这种情况下身份验证如何工作？

 *****第三个问题：***如果说我有一个使用 node.js 的服务，这将如何工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-03T17:54:49.517

是的，使用 OAuth 的 SSO 是一种可行的解决方案，但它并不是最简单的解决方案。在构建任何新事物时，[OAuth 2.0](http://oauth.net/2/)是必经之路。OAuth 标准涵盖了很多领域。

OAuth 的主要优点是它**允许用户在不向 3rd 方透露密码的情况下让 3rd 方应用程序访问他们的帐户**。如果您没有认真提供这种互操作性，那么 OAuth 可能是矫枉过正。

鉴于复杂性，我提供了一对不同的解决方案：

**对于单点登录**

诀窍是在域内的主机之间共享会话 ID cookie，并使用共享会话存储（如 ActiveRecordStore 或基于缓存的存储。）

每个 Rails 应用程序都有一个用于签署 cookie 的“秘密”。在较新的 Rails 应用程序中，它位于`/config/initializers/secret_token.rb`. 在每个应用程序中设置相同的秘密令牌。

然后，配置会话以允许来自所有子域的访问：

```
AppName::Application.config.session_store :active_record_store, :key => '_app_name_session', :domain => :all 
```

**对于内部 API 调用**

使用良好的共享密钥通过 HTTPS 连接进行身份验证。在“授权”标头值中传递秘密。

您可以轻松地将共享密钥与其他架构（如 node.js）一起使用。只要确保您始终使用 HTTPS，否则共享密钥可能会在网络上被嗅探。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-18T16:06:31.770

您可以查看 Jeremy Green 在 Octolabs 在 2014 RailsConf 期间提出的面向服务的架构解决方案。

包含所有资源（repos、演示等）的博客文章位于此处：[http ://www.octolabs.com/so-auth](http://www.octolabs.com/so-auth)

解释一切的视频在这里：[http ://www.youtube.com/watch?v=L1B_HpCW8bs](http://www.youtube.com/watch?v=L1B_HpCW8bs)

这个集中式 SSO 不是一项简单的任务，但 Jeremy 在谈论面向服务的架构方面做得非常出色，并准确地分享了您如何将这个系统组合在一起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T05:45:16.407

我最近遇到了一个类似的问题，想在 Rails 和 Erlang 应用程序之间共享会话数据。我的解决方案是编写一个`Rack::Session::Abstract::ID`类，将 Redis 中的会话存储为哈希值。它不调用`Marshal.dump`类型`String`。这允许非 ruby​​ 应用程序使用某些会话值（如果它们具有`session_id`.

```
require 'rack/session/abstract/id'

class MaybeMarshalRedisSession < Rack::Session::Abstract::ID

  def initialize(app, options = {})
    @redis  = options.delete(:redis) || Redis.current
    @expiry = options[:expire_after] ||= (60 * 60 * 24)
    @prefix = options[:key] || 'rack.session'
    @session_key = "#{@prefix}:%s"
    super
  end

  def get_session(env, sid)
    sid ||= generate_sid
    session = @redis.hgetall(@session_key % sid)
    session.each_pair do |key, value|
      session[key] = begin
        Marshal.load(value)
      rescue TypeError
        value
      end
    end

    [sid, session]
  end

  def set_session(env, sid, session, options={})
    @redis.multi do
      session.each_pair do |key, value|
        # keep string values bare so other languages can read them
        value = value.is_a?(String) ? value : Marshal.dump(value)
        @redis.hset(@session_key % sid, key, value)
      end
      @redis.expire(@session_key % sid, @expiry)
    end

    sid
  end

  def destroy_session(env, sid, option={})
    @redis.del(@session_key % sid)
    generate_sid unless options[:drop]
  end

end 
```

您可以从 rails 使用它：

```
 MyApp::Application.config.session_store MaybeMarshalRedisSession 
```

从机架：

```
 use MaybeMarshalRedisSession 
```

并从其他地方：

```
redis.hgetall("rack.session:#{session_id}") 
```

如果您想从 MainApp 或 Node.js 调用 PhotoApp，您可以发出包含用户会话 cookie 的 HTTP 请求。****

# iphone - AVPlayer 会在暂停后继续从 URL 缓冲多长时间？

> ID：10215837
> 
> 赞同：0
> 
> 时间：2012-04-18T18:41:58.490
> 
> 标签：iphone, objective-c, xcode, nsurlconnection, avplayer

我正在阅读[AVPlayer 类文档](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)，但找不到我的问题的答案。

我正在我的 iPhone 应用程序上播放来自 Internet 的流式音频，我想知道`[myAVPlayer pause];`调用后是否`myAVPlayer`会在后台长时间下载音频文件。

如果用户按下**“暂停”**按钮，调用 `[myAVPlayer pause];`然后离开应用程序，会`myAVPlayer`继续下载大量数据吗？

当用户使用 3G 网络时，我很担心这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:10:59.390

我面临同样的问题并做了一些实验。我的观察只对视频有效，但如果它们也对音频有效，那么当你按下暂停时，AVPlayer 将尝试缓冲大约 30 秒的内容。如果您可以访问网络服务器，则可以运行 tcpdump/wireshark 并查看按下暂停后服务器继续发送数据的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-12T15:26:38.140

您可以管理 AVPlayer 继续缓冲的时间。您需要管理avplayer currentItem 的**preferredForwardBufferDuration**。如果你想停止缓冲设置值为 1 因为如果你将它设置为 0 它将自动设置

```
self.avPlayer.currentItem.preferredForwardBufferDuration = 1; 
```

**来自 Apple 文档：**此属性以秒为单位定义首选的转发缓冲区持续时间。如果设置为 0，播放器将为大多数用例选择适当的缓冲级别。将此属性设置为较低的值将增加播放停止和重新缓冲的机会，而将其设置为较高的值将增加对系统资源的需求。

# javascript - Src 更改在 Firefox 中有效，而不是在 IE/Chrome 中

> ID：10215843
> 
> 赞同：1
> 
> 时间：2012-04-18T18:42:29.037
> 
> 标签：javascript, html, list, drop-down-menu, midi

我正在尝试创建一个下拉列表，当 onchange 事件触发时，它将在后台自动播放一个 midi 文件。这在 Firefox 中运行良好，但 IE 和 Chrome 甚至没有在他们应该启动的时候启动 QuickTime 播放器。我已经用静态源测试了嵌入代码，它在所有三个浏览器中都可以正常工作。

```
<form name="music">
    <select name='audiomenu' onchange="midiplay(this);">
        <option value="">No Music</option>
        <option value="midi/1.mid">Background 1</option>
        <option value="midi/2.mid">Background 2</option>
     </select>
</form>

<script type="text/javascript">
    function midiplay(what) {   
        document.getElementById('midijuke').src = what.options[what.selectedIndex].value;
    }
</script> 

<embed src="#" id="midijuke" autostart="true" loop="true" type="audio/midi" width="120" height="40"></embed> 
```

IE 和 Chrome 也不报告任何 JavaScript 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:55:46.103

使用 DOM（因为它比 jQuery 更容易进行 DOM 操作）：

```
var juke = document.getElementById('midijuke');

juke.src = 'http://blah.com/foo.mid';

juke.parentNode.removeChild(juke).appendChild(juke); 
```

HTML 标记属于 HTML 文档，而不是 JavaScript 字符串。包装器应该放在文档中，而不是字符串。操作 DOM 的正确方法是使用 DOM API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:50:19.257

只需删除整个内容并将其重新附加到文档即可。它为您省去了所有的麻烦。

```
function midiplay(w) {   
    var j=document.getElementById('midijuke');
    j.src = w.options[w.selectedIndex].value;
    j.parentNode.insertBefore(j,j);
} 
```

# joomla - 如何在 Joomla 1.5 模板之外显示系统消息？

> ID：10215846
> 
> 赞同：0
> 
> 时间：2012-04-18T18:42:38.787
> 
> 标签：joomla, joomla1.5, joomla-extensions, joomla-template, joomla-component

Joomla 极客！

请帮我。网页设计师为 Joomla 创建设计，其中

```
<jdoc:include type="message" /> 
```

应该位于自定义组件的视图（default.php）内。这是因为 div 嵌套，我无法更改任何内容。

尽管如此，我必须找到一种解决方案，将**Joomla 系统消息**包含在组件的视图（**default.php**）而不是模板的 index.php 中，该怎么做？是否可以？

**UPD：**我已经解决了这个问题，但现在我需要覆盖这段代码：

```
<dl id="system-message">
  <dt class="message">MESSAGE_TYPE</dt>
  <dd class="message message fade">
    <ul>
      <li>MESSAGE_TEXT</li>
    </ul>
  </dd>
</dl> 
```

有了这个：

```
<div class="message">
  <span class="jsMessage info_message">
    <span>
      MESSAGE_TEXT <a class="close jsCloseMessage" href="javascript:void(0)"></a
    </span>
  </span>
</div> 
```

我应该为此使用**templates/mytemplate/html/modules.php**文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:25:02.113

```
$document = & JFactory::getDocument();
$renderer = $document->loadRenderer('message');
$msg=$renderer->render(); 
```

# php - 如何使用脚本终止 CAS 会话？

> ID：10215850
> 
> 赞同：1
> 
> 时间：2012-04-18T18:42:50.197
> 
> 标签：php, cas, phpcas

我们使用 CAS 和 phpCAS 来处理我们的 PHP 脚本和 CAS 之间的操作。对于我们更高级的 Web 应用程序之一，CAS 仅用于身份验证，而不用于会话管理。在我们的注销脚本中，我们希望终止 CAS 会话等。但是，我无法确定一种远程调用 phpCAS 以终止 CAS 会话的方法，而不会在浏览器中发生某种操作。

来自 phpCAS 文档：

> **phpCAS::logout()**
> 注销后，CAS 服务器打印注销页面。
> 
> **phpCAS::logoutWithRedirectService($service)**
> 注销后，CAS 服务器将浏览器重定向到给定的 URL。

选项 #1 重定向到 CAS 注销页面。选项 #2 重定向到给定的 URL。我们需要一个两者都不做的选项。

考虑这个代码片段：

```
//Kill the CAS session
phpCAS::logout();

//Kill the cookie
setcookie("our-cookie");

//Unset hash in the database
$result = pg_query($connection, "UPDATE table SET field = null WHERE field = '".pg_escape_string($var)."'"); 
```

phpCAS 将浏览器重定向到某处的默认操作会破坏此功能。这个脚本不应该重定向浏览器，将被异步调用，并且返回将一个变量发送回一个修改当前视图的 ExtJS 回调。

有谁知道我如何强制 CAS 服务器结束会话，无论是否使用 phpCAS，以允许此功能发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:50:01.117

由于同域策略，无法通过 GET 或 POST 从客户端应用程序作为异步脚本向您的 CAS 服务器发出正确的请求。

一种解决方法是将 CAS 注销包含为脚本对象（类似于 JSONP 跨域请求）：

```
function logout()
{
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.src = 'https://cas.company.com/logout';
    script.type = 'text/javascript';
    head.appendChild(script);
} 
```

这种方法的负面影响包括：

*   您看不到来自 CAS 服务器的成功响应。
*   将有一个警告记录到控制台，说明 HTML 正在从脚本标记返回。

# java - java类协作/聚合的需要说明

> ID：10215854
> 
> 赞同：0
> 
> 时间：2012-04-18T18:43:03.903
> 
> 标签：java, class, collaboration, aggregation

我正在做一项任务，我需要为汽车模拟器制作 3 节课。一个用于燃料，一个用于里程。“里程等级应该能够与 FuelGauge 对象一起使用。每行驶 24 英里，它应该将 FuelGauge 对象的当前燃料量减少 1 加仑。（汽车的燃油经济性为每加仑 24 英里）。” 我只是在努力理解如何正确地将这些类链接在一起，以便他们可以做必要的事情。

非常感谢某人的良好解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:21:38.097

我希望我能正确理解你的问题。简单的答案是 FuelGauge 类将具有属性 amount，可以通过简单的 setter/getter 访问。

```
public class FuelGague {

    private double amount;
    // Starting amount of fuel
    public FuelGague(double amount) {
        this.amount = amount;

    }
    // Not sure if you really need this method for your solution. This is classic setter method.
    public void setAmount(double amount) {
        this.amount = amount;
    }

    public double getAmount() {
        return amount;
    }
    // I guess this is what do you actually want to do 
    public void changeAmount(double difference) {
        amount += difference;
    }

}

public class Mileage  {

       private FuelGague fuelGague;

       public Mileage(FuelGague fuelGague) {
           this.fuelGague = fuelGague;
       }
       // This will be main method where you can decrease amount for guelGague
       public void methodForMileage() {
        fuelGague.changeAmount(-1);
       }

        public FuelGague getFuelGague() {
        return fuelGague;
    }

    public void setFuelGague(FuelGague fuelGague) {
        this.fuelGague = fuelGague;
    }

     public static void main(String[] args) 
     { 
            FuelGague fuelGague= new FuelGague(50); 
            Mileage mil = new Mileage(fuelGague);     
     } 
} 
```

如您所见，Mileage 类引用了在构造函数中传递的fuelGague 对象，并且可以通过FuelGague 类的公共方法对其进行操作。我为 Mileage 类添加了 set 方法，因此您甚至可以设置不同的 FuelGague 类对象。

# java - PlayN java桌面版比网页版慢？

> ID：10215855
> 
> 赞同：2
> 
> 时间：2012-04-18T18:43:07.677
> 
> 标签：java, gwt, playn

所以我一直在玩谷歌 PlayN，我为爆炸构建了一个小型精灵表加载器。

奇怪的想法是桌面 java 版本（使用相同的核心代码）运行速度比我的 web 版本慢。

例如我的网页版：sapropwns.appspot.com（用鼠标左键单击并拖动指针），您可以看到它非常流畅。另一方面，java 桌面版本每 2 秒滞后一次，并且没有像这个 web 版本那样绘制那么多（即使两者都使用相同的鼠标回调以相同的速度进行绘制，轨迹也没有那么多的绘制）。

我缺少的 PlayN 库是否存在限制？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:46:25.060

自从我看 PlayN 已经有一段时间了（我为了好玩而戳了一会儿）。但是对于某些应用程序来说，桌面应用程序的性能可能不是很好，因为它们使用直接的 Java2D 进行渲染。我也猜想目前还没有那么优化。

[PlayN 组](http://groups.google.com/group/playn/browse_thread/thread/d2c7367b6d4c4b07#)有一些关于通过从 Java2D 切换到[LWJGL](http://www.lwjgl.org/)（轻量级 Java 游戏库）来提高性能的讨论。这将大大提高桌面应用程序的性能（Minecraft 使用 LWJGL）。

# ios - 如何将 Cocoa Touch 静态库链接到 MonoTouch 项目？

> ID：10215860
> 
> 赞同：4
> 
> 时间：2012-04-18T18:43:13.803
> 
> 标签：ios, cocoa-touch, linker, xamarin.ios, static-libraries

**我使用 Xcode 4 创建了一个 Cocoa Touch 静态库，我想在 MonoTouch 项目中使用它。我该如何进行？**

这是我的静态库的内容：

我的类.h
![标题](../Images/2f7965211482134c008f0e951c7a92de.png)

我的班级.m
![执行](../Images/5090718977b95344c8587f3fc5bb98d4.png)

* * *

[在关注此博客文章后](http://dantes-andreea.blogspot.ca/2012/01/how-to-use-objective-c-library-in.html)，我使用“Build For Archiving”进行构建，并将它生成的 libMyLib.a 添加到新的 MonoTouch 绑定项目中。
![绑定项目](../Images/598160e5e18824ecf318bc7b57dccbd3.png)

然后我把 libMyLib.linkwith.cs 的内容替换了，因为[THIS BLOG POST](http://dantes-andreea.blogspot.ca/2012/01/how-to-use-objective-c-library-in.html)是这么说的。

```
[assembly: LinkWith ("libMyLib.a", LinkTarget.ArmV6 | LinkTarget.ArmV7 | LinkTarget.Simulator, ForceLoad = true, Frameworks="CoreGraphics QuartzCore UIKit")] 
```

然后我将此添加到 ApiDefinition.cs
![在此处输入图像描述](../Images/46b59911469654eebee5ec8e5dc26fc4.png)

我将 StructsAndEnums.cs 留空。

* * *

然后我使用 Release 构建并从 bin 文件夹中获取 dll 并将其添加到 MonoTouch iPad 项目的根目录中，并将其添加到引用中。

然后，按照本文中的说明进行操作后，我将[mtouch](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Linking_the_Dependencies)参数设置为此

```
-gcc_flags "-L${ProjectDir} -lMyLib -force_load -ObjC" 
```

然后我尝试运行该项目，但在构建输出中出现此错误

> 错误 MT5201：本机链接失败。请查看提供给 gcc 的用户标志：“-L/Users/herpderp/Projects/TestProject/TestProject”“-lMyLib”-force_load “/Users/herpderp/Projects/TestProject/TestProject/libMyLib.a”“-L/Users/ herpderp/Projects/TestProject/TestProject" "-lMyLib" "-force_load" "-ObjC"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:28:34.880

该目录包含一个完整的示例，展示了将 Objective-C 库与 MonoTouch 集成的各种方法：

[https://github.com/xamarin/monotouch-samples/tree/master/BindingSample](https://github.com/xamarin/monotouch-samples/tree/master/BindingSample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:17:42.360

**MT5201**的错误消息告诉您在执行本机链接步骤时出现错误。这是 100% 确定的。第二部分要求审查您`gcc_flags`的失败，这是最常见的原因。但是，**并不是**100% 确定这是问题所在。当您寻求帮助时，您应该始终将这些行粘贴到任何错误上方（因为它们可能有用）。

该错误*可能*与提供给本机链接器的选项重复有关。发生这种情况是因为您确实提供了两次（即在您的绑定项目和主项目中）。

从您链接的[Binding Objective-C Types](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Linking_the_Dependencies)文章中：

> 或者您可以利用程序集级别的 LinkWithAttribute，您可以将其嵌入到您的合同文件中......

这意味着使用属性不需要额外**的****mtouch 参数**。由于您使用这种方式（最好的方式:-) 绑定静态库，因此您可以跳过此步骤（从您的主项目中）。**`LinkWith`**

 **通过这样做，您自己（以及使用您的库的任何人）都会帮您一个忙，因为它们不同步的风险较小（例如库更新或不同的构建配置）。**

# ruby-on-rails - 为什么 Google Oauth 在我的 Rails 应用程序中返回“无效的 redirect_urI”？

> ID：10215863
> 
> 赞同：46
> 
> 时间：2012-04-18T18:43:23.727
> 
> 标签：ruby-on-rails, oauth

我正在将 Google Oauth2 添加到 Rails 应用程序中，但无法通过早期阶段。

我已经设置了一个应用程序，并定义了客户端 ID 和密码。但我得到了`Invalid parameter value for redirect_uri: Non-public domains not allowed: http://localhost/path/to/callback`

这是什么意思？这是因为我正在本地开发环境中进行测试吗？

感谢您的任何想法。

**编辑**

这可能是因为应用的 URI 与发送 URI 不同。但是当我去谷歌并尝试授权我的开发应用程序的路径时，我得到了`OAuth2 redirect is invalid`. 这是使用本地托管应用程序的限制吗？

**编辑 2**

我生成的请求如下所示：

```
https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=###########&redirect_uri=http%3A%2F%2Fmyapp.dev%2Fusers%2Fauth%2Fgoogle_oauth2%2Fcallback&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&approval_prompt=&access_type=offline 
```

这个对吗。我已经尝试使用 client_id 包括和不包括该`.apps.googleusercontent.com`部分。两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-17T10:58:03.937

我在 ubuntu 上运行的 python / tornado 应用程序出现重定向错误。使用 localhost 不起作用，因为突出显示了接受的答案。谷歌想要一个公共领域。

我的解决方案是搭载公共的“example.com”，并在我的 /etc/hosts 文件中创建一个子域。子域可以在我的本地开发盒上运行，谷歌会对 example.com 域感到满意。我通过谷歌控制台注册了重定向，并且重定向对我来说成功。

我在 /etc/hosts 中添加了以下内容：

```
192.168.33.100   devbox  devbox.example.com 
```

在我的情况下，IP 是我机器的 IP。我也可以使用 127.0.0.1 代替。

我为新客户端 ID 设置的Google API 控制台 ( [https://code.google.com/apis/console ) 是：](https://code.google.com/apis/console)

*   “应用程序类型：Web 应用程序”。
*   通过“您的站点或主机名（更多选项）”：
    *   在“授权重定向 URI”中，我输入了[http://devbox.example.com/](http://devbox.example.com/)
    *   在“Authorized JavaScript Origins”中，我输入了[http://devbox.example.com/](http://devbox.example.com/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-05T15:17:09.473

使用 xip.io 你可以提供一个公共 url 来重定向到[http://your_pow_app.192.168.0.1.xip.io/user/auth/google_oauth2/callback](http://your_pow_app.192.168.0.1.xip.io/user/auth/google_oauth2/callback)

测试和工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-07T12:00:22.063

我使用了我的公共主机名。如果您有一个静态 IP 地址，它会有所帮助。我使用[http://www.displaymyhostname.com/](http://www.displaymyhostname.com/)来获取我的主机名。当我创建一个新的**Web Application Client ID**时，我将它直接插入**Authorized JavaScript origins**字段。

 **PS我的主机名看起来像这样：111.111.111.111.static.exetel.com.au

这是我对相关问题的回答[https://stackoverflow.com/a/23517146/1320083](https://stackoverflow.com/a/23517146/1320083)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T07:37:08.793

对于其他发现这一点的人来说，我的问题是几件事的结合。

1.  我无法让回调在本地机器上工作。控制台 API 控制台表明这是可能的，但我无法让它工作。不确定这取决于服务，还是我的网络/连接/防火墙/等。

2.  在 API 控制台中，您必须指定完整的重定向 URI，而不仅仅是返回应用程序的根 url。

3.  谷歌在这里列出范围参数[https://developers.google.com/gdata/faq#AuthScopes](https://developers.google.com/gdata/faq#AuthScopes)。看来这些信息已经过时了，这些信息的正确格式现在是[https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)、[https://www.googleapis.com/auth/youtube](https://www.googleapis.com/auth/youtube)等。也许是其他人可以确认吗？

我还有其他一些事情要做。我已经在 SO 上写了我的另一个问题的完整解释。不幸的是，我的评论被删除而不是被版主移动，因为我发错了地方。我现在不记得我写的所有东西了。对于其他面临类似问题的人，请随时发表评论，它可能会唤起我的记忆，因此我可以提供一些想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T12:11:21.703

错误 redirect_uri_mismatch - 当您在 Google Developers Console 项目中输入的捆绑 ID 与您的应用的捆绑 ID 不匹配时，可能会发生此错误。检查您的客户端 ID 和捆绑包 ID 是否与 Developers Console 中显示的值匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-18T06:41:35.340

对我来说，它是建立 google url 的函数。我在字符串中放置了换行符，一旦我删除了换行符，url 就会再次起作用。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-11-18T23:51:03.083

我遇到了这个问题，但发现这真的不是问题。正如[我的博客中](http://flashum.com/?q=drupal_blog)所解释的，即使您在 localhost 开发机器上工作，您也可以使用公共重定向 URI。Google 只会将授权代码返回到公共 URI，您可以在其中将其剪切并粘贴到本地计算机。**

# javascript - 用于视频的 Javascript 新窗口未在 IE 中调整大小

> ID：10215865
> 
> 赞同：5
> 
> 时间：2012-04-18T18:43:35.120
> 
> 标签：javascript, html, iframe

我有以下代码用于在我的网站上嵌入 youtube 视频的 javascript 弹出窗口。

```
<script language="JavaScript"> function openAndroid22Window()
 {
   NewWindow=window.open("http://v4m.mobi/php/video_demo_frame.php?
   vid=http://www.youtube.com/embed/1-VsX8qMVFo?rel=0&width=640&height=510",   
   "awindow","width=668,height=548,scrollbars=yes");
 }
</script>
<li><a href="javascript:openAndroid22Window()">Installation on Android</a></li> 
```

问题是在除 IE 之外的所有浏览器中，窗口都可以调整大小。为什么它不会在 IE 中调整大小/最大化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T18:56:46.463

添加`resizable=yes`

```
function openAndroid22Window()
{
       NewWindow=window.open("http://google.com", "awindow", "width=668,height=548,scrollbars=yes, resizable=yes");
} 
```

在 IE 中测试，[一个例子](http://jsfiddle.net/BMm9a/)。

# iphone - 修复了 UItableview 的页脚。总是在页脚位置

> ID：10215868
> 
> 赞同：0
> 
> 时间：2012-04-18T18:43:57.087
> 
> 标签：iphone, uitableview, css-position, table-footer

我试图将页脚固定在 uitableview 的底部。它总是在底部，不能用表格单元格滚动。它也不能剪掉，像覆盖可用视图的最后一个单元格这样的单元格，所以一个单元格将被隐藏。我有以下头文件：

```
//fooer contains a number_of_total_clicks label, an a proceedtopayment button. 
@interface checkout : UITableViewController

@property (retain, nonatomic) IBOutlet UILabel *number_of_total_clicks;
- (IBAction)proceedtonextview:(id)sender;
@property (retain, nonatomic) IBOutlet UIView *footer; //?
@property (strong, nonatomic) NSMutableDictionary *items_clicked;
@end

and in my .m file

- (void)viewDidLoad
{
    [super viewDidLoad];
    //self.tableView.tableFooterView= footer; ??
    number_of_total_clicks.text=@"0";
}

//void or IBAction?V
- (void)add_item_to_array_of_clicks_which_will_increment_number_of_total_clicks_value:(id)sender{
    number_of_total_clicks.text=[NSString stringWithFormat:@"$%.2f",[sender doubleValue]*5];
    [self.tableView reloadData];
} 
```

发生的情况是我得到一个页脚，它基本上附加到表格的最后一个单元格，所以如果表格只有 3 个单元格，带有 number_of_total_clicks 的“页脚”将作为第 4 个单元格附加。如果有 45 个单元格，则页脚将是第 46 个单元格，只有在我一直向下滚动时才能访问。我想把它固定在底部。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:53:18.533

在您的方法中，尝试使用框架`-loadView`手动创建您的视图。`[UIScreen mainScreen]. applicationFrame`请注意，您应该使用`UIView`，而不是表格视图。
此视图将填满整个屏幕（使用时，标签和导航栏除外）。

然后，您可以手动添加 a`UITableView`作为 VC `tableView`，但不要让它填满整个视图。在底部留出一些空间，以适应您的“表格页脚”。记住将 设置`tableView`为具有灵活的宽度和灵活的高度。

现在对于“表格页脚”，只需将其作为子视图添加到`self.view`(not `self.tableView`) 并将其放在`self.view`. 这个视图应该有一个灵活的宽度和一个灵活的上边距。

我希望这符合您的需求。

# objective-c - 在 cocos2d 中获取 CCSprite 的绝对位置

> ID：10215869
> 
> 赞同：4
> 
> 时间：2012-04-18T18:43:59.987
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone, ccsprite

在我的游戏中，我有一个`CCSprite`绕着另一个`CCSprite`运行的 ，就像一个绕着原子核运行的电子一样。我将电子作为原子核的子元素，以使动画更简单。我所要做的就是旋转原子核，电子就会很好地跟随。

然而，我的问题来自希望通过添加类似粒子系统轨迹的东西，或者跟随电子路径的带状效果，让轨道动画看起来更时髦。我不能简单地将粒子系统添加到电子本身，因为粒子不能正确跟随，因为它们也被原子核旋转。如果我将粒子系统添加到`self`，那么它们会正确显示，但与它们应该尾随的对象不在同一位置。

我的问题是这样的：

有没有办法获得一个物体的场景位置，比如电子，而不是只能访问它相对于它的父母的位置？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T19:01:23.210

就在这里！

每个 CCNode 及其后代都能够获得相对于场景的位置：

CGPoint worldCoord = [mySprite convertToWorldSpace: mySprite.position];

这个世界坐标将相对于场景而不是父节点！

希望这有帮助！^_^

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-13T16:00:59.990

稍后编辑：

当你这样做时：

```
[aSprite convertToWorldSpace:position]; 
```

您实际上是在 aSprite 的坐标系中获取位置的全局坐标。如果你想将 aSprite 的位置翻译到全局空间，你需要让它的父级为你做翻译，因为 sprite.position 已经在它的父级坐标系中。

希望它解释它

* * *

原答案：

对我来说，这个解决方案不起作用

我有一个 2 级层次结构，其中 mySprite 是 CCSprite 的子节点，CCSprite 是场景的子节点。

底线：这段代码为我解决了这个问题：

```
CGPoint worldCoord =  [[mySprite parent]convertToWorldSpace: mySprite.position]; 
```

这是需要我的解决方案的层次结构：myScene -> mySpriteParent -> mySprite

```
mySprite.position:29,254
mySpriteParent.position:533,57 
```

解决方案1 ​​- 错误结果：

```
[mySprite convertToWorldSpace: mySprite.position]:91,418 
```

解决方案2 - 正确的结果：

```
[[boxSprite parent] convertToWorldSpace:boxSprite.position]:253.5,275.5 
```

也许这个解决方案会帮助某人也许有人会解释为什么这个解决方案有效，而不是另一个

# timer - 限制命令在 Python 中运行的时间

> ID：10215875
> 
> 赞同：0
> 
> 时间：2012-04-18T18:44:07.413
> 
> 标签：timer, python-3.x, wait

我想在 Python 中运行某个函数（重型函数），但我不希望它运行超过 X 秒。例如，我想运行 foo()，如果 20 秒后它没有完成处理，我希望我的程序继续运行。我不希望我的程序在 foo() 运行时继续运行，我希望它仅在 foo() 完成或 20 秒过去后继续运行（因此线程不适合这里）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:54:35.257

“直截了当”的方法是在函数内保持一个初始化时间，并在合理的时间（开始、循环结束、数据写入之前/之后等）检查当前时间。当然，这不一定会在 20 秒后停止，并且如果您的 foo() 在内部的任何时间点挂起，也不会起作用。

否则，您可能正在看这个：[Python 中的异步方法调用？](https://stackoverflow.com/questions/1239035/asynchronous-method-call-in-python)

如果您的方法正在处理套接字，那么 Python 标准库中的[asyncore](http://docs.python.org/library/asyncore.html "异步")也可能很有用。

编辑：更深入（来自[http://docs.python.org/library/multiprocessing.html#multiprocessing.Process](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process)）：

```
import multiprocessing

#identity function, replace with your actual foo
def foo(x):
    return x

if __name__ == '__main__':
    foo_args = #some tuple containing non-kw arguments for your function
    foo_kwargs = #some dict containing kw arguments for your function

    proc = multiprocessing.Process(target=foo,args=foo_args,kwargs=foo_kwargs)

    proc.start()
    proc.join(20) #This takes a timeout argument in seconds 
```

与您在问题中的假设相反，您也可以为此使用线程。您只需让父线程在调用时阻塞或直到超时（使用相同的连接调用——线程和多处理的接口是相同的）。

如果您需要函数的结果作为返回值，同一页面上的管道和队列可以返回它。

# javascript - 使用 MongoJS 管理与 Mongo 的连接的正确方法是什么？

> ID：10215876
> 
> 赞同：5
> 
> 时间：2012-04-18T18:44:10.610
> 
> 标签：javascript, node.js, mongodb

我正在尝试使用[MongoJS](https://github.com/gett/mongojs)作为 Node.js 中本机 Mongo 驱动程序的包装器。我正在将集合中的文档建模为 JavaScript 类，其中包含`populate()`,`save()`等方法。

在 C# 和 Java 等大多数语言中，我习惯于为每个查询显式连接然后断开连接。大多数示例仅提供连接示例，但在完成后从不关闭连接。我不确定驱动程序是否能够自行管理，或者我是否需要自己手动管理。文档很少。

以下是相关代码：

```
User.prototype.populate = function(callback) {
    var that = this;    

    this.db = mongo.connect("DuxDB");
    this.db.collection(dbName).findOne({email : that.email}, function(err, doc){
        if(!err && doc) {
            that.firstName  = doc.firstName;
            that.lastName   = doc.lastName;
            that.password   = doc.password;
        }

        if (typeof(callback) === "function"){
            callback.call(that);
        }

        that.db.close();
    });
}; 
```

我发现，一旦我`close()`在 MongoJS 对象上调用该方法，我就无法再在后续调用中打开新连接。但是，如果我不调用此方法，那么一旦所有异步调用完成，Node 进程就永远不会终止，就好像它正在等待与 Mongo 断开连接一样。

使用 MongoJS 管理与 Mongo 的连接的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:15:41.610

如果您保持连接打开而不是断开连接，您将从应用程序中获得更好的性能。与实际处理查询和更新所花费的时间相比，建立 TCP 连接，并且在 MongoDB 的情况下，在适当的情况下发现副本集/分片配置是相对昂贵的。最好“花费”一次并保持连接打开，而不是不断地重新做这项工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T19:14:35.417

不要为每个查询打开 + 关闭连接。打开连接一次，然后重新使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T19:38:29.210

做更多类似这样的事情，为所有调用重用你的数据库连接

```
User = function(db) {
  this.db = db;
}

User.prototype.populate = function(callback) {
  var that = this;  
  this.db.collection(dbName).findOne({email : that.email}, function(err, doc){
      if(!err && doc) {
          that.firstName  = doc.firstName;
          that.lastName   = doc.lastName;
          that.password   = doc.password;
      }

      if (typeof(callback) === "function"){
          callback.call(that);
      }
  });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T15:52:54.070

我相信它实际上会在每次请求后关闭连接，但它会在 mongodb 服务器配置中设置 {auto_reconnect:true} ，因此它会在需要时重新打开一个新连接。

# xcode - XCode 4：为什么它会填满所有视图？

> ID：10215880
> 
> 赞同：0
> 
> 时间：2012-04-18T18:44:21.810
> 
> 标签：xcode, storyboard, fill

简单的问题，我想。每当我在我的视图控制器、情节提要中添加一个对象（例如按钮）时，它就会填满设备的所有屏幕。想不通为什么。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:45:17.857

您没有直接将 UIButton 添加到 UIViewController ，对吗？您首先需要在控制器上添加一个 UIView，然后将对象添加到该视图。

# mysql - mysql SELECT "FROM t1, t2" -or- "FROM t1 JOIN t2 ON"

> ID：10215882
> 
> 赞同：1
> 
> 时间：2012-04-18T18:44:23.667
> 
> 标签：mysql, select, join

这个查询有什么不同？我应该更喜欢哪一个，为什么？

```
SELECT
t1.*,
t2.x
FROM
t1,
t2
WHERE
t2.`id` = t1.`id` 
```

或者

```
SELECT
t1.*,
t2.x
FROM
t1
INNER JOIN                                                  # LEFT JOIN ?
t2
ON t2.`id` = t1.`id` 
```

使用逗号是否与使用 LEFT JOINS 具有相同的效果？

这很尴尬。这是我多年来第一次问自己这个问题。我曾经使用过第一个版本，但现在我觉得我在第一次 SQL 归纳中遗漏了一些行。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:47:16.803

查询是相同的，第一个只是第二个的简写语法。`LEFT JOIN`是完全不同的东西。

`INNER JOIN`只显示两个表共有的记录。`LEFT JOIN`从左表中取出所有记录并将其与右表的记录匹配。如果右表中没有匹配的记录，`NULL`将在它们的位置被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:48:30.140

“逗号”语法等同于 INNER JOIN 语法。无论您如何请求，查询优化器都应该为您运行相同的查询。一般建议使用 JOIN 语言进行联接，并使用 WHERE 语言进行过滤，因为它使您的意图更加清晰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:53:42.357

内连接是在第二个表中的空（null）结果上跳过的左连接。

当一切都使用 where 子句完成时，查询优化器有更多的可能性。一些 rdbms 不支持自然连接和其他连接等命令，因此使用“where”是一个真正可以依赖的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:38:13.310

第一个查询称为笛卡尔查询，通常在大型数据库中提供不需要的结果。

相反，使用连接将产生您想要的结果。

# python - 使用 django 的站点菜单

> ID：10215886
> 
> 赞同：1
> 
> 时间：2012-04-18T18:44:33.933
> 
> 标签：python, django, menu

我想在我的网站上有一个菜单。我希望这个菜单可以通过 django admin 进行编辑。所以，我需要为它创建一个模型。

为菜单创建模型后，我可以在**views.py**中使用它：

```
def main(request):
    menu_items = MenuItem.objects.all()
    return direct_to_template(request, 'main.html', {'menu_items': menu_items}) 
```

没关系。但是......等一下......如果我有几页，它会看起来像：

```
def main(request):
    menu_items = MenuItem.objects.all()
    return direct_to_template(request, 'main.html', {'menu_items': menu_items})

def page1(request):
    menu_items = MenuItem.objects.all()
    return direct_to_template(request, 'page1.html', {'menu_items': menu_items})

def page2(request):
    menu_items = MenuItem.objects.all()
    return direct_to_template(request, 'page2.html', {'menu_items': menu_items})` 
```

每次创建新函数时，有什么办法不编写相同的代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T18:50:04.320

是的，创建一个[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)，您的菜单将在每个页面上可用

在您的一个应用程序中创建一个文件**menu_context_processor.py**（或类似文件）

```
from myapp.models import MenuItem
def menu(request):
    return {'menu': MenuItem.objects.all() } 
```

并将其添加到您的`TEMPLATE_CONTEXT_PROCESSOR`设置中`settings.py`

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ...,
    'myapp.menu_context_processor.menu'
) 
```

现在，在每个模板中，您都可以访问`{{ menu }}`. 这些用于使`{{ STATIC_URL }}`您在整个应用程序中都可以使用“{{ MEDIA_URL }}”，并且对于您希望在任何地方包含的变量很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:53:16.333

好的，Timmy 向您推荐了一种 Django 方式，效果很好。顺便说一句，我知道一种可以使用这样的装饰器的pythonic方式：

```
def apply_menu(func):
    def wrapper(*args, **kwargs):
        request = args[0]
        menu_items = MenuItem.objects.all()
        vars = {'menu_items': menu_items}
        if kwargs:
            page, template_var = func(*args, **kwargs)
        else: page, template_var = func(*args)
        vars.update( template_var)
        return return direct_to_template(request, page, vars)
    return wrapper 
```

然后以这种方式使用装饰器：

```
@apply_menu
def main(request):
    your_extra_vars = {}
    return 'main.html', your_extra_vars 
```

# javascript - 检测链接是否在新窗口/选项卡或当前窗口中打开

> ID：10215887
> 
> 赞同：1
> 
> 时间：2012-04-18T18:44:34.167
> 
> 标签：javascript, jquery

如果链接在当前窗口中打开，我想将类似 AJax 的转换添加到我的链接中。但是，如果在新窗口/新选项卡中打开链接，我不希望执行转换。这可能吗？

PS我已经加载了jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:47:01.797

如果用户在新窗口/选项卡中打开一个链接（通过中键单击、ctrl 单击或右键单击->新窗口），浏览器将自动忽略任何`onclick`处理程序并简单地打开一个指向由指定的 URL 的新选项卡/窗口链接的`href`属性。

您不必做任何特别的事情来阻止 AJAX 触发，只要您正确地`href`为锚标记指定真实属性。

您可以自己轻松地验证这一点：问题上的编辑链接通过 AJAX 加载内容。如果中键/ctrl 单击它，URL`http://stackoverflow.com/posts/10215887/edit`将被加载到一个新窗口中。如果你正常点击它，JavaScript 会拦截点击并内联加载表单而不刷新页面。

# php - SQL + Ion Auth + CodeIgniter？

> ID：10215890
> 
> 赞同：0
> 
> 时间：2012-04-18T18:44:43.043
> 
> 标签：php, codeigniter, authentication

我有以下 SQL：

```
SELECT (
(SELECT SUM(vote_score)
FROM question_votes 
JOIN questions
ON vote_question = q_id
JOIN users
ON q_author = users.id
WHERE q_author` = users.id) 
+ 
(SELECT SUM(vote_score)
FROM answer_votes 
JOIN answers 
ON vote_answer = a_id
JOIN users
ON a_author = users.id
WHERE a_author = users.id)) AS rep 
```

我希望将其添加到此处（Ion Auth 的方法）：

```
 $this->db->select(
            array(
                $this->tables['users'].'.*',
                $this->tables['groups'].'.name AS '. $this->db->protect_identifiers('group'),
                $this->tables['groups'].'.description AS '. $this->db->protect_identifiers('group_description'),
                "(SELECT COUNT(`a_author`) FROM `answers` WHERE a_author = users.id) + (SELECT COUNT(`q_author`) FROM `questions` WHERE q_author = users.id )  AS total_posts",
                "SELECT 
((SELECT SUM(vote_score)
FROM question_votes 
JOIN questions
ON vote_question = q_id
JOIN users
ON q_author = users.id
WHERE q_author` = users.id) 
+ 
(SELECT SUM(vote_score)
FROM answer_votes 
JOIN answers 
ON vote_answer = a_id
JOIN users
ON a_author = users.id
WHERE a_author = users.id)) AS rep"
            )
        ); 
```

但我收到以下错误： ![我的错误](../Images/938931fc1157a92d48ff7aad4748eccf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:48:02.607

你读过错误信息吗？

你有一个 (`) 不应该有的地方。

更改此： WHERE q_author' = users.id 为此：`WHERE q_author = users.id`

# javascript - 如何在平板电脑和手机的 Android 设备的方向更改时获得正确的窗口宽度

> ID：10215894
> 
> 赞同：6
> 
> 时间：2012-04-18T18:44:59.930
> 
> 标签：javascript, jquery, android, orientation, galaxy

我正在尝试使用 jquery 函数计算 android 设备方向更改时的窗口宽度`$(window).outerWidth(true);`。此计算为两者提供了正确的方向变化宽度`iphone`，`ipad`但在 android 中没有。如果我最初以横向模式或纵向模式加载页面，我将获得正确的宽度，但是一旦我在加载页面后更改方向，我将获得纵向模式的宽度，就像在横向模式下一样，反之亦然。请建议正在发生的事情以及我该如何处理这个问题，以便我在 android 设备的方向更改时获得正确的窗口宽度

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T18:59:56.920

为什么不只使用 javascript`screen`对象。您应该能够通过以下方式获得屏幕尺寸：

```
screen.height;
screen.width; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-22T07:03:30.670

I was also stuck in this problem and find the best solution which will work on all the platforms.Below is the code of 'orientationchange' event.

```
function onOrientationChange(event)
{
    setTimeout(function(){
       'Enter you code here';
    },200);
} 
```

Hope, it will help you and most of other too.. Cheers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-02T06:57:25.310

```
 var isMobile = {
                                Android: function () {
                                    return navigator.userAgent.match(/Android/i);
                                },
                                BlackBerry: function () {
                                    return navigator.userAgent.match(/BlackBerry/i);
                                },
                                iOS: function () {
                                    return navigator.userAgent.match(/iPhone|iPad|iPod/i);
                                },
                                Opera: function () {
                                    return navigator.userAgent.match(/Opera Mini/i);
                                },
                                Windows: function () {
                                    return navigator.userAgent.match(/IEMobile/i);
                                },
                                webOS: function () {
                                    return navigator.userAgent.match(/webOS/i);
                                },
                                any: function () {
                                    return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
                                }
                            };

                            var tell_if_mobile;
                            var mobile_tablet;
                            if (isMobile.any()) {
                                tell_if_mobile = true;
                            } else {
                                tell_if_mobile = false;
                                var windowWidth = window.screen.width < window.outerWidth ?
                                                  window.screen.width : window.outerWidth;
                                tell_if_mobile = windowWidth < 800;
                                mobile_tablet = windowWidth >= 500 ? "Tablet/Phablet Device" : "Desktop View (Mobile)";
                            }

                            var mobile_type;
                            mobile_type = isMobile.Android() ? "Android Device" :
                                          isMobile.BlackBerry() ? "Blackberry Device" :
                                          isMobile.iOS() ? "iOS Device" :
                                          isMobile.Opera() ? "Opera Mobile/Mini" :
                                          isMobile.Windows() ? "IEMobile" :
                                          isMobile.webOS() ? "webOS device" :
                                          tell_if_mobile == true ? mobile_tablet :
                                          "Not a mobile device";
alert(mobile_type); //result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T00:53:33.883

这篇文章似乎有一个可能与您相关的解决方案：

[http://forum.jquery.com/topic/orientationchange-event-returns-wrong-values-on-android](http://forum.jquery.com/topic/orientationchange-event-returns-wrong-values-on-android)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-13T05:07:36.120

**您可以不听orientationchange**事件，而是听window **resize**事件，它将确保window.innerHeight/outerHeight 属性得到更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:27:44.247

`window.innerWidth`分别尝试`window.innerHeight`；android 可能与outerWidth 和Height 无关；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-21T15:55:15.137

这很丑陋，但它有效。[方向更改后的移动视口高度](https://stackoverflow.com/questions/12452349/mobile-viewport-height-after-orientation-change)

```
window.addEventListener('orientationchange', () => {
  const tmp = () => {
    this.onResize()
    window.removeEventListener('resize', tmp)
  }
  window.addEventListener('resize', tmp)
}) 
```

# java - 从 EC2 访问英国 API

> ID：10215900
> 
> 赞同：0
> 
> 时间：2012-04-18T18:45:27.503
> 
> 标签：java, http, tomcat, amazon-ec2

我有一个在 Amazon EC2 上运行的 Java Web 应用程序（在单个实例上，在爱尔兰欧盟西部地区运行），它向基于英国的站点和 API 发出 HTTP 请求（碰巧，使用 Apache HttpClient）。
当在英国的本地 Tomcat 服务器上运行时，一切都按预期运行，但当部署在 EC2 上时，应用程序不再从英国发出请求，所以一切都崩溃了（因为网站限制了来自英国以外的访问，而API 返回美国地区特定数据）。
显而易见的解决方案似乎是通过英国代理服务器路由 HTTP 请求，我希望这会解决问题，但会稍微降低性能并提供额外的故障点（例如，如果代理服务器被列入黑名单）。由于它是一个 Web 应用程序，我还可以将一些请求逻辑移到浏览器中（例如通过 Javascript 中的 XHR GET），尽管有相当多的处理需要完成，我宁愿保留大部分的服务器边。
有什么方法可以配置 EC2 或解决此问题的请求，还是有替代/更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:21:46.523

在 Accept-Language 标头中发送“en-gb”可能不起作用，但值得一试。

# android - libgdx android 风格滑动

> ID：10215904
> 
> 赞同：0
> 
> 时间：2012-04-18T18:45:35.960
> 
> 标签：android, swipe, libgdx

如何使用 libgdx 实现 android 风格的左右滑动？（例如：翻阅图像）

我阅读了有关 GuesterDetector 和测试用例[http://code.google.com/p/libgdx/source/browse/trunk/tests/gdx-tests/src/com/badlogic/gdx/tests/GestureDetectorTest.java?r=2641](http://code.google.com/p/libgdx/source/browse/trunk/tests/gdx-tests/src/com/badlogic/gdx/tests/GestureDetectorTest.java?r=2641)的信息。

但是在客人确定如何实现android风格的左右滑动以及如何区分左右滑动后，我不确定一次。

使用adroid API实现是直截了当的[android Swipe事件在选项卡小部件内的listview中](https://stackoverflow.com/questions/5762554/android-swipe-event-in-listview-inside-tab-widget.I)理解admob示例以实现本机回调，但在这种情况下集成这似乎不是直截了当的。

无论哪种方式，如果有人对此有经验，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:01:17.280

从那个例子中，你想要使用 fling 方法。要检测水平方向，请检查velocityX - 正表示向右滑动（并且您需要将图像向左滚动）。

# java - 播放框架 - 保证本地线程在请求 结束或下一个请求开始时被清除

> ID：10215913
> 
> 赞同：2
> 
> 时间：2012-04-18T18:46:04.850
> 
> 标签：java, playframework, thread-local, playframework-1.x

我们正在使用本地线程来为 WS（Web 服务）库提供一种“一级缓存”，以便在给定请求中对同一 URI 的调用只发生一次。目前我正在使用@Before 过滤器来确保在任何给定请求开始之前我们清除本地线程中的任何内容，因为播放似乎保留了它们的池。

有没有比在我们的基本控制器上执行 @With(MyThreadLocalKillingFilter.class) 更好的方法来实现这一点？它有效，但看起来很hackish。

请注意，我们正在使用从 play start/run 开始的服务器内置播放

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:11:23.777

在你的控制器中使用@With 这种方式没有什么不好的。我认为这是相当普遍的。它被认为比扩展基本控制器更好。

不过，您可能需要小心使用 ThreadLocals，特别是在使用暂停请求执行线程的 Promise 时。

# java - 如何使用广播 DATE_CHANGED？（安卓）

> ID：10215921
> 
> 赞同：2
> 
> 时间：2012-04-18T18:46:32.773
> 
> 标签：java, android

```
 <receiver android:name="com.BillManager.DateChanged">
             <intent-filter>
                 <action android:name="android.intent.action.DATE_CHANGED"/>
                 </intent-filter>
         </receiver> 
```

在班上...

```
 if (action.equals(Intent.ACTION_DATE_CHANGED))
    { 
          Log.d("DateChanged","DateChanged");
    } 
```

您好，我正在开发一个 Android 应用程序，我使用此广播来宣布用户何时手动更改日期。出于某种原因，我在 12:00 收到广播，而没有手动更改日期。有没有人解释为什么会这样？

# ios - iOS：是否可以同时通过耳机和扬声器发送音频？

> ID：10215923
> 
> 赞同：7
> 
> 时间：2012-04-18T18:46:33.760
> 
> 标签：ios, audio, speaker, headphones

我们希望从耳机插孔发送一些串行数据，但仍希望能够从扬声器播放音频。是否可以将输出发送到两者？如果是这样，是否可以向每个人发送不同的音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:39:10.937

据我所知不是。您可以在路由更改时（例如，当有人连接耳机线时）获得程序化通知，但您无法指定用于输出的设备。

# jquery - 使用 cookie 集的 jQuery 加载和调整大小

> ID：10215928
> 
> 赞同：0
> 
> 时间：2012-04-18T18:46:59.407
> 
> 标签：jquery, class, cookies, resize, pageload

寻找一些帮助来增加我已经拥有的东西。我正在做的是一个 onLoad 和 Resize 交换到一个特定的类，它改变了不同分辨率的网格。我需要的是设置一个cookie，以便在从一个页面到另一个页面时网格保持不变。

```
 // swaps the grid span names when the resolution goes below 1200px
    // or when page is loaded below 1200px

     $(window).bind("load resize", function(){

        var width = $(window).width(),
        bodycontent_grid = width < 1200 ? 'span8' :
                    width > 1200 ? 'span6' : '';
         rightcol_grid = width < 1200 ? 'span3' :
                    width > 1200 ? 'span5' : '';

        $('.bodycontent').removeClass('span6 span8').addClass(bodycontent_grid),
        $('.rightcol').removeClass('span3 span5').addClass(rightcol_grid);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:31:43.767

基于 JS 的解决方案不是很好（请继续阅读），但无论如何我会先尝试回答有关 cookie 的问题：

你可以使用某种[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)或者只是简单的 JS，这有点难。jQuery 语法是：

```
$.cookie('name', 'value'); // storing cookie
$.cookie('name'); // reading cookie 
```

使用它，您可以将源代码更改为以下内容：

```
function resizeContainer(var force=false) // additional parameter is used to force resetting cookie
{
    var width;
    if($.cookie('knownWidth') && !force) // if there's a cookie and we're not forcing reset, use width from cookie
    {
        width = $.cookie('knownWidth');
    }
    else
    {
        width = $(window).width();
        $.cookie('knownWidth', width);
    }
    var bodycontent_grid = width < 1200 ? 'span8' :
                width > 1200 ? 'span6' : '';
     rightcol_grid = width < 1200 ? 'span3' :
                width > 1200 ? 'span5' : '';

    $('.bodycontent').removeClass('span6 span8').addClass(bodycontent_grid),
    $('.rightcol').removeClass('span3 span5').addClass(rightcol_grid);
}

$(window).bind("load", function(){
    resizeContainer(); // onload use cookie
});
$(window).bind("resize", function(){
    resizeContainer(true); // when resizing force changing the cookie
}); 
```

当然，可以在服务器端访问 cookie，然后可以在服务器端使用适当的类生成容器。

**我必须说我不喜欢使用 cookie 的解决方案。**关于[响应式网页设计](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)的话题太多了，那么为什么不使用 CSS [@media-queries](http://www.alistapart.com/articles/responsive-web-design/)呢？

您可以在 .css 文件中执行以下操作：

```
@media only screen and (min-width : 1200px) {
    /* Styles when over 1200px */
}

@media only screen and (max-width: 1199px) {
    /* Styles when under 1200px */
} 
```

顺便说一句，当您在[http://bostonglobe.com/](http://bostonglobe.com/)或[http://smashingmagazine.com](http://smashingmagazine.com)时尝试调整浏览器窗口的大小:) 它是纯 CSS！

# java - 在尝试实现 ArrayList 时陷入困境

> ID：10215930
> 
> 赞同：-3
> 
> 时间：2012-04-18T18:47:05.120
> 
> 标签：java, collections, arraylist

> **可能重复：**
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

我在我的程序中使用了大量不需要 Java 数组列表的大部分功能的 ArrayList，所以基本上我想自己实现它以获得更好的空间性能。

这是我到目前为止得到的：

```
public class ArrayList<E> {
    private E[] a;
    private int size=0;
    public ArrayList() {
    }
    public ArrayList(int fixedSize) {
        ***a=new E[fixedSize];***
    }

} 
```

编译器说我不能创建一个通用数组，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:49:52.647

在泛型出现之前我们这样做的方式。制作一个 s 数组`Object`并在取出它们时进行转换。由于您是唯一添加到数组中的人，因此它*应该*是安全的，但您可以添加一个`instanceof`检查以防万一。

# qt - Qt：无法执行''：请求的操作需要提升

> ID：10215934
> 
> 赞同：8
> 
> 时间：2012-04-18T18:47:26.007
> 
> 标签：qt, qt-creator, privileges

我无法运行 Qt 创建者的应用程序。它抱怨以下错误：

无法执行“”：请求的操作需要提升

我的 .exe 文件上有一个 Windows 管理员盾牌符号。我需要更改项目设置吗？我广泛使用 Qt 文件库来执行一些文件操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T20:51:55.503

你的可执行文件的文件名是什么？如果没有嵌入式清单，Windows 会尝试变得聪明，并希望以管理员身份运行文件名中带有“install”、“update”、“setup”、“patch”等的可执行文件。它甚至会在诸如“autoupdate”之类的词中检查这些名称。

问题是 qmake/mingw 没有嵌入这些清单，而 MSVC 有。如果有人对这个问题有一个干净的解决方案，我有兴趣了解它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:07:09.217

如果您开发的应用程序需要管理员权限，您不能简单地从 Qt creator 运行它，在非特权帐户下启动。

您可以**以管理员身份运行您的 Qt 创建者**。

或者您可以使用实用程序从 QtCreator 启动您的应用`runas`程序。但在这种情况下，您将无法在 QtCreator 控制台窗口和调试应用程序中看到调试输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-09T19:51:54.250

如果 exe 文件的名称中有一些词（更新、补丁、...），Windows UAC 会要求管理员权限。唯一的解决办法是项目生成一个没有这些字的exe。

请参阅：[Qt Creator 创建具有管理员权限的 exes](https://forum.qt.io/topic/96466/qt-creator-create-exes-with-admin-privilegies)

# javascript - 为什么我的简单 javascript 翻转工作不起作用？

> ID：10215938
> 
> 赞同：0
> 
> 时间：2012-04-18T18:47:45.773
> 
> 标签：javascript, image, onmouseover, rollover

大家好，我有一个简单的鼠标悬停效果，我尝试了几个脚本，但都没有工作，谁能告诉我为什么？

javascript:

```
<script language="JavaScript" type="text/javascript">
<!--
if (document.images) {
    homebuttonup = new Image();
    homebuttonup.src = "./images/gym-light.png";
    homebuttondown = new Image();
    homebuttondown.src = "./images/buttonright.png";
}

function buttondown(buttonname) {
    if (document.images) {
        document[buttonname].src = eval(buttonname + "down.src");
    }
}

function buttonup(buttonname) {
    if (document.images) {
        document[buttonname].src = eval(buttonname + "up.src");
    }
}
// -->
</script> 
```

和链接：

```
 <a href="index.html" onmouseover="buttondown('homebutton')"       onmouseout="buttonup('homebutton')">
  <img id='Img4Inner' name="homebutton" src='./images/gym-light.png' alt="" />

  </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:51:33.807

**更新2（最后一个大声笑）**您当前在a标签上有onmouseout和onmouseover，将它们移动到图像标签，它将起作用：

你是代码：

```
<a onmouseout="buttonup('homebutton')" onmouseover="buttondown('homebutton')"        
href="http://www.[...].com" style="height:120px;width:100px;">
<img id="Img4Inner" alt="" src="http://[..].com/images/gym-light.png" name="homebutton">
</a> 
```

工作代码：

```
<a onmouseout="buttonup('homebutton')" onmouseover="buttondown('homebutton')"        
href="http://www.[...].com" style="height:120px;width:100px;">
 <img alt="" src="http://[...]/images/gym-light.png"  onmouseout="buttonup(this)" 
     onmouseover="buttondown(this)" name="homebutton" id="Img4Inner">
</a> 
```

**更新**：因为您正在调用锚标记上的函数，它们需要具有类似于以下的高度和宽度（相应地放置您的高度和宽度）：

```
<a style="height:25px;width:25px;" href="http://www.[...].com" 
onmouseover="buttondown('homebutton')" onmouseout="buttonup('homebutton')">
...
</a> 
```

我出去了...

我刚刚使用了萤火虫，用高度和宽度编辑了 HTML，它工作正常：

![在此处输入图像描述](../Images/4e9e253c60bbfe0cec67235d8ed9f63d.png))

虽然我确信这会解决问题.. doctype 设置为 <!doctype html> 并且应该类似于这里的内容（[链接](http://www.w3schools.com/tags/tag_doctype.asp)）

如果您实施了以下方法，则图像将具有高度和宽度，并且由于这是要定位的图像，因此可能更有意义..

[http://jsfiddle.net/ETHaM/2/](http://jsfiddle.net/ETHaM/2/)

```
if (document.images) {
    homebuttonup = new Image();
    homebuttonup.src = "http://www.placekitten.com/100/100/";
    homebuttondown = new Image();
    homebuttondown.src = "http://dummyimage.com/100x100/000/fff";
}

function buttondown(obj) {
    if (document.images) {
        obj.src = eval(obj.name+ "down.src");
    }
}

function buttonup(obj) {
    if (document.images) {
        obj.src = eval(obj.name + "up.src");
    }
}

<a href="index.html">
<img id='Img4Inner' onmouseover="buttondown(this)" onmouseout="buttonup(this)" name="homebutton" src='http://www.placekitten.com/100/100/' alt="" />
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:15:53.050

您的代码有效

然而，这是一个更不引人注目的版本

[http://jsfiddle.net/mplungjan/927nN/](http://jsfiddle.net/mplungjan/927nN/)

```
<a href="index.html" id="homeLink"><img
 id='Img4Inner' class="hoverImg"
 name="homebutton" src='http://www.placekitten.com/100/100/' alt="" /></a>
 <a href="about.html" id="aboutLink"><img
 id='Img5Inner' class="hoverImg"
 name="aboutbutton" src='http://www.placekitten.com/100/100/' alt="" /></a> 
```

```
var buttons={};
if (document.images) {
    buttons["homebuttonup"] = new Image();
    buttons["homebuttonup"].src = "http://www.placekitten.com/100/100/";
    buttons["homebuttondown"] = new Image();
    buttons["homebuttondown"].src = "http://dummyimage.com/100x100/000/fff";
    buttons["aboutbuttonup"] = new Image();
    buttons["aboutbuttonup"].src = "http://www.placekitten.com/100/100/";
    buttons["aboutbuttondown"] = new Image();
    buttons["aboutbuttondown"].src = "http://dummyimage.com/100x100/000/fff";
}

window.onload=function() {
    var images = document.getElementsByTagName("img");
    for (var i=0,n=images.length;i<n;i++) {
        if (images[i].className=="hoverImg") {
            images[i].parentNode.onmouseover=function() {
              var buttonname=this.id.replace("Link","button");
              document[buttonname].src = buttons[buttonname + "down"].src;
            }
            images[i].parentNode.onmouseout=function() {
              var buttonname=this.id.replace("Link","button");
              document[buttonname].src = buttons[buttonname + "up"].src;
            }
        }
    }   
} 
```

# sql - 带有局部变量的 WHERE IN

> ID：10215945
> 
> 赞同：1
> 
> 时间：2012-04-18T18:48:17.363
> 
> 标签：sql, sql-server, sql-server-2005, where, where-in

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)
> [SQL：使用 IN 子句将字符串转换为 IDS](https://stackoverflow.com/questions/2773539/sqlcasting-a-string-to-ids-with-in-clause)

我想在`WHERE IN`子句中使用声明局部变量

像这样的东西：

**表 XYZ**

```
COL1 COL2
1    A
2    B
3    C
4    D
5    E 
```

结果

```
1 A
2 B
5 E 
```

询问

```
DECLARE @VAR VARCHAR(MAX)
SET @VAR = '1,2,5'
SELECT * FROM XYZ WHERE COL1 IN @VAR 
```

我该怎么做呢？

注意：我不能有服务器功能

我只能（通过代码）创建原始值并将其与我的查询一起使用。我搜索了一种方式，我只会更改我的 var 而不是查询本身。

我的代码看起来像：

```
list (dbparameter)
mylist.add ('@var','1,2,5')

commandsql.returnresult(myQueryInString,mylist) 
```

我想要

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:50:56.783

```
DECLARE @var TABLE
        (
        value INT
        )

INSERT
INTO    @var
VALUES
        (1), (3), (5)

/* You would need three separate inserts in 2005 */

SELECT  *
FROM    xyz
WHERE   col1 IN
        (
        SELECT  value
        FROM    @var
        ) 
```

您还可以编写一个拆分 a 的表值函数`CSV`，但如果您的客户端库支持传递表变量，这是首选选项。

[您可以在Erlang Sommarskog 的文章](http://www.sommarskog.se/arrays-in-sql-2005.html#CSV)中找到函数定义（搜索`simple_intlist_to_tbl`）。声明它并像这样调用：

```
DECLARE @var VARCHAR(100) = '1,3,5'

SELECT  *
FROM    xyz
WHERE   col1 IN
        (
        SELECT  number
        FROM    simple_intlist_to_tbl(@var)
        ) 
```

如果您的查询比这更复杂，您可能希望首先具体化此列表：

```
DECLARE @var VARCHAR(100) = '1,3,5'

DECLARE @tvar TABLE
        ( 
        number INT
        )

INSERT
INTO    @tvar
SELECT  number
FROM    simple_intlist_to_tbl(@var)

SELECT  *
FROM    xyz, ... /* Other complex joins */
WHERE   col1 IN
        (
        SELECT  number
        FROM    @tvar
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:31:29.033

您需要一个将列表拆分为数据集的函数（从 Jeff Moden[使用](http://www.sqlservercentral.com/articles/Tally+Table/72993/)它，它可以工作并且非常快），然后只需在所需列上使用 IN 子句。

# ember.js - CollectionView 的 emptyView 永远不会隐藏

> ID：10215946
> 
> 赞同：0
> 
> 时间：2012-04-18T18:48:27.993
> 
> 标签：ember.js, collectionview

我有一个`CollectionView`：

*   一个 tagName 设置为`tbody`（所以它的孩子是 'tr' ）
*   一个`emptyView`。

问题是：`emptyView`永远不会隐藏。

看到这个小提琴：http: [//jsfiddle.net/EHQLF/](http://jsfiddle.net/EHQLF/)

所以我的问题是：

1.  为什么`emptyView`点击“添加”后还在这里
2.  如果我删除它为什么会起作用`tagName`
3.  我希望 emptyView 的渲染看起来像这样：

`<table><tr><td colspan="2">The collection is empty</td></tr></table>`

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:33:45.413

我找到了解决方案。如果 emptyView 模板以`td`.

emptyView 被自动标记`tr`（参见[CollectionView.arrayDidChange()](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/collection_view.js#L265)及以下`CollectionView.createChildView`）。

看到这个小提琴：http: [//jsfiddle.net/EHQLF/1/](http://jsfiddle.net/EHQLF/1/)

我仍然对任何其他解决方案感兴趣！

# javascript - ajax导航中的jquery ajax导航

> ID：10215947
> 
> 赞同：0
> 
> 时间：2012-04-18T18:48:29.550
> 
> 标签：javascript, jquery, ajax, hashchange

我将此代码用于我的主站点导航，它通过 ajax 加载每个页面并具有后备功能。

```
$(function() {
    var newHash = '',
        $contentWrap = $("#content-wrap");
    $("nav").on("click", "a", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });
    $(window).on('hashchange', function() {
        newHash = window.location.hash.substring(1);
        $contentWrap.load(newHash + " #content");
    });
    $(window).trigger('hashchange');
});​ 
```

这很好，但是当我从另一个页面加载内容时，例如 about.html，我还加载了更多按钮以在#content-wrap 中进行导航。

所以#content-wrap 现在包含一个数据框和一些用于导航的按钮。当我单击新导航时，它需要在数据框中加载新数据。

首先，我尝试复制上面的脚本，但使用新的锚点，但是我遇到了冲突。

我想我需要某种 if 语句，我已经研究过 if (function !== undefined) 之类的东西，但不知道该怎么做。

我不确定我对自己的解释有多好，我很困惑解释它，但基本上我想将上面的代码与下面的基本相同的代码结合起来而不会发生冲突。

```
$(function() {
    var newHash = '',
        $contentWrap = $("#content-wrap"),
        $aboutWrap = $("#a-wrap");
    $("#content-wrap").on("click", "a", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });
    $(window).on('hashchange', function() {
        newHash = window.location.hash.substring(1);
        $aboutWrap.load(newHash + " #a-content");
    });
    $(window).trigger('hashchange');
});​ 
```

**更新：有点工作，但改变了我的计划**

```
$(function() {

var newHash = '',
        $nav = $("nav a"),
        $boxBtn = '',
        $aboutWrap = '',
        $contentWrap = $("#content-wrap");

$("nav").on("click", "a", function() {

    $(this).addClass("nav-click");

    window.location.hash = $(this).attr("href");

    return false;
});

$contentWrap.on("click", "a", function() {

    $(this).addClass("btn-click");

    window.location.hash = $(this).attr("href");

    return false;
});

$(window).on('hashchange', function() {

    var     $aboutWrap = $("#a-wrap"),
                $boxBtn = $("div.btn a");

    newHash = window.location.hash.substring(1);

    if ($nav.hasClass("nav-click")){

    $contentWrap.load(newHash + " #content");
    $nav.removeClass("nav-click");
    };

    if ($boxBtn.hasClass("btn-click")){

        $aboutWrap.load(newHash + " #a-content");
        $boxBtn.removeClass("btn-click");
    };
});

$(window).trigger('hashchange');

}); /*/end*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:04:42.413

我遇到了类似的问题，基本上在大多数情况下，问题在于元素 ID 冲突。在 DOM 中，您只能使用一次 ID。您可以通过仅对包装器等唯一元素使用类名和 ID 来解决此问题。

# c++ - 无法访问成对向量中的值

> ID：10215948
> 
> 赞同：3
> 
> 时间：2012-04-18T18:48:29.580
> 
> 标签：c++, vector, std-pair

我有一个成对的向量作为对象内的一个字段。所述对象有一个方法，我需要访问向量中的对中的值。我正在使用迭代器来指向我希望访问的向量中的位置。以下是包含向量的代码片段：

在头文件中：

```
vector<pair<double, double> > points;
vector<pair<double, double> >::iterator headingTo; 
```

在构造函数中：

```
 points.push_back(make_pair(1700.00, 3300.00));//Plus 20 or so other values
 headingTo = points.begin(); 
```

在方法：

```
double x = headingTo->first - positionX;
double y = headingTo->second - positionY; 
```

但是，当我运行此代码时，并没有创建 y。当我使用断点查看变量时，它根本没有显示在 Visual Studio 中。但是，如果我换行，y 是可访问的，而 x 是不可访问的。有任何想法吗？

编辑：我发现了以下作品：

```
double headingToX = headingTo->first; 
headingToX -= positionX;
double headingToY = headingTo->second;
headingToY-= positionY; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:47:01.063

检查您是否正在调试程序的优化构建 - 在这种情况下，如果编译器可以确定不需要它们产生程序所需的输出，则编译器可以自由地省略变量。

但是，即使您使用的是未优化的构建，如果您真的根本不使用该变量，也会发生这种行为。在[此有关 VC++ 2010 Express 版本的错误报告中](http://connect.microsoft.com/VisualStudio/feedback/details/565664/vc-express-debugger-doesnt-see-some-variables)，您将看到 Microsoft 代表发表的以下评论（已添加重点）：

> 这个问题是否只发生在除了赋值之外没有以任何方式使用过的变量上？通过使用十六进制编辑器检查在 .pdb 中存在变量，或者在反汇编中看到相应的“mov”指令并不能保证编译器没有进行某种程度的优化以防止调试器检查变量**（即使在调试版本中，编译器也总是进行小的优化）。如果变量在应用程序中用于其他目的而不是被赋值，调试器只能保证编译器将提供对变量的访问。**
> 
> 如果您有一个正在使用变量的重现（除了被分配一个值）并且您无法在调试器中检查它，请告诉我们。否则，这是编译器优化的产物。

从您发布的代码中不清楚您以后是否使用`y`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:28:12.707

它与优化有关。由于您没有使用分配给的变量，编译器选择不创建它们（在这种情况下是其中之一）。您使用它们的那一刻（在您的工作示例中，您从它们中的每一个中减去一个值）编译器无法再优化它们。

我在其他编译器中看到过这种行为，并且总是通过虚拟使用消失变量来解决它。

# ms-access - 显示仅删除第二个重复行但保留第一行的表格

> ID：10215954
> 
> 赞同：2
> 
> 时间：2012-04-18T18:48:42.773
> 
> 标签：ms-access, vba, duplicate-data

所以，我有一个包含 3 列的表，其中第一列由 ID 组成，最后一列由日期组成。我需要的是，按日期对表格进行排序，并删除任何较晚日期的重复 ID（并保留最早日期的 ID）。例如，这就是我的表格最初的样子 -

*   123 瑞恩 01/01/2011
*   345 卡尔 03/01/2011
*   123 丽莎 01/02/2012
*   870 提雅 06/03/2012
*   345 卡尔 07/01/2012

我希望我的结果表看起来像这样 -

*   123 瑞恩 01/01/2011
*   345 卡尔 03/01/2011
*   870 提雅 06/03/2012

我正在使用 VBA 访问代码来找到上述解决方案，并且也使用了 SQL 查询，但是我的结果表要么没有任何重复，要么显示所有记录。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:12:45.480

这将创建一个新表：

```
SELECT tbl.SName, a.ID, a.BDate
INTO NoDups
FROM tbl 
INNER JOIN (
    SELECT  ID, Min(ADate) As BDate 
    FROM tbl GROUP BY ID)  AS a 
ON (tbl.ADate = a.BDate) AND (tbl.ID = a.ID); 
```

# mysql - 返回非空值的 MySQL 函数

> ID：10215957
> 
> 赞同：1
> 
> 时间：2012-04-18T18:49:07.740
> 
> 标签：mysql, function, null

我正在尝试编写一个 MySQL 函数，该函数从两个值（ a，b ）返回非空值 ..但是，我得到一个错误

```
DELIMITER $$ 
CREATE FUNCTION GetNonNull(a,b) BEGIN
IF a = NULL THEN RETURN b; ELSE return a; ENDIF; END $$ 
DELIMITER ; 
```

我收到此错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'b) BEGIN IF a = NULL THEN RETURN b; 附近使用的正确语法；否则返回一个；万一; END' 在第 1 行

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:54:43.240

您缺少`RETURNS`显示函数返回的数据类型的子句。您还必须指定参数的数据类型。查看[文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:57:35.290

我建议使用内置[`COALESCE`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)函数而不是编写自己的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:01:54.893

试试这个

```
DELIMITER $$   
CREATE FUNCTION GetNonNull(a INT,b INT) RETURNS INT
BEGIN  
    IF a IS NULL THEN
        RETURN b;
    ELSE
        return a;
    ENDIF;
END $$   
DELIMITER ; 
```

或者

```
DELIMITER $$   
CREATE FUNCTION GetNonNull(a INT,b INT) RETURNS INT
BEGIN  
    IF ISNULL(a) THEN
        RETURN b;
    ELSE
        return a;
    ENDIF;
END $$   
DELIMITER ; 
```

或者

```
DELIMITER $$  
CREATE FUNCTION GetNonNull(a INT ,b INT) RETURNS INT
BEGIN 
    RETURN IFNULL(a,b);
END $$  
DELIMITER ; 
```

实际上，您可以将存储过程替换为`IFNULL(a,b)`

# groovy - 访问为 Jenkins Groovy 插件脚本指定的变量

> ID：10215959
> 
> 赞同：8
> 
> 时间：2012-04-18T18:49:13.667
> 
> 标签：groovy, jenkins, jenkins-plugins

在编写由[Jenkins Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)作为构建步骤（*执行系统 ​​Groovy 脚本*）运行的脚本时，可以指定“变量绑定”。帮助热线说：*定义变量绑定（以属性文件格式）。可以从脚本中寻址指定的变量。*[原文如此] 如何从脚本中访问这些变量？它们没有被设置为构建的环境变量，它们也不存在于系统属性中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T20:22:22.187

`this.getBinding().getVariables()`

或者干脆`binding.variables`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-02T14:36:41.790

我无法直接使用 binding.variables，我只能从binding.variables 获得`listener`、`build`和。 `launcher``out`

相反，我能够按照`build.environment(listener)`对这个问题的回答中的建议使用来检索环境变量： [Access to build environment variables from a groovy script in a Jenkins build step (Windows)](https://stackoverflow.com/questions/21236268/access-to-build-environment-variables-from-a-groovy-script-in-a-jenkins-build-st)

```
def config = new HashMap()
config.putAll(binding.variables)
def logger = config['out']
def envvars = new HashMap()
envvars.putAll(build.getEnvironment(listener))
def myvar= envvars['myvar'] 
```

这对我来说可能有所不同，因为我只是在寻找系统范围的环境变量：

> （选中）为运行准备环境 \ Keep Jenkins Environment Variables \ Keep Jenkins Build Variables

# java - Java 服务器套接字通信非常慢

> ID：10215961
> 
> 赞同：1
> 
> 时间：2012-04-18T18:49:15.040
> 
> 标签：java, python, sockets

在 Linux 上本地化。20k 条消息大约需要 10 秒。我的猜测是我的 Java 很糟糕，而 Python 很好。

py客户端：

```
def scan(self, msg):
    try:
        print 'begin scan'
        HOST = 'localhost'
        PORT = 33000
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((HOST, PORT));
        s.sendall(msg)
        data = s.recv(1024)
        s.close()
        print 'Received', repr(data)
    except Exception, e:
        print "error: " + str(e) 
```

Java服务器：

```
 ServerSocket service = new ServerSocket(33000); 

    while(true) {

    debug("Begin waiting for connection");

    //this spins
    Socket connection = service.accept();

    debug("Connection received from " + connection.getInetAddress().getHostName());

    OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());
    BufferedInputStream in = new BufferedInputStream(connection.getInputStream());

    ScanResultsHeader results = new ScanResultsHeader();

        Scanner scanner = new Scanner();
        results = scanner.scan("scannerfake@gmail.com", "123", in); 
```

和

公共 ScanResultsHeader 扫描（字符串 userEmail、字符串 imapRetrievalId、BufferedInputStream mimeEmail）抛出 IOException、FileNotFoundException、MimeException、ScannerException {

```
 //how fast would it be to just slurp up stream?
    debug("slurp!");
    String slurp = IOUtils.toString(mimeEmail);
    debug("slurped " + slurp.length() + " characters");
    slurp = slurp.toLowerCase();
    debug("lc'ed it");
    //... 
```

我的猜测是我把输入流弄错了。一个问题是使用的库 API 扫描需要“BufferedInputStream mimeEmail”签名，因此我最终需要使用该表单。但我注意到啜食一根绳子的简单动作需要很长时间，所以我已经在做一些不正确的事情了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:55:24.397

修改我的答案....

如果你的阅读效率很高，而且看起来确实如此，那只会花费很多时间，因为

*   每次发送消息时，您都在创建一个新连接，这可能非常昂贵。
*   您发送数据的速度并没有您想象的那么快。
*   消息非常大（不太可能，但可能）

有很多关于如何做到这一点的例子，你可以使用的一个好的库是 IOUtils，它使它更简单。

您应该能够通过 Java 中的单个套接字发送大约 200K/s 的消息。

* * *

如果你有一个使用 Big Endian 的发送 X 字节协议，你可以这样做。

```
DataInputStream dis = new DataInputStream( ...
int len = dis.readInt();
byte[] bytes = new byte[len];
dis.readFully(bytes);
String text = new String(bytes, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:16:29.677

最初的问题是客户端没有发送输入结束，因此“slurp”操作一直在等待更多的东西通过连接。

解决方案是实现一个应用层协议，提前发送消息的大小，然后在那么多字节之后停止监听更多的消息。我更喜欢一个标准库——比如，FiniteInputStream 扩展了 BufferedInputStream 并将大小作为参数，但我自己编写了。

# css - 在 selenium IDE 中查找字体粗细值

> ID：10215963
> 
> 赞同：0
> 
> 时间：2012-04-18T18:49:21.940
> 
> 标签：css, dom, selenium, css-selectors, selenium-ide

我正在使用 Selenium IDE 并且需要识别何时应用了 css 'font-weight:bold' 的文本项（使用 'verifyAttribute'）

使用以下 CSS 定位器：

```
css=body.home.es ul#languages li:nth-child(2) a.selected 
```

Selenium 可以找到该项目。我现在需要深入研究 CSS 并确认 font-weight:bold 已被应用。我正在测试的网站的 CSS 是：

```
ul.language li a.selected {
color: #FFFFFF;
font-weight: bold; 
```

我画了一个空白；可以这样实现吗，我需要深入研究 DOM 定位器吗？还是 Java 是解决方案？（这对我来说并不容易）

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T20:42:29.657

由于看起来您需要计算样式，因此我认为您需要使用 javascript。

您可以在 Selenium IDE 中执行以下步骤：

```
Command: assertEval
Target: var x = window.document.querySelector('body.home.es ul'); window.getComputedStyle(x,null).getPropertyValue('font-weight');
Value: 700 
```

请注意，700 的值是粗体的字体粗细。

此解决方案在 Firefox 中进行了测试。如果您使用的是 IE，它会略有不同 - 请参见[此处](https://developer.mozilla.org/en/DOM/window.getComputedStyle)。

# iphone - 从对象数组中访问值

> ID：10215967
> 
> 赞同：8
> 
> 时间：2012-04-18T18:49:54.133
> 
> 标签：iphone, ios, cocoa-touch, cocoa, foundation

我有两个数组，即

```
NMutableArray* first;
NMutableArray* second; 
```

现在我将第一个对象复制到第二个数组中

```
for (int i=0;i<first.count; i++)
{
 [second addObject:[first objectAtIndex:i];
} 
```

还行吧。我不知道如何访问第一个数组的值。我试过这样，

```
[second addObject:[[first objectAtIndex:i]name]]; 
```

我想获取第一个数组的第一个对象中的名称值。我尝试使用上面的行，它显示了一些警告。请帮我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:29:44.853

假设您从这样的数组开始：

```
NSArray *array1 = @[@{@name : @"Fred"},
                    @{@name : @"Bill"}]; 
```

您可以创建第二个数组，其中包含第一个数组的每个元素的给定属性的值，如下所示：

```
NSArray *array2 = [array1 valueForKey:@"name"]; 
```

如果您随后记录了第二个数组...

```
NSLog(@"%@", array2); 
```

...结果输出将是

```
2012-04-18 16:26:11.226 ExampleRunner[23320:707] (
    Fred,
    Bill
) 
```

**编辑**

请注意，无论第一个数组中的对象是上面示例中所示的实例，还是具有属性或实例变量（或实例变量，就此而言）`NSDictionary`的一个或多个类的实例，这都将起作用。有关其工作方式和原因的更多信息，请参阅非正式协议的文档：`name``_name``NSKeyValueCoding`

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T18:54:05.057

括号当前位于错误的位置：

```
[second addObject:[[first objectAtIndex:i] name]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:53:19.897

***更新答案：***

同样，我认为您应该将内容拆分为易于解析的代码行：

```
for (id theObject in first)
{
    // without an actual type, I still think the compiler might
    // throw a warning on this next line of code; 
    // but maybe RJR III is correct and it won't warn. 
    // I didn't check.
    NSString * nameOfObject = [theObject name];
    if(nameOfObject)
    {
        [second addObject:nameOfObject];
    }
} 
```

请注意，我也在这里进行了一些错误检查（即确保名称不为零）。

***原答案：***

您收到警告是因为编译器不知道从您对“ `[first objectAtIndex: i]`”的调用中获取了哪种自定义对象。换句话说，它不知道你想得到什么样的对象`name`。

将其转换为正确的类型，您将摆脱警告。

或者更好的是，将同时发生的多件事分成两三行代码，让你的代码在这个过程中更具可读性。

# java - 如何使用 jodreports 和 java 在运行时插入 odt 文档

> ID：10215968
> 
> 赞同：1
> 
> 时间：2012-04-18T18:50:01.343
> 
> 标签：java, image, insert

我需要使用 java 在 doc 或 odt 文档中插入各种图像，这些图像是在运行时生成的。当时我很想使用 jodreports，因为它很容易生成最终文档的模板，但我被困住了，因为我找不到任何类型的文档告诉我如何插入图像。如果您可以回答我的问题，请发布代码片段或告诉我可以使用哪个其他库。

非常感谢您的帮助（并为我的英语不好感到抱歉）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:41:58.873

在你的类中创建一个`ImageSource`-object。

```
ImageSource imagen =
new RenderedImageSource(ImageIO.read(new File(ruta_fisica_imagen))); 
```

将此对象添加到 Map 对象中

在模板中定义`jooscript.image(name)`

更多信息，文档为西班牙语 [http://www.montesinos.org.es/2010/11/jodreports-mini-how-to.html](http://www.montesinos.org.es/2010/11/jodreports-mini-how-to.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-06T09:43:35.047

在我的页面[https://xbrowser.altervista.org/informatica-portata/odt-converter/](https://xbrowser.altervista.org/informatica-portata/odt-converter/) 中，您可以逐步找到如何实施您的问题。

图书馆是：

```
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStream;
import java.util.Map;
import org.apache.commons.io.FileUtils;
import org.apache.commons.io.IOUtils;
import net.sf.jooreports.templates.DocumentTemplate;
import net.sf.jooreports.templates.DocumentTemplateException;
import net.sf.jooreports.templates.DocumentTemplateFactory;
import net.sf.jooreports.templates.image.FileImageSource; 
```

这是方法

```
private Map<String, Object> data = new HashMap<String, Object>();;
private Logger log = Logger.getLogger(this.getClass().getName());

private void createOdt() {

DocumentTemplateFactory documentTemplateFactory = new DocumentTemplateFactory();
DocumentTemplate template = null;

File inputFile = new File("/path/template.odt"); //inserire il path relativo alla posizione del template .odt
try {
template = documentTemplateFactory.getTemplate(inputFile);
log.debug("input file ok -> " + inputFile);
} catch (IOException e) {
log.error(e);
}
try {
tmpFile = File.createTempFile("odt_", ".odt");

data.put("qrcode", new FileImageSource(new File("/img/src/qrcode.jpg"))); //qui è possibile generare per esempio un qrcode
template.createDocument(data, new FileOutputStream(tmpFile));

log.debug("output file temporaneo creato ("+ tmpFile.getAbsolutePath() + ")..");
} catch (FileNotFoundException e) {
log.error(e);
} catch (IOException e) {
log.error(e);
} catch (DocumentTemplateException e) {
log.error(e);
}
} 
```

此时，有必要在 .odt 模板中使用以下方式插入图像：

1.  插入图像
2.  双击图片进入图片属性
3.  选择“选项”选项卡
4.  在“名称”字段中插入：jooscript.image(qrcode)

如您所见，图像名称显示 qrcode，这正是我们代码中的 hashmap 键的名称（`data.put("qrcode")`）。

通过这种方式，可以在 .odt 中定义的模板中显示从 java 代码动态生成的图像。

我希望你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:51:26.110

只是想确认@Jarabid 的方法有效。

```
//visual signature
ImageSource signatureImage = 
      new RenderedImageSource(ImageIO.read(new File("resources/Signature.png")));
data.put("signature", signatureImage); 
```

我在 Mac 上使用 LibreOffice，我所做的是：

*   从文件插入图像（使用占位符图像）
*   双击图片调出图片属性
*   选择“选项”选项卡
*   名称粘贴：jooscript.image(signature)

完美的第一次尝试。快乐的 ：）

# tomcat6 - Tomcat 遇到来自 WAR 文件的 JAVA 文件问题

> ID：10215972
> 
> 赞同：0
> 
> 时间：2012-04-18T18:50:24.437
> 
> 标签：tomcat6

任何人都可以帮助我。我有在 Eclipse 中成功运行的代码。但是当我创建一个 WAR 文件并尝试运行它时，Tomcat 服务器无法找到 JAVA 文件。通过 Eclipse 在 Tomcat 上运行代码和直接在 Tomcat 服务器上运行 WAR 文件是否有很大不同。

任何帮助或建议帮助我弄清楚发生了什么都将不胜感激，即使这只是我自己开始调查它的起点。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:57:33.467

Tomcat 不能对 .java 文件做任何事情。您需要打包已编译的 .class 文件，而不是源 .java 文件。

# asp.net - ASP.net Web 表单路由

> ID：10215976
> 
> 赞同：1
> 
> 时间：2012-04-18T18:50:27.480
> 
> 标签：asp.net, url-routing, search-engine

我想使用路由来创建一个多元文化的网站。

我正在考虑为每种语言重写 URL。

联系我们页面 - 示例：

```
English:
http://www.domain.com/ContactUs

French:
http://www.domain.com/NousContacter 
```

而不是传统的方式：

```
English:
http://www.domainname.com/en/contact 

French:
http://www.domainname.com/fr/contact 
```

这是否可能在不破坏谷歌和雅虎等搜索引擎的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:33:37.520

我认为这些样本会有所帮助。似乎第一个链接更接近我试图告诉的内容。希望能帮助到你。

[http://geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx](http://geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx)

[http://msdn.microsoft.com/en-us/library/dd381609.aspx](http://msdn.microsoft.com/en-us/library/dd381609.aspx)

[https://gist.github.com/1583539](https://gist.github.com/1583539)

# linux - 脚本保留在 Oracle 数据库中

> ID：10215979
> 
> 赞同：0
> 
> 时间：2012-04-18T18:50:31.810
> 
> 标签：linux, oracle

当我使用这个脚本时：

```
sqlplus -s "/ as sysdba" << EOF
startup;
EOF 
```

它启动 db 并返回到主机。我希望我的脚本不会返回主机。我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T21:03:20.993

如果添加`exit`到脚本中会有帮助吗？换句话说，如果您尝试以下操作：

```
sqlplus -s "/ as sysdba" << EOF
startup;
exit
EOF 
```

**编辑**：如果您不希望 SQL*Plus 在运行后退出`startup`，请输入该行

```
startup; 
```

在一个名为 的文件中`startup.sql`，比如说。然后你可以运行

```
sqlplus -s "/ as sysdba" @startup.sql 
```

然后应该启动数据库并将您留在 SQL*Plus 中。

# php - 带有子 PHP / MYSQL 的类别

> ID：10215980
> 
> 赞同：0
> 
> 时间：2012-04-18T18:50:32.603
> 
> 标签：php, mysql

我的代码中的子类别有些问题。

我的期望：

> *   面包店
>     *   罐头食品
>     *   乳制品
>     *   肉
>         *   子类别
>         *   子类别
>         *   ...
>         *   子类别
>     *   糖果和零食
>         *   子类别
>         *   子类别
>         *   ...
>         *   子类别

MYSQL 表架构：

分类：

id 类别名称 url 类型

```
$res = mysql_query("SELECT `id`, `name`, `url` FROM `categories` WHERE `type`='category' ORDER BY `name` ASC") or die(mysql_error());
while ($arr = mysql_fetch_array($res))
{
    $faq_categ[$arr['id']]['title'] = $arr['name'];
    $faq_categ[$arr['id']]['url'] = $arr['url'];
}
$res = mysql_query("SELECT `id`, `name`, `category`, `url` FROM `categories` WHERE `type`='subcategory' ORDER BY `name` ASC") or die(mysql_error());
while ($arr = mysql_fetch_array($res)) 
{
    $faq_categ[$arr['category']]['items'][$arr['id']]['name'] = $arr['name'];
    $faq_categ[$arr['category']]['items'][$arr['id']]['url'] = $arr['url'];
}
if (isset($faq_categ)) 
{
    foreach ($faq_categ as $id => $temp) 
    {
        $textbuilder .= '<li><a href="/products/'.$faq_categ[$id]['url'].'/all" title="">'.$faq_categ[$id]['title'].'</a>';
        if (array_key_exists("items", $faq_categ[$id])) 
        {
            foreach ($faq_categ[$id]['items'] as $id2 => $temp)
            {
                $textbuilder .= '<small><a href="/products/'.$faq_categ[$id]['url'].'/'.$faq_categ[$id]['items'][$id2]['url'].'" title="">٠'.$faq_categ[$id]['items'][$id2]['name'].'</a></small>';
            }
        }
        $textbuilder .= '</li>';
    }
} 
```

结果：[http ://www.picupload.us/images/454result.png](http://www.picupload.us/images/454result.png)

谢谢你的时间，福克斯沉没

编辑：

这是桌子

```
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int(10) NOT NULL auto_increment,
  `category` int(10) default NULL,
  `name` varchar(255) NOT NULL,
  `url` varchar(255) NOT NULL,
  `type` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=17 ;

INSERT INTO `categories` (`id`, `category`, `name`, `url`, `type`) VALUES
(1, 1, 'Bakery', 'brakery', 'category'),
(2, 2, 'Dairy Products', 'dairy-products', 'category'),
(3, 3, 'Sweets and Snacks', 'sweets-and-snacks', 'category'),
(4, 3, 'Corn puffs', 'corn-puffs', 'subcategory'),
(5, 3, 'Biscuits', 'biscuits', 'subcategory'),
(6, 3, 'Cakes', 'cakes', 'subcategory'),
(7, 3, 'Pretzels', 'pretzels', 'subcategory'),
(8, 4, 'Canned food', 'canned-food', 'category'),
(9, 5, 'Meat', 'meat', 'category'),
(10, 5, 'Salami', 'salami', 'subcategory'),
(11, 5, 'Sausages', 'sausages', 'subcategory'),
(12, 5, 'Ham', 'ham', 'subcategory'),
(13, 5, 'Delicatessen', 'delicatessen', 'subcategory'),
(14, 5, 'Frankfurters', 'frankfurters', 'subcategory'),
(15, 5, 'Polony', 'polony', 'subcategory'),
(16, 5, 'Smoked', 'smoked', 'subcategory'),
(17, 5, 'Pate', 'pate', 'subcategory'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:31:05.377

我试试这个代码，它的作品..你会试试这个...

```
CREATE TABLE IF NOT EXISTS `categorylist` (
 `id` int(5) NOT NULL auto_increment,
`cname` varchar(25) collate utf8_unicode_ci default NULL,
`pid` int(5) NOT NULL,
PRIMARY KEY  (`id`),
KEY `pid` (`pid`)
) ;

INSERT INTO `categorylist` (`id`, `cname`, `pid`) VALUES
(1, 'Entertainment', 0),
(2, 'movies', 1),
(3, 'actor', 2),
(4, 'actress', 2),
(5, 'Drama', 1),
(7, 'sports', 0),
(8, 'comedian', 2),
(9, 'political', 0);

<?php
include "header.php";
 include "dbconn.php";

 $qry="SELECT * FROM categorylist";
 $result=mysql_query($qry);

 $arrayCategories = array();

 while($row = mysql_fetch_assoc($result)){ 
    $arrayCategories[$row['id']] = array("pid" => $row['pid'], "name" =>  $row['cname']);   
  }
//createTree($arrayCategories, 0);

 function createTree($array, $currentParent, $currLevel = 0, $prevLevel = -1) {

foreach ($array as $categoryId => $category) {

    if ($currentParent == $category['pid']) {                       

        if ($currLevel > $prevLevel) echo " <ul> "; 

        if ($currLevel == $prevLevel) echo " </li> ";

        echo '<li id="'.$categoryId.'" onclick=child(this.id);><span>'.$category['name'].'</span>';

        if ($currLevel > $prevLevel) { $prevLevel = $currLevel; }

        $currLevel++; 

        createTree ($array, $categoryId, $currLevel, $prevLevel);

        $currLevel--;               
    }   

}

if ($currLevel == $prevLevel) echo " </li>  </ul> ";

}   
?>
<div id="content" class="general-style1">
<?php
 if(mysql_num_rows($result)!=0)
 {
?>
<ul>
    <li id="0" class="root"><span>Categories</span>
    <?php createTree($arrayCategories, 0); ?>
</li>
</ul>
<?php
}
?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:56:02.313

您的数据有误：

```
(9, 5, 'Meat', 'meat', 'category'), 
```

应该：

```
(9, 9, 'Meat', 'meat', 'category'), 
```

和

```
(10, 5, 'Salami', 'salami', 'subcategory'),
(11, 5, 'Sausages', 'sausages', 'subcategory'),
(12, 5, 'Ham', 'ham', 'subcategory'),
(13, 5, 'Delicatessen', 'delicatessen', 'subcategory'),
(14, 5, 'Frankfurters', 'frankfurters', 'subcategory'),
(15, 5, 'Polony', 'polony', 'subcategory'),
(16, 5, 'Smoked', 'smoked', 'subcategory'),
(17, 5, 'Pate', 'pate', 'subcategory'); 
```

应该：

```
(10, 9, 'Salami', 'salami', 'subcategory'),
(11, 9, 'Sausages', 'sausages', 'subcategory'),
(12, 9, 'Ham', 'ham', 'subcategory'),
(13, 9, 'Delicatessen', 'delicatessen', 'subcategory'),
(14, 9, 'Frankfurters', 'frankfurters', 'subcategory'),
(15, 9, 'Polony', 'polony', 'subcategory'),
(16, 9, 'Smoked', 'smoked', 'subcategory'),
(17, 9, 'Pate', 'pate', 'subcategory'); 
```

# c++ - 为什么模板化基类中的方法不可见？

> ID：10215989
> 
> 赞同：1
> 
> 时间：2012-04-18T18:51:23.260
> 
> 标签：c++, templates

我有一个提供方法 remove() 的模板化基类。我有一个从模板化基类派生的类，它不隐藏 remove() 方法。但是，基于模板的类的 remove 方法是不可见的。为什么？有没有办法解决这个问题（我的意思是除了我最后想出的“技巧”）？

我已将其简化为一个小代码示例：

* * *

```
#include <map>
#include <iostream>
#include <boost/shared_ptr.hpp>

// Common cache base class. All our caches use a map, expect children to
// specify their own add, remove and modify methods, but the base supplies a
// single commont remove too.
template <class T>
class cache_base {
public:

    cache_base () {};

    virtual ~cache_base() {};

    virtual void add(uint32_t    id) = 0;

    virtual void remove(uint32_t    id) = 0;

    void remove() {
        std::cout << "This is base remove\n";
    };

    virtual void modify(uint32_t    id) = 0;

protected:
    typedef std::map< uint32_t, typename T::SHARED_PTR_T>    DB_MAP_T;

    DB_MAP_T    m_map;
};

// A dummy item to be managed by the cache.
class dummy {
public:
    typedef    boost::shared_ptr<dummy>    SHARED_PTR_T;

    dummy () {};
    ~dummy () {};
};

// A dummy cache
class dummy_cache :
    public cache_base<dummy>
{
public:
    dummy_cache () {};

    virtual ~dummy_cache () {};

    virtual void add(uint32_t    id) {};

    virtual void remove(uint32_t    id) {};

    virtual void modify(uint32_t    id) {};
};

int
main ()
{
    dummy_cache    D;

    D.remove();

    return(0);
} 
```

* * *

此代码无法编译，给我以下错误

* * *

```
g++ -g -c -MD -Wall -Werror -I /views/LU-7.0-DRHA-DYNAMIC/server/CommonLib/lib/../include/ typedef.cxx
typedef.cxx: In function 'int main()':
typedef.cxx:67: error: no matching function for call to 'dummy_cache::remove()'
typedef.cxx:54: note: candidates are: virtual void dummy_cache::remove(uint32_t)
make: *** [typedef.o] Error 1 
```

* * *

我不知道它是否有所作为，但我使用的是 g++ 版本 4.1.2 20070115。

另外，我发现如果我将以下删除方法添加到`dummy_cache`它的工作原理。但是，我不得不在 dummy_cache 中添加一个从属方法来公开一个公共基础方法，这感觉很奇怪。

```
void remove () {return cache_base<dummy>::remove(); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:56:40.200

您的重载`dummy_cache::remove(uint32_t)`正在隐藏`cache_base::remove()`. 您可以通过以下方式取消隐藏：

```
class dummy_cache :
    public cache_base<dummy>
{
public:
  using cache_base<dummy>::remove;
  ...
}; 
```

# java - 解释 StringToWordVector() 的输出 - Weka

> ID：10215991
> 
> 赞同：5
> 
> 时间：2012-04-18T18:51:35.640
> 
> 标签：java, text, machine-learning, classification, weka

我正在尝试使用 Weka java API 进行文档分类。

这是我的数据文件的目录结构。

```
+- text_example
|
+- class1
|  |
|  3 html files
|
+- class2
|   |
|   1 html file
|
+- class3
    |
    3 html files 
```

我有使用“TextDirectoryLoader”创建的“arff”文件。然后我`StringToWordVector`在创建的 arff 文件上使用过滤器，使用`filter.setOutputWordCounts(true)`.

以下是应用过滤器后的输出示例。我需要澄清一些事情。

```
@attribute </form> numeric
@attribute </h1> numeric
.
.
@attribute earth numeric
@attribute easy numeric 
```

这个巨大的列表应该是初始 html 文件内容的标记化。对？

然后我有，

```
@data
{1 2,3 2,4 1,11 1,12 7,..............}
{10 4,34 1,37 5,.......}
{2 1,5 6,6 16,...}
{0 class2,34 11,40 15,.....,4900 3,...
{0 class3,1 2,37 3,40 5....
{0 class3,1 2,31 20,32 17......
{0 class3,32 5,42 1,43 10......... 
```

为什么前 3 个项目没有类属性？（它应该有class1）。{0 class2,..}, {0 class3..} 中的前导 0 是什么意思。例如，它表示在 class3 文件夹中的第三个 html 文件中，由整数 32 标识的单词出现了 5 次。只是为了看看我如何获得 32 引用的单词（令牌）？

如何降低特征向量的维数？我们不需要使所有特征向量的大小相同吗？（比如只考虑训练集中最常见的 100 个词，然后在测试时，只考虑测试文档中出现的那 100 个词。因为，这样如果我们想出一个全新的词会发生什么在测试阶段，分类器会忽略它吗？）。

我在这里错过了什么吗？我是 Weka 的新手。

如果有人可以向我解释分类器如何使用通过`StringToWordVector`过滤器创建的这个向量，我也非常感谢您的帮助。（比如使用训练数据创建词汇表，降维，这些是否发生在 Weka 代码中？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T15:36:45.493

1.  巨大的列表`@attribute`包含从您的输入派生的所有标记。
2.  您的`@data`部分采用稀疏格式，即对于每个属性，仅当它不为零时才说明该值。对于前三行，class 属性是class1，你只是看不到它（如果它是未知的，你会`0 ?`在前三行的开头看到a）。为什么呢？Weka 在内部将名义属性（包括类）表示为双精度数并从零开始计数。所以你的三个类在内部：class1=0.0，class2=1.0，class3=2.0。由于零值未以稀疏格式说明，因此您看不到前三行中的类。（另请参阅[http://www.cs.waikato.ac.nz/ml/weka/arff.html](http://www.cs.waikato.ac.nz/ml/weka/arff.html)上的“稀疏 ARFF 文件”部分）
3.  要获取索引 n 表示的单词/标记，您可以计数，或者，如果您有`Instances`对象，则在其上调用`attribute(n).name()`。为此，`n`从 0 开始计数。
4.  为了降低特征向量的维数，有很多选择。如果您只想拥有 100 个最常用的术语，则`stringToWordVector.setWordsToKeep(100)`. 请注意，这将尝试保留每节课的 100 个单词。如果您不想每节课保留 100 个单词，`stringToWordVector.setDoNotOperateOnPerClassBasis(true)`. 如果有几个词的频率相同，你会得到略高于 100，所以 100 只是一种目标值。
5.  至于在测试阶段出现的新词，我认为这是不可能的，因为你必须`stringToWordVector`在分类之前把所有的实例都交给你。不过，我不是 100% 确定这一点，因为我使用的是两类设置，并且`StringToWordVector`在告诉分类器有关它的任何信息之前，我让我转换了所有实例。

我一般可以向您推荐，尝试使用 Weka KnowledgeFlow 工具来学习如何使用不同的类。如果您知道如何在那里做事，那么您可以很容易地将这些知识用于您的 Java 代码。希望我能帮助你，虽然答案有点晚了。

# javascript - 在 JavaScript MVC 的构建过程中找不到 production.css

> ID：10215993
> 
> 赞同：0
> 
> 时间：2012-04-18T18:51:38.897
> 
> 标签：javascript, jquery, model-view-controller, build, javascriptmvc

我生成了一个示例应用程序只是为了测试构建过程，它在构建过程中出错。

```
$ ./js steal/buildjs apps/hello/hello.html -to apps/helloprod
Building to apps/helloprod/

BUILDING STYLES --------------- 
   apps/hello/hello.css

STYLE BUNDLE > apps/helloprod/production.css
Nice! Compressed: 17.1%  Before: 41.0 bytes  After: 34.0 bytes
!!!!!!!!!!! ERROR !!!!!!!!!!!

-message       = java.io.FileNotFoundException: apps/helloprod/production.css (No such file or directory)
-fileName      = steal/rhino/file.js
-lineNumber    = 217
-name          = JavaException
-javaException = java.io.FileNotFoundException: apps/helloprod/production.css (No such file or directory)

                 error loading html element  [object HTMLScriptElement]   JavaException: java.io.FileNotFoundException: apps/helloprod/production.css (No such file or directory) 
```

当我生成应用程序时，默认情况下 .css 文件中有一些内容，所以我什至尝试删除里面的内容（在这种情况下，它会出错，因为它无法计算文件的大小，例如。它说`NaN undefined`而不是41.0 字节）。当我刚刚收到这个错误时，出现了这个错误`hello.css`：

```
body{
  background-color:lightyellow;
} 
```

**有任何想法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:04:11.283

根据错误消息，您的问题是该`apps/helloprod/production.css`文件丢失。

确保此文件存在，如果从构建过程中删除。

编辑：

是因为`steal/rhino/file.js`包含在 CSS 的源文件中吗？

# android - 在andengine中处理多个场景导致“消费者关闭输入通道”异常

> ID：10215998
> 
> 赞同：0
> 
> 时间：2012-04-18T18:52:03.637
> 
> 标签：android, andengine

我正在做一个简单的 andengine 场景处理的 POC。我编写了一个简单的代码，它可以在小时候向父场景添加和删除场景。

多次执行此操作后，游戏崩溃并显示以下日志。

有关这些日志及其原因的任何信息或详细信息都会有很大帮助。

```
04-18 23:43:12.410: D/AndEngine(9346): SpeedyMindActivity.onSurfaceChanged(Width=800,  Height=480) @(Thread: 'GLThread 8919')
04-18 23:45:04.824: W/InputDispatcher(136): channel '418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
04-18 23:45:04.824: E/InputDispatcher(136): channel '418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
04-18 23:45:04.840: I/WindowManager(136): WIN DEATH: Window{418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity paused=false}
04-18 23:45:04.929: W/ActivityManager(136): Force removing ActivityRecord{418f6170 com.aqif.speedyMind.activity/.SpeedyMindActivity}: app died, no saved state
04-18 23:45:04.972: W/InputDispatcher(136): Attempted to unregister already unregistered input channel '418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity (server)'
04-18 23:45:05.031: W/WindowManager(136): Force-removing child win Window{41951328 SurfaceView paused=false} from container Window{418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity paused=false}
04-18 23:45:05.203: I/WindowManager(136): WINDOW DIED Window{418640c8 com.aqif.speedyMind.activity/com.aqif.speedyMind.activity.SpeedyMindActivity paused=false} 
```

问候， 阿基夫·哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:01:46.307

我没有想出解决这个问题的办法。但更好的方法是缓存您的场景并从您的引擎中替换您的场景。