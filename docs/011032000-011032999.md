# StackOverflow 问答 11032000-11032999

# php - 删除条目等于空字符串的每一行

> ID：11032002
> 
> 赞同：-1
> 
> 时间：2012-06-14T11:20:23.430
> 
> 标签：php, arrays

我有一个包含这些值（id、date、latlng、transport）的多行数组。当transport =“”时，我想删除整行。

我尝试了 while、for 和 foreach，但问题是：当我发现要删除的条目超过 1 个时，“$i”不再与相应的行匹配。

```
for($i=0;$i<count($json_a[data][entrees]);$i++)
{
    if($json_a[data][entrees][$i][transport]!="")
    {
        array_splice($json_a[data][entrees],$i,1);
        //first removal is OK. Second won't scope the good row
    }
} 
```

我设法通过创建第二个数组并复制其中的好行，然后替换第一个数组来使其工作。但可能有更好的解决方案，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:32:53.083

foreach 循环中没有 $i 。

```
foreach($json_a['data']['entrees'] as $entryKey => $entry){
    if($entry['transport']!=""){
        unset($json_a['data']['entrees'][$entryKey]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:23:52.147

```
 for($i=0;$i<count($json_a[data][entrees]);$i++)
    {
        if($json_a[data][entrees][$i][transport]=="")
        {
            unset($json_a[data][entrees][$i]);
        }
    }

print_r($json_a[data][entrees]) 
```

Hope this helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:28:31.867

尝试这个：

```
foreach( $json_a['data']['entrees'] as $key => $entry ){
    if( $entry['transport'] != "" ){
        array_splice($json_a['data']['entrees'], $key, 1);
    }else{
        unset($json_a['data']['entrees'][$key]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:45:46.670

您正在使用[PHP array_splice](http://php.net/manual/en/function.array-splice.php)，它的内容如下：

> 删除数组的一部分并用其他东西替换它

要从数组中删除一个条目，您应该使用[PHP unset](http://php.net/manual/en/function.unset.php)它读取的位置：

> 取消设置给定的变量。

**所以，你的代码应该是：**

```
<?php
for($i=0;$i<count($json_a[data][entrees]);$i++)
{
    if($json_a[data][entrees][$i][transport]!="")
    {
        //remove this entry from the array
        unset($json_a[data][entrees][$i]);
    }
}
?> 
```

* * *

测试用例：

```
// Sample Array with 4 entries
$json_a = array(
    "data" => array (
        "entrees" => array(
            array (
                "id"        => 14,
                "date"      => '2012-06-14',
                "latlng"    => '14.000000, -9.00000',
                "transport" => ''
            ),
            array(
                "id"        => 13,
                "date"      => '2012-06-14',
                "latlng"    => '13.000000, -8.00000',
                "transport" => '12'
            ),
            array(
                "id"        => 12,
                "date"      => '2012-06-14',
                "latlng"    => '12.000000, -7.00000',
                "transport" => '45'
            ),
            array(
                "id"        => 11,
                "date"      => '2012-06-14',
                "latlng"    => '11.000000, -6.00000',
                "transport" => ''
            )
        )
    )
); 
```

**控制输出：**

```
var_dump($json_a); 
```

> **输出：**
> 
> 数组（1）{[“数据”]=>数组（1）{[“主菜”]=>数组（4）{[0]=>数组（4）{[“id”]=>int（14） ["日期"]=> 字符串(10) "2012-06-14" ["latlng"]=> 字符串(19) "14.000000, -9.00000" ["运输"]=> 字符串(0) "" } [1](http://php.net/manual/en/function.array-splice.php) => array(4) { ["id"]=> int(13) ["date"]=> string(10) "2012-06-14" ["latlng"]=> string(19) "13.000000, -8.00000" ["transport"]=> string(2) "12" } [2](http://php.net/manual/en/function.unset.php) => array(4) { ["id"]=> int(12) ["date"]=> string(10) "2012 -06-14" ["latlng"]=> 字符串(19) "12.000000, -7.00000" ["transport"]=> 字符串(2) "45" } [3]=> 数组(4) { ["id"]=> int(11) ["date"]=> string(10) "2012-06-14" ["latlng"]=> string(19) "11.000000, -6.00000" ["transport"]= > 字符串(0) "" } } } }

**运行循环：**

```
for($i=0;$i<count($json_a[data][entrees]);$i++)
{
    if($json_a[data][entrees][$i][transport]!="")
    {
        //remove this entry from the array
        unset($json_a[data][entrees][$i]);
    }
} 
```

**确认输出：**

```
var_dump($json_a); 
```

> **输出：**
> 
> 数组（1）{[“数据”]=>数组（1）{[“主菜”]=>数组（2）{[0]=>数组（4）{[“id”]=>int（14） [“日期”]=>字符串（10）“2012-06-14”[“latlng”]=>字符串（19）“14.000000，-9.00000”[“运输”]=>字符串（0）“”}[ 3]=> array(4) { ["id"]=> int(11) ["date"]=> string(10) "2012-06-14" ["latlng"]=> string(19) " 11.000000, -6.00000" ["transport"]=> string(0) "" } } } }

# jquery - 如果悬停保持 500 毫秒，则 ajax 并且如果悬停停止则不会触发

> ID：11032005
> 
> 赞同：0
> 
> 时间：2012-06-14T11:20:33.163
> 
> 标签：jquery, ajax, hover, settimeout, delay

我想延迟一个 ajax 调用，直到悬停保持 500 毫秒

```
obj.hover(function(){ 
var t = setTimeout(function() {
    ajax_search();
}, 500);
}, function(){ 
clearTimeout($(this).data('timeout'));
}); 
```

确实延迟了ajax，但即使我停止悬停它仍然会触发。

它被用于具有大量悬停区域的地图，我想尽量减少对用户指示更长悬停区域的 ajax 调用。目前，它会在每次悬停时触发，并且在 heroku/facebook 应用程序上和链式悬停正在扼杀用户的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:23:32.183

您没有在悬停目标上设置数据。您正在获取句柄 (t) 但`$(this).data("timeout", t);`在 setTimeout 调用之后没有执行。

# iphone - 为什么我的图像失去了透明度？

> ID：11032009
> 
> 赞同：0
> 
> 时间：2012-06-14T11:20:43.163
> 
> 标签：iphone, objective-c, xcode, uibutton, xib

我正在创建一个 xib 文件，其中使用 UIImageView 显示黑色大理石背景，并在其上放置几个 UIButtons，其中包含图像。这些图像是透明的，除了围绕其周边的虚线白线。我正在为我的图像使用 pngs，并且我尝试将它们设置为图像和背景图像。如何恢复这些图像中的 alpha 通道并将它们放在 UIButton 中？

图像在黑色大理石背景下的透明度如何。

![图像在大理石黑色背景下的外观](../Images/1fb8f30333b81485e1871332097c06df.png)

图像目前的样子。

![在此处输入图像描述](../Images/9b72561b98f4b1b9d2865bcdea819640.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:25:19.137

您可能需要将`UIButton`类型设置为`UIButtonTypeCustom`而不是圆角矩形

![在此处输入图像描述](../Images/a1151f84bf4118cb41cffbde98d5b591.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:31:52.563

尝试在你的框架文件夹中添加quartzCore框架，然后导入头文件：

```
#import < QuartzCore/QuartzCore.h > 
```

如果需要，将图像设置为“`maskToBounds`是”并设置在角落。

```
[yuorImageView.layer setMaskToBounds:YES]; 
```

# jquery-address - 带有 jQ uery 1.7.x 的 jQuery 地址插件

> ID：11032010
> 
> 赞同：2
> 
> 时间：2012-06-14T11:20:43.917
> 
> 标签：jquery-address, jquery-1.7

我已经使用 jQuery Address 大约 1½ 年了。这只是为了澄清我很了解插件，实现、事件等不是问题。

对于一个项目，我必须使用需要 jQuery 1.7.x 及更高版本的 redactorJS。这只是说为什么我必须使用 1.7.2 没有别的。

问题：当在 1.5.x 以上的所有 jQuery 版本中触发 change 事件时，jQuery 地址会中断（几乎）所有 jQuery 插件。

谁能阐明在较新的 jQuery 版本上导致此问题的原因？

# android - Can I have a part of a scrollable Listview (implemented using hashmap) non-scrollable?

> ID：11032011
> 
> 赞同：1
> 
> 时间：2012-06-14T11:20:44.740
> 
> 标签：android

Im trying to make a list to enter the marks of students. I have an xml layout file which has the name of student as a textview and marks of 5 subjects as edittexts. Then I have another xml layout file which has a listview which is horizontally scrollable. Now in the java file Im using Hashmap to duplicate this layout for multiple students. I have the entire list horizontally scrollable. If I scroll left or right, I want all the rows to be scrolled together with the names being static horizontally. But I want only the marks to be scrollable. I want the name of student to be static. I tried to make the textview used 4 name as horizontallyscrollable="false". Doesn't help. Need help.

# php - 使用 mysqli 时未插入到数据库中的值

> ID：11032013
> 
> 赞同：0
> 
> 时间：2012-06-14T11:21:08.627
> 
> 标签：php, mysqli

我正在使用 mysqli 尝试检索教师的用户名，然后将所有值插入数据库。但问题是没有任何东西被插入到数据库中。

我的错误报告中没有任何错误，所以我认为在使用 mysqli 将值插入数据库时​​我做错了，但我不确定是什么。任何人都可以给我任何关于为什么它没有将值插入数据库的指示吗？

下面是代码：

```
$username="xxx";
$password="xxx";
$database="mobile_app";

  $mysqli = new mysqli("localhost", $username, $password, $database);

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$sql = "SELECT TeacherId FROM Teacher WHERE (TeacherUsername = ?)";

$stmt=$mysqli->prepare($sql);
    // You only need to call bind_param once
$stmt->bind_param("s",$_SESSION['teacherusername']);

$stmt->execute(); 
$record = $stmt->fetch();
$teacherid = $record['TeacherId'];

if($_SERVER['REQUEST_METHOD'] == 'POST')

{

$time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

  $insertsql = "INSERT INTO Session (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room) 
  VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";

 $insert=$mysqli->prepare($insertsql);

 $insert->bind_params("sssssssss", $sessid, $_SESSION['timeChosen'], $sessdate,
                     $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                     $_SESSION['module'], $teacherid, $_SESSION['rooms']);

for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {
    $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
    $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

    $insert->execute();
}

$insert->close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:05:52.567

尝试逐行调试这个东西：

*   将您的错误报告设置为`error_reporting(E_ALL);`php 文件或`error_reporting = E_ALL`php ini
*   数据库连接工作吗？
*   在使用之前回显 sql 查询
*   如果查询似乎是正确的：将其重建为 ONE 值并逐步重建它以找出错误在哪里

# performance - Can parallelization have a negative performance impact?

> ID：11032014
> 
> 赞同：1
> 
> 时间：2012-06-14T11:21:08.737
> 
> 标签：performance, optimization, parallel-processing, vectorization

With the abundance of techniques being employed to increase parallelization in today's compiler-tools (especially auto-parallelization of certain viable `for`-constructs, c.f. the Intel C++ Compiler, Microsoft Visual Studio 2011, alongside various others), I wondered if parallelization is always guaranteed to improve or have no impact on performance.

> Are there any cases in which parallelization would have a distinctly negative impact on performance?

A quick internet search didn't yield much hope, so I decided to turn here to see if anyone has any knowledge of cases where parallelization has a detrimental impact on performance, or better yet, experience in a project where parallelization actually caused difficulties.

I am also curious about whether there are any negative performance implication of auto-vectorization, although I find it quite unlikely that there would be.

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:12:34.847

理论上，自动矢量化可能会陷入“陷阱”，其中将所有元素放在正确位置的开销实际上比并行执行所节省的时间要大。分析一段代码将花费多少时间是很困难的，因此编译器很难做出正确的决定。

[这些幻灯片](http://llvm.org/devmtg/2012-04-12/Slides/Hal_Finkel.pdf)的最后是一些关于自动矢量化的示例和统计数据，这些示例和统计数据会使性能变得更糟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:33:15.630

并行化通常涉及不同处理元素之间的一些抽象数据交换，因为并非所有处理元素都可以独占访问完成其计算部分所需的所有数据。它可以是 MPI 作业中不同进程之间传递的消息，也可以是多线程程序中的同步操作。传递数据或同步事物需要时间，这就是为什么它通常被称为*通信*或*同步开销*。根据开销和计算之间的比率，存在不同类别的问题。

根本不需要通信或同步的并行算法被称为平凡（或“尴尬”）并行问题。此类的一个示例是光线追踪应用程序：每个像素都可以独立于所有其他像素进行计算。此类中的问题与使用的处理元素的数量成线性关系（有时甚至是超线性的，因为缓存效应） - 给它两倍的处理元素，执行计算的时间将减少两倍。

如果涉及任何数量的通信或同步，那么随着通信/同步和计算之间的比率增加，事情会变得越来越糟。通常这是当问题大小保持固定时的情况，因为增加了处理元素的数量。通常开销随着处理元素的数量而增加，而每个元素的计算量减少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:54:56.210

从更理论的角度来看，您可能对[NC](http://en.wikipedia.org/wiki/NC_%28complexity%29)中不存在的问题感兴趣，即在具有多项式处理器数量的并行计算机上可在多对数时间内确定的决策问题类别。

在我的脑海中，我想不出任何计算问题在某种程度上是不可并行的。我多次遇到的是**并行化程度很差**的问题。

并行化不好的程序很容易比它们的顺序版本慢。这可能是由于：

*   由于并行性太细粒度导致的大量开销，例如，与启动/调度操作的开销相比，每个线程执行的工作量可以忽略不计。在[OpenMP](http://en.wikipedia.org/wiki/Openmp)中，这可能是`#pragma omp parallel for schedule(dynamic,k)`小块大小的情况`k`。
*   对共享资源的重复并发访问，例如，如果所有线程都必须等待顺序访问某个资源或内存位置。在 OpenMP 中，这可能是由太多或太大的`#pragma omp critical`部分引起的。
*   过度使用缓慢的[原子操作](http://en.wikipedia.org/wiki/Atomic_operation)来更新线程之间共享的变量，例如使用`#pragma omp atomic`where，在顺序情况下，将使用更快的常规内存访问。

总而言之，在我看来，几乎没有固有的顺序问题，而是大量实施不当的并行解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:34:49.337

通常使用合理的并行化（平均并行处理）会产生积极的性能影响。

但在某些情况下，从开发人员的角度来看，它可能会造成负面影响：

1.  当分配给许多线程以进行并行和/或多线程处理时。
2.  当迭代很小并且分配线程比简单的同步处理项目花费更多的时间和资源时，fork/join 并行性和循环并行化
3.  典型的多线程/并行执行问题，如死锁、活锁、线程耗尽、竞争条件等。
4.  调试和诊断，更难发现错误

所以都应该合理使用。

和一些链接。抱歉，它们是 .NET/Microsoft 特定的，但描述的问题是相同的：

[数据和任务并行的潜在陷阱](http://msdn.microsoft.com/en-us/library/dd997392.aspx)

[并行 LINQ (PLINQ) 的潜在缺陷](http://msdn.microsoft.com/en-us/library/dd997403.aspx)

描述常见问题和陷阱的好书： [并行编程模式：使用 .NET Framework 4 理解和应用并行模式](http://www.microsoft.com/en-us/download/details.aspx?id=19222)

# algorithm - How to find time complexity of an algorithm?

> ID：11032015
> 
> 赞同：1003
> 
> 时间：2012-06-14T11:21:15.163
> 
> 标签：algorithm, time-complexity, complexity-theory

I have gone through [Google](https://www.google.co.in/search?aq=f&sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8&q=How%20to%20find%20time%20complexity%20of%20an%20algorithm) and [Stack Overflow](https://stackoverflow.com/search?q=how%20to%20calculate%20time%20complexity%20of%20an%20algorithm) search, but nowhere I was able to find a clear and straightforward explanation for how to calculate time complexity

### What do I know already?

Say for a code as simple as the one below:

```
char h = 'y'; // This will be executed 1 time
int abc = 0; // This will be executed 1 time 
```

Say for a loop like the one below:

```
for (int i = 0; i < N; i++) {
    Console.Write('Hello World !');
} 
```

*   `int i=0;` This will be executed only **once**. The time is actually calculated to `i=0` and not the declaration.
*   `i < N;` This will be executed **N+1** times
*   `i++` This will be executed **N** times

So the number of operations required by this loop are **{1+(N+1)+N} = 2N+2**. (But this still may be wrong, as I am not confident about my understanding.)

OK, so these small basic calculations I think I know, but in most cases I have seen the time complexity as **O(N), O(n^2), O(log n), O(n!)**, and many [others](http://en.wikipedia.org/wiki/Time_complexity).

* * *

## 回答 #1

> 赞同：449
> 
> 时间：2012-06-14T11:25:12.177

> 如何找到算法的时间复杂度

您将根据其输入大小的函数将执行多少机器指令相加，然后将表达式简化为最大（当 N 非常大时）项，并且可以包括任何简化常数因子。

例如，让我们看看我们如何简化`2N + 2`机器指令以将其描述为`O(N)`.

**为什么我们要删除这两个`2`s ？**

当 N 变大时，我们对算法的性能感兴趣。

考虑两个术语 2N 和 2。

当 N 变大时，这两项的相对影响是什么？假设 N 是一百万。

那么第一期是200万，第二期只有2。

出于这个原因，我们删除了除大 N 的最大项之外的所有项。

所以，现在我们已经从`2N + 2`到`2N`。

传统上，我们只对*常数因子*的性能感兴趣。

这意味着当 N 很大时，我们并不真正关心性能差异是否存在恒定倍数。无论如何，2N 的单位一开始就没有明确定义。所以我们可以乘以或除以一个常数因子来得到最简单的表达式。

所以`2N`就变成了`N`。

* * *

## 回答 #2

> 赞同：434
> 
> 时间：2013-01-18T10:04:35.560

这是一篇很棒的文章： [http ://www.daniweb.com/software-development/computer-science/threads/13488/time-complexity-of-algorithm](http://www.daniweb.com/software-development/computer-science/threads/13488/time-complexity-of-algorithm)

**下面的答案是从上面复制的（以防优秀的链接失效）**

计算时间复杂度的最常用指标是大 O 表示法。这消除了所有常数因素，以便当 N 接近无穷大时，可以相对于 N 估计运行时间。一般来说，你可以这样想：

```
statement; 
```

是恒定的。语句的运行时间不会相对于 N 改变。

```
for ( i = 0; i < N; i++ )
     statement; 
```

是线性的。循环的运行时间与 N 成正比。当 N 加倍时，运行时间也加倍。

```
for ( i = 0; i < N; i++ ) {
  for ( j = 0; j < N; j++ )
    statement;
} 
```

是二次方的。两个循环的运行时间与N的平方成正比。当N翻倍时，运行时间增加N * N。

```
while ( low <= high ) {
  mid = ( low + high ) / 2;
  if ( target < list[mid] )
    high = mid - 1;
  else if ( target > list[mid] )
    low = mid + 1;
  else break;
} 
```

是对数的。算法的运行时间与 N 可以除以 2 的次数成正比。这是因为算法在每次迭代时将工作区域分成两半。

```
void quicksort ( int list[], int left, int right )
{
  int pivot = partition ( list, left, right );
  quicksort ( list, left, pivot - 1 );
  quicksort ( list, pivot + 1, right );
} 
```

是 N * log ( N )。运行时间由对数的 N 个循环（迭代或递归）组成，因此该算法是线性和对数的组合。

一般来说，对一维中的每个项目做某事是线性的，对二维中的每个项目做某事是二次的，将工作区域分成两半是对数的。还有其他大 O 度量，例如三次、指数和平方根，但它们并不常见。大 O 表示法被描述为度量`O ( <type> )`在哪里。`<type>`快速排序算法将被描述为`O ( N * log ( N ) )`。

请注意，这些都没有考虑到最佳、平均和最坏情况的措施。每个都有自己的大 O 符号。另请注意，这是一个非常简单的解释。Big O 是最常见的，但也比我展示的更复杂。还有其他符号，例如大 omega、小 o 和大 theta。您可能不会在算法分析课程之外遇到它们。;)

* * *

## 回答 #3

> 赞同：198
> 
> 时间：2014-03-27T13:14:17.463

取自这里 -[算法的时间复杂度简介](https://web.archive.org/web/20140929181245/http://careerbaba.in/2014/01/introduction-to-time-complexity-of-an-algorithm/)

## 一、简介

在计算机科学中，算法的时间复杂度量化了算法运行所花费的时间，作为表示输入的字符串长度的函数。

## 2.大O符号

算法的时间复杂度通常用大 O 表示法表示，它不包括系数和低阶项。当以这种方式表达时，时间复杂度被认为是渐近描述的，即，当输入大小变为无穷大时。

例如，如果算法对所有大小为 n 的输入所需的时间最多为 5n ³ + 3n，则渐近时间复杂度为 O(n ³ )。稍后再谈。

还有几个例子：

*   1 = O(n)
*   n = O(n ² )
*   日志（n）= O（n）
*   2 n + 1 = O(n)

## 3\. O(1) 恒定时间：

如果无论输入大小如何，算法都需要相同的时间，则称该算法以恒定时间运行。

例子：

*   数组：访问任何元素
*   固定大小的堆栈：push 和 pop 方法
*   固定大小队列：入队和出队方法

## 4\. O(n) 线性时间

如果算法的执行时间与输入大小成正比，则称算法以线性时间运行，即时间随着输入大小的增加呈线性增长。

考虑以下示例，下面我线性搜索一个元素，它的时间复杂度为 O(n)。

```
int find = 66;
var numbers = new int[] { 33, 435, 36, 37, 43, 45, 66, 656, 2232 };
for (int i = 0; i < numbers.Length - 1; i++)
{
    if(find == numbers[i])
    {
        return;
    }
} 
```

更多示例：

*   数组：线性搜索、遍历、查找最小值等
*   ArrayList：包含方法
*   队列：包含方法

## 5\. O(log n) 对数时间：

如果算法的执行时间与输入大小的对数成比例，则称该算法以对数时间运行。

示例：[二分搜索](http://en.wikipedia.org/wiki/Binary_search)

回想一下“二十题”游戏——任务是在一个区间内猜测一个隐藏数字的值。每次您进行猜测时，系统都会告诉您您的猜测是太高还是太低。二十个问题游戏意味着使用您的猜测数将间隔大小减半的策略。这是称为二进制搜索的一般问题解决方法的示例

## 6\. O(n ² ) 二次时间

如果算法的执行时间与输入大小的平方成正比，则称该算法以二次时间运行。

例子：

*   [冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)
*   [选择排序](http://en.wikipedia.org/wiki/Selection_sort)
*   [插入排序](http://en.wikipedia.org/wiki/Insertion_Sort)

## 7.一些有用的链接

*   [大 O 的误解](http://ssp.impulsetrain.com/big-o.html)
*   [确定算法的复杂性](http://philipstel.wordpress.com/2011/03/07/determining-the-complexity-of-an-algorithm-the-basic-part/)
*   [大 O 备忘单](http://bigocheatsheet.com/)

* * *

## 回答 #4

> 赞同：115
> 
> 时间：2015-11-02T09:31:56.700

虽然这个问题有一些很好的答案。我想在这里用几个例子给出另一个答案`loop`。

*   **O(n)** ：如果循环变量以恒定量递增/递减，则循环的时间复杂度被视为*O(n) 。*例如以下函数具有*O(n)*时间复杂度。

    ```
    // Here c is a positive integer constant   
    for (int i = 1; i <= n; i += c) {  
        // some O(1) expressions
    }

    for (int i = n; i > 0; i -= c) {
        // some O(1) expressions
    } 
    ```

*   **O(n^c)**：嵌套循环的时间复杂度等于执行最里面的语句的次数。例如，以下示例循环具有*O(n^2)*时间复杂度

    ```
    for (int i = 1; i <=n; i += c) {
       for (int j = 1; j <=n; j += c) {
          // some O(1) expressions
       }
    }

    for (int i = n; i > 0; i += c) {
       for (int j = i+1; j <=n; j += c) {
          // some O(1) expressions
    } 
    ```

    例如选择排序和插入排序具有*O(n^2)*时间复杂度。

*   **如果循环变量除以/乘以一个常数，则循环的**O(Logn)**时间复杂度被认为是*O(Logn) 。***

     **```
    for (int i = 1; i <=n; i *= c) {
       // some O(1) expressions
    }
    for (int i = n; i > 0; i /= c) {
       // some O(1) expressions
    } 
    ```

    例如，二分搜索具有*O(Logn)*时间复杂度。** 
***   **O(LogLogn)**循环的时间复杂度被认为是*O(LogLogn)*如果循环变量以恒定的量指数减少/增加。

    ```
    // Here c is a constant greater than 1   
    for (int i = 2; i <=n; i = pow(i, c)) { 
       // some O(1) expressions
    }
    //Here fun is sqrt or cuberoot or any other constant root
    for (int i = n; i > 0; i = fun(i)) { 
       // some O(1) expressions
    } 
    ```** 

 *** * *

时间复杂度分析的一个例子

```
int fun(int n)
{    
    for (int i = 1; i <= n; i++)
    {
        for (int j = 1; j < n; j += i)
        {
            // Some O(1) task
        }
    }    
} 
```

**分析**：

`For i = 1, the inner loop is executed n times. For i = 2, the inner loop is executed approximately n/2 times. For i = 3, the inner loop is executed approximately n/3 times. For i = 4, the inner loop is executed approximately n/4 times. ……………………………………………………. For i = n, the inner loop is executed approximately n/n times.`

所以上述算法的总时间复杂度`(n + n/2 + n/3 + … + n/n)`为`n * (1/1 + 1/2 + 1/3 + … + 1/n)`

系列的重要之`(1/1 + 1/2 + 1/3 + … + 1/n)`处在于等于*O(Logn)*。所以上面代码的时间复杂度是*O(nLogn)*。

* * *

参考： [1](http://discrete.gr/complexity/) [2](http://www.geeksforgeeks.org/analysis-of-algorithms-set-4-analysis-of-loops/) [3](http://www.geeksforgeeks.org/interesting-time-complexity-question/)

* * *

## 回答 #5

> 赞同：77
> 
> 时间：2014-04-19T09:36:07.843

## 时间复杂度与示例

1 - 基本操作（算术、比较、访问数组元素、赋值）：运行时间始终为常数 O(1)

例子 ：

```
read(x)                               // O(1)
a = 10;                               // O(1)
a = 1.000.000.000.000.000.000         // O(1) 
```

2 - If then else 语句：仅从两个或多个可能的语句中获取最大运行时间。

例子：

```
age = read(x)                               // (1+1) = 2
if age < 17 then begin                      // 1
      status = "Not allowed!";              // 1
end else begin
      status = "Welcome! Please come in";   // 1
      visitors = visitors + 1;              // 1+1 = 2
end; 
```

因此，上述伪代码的复杂度为 T(n) = 2 + 1 + max(1, 1+2) = 6。因此，它的大 oh 仍然是常数 T(n) = O(1)。

3 - 循环（for、while、repeat）：此语句的运行时间是循环次数乘以该循环内的操作数。

例子：

```
total = 0;                                  // 1
for i = 1 to n do begin                     // (1+1)*n = 2n
      total = total + i;                    // (1+1)*n = 2n
end;
writeln(total);                             // 1 
```

因此，它的复杂度为 T(n) = 1+4n+1 = 4n + 2。因此，T(n) = O(n)。

4 - 嵌套循环（循环内循环）：由于主循环内至少有一个循环，因此该语句的运行时间使用 O(n^2) 或 O(n^3)。

例子：

```
for i = 1 to n do begin                     // (1+1)*n  = 2n
   for j = 1 to n do begin                  // (1+1)n*n = 2n^2
       x = x + 1;                           // (1+1)n*n = 2n^2
       print(x);                            // (n*n)    = n^2
   end;
end; 
```

## 共同运行时间

分析算法时有一些常见的运行时间：

1.  O(1) – 常数时间常数时间意味着运行时间是常数，它*不受输入大小*的影响。

2.  O(n) - 线性时间当算法接受 n 输入大小时，它也会执行 n 次操作。

3.  O(log n) – 运行时间为 O(log n) 的对数时间算法比 O(n) 稍快。通常，算法将问题分成大小相同的子问题。示例：二分查找算法、二分转换算法。

4.  O(n log n) – 线性时间这个运行时间经常出现在“分治算法”中，它递归地将问题划分为子问题，然后在 n 时间内将它们合并。示例：合并排序算法。

5.  O(n ² ) – 二次时间看冒泡排序算法！

6.  O(n ³ ) – 立方时间 它与 O(n ² ) 的原理相同。

7.  O(2 ^n ) – 指数时间随着输入变大它非常慢，如果 n = 1000.000，T(n) 将是 21000.000。蛮力算法有这个运行时间。

8.  O(n!) – 阶乘时间最慢！！！示例：旅行推销员问题 (TSP)

取自[这篇文章](http://philipstel.wordpress.com/2011/03/07/determining-the-complexity-of-an-algorithm-the-basic-part/)。解释得很好，应该读一读。

* * *

## 回答 #6

> 赞同：41
> 
> 时间：2016-06-05T09:43:59.000

当您分析代码时，您必须逐行分析它，计算每个操作/识别时间复杂度，最后，您必须将其相加才能得到全貌。

例如，您可以有一个具有*线性复杂度*的简单循环，但稍后在同一程序中您可以有一个具有*三次复杂度*的三重循环，因此您的程序将具有**三次复杂度**。增长的功能顺序在这里发挥作用。

让我们看看算法的时间复杂度有哪些可能性，你可以看到我上面提到的增长顺序：

*   ***常数时间***有一个增长的顺序`1`，例如：`a = b + c`。

*   ***对数时间***有一个增长顺序`LogN`，它通常发生在你将某物一分为二（二分搜索、树、甚至循环）或以相同方式相乘时。

*   ***线性***的，增长的顺序是`N`，例如

    ```
    int p = 0;
    for (int i = 1; i < N; i++)
      p = p + 2; 
    ```

*   ***线性***的，增长的顺序是`n*logN`，通常出现在分而治之的算法中。

*   ***Cubic***， order of growth`N^3`，经典示例是一个三重循环，您可以在其中检查所有三元组：

    ```
    int x = 0;
    for (int i = 0; i < N; i++)
       for (int j = 0; j < N; j++)
          for (int k = 0; k < N; k++)
              x = x + 2 
    ```

*   ***Exponential***， order of growth`2^N`，通常发生在您进行详尽搜索时，例如检查某些集合的子集。

* * *

## 回答 #7

> 赞同：40
> 
> 时间：2015-10-14T04:12:28.223

松散地说，时间复杂度是一种总结算法的操作数量或运行时间如何随着输入大小的增加而增长的方式。

就像生活中的大多数事情一样，鸡尾酒会可以帮助我们理解。

**上）**

当你到达派对时，你必须和每个人握手（对每个项目进行操作）。随着参加者人数的`N`增加，您与每个人握手所需的时间/工作量将增加为`O(N)`.

**为什么`O(N)`而不是`cN`？**

与人握手所需的时间有所不同。您可以将其平均并以常量捕获`c`。但这里的基本操作——与所有人握手——总是与 成正比`O(N)`，不管是什么`c`。在讨论是否应该参加鸡尾酒会时，我们通常更感兴趣的是我们必须与每个人会面这一事实，而不是那些会议的细节。

**O(N^2)**

鸡尾酒会的主人想让你玩一个愚蠢的游戏，每个人都会遇到其他人。因此，您必须会见`N-1`其他人，并且因为下一个人已经遇到过您，所以他们必须会见其他`N-2`人，依此类推。这个系列的总和是`x^2/2+x/2`。随着参加者人数的增加，这个词变得*越来越*`x^2`大，所以我们只是放弃其他所有内容。

 ***O(N^3)**

您必须会见其他所有人，并且在每次会议期间，您必须谈论房间里的其他所有人。

**O(1)**

主持人想要宣布一些事情。他们敲响酒杯，大声说话。每个人都听到他们的声音。事实证明，无论有多少参加者，此操作总是花费相同的时间。

**O(log N)**

主持人按字母顺序将每个人都安排在了餐桌上。丹在哪里？你推断他一定介于亚当和曼迪之间（当然不是在曼迪和扎克之间！）。鉴于此，他在乔治和曼迪之间吗？不，他必须在亚当和弗雷德之间，在辛迪和弗雷德之间。依此类推……我们可以通过查看一半的集合然后查看该集合的一半来有效地定位 Dan。最终，我们看**O(log_2 N)**个个体。

**O(N log N)**

您可以使用上面的算法找到在桌子上坐下的位置。如果有大量的人来到餐桌旁，一次一个，并且所有人都这样做，那将花费**O(N log N)**时间。事实证明，当必须对任何项目集合进行比较时，对它们进行排序需要多长时间。

**最好/最坏情况**

你到了派对，需要找到 Inigo - 需要多长时间？这取决于你什么时候到达。如果每个人都围着你转，你就遇到了最坏的情况：这需要`O(N)`时间。但是，如果每个人都坐在桌旁，那只需要`O(log N)`时间。或者，也许您可​​以利用主持人的酒杯喊叫能力，而这只需要`O(1)`时间。

假设主机不可用，我们可以说 Inigo-finding 算法的下限为`O(log N)`，上限为`O(N)`，具体取决于您到达时聚会的状态。

**空间与通讯**

相同的想法可以应用于理解算法如何使用空间或通信。

Knuth 写了一篇关于前者的好论文，题为[“歌曲的复杂性”](https://www.cs.utexas.edu/users/arvindn/misc/knuth_song_complexity.pdf)。

> 定理 2：存在任意长的复杂度 O(1) 的歌曲。
> 
> 证明：（由于凯西和阳光乐队）。考虑由 (15) 定义的歌曲 Sk，但是

```
V_k = 'That's the way,' U 'I like it, ' U
U   = 'uh huh,' 'uh huh' 
```

> 对于所有 k。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-11-04T09:20:14.063

我知道这个问题可以追溯到很久以前，这里有一些很好的答案，但我想再分享一点给那些在这篇文章中会遇到数学问题的人。在研究复杂性时，[Master theorem](https://en.wikipedia.org/wiki/Master_theorem)是另一个有用的知识。我没有在其他答案中看到它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-11T20:18:39.540

O(n) 是用于编写算法时间复杂度的大 O 表示法。当您将算法中的执行次数相加时，您将在结果中得到一个表达式，如 2N+2，在此表达式中，N 是主导项（如果其值增加或减少，则对表达式影响最大的项）。现在 O(N) 是时间复杂度，而 N 是主导项。例子

```
For i= 1 to n;
  j= 0;
while(j<=n);
  j=j+1; 
```

这里内循环的总执行次数是n+1，外循环的总执行次数是n(n+1)/2，所以整个算法的总执行次数是n+1+n(n+1/2 ) = (n^2+3n)/2。这里 n^2 是主导项，所以这个算法的时间复杂度是 O(n^2)***

# javascript - 处置图像对象

> ID：11032018
> 
> 赞同：10
> 
> 时间：2012-06-14T11:21:43.150
> 
> 标签：javascript, image

在 javascript 中创建新的 Image 元素时，Google Chrome 的内存工具（开发者工具 > 时间线 > 内存）自然会将其视为新的 DOM 元素。

就我而言，我最终得到了 1500 多个 DOM 元素，我希望摆脱它们。当我准备好创建所有对象时，我试图将所有对象保存在一个数组中并在一个循环中删除它们，导致以下错误：

`Uncaught TypeError: Cannot call method 'removeChild' of null`

这表明 Image 对象没有出现在实际的 DOM 中。

```
var images = [];
var i, image;

for( i = 0; i < urls.length; i++ ) {
    image = new Image();
    image.src = urls[i];
}

// other stuff happens

for( i = 0; i < images.length; i++ ) {
    // apparently this doesn't work because I'm not adding the image to my DOM
    // images[i].parentNode.removeChild( images[i] );

    // delete images
} 
```

**有没有办法删除/删除/取消设置/处置图像对象？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T11:42:33.780

设置`images = null`将删除您在代码中对对象的引用。然而，为了实现它的`load`事件，Chrome 必须有它自己的对该对象的内部引用。

也就是说，你可以有这样的代码：

```
for( i = 0; i < urls.length; i++ ) { 
    image = new Image(); 
    image.src = urls[i]; 
    image.onload = function(){alert('Test');};
    image = null;
} 
```

这样，即使您没有对这些对象的引用，您仍然会收到很多“测试”警报。

因此，我的*猜测*是它是 Chrome 中的错误，而不是您的代码中的错误。

更新：查看 Chromium 源代码证明了这一点（我的意思是对该文件第 67-71 行的评论，尤其是 FIXME 注释[http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit /Source/WebCore/bindings/v8/custom/V8HTMLImageElementConstructor.cpp](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/bindings/v8/custom/V8HTMLImageElementConstructor.cpp)）：

> ```
> // Make sure the document is added to the DOM Node map. Otherwise, the HTMLImageElement instance
> // may end up being the only node in the map and get garbage-ccollected prematurely.
> // FIXME: The correct way to do this would be to make HTMLImageElement derive from
> // ActiveDOMObject and use its interface to keep its wrapper alive. Then we would
> // remove this code and the special case in isObservableThroughDOM. 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T11:25:04.710

如果您没有将它们添加到 DOM 中（例如使用`appendChild`到父级），那么`removeChild`就没用了。Image 对象仅在内存中。

并且要处理内存中的项目，您只需要删除对这些对象的引用（例如将引用变量设置为 null），然后垃圾收集会完成剩下的工作。如果您不能将它们全部清空，它们将不会被 GC 处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-10T07:56:45.947

摆脱 chrome 和特别是 IE 和 EDGE 的“天真主义者”所描述的错误。您可以将图像源更改为空，使其占用零内存。

```
image.src = '';
image = null; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T11:25:29.743

AFAIK，分配`null`应该清理它：`images[i] = null`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T11:25:16.317

我认为唯一的方法是这样做：

```
for( i = 0; i < images.length; i++ ) 
  images[i] = null;
}

// or just 
images = null; 
```

# algorithm - Monte Carlo Tree Search or other algorithms for a stochastic card game?

> ID：11032022
> 
> 赞同：7
> 
> 时间：2012-06-14T11:22:03.400
> 
> 标签：algorithm, artificial-intelligence

I am currently working on an implementation of a 2 player trick-and-draw card game, similar to 66 or Schnapsen. Basically you need to gather points by winning tricks and while there are cards in the pack, both players draw a card after each round.

I am at the point of programming a good AI for the game that does not cheat, but really calculates the best moves by using only the information it has at the given game state. I am stuck deciding which algorithm or logic would be the best to use. I decided against algorithms like Alpha-Beta pruning because there are too much hidden information especially at the beginning of the game. I read many interesting things about the Monte Carlo Tree Search and the related UCT search, but because the game has stochastic elements, the tree needed to be searched would grow huge in a short time.

Which algorithm or approach would be the best to use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:39:40.180

[这](http://www.informatik.uni-freiburg.de/~ki/teaching/ws0910/gamesem/bjarnason-et-al-2009.pdf)是 UCT 在 Klondike Solitaire 中的应用的链接。MCTS 非常适合该问题，因为它可以很好地处理随机性。

您可以查看论文中描述的稀疏方法，以了解限制树宽度的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:03:13.200

MCTS 肯定会更好。无论您选择哪一个，您都必须处理不完整的信息，这是这里的核心问题。

# android - 传递 ContentResolver 有风险吗？

> ID：11032024
> 
> 赞同：3
> 
> 时间：2012-06-14T11:22:13.790
> 
> 标签：android

我的应用程序有 3 个元素： 1\. UI（活动） 2\. 模型（类） 3\. 内容提供者 - 提供来自数据库的数据

为了让模型类从内容提供者访问数据，我需要 UI（活动）向它传递 ContentResolver - 这样我可以在模型类中创建一个游标：

```
 cursor = mContentResolver.query(
            MyobiliseData.CONTENT_URI_RUNSUMMARY,   // The content URI of the words table
            projection,                        // The columns to return for each row
            selectionClause,                    // Selection criteria
            selectionArgs,                     // Selection criteria
            null);                        // The sort order for the returned rows 
```

这是可接受的做法，还是有更好的方法从非活动类调用内容提供者？

谢谢

安东

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:10:14.630

一种常见的模式是从 Activity 向其他类提供**上下文**，然后使用上下文通过上下文 getter 方法获取各种对象，包括**getContentResolver()**。例如，请参阅[如何在 android 中调用 getContentResolver？](https://stackoverflow.com/questions/4895116/how-can-i-call-getcontentresolver-in-android)

# node.js - How to improve this code with memory leak in nodejs with zlib?

> ID：11032026
> 
> 赞同：1
> 
> 时间：2012-06-14T11:22:22.697
> 
> 标签：node.js, memory, memory-leaks, zlib

I have problem with memory leak in nodejs when I added gzip support. I have wrote some code for tests. In code below I use zlib and I don't know why I have memory leak. How I can improve this code to avoid memory leaking ? Anybody can help me ?

```
var 
zlib = require('zlib'),
crypto = require('crypto');

var cacheList = {
  article: {},
};

  var timeoutId1, timeoutId2

  console.log('process.pid: '+ process.pid);

  clean = function()
  {
    var time = new Date().getTime();
timeoutId1 = setTimeout(function() { clean() }, 5000);

var countDeleted = 0;

for (id in cacheList.article) {
  if (cacheList.article[id] && cacheList.article[id].timeExpire + 5000 < time) {
    delete cacheList.article[id];
countDeleted++;
  }
}

console.log('deleted: ' + countDeleted); 
```

}

```
 run = function()
  {
var time = new Date().getTime();
timeoutId1 = setTimeout(function() { run() }, 5);

var md5 = crypto.createHash('md5');
md5.update('' + time);
var id = md5.digest('hex');

//console.log('id: ' + id);
var text = id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id +id+id+id+id+id+id+id+id;

zlib.gzip(text, function(err, result) {
  if (!err) {
      cacheList.article[id] = {
      timeExpire: time + 10000,
      data: text,
      datagzip: result,
    };
  }
}); 
```

}

```
 timeoutId1 = setTimeout(function() { run() }, 3000);
  timeoutId2 = setTimeout(function() { clean() }, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:21:39.317

将最后两行更改为

```
timeoutId1 = run()
timeoutId2 = clean() 
```

由于您已经拥有调用 setTimeout 的函数，通过使用另一个 setTimeout，您是在告诉它运行该函数的另一个实例（它反过来调用自己，所以现在您让它运行两次，依此类推）。

# iphone - 无法使用 NSFileHandle 编辑文件的第一个字节

> ID：11032027
> 
> 赞同：1
> 
> 时间：2012-06-14T11:22:24.690
> 
> 标签：iphone, xcode, nsfilemanager, nsfilehandle

在我的应用程序中，我正在使用 NSFileHandle 编辑一些文件，但它没有被编辑。

下面是代码：带有注释和日志输出

```
 //Initialize file manager
    NSFileManager *filemgr;
    filemgr = [NSFileManager defaultManager];

    //Initialize file handle
    NSFileHandle *fileHandle = [NSFileHandle fileHandleForReadingAtPath:filePath];

    //Check if file is writable
    if ([filemgr isWritableFileAtPath:filePath]  == YES)
        NSLog (@"File is writable");
    else
        NSLog (@"File is read only");

    //Read 1st byte of file
    NSData *decryptData = [fileHandle readDataOfLength:1];

    //Print first byte & length
    NSLog(@"data1: %d %@",[decryptData length],decryptData);   //data2: 1 <37>

    //Replace 1st byte
    NSData *zeroData = 0;
    [fileHandle writeData:zeroData];

    //Read 1st byte to check
    decryptData = [fileHandle readDataOfLength:1];

    //Print first byte
    NSLog(@"data2: %d %@",[decryptData length],decryptData);  //data2: 1 <00>

    NSURL *fileUrl=[NSURL fileURLWithPath:filePath];
    NSLog(@"fileUrl:%@",fileUrl);

    [fileHandle closeFile]; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:35:09.960

如果要使用写入`NSFileHandle`，则需要打开文件进行写入和读取：

```
NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:filePath]; 
```

如果您不确定指定路径中的文件是否可写，则应在打开它之前检查适当的权限，如果权限不足以满足您的需要，则向用户显示错误。

此外，要写入数据，您需要创建一个`NSData`. 代码行

```
NSData *zeroData = 0; 
```

正在创建一个`nil`对象，而不是一个包含零字节的对象。我想你想要

```
int8_t zero = 0;
NSData *zeroData = [NSData dataWithBytes:&zero length:1]; 
```

# android - How to get Contact Information in Android?

> ID：11032030
> 
> 赞同：0
> 
> 时间：2012-06-14T11:22:30.703
> 
> 标签：android, contactscontract

I want to get Contact Image, Name, Number from my mobile using android. im using ContactsContract to fetch these information. but i can't. can anyone know the exact tutorial for learning. i want to list these info in a custom listview. Thanks in Advance. i hope your valuable guiding will help me.

PS: In the DB i have my friends number. i want to synchronize the phone contact and the DB contact using the matched phone no. and i need to display all the matched contacts in the listview. the listview have imageView, name, number..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:26:31.323

```
setReminder.numbers.clear();
    Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    ((Activity) mcontext).startActivityForResult(intent, 1); 
```

并在活动结果上执行此操作

```
if (requestCode == 1 && resultCode == Activity.RESULT_OK)
  {         
        getContactInfo(intent);         
      }
} 

protected void getContactInfo(Intent intent)
{
    String phoneNumber = "";
    //String email="";

   Cursor cursor =  ((Activity) mcontext).managedQuery(intent.getData(), null, null, null, null);      
   while (cursor.moveToNext()) 
   {           
           String contactId = cursor.getString(cursor.getColumnIndex(BaseColumns._ID));

           String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

       if ( hasPhone.equalsIgnoreCase("1"))
           hasPhone = "true";
       else
           hasPhone = "false" ;

       if (Boolean.parseBoolean(hasPhone)) 
       {
        Cursor phones = ((Activity) mcontext).getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,null, null);
        //Cursor Email = ((Activity) mcontext).getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,ContactsContract.CommonDataKinds.Email.CONTACT_ID +" = "+ contactId,null, null);
        while (phones.moveToNext()) 
        {
          phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
          numbers.add(phoneNumber);
        }

        phones.close();
        Cursor emailCur = ((Activity) mcontext).getContentResolver().query( 
                ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
                null,
                ContactsContract.CommonDataKinds.Email.CONTACT_ID +" = "+ contactId, 
                null, null); 

            while (emailCur.moveToNext()) { 
                // This would allow you get several email addresses
                    // if the email addresses were stored in an array
                 email = emailCur.getString(
                              emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                String emailType = emailCur.getString(
                              emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 
            } 
            emailCur.close();

            if(email==null)
            {
                email="";
            }
       }

      }          
   if(phoneNumber != null && phoneNumber.length() > 0){

       chooseContactArray.clear();
       for(int i=0;i<numbers.size();i++)
       {
           chooseContactArray.add(numbers.get(i));
       }
       adapter.notifyDataSetChanged();
   }
   cursor.close();

} 
```

# c# - How to use timer control in asp.net?

> ID：11032034
> 
> 赞同：2
> 
> 时间：2012-06-14T11:23:00.607
> 
> 标签：c#, asp.net, timer

I am creating an online exam website and I want to set a 30 minute timer for 30 questions... Can anyone tell me how to use the timer control in asp.net or any other easy method?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-09T18:06:07.617

```
<asp:Timer ID="Timer1" runat="server" Interval="1000" ontick="Timer1_Tick">
    </asp:Timer> // For one minute
<asp:UpdatePanel ID="UpdatePanel1"
    runat="server">
    <ContentTemplate>
        <asp:Label ID="Label1" runat="server"></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick">
        </asp:AsyncPostBackTrigger>
    </Triggers>
</asp:UpdatePanel>

protected void Timer1_Tick(object sender, EventArgs e)
{
    // Label1.Text = DateTime.Now.Second.ToString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:55:38.110

一种可能的方法是：

*   创建一个 UpdatePanel，您将在其中插入每个问题和可能的答案
*   在 UpdatePanel 中，您可以插入一个代表问题的 UserControl（例如，此 UserControl 将包含一个带有问题的标签和一些带有答案标签的单选按钮或复选框）
*   在 UpdatePanel 中，您可以像在 Msdn [http://msdn.microsoft.com/en-us/library/bb398865.aspx上的此示例中一样使用 Timer 控件](http://msdn.microsoft.com/en-us/library/bb398865.aspx) `<asp:Timer id="Timer1" runat="server" Interval="120000" OnTick="Timer1_Tick"> </asp:Timer>`
*   Timer 控件的 OnTick 事件中定义的函数将在每个时间间隔到期后在服务器端触发；在那里您将使用下一个问题的值加载 UserControl 并检查测试是否已完成或总时间是否已过（例如，通过将总已用时间求和到变量中）

如果需要，您还可以在页面中显示倒计时并使用 JavaScript 对其进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:01:29.840

...或者您可以使用 JQuery。设置一个计时器（[http://code.google.com/p/jquery-timer/](http://code.google.com/p/jquery-timer/)），然后在最后触发一个计时动作。可以利用 Ajax 来尝试答案等 - 但这会将其他所有内容都保留在前端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-11T07:10:09.570

在更新面板中添加定时器控件是一种可以避免页面闪烁或页面总刷新的方法，用户可以获得流畅的体验。但是定时器控制效率低下，因为重复的请求被发送到服务器，这可能导致过载和不必要的资源浪费。AJAX 将是一个更好的选择，或者任何客户端 javascript 可能会更好。轮询是另一种有效的方法。

# c# - 获取推文的作者姓名

> ID：11032035
> 
> 赞同：-2
> 
> 时间：2012-06-14T11:23:00.683
> 
> 标签：c#, wpf, twitterizer

我想显示一条推文，如 [url=https://dev.twitter.com/terms/display-guidelines]Display Guideline[/url] 中所示。为此，我需要获取推文作者的姓名。我在 TwitterSearchResult 中没有此信息：

```
 TwitterResponse<TwitterSearchResultCollection> searchResult = TwitterSearch.Search(hashtag, options);
 _tweets = searchResult.ResponseObject; 
```

所以我尝试了：

```
OptionalProperties option = new OptionalProperties();
TwitterResponse<TwitterUser> user = TwitterUser.Show(_tweets[0].FromUserScreenName, option ); 
```

但我有一个错误：

> 超过限速。客户每小时不得超过 150 个请求。

所以我尝试使用令牌，没有选项，使用 UserID 等......但没有成功：/

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:36:03.313

> 超过限速。客户每小时不得超过 150 个请求。

表示从您的 IP 地址[对 twitter 的调用过多。](https://dev.twitter.com/docs/rate-limiting)

你必须等一下。

# c++ - Can't Get Visual C++ 6.0 Dialog Edit Control to Accept Unicode / Can't Get EDITTEXT Resource to Accept Unicode

> ID：11032036
> 
> 赞同：2
> 
> 时间：2012-06-14T11:23:00.887
> 
> 标签：c++, windows, visual-c++, unicode

I'm using Visual C++ 6.0 in Windows 7\. I go to File->New. I choose Win32 application and name it HelloWorld. "Win32 Appliction Step 1 of 1" comes up. I choose "A Typical Hello World Application". VC creates a simple Hello World App.

I select the file HelloWorld.cpp. I paste in the following defines at the top of the HelloWorld.cpp file:

```
#define UNICODE
#define _UNICODE 
```

I then double click on HelloWorld.rc. I open up the "Dialog" item. Under it is IDD_ABOUTBOX. I double click that. I then add an EDITTEXT control to the dialog window. I hit ctrl-F5 to run the program.

I choose about and the about dialog is displayed along with EDITTEXT control. I then goto to the charmap.exe application and select a japanese hiragana character from the Meiryo font. I copy it to the clipboard.

I then paste it into the EDITTEXT control. It shows up as a "?" question mark.

I don't understand what to do. How can I get dialog edit boxes to accept Unicode?

Thanks in advance, Ryan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:54:31.243

不要在源文件中定义 UNICODE 和 _UNICODE。您必须在项目级别定义它。VS 中的表单菜单选择项目和设置（Alt-7）。

在对话框中，选择 C++ 选项卡，然后从 Category 下拉框中选择 Preprocessor。在下面的编辑框中输入以逗号分隔的 UNICODE 和 _UNICODE。

现在，编辑控件原样使用没有扩展字符集的系统字体。您必须更改字体以进行编辑控制。

在对话框 WM_INITDIALOG 处理程序中执行以下操作：

```
case WM_INITDIALOG:
    {
        LOGFONT lf;
        ::GetObject((HFONT)GetStockObject(DEFAULT_GUI_FONT), sizeof(lf), &lf);
        HWND hEdit = GetDlgItem(hDlg, IDC_EDIT1);
        HDC hDC = GetDC(hEdit);

        _tcscpy(lf.lfFaceName, _T("Arial"));
        lf.lfHeight = -MulDiv(10, GetDeviceCaps(hDC, LOGPIXELSY), 72);

        //This creates the new font for the edit control
        HFONT hFont = CreateFontIndirect(&lf);

        //This sets the new font for the edit control
        SendMessage(hEdit, WM_SETFONT, (WPARAM)hFont, FALSE);
    }
    return TRUE; 
```

请记住，并非所有字体类型都有扩展字符集。我认为在代码片段中将其设置为 Arial 应该可以。

# java - 关联引用未映射的类休眠

> ID：11032038
> 
> 赞同：1
> 
> 时间：2012-06-14T11:23:07.093
> 
> 标签：java, hibernate

附属类的配置是：

```
<class name="AffiliatesDO" table="AFFILIATES">
    <id name="affiliateId" column="affiliate_id" type="java.lang.String">
        <generator class="assigned" />
    </id>
    <property name="customerId" column="customer_id" type="int" />
    <property name="affiliateType" column="affiliate_type" type="java.lang.String" />
    <property name="site" column="site" type="java.lang.String" />
    <property name="status" column="status" type="java.lang.String" />
    <property name="createdBy" column="created_by" type="java.lang.String" />
    <property name="creationDate" column="creation_date" type="java.util.Date" />
    <property name="lastUpdatedBy" column="last_updated_by" type="java.lang.String" />
    <property name="lastUpdated" column="last_updated" type="java.util.Date" />
      <set name="address" lazy="true" inverse="true" order-by="address_id asc">
        <key column="address_id"/>
        <one-to-many class="AddressDO"/>
    </set>
</class> 
```

地址类的配置是

```
<class name="Address"
    table="Address">
    <id name="addressId" column="address_id"
        type="java.lang.String">
        <generator class="assigned" />
    </id>

    <property name="name" column="name" type="java.lang.String" />

    <property name="address1" column="address1" type="java.lang.String" />

    <property name="phone" column="phone" type="java.lang.String" />

    <property name="landLineNumber" column="land_line_number" type="java.lang.String" />

    <property name="faxNumber" column="fax_number" type="java.lang.String" />

</class> 
```

我收到以下错误

```
org.hibernate.MappingException: Association references unmapped class: com.infibeam.customerservice.dbObjects.AddressDO
at org.hibernate.cfg.HbmBinder.bindCollectionSecondPass(HbmBinder.java:2370)
at org.hibernate.cfg.HbmBinder$CollectionSecondPass.secondPass(HbmBinder.java:2652)
at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:43)
at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1054)
at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:296)
at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1039)
at org.codehaus.mojo.hibernate3.configuration.AbstractComponentConfiguration.getConfiguration(AbstractComponentConfiguration.java:38)
at org.codehaus.mojo.hibernate3.HibernateExporterMojo.configureExporter(HibernateExporterMojo.java:186)
at org.codehaus.mojo.hibernate3.exporter.Hbm2JavaGeneratorMojo.configureExporter(Hbm2JavaGeneratorMojo.java:69) 
```

请告诉我我犯的错误.. 我想使用一对多关系 AffiliateDO->AddressDO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:00:37.813

看起来您的父类映射指的是 AddressDO，但随后的子映射指的是 Address（没有“DO”）...如果我不得不猜测，您应该将第二个映射更改为 AddressDO（反之亦然）。无论如何，对我来说似乎是一个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:05:13.020

考虑到 Do 是 Addrees xml 中的拼写错误，地址映射似乎不正确，必须 address_id 必须是多对一的，当前它是生成新的。

# fortran - No virtual destructors in fortran 2003?

> ID：11032041
> 
> 赞同：2
> 
> 时间：2012-06-14T11:23:11.057
> 
> 标签：fortran, fortran2003

Do I understand correctly that there are no virtual destructors in F2k3 ?

```
stefanos-imac:oop borini$ cat a.f90
module AModule
   type :: AType
      contains
      final :: A_dtor
   end type
contains
   subroutine A_dtor(self)
      type(AType), intent(inout) :: self

      print *, "A_dtor"

   end subroutine
end

stefanos-imac:oop borini$ cat b.f90 
module BModule
   use AModule
   type,extends(AType) :: BType
      contains
      final :: B_dtor
   end type
contains
   subroutine B_dtor(self)
      type(BType), intent(inout) :: self

      print *, "B_dtor"

   end subroutine
end

stefanos-imac:oop borini$ cat x.f90 
program x
   use AModule
   use BModule

   class (AType), pointer :: baseptr
   type(BType), pointer :: derivedptr

   allocate(derivedptr)
   baseptr => derivedptr
   deallocate(baseptr)

end program

stefanos-imac:oop borini$ ./a.out 
 A_dtor
forrtl: severe (173): A pointer passed to DEALLOCATE points to an array that cannot be deallocated
Image              PC                Routine            Line        Source             
a.out              0000000108A731F4  Unknown               Unknown  Unknown
a.out              0000000108A7198E  Unknown               Unknown  Unknown
a.out              0000000108A4D791  Unknown               Unknown  Unknown
a.out              0000000108A2283E  Unknown               Unknown  Unknown
a.out              0000000108A3B930  Unknown               Unknown  Unknown
a.out              0000000108A1EF10  Unknown               Unknown  Unknown
a.out              0000000108A0A104  Unknown               Unknown  Unknown
a.out              0000000108A09F0C  Unknown               Unknown  Unknown
a.out              0000000108A09EC4  Unknown               Unknown  Unknown 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:48:14.087

我不太确定您使用的 C++ 或 Java 术语（虚拟）。在谈到 Fortran 时，我更喜欢使用 Fortran 术语。在 Fortran 术语中，终结过程不会被继承，也不能被覆盖。应该执行新类型和扩展类型的终结过程。

据我了解这个问题，即使我没有一个很好的支持它的编译器，你的程序似乎是正确的。我希望输出：

```
B_dtor
A_dtor 
```

不要假设 Fortran 2003 和 2008 标准形成了某些特定的编译器，因为目前还没有真正的 Fortran 2003 编译器，尽管其中有几个假装是。英特尔 Fortran AFAIK 并未声称完全符合 Fortran 2003。

# c# - C# generic constraint not working as expected

> ID：11032044
> 
> 赞同：6
> 
> 时间：2012-06-14T11:23:18.047
> 
> 标签：c#, generics

I have a situation where I need to dynamically build up a list of filters to apply to a list of objects. Those objects can be anything that implements an interface which contains all of the properties I need to filter on.

```
public interface IStuff
{
    bool SuitableForSomething { get; set; }
    bool SuitableForSomethingElse { get; set; }
}

public class SomeStuff : IStuff
{
    ...
}

public class SomeOtherStuff : IStuff
{
    ...
} 
```

I have a list of criteria defined like so ...

```
public List<Expression<Func<IStuff, bool>>> Criteria { get; private set; } 
```

and add criteria like so ...

```
Criteria.Add(x => x.SuitableForSomething);
Criteria.Add(x => x.SuitableForSomethingElse); 
```

I then apply the criteria to my query like so ...

```
var stuff= _stuffCache
    .GetAll()
    .AsQueryable()
    .ApplyCriteria(Criteria); 
```

which uses the following extension method ...

```
public static IQueryable<T> ApplyCriteria<T>(this IQueryable<T> stuff, List<Expression<Func<IStuff, bool>>> criteria) 
    where T : IStuff
{
    foreach (var expression in criteria)
    {
        stuff = Queryable.Where(stuff, expression);
    }
    return stuff;
} 
```

The compiler is telling me ...

```
cannot convert from
    'System.Linq.Expressions.Expression<System.Func<IStuff,bool>>'
to
    'System.Linq.Expressions.Expression<System.Func<T,int,bool>>' 
```

When I hover over the red line under the error in the IDE it's saying it cannot resolve method between

```
 IQueryable<IStuff> Where<IStuff>(this IQueryable<IStuff>, Expression<Func<IStuff, bool>>) in class Queryable
and
    IQueryable<T> Where<T>(this IQueryable<T>, Expression<Func<T,int,bool>>) in class Queryable 
```

If I try casting the expression to `Expression<Func<T, bool>>`, which ought to work as T is constrained to implement the IStuff interface. I get

```
Cannot cast expression of type 'Expression<Func<IStuff, bool>>' to type 'Expression<Func<T, bool>>' 
```

**EDIT** Thanks to [Raphaël](https://stackoverflow.com/users/961526/raphael-althaus)'s answer I fixed the extension method and eventually found the real problem I had, which was a casting problem when I was calling the code. Easily fixed by adding a `.Cast<SomeStuff>()` after the `ApplyCriteria` call.

*Before*

```
var stuff= _stuffCache
    .GetAll()
    .AsQueryable()
    .ApplyCriteria(Criteria); 
```

*After*

```
var stuff= _stuffCache
    .GetAll()
    .AsQueryable()
    .ApplyCriteria(Criteria)
    .Cast<SomeStuff>(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T11:29:37.593

将第二个参数类型更改为`List<Expression<Func<T,bool>>>`（T 而不是 IStuff）

```
public static IQueryable<T> ApplyCriteria<T>(this IQueryable<T> stuff, List<Expression<Func<T, bool>>> criteria) 
    where T : IStuff
{
    foreach (var expression in criteria)
    {
        stuff = Queryable.Where(stuff, expression);
        //or stuff = stuff.Where(expression), as Where is an Extension method;
    }
    return stuff;
} 
```

并且您的方法可以（thx resharper）重写为

```
public static IQueryable<T> ApplyCriteria<T>(this IQueryable<T> stuff, List<Expression<Func<T, bool>>> criteria)
            where T : IStuff
        {
            return criteria.Aggregate(stuff, (current, expression) => current.Where(expression));
        } 
```

# ruby - Create a hash using two arrays

> ID：11032045
> 
> 赞同：2
> 
> 时间：2012-06-14T11:23:25.533
> 
> 标签：ruby, arrays, hash, merge

I need to create a new Hash object using two arrays.

But, the conditions is first array value should be a key value for the Hash and second array value should be the Hash value.

```
a = ["x", "y"] 
b = [2, 4] 
```

Result should be: `c = {"x" => 2, "y" => 4}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T11:25:58.297

```
irb(main):001:0> a = ["x", "y"]; b = [2, 4]
=> [2, 4]
irb(main):002:0> Hash[a.zip(b)]
=> {"x"=>2, "y"=>4} 
```

# php - getting values from a input element php and javascript mixture

> ID：11032050
> 
> 赞同：1
> 
> 时间：2012-06-14T11:24:01.900
> 
> 标签：php, javascript, html

hello everyone I am trying to make a script that steps through a list and `appends` a score to each record returned by the query. this code below is what's happening in PHP; a `input` is created where I store the number that's going to be processed in a `string`; below that there is a `span` element that displays the text `score` and another `span` that contains the actual score. Finally there's an `echo` that showcases the values generated which look like: `score_pad0, score_pad1, score_pad2`

```
echo "<input type='hidden' id='fetch_array' value=".$score_board." />";
echo "<span>score: </span><span id='score_pad$score_board'></span><br />";
echo "score_pad$score_board"; 
```

I want to grab the value from `fetch_array` in javascript. I use the following code for that
`var array_id = document.getElementById('fetch_array');` this however returns null when I run it. What am I doing wrong? I've tried to read it out by adding the .value extension. but it only crashed my javascript code.

the onload event is triggered by the a function

```
function initialize(numbers_rows)
{
for(var i=0; i < numbers_rows; i++)
{   
    var node=document.createElement("span");
    node.id="scoreLabel";
    document.getElementById("score_pad"+array_id).appendChild(node);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:58:19.040

您的 javascript 代码执行时，您的 DOM 可能还没有准备好。作为一个试验做`<body onload='myFunction()'>`和包裹你的`document.getElementById`内心`myFunction()`

如果您希望有多个处理 onload 事件的处理程序确实有效，则您需要将 `addEventListener` [DOC](https://developer.mozilla.org/en/DOM/element.addEventListener)用于非 IE 浏览器和`attachEvent`IE。

如果您可以使用 jQuery，那么将您的 javascript 代码包装起来

```
$().ready(function () {
 // Your Code Goes here &Will be executed after DOM is ready
}); 
```

检查[这个](https://stackoverflow.com/questions/9568006/prevent-window-onload-being-overridden-javascript)问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:31:32.890

利用

```
var array_id = document.getElementById('fetch_array').value; 
```

# javascript - Regular expression for determining time

> ID：11032052
> 
> 赞同：1
> 
> 时间：2012-06-14T11:24:11.027
> 
> 标签：javascript, regex

A time string containing minutes and/or seconds looks like this

29m 15s

The delimiter is a single space. The numbers have no leading zeroes. Either the minutes or the seconds part (but not both) can be omitted. If one of them is missing, so is the delimiter. That is, the following are all valid examples of such time strings:

1m
47s
1m 15s
12m 4s

I need to construct a regular expression that would return in $1 and $2 the number of minutes and seconds respectively. I'm writing a JavaScript program, but it's constructing the regular expression that I have a problem with - not the actual programming.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:28:56.643

这将仅匹配以分钟和秒为单位的数字：

```
/(?:(\d+)m)? ?(?:(\d+)s)?/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:27:50.387

如果我理解正确：

```
var s = '29m 15s';
var r = /(?:(\d+)m)?\s*(?:(\d+)s)?/;
var m = s.match(r); 
```

这将产生这样的数组：

```
[ '29m 15s', '29', '15', index: 0, input: '29m 15s' ] 
```

其中 m[1] 是分钟和 m[2] 秒（这是可选的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:40:18.070

这比其他答案更冗长，但确实强制空间。此外，它确保数字长度不超过 2 个字符。

```
/^(?:(\d{1,2})m) (?:(\d{1,2})s)$|^(\d{1,2})[ms]$/

"13m 20s" //match
"13m" //match
"20s" //match
"13m20s" //no match 
```

# javascript - activate readonly back after editing the input jquery

> ID：11032053
> 
> 赞同：1
> 
> 时间：2012-06-14T11:24:16.270
> 
> 标签：javascript, jquery

how can i activate the readonly back after finishing the edit of the input ?

this is my code for now :

```
<script type="text/javascript">
$(document).ready(function () {
         $("input").bind('click focus', function(){
                $('input').each(function(){
                        $(this).attr("readonly", false);
                        });
                });
         });
</script> 
```

an input like this :

```
<input type="text"  class="m" readonly="readonly" id="anchor_text"> 
```

i think something with focusout, i need to put readonly back when i go to the next input, so the edited input can't be change unless i hit again click on it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:26:23.273

尝试：

```
$("input").bind('click focus', function(){
     $(this).attr("readonly", false);
  }).bind('blur', function(){
     $(this).attr("readonly", true);
 });​ 
```

**演示**：http: [//jsfiddle.net/DkCvu/1/](http://jsfiddle.net/DkCvu/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:08:27.587

对不起，但我很难理解这一点。如果我做对了，您希望输入字段在用户单击或选择之前*不可*编辑（这基本上是输入字段的工作方式：除非您选择它们​​，否则您无法更改它们的值）。在这些输入字段失去焦点后，它们应该回到只读状态。
如果是这种情况，那么您将事情复杂化了。不过，这不关我的事。IMO 完成这项工作的最佳方式是委托活动。

因此，我在纯 JS 和 jQuery 上整理了一些小提琴。两者都远非完美，但应该可以帮助您。

常规 JS（[在这里提琴](http://jsfiddle.net/yHv8Z/)）：

```
var dv = document.getElementById('inputDiv');
if (!dv.addEventListener)
{
    dv.attachEvent('onfocusin',switchRO);
    dv.attachEvent('onfocusout',switchRO);
}
else
{
    dv.addEventListener('focus',switchRO,true);
    dv.addEventListener('blur',switchRO,true);
}

function switchRO (e)
{
    var self;
    e = e || window.event;
    self = e.target || e.srcElement;
    if (self.tagName.toLowerCase() === 'input')
    {
        switch (e.type)
        {
            case 'onfocusin':
            case 'focus':
                self.removeAttribute('readonly');
            break;
            default:
                self.setAttribute('readonly','readonly');
        }
    }
    return true;
} 
```

在 jQuery 中，这可能看起来像这样（jQuery with `.on`, [jsfiddle here](http://jsfiddle.net/arN3b/)）：

```
$('#inputDiv input').on(
    {
        focus: function()
        {
            $(this).removeAttr('readonly');
        },
        blur: function()
        {
            $(this).attr('readonly','readonly');
        }
    }); 
```

​ 我同时发布了 jQuery 和纯 JS，因为我发现了解 jQuery 屏幕背后发生的事情既有信息又有教育意义。

# html - How to display items from top to bottom not from left to right?

> ID：11032054
> 
> 赞同：0
> 
> 时间：2012-06-14T11:24:20.757
> 
> 标签：html, html-lists

I have a list items which I am mapping on `<ul>` `<li>`.

```
<ul>
<li>Item1</li>
<li>Item2</li>
<li>Item3</li>
<li>Item4</li>
<li>Item5</li>
<li>Item6</li>
<li>Item7</li>
<li>Item8</li>
<li>Item9</li>
<li>Item10</li>
<li>Item11</li>
</ul> 
```

It display the items on the page like from left to right:

```
Item1 Item2 Item3 Item4 Item5
Item6 Item7 Item8 Item9 Item10
Item11 
```

I want to display them from top to bottom like

```
Item1 Item4 Item7 Item10
Item2 Item5 Item8 Item11
Item3 Item6 Item9 
```

How can I display them from top to bottom?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:26:20.113

```
int count = 0;
<ul style="display:inline" >
    if(count < items.length)
    {
        print("<li>");
        print("<ul>");
        for(int a = 1 ; count < items.length && a <= 3 , count++ , a++)
        {
               print("<li>" + items[count].Name + "</li>");
        }
        print("</ul>");
        print("</li>");
    }
</ul> 
```

愿此伪代码对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:46:44.890

你可以只用 HTML 和一些简单的 CSS 来做到这一点，但是你必须为你想要按列分隔的每组项目创建单独的列表：

```
<style>
ul {
    margin-top:0px;
    margin-left:0px;
    float:left;
}

</style>

<html>
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>
<ul>
  <li>Item 4</li>
  <li>Item 5</li>
  <li>Item 6</li>
</ul>
<ul>
  <li>Item 7</li>
  <li>Item 8</li>
  <li>Item 9</li>
</ul>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:51:24.400

除非您必须支持 IE < 10，否则请使用 CSS3 列：

[https://developer.mozilla.org/en/CSS3_Columns](https://developer.mozilla.org/en/CSS3_Columns)

# eclipse - 用于更好的 JSP 支持的 Eclipse 插件

> ID：11032056
> 
> 赞同：2
> 
> 时间：2012-06-14T11:24:45.423
> 
> 标签：eclipse, jsp, eclipse-plugin

我正在寻找一个 Eclipse 插件，它至少可以搜索包含当前 JSP 的位置（或在自定义“包含喜欢”标签或评论或任何内容中提到的路径）。类似于复制限定名称并使用正确的路径进行文件搜索。
*在 IDEA 中，它被称为分析反向依赖，它也适用于 JSP（至少对于标准包含）。*

更好的方法是显示包含当前 JSP 的所有 JSP，并将所有包含的 JSP 递归地显示为树，这样我就可以轻松地在其中导航。我不确定这是否可以使用（我认为它会很慢）。

如果我单击一个变量的名称，我想要的另一个功能会跳转到它的声明位置，即使它是在不同的 JSP 中声明的。
*IDEA 也可以做到这一点。*

对于第一个解决方案，我有一个简单的解决方案，但我无法为其添加更多功能，因为我不熟悉 eclipse 插件系统和 RCP，而且我真的没有时间学习它。
*请不要告诉我使用 IDEA，因为不幸的是，这不是工作中的一个选项。*

# php - CGridView 中另一个模型的 CButtonColumn

> ID：11032058
> 
> 赞同：4
> 
> 时间：2012-06-14T11:24:47.000
> 
> 标签：php, gridview, yii, cbuttoncolumn

我在页面中显示另一个相关模型的 CGridView `view&id=n`。必要的关系包含在模型文件中，一切正常。唯一的事情是，按钮`CButtonColumn`链接到正在打开页面的模型的适当操作，而我希望它们链接到相关模型的操作。

为了清楚地解释我的意思，这是我的代码。型号`view.php`：_`Order`

```
$dataProvider=new CActiveDataProvider('OrderContents', array(
'criteria'=>array(
    'condition'=>'order_id='.$model->id,
    'with'=>array('order'),
),
'pagination'=>array(
    'pageSize'=>20,
),
));

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'orders-contents-grid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
            'id',
            'comp_name',
            'quantity',
            'comment',
            array(
                    'class'=>'CButtonColumn',
            ),
    ),
)); 
```

因此，我希望按钮`CButtonColumn`链接到`OrderContents`模型的适当操作，而现在链接到`Order`模型的操作。有没有简单的方法来实现这一点？我检查了两者的 API，`CButtonColumn`看看`CGridView`我是否可以在那里获得任何灵感，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:11:58.753

实际上，如果您只想更改 url，您甚至不需要创建自定义按钮。查看`viewButtonUrl`,`updateButtonUrl`和 `deleteButtonUrl`CButtonColumn。

您将调整网址，如其他答案所示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T21:48:02.763

下面是使用`viewButtonUrl`CButtonColumn 的属性的示例。我发现弄清楚如何提供自定义 URL 并不简单，但经过一番争论，我最终得到了它。我想我会把它分享给可能看到这个线程的其他人。请注意，生成 URL 的 PHP 作为*字符串*传递。真的？：

```
 $this->widget('zii.widgets.grid.CGridView', array(
      'id'=>'artwork-grid',
      'dataProvider'=>$dataProvider,
      'columns'=>array(
        'id',
        'artwork_id',
        'description',
        array(
          'class'=>'CButtonColumn',
          'viewButtonUrl'=>'Yii::app()->createUrl(\'admin/artwork/\'. $data->id)',
          'updateButtonUrl'=>'Yii::app()->createUrl(\'admin/artwork/update/\'. $data->id)',
          'deleteButtonUrl'=>'Yii::app()->createUrl(\'admin/artwork/delete/\'. $data->id)',
        ),
      ),
    )); 
```

也许有更好的方法可以做到这一点。我很想看看！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:34:31.037

创建自定义按钮。

```
array(
       'class'=>'CButtonColumn',
       'buttons'=>array(
                        'myButton'=>array(
                             'label'=>'label of the button', //hover text
                             'imageUrl'=> 'link to an image',//icon of the button
                             'url'=>'Yii::app()->createUrl("controller/action")', //target of the button
                        ),
       'template'=>'{myButton}' //and others
     ), 
```

完整的参数列表可以在[这里](http://www.yiiframework.com/doc/api/1.1/CButtonColumn/#buttons-detail)找到。

# ios5 - viewdidload 上的 iOS5 方向未正确启动

> ID：11032059
> 
> 赞同：2
> 
> 时间：2012-06-14T11:25:00.107
> 
> 标签：ios5, uiinterfaceorientation, custom-view

我正在 iOS5 ipad 上编写应用程序。

当自定义视图完成加载时，在 viewDidLoad 上，我调用了一个函数，该函数为某些编程视图设置了一个方面，例如：

```
开关（界面方向）
            {
                案例 UIDeviceOrientationPortrait：
                {
                    // 使用 self.view.bounds.size.height 大小 3 个视图
                    // 和 self.view.bounds.size.width
                    休息;
                }
                案例 UIDeviceOrientationPortraitUpsideDown：
                {
                    // 使用 self.view.bounds.size.height 大小 3 个视图
                    // 和 self.view.bounds.size.width
                    休息;
                }
                案例 UIDeviceOrientationLandscapeLeft：
                {
                    // 使用 self.view.bounds.size.height 大小 3 个视图
                    // 和 self.view.bounds.size.width
                    休息;
                }
                案例 UIDeviceOrientationLandscapeRight：
                {
                    // 使用 self.view.bounds.size.height 大小 3 个视图
                    // 和 self.view.bounds.size.width
                    休息;
                }

                默认：
                    休息;
            }

```

我在 shouldAutorotateToInterfaceOrientation 上调用该函数：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    [自我设置方面：方面]；
    返回是；
}

```

当我旋转应用程序时，将视图放在正确的位置，但是，当启动应用程序时，如果我有横向的 ipad，它不能正常工作。它需要肖像的大小。如果我旋转设备，问题就解决了，但我不喜欢我的应用程序中的这个问题。

我不知道为什么会发生这种情况，我已经读过 viewdidload 上的调用方面为时过早。我必须在哪里称它为 setAspect 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:23:23.043

我今天也有同样的问题。

我最终不得不添加： self.view.autoresizesSubviews = YES; 到我的 viewDidLoad 方法，即使我在 Interface Builder 中检查了 autoresize。

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    self.view.autoresizesSubviews = YES;
} 
```

# android - 使用 Intent 无法正确获取详细信息？

> ID：11032060
> 
> 赞同：1
> 
> 时间：2012-06-14T11:25:03.927
> 
> 标签：android

使用此代码无法正确显示联系人的详细信息。我正在尝试使用**Intent访问****姓名、号码和电子邮件 ID**。名称和号码仅在我单击按钮时显示，而不是电子邮件。项目中没有错误。它工作得很好。我的 xml 文件只有一个按钮。

 **公共类 GetDetails 扩展 Activity {

```
/** Called when the activity is first created. */
private static final int CONTACT_PICKER_RESULT = 1001; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

       Button Btn = (Button)findViewById(R.id.getContacts);
        Btn.setOnClickListener(new View.OnClickListener() { 

            @Override 
            public void onClick(View v) {
                Intent i = new Intent(Intent.ACTION_PICK,ContactsContract.CommonDataKinds.Phone.CONTENT_URI);
                startActivityForResult(i, CONTACT_PICKER_RESULT);

            } 
        });
    }

    protected void onActivityResult(int reqCode, int resultCode, Intent data) { 
        super.onActivityResult(reqCode, resultCode, data);
        if(resultCode == RESULT_OK) {
            switch (reqCode) {
            case CONTACT_PICKER_RESULT:
                Cursor cursor = null;
                Cursor emails = null;
                String number = "";
                String emailID = "";
                try {

                    Uri result = data.getData();

                    //get the id from the uri
                    String id = result.getLastPathSegment();  

                    //query
                    cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone._ID + " = ? " , new String[] {id}, null);

                    int numberIdx = cursor.getColumnIndex(Phone.DATA);  
                     if(cursor.moveToFirst()) {
                        number = cursor.getString(numberIdx);

                    } else {

                    }
                      emails = getContentResolver().query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
                     int num = emails.getColumnIndex(Email.DATA);
                     if(emails.moveToFirst()) {
                         emailID = emails.getString(num);

                     } else { 

                     }

                } catch (Exception e) {
                    //failed
                } finally {
                    if (cursor!=null) {
                        cursor.close();
                    }

                }

            }
        }
    }
} 
```

如何解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:37:48.133

替换这一行：

```
emails = getContentResolver().query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null); 
```

用这条线：

```
emails = getContentResolver().query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = ?", new String[]{id}, null); 
```**

# c# - Ninject Func 说明

> ID：11032065
> 
> 赞同：0
> 
> 时间：2012-06-14T11:25:17.920
> 
> 标签：c#

有人可以帮我理解下面的陈述吗：

```
kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => ctx.Kernel) 
```

1.  上面的代码是做什么的？
2.  什么是功能？
3.  它是否试图将 IKernel 绑定和接口到某个东西......？这部分真的让我很困惑 `<Func<IKernel>>().ToMethod(ctx => () => ctx.Kernel`：）

我知道 kernel.bind 用于将接口绑定到具体类型，但不确定上述内容，因为没有给出具体类型。

它如何适应现实世界的场景。基本上为什么以及何时使用此功能

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:40:15.890

看起来像[ninject](http://www.ninject.org/)。

基本上它告诉`DIContainer`ninject 返回一个函数，该函数返回当前`Kernel`上下文`DIContainer`的`Func<IKernel>`

看看[这里](https://github.com/ninject/ninject/wiki/Dependency-Injection-With-Ninject)。

* * *

那么，什么是`Func`？

从[MSDN 的文档中](http://msdn.microsoft.com/en-us/library/bb534960.aspx)：

> 封装没有参数的方法，并返回由 TResult 参数指定的类型的值。

你应该看看[泛型](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)和[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。

# ruby - 西纳特拉设计模式

> ID：11032072
> 
> 赞同：0
> 
> 时间：2012-06-14T11:25:36.703
> 
> 标签：ruby, sinatra

我正在尝试实现类似 Sintra 的设计模式，但我无法理解当前的实现。

以这段代码为例。

```
get "/path1" do
  # Do stuff
end

get "/path2" do
  # Do stuff
end 
```

为什么第一次调用`get`不会阻塞主线程？

我正在尝试实现类似的东西。

```
work("some data 1")
work("some data 2")
work("some data 3") 
```

在这里，我希望它添加`"some data n"`到某种队列中，当没有更多`work`调用时，我希望它开始处理数据。我不想`App.start`在文件末尾调用。

# html - 在 iFrame 之外打开特定链接

> ID：11032074
> 
> 赞同：1
> 
> 时间：2012-06-14T11:25:47.110
> 
> 标签：html, css, iframe, html-target

我的网站有一个特定部分在 iFrame 中运行。现在在 iFrame 内运行的网页中，我指定`<base target="_parent" />`了所有链接，它们都在 iFrame 内打开（因此，如果我要链接到我的主网站主页，它将在 iframe 内打开）。现在我想要一个特定链接在 iframe 之外和普通父网页内部打开。

我如何强制该特定链接执行此操作？试过`target="_blank"`但仍然在 iFrame 内打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T05:56:27.253

如果您使用 JavaScript：

```
 parent.document.location = "http://www.google.com" 
```

如果您使用的是 HTML：

```
 <a href="http://www.google.com" target="_top">Google</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:29:27.760

不久前我遇到过这个解决方案，从那以后我就一直在使用它。使用 Javascript 函数强制链接：

```
<script type='text/javascript'>
 function newWindow(){
   top.location.href = 'http://yourURL';};
</script>
<a href="javascript: newWindow();">YourLink</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:29:40.340

将此添加到链接`onclick="window.location = 'url.html';"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T01:05:29.107

当我制作菜单时，我在 index.html 中制作了一个 iframe：

```
<div id="nav">
     <iframe frameBorder="0" height="35px" width="950px" src="navframe.html"></iframe>
</div> 
```

然后在 navframe.html 这些是我的按钮：

```
<button type="button" onClick="window.parent.location='index.html'">
Home</button>

<button type="button" onClick="window.parent.location='contact.html'">
Contact</button> 
```

倾向于工作

# ms-access - 如何删除段落中第二次出现的字符串

> ID：11032075
> 
> 赞同：-1
> 
> 时间：2012-06-14T11:25:56.967
> 
> 标签：ms-access, vba

我有这样的段落

> 我看到苏西坐在擦鞋店里。她坐在哪里发光，她坐在哪里发光。

所以我想删除多次出现的字符串。在上面的段落中，她，坐，在那里，闪耀的地方重复了不止一次。我想删除字符串需要这样的输出。

> 我看到苏西坐在擦鞋店里。她坐的地方闪闪发光，而且。

有没有人指导我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:42:00.173

在不考虑标点符号的情况下，您可以尝试以下几行：

```
s1 = "I saw Susie sitting in a shoe shine shop. " _
   & "Where she sits she shines, and where she shines she sits."
a1 = Split(s1, " ")

For i = 0 To UBound(a1)
    For j = i + 1 To UBound(a1)
        If a1(j) = a1(i) Then
            a1(j) = ""
        End If
    Next

Next

s2 = Trim(Join(a1, " ")) 
```

# java - FB 墙上的图片错误，来自 android 应用程序 (android FB sdk) 的提要帖子

> ID：11032079
> 
> 赞同：1
> 
> 时间：2012-06-14T11:26:08.463
> 
> 标签：java, android, facebook

我对 Feed 发布图片有疑问，我们决定更改我们的（android 本机）FB 应用程序图标，因此我们在 FB 应用程序设置中的所有位置都更改了此图标，并且我们更改了 ftp 服务器上的图片（我们在发布时引用来自应用程序的饲料）。

但是当我从应用程序发布提要时（在提要对话框中有正确的图片），在浏览器的墙上有错误（旧）图片，奇怪的是当我从武士刀（facebook android 应用程序）检查我的墙时，有一个正确的图片。图片尺寸为 512x512，为 png 格式。我说的是提要以外的图片（提要下不是小图标）

提要帖子示例：

```
...
Bundle parameters = new Bundle();
parameters.putString("picture", path_tou_our_icon_on_ftp_server_in_png_fromat);
parameters.putString("name", facebookMsgName);
parameters.putString("caption", facebookMsgCaption);
parameters.putString("description", facebook_message);
parameters.putString("link", "http://bit.ly/....");
facebook.dialog(mInstance, "feed", parameters,.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T12:57:55.230

添加`"?cache=" + System.currentTimeMillis();` 到您发布到 FB 的图片 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:09:41.957

这样做的原因是因为 facebook 可能正在缓存您的图像。有两种解决方案：

*   为新图像指定一个不同的名称并更新您的代码以使用它。这将迫使 facebook 使用新图像，但这意味着您必须通过 App Store 为您的应用获取更新，或者
*   等待 Facebook 更新其缓存并开始使用正确的新图像。

# c++ - 再次将指针传递给函数时遇到问题

> ID：11032082
> 
> 赞同：0
> 
> 时间：2012-06-14T11:26:33.273
> 
> 标签：c++, pointers, parameter-passing

试图将我的二叉搜索树**(BST)**的根传递给**UI**函数（我需要将其作为可修改变量传递，或者无论如何调用它）

**主文件**

```
cmd = UI.uiCmd()

BST<Matrix> *data = new BST<Matrix>;
Matrix mat;

UI.handle (cmd, mat, data); // passing command, class object, root of BST 
```

**标题**中的 UI 类具有：

```
private:
void handle (int, Matrix, BST<Matrix *>); 
```

并在**.cpp**文件中：

```
void ui::handle(int cmd, Matrix matrix, BST<Matrix *> data) 
```

我知道我在某个地方搞砸了，但我不能说在哪里，我对指针的把握很差

**我得到的错误：**`BST<Matrix>&*`它在函数询问时思考`BST<Matrix> *`

我现在不打算过多地使用 C++，因此不需要详细的答案（尽管表示赞赏）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:30:47.093

您的函数签名应如下所示

```
void handle (int, Matrix, BST<Matrix>*) 
```

代替

```
void handle (int, Matrix, BST<Matrix *>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:31:31.710

首先`BST<Matrix *>`不一样`BST<Matrix>*`。一个是指针容器，另一个是指向容器的指针。

其次，如果你想让函数修改一个参数，你可以通过引用传递它：

```
void ui::handle(int cmd, sMat matrix, BST<sMat>& data) 
```

并称它为

```
cmd = UI.uiCmd() 

BST<Matrix> data;
Matrix mat; 

UI.handle(cmd, mat, data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:31:04.910

您已创建

```
 BST<Matrix> *data = new BST<Matrix>; 
```

但该函数要求一个`BST<Matrix*>`参数。注意细微的差别

```
 BST<Matrix> * IS NOT same as  BST<Matrix*> 
```

# c++ - 这段代码安全吗，可以从构造函数 C++ 生成线程吗？

> ID：11032088
> 
> 赞同：0
> 
> 时间：2012-06-14T11:27:03.337
> 
> 标签：c++, multithreading, c++11, stdthread

我需要在 C++ 类中嵌入一个线程，这是一种活动对象，但不完全是。我正在从类的构造函数中生成线程，这样做可以吗？这种方法有什么问题吗？

```
#include <iostream>
#include <thread>
#include <unistd.h>

class xfer
{
        int i;
        std::shared_ptr<std::thread> thr;
        struct runnable {
                friend class xfer;
                void operator()(xfer *x) {
                        std::cerr<<"thread started, xfer.i:"<<x->i;
                }
        } run;
        public:
        xfer() try : i(100), thr(new std::thread(std::bind(run, this))) { } catch(...) { }
        ~xfer() { thr->join(); }
};

int
main(int ac, char **av)
{
        xfer x1;
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:24:20.380

一般来说，在构造函数中启动线程是没有问题的， *前提*是线程中使用的对象在启动之前已经完全构造。（因此，例如，有一个线程基类的习惯用法，它在其构造函数中启动线程本身，就被打破了。）在你的情况下，你还没有遇到这个标准，因为线程对象使用你的 member `run`，它直到您启动线程之后才构造。将线程的创建移到构造函数的主体中，或者简单地更改类定义中数据成员的顺序将更正此问题。（如果您选择后者，*请*添加注释，说明顺序很重要，以及为什么。）

Calling `join` in the destructor is more problematic. Any operation which may wait an indeterminate amount of time is, IMHO, problematic in a destructor. When a destructor is called during stack unwinding, you don't want to sit around waiting for the other thread to finish.

Also, you probably want to make the class uncopyable. (In which case, you don't need `shared_ptr`.) If you copy, you'll end up doing the `join` twice on the same thread.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:14:53.483

您的代码有**竞争条件**并且不安全。

问题是成员变量的初始化是按照它们在类中声明的顺序发生的，这意味着成员`thr`在成员之前被初始化`run`。在`thr`您调用`std::bind`on的初始化期间`run`，这将在内部复制（尚未初始化的）`run`对象（您知道您正在那里复制吗？）。

假设您传递了一个指针`run`（或用于`std::ref`避免`std::bind`复制），代码仍然会有竞争条件。在这种情况下，将指针/引用传递给`std::bind`将不是问题，因为可以将指针/引用传递给尚未初始化的成员，*只要它未被访问*。**但是**，仍然存在竞争条件，即`std::thread`对象可能会太快地生成线程（例如，运行构造函数的线程被逐出，并且新线程处理），并且最终可能导致线程在对象被执行`run.operator()` **之前**`run`执行初始化。

您需要重新排序类型中的字段以确保代码安全。既然您知道成员顺序的微小变化可能会对代码的有效性产生干扰，您还可以考虑采用*更安全*的设计。（此时它是正确的，它可能实际上是您需要的，但至少注释类定义，以便以后没有人重新排序字段）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:53:11.857

在构造函数中使用可能是安全的，但是......

*   您应该避免在函数调用中使用*裸* `new`
*   在析构函数中的使用`thr->join()`是......表明一个问题

* * *

详细...

**不要`new`在函数调用中使用bare**

由于未指定操作数的执行顺序，因此它不是异常安全的。更喜欢`std::make_shared`在这里使用，或者在 的情况下`unique_ptr`，创建您自己的`make_unique`工具（使用完美的转发和可变参数模板，它就可以工作）；这些构建器方法将确保对 RAII 类的所有权的分配和归属是不可分割地执行的。

**了解三法则**

三法则是一个经验法则（为 C++03 建立），如果您需要编写复制构造函数、赋值运算符或析构函数，您可能也应该编写另外两个。

在您的情况下，生成的赋值运算符不正确。也就是说，如果我创建了您的两个对象：

```
 int main() {
     xfer first;  // launches T1
     xfer second; // launches T2

     first = second;
 } 
```

然后在执行任务时，我*失去*了对 的引用`T1`，但我从来没有加入过！！！

我不记得`join`电话是否是强制性的，但是您的课程根本不一致。如果不是强制的，丢弃析构函数；如果它是强制性的，那么你应该编写一个只处理一个共享线程的低级类，然后确保共享线程的销毁总是在`join`调用之前，最后直接在你的`xfer`班级。

*根据经验，一个对其元素的子集有特殊复制/分配需求的类可能应该被拆分，以将具有特殊需求的元素隔离在一个（或多个）专用类中。*

# javascript - html5，带有闭包编译器和/或闭包库的 angularJS

> ID：11032092
> 
> 赞同：15
> 
> 时间：2012-06-14T11:27:19.857
> 
> 标签：javascript, html, google-closure, angularjs

我正在考虑使用 html5、用于数据绑定的 angularJS 以及用于交互式 Web 应用程序的 google 闭包编译器和闭包库。这些能很好地协同工作吗？不幸的是，到目前为止似乎还没有详细的报告。

我有 adobe flex 经验，但我对纯 js 还很陌生。所以这些问题可以被认为是从初学者的角度来看的。没有需要移植的代码库，一切都将从头开始开发。

1.  有其他人成功使用此组合吗？
2.  有第一手报道吗？
3.  在这种情况下，您会推荐单独的技术，还是有更好的替代方案可以组合？
4.  是否有任何好的示例、示例项目甚至教程（用于组合 - 而不是单独的技术）？
5.  初学者应该注意哪些陷阱？
6.  我还应该使用或至少考虑其他任何正交技术吗？

我已经找到了一些或多或少相关的链接：

*   [https://groups.google.com/forum/#!msg/angular/hePiqQA-MCI/uTirEtNLahwJ](https://groups.google.com/forum/#!msg/angular/hePiqQA-MCI/uTirEtNLahwJ)
*   [https://groups.google.com/forum/#!msg/angular/QpdXrTLG7Ac/zjZAQVOqRlgJ](https://groups.google.com/forum/#!msg/angular/QpdXrTLG7Ac/zjZAQVOqRlgJ)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T21:43:54.437

**闭包编译器**

您绝对可以编译您的代码（Angular 本身是使用 Closure 编译器编译的），尽管此时您只能使用简单的优化。

一般来说，我们希望 Angular 能够与编译器很好地配合使用。

**闭包库**

谷歌内部有一堆项目，将库与 A​​ngular 一起使用。

他们使用 goog.provide() 和 goog.require() 进行依赖。使用 goog.isString() 或 goog.inherits() 等实用程序也非常简单。

使用闭包 UI 组件可能需要一些额外的工作（尽管同样有项目使用它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T14:28:20.270

希望这有帮助

**更改代码**

```
function MyCtrl($scope) {/* code */} 
```

**至**

```
var MyCtrl = ['$scope', function($scope) {/* code */}] 
```

# android - 从膨胀的布局中隐藏 xml 组件

> ID：11032094
> 
> 赞同：0
> 
> 时间：2012-06-14T11:27:26.440
> 
> 标签：android, android-tabhost, android-tabactivity, android-inflate

有人知道如何从膨胀的布局中隐藏组件吗？我有以下代码：

```
View tabLayout = LayoutInflater.from(this).inflate(R.layout.tab_layout, null);
FrameLayout profile_tab_selected_indicator =
      (FrameLayout)tabLayout.findViewById(R.id.profile_tab_selected_indicator); 
```

当我试图通过使用隐藏它时：

```
profile_tab_selected_indicator.setVisibility(View.GONE); 
```

它不起作用。看起来我遗漏了一些东西，或者无法从膨胀的布局中隐藏 xml 组件。我也尝试通过设置宽度和高度，`0dp`但`LayoutParams`效果不佳。

在这样的自定义函数之外`onCreate()`：

```
public static View tabLayout;

protected void onCreate(){
   //some code here
buildTabLayout();
}

public void buildTabLayout(){
   tabLayout = LayoutInflater.from(this).inflate(R.layout.tab_layout,   null);
} 
```

然后我试图在这里隐藏它：

```
public void onTabChanged(String tabId) {
    FrameLayout profile_tab_selected_indicator = (FrameLayout)tabLayout.findViewById(R.id.profile_tab_selected_indicator);

    profile_tab_selected_indicator.setVisibility(View.GONE);
} 
```

这是膨胀布局的xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/profile_tab_bar_bg"
    android:gravity="center"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/profile_top_bar_shadow_xml" >
    </FrameLayout>

    <ImageView
        android:id="@+id/iv_tabIcon"
        android:layout_width="30dp"
        android:layout_height="30dp" />

    <TextView
        android:id="@+id/tv_tabTitle"
        style="@style/ProfileTabLabelsStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@drawable/profile_tab_label_selector" />

    <FrameLayout
        android:id="@+id/profile_tab_selected_indicator"
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:background="@color/ProfileTabSelected" >
    </FrameLayout>

</LinearLayout> 
```

编辑：

负责我的选项卡布局的所有代码：

```
// tabs labels
    public static String[] tabsTitles = new String[] { "PROFILE", "CAMPAIGNS",
            "STATISTICS" };

    public static View tabLayout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.vw_profile);

        // initializing xml components
        init();

        // Tab Layut builder
        buildTabLayout();

    }
private void buildTabLayout() {
        // TODO Auto-generated method stub
        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost(); // The activity TabHost
        tabHost.setOnTabChangedListener(this);
        TabHost.TabSpec spec; // Resusable TabSpec for each tab
        View tabLayout; // tabLayout
        Intent intent; // Reusable Intent for each tab

        // PROFILE TAB
        tabLayout = createTabLayout(this, tabsTitles[0]);
        intent = new Intent().setClass(this, VieweedsProfileTabActivity.class);
        spec = tabHost.newTabSpec(tabsTitles[0]).setIndicator(tabLayout)
                .setContent(intent);
        tabHost.addTab(spec);

        // CAMPAIGNS TAB
        tabLayout = createTabLayout(this, tabsTitles[1]);
        intent = new Intent()
                .setClass(this, VieweedsCampaignsTabActivity.class);
        spec = tabHost.newTabSpec(tabsTitles[1]).setIndicator(tabLayout)
                .setContent(intent);
        tabHost.addTab(spec);

        // STATISTICS TAB
        tabLayout = createTabLayout(this, tabsTitles[2]);
        intent = new Intent().setClass(this,
                VieweedsStatisticsTabActivity.class);
        spec = tabHost.newTabSpec(tabsTitles[2]).setIndicator(tabLayout)
                .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(0);

    }

    public void onTabChanged(String tabId) {
        // TODO Auto-generated method stub
        FrameLayout profile_tab_selected_indicator = (FrameLayout)tabLayout.findViewById(R.id.profile_tab_selected_indicator);
        FrameLayout campaigns_tab_selected_indicator = (FrameLayout)tabLayout.findViewById(R.id.campaigns_tab_selected_indicator);

        if (tabId.equals(tabsTitles[0])) {
            // profile tab
            Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();
            profile_tab_selected_indicator.setVisibility(View.VISIBLE);
            campaigns_tab_selected_indicator.setVisibility(View.GONE);
        } else if (tabId.equals(tabsTitles[1])) {
            // campaigns tab
            Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();
            profile_tab_selected_indicator.setVisibility(View.GONE);
            campaigns_tab_selected_indicator.setVisibility(View.VISIBLE);
        } else {
            Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();
            // statistics tab

        }
    }

    // creating tab layout for each tab
    public static View createTabLayout(Context c, String tabTitleText){
        tabLayout = LayoutInflater.from(c).inflate(R.layout.tab_layout, null);
        TextView tabTitle = (TextView)tabLayout.findViewById(R.id.tv_tabTitle);
        tabTitle.setTypeface(arial);
        ImageView tabIcon = (ImageView)tabLayout.findViewById(R.id.iv_tabIcon);
        tabTitle.setText(tabTitleText);

        //assigning tab icons for each tab
        if(tabTitleText.equals(tabsTitles[0])){
            //profile tab
            tabIcon.setImageResource(R.drawable.profile_tab_bar_profile_tab_icon);
        }else if(tabTitleText.equals(tabsTitles[1])){
            //campaigns tab
            tabIcon.setImageResource(R.drawable.profile_tab_bar_campaigns_tab_icon);
        }else{
            //statistics tab
            tabIcon.setImageResource(R.drawable.profile_tab_bar_statistics_tab_icon);
        }

        return tabLayout;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:42:34.600

您在代码中做错了一些事情。我不知道您为什么选择`tabLayout`在课堂上创建一个字段，但这样做`tabLayout`会指向您设置的最后一个选项卡指示符（用于*STATISTICS*选项卡的那个）。因为`tabLayout`仅指向最后一个选项卡，所以在`onTabChanged`回调中不会发生任何事情（因为您没有为最后一个选项卡做任何事情）。

我建议您更改`onTabChanged`方法并直接使用 搜索选项卡视图，`getChildTabViewAt`以确保您在`FrameLayout`正确的位置进行搜索：

```
public void onTabChanged(String tabId) {
        // the first tab view
        View tab1 = getTabWidget().getChildTabViewAt(0);
        FrameLayout profile_tab_selected_indicator = (FrameLayout)tab1.findViewById(R.id.profile_tab_selected_indicator);
        // the second tab view
        View tab2 = getTabWidget().getChildTabViewAt(1);
        // where does this come from?!?! it is in the second tab?!?!
        FrameLayout campaigns_tab_selected_indicator = (FrameLayout)tab2.findViewById(R.id.campaigns_tab_selected_indicator);  
        // the third tab view
        View tab3 = getTabWidget().getChildTabViewAt(2);            

        if (tabId.equals(tabsTitles[0])) {
            // profile tab
           Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();                     
           profile_tab_selected_indicator.setVisibility(View.VISIBLE);
           campaigns_tab_selected_indicator.setVisibility(View.GONE);
        } else if (tabId.equals(tabsTitles[1])) {
            // campaigns tab
            Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();
            profile_tab_selected_indicator.setVisibility(View.GONE);
            campaigns_tab_selected_indicator.setVisibility(View.VISIBLE);
        } else {
            Toast.makeText(this, tabId, Toast.LENGTH_LONG).show();
            // statistics tab

        }
    } 
```

# api - url API 请求中的数组

> ID：11032095
> 
> 赞同：0
> 
> 时间：2012-06-14T11:27:28.730
> 
> 标签：api, url, url-parameters

我必须从我的程序中调用一个 API。API 在远程服务器上，我必须通过 url 给参数。

我必须给出的参数如下：

```
 apikey = khreer932jkee982jksj
    method = method.mymethod
    username = myusername
    type = 234
    data{
        group{              
                id = 593
                groupleader = groupleadername 
                groupmembers {
                        1 = groupmemberone,
                        2 = groupmembertwo
                }
                descr = testgroup
        }
      created = datetimestamp
      modified = datetimestamp
    } 
```

数据的第一部分我知道如何通过 url 传递它。

```
server.myserver.nl/api/?method=method.mymethod&apikey=khreer932jkee982jksj&username=myusername&type=234 
```

在此之后我很困惑，我不知道如何传递数据。我无法对 api 的接收端进行任何修改，因为我无法控制它

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:53:22.107

找到了我必须这样发送的答案

```
server.myserver.nl/api/?method=method.mymethod&apikey=khreer932jkee982jksj&username=myusername&type=234&data[group][id]=593&data[group][groupleader]=groupleadername&data[group][groupmembers][]=groupmemberone&data[group][groupmembers][]=groupmembertwo&data[group][descr]=testgroup 
```

# php - 如何从php发送字节数组

> ID：11032096
> 
> 赞同：3
> 
> 时间：2012-06-14T11:27:35.983
> 
> 标签：php, arrays, byte

我正在尝试将图像的字节数组发送到我的 json 对象中的 web 服务。但是，它的请求永远不会到达我的服务器。如果我只发送一个空数组，它会到达服务器并返回 json 响应。下面是我的代码。这段代码有什么问题

```
<?php 

header('Content-type: application/json');
//Read an image from third party URL
$contents= file_get_contents('http://i2.cdn.turner.com/cnn/dam/assets/120612031415-granderson-speech-c1-main.jpg');
$byteArr = str_split($contents);
foreach ($byteArr as $val) 
{ 
 $points[] = ord($val); 
}
$output = join (" " , $points);
//echo($output);
//If i use "photo"=>[] in below array it works fine
$jsonArray = array("comments"=>"Hiee", "type"=>"test", "photo"=>[$output],"custid"=>"test@test.com");
$buzz = json_encode($jsonArray);
try {
//Webservice call to store the image in DB and send mail
$jsonResponse = @file_get_contents("http://localhost/example/json.htm?action=sendBuzzRequest&email=test@test.com&pass=test1234&buzz=".$buzz);
echo ($jsonResponse);
} catch(Exception $e)
{
 $e->getMessage();
}
?> 
```

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:53:22.097

如果这解决了它，我不支持，但 url 没有编码。你可以先试试。

```
$jsonResponse = @file_get_contents("http://localhost/example/json.htm?action=sendBuzzRequest&email=test%40test.com&pass=test1234&buzz=" . urlencode($buzz)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:35:28.650

根据评论，似乎您可能已达到 GET 请求的最大大小..

这种规范看起来更适合 POST 或 PUT 请求。

有关 GET 大小请求限制，请参阅此 SO 问题：[HTTP GET 请求的最大长度？](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)

# string - Perl：比较字符串中的数字

> ID：11032100
> 
> 赞同：0
> 
> 时间：2012-06-14T11:27:52.960
> 
> 标签：string, perl

给定以下输入：

一个| 11 162 60 90 -- 141 184

乙| 231 322 -- 306 305 285 350

对于 A，我想检查 141 是否介于 (11,162) 或 (60,90) 之间。如果是，则打印“在 A 中，141 位于 (11,162) 之间”。

然后，我想检查 184 是否介于 (11,162) 或 (60,90) 之间。因为它没有，所以不需要打印任何内容。

同样，对于 B，我需要打印介于 (231, 322) 之间的数字。

我编写了以下 Perl 代码，但没有得到正确的输出。

```
#!/usr/bin/perl -w
open LIST, "input.txt";
while($line=<LIST>)
{
@elem=split (/\|/,$line);
@nextone=split("--",$elem[1]);
@nextoneone = split(" ",$nextone[0]);
@nexttwo=split(" ",$nextone[1]);

if ($nexttwo[0] > $nextoneone[0] && $nexttwo[0] < $nextoneone[1])
{
print"$elem[0]\t $nexttwo[0]\t $nextoneone[0]\t $nextoneone[1]\n";
}
elsif ($nexttwo[0] > $nextoneone[2] && $nexttwo[0] < $nextoneone[3])
{
print"$elem[0]\t $nexttwo[0]\t $nextoneone[2]\t $nextoneone[3]\n";
}
elsif ($nexttwo[1] > $nextoneone[0] && $nexttwo[1] < $nextoneone[1])
{
print"$elem[0]\t $nexttwo[1]\t $nextoneone[0] \t$nextoneone[1]\n";
}
elsif ($nexttwo[1] > $nextoneone[2] && $nexttwo[1] < $nextoneone[3])
{
print"$elem[0]\t $nexttwo[1]\t $nextoneone[2] \t$nextoneone[3]\n";
}
}
   close (LIST);
   exit; 
```

我不知道每一行有多少个元素。因此，我不知道如何实现一个循环进行比较。任何有关如何改进代码的指导将不胜感激。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:57:45.707

首先，我会更改您的脚本的一些内容。1）使用严格 - 这意味着你会发现任何错别字

2）给变量更有意义的名字——我已经根据我所看到的改变了一些有意义的名字，但我不知道你的脚本做了什么，所以你可能有更好的名字

3) 在你开发的时候输出一些调试，这样你就可以看到它在做什么以及为什么它不工作

您将需要两个循环 - 一个循环遍历“--”左侧的字符串部分中的值，一个循环遍历右侧的条件。您想遍历外循环中的值，然后每次都应该遍历内循环中的所有条件。

```
 use strict;
    #!/usr/bin/perl -w
    open LIST, "input.txt";
    my $line;
    while($line=<LIST>) {
        my ($label, $content) =split (/\|/,$line);
        my ($conditionstring, $valuestring) =split("--",$content);
        my (@conditions) = split(" ",$conditionstring);
        my (@values) =split(" ",$valuestring);
        foreach my $this_val (@values) {
                my $matched_one_condition = 0;
                for (my  $f=0; $f< scalar(@conditions);$f+=2) {

                        print "Comparing $this_val to $conditions[$f] and to            $conditions[$f+1]\n";

                        if (($this_val > $conditions[$f]) && ($this_val < $conditions[$f+1])) {
                                $matched_one_condition= 1;

                        }
                }
                if ($matched_one_condition) {
                        print "$this_val\n";

                }
        }
} 
```

注意 - 我把调试线留在了那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:57:01.573

如果您不知道它们的编号，请对这些值使用循环：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature 'say';

while (<DATA>) {
    my ($header, $rangeS, $pointS) = /(.*)\|(.*) -- (.*)/;
    my @ranges = $rangeS =~ /([^ ]+ [^ ]+)/g;
    my @points = split / /, $pointS;

    for my $point (@points) {
        for my $range (@ranges) {
            my ($from, $to) = split / /, $range;
            if ($from <= $point and $point <= $to) {
                say "In $header, $point lies between ($from,$to)";
                last;   # Comment this line to get all the ranges for each point.
            }
        }
    }
}

__DATA__
A| 11 162 60 90 -- 141 184
B| 231 322 -- 306 305 285 350
C| 10 20 30 40 -- 1 2 3 4 5 6 7 8 9
D| 10 20 10 40 -- 1 10 20 40 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:06:39.553

我解决了你的问题。希望你能从中找到一些价值。我确实冒昧地对范围进行了排序，以处理 B 行的情况，例如 306、305。

```
#!/bin/env perl
use strict;
use warnings;

while ( <DATA> ) {
    my @line = /\w+|\d+/g;
    my( $h, $ranges, $tests ) = (
        $line[0], [ [ sort @line[1,2] ], [ sort @line[3,4] ] ], [ @line[5,6] ]
    );
    map {
        my $test = $_;
        map {
            print "In $h, $test lies between (", join( ', ', @$_ ), ")\n"
                if grep { /^$test$/ } ( $_->[0] .. $_->[1] )
        } ( @$ranges )
    } @$tests
}

__DATA__
A| 11 162 60 90 -- 141 184
B| 231 322 -- 306 305 285 350 
```

# html - JSF在特立尼达合并多个迭代器

> ID：11032101
> 
> 赞同：1
> 
> 时间：2012-06-14T11:27:53.677
> 
> 标签：html, jsf, iteration, trinidad

在我的 JSF 页面中，我在 2 个不同的迭代器上运行

使用 tr:iterator 标签。

每个迭代器打印 3 个单词

从该页面生成的 html 包含 2 个“dt”元素，其中包含 3 个其他“td”元素中的 3 个单词。

生成的 html 是否有可能在一个列表中包含 6 个“td”元素？

这样第一个迭代器的元素就不会与第二个迭代器的元素不同。

我需要类似 Append Tag 的东西，用于附加迭代器以形成附加迭代器

在每个相应的迭代器之后，条目从一个迭代器到另一个迭代器

用尽了条目。

我的代码：

```
 <tr:panelHorizontalLayout > 
       <tr:iterator value="#{bean.x}" var="x" rows="0" > 
          <tr:outputText value="#{x.a} "/>           
       </tr:iterator>   
       <tr:iterator value="#{secondbean.y}" var="y" rows="0" > 
          <tr:outputText value="#   {y.b} "/> 
       </tr:iterator>    
   </tr:panelHorizontalLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:18:10.453

[`tr:panelHorizontalLayout`](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_panelHorizontalLayout.html)是水平排列其子元素的布局元素。因为[`tr:iterator`](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_iterator.html)是一个命名容器元素，所以两个`tr:iterator`' 都将是由 . 排列的子元素`tr:panelHorizontalLayout`。

尝试替换`tr:iterator`为[`tr:forEach`](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_forEach.html).

# c++ - 加权随机数 V2（动态情况）

> ID：11032105
> 
> 赞同：1
> 
> 时间：2012-06-14T11:27:59.040
> 
> 标签：c++, c, random, sampling

这个问题是链接下方问题的扩展。

[加权随机数](https://stackoverflow.com/questions/1761626/weighted-random-numbers)

我的问题是对加权随机数进行抽样，附加条件是每个元素的权重经常动态变化。

编辑假设有 N 个元素可以选择不同的权重。

对于静态权重，Walker 的别名方法需要 O(N) 时间来设置别名，但采样成本为 O(1)，因此它是实现我目标的最佳方法之一。

并且二分查找方法也需要 O(N) 来制作累积数组，采样成本是 log(N)

然而在我的例子中，因为权重经常改变，所以修改权重的时间复杂度也很重要。

所以我想知道现有的库或算法的时间复杂度都可以修改数据结构和采样小于 O(N)。

编辑当我阅读评论时，我意识到我需要施加额外的条件。每个修改阶段，只有少数（大部分是两个）权重被修改，这些修改也不会改变权重的总和（归一化条件）。

如果有解决方案，我也想知道当权重也是实数时是否可以使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:18:09.337

我面临同样的问题。我将描述我目前解决它的计划，但将感谢任何其他建议和/或实施指针。

我目前的计划是调整动态订单统计算法，如`14.1`Cormen/Leiserson/Rivest 的“算法简介”部分所述。您将元素放入平衡的二叉树中，例如红黑树，权重作为键。您对树进行扩充，以便每个节点将权重总和存储在其子树中。然后根存储整个树中的权重总和，例如`S`。子树总和可以在树操作期间以与动态顺序统计的子树大小相同的方式更新。要进行加权采样，您可以`[0..S]`均匀地采样一个数字，例如`x`; 然后向下搜索节点`N`，使得`N`在顺序遍历中的前面节点的权重总和为`<x`，但总和加上`N`的权重为`>x`-- 类似于动态订单统计的 OS-Select 操作。

# ajax - 带有评论的精美应用图片库

> ID：11032109
> 
> 赞同：0
> 
> 时间：2012-06-14T11:28:15.287
> 
> 标签：ajax, jquery, fancybox, fancybox-2

我目前有一个基本的 Fancy Box 画廊（链接调用更大的图像和标题，然后显示在 Fancy 框中）。

如何/将评论系统集成到其中的最佳方式是什么？每张照片都有会员评论，但我需要一种方法在 Fancybox 中的照片旁边显示这些评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:47:50.323

你可以考虑我的fancybox "a la" Facebook ;)

[http://www.picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html](http://www.picssel.com/playground/jquery/fancyboxALAfacebook_26Mar12.html)

您可以在正确的区域插入任何 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:56:27.910

很简单，就像您显示每张图片及其独立评论一样，您只需单击图片即可将它们显示到更大的框中。就像脸书一样。使用您当前在页面中使用的任何 ajax 进入框中。

# ruby-on-rails-3 - 设计：当用户和个人资料是单独的模型时的嵌套注册表单

> ID：11032113
> 
> 赞同：2
> 
> 时间：2012-06-14T11:28:22.413
> 
> 标签：ruby-on-rails-3, devise, nested-forms, rails-models

我正在使用我的身份验证设计，并希望将我的用户的详细信息保存在一个名为配置文件的单独模型中。个人资料包含名字和姓氏等信息。我希望能够拥有一个能够输入所有这些信息的注册表单。

这是我的表格

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= render 'shared/error_messages' %>

        <% fields_for :profile do |fa| %>
            <%= fa.label :first_name %>
            <%= fa.text_field :first_name %>

            <%= fa.label :last_name %>
            <%= fa.text_field :last_name %>
        <% end %>

        <div><%= f.label :email %><br />
        <%= f.email_field :email %></div>

        <div><%= f.label :password %><br />
        <%= f.password_field :password %></div>

        <div><%= f.label :password_confirmation %><br />
        <%= f.password_field :password_confirmation %></div>

        <div><%= f.submit "Sign up" %></div>
    <% end %> 
```

这在我的 user.rb 模型中

```
has_one :profile
accepts_nested_attributes_for :profile 
```

当我提交 from 它不会将名字和姓氏保存到数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:14:09.723

经过大量搜索，这是我问题的最简单答案。虽然我不确定这是 rails 的做事方式

[设计用户的配置文件模型？](https://stackoverflow.com/questions/4307743/profile-model-for-devise-users)

# ajax - ASP.NET MVC 方法被调用两次

> ID：11032116
> 
> 赞同：1
> 
> 时间：2012-06-14T11:28:39.747
> 
> 标签：ajax, asp.net-mvc, forms-authentication

我们有一个被调用两次的控制器方法。第一次调用我们得到正确的参数，第二次调用我们没有参数，MVC 引擎抛出异常，因为方法的参数不能为空。

我们之前在使用某些版本的 Safari 时看到过这种行为，它与身份验证有关。使用 Windows 身份验证时，如果 IIS 中的身份验证属性设置为协商和 NTLM，则每个将发送一次 ajax 调用。解决此问题的方法是删除一个（我想我们只是将其保留为 NTLM）。情况并非如此，因为我们在这里使用表单身份验证。

我们在调用 WCF 方法时也看到了类似的行为，这些方法返回的类型是派生的，而不是使用父类上的 KnownType 属性。

我们无法成功地重现这一点（它在客户端机器上很少发生）并且正在寻找任何一般的陷阱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:37:58.510

调用两次的原因是 Safari 在 IIS 下使用 Windows 身份验证时存在错误。转到您网站的身份验证设置。右键单击 Windows 身份验证，选择提供程序并删除协商，留下 NTLM 工作正常。我还没有测试过 Kerberos。

此问题仅出现在某些版本的 safari 中。

# matlab - Matlab中以下代码的输出是什么？

> ID：11032117
> 
> 赞同：1
> 
> 时间：2012-06-14T11:28:41.960
> 
> 标签：matlab

```
a = [1 2 3;4 5 6;7 8 9;];

[~ ,im]=sort(reshape(a,1,[])'descend'); 
```

那么实际上我得到的是什么作为输出，它不是一个排序数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:35:30.960

阅读[文档](http://www.mathworks.co.uk/help/techdoc/ref/sort.html)；的第二个输出参数`sort`是索引数组，而不是值数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T01:39:32.247

```
a = [1 2 3;4 5 6;7 8 9;];
A = reshape(a,1,[]);
[B ,im]=sort(A,'descend'); 
```

`B`是排序后的水平向量。 `im`是`all(A(im)==B)`返回的索引`true`。

您并不特别需要 reshape 命令，或者更确切地说，获得相同结果的另一种方法是

```
A = a(:)'; 
```

a(:) 从任何数组中生成一个列向量，并将其转置为水平数组。（' 如果 a 的元素很复杂，它们也将复共轭，但你的元素并不复杂，所以这在这里有效。）

我有点惊讶你不是在寻找

```
B = sort(a,'descend'); 
```

它给出了一个 3x3 矩阵输出，每列按降序排序。

# matlab - 根据 plotyy 中的 y 值定义条形图颜色

> ID：11032119
> 
> 赞同：1
> 
> 时间：2012-06-14T11:28:42.603
> 
> 标签：matlab, plot, bar-chart

我想创建一个结合了条形图和折线图的图形，为此我有以下内容：

```
[AX,H1,H2] = plotyy(AG_sea_ice(:,6), AG_sea_ice(:,4), TG_FP1(:,5), TG_FP1(:,4), @bar, @line);
set(H1,'FaceColor', [0.6 0.6 0.6], 'EdgeColor', [0.6 0.6 0.6]);
set(H2,'LineStyle',':', 'Color', 'r', 'marker', '+'); 
```

我还想根据 y 值对条形图中的条形进行颜色编码（而不是像上面那样将所有条形都涂成灰色），根据以前的帖子，我有以下内容：

```
mydata = AG_sea_ice (:,4);
    bar_h = bar(mydata);
    bar_child=get(bar_h,'Children');
set(bar_child, 'EdgeColor', 'none');
    set(bar_child,'CData', mydata);
set(bar_child,'CDataMapping', 'direct');
    mycolor=[0 0 0; 0.5 0.5 0.5; 1 1 1];

for iCount=1:length(mydata)
    if (mydata(iCount)<5)
    index(iCount)=1;
    elseif(mydata(iCount)>=10)
    index(iCount)=3;
    else
    index(iCount)=2;
    end
    end

set(bar_child, 'CData',index);
colormap(mycolor); 
```

我的问题是如何将两者结合起来，以便条形颜色编码适用于 plotyy 图中axis1 上的条形图。另外，如果有更简单的方法来解决这个问题，请告诉我。任何帮助将非常感激。

# php - Cakephp开源应用程序下载

> ID：11032121
> 
> 赞同：-2
> 
> 时间：2012-06-14T11:28:46.300
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我是 cakephp 初学者.. 为了提高学习曲线，我正在寻找可以从网上下载的开源应用程序.. 请建议我在哪里可以找到相同的网址..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:33:28.243

相信我。查看开源并不是开始学习的最佳方式。当我开始学习 CAKEPHP 时，我犯了这个错误。您应该做的是查看书籍、教程，并在研究开源代码之前实际使用您自己的代码进行练习。

任何开源通常都是大师编写的代码。作为初学者，您会迷路，并且会阻止您学习 CAKE。

对我来说，最好的方法实际上是 CAKEPHP 手册。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:02:33.877

看看[http://croogo.org/](http://croogo.org/)它是一个基于 cakephp 的开源 cms。

但我建议你做 cakephp 博客教程：[http ://book.cakephp.org/2.0/en/tutorials-and-examples.html](http://book.cakephp.org/2.0/en/tutorials-and-examples.html)

这将为您提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:09:45.077

为此，您必须了解：-

MVC :-- [http://en.wikipedia.org/wiki/Model-view-controller](http://en.wikipedia.org/wiki/Model-view-controller)

然后去那里做博客教程>> [http://book.cakephp.org/view/219/Blog](http://book.cakephp.org/view/219/Blog) 阅读>> [http://book.cakephp.org/view/10/Understanding-Model-View-Controller](http://book.cakephp.org/view/10/Understanding-Model-View-Controller)

[http://book.cakephp.org/2.0/en/index.html](http://book.cakephp.org/2.0/en/index.html)

对于一些视频教程： -

[http://tv.cakephp.org/video/andrewperk/2011/01/26/cakephp_blog_tutorial_part_9_-_layouts](http://tv.cakephp.org/video/andrewperk/2011/01/26/cakephp_blog_tutorial_part_9_-_layouts)

# javascript - 不能在 Magento 中使用 Fancybox2。错误：“未捕获的 TypeError ...没有方法...”

> ID：11032122
> 
> 赞同：1
> 
> 时间：2012-06-14T11:28:50.963
> 
> 标签：javascript, jquery, magento, fancybox

我 使用我的扩展 xml 和 javascript 文件和 css包含了如下所示的 fancybox2 文件[http://fancyapps.com/fancybox/#instructions 。](http://fancyapps.com/fancybox/#instructions)`<action method="addJs">``<action method="addItem">`

我在我的内部包含的 js 和 css 文件的顺序：

```
<link rel="stylesheet" type="text/css" href="magento/js/calendar/calendar-win2k-1.css" />
<link rel="stylesheet" type="text/css" href="magento/js/n123/fancybox2/source/jquery.fancybox.css" />
<link rel="stylesheet" type="text/css" href="magento/skin/frontend/default/default/css/styles.css" media="all" />
<link rel="stylesheet" type="text/css" href="magento/skin/frontend/base/default/css/widgets.css" media="all" />
<link rel="stylesheet" type="text/css" href="magento/skin/frontend/default/default/css/print.css" media="print" />
<script type="text/javascript" src="magento/js/prototype/prototype.js"></script>
<script type="text/javascript" src="magento/js/lib/ccard.js"></script>
<script type="text/javascript" src="magento/js/prototype/validation.js"></script>
<script type="text/javascript" src="magento/js/scriptaculous/builder.js"></script>
<script type="text/javascript" src="magento/js/scriptaculous/effects.js"></script>
<script type="text/javascript" src="magento/js/scriptaculous/dragdrop.js"></script>
<script type="text/javascript" src="magento/js/scriptaculous/controls.js"></script>
<script type="text/javascript" src="magento/js/scriptaculous/slider.js"></script>
<script type="text/javascript" src="magento/js/varien/js.js"></script>
<script type="text/javascript" src="magento/js/varien/form.js"></script>
<script type="text/javascript" src="magento/js/varien/menu.js"></script>
<script type="text/javascript" src="magento/js/mage/translate.js"></script>
<script type="text/javascript" src="magento/js/mage/cookies.js"></script>
<script type="text/javascript" src="magento/js/n123/jquery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="magento/js/n123/jquery/jquery.no.conflict.js"></script>
<script type="text/javascript" src="magento/js/varien/product.js"></script>
<script type="text/javascript" src="magento/js/varien/configurable.js"></script>
<script type="text/javascript" src="magento/js/calendar/calendar.js"></script>
<script type="text/javascript" src="magento/js/calendar/calendar-setup.js"></script>
<script type="text/javascript" src="magento/js/n123/fancybox2/source/jquery.fancybox.pack.js"></script> 
```

然后在我的模板（phtml）中，我添加了以下代码：

```
<a id="single_1" href="http://farm8.staticflickr.com/7100/6917703112_d18e3e1b95_b.jpg" title="Assunção - Santo Tirso...a New Dimension... (Alex Matos)">
<img src="http://farm8.staticflickr.com/7100/6917703112_d18e3e1b95_m.jpg" alt="" />
</a>
<script type="text/javascript">
  jQuery(document).ready(function() {
    jQuery("#single_1").fancybox({
          helpers: {
              title : {
                  type : 'float'
              }
          }
      });
</script> 
```

在 Chrome 中会发生此错误：

[http://www.imagebanana.com/view/6oxxttnx/s02.png](http://www.imagebanana.com/view/6oxxttnx/s02.png)

```
 Uncaught TypeError: Object function wrap(wrapper) {
             var __method = this;
             return function() 
                       {
                          var a = update([__method.bind(this)],  arguments) ;
                          return wrapper.apply(this, a);
                       }
       } has no method 'unbind' 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:51:52.103

I've found a soulution: in my case the packed "fancybox.pack.js" didn't work and I got that error posted above but the "fancybox.js" ("unpacked"/normal version) works like a charm! Thanks for your support and attention.

# c# - 如何获取 XSD 文件的更改会影响相关的 CS 文件？

> ID：11032123
> 
> 赞同：1
> 
> 时间：2012-06-14T11:28:56.573
> 
> 标签：c#, xml, xsd

我创建了一个 .xsd 文件，然后使用 XSD.exe 生成了 .cs 文件（我使用了 xsd.exe /dataset mySchema.xsd）。一切正常，但突然间，我需要在我的 xsd 中添加一个新字段。

我是否必须从项目中删除 .xsd 文件，使用 XSD.exe 生成和新的 .cs 文件，然后再次添加它，或者当我通过模式浏览器？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:37:49.303

vs2010 项目的简单解决方案是将 mySchema.xsd 文件作为数据集包含到项目中。如果您通过代码或 xsd 编辑器更改 xsd，如果数据集设置正确，vs2010 将重新生成重新生成 cs 数据集。

尝试此操作的最简单方法是使用向导添加新数据集。

~~（请注意，我没有在 vs 2010 上尝试过，但它与 vs2002、vs2003、vs2005 和 vs2008 完美配合）~~

[更新] 如果设置了 xsd-file-property customtool = 'MSDataSetGenerator' 它适用于 vs2010

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:58:12.697

我添加了一个 Pre-build 事件，其中包含如下一行：

```
"$(Registry:HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.1\@InstallationFolder)bin\NETFX 4.0 Tools\xsd.exe" "$(ProjectDir)MyFile.xsd" 
```

这会在每次（之前）构建项目时生成一个 .cs 文件。这很麻烦，但它有效。如果我是对的，如果不对其进行任何更改，则不会重建该项目。

Xsd2Code 对我来说不是一个选择，因为我需要处理许多 xsd，而 xsd.exe 允许我这样做。但是，您最终会得到 1 个巨大的 .cs 文件，因此可能需要提取任何常见类型，以免它们被创建两次。

如果我不这样做，它会创建名称稍有不同的相同类型，例如“Signature”、“Signature1”、“Signature2”等...

# python - 如何让 setuptools 安装来自另一个来源的软件包，该软件包在 pypi 上也可以使用相同的版本号？

> ID：11032125
> 
> 赞同：26
> 
> 时间：2012-06-14T11:28:57.170
> 
> 标签：python, pip, setuptools, distutils, easy-install

这是一个与[如何让 setuptools 安装不在 PyPI 上的包的类似问题？](https://stackoverflow.com/questions/3472430/how-can-i-make-setuptools-install-a-package-thats-not-on-pypi)但不一样。

由于我想使用某些包的分叉版本，setuptools 忽略依赖链接（因为它具有相同的版本号）。

有没有办法强制使用dependency_links中的链接？或者是更改分叉存储库中版本号的唯一方法？

```
requires = [
    ...
    'pyScss==1.1.3'
    ...

dependencies = [
    'https://github.com/nadavshatz/pyScss/zipball/master#egg=pyScss-1.1.3'
] 
```

* * *

**更新**

很奇怪，如果这个包是所需列表中唯一的一个，显然它还没有安装。如果还有另一个丢失的包，它将从 pypi 下载它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T15:06:00.330

我相信您可以`dependency_links`按照该问题中的描述使用：

```
from setuptools import setup

setup(name = 'mypkg',
    version = '0.0.1',
    description = 'Foo',
    author = 'bar',
    author_email = 'bar@example.com',
      install_requires = ['pyScss==1.1.3'],
      dependency_links = [
      'https://github.com/nadavshatz/pyScss/zipball/master#egg=pyScss-1.1.3'
      ]
    ) 
```

测试使用`python setup.py develop`

你可能想重命名鸡蛋以强调它是一个叉子[http://www.python.org/dev/peps/pep-0386/](http://www.python.org/dev/peps/pep-0386/)

在 setup.py 之外，您可以在本地使用`requirements.txt`and强制执行此操作`pip`。虽然这不会使您的软件包依赖于 fork，但您可以轻松地将其记录为安装方式。

```
$ cat requirements.txt
https://github.com/nadavshatz/pyScss/zipball/master#egg=pyScss-1.1.3
$ pip install -r requirements.txt 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-16T17:45:07.193

我最终做了一些与[stackoverflow.com/a/17442663/368102](https://stackoverflow.com/a/17442663/368102)中的答案非常相似的事情。

我需要一个与PyPi 中`requests-file`的不同包名称冲突的 github 包。`requests-file`它们都有 1.0 版本，而 PyPi 版本有一些更高的版本。

我的解决方法`ias_tools/setup.py`如下所示：

```
setup(
    ...
    install_requires=[
        'requests-file<=99.99',
    ],
    dependency_links=[
        'https://github.com/jvantuyl/requests-file/archive/b0a7b34af6e287e07a96bc7e89bac3bc855323ae.zip#egg=requests-file-99.99'
    ]
) 
```

就我而言，我正在使用`pip`，所以我也不得不使用`--process-dependency-links`：

```
% pip install --process-dependency-links ./ias_tools
You are using pip version 6.0.6, however version 6.1.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Processing ./ias_tools
  DEPRECATION: Dependency Links processing has been deprecated and will be removed in a future release.
Collecting requests-file<=99.99 (from ias-tools==0.1)
  Downloading https://github.com/jvantuyl/requests-file/archive/b0a7b34af6e287e07a96bc7e89bac3bc855323ae.zip
Requirement already satisfied (use --upgrade to upgrade): requests>=1.1.0 in ./venv/lib/python2.7/site-packages (from requests-file<=99.99->ias-tools==0.1)
Installing collected packages: ias-tools, requests-file
  Running setup.py install for ias-tools
  Running setup.py install for requests-file
Successfully installed ias-tools-0.1 requests-file-1.0 
```

我不太担心弃用通知，因为[向 pip 提交了一个拉取请求](https://github.com/pypa/pip/pull/1955)以弃用弃用（在[讨论](https://github.com/pypa/pip/pull/1955)之后）。

# css - 使用过滤器进行透明度时，IE 不显示负边距

> ID：11032126
> 
> 赞同：0
> 
> 时间：2012-06-14T11:28:57.997
> 
> 标签：css, internet-explorer, transparency

看到这个小提琴：

[http://jsfiddle.net/cuMZA/4/](http://jsfiddle.net/cuMZA/4/)

这在 Chrome、Firefox 中完美运行。但在 IE 中，这无法显示红色块。似乎它正在使用：溢出：隐藏作为设置。

但是，我必须使用渐变选项在外部 div 中显示半透明背景。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:23:29.533

我将该`position: absolute;`属性添加到#block div，它似乎以这种方式工作。不知道为什么会溢出：来自过滤器的隐藏行为。我也尝试添加`overflow: visible;`但没有奏效。

# c++ - 代码在 gcc 上编译，但不在 msvc 上

> ID：11032127
> 
> 赞同：3
> 
> 时间：2012-06-14T11:28:59.633
> 
> 标签：c++, templates, g++, visual-c++-2010, visual-studio-2010

我在使用 msvc-2010 编译模板时遇到问题。它使用 gcc 4.6.3 完美运行。

我已经将代码归结为必要的（当然它没有意义）：

```
//Variant that works
template <typename T, T* Ptr>
void callFun()
{
}

//Traits class (type expands to the same type T* as above)
template <typename T>
class TraitsClass
{
public:
    typedef T* type;
};

//Essentially the same as callFun2, only that the
//type of Ptr is expressed indirectly over a traits class
//The usage of this class is not possible, because of the error described below
template <typename T, typename TraitsClass<T>::type Ptr>
void callFun2()
{
}

//Provides a compile constant ptr for this example
void testFun()
{
}

int main()
{
    //Works
    callFun<void(), &testFun>();

    //Fails
    callFun2<void(), &testFun>();

    //Works
    callFun2<void(), 0>();

    return 0;
} 
```

错误：

```
error C2975: 'Ptr' : invalid template argument for 'callFun2', expected compile-time constant expression 
```

我发现它很有趣，它仅在通过 Traits 类中的 typedef 使用第二个类型参数时才会失败。g++ 即使使用 -Wall -Wextra -Werror -pedantic 也能正确编译此示例而不会出现警告（当然，未使用的参数除外）

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:48:32.787

好吧，我认为答案是编译器不是上帝写的。编译器行业的编程标准非常高，MS C++ 是一个很好的编译器，但它仍然包含错误。我遇到了以下内容，这与您所指的内容有些相似：

```
template <class item_struct>
struct THeapBasedArray
{
    void  Sort(int (__cdecl *compareFunction)(const item_struct *item1,
                                              const item_struct *item2));
};

struct Item { int x; };

struct ItemPtrsArray : public THeapBasedArray<Item*>
{
    static int __cdecl  Compare1(const Item **pp1, const Item **pp2);

    typedef Item *ItemPtr;
    static int __cdecl  Compare2(const ItemPtr *pp1, const ItemPtr *pp2);
};

int main()
{
    ItemPtrsArray vect;

    vect.Sort(ItemPtrsArray::Compare1);
    vect.Sort(ItemPtrsArray::Compare2);
} 
```

对 Sort 的第一次调用失败：

> > cpptest1.cxx(21) : 错误 C2664: 'THeapBasedArray::Sort' : 无法将参数 1 从 'int (_ *cdecl *)(const Item **, const Item **)' 转换为 'int (* _cdecl *)(const item_struct *, const item_struct *)

而第二次调用编译器很好。对我来说，这是编译器中的一个错误。有时会发生这种情况。我想这就是答案。

# c# - WP7 - 存储安全数据的最佳方式

> ID：11032128
> 
> 赞同：3
> 
> 时间：2012-06-14T11:29:05.970
> 
> 标签：c#, security, windows-phone-7, encryption, data-storage

我很好奇，以密码等安全方式在 Windows Phone 7 上存储数据的最佳方式是什么？

我探索了这个`ProtectedData`选项，但这是存储（加密）数据的最佳方式吗？如果是这样，实施此选项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:18:41.127

Rob Tiffany 有一篇关于安全存储数据的好文章！你可以在[这里找到它...](http://robtiffany.com/encrypting-your-credentials-on-windows-phone-7-5/)

# forms - 在淘汰赛中解除视图模型与视图的绑定

> ID：11032129
> 
> 赞同：40
> 
> 时间：2012-06-14T11:29:10.927
> 
> 标签：forms, mvvm, knockout.js, unbind

我正在寻找淘汰赛中的解除绑定功能。不幸的是，谷歌搜索和浏览这里提出的问题并没有给我任何关于该主题的有用信息。

我将提供一个示例来说明需要什么样的功能。

可以说我有一个包含多个输入的表单。我也有一个绑定到这个表单的视图模型。出于某种原因，作为对用户操作的反应，我需要从表单中取消绑定我的视图模型，即由于操作完成，我希望我的所有可观察对象停止对相应值的更改做出反应，反之亦然 - 对可观察对象所做的任何更改都应该' t 影响输入值。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-14T12:52:21.267

您可以使用`ko.cleanNode`删除绑定。您可以将其应用于特定的 DOM 元素或更高级别的 DOM 容器（例如，整个表单）。

有关示例，请参见[http://jsfiddle.net/KRyXR/157/ 。](http://jsfiddle.net/KRyXR/157/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-11T09:42:58.067

@Mark Robinson 的答案是正确的。

不过，使用 Mark answer 我做了以下事情，您可能会觉得这很有用。

```
 // get the DOM element
  var element = $('div.searchRestults')[0];
  //call clean node, kind of unbind
  ko.cleanNode(element);
  //apply the binding again
  ko.applyBindings(searchResultViewModel, element); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T06:07:01.170

```
<html>
    <head>
        <script type="text/javascript" src="jquery-1.11.3.js"></script>
        <script type="text/javascript" src="knockout-2.2.1.js"></script>
        <script type="text/javascript" src="knockout-2.2.1.debug.js"></script>
        <script type="text/javascript" src="clickHandler.js"></script>
    </head>
    <body>
        <div class="modelBody">
            <div class = 'modelData'>
                <span class="nameField" data-bind="text: name"></span>
                <span class="idField" data-bind="text: id"></span>
                <span class="lengthField" data-bind="text: length"></span>
            </div>
            <button type='button' class="modelData1" data-bind="click:showModelData.bind($data, 'model1')">show Model Data1</button>
            <button type='button' class="modelData2" data-bind="click:showModelData.bind($data, 'model2')">show Model Data2</button>
            <button type='button' class="modelData3" data-bind="click:showModelData.bind($data, 'model3')">show Model Data3</button>
        </div>
    </body>
</html>
```

@Mark Robinson 给出了完美的解决方案，我在单个 dom 元素上遇到了类似的问题，并在这个单个 dom 元素上更新了不同的视图模型。

每个视图模型都有一个点击事件，当点击发生时，每个视图模型的每次点击方法都被调用，这导致在点击事件期间执行不必要的代码块。

在应用我的实际绑定之前，我遵循@Mark Robinson 的方法来清理节点，它真的很好用。谢谢罗宾。我的示例代码是这样的。

```
function viewModel(name, id, length){
		var self = this;
		self.name = name;
		self.id = id;
		self.length = length;
	}
	viewModel.prototype = {
		showModelData: function(data){
		console.log('selected model is ' + data);
		if(data=='model1'){
			ko.cleanNode(button1[0]);
			ko.applyBindings(viewModel1, button1[0]);
			console.log(viewModel1);
		}
		else if(data=='model2'){
		ko.cleanNode(button1[0]);
			ko.applyBindings(viewModel3, button1[0]);
			console.log(viewModel2);
		}
		else if(data=='model3'){
		ko.cleanNode(button1[0]);
			ko.applyBindings(viewModel3, button1[0]);
			console.log(viewModel3);
		}
	} 
	}
	$(document).ready(function(){
		button1 = $(".modelBody");
		viewModel1 = new viewModel('TextField', '111', 32);
		viewModel2 = new viewModel('FloatField', '222', 64);
		viewModel3 = new viewModel('LongIntField', '333', 108);
		ko.applyBindings(viewModel1, button1[0]);
	}); 
```

# javascript - 如何刷新远程图片？

> ID：11032130
> 
> 赞同：0
> 
> 时间：2012-06-14T11:29:12.333
> 
> 标签：javascript, jquery, ajax

我在网站 abc.com 上的 DIV 中有一张图片，该图片托管在其他地方，例如`<IMG SRC="http://xyz.com/image.jpg">`.

它加载正常，但是，我需要每隔几秒钟更新一次。

大多数要上传的项目都是本地的，但以下代码不适用于远程图片：

`$('#rightpic').load('http://xyz.com/image.jpg', null);`

通过尝试这个，我得到一个错误：`...is not allowed by Access-Control-Allow-Origin.`

谁能推荐一个更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:30:54.580

试试这个，你想实际更改 src，而不是使用 .load() 函数。

```
$('#rightpic').get(0).src = 'http://xyz.com/image.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:33:48.730

`.load`使用 AJAX 请求，因此应用相同的源策略 - 这限制了跨域请求。此外，无论如何，这不是加载图像的最佳方式。此外，设置相同的 url`src`通常会从缓存中加载图像。

相反，您应该为每个请求添加一个随机查询字符串值，例如时间戳，以[“破坏缓存”](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)

```
var img = document.getElementById('rightpic');

//update every 10 seconds using time from epoch as random value
setInterval(function(){
    var randomValue = new Date().getTime();
    img.src = "http://example.com/image.jpg?t="+randomvalue;
},10000); 
```

# bash - 查看文件名并在 bash 中连接它们

> ID：11032133
> 
> 赞同：0
> 
> 时间：2012-06-14T11:29:36.093
> 
> 标签：bash

我以前从未在 bash 中编程过。我正在读取目录中的所有文件，然后我需要查看它们的名称并检查是否有 R1 或 R2，这取决于我需要连接所有具有 R1 的文件和所有具有 R2 的文件名字。因此，作为最终输出，我想要类似的东西：

字符串 1 = file1_R1.gz file2_R1.gz file3_R1.gz...

字符串 2 = file1_R2.gz file2_R2.gz file3_R2.gz...

我怎样才能做到这一点？到目前为止，我唯一的代码是：

```
#!/bin/bash

list=$(echo *.gz)

strR1="R1"
strR2="R2"

if [ "$list" = "*.gz" ] ; then list=""; fi

for str in $list
do
    if echo "$strR1"  | grep -q "$str"; then
         echo "str";
else 
echo "no file";
fi

done 
```

我可以读取目录中的所有文件，但是当我这样做时，如果我找不到任何带有 R1 的文件，并且我知道至少有 4 个名称中带有 R1 的文件。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:32:46.153

为什么要编写一个循环来执行过滤通配符已经为您做的事情？（您已经使用相同的东西进行过滤`*.gz`。）

```
files1=`echo *R1*.gz`
files2=`echo *R2*.gz` 
```

既然你说你想连接所有这些文件，那就是

```
zcat *R1.gz > result_R1
zcat *R2.gz > result_R2 
```

或类似的东西。

# php - 在 PHP 中分解包含括号和分号的字符串

> ID：11032136
> 
> 赞同：0
> 
> 时间：2012-06-14T11:29:41.833
> 
> 标签：php, arrays, string

**问题：**

我有一个看起来像这样的字符串：

```
[1=>2,3,4][5=>6,7,8][9=>10,11,12][13=>14,15][16=>17,18] 
```

**问题：**

你怎么能把那个字符串放进去？

```
1
    2
    3
    4
5
    6
    7
    8
9
    10
    11
    12
13
    14
    15
16
    17
    18 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:37:32.910

我会尝试：

```
$input  = '[1=>2,3,4][5=>6,7,8][9=>10,11,12][13=>14,15][16=>17,18]';
$output = array();

preg_match_all('\[(\d+)=>([\d,]+)\]', $input, $matches);
foreach ($matches as $group) {
  $output[$group[1])] = explode(',', $group[2]);
}

// and print result out:

foreach ( $output as $key => $val ) {
  echo $key . '<br/>';
  foreach ( $val as $v ) {
    echo '    ' . $v . '<br/>';
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:41:36.137

这段代码：

```
$input  = '[1=>2,3,4][5=>6,7,8][9=>10,11,12][13=>14,15][16=>17,18]';
$regex  = '~\[(?P<keys>\d)+=>(?P<values>(?:\d+,?)+)\]~';
$result = array();

if (preg_match_all($regex, $input, $matches)) {
  foreach ($matches['keys'] as $key => $value) {
    $result[$value] = explode(',', $matches['values'][$key]);
  }
}

print_r($result); 
```

结果：

```
Array
(
    [1] => Array
        (
            [0] => 2
            [1] => 3
            [2] => 4
        )

    [5] => Array
        (
            [0] => 6
            [1] => 7
            [2] => 8
        )

    [9] => Array
        (
            [0] => 10
            [1] => 11
            [2] => 12
        )

    [3] => Array
        (
            [0] => 14
            [1] => 15
        )

    [6] => Array
        (
            [0] => 17
            [1] => 18
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:39:35.590

```
$str = "[1=>2,3,4][5=>6,7,8][9=>10,11,12][13=>14,15][16=>17,18]";
$str = explode("]", $str);
$finalResult = array();

foreach ($str as $element) {
    if (!empty($element)) {
        $element = substr($element, 1);
        $element = explode("=>", $element);

        // element[0] contains the key
        $element[1] = explode(",", $element[1]);
        $finalResult[$element[0]] = $element[1];
    }
}

print_r($finalResult); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:42:34.330

```
<?php
$str = "[1=>2,3,4][5=>6,7,8][9=>10,11,12][13=>14,15][16=>17,18]";
$parts1 = explode("][",$str);

$parts1[0]=str_replace("[","",$parts1[0]);
$parts1[count($parts1)-1]=str_replace("]","",$parts1[count($parts1)-1]);

foreach($parts1 as $k=>$v){
    $parts2[]=explode("=>",$v);
}

foreach($parts2 as $k=>$v){
    echo "<div>".$v[0]."</div>";
    foreach(explode(",",$v[1]) as $key=>$value){
        echo "<div style='margin-left:20px'>".$value."</div>";
    }
} 
```

输出将是 ![在此处输入图像描述](../Images/f0e3f91e3fc59f4f014d243f6a696147.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T11:53:11.247

仅使用`str_replace()`：

```
$dict = array(
    '=>' => "\n\t",
    ','  => "\n\t",
    '][' => "\n",
    '['  => '',
    ']'  => '',
);

echo str_replace(array_keys($dict), array_values($dict), $str); 
```

会给你想要的结果。

# makefile - 为opencl程序运行makefile时出错

> ID：11032137
> 
> 赞同：0
> 
> 时间：2012-06-14T11:29:42.273
> 
> 标签：makefile, opencl

我刚刚开始学习 OpenCL。我在输入`make`编译 HelloCL 程序时收到以下错误：

```
mkdir -p depends/x86_64
perl ../../../../../make/fastdep.pl -I. -I../../../../../include  -I../../../../../samples/opencl/SDKUtil/include --obj-suffix='.o' --obj-prefix='build/debug/x86_64//' HelloCL.cpp > depends/x86_64/HelloCL.depend
mkdir -p build/debug/x86_64/
Building build/debug/x86_64//HelloCL.o
g++  -Wpointer-arith   -Wfloat-equal -g3 -ffor-scope   -I  ../../../../../samples/opencl/SDKUtil/include -I  "/opt/AMDAPP/include"  -I  ../../../../../include  -o build/debug/x86_64//HelloCL.o -c  HelloCL.cpp
In file included from HelloCL.cpp:106:0:
/opt/AMDAPP/include/CL/cl.hpp: In function ‘cl_int cl::UnloadCompiler()’:
/opt/AMDAPP/include/CL/cl.hpp:1826:12: error: ‘::clUnloadCompiler’ has not been declared
/opt/AMDAPP/include/CL/cl.hpp: In member function ‘cl_int cl::CommandQueue::enqueueMarker(cl::Event*) const’:
/opt/AMDAPP/include/CL/cl.hpp:4842:13: error: ‘::clEnqueueMarker’ has not been declared
/opt/AMDAPP/include/CL/cl.hpp: In member function ‘cl_int cl::CommandQueue::enqueueWaitForEvents(const std::vector<cl::Event>&) const’:
/opt/AMDAPP/include/CL/cl.hpp:4849:13: error: ‘::clEnqueueWaitForEvents’ has not been declared
/opt/AMDAPP/include/CL/cl.hpp: In member function ‘cl_int cl::CommandQueue::enqueueBarrier() const’:          
/opt/AMDAPP/include/CL/cl.hpp:4985:13: error: ‘::clEnqueueBarrier’ has not been declared                      
make: *** [build/debug/x86_64//HelloCL.o] Error 1 
```

有人可以帮助我理解我所看到的错误，并提出需要进行的更正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:51:02.780

我建议从以下网址下载最新的 AMD APP SDK：http: [//developer.amd.com/sdks/AMDAPPSDK/downloads/Pages/default.aspx](http://developer.amd.com/sdks/AMDAPPSDK/downloads/Pages/default.aspx)

并尝试再次运行示例，此 SDK 支持：OpenCL 1.2，因此您应该看不到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:31:30.377

看起来您使用的 cl.hpp 没有被您的 SDK 支持的 OpenCL 版本采用。尝试[来自 Khronos 站点的 cl.hpp](http://www.khronos.org/registry/cl/)。

# javascript - 画布html标签

> ID：11032138
> 
> 赞同：2
> 
> 时间：2012-06-14T11:29:44.863
> 
> 标签：javascript, jquery, image, html

我有一个 JavaScript 项目（使用 jquery），在其中我通过代码绘制画布，然后在其上插入图像数组。它代表没有任何错误。

**问题：** `later on, i try to get these images inside from canvas to compare if they have the same src or the same id to don't replace it with the new image`

我的职能是：

```
var inter;
var screen;

function onClick(id){
    getScreen(id, function(data){
        screen=window.open('',id,'width=' + data.maxX + ',height=' + data.maxY , true);
        if (screen.document.getElementById("screen") != null ){    
            screen.document.getElementById("screen").innerHTML = "";
        }
        screen.document.write('<div id="screen"><canvas id="screenCanvas" width=' +
                              data.maxX + ' height=' + data.maxY + 
                              ' style="border:2px solid #000000;color:#000000;" ></canvas></div>');
        draw(data);
        inter = setInterval(function(){screen(id); }, 5000);
    });
}

function screen(id){
    getScreen(id, function(data){
        if (screen.closed == true){
            clearInterval(inter);
            return;
        }
        if((screen.document.getElementById('screenCanvas').width != data.maxX) ||
            (data.maxY != screen.document.getElementById('screenCanvas').height)){
            screen.close();
            screen=window.open('',id,'width=' + data.maxX + ',height=' + data.maxY , true);        
        screen=window.open('',id,'width=' + data.maxX + ',height=' + data.maxY , true);
        if (screen.document.getElementById("screen") != null ){    
            screen.document.getElementById("screen").innerHTML = "";
        }
        screen.document.write('<div id="screen"><canvas id="screenCanvas" width=' +
                              data.maxX + ' height=' + data.maxY + 
                              ' style="border:2px solid #000000;color:#000000;" ></canvas></div>');
        draw(data);
    });
}

function draw(data) {  
    var canvas = screen.document.getElementById('screenCanvas');
    var context = canvas.getContext('2d');  
    var tileY = 0;
    var tileX = 0;
    var counter = 0;
    var tileWidth = data.tileWidth;
    var tileHeight = data.tileHeight;
    for (var i=0;i<(data.maxX/data.tileWidth);i++){  
        for (var j=0;j<(data.maxY/data.tileHeight);j++){  
            var img = new Image();  
            img.onload = (function(img, tileX, tileY, tileWidth, tileHeight){
                return function() {
                    context.drawImage(img,tileX, tileY, tileWidth, tileHeight);
                }
            })(img, tileX, tileY, tileWidth, tileHeight);  
            img.src = "http://myserver:8080/images/screen/tile/" + 
                       data.tiles[counter].imageId; 
            tileX = tileX + parseInt(data.tileWidth); 
            counter ++; 
         } 
        tileY = tileY + parseInt(data.tileHeight); 
        tileX = 0;
    }  
}

</script> 
```

此代码获取一个数组`(data) that contains list of (id, maxX, maxY, tileWidth, tileHeight, tiles[x, y, imageId])`并打开新窗口，然后在此窗口中写入画布代码并绘制图像，然后每 5 秒调用一个计时器。每 5 秒后，screen 方法调用以再次重新获取数据并检查屏幕是否打开，然后删除所有内部 html 以重写新画布，并测试大小是否发生变化。

此代码工作正常，没有任何错误，但我需要编辑这些代码以获取画布内的图像并对其进行测试，它们具有相同的 imageId，不要再次下载它。（我不保存图像 ID，以获取图像，我们可以将它存储在 img.id 中，或者通过 src 获取图像，因为 imageId 是图像路径的一部分，使其具有唯一性）。

**笔记：**

```
id[unique](is the id of the user), 
maxX(maximum width of the screen), 
maxY(maximum height of the screen), 
tileWidth(width of each image), 
tileHeight(height of each image),
tiles(list of images)
    x(left position of the image)
    y(top postion of the image) 
    imageId[unique](id of each image)
example: data[id:1,maxX:1920,maxY:1080,tileWidth:480,tileHeight:270,tiles:(x:2,y:1,imageId:1a)] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:21:28.403

如前所述`Ravi Jain`，您无法将图像绘制到画布对象上，并且如前所述，`robertc`您可以使用 img 元素。

尝试这些指定使用 img 元素而不是画布的函数：

```
function onClick(id){
    getScreen(id, function(data){
        var inter;
        var screen;
        var width = parseInt(data.maxX) + parseInt(data.tileWidth);
        var height = parseInt(data.maxY) + parseInt(data.tileHeight);
        screen=window.open('',id,'width=' + width + ',height=' + height , true);
        draw(screen, data);
        inter = setInterval(function(){screen(screen, inter, id); }, 5000);
    });
}

function screen(screen, inter, id){
    getScreen(id, function(data){
        if (screen.closed == true){
            clearInterval(inter);
            return;
        }
        if((screen.document.getElementById("screen").style.width != data.maxX + "px") ||
           (screen.document.getElementById("screen").style.height != data.maxY + "px")){
            screen.close();
            var width = parseInt(data.maxX) + parseInt(data.tileWidth);
            var height = parseInt(data.maxY) + parseInt(data.tileHeight);
            screen=window.open('',id,'width=' + width + ',height=' + height , true);
        }
        draw(screen, data);
    });
}

function draw(screen, data) {
    var screenDiv = screen.document.getElementById("screen");
    if (screenDiv == null) screen.document.write('<div id="screen" style="width:' +
                data.maxX + '; height:' + data.maxY + '; " style="margin: 0 auto;" >');
    var tileY = 0; 
    var tileX = 0;
    var counter = 0;
    for (var i=0;i<(data.maxX/data.tileWidth);i++){ 
        for (var j=0;j<(data.maxY/data.tileHeight);j++){  
            var imageSource = screen.document.getElementById("id_" + counter);
            var path = "http://myserver:8080/images/screen/tile/" + 
                       data.tiles[counter].imageId; 
            if (imageSource == null){
                screen.document.write('<img id="id_' + counter + '" src="' + path +
                '" height="' + data.tileHeight + '" width="' + data.tileWidth + '" />');
            }else if(imageSource.src != path){
                imageSource.src = path;
            }
            tileX = tileX + parseInt(data.tileWidth); 
            counter ++; 
        }
        tileY = tileY + parseInt(data.tileHeight); 
        tileX = 0;
    }
    if (screenDiv == null) screen.document.write('</div>');
}

</script> 
```

您的代码工作正常，这是真的，但仅在一个实例中，您在脚本顶部声明 var screen 和 var inter 而不是在函数中，这意味着如果您单击第一个用户以获取它的屏幕（就像我了解您的代码，您的项目做了什么），第一个用户的计时器停止，第二个用户的计时器开始。我写的这段代码解决了这个问题，如果图像发生变化，你的问题是替换图像的源。

希望这对你有帮助

祝你好运;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:23:02.920

一旦你在`canvas`它的像素上画了一些东西。它不保留用于创建这些像素的对象。如果您想要此类信息，那么您要么需要自己在外部维护它`canvas`，要么使用为您保留对象的东西，[例如 SVG](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-map-element.html#svg-0)。

# actionscript-3 - Netstream 视频无法在 iPad 上播放

> ID：11032141
> 
> 赞同：0
> 
> 时间：2012-06-14T11:30:20.073
> 
> 标签：actionscript-3, air

我正在使用 Flash CS6 构建一个 iPad 应用程序，以便在 PC 上编译为 AIR 3.3。

应用程序要求之一是可以与其他显示元素叠加的视频播放器 - 主要用于字幕。

我正在使用 Netstream 播放 MP4 视频（也尝试过具有相同结果的 FLVPlayer）。
编译后在模拟器中运行时一切正常，但是一旦安装在我的测试设备 iPad 3 上，视频就无法播放。
（几个月前我做了一个简单的测试，视频可以正确播放音频，但那是 CS5 .5，AIR 3.1，iPad 2。我会回到这个设置，但我显然还需要支持 iPad3...）

所以，先问几个简单的问题......
有同样问题的人吗？
你知道最近 iOS 上是否有任何改变阻止 AIR 播放视频吗？

我做通常的 netstream / netconnection 的东西，然后将 a 传递`File.url`给`netstream.play()`.
以下是代码的核心：

```
var nc:NetConnection = new NetConnection();
var ns:NetStream;
var vid:Video = new Video();
var videoFile:File;
videoFile = File.applicationDirectory;
videoFile = videoFile.resolvePath(Config.VIDEO_DIRECTORY + 'myVideo.mp4');
nc.connect(null);
ns = new NetStream(nc);
ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus, false, 0, true);
ns.client = this; // To handle onMetaData & onXMPData
vid.attachNetStream(ns);
vid.smoothing = true;
addChild(vid);
ns.play(videoFile.url); 
```

发布设置为：

> 硬件加速 :: Level 2 - GPU（也尝试过 Direct）
> Render Mode :: GPU（也尝试过 Direct）
> Device :: iPad
> Resolution :: High（也尝试过 Standard）
> 包含文件 :: app.swf, app.xml ，带有视频/图像的资产目录（图像加载良好）（尝试直接包含.mp4而不是在目录中，没有区别）

你们中的任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:26:18.337

Ok, fixed.

The above code is all correct (works perfectly), but the video file was wrong.

I still don't understand why, and would welcome some response, but I have switched to .flv formatted video and it works fine.

The file I was testing was encoded for iPad and ran fine when played in AIR on the desktop, and when imported to the iPad and played natively.

Any insight to encoding presets (I am running Adobe Media Encoder) for mp4 would be interesting.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T12:26:16.800

我有相同的解决方案，它适用于构建中包含的视频。但是，如果我从我的服务器（http）流式传输 flv，则不会发生任何事情......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:55:58.977

当我开始使用 AIR 3.3 时，我遇到了同样的问题。当我尝试播放视频时，应用程序会崩溃。

当我回到 AIR 3.1 时，问题消失了，再次能够毫无问题地播放 h.264 MP4 视频。

根据以下链接，AIR 3.3 中似乎存在一个错误，据说会在 3.4 发布时修复。@参见[https://bugbase.adobe.com/index.cfm?event=bug&id=3210031](https://bugbase.adobe.com/index.cfm?event=bug&id=3210031)

# html - z-index 或不透明度问题？

> ID：11032142
> 
> 赞同：0
> 
> 时间：2012-06-14T11:30:19.857
> 
> 标签：html, css, internet-explorer, internet-explorer-8

我有这个网站[http://wedessertmore.com](http://wedessertmore.com)当您单击顶部菜单链接时会弹出一些表单。在大多数浏览器上都运行良好，除了 IE8 和 IE9，弹出文本显示模糊。我已经尝试了所有项目的 z-index 值的各种组合。可能是因为不透明度值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:45:26.400

`#menu-container *`您的文档在 grid-layout.css 文件中有一个 CSS第 39 行。在那个css`filter:alpha(opacity=10)`中创造了问题。尝试删除它。

# selenium - 在 Eclipse 中通过 testNG 安排执行

> ID：11032143
> 
> 赞同：0
> 
> 时间：2012-06-14T11:30:20.553
> 
> 标签：selenium

我希望我的 selenium(java) 测试脚本安排在每晚 11 点执行。如何在 Eclipse 中执行此操作。我正在使用 TestNG 运行我的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:41:06.700

我建议您使用一个名为[jenkins](http://jenkins-ci.org/)的简单工具来实现您想要做的事情。它是运行计划任务（例如运行 selenium 测试脚本）的绝佳解决方案。

# three.js - 三.js自定义objLoader几何光照

> ID：11032145
> 
> 赞同：5
> 
> 时间：2012-06-14T11:30:32.300
> 
> 标签：three.js

我有这个对象，我正在用 THREE.objLoader 加载，然后用它创建一个网格，如下所示：

```
mesh = new THREE.SceneUtils.createMultiMaterialObject(
  geometry,
  [
    new THREE.MeshBasicMaterial({color: 0xFEC1EA}),
    new THREE.MeshBasicMaterial({
      color: 0x999999,
      wireframe: true,
      transparent: true,
      opacity: 0.85
    })
  ]
); 
```

然后在我的场景中添加一个 DirectionalLight，它可以工作并且我可以看到我的对象，但它就像 DirectionalLight 是环境光一样。没有一张脸会像它应该的那样变暗或变亮。

对象被颜色填充，但没有应用光照。如果有人可以帮助我，将不胜感激:)

我会错过什么？

Jsfiddle在这里：http: [//jsfiddle.net/5hcDs/](http://jsfiddle.net/5hcDs/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:54:44.727

好吧，伙计们，感谢 Maël Nison 和 doob 先生，我能够理解我所缺少的几件事，作为我完全的 3d 菜鸟......我相信开始进入 3d 的人们可能会发现一些有用的回顾：

### 基本 3d 概念

*   3d**面**由一些点（**顶点**）和一个称为**法线**的向量组成，表示面的方向（哪一侧是正面，哪一侧是背面）。

*   没有法线可能真的很糟糕，因为默认情况下仅在正面应用照明。因此在尝试应用 LambertMaterial 或 PhongMaterial 时使用黑色模型。

*   OBJ 文件是一种描述 3D 信息的方式。想了解更多信息吗？阅读[这篇维基百科文章（英文）](http://en.wikipedia.org/wiki/Wavefront_.obj_file)。此外，[法语页面](http://fr.wikipedia.org/wiki/Objet_3D_(format_de_fichier))提供了一个可用于测试的多维数据集示例。

### Three.js 提示和技巧

*   当法线不存在时，无法应用照明，因此会渲染黑色模型。Three.js 实际上可以使用 geometry.computeVertexNormals() 和/或 geometry.computeFaceNormals() 计算顶点和面法线，具体取决于缺少的内容

*   当你这样做时，Three.js 的法线计算可能会出错并且你的法线会被翻转，要解决这个问题，你可以简单地循环遍历几何体的 faces 数组，如下所示：

```
/* Compute normals */
geometry.computeFaceNormals();
geometry.computeVertexNormals();

/* Next 3 lines seems not to be mandatory */
mesh.geometry.dynamic = true
mesh.geometry.__dirtyVertices = true;
mesh.geometry.__dirtyNormals = true;

mesh.flipSided = true;
mesh.doubleSided = true;

/* Flip normals*/               
for(var i = 0; i<mesh.geometry.faces.length; i++) {
  mesh.geometry.faces[i].normal.x = -1*mesh.geometry.faces[i].normal.x;
  mesh.geometry.faces[i].normal.y = -1*mesh.geometry.faces[i].normal.y;
  mesh.geometry.faces[i].normal.z = -1*mesh.geometry.faces[i].normal.z;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:05:19.597

您必须使用 MeshPhongMaterial。MeshBasicMaterial 在计算片段颜色时不考虑光照。

但是，当使用 MeshPhongMaterial 时，您的网格会变成黑色。我从来没有使用过 OBJ 加载器，但你确定你的模型法线是正确的吗？

顺便说一句：您可能想改用 PointLight。并且它的位置可能应该设置为相机位置（`light.position = camera.position`应该可以做到这一点，因为当控件将编辑相机位置时，它将允许移动灯光）。

# java - Java Android Unhandled 异常类型 IOException 和 Unhandled 异常类型 ClientProtocolException

> ID：11032146
> 
> 赞同：1
> 
> 时间：2012-06-14T11:30:34.517
> 
> 标签：java, android, html

在我的 Android 应用程序中，我将获得一个 html 页面的源代码。那是我的代码：[http](http://pastebin.com/FJyWhVrL) : //pastebin.com/FJyWhVrL 它每次都通过 getHtml() 向我展示；未处理的异常类型 IOException 和未处理的异常类型 ClientProtocolException。在清单文件中，我设置了权限，如下所示：

```
<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".DownloadsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:58:34.973

这些是编译错误。您正在调用`getHtml`，它可以抛出这两个异常。

所以你需要在你的代码中捕获它们并做一些事情。

```
button.setOnClickListener(new OnClickListener() {
           public void onClick(View v) {
                try {
                  getHtml();
                }
                catch (IOException e){
                   // do something
                }
                catch (ClientProtocolException e){
                   // do something
                }

           }
        }); 
```

# android - 将消息从一个移动设备上的应用程序发送到另一设备上的另一个应用程序

> ID：11032147
> 
> 赞同：2
> 
> 时间：2012-06-14T11:30:35.237
> 
> 标签：android

嗨，我想将消息从一个应用程序（将安装在 android 手机上）发送到另一个应用程序（将安装在另一台手机上）。这表示

一部手机------------向另一部手机发送消息-------->。

同样，我希望第二部手机发送---------消息 ----- 到第一部手机。

如果我使用短信发送消息，我认为它将保存在短信框中，因此用户可以阅读该消息。我想隐藏消息。那么有什么方法可以直接从一个应用程序向另一个应用程序发送消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:43:12.830

如果您想阻止将短信保存到收件箱，您可以中止广播：

```
public class SmsReceiver extends BroadcastReceiver {
    // ...
    @Override
public void onReceive(Context context, Intent intent) {
        // ...
        if( smsIsMine() ) {
            // Do something with  sms
            this.abortBroadcast();
        } 
    }
} 
```

您还需要在 AndroidManifest.xml 中将 SmsReceiver 的优先级设置为可能的最高优先级，如下所示：

```
<receiver
    android:name=".SmsReceiver">
    <intent-filter android:priority="10" >
    <!-- ... -->
    </intent-filter>
</receiver> 
```

# android - 安卓邮箱信息

> ID：11032154
> 
> 赞同：1
> 
> 时间：2012-06-14T11:30:53.193
> 
> 标签：android

我发现了很多通过 android 应用程序发送电子邮件的示例，但我需要显示最后一封收入电子邮件主题的应用程序。我找到[了如何使用 JavaMail](https://stackoverflow.com/questions/4790844/how-to-get-the-list-of-available-folders-in-a-mail-account-using-java-mail)和这个[Listing Inbox with Javamail API](https://stackoverflow.com/questions/9101615/listing-inbox-with-javamail-api)获取邮件帐户中可用文件夹的列表，但是当我启动我的应用程序时，我看到“应用程序 myApp 已意外停止”。

# xcode - XCode 4.3.2 SDLMain.o 中的 SDL 未定义符号

> ID：11032157
> 
> 赞同：4
> 
> 时间：2012-06-14T11:31:00.543
> 
> 标签：xcode, sdl, undefined, symbols

我已经开始尝试在 Xcode 4.3.2 中使用 SDL，所以我为 Mac OS X 启动了一个 Cocoa 应用程序并连接了我所有的框架：OpenGL、SDL 等。我没有 SDL_Image、SDL_Mixer 等。（我需要这些吗？ ) 当我尝试编译只有 SDLmain.h 和 SDLmain.m 的项目时，我收到此错误：

```
Undefined symbols for architecture x86_64: "_SDL_main", referenced from: -[SDLMain applicationDidFinishLaunching:] in SDLMain.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:56:32.640

我在 Xcode 4.5 和 OS X 10.7 上遇到了与 SDL 1.2.15 相同的问题，结果发现问题是我将`SDLMain.m`和`SDLMain.h`（根据 libSDL 网站上关于 OS X 框架的建议）添加到现有的 SDL 项目中，该项目搞砸了与`main`. 底线是您不需要这些文件，因为您使用的是 Cocoa——SDL 自己的测试应用程序也不使用它，并且在 OS X 上运行得很好。

# css - CSS：将内容拉伸到粘性页脚

> ID：11032159
> 
> 赞同：0
> 
> 时间：2012-06-14T11:31:23.847
> 
> 标签：css

我想将导航和内容列拉伸到 .page_wrapper 的底部

见：http: [//jsfiddle.net/KqQ42/8/](http://jsfiddle.net/KqQ42/8/)

我已经尝试过以下操作：

```
min-height: 100%;
height: auto; 
```

但这并没有改变任何东西......

我还需要添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:48:37.350

集成**[人造列](http://www.alistapart.com/articles/fauxcolumns/)**就可以了。

这样，您将通过背景图像模拟 100% 高度的导航和内容。

**现场演示**：[这里](http://jsfiddle.net/TqKMW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:51:12.233

如果您想要基于窗口大小的灵活高度，您可以使用百分比作为您的高度。在这种情况下，您需要在所有容器/div 上使用百分比。

示例：http: [//jsfiddle.net/KqQ42/11/](http://jsfiddle.net/KqQ42/11/)

# linux - 为什么cygwin这么慢

> ID：11032161
> 
> 赞同：8
> 
> 时间：2012-06-14T11:31:25.033
> 
> 标签：linux, cygwin

我在 Ubuntu 上运行了一个脚本，并测试了它的时间：

```
$ time ./merger
./merger  0.02s user 0.03s system 99% cpu 0.050 total 
```

它花了不到1秒。但如果我使用 cygwin：

```
$ time ./merger
real    3m22.407s
user    0m0.367s
sys     0m0.354s 
```

它花了超过3分钟。为什么会这样？我该怎么做才能提高cygwin的执行速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-18T10:15:07.860

正如其他人已经提到的，[Cygwin](https://www.cygwin.com/faq.html#faq.api.fork)在 Windows 上的 fork 和进程生成的实现通常很慢。

使用[这个 fork() 基准](https://github.com/mondalaci/fork-benchmark/blob/master/fork-benchmark.c)，我得到以下结果：

```
rr-@cygwin:~$ ./test 1000
Forked, executed and destroyed 1000 processes in 5.660011 seconds.

rr-@arch:~$ ./test 1000
Forked, executed and destroyed 1000 processes in 0.142595 seconds.

rr-@debian:~$ ./test 1000
Forked, executed and destroyed 1000 processes in 1.141982 seconds. 
```

`time (for i in {1..10000};do cat /dev/null;done)`用于对进程生成性能进行基准测试，我得到以下结果：

```
rr-@work:~$ time (for i in {1..10000};do cat /dev/null;done)
(...) 19.11s user 38.13s system 87% cpu 1:05.48 total

rr-@arch:~$ time (for i in {1..10000};do cat /dev/null;done)
(...) 0.06s user 0.56s system 18% cpu 3.407 total

rr-@debian:~$ time (for i in {1..10000};do cat /dev/null;done)
(...) 0.51s user 4.98s system 21% cpu 25.354 total 
```

硬件规格：

*   **赛格温**：`Intel(R) Core(TM) i7-3770K CPU @ 3.50GHz`
*   **拱门**：`Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz`
*   **Debian**：`Intel(R) Core(TM)2 Duo CPU T5270 @ 1.40GHz`

所以如你所见，无论你使用什么，Cygwin 总是会运行得更糟。`cygwin`它甚至对更差的硬件（与`debian`此基准相比，根据[此比较](http://cpuboss.com/cpus/Intel-Core2-Duo-T5270-vs-Intel-Core-i7-3770K)）失去了手感。

# html - 当我将鼠标悬停在 div 标签的外侧时，图标开始闪烁

> ID：11032166
> 
> 赞同：2
> 
> 时间：2012-06-14T11:31:46.280
> 
> 标签：html, css

这是查看链接：http: [//jsfiddle.net/mQsWc/10/](http://jsfiddle.net/mQsWc/10/)

我在值列中有一个文本字符串，这些是可编辑的项目。作为指示，我在文本字符串后使用了铅笔图标。问题是如果我在空白区域（文本字符串的右侧）周围移动鼠标，铅笔图标会变得华丽（闪烁）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:03:45.690

反而

```
<div class="ghostPencil">some number</div> 
```

写

```
<span class="ghostPencil">some number</span> 
```

闪烁会消失

编辑：

工作示例：http: [//jsfiddle.net/mQsWc/15/](http://jsfiddle.net/mQsWc/15/)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:08:59.400

这是不眨眼的工作小提琴。

演示小提琴：http: [//jsfiddle.net/mQsWc/25/](http://jsfiddle.net/mQsWc/25/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:44:42.630

我正在发送两种修复错误的方法。我希望他们会帮助你。

[http://jsfiddle.net/mQsWc/22/](http://jsfiddle.net/mQsWc/22/)

[http://jsfiddle.net/mQsWc/24/](http://jsfiddle.net/mQsWc/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:38:05.770

这是因为您`div`的 s 是透明的，并且指针命中目标在 div 和它的 container 之间交替`td`。为避免这种情况，我建议您将编辑功能和 UI 反馈与`td`而不是`div`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:45:39.133

这将解决您的问题..它将消除闪烁效果

```
.ghostPencil {
       width:100%;
    } 
```

编辑

或者，如果您希望铅笔出现在悬停上，`td`那么给 .ghostPencil 的父 td 一个类假设 .parent 并使用以下代码

```
.parent:hover .ghostpencil{
        background:url("icon_pencil.png") no-repeat right; 
    padding-right:15px;
    cursor:pointer;
    float:left;
} 
```

正如亚历山大所建议的那样

# android - 处理断开的网络连接的最佳策略？

> ID：11032169
> 
> 赞同：2
> 
> 时间：2012-06-14T11:31:54.923
> 
> 标签：android, synchronization, client-server, networkstream

我想让我的应用程序与服务器保持同步。客户端（Android 应用程序）和服务器之间的通信是通过 JSON 对象/HTTP 处理的。如果连接不再可用，最好的策略是什么？重要的是，用户可以继续使用该应用程序工作。是否存在此类同步问题的框架？

我想到了一个交易队列？！有什么推荐或经验吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:46:11.157

为了获取......我曾经写过一个缓存 URL 管理器，它会从服务器的回复中加载读取 JSON 并将其写入 SD 卡。如果用户稍后对同一 URL 再次请求，则 URL 管理器将简单地从文件系统返回缓存的 json 作为 JSON 回复。这使得通信代码有些透明，因为我总是在处理 JSON 回复，无论它们是缓存的还是实时的。

为了向服务器发送信息，您可以将所有信息写入数据库，并使用将数据推送到服务器的后台服务。这样，UI 将始终成功写入信息，并且如果有网络连接，您的同步服务将推送数据。使用服务，您可以简单地传递服务意图中的数据，它可以担心写入数据库和同步等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:26:23.213

[http://developer.android.com/training/cloudsync/aesync.html](http://developer.android.com/training/cloudsync/aesync.html)

我想这就是我将在我的下一个项目中使用的:)

# plugins - Photoshop - 自动将图像对齐到网格中

> ID：11032175
> 
> 赞同：0
> 
> 时间：2012-06-14T11:32:35.750
> 
> 标签：plugins, automation, photoshop

是否有可用的脚本/插件/操作可以自动将多个图像对齐到网格样式布局中，例如 wookmark ？

我迫切需要一些东西来自动化这个，作为一个每周项目，我必须将大约 40 个缩略图安排到一个 PSD 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:26:24.197

使用 JavaScript...

您可以使用坐标点数组定义选择，如下所示：

```
var x = 0;
var y = 0;
var w = thumbnailDoc.width; // width of thumbnail document
var h = thumbnailDoc.height; // height of thumbnail document

var sel = [ // Define a rectangle of coordinate points 
    [x, y], // moving clockwise from top-left corner of rectangle
    [x + w, y],
    [x + w, y + h],
    [x, y + h],
    [x, y] //back to start
];

var doc = app.documents.add(200, 200, 72) // create new document (width, height, resolution)

doc.selection.select(sel); // make a selection using the array of coordinates
doc.paste(true) // paste the contents of the clipboard
                // pass in the boolean 'true' to make it paste into the selection 
```

因此，您所要做的就是循环浏览所有图片，将它们调整为缩略图（如果还没有的话），复制到剪贴板，然后粘贴到工作文档上的选择中。边走边逛，增加 x,y 坐标。

# wcf - 如何从 WCF 服务公开多个 MEX 端点？

> ID：11032180
> 
> 赞同：0
> 
> 时间：2012-06-14T11:32:50.320
> 
> 标签：wcf, azure, wcf-binding

我有一个现有的 Web 服务，我希望它公开 2 个 MEX 端点，一个通过它已有的绑定公开，一个通过服务总线中继绑定公开。我知道如何从这里的文章中公开元数据端点：[MSDN Link for Exposing MEX through SB](http://msdn.microsoft.com/en-us/library/windowsazure/ee706721.aspx)

我需要知道如何公开多个 MEX 端点，尤其是对于我所拥有的场景，而且如果我的方法是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:16:11.690

应该是这样

```
<endpoint address ="basicHttp" binding="basicHttpBinding" contract="WCFTest.ISomeContract"/>
<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

 <endpoint name="RelayEndpoint"... />
 <endpoint name="MexEndpoint" contract="IMetadataExchange" binding="netTcpRelayBinding" bindingConfiguration="default" address="mex" /> 
```

# php - POST 的大小限制

> ID：11032183
> 
> 赞同：3
> 
> 时间：2012-06-14T11:33:18.120
> 
> 标签：php, linux

我正在运行大约 PHP 版本 5.3.5。我想启用 SOAP，并使用 webtatic repo 升级到 PHP 版本 5.3.13。一切都很好！除了...

我使用 Ajax 发布了一些数组。完整的数组由客户端发布，但服务器似乎只接收数组的前 1,000 个元素。

我查看了 php.ini，看不到任何限制。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:33:42.507

我将此标记为[PHP 警告的副本：未知：输入变量超过 1000](https://stackoverflow.com/questions/9673895/php-warning-unknown-input-variables-exceeded-1000?lq=1)，但那里的 OP 有不同的问题。因此，这里是评论中的解决方案：

当 PHP 5.3.9+ 返回正好 1000 个变量和/或数组元素时，您会遇到安全限制，请参阅[php.ini:max-input-vars](http://php.net/manual/en/info.configuration.php#ini.max-input-vars)。之前的 PHP 版本可能会遇到由 suhosin 施加的类似限制引起的相同问题，请参阅[其配置](http://www.hardened-php.net/suhosin/configuration.htm)

增加限制或更改传输数据的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:35:57.020

在 php.ini 中有以下配置指令：

```
; Maximum size of POST data that PHP will accept.
; http://php.net/post-max-size
post_max_size = 8M 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:36:15.797

在 php.ini 中寻找

```
post_max_size = 10M 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:37:11.893

[http://support.microsoft.com/kb/208427](http://support.microsoft.com/kb/208427)说 IE 有大约 2k 的限制，我记得 HTML 有一些限制，但我认为 HTML 限制是不发布。

# php - phpunit assertRegExp() 测试在 unix 中通过，在 windows 中失败

> ID：11032186
> 
> 赞同：2
> 
> 时间：2012-06-14T11:33:29.777
> 
> 标签：php, regex, windows, phpunit

我有一个 PHPUnit 测试，它使用正则表达式验证日志文件的输出。日志文件看起来像这样（第一行是空的，但我不知道如何在此处显示）：

```
<empty line>
lfworker01:
-----------------------------------------------------------
Last update:               2012-06-14 11:43:17
Last Segment Sent:         2009-12-02 23:25:00 (1259792700)
Current Segement:          2009-12-03 00:25:00 (1259796300)
Clicks processed Segment:  3
Open sessions Segment:     1
Duration Segment:          0,06 sec
Speed Segment:             47,67 clicks/sec
Uptime:                    0 days 00:00:00
Clicks processed overall:  3
Avg Speed overall:         81,70 clicks/sec
Current memory used:       16,75 MB
Max memory used:           16,75 MB 
```

我正在使用正则表达式验证内容：

```
 $strExpectedMeasurementLog = "#
lfworker01:
-----------------------------------------------------------
Last update:               \d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}
Last Segment Sent:         2009-12-02 23:25:00 \(1259792700\)
Current Segement:          2009-12-03 00:25:00 \(1259796300\)
Clicks processed Segment:  3
Open sessions Segment:     1
Duration Segment:          \d*,\d{2} sec
Speed Segment:             \d*,\d{2} clicks/sec
Uptime:                    0 days 00:00:00
Clicks processed overall:  3
Avg Speed overall:         \d*,\d{2} clicks/sec
Current memory used:       \d*,\d{2} MB
Max memory used:           \d*,\d{2} MB#";

$strActualMeasurementLog = file_get_contents( dirname( __FILE__)."/applogs/measurement.log");
self::assertRegExp( $strExpectedMeasurementLog, $strActualMeasurementLog); 
```

PHPUnit 测试是在 Unix 环境中创建的。此测试在 unix 测试环境中通过，但在 windows 测试环境中失败。通过将此函数应用于 measure.log 文件，我已将 windows 换行符替换为 unix 换行符：

```
public function unixtodos( $strPathFile )
{
  $strCurrent = file_get_contents( $strPathFile );

  $strPattern = "|\r\n|";
  $strReplace = "\n";
  $strNew = preg_replace( $strPattern, $strReplace, $strCurrent );

  file_put_contents( $strPathFile, $strNew );
} 
```

它仍然不匹配，我没有想法:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:00:07.153

解决方案是始终检查换行符。我用 php 在 windows 机器上创建的日志文件有 unix 换行符：

![在 Windows 上使用 php 创建的日志文件](../Images/345e0c5257303d4110d8246d40714e41.png)

在 unix 中从 CVS 签出的 PHPUnit 源文件有 unix 换行符：

![Unix 中的 PHPUnit 源文件](../Images/62b43b5bf42b30e8d1585af3a9489c7d.png)

Windows 中 CVS 的 PHPUnit 源文件检出有 windows 换行符：

![Windows 中的 PHPUnit 源文件](../Images/fbfdc044225bc091c4efa010bf4b59d7.png)

这些换行符破坏了我的正则表达式验证。所以现在我总是将换行符替换为 unix 换行符。

```
// replace possible windows line breaks with unix line breaks
$strExpectedMeasurementLog = preg_replace( "|\r\n|", "\n", $strExpectedMeasurementLog);
$strActualMeasurementLog = preg_replace( "|\r\n|", "\n", $strActualMeasurementLog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:33:44.977

一种方法是用“\s+”替换正则表达式中的所有空格。即说“我希望这里有一些空白，但我不在乎它到底是什么”。我认为这非常适合您的情况，因为这意味着当生成报告的人稍微调整布局时，您的测试不会中断。（重要提示：如果您的测试的全部目的是在有人稍微调整报告布局时捕捉到，那么这是错误的方法！）

缺点是你的正则表达式变成了一个可怕的反斜杠模糊，而不是你目前拥有的漂亮可读的模板。但是让 PHP 为我们完成繁重的工作；请参阅下面的示例，其中 preg_replace 使正则表达式对空格差异不敏感。

```
/** */
class RegexTest extends PHPUnit_Framework_TestCase{

function testRegex(){
$strExpectedMeasurementLog = "#
lfworker01:
-----------------------------------------------------------
Last update:               \d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}
Last Segment Sent:         2009-12-02 23:25:00 \(1259792700\)
Current Segement:          2009-12-03 00:25:00 \(1259796300\)
Clicks processed Segment:  3
Open sessions Segment:     1
Duration Segment:          \d*,\d{2} sec
Speed Segment:             \d*,\d{2} clicks/sec
Uptime:                    0 days 00:00:00
Clicks processed overall:  3
Avg Speed overall:         \d*,\d{2} clicks/sec
Current memory used:       \d*,\d{2} MB
Max memory used:           \d*,\d{2} MB#";

$strExpectedMeasurementLog=preg_replace("/\s+/",'\s+',$strExpectedMeasurementLog);

$strActualMeasurementLog = file_get_contents("test.lf.txt");
self::assertRegExp( $strExpectedMeasurementLog, $strActualMeasurementLog);

$strActualMeasurementLog = file_get_contents("test.crlf.txt");
self::assertRegExp( $strExpectedMeasurementLog, $strActualMeasurementLog);
}

} 
```

（test.lf.txt 是从您的问题中复制和粘贴的；test.crlf.txt 是它的副本，在我的文本编辑器中将 LF 更改为 CRLF。）

**改进**

以上内容有点粗略，因为它允许使用空格字符而不是换行符。所以一个可怕的错误报告可能仍然通过。哪个可能不好？下一个版本只是将模板中的换行符替换为“接受 CR 和 LF 的任意组合”：

```
$strExpectedMeasurementLog=preg_replace("/[\r\n]+/",'[\r\n]+',$strExpectedMeasurementLog); 
```

尽管不是您问题的一部分，但这个问题将“任何空格序列，但不是单个空格”替换为“需要一个或多个空格”：

```
$strExpectedMeasurementLog=preg_replace("/ {2,}/",' +',$strExpectedMeasurementLog); 
```

# apache - 如何为我的 Couchapp 配置 Apache 代理？

> ID：11032192
> 
> 赞同：0
> 
> 时间：2012-06-14T11:34:07.663
> 
> 标签：apache, proxy, couchdb, httpd.conf, couchapp

我想通过**Ubuntu 10.04.1**上的**Apache Webserver 2.2.14**实现代理。对于**Couchdb 1.0.1 上的 Couchapp**，我对此没有经验。代理还应该重定向到另一个 couchdb-database 和 Apaches www-path 中的一些其他路径。目标是调用 sub.something.de 上的 Couchapp (index.html)。

 ****我的问题是：

1.  它有效，但有没有更聪明的方法来做到这一点？我自己的方式看起来像一个解决方法。
2.  一个问题是，当我使用 couchdb-api 注销时，我得到另一个对话框来从 Apache 登录。登录后，我可以注销；）问题是，我要求注销的 uri 看起来像 _:_@sub.something.de，这与我的代理配置不匹配。解决办法是什么？

这是我的 httpd.conf 配置：

```
<VirtualHost *:80>
 DocumentRoot "/var/www/Something"
 ServerName something
 ServerAlias sub.something.de

 AllowEncodedSlashes On
 ProxyRequests Off
 ProxyPreserveHost Off
 ProxyVia On
 KeepAlive Off

 <Proxy *>
  AuthType Basic
  AuthName "Something Login"
  AuthUserFile /home/user/.couchdb_htpasswd
  Require valid-user

  Order deny,allow     
  Deny from all
  Allow from 127.0.0.1
  Satisfy Any
 </Proxy>   

 ProxyPass /something_data http://localhost:5984/something_data/ nocanon
 ProxyPass /data http://localhost:5984/something/_design/prototype/data nocanon
 ProxyPass /css http://localhost:5984/something/_design/prototype/css nocanon
 ProxyPass /vendor http://localhost:5984/something/_design/prototype/vendor nocanon
 ProxyPass /js http://localhost:5984/something/_design/prototype/js nocanon
 ProxyPass /font http://localhost:5984/something/_design/prototype/font nocanon
 ProxyPass /php http://localhost/dev/something/php nocanon
 ProxyPass /uploads http://localhost/dev/something/uploads nocanon
 ProxyPass /_uuids http://localhost:5984/_uuids nocanon
 ProxyPass /_session http://localhost:5984/_session nocanon
 ProxyPass /_users http://localhost:5984/_users nocanon

 ProxyPass /_users !
 ProxyPass /_uuids !
 ProxyPass /_session !
 ProxyPass /php !
 ProxyPass /uploads !
 ProxyPass /font !
 ProxyPass /data !
 ProxyPass /css !
 ProxyPass /vendor !
 ProxyPass /js !
 ProxyPass /something_data !

 ProxyPass /  http://localhost:5984/something/_design/prototype/index.html nocanon
 ProxyPassReverse / http://localhost:5984/something/_design/prototype/
 RequestHeader unset Authorization

 ErrorLog "/home/user/logs/couchdb_error_log"
 CustomLog "/home/user/logs/couchdb_access_log" common
</VirtualHost> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:49:49.050

在 couch.js 中设置 urlPrefix 的值

```
#vi /etc/httpd/conf/httpd.conf
ProxyPass /_db/  http://localhost:5984/
ProxyPassReverse /_db/ http://localhost:5984/

#vi  /usr/share/couchdb/www/script/couch.js
CouchDB.urlPrefix = '/_db/'; 
```****

# google-app-engine - 如何在启用计费的情况下增加 App Engine 转换服务配额限制

> ID：11032199
> 
> 赞同：1
> 
> 时间：2012-06-14T11:34:24.683
> 
> 标签：google-app-engine, gae-quotas

显然，无论您是否启用了计费，[转换服务配额限制为每天 100 次转换。](https://developers.google.com/appengine/docs/quotas?hl=pl-PL#Conversion)

1.  如何增加这个配额？
2.  如何查看当前转换服务的配额使用情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:37:59.883

您可以向Google[申请加价](http://support.google.com/code/bin/request.py?&contact_type=AppEngineCPURequest)

# android - 使用phonegap的android表中列表视图的滚动条

> ID：11032203
> 
> 赞同：2
> 
> 时间：2012-06-14T11:34:31.990
> 
> 标签：android, cordova, iscroll

我正在使用 phonegap 开发 android 平板电脑。在我的应用程序中，我将我的 html 分成两个包含列表视图的垂直部分，并且我正在用来自不同服务的数据填充这些列表视图。我想为每个列表视图添加单独的滚动条，以便我只能滚动列表视图但不能滚动孔页。我尝试使用 iscroller，但 css 正在影响我现有的 UI。那么任何人都可以展示其他方法来获得这个滚动条吗？或不使用css的iscroller？什么都好。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:14:54.950

尝试使用实验性 jquery 移动滚动视图[https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview](https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview)

GitHub 存储库包含几个示例来展示如何使用它。

# eclipse - BIRT - .rptdesign 有错误，无法运行

> ID：11032206
> 
> 赞同：3
> 
> 时间：2012-06-14T11:34:42.723
> 
> 标签：eclipse, birt, php-java-bridge

我成功设置了 BIRT Viewer 和 PHP/Java Bridge，我可以像这样查看/打开从[这个示例包](http://onjava.com/onjava/2006/07/26/examples/birtdeployment.zip)中获得的“testWebReport.rptdesign”报告：

**BIRT 查看器：**

```
http://192.168.0.90:8080/birt/run?__report=report/testWebReport.rptdesign 
```

**PHP/Java 桥：** [源代码/教程](http://www.theserverside.com/news/1363642/Intergrating-BIRT-with-PHP)

```
<?php

define ("JAVA_HOSTS", "192.168.0.90:8080");
define ("JAVA_SERVLET", "/JavaBridge/JavaBridge.phpjavabridge");
$pth = "http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"];
$path_parts = pathinfo($pth);
$imageURLPrefix = $path_parts['dirname'] ."/sessionChartImages/";
require_once("java/Java.inc");

session_start(); 

$here = getcwd();

$ctx = java_context()->getServletContext();
$birtReportEngine = java("org.eclipse.birt.php.birtengine.BirtEngine")->getBirtEngine($ctx);
java_context()->onShutdown(java("org.eclipse.birt.php.birtengine.BirtEngine")->getShutdownHook());

try{

$report = $birtReportEngine->openReportDesign("${here}/payment.rptdesign");
$task = $birtReportEngine->createRunAndRenderTask($report);

$taskOptions = new java("org.eclipse.birt.report.engine.api.HTMLRenderOption");
$outputStream = new java("java.io.ByteArrayOutputStream");
$taskOptions->setOutputStream($outputStream);
$taskOptions->setOutputFormat("html");
$ih = new java( "org.eclipse.birt.report.engine.api.HTMLServerImageHandler");
$taskOptions->setImageHandler($ih);

$taskOptions->setBaseImageURL($imageURLPrefix . session_id());
$taskOptions->setImageDirectory($here . "/sessionChartImages/" . session_id());

$task->setRenderOption( $taskOptions );
$task->run();
$task->close();

} catch (JavaException $e) {
 echo $e; //"Error Calling BIRT";

}
echo $outputStream;

?> 
```

现在我在 BIRT for Eclipse 中创建了一个新报告，然后我尝试通过这两种方法运行它，但只有第一种方法有效。对于第二个，我收到了这条消息：

> [[o:Exception]:"java.lang.Exception: Invoke failed: [[o:ReportEngine]]->openReportDesign((o:String)[o:String])。原因：org.eclipse.birt.report。 engine.api.EngineException:**设计文件 file:/C:/Program%20Files%20(x86)/EasyPHP-5.3.9/www/BirtBridgeTest/payment.rptdesign 有错误，无法运行。**虚拟机：1.7.0_04@http://java.oracle.com/”在：#-14 org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.getReportDesignHandle(ReportEngineHelper.java:260)#-13 org .eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:274) #-12 org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:196) #-11 org.eclipse.birt.report.engine.api.impl.ReportEngineHelper.openReportDesign(ReportEngineHelper.java:130) #-10 org.eclipse.birt.report.engine.api.impl.ReportEngine.openReportDesign(ReportEngine. java:304) #-9 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) #-8 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) #-7 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 43) #-6 java.lang.reflect.Method.invoke(Method.java:601) #-5 php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1044) #-4 php.java.bridge.Request.handleRequest(Request.java:417) #-3 php.java.bridge.Request.handleRequests(Request.java:500) #-2 php.java.bridge.http.ContextRunner.run(ContextRunner.java:145) #-1 php.java.bridge.ThreadPool $Delegate.run(ThreadPool.java:60) #0 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(232): java_ThrowExceptionProxyFactory->getProxy(6, '@ V', 'T', true) #1 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(360): java_Arg->getResult(true) #2 C: \Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(366): java_Client->getWrappedResult(true) #3 C:\Program Files (x86)\EasyPHP-5.3.9\ www\BirtBridgeTest\java\Java.inc(560): java_Client->getResult() #4 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(1752): java_Client->invokeMethod(4, 'openReportDesig...', Array) # 5 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(1851): java_JavaProxy->__call('openReportDesig...', Array) #6 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\java\Java.inc(1999): java_AbstractJava->_*call('openReportDesig...', Array) #7 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\HTMLOutput.php(20): Java->* _call('openReportDesig...' , 数组) #8 C:\Program Files (x86)\EasyPHP-5.3.9\www\BirtBridgeTest\HTMLOutput.php(20): java_InternalJava->openReportDesign('C:\Program File...') #9 {主要的}]

我已经发现导致问题的不是报告的内容，因为我创建一个与数据库连接并显示一些图表的报告或者我只是创建一个空白的报告都没有关系 - 结果是相同。

有人对此有解决方案吗？这几天真的阻碍了我的工作取得任何进展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:12:42.643

我终于通过在 Eclipse“XML Source”选项卡中编辑以下行来解决这个问题：

```
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1"> 
```

我所要做的就是将版本从 3.2.23 更改为 3.2.2。您可以通过直接在记事本中编辑 .rptdesign 文件来做到这一点。

# deployment - WebLogic 和 OSGi

> ID：11032214
> 
> 赞同：4
> 
> 时间：2012-06-14T11:35:09.883
> 
> 标签：deployment, weblogic, osgi, bnd

有没有办法在 Weblogic Application Server 中运行 OSGi 容器？我知道它可以与 JBoss、Glassfish 一起使用，并且有可能将 Equinox servlet 桥添加到您的 OSGi 项目中（桥的实现太旧了）。但我想要类似于 JBoss/Glassfish 功能的东西，因为已经有 OSGi 实现，所以部署 OSGi 环境非常容易。我发现的大多数文章都很旧，而且没有更近期的了。有人可以提供提示或更好的链接吗？

也许 Bnd 可以为我创建一个 .war 文件，但我怎样才能实现它。我读到有可能。例子会很棒！

**编辑**

仅适用于仍在调查该案的人。从 12.1.2 版开始，Weblogic 支持开箱即用的 OSGi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:26:47.150

我会考虑[Apache Felix Http bridge](http://felix.apache.org/site/apache-felix-http-service.html#ApacheFelixHTTPService-UsingtheServletBridge)。它对我来说比古老的 Equinox 桥好得多（我把它弄乱了一段时间，但从来没有让它很好地工作），在我切换到 Felix 之后，我很快就得到了一些东西。

如果我对您的理解正确，您想制作一个可以部署在任何 Java EE 服务器中的“普通”war 文件。如果是这样的话，你的war文件就没有OSGi，所以我认为Bnd不会为你做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T05:17:20.557

WebLogic 现在在 12.1.2 版本中支持 OSGi。看到[这个](http://docs.oracle.com/middleware/1212/wls/WLPRG/osgi.htm)

# gwt - CellTree 和 Panels GWT 之间的交互

> ID：11032221
> 
> 赞同：-1
> 
> 时间：2012-06-14T11:35:34.907
> 
> 标签：gwt, uibinder

我是 GWT 的新手。我在左侧有一个 CellTree，它包含三个层次结构，即会话、uproc 和批处理。我在中心有三个 Composite Widget，每个 Session、Uproc 和 Batch 一个用于显示其详细信息。在这些小部件的 UiBinder 中，我有将显示数据的 FormPanel。

我希望当我单击树的会话节点时，我的 Session formPanel 小部件应该填充会话数据，并且 uproc 和批处理面板的可见性应该设置为 false。

同样，当我单击 Uproc 节点时，会话和 Uproc 面板应填充数据（uproc 是会话的子级），但会话面板中的字段应禁用，批处理面板应禁用。

同样，当我单击批处理节点时，会话和 Uproc 面板应填充数据（批处理是 uproc 的子级），但会话和 uproc 面板中的字段应禁用，批处理面板应填充所选数据批。

请让我知道如何实施此方案。我正在使用 gwt 2.4。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:52:40.107

您必须为您的小部件和它提供一个[SelectionModel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/SelectionModel.html)。您必须将 添加到要进行交互的每个级别的构造函数中。 在回调中，您可以更改中心面板。`CellTree``SelectionChangeHandler``SelectionModel``DefaultNodeInfo`
`SelectionChangeHandler`

查看 Showcase [CellTree](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTree)示例了解如何操作。

# android - Android应用程序中的地图叠加层

> ID：11032223
> 
> 赞同：1
> 
> 时间：2012-06-14T11:35:51.380
> 
> 标签：android, google-maps

![在此处输入图像描述](../Images/64a2e7a35c78b82f49cc4ef3e60604d4.png)我正在尝试在我的 android 应用程序中将 pin 图像添加到我的地图的某些位置，但是我的地图上出现了一个大的半透明矩形，它不允许我与主地图交互，我尝试使用地图叠加或逐项地图叠加，但我得到相同的结果，我不知道这是因为图像，还是当有人在他的地图上添加叠加时通常会发生这种情况。PS我正在使用.png图像

如果有人可以帮助我，我将不胜感激
谢谢

这是逐项覆盖类

```
private class MirItemizedOverlay extends ItemizedOverlay {

        private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

        public MirItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
            // TODO Auto-generated constructor stub
        }

        @Override
        protected OverlayItem createItem(int i) {
            return mOverlays.get(i);
        }

        @Override
        public int size() {
            return mOverlays.size();
        }

        public void addOverlayItem(OverlayItem overlayItem) {
            mOverlays.add(overlayItem);
            populate();
        }

        public void addOverlayItem(int lat, int lon, String title) {
            GeoPoint point = new GeoPoint(lat, lon);
            OverlayItem overlayItem = new OverlayItem(point, title, null);
            addOverlayItem(overlayItem);
        }

    } 
```

这就是我在地图活动的 oncreate 方法中使用它的方式

```
Drawable makerDefault =this.getResources().getDrawable(R.drawable.redcircle);
 MirItemizedOverlay itemizedOverlay = new MirItemizedOverlay(makerDefault); 
  GeoPoint point = new GeoPoint((int) (49.9736518*1E6), (int) (7.114648   *1E6));
   OverlayItem overlayItem = new OverlayItem(point, "hotspot1", null);
  itemizedOverlay.addOverlayItem((int) (49.9736518*1E6), (int) (7.114648 *1E6), "hotspot1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:03:03.537

您应该将您的添加`itemizedOverlay`到`MapView`叠加层：

```
MapView mapView = ...;
mapView.getOverlays().add(itemizedOverlay); 
```

# android - 在 GridView 上准确显示 n 行

> ID：11032225
> 
> 赞同：3
> 
> 时间：2012-06-14T11:35:58.153
> 
> 标签：android, gridview, visible

如何在 GridView 中准确显示 2 行并滚动以显示其他项目？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:14:00.223

你可以给它一个固定的高度

```
<GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="250dp"
        android:layout_marginLeft="25dp"
        android:layout_marginRight="25dp"
        android:layout_toRightOf="@+id/previous"
        android:columnWidth="150dp"
        android:horizontalSpacing="5dip"
        android:numColumns="2"
        android:stretchMode="columnWidth"
        android:verticalSpacing="30dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:43:35.870

如果这里 2 行是 2 列，那么请看这个

[http://developer.android.com/reference/android/widget/GridView.html#setNumColumns(int)](http://developer.android.com/reference/android/widget/GridView.html#setNumColumns%28int%29)

或在网格标记内的 XML 中

机器人：numColumns =“2”

# php - 如何在库中提供日志记录 API

> ID：11032228
> 
> 赞同：2
> 
> 时间：2012-06-14T11:36:05.297
> 
> 标签：php, design-patterns, logging, standards

我编写了一个 PHP5.3 库来通过 SNMP 与我们的几个设备进行通信。我想做的下一部分是允许将要实现它的公司部门将一个 Logger 附加到该类以简化调试、错误处理等。

有没有关于如何做到这一点的通用做法、标准或规则？我希望解决方案尽可能灵活，以便可以附加一个选择的记录器，如 Monolog、Zend_Log、Analog 等......

我正在考虑编写一个执行通用 API 的接口，观察者模式（这可能是矫枉过正且过于灵活，因为我们只需要日志记录），...

**tl;dr**
是否有任何规则或模式，最好是关于如何在库中实现 API 的示例，该库抽象日志记录并将其委托给实现者选择的记录器系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:14:38.290

这就是外观模式，是的，一切都应该只通过接口公开。我已经实现了类似的东西，一个通用的日志接口（虽然它在 C# 中）。几乎，您定义了一个 ILog 接口，然后实现将包装真正的日志记录服务的“驱动程序”。

消费者只要求一个记录器（LogerFactory::GetLog()），我认为记录器可以是单例，所以工厂将始终返回相同的实例。

如果您想同时使用不同的日志记录服务（例如一个保存到文件，另一个保存到数据库），那么 Observer 和 Chain of Responsiblities 在这里工作得很好。但这一切都取决于功能。至少你只有 ILog 接口和它的具体实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:13:31.443

[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。更具体地说，对象适配器。不同的 Logger 系统意味着不同的接口，您的应用程序应该能够与所有这些系统一起工作。看看 GOF 的“设计模式”一书中的 Pluggable Adapters。

# java - 如何在 Liferay 门户中显示错误消息？

> ID：11032229
> 
> 赞同：16
> 
> 时间：2012-06-14T11:36:06.887
> 
> 标签：java, jsp, liferay, portlet, taglib

如何在 Liferay 门户中显示错误消息？我在 liferay.com 网站上读到，为了显示错误消息，我可以使用标签库中的 liferay-ui:error 标签，但它不起作用，如何使用它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-14T13:50:36.217

你在“liferay-ui:error”标签上是对的，所以在你的 JSP 上你将拥有：

```
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>
<liferay-ui:error key="some-error" message="Your error message goes here!" /> 
```

然后在您的 Java 代码中，您通常需要 RenderRequest 或 ActionRequest，但也可以使用任何类型的 HTTPServletRequest 或 PortletRequest。然后将请求对象传递给静态 SessionErrors.add() 方法，如下所示：

```
SessionErrors.add(actionRequest, "some-error"); 
```

然后在下一次 portlet 进入它的渲染阶段时会出现错误。

还有另一个变体`tag`是：

```
<liferay-ui:error exception="<%= SomeException.class %>" message="This is Some Error" /> 
```

使用如下`SessionErrors`代码：

```
try {
    // ... your code which throws the exception goes here
} catch(SomeException se) {
    SessionErrors.add(actionRequest, se.getClass().getName());
} 
```

您可以在此处查看完整的 SessionErrors JavaDoc：http: [//docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/kernel/servlet/SessionErrors.html](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/kernel/servlet/SessionErrors.html)

有任何问题，只需发表评论！

# regex - Perl使用带有变量的匹配函数

> ID：11032234
> 
> 赞同：0
> 
> 时间：2012-06-14T11:36:18.167
> 
> 标签：regex, perl, match

我如何检查与变量而不是简单文本的匹配。我试过了：

```
my $_text = 'Please Help me here!';
my $_searchingText = 'me';
if ($_text =~ $_searchingText) {
    print 'yes!';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:12:53.483

两种选择：

1.  插入`$_searchingText`正则表达式模式：

    ```
    print 'yes' if $_text =~ /$_searchingText/; 
    ```

2.  声明`$_searchingText`为模式：

    ```
    $_searchingText = qr/me/;
    print 'yes' if $_text =~ $_searchingText; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:20:10.113

似乎 index 函数会做你想做的事情（这似乎是在`$_searchingText`内“索引” `$_text`）。

尝试这个：

```
#!/usr/bin/perl -w
use strict;

my $_text = 'Please Help me here!';
my $_searchingText = 'me';

if(index $_searchingText, $_text){
    print 'yes!';
} 
```

或者您可以将要匹配的变量 ( `$_searchingText`) 放在正则表达式匹配运算符中：

```
#!/usr/bin/perl -w
use strict;

my $_text = 'Please Help me here!';
my $_searchingText = 'me';

if($_text =~ m/$_searchingText/){
    print 'yes!';
} 
```

希望有帮助；让我知道我是否可以澄清

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T18:59:41.393

正如其他人指出的那样，您需要在正则表达式周围放置正则表达式标记：

```
if ($_text =~ /$_searchingText/) { 
```

并不是

```
if ($_text =~ $_searchingText) { 
```

* * *

Perl 也可以让标量 Perl 变量包含正则表达式，而不仅仅是字符串或数字：

```
my $_text = 'Please Help me here!';
my $_searchingText = qr/me/;
if ($_text =~ $_searchingText) {
    print 'yes!';
} 
```

`qr`运算符使值包含在正`$_searchingText`则表达式中，因此您不需要`if`语句中的分隔符。它们是可选的。请参阅[Regexp 类似引用的运算符](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)。

# java - Java 修改 foreach 中的元素

> ID：11032235
> 
> 赞同：5
> 
> 时间：2012-06-14T11:36:22.863
> 
> 标签：java, arrays, foreach, autoboxing

我正在自学Java；因此下面的代码除了用于学习/测试之外没有其他功能。

本质上，我正在尝试在 foreach 循环中修改整数数组的元素（即，将它们减半）。

我应该注意，我没有重新排序、添加或删除元素；只是改变他们的价值观。

这是我的代码：

```
Logger.describe("Now copying half of that array in to a new array, and halving each element");
Integer[] copyArray = new Integer[DEFAULT_SAMPLE_SIZE / 2];     
System.arraycopy(intArray, 0, copyArray, 0, DEFAULT_SAMPLE_SIZE / 2);
for (Integer x : copyArray) x /= 2;
Logger.output(Arrays.deepToString(copyArray)); 
```

但是，原始数组（intArray）是这样的：

```
[47, 31, 71, 76, 78, 94, 66, 47, 73, 21] 
```

copyArray 的输出是：

```
[47, 31, 71, 76, 78] 
```

因此，尽管数组的大小减半，但元素（整数）的值并没有减半。那么我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T11:41:09.677

你不能在 foreach 循环中做到这一点。

```
for (int i=0; i<copyArray.length;i++)
    copyArray[i] /= 2; 
```

否则，您不会将其分配回数组中。`Integer`顺便说一下，对象是不可变的，因此无法修改它们（尽管创建新对象）。

从评论更新：请注意，尽管发生了一些事情，例如自动装箱/拆箱，大致如下：

```
copyArray[i] = Integer.valueOf(copyArray[i].intValue()/2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:39:24.437

```
for (int i = 0; i< copyArray.length; i++) {
    copyArray[i] = new Integer(x /2);
} 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:45:29.523

```
int counter = 0;
for(int x : copyArray)
{
        x /= 2;
        copyArray[counter++] = x;
} 
```

您的程序只是修改了变量的值`x`，而不是数组块中的值`copyArray`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:47:22.217

我认为您不能使用 foreach 循环构造来修改您正在迭代的数组的元素。相反，您需要像这样使用经典的 for 循环：

```
Logger.describe("Now copying half of that array in to a new array, and halving each element");
Integer[] copyArray = new Integer[DEFAULT_SAMPLE_SIZE / 2];     
System.arraycopy(intArray, 0, copyArray, 0, DEFAULT_SAMPLE_SIZE / 2);
    for (int i = 0; i < copyArray.length; i++) {
        copyArray[i] /= 2;
    }
Logger.output(Arrays.deepToString(copyArray)); 
```

# facebook - 致命错误：未捕获的 OAuthException：（#100）帖子的链接必须指向应用程序的连接或画布 URL

> ID：11032240
> 
> 赞同：1
> 
> 时间：2012-06-14T11:36:43.220
> 
> 标签：facebook, facebook-graph-api

我开发了一个 Web 应用程序，它使用 facebook graph api 使用 offline_access 并且在 facebook 删除访问令牌和添加扩展到期令牌之前它工作正常。我的应用程序使用图形 api 在时间线和粉丝专页上发布消息、链接和上传图片。发布消息和图片工作正常，而发布链接抛出以下异常致命错误：未捕获的 OAuthException：（＃100）帖子的链接必须指向应用程序的连接或画布 URL。

我研究了 facebook 开发者和其他网络的东西，但没有运气。

任何人都可以帮助找到解决方案。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:42:21.453

检查您的应用程序设置 - 您是否启用了迁移“Stream post URL security”？如果是这样，请禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:51:51.910

您是否使用 FB 上的 Graph explorer 应用程序生成了访问令牌？确保从右上角的选择框中选择您的应用程序。默认情况下，它将被选为 Graph Explorer。

# jquery - jQuery 动画到一个新的 div

> ID：11032242
> 
> 赞同：1
> 
> 时间：2012-06-14T11:36:52.567
> 
> 标签：jquery

我有几个 div 设置。

```
<div class="terrain water"></div>

<div class="terrain water"></div>

<div class="terrain water"></div>

<div class="terrain water"></div> 
```

每个 div 代表宽度：32px 高度：32px 的“图块”。我还有一个角色 div 放置在 tile div 内。

```
<div class="terrain water"><div class="character"></div></div> 
```

当我想将角色 div 移动到另一个 div 时，我也想制作动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:53:13.807

您可以先将角色 div 的不透明度设置为 0，移动它，然后在将其附加到其他 div 后将其设置为 1。这将产生消失出现的效果。

```
$(".character").animate({"opacity":0}, 1000).appendTo("Your other div").animate({"opacity":1},1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:34:49.810

您可以使用淡入淡出效果为角色设置动画。

```
$(".character").fadeOut().appendTo("Your other div").fadeIn(); 
```

# iphone - nsdictionary 在我的 tableView 中没有顺序

> ID：11032245
> 
> 赞同：0
> 
> 时间：2012-06-14T11:37:04.890
> 
> 标签：iphone, objective-c, xcode, uitableview, nsdictionary

我有这本词典：

```
" a) 2012 UN NEWNW" =     (
    "2012/06/04 Saudi Arabia Huge Sandstorm",
    "2012/05/27 Niger Huge Sandstorm"
);
" b) 2012 DEUX " =     (
    "2011/03/30 Niger Huge Sandstorm"
);
" c) just for TROIS" =     (
    "2011/03/30 AHuge Sandstorm over niger",
    "2011/03/30 BHuge Sandstorm over niger",
    "2011/03/30 CHuge Sandstorm over niger",
    "2011/03/30 1Huge Sandstorm over niger",
    "2011/03/30 2Huge Sandstorm over niger",
    "2011/03/30 3Huge Sandstorm over niger",
    "2011/03/30 4Huge Sandstorm over niger",
    "2011/03/30 5CHuge Sandstorm over niger",
    "2011/03/30 6Huge Sandstorm over niger "
);
" d) ****** QUATRE" =     (
    "2011/03/30 7Huge Sandstorm over niger",
    "2011/03/30 8Huge Sandstorm over niger",
    "2011/03/30 9CHuge Sandstorm over niger",
    "2011/03/30 AHuge Sandstorm over niger",
    "2011/03/30 B10CHuge Sandstorm over niger",
    "2011/03/30 **CHuge Sandstorm over niger",
    ""
); 
```

并使用此代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }
    // Configure the cell...

    //---------- CELL BACKGROUND IMAGE -----------------------------
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
    UIImage *image = [UIImage imageNamed:@"LightGrey.png"];
    imageView.image = image;
    cell.backgroundView = imageView;
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

    NSArray *allKeys = [states allKeys];
    NSString *curKey = [allKeys objectAtIndex:indexPath.section];
    NSArray *curArray = [states objectForKey:curKey];
    curValue = [curArray objectAtIndex:indexPath.row];
    //Arrow 
    cell.textLabel.text = curValue;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    [[cell textLabel] setFont:[UIFont systemFontOfSize:12.0]];
    return cell;
} 
```

部分顺序是 c) b) a) d) 谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:42:47.663

从[NSDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)：

allKeys 返回一个包含字典键的新数组。

```
- (NSArray *)allKeys 
```

返回值 包含字典键的新数组，如果字典没有条目，则返回空数组。

讨论 未定义数组中元素的顺序。

所以你需要对这个数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:41:38.787

字典没有可预测的顺序。您需要`allKeys`在按部分选择之前进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:42:24.770

实际上它不是字典问题，因为它没有顺序它是一个 NSArray 问题，请根据键名对数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:43:30.257

你有两个选择：

1.创建字典数组并将该字典按您想要的顺序存储在其中，并在cellForRowAtIndexPath中使用相同的数组。

2.通过手动提供字典键而不是提供indexPath.row来比较部分并访问字典键。

# entity-framework - 使用 EF Code First DataContext 进行单元测试

> ID：11032246
> 
> 赞同：5
> 
> 时间：2012-06-14T11:37:08.027
> 
> 标签：entity-framework, unit-testing, in-memory-database

这比实际问题更像是一个解决方案/解决方法。我将其发布在这里，因为我在堆栈溢出时或确实在大量谷歌搜索之后找不到此解决方案。

**问题：**

我有一个使用 EF 4 代码的 MVC 3 webapp，我想为其编写单元测试。我还在编写代码时使用 NCrunch 即时运行单元测试，因此我想避免在此处返回实际数据库。

**其他解决方案：**

*数据上下文*

我发现这是创建内存数据上下文的最被接受的方式。它有效地涉及为您的 MyDataContext 编写接口 IMyDataContext，然后在所有控制器中使用该接口。这样做的一个例子是[here](http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/)。

这是我最初采用的路线，我什至编写了一个 T4 模板来从 MyDataContext 中提取 IMyDataContext，因为我不喜欢维护重复的依赖代码。

但是我很快发现，当使用 IMyDataContext 而不是 MyDataContext 时，一些 Linq 语句在生产中会失败。像这样的具体查询会抛出 NotSupportedException

```
var siteList = from iSite in MyDataContext.Sites
               let iMaxPageImpression = (from iPage in MyDataContext.Pages where iSite.SiteId == iPage.SiteId select iPage.AvgMonthlyImpressions).Max()
               select new { Site = iSite, MaxImpressions = iMaxPageImpression }; 
```

**我的解决方案**

这其实很简单。我只是为 MyDataContext 创建了一个 MyInMemoryDataContext 子类并覆盖了所有 IDbSet<..> 属性，如下所示：

```
public class InMemoryDataContext : MyDataContext, IObjectContextAdapter
{
    /// <summary>Whether SaveChanges() was called on the DataContext</summary>
    public bool SaveChangesWasCalled { get; private set; }

    public InMemoryDataContext()
    {
        InitializeDataContextProperties();
        SaveChangesWasCalled = false;
    }

    /// <summary>
    /// Initialize all MyDataContext properties with appropriate container types
    /// </summary>
    private void InitializeDataContextProperties()
    {
        Type myType = GetType().BaseType; // We have to do this since private Property.Set methods are not accessible through GetType()

        // ** Initialize all IDbSet<T> properties with CollectionDbSet<T> instances
        var DbSets = myType.GetProperties().Where(x => x.PropertyType.IsGenericType && x.PropertyType.GetGenericTypeDefinition() == typeof(IDbSet<>)).ToList();
        foreach (var iDbSetProperty in DbSets)
        {
            var concreteCollectionType = typeof(CollectionDbSet<>).MakeGenericType(iDbSetProperty.PropertyType.GetGenericArguments());
            var collectionInstance = Activator.CreateInstance(concreteCollectionType);
            iDbSetProperty.SetValue(this, collectionInstance,null);
        }
    }

    ObjectContext IObjectContextAdapter.ObjectContext 
    {
        get { return null; }
    }

    public override int SaveChanges()
    {
        SaveChangesWasCalled = true;
        return -1;
    }
} 
```

在这种情况下，我的 CollectionDbSet<> 是 FakeDbSet<> 的略微修改版本[（](http://romiller.com/2012/02/14/testing-with-a-fake-dbcontext/)它简单地使用底层 ObservableCollection 和 ObservableCollection.AsQueryable() 实现 IDbSet）。

该解决方案适用于我所有的单元测试，特别是与 NCrunch 即时运行这些测试。

**完整的集成测试**

这些单元测试测试所有业务逻辑，但一个主要缺点是您的任何 LINQ 语句都不能保证与您的实际 MyDataContext 一起使用。[这是因为针对内存数据上下文进行测试意味着您要替换 Linq-To-Entity 提供程序，而是替换 Linq-To-Objects 提供程序（正如对这个](https://stackoverflow.com/questions/6766478/unit-testing-dbcontext)SO 问题的回答中所指出的那样）。

为了解决这个问题，我在单元测试中使用 Ninject 并在单元测试中设置 InMemoryDataContext 来绑定而不是 MyDataContext。然后，您可以在运行集成测试时使用 Ninject 绑定到实际的 MyDataContext（通过 app.config 中的设置）。

```
if(Global.RunIntegrationTest)
    DependencyInjector.Bind<MyDataContext>().To<MyDataContext>().InSingletonScope();
else
    DependencyInjector.Bind<MyDataContext>().To<InMemoryDataContext>().InSingletonScope(); 
```

如果您对此有任何反馈，请告诉我，但总会有改进的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:48:20.840

根据我在问题中的评论，这更多是为了帮助其他人在 SO 上搜索这个问题。但正如问题下方的评论中指出的那样，还有很多其他设计方法可以解决这个问题。

# asp.net-mvc - SignalR Hub 如何向用户发送通知新消息到达

> ID：11032249
> 
> 赞同：3
> 
> 时间：2012-06-14T11:37:10.413
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr

在我们的 MVC 4 网络中，我希望系统在用户每次收到新消息时向他发送通知。那么当我的数据库发生变化时（例如：向表中添加新行），系统会向用户发送通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:07:56.293

这些是这样做的步骤：

1.  按照[signalR wiki 页面](https://github.com/SignalR/SignalR/wiki)上的说明创建一个名为 myhub 的集线器
2.  对于每个连接，您都有一个连接 ID，您可以使用它与用户 ID 相关联，或者您甚至可以将用户名作为参数传递给您的集线器方法。再次阅读上面的页面。您可以将任何参数添加到集线器上的方法中。
3.  在服务器和客户端上创建一个方法来通知新消息。
4.  服务器端方法应采用连接 ID 或用户名的参数。
5.  客户端方法应该简单地填充您的新消息部分或更新新消息的数量。
6.  当用户收到消息并且您已插入数据库或仅在集线器上收到消息而没有任何持久性时，您可以通过连接 ID 将此消息发送到单个客户端。这次您可能不会发送完整的消息，而只是发送 messagecountupdate 或 newmessage 摘录之类的内容。
7.  以上将继续在客户和快乐的日子通知新消息

如果您需要现成的解决方案或工作示例，我建议您在 github 上创建一个现有的 singalR 存储库，或者创建一个新的 MVC 4 应用程序并将其放入 github 上的项目中。在你尝试过之后的任何问题都会说服更多的人在这里帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:57:14.247

您可以从应用程序中的任何位置从集线器发送消息。[查看https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)上的“从集线器外部通过集线器进行广播”

基本上使用这种方法，您可以向所有客户端发送通知..

# ios - Xcode 加载 ViewController 而不释放旧的

> ID：11032251
> 
> 赞同：0
> 
> 时间：2012-06-14T11:37:14.190
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, gallery, retain

我有一个`UITabViewController`，我有**5 个视图控制器**。在其中一张中，我有一个带有缩略图的视图，当我点击其中一张照片时，我想进入全屏模式。但是要做到全屏，我必须做一个新`ViewController`的，当我从那个视图控制器回来时，我丢失了我在 uitab 视图上的所有信息:(

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:24:22.480

如果您使用 arc，它将不再可用，因此您应该为您的视图创建属性，然后它的引用不会消失。然后您可以像这样

```
 if(EventRegisterView==nil)
    EventRegisterView = [[EventRegisterViewController alloc]initWithNibName:@"EventRegisterViewController" bundle:nil]; 
```

# c# - Silverlight XML Save 不会覆盖整个文件

> ID：11032253
> 
> 赞同：2
> 
> 时间：2012-06-14T11:37:23.220
> 
> 标签：c#, xml, silverlight, save

解释我的问题的最好方法是举个例子。

我有一个包含一些元素的 Xml 文件。当我删除一个元素时，我再次保存文件并出现此问题：

**保存前**

```
 <?xml version="1.0" encoding="utf-8"?>
<ElementTree>
  <Elements1 />
  <Elements2>
    <Element Name="TestElement" ID="4efa7cc9-a89a-429b-81f4-b00cde729f24" />
  </Elements2>
  <Elements3 />
</ElementTree> 
```

**保存后**

```
<?xml version="1.0" encoding="utf-8"?>
<ElementTree>
  <Elements1 />
  <Elements2 />
  <Elements3 />
</ElementTree>D="4efa7cc9-a89a-429b-81f4-b00cde729f24" />
  </Elements2>
  <Elements3 />
</ElementTree> 
```

我怀疑它在做什么：它一直在写文本，直到它到达要保存的文本的末尾，然后它就停止了。它不会删除流中最后一个字符之后仍写入文件中的文本。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:42:21.313

确保在打开[现有文件](http://msdn.microsoft.com/en-us/library/d62kzs03%28v=vs.95%29)时替换它并正确关闭流。

# java - 复杂的 if( ) 还是枚举？

> ID：11032255
> 
> 赞同：5
> 
> 时间：2012-06-14T11:37:30.600
> 
> 标签：java, enums

在我的应用程序中，如果输入匹配某些特定的 20 个条目，我需要进行分支。

我想过使用枚举

```
public enum dateRule { is_on, is_not_on, is_before,...} 
```

并打开枚举常量以执行功能

```
switch(dateRule.valueOf(input))
{
  case is_on : 
  case is_not_on :
  case is_before :
  .
  .
  .
  // function()
  break;
} 
```

但是输入字符串会像'is on'、'is not on'、'is before'等，单词之间没有_。我了解到枚举不能有包含空格的常量。

我可以做出来的可能方法：

1，使用 if 语句比较 20 个可能的输入，这些输入给出一个长的 if 语句，如

```
if(input.equals("is on") ||
   input.equals("is not on") || 
   input.equals("is before") ...)   { // function() } 
```

2，处理输入以在单词之间插入_，但即使其他不属于这20个的输入字符串也可以有多个单词。

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:43:55.433

可以将枚举标识符与值分开。像这样的东西：

```
public enum MyEnumType
{
    IS_BEFORE("is before"),
    IS_ON("is on"),
    IS_NOT_ON("is not on")

    public final String value;

    MyEnumType(final String value)
    {
        this.value = value;
    }
} 
```

您还可以将方法添加到枚举类型（该方法也可以有参数），如下所示：

```
public boolean isOnOrNotOn()
{
    return (this.value.contentEquals(IS_ON) || this.value.contentEquals(IS_NOT_ON));
} 
```

在开关中使用：

```
switch(dateRule.valueOf(input))
{
    case IS_ON: ...
    case IS_NOT_ON: ...
    case IS_BEFORE: ...
} 
```

当您获得 IS_ON 的值时，例如`System.out.println(IS_ON)`它将显示`is on`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:44:52.750

您可以在枚举中定义自己的`valueOf`方法版本（只是不要调用它`valueOf`）。

```
public enum State {
    IS_ON,
    IS_OFF;

    public static State translate(String value) {
        return valueOf(value.toUpperCase().replace(' ', '_'));
    }
} 
```

像以前一样简单地使用它。

```
State state = State.translate("is on"); 
```

较早的 switch 语句仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:42:08.460

如果你使用的是 Java 7，你也可以在这里选择中间道路，`switch`用 Strings 做一个语句：

```
switch (input) {
    case "is on":
        // do stuff
        break;
    case "is not on":
        // etc
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T05:53:54.673

感谢您的建议。他们把我带到了这里。

这与其他答案几乎相同，只是稍微简化了一点。

总而言之，我需要将输入字符串与一组 20 个字符串进行比较，然后

如果他们匹配，做点什么。否则，做点别的。

需要比较输入的静态字符串集：开启、关闭、之前、之后等 20 个条目

我创建了一个枚举

```
public enum dateRules
{
   is_on
   ,is_not_on
   ,is_before
   ,is_after
   .
   .
   .
} 
```

并打开输入的格式化值

```
if(isARule(in = input.replace(" ","_"))
{
   switch(dateRule.valueOf(in))
   {
      case is_on,
      case is_not_on,
      case is_before, ...
   }
} 
```

我将 'input' 的格式化值复制到 'in' 以便我可以重用输入，而无需再次将 '_' 替换为 ' '。

```
private static boolean isARule(String value)
  {
    for(dateRule rule : dateRule.values())
    {
      if(rule.toString().equals(value))
      {
        return true;
      }
    }
    return false;
  } 
```

问题解决了。

参考：[https ://stackoverflow.com/a/4936895/1297564](https://stackoverflow.com/a/4936895/1297564)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:42:32.267

你并没有真正打破这个概念，这两种解决方案都很脆弱......

看看你的语法

“是”，可以去掉，似乎无处不在

"not"，可选，应用 ! 到输出比较

on, before, after, 应用比较。

所以在空格之间进行拆分。解析拆分词以确保它们存在于语法定义中，然后对传入的表达式进行逐步评估。这将允许您轻松扩展语法（无需添加“is”和“is not " 用于每个组合并保持您的代码易于阅读。

为了 switch 语句的目的，将多个条件合并为一个会导致随着时间的推移而出现巨大的膨胀。

# wpf - 当 Aero 被禁用时，WPF 应用程序的性能更差？

> ID：11032259
> 
> 赞同：4
> 
> 时间：2012-06-14T11:37:43.487
> 
> 标签：wpf, windows-7, aero

我正在开发一个 WPF 应用程序。在测试期间，我注意到，如果我切换到 Windows Aero 主题而不是基本主题，应用程序运行起来会更加流畅。

为什么会发生这种情况 - 如何确保应用程序始终像使用 Windows Aero 主题时一样流畅运行？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:40:19.460

原因可能是 Windows 使用显卡来加速 Aero 主题中的绘图过程。

因此，如果您停用 Aero 主题，所有处理都由 CPU（而不是 GPU）完成，与硬件加速任务（如果由 GPU 完成）相比，会导致性能下降。非 Aero 主题仅使用 CPU 进行绘图过程！

我的索赔来源可以在[这里找到](http://www.sevenforums.com/graphic-cards/104882-regarding-windows-7-2d-rendering-hardware-acceleration.html)

# ruby - Rubygems 不能使用代理，但代理不需要身份验证

> ID：11032275
> 
> 赞同：3
> 
> 时间：2012-06-14T11:38:28.400
> 
> 标签：ruby, networking, proxy, rubygems

我发现了与让 Rubygems 在代理后工作相关的其他问题，并且在所有这些情况下，相关代理都需要密码。我正在使用的工作代理不需要密码，我知道这一点 - 我一直在浏览器和命令行中使用它。

我已经尝试了以下所有方法：

我已经设置好了 http_proxy、HTTP_PROXY、https_proxy 和 HTTPS_PROXY 环境变量。

我已手动将代理传递给“gem”命令。

我试图从[https://rubygems.org/](https://rubygems.org/)下载一个文件，它们通过代理访问 HTTPS url 工作得很好，所以我相当确定代理不是问题。

这是我做的时候得到的：

```
$ gem list --remote --source https://rubygems.org/ wasabi

ERROR:  While executing gem ... (Net::HTTPServerException)
    407 "Proxy Authentication Required" 
```

但令人困惑的是，我知道代理不需要用户名/密码！

只是为了好玩，我对 2 个命令进行了 strace：上面的“gem list”命令和一个“curl”命令，用于通过 HTTPS 从 ruby​​gems.org 下载页面。这是我得到的：

[https://gist.github.com/2929757](https://gist.github.com/2929757)

请注意，“curl”发送的命令类似于：

```
CONNECT rubygems.org:443 HTTP/1.1
Host:  rubygems.org:443
...
... 
```

无论如何，这是一个很长的镜头，但想知道是否有人可以帮助我？

谢谢

# jquery - 如果不为空，如何在加载时用文本替换输入，如果最初为空并输入，如何在模糊上替换？

> ID：11032278
> 
> 赞同：0
> 
> 时间：2012-06-14T11:38:41.770
> 
> 标签：jquery, input

请帮助我改进以下脚本：http: [//jsfiddle.net/n9BkM/8/](http://jsfiddle.net/n9BkM/8/)

我需要以下功能：

*   输入字段的 value 属性可以为空 - 然后它就像现在一样显示（在输入显示 div 并带有更改按钮后）
*   输入已经有一些值 - 在页面加载之前可能有一些值（[http://jsfiddle.net/n9BkM/9/](http://jsfiddle.net/n9BkM/9/)） - 然后它显示带有更改按钮的 div

如何实现第二步保存第一个功能？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:43:28.880

查看[http://jsfiddle.net/n9BkM/11/](http://jsfiddle.net/n9BkM/11/)。希望这是你想要的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:45:17.287

您可以删除该值：

```
$(document).ready(function(){
   $('#consumer-email').val("")
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:53:22.357

您需要将切换到 div 逻辑的功能移除到一个函数中，然后`blur`像现在一样调用它，以及在页面加载时调用它。

像这样：http: [//jsfiddle.net/KVDBB/](http://jsfiddle.net/KVDBB/)

**注意：**我已将 HTML 更改为在输入中包含一个值。再次将其清空，您将看到它像以前一样工作。

# c# - 不包含“完成”/“那么”的定义

> ID：11032279
> 
> 赞同：0
> 
> 时间：2012-06-14T11:38:51.023
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro

使用**CreateFileAsync** winRT APi 时出现此错误；

> “ `Windows.Foundation.IAsyncOperation<Windows.Storage.StorageFile>`”不包含“ ”的定义，并且找不到接受“ ”类型的第一个参数的`done`扩展方法“ ” （您是否缺少 using 指令或程序集引用）`done``Windows.Foundation.IAsyncOperation<Windows.Storage.StorageFile>`

为什么？

msdn 中的示例与[msdn API 参考相同](http://msdn.microsoft.com/en-us/library/windows/apps/br241633.aspx#Y314)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:54:22.910

Lise 我在评论中说，该示例使用 JavaScript，而不是 C#。从 C# 使用异步方法的正确方法是使用`await`：

```
var file = await Windows.Storage.DownloadsFolder.CreateFileAsync("sample.txt");
// Your code 
```

此代码必须位于标记为 的方法中`async`。

# bash - 通过命令行指定 Doxygen 参数

> ID：11032280
> 
> 赞同：39
> 
> 时间：2012-06-14T11:38:59.070
> 
> 标签：bash, doxygen

好吧，我正在创建一个脚本来使用 Doxygen 为我的项目自动生成文档，这似乎是一个很棒的工具。
我不清楚的是，用户是否可以通过在命令之外设置它们来直接指定参数，例如项目名称、项目描述等：

```
doxygen -g "parameter modification here"
doxygen Doxyfile 
```

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-14T17:41:14.473

查看 FAQ 中问题 17 的答案：http: [//www.doxygen.nl/manual/faq.html#faq_cmdline](http://www.doxygen.nl/manual/faq.html#faq_cmdline)，为方便起见，在下面重复：

### 我可以从命令行配置 doxygen 吗？

不是通过命令行选项，但 doxygen 可以从标准输入读取，所以你可以通过它管道。下面是一个示例，如何从命令行覆盖配置文件中的选项（假设是 UNIX 环境）：

```
( cat Doxyfile ; echo "PROJECT_NUMBER=1.0" ) | doxygen - 
```

对于 Windows，以下将执行相同的操作：

```
( type Doxyfile & echo PROJECT_NUMBER=1.0 ) | doxygen.exe - 
```

如果指定了多个具有相同名称的选项，则 doxygen 将使用最后一个。要附加到现有选项，您可以使用 += 运算符。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-03-07T09:17:54.170

（这是[公认答案](https://stackoverflow.com/a/11038467/334497)的替代方案- 很可能在上面。）

我首选的解决方案是在配置文件中使用环境变量。我们以“QUIET”为例：在我替换的配置文件中

```
QUIET                  = NO 
```

和

```
QUIET                  = $(DOXYGEN_QUIET) 
```

然后我如下调用 Doxygen

```
DOXYGEN_QUIET=YES doxygen configfile 
```

或者

```
env DOXYGEN_QUIET=YES doxygen configfile 
```

如果在（Bash）脚本中使用。您当然也可以导出变量 DOXYGEN_QUIET，这样您就不必为每次运行都键入它。

PS！我有一个运行多个 Doxygen 作业的 Bash 脚本，它使用标准 -q 选项通过设置 DOXYGEN_QUIET 安静地运行作业。我还使用与环境变量相同的技巧来设置 PROJECT_NAME。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-14T12:54:46.007

据我所知，这是不可能的：通过[配置文件](http://www.doxygen.nl/manual/config.html)或 GUI 配置 doxygen 构建（这比尝试记住命令行选项名称要容易得多）。`doxygen --help`在命令行键入和[doxygen 用法](http://www.doxygen.nl/manual/doxygen_usage.html)的文档表明，所有命令行选项都是设置要读取的配置文件（并允许用户获取布局文件等）。

从命令行修改配置选项的一种方法是使用类似（未经测试）的方式将选项附加到配置文件：

```
echo "INPUT = some file" >> Doxyfile 
```

这将附加`INPUT = some file`到您的后面，`Doxyfile`并且任何早期的值`INPUT`都将被忽略。如果你想附加一个项目，`INPUT`你可以使用

```
echo "INPUT += some file" >> Doxyfile 
```

注意`+=`. 这尊重`INPUT`文件中先前设置的值。

而不是附加到配置文件中，您总是可以`sed`用来查找和替换选项。

# php - 从 Joomla 1.5.22 迁移到 2.5 后缺少组件

> ID：11032282
> 
> 赞同：0
> 
> 时间：2012-06-14T11:39:07.310
> 
> 标签：php, joomla

我使用 jUpgrade 将我在 Joomla 中的站点从 1.5.22 版迁移到 2.5 版。迁移后，当我打开网址“mysite.com/jupgrade”以查看我的新网站的外观时，我收到错误消息：

```
#404 Component not found 
```

我检查了 jupgrade/components/ 文件夹，发现缺少一些组件。与组件对应的表格也丢失了。我是否需要手动迁移这些组件或有一些替代解决方案可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:23:26.493

有些组件需要手动完成，因为其中很多组件有 2 个单独的 1.5 和 2.5 版本。只需安装不起作用的扩展的 Joomla 2.5 版本，这应该可以解决您的问题

# php - 计算点击次数并将其存储在 FTP 中

> ID：11032291
> 
> 赞同：1
> 
> 时间：2012-06-14T11:39:39.803
> 
> 标签：php, javascript, sql, text, counter

我已经用 JavaScript 做了一个计数器。真的很基本......只是增加变量的值。

我现在正在寻找一种将其存储在我的 FTP 服务器上的方法。我想计算一个按钮的点击次数。`onClick=""`而且我也只想在获取文本文件值的标签中显示它。

问题是我不知道如何编写这个和我应该使用的女巫语言。我可以使用所有基于网络的语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:50:43.470

使用 jQuery：

```
$('#button').click(function()
{
   $('#result').load("pathtophpfile.php");
}); 
```

然后创建一个 PHP 文件，它基本上会查看文件并增加它的值：

```
 <?php

    $clicks = file_get_contents("clicks.txt");
    $clicks++;

    $fp = fopen("clicks.txt", "w+");
    fwrite($fp, $clicks);
    fclose($fp);

    //debug
    echo "result: $clicks";

    ?> 
```

这是一个快速的小提琴：http: [//jsfiddle.net/4QhL8/1/](http://jsfiddle.net/4QhL8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:42:55.323

您可以对服务器端 php 脚本进行 ajax 调用，该脚本可以将点击存储在文本文件中。然后在同一脚本中获取该文本文件的内容并将响应发送回 ajax 脚本，该脚本应该更新 HTML 页面上的相关元素。

PS：我不支持 php，它对我来说就在我的自然语言旁边 :)

# database - 如何在不重新安装应用程序的情况下更改 WP7 MVVM 数据库

> ID：11032294
> 
> 赞同：0
> 
> 时间：2012-06-14T11:39:47.783
> 
> 标签：database, windows-phone-7, mvvm

我在 WP7 应用程序中使用 MVVM 数据库。我的问题是，当我更改核心数据库（通过添加另一列等）时，应用程序需要重新安装，否则它只会崩溃。

如果我将我的应用程序发布到市场然后更改数据库，每个更新的用户都会破坏他们的应用程序。

如何在不需要重新安装的情况下更改数据库？还是我永远无法更改数据库结构的情况？

我最初遵循的教程在这里：http: [//msdn.microsoft.com/en-us/library/hh286405 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh286405(v=vs.92).aspx)

干杯，

卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:40:39.470

[可以使用http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx)中描述的技术更改数据库架构而不破坏它文章结尾。

# ubuntu - 服务器上的 VPN 用于某些传出连接

> ID：11032295
> 
> 赞同：0
> 
> 时间：2012-06-14T11:39:49.243
> 
> 标签：ubuntu, vpn

我有一台运行 openvpn 的服务器用于传出连接。但是，一旦我启动 openvpn，我就失去了对服务器 IP 的 SSH、HTTP 访问。我猜这是意料之中的，但是在连接到这些端口时有没有办法绕过 VPN 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:45:36.217

这是一个路由问题：您已将 OpenVPN 设置为用 OpenVPN-Connection 替换默认路由器（处理“正常”流量）。如果您将 OpenVPN 配置为使用静态路由，您的正常流量将再次按预期工作。

# iphone - 我们可以使用目标 c 创建一个 Web 服务吗

> ID：11032296
> 
> 赞同：2
> 
> 时间：2012-06-14T11:39:54.093
> 
> 标签：iphone, objective-c, ios, web-services, soap

在我的 iphone 应用程序中，我正在调用（通过 SOAP post 方法）一个用 .net 编写并托管在服务器上的 Web 服务，并且一切正常。但我的疑问是，我们可以在目标 c 中编写 Web 服务吗？并将其托管在服务器上？这样我们就应该能够从任何平台（如 .net、php 和 ObjectiveC）访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:01:38.310

我前段时间[在这里](http://cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html)阅读了关于这个问题的精彩教程。

老实说，在生产环境中真正使用它可能非常困难。如果您想获得 Apple 提供给您的所有功能和工具（这似乎是您的问题的意图），您必须使用 Mac 才能在之后运行您的服务。

例如，在我看来，使用 PHP（如果您需要一个由 MySQL 备份的数据库）要容易得多。几乎所有主机都支持它，您不必担心设置一堆 mac 并通过坚固稳定的电缆将它们连接到互联网（并且：保证可用性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:45:17.900

是的。Web 服务只是一些可以通过 Web 提供服务的应用程序。由于您可以在 Objective C 中创建应用程序，因此它可以是与任何其他语言相同的 Web 服务。

你可以让它在任何你有目标 C 编译器的服务器上运行，但是，你使用的框架可能会将你的选择限制在服务器上（即，你可以在 windows 上编写目标 C，但你不能使用NS框架）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:09:38.080

Web 服务不限于一种编程语言，但是您确实需要查找是否有任何使用objective-c 的框架可以在特定服务器上运行。例如，iiS 允许您使用可以使用 C# 或 VB.Net 实现的 Asp.net。

对于将使用 Web 服务的客户端，他们不必是特定类型的设备。我认为这就是网络服务的意义所在。中间传输的消息是格式化的。例如，SOAP 消息使用 xml，这将确保消息在 HTTP 上传输。因此，无论您使用 iPhone 还是 Android 或 Blackberry，都应该可以毫无问题地进行 Web 服务调用。

所以总的来说，我认为你必须看看你想要创建什么样的 Web 服务，然后看看 Apple（我假设）是否可以为你提供一个好的框架来做到这一点。在客户端方面，只要您的 Web 服务使用 XML 或 JSON，就应该得到很好的支持。

希望能帮助到你。

# android - 将我的应用程序添加到 SMS 应用程序中撰写消息活动中的“输入文本”选项

> ID：11032299
> 
> 赞同：1
> 
> 时间：2012-06-14T11:40:12.550
> 
> 标签：android, android-intent

我尝试了很多但没有运气..

我不知道如何将我的应用程序添加到 android 附带的消息应用程序中的“输入文本来自”选项中。

一定有办法做到这一点，所以这里的专家可以在这里提供帮助。

（指示：）

1.  进入android中的消息应用程序

2.  点击撰写新消息

3.  单击菜单按钮

4.  选择“输入文本自”选项

或者：

只需单击带有附件图标的按钮，即可打开附件对话框：

![附件对话框](../Images/d1af4900ee865da632f0737ba2e43b4b.png)

# php - 如何使用 google api 通过电子邮件检索联系人。PHP

> ID：11032305
> 
> 赞同：0
> 
> 时间：2012-06-14T11:40:25.920
> 
> 标签：php, search, oauth, google-api, contacts

我正在检索与

[https://www.google.com/m8/feeds/contacts/default/full/](https://www.google.com/m8/feeds/contacts/default/full/(optional)（可选的contactId）

但我需要通过电子邮件而不是 id 获取联系人。

有没有办法解决这个问题？我已经尝试解决这个问题一段时间了，但在文档中找不到任何帮助..

我一直在这里寻找答案：

[https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters](https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T10:35:14.610

可能您已经有了答案，但万一您还在寻找：

```
$query = new Zend_Gdata_Query('http://www.google.com/m8/feeds/contacts/default/full?q='.$Number); 
```

在哪里`$Number`可以是联系人的任何部分（电子邮件、地址或电话号码）

# sql-server-2008 - 在 SQL Server 2008 中存储视图元的建议

> ID：11032306
> 
> 赞同：1
> 
> 时间：2012-06-14T11:40:36.823
> 
> 标签：sql-server-2008, view, meta, information-schema

我想将视图元信息（例如关于哪些表和列以及创建的查询等）存储到另一个映射表中，以便稍后可以重现它们。

现在我有一个这样的结构 -

```
CREATE TABLE [dbo].[MAPPING_VIEW]
(
    [ID] [int] NOT NULL,
    [OLD_VIEW] [varchar](40) NULL,
    [NEW_VIEW] [varchar](40) NULL,

    CONSTRAINT [PK_MAPPING_VIEW] PRIMARY KEY CLUSTERED 
    ([ID] ASC)
) 

CREATE TABLE [dbo].[MAPPING_VIEW_TBL]
(
    [ID] [int] NULL,
    [PARENT_ID] [int] NULL,
    [OLD_TBL] [varchar](40) NULL,
    [NEW_TBL] [varchar](40) NULL
) 

ALTER TABLE [dbo].[MAPPING_VIEW_TBL] WITH NOCHECK 
ADD CONSTRAINT [FK_MAPPING_VIEW_TBL_ID] 
FOREIGN KEY([PARENT_ID]) REFERENCES [dbo].[MAPPING_VIEW] ([ID])

CREATE TABLE [dbo].[MAPPING_VIEW_TBL_COL]
(
    [ID] [int] NULL,
    [PARENT_ID] [int] NULL,
    [VIEW_ID] [int] NULL,
    [OLD_COL] [varchar](40) NULL,
    [NEW_COL] [varchar](40) NULL,
    [OLD_ALIAS] [varchar](40) NULL,
    [NEW_ALIAS] [varchar](40) NULL
)

ALTER TABLE [dbo].[MAPPING_VIEW_TBL_COL] WITH NOCHECK 
ADD CONSTRAINT [FK_MAPPING_VIEW_TBL_COL_PARENT_ID] 
FOREIGN KEY([PARENT_ID]) REFERENCES [dbo].[MAPPING_TBL] ([ID])

ALTER TABLE [dbo].[MAPPING_VIEW_TBL_COL]  WITH NOCHECK 
ADD CONSTRAINT [FK_MAPPING_VIEW_TBL_COL_VIEW_ID] 
FOREIGN KEY([VIEW_ID]) REFERENCES [dbo].[MAPPING_VIEW] ([ID]) 
```

我知道，这还不够。任何建议，将不胜感激

# c# - dotnet highchart 控件中 x 轴上的重复值

> ID：11032307
> 
> 赞同：0
> 
> 时间：2012-06-14T11:40:43.843
> 
> 标签：c#, highcharts

![在此处输入图像描述](../Images/cb0bab086f90b2734658454d4ea90a77.png)我面临 dotnet highcharts 控件的问题，问题是 x 轴上的值重复，即 0 0 1 1 2 2 3 3 4 4 5 5。请帮助

下面是我的代码。

Javascript代码

```
<div id='ContentAvailabilty_container'></div>
<script type='text/javascript'>
var ContentAvailabilty;
$(document).ready(function() {
ContentAvailabilty = new Highcharts.Chart({
    chart: { renderTo:'ContentAvailabilty_container', type: 'bar' }, 
    legend: { enabled: false, layout: 'horizontal' }, 
    plotOptions: { bar: { borderWidth: 0 } }, 
    title: { text: 'Content Availabilty' }, 
    xAxis: { categories: ['#Rest of Published', '#Published Queue', '#Rest of Unpublished', '#Unpublished Queue', '#New Approved'] }, 
    yAxis: { labels: { formatter: function() { return Highcharts.numberFormat(this.value, 0); } }, min: 0, title: { text: '' } }, 
    series: [{ data: [5, 0, 0, 0, 0] }]
});
});
</script>

DOT NET CODE

        DotNet.Highcharts.Highcharts currentReport = new DotNet.Highcharts.Highcharts("ContentAvailabilty");

        currentReport.InitChart(new Chart { Type = ChartTypes.Bar });
        currentReport.SetTitle(new Title { Text = "Content Availabilty" });
        currentReport.SetXAxis(new XAxis
        {
            Categories = new[] { "#Rest of Published", "#Published", "#Rest of Unpublished", "#Unpublished", "#Approved" }
        });

        currentReport.SetYAxis(new YAxis
        {
            Title = new XAxisTitle { Text = "" }
             , Labels = new XAxisLabels { Formatter = "function() { return Highcharts.numberFormat(this.value, 0); }" }//function to convert 4k to 4000
            ,Min=0
        });
        currentReport.SetLegend(new Legend { Enabled = false });
        currentReport.SetPlotOptions(new PlotOptions { Bar = new PlotOptionsBar { BorderWidth=0} });
        currentReport.SetSeries(new Series[] {
        new Series{                
            Data = new Data( new object[]{   RestofPublished, publishedQueue, Rest_of_UnPublished, UnPublished_Queue, newApproved } )
                    }
        });
        ReportContainerLabel.Text = string.Empty;
        ReportContainerLabel.Text = currentReport.ToHtmlString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:36:18.203

```
xAxis : [{categories : []}], // when defining X-Axis

chart.xAxis[0].setCategories(JSON_object); // when parsing data ,from another method , 
```

如果要使用类别 X 轴或 Y 轴？.bcoz代码和图表图像让我感到困惑，无论如何，如果你想手动设置类别，然后最初将类别设为空，并使用JQuery为其分配一个数组，如果你加载动态数据，那么应该有解析的 json 对象或类似的东西

# android - Android 中的处理程序行为

> ID：11032309
> 
> 赞同：1
> 
> 时间：2012-06-14T11:40:49.040
> 
> 标签：android, handler

我正在创建一个处理程序，如下所示，

```
postTimer = new Handler();
postHandler = new Runnable() {
   public void run() {
 Message msg = mServiceHandler.obtainMessage();
 msg.arg1 = SYNC_USAGE_STAT;
 mServiceHandler.sendMessage(msg);              
}
};
postTimer.postDelayed(postHandler, 15000); 
```

这会给出一个超时还是像心跳一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:45:30.663

这是一次性事件。你可以在你的可运行文件中做同样的事情（`postTimer.postDelayed(postHandler, 15000);`我的意思是），所以它的行为就像心跳一样，但你需要某种标志来在将来的某个地方阻止它。

# sql - 将 Sql 查询（更新表集 ....）转换为 linq（var m = ...）

> ID：11032311
> 
> 赞同：1
> 
> 时间：2012-06-14T11:40:49.997
> 
> 标签：sql, linq

我正在尝试在我的 Database.cs 文件中编写一个 linq 查询。我觉得很难。有什么工具可以将 sql 转换为 linq？我尝试了linqer，但效果不佳。或者您能帮我在 linq 中编写以下查询吗？

```
update table 
set field1='R', 
    field2='" + DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss") + "', 
    field3 = '" + util.CleanStringInput(value1) + "'
where field1 = 'P' 
    and field3 = '" + value2 + "' 
    and field4 = (select max(field5) 
                  from table2 
                  where field6='" + value2 + "') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:52:38.160

最简单的方法是获取实体，设置属性，然后保存更改：

```
var maxFromTable2 = context.YourTables2.
                            Where(t2 => t2.field6 == value2).
                            Max(t2 => t2.field5);

var entitiesToUpdate = context.YourTables.
                               Where(t => t.field1 == "P" && 
                                          t.field3 == value2 && 
                                          t.field4 ==  maxFromTable2).
                               ToList();

foreach (var entityToUpdate in entitiesToUpdate)
{
    entityToUpdate.field1 = "R";
    entityToUpdate.field2 = DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss");
}

context.SaveChanges(); 
```

注意：从您的问题中不清楚您正在更新哪个表，所以我默认假设它是一个不同于`table2`. 如果您指出您使用的是 LINQ to SQL 还是实体框架（LINQ to Entitites），这可能会有所帮助。当前语法适用于 EF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:35:50.887

LINQ to SQL/EF 旨在水合对象并对其进行操作，从而保存更改。它不打算作为批处理操作的替代品。如果在这种情况下使用 EF/LINQ to SQL，您将向数据库发出 n+1 个请求：1 选择您要更改的记录，并为您正在更新的每一行（对象）发出一个单独的请求。使用小数据集，这可能是可管理的，但如果您有任何类型的卷，使用单个 Update 语句将其保存在存储过程中可能是更好的选择。

# asp.net-mvc-3 - 如何在 asp.net mvc3 中使用实体框架进行更新？

> ID：11032312
> 
> 赞同：0
> 
> 时间：2012-06-14T11:41:02.907
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework

我的数据库中有一个表格，其中一个名为 NumOfView 的列显示了链接上的点击次数。该链接显示了此表中一行的一些信息。我在锚标记中使用了 onclick 事件，如下所示：

```
onclick=@Url.Action("NumOfClicks", "AdvertiseHelper",new { id = Model.id[i] }) 
```

在 NumOfClicks 函数中，我使用了这段代码

```
 public void NumOfClicks (int id)
    {
        Ad ad1 = new Ad();
        var advert = (from ad in storedb.Ads where ad.AdId == id select     ad.NumOfView).First();
        advert += 1;

    } 
```

> 广告

是数量

> 浏览次数

在表中，我想将其增加 1 个单位。但我不知道如何继续编码以更新表中的此值。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:44:56.727

这是应该如何完成的基础知识。首先，您必须从数据库中选择记录本身，而不是点击次数。增加对该记录的点击次数，然后将更改提交到 DataContext。

```
public void IncrementClickCount(int id)
{
    var advert = 
        (from ad in storedb.Ads 
         where ad.AdId == id
         select ad).Single();   // Select the row in the database represented by "ad"
    advert.NumOfView++;         // Perform the increment on the column

    // SubmitChanges is how an update is done in Linq2Sql 
    // This requires a .dbml file for the database object file
    // storedb.SubmitChanges();    // Assumes storedb is a valid DataContext, updates

    // SaveChanges is how an update is done in EntityFramework
    // It is recognizable because it uses an .edmx file for its database object
    storedb.SaveChanges();
} 
```

这在 SO 问题中也有类似的问题：[Entity Framework - Update a row in a table](https://stackoverflow.com/questions/7149943/entity-framework-update-a-row-in-a-table)

# java - MySQL JDBC 返回 0 个结果

> ID：11032315
> 
> 赞同：1
> 
> 时间：2012-06-14T11:41:18.430
> 
> 标签：java, mysql, jdbc

这似乎是一个非常基本的问题，但我找不到任何解决方案。我有以下代码：

```
package com.test.db.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class JDBCConnect
{
private Connection conn = null;
private final String uname = "root";
private final String passwd = "test@123";
private String url = "jdbc:mysql://127.0.0.1:3306/TrainDB";
private final String className = "com.mysql.jdbc.Driver";

public void initConnection()
{
    try
    {
        if(this.conn == null || this.conn.isClosed())
        {
            try
            {
                Class.forName (className).newInstance ();
                this.conn = DriverManager.getConnection(url, uname, passwd);
                System.out.println("database connection established.");
            }
            catch(SQLException sqe)
            {
                sqe.printStackTrace();
            }
            catch (InstantiationException e) 
            {
                e.printStackTrace();
            } 
            catch (IllegalAccessException e) 
            {
                e.printStackTrace();
            } 
            catch (ClassNotFoundException e) 
            {
                e.printStackTrace();
            }

        }
    }
    catch(SQLException sqle)
    {
        sqle.printStackTrace();
    }
    //return this.conn;
}

public void disconnect()
{
    if (conn != null)
        {
            try
            {
                conn.close ();
                System.out.println ("Database connection terminated");
            }
            catch (Exception e) { /* ignore close errors */ }
        }

}

public void insertData(String sql)
{
    PreparedStatement s;
    try
    {

        if(conn == null || conn.isClosed())
        {
            initConnection();
        }
        s = conn.prepareStatement(sql);
        int count = s.executeUpdate ();
        s.close ();
        System.out.println (count + " rows were inserted");
    } 
    catch (SQLException e) 
    {
        e.printStackTrace();
        if (conn != null)
        {
            try
            {
                conn.close ();
                System.out.println ("Database connection terminated");
            }
            catch (Exception se) { /* ignore close errors */ }
        }
    }

}

public ResultSet query(String sql)
{
    Statement s = null;
    try
    {
        if(this.conn == null || this.conn.isClosed())
        {
            initConnection();
        }

                    s = conn.createStatement();
        s.executeQuery(sql);
        ResultSet rs = s.getResultSet();
        System.out.println("lets see " + rs.getFetchSize());
        return rs;
    }
    catch(SQLException sq)
    {
        System.out.println("Error in query");
        return null;
    }
    finally
    {
        try {
            s.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}
} 
```

我在不同的类中使用 JDBCConnect：

```
import java.sql.ResultSet;
import java.sql.SQLException;

public class traininfo
{

public static void main(String[] args)
{
    JDBCConnect jdbcConn = new JDBCConnect();

    String sql = "SELECT id FROM testtable";
    ResultSet rs = jdbcConn.query(sql);
    try {
        System.out.println(rs.getFetchSize());
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if(rs != null)
    {
        try
        {
            while(rs.next())
            {
                System.out.println(rs.getString("id"));
            }
            rs.close();
        }
        catch(SQLException sqe)
        {

        }
    }
    jdbcConn.disconnect();
}
} 
```

我没有使用并发调用进行插入和读取。如果我在 mysql-workbench（客户端）中使用相同的查询，我会得到正确的结果，但使用提到的代码，我会得到

```
database connection established.
lets see 0
0
Database connection terminated 
```

请告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:32:50.423

很可能是因为你在`Statement`使用它之前就关闭了`ResultSet`。奇怪的是它没有抛出异常，但这无论如何都是不正确的。

根据[Statement.close 方法 JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#close%28%29)：

> 当 Statement 对象关闭时，其当前的 ResultSet 对象（如果存在）也将关闭。

`ResultSet`我建议在关闭之前使用某种回调来检索结果，例如：

```
public <T> T query(String sql, IResultSetHandler<T> resultSetHandler ) throws SQLException {
    Statement statement = null;
    try {
        statement = connection.createStatement();
        final ResultSet rs = connection.executeQuery(sql);
        final T result = resultSetHandler.handle(rs);
        return result;
    } finally {
        if(statement != null) {
            statement.close();
        }
    }
}

public interface IResultSetHandler<T> {
    T handle(ResultSet rs);
}

public static void main(String[] args) {
    JDBCConnect jdbcConn = new JDBCConnect();
    List<String> ids = jdbcConn.query(sql, new IResultSetHandler<List<String>>() {
        public List<String> handle(ResultSet rs) {
            List<String> ids = new ArrayList<String>();
            while(rs.next()) {
                ids.add(rs.getString("id"));
            }
            return ids;
        }
    });
} 
```

或者使用完全相同的 commons apache dbutils 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:41:57.387

`ResultSet.getFetchSize()`让您知道连接将一次获取的*最大*行数。您可以使用 进行设置`ResultSet.setFetchSize(int)`。另见[官方文档](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#setFetchSize%28int%29)。它不会告诉您总共将获得多少行。如果提取大小保持为零，则 JDBC 自行决定。

除此之外，请参阅 Yura 的回答，它解决了您问题的核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:41:26.570

可能是因为您从未调用 InsertRows，因为它从未显示“插入了 X 行”

# javascript - 目标段落仅包含图像

> ID：11032316
> 
> 赞同：1
> 
> 时间：2012-06-14T11:41:34.013
> 
> 标签：javascript, html, css

我有一个包含多个段落的 div（博客文章）。

其中一些包含文本，其他文本+图像和其他仅图像。

我只想定位仅包含图像的段落并设置`text-align:center`

这可能只使用css还是需要js？

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:41:39.987

以下为所有仅包含 img 标签和空格的 p 标签添加了一个特殊的 CSS 类：

```
$('.blog-post p').each(function(i){          // For each paragraph
    if ( ($(this).find('img').length) &&     // If there's an image
         (!$.trim($(this).text()).length))   // and there's no text
    {
        $(this).addClass('imgOnly');         // Add a special CSS class
    }
}); 
```

该`trim()`函数用于`text()`确定文本是否仅包含空格。

样本内容：

```
<div class="blog-post">
    <p>Text</p>
    <p><span>Text</span></p>
    <p><img/></p>                   <!-- CSS class will be added -->
    <p>Text <img/></p>
    <p><span>Text</span><img/></p>
    <p><img/> Text <img/></p>
    <p><img/><img/></p>             <!-- CSS class will be added -->
    <p><img/> <img/></p>            <!-- CSS class will be added -->
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:17:46.517

这个例子会对你有所帮助：**[在 jsFiddle 上演示](http://jsfiddle.net/matmuchrapna/mXRSn/7/)**

**jQuery代码：**

```
$(function() {
    var divs = $('.blog-post > div');

    $.each(divs, function(i, div) {
        /* cache variable */
        var $div = $(div);
        if ( !($div.find('p')[0]) ) { /* if there are no one p tag inside div */
            $div.addClass('only-images');
        }
    });

}); 
```

**CSS：**

```
.blog-post > .only-images {
    background-color: red; /* color is demo only */
} 
```

**因此，我的示例将仅将类添加到此示例HTML**标记中仅包含图像的第三个 div ：

```
<div class="blog-post">
    <div>
        <p>some text</p>
        <p>some text</p>
        <p>some text</p>
        <p>some text</p>
    </div>
    <div>
        <p>some text</p>
        <img src="//placekitten.com/g/100/100" alt="" />
    </div>
    <div> <!-- only this div would be applied class `only-images` customizable by css  -->
        <img src="//placekitten.com/g/100/100" alt="" />
        <img src="//placekitten.com/g/100/100" alt="" />
    </div>
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:59:49.227

为此，您可以使用 javascript 并为其编写函数，最好使用 javascript 库 Jquery。当您拥有它的功能时，您可以稍后添加新的段落和图像，而无需编写更多代码。

我会写一个例子，但我没有太多时间。我希望我对你有一点帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:07:41.740

CSS是不够的。您可以使用基于父母的 Css 规则，但不能基于孩子。例如，您可以定位出现在段落中的所有图像。这些属性将应用于图像，而不是段落。例子：

```
p img
{
   /* properties */
} 
```

选项保持 Javascript 或服务器端，例如，您可以根据内容（.imageOnly 或 .mixedContent）为段落分配特定的类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-25T09:26:22.537

我不得不在没有 jQuery 的情况下做到这一点，我想出了以下内容：

```
document.querySelectorAll('p').forEach(function(p) {

    // if there's no image, stop
    if (p.querySelector('img') === null) {
        return;
    }

    // if there's text, stop
    if (p.innerText.trim() !== "") {
        return;
    }

    // otherwise, mark the paragraph
    p.classList.add('img-only');
}); 
```

仅在现代浏览器上测试。

# asp.net - 无法将数据从 SecurityAttribute 类传递到 MVC3 中的控制器

> ID：11032319
> 
> 赞同：2
> 
> 时间：2012-06-14T11:41:39.433
> 
> 标签：asp.net, asp.net-mvc-3

我首先使用 mvc 3 代码。将数据从 SecurityAttribute 类传递给 Controller 时遇到问题。我实际上想在登录页面上重定向用户并显示消息。为此，我覆盖了 SecurityAttribute 类中的 AuthorizeCore 方法。在这种方法中，我无法直接使用 session、cookie、tempdate 和 viewbag 等任何其他解决方案来解决这个问题。谢谢

```
protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (httpContext.Session["UserID"] == null)
        {
            //here i am unable to pass message to User/LogOn action.
            httpContext.Response.Redirect("~/User/LogOn");
           // httpContext.Session["lblMsg"] = "You are not authroize to perform this                               action.Please Login through different account";
            return false; 
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:47:19.300

首先，您不应该在`AuthorizeCore`方法内部重定向。您应该使用`HandleUnauthorizedRequest`用于此目的的方法。就将错误消息传递给 LogOn 操作而言，您可以使用 TempData：

```
public class SecurityAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        // perform the custom authorization logic here and return true or false
        // DO NOT redirect here
        return httpContext.Session["UserID"] != null;
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        filterContext.Controller.TempData["ErrorMessage"] = "You are not authroize to perform this action.Please Login through different account";

        // calling the base method will actually throw a 401 error that the
        // forms authentication module will intercept and automatically redirect
        // you to the LogOn page that was defined in web.config
        base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

然后在 LogOn 操作中：

```
public ActionResult LogOn()
{
    string errorMessage = TempData["ErrorMessage"] as string;
    ...
} 
```

或者如果你想在`LogOn.cshtml`视图中访问它：

```
<div>@TempData["ErrorMessage"]</div> 
```

另一种可能性是将消息作为查询字符串参数传递，而不是使用 TempData：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    var values = new RouteValueDictionary(new
    {
        controller = "User",
        action = "LogOn",
        errormessage = "You are not authroize to perform this action.Please Login through different account"
    });
    filterContext.Result = new RedirectToRouteResult(values);
} 
```

然后您可以让`LogOn`操作将错误消息作为操作参数：

```
public ActionResult LogOn(string errorMessage)
{
    ...
} 
```

# java - ActionListener 调用阻止 MouseClick 事件

> ID：11032321
> 
> 赞同：3
> 
> 时间：2012-06-14T11:41:57.913
> 
> 标签：java, swing, actionlistener, mouseclick-event

我有一个带有以下 ActionListener 的 MenuItem“maddbound3”窗口：

```
maddbound3.addActionListener
(
    new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        { 
            menu_addbound3();
        } 
    }
); 
```

单击菜单时，此侦听器将调用下面的 menu_addbound3()：

```
void menu_addbound3()
{
    while(getEditMode() != EditMode.NONE)
    {
        System.out.println("!... " + getEditMode());

        synchronized(this)
        {
            try
            {
                wait();
            }
            catch(InterruptedException e)
            {
                e.printStackTrace();
            }
        }
    }
} 
```

MouseClicked 事件更改编辑模式的值并发出 notifyAll() 以便退出 while 循环。但是，测试表明，当系统通过 while 循环运行时，鼠标单击时不会发生 MouseClicked 事件。

ActionListener 会阻止 MouseClicked 事件吗？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T11:55:26.023

不要`while(true)`在 Swing 事件线程上使用，同样不要`wait()`在 Swing 事件线程上调用——您将冻结整个 GUI，使其完全无响应。您需要了解主 Swing 事件线程或“事件调度线程”负责所有 Swing 绘图和用户交互，因此如果您将其与长时间运行或冻结的代码捆绑在一起，您就会锁定整个 GUI。

相反，改变你的程序的状态——也许通过设置一个或两个变量，让你的程序的行为依赖于这个状态。如果您需要更具体的建议，请告诉我们您想要实现的行为，我们或许可以为您提供更好的方法。

有关 Swing 事件线程的更多信息，请阅读：[课程：Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**编辑**
你状态：

> 当用户单击菜单项时，我想通过窗口中的一系列“离散”鼠标单击来获取信息。因此，在单击菜单时，将提示用户“在窗口中选择一个点”。所以，我需要的是我的 ActionListener 函数（menu_addbound3）然后等待鼠标点击。因此等待/通知设置。鼠标单击更改 edit_mode 和 notifyAll() 导致 while 循环中的等待退出，然后导致 while 循环退出，然后我可以在 menu_addbound3 函数中提示我的下一点信息，根据需要重复此操作.

感谢您的澄清，现在我可以肯定地告诉您，您做错了，您绝对不想使用 while 循环或等待或通知。有很多方法可以解决这个问题，一种是使用一些布尔变量或枚举变量来给程序一个状态，然后根据状态改变它的行为。您可以在 MouseListener 中使用您的 EditMode 枚举以使其知道其处于活动状态，然后您还可以为 MouseListener 类提供一个布尔变量 windowPointSelected，设置为 false，然后仅在第一次单击后将其设置为 true。

**编辑 2**
例如：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.*;

@SuppressWarnings("serial")
public class ProgState extends JPanel {
   private static final int PREF_W = 400;
   private static final int PREF_H = PREF_W;
   private static final Color EDIT_COLOR = Color.red;
   private EditMode editMode = EditMode.NONE;
   private boolean firstPointSelected = false;
   private JMenuBar jMenuBar = new JMenuBar();
   private JTextField firstPointField = new JTextField(15);
   private JTextField secondPointField = new JTextField(15);

   public ProgState() {
      add(firstPointField);
      add(secondPointField);

      JMenu menu = new JMenu("Menu");
      menu.add(new JMenuItem(new AbstractAction("Edit") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            setEditMode(EditMode.EDITING);
            setFirstPointSelected(false);
         }
      }));
      jMenuBar.add(menu);

      addMouseListener(new MouseAdapter() {

         @Override
         public void mousePressed(MouseEvent mEvt) {
            if (getEditMode() == EditMode.EDITING) {
               Point p = mEvt.getPoint();
               String pStr = String.format("[%d, %d]", p.x, p.y);
               if (!isFirstPointSelected()) {
                  firstPointField.setText(pStr);
                  setFirstPointSelected(true);
               } else {
                  secondPointField.setText(pStr);
                  setEditMode(EditMode.NONE);
               }
            }
         }

      });
   }

   public void setEditMode(EditMode editMode) {
      this.editMode = editMode;

      Color c = editMode == EditMode.NONE ? null : EDIT_COLOR;
      setBackground(c);
   }

   public EditMode getEditMode() {
      return editMode;
   }

   public void setFirstPointSelected(boolean firstPointSelected) {
      this.firstPointSelected = firstPointSelected;
   }

   public boolean isFirstPointSelected() {
      return firstPointSelected;
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public JMenuBar getJMenuBar() {
      return jMenuBar;
   }

   private static void createAndShowGui() {
      ProgState progState = new ProgState();

      JFrame frame = new JFrame("EditMode");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(progState);
      frame.setJMenuBar(progState.getJMenuBar());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

enum EditMode {
   NONE, EDITING
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:28:24.433

从讨论看来，让你的班级假设一些状态是最好的方法。我们可以通过*一个或多个*枚举变量来实现这一点。最初我发现这很难理解的原因是我看不到在 MouseClicked 函数中包含所有代码的好处。这是丑陋的，充其量是无法管理的。

但是，使用多个枚举并将处理拆分为多个外部函数，我们确实实现了我们想要的一个很好的系统。

# javascript - 正则表达式在字符串中搜索两个字符串之间的内容

> ID：11032323
> 
> 赞同：0
> 
> 时间：2012-06-14T11:42:04.333
> 
> 标签：javascript, regex, expression

我正在尽最大努力了解正则表达式，但运气不佳。

我试图在字符串中搜索文本，我知道字符串是如何开始的，我知道字符串是如何结束的，我想返回字符串之间的所有文本，包括开始和结束。

开始搜索 = **[{"lx":**

结束搜索 = **}]**

IE

[{“lx”：这里的**变量**}]

到目前为止我已经尝试过

```
/^\[\{"lx":(*?)\}\]/; 
```

和

```
/(\[\{"lx":)(*)(\}\])/; 
```

但无济于事......有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:46:01.267

您可能错误地认为`*`是通配符。改用句点 ( `.`) 就可以了。

另外，您确定要规定零个或多个吗？如果*必须*有一个值，请使用 +（一个或多个）。

**Javascript：**

```
'[{"lx":variablehere}]'.match(/^\[\{"lx":(.+?)\}\]/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:46:42.483

可能的解决方案：

```
var s = '[{"lx":variablehere}]';
var r = /\[\{"(.*?)":(.*?)\}\]/;
var m = s.match(r);

console.log(m); 
```

该数组的结果：

```
[ '[{"lx":variablehere}]',
  'lx',
  'variablehere',
  index: 0,
  input: '[{"lx":variablehere}]' ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:46:54.340

```
\[\{"lx"\:(.*)\}\] 
```

这应该适合你。您可以通过 \1 符号访问捕获的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:45:49.023

星号乘以前面的`*`字符。在你的情况下，没有这样的角色。您应该放置`.`，这意味着“任何字符”，或者更具体的东西，比如`\S`，这意味着“任何非空白字符”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:53:59.763

尝试这个：

```
 ^\[\{\"lx\"\:(.*)\}\]$ 
```

[{"lx": and }] 之间的所有文本都可以在反向引用变量中找到（类似于 \$1 ，取决于编程语言）。

# javascript - 当我将列表更改为表格时，如何使我的列表效果起作用？

> ID：11032328
> 
> 赞同：0
> 
> 时间：2012-06-14T11:42:16.107
> 
> 标签：javascript, jquery, html, css, ajax

我有文件列表-单击其中一个后，它会显示 jquery 表单：这里是：http: [//jsfiddle.net/GSC3x/11/](http://jsfiddle.net/GSC3x/11/)

但现在我注意到，我需要在此页面上放置一个表格，并且我希望此列表成为整个表格中的一列，这是（丑陋的）示例：http: [//jsfiddle.net/GSC3x/15/](http://jsfiddle.net/GSC3x/15/)。

我希望 jquery 表单的东西在更改为表格视图后以相同的方式工作。我的意思是，隐藏一切，让形式出现。

怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:05:08.290

要使表格消失，您不应该隐藏单个单元格（就像使用 一样`$(".show_hide").hide();`），而是隐藏整个表格。

此外，您正在重用显示表单以隐藏它的按钮，但样式完全不同。这很奇怪，没有必要，而且很难使用。

使用单独的按钮关闭表单，不要使用相同的事件处理程序 ( `$('.show_hide').click`)。无论如何，显示和隐藏部分不共享任何代码。

像这样构造你的代码也可以很容易地添加平滑的过渡，比如褪色或你已经实现的滑动。

# vb.net - VB.NET 2010 - IDE - 缺少运行/暂停/停止按钮

> ID：11032330
> 
> 赞同：2
> 
> 时间：2012-06-14T11:42:19.973
> 
> 标签：vb.net, visual-studio-2010, ide

很奇怪的一个...今天我加载了 VS 2010 来处理一个 VB.NET 项目....但是由于某种原因，工具栏上缺少运行/暂停/停止按钮，我无法设置断点。

从昨天到我的系统的唯一变化是今天早上 Windows 试图安装 Visual Studio SP1 更新，但都失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:05:09.107

![在此处输入图像描述](../Images/edae6cea15d3a1cdfc44bba60caf8b30.png)

当您右键单击工具栏上的空白区域时，会出现此菜单。不知道你能不能看到。调试工具栏由突出显示的选项正下方的项目启用

您仍然可以使用快捷方式和调试菜单来执行您的任务

```
F9 - Break Point
F5 - Run
Ctrl+Alt+Break - Pause
and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:18:03.500

对安装进行修复并解决了问题。

# winforms - 从后台线程更新 UI，当线程完成时，该线程在主 UI 中的循环中调用

> ID：11032333
> 
> 赞同：4
> 
> 时间：2012-06-14T11:42:23.457
> 
> 标签：winforms, multithreading

我有一个 WinForms 应用程序正在调用一个业务类方法，该方法执行一些繁重的操作，每次调用大约需要 5 秒。主窗体循环调用此方法。这个循环可以运行 10 次到可能高达 10,000 次。

WinForms 应用程序向业务类发送一个参数，并有一个区域显示每个方法调用所用的时间以及方法返回的值。如何通知我的主窗口并使用该方法为每次调用返回的内容更新主 winform 中的文本区域？

目前，在所有线程完成后，数据一次全部出现。每次调用完成后，有没有办法为循环的所有迭代更新 UI？我不介意它是否也按顺序完成。

表格

```
 HeavyDutyClass hd;
    public Form1()
    {
        InitializeComponent();
        hd = new HeavyDutyClass();
    }

    //BUTTON CLICK
    private void Start_Click(object sender, EventArgs e)
    {

        int filecount = 5000;  //BAD - opening 5000 threads! Any other approach?
        hd.FileProcessed += new EventHandler(hd_FileProcessed);

        var threads = new Thread[filecount];

        for (int i = 0; i < filecount; i++)
        {
            threads[i] = new Thread(() => { hd.LongRunningMethod(); });
            threads[i].Start();   
        }

    }

    //BUSINESS CLASS EVENT THAT FIRES WHEN BUSINESS METHOD COMPELTES
    void hd_FileProcessed(object sender, EventArgs e)
    {

        if (dgv.InvokeRequired)
        {
            dgv.Invoke((MethodInvoker)delegate { UpdateGrid(); });

        }
    }

    private void UpdateGrid()
    {
        dgv.Rows.Add(1);
        int i = dgv.Rows.Count;
        dgv.Rows [ i-1].Selected = true;
        dgv.FirstDisplayedScrollingRowIndex = i - 1;

    } 
```

商务重载类

```
 public event EventHandler FileProcessed;

    public HeavyDutyClass()
    {
    }

    protected virtual void OnMyEvent(EventArgs e)
    {
        if (FileProcessed != null)
        {
            FileProcessed(this, e);
        }
    }

    public bool LongRunningMethod()
    {
        for (double i = 0; i < 199990000; i++)
        {
            //time consuming loop
        }
        OnMyEvent(EventArgs.Empty);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T12:37:56.587

添加一个 Winforms 项目，在窗体上放置一个标签控件，复制粘贴此代码并按 F5

**[编辑]：**更新`business class`了用户的评论

**注意**：我的表单类被命名`Form3`。你可能需要改变你的`Program.cs or vice-versa.`

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class BusinessClass
    {
        public int MyFunction(int input)
        {
            return input+10;
        }
    }

    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;
        BusinessClass _biz = new BusinessClass();
        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
            _worker.RunWorkerAsync();
        }

        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;
                int junk = 0;
                for (i = 0; i <= 199990000; i++)
                {
                    int result = _biz.MyFunction(junk);
                    junk++;

                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // note I can pass the business class result also and display the same in the LABEL  
                        _worker.ReportProgress(percentComplete, result);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }
    }
} 
```

有了这个，您也可以很容易地实现取消功能。请注意，在初始化期间，我设置了`WorkerSupportsCancellation = true`& 然后我`_worker.CancellationPending`在 DoWork 中检查。因此，如果您想通过 a 取消该过程`Cancel Button click`，那么您将在按钮处理程序中编写此代码-`_worker.CancelAsync();`

# game-engine - 主要的游戏引擎使用什么持久层/数据库？

> ID：11032336
> 
> 赞同：0
> 
> 时间：2012-06-14T11:42:30.910
> 
> 标签：game-engine

我对 Berkeley DB、SQLite、eXtremeDB 等“嵌入式数据库”非常感兴趣，并且很好奇主要游戏引擎（或一般游戏）使用哪些“数据库”来保存数据？

我会假设他们中的一些人使用他们自己的“内部”持久层/数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:42:38.530

大多数主要游戏引擎不使用任何嵌入式数据库。他们使用配置文件或带有数据的脚本。恕我直言，用于典型游戏引擎的嵌入式 DBM 太过分了。

当然，MMO-Engines 使用 DB，但不是嵌入的。

# c# - WP7 WebControl 字符编码

> ID：11032341
> 
> 赞同：1
> 
> 时间：2012-06-14T11:42:40.117
> 
> 标签：c#, html, windows-phone-7

我有一小段 HTML

```
<b>OBNUBIL�,</b> 
<abbr class="abbrev" title="persoană">pers.</abbr>
 3 <i>obnubilează,</i> 
<abbr class="abbrev" title="verb">vb.</abbr>
 I. <abbr class="abbrev" title="reflexiv">Refl.</abbr> 
(Rar; despre vedere, memorie) A se �ntuneca, a slăbi, a se umbri.  Din 
<abbr class="abbrev" title="limba latină">lat.</abbr> 
<b>obnubilare,</b> 
<abbr class="abbrev" title="limba franceză">fr.</abbr> 
<b>obnubiler.</b> 
```

我想在用 C# 编写的 Windows Phone 应用程序上的 WebBrowser 中显示它。这段 HTML 存储在一个字符串中：`str2.` 我使用了这行代码：`webBrowser1.NavigateToString(str2)`. 它有效`Romanian diacritics (ă ,ș ,ț,�, � ,Ă,Ț ,�,�,Ș)`，但未显示。
如何在 Windows Phone 中将 WebControl 的字符编码从 UTF-8 更改为 ISO-8859-16？

```
private void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error != null)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            // Showing the exact error message is useful for debugging. In a finalized application, 
            // output a friendly and applicable string to the user instead. 
            MessageBox.Show(e.Error.Message);
        });
    }
    else
    {
        string textString = (string)e.Result;
        string fixedString = "";

        // This search returns the substring between two strings, so 
        // the first index is moved to the character just after the first string.
        string defStart = "cuvânt\">";
        string defEnds = "</span>  <br/>";
        textString = textString.Replace("\r", "").Replace("\n", "");
        int first = textString.IndexOf(defStart) + defStart.Length;
        int last = textString.LastIndexOf(defEnds);
        string str2 =textString.Substring(first, last - first);
        str2 = str2.Replace("&#x2013;", " - ");

        // Remove tab spaces
        str2 = str2.Replace("\t", " ");
        // Remove multiple white spaces from HTML
        str2 = Regex.Replace(str2, "\\s+", " ");

        //str2 = Regex.Replace(str2, "<[^>]+>", string.Empty);
        //BannerTextBlock.Text=str2;

        webBrowser1.NavigateToString(str2);
    }
} 
```

我希望有人理解我的问题并可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:02:03.037

我只是帮助你了解我在 Web 环境方面的知识：

如果您显示这种类型的 char : "Ã©", "Ã®", "Ã", ... => 数据**保存在 UTF-8**中，并且浏览器认为他必须处理**ISO**。

如果您显示这种类型的 char ： "�" => 数据**保存在 ISO 中**，并且浏览器认为他必须处理**UTF-8**。

PS：对不起我的英语。

希望我能帮助你。

# jetty - Gradle Jetty 插件锁定文件

> ID：11032342
> 
> 赞同：8
> 
> 时间：2012-06-14T11:42:43.783
> 
> 标签：jetty, gradle

有没有办法解决`jetty`完全由 from引起的文件锁定问题`gradle`？

一些澄清：
当使用[Gradle Jetty 插件](http://www.gradle.org/docs/current/userguide/jetty_plugin.html)时，通过运行`gradle jettyRun,`jetty 会导致静态资源文件（html、css、js 等）在使用 Windows 时被锁定。[您可以在 Windows 上锁定的文件](http://docs.codehaus.org/display/JETTY/Files+locked+on+Windows)中看到问题的描述。

同一篇文章还描述了如何解决这个问题。基本上你必须：

1.  禁用文件映射缓冲区
2.  根本不使用 NIO。

这两件事都需要在项目中添加一些特定于码头的配置文件，我不想这样做——码头插件只是为了方便而使用，为它维护配置感觉不对。

我不需要 NIO 在本地机器上进行测试，所以任何解决方案都可以。

**编辑：**

现在，我选择了您设置`useFileMappedBuffer`为`false`. 这是如何做到的：

1.  指定您`webdefault.xml`喜欢的路径

    ```
    [jettyRun, jettyRunWar,jettyStop]*.with {
        //other configs

        webDefaultXml = file("${project.webAppDir}/WEB-INF/jetty-webdefault.xml")
    } 
    ```

2.  从 jetty 的最新 6.1.x 发行版获取文件。该插件似乎仅支持 jetty 6。您可以在`jetty-6.1.26\etc\webdefault.xml`. 显然，您必须将其放置在上一步指定的路径中。

3.  将默认的 servlet 初始化参数更改`useFileMappedBuffer`为`false`

我将研究使用插件的嵌入码头的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-27T16:22:53.153

我发现一个插件似乎是一个更好的选择：

[https://github.com/akhikhl/gretty](https://github.com/akhikhl/gretty)

### 正面的

*   **不锁定您的文件**并支持[热部署](http://akhikhl.github.io/gretty-doc/Hot-deployment.html)（即使是 Gretty 所说的“[快速重新加载](http://akhikhl.github.io/gretty-doc/Fast-reload.html)”）
*   Gretty 1.2.0 使用 Jetty 9.2.9.v20150224。Gradle 2.2.1 提供的 Jetty 插件使用 Jetty 6.1.25。
*   使用相同的任务`jettyRun`（或更简单地`run`）。
*   “按任意键停止服务器”。Jetty 插件需要 CTRL+C 然后 Y。
*   据我所知，[文档](http://akhikhl.github.io/gretty-doc/)似乎很棒（[Gradle](http://gradle.org/docs/current/userguide/jetty_plugin.html)没那么多）

### 负面的

*   有点臃肿的代码来设置 buildscript 的类路径依赖或直接从 URL 应用插件（[见 doc](http://akhikhl.github.io/gretty-doc/Getting-started.html)）
*   除非您明确表示，否则 Gretty 崩溃`apply plugin: 'war'`（Jetty 插件扩展了 War 插件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T15:54:35.013

Kiril 回答了他自己的问题，非常感谢。您应该按照 Kiril 的说明进行操作，这将帮助您找到合适的`webdefault.xml`.

要找出 Gradle 启动的 Jetty 版本，请执行

```
gradle jettyRun -i 
```

你会看到这样的东西：

```
...
Tmp directory =  determined at runtime
Web defaults = org/mortbay/jetty/webapp/webdefault.xml
Web overrides =  none
Webapp directory = C:\dev\my-project\src\main\webapp
Starting jetty 6.1.25 ...
jetty-6.1.25
... 
```

我花了一段时间才找到 Jetty 6.1.25 的副本，因为它不再列在 Jetty 下载页面上（甚至不在存档部分！）。

然后，您可以从此处获取适当的副本，`webdefault.xml`并根据需要调整版本号：

[http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jetty/6.1.25/org/mortbay/jetty/webapp/webdefault.xml](http://grepcode.com/file/repo1.maven.org/maven2/org.mortbay.jetty/jetty/6.1.25/org/mortbay/jetty/webapp/webdefault.xml)

# class - 名称查找如何在 Powershell 脚本块中工作？

> ID：11032360
> 
> 赞同：3
> 
> 时间：2012-06-14T11:43:52.427
> 
> 标签：class, powershell

[用户 cashfoley 在codeplex](http://psclass.codeplex.com/)上为一个名为 PSClass 的“模块”发布了一组看起来相当优雅的代码。

当我将 psclass 代码点源到我自己的一些代码中时，我可以编写如下代码：

```
$Animal = New-PSClass Animal {

    constructor {
        param( $name, $legs )

        # ...
    }

    method -override ToString {
        "A $($this.Class.ClassName) named $($this.name) with $($this.Legs) Legs"
    }
} 
```

但是，当我尝试使用 PSClass 代码创建模块时，我开始遇到错误。和名称不再被识别`constructor`。`method`

查看实际的实现，我看到的是`constructor`,`method`等实际上是 New-PSClass 函数内部的嵌套函数。

因此，在我看来，当我对 PSClass.ps1 文件进行点源时，我的脚本块被允许包含对嵌套在其他本地函数中的函数的引用。但是当 PSClass 代码变成一个模块时，导出了 New-PSClass 函数（我尝试使用清单和使用 Export-ModuleMember），名称不再可见。

有人可以向我解释嵌套函数的脚本块、范围规则和可见性规则如何协同工作吗？

另外，对于纯 Powershell 脚本，是否有更好的类定义协议？（具体来说，不涉及“只需用 C# 编写，然后执行此操作......”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:30:33.967

脚本块中的变量在执行之前不会被评估。如果脚本块中的变量在执行块时在当前范围内不存在，则这些变量将没有任何值。脚本块不是闭包：它们不会在实例化时捕获上下文。

```
Remove-variable FooBar

function New-ScriptBlock
{
    $FooBar = 1

    $scriptBlock = {
        Write-Host "FooBar: $FooBar"
    }

    $FooBar = 2
    & $scriptBlock  # Outputs FooBar: 2 because $FooBar was set to 2 before invocation
    return $scriptBlock
}

function Invoke-ScriptBlock
{
    param(
        $ScriptBlock
    )

    & $ScriptBlock
}

$scriptBlock = New-ScriptBlock 

& $scriptBlock    # Prints nothing since $FooBar doesn't exist in this scope

$FooBar = 3
Invoke-ScriptBlock $scriptBlock   # Prints $FooBar: 3 since FooBar set to 3 
```

# android - 在android中实现keyDown

> ID：11032362
> 
> 赞同：1
> 
> 时间：2012-06-14T11:44:01.253
> 
> 标签：android, key, back

我正在制作一个我必须使用的应用程序

```
@Override  
public boolean onKeyDown(int keyCode, KeyEvent event)  
{  
    if(keyCode==KeyEvent.KEYCODE_BACK)  
    { 
```

在**片段**中。但我无法使用它。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T11:55:10.077

试试这个代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

        super.onKeyDown(keyCode, event);

        if (keyCode == KeyEvent.KEYCODE_BACK) {
              // Your code here
              return true;
        }

        return false;
    } 
```

在您的代码中，它应该位于 if`(keyCode == KeyEvent.KEYCODE_BACK)`块内。只需验证您是否返回正确的“真”或“假”值。

# java - 将字符串变量重新分配给 StringBuffer 对象

> ID：11032364
> 
> 赞同：0
> 
> 时间：2012-06-14T11:44:09.723
> 
> 标签：java, arrays, string, stringbuffer

这是我的一个程序中的一段代码。如果我直接分配`sb1= str2`我得到一个错误。所以我正在创建*两个 StringBuffer 对象*。

是否有可能仅使用一个 StringBuffer 对象来实现以下要求。

```
 String str1, str2;
    Scanner scanObj = new Scanner(System.in);
    str1 = scanObj.next();
    StringBuffer sb1 = new StringBuffer(str1);
    sb1.reverse();
    str1 = sb1.toString();
    char[] input1 = str1.toCharArray();
    str2 = scanObj.next();
    StringBuffer sb2 = new StringBuffer(str2);
    sb2.reverse();
    str2 = sb2.toString();
    char[] input2 = str2.toCharArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:53:39.937

使用 sb.setLength(0) 然后重新添加新字符串。这应该保持相同的内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:52:50.360

你可以写

```
Scanner scanObj = new Scanner(System.in);
char[] input1 = new StringBuilder(scanObj.next()).reverse().toString().toCharArray();
char[] input2 = new StringBuilder(scanObj.next()).reverse().toString().toCharArray(); 
```

您可以使用 setLength(0) 和 append() 重用 StringBuilder，但它会更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:53:13.173

您不能`StringBuffer`直接分配给，`String`因为有不同的对象。这应该可以帮助您：

```
String yourStr = "some value";
StringBuffer buffer = new String(yourStr);
StringBuffer other = buffer; 
```

您可以将任何`String`值放入`StringBuffer`对象构造函数中。

# android - Android 应用程序以错误的活动开始

> ID：11032367
> 
> 赞同：2
> 
> 时间：2012-06-14T11:44:23.830
> 
> 标签：android, eclipse, android-activity

我的应用程序有 3 个活动（MainActivity、SampleActivity、TempActivity）并且应用程序必须从 MainActivity 开始，因为我在 AndroidManifest 中将其注册为

```
 <activity
        android:name=".MainActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:launchMode="singleTask"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".TempActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:launchMode="singleTask"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
    </activity>

    <activity
        android:name=".SampleActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:launchMode="singleTask"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
     </activity> 
```

当我从 MainActivity 切换到 TempActivity 并返回到 MainActivity 然后关闭应用程序时，它通常从 TempActivity 开始。
在我启动我的应用程序时出现这种错误行为之后，它从错误的活动（TempActivity）开始。
请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:55:43.343

当您从 TempActivity 活动转到 MainActivity 时，您给出完成（）
示例：
Intent myIntent = new Intent(TempActivity.this, MainActivity .class);
开始活动（我的意图）；
结束（）;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:52:49.643

这是因为您的活动没有被破坏，它只是暂停（检查活动[生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)）。您可以覆盖`onPause`以执行所需的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:55:08.673

您如何关闭应用程序，意味着通过主页按钮应用程序不破坏活动，活动仅停止。要退出您的应用程序，您需要完成应用程序中的所有活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:47:15.313

每当您按下主页按钮时，您都假设您的应用程序已关闭。但事实并非如此！

根据 android 活动生命周期，您的应用程序将继续在后台运行，当您按下应用程序图标时，它将从它进入后台的位置开始。

如果您在 TempActivity 并且如果您按下主页按钮，那么它将仅从 TempActivity 开始。为了确保当您按下主页按钮时，您的活动应该以 MainActivity 开始，请在您的代码中进行以下更改。

**临时活动.java**

```
@Override
void onPause()
    {
    super.onPause();
    finish();
    } 
```

因此，当您下次打开应用程序时，它将从 MainActivity 开始。

# mysql - MySQL将一列的值复制到另一列

> ID：11032369
> 
> 赞同：2
> 
> 时间：2012-06-14T11:44:26.450
> 
> 标签：mysql

我有两张桌子：

*   `t1(mainid, parentid)`
*   `t2(mainid, parentid)`

我将如何复制`t1.mainid`to的值`t2.parentid`？

我尝试使用：

```
SELECT mainid INTO t2 FROM t1 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:56:11.543

尝试[INSERT ... SELECT](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)语法：

```
INSERT INTO t2(parentid) SELECT mainid FROM t1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:56:34.333

如果 t2 中的 mainid 也是自动递增的

```
INSERT INTO t2(parentid) SELECT mainid FROM t1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:59:56.393

`INSERT INTO tbl_name [(col_name,...)] SELECT ....`

[`INSERT-SELECT`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:46:40.833

```
INSERT INTO t2 SELECT 0,mainid FROM t1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T11:57:41.590

以下解决方案

```
INSERT INTO t2(parentid) SELECT mainid FROM t1 
```

只要 t2(mainid) 设置了默认值，就可以工作。核实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T17:36:27.527

当您插入表时，您必须考虑在表中插入一整行，而不仅仅是一列的值。即使某些列具有默认值，考虑将整行插入表中也是有帮助的。

因此，要将 mainid 列的值从 t1 交叉到 t2 的 parentid 列，您可以执行以下操作：

```
INSERT INTO T2 SELECT 0,mainid FROM T1 
```

但是对于 T1 中的每个 mainid 值，您将传输一个 0 和 manid 值以组成一个 t2 行。如果 t2 具有唯一约束，您将无法通过这种方式解决问题。

# .net - 如何将行从表 A 移动到 B 并仅选择从 A 中移动的行？

> ID：11032371
> 
> 赞同：1
> 
> 时间：2012-06-14T11:44:35.263
> 
> 标签：.net, sql, sql-server, tsql, select-into

我需要将表 A 中的所有现有行移动到表 B。我还需要只选择表 A 中移动的行。（不是来自表 B，因为表 B 是一个存档并且包含很多行，这将导致选择花费大量时间）

我正在使用 Microsoft SQL Server 2008 和 .Net (System.Data.SqlClient)

请注意，记录是连续插入到表 A 中的。我需要确保只选择移动的记录，并且在删除之前从表 A 中选择它们。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:56:12.253

你不能做这样的事情：

```
BEGIN TRANSACTION;

SELECT * FROM source WITH (HOLDLOCK) 
WHERE ...

DELETE source
OUTPUT deleted.* INTO destination
WHERE ...;

COMMIT TRANSACTION; 
```

当然你不会使用 SELECT * 但我不知道你的表所以......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:53:58.050

据我了解，您想做这样的事情：

```
SELECT []
INTO archivetable
FROM activetable

SELECT []
FROM activetable
WHERE id in (SELECT id from archivetable)

DELETE
FROM activetable
WHERE id in (SELECT id from archivetable) 
```

这将以某种安全的方式复制、选择和删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:44:09.237

我终于能够通过使用 SQL Server 的 OUTPUT 子句来解决这个问题。看看下面。IMO 我看不出为什么这种方法会持有任何不必要的锁。

```
declare @TempTable TABLE(Col1 bigint, Col2 varchar(50))

delete from TableA
output Deleted.Col1, Deleted.Col2 INTO @TempTable

insert into TableB (Col1, Col2)
select Col1, Col2 from @TempTable

select Col1, Col2 from @TempTable 
```

谢谢大家的帮助。

# jquery - 当我们滚动到它的位置时，使用 jquery 为 div 设置动画

> ID：11032373
> 
> 赞同：3
> 
> 时间：2012-06-14T11:44:40.930
> 
> 标签：jquery, html, jquery-animate

我需要一个 jquery 功能，当用户滚动页面并且某个 div 出现在屏幕的可见部分/中间时，会发生一些动作。例如：Verelo.com。如果向下滚动，您将看到一个带有两个图标的 glob 以及一个带有黑色箭头的 jquery 动画。我需要类似的功能。我不希望准确但至少是最接近的。

为了我的努力，我找到了这个例子：Verelo.com 并做了一些谷歌搜索。但是还没有找到任何东西。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:49:50.303

他们监听文档的`scroll`事件，并计算文档`scrollTop`与元素位置的比较。

基本上，为了计算元素是否在视口中（仅考虑 Y 轴滚动），您需要考虑的参数是文档的滚动位置、视口的高度、目标的位置元素，以及目标元素的高度。

```
$(window).scroll(function() {

   var scrollTop = $(document).scrollTop();
   var viewportHeight = $(window).height();

   var targetPosition = $('#target').position().top;
   var targetHeight = $('#target').outerHeight();

   // viewport stretches from scrollTop to (scrollTop + viewportHeight)

}); 
```

您还需要确定是否`.position().top`或`.offset().top`最适合您，具体取决于元素的定位方式以及正在滚动的内容。

[演示](http://jsfiddle.net/8Wznp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:04:56.640

你可以做的是，从他们的网站分析这个文件[http://www.verelo.com/js/themeFunctions.js](http://www.verelo.com/js/themeFunctions.js)的来源，它没有被缩小，所以你可以挖掘他们是如何做到这一点的：

这是该js文件中必要功能的列表

```
$(window).scroll(function scrollDetection() {
                scrollLogic();
                }); 
```

所以`scrollLogic();`在滚动窗口时被调用。现在有什么`scrollLogic();`功能。我只添加它的必要部分，因为它很大

```
function scrollLogic(){
    //If page is scrolled further than 100%, drop navigation menu from top and do a dance. Preferably an Irish River dance of sorts
    if( $(window).scrollTop() > howItWorksPosition) {
        window.sliderTimerOn = 'false';
        clearInterval(intervalId);

        if( $(window).scrollTop() > howItWorksPosition && $(window).scrollTop() < featuresPosition) {btnClick('.howItWorks'); executeScene(); window.ourCustomersFrame = 'false';}
.......
} 
```

`howItWorksPosition`使用前已计算

```
 howItWorksOffset = $('#howItWorks').offset();
howItWorksPosition = howItWorksOffset.top -180; 
```

`executeScene();`当窗口向上滚动到该 div 并`executeScene();`正在执行动画时，他们正在调用。您可以检查`executeScene();`以了解他们是如何制作动画的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:50:44.610

我刚刚在这里回答了这个问题哈哈，[如果看到元素，做点什么](https://stackoverflow.com/questions/11031724/if-element-in-sight-do-something/11031796#11031796)

位于此处的插件[https://github.com/protonet/jquery.inview](https://github.com/protonet/jquery.inview)为您提供了一个可以绑定的触发器，以确定元素何时在视图中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T10:20:32.053

[jQuery waypoints](http://imakewebthings.com/jquery-waypoints/)插件正是为你做的：

```
$('.thing').waypoint(function(direction) {
    // do stuff
}, { offset: 50 }) 
```

在上面的示例处理函数中，当元素顶部距离视口顶部 50px 时运行。您可以使用方向参数检查用户是“向下”还是“向上”滚动。

有关更多高级选项和示例，请参阅[jquery waypoints 文档页面](http://imakewebthings.com/jquery-waypoints/#docs)。

# php - 通过 PHP API 向 Magento 添加产品会导致某些属性未设置

> ID：11032377
> 
> 赞同：0
> 
> 时间：2012-06-14T11:44:50.440
> 
> 标签：php, magento, e-commerce, magento-1.6

我正在尝试编写一个脚本来将一些产品从 MySQL 数据库中的产品列表传输到 Magento 1.6.2 商店。我有以下代码：

```
$product = Mage::getModel('catalog/product');
$product->setTypeId('simple');
$product->setWebsiteId("2");
$product->setName($row['name']);
$product->setDescription('No Description');
$product->setShortDescription('No Description');
$product->setAttributeSetId(4); // need to look this up
$product->setSku($sku); 
if (isset($row['price'])) $product->setPrice($row['price']);
if (isset($row['msrp'])) $product->setMsrp($row['msrp']);
$product->setCategoryId($map_mysql_cat_to_mage_cat[$row['category_id']]);
$product->setWeight($weight);
$product->setManufacturer($row['manufacturer']);
$product->setTaxClassId(2); // taxable goods
$product->setVisibility(4); // catalog, search
$product->setStatus(1); // enabled

// assign product to the default website
echo "Adding Product...";
$product->save();
echo "Product Added." . PHP_EOL; 
```

这导致产品成功添加到 Magento 目录，并且名称、SKU、价格、MSRP 和重量设置正确。

但是，制造商属性、类别和网站仍然未设置/为空。$row['manufacturer'] 绝对是一个有效的非空字符串，并且 $map_mysql_cat_to_mage_cat[$row['category_id']] 解析为一个匹配有效类别 ID 的整数。

我哪里错了，我把头发扯掉了！

# c# - 如何根据 xaml 中的集合计数更新可见性？

> ID：11032382
> 
> 赞同：0
> 
> 时间：2012-06-14T11:45:13.513
> 
> 标签：c#, xaml, windows-phone-7.1

基本上`ListPicker`，我的 Windows 手机应用程序中有两个控件。我使用集合绑定 ListPicker1 `List<A> ACollection`。

“A”类将拥有另一个集合`List<B> BCollection`。

我需要的要求是，如果`BCollection.Count > 0`我应该启用 ListPicker2 的可见性并将 BCollection [它来自 A 类] 绑定到 ListPicker2。

我期望的是，我需要在 Windows 手机中使用 0% c# 代码在 xaml 中实现这一切。在 WP7 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:28:16.157

您需要将`BCollection.Count > 0`C# 模型中的条件公开为 bool 或 Visiblity 属性。所以不，在没有 C# 的 XAML 中完全不可能。

您可以用 C# 编写专用转换器，但它应该是 C# 代码。请参阅 AnthonyWJones 对这个问题的回答[是否可以绑定到 Silverlight 中的 lambda 表达式？](https://stackoverflow.com/questions/1510304/is-it-possible-to-bind-to-a-lambda-expression-in-silverlight).

# c# - 如果长度大于字符串的长度，子字符串不能按预期工作

> ID：11032394
> 
> 赞同：25
> 
> 时间：2012-06-14T11:45:46.323
> 
> 标签：c#, .net, regex, string

好的，我知道如果/其他有效，我需要一个替代方案。

我在用

```
B = String.Concat(A.Substring(0, 40)); 
```

捕获值的前 40 个字符。

如果 at 的值`A`大于`40`，`B`则可以捕获，但如果 的值`A`小于`40`，则在 处没有捕获的值`B`。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-14T11:48:06.713

又快又脏：

```
 A.Length > 40 ? A.Substring(0, 40) : A 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-14T12:04:27.843

为什么不为它创建一个扩展......称之为截断或左，或其他。

```
public static class MyExtensions
{
    public static string Truncate(this string s, int length)
    {
      if(s.Length > length) return s.Substring(0, length);
      return s;
    }
} 
```

然后你可以简单地这样称呼它：

```
string B = A.Truncate(40); 
```

另请注意，您不必将其设为扩展方法，尽管它会更简洁。

在您的 StringTool 类中：

```
 public static string Truncate(string value, int length)
    {
      if(value.Length > length) return value.Substring(0, length);
      return value;
    } 
```

并称之为：

```
string B = StringTool.Truncate(A, 40); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-14T12:04:41.773

String.Concat 在这里不符合您的目的。您应该执行以下操作：

```
if(A.Length > 40)
       B= A.Substring(0,40);
else
       B=A; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-12T18:34:41.977

使用下面的代码来子串

```
B = String.padright(40).Substring(0, 40)).Trim() 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-06-07T10:43:34.457

扩展最适合这样的问题；）我的名字有些脏，但每个人都知道它会做什么——这是异常安全的子字符串：

```
public static string SubstringNoLongerThanSource(this string source, int startIndex, int maxLength)
{
    return source.Substring(startIndex, Math.Min(source.Length - startIndex, maxLength));
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-04T10:54:41.937

```
B = string.Concat(A.Substring(0, Math.Min(40, A.Length))); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-14T11:50:25.577

您可以使用[Left](http://msdn.microsoft.com/en-us/library/y050k1wb%28v=vs.80%29.aspx) from `Microsoft.VisualBasic.Strings`。

```
B = Microsoft.VisualBasic.Strings.Left(A, 40); 
```

反正不知道你为什么要使用`Concat`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-02-17T17:10:53.080

另一种使用 Take 的方法

```
B = new string(A.Take(40).ToArray()) 
```

或扩展方法

```
public static string Left(this string value, int count)
{
    return new string(value.Take(count).ToArray());
} 
```

# c# - 如何从客户端机器获取 CultureInfo？

> ID：11032399
> 
> 赞同：5
> 
> 时间：2012-06-14T11:45:53.997
> 
> 标签：c#, visual-web-gui

所以这是 100 万美元的问题。

首先，我在 Visual WebGui 中开发 Web 应用程序。这基本上是 Winforms，但应用程序被转换为 HTML5 和 vualá.. web 应用程序。无论如何，我对 DateTime 格式有疑问。默认情况下，它是来自服务器计算机的 CultureInfo。

我可以像这样在 web.config 中覆盖它：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8"  culture="de-DE" uiCulture="de-DE"/> 
```

每个客户端机器上的每个日期格式都将是德语。我想要的是制作一个 Web 应用程序，它将在控制面板中的客户端机器上显示 Datetime 格式。

是否可以？我只是找不到解决方案。

感谢帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:57:24.670

试试这个：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo(Request.UserLanguages[1]); 
```

检查此链接，例如[多语言应用程序](http://www.codeproject.com/Articles/6749/Multilingual-applications-using-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:14:20.550

您可以将全球化标签的 uiculture 和culture 属性设置为auto。这将使您能够让服务器根据用户的浏览器设置来决定用户的语言，如果您使用本地化资源，一切都会自动发生。

# jquery-plugins - 如何使用 jquery-mobile 界面在 photoswipe 中使用事件处理程序

> ID：11032400
> 
> 赞同：2
> 
> 时间：2012-06-14T11:45:54.933
> 
> 标签：jquery-plugins, jquery-mobile, phonegap-plugins, photoswipe

我正在尝试根据与我的画廊相关的任意数据进行一些图像处理。

```
 gallery.html('');
    $.each(data.photos, function(key, photo) {

        var item = "<li><a href='http://stage.domain.com/assets/img/user/"+photo.full+"'><img src='http://stage.domain.com/assets/img/user/"+photo.med+"'/></a></li>";

        gallery.append(item);
    });
    gallery.trigger('create');

    var options = {

        enableMouseWheel: false , 
        enableKeyboard: false ,
        captionAndToolbarAutoHideDelay:0,
        jQueryMobile:true

    }

    var swipe = $(".gallery a").photoSwipe(options);

    // onDisplayImage
    swipe.addEventHandler(PhotoSwipe.EventTypes.onDisplayImage, function(e){
        console.log('onDisplayImage{');
        console.log('onDisplayImage - e.action = ' + e.action);
        console.log('onDisplayImage - e.index = ' + e.index);
        console.log(swipe.getCurrentImage());
        console.log('onDisplayImage}');
    }); 
```

但是 ondisplayimage 事件永远不会被触发，因为 PhotoSwipe 没有定义

```
 06-14 04:28:45.496: D/CordovaLog(31662): Uncaught ReferenceError: PhotoSwipe is not defined 
```

示例[https://github.com/codecomputerlove/PhotoSwipe/blob/master/src/examples/07-custom-toolbar.html](https://github.com/codecomputerlove/PhotoSwipe/blob/master/src/examples/07-custom-toolbar.html)不使用我需要的 jquery 实现。所以基本上我如何使用 jquery mobile 连接到事件处理程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T01:23:48.577

改变：

```
swipe.addEventHandler(PhotoSwipe.EventTypes.onDisplayImage, function(e){ 
```

至：

```
swipe.addEventHandler(window.Code.PhotoSwipe.EventTypes.onDisplayImage, function(e){ 
```

我使用 jQuery 编写内容并像这样直接调用类解决了这个问题。

# c# - cookie 是存储会话变量的唯一方法吗？

> ID：11032409
> 
> 赞同：0
> 
> 时间：2012-06-14T11:46:37.947
> 
> 标签：c#, session, variables

我想存储用户设置（语言）。所以我可以在页面加载时获取相应的资源。我认为 cookie 将是可行的方法，但这不是一个选择，太难了，因为我尝试了又尝试但没有成功。

两天后我想放弃饼干，看看是否有另一种方法可以实现相同的目标

我读过这篇文章[http://msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx) 但我不确定我是否可以使用它来实现我想要的。

在我的情况下，我可以使用哪些 cookie 替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:51:38.083

根据您正在寻找的持久性级别，还有其他几种方法可以做到这一点。第一种是使用 session 来保存这些设置。但是，如果您使用会话，则设置只会与会话一样长。如果您的网站具有某种身份验证接口，您可以将设置存储在与用于身份验证的用户名相关的数据库中。如果您不涉及身份验证并且只是想记住用户使用特定的计算机/设备，您可以通过对系统进行足迹（并非微不足道）并将该足迹存储在与它的任何设置相关的数据库中来实现相同的结果会遇到。

如果这些选项对您不可用，那么 cookie 将是您唯一的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:52:29.447

使用 cookie 保存会话 ID 的另一种替代方法是使用无 cookie 会话管理，您链接到的文章中提到了这一点。cookie 不会与会话标识符一起保存在客户端计算机上——相反，它将位于查询字符串中。这绝对是一个“丑陋”的解决方案，但它是您拥有的少数选择之一。您可以保留与每个请求一起发送的 cookie，或者在查询字符串上粘贴一些内容以识别请求。

无论哪种方式，您的服务器都需要某种方式来获取标识符并检索您的会话数据——无论是从已知的 cookie 还是从已知的查询字符串值中获取 ID。

我的意思是，可能还有其他方法——在每一页上保留一个隐藏的值，但我认为这会变得更加“丑陋”。您希望将该信息保留在您正在呈现的页面/信息之外。

# javascript - Sys.ParameterCountException：参数计数不匹配

> ID：11032413
> 
> 赞同：14
> 
> 时间：2012-06-14T11:46:44.953
> 
> 标签：javascript, jquery, asp.net, ajax, updatepanel

`firefox`我在and中遇到以下问题`google chrome`：

```
Sys.ParameterCountException: Parameter count mismatch. 
```

我调用以下 javascript 方法`onclick`：

```
<script type="text/javascript">
        var confirmSubmited = false;
        function SubmitWithLog(par_name, par_address, frm) {

            jQuery.ajax({
                url: "/LogAction.ashx?par_name=" + par_name + "&par_address=" + par_address,
                type: "GET",
                timeout: 3000,
                async: true, // you can try and async:false - maybe is better for you
                data: action = 4, // here you send the log informations
                cache: false,
                success: function(html) {
                    jQuery(frm).submit();
                },
                error: function(responseText, textStatus, XMLHttpRequest) {
                    jQuery(frm).submit();
                }
            });

            return false;
        }
    </script> 
```

* * *

firebug 的链接将呈现如下：

```
<a href="#" onclick="SubmitWithLog('%d8%b7%d9%84%d8%a8+%d8%a5%d9%84%d8%aa%d9%85%d8%a7%d8%b3+‌​%d9%84%d9%84%d9%85%d9%88%d8%a7%d8%b1%d8%af+%d8%a7%d9%84%d8%a8%d8%b4%d8%b1%d9%8a%d‌​8%a9','...../RequestList.aspx','#ctl43');return false;">GO </a> 
```

* * *

根据以下链接：

[错误：Sys.ParameterCountException：参数计数不匹配。](http://wraithnath.blogspot.gr/2012/03/error-sysparametercountexception.html)

我设置`ScriptMode = "release"`

但我得到另一个错误

```
this._toFormattedString is not a function 
```

IE中不存在这个问题。

* * *

编辑 ：

```
public class LogAction : IHttpHandler, System.Web.SessionState.IRequiresSessionState
    {

        public void ProcessRequest(HttpContext con)
        {
            // log here what you wish
            string[] statistics = TrackUser();
            string a = HttpUtility.UrlDecode(con.Request.Params["Par_name"].ToString());
            string b = con.Request.Params["Par_address"].ToString();

            TraceActivity(a, b, statistics[0], statistics[1], statistics[2]);
            // end up with no content
            con.Response.TrySkipIisCustomErrors = true;
            con.Response.Status = "204 No Content";
            con.Response.StatusCode = 204;
        }

    //-------------------------------------------
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T15:58:54.580

当您使用不正确数量的参数调用 ajax API 的公共方法时，就会发生这种情况。例如，尝试`Boolean.parse("true", "what?")`. 它只需要 1 个参数，您传入 2 或发送一个空值。

您的提交链接`...../RequestList.aspx`也看起来不像一个正确的地址。所以请确保您没有传递 null 或错误的参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T11:30:21.623

可能值得包装您的数据：引号中的项目

```
data: action = 4 
```

变成

```
data: "action = 4" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-25T13:32:27.583

在 de web.config 中设置 debug="false" 似乎可以消除错误

# jquery - 在不悬停的情况下保持 Mega 下拉菜单元素处于活动状态

> ID：11032415
> 
> 赞同：1
> 
> 时间：2012-06-14T11:46:48.897
> 
> 标签：jquery, html, css, drop-down-menu, megamenu

这是菜单链接：- [http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/) 我是在该菜单上创建一个下拉列表，当列表离开菜单下拉区域时，它会关闭。我知道我们可能需要一点 jquery，但我做不到。我试过了，但它不起作用:-

```
$('select').change(function(){
    $(this).parent().parent().hover();
}); 
```

提前致谢。

# c# - ASP.Net 应用程序中的 Quartz.Net

> ID：11032418
> 
> 赞同：3
> 
> 时间：2012-06-14T11:46:56.373
> 
> 标签：c#, .net, quartz-scheduler, quartz.net, quartz.net-2.0

刚刚下载 Quartz.Net，阅读过时的文档，最后得到了我认为正确的代码。（如果不是，请告诉我）

我把它放在我的 ASP.Net 应用程序的 Application_Start 中，代码被执行但作业没有运行。我想我在某处读到过关于将 Quartz 设置为单例的信息，但不确定我是否在这里做到了？

我想将其设置为每天 9 点运行，但现在已经使用 StartNow 来检查它是否有效。

请指教我该怎么办？

```
 private void StartScheduler()
    {
        ISchedulerFactory schedulerFactory = new StdSchedulerFactory();

        IScheduler scheduler = schedulerFactory.GetScheduler();
        scheduler.Start();

        IJobDetail jobDetail = JobBuilder
            .Create()
            .OfType(typeof(DBCleanUpJob))
            .WithIdentity(new JobKey("test", "1"))
            .Build();

        var trigger = Quartz.TriggerBuilder.Create()
                    .ForJob(jobDetail)
                     .WithIdentity(new TriggerKey("test", "1"))
                    .WithSimpleSchedule()
                    .StartNow()
                    .Build();
        //.WithDailyTimeIntervalSchedule(x=>x.StartingDailyAt(new TimeOfDay(09,00)));

        scheduler.ScheduleJob(jobDetail, trigger);
    }

public class DBCleanUpJob : IJob
{
    private IDocumentSession DocumentSession;

    public DBCleanUpJob(IDocumentSession DocSession)
    {
        DocumentSession = DocSession;
    }

    #region IJob Members

    public void Execute(IJobExecutionContext context)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T12:13:22.560

正如你所说，调度程序应该是一个单例。与调度器有关的代码不是单例的，调度器只存在于应用程序启动的范围内，而不是应用程序运行的范围内。

```
public static IScheduler Scheduler { get; private set; }

private void StartScheduler()
{
    Scheduler = new StdSchedulerFactory().GetScheduler();
    Scheduler.Start();

    var jobDetail = JobBuilder
        .Create()
        .OfType(typeof(DBCleanUpJob))
        .WithIdentity(new JobKey("test", "1"))
        .Build();

    var trigger = Quartz.TriggerBuilder.Create()
                .ForJob(jobDetail)
                .WithIdentity(new TriggerKey("test", "1"))
                .WithSimpleSchedule()
                .StartNow()
                .Build();
    //.WithDailyTimeIntervalSchedule(x=>x.StartingDailyAt(new TimeOfDay(09,00)));

    Scheduler.ScheduleJob(jobDetail, trigger);
} 
```

正如杰霍夫指出的那样。如果在一段时间内没有活动，IIS 将关闭网站/应用程序。

另请注意，您的作业将无法访问 asp.net 管道。作业不在请求的上下文中执行，因此会话、请求、响应、cookie 对作业不可用。

最后，如果您希望调度程序始终运行，它需要独立于网站。Windows 服务是一个不错的选择。创建一个 Windows 服务项目并在服务启动时启动调度程序。然后，您可以在网站上设置石英以将作业代理到 Windows 服务。允许站点调度作业，但实际存储和执行由 Windows 服务调度程序执行。

# facebook - 对应用生成的帖子发表“赞”或评论的朋友总数

> ID：11032428
> 
> 赞同：0
> 
> 时间：2012-06-14T11:47:30.627
> 
> 标签：facebook, facebook-graph-api

我被要求提出这个指标。我不确定它背后的想法，也许 Facebook 朋友可以多次发表评论。

但是我浏览了post api docs并且想不出我将如何衡量它。我还查看了 facebook 的见解，但找不到任何东西。任何有关如何衡量这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:02:10.053

您可以使用此 FQL 查询获取帖子的点赞数

```
SELECT user_id FROM like WHERE object_id=" " // Object ID can be the post ID, that you received when a post is generated 
```

您将收到所有喜欢该帖子的人的 ID，您可以检查这些 ID 与用户朋友的 ID。这样你就可以计算出喜欢某个帖子的朋友的数量

[类似 fql 表](http://developers.facebook.com/docs/reference/fql/like/)的参考

同样对于评论，您可以使用以下 FQL 查询

```
SELECT comments,username,text,fromid FROM comment WHERE object_id=" " // Object ID can be the post ID 
```

同样对于上述查询，您将获得以下数据。并且您将很容易获得评论过帖子的用户的 ID，并且您可以再次查看用户的朋友 ID。

```
{
  "data": [
    {
      "comments": [
      ], 
      "username": "", 
      "text": "<3", 
      "fromid": 100003768234756
    }, 
    {
      "comments": [
      ], 
      "username": "Anonymous User", 
      "text": "So True <3", 
      "fromid": 1770337460
    }, 
    {
      "comments": [
      ], 
      "username": "Anonymous User", 
      "text": "That is the truth.......", 
      "fromid": 1165407722
    }, 
    {
      "comments": [
      ], 
      "username": "", 
      "text": "<3", 
      "fromid": 537035838
    }, 
    {
      "comments": [
      ], 
      "username": "Anonymous User", 
      "text": "So do u my love", 
      "fromid": 100003542817498
    }
  ]
} 
```

[注释 fql 表](http://developers.facebook.com/docs/reference/fql/comment/)的参考

跟踪您为每个用户发布的每个帖子。当您通过您的应用在 Facebook 上发布帖子时，您会获得每个帖子的帖子 ID，因此您只需要跟踪为每个用户生成的每个帖子，这样您就可以获得每个帖子的点赞数

# sql - 创建视图查询不起作用

> ID：11032431
> 
> 赞同：-2
> 
> 时间：2012-06-14T11:47:52.220
> 
> 标签：sql, oracle, sqlplus

这是我试图解决的书中的问题..我需要创建此报告..

特定日期所有频道的节目列表，显示频道号、供应商、套餐、节目名称、评级代码和节目时间。这将类似于节目指南，只是不特定于包装。这是一个日期驱动的报告，因此它应该只显示指定的单个日期的程序。

到目前为止我试过这个..

```
CREATE VIEW PROG_LINEUP AS
SELECT DISTINCT
  PC.PROGTIME AS `SHOWTIME`,
  P.PROGNAME AS `PROGRAM TITLE`,
  C.CHID AS `CHANNEL #`,
  SU.SUPNAME AS `SUPPLIER`,
  R.RATING AS `RATING`
FROM
  PROG_CHAN PC,
  CHANNELS C,
  SUPPLIERS SU,
  PROGRAM P,
  CHANNEL_PACKAGE CP,
  RATING R
WHERE
  PC.SHOWDATE = '18-DEC-10'
  AND P.PROGID = PC.PROGID
  AND CP.CHID = PC.CHID
  AND R.RATINGID = P.RATINGID
  AND C.CHID = PC.CHID
  AND SU.SUPID = P.SUPID
ORDER BY PC.CHID; 
```

但是当表 Prog_chan 存在时它会给出这个错误！我检查了..有什么问题？
请告诉我是否需要任何表格脚本。请帮忙...

```
WHERE PC.SHOWDATE = '18-DEC-10' AND
*
ERROR at line 13:
ORA-00903: invalid table name 
```

我不知道出了什么问题，因为 Prog_chan 表存在并且其中也有值..

```
QL> desc prog_chan;
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
CHANID                                    NOT NULL NUMBER(5)
PROGID                                    NOT NULL NUMBER(5)
SHOWDATE                                  NOT NULL DATE
STARTTIME                                 NOT NULL DATE 
```

@杰夫-

我删除了那个逗号，但现在是这个错误......

```
CHANNEL_PACKAGE CP, * ERROR at line 11: ORA-00942: table or view does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:50:15.570

WHERE 子句前有一个错误的额外逗号。

```
RATING R,
WHERE PC.SHOWDATE = '18-DEC-10' AND 
```

# python - django connection.queries - 'list' 对象不可调用

> ID：11032434
> 
> 赞同：1
> 
> 时间：2012-06-14T11:48:01.550
> 
> 标签：python, django

当我在 django 中使用 connection.queries 时，我得到一个奇怪的异常：

```
'list' object is not callable 
```

这对我来说不是很清楚。这是我正在运行的代码：

```
def myOtherFunction(request):
    return arrangeCountOfItems(Story.objects.filter(user=request.user.id).order_by('-create_date'))

def arrangeCountOfItems(storyList):
    for story in storyList:
        story.rateA = story.post_set.filter(rating=RATEA).count()
        story.rateB = story.post_set.filter(rating=RATEB).count()
        story.rateC = story.post_set.filter(rating=RATEC).count()
        print connection.queries()
    return storyList 
```

我有点想弄清楚如何通过外键的外键进行过滤（我也想在这里问这个问题！）并认为我会尝试从查询中弄清楚发生了什么......但没有骰子！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:51:16.803

`connection.queries`是一个带有 SQL 查询的列表，它不是一个可调用的函数。

[例如](https://docs.djangoproject.com/en/dev/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running)，请参阅Django 文档中的此示例。您可以改为执行以下操作：

```
print connection.queries 
```

# android - Preload progressDialog 使我的应用程序仅在 ICS 中崩溃

> ID：11032436
> 
> 赞同：1
> 
> 时间：2012-06-14T11:48:08.710
> 
> 标签：android, crash, android-4.0-ice-cream-sandwich, preload

因此，我使用此代码显示消息“正在安装...”，同时使用函数“setUpDB”设置数据库，然后在数据库函数完成后将其删除。这在姜饼和蜂窝中运行良好，但会导致应用程序在 ICS 中崩溃

```
 final ProgressDialog pd=ProgressDialog.show(this,"","Installing...");

    final Handler handler = new Handler()
    {
        public void handleMessage(Message msg)
        {
            if(msg.what==0)
            {
                pd.dismiss();
            }
        }
    };   

    //have subcategory heading???
    Thread thread = new Thread()
    {
        @Override
        public void run() {
        setUpDB();
        handler.sendEmptyMessage(0);
        }
    };
    thread.start(); 
```

如果不关闭消息，应用程序将继续在 ICS 中运行（但您不能做任何事情），并且如果用户在完成设置之前执行任何访问数据库的操作，它将崩溃（这就是为什么我需要安装消息）..

好的，这是使用 AsyncTask 的代码

```
 final ProgressDialog pd=ProgressDialog.show(this,"","Installing...");
    final Handler handler = new Handler()
    {
        public void handleMessage(Message msg)
        {
            if(msg.what==0)
            {
                pd.dismiss();
            }
        }
    };   
    new databaseInstallTask().execute(handler); 
```

和

```
 private class databaseInstallTask extends AsyncTask<Handler, Void, Handler> 
{       
        @Override
        protected Handler doInBackground(Handler... params) {
            setUpDB();
            return params[0];
        }

    protected void onPostExecute(Handler handler) {
        handler.sendEmptyMessage(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:51:11.560

您为什么不尝试使用`Asynctask`我认为最合适的方式来处理您的案件。

# iphone - 为 UIView 更改设置动画，其中 UIView 完全重建

> ID：11032437
> 
> 赞同：2
> 
> 时间：2012-06-14T11:48:17.990
> 
> 标签：iphone, ios, uiview, uiviewcontroller, core-animation

我的 UIViewController 获得了它控制的视图，以完全重建自己，如下所示：

```
[self.view rebuildYourself:bIsLandscape]; // this line is in the ViewController 
```

然后视图本身包含以下方法：

```
-(void)rebuildYourself:(BOOL)isLandscape
{
    NSArray *viewsToRemove = [self subviews];
    for (UIView *v in viewsToRemove) {
        [v removeFromSuperview];
    }

    [self addControls]; // adds lots of views
    [self layoutControlsWithOrientation:isLandscape]; // frames the views

} 
```

我想为整个过渡设置动画。我试过这个：

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionTransitionCurlUp
                 animations:^{
                             [self.view rebuildYourself:bIsLandscape];
                         }
                 completion:^(BOOL finished){

                         }]; 
```

但是动画忽略了UIViewAnimationOptionTransitionCurlUp的options值，每次都是从左上角流入。

我试过这个：

```
[UIView beginAnimations:@"kkk" context:nil];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];
[UIView setAnimationDuration:1.0];
[self.view rebuildYourself:bIsLandscape];
[UIView commitAnimations]; 
```

但在这种情况下，过渡确实很好地卷曲，但底层视图在过渡完成之前是空白的，然后新视图突然“弹出”到视图中，这破坏了过渡的效果。

谁能告诉我为视图完全重建自身的过渡设置动画的正确/最佳方式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:10:50.267

制作两个视图并将旧视图放在新的重建视图之上。然后“卷曲”旧视图，以便显示新视图并从内存中删除旧视图。

# linux - Linux下通过软件强制自动调整显示器

> ID：11032440
> 
> 赞同：1
> 
> 时间：2012-06-14T11:48:26.417
> 
> 标签：linux, xrandr

使用模拟监视器时，我总是得到在 Xorg 启动时向右移动的图像。有没有办法强制从软件自动调整，例如使用 xranrd？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T12:00:15.643

事实上，您可以使用 XRandR 工具。例如，如果您的第二台显示器通过 VGA 电缆连接，您可以使用以下命令：

```
 xrandr --output VGA1 --auto --right-of LVDS1 
```

**--auto**参数将尝试自动设置分辨率。

如果您想要特定的分辨率，您可以尝试使用 --mode 参数，例如

```
 xrandr --output VGA1 --mode 1600x1050 --right-of LVDS1 
```

有关更多详细信息，请参阅此处的帖子：

[http://devmain.blogspot.co.uk/2013/06/dual-monitors-configuration-for-linux.html](http://devmain.blogspot.co.uk/2013/06/dual-monitors-configuration-for-linux.html)

# c# - 最小化 XML 文件的大小

> ID：11032444
> 
> 赞同：0
> 
> 时间：2012-06-14T11:49:01.490
> 
> 标签：c#, .net, xml, minimize

我有一个以 XML 格式交换数据的客户端/服务器应用程序。数据大小约为 50MB，其中大部分由 XML 标记本身组成。有没有办法获取生成的 XML 并索引节点名称，如下所示：

```
<User><Assessments><Assessment ID="1" Name="some name" /></Assessments></User> 
```

到：

```
<A><B><C ID="1" Name="some name" /></B></A> 
```

这将节省大量的膨胀。

**编辑**
此数据是从实体框架对象序列化的。选择 XML 作为协议的原因是 .NET 的内在支持以及 FromXml 和 ToXml 的智能代码生成，以便实体规避循环引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:53:36.410

仅在客户端和服务器之间压缩/解压缩数据流怎么样？与对 xml 数据进行一些自定义转换相比，这将更容易实现并且更不容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:54:56.193

您可以考虑对数据使用属性而不是元素。例如，如果您将“性别”作为属性，您将获得：

```
<person gender="female">
  <firstname>Anna</firstname>
  <lastname>Smith</lastname>
</person> 
```

而如果它是一个元素，你会得到：

```
<person>
  <gender>female</gender>
  <firstname>Anna</firstname>
  <lastname>Smith</lastname>
</person> 
```

这不是严格正确的，但会实现你所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:58:06.223

XML 的重点是您不需要压缩/最小化数据。如果您需要最大程度地减少线路上的内容，那么您很有可能使用了错误的协议。

显然，您可以通过 gzip 流传递它，这将为您带来巨大的优势，但如果您想从中榨取更多，那么可能值得研究 JSON 甚至二进制格式。

XML 被设计为可供人类阅读，并且通过消除可读性，您基本上消除了首先使用 XML 的主要原因之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:06:51.540

或者，您也可以考虑`json`代替`xml`，与`xml`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T07:26:48.000

我最终编写了一个小类，它重命名节点名称并创建一个映射元素，因此该过程也可以反转。仅此一项就使文件大小从 50MB 减少到 10MB。

下一步是压缩文件，但我想知道使用二进制序列化可以节省多少空间。以前没有尝试过。

# android - 在 Android 应用程序中显示应用程序日志消息的代码

> ID：11032448
> 
> 赞同：1
> 
> 时间：2012-06-14T11:49:24.220
> 
> 标签：android, logging, android-logcat

我的 Android 应用程序发布了许多日志消息。我试图在同一个应用程序中显示所有这些日志消息。应用程序有一个 UI 元素（文本视图），它应该列出我的应用程序记录的所有消息。如何访问按我的应用程序名称过滤的日志消息（例如按名称`com.mycompany.myapp`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:12:27.137

要在应用程序中显示系统日志，根据您自己的应用程序名称进行过滤，您可以将以下内容作为内部类插入：

```
private static final String LogCatCommand = "logcat ActivityManager:I *:S";
private static final String ClearLogCatCommand = "logcat -c";

 private class MonitorLogThread extends Thread{
    public MonitorLogThread(){
    }

    BufferedReader br;

    @Override
    public void run() {
        try {
            Process process;
            process = Runtime.getRuntime().exec(ClearLogCatCommand);
                process = Runtime.getRuntime().exec(LogCatCommand);
                br = new BufferedReader(new InputStreamReader(process.getInputStream()));
                String line;
                // Check if it matches the pattern
                while(((line=br.readLine()) != null) && !this.isInterrupted()){

                // Filter for your app-line
                if (line.contains("your-filter-string")){
                    Log.i("myAppTag", "Found log-entry for my app:" + line);
                }

            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

在你的 onCreate-Method 中：

```
 Thread mThread = new MonitorLogThread();
  mThread.start(); 
```

您可能必须修改此示例以使其正常工作！

# android - 如何使用加速度计值刷新网页

> ID：11032449
> 
> 赞同：1
> 
> 时间：2012-06-14T11:49:24.277
> 
> 标签：android, accelerometer

我创建了带有加速度计值的应用程序。我想使用加速度计值（X、Y、Z）刷新网页。

注意：我有一个名为 index.html 的网页，在单击按钮时我可以重新加载页面.. 使用`window.location.reload()`

但我想使用加速度计值重新加载 index.html 页面。我有一个应用程序获取加速度计值..

我如何以编程方式识别，设备被震动了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:29:24.757

查看[Accleration 文档页面](http://docs.phonegap.com/en/1.8.0/cordova_accelerometer_accelerometer.md.html#accelerometer.watchAcceleration)上的完整示例。在 watchAcceleration 的 onSuccess 方法中，您可以更新您的网页。我不会告诉它重新加载，因为这会停止页面上运行的所有 JS 并导致 PhoneGap 等重新加载。

# c - pthread中的读/写锁是如何实现的？

> ID：11032450
> 
> 赞同：7
> 
> 时间：2012-06-14T11:49:30.693
> 
> 标签：c, linux, pthreads

它们是如何实现的，尤其是在 pthread 的情况下。他们在后台使用了哪些`pthread`同步 API？一点点伪代码将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T05:12:55.470

我已经有一段时间没有进行任何 pthreads 编程了，但是当我这样做时，我从未使用过 POSIX 读/写锁。问题是大多数时候互斥体就足够了：即。您的关键部分很小，并且该区域的性能不是那么关键，以至于双重障碍值得担心。

在那些性能问题的情况下，通常使用原子操作（通常作为编译器扩展提供）是更好的选择（即额外的障碍是问题，而不是关键部分的大小）。

当您消除所有这些情况时，您会遇到需要真正 rw-lock 的特定性能/公平性/rw-bias 要求的情况；那就是当您发现 POSIX rw-lock 的所有相关性能/公平性参数都未定义且特定于实现时。在这一点上，您通常最好实现自己的，这样您就可以确保满足适当的公平/读写偏差要求。

基本算法是计算每个线程中有多少处于临界区，如果还不允许访问线程，则将其分流到适当的队列以等待。您的大部分工作将是在服务两个队列之间实施适当的公平/偏见。

以下类似 C 的 pthreads 类伪代码说明了我要说的内容。

```
struct rwlock {
  mutex admin; // used to serialize access to other admin fields, NOT the critical section.
  int count; // threads in critical section +ve for readers, -ve for writers.
  fifoDequeue dequeue; // acts like a cond_var with fifo behaviour and both append and prepend operations.
  void *data; // represents the data covered by the critical section.
}

void read(struct rwlock *rw, void (*readAction)(void *)) {
  lock(rw->admin);
  if (rw->count < 0) {
    append(rw->dequeue, rw->admin);
  }
  while (rw->count < 0) {
    prepend(rw->dequeue, rw->admin); // Used to avoid starvation.
  }
  rw->count++;
  // Wake the new head of the dequeue, which may be a reader.
  // If it is a writer it will put itself back on the head of the queue and wait for us to exit.
  signal(rw->dequeue); 
  unlock(rw->admin);

  readAction(rw->data);

  lock(rw->admin);
  rw->count--;
  signal(rw->dequeue); // Wake the new head of the dequeue, which is probably a writer.
  unlock(rw->admin);
}

void write(struct rwlock *rw, void *(*writeAction)(void *)) {
  lock(rw->admin);
  if (rw->count != 0) {
    append(rw->dequeue, rw->admin);
  }
  while (rw->count != 0) {
    prepend(rw->dequeue, rw->admin);
  }
  rw->count--;
  // As we only allow one writer in at a time, we don't bother signaling here.
  unlock(rw->admin);

  // NOTE: This is the critical section, but it is not covered by the mutex!
  //       The critical section is rather, covered by the rw-lock itself.
  rw->data = writeAction(rw->data);

  lock(rw->admin);
  rw->count++;
  signal(rw->dequeue);
  unlock(rw->admin);
} 
```

类似上面的代码是任何 rwlock 实现的起点。考虑一下问题的性质，并用适当的逻辑替换出队，以确定接下来应该唤醒哪类线程。根据应用程序，通常允许有限数量/时间的读者超越作者，反之亦然。

当然，我的一般偏好是完全避免 rw-locks。通常通过使用原子操作、互斥体、STM、消息传递和持久数据结构的某种组合。然而，有时候你真正需要的是一个 rw-lock，当你这样做时，了解它们是如何工作的很有用，所以我希望这会有所帮助。

编辑 - 回答（非常合理的）问题，我在上面的伪代码中在哪里等待：

我假设出队实现包含等待，因此在某处`append(dequeue, mutex)`或`prepend(dequeue, mutex)`存在以下代码块：

```
while(!readyToLeaveQueue()) {
  wait(dequeue->cond_var, mutex);
} 
```

这就是为什么我将相关互斥体传递给队列操作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:47:14.097

每个实现都可以不同，但​​由于 POSIX 要求线程能够多次获取 rwlock 上的读锁，因此它们通常必须默认偏爱读者。如果他们偏爱写入器，那么每当写入器等待时，读取器将在第二次读取锁尝试时死锁，除非实现可以确定读取器已经拥有读取锁，但唯一确定的方法是存储所有线程的列表持有读锁，这在时间和空间要求上非常低效。

# mysql - PHP - MySQL - 删除行

> ID：11032456
> 
> 赞同：9
> 
> 时间：2012-06-14T11:50:07.230
> 
> 标签：mysql

我不太确定我做错了什么。我正在尝试使用此代码删除整行，但它不起作用。没有发生错误，它会打印它被删除的行，但是当我去看看它不工作时。有什么想法吗？

```
<?
$con = mysql_connect("localhost","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("theobse1_scores", $con);

$sql="DELETE FROM times WHERE id='$id'";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record deleted go back to delete another!";

mysql_close($con)
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T11:53:04.167

您使用`$order`而不是您的查询变量`$sql`

```
$sql="DELETE FROM times WHERE id='$id'";
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T12:22:16.650

我用这段代码让它工作了！

```
<?php
$id =$_REQUEST['id'];

$con = mysql_connect("localhost","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("database", $con);

// sending query
mysql_query("DELETE FROM times WHERE id = '$id'")
or die(mysql_error());      

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-07T11:42:33.253

```
else
    {
    $qry = "SELECT * FROM my_login WHERE email = '".$email."' LIMIT 1";
    $res = mysql_query($qry);
    if(mysql_num_rows($res) > 0)
        {
        echo "Email already exists!";
        }
    else
        {
        $qry="INSERT INTO my_login SET name='$name',city='$city',comment='$comt',password='$pass',email='$email'";
        mysql_query($qry);
        }
    }       
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T13:44:51.440

```
delete.php

<?php
    include "connect.php";
    $id =$_REQUEST['id'];

    // sending query
    mysql_query("DELETE FROM utilizatori WHERE id = '$id'")
    or die(mysql_error());      

    ?> 
```

是正确的，我测试并从 ID 中删除

这是删除按钮：`

```
<?<a href=\"delete.php?id=$row[id]\">Delete</a>`?> 
```

# python - 在 matplotlib 中的曲线下绘制

> ID：11032458
> 
> 赞同：1
> 
> 时间：2012-06-14T11:50:11.140
> 
> 标签：python, matplotlib

对于子图 ( `self.intensity`)，我想在图形下方遮蔽区域。

我试过这个，希望它是正确的语法：

```
self.intensity.fill_between(arange(l,r), 0, projection) 
```

我打算在整数范围`projection`内对 numpy 数组进行着色。`(l,r)`

但这给了我一个错误。我该如何正确地做到这一点？

* * *

这是追溯：

```
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_wx.py", line 1289, in _onLeftButtonDown
    FigureCanvasBase.button_press_event(self, x, y, 1, guiEvent=evt)
  File "/usr/lib/pymodules/python2.7/matplotlib/backend_bases.py", line 1576, in button_press_event
    self.callbacks.process(s, mouseevent)
  File "/usr/lib/pymodules/python2.7/matplotlib/cbook.py", line 265, in process
    proxy(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/cbook.py", line 191, in __call__
    return mtd(*args, **kwargs)
  File "/root/dev/spectrum/spectrum/plot_handler.py", line 55, in _onclick
    self._call_click_callback(event.xdata)
  File "/root/dev/spectrum/spectrum/plot_handler.py", line 66, in _call_click_callback
    self.__click_callback(data) 
  File "/root/dev/spectrum/spectrum/plot_handler.py", line 186, in _on_plot_click
    band_data  = self._band_data)
  File "/root/dev/spectrum/spectrum/plot_handler.py", line 95, in draw
    self.intensity.fill_between(arange(l,r), 0, projection)
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 6457, in fill_between
    raise ValueError("Argument dimensions are incompatible")
ValueError: Argument dimensions are incompatible 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:13:29.350

似乎您正在尝试填充从 l 到 r 的投影部分。fill_between 期望 x 和 y 数组长度相等，因此您不能期望仅填充曲线的一部分。

要得到你想要的，你可以执行以下任一操作： 1\. 只将需要填充的部分投影发送到命令；并分别绘制其余的投影。2.发送一个单独的布尔数组作为定义要填写的部分的参数。请参阅[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.fill_between)！

对于前一种方法，请参见下面的示例代码：

```
from pylab import *

a = subplot(111)

t = arange(1, 100)/50.
projection = sin(2*pi*t)

# Draw the original curve
a.plot(t, projection)
# Define areas to fill in
l, r = 10, 50
# Fill the areas
a.fill_between(t[l:r], projection[l:r])
show() 
```

# c# - Oracle 企业库 dbcommand AddInParameter 方法

> ID：11032463
> 
> 赞同：0
> 
> 时间：2012-06-14T11:50:35.870
> 
> 标签：c#, unicode, oracle11g, nvarchar

我的问题与这个问题非常相似[——Oracle 的 Addin 参数，](https://stackoverflow.com/questions/7235135/enterprise-library-dbcommand-addinparameter-method)除了我使用的是 Oracle 11g。数据库有两个不同的字符集`VARCHAR(Western European)`和`NVARCHAR(Unicode)`数据类型。

```
db.AddInParameter(cmd, "nationalColumn", DbType.String, "高野") 
```

数据库中的国家字符集是 unicode，因此 NVARCHAR 列能够保存这些字符。

我的问题是我如何告诉 db.AddInParameter 函数我添加的参数是 NVARCHAR 而不是默认情况下假设的 VARCHAR。

添加到这个 - 我正在使用 System.Data.OracleClient 连接到数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:05:30.380

您不能在西欧编码中对汉字进行编码。此编码定义了有限数量的字符，并且不包括中文。

你期望什么输出？我希望数据出现乱码或返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:34:41.643

您是自己指定参数还是让 Enterprise Library 尝试找出参数类型？如果你打电话

```
command.AddInParameter(“parameterName”, value); 
```

尝试调用该过程并让 Enterprise Library 找出参数，例如以下示例：

```
DB.ExecuteNonQuery(“PKG_USER.DELETE”, userId); 
```

该过程需要一个`INT`名为 的参数`P_ID`，但该命令仅传递参数值。EntLib 使用参数 order 来发送它们。

也看看

*   我写的另一篇文章：http: [//devstuffs.wordpress.com/2012/03/13/enterprise-library-5-with-odp-net/](http://devstuffs.wordpress.com/2012/03/13/enterprise-library-5-with-odp-net/)
*   此示例代码：[https ://github.com/stanleystl/EntLib5ODP.NET](https://github.com/stanleystl/EntLib5ODP.NET)
*   这个堆栈溢出答案：[C#/Oracle: Specify Encoding/Character Set of Query?](https://stackoverflow.com/questions/6535773/c-oracle-specify-encoding-character-set-of-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:31:30.967

我花了一周的时间来回答我自己的问题。System.Data 命名空间不理解它正在处理的列是国家列，除非它被明确指定为 OracleType.Nvarchar。

为了解决上述情况，我必须重写 AddInParameter 函数以添加一个 switch case 检查输入 DBType 是否为 String 并将其映射到 OracleType.NVarchar。

高温高压

# windows-phone-7 - 具有额外功能的 Windows 手机短信插件

> ID：11032477
> 
> 赞同：0
> 
> 时间：2012-06-14T11:51:21.957
> 
> 标签：windows-phone-7, windows-phone

我正在使用本文中的代码和 phonegap 应用程序。

[http://blogs.msdn.com/b/glengordon/archive/2011/12/02/phonegap-on-wp7-tip-3-sending-sms-and-intro-to-plugins.aspx](http://blogs.msdn.com/b/glengordon/archive/2011/12/02/phonegap-on-wp7-tip-3-sending-sms-and-intro-to-plugins.aspx)

该插件工作正常，但是当发送短信时，我想自动返回我的应用程序。这可能吗？如果可以在不使用默认集成发件人的情况下发送短信，那就更好了。

我是 C# 和 windows phone 应用程序的新手 - 请帮助我 ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:30:41.890

由于安全原因，无法避免集成 SMS 发送器。用户将在短信对话页面上点击返回按钮后返回您的应用程序（由于 WP7 中的堆栈控制分页特性，自动确保这一点，但在点击主页按钮后不会返回（同样，无法阻止此行为）以任何方式）并且您的应用程序将被暂停（可以通过按住后退按钮并选择它来返回它）。

# blackberry - 黑莓网络中页面之间的导航

> ID：11032479
> 
> 赞同：0
> 
> 时间：2012-06-14T11:51:28.690
> 
> 标签：blackberry, blackberry-webworks

我想知道如何处理 html 页面之间的导航。当我使用

```
window.location.href = "Screen1.html"; 
```

我能够加载新页面，但是当我单击后退按钮时，应用程序被终止。我该如何处理？

在原生java黑莓中，屏幕将在堆栈上，那么在webworks中如何完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:07:29.297

我认为更好的方法是
`<a href="Screen1.html" >`
在您单击后退按钮时在第二页使用 HTML url，它将带您进入预览屏幕“就像普通浏览器一样”

# plone - 重命名克隆站点

> ID：11032480
> 
> 赞同：4
> 
> 时间：2012-06-14T11:51:29.843
> 
> 标签：plone

过去我听说重命名 Plone 站点对象（更改它的 id）可能很危险。

改名危险吗？重命名时有哪些潜在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:02:51.120

问题似乎出在参考文献中（来自[http://plone.293351.n2.nabble.com/Renaming-the-Plone-object-via-ZMI-td4428462.html](http://plone.293351.n2.nabble.com/Renaming-the-Plone-object-via-ZMI-td4428462.html)）：

> 我正在尝试通过 Zope 管理界面重命名 Plone 对象，但是作为副作用，我在“reference_catalog”上的所有引用都丢失了，包括 LinguaPlone 翻译、相关内容和集合中的路径标准。
> 
> 我正在使用 Plone 3.1.7，您可以通过创建一个普通的 Plone 对象来重现该问题，添加一些相关内容相互指向的文档，添加一个文件夹和集合，并向集合添加一个路径标准，指向那个文件夹。检查“reference_catalog”。之后，重命名门户对象，“reference_catalog”将为空。
> 
> 这个问题有解决办法吗？”

答案是：

> 您需要更新您的目录，因为 plone 对象的 id 是所有内容路径的第一个元素。
> [http://plone.org/documentation/error/portal-content-has-gone-missing/](http://plone.org/documentation/error/portal-content-has-gone-missing/)

在线程中有一些脚本链接以避免丢失引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T05:35:39.127

对存储为路径的对象的任何引用都将是一个问题。正如 Yuri 的回答所指出的，这包括目录中的路径。通过完全重建目录，这是一个相对容易处理的问题。还有其他问题可能更难找到，例如收集标准和 portlet 数据中的路径。

# javascript - Y 组合器：某些函数没有固定点

> ID：11032481
> 
> 赞同：8
> 
> 时间：2012-06-14T11:51:35.467
> 
> 标签：javascript, y-combinator

关于 Y 组合器的[Wikipedia 文章](http://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator)提供了 Y 组合器的以下 JavaScript 实现：

```
function Y(f) {
    return (
        (function (x) {
            return f(function (v) { return x(x)(v); }); })
        (function (x) {
            return f(function (v) { return x(x)(v); }); })
    );
} 
```

JavaScript 中 Y 组合子的存在应该意味着每个 JavaScript 函数都有一个固定点（因为对于每个函数`g`，`Y(g)`并且`g(Y(g))`应该相等）。

然而，想出没有固定点的函数并不难`Y(g) = g(Y(g))`（见[这里](http://jsfiddle.net/b2nTJ/2/)）。甚至某些泛函也没有固定点（参见[此处](http://jsfiddle.net/b2nTJ/1/)）。

每个函数都有一个不动点的证明如何与给定的反例相一致？`Y(g) = g(Y(g))`JavaScript 不是适用于证明的无类型 lambda 演算吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:50:48.460

据我了解 Wikipedia 文章，它并不暗示“每个 JavaScript 函数都有一个固定点”，这个例子只是展示了如何为具有它的函数实现 Y 组合器的规范。

不，根据那篇文章和[关于定点的文章](http://en.wikipedia.org/wiki/Fixed_point_%28mathematics%29)中的定义，JavaScript 不能是无类型的 lambda 演算，因为它可以制定明显未能通过“有定点”检查的函数，比如`function f(x){ return x + 1 }`或者`x ^ 1`如果你想包含非-numbers ，因此也无法通过“每个函数至少有一个固定点”检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T04:09:08.670

不动点理论有多种形式。**那些编程语言在指称语义**的标题下进行研究。它们依赖于形成具有特殊属性的结构化可数集的值。 [格](http://en.wikipedia.org/wiki/Lattice_%28order%29)和[完全偏序](http://en.wikipedia.org/wiki/Complete_partial_order)是两个例子。所有这些集合都有一个“底部”元素，它原来是一个固定点，意思是“没有有用的结果”。事实上，你对计算机程序感兴趣的唯一定点算子是*最少的*定点运算符：那些找到在结构化值集中最低的唯一最小定点的运算符。（注意，在这些结构化集合中，所有整数都处于同一“级别”。只有底部元素位于下方。其余层由更复杂的类型组成，如函数和元组类型，即结构。）如果你有一些离散数学，[这](http://www.cl.cam.ac.uk/teaching/1112/DenotSem/lectures/lecture-4.pdf)很好地展示了它。Tarsky 的不动点定理实际上是说每个*单调*（或交替*连续*）的函数都有一个不动点。有关定义，请参见上面的参考。在可操作的计算机程序中，底部元素对应于非终止计算：无限递归。

所有这一切的重点是，如果你有一个严格的计算数学模型，你就可以开始证明关于类型系统和程序正确性的有趣事情。因此，这不仅仅是一项学术活动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T15:40:52.710

lambda 表达式的问题在于它们不能被解释为数学意义上的函数，即从一个集合到另一个集合的映射。

原因是函数集`A`自身的基数总是大于 的基数`A`，所以不是所有的函数 from`A`到`A`都可以是 的元素`A`。也就是说，存在`f: A -> A`表达式`f(f)`没有意义的功能。

这就像“不包含自身的所有集合的集合”，在逻辑上没有意义。

JavaScript 不是 lambda 演算的模型。

你的例子的问题是

```
(lambda x.g(x x)) (lambda x.g(x x)) 
```

应该相当于

```
g((lambda x.g(x x)) (lambda x.g(x x))) 
```

但它不在您的 JavaScript 程序中`g`的指示函数在哪里`0`。

`x x`总是`undefined`。因此，第一行的计算结果为`g (undefined) = 0`。第二行计算为`g (g (undefined)) = g (0) = 1`。这意味着您的 lambda 演算 JavaScript 模型实际上并不是真正的模型。

由于对于每个非空集`D`都有一个从`D`到`D`没有固定点的函数，显然不可能有 lambda 演算的模型。我认为甚至应该有可能证明在任何图灵完备的语言中都不存在 Y 组合器的实现。

# facebook - Facebook时间线wallpost图像在喜欢后裁剪

> ID：11032484
> 
> 赞同：3
> 
> 时间：2012-06-14T11:51:39.907
> 
> 标签：facebook, image, facebook-like

我的网站上有一个 Facebook Like 按钮，已经半年了。使用 OG 标签来可视化类似的东西。一切都经过彻底测试，一切都很好地显示在“基本”墙上，以及“时间线”墙上以及新闻提要中。

但是突然之间，当有人喜欢该页面时，时间线墙上的图像被裁剪了。原始图像是 200px x 200px，因为 Facebook 开发者工具提到了这些尺寸。

我认为这不是图像尺寸问题，因为 96x96 图像也在被裁剪。裁剪是指徽标的顶部和底部被截断。

现在我有一个旧帖子（2012 年 3 月）没有裁剪图像和一个帖子（几天前）图像被裁剪。这两者之间的区别在于图像的 url：

原始图像可以的一个： [https ://fbexternal-a.akamaihd.net/safe_image.php?d=AQCAhHvmadrTku6h&w=155&h=114&url=http%3A%2F%2Fwww.poobies.fr%2Fsite%2Fimg%2Fsocialmedia% 2Fsocialmedia_logo_fr.png](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCAhHvmadrTku6h&w=155&h=114&url=http%3A%2F%2Fwww.poobies.fr%2Fsite%2Fimg%2Fsocialmedia%2Fsocialmedia_logo_fr.png)

还有一个图像被裁剪的地方： [https ://fbexternal-a.akamaihd.net/safe_image.php?d=AQCAhHvmadrTku6h&w=155&h=114&url=http%3A%2F%2Fwww.poobies.fr%2Fsite%2Fimg%2Fsocialmedia% 2Fsocialmedia_logo_fr.png&cfs=1](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCAhHvmadrTku6h&w=155&h=114&url=http%3A%2F%2Fwww.poobies.fr%2Fsite%2Fimg%2Fsocialmedia%2Fsocialmedia_logo_fr.png&cfs=1)

看到参数 &cfs=1?

是否有一些选项或一些 OG 参数可以确保 Facebook 不会裁剪图像？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:26:22.367

我做了一些研究，发现问题很可能是使用 PNG 和具有白色背景的图像的组合。

这是我的原始 PNG（90 x 90 像素），带有被裁剪的白色背景：

*   [logo2.png](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDcp6aPPD1ajumL&w=90&h=90&url=http://proto.truecare.com/tcWeb/static/images/truecare_fb_thumbnail.png&cfs=1)

然后使用完整图像大小的具有深色背景的相同 PNG

*   [logo2dark.png](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQA9LZq4uDqx-HR4&w=90&h=90&url=http://proto.truecare.com/tcWeb/static/images/logo1.png&cfs=1)

带有白色 BG 的 JPG 和 GIF 效果很好

*   [logo2.gif](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQASifb-XP15ZY61&w=90&h=90&url=http://proto.truecare.com/tcWeb/static/images/logo2.gif&cfs=1)
*   [logo2.jpg](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQCPCRdOOdj0aP-F&w=90&h=90&url=http://proto.truecare.com/tcWeb/static/images/logo2.jpg&cfs=1)

作为旁注，当我通过 https 提供图像时，Facebook 不喜欢。

如果 Facebook 能记录下他们所做的这些更改，那就太好了，但唉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:07:08.107

我也注意到了这一点。我认为这只是 Facebook 在玩弄它在新闻源/时间线上显示图像的方式。我的图像曾经是从幻灯片中裁剪出来的，但突然间 Facebook 停止了裁剪。它要么是一个错误，要么是后来被恢复的临时更改。

您不能`og:image`手动设置 的尺寸。

# dojo - dijit 树示例

> ID：11032486
> 
> 赞同：0
> 
> 时间：2012-06-14T11:51:56.053
> 
> 标签：dojo, dijit.tree

我一直在尝试从使用 ajax.google.com 版本的 dojo 1.7.2 的网络复制和粘贴 dijit 树示例，但我无法正常工作。有谁知道我可以查看、复制和粘贴其源代码并立即拥有功能树的单个页面？有很多树的点点滴滴的例子（只是 javascript、在服务器上安装了 dijit 的树等），但没有任何人可以复制和粘贴来获得功能齐全的树。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:00:47.630

虽然使用 <1.7 语法...它有利于起步，因为需要对 1.7.2 版本进行较小的修改

[http://dojocampus.com/explorer/#Dijit_Tree_Basic](http://dojocampus.com/explorer/#Dijit_Tree_Basic)

# javascript - onClick - 拨打电话号码

> ID：11032489
> 
> 赞同：0
> 
> 时间：2012-06-14T11:52:12.347
> 
> 标签：javascript, jquery, onclick

> **可能重复：**
> [电话通话的 URL 方案](https://stackoverflow.com/questions/1009181/url-scheme-for-phone-call)
> [iphone safari 拨打电话](https://stackoverflow.com/questions/3649529/iphone-safari-making-phone-call)

我在移动网站上使用下面的代码，但是当有人点击时，我不希望他们定向到新页面，我希望拨打电话号码。这可以使用 onClick 功能吗？

```
<div class="button left" id="map" onClick="window.location='#'"><span class="bottom">Call us now</span></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T12:32:46.383

你应该使用类似的东西

```
<a href="tel:[phone number]"><span class="bottom">Call us now</span></a> 
```

# ruby-on-rails - Redmine REST api [更新状态]

> ID：11032490
> 
> 赞同：0
> 
> 时间：2012-06-14T11:52:12.140
> 
> 标签：ruby-on-rails, ruby, redmine

我正在寻找一种使用测试工具自动跟踪错误的方法。我发现： [http ://www.redmine.org/projects/redmine/wiki/Rest_api_with_ruby](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_ruby)

它描述了一种与 Redmine 中的 REST api 交互的方式。在它之后，我可以创建/更新/销毁问题，但只更新主题或描述等简单字段。（无法更新状态或优先级）

我找不到改变错误状态的方法。我无法更新的所有字段都是“？结构（带有属性）？”。有人设法做到了，我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:21:15.990

我假设您已经克隆了存储库并开始查看代码。

Issues#update 操作中有一行表明它可能是权限问题。

```
@allowed_statuses = @issue.new_statuses_allowed_to(User.current) 
```

确保用户有权更改给定问题的状态和优先级。

我为我的一个项目中的问题添加了所有字段的示例。

```
id: 83, 
tracker_id: 2, 
project_id: 8, 
subject: "Comments", 
description: "Add comments to the trace on list and on graph view...", 
due_date: nil, 
category_id: nil, 
status_id: 1, 
assigned_to_id: 1, 
priority_id: 4, 
fixed_version_id: nil, 
author_id: 1, 
lock_version: 0, 
created_on: "2012-01-23 14:04:11", 
updated_on: "2012-01-23 14:04:11", 
start_date: "2012-01-23", 
done_ratio: 0, 
estimated_hours: nil, 
parent_id: nil, 
root_id: 83, 
lft: 1, 
rgt: 2, 
is_private: false 
```

# sql - SQL 选择最后一条消息

> ID：11032492
> 
> 赞同：0
> 
> 时间：2012-06-14T11:52:29.337
> 
> 标签：sql, optimization, query-optimization

我有一张桌子：

```
CREATE TABLE `tMessages` (
 `tMessages_id` bigint(20) NOT NULL AUTO_INCREMENT,
 `tUsers_sender_uid` bigint(20) NOT NULL,
 `tUsers_recipient_uid` bigint(20) NOT NULL,
 `tMessages_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 `tMessages_text` varchar(2000) NOT NULL,
 PRIMARY KEY (`tMessages_id`),
 KEY `tUsers_sender_uid` (`tUsers_sender_uid`),
 KEY `tUsers_recipient_uid` (`tUsers_recipient_uid`),
 KEY `tUsers_uids` (`tUsers_sender_uid`,`tUsers_recipient_uid`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 
```

我需要：

1）选择两个用户之间的所有消息，我这样做了：

```
SELECT * FROM `tMessages` FORCE INDEX (tUsers_uids) WHERE tUsers_sender_uid = 1 AND tUsers_recipient_uid=2 OR tUsers_sender_uid=2 AND tUsers_recipient_uid = 1 
```

——这是一种快速的方法吗？

2）在uid = 1和另一个用户之间的所有消息组中选择最后一条消息

——我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:14:19.943

```
SELECT m.*  
  FROM tMessages m
  WHERE (tUsers_sender_uid = 1 AND tUsers_recipient_uid=2 OR tUsers_sender_uid=2 AND tUsers_recipient_uid = 1)
    and tMessages_timestamp = (select max(tMessages_timestamp) 
                                 from tMessages 
                                 WHERE (tUsers_sender_uid = 1 AND tUsers_recipient_uid=2 OR tUsers_sender_uid=2 AND tUsers_recipient_uid = 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:37:32.547

试试这个

```
select top(1)* from tMessages WHERE (tUsers_sender_uid = 1
AND tUsers_recipient_uid=2) OR (tUsers_sender_uid=2 AND 
tUsers_recipient_uid = 1) order by tMessages_timestamp desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:49:55.277

这将返回任意 2 个用户之间的所有最后一条消息：

```
SELECT m.*  
  FROM tMessages m
    where tMessages_timestamp = (select max(tMessages_timestamp) 
                                   from tMessages 
                                   WHERE (tUsers_sender_uid = m.tUsers_sender_uid    AND tUsers_recipient_uid = m.tUsers_recipient_uid OR 
                                          tUsers_sender_uid = m.tUsers_recipient_uid AND tUsers_recipient_uid = m.tUsers_sender_uid)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:57:05.257

这将返回某个用户（即 1）和任何其他用户之间的所有最后一条消息：

```
SELECT m.*  
  FROM tMessages m
    where m.tMessages_timestamp = (select max(tMessages_timestamp) 
                                   from tMessages 
                                   WHERE (tUsers_sender_uid = 1                      AND tUsers_recipient_uid = m.tUsers_recipient_uid OR 
                                          tUsers_sender_uid = m.tUsers_recipient_uid AND tUsers_recipient_uid = 1))
      and (m.tUsers_sender_uid = 1 or m.tUsers_recipient_uid = 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:03:19.643

这是第一部分......需要括号吗？

```
SELECT * FROM `tMessages`
WHERE (tUsers_sender_uid = 1 AND tUsers_recipient_uid=2)
 OR (tUsers_sender_uid=2 AND tUsers_recipient_uid = 1) 
```

第二部分可能更具挑战性......但这应该让你走上正轨。

```
select coalesce(r.recipient, s.sender) OtherParty, 
    case when coalesce(r.`tMessages_id`,s.`tMessages_id`) > coalesce(s.`tMessages_id`,r.`tMessages_id`)
        then coalesce(r.`tMessages_id`,s.`tMessages_id`)
        else coalesce(s.`tMessages_id`,r.`tMessages_id`)
    end messageid
from
    (select `tUsers_recipient_uid` recipient, max(`tMessages_id`) `tMessages_id` 
    from `tMessages`
    where `tUsers_sender_uid` = 1
    group by `tUsers_recipient_uid`) r
full outer join (
    select `tUsers_sender_uid` sender, max(`tMessages_id`) `tMessages_id`
    from `tMessages`
    where `tUsers_recipient_uid`= 1
    group by `tUsers_sender_uid`) s
on r.recipient = s.sender 
```

# windows - WMI 脚本 API 中的“Wbem”和“SWbem”是什么意思？

> ID：11032494
> 
> 赞同：3
> 
> 时间：2012-06-14T11:52:33.963
> 
> 标签：windows, wmi, nomenclature

在 Windows Management Instrumentation (WMI) 脚本 API 中，[常量名称](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393257%28v=vs.85%29.aspx)以“Wbem”开头，[对象名称](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393259%28v=vs.85%29.aspx)以“SWbem”开头。这些缩写代表什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:09:33.797

[基于 Web 的企业管理](http://en.wikipedia.org/wiki/Web-Based_Enterprise_Management)，我相信 S 意味着脚本......

其他一些术语：

*   WMI=Windows 管理规范
*   CIM=公共信息模型
*   DMTF=分布式管理工作组

# arrays - 在 Flex 中，测试 flex 中包含某个值的数组

> ID：11032495
> 
> 赞同：2
> 
> 时间：2012-06-14T11:52:34.337
> 
> 标签：arrays, apache-flex

我有一个数组，其中包含许多值。我只是想要一个简单而好的方法来检查数组是否包含特定值。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T11:55:44.733

像这样使用[Array.indexOf()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#indexOf%28%29)：

```
if (myArray.indexOf(item) != -1) trace("item exists");
else trace("nope! can't find it") 
```

indexOf 如果项目存在则返回索引，否则返回-1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T11:56:05.973

```
if(myArray.indexOf("<searchObject>") < 0) //Code here (returns -1 if the value isn't found) 
{ 
    //the value isn't found
} else
{ 
    //the value is found
} 
```

# iphone - 如何从视频 url 在 iPhone 应用程序中播放 youtube 视频？

> ID：11032503
> 
> 赞同：0
> 
> 时间：2012-06-14T11:53:00.607
> 
> 标签：iphone

我正在做一个项目，我必须在我的 iPhone 应用程序中播放一些视频。有什么方法可以让我直接使用 youtube 视频 URL 播放视频吗？我必须使用很多视频，我不想将它们保存在我的本地 iphone 数据库中。我对这个领域很陌生。

在我的项目中，会有一份癌症疾病的清单。我的意思是血癌、膀胱癌、脑癌等。如果用户点击特定的癌症疾病，那么在下一个视图中应该有一个关于该癌症的视频。我想使用 url 直接播放该视频（或类似的东西）。它应该像 youtube 视频（流媒体视频）。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:59:51.707

这已经在 SO 上讨论过很多次了。或者，有一个开源项目允许这样做，我建议：

[https://github.com/larcus94/LBYouTubeView](https://github.com/larcus94/LBYouTubeView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:24:16.960

添加以下框架：a) AVFoundation b) MediaPlayer

并编写这些导入语句：

```
#import <AVFoundation/AVFoundation.h> 
#import <MediaPlayer/MediaPlayer.h> 
```

然后随时编写代码

```
NSURL *fileURL = [NSURL URLWithString:@"http://www.ebookfrenzy.com/ios_book/movie/movie.mov"];

MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

[moviePlayerController.view setFrame:CGRectMake(0, 70, 320, 270)];

[self.view addSubview:moviePlayerController.view];

moviePlayerController.fullscreen = YES;

[moviePlayerController play]; 
```

# mysql - MYSQL 双 WHERE 子句不适用于 = 和 AND

> ID：11032506
> 
> 赞同：1
> 
> 时间：2012-06-14T11:53:07.823
> 
> 标签：mysql

我有一个由 DataMapper（CodeIgniter 的 ORM）生成的查询，它在一台服务器上返回结果，但在另一台服务器上没有。

两个数据库完全相同。该查询适用于 MYSQL 版本 5.1.41、5.1.63 和 5.5.20 的服务器，但在 5.1.52 上失败。

查询是：

```
SELECT DISTINCT `clients`.`id`
FROM (`clients`)

LEFT OUTER JOIN `clients_locations`
    clients_locations ON `clients`.`id` = `clients_locations`.`client_id`

LEFT OUTER JOIN `locations`
    locations ON `locations`.`id` = `clients_locations`.`location_id`

LEFT OUTER JOIN `reports`
    location_reports ON `locations`.`id` = `location_reports`.`location_id`

WHERE
    `location_reports`.`id` =  1
AND 
    `clients`.`id` =  2 
```

我做了一些测试，我发现了以下几点：

> 如果您只有 1 个 WHERE 子句，它会返回结果。
> 如果将*任何*运算符更改为 LIKE、!= 等，它会返回结果
> 如果将 AND 更改为 OR，它会返回结果。

整个站点都使用了类似的查询，所以我不知道为什么这个查询失败了。例如：

```
SELECT DISTINCT `clients`.`id`
FROM (`clients`)

LEFT OUTER JOIN `clients_locations`
    clients_locations ON `clients`.`id` = `clients_locations`.`client_id`

LEFT OUTER JOIN `locations`
    locations ON `locations`.`id` = `clients_locations`.`location_id`

LEFT OUTER JOIN
    `locations_questionnaires` location_locations_questionnaires 
ON 
    `locations`.`id` = `location_locations_questionnaires`.`location_id`

WHERE
    `location_locations_questionnaires`.`questionnaire_id` =  3
AND 
     `clients`.`id` =  2 
```

在上面列出的所有服务器上返回正确的结果。

有没有人见过这个？

澄清：

**我无法编辑 SQL，因为它是由 ORM 生成的。**

**两个数据集完全相同。**

**问题是为什么查询在一台服务器上没有返回任何结果，而在另一台服务器上返回。**

**更新**：我刚刚将服务器升级到 5.1.61，查询运行良好。所以看起来这是 5.1.52 中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:59:06.487

外部连接表上的 WHERE 条件，例如

```
WHERE location_reports.id =  1 
```

有效地将外连接变成内连接。如果您将该条件移动到 JOIN 条件中，它会正常工作（正如您已经注意到的那样）。

原因是在 JOIN*之后*应用了 WHERE 条件，因为外部连接的行没有值，`location_reports.id`因为它们的条件为 false 并且它们从结果中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:09:41.570

尝试这样做：

```
SELECT DISTINCT `clients`.`id`
FROM (`clients`)

LEFT OUTER JOIN `clients_locations`
    clients_locations ON `clients`.`id` = `clients_locations`.`client_id`
    AND `clients`.`id` =  2

LEFT OUTER JOIN `locations`
    locations ON `locations`.`id` = `clients_locations`.`location_id`

LEFT OUTER JOIN `reports`
    location_reports ON `locations`.`id` = `location_reports`.`location_id`
    AND `location_reports`.`id` =  1 
```

# windows - C# VS2010 Win7 64 位 iSeries Access ODBC 驱动程序通信链路故障

> ID：11032510
> 
> 赞同：1
> 
> 时间：2012-06-14T11:53:12.450
> 
> 标签：windows, visual-studio-2010, windows-7, odbc, ibm-midrange

我在将 ac# 应用程序从 WinXP 升级到 Win7 64 位时遇到问题。该应用程序从我们的 iSeries 查询数据。我已经设置了一个 64 位 ODBC DSN，如果我从 MS Access 中尝试，它就可以工作。但是，当我尝试在 C# 代码中建立连接时，出现以下错误：

> 错误 [08S01] [IBM][iSeries Access ODBC 驱动程序]通信链路故障。comm rc=10022 - CWBCO1003 - 套接字错误，函数返回 10022

我的连接代码如下：

```
cn = new OdbcConnection("dsn=as400data;UID=user;PWD=password;");
cmd = new OdbcCommand(sql, cn);
cn.Open(); 
```

有人对可能引发此错误的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:55:53.460

我会把它放在这里，以防有一天其他人遇到这个问题。

解决这个问题的方法是将开发中的代码直接放在开发机器的 C:\ 驱动器上。通常，我将代码保存在网络驱动器上，以便对其进行备份。但是，在 Win7 中这样做存在某种问题。

# android - 是否可以在 Android 平板电脑上模拟 Android 手机？

> ID：11032522
> 
> 赞同：2
> 
> 时间：2012-06-14T11:53:50.437
> 
> 标签：android

我有一个带 mdpi 屏幕（xlarge）的平板电脑。是否可以在其上模拟其他一些屏幕配置？我有中型屏幕的布局，我想看看它们在不使用模拟器的情况下会是什么样子（这给我的电脑带来了很多痛苦）。

例如，我在 iPad 上看到过类似的东西（当它运行 iPhone 应用程序时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:46:59.797

可以试试这个链接[http://developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)

在清单文件中添加

屏幕兼容模式有两个版本，行为略有不同：

版本 1 (Android 1.6 - 3.1)

版本 2（Android 3.2 及更高版本）

***禁用屏幕兼容模式***

如果您主要为低于 3.0 的 Android 版本开发应用程序，但您的应用程序确实为平板电脑等较大的屏幕正确调整大小，您应该禁用屏幕兼容模式以保持最佳用户体验。否则，用户可能会启用屏幕兼容模式并以不太理想的格式体验您的应用程序。

默认情况下，当满足以下条件之一时，会向用户提供适用于运行 Android 3.2 及更高版本的设备的屏幕兼容模式作为可选功能：

您的应用程序已将 android:minSdkVersion 和 android:targetSdkVersion 设置为“10”或更低，并且未明确声明使用该元素支持大屏幕。您的应用程序已将 android:minSdkVersion 或 android:targetSdkVersion 设置为“11”或更高，并使用该元素明确声明它不支持大屏幕。

![在此处输入图像描述](../Images/d632d0df8b825596171dafab60214695.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:02:34.130

尝试删除

```
<uses-sdk android:minSdkVersion="10"> 
```

从您的 AndroidManifest 文件中。

这样，如果您的项目使用像 GingerBread 一样，那么它将以 480x800 显示

# vb.net - VB.NET 如何使用 SendMessage 发送密钥 46 (Chr(46))

> ID：11032523
> 
> 赞同：2
> 
> 时间：2012-06-14T11:53:55.780
> 
> 标签：vb.net, winapi

我正在使用 VB.net 自动化 IBM iSeries Emulators，创建的 GUI 使用“SetParent”API 将外部 iSeries Emulator 窗口嵌入到 WindowsForm 面板中。为了与 iSeries 窗口通信，我使用 SendMessage API 将密钥发送到屏幕。我知道 .net 中的 sendkeys.keys，但这样我就不必 SetForegroundWindow 并重新激活我的表单。

我的程序读取秤的输出并验证接收到的数据是否良好，如果是，它将使用以下代码将输出发送到 iSeries 屏幕（UserApi 是我的 Lib）：

```
For Each element As Char In CStr(txtto400.Text)
    UserApi.SendMessage(as400WindowHandle, 256, CType(Convert.ToInt32(element), IntPtr), CType(0, IntPtr))
Next 
```

我在其他项目上这样做了几次，这种方法效果很好，但在我的 TextBox (txtto400.Text) 中，我的体重有一个像“000.88 KG”这样的值。SendMessage 不会发送作为句点 (.) 的密钥“46”，而是“00088 KG”

有谁知道为什么这不起作用？有什么建议我能做什么？

## 编辑：

## 感谢 Paul B. 给了我提示。

这是我解决它的方法。

我的 SendMessage 函数如下所示：

```
<DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
Public Shared Function SendMessage( _
   ByVal hwnd As IntPtr, _
   ByVal wMsg As UInt32, _
   ByVal wParam As IntPtr, _
   ByVal lParam As IntPtr) As IntPtr
End Function 
```

我创建了一个包含 VK_OEM_PERIOD 的变量：

```
Public Const VK_OEM_PERIOD = &HBE 
```

创建了一个检查 Chr 的函数：

```
Public Function vk_key(key As Char) As Integer
 Select Case key
     Case Is = Chr(46)
         Return VK_OEM_PERIOD
     Case Else
        Return AscW(key)
 End Select
End Function 
```

这是我将它传递给 iSeries 窗口的方式：

```
For Each element As Char In txtto400.Text
   UserApi.SendMessage(as400WindowHandle, 256, vk_key(element), 0)
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:40:54.887

该`WM_KEYDOWN`消息需要“非系统密钥的虚拟密钥代码”作为 wParam（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280%28v=vs.85%29.aspx)）。

这恰好对应于字母数字符号的键字符的 ASCII 值，但不对应于所有其他键。在一段时间内，我认为您需要发送`VK_OEM_PERIOD`.

您可以在此处找到虚拟键代码表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

# iphone - 如何在 Avfoundation 中获取带有音频设置的音频数据

> ID：11032526
> 
> 赞同：0
> 
> 时间：2012-06-14T11:54:19.907
> 
> 标签：iphone, objective-c, xcode, avfoundation, avaudiosession

我添加了带有`AVCaptureSession`. 我需要通过 delegateMethod 的音频。每次我得到它时，这种方法都会在服务器上写入音频。但是 AUDIO FORMAT 是不对的。PCM 中需要服务器。那么如何获取 PCM 格式的音频数据呢？这是在服务器上写入数据的方法：

```
(void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{

    AudioBufferList audioBufferList;
    NSMutableData *data=[[NSMutableData alloc] init];
    CMBlockBufferRef blockBuffer;
    CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);

    for( int y=0; y<audioBufferList.mNumberBuffers; y++ )
    {
        AudioBuffer audioBuffer = audioBufferList.mBuffers[y];
        Byte *frame = (Byte*)audioBuffer.mData;
        [data appendBytes:frame length:audioBuffer.mDataByteSize];
    }

    CFRelease(blockBuffer);
    blockBuffer=NULL;

    [outputStream write:[data bytes]maxLength:[data length]];    
} 
```

是否有任何理由在此阶段代码中添加音频设置，以便我可以根据我的要求获取数据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T10:59:53.257

[我建议你查看这个关于AVCaptureAudioDataOutput](https://developer.apple.com/documentation/avfoundation/avcaptureaudiodataoutput)的苹果开发者文档，这里是关于使用[AVReaderWriter](https://developer.apple.com/library/archive/samplecode/ReaderWriter/)读写的示例代码。

# wpf - 禁用 DataGrid 中列的编辑，但不适用于新行

> ID：11032528
> 
> 赞同：1
> 
> 时间：2012-06-14T11:54:32.840
> 
> 标签：wpf, xaml, wpfdatagrid

感觉这里必须有一个明显的答案，但我找不到。

我正在使用 DataGrid 并希望禁用其中一个列以对已存在的所有行进行编辑。但是，当我添加新行时，我不希望为该行禁用该列（DataGrid 末尾的行）。IsReadOnly 禁用整个列，包括最后一行。

任何帮助表示赞赏。

编辑：使用样式、属性 IsEnabled 和转换器找到了解决方案。（使用没有在数据网格中设置的 ID 列，因此不 > 0）。如果有人知道一种只为以更好方式添加的行设置属性的好方法，那么答案仍然会受到赞赏。（我好奇。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:01:26.190

创建新行时，您必须创建一个动作侦听器。触发动作侦听器以执行动作。在动作中你只是告诉他使新行启用。如果你想要一部分代码，我会给你:)

# asp.net - 读取已在 ASP.NET httpmodule 中设置的经典 ASP 中的服务器变量

> ID：11032529
> 
> 赞同：1
> 
> 时间：2012-06-14T11:54:39.610
> 
> 标签：asp.net, asp-classic

编辑：

问题的简单版本：我想在 .NET httpmodule 中创建服务器变量并在我的经典 ASP 代码中读取它们。

这可能吗？还是错误的方法？

结束编辑：

所以我接手了一个经典的asp应用程序，作者写了一个ISASPI Filter dll，他用它来为他的经典asp应用程序设置服务器变量。我在 IIS 论坛上读到自定义 ISAPI 过滤器是个坏主意，如果我要继续使用它，我应该使用 http 模块。

所以我把这个方法从互联网上拉下来，让我在我的 httpmodule 中设置服务器变量，这似乎适用于将项目添加到服务器变量集合中......但是我无法从我的经典 asp 代码中读取它。

我有错误的方法吗？

```
 BindingFlags temp = BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static; 

        var context = app.Context;

        MethodInfo addStatic = null;
        MethodInfo makeReadOnly = null;
        MethodInfo makeReadWrite = null;

        Type type = app.Request.ServerVariables.GetType();
        MethodInfo[] methods = type.GetMethods(temp);

        foreach(var method in methods)
            {
                switch( method.Name)
                {
                    case "MakeReadWrite":
                        makeReadWrite = method;
                        break;
                    case "MakeReadOnly":
                        makeReadOnly = method;
                        break;
                    case "AddStatic":
                        addStatic = method;
                        break;
                }
            }

        makeReadWrite.Invoke(context.Request.ServerVariables, null);
        string[] values = { "DaveVar", "hehehe" };
        addStatic.Invoke(context.Request.ServerVariables, values);
        makeReadOnly.Invoke(context.Request.ServerVariables, null); 
```

这似乎正确设置了它们；但是，当我尝试从我的经典 asp 页面中读取它们时，它们并没有出现......

经典ASP：

```
<html>
<%
  for each x in Request.ServerVariables
        response.write("<h2>"& x & "</h2>")
  next
%>
<h2>hello!</h2>
</html> 
```

它们确实出现的 ASP.NET ASPX 页面：

```
<%@ Page Language="C#"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
<% 
    foreach (var x in Request.ServerVariables)
   {
     %>
     <div>
     <%= x.ToString() %>
     </div>
     <%
   }
        %>    
    </div>
    </form>
</body>
</html> 
```

完整的http模块：

```
namespace PlatoModules 
{
    public class PlatoModule : IHttpModule
    {

        public void Init(HttpApplication context)
        {
            context.BeginRequest += (s, e) => BeginRequest(s, e);
            context.EndRequest += (s, e) => EndRequest(s, e); 
        }

        public String ModuleName
        {
            get { return "test"; }
        }

        public void Dispose()
        {
        }

        private void BeginRequest(Object source,
         EventArgs e)
        {
               HttpApplication application = (HttpApplication)source;
                HttpContext context = application.Context;
            try
            {
                System.Diagnostics.Debugger.Launch();
                // Create HttpApplication and HttpContext objects to access
                // request and response properties.
                string filePath = context.Request.FilePath;
                string fileExtension =
                    VirtualPathUtility.GetExtension(filePath);
                /*      if (fileExtension.Equals(".aspx"))
                      {
                          context.Response.Write("<h1><font color=red>" +
                              "HelloWorldModule: Beginning of Request" +
                              "</font></h1><hr>");
                      }*/

                BlackMagicSetServerVariables(application);
                if (fileExtension.Equals(".asp"))
                {
                    string content = @"<h1><font color=red>" +
                        "BeginReq" +
                        @"</font></h1><br>";
                    context.Response.Write(content);
                    context.Response.Flush();
                }
            }
            catch (Exception ex)
            {
                context.Response.Write(@"<h1><font color=red>" +
                        "error" + ex.Message +
                        @"</font></h1><br>");
            }
        }

        private void EndRequest(Object source, EventArgs e)
        {

            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;
            context.Response.Write(@"<br><h1><font color=red>" +
                  @"Enter endreq </font></h1>");
            string filePath = context.Request.FilePath;
            string fileExtension =
                VirtualPathUtility.GetExtension(filePath);
            if (fileExtension.Equals(".asp"))
            {
                context.Response.Write(@"<br><h1><font color=red>" +
                    @"EndReq </font></h1>");
            }
            context.Response.Flush();
        }

        void BlackMagicSetServerVariables(HttpApplication app)
        {
            BindingFlags temp = BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static; 

            var context = app.Context;

            MethodInfo addStatic = null;
            MethodInfo makeReadOnly = null;
            MethodInfo makeReadWrite = null;

            Type type = app.Request.ServerVariables.GetType();
            MethodInfo[] methods = type.GetMethods(temp);

            foreach(var method in methods)
                {
                    switch( method.Name)
                    {
                        case "MakeReadWrite":
                            makeReadWrite = method;
                            break;
                        case "MakeReadOnly":
                            makeReadOnly = method;
                            break;
                        case "AddStatic":
                            addStatic = method;
                            break;
                    }
                }

            makeReadWrite.Invoke(context.Request.ServerVariables, null);
            string[] values = { "DaveVar", "hehehe" };
            addStatic.Invoke(context.Request.ServerVariables, values);
            makeReadOnly.Invoke(context.Request.ServerVariables, null);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:26:14.877

```
<%
for each x in Request.ServerVariables
  response.write(x & "<br />")
next
%> 
```

您在 Classic ASP 中列出所有服务器变量的代码示例已损坏。它只为您提供所有可用变量的列表，而不是它们的值。

试试这个：

```
<%
for each x in Request.ServerVariables
  response.write(x & " = " & Request.ServerVariables(x) & "<br />")
next
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:02:09.873

解决方案 ...

暂定——

我无法修改服务器变量并让它们被请求中的经典 asp 代码“拾取”；但是我可以将此代码添加到标题中，因此我将使用标题。如果这是一种糟糕的做事方式，请在评论中告诉我！谢谢你帮助我弗兰克！

所以这里是代码：

经典ASP：

```
<%

for each x in Request.ServerVariables
  Response.Write("<h2>"& x  & ":" & Request.ServerVariables(x) & "</h2>") 
next

 Response.Write("<h2> DAVE: " & Request.ServerVariables("HTTP_DAVE") & "</h2>")
 Response.Flush()
%>
<h2>hello!</h2>
</html> 
```

HTTP模块：

```
namespace PlatoModules
{
    public class PlatoModule : IHttpModule
    {

        public void Init(HttpApplication context)
        {
            context.BeginRequest += (s, e) => BeginRequest(s, e);
            context.EndRequest += (s, e) => EndRequest(s, e);
        }

        public String ModuleName
        {
            get { return "test"; }
        }

        public void Dispose()
        {
        }

        // Your BeginRequest event handler.
        private void BeginRequest(Object source, EventArgs e)
        {
            Debugger.Launch();
            HttpApplication application = (HttpApplication)source;

            HttpContext context = application.Context;
            try
            {

                context.Response.Write(
                    "<h1><font color=red>HelloWorldModule: Beginning of Request</font></h1><hr>");

                context.Request.Headers.Add("DAVE", "DAVOLIO");
                context.Response.Flush();
            }
            catch (Exception ex)
            {
                context.Response.Write(
                    ex.Message);
            }
        }

        private void EndRequest(object source, EventArgs e)
        {
            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;
            var content = @"<hr><h1><font color=red>HelloWorldModule: End of Request</font></h1>";
            context.Response.Write(content);
            context.Response.Flush();
        }

    }

} 
```

相关的 web.config

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"> 
        <add name="PlatoModule" type="PlatoModules.PlatoModule" /> 
        </modules>
...
    </system.webserver> 
```

# jquery - jQuery datePicker 不尊重日期格式

> ID：11032538
> 
> 赞同：1
> 
> 时间：2012-06-14T11:55:10.857
> 
> 标签：jquery, asp.net-mvc, jquery-ui-datepicker

我已经使用以下 js 在表单中设置了一个日期选择器：

```
$("#Expiry").datepicker({
   regional: 'en-GB',
   dateFormat: 'dd/mm/yy',
   firstDay: 1
}); 
```

并在我看来有以下内容（asp.net MVC）

```
<%: Html.TextBoxFor(m => m.Expiry) %> 
```

在我的模型中，Expiry 是可空的`DateTime?`

当我使用日期选择器选择日期时，它会以正确的格式进行选择

当我从数据库加载数据时，它总是在时间部分的末尾显示 00:00:00

我怎样才能让它不这样做？

如果我尝试在绑定中使用格式化表达式，那么它将无法编译。

当然，jQuery 应该尊重我为预加载到表单字段中的值指定的格式？

它确实将日期选择器应用于该字段，因此我可以使用日历进行选择。它只是不将格式应用于加载的值

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:58:41.247

> 我怎样才能让它不这样做？

您可以使用允许您指定格式的属性来装饰`DateTime`视图模型上的相应属性：[`[DisplayFormat]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.aspx)

```
public class MyViewModel
{
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime? Expiry { get; set; }

    ... other properties
} 
```

并在视图内`TextBoxFor`用`EditorFor`调用替换：

```
<%: Html.EditorFor(m => m.Expiry) %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:02:01.057

创建`~/Views/Shared/EditorTemplates/DateTime.cshtml`具有以下内容的编辑器模板：

```
@model DateTime?
@{
string finalDate = string.Empty;

if (Model != null)
{
    DateTime date = (DateTime)Model;
    finalDate = String.Format("{0:d}", date.Date.ToShortDateString());
}

@Html.TextBox(string.Empty, finalDate, new { @class = "datepicker" }) 
```

在您的视图中写入（对不起，这是剃刀语法，我不知道 aspx 语法）

```
@Html.EditorFor(model => model.Expiry) 
```

因此，将来您不必担心应用程序中的日期格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T20:54:32.110

如果您的应用程序将只有一种文化，您可以在 web.config 文件中设置文化，如下所示：

```
<globalization culture="en-US" /> 
```

或西班牙：

```
<globalization culture="es-ES" /> 
```

这样，绑定将考虑指定格式来转换表单输入值。

# php - DRY MVC 视图/控制器分离

> ID：11032540
> 
> 赞同：0
> 
> 时间：2012-06-14T11:55:20.473
> 
> 标签：php, model-view-controller, frameworks, dry

我有一个自定义 MVC PHP 框架，它有一个路由器类，它调用一个控制器，它使用一个模型，然后控制器呈现视图等。

我的问题是我无法从技术上弄清楚如何在语义上允许变量在控制器和视图之间传递。我可以做一个快速而肮脏的修复，但我想要的是一个控制器：

```
class IndexController extends Controller{
    var $name = "John"; // instance variable
} 
```

看看这个：

```
<p> <?=$name?> </p> 
```

我的问题是这样的：

1.  如何创建一个 Controller->render() 函数或类似的函数，允许视图从控制器访问实例变量？和，
2.  我怎么能做到这一点而不做笨拙的事情，`$data['view']['name'] = "John";`或者默认情况下必须为我制作的任何新控制器编写十行代码。我想这样做，所以它尽可能干燥。

谢谢。

### 编辑：FabioCosta 的解决方案

我不确定我是否理解，到目前为止，我的基本控制器是这样的：

```
<?php
    class Controller{
        public function __get($key){
            if(isset($this->$$key)) return $this->$$key;
        }
    }
?> 
```

我的基本视图类如下所示：

```
<?php
    class View{
         public $controller;
         public function render(){
         $this->controller = $this;
    }
?> 
```

我像这样从路由器初始化：

```
<?php
    $controller = new IndexController();
    $view = new IndexView();
    $view->render();
?> 
```

但是，这不起作用，我知道我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:10:29.383

为什么不传递实例化视图的控制器并使用 __get 魔术方法？

像这样：

```
 public function __get($key){

      if(isset($this->$key)) return $this->$key;
  } 
```

这是一个工作示例 View.php：

```
class View{
   protected $_controller;
   public function __construct(Controller $controller){
        $this->_controller=$controller;
   }
   public function render(){
        echo '<h1>Hello '.$this->_controller->name.'</h1>';
   }
} 
```

控制器.php

```
class Controller{
    protected $name='fabio';
    protected $_myView;

    public function __get($key){

        if(isset($this->$key)) return $this->$key;
   }
    public function __construct(){
        $this->_myView=new View($this);
    }

    public function indexAction(){
        $this->_myView->render();
    }
} 
```

和路由器：

```
$c=new Controller();
$c->indexAction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:33:32.960

1.  控制器不应该负责渲染输出。这是`view`实例应该做的事情。渲染应该发生在控制器之外。

2.  [视图应该从模型层](https://stackoverflow.com/a/5864000/727208)请求数据。然后，根据它收到的信息，选择正确的[模板](http://codeangel.org/articles/simple-php-template-engine.html)，分配数据并渲染此模板（或在某些情况下 - 模板组）。

此外，路由器不应初始化控制器或视图。控制器应该只负责处理请求。

# django - django嵌套外键集查询

> ID：11032549
> 
> 赞同：0
> 
> 时间：2012-06-14T11:55:53.353
> 
> 标签：django

我想过滤一个项目的_set，但是在下面的问题中，当我这样做时，它不在我认为的字段上。我需要使用 rating__rating 来获取 post 表中 rating 表的 rating 列。

在 django 中，我有这个：

```
class Story(models.Model):
    user = models.ForeignKey(User)
    ...

class Post(models.Model):
    post = models.TextField(max_length=345)
    story = models.ForeignKey(Story)
    ...

class Rating(models.Model)
    rating = models.IntegerField()
    post = models.ForeignKey(Post) 
```

然后我可以找到给定帖子的所有具有设定值的评级：

```
def getPostsForStory(id):
    return arrangeCountOfRatings(Post.objects.filter(story=id))

def arrangeCountOfRatings(postList):
    for post in postList:
        post.rateA = post.rating_set.filter(rating=rateA).count()
    return postList 
```

但是我如何从给定的故事中做到这一点？也就是说，假设我想应用上述获取每个帖子的计数的过程，但是给定一个 Story 对象？

```
def getStoryItemsForUser(request):
    return arrangeCountOfItems(Story.objects.filter(user=request.user.id)

def arrangeCountOfItems(storyList):
    for story in storyList:
        story.rateA = story.post_set.filter(rating=rateA).count()
    return storyList 
```

没有得到我想要的（计数都是错误的 - 要么为零，如果有带有评级的帖子，1

编辑：

啊。因此问题是：

```
story.rateA = story.post_set.filter(rating=rateA).count() 
```

不搜索我想要的 - 它有效地搜索 rating__id 而不是 rating__rating

所以我只是将其更改为读取 rating__rating，简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:09:27.323

关于什么：

```
 story.rateA = Rating.objects.filter(rating=ratingA, post__story=story).count() 
```

编辑：这同样适用于帖子评级（相当于您的代码）：

```
 post.rateA = Rating.objects.filter(rating=ratingA, post=post).count() 
```

计算指定帖子/故事的评分。

# android - Android查询phonenumber获取rawcontactID

> ID：11032550
> 
> 赞同：4
> 
> 时间：2012-06-14T11:56:03.573
> 
> 标签：android, contacts, phone-number

我想查询电话号码以获取 rawcontactID。

我唯一知道的联系人是给定的电话号码，但对于我的功能，我需要有 rawcontactID。我得到了一个工作代码，但现在我确实使用了 2 个单独的查询。我想要的是 1 个查询，可以同时执行这两项操作以节省一些查询时间。

我的代码：

```
 Uri uri = Uri.withAppendedPath(Phone.CONTENT_FILTER_URI, Uri.encode(phoneNumber));       
    String[] columns = new String[]{Phone.CONTACT_ID, Phone.DISPLAY_NAME, Phone.NUMBER, Phone._ID };     
    Cursor cursor = contentResolver.query(uri, columns, null, null, null); 

if(cursor!=null) { 
    int clenght = cursor.getCount();
    while(cursor.moveToNext()){ 
     //contactName = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME)); 
     id = cursor.getString(cursor.getColumnIndex(Phone.CONTACT_ID)); 

    } 
    cursor.close(); 
}

Cursor pCur = contentResolver.query(ContactsContract.Data.CONTENT_URI, new String[]{ContactsContract.Data.RAW_CONTACT_ID}, ContactsContract.Data.CONTACT_ID+" = "+ id, null, null); 
if(pCur!=null) { 
    int clenght = pCur.getCount();
    while(pCur.moveToNext()){ 
     //contactName = cursor.getString(cursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME)); 
     id = pCur.getString(pCur.getColumnIndex(ContactsContract.Data.RAW_CONTACT_ID)); 

    } 
    pCur.close(); 
} 
```

提前致谢

编辑：

我上面的代码工作正常，但我仍在为大量联系人寻找提高速度。因此，如果有人提供解决方案来组合我的查询，我将给予奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T04:13:30.577

```
private String[] getRawContactIdFromNumber(String givenNumber){
        List<String> rawIds = new ArrayList<String>();
        Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[]{ContactsContract.CommonDataKinds.Phone.RAW_CONTACT_ID},ContactsContract.CommonDataKinds.Phone.NUMBER + "='"+ givenNumber +"'",null, ContactsContract.CommonDataKinds.Phone.NUMBER);

        while (phones.moveToNext())
        {
          rawIds.add( phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.RAW_CONTACT_ID)));
          Log.v("contacts","Given Number: " + givenNumber + "Raw ID: " +rawIds.get(rawIds.size() - 1));
        }
        phones.close();
        String[] ret = new String[0];

        return rawIds.toArray(ret);
    } 
```

编辑为仅在光标中包含原始 id 以提高效率。如果多个联系人具有相同的号码，还将返回类型更改为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:37:31.230

请试试

```
String phonenumber = "input your phone number";
        Cursor pCur = getContentResolver().query(
                ContactsContract.Data.CONTENT_URI,
                new String[] { ContactsContract.Data.RAW_CONTACT_ID,
                        Phone.CONTACT_ID }, Phone.NUMBER + " = " + phonenumber,
                null, null);

if (pCur != null) {
                while (pCur.moveToNext()) {
                    String contactID = pCur.getString(pCur
                            .getColumnIndex(Phone.CONTACT_ID));
                    String Rowid = pCur.getString(pCur
                            .getColumnIndex(ContactsContract.Data.RAW_CONTACT_ID));
                    Log.e("RAW_CONTACT_ID", Rowid);
                    Log.e("CONTACT_ID", contactID);
                }
                pCur.close();
            } 
```

现在您可以在单个查询中获得 Both `CONTACT_ID`& 。`RAW_CONTACT_ID`

# c# - 以灰度显示表单

> ID：11032552
> 
> 赞同：4
> 
> 时间：2012-06-14T11:56:09.607
> 
> 标签：c#, winforms

是否可以以灰度绘制任何表单（不覆盖 Paint 方法）。

如果我在 Modal() 对话框中显示表单，我不会将其父级显示为灰度。我在 Visual Studio 扩展管理器中注意到了这一点。如果进度条正在下载包，则底层窗口将显示为灰色。

我在想这个：

```
private void Button1_Click(object sender, EventArgs e)
{
    using (var dialog = new Form2())
    {
        SetGrayscale(this, true);
        dialog.ShowDialog();
        SetGrayscale(this, false);
    }
} 
```

**更新**

只是设置`Form.Enabled = false;`不是我想要的。这看起来不如我的表单的灰度表示。我认为`compiz`Linux 的窗口装饰器使用无响应的应用程序做到了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:52:45.197

正如已经说过的那样，这样做的方法是在现有表单的顶部覆盖另一个控件/表单，并让它在顶部呈现这个的灰度版本，您可以使用恰好放置在原始表单上的附加表单来执行此操作, 或使用类似[`Panel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)定位在所有其他控件之上的东西。

这是一个工作示例，说明在将另一个表单完全放在第一个表单的客户区域上时如何执行此操作。如何使用它

```
using (Grayscale(this))
{
    MessageBox.Show("Test");
} 
```

执行

```
public static Form Grayscale(Form tocover)
{
    var frm = new Form
        {
            FormBorderStyle = FormBorderStyle.None,
            ControlBox = false,
            ShowInTaskbar = false,
            StartPosition = FormStartPosition.Manual,
            AutoScaleMode = AutoScaleMode.None,
            Location = tocover.PointToScreen(tocover.ClientRectangle.Location),
            Size = tocover.ClientSize
        };
    frm.Paint += (sender, args) =>
        {
            var bmp = GetFormImageWithoutBorders(tocover);
            bmp = ConvertToGrayscale(bmp);
            args.Graphics.DrawImage(bmp, args.ClipRectangle.Location);
        };

    frm.Show(tocover);
    return frm;
}

private static Bitmap ConvertToGrayscale(Bitmap source)
{
    var bm = new Bitmap(source.Width, source.Height);
    for (int y = 0; y < bm.Height; y++)
    {
        for (int x = 0; x < bm.Width; x++)
        {
            Color c = source.GetPixel(x, y);
            var luma = (int)(c.R * 0.3 + c.G * 0.59 + c.B * 0.11);
            bm.SetPixel(x, y, Color.FromArgb(luma, luma, luma));
        }
    }
    return bm;
}

private static Bitmap GetControlImage(Control ctl)
{
    var bm = new Bitmap(ctl.Width, ctl.Height);
    ctl.DrawToBitmap(bm, new Rectangle(0, 0, ctl.Width, ctl.Height));
    return bm;
}

private static Bitmap GetFormImageWithoutBorders(Form frm)
{
    // Get the form's whole image.
    using (Bitmap wholeForm = GetControlImage(frm))
    {
        // See how far the form's upper left corner is
        // from the upper left corner of its client area.
        Point origin = frm.PointToScreen(new Point(0, 0));
        int dx = origin.X - frm.Left;
        int dy = origin.Y - frm.Top;

        // Copy the client area into a new Bitmap.
        int wid = frm.ClientSize.Width;
        int hgt = frm.ClientSize.Height;
        var bm = new Bitmap(wid, hgt);
        using (Graphics gr = Graphics.FromImage(bm))
        {
            gr.DrawImage(wholeForm, 0, 0,
                new Rectangle(dx, dy, wid, hgt),
                GraphicsUnit.Pixel);
        }
        return bm;
    }
} 
```

注意：

*   的实现`Paint`相当糟糕——实际上它应该使用双缓冲，以便将灰度图像预渲染到缓冲的图形上下文中，因此 Paint 方法只需要绘制预绘制的缓冲区内容。请参阅[C# 中的自定义绘图控件 - 手动双缓冲](http://inchoatethoughts.com/custom-drawing-controls-in-c-manual-double-buffering)
*   `ConvertToGrayscale`有点慢，但可能会加快
*   如果有人出于任何原因设法移动原始表格，事情就会出错
*   图像是静态的，如果基础控件被重绘，那么理想情况下顶部表单也应该重绘。我不确定如何最好地检测另一个表单的一部分何时失效。

如果我有时间我会尝试解决其中的一些问题，但以上至少给了你一个大致的想法。

请注意，在 WPF 中，这会容易得多。

资料来源：

*   [如何将彩色图像转换为灰度图像](https://web.archive.org/web/20141230145627/http://bobpowell.net/grayscale.aspx)
*   [在 C# 中获取控件或窗体或窗体的客户区的图像](http://blog.csharphelper.com/2010/05/16/get-the-image-of-a-control-or-form-or-a-forms-client-area-in-c.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:18:45.580

我不认为有办法直接做到这一点——我认为所有的表格都是用 sRGB 渲染的。一个 hacky 的方法可能是用它的副本作为图像覆盖表单（这很容易使用[Control.DrawToBitMap](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.drawtobitmap)），然后通过一个简单的 GDI 矩阵将其传递给[https://web.archive.org/web /20141230145627/http://bobpowell.net/grayscale.aspx](https://web.archive.org/web/20141230145627/http://bobpowell.net/grayscale.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:02:24.157

尝试这样的方法，它适用于大多数简单的控件（您需要递归到容器中才能正确切换所有控件）。

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (var dialog = new Form())
        {
            Dictionary<Control, Tuple<Color, Color>> oldcolors = new Dictionary<Control, Tuple<Color, Color>>();
            foreach (Control ctl in this.Controls)
            {
                oldcolors.Add(ctl, Tuple.Create(ctl.BackColor, ctl.ForeColor));
                // get rough avg intensity of color
                int bg = (ctl.BackColor.R + ctl.BackColor.G + ctl.BackColor.B) / 3;
                int fg = (ctl.ForeColor.R + ctl.ForeColor.G + ctl.ForeColor.B) / 3;
                ctl.BackColor = Color.FromArgb(bg, bg, bg);
                ctl.ForeColor = Color.FromArgb(fg, fg, fg);
            }

            dialog.ShowDialog();

            foreach (Control ctl in this.Controls)
            {
                ctl.BackColor = oldcolors[ctl].Item1;
                ctl.ForeColor = oldcolors[ctl].Item2;
            }
        }
    } 
```

# javascript - 单击图像时出现 Javascript 书签

> ID：11032557
> 
> 赞同：0
> 
> 时间：2012-06-14T11:56:26.143
> 
> 标签：javascript

我想创建一个书签，单击该书签时会运行一段 javascript 并在页面上添加图像

任何人都可以指出如何去做这件事的方向吗？

* * *

我想写一个我可以收藏的脚本，这样当点击它时，这个图像“http://www.dannemann.com/images/lensflarePhilosophy.png”就会出现在页面上

试过这个没有运气

```
javascript:var img=document.createElement('img');img.src='http://www.dannemann.com/images/lensflarePhilosophy.png';body.appendChild(img); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:02:45.723

你可以这样做：

```
var img = document.createElement('img');
img.src = 'your path';
document.body.appendChild(img); 
```

对于书签，请确保放在`javascript:`上面的代码之前并使用 JS minifier/compresser 对其进行压缩。

压缩后，你需要把它放在`javascript:`它之前并保存在书签/书签工具栏中，这里表示：

```
javascript:var img=document.createElement("img");img.src="your path";document.body.appendChild(img) 
```

# java - 使用带有 Java/Jersey/REST 的 Microsoft 翻译器

> ID：11032560
> 
> 赞同：2
> 
> 时间：2012-06-14T11:56:42.067
> 
> 标签：java, rest, jersey, language-translation, microsoft-translator

我正在将 Microsoft Translator 用于需要 Jersey 发出 HTTP 发布请求的 Java 项目。我当前的代码导致 HTTP 400 错误 - 错误请求。我对 HTTP 很陌生——有人能指出我正确的方向吗？

Microsoft 访问令牌说明：http: [//msdn.microsoft.com/en-us/library/hh454950](http://msdn.microsoft.com/en-us/library/hh454950)

```
 package com.mkyong.client;

    import com.sun.jersey.api.client.Client;
    import java.net.*;

    import javax.ws.rs.core.EntityTag;
    import javax.ws.rs.core.MediaType;

    import com.sun.jersey.api.client.ClientResponse;
    import com.sun.jersey.api.client.WebResource;

    public class JerseyClientPost {

public static void main(String[] args) {

    try {

        Client client = Client.create();

        WebResource webResource = client
                   .resource("https://datamarket.accesscontrol.windows.net/v2/OAuth2-13");
        //Paramaters for Access Token
        //String inpu2t = "{\"Tyler_Kevin\",\"VcwDLMGuFMLnUgql...\",\"http://api.microsofttranslator.com\",\"client_credentials\"}";

        String input = "{\"client_id\":\"Tyler_Kevin\",\"client_secret\":\"VcwDLMGuFMLnUgqldjrfj....",\"scope\":\"http://api.microsofttranslator.com\",\"grant_type\":\"client_credentials\"}";

        //Send HTTP POST request to Microsoft Server
        ClientResponse response = webResource.type("application/json")
                .post(ClientResponse.class, input);

        //If request is not successful, throw error 
        if (response.getStatus() != 201) {
            throw new RuntimeException("Failed =/ : HTTP error code : "
                    + response.getStatus());
        }

        //Display server response
        System.out.println("Output from Server .... \n");
        String output = response.getEntity(String.class);
        System.out.println(output);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:37:53.677

将数据发送到令牌服务时，您需要使用 application/x-www-form-urlencoded。所以我会尝试以下方法：

```
com.sun.jersey.api.representation.Form input = new Form();
input.add("client_id", "Tyler_Kevin");
input.add("client_secret", "VcwDLMGuFMLnUgqldj.....");
input.add("scope", "http://api.microsofttranslator.com");
input.add("grant_type", "client_credentials");

// send HTTP POST
ClientResponse response = webResource.type("application/x-www-form-urlencoded")
        .post(ClientResponse.class, input); 
```

# android - 找出相机范围内的坐标 - android

> ID：11032564
> 
> 赞同：1
> 
> 时间：2012-06-14T11:57:04.390
> 
> 标签：android, camera, latitude-longitude, augmented-reality, compass-geolocation

我正在做一个小型增强现实应用程序，我有这些包含经度和纬度信息的对象。我还有当前用户位置和指南针航向角。如何检查坐标是否在相机视图的范围内（无论它与相机的距离是多少）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:04:49.817

我不知道怎么做，但如果你可以做的话，我可以给你逻辑。如果你没有考虑过并且你认为它可行，你应该试试这个。它可以是想法，也可以只是废话。 **您可以通过使用当前位置和指南针来做到这一点（比如你在哪个方向观看相机）。如果该位置与您当前位置的方向与相机的方向匹配，则将该位置显示为叠加。** 试试这两个链接：

[Android 上的增强现实：准备相机和指南针](http://www.devx.com/wireless/Article/42482/1954)

[Android 上的增强现实：使用 GPS 和加速度计](http://www.devx.com/wireless/Article/43005/0/page/1)

找到了，这正是你想要的。 [安卓增强现实框架](http://code.google.com/p/android-augment-reality-framework/w/list)

# curl - openssl 1.0.1 并使用 curl 连接到 8443 上的 Ec2 webapplication

> ID：11032565
> 
> 赞同：0
> 
> 时间：2012-06-14T11:57:05.437
> 
> 标签：curl, https, amazon-ec2, openssl

从具有 openssl 0.9.8k 和 curl 7.19 的机器上，我可以成功地与 8443 上的 EC2 Web 应用程序建立 https 连接。

使用 openssl 1.0.1 和 curl 7.22 的机器上的相同 curl 命令最初会失败，并出现模糊的 SSL23_GET_SERVER_HELLO:tlsv1 警报内部错误。我可以通过在 curl 命令中添加 -sslv3 来解决这个问题，这会导致 401 Unauthorized 错误。

为什么相同的命令在不同的 curl/openssl 版本中表现不同？其他可能有用的信息是我在这两种情况下都使用了 -k 选项。

假设这是一个不容易解决的低级 openssl 错误，那么在 ubuntu 上回滚版本的最简单方法是什么？还是只安装我想要的适当的 curl/openssl 软件包会更容易，但是在安装旧 curl 版本的软件包时，我如何确保它链接到旧的 ssl 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:18:51.867

几件事：

既然 curl 和 openssl 是开源包，为什么不直接从源代码编译呢？ [http://curl.haxx.se/docs/install.html](http://curl.haxx.se/docs/install.html)列出了如何指定使用哪个 TLS 库。

其次，我认为**问题实际上是 server-side**。也就是响应ClientHello，服务器返回错误信息。问题不在于较新的客户端，而在于（错误的）服务器如何响应来自较新客户端的消息（这并不少见——请参阅[http://www6.ietf.org/mail-archive/ web/tls/current/msg07281.html](http://www6.ietf.org/mail-archive/web/tls/current/msg07281.html) 并注意 openssl 1.0.1 添加了对 TLS 1.1 和 1.2 的支持）。虽然这可以通过将客户端回滚到 SSLv3 来“修复”，但正确的解决方案是修复等式的服务器端。

什么软件在运行这个服务器端？你可以升级它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:23:18.250

红宝石救援！虽然我仍然无法通过带有 CURL 的 -sslv3 标志来获得它，但[这篇文章](http://blog.55minutes.com/2012/05/tls-error-with-ruby-client-and-tomcat-server/ "这个帖子")挽救了这一天。问题是 http.ssl_version 方法不在 ruby​​ 1.8 net/https 中，因此为什么我之前错过了它，我不得不升级到 ruby​​ 1.9.2，但这似乎可以解决问题，curl 仍然失败并出现 401 错误，但现在这不是一个真正的问题，因为 ruby​​ 有效

# javascript - 实现点符号 Getter/Setter

> ID：11032572
> 
> 赞同：1
> 
> 时间：2012-06-14T11:57:34.703
> 
> 标签：javascript, syntax, getter-setter

我有一个简单的点符号 getter 函数，我希望有一个以相同方式工作的 setter。有任何想法吗？

```
var person = {
    name : {
       first : 'Peter',
       last  : 'Smith'
    }
};

// ---

var dotGet = function(str, obj) {

    return str.split('.').reduce(function(obj, i) {
        return obj[i];
    }, obj);

};

var dotSet = function(str, value, obj) {

    // updated, thx to @thg435
    var arr = str.split('.');

    while (arr.length > 1) {
        obj = obj[arr.shift()];
    }

    obj[arr.shift()] = value;

    return obj;

}

// returns `Peter`
var a = dotGet('person.name.first', person);

// should set `person.name.first` to 'Bob'
var b = dotSet('person.name.first', 'Bob', person); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:03:36.140

```
var set = function (exp, value, scope) {
  var levels = exp.split('.');
  var max_level = levels.length - 1;
  var target = scope;
  levels.some(function (level, i) {
    if (typeof level === 'undefined') {
      return true;
    }
    if (i === max_level) {
      target[level] = value;
    } else {
      var obj = target[level] || {};
      target[level] = obj;
      target = obj;
    }
  });
}; 
```

您可以查看[我的表达式编译器](https://github.com/jankuca/lighter/blob/master/src/expression-compiler.js)，它可以满足您的需要等等。

用法是：

```
var scope = {};
set('person.name', 'Josh', scope);

scope.person.name === 'Josh' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T12:03:10.837

尝试这个：

```
var dotSet = function(str, value, obj) {
  var keys = str.split('.');
  var parent = obj;

  for (var i = 0; i < keys.length - 1; i++) {
    var key = keys[i];

    if (!(key in parent)) {
      parent[key] = {};
      parent = parent[key];
    }
  }

  parent[keys[keys.length - 1]] = value;
}

var person = {};
dotSet('person.name.first', 'Bob', person); 
```

它产生这个对象：

{人：{姓名：{第一：'鲍勃'}}}

# java - -5 到 5 之间的随机数

> ID：11032578
> 
> 赞同：4
> 
> 时间：2012-06-14T11:58:04.413
> 
> 标签：java, random

我试图获得-5和5之间的随机数。我使用这个代码：

```
random.nextInt(10)-5; 
```

但它没有给我号码`5`，如果我使用`random.nextInt(10)-4;`，那么我永远不会得到`-5`。

那么我怎样才能在 -5 和 5 之间获得随机数呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T11:59:52.773

```
random.nextInt(11) - 5 
```

区间中有 11 个整数，因此需要 11 个不同的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T12:00:03.273

范围的结尾是*独占*的[`Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)，所以你必须使用：

```
random.nextInt(11) - 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:00:59.647

你为什么不尝试类似的东西

```
random.nextint(11)-5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T12:00:26.667

如果你想要 -5 和 5 之间的数字，你可以试试

```
random.nextInt(11)-5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T12:01:13.380

使用 nextInt(11)-5; 这是因为 -5 和 +5 之间有 11 个不同的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T12:03:51.537

除了有效答案之外的有用链接：http:
[//docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt) ()

# objective-c - UITableView.ScrollToTop - 改变它认为的“顶部”

> ID：11032583
> 
> 赞同：1
> 
> 时间：2012-06-14T11:58:23.733
> 
> 标签：objective-c, ios, uitableview, xamarin.ios

当按下状态栏并发生 ScrollToTop 时，我希望能够指定偏移量或更具体地说是我认为 UITableView 的“顶部”的单元格。

为了给这个问题一些背景信息，它是一个播放音乐的应用程序，而表格视图是播放列表。我希望当用户点击状态栏时，它会滚动回当前歌曲，而不是继续滚动到之前播放的灰色歌曲。虽然我同意不改变默认行为，但我认为这将是用户在这种情况下的预期行为，我问过的几个人同意我的看法。至于它是否可能是另一回事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:02:01.133

您不能直接修改位置，但您可以实现[`scrollViewShouldScrollToTop:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewShouldScrollToTop%3a)委托方法手动滚动到适当的位置，然后返回`NO`以防止默认行为。

# java - 哪些 Web 技术允许开发静态用户界面/表示层

> ID：11032584
> 
> 赞同：2
> 
> 时间：2012-06-14T11:58:30.950
> 
> 标签：java, web-services, spring, nexus

我有一个运行在 Jboss 应用服务器上的 Spring-WS Web 服务。我还有一个 Spring-MVC 应用程序在运行 Jboss 7 的单独服务器上运行。Spring-MVC 应用程序主要用于用户界面。Spring-WS 应用程序包含业务逻辑的所有服务。

使用我们拥有的组件的标准方法如下：

```
Client Browser ---(HTTP Request)---> Spring MVC ----(SOAP Request)-----> Spring-WS
Client Browser <---(HTTP Request)--- Spring MVC <----(SOAP Response)<----- Spring-WS 
```

需要将来自客户端浏览器的一些请求更改为直接访问 Web 服务，而不是通过 Spring MVC 应用程序。Spring MVC 应用程序将用于加载初始演示屏幕，但涉及任何更新/写入的操作将通过 Spring-WS 流程。

为了实现这一点，我们有一个定制的进程，它与捕获所有 HTTP 请求的客户端浏览器在同一台机器上运行。其目的是将请求转换为 SOAP 消息，并将响应转换为 HTTP 响应。路径如下图所示：

初始请求（检索演示文稿/用户界面）

```
Client Browser ---(HTTP Request)---> Spring MVC 
```

后续请求

```
Client Browser ---(Http Request) ----> SOAP Converter (Local process) ------> (SOAP Request) ----> Spring-WS
Client Browser <---(Http Request) ---- SOAP Converter (Local process) <------ (SOAP Request) <---- Spring-WS 
```

在上述场景中有两条路径发生。在屏幕上显示页面的初始请求将是对 Spring-MVC 进程的请求。任何涉及更改数据的后续请求都将通过上面显示的路径。

我现在遇到的问题是来自 Spring-WS（Web 服务）的所有响应都是 XML 格式的。这意味着当请求来自浏览器时，数据必须来自 Web 服务，但页面需要从 Spring-MVC 应用程序刷新。这在某种程度上感觉有点不对劲，因为每个请求都会涉及到调用。一个获取数据，一个获取演示数据。

为了克服这个问题，我想使用一种技术来实现 Spring-MVC 层，我只需要发出一个初始请求。这意味着用户界面将呈现在屏幕上。对 Spring-WS 服务的所有后续请求都不应导致浏览器被呈现，而不是刷新数据。

我有兴趣知道我可以使用什么样的技术来实现这一目标。这样做的一种方法是使用小程序，但出于安全原因已将其排除在外。我看过几个网站，它们的工作方式与我上面描述的完全一样。即页面从不刷新。一个很好的例子是 Sonatype Nexus Maven 存储库管理器用户界面，如下所示：

![http://www.sonatype.com/books/nexus-book/reference/figs/web/repository-manager_public-interface.png](../Images/3f33029aa32cc0ec1a133d28c9ed98ea.png)

它在网络浏览器中运行，当 Nexus 用户界面在浏览器上加载时，它几乎就像一个 Swing 类型的应用程序。（有人知道 Nexus 使用什么技术来制作用户界面吗？）

我想我的问题是我可以使用哪些基于 Web 的用户界面技术（最好是开源的），它具有摇摆类型的外观和感觉，但不是摇摆，并且需要对服务器刷新屏幕的请求最少？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:03:58.700

Nexus 的界面是使用[Sencha GXT3 构建](http://www.sencha.com/products/gxt/download/)的，现在还包含 ExtJS。

看看 GXT API：它包含许多 Web 组件，它们知道如何在不执行完整的请求/响应周期（使用 Ajax）的情况下更新自己的状态，这似乎是您试图摆脱的。

# java - 如何在包中运行 Java 类？

> ID：11032590
> 
> 赞同：17
> 
> 时间：2012-06-14T11:58:55.483
> 
> 标签：java

我有两个java类如下

`App1`没有包裹：

```
class App1 {
    public static void main(String[] args) {
        System.out.println("App1 hello world...");
    }
} 
```

`App2`在一个包中：

```
package java.java.package1;    
class App2 {
    public static void main(String[] args) {
        System.out.println("App2 hello world...");
    }
} 
```

我可以同时编译它们：

```
D:\javaTest>javac App1.java

D:\javaTest>javac App2.java 
```

但是，我只能运行第一个：

```
D:\javaTest>java App1
App1 hello world...

D:\javaTest>java java.java.package1.App2

Exception in thread "main" java.lang.NoClassDefFoundError: java/java/package1/App2
Caused by: java.lang.ClassNotFoundException: java.java.package1.App2
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: java.java.package1.App2\.  Program will exit. 
```

我怎么跑`App2`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-14T12:01:16.050

如果您将*源代码*放在与包名称 ( ) 匹配的适当目录层次结构中`D:\javaTest\java\java\package1\App1.java`，并从层次结构的根目录 ( ) 编译/运行，则`D:\javaTest`不会遇到此问题：

```
D:\javaTest>javac java\java\package1\App1.java

D:\javaTest>java java.java.package1.App1
App2 hello world... 
```

您还可以使用该`-d`选项进行编译，以便将类移动到这样的目录层次结构中：

```
javac -d . App2.java
java java.java.package1.App2 
```

请注意，您不应该使用以 开头的包名称`java`，并且更高版本的 JDK 将引发 SecurityException。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3804442/why-java-lang-securityexception-prohibited-package-name-java-is-required)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-18T21:33:55.167

您创建一个新目录。这是包含您的工作的目录，而不是您的包的开始。

例如，我创建文件夹 /terri 开始。

然后我在它下面创建文件夹结构 /clarie/andrea。在这个例子中，我的包将被称为 claire.andrea。普通包名称以 com 开头，然后是公司名称或类似名称（或 java 用于标准 java 包，所以不要使用它：如 java.lang.*）。

在 andrea 文件夹中，我创建了一个名为 Saluton.java 的 java 文件，其类为 Saluton（它只打印 hello）。类名和文件名必须匹配。

要编译，从 terri/ 文件夹： javac .\claire\andrea\Saluton.java 这将在 \terri\claire\andrea\Saluton.class 中创建一个 Saluton.class

要运行：（再次从 /terri），我这样做： java -cp 。claire.andrea.Saluton 其中说，使用我当前目录中的类路径。
我的主程序在包 claire.andrea 中，类名是 Saluton。

这是运行： \terri java -cp 。克莱尔·安德里亚·萨卢顿

“你好世界”。

综上所述，包名与底层目录结构非常匹配。该文件（如果它引用一个包）必须位于它所引用的目录结构中。如果我在 /terri 中使用包 claire.andrea 编译 Saluton.java，我还没有找到运行它的方法，它编译得很好。

此外，该类的文件名必须与该文件中的公共类匹配。

要运行，package.Class。一般来说，包不是大写的，类是大写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:17:16.417

你必须把`-d directory`选项.. 因为

> 设置类文件的目标目录。如果类是包的一部分，javac 会将类文件放在反映包名称的子目录中，并根据需要创建目录。例如，如果您指定 -dc:\myclasses 并且类名为 com.mypackage.MyClass，则类文件名为 c:\myclasses\com\mypackage\MyClass.class。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:04:34.957

App2 需要在 java/java/package1 目录中。在 java 中，包名和源代码的目录必须匹配。您没有收到编译错误吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T18:40:33.957

在命令提示符 echo %CLASSPATH% 中通过以下命令检查您的类路径值

检查您的班级是在哪里创建的。要编译 java 源程序，您需要检查您提供的路径，java 文件是否可用。

# java - 关于 Mockito 的一些帮助

> ID：11032591
> 
> 赞同：2
> 
> 时间：2012-06-14T11:58:55.530
> 
> 标签：java, junit, mocking, mockito

我有以下结构：

```
public class MyDao{

private JdbcTemplate  jdbcTemplate;
private DataSource dataSource;

public DataSource getDataSource() {
    return dataSource;
}

public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
}

public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public VCASDao(DataSource dataSource ){
        jdbcTemplate = new JdbcTemplate(dataSource);
    }
} 
```

一些经理类

```
 public class MyManager{

MyDao dao = null;
private DataSource dataSource;

public MyManager(){}

    public DataSource getDataSource() {
        return dataSource;
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    } 

   public void someMethod(Object o){
      dao.save(o);
   }
   }
} 
```

和门面类

```
public class MyFacadeClass{

private MyManager manager;

public MyFacadeClass(){
 manager = new MyManager();
}

public void someFacadeMethod(Object o){
 manager.someMethod(o);
}

} 
```

现在我想用 JUnit 和 Mockito 来测试它。我的问题是我没有 JNDI 架构，我需要使用基于 HSQLDB 的 DataSource 模拟 JdbcTemplate。

我的嘲笑是这样的：

```
@Mock
static BasicDataSource dataSource ;

@Mock
static JdbcTemplate jdbcTemplate ;

@Mock 
MyDao dao;

MyFacadeClass myFacadeClass = new MyFacadeClass();

    @BeforeClass
    public static void init(){
          dataSource = new BasicDataSource();
      dataSource.setDriverClassName("org.hsqldb.jdbcDriver");
          dataSource.setUrl("jdbc:hsqldb:mem:Test");
          dataSource.setUsername("sa");
          dataSource.setPassword("");
          dataSource.setInitialSize(5);
          dataSource.setMaxActive(10);
          dataSource.setPoolPreparedStatements(true);
          dataSource.setMaxOpenPreparedStatements(10);
          jdbcTemplate = new JdbcTemplate(dataSource);
          jdbcTemplate
          .execute("create Some Table");
    }

@Test
public void testSomeFacadeMethod(){
Object o = new Object();
myFacadeClass.someFacadeMethod(o);
} 
```

我在 MyManager 构造函数中遇到异常，即“some_DB”的 JNDI 名称不存在。

我认为我对 Mocking 通用方法有疑问。请帮忙。

PS：我在这个项目中没有使用 spring，只是使用 JdbcTemplate 类来简化代码。

**更新：**

我改变了我的课程，但现在 dao 对象为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:03:13.103

根据您发布的内容，我收集到您想要测试`MyFacadeClass`。如果确实如此，那么您在这里嘲笑错误的东西。

唯一有趣的关系是`MyFacadeClass`-> `MyManager`。JNDI 和 JdbcTemplate 甚至不可见`MyFacadeClass`，你为什么要让它们出现在你的测试中；）

这是我要走的方向，同时保持相同的架构：

1.  所以在`MyFacadeClassTest`你应该只模拟`MyManager`和注入它`MyFacadeClass`，并测试相关的场景。

2.  在`MyManager`中，我建议你不要测试 JNDI 的东西，例如你可以创建一个包可见的构造函数，它直接接受一个`MyDao`对象。将这些 JNDI 内容外部化到另一个类中会更好，它可能类似于`MyDaoProvider`. 然后在`MyManagerTest`您将测试与`MyManager`模拟`MyDao`之间的相关交互。

3.  最后，您需要进行测试`MyDao`，因为 DAO 只能使用真实数据库正确测试，这意味着它需要另一个系统才能运行。此测试是集成测试。您将针对真实数据库（Oracle 等）或内存数据库（HSQLDB 等）运行它，在这种情况下，您将根据您的测试环境创建一个真实的 JdbcTemplate，并将其注入 DAO . 此外，您根本无法运行这些测试，而是运行业务验收测试。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:02:35.393

`MyManager`不应该查找数据源。应将数据源注入其中。这是`Dependency Injection`原则。它使测试更容易，因为您可以轻松地将自己的实现放入其中（在这种情况下是您自己的数据源）。

另一种选择是在类中添加一个`getDataSource()`方法`MyManager`，然后模拟它。

# javascript - 在数据库回调中调用时，Phonegap 函数返回错误的数字

> ID：11032596
> 
> 赞同：0
> 
> 时间：2012-06-14T11:59:22.663
> 
> 标签：javascript, iphone, jquery-mobile, cordova

我正在使用 JQM 和 Phonegap。我有一个计算两点之间距离的函数。我在 Xcode 中这样做并给了模拟器 lat = 51.4863 long = -3.179169

```
distance = function(lat1, lon1, lat2, lon2, unit) 
{ 
    var radlat1 = Math.PI * lat1/180;
    var radlat2 = Math.PI * lat2/180;
    var radlon1 = Math.PI * lon1/180;
    var radlon2 = Math.PI * lon2/180;
    var theta = lon1-lon2;
    var radtheta = Math.PI * theta/180;
    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
    dist = Math.acos(dist);
    dist = dist * 180/Math.PI;
    dist = dist * 60 * 1.1515;
    dist = dist * 1.609344;
    if (unit=="M") { dist = dist / 1.609344 ;}
    if (unit=="N") { dist = dist * 0.8684 ;}
    alert(dist);
    return dist;
} 
```

我还有一个我想返回距离的位置数据库。

如果从我的 db.transactions executeSQL 的 onsuccess 回调中调用 distance 函数，它将返回错误的数字。

但是，当我在 getCurrentPosition 的成功回调上调用此函数时，它工作正常。请记住，我也在此处运行 SQL 选择查询。

我的函数何时工作的代码如下：

```
$( document ).delegate("#mfinder", "pageinit", function() {

  var db = window.openDatabase("Database", "1.0", "location Data", 200000);
  db.transaction(inputData, errorCB, inputDataSuccess);
});

function inputData(tx) {
    tx.executeSql('DROP TABLE IF EXISTS locations');
    tx.executeSql('CREATE TABLE locations (id UNIQUE, name, lat, lon, pcode)');
    tx.executeSql('INSERT INTO locations VALUES (1, "My house", 51.4863, -3.179169, "E20QP")');
    tx.executeSql('INSERT INTO locations VALUES (2, "Manchester", 51.548577,0.708275, "ABC123")');
}

function inputDataSuccess() {
    var db = window.openDatabase("Database", "1.0", "location Data", 200000);
    db.transaction(readLocations, errorCB);
}

function readLocations(tx) {
    tx.executeSql('select * from locations', [], getDistance, errorCB);
}

function getDistance (tx, r){
    d1 = r.rows.item(1).lat;
    d2 = r.rows.item(1).lon;
    d3 = r.rows.item(1).name;
}

$("#fm").click(function() {
navigator.geolocation.getCurrentPosition(onSuccess, onError);
});

function onSuccess(position) {
    clat = position.coords.latitude;
    clon = position.coords.longitude;
    var x = distance(clat, clon, d1, d2, "M");
    alert(x); //THIS WORKS!
} 
```

当函数返回错误的数字时，我的代码是这样的：

```
clat = 0;
clon = 0;
$("#fm").click(function() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
    var db = window.openDatabase("Database", "1.0", "location Data", 200000);
    db.transaction(inputData, errorCB, inputDataSuccess);
});

function onSuccess(position) {
    clat = position.coords.latitude;
    clon = position.coords.longitude;
}

function inputData(tx) {
    tx.executeSql('DROP TABLE IF EXISTS locations');
    tx.executeSql('CREATE TABLE locations (id UNIQUE, name, lat, lon, pcode)');
    tx.executeSql('INSERT INTO locations VALUES (1, "My house", 51.4863, -3.179169, "E20QP")');
    tx.executeSql('INSERT INTO locations VALUES (2, "Manchester", 51.548577,0.708275, "ABC123")');
}

function inputDataSuccess() {
    var db = window.openDatabase("Database", "1.0", "location Data", 200000);
    db.transaction(readLocations, errorCB);
}

function readLocations(tx) {
    tx.executeSql('select * from locations', [], getDistance, errorCB);
}

function getDistance (tx, r){
    d1 = r.rows.item(1).lat;
    d2 = r.rows.item(1).lon;
    d3 = r.rows.item(1).name;
var milesAway = distance(clat, clon, d1, d2, "M"); //wrong figures!!!
alert(milesAway);
} 
```

它工作的第一种方式是这样的......在PageInit中，我正在创建数据并将数据选择到内存中。然后“点击”功能将启用位置服务并执行距离功能。

第二种情况在 pageinit 上没有任何事情发生，一切都在 Click 事件上。在这里，我首先检索用户位置，然后运行数据库并返回一个数据行以计算距离。

现在，有人可以告诉我为什么我得到错误的数字？？？理想情况下，我希望第二个代码库能够工作，这样，我可以循环加载大量数据以附加到例如 DIV 元素。非常感谢任何查看我的问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:26:49.173

我很确定这是因为您没有以异步方式调用您的代码。您期望在执行数据库事务之前设置 clat 和 clon。由于对 getPosition 的调用是异步的，因此它可能会在您的 getDistance 方法之后返回，从而为您提供不正确的结果。尝试设置它，以便在设置 clat 和 clon 之后在 onSuccess 方法中调用 window.openDatabase 和 db.transaction()。那应该会给你正确的结果。

# http - 列出 url 的页面元素的应用程序

> ID：11032602
> 
> 赞同：0
> 
> 时间：2012-06-14T11:59:55.830
> 
> 标签：http, url

我需要创建一个应用程序，它将访问一个 URL（如[http://google.com](http://google.com)）并返回加载所有元素（图像、css、js ...）所花费的时间，并将此结果与以前的结果进行比较。

此应用程序需要是桌面应用程序，我会将信息保存在 xml 文本文件中，并使用此文件与之前的结果进行比较。

我已经搜索了类似的应用程序，但没有...

Firefox 有一些插件列出了这些元素，例如 Yslow 或 Firebug，但不是我需要的。

所以，我完全迷失了，我不知道如何开始这项工作？

有没有可能提出这个申请？哪种语言更适合这种类型的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:08:53.500

这是一个非常客观的问题，因此如果您不详细说明您的要求，您可能不会得到任何有用的答案。

您需要回答的一些问题是：您要检查多少个 URL，您要将结果存储在哪里（数据库、文件等），是否需要在桌面或服务器上运行等。

就个人而言，我喜欢 cURL 为您提供的统计信息——DNS 时间、连接时间、接收时间等——所以你可以用 PHP 编写一些东西，但我强调这是个人喜好，可能不适合你的情况。

# jsp - 使用钩子覆盖 Liferay JSP

> ID：11032612
> 
> 赞同：1
> 
> 时间：2012-06-14T12:00:32.243
> 
> 标签：jsp, hook, liferay, liferay-6

我正在尝试覆盖 Liferay 6.1 中的 JSP，即 html/portlet/enterprise_admin/settings/authentication.jsp。

我有

*   创建了一个钩子（使用 Eclipse，如果这很重要）
*   添加`<custom-jsp-dir>/WEB-INF/jsps</custom-jsp-dir>`到 liferay-hook.xml
*   创建了上述目录结构
*   复制 authentication.jsp 并修改它
*   部署钩子
*   （重启服务器，你永远不知道...）

部署似乎工作正常。在服务器上，我现在有 authentication.jsp 和 authentication.portal.jsp，前者包含我的更改。

但是，当我进入 Portal Settings -> Authentication 时，我看不到任何更改

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:16:26.290

估计路径不对。authentication.jsp 的正确路径是

> /portal-web/docroot/html/portlet/portal_settings/authentication.jsp

我检查了源代码，在 Liferay 6.1 中，没有称为企业管理员的 portlet。

所以请更改文件夹结构。

# jquery-mobile - Windows Mobile 的 rhodes 中的 Jquerymobile 的任何替代品？

> ID：11032616
> 
> 赞同：0
> 
> 时间：2012-06-14T12:00:48.040
> 
> 标签：jquery-mobile, rhomobile, rhodes, windows-mobile-6

我正在使用 Rhostudio 为 ios、Android、Windows Mobile 等跨平台构建一个项目。

我正在使用 jQueryMobile 来获得漂亮的外观和感觉。一切顺利，直到 Windows Mobile 开始发挥作用。

由于 windows mobile 中不支持 jquerymobile，因此我没有得到正确的 Ui 输出。

他们是否有任何其他方式可以让 Windows Mobile 获得与 Android 或 ios 相同的外观和感觉？

谢谢，阿希斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:15:28.463

根据[http://jquerymobile.com/gbs/](http://jquerymobile.com/gbs/)，在 Windows Mobile 上有对 jQM 的 A 级支持。

如果你想要一个原生的观感，你可以尝试一个专门为模拟 Windows 观感而开发的主题，例如[http://sgrebnov.github.com/jqmobile-metro-theme/samples/jqm-public-demo/索引.html](http://sgrebnov.github.com/jqmobile-metro-theme/samples/jqm-public-demo/index.html)。

# c# - 以斜线为背景的形状

> ID：11032617
> 
> 赞同：3
> 
> 时间：2012-06-14T12:00:48.093
> 
> 标签：c#, .net, wpf, background, shape

是否可以绘制一个[`Shape`](http://msdn.microsoft.com/en-us/library/system.windows.shapes(v=VS.95).aspx)由斜线构成的背景？

一个例子`Rectangle`（对不起图像质量）：

![在此处输入图像描述](../Images/8db1a1b9f375f40682d182116a5f814e.png)

如果我想要虚线或更改线条属性（笔画，粗细..）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:06:14.283

您可以使用本文中的解决方案[http://mark-dot-net.blogspot.com/2007/06/creating-hatched-patterned-brush-in-wpf.html](http://mark-dot-net.blogspot.com/2007/06/creating-hatched-patterned-brush-in-wpf.html)

```
<VisualBrush
  x:Key="HatchBrush"
  TileMode="Tile" Viewport="0,0,10,10"
  ViewportUnits="Absolute" Viewbox="0,0,10,10"   
  ViewboxUnits="Absolute">
  <VisualBrush.Visual>
    <Canvas>
       <Rectangle Fill="Azure" Width="10" Height="10" />
       <Path Stroke="Purple" Data="M 0 0 l 10 10" />
    </Canvas>
  </VisualBrush.Visual>
</VisualBrush> 
```

只需更改参数等以适合您的应用程序

用法：

```
<Rectangle Width="80" Height="40"
    Fill="{StaticResource HatchBrush}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:04:47.247

这有帮助吗：[ [WPF，C#：在图像控件中的现有位图上画一条线](https://stackoverflow.com/questions/5231086/wpf-c-draw-a-line-onto-existing-bitmap-in-image-control)] 或[http://msdn.microsoft.com/en-us/library/ms747393.aspx](http://msdn.microsoft.com/en-us/library/ms747393.aspx)

# svn - 从 2.2.0 升级到 2.2.1 后，Hudson dryRun 作业中断

> ID：11032625
> 
> 赞同：1
> 
> 时间：2012-06-14T12:01:19.153
> 
> 标签：svn, maven, hudson, maven-release-plugin

我刚刚将我们的 Hudson 从 2.2.0 升级到 2.2.1 以修复一个已知的电子邮件错误。这样做会导致一些问题，尤其是在 dryRun 构建时。升级后，所有的 dryRun 作业都失败了。

我不确定发生了什么，但某些原因导致 svn 版本冲突：

```
svn: The path '.' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy. 
```

我们有几个构建来运行发布：准备

```
clean -e release:clean release:prepare -DdryRun=true 
```

*   Hudson Maven（旧版）插件-> 2.2.1
*   Hudson Maven3 插件 -> 2.2.0
*   Hudson 颠覆插件 -> 2.3.2

似乎文件已正确下载，但“检查修改”步骤似乎没有必要。

Maven输出：

```
[INFO] Verifying that there are no local modifications...
[INFO] Executing: /bin/sh -c cd /var/lib/hudson/jobs/anonymousName-app-svn-dryRun-release/workspace/app && svn --non-interactive status
[INFO] Working directory: /var/lib/hudson/jobs/anonymousName-app-svn-dryRun-release/workspace/app
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Unable to check for local modifications
Provider message:
The svn command failed.
Command output:
svn: The path '.' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy.

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.BuildFailureException: Unable to check for local modifications
Provider message:
The svn command failed.
Command output:
svn: The path '.' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy.

        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:715)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.lifecycle.LifecycleExecutorInterceptor.execute(LifecycleExecutorInterceptor.java:65)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:600)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at hudson.maven.agent.Main.launch(Main.java:173)
        at hudson.maven.MavenBuilder.call(MavenBuilder.java:164)
        at hudson.maven.MavenModuleSetBuild$Builder.call(MavenModuleSetBuild.java:917)
        at hudson.maven.MavenModuleSetBuild$Builder.call(MavenModuleSetBuild.java:848)
        at hudson.remoting.UserRequest.perform(UserRequest.java:114)
        at hudson.remoting.UserRequest.perform(UserRequest.java:48)
        at hudson.remoting.Request$2.run(Request.java:283)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:453)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:315)
        at java.util.concurrent.FutureTask.run(FutureTask.java:150)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:898)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:920)
        at java.lang.Thread.run(Thread.java:736)
Caused by: org.apache.maven.plugin.MojoFailureException: Unable to check for local modifications
Provider message:
The svn command failed.
Command output:
svn: The path '.' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy.

        at org.apache.maven.plugins.release.PrepareReleaseMojo.execute(PrepareReleaseMojo.java:190)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
        at hudson.maven.agent.PluginManagerInterceptor.executeMojo(PluginManagerInterceptor.java:182)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        ... 28 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12 seconds
[INFO] Finished at: Thu Jun 14 12:56:15 CEST 2012
[INFO] Final Memory: 25M/63M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:21:05.833

在[2.2.1 版本](http://hudson-ci.org/changelog.html)中，Hudson 升级到 SVNKit 1.7，导致 Subversion 工作副本使用非向后兼容的 1.7 格式。

Maven release-plugin 从路径中调用您的 SCM 提供者 Subversion。您可能为命令行安装了 Subversion 1.6 或更早版本。

一种可能的解决方案是将命令行 Subversion 安装升级到 1.7 版。

# javascript - 如何使用 Greasemonkey 按条件单击项目？

> ID：11032627
> 
> 赞同：1
> 
> 时间：2012-06-14T12:01:27.250
> 
> 标签：javascript, jquery, html, greasemonkey, userscripts

```
<input type="hidden" name="my_id" id="my_id" value="1">

<ul class="myList clearfix" id="thismyList">
<li class="myBullet" id="answer1">blabla1</li>
<li class="myBullet" id="answer2">blabla2</li>
<li class="myBullet" id="answer3">blabla3</li> 
```

在这个页面中，我想要这样的东西：

```
if document.getElementById('my_id').value=="1"
document.getElementById('answer1').click;
if document.getElementById('my_id').value=="2"
document.getElementById('answer3').click;
if document.getElementById('my_id').value=="3"
document.getElementById('answer1').click;
if document.getElementById('my_id').value=="4"
document.getElementById('answer2').click; 
```

我写这篇文章是为了表明我想要什么。我知道代码是错误的。但我认为这解释了我想要什么。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:37:23.737

正确的语法是：

```
switch (document.getElementById('my_id').value) {
    case "1":
        document.getElementById ('answer1').click ();
        break;
    case "2":
        document.getElementById ('answer3').click ();
        break;
    case "3":
        document.getElementById ('answer1').click ();
        break;
    case "4":
        document.getElementById ('answer2').click ();
        break;
    default:
        break;
} 
```

* * *

请注意，在某些情况下，您可能需要触发鼠标事件，例如[此答案](https://stackoverflow.com/a/7137323/331508)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:05:23.580

如果你想调用你应该调用的函数的点击行为。

```
document.getElementById('id').click(); 
```

我认为它也应该像没有“（）”的情况下一样工作。

# android - 我的相机应用程序在打开时崩溃。

> ID：11032632
> 
> 赞同：2
> 
> 时间：2012-06-14T12:01:54.707
> 
> 标签：android, camera, heap-memory

在打开我的相机应用程序时，我收到以下命令，它将关闭。我添加了更多识别用户语音命令的代码。堆内存造成了问题，但我无法找到确切的原因。请帮忙。

```
01-02 06:30:47.677: INFO/ActivityManager(291): app/in.co.my.android.camera[INITIAL] app.idle/false
01-02 06:30:47.677: INFO/ActivityManager(291): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=in.co.my.android.camera/.stillimagecamera.Camera} from pid 788
01-02 06:30:47.747: INFO/ActivityManager(291): app/in.co.my.android.camera[RESUMED] app.idle/false ...realStartActivityLocked
01-02 06:30:47.747: INFO/CameraBaseActivity(14632): onCreate start
01-02 06:30:47.755: DEBUG/IntentParameters(14632): DCFsaveCapture=false, ImageCapture=false
01-02 06:30:47.755: DEBUG/IntentParameters(14632): SaveUri=null, CropValue=null, CameraStyle=0
01-02 06:30:48.005: DEBUG/in.co.my.android.camera.stillimagecamera.RecognizerTask(14632): waiting
01-02 06:30:48.005: INFO/ActivityManager(291): app/com.google.android.tts[INITIAL] app.idle/false
01-02 06:30:48.005: INFO/ActivityManager(291): START {act=android.speech.tts.engine.CHECK_TTS_DATA cmp=com.google.android.tts/.CheckVoiceData} from pid 14632
01-02 06:30:48.013: DEBUG/Camera(14632): onCreateImpl start
01-02 06:30:48.052: INFO/CameraBaseActivity(14632): onContentChanged
01-02 06:30:48.060: DEBUG/Camera(14632): onCreateImpl end
01-02 06:30:48.060: DEBUG/Camera(14632): [ 01-02 06:30:48.091 14632:0x3931 F/libc     ]
01-02 06:30:48.060: DEBUG/Camera(14632): Fatal signal 11 (SIGSEGV) at 0xe8a4a3f4 (code=1)
01-02 06:30:48.513: INFO/ActivityManager(291): app/com.google.android.tts[RESUMED] app.idle/false ...realStartActivityLocked
01-02 06:30:48.513: WARN/ActivityManager(291): Activity pause timeout for ActivityRecord{41c69028 in.co.my.android.camera/.stillimagecamera.Camera}
01-02 06:30:48.521: INFO/ActivityManager(291): app/in.co.my.android.camera[RESUMED] app.idle/false ...resumeTopActivityLocked
01-02 06:30:48.599: INFO/DEBUG(13939): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
01-02 06:30:48.599: INFO/DEBUG(13939): Build fingerprint: 'SBM/SBM104SH/SBM104SH:4.0.3/A3080/00.00.00:eng/test-keys'
01-02 06:30:48.599: INFO/DEBUG(13939): pid: 14632, tid: 14641  >>> in.co.my.android.camera <<<
01-02 06:30:48.599: INFO/DEBUG(13939): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr e8a4a3f4
01-02 06:30:48.599: INFO/DEBUG(13939):  r0 40124b34  r1 008f4000  r2 e8a4a3e8  r3 00ad53d8
01-02 06:30:48.599: INFO/DEBUG(13939):  r4 00b81a38  r5 00aadac8  r6 00000158  r7 00000001
01-02 06:30:48.599: INFO/DEBUG(13939):  r8 00aa01d0  r9 00000025  10 00000008  fp     5b443c04
01-02 06:30:48.599: INFO/DEBUG(13939):  ip 00000158  sp 5b443b90  lr 400ed8fc  pc 400f1102  cpsr a0000030
01-02 06:30:48.599: INFO/DEBUG(13939):  d0  0000000000000000  d1  0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d2  00000003786e6968  d3  6e6968707374656b
01-02 06:30:48.599: INFO/DEBUG(13939):  d4  41d2d7d841d48bd8  d5  41b07ac841c0aec0
01-02 06:30:48.599: INFO/DEBUG(13939):  d6  3cea65d400000000  d7  fffffffe4188c4d0
01-02 06:30:48.599: INFO/DEBUG(13939):  d8  0000000000000000  d9  0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d10 0000000000000000  d11 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d12 0000000000000000  d13 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d14 0000000000000000  d15 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d16 3fb9750000000000  d17 3fdfffffffffffcb
01-02 06:30:48.599: INFO/DEBUG(13939):  d18 3fe0000000000000  d19 3fe000000000001a
01-02 06:30:48.599: INFO/DEBUG(13939):  d20 0000000000000000  d21 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d22 0000000000000000  d23 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d24 0000000000000000  d25 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d26 0000000000000000  d27 0000000000000000
01-02 06:30:48.599: INFO/DEBUG(13939):  d28 0100010001000100  d29 0100010001000100
01-02 06:30:48.599: INFO/DEBUG(13939):  d30 0000000000000000  d31 3fe7fffff4000005
01-02 06:30:48.599: INFO/DEBUG(13939):  scr 20000012
01-02 06:30:48.724: INFO/DEBUG(13939):          #00  pc 00016102  /system/lib/libc.so (dlfree)
01-02 06:30:48.724: INFO/DEBUG(13939):          #01  pc 00016798  /system/lib/libc.so (free)
01-02 06:30:48.724: INFO/DEBUG(13939):          #02  pc 0006bcf0  /system/lib/libicuuc.so (uprv_free_46)
01-02 06:30:48.724: INFO/DEBUG(13939):          #03  pc 00051a24  /system/lib/libicuuc.so (uscript_closeRun_46)
01-02 06:30:48.724: INFO/DEBUG(13939):          #04  pc 000a7d42  /system/lib/libicui18n.so (_ZN6icu_4612RegexPattern3zapEv)
01-02 06:30:48.724: INFO/DEBUG(13939):          #05  pc 000a7d72  /system/lib/libicui18n.so (_ZN6icu_4612RegexPatternD2Ev)
01-02 06:30:48.732: INFO/DEBUG(13939):          #06  pc 000a7d94  /system/lib/libicui18n.so (_ZN6icu_4612RegexPatternD0Ev)
01-02 06:30:48.732: INFO/DEBUG(13939):          #07  pc 000106b2  /system/lib/libnativehelper.so
01-02 06:30:48.732: INFO/DEBUG(13939):          #08  pc 0001ebb0  /system/lib/libdvm.so (dvmPlatformInvoke)
01-02 06:30:48.732: INFO/DEBUG(13939):          #09  pc 0005822e  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
01-02 06:30:48.732: INFO/DEBUG(13939): code around pc:
01-02 06:30:48.732: INFO/DEBUG(13939): 400f10e0 60a460e4 4854e01e 44784954 e0174479  .`.`..THTIxDyD..
01-02 06:30:48.732: INFO/DEBUG(13939): 400f10f0 689a4853 69014478 d308428b d306428a  SH.hxD.i.B...B..
01-02 06:30:48.732: INFO/DEBUG(13939): 400f1100 60d4609c 60e360a2 61a32300 484de00a  .`.`.`.`.#.a..MH
01-02 06:30:48.732: INFO/DEBUG(13939): 400f1110 4478494d e0034479 494d484c 44794478  MIxDyD..LHMIxDyD
01-02 06:30:48.732: INFO/DEBUG(13939): 400f1120 fe34f7fd 4478484b 11b4f8d0 d503078b  ..4.KHxD........
01-02 06:30:48.732: INFO/DEBUG(13939): code around lr:
01-02 06:30:48.732: INFO/DEBUG(13939): 400ed8dc e2166903 1a000018 e5945000 e1a02004  .i.......P... ..
01-02 06:30:48.732: INFO/DEBUG(13939): 400ed8ec e2055a02 e1a00005 e3851001 ebffecd7  .Z..............
01-02 06:30:48.732: INFO/DEBUG(13939): 400ed8fc e3500000 13856002 1a000001 ea000009  ..P..`..........
01-02 06:30:48.732: INFO/DEBUG(13939): 400ed90c ebfffe87 e1a01004 e1a00006 ebffecd7  ................
01-02 06:30:48.732: INFO/DEBUG(13939): 400ed91c e1a01005 e1a02006 e3a03000 e1550000  ..... ...0....U.
01-02 06:30:48.732: INFO/DEBUG(13939): memory map around addr e8a4a3f4:
01-02 06:30:48.732: INFO/DEBUG(13939): be952000-be973000 [stack]
01-02 06:30:48.732: INFO/DEBUG(13939): (no map for address)
01-02 06:30:48.732: INFO/DEBUG(13939): ffff0000-ffff1000 [vectors]
01-02 06:30:48.732: INFO/DEBUG(13939): stack:
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b50  00c8fb10  [heap]
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b54  40124b78  
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b58  00000020  
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b5c  40124b34  
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b60  00c8fb18  [heap]
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b64  50ba1f64  
01-02 06:30:48.732: INFO/DEBUG(13939):     5b443b68  00b9b170  [heap]
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b6c  40124b90  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b70  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b74  00b87a08  [heap]
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b78  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b7c  50ba1f6c  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b80  00b81a40  [heap]
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b84  50ba1f64  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b88  df0027ad  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b8c  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939): #00 5b443b90  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b94  00b87a08  [heap]
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b98  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443b9c  50ba1f6c  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443ba0  5b443bf0  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443ba4  50ba1f64  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443ba8  00000008  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443bac  400f179b  /system/lib/libc.so
01-02 06:30:48.739: INFO/DEBUG(13939): #01 5b443bb0  00000000  
01-02 06:30:48.739: INFO/DEBUG(13939):     5b443bb4  404d9cf3  /system/lib/libicuuc.so
01-02 06:30:49.958: DEBUG/OEM_RIL(486): <<< [UNSL] Unknown ID: -4
01-02 06:30:51.107: INFO/BootReceiver(291): Copying /data/tombstones/tombstone_05 to  DropBox (SYSTEM_TOMBSTONE)
01-02 06:30:51.169: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.169: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.169: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.169: INFO/ActivityManager(291): handleAppDiedLocked, call sendFinishPackageName. Exception/true
01-02 06:30:51.169: INFO/ActivityManager(291): Process in.co.my.android.camera (pid 14632) has died.
01-02 06:30:51.169: WARN/ActivityManager(291): Force removing ActivityRecord{41c69028 in.co.my.android.camera/.stillimagecamera.Camera}: app died, no saved state
01-02 06:30:51.177: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.177: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.177: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.177: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.177: WARN/Process(291): Unable to open /proc/14632/status
01-02 06:30:51.185: INFO/ActivityManager(291): app/in.co.my.android.home[RESUMED] app.idle/true ...resumeTopActivityLocked
01-02 06:30:51.294: INFO/Launcher(788): onResume() serviceIf == null
01-02 06:30:51.294: WARN/ActivityManager(291): Unable to start service Intent { act=in.co.my.android.home.IInfosignAidlService typ=application/vnd.my.mail }: not found
01-02 06:30:51.302: WARN/InputManagerService(291): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41c659e0
01-02 06:30:51.552: INFO/ActivityManager(291): removeActivityFromHistoryLocked, call sendFinishPackageName. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:04:24.440

您的清单文件中是否有正确的相机权限标志？

# windows-phone-7 - HttpWebRequest 和 WebClient 在 Windows Phone 7 上返回 NotFound 但不是我正常的控制台应用程序

> ID：11032652
> 
> 赞同：4
> 
> 时间：2012-06-14T12:03:01.367
> 
> 标签：windows-phone-7, httpwebrequest, webclient

我正在尝试从 Windows Phone 7 应用程序的此 URL [https://valueboxtest.lb.dk/mobile/categories下载常规 JSON 字符串。](https://valueboxtest.lb.dk/mobile/categories)

我尝试同时使用 WebClient 和 HttpWebRequest。他们都抛出异常

```
“The remote server returned an error: NotFound” 
```

## 这是使用 WebClient 的代码

```
var webClient = new WebClient();
webClient.DownloadStringCompleted += (client_DownloadStringCompleted);
webClient.DownloadStringAsync(new Uri("https://valueboxtest.lb.dk/mobile/categories")); 
```

然后事件处理程序只显示内容，但 e.Result 抛出上述异常：

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error == null && !e.Cancelled) MessageBox.Show(e.Result);
} 
```

## 对于 HttpWebRequest，我的代码如下所示：

```
var httpReq = (HttpWebRequest)WebRequest.Create(new Uri("https://valueboxtest.lb.dk/mobile/categories"));
httpReq.BeginGetResponse(HTTPWebRequestCallBack, httpReq); 
```

使用以下回调：

```
private void HTTPWebRequestCallBack(IAsyncResult result)
{
    var httpRequest = (HttpWebRequest)result.AsyncState;
    var response = httpRequest.EndGetResponse(result);
    var stream = response.GetResponseStream();
    var reader = new StreamReader(stream);
    this.Dispatcher.BeginInvoke(
        new delegateUpdate(update),
        new Object[] { reader.ReadToEnd() }
    );
} 
```

并使用委托方法

```
delegate void delegateUpdate(string content);

private void update(string content)
{
    MessageBox.Show(content);
} 
```

## 在控制台应用程序中运行它

一切正常，返回的 JSON 字符串没有问题，我可以将结果打印到控制台。

## 不同的 URL*确实*适用于 WP7

奇怪的是 URL [http://mobiforge.com/rssfeed](http://mobiforge.com/rssfeed)实际上在上述两种情况下都可以正常工作。

*在模拟器和*实际设备上都会出现此问题。

有什么问题？REST 服务是否以行为不端的方式返回数据？我真的希望你能帮助我！

*注意*：我没有同时运行 Fiddler2！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:20:47.327

原因是该站点没有有效的证书。只需在 Mobile Internet Explorer 上尝试，您就会收到有关证书问题的提示。

[如何忽略 SSL 证书](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/1ffa1123-53b2-4342-9693-bb35d83b9f89)

移动设备在 SSL 证书方面更为严格。

如果您想将此应用程序用于生产环境，您需要为此服务器编写一个包装器（如果它不是您自己的），或者获取一个有效的证书。在短期内，为了测试，您可以将证书添加到您的设备中。

[这是一个可以帮助您安装证书的工具。](http://blogs.msdn.com/b/davidhardin/archive/2011/01/12/wp7certinstaller-1-0-0-0-released.aspx)

# jquery - 带有负百分比的 jQuery animate() Chrome/WebKit 错误

> ID：11032656
> 
> 赞同：1
> 
> 时间：2012-06-14T12:03:14.377
> 
> 标签：jquery, google-chrome, animation, toggle

我无法让动画效果正常工作。它在 toggle() 事件中被调用。我正在将 div 设置为负百分比的位置。这在从 top:0 到 top:-50% 时效果很好。但是，当从 top:-50% 到 top:0 进行动画处理时，我遇到了一个奇怪的错误，它会自动跳到距离其完成目的地大约 5% 的位置并从那里开始动画。

我只能在基于 WebKit 的浏览器中复制它。

要查看此错误，请访问[http://bni.mootexpress.com](http://bni.mootexpress.com)并单击页面右下方的“查找我们”链接。它可以很好地动画并显示背后的地图，但是当您再次单击“查找我们”关闭地图时，您可以看到滑动框在动画之前如何跳回接近其最终目的地。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T17:23:19.923

我意识到这是一张较旧的票，但如果其他人遇到这个问题，可能是你在混合百分比和像素时遇到了 jQuery 的错误。尝试在运行动画之前将您的 top:0 更改为 top:"0%" 或通过在 jQuery 中将百分比转换为像素来使用像素而不是百分比。

这看起来会在以后的 jQuery 版本中得到修复。 [http://bugs.jquery.com/ticket/9505](http://bugs.jquery.com/ticket/9505)

# ruby - Ruby 需要错误

> ID：11032657
> 
> 赞同：1
> 
> 时间：2012-06-14T12:03:15.737
> 
> 标签：ruby, ubuntu, gem, require

需要安装的 gem 不可见。

用我安装了几次的 hpricot 进行测试：

```
irb(main):001:0> require "rubygems"
=> false
irb(main):002:0> require "hpricot"
LoadError: no such file to load -- hpricot
        from (irb):2:in `require'
        from (irb):2
        from /usr/bin/irb:12:in `<main>'
irb(main):003:0> 
```

RubyGems 环境：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.9.2 (2010-07-02 patchlevel -1) [i486-linux]
  - INSTALLATION DIRECTORY: /var/lib/gems/1.9.2
  - RUBY EXECUTABLE: /usr/bin/ruby1.9.2
  - EXECUTABLE DIRECTORY: /var/lib/gems/1.9.2/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /var/lib/gems/1.9.2
     - /root/.gem/ruby/1.9.2
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我安装了多个版本的 ruby​​（回溯 5r2）

```
targeex@bt:/home/targeex/Stage/Application_Wissam# update-alternatives --config ruby
There are 2 choices for the alternative ruby (providing /usr/bin/ruby).

  Selection    Path                Priority   Status
------------------------------------------------------------
  0            /usr/bin/ruby1.8     600       auto mode
  1            /usr/bin/ruby1.8     600       manual mode
* 2            /usr/bin/ruby1.9.2   400       manual mode

Press enter to keep the current choice[*], or type selection number: 2 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:07:34.050

看起来您可能没有在正确的红宝石中安装 gem。如果可以的话，切换到使用 RVM (https://rvm.io/) 它会治愈你的困扰。

# javascript - 未捕获的类型错误：对象 [对象对象] 没有“应用”方法

> ID：11032659
> 
> 赞同：5
> 
> 时间：2012-06-14T12:03:24.547
> 
> 标签：javascript, jquery

我正在创建的新网站上收到此未捕获的 TypeError，但我无法找出导致错误的原因。

我在下面的链接中重新创建了问题，如果您查看浏览器的 JS 控制台，您会看到错误发生，但没有其他任何反应。

[http://jsfiddle.net/EbR6D/2/](http://jsfiddle.net/EbR6D/2/)

代码：

```
$('.newsitem').hover(
$(this).children('.text').animate({ height: '34px' }), 
$(this).children('.text').animate({ height: '0px'  }));​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:08:08.820

请务必将它们包装在异步回调中：

```
$('.newsitem').hover(
    function() {
        $(this).children('.title').animate({height:'34px'});
    }, function() {
        $(this).children('.title').animate({height:'0px'});
    }
);
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:05:47.747

你需要：

```
.hover(function(){ ... }); 
```

根据[文档](http://api.jquery.com/hover/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:06:34.607

你错过了`function`...

```
$('.newsitem').hover(
    $(this).children('.text').animate({height:'34px'}),
    $(this).children('.text').animate({height:'0px'})
); 
```

到：

```
$('.newsitem').hover(function() {
    $(this).children('.text').animate({
        height: '34px'
    });
}, function() {
    $(this).children('.text').animate({
        height: '0px'
    });
});​
​ 
```

而<code>$(this).children('.text')，没有选择任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:24:03.213

使用幻灯片动画来处理 .text 类的高度。

```
$('.newsitem').hover(function() {
    $(this).children('.text').slideToggle();
});​
​ 
```

# git - 当我需要 *pull* origin master 时，为什么它会说“您的分支比 origin/master 领先 857 次提交”

> ID：11032661
> 
> 赞同：23
> 
> 时间：2012-06-14T12:03:34.110
> 
> 标签：git

首先，我知道一些措辞相似的问题，例如：

*   [如何在 git 中找到 origin/master 的位置，以及如何更改它？](https://stackoverflow.com/questions/277077/why-is-git-telling-me-your-branch-is-ahead-of-origin-master-by-11-commits-a)
*   [git：您的分支领先于 X 次提交](https://stackoverflow.com/questions/2432579/git-your-branch-is-ahead-by-x-commits)
*   [Git：Branch 领先于 X 次提交。没有帮助做 git pull](https://stackoverflow.com/questions/10966498/git-branch-is-ahead-by-x-commits-doesnt-help-doing-git-pull)
*   [pull-only repo 的 'git status' 表示分支在 origin/master 之前。为什么？](https://stackoverflow.com/questions/7365415/pull-only-repos-git-status-saying-the-branch-is-ahead-of-origin-master-why)

他们（AFAICT）都没有与我的这个问题版本相匹配的答案。

我的情况是：

```
$ git status
# On branch stable
nothing to commit (working directory clean)
$ git checkout master
Switched to branch 'master'
Your branch is ahead of 'origin/master' by 857 commits. 
```

在现有问题中，接受和赞成的答案大多同意它的字面意思是它所说的......我领先了，我需要将我的新提交*推*送到 origin/master。

我知道实际上相反的情况是正确的，我的本地`master`分支位于远程之后`origin/master`，实际上我需要`git pull origin master`在本地进行一些工作之前。（或者可能只是`git fetch origin`？）

我的问题是……是否有某种理由将消息措辞`Your branch is ahead of 'origin/master' by 857 commits.`使其真正有意义？

因为我目前理解它的方式与消息所说的相反（“我的分支”在原点/主控*后面）。*

还是真的意味着：“远程主分支的 HEAD 领先于您的本地源/主跟踪分支”？

**更新** FWIW 我在一个由六名其他开发人员组成的团队中工作。我们每天都会多次拉取、提交和推送等，没有问题。我这里没有错误......我只是想理解为什么 Git 会这样表达它的信息——无论是措辞本身选择不当，还是 Git 的某些潜在概念导致他们这样说我没有正确理解。

**这里的更多信息**
是我猜可能是输出的相关部分`git config -l`

```
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=https://code.google.com/a/google.com/p/xxxxx/
branch.master.remote=origin
branch.master.merge=refs/heads/master
branch.master.mergeoptions=--no-ff 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T15:19:49.037

你想多了。该消息并不是说遥控器落后了。这是说您的本地存储库记录的“origin/master”提交是。在生成该消息的任何时候，git 都没有与远程通信。它只是查看 .git 目录，然后返回 .git 的内容`.git/refs/remotes/origin/master`。自己试试。这两个命令都应该从存储库的顶层返回相同的内容：

```
cat .git/refs/remotes/origin/master
git rev-parse origin/master 
```

第二个命令只是一个用于查找“原点/主”指针的管道命令。您可以用任何分支替换 'origin/master' 以获得该分支上的最新提交。

该消息告诉您，您的本地 'master' 比 'git rev-parse origin/master' 返回的提交领先 857 次提交。这种情况是如何产生的？我不能确切地说，但我会在你不小心将不同的分支合并到“master”中投入大量资金。每次我看到这个问题，它都是来自用户错误的错误合并。

首先，发出`git fetch origin`以确保'origin/master'指针是最新的。然后，研究你的`git log`. 寻找你没想到的最近的东西。下载[tig 之类的程序](http://jonas.nitro.dk/tig/)或用于`gitk`获取提交历史的可视化图表。这是一个很好的赌注，您`git pull stable`在“master”结账时意外发出。或类似的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T20:14:22.533

`git rebase -p`

它会说`First, rewinding head to replay your work on top of it...`，你会准备好，因为没有工作可以重播。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-24T20:49:50.940

我也有这个问题。我搜索了一下，发现我们偶尔会运行 'git pull upstream master' 来获取上游 master 到本地 master 的最新更改，这是一个分叉的分支。但是，这些更新的更改尚未推送到我们的远程主机。因此，消息说“我们的本地是 x 提交在远程主机之前”。在 fork 分支环境中进行新代码或修改之前，最好运行以下命令

git checkout master_branch；
git pull 上游主机；
git 推送

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-22T17:42:21.340

我遇到过同样的问题。就像[选择的解决方案](https://stackoverflow.com/a/11036264/4739826)指出的那样，我认为问题在于源/主指针已过时。我大多只做`git pull origin master`而不做`fetch`。

因为我知道我没有本地更改，所以我硬重置为 master，然后获取更新指针，最后拉取以赶上远程 master 分支上的提交。像这样：

```
git reset --hard origin/master
git fetch origin
git pull origin master 
```

希望这对将来的人也有帮助。

**编辑：也很有用** 在[另一个](https://stackoverflow.com/questions/2432579/git-your-branch-is-ahead-by-x-commits)问题上，我找到了一个很好的[解决方案](https://stackoverflow.com/a/3323933/4739826)，其中包含有用的命令。当以上没有时，这些对我有用！

> 如果您在执行 a 后收到此消息`git pull remote branch`，请尝试使用 a 跟进它 `git fetch`。（可选地，运行`git fetch -p`以从 repo 中修剪已删除的分支）
> 
> Fetch 似乎更新了远程分支的本地表示，当您执行`git pull remote branch`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-21T18:46:56.863

最后，解决问题的**实际** **解决方案：**

这是因为它需要一个 git push，在合并之后。这也发生在我身上，同样的错误信息。Andy magoon 也是对的，因为当我进行推送时，我现在看到一张白纸，没有任何字节被推送。然而，变基通常不是最好的方法。

```
 $ git status ./
On branch master-blah1
Your branch is ahead of 'origin/master-blah1' by 869 commits.
  (use "git push" to publish your local commits)
nothing to commit, working directory clean

    $ git push
    Counting objects: 7, done.
    Delta compression using up to 48 threads.
    Compressing objects: 100% (7/7), done.
    Writing objects: 100% (7/7), 653 bytes | 0 bytes/s, done.
    Total 7 (delta 4), reused 0 (delta 0)

$ git status ./
On branch master-blah1
Your branch is up-to-date with 'origin/master-blah1'.
nothing to commit, working directory clean 
```

# c++ - C/C++：包含 int 和 enum == sizeof(int) 的 typedef 结构的大小？

> ID：11032668
> 
> 赞同：3
> 
> 时间：2012-06-14T12:04:07.543
> 
> 标签：c++, c, struct, size, enumeration

我在我的 Ubuntu (i686) 上使用 gcc 版本 4.3.3。我写了一个精简的测试程序来描述我缺乏理解和我的问题。该程序将告诉我我实现的结构的大小。所以我有一个用于*Message的**typedef 结构*和一个小 main 来玩：

 *```
#include <stdio.h>

typedef struct {
    int size; 
    enum {token=0x123456}; 
} Message;

int main(int argc, char * argv[])
{
    Message m;
    m.size = 30;
    printf("sizeof(int): %d\n",sizeof(int));
    printf("sizeof(0x123456): %d\n",sizeof(0x123456));
    printf("sizeof(Message): %d\n",sizeof(Message));
    printf("sizeof(m): %d\n",sizeof(m));
} 
```

使用 gcc 编译此源时，我收到以下警告，我不明白：

```
$ gcc sizeof.c
sizeof.c:5: warning: declaration does not declare anything 
```

第 5 行是指枚举行。我希望在我创建的每条*Message中都使用该令牌。*我究竟做错了什么？我必须改变什么才能摆脱该警告？

我的 main 包含几个*sizeof()*调用。当我运行程序时，您可以在输出中看到整数的大小为 4，十六进制数的大小为 4，但 typedef struct Message 的大小也为 4：

```
$ ./a.out
sizeof(int): 4
sizeof(0x123456): 4
sizeof(Message): 4
sizeof(m): 4 
```

这让我很困惑。为什么*Message*的大小为 4，尽管它在枚举中包含一个整数和一个整数，每个整数的大小为 4。如果*sizeof(Message)*至少为 8，这对我来说是合乎逻辑的。

但是为什么只有4个？如何以字节为单位获得*消息*的实际大小？或者这真的是真实尺寸吗？如果是这样，为什么？

在 C 和 C++ 之间获取*消息*的大小有区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T12:07:35.560

枚举实际上不需要任何空格，它只是编译器通过名称识别一组文字数字的一种方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T12:33:43.867

您没有声明任何内容：

```
enum {token=0x123456}; 
```

您的声明类似于：

```
typedef struct {
    int size; 
    int; 
} Message; 
```

如果你这样声明你的结构：

```
typedef struct {
    int size; 
    enum {token=0x123456} e; 
} Message; 
```

将有两个字段，但`e`不会被初始化为任何内容。您需要为每个实例手动设置它：`message.e=token`.

实现您想要的正确方法是在 C++ 中使用构造函数：

```
struct Message {
    int size; 
    int token;
    Message() : token(0x123456) {}; 
}; 
```

或 C++11 中的非静态数据成员初始化器：

```
struct Message {
    int size; 
    int token=0x123456;
}; 
```

无法在 C 中初始化结构声明中的字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T12:08:18.213

第 5 行没有声明任何枚举类型的变量。所以编译器做它唯一能做的事：忽略它。

如果要在结构中创建该类型的成员，请编写类似

```
enum  {token=0x123456} thetoken; 
```

但请注意，该字段只能有一个有效值，这是您想要的吗？

**编辑**：
哦，回答你的另一个问题：编译为 C 或 C++ 时，我看不到输出的差异。但是如何编写结构定义是有区别的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T12:11:38.193

```
typedef struct {
    int size; 
    enum YouShouldDeclareAName {token=0x123456}; 
} Message; 
```

您的枚举是您的消息结构的子类/子类型，因此绑定到类而不是对象。就像一个命名空间。您不会使用它创建任何变量。将其更改为：

```
typedef struct {
    int size; 
    enum YouShouldDeclareAName {token=0x123456} token; 

    //or
    YouShouldDeclareAName token2;
} Message; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T12:06:10.193

您已经定义了一个`Message::token`在所有对象之间共享的常量。由于它是共享的，它不计入单个对象的大小。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-14T12:14:39.460

正如其他人的回答所指出的那样，您已经声明了一个枚举**类型**，您只是碰巧在结构内而不是在全局范围内进行了操作。没有什么可存储的，所以它不使用内存。

现在，如果您要在该结构中声明您的枚举实例...

```
typedef struct {
    int size; 
    enum {token=0x123456} e; 
} Message;

int main(int argc, char * argv[])
{
    Message m;
    m.size = 30;
    printf("sizeof(m): %d\n",sizeof(m));
}

sizeof(m): 8
Press any key to continue . . . 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T13:04:21.493

第 5 行：

```
enum {token=0x123456}; 
```

这一行没有定义任何`enum`变量，它是一个声明，因此你的编译器抱怨第 5 行说它只是一个声明。

正确的用法应该是：

```
enum {xyz=5}  enum_variable_name; 
```

只有这样编译器才会为此分配空间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T12:12:34.997

就像类、函数、枚举一样，静态成员不存储在对象空间中！*

# visual-studio-2010 - 有没有办法将 url 添加为 Visual Studio 项目的链接

> ID：11032669
> 
> 赞同：3
> 
> 时间：2012-06-14T12:04:09.493
> 
> 标签：visual-studio-2010, url

有没有办法将 URL 添加到 Visual Studio 项目或解决方案，以便在单击它时将网页作为 VS 中的选项卡式文档打开？

（我希望将 MantisBT 网页作为 Visual Studio 中的选项卡，这似乎是最好的方法）。

如果我在项目文件夹中创建一个链接作为快捷方式，或者通过将页面从 IE 拖动到该文件夹​​来创建链接，则该文件将作为 XML 文件打开。Open with Browser 在 VS 外部打开它。

如果我打开 .url，我可以 CTRL+单击链接中的 url，它会将页面作为选项卡式项目打开。有没有办法一步完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T02:01:05.963

我认为在播放按钮中，您有一些选项，例如页面检查器，也许您可​​以尝试一下？Ctrl+Shift+W 是快捷键

# apache-camel - Apache Camel：交付尝试后筋疲力尽->如何调试？

> ID：11032671
> 
> 赞同：7
> 
> 时间：2012-06-14T12:04:24.207
> 
> 标签：apache-camel

目前，我正在使用 Camel 作为编排引擎（它接收 HTTP POST 请求，这导致 Camel 代码向某些外部服务器发送 HTTP POST/PUT/GET 请求，直到最后 Camel 发送（希望）200 OK 回第一个 HTTP POST 请求的发起者）。

加载工具 <-> Camel 代码 <-> 外部服务器

我正在使用骆驼 2.9.2。

为了检查性能，我使用 httperf 向我们的 Camel 实现发送大量 HTTP POST 消息。当 httperf 配置为以每秒 100 个请求的速率发送请求时，我经常看到以下错误：

> 错误 (MessageId: ID-wpm-seal-59304-133965736935 6-0-3482128 on ExchangeId: ID-wpm-seal-59304-1339657369356-0-3482126) 传递失败。尝试交付后用尽：1 抓到：org.apache.camel。component.http.HttpOperationFailedException：HTTP 操作调用[http://anExternalServer.com:7000/M2M/resources/m2mSubscription](http://anExternalServer.com:7000/M2M/resources/m2mSubscription) ?subscriptionId=32477000000 失败，状态码：500

我想知道如何调试以查看导致此错误的原因...

还有这意味着什么：1）这是否意味着骆驼无法进一步处理请求？2）这是否意味着Camel试图向外部服务器发送HTTP消息，但是该服务器没有回复/接受请求（可能由于过载而无法接受请求）？-> 这对我来说看起来最合乎逻辑，但是wireshark 跟踪显示Camel 没有尝试建立到该外部服务器的TCP 连接......？！3) 或...

也许我遇到了 TCP 连接数的限制？还是线程？

这是完整的错误转储：

> DefaultErrorHandler 错误 (MessageId: ID-wpm-seal-59304-133965736935 6-0-3482128 on ExchangeId: ID-wpm-seal-59304-1339657369356-0-3482126) 的传递失败。尝试交付后用尽：1 抓到：org.apache.camel。component.http.HttpOperationFailedException：HTTP 操作调用[http://anExternalServer.com:7000/M2M/resources/m2mSubscription](http://anExternalServer.com:7000/M2M/resources/m2mSubscription) ?subscriptionId=32477000000 with statusCode：500 org.apache.camel.component.http.HttpOperationFailedException：HTTP 操作调用[http失败://anExternalServer.com:7000/M2M/resource](http://anExternalServer.com:7000/M2M/resource) 52）[骆驼核心-2.9。2.jar:2.9.2] 在 org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)[camel-core-2.9.2.jar:2.9.2] 在 org.apache.camel.processor .DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.2.jar:2.9.2] at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:304)[camel- core-2.9.2.jar:2.9.2] at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.2.jar:2.9.2] at org.apache .camel.processor.Pipeline.process(Pipeline.java:117)[camel-core-2.9.2.jar:2.9.2] at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)[ camel-core-2.9.2.jar:2.9.2] 在 org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:42:48.230

您应该查看 http 服务器端，因为 HTTP 错误代码 500 是服务器上的故障，而不是您使用 Camel 的客户端。

# jquery - 如何取消选中未选中的框下方的框？

> ID：11032679
> 
> 赞同：0
> 
> 时间：2012-06-14T12:04:52.597
> 
> 标签：jquery, checkbox

我列出了一些带有复选框的产品。某些产品会获得免费赠品，这些赠品会作为单独的产品列在产品下方。当您选中一个框时，我还需要检查底部的产品，并反过来进行检查，这样当第一个产品未被选中时，下面的产品就会被取消选中。我有第一个工作，但不能扭转这个过程。

```
<script>   
var $j = jQuery.noConflict();
// wrap this code in a "DOM ready" handler
$j(function() {
// listen to change event instead (to support keyboard driven interaction)
$j('input:checkbox').change(function() {   
    if (this.checked) {

        var original = +$j(this).attr("id");
        var temp = original + 1;

        var follower = $j("#" + temp);         

if (original  %2 != 0){
        follower.attr("checked","checked");
}
else
{
  original.removeAttr("checked");   
}                           
    }
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:10:04.687

您可以使用 jquery .next() 来获取下一个复选框，而不是在 dom 中查询 id

[尝试下一个文档 Jquery](http://api.jquery.com/next/)的此链接。（）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:10:29.647

您将不得不像这样找到下一个复选框：

```
var temp = original.nextAll("input[type=checkbox]:first"); 
```

# c# - “ObjectContext”不包含“Entry”的定义，也没有扩展方法“Entry”

> ID：11032683
> 
> 赞同：5
> 
> 时间：2012-06-14T12:05:02.083
> 
> 标签：c#, .net, entity-framework-4.1

我`EntityModel`使用. `4.3`_`NuGet`

现在我想改变我的`EntityObject.State`，但它找不到`.Entry()`方法。

当前状态为`Deleted`。

这就是我想要做的：

`someObjectContext.Entry(someEntityObject).State = EntityState.Unchanged;`

添加了对 EntityFramework 和 EntityFramework.Extended 的引用。

那么，我错过了什么？

**编辑**

我的`NuGet`输出：

```
PM> Install-Package EntityFramework -Version 4.3.1
'EntityFramework 4.3.1' already installed.
Data already has a reference to 'EntityFramework 4.3.1'. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T12:13:14.167

您正在使用[`ObjectContext`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)，它没有该`Entry`方法。据我所知，您必须使用EF ~~4.3~~ 4.1（更正感谢 Slauma）中添加的附加方法[`DbContext`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)的包装器- 还有一种方法可以在需要时从中提取：`ObjectContext`~~`ObjectContext``DbContext`~~

 ~~```
ObjectContext context = ((IObjectContextAdapter)yourDbContext).ObjectContext; 
```

这是另一种方式：

```
DbContext context = new DbContext(yourObjectContext, true); //or false, depends what you want 
```

这是构造函数的[链接](http://msdn.microsoft.com/en-us/library/gg696505%28v=vs.103%29.aspx)。~~

# android - 不允许 TextView 填充整个 Column

> ID：11032684
> 
> 赞同：2
> 
> 时间：2012-06-14T12:05:02.953
> 
> 标签：android, layout, tablelayout

我正在开发一个 Android 应用程序。

我有这个布局：

![在此处输入图像描述](../Images/59113996fc2b625caa45e5a3c0971cd3.png)

我不想让 textview 填满一整列。正如您在上一张图片中看到的那样，有一个被蓝色矩形包围的 TextView（实际上已被选中）。这是创建该 TableRow 的 XML 代码：

```
<TableRow>

    <TextView
        android:id="@+id/txtFactLoc"
        android:layout_span="2"
        android:gravity="center_vertical|right"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:text="@string/layout_fac_location"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/factLocVal"
        android:layout_span="4"
        android:gravity="center_vertical"
        android:paddingLeft="10dp"
        android:layout_height="match_parent"
        android:background="@color/textview_background"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtConFactLoc"
        android:gravity="center_vertical"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:text="@string/layout_confirm"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <RadioGroup
        android:id="@+id/rGroupFactLoc"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/rFactLocYes"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="@string/layout_yes" />

        <RadioButton
            android:id="@+id/rFactLocNo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/layout_no" />

    </RadioGroup>

</TableRow> 
```

位于具有八列的 TableLayout 内。这是 TableLayout 的开始：

```
<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_margin="10dp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:shrinkColumns="*"  
        android:stretchColumns="*">

        <TableRow>
        <TextView
            android:id="@+id/txtPONo"
            android:layout_weight=".125"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="@string/layout_po_no"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/pONoVal"
            android:layout_weight=".125"
            android:layout_width="0dip"
            android:paddingLeft="10dp"
            android:layout_height="match_parent"
            android:background="@color/textview_background"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtIndNo"
            android:layout_weight=".125"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="@string/layout_ind_no"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/indNoVal"
            android:layout_weight=".125"
            android:layout_width="0dip"
            android:paddingLeft="10dp"
            android:layout_height="match_parent"
            android:background="@color/textview_background"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtTimeIn"
            android:layout_weight=".1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="@string/layout_time_in"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/timeInVal"
            android:layout_weight=".15"
            android:layout_width="0dip"
            android:paddingLeft="10dp"
            android:layout_height="match_parent"
            android:background="@color/textview_background"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/txtTimeOut"
            android:layout_weight=".1"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="@string/layout_time_out"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/timeOutVal"
            android:layout_weight=".15"
            android:layout_width="0dip"
            android:paddingLeft="10dp"
            android:layout_height="match_parent"
            android:background="@color/textview_background"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </TableRow> 
```

一些 textViews 有背景颜色。正如你所看到的，它们都填满了它的列，我不希望这样，因为这个表单看起来很丑。

如何更改 TextView 的宽度？如果我设置了 android:layout_span="2" 我不能改变它的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:19:47.883

使用 android:stretchColumns，您可以决定允许拉伸哪些列（放在 TableLayout 标签中）。

```
android:stretchColumns="0"
android:stretchColumns="0,1,2"
android:stretchColumns="*" 
```

# asp.net - 在 DataGid 中为单个记录显示 2 行

> ID：11032687
> 
> 赞同：0
> 
> 时间：2012-06-14T12:05:07.450
> 
> 标签：asp.net, datagrid

我在 DataGrid 中有以下字段

```
4 绑定归档，
1 下拉菜单，
3 按钮

```

现在我想在一行中显示绑定字段，在第二行中显示下拉菜单和按钮。由于某些原因，我只能使用 Datagrid。我不能使用任何其他控制。

那么如何在两行中显示数据？

我的代码如下：

```
<asp:BoundColumn DataField="Market"> </asp:BoundColumn> 
<asp:BoundColumn DataField="DrawPrice" H> </asp:BoundColumn>
<asp:BoundColumn DataField="Name2"> </asp:BoundColumn> 
<asp:BoundColumn DataField="AwayPrice"> </asp:BoundColumn> 
<asp:TemplateColumn> 
    <ItemTemplate> 
        <asp:DropDownList ID="DropDownList1" runat="server"></asp:DropDownList>
        <asp:LinkButton ID="btn1" runat="server" CommandName="btn1"/> 
        <asp:LinkButton ID="btn2" runat="server" CommandName="btn2"/> 
        <asp:LinkButton ID="btn3" runat="server" CommandName="btn3"/> 
    </ItemTemplate> 
</asp:TemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:31:03.493

您可以将 DataGrid 中的一个单元格用作具有 2 行和 2 列的 HTML 表格的容器，第二行跨越两列。

您可以通过使用 TemplateColumn 来实现这一点，您可以在其中放置表格的 HTML。还为 3 个数据字段添加`<%# %>`绑定块（在同一个中`TemplateColumn`）。

# jquery - jQuery 手风琴仅在单击时打开和关闭

> ID：11032689
> 
> 赞同：0
> 
> 时间：2012-06-14T12:05:11.867
> 
> 标签：jquery

如何确保仅在单击 h3 时手风琴打开和关闭？当您单击任何 h3 时，它会立即关闭。请看下面的代码：

```
function accordion() {
    $('h3').click(function () {
        $('.box2').slideUp('normal');
        if ($(this).next().is(':hidden') == true) {
            $(this).next().slideDown('normal')
        }
    })
}
$(document).ready(function () {
    $(window).on("resize", function () {
        if ($(this).width() < 480) {
            accordion();
        } else if ($(this).width() > 480) {
            $('.box2').fadeIn(2000)
        }
    })
}); 
```

# git - 部署和更新网站

> ID：11032692
> 
> 赞同：2
> 
> 时间：2012-06-14T12:05:17.150
> 
> 标签：git, deployment, localhost

我更喜欢将我的项目放在本地主机中`http://domain.local`

另外，我使用 Git 将文件推送到远程服务器。问题是我不想在每次更新网站时都在服务器上编辑域名。

我认为这不是`http://domain.com`在本地主机中使用的正确方法。克服这个问题的正确方法是什么？

需要注意的是，有子域，例如`images.domain.local`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:13:24.203

不要`$_SERVER['HTTP_HOST']`在您选择的语言/环境中对域、使用或任何等效项进行硬编码，以让您的应用程序动态地确定它正在运行的域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:22:08.597

大多数 Web 框架将开发设置和生产服务器的配置存储在单独的文件中。不要硬编码域名并使用这种标准机制。您可以通过读取机器主机名等使用 git commit 钩子在配置之间进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:14:04.950

*   如评论中所述，您尝试使用尽可能多的相对路径。
*   您还应该尝试拥有不同的环境（生产环境不应该与您的 git master 链接），从 git 部署后可以跟随一个配置生产环境的脚本（如果您想拥有一个状态，请查看 phing艺术过程）
*   如果您仍想对您的提交做一些事情（或从生产中拉取请求），您可以使用 git hooks [http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

# jquery - 无法停止 url 默认事件

> ID：11032697
> 
> 赞同：0
> 
> 时间：2012-06-14T12:05:26.063
> 
> 标签：jquery, html

这是我正在使用的功能：

```
$('.urlz').click(function (event) {
    event.preventDefault();
    var url = this.href;
    log('Url of link : ' + url.toString());
    if (url.indexOf("bridge.asp") < 0) {
        var site_domain = fnGetDomain(url);
        //  window.location.href=$(this).attr('href');
        return false;
    }
}); 
```

这是元素..

```
<a href="bridge.asp?sitename=webcing" target="_blank" class="urlz">Visit The Site</a> 
```

会不会是在我的功能之前触发了某些东西，我已经在 document.ready 中拥有了该功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:07:44.580

`return false`在错误的位置...它目前在`if`语句中...将它移到最后...

```
$('.urlz').click(function(event){
  event.preventDefault();
  var url=this.href;
  log('Url of link : '+url.toString());
  if(url.indexOf("bridge.asp")<0){
    var site_domain=fnGetDomain(url);
    //  window.location.href=$(this).attr('href');
  }
  return false;   
}); 
```

# iphone - 如何在 320width 中构建 2UIDatepicker

> ID：11032698
> 
> 赞同：0
> 
> 时间：2012-06-14T12:05:29.163
> 
> 标签：iphone, objective-c, uipickerview, uidatepicker

请检查随附的屏幕截图。我无法构建此屏幕。

有什么办法可以发展吗？

![在此处输入图像描述](../Images/c12a9478bde23231264e2c6d6f732afb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:25:42.417

不是两个`UIDatePicker`，而是一个[`UIPickerView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)有两个组件。

然后他们用一组日期填充组件。

# c# - linq to sql left join，需要检查右表是否为空

> ID：11032700
> 
> 赞同：6
> 
> 时间：2012-06-14T12:05:40.853
> 
> 标签：c#, linq, linq-to-sql

我在 linq to sql 中进行左连接，所以我的问题是在选择正确的表字段时，我正在检查每个字段，无论连接的对象是否为空，这是正确的方法吗？还是有其他方法可以做到这一点？我的查询就像

```
from u in user
join x in employeee on u.id equals x.userId
      into ux from ujoinx in ux.DefaultIfEmpty()
join y in department on x.id equals y.employeeId 
      into xy from xjoiny in xy.DefaultIfEmpty()
select new {
    EmployeeSal = ujoinx!=null?ujoinx.employeeSal:0, // see checkig for null
    EmployeeTax = ujoinx!=null?ujoinx.employeeTax:0, // in this 3 lines
    UserName = u.username,
    DeptName = xjoiny!=null?xjoiny.name:""          //is this a correct way ?
} 
```

查询正确地产生了答案，但如果我不检查这几个字段是否为空，它就会抛出`object reference not set.....error`。这到底是`DefaultIfEmpty()`做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:26:50.580

你所做的是正确的。

从[msdn](http://msdn.microsoft.com/en-us/library/bb360179.aspx)， DefaultIfEmpty 返回：

> 如果 source 为空，则包含 TSource 类型的默认值的 IEnumerable<T> 对象；否则，来源。

换句话说，当集合为空时，它将返回 T 的默认值。引用类型的默认值为 null ——这就是为什么在选择 DeptName 时必须检查 null 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:22:10.243

在这种情况下，DefaultIfEmpty 在评估的左侧为您提供了一个空对象。因此，尝试调用 ujoinx.employeeSal 将返回未设置对象引用，因为 ujoinx 为空。

# c# - WPF TabItem Style - 更改标题文本后重绘选项卡

> ID：11032701
> 
> 赞同：0
> 
> 时间：2012-06-14T12:05:43.203
> 
> 标签：c#, wpf, wpf-controls

为了制作我自己的 TabControl， 我使用了[如何在 WPF 选项卡控件中创建梯形选项卡](https://stackoverflow.com/questions/561931/how-to-create-trapezoid-tabs-in-wpf-tab-control)的优秀帖子。

我试图弄清楚如何在更改标题文本后更改选项卡宽度计算？我从“新组”的标题文本开始，在用户在某个 TextBox 中输入文本后，我希望该文本出现在标题中，但现在 TabItem 宽度不适合新文本。

如何重新计算宽度？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:50:42.690

尝试使用[这种风格](http://www.wpfblogger.com/post/BreadCrumb-TabControl-Style-for-WPF-40.aspx)。它重新计算标题宽度以适合名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:51:47.930

好吧，我没有找到任何解决方案，所以我做得很脏。我只是这样做了

```
TabItem.Style = null;
TabItem .Style = (Style)FindResource("Tabitem112"); 
```

所以基本上，我只是放弃了风格并重新应用它。它正在工作。我希望看到更专业的方法。

# sql - 在 PostgreSQL 上捕获已删除的行

> ID：11032710
> 
> 赞同：1
> 
> 时间：2012-06-14T12:06:14.407
> 
> 标签：sql, postgresql, import

我使用 Microsoft SQL Server，我的客户使用 PostgreSQL。

我从客户端数据库（PostgreSQL）获取数据到我的数据库（SQL Server）的最后一次刷新日期。例如：

```
select * 
from tablename 
where date > '2012-06-13' 
```

..对于今天的复制，明天我将再次运行它：

```
 select * 
 from tablename 
 where date > '2012-06-14' 
```

我每天都运行这个。但有时客户端已经删除了一些行。在这种情况下，我也需要了解他们。

有一个独特的`id`列。客户没有发给我 deleted `id`。我必须抓住那些——但是怎么做？我每周一次将所有 id 列从客户端加载到我这边的一个单独的表中，然后我删除客户端数据库上不存在但存在于我的数据库上的那个。它不适用于大桌子。我不断收到超时错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:25:43.950

您可能想要查看的一件事（显然，您所做的任何事情都需要在您的客户端捕获东西）是： http: [//pgfoundry.org/projects/tablelog/](http://pgfoundry.org/projects/tablelog/)

我在几个项目中使用过它，它非常适合在表格中捕获历史信息以及它们发生了什么。这样您就不必编写自己的触发器。

# iphone - 选择与 target="_blank" 的链接时 UIWebView 崩溃

> ID：11032713
> 
> 赞同：1
> 
> 时间：2012-06-14T12:06:27.447
> 
> 标签：iphone, jsp, uiwebview

我正在使用 UIWebView 在我的应用程序中显示网页。但是当使用 target="_blank" 的超链接被选中时，应用程序会自动终止。有什么办法可以避免这种崩溃。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:59:15.190

经过研究，我发现如果我们将`a`标签的目标设置为`_self`我们可以轻松避免崩溃。但是仍然有限制，因为我们可以在这个方法中应用 Javascript：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

所以之前，在加载页面之前选择这个链接会使应用程序崩溃，因为没有应用 Javascript。

如果有人知道解决方案，请指导我。

谢谢

# asp.net - Android 浏览器退出 ASP.NET 网站

> ID：11032721
> 
> 赞同：0
> 
> 时间：2012-06-14T12:06:55.610
> 
> 标签：asp.net, session, logout, android-browser

我有一个与摩托罗拉平板电脑（Android 3.2）一起使用的 ASP.NET Webforms 应用程序，Wenn 用户导航它经常注销。

在我的日志文件中，我找不到任何异常，我使用 FormsAuthenticationTicket 登录用户。

知道如何解决或解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:49:15.033

问题出在日期时间设置中，我将日期时间设置切换为自动，将时区切换为手动。

现在好像没事了。

# c# - 无法隐式转换类型'IEnumerable '到'布尔'

> ID：11032724
> 
> 赞同：0
> 
> 时间：2012-06-14T12:07:02.973
> 
> 标签：c#, .net, linq, compiler-errors, linq-to-xml

我想找到孩子们有一个具体的attribute.value的Xelement attribute.value。

```
string fatherName =  xmlNX.Descendants("Assembly")
                           .Where(child => child.Descendants("Component")
                               .Where(name => name.Attribute("name").Value==item))
                           .Select(el => (string)el.Attribute("name").Value); 
```

我怎样才能得到attribute.value？它说什么是布尔值？

**编辑** 最初我有以下 XML：

```
<Assembly name="1">
  <Assembly name="44" />
  <Assembly name="3">
     <Component name="2" />
  </Assembly>
  </Assembly> 
```

我需要获取其子项（XElement）具有特定属性的attribute.value 在此示例中，我将获取字符串“3”，因为我正在搜索子项的父项，其中attribute.value ==“2”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:14:48.307

因为嵌套`Where`子句的编写方式。

内部子句读取

```
child.Descendants("Component").Where(name => name.Attribute("name").Value==item) 
```

这个表达式有一个类型的结果`IEnumerable<XElement>`，所以外部子句读取

```
.Where(child => /* an IEnumerable<XElement> */) 
```

但是`Where`需要一个类型的参数，`Func<XElement, bool>`在这里你最终会传入一个`Func<XElement, IEnumerable<XElement>>`-- 因此错误。

我没有提供更正的版本，因为从给定的代码中您的意图根本不清楚，请相应地更新问题。

**更新：**

看起来你想要这样的东西：

```
xmlNX.Descendants("Assembly")
     // filter assemblies down to those that have a matching component
     .Where(asm => asm.Children("Component")
                     .Any(c => c.name.Attribute("name").Value==item))
     // select each matching assembly's name
     .Select(asm => (string)asm.Attribute("name").Value)
     // and get the first result, or null if the search was unsuccessful
     .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:31:55.927

我想你想要

```
string fatherName =  xmlNX.Descendants("Assembly")
                           .Where(child => child.Elements("Component").Any(c => (string)c.Attribute("name") == item))
                           .Select(el => (string)el.Attribute("name")).FirstOrDefault(); 
```

# php - 每次用户访问页面时如何显示数字1

> ID：11032729
> 
> 赞同：0
> 
> 时间：2012-06-14T12:07:26.873
> 
> 标签：php

在标题中显示正确的数字时，我遇到了问题。当用户提交页面并导航到当前页面时，我希望出现以下标题：

创建问题和答案：会话 (AAA) 1 / 3

正如您在上面看到的，它以数字 1 开头，因为用户正在创建他们的第一个会话。我遇到的问题是它从不显示数字 1，它只是继续在下面显示：

创建问题和答案：会话 (AAA) 3 / 3

它一直显示不正确的数字 3，就好像用户第一次进入当前页面然后很明显他们不是从会话 3 开始，而是从会话 1 开始，然后是 2，然后是 3。

所以我的问题是如何在用户第一次进入页面时显示“SESSION 1”？

以下是我拥有的当前代码：

```
 if(isset($_POST['sessionNum'])){
                //Declare my counter for the first time

                $_SESSION['initial_count'] = $_POST['sessionNum'];
                $_SESSION['sessionNum'] = $_POST['sessionNum'];

        }

    if (!isset($_SESSION['sessionCount'])) {
        $_SESSION['sessionCount'] = 1;
    }
    else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
        ++$_SESSION['sessionCount'];
    }

    $sessionMinus =  $_SESSION['sessionCount'];

...

    <h1>CREATING QUESTIONS AND ANSWERS: SESSION (<?php echo $_SESSION['id'] ?>) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:24:44.913

第一次设置时：

```
//Declare my counter for the first time
$_SESSION['initial_count'] = $_POST['sessionNum']; 
```

设置为 1！因为在那之后`isset`将返回true，所以它不会被设置为1......

```
//Declare my counter for the first time
$_SESSION['initial_count'] = 1; 
```

# c# - 在 vb.net 中设置和获取 SignalR 调用者属性

> ID：11032730
> 
> 赞同：1
> 
> 时间：2012-06-14T12:07:28.200
> 
> 标签：c#, asp.net, vb.net, signalr

在[SignalR Chat 示例](https://github.com/SignalR/SignalR/blob/master/samples/SignalR.Hosting.AspNet.Samples/Hubs/Chat/Chat.cs)中，调用者属性是使用代码设置的；

```
Caller.name = newUser.Name; 
```

然后稍后，读取此属性；

```
string name = Caller.name; 
```

我有自己的 SignalR 项目，但这个是 vb.net，当我做相同的设置和获取调用者属性时，它不起作用

```
Public Sub SetCaller()
    Caller.name = "tim"
End Sub

Public Sub GetCaller()
    Dim name as string = Caller.name
End Sub 
```

GetCaller() 抛出“从类型 'Task(Of Object)' 类型转换为类型 'String' 无效”的错误。

完全相同的代码，但在 c# 中工作正常；

```
public void SetCaller(){
    Caller.name = "tim";
}

public void GetCaller(){
    string name = Caller.name;
} 
```

我的代码在 vb.net 中有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:24:47.007

不，您在 VB.NET 的语法上没有做错任何事情。我唯一能想到的就是使用 IDE 检查 Caller 是什么类型以及 Caller.name。在 VB.NET 中，它不区分大小写，并且许多命名空间可能会自动导入，而无需您在文件顶部特别列出它们，因此在 VB 中，它很可能使用与您预期不同的类型。

# c# - 如何检查 Azure Blob 文件是否存在

> ID：11032735
> 
> 赞同：24
> 
> 时间：2012-06-14T12:07:44.590
> 
> 标签：c#, azure-storage, azure-blob-storage

我想检查 Azure Blob 存储中是否存在特定文件。是否可以通过指定文件名进行检查？每次我得到文件未找到错误。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-20T20:55:00.733

```
var blob = client.GetContainerReference(containerName).GetBlockBlobReference(blobFileName);

if (blob.Exists())
 //do your stuff 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-14T12:13:14.493

此扩展方法应该可以帮助您：

```
public static class BlobExtensions
{
    public static bool Exists(this CloudBlob blob)
    {
        try
        {
            blob.FetchAttributes();
            return true;
        }
        catch (StorageClientException e)
        {
            if (e.ErrorCode == StorageErrorCode.ResourceNotFound)
            {
                return false;
            }
            else
            {
                throw;
            }
        }
    }
} 
```

用法：

```
static void Main(string[] args)
{
    var blob = CloudStorageAccount.DevelopmentStorageAccount
        .CreateCloudBlobClient().GetBlobReference(args[0]);
    // or CloudStorageAccount.Parse("<your connection string>")

    if (blob.Exists())
    {
        Console.WriteLine("The blob exists!");
    }
    else
    {
        Console.WriteLine("The blob doesn't exist.");
    }
} 
```

[http://blog.smarx.com/posts/testing-existence-of-a-windows-azure-blob](http://blog.smarx.com/posts/testing-existence-of-a-windows-azure-blob)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-05T22:15:49.663

使用更新的 SDK，一旦您拥有 CloudBlobReference，您就可以在您的引用上调用 Exists()。

**更新**

相关文档已移至[https://docs.microsoft.com/en-us/dotnet/api/microsoft.windowsazure.storage.blob.cloudblob.exists?view=azurestorage-8.1.3#Microsoft_WindowsAzure_Storage_Blob_CloudBlob_Exists_Microsoft_WindowsAzure_Storage_Blob_BlobRequestOptions_Microsoft_WindowsAzure_Storage_OperationContext_](https://docs.microsoft.com/en-us/dotnet/api/microsoft.windowsazure.storage.blob.cloudblob.exists?view=azurestorage-8.1.3#Microsoft_WindowsAzure_Storage_Blob_CloudBlob_Exists_Microsoft_WindowsAzure_Storage_Blob_BlobRequestOptions_Microsoft_WindowsAzure_Storage_OperationContext_)

**我使用 WindowsAzure.Storage v2.0.6.1 的实现**

```
 private CloudBlockBlob GetBlobReference(string filePath, bool createContainerIfMissing = true)
    {
        CloudBlobClient client = _account.CreateCloudBlobClient();
        CloudBlobContainer container = client.GetContainerReference("my-container");

        if ( createContainerIfMissing && container.CreateIfNotExists())
        {
            //Public blobs allow for public access to the image via the URI
            //But first, make sure the blob exists
            container.SetPermissions(new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Blob });
        }

        CloudBlockBlob blob = container.GetBlockBlobReference(filePath);

        return blob;
    }

    public bool Exists(String filepath)
    {
        var blob = GetBlobReference(filepath, false);
        return blob.Exists();
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-16T17:58:10.980

使用`ExistsAsync`CloudBlockBlob 的方法。

```
bool blobExists = await cloudBlobContainer.GetBlockBlobReference("<name of blob>").ExistsAsync(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-15T21:44:29.460

使用**Microsoft.WindowsAzure.Storage.Blob 版本 4.3.0.0**，以下代码应该可以工作（此程序集的旧版本有很多重大更改）：

使用容器/blob 名称和给定的 API（现在微软似乎已经实现了这个）：

```
return _blobClient.GetContainerReference(containerName).GetBlockBlobReference(blobName).Exists(); 
```

使用 blob URI（解决方法）：

```
 try 
  {
      CloudBlockBlob cb = (CloudBlockBlob) _blobClient.GetBlobReferenceFromServer(new Uri(url));
      cb.FetchAttributes();
  }
  catch (StorageException se)
  {
      if (se.Message.Contains("404") || se.Message.Contains("Not Found"))
      {
          return false;
      }
   }
   return true; 
```

（如果 blob 不存在，获取属性将失败。脏，我知道 :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-19T22:05:00.197

使用新包`Azure.Storage.Blobs`

```
BlobServiceClient blobServiceClient = new BlobServiceClient("YourStorageConnectionString");
BlobContainerClient containerClient = blobServiceClient.GetBlobContainerClient("YourContainerName");
BlobClient blobClient = containerClient.GetBlobClient("YourFileName"); 
```

然后检查是否存在

```
if (blobClient.Exists()){
 //your code
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-02T02:56:35.017

使用最新版本的SDK，您需要使用[`ExistsAsync`](https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.storage.blob.cloudblob.existsasync?view=azure-dotnet-legacy#Microsoft_Azure_Storage_Blob_CloudBlob_ExistsAsync)方法，

```
public async Task<bool> FileExists(string fileName)
{
    return  await directory.GetBlockBlobReference(fileName).ExistsAsync();
} 
```

这是[代码示例](https://gist.github.com/sajeetharan/8067ec04b41344bbc1ee5c06e0282564)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-27T07:21:26.060

```
## dbutils.widgets.get to call the key-value from data bricks job

storage_account_name= dbutils.widgets.get("storage_account_name")
container_name= dbutils.widgets.get("container_name")
transcripts_path_intent= dbutils.widgets.get("transcripts_path_intent")
# Read azure blob access key from dbutils 
storage_account_access_key = dbutils.secrets.get(scope = "inteliserve-blob-storage-secret-scope", key = "storage-account-key")

from azure.storage.blob import BlockBlobService
block_blob_service = BlockBlobService(account_name=storage_account_name, account_key=storage_account_access_key)

def blob_exists():
        container_name2 = container_name
        blob_name = transcripts_path_intent
        exists=(block_blob_service.exists(container_name2, blob_name))
        return exists
blobstat = blob_exists()
print(blobstat) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-02T22:06:41.240

这个完整的例子可以提供帮助。

```
public class TestBlobStorage
{

    public bool BlobExists(string containerName, string blobName)
    {
        BlobServiceClient blobServiceClient = new BlobServiceClient(@"<connection string here>");

        var container = blobServiceClient.GetBlobContainerClient(containerName);

        var blob = container.GetBlobClient(blobName);

        return blob.Exists();

    }

} 
```

然后你可以在 main 中测试

```
 static void Main(string[] args)
    {

        TestBlobStorage t = new TestBlobStorage();

        Console.WriteLine("blob exists: {0}", t.BlobExists("image-test", "AE665.jpg")); 

        Console.WriteLine("--done--");
        Console.ReadLine();
    } 
```

**重要**我发现文件名区分大小写

# javascript - 选择 DIV 内部

> ID：11032738
> 
> 赞同：0
> 
> 时间：2012-06-14T12:07:51.533
> 
> 标签：javascript, jquery

假设我有一个这样的列表：

```
<ul class="list">
<li><span class="pos"><div class="txt_pos">1</div></li>
<li><span class="pos"><div class="txt_pos">2</div></li>
<li><span class="pos"><div class="txt_pos">3</div></li>
<li><span class="pos"><div class="txt_pos">4</div></li>
<li><span class="pos"><div class="txt_pos">5</div></li>
</ul> 
```

和我的 JS：

```
$(".list span.pos").each(function(i) {
    var newOne = i;
    newRank = getNth(newOne);

    $("> .txt_pos").slideToggle('slow');
    $(this).text(newRank);   

    $("> .txt_pos").slideToggle('slow');                        
}); 
```

我如何让它选择每一个`li`，因为现在，它正在一次执行每个列表项。我正在尝试选择`.pos`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:10:05.203

用于`.children()`选择孩子。

```
$(this).children('.txt_pos') 
```

或者，如果您想选择`li` *（您似乎在说两者）*，请使用`.parent()`.

```
$(this).parent() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:10:52.880

```
$(".list span.pos").each(function(i) {
        var newOne = i;
        newRank = getNth(newOne);

        $(this).children('.txt_pos').slideToggle('slow');
        $(this).text(newRank);   

        $(this).children('.txt_pos').slideToggle('slow');  //not sure why you're doing this again?
)}; 
```

# tomcat - Tomcat的BIO Connector和NIO Connector有什么区别？

> ID：11032739
> 
> 赞同：57
> 
> 时间：2012-06-14T12:07:53.643
> 
> 标签：tomcat, nio

我想知道tomcat NIO 连接器的内部结构。当我们创建一个实现 CometProcessor 的 servlet 时，线程究竟是如何使用的？每个连接仍然是一个线程吗？

从我读到的，对话是这样的

1.  客户端连接到 servlet

2.  Servlet 一直挂在连接上，直到有任何数据可供连接的客户端使用

3.  当数据准备好时，服务器写入 httpResponse 并刷新它。这实际上断开了连接？

4.  客户端发送另一个请求，服务器再次挂起..

当这种情况不断发生时，使用了多少线程？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-14T13:31:25.160

NIO 和 Comet 完全不相关：您可以混合搭配它们。

由于线程模型，使用 NIO（或 APR）连接器允许您用更少的线程处理更多请求。有关连接器之间的比较，请参阅[http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Connector_Comparison](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Connector_Comparison)。

Comet（和 Websocket）具有完全不同的调度模型，它需要不同的应用程序架构并以不同的方式实现更高的吞吐量。

您在问题中提出的场景是典型的阻塞每个请求一个线程的模型。在第 4 步中，Java BIO 连接器（它是 Tomcat 7 之前的默认连接器）将继续等待现有连接器上的其他请求——对于 keepalive HTTP 请求。如果客户端没有设置`Connection:close`上一个请求并且没有关闭连接，线程将挂起，直到达到keepalive超时。如果您使用 NIO 连接器，则线程将在发送响应后立即返回线程池，并且您不会在可能永远不会到达的 keepalive 请求上“浪费”线程。

Comet/Websocket 通过将消息传递给专门编写的 servlet（和可选的过滤器）以完全不同的方式工作，并且线程仅在有消息要发送或数据要写入时使用。

**更新 2016-08-19**

Tomcat 8.5 和 9.0 已经完全放弃了 BIO 连接器。这是因为许多新的 API 和技术（例如 Websocket）需要非阻塞语义，并且在阻塞 API 之上构建非阻塞服务非常非常困难。完成这项工作所需的代码使 Tomcat 代码的其余部分变得非常难看，等等，因此决定完全放弃 BIO 连接器。因此对于 Tomcat 8.5 及更高版本，只有 NIO、NIO2 和基于 APR 的连接器可用。

请注意，同样在 Tomcat 8.5 和 9.0 中，对*Comet*的支持已被删除。Comet 的使用应该全部替换为更标准的协议 Websocket。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T06:39:40.283

NIO 使用更少的线程，这意味着 tcp/ip 端口使用更少。

你知道端口是1到65534，所以我们可以说NIO可以达到比BIO更高的TPS（Transactions Per Second）

我测试了协议`:HTTP/1.1`和`org.apache.coyote.http11.Http11NioProtocol` 相同的 web 项目、相同的主机和相同的 server.xml 但协议。

使用 jmeter 进行测试。

我设置了1000个线程来运行请求，几分钟HTTP/1.1时，主机使用端口超过30000，TPS只有300！

当 org.apache.coyote.http11.Http11NioProtocol 时，使用端口的最大计数永远不会超过 3000，并且 tps 超过 1200！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-25T12:16:53.683

添加到这个讨论的后期 - 在阻塞 IO 和异步 NIO 之间的性能比较的上下文中 - 一个很好的阅读是 [“写服务器的旧方法是新的”](https://www.mailinator.com/tymaPaulMultithreaded.pdf)。总而言之，与 NIO 版本相比，每个连接模型的线程性能更好且易于编写——这与流行的看法相反。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-13T18:23:00.133

这里有两篇关于 NIO 连接器的好文章，以防有人考虑 Tomcat 中 BIO（请求处理必然接受线程）和 NIO（请求处理被传递到另一个工作线程）之间的差异。

*   [通过 Tomcat 专家站点的 NIO 连接器](http://www.tomcatexpert.com/blog/2011/06/17/nio-implementation-ajp-connector)
*   [Tomcat 连接器概述 (PDF)](http://events.linuxfoundation.org/sites/events/files/slides/Tomcat%20Connectors.pdf)

# bash - 长时间运行的 bash 脚本导致可用 PID 的资源泄漏

> ID：11032743
> 
> 赞同：2
> 
> 时间：2012-06-14T12:08:03.437
> 
> 标签：bash, scripting, memory-leaks

我目前正在阅读有关 Bash 脚本的更多详细信息，尤其是[这里](http://mywiki.wooledge.org/ProcessManagement)的流程管理。在“PIDs and parents”一节中，我发现了以下声明：

> 进程死亡后，进程的 PID 将永远不会被释放以供使用，直到父进程等待 PID 查看它是否结束并检索其退出代码。

因此，如果我正确理解这一点，如果我在 bash 脚本中启动一个进程，那么该进程将终止，该 PID 不能被任何其他进程使用。这是否意味着，如果我有一个长时间运行的脚本，它反复启动其他子进程但从不等待它们，我最终会出现资源泄漏，因为使用过的 PID 不会返回给系统?

如果我实际上是`wait`为了另一个进程，但是`wait`get 被陷阱取消了，怎么样。这种等待会以某种方式释放PID，还是在捕获陷阱后我必须再次等待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T01:20:34.650

幸运的是你不会。我不能告诉你确切的原因，但你可以很容易地测试它。运行以下脚本（以 停止`Ctrl+C`）：

```
#!/bin/bash

while true; do
    sleep 5 &
    sleep 1
done 
```

您可以看到6 多秒后没有[僵尸（泄漏的 PID）。](http://how-to.wikia.com/wiki/How_to_display_and_kill_zombie_processes)要查看一些僵尸，请使用以下 python 代码（同样，以 停止`Ctrl+C`）：

```
#!/usr/bin/python
import subprocess, time

pl = []
while True:
    pl.append(subprocess.Popen(["sleep", "5"]))
    time.sleep(1) 
```

6 秒后你会看到一个僵尸：

```
ps xaw | grep 'sleep'
...
26470 pts/2    Z+     0:00 [sleep] <defunct>
... 
```

我的猜测是 bash 确实会[等待](http://linux.die.net/man/2/wait)并存储使用或不使用内置等待命令的僵尸进程的结果。对于 python 脚本，如果您删除`pl.append`垃圾收集的部分，则会释放对象并再次收获僵尸。仅供参考，孩子可能永远不会成为僵尸（来自维基百科，[僵尸进程](http://en.wikipedia.org/wiki/Zombie_process)）：

> ...如果父进程通过将其处理程序设置为 SIG_IGN（而不是默认情况下简单地忽略信号）显式忽略 SIGCHLD 或设置了 SA_NOCLDWAIT 标志，则所有子退出状态信息将被丢弃，并且不会留下僵尸进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:13:17.973

您不必显式等待前台进程，因为运行脚本的 shell 会等待它们。在前一个过程完成之前，下一个过程不会开始。

如果您启动许多长时间运行的*后台*进程，您可以使用所有可用的 PID，但这受制于`ulimit -u`（可能是无限的）的限制。

# iphone - 应用程序在后台时如何处理套接字连接的事件？

> ID：11032745
> 
> 赞同：5
> 
> 时间：2012-06-14T12:08:10.050
> 
> 标签：iphone, ios, sockets, background, multitasking

即使应用程序在后台，我也想使用以下功能？

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent
 {
        case NSStreamEventHasBytesAvailable:
        {  NSLog(@"Event:NSStreamEventHasBytesAvailable");
            if (theStream == _inputStream) {

                NSLog(@"NSStreamEventHasBytesAvailable: on Input Stream");
                uint8_t buffer[1024];
                int len;

                while ([_inputStream hasBytesAvailable]) {
                    len = [_inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {

                            NSLog(@"server said: %@", output);
                             // to get local notification I am calling below method.
 [self scheduleNotification];       
                        }
                    }
                }
            }
            break;
        } 
```

上面的代码是在前台完成的。我已经对苹果文档中给出的所有更改进行了更改，以在后台模式下运行应用程序 - voip。我应该在 AppDelegate 方法中写什么？

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
} 
```

如何获取流：后台调用的handleEvent？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T13:17:47.563

不久前我正在处理类似的问题。一些重要的事情要记住：

*   后台“voip”功能仅适用于设备 - 不要使用模拟器对其进行测试
*   如果您的应用程序注册为 voip 应用程序并且不是真正的 voip 应用程序，您可能会（经过测试）被拒绝

因此，如果这不是 voip 应用程序，您实际上可能希望使用远程通知来直接提醒用户，而不是显示本地通知。我想这是您的应用程序通过 App Store 验证的唯一方法。

无论如何，SO 上的两个链接可能对您有所帮助：

[iOS 应用程序如何在后台无限期地保持 TCP 连接处于活动状态？](https://stackoverflow.com/questions/5840365/how-can-an-ios-app-keep-a-tcp-connection-alive-indefinitely-while-in-the-backgro)

我最终使用了 voip（就像你一样）并按照这里的建议播放无声音频循环 - 它有效。不确定这个静音音频循环是否仍然是必要的。

[当 iOS 应用程序确实进入后台时，TCP 和 UDP（使用多播）连接会发生什么情况](https://stackoverflow.com/questions/9047147/what-happens-to-tcp-and-udp-with-multicast-connection-when-an-ios-application)

请务必阅读[开发 VoIP 应用程序的技巧](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)和[技术说明 TN2277：网络和多任务处理](http://developer.apple.com/library/ios/#technotes/tn2277/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-23T12:08:07.503

使用此代码使您的应用程序在 ios 中保持活跃

```
var backgroundUpdateTask: UIBackgroundTaskIdentifier = UIBackgroundTaskIdentifier(rawValue: 0)

func endBackgroundUpdateTask() {
    UIApplication.shared.endBackgroundTask(self.backgroundUpdateTask)
    self.backgroundUpdateTask = UIBackgroundTaskIdentifier.invalid
}
func applicationWillResignActive(_ application: UIApplication) {
    self.backgroundUpdateTask = UIApplication.shared.beginBackgroundTask(expirationHandler: {
        self.endBackgroundUpdateTask()
    })
}
func applicationDidBecomeActive(_ application: UIApplication) {
    self.endBackgroundUpdateTask()

} 
```

我希望你能通过这个帮助获得成功

# android - 在android中倾斜显示edittext

> ID：11032746
> 
> 赞同：9
> 
> 时间：2012-06-14T12:08:13.317
> 
> 标签：android, android-widget, android-edittext

我有一个 EditText，它通常显示与屏幕 X 轴平行。我想倾斜地展示它（与水平轴成 45 度左右）。是否可以在 Android 中执行此操作。请指导我一个方向，以便我可以尝试。

在pawelzeiba的答案中获得两个链接后，我继续解决这个问题，但又卡住了，所以我提出了另一个问题。这是[链接](https://stackoverflow.com/questions/11035976/creating-oblique-edittext-in-android)。

正如 Gunnar Karisson 所说，在**Android 3.0中引入的****View**类中有一个**setRotation()**方法，但我不能使用它，因为我的应用程序应该适用于**Android 2.1**版本。

 ******所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:23:14.643

[EditText](http://developer.android.com/reference/android/widget/EditText.html)是[View](http://developer.android.com/reference/android/view/View.html)的间接子类，它有一个可以使用[setRotation(float)](http://developer.android.com/reference/android/view/View.html#setRotation%28float%29)设置的旋转字段：

> myEditText.setRotation(45.0f)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:33:49.833

经过长时间的研发，我通过创建自己的自定义编辑文本成功地解决了这个问题，它完全符合我的要求。

```
public class CustomEditText extends EditText {

private Animation rotateAnim;
public CustomEditText(Context context) {
        super(context);
}

public CustomEditText(Context context, AttributeSet attrs){
    super(context, attrs);
}

private void createAnim(Canvas canvas) {
        rotateAnim = new RotateAnimation(0, -45, 250, 50);
        rotateAnim.setRepeatCount(Animation.INFINITE);
        startAnimation(rotateAnim);
}

@Override
protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // creates the animation the first time
        if (rotateAnim == null) {
                createAnim(canvas);
        }

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:11:58.913

如果该`setRotation()`方法不适用于您正在使用的 API 级别，那么您最好的选择是创建您自己的 View 子类并实现一个`setRotation()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:14:25.153

您可以旋转视图，示例：

[Android中的垂直（旋转）标签](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android)
[是否可以在android的textview中垂直书写？](https://stackoverflow.com/questions/2888780/is-it-possible-to-write-vertically-in-a-textview-in-android)

但我不确定在编辑期间它与 EditText 的外观如何。******

# php - PhoneGap 中带有远程 PHP 文件和 MySQL 的登录页面

> ID：11032748
> 
> 赞同：0
> 
> 时间：2012-06-14T12:08:18.450
> 
> 标签：php, jquery, cordova

我正在创建一个 Android 应用程序，用户登录从该应用程序传递到远程 PHP 文件进行登录。我正在使用 JSON。代码如下

```
function loginToWebsite(){
 $.ajax({  
 url: "mywebsite/db.php",
  type: "POST",  
  data: "username=" + $("#emailid").val()+"&password=" + $("#password").val(),
datatype:"json",
  success: function(status)
  {  
    if(status.success == false) 
    {  

        $("#lable")  
            .attr('class', 'ui-state-error')  
            .html('<strong>ERROR</strong>: Your details were incorrect.<br />');  
    } 
    else { 
             $("#lable")  
            .attr('class', 'ui-state-highlight')  
            .html('<strong>PERFECT</strong>: You may proceed. Good times.<br />');  
        }  
  }  

}); 
```

所以我无法将 uid 和密码发送到远程 php 文件以执行。如果我的代码中有任何错误，请指导我。

# backbone.js - 如果我的响应具有特定标志，那么在 Backbone 中触发错误回调的正确方法是什么？

> ID：11032749
> 
> 赞同：3
> 
> 时间：2012-06-14T12:08:22.097
> 
> 标签：backbone.js, fetch

这是我的用例：我在集合上调用 fetch 并从我的服务器接收 JSON，但我有一个错误标志。这将始终触发成功流程，我可以通过 2 种方式检测错误：

1.  在我的解析方法中 - 这很丑陋。
2.  通过不使用 success 选项，并使用 Deferred 的 Done 回调来检查错误。这也很丑陋，因为之后我必须自己调用 parse 。

如果 Backbone 在收集时有一个验证功能，这将是可以解决的，但它没有......

有什么建议么？

编辑：我知道有一种方法可以通过提供我自己的 Sync 方法来做到这一点，但我在那里有点迷失了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:54:42.897

好问题..我不确定使用 parse 方法是否如此糟糕。它的名字不合适，但它是你在代码的自然路径中所拥有的一切，我想你可以只返回一个空列表而不会破坏任何东西。

我的问题是错误的原因是什么？如果它是一个权限问题（或 http 协议涵盖的其他错误），您可以从服务器返回一个错误代码，该代码应该触发您的错误回调。

# xml - ASP.NET 4 MVC Web API 键值/列表集合 á la JSON for XML

> ID：11032754
> 
> 赞同：0
> 
> 时间：2012-06-14T12:08:46.930
> 
> 标签：xml, json, asp.net-mvc-4

是否有可以序列化为 xml 和 json 的通用键/值集合类？

我不想使用模型类作为返回值。（我不需要类，因为我在客户端没有 .NET 并且不想要类实现。无论如何使用接口和类都是有问题的。）

有 JSON 类（例如 JSON.NET），但这些对象只能序列化为 JSON。我需要一个可以两者兼得的中立班级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:10:18.887

> 我不需要类，因为我在客户端没有 .NET 并且不想要类实现

这正是 XML 和 JSON 等可互操作格式的用途 :-) 将您的 .NET 特定类转换为可互操作的交换格式，以便任何支持 XML/JSON 的客户端都可以理解。所以，是的，不要再看了，继续定义您的视图模型，并让您的 API 方法返回那些自定义视图模型。或者它们的集合。

除此之外`Dictionary<TKey, TValue>`应该适用于两种格式。

# javascript - ExtJS 视图创建

> ID：11032760
> 
> 赞同：1
> 
> 时间：2012-06-14T12:09:09.350
> 
> 标签：javascript, extjs

我有以下看法：

```
Ext.define("FI.view.InstallBaseList", {
extend: 'Ext.grid.Panel',
require: 'FI.store.InstallBaseStore',
title: 'List',

alias: 'widget.installBaseList',

icon:'table.png',

store:'FI.store.InstallBaseStore',

columns: [],

divId:'',
    dockedItems: [],
height: 200,
width: 700,
renderTo: "container",
enableLocking: true,
draggable: true,
resizable: true,

 initComponent: function(config){
         console.log("here");
    }
}); 
```

这就是我尝试从控制器创建它的方式：

```
list = Ext.widget('installBaseList', params); 
```

在浏览器中，我收到此错误：

```
me.dockedItems.insert is not a function
addDocked(items=[Object { xtype="header", title="List", titleAlign="left", more...}], pos=0)    ext-all-debug.js (line 47051)
updateHeader(force=undefined)    ext-all-debug.js (line 90398)
beforeRender()    ext-all-debug.js (line 90275)
getRenderTree()    ext-all-debug.js (line 26056)
render(container=Object { dom=div#container, id="container", $cache={...}, more...}, position=undefined)    ext-all-debug.js (line 26193)
constructor(config=Object { divId="container", columns=[0]})    ext-all-debug.js (line 44380)
callParent(args=[Object { divId="container", columns=[0]}])    ext-all-debug.js (line 3728)
constructor(config=Object { divId="container", columns=[0]})    ext-all-debug.js (line 56387)
constructor ()    ext-all-debug.js (line 3892)
widget(name="installBaseList", config=Object { divId="container", columns=[0]})    ext-all-debug.js (line 5083)
(?)()    ListCo...5323863 (line 98)

me.dockedItems.insert(pos + i, item);    ext-all-debug.js (line 47051) 
```

更重要的是，在`initComponent`方法中，`config`似乎是未定义的。为什么？

问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:19:11.893

initComponent 方法必须包含对 callParent 的调用，以确保父类的 initComponent 方法也被调用。

这是修复[http://jsfiddle.net/nscrob/EcX3Q/11/](http://jsfiddle.net/nscrob/EcX3Q/11/)

你也不需要将参数配置发送给initComponent，对象配置已经分配给组件并且可以通过它访问。所以如果你有： Ext.create('...',{mode:add}); 在初始化组件中，您将拥有 this.mode = add;

# dotnetopenauth - 从数据库中删除过期的 OAuth 令牌

> ID：11032770
> 
> 赞同：2
> 
> 时间：2012-06-14T12:09:49.833
> 
> 标签：dotnetopenauth

在完成使用 DotNetOpenAuth 的 WCF SOAP Web 服务后，我突然想到，一旦消费者令牌存储在 OAuthConsumer 表中，它就永远不会被删除，即使在令牌被认为过期之后也是如此。

我已经编辑了 DotNetOpenAuth 项目的标准 AuthorizedConsumers.aspx 页面，以便用户可以手动撤销对应用程序的访问，基本上从数据库中删除 consumertoken，但我想知道是否不能自动删除旧令牌。例如，当用户尝试访问令牌授予访问权限的应用程序时，是否应该进行某种检查以查看是否还没有令牌，如果有，无论是否过期，删除如果旧令牌*已*过期，在制作新令牌之前？

我实际上不知道是否有任何检查已经到位（我确实寻找过但找不到它们），有吗？我将如何添加代码以从数据库中删除过期的令牌？我将在哪里插入该代码？在 DataBaseTokenManager 类的 StoreNewRequestToken 方法中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:28:26.393

清理数据库表超出了 DotNetOpenAuth 的范围。您可以随心所欲地实施它。例如，您可能有一个数据库存储过程，它删除已过期的令牌行并以某种方式在计时器上调用它。DotNetOpenAuth 期望您仅从令牌管理器接口的实现中返回有效（未过期）令牌。当 DNOA 第一次要求您存储这些令牌时，就会给您这些令牌的到期时间。

至于避免你的令牌表变得太大，有几种方法。您可以使用短期令牌，并确保定期清理您的表。但是最好的方法是在 DotNetOpenAuth 的 OAuth 2 实现中使用，所以如果您可以切换到 OAuth 2，那么这是理想的。一旦你在那里，你会发现根本没有令牌表。您拥有的最接近的东西是 Authorizations 表，它只有一行用于每个单独的用户批准手势，您可以在（以及如果）这些授权过期时删除它们。通过该授权，客户可以根据需要获得任意数量的唯一令牌，并且您的数据库永远不会增长，因为令牌是自我描述和签名的。DNOA 为您管理这一切。

# charts - Sencha 图表标记被轴线切割

> ID：11032774
> 
> 赞同：1
> 
> 时间：2012-06-14T12:10:08.057
> 
> 标签：charts, extjs, linechart

我正在尝试在 Sencha 图表 1.0 中制作折线图，并且效果很好。但是 - 标记圆圈正在被轴线切割。您还可以在 Sencha 图表官方示例中看到它（使用图像作为标记...）：[http](http://dev.sencha.com/deploy/touch-charts-1.0.0/examples/Line/) ://dev.sencha.com/deploy/touch-charts-1.0.0/examples/Line/ 。

我发现了另一个使用 Ext js 4 的示例，折线图标记没有被剪切： [http](http://dev.sencha.com/deploy/ChartsDemo/examples/chart/Line.html) ://dev.sencha.com/deploy/ChartsDemo/examples/chart/Line.html 。

我尝试了多种方法：尝试使用 CSS，甚至尝试将 Ext.chart.series.Line 的代码转换为来自 Ext JS 4 的代码，但没有成功。有谁知道这样做的简单方法？甚至参考了一个线索是怎么做到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:22:42.987

似乎其他人在我之前已经经历过。显然，Ext.js 4 使用 SVG 实现图表，而 Sencha Charts 1.0 使用 Canvas 上的绘图来实现。如果源代码更具可读性 - 我本可以理解它在哪里使用图层以及我应该在哪里要求图表画布具有更少的 z-Index。但是，它不是，一个舒适的解决方法是为每个系列定义 5 px（取决于标记点的半径）gutter：

```
getGutters:function(){
                    return[0,5];
                }, 
```

在这个线程中找到了解决方案： [http ://www.sencha.com/forum/showthread.php?202886-add-space-on-x-axis-in-graph](http://www.sencha.com/forum/showthread.php?202886-add-space-on-x-axis-in-graph)

# opencart - 在商店前端显示额外字段 - 规范

> ID：11032780
> 
> 赞同：1
> 
> 时间：2012-06-14T12:10:22.737
> 
> 标签：opencart

我`Specification`在`Catalog->Product->Data`选项卡中添加了一个额外的字段。
此文本存储在名为`specification`in`product_description`表的列中。

现在我想在我的 Store Front（默认主题）中显示这些信息。在产品页面上有一个`Specification`显示属性的选项卡。我想显示`specification`而不是属性。

请建议我怎么做:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:41:12.817

首先：编辑您的`Product`模型 - 应该在`catalog/model/product/product.php`- 找到方法`getProduct`并编辑选择产品详细信息的 SQL 以获得该`specification`列。

第二：编辑您的`Product`控制器 - 应该在`catalog/controller/product/product.php`并确保您的`specification`列将被添加到`$this->data['specification']`，例如

第三：编辑您的`Product`详细信息模板 - 应该在`catalog/view/theme/default/templates/product/product.tpl`其中找到`<div class="tabs">`（或类似）所在的部分 - 然后找到规范选项卡并`specification`在此处打印出您的列...

需要被完成。

# algorithm - 生成二项式系数的最快方法

> ID：11032781
> 
> 赞同：29
> 
> 时间：2012-06-14T12:10:23.327
> 
> 标签：algorithm, math, data-structures

我需要计算一个数字的组合。

计算 nCp where n>>p 的最快方法是什么？

我需要一种快速的方法来为多项式方程生成二项式系数，并且我需要获取所有项的系数并将其存储在一个数组中。

> (a+b)^n = a^n + nC1 a^(n-1) * b + nC2 a^(n-2) * .......... +nC(n-1 ) a * b^(n-1) + b^n

计算 nCp 最有效的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T12:16:08.367

您可以使用动态编程来生成二项式系数

您可以创建一个数组，然后使用*O(N^2)*循环来填充它

```
C[n, k] = C[n-1, k-1] + C[n-1, k]; 
```

在哪里

```
C[1, 1] = C[n, n] = 1 
```

之后，在您的程序中，您只需查看 [n, k] 索引处的二维数组即可获得 C(n, k) 值

**像这样**更新****

 **```
for (int k = 1; k <= K; k++) C[0][k] = 0;
for (int n = 0; n <= N; n++) C[n][0] = 1;

for (int n = 1; n <= N; n++)
   for (int k = 1; k <= K; k++)
      C[n][k] = C[n-1][k-1] + C[n-1][k]; 
```

其中 N, K - 你的 n, k 的最大值

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-14T12:30:54.450

如果您需要为所有 n 计算它们，Ribtoks 的答案可能是最好的。对于单个 n，您最好这样做：

```
C[0] = 1
for (int k = 0; k < n; ++ k)
    C[k+1] = (C[k] * (n-k)) / (k+1) 
```

*如果*在乘法之后完成，则除法是精确的。

并注意 C[k] * (nk) 溢出：使用足够大的整数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-25T21:18:09.833

如果您想要对较大的 n 值进行完全扩展，FFT 卷积可能是最快的方法。在具有相等系数（例如一系列公平的硬币投掷）和偶数顺序（例如投掷次数）的二项式展开的情况下，您可以利用对称性：

**理论**

用表达式 A + A*cos(Pi*n/N) 表示两次抛硬币的结果（例如正面和反面总数之差的一半）。N 是缓冲区中的样本数 - 偶数阶 O 的二项式展开将具有 O+1 系数，并且需要 N >= O/2 + 1 个样本的缓冲区 - n 是正在生成的样本数，A 是比例因子通常为 2（用于生成二项式系数）或 0.5（用于生成二项式概率分布）。

请注意，在频率上，这个表达式类似于这两次抛硬币的二项式分布——在对应于数字 (heads-tails)/2 的位置存在三个对称尖峰。由于对独立事件的整体概率分布进行建模需要对它们的分布进行卷积，因此我们希望在频域中对我们的表达式进行卷积，这相当于在时域中进行乘法运算。

换句话说，通过将我们的两次抛掷结果的余弦表达式提高到一次幂（例如，模拟 500 次抛掷，将其提高到 250 次幂，因为它已经代表了一对），我们可以安排二项式分布出现在频域中的数字。由于这一切都是真实而均匀的，我们可以用 DCT-I 代替 DFT 来提高效率。

**算法**

1.  决定缓冲区大小 N，它至少为 O/2 + 1 并且可以方便地进行 DCT
2.  用表达式 pow(A + A*cos(Pi*n/N),O/2) 初始化它
3.  应用正向 DCT-I
4.  从缓冲区中读出系数 - 第一个数字是中心峰，其中头=尾，随后的条目对应于距离中心较远的对称对

**准确性**

在累积的浮点舍入误差使您无法获得准确的系数整数值之前，O 可以达到多高是有限制的，但我猜这个数字相当高。双精度浮点可以完全准确地表示 53 位整数，我将忽略使用 pow() 所涉及的舍入损失，因为生成表达式将发生在 FP 寄存器中，给我们额外的 11尾数位以吸收英特尔平台上的舍入误差。因此，假设我们使用通过 FFT 实现的 1024 点 DCT-I，这意味着在转换过程中舍入误差会损失 10 位的精度，仅此而已，剩下大约 43 位的清晰表示。我不知道二项式展开的什么顺序会产生这种大小的系数，但我敢说它足以满足您的需求。

**不对称扩展**

如果您想要 a 和 b 的不等系数的不对称展开，则需要使用双边（复数）DFT 和复数 pow() 函数。生成表达式 A*A*e^(-Pi*i*n/N) + A*B + B*B*e^(+Pi*i*n/N) [使用复 pow() 函数来提高它的一半扩展命令的力量]和DFT它。同样，缓冲区中的内容是偏移量为零的中心点（但如果 A 和 B 非常不同，则不是最大值），然后是分布的上半部分。缓冲区的上半部分将包含分布的下半部分，对应于负值的正面减反面值。

请注意，源数据是 Hermitian 对称的（输入缓冲区的后半部分是前半部分的复共轭），因此该算法不是最优的，可以使用所需大小的一半的复数到复数 FFT 来执行优化效率。

不用说，与上述对称分布的纯实数算法相比，所有复杂的幂运算都会消耗更多的 CPU 时间并损害准确性。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-14T14:25:36.867

这是我的版本：

```
def binomial(n, k):
if k == 0:
    return 1
elif 2*k > n:
    return binomial(n,n-k)
else:
    e = n-k+1
    for i in range(2,k+1):
        e *= (n-k+i)
        e /= i
    return e 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-20T19:44:19.333

我最近写了一段代码，需要调用大约 1000 万次二进制系数。所以我做了一个组合查找表/计算方法，仍然不会太浪费内存。您可能会发现它很有用（而且我的代码在公共领域）。代码位于

[http://www.etceterology.com/fast-binomial-coefficients](http://www.etceterology.com/fast-binomial-coefficients)

有人建议我在这里内联代码。一个大喇叭查找表似乎很浪费，所以这是最后一个函数，以及一个生成表的 Python 脚本：

```
extern long long bctable[]; /* See below */

long long binomial(int n, int k) {
    int i;
    long long b;
    assert(n >= 0 && k >= 0);

    if (0 == k || n == k) return 1LL;
    if (k > n) return 0LL;

    if (k > (n - k)) k = n - k;
    if (1 == k) return (long long)n;

    if (n <= 54 && k <= 54) {
        return bctable[(((n - 3) * (n - 3)) >> 2) + (k - 2)];
    }
    /* Last resort: actually calculate */
    b = 1LL;
    for (i = 1; i <= k; ++i) {
        b *= (n - (k - i));
        if (b < 0) return -1LL; /* Overflow */
        b /= i;
    }
    return b;
} 
```

* * *

```
#!/usr/bin/env python3

import sys

class App(object):
    def __init__(self, max):
        self.table = [[0 for k in range(max + 1)] for n in range(max + 1)]
        self.max = max

    def build(self):
        for n in range(self.max + 1):
            for k in range(self.max + 1):
                if k == 0:      b = 1
                elif  k > n:    b = 0
                elif k == n:    b = 1
                elif k == 1:    b = n
                elif k > n-k:   b = self.table[n][n-k]
                else:
                    b = self.table[n-1][k] + self.table[n-1][k-1]
                self.table[n][k] = b

    def output(self, val):
        if val > 2**63: val = -1
        text = " {0}LL,".format(val)

        if self.column + len(text) > 76:
            print("\n   ", end = "")
            self.column = 3
        print(text, end = "")
        self.column += len(text)

    def dump(self):
        count = 0
        print("long long bctable[] = {", end="");

        self.column = 999
        for n in range(self.max + 1):
            for k in range(self.max + 1):
                if n < 4 or k < 2 or k > n-k:
                    continue
                self.output(self.table[n][k])
                count += 1
        print("\n}}; /* {0} Entries */".format(count));

    def run(self):
        self.build()
        self.dump()
        return 0

def main(args):
    return App(54).run()

if __name__ == "__main__":
    sys.exit(main(sys.argv)) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-14T20:21:12.427

如果你真的只需要 n 远大于 p 的情况，一种方法是使用[斯特林公式](http://en.wikipedia.org/wiki/Stirling%27s_approximation)来计算阶乘。（如果 n>>1 和 p 是一阶，斯特林近似 n！和 (np)！，保持 p！原样等）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-11T14:48:53.550

我自己的基准测试中最快的合理近似值是 Apache Commons Maths 库使用的近似值：http: [//commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/special/Gamma.html #logGamma（双）](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/special/Gamma.html#logGamma(double))

我和我的同事试图看看我们是否能打败它，同时使用精确的计算而不是近似值。除了一种方法慢了 2-3 倍之外，所有方法都失败了（许多命令慢了）。表现最好的方法使用[https://math.stackexchange.com/a/202559/123948](https://math.stackexchange.com/a/202559/123948)，这里是代码（在 Scala 中）：

```
var i: Int = 0
var binCoeff: Double = 1
while (i < k) {
  binCoeff *= (n - i) / (k - i).toDouble
  i += 1
}
binCoeff 
```

真正糟糕的方法是使用尾递归实现帕斯卡三角形的各种尝试。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-01T05:11:10.193

```
nCp = n! / ( p! (n-p)! ) =
      ( n * (n-1) * (n-2) * ... * (n - p) * (n - p - 1) * ... * 1 ) /
      ( p * (p-1) * ... * 1     * (n - p) * (n - p - 1) * ... * 1 ) 
```

如果我们修剪分子和分母的相同项，我们只需要最少的乘法。我们可以在 C 中编写一个函数来执行 2p 乘法和 1 次除法以获得 nCp：

```
int binom ( int p, int n ) {
    if ( p == 0 ) return 1;
    int num = n;
    int den = p;
    while ( p > 1 ) {
        p--;
        num *= n - p;
        den *= p;
    }
    return num / den;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-16T10:40:45.913

我一直在寻找相同的东西但找不到它，所以我自己写了一个似乎对于最终结果适合长的任何二项式系数的最佳选择。

```
// Calculate Binomial Coefficient 
// Jeroen B.P. Vuurens
public static long binomialCoefficient(int n, int k) {
    // take the lowest possible k to reduce computing using: n over k = n over (n-k)
    k = java.lang.Math.min( k, n - k );

    // holds the high number: fi. (1000 over 990) holds 991..1000
    long highnumber[] = new long[k];
    for (int i = 0; i < k; i++)
        highnumber[i] = n - i; // the high number first order is important
    // holds the dividers: fi. (1000 over 990) holds 2..10
    int dividers[] = new int[k - 1];
    for (int i = 0; i < k - 1; i++)
        dividers[i] = k - i;

    // for every dividers there is always exists a highnumber that can be divided by 
    // this, the number of highnumbers being a sequence that equals the number of 
    // dividers. Thus, the only trick needed is to divide in reverse order, so 
    // divide the highest divider first trying it on the highest highnumber first. 
    // That way you do not need to do any tricks with primes.
    for (int divider: dividers) {
       boolean eliminated = false;
       for (int i = 0; i < k; i++) {
          if (highnumber[i] % divider == 0) {
             highnumber[i] /= divider;
             eliminated = true;
             break;
          }
       }
       if(!eliminated) throw new Error(n+","+k+" divider="+divider);
    }

    // multiply remainder of highnumbers
    long result = 1;
    for (long high : highnumber)
       result *= high;
    return result;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-06T09:58:42.180

时间复杂度：O(分母) 空间复杂度：O(1)

```
public class binomialCoeff {
    static double binomialcoeff(int numerator, int denominator) 
    { 
        double res = 1; 
        //invalid numbers
        if (denominator>numerator || denominator<0 || numerator<0) {
            res = -1;
            return res;}
        //default values
        if(denominator==numerator || denominator==0 || numerator==0)
            return res;

        // Since C(n, k) = C(n, n-k) 
        if ( denominator > (numerator - denominator) ) 
            denominator = numerator - denominator;

        // Calculate value of [n * (n-1) *---* (n-k+1)] / [k * (k-1) *----* 1] 
        while (denominator>=1)
        { 

        res *= numerator;
        res = res / denominator; 

        denominator--;
        numerator--;
        } 

        return res; 
    } 

    /* Driver program to test above function*/
    public static void main(String[] args) 
    { 
        int numerator = 120; 
        int denominator = 20; 
        System.out.println("Value of C("+ numerator + ", " + denominator+ ") "
                                + "is" + " "+ binomialcoeff(numerator, denominator)); 
    } 

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-08-24T20:05:26.907

如果我理解问题中的符号，您不仅想要 nCp，您实际上还想要所有 nC1、nC2、... nC(n-1)。如果这是正确的，我们可以利用以下关系使这变得相当简单：

*   对于所有 k>0：nCk = prod_{from i=1..k}( (n-i+1)/i )
*   即对于所有 k>0：nCk = nC(k-1) * (n-k+1) / k

这是一个实现这种方法的python片段：

```
def binomial_coef_seq(n, k):
    """Returns a list of all binomial terms from choose(n,0) up to choose(n,k)"""
    b = [1]
    for i in range(1,k+1):
        b.append(b[-1] * (n-i+1)/i)
    return b 
```

如果您需要所有系数达到某个 k > 上限（n/2），您可以使用对称性来减少需要执行的操作数量，方法是在上限（n/2）的系数处停止，然后回填至你需要。

```
import numpy as np

def binomial_coef_seq2(n, k):
    """Returns a list of all binomial terms from choose(n,0) up to choose(n,k)"""

    k2 = int(np.ceiling(n/2))

    use_symmetry =  k > k2
    if use_symmetry:
        k = k2

    b = [1]
    for i in range(1, k+1):
        b.append(b[-1] * (n-i+1)/i)

    if use_symmetry:
        v = k2 - (n-k)
        b2 = b[-v:]
        b.extend(b2)
    return b 
```**

# javascript - 如何比较两个正则表达式？

> ID：11032784
> 
> 赞同：27
> 
> 时间：2012-06-14T12:10:29.133
> 
> 标签：javascript, regex, compare

为什么

```
console.log(/a/ == /a/); 
```

和

```
var regexp1 = /a/;
var regexp2 = /a/;
console.log(regexp1 == regexp2); 
```

两者都返回`false`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-14T12:12:45.263

尝试这个：

```
String(regexp1) === String(regexp2)) 
```

你是假的，因为这两个是不同的对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T12:13:00.987

**“问题”：**

`regex`是`object`-a**引用类型**，因此比较**是通过引用完成的**，它们是两个不同的对象。

```
console.log(typeof /a/); // "object" 
```

> 如果两个操作数都是对象，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)

**解决方案：**

```
​var a = /a/;
var b = /a/;
console.log(​​​a.toString() === b.toString()); // true! yessss! 
```

[**现场演示**](http://jsfiddle.net/LQnKt/)

另一个强制es 的“hack”是`toString()`：`regex`

```
console.log(a + "" === b + "");​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T12:13:56.660

只是一个猜测-但JavaScript不会`RegExp`为您的正则表达式创建一个对象，因此因为您创建了两个不同的对象（即使它们具有相同的“值”）它们实际上是不同的？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T12:16:02.110

对于像 int、string、boolean 这样的原始数据类型，javascript 知道要比较什么，但对于像 date 或 regex 这样的对象，运算符只查看内存中的位置，因为您独立定义正则表达式，它们在内存中有两个不同的位置，所以它们不是平等的。

# c# - 基于 SQL Server 存储过程填充 PieChart

> ID：11032788
> 
> 赞同：0
> 
> 时间：2012-06-14T12:10:45.013
> 
> 标签：c#, stored-procedures, sql-server-express, teechart

我有以下存储过程，我必须从中获取数据：

```
 EXECUTE [dbo].[StationHealthStatusSummary2]
            @LineId varchar(100),        // 5,9,10
            @MeasurementDt datetime,    //2012/06/06
            @Ntotal Int output,
            @N0 int output,
            @N1 int output,
            @N2 int output,
            @N3 int output,
            @N4 int output,
            @N5 int output,
            @N6 int output,
            @N7 int output,
            @N8 int output,
            @N9 int output,
            @N10 int output,
            @N11 int output,
            @N12 int output,
            @N13 int output,
            @N14 int output,
            @N15 int output,
            @N16 int output
       GO 
```

现在我可以将参数发送到`LineID`和`Measurement`日期如下：

```
SqlConnection sql = new SqlConnection(@"Data Source=(local)\SQLEXPRESS;Initial Catalog=iComs;Persist Security Info=True;User ID=sa;Password=Password);

SqlCommand getData = new SqlCommand("StationHealthStatusSummary2", sql);

SqlDataAdapter da = new SqlDataAdapter(getData);

getData.CommandType = CommandType.StoredProcedure;
getData.Parameters.Add(new SqlParameter("@LineId", Lines));
getData.Parameters.Add(new SqlParameter("@MeasurementDt", date1));

SqlParameter ParamaterNtotal = new SqlParameter();
ParamaterNtotal.ParameterName = "@Ntotal";
ParamaterNtotal.SqlDbType = SqlDbType.Int;
ParamaterNtotal.Direction = ParameterDirection.Output;
getData.Parameters.Add(ParamaterNtotal);

sql.Open();

getData.ExecuteNonQuery(); 
```

现在我可以获取 的值`NTotal`并将其分配给 Teechart (PieSlice)，但是如何获取 的值`@N0..@N16`？

我有一些代码可能会让你对我想要完成的工作有所了解。

```
int NTotal = int.Parse(getData.Parameters["@Ntotal"].Value.ToString());

if (GetVariantVariableI(getData.Parameters[0].Value) = 0)
{               
    for (c = 1; c <= 18; c++)
    { 
        Nvl = GetVariantVariableI(getData.Parameters[2+c].Value);

        switch(c)
        {
            case 1:
                NTotal = Nvl;
                break;

            case 2:
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 9:
            case 10:
            case 11:                           
            case 12:                            
            case 13:                           
            case 14:                           
            case 15:                            
            case 16:                           
            case 17:
            case 18:
            case 19:
            case 20:
                cstatus = c-2;
                NPieValues[cstatus] = Nvl;
                break;
   }   

   string SliceName;
   int NUsed;

   NUsed = 0;

   for(i=0;i<=16;i++)
   {
      NUsed = NUsed + NPieValues[i];
   }

   if (NUsed < NTotal)
   {
       Chart1.Series[0].Add(NTotal - NUsed);
       slice1.Title = "Not Connected";
       slice1.Add();
       slice1.Color = System.Drawing.Color.Silver;
   }

   if (NUsed > NTotal)
   {
      NPieValues[7] = NPieValues[7]-(NUsed-NTotal);
   }

   for (i=0;i<=16;i++)
   {
     if (NPieValues[i]>0)
     {
         switch(i)
         {
            case 0: SliceName ="Green"; 
                    break;
            case 1: SliceName ="Yellow";
                    break;
            case 2: SliceName ="Orange";
                    break;
            case 3: SliceName ="Red";
                    break;
            case 4: SliceName ="Broken Rail";
                    break;
            case 5: SliceName ="Buckling Rail";
                    break;
            case 6: SliceName ="Maintenance required";
                    break;
            case 7: SliceName ="Station(s) Off";
                    break;
            case 8: SliceName ="Rail Differential kN";
                    break;
            case 9: SliceName ="Left Rail Sensor Faulty";
                    break;
            case 10: SliceName ="Right Rail Sensor Faulty";
                     break;
            case 11: SliceName ="Temperature Rail Sensor Faulty";
                     break;
            case 12: SliceName ="Calibration Required";
                     break;
            case 13: SliceName ="Station Vandalised";
                     break;
            case 14: SliceName ="Station uninstalled";
                     break;
            case 15: SliceName ="Gauges removed for Maintenance";
                     break;
            case 16: SliceName ="No GSM Coverage";
                     break;
            default:
                     SliceName ="?";
         }
         switch(i)
         {
          case 0: clr = "System.Drawing.Color.Green";
                 break;
          case 1:clr = "System.Drawing.Color.Yellow";
                 break;
          case 2:clr = "System.Drawing.Color.Orrange";
                 break;
          case 3:clr = "System.Drawing.Color.Red";
                 break;
          case 4:
          case 5:
          case 8:clr = "System.Drawing.Color.Purple";
                 break;
          case 6:clr = "System.Drawing.Color.Black";
                 break;
          case 7:clr = "System.Drawing.Color.Gray";
                 break;;
          case 9:clr = "System.Drawing.ColorTranslator.FromHtml('#E0671F')";
                 break;
          case 10:clr = "System.Drawing.ColorTranslator.FromHtml('#BA4EC2')";
                 break;
          case  11:clr = "System.Drawing.ColorTranslator.FromHtml('#FF8000')";
                 break;
          case  12:clr =  "System.Drawing.ColorTranslator.FromHtml('#BF4093')";
                 break;
          case  13:clr = "System.Drawing.Color.SkyBlue";
                 break;
          case 14:clr = "System.Drawing.Color.Aqua";
                 break;
          case 15:clr = "System.Drawing.ColorTranslator.FromHtml('#BFBFFF')";
                 break;                 
          case 16:clr = "System.Drawing.Color.MedGray";
                 break;
             default : clr = "System.Drawing.Color.White";
                 break;              
         }
      slice1.Add(NPieValues[i],SliceName,clr);
     }

 }
            }
        }

    } 
```

现在，在获得所有这些值之后，它必须填充饼图。

请，任何帮助将不胜感激，如果我太含糊，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:17:26.620

您已添加`@Ntotal`为输出参数，为什么不添加所有其他参数？

```
SqlParameter n = new SqlParameter();
n.ParameterName = "@N0";
n.SqlDbType = SqlDbType.Int;
n.Direction = ParameterDirection.Output;
getData.Parameters.Add(n); 
```

然后，您可以像使用`@Ntotal`. 此外，如果您愿意，您可以按名称检索值，而不是遍历它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:51:52.327

谢谢。我想通了......在我发送参数后如下：

```
 SqlParameter Paramater0 = new SqlParameter();
        Paramater0.ParameterName = "@N0";
        Paramater0.SqlDbType = SqlDbType.Int;
        Paramater0.Direction = ParameterDirection.Output;
        getData.Parameters.Add(Paramater0); 
```

然后我获取值并将其声明为 var，如下所示：

```
 int N0 = int.Parse(getData.Parameters["@N0"].Value.ToString()); 
```

最后将该 int 声明为图表上的一个切片，如下所示：

```
 slice1.Add(N0, "Green", System.Drawing.Color.Green); 
```

感谢您的帮助@mgnoonan :)

# macos - 如何为我的特定应用程序添加右键菜单，如 Dropbox

> ID：11032797
> 
> 赞同：3
> 
> 时间：2012-06-14T12:11:36.603
> 
> 标签：macos, menu, right-click

问题：我需要在特定文件夹上有一个右键菜单，显示我的应用程序子菜单。像Dropbox这样的东西。

我确实尝试了很多谷歌并找到了提供创建右键菜单的服务，但它创建的通用菜单不在特定文件或文件夹上。Dropbox 是如何做到的？它使用一些python脚本吗？任何帮助将不胜感激。

卡皮尔

# python - 将微秒转换为人类可读的时间

> ID：11032799
> 
> 赞同：7
> 
> 时间：2012-06-14T12:11:38.103
> 
> 标签：python, time

我需要将两个动作之间的时间差 (diff) 转换为人类可读的时间。

我怎么能用python做到这一点？我尝试了类似的东西

```
 diff = 49503757
    datetime.time(0,0,0,diff) 
```

但是 diff 值太长，datetime 需要一个介于 0 和 999999 之间的微秒值，而我在这个例子中的 diff 是 49503757。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T12:13:54.327

```
>>> from datetime import timedelta
>>> str(timedelta(microseconds=49503757))
'0:00:49.503757' 
```

# javascript - 来自 AJAX 源的事件不会添加到 fullcalendar

> ID：11032800
> 
> 赞同：0
> 
> 时间：2012-06-14T12:11:42.720
> 
> 标签：javascript, jquery, fullcalendar

我通过 AJAX 从 PHP 脚本获取一些数据，并希望将返回值作为事件列在我的完整日历中。但不知何故，它不起作用！我从 fullcalendar 文档中复制了示例并对其进行了一些修改：

```
$.ajax({
      type: "POST",
      url: "content/con_FillDatesToPopulateEvent.php",
      data: { 
          start: startStr, 
          end: endStr,
      },
      success: function (returnVal) {
          var events = [];
          singleEvents = returnVal.split("|");
          $.each(singleEvents, function(i, val){
                events.push(val);
          });
      callback(events);   
      }               
}); 
```

如果我显示我的 PHP 脚本的返回值，则事件看起来很好：

```
{ 
  id: 15, 
  title: '???', 
  start: '2012-06-11 11:00:00', 
  end: '2012-06-13 11:00:00', 
  url: '#', 
  allDay: false, 
  color: 'Orange' 
},
{ 
  id: 7, 
  title: '???', 
  start: '2012-05-28 08:00:00', 
  end: '2012-06-10 08:00:00', 
  allDay: false, 
  color: 'Orange' 
}, 
{ 
  id: 6, 
  title: '???', 
  start: '2012-05-21 08:00:00', 
  end: '2012-05-28 08:00:00', 
  allDay: false, 
  color: 'Orange' 
} 
```

据我了解，所有事件都应该通过调用“callback（）”添加到完整日历中？你看到我的问题了吗，你能给我一个提示如何解决它吗？我在互联网上搜索了一段时间没有令人满意的解决方案！

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:26:57.887

当您调用 .fullCalendar 时，您可以传入一个参数“events”，该参数定义了事件的 JSON 源。例子：

```
$('#calendar').fullCalendar({
    events: 'content/con_FillDatesToPopulateEvent.php'
}); 
```

这应该是填充事件所需的全部内容。您的代码不清楚是什么`callback`或做什么。

# c++ - 为什么 c++ 指针 * 关联到声明的变量，而不是类型？

> ID：11032802
> 
> 赞同：22
> 
> 时间：2012-06-14T12:11:43.673
> 
> 标签：c++, pointers, language-design, declaration

为什么 C++ 被设计成在同一行声明两个 int *s 的正确方法是

```
int *x, *y; 
```

不是

```
int* x,y; 
```

我知道有些人认为您应该避免使用任何一种形式并在自己的行上声明每个变量，但我对为什么做出这种语言决定很感兴趣。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T12:12:38.477

为了保持与 C 代码的兼容性，因为这就是 C 的工作方式。

[Bjarne在他的风格和技术常见问题](//www.stroustrup.com/bs_faq2.html#whitespace)解答中提出了一个很好的观点：

> `int* p;`和之间的选择`int *p;`不是关于对与错，而是关于风格和重点。C 强调表达；声明常常被认为只是一种必要的罪恶。另一方面，C++ 非常强调类型。
> 
> 一个典型的 C 程序员写`int *p;`和解释它`*p is what is the int`强调语法，并可能指向 C（和 C++）声明语法来争论风格的正确性。实际上，* 绑定到语法中的名称 p。
> 
> A`typical C++ programmer`写`int* p;`并解释它`p is a pointer to an int`强调类型。实际上 p 的类型是 int*。我显然更喜欢这种强调，并认为它对于很好地使用 C++ 的更高级部分很重要。

因此，在 C++ 中像 this 这样工作的动机是它在 C 中的工作方式。

它在 C 中工作的动机是，如上所述，C 强调表达式而不是类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T12:39:46.327

简单的答案是：因为 C 就是这样做的。当然，这只能引出一个问题：为什么 C 会这样做？

在早期的 C 中，最初的哲学是声明是使用的精确图像。所以当你写：

```
int *p; 
```

，您声明表达式`*p`具有类型`int`（并且编译器相应地计算出实际类型`p`）。

当然，这在 C 引入的那一天就不再是真的`typedef`，后来`struct`. 并且任何相似之处都完全消失了`const` （首先在 C++ 中引入，然后改装到 C 中），其中像

```
int *const p; 
```

和使用没有关系。但到那时，骰子已经落下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:42:54.437

**回答**

这来自“C”（“plain c”、“pure c”等）。

当已经声明了指针变量时，它的使用如下：

```
...
*p = &x;
*q = SomePointerFunc();
.... 
```

我读到“c”的最初发明者希望程序员使用与使用相同的语法来声明指针变量，**变量标识符之前有星**号：

```
...
int *p;
int *q;
... 
```

数组也是如此：

```
...
x[5]  = 'a';
y[77] = SomeItemFunc();
...

...
char x[5];
int  y[100];
... 
```

我的一些老师坚持以这种方式声明变量和函数的类型（靠近标识符的星号）：

```
...
int *p;
int *q;
... 
```

而不是这个（类型标识符旁边的星号）：

```
...
int* p;
int* q;
... 
```

**额外的**

在 Java 和其他语言（如 C#）中，数组或指针的声明位于类型旁边，只留下变量或函数标识符，如下面的伪代码：

```
*int p;
*int q;
char[5] x;
int[100]  y; 
```

我更喜欢这种技术。

干杯。

# sql-server - 在 SQL Server 中一次获取多列中的最大值的结果

> ID：11032805
> 
> 赞同：0
> 
> 时间：2012-06-14T12:12:30.520
> 
> 标签：sql-server, max

假设我们有一个`DATES`包含 3 列的表：`colYear`(YEAR)、`colMonth`(MONTH)、`colDay`(DAY)。

行插入如下：

```
colYear colMonth colDay
   1       2        3   
   2       3        0   
   4       5        5   
   4       8        0    
   1      10       28 
```

我需要根据 3 列找到最大日期。所以在这个例子中，正确答案是：4 年 8 个月和 0 天是最大的（我们检查年，最大是 4 秒，然后我们检查月最大是 8，所以我们找到了我们的结果）。

可能吗？如何用 sql 实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:18:36.120

使用顺序 -

```
 SELECT * from DATES 
    ORDER BY colYear DESC, colMonth DESC, colDay DESC 
```

根据您的数据库，您可以将行数限制为 1。

所以对于 oracle 使用`rownum = 1` ，而对于 mysql 它将是`LIMIT 1`

# apache - 在通配符的情况下使用子域名创建一个 Apache SetEnv 变量

> ID：11032810
> 
> 赞同：4
> 
> 时间：2012-06-14T12:12:43.840
> 
> 标签：apache, subdomain, wildcard, setenv

我有一个网站，基本上是这样设置的：client_name.website.com

...其中 clientname 实际上是通配符。对于每个新客户，我基本上都会创建一个子域。

我需要直接从 Apache 自动获取客户端名称信息。例如，如果有人通过：client1.website.com ...我想让 apache 为我做一个 SetEnv CLIENT_NAME client1。

因为我使用通配符，所以如果这个 SetEnv 可以动态完成就好了。对于大量客户来说真的很实用。

您将如何实现这一目标？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T13:06:26.407

尝试这个：

```
SetEnvIf Host "^([^\.]*)\.website\.com$" CLIENT_NAME=$1 
```

希望这会有所帮助。

# asp.net - 在 ASP.Net 的内置配置文件提供程序之间迁移到其他东西

> ID：11032812
> 
> 赞同：0
> 
> 时间：2012-06-14T12:12:47.057
> 
> 标签：asp.net, profile-provider

我正在做一个需要尽快起床的项目。我的计划是使用 ASP.Net 的配置文件提供程序来快速获取某些内容，然后可能会在以后根据需要重新访问。我的问题是在内置配置文件提供程序之间迁移到我自己的自定义架构有多困难？我现在应该硬着头皮做一个自定义配置文件提供程序吗？未来有哪些可能的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:53:21.103

我在自己之前已经走上了这条路。

它实际上并不算太糟糕，但它真的很乏味。由于您正在实现接口，因此您有很多方法可以自己编写。

最乏味的部分是测试您自己的版本并确保它按预期方式工作。

如果您的项目需要快速启动，只需使用当前可以使用的内容即可。你不会因为以后回去改变它而讨厌自己。

基本上我要说的是，你真的想从这里开始，然后仍然创建一个用户存储库吗？

```
 public class MyProfile : ProfileProvider
 {

    public override int DeleteInactiveProfiles(ProfileAuthenticationOption authenticationOption, DateTime userInactiveSinceDate)
    {
        throw new NotImplementedException();
    }

    public override int DeleteProfiles(string[] usernames)
    {
        throw new NotImplementedException();
    }

    public override int DeleteProfiles(ProfileInfoCollection profiles)
    {
        throw new NotImplementedException();
    }

    public override ProfileInfoCollection FindInactiveProfilesByUserName(ProfileAuthenticationOption authenticationOption, string usernameToMatch, DateTime userInactiveSinceDate, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override ProfileInfoCollection FindProfilesByUserName(ProfileAuthenticationOption authenticationOption, string usernameToMatch, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override ProfileInfoCollection GetAllInactiveProfiles(ProfileAuthenticationOption authenticationOption, DateTime userInactiveSinceDate, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override ProfileInfoCollection GetAllProfiles(ProfileAuthenticationOption authenticationOption, int pageIndex, int pageSize, out int totalRecords)
    {
        throw new NotImplementedException();
    }

    public override int GetNumberOfInactiveProfiles(ProfileAuthenticationOption authenticationOption, DateTime userInactiveSinceDate)
    {
        throw new NotImplementedException();
    }

    public override string ApplicationName
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public override System.Configuration.SettingsPropertyValueCollection GetPropertyValues(System.Configuration.SettingsContext context, System.Configuration.SettingsPropertyCollection collection)
    {
        throw new NotImplementedException();
    }

    public override void SetPropertyValues(System.Configuration.SettingsContext context, System.Configuration.SettingsPropertyValueCollection collection)
    {
        throw new NotImplementedException();
    }
} 
```

# objective-c - 在 NSArray 中保留元素

> ID：11032818
> 
> 赞同：0
> 
> 时间：2012-06-14T12:13:08.103
> 
> 标签：objective-c, ios, cocoa-touch, memory-management

我正在通过以下方式创建一个 NSMutable 数组：

```
-(NSArray*)createArrayFromString:(NSString*)str
{
    NSArray *arr = [str componentsSeparatedByString:@" "]; 
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:[arr count]];

    for(NSString *s in arr){
        if([s length]>0){
            [result addObject:[s retain]];
        }
    }
    return (NSArray*) result;
} 
```

这是调用方法，它将接收到的数组元素放入 Chapter 对象的属性 resRefs 中：

```
-(Chapter*)createChapter:(CXMLNode*)node
    {
        Chapter *chapter = [[Chapter alloc] init];
        chapter._id = [[(CXMLElement*)node  attributeForName:@"id"] stringValue];
        chapter.title = [[(CXMLElement*)node attributeForName:@"title"] stringValue];
        chapter.text = [node stringValue];
        [chapter.pids addObjectsFromArray:[self createArrayFromString:[[(CXMLElement*)node attributeForName:@"pids"]stringValue]]];
        [chapter.resRefs addObjectsFromArray:[self createArrayFromString:[[(CXMLElement*)node attributeForName:@"resRefs"]stringValue]]];
        return chapter;
    } 
```

这是问题：

没有保留调用

```
[result addObject:[s retain]]; 
```

我无法从 ViewController (EXC_BAD_ACCESS) 访问 NSString 元素

我在这里正确使用保留吗？

**编辑：**

改变了

```
 [[result addObject:s] retain]; 
```

进入

```
 [result addObject:[s retain]]; 
```

第二行最初在我的代码中。发布此问题时，删除了保留并将其插入错误的位置。尽管如此，在此处保留保留有效，而将其保留则无效。

**编辑2：**

发现分析器（CMD+SHIFT+B），发现几个内存泄漏，删除它们，EXC_BAD_ACCESS 消失了。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T12:14:51.567

```
[result addObject:s] 
```

什么都不返回，所以没有什么要保留的。

对象 s 被数组保留。

```
NSMutableArray *result = [NSMutableArray arrayWithCapacity:[arr count]]; 
```

不会被保留，也不应该被保留，因为它是一个本地对象。

您应该熟悉[记忆规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)。命名约定说，名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法必须传递一个保留对象。所以你的方法似乎很好，因为它不以任何一个开头，并返回一个自动释放（=未保留）的对象。保留与否是调用者的职责。

还有一个旁注：

```
return (NSArray*) result; 
```

不会将您的 NSMutableArray 转换为 NSArray。演员表只告诉编译器，它应该期待什么。由于 NSMutableArray 是 NSArray，编译器已经知道这一点。实际上，转换已经由方法签名中的返回定义定义。

* * *

您是否在该方法中做其他事情？如果没有——我不想让你难过——你真的不需要它，就像`NSArray *arr = [str componentsSeparatedByString:@" "];`你想要的那样。如果您真的想将`@" "`远离呼叫者的因素考虑在内，您应该考虑使用一个名为的[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)，例如.`NSString``componentsSeparatedByBlank`

它可能看起来像

```
@interface NSString (Separation)
-(NSArray *)componentsSeparatedByBlank;
@end

@implementation NSString (Separation)
-(NSArray *)componentsSeparatedByBlank
{
    return [self componentsSeparatedByString:@" "];
}
@end 
```

或使用空格字符集：

```
-(NSArray *)componentsSeparatedByWhiteSpace
{
    NSArray *array = [self componentsSeparatedByCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];
    return [array filteredArrayUsingPredicate: [NSPredicate predicateWithFormat:@"SELF != ''"]];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:21:54.620

> 我在这里正确使用保留吗？

不会。 NSMutableArray 会保留您添加到其中的对象。然后，当您调用 remove 或数组被解除分配时，它会释放它们。你不需要在这里调用retain。但是，这不是您遇到 EXC_BAD_ACCESS 的原因

正如 vikingosegundo 所说，addObject 不会返回任何内容，因此在其上调用 retain 会为您提供 EXC_BAD_ACCESS。

您尝试执行的正确语法是（注意：不需要按照上面的说明执行此操作）

```
[result addObject:[s retain]]; // BAD 
```

所以，总而言之，只是

```
[result addObject:s]; // GOOD - s is retained by result 
```

编辑 * 重写海报原始代码...

```
-(NSArray*)arrayFromString:(NSString*)str // Note naming convention of method
{
    NSMutableArray *arr = [str componentsSeparatedByString:@" "]; // Won't give you any 0 length strings

// Do some other character/validation checks here?

    return arr; // returns autoreleased NSMutableArray complying to naming convention
} 
```

如果您不想在返回字符串之前对字符串做任何事情，您可以在 createChapters 方法中使用它...

```
NSArray *arr = [[[(CXMLElement*)node attributeForName:@"pids"] stringValue] componentsSeparatedByString:@" "];
[chapter.pids addObjectsFromArray:arr]; 
```

请阅读内存管理和命名约定，将来会为您节省大量时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:17:18.430

```
[[result addObject:s] retain]; 
```

是一种无效的方法。这意味着它不会返回任何值，例如：

```
- (NSString)methodThatReturnsString; 
```

将。你保留了一个空虚，它不保留任何东西，因为空虚基本上没有任何意义。但是，您将数组添加到的对象由数组保留。

# winapi - 文件的图像

> ID：11032821
> 
> 赞同：0
> 
> 时间：2012-06-14T12:13:13.353
> 
> 标签：winapi, memory-management, paging, virtual-memory

当我们说“系统从页面文件分配足够的存储空间来保存文件的图像”时，文件的图像是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:18:03.687

文件的图像通常是可执行文件的内容。在能够执行应用程序（EXE、...还有 DLL、SYS..）之前，加载程序将适当的可执行部分（包含在介质上的文件中）复制到内存（映射）。一旦成功完成，加载程序会跳转到入口点（在内存中）并运行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:17:58.617

如果是这样，我认为是，您正在谈论`DLL`s 和类似的野兽：代码，即加载到正在运行的进程中。

在这种情况下，整个 DLL 被映射到（虚拟）内存中，然后这个内存被标记为可执行。这样做的需要源于这样一个事实，即通常代码不能从磁盘运行，而需要从内存运行。

# windows-phone-7 - 如何将 XAP 文件下载到 Windows Phone 7

> ID：11032828
> 
> 赞同：4
> 
> 时间：2012-06-14T12:13:27.850
> 
> 标签：windows-phone-7, cordova

如何将 XAP 文件下载到 Windows Phone 7？

> “无法下载文件 Windows Phone 不支持此文件类型。”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T12:17:44.747

转到开始 -> 所有程序 -> Windows Phone 开发人员工具 -> 应用程序部署。此工具允许您选择 XAP 文件并将其部署在开发人员解锁的手机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:03:52.043

仅完全（或使用 WP7RootTools）解锁设备并使用 XapDeployer 应用程序。

你可以在这里找到所有信息：http: [//forum.xda-developers.com/showthread.php?t=1555862](http://forum.xda-developers.com/showthread.php?t=1555862)

如果要安装，请使用随 SDK 安装的“应用程序部署”应用程序

# java - 在android中发送消息

> ID：11032843
> 
> 赞同：3
> 
> 时间：2012-06-14T12:14:24.777
> 
> 标签：java, android, sms

要在我的 android 应用程序中发送消息，我使用了以下代码。

```
package wishme.code;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Activity2 extends Activity{

    public void onCreate(Bundle savedInstancestate) {
        super.onCreate(savedInstancestate);
        setContentView(R.layout.main2);
        Button previous=(Button) findViewById(R.id.button_prev);
        Button send=(Button) findViewById(R.id.button_send);
        EditText ph_no=(EditText) findViewById(R.id.edit_phone);
        EditText msg=(EditText) findViewById(R.id.edit_msg);

    }
    public void prevclickhandler(View view)
    {
        switch(view.getId())
        {
        case R.id.button_prev:
        Intent intent=new Intent();
        setResult(RESULT_OK,intent);
        finish();
        break;
        case R.id.button_send:
            **String ph_no= ph_no.getText().tostring();** 
    }}
} 
```

但是突出显示的行给出了错误，即方法 getText 未定义类型字符串我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:16:29.800

您的变量在不同的范围内定义。ph_no EditText 在 onCreate 中定义，在您的点击处理程序中不可用。您实际调用 getText() 的 ph_no 是您正在定义的字符串。

相反，您可以将 Activity 中的 EditText 定义为实例变量并重命名您的 String，这样变量名称就不会发生冲突。

另一种方法是在需要访问 EditText 时调用 findViewById，如下所示：

```
String ph_no = ((EditText) findViewById(R.id.edit_phone)).getText().toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:16:35.510

为字符串使用不同的名称

```
 String str_ph_no= ph_no.getText().tostring(); 
```

作为局部变量获得偏好，因此它将“ph_no”视为字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:17:48.093

你想要的是这个我认为：

```
String ph_no_string = ph_no.getText().toString(); 
```

您首先将 ph_no 定义为 EditText，但稍后您将 ph_no 重新定义为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:19:14.607

ph_no 不是我们活动中定义的局部变量试试这个：

```
public class Activity2 extends Activity{ 
private EditText ph_no;

public void onCreate(Bundle savedInstancestate) {
    ...
    ph_no=(EditText) findViewById(R.id.edit_phone);
    ... 
```

并将您的字符串 ph_no 重命名为 ph_no_string 之类的其他名称

# perl - 使用 Perl 的数据签名

> ID：11032847
> 
> 赞同：3
> 
> 时间：2012-06-14T12:14:33.937
> 
> 标签：perl, digital-signature, digital-certificate

我一直是这个涉及发送签名数据的项目。

我已经获得了一个 .pem 文件和一个服务器证书，我应该将其导入另一台服务器，我应该使用这些文件从该服务器签署数据，然后将签署的数据发送到另一台服务器进行验证和处理。

我的问题是：

*   如何将这两个文件导入我的服务器？
*   如何使用 perl 使用文件对数据进行签名？

需要注意的是，我要导入到 linux (Suse) 中。

这是我到目前为止所做的我已将 .pem 文件添加到 /etc/ssl 我正在使用以下代码从 .pem 文件中读取然后对数据进行签名

```
my $rsa = new Crypt::RSA;
my $file = 'path to file';
my $key = new Crypt::RSA::Key::Private(  Filename => $file , Password => "*****");
my $signature = $rsa->sign(Message => $data, Key => $key, Armour => 0); 
```

当我尝试运行如下脚本时出现错误 Bareword 在 (eval 30) 第 4 行，靠近“/S2YUeaABL1sO3rk4HhjyDSMIJoc91n .....

我注意到 .pem 文件的内容在导致这些问题的文件中有斜杠。见样品

```
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCMdoWd+LEk22TMaEihLqwl8tJtuFzndJ8dTGrLw6twjfAeV0sg
PsDQbVu5/S2YUeaABL1sO3rk4HhjyDSMIJoc91nfE3kYueRxEA9eL5JlxPDg2Z3s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:46:22.863

1.  通过复制和粘贴读取[导入证书和私钥](http://www.cisco.com/en/US/products/hw/modules/ps2706/products_configuration_example09186a008037d1c8.shtml)

2.  RSA 登录 Perl（*未经测试的代码*）：

    ```
    use Crypt::OpenSSL::RSA;
    use File::Slurp;

    my $keystring = read_file('private_key.pem');
    my $private_key = Crypt::OpenSSL::RSA->new_private_key($keystring);
    $private_key->use_md5_hash(); # use_sha1_hash is the default
    my $signature = $private_key->sign($plaintext); 
    ```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:45:19.890

非常感谢它现在正在工作。我用你的例子稍作修改如下

```
use File::Slurp   qw(read_file);
use MIME::Base64  qw(encode_base64);    
require Crypt::OpenSSL::RSA;
my $keystring = read_file( 'path to file name' );
my $privatekey = Crypt::OpenSSL::RSA->new_private_key($keystring);
$privatekey->use_pkcs1_padding();
my $signature = $privatekey->sign($datatosign);
print encode_base64($signature, ''); 
```

# android - Android 小部件布局，Android 或 Eclipse 错误？

> ID：11032851
> 
> 赞同：1
> 
> 时间：2012-06-14T12:14:47.947
> 
> 标签：android, android-layout, android-widget

我有一个包含 a`Button`和的小部件`TextView`。`Button`单击时`Activity1`将显示，`TextView`单击`Activity2`时将显示。此外，当用户返回主屏幕时，文本会添加到`TextView`.

一切都很好，直到我决定一起更改按钮和文本，然后“BOOM！”

当我更改小部件的`xml`布局时，一切都颠倒了。我的意思是，当用户单击 时`Button`，`Activity2`将显示，当`TextView`单击时，`Activity1`将显示。即使用户返回主屏幕，文本也会显示在`Button`.

我取消了我的更改，一切都回到了第一种情况，除了文本仍然显示在按钮中。然后我做了*Clean & Build*但没有任何改变。最后，经过一些测试，我删除了“gen”文件并运行了项目，这次它又回到了初始状态。所以我尝试再次实施相同的更改，但遇到了同样的问题。

我想一起更改`Button`and `TextView`，但我不知道该怎么做。任何机构都有解决方案？提前致谢。

**编辑：**添加代码

小部件提供者：

```
public class DictionWidgetProvider extends AppWidgetProvider {

private RemoteViews views;
private RemoteViews hideViews;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    System.out.println("Update");

    for (int i = 0; i < appWidgetIds.length; i++) {
        int appWidgetId = appWidgetIds[i];

        registeOnClickForElements();
        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
}

@Override
public void onReceive(Context context, Intent intent) {

    if (App.HIDE_WIDGETS.equals(intent.getAction())) {
        hideWidgetInstances();
    } else if (App.UPDATE_WIDGET_STATIC_TEXT.equals(intent.getAction())) {
        String name = "lastWord";
        String lastWord = intent.getExtras().getString(name);
        views = new RemoteViews(context.getPackageName(),
                R.layout.widgetlayout);
        AppWidgetManager mManager = AppWidgetManager.getInstance(App
                .getContext());
        ComponentName cn = new ComponentName(App.getContext(),
                DictionWidgetProvider.class);
        registeOnClickForElements();
        views.setTextViewText(R.id.widgettextview, lastWord);
        mManager.updateAppWidget(cn, views);
    } else {
        super.onReceive(context, intent);
    }

}

private void hideWidgetInstances() {
    hideViews = new RemoteViews(App.getContext().getPackageName(),
            R.layout.hide);
    AppWidgetManager mManager = AppWidgetManager.getInstance(App
            .getContext());
    ComponentName cn = new ComponentName(App.getContext(),
            DictionWidgetProvider.class);
    mManager.updateAppWidget(cn, hideViews);
}

private void registeOnClickForElements() {

    views = new RemoteViews(App.getContext().getPackageName(),
            R.layout.widgetlayout);
    // register on click for text view:
    Intent sampleActivityIntent = new Intent(App.getContext(),
            SampleActivity.class);
    sampleActivityIntent.setAction(App.WIDGET_TEXTVIEW_CLICKED);
    PendingIntent sampleActivityPendingIntent = PendingIntent.getActivity(
            App.getContext(), 0, sampleActivityIntent, 0);
    views.setOnClickPendingIntent(R.id.widgettextview,
            sampleActivityPendingIntent);

    // register on click for "openDictionary" button:
    String category = "requesterFromWidget";
    Intent dictionActivityIntent = new Intent(App.getContext(),
            DictionActivity.class);
    dictionActivityIntent.setAction(App.WIDGET_OPEN_DICTIONARY_CLICKED);
    dictionActivityIntent.addCategory(category);
    PendingIntent dictionActivityPendingIntent = PendingIntent.getActivity(
            App.getContext(), 0, dictionActivityIntent, 0);
    views.setOnClickPendingIntent(R.id.openDictionary,
            dictionActivityPendingIntent);
}

} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="250dp"
    android:layout_height="60dp"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/widgettextview"
            android:layout_width="160dp"
            android:layout_height="25dp"
            android:text="search" />

        <Button
            android:id="@+id/speaker"
            android:layout_width="30dp"
            android:layout_height="25dp"/>

        <Button
            android:id="@+id/openDictionary"
            android:layout_width="30dp"
            android:layout_height="25dp" />
    </LinearLayout>

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="3dp"
        android:src="@drawable/splitter" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:30:52.857

这似乎是一个错误，我解决了我的问题：
我强制更改，然后在 xml 布局中更改了视图的 id 并保存了所有（`Ctrl + shift + s`在 eclipse 中）。然后我再次将它的值返回到以前的值并保存了所有。

# c# - .cs 文件在我修改后加载时会被编译吗？

> ID：11032855
> 
> 赞同：5
> 
> 时间：2012-06-14T12:14:56.153
> 
> 标签：c#, asp.net, .net

我有一个我正在尝试编辑的 ASP.NET 网站，但是我的 Visual Studio 坏了。有人刚刚告诉我，我可以简单地使用任何文本编辑器来修改实时网络服务器上的 .cs 文件，并且无论何时打开页面，它们都会自动编译。

谁能解释这是真的还是假的？

我做了一些谷歌搜索，提到了 JIT 编译。但我仍然不太清楚它的含义以及它在 .NET 中的使用方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:16:18.413

这取决于您的服务器设置，但是是的，您可以直接编辑它们，只要您没有走页面预编译路线（假设那里有 .cs 文件，它看起来不像），应该会接受更改通过 IIS。我不会在实时网络服务器上这样做，除非你真的确定你正在做的改变。

PS：备份。使他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:09:20.390

如果它是 .aspx 文件，那么它会很好，但对于 .cs 文件，您不可能必须再次重新发布该站点...因为 dll 是在您发布站点时创建的...之后您无法修改地点...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:19:42.817

如果您只是将网站内容复制并粘贴到网络服务器而不是发布它（我猜您这样做了），它将为您工作。但是将您的 cs 文件与网络服务器对接并不是一个好习惯。最好的方法是发布您的网站并将发布的文件放到网络服务器上。这样，只有需要的程序集才会在服务器上，而不是您的源代码。

# java - Java Hash 值：如何使它们有效地进行比较？

> ID：11032858
> 
> 赞同：3
> 
> 时间：2012-06-14T12:15:04.840
> 
> 标签：java, hash, comparison, comparable

我有成对的哈希值，比如

> 1.  128ecf542a35ac5270a87dc740918404;d603ac0c04b9d08974482ae7fd4cf55
> 2.  a1288b1c7e2257a90bad9bdfb7690fbb;f23828e312d90cb7fdadd6479236119c
> 3.  ……………………………………………………………………………………………………………………………………………………………………………… …………………………………………………………………………

我想让每一对都与其他对进行比较，这意味着：

> 128ecf542a35ac5270a87dc740918404;d603ac0c04b9d08974482ae7fd4cf55d

保持原样；

如果是

> d603ac0c04b9d08974482ae7fd4cf55d;128ecf542a35ac5270a87dc74091840

4、应该变成

> 128ecf542a35ac5270a87dc740918404;d603ac0c04b9d08974482ae7fd4cf55d

我的主要目标是拥有一个特定的函数，它比较一对的两个哈希值并返回一对，其中的值根据某些规则在其中排序。规则本身无关紧要，唯一的要求是，它应该非常快，并且应该始终给出相同的结果，因为输入是 (unique1,unique2) 或 (unique2,unique1)

谢谢！

一种明显但低效的方法是仅对每个哈希值中包含的数字求和并进行比较，然后将总和较小的哈希值作为对中的第一个元素，将较大的哈希值放在第二个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:20:36.633

只需将两个字符串与通常的字符串比较 ( `compareTo`) 进行比较，然后将较小的字符串放在第一位。这将保证你想要什么。我希望这非常便宜，因为实际上哈希值在前几个字符中已经不同，然后比较不需要查看其余的字符串。此外，访问和比较非常少的字节数（如您的示例）无论如何都非常便宜，以至于只有与程序执行的其他操作相比，您经常这样做才能看到性能影响。

如果您没有将值作为字符串，而是作为字节数组或类似的东西，只需自己实现一个简单的字典比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:21:18.913

编辑：我刚刚再次阅读了您的问题和主要目标。**我的答案是比较两对**。

如果您想对一对中的两个散列值进行排序，请线性比较两个散列值，并且在字符的第一个不匹配时将较低的值放在第一位。前几个字节的值已经不同的可能性很大。

* * *

我不认为你可以在 Java 中做到这一点，但你可以在 C/ASM 中为它创建一个函数，然后通过 JNI 从 Java 中使用它。

让我们看看：这些是成对的 32 字节哈希值。您知道这些对在“;”处分隔的位置 字节 32。

让你的耦合哈希值作为`hahsA := (hA1;hA2)`和`hashB := (hB1;hB2)`

你拿第一对：

1) 获取 0-15 和 33-49 字节到两个 SSE 寄存器并异或

```
hashA[0-15] := ( hashA1[0-15] XOR hashA2[0-15] ). 
```

2) 获取 16-31 和 50-65 字节到 SSE 寄存器并对其进行异或

```
hashA[16-31] := ( hashA1[16-31] XOR hashA2[16-31] ). 
```

现在您有两个 SSE 寄存器，其中填充了这对夫妇的第一个和第二个 16 字节的 XOR：

```
XMM0: hashA[0-15]
XMM1: hashA[16-31] 
```

你拿第二对做同样的事情。您有 8 个 SSE 寄存器，因此您可能不需要在 2) 之后从寄存器中获取值。

现在你有：

```
XMM0: hA[0-15]
XMM1: hA[16-31]
XMM2: hB[0-15]
XMM3: hB[16-31]

if( XMM0 == XMM2 AND XMM1 == XMM3 ) then hA and hB are equal. 
```

当然，如果你的哈希码大于 32 字节，你需要做进一步的步骤，但假设你的哈希码都是相同的长度，这个算法需要：

1) 加载两个 16 字节和 xor = 3 条指令 2) 3 条指令

1) 和 2) 再次用于第二对：6 条指令最后 2 条比较指令和 1 条 AND 指令

对于每对比较的夫妇来说，这总结为 15 条指令，而不是测量函数调用。我不能说它是 O(1)，因为如果哈希值更大，那么指令的数量也会增加。

如果效率真的很重要，这是一条路要走。但无论如何，我认为你不能少于 O(n)，因为你必须比较所有字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:11:06.420

很容易优化两个字符串不相等的情况，并且 的实现`String.equals(Object)`已经这样做了。

但是，两个字符串相等但不相等的情况`==`本质上是`O(N)`.

现在可以在某些情况下对此进行改进：

*   您能够向对象添加额外的私有字段，
*   对象的状态对于`equals`操作员来说必须是稳定的，并且
*   同一组对象实例需要反复比较。

在这些前提条件下，有一种算法倾向于`O(1)`。但是，您不能将其应用于表示为 String 值的哈希值，因为第一个和（可能）第三个条件不成立。

# c# - 检查资源使用情况的单元测试

> ID：11032861
> 
> 赞同：1
> 
> 时间：2012-06-14T12:15:17.243
> 
> 标签：c#, unit-testing, resources

我有一个巨大的解决方案，里面有很多项目。我有一个包含字符串资源的资源文件。我需要一个单元测试来检查资源文件中的每个字符串资源是否在解决方案代码的某处使用。我的想法是 1) 将资源文件解析为 xml 文件并从中获取每个特定资源字符串的 ID 2) 将所有源代码文件解析为简单的文本文件并在那里查找该 ID。如果它存在于某处，则意味着此字符串资源已在代码中使用。

但是这里出现了一个问题：如何从单元测试中确定代码所在的目录？（它可以在不同的地方，我无法对其进行硬编码）

你有什么建议？是否有另一种方法来检查每个资源的可用性？如果没有，如何获取代码来自单元测试的目录？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:56:58.460

您可以尝试将其嵌入到您的应用程序中的某个位置：

```
string currentFile=new System.Diagnostics.StackTrace(true).GetFrame(0).GetFileName(); 
```

顺便说一句：当人们对“单元测试”应该或不应该做什么变得迂腐时，我讨厌它。如果这是一个有用的测试，那就去做吧。

# jquery - 使用 JQuery 在 HTML 表中添加或编辑元素

> ID：11032862
> 
> 赞同：2
> 
> 时间：2012-06-14T12:15:18.257
> 
> 标签：jquery, html

我有一个 HTML 表格，里面有一些元素：

```
<table width='700px' id="employeetable" class="tablesorter" style='table-layout:fixed;'>
<thead>
    <tr>
        <th>Select to Edit</th>
        <th>Group Id</th>
        <th>User Id</th>
        <th>Object</th>
        <th>Read</th>
        <th>Update</th>
        <th>Insert</th>
        <th>Delete</th>
    </tr>
</thead>
<tbody>
    {foreach from=$privileges item=privilegesItem name=foo}
    <tr>
        <td align="center"><input id='{$smarty.foreach.foo.iteration}' type="radio" name="SelcetedObject" value= "{$privilegesItem['Object']}"/> </td>
        <td align="center">{$privilegesItem['group_id']}</td>
        <td align="center">{$privilegesItem['user_id']}</td>
        <td align="center">{$privilegesItem['Object']}</td>
        <td id='read_{$smarty.foreach.foo.iteration}'   align="center">{$privilegesItem['Read']}  </td>
        <td id='update_{$smarty.foreach.foo.iteration}' align="center">{$privilegesItem['Update']}</td>
        <td id='insert_{$smarty.foreach.foo.iteration}' align="center">{$privilegesItem['Insert']}</td>
        <td id='delete_{$smarty.foreach.foo.iteration}' align="center">{$privilegesItem['Delete']}</td>
    </tr>
    {/foreach}
</tbody> 
```

我现在可以删除一个元素

```
$("input[type='radio']:checked").each(function () {
        var id = this.id;
        var id_read = '#read_'+id;

        $(id_read).remove(); 
```

但我想编辑表格中的元素而不是删除它。编辑：例如，如果我的 Read 项目的值为 10，我想将其更改为 2，或者我不想使用简单的值，而是想用复选框替换它。

请问我该怎么做？使用 .add ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:22:44.493

如果您想更改 td 元素内的文本，您可以这样做

```
$(id_read).text("Permitted") //Forbidden
$(id_read).css() //change its style 
```

如果您解释“编辑”的含义，我可能会提供更好的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:02:07.393

一个可编辑的表格听起来有点像你的意思。下面将用要编辑的输入替换您的数据，然后再返回。

```
$(document).ready(function() {
    $(".tablesorter td").not(':first').on('click',null,function() {
       var data = $(this).html();
        if(!($(this).children('input').length > 0)) {
            $(this).html("<input type='text' id='focus' value='"+data+"' />").children().focus();
        }
    });

    $(".tablesorter td").on('blur','#focus',function() {
       $(this).parent().html($(this).val());
    });
});​ 
```

[小提琴](http://jsfiddle.net/SM2KQ/1/)

# c# - 使用 Html Agility Pack 解析 Html

> ID：11032863
> 
> 赞同：2
> 
> 时间：2012-06-14T12:15:20.223
> 
> 标签：c#, c#-4.0, html-parsing, html-agility-pack

我有这个 html

```
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<div style="background: #5b7fa6; padding: 2px 3px 3px 3px; border-bottom: 1px solid #6f91bb;">
<b style="color: #FFFFFF;">Gain Access to VK</b>
</div>
<div style="border-top: 1px solid #4a6a91; padding:10px;">
<div style="background: #ffffff; border: 1px solid #adbbca; padding: 5px;'">
<form method="POST" action="https://login.vk.com/?act=login&amp;soft=1&amp;utf8=1">
</form>
</div>  
</div>
</body></html> 
```

我想在表单元素中获取 action 属性的值。我使用这段代码

```
 HtmlNode formNode = htmlDoc.DocumentNode.SelectSingleNode("html/body/div[2]/div/form");
    if (formNode != null)
    {
        var action = formNode.GetAttributeValue("action", string.Empty);
        if(!string.IsNullOrEmpty(action))
        {
            //to do 
        }
    } 
```

但 formNode 为空。我认为'DOCTYPE'中的问题。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:46:57.567

因为`form`标签只出现一次为什么不尝试这样的事情

```
HtmlNode formNode = htmlDoc.DocumentNode.SelectSingleNode("//form"); 
```

# asp.net - Web Config 转换以添加子元素

> ID：11032868
> 
> 赞同：106
> 
> 时间：2012-06-14T12:15:36.777
> 
> 标签：asp.net, web-config, web-config-transform

我在 web.config 中有以下配置：

```
 <resizer>
    <sizelimits imageWidth="0" />
    <plugins>
      <add name="MvcRoutingShim" />
      <!--<add name="AzureReader" connectionString="DataConnectionString" /> -->
      <add name="DiskCache" />
      <add name="PrettyGifs" />
      <add name="AnimatedGifs" />
    </plugins>
  </resizer> 
```

在 web.config.Release 中，如何将 AzureReader 元素添加为 plugins 元素的子元素（有效地取消对上述内容的注释）？

我熟悉如何进行基本转换，但以前从未这样做过。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-06-14T14:57:59.693

您可以使用`Insert`转换：

```
 <resizer>
    <plugins>
      <add name="AzureReader" connectionString="DataConnectionString" 
           xdt:Transform="Insert" />
    </plugins>
  </resizer> 
```

[Web 应用程序项目部署的 Web.config 转换语法](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T14:53:59.820

如果您想使用 XSLT 来完成，那么这里有一些指导，因为我现在没有时间来解决这个问题。

1.  查找恒等变换。这将为您提供一个简单的 XSLT，它可以准确地复制所读取的内容。
2.  在具有以下匹配的通用模板上方添加一个模板`match="add[@name='MvcRoutingShim']"`
3.  在模板中输出您正在使用的元素`xsl:copy`，然后输出 AzureReader add 元素

那应该让你继续前进。

确保您有一个允许您进行转换的 XML 编辑器，以便您可以在本地进行试验，直到正确为止。

# xml - 变换删除重复项，从重复项中取一个元素

> ID：11032875
> 
> 赞同：2
> 
> 时间：2012-06-14T12:16:04.460
> 
> 标签：xml, xslt-1.0

问题与此类似， Dimitre 已回答[的较早问题。](https://stackoverflow.com/questions/11001133/transform-to-remove-duplicate-and-copy-rest)响应 xml 中略有修改。然而这一次，我们需要从重复块中提取一个元素。不确定我们是否可以在这里使用 xsl 键功能。

我的输入xml

```
<M>
   <a>
      <b>
         <c f="123">
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <c f="123">
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <c f="567">
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <somethingelse/>
      </b>
   </a>
</M> 
```

我想要的输出 xml - 请注意，除了删除重复项之外，我们还需要从重复块中获取关键元素。它可能相同也可能不同。

```
<M>
   <a>
      <b>
         <c f="123">
            <key>Al</key>
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <c f="567">
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <somethingelse/>
      </b>
   </a>
</M> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:42:45.793

**这种转变**：

```
<xsl:stylesheet version="1.0"
         xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
         <xsl:output omit-xml-declaration="yes" indent="yes"/>
         <xsl:strip-space elements="*"/>

         <xsl:key name="kAByC-F" match="a" use="*/c/@f"/>

         <xsl:template match="node()|@*">
             <xsl:copy>
               <xsl:apply-templates select="node()|@*"/>
             </xsl:copy>
         </xsl:template>

         <xsl:template match=
          "a[*/c
           and
             not(generate-id()
                =
                 generate-id(key('kAByC-F', */c/@f)[1])
                 )
            ]"/>

         <xsl:template match="a/b/c[@f]">
          <c f="{@f}">
            <xsl:apply-templates select="key('kAByC-F', @f)/b/c/key"/>
            <xsl:apply-templates select="*[not(self::key)]"/>
          </c>
         </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<M>
    <a>
        <b>
            <c f="123">
                <key>Al</key>
                <e NO="678">
                    <f>Y</f>
                    <g>
                        <h>FTO</h>
                    </g>
                </e>
            </c>
        </b>
    </a>
    <a>
        <b>
            <c f="123">
                <key>Al</key>
                <e NO="678">
                    <f>Y</f>
                    <g>
                        <h>FTO</h>
                    </g>
                </e>
            </c>
        </b>
    </a>
    <a>
        <b>
            <c f="567">
                <key>Al</key>
                <e NO="678">
                    <f>Y</f>
                    <g>
                        <h>FTO</h>
                    </g>
                </e>
            </c>
        </b>
    </a>
    <a>
        <b>
            <somethingelse/>
        </b>
    </a>
</M> 
```

**产生想要的正确结果**：

```
<M>
   <a>
      <b>
         <c f="123">
            <key>Al</key>
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <c f="567">
            <key>Al</key>
            <e NO="678">
               <f>Y</f>
               <g>
                  <h>FTO</h>
               </g>
            </e>
         </c>
      </b>
   </a>
   <a>
      <b>
         <somethingelse/>
      </b>
   </a>
</M> 
```

**说明**：

1.  **[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制每个节点。它被两个匹配特定节点的模板覆盖。

2.  第一个覆盖模板删除所有不是使用键（ **[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**）指定`a`的第一个元素的元素。`a`

3.  第二个覆盖模板匹配并处理`c`未删除（由第一个覆盖模板）元素的孙子`a`元素。

# java - 服务调用时的 java.lang.IllegalArgumentException

> ID：11032878
> 
> 赞同：3
> 
> 时间：2012-06-14T12:16:07.383
> 
> 标签：java, web-services, illegalargumentexception

我被一个问题困住了，我还没有找到错误的真正原因。尝试`java.lang.IllegalArgumentException: The MessageContext does not have an associated SOAPFault`从客户端调用 Web 服务方法时出现错误。不幸的是，网上关于问题的来源和解决方案的信息很少。在其中一个论坛中，我看到一篇帖子指出“当 JSON 响应出现故障时，这种情况发生在客户端”。

下面是堆栈跟踪，任何帮助表示赞赏。

```
java.lang.IllegalArgumentException: The MessageContext does not have an associated SOAPFault.
            at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:556)
            at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
            at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
            at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
            at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
            at tr.com.innova.ws.client.uavt.UavtServiceStub.degisiklikSorgula(UavtServiceStub.java:1089)
            at tr.com.innova.schedule.SenkronizasyonJobV2.execute(SenkronizasyonJobV2.java:199)
            at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
            at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:531) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:27:45.827

显然，我们试图从服务器请求服务的客户端被服务器阻止，这可能导致消息上下文发生了一些变化。一旦我们将服务器配置为允许来自客户端计算机的请求，它就可以正常工作，没有任何异常。

# asp.net - 按下浏览器后退按钮时清除表单数据

> ID：11032885
> 
> 赞同：1
> 
> 时间：2012-06-14T12:16:32.920
> 
> 标签：asp.net, asp.net-mvc, sharepoint-2010

我在我的 asp.net 表单控件中使用视图概念。我的第一个视图包含一个捕获用户详细信息的表单。当用户按下继续时，它将移动到第二个视图。问题是，当用户按下浏览器的后退按钮时，它不会保留先前输入的数据的状态。表单被清除。

我们不能同时使用视图状态和会话，因为它们在后退按钮单击时被重置，

我们可以采取任何解决方案来克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:38:59.127

假设您使用的是 MVC，如果在第一个视图和第二个视图之间发生了一个帖子，您可以将来自第一个视图的数据存储在服务器上的用户会话中，这不应该通过单击后退按钮来休息。您可以通过设置 NoCache 属性来强制浏览器在返回按钮导航上重新加载第一个表单。然后，只需检查他们的会话中是否有任何现有的表单数据，并在他们请求该操作时填充它。

# regex - 如何使用 Yahoo 管道获得包含描述和图像的完整文章？

> ID：11032887
> 
> 赞同：2
> 
> 时间：2012-06-14T12:16:39.787
> 
> 标签：regex, rss, yahoo-pipes

[http://bit.ly/4z5IFj](http://bit.ly/4z5IFj)

此 rss 提要不包含帖子图像，可能是因为该站点对图像的排列不正确。图像出现在标题上方，图像也没有完整（如在 css 中）

示例帖子：[http ://bit.ly/LEj3tj](http://bit.ly/LEj3tj)

```
<div id="newsItemComplete">
<p><img src="news_images/712315777drugs1.jpg" alt="Over 19,000 suspects ...." /></p>

<h2 class="completeNewsTitle" style="margin-top:10px;">Over 19,000 suspects ....</h2>   

<p class="newsDateStamp"  style="width:100%; float:left; margin:0;">June 14, 2012&nbsp;&nbsp;05:04 pm</p>
</div>

<div class="newsContent"  style="width:100%; float:left; clear:both; margin-bottom:5px;"> 

<p>The police have seized ....</p>         
</div> 
</div>
<div class="clearFix"></div>

<!-- control:news headline item ends here --><!-- control:category list starts here -->
<!-- control:category list ends here -->
<!-- headline news article  --> 
```

我想得到与描述相对应的完整文章并获取图像，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:44:28.890

干得好，但它并不完全正确。

当您将管道输出放入网页时，不会显示任何图像，因为链接是**相**对于原始网站而不是您的。您可以使用正则表达式模块插入缺少的 URL 的其余部分并使链接成为**绝对**链接，但原始网站会对您热链接到他们的图像不满意。

雅虎管道无法仅获取指向它们的链接的图像。让您的网站获取这些图像的副本有点复杂，最好使用 PHP 从您的网站服务器上进行所有抓取。

其他需要注意的**Fetch Page** Module 可能会在六个月或更短的时间内消失，因此您现在真的需要开始使用**XPATH Fetch Page** Module。

这是一个不完整的管道，可根据您的要求帮助您入门。 [http://pipes.yahoo.com/pipes/pipe.info?_id=d7aba8c124693f3af888838ca12ac547](http://pipes.yahoo.com/pipes/pipe.info?_id=d7aba8c124693f3af888838ca12ac547)

**顺便说一句**，不要忘记将您自己的 ID 代码换成广告和“喜欢”按钮，或者使用正则表达式模块将它们完全删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:10:14.860

我自己修好了，这里是截图。它获取链接并获取我想要的部分并将其复制到描述中。

![http://i.stack.imgur.com/CZ1lx.png](../Images/63ad4284650da1adbfc683981c7ef87a.png)

# html - 输入框名称：为什么用 [ ] 命名？

> ID：11032892
> 
> 赞同：4
> 
> 时间：2012-06-14T12:16:55.887
> 
> 标签：html, asp-classic

由于我仍在尝试解决我的其他问题（[这里](https://stackoverflow.com/questions/11007953/jquery-selectors-can-i-use-class-for-select-lists)需要一些帮助！），我正在探索如何命名相同但在不同行上的表单元素。

按照[此处](http://eftakhairul.com/dynamically-add-and-delete-html-table-row-on-user-click-using-jquery/)的示例，文章的作者将他的文本框命名为“input_box_one”。他编写的 jQuery 函数也将输入框复制为具有相同名称。我想知道这样命名他的文本框的原因，以及他要编写的服务器脚本如何从名称相似的文本框中收集输入？

我将用经典的 ASP 编写。

```
<table id = "options-table">                    
    <tr>
        <td>Input-Box-One</td>
        <td>Input-Box-Two</td>
        <td>&nbsp;</td>
    </tr>

    <tr>
        <td><input type = "text"    name = "input_box_one[]" /></td>
        <td><input type = "text"    name = "input_box_two[]" /></td>
        <td><input type = "button" class = "del" value = "Delete" /></td>
    </tr>                  

    <tr>
        <td><input type = "text"    name = "input_box_one[]" /></td>
        <td><input type = "text"    name = "input_box_two[]" /></td>
        <td><input type = "button" class = "add" value = "Add More" /></td>
    </tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T13:02:45.963

在 ASP Classic 中，`Request.Form("someName")`返回一个实现`IStringList`接口的对象。该接口有两个成员`Item([i]])`，一个是默认属性，另一个是`Count`.

如果您发布到 ASP，您应该删除 [] 后缀。您可以使用附加的索引器参数访问使用相同名称的多个值`i`。例如

```
 Dim someValue :  someValue = Request.Form("someName")(2) 
```

我不记得这个集合是基于 0 还是 1，但应该很容易测试。该对象也可能支持`For Each`，但在您的场景中可能没有那么有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T12:18:41.313

`[]`是PHP主义。它使 PHP 表单解析器将数据表示为数组`$_POST['fieldname']`或`$_GET['fieldname']`数组。

PHP 是我所知道的唯一一种语言，标准 HTML 表单数据解析器需要数据中的特殊名称才能在标量模式和数组模式之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:21:44.167

`name`在 Classic ASP 中，多个具有相同名称的输入字段将在 input 属性下显示为逗号分隔值。

所以，

```
<input type="text" name="input_box_one[]" value="foo" />
<input type="text" name="input_box_one[]" value="bar" /> 
```

在`form`经典 ASP 中提交后，`request.form("input_box_one[]")`

会给你：

`"foo,bar"`

# iphone - 访问Web服务器，获取目录中的所有文件

> ID：11032895
> 
> 赞同：1
> 
> 时间：2012-06-14T12:17:06.247
> 
> 标签：iphone, objective-c, xcode, cocoa

我正在尝试访问 Web 服务器并获取目录中的所有文件，但仅使用指向目录的链接，而不使用指向单个文件的链接。有没有办法做到这一点？NSFileManager 有一个 getURLsToFilesInDirectory 或类似的东西，但它似乎不适用于服务器。任何帮助是极大的赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:33:52.173

我认为如果没有任何服务器端代码，这是不可能的。我建议编写代码从 php 目录中读取文件并列出 json 文件中的条目

[这个问题](https://stackoverflow.com/questions/9044441/automatically-create-a-json-file-which-lists-all-images-in-a-directory)将帮助你做到这一点

# java - 使用 Java 运行 Asterisk CLI

> ID：11032898
> 
> 赞同：2
> 
> 时间：2012-06-14T12:17:19.240
> 
> 标签：java, command-line-interface, asterisk

我正在尝试使用 Java 运行 Asterisk CLI。例如

```
asterisk -rx "core show license" 
```

我像这样实现Java代码

```
 Process p = Runtime.getRuntime().exec("asterisk -rx \"core show license\"");
        p.waitFor();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                p.getInputStream()));
        String line = reader.readLine(); 
```

但我得到的是

```
No such command '"core' (type 'core show help core' for other possible commands) 
```

从 Linux 控制台。

我想知道我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:27:38.863

这种方式怎么样：

```
Process p = Runtime.getRuntime().exec(
    new String[] {"asterisk", "-rx", "core show license"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:25:51.893

```
Process p = Runtime.getRuntime().exec(new String[]{"asterisk","-rx","\"core show license\""}); 
```

在您的版本[exec(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)中，String 将由默认的 StringTokenizer 进行标记，该 StringTokenizer 用空格分隔标记。这就是星号中未知的“核心命令”的原因。

（不舒尔，如果“core show license”命令必须加引号）

# bash - bash - 直接从调用函数返回返回值

> ID：11032902
> 
> 赞同：2
> 
> 时间：2012-06-14T12:17:29.800
> 
> 标签：bash

在bash中，如何直接返回调用函数返回的返回值（sry，我不知道如何更好地表达这个）。例子：

```
foo() {
  echo "$1"
  return 1
}

bar() {
  return foo 1
}

bar 
```

如果我这样做，bash 会抱怨 return 语句需要一个数字参数。

**编辑**

我更新了我的示例以更好地表达真正的问题。我不仅想返回返回码，我还想先将一个值传递给函数......不确定这是否真的可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:22:41.533

您可以从 shell 脚本或 shell 函数返回的唯一内容是数字错误代码。

但是，您可以使用 echo、cat 等将一些文本打印到函数中的标准输出（或单独的脚本，它是相同的），然后使用 bacticks 语法或 $(...) 语法捕获输出。将参数传递给 shell 函数的工作方式与将参数传递给脚本的方式相同：

[http://www.freeos.com/guides/lsst/advance01.html](http://www.freeos.com/guides/lsst/advance01.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:22:41.100

这应该有效：您只能在 bash 中返回一个数字。

```
foo() {
  return 1
}

bar() {
  foo
  return 1
}

bar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:29:50.823

您可以简单地返回最后一次调用 $? 的返回码：

```
foo() {
  echo "$1"
  return 1
}

bar() {
  foo "bla"
  return $?
}

bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T02:06:00.413

在您的示例的这些修改中，我将参数更改为`foo`以便更容易区分一个结果与另一个结果。

```
foo() {
  echo "$1"
  return 1
}

bar() {
  return "$(foo 2)"
}

bar
echo "$?" 
```

前面将输出“2”。`echo`in`foo`用作 的返回值`bar`。`return`( 和) 可以处理的值的范围`exit`是 0 到 255。

```
foo() {
  echo "$1"
  return 1
}

bar() {
  foo 2
  return "$?"
}

bar
echo "$?" 
```

第二个版本将首先输出 2 ，因为这就是输出 1 ，`foo`因为这是`bar`从 的返回值传播的返回值`foo`。

# ios - 查看使用图像调整大小

> ID：11032906
> 
> 赞同：0
> 
> 时间：2012-06-14T12:17:47.057
> 
> 标签：ios, ipad

我在主 UIView 上获得了 10 个视图，每个视图顶部都有按钮和图像，我设法用远程图像填充 ImageView，但我想在整个屏幕上适应该图像，我的意思是用 10 个变量视图填充图片。请任何指点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:28:14.497

每 10 个按钮设置：

```
[yourbutton setContentMode:UIViewContentModeScaleToFill] 
```

# javascript - 单击时打开图像的Javascript书签

> ID：11032913
> 
> 赞同：0
> 
> 时间：2012-06-14T12:18:14.090
> 
> 标签：javascript

我试图创建一个 JS 书签，当用户单击时，图像会在页面上的绝对位置 div 中打开，当前仅查看我不知道如何。

我有以下

```
newDiv=document.createElement("div");
var img=document.createElement('img');
img.src='http://www.dannemann.com/images/lensflarePhilosophy.png';
newDiv.appendChild(img);
my_div=document.body("org_div1");
document.body.append(newDiv) 
```

我尝试压缩它并添加 Javascript: 在它之前没有运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:23:10.677

确保在制作小书签时包装代码。

```
javascript:(function(){
   newDiv=document.createElement("div");
   var img=document.createElement('img');
   img.src='http://www.dannemann.com/images/lensflarePhilosophy.png';
   newDiv.appendChild(img);
   var bodyTag = document.getElementsByTagName('body') [0];
   bodyTag.appendChild(newDiv)
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:30:18.583

***更优化的版本：***

```
(function(){var d=document.createElement('div');d.innerHTML='<img src=\'http://www.dannemann.com/images/lensflarePhilosophy.png\' />';d.setAttribute('style','position:absolute;top:0;left:0;width:100%;height:100%;background:#666');document.body.appendChild(d);})() 
```

可读性：

```
var d = document.createElement('div');
d.innerHTML = '<img src=\'http://www.dannemann.com/images/lensflarePhilosophy.png\' />';
d.setAttribute('style','position:absolute;top:0;left:0;width:100%;height:100%;background:#666')
document.body.appendChild(d); 
```

* * *

干得好：

```
(function(){var div=document.createElement('div');var a=div.style;div.innerHTML='<img src=\'http://www.dannemann.com/images/lensflarePhilosophy.png\' />';a.position='absolute';a.top=0;a.left=0;a.width='100%';a.height='100%';a.background='#666';document.body.appendChild(div);})() 
```

可读版本：

```
var div = document.createElement('div');
var a = div.style;
div.innerHTML = '<img src=\'http://www.dannemann.com/images/lensflarePhilosophy.png\' />';
a.position = 'absolute';
a.top = 0;
a.left = 0;
a.width = '100%';
a.height = '100%';
a.background = '#666';
document.body.appendChild(div); 
```

* * *

只是几点：

*   就像其他人说的那样，该方法不是`append`（`append`用于 jQuery）。它是`appendChild`。
*   当您只想在动态创建的下嵌套一些标签时，`div`只需使用. 无需再次使用。`innerHTML``div``createElement`
*   `style`最好使用long `setAttribute`，因为它是一个书签，并且您的代码必须占用尽可能少的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:31:44.293

您需要使用`.appendChild()`（而不是`.append()`），即

```
document.body.appendChild(newDiv); 
```

这是一个[工作示例](http://jsfiddle.net/GNMkV/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:50:26.303

像这样尝试（当然，样式等完全取决于您，这是一个示例）：

```
javascript:(function(){var newDiv,img;
if (!document.querySelector('#imgoverlay')){
 newDiv =  document.createElement("div");
 newDiv.id = 'imgoverlay';
 document.body.appendChild(newDiv);
 with (newDiv.style){
   position = 'absolute';
   top: '0';
   bottom = '0';
   left = '0';
   right = '0';
   textAlign = 'center';
 }
} else {
 newDiv = document.querySelector('#imgoverlay');
}
newDiv.innerHTML = '';
img = new Image();
img.style.margin = '0 auto';
img.style.verticalAlign = 'middle';
img.src ='http://www.dannemann.com/images/lensflarePhilosophy.png';
newDiv.appendChild(img);}()) 
```

它在这里显示出明亮的太阳；）

# java - 为什么 Eclipse 将我的整个项目导出为可运行的 JAR 文件？

> ID：11032914
> 
> 赞同：11
> 
> 时间：2012-06-14T12:18:23.687
> 
> 标签：java, eclipse, jar

我有一个名为 Project1 的 Java 项目，其中包含大约十个包。在**package3**中，我有一个名为的类`MyPrgm`，我想将其导出为可运行的 jar。这很好，我可以在命令提示符/使用批处理文件中执行它。
但是，当我使用 WinRAR 打开`MyPrgrm.jar`存档时，我意识到 Project1 中的每个类都在存档中；有没有办法只导出程序运行所需的类？我正在使用 Eclipse IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:19:15.597

它这样做是因为你告诉它这样做。如果您只想导出一个包，则只导出一个包。例如，如果您右键单击项目并按 Export，Eclipse 将尝试导出项目中的所有内容，但您可以通过导出向导轻松地对其进行微调。如果您右键单击一个包并单击导出，那么 Eclipse 将尝试仅导出该包。

特别是查看导出向导的“Jar 文件规范”部分，您可以在其中挑选和选择要导出的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:27:09.500

如果您不想要 JAR 中的所有类，则只为该特定包选择导出，而不是为整个项目选择导出。

即使上述方法不起作用（没有理由不应该），您仍然可以从可执行文件中删除其他类。JAR 基本上是一个 ZIP 存档，您可以使用任何存档管理器打开它并根据需要添加/删除文件。

# scala - 密封特性/对象案例类字节码从 2.9.1 更改。到 2.9.2？

> ID：11032915
> 
> 赞同：4
> 
> 时间：2012-06-14T12:18:26.870
> 
> 标签：scala, scala-2.9, scala-java-interop

# 两个目录中的相同源文件

我想在 Java 类中引用 Errors.scala 中的以下密封特征。在 Scala 2.9.1 中，我能够将 Java 中的 Errors.TooBig 引用为 Errors$TooBig$，它在 2.9.2 中不再编译。

错误.scala

```
package com.abc

sealed trait Error

object Errors {
  case object TooBig extends Error
} 
```

JavaTest.java

```
import com.abc.Errors$TooBig$;
public class JavaTest {
} 
```

我在两个不同的目录（2.9.1/2.9.2）中有相同的源文件。我可以使用 2.9.1 编译源代码，但不能使用 2.9.2。

```
>2.9.1$ brew switch scala 2.9.1
>2.9.1$ scalac Errors.scala
>2.9.1$ javac -classpath .:/usr/local/Cellar/scala/2.9.1/libexec/lib/scala-library.jar JavaTest.java
>2.9.1$
>2.9.1$ cd ../2.9.2
>2.9.2$ brew switch scala 2.9.2
>2.9.2$ scalac Errors.scala
>2.9.2$ javac -classpath .:/usr/local/Cellar/scala/2.9.2/libexec/lib/scala-library.jar JavaTest.java
JavaTest.java:1: cannot find symbol
symbol  : class Errors$TooBig$
location: package com.abc
import com.abc.Errors$TooBig$;
              ^
1 error
}
} 
```

这是 com.abc.Errors$TooBig$ 类文件的 javap 转储的差异：

```
mhughes:~/scalatest$ diff 2.9.1/TooBig.txt 2.9.2/TooBig.txt 
2c2
< public final class com.abc.Errors$TooBig$ extends java.lang.Object implements com.abc.Error,scala.ScalaObject,scala.Product,scala.Serializable
---
> public final class com.abc.Errors$TooBig$ extends java.lang.Object implements com.abc.Error,scala.Product,scala.Serializable
5a6,7
>   InnerClass: 
>    public final #68= #9 of #67; //TooBig$=class com/abc/Errors$TooBig$ of class com/abc/Errors
73,80c75,84
< const #65 = Asciz com/abc/Error;
< const #66 = class #65;    //  com/abc/Error
< const #67 = Asciz scala/ScalaObject;
< const #68 = class #67;    //  scala/ScalaObject
< const #69 = Asciz scala/Product;
< const #70 = class #69;    //  scala/Product
< const #71 = Asciz scala/Serializable;
< const #72 = class #71;    //  scala/Serializable
---
> const #65 = Asciz InnerClasses;
> const #66 = Asciz com/abc/Errors;
> const #67 = class #66;    //  com/abc/Errors
> const #68 = Asciz TooBig$;
> const #69 = Asciz com/abc/Error;
> const #70 = class #69;    //  com/abc/Error
> const #71 = Asciz scala/Product;
> const #72 = class #71;    //  scala/Product
> const #73 = Asciz scala/Serializable;
> const #74 = class #73;    //  scala/Serializable 
```

您可以清楚地看到 2.9.1 和 2.9.2 都生成了一个名为 'Errors$TooBig$' 的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:20:20.187

您不应该依赖类名来从 Java 中检索 scala 对象。您可以编写一个旨在从 Java 调用的静态工厂：

```
package com.abc

sealed trait Error

object Errors {
  case object TooBig extends Error

  //Java API
  def getTooBig(): Error = TooBig
} 
```

然后，从 Java 调用它：

```
import com.abc.*;

Error tooBig = Errors.getTooBig(); 
```

# javascript - jQuery 工具验证器：url 和 %20

> ID：11032916
> 
> 赞同：1
> 
> 时间：2012-06-14T12:18:26.523
> 
> 标签：javascript, jquery, jquery-tools

我正在使用 jQuery 工具验证器来验证 url，但它认为 %20 的 url 无效（您可以在此处使用示例 reg 表单进行测试：[http](http://www.jquerytools.org/documentation/validator/index.html) ://www.jquerytools.org/documentation/validator/index.html ）

如果 url 包含空格字符而不是 %20，则一切正常。

问题是当你从 Chrome url 框中复制一个 url 时，你总是得到 %20 而不是空格。因此，从 Chrome 复制并粘贴到我的表单将不起作用。

认为 %20 无效的 url 和空格 char 有效的 url 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:25:51.777

> 认为 %20 无效的 url 和空格 char 有效的 url 是否正确？

不可以。URL 不得包含原始空格。它们必须表示为`%20`（或者`+`如果使用表单编码）

# sql - 操作 phpBB 标记所需的 TSQL 正则表达式函数

> ID：11032919
> 
> 赞同：2
> 
> 时间：2012-06-14T12:18:40.533
> 
> 标签：sql, regex, tsql

我有一个包含大量旧 phpBB 数据的数据库，其中包含带有以下文本的帖子：

```
[b:522f1e2c15]bold[/b:522f1e2c15]
[i:522f1e2c15]italic[/i:522f1e2c15]
[u:522f1e2c15]underline[/u:522f1e2c15]
[img:522f1e2c15]http://www.mysite.com/myimage.jpg[/img:522f1e2c15]
[quote:522f1e2c15="Mark"]quoted text by Mark[/quote:522f1e2c15] 
```

我们需要将此数据迁移到新系统，但作为该过程的一部分，我们需要替换出现在各种标签中的唯一 ID，因此上述内容将变为：

```
[b]bold[/b]
[i]italic[/i]
[u]underline[/u]
[img]http://www.mysite.com/myimage.jpg[/img]
[quote=Mark]quoted text by Mark[/quote] 
```

我希望一些 SQL RegEx 大师可以展示如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:29:56.617

只是一个可能的解决方案。使用正则表达式匹配组，然后排除唯一 id 组。

```
string pattern = @"(\[b)(:\w+)(\]\w+\[\/b)(:\w+)(\])";
string input = "[b:522f1e2c15]bold[/b:522f1e2c15]";
Match m = Regex.Match(input,pattern);
Console.WriteLine("{0}{1}{2}", m.Groups[1].Value, m.Groups[3].Value, m.Groups[5].Value); 
```

# .net - Visual Web Developer - 参考路径

> ID：11032923
> 
> 赞同：1
> 
> 时间：2012-06-14T12:18:46.960
> 
> 标签：.net, asp.net-mvc, windows, visual-studio-2010

当我在 VWD 2010 中添加引用时，.NET 选项卡中库的位置是 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0 但是，在安装 .NET 4.5 后，更新的库安装到 C:\Windows\Microsoft.NET\Framework\v4.0.30319。

如何将 VWD 设置为默认使用此位置？我猜有某种系统设置可以告诉 Windows .NET 库所在的位置，但找不到任何相关信息。

# html - 使用 Xslt 生成的 Html 丢失布局（ BRs 和 Ps ）

> ID：11032926
> 
> 赞同：1
> 
> 时间：2012-06-14T12:18:54.323
> 
> 标签：html, xslt

我正在尝试使用 xslt 为我在 html 中的阅读布局一些调试信息......但碰巧所有东西都只放在一行上！？试图找出问题所在，我将问题最小化为：

我的 xlst 可以应用于任何虚拟 xml 文件：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html><body><p>These<br/>words<br/>aren't<br/>seperated<br/>by<br/>BRs</body></html></xsl:template></xsl:stylesheet 
```

与我的预期相反，没有brs，一切都在一条线上。我在做什么明显的错误？

是否可能是由于 Internet Explorer 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:22:50.827

使用 XHTML 作为默认命名空间将默认样式表应用到 p 和 br 标记：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="html5.xml"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns="http://www.w3.org/1999/xhtml"
                >
<xsl:output method="xml" encoding="utf-8" version="" indent="yes" standalone="no" media-type="text/html" omit-xml-declaration="no" doctype-system="about:legacy-compat" />

<xsl:template match="xsl:stylesheet">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="/">
  <html>
    <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    </head>
    <body>
      These<br/>words<br/>are<br/>seperated<br/>by<br/>BRs
    </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

这个独立的样式表在保存为 html5.xml 时有效。

# c# - 仅当来自比较枚举的所有（非原始）值都包含在目标枚举中时才返回结果的查询

> ID：11032928
> 
> 赞同：3
> 
> 时间：2012-06-14T12:19:01.920
> 
> 标签：c#, linq, entity-framework, entity-framework-4, linq-to-entities

我们有一个名为**Unit**的实体集合、一个名为**UnitProp**的实体集合和一个名为**Prop**的实体集合，其定义如下（简化）：

```
class Unit
{
    int ID;
    ICollection<UnitProp> UnitProps;
}

class UnitProp
{
    int ID;
    int UnitID;
    Unit Unit;
    int PropID;
    Prop Prop;
}

class Prop
{
    int ID;
    string Description; 
} 
```

我们有一个`List`of `Prop`s（称为**RequiredProps**）我们需要用来查询集合。我们希望返回满足在**RequiredProps**中指定`Unit`所有 s 的条件的 s集合。`Prop`

 **我这样写查询：

```
var result = ctx.Units
    .Where(x => RequiredProps.AsEnumerable()
        .Except(x.UnitProps.Select(y => y.Prop))
        .Count() == 0)
    .ToList(); 
```

当然，这是 Linq to Entities，所以查询会抛出异常： **无法创建“Prop”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。**

我也试过这个：

```
var result = ctx.Units
    .Where(x => RequiredProps.Select(y => y.ID)
        .Except(x.UnitProps
            .Select(y => y.Prop)
            .Select(y => y.ID))
        .Count() == 0)
    .ToList(); 
```

...但它产生了同样的例外。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:26:13.710

```
var requiredIds = RequiredProps.Select(y => y.ID);

var result = ctx.Units
                .Where(m => !requiredIds
                    .Except(m.UnitProps.Select(x => x.Prop.ID)))
                    .Any())
                 .ToList(); 
```**

# http - 如何通过 HTTP 传输文件？

> ID：11032930
> 
> 赞同：2
> 
> 时间：2012-06-14T12:19:09.590
> 
> 标签：http, webdav, file-transfer

我正在寻找一种能够通过 HTTP 进行文件传输的解决方案。之所以需要，是因为我在防火墙后面的计算机之间进行连接，该防火墙仅允许通过端口 80 和 443 进行 HTTP 通信。

有人建议我使用 WebDAV，因为它是一个现成的解决方案，我的客户需要做的就是设置一个网络驱动器来访问这些文件。
通过 HTTP 传输文件还有哪些其他解决方案？
Base64 编码意味着我必须实现可能成为系统错误来源的客户端**和服务器。**

*编辑：* WebDAV 解决方案的优点在于它为客户提供了他们已经知道的环境 - 网络共享。任何方式来模拟这个（或给他们另一个熟悉的环境）以便于使用。我进入这个项目的假设是我的客户非常愚蠢，我真的不想抱怨使用困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:29:25.240

为什么不使用已经制作好的客户端，如“apache”或“tomcat”或任何其他可以“部署”文件的服务器。然后你可以实现某种用户界面（客户端）来“下载”文件。

服务器：Tomcat、Apache 任何其他可以提供文件的服务器

客户端：您可以实现一些 UI 来下载文件。

# c# - 如何在C#中将图像转换为文本

> ID：11032935
> 
> 赞同：0
> 
> 时间：2012-06-14T12:19:20.127
> 
> 标签：c#, ocr

在我的一个项目中，我需要将图像转换为文本。谷歌搜索后发现[Tessaract](http://code.google.com/p/tesseract-ocr/)可以做到这一点。但不知何故，我无法在我的应用程序中使用它。那么除了“Tessaract Engine”之外，还有其他方法可以将图像转换为文本吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:23:56.833

如果将您的图像转换为二进制有帮助，我给您代码。我认为您可以转换为 base64 以将图像作为字符串进行管理，但它比图像大。

```
public byte[] ImageToByte(Image image, System.Drawing.Imaging.ImageFormat format){
            using (MemoryStream ms = new MemoryStream())
            {
                // Convert Image to byte[]
                image.Save(ms, format);
                byte[] imageBytes = ms.ToArray();
                return imageBytes;
            }
        } 
```

如果您想将其转换为 base64，请告诉我。

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:04:13.053

Asprise OCR SDK for C# [http://www.pcworld.com/downloads/file/fid,141881-order,4/description.html](http://www.pcworld.com/downloads/file/fid,141881-order,4/description.html)

# sql-server-2008 - 如何解决错误：镜像时 sql server 中出现 1418

> ID：11032937
> 
> 赞同：15
> 
> 时间：2012-06-14T12:19:29.613
> 
> 标签：sql-server-2008, mirroring

我正在尝试在 sql server 中镜像数据库。我创建了一个数据库并对其进行了备份并在另一台服务器上恢复。但是在完成所有操作并单击开始镜像后，它会显示以下错误。我在见证服务器选项中输入了“否” ![在此处输入图像描述](../Images/22bd1cb551c90a4cdd46e1bc1a9eb91e.png)。

我按照此[链接](http://www.codeproject.com/Articles/31325/Step-by-Step-SQL-Mirroring-the-ASPState-Database)中的镜像步骤操作 这里说，在主服务器和镜像服务器上创建一个用户，在步骤 3 中使用相同的凭据。是否有必要在两台服务器上创建相同的用户？或有任何替代解决方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T11:14:30.523

我也面临同样的问题。您需要检查以下项目一次。

1.  转到 services.msc 并检查 sql server 在哪个帐户下运行。确保 sql server 和 sql server 代理服务应该使用相同的凭据运行。

2.  在镜像数据库服务器中，您应该执行与步骤 1 相同的步骤。提供与主体服务器中相同的凭据。如果该用户不存在，则使用相同的凭据在两台服务器上创建一个新用户。

3.  现在得到主体服务器并在 sql server 中添加新的登录名**Security-->Login**。将服务器角色指定为 Sysadmin 和 public。在镜像服务器上也添加相同的用户。

4.  现在在主体数据库中做镜像。你在那里没有得到任何错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T09:55:52.983

同样的问题，错误 1418。这里是否建议了所有内容：[链接](http://blog.sqlauthority.com/2010/01/11/the-server-network-address-tcpsqlserver5023-can-not-be-reached-or-does-not-exist-check-the-network-address-name-and-that-the-ports-for-the-local-and-remote-endpoints-are-operational-microso/)

事后看来，这很明显。完成 MIRRORING > CONFIGURE SECURITY WIZARD 后，您会看到一个解释结果的页面。查看 SQL1 和 SQL2 节点，这一行是关键：

```
On the principal server instance, SQL1
Listener Port: 5022
Encryption: **Yes**

On the mirror server instance, SQL2
Listener Port: 5022
Encryption: **No** 
```

解决方案。在所有 SQL 节点上完成向导后，执行：

```
drop endpoint Mirroring
go

CREATE ENDPOINT Mirroring
STATE = STARTED
AS TCP ( LISTENER_PORT = 5022 )
FOR DATABASE_MIRRORING 
(ENCRYPTION = DISABLED,ROLE=ALL)
GO 
```

点击开始镜像，问题解决。

希望能帮助某人斯科特

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T19:53:25.463

在用尽上述所有选项后，我对镜像环境进行了更改。我们有一个 SQL Server 2008 为 2014 Server 的 Principal-Mirror 配置做出贡献。2014 Sql 服务器也在 AlwaysOn 配置中用于其他一些 Db 的 HA。端点现在在 sql 2008 和 sql 2014 上以不同的方式命名。

得到上述错误后，我发现 2008 的加密是 RC4，而 2014 的加密是 AES。结果，它与 SQL2014 端点的握手失败。我使用以下命令和中提琴更改了加密以匹配 SQL 2008 的加密！

```
ALTER ENDPOINT [Hadr_endpoint]
    FOR DATA_MIRRORING ( ENCRYPTION  = REQUIRED ALGORITHM RC4 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T16:22:58.233

您也可能不会将用于镜像的副本置于恢复状态，必须将其保留以打开镜像。

通常，SQL Server 镜像的过程是：

1）备份原始数据库并将其复制到用于镜像的服务器。

2）备份事务日志并将其复制到用于镜像的服务器。

3) 从 MMC 中选择恢复数据库并找到数据库的备份并使用设置为保持非功能状态且不回滚事务的选项来恢复它。

4）选择恢复并选择文件，然后选择日志文件并恢复日志文件备份，也可以选择不回滚和不起作用。它是 sql server 2008 选项页面下的第二个单选按钮。

5) 到原数据库复制服务器，开启镜像。您需要使用在两台服务器上都具有系统管理员权限的帐户才能启动镜像对话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-15T07:01:18.777

我之前遇到过这个问题，所有的验证都通过了。最后使用一个新的端点，它可以工作。根本原因是 5022 可能会阻止其他会话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-25T16:37:16.117

通过在两台服务器上使用相同的驱动器号解决了我的错误 1418...

尽管 MS 建议您可以使用不同的字母，但我还是决定使用相同的驱动器字母...

来自女士：

> 此外，如果可能，我们建议镜像数据库的文件路径（包括驱动器号）与主体数据库的路径相同。如果文件路径必须不同，例如，如果主体数据库位于驱动器“F:”但镜像系统缺少 F: 驱动器，则必须在 RESTORE 语句中包含 MOVE 选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-10T17:37:43.720

对我来说，我遇到了这个问题，并通过删除和重新创建镜像端点（SSMS -> 服务器对象 -> 端点 -> 数据库镜像）最终解决了这个问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-20T17:49:44.850

如果上述方法都不起作用，这就是导致我的问题的原因。在两台服务器上运行以下查询并仔细查看

```
SELECT @@Version 
```

我的主服务器上有一些更新，但我的镜像服务器上没有安装。

此外，您可以在 SQL Server 日志中查看有关镜像不起作用的原因的其他信息。这就是我意识到我在两台服务器上都有不同版本的方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-14T05:29:02.473

在 SQL Server 2016 上，解决方案是让您的 [域帐户] 作为主体服务器和镜像服务器上的系统管理员。然后创建一个新帐户如下

主服务器

```
use [master]
GO
CREATE LOGIN [domain\mirrorservername$] FROM WINDOWS
GO
GRANT CONNECT ON ENDPOINT::[Mirroring] TO [domain\mirrorservername$]
GO 
```

镜像服务器

```
use [master]
GO
CREATE LOGIN [domain\principalservername$] FROM WINDOWS
GO
GRANT CONNECT ON ENDPOINT::[Mirroring] TO [domain\principalservername$]
GO 
```

您需要创建这些帐户并授予 CONNECT 权限，因为这些帐户是主体和镜像服务器之间握手期间使用的帐户。

有关错误的更多详细信息，请检查您的 sql 错误日志。

希望这篇文章对某人有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-13T16:57:11.603

我遇到过同样的问题。我试图在 Windows 2008 - R2 上的域设置上设置镜像。正如上面一位专家所建议的那样，我检查了 SQLSERVER 和 SQLSERVERAGENT 的 SQL Server“登录”帐户，并为两台机器上的 SQL Server 服务使用了相同的域帐户。我能够设置镜像。

谢谢您的帮助！

# mysql - 使用 between 子句的 Codeigniter 数据库错误

> ID：11032938
> 
> 赞同：3
> 
> 时间：2012-06-14T12:19:32.833
> 
> 标签：mysql, codeigniter, codeigniter-2

我从 codeigniter 和它生成这个 sql 查询中得到一个数据库语法错误。

```
SELECT `code`, `latitude`, `longitude` FROM (`postcodes`) WHERE `latitude` `BETWEEN 55`.`8616 AND 56`.`1508` AND `longitude` `BETWEEN '-3`.`9507' AND '-3`.`6131'` AND `code` LIKE 'FK%' 
```

我想我可以看到问题是在它们不应该在经度和 lqatitudes 的地方添加''。

生成此查询的代码是：

```
 function get_zips_in_range($zip, $range, $sort=1, $include_base=true)
{
    //get base postcode details
    $details = $this->get_zip_point($zip);

    if( ! $details)
    {
        return false;
    }

    //get the first 2 letters of the postcode
    $str = substr($zip, 0, 2);

    //find max - min lat / long for radius and zero point and query
    //only zips in that range.
    $lat_range = $range/69.172;
    $lon_range = abs($range/(cos($details->latitude) * 69.172));
    $min_lat = number_format($details->latitude - $lat_range, "4", ".", "");
    $max_lat = number_format($details->latitude + $lat_range, "4", ".", "");
    $min_lon = number_format($details->longitude - $lon_range, "4", ".", "");
    $max_lon = number_format($details->longitude + $lon_range, "4", ".", "");

    //build the sql query
    $this->CI->db->select("code, latitude, longitude");

    if( !$include_base)
    {
        $this->CI->db->where("code <>", $zip);
    }

    $this->CI->db->where("latitude BETWEEN '$min_lat' AND '$max_lat'");
    $this->CI->db->where("longitude BETWEEN '$min_lon' AND '$max_lon'");
    $this->CI->db->like('code', $str, 'after');    
    $result = $this->CI->db->get("postcodes");

    if($result->num_rows() < 1)
    {
        $this->set_last_error("SQL error in get_zips_in_range");
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:49:31.213

CI 2.1.1 中有一个错误[https://github.com/EllisLab/CodeIgniter/issues/1469](https://github.com/EllisLab/CodeIgniter/issues/1469)

恢复到 2.1.0 是最好的解决方案，直到 2.1.2 出来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:14:33.437

CodeIgniter 会自动添加反引号以进行更安全的查询。如果要禁用此功能，可以添加参数 FALSE，如下所示：

```
$this->CI->db->where("latitude BETWEEN '$min_lat' AND '$max_lat'", FALSE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:32:08.780

好吧，看看下面的东西，

```
$this->CI->db->where("latitude BETWEEN $min_lat AND $max_lat");
$this->CI->db->where("longitude BETWEEN $min_lon AND $max_lon"); 
```

除了语法，它将被呈现为`where latitude BETWEEN $min_lat AND $max_lat AND longitude BETWEEN $min_lon AND $max_lon`

现在你会问是什么问题..

问题在于**我们制作它的方式**

可以按如下方式完成

```
$this->CI->db->where("(latitude BETWEEN $min_lat AND $max_lat)");
$this->CI->db->where("(longitude BETWEEN $min_lon AND $max_lon)"); 
```

所以它将被渲染为`where (latitude BETWEEN $min_lat AND $max_lat) AND (longitude BETWEEN $min_lon AND $max_lon)`并希望这将解决问题。

甚至不需要引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:20:54.870

```
$this->CI->db->where("latitude BETWEEN '$min_lat' AND '$max_lat'");
$this->CI->db->where("longitude BETWEEN '$min_lon' AND '$max_lon'") 
```

去掉简单的`'`

```
$this->CI->db->where("latitude BETWEEN $min_lat AND $max_lat");
$this->CI->db->where("longitude BETWEEN $min_lon AND $max_lon") 
```

# sql - Nhibernate 3.3.1 OpenEdge 方言从 Linq 生成 bad like 语句

> ID：11032939
> 
> 赞同：1
> 
> 时间：2012-06-14T12:19:35.743
> 
> 标签：sql, linq, nhibernate, openedge, dialect

我正在创建一个新的 NHibernate 方言以通过 ODBC 与 OpenEdge 10.2a 数据库一起使用。我一直在使用 NHibernate 2.1 中的方言没有问题，但是当将它移植到 NHibernate 3.3.1 时，我遇到了生成的查询 Like 语句的问题。

在 NHibernate 3.3.1 上使用方言时，使用startswith("sometest") 为linq 查询生成如下所示的类似语句。

```
select test from tests
where testname like (?||'%');
p0 = 'sometest' [Type: String (8)] 
```

自 NHibernate 2.1 以来，这种情况发生了变化，OpenEdge 数据库不支持这一点。NHibernate 2.1 中的相同查询如下所示：

```
select test from tests
where testname like ?;
p0 = 'sometest%' 
```

我曾尝试使用 MsSql2005Dialect，这会将生成的 SQL 稍微更改为：

```
select test from tests
where testname like (?+'%');
p0 = 'sometest' [Type: String (8)] 
```

注意成为加号的管道。

是什么导致了这些变化，我该如何影响它，以便我可以让我的方言在 NH 3.3.1 上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:08:34.933

不幸的是，这不适用于不支持将连接表达式作为 LIKE 参数的数据库。见[NH-2254](https://nhibernate.jira.com/browse/NH-2254)

解决方法是扩展 LINQ 提供程序。[这是一个示例](http://fabiomaulo.blogspot.com.ar/2010/07/nhibernate-linq-provider-extension.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:50:34.153

我有这个问题的解决方法！如您所知，您可以为 Nhibernate 创建自己的**方言类**。

我一直在使用这个项目中的方言：[https ://nhibernate.jira.com/browse/NH-2327](https://nhibernate.jira.com/browse/NH-2327)

但是我已经更改了 concat 函数，我将这一行添加到了类中：

```
RegisterFunction("concat", new VarArgsSQLFunction(NHibernateUtil.String, concat(", ",+", ")")); 
```

它确实会生成这个 Like 语句：like concat('%'+?+'%','')

**解释：** OpenEdge 的 concat 函数只接受 2 个变量，但神奇的是，在 concat 函数内部，它确实接受了一个 + 信号来连接字符串。

**更新**：您也可以参加我制作的[OpenEdgeDialect](https://github.com/zmp/nhibernate-core/blob/master/src/NHibernate/Dialect/OpenEdgeDialect.cs)课程。

# ruby - 如何将链接转换为字符串？

> ID：11032946
> 
> 赞同：1
> 
> 时间：2012-06-14T12:19:48.263
> 
> 标签：ruby, string, variables, hyperlink

我有这个代码：

```
ie1.link(:text, /Exception:/) 
```

它正在生成一条错误消息，我希望将其包含在我的报告中。我使用以下方法创建报告 - [http://wiki.openqa.org/display/WTR/HTML+report+class](http://wiki.openqa.org/display/WTR/HTML+report+class)。

此行描述了测试中每个步骤的输出：

```
 def addtoReport(reportName, step, result, description) 
```

描述的类型是字符串。我写了这段代码：

```
 h = ie1.link(:text, /Exception:/)
 r.addtoReport(testReport, "check insert", "FAILED", h ) 
```

但我得到了错误：

```
E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/CLReport.rb:150:in `+': can't convert Watir::Link into String (TypeError)
from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/CLReport.rb:150:in `addtoReport'
from file.rb:96:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:36:49.637

你试过`to_s`方法吗？`h.to_s`

```
r.addtoReport(testReport, "check insert", "FAILED", h.to_s ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:10:56.333

假设您想要链接的文本，您应该使用`h.text`.

所以要么声明你想要 h 的 text 属性：

```
h=ie1.link(:text, /Exception:/)
r.addtoReport(testReport, "check insert", "FAILED", h.text ) 
```

或将文本另存为 h：

```
h=ie1.link(:text, /Exception:/).text
r.addtoReport(testReport, "check insert", "FAILED", h) 
```

# php - 在php中将文件上传到网络驱动器

> ID：11032948
> 
> 赞同：2
> 
> 时间：2012-06-14T12:19:53.137
> 
> 标签：php, file-upload, iis-7, network-drive

用于将文件上传到映射网络驱动器的 php 脚本不起作用。以下是php脚本：

```
$newfilename = "something.wav";
$path  = 'Y:\\uploaded\\'.$newfilename;
copy($_FILES['ufile']['tmp_name'], $path); 
```

我还检查了网络驱动器文件夹的权限。我已将 Y 驱动器映射到上传文件夹中的网络驱动器（10.4.4.32）d 驱动器。它具有完全控制权限。我尝试了以下网络驱动器路径：

*   Y:\已上传\
*   \\10.4.4.32\d$\已上传\
*   move_uploaded_file($_FILES['ufile']['tmp_name'], $path);

但是，它适用于本地驱动器，例如：

*   d:\uploaded\ 文件已上传到本地驱动器，但无法上传到网络驱动器。我已将 php 5.3 和 IIS 7 用于应用程序

显示的错误： **警告：复制（\10.4.4.32\d$\uploaded\test.wav）：无法打开流：第 107 行 C:\inetpub\wwwroot\myapp\upload.php 中的权限被拒绝**

我允许每个用户对上传文件夹的属性进行完全控制。是否有任何其他许可，我应该修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T12:16:30.943

网络驱动器可能不适用于 apache 和 php ，所以使用这个 $path = "\\machine-name\share_path\";

在两台计算机上设置用户帐户，例如用户：ApacheUser

进入 services 并点击 Apache ，并使用刚刚创建的帐户登录（第二个选项卡）源计算机的 Apache 服务

重启apache服务

那么它现在应该可以工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:38:02.773

首先，检查是否`copy()`返回 false。这表明确实存在错误。

然后，在您的 php.ini 中启用该指令，`track_errors`以及最高级别。激活时（并且您重新启动了网络服务器），在复制后使用以下行：`display_errors``error_reporting``track_errors`

```
var_dump($php_errormsg, error_get_last()); 
```

这应该会给你一个关于问题的更好的提示。

* * *

还要确保如果您使用`safe_mode`and `open_basedir`，则允许您移动到的路径。

# thumbnails - 如何从地址/位置（纬度和经度）查找地标的图片

> ID：11032949
> 
> 赞同：1
> 
> 时间：2012-06-14T12:19:53.607
> 
> 标签：thumbnails, street-address, panoramio

我有一组经纬度的地方，如餐馆/地标等，甚至是他们的地址。我想使用这些详细信息（即**位置（纬度/经度）**或**地址**）找出他们的**照片**，但我无法这样做。

 ****如果我们在谷歌地图上查看这些地方，我们会看到缩略图或图片中的图片。我使用 HTTP 请求获得了纬度和经度，并且最好也希望类似地获取图片。我有关于**panoramio api**的线索，但这不准确。对其他任何事情有任何想法吗？经纬度是使用谷歌地理位置 API 找到的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T14:27:31.507

只需在此 panoramio JavaScript API 中为地方（即“餐厅”）添加纬度经度值和标签。

这个 Panoramio JavaScript API 小部件围绕纬度/经度对创建一个边界框，然后返回所有带有标签的边界内的照片。

另一种 Panoramio JavaScript API 小部件，您还可以在其中通过[示例和代码](http://codespk.blogspot.com/2013/10/panoramio-javascript-api-widget-example.html)更改背景颜色。

更多 HTML 和 JavaScript API[示例在这里](http://discoverworldz.blogspot.com)

作曲时不显示，发表后显示。

```
 <div dir="ltr" style="text-align: center;" trbidi="on">
    <script src="https://ssl.panoramio.com/wapi/wapi.js?v=1&amp;hl=en"></script>
    <div id="wapiblock" style="float: right; margin: 10px 15px"></div>
    <script type="text/javascript">
    var myRequest = {
      'tag': 'kahna',
      'rect': {'sw': {'lat': -30, 'lng': 10.5}, 'ne': {'lat': 50.5, 'lng': 30}}
    };
      var myOptions = {
      'width': 300,
      'height': 200
    };
    var wapiblock = document.getElementById('wapiblock');
    var photo_widget = new panoramio.PhotoWidget('wapiblock', myRequest, myOptions);
    photo_widget.setPosition(0);
    </script>
    </div> 
```****

# android - 应用程序在子线程中没有响应

> ID：11032951
> 
> 赞同：1
> 
> 时间：2012-06-14T12:20:02.470
> 
> 标签：android, multithreading, download, android-anr-dialog

我想在我的应用程序中从 Internet 下载视频。因此，我启动了一个新线程，并在该线程中启动了一个下载文件的服务。但是，它会在模拟器上引发应用程序无响应对话框，但会在后台下载文件。我搜索了很多，但找不到任何解决方案。请帮忙！

我的线程如下：

```
 Thread t = new Thread()
    {
        public void run()
        {
            Log.i("Test Log", "Starting Service");
            Intent intent = new Intent(MainActivity.this, DownloadService.class);
            startService(intent);
        }
    };
    t.start(); 
```

服务片段如下：

```
try
     {
        Log.i("Test log", "Entered function");

        String RootDir = Environment.getExternalStorageDirectory() + File.separator + "Video";
        File RootFile = new File(RootDir);
        RootFile.mkdir();

        URL u = new URL(fileURL);
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

        long fileSize = c.getContentLength();
        Log.e("Test log", "File Size is: " +String.valueOf(fileSize));

        String downloadedFile = RootFile + "/Sample.mp4";
        Log.i("Test Log", downloadedFile);
        File df = new File(downloadedFile);

        if(fileSize == df.length())
        {
            Log.i("Test log", "File exists already! Did not download");
            stopSelf();
        }
        else
        {
            FileOutputStream f = new FileOutputStream(new File(RootFile, fileName));
            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];

            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0)
            {
                f.write(buffer, 0, len1);
            }
            f.close();

            Log.i("Test log", "Downloaded and file saved as "+downloadedFile);
            stopSelf();
        }
    }
    catch (Exception e)
    {
        Log.e("Catch exception", "Error is " +e.toString());
    }
} 
```

编辑：以下是崩溃日志：

```
 06-14 17:32:32.638: E/ActivityManager(60): ANR in com.pranav.download
    06-14 17:32:32.638: E/ActivityManager(60): Reason: Executing service com.pranav.download/.DownloadService
    06-14 17:32:32.638: E/ActivityManager(60): Load: 0.49 / 0.21 / 0.17
    06-14 17:32:32.638: E/ActivityManager(60): CPU usage from 723800ms to 49ms ago:
    06-14 17:32:32.638: E/ActivityManager(60):   system_server: 5% = 4% user + 1% kernel /   faults: 3616 minor 2 major
    06-14 17:32:32.638: E/ActivityManager(60):   adbd: 1% = 0% user + 1% kernel / faults:  1593 minor
    06-14 17:32:32.638: E/ActivityManager(60):   qemud: 0% = 0% user + 0% kernel
    06-14 17:32:32.638: E/ActivityManager(60):   m.android.phone: 0% = 0% user + 0% kernel / faults: 18 minor
    06-14 17:32:32.638: E/ActivityManager(60):   ndroid.launcher: 0% = 0% user + 0% kernel / faults: 869 minor
    06-14 17:32:32.638: E/ActivityManager(60):   d.process.acore: 0% = 0% user + 0% kernel / faults: 1143 minor
    06-14 17:32:32.638: E/ActivityManager(60):   id.defcontainer: 0% = 0% user + 0% kernel / faults: 64 minor
    06-14 17:32:32.638: E/ActivityManager(60):   events/0: 0% = 0% user + 0% kernel
    06-14 17:32:32.638: E/ActivityManager(60):   com.svox.pico: 0% = 0% user + 0% kernel / faults: 28 minor
    06-14 17:32:32.638: E/ActivityManager(60):   rild: 0% = 0% user + 0% kernel
    06-14 17:32:32.638: E/ActivityManager(60):   logcat: 0% = 0% user + 0% kernel
    06-14 17:32:32.638: E/ActivityManager(60):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 8 minor
    06-14 17:32:32.638: E/ActivityManager(60):   d.process.media: 0% = 0% user + 0% kernel / faults: 9 minor
    06-14 17:32:32.638: E/ActivityManager(60):   roid.alarmclock: 0% = 0% user + 0% kernel / faults: 7 minor
    06-14 17:32:32.638: E/ActivityManager(60):   com.android.mms: 0% = 0% user + 0% kernel / faults: 9 minor
    06-14 17:32:32.638: E/ActivityManager(60):   m.android.email: 0% = 0% user + 0% kernel / faults: 8 minor
    06-14 17:32:32.638: E/ActivityManager(60):   netd: 0% = 0% user + 0% kernel / faults: 4 minor
    06-14 17:32:32.638: E/ActivityManager(60):   ronsoft.openwnn: 0% = 0% user + 0% kernel / faults: 7 minor
    06-14 17:32:32.638: E/ActivityManager(60):   .quicksearchbox: 0% = 0% user + 0% kernel / faults: 8 minor
    06-14 17:32:32.638: E/ActivityManager(60):   android.protips: 0% = 0% user + 0% kernel / faults: 7 minor
   06-14 17:32:32.638: E/ActivityManager(60):   ackageinstaller: 0% = 0% user + 0% kernel / faults: 16 minor
   06-14 17:32:32.638: E/ActivityManager(60):   zygote: 0% = 0% user + 0% kernel / faults: 35 minor
   06-14 17:32:32.638: E/ActivityManager(60):   installd: 0% = 0% user + 0% kernel / faults: 3 minor
   06-14 17:32:32.638: E/ActivityManager(60):   m.android.music: 0% = 0% user + 0% kernel / faults: 7 minor
   06-14 17:32:32.638: E/ActivityManager(60):  +pranav.download: 0% = 0% user + 0% kernel
   06-14 17:32:32.638: E/ActivityManager(60):  +pranav.download: 0% = 0% user + 0% kernel
   06-14 17:32:32.638: E/ActivityManager(60): TOTAL: 14% = 6% user + 7% kernel + 0% irq + 0% softirq 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:47:35.247

使用`async task handler`...这样主线程不会被中断，下载将在后台进行...如果您需要示例..请告诉我..
使用此链接[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:07:47.970

您可能已经从另一个线程启动了该服务，但它会在 UI 线程上运行代码。

在您的服务中，将代码以例如的`doInBackground(...)`方法下载视频`AsyncTask`

```
new AsyncTask< Void, Void, Void >() {
    @Override
    protected Void doInBackground( final Void... params )
    {
        // Your download code
    }
} 
```

# c# - Visual Studio 中的 XML 文档注释实现

> ID：11032955
> 
> 赞同：1
> 
> 时间：2012-06-14T12:20:35.217
> 
> 标签：c#, .net, visual-studio-2010

Visual Studio 2010 中是否有可能在方法中添加或删除参数后自动实现 XML 文档注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:22:55.043

看看[GhostDoc](http://submain.com/products/ghostdoc.aspx)。该工具具有许多用于修复和自动化 Visual Studio 中的代码文档的功能。

# matlab - 用于求解所需“n”个 Ax = b 类型的联立方程的 MATLAB 代码

> ID：11032956
> 
> 赞同：0
> 
> 时间：2012-06-14T12:20:36.713
> 
> 标签：matlab, matrix, simultaneous, equations, triangular

**MATLAB 代码中的问题，用于求解所需的“n”个 Ax = b 类型的联立方程，前提是求解涉及上三角矩阵的方法，并且 A 和 b 的值与 x 值一起演变为 Aprime 和 bprime。**

问题是编写一个代码，可以使用上三角矩阵求解“n”个 Ax = b 类型的联立方程。A 和 b 的值在命令窗口中以矩阵形式给出。当程序成功运行时，代码应返回 Aprime、bprime 和 x 值作为答案。对于某些方程式，代码还应将输出显示为“错误，矩阵尺寸不匹配”（或其他任何东西！）！该代码工作正常，除了它显示错误以及上面给出的错误消息。

我使用的代码如下，

```
function [x, Aprime, bprime]=solved(A,b)
    n = size(A);
    % Assign the size of A to n.
    if (n(1)~= n(2)) || (det(A) == 0)
        % Checking through the determinant method for dimension error.
        disp('ERROR!! Matrix dimensions should agree.')
    else
        for j=1 %:n-1
            % Fix the first value of j to 1.
            if A(j,j)==0
                u=A(j,:);
                A(j,:)=A(j+1,:);
                A(j+1,:)=u;
                %using u as a temperary value "u", to save the row,to swap the positions of two rows.
                v=b(j);
                b(j)=b(j+1);
                b(j+1)=v;
                %using u as a temperary variable "v", to save the row,to interchange the positions of two rows in b matrix.
            end

            for i=j+1:n
                if A(i,j)~=0
                    %If the first number of the particular row  be zero.
                    b(i)=b(j)+(b(i)*(-A(j,j)/A(i,j)));
                    A(i,:) = A(j,:)+(A(i,:)*(-A(j,j)/A(i,j)));
                end
                %After this 'for'loop, the matrix becomes a upper triangle matrix.
            end

            Aprime=A;
            bprime=b;
            x=A\b;
            % Using this command the values of x,y,z can be found.
        end
    end
end 
```

请提供适当的更正....

在命令窗口中获得的结果，

> > A = [1 1 0;2 1 1;1 2 3]

一个=

```
 1     1     0
 2     1     1
 1     2     3 
```

> > b= [3;7;14]

b =

```
 3
 7
14 
```

> > [x, Aprime, bprime] = 已解决(A, b)

x =

```
 1
 2
 3 
```

素=

```
1.0000    1.0000         0
     0    0.5000   -0.5000
     0   -1.0000   -3.0000 
```

bprim =

```
3.0000 
```

-0.5000 -11.0000

第二种是，

> > A = [1 2 3; 4 5 6]

一个=

```
 1     2     3
 4     5     6 
```

> > b = [7;8;9;10]

b =

```
 7
 8
 9
10 
```

> > [x, Aprime, bprime] = 已解决(A, b) 错误！！矩阵尺寸应该一致。已解决的错误（第 2 行） n = size(A); 在调用“C:\Users\Hari\Documents\solved.m>solved”期间未分配输出参数“x”（可能还有其他参数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:43:40.353

不要使用`disp`，而是使用该函数`error`来传达错误。这将告诉 MATLAB 在错误发生后不要尝试继续执行。另外，样式将匹配内置的 MATLAB 错误。

# opencv - 使用 opencv 和点云库进行 3D 重建

> ID：11032960
> 
> 赞同：4
> 
> 时间：2012-06-14T12:20:47.497
> 
> 标签：opencv

我正在研究一个涉及 3D 重建和 3D 场景渲染的项目，我已经完成了视差图像并使用 opencv 2.1 生成了 3D 坐标，之后我尝试使用点云库渲染 3D 场景我在这里导致代码崩溃。我正在使用 Windows 7 32 位。

我不明白为什么会出现这个错误，请帮助我。

这是我的代码

```
 ......

      Mat imgDisparity16S ;    
IplImage stub, *dst_img;

 Mat imgDisparity8U ;

int ndisparities = 16*5;
int SADWindowSize = 5; 

StereoBM sbm(StereoBM::BASIC_PRESET,ndisparities,SADWindowSize);

sbm( object, image, imgDisparity16S, CV_16S ); 

double minVal; 
double maxVal; 

minMaxLoc( imgDisparity16S, &minVal, &maxVal );

printf("Min disp: %f Max value: %f \n", minVal, maxVal); 

imgDisparity16S.convertTo( imgDisparity8U, CV_8UC1, 255/(maxVal - minVal));

IplImage ipl_from_mat((IplImage)imgDisparity8U); 
cvNamedWindow("window", CV_WINDOW_AUTOSIZE);  
cvShowImage("window", &ipl_from_mat);  

cvSaveImage("disparity.jpg",&ipl_from_mat);
cvWaitKey(0);

Mat xyz ;
cout<<"Here"<<endl;
cv::Mat img_disparity = cv::imread("disparity.jpg", CV_LOAD_IMAGE_GRAYSCALE);

double q[] =
     {

    1, 0, 0, -2.9615028381347656e+02,
    0, 1, 0, -2.3373317337036133e+02,
    0, 0, 0, 5.6446880931501073e+02,
    0, 0, -1.1340974198400260e-01, 4.1658568844268817e+00,

     };
    cv::Mat Q = Mat(4, 4, CV_64F, q);

cv::Mat recons3D(img_disparity.size(), CV_32FC3);

    cv::reprojectImageTo3D(imgDisparity8U,recons3D,Q,true);
cout<<"Here1"<<endl;
cout<<"Here2"<<endl;

saveXYZ("clouds.txt", recons3D);

 std::cout<<"Creating point cloud"<<std::endl;

pcl::PointCloud<pcl::PointXYZRGB>::Ptr point_cloud_ptr (new                 pcl::PointCloud<pcl::PointXYZRGB>);

double px, py, pz;
uchar pr, pg, pb;
double Q03, Q13, Q23, Q32, Q33;

uint32_t rgb1;

#ifdef CUSTOM_REPROJECT
    Q03 = Q.at<double>(0,3);
    Q13 = Q.at<double>(1,3);
    Q23 = Q.at<double>(2,3);
    Q32 = Q.at<double>(3,2);
    Q33 = Q.at<double>(3,3);
#endif  
cout<<"Before"<<endl;

cv::Mat img_rgb = Mat(imgDisparity8U.size(),CV_32FC3);

CvMat* img_rgb1 = cvLoadImageM("frame1_0.jpg",1);

cout<<object_filename<<endl;
img_rgb = img_rgb1;
for(int i=0;i<img_rgb.rows ;i++)
    {

    uchar* rgb_ptr = img_rgb.ptr<uchar>(i);

    uchar* disp_ptr = imgDisparity8U.ptr<uchar>(i);
    double* recons_ptr = recons3D.ptr<double>(i);

    for(int j = 0; j < img_rgb.cols; j++)
    {
        uchar d = disp_ptr[j];
        if ( d == 0 ) continue; 
        double pw = -1.0 * static_cast<double>(d) * Q32 + Q33; 
        px = static_cast<double>(j) + Q03;
        py = static_cast<double>(i) + Q13;
        pz = Q23;

        px = px/pw;
        py = py/pw;
        pz = pz/pw;
        px = recons_ptr[3*j];
        py = recons_ptr[3*j+1];
        pz = recons_ptr[3*j+2];

        pb = rgb_ptr[3*j];
        pg = rgb_ptr[3*j+1];
        pr = rgb_ptr[3*j+2];

        pcl::PointXYZRGB point;
        point.x = px;
        point.y = py;
        point.z = pz;

        rgb1 = (static_cast<uint32_t>(pr) << 16 || static_cast<uint32_t>(pg) << 8 || static_cast<uint32_t>(pb));
         point.rgb = *reinterpret_cast<float*>(&rgb1);
        point_cloud_ptr->points.push_back(point);

    }

}

point_cloud_ptr->width = (int)point_cloud_ptr->points.size();
point_cloud_ptr->height = 1;
cout<<"outside loop"<<endl;
boost::shared_ptr<pcl::visualization::PCLVisualizer> viewer;
cout<<"outside loop11"<<endl;

viewer = createVisualizer(point_cloud_ptr); //Error Here

while(!viewer->wasStopped())
{
    viewer->spinOnce(100);
    boost::this_thread::sleep (boost::posix_time::microseconds (100000));
}

return 0; 
```

# google-drive-api - 如何为 Google Drive 构建桌面客户端？

> ID：11032964
> 
> 赞同：5
> 
> 时间：2012-06-14T12:20:52.280
> 
> 标签：google-drive-api

我想为 Windows 操作系统构建桌面应用程序并使用 Google Drive 在云中保存一些数据。阅读 Google Drive SDK 后，我发现只有从 Chrome Web Store 安装的 Web 应用程序才允许使用 API 并访问 Google Drive 上的数据。

所以我的问题是：我有什么方法可以为 Google Drive 构建本机客户端（C++、Windows）吗？我知道使用 Google Docs API 的黑客行为——但他们可以随时停止工作，我想要一些稳定的东西。为什么 Google 团队不允许我为他们的服务创建桌面应用程序？我支持许多其他云存储，它们没有这样的限制。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:15:48.427

现在，您必须使用（较旧的）[Google Document List API](https://developers.google.com/google-apps/documents-list/)，它提供对 Google Drive 的完全读写和列表访问权限。（Google Drive 和以前的 Google Docs 使用相同的数据）

因此，在我们扩展当前 Drive API 的功能以涵盖 Google 文档列表用例之前，您应该改用它。

编辑：我们刚刚推出了[Google Drive SDK](http://developers.google.com/drive/)的 v2，所以您现在应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T20:24:13.480

我一直在研究类似的问题。我已经意识到没有直接的方法可以做到这一点。Google Drive SDK 使用起来并不容易，有人可以很快简化将桌面应用程序连接到 Google Drive 的过程。我知道这没有多大帮助，但我也在寻找解决方案。

这是我遇到的一些链接，也没有解决我的问题，但如果您找到解决方案，请告诉我们：

[如何使GUI客户端在java中上传文件](https://stackoverflow.com/questions/19152256/how-to-make-gui-client-to-upload-file-in-java)

[使用 Java API 从 Google Drive 下载文件](https://stackoverflow.com/questions/20235104/using-java-apis-for-downloading-file-from-the-google-drive)

[http://www.coderanch.com/t/643120/Servlets/java/upload-file-drop-box-file](http://www.coderanch.com/t/643120/Servlets/java/upload-file-drop-box-file)

# performance - 为什么使用 Linq To Objects 时 IQueryable 比 IEnumerable 快两倍

> ID：11032966
> 
> 赞同：7
> 
> 时间：2012-06-14T12:21:06.693
> 
> 标签：performance, linq, ienumerable, linq-to-objects, iqueryable

我知道 IQueryable 和 IEnumerable 之间的区别，并且我知道 Linq To Objects 通过 IEnumerable 接口支持集合。

令我困惑的是，当集合转换为 IQueryable 时，查询的执行速度是原来的两倍。

假设**l**是**List**类型的填充对象，如果通过**l.AsQueryable()将列表****l**转换为**IQueryable**，则 linq 查询的速度是两倍。

 **我用 VS2010SP1 和 .NET 4.0 编写了一个简单的测试来证明这一点：

```
private void Test()
{
  const int numTests = 1;
  const int size = 1000 * 1000;
  var l = new List<int>();
  var resTimesEnumerable = new List<long>();
  var resTimesQueryable = new List<long>();
  System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();

  for ( int x=0; x<size; x++ )
  {
    l.Add( x );
  }

  Console.WriteLine( "Testdata size: {0} numbers", size );
  Console.WriteLine( "Testdata iterations: {0}", numTests );

  for ( int n = 0; n < numTests; n++ )
  {
    sw.Restart();
    var result = from i in l.AsEnumerable() where (i % 10) == 0 && (i % 3) != 0 select i;
    result.ToList();
    sw.Stop();
    resTimesEnumerable.Add( sw.ElapsedMilliseconds );
  }
  Console.WriteLine( "TestEnumerable" );
  Console.WriteLine( "  Min: {0}", Enumerable.Min( resTimesEnumerable ) );
  Console.WriteLine( "  Max: {0}", Enumerable.Max( resTimesEnumerable ) );
  Console.WriteLine( "  Avg: {0}", Enumerable.Average( resTimesEnumerable ) );

  for ( int n = 0; n < numTests; n++ )
  {
    sw.Restart();
    var result = from i in l.AsQueryable() where (i % 10) == 0 && (i % 3) != 0 select i;
    result.ToList();
    sw.Stop();
    resTimesQueryable.Add( sw.ElapsedMilliseconds );
  }
  Console.WriteLine( "TestQuerable" );
  Console.WriteLine( "  Min: {0}", Enumerable.Min( resTimesQueryable ) );
  Console.WriteLine( "  Max: {0}", Enumerable.Max( resTimesQueryable ) );
  Console.WriteLine( "  Avg: {0}", Enumerable.Average( resTimesQueryable ) );
} 
```

运行此测试（使用 will **numTests** == 1 和 10）会产生以下输出：

```
Testdata size: 1000000 numbers
Testdata iterations: 1
TestEnumerable
  Min: 44
  Max: 44
  Avg: 44
TestQuerable
  Min: 37
  Max: 37
  Avg: 37

Testdata size: 1000000 numbers
Testdata iterations: 10
TestEnumerable
  Min: 22
  Max: 29
  Avg: 23,9
TestQuerable
  Min: 12
  Max: 22
  Avg: 13,9 
```

重复测试但切换顺序（即先测量 IQuerable，然后测量 IEnumerable）会得到不同的结果！

```
Testdata size: 1000000 numbers
Testdata iterations: 1
TestQuerable
  Min: 75
  Max: 75
  Avg: 75
TestEnumerable
  Min: 25
  Max: 25
  Avg: 25

Testdata size: 1000000 numbers
Testdata iterations: 10
TestQuerable
  Min: 12
  Max: 28
  Avg: 14
TestEnumerable
  Min: 22
  Max: 26
  Avg: 23,4 
```

以下是我的问题：

1.  我究竟做错了什么？
2.  如果在**IQueryable**测试之后执行测试，为什么**IEnumerable**更快？
***   为什么没有时**IQueryable**更快。试运行次数增加？*   **使用IQueryable**而不是**IEnumerable**会受到惩罚吗？**

 **我问这些问题是因为我想知道将哪一个用于我的存储库接口。现在他们查询内存中的集合（Linq to Objects），但将来这*可能*是一个 SQL 数据源。如果我现在使用**IQueryable**设计存储库类，我以后可以轻松地切换到 Linq to SQL。但是，如果存在性能损失，那么在不涉及 SQL 的情况下坚持使用**IEnumerable**似乎更明智。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T12:29:33.820

使用 linqpad 检查 IL 代码，这就是我所看到的：

对于此代码：

```
var l = Enumerable.Range(0,100);

var result = from i in l.AsEnumerable() where (i % 10) == 0 && (i % 3) != 0 select i; 
```

这是生成的：

```
IL_0001:  ldc.i4.0    
IL_0002:  ldc.i4.s    64 
IL_0004:  call        System.Linq.Enumerable.Range
IL_0009:  stloc.0     
IL_000A:  ldloc.0     
IL_000B:  call        System.Linq.Enumerable.AsEnumerable
IL_0010:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0015:  brtrue.s    IL_002A
IL_0017:  ldnull      
IL_0018:  ldftn       b__0
IL_001E:  newobj      System.Func<System.Int32,System.Boolean>..ctor
IL_0023:  stsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_0028:  br.s        IL_002A
IL_002A:  ldsfld      UserQuery.CS$<>9__CachedAnonymousMethodDelegate1
IL_002F:  call        System.Linq.Enumerable.Where
IL_0034:  stloc.1     

b__0:
IL_0000:  ldarg.0     
IL_0001:  ldc.i4.s    0A 
IL_0003:  rem         
IL_0004:  brtrue.s    IL_0011
IL_0006:  ldarg.0     
IL_0007:  ldc.i4.3    
IL_0008:  rem         
IL_0009:  ldc.i4.0    
IL_000A:  ceq         
IL_000C:  ldc.i4.0    
IL_000D:  ceq         
IL_000F:  br.s        IL_0012
IL_0011:  ldc.i4.0    
IL_0012:  stloc.0     
IL_0013:  br.s        IL_0015
IL_0015:  ldloc.0     
IL_0016:  ret 
```

对于这段代码：

```
var l = Enumerable.Range(0,100);

var result = from i in l.AsQueryable() where (i % 10) == 0 && (i % 3) != 0 select i; 
```

我们得到这个：

```
IL_0001:  ldc.i4.0    
IL_0002:  ldc.i4.s    64 
IL_0004:  call        System.Linq.Enumerable.Range
IL_0009:  stloc.0     
IL_000A:  ldloc.0     
IL_000B:  call        System.Linq.Queryable.AsQueryable
IL_0010:  ldtoken     System.Int32
IL_0015:  call        System.Type.GetTypeFromHandle
IL_001A:  ldstr       "i"
IL_001F:  call        System.Linq.Expressions.Expression.Parameter
IL_0024:  stloc.2     
IL_0025:  ldloc.2     
IL_0026:  ldc.i4.s    0A 
IL_0028:  box         System.Int32
IL_002D:  ldtoken     System.Int32
IL_0032:  call        System.Type.GetTypeFromHandle
IL_0037:  call        System.Linq.Expressions.Expression.Constant
IL_003C:  call        System.Linq.Expressions.Expression.Modulo
IL_0041:  ldc.i4.0    
IL_0042:  box         System.Int32
IL_0047:  ldtoken     System.Int32
IL_004C:  call        System.Type.GetTypeFromHandle
IL_0051:  call        System.Linq.Expressions.Expression.Constant
IL_0056:  call        System.Linq.Expressions.Expression.Equal
IL_005B:  ldloc.2     
IL_005C:  ldc.i4.3    
IL_005D:  box         System.Int32
IL_0062:  ldtoken     System.Int32
IL_0067:  call        System.Type.GetTypeFromHandle
IL_006C:  call        System.Linq.Expressions.Expression.Constant
IL_0071:  call        System.Linq.Expressions.Expression.Modulo
IL_0076:  ldc.i4.0    
IL_0077:  box         System.Int32
IL_007C:  ldtoken     System.Int32
IL_0081:  call        System.Type.GetTypeFromHandle
IL_0086:  call        System.Linq.Expressions.Expression.Constant
IL_008B:  call        System.Linq.Expressions.Expression.NotEqual
IL_0090:  call        System.Linq.Expressions.Expression.AndAlso
IL_0095:  ldc.i4.1    
IL_0096:  newarr      System.Linq.Expressions.ParameterExpression
IL_009B:  stloc.3     
IL_009C:  ldloc.3     
IL_009D:  ldc.i4.0    
IL_009E:  ldloc.2     
IL_009F:  stelem.ref  
IL_00A0:  ldloc.3     
IL_00A1:  call        System.Linq.Expressions.Expression.Lambda
IL_00A6:  call        System.Linq.Queryable.Where
IL_00AB:  stloc.1 
```

所以看起来不同之处在于`AsQuerable`版本正在构建表达式树，`AsEnumerable`而不是。****

# asp.net-mvc - MVC3 Web 应用程序不会发布

> ID：11032968
> 
> 赞同：0
> 
> 时间：2012-06-14T12:21:22.707
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-3

我正在尝试学习 MVC 3，所以我是菜鸟。现在，我只想制作一个基本站点，即使用 jQuery 和 CSS 的 HTML 页面。当我使用 MVC 时，我真的不需要模型，因为实际上并没有任何数据传递给应用程序。但是，这对我来说是个问题，因为当我尝试发布此站点时收到 HTTP 403.14 Forbidden 错误。我认为应用程序的结构方式存在问题，当我访问 localhost:1081 网站时，它无法正常执行。这就是我所拥有的：

家庭控制器.cs

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        return View();
    }

} 
```

}

这只是返回 Index.cshtml 的视图。

索引.cshtml：

```
@{ViewBag.Title = "My Web Site";} <h2>Web Site Title</h2> 
```

我所有的 HTML 代码都放入了 _Layout.cshtml。使用 jQuery 和 CSS。当我执行调试选项时，该站点运行良好，但是当我尝试发布时，它给了我 403.14 禁止。我已经运行了内联命令 aspnet_regiis -i 它似乎可以工作，但不允许项目运行。

全球.asax：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

如果我将 _Layout 中的代码移动到索引，它就不起作用。有没有办法将它链接到 Index.cshtml？

网络配置：

```
<system.webServer>
<defaultDocument enabled="true">
  <files>
    <add value="_Layout.cshtml" />
  </files>
</defaultDocument>
<validation validateIntegratedModeConfiguration="false"/>
<modules runAllManagedModulesForAllRequests="true"/> 
```

我不想浏览目录，我也尝试过使用这个选项。如果我启用，它允许我查看内容但不呈现页面。

所以有两个问题：1.）我是否需要一个模型，即使我没有将任何数据传递给应用程序，只是试图呈现一个站点？2.）我的网站设置/结构是否正确，或者我在这里到底做错了什么？

谢谢，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T09:56:29.757

不，你不需要模型。

首先，不要使用默认文档。MVC 覆盖默认文档处理并使用路由系统。

其次，您不想尝试将布局页面用作文档。布局就像一个母版页，用于在您的真实文档周围创建一个包装器。

第三，说“不会发布”意味着您在通过发布机制实际发布网站时遇到了问题。您的问题不是您不能发布，因为显然它正在这样做，而是您的网站没有执行。

第四，403.14 表示它正在尝试列出目录的内容，但如果 MVC 配置正确，则不会发生这种情况，因为 MVC 的路由会接管。这意味着您在 asp.net 管道的某个地方有问题。

你要发布到哪里？您是否将 IIS 配置为在此位置设置站点？鉴于您试图从不同的端口号访问该站点，在我看来，您没有设置 IIS 来执行此操作，而是尝试使用用于调试的相同端口。

为了发布站点，必须将 IIS 配置为使用该位置。

# javascript - 如何处理非平凡的表单输入？JSP 还是 JavaScript？

> ID：11032969
> 
> 赞同：1
> 
> 时间：2012-06-14T12:21:33.717
> 
> 标签：javascript, spring-mvc

我正在开发一个 Spring MVC 应用程序，它应该让用户更改列表的内容。

该列表由具有简单属性（如名称和作者）的 Book 对象组成。该视图是一个 JSP 页面，它显示书籍列表并允许用户更改内容。

更改列表可能意味着添加书籍、删除它们或更改列表中书籍的顺序。

问题是，如何将更改后的列表返回到服务器？我可以编写 JavaScript 来控制列表，但是如何将它发布到 Spring 控制器？另一方面，我可以编写一个 JSP 表单来更改模型，这将很容易提交回服务器，但是我是否仅限于表单输入中的基本文本字段？

编辑：在 JSP 中，使用类似的形式很容易改变单个模型的属性

```
<form:form action="myaction" method="post" commandName="mybook"> 
```

但是如果你的模型是一个（有序的）对象列表，那么你如何编辑它呢？

在 Javascript 中，我可以从响应中获取对象列表并根据需要进行更改，但是如何将其提交回服务器？就像是

```
$.post("/modifybook.do",{ name: "Spring in Action", author: "Graig Walls" } ); 
```

有效，但仅适用于单个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:33:30.990

您应该避免操纵整个列表，句号。当只有一个列表元素被更改（编辑、添加或删除）时，我看不到需要填充整个项目列表并将其发送回服务器的场景。

我通常在我的应用程序中做的是创建一个处理程序（控制器），用于一次性返回整个对象列表，然后添加另一个处理程序以添加、编辑和删除该列表中的单个条目。在这种情况下，我也尝试坚持使用 REST，这样我就有了一个干净的 API 来表示服务器资源，并且前端（AJAX + jQuery）可以使用它。

这个解决方案对我来说非常有效，所以我建议也坚持下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:34:51.807

从未使用过 Spring，这可能不太合适，但您能否不将列表转换为 XML，然后将其发布回 Java，然后在保留所有复杂性和更改的情况下对其进行处理？

# css - Aloha Editor：在 aloha-multisplit-expanded 框中添加新样式（aloha-button）

> ID：11032972
> 
> 赞同：1
> 
> 时间：2012-06-14T12:21:41.483
> 
> 标签：css, drupal, aloha-editor

如何在 aloha-multisplit-expanded 框中添加新的 aloha-button。（我希望能够添加无限数量的样式。当然，不是通过管理员，而是硬编码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:12:24.803

为 aloha 编辑器添加样式：我将在这里展示如何添加名为“meg”的简单样式</p>

1.  为sites\all\libraries\aloha\aloha\plugins\common\format\nls 文件中的按钮添加定义到“root”。"button.meg.tooltip":"Meg 格式说明"
2.  在 sites\all\libraries\aloha\aloha\plugins\common\format\lib\format-plugin.js 添加到“config”数组中的“default button configuration”，类的名称，这样：

    配置：['strong'，'meg'，'em'......]

3.  在“initButtons”函数中添加初始化样式按钮的实现：在switch(button)下，为新样式添加“case”：

    注意：'span' 标签用于实现带有中性标签的普通 css 类。

4.  将“span.meg”类定义为特殊样式： 在您的 css 主文件（drupal 站点主题的 css）中添加“span.meg”类：

    ```
    span.meg {
    color: green; } 
    ```

5.  刷新您的站点以进行重建，并在浮动 aloha 中使用新样式

示例代码

```
// Additional special styles
case 'charm-meg':
    that.multiSplitItems.push({
        'name' : button,
        'tooltip' : i18n.t('button.' + button + '.tooltip'),
        'iconClass' : 'aloha-button ' + i18n.t('aloha-button-' + button),
        'markup' : jQuery('<span class=' + button + '></span>'),
        'click' : function () {
            var
                markup = jQuery('<span class=' + button + '></span>'),
                rangeObject = Aloha.Selection.rangeObject,
                foundMarkup,
                selectedCells = jQuery('.aloha-cell-selected');

            // formating workaround for table plugin
            if ( selectedCells.length > 0 ) {
                var cellMarkupCounter = 0;
                selectedCells.each( function () {
                    var cellContent = jQuery(this).find('div'),
                        cellMarkup = cellContent.find(button);

                    if ( cellMarkup.length > 0 ) {
                        // unwrap all found markup text
                        // <td><b>text</b> foo <b>bar</b></td>
                        // and wrap the whole contents of the <td> into <b> tags
                        // <td><b>text foo bar</b></td>
                        cellMarkup.contents().unwrap();
                        cellMarkupCounter++;
                    }
                    cellContent.contents().wrap('<span class=' + button + '></span>');
                });

                // remove all markup if all cells have markup
                if ( cellMarkupCounter == selectedCells.length ) {
                    selectedCells.find(button).contents().unwrap();
                }
                return false;
            }
            // formating workaround for table plugin

            // check whether the markup is found in the range (at the start of the range)
            foundMarkup = rangeObject.findMarkup(function() {
                return this.nodeName.toLowerCase() == markup.get(0).nodeName.toLowerCase();
            }, Aloha.activeEditable.obj);

            if ( foundMarkup ) {
                // remove the markup
                if (rangeObject.isCollapsed()) {
                    // when the range is collapsed, we remove exactly the one DOM element
                    GENTICS.Utils.Dom.removeFromDOM(foundMarkup, rangeObject, true);
                } else {
                    // the range is not collapsed, so we remove the markup from the range
                    GENTICS.Utils.Dom.removeMarkup(rangeObject, markup, Aloha.activeEditable.obj);
                }
            } else {
                // when the range is collapsed, extend it to a word
                if (rangeObject.isCollapsed()) {
                    GENTICS.Utils.Dom.extendToWord(rangeObject);
                }

                // add the markup
                GENTICS.Utils.Dom.addMarkup(rangeObject, markup);
            }
            // select the modified range
            rangeObject.select();
            return false;
        },
        'tooltip' : i18n.t('<span class=' + button + '></span>'),
        'toggle' : true
    });
    break; 
```

# android - 手机浏览器中的 kml 覆盖

> ID：11032973
> 
> 赞同：1
> 
> 时间：2012-06-14T12:21:43.893
> 
> 标签：android, iphone, maps, symbian, kml

我最近在几乎所有设备上覆盖我的 kml 文件取得了巨大成功，除了没有 Google 地图应用程序的手机 [GMM]

简而言之：在任何 [大多数] Android 设备、iPhone、台式机、笔记本电脑、上网本和笔记本电脑上，查看或转到我的测试[http://henrysinn.com/maps](http://henrysinn.com/maps)

有人对我如何为其他手机浏览器设置 URL/链接有任何建议吗？我注意到[http://maps.google.com/maps?q=http://henrysinn.com/test/AldiSites.kml](http://maps.google.com/maps?q=http://henrysinn.com/test/AldiSites.kml) '工作'，但在 iPhone 上速度慢得可怕，在 Android 手机上一般，但完全在[全球]仍然存在的大量 Symbian 手机上无法使用。不确定黑莓的各种迭代或即将推出的 WP7，我们“可能”会看到更多……

可以做到吗？

Henry Sinn 墨尔本 澳大利亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:20:53.440

我建议使用 Google Maps API 设置基本地图，然后使用 API 的 KMLLayer 功能来显示您的 KML 叠加层：http: [//goo.gl/iExOp](http://goo.gl/iExOp)

# editor - SAP 编辑器 (6.0) 中的关键字是否可以自动大写？

> ID：11032975
> 
> 赞同：0
> 
> 时间：2012-06-14T12:21:48.970
> 
> 标签：editor, sap

我基本上懒得按`Shift`或`Caps Lock`一直按，我希望编辑器能够识别并自动将我所有的关键字转换为大写。

SAP Editor v6.0 有这个功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:39:46.943

尝试转到 SE38，实用程序 -> 设置 -> ABAP 编辑器 -> 漂亮的打印机，然后选择“关键字大写”。

返回编辑器，单击`Pritty Printer`按钮或`Shift + F1`

![漂亮的打印机设置截图](../Images/b0217eb10bdbd37d8dc286dcc3ed5670.png)

# pipe - 如何在 Linux 下创建一个行为类似于管道的目录

> ID：11032978
> 
> 赞同：5
> 
> 时间：2012-06-14T12:22:05.527
> 
> 标签：pipe, samba, nfs, file-handling, file-processing

我们想创建一个相对简单的文档存储但是有一些要求。我的想法是，当文件立即到达存储时，由单独的工具/守护程序扫描和处理文件。

（伪）DMS 应该通过 NFS 和 Samba 提供访问。正如我到目前为止所看到的，管道可以很好地将传入的文件传递给一些钩子。但我想知道是否有办法将目录创建为管道。我只见过命名管道。

应该在此目录中获取任何传入文件的过程是一个 PHP 脚本，它应该执行 MIME 类型猜测、CRC32 检查（针对 DB 中的值）......有人提示如何执行此操作吗？

**编辑：**我希望下面的解释更清楚一些 - 我正在寻找一种通过 Samba 和 NFS 提供“端点”的方法，其中可以放置由病毒扫描和元进程立即处理的文件（并最终存储） .

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T11:58:08.033

您可以使用[FUSE](http://fuse.sourceforge.net/)实现一个中间 Linux 文件系统，该文件系统位于您的真实文件系统（后端文件系统）之上，并在最终将数据写入后端之前对数据执行您需要的任何验证。然后，您通过 NFS/Samba 为该文件系统提供服务。

另一种可能性是使用[inotify](http://en.wikipedia.org/wiki/Inotify) API 来通知某些文件系统树上的更改并执行所需的操作。这种方法的问题在于处理将是异步的，因此恶意软件文件将在短时间内发布，直到它们被扫描和删除。

**更新**：[ClamFS](http://clamfs.sourceforge.net/)正是这样做的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:26:45.580

如果我对您的理解正确，您要做的是为最终用户提供一个非常简单的界面，该界面集成到他们的文件系统中。他们将在他们的操作系统上看到一个普通的文件夹，他们将复制和移动文件，重命名它们等等。无论他们在计算机上的任何其他文件夹上做什么。

但是，此文件夹不会是后台的真实文件夹。您希望完全控制对此文件夹的操作。当他们将文件复制到此文件夹中时，您需要一个 PHP 脚本来处理它。当他们在这个特殊文件夹下创建一个新文件夹时，另一个 PHP 脚本会处理它。

正如 salva 所建议的，自己创建文件系统接口确实是一个很好的解决方案；但这不是一件容易的事，也不是一件容易的事。由于您提到 PHP 作为您的后端，我认为您需要更高级别的方法。

您的问题有两个方面需要处理：客户端和服务器。在客户端，您需要一个易于挂载为 posix 系统上的文件夹或 Windows 上的驱动器的文件系统。有很多替代方案，如您所提到的，Samba 和 NFS 是其中的两个。

据我了解，您将在 PHP 中执行服务器端。考虑到这一点，我建议使用 WebDav 而不是 Samba 或 NFS。在服务器端实现起来要容易得多。它几乎适用于所有现代操作系统。甚至还有用于 webdav 访问的浏览器插件，因此您可以非常轻松地为您的客户提供多个界面。

[在服务器端，如果您使用 PHP，则有一个名为sabredav](http://code.google.com/p/sabredav/)的开源 php 库。只需在 Google 上快速搜索一下，我什至找到[了一个教程](http://www.phpriot.com/articles/web-dav-with-php)。

在此设置中，您可以按照自己的方式处理文件。这可以是一个单机系统，方法是将 nginx 或 Apache 之类的 Web 服务器嵌入到您的 PHP 端系统中，或者作为在您的服务器上运行的服务提供。

我希望我正确理解了您的问题，这就是您正在寻找的解决方案。

**更新：** 如果您没有机会像我建议的那样使用不同的解决方案，那么它确实必须是 Samba 和 NFS；这两种协议在 PHP 中实现起来实在是太多了。这将是一个巨大的负担和长期的头痛。

但是，您可以使用普通的 NFS/Samba 服务器并尝试使用您的应用程序在后台监视文件更新。这意味着您想要提供的特殊功能（如文件标记或病毒扫描）将以可能可接受的延迟可用。要实现这一点，您可以检查系统上的所有文件和文件夹并处理修改/新的文件和文件夹。更简单的事情是使用带有日志记录机制的服务器来记录每个操作并跟踪它们的日志。这甚至比直接连接客户端机器更好。如果您正确地构建系统，即使在非常大的系统上，文件修改和处理它们之间的延迟也会非常合理。为此，[nas4free](http://nas4free.org/)可以是一个非常好的解决方案，因为它提供了来自单个系统的许多接口，并且根据[其功能页面](http://nas4free.org/index.php/nas4free-features/)，它具有 syslog 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T21:38:34.353

你真的*需要*它成为 SMB 或 NFS 共享吗？我认为您最好编写/使用一些自定义服务器代码。SMB 和 NFS 旨在传输普通文件，与您的用例相距甚远

# .net - .Net 用户控件不触发事件

> ID：11032981
> 
> 赞同：0
> 
> 时间：2012-06-14T12:22:12.453
> 
> 标签：.net, sharepoint-2010, user-controls

我正在尝试编写用户控件。该控件将在 SharePoint WebPart 中使用。在大多数情况下，控件可以工作，问题是控件无法识别按钮被单击。按钮事件不会触发。代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace CU_Controls
{
    public class CheckBoxListDropDown : CheckBoxList
    {
        //First row
        public string Title { get; set; }

        private const string defaultCssResource = "CU_Controls.EmbeddedResources.DefaultStyles.css";

        //Expand or hide on start
        public bool OpenOnStart { get; set; }

        protected Panel cbddPanel;
        protected Panel headerPanel;
        protected Literal headerText;
        protected Image headerImage;

        protected Panel listPanel;

        protected Panel footerPanel;
        protected Button okayButton;
        protected Button cancelButton;

        public event EventHandler ButtonClickDemo;

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);
        }

        protected override void CreateChildControls()
        {
            base.CreateChildControls();

            this.CssClass = "cbddList";

            cbddPanel = new Panel();
            cbddPanel.CssClass = "cbddPanel";
            cbddPanel.ID = this.ClientID + "_cbddPanel";
            cbddPanel.EnableViewState = true;

            headerPanel = new Panel();
            headerPanel.ID = this.ClientID + "_headerPanel";
            headerPanel.CssClass = "cbddHeaderPanel";
            headerPanel.EnableViewState = true;

            headerText = new Literal();
            headerText.EnableViewState = true;

            headerPanel.Controls.Add(headerText);

            headerImage = new Image();
            headerImage.ID = base.ClientID + "_arrowDown";
            headerImage.CssClass = "cbddArrowDown";
            headerImage.ImageUrl = this.Page.ClientScript.GetWebResourceUrl(this.GetType(), "CU_Controls.EmbeddedResources.button.gif");
            headerImage.EnableViewState = true;

            headerPanel.Controls.Add(headerImage);
            cbddPanel.Controls.Add(headerPanel);

            listPanel = new Panel();
            listPanel.ID = base.ClientID + "_listPanel";
            listPanel.CssClass = "cbddListPanel";
            listPanel.EnableViewState = true;

            cbddPanel.Controls.Add(listPanel);

            footerPanel = new Panel();
            footerPanel.ID = base.ClientID + "_footerPanel";
            footerPanel.CssClass = "cbddFooterPanel";
            footerPanel.EnableViewState = true;

            okayButton = new Button();
            okayButton.ID = this.ClientID + "_cbddOkayButton";
            okayButton.CssClass = "cbddOkayButton";
            okayButton.Text = "Ok";
            okayButton.Click += new EventHandler(okayButton_Click);
            okayButton.EnableViewState = true;

            footerPanel.Controls.Add(okayButton);
        }

        void okayButton_Click(object sender, EventArgs e)
        {
            ButtonClickDemo(sender, e);
        }

        protected override void Render(HtmlTextWriter writer)
        {
            cbddPanel.RenderBeginTag(writer);

            headerText.Text = this.Title;
            headerPanel.RenderControl(writer);

            listPanel.RenderBeginTag(writer);

            base.Render(writer);

            footerPanel.RenderControl(writer);

            listPanel.RenderEndTag(writer);
            cbddPanel.RenderEndTag(writer);

            string jqueryToggleFunction = @" 
                <script type=""text/javascript"">
                    $(document).ready(function () {{
                        $('.{0} td:even').css('background-color', '#efefef');

                        $('#{1}').live('click', function(){{ $('#{2}').toggle('fast'); }});   

                        $('#{3}').live('click', function(){{ $('#{2}').toggle('fast'); __doPostBack('{3}',''); return false; }});                                           
                    }}); 
                </script>";
            writer.Write(string.Format(jqueryToggleFunction, base.CssClass, headerImage.ClientID, listPanel.ClientID, okayButton.ClientID));

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:27:42.773

您需要确保在触发回发时不会重新创建所有控件。只需添加：

```
protected override void CreateChildControls()
{                  
    base.CreateChildControls();
    if(this.IsPostBack == false)
    {
        //Your code which adds panels etc.
    }
} 
```

# c# - WCF 中的 Quartz.net

> ID：11032983
> 
> 赞同：0
> 
> 时间：2012-06-14T12:22:15.227
> 
> 标签：c#, wcf, quartz-scheduler, quartz.net-2.0

我有一个服务：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
public class PremieraInteraction : ServiceInit, IPremieraInteraction
{
    public PremieraInteraction()
    {
        ISchedulerFactory schedFact = new StdSchedulerFactory();
        // get a scheduler
        IScheduler sched = schedFact.GetScheduler();
        sched.Start();

        // construct job info
        IJobDetail jobDetail = JobBuilder.Create<PremieraUpdate>().WithIdentity("PremieraUpdateJob").Build();

        ITrigger trigger =
        TriggerBuilder.Create().WithIdentity("PremieraUpdateTrigger").StartNow().WithSimpleSchedule(
        x => x.WithIntervalInSeconds(10)).Build();

        sched.ScheduleJob(jobDetail, trigger); 
    }

} 
```

这是工作：

```
public class PremieraUpdate:IJob
    {
        public void Execute(IJobExecutionContext context)
        {
            Debug.WriteLine("Fire");
        }
    } 
```

问题是它只工作一次。为什么调度程序不是每 10 秒重复一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:29:20.190

一旦服务完成操作，调度程序很可能会被垃圾收集。这是符合预期的，因为除了服务之外，您没有任何引用调度程序的东西。

通常是按调用创建的 WCF 服务。这意味着每次调用服务都会创建一个新的服务实例。在大多数情况下，这很好，因为它有助于避免并发问题，但它也可能令人困惑。

在您的情况下，您需要对调度程序的持久引用。有很多方法可以做到这一点，从服务上的静态变量到某种了解所有调度程序及其生命周期的调度程序存储库。这取决于您的使用情况。

只是为了测试，您可以在服务类中添加一个静态字段。在服务调用中实例化这一点，调度程序应根据需要每 10 秒调用一次操作。

但这也取决于您托管服务的位置（Web 服务、服务、控制台应用程序？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:53:23.263

我建议您在发生的情况下实例化工厂和调度程序`Application_Start`并将`Global.asax.cs`它们存储在静态公共属性中。

```
 public class Global : System.Web.HttpApplication
  {
    public static ISchedulerFactory Factory;
    public static IScheduler Scheduler;

    protected void Application_Start(object sender, EventArgs e)
    {
      Factory = new StdSchedulerFactory();
      Scheduler = Factory.GetScheduler();
    }
  } 
```

`Global`现在在服务内部，您可以通过属性访问调度程序。

前任。

```
Global.Scheduler 
```

我希望您正在使用 WCF 服务将新作业安排到通常在 Windows 服务中运行的 Quartz 服务器。除了在构造函数中调度作业，您可以在一个方法中执行此操作，该方法将获取作业的详细信息并最终调度并运行它。

如果您使用此实现，则无需将服务标记为单例。

# asp.net - ASP.NET 中这两个标签有什么区别？

> ID：11032986
> 
> 赞同：3
> 
> 时间：2012-06-14T12:22:17.943
> 
> 标签：asp.net

> **可能重复：**
> [ASP.NET “特殊”标签](https://stackoverflow.com/questions/649428/asp-net-special-tags)

`<%: %>`和 和有什么不一样`<%= %>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:26:47.020

`<%= ... %>`相当于 Response.Write()。`<%: ... %>`标记是相同的，除了它自动对标记内的值进行 html编码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:25:38.290

请参阅博客文章*[HTML Encoding Code Blocks With ASP.NET 4](http://haacked.com/archive/2009/09/25/html-encoding-code-nuggets.aspx)*。基本上冒号版本（4.0 的新版本）为您进行 HTML 编码。

# java - Jenkins 中的编译错误，但 Eclipse 中没有

> ID：11032988
> 
> 赞同：4
> 
> 时间：2012-06-14T12:22:24.387
> 
> 标签：java, eclipse, compilation, jvm, jenkins

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:45:58.223

Eclipse uses its own compiler. In a very few cases there are little differences between the Eclipse Compiler and the OpenJDK one. For more general information see also:

[http://www.eclipse.org/jdt/core/](http://www.eclipse.org/jdt/core/)

[How does Eclipse compile classes with only a JRE?](https://stackoverflow.com/questions/1642338/java-eclipse-how-does-eclipse-compile-classes-with-only-a-jre)

**Edit:**

The compilation error with the interfaces might be related to this JDK bug: [http://bugs.sun.com/view_bug.do?bug_id=6908259](http://bugs.sun.com/view_bug.do?bug_id=6908259)

# coldfusion - Coldfusion 9 动态调用方法

> ID：11032991
> 
> 赞同：2
> 
> 时间：2012-06-14T12:22:32.187
> 
> 标签：coldfusion, coldfusion-9

我正在尝试从已传递到引用另一个对象的对象中的字符串构建方法调用。

通常在调用对象时，我们编写如下代码：

```
application.stObj.oNewsBusiness.getNews(argumentCollection=local.stArgs); 
```

然而，我所做的是创建了一个包含对象名称、方法名称和参数集合的数组。

```
<cfscript>
local.stArgs = {};
local.stArgs.nNewsID = 19;
local.stArgs.sAuthor = "John";

local.aData = [];
local.aData[1] = local.stArgs;
local.aData[2] = "stObj.oNewsBusiness";
local.aData[3] = "getNews";
</cfscript> 
```

但是我正在努力将所有这些重新组合为一个方法调用。

**使用建议更新但仍有问题**

虽然 cfinvoke 似乎适用于：

```
<cfinvoke component="#application.stObj.oNewsBusiness#" method="#local.sMethod#" argumentcollection="#local.stArgs#" returnvariable="local.qData"></cfinvoke> 
```

执行以下操作时它不起作用：

```
<cfscript>
local.stArgs = local.aData[1];
local.sObject = local.aData[2];
local.sMethod = local.aData[3];
</cfscript>
<cfinvoke component="application.#local.sObject#" method="#local.sMethod#" argumentCollection="#local.stArgs#" returnvariable="local.qData"></cfinvoke> 
```

它会产生一个错误：

> 找不到 ColdFusion 组件或接口 application.stObj.oNewsBusiness

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:33:56.537

CFInvoke 通常用于处理动态方法调用。

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7e0a.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7e0a.html)

CFInvoke has an argumentcollection attribute so you can pass your arguments in the way you are used to.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:47:36.237

Dan is correct CFInvoke is the way to go

```
<cfinvoke component="#mycomponentname#" method="get"  arg1="#arg1#" arg2="#arg2#" arg3=..> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:57:59.193

```
<cfinvoke component="application.#local.sObject#" method="#local.sMethod#"argumentCollection="#local.stArgs#" returnvariable="local.qData"></cfinvoke> 
```

from your update won't work because there are no # signs around the component variable.

You could do

```
<cfset local.componentName = "application." & local.sObject>
<cfinvoke component="#local.componentName#" method="#local.sMethod#"argumentCollection="#local.stArgs#" returnvariable="local.qData"></cfinvoke> 
```

There's probably an inline way of combining application. with the variable on the cfinvoke call, but I don't know off the top of my head.

Edit: Dan Wilson's comment does it better in an inline way.

# version-control - 使用 Visual Studio 2012 与小团队一起签入/签出的最佳选择？

> ID：11032992
> 
> 赞同：3
> 
> 时间：2012-06-14T12:22:36.710
> 
> 标签：version-control, tfs, versioning, dreamweaver, visual-studio-2012

我有一个由 Web 开发人员组成的小型团队，他们一起在多达 50 个外部站点上工作。我正在尝试找到一个更好的解决方案来使用 Dreamweaver 的签入签出来管理源代码。我们刚刚开始到处使用 Visual Studio 2012，我很好奇 TFS 是否适合我们。这里没有人以前使用过版本控制或任何类型的源代码控制，所以我正在寻找类似于他们习惯的东西。

如果这很重要，我们的网站都托管在 Windows 2008 R2 服务器上，并且大部分是用 C# 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:54:48.727

我认为 TFS 是一个不错的选择。正如一些人所评论的那样，这将与您的团队在 Dreamweaver 中的习惯有所不同，但我个人认为，如果您认真管理自己的知识产权，您将投资于某种版本控制系统。话虽如此，无论您是团队选择 TFS、SVN、Git 等，都会有一个学习曲线。

假设您确实使用了 TFS，那么您确实获得了 TFS 附带的所有其他东西的额外好处——这不仅仅是关于版本控制。这包括工作项跟踪、自动构建/部署、报告、简单的 SharePoint 网站等。

使用 TFS，您可以获得所有这些功能的好处，并结合到一个产品中。您也可以使用开源产品完成类似的设置，但需要您将产品拼凑在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T16:00:18.330

我会在 Dreamweaver 中使用集成的 Subversion 客户端，它可以很好地完成基本工作，并且不需要繁琐的导航过程，这会导致您的团队绕过系统。唯一的问题是，DW 不支持最新版本的 SVN，所以你需要选择一个兼容的 SVN 服务器。试试这个：

在 Windows 上为 Dreamweaver CS6 设置版本控制

1.  以前任何使版本控制正常工作的尝试都可能在您的 PC 上创建了一些 .svn 文件夹和文件。在开始之前，您必须从您的 PC 中删除所有这些并卸载所有其他种类的 Subversion 软件。
2.  转到 VisualSVN 服务器网站并下载他们软件的存档标准版本，版本 2.1.16 。不要试图获取更高版本，因为这将安装 SVN 1.7 或 1.8，并且两者都不能与 Dreamweaver 一起使用。

[http://www.visualsvn.com/server/changes/](http://www.visualsvn.com/server/changes/)

1.  尝试使用 file:// 协议让 DW 直接工作到本地文件夹可能行不通，而且还已知会使数据处于危险之中。你需要服务器。我选择使用默认设置安装 VisualSVN 服务器，而不是选择使用 Windows 登录并使用 HTTP，而不是 HTTPS。我决定将存储库放在内部 SSD 驱动器上，但任何本地驱动器都可以。在为您的存储库创建一个文件夹时，请使用一个非常通用的名称，例如 ourcorepositories 。我对所有内容都使用了小写字母。
2.  右键单击“存储库”以创建一个新的。给它一个不带任何空格或特殊字符的名称，例如 mynewprojectrepo 并选中“创建默认结构”。在你确定之前，记下存储库 URL 并将其复制到记事本或类似的纯文本编辑器中，以便稍后在下面的 6 中参考它。它会像

    ```
    http://OFFICEDESKTOP/svn/mynewprojectrepo 
    ```

请注意，URL 的大写部分是您的计算机名称。单击确定，您现在就有了项目的存储库。5\. 启动 DW 并转到您的项目。如果您还没有项目，请创建一个并在其中粘贴一些虚拟文件和文件夹。转到站点菜单>>管理站点...，然后单击您的项目。选择版本控制。6\. 将 Access 设置为“Subversion”（不存在其他选项），Protocol 设置为 HTTP，服务器地址以小写形式输入您的计算机名称，例如

```
 officedesktop 
```

对于存储库路径，请输入（例如，使用上面 4\. 中的当前示例）

```
 /svn/mynewprojectrepo 
```

服务器端口应该是 80 。对于用户名，以小写形式输入您的 Windows 用户名。输入您的 Windows 密码作为密码。这是您用于登录 PC 的名称和密码组合。单击测试按钮，您应该会收到一条成功消息。如果没有，最好的建议是删除您创建的所有 .svn 文件和存储库，然后重新开始。确保不要添加任何斜杠或省略任何斜杠；以上作品。在单击保存之前，单击指向 Adob​​e Subversion 资源的链接并将其添加到浏览器中的书签中。那里有很多有用的背景信息。点击保存，点击完成。7\. 转到您的 DW 项目并打开本地视图。您网站的所有文件和文件夹的图标旁边都会有一个绿色的 + 号。右键单击站点文件夹，然后单击“版本控制>>提交”。每当您更改任何内容时留下评论是一个非常好的主意，因此请按照“我的新项目的初始提交”的行留下提交消息，然后单击提交。如果您有很多文件要转到存储库，则上传它们需要一些时间。当他们上传时，绿色 + 符号消失，表明您的本地版本与 repo 同步。8\. 好的，就是这样，Dreamweaver CS6 中有版本控制。它也可以在 CS5 和 5.5 中工作。查看这些 Adob​​e 资源，了解有关工作流程的一些好的见解。我无法提供任何其他实现版本控制的方法，但我可以说 DW 不与 Git 集成，并且 Dreamweaver 中基本但集成的 Subversion 客户端比没有版本好得多，这可能会节省您的时间控制。对于物理灾难的报道，我还将您的整个存储库文件夹的计划每日备份添加到一些云存储中。对任何错误表示歉意。我会重新检查所有步骤，但是 A）我认为它们会让您启动并运行 B）第一次安装和设置比第二次更容易（所有这些 .svn 文件和文件夹摆脱）。

# .net - 创建仅适用于 SOAP 1.2 的标记引用

> ID：11032999
> 
> 赞同：1
> 
> 时间：2012-06-14T12:22:47.770
> 
> 标签：.net, soap, jaxb, cxf

根据[this site about SOAP 1.2](http://hadleynet.org/marc/whatsnew.html#S3.5.2)，多参考值可以就地编码。如何让 CXF/Jaxb 编组和解组此类内容？

[Jaxb 的 IDRef 注释被 .NET 视为字符串。](https://stackoverflow.com/questions/10333995/handle-jaxb-xmlidref-in-net)它也是一个全有或全无的注释；这意味着它似乎无法像这样将引用与完全编组的对象混合匹配......

```
<parent>
    <child id="a" value="123" />
    <child ref="a" />
</parent> 
```

最终目标是能够交付具有对象间引用的 SOAP 有效负载，.NET 和 Java 都可以开箱即用地使用。