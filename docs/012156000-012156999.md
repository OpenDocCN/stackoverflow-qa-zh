# StackOverflow 问答 12156000-12156999

# css - CSS 导航选项卡显示在文本后面而不是在前景中

> ID：12156001
> 
> 赞同：1
> 
> 时间：2012-08-28T09:06:06.410
> 
> 标签：css, html

我有以下CSS代码：

```
#menu li { 
  float:left;
  position:relative;
  line-height: 3em;
  width: 10em; 
} 
#menu li ul {
  position:absolute;
  margin-top:0em;
  margin-left:.0em;
  display:none; 
}
#menu ul li ul {
  margin-top:0em;
  margin-left:0em;
} 
#menu a {
  display:block;
  border-right:1px solid #fff;
  background:#3B3B3B;
  color:#3B3B3B;
  text-decoration:none; 
  padding:0 0px;
  text-align:center;
  background: url(images/nav.gif) repeat-x 0 0;
  height: 50px;
  list-style-type: none;
}
#menu a:hover {
  background-color::#3B3B3B3;
  color:#fff;
  text-align:center;
  height: 50px;
  list-style-type: none;
}
#menu ul {
  border-top:1px solid #fff;
  float: right;
  list-style-type: none;
} 
#menu ul a {
  border-right:none;
  border-right:1px solid #fff;
  border-bottom:1px solid #fff;
  border-left:1px solid #fff;
  background:#fff;
  text-align:center;
  background: url(images/nav.gif) repeat-x 0 0;
  height: 50px;
} 
/* SHOW SUBMENU 1 */ 
#menu li:hover ul, #menu li.over ul { 
  display:block; 
  background:#fff;
}
#menu li:hover ul ul, #menu li.over ul ul { 
  display:none;
}
/* SHOW SUBMENU 2 */ 
#menu ul li:hover ul, #menu ul li.over ul {
  display:block; 
} 
```

和下面的 HTML 代码

```
<div class="shell">
  <div class="cl">&nbsp;</div>
  <ul id="menu">
    <li><a href="@Url.Content("~/Home/Index")">HOME</a></li>
    <li>
      <a href="#">CLIENTS</a>
      <ul>
        <li><a href="@Url.Content("~/Client/SearchClient")">CLIENT LIST</a></li> 
```

我遇到的问题是，当我将鼠标悬停在下拉选项卡上时 - “客户列表” - 它会显示在我页面上的图像和文本后面。我如何把它带到前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:20:49.507

据我了解，您的菜单位于页面上的图像和文本下方。并且您想在页面的所有内容上显示此菜单。

`z-index`如果是这样，那么从所有内容中为您的菜单提供更高的价值。

喜欢：`.menutab { z-index : 1000;}`其中 .menutab 是菜单元素上的一个类。

**已编辑：**在此行中进行更改

```
/* SHOW SUBMENU 1 */ #menu li:hover ul, #menu li.over ul 
{ display:block; background:#fff;} 
```

至

```
/* SHOW SUBMENU 1 */ #menu li:hover ul, #menu li.over ul 
{ display:block; background:#fff; z-index:1000;   } 
```

它会解决你的问题。

检查这个[**演示**](http://jsfiddle.net/Hjaj4/)

# msbuild - MSBuild - 创建带有通配符的属性？

> ID：12156006
> 
> 赞同：2
> 
> 时间：2012-08-28T09:06:31.267
> 
> 标签：msbuild

我目前正在将我的项目移动到 Visual Studio 2012 并开始使用 nuget。所以我将使用“NUnit Runners”nuget 包而不是 nunit 库。

问题是 nuget 使用包版本创建文件夹。例如，NUnit Runners 位于文件夹内：src\packages\NUnit.Runners.2.6.1\

直到现在，Nunit 都在我的 lib\NUnit 文件夹中。因此，在我的 MSBuild 文件中，我通过指定路径来执行测试：

```
<PropertyGroup>
    <NUnitFolder>$(MSBuildProjectDirectory)\lib\NUnit</NUnitFolder>
</PropertyGroup>
<NUnit Assemblies="..." ToolPath="$(NUnitFolder)" /> 
```

但我不想在我的 msbuild 任务中指定版本号，每次更新 NUnit.Runners 时我都必须更新它。

我尝试使用 CreateProperty，但它似乎不接受通配符。我也尝试过 ItemGroup，但它适用于文件列表，而不是文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:58:31.137

最后，我没有尝试使用通配符创建属性，而是从 packages.config 文件中检索了 NUnit.Runners 的版本。

我现在有一个像这样的目标：

```
<Target Name="GetNUnitFolder">
    <!-- Retrieves the version of NUnit.Runners from the solution's packages.config file -->
    <XmlRead Namespace=""
             XPath="packages/package[@id='NUnit.Runners']/@version"
             XmlFileName="$(MSBuildProjectDirectory)\src\.nuget\packages.config">
        <Output TaskParameter="Value" PropertyName="NUnitVersion" />
    </XmlRead>

    <CreateProperty Value="$(MSBuildProjectDirectory)\src\packages\NUnit.Runners.$(NUnitVersion)\tools">
        <Output TaskParameter="Value" PropertyName="NUnitFolder" />      
    </CreateProperty>
</Target> 
```

注意：要能够使用 XmlRead，您需要 MSBuildCommunityTasks。

一旦我有了版本，我就会重建我的 NUnitFolder 属性。

# javascript - Drupal 随机加载旧版本的脚本

> ID：12156007
> 
> 赞同：1
> 
> 时间：2012-08-28T09:06:31.180
> 
> 标签：javascript, drupal, drupal-6

在 drupal 6 中，我编写了一个输出一些 html 的模块，我使用 hook_block 在块中显示这些 html。

有一个 js 文件，我只想在该块加载时加载，所以我是 hook_block 中的 drupal_add_js()。

除了这个问题之外，一切正常：当您刷新页面时（无论您是否同时清除缓存），通常会加载旧版本的脚本。新旧版本看似随机出现。

我可以做些什么来确保加载正确的版本？谢谢。

编辑：我通过主题的 .info 文件加载的样式表之一正在做同样的事情 - 它的随机版本正在加载。所以它看起来像是一个与模块或块无关的一般问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:54:15.900

直到您对 javascript 文件感到满意，以便它可以被锁定并在缓存中使用，使用 drupal_add_js 的 'defer' 和 'cache' 参数。

在 admin >> performance 中，您会发现包含 js 和 css 的指令 - 如果它们被停用，则每个由 drupal_add_* 添加的文件都会发出一个请求。例如，如果 js 将 preprocess 设置为 true，则由 drupal_add_js 添加的所有 .info javascript 和脚本将被**缝合在一起**：**一个优化的深度缓存脚本**

### < 7.0

```
drupal_add_js($data = NULL, $type = 'module', $scope = 'header', $defer = FALSE, $cache = TRUE, $preprocess = TRUE) 
```

### 7.0 >

```
drupal_add_js($data = NULL, $options = NULL) 
```

在您的情况下，如果您正在开发脚本或需要在每次加载时推送一个新脚本，则在任何情况下都使用 and 下的 false `$cache`，`$preprocess`因此加载“main.js”如下所示：

```
drupal_add_js(base_path() . '/sites/default/files/myjs/main.js', 
     'core', 
     'header', 
     false, 
     false, 
     false
); 
```

在 v7+ func argv[1-X] 中，将简单地放在一个关联数组中，如`$options`，[请参阅 API](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_js/7)

# iphone - 在 iOS 中计算 A(x1,y1) 相对于 B(x2,y2) 的方位

> ID：12156009
> 
> 赞同：1
> 
> 时间：2012-08-28T09:06:41.280
> 
> 标签：iphone, objective-c, math, navigation, trigonometry

![在此处输入图像描述](../Images/57be03092f60fe4dc43329951029b60e.png)

我可以知道我应该如何计算一个点相对于另一个点的方位角吗？我在互联网上看到的所有公式都是纬度/经度坐标。我在这里使用笛卡尔坐标系，但无法找到解决方案。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:26:32.767

使用 atan2 函数（IIRC 你的objective-c 应该有它）。它为您提供介于 -PI 和 PI 之间的结果。如果需要，您必须将其映射到 0-360。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:42:01.233

不是您问题的真正答案，但如果您使用 CLLocationManager 获得积分，则每个 CLLocation 都有一个 course 属性，它为您提供给定点的旅程方位。有关实际数学，请参阅 Axeman 的答案。

# git - 与git相比，subversion有什么优势？

> ID：12156011
> 
> 赞同：3
> 
> 时间：2012-08-28T09:06:50.577
> 
> 标签：git, svn, version-control

众所周知，现在git非常流行，因为它的历史记录都在本地计算机上，效率很高，而且可以在没有网络的情况下检索历史记录。也许对于外网用户来说，网络问题并不那么重要，但git还有其他优点，例如轻量级分支（我仍然不确定它和svn的分支有什么区别，为什么git的分支是轻量级的）？

我也知道很多人还在使用颠覆，为什么？如果 git 这么好，他们可能会切换到 git :)

那么，这里有人可以告诉我颠覆的一些优点吗？

还有一个问题：

```
is there anything which can be done by svn, but cannot be done with git? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T10:39:32.473

我建议您阅读文章 [**“我讨厌 Git 的 10 件事”**](http://steveko.wordpress.com/2012/02/24/10-things-i-hate-about-git/)和 StackOverflow 线程[**SVN vs Git**](https://stackoverflow.com/questions/161541/svn-vs-git)。我还建议阅读[有关 Subversion 和 Git 的文档](http://svnvsgit.com/)。

虽然其他人已经提到**简单**（简单是 Apache Subversion 的商标**；）**顺便说一句）和**清晰的工作流程**是 Subversion 的主要优势，但我想添加一些其他重要的 Apache Subversion*优点*：

*   **更好的 IDE 集成和 GUI。** 您可以在大多数 IDE 中看到内置的 SVN 客户端（或作为插件实现）。其中一些提供了与 IDE 的非常舒适和直观的版本控制集成。另一方面，除了知名的 GitHub 之外，Git 并没有很好的图形界面。IDE 集成仍在进行中，但 Git 的 hacky 命令行特性并没有真正转化为 GUI。对于比分支或拉/推更复杂的事情，您仍然必须使用命令行。

    *顺便说一句，TortoiseSVN Subversion 客户端可以被认为是适用于 Windows 的最佳版本控制客户端。*

*   颠覆是**中心化的。**换句话说，[分布式系统**不是**所谓的“下一代 VCS”](http://svnvsgit.com/#dvcs-myth)（你好，Eric Sink 等人！），嗯，它们只是分布式的。分布式只是另一种方法，它非常适合 Linux Kernel 等开源项目（Git 是为 Linux Kernel 开发的，记得吗？），但也有其自身的缺点。

*   **完整的修订历史**。SVN 维护*目录*、*重命名*和*文件元数据*的版本控制。Subversion 就像一台具有不可变历史的时间机器。您可以随时使用机器回到过去，查看您的日期在 2009 年 1 月 3 日时的样子。

*   部分结账。使用 Subversion，您无需获得完整的存储库克隆。您可以签出项目的特定分支或主干。更重要的是，您可以获得存储库的任何子树。大大减少开始执行任务所需的流量。如果你已经有一个工作副本，切换到另一个分支或搁置是*即时*的（如果你有连接到远程仓库，显然）。

*   [锁定支持](http://svnbook.red-bean.com/en/1.8/svn.advanced.locking.html)。Subversion 支持[lock-modify-unlock 版本控制模型](http://svnbook.red-bean.com/en/1.8/svn.basic.version-control-basics.html#svn.basic.vsn-models.lock-unlock)。吉特没有。如果您有不可合并的文件，这将非常有用。你好游戏开发！:)

*   内置[授权](http://svnbook.red-bean.com/en/1.8/svn.serverconfig.httpd.html#svn.serverconfig.httpd.authz)和[身份验证](http://svnbook.red-bean.com/en/1.8/svn.serverconfig.httpd.html#svn.serverconfig.httpd.authn)机制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T09:14:57.957

简单。

诸如“什么是遥控器？”、“为什么要修改消息？”、“这个变基是什么？”之类的问题。理解 Git 提供的所有功能是必要的，你需要理解它们才能真正了解 Git 为何如此出色。

但对于一个设计师或任何从 Git 开始的技术人员来说，这真的只是一个令人头疼的问题。Subversion 是众所周知的，它的集中方式让所有这些人都更容易理解它。

您可以使用 Subversion 更快地开始工作和生产东西（前提是您已经设置了环境；））。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T11:39:49.290

Git 是关于拥有个人权力，而 Svn 是关于企业权力（作为一个宏大的主张）。

Git 知道不再有必须保护免受伤害的主文档。而是现在有许多副本，除非经过 sha1 验证，否则更难以管理。

svn 知道人们是愚蠢的（但不是你和我；-）并且认为知道谁重命名和移动了重要的内容，并且可以稍后签署内容。

Git 让您可以用剪刀跑步、玩弄链锯并制作您的产品。Svn 提供防护服、工作说明和一种安全措施。

这是关于选择你想把哪只脚钉在地板上;-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T13:51:12.287

Git 分支是“轻量级”的，因为它们只是指针：git 只是在特定提交处指向“master”或“development”或“trunk”或“myfeature”。当您在分支上重新提交时，指针会前进。[考虑git-scm 文档中](http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is)的这张图表，这是关于该主题的一流资源。

![git 分支指针](../Images/d3f06a8d758e0ce11f4284bf2744c398.png)

此图中的“master”分支指向 commit `f30ab`。'testing' 分支指向 commit `c2b9e`。`HEAD`在这个图中是一个特殊的指针：大多数时候它指向另一个分支（在 git 术语中，它是一个“符号引用”）以显示当前工作目录的签出状态。例如，当您发出 时`git checkout f30ab`，您将存储库置于“分离的 HEAD”状态。换句话说，您将指针从符号引用“testing”移动到提交，`f30ab`.

举个例子，你应该能够在本地设置自己。

```
git init /tmp/test && cd /tmp/test          ;# make a repo and cd to it
echo A > A                                  ;# add a file
git add A && git commit -m "first commit"   ;# make the first commit
echo B > B                                  ;# add another file
git add B && git commit -m "second commit"  ;# commit that one too
git checkout -b development                 ;# now let's checkout development
echo C > C                                  ;# commit one more file
git add C && git commit -m "third commit"   ;# and commit that final one 
```

你现在得到了类似下面的东西。我没有omnigraffle，所以我们被一个有向图困住了：

```
 * 93e71ee - (HEAD, development) third commit
 /  
* 6378754 - (master) second commit
* d2b4ba9 - first commit 
```

正如您可以从括号中推断的那样，“master”指向 commit `6378754`，“development”指向 commit `93e71ee`，`HEAD`指向“development”。不要相信我的话。自己探索指针：

```
$ cat .git/refs/heads/master              ;# cat the 'master' pointer
5a744a27e01ae9cddad02531c1005df8244d188b
$ cat .git/refs/heads/development         ;# now cat the 'development' one
93e71ee0a538b0e8ac548e3936f696fa4936f8dc
$ cat .git/HEAD                           ;# note that 'HEAD' points at 'development'
ref: refs/heads/development
$ git symbolic-ref HEAD                   ;# as we can also show with 'symbolic-ref'
refs/heads/development 
```

当分支只是指针时，它们之间的切换是微不足道的。一种特殊情况是`HEAD`。考虑当我们 checkout master 时会发生什么：

```
$ git checkout master    ;# checkout master...
$ cat .git/HEAD          ;# where are we now?
ref: refs/heads/master 
```

检查提交怎么样？

```
$ git checkout d2b4ba9                  ;# this will throw some advice
Note: checking out 'd2b4ba9'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

$ cat .git/HEAD                         ;# 'HEAD' points at a commit
d2b4ba97698d7f528f9ba1e08d978a70651b3b1d
$ git symbolic-ref HEAD                 ;# and thus isn't a symbolic reference
fatal: ref HEAD is not a symbolic ref 
```

那建议是什么意思？对处于“分离 HEAD”状态的存储库进行提交会生成无法从任何分支访问的提交。当`HEAD`更改（来自任何签出操作，例如`git checkout master`）时，这些提交将丢失。这在图表中更容易看到：

```
echo D > D                                  ;# add another file
git add D && git commit -m "fourth commit"  ;# and commit it 
```

让我们看看我们的图表。请注意，没有 git 命令会生成您在下面看到的内容。出于本示例的目的，我已经修改了现有输出。

```
 * 93e71ee - (development) third commit
     /
    * 6378754 - (master) second commit
   /
* / 72c1f03 - (HEAD) fourth commit
|/
* d2b4ba9 - first commit 
```

`HEAD`仍然是分离的。它指向`72c1f03`。'master' 和 'development' 指向我们期望的位置，但`72c1f03`无法从任何分支访问。那是个问题。如果我想留下`72c1f03`来，我必须给它一个分支：

```
$ git checkout -b experimental    ;# checkout 'experimental' based on '72c1f03'
$ cat .git/HEAD                   ;# HEAD is once again pointed at a branch
ref: refs/heads/experimental
$ git symbolic-ref HEAD           ;# and is a symbolic ref
refs/heads/experimental 
```

和图表：

```
 * 93e71ee - (development) third commit
     /
    * 6378754 - (master) second commit
   /
* / 72c1f03 - (HEAD, experimental) fourth commit
|/
* d2b4ba9 - first commit 
```

Git 使分支变得容易。推送和拉取有关指针的信息比推送和拉取整套文件要快得多。切割一个分支需要几毫秒。这太容易了，几乎感觉不对。因此，git 允许更多[分布式工作流选项，](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows#Integration-Manager-Workflow)尽管它当然也可以处理集中式工作流选项。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T09:14:29.893

从 SVN 切换到 git 是一项艰巨的任务（我们在我的公司已经使用了 6 个月），因为它需要对公司进行大量更改（培训、服务器、与问题跟踪等其他工具的通信......、安全性）。

我能找到的唯一优点是它的简单性（因为你不能做的事情比在 git 中做的多），工作流更容易理解和应用，所以如果你害怕不是所有同事都可以/想要处理 git 的复杂性或不需要它的特性，然后继续使用svn。

看看[这个 SO 线程](https://stackoverflow.com/questions/161541/svn-vs-git)来说服自己:)。

# php - 将 Excel 文件发送到客户的打印机

> ID：12156013
> 
> 赞同：1
> 
> 时间：2012-08-28T09:06:55.593
> 
> 标签：php, excel, printing

我有一个 PHP 网站，我正在将一些数据写入 Excel 文件。我的 Excel 文件可以通过一个按钮下载。它会打开一个窗口或下载管理器（如果已配置）。到目前为止一切正常。现在我想将此文件**自动**发送到客户端的默认打印机。当用户点击打印时，网页必须将“EXCEL FILE”发送到打印机。不像 JavaScript 中的“window.print()”函数。

有没有办法用 javascript 或 AJAX 做到这一点？客户端是否必须下载 Excel 文件才能将其发送到默认打印机？我尝试使用带有“src = bla_bla.xls”的隐藏“iframe”，但它会自动打开下载窗口。

简要地说，我希望将这个在服务器上准备好的**Excel文件发送到****客户端的默认打印机**并打开打印选项窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:40:18.523

我认为您在使用 activex 的安全障碍方面遇到的问题是因为您将 excel 嵌入到网页中。应该可以通过使用 Excel 的发布方法将工作表发布为 HTML 来打印工作表。我用它来为电子邮件创建 HTML。

```
Dim rngeTableRange As Range
Dim lsTableFileName As String

lsTableFileName = <filepath and name for HTML output as string>
Set rngeTableRange = ActiveSheet.UsedRange

ActiveWorkbook.PublishObjects.Add(xlSourceRange, lsTableFileName, _
rngeTableRange.Parent.Name, rngeTableRange.Address, xlHtmlStatic).Publish True 
```

如果您希望打印输出显示为电子表格，您可以在发布工作表之前添加边框。以下 VBA 代码将在每个单元格周围放置一个边框：

```
With ActiveSheet.UsedRange.Borders(xlEdgeLeft)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With
With ActiveSheet.UsedRange.Borders(xlEdgeTop)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With
With ActiveSheet.UsedRange.Borders(xlEdgeBottom)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With
With ActiveSheet.UsedRange.Borders(xlEdgeRight)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With
With ActiveSheet.UsedRange.Borders(xlInsideVertical)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With
With ActiveSheet.UsedRange.Borders(xlInsideHorizontal)
    .LineStyle = xlContinuous
    .Weight = xlThin
End With 
```

结果应该是不会导致安全警告的电子表格的 HTML 图像，我认为它是可打印的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:12:17.237

要做到这一点……您需要一种客户端脚本语言，如 javascript 或 vb。php 是服务器端的，对客户端的打印机一无所知..

# java - 我如何编写一个从扫描仪扫描文档并显示给我的java代码？

> ID：12156021
> 
> 赞同：1
> 
> 时间：2012-08-28T09:07:29.493
> 
> 标签：java, swing, jtree

我如何编写一个从扫描仪扫描文档并在 Java 树中显示的 Java 代码。当我单击扫描时，它会扫描我的扫描仪上的 domucemts 并在窗口中显示我。我怎么写这个？有代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:42:14.003

如果您想自己构建整个应用程序，那么您计划的这项任务非常复杂。但是在第三方工具的帮助下，您只需几行代码即可完成。脚步：

1.  使用扫描仪附带的软件或任何其他第三方工具将文档扫描成 pdf 格式。
2.  使用其他软件/库从 pdf 中提取文本。当我用谷歌搜索时，遇到了 PDFBox API。

    > PDFBox 是一个库，可以处理不同类型的 PDF 文档，包括加密的 PDF 格式和提取文本，并具有命令行实用程序，可以将 PDF 转换为文本文档。

    [此处](http://www.prasannatech.net/2009/01/convert-pdf-text-parser-java-api-pdfbox.html)使用 API 的示例

3.  修改上面的类或者写一个新的类来读取文本文件并构造树形结构。

# f# - 定义模块 VS.NET vs F# Interactive

> ID：12156022
> 
> 赞同：13
> 
> 时间：2012-08-28T09:07:31.163
> 
> 标签：f#, f#-interactive

我编写了这段代码，它可以在 VS.NET 2010 中完美编译和运行

```
module ConfigHandler
open System
open System.Xml
open System.Configuration

let GetConnectionString (key : string) =
  ConfigurationManager.ConnectionStrings.Item(key).ConnectionString 
```

但是，当我执行 control + A 和 Alt + Enter 将其发送到 FSI 时，出现错误

ConfigHandler.fs(2,1)：错误 FS0010：定义中结构化构造的意外开始。应为“=”或其他标记。

好的。

所以我将代码更改为

```
module ConfigHandler =
  open System
  open System.Xml
  open System.Configuration

  let GetConnectionString (key : string) =
    ConfigurationManager.ConnectionStrings.Item(key).ConnectionString 
```

现在 Control + A, Alt + Enter 成功了，我 FSI 很好地告诉我

模块 ConfigHandler = begin val GetConnectionString : string -> string end

但是现在如果我尝试在 VS.NET 2010 中编译我的代码，我会收到一条错误消息

库或多文件应用程序中的文件必须以命名空间或模块声明开头，例如“namespace SomeNamespace.SubNamespace”或“module SomeNamespace.SomeModule”

我怎么能两者兼得？能够在 VS.NET 中编译以及将模块发送到 FSI 的能力？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T13:12:09.917

您的两个代码片段之间存在微小但至关重要的差异，这应该归咎于这里。

F# 有两种方法来声明`module`. 第一个是“顶级模块”，声明如下：

```
module MyModule
// ... code goes here 
```

声明模块的另一种方法是作为“本地模块”，如下所示：

```
module MyModule =
    // ... code goes here 
```

“顶级”和“本地”声明之间的主要区别在于，本地声明后跟一个`=`符号，并且“本地”模块中的代码**必须**缩进。

您收到`ConfigHandler.fs(2,1): error FS0010: Unexpected start of structured construct in definition. Expected '=' or other token.`第一个代码段消息的原因是您不能在`fsi`.

当您将`=`符号添加到模块定义时，它从顶级模块更改为本地模块。从那里，您得到了错误`Files in libraries or multiple-file applications must begin with a namespace or module declaration, e.g. 'namespace SomeNamespace.SubNamespace' or 'module SomeNamespace.SomeModule'`，因为本地模块必须嵌套在顶级模块或命名空间中。`fsi`不允许您定义命名空间（或顶级模块），因此如果您想将整个文件复制粘贴到`fsi`唯一可行的方法是使用 @pad 提到的编译指令。否则，您可以简单地将本地模块定义（不包含命名空间）复制粘贴到其中`fsi`，它们应该可以按预期工作。

参考： [MSDN 上的模块 (F#)](http://msdn.microsoft.com/en-us/library/dd233221.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T09:30:11.130

常见的解决方案是保留第一个示例并创建一个`fsx`引用该模块的文件：

```
#load "ConfigHandler.fs" 
```

您可以加载多个模块并为实验编写管道代码。

如果你真的想`ConfigHandler.fs`直接加载到 F# Interactive，你可以使用`INTERACTIVE`符号和[编译器指令](http://msdn.microsoft.com/en-us/library/dd233195.aspx)：

```
#if INTERACTIVE
#else
module ConfigHandler
#endif 
```

它适用于 fsi 和 fsc。

# c# - 动态调用上的 RuntimeBinderInternalCompilerException

> ID：12156037
> 
> 赞同：24
> 
> 时间：2012-08-28T09:08:19.537
> 
> 标签：c#, dynamic, roslyn

将对象作为动态参数传递时，出现意外的 RuntimeBinderInternalCompilerException。

我将尝试解释该场景，因为它太复杂而无法轻松粘贴代码。我正在和 Roslyn 做一些非常奇怪的黑客行为，所以听起来很奇怪。

1.  执行申请
2.  监控源代码的变化
3.  使用更改的文件/类重新编译实际上是程序集的差异
4.  将新编译的程序集加载到原始 AppDomain
5.  将现有对象实例作为动态传递给新的/更改的代码，因此新代码可以在现有的上下文/应用程序状态上运行。

这种动态传递***应该可以***工作，因为类型是兼容的：即，在我的情况下，我可以保证它具有功能匹配的方法/类型。

但是当我去执行 changed+reloaded 方法时，它接收到一个动态类型的对象，我得到了这个异常。

```
RuntimeBinderInternalCompilerException was unhandled.
An unexpected exception occurred while binding a dynamic operation 
```

根据 MSDN：

> 此类异常与 RuntimeBinderException 的不同之处在于，RuntimeBinderException 代表通常编译器错误意义上的绑定失败，而 RuntimeBinderInternalCompilerException 代表运行时绑定器本身的故障。

谷歌对此绝对没有结果。我也不知道如何进一步调试它。有什么建议么？

（我确实做了一些沙盒测试，以确保我可以在运行时将不同的程序集加载到测试应用程序中，并将来自不同程序集的实例类型传递给接受动态参数的单个方法。所以它在那种情况下确实有效。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T20:24:39.420

没有更多细节很难回答这个问题，但是阅读你所说的，有几点需要注意：

1.  在内部，所有类型名称都是完全限定的。这意味着如果您尝试将两种类型视为相同，编译器将拒绝您的代码，除非它们来自同一个程序集，具有相同的命名空间和名称。在 .Net 中获得稍微不同的网格类型是很棘手的。

2.  `dynamic`并不总是像您直觉地认为的那样有效。如果您正在使用编译器，那么非常值得学习 IL 的工作原理，并查看您的代码和基类库代码以了解它们如何交互。

一个对低级 .Net 工作非常有用的工具是 ILSpy：http: [//ilspy.net/](http://ilspy.net/)

# javascript - SwfObject 注册对象？

> ID：12156038
> 
> 赞同：3
> 
> 时间：2012-08-28T09:08:21.957
> 
> 标签：javascript, html, flash, swfobject

我通常将 embed 用于 Flash 文件，但我对使用 SwfObject 很感兴趣。问题是，我必须在我的网页头上写这个​​吗？

```
<script type="text/javascript">
swfobject.registerObject("myId", "9.0.0", "expressInstall.swf");
</script> 
```

或者我可以简单地使用这个：

```
 <object id="myId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="300" height="120">
            <param name="movie" value="test.swf" />
        <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="test.swf" width="300" height="120">
            <!--<![endif]-->
            <div>
                <h1>Alternative content</h1>
                <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
            </div>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object> 
```

另一个问题，classid是什么意思？我必须提供这个值吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:42:41.877

`swfobject.registerSWF`仅在两个用例中需要：

1.  如果您想使用快速安装
2.  如果您想要求用户在尝试查看您的 SWF 之前拥有最低版本的 Flash Player。

如果这些情况都不适用于您，您可以简单地将`<object>`元素放入您的标记中，就像您在上面所写的那样。

如果您决定使用`swfobject.registerSWF`，则应`<head>`在导入 SWFObject JavaScript 文件后将其放置在您的文档中。请参阅[官方文档](http://code.google.com/p/swfobject/wiki/documentation)或[learnswfobject.com](http://learnswfobject.com/)中的示例。

关于classid，它适用于Internet Explorer。外部`<object>`适用于 IE，而内部`<object>`适用于几乎所有其他浏览器。它们需要截然不同的语法。classid 值永远不会改变。如果您不想担心，请使用 SWFObject 标记生成器为您生成代码：http: [//www.bobbyvandersluis.com/swfobject/generator/index.html](http://www.bobbyvandersluis.com/swfobject/generator/index.html)或[http://learnswfobject.com/generator /](http://learnswfobject.com/generator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:16:39.030

对于你的第一个问题：不！您必须在`<object id="myId"></object>`呈现 html 元素后编写，因为此 javascript 将在第一时间执行。

第二个问题：这是注册表中的一个条目，其中可以找到有关 swf 插件的一些信息。您需要 InternetExplorer 和 Windows 下的类似功能。

# html - 响应式：在 div 中调整背景图像的大小

> ID：12156043
> 
> 赞同：0
> 
> 时间：2012-08-28T09:08:37.157
> 
> 标签：html, css, responsive-design

我正在使用下面的代码将图像显示为`div`. 如何调整它的大小？

```
#header {
    height: 255px;
    -webkit-background-size:cover;
    -moz-background-size:cover;
    background-size:cover;
    background-position: 50% 50%;
    background-image: url('../simg/header.png');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:21:28.873

您可以尝试使用该`background-size`属性来控制背景的大小。

例如：

```
#header {
height: 255px;
-webkit-background-size:50%;
-moz-background-size:50%;
background-size:50%;
background-position: 50% 50%;
background-image: url('../simg/header.png');
} 
```

这会将背景图像在任一维度上减少到一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:14:37.377

尝试简单的背景调整大小 .js [http://johnpatrickgiven.com/jquery/background-resize/](http://johnpatrickgiven.com/jquery/background-resize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T20:15:33.987

您可以尝试的另一种方法是设置 css

```
background-size:contain;  
width:50%; 
max-height:255px; 
```

并让浏览器找出导致它保持纵横比的高度。

# smarty - Smarty：始终显示 3 位数字

> ID：12156044
> 
> 赞同：1
> 
> 时间：2012-08-28T09:08:40.910
> 
> 标签：smarty, prestashop

这可能是一个容易回答的问题，但我有点难过，而且我研究 Smarty 的时间还不够长，无法弄清楚。

我需要以 3 位格式显示数字，即：

```
8   = 008
18  = 018
118 = 118 
```

为了添加一些上下文，基本上我正在尝试编辑 Prestashop 模板（在此之前从未接触过 smarty）。目前价格显示为 1.223.014，我想将最后三位数字分开，以便我可以将其格式设置为与价格的第一部分不同。因此我可以做类似的事情

```
<span class="abc">1.223</span>.<span class="xyz">014</span> 
```

不知道是否有更简单的方法可以做到这一点，但基本上我目前正在将当前价格除以 1000（以消除最后 3 位数字），现在我对如何获得最后 3 位数字感到困惑（如果最后三个数字很好用位数大于 99）

感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:53:43.187

您的示例的解决方案 `{"%03d"|sprintf:8}`

如果您在任何情况下都想要最后 3 位数字，则可能的解决方案 `{'1.223.014'|substr:-3}`

html:

```
<span class="abc">{'1.223.014'|substr:0:-4}</span>.<span class="xyz">{'1.223.014'|substr:-3}</span> 
```

**注意：如果数字长度小于4，这将不起作用**

如果你想检查数字内是否有点，你可以这样做

```
{if '1.223.014'|substr_count:'.' > 0}
..dots inside..
{else}
..no dots inside..
{/if} 
```

用 smarty 3 测试。

# android - 多个 Android 应用程序实例

> ID：12156049
> 
> 赞同：0
> 
> 时间：2012-08-28T09:08:46.797
> 
> 标签：android, runtime, multiple-instances

是否可以安装或运行同一应用程序的多个实例？是否可以在应用程序中创建应用程序的第二个实例？这样我就知道使用`static Context`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:12:33.797

不，每个软件包只有一次安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:15:21.127

如果您的应用程序指定了不同的包 (com.app_a) 与 (com.app_b)，您可以多次运行一个应用程序，但由于其新指定的包，这将成为一个新应用程序。

简短的回答：没有。当您重新运行您的应用程序时，它将被替换。

但是，可以为一个由一系列活动组成的应用程序运行多个任务。要了解更多信息，请参阅[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# c# - 使用 c# 使用套接字编程将列表框值发送到控制台应用程序

> ID：12156050
> 
> 赞同：0
> 
> 时间：2012-08-28T09:08:51.237
> 
> 标签：c#, sockets, console

如果我不在文本框中的字符串末尾放置 $ 符号，则会引发错误，提示我必须更改代码，以便用户在文本框中输入的任何内容都应显示。这是一种情况。

在我的第二个场景中，我需要将列表框中的选定项目数发送到控制台。

如何将选定的值存储在变量中？

这是我的客户端代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Windows.Forms;
using System.Net.Sockets;

namespace eg_client
{
    public partial class Form1 : Form
    {
        System.Net.Sockets.TcpClient clientSocket = new System.Net.Sockets.TcpClient();
        public Form1()
        {
            InitializeComponent();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            NetworkStream serverStream = clientSocket.GetStream();
            string data = textBox2.Text;
            byte[] dataB = System.Text.Encoding.Unicode.GetBytes(data);
            serverStream.Write(dataB, 0, dataB.Length);
            serverStream.Flush();
            byte[] inStream = new byte[10025];
            serverStream.Read(inStream, 0, (int)clientSocket.ReceiveBufferSize);
            string returndata = System.Text.Encoding.ASCII.GetString(inStream);
        }
        private void Form1_Load_1(object sender, EventArgs e)
        {
            clientSocket.Connect("127.0.0.1", 8001);
            label2.Text = "Client Socket Program - Server Connected ...";
        }
    }
} 
```

这是我的服务器端代码

```
using System;
using System.Net.Sockets;
using System.Text;

namespace eg_server
{
    class Program
    {
        static void Main(string[] args)
        {
            TcpListener serverSocket = new TcpListener(8001);
            TcpClient clientSocket = default(TcpClient);
            serverSocket.Start();
            Console.WriteLine(" >> Server Started");
            clientSocket = serverSocket.AcceptTcpClient();
            Console.WriteLine(" >> Accept connection from client");
            while ((true))
            {
                try
                {
                    NetworkStream networkStream = clientSocket.GetStream();
                    byte[] bytesFrom = new byte[10025];
                    networkStream.Read(bytesFrom, 0, (int)clientSocket.ReceiveBufferSize);
                    string dataFromClient = System.Text.Encoding.ASCII.GetString(bytesFrom);
                    dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$"));
                    Console.WriteLine(" >> Data from client - " + dataFromClient);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.ToString());
                }
            }
            clientSocket.Close();
            serverSocket.Stop();
            Console.WriteLine(" >> exit");
            Console.ReadLine();
        }
    }
} 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:12:24.943

您的服务器端代码有

```
dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$")); 
```

您假设字符串将包含一个，您需要决定如果字符串没有一个该怎么办..例如

```
string dataFromClient = System.Text.Encoding.ASCII.GetString(bytesFrom);
if (dataFromClient.Contains("$"))
{
 dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$"));
 Console.WriteLine(" >> Data from client - " + dataFromClient);
}
else 
 console.WriteLine("Data received in incorrect format"); 
```

# javascript - Google Search API - “无结果”文本

> ID：12156051
> 
> 赞同：0
> 
> 时间：2012-08-28T09:08:51.950
> 
> 标签：javascript, jquery, google-api, google-search-api

有人知道如何将“无结果”更改为其他文本...

我有这个代码：

```
function OnLoad() {
  // Create a custom search control that uses a CSE restricted to code.google.com
  var customSearchControl = new google.search.CustomSearchControl('http://******');

  // Draw the control in content div
  customSearchControl.draw('ArticleGoogleSearchBox');

} 
```

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:31:24.970

有像 .setNoResultsString(str) 这样的选项

[https://developers.google.com/custom-search/docs/js/cselement-reference#cse-el](https://developers.google.com/custom-search/docs/js/cselement-reference#cse-el)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:32:10.757

您可以从此 URL [https://developers.google.com/custom-search/docs/js/rendering](https://developers.google.com/custom-search/docs/js/rendering)找到明确的解决方案。阅读“示例：对条件、迭代和局部变量使用数据属性”部分并应用 if-else 属性来自定义搜索内容。

# php - Zend 按字段选择分组

> ID：12156057
> 
> 赞同：1
> 
> 时间：2012-08-28T09:09:11.140
> 
> 标签：php, mysql, zend-framework, zend-db-table

我有一个查询如下：

```
select status, count(id) as units from myTable group by status 
```

我在使用表时有一个 Zend_Db_Table 对象，我正在尝试下面提到的片段来创建上面的查询：

```
$objTable= new Application_Model_DbTable_MyTable();
$select = $objTable -> select(Zend_Db_Table::SELECT_WITH_FROM_PART)
                    -> setIntegrityCheck(false); // i am also using joins to create the query, but this is not of concern
$select -> columns(array(
           'status' => new Zend_Db_Expr('DISTINCT(STATUS)'),
           'units'  => new Zend_Db_Expr('COUNT(id)')
           ));
$select -> group('status'); 
```

从上面的代码片段创建的查询如下：

```
select myTable.*, DISTINCT(STATUS) as status, COUNT(id) as units from myTable group by status 
```

我想`myTable.*`从生成的查询中删除 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:11:55.173

```
$select = $db ->select()
              ->distinct()
              ->from('myTable',array('status', 'COUNT(id) as units'))
              ->group('status'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:38:06.200

试试这个。

```
$select = new Zend_Db_Select;

$select->from(
             # table
             array(
                  't' => 'myTable'
             ),

             # columns
             array(
                 'status' => 'DISTINCT(STATUS)',
                 'units'  => 'COUNT(id)',
             ));
       ->group('status'); 
```

如果子句中没有指定列，问题`Zend_Db_Select`将自动添加到您的查询中`table.*``->from(`

# ios - 为什么 iOS 应用最近更改了身份验证方法？

> ID：12156058
> 
> 赞同：1
> 
> 时间：2012-08-28T09:09:12.007
> 
> 标签：ios, authentication, oauth, twitter-oauth, facebook-oauth

最近我注意到 Path、Pinterest 等如何改变他们验证用户的方式。目前，他们似乎要求我们创建一个与 Facebook 或 Twitter 关联的帐户。我无法理解这背后的原因。他们采取这一举措是否有任何安全问题？

为什么使用 Facebook 和 Twitter 进行简单的身份验证还不够？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:23:42.870

我认为这是为了让网站更好地控制他们的未来以及与用户的关系。

如果他们有自己的帐户系统，但允许用户将其链接到 Facebook 或 Twitter，那么如果与这些提供商的关系变坏，则以后可以更改该链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:13:15.820

最大的原因是他们不必冒任何风险来处理可能被黑客入侵的密码等。他们正在将用户帐户的安全性转移给更大的合作伙伴，因此他们不必担心。

# java - 从 Equals 方法返回 false 而不覆盖

> ID：12156059
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:09:21.320
> 
> 标签：java

编写`TestEquals class`以便`Puzzle3`打印类的主要方法`false`。

> 注意：您不能覆盖 TestEquals 类的 equals 方法。

```
public class Puzzle3 {
    public static void main(String[] args) {
        TestEquals testEquals = new TestEquals();
        System.out.println(testEquals.equals(testEquals));
    }
} 
```

我没有找到实现此目的的方法，请分享您的意见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:15:51.640

您可能不会重载 equals 方法，但没有理由不能重载 equals 方法。

方法 Object.equals 有原型：

```
public boolean equals(Object o) { ... } 
```

要覆盖此方法，您必须在 TestEquals 中创建具有相同原型的方法。但是，您的问题陈述表明您不允许覆盖此方法。没问题，重载方法是完成任务的有效方法。只需将以下方法定义添加到 TestEquals：

```
public boolean equals(TestEquals o) { return false; } 
```

你完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:13:55.177

您可以*重载*equals ，而不是*覆盖equals*

 *```
class TestEquals {
    // a common mistake which doesn't override equals(Object)
    public boolean equals(TestEquals te) { 
          return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T11:11:43.493

**以下将打印错误:)**

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.OutputStream;
import java.io.PrintStream;
import java.io.UnsupportedEncodingException;

public class TestEquals {

  public static void main(String[] args) {
    TestEquals testEquals = new TestEquals();
    System.out.println(testEquals.equals(testEquals));
  }

  static {
    System.setOut(new CustomPrintStream(new PrintStream(System.out)));
  }

  public static class CustomPrintStream extends PrintStream {

    /**
     * This does the trick.
     */
    @Override
      public void println(boolean x) {
      super.println(!x);
    }

    public CustomPrintStream(File file, String csn) throws FileNotFoundException, UnsupportedEncodingException {
      super(file, csn);
    }

    public CustomPrintStream(File file) throws FileNotFoundException {
      super(file);
    }

    public CustomPrintStream(OutputStream out, boolean autoFlush, String encoding)
      throws UnsupportedEncodingException {
      super(out, autoFlush, encoding);
    }

    public CustomPrintStream(OutputStream out, boolean autoFlush) {
      super(out, autoFlush);
    }

    public CustomPrintStream(OutputStream out) {
      super(out);
    }

    public CustomPrintStream(String fileName, String csn) throws FileNotFoundException,
                                                                 UnsupportedEncodingException {
      super(fileName, csn);
    }

    public CustomPrintStream(String fileName) throws FileNotFoundException {
      super(fileName);
    }
  }
} 
```*

# php - mongodb ubuntu 亚马逊网络服务

> ID：12156063
> 
> 赞同：1
> 
> 时间：2012-08-28T09:09:30.443
> 
> 标签：php, mongodb, ubuntu

我有这个查询

> db.tablebusiness.find({ "LongitudeLatitude" : { "$within" : { "$centerSphere" : [[106.772835, -6.186753], 0.0089967464101566] } }, "indexContents" : { "$all" : ["warung" ] }, "突出" : { "$gte" : 15 } }).limit(50);

问题：在 mongodb windows 中，这个查询运行速度很快，不到 1 秒，但在 ubuntu server amazon 中，这个查询没有运行。花了1分钟。

当然，亚马逊服务器内存不足（我的本地主机有 8GB 内存）等问题。但是性能上的差异是巨大的。

例如，在我的本地服务器中，我可以运行 1000000 个线程。亚马逊的东西只运行 1 或 2 个查询。

两者都有索引。实际上，亚马逊服务器是我的本地主机的精确副本。我只是将文件从本地主机上传到亚马逊。

它们都被索引。事实上，最近我在亚马逊上添加了额外的索引。

localhost 的索引是：

```
{LongitudeLatitude :"2d",indexContents :1,Prominent:-1} 
```

亚马逊的指数是：

```
{LongitudeLatitude :"2d",indexContents :1,Prominent:-1} 
```

我们还添加

```
{LongitudeLatitude :"2d",Prominent:-1} latter to no effect 
```

有谁知道我的 ubuntu 服务器亚马逊有什么问题？

本地主机上的 dbserver 是

```
db.runCommand("buildInfo")
{
        "version" : "2.0.7",
        "gitVersion" : "875033920e8869d
        "sysInfo" : "windows sys.getwin
 platform=2, service_pack='Service Pack
        "versionArray" : [
                2,
                0,
                7,
                0
        ],
        "bits" : 64,
        "debug" : false,
        "maxBsonObjectSize" : 16777216,
        "ok" : 1 
```

ubuntu amazon 上的 dbserever 是

```
 db.runCommand("buildInfo");
{
        "version" : "2.0.7",
        "gitVersion" : "875033920e8869d284f32119413543fa475227bf",
        "sysInfo" : "Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41",
        "versionArray" : [
                2,
                0,
                7,
                0
        ],
        "bits" : 64,
        "debug" : false,
        "maxBsonObjectSize" : 16777216,
        "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:34:04.640

这里的答案很可能是 RAM - 如果您希望这样的查询在 Amazon 中快速运行，那么他们正在处理的数据集（也称为工作集），即索引 + 数据，必须适合 RAM。每当您必须在 Amazon 实例上访问磁盘（页面错误）时，您将使用 EBS，这意味着您将使用网络。与本地磁盘相比，这不会很快，而且肯定会比访问 RAM 中的数据慢几个数量级。

如果 Amazon 实例有足够的 RAM 但仍然很慢，那么数据集可能还没有在内存中（它可能在您的本地机器上，因为您可能已经将它插入到该机器上并多次运行这些查询）。你有比较过第一次和第二次吗？

此外，根据您的实例，您可能没有足够的 CPU 资源。微型和小型实例的功能并不强大，而且您的查询有些复杂 - 我会查看 Amazon 上的 CPU 利用率，以确保您的实例大小足够。

最后，我要说很多人在 Amazon 中成功运行了 MongoDB，但您必须了解限制和建议，以充分利用 EC2 环境。这里有一个关于在亚马逊跑步的精彩演示：

[http://www.10gen.com/presentations/MongoNYC-2012/MongoDB-on-Amazon%20EC2](http://www.10gen.com/presentations/MongoNYC-2012/MongoDB-on-Amazon%20EC2)

还有 Amazon/EC2 注释页面：

[http://www.mongodb.org/display/DOCS/Amazon+EC2](http://www.mongodb.org/display/DOCS/Amazon+EC2)

# c# - 如何在asp：linkBut ton上的鼠标悬停事件上显示图像

> ID：12156064
> 
> 赞同：1
> 
> 时间：2012-08-28T09:09:33.887
> 
> 标签：c#, javascript, asp.net

我正在使用 asp.net 框架 3.5 和 c# 2.0。我能够将数据绑定到gridview。实际上我想在 asp:linkBut​​ton 上的鼠标悬停事件上显示图像，它在网格视图中使用

```
<asp:GridView ID="gvTemplate" runat="server" AllowPaging="True" AutoGenerateColumns="False"
    CellPadding="4" ForeColor="#333333" GridLines="None" ShowFooter="True" Width="100%"
    OnRowCommand="gvTemplate_RowCommand" OnRowDataBound="RowDataBound" OnPageIndexChanging="gvTemplate_PageIndexChanging">
                                                <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <Columns>
        <asp:TemplateField HeaderStyle-HorizontalAlign="Left" HeaderText="Sr. No">
            <ItemTemplate>
                <%# Container.DataItemIndex + 1 %>
            </ItemTemplate>
            <HeaderStyle HorizontalAlign="Left" />
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Template Name" ItemStyle-HorizontalAlign="Left">
            <ItemTemplate>
                <asp:LinkButton ID="lBtTempID" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"tempName") %>'
                    CommandName='<%# DataBinder.Eval(Container.DataItem,"tempID") %>' CommandArgument="tempID" onmouseover="javascript:showImage(this.id)"/>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderStyle-HorizontalAlign="Left" HeaderText="Template Type">
            <ItemTemplate>
                <asp:Label ID="lbltempType" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"tempType") %>' />
            </ItemTemplate>
            <HeaderStyle HorizontalAlign="Left" />
        </asp:TemplateField>
    </Columns>
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:37:29.000

如果您可以使用jquery，它将是这样的

```
 $('.lBtTempClass').mouseover(function() {
///  Do your code
    }); 
```

你应该添加一个 CSS 类来链接按钮

```
<asp:LinkButton ID="lBtTempID" CssClass="lBtTempClass" runat="server" > 
```

# jsf-2 - 在rich:popupPanel 和t:dataList 下，参数未传递给h:commandLink 的支持bean

> ID：12156068
> 
> 赞同：1
> 
> 时间：2012-08-28T09:09:41.967
> 
> 标签：jsf-2, richfaces, commandlink

我有rich：popupPanel，它在t：dataTable 的一列下包含t：dataList。这个 dataList 有 h:commandLink 里面有 f:param 。它在richfaces 3.3 上运行良好，但在迁移到richfaces 4 后，它停止工作。提到我在那里使用rich:modalPanel 代替rich:popupPanel 的事实。我浏览了很多链接：

[https://community.jboss.org/thread/202583](https://community.jboss.org/thread/202583)

[未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)

但没有帮助:(。我错过了什么吗？目前，bean 是会话范围的，我正在使用 getter 来获取数据模型，因为我无法将它放入构造函数中。

如果有人对此有想法，请告诉我。

PS：渲染的 HTML 等效项如下所示。它具有请求参数 varPath，但在支持 bean 中我们将其设为 null。

```
<a onclick="return myfaces.oam.submitForm('actionForm','actionForm:j_id0',null,    [['varPath','/Link']]);" href="#" tabindex="-1" accesskey="">/Link</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:54:26.300

> *发现将表单的 encType 从“multipart/form-data”更改为“application/x-www-form-urlencoded”可以解决此问题。不过很奇怪！不知道为什么它不适用于多部分加密。*

首先，它不是加密，而是编码。差异是相当大的。“加密”是一种以这种方式更改值的方式，这种方式在没有安全密钥（密码密钥、种子等）的情况下是不可预测的。“编码”是一种以数据传输机制可以接受和/或另一方可识别/可解析而不会丢失任何数据的方式更改值的方式。这些值并没有变得不可读或其他什么，它们只是被安排得有些具体和不同。

回到您的具体问题，`multipart/formdata`编码通常仅在您需要能够与表单一起发送（上传）文件时使用，例如使用`<input type="file">`RichFaces`<rich:fileUpload>`组件。标准的`application/x-www-form-urlencoded`表单编码，它基本上规定了请求参数应该以这种格式发送 URL-encoded

```
Content-Type: application/x-www-form-urlencoded;charset=UTF-8

name1=value1&name2=value2&name3=value3 
```

不适合传递文件内容。为此，`multipart/form-data`应该使用基本上如下所示的编码：

```
Content-Type: multipart/form-data;boundary=SOME_BOUNDARY

--SOME_BOUNDARY
content-disposition: form-data;name="name1"
content-type: text/plain;charset=UTF-8

value1
--SOME_BOUNDARY
content-disposition: form-data;name="name2"
content-type: text/plain;charset=UTF-8

value2
--SOME_BOUNDARY
content-disposition: form-data;name="name3"
content-type: text/plain;charset=UTF-8

value3
--SOME_BOUNDARY-- 
```

这种格式允许在请求正文中包含完整的文件内容。

在 JSF 2.0/2.1 Web 应用程序中，`multipart/form-data`请求通常由自定义的`Filter`. 对于 RichFaces 3，这通常由`org.ajax4jsf.Filter`RichFaces 4 中缺少的 处理。

Note that the `application/x-www-form-urlencoded` is already the **default** encoding type of HTML forms. So you don't need to explicitly specify it yourself. Just omit the `enctype` attribute altogether:

```
<h:form>

</h:form> 
```

and you should be all set.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:26:18.800

发现将表单的 encType 从“multipart/form-data”更改为“application/x-www-form-urlencoded”可以解决此问题。不过很奇怪！不知道为什么它不适用于多部分加密。

如果有人知道这一点，仍然想知道这背后的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:27:43.257

Using a4j:commandLink instead of h:commandLink pass parameters correctly which resolved this issue. No need for custom filters just for parameters.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:16:18.983

CommandButton 应放置在表单标记中。听起来你有嵌套形式或者你没有形式。

# knockout.js - knockout.js id 处理错误？

> ID：12156070
> 
> 赞同：0
> 
> 时间：2012-08-28T09:09:53.253
> 
> 标签：knockout.js

我想知道你们中是否有人遇到过以下问题，并且可能知道解决方法。

如果我在 ko 模板中有一个 'foreach' 迭代并尝试使用 'with' 上下文修饰符，如果 'with' 尝试绑定到，ko 将无法处理迭代的第一项（是的，只有第一项）一个名为“id”的属性。

示例：http: [//jsfiddle.net/rG5Xw/8/](http://jsfiddle.net/rG5Xw/8/)

如果您运行它，它不会显示第一项，但如果您将内部虚拟元素的“with”语句更改为“name”，那么它将按预期工作。好烦人...:S

有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:26:00.567

`with`旨在与对象一起使用。所以它对真实性进行了简单的检查，认为零是错误的。您可以通过将数字转换为字符串来解决此问题：http: [//jsfiddle.net/rG5Xw/11/](http://jsfiddle.net/rG5Xw/11/)

编辑：这是`with`基于我的替代品[`withlight`](https://github.com/mbest/knockout/issues/9#issuecomment-3378765)，它不检查值（例如：http: [//jsfiddle.net/mbest/rG5Xw/12/](http://jsfiddle.net/mbest/rG5Xw/12/)）：

```
ko.bindingHandlers['mywith'] = {
    'init': function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var bindingValue = ko.utils.unwrapObservable(valueAccessor());
        var innerContext = bindingContext['createChildContext'](bindingValue);
        ko.applyBindingsToDescendants(innerContext, element);
        return { 'controlsDescendantBindings': true };
    }
};
ko.virtualElements.allowedBindings.mywith = true; 
```

# javascript - 将时间添加到日期值

> ID：12156074
> 
> 赞同：1
> 
> 时间：2012-08-28T09:10:03.500
> 
> 标签：javascript, jquery, jquery-mobile, mobiscroll

我正在使用一个`jQuery`名为的插件`mobiscroll`来选择一个日期，但问题是我还需要在结果中加上 15 分钟。

我有一个函数`p(j)`，它返回`08/28/2012 12:15 - 12:15`（或仅`08/28/2012 12:15`- 作为方便），但我需要`12:15 - 12:30`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:07:58.590

根据 mobiscroll[文档](http://docs.mobiscroll.com/datetime-preset)setDate 与 Date 对象一起使用。

请参阅[此链接](http://www.w3schools.com/js/js_obj_date.asp)以了解如何在 javascript 中使用日期对象。您不需要进行任何字符串操作。

在你有正确的日期后使用`.scroller('setDate',newDate,true);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:22:34.260

字符串操作呢？

```
var dateStr = p(j), //08/28/2012 12:15 - 12:15
    timeStrSlice = dateStr.split(' ')[1].split(':'),
    h = parseFloat(timeStrSlice[0]),
    m = parseFloat(timeStrSlice[1]);

var nh = h,
    nm = m + 15;

if(nm > 60) {
   nh++;
   nm = 0;
}
if(nh > 24) {
   nh = 0;
}

var result = h + ":" + m + " " + nh + ":" + nm; // 12:15 12:30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:23:09.337

日期 d = 新日期（2012,08,28）；d.setHours(12, 30, 0, 0);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:25:43.050

看看这是否适合你：

```
var now = new Date();
//add 15 minutes to now
var out = new Date(now).setMinutes(now.getMinutes()+15) 
```

# asp.net - 当我的asp.net页面要加载时如何设置jquery

> ID：12156076
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:10:09.867
> 
> 标签：asp.net

我想在我的页面加载时，使用 jquery（进度条）加载，完成后，用户可以看到页面

Asp.Net 与 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:19:17.593

在这种情况下，您必须通过 jquery ajax 加载所有内容。在加载数据时，您可以在页面上显示加载 div，并在加载完成后将其隐藏。

示例 jquery-ajax 函数供您参考。

```
$.ajax({
    type: "POST",
    url: url,
    data: data,
    contentType: "application/json; Characterset=utf-8",
    dataType: "json",
    success: function (data) {
        // hide loading div
    },
    error: function (request, status, error) {
        alert("Exception Handling :  \n" + request.responseText);                        
    },
    complete: function () {
       //
    }
}); 
```

# wcf - wcf 中的模拟

> ID：12156079
> 
> 赞同：0
> 
> 时间：2012-08-28T09:10:26.680
> 
> 标签：wcf, security, windows-authentication, impersonation

目前，我正在使用 Asp.net MVC 应用程序使用的 WCF 服务。

出于安全原因，我使用代表用户名和密码的 guid。（当用户登录时，WCF 检查活动目录中的凭据并在数据库表中创建一条记录，将 guid 与用户名和密码连接起来）当用户使用另一个服务时，我将这个 guid 发送到标题中。我想使用这个 guid 在 wcf 中模拟用户。我已经尝试了以下方法（使用authorizationManager），但这不起作用。

```
 public class MyAuthBehaviour :ServiceAuthorizationManager
    {
        public override bool CheckAccess(OperationContext operationContext, ref Message message)
        {

            var index = operationContext.IncomingMessageHeaders.FindHeader("identifier", "");

            if (index >= 0)
            {
                string identifier = operationContext.IncomingMessageHeaders.GetHeader<string>(index);
                AddWindowsID(identifier);
            }           
            return true;
        }

        private void AddWindowsID(string identifier)
        {
            WindowsIdentity wid = AccountBL.GetWindowsIdentity(identifier);
            wid.Impersonate();
        }      
    } 
```

我确实获得了 WindowsIdentity，但我无法模拟。有没有办法做到这一点？

简而言之：我想在 WCF 使用标头中的 guid 进入实际服务方法之前在 WCF 中模拟用户。

当 wid.Impersonate() 命中时，客户端抛出此异常：

> 由于内部错误，服务器无法处理请求。有关该错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或者根据 Microsoft .NET Framework SDK 文档打开跟踪和检查服务器跟踪日志。

WCF 继续运行。（尽管 WCF 服务中存在其他例外情况）

执行 wid.Impersonate() 时不会抛出异常，它发生在我们离开 MyAuthBehaviour 类时

# json - 如何在 Apache Tomee plus 中使用 JAX-RS 为 JSON 设置读写提供程序

> ID：12156084
> 
> 赞同：1
> 
> 时间：2012-08-28T09:10:38.763
> 
> 标签：json, tomcat, jax-rs

我可以从我的 Pojo 返回简单文本，但是当我更改为返回 JSON 时它失败了。我在我的方法中有正确的生产和消费注释，我检查了 Jquery 和服务器之间的内容协商是否正确。

似乎是转换为 JSON 失败了。我在 webapps/tomee/lib 中复制了 Jackson 罐子。我还尝试了我的应用程序的 lib 文件夹。

执行 GET 时的错误消息：

```
No message body writer has been found for response class <myClass> 
```

此错误由 JAXRSOut 拦截器类触发

发帖时的错误是：

```
No message body reader has been found for request class <myClass> 
```

此错误由 JAXRSUtils 类触发

*   谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:00:36.663

我通过在 TomEE 的 conf/system.properties 文件中列出 JAX-RS 提供程序来完成这项工作。然后我将罐子添加到 TomEE 的 lib 文件夹中。网站上的文档指出应该将 jar 放在 webapp/tomee/lib 上，但这对我不起作用。

**conf/system.properties**

```
openejb.cxf.jax-rs.providers = org.codehaus.jackson.jaxrs.JacksonJsonProvider, org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider 
```

我丢弃的罐子：

*   杰克逊-映射器-asl-1.9.9.jar
*   杰克逊核心asl-1.9.9.jar
*   杰克逊-jaxrs-1.9.9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:31:31.800

如果您使用球衣，您可以尝试 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。最新版本 0.92 提供自动检测带有 jersey 的 jax-rs Web 服务中的 json 支持。你应该只需要放下罐子，瞧！:)

# iphone - 将所有使用声音录制为一首曲目 (iOS)

> ID：12156086
> 
> 赞同：0
> 
> 时间：2012-08-28T09:10:56.587
> 
> 标签：iphone, ios, audio

我使用 Cocos2d。这个 CocosDention 没有我需要的属性。也许有人知道在ios当前阶段使用什么方式记录和保存所有声音。DJ 应用程序怎么样 - 他们将音乐从不同的片段中保存下来并将它们放在一起。

比如在游戏中播放背景音乐。当玩家跳跃时，cocosdenchion 会播放跳跃的声音。我可以实时创建结合背景音乐和其他音乐效果的新曲目并保存吗？

我如何理解 AVAudioRecorder 仅用于录制麦克风设备。我可以为此使用什么——AudioToolbox？开放式？核心音频？其他框架？

在我想使用 FMOD 之前，但是有 500 美元的许可证，我不确定我的项目会给我一些比赛资金。在此我找到免费的方法或框架。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:43:24.467

I found some solution. I use [BASS iOS library](http://www.un4seen.com). one minus – it's paid. And second minus – it's written on C++. And not some example for iOS. But have good help on the forum.

```
 //BASS initialisation. use BASS_free for free resources
    BASS_Init(-1,44100,0,NULL,NULL);

    //create mixer
    BASS_GetInfo(&info); // get output device info. needet to get freq
    mixer=BASS_Mixer_StreamCreate(info.freq, 2, 0); // create a stereo mixer with the same sample rate
NSString *shortSound = [[NSBundle mainBundle] pathForResource:@"piano2" ofType:@"wav"];
    //create channel
    chan2 = BASS_StreamCreateFile(FALSE, [shortSound cStringUsingEncoding:NSUTF8StringEncoding], 0, 0, BASS_STREAM_DECODE);

    //create channel from file use absolute path url
    NSString *soundFileName = [[NSBundle mainBundle] pathForResource:@"ff13" ofType:@"mp3"];
    chan = BASS_StreamCreateFile(FALSE, [soundFileName cStringUsingEncoding:NSUTF8StringEncoding], 0, 0, BASS_STREAM_DECODE|BASS_SAMPLE_FLOAT|BASS_SAMPLE_LOOP);

    //add channel into mixer
    BASS_Mixer_StreamAddChannel(mixer, chan, 0);

    //point the dirrectory and file name for our new file saved mixer data
    NSString *documentDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filename = [documentDir stringByAppendingString:@"/file.mp3"];

    //start encode mixer to file when view did load. With parameters for encode.
    BASS_Encode_StartCAFile(mixer, 'm4af', 'alac', 0, 0, [filename cStringUsingEncoding:NSUTF8StringEncoding]);

    //mixer add any delay for play added channel. Fix it using this option
    BASS_ChannelSetAttribute(mixer, BASS_ATTRIB_NOBUFFER, 1);

    BASS_ChannelPlay(mixer, 0); // start mixer 
```

Here used mixer for record all sounds and microphone voice.

# html - html 元素超出表格列

> ID：12156090
> 
> 赞同：0
> 
> 时间：2012-08-28T09:11:08.410
> 
> 标签：html, css

我有一个 2 行 3 列的 html 表。

我将另一个表放在第一个表的第 2 行的第 2 列内，但第二个表超出了第一个表的边界。我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:24:35.983

分享您的代码或检查您的序列

```
<table>
<tr>
  <td>1st row and 1st column</td>
  <td>1st row and 2nd column</td>
  <td>1st row and 3rd column</td>
</tr>
<tr>
  <td>2nd row and 1st column</td>
  <td>                   <!-- you want insert Table here -->  
    <table>
    <tr><td>nested table</td></tr>
    <tr><td>nested table</td></tr>
    </table>
  </td>
  <td>2nd row and 3rd column</td>
 </tr>
</table> 
```

更多信息请访问[这里](http://www.pageresource.com/html/table3.htm)

# c# - 有没有更好的方法让我在 C# 中为事件计时？

> ID：12156093
> 
> 赞同：0
> 
> 时间：2012-08-28T09:11:22.480
> 
> 标签：c#

我声明了以下变量：

```
 private Stopwatch stopwatch;
    private long t1, t2, t3, t4, t5; 
```

我正在使用这样的秒表：

```
 try {
            stopwatch = Stopwatch.StartNew();
            get1();
            t1 = stopwatch.ElapsedMilliseconds;
            anotherGet();
            t2 = stopwatch.ElapsedMilliseconds;
            vm.Detail = anotherAnotherGet();
            t3 = stopwatch.ElapsedMilliseconds;
        } catch (Exception e) {
            log(e);
        } finally {
            Stopwatch.Stop();
            if (vm.Detail.Count() > 0) {
                return PartialView("Details", vm);
            } else {
                return Content("No records found");
            }
        } 
```

有没有更好的方法可以存储我的时间而不是名为 1-5 的多头。问题是在某些代码区域我可能只需要 t1 而在其他区域我可能需要超过 5 个时间点。

我正在使用 finally 停止。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:14:36.877

您可以使用字典，以便可以将值存储在名称/键下。

请注意，将值添加到集合可能会花费一些时间，这可能会影响您的测量。

所以你可能想要这样做：

```
stopwatch = Stopwatch.StartNew(); 
get1(); 
stopwatch.Stop();
timings.Add("t1", stopwatch.ElapsedMilliseconds); 
stopwatch.Start(); 
```

终于可以了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:13:43.320

只需使用 a`List<long>`即可根据需要多次存储：

```
var times = new List<long>();
stopwatch = Stopwatch.StartNew();
get1();
times.Add(stopwatch.ElapsedMilliseconds);
anotherGet();
times.Add(stopwatch.ElapsedMilliseconds);
vm.Detail = anotherAnotherGet();
times.Add(stopwatch.ElapsedMilliseconds); 
```

把你的清理逻辑放在里面`finally`并没有真正做任何事情，因为在那之前你无条件地捕捉和吞下所有类型的异常，**这是非常非常糟糕的**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:14:56.150

您可以将它们存储在`List<long>`

```
List<long> times = new List<long>(); 
```

他们只是

```
times.Add(stopwatch.ElapsedMilliseconds); 
```

# android - 我无法设置 imageLevel

> ID：12156096
> 
> 赞同：0
> 
> 时间：2012-08-28T09:11:31.350
> 
> 标签：android, imageview

我有带有布局的 ICS 应用程序，它使用带有可绘制列表的 ImageView。我尝试将 imageLevel 设置为它，但 pic 没有改变。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:maxLevel="0"
    android:drawable="@drawable/main_activity_idle" />

<item
    android:maxLevel="1"
    android:drawable="@drawable/main_activity_upload" />

<item
    android:maxLevel="2"
    android:drawable="@drawable/main_activity_download" />
</layer-list>

 <ImageView
    android:id="@+id/main_panel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="6dp"
    android:layout_below="@+id/main_panel_logo"
    android:layout_alignParentRight="true"
    android:src="@drawable/main__dr_list" />

statusIndicator = (ImageView) findViewById(R.id.main_panel_activity);
    statusIndicator.setImageLevel(0); 
```

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:20:33.623

您应该使用`level-list`而不是`layer-list`.

# download - Google Drive API 下载文件，http 响应代码 200 但 responseBody 为空

> ID：12156098
> 
> 赞同：1
> 
> 时间：2012-08-28T09:11:40.687
> 
> 标签：download, google-drive-api, google-api-client

对不起，如果这是一个愚蠢的问题，但我是新来的，我不知道该怎么做。

我已经在我们的服务器中用 php 实现了对 Google Drive 的支持，它为我们在 Android 和 IO 中的应用程序提供支持，我们可以将文件上传到 Google Drive 或毫无问题地删除它们，当我们下载文件时，它看起来像httpResponseCode 是正确的 200 和 responseHeader 也是正确的，但 responseBody 是空的。

我将 Google Drive Server 的响应放在这里，以防有人知道。谢谢

```
 apiHttpRequest Object
   (
        [batchHeaders:apiHttpRequest:private] => Array
            (
                [Content-Type] => application/http
                [Content-Transfer-Encoding] => binary
                [MIME-Version] => 1.0
                [Content-Length] => 
            )

        [url:protected] => https://doc-0s-6s-docs.googleusercontent.com/docs/securesc/3h10lch354ufu4pkrusuk27smk7k4ifq/qp3b555lfchhfmpfodjv4mcpbug1vol6/1346112000000/12488086635796486161/12488086635796486161/0B_cf3F02DuErM3V3b0o4WnYyNTA?h=16653014193614665626&e=download&gd=true
        [requestMethod:protected] => GET
        [requestHeaders:protected] => Array
            (
                [authorization] => Bearer ya29.AHES6ZQwIuu8ZhP8Uk389Sgo5NELnvArjzAC362ByzEsh2qa_gjDvJw
            )

        [postBody:protected] => 
        [userAgent:protected] => google-api-php-client/0.5.0
        [responseHttpCode:protected] => 200
        [responseHeaders:protected] => Array
            (
                [server] => HTTP Upload Server Built on Aug 15 2012 18:03:01 (1345078981)
                [access-control-allow-origin] => *
                [access-control-allow-credentials] => false
                [access-control-allow-headers] => authorization
                [access-control-allow-methods] => GET,OPTIONS
                [content-type] => video/quicktime
                [content-disposition] =>  attachment;filename="VID_20120827_105737.mp4";filename*=UTF-8''VID_20120827_105737.mp4
                [content-length] => 2768422
                [date] => Tue, 28 Aug 2012 00:15:26 GMT
                [expires] => Tue, 28 Aug 2012 00:15:26 GMT
                [cache-control] => private, max-age=0
            )

        [responseBody:protected] => 
```

现在我正在使用的代码：

```
 public function GetFile($fileId) {
     $fileVars = null;
     try {
       /*
        * Retrieve metadata for the file specified by $fileId.
        */
       $file = $this->service->files->get($fileId);
       $fileVars = get_object_vars($file);

       /*
        * Retrieve the file's content using download URL specified in metadata.
        */
       $downloadUrl = $file->getDownloadUrl();
       error_log('Download URL file from Drive: ' . $downloadUrl);
       if ($downloadUrl) {
         $request = new apiHttpRequest($downloadUrl, 'GET', null, null);
         $httpRequest = apiClient::$io->authenticatedRequest($request);
         error_log(print_r($httpRequest, 1));

         if ($httpRequest->getResponseHttpCode() == 200) {
           $content = $httpRequest->getResponseBody();
           $fileVars['content'] = $content?($content):'';
         } else {
           // An error occurred.
           return null;
         }
       } else {
         // The file doesn't have any content stored on Drive.
         return null;
       }

     } catch (apiServiceException $e) {
       /*
        * Log error and re-throw
        */
       error_log('Error retrieving file from Drive: ' . $e->getMessage());
       throw $e;
     }
     return json_encode($fileVars);
    } 
```

# iphone - iOS应用程序拍照并发送到具有唯一ID的指定电子邮件地址

> ID：12156102
> 
> 赞同：0
> 
> 时间：2012-08-28T09:12:15.307
> 
> 标签：iphone, ios

我对 iOS 应用程序开发相当陌生，但我正在代表一个想要创建本机或混合 iOS 应用程序的客户进行一些研究，该应用程序允许用户使用他们的 iPhone 相机拍照并继续自动发送该照片（经确认由用户），带有附加到电子邮件的唯一标识符，发送到预定的电子邮件地址。这是相当简单的吗？发送此类数据时是否需要解决任何隐私问题？

此外，如何识别该用户，以便将相关响应发送回给他们？基本上，所发生的事情是收到产品的照片，并且该产品是从一系列合作商家手动采购的。然后，将价格和商家详细信息发送回用户。这在 iOS 上如何工作？

非常感谢，对不起，如果这听起来太模糊，但请询问更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:21:34.627

您可以使用 PHP 作为后端来上传服务器中的图像并为用户上传的每张图片生成唯一代码。

所以这个过程就像 iPhone -->upload.php -->从 php 获取响应链接并将该链接发送到指定的邮件

# grails - 防止登录时重复提交表单

> ID：12156104
> 
> 赞同：0
> 
> 时间：2012-08-28T09:12:21.847
> 
> 标签：grails, spring-security

根据这篇文章，我有一个导致[OOME/Stackoverflow](https://stackoverflow.com/questions/12064622/grails-heap-space-overflowing-intermittently)的问题，现在几乎可以肯定，这似乎是由于登录时提交的重复表单引起的。这一切都是使用 Spring Security 插件完成的。有没有办法防止这种情况？

我想过使用 useToken/withForm 但看不到 Spring Security 如何发布到 j_spring_security_check 所以我无法控制它。

我正在使用自定义 UserDetailsS​​ervice 并且可以查看如何检查是否有当前会话正在登录，例如通过 RequestContextHolder.requestAttributes.sessionMutex.session.attributes.xyz 但不确定这似乎是正确的方式。

使用 Grails 2.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:47:54.740

“Grails 内置了对使用“同步器令牌模式”处理重复表单提交的支持。要开始，您可以在表单标签上定义一个令牌”

您可以阅读以下内容：http: [//grails.org/doc/latest/guide/single.html#formtokens](http://grails.org/doc/latest/guide/single.html#formtokens)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:57:49.223

跟踪核心问题是在自定义 UserDetailsS​​ervice 中调用 User.save()（例如更新上次登录时间），Hibernate 会话在每个用户的后续调用中关闭。

将 User.save() 移动到 AuthenticationEventListener.onApplicationEvent(AuthenticationSuccessEvent event) 并且工作正常。仍然会很高兴知道如何处理重复的帖子到 j_spring_security_check

# java - JTextArea 和行（字）换行

> ID：12156111
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:12:41.223
> 
> 标签：java, swing, jpanel, jtextarea, word-wrap

我有一个带有盒子布局的 JPanel(a)，所有组件都垂直堆叠在上面。其中，我有一个带有水平框布局的 JPanel(b)。在该 JPanel(b) 中，我添加了刚性区域 JPanel 和 JTextArea。

我想要的是每次 JTextArea 由于自动换行而扩展时，JPanel(b) 都会增加其高度。但是，由于我的 JPanel 在开始时具有单行的高度。JTextArea 不会扩展，因为所有空间都已填满。

有没有办法解决这个问题，另一种选择？

它不一定是 JPanel 和 JTextArea，只要是可以包含组件和支持多行的 JTextComponent 的东西。

```
class Question extends JPanel
{
public JPanel questionArea;
public JTextArea number, question;

public Question(Page page)
{
    setSize(new Dimension(556, 100));
    setBackground(Color.PINK);
    setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));

    Border in = BorderFactory.createDashedBorder(Color.BLACK);
    Border out = BorderFactory.createMatteBorder(0, 0, 10, 0, Color.WHITE);
    setBorder(BorderFactory.createCompoundBorder(out, in));

    questionArea = new JPanel();
    questionArea.setPreferredSize(new Dimension(556, 32));
    questionArea.setBackground(Color.YELLOW);
    questionArea.setLayout(new BoxLayout(questionArea, BoxLayout.LINE_AXIS));

    out = BorderFactory.createMatteBorder(0, 0, 8, 0, Color.WHITE);
    setBorder(BorderFactory.createCompoundBorder(out, in));

    number = new JTextArea();
    number.setPreferredSize(new Dimension(25, 32));
    number.setBackground(Color.GREEN);
    number.setFont(new Font("Arial", Font.BOLD, 15));
    number.setText("10.");
    number.setEditable(false);

    question = new JTextArea();
    question.setPreferredSize(new Dimension(494, 32));
    question.setBackground(Color.PINK);
    question.setFont(new Font("Arial", Font.BOLD, 15));
    question.setText("What is the first question?");

    questionArea.add(Box.createRigidArea(new Dimension(35, 32)));
    questionArea.add(number);
    questionArea.add(question);

    add(questionArea);

    page.editArea.add(this, page.content);
}
} 
```

休息

```
class Page extends JPanel
{
public JPanel editArea;
public Box.Filler blank;

public Page(JPanel panel)
{
    setLayout(null);
    setBounds(92, panel.getPreferredSize().height+40, 794, 1123);

    setBackground(Color.WHITE);

    editArea = new JPanel();
    editArea.setLayout(new BoxLayout(editArea, BoxLayout.PAGE_AXIS));
    editArea.setBounds(119, 96, 556, 931);
    editArea.setBackground(Color.LIGHT_GRAY);

    blank = new Box.Filler(new Dimension(556, -1), new Dimension(556, 931), new Dimension(556, 931));
    editArea.add(blank);

    add(editArea);

}
} 
```

页面类本身位于具有空布局的 JPanel 上，不需要代码，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:48:42.333

我认为水平`BoxLayout`是在做你。

它将以其首选大小显示组件（`getPreferredSize()`在实例化时使用），我认为它不会轻易为您调整大小。您可能希望将 Panel(b) 更改为 a `BorderLayout`，并将组件添加到`EAST`、`WEST`和`JTextArea`in `CENTER`。

# java - 无法将 JLabel 与 JCheckBox 垂直对齐，就好像单个 JCheckBox 与 GroupLayout

> ID：12156113
> 
> 赞同：0
> 
> 时间：2012-08-28T09:12:50.383
> 
> 标签：java, swing, jlabel, jcheckbox, grouplayout

有时我需要复选框的标签位于复选框的左侧而不是右侧，而不是使用

```
JCheckBox checkbox = new JCheckBox("label",false); 
```

我愿意：

```
JCheckBox checkbox = new JCheckBox("",false);
JLabel    label    = new JLabel("label");
GroupLayout.ParallelGroup vp1 = layout.createBaselineGroup(false, false);
vp1.addComponent(checkbox);
vp1.addComponent(label); 
```

（我正在使用 GroupLayout）但它们没有正确垂直对齐，我也尝试过

```
 =layout.createParallelGroup(GroupLayout.Alignment.CENTER); 
```

这看起来不错，但与使用单个复选框和各种其他选项似乎仍然不同，是否有可能获得相同的对齐方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:23:20.393

您可以使用`setHorizontalTextPosition(int textPosition)`具有 int 值`SwingConstants.RIGHT`等的函数

# jquery - 如何在 mvc 中使用 JSON 对象？

> ID：12156115
> 
> 赞同：0
> 
> 时间：2012-08-28T09:12:56.583
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4

我目前正在使用 asp.net mvc 4。我编写了一个返回 JSON 对象的函数。

这是功能（在我的控制器中）

```
[HttpPost]
        public ActionResult Login(string email, string password)
        {
            ViewData["Message"] = "None";
            JSONLoginModel model = new JSONLoginModel();

            Account account = _accountRepository.CheckLogin2(email, password);

            if (account != null)
            {
                model.Email = email;
                model.Password = password;
                model.ChangePassword = account.ChangePasswordOnLogin;
            }

            return Json(model);
        } 
```

这是 JSONLoginModel

```
[Serializable]
    public class JSONLoginModel
    {
        public string Email { get; set; }
        public string Password { get; set; }
        public bool ChangePassword { get; set; }
    } 
```

我还编写了以下 JQuery 代码来捕获和使用它

```
$.post("Home/Login", { email: email, password: password }, function (data) {
                alert(data);
                $.each(data, function (index, IntraNoviUser) {
                    if (IntraNoviUser !== undefined && IntraNoviUser !== null) {
                        alert('test1');
                        alert(IntraNoviUser.password, IntraNoviUser.email);
                        alert('test2');
                    }
                });
            }); 
```

一切都很好，直到我尝试使用返回的结果。

我从控制器返回的是一个可以有 3 个选项的对象：

1.  空值
2.  邮箱+密码填写`changePassword`为假
3.  与 2 相同，但`changePassword = true`

问题是我返回的 JSON 对象永远无法识别。对此有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:18:28.607

尝试将数据类型设置为 json，如下所示

```
$.post("Home/Login", { email: email, password: password }, function (data) {
            alert(data);
            $.each(data, function (index, IntraNoviUser) {
                if (IntraNoviUser !== undefined && IntraNoviUser !== null) {
                    alert('test1');
                    alert(IntraNoviUser.password, IntraNoviUser.email);
                    alert('test2');
                }
            });
        },"json"); 
```

注意最后一个参数。但是，如果返回的数据不是数组（或 jquery 选择或类似），则上述将迭代每个属性。参数 IntraNoviUser 将保存属性值和索引属性的名称。由于命名似乎有点奇怪，我怀疑您不想迭代返回对象的属性。

如果您返回一个对象并且不想迭代属性，请执行此操作

```
$.post("Home/Login", { email: email, password: password }, function (IntraNoviUser) {
                if (IntraNoviUser !== undefined && IntraNoviUser !== null) {
                    alert('test1');
                    alert(IntraNoviUser.password, IntraNoviUser.email);
                    alert('test2');
                }
            });
        },"json"); 
```

旁白：JavaScript 中的大写字母按惯例保留给 Initializer 函数（需要以 new 为前缀才能正常工作的函数）

**编辑**因为 JavaScript 区分大小写，您需要在 JS 文件中使用与 C# 文件中相同的大小写。那是电子邮件不是电子邮件，密码不是密码等等。不幸的是，您将不得不打破这两种环境中的任何一种的命名约定。我个人更喜欢打破 C# 命名约定，因为在这种情况下，您可以使用匿名类型

```
var model =
        {
            email,
            password,
            changePassword = account != null
                                      ? account.ChangePasswordOnLogin 
                                      : false;
        };

return Json(model); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:22:40.297

我认为 asp.net 将 json 数据返回为 d。所以你最好提醒（data.d）并检查它。

```
$.post("Home/Login", { email: email, password: password }, function (data) {
                if(data!=null || data != undefined){
                   if(data.password==true){
                  //do something
                   }
                 else if(data.password==false){//do something

                   }
                }

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:18:48.377

由于您返回的是 JSON 对象，而不是数组，因此您的循环函数将为对象上的每个属性执行一次。如果要遍历对象中的数据，则签名应类似于：

```
$.each(data, function (key, value) { 
```

在循环内部，您应该通过检查`key`和`value`适当地使用来检查当前属性的名称。

但是，正如 Anthony 在评论中指出的那样，似乎根本不需要循环，因为您知道对象属性的名称，您可以通过名称访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:11:15.870

我设法通过使用以下代码解决了这个问题：

```
 $.post("Home/Login", { email: email, password: password }, function (IntraNoviUser) {
                    if (IntraNoviUser !== undefined && IntraNoviUser !== null) {
                        alert('test1');
                        alert(IntraNoviUser.Password + " " + IntraNoviUser.Email + " " + IntraNoviUser.ChangePassword);
                        alert('test2');
                        var t = IntraNoviUser;
                        alert(t.Password + " " + t.Email + " " + t.ChangePassword);
                    }

}); 
```

返回的 JSON 使用的是我的 IntraNoviLoginModel 中的字段，因此它需要大写字母才能工作。

我要感谢 Anthony Grist 和 Ashirvad Singh 为我指明了正确的方向。

# java - 自动解决jar依赖

> ID：12156122
> 
> 赞同：2
> 
> 时间：2012-08-28T09:13:42.487
> 
> 标签：java, jar

一个项目正在使用各种库。例如`a.jar`, `b.jar`, `c.jar`,`d.jar`等等
一些 jars 已经被重构，现在是`ab.jar`等等`cd.jar`。
我需要的是一种自动方法来查找我的安装中的哪些 jars 现在已经过时并且我可以删除它们。
这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:19:56.537

因此，使用[LooseJar](http://code.google.com/p/loosejar/)，您可以通过添加以下内容来检测未使用的 Jar 文件：

```
-javaagent:loosejar.jar 
```

当您从命令行调用时（或作为 Eclipse 中的 VM 选项）添加到您的 java 命令。我想这在技术上不是自动的，因为需要调用在运行时动态加载类的代码行，以便 LooseJar 知道需要该类以及需要 jar。一个好的方法可能是使用这个 java 代理调用你的单元测试（假设你的单元测试有很好的代码覆盖率）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:26:44.223

最好的方法是使用maven。如果在 maven 中定义了依赖项，您可以运行`mvn dependency:tree`以检索所需的信息。详情请参阅这篇[文章](http://maven.apache.org/plugins/maven-dependency-plugin/usage.html)。

如果您不使用 maven，则可能必须使用[jdepend 之](http://clarkware.com/software/JDepend.html)类的工具。但请注意：此类工具无法真正检索*所有*依赖项。仅使用静态分析无法检索对通过反射调用的动态加载的类或 API 的依赖关系。只有在您运行应用程序时才能实现完整的解决方案，使用所有可能的场景对其进行测试并检查类加载器加载了哪些类。如果您有 100% 的测试覆盖率，您可以使用选项运行您的应用程序`-verbose:class`，然后针对您的应用程序运行所有单元测试。您将获得所有已加载类的列表。现在将此列表放入文件并编写分析类列表并将其转换为 jars 列表的 shell 脚本。

# php - 从mysql中选择

> ID：12156127
> 
> 赞同：0
> 
> 时间：2012-08-28T09:13:58.237
> 
> 标签：php, mysql, sql

我有一个如下表：

```
uid nid     points  date                        reason
36  116     2       2012-08-28 11:52:12         session
31  110     2       2012-08-23 15:47:47         session
36  115     2       2012-08-27 11:52:48         session 
```

如您所见，uid 不是唯一的，它可以重复。我需要的是为日期（30 天前）之间的每个 id 选择点总和。**例如：uid36 的总和 = 4。** 我尝试过的内容：

```
$start_time = mktime(0, 0, 0, $today["mon"], ($today["mday"] - 30), $today["year"]);//30 days before
$end_time = time();
$query = db_query("SELECT uid,sum(points), date FROM users_history WHERE date BETWEEN '$start_time' AND '$end_time'"); 
```

但是如何为每个 id 选择

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:15:33.313

如果您使用聚合函数，您需要`GROUP BY uid`并且在您的查询中毫无意义。`date``SUM`

```
SELECT uid, SUM(points) 
FROM users_history 
WHERE date BETWEEN DATE_SUB(CURDATE(), INTERVAL 30 day) AND NOW() 
GROUP BY uid 
```

如果没有未来的日期，那么你只需要

```
WHERE date >= DATE_SUB(CURDATE(), INTERVAL 30 day) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:18:14.193

为此，您需要对您的 uid 进行分组。
SELECT uid,sum(points), date FROM users_history WHERE date BETWEEN '$start_time' AND '$end_time'" group by uid;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:30:05.497

```
SELECT uid, SUM(points) FROM users_history WHERE date BETWEEN DATE_SUB(NOW(), INTERVAL 1 MONTH) AND NOW() GROUP BY uid 
```

# php - 强制 CSV 分隔符

> ID：12156129
> 
> 赞同：0
> 
> 时间：2012-08-28T09:14:04.033
> 
> 标签：php, csv

（使用 PHP）

我需要检查客户上传的 CSV 文件。具体来说，我需要验证这个 CSV 是否只有“;”作为分隔符 不允许使用其他分隔符。

为您处理此问题的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:27:12.757

如果您知道第一行的值，则可以尝试通过读取第一行的第 N 个字符来识别分隔符，例如：

```
$csvdata = "delimiter;test\r\netc;herp"; // Contents of the uploaded file

$delimiter = substr($csvdata, strlen("delimiter "), 1);
echo $delimiter; 
```

我建议你使用 xlsx 文件类型。它比 CSV 更容易处理，并且在 Mac 和 DOS 行尾和编码方面没有问题。

# hibernate - Hibernate Spatial：“JDBC 类型没有方言映射：3000”

> ID：12156130
> 
> 赞同：3
> 
> 时间：2012-08-28T09:14:05.103
> 
> 标签：hibernate, maven, jdbc, dependencies, postgis

我正在尝试通过 Hibernate 将 Spring Roo 与启用 PostGIS 的 PostgreSQL 数据库集成，遵循[Hibernate Spatial tutorial](http://www.hibernatespatial.org/tutorial-hs4.html)。所有非 GIS 的东西都工作正常，我已经从 PostGIS 模板创建了一个数据库。

问题是，只要我将 Geometry 属性添加到我的一个实体：

```
@Type(type="org.hibernate.spatial.GeometryType")
private Point centerPoint; 
```

...它可以构建，但尝试在服务器上运行（并实际与数据库交互）会导致以下错误：

```
Caused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 3000
    at org.hibernate.dialect.TypeNames.get(TypeNames.java:77)
    at org.hibernate.dialect.TypeNames.get(TypeNames.java:100)
    at org.hibernate.dialect.Dialect.getTypeName(Dialect.java:298)
    at org.hibernate.mapping.Column.getSqlType(Column.java:208)
    at org.hibernate.mapping.Table.sqlCreateString(Table.java:418)
    at org.hibernate.cfg.Configuration.generateSchemaCreationScript(Configuration.java:1099)
    at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:106)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:372)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    ... 41 more 
```

[Hibernate Spatial 的依赖](http://www.hibernatespatial.org/hibernate-spatial-postgis/dependencies.html)项似乎表明 postgis-jdbc 1.5.3 是必需的，但 1.5.3 不存在于任何 Maven 存储库中，我无法从源代码编译它。我试过 1.5.2 和 1.3.3，都导致同样的 3000 错误。HS 说应该“提供” 1.5.3，但是将依赖项设置为 1.5.3`<scope>provided</scope>`也无济于事。

这仅仅是需要精确版本的 JDBC 的情况，还是有其他问题？

我的POM的相关摘录如下：

```
 <dependency>
            <groupId>com.vividsolutions</groupId>
            <artifactId>jts</artifactId>
            <version>1.12</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-spatial</artifactId>
            <version>4.0-M1</version>
        </dependency>
        <dependency>
            <groupId>org.postgis</groupId>
            <artifactId>postgis-jdbc</artifactId>
            <version>1.5.2</version>
        </dependency> 
```

从`persistence.xml`：

```
<property name="hibernate.dialect" value="org.hibernate.spatial.dialect.postgis.PostgisDialect"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:29:46.340

您的异常意味着 Postgresql 方言不支持您通过注释提供的数据类型。使用自定义类对其进行扩展以添加支持可能是解决问题的一种方法。

我看过 GIS 项目，你是否也提供带有编译范围的 javassist 依赖项？

您是否尝试使用以下注释引用您的数据类型？请参阅[https://stackoverflow.com/a/3047190/390462](https://stackoverflow.com/a/3047190/390462)。

```
@Column(name = "geometry", columnDefinition="Geometry", nullable = true) 
private Geometry geometry; 
```

据我所知，您需要为`columnDefinition`您的字段提供一个，否则它将无法将该字段映射到良好的 db 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T13:44:23.103

我找到了解决方案！

（Grails、Hibernate Spatial 4.3、Config.groovy）

```
hibernate {
    // ...
    dialect = 'org.hibernate.spatial.dialect.postgis.PostgisDialect'
} 
```

# c# - 使用计算列作为 ID 时的存储过程错误

> ID：12156132
> 
> 赞同：1
> 
> 时间：2012-08-28T09:14:08.883
> 
> 标签：c#, asp.net, sql-server

我得到了错误：

> 过程或函数 usp_User_Info3 指定的参数过多

当我运行程序时。我不知道 SP 或 C# 代码中的错误。我必须`Vendor_ID`在用户单击提交按钮后显示。这里哪里出了问题？

表结构：

```
 CREATE TABLE User_Info3 
         ( 
         SNo int Identity (2000,1) ,  
         Vendor_ID AS 'VEN' + CAST(SNo as varchar(16)) PERSISTED PRIMARY KEY, 
         UserName VARCHAR(16) NOT NULL, 
         User_Password VARCHAR(12) NOT NULL, 
         User_ConPassword VARCHAR(12) NOT NULL, 
         User_FirstName VARCHAR(25) NOT NULL, 
         User_LastName VARCHAR(25) SPARSE NULL, 
         User_Title VARCHAR(35) NOT NULL, 
         User_EMail VARCHAR(35) NOT NULL, 
         User_PhoneNo VARCHAR(14) NOT NULL, 
         User_MobileNo VARCHAR(14)NOT NULL, 
         User_FaxNo VARCHAR(14)NOT NULL, 
         UserReg_Date DATE DEFAULT GETDATE() 
         ) 
```

存储过程：

```
 ALTER PROCEDURE [dbo].[usp_User_Info3]
         @SNo INT OUTPUT,
         @Vendor_ID VARCHAR(10) OUTPUT, 
         @UserName VARCHAR(30),
         @User_Password VARCHAR(12),
         @User_ConPassword VARCHAR(12),
         @User_FirstName VARCHAR(25),
         @User_LastName VARCHAR(25),
         @User_Title VARCHAR(35),
         @User_OtherEmail VARCHAR(30),
         @User_PhoneNo VARCHAR(14),
         @User_MobileNo VARCHAR(14),
         @User_FaxNo VARCHAR(14)
         AS
         BEGIN
          SET NOCOUNT ON;
         INSERT INTO User_Info3 (UserName,User_Password,User_ConPassword,User_FirstName,     
         User_LastName,User_Title,User_OtherEmail,User_PhoneNo,User_MobileNo,User_FaxNo)
               VALUES  (@UserName,@User_Password,@User_ConPassword,@User_FirstName,@User_LastName,
               @User_Title,@User_OtherEmail,@User_PhoneNo,@User_MobileNo,@User_FaxNo)
        SET @SNo = Scope_Identity()
        SELECT Vendor_ID From User_Info3 WHERE SNo = @SNo
        END 
```

C#代码：

```
 protected void BtnUserNext_Click(object sender, EventArgs e)
         {
         cmd.CommandType = CommandType.StoredProcedure;
         cmd.CommandText = "usp_User_Info3";
         System.Data.SqlClient.SqlParameter SNo=cmd.Parameters.Add("@SNo",System.Data.SqlDbType.Int);
         System.Data.SqlClient.SqlParameter Vendor_ID=cmd.Parameters.Add("@Vendor_ID",  
                                                                   System.Data.SqlDbType.VarChar,10);
         cmd.Parameters.Add("@UserName", SqlDbType.VarChar).Value = txtUserName.Text;
         cmd.Parameters.Add("@User_Password", SqlDbType.VarChar).Value = txtRegPassword.Text;
         cmd.Parameters.Add("@User_ConPassword", SqlDbType.VarChar).Value = txtRegConPassword.Text;
         cmd.Parameters.Add("@User_FirstName", SqlDbType.VarChar).Value = txtRegFName.Text;
         cmd.Parameters.Add("@User_LastName", SqlDbType.VarChar).Value = txtRegLName.Text;
         cmd.Parameters.Add("@User_Title", SqlDbType.VarChar).Value = txtRegTitle.Text;
         cmd.Parameters.Add("@User_OtherEmail", SqlDbType.VarChar).Value = txtOtherEmail.Text;
         cmd.Parameters.Add("@User_PhoneNo", SqlDbType.VarChar).Value =txtRegTelephone.Text;
         cmd.Parameters.Add("@User_MobileNo", SqlDbType.VarChar).Value =txtRegMobile.Text;
         cmd.Parameters.Add("@User_FaxNo", SqlDbType.VarChar).Value =txtRegFax.Text;
         cmd.Connection = SqlCon;
         try
         {
          Vendor_ID.Direction = System.Data.ParameterDirection.Output;
          SqlCon.Open();
          cmd.ExecuteNonQuery();
          string VendorID = cmd.ExecuteScalar() as string; 
         }
         catch (Exception ex)
         {
           throw new Exception(ex.Message);
         }
         finally
         {
          string url = "../CompanyBasicInfo.aspx?Parameter=" + Server.UrlEncode(" + VendorID + ");
          SqlCon.Close();
         }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:19:22.143

*   您没有设置`@SNo`参数的方向
*   你调用了两次命令 -`ExecuteScalar`如果你想要返回值，只需调用它。
*   您没有`@Vendor_ID`在存储过程中设置输出参数的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:19:35.067

如果我不得不猜测，我会打赌它`cmd`正在被重复使用，并且其中包含来自先前调用的参数。一种选择是调用`cmd.Parameters.Clear()`，但坦率地说，我认为重用这个`SqlCommand`实例没什么意义——每次都使用一个新命令会更好：

```
using(var cmd = SqlCon.CreateCommand()) {
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "usp_User_Info3";
    // TODO: add parameters
    // TODO: call one of the Execute* methods
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:36:47.087

在所有这些伟大思想的回答之后，我不敢相信你仍然被困住。以下是我的建议

在你的 PROC

```
'maintain this in your parameter
@Vendor_ID VARCHAR(10) OUTPUT, 
```

更新为 Select `VendorID`into `@VendorID`。见第二行

```
 SET @SNo = Scope_Identity()
    SELECT @Vendor_ID=VendorID From User_Info3 WHERE SNo = @SNo 
```

在 C# 中，不要调用`ExecuteScalar`use`ExecuteNonQuery`

```
string newVendorID = "";
try
{
      Vendor_ID.Direction = System.Data.ParameterDirection.Output;
      SqlCon.Open();
      cmd.ExecuteNonQuery();
      if(Vendor_ID.Value != null)
          newVendorID = Vendor_ID.Value.ToString();
} 
```

您可以将`Vendor_ID`参数重命名为更有意义的名称，例如`VendorIDParam`. 希望这可以帮助？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:21:47.293

**表中不存在User_OtherEmail**列

**正确的存储过程**

```
Create PROCEDURE [dbo].[usp_User_Info3]
     @SNo INT OUTPUT,
     @Vendor_ID VARCHAR(10) OUTPUT, 
     @UserName VARCHAR(30),
     @User_Password VARCHAR(12),
     @User_ConPassword VARCHAR(12),
     @User_FirstName VARCHAR(25),
     @User_LastName VARCHAR(25),
     @User_Title VARCHAR(35),
      @User_Email VARCHAR(30),
     @User_PhoneNo VARCHAR(14),
     @User_MobileNo VARCHAR(14),
     @User_FaxNo VARCHAR(14)
     AS
     BEGIN
      SET NOCOUNT ON;
     INSERT INTO User_Info3 (UserName,User_Password,User_ConPassword,User_FirstName,     
     User_LastName,User_Title,User_Email,User_PhoneNo,User_MobileNo,User_FaxNo)
           VALUES  (@UserName,@User_Password,@User_ConPassword,@User_FirstName,@User_LastName,
           @User_Title,@User_Email,@User_PhoneNo,@User_MobileNo,@User_FaxNo)
    SET @SNo = Scope_Identity()
    SELECT Vendor_ID From User_Info3 WHERE SNo = @SNo
    END 
```

以及相应**修改的 c# 代码**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T10:10:40.603

感谢您的所有回复。在我根据您的想法多次修改 C# 代码和 SP 之后，我终于得到了我的问题的答案。我从我的 SP 中删除了“Vendor_ID”，并在我的代码中添加了一些代码，如下所示。

存储过程：

```
 ALTER PROCEDURE [dbo].[usp_User_Info3]
      @SNo INT OUTPUT,
      @UserName VARCHAR(30),
      @User_Password VARCHAR(12),
      @User_ConPassword VARCHAR(12),
      @User_FirstName VARCHAR(25),
      @User_LastName VARCHAR(25),
      @User_Title VARCHAR(35),
      @User_OtherEmail VARCHAR(30),
      @User_PhoneNo VARCHAR(14),
      @User_MobileNo VARCHAR(14),
      @User_FaxNo VARCHAR(14)
      AS
      BEGIN
      SET NOCOUNT ON;
      INSERT INTO User_Info3 (UserName,User_Password,User_ConPassword,User_FirstName,User_Title,User_OtherEmail,User_PhoneNo,User_MobileNo,User_FaxNo)
           VALUES (@UserName,@User_Password,@User_ConPassword,@User_FirstName,@User_LastName,@User_Title,@User_OtherEmail,@User_PhoneNo,@User_MobileNo,@User_FaxNo)
  SET @SNo = Scope_Identity() 
      END 
```

C#代码：

```
 protected void BtnUserNext_Click(object sender, EventArgs e)
    {
    SqlCon.Open();
    SqlCommand cmd2 = new SqlCommand("usp_User_Info3", SqlCon);
    cmd2.CommandType = CommandType.StoredProcedure;
    cmd2.CommandText = "usp_User_Info3";
    System.Data.SqlClient.SqlParameter SNo=cmd2.Parameters.Add("@SNo", System.Data.SqlDbType.Int);
    cmd2.Parameters.Add("@UserName", SqlDbType.VarChar).Value = txtUserName.Text.Trim();
    cmd2.Parameters.Add("@User_Password", SqlDbType.VarChar).Value = txtRegPassword.Text.Trim();
    cmd2.Parameters.Add("@User_ConPassword", SqlDbType.VarChar).Value = txtRegConPassword.Text;
    cmd2.Parameters.Add("@User_FirstName", SqlDbType.VarChar).Value = txtRegFName.Text.Trim();
    cmd2.Parameters.Add("@User_LastName", SqlDbType.VarChar).Value = txtRegLName.Text.Trim();
    cmd2.Parameters.Add("@User_Title", SqlDbType.VarChar).Value = txtRegTitle.Text.Trim();
    cmd2.Parameters.Add("@User_OtherEmail", SqlDbType.VarChar).Value = txtOtherEmail.Text.Trim();
    cmd2.Parameters.Add("@User_PhoneNo", SqlDbType.VarChar).Value = txtRegCode1.Text;
    cmd2.Parameters.Add("@User_MobileNo", SqlDbType.VarChar).Value = txtRegCode2.Text;
    cmd2.Parameters.Add("@User_FaxNo", SqlDbType.VarChar).Value = txtRegCode3.Text;
    cmd2.Connection = SqlCon;
    try
    {
       SNo.Direction = System.Data.ParameterDirection.Output;
       cmd2.ExecuteScalar();
       string VendorID = "VEN" + cmd2.Parameters["@SNo"].Value.ToString();
    }
    finally
    {
    string url = "../CompanyBasicInfo.aspx?Parameter=" + Server.UrlEncode(" + VendorID + ");
    ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Login created successfully');window.location.href = '" + url + "';", true);
     SqlCon.Close();
     }
    } 
```

# perl - 为什么`$v = () = split` 返回 1？

> ID：12156135
> 
> 赞同：10
> 
> 时间：2012-08-28T09:14:19.863
> 
> 标签：perl

`perldoc`说“标量上下文中的列表赋值返回列表赋值右侧的元素数”但是当我尝试这段代码时：

```
perl -e '$_="aaaaa";print $v=(()=split //)' 
```

输出`1`让我感到困惑。（我期望的答案是`5`。）

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T09:52:42.027

根据[`split`](http://p3rl.org/split)文档：

> 当分配给一个列表时，如果 LIMIT 被省略或为零，Perl 提供一个比列表中变量数大一的 LIMIT <...>

由于您指定了空列表，`split`因此只返回 1 个结果，而这个结果数正是您的变量中的结尾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T09:45:54.317

`split`它有某种疯狂的超魔力，可以让它知道它何时位于左侧有列表的作业的右侧，并根据该列表中的项目数调整其行为。

这被描述`perlfunc`为“为了避免不必要的工作”，但您发现该优化导致的行为存在明显差异。

要查看发生了什么的一些证据，请通过 Deparse 运行您的脚本，如下所示：

```
perl -MO=Deparse -e '$_="aaaaa";print $v=(()=split //)' 
```

**更新**：我去寻找实现这个的代码，它不是我期望的。实际上优化是由赋值运算符 ( `op.c:Perl_newASSIGNOP`) 执行的。split 对其上下文知之甚少。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T09:22:29.237

为什么要分配给一个空数组？位`()=(split //)`。这最终会导致 - 嗯，一团糟。或者，在您的情况下，一个大小为 1 的数组中没有太多内容。

而且，这太晦涩难懂了。perl 以只写而闻名，所有修改 $_ 和使用它并不能帮助其他人 - 或者你 - 了解正在发生的事情。

尝试类似的东西

```
perl -e '$v = (split //, "aaaaa"); print "$v\n"' 
```

或者，如果您希望复制测试的行为：

```
perl -e '$v = () = (split //, "aaaaa"); print "$v\n"' 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-28T09:21:36.373

对，但是 ：

```
perl -e '$_="aaaaa";print $v=(split //)' 
```

给出 5，以及

```
perl -e '$_="aaaaa";print $v=(@x=split //)' 
```

也许你的左值（）正在删除额外的数组元素？

**编辑**：顺便说一句：

```
perl -e '$_="aaaaa";print $v=(($x,$y)=split //)' 
```

返回 3，因为 $v=... 命令的右视图给出：

($x,$y,(a,a,a))

**所以在你原来的情况下，`()=split //`返回 ( ( a , a , a , a , a ) ) （它只有一个元素）**

*编辑：*错误的数组表示法，由于最后一分钟更改了我的测试用例，结果错误

# php - 如何在php中创建具有某些固定前缀的随机代码？

> ID：12156136
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:14:26.850
> 
> 标签：php, random

如何生成一个唯一的代码，它将是一个 8 位代码代码 1-2 代表固定（ZX），代码 3-8 是代码的自动生成。例如：“ZX23456X”。?

唯一代码的格式应如下： 1）一个字母。2) 后跟 5 个数值 3) 后跟前两个应固定为“ZX”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:18:28.190

```
$start = 'ZX';
$characters = array_merge(range('A','Z'), range('0','9'));
for ($i = 0; $i < 6; $i++) {
    $rand = mt_rand(0, count($characters)-1);
    $start .= $characters[$rand];
}
echo $start; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:19:07.860

怎么样[`UniqId()`](http://php.net/uniqid)？

```
function UniqCode($prefix="ZX",$length=8)
{
   return substr(strtoupper(uniqid($prefix)), 0, $length);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:20:21.290

您可以尝试使用`<?php echo substr(uniqid('ZX'), 0, 8); ?>`，请参阅[http://uk3.php.net/uniqid](http://uk3.php.net/uniqid)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:22:41.500

尝试

```
echo "ZX".substr(md5(uniqid(mt_rand(), true)), 0, 8); 
```

# gwt - GWT - ScrollPanel 不会在从 DialogBox 扩展的类中引发任何 onScroll 事件

> ID：12156149
> 
> 赞同：0
> 
> 时间：2012-08-28T09:15:23.327
> 
> 标签：gwt

我创建了一个从 DialogBox 扩展的类，以便使用嵌套在 ScrollPanel 中的 FlexTable 对其进行自定义。问题是，即使我有一个带有虚拟代码的滚动处理程序（Window.alert ....），屏幕上也不会出现任何事件，就好像没有引发事件一样。

到目前为止，这是我的代码：

```
public class LogViewerPopup extends DialogBox {

private DashboardServiceInterfaceAsync myService;

private FlexTable innerTable;

private String tool;
private String version;
private String exec_id;
private String scenario;
private int xPos;
private int yPos;

public LogViewerPopup(DashboardServiceInterfaceAsync myService, String tool, String version, String exec_id, String scenario, int xPos, int yPos) {
    super(true, false);

    this.myService = myService;
    this.tool = tool;
    this.version = version;
    this.exec_id = exec_id;
    this.scenario = scenario;
    this.xPos = xPos;
    this.yPos = yPos;

    this.setStyleName("dialog");
    this.setStyleDependentName("dialogContent", true);
    this.setAnimationEnabled(true);
    this.setGlassEnabled(true);
    this.setText(tool + " - " + scenario + " - " + version);
    //this.setWidget(new Label(tool + " - " + scenario + " - " + version));
    this.setPopupPosition(xPos, yPos);

    myService.getLogs(version, tool, exec_id, scenario, new AsyncCallback<ArrayList<HashMap<String,String>>>() {

        @Override
        public void onSuccess(ArrayList<HashMap<String, String>> result) {

            System.out.println("Debug !");

            innerTable = new FlexTable();
            innerTable.setCellSpacing(0);

            ScrollPanel sp = new ScrollPanel();

            sp.addScrollHandler(new ScrollHandler() {

                @Override
                public void onScroll(ScrollEvent event) {
                    Window.alert("Scrolling !");

                }
            });

            //Headers
            addColumn("ID");
            addColumn("Date");
            addColumn("Scenario");
            addColumn("Module");
            addColumn("Logtype");
            addColumn("Content");
            addColumn("Exec ID");
            addColumn("Executor");
            addColumn("Current Dataset");
            addColumn("Total Datasets");

            //Results
            for(int i = 0 ; i < result.size() ; i++){

                innerTable.setWidget(i + 1, 0, new Label(result.get(i).get("id")));
                innerTable.setWidget(i + 1, 1, new Label(result.get(i).get("date")));
                innerTable.setWidget(i + 1, 2, new Label(result.get(i).get("scenario")));
                innerTable.setWidget(i + 1, 3, new Label(result.get(i).get("module")));
                innerTable.setWidget(i + 1, 4, new Label(result.get(i).get("logtype")));
                innerTable.setWidget(i + 1, 5, new Label(result.get(i).get("content")));
                innerTable.setWidget(i + 1, 6, new Label(result.get(i).get("exec_id")));
                innerTable.setWidget(i + 1, 7, new Label(result.get(i).get("executor")));
                innerTable.setWidget(i + 1, 8, new Label(result.get(i).get("current_dataset")));
                innerTable.setWidget(i + 1, 9, new Label(result.get(i).get("total_datasets")));
            }

            for(int i = 0 ; i < innerTable.getRowCount() ; i++)
                for(int j = 0; j < innerTable.getCellCount(i) ; j ++)
                    innerTable.getCellFormatter().addStyleName(i,j,"FlexTable-Cell");

            applyLineStyle();

            sp.add(innerTable);
            setWidget(sp);

            show();

        }

        @Override
        public void onFailure(Throwable caught) {
            Window.alert("Error generating the LogViewerPopup : " + caught.getMessage());

        }
    });

}

private void applyLineStyle(){

    HTMLTable.RowFormatter rf = innerTable.getRowFormatter();

    for (int row = 1; row < innerTable.getRowCount(); ++row) {
          if ((row % 2) != 0) {
            rf.addStyleName(row, "FlexTable-OddRow");
          }
          else {
            rf.addStyleName(row, "FlexTable-EvenRow");
          }
    }

    rf.addStyleName(0, "FlexTable-HeaderRow");
}

private void addColumn(String text){
    Label label = new Label(text);
    label.setWidth("100%");

    try{
        innerTable.setWidget(0, innerTable.getCellCount(0), label);
    }catch(IndexOutOfBoundsException e){
        innerTable.setWidget(0, 0, label);
    }
}

} 
```

不要关注结构糟糕的代码，因为我正拼命想让这件事最终工作；）

注意：我设法通过将 ScrollPanel 包装在 FocusPanel 中来捕捉滚动，但它并没有真正帮助我，因为我想知道滚动条的精确位置。我正在使用 GWT 3.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:39:01.360

尝试为您的 ScrollPanel 设置明确的宽度和高度。

# linux - JIRA 启动失败（“JIRA 需要以下插件，但尚未启动”）

> ID：12156155
> 
> 赞同：3
> 
> 时间：2012-08-28T09:15:42.167
> 
> 标签：linux, jira, jira-plugin

启动 Jira 时遇到以下错误。
你会建议如何解决这个问题？

```
You cannot access JIRA at present. Look at the table below to identify the reasons

Description

The following plugins are required by JIRA, but have not been started:

Atlassian JIRA - Plugins - Project Config Plugin (com.atlassian.jira.jira-project-config-plugin)
Atlassian OAuth Admin Plugin (com.atlassian.oauth.admin)
Embedded Gadgets Plugin (com.atlassian.gadgets.embedded)
Gadget Dashboard Plugin (com.atlassian.gadgets.dashboard)
Atlassian JIRA - Plugins - Look And Feel Logo Upload Plugin com.atlassian.jira.lookandfeel)
Atlassian REST - Module Types (com.atlassian.plugins.rest.atlassian-rest-module)
Gadget Spec Publisher Plugin (com.atlassian.gadgets.publisher)
Atlassian JIRA - Plugins - REST Plugin (com.atlassian.jira.rest)
Atlassian OAuth Service Provider Plugin (com.atlassian.oauth.serviceprovider)
Atlassian OAuth Consumer Plugin (com.atlassian.oauth.consumer)
Opensocial Plugin (com.atlassian.gadgets.opensocial)
Gadget Directory Plugin (com.atlassian.gadgets.directory)
Atlassian JIRA - Plugins - SAL Plugin (com.atlassian.sal.jira)
Atlassian JIRA - Plugins - Gadgets Plugin (com.atlassian.jira.gadgets) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:29:48.193

[该线程](https://answers.atlassian.com/questions/25928/how-to-resolve-the-plugins-failed-to-load-error)列出了各种可能的原因：

*   [错误 JRA-22633](https://jira.atlassian.com/browse/JRA-22633)是关于在会话开始时增加超时
*   潜在的 Java 版本问题：“我刚遇到同样的问题，发现 JIRA 在 Java 1.7 上显然不能正常工作。如果你降级到 1.6，一切运行顺利。”
*   检查防病毒是否不是原因（请参阅[此线程](https://answers.atlassian.com/questions/39168/jira-startup-failed-you-cannot-access-jira-at-present-look-at-the-table-below-to-identify-the-reasons)以获取说明）
*   某些插件可能被禁用：请参阅“ [JIRA 由于禁用捆绑插件而无法启动](https://confluence.atlassian.com/display/JIRAKB/JIRA+does+not+Start+Due+to+Disabled+Bundled+Plugin)”
*   确保没有 Jira 锁定问题（请参阅“ [JIRA 已锁定](https://confluence.atlassian.com/display/JIRAKB/JIRA+is+Locked)”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T21:27:54.223

我们今天遇到了类似的问题，最终JIRA在重启后会被锁定。这是因为插件**com.atlassian.jira.ext.rpc**被禁用。但是，这并没有发生，因为它由于超时问题而无法正确加载。我认为它发生了，因为升级附加组件花费的时间比预期的要长，所以 JIRA 故意禁用了插件。我本可以手动启用它，但没有注意到它并立即重新启动了 JIRA。现在插件仍然被禁用，我没有机会改变它，因为 JIRA 没有启动。

我通过连接到数据库并运行以下命令手动修复了这个问题： **update pluginstate set pluginenabled='true' where pluginkey='com.atlassian.jira.ext.rpc';** 之前设置为**false**。然后我再次启动了 JIRA，它成功了。

# html - a href"#" 不适用于 :focus on firefox 浏览器

> ID：12156159
> 
> 赞同：5
> 
> 时间：2012-08-28T09:15:54.490
> 
> 标签：html, css

我有这个菜单，我自定义了它来像选择一样使用它。它在即 chrome 上工作得很好，但在 Firefox 上不起作用。正常行为是：当菜单在焦点上展开时，会显示链接（帮助和注销），如果您单击它们，则会在同一浏览器的其他页面中重定向。Firefox 上的错误行为：菜单 si 在焦点上展开，但链接（hep 和注销）没有重定向。

```
 <ul id="main">
                <li class="username" tabindex="1" >  <a>USER</a>
                    <ul class="curent_buser">
                        <li class="ai"><a class="jaximus"href="http://en.wikipedia.org/wiki/Wiki">Help</a></li>
<li class="aj"><a class="jaximus" href="http://en.wikipedia.org/wiki/Wiki" name="logoff">Log Off</a></li>                </ul>
                </li>
            </ul> 
```

为什么要做这个firefox？？？我有最新版本的 ff :|

这是一个小提琴示例：http: **[//jsfiddle.net/RwtHn/1152/](http://jsfiddle.net/RwtHn/1152/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:28:48.143

这是因为当您按下“帮助”或“注销”时，包含的元素会获得焦点并处于活动状态，这会“停用”此规则：

```
#main li:focus ul, #main a:active + ul{
display:block;
} 
```

因此，链接（或更具体地说，包含链接的 ul）在对链接的点击完成之前消失了。

至少这似乎是 Firefox 处理它的方式。

**编辑：**它应该与添加选择器一起使用

```
#main li.username:active ul 
```

以上规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:43:45.617

将您的最终规则更改为：

```
#main li:focus ul, #main a:active + ul,
#main li ul:hover
{
display:block;
} 
```

该`#main li ul:hover`规则意味着子菜单将保持打开足够长的时间以供点击注册。

参见[分叉的 JS Fiddle](http://jsfiddle.net/RwtHn/1152/)

ps 很酷的技巧，我以前从未见过这样启动的选择框。

# width - 跨度宽度属性被禁用

> ID：12156161
> 
> 赞同：0
> 
> 时间：2012-08-28T09:15:56.147
> 
> 标签：width, html, css

嗨，我正在从教程中自学一些骨干，我想使用跨度创建一个类似于显示元素的表格。

所以我在模板的跨度中添加了一个宽度元素。（我知道这不是放置它的最佳位置，但它应该优先于样式表属性，并且只是为了在开发过程中获得一个想法）。

```
<script type="text/template" id="loadedwith-template">
  <span  style="width:100" class="library"><%= library.name  %></span>
  <input style="width:100" class='input' type="text" />
  <button class="delete_lw" >delete</button>
</script> 
```

但是，当我在浏览器中查看它时，该元素会像以前一样显示，而没有应用宽度设置。

Chrome 中的“检查元素”显示 width 属性，但被禁用（上面有一行像 html 删除线）。这是元素样式中在计算样式部分之前显示的最后一件事。

还有另一个引用跨度的样式表。是否有任何原因导致宽度被禁用？另一个样式表如下（借自主干教程）。（跨度在列表中）。

```
 a { color: #2929FF; }
    a:visited { color: #777; }
    a:hover {
      color: #8F8FFF;
      text-decoration: none;
    }
    body, button { font: 100%/1.4 "Helvetica Neue", Helvetica, Arial, sans-serif; }
    body {
      background: #FFF;
      color: #444;
      padding: 25px 50px;
    }
    button, .delete, .swap {
      border: 0;
      border-radius: 5px;
      color: #FFF;
      cursor: pointer;
      font-weight: bold;
      line-height: 1;
      text-align: center;
      text-transform: uppercase;
    }
    button:hover, .delete:hover, .swap:hover { opacity: 1; }
    button {
      background: #2929FF;
      font-size: 0.75em;
      padding: 7px 12px;
      opacity: .75;
    }
    h1 {
      font-size: 1.25em;
      letter-spacing: -0.5px;
    }
    p {
      color: #777;
      font: italic 0.75em/1.2 "Georgia", Palatino, "Times New Roman", Times, serif;
    }
    span {
      display: inline-block;
      margin-right: 10px;
    }
    ul { padding-left: 0; }
    .delete, .swap {
      font-size: 0.625em;
      opacity: .25;
      padding: 3px 10px;
      position: relative;
      top: -3px;
    }
    .delete { background: #FF29D0; }
    .swap { background: #FF6529; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:18:41.323

您需要指定测量单位

指定 CSS 单位是对非零值的要求。浏览器可能会尝试猜测您的意思，但根据标准，它仍然是一个损坏的样式表。

即 CSS 中没有“默认单位”，只是浏览器可能会尝试帮助您，尽管它也可能会忽略您未将单位指定为无效单位的声明。

尝试`style="width:100px"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:17:35.253

您应该指定一个单位，例如`px`：

```
style="width: 100px" 
```

# android - MediaPlayer 认为 aac* 音频文件是视频文件？

> ID：12156162
> 
> 赞同：4
> 
> 时间：2012-08-28T09:15:56.370
> 
> 标签：android, media-player

代码运行良好，但我得到这个错误日志的方式

错误日志：

```
08-28 08:44:24.281: E/MediaPlayer(32454): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message. 
```

我尝试将音频文件转换为不同的格式设置听众等等......我真的需要这个帮助。她是整个 MediaPlayer 日志：

日志：

```
08-28 08:44:24.121: V/MediaPlayer-JNI(32454): native_setup
08-28 08:44:24.131: V/MediaPlayer(32454): constructor
08-28 08:44:24.146: D/dalvikvm(32454): GC_CONCURRENT freed 193K, 4% free 9397K/9735K, paused 2ms+2ms
08-28 08:44:24.146: V/MediaPlayer-JNI(32454): native_finalize
08-28 08:44:24.146: V/MediaPlayer-JNI(32454): release
08-28 08:44:24.146: V/MediaPlayer-JNI(32454): native_finalize
08-28 08:44:24.146: V/MediaPlayer-JNI(32454): release
08-28 08:44:24.186: V/MediaPlayer(32454): setListener
08-28 08:44:24.186: V/MediaPlayer-JNI(32454): setDataSourceFD: fd 47
08-28 08:44:24.186: V/MediaPlayer(32454): setDataSource(47, 740, 14519)
08-28 08:44:24.216: V/MediaPlayer(32454): setVideoSurfaceTexture
08-28 08:44:24.216: V/MediaPlayer(32454): prepare
08-28 08:44:24.246: V/MediaPlayer(32454): message received msg=5, ext1=0, ext2=0
08-28 08:44:24.246: V/MediaPlayer(32454): New video size 0 x 0
08-28 08:44:24.246: V/MediaPlayer(32454): callback application
08-28 08:44:24.246: V/MediaPlayer(32454): back from callback
08-28 08:44:24.246: V/MediaPlayer(32454): message received msg=1, ext1=0, ext2=0
08-28 08:44:24.246: V/MediaPlayer(32454): prepared
08-28 08:44:24.246: V/MediaPlayer(32454): signal application thread
08-28 08:44:24.246: V/MediaPlayer(32454): callback application
08-28 08:44:24.246: V/MediaPlayer(32454): back from callback
08-28 08:44:24.246: V/MediaPlayer(32454): prepare complete - status=0
08-28 08:44:24.246: V/MediaPlayer-JNI(32454): start
08-28 08:44:24.246: V/MediaPlayer(32454): start
08-28 08:44:24.281: E/MediaPlayer(32454): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
08-28 08:44:24.281: I/MediaPlayer(32454): Don't send intent. msg.arg1 = 0, msg.arg2 = 0
08-28 08:44:24.281: E/MediaPlayer(32454): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message.
08-28 08:44:25.661: V/MediaPlayer(32454): message received msg=2, ext1=0, ext2=0
08-28 08:44:25.661: V/MediaPlayer(32454): playback complete
08-28 08:44:25.661: V/MediaPlayer(32454): callback application
08-28 08:44:25.661: V/MediaPlayer(32454): back from callback
08-28 08:44:25.666: E/MediaPlayer(32454): mOnCompletionListener is null. Failed to send MEDIA_PLAYBACK_COMPLETE message.
08-28 08:49:24.211: V/MediaPlayer-JNI(32454): release
08-28 08:49:24.211: V/MediaPlayer(32454): setListener
08-28 08:49:24.211: V/MediaPlayer(32454): disconnect
08-28 08:49:24.226: V/MediaPlayer(32454): destructor
08-28 08:49:24.226: V/MediaPlayer(32454): disconnect 
```

和Java代码。

Java代码：

```
 public class MainActivity extends Activity {
    MediaPlayer TestingAudio;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Initialization();
        DoStuff();
    }

    private void Initialization() {
        setContentView(R.layout.activity_main);
        TestingAudio = MediaPlayer.create(MainActivity.this, R.raw.samlagnin);
    }

    private void DoStuff() {
        TestingAudio.start();
    }

    @Override
    protected void onPause() {
        super.onPause();
        TestingAudio.release();
        TestingAudio = null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:13:52.503

我设法通过附加一些空听众来摆脱错误。[请参阅http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)上的 setOnPreparedListener() 和类似方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:10:36.810

我是否理解正确，您的应用程序有效，而您只是想知道记录的错误？我认为 MediaPlayer 只是尝试调用所有定义的回调方法，而不考虑具体的文件/编解码器。正如您在日志文件中看到的那样，还有其他几个为 null 的回调，例如`mOnCompletionListener`和`mOnPreparedListener`。所以我不会对此过于担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:20:50.223

你是说aac吗？但是MediaPlayer不支持aac。

# java - 运行 Jspresso 人力资源示例应用程序

> ID：12156163
> 
> 赞同：0
> 
> 时间：2012-08-28T09:15:57.427
> 
> 标签：java, jspresso

我已经从这里下载了 Jspresso 人力资源示例应用程序：

[http://www.jspresso.org/page/jspresso-download-area](http://www.jspresso.org/page/jspresso-download-area)

我不知道 Jspresso 框架。我只想运行这个下载的人力资源示例应用程序，看看它是如何工作的。但是从下载的内容中我不知道如何让它运行。如果我可以从命令提示符运行它会很好，因为稍后我想使用 Java 分析器（我使用的分析器是命令行工具）来分析应用程序。我已经安装了 JDK 和 Tomcat。

有人知道如何从 Jspresso 运行这个人力资源示例应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:38:13.100

我在这里找到了如何安装并使其运行：

[http://www.jspresso.org/page/jspresso-10-minutes](http://www.jspresso.org/page/jspresso-10-minutes)

# wpf - 运行时找不到动态资源时的信息？

> ID：12156166
> 
> 赞同：2
> 
> 时间：2012-08-28T09:16:15.593
> 
> 标签：wpf, xaml, resourcedictionary

在我当前的项目中，我有一个相当大的基于 WPF 的应用程序，其中包含大量静态和动态资源。由于过去进行了许多重构和更改，因此在运行时无法找到许多 DynamicResources，因此没有应用任何值。

我喜欢做的是运行应用程序并在找不到 DynamicResource 时获取输出、异常或其他任何内容。

我试图构建一个 DefaultTraceListener 和一个 Converter 来检查未使用的 DynamicResources，但无济于事。

有没有人可以为我解决如何实现这一目标？

例子：

```
 <Grid.Resources>
      <Style x:Key="myStyle1" TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="Blue"></Setter>
      </Style>
    </Grid.Resources>
    <StackPanel>
      <TextBlock Style="{DynamicResource myStyle1}">DynamicResource exists</TextBlock>
      <TextBlock Style="{DynamicResource myStyle3}">DynamicResource does not exist</TextBlock>
    </StackPanel> 
```

如何在运行时通知我 myStyle3 不存在？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:54:58.483

有很多工具表明你的女巫绑定不起作用..

*   WPF Inspector 是我最喜欢的工具，看看吧。[WPF 检查员](http://wpfinspector.codeplex.com/)
*   [Snoop 实用程序](http://snoopwpf.codeplex.com/)就是其中之一。简而言之 - 在右上角，您会找到允许过滤视觉效果的下拉列表，只需选择具有绑定错误的视觉效果。来源：[如何定位绑定错误的来源？](https://stackoverflow.com/questions/8480569/how-to-locate-the-source-of-a-binding-error)
*   在 Visual Studio 中，您可以在“调试”菜单“异常”中启用所有异常（带有绑定错误），然后检查所有内容。

但我不知道这是否正是你想要的，让其他人回答这个......

# xcode - PBXBuildFile vs PBXFileReference 部分

> ID：12156169
> 
> 赞同：7
> 
> 时间：2012-08-28T09:16:20.533
> 
> 标签：xcode, merge, project, pbxproj

project.pbxproj 中的 PBXBuildFile 和 PBXFileReference 有什么区别？两个部分中都列出一个文件是否重要？应该在哪个部分获取什么文件的策略是什么？

```
/* Begin PBXBuildFile section */
        3D081B83146ACE36000CC86B /* B767.png in Resources */ = {isa = PBXBuildFile; fileRef = 3D081B82146ACE36000CC86B /* B767.png */; };

/* Begin PBXFileReference section */
        3D081B82146ACE36000CC86B /* B767.png */ = {isa = PBXFileReference; lastKnownFileType = image.png; path = B767.png; sourceTree = "<group>"; }; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T23:15:04.393

您通常不必担心这一点，但它可能会出现在 project.pbxproj 文件中的某些合并冲突中。

PBXFileReference 是对实际文件的引用。它是备份出现在左侧项目视图中的文件的对象。

PBXBuildFile 是目标中的文件。它包装了 PBXFileReference 并添加了某些属性，例如每个文件的编译器标志。如果将文件添加到目标，它将在两个部分中列出。如果一个文件位于多个目标中，那么它在构建文件部分中将有多个 PBXBuildFile。

# android - ImageView 会在旋转后重置为原始状态吗？

> ID：12156171
> 
> 赞同：11
> 
> 时间：2012-08-28T09:16:24.253
> 
> 标签：android, rotation

> **可能重复：**
> [Android：动画位置在完成后重置](https://stackoverflow.com/questions/3882826/android-animation-position-resets-after-complete)

我`RotateAnimation`用来旋转`ImageView`. 代码很简单：

```
this.button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        Animation ani = new RotateAnimation(
                0, /* from degree*/
                30, /* to degree */
                Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        ani.setDuration(1000);
        imageView.startAnimation(ani);
    }
}); 
```

你可以看到我想让 imageView 旋转 30 度。

它可以工作，但是当旋转完成时，图像会恢复到原始状态，旋转前的位置和度数相同。我想在最后一个动画位置修复 ImageView，即想修复倾斜 30 度的图像。如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T09:41:26.140

我只是找到一个解决方案：

```
ani.setFillAfter(true); 
```

有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:23:56.147

这是您在 Android 上使用动画时的正常方式。

你可以：

*   开始一个没有持续时间的新动画，并在“无限”上重复属性，然后在里面旋转图像
*   将旋转值手动放在动画的末尾（但如果我没记错的话，如果没有低于 Android 3.0 的特定动画，你就不能这样做）。

# objective-c - NSMutableDictionary 因“发送到不可变对象的变异消息”而崩溃

> ID：12156172
> 
> 赞同：0
> 
> 时间：2012-08-28T09:16:24.147
> 
> 标签：objective-c, ios, ios5, nsmutabledictionary

我有一个具有 a`NSMutableDictionary`作为属性的类：

```
@interface Alibi : NSObject <NSCopying>
@property (nonatomic, copy) NSMutableDictionary * alibiDetails;
@end 
```

使用以下构造函数：

```
- (Alibi *)init
{
    self = [super init];
    _alibiDetails = [NSMutableDictionary dictionary];
    return self;
} 
```

和复制方法：

```
- (Alibi *)copyWithZone:(NSZone *)zone
{
    Alibi *theCopy = [[Alibi alloc] init];
    theCopy.alibiDetails = [self.alibiDetails mutableCopy];    
    return theCopy;
} 
```

当我尝试调用`setObject:ForKey:`时，出现运行时错误`mutating method sent to immutable object`。

我`Alibi`在视图控制器中声明了对象 as`@property (copy, nonatomic) Alibi * theAlibi;`并用`self.theAlibi = [[Alibi alloc] init];`in对其进行初始化`viewDidLoad`。

崩溃的行是：

```
NSString * recipient;
recipient = @"Boss";
[self.theAlibi.alibiDetails setObject:recipient forKey:@"Recipient"]; 
```

请让我知道我在这里做错了什么。我正在为 iPhone 上的 iOS 5 编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:22:02.553

您有一个“复制”属性，这意味着 - 您的 NSMutableDictionary 将调用 -copy 方法并在分配给合成实例变量之前返回一个常规 NSDictionary 。[该线程](https://stackoverflow.com/questions/816720/whats-the-best-way-to-use-obj-c-2-0-properties-with-mutable-objects-such-as-ns)提供了有关解决此问题的一些选项的一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:02:07.723

为了完成这个线程，我将`Alibi`在下面包含我修改后的课程，这可以按我的要求工作。如果有人注意到任何内存泄漏或其他问题，我们将不胜感激。

```
@implementation Alibi

NSMutableDictionary *_details;

- (Alibi *)init
{
    self = [super init];
    _details = [NSMutableDictionary dictionary];
    return self;
}

- (NSMutableDictionary *)copyDetails
{
    return [_details mutableCopy];
}

- (NSMutableDictionary *)setDetails:(NSMutableDictionary *)value
{
    _details = value;
    return value;
}

- (void)addDetail:(id)value forKey:(id)key
{
    [_details setObject:value forKey:key];
}

- (id)getDetailForKey:(id)key
{
    return [_details objectForKey:key];
}

- (Alibi *)copyWithZone:(NSZone *)zone
{
    Alibi *theCopy = [[Alibi alloc] init];

    theCopy.serverId = [self.serverId copyWithZone:zone];
    theCopy.user = [self.user copyWithZone:zone];
    theCopy.startTime = [self.startTime copyWithZone:zone];
    theCopy.endTime = [self.endTime copyWithZone:zone];
    [theCopy setDetails:[self copyDetails]];

    return theCopy;
}

@end 
```

# c# - 如何处理后台线程上的事件？

> ID：12156173
> 
> 赞同：2
> 
> 时间：2012-08-28T09:16:25.987
> 
> 标签：c#, multithreading

我有一个类以相当快的频率（每 100 毫秒）触发一个事件。为了避免减慢这个过程，事件处理程序应该将处理交给某种后台任务/线程/工作者（而不是在事件处理程序中进行）。

最好的方法是什么？我应该`Task.Factory.StartNew`在事件处理程序中使用吗？如此快速地创建任务是否会有开销（例如，5 个事件处理程序将每 100 毫秒创建 5 个任务）？或者我可以使用`BackgroundWorker`（在订阅者的构造函数中实例化），并在事件处理程序中调用 .RunAsync 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:20:11.157

两种方式：

*   要么使用`Task.Factory.StartNew`. 该方法依赖于 ThreadPool 来最小化任务创建成本。在大多数情况下，这应该没问题。
*   如果需要进一步降低性能影响，可以创建生产者/消费者队列。触发事件时，将通知排入队列。另一方面，一个线程监视队列并在通知到达时对其进行处理。

# integration - 编写要在 .NET 项目中使用的非托管 DLL：最佳实践

> ID：12156178
> 
> 赞同：1
> 
> 时间：2012-08-28T09:16:41.703
> 
> 标签：integration, unmanaged

我计划在 C（或 C++）中实现一个完全托管的项目的性能关键部分。要遵循的最佳实践是什么（关于方法签名、调用约定、两个世界之间的其他任何东西）？

到目前为止，我有：

*   函数声明（或定义？）应该是`extern "C" __declspec(dllexport)`
*   调用约定是`__stdcall`

还要别的吗？我敢肯定有很多。

# c# - 以 HTML 格式打印时出现条形码问题

> ID：12156183
> 
> 赞同：0
> 
> 时间：2012-08-28T09:16:59.687
> 
> 标签：c#, html, pdf, printing, barcode

我们有一个在线运输应用程序，它以 PDF 格式打印票，其中包括旅行时扫描的条形码。目前我们必须将打印格式从 PDF 更改为 HTML。这样做时，条形码没有被打印。所以，是否可以打印条形码以 HTML 格式？更多与此相关的信息将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:28:49.490

为什么不将条形码预生成为图像并将其放到页面上？[这](http://barcoderender.codeplex.com/)是一个简单的开源库，可以做到这一点。包括示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-31T18:04:15.150

您可以创建条形码的 HTML 表示，请记住：页面的显示方式取决于您应用到它的样式以及客户端解释它的方式（这就是为什么 IE 是一个痛苦的......）。

条形码具有要解释的尺寸限制。那会让你的造型一团糟。

此外，在打印网页时，客户端（Internet Explorer、Mozilla、Chrome、Safari 等）可能已由用户配置以节省墨水或提高可读性，因此可能无法以最佳方式打印条码。

我和[t3hn00b 在一起](https://stackoverflow.com/a/12156376/2661480)。最简单的方法是将服务器中的条形码生成为插入 html 的 jpg 或 png。这样您就可以保持尺寸，并且您的条形码在打印时不易出错。

# ruby-on-rails - 从 excel 文件中读取数据到 postgres 数据库（Active Record）

> ID：12156184
> 
> 赞同：2
> 
> 时间：2012-08-28T09:17:00.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我正在构建一个显示股票数据趋势和股票报价的 Web 应用程序。数据已以 excel 文件的形式发送给我，我现在需要将其加载到数据库中。excel 文件包含每只股票的每日股票数据，列格式如下：

日期 | 出价 | 报价 | 价格 | 体积

并且每个股票都在文件中的一个单独的工作表中，如下所示，每个块都是一个工作表：

库存1 | 库存2 | 库存3 | 库存4

我将这些数据从 excel 电子表格加载到我的 DailyQuotes 表的最佳方式是什么，我的 DailyQuotes 表的迁移文件如下：

```
class CreateDailyQuotes < ActiveRecord::Migration
  def change
    create_table :daily_quotes do |t|
      t.date :date
      t.decimal :bid
      t.decimal :offer
      t.decimal :price
      t.integer :volume
      t.integer :stock_id

  t.timestamps
    end
  end
end 
```

我已经创建了一个以 StockName 和 ID 作为列的 Stocks 表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:26:05.610

我喜欢[roo](https://github.com/hmcgowan/roo)。它适用于 xls 和 xlsx 格式。
也就是说，官方文档中的示例代码足以满足您的情况。您需要执行以下操作：

*   遍历每个工作表
*   遍历每一行
*   创建一个`Stocks`对象并从每一行填充字段
*   节省

另一种解决方案是将您的 excel 保存为 csv，并使用[faster_csv gem](https://github.com/JEG2/faster_csv)，它允许您直接从 csv 文件填充您的数据库表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:28:48.330

gem '电子表格' 可能是解析旧的 excel 格式 'xls' 的最佳选择。检查本[指南](http://spreadsheet.rubyforge.org/files/GUIDE_txt.html)

如果你想处理 xlsx，也许[ruby​​XL](https://github.com/gilt/rubyXL)更好。

# reporting-services - 如何在 SSRS 中冻结 Tablix 标头

> ID：12156187
> 
> 赞同：0
> 
> 时间：2012-08-28T09:17:08.683
> 
> 标签：reporting-services, ssrs-tablix

从 SSRS 中的 rdl 导出到 excel 后如何冻结 Tablix 标头。

我正在使用报表生成器 3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:26:48.207

> 例如，如果您将属性设置为重复列标题并保留列标题，则当您将报表导出到 Excel 时，列标题会出现在每个工作表的顶部，并且会为该行启用“冻结窗格”功能。

在这里找到：[控制行和列标题（报表生成器 3.0 和 SSRS）](http://msdn.microsoft.com/en-us/library/ee240753%28v=sql.105%29.aspx)

编辑：尽管上面 MSDN 链接中的文档表明这是可能的，但进一步的网络搜索暗示在呈现时无法冻结 tablix 中的列标题。只能对报告标题执行此操作。

# android - 通过乘法更改文本视图的值，同时更改其他文本视图

> ID：12156189
> 
> 赞同：0
> 
> 时间：2012-08-28T09:17:14.753
> 
> 标签：android, parsing, valuechangelistener

在这里，我从 URL 获取解析数据，现在我试图仅在文本视图上动态地将解析数据的值更改为用户，我的代码是

```
public class Main extends ListActivity {

    EditText resultTxt;

    public double C_webuserDouble;
    public double C_cashDouble;
    public double C_transferDouble;

    public double S_webuserDouble;
    public double S_cashDouble;
    public double S_transferDouble;

    TextView cashTxtView;
    TextView webuserTxtView;
    TextView transferTxtView;
    TextView S_cashTxtView;
    TextView S_webuserTxtView;
    TextView S_transferTxtView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);
        cashTxtView = (TextView) findViewById(R.id.cashTxtView);
        webuserTxtView = (TextView) findViewById(R.id.webuserTxtView);
        transferTxtView = (TextView) findViewById(R.id.transferTxtView);

        S_cashTxtView = (TextView) findViewById(R.id.S_cashTxtView);
        S_webuserTxtView = (TextView) findViewById(R.id.S_webuserTxtView);
        S_transferTxtView = (TextView) findViewById(R.id.S_transferTxtView);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions
                .getJSONfromURL("http://ldsclient.com/ftp/strtojson.php");

        try {

            JSONArray netfoxlimited = json.getJSONArray("netfoxlimited");

            for (inti = 0; i < netfoxlimited.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = netfoxlimited.getJSONObject(i);

                map.put("date", e.getString("date"));
                map.put("c_web", e.getString("c_web"));
                map.put("c_bank", e.getString("c_bank"));
                map.put("c_cash", e.getString("c_cash"));
                map.put("s_web", e.getString("s_web"));
                map.put("s_bank", e.getString("s_bank"));
                map.put("s_cash", e.getString("s_cash"));
                mylist.add(map);
            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.main,
                new String[] { "date", "c_web", "c_bank", "c_cash", "s_web",
                        "s_bank", "s_cash", }, new int[] { R.id.item_title,
                        R.id.webuserTxtView, R.id.transferTxtView,
                        R.id.cashTxtView, R.id.S_webuserTxtView,
                        R.id.S_transferTxtView, R.id.S_cashTxtView });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv
                        .getItemAtPosition(position);
                Toast.makeText(Main.this,
                        "ID '" + o.get("id") + "' was clicked.",
                        Toast.LENGTH_SHORT).show();

            }
        });
        resultTxt = (EditText) findViewById(R.id.editText1);
        resultTxt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                resultTxt.setText("");
            }
        });
        resultTxt.addTextChangedListener(new TextWatcher() {
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub

                String text;
                text = resultTxt.getText().toString();
                if (resultTxt.getText().length() > 5) {
                    calculateSum(C_webuserDouble, C_cashDouble,
                            C_transferDouble);
                    calculateSunrise(S_webuserDouble, S_cashDouble,
                            S_transferDouble);
                } else {

                }
            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                // TODO Auto-generated method stub

            }

        });
    }

    private void calculateSum(Double webuserDouble, Double cashDouble,
            Double transferDouble) {

        String Qty;
        Qty = resultTxt.getText().toString();

        if (Qty.length() > 0) {
            double QtyValue = Double.parseDouble(Qty);
            double cashResult;
            double webuserResult;
            double transferResult;

            cashResult = cashDouble * QtyValue;
            webuserResult = webuserDouble * QtyValue;
            transferResult = transferDouble * QtyValue;

            DecimalFormat df = new DecimalFormat("#.##");
            String cashResultStr = df.format(cashResult);
            String webuserResultStr = df.format(webuserResult);
            String transferResultStr = df.format(transferResult);

            cashTxtView.setText(String.valueOf(cashResultStr));
            webuserTxtView.setText(String.valueOf(webuserResultStr));
            transferTxtView.setText(String.valueOf(transferResultStr));

            // cashTxtView.setFilters(new InputFilter[] {new
            // DecimalDigitsInputFilter(2)});

        }

        if (Qty.length() == 0) {
            cashTxtView.setText(String.valueOf(cashDouble));
            webuserTxtView.setText(String.valueOf(webuserDouble));
            transferTxtView.setText(String.valueOf(transferDouble));

        }

    }

    private void calculateSunrise(Double webuserDouble, Double cashDouble,
            Double transferDouble) {

        String Qty;
        Qty = resultTxt.getText().toString();

        if (Qty.length() > 0) {
            double QtyValue = Double.parseDouble(Qty);
            double cashResult;
            double webuserResult;
            double transferResult;

            cashResult = cashDouble * QtyValue;
            webuserResult = webuserDouble * QtyValue;
            transferResult = transferDouble * QtyValue;

            DecimalFormat df = new DecimalFormat("#.##");
            String cashResultStr = df.format(cashResult);
            String webuserResultStr = df.format(webuserResult);
            String transferResultStr = df.format(transferResult);

            S_cashTxtView.setText(String.valueOf(cashResultStr));
            S_webuserTxtView.setText(String.valueOf(webuserResultStr));
            S_transferTxtView.setText(String.valueOf(transferResultStr));
        }

        if (Qty.length() == 0) {
            S_cashTxtView.setText(String.valueOf(cashDouble));
            S_webuserTxtView.setText(String.valueOf(webuserDouble));
            S_transferTxtView.setText(String.valueOf(transferDouble));

        }

    }
} 
```

我在 logcat 上收到以下错误

```
08-28 15:04:12.839: E/AndroidRuntime(584): Uncaught handler: thread main exiting due to uncaught exception
08-28 15:04:12.848: E/AndroidRuntime(584): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mokshya.jsontutorialhos.xmltest/com.mokshya.jsontutorial.Main}: java.lang.NullPointerException
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2401)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread.access$2100(ActivityThread.java:116)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.os.Looper.loop(Looper.java:123)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread.main(ActivityThread.java:4203)
08-28 15:04:12.848: E/AndroidRuntime(584):  at java.lang.reflect.Method.invokeNative(Native Method)
08-28 15:04:12.848: E/AndroidRuntime(584):  at java.lang.reflect.Method.invoke(Method.java:521)
08-28 15:04:12.848: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
08-28 15:04:12.848: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
08-28 15:04:12.848: E/AndroidRuntime(584):  at dalvik.system.NativeStart.main(Native Method)
08-28 15:04:12.848: E/AndroidRuntime(584): Caused by: java.lang.NullPointerException
08-28 15:04:12.848: E/AndroidRuntime(584):  at com.mokshya.jsontutorial.Main.onCreate(Main.java:111)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
08-28 15:04:12.848: E/AndroidRuntime(584):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2364) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:36:47.770

确保您的布局文件包含一个 id=list 的 ListView。这是 ListActivity 必须的。

```
<ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#00FF00"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"/> 
```

单击[此处](http://developer.android.com/reference/android/app/ListActivity.html)以供参考。

在 onCreateView 中设置 setListAdapter 之前检查 getListView() 是否返回 null。

# jstl - fmt:formatDate 更改每个应用程序的输出

> ID：12156193
> 
> 赞同：0
> 
> 时间：2012-08-28T09:17:17.580
> 
> 标签：jstl

在编写站点地图时，我遇到了这个问题：[JSTL fmt tag does not work in IE?](https://stackoverflow.com/questions/2228023/jstl-fmt-tag-does-not-work-in-ie) 并使用 . 伟大的。

有趣的是，我只在同一安装的 Tomcat7 中运行的一部分应用程序中遇到了它。

是否有一种机制可以使某些应用程序具有与其他应用程序不同的语言环境？据我所见，样板代码是相同的，唯一的区别是输出 HTML（不是逻辑）。所有 fmt 标签都使用相同的初始化和模式，具有相同的返回类型（相同的数据返回到多个页面）。

代码！

设置（在页面中）

```
<jsp:useBean id="WorkshopLatestUpdateProcessBean" scope="page" class="com.themetacity.beans.WorkshopProcessBean"/>
<c:set var="workshopUpdateDate" value="${WorkshopLatestUpdateProcessBean.lastUpdateDate}"/>

<fmt:formatDate value="${workshopUpdateDate}" pattern="yyyy-MM-dd"/> 
```

以上将给出结果

```
28-8-12 
```

另一个应用程序会给

```
Tue Aug 28 18:54:38 EST 2012 
```

这是与此问题顶部相关的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:27:00.733

事实证明，这是预期的行为，因为我在初始化传递给标签的值时很糟糕。

如果您传入未初始化的值，则默认为呈现页面时的时间戳，如上面的问题所示。在 c:set 部分初始化它，一切都很好。

TL：DR 没有问题，我不擅长这个。

# php - Javascript 从 js 解析的字符串中获取列表项

> ID：12156199
> 
> 赞同：0
> 
> 时间：2012-08-28T09:17:34.350
> 
> 标签：php, javascript, html, wordpress, twitter

我认为解决这个问题的最好方法是直接跳进去，边走边解释。

我正在使用 wordpess 和一个定制的模板（我们做了它）这个代码是为了处理 twitter 小部件 pro。（这不是最漂亮的代码，我稍后会清理它）

```
<?php

/*
  * TWITTER SIDE BAR
  *
  * Sets the twitter area to display: none and pulls in the content from the server
  * Javascript then does a string replace to remove a bit of unwanted text
  * finally javascript will write the doctored string to the client browser
*/

?><div id="twitterRight">

  <ul class="xoxo" style="list-style-type:none; font-size:11px; margin:0px 20px 0 0;">
    <li id="twitter-2" class="widget-container widget_twitter">
    <div id="twitHold" style="display:none;">
    <h3 class="widget-title"><span class='twitterwidget twitterwidget-title'><a href="http://www.twitter.com/username" target="_blank"><img src="<?php echo home_url(); ?>/images/twitterName.png" width="208" height="27" alt="EhomeS" /></a></span></h3>

  <ul>
  <?php 
    $twitter = dynamic_sidebar('primary-widget-area');
  ?></ul>
  </div>
  <div id="twitHolder">

  <script type="text/javascript">
    // Get the posted content from the server
    var str = $('#twitHold').html();
    var x = str.replace("Twitter: @username", "");
    //var shortString = x.substr( 0, 10 );
    document.write(x);
  </script>    
  </div>

  </li></ul>
</div><!-- END #twitterRight --> 
```

问题是 wordpress 函数 dynamic_sidebar 不返回字符串或任何东西，只返回一个布尔值，所以我无法操作它。所以我所做的就是将输出的 HTML 存储在一个 js 变量 x 中并从那里进行操作。

What I am trying to achieve is to simply limit the number of characters in each list item (tweets) however I cannot find a way of doing so. I have tried [this](https://stackoverflow.com/questions/4019894/get-all-li-elements-in-array) so far with no luck (im thinking because the javascript is writing it out and parsing it, im not sure).

Is there a way to perform the substr on the list items?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:33:16.683

Question is a little unclear, if you want a collection of the list items then try this.

use a jquery selector, jquery has good documentation [http://jquery.com/](http://jquery.com/)

be sure to add the jquery library to your document.

```
<ul id="twitterlist">
  <?php 
    $twitter = dynamic_sidebar('primary-widget-area');
?></ul>

<script type="text/javascript">
var listitems = $('#twitterlist').children();
</script> 
```

# ios - 使用 iOS 模拟器模拟 iPad 1

> ID：12156200
> 
> 赞同：3
> 
> 时间：2012-08-28T09:17:40.793
> 
> 标签：ios, ios-simulator

我的一位客户仅在 iPad 1 设备上遇到了可怕的减速。有什么方法可以让 iOS 模拟器模拟原始 iPad 的性能/硬件？

我宁愿不用出去买一台 iPad，因为 iOS 6 今年秋天将不支持它。

该应用程序在 iPad 2 和 3 上运行良好。我已经使用分配和活动工具进行了测试。

有任何想法吗？再次感谢。操作系统是 5.1.1，应用程序是用 XCode 4.4.1 编译的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:47:28.640

据我所知，模拟器就是它所说的那样，一个模拟器，因此无论您使用哪台计算机，它都能以尽可能快的速度运行。您可能需要将延迟代码放入运行循环中以模拟 iPad 1 的缓慢性，但也许您的客户需要意识到 iPad 1 比新型号慢得多 - 当然有一些（尤其是图形密集型) 操作会很困难 - 您可能会发现您需要根据所使用的设备调整用户体验（Apple 不鼓励这样做 - 他们更喜欢您检查 iOS 版本 - 但是有几个关于 SO 的问题可以帮助您这里）。

# performance-testing - 在 Ubuntu 上安装 LoadRunner 的步骤是什么？

> ID：12156202
> 
> 赞同：0
> 
> 时间：2012-08-28T09:17:47.080
> 
> 标签：performance-testing, loadrunner

在 Ubuntu 上安装 LoadRunner 的步骤是什么？任何链接也可以使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:52:38.390

您不能在任何 Linux 机器上安装 loadrunner。您只能在 unix 机器上运行负载生成器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:57:14.313

Ubuntu 并未在要求中注明为受支持的发行版，但 Redhat 已注明。有关在 Redhat linux 上安装负载生成器的信息，请参阅要求和安装指南。

由于许多虚拟用户类型依赖于 Windows API，因此您将面临能够使用基于 linux 的负载生成器运行的虚拟用户类型的限制。当您寻求支持时，您也会遇到问题，因为基于 Windows 的生成器被认为是控制和支持的“参考”生成器。因此，如果您遇到问题并联系支持人员，他们会要求您做的第一件事就是在基于 Windows 的负载生成器上重现该问题。这将告诉他们问题是所有生成器类型还是您的特定生成器类型都存在。

# intellij-idea - 如何在 Intellij 中为 Live 模板添加自定义表达式函数

> ID：12156205
> 
> 赞同：14
> 
> 时间：2012-08-28T09:17:58.673
> 
> 标签：intellij-idea, live-templates

如何在 Idea Intellij 中为实时模板添加新的自定义函数。

例如，我需要一个自定义函数，它可以将实时模板变量从 Camel Case 转换为 Spaced。即在变量的实时模板中，必须在多个位置插入有&没有空格。

例如。“我的变量”和“我的变量”。所以我想插入一个表达式来将“MyVar”转换为“My Var”。

默认情况下没有可用的表达式可用于此。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T10:49:33.427

有提供实时模板功能的 OpenAPI。可以创建 IntelliJ IDEA 插件来添加更多功能。

请参阅[宏](https://github.com/JetBrains/intellij-community/blob/6132bed37a6936e3a780f34aeff769d7f876ccbe/platform/lang-api/src/com/intellij/codeInsight/template/Macro.java)抽象类。插件应该定义扩展点，像这样：

```
<liveTemplateMacro implementation="com.intellij.codeInsight.template.macro.CapitalizeMacro"/> 
```

[在IntelliJ IDEA 社区](https://github.com/JetBrains/intellij-community)代码库中搜索示例实现。

# node.js - 续集选择不同的行

> ID：12156206
> 
> 赞同：10
> 
> 时间：2012-08-28T09:18:03.867
> 
> 标签：node.js, sequelize.js

有没有办法使用 sequelize.js 从表中选择不同的行？我查看了文档，但“查找器方法”没有指定完成此任务的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-06T07:31:41.753

假设您要将 DISTINCT 应​​用于以下查询：

```
Tuple.findAll({attributes: ['key', 'value']}); 
```

那么这是一种（hackish）方式来实现你想要的，而不必自己编写整个查询：

```
Tuple.findAll({attributes: [[Sequelize.literal('DISTINCT `key`'), 'key'], 'value']}); 
```

（使用 Sequelize v2.1.0 测试）

编辑 2015-06-08：仍然适用于 Sequelize v3.1.1

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-07-10T11:14:23.107

您可以执行以下操作：

```
myModel.findAll({
  attributes: [[sequelize.fn('DISTINCT', sequelize.col('col_name')), 'alias_name']],
  where:{}
}).then(data => {})..... 
```

从[问题](https://github.com/sequelize/sequelize/issues/2996#issuecomment-243636321)中提取并且它有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-06T08:00:03.657

编辑你的“node_modules/sequelize/lib/dialects/mysql/query-generator.js”

在 118 号线附近

改变

```
var query = "SELECT <%= attributes %> FROM <%= table %>" 
```

进入

```
var query = "SELECT " + ((options.distinct)? 'DISTINCT ':'') +"<%= attributes %> FROM <%= table %>", 
```

现在您可以`distinct: true`在续集请求中添加一个选项

希望对你有帮助-_^

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T06:33:56.057

这是不可能的，但如果你不介意自己创建 sql，你可以这样做：

```
sequelize.query('sql goes here', null, { raw: plain }).success(function(data){
    console.log(data)
}) 
```

玩得开心 ：）

**更新**

1.  Sequelize 现在使用`then`而不是`success`作为 promise 函数。
2.  `Sequelize.query`已被重构为仅使用参数`sql`和`options`
3.  `raw`接受`true/false`但不`plain`作为价值。

所以，根据新版本，代码应该是这样的：

```
 sequelize.query('sql goes here', { raw: true }).then(function(data){
        console.log(data);
    }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-21T15:25:37.900

```
Model.findAll({Attributes: ['col_name1', 'col_name2'], group: ['col_name1', 'col_name2']}); 
```

Sequelize 5.21 完全没问题

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-18T12:28:45.163

这有点类似于 Pascal Ludwig 提出的解决方案，但对于那些登陆这里希望获取给定列的不同值列表的人，您可以执行以下操作：

```
MyModel.aggregate('teh_field', 'DISTINCT', { plain: false }).then(...)
// Resolves to: [ { DISTINCT: value1 }, { DISTINCT: value2 }, ... ] 
```

这样，很容易将其转换为标准列表：

```
MyModel.aggregate('teh_field', 'DISTINCT', { plain: false })
    .map(function (row) { return row.DISTINCT })
    .then(function (tehValueList) {
        // tehValueList = [ value1, value2, ... ]
    })
; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-27T16:52:37.930

从 Sequelize 1.7 版开始，选择查询已移至 lib/dialects/abstract/query-generator.js。

在 1167 行附近，更改

> mainQueryItems.push("SELECT "+mainAttributes.join ....)

到

> ```
>  mainQueryItems.push('SELECT ');
>     if (options.distinct) {
>         mainQueryItems.push('DISTINCT ');
>     }
>     mainQueryItems.push(mainAttributes.join(', ') + ' FROM ' + options.table); 
> ```

顺便说一句，我使用 Sqlite 和 Postgres，它们都支持“DISTINCT”。如果您使用的方言不支持 distinct，那么显然这条线会给您带来问题，因为它将为您使用的所有 SQL 风格生成。我怀疑这就是为什么这个简单的更改没有进入主 Sequelize 源代码树的原因。

# django - Django文件上传进度获取缓存返回无

> ID：12156207
> 
> 赞同：3
> 
> 时间：2012-08-28T09:18:07.627
> 
> 标签：django, caching, file-upload, progress

Django文件上传进度过程json请求得到空响应

***视图.py***

```
def upload_progress(request):
    """
    A view to report back on upload progress.
    Return JSON object with information about the progress of an upload.

    Copied from:
    http://djangosnippets.org/snippets/678/

    See upload.py for file upload handler.
    """
    #import ipdb
    #ipdb.set_trace()
    progress_id = ''
    if 'X-Progress-ID' in request.GET:
        progress_id = request.GET['X-Progress-ID']
    elif 'X-Progress-ID' in request.META:
        progress_id = request.META['X-Progress-ID']
    if progress_id:
        from django.utils import simplejson
        cache_key = "%s_%s" % (request.META['REMOTE_ADDR'], progress_id)
        data = cache.get(cache_key)

        return HttpResponse(simplejson.dumps(data)) 
```

***UploadProgressCachedHandler.py***

```
 from django.core.files.uploadhandler import FileUploadHandler
    from django.core.cache import cache

    class UploadProgressCachedHandler(FileUploadHandler):
        """
        Tracks progress for file uploads.
        The http post request must contain a header or query parameter, 'X-Progress-ID'
        which should contain a unique string to identify the upload to be tracked.

        Copied from:
        http://djangosnippets.org/snippets/678/

        See views.py for upload_progress function...
        """

        def __init__(self, request=None):
            super(UploadProgressCachedHandler, self).__init__(request)
            self.progress_id = None
            self.cache_key = None

        def handle_raw_input(self, input_data, META, content_length, boundary, encoding=None):
            self.content_length = content_length
            if 'X-Progress-ID' in self.request.GET :
                self.progress_id = self.request.GET['X-Progress-ID']
            elif 'X-Progress-ID' in self.request.META:
                self.progress_id = self.request.META['X-Progress-ID']
            if self.progress_id:
                self.cache_key = "%s_%s" % (self.request.META['REMOTE_ADDR'], self.progress_id )
                cache.set(self.cache_key, {
                    'length': self.content_length,
                    'uploaded' : 0
                })

        def new_file(self, field_name, file_name, content_type, content_length, charset=None):
            pass

        def receive_data_chunk(self, raw_data, start):
            if self.cache_key:
                data = cache.get(self.cache_key)
                data['uploaded'] += self.chunk_size
                cache.set(self.cache_key, data)
                #cache.set(self.cache_key, 5000)
            return raw_data

        def file_complete(self, file_size):
            pass

        def upload_complete(self):
            if self.cache_key:
                cache.delete(self.cache_key) 
```

我正在使用 uploadProgressCacheHandler 设置缓存。但是当尝试通过 json 请求检索时。`data`返回`None`的对象。'cache_key' 正在正确生成。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T17:11:25.433

我猜您正在尝试在流已经达到时发出 JSON 请求`upload_complete`。此时`cache_key`已从缓存中删除（这就是它为空的原因）。

你在使用 Django 开发服务器吗？我认为这个内置服务器一次只允许处理一个请求，这在您的情况下意味着首先完成上传并处理 JSON 请求。您可以尝试使用另一台能够处理多个请求的服务器（例如：Apache）。

# android - 如何以自主的方式将数据从 SQL Server 接收到 Android 应用程序？

> ID：12156209
> 
> 赞同：0
> 
> 时间：2012-08-28T09:18:11.657
> 
> 标签：android, sql-server, database, web-services, auto-update

我创建了一个 Web 服务，它查询 SQL Server，检索多个表。我在 Android 应用程序中使用 KSoap2 包使用此 Web 服务，并且我想维护 SQL Server 上的表和 Android 应用程序上的表。SQL Server 中的许多表随着时间的推移保持不变，但其他一些表经常更改。我需要一个自动机制来更新 Android 应用程序上的表，在服务器的倡议下。我想我需要一个Android应用程序上的套接字，用于监听从SQL Server传输的信号，其含义是“某些表中的数据发生了变化”。因此，我可以使用 Web 服务调用来检索新数据。这可能吗？有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:33:10.980

您的问题的答案是[Android Service 类](http://developer.android.com/reference/android/app/Service.html)。它可以位于程序后面并监听您的 SQL 服务器上发生的变化并在 SQLite 数据库（或您拥有的任何东西）中更新它

# mysql - 生成 MySQL 数据库副本的最快方法

> ID：12156214
> 
> 赞同：1
> 
> 时间：2012-08-28T09:18:31.337
> 
> 标签：mysql, replicate

我们有一个非常大的数据库，我们需要偶尔在我们的 dev+staging 机器上进行复制。

目前我们使用mysqldump，然后使用“mysql -u xx -p dbname < dumpscript.sql”导入数据库脚本

如果不需要 2 天就可以完成！

是否可以简单地将整个数据库作为文件从一台服务器复制到另一台服务器并跳过整个导出/导入废话？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:21:40.743

有几个解决方案：

*   有一个单独的复制从站，您可以随时停止并进行文件级备份
*   如果您使用 innodb 引擎 - 您可以获取[文件系统级快照](http://www.mysqlperformanceblog.com/2006/08/21/using-lvm-for-mysql-backup-and-replication-setup/)[例如使用 lvm]，然后将文件复制到您的测试环境
*   如果您有大量表/数据库 - 您可以并行转储和恢复过程以加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T15:03:35.303

我在哪里可以运行脚本、访问源和目标以及有足够的空间为任务准备数据有很多限制。

我从托管服务提供商处获得了我的压缩数据库转储。
我将解压缩的命令拆分，以便`INSERT INTO`将行放入一个文件中，而所有其他行放入第二个文件中。

然后我从第二个创建数据库结构。
我将`INSERT INTO`语句转换为与表相关的 CSV 文件。
最后，我并行上传 csv 文件（最多同时上传 50 个表），这样可以在 3 小时内克隆一个 130GB 的文本文件转储，而不是使用逐条语句方法时需要 17 小时。

在 3 小时内，我包括：

*   复制结束（10 分钟），
*   健全性检查（10 分钟）和
*   日志过滤（10 分钟），因为日志条目只需要来自最近一学年。

远程压缩文件的大小在 7GB 到 13GB 之间，通过 40MBps 的线路传输。
通过 40MBps 线路上传到远程服务器。

如果你的mysql服务器是本地的，上传速度会更快。

我利用 scp、gzip、zgrep、sed、awk、ps、mysqlimport、mysql 和其他一些实用程序来加速解压缩和过滤（pv、rg、pigz）（如果有）。

如果我可以直接访问数据库服务器，那么具有文件夹级别快照功能的 LVM 将是首选解决方案，它的速度仅受媒体复制速度的限制。

# html - 在标题的每一行周围添加均匀的填充？

> ID：12156215
> 
> 赞同：1
> 
> 时间：2012-08-28T09:18:38.153
> 
> 标签：html, css, padding

我正在制作一个新网站，其中标题周围有背景和一点填充。

这是一个响应式网站，因此在某些州，标题会分成多行，导致它们在第一行的右侧和第二行的左侧丢失填充。我正在使用 display:inline 因为需要在每一行周围调整填充。

断线时有什么方法可以保持填充？

示例：http: [//jsfiddle.net/gmW5X/](http://jsfiddle.net/gmW5X/)

*在引入*之后和之前*缺少*填充...

这不需要缩小到旧的 ie，因为问题只出现在主要针对 iphone 的移动 css 上。但是，我非常不想改变太多的 html ：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:24:15.087

我没有看到另一种解决方案，但将每个单词都包含在跨度中... [http://jsfiddle.net/gmW5X/4](http://jsfiddle.net/gmW5X/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:25:16.367

```
display: inline-block; 
```

做的伎俩。

[jsFiddle](http://jsfiddle.net/gmW5X/5/)

# mysql - DQL innerJoin 查询等效

> ID：12156221
> 
> 赞同：0
> 
> 时间：2012-08-28T09:18:50.620
> 
> 标签：mysql, doctrine-orm, inner-join

我有以下代码在 phpMyAdmin 上正常工作：

```
select testers.department from testers
inner join request_details
on testers.id = request_details.test_id
where request_details.request_id = '12345' 
```

我尝试将其转换`DQL`为如下：

```
$query =  Doctrine_Query::create()
->select('t.department')
->from('testers t, request_details r')
->innerJoin('t.id r')
->where('t.id = r.tester_id')
->andWhere('r.request_id = ?', 12345); 
```

但是，a`var_dump()`对保存查询结果的变量返回`NULL`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:27:21.520

您使用的是哪个 Doctrine 版本，因为在 Doctrine2 中您应该使用 QueryBuilder 类，并且您应该使用类名和属性，而不是 DQL 中的表名和字段。因此，您应该加入类字段名称，而不是表字段名称。

```
innerJoin('t.request_details', 'r') // where request_details is a propery on Tester 
```

此外，您不需要连接它们的位置 (where(t.id = r.tester_id))，这是由 Doctrine 管理的，并且只要实体正确映射就可以工作。

你也不需要 from 部分中的 request_details r，Doctrine 也会处理这个问题。

此外，在 from 中使用类名，而不是表名。

**编辑**（在getResults（）之前忘记了getQuery（））：最后你的查询看起来像这样：

```
$queryBuilder = EntityManager::create(//em options)->createQueryBuilder();
$queryBuilder->select('t.department')
             ->from('Tester', 't')
             ->innerJoin('t.request_details', 'r') // request details is a propery on Tester, that maps to RequestDetails
             ->where('r.request_id = ?1')
             ->setParameter(1, 123); 
```

Doctrine 将负责将其转换为 SQL 并加入该事物。最后，您还需要获取这些东西：

```
$departments = $queryBuilder->getQuery()->getResult(); 
```

编辑：对于学说 1，这样的事情应该有效：

```
$q = Doctrine_Query::create()
     ->select('t.department')
     ->from('Tester t')
     ->innerJoin('t.request_details r') // request details is a propery on Tester, that maps to RequestDetails
     ->where('r.request_id = ?', 123);
$depts = $q->fetchArray(); 
```

我对 Doctrine 1 不是很熟悉，因此请查看以下内容以获取更多信息： [http ://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/dql-doctrine-query-language .html](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/dql-doctrine-query-language.html)

# spring - 在 Spring Security 3.0.x 中使用 SpringSec 2.0.x Authentication 对象

> ID：12156231
> 
> 赞同：0
> 
> 时间：2012-08-28T09:19:44.250
> 
> 标签：spring, spring-security

我有针对 Spring Security 2.0.4 编写的遗留服务，它消耗`org.springframework.security.Authentication`对象。

现在我将它与针对 Spring Security 3 编写的较新项目集成，并且我正在实现`org.springframework.security.authentication.AuthenticationProvider`哪个消耗（在身份验证方法中）**`org.springframework.security.core.Authentication`**，因此我无法将此对象提供给遗留代码（请注意，身份验证对象现在驻留在不同的包中）。

我阅读了迁移指南，但没有发现任何关于这个问题的有用信息。任何想法如何解决这个问题？

# html - Firefox上的HTML“选择”位置？

> ID：12156235
> 
> 赞同：0
> 
> 时间：2012-08-28T09:19:55.217
> 
> 标签：html, css, firefox

我的网站上有一个选择。具有以下内容：

```
...
<select name="opening-form-gender" id="opening-form-gender">
    <option value="f">Female</option>
    <option value="e">Male</option>
</select>
... 
```

CSS：

```
#opening-form {
  background-image: url('../img/opening-form-bg.png');
  background-repeat: no-repeat;
  height: 139px;
  margin: 40px auto;
  padding: 20px;
}
#opening-form p {
  font-family: Georgia, "Times New Roman", Times, serif;
  font-size: 14px;
  color:#666666;
}
#opening-form strong {
    font-size:20px;
}

#opening-form .submit {
  background-image: url('../img/red-submit.png');
  border: none;
  width: 115px;
  height: 31px;
  line-height: 28px;
}
#opening-form .submit:hover {
  background-image: url('../img/red-submit-hover.png');
} 
```

所以，它有一个风格问题。我该如何解决？

这是 jsfiddle 页面：

[http://jsfiddle.net/HLEcS/](http://jsfiddle.net/HLEcS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:44:58.550

尝试类似的东西；

```
select{
  width: 175px;
  border: 1px solid #e7e7e7;
  background-image: url('../img/input-bg.png');
  font-weight: regular;
  font-size:12px;
  color: #666666;
  padding: 7px;
} 
```

***[这](http://jsfiddle.net/blasteralfred/HLEcS/2/)***是修改后的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:34:58.903

在 WebKit（Chrome、Safari）上，您可以禁用原生样式并通过应用属性来自定义它：

`-webkit-appearance: none;`

不幸的是，这在 Gecko (Firefox) 中不起作用。见[https://bugzilla.mozilla.org/show_bug.cgi?id=649849](https://bugzilla.mozilla.org/show_bug.cgi?id=649849)

Firefox 上的虚线边框是由默认属性引起的`outline`。请参阅[如何删除 Firefox 在按钮和链接上的虚线轮廓？](https://stackoverflow.com/questions/71074/how-to-remove-firefoxs-dotted-outline-on-buttons-as-well-as-links)

对齐应该通过将 a`vertical-align: top`应用于父级来修复。请提供完整的 HTML 或 Fiddle 进行测试。

# ruby - 字符串操作在 Sinatra / ERB 中不起作用

> ID：12156238
> 
> 赞同：0
> 
> 时间：2012-08-28T09:20:03.423
> 
> 标签：ruby, string, sinatra, erb

试图在 .erb 页面中截断 Ruby/Sinatra 中的字符串。我一直在尝试以下变体：

```
<%= @caption_str.truncate(20) %>
<%= @caption_str[0..20] %> 
```

但是不断收到以下错误消息：

```
NoMethodError at /392471267473009
undefined method `[]' for nil:NilClass 
```

或者

```
NoMethodError at /392471267473009
undefined method `truncate' for nil:NilClass 
```

如果我不截断字符串，一切都很好，即

```
<%= @caption_str %> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:38:14.233

```
NoMethodError at /392471267473009
undefined method `[]' for nil:NilClass 
```

或者

```
NoMethodError at /392471267473009
undefined method `truncate' for nil:NilClass 
```

这些错误的描述性足够强。

他们传达`no [] or truncate method defined`了**nil:NilClass**，在这种情况下，它原来是你的 `@caption_str`对象。

检查是否`@caption_str`不是`nil`，然后执行这些操作。什么时候`@caption_str`是**nil**，你会得到同样的错误。

**由于 Ruby 是一种动态编程语言，我们往往会忘记值为零的边缘情况。当出现类似情况时，请始终包括检查。**

# git - 关于 Git 的一些问题

> ID：12156241
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:20:16.890
> 
> 标签：git

我正在使用 github，想了解一些具体操作。

如何删除：

1.  使用单个命令在当前分支中的所有文件和文件夹？
2.  当前分支的所有历史？
3.  当前分支的所有文件夹和子文件夹中的文件夹“extra/”和文件名“config-empty.txt”？
4.  指定文件或文件夹的历史记录？
5.  名称中有感叹号的文件夹？像“！杰里米/”

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:51:24.100

你至少可以对你的问题进行排序，一个块中的历史问题和另一个块中的删除问题。

因此，对于问题 1、3、5，我会说，从您的回购的根源：

`rm -rf *`然后`git add -u *`或代替`git rm -rf *`然后提交，以删除所有内容

或删除您想要的内容，就像您在首选操作系统中所做的那样，然后`git add -u *`（更新）并提交

（对于 3 和 5，具体问题取决于您的操作系统/文件系统，而不是 Git，我相信您可以自己找到答案）

至于2和4，你为什么要删除历史？如果您删除任何内容，您将无法检索它（我的意思是，如果您迁移代码，假设您想了解过去发生的事情）。我想的唯一原因是您添加了错误的代码，并且您想回到犯错之前的时间。在这种情况下，从您当天的点开始分支并从该点开始工作。

如果您决定删除一些历史记录，您可能可以在 repo/local 副本的根目录中挖掘 .git 文件夹并手动删除数据，但我（而且我可能不是唯一一个）强烈不推荐它。

# javascript - 滚动 highcharts 图表

> ID：12156245
> 
> 赞同：12
> 
> 时间：2012-08-28T09:20:31.463
> 
> 标签：javascript, ios, cordova, uiwebview, highcharts

这是我的问题：我正在使用 phonegap 框架开发一个混合应用程序，并且我需要这个应用程序具有我决定使用 highcharts 库的图表。

问题是我在触摸图表后似乎无法滚动（至少在触摸图像的选定部分时）。

![ios图](../Images/e51a7c54f1d65fbac5754cc867c0a93b.png)

我想要做的是防止图表发生任何事件并显示一个简单的图表，其中任何内容都被突出显示并且即使我在图表上执行它也能够滚动。

代码：

```
chart1 = new Highcharts.Chart({
  chart: {
    renderTo: 'containerBar',
    animation: false,
    type: 'bar',
    events: {
      click: function(event){
        return false;
      }
    }
  },
  scrollbar: {
    enabled: true
  },
  title: {
    text: 'Fruit Consumption'
  },
  plotOptions: {
    bar: {
      events: {
        click: function(event){
          return false;
        },
        mouseOver: function(event){
          return false;           
        },
        legendItemClick: function () {
          return false;
        }
      },
      states: {
        hover: function(){
          alert("Allow");
        }
      }
    }
  },
  events: {
    click: function(e) {
      alert("Click");
    }  
  },
  xAxis: {
    categories: ['Apples', 'Bananas', 'Oranges']
  },
  yAxis: {
    title: {
      text: 'Fruit eaten'
    }
  },
  tooltip: {
    enabled: false
  },
  series: [{
    name: 'Jane',
    data: [1, 3, 4]
  }, {
    name: 'John',
    data: [5, 7, 3]
  }]
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T11:00:28.960

试试这个[链接](https://gist.github.com/2994906)....只需制作一个单独的 javascript 文件，复制粘贴代码并包含该文件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-29T18:48:15.720

为了跟进阅读此问题及其答案的人们，滚动和 Highcharts 可视化的问题已在版本 3.0.1 (2013-04-09) 中得到解决。Highstock 是 Highcharts 的兄弟姐妹，在 1.3.1 版 (2013-04-09) 中收到了类似的更新。

> 添加了新选项 tooltip.followTouchMove。如果为真，则可以通过在图表上拖动单个手指来移动工具提示，就像在 Highcharts 2 中一样。如果为假，则拖动单个手指会被图表忽略，并导致整个页面滚动。这仅在未启用缩放时适用。

在 Highcharts 版本 4.1.0 (2015-02-16) 中进行了进一步的增强：

> 使 tooltip.followTouchMove 默认为真，同时允许页面滚动。

有关完整的 Highcharts 更改日志，请参阅[http://www.highcharts.com/documentation/changelog](http://www.highcharts.com/documentation/changelog)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T16:25:21.657

问题是由 Highcharts 捕获所有触摸事件并让它们什么都不做引起的。我基本上只是通过在移动设备上的图表区域上覆盖一个 div 并防止这些事件到达 highcharts 元素来解决这个问题（因此它们可以自由触发默认行为，即页面滚动）。我使用了这个 JS（假设你也在使用 JQuery 或等效的）：

```
$('.highcharts-container').each(function() {
  var dragHandle;
  dragHandle = $('<div class="chart-drag-handle">');
  $(this).append(dragHandle);
  dragHandle.on('touchstart', function(e) {
    e.stopPropagation();
  });
  dragHandle.on('touchmove', function(e) {
    e.stopPropagation();
  });
  dragHandle.on('touchend', function(e) {
    e.stopPropagation();
  });
  dragHandle.on('touchcancel', function(e) {
    e.stopPropagation();
  });
}); 
```

添加的元素需要设置样式以覆盖图表，我是这样做的：

```
.highcharts-container .chart-drag-handle {
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0;
  z-index: 100;
} 
```

# php - 在 Magento 中应用任何折扣后，获取订单商品的单价

> ID：12156247
> 
> 赞同：0
> 
> 时间：2012-08-28T09:20:43.320
> 
> 标签：php, magento

是否可以从已应用折扣的订单中获取商品的单价？

例如，订单号 #12345 包含 4 个产品，每个产品的正常单价为 3.00 英镑。应用折扣，每件商品减少 25%。

然后我怎样才能从每个订单中获取该成本`$order->getAllItems()`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T09:59:44.633

你可以这样做

```
foreach($items as $item)
{
  $productid = $item->getProductId();     
  $products = Mage::getModel('catalog/product')->load($productid);
} 
```

通过这种方式，您可以获得订购的商品单价。

# actionscript-3 - 如何制作 TextField 多行？

> ID：12156252
> 
> 赞同：4
> 
> 时间：2012-08-28T09:20:54.373
> 
> 标签：actionscript-3, textfield

我的字符串太长，无法放入我的 100px 容器中。如果需要，我想`TextField`自动制作多行。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:31:01.593

我想你要找的是`TextFieldAutoSize`.

```
var tf:TextField = new TextField();
tf.multiline = true;
tf.wordWrap = true;
tf.autoSize = TextFieldAutoSize.LEFT;
tf.text = yourLongStringVar; 
```

有关更多信息，请查看[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#autoSize)。

*编辑：添加自动换行和多行属性以保持宽度*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:27:14.230

您是否尝试过使用 TextField.multiline 或 .wordWrap？

```
var tf:TextField = new TextField();
tf.multiline = true;
tf.wordWrap = true;
// etc.. 
```

# java - 将参数从 Flex 传递到接受数据记录或参数映射的 Java 方法

> ID：12156255
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:03.313
> 
> 标签：java, actionscript-3, apache-flex, flex4.5

我开发了 java 程序，它将接受数据记录（函数参数）并将插入到数据库中。但是，我不知道如何将参数从 flex 传递给这个 Java 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:27:45.953

flex 和 java 之间有不同的通信方式。我建议您查看 BlazeDS 框架。有很多教程可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:37:48.023

请阅读[使用 RemoteObject 组件](http://help.adobe.com/en_US/flex/accessingdata/WS2db454920e96a9e51e63e3d11c0bf69084-7fda.html)

例如：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"> 
    <fx:Declarations> 
        <mx:RemoteObject 
            id="userRequest" 
            destination="ColdFusion" 
            source="flexapp.returnusers"> 

            <mx:method name="returnRecords" result="returnHandler(event)" 
                       fault="mx.controls.Alert.show(event.fault.faultString)"/> 
            <mx:method name="insertRecord" result="insertHandler()" 
                       fault="mx.controls.Alert.show(event.fault.faultString)"/> 
        </mx:RemoteObject> 
    </fx:Declarations> 

    <fx:Script> 
        <![CDATA[ 
            import mx.rpc.events.ResultEvent; 

            private function returnHandler(e:ResultEvent):void  
            { 
                dgUserRequest.dataProvider = e.result; 
            } 
            private function insertHandler():void  
            { 
                userRequest.returnRecords(); 
            } 
            private function clickHandler():void  
            { 
                userRequest.insertRecord(username.text, emailaddress.text); 
            }  
        ]]> 
    </fx:Script> 

    <mx:Form x="22" y="10" width="300"> 
        <mx:FormItem> 
            <s:Label text="Username" />     
            <s:TextInput id="username"/> 
        </mx:FormItem> 
        <mx:FormItem> 
            <s:Label text="Email Address" />     
            <s:TextInput id="emailaddress"/> 
        </mx:FormItem> 
        <s:Button label="Submit" click="clickHandler()"/> 
    </mx:Form> 

    <mx:DataGrid id="dgUserRequest" x="22" y="200"> 
        <mx:columns> 
            <mx:DataGridColumn headerText="User ID" dataField="userid"/> 
            <mx:DataGridColumn headerText="User Name" dataField="username"/> 
        </mx:columns> 
    </mx:DataGrid> 
</s:Application> 
```

在返回处理程序中，您收到 e:ResultEvent 并且 e.result 包含远程方法调用的结果。

为了

```
userRequest.returnRecords(); 
```

在Java方面将是

```
public List<User> returnRecords(); 
```

# xpath - 检索 xpath 以选择其父节点包含 java 脚本的节点

> ID：12156257
> 
> 赞同：1
> 
> 时间：2012-08-28T09:21:06.513
> 
> 标签：xpath

我想使用 xpath 检索位于另一个 div 内的 div 节点：

我的输入是：

```
 <div id="toolbar">

    <div class="linkTrail">
    <span class="trailLabel">You are here: </span>
    <a href="http://www.euromonitor.com/home">Home</a>
    <a href="http://www.euromonitor.com/solutions">Solutions</a>
    <a href="http://www.euromonitor.com/industries">Industries</a>
    <a href="http://www.euromonitor.com/home-care" class="last">Home Care</a>
    </div>
    <script type="text/javascript">var switchTo5x = false;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">  stLight.options({ publisher: 'c4fa7e97-6938-4efa-b3d0-b81551cc9ee3', tracking: 'google' });</script>
<div class="clear">
</div> 
```

我想要输出为：

```
<div class="linkTrail">
<span class="trailLabel">You are here: </span>
<a href="http://www.euromonitor.com/home">Home</a>
<a href="http://www.euromonitor.com/solutions">Solutions</a>
<a href="http://www.euromonitor.com/industries">Industries</a>
<a href="http://www.euromonitor.com/home-care" class="last">Home Care</a>
</div> 
```

我在 xpath 之后尝试了 xpath 来检索 linktrail div：

```
//div[@class='toolbar']/div 
```

但它给了我错误的输出：

```
<div class="linkTrail">
    <span class="trailLabel">You are here: </span>
    <a href="http://www.euromonitor.com/home">Home</a>
    <a href="http://www.euromonitor.com/solutions">Solutions</a>
    <a href="http://www.euromonitor.com/industries">Industries</a>
    <a href="http://www.euromonitor.com/home-care" class="last">Home Care</a>
    </div>
    <script type="text/javascript">var switchTo5x = false;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">  stLight.options({ publisher: 'c4fa7e97-6938-4efa-b3d0-b81551cc9ee3', tracking: 'google' });</script> 
```

可能是什么问题，是否由于父 div 包含脚本。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:51:21.097

**就这么简单**：

```
//div[@id='toolbar']/div[@class='linkTrail'] 
```

这将选择 any `div`，其`class`属性的字符串值是`"linkTrail"`并且是 a 的子属性，`div`其`id`属性具有字符串值`"toolbar"`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="//div[@id='toolbar']/div[@class='linkTrail']"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<div id="toolbar">
    <div class="linkTrail">
        <span class="trailLabel">You are here: </span>
        <a href="http://www.euromonitor.com/home">Home</a>
        <a href="http://www.euromonitor.com/solutions">Solutions</a>
        <a href="http://www.euromonitor.com/industries">Industries</a>
        <a href="http://www.euromonitor.com/home-care" class="last">Home Care</a>
    </div>
    <script type="text/javascript">var switchTo5x = false;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">  stLight.options({ publisher: 'c4fa7e97-6938-4efa-b3d0-b81551cc9ee3', tracking: 'google' });</script>
    <div class="clear"></div></div> 
```

**评估 Xpath 表达式，并将评估结果（所选节点）复制到输出**：

```
<div class="linkTrail">
   <span class="trailLabel">You are here: </span>
   <a href="http://www.euromonitor.com/home">Home</a>
   <a href="http://www.euromonitor.com/solutions">Solutions</a>
   <a href="http://www.euromonitor.com/industries">Industries</a>
   <a href="http://www.euromonitor.com/home-care" class="last">Home Care</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:54:13.633

在您的 XPath 中，您指定`@class` 为“工具栏”，但它是`@id`具有值的。如果我调整表达式，我会得到你想要的输出加上“清晰”的 div。

问题可能是包含在与条件匹配的`div`另一个中。`div`

# iphone - 使用带有 ASIHTTPRequest 的 iOS 框架与 ASIHTTPRequest 集成在项目中

> ID：12156259
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:10.943
> 
> 标签：iphone, objective-c, ios

我创建了使用 ASIHTTPRequest 的框架。

比我将此框架添加到我已经使用 ASIHTTPRequest 的项目中。我得到了

> ld：重复符号...

在这种情况下正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:28:29.283

目标 C 没有命名空间支持，它会猜测使用哪个类并获得未确定的结果。另一方面，您不应该从您的框架中公开内部标头，不确定这是否是原因。

无论哪种方式，您都必须选择一个选项或重命名所有私有 ASIHttpRequest 类以避免冲突。

如果您知道依赖项可用，那么只需从依赖框架中使用它。在大多数情况下，这只是一个构建问题而不是交易杀手。

# jquery - jQuery 'Dropdown' 的 CSS 帮助

> ID：12156262
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:17.733
> 
> 标签：jquery, css

我在这里准备了一个小提琴：http: [//jsfiddle.net/zakbx/4/](http://jsfiddle.net/zakbx/4/)

**HTML**

```
<!-- filters -->
<ul class="blog-detail-dropdown">
<li>Select category
<ul class="sub_menu" id="sub_menu_category2">
    <li id="entertainment" class="14">Entertainment</li>
    <li id="film" class="15">Film</li>
    <li id="food" class="18">Food</li>
    <li id="mums" class="17">Mums</li>
    <li id="sport" class="16">Sport</li>
</ul>
</li>
<li>Sort by Blogger
<ul class="sub_menu" id="sub_menu_blogger2">
    <li class="2">Joe Bloggs</li>
    <li class="6">Keith Patterson</li>
    <li class="3">Martin Carlin</li>
    <li class="4">MC Hammer</li>
</ul>
</li>
<li>Sort by Milestone
<ul class="sub_menu" id="sub_menu_milestone2">
    <li class="7">Stage 1<span class="value">stage-1</span></li>
    <li class="8">Stage 2<span class="value">stage-2</span></li>
    <li class="9">Stage 3<span class="value">stage-3</span></li>
    <li class="10">Stage 4<span class="value">stage-4</span></li>
    <li class="11">Stage 5<span class="value">stage-5</span></li>                         
</ul>
</li>
</ul> <!-- end filter section --> 
```

**jQuery**

```
$("ul.blog-detail-dropdown li").hover(function(){
    $(this).addClass("hover");
    $('ul:first',this).css('visibility', 'visible');
    }, function(){
        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');
    });​ 
```

**CSS**

```
/* 
    Level One
*/
ul.blog-detail-dropdown  { 
    position: relative;
    list-style: none;
    height: 58px;
    margin: 15px 0 150px 40px;

    *z-index: 999;

    *margin-left: -5px;
}

ul.blog-detail-dropdown li  { 
    height: 58px;
    padding: 5px 20px 0 20px;
    border: 1px solid #dedede;
    background: url('/images/filter-dropdown.png') #ffffff no-repeat 155px 26px;
    color: #555;
    font-weight: bold;
    line-height: 50px;
    text-decoration: none;
    display: block;
    width: 140px;
    font-size: 14px;
    cursor: pointer;
    zoom: 1;
}

ul.blog-detail-dropdown li:hover { 
    position: relative;
    background: url('images/filter-dropdown-hover.png') #555555 no-repeat 155px 26px; 
    color: #ffffff;
    border: 1px solid #000000;
}
/* 
    Level Two
*/
ul.blog-detail-dropdown ul  { 
    visibility: hidden;
    position: absolute;
    top: 64px;
    left: 0px;
    z-index: 999;
}

ul.blog-detail-dropdown ul li  { 
    font-weight: normal; 
    background: #ffffff; 
    color: #555555; 
    border-bottom: 1px solid #000000; 
    float: none;
}
/* IE 6 & 7 Needs Inline Block */

ul.blog-detail-dropdown ul li:hover  { 
    background: #cccccc;
    color: #555555;
}

ul.blog-detail-dropdown ul li span.value {
    display: none;
}​ 
```

我想做的只是将每个下拉部分分开，但想不出办法。

最重要的是，当其中一个子元素悬停时，会应用黑色边框，但由于底部已经有边框，最终看起来有点难看，如果有人可以帮助我处理这两个部分，那将很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:37:57.583

这是你要找的吗？

[http://jsfiddle.net/zakbx/27/](http://jsfiddle.net/zakbx/27/)

# ruby-on-rails - Ember.js 中 Ember 数据的无模式设计

> ID：12156264
> 
> 赞同：4
> 
> 时间：2012-08-28T09:21:24.613
> 
> 标签：ruby-on-rails, mongodb, ember.js, nosql

我们在 Rails 的 MongoDB 上拥有无模式数据库。我想知道如何使用这种无模式的 emberjs 数据设计来与这样的设计集成。

我找不到任何关于是否可以实现或是否有任何最佳实践的文档

谁能帮我这个 ？

编辑：问题是关于如何将 EmberJS 持久数据存储用于无模式 MongoDB Rails 后端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T17:39:54.370

下面的前两个链接应该会有所帮助。查看第一个链接如何设置**primaryKey: '_id'**以识别 mongodb **_id**，第二个链接显示如何使**active_model_serializer** gem 与**mongoid**一起使用，gem 是 ember-core 团队推荐用于使用 rails 和 ember-data 的 gem：

[https://github.com/dagda1/workoutzenith/tree/master/app/models](https://github.com/dagda1/workoutzenith/tree/master/app/models)

[https://github.com/dagda1/workoutzenith/blob/master/config/initializers/active_model_serializer_mongoid_initializer.rb](https://github.com/dagda1/workoutzenith/blob/master/config/initializers/active_model_serializer_mongoid_initializer.rb)

如果您遇到嵌入式 mongodb 文档和 ember-data 的问题，这应该可以解决：

[存储为单独对象的 Ember 数据嵌入对象](https://stackoverflow.com/questions/12068373/ember-data-embedded-objects-stored-as-separate-objects)

阅读下面的链接并检查 github 项目：

[http://tardate.blogspot.co.uk/2012/03/rails-ember-mongodb-bootstrap.html](http://tardate.blogspot.co.uk/2012/03/rails-ember-mongodb-bootstrap.html)

[https://github.com/evendis/rails-ember-mongo-bootstrap-demo](https://github.com/evendis/rails-ember-mongo-bootstrap-demo)

这不是使用 Rails，而是使用 nodejs、mongodb 和 emberjs。mongodb + emberjs 可能对你仍然有用

[https://github.com/abelaska/nodejs-emberjs-mongodb](https://github.com/abelaska/nodejs-emberjs-mongodb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:48:16.853

对于如何将 Ember 应用到像 MongoDB 这样的 Rails 后端数据库存储具有未知字段的任何深度的文档的场景，我仍然没有明确且可扩展的解决方案。

有一些规范化的方法，但仍然使用现有的 REST/REST+DS，我们可能需要编写大量代码来序列化和反序列化。

看看讨论：

[https://github.com/emberjs/data/issues/53#issuecomment-9196555](https://github.com/emberjs/data/issues/53#issuecomment-9196555) https://github.com/emberjs/data/issues/100

如果有人找到更好的选择，请与我分享。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-28T09:25:54.373

只需点击链接[http://robert-reiz.com/2012/03/05/rails-mongodb-tutorial/](http://robert-reiz.com/2012/03/05/rails-mongodb-tutorial/) , [http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)

# java - 爪哇摇摆。ScrollPane 中的 TextField 不完全可见

> ID：12156268
> 
> 赞同：2
> 
> 时间：2012-08-28T09:21:32.383
> 
> 标签：java, swing, jscrollpane, jtextfield, jtextarea

我有你在图片中看到的结构。

对于这两个面板，都使用了 GridBagLayout。问题是滚动窗格内的文本字段并不完全可见。父面板仅会拉伸以使按钮可见，但当滚动条出现时，它只会与文本字段重叠。有没有简单的解决方案来解决这个问题（不想处理设置自定义/首选/最小高度）？

面板结构：

![在此处输入图像描述](../Images/432c7c74be32be7470213263ff819155.png)

问题 ：

![在此处输入图像描述](../Images/ba5b5e3d0c3efe60739d3265be2fa971.png)

好的，这是一个 SSCCE

```
public class Main {
JFrame frame;
private JPanel mainPanel;
private JButton button1;
private JButton button2;
private JTextField someTextTextField;

public static void main(String[] args) {
    Main main = new Main();
    main.show();
}

private void show() {
    frame = new JFrame("Frame");
    frame.setContentPane(mainPanel);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();

    frame.setVisible(true);
}

{

    $$$setupUI$$$();
}

/**
 * Method generated by IntelliJ IDEA GUI Designer
 * >>> IMPORTANT!! <<<
 * DO NOT edit this method OR call it in your code!
 *
 * @noinspection ALL
 */
private void $$$setupUI$$$() {
    mainPanel = new JPanel();
    mainPanel.setLayout(new GridBagLayout());
    mainPanel.setPreferredSize(new Dimension(209, 30));
    final JPanel panel1 = new JPanel();
    panel1.setLayout(new GridBagLayout());
    GridBagConstraints gbc;
    gbc = new GridBagConstraints();
    gbc.gridx = 1;
    gbc.gridy = 0;
    gbc.weightx = 0.5;
    gbc.weighty = 1.0;
    gbc.fill = GridBagConstraints.BOTH;
    mainPanel.add(panel1, gbc);
    button1 = new JButton();
    button1.setText("Button");
    gbc = new GridBagConstraints();
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.fill = GridBagConstraints.HORIZONTAL;
    panel1.add(button1, gbc);
    button2 = new JButton();
    button2.setText("Button");
    gbc = new GridBagConstraints();
    gbc.gridx = 1;
    gbc.gridy = 0;
    gbc.fill = GridBagConstraints.HORIZONTAL;
    panel1.add(button2, gbc);
    final JScrollPane scrollPane1 = new JScrollPane();
    scrollPane1.setAlignmentX(0.0f);
    gbc = new GridBagConstraints();
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.weightx = 0.5;
    gbc.weighty = 1.0;
    gbc.fill = GridBagConstraints.BOTH;
    mainPanel.add(scrollPane1, gbc);
    someTextTextField = new JTextField();
    someTextTextField.setText("some text");
    scrollPane1.setViewportView(someTextTextField);
}

/**
 * @noinspection ALL
 */
public JComponent $$$getRootComponent$$$() {
    return mainPanel;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:15:06.407

尝试使用 a`JTextArea`而不是 a `JTextField`。如果您不想设置自定义/首选/最小尺寸，您可以使用该`JTextArea.setRows(int rows)`方法。我希望这会有所帮助。

# mysql - 如何向 MySQL 数据库提交时间戳

> ID：12156269
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:31.633
> 
> 标签：mysql, timestamp

我有一个 MySQL 表，它会自动创建一个 ISO 8601 时间戳到其中一个字段中。这样做是因为我将 phpMyAdmin 的默认值设置为 TIMESTAMP。

当我更新字段时，我想向另一个字段添加另一个时间戳。显然我不能使用默认选项来做到这一点。是否有将当前时间戳添加到字段的 SQL 命令？我已经快速阅读了 MySQL 网站，但我找不到解决方法......

我还查看了是否有一种通过 PHP 生成 ISO8601 时间戳的方法，但我想不出一种将 PHP/unix 时间戳转换为 ISO8601 的方法。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:31:42.497

*MySQL 可以自动将每个表中的单个* 类型列初始化和/或更新为`TIMESTAMP`当前时间。如[自动初始化和更新中](http://dev.mysql.com/doc/en/timestamp-initialization.html)所述：`INSERT``UPDATE`[`TIMESTAMP`](http://dev.mysql.com/doc/en/timestamp-initialization.html)

> 表中的一[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)列可以将当前时间戳作为初始化该列的默认值，作为自动更新值，或两者兼而有之。不可能将当前时间戳设为一列的默认值，而将另一列的自动更新值设为默认值。

在您的情况下，因为您希望单独的列来保存记录的初始化和更新时间，所以您需要明确设置这些列中的一个（或两个）；可以使用以下函数将日期/时间列显式设置为 SQL 中的当前日期/时间[`NOW()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_now)：

```
INSERT INTO my_table (created) VALUES (NOW());
UPDATE my_table SET updated = NOW(); 
```

甚至可以使用触发器来实现 MySQL 本身不提供的自动行为：

```
CREATE TRIGGER set_init_time AFTER INSERT ON my_table FOR EACH ROW
  SET NEW.created = NOW();

CREATE TRIGGER set_updt_time AFTER UPDATE ON my_table FOR EACH ROW
  SET NEW.updated = NOW(); 
```

# makefile - 如何依赖先前 make 调用的目标

> ID：12156276
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:43.003
> 
> 标签：makefile, gnu-make

我有一个 lib（比如`mylib`）和两个可执行文件，其中一个（比如`exe1`）依赖于 lib。在文件系统中，我有：

```
src
   Makefile
   ...
   lib
     mylib
       Makefile
       ...
   exe1
     Makefile
     ...
   exe2
     Makefile
     ... 
```

并通过`make`在`src`dir 中启动所有内容。

`Makefile`在源代码中：

```
EXE=exe1 exe2
LIB=mylib

all: $(LIB) $(EXE)

.PHONY: $(LIB) $(EXE)

$(LIB):
    $(MAKE) -C lib/$@

$(EXE): $(LIB)
    $(MAKE) -C $@ 
```

例如，`Makefile`对于`exe1`是：

```
...
all: exe1 copy

exe1: exe1.o
    $(CC) $(CFLAGS) $(OBJ) $(LDFLAGS) -o $@

%.o: %.c
    $(CC) $(CFLAGS) -c $< -o $@
... 
```

我的问题是，如果我更改`mylib`dir 中的文件，则库会正确重建，但`exe1`显然没有......有没有办法让`make`该`exe1`目标依赖于在先前调用中指定的目标（mylib），`make`而无需指定依赖于`mylib`' s 文件在`exe1` `Makefile`?

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:46:56.103

@tripleee 和 @JackKelly（诅咒他的名字）是对的，这不是一个健康的 makefile 系统。

你可以通过改变得到你想要的东西`src/Makefile`：

```
EXE=exe1 exe2
LIB=lib/mylib/mylib

all: $(LIB) $(EXE)

.PHONY: $(EXE)

$(LIB):
    $(MAKE) -C lib/mylib

exe1: $(LIB)

$(EXE):
    $(MAKE) -C $@ 
```

并进行更改`exe1/makefile`以使其*始终*重建`exe1`：

```
.PHONY: exe1 
```

这仍然有很多问题，但至少它会正确重建`lib/mylib/mylib`并且`src/exe1/exe1`当你运行 Make in 时`src`。（如果你运行 Make in它将**不起作用**`src/exe1/`。）

# android - 在 Google 地图上使用大量景点的最佳方式

> ID：12156278
> 
> 赞同：3
> 
> 时间：2012-08-28T09:21:49.620
> 
> 标签：android, google-maps

我有一个包含很多景点信息的服务器。（长、纬度、图片网址、名称等）大约 100.000 项。

1.  最好的方法是：将其加载/下载到 Android 中，以及
2.  在 Google 地图上显示它们的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:35:32.457

对于如此大量的标记，我建议您尝试一下 KML 图层。

使用 Google 地图，您可以让 google 为您呈现所有标记（默认值：[KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)），或者您可以依赖[GeoXML3](http://code.google.com/p/geoxml3/ "地理XML3")进行客户端解析。

这同样适用于 Android 谷歌地图。可以使用以下方法轻松添加图层：[How to draw a path on a map using kml file?](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

# c++ - C++ 从另一个函数调用一个函数

> ID：12156279
> 
> 赞同：0
> 
> 时间：2012-08-28T09:21:52.660
> 
> 标签：c++, custom-action

我有一个 C++ 自定义操作项目。我有两个功能，`RegProductName`和`GetProductName`。

我打电话`RegProductName`，它有三种可能的结果。我在 if 语句中有这些，如果它是结果 1 或结果 2，那么我调用我的第二个函数`GetProductName`，但我似乎无法让它工作。谁能给我一个从另一个函数调用一个函数的例子吗？

```
extern "C" UINT __stdcall RegProductName(MSIHANDLE hInstall)
{
AssertSz(FALSE, "debug here");
DebugBreak();

HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
char szProductName[MAX_PATH];

hr = WcaInitialize(hInstall, "RegProductName");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

strcpy(szProductName, Orc_Get_Product_Name());

if(szProductName == "ORCHESTRATOR")
{
    GetProductName();
} 
else if (szProductName == "CORAL")
{
    GetProductName();
}
else 
{
    MsiSetProperty(hInstall, "PRODUCTNAME",  szProductName);
}

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

错误是“当我将鼠标悬停在函数调用中时，参数太少`GetProductName();`

```
extern "C" UINT __stdcall GetProductName(MSIHANDLE hInstall)
{

HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
DWORD Ret;
CHAR *Section = "General";
CHAR szBuffer[MAX_PATH];
CHAR szProductIniFile[MAX_PATH];
char lpszString[MAX_PATH];
int lplValue;

hr = WcaInitialize(hInstall, "GetProductName");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

TCHAR* szValueBuf = NULL;
DWORD cchValueBuf = 0;
UINT uiStat =  MsiGetProperty(hInstall, TEXT("TEMPFOLDER"), TEXT(""), &cchValueBuf);

if (ERROR_MORE_DATA == uiStat)
{
    ++cchValueBuf; 
    szValueBuf = new TCHAR[cchValueBuf];
    if (szValueBuf)
    {
        uiStat = MsiGetProperty(hInstall, TEXT("TEMPFOLDER"), szValueBuf, &cchValueBuf);
    }
}
if (ERROR_SUCCESS != uiStat)
{
    if (szValueBuf != NULL) 
        delete[] szValueBuf;
    return ERROR_INSTALL_FAILURE;
}

strcpy(szProductIniFile,szValueBuf);

Ret = strlen(szProductIniFile);
if(szProductIniFile[Ret-1] != '\\')
   strcat(szProductIniFile,"\\");

strcat(szProductIniFile, "Product.ini");

Ret = GetPrivateProfileString(Section,          // Section Title [General]
                              "PRODUCT_NAME",   // Entry
                              "Orchestrator",   // Default Value
                              szBuffer,         // Address of buffer to read to
                              MAX_PATH,         // Length of buffer
                              szProductIniFile); // .ini file name

if (strlen(szBuffer) == 0)
    strcpy(szBuffer, "ORCHESTRATOR");

if (strlen(szBuffer) >= 3 && (stricmp(szBuffer+strlen(szBuffer)-3,"DEM") == 0))
    lplValue = 1;
else
    lplValue = 0;

MsiSetProperty(hInstall, "PRODUCTNAME",  szBuffer);

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:31:08.980

这不比较字符串内容：

```
if(szProductName == "ORCHESTRATOR") 
```

使用`strcmp()`或使用`std::string`and `==`：

```
if(szProductName == std::string("ORCHESTRATOR")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:31:28.173

你的`GetProductName()`函数有一个参数`MSIHANDLE hInstall`。你需要在调用它时提供它。例如，如果您只想使用与调用相同的句柄来调用它`RegProductName()`：

```
GetProductName(hInstall); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T09:32:54.447

您的 GetProductName 如下所示：

```
extern "C" UINT __stdcall GetProductName(MSIHANDLE hInstall)
                                         \________________/
                                            The Argument 
```

所以它需要 1 个参数，而你在没有参数的情况下调用它：

```
getProductName( );
               ^
               |
            nothing is being passed here 
```

因此你得到的错误。根据您的代码，您可能应该通过`hInstall`那里：

```
getProductName( hInstall ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T09:32:20.273

`GetProductName`需要一个类型的参数，`MSIHANDLE`而您在没有任何参数的情况下调用它。试试吧

```
GetProductName(hInstall); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T09:34:04.983

`GetProductName`定义为`GetProductName(MSIHANDLE hInstall)`，这意味着您必须将相关的 MSIHANDLE 作为参数传递。这正是你得到的错误。但是你正在做`szProductName == "ORCHESTRATOR"`- 这不是你在 C 中比较字符串的方式。你似乎缺乏关于 C 的基本知识。你不应该用 C 或 C++ 编写。

# java - 其中哪个是我的 JDK 路径，哪个是 JAVA_HOME？

> ID：12156280
> 
> 赞同：5
> 
> 时间：2012-08-28T09:22:00.553
> 
> 标签：java, sts-springsourcetoolsuite, java-home, linux-mint

我刚刚安装了 Linux Mint 并尝试配置 SpringSource 工具套件，这需要您将其定向到系统“JDK 路径”。虽然我还没有在这个系统上明确下载/安装 Java，但当我运行更新管理器时，我确实看到安装了 Open JDK，并在下面找到了几个目录`/usr/lib/jvm`（见下面的截图）。我的问题是：

*   Spring Tool Suite 要求你指定 JDK 的路径，我的问题是，我该选择哪一个，为什么？和
*   我怎么知道哪些是我的`JAVA_HOME`？和
*   *“ JDK 路径*”和“JDK 路径”有什么区别`JAVA_HOME`？

![在此处输入图像描述](../Images/cf2adbe339c7f889f00d4b98275bd54d.png)

提前致谢！

**编辑**：

> echo $PATH --> /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
> 
> java -version -> java version "1.7.0_03" OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3) OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
> 
> 哪个 java -> /usr/bin/java

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:32:24.803

> Spring Tool Suite 要求你指定 JDK 的路径，我的问题是，我该选择哪一个，为什么？和

这只能根据您的应用程序的需要来回答。您需要 Java 6 的稳定性还是 Java 7 中添加的功能？您打算使用仅在 Java 7 中可用的 API，还是 Java 6 库就足够了？您是否有客户需要使用一个 JVM 而不是另一个？只有你能回答这些问题。

> 我如何判断其中哪一个是我的 JAVA_HOME？和

您需要让 JAVA_HOME 引用您为项目决定的特定 JVM 环境。例如，如果您决定使用 Java 6，您可能希望将 JAVA_HOME 设置为 /usr/lib/jvm/java-6-openjdk-amd64。

> “JDK 路径”和 JAVA_HOME 有什么区别？

JDK 路径指的是 Java 开发工具包——它包括 Java 编译器、调试器和其他与开发 Java 程序相关的工具。JAVA_HOME 在运行 java 程序时可以引用 JDK 根目录或 JRE（Java Runtime Environment）根目录；但出于开发目的，您应该始终让 JAVA_HOME 引用 JDK 根目录。

# android - 检测到动作时加载纹理失败

> ID：12156291
> 
> 赞同：0
> 
> 时间：2012-08-28T09:22:29.603
> 
> 标签：android, object, textures, augmented-reality, image

所以我有一个应用程序，当它看到特别的图片时，它会设置一些动作。并且屏幕上应该出现一张图片（它没有）。当您单击该图片时，它会启动一个视频。视频效果很好，我所要做的就是触摸屏幕并开始播放。我缺少一些东西，因为图片没有加载。我在 Logcat 中得到一个错误，是这样的：

```
 08-29 10:15:44.102: E/libEGL(2314): call to OpenGL ES API with no current context (logged once per thread) 
```

**代码：** 这是在我运行程序时实例化的：该模型不是广告牌，因此它会跳过该部分并继续加载纹理。

```
private boolean mLoadGeometry(MetaioModel model, String assetsDirectoryPath) {
    // String modelName = model.name;
    // MetaioModel model = getModelForName(modelName);
    if (model != null) {
        LogService.log(TAG, "object : " + model.model);
        if (model.model == null) {
            if ((model.isBillboard != null) && model.isBillboard) {
                loadBillboard(entity.absolutePath + "/" + model.texture, model);
                LogService.log(TAG, "LoadBillboard : " + model.texture);
            } else {

                LogService.log(TAG, " model.geometryFile : " + model.file);
                if (model.file != null) {
                    String modelPath = assetsDirectoryPath + "/" + model.file /* + ".md2" */;
                    model.model = mMobileSDK.loadGeometry(modelPath);
                    LogService.log(TAG, "> Loaded model: " + modelPath);
                    if (model.model != null) {
                        LogService.log(TAG, "> model.texture: " + model.texture);
                        if ((model.texture != null) && !"".equals(model.texture)) {
                            LogService.log(TAG, "Setting texture = " + entity.absolutePath + "/" + model.texture);
                            model.model.setTexture(entity.absolutePath + "/" + model.texture);
                            LogService.log(TAG, "Texture set");

                        }
                        LogService.log(TAG, "[Loaded geometry] model.model = " + model.model);
                    } else {
                        LogService.log(TAG, "[Load geometry] object is null");
                    }
                } else {
                    LogService.log(TAG, "> model.geometryFile is NULL");
                }
            }
            boolean success = setModelProperties(model, assetsDirectoryPath);
            if (!success) {
                return false;
            }
        }
    }
    return true;
} 
```

这是`SetModelProperties`函数的样子：

```
private boolean setModelProperties(MetaioModel metaioModel, String assetsDirectoryPath) {
    LogService.log(TAG, "[MetaioModel] "+ metaioModel +"-----texture"+ metaioModel.texture);
    if (metaioModel == null) {
        return false;
    } else {
        IUnifeyeMobileGeometry object = metaioModel.model;
        if (object != null) {
            if (metaioModel.translate != null) {
                if (metaioModel.translate.length == 3) {
                    Vector3d vector3d = new Vector3d(metaioModel.translate[0], metaioModel.translate[1], metaioModel.translate[2]);
                    object.setMoveTranslation(vector3d);
                    LogService.log(TAG, "[Properties] translate set");
                } else {
                    LogService.log(TAG, "[ERROR] setModelProperties : translate ---> Vector is of wrong size !!!");
                }
            }
            if (metaioModel.scale != null) {
                if (metaioModel.scale.length == 3) {
                    Vector3d vector3d = new Vector3d(metaioModel.scale[0], metaioModel.scale[1], metaioModel.scale[2]);
                    object.setMoveScale(vector3d);
                    LogService.log(TAG, "[Properties] scale3 set");
                } else {
                    LogService.log(TAG, "[ERROR] setModelProperties : scale ---> Vector is of wrong size !!!");
                }
            }
            if (metaioModel.rotate != null) {
                if (metaioModel.rotate.length == 3) {
                    Vector3d vector3d = new Vector3d(metaioModel.rotate[0], metaioModel.rotate[1], metaioModel.rotate[2]);
                    object.setMoveRotation(vector3d);
                    LogService.log(TAG, "[Properties] rotate3 set");
                } else if (metaioModel.rotate.length == 4) {
                    Vector4d vector4d = new Vector4d(metaioModel.rotate[0], metaioModel.rotate[1], metaioModel.rotate[2], metaioModel.rotate[3]);
                    object.setMoveRotation(vector4d);
                    LogService.log(TAG, "[Properties] rotate4 set");
                } else {
                    LogService.log(TAG, "[ERROR] setModelProperties : rotate ---> Vector is of wrong size !!!");
                }
            }
            if (metaioModel.visible != null) {
                object.setVisible(metaioModel.visible);
                LogService.log(TAG, "[Properties] visibility set to : " + metaioModel.visible);
            }

            if (metaioModel.occlude != null) {
                object.setOcclusionMode(metaioModel.occlude);
                LogService.log(TAG, "[Properties] occlusion set to : " + metaioModel.occlude);
            }
            if (metaioModel.picking != null) {
                object.setPickingEnabled(metaioModel.picking);
                LogService.log(TAG, "[Properties] is pickable set to : " + metaioModel.picking);
            }

            if (metaioModel.xray != null) {
                object.setRenderAsXray(metaioModel.xray);
                LogService.log(TAG, "[Properties] xray set to : " + metaioModel.xray);
            }

            if (metaioModel.transparency != null) {
                int transparency = metaioModel.transparency;
                object.setTransparency((short) transparency);
                LogService.log(TAG, "[Properties] transparency set to : " + transparency);
            }

            if (metaioModel.texture != null) {
                object.setTexture(entity.absolutePath + "/" + metaioModel.texture);
                object.setVisible(true);

                LogService.log(TAG, "[Properties] Rendered set to : "+object.getIsRendered());
                LogService.log(TAG, "[Properties] Visibility set to : "+object.getIsVisible());
                LogService.log(TAG, "[Properties] texture set to : " + entity.absolutePath + "/" + metaioModel.texture);
            }
        }
    }
    return true;
} 
```

对象不为空，应按比例和纹理输入。（它的LogCat状态）：

```
 -28 12:12:36.096: I/AugmentedRealityActivity(5910): ==> model : MetaioModel [name=movie, file=square.md2, isBillboard=null, translate=null, scale=[0.5, 0.5, 0.5], rotate=null, visible=null, occlude=null, picking=null, xray=null, transparency=null, texture=start.png, movie_texture=null, billboard=null, defaultTexture=null, geometryFile=null] 
```

改变可见性的 setAction 类：

```
private void setActions(ArrayList<Action> actions, String directory) {
    if ((actions != null) && (actions.size() > 0)) {
        for (int i = 0; i < actions.size(); i++) {
            String type = actions.get(i).type;
            Action action = actions.get(i);
            LogService.log(TAG, "==> action Type : " + type);

            if ("saveScreenshot".equalsIgnoreCase(type)) {
                LogService.log(TAG, "==> saveScreenshot");
                captureScreenShot(entity.absolutePath + "/Screenshots/screenshot.jpg");
            }
 else if ("setTexture".equalsIgnoreCase(type)) {
                LogService.log(TAG, "==> setTexture");
                String modelName = action.model;
                if ((modelName != null) && (modelName.length() > 0)) {
                    LogService.log(TAG, "InSetTEXTURE======Inainte de Texture set: " + action.file);
                    String texture = action.file;
                    if (texture.length() > 0) {
                        String texturePath = entity.absolutePath + "/" + texture;
                        MetaioModel metaioModel = getModelForName(modelName);
                        IUnifeyeMobileGeometry object = metaioModel.model;
                        if (object != null) {
                            object.setTexture(texturePath);
                            // flag = !flag;
                            // System.out.println("flag = " + flag);
                            // object.setTexture("changed.jpg", null, true);

                            // object.setTexture(entity.absolutePath + "/" + model.texture);
                            // if (flag) {
                            // } else {
                            // object.setTexture(entity.absolutePath + "/normal.png" /* + model.texture */);
                            // }

                            LogService.log(TAG, "InSetTEXTURE======Texture set: " + texturePath);
                        } else {
                            LogService.log(TAG, "ERROR: object is null!");
                        }
                    }
                }
            } 
```

所有 Logcat 日志：

```
08-28 12:12:33.846: I/AugmentedRealityActivity(5910): >> Tracking data: /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture/TrackingData_MarkerlessFast.xml
08-28 12:12:33.846: I/AugmentedRealityActivity(5910): >> AugmentedRealityActivity.onCreate()
08-28 12:12:36.056: I/AugmentedRealityActivity(5910): > Loading assets from : /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture
08-28 12:12:36.056: I/AugmentedRealityActivity(5910): ==> action Type : loadGeometry
08-28 12:12:36.056: I/AugmentedRealityActivity(5910): ==> load geometry
08-28 12:12:36.056: I/AugmentedRealityActivity(5910): object : null
08-28 12:12:36.056: I/AugmentedRealityActivity(5910):  model.geometryFile : square.md2
08-28 12:12:36.066: I/AugmentedRealityActivity(5910): > Loaded model: /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture/square.md2
08-28 12:12:36.066: I/AugmentedRealityActivity(5910): > model.texture: start.png
08-28 12:12:36.066: I/AugmentedRealityActivity(5910): Setting texture = /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture/start.png
08-28 12:12:36.086: I/AugmentedRealityActivity(5910): Texture set
08-28 12:12:36.086: I/AugmentedRealityActivity(5910): [Loaded geometry] model.model = com.metaio.unifeye.ndk.IUnifeyeMobileGeometry@4af880
08-28 12:12:36.086: I/AugmentedRealityActivity(5910): [MetaioModel] MetaioModel [name=movie, file=square.md2, isBillboard=null, translate=null, scale=[0.5, 0.5, 0.5], rotate=null, visible=null, occlude=null, picking=null, xray=null, transparency=null, texture=start.png, movie_texture=null, billboard=null, defaultTexture=null, geometryFile=null]-----texturestart.png
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): [Properties] scale3 set
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): [Properties] Rendered set to : false
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): [Properties] Visibility set to : true
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): [Properties] texture set to : /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture/start.png
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): ==> action Type : setMovieTexture
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): ==> setMovieTexture
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): ==> setMovieTexture modelName : movie
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): Got 1 models
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): Returning model : movie
08-28 12:12:36.096: I/AugmentedRealityActivity(5910): ==> model : MetaioModel [name=movie, file=square.md2, isBillboard=null, translate=null, scale=[0.5, 0.5, 0.5], rotate=null, visible=null, occlude=null, picking=null, xray=null, transparency=null, texture=start.png, movie_texture=null, billboard=null, defaultTexture=null, geometryFile=null]
08-28 12:12:36.116: I/AugmentedRealityActivity(5910): set movie texture : /mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture/demo_movie.3g2,false,true 
```

检测到标记时的 LogCat，应将纹理设置为可见：

```
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): >> Marker detected..
08-28 12:17:01.926: I/System.out(5910): >> cosName patch1
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Action size in action!=null  ----1/mnt/sdcard/Android/data/com.cardemotion.mobile/files/VWSEEMORE/TEMP/movie_texture
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): ==> action Type : setVisible
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): ==> setVisible
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Got 1 models
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Returning model : movie
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): ==> modelName: movie setVisible : true
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Devine Visible==> modelName: movie true  object is object: com.metaio.unifeye.ndk.IUnifeyeMobileGeometry@4af880texturecom.metaio.unifeye.ndk.IUnifeyeMobileGeometry@4af880
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): modelName unde sunt acuma= movie
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Model name : movie
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Got 1 models
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): Returning model : movie
08-28 12:17:01.926: I/AugmentedRealityActivity(5910): model.texture : 'start.png' 
08-28 12:17:01.926: I/System.out(5910): model.texture : 'start.png' 
08-28 12:17:01.926: I/System.out(5910): Pose set : 1 
```

和检测代码：

```
 @Override
        public void onTrackingEvent(PoseVector poses) {
         for (int i = 0; i < poses.size(); i++) {
            Pose pose = poses.get(i);
            if (pose.isDetected()) {
                ArrayList<MetaioEvent> items = entity.events;
                for (int k = 0; k < items.size(); k++) {
                    MetaioEvent item = items.get(k);
                    Event event = item.event;
                    String type = event.type;
                    String cosName = pose.getCosName() != null ? pose.getCosName().toLowerCase() : "NULL";
                    String cosNameFromFile = event.cosName != null ? event.cosName.toLowerCase() : "NULL";

                    if ("markerDetected".equals(type)) {
                        LogService.log(TAG, ">> Marker detected..");
                        if (!"".equals(cosName) && !"".equals(cosNameFromFile) && cosName.equals(cosNameFromFile)) {
                            System.out.println(">> cosName " + cosName);
                            ArrayList<Action> actions = item.actions;
                            if ((actions != null) && (actions.size() > 0)) {
                                LogService.log(TAG, "Action size in action!=null  ----"+actions.size() + "" + entity.absolutePath );
                                setActions(actions, entity.absolutePath);
                                for (Action action : actions) {
                                    if ((action != null) && (action.type != null)) {
                                        String modelName = action.model;
                                        LogService.log(TAG, "modelName unde sunt acuma= " + modelName);
                                        if ((modelName != null) && (modelName.length() > 0)) {
                                            LogService.log(TAG, "Model name : " + modelName);
                                            MetaioModel model = getModelForName(modelName);
                                            LogService.log(TAG, "model.texture : '" + model.texture + "' ");
                                            System.out.println("model.texture : '" + model.texture + "' ");

                                            IUnifeyeMobileGeometry object = model.model;
                                            String cosName2 = action.cosName;

                                            if ((object != null)) {
                                                if ("camera".equals(cosName2)) {
                                                    object.setCos(0);
                                                    System.out.println("Pose set 0 ");
                                                } else {
                                                    object.setCos(pose.getCosID());
                                                    System.out.println("Pose set : " + pose.getCosID());
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } else if (pose.isLost()) {
                for (MetaioEvent item : entity.events) {
                    Event event = item.event;
                    String type = event.type;
                    String cosName = pose.getCosName() != null ? pose.getCosName().toLowerCase() : "NULL";
                    String cosNameFromFile = event.cosName != null ? event.cosName.toLowerCase() : "NULL";

                    if ("markerLost".equals(type)) {
                        LogService.log(TAG, ">> Marker lost..");
                        if (!"".equals(cosNameFromFile) && !"".equals(cosName) && cosName.equals(cosNameFromFile)) {
                            ArrayList<Action> actions = item.actions;
                            if ((actions != null) && (actions.size() > 0)) {
                                setActions(actions, "");
                            }
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:53:59.227

它在错误的线程中，所以我这样做了：

```
if (object != null) {
                            mUnifeyeSurfaceView.queueEvent(new Runnable() {
                                @Override
                                public void run() {
                                    object.setTexture(texturePath);
                                }
                            });

                            LogService.log(TAG, "Texture set: " + texturePath);
                        } else {
                            LogService.log(TAG, "ERROR: object is null!");
                        } 
```

# python - Python Web 编程 - 不使用 Django

> ID：12156293
> 
> 赞同：0
> 
> 时间：2012-08-28T09:22:37.890
> 
> 标签：python, html, web, cgi, mysql-python

我想学习 Python 进行 Web 编程。到目前为止，我从事 PHP 工作，并想尝试 Python 及其面向对象的特性。我对 python 及其语法和数据结构有基本的了解。

我想从制作基本网页开始——表单、文件上传，然后使用 MYSQl 转到更动态的网站。

到目前为止，我不想尝试 Django 或任何其他框架。带有 cgi 和 MySQLdb 模块的 python 是一个好的开始吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:29:54.417

我推荐金字塔框架！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:30:33.120

Having used both Flask and Django for a bit now, I must say that I much prefer Flask for most things. I would recommend giving it a try. Flask-Uploads and WTForms are two nice extensions for the Flask framework that make it easy to do the things you mentioned. Lots of other extensions available.

If you go on to work with dynamic site attached to a database, Flask + SQL Alchemy make a very powerful combination. I much prefer the SQLAlchemy ORM to the django model ORM.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:26:11.023

我建议使用一些 WSGI（WebServer Gateway 接口）轻量级框架。WSGI 是 Python 上公认的 Web 界面，可让您管理基本的 HTTP 请求（GET、POST、HEAD ...），Django 也是基于 WSGI 的。

[http://wsgi.readthedocs.org/en/latest/frameworks.html](http://wsgi.readthedocs.org/en/latest/frameworks.html)

如果您不想使用任何框架，也可以编写一个基本的 WSGI 应用程序。这非常简单，您可以使用 Paste Deploy 或 Apache + mod_wsgi 轻松测试/部署它。

[http://pythonpaste.org/deploy/](http://pythonpaste.org/deploy/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:44:40.447

取决于您对 Web 编程的理解程度，出于学习目的，您可以从 SimpleHTTPServer 模块等非常基础的模块开始，或者更实际一点，从[Paste](http://pythonpaste.org/)或[Bottle](http://wiki.github.com/defnull/bottle)等微框架开始。然后你会选择像 Django 这样的全栈框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:56:17.543

我真的建议您尝试[Flask](http://flask.pocoo.org/)。它不需要像 Pyramids 和 Django 这样的开销，它会给你机会玩（不是玩具）。

从他们的文档中：安装 Flask：

```
>> pip install Flask 
```

然后运行一个简单的网络应用程序:)

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T09:26:11.653

如果不出意外，它将向您展示为什么要使用框架，这应该是一次非常有价值的学习体验。我说去吧。

# c# - Excel 互操作 - 在所有其他工作表之后添加一个新工作表

> ID：12156302
> 
> 赞同：35
> 
> 时间：2012-08-28T09:23:01.023
> 
> 标签：c#, excel, interop

我正在尝试向 Excel 工作簿添加一个新工作表，并使其成为 C# Excel Interop 书中的最后一个工作表。

看起来很简单，我认为下面的代码可以做到：

```
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var excel = new Excel.Application();

            var workbook = excel.Workbooks.Open(@"C:\test\Test.xlsx");
            workbook.Sheets.Add(After: workbook.Sheets.Count);

            workbook.Save();
            workbook.Close();

            Marshal.ReleaseComObject(excel);
        }
    }
} 
```

没有这样的运气。我收到这个有用的错误：

> COMException 未处理 - 来自 HRESULT 的异常：0x800A03EC

我在 Microsoft.com 上找到[了这个页面](http://support.microsoft.com/kb/107622)，它建议我先尝试添加工作表，然后再移动它，所以我尝试了如下所示。我知道这个网页以 Excel 95 为目标，但 VBA 仍然可以使用，所以我希望它仍然可以工作：

```
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var excel = new Excel.Application();

            var workbook = excel.Workbooks.Open(@"C:\test\Test.xlsx");
            workbook.Sheets.Add();
            workbook.Sheets.Move(After: workbook.Sheets.Count);

            workbook.Save();
            workbook.Close();

            Marshal.ReleaseComObject(excel);
        }
    }
} 
```

我得到与上面相同的错误。我还尝试将上一个工作表的名称作为字符串作为`After`参数传递给`Add`and`Move`方法，不高兴！

这就是我尝试过的，所以我的问题是如何将工作表添加到 Excel 工作簿并使用 C# Excel Interop 将其作为工作簿中的最后一个工作表？

谢谢

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-28T09:28:26.037

查看此处的文档[http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.move(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.move(v=vs.80).aspx)，它表示“之后”对象不是数字位置；它是代表您想要放置工作表的工作表的对象。代码可能应该类似于（未经测试）：

```
workbook.Sheets.Add(After: workbook.Sheets[workbook.Sheets.Count]); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-12T09:27:20.077

这应该做的工作：

```
wSheet.Move(Missing.Value, workbook.Sheets[workbook.Sheets.Count]); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-29T22:31:35.283

这是对我有用的唯一方法：

```
xlWorkSheet = (Microsoft.Office.Interop.Excel.Worksheet)xlWorkBook.Worksheets.Add
    (System.Reflection.Missing.Value,
     xlWorkBook.Worksheets[xlWorkBook.Worksheets.Count], 
     System.Reflection.Missing.Value, 
     System.Reflection.Missing.Value); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-23T08:13:15.407

这个对我有用

```
WorkBook.Worksheets.Add(
    System.Reflection.Missing.Value,
    WorkBook.Worksheets[WorkBook.Worksheets.Count], 
    1, 
    System.Reflection.Missing.Value); 
```

# php - PHP 检索位掩码值

> ID：12156305
> 
> 赞同：0
> 
> 时间：2012-08-28T09:23:10.197
> 
> 标签：php, mysql

我正在尝试从 PHP 中的 MySql DB 表中检索位掩码。我使用 meekro db 库与数据库进行交互。

这是用于查询数据库的代码：

```
$query = DB::queryFirstRow($select, $tid);

$dm = $query['dayMask'];
var_dump($dm); 
```

数据库返回的行包含一个名为 的列`dayMask`，该列定义为`BIT(7)`带有值`0110001`。

上面的代码打印`string(3) "127"`对我来说毫无意义。掩码的十进制表示为`49`，`127`对应于`1111111`。

我究竟做错了什么？如何在 PHP 中从数据库中检索位掩码值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:28:40.703

尝试使用[bindec()](http://uk.php.net/bindec)：

```
$dm = bindec($query['dayMask']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:38:03.053

我无法重现该行为

```
<?php
require 'meekrodb.2.0.class.php';
setup();
$select = 'SELECT * FROM tmpSO WHERE id=%s'; $tid = 1;
$query = DB::queryFirstRow($select, $tid);

$dm = $query['dayMask'];
var_dump($dm);

function setup() {
    DB::$user = 'localonly';
    DB::$password = 'localonly';
    DB::$dbName = 'test';
    DB::$host = 'localhost';
    DB::$port = '3306';
    DB::$encoding = 'utf8';
    DB::query('
        CREATE TEMPORARY TABLE tmpSO (
            id int auto_increment,
            dayMask BIT(7),
            primary key(id)
        )
    ');
    DB::query("INSERT INTO tmpSO SET dayMask = b'0110001'");
} 
```

印刷`string(2) "49"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:00:17.493

解决了。

该问题与用于插入新值的 SQL 语句有关。

正如我发现的那样，从 VolkerK 提供的示例开始，要在 MySQL 中插入位值，我应该使用以下语法（来自[此处](http://dev.mysql.com/doc/refman/5.5/en/bit-field-literals.html)）：

```
mysql> INSERT INTO t SET b = b'1010'; 
```

使用这种语法我的代码可以工作。

奇怪的是，将值作为文字插入不会导致来自 MySQL 的任何错误或警告。此外，当使用错误的语法插入时，phpmyadmin 会正确显示字段，而在使用正确的语法插入时会错误地显示值。

# sql - 存在查询的替代方案

> ID：12156306
> 
> 赞同：0
> 
> 时间：2012-08-28T09:23:20.663
> 
> 标签：sql

我有以下查询：

```
update tab1.abc,
tab1.sbd = (select tab2.abc, tab2.sbd from tab2,tab1 where --some conditions)
where exists(select tab2.abc, tab2.sbd from tab2,tab1 where --some conditions) 
```

现在我的任务是优化这个查询。

我相信删除 exists 子句或结合两个 where 子句会有很大帮助。但是怎么做呢？

**PS**：exists 子句已经到位，因为如果 select 子句返回零行，我希望更新的行数为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:30:39.033

`JOIN`这两个表而不是`EXISTS`. 类似于以下内容：

```
UPDATE tab1
INNER JOIN tab2 ON --some join condition
SET sbd = --something
AND abc = --other something
WHERE --some conditions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:30:18.707

您可以使用 IN 关键字

```
update tab1.abc,
tab1.sbd = (select tab2.abc, tab2.sbd from tab2,tab1 where --some  conditions)
where something in 
(select tab2.abc, tab2.sbd from tab2,tab1 where --some conditions) 
```

请参阅以下链接：

[输入（TSql）](http://msdn.microsoft.com/en-us/library/ms177682.aspx)

[SQL 输入](http://www.1keydata.com/sql/sqlin.html)

# macos - 为包/捆绑包导出的 UTI

> ID：12156307
> 
> 赞同：5
> 
> 时间：2012-08-28T09:23:27.683
> 
> 标签：macos, cocoa, bundle, uti

我的 Cocoa 基于文档的应用程序打开并编写自定义包/捆绑包。

这是否被认为是需要通过导出的 UTI ( `UTExportedTypeDeclarations`) 导出的专有格式？

如果是这样，应该是什么值：

*   符合 ( `UTTypeConformsTo`)
*   哑剧类型 ( `public.mime-type`)
*   印制板类型 ( `com.apple.nspboard-type`)
*   操作系统类型 ( `com.apple.ostype`)

最后，导出的 UTI 标识符 ( `UTTypeIdentifier`) 是否需要与文档类型标识符 ( `LSItemContentTypes`) 具有相同的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:42:42.387

试错结果：

> 这是否被认为是需要通过导出的 UTI ( `UTExportedTypeDeclarations`) 导出的专有格式？

是的。虽然我在文档中找不到任何明确提及这一点，但导出类型对于 Finder 将目录视为包是必要的。

> *   符合 ( `UTTypeConformsTo`)

`com.apple.package`（[来源](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)）

> *   哑剧类型 ( `public.mime-type`)

空的。目录没有 Mime 类型？

> *   印制板类型 ( `com.apple.nspboard-type`)

空的。不推荐使用 Pboard 类型？

> *   操作系统类型 ( `com.apple.ostype`)

没有线索。

> 最后，导出的 UTI 标识符 ( `UTTypeIdentifier`) 是否需要与文档类型标识符 ( `LSItemContentTypes`) 具有相同的值？

是的，但我在文档中找不到任何明确提及。

# mysql - 未知列，即使它存在

> ID：12156308
> 
> 赞同：0
> 
> 时间：2012-08-28T09:23:27.980
> 
> 标签：mysql, database

我有

```
SELECT
servisler.geo_location,
servisler.ADRES_MERKEZ,
servisler.ADRES_ILCE,
servisler.ADRES_IL,
servisler.FIRMA_UNVANI,
servisler.ADRES_ISTEL,
servisler.YETKILI_ADISOYADI,
urun_gruplari.GRUP_ADI
FROM
servisler
INNER JOIN urun_gruplari ON kullanici_cihaz.URUN_GRUP_NO= urun_gruplari.RECNO
INNER JOIN kullanici ON kullanici.SERVIS_RECNO = servisler.RECNO
INNER JOIN kullanici_cihaz ON kullanici.RECNO = kullanici_cihaz.KUL_RECNO AND kullanici_cihaz.URUN_GRUP_NO = urun_gruplari.RECNO
where kullanici.kullanici = 'MAR.EDI.003' 
```

但它说

```
[Err] 1054 - Unknown column 'kullanici_cihaz.URUN_GRUP_NO' in 'on clause' 
```

enen 虽然列退出。它的问题是什么？

[架构](https://i.imgur.com/uT78A.png)
服务器版本：5.1.33-community-log

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:29:10.000

因为`kullanici.SERVIS_RECNO`在加入表时不存在：`servisler`, `urun_gruplari`. `kullanici`加入前先加入表`urun_gruplari`。

```
SELECT    servisler.geo_location,
          servisler.ADRES_MERKEZ,
          servisler.ADRES_ILCE,
          servisler.ADRES_IL,
          servisler.FIRMA_UNVANI,
          servisler.ADRES_ISTEL,
          servisler.YETKILI_ADISOYADI,
          urun_gruplari.GRUP_ADI
FROM   servisler
          INNER JOIN kullanici 
               ON kullanici.SERVIS_RECNO = servisler.RECNO
          INNER JOIN urun_gruplari 
               ON kullanici_cihaz.URUN_GRUP_NO= urun_gruplari.RECNO
          INNER JOIN kullanici_cihaz
               ON kullanici.RECNO = kullanici_cihaz.KUL_RECNO AND 
                  kullanici_cihaz.URUN_GRUP_NO = urun_gruplari.RECNO
where kullanici.kullanici = 'MAR.EDI.003' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:29:31.337

我认为这是因为您在子句中使用了该`kullanici_cihaz`表，并且在链接该表**之前**使用了该表。`ON`

 **尝试重新排列您的`INNER JOIN`：

```
SELECT
   servisler.geo_location,
   servisler.ADRES_MERKEZ,
   servisler.ADRES_ILCE,
   servisler.ADRES_IL,
   servisler.FIRMA_UNVANI,
   servisler.ADRES_ISTEL,
   servisler.YETKILI_ADISOYADI,
   urun_gruplari.GRUP_ADI
FROM
   servisler
INNER JOIN kullanici ON kullanici.SERVIS_RECNO = servisler.RECNO
INNER JOIN kullanici_cihaz ON kullanici.RECNO = kullanici_cihaz.KUL_RECNO 
INNER JOIN urun_gruplari ON kullanici_cihaz.URUN_GRUP_NO= urun_gruplari.RECNO
WHERE 
   kullanici.kullanici = 'MAR.EDI.003' 
```

**编辑**

您还有一些“循环内连接”，我将其删除：

```
INNER JOIN urun_gruplari ON kullanici_cihaz.URUN_GRUP_NO= urun_gruplari.RECNO
INNER JOIN kullanici_cihaz ON kullanici.RECNO = kullanici_cihaz.KUL_RECNO AND kullanici_cihaz.URUN_GRUP_NO = urun_gruplari.RECNO 
```**

# java - 在线程上调用不同的方法

> ID：12156310
> 
> 赞同：0
> 
> 时间：2012-08-28T09:23:38.137
> 
> 标签：java, multithreading

我有一个主要过程`main`。它创建了 10 个线程（比如说），然后我想要做的是以下内容：

```
while(required){
Thread t= new Thread(new ClassImplementingRunnable());
t.start();
counter++;
} 
```

现在我有了这些线程的列表，并且对于每个线程我想做一组进程，对所有线程都是一样的，因此我把那个实现放在`ClassImplementingRunnable`.

现在线程完成执行后，我想等待所有线程停止，然后再次调用它们，但是这次我想串行而不是并行执行它们。

为此，我加入每个线程，等待它们完成执行，但之后我不知道如何再次唤起它们并连续运行那段代码。我可以做类似的事情吗

```
for(each thread){
t.reevoke(); //how can i do that.
t.doThis();  // Also where does `dothis()` go, given that my ClassImplementingRunnable is an inner class.
} 
```

此外，我想使用相同的线程，即我希望从他们离开的地方继续，但以串行方式。我不确定如何处理最后一段伪代码。请帮忙。使用java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:28:59.050

如果要串行执行，只需使用

```
for (int i = 0; i < 10; i++)
  new ClassImplementingRunnable().run(); 
```

所有任务将在同一个线程中一个接一个地运行。这是实现您想要的最干净的方法。

# 更新

在您发表评论后，很明显您实际上不想再次运行相同的任务，而是打印它们计算的结果。这会更简单：

1.  将`ClassImplementingRunnable`实例添加到任务列表中；
2.  在自己的线程中运行每个任务；
3.  加入所有线程；
4.  编写一个`for`循环来打印每个`ClassImplementingRunnable`实例的结果。

你已经有了 2 和 3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:31:25.280

您无法重新启动线程。

您可以做的是使用 java.util.concurrent 包等待线程完成并在主线程中重新运行可运行对象以按顺序运行它们 - 通过将可运行对象放在列表中，您可以在顺序运行期间访问它们。

```
ExecutorService executor = Executors.newFixedThreadPool(10);
List<Runnable> runnables = new ArrayList<Runnable> ();

for (int i = 0; i < 10; i++) {
    Runnable r = new ClassImplementingRunnable();
    runnables.add(r);
    executor.submit(r);
}

executor.shutdown();
//wait until all tasks are finished
executor.awaitTermination(Integer.MAX_VALUE, TimeUnit.SECONDS);

//re run the tasks sequentially
for (ClassImplementingRunnable r : runnables) {
    //the method below can access some variable in 
    //your ClassImplementingRunnable object, that was 
    //set during the first parallel run
    r.doSomethingElse(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:21:02.430

尽管这里有一些很好的答案，但我不确定您最初的问题是否已得到解答。

> 现在线程完成执行后，我想等待所有线程停止，然后再次调用它们，但是这次我想串行而不是并行执行它们。

您正在将正在运行的线程与它的对象混淆。执行以下操作是一种非常常见的模式（尽管通常使用`ExecutiveService`类做得更好）：

```
List<ClassExtendingThread> threads = new ArrayList<ClassExtendingThread>();
// create your list of objects
for (int i = 0; i < 10; i++) {
    ClassExtendingThread thread = new ClassExtendingThread(...);
    thread.start();
    threads.add(thread);
}

for (ClassExtendingThread thread : threads) {
    // now wait for each of them to finish in turn
    thread.join();
    // call some method on them to get their results
    thread.doThis();
} 
```

请注意，我将您的课程更改为扩展`Thread`。通常最`Runnable`好像你一样实现，但如果你要加入和回调对象，扩展`Thread`会使代码更容易。

因此，您创建对象实例，将它们作为线程启动，然后`join()`与它们一起等待它们完成并同步它们的内存。一旦你`join()`有了线程，你就可以调用你想要的对象的任何方法。这根本不会“重新唤起”线程。它只是访问对象内部的字段。如果您尝试在线程运行时执行此操作，那么您需要担心`synchronization`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:31:12.457

我猜你想要类似 **ExecutorCompletionService**

从 Java 文档复制的示例。

> **用法示例。**假设您有一组求解某个问题的求解器，每个求解器返回某种类型的值 Result，并希望同时运行它们，处理每个返回非空值的结果，在某些方法中使用（Result r)。你可以这样写：

```
void solve(Executor e,
          Collection<Callable<Result>> solvers)
 throws InterruptedException, ExecutionException {
   CompletionService<Result> ecs
       = new ExecutorCompletionService<Result>(e);
   for (Callable<Result> s : solvers)
       ecs.submit(s);
   int n = solvers.size();
   for (int i = 0; i < n; ++i) {
       Result r = ecs.take().get();
       if (r != null)
           use(r);
   } 
```

}

# c# - Jabber.net on Unity/Android 错误（在 /system/lib/libc.so 中找不到 JNI_OnLoad，跳过初始化）

> ID：12156312
> 
> 赞同：1
> 
> 时间：2012-08-28T09:23:53.223
> 
> 标签：c#, android, xmpp, unity3d, dalvik

我正在尝试使用适用于 iOS 和 Android 的 Unity3D(Mono/C#) 创建 Jabber (Jabber.net) 聊天客户端。我让客户端在 iOS 中工作（在 Unity 模拟器中也运行良好）。但是，在 Nexus 7 或 HTC Desire 上运行它时，它不起作用。它不会崩溃，但也不会连接。它只会产生以下错误：

> D/dalvikvm(9368)：在 /system/lib/libc.so 0x413b7270 中找不到 JNI_OnLoad，跳过初始化

此错误与我的 Jabber.net 客户端的 Connect 方法有关：

```
jc = new JabberClient();
...
// Setting up the jabberclient and attaching eventhandlers
...
jc.Connect(); 
```

任何想法如何解决它？

**编辑：** Reseaching JNI_OnLoad，我发现了这个描述：

> “VM 在加载本地库时调用 JNI_OnLoad（例如，通过 System.loadLibrary）。JNI_OnLoad 必须返回本地库所需的 JNI 版本。为了使用任何新的 JNI 函数，本地库必须导出一个JNI_OnLoad 函数，返回 JNI_VERSION_1_2。如果原生库没有导出 JNI_OnLoad 函数，VM 假定该库只需要 JNI 版本 JNI_VERSION_1_1。如果 VM 无法识别 JNI_OnLoad 返回的版本号，则无法加载原生库。

来自[http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#wp9502](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#wp9502)

是否可以使用返回 JNI_VERSION_1_2 的 JNI_OnLoad 方法重建 Jabber.net ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:46:59.237

这根本不可能。不要在家里尝试这个孩子。

# r - 解释 lm() 摘要中的残值声明

> ID：12156313
> 
> 赞同：0
> 
> 时间：2012-08-28T09:23:55.103
> 
> 标签：r, linear-regression

我正在与 R 合作，`lm()`在我收集的数据上创建一些线性模型（使用）。现在我不太擅长统计，并且发现很难理解通过 R 生成的线性模型的摘要。

我的意思是残值：`Min`, `1Q`, `Median`, `3Q`,`Max`

我的问题是：这些值是什么意思，如果我的模型好，我怎么能从这些值中知道？

这是我拥有的一些剩余价值。

```
Min: -4725611 1Q:-2161468 median:-1352080  3Q:3007561 Max:6035077 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:35:30.727

线性回归的一个基本假设（尤其是相关的假设检验）是残差是正态分布的，期望值为零。稍微违反这个假设是没有问题的，因为统计数据非常可靠。但是，分布至少应该是对称的。

判断是否满足正态性假设的最佳方法是绘制残差图。有许多不同的诊断图可用，例如，您可以执行以下操作：

```
fit <- lm(y~x)
plot(fit) 
```

这将为您提供残差与拟合值的图和标准化残差的 qq 图。给出的分位数`summary(fit)`对于快速检查残差是否对称很有用。在那里，最小值和最大值并不那么重要，但中位数应该接近于零，并且第一和第三四分位数应该具有相似的绝对值。当然，只有当您有足够数量的值时，此检查才有意义。

如果残差不是正态分布的，则有几种处理方法，例如，

*   转变，
*   广义线性模型，
*   或者非线性模型可能更合适。

有很多关于线性回归的好书，甚至还有一些很好的网络教程。我建议至少仔细阅读其中之一。

# jpa - How to handle column Hashing with JPA

> ID：12156317
> 
> 赞同：0
> 
> 时间：2012-08-28T09:24:11.277
> 
> 标签：jpa, eclipselink, bcrypt

i have a User entity with a password property. I want to store bcrypt hashed passwords in the database.

How can i handle the hashing as transparent as possible with jpa/eclipselink.

I want the hashing to take plase as late as possible and for the code that accesses the user to know as few as possible about the underlying hash mechanism (or its existence).

Currently i only access the password in jpql queries and the user doesn't even have a getPassword() method.

Greetings, Laures

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:29:01.847

You can have different access methods; one set for the user and another for the JPA provider that handle the data underneath as required. The access methods required by the provider must deal with the data as it is needed to persist in the database. When using property access, just mark the get/set methods you want the provider to use with the mapping annotations, and either use different naming for user methods or mark them as transient. You are then free to store the data in the User entity how ever is needed.

# html - CSS 导航菜单中的活动页面，带有 MVC3 中悬停效果的背景图像

> ID：12156320
> 
> 赞同：2
> 
> 时间：2012-08-28T09:24:26.170
> 
> 标签：html, asp.net-mvc-3, css, razor

我用 HTML 制作了一个简单的菜单。它（几乎）完美地工作。如您所见，菜单项是与 CSS 中设置的背景图像的链接。在鼠标悬停时显示另一个背景图像。

我的问题是，我找不到用于设置菜单项不断“选择”的有效解决方案 - 或者换句话说，我不想在菜单中显示实际页面。

首先，我将展示 HTML 和 CSS。之后，我将展示我尝试做的事情。

```
<div id="menu">
    <a href="@Url.Action("Index","Produkter")" id="menu_produkter"></a>
    <a href="@Url.Action("Index", "Galleri")" id="menu_galleri"></a>
    <a href="@Url.Action("Index", "Kontakt")" id="menu_kontakt"></a>
</div> 
```

CSS 看起来像这样：

```
#menu_produkter 
{
    display: block;
    position: absolute;
    background: url(images/menu_produkter.png) no-repeat;
    width: 108px;
    height: 26px;
    margin-left: 376px;
    margin-top: 52px;
}

#menu_produkter:hover {
    background: url(images/menu_produkter_hover.png) no-repeat;
    cursor: pointer;
}

#menu_galleri {
    display: block;
    position: absolute;
    background: url(images/menu_galleri.png) no-repeat;
    width: 64px;
    height: 26px;
    margin-left: 496px;
    margin-top: 52px;
}

#menu_galleri:hover {
    background: url(images/menu_galleri_hover.png) no-repeat;
    cursor: pointer;
}

#menu_kontakt {
    display: block;
    position: absolute;
    background: url(images/menu_kontakt.png) no-repeat;
    width: 85px;
    height: 26px;
    margin-left: 572px;
    margin-top: 52px;
}

#menu_kontakt:hover {
    background: url(images/menu_kontakt_hover.png) no-repeat;
    cursor: pointer;
} 
```

我尝试为每个名为#menu_xxxx_on 的项目添加CSS id，其背景图像与“：hover” id 相同。

然后我在视图顶部设置 ViewBag.CurrentPage = "xxxx"。最后我使用 Razor 来检查当前页面：

```
$<a href="@Url.Action("Index", "Produkter")" id="menu_produkter@{if(ViewBag.CurrentPage.Equals("Salonen")) {<text>_on</text>}}"></a>* 
```

我希望它会起作用 - 但菜单项完全消失了。我试图用谷歌浏览器“检查元素”以找出问题所在。似乎它重置了所有 CSS 属性。

有什么简单的解决方案 - 还是我必须以另一种方式做？我已经看到其他使用自定义 html-helpers 的解决方案 - 但我认为如果我能这样做，那就有点矫枉过正了。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:26:44.873

如果你想用类解决它，然后使用 jQuery 函数，例如：

```
$(function(){
var id = $('hiddenId').val();
 $('#'+id).addClass("someClass");
}); 
```

在 someClass 中定义您选择的菜单选项卡样式。

您可以使用 ViewBag 发送所选菜单的 ID，并使用 id 在 hiddenField 中呈现它： hiddenId

```
@Html.Hidden("hiddenId",(object)ViewBag.CurrentPage) 
```

但我建议用 innerHtml 操作，然后 jQuery 函数应该是这样的：

```
$(function(){
    var id = $('hiddenId').val();
    var header =  $('#'+id).html();
    $('#'+id).html(header+'-on');
    }); 
```

# javascript - jQuery 是否支持对从 ajax 调用中检索到的数据进行 html 转义？

> ID：12156321
> 
> 赞同：2
> 
> 时间：2012-08-28T09:24:31.593
> 
> 标签：javascript, jquery

大多数`MVC`框架都支持在将服务器数据放到网页之前对其进行转义。`jQuery`我在's 的方法中找不到任何选项`ajax`来做同样的事情。事实上，我什至找不到一个原生 jQuery 函数来转义字符串以便在页面上正确显示（将内容放在 a`div`中并调用`.html(`），不能保证保留空白）。为什么这个函数在 jQuery 中不可用，但你可以在`underscore`和`prototype`库中找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:31:32.123

我认为您的意思是要防止 HTML 标记（例如`<br/>`, `<a>`, `&`）被视为 HTML 标记：您只想将其直接显示给用户。这有助于防止 XSS（跨站点脚本）等攻击。

这实际上用 jQuery 很容易，但它与转义不同。它只是使用[`text`](http://api.jquery.com/text)方法，这意味着内容被视为文本内容，而不是标记。

```
$.ajax({
    url: 'someurl',
    success: function(data) {
        $('#yourElement').text(data);
    }
}); 
```

它是不同的工作客户端到服务器端。在服务器端工作，您正在处理标记，需要对其进行转义以停止解析器将应为文本的内容视为标记。在客户端，标记已经被解析，所以你只需要告诉浏览器“这是文本内容”。这可以通过多种方式完成（`innerText`、`document.createTextNode`、甚至`document.createCDATASection`）；jQuery 的`data`方法会为您做到这一点。

# jpa - 加入 JPA 2 标准 API

> ID：12156325
> 
> 赞同：1
> 
> 时间：2012-08-28T09:24:46.110
> 
> 标签：jpa, jpa-2.0

我有 2 个域实体的基本结构：

1.  用户
2.  用户详情

用户持有（拥有）UserDetails，而 UseDetails 拥有 String userName。

使用 JPA 标准 API，我想提交一个简单的查询，该查询通过给定的用户名加载用户。

在代码中，我希望它看起来或多或少像这样：

```
public User findByUsername(String userName) {
    CriteriaBuilder qb = entityManager.getCriteriaBuilder();
    CriteriaQuery<User> c = qb.createQuery(User.class);
    Root<User> user = c.from(User.class);
    Predicate condition = qb.equal(user.get(User_.userDetails.getuserName()), userName);
    c.where(condition);
    TypedQuery<User> q = entityManager.createQuery(c);
    List<User> result = q.getResultList();

    if (result.isEmpty()) {
        return null;
    }
    return result.get(0);
} 
```

但这不起作用，因为在 User_.userDetails 下找不到 getuserName()。我想这不是这样做的方法，也许我需要在这些表（用户和用户详细信息）之间实现连接？

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:46:09.293

我现在无法尝试，但我认为您必须执行以下操作：

```
Predicate condition = qb.equal(user.get(User_.userDetails).get(UserDetails_.userName), userName); 
```

# iphone - iPhone：如何量化触摸对象的位置

> ID：12156326
> 
> 赞同：1
> 
> 时间：2012-08-28T09:24:52.857
> 
> 标签：iphone, touch, geometry, quantization

嗨，所有聪明的人！我想为 iOS 应用程序创建一个触摸界面，允许用户在屏幕上拖动一个对象。然而，这个对象应该被限制为沿着一个圆的周长移动，这样如果用户试图将这个对象拖到那个路径之外，它就会粘在那个圆的最近点上。我做过一些 iPhone 编程，但我的数学很差。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:44:25.700

您所要做的就是将视图的框架设置为遵循圆方程（形式为：`(x-a)^2 + (y-b)^2 = r^2`）。一旦检测到触摸点，您可以根据触摸点的 x 或 y 坐标来限制视图的框架（两种方式都是一样的）。

```
#define circleRadius 60.0 // r in the above eqtn
#define circlesCenter_X 160.0 // a in the above eqtn
#define circlesCenter_Y 200.0 // b in the above eqtn
#define circleCenter_y(x) sqrtf(circleRadius*circleRadius - (x-circlesCenter_X)*(x-circlesCenter_X))

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event touchesForView:firstPieceView] anyObject];
    CGPoint previousLocation = [touch previousLocationInView:self.view];
    CGPoint location = [touch locationInView:self.view];
    CGFloat delta_x = previousLocation.x - location.x; // constrained by x in this eg.
    CGFloat newX = firstPieceView.center.x-delta_x;
    // do limit the view's x-coordinate for possible solutions
    if(newX<circlesCenter_X - circleRadius)
        newX = circlesCenter_X - circleRadius;
    if(newX>circlesCenter_X + circleRadius)
        newX = circlesCenter_X + circleRadius;
    firstPieceView.center = CGPointMake(newX, circleCenter_y(newX)*(location.y>=circlesCenter_Y?1:-1) + circlesCenter_Y);
} 
```

**编辑**-更好的解决方案：

```
#define circleRadius 60.0 // r in the above eqtn
#define circlesCenter_X 160.0 // a in the above eqtn
#define circlesCenter_Y 200.0 // b in the above eqtn
#define slope(x,y) (y-circlesCenter_Y)/(x-circlesCenter_X)
#define pointOnCircle_X(m) circleRadius/(sqrtf(m*m + 1))

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event touchesForView:self.view] anyObject];
    CGPoint location = [touch locationInView:self.view];
    CGFloat slope;
    CGPoint pointOnCircle;
    if(location.x==circlesCenter_X){// case for infinite slope
        pointOnCircle.x = circlesCenter_X;
        if(location.x<circlesCenter_X){
            pointOnCircle.y = circlesCenter_Y - circleRadius;
        }else{
            pointOnCircle.y = circlesCenter_Y + circleRadius;
        }
    }else{
        slope = slope(location.x,location.y);
        if(location.x<circlesCenter_X){
            pointOnCircle.x = circlesCenter_X - pointOnCircle_X(slope);
        }else{
            pointOnCircle.x = circlesCenter_X + pointOnCircle_X(slope);
        }
        pointOnCircle.y = slope * (pointOnCircle.x - circlesCenter_X) + circlesCenter_Y;
    }
    firstPieceView.center = pointOnCircle;
} 
```

*这也可以类似地应用于`Android`,`Blackberry`等！*

# string - Lua 边界模式匹配（全词搜索）

> ID：12156327
> 
> 赞同：2
> 
> 时间：2012-08-28T09:24:55.867
> 
> 标签：string, lua, gsub, lua-patterns

有人可以帮我解决这个问题吗：

```
s_test = "this is a test string this is a test string "

function String.Wholefind(Search_string, Word)
 _, F_result = string.gsub(Search_string, '%f[%a]'..Word..'%f[%A]',"")
 return F_result
end

A_test = String.Wholefind(s_test,"string")
output: A_test = 2 
```

所以边界模式发现整个单词没有问题，gsub 计算整个单词没有问题但是如果搜索字符串有数字怎么办？

```
s_test = " 123test 123test 123"
B_test = String.Wholefind(s_test,"123test")
output: B_test = 0 
```

如果数字不在搜索字符串的开头或结尾，似乎可以使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:55:01.777

您的模式不匹配，因为您正在尝试做不可能的事情。

包含变量值后，模式如下所示`%f[%a]123test%f[%A]`：意思是：

1.  %f[%a] - 找到从非字母到字母的过渡
2.  123 - 在从非字母转换为字母后的位置找到 123。这本身在逻辑上是不可能的，因为当非字母跟随它时，您无法匹配到字母的过渡。

您的模式（如书面）不适用于以非字母开头或结尾的任何单词。

如果您需要搜索包含字母和数字的片段，那么您的模式需要更改为类似`'%f[%S]'..Word..'%f[%s]'`.

# api - Youtube 嵌入 iframe API

> ID：12156328
> 
> 赞同：1
> 
> 时间：2012-08-28T09:25:04.587
> 
> 标签：api, iframe, youtube, embed

我在使用 Youtube embed iframe api 时遇到问题。有谁知道如何不在视频末尾显示“赞”、“分享”按钮和播放器控件。我最终使用了以下参数：

`&autohide=1&showinfo=0&iv_load_policy=3&cc_load_policy=0&modestbranding=0&hd=1&wmode=transparent`

我还添加了适度的品牌选项，但它只会在视频播放时隐藏 youtube 徽标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:33:03.030

那这个呢？

```
<object width="640" height="360">
  <param name="movie" value="https://www.youtube.com/v/Zhawgd0REhA?modestbranding=1&autohide=1&iv_load_policy=3&version=3controls=0"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="allowScriptAccess" value="always"></param>
  <embed src="https://www.youtube.com/v/Zhawgd0REhA?modestbranding=1&autohide=1controls=0&iv_load_policy=3&version=3" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="360"></embed>
</object> 
```

# c++ - 无法从模板成员函数调用模板成员函数

> ID：12156334
> 
> 赞同：0
> 
> 时间：2012-08-28T09:25:52.533
> 
> 标签：c++, templates, methods

我成功地将 Set 模板实现为 AVL 平衡二叉搜索树。现在我正在尝试使代码更短且更具可读性。当将 fix_imbalance_left 和 fix_imbalance_right 合并到使用 left_or_right 模板化的 fix_imbalance 中时，我遇到了问题。我一步一步重新开始，现在我在 fix_imbalance(left_or_right,node) 并收到以下错误：

```
adts/implementations/set.cpp:224:3: error: no matching function for call to ‘Set<int>::rotate(Set<int>::nodeT*&)’
adts/implementations/set.cpp:224:3: note: candidate is:
adts/implementations/set.cpp:70:39: note: template<Set<int>::directionT DIRECTION> void Set::rotate(Set<ElemT>::nodeT*&) [with Set<ElemT>::directionT DIRECTION = L, ElemT = int] 
```

请注意，rotate(node) 模板已实现并合并（左+右到模板中），并且在使用单独的 fix_imbalance 之前成功。我已经尝试过：'this->' 并在单独的 <> 中的 fucntionname 之后指定两个模板参数，但这些都没有帮助。

你能指出我做错了什么吗？

更多代码：

```
enum directionT { LEFT=0, RIGHT=1 }; // inside class definition

template <directionT DIRECTION> void rotate(nodeT * & t); // line 70, inside class def

template <typename ElemT>
bool Set<ElemT>::fix_imbalance(directionT direction, nodeT * & node)
{
    directionT R = (direction==LEFT) ? RIGHT : LEFT;
    ...
    rotate<R>(node); // line 224
    ...
}

// this below worked before,
// when fix_imbalance_left and fix_imbalance_right were separate
// there I called rotate<LEFT>(node); and rotate<RIGHT>(node); and it worked
template <typename ElemT>
template <typename Set<ElemT>::directionT L>
void Set<ElemT>::rotate(nodeT * & t)
{ ... } 
```

对不起，我没有早点发布这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:39:17.093

我认为您正在尝试从变量实例化模板。请尝试：

```
template <typename ElemT>
bool Set<ElemT>::fix_imbalance(directionT direction, nodeT * & node)
{
    directionT R = (direction==LEFT) ? RIGHT : LEFT;
    ...
    if (R==LEFT)
         rotate<LEFT>(node); // line 224
    else
         rotate<RIGHT>(node);
    ...
} 
```

# hornetq - 没有 JMS 和 JNDI 无法启动 HornetQ

> ID：12156339
> 
> 赞同：2
> 
> 时间：2012-08-28T09:26:15.943
> 
> 标签：hornetq

如果我使用 config\stand-alone\non-clustered 配置文件运行 HornetQ，HornetQ 服务器会正​​常启动。

如果我从 hornetq-beans.xml 文件中删除 JNDI 和 JMS 部分：

```
 <!-- JNDI server. Disable this if you don't want JNDI -->
   <bean name="JNDIServer" class="org.jnp.server.Main">
      <property name="namingInfo">
         <inject bean="Naming"/>
      </property>
      <property name="port">1099</property>
      <property name="bindAddress">localhost</property>
      <property name="rmiPort">1098</property>
      <property name="rmiBindAddress">localhost</property>
  </bean> 
```

和

```
 <!-- The JMS server -->
   <bean name="JMSServerManager" class="org.hornetq.jms.server.impl.JMSServerManagerImpl">
      <constructor>         
         <parameter>
            <inject bean="HornetQServer"/>
         </parameter>
      </constructor>
  </bean> 
```

我让服务器立即死亡。这是我得到的输出：

```
C:\development\hornetQ\hornetq-2.2.14.Final\bin>run.bat ..\config\custom
A subdirectory or file ..\logs already exists.
***********************************************************************************
"java  -XX:+UseParallelGC  -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -Xms512M -  Xmx1024M -Dhornetq.config.dir=..\config\custom  
-Djava.util.logging.config.file=..\config\custom\logging.properties -java.library.path=. -classpath ..\config\custom;..\schemas\;
C:\development\hornetQ\hornetq-2.2.14.Final\lib\hornetq-bootstrap.jar;C:\development\hornetQ\hornetq-2.2.14.Final\lib\hornetq-core-client-java5.jar;
C:\development\hornetQ\hornetq-2.2.14.Final\lib\hornetq-core-client.jar;C:\development\hornetQ\hornetq-2.2.14.Final\lib\hornetq-core.jar; 
```

...ETC。

```
***********************************************************************************
* [main] 28-Aug 11:7:22,132 INFO [HornetQBootstrapServer]  Starting HornetQ Server

* [main] 28-Aug 11:7:23,91 WARNING [FileConfigurationParser]  AIO wasn't located on  this platform, it will fall back to using pure Java NIO. If your platform is Linux, install
LibAIO to enable the AIO journal

* [hornetq-shutdown-thread] 28-Aug 11:7:23,147 INFO [HornetQBootstrapServer]  Stopping HornetQ Server... 
```

如果有人能告诉我我做错了什么，我将不胜感激。

# android - 如果 cursor.getCount() 返回零，Android 将字符串添加到列表视图

> ID：12156343
> 
> 赞同：0
> 
> 时间：2012-08-28T09:26:42.303
> 
> 标签：android, listview, cursor

我正在对数据库执行一些查询，并将结果显示在`listView`.

这样做是这样的：

```
bd.open();
ListView listContent = (ListView)findViewById(android.R.id.list);
Cursor proc = bd.getData(3,0,query);

MyAdapt cursorAdapter = new MyAdapt(this, proc,0);
listContent.setAdapter(cursorAdapter); 
```

`MyAdapt`是这样的：

```
public class MyAdapt extends CursorAdapter {

    private final LayoutInflater mInflater;
    private int n;

    public MyAdapt(Context context, Cursor c, int dbColumn) {
        super(context, c);
        mInflater = LayoutInflater.from(context);
        mContext = context;
        n = dbColumn;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
            TextView fName = (TextView) view.findViewById(android.R.id.text1);
            fName.setText(cursor.getString("Something returned by the cursor")));
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        if (context.getClass().getName().equals("something")) {
            final View view = mInflater.inflate(R.layout.proclist, parent, false);
            return view;
        } else {
            final View view = mInflater.inflate(android.R.layout.simple_list_item_1, parent, false);
            return view;
        }
    }
} 
```

当我执行返回结果的查询时，这可以正常工作并显示我想要的结果。

如果查询没有返回任何内容，则不会在`listView`.

在这种情况下（查询不返回任何内容）我想显示文本`"Somenthing not found!"`。

这是我修改过的：

```
bd.open();
ListView listContent = (ListView)findViewById(android.R.id.list);
Cursor proc = bd.getData(3,0,query);
if (proc.getCount()==0) {
    LayoutInflater li = LayoutInflater.from(this);
    View layout = li.inflate(android.R.layout.simple_list_item_1, null);
    TextView fName = (TextView) layout.findViewById(android.R.id.text1);
    fName.setText(getString(R.string.notFound));
} else {
    MyAdapt cursorAdapter = new MyAdapt(this, proc,0);
    listContent.setAdapter(cursorAdapter);
} 
```

这不起作用，我不明白为什么。

有什么建议么？

谢谢

**更新**

`if statement`在删除的所有内容中遵循您的建议并将其放入：

```
 View empty = findViewById(android.R.id.empty);
            TextView emptyText = (TextView)empty.findViewById(android.R.id.empty);
            emptyText.setText(getString(R.string.notFound));
            listContent.setEmptyView(empty); 
```

这是行不通的。它给了我一个`NullPointerException`开`emptyText.setText(getString(R.string.notFound));`

这不应该是这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:32:36.403

将带有 id 的视图添加`@android:id/empty`到您的布局中。每当`ListView`为空时都会显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:06:46.793

您应该像这样使用@aprian 告诉的方式：将后续段添加到您的布局中，并且在您的 java 代码中不执行任何操作。

> ```
> <TextView android:id="@+id/android:empty"  
>     android:layout_width="wrap_content"  
>     android:layout_height="wrap_content"   
>     android:layout_marginTop="130px"  
>     android:textSize="25px"  
>     android:text="@+string/textview_text"/> 
> ```

更新，你也可以创建一个包含一个名为 ListView 的布局`@+id/android:list`并使用它加载它`setContentView`

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:gravity="center_horizontal">

 <ListView android:id="@+id/android:list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" />
 <TextView android:id="@+id/android:empty"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_marginTop="130px"
  android:textSize="25px"
  android:text="@+string/textview_text"/>
</LinearLayout> 
```

# listview - Monodroid 无尽列表

> ID：12156345
> 
> 赞同：2
> 
> 时间：2012-08-28T09:26:46.107
> 
> 标签：listview, xamarin.android

我对 monodroid 很陌生，我想知道如果你到达底部，你如何制作一个加载新项目的列表。有人可以给我一些指导方针，我应该如何处理这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:14:47.533

虽然我（还没有）亲自使用过它，但我在这个[博客/示例](http://www.elucidsoft.com/blog/2011/08/31/infinitelistview-mono-android/)上保留了一个书签。让我们知道这是否有帮助:-)

# python - 是否可以使用 Django 的固定装置更改现有数据？

> ID：12156346
> 
> 赞同：4
> 
> 时间：2012-08-28T09:26:49.647
> 
> 标签：python, django, json, unit-testing, fixtures

我在测试中使用了 Django 的固定装置。我需要创建 UserProfile 夹具。第一个问题是它指向用户条目。为了处理它，我使用自然键。所以我只是说 UserProfile 夹具的用户字段是用户夹具的实际用户名。

```
[
    {
        "pk": 8002,
        "model": "auth.user",
        "fields": {
            "date_joined": "2012-08-28 10:00:00.000000+00:00",
            "email": "",
            "first_name": "",
            "groups": [],
            "is_active": true,
            "is_staff": false,
            "is_superuser": false,
            "last_login": "2012-08-28 10:00:00.000000+00:00",
            "last_name": "",
            "password": "pbkdf2_sha256$10000$ltmEKsdCPjuK$74ZwNUh8rqFAPZ6+Cmi3tc8A94ueeXTplFqOQKlY4hc=",
            "user_permissions": [],
            "username": "user8002"
        }
    },
    {
        "pk": null,
        "model": "spam_and_eggs.userprofile",
        "fields": {
            "user": ["user8002"],
            "language": "",
            "email_activated": true
        }
     }
] 
```

不幸的是，它返回了一个错误：

```
IntegrityError: Could not load share4you.UserProfile(pk=None): column user_id is not unique 
```

第二个问题来了。我认为它可能会失败，因为 UserProfile 是在使用 Django 的信号创建用户时自动创建的，而夹具失败，因为该用户的 UserProfile 已经创建。这可能是原因吗？有什么方法可以解决吗？

感谢任何建议！

**编辑＃1：**

型号及信号：

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    language = models.CharField(max_length=255, null=True, blank=True)
    email_activated = models.BooleanField()

@receiver(post_save, sender=User)
def create_profile(instance, created, **kwargs):
    if created:
        UserProfile.objects.get_or_create(user=instance) 
```

用户模型是`django.contrib.auth.models.User`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:44:51.213

> 是否可以使用 Django 的固定装置更改现有数据？

当然，如果一个夹具有一个存在于数据库中的 pk，django 将进行更新。

> user = models.ForeignKey(User, unique=True)

这很有趣，在这种情况下为什么不是 OneToOneField 呢？

```
>>> a=User.objects.all()[0]

>>> a.userprofile_set.all()
[<UserProfile: UserProfile object>]

>> a.userprofile_set.create(language='bar')
IntegrityError: column user_id is not unique 
```

> IntegrityError：无法加载 share4you.UserProfile（pk=None）：列 user_id 不是唯一的

*   而不是`pk=null`，设置一个实整数
*   而不是`"user": ["user8002"]`，您应该设置`"user": 8002`.

> 我认为它可能会失败，因为 UserProfile 是在使用 Django 的信号创建用户时自动创建的，而夹具失败，因为该用户的 UserProfile 已经创建。

我无法重现这种行为。这些固定装置可以很好地加载和重新加载您的模型：

```
[
    {
        "pk": 1,
        "model": "auth.user",
        "fields": {
            "username": "jpic",
            "first_name": "",
            "last_name": "",
            "is_active": true,
            "is_superuser": true,
            "is_staff": true,
            "last_login": "2012-06-11T06:44:57.637Z",
            "groups": [],
            "user_permissions": [],
            "password": "pbkdf2_sha256$10000$KzsUTACvZgJU$qvywXdVv/N3s5lifS/gQxSGog36ExGbuj2U+IQ6aUNk=",
            "email": "t@tt.tt",
            "date_joined": "2012-06-11T06:44:57.637Z"
        }
    },
    {
        "pk": 1,
        "model": "test_app.userprofile",
        "fields": {
            "language": "example.com",
            "user": 1
        }
    }
] 
```

[此外，还有另一种使用django-annoying](https://bitbucket.org/offline/django-annoying/wiki/Home)创建 UserProfile 类的可能性：

```
from annoying.fields import AutoOneToOneField

class UserProfile(models.Model):
    user = AutoOneToOneField('auth.User', primary_key=True)
    home_page = models.URLField(max_length=255, blank=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:45:26.377

您可以在创建配置文件中检查原始参数。它表示，如果它来自固定装置，请检查[此](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)以获取更多详细信息。这样您就可以控制配置文件的创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:12:19.343

我建议你也看看[django-pyfixture](https://django-pyfixture.readthedocs.org/en/latest/)。这将使您的数据看起来像夹具，但更“智能”。

# algorithm - 打印和存储给定数字的不同长度排列

> ID：12156347
> 
> 赞同：2
> 
> 时间：2012-08-28T09:27:05.633
> 
> 标签：algorithm, numbers, design-patterns, permutation, placement

如果我有一个数字 2345，那么它会做什么打印：2 3 4 5 23 24 25 34 35 45 234 235 345

即打印所有可能的数字直到长度为1。？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:50:42.460

```
#include <stdio.h>
#include <string.h>
#include <math.h>

int bitcount(long bits){
    bits = (bits & 0x55555555) + (bits >> 1 & 0x55555555);
    bits = (bits & 0x33333333) + (bits >> 2 & 0x33333333);
    bits = (bits & 0x0f0f0f0f) + (bits >> 4 & 0x0f0f0f0f);
    bits = (bits & 0x00ff00ff) + (bits >> 8 & 0x00ff00ff);
    return (bits & 0x0000ffff) + (bits >>16 & 0x0000ffff);
}

void select(const char *src, char *select, unsigned int pattern){
    for(;pattern;++src, pattern >>= 1)
        if(pattern & 1)
            *select++ = *src;
    *select ='\0';
}

int main(){
    const char* selectList = "2345";
    char buff[sizeof(selectList)/sizeof(char)+1];
    int len = strlen(selectList);
    int max = pow(2, len) -1;
    int i, j;
    for(i = 1; i<len;++i){
        //j:bit pattern
        for(j = 1; j<max;++j){
            if(i==bitcount(j)){
                select(selectList, buff, j);
                printf("%s\n", buff);
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:17:00.480

使用 depth-first-search(dfs) 你可以做到这一点，这是一个例子：

```
#include <cstdio>
#include <cstring>

char s[10];
char a[10];

void doSomething(char* s){
    printf("%s\n", s);
}

void dfs(int x, int y){
    if (!s[x]){
        a[y] = 0;
        doSomething(a);
        return;
    }
    dfs(x + 1, y);
    a[y] = s[x];
    dfs(x + 1, y + 1);
}

int main(){
    scanf("%s", s);
    dfs(0, 0);
    return 0;
} 
```

# javascript - javascript：如何使用相同的数据制作多个组合框

> ID：12156348
> 
> 赞同：2
> 
> 时间：2012-08-28T09:27:04.963
> 
> 标签：javascript, html, jsp

我在 JSP 中有一个场景，我必须用一个包含 10 个项目的列表进行组合，比如说 1,2,3.... 10\. 现在我选择一个组合。我还需要提供一个添加按钮，该按钮将添加另一个具有相同元素的组合，除了在前一个组合中选择的元素。

例如 - 如果第一个组合选择的值为 1，那么在下一个组合中，我将列表设为 2、3、4.....10，即有 9 个元素，依此类推。用户可以像这样添加 10 个组合，每个组合都有以前没有选择过的项目。

谁能帮我这个？？？提前致谢 ：） ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:45:45.707

只是为了清除问题，您的情况是您有 10 个组合框，其中包含从 1 到 10 的值...我建议您可以使用 case 语句或多个 if 语句，您可以使用 javascript...

# c# - 有没有办法将 %APPDATA% 添加到 AssemblyInfo.cs 中的 Log4Net 配置路径？

> ID：12156351
> 
> 赞同：1
> 
> 时间：2012-08-28T09:27:12.717
> 
> 标签：c#, .net, logging, log4net, relative-path

我正在配置 log4net 以使用单独的配置文件。这可以通过在您的 AssemblyInfo.cs 文件中添加以下行来完成。

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "Log4Net.config", Watch = true)] 
```

这个位置是相对于程序目录的，但我希望它在用户的 APPDATA 文件夹中。就像是：

```
ConfigFile = @"C:\Users\UserName\AppData\Roaming\MyApplication\Logging\Log4Net.config" 
```

问题是这不是相对路径，即不支持不同的用户名等。我真正想要的是以下内容：

```
ConfigFile = @"%APPDATA%\MyApplication\Logging\Log4Net.config" 
```

这当然行不通。我希望这可以解决它：

```
ConfigFile = @"${APPDATA}\MyApplication\Logging\Log4Net.config" 
```

或这个：

```
ConfigFile = Path.Combine(
    Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),
    @"MyApplication\Logging\Log4Net.config") 
```

没运气。前两个只是认为它是相对路径的一部分，后者被拒绝，因为它在 AssemblyInfo 中：

> 错误 1 ​​属性参数必须是属性参数类型 C:\Source\ ... \Tools\Logging\Logging\Properties\AssemblyInfo.cs 的常量表达式、typeof 表达式或数组创建表达式 39 56 Logging

我是否必须将应用程序配置为在启动时使用自定义路径？我真的不想，因为我希望代码尽可能不可知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:42:22.340

我最终在启动时执行了配置。在实现我的日志外观时，我刚刚说过：

```
class Log4NetLogger : ILogger
{
    public Log4NetLogger(...)
    {
        if (!m_Configured){
            string configFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), @"MyApplication\Logging\Log4Net.config");
            log4net.Config.XmlConfigurator.ConfigureAndWatch(new FileInfo(configFile));
            m_Configured = true;
        }
        ...
    }
    ...
} 
```

# android - 为什么不是所有 mp4 视频都在 Android 设备上播放？

> ID：12156358
> 
> 赞同：0
> 
> 时间：2012-08-28T09:27:27.303
> 
> 标签：android, video, mp4, playing

我尝试在 Android 设备上通过视频视图播放以下两个 url，第一个工作正常，但第二个不工作。第二个可能需要 ssl 证书，但我不知道如何播放它在我尝试播放时出现的错误代码是：

```
 E/MediaPlayer error (1, -4) 
```

我检查了一个提到错误代码列表的链接，它说 error(1,-4) 表示 NotSupportedFormat。那么为什么这个错误没有出现在第一个链接中，尽管两个视频链接都是 .mp4

第一个工作链接：

```
 http://i250.photobucket.com/download-albums/gg264/APT08/APTAd3.mp4 
```

第二个不起作用的链接：

```
 http://*********/xxxxxxxxxxxxxxxxxxxxx.mp4
  https://**********/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.mp4 
```

注意1：我问了一个与此相关的问题，它有助于播放第一个链接，但第二个仍然无法在 android 设备上运行

注意2：我正在使用以下代码播放两个链接：

```
 VideoView myVideo = (VideoView) findViewById(R.id.videoView1);
         myVideo.setVideoPath("https://*********/bbbbbbbbbbbbbbbbbbb.mp4");
//       myVideo.setVideoURI(Uri.parse("https://*************/bbbbbbbbbbbbbbbbbbbbbbbbb0.mp4"));
    MediaController mc = new MediaController(this);
    mc.setMediaPlayer(myVideo);
    myVideo.setMediaController(mc);
    myVideo.requestFocus();
    mc.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:31:27.493

我们没有对 android 3.0 的 https 播放支持 - 仅从 3.0 及更高版本参考[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

# css - 很清楚：两者；多余的？

> ID：12156368
> 
> 赞同：0
> 
> 时间：2012-08-28T09:28:31.280
> 
> 标签：css

是否可以模仿`clear: both;`使用`clear: left;`或`clear: right;`在所有可能情况下的行为？因此，它可以被认为是多余的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:30:53.183

如果你写

```
someSelector {
 clear: left;
 clear: right;
} 
```

只取两个值中的一个，这根本不等于

```
someSelector {
 clear: both;
} 
```

参数参考`clear`：[https ://developer.mozilla.org/en-US/docs/CSS/clear](https://developer.mozilla.org/en-US/docs/CSS/clear)

`left`注意：如果在第一条规则中应用了第一个 ( ) 或最后一个 ( ) 值，则可能存在一个文档，`right`但由于在规则中具有两次相同的参数总是一个错误，我不会寻找它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:32:50.340

`clear: left`

元素移动到源文档中较早元素产生的任何左浮动框的底部外边缘下方。

`clear: right`

元素移动到源文档中较早元素产生的任何右浮动框的底部外边缘下方。

`clear: both`

该元素移动到源文档中早期元素的所有浮动框下方。

[来自 http://css.maxdesign.com.au/floatutorial/clear.htm](http://css.maxdesign.com.au/floatutorial/clear.htm)

clear left&right 不经常使用，当您只需要清除浮动的一侧时，它们有一个利基案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:33:41.550

如果您*知道*前面的元素是向左浮动的，那么编写`clear: left`就足够了。同样对于`float: right`。但是，如果您不知道前面的元素浮动到哪一侧，那么`clear: both`它会派上用场，因为您无法以其他方式组合`clear: left`and `clear: right`。

# javascript - 在覆盖方法中使用基本方法

> ID：12156377
> 
> 赞同：0
> 
> 时间：2012-08-28T09:28:50.273
> 
> 标签：javascript

我需要重写一个方法并在重写的方法中使用基方法。

到目前为止我想出了这个

[http://jsfiddle.net/tyR8Q/](http://jsfiddle.net/tyR8Q/)

但我想知道这是否是解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-24T14:06:25.040

关键是使用函数的应用方法。

这是我的解决方案：

```
function Super(x){this.x = x}
Super.prototype.method = function(y){console.log("Super " + this.x + y)}

function Sub(x){Super.apply(this, arguments)}
Sub.prototype = Object.create(Super.prototype)
Sub.prototype.constructor = Sub
Sub.prototype.method = function(y){
  Super.prototype.method.apply(this, arguments)
}

var sub = new Sub(1)
sub.method(2) 
```

我试图尽可能地遵循标准，在构造函数中定义类的字段，在原型中定义方法，并为子类创建一个新函数。

注意我调用了超类的构造函数和方法。

# blackberry - 在 BlackBerry BitmapField 上设置宽度和高度

> ID：12156378
> 
> 赞同：0
> 
> 时间：2012-08-28T09:28:50.897
> 
> 标签：blackberry, java-me

如何在 BlackBerry 中设置 BitmapField 的宽度和高度？以下代码有效，但我无法显示整个图像。显示屏仅显示我图像的一部分。

```
 BitmapField bmp = new BitmapField(connectServerForImage(ImageUrl)) {
       protected void layout(int width, int height) 
       {
          setExtent(80, 70);
       }
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:16:19.340

我假设您是说您`BitmapField`正在显示您检索到的图像**裁剪**？

而且您希望它可以缩放，也许可以缩放以适合您的`BitmapField`? 有很多方法可以做到这一点，但一种是在下载后调整图像大小，然后再将其提供给`BitmapField`：

[从这个关于调整位图大小的答案](https://stackoverflow.com/a/2268027/119114)

```
public static Bitmap resizeImage(Bitmap originalImage, int newWidth, int newHeight) {
    Bitmap newImage = new Bitmap(newWidth, newHeight);
    originalImage.scaleInto(newImage, Bitmap.FILTER_BILINEAR, Bitmap.SCALE_TO_FILL);
    return newImage;
} 
```

（请注意，如果您必须支持 BlackBerry OS < 5.0，我提供的链接有另一种调整图像大小的方法）。

然后，使用

```
Bitmap img = resizeImage(connectServerForImage(ImageUrl), 80, 70);
BitmapField bmp = new BitmapField(img) {
       protected void layout(int width, int height) 
       {
          setExtent(80, 70);
       }
}; 
```

但是，我相信如果你真的将 的大小设置`Bitmap` `img`为 80x70，那么就没有必要将 的范围**也**设置`BitmapField`为 80x70。它应该默认为您提供的图像的大小。因此，您可以将代码简化为：

```
BitmapField bmp = new BitmapField(img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:51:27.823

```
 int prefWidth=(30*bitmap.getWidth())/bitmap.getHeight();
 Bitmap temp=resizeBitmap(bitmap,prefWidth,30); 
```

在哪里

```
 private Bitmap resizeBitmap(Bitmap image, int width, int height)
{   

    int rgb[] = new int[image.getWidth()*image.getHeight()];
    image.getARGB(rgb, 0, image.getWidth(), 0, 0, image.getWidth(), image.getHeight());
    int rgb2[] = rescaleArray(rgb, image.getWidth(), image.getHeight(), width, height);
    Bitmap temp2 = new Bitmap(width, height);
    temp2.setARGB(rgb2, 0, width, 0, 0, width, height);
    return temp2;
} 
```

本支持bb os 4.5

# ios - ARC 项目中的“缺少 [super dealloc]”警告

> ID：12156379
> 
> 赞同：5
> 
> 时间：2012-08-28T09:28:51.720
> 
> 标签：ios, xcode, automatic-ref-counting

我已经将一个项目重构为 ARC。看起来不错，但是有一个对象使用了通知中心。我在自定义 dealloc 方法中删除了观察者。这在非 ARC 项目中运行良好。它也适用于 ARC，但我收到一个疯狂的警告：“方法可能缺少 [super dealloc] 调用。” 在 ARC 项目中，当方法结束时，它会自动为我完成。更好的是：我不能在 ARC 项目中调用它！这一定是一个 XCode 错误，对吧？这是我的代码：

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    // [super dealloc]; will be called automatically
} 
```

我一直想编写不会引发警告的代码。有没有办法绕过那个黄色感叹号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T12:19:16.757

将以下行放入您的 dealloc 方法中，以确保在启用 ARC 的情况下对其进行编译：

```
#if ! __has_feature(objc_arc)
#error "ARC is off"
#endif 
```

如果在构建时遇到编译器错误，则可以确定 ARC 已关闭，必须查找原因。它可能在您的目标中的每个文件构建设置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T08:25:59.160

我确实通过以下步骤解决了这个警告：

1.  点击target( `<yourapp>.xcodeproj`)，其中file( `<classname>.m`)类显示上述警告
2.  选择**目标**>>**构建阶段**>>**编译源**
3.  搜索文件
4.  添加**编译器标志** `-fobjc-arc`

这看起来像下面

[![在此处输入图像描述](../Images/f61b8a7ed7bdc16088971d5f5511019c.png)](https://i.stack.imgur.com/WuyI9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T15:59:59.073

*“你试过把它关掉再打开吗？”*

这是一个愚蠢的答案，但是清理目标***并重新启动 Xcode***已经为我解决了这个非常恼人的行为

*   菜单 > 产品 > 清洁
*   菜单 > 产品 >（按 alt 键）清理项目文件夹
*   重启 Xcode

在那之后，我收到了更多与 ARC 相关的警告，很明显，Xcode 还没有完成转换为 ARC。现在警告消失了，一切正常。

# nhibernate - NHibernate 急切加载 FetchMany 仅用于子类

> ID：12156381
> 
> 赞同：3
> 
> 时间：2012-08-28T09:28:53.770
> 
> 标签：nhibernate, subclass, eager-loading

我有以下（简化的）层次结构：

```
class Account
{
    AccountType Type;
    long Id;
    string Name;
}

public enum AccountType
{
    UsualAccount = 0,
    SpecialAccount = 1
}

class SpecialAccount : Account 
{
    List<SpecialItem> SpecialItems;
}

class SpecialItem
{
    long Id;
    string Name;
} 
```

为了帮助 NHibernate 检测子类 SpecialItem，我在 Account 映射中使用以下代码：

```
<discriminator column="Type" formula="Type"/> 
```

和 SpecialItems 在映射中设置了lazy="false"，但据我所知，它在 LINQ 查询期间被忽略。

现在当我使用 LINQ 并调用

```
Session.Query<Account>().ToList(); 
```

我看到 SpecialItems 是在单独的查询中获取的。我想急切地加载它们。

我可以使用

```
Session.Query<Account>().FetchMany(a => a.SpecialItems).ToList(); 
```

但有一个问题 - SpecialItems 是 SpecialAccount 的属性。因此，仅当 a 是 SpecialAccount 类时，我才需要 FetchMany 才能工作。

我什至尝试了一些丑陋的东西：

```
Session.Query<Account>().
    FetchMany(a => (a is SpecialAccount ? (a as SpecialAccount ).SpecialItems : null)); 
```

但 NHibernate 仍然在单独的查询中选择了 SpecialItems。

**如何让 NHibernate 在单个查询中为 SpecialAccount 选择 SpecialItems？**

附加信息

我正在使用 MS SQL Express 2012 和 NHibernate 配置有以下几行：

```
<property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
<property name="adonet.batch_size">50</property>
<property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property> 
```

NHibernate.dll 版本 3.2.0.4000

以下是 NHibernate 为 Id=2 的一个现有 SpecialAccount 生成的查询，它们出现在 MS SQL Profiler 中（带有选定事件 RPCCompleted、Exec Prepared SQL、SQL:StmtCompleted）：

```
select account0_.Id as Id5_, account0_.Type as Type5_, account0_.Name as Name5_, account0_.Type as clazz_ from tAccount account0_ 

exec sp_executesql N'SELECT specialite0_.AccountId as Id1_, specialite0_.Id as specialite1_1_, specialite0_.Id as specialite1_13_0_, specialite0_.Name as Name13_0_ 
FROM tSpecialItem specialite0_ WHERE specialite0_.Id=@p0',N'@p0 bigint',@p0=2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:54:33.120

您不能进行“条件提取”。您至少需要两个查询。

但是，您可以使用**Future** LINQ 查询对它们进行分组，因此它实际上是一次往返：

```
session.Query<SpecialAccount>().FetchMany(x => x.SpecialItems).ToFuture();
var accounts = session.Query<Account>().ToFuture(); 
```

当您枚举时，这两个查询都会运行`accounts`。我们没有*显式*存储第一个查询的结果，而是将`SpecialAccounts`它们与相应的`SpecialItems`集合一起加载到内存中，因此没有额外的数据库调用。

# javascript - HTML5 画布 base64

> ID：12156388
> 
> 赞同：1
> 
> 时间：2012-08-28T09:29:20.393
> 
> 标签：javascript, html, canvas, base64

[![在此处输入图像描述](../Images/c0c9ae2c53fa72e2f083266060bf8dc2.png)](https://i.stack.imgur.com/BZuOi.jpg)

我正在尝试将图像保存在特定的画布上并将其复制到另一个画布上。我使用 base64 编码将其保存为字符串。我的问题是我似乎在从编码到解码的过程中丢失了一些信息。我怎么能阻止这个？我也附上了图片

```
 SignatureCapture.js

            function SignatureCapture( canvasID ) {
this.touchSupported = Modernizr.touch;
this.canvasID = canvasID;
this.canvas = $("#"+canvasID);
this.context = this.canvas.get(0).getContext("2d"); 
this.context.strokeStyle = "#000000";
this.context.lineWidth = 1;
this.lastMousePoint = {x:0, y:0};

this.canvas[0].width = this.canvas.parent().innerWidth();

if (this.touchSupported) {
    this.mouseDownEvent = "touchstart";
    this.mouseMoveEvent = "touchmove";
    this.mouseUpEvent = "touchend";
}
else {
    this.mouseDownEvent = "mousedown";
    this.mouseMoveEvent = "mousemove";
    this.mouseUpEvent = "mouseup";
}

this.canvas.bind( this.mouseDownEvent, this.onCanvasMouseDown() );
    }

    SignatureCapture.prototype.onCanvasMouseDown = function () {
var self = this;
return function(event) {
    self.mouseMoveHandler = self.onCanvasMouseMove()
    self.mouseUpHandler = self.onCanvasMouseUp()

    $(document).bind( self.mouseMoveEvent, self.mouseMoveHandler );
    $(document).bind( self.mouseUpEvent, self.mouseUpHandler );

    self.updateMousePosition( event );
    self.updateCanvas( event );
}
       }

    SignatureCapture.prototype.onCanvasMouseMove = function () {
var self = this;
return function(event) {

    self.updateCanvas( event );
    event.preventDefault();
    return false;
}
    }

        SignatureCapture.prototype.onCanvasMouseUp = function (event) {
var self = this;
return function(event) {

    $(document).unbind( self.mouseMoveEvent, self.mouseMoveHandler );
    $(document).unbind( self.mouseUpEvent, self.mouseUpHandler );

    self.mouseMoveHandler = null;
    self.mouseUpHandler = null;
}
     }

      SignatureCapture.prototype.updateMousePosition = function (event) {
var target;
if (this.touchSupported) {
    target = event.originalEvent.touches[0]
}
else {
    target = event;
}

var offset = this.canvas.offset();
this.lastMousePoint.x = target.pageX - offset.left;
this.lastMousePoint.y = target.pageY - offset.top;

   }

   SignatureCapture.prototype.updateCanvas = function (event) {

this.context.beginPath();
this.context.moveTo( this.lastMousePoint.x, this.lastMousePoint.y );
this.updateMousePosition( event );
this.context.lineTo( this.lastMousePoint.x, this.lastMousePoint.y );
this.context.stroke();
    }

      SignatureCapture.prototype.toString22 = function () {

var dataString = this.canvas[0].toDataURL();
alert(dataString);
return dataString;

       }

     SignatureCapture.prototype.clear = function () {

var c = this.canvas[0];
this.context.clearRect( 0, 0, c.width, c.height );
      }

          main.js

    var sigCapture = null;

    $(document).ready(function(e) {

sigCapture = new SignatureCapture( "signature" );

$("#cancel").click( onCancelClick );
     });

    function onSC() {

    $("#feedback").html( "Tushar Babu23" );

    //var email = $("#email").val();
    var sig = sigCapture.toString22();
    console.log(sig)

    var img = new Image();
    img.src = sig;

    img.onload = function()
    {

    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    context.drawImage(img,0,0, 300,200);
    context.lineWidth = 5;
        }

        }

     function onCancelClick( event ) {
clearForm();
     }

    function clearForm() {
$("#email").val( "" );
sigCapture.clear();
$("#feedback").html( "" );
    }

   function requestSuccess( data, textStatus, jqXHR ) {
clearForm();
$("#feedback").html( "Thank you." );
   }

   function requestError( jqXHR, textStatus, errorThrown ) {
$("#feedback").html( "Error: " + errorThrown );
    }

   function verifyEmail() {
var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]                {1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return re.test( $("#email").val() );
   }

            index.html

   <title>Signature Capture</title>

    <script src="js/jquery-1.7.min.js"></script>
    <script src="js/modernizr.custom.34982.js"></script>

       <script src="js/application 222222.js"></script>
       <script src="js/signatureCapture.js"></script>
    <link rel="stylesheet" href="assets/styles.css" />

     </head>

     <body>

<img src="assets/phonegap.png" />

<h2>SAMPLE FORM</h2>
<div></div>

<h2>EMAIL</h2>
<input id="email" type="email" />

<h2>SIGNATURE</h2>
<div id="canvasContainer" >
    <canvas id="signature" height="200px" />
</div>

<div  id="canvasContainer">
    <canvas  id="myCanvas" height="200px" />
</div>

<div id="lowerControls">
    <div id="feedback"></div>
    <div id="buttonsContainer">
        <input type="image" onclick="onSC()" src="assets/accept.png" />
        <input type="image" id="cancel" src="assets/cancel.png" />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:30:21.150

只需使用 dataString，而不是这个奇怪的 sig 东西。

```
img.src = dataString;
img.onload = function(){
    context.drawImage(img,0,0, 300,200);
} 
```

两幅画布的尺寸是否完全相同？

# php - PHP中is_null“== NULL”和“=== NULL”之间的区别

> ID：12156395
> 
> 赞同：14
> 
> 时间：2012-08-28T09:29:41.343
> 
> 标签：php, null, identity, equality

> **可能重复：**
> [php == vs === 运算符](https://stackoverflow.com/questions/589549/php-vs-operator)

我有以下代码片段，这对我来说没有意义，为什么会以 3 种不同的方式评估 NULL。将变量`$uploaded_filenames_array`视为 UNKNOWN - 我们不知道它仍然是数组还是 NULL。这就是我们要检查的内容。

```
//-----------------------------------------------
if (is_null($uploaded_filenames_array)){
    echo "is_null";
}
else{
    echo "is_NOT_null";
}
//-----------------------------------------------
if ($uploaded_filenames_array == NULL){
    echo "NULL stuff";
}
else{
    echo "not NULL stuff";
}
//-----------------------------------------------
if ($uploaded_filenames_array === NULL){
    echo "NULL identity";
}
else{
    echo "not NULL identity";
}
//----------------------------------------------- 
```

我收到以下回复：

```
is_NOT_null 
NULL stuff 
not NULL identity 
```

有人可以帮助了解这 3 种检查 NULL 的方法之间的程序差异是什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T09:34:50.863

`is_null($a)`与 相同`$a === null`。

（`$a === null`比`is_null($a)`保存一个函数调用要快一点，但没关系，选择你喜欢的样式即可。）

和的区别`===`，`==`请阅读[PHP 类型对照表](http://www.php.net/manual/en/types.comparisons.php)

`$a === null`仅当`$a`is时为真`null`。

但是对于`==`，下面也返回`true`。

```
null == false
null == 0
null == array()
null == "" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:32:42.863

您应该阅读此[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)。也无需使用`is_null`功能仅检查`NULL`. `===`是比较快的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:32:07.120

`==`检查*值*是否相等，例如：

```
>> "123" == 123
<< true 
```

`===`检查**值和类型**是否相等，例如：

```
>> "123" === 123
<< false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T09:35:41.670

`===`操作员测试相同的值和相同的类型。空字符串可能评估为 null，但它不是该`null`类型 - 因此失败。

`==`操作员基本上检查它们是否几乎相同 - 通过这种方式，对相同的值进行评估。为空，这将评估为 null，因此失败。

该`is_null`功能进行了相当彻底的检查 - 更像`===`操作员。

# iphone - 无法解析来自 NSURLConnection 响应的 JSON 数据

> ID：12156396
> 
> 赞同：0
> 
> 时间：2012-08-28T09:29:44.717
> 
> 标签：iphone, ios, json, web-services, nsdictionary

我收到以下形式的服务器响应：

```
results are:{
    AverageMark = 40;
    "Grade A" = 10;
    "Grade B" = 20;
    "Grade C" = 30;
    "Grade D" = 20;
    MaxMark = 99;
    MinMark = 44;
    ProfileGrade = "";
    ProfileMark = 1;
} 
```

但是我无法将响应数据保存到数组中。这是我在**didReceiveResponse**中的代码：

```
 {    
        NSString *jsonString = [[NSString alloc] initWithString:responseData];
        NSArray *jsonResults = [jsonString JSONValue];
        NSLog(@"results are:%@",jsonResults); //this log is shown above
        for (int i=0; i<[jsonResults count]; i++)
        {
            NSDictionary *AllData=(NSDictionary *)[jsonResults objectAtIndex:i]; //Program is crashing here--//
            NSMutableArray  *DataArray=[[NSMutableArray alloc]init];
            NSString *avgMarkString;
            avgMarkString=(NSString *)[AllData objectForKey:@"MaxMark"];
            [DataArray addObject:avgMarkString];
        }
    } 
```

我想将响应数据保存到名为“DataArray”的数组中。但是程序崩溃了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:37:51.070

那不是 json，试着看看这个[http://json.org/example.html](http://json.org/example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:48:06.930

鉴于 JSON 响应无效。[在此处](http://jsonlint.com/)验证您的 JSON 响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:06:37.720

您可能还没有完整的数据`-connection:didReceiveResponse:`。如果您获得有效的 statusCode（在 200-299 之间应该可以） ，则创建该类型的实例变量或属性`NSMutableData`并初始化数据 ivar 或属性。在委托方法中的数据对象上
`-connection:didReceiveResponse:`使用。最后在 数据完成后可以解析成JSON。`appendData:``-connection:didReceiveData:``-connectionDidFinishLoading:`

或者，您可以只使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)库。该库提供了一些方便的方法来处理 XML、JSON、图像等......

阅读以下页面以了解 AFNetworking 的功能：http: [//engineering.gowalla.com/2011/10/24/afnetworking/](http://engineering.gowalla.com/2011/10/24/afnetworking/)

* * *

我自己的一个项目中的一些示例代码，用于使用 NSURLConnectionDelegate 方法使用队列进行下载。URL Request 对象是一些块“回调”的 NSURLConnection 的自定义子类：

```
#pragma mark - URL connection delegate

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;

    NSRange range = NSMakeRange(200, 99);
    if (NSLocationInRange(httpResponse.statusCode, range));
    {
        self.data = [[NSMutableData alloc] init];
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [_data appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // inform caller that download is complete, provide data ...

    if (_request.completionHandler)
    {
        _request.completionHandler(_data, nil);
    }

    [self removeRequest:_request];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    DLog(@"%@", error);

    // inform caller that download failed, provide error ...

    if (_request.completionHandler)
    {
        _request.completionHandler(nil, error);
    }

    [self removeRequest:_request];
} 
```

# oracle - 如何解决 ORA 00936 缺少表达式错误？

> ID：12156399
> 
> 赞同：20
> 
> 时间：2012-08-28T09:29:45.477
> 
> 标签：oracle, oracle10g, ora-00936

```
Select /*+USE_HASH( a b ) */ to_char(date, 'MM/DD/YYYY HH24:MI:SS') as LABEL,
ltrim(rtrim(substr(oled, 9, 16))) as VALUE,
from rrfh a, rrf b,
where ltrim(rtrim(substr(oled, 1, 9))) = 'stata kish' 
and a.xyz = b.xyz 
```

上述查询的“来自”（第 3 行）部分给了我`ORA-00936 Missing EXPRESSION error`. 请帮我

**注意**:: rrfh 表不包含任何数据。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-28T09:32:01.613

去掉逗号？

```
select /*+USE_HASH( a b ) */ to_char(date, 'MM/DD/YYYY HH24:MI:SS') as LABEL,
ltrim(rtrim(substr(oled, 9, 16))) as VALUE
from rrfh a, rrf b
where ltrim(rtrim(substr(oled, 1, 9))) = 'stata kish' 
and a.xyz = b.xyz 
```

看看[FROM](http://psoug.org/definition/FROM.htm)

> 从多个表中选择您可以在 FROM 子句中包含多个表，方法是**在每个表名之间用逗号列出表**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T11:54:45.913

删除 SELECT 语句末尾的逗号 (VALUE,)，并删除 FROM 语句末尾的逗号 (rrf b,)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-03T07:35:19.143

此答案不是上述问题的答案，但它与同一主题相关，可能对搜索相同错误的人有用。

当我执行下面提到的查询时，我遇到了同样的错误。

`select OR.* from ORDER_REL_STAT OR`

上述查询的问题是**OR**是关键字，因此当我用其他别名替换它时它期望其他值它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T07:44:27.547

```
update INC.PROV_CSP_DEMO_ADDR_TEMP pd 
set pd.practice_name = (
    select PRSQ_COMMENT FROM INC.CMC_PRSQ_SITE_QA PRSQ
    WHERE PRSQ.PRSQ_MCTR_ITEM = 'PRNM' 
    AND PRSQ.PRAD_ID = pd.provider_id
    AND PRSQ.PRAD_TYPE = pd.prov_addr_type
    AND ROWNUM = 1
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T12:43:12.937

每次**插入/更新并且不使用单引号**时都会发生这种情况。当变量为空时，将导致该错误。通过使用修复它`''`

假设第一个参数是一个空变量，这里是一个简单的例子：

错误的

`nvl( ,0)`

使固定

`nvl('' ,0)`

将您的查询放入数据库软件并检查该错误。通常这是一个简单的修复

# c++ - 长双 OCI

> ID：12156403
> 
> 赞同：1
> 
> 时间：2012-08-28T09:29:53.340
> 
> 标签：c++, oracle

我正在开发一个带有 oracle OCI 库的 C++ 库。我正在从 Oracle Database 11g 数据库加载。在这里，我需要加载带有小数位的大值。在这种情况下，我需要使用 long double 而不是 double。我不确定 OCI 是否支持 long double。
根据文档 SQLT_FLT 仅适用于 float 和 double 。有人可以让我知道 OCI 是否支持 long double 以及如果支持如何检索它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:01:25.593

是和不是。

根据[floats 上的服务器文档](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i22294)，“本机”C 类型最多支持双精度 ( `BINARY_DOUBLE`)。但是，[NUMBER](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i22289)类型可以存储：

> *   1 x 10-130 到 9.99...9 x 10125 范围内的正数，**最多 38 个有效数字**
> *   从 -1 x 10-130 到 9.99...99 x 10125 的负数，**最多 38 个有效数字**

这比`long double`x86/amd64 上的精度更高。

因此，您需要使用该类型而不是`BINARY_*`. 可悲的是，[开发人员文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci03typ.htm#autoId11)说：

> 您不需要`NUMBER`用作外部数据类型。如果您确实使用它，Oracle 会以其内部 21 字节二进制格式返回数值，并在输入时期望这种格式。以下讨论仅出于完整性考虑。

另一方面，也有关于：

*   [使用 OCINumber](http://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci12oty.htm#i434059)类型；
*   [OCI 号码函数](http://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci19map003.htm#CEGCAEFC)。

AFAICS [OCINumberFromReal()](http://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci19map003.htm#i455143)支持`long double`；如果你想要更高的精度，那么你可以使用[OCINumberFromText()](http://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci19map003.htm#i460199)和十进制字符串。

# android - android：为什么客户端不发送 ssl 证书，而不是由与服务器相同的 CA 签名

> ID：12156404
> 
> 赞同：1
> 
> 时间：2012-08-28T09:29:52.873
> 
> 标签：android, ssl

我有两种情况用于创建带有客户端验证的 ssl 连接。

1- 我的 android 客户端和服务器具有由同一 CA 签名的证书，启用了服务器上的客户端验证。我在 trustmanager keystore 中加载 CA 证书，在 keymanager keystore 中加载客户端 key+cert+ca 并将其传递给 ssl.init(keymanager, trustmanager)。它工作正常，双方交换并相互验证证书。

2- 现在我有由不同 CA 签署的客户端和服务器证书，例如由 ServerCA 签署的服务器证书和由 ClientCA 签署的客户端证书。我重复上面的过程，但是当服务器要求时，客户端从不发送任何证书，为什么？

*   ssl.init 中的 keymanager 和 trustmanager 之间有什么联系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:34:13.543

服务器在[证书请求消息](https://www.rfc-editor.org/rfc/rfc4346#section-7.4.4)中的 TLS 握手期间请求客户端证书，其中包含服务器愿意接受的证书颁发机构（它们的主题 DN）列表。

客户端通常使用它来选择要发送哪个证书（并选择是否发送一个）：如果客户端有一个证书链可以通向列表中的一个 CA，它将使用该链。

在带有服务器证书的部分之后，使用`openssl s_client -connect the.host.name:443`应该向您显示可接受的 CA 列表。

如果您的客户端没有通向其中之一的链，则不太可能使用客户端证书。在这种情况下，类 Java 客户端不使用客户端证书的一个常见原因是在密钥库中导入了客户端证书而没有中间证书（请参阅[此问题](https://stackoverflow.com/a/9300727/372643)）。另一个潜在的原因是该服务器根本不知道颁发其他客户端证书的 CA（有或没有中间 CA 证书）。（我在这里假设您的服务器没有发送空列表。）

# android - 为什么要使用 DialogFragment？

> ID：12156406
> 
> 赞同：16
> 
> 时间：2012-08-28T09:29:57.973
> 
> 标签：android, dialog, android-widget

基本上对话框会在后台停用活动。因此`DialogFragment`，随着复杂性的增加，它也是如此。`DialogFragment`那么，尽管有各种`Dialog`可用的子类，为什么还要去做呢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:36:48.183

`Fragments`在您的活动中使用 with ，但要将片段呈现为对话框（窗口）使用`FragmentTransaction`并跟进片段的生命周期，您需要使用`DialogFragment`. 但是，您也可以使用 simple `Dialog`，但它与片段的生命周期无关。

根据谷歌文档：

> 如果需要，仍然可以选择将 DialogFragment 用作普通片段。如果您有一个片段在某些情况下应该显示为对话框，而其他片段则嵌入到更大的 UI 中，这将非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T16:21:34.190

FragmentDialog 是一个片段，它可以是：

1.  用作片段，例如：

    ```
    FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
    trans.add(R.id.navigation_fragment, mFriendFragment);
    trans.commit(); 
    ```

2.  用作对话框，例如：

    ```
    FragmentManager fm = getFragmentManager();
    UnsubscribeTabletFragment fragment = new UnsubscribeTabletFragment();
    fragment.show(fm, "dialog"); 
    ```

因此，如果您有一个片段，并且该片段有时用作片段，有时用作对话框，那么您应该使用这个片段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T09:32:11.403

DialogFragment 允许在您的应用程序上重用对话框的一部分。就像片段为你的布局做的一样。

在这里你有一篇关于 DialogFragment 的好文章： [http ://android-developers.blogspot.fr/2012/05/using-dialogfragments.html](http://android-developers.blogspot.fr/2012/05/using-dialogfragments.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:54:11.530

当您已经在使用片段的 android 应用程序中使用动态布局时，您需要通过操作按钮单击或其他单击在对话框中/在对话框中使用它，所以这次 dialogFragment 比普通对话框更方便。

# gridview - GridView menu in WinRT

> ID：12156414
> 
> 赞同：0
> 
> 时间：2012-08-28T09:30:32.840
> 
> 标签：gridview, menu, windows-runtime

I'm trying to create a horizontal scrolling menu in WinRT and I would like to know, how can I achieve a smilar effect as for example Minesweeper game menu (found in Windows Store). I know it could be done somehow with TemplateSelector, but for example in Minesweeper, the first group in the GridView is just selection of New game (no data needed to bind to it), so I would have to give GridView some kind of "dummy" items, which would not be very elegant. Do you have some suggestion of how to achieve the result I need?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:04:21.813

I do not see the Minesweeper game in the store, but I'm assuming you are wanting to accomplish something like is seen in the people hub when viewing people's details. Or when searching for music in the music app. There is a GridView, but there is also other items in the front. The easiest way to accomplish this is to have a ScrollViewer wrap the GridView and any other controls you want to render. You would then disable to scrollviewer for the GridView

```
 <ScrollViewer VerticalScrollMode="Disabled" HorizontalScrollMode="Auto">
        <StackPanel Orientation="Horizontal">
            <!-- First content here -->

            <GridView ScrollViewer.HorizontalScrollMode="Disabled" />
        </StackPanel >
    </ScrollViewer> 
```

# android - 如何比较android中的两个时间戳？

> ID：12156415
> 
> 赞同：6
> 
> 时间：2012-08-28T09:30:33.953
> 
> 标签：android, timestamp

我想比较两个时间戳，如果差是（-+5 分钟），那么我想显示警报对话框。

即如果当前在我们的手表下午 4 点，第二次是 4.05PM 或 3.55PM，则警报将显示，否则不显示。

谁能建议我如何解决这个问题？？

我在搜索后发现了获取时间戳的功能以及如何比较两个时间戳，但是对于这种情况，有什么方法或功能吗？

谢谢。

我的代码是：-

```
date= new Date();
currentTime = date.getTime();
if(currentTime !=0 && previousTime !=0){
   String result = (String) DateUtils.getRelativeTimeSpanString(currentTime, previousTime, 0);
 } 
```

我正在将当前时间存储到以前的时间中：-

```
if(currentTime != previousTime){
    previousTime = currentTime;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T10:04:51.780

您可以采用两种方法，具体取决于您是只想测量经过的时间，还是想设置未来的时间进行比较。

第一个类似于Sourabh Saldi的答案，记录结果来自

```
long prevEventTime = System.currentTimeMillis(); 
```

然后与 System.currentTimeMillis() 比较，直到相差超过 300000

正如您所提到的，您来自服务器的时间戳是自 1970 年 1 月 1 日以来的毫秒数。这意味着它可以直接与 System.currentTimeMillis() 进行比较。因此，使用：

```
long serverTimeStamp=//whatever your server timestamp is, however you are getting it.
//You may have to use Long.parseLong(serverTimestampString) to convert it from a string

//3000(millliseconds in a second)*60(seconds in a minute)*5(number of minutes)=300000
if (Math.abs(serverTimeStamp-System.currentTimeMillis())>300000){ 
    //server timestamp is within 5 minutes of current system time
} else {
    //server is not within 5 minutes of current system time
} 
```

* * *

另一种方法看起来更接近您已经在做的 - 使用 Date 类来存储当前时间和比较时间。要使用这些，您需要使用 GregorianCalendar 类来处理它们。打电话

```
calendar=new GregorianCalendar(); 
```

将创建一个新日历，并自动将其日期设置为当前系统时间。您还可以使用 GregorianCalendar 类中提供的所有函数，使用以下形式向前或向后滚动时间

```
calendar.add(GregorianCalendar.MINUTE, 5); 
```

或将其设置为 Date 对象的时间

```
calendar.setTime(date); 
```

* * *

在您的情况下，取决于您希望 GregorianCalendar 类和 Date 类具有 after() 方法的灵活性，因此您可能需要以下内容：

在某处创建：

```
Date currentDate=newDate(); 
```

然后设置你的报警点：

```
calendar=new GregorianCalendar(); //this initialises to the current system time
calendar.setTimeInMillis(<server timestamp>); //change to whatever the long timestamp value from your server is
calendar.add(GregorianCalendar.MINUTE, 5); //set a time 5 minutes after the timestamp
Date beforeThisDate = calendar.getTime();
calendar.add(GregorianCalendar.MINUTE, -10); //set a time 5 minutes before the timestamp
Date afterThisDate = calendar.getTime(); 
```

然后检查当前时间是否超过设置的警报点

```
currentDate.setTime(System.currentTimeMillis());
if ((currentDate.before(beforeThisDate))&&(currentDate.after(afterThisDate))){
    //do stuff, current time is within the two dates (5 mins either side of the server timestamp)
} else {
    //current time is not within the two dates
} 
```

这种方法看起来有点冗长，但您会发现它非常健壮和灵活，并且可以轻松扩展以设置远在未来的警报点，或者使用 GregorianCalendar 方法轻松设置日期小时、天或周进入未来。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T09:45:36.160

怎么样：

```
private static final long FIVE_MINUTES = 1000 * 60 * 5; //5 minutes in milliseconds

long currentTime = new Date().getTime();
long previousTime = mPreviousTime;
long differ = (currentTime - previousTime);

if (differ < FIVE_MINUTES && differ > -FIVE_MINUTES ){
  // under +/-5 minutes, do the work
}else{
  // over 5 minutes
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:43:35.600

```
 long etime = 0;
final long time1 = uptimeMillis();
/* do something */
final long time2 = uptimeMillis();
if (time2 < time1) {
    etime = Long.MAX_VALUE - time1 + time2;
} else {
    etime = time2 - time1;
} 
```

然后检查此 etime 并按要求执行！！1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:49:51.357

使用以下方法以纪元格式更改日期

```
public Long getChnagedDate(Activity act,String date) throws ParseException
{
      long epoch = new java.text.SimpleDateFormat ("MM/dd/yyyy HH:mm:ss aa").parse(date).getTime();
      return epoch/1000;
} 
```

[并检查http://www.epochconverter.com](http://www.epochconverter.com)的差异。希望它可以帮助你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T09:41:28.597

Joda time 将帮助您完成这项任务。

```
import org.joda.time.Interval; 
```

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

# perl - 是否有一个 Perl 模块可以折叠文件系统路径，例如 a/b/.. 或 a//b？

> ID：12156418
> 
> 赞同：3
> 
> 时间：2012-08-28T09:30:49.257
> 
> 标签：perl, filesystems

我正在编写一个程序，我必须删除路径中的冗余，例如

```
a/b/.. -> a
a//b   -> a/b
a/./b  -> a/b 
```

有没有现有的模块可以做到这一点？

更新：此规范化/规范化由[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#page-38)描述。我只需要路径段规范化部分。

当然，这很容易实现。我仍然想知道它是否已经被打包到某个模块中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:39:03.290

标准中未指定 URL 层次结构中元素的表单路径和含义或关系。根据服务器的不同，可能根本没有层次结构 - 拆分的元素`/`可以被视为位置或顺序可能根本没有意义。因此，没有特定的模块来处理 URL 的该任务。

但是，如果您完全确定目标服务器的工作方式，您可以简单地适应[`File::Spec`](http://p3rl.org/File%3a%3aSpec)您的需求：从 URL 中提取路径（例如使用[`URI`](http://p3rl.org/URI)），将其作为文件路径进行处理，然后将其放回原处。

考虑到您将在文件系统上使用常规文件名的评论，您甚至不需要从路径中提取任何内容 -`File::Spec`足以满足您的所有需求。

如果您希望解决（通过`File::Spec`设计）不解决. 使用和将结果打包回来。`..``splitpath``splitdir``splice``..``catdir``catfile`

# android - Activity 启动后布局不显示

> ID：12156419
> 
> 赞同：0
> 
> 时间：2012-08-28T09:30:51.523
> 
> 标签：android, xml, android-layout

我有一个调用 onItemClick 并启动另一个活动的活动。这个活动有一个静态布局（用于测试目的），但我看到的只有黑色（我什至将文本颜色设置为白色以检查它）。

我的听众

```
 list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
            //create new intent
            Intent item = new Intent(getApplicationContext(), Item.class);
            // Close all views before launching logged
            //item.putExtra("name", ((TextView)arg1).getText());
            //item.putExtra("uid", user_id);
            item.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(item);
            // Close Login Screen
            onPause();
        }
      }); 
```

我的活动在这里（没什么可做的，只是启动布局）

```
public class Item extends Activity{
protected SQLiteDatabase myDB=null;
protected String name;
protected int uid;
TextView yeart,year,itemname,comment,commentt,value,valuet,curr,currt;

protected void onStart(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.herp);
    /*name=getIntent().getStringExtra("name");
    uid=Integer.parseInt(getIntent().getStringExtra("uid"));

    itemname=(TextView) findViewById(R.id.itemName);//itemname.setText(name);
    year=(TextView) findViewById(R.id.itemYear);
    yeart=(TextView) findViewById(R.id.year);
    comment=(TextView) findViewById(R.id.itemComments);
    commentt=(TextView) findViewById(R.id.comments);
    curr=(TextView) findViewById(R.id.itemcurrent);
    currt=(TextView) findViewById(R.id.current);
    value=(TextView) findViewById(R.id.itemValue);
    valuet=(TextView) findViewById(R.id.value);*/

    Database openHelper = new Database(this);
    myDB = openHelper.getReadableDatabase(); 
    myDB=SQLiteDatabase.openDatabase("data/data/com.example.login2/databases/aeglea", null, SQLiteDatabase.OPEN_READONLY);

}} 
```

最后是我的 XML 布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
        android:id="@+id/itemName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="asdasd"
        android:gravity="center"
        android:layout_marginBottom="10px"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#fff" />

    <TextView
        android:id="@+id/current"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Current"
        android:textSize="20dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/itemcurrent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="asdasd" />

    <TextView
        android:id="@+id/year"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Year"
        android:textSize="20dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/itemYear"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="asdasd" />

    <TextView
        android:id="@+id/value"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Value"
        android:textSize="20dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/itemValue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/comments"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Comments"
        android:textSize="20dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/itemComments"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:33:00.187

你能试试这个吗

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.herp);
    /*name=getIntent().getStringExtra("name");
    uid=Integer.parseInt(getIntent().getStringExtra("uid"));

    itemname=(TextView) findViewById(R.id.itemName);//itemname.setText(name);
    year=(TextView) findViewById(R.id.itemYear);
    yeart=(TextView) findViewById(R.id.year);
    comment=(TextView) findViewById(R.id.itemComments);
    commentt=(TextView) findViewById(R.id.comments);
    curr=(TextView) findViewById(R.id.itemcurrent);
    currt=(TextView) findViewById(R.id.current);
    value=(TextView) findViewById(R.id.itemValue);
    valuet=(TextView) findViewById(R.id.value);*/

    Database openHelper = new Database(this);
    myDB = openHelper.getReadableDatabase(); 
    myDB=SQLiteDatabase.openDatabase("data/data/com.example.login2/databases/aeglea", null, SQLiteDatabase.OPEN_READONLY);

}} 
```

我认为你应该使用 onCreate() 而不是 onStart()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:34:36.790

替换`onStart()`为并从中`onCreate()`删除；.`onPause()``setOnItemClickListener()`

# cuda - cudaMemCpy2D 崩溃

> ID：12156424
> 
> 赞同：0
> 
> 时间：2012-08-28T09:31:14.600
> 
> 标签：cuda, gpgpu, gpu

我正在尝试在 cuda 中实现 Sauvola Binarization。为此，我已经读取了主机中二维数组中的图像并使用间距为设备中的二维数组分配内存。分配内存后，我试图将主机二维数组复制到设备 2d使用 cudaMemcpy2D 的数组，它编译得很好，但它在运行时崩溃了。我无法理解我错过了什么，请提出一些建议。我编写的代码如下：

```
#include "BinMain.h"
#include "Binarization.h"
#include <stdlib.h>
#include <stdio.h>
#include <conio.h>
#include <cuda.h>
#include <cuda_runtime.h>

void printDevProp(cudaDeviceProp);
void CUDA_SAFE_CALL( cudaError_t);

int main()
{
    //Read an IplImage in imgOriginal as grayscale
    IplImage * imgOriginal = cvLoadImage("E:\\1.tiff",CV_LOAD_IMAGE_GRAYSCALE);

    //Create a size variable of type CvSize for cvCreateImage Parameter
    CvSize size = cvSize(imgOriginal->width,imgOriginal->height);

    //create an image for storing the result image with same height and width as     imgOriginal
    IplImage * imgResult = cvCreateImage(size,imgOriginal->depth,imgOriginal-    >nChannels);

    //Create a 2D array for storing the pixels value of each of the pixel of imgOriginal grayscale image
    int ** arrOriginal = (int **)malloc(imgOriginal->height * sizeof(int *));
    for (int i = 0; i < imgOriginal->height; i++) 
{
    arrOriginal[i] = (int*)malloc(imgOriginal->width * sizeof(int));
}

//Create a 2D array for storing the returned device array
int ** arrReturn = (int **)malloc(imgOriginal->height * sizeof(int *));
for (int i = 0; i < imgOriginal->height; i++) 
{
    arrReturn[i] = (int*)malloc(imgOriginal->width * sizeof(int));
}

//Create a CvScalar variable to copy pixel values in 2D array (arrOriginal)
CvScalar s;

//Copying the pixl values
for(int j = 0;j<imgOriginal->height;j++)
{
    for(int k =0;k<imgOriginal->width;k++)
    {
        s = cvGet2D(imgOriginal,j,k);
        arrOriginal[j][k] = s.val[0];
    }
}

//Cuda Device Property
int devCount;
cudaGetDeviceCount(&devCount);
printf("CUDA Device Query...\n");
printf("There are %d CUDA devices.\n", devCount);

// Iterate through devices
for (int i = 0; i < devCount; ++i)
{
    // Get device properties
    printf("\nCUDA Device #%d\n", i);
    cudaDeviceProp devProp;
    cudaGetDeviceProperties(&devProp, i);
    printDevProp(devProp);
}

//Start the clock
clock_t start = clock();

//Allocating Device memory for 2D array using pitch
size_t host_orig_pitch = imgOriginal->width * sizeof(int)* imgOriginal->height; //host original array pitch in bytes
size_t dev_pitch;   //device array pitch in bytes which will be used in cudaMallocPitch
size_t dev_pitchReturn; //device return array pitch in bytes
size_t host_ret_pitch = imgOriginal->width * sizeof(int)* imgOriginal->height;  //host return array pitch in bytes

int * devArrOriginal;   //device 2d array of original image
int * result;   //device 2d array for returned array
int dynmicRange = 128; //Dynamic Range for calculating the threshold from sauvola's formula

//Allocating memory by using cudaMallocPitch
CUDA_SAFE_CALL(cudaMallocPitch((void**)&devArrOriginal,&dev_pitch,imgOriginal->width * sizeof(int),imgOriginal->height * sizeof(int)));

//Allocating memory for returned array
CUDA_SAFE_CALL(cudaMallocPitch((void**)&result,&dev_pitchReturn,imgOriginal->width * sizeof(int),imgOriginal->height * sizeof(int)));

//Copying 2D array from host memory to device mempry by using cudaMemCpy2D
CUDA_SAFE_CALL(cudaMemcpy2D((void*)devArrOriginal,dev_pitch,(void*)arrOriginal,host_orig_pitch,imgOriginal->width * sizeof(float),imgOriginal->height,cudaMemcpyHostToDevice));
    int windowSize = 19;    //Size of the window for calculating mean and variance
    //Launching the kernel by calling myKernelLauncher function.
    myKernelLauncher(devArrOriginal,result,windowSize,imgOriginal->width,imgOriginal-    >height,dev_pitch,dynmicRange);
    //Calling the sauvola binarization function by passing the parameters as 
    //1.arrOriginal 2D array 2.Original image height 3.Original image width
    //int ** result = AdaptiveBinarization(arrOriginal,imgOriginal->height,imgOriginal-    >width);//binarization(arrOriginal,imgOriginal->width,imgOriginal->height);
    //
CUDA_SAFE_CALL(cudaMemcpy2D(arrReturn,host_ret_pitch,result,dev_pitchReturn,imgOriginal->width * sizeof(int),imgOriginal->height * sizeof(int),cudaMemcpyDeviceToHost));
//create a CvScalar variable to set the data in imgResult
CvScalar ss;

//Copy the pixel values from returned array to imgResult
for(int i=0;i<imgOriginal->height;i++)
{
    for(int j=0;j<imgOriginal->width;j++)
    {
        ss = cvScalar(arrReturn[i][j]*255);
        cvSet2D(imgResult,i,j,ss);
        //k++; //No need for k if returned array is 2D
    }
}

printf("Done \n");
//calculate and print the time elapsed
printf("Time elapsed: %f\n", ((double)clock() - start) / CLOCKS_PER_SEC);

//Create a windoe and show the resule image
cvNamedWindow("Result",CV_WINDOW_AUTOSIZE);
cvShowImage("Result",imgResult);
cvWaitKey(0);
getch();

//Release the various resources
cvReleaseImage(&imgResult);
cvReleaseImage(&imgOriginal);
cvDestroyWindow("Result");
for(int i = 0; i < imgOriginal->height; i++)
    free(arrOriginal[i]);

free(arrOriginal);
free(result);
cudaFree(&devArrOriginal);
cudaFree(&result);

}

// Print device properties
void printDevProp(cudaDeviceProp devProp)
{
printf("Major revision number:         %d\n",  devProp.major);
printf("Minor revision number:         %d\n",  devProp.minor);
printf("Name:                          %s\n",  devProp.name);
printf("Total global memory:           %u\n",  devProp.totalGlobalMem);
printf("Total shared memory per block: %u\n",  devProp.sharedMemPerBlock);
printf("Total registers per block:     %d\n",  devProp.regsPerBlock);
printf("Warp size:                     %d\n",  devProp.warpSize);
printf("Maximum memory pitch:          %u\n",  devProp.memPitch);
printf("Maximum threads per block:     %d\n",  devProp.maxThreadsPerBlock);
for (int i = 0; i < 3; ++i)
printf("Maximum dimension %d of block:  %d\n", i, devProp.maxThreadsDim[i]);
for (int i = 0; i < 3; ++i)
printf("Maximum dimension %d of grid:   %d\n", i, devProp.maxGridSize[i]);
printf("Clock rate:                    %d\n",  devProp.clockRate);
printf("Total constant memory:         %u\n",  devProp.totalConstMem);
printf("Texture alignment:             %u\n",  devProp.textureAlignment);
printf("Concurrent copy and execution: %s\n",  (devProp.deviceOverlap ? "Yes" : "No"));
printf("Number of multiprocessors:     %d\n",  devProp.multiProcessorCount);
printf("Kernel execution timeout:      %s\n",  (devProp.kernelExecTimeoutEnabled ? "Yes" : "No"));
return;
}

/* Utility Macro : CUDA SAFE CALL */ 
void CUDA_SAFE_CALL( cudaError_t call) 
{ 

cudaError_t ret = call; 
switch(ret) 
{ 
    case cudaSuccess: 
         break; 
    default : 
            {
                printf(" ERROR at line :%i.%d' ' %s\n", 
                __LINE__,ret,cudaGetErrorString(ret)); 
                exit(-1); 
                break; 
            } 
} 
} 
```

代码流程如下： 1\. 在主机中从图像创建一个二维数组，并为内核返回的数组创建另一个数组。2\. 使用 CudaMallocPitch 为设备中的二维数组分配内存 3\. 为将由内核返回的二维数组分配内存。4\. 使用 cudaMemcpy2d 将原始二维数组从主机复制到设备数组。5\. 启动内核。6\. 使用 cudaMemcpy2D 将返回的设备数组复制到主机数组。

程序在到达第 4 点时崩溃。这是一个未处理的异常，说明“SauvolaBinarization_CUDA_OpenCV.exe 中 0x773415de 处的未处理异常：0xC0000005：访问冲突读取位置 0x01611778。”

我认为问题一定是在分配内存时，但我是第一次使用该功能并且不知道它是如何工作的，请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:08:40.343

首先，您没有正确调用“cudaMallocPitch”。“height”参数应该代表行数，所以不是：

```
imgOriginal->height * sizeof(int) 
```

你应该简单地使用：

```
imgOriginal->height 
```

这很好，因为每行的字节数已经包含在“pitch”属性中。然而，主要问题在于您为主机映像分配内存的方式。当你写：

```
//Create a 2D array for storing the pixels value of each of the pixel of imgOriginal grayscale image
    int ** arrOriginal = (int **)malloc(imgOriginal->height * sizeof(int *));
    for (int i = 0; i < imgOriginal->height; i++) 
{
    arrOriginal[i] = (int*)malloc(imgOriginal->width * sizeof(int));
} 
```

您正在有效地创建一个带有指向数组的指针的数组。您正在进行的 CUDA API 调用：

```
CUDA_SAFE_CALL(cudaMemcpy2D((void*)devArrOriginal,dev_pitch,(void*)arrOriginal,host_orig_pitch,imgOriginal->width * sizeof(float),imgOriginal->height,cudaMemcpyHostToDevice)); 
```

期望输入内存缓冲区是连续的。所以会发生以下情况：输入图像的第一行（总计“imgOriginal->width * sizeof(float)”字节）将从地址开始读取：

```
 (void*)arrOriginal 
```

但是，从该地址开始的有效数据量仅为“imgOriginal->height * sizeof(int *)”字节。这两个字节计数很可能不同，这将导致崩溃，因为您最终会从未知位置读取。

为了解决这个问题，考虑将“arrOriginal”分配为一个连续的块，例如：

```
int * arrOriginal = (int *)malloc(imgOriginal->height * imgOriginal->width * sizeof(int)); 
```

此外，在这种情况下，您的音调应该是：

```
 "imgOriginal->width * sizeof(int)" 
```

# c - 是否可以在预处理器期间检查结构是否在之前（在头文件中）定义？

> ID：12156425
> 
> 赞同：7
> 
> 时间：2012-08-28T09:31:18.353
> 
> 标签：c

我想检查是否在我包含的头文件中定义了某个结构，如果没有定义它。标头可能包含在源文件中，也可能不包含在源文件中，并且（显然）在编译时是已知的。

本质上，我想要类似于`ifndef`头文件中使用的保护的东西，我知道我可以`struct`通过检查它的保护来检查定义的头文件是否包含在内，但是如果我可以检查`struct`它本身，我正在徘徊。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T09:44:01.133

不。预处理器不解析 C 语言本身，它对声明的类型一无所知。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T10:08:02.027

我已经检查了 ANSI C 规范

[http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

这里预处理指令只讨论标识符。

**因此无法检查此结构是否已定义。**

# linux - 使用 supervisord 优于 monit 有什么优势

> ID：12156434
> 
> 赞同：35
> 
> 时间：2012-08-28T09:31:47.410
> 
> 标签：linux, ubuntu, monit, supervisord

我们有一个自定义设置，其中运行了多个守护进程（Web 应用程序 + 后台任务）。我正在考虑使用一种服务来帮助我们监控这些守护进程，并在它们的资源消耗超过一个级别时重新启动它们。

我会很感激任何关于什么时候比另一个更好的见解。据我了解，monit 启动了一个新进程，而 supervisord 启动了一个子进程。这种方法的优缺点是什么？

我还将使用 upstart 来监控 monit 或 supervisord 本身。webapp 部署将使用 capistrano 完成。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-12-31T09:09:27.637

我没有使用过 monit，但 supervisord 存在一些重大缺陷。

1.  程序应该在前台运行

这意味着您不能只执行 /etc/init.d/apache2 start。大多数情况下，您可以只编写一行代码，例如“source /etc/apache2/envvars && exec /usr/sbin/apache2 -DFOREGROUND”，但有时您需要自己的包装脚本。包装脚本的问题在于您最终会得到两个进程，一个父进程和一个子进程。看下一个缺陷...

2.  supervisord 不管理子进程

如果您的程序启动子进程，supervisord 不会检测到这一点。如果父进程死亡（或者如果使用 supervisorctl 重新启动），子进程将继续运行，但将被 init 进程“采用”并继续运行。这可能会阻止将来调用您的程序运行或消耗额外的资源。最近的配置选项 stopasgroup 和 killasgroup 应该可以解决这个问题，但对我不起作用。

3.  supervisord 没有依赖管理 - 见[#122](https://github.com/Supervisor/supervisor/issues/122)

我最近用 qlproxy 设置了 squid。qlproxyd 需要先启动，否则 squid 可能会失败。即使这两个程序都由 supervisord 管理，但也无法确保这一点。我需要为 squid 编写一个启动脚本，让它等待 qlproxyd 进程。添加启动脚本导致出现缺陷 2 中描述的孤立进程问题

4.  supervisord 不允许您控制 startretries 之间的延迟

有时当一个进程无法启动（或崩溃）时，这是因为它无法访问另一个资源，可能是由于网络不稳定。可以设置主管多次重启进程。在重新启动之间，该过程将进入“BACKOFF”状态，但没有文档或对回退持续时间的控制。

在其防御主管中，80% 的时间确实满足了我们的需求。配置很合理，文档也很好。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-24T09:55:36.817

如果你想额外监控资源，你应该满足于 monit。除了仅检查进程是否正在运行（可用性）之外，monit 还可以执行一些资源使用情况（性能、容量使用情况）、负载级别甚至基本安全检查（二进制文件、配置文件等的 md5sum）。它有一个基于规则的配置，非常容易理解。还有很多现成的配置：http: [//mmoni.com/wiki/Monit/ConfigurationExamples](http://mmonit.com/wiki/Monit/ConfigurationExamples)

Monit 需要进程来创建 PID 文件，这可能是一个缺陷，因为如果进程不创建 pid 文件，则必须创建一些包装器。请参阅[http://mmonit.com/wiki/Monit/FAQ#pidfile](http://mmonit.com/wiki/Monit/FAQ#pidfile)

另一方面，Supervisord 更多地绑定到一个进程，它自己产生它。它不能将任何基于资源的检查作为监视器。不过，它有一个不错的 CLI`servicectl`和一个 Web GUI。

# ravendb - 安装 SignalR 和 Raven 的 NuGet 问题

> ID：12156440
> 
> 赞同：3
> 
> 时间：2012-08-28T09:32:14.500
> 
> 标签：ravendb, nuget, signalr, json.net

我正在尝试使用 NuGet 将 SignalR 和 Raven 添加到新的 ASP.Net MVC 4 项目中。

如果我先做 SignalR，然后尝试添加 Raven，我会收到以下错误：

> 安装失败。回滚... 安装包：已经引用了较新版本的“Newtonsoft.Json”。

如果我先安装 Raven，然后 SignalR 我得到：

> 安装失败。回滚...安装包：将“Newtonsoft.Json 4.5.7”更新为“Newtonsoft.Json 4.5.8”失败。找不到与“Newtonsoft.Json 4.5.8”兼容的“RavenDB.Client”版本。

我以为 NuGet 是用来处理这类事情的？

我怎样才能同时添加它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:25:44.860

似乎 RavenDB.Client 对 Newtonsoft.Json = 4.5.7 有一个确切的版本约束，而 SignalR 有一个更宽松的“4.5.4 或更高”约束（实际上是由它自己的依赖项之一 SignalR 施加的约束。服务器）。

我设法通过一些手动调整使您的上述方案工作：

1.  创建新的 MVC4 项目
2.  打开 packages.config 并向Newtonsoft.Json 包条目添加了一个 ' **allowedVersions="[4.5.7]" ' 属性**
3.  打开包管理器控制台（查看...其他窗口...包管理器控制台）并运行**update-packages**以获取所有默认依赖项的最新代码（需要一段时间）
4.  再次在包管理器控制台中，运行**install-package RavenDB.Client**
5.  最后在包管理器控制台中，运行**install-package SignalR**

我尝试了一些上述排序的组合，但它不喜欢它 - 让它工作的东西似乎是手动编辑 packages.config 以将 Newtonsoft.Json 的版本锁定为 4.5.7，以便后续安装不要不要丢弃引用的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:23:31.337

我们遇到了这个确切的问题，但最终手动拉入了 Raven 程序集（因此我们可以针对特定版本）。

我们遇到的是可以强制 Nuget 使用命令行工具安装包： [如何通过 NuGet 安装旧版本的包？](https://stackoverflow.com/questions/10206090/how-to-install-an-older-version-of-a-nuget-package)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:03:37.443

我遇到了同样的问题，但决定安装旧版本的 SignalR。4.0 版（2012 年 2 月）依赖于 NewtonSoft >= 4.0.7，并且在 RavenDB 已安装的情况下正确安装：

```
Install-Package SignalR -Version 0.4.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T18:14:15.483

我在使用 Raven 和标准 MVC 模板时遇到了同样的问题。我想要最新版本的 Newtonsoft.Json，所以我以不同的方式解决了它。我检查了 RavenDB 客户端有哪些依赖项，然后首先安装了它们的最新版本 Newtonsoft.Json 和 NLog 然后我在数据包管理器控制台中使用 -IgnoreDependencies 标志安装了数据包。

```
Install-Package -Id RavenDB.Client -IgnoreDependencies 
```

那工作得很好。（我冒着风险，RavenDB 目前与最新的 Newtonsoft.Json 不兼容。但我是一个夜魔侠）

# ios - iOS：故事板转场

> ID：12156441
> 
> 赞同：0
> 
> 时间：2012-08-28T09:32:16.963
> 
> 标签：ios, uiviewcontroller, storyboard, segue

目前我正在为一个 IPad 应用程序工作，该应用程序在第一个场景上显示幻灯片 - 使用分页 UIScrollView 实现。当我单击幻灯片中的一个页面时，我想推送一个新的 VC（到一个新场景，它应该呈现多个缩略图......如果你想要的话，一种细节层）。

我怎样才能通过 segue 做到这一点？目前，我只是拔出一个新的 VC 并将 SlideshowVC 与场景中的下一个 VC 连接起来 - 但没有任何反应。我围绕着几个教程转了转，但其中大多数都使用连接到下一个 VC 的按钮。是否能够简单地将 SlideshowVC 与下一个 VC 连接起来，还是我真的需要在整个滚动视图上绑一个按钮并将按钮与下一个 VC 连接？

目前我的场景如下图所示。第一个是 NavVC - 第二个是 SlidehsowVC，第三个是 DetailVC。 ![在此处输入图像描述](../Images/b253e0bbde76a466205db737c96cc2d9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:02:30.180

如果您不想将 segue 连接到按钮，当您拦截用户交互时，只需执行此操作 -

```
[self performSegueWithIdentifier:@"mySegueIdentifier" sender:self]; 
```

如果您需要在到达那里之前进行任何设置，请使用它 -

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"mySegueIdentifier"]) {
        MyViewController *myViewController = segue.destinationViewController;
        // do something here
    }
} 
```

# iphone - 在ios中制作圆形的MKMapView？

> ID：12156442
> 
> 赞同：0
> 
> 时间：2012-08-28T09:32:18.090
> 
> 标签：iphone, objective-c, ios, mapkit

我正在开发一个应用程序，我必须使用 制作地图`MKMapView`，但形状为圆形？

关于这一点的任何想法，任何线索都会有所帮助。

在屏幕截图中看到，你会明白我在问什么。

请参阅圆圈中的地图。

![查看圆圈中的地图](../Images/07a93ce9c928b11d30746aa30ad79421.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:41:03.613

这是一个棘手的方法，但它可能是你想要的！

添加`QuartzCore.framework`

```
#import <QuartzCore/QuartzCore.h>

//make circled shape

[yourMapView.layer setMasksToBounds:YES];
[yourMapView.layer setCornerRadius:160.0]; //here you've to pass width of yourMapView / 2 
```

很高兴看到更多的答案！！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:19:59.727

首先，如果您在使用卫星/航拍照片时这样做，您将违反[Google 地图服务条款](https://developers.google.com/maps/iphone/terms)。

> 10 许可限制。除非本条款明确允许，或者除非您事先获得 Google（或，如适用，特定内容的提供者）的书面授权，否则上述 Google 的许可受您遵守以下所有限制的约束。除非第 7 节明确允许，否则您不得（也不得允许其他任何人）：
> 
> ...
> 
> 10.7 删除、隐藏或以任何方式更改出现在服务或内容中的任何警告、通知（包括但不限于任何版权或其他所有权通知）或链接；

任何通告`MKMapView`都可能会掩盖与照片一起显示的版权声明。

我们可能预计`MKMapView`很快会从使用 Google 数据更改为使用 Apple 数据，但可能会有类似的文本，您不能混淆。

* * *

有了这个，有两种方法可以使这项工作：

1.  创建一个`UIView`具有透明背景的子类，使其`drawRect`方法围绕一个圆形孔绘制，并使其`pointInside:withEvent:`方法返回`NO`同一个孔。将这些视图之一放在您的`MKMapView`.
2.  创建一个`CAShapeLayer`不透明的圆形（或任何其他形状）并使其成为`mask`自己`MKMapView`的`layer`. 这将允许圆形地图出现在任何地方，但仍然可以与其不可见的角落进行交互。

# android - Android中的墙纸服务示例

> ID：12156445
> 
> 赞同：6
> 
> 时间：2012-08-28T09:32:27.520
> 
> 标签：android, live-wallpaper

如何在 Android 中使用壁纸服务？

# algorithm - 用一个整数表示一组整数的算法

> ID：12156450
> 
> 赞同：0
> 
> 时间：2012-08-28T09:32:38.850
> 
> 标签：algorithm, integer, set

这可能不是编程问题，而是最近在工作中出现的问题。一些背景：对性能特别感兴趣的大 C 开发。

我有一组整数，想测试另一个给定整数的成员资格。我很想实现一个算法，它可以用最小的代数函数集来检查它，只使用一个整数来表示第一个集合中包含的整个整数空间。

例如，我尝试过复合康托尔配对功能，但是对于 30 个元素的集合，它似乎太复杂了，并且专注于性能是没有意义的。我玩过一些操作，比如 XORing 和 negating，但它让我对成员资格的估计很低。然后我尝试了连续添加，最后迷路了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:51:11.340

对于`unsigned long`大小为 30 的集合，以下是一种相当明显的方法：

*   将每个集合存储为一个排序数组，`30 * sizeof(unsigned long)`每个集合的字节数。
*   要查找一个整数，先进行几步二分搜索，然后进行线性搜索（配置文件以找出最好的二分搜索步数 - 我的疯狂猜测是 2 步，但您可能会发现不同，当然，如果您测试`bsearch`并且速度足够快，则可以使用它）。

所以下一个问题是为什么你想要一个大数学的解决方案，它会告诉我这个解决方案除了“它不够令人愉快”之外还有什么问题。

我怀疑任何大数学解决方案都会比这慢。对 N 位数字的单个算术运算至少需要 N 中的线性时间。表示一个集合的单个数字不能比该集合的元素首尾相连并在其间有分隔符小很多。因此，即使是在集合中的线性搜索也与对大数的单个算术运算一样快。除了 Goedel 表示可能的例外，一旦你找到了`n`第 th 个素数，它可以在一次除法中完成，任何聪明的集合的数学表示都将需要多次算术运算来建立成员资格。

另请注意，您可能关心“在集合中查找整数”的性能有两个不同的原因：

*   您正在单个集合中查找许多不同的整数，在这种情况下，您*可以*通过为该数据构建自定义查找函数来加快速度。当然，在 C 语言中，这意味着您需要 (a) 一个简单的虚拟机来执行该“功能”，或者 (b) 运行时代码生成，或者 (c) 在编译时知道集合。这些都不一定是容易的。
*   您正在许多不同的集合中查找相同的整数（以获取它所属的所有集合的序列），在这种情况下，您可能会受益于您关心的所有集合的组合表示，而不是单独考虑每个集合.

我想你可能偶尔会查找很多不同的整数，每个整数都在不同的集合中，所以这两个原因都不适用。如果这是其中之一，你可以忽略那些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:38:38.303

一个好的开始是尝试[Bloom Filters](http://en.wikipedia.org/wiki/Bloom_filter)。基本上，它是一种概率数据结构，不会给您带来误报，而是给您一些误报。因此，当一个整数与布隆过滤器匹配时，您必须检查它是否真的与集合匹配，但通过减少要检查的集合数量，这是一个很大的加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:39:05.367

如果我理解正确，python 示例：

```
>>> a=[1,2,3,4,5,6,7,8,9,0]
>>>
>>>
>>> len_a = len(a)
>>> b = [1]
>>> if len(set(a) - set(b)) < len_a:
...     print 'this integer exists in set'
...
this integer exists in set
>>> 
```

数学基础：[http ://en.wikipedia.org/wiki/Euler_diagram](http://en.wikipedia.org/wiki/Euler_diagram)

# html - 用于生成守护进程的 CGI Bash 脚本

> ID：12156452
> 
> 赞同：2
> 
> 时间：2012-08-28T09:32:41.093
> 
> 标签：html, apache, bash, cgi, daemon

我正在开发一个项目，将 HDTV 从个人计算机流式传输到支持 HTTP 实时流式传输的设备（想想 iOS 设备和一些 android）。我有视频的格式和流媒体方面的内容。我现在尝试实现的是一种远程更改频道的简单方法。

我当前的方法包括通过 SSH 连接以终止旧流并开始新流。这有效，但并不漂亮。我想要我妈妈或女朋友可以使用的东西。我决定构建一个 HTML5 应用程序，通过 CGI 脚本发出频道切换。我目前有一个父进程，它调用一个子进程来决定流是否正在运行，然后是一个子进程来实际调整流。

当我从我的计算机流式传输实时视频时，我需要子进程无限期地运行。**不幸的是，当我的父进程完成时，子进程中启动的后台进程似乎终止了。**

我尝试了一个简单的 &，使用 nohup、setsid 和守护进程。守护进程运行最干净，但在父进程完成时仍会终止。即使带有 -r 标志。我将把我的代码放在下面，也许有人会对我如何实现这个或更好的方法来实现同样的事情有一个想法？谢谢！（哦，我知道杀死 vlc 不是杀死流的好方法，如果你有更好的方法，我全神贯注）

```
parent invoking child:
----------------------
./ChangeChannel.sh $channel     #passed from form submission

child (ChangeChannel.sh):
-------------------------
#!/bin/bash

directory=./Channels/
newchannel=$1

if [ $(pidof vlc) ]
    then
        sudo kill $(pidof vlc)
fi
daemon -r -v -d $directory$newchannel &

subchild example:
-----------------
vlc atsc://frequency=605029000 --intf=dummy --sout-transcode-audio-sync :live-cache=3000 --sout='#transcode{vcodec=h264,vb=150,fps=25,width=480,scale=1,venc=x264{aud,profile=baseline,level=30,keyint=15,bframes=0,ref=1},acodec=aac,ab=40,channels=2,samplerate=22050}:duplicate{dst=std{mux=ts,dst=-,access=livehttp{seglen=16,delsegs=true,numsegs=10,index=/var/www/stream/live.m3u8,index-url=content/live-######.ts},mux=ts{use-key-frames},dst=/var/www/stream/content/live-######.ts,ratecontrol=true}}' 
```

我怎样才能防止子孩子终止？？？在 Ubuntu 12.04 上运行 Apache

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:08:19.853

我得到了它！

对于任何对如何感兴趣的人，我改变了我的策略，使用 nohup、&、disown 和 > /dev/null 2>&1。

老实说，我仍然不太确定它是如何工作的……只是通过一些有根据的猜测进行了大量的试验和错误。我的代码如下：

```
parent invocation:
------------------
nohup ./ChangeChannel.sh $channel & disown

child invocation:
-----------------
sudo nohup su user $directory$newchannel &> /dev/null 2>&1

subchild invocation:
--------------------
vlc atsc://frequency=605029000 --intf=dummy --sout-transcode-audio-sync :live-cache=3000 --sout='#transcode{vcodec=h264,vb=150,fps=25,width=480,scale=1,venc=x264{aud,profile=baseline,level=30,keyint=15,bframes=0,ref=1},acodec=aac,ab=40,channels=2,samplerate=22050}:duplicate{dst=std{mux=ts,dst=-,access=livehttp{seglen=16,delsegs=true,numsegs=10,index=/var/www/stream/live.m3u8,index-url=content/live-######.ts},mux=ts{use-key-frames},dst=/var/www/stream/content/live-######.ts,ratecontrol=true}}' & disown 
```

ChangeChannel.sh 使用 sudo 通过 cgi 执行 su，以便以 root 以外的用户身份执行 vlc。看起来有点乱，但它确实有效。

# mysql - 从 Mysql 工作台到 phpmyadmin 创建 Mysql 表

> ID：12156455
> 
> 赞同：0
> 
> 时间：2012-08-28T09:32:51.410
> 
> 标签：mysql, phpmyadmin

嗨，我在 mysql 工作台上有一个表的以下表结构`example_1`

但由于某些原因，我想重新创建所有表格，`phpmyadmin`如下`create table sysntax`所示

**在 MYSQL 工作台中创建表代码**：

```
CREATE TABLE `example_1` (
  `job_id` int(11) NOT NULL AUTO_INCREMENT,
  `source_id` int(11) DEFAULT NULL,
  `publication_id` int(11) DEFAULT NULL,
  `facility_id` int(11) DEFAULT NULL,
  `job_type_id` int(11) NOT NULL,
  `template_id` int(11) DEFAULT NULL,
  `account_num` varchar(9) DEFAULT NULL,
  `start_dt` datetime DEFAULT NULL,
  `end_dt` datetime DEFAULT NULL,
  `pdf_path` varchar(20) DEFAULT NULL,
  `admin_user_id` int(11) NOT NULL,
  `skills` varchar(255) DEFAULT NULL,
  `tracking_pixel` varchar(255) DEFAULT NULL,
  `auto_renew` smallint(6) DEFAULT NULL,
  PRIMARY KEY (`job_id`),
  KEY `source_id_idxfk` (`source_id`),
  KEY `facility_id_idxfk` (`facility_id`),
  KEY `job_type_id_idxfk` (`job_type_id`),
  KEY `template_id_idxfk` (`template_id`),
  CONSTRAINT `jp_job_ibfk_1` FOREIGN KEY (`source_id`) REFERENCES `jp_source` (`source_id`),
  CONSTRAINT `jp_job_ibfk_2` FOREIGN KEY (`facility_id`) REFERENCES `adm_facility` (`facility_id`),
  CONSTRAINT `jp_job_ibfk_3` FOREIGN KEY (`job_type_id`) REFERENCES `jp_job_type` (`job_type_id`),
  CONSTRAINT `jp_job_ibfk_4` FOREIGN KEY (`template_id`) REFERENCES `jp_template` (`template_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 
```

我复制并粘贴了相同的`phpmyadmin`内容以创建同一个表，然后出现以下错误

**错误**：

```
InnoDB  

Supports transactions, row-level locking, and foreign keys

[ Variables | Buffer Pool | InnoDB Status ] 
```

谁能让我知道如何编辑代码以避免错误并在 phpmyadmin sql 编辑器中创建表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:53:54.880

您的服务器上似乎`INNODB`禁用了引擎。只需删除 innodb in 的所有禁用选项`/etc/my.cnf`并重新启动`mysql`。

# mysql - MySQL 事件中的错误：“执行时间已过去，并且设置了 ON COMPLETION NOT PRESERVE”

> ID：12156458
> 
> 赞同：0
> 
> 时间：2012-08-28T09:32:58.797
> 
> 标签：mysql, mysql-event

我正在 MySQL 中编写一个事件。我想在当月的第一天执行该事件。

我的代码：

```
CREATE EVENT EVT_UP_COMPOFF 
ON
SCHEDULE AT CAST(DATE_FORMAT(NOW(),'%Y-%m-01')as DATE)
DO
  UPDATE tbl_compoff_leave_count set fld_status='Invalid'
  WHERE MONTH(fld_compoff_date)< MONTH(DATE_ADD(CURDATE(), INTERVAL -1 MONTH))
    AND fld_status='Valid'; 
```

错误：

> 1588：事件执行时间已过去，并且设置了 ON COMPLETION NOT PRESERVE。该事件在创建后立即被删除

我需要在 SQL 中修复什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:48:27.177

试试这个活动 -

```
CREATE EVENT event1
  ON SCHEDULE EVERY '1' MONTH
  STARTS '2012-09-01 00:00:00'
DO UPDATE... 
```

# android - Android 保存大位图

> ID：12156460
> 
> 赞同：1
> 
> 时间：2012-08-28T09:33:02.207
> 
> 标签：android, bitmap

我是新手`android`，我对如何处理感到困惑`Bitmaps`。

我想下载一个`Bitmap`，它可能非常大，并将其保存到一个临时的内部文件中。然后我将把它画`Bitmap`到`Canvas`以后。

我目前的方法是 1\. 下载输入流 2\. 复制流 3\. 使用一个流来计算边界`bitmapFactory.options` 4\. 使用另一个流来解码具有样本大小的完整位图

但是，我需要`landscape`和`portrait`版本，所以现在我必须这样做两次并保存两个图像。

或者 - 我见过人们`bm.compress(Bitmap.CompressFormat.JPEG, 50, bos);`用来保存文件。这绕过了直接从流中保存的样本大小的解码。我想当我绘制到我的`Canvas`.

基本上，我对这项任务的最佳方法感到困惑，哪种方法不太可能出现内存不足并且是更常用的方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:39:40.363

```
 byte[] imagesByte = getLogoImage(Your url); 
```

**设置为图像视图...**

```
 imgView.setImageBitmap(BitmapFactory.decodeByteArray( imagesByte,  0, imagesByte.length)); 
```

**下载方法**

```
 public static byte[] getLogoImage(String url){
            try {
                URL imageUrl = new URL(url);
                URLConnection ucon = imageUrl.openConnection();

                InputStream is = ucon.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);

                ByteArrayBuffer baf = new ByteArrayBuffer(500);
                int current = 0;
                while ((current = bis.read()) != -1) {
                    baf.append((byte) current);
                }

                return baf.toByteArray();
            } catch (Exception e) {
                Log.d("ImageManager", "Error: " + e.toString());
            }
            return null;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T11:25:33.450

在 Android 中，您必须意识到内存有限，因此大图像将不适合内存，并且您将遇到 OutOfMemory 异常。

关键是，将图像保存到内部存储后，以显示分辨率加载：

首先下载图片，这应该在 UI 线程之外完成，让`_url`一个`URL`带有图片地址和`_file`包含目标文件的字符串的实例：

```
URLConnection conn = _url.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();
        boolean success = false; //track succesful operation

        if( _file != null)
        {
            try
            {
                FileOutputStream fos = new FileOutputStream(_file);
                byte data[] = new byte[4086]; //use 4086 bytes buffer

                int count = 0;
                while ((count = is.read(data)) != -1)
                {
                    fos.write(data, 0, count);//write de data
                }

                is.close();
                fos.flush();
                fos.close();

                int len =  conn.getContentLength();
                File f = new File( _file);//check fie length is correct
                if( len== f.length())
                {
                    success = true;
                }
                else
                {
                    //error downloading, delete de file
                    File tmp = new File( _file);
                    if( tmp.exists())
                    {
                        tmp.delete();
                    }
                }
            }catch (Exception e )
            {
                try
                {
                    e.printStackTrace();
                    //delete file with errors
                    File tmp = new File( _file);
                    if( tmp.exists())
                    {
                        tmp.delete();
                    }

                }
                catch (Exception ex)
                {
                    ex.printStackTrace();
                }
            }
            finally
            {
                is.close();//cleanup

            } 
```

然后，当您必须以所需的分辨率加载图像时，这里的关键是使用 BitmapFactory 读取位图信息并获取缩放位图：

```
public static Bitmap bitmapFromFile(int width, int height, String file)
{

    Bitmap bitmap = null;

    final BitmapFactory.Options options = new BitmapFactory.Options();

    if( height >0 && width > 0 ) {
        options.inJustDecodeBounds = true;//only read bitmap metadata
        BitmapFactory.decodeFile(file,options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, width, height);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

    }
    try
    {
        bitmap = BitmapFactory.decodeFile(file, options);//decode scaled bitmap
    }catch (Throwable t)
    {
        if( bitmap != null)
        {
            bitmap.recycle();//cleanup memory, very important!
        }
        return null;

    }
    return bitmap
} 
```

最后一步是计算比例因子：

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {

    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        final int halfHeight = height;
        final int halfWidth = width;

        // Calculate the largest inSampleSize value that is a power of 2 and keeps both
        // height and width larger than the requested height and width.
        while ((couldShrink(halfWidth, reqWidth, inSampleSize)&&
                couldShrink(halfHeight,reqHeight, inSampleSize))
                //&&(halfHeight*halfWidth)/inSampleSize > maxsize)
                )
        {
            inSampleSize *= 2;
        }

    }

    return inSampleSize;
}
private static  boolean couldShrink ( int dimension, int req_dimension, int divider)
{
    int actual = dimension / divider;
    int next = dimension / (divider*2);

    int next_error = Math.abs(next - req_dimension);
    int actual_error = Math.abs(actual-req_dimension);

    return next > req_dimension ||
            (actual > req_dimension && (next_error < actual_error) )
            ;
} 
```

也就是说，如果您想手动完成，我建议您使用[Picasso](http://square.github.io/picasso/)来处理图像的下载、磁盘缓存和内存缓存：

要在下载时加载到名为`image`显示背景 ( `R.drawable.img_bg`) 的 ImageView 中：

```
Picasso.with(image.getContext())
            .load(url).placeholder(R.drawable.img_bg).fit()
                    .into(image, new Callback.EmptyCallback()
                    {
                        @Override
                        public void onSuccess()
                        {
                            holder.progress.setVisibility(View.GONE); //hide progress bar
                        }

                        @Override
                        public void onError()
                        {
                            holder.progress.setVisibility(View.GONE); //hide progress bar
                            //do whatever you design to show error
                        }
                    }); 
```

处理自己的位图：

```
//first declare a target
_target = new Target()
    {
        @Override
        public void onBitmapLoaded(Bitmap bitmap, Picasso.LoadedFrom from)
        {
            //handle your bitmap (store it and use it on you canvas
        }

        @Override
        public void onBitmapFailed(Drawable errorDrawable)
        {
            //handle your fail state

        }

        @Override
        public void onPrepareLoad(Drawable placeHolderDrawable)
        {//for example for drawing a placeholder while downloading
        }
    }; 
```

现在您只需要加载并调整图像大小：

```
Picasso.with(context).load(url).resize(192, 192).centerCrop().into(_target); 
```

希望有帮助。

# java - 使用字段选择器获取linkedin配置文件

> ID：12156461
> 
> 赞同：2
> 
> 时间：2012-08-28T09:33:05.823
> 
> 标签：java, linkedin, spring-social

嗨，我正在使用 linkedin api 获取用户的个人资料，并能够获取[https://api.linkedin.com/v1/people/~](https://api.linkedin.com/v1/people/~)返回的用户的 statndard 个人资料，但我想将字段选择器添加为[http://api。 linkedin.com/v1/people/~:(id,first-name,last-name](http://api.linkedin.com/v1/people/~:(id,first-name,last-name) ) 但它抛出

```
java.net.UnknownHostException: api.linkedin.com/v1/people/~
at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:850) 
```

我用谷歌搜索了它，有人说这是因为代理，可能是您无法访问，`api.linkedin.com/v1/people/~`但我没有设置代理。

我想这是因为`':'`字段选择器。我尝试了不同的方法，但没有成功。甚至 spring-social-linkedin 在尝试时也会抛出相同的异常`linkedInTemplate.profileOperations().getUserProfileFull()`

编辑：我能够使用 PHP 和 DotNet 代码获得完整的配置文件，但不能在 java 中工作。

帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T09:25:20.893

此异常是由于代理引起的。将以下代码添加到您的源代码中：

```
System.setProperty("https.proxyHost", "proxy");
System.setProperty("https.proxyPort", "8080");
System.setProperty("http.proxyHost", "proxy");
System.setProperty("http.proxyPort", "8080"); 
```

# c++ - SDL 未释放系统 RAM

> ID：12156462
> 
> 赞同：2
> 
> 时间：2012-08-28T09:33:09.727
> 
> 标签：c++, opengl, memory, sdl, ram

我创建这样的纹理：

```
//Create temp SDL_Surface
SDL_Surface* surface = IMG_Load(this->path.c_str());

//If we successfully loaded an image
if (surface)
{
    SDL_DisplayFormatAlpha(surface);

    bounds = GameRectangle(surface->w, surface->h);

    GLuint object(0);

    glGenTextures(1, &object);

    glBindTexture(GL_TEXTURE_2D, object);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, surface->w, surface->h, 0, GL_RGBA, GL_UNSIGNED_BYTE, surface->pixels);

    SDL_FreeSurface(surface);

    return object;
} 
```

glDeleteTextures() 可以正确释放 VRAM，但系统 RAM 会保留并不断增加，直到游戏崩溃。

我将它定位到 SDL_Surface，显然表面内存没有被释放。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:46:28.677

这与OpenGL无关。

您对 SDL_DisplayFormatAlpha 的调用会返回一个新的 SDL_Surface ，因此您的原始表面仍然被分配。这意味着您将泄露每张图片的副本。

您应该执行以下操作：

```
SDL_Surface* surfaceWithAlpha = SDL_DisplayFormatAlpha(surface);
SDL_FreeSurface(surface);
...rest of code use surfaceWithAlpha 
SDL_FreeSurface(surfaceWithAlpha); 
```

请参阅[文档](http://sdl.beuc.net/sdl.wiki/SDL_DisplayFormatAlpha)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:39:30.493

起初我没有注意到解决方法对您来说就足够了。

然后，调用`glTexImage2D`，提供等于 0 的纹理大小应该强制 OpenGL 释放内存。然后，您可以将其删除。如果它不起作用，则泄漏在您的代码中。

# html - 移除 CSS 中的水平滚动条

> ID：12156468
> 
> 赞同：11
> 
> 时间：2012-08-28T09:33:34.543
> 
> 标签：html, css

我在我的网页上使用了一个类似 facebook 的按钮。我需要它在页面的右侧对齐。但是有一个水平滚动条显示。

请看小提琴[http://jsfiddle.net/u4kMs/](http://jsfiddle.net/u4kMs/)

我找不到是什么原因造成的。如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-28T09:49:39.780

要禁用滚动，请尝试类似的方法；

```
.your_div_class{
    overflow-x: hidden;
    overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T09:42:03.230

出现滚动条是因为内容对您的屏幕来说太宽。

只需省略`div`元素的宽度，它将自动扩展到其父元素的 100%。像您已经做过的那样将 facebook 按钮向右浮动应该然后正确对齐按钮而没有滚动条。

如果您没有得到令人满意的解决方案，您仍然可以`overflow:hidden`在包含的 div 上声明以抑制滚动条。

这将是结果：http: [//jsfiddle.net/poikl/u4kMs/8/](http://jsfiddle.net/poikl/u4kMs/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:38:11.890

这是因为框架对于您在顶部 div 上设置的宽度来说太小了

```
<div style="margin-left:auto; margin-right:auto; width:980px;"> 
```

因此，当这是在您的网页上时，您不应该获得水平滚动条。如果你这样做，那么考虑改变上面的宽度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T09:42:44.213

试试[这个](http://jsfiddle.net/u4kMs/7/)，记住把“右对齐”的 div放在左对齐的 div***之前***，即使是右 div 也必须在图形上“之后”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-06T00:26:55.707

rtl 大多数时候都有问题，（我特别喜欢

`<body dir="{{(App::isLocale('ar') ? 'rtl' : 'ltr')}}">`

在 laravel 中，唯一的解决方案是

`body{ overflow-x: hidden; }`但要小心内部元素是否适合

# http - 为什么一些互联网提供商关闭某些端口？

> ID：12156470
> 
> 赞同：2
> 
> 时间：2012-08-28T09:33:40.953
> 
> 标签：http, networking, tcp, port, network-protocols

我们在俄罗斯服务器上发布了游戏，1% 的人无法通过原始 TCP 连接到服务器的 46xx 端口，但他们可以加载它的 HTML 页面（通过 HTTP）。大多数这样的人生活在德国、以色列……为什么会这样？它背后的政治决定是什么？我们发现他们的此类端口（在 IANA 上是免费的）已关闭。这是否意味着这样的人不能运行 Steam（然后，玩你可以通过它购买的所有游戏）、玩 WoW 和许多其他通过 4xxx 端口使用 TCP 的现代游戏？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:59:58.567

众所周知，ISP 会出于各种原因过滤某些端口。用户应该向他们*大声抱怨*（或切换），以发出不能容忍的信号。您可以鼓励他们这样做，但这当然不能解决您的问题（或真正回答您的问题）。

常见原因有：
- 试图阻止 bittorrent 流量
- 限制带宽使用（很大程度上与之前的原因有关）
- 安全性（错误）
- 控制（公司通常不希望员工偷懒）

对你来说最简单的事情是在端口 443 上运行你的游戏（也许作为替代）。那是 HTTPS，因此通常不会被阻止。但是，由于 HTTPS 是加密的，因此无法检查流以了解其网络流量或其他内容，因此您可以运行任何您希望通过它的数据流（加密与否）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:01:32.563

这是完全正确的。事实上，默认情况下，每个公共网站都会阻止所有端口，除了他们希望运行一些他们想要的流量的端口。

这就是许多应用程序经常尝试将其程序封装为使用端口 80 的原因，只要有人希望运行 http 流量，就无法阻止该端口。

他们根本不希望任何未经批准的应用程序通过他们的服务器运行。如果您有一台公开的敏感服务器，您肯定不希望任何人将您的机器用于您不允许的任何应用程序。一个常见的原因是占用带宽的应用程序，例如 bittorent、edonkey、gnutella 以及流媒体、voip 和其他高带宽消耗应用程序

# jstree - jstree 最初选择的菜单导致无限循环；

> ID：12156472
> 
> 赞同：1
> 
> 时间：2012-08-28T09:33:43.447
> 
> 标签：jstree

我正在使用 jstree_pre1.0_fix_1。我想要预选菜单。

javascript正在关注，

```
$("#Menu").jstree({ 
    "plugins" : [ "themes", "html_data", "ui"],
    "ui" :{ "initially_select" : ["#MENUITEM_012"] },
    "themes" : {
        "theme" : "custom",
        "dots" : false,
        "icons" : false,
    },
}).
bind("select_node.jstree", function(e,data) {
    window.location.href = data.rslt.obj.children("a").attr("href");
}); 
```

加载jstree时，它会选择一个节点（#MENUITEM_012），然后更改window.location.href，然后加载jstree并再次选择一个节点。

我该如何摆脱这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T14:12:36.760

刚刚找到解决方案。问题是由于库试图选择节点（即在加载导航页面后使其显示为选中）引起的。当访问节点以将页面导航到另一个页面时，已设置处理程序。

解决方案是确保通过鼠标单击选择节点。

```
.bind("select_node.jstree", function(e,data) {
    var evt =  window.event || event;
    var button = evt.which || evt.button;
    if( button != 1 || ( typeof button == "undefined")) return true;

    window.location.href = data.rslt.obj.children("a").attr("href");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:35:53.480

回答我自己；

消除

```
.bind("select_node.jstree", function(e,data) {
    window.location.href = data.rslt.obj.children("a").attr("href");
}) 
```

添加

```
$(".jstree li a").live("click", function(e) {
    window.location.href = $(this).attr("href");
}); 
```

# r - 结合 Voronoi 多边形和地图

> ID：12156475
> 
> 赞同：14
> 
> 时间：2012-08-28T09:34:02.970
> 
> 标签：r, spatial, polygons

我想将 Voronoi 多边形与地图结合起来，以便稍后将其用于空间分析。我有许多点和要组合的 shapefile，然后保存为 shapefile/空间多边形。为了获得 voronoi 多边形，我使用了[这个主题](https://stackoverflow.com/questions/9403660/how-to-create-thiessen-polygons-from-points-using-r-packages)中的函数。

我的代码如下：

```
coords<-data.frame(LONG=c(16.9252,16.9363,16.9408,16.8720,16.9167,16.9461,16.9093,16.9457,16.9171,16.8506,16.9471,16.8723,16.9444,16.9212,16.8809,16.9191,16.8968,16.8719,16.9669,16.8845),
LAT=c(52.4064,52.4266,52.3836,52.3959,52.4496,52.3924,52.4012,52.3924,52.3777,52.4368,52.4574,52.3945,52.4572,52.3962,52.3816,52.3809,52.3956,52.3761,52.4236,52.4539)) 
```

我的地图可以在这里找到：[https ://docs.google.com/file/d/0B-ZJyVlQBsqlSURiN284dF9YNUk/edit](https://docs.google.com/file/d/0B-ZJyVlQBsqlSURiN284dF9YNUk/edit)

```
library(rgdal)
voronoipolygons <- function(x) {
  require(deldir)
  if (.hasSlot(x, 'coords')) {
    crds <- x@coords  
  } else crds <- x
  z <- deldir(crds[,1], crds[,2])
  w <- tile.list(z)
  polys <- vector(mode='list', length=length(w))
  require(sp)
  for (i in seq(along=polys)) {
    pcrds <- cbind(w[[i]]$x, w[[i]]$y)
    pcrds <- rbind(pcrds, pcrds[1,])
    polys[[i]] <- Polygons(list(Polygon(pcrds)), ID=as.character(i))
  }
  SP <- SpatialPolygons(polys)
  voronoi <- SpatialPolygonsDataFrame(SP, data=data.frame(x=crds[,1],
                                                          y=crds[,2], row.names=sapply(slot(SP, 'polygons'), 
                                                                                       function(x) slot(x, 'ID'))))
} 
```

还有我获取 voronoipolygons 的代码：

```
pzn.coords<-voronoipolygons(coords)
plot(pznall)
plot(pzn.coords,add=T)
points(coords$LONG,coords$LAT) 
```

结果： ![在此处输入图像描述](../Images/70d5b24fa1e13f9657fe4a81294d86a7.png)

我希望在我的地图中拥有这个 voronoi 多边形作为新的空间多边形。

我会很感激回答者！

**编辑：**

**需要明确的是，我想实现这样的目标（这条线应该从 voronoi 多边形创建）：**

![在此处输入图像描述](../Images/cd1b519d99c3130833187fdc9f09018c.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T13:02:49.143

稍作修改的函数，采用额外的空间多边形参数并扩展到该框：

```
voronoipolygons <- function(x,poly) {
  require(deldir)
  if (.hasSlot(x, 'coords')) {
    crds <- x@coords  
  } else crds <- x
  bb = bbox(poly)
  rw = as.numeric(t(bb))
  z <- deldir(crds[,1], crds[,2],rw=rw)
  w <- tile.list(z)
  polys <- vector(mode='list', length=length(w))
  require(sp)
  for (i in seq(along=polys)) {
    pcrds <- cbind(w[[i]]$x, w[[i]]$y)
    pcrds <- rbind(pcrds, pcrds[1,])
    polys[[i]] <- Polygons(list(Polygon(pcrds)), ID=as.character(i))
  }
  SP <- SpatialPolygons(polys)

  voronoi <- SpatialPolygonsDataFrame(SP, data=data.frame(x=crds[,1],
                                                          y=crds[,2], row.names=sapply(slot(SP, 'polygons'), 
                                                                                       function(x) slot(x, 'ID'))))

  return(voronoi)

} 
```

然后做：

```
pzn.coords<-voronoipolygons(coords,pznall)
library(rgeos)
gg = gIntersection(pznall,pzn.coords,byid=TRUE)
plot(gg) 
```

请注意，这`gg`是一个 SpatialPolygons 对象，您可能会收到有关 proj4 字符串不匹配的警告。您可能需要将 proj4 字符串分配给一个或其他对象。

# jquery - 表格的条件格式

> ID：12156490
> 
> 赞同：0
> 
> 时间：2012-08-28T09:35:06.827
> 
> 标签：jquery, html, css, formatting

我正在尝试将条件格式添加到以下内容；

```
<tr>
    <td><h3>Company</h3></td>
    <td><h3>Price</h3></td>
    <td><h3>Change</h3></td>
</tr>     

<tr>
    <td>Example</td>
    <td>123.4</td>
    <td>-1</td>
</tr> 
```

如果列“更改”为 0 或以下，则字体为红色，否则为绿色。

我找到了这个小提琴[http://jsfiddle.net/davidThomas/Ty497/](http://jsfiddle.net/davidThomas/Ty497/)，我可以适应它，但我不能让它只在第三列上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:38:37.420

只需将 jQuery 选择器更改为`$('tbody tr td:nth-child(3)')`，使其仅适用于每行的第三个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:47:11.887

我已经浏览了提供的链接。

您的问题的解决方案是在两个地方更改代码：

1.  将函数中的条件为 差是`1`和 非常差`0`。

2.  在 css 部分更改颜色为差。

# ruby-on-rails - Rails 路线错误。没有路线匹配 [POST] "/sessions/new"

> ID：12156491
> 
> 赞同：0
> 
> 时间：2012-08-28T09:35:21.083
> 
> 标签：ruby-on-rails

你好，我正在做 Rails Book 的教程，遇到了一些麻烦。

当我尝试使用我的用户名和密码登录时，我收到以下错误：

路由错误

没有路由匹配 [POST] "/sessions/new" 尝试运行 rake 路由以获取有关可用路由的更多信息。

这是我的路由文件配置。

```
ZomfgShop::Application.routes.draw do
  get "admin/index"
  get "sessions/new"
  get "sessions/create"
  get "sessions/destroy"

  resources :users
  resources :orders
  resources :line_items
  resources :carts

  get "store/index"

  resources :products do
    get :who_bought, on: :member
  end

  resources :products

  root to: 'store#index', as: 'store'

  resources :line_items do
    #member do
    # post 'decrement'
    #end
    post 'decrement', on: :member
  end

  get 'admin' => 'admin#index'

  controller :sessions do
    get 'login' => :new
    post 'login' => :create
    delete 'logout' => :destroy
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:04:05.790

谢谢你们，将我的 routes.rb 文件更改为此，我的路由再次正常工作！

```
ZomfgShop::Application.routes.draw do
  get 'admin' => 'admin#index'

  controller :sessions do
    get 'login' => :new
    post 'login' => :create
    delete 'logout' => :destroy
  end
  scope '(:locale)' do
    resources :users
    resources :orders
    resources :line_items
    resources :carts
    get "store/index"
    resources :products do
      get :who_bought, on: :member
    end
  root to: 'store#index', as: 'store'
end

resources :line_items do
  #member do
  # post 'decrement'
  #end
  post 'decrement', on: :member
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:39:17.897

您有控制器而不是 :sessions 路由的资源。

```
 resources :sessions do
    get 'login' => :new
    post 'login' => :create
    delete 'logout' => :destroy
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:40:54.807

尝试更换

```
get "sessions/new"

get "sessions/create"

get "sessions/destroy" 
```

和

```
resources :sessions 
```

确保您有一个 views/sessions/new.html.erb 文件（如果使用 devise，则在 views/devise/ 下）

如果您不使用 Devise，请确保在 sessions_controller.rb 中有这个

```
def new
end
def create
end
def destroy
end 
```

# android - android-如何访问和更新 HTML 文件

> ID：12156503
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:35:51.047
> 
> 标签：android, html

在我的应用程序中，我想使用 html 文件附加到电子邮件客户端。所以我想在添加为附件之后在运行时访问和更新这个 html 文件。有可能吗？如果是，请任何人帮助我。

我已经尝试在资产文件夹中创建了一个 html 文件，之后我将其添加为附件，但现在我想在运行时更新它。我试过了，但我没有。

**代码**

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.setType("text/html");                                              
//attachment

Uri uri = Uri.fromFile(new File("file:///android_asset/YFG_Login.html"));
emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, uri);                         
startActivity(Intent.createChooser(emailIntent, "Email:")); 
```

谢谢，

纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:50:38.157

请使用 JavaMail API 而不是默认/内置应用程序。

您可以从[答案中获得更多信息](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

# c# - 如果我在 c# 中的 catch() 中有返回值，最终是否会执行代码？

> ID：12156504
> 
> 赞同：10
> 
> 时间：2012-08-28T09:35:57.153
> 
> 标签：c#, try-catch-finally

我有以下代码片段/示例。它不是工作代码我只是写了这个，以便提出一个关于 catch 的问题，finally 并返回：

```
try
{
    doSomething();
}
catch (Exception e)
{
    log(e);
    return Content("There was an exception");
}
finally
{
    Stopwatch.Stop();
}
if (vm.Detail.Any())
{
    return PartialView("QuestionDetails", vm);
}
else
{
    return Content("No records found");
} 
```

据我了解，如果 try 块中有异常，它将被捕获。但是，如果 catch 中有 return 语句，那么 finally 会被执行吗？这是编写 catch 和 finally 的正确方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T09:38:31.273

> **在已处理的异常中，保证运行关联的 finally 块。**但是，如果异常未处理，finally 块的执行取决于异常展开操作的触发方式。反过来，这取决于您的计算机的设置方式。有关详细信息，请参阅[CLR 中的未处理异常处理](http://go.microsoft.com/fwlink/?LinkId=128371)。

参考：[试一试](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T09:37:59.427

是的`finally`，即使你`return`以前做过什么，也会被执行。

> finally 块可用于清理在 try 块中分配的任何资源，以及运行任何必须执行的代码，即使在 try 块中发生异常也是如此。通常，finally 块的语句在控制离开 try 语句时执行，无论控制转移是由于正常执行、执行 break、continue、goto 或 return 语句，还是传播异常而发生出 try 语句。

### 更多信息

[MSDN - try-finally（C# 参考）](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T09:38:07.023

`finally`即使`catch`块内有返回，也会执行

**finally 块总是被执行**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T09:38:47.440

将`finally`在 catch-block 退出后执行（在你的通过显式“return”的方式）。但是，finally-block*之后*`if (vm.Detail.Any()) ...`的所有内容（在您的情况下为）都*不会*执行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T09:40:26.260

尽管 catch 块中有 return 语句，finally 块中的代码仍将运行。但是，我个人会将结果分配给一个变量并在块之后返回它。但这只是口味问题。

# php - 树枝模板不包括块？

> ID：12156505
> 
> 赞同：0
> 
> 时间：2012-08-28T09:36:13.463
> 
> 标签：php, templates, twig, jinja2, template-inheritance

我希望开始使用 Twig，但是让 {% block %} 完全工作感到非常头疼 - 我觉得一定有一些非常明显的东西我错过了。

我的**index.php**加载器如下所示：

```
<?php
error_reporting(E_ALL);
ini_set("display_errors", 1);

require_once( "Twig/Autoloader.inc.php" );

Twig_Autoloader::register();

$twig = new Twig_Environment( new Twig_Loader_Filesystem("templates"));

$vars = array (
    "user" => array(
        "name" => "Joe Bloggs"
        ),
    "title" => "My website"
);

$tpl = $twig->loadTemplate("index.html");
echo $tpl->render($vars);

?> 
```

**index.html**的简化版本`/templates`如下所示：

```
<!doctype html>
<html>
<body>
Hello World!
{% block navigation %}Test{% endblock %}
</body>
</html> 
```

中的**navigation.html**`/templates`看起来像这样：

```
{% extends "index.html" %}
{% block navigation %}
<!-- Navigation -->
<nav>
    Some navigation
</nav>
{% endblock %} 
```

据我了解，这应该是块功能的基本工作示例。Twig 的其他方面对我来说似乎工作得很好，并且没有报告错误。确实，页面成功打印了“Test”。

我应该明确指向某个地方的**navigation.html**文件，还是 Twig 会自动加载文件`/templates`夹中的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:42:34.007

错误：您正在呈现索引模板而不是导航模板。

在索引模板中，导航块包含“测试”，因此您的输出是正确的。如果您渲染 navigation.html，您将从 index.html 中获取您的 html 内容，并从导航模板中获取导航块（它唯一覆盖的内容）。

您总是需要渲染您希望输出的模板。一个可以扩展许多（例如，您的布局可能会扩展所有操作的模板）。

# mysql - MySQL，按动态字段排序

> ID：12156510
> 
> 赞同：1
> 
> 时间：2012-08-28T09:36:38.340
> 
> 标签：mysql, sql

我想统计某些语言的站点以进行统计并使用此查询：

```
SELECT `language_id` , count( * ) AS 'num'
FROM sites
WHERE `language_id` != 0
GROUP BY `language_id`
ORDER BY 'num' ASC 
```

但结果不是按`num`字段排序的。我的 SQL 有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:40:49.667

问题是您`num`使用单引号`'`字符引用您的别名，这恰好在创建别名时有效，但在子句中被视为文字字符串`ORDER BY`：因为它在结果中是不变的，因此不会影响排序顺序。反引号字符在两个子句中都有效。请尝试：

```
SELECT `language_id` , count( * ) AS `num`
FROM sites
WHERE `language_id` != 0
GROUP BY `language_id`
ORDER BY `num` ASC 
```

# php - 如何向表单添加错误消息？

> ID：12156515
> 
> 赞同：0
> 
> 时间：2012-08-28T09:37:00.267
> 
> 标签：php, zend-framework2

我正在验证用户登录，如果用户提交的详细信息未通过身份验证，我想在表单中附加一条错误消息。

在 FieldSet 我可以看到函数`setMessages()`，但这似乎只匹配和设置元素键。

如何将错误消息附加到表单而不是表单元素？

以下代码位于 LoginForm 类中。

```
public function isValid()
{
    $isValid = parent::isValid();
    if ($isValid)
    {
        if ($this->getMapper())
        {
            $formData = $this->getData();
            $isValid = $this->getMapper()->ValidateUandP($formData['userName'], $formData['password']);
        }
        else
        {
          // The following is invalid code but demonstrates my intentions
          $this->addErrorMessage("Incorrect username and password combination");
        }
    }

    return $isValid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:44:25.863

第一个示例是从数据库验证并简单地将错误消息发送回表单：

```
//Add this on the action where the form is processed
if (!$result->isValid()) {
            $this->renderLoginForm($form, 'Invalid Credentials');
            return;
        } 
```

下一个是向表单本身添加简单的验证：

```
//If no password is entered then the form will display a warning (there is probably a way of changing what the warning says too, should be easy to find on google :)
$this->addElement('password', 'password', array(
            'label'    => 'Password: ',
            'required' => true,
        )); 
```

我希望这是有用的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T14:01:59.767

在 ZF1 中：为了将错误消息附加到表单 - 您可以为此创建一个装饰器元素：

摘自：

[http://mwop.net/blog/165-Login-and-Authentication-with-Zend-Framework.html](http://mwop.net/blog/165-Login-and-Authentication-with-Zend-Framework.html)

```
class LoginForm extends Zend_Form
{
    public function init()
    {
        // Other Elements ...

        // We want to display a 'failed authentication' message if necessary;
        // we'll do that with the form 'description', so we need to add that
        // decorator.
        $this->setDecorators(array(
            'FormElements',
            array('HtmlTag', array('tag' => 'dl', 'class' => 'zend_form')),
            array('Description', array('placement' => 'prepend')),
            'Form'
        ));
    }
} 
```

然后作为控制器中的示例：

```
// Get our authentication adapter and check credentials
$adapter = $this->getAuthAdapter($form->getValues());
$auth    = Zend_Auth::getInstance();
$result  = $auth->authenticate($adapter);
if (!$result->isValid()) {
    // Invalid credentials
    $form->setDescription('Invalid credentials provided');
    $this->view->form = $form;
    return $this->render('index'); // re-render the login form
} 
```

不确定这是否仍然适用于 ZF2

# java - 在不重构的情况下使用 mockito 测试本地范围对象

> ID：12156516
> 
> 赞同：1
> 
> 时间：2012-08-28T09:37:03.597
> 
> 标签：java, junit, mocking, junit4, mockito

假设我有以下代码：

```
public class ClassToTest
{
    AnotherClass anotherClass;

    public void methodToTest( int x, int y )
    {
        int z = x + y
        anotherClass.receiveSomething( z );
    }
}

public class AnotherClass
{
    public void receiveSomething( int z ) {.. do something.. }  
} 
```

我想对变量 z 的值进行断言。我如何在不重构的情况下做到这一点？变量 x、y 和 z 可以是其他一些 Java 类类型，为了简单起见，我只使用了“int”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:52:28.803

您可以编写以下内容。*当然，依赖注入和测试方法可能会根据您当前的实现和/或您的测试场景而改变。*

```
@RunWith(MockitoJUnitRunner.class)
public class ClassToTestTest {

    @Mock AnotherClass anotherClass;
    @InjectMocks ClassToTest classToTest;

    @Test public void ensure_that_value___Z___is_passed_to___AnotherClass() {
        classToTest.methodToTest(1, 2);

        verify(anotherClass).receiveSomething(eq(3));
    }
} 
```

*考虑到 Mockito 1.9.5-rc1 编写。*

此外，`eq`您可以使用 an 来代替使用匹配器`ArgumentCaptor`，这将捕获值或值引用（在对象的情况下）。您将能够对捕获的值执行其他断言。例如使用 Truth 或 FEST-Assert。

这可能看起来像：

```
@RunWith(MockitoJUnitRunner.class)
public class ClassToTestTest {

    ...
    @Captor ArgumentCaptor<List<Z>> listCaptor

    @Test public void ensure_that_list_with_value___Z___is_passed_to___AnotherClass() {
        // given

        // when
        ...

        // then
        verify(anotherClass).receiveList(listCaptor.capture());
        assertThat(listCaptor.getValue()).contains(Z);
    }
} 
```

干杯，

# algorithm - Paxos 和 Cassandra 中的 W+R>=N 有什么区别？

> ID：12156517
> 
> 赞同：36
> 
> 时间：2012-08-28T09:37:04.787
> 
> 标签：algorithm, synchronization, cassandra, apache-zookeeper, paxos

类似 Dynamo 的数据库（例如 Cassandra）可以通过 quorum 来强制一致性，即应以 W+R>N 的方式选择同步写入的副本数 (W) 和要读取的副本数 (R) N 是复制因子。另一方面，像 Zookeeper 这样的基于 PAXOS 的系统也被用作一致的容错存储。

这两种方法有什么区别？PAXOS 是否提供 W+R>N 模式未提供的保证？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-12-15T21:32:12.433

是的，Paxos 提供了类似 Dynamo 的系统及其读写仲裁不提供的保证。不同之处在于如何处理故障以及在写入期间会发生什么。成功写入后，两种系统的行为相似。数据将被保存并可供以后读取（直到被覆盖或删除）等等。

差异出现在写入期间和失败之后。在向最终一致的系统写入内容时，直到您从 W 节点获得成功的答案，然后数据可能已写入某些节点而不是其他节点，并且无法保证整个系统就当前值达成一致。如果您此时尝试读回数据，一些客户端可能会取回新数据和一些旧数据。换句话说，系统不是立即一致的。这是因为写入在这些系统中的节点之间不是原子的。通常有一些机制可以“修复”这样的不一致性，并且“最终”系统将再次变得一致（即读取将再次始终返回相同的值，直到写入新的内容）。这就是为什么他们经常被称为“

使用 Paxos，可以跨节点进行原子写入，因此可以避免节点之间的不一致。Paxos 算法可以保证非故障节点在任何时间点都不会对写入的结果产生分歧。写入要么在任何地方成功，要么在任何地方都不成功。在任何时候都不会出现任何不一致的读取（当然，如果正确实施并且所有假设都成立）。然而，这是有代价的。主要是，当太多节点（或它们之间的通信）不工作时，系统可能需要延迟一些请求并且不可用。这对于确保没有给出不一致的答复是必要的。

总结一下：主要区别在于类似 Dynamo 的系统可以在写入期间或失败一段时间后返回不一致的结果（但最终会从中恢复），而基于 Paxos 的系统可以通过有时被取而代之的是不可用和延迟请求。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-28T18:41:26.657

Paxos 实现起来并不简单，而且价格昂贵，以至于许多使用它的系统也使用提示，或者仅将其用于领导者选举或其他用途。但是，它确实在出现故障的情况下提供了保证的一致性——当然要受到其特定故障模型的限制。

我看到的第一个基于仲裁的系统假设某种领导者或事务基础设施可以确保足够的一致性，您可以相信仲裁机制有效。这个基础设施很可能是基于 Paxos 的。

查看诸如[https://cloudant.com/blog/dynamo-and-couchdb-clusters/](https://cloudant.com/blog/dynamo-and-couchdb-clusters/)之类的描述，Dynamo 似乎*不是*基于保证其仲裁系统一致性的基础设施 - 所以它是非常聪明还是偷工减料？根据[http://muratbuffalo.blogspot.co.uk/2010/11/dynamo-amazons-highly-available-key.html](http://muratbuffalo.blogspot.co.uk/2010/11/dynamo-amazons-highly-available-key.html)，“Dynamo 系统强调可用性到牺牲一致性的程度。摘要写着“Dynamo 在某些故障场景下牺牲一致性”。实际上，后来很清楚 Dynamo 即使在没有故障的情况下也会牺牲一致性：Dynamo 可能会变得不一致存在多个并发写入请求，因为副本可能因多个协调器而分歧。” （结束报价）

因此，在 Dynamo 中实现的仲裁的情况下，Paxos 似乎提供了更强的可靠性保证。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-22T20:01:32.057

Paxos 和 W+R>N quorum 试图解决稍微不同的问题。Paxos 通常被描述为复制状态机的一种方式，但实际上它更像是一个分布式日志：写入日志的每个项目都会获得一个索引，并且不同的服务器最终持有相同的日志项目 + 其索引。（复制状态机可以通过将状态机的输入写入日志来实现，每个服务器根据它们的索引在约定的输入上重放状态机）。[你可以在我在这里](http://distributedthoughts.com/2013/09/22/understanding-paxos-part-1/)写的一篇博文中了解更多关于 Paxos 的信息。

W+R>N quorum 解决了在多个服务器之间共享单个值的问题。在学术界它被称为“共享寄存器”。共享寄存器有两个操作：读取和写入，我们期望读取返回之前写入的值。

因此，Paxos 和 W+R>N quorum 存在于不同的域中，并且具有不同的属性（例如，Paxos 保存了一个有序的项目列表）。但是，Paxos 可以用来实现共享寄存器，并且可以使用 W+R>N quorum 来实现分布式日志（尽管效率很低）。

综上所述，有时 W+R>N 仲裁并没有以“完全稳健”的方式实现，因为它需要不止一轮的通信。因此，在需要低延迟的系统中，W+R>N 仲裁的实现可能会提供较弱的属性（例如，冲突的值可以共存）。

综上所述，理论上，Paxos 和 W+R>N 可以达到相同的目标。实际上，这将是非常低效的，并且对于稍微不同的东西，每个都更好。更实际的是，W+R>N 并不总是完全实现，因此为了速度而牺牲了一些一致性属性。

**更新**：Paxos 支持一个非常通用的故障模型：消息可以被丢弃，节点可以崩溃并重新启动。W+R>N quorum 方案有不同的实现，其中许多假设不太普遍的失败。因此，两者之间的差异还取决于对支持的可能故障的假设。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-13T18:24:56.853

没有区别。仲裁的定义表明任何两个仲裁的交集都不为空。简单多数法定人数是一个例子而不是一个定义。看看 Lamport 博士后来的论文“Vertical Paxos”，他在其中给出了一些其他可能的 quorum 配置。

多法令 paxos 协议（AKA Multi-Paxos），在稳定状态下它只是两阶段提交。仅当领导者失败时才需要更改选票号码。

Zookeeper 的复制协议（ZAB）和 RAFT 都是基于 Paxos 的。区别在于领导者失败后的故障检测和转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-24T19:43:59.880

正如其他答案中提到的，在 R+W > N 系统中，写入并非在所有节点上都是原子的，这意味着当写入正在进行时（或在写入失败期间），一些节点将具有更新的值和一些较旧的值。以 n=3、r=2 和 w=2 的系统为例。为清楚起见，我们假设 3 个节点分别命名为 A、B 和 C。考虑这种情况：正在写入；节点 A 已更新，而 B 和 C 仍在接收更新值的过程中。从 A 和 B 读取的客户端将看到较新的值（使用版本向量或上次写入获胜解决），从 B 和 C 读取的客户端将看到旧值。这种类型的读取不被认为是可线性化的。使用适当的线性化系统（如 Paxos 或 Raft）不会出现此类问题。

# sharepoint - 我想在共享点功能区的编辑工具部分编辑字体颜色选项卡

> ID：12156521
> 
> 赞同：0
> 
> 时间：2012-08-28T09:37:34.800
> 
> 标签：sharepoint, sharepoint-2010

我是 sharepoint 的新手，我想在 sharepoint 功能区的“编辑工具”部分中编辑“字体颜色”选项卡，并且只想显示默认主题颜色菜单的一些自定义颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:16:38.017

得到答案.. 我们可以使用 Power Point 2010 创建我们自己的自定义主题，然后可以将其上传到 sharepoint 2010 主题。更多细节可以在下面的链接中找到..

[http://blog.johnsworkshop.net/creating-a-sharepoint-theme-using-a-powerpoint-template/](http://blog.johnsworkshop.net/creating-a-sharepoint-theme-using-a-powerpoint-template/)

# ios - fbDidLogin 在 iOS 中第一次没有调用。所以我修改了，这是正确的过程吗？

> ID：12156526
> 
> 赞同：1
> 
> 时间：2012-08-28T09:37:52.610
> 
> 标签：ios, facebook, fbconnect, facebook-login

我的 fbDidLogin 委托方法第一次没有调用。我搜索并发现[“未调用 fbDidLogin”](https://stackoverflow.com/questions/4244609/fbdidlogin-not-called)和[“未调用 IOS - Facebook SDK fbDidLogin — 初始化视图控制器”](https://stackoverflow.com/questions/12024446/ios-facebook-sdk-fbdidlogin-not-called-initialize-view-controllers)并正确处理了我的应用程序委托中的 facebook url。但是没有调用 fbDidLogin 方法。于是我又找了一遍。有人在[“fbDidLogin 从未调用 iOS 的问题”](https://stackoverflow.com/questions/7044412/problems-with-fbdidlogin-never-called-ios)中说要更改

```
[self authorizeWithFBAppAuth:YES safariAuth:YES]; 
```

进入

```
[self authorizeWithFBAppAuth:NO safariAuth:YES]; 
```

在我的***Facebook.m***文件中。这样做之后，我的 facebook 登录视图刚刚改变，但无法得到我需要的东西。

在那种情况下我做了什么？我加了一行

```
[facebook logout:self]; 
```

紧接着

```
[facebook authorize:permissions]; 
```

因为我认为登录或/和注销同步存在问题，所以如果我调用 facebook 注销方法它可能（是的，可能）工作。
瞧！它确实有效，至少对我来说。
现在我只想问你，我的过程中是否有任何问题或逻辑错误？有没有更好的方法呢？

# xcode - Xcode - 自定义“关于这个应用程序”

> ID：12156528
> 
> 赞同：1
> 
> 时间：2012-08-28T09:37:58.140
> 
> 标签：xcode, about-box

如何在 Xcode 中更改应用程序的“关于此应用程序”窗口？我做了一个小应用程序，但我不知道如何改变这个小东西。谢谢你的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:54:30.840

在您的 MainMenu.xib 中，将菜单项“About myApp”的目标操作更改为您的自定义操作。

然后在你的行动中，你可以为所欲为。例如，您可以显示在 nib 文件中设计或以编程方式创建的窗口。

# excel - 如何在excel中找到指数格式的单元格数量？

> ID：12156530
> 
> 赞同：0
> 
> 时间：2012-08-28T09:37:58.303
> 
> 标签：excel-2003, excel, excel-2003

我从数据库中复制了一个表并粘贴到[excel-2003](/questions/tagged/excel-2003 "显示标记为“excel-2003”的问题")中。但有些单元格会自动转换为**指数**格式。我知道如何更改单个单元格的格式。但是有没有办法

1.  更改所有指数单元格的格式。
2.  如何知道受自动指数格式更改影响的单元格数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:51:36.573

*   选择您的专栏
*   同时按[ctrl](/questions/tagged/ctrl "显示标记为“ctrl”的问题") [f](/questions/tagged/f "显示标记为“f”的问题")
*   下`Find What`输入***
*   单击`Format`并直接选择您的数字格式，或单击*从单元格中选择格式*（下面的步骤 1）

*   按`Find All`列出所有单元格（下面的第 2 步）

**第1步** ![在此处输入图像描述](../Images/20b013eecb92ecb753d62e184f17b6f0.png)

**第2步** ![在此处输入图像描述](../Images/1da74f437c600a51f98c30ee3d9e34ff.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T09:49:31.927

我得到了答案。

我刚刚使用了与单个单元格相同的方法。

选择`Column ---> Format Cells..`

在`Number`选项卡中`--->`选择`custom --->`Select`0`而不是`general` 并解决。

# java - 创建更多对象而不是执行计算，效果如何？

> ID：12156542
> 
> 赞同：0
> 
> 时间：2012-08-28T09:38:33.247
> 
> 标签：java, model-view-controller

我有一个数据集合（模型），其中每个元素都有其视觉表示（视图），其形式为带有标签的 JPanel。这是更新 GUI 页面的方法：

```
public void updateGUIPage(){
    guiPage.removeAll();
    for(MyElement element: myCollection) {
        guiPage.add(new VisualElementWhichExtendsJPanel(element);
        guiPage.add(Box.createVerticalStrut(10);
    }
} 
```

每次集合更改时都会调用 updateGUIPage()。如您所见，已经创建的视觉元素被删除（正如我从书中知道的，它们稍后将被垃圾收集器销毁），并为集合中的每个元素创建新的视觉元素。我觉得这种方法不是很有效，但它总体上简化了很多应用程序（因为有很多 GUIPage，其中许多显示相同的元素，所以如果添加到第二个 GUIPage，它将从第一个中删除，这就是 Swing 的工作方式）所以，问题是：您是否允许在您的应用程序中使用这种方法，或者最好进行额外的计算并避免过度创建新对象（考虑到集合的平均大小很少会超过 100 个成员）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:47:30.093

完全同意**assylias**，我的 UI 开发经验（使用 GWT 2 年以上）告诉我同样的情况。追求简单，但一定要衡量性能以了解您的方法的局限性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:51:09.033

> 所以，问题是：您是否允许在您的应用程序中使用这种方法，或者最好进行额外的计算并避免过度创建新对象（考虑到集合的平均大小很少会超过 100 个成员）？

答案取决于创建新对象的相对成本与更新它们的成本。确定这些成本是多少的唯一方法是*衡量它们*。（相关的问题是，绝对性能是否以较慢的方式“击中”它是否足以产生真正的影响......）

但是，在我看来，这听起来像是过早优化的情况。我认为您最好以更简单的方式实现应用程序，然后看看它的性能如何。如果速度太慢，则对其进行**分析**以确定实际的性能瓶颈在哪里。如果分析告诉您此方法是一个重大瓶颈，请考虑对其进行处理……否则，请不要理会它。

# qt - 如何使 QWebView 保存模态窗口的返回值？

> ID：12156552
> 
> 赞同：0
> 
> 时间：2012-08-28T09:39:05.203
> 
> 标签：qt, qtwebkit

是什么让这个小型浏览器应用无法返回模态窗口中给出的 window.returnValue？[Qt 浏览器演示](http://qt.gitorious.org/qt/qt/trees/4.8/demos/browser)确实使它工作，但我不知道为什么会这样，而这个迷你浏览器应用程序却没有。

```
#include <QApplication>
#include <QWebView>
#include <QWebPage>
#include <QUrl>

class WebPage : public QWebPage
{
public:
    QWebPage *createWindow(QWebPage::WebWindowType type)
    {
        QWebView *wv = new QWebView;
        if (type == QWebPage::WebModalDialog)
            wv->setWindowModality(Qt::ApplicationModal);
        return wv->page();
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QWebView view;

    QWebSettings::globalSettings()->setAttribute(QWebSettings::DeveloperExtrasEnabled, true);

    view.setPage(new WebPage);
    view.load(QUrl("http://help.dottoro.com/external/examples/ljdlgxbu/showModalDialog_1.htm"));
    view.show();

    return a.exec();
} 
```

[showModalDialog()](https://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog)是同步的，应该在调用创建的模式对话框中返回设置为 window.returnValue 的值。小型浏览器应用程序成功打开对话框窗口，但 (modal)window.returnValue 未设置为 showModalDialog() 的返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:18:21.320

在你的网页的构造函数中添加：

```
connect(this, SIGNAL(windowCloseRequested()), this, SLOT(windowCloseRequested())); 
```

并添加插槽

```
void WebPage::windowCloseRequested()
{
    this->view()->close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:49:56.703

似乎没有正确处理 windowCloseRequested() 信号。此示例将完美运行：

```
#include <QApplication>
#include <QWebView>
#include <QWebPage>
#include <QUrl>

class WebView : public QWebView
{
    Q_OBJECT
public:
    WebView(QWidget *parent = 0);
};

class WebPage : public QWebPage
{
    Q_OBJECT
public:
    WebPage(QObject *parent = 0) : QWebPage(parent) {
    }

    virtual QWebPage *createWindow(QWebPage::WebWindowType)
    {
        QWebView *view = new WebView();

        return view->page();
    }
};

WebView::WebView(QWidget *parent) : QWebView(parent) {
    setPage(new WebPage(this));
    connect(this->page(), SIGNAL(windowCloseRequested()), this, SLOT(deleteLater()));
}

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    WebView view;

    QWebSettings::globalSettings()->setAttribute(QWebSettings::DeveloperExtrasEnabled, true);
    view.load(QUrl("http://help.dottoro.com/external/examples/ljdlgxbu/showModalDialog_1.htm"));
    view.show();

    return a.exec();
}

#include "main.moc" 
```

# jquery - MVC 最简单的表排序

> ID：12156555
> 
> 赞同：1
> 
> 时间：2012-08-28T09:39:08.583
> 
> 标签：jquery, asp.net-mvc, razor

我正在尝试为我的 MVC 项目进行最简单的表排序，并在这里找到了这个很好的参考[jQuery table sort](https://stackoverflow.com/questions/3160277/jquery-table-sort)，尽管它似乎对我不起作用:(那里也有一个 JsFiddle 测试当然可以工作（[http://jsfiddle.net/gFzCk](http://jsfiddle.net/gFzCk)）但我的不会。

这是我试图排序的表。

```
<table id="projectTable">
    <thead>
        <tr>
            <th id="name_header">
                Name
            </th>
            <th id="author_header">
                Author
            </th>
            <th>
                Date Created
            </th>
            <th>
                Date Edited
            </th>
            <th style="text-align:right;"> <a href="@Url.Action("Create", "Project")"><button>&nbsp;Create&nbsp;</button></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model) {
            var id = item.ProjectID;

            <tr id='@id' class="trow @if (System.Web.HttpContext.Current.Session["_SelectedProject"].ToString() == "System.Object") { <text>none</text> }
                            else
                            { if (id == (int)System.Web.HttpContext.Current.Session["_SelectedProjectID"]) {<text>highlighted</text> }}">
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Author)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateCreated)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateEdited)
                </td>
                <td>
                    <a href='@Url.Action("Edit", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Edit16x16.png")' title="Edit"/></a> &nbsp;
                    <a href='@Url.Action("Details", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Details16x16.png")' title="Details" /></a> &nbsp;
                    <a href='@Url.Action("Delete", "Project", new { id = item.ProjectID })'><img src='@Url.Content("~/Content/images/Delete16x16.png")' title="Delete" /></a> &nbsp;
                    <a href='@Url.Action("Select", "Project", new { id = item.ProjectID })' class="select"  ><img src='@Url.Content("~/Content/images/Select16x16.png")' title="Select"  /></a> 
                </td>
            </tr>
         }
    </tbody>
</table> 
```

这是我使用的 JQuery。

```
<script type="text/javascript">
    var table = $('#projectTable');

    $('#name_header, #author_header')
        .wrapInner('<span title="sort this column"/>')
        .each(function () {

            var th = $(this),
            thIndex = th.index(),
            inverse = false;

            th.click(function () {

                table.find('td').filter(function () {

                    return $(this).index() === thIndex;

                }).sortElements(function (a, b) {

                    return $.text([a]) > $.text([b]) ?
                        inverse ? -1 : 1
                        : inverse ? 1 : -1;

                }, function () {

                    return this.parentNode;

                });

                inverse = !inverse;

            });

        });
</script> 
```

我已经测试过它是否运行脚本，它确实，它只是不会对它进行排序......

**HTML 标记**

我删除了`tbody`和`thead`.

```
<table id="projectTable">
    <tr>
        <th id="name_header">
            Name
        </th>
        <th id="author_header">
            Author
        </th>

        <th>
            Date Created
        </th>
        <th>
            Date Edited
        </th>
        <th style="text-align:right;"> <a href="/Project/Create"><button>&nbsp;Create&nbsp;</button></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
    </tr>
    <tr id='1' class="trow  none ">
        <td>
            Project 1
        </td>
        <td>
            Me
        </td>

        <td>
            8/24/2012 7:08:49 PM
        </td>
        <td>
             8/24/2012 7:08:49 PM
        </td>
        <td>
            <a href='/Project/Edit/1'><img src='/Content/images/Edit16x16.png' title="Edit"/></a> &nbsp;
            <a href='/Project/Details/1'><img src='/Content/images/Details16x16.png' title="Details" /></a> &nbsp;
            <a href='/Project/Delete/1'><img src='/Content/images/Delete16x16.png' title="Delete" /></a> &nbsp;
            <a href='/Project/Select/1' class="select"  ><img src='/Content/images/Select16x16.png' title="Select"  /></a> 
        </td>
    </tr>
    <tr id='2' class="trow  none ">
        <td>
            Test Project 2
        </td>
        <td>
            Me
        </td>

        <td>
            8/27/2012 5:42:32 PM
        </td>
        <td>
            8/27/2012 5:42:32 PM
        </td>
        <td>
            <a href='/Project/Edit/2'><img src='/Content/images/Edit16x16.png' title="Edit"/></a> &nbsp;
            <a href='/Project/Details/2'><img src='/Content/images/Details16x16.png' title="Details" /></a> &nbsp;
            <a href='/Project/Delete/2'><img src='/Content/images/Delete16x16.png' title="Delete" /></a> &nbsp;
            <a href='/Project/Select/2' class="select"  ><img src='/Content/images/Select16x16.png' title="Select"  /></a> 
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:04:57.527

在这种情况下，听起来您缺少对排序库的引用，请尝试在`script`使用 jQuery 的主标记之前添加它：

```
<script type="text/javascript" src="https://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js"></script> 
```

# android - Android：拍照并通过电子邮件发送错误

> ID：12156556
> 
> 赞同：1
> 
> 时间：2012-08-28T09:39:10.673
> 
> 标签：android, android-intent

我正在尝试创建一个应用程序来拍照，然后通过电子邮件发送。最近几天我一直在搞乱我的代码，我尝试了很多不同的东西，但我仍然无法让它工作。我可以拍照没问题，只是当我发送它时我的应用程序崩溃了。请参阅下面的代码：

```
public class Camera extends Activity implements View.OnClickListener {

ImageButton ib;
Button b;
ImageView iv;
Intent i;
final static int cameraData = 0;
Bitmap bmp;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo);
    initialize();
    InputStream is = getResources().openRawResource(R.drawable.ic_launcher);
    bmp = BitmapFactory.decodeStream(is);
}

private void initialize() {
    ib = (ImageButton) findViewById(R.id.ibTakePic);
    b = (Button) findViewById(R.id.bSendPic);
    iv = (ImageView) findViewById(R.id.ivReturnedPic);
    b.setOnClickListener(this);
    ib.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bSendPic:
        String emailaddress[] = { "info@sklep.com", "", };

        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.putExtra(Intent.EXTRA_EMAIL, emailaddress);

        // getPackageName() is your app package
        Uri path = Uri.parse("android.resource://" + getPackageName()
                + "/ + R.drawable.ic_launcher");
        emailIntent.putExtra(Intent.EXTRA_STREAM, path); // Replace your
                                                            // line
        emailIntent.setType("image/png");
        startActivity(Intent.createChooser(emailIntent, "Send Mail"));

        /*
         * emailIntent.setType("image/jpeg");
         * 
         * emailIntent.putExtra(Intent.EXTRA_STREAM, bmp);
         * 
         * emailIntent.setType("message/rfc822");
         * startActivity(Intent.createChooser(emailIntent, "Send Mail"));
         */

        break;
    case R.id.ibTakePic:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, cameraData);
        break;
    }

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {

        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.ic_launcher);

    }
} 
```

}

当我去发送它时，我收到以下错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.SEND (has extras) 
```

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:48:09.187

尝试使用这个

```
startActivityForResult(((Intent.createChooser(emailIntent, "Send mail..."))), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:06:56.440

添加 emailIntent.setType("message/rfc822"); 使用前`startActivity(emailIntent);`。并使用这个 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:51:17.807

看起来您没有合适的应用程序来处理这种意图。尝试创建选择器，这将打开一个与可以处理此类意图的应用程序的对话框。

尝试添加下一行：

使用下一个链接：[getPackageName](http://developer.android.com/reference/android/content/Context.html#getPackageName%28%29)

```
//getPackageName() is your app package
    Uri path = Uri.parse("android.resource://"+ getPackageName() +"/ + R.drawable.ic_launcher");    
    emailIntent.putExtra(Intent.EXTRA_STREAM, path ); //Replace your line
            emailIntent.setType("image/png");
            startActivity(Intent.createChooser(emailIntent, "Send Mail")); 
```

# asp.net-mvc-3 - 如何一次编写添加和删除操作的查询

> ID：12156558
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:39:18.570
> 
> 标签：asp.net-mvc-3, visual-studio-2010, linq

我有两个表，我有一个按钮控件，当我单击将 table2 中的记录添加到 table1 并且该记录必须在 table2 中删除的按钮时。我像这样写

```
public ActionResult Accept( int id, string selectedVal)                         //To update Accept status
        {
            var retrieveID = (from i in dbContext.groups
                              where i.groups_name == selectedVal
                              select new { groups_id = i.Usr_contacts_groups_id }).FirstOrDefault();

          var currentId = 1;
            var deleteQuery = dbContext.requests.Where(i => i.from_usr_id == id && i.to_usr_id == id).FirstOrDefault();

            contact contactGroup = new contact();

            contactGroup.groups_id = retrieveID.groups_id;
            contactGroup.groups_usr_id = currentId;

            this.dbContext.Add(contactGroup);
            this.dbContext.Delete(deleteQuery);
            try
            {
                this.dbContext.SaveChanges();

            }
            catch
            {
                return View();
            }
            return Json(null);
        } 
```

我可以在 table1 中添加记录，并在删除查询中使用“id”值删除 table2 中的多个记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:12:40.307

> table2 中的记录添加到 table1 并且该记录必须在 table2 中删除

我会用简单的英语假设：

> 该记录`table2`应添加到`table1`然后删除`table2`

换句话说，**将记录**从`table1`into `table2`，对吗？*（让我们假设它是）*

```
public ActionResult MoveRecord(int id) {

    // get Table 2 record
    var recordA = dbContext.table2.FirstOrDefault(x => x.bioId == id);

    // if we did find a record
    if (recordA != null) {

        // let's add it into Table 1
        var recordB = new Table2();
        recordB.id = recordA.id;
        recordB.value = recordA.value;

        // add to database
        dbContext.table1.AddObject(recordB);

        // now that we have it in the database, let's delete the original on
        dbContext.table2.DeleteObject(recordA);

        // save all changes
        dbContext.SaveChanges();
    }

    return RedirectToAction("Index");
} 
```

# silverlight - 在 RIA Services 中访问查询参数服务端

> ID：12156559
> 
> 赞同：0
> 
> 时间：2012-08-28T09:39:31.577
> 
> 标签：silverlight, wcf-ria-services

如果我有一个直接扩展的服务，`DomainService`是否可以在我的服务端查询中使用`Take`and`Skip`参数。

例如，这是我的简单服务......

```
[EnableClientAccess()]
public class StaffService : DomainService
{
    [Query]
    public IQueryable<StaffMember> GetStaffMembers()
    {
        var list = new List<StaffMember> 
        { 
            new StaffMember { Id=1, Name = "Bobby", JobDescription = "Driver" },
            new StaffMember { Id=2, Name = "Robert", JobDescription = "Driver's Mate" },
            new StaffMember { Id=3, Name = "Maxwell", JobDescription = "Diver" },
            new StaffMember { Id=4, Name = "Samuel", JobDescription = "Raver" }
        };

        return list.AsQueryable();
    }
} 
```

和我的简单查询...

```
context.Load<StaffMember>(context.GetStaffMembersQuery().Skip(1).Take(2)); 
```

这可行，仅返回 4 行中的 2 行，但如果这是访问数据库（例如使用 NHibernate），则必须返回所有行然后丢弃它们。

我想找到`Skip`and`Take`参数，这样我就可以从数据库中返回最少的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:44:20.773

> 它必须返回所有行然后丢弃它们。

不，只要您使用的是`IQueryable<T>`. 该`IQueryable<T>`接口旨在由查询提供者实现。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.linq.queryable%28v=vs.100%29.aspx)：

> 这些扩展 IQueryable 的方法不直接执行任何查询。相反，它们的功能是构建一个 Expression 对象，这是一个表示累积查询的表达式树。

例如，您的查询

```
public IQueryable<StaffMember> GetStaffMembers()
{
    return dbContext.StaffMembers;
} 
```

并在客户端

```
context.Load<StaffMember>(context.GetStaffMembersQuery().Skip(1).Take(2)); 
```

将由 TSQL 生成器翻译为：

```
SELECT TOP (2)
[Extent1].[ID] AS [ID],
[Extent1].[Name] AS [Name],
FROM (
      SELECT [Extent1].[ID] AS [ID],
      [Extent1].[Name] AS [Name],
      row_number() OVER (ORDER BY [Extent1].[ID] ASC) AS [row_number]
      FROM [dbo].[StaffMember] AS [Extent1])  AS [Extent1]
WHERE [Extent1].[row_number] > 1 
```

所以只有 2 个项目将通过网络传递。

# javascript - 如何在回调函数中传递参数？

> ID：12156560
> 
> 赞同：1
> 
> 时间：2012-08-28T09:39:32.233
> 
> 标签：javascript, asp.net, callback

我想在回调中获取电子邮件（来自 txtEmail 字段的文本值）

我有文本字段：

```
 <asp:TextBox MaxLength="50" runat="server" ID="txtEmail" ClientIDMode="Static" onblur="SendRequest()"></asp:TextBox> 
```

我的 javascript 处理程序：

```
 <script type="text/javascript">
      function SendRequest(arg) {
           window.UseCallback(arg);
      }
 </script> 
```

和服务器事件处理程序

```
 protected void Page_Init(object sender, EventArgs e)
 {
    string cbReference = Page.ClientScript.GetCallbackEventReference(this, "arg", "GetEmailFromServer", "context");
    string cbScript = "function UseCallback(arg, context){" + cbReference + ";}";
    Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "UseCallback", cbScript, true);
 }

 public void RaiseCallbackEvent(string eventArg)
 {
     var result = Controller.CheckEmail(eventArg);      // eventArg == undefined
 } 
```

如何将 eventArg 设置为 txtEmail.Text ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:07:41.533

更改此行并检查

```
 string cbScript = "function UseCallback(arg){" + cbReference + ";}"; 
```

**或** 改变这个

```
<script type="text/javascript">        
       function SendRequest(arg) 
        {
             window.UseCallback(arg,"");
        }   
</script> 
```

# java - MyBatis 是如何处理空结果集的？

> ID：12156562
> 
> 赞同：12
> 
> 时间：2012-08-28T09:39:41.530
> 
> 标签：java, mysql, mybatis

最近在使用Mybatis3，发现当你的SQL语句从数据库中得到一个空的结果集时，Mybatis会新建一个`List`返回给你的程序。

给定一些代码，例如：

```
List<User> resultList = (List<User>)sqlSession.select("statementId");

<select id="statementId" resultType="User">
   select * from user where id > 100
</select> 
```

假设上面的 SQL 没有返回任何行（即没有大于 100 的 id）。

该变量`resultList`将是一个空的`List`，但我希望它是`null`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-16T17:06:54.143

作为查询的结果，最好有一个空集合而不是 null。使用集合时，您通常会遍历每个项目并对其进行处理，如下所示：

```
List<User> resultList = (List<User>) sqlSession.select("statementId");
for (User u : resultList) { 
   //... 
} 
```

如果列表为空，它不会做任何事情。

但是，如果您返回 null，则必须保护您的代码免受 NullPointerExceptions 的影响，并改为编写如下代码：

```
List<User> resultList = (List<User>) sqlSession.select("statementId");
if (resultList != null) {
  for (User u : resultList) { 
     //... 
  }
} 
```

第一种方法通常更好，MyBatis 就是这样做的，但是如果这确实是你想要的，你可以强制它返回 null。

为此，您可以编写一个 MyBatis[插件](http://www.mybatis.org/core/configuration.html#plugins)并拦截对任何查询的调用，然后如果查询结果为空则返回 null。

这是一些代码：

在您的配置中添加：

```
<plugins>
   <plugin interceptor="pack.test.MyInterceptor" />
</plugins> 
```

拦截器代码：

```
package pack.test;

import java.util.List;
import java.util.Properties;

import org.apache.ibatis.executor.Executor;
import org.apache.ibatis.mapping.MappedStatement;
import org.apache.ibatis.plugin.Interceptor;
import org.apache.ibatis.plugin.Intercepts;
import org.apache.ibatis.plugin.Invocation;
import org.apache.ibatis.plugin.Plugin;
import org.apache.ibatis.plugin.Signature;
import org.apache.ibatis.session.ResultHandler;
import org.apache.ibatis.session.RowBounds;

@Intercepts({ @Signature(type = Executor.class, method = "query", args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class}) })
public class MyInterceptor implements Interceptor {
    public Object intercept(Invocation invocation) throws Throwable {
        Object result = invocation.proceed();
        List<?> list = (List<?>) result;
        return (list.size() == 0 ? null : result);
    }

    public Object plugin(Object target) {
        return Plugin.wrap(target, this);
    }

    public void setProperties(Properties properties) {
    }
} 
```

如果您拦截对`ResultSetHandler`而不是`Executor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T06:13:49.117

出于以下原因，使用空列表而不是 null 总是更好。

粗心地使用 null 会导致各种各样的错误。

此外，null 是令人不快的模棱两可。空返回值的含义很少很明显——例如， Map.get(key) 可以返回空值，因为映射中的值为空，或者值不在映射中。Null 可能意味着失败，可能意味着成功，几乎可以意味着任何事情。使用 null 以外的东西可以使您的意思清楚。

[关于空用法的好讨论](https://stackoverflow.com/a/6921270/990208)

# api - 使用 Twitter 框架关注用户

> ID：12156563
> 
> 赞同：0
> 
> 时间：2012-08-28T09:39:42.497
> 
> 标签：api, twitter

你能解释一下如何使用 twitter api 关注某人吗？我是初学者，我不知道该怎么做！

谢谢！

米克尔·安格尔·里戈·维达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:17:29.203

最简单的入门方法是使用现有的库。这是您可以使用的 Twitter 网站上的列表。查找为您熟悉的编程语言编写的内容：

[https://dev.twitter.com/docs/twitter-libraries](https://dev.twitter.com/docs/twitter-libraries)

或者，查看可用于您使用的编程语言的 HTTP 库并编写代码来发出 HTTP 请求。在关注另一个用户的情况下，您将为根据 Twitter 友情/创建文档指定的 URL 创建 HTTP POST 请求：

[https://dev.twitter.com/docs/api/1/post/friendships/create](https://dev.twitter.com/docs/api/1/post/friendships/create)

由于这需要身份验证，如上面的friendships/create 文档中所述，您必须使用OAuth，您可以在此处了解更多信息：

[https://dev.twitter.com/docs](https://dev.twitter.com/docs)

如果编写自己的 HTTP 和 OAuth 代码听起来太难，那么请查看上面的库列表，看看你能做什么。

乔

# css - 具有高度百分比的 div 的 CSS 布局

> ID：12156564
> 
> 赞同：0
> 
> 时间：2012-08-28T09:39:46.397
> 
> 标签：css, layout, html, height

我正在尝试解决以下 CSS：

```
<style type="text/css">
.parent {
    position: relative;
    height: 140px;
}
.parent .leftbit {
    width: 370px;
    position: absolute;
    top: 0px; left: 0px;
}
.parent .rightbit {
    width: 220px;
    position: absolute;
    top: 0px; left: 370px;
}

</style>
<div class="parent">
    <div class = "leftbit">abcdef</div>
    <div class = "rightbit">111111</div>
</div>

<div class="parent">
    <div class = "leftbit">ghijk</div>
    <div class = "rightbit">222222</div>
</div> 
```

这很好用，但我希望 div 的高度是自动的，这样它们一个接一个地堆叠在一起，而不管左右 div 中内容的高度如何。当我删除“高度：140px;”时 将父级的 div 打印在彼此的顶部。我认为这是因为代码不知道 leftbit 和 rightbit div 的高度，所以只是让父级没有高度，因此只是在同一个地方打印父级 div。谁能告诉我如何让父 div 承担左右 div 的高度。我可以通过添加额外的函数和一些 Jquery 代码来看到一种方法，但这似乎有点矫枉过正，我想我错过了一种更明显的方法，但我无法解决。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:42:57.520

您应该使用 float 而不是 absolute，然后在您的父母上添加一个[clearfix](http://css-tricks.com/snippets/css/clear-fix/)，它将跟随孩子的身高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:46:16.267

[**小提琴**](http://jsfiddle.net/mzPCU/1/)

使用`float`代替`position: absolute;`

```
.parent {
    position: relative;
    border: 1px solid #f00; overflow: hidden;
}
.parent .leftbit {
    width: 370px;    
    top: 0px; float: left;
}
.parent .rightbit {
    width: 220px;
    top: 0px; float: right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:43:15.617

如果您希望父级与子级一起自动扩展，那么您应该使用相对定位和基于浮动的布局。将子元素向左浮动，`clear: both` `div`在父元素之后指定 a。应该这样做。

# android - HelloWorld程序安装到模拟器，找不到程序

> ID：12156567
> 
> 赞同：0
> 
> 时间：2012-08-28T09:39:51.717
> 
> 标签：android

Android SDK选择2.3.3 AndroidManifest.xml文件内容如下

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"  
    package="com.cyf.dialer"  
    android:versionCode="1"  
    android:versionName="1.0" android:installLocation="auto">  

    <uses-sdk  
        android:minSdkVersion="8"  
        android:targetSdkVersion="10" />  

    <application  
        android:icon="@drawable/ic_action_search"  
        android:label="@string/app_name"  
        android:theme="@style/AppTheme">  
        <activity  
            android:name=".MainActivity"  
            android:label="@string/title_activity_main" >  
          </activity>  
    </application>  

</manifest> 
```

app_name 为：管理器中的 ChenyfDialer 可以看到模拟中的程序 ![在此处输入图像描述](../Images/70d6c7ed9b362f81f6f57dfcfbc69032.png) 但是菜单中的所有程序，都找不到 ![在此处输入图像描述](../Images/6e3824708a16940c2c727128715cf503.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:43:13.010

尝试将以下意图过滤器添加到您的活动中，如下所示，

```
 <activity  
            android:name=".MainActivity"  
            android:label="@string/title_activity_main" >  
       <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
 </activity> 
```

有关更多说明，请检查此[Intent Filters](http://developer.android.com/reference/android/content/IntentFilter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:58:44.053

尝试在您的清单中添加意图过滤器，您需要指定至少一个带有意图过滤器的活动来启动您的应用程序，检查以下代码。

```
<activity
        android:label="@string/app_name"
        android:name=".MainActivity">
         <intent-filter >
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# c# - UserControl 中未触发 KeyDown 事件

> ID：12156570
> 
> 赞同：2
> 
> 时间：2012-08-28T09:40:08.817
> 
> 标签：c#, winforms, keyboard, focus, keyevent

我有一个`UserControl`有一个`TreeView`和一个`TabControl`。此用户控件以正常形式托管。

如果用户从树形视图中选择某些内容，则会将自定义图片框添加到选项卡控件的选项卡页中。现在我想处理这个图片框上的键，但是我在 custompicturebox 中创建的事件没有被调用。我想要的是处理箭头键，但焦点停留在树视图上，所以箭头键只发生在树视图中。

当用户单击它时，我添加了代码以将焦点集中在图片框上，但它无助于从树视图中删除焦点。这是我在 custompicturebox 控件中的部分代码：

**更新** 似乎只有像箭头键这样的特殊键不起作用，我猜是因为树视图正在注册箭头键。如果我将图片框中的`KeyDown`事件更改为使用字符键，它可以工作！

```
private void IcPackageViewBox_KeyDown(object sender, KeyEventArgs e)
{
    if(e.KeyCode == Keys.Right)
    {
        OnPinClicked(_pinMap[_pinRectIndex].Pin);

        if (_pinRectIndex < _pinMap.Count)
            _pinRectIndex++;
        else
            _pinRectIndex = 0;
    }
}
    //Mouse Down Event
private void PackageViewBox_MouseDown(object sender, MouseEventArgs e)
{
    Focus();
    BringToFront(); //bring to front works! maybe it means focus should work also?
 } 
```

在承载此 UserControl 的表单中，我`KeyPreview`设置为，`True`但我还必须设置此表单上的其他事件。也许这就是为什么我无法在自定义控件中获得按键？

```
 private void MainForm_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Modifiers == Keys.Control)
        {
            projectBrowser.ControlKeyIsDown = true;
            e.Handled = true;
        } 
     }

    private void MainForm_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.LControlKey || e.KeyCode == Keys.RControlKey || e.KeyCode == Keys.ControlKey || e.KeyCode == Keys.Control)
        {
            projectBrowser.ControlKeyIsDown = false;
            e.Handled = true;
        }
    } 
```

这是程序的样子： ![在此处输入图像描述](../Images/33903f2c6688473b550df9d5f266afa5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:01:52.757

处理此问题的一种方法是覆盖 Form 的[ProcessCmdKey](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processcmdkey)方法。在那里，您将收到 WM_KEYDOWN 消息，然后再将它们分派到目标控件（具有焦点的控件）。在那里，您可以执行自己的逻辑来处理击键，并允许或禁止进一步处理消息。

# unix - 连接期间的分割线

> ID：12156579
> 
> 赞同：2
> 
> 时间：2012-08-28T09:40:33.790
> 
> 标签：unix, filter

我有一个文件列表，正好有 14.000 个文件。每个文件仅包含一行和多列（一个文件可以包含 1 行和 9.000 列）。我想将所有这些文件连接到一个文件中。由于每个文件包含 18 个标题行，我使用了“tail”。问题是连接失败是因为有时一行（可能是因为它太长）被拆分并写入新行。通过这种方式，我无法重建原始输出，因为在 14,000 个文件上，无法检查拆分发生的位置。谁能帮我克服这个问题？

删除前 18 个标题行后的两个文件的示例：

```
FLD1/file.txt:
...18 lines of header here...
PITPNM1 MARCH1  0.076739 MARCH5 0.134571 

FLD2/file.txt:
...18 lines of header here...
SEPT11 0.109543 DEC1 0.0536367  201205_at 0.0582265 202881_x_at 0.224719 
```

我期望的是：

```
PITPNM1 MARCH1  0.076739 MARCH5 0.134571 
SEPT11  0.109543 DEC1 0.0536367 201205_at 0.0582265 202881_x_at 0.224719 
```

相反，它错误地给出的输出是这样的：

```
PITPNM1 MARCH1  0.076739 MARCH5 0.134571    
SEPT11  0.109543 DEC1 0.0536367 201205_at    
0.0582265 202881_x_at   0.224719 
```

它将第二行分成两个子行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:31:01.690

您可以尝试提取第 19 行，例如使用此脚本，在您的 FLD1、FLD2 文件夹所在的目录中运行。

```
 #!/bin/sh
 find . -name file.txt |
 while read -r file; do
   awk 'NR==19' $file
 done > resultfile 
```

但请注意，Unix 中对*行*的定义表明它不能任意长。如果系统上的 awk 截断长行或拆分它们，请使用 perl，即

```
 perl -ne 'print if ($. == 19)' $file   # instead of awk above 
```

# mysql - 检查是否存在员工 ID 以批准注册

> ID：12156580
> 
> 赞同：0
> 
> 时间：2012-08-28T09:40:35.833
> 
> 标签：mysql, assets

我正在尝试找出一个存储过程来检查员工 ID 的输入（如果它已经存在于数据库中）。如果存在，则将插入他/她的个人信息。这是我的代码：我非常需要一个解决方案！我不是 SQL 查询方面的专家。

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `register`(

        IN  EmployeeID INT(11), 
        IN  GivenName VARCHAR(20), 
        IN  MI VARCHAR(10), 
        IN  Surname VARCHAR(20), 
        IN  Gender VARCHAR(6),
        IN  month VARCHAR(2),
        IN  day VARCHAR(2),
        IN  year VARCHAR(4),
        IN  Landline INT(8),
        IN  Cellphone BIGINT(20),
        IN  EMail VARCHAR(30))

BEGIN

SELECT emp_id FROM `assettracker`.`employee`;

IF (empid=EmployeeID) THEN

INSERT INTO `assettracker`.`employee` (emp_fname, emp_midname, emp_surname, emp_gender, 
emp_bday,emp_phone, emp_cellphone, emp_email) 
                    VALUES(GivenName, MI, Surname, Gender, CONCAT(month,'/',day,'/',year), 
                                        Landline, Cellphone, EMail);

ENDIF;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:48:03.993

选择时添加 where 子句`emp_id`。

```
IF not EXISTS (SELECT emp_id FROM `assettracker`.`employee` Where emp_id=EmployeeID) Then
    //insert statement
END IF; 
```

# wordpress - Wordpress - 发布循环，包含来自具有不同布局的两个类别的帖子

> ID：12156586
> 
> 赞同：0
> 
> 时间：2012-08-28T09:40:50.810
> 
> 标签：wordpress

我想在 WordPress 中显示来自两个不同类别的帖子。类别应该有自己的风格。但我无法让它正常工作。该帖子出现但不按日期顺序或仅限于五个帖子。

您可以在下面找到我的代码的摘录。

谢谢

```
<ul class="slides">
<?php query_posts('cat=13,5&orderby=date&posts_per_page=5'); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?> 
<?php if ( is_category('13') ) {?>
    <li>                    
        <div>
            CONTENT    
        </div>
    </li>
    <?php } else {?>
    <li>                    
        <div>
            CONTENT    
        </div>
    </li>
    <?php }?>
    </li>
<?php endwhile; ?>
<?php endif; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:50:27.160

[`is_category()`](http://codex.wordpress.org/is_category)检查模板不是帖子。你需要[`get_the_category()`](http://codex.wordpress.org/Function_Reference/get_the_category)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:07:06.650

此代码可以帮助您

```
global $post;
$categories = get_the_category($post->ID);
var_dump($categories); 
```

谢谢

# python - CherryPy 上的烧瓶路由问题

> ID：12156588
> 
> 赞同：0
> 
> 时间：2012-08-28T09:41:01.547
> 
> 标签：python, routes, flask, cherrypy

我在[http://flask.pocoo.org/snippets/24/](http://flask.pocoo.org/snippets/24/)上尝试了使 Flask 在 CheryPy 服务器上工作的方法，它工作正常，到目前为止没有问题。但除了“/”之外，我无法路由其他任何东西。例如，如果我想路由到 localhost/xyz，它会返回“Hello World”。

我应该为每条路径创建一个 Flask 应用程序吗？

server.py 是：

```
from cherrypy import wsgiserver
from qwe import app

d=wsgiserver.WSGIPathInfoDispatcher({"/":app,"/xyz":app})
server=wsgiserver.CherryPyWSGIServer(('0.0.0.0',80),d)

if __name__ == '__main__':
    try:
        server.start()
    except KeyboardInterrupt:
        server.stop() 
```

qwe.py 是：

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World"

@app.route("/xyz")
def ff():
    return "Test1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:12:59.707

它应该以这种方式工作：

应用程序.py：

```
from flask import Flask
app = Flask(__name__)

@app.route("/")
def root():
    return "Hello World!"

@app.route("/xyz")
def xyz():
    return "Hello XYZ!"

if __name__ == "__main__":
    app.run() 
```

服务器.py：

```
from cherrypy import wsgiserver
from app import app

d = wsgiserver.WSGIPathInfoDispatcher({'/': app})
server = wsgiserver.CherryPyWSGIServer(('0.0.0.0', 9999), d)

if __name__ == '__main__':
    try:
        server.start()
    except KeyboardInterrupt:
        server.stop() 
```

去拿，`http://localhost:9999`然后去拿`Hello World!``http://localhost:9999/xyz``Hello XYZ!`

# c# - 按距离最短的标记对列表进行排序

> ID：12156589
> 
> 赞同：0
> 
> 时间：2012-08-28T09:41:02.903
> 
> 标签：c#, sorting

我想对字符串列表进行排序。我有 1000 个地址（一些用空格分隔的自定义地址数据）。第二件事是我的搜索查询。现在我想获取所有单词标记（没有数字）并按最小距离对它们进行排序。

例如

```
string query = "123 HAM";
// 1\. get only "HAM" token
// 2\. count distances
// 3\. sort by them
//distance("HAM", "12 HAM DRIVE") -> 0
//distance("HAM", "13 HAM DRIVE") -> 0
//distance("HAM", "14 HAMER DRIVE") -> 2
//distance("HAM", "37 HAMMERSMITH AVENUE") -> 8 
```

如果我的查询标记是，那么和之间的`HAM`距离是 0，和之间的距离是 2（因为还有 2 个字母），等等。`HAM``HAM``HAM``HAMER``HAMER`

我得到“单词”标记：

```
private static IEnumerable<string> GetLetterTokens(string location)
{
    string[] words = location.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries);
    return words.Where(word => Regex.IsMatch(word.Trim(), @"^[a-zA-Z]+$"));
} 
```

现在对于每个地址，我想计算这些距离并按它们排序。有什么快速的方法吗？我的意思是例如使用`List<>.Sort`.

谢谢你的建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:02:48.813

> 我认为您可以使用[Levenshtein Distance](http://www.dotnetperls.com/levenshtein) – LB

```
var result = addresses.OrderBy(a => 
         string.Join(" ", GetLetterTokens(a))
       , new LevenshteinDistance());

public class LevenshteinDistance : IComparer<String>
{
    /// <summary>
    /// Compute the distance between two strings.
    /// </summary>
    public int Compare(string s, string t)
    {
    int n = s.Length;
    int m = t.Length;
    int[,] d = new int[n + 1, m + 1];

    // Step 1
    if (n == 0)
    {
        return m;
    }

    if (m == 0)
    {
        return n;
    }

    // Step 2
    for (int i = 0; i <= n; d[i, 0] = i++)
    {
    }

    for (int j = 0; j <= m; d[0, j] = j++)
    {
    }

    // Step 3
    for (int i = 1; i <= n; i++)
    {
        //Step 4
        for (int j = 1; j <= m; j++)
        {
        // Step 5
        int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;

        // Step 6
        d[i, j] = Math.Min(
            Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
            d[i - 1, j - 1] + cost);
        }
    }
    // Step 7
    return d[n, m];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:06:10.550

我认为这就是你要找的：

```
 string token = "HAM";
    List<string> addresses = new List<string>
    {
        "12 HAM DRIVE",
        "13 HAM DRIVE",
        "14 HAMER DRIVE",
        "37 HAMMERSMITH AVENUE",
        "15 HAM HAMER DRIVE",
    };

    var result = from a in addresses
                 let tokens = GetLetterTokens(a)
                 let distances = from t in tokens
                                 where t.Contains(token)
                                 select t.Length - token.Length
                 where distances.Any()
                 let distance = distances.Min()
                 orderby distance
                 select new
                 {
                     Address = a,
                     Distance = distance,
                 }; 
```

If you only want tokens that start with the token you look for use `StartsWith` instead of `Contains`.

# mercurial - mercurial 会自动提交标签吗？

> ID：12156591
> 
> 赞同：2
> 
> 时间：2012-08-28T09:41:07.903
> 
> 标签：mercurial

当我这样做时`hg tag example`，标签会在该过程中自动提交吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:35:14.083

该标签确实已提交，但不会自动推送。所以你仍然需要在`hg push`使用命令检查你的输出之后做`hg out`

# select - 如何传递select语句的值？

> ID：12156592
> 
> 赞同：0
> 
> 时间：2012-08-28T09:41:10.750
> 
> 标签：select, loops, count, sql-server-2008-r2

我在 SQL Server 2008 R2 中有这行代码

```
select * from [Db].[dbo].[cart] where date < DATEADD(MINUTE, -30, GETDATE()) 
```

我想计算所有满足条件并传递给变量的数据

```
Declare @loop 
```

我将使用变量来知道循环计数..

问题是：如何将 Select 语句的值传递给 @loop 变量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:43:11.263

怎么样

```
DECLARE @loop INT

select  @loop = COUNT(1) 
from    [Db].[dbo].[cart] 
where   date < DATEADD(MINUTE, -30, GETDATE()) 
```

看看[SELECT @local_variable (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187330.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:47:09.417

你有没有尝试过

```
 SELECT @loop = @@RowCount 
```

# winforms - 如何删除 radgridview 中的一行？

> ID：12156595
> 
> 赞同：0
> 
> 时间：2012-08-28T09:41:18.783
> 
> 标签：winforms, telerik, delete-row, radgridview

// 我在 radgridview 上编辑一行

```
 radgridview.rows[0].value = true; 
```

// 然后我不能删除它。

```
 radgridview.rows[0].delete(); 
```

// 如果我尝试删除该行得到这个异常 => 不能删除不在列表中的对象

// 但如果我不编辑该行，我可以删除它。

// 请帮忙，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:50:03.807

您不能使用以下代码更改行值：

```
radgridview.rows[0].value = true; 
```

正确的代码将是：

```
radGridView1.Rows[0].Cells["Your column name"].Value = true; 
```

至于您关于删除行的问题，如果网格是绑定到简单列表的数据，您可以通过直接从列表中删除该行并更新网格来删除该行。或者，要正确处理所有通知，您绑定到的集合应该实现**IBindingList**接口（您可以使用**BindingList**），并且存储在集合中的对象应该实现**INotifyPropertyChanged**接口。

如果不是这种情况，请告诉我们您的绑定方案到底是什么。

# javascript - JavaScript onScroll 在 Google Apps 脚本网络应用程序中不起作用

> ID：12156600
> 
> 赞同：0
> 
> 时间：2012-08-28T09:41:30.343
> 
> 标签：javascript, scroll, google-apps-script, google-sites, google-caja

我在 HTML 中创建了一个表格，并使用 CSS 添加了样式，并通过 javascript 添加了一个滚动元素。我在这篇文章中附上了示例源代码。当我将代码放在谷歌网站时，滚动不起作用。请帮我解决这个问题。我从以下站点链接中获得了示例代码。

[http://blog.oxagile.com/2009/10/26/scrollable-html-table-with-fixed-header-for-ie-7-ie-8-firefox-35-chrome/](http://blog.oxagile.com/2009/10/26/scrollable-html-table-with-fixed-header-for-ie-7-ie-8-firefox-35-chrome/)

名为“table.html”的 HTML 文件中的编码如下

```
<html>
  <head>
    <style>
      table#table-body, table#table-header, table#table-footer
      {
        border-spacing:0;
        border-collapse:collapse;
        border:1px solid;
        table-layout:fixed;
        width:1000px;
        border:1px solid #000;
      }

      table#table-header th
      {
        background:#c2a1a1;
      }

      table#table-footer td
      {
        background:#a39393;
      }

      table#table-body td
      {
        background:#e1d9d9;
      }

      table#table-body td, table#table-header th, table#table-footer td
      {
        border:1px solid #000;
        width:100px;
        height:30px;
        overflow:hidden;
        white-space:nowrap; 
      }

      div#header-container, div#footer-container
      {
        overflow:hidden;
      }

      div#scroll
      {
        width:500px;
        overflow:hidden;
        max-height:150px;
        padding-left:1px;
      }

      div#fake-scroll-container
      {
        width:500px;
        overflow:hidden;
        position:relative;
      }

      div#y-fake-scroll
      {
        overflow-y:scroll; 
        overflow-x:hidden;
        background:transparent; 
        position:absolute;
        right:0;
        position:absolute;
        max-height:149px;
        top:31px;
      }

      div#x-fake-scroll
      {
        height:40px;
        margin-top:-23px;
        overflow-x:auto;
        overflow-y:hidden;
        margin-top:expression('0px');/* IE 7 fix*/
        height:expression('17px'); /* IE 7 fix*/
      }

      div#y-scroll
      {
        max-height:150px;
        overflow-y:auto;
        overflow-x:hidden;
        overflow:scroll;
        width:1010px;
        padding:0px 1px 1px 1px;
      }

      div#header-container
      {
        padding:1px 1px 0 1px;
      }

      div#footer-container
      {
        padding:0 1px;
      }      
    </style>
  </head>
  <body>
    <div id="fake-scroll-container">

      <div id="header-container">
        <table id="table-header" cellpadding="0" cellspacing="0">
          <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
            <th>Column 4</th>
            <th>Column 5</th>
            <th>Column 6</th>
            <th>Column 7</th>
            <th>Column 8</th>
            <th>Column 9</th>
            <th>Column 10</th>
          </tr>
        </table>
      </div>

      <div id="scroll">
        <table id="table-body" cellpadding="0" cellspacing="0">
          <tr>
            <td>Cell 1.1</td>
            <td>Cell 1.2</td>
            <td>Cell 1.3</td>
            <td>Cell 1.4</td>
            <td>Cell 1.5</td>
            <td>Cell 1.6</td>
            <td>Cell 1.7</td>
            <td>Cell 1.8</td>
            <td>Cell 1.9</td>
            <td>Cell 1.10</td>      
          </tr>
          <tr>
            <td>Cell 2.1</td>
            <td>Cell 2.2</td>
            <td>Cell 2.3</td>
            <td>Cell 2.4</td>
            <td>Cell 2.5</td>
            <td>Cell 2.6</td>
            <td>Cell 2.7</td>
            <td>Cell 2.8</td>
            <td>Cell 2.9</td>
            <td>Cell 2.10</td>      
          </tr> 
          <tr>
            <td>Cell 3.1</td>
            <td>Cell 3.2</td>
            <td>Cell 3.3</td>
            <td>Cell 3.4</td>
            <td>Cell 3.5</td>
            <td>Cell 3.6</td>
            <td>Cell 3.7</td>
            <td>Cell 3.8</td>
            <td>Cell 3.9</td>
            <td>Cell 3.10</td>      
          </tr> 
          <tr>
            <td>Cell 4.1</td>
            <td>Cell 4.2</td>
            <td>Cell 4.3</td>
            <td>Cell 4.4</td>
            <td>Cell 4.5</td>
            <td>Cell 4.6</td>
            <td>Cell 4.7</td>
            <td>Cell 4.8</td>
            <td>Cell 4.9</td>
            <td>Cell 4.10</td>      
          </tr>
          <tr>
            <td>Cell 5.1</td>
            <td>Cell 5.2</td>
            <td>Cell 5.3</td>
            <td>Cell 5.4</td>
            <td>Cell 5.5</td>
            <td>Cell 5.6</td>
            <td>Cell 5.7</td>
            <td>Cell 5.8</td>
            <td>Cell 5.9</td>
            <td>Cell 5.10</td>      
          </tr>
          <tr>
            <td>Cell 6.1</td>
            <td>Cell 6.2</td>
            <td>Cell 6.3</td>
            <td>Cell 6.4</td>
            <td>Cell 6.5</td>
            <td>Cell 6.6</td>
            <td>Cell 6.7</td>
            <td>Cell 6.8</td>
            <td>Cell 6.9</td>
            <td>Cell 6.10</td>      
          </tr>
          <tr>
            <td>Cell 7.1</td>
            <td>Cell 7.2</td>
            <td>Cell 7.3</td>
            <td>Cell 7.4</td>
            <td>Cell 7.5</td>
            <td>Cell 7.6</td>
            <td>Cell 7.7</td>
            <td>Cell 7.8</td>
            <td>Cell 7.9</td>
            <td>Cell 7.10</td>      
          </tr>
          <tr>
            <td>Cell 8.1</td>
            <td>Cell 8.2</td>
            <td>Cell 8.3</td>
            <td>Cell 8.4</td>
            <td>Cell 8.5</td>
            <td>Cell 8.6</td>
            <td>Cell 8.7</td>
            <td>Cell 8.8</td>
            <td>Cell 8.9</td>
            <td>Cell 8.10</td>      
          </tr>
        </table>    
      </div>
      <div id="y-fake-scroll">
        <div id="y-table-emulator" style="width:40px;">
          &nbsp;
        </div>
      </div>

      <div id="x-fake-scroll">
        <div id="x-table-emulator">
          &nbsp;
        </div>
      </div>
      <script>
        var YtableEmulator = document.getElementById('y-table-emulator');
        var XtableEmulator = document.getElementById('x-table-emulator');
        var table = document.getElementById('table-body');

        YtableEmulator.style.height = table.clientHeight == 0 ? "330px" : table.clientHeight + "px";
        XtableEmulator.style.width = table.clientWidth + "px";

        var scrollablePanel = document.getElementById('scroll');
        var headerContainer = document.getElementById('header-container');
        var footerContainer = document.getElementById('footer-container');
        var YfakeScrollablePanel = document.getElementById('y-fake-scroll');
        var XfakeScrollablePanel = document.getElementById('x-fake-scroll');

        YfakeScrollablePanel.style.top = headerContainer.clientHeight == 0 ? "34px" : headerContainer.clientHeight + "px";
        scrollablePanel.onscroll = function (e) {
          XfakeScrollablePanel.scrollTop = scrollablePanel.scrollTop;
        }
          YfakeScrollablePanel.onscroll = function (e) {
            scrollablePanel.scrollTop = YfakeScrollablePanel.scrollTop;
          }
            XfakeScrollablePanel.onscroll = function (e) {
              scrollablePanel.scrollLeft = XfakeScrollablePanel.scrollLeft;
              headerContainer.scrollLeft = XfakeScrollablePanel.scrollLeft;
              footerContainer.scrollLeft = XfakeScrollablePanel.scrollLeft;
            }
              alert('but this is fine!');
      </script>
    </div>
  </body>
</html> 
```

名为“Code.gs”的 GAS 文件中的编码在这里

```
function doGet() {
  return HtmlService.createTemplateFromFile('table').evaluate();
} 
```

我认为脚本标签内的 .onscroll 在发布项目时不起作用。

请帮我解决这个问题。

谢谢和问候，乔卡林加姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:44:14.457

我在 Google Caja 问题跟踪器中提出了这个问题，他们修复了它。你可以[**在这里查看。**](http://code.google.com/p/google-caja/issues/detail?id=1512)

实际上，我想使用谷歌网站中固定的表头滚动。

Google Caja 团队将修改提交给 Apps Script 团队，您可以[**在此处查看。**](http://code.google.com/p/google-caja/source/detail?r=5029)

尚未为 Apps 脚本部署此问题。请点击上述问题链接以获取有关此问题的进一步更新。

请支持尽快在 Apps Script 中部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:38:10.103

我在这里更新了问题跟踪器：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1781) ://code.google.com/p/google-apps-script-issues/issues/detail?id=1781 ，但为了完整起见，我也想在 SO 上发布。

这似乎是 Caja 的问题。我将您的 HTML 代码粘贴到 Caja Playground (http://caja.appspot.com) 并看到相同的行为 - 移动滚动条没有效果。请在 Google Caja 问题跟踪器上提出此问题：[http ://code.google.com/p/google-caja/issues/list](http://code.google.com/p/google-caja/issues/list)

# c# - 创建两个具有相同友好名称的应用程序域

> ID：12156609
> 
> 赞同：4
> 
> 时间：2012-08-28T09:42:03.247
> 
> 标签：c#, appdomain

如果我们创建两个具有相同友好名称的应用程序域，谁能知道会发生什么？

```
 static void Main(string[] args)
    {
        var myDomain = AppDomain.CreateDomain("mydomain");
        var myDomain2 = AppDomain.CreateDomain("mydomain");
    } 
```

正如我注意到这并没有引发异常，也许这两个局部变量指向同一个应用程序域？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:44:36.393

> friendlyName 参数旨在以对人类有意义的方式识别域。该字符串应该适合在用户界面中显示。

[http://msdn.microsoft.com/en-us/library/47e8e141.aspx](http://msdn.microsoft.com/en-us/library/47e8e141.aspx)

正如您所猜测的那样，如果您在 UI 中使用友好名称，它只会让用户感到困惑

# symfony1 - 使用 symfony 1.4.11 推进版本

> ID：12156611
> 
> 赞同：0
> 
> 时间：2012-08-28T09:42:19.670
> 
> 标签：symfony1, symfony-1.4, propel

我浏览了几篇文章，但没有找到可能是最简单问题之一的答案。symfony 1.4.11 捆绑的**标准Propel 版本是什么？**

在一个答案中，我找到了使用该`awk`命令的建议，但不幸的是我在 Windows 上，因此该命令不会为我运行。

另一个答案是安装不同的 Propel Lib；拜托，没有这样的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:50:30.283

据我所知，答案是 Propel 1.4.2。我正在查看 Symfony 1.4.11 中的 CHANGELOG 文件（在[Github 镜像](https://github.com/symfony/symfony1/blob/74817d929577c3ee5fd08648f6d558e199169e35/CHANGELOG)上）。Propel 版本的最后一次更改是在 Symfony 1.4.5 中：

```
05/31/10: Version 1.4.5
-----------------------
[snip]
 * [29218] updated Propel to 1.4.2 
```

* * *

[编辑：确实，这在第 93 行的](https://github.com/symfony/symfony1/blob/74817d929577c3ee5fd08648f6d558e199169e35/lib/plugins/sfPropelPlugin/lib/vendor/propel/Propel.php#L93)[主`Propel`](https://github.com/symfony/symfony1/blob/74817d929577c3ee5fd08648f6d558e199169e35/lib/plugins/sfPropelPlugin/lib/vendor/propel/Propel.php#L93)类中已明确：

```
const VERSION = '1.4.2'; 
```

您可以在本地系统中看到这一点；该文件是 `lib/plugins/sfPropelPlugin/lib/vendor/propel/Propel.php`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:51:24.677

简单地看一下[svn 存储库](http://trac.symfony-project.org/browser/tags/RELEASE_1_4_11/lib/plugins/sfPropelPlugin/lib/vendor)。每个 symfony 版本都被标记。你会看见：

> 推进[http://propel.mirror.svn.symfony-project.com/tags/1.4.2/runtime/classes/propel/](http://propel.mirror.svn.symfony-project.com/tags/1.4.2/runtime/classes/propel/)

所以它使用 Propel 1.4.2。

# bittorrent - 如何创建/构建/构建完全无跟踪器的 p2p（点对点）？

> ID：12156618
> 
> 赞同：6
> 
> 时间：2012-08-28T09:42:37.043
> 
> 标签：bittorrent, transmission, utorrent, libtorrent

如何创建/构建/构建完全无跟踪器的 p2p（点对点）分布式网络架构？

如果我在不同的**WAN中有具有****静态 IP 地址**的种子/对等体和种子/对等体。

 **我阅读了有关[BTS](http://wiki.theory.org/BitTorrentSpecification)和[DHT的信息](http://en.wikipedia.org/wiki/Distributed_hash_table)

我还发现：

> **洪流文件扩展名**
> 
> 无跟踪器的洪流字典没有“宣布”键。相反，无跟踪器的洪流有一个“节点”键。此键应设置为 torrent 生成客户端路由表中最近的 K 个节点。或者，可以将密钥设置为已知的良好节点，例如由生成种子的人操作的节点。请不要自动将“router.bittorrent.com”添加到 torrent 文件或自动将此节点添加到客户端路由表中。

`nodes = [["<host>", <port>], ["<host>", <port>], ...]`

`nodes = [["127.0.0.1", 6881], ["your.router.node", 4804]]`

但是，我不明白我应该在哪里刷新（硬代码）这些 IP 地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:00:23.113

我猜你问的不是很具体，无法回答。

如果您的问题更多是“我如何指示一些特定的客户端应用程序使用已知节点加入一个常见的、“无跟踪器”群？”。

...那么您应该提供有关您想到的客户端应用程序的更多信息 - 这最终将取决于此客户端应用程序让您指定的能力。

如果您的问题更多：“我如何编写自己的客户端应用程序以在已知节点上引导？”

...然后，假设您计划为此使用 rasterbar libtorrent（您已标记，并且是我唯一使用过的），您当然可以通过调用 DHT 相关方法来做到这一点：请参阅[http://www.rasterbar .com/products/libtorrent/manual.html#start-dht-stop-dht-set-dht-settings-dht-state-is-dht-running](http://www.rasterbar.com/products/libtorrent/manual.html#start-dht-stop-dht-set-dht-settings-dht-state-is-dht-running)

这将在您的 C++ 或 Python 代码中设置，具体取决于您使用 libtorrent 的方式。

希望有帮助。**

# c# - String sorting performance degradation in VS2010 vs. VS2008

> ID：12156627
> 
> 赞同：19
> 
> 时间：2012-08-28T09:43:11.403
> 
> 标签：c#, .net, performance, sorting, clr

The following C# code seems to run *slower* when built with VS2010 than with VS2008: on a Core i5 Win7 x64 8 GB RAM PC, the VS2008 built version sorts strings in about 7.5 seconds, instead the VS2010 built version requires about 9 seconds. Why is that?

Is there anything wrong with my code?

Did the sorting algorithm change in VS2010?

Is there anything different in the underlying CLR that makes the performance worse?

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.Linq;

namespace StringSortCSharp
{
    /// <summary>
    /// Console app to test string sorting performance in C#.
    /// </summary>
    class Program
    {
        /// <summary>
        /// Displays the first lines from a vector of strings.
        /// </summary>
        /// <param name="wishedN">Number of lines to display.</param>
        /// <param name="lines">Source lines to display.</param>
        private static void DisplayFirst(int wishedN, List<string> lines)
        {
            int n = Math.Min(wishedN, lines.Count);
            for (int i = 0; i < n; i++)
            {
                Console.WriteLine("  " + lines[i]);
            }
            Console.WriteLine();
        }

        /// <summary>
        /// Used for random permutation.
        /// </summary>
        private static Random random = new Random();

        /// <summary>
        /// Computes a random permutation of the input sequence.
        /// 
        /// From:
        ///     http://stackoverflow.com/questions/375351/most-efficient-way-to-randomly-sort-shuffle-a-list-of-integers-in-c-sharp
        /// 
        /// </summary>
        /// <typeparam name="T">Type stored in the sequences.</typeparam>
        /// <param name="sequence">Input sequence.</param>
        /// <returns>Random permutation of the input sequence.</returns>
        private static IEnumerable<T> RandomPermutation<T>(IEnumerable<T> sequence)
        {
            T[] retArray = sequence.ToArray();

            for (int i = 0; i < retArray.Length - 1; i += 1)
            {
                int swapIndex = random.Next(i + 1, retArray.Length);
                T temp = retArray[i];
                retArray[i] = retArray[swapIndex];
                retArray[swapIndex] = temp;
            }
            return retArray;
        }

        /// <summary>
        /// Builds a list of strings used in the performance benchmark.
        /// </summary>
        /// <returns>Test list of strings.</returns>
        private static List<string> BuildTestLines()
        {
            // Start with "Lorem ipsum", and repeat it several times, adding some suffix strings.

            var lorem = new string[]
             {
                 "Lorem ipsum dolor sit amet, consectetuer adipiscing elit.",
                 "Maecenas porttitor congue massa. Fusce posuere, magna sed",
                 "pulvinar ultricies, purus lectus malesuada libero,",
                 "sit amet commodo magna eros quis urna.",
                 "Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.",
                 "Pellentesque habitant morbi tristique senectus et netus et",
                 "malesuada fames ac turpis egestas. Proin pharetra nonummy pede.",
                 "Mauris et orci."
             };

            int repeatCount = 200 * 1000;

            Console.Write("Building test strings");
            var testLines = new List<string>();

            Console.Write(" (total string count = {0})", repeatCount * lorem.Length);
            Console.Write("...");
            for (int i = 0; i < repeatCount; i++)
            {
                for (int j = 0; j < lorem.Length; j++)
                {
                    // Add more stuff to Lorem strings 
                    testLines.Add(lorem[j] + " (#" + i + ")");
                }
            }
            Console.WriteLine("done.");

            DisplayFirst(5, testLines);
            Console.WriteLine();

            // Shuffle the previously built strings.

            Console.Write("Shuffling strings...");
            var randomLines = new List<string>(RandomPermutation(testLines));
            Console.WriteLine("done.");
            DisplayFirst(5, randomLines);
            Console.WriteLine();

            return randomLines;
        }

        /// <summary>
        /// Sort the input lines.
        /// </summary>
        /// <param name="lines">Input lines to sort.</param>
        private static void Test(List<string> lines)
        {
            // Stopwatch to measure time performance
            var timer = new Stopwatch();

            Console.Write("Sorting " + lines.Count + " lines...");

            // Sort benchmark

            timer.Start();
            lines.Sort();
            timer.Stop();
            Console.WriteLine("done.");

            // Display results

            DisplayFirst(5, lines);

            Console.WriteLine();
            Console.WriteLine((timer.ElapsedMilliseconds / 1000.0).ToString(CultureInfo.InvariantCulture) + " seconds elapsed.");
        }

        static void Main(string[] args)
        {
            Console.WriteLine("*** Testing String Sorting in C# ***");
            Console.WriteLine();

            // Build test lines used for the sort benchmark
            List<string> testLines = BuildTestLines();

            // Run the sort test
            Test(testLines);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-29T18:13:04.010

Here is a brief outline of sorting algorithms used in .NET versions. It's helpful to remember that `List<T>.Sort()` internally uses `Array<T>.Sort()`

*   In .NET 2.0-4.0, a quick sort algorithm is used to sort an `Array`. There have been minor changes to the code, but for the most part, the code remains the same.
*   In .NET 4.5, the array sorting algorithm changed from quick sort to an introspective sort. This is a larger change than from before, one that, at least in *my* tests, shows considerable performance improvements.

### Did the sorting algorithm change in VS2010?

Yes, but the changes were minor, and doesn't affect performance. Consider a sort against 20 million shuffled integers¹:

```
List<int>.Sort() (20 million)

.NET 3.5       .NET 4.0       .NET 4.5
---------      ---------      ---------
 2.564s         2.565s         2.337s

```

There's no change between v3.5 and v4.0 in terms of performance. There is a noticeable increase in speed for v4.5\. It's clear that it's not the actual sorting algorithm that is making the difference.

Before we jump into your next question, let me share my results of running your actual code on my machine:

```
List<string>.Sort() (1.6 million)

.NET 3.5       .NET 4.0       .NET 4.5
---------      ---------      ---------
 7.953s         11.267s        10.092s

```

I get similar results, as you do. These results are a good lead-in to your next question:

### Is there anything different in the underlying CLR that makes the performance worse?

Without a doubt. So, what is the difference? The difference is in string comparison implementation. In each step of the sorting algorithm it needs to compare the two strings, and it happens to do it differently between the v2.0 and v4.0 runtime. *(See extra notes below)*

The easiest way to prove this is to force sorting by ordinal position, instead of culture dependence. Replace `lines.Sort();` with `lines.Sort(StringComparer.Ordinal);`. Here is what I measured:

```
List<string>.Sort(StringComparer.Ordinal) (1.6 million)

.NET 3.5       .NET 4.0       .NET 4.5
---------      ---------      ---------
 4.088s         3.76s          3.454s

```

Now, that looks better! It's more or less what I expected; a steady increase in speed for each version of the framework released. [MSDN Suggests](http://msdn.microsoft.com/en-us/library/bb385972.aspx) that if you're ever doing a non-linguistic comparison on a string, you *should* use an ordinal comparison.

However, that only solves the problem if your comparison or sorting isn't culture-sensitive. If you need culture-sensitive sorting, it seems you won't be able to get rid of the slower execution time unless you want to revert to the .NET 3.5 framework.

* * *

### Extra notes

When you don't pass a comparer to `List<T>.Sort()` or `Array.Sort`, it will use the default comparer. Default comparers for .NET strings uses the comparer from the Thread's current culture. From there, it calls some internal functions in the .NET runtime native libraries.

In v2.0-3.5, it calls `COMNlsInfo::Compare` and `COMNlsInfo::CompareFast`. Here's what the call stack (kinda) looks like:

```
String.CompareTo(string)
+--System.Globalization.CompareInfo.Compare(string,string,CompareOptions)
   +--mscorwks.dll!COMNlsInfo::Compare
      +--mscorwks.dll!COMNlsInfo::CompareFast

```

Similar source for these functions is visible in the shared source implementation of the CLI (SSCLI). It's located in `sscli\clr\src\classlibnative\nls\comnlsinfo.cpp` on lines 1034 and 893, respectively.

In v4.0, however, that call tree changed fairly significantly:

```
String.CompareTo(string)
+--System.Globalization.CompareInfo.Compare(string,string,CompareOptions)
   +--clr.dll!COMNlsInfo::InternalCompareString
      +--clr.dll!SortVersioning::SortDllCompareString
         +--nlssorting.dll!_SortCompareString
            +--nlssorting.dll!_AsciiCompareString

```

I wish I could tell you why one is slower than the other, but I have no clue at all and there is no SSCLI for .NET 4.0 to compare against. The major changes to string handling in .NET 4.0 weren't without problems. There have been performance issues [related to strings in .NET 4.0](http://support.microsoft.com/kb/2467309), however they don't really apply here.

* * *

¹[All tests were run in a virtual machine. Win 2008R2 x64 w/ 4GB RAM and a virtual quad-core processor. Host machine is Win7 x64 w/ 24GB RAM and a Xeon W3540 (2.93ghz) quad-core (8 Logical processors). Results are an average of 5 runs with the best and worst times removed.]

# android - 在 achart 引擎 android 中禁用平移

> ID：12156631
> 
> 赞同：2
> 
> 时间：2012-08-28T09:43:15.083
> 
> 标签：android, achartengine

我正在使用 achartengine 在 Adnroid 应用程序上绘制图表，所以当我调用方法“getBarChartView”来创建视图并将其添加到 RelativeLayout 时。

在设置中我添加了这个

```
public GraphicalView createChartView() {

    XYMultipleSeriesRenderer renderer = buildBarRenderer(mColorBar);
        renderer.setOrientation(mOrientation);

        // settings the chart
        setChartSetting(renderer, mChartTitle, mXAxisTitle, mYAxisTitle,
                mXmin, mXmax, mYmin, mYmax, mAxesColor, mLabelColor,
                mGridColor, IChartInterface.ALIGN_CENTER,
                IChartInterface.ALIGN_RIGHT, mTopMargin, mLeftMargin,
                mBottomMargin, mRightMargin);

   // disable the pan
        renderer.setPanEnabled(false, false);
        renderer.setZoomEnabled(false);

        renderer.setShowGridX(isShowGridX);
        renderer.setShowGridY(isShowGridY);

        renderer.setZoomRate(mZoomRate);
        renderer.setBarSpacing(mBarSpacing);
    }

    return ChartFactory.getBarChartView(mContext,
                buildBarDataset(convertToString(mTitles), mValues),
                renderer, Type.STACKED);

} 
```

但它不起作用，我仍然可以用两根手指平移它。所以图表的形状变成了意想不到的形状。谁能告诉我为什么以及如何禁用视图上的平移？

感谢克拉克的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:07:41.367

确保您使用正确的`setZoomEnabled`方法。对于像, ,... 这样的`XYChart`图表，它是：`BarChart``LineChart`

```
renderer.setZoomEnabled(false, false); 
```

# javascript - 在 javascript 中正确创建具有函数的 object_helper

> ID：12156634
> 
> 赞同：2
> 
> 时间：2012-08-28T09:43:26.533
> 
> 标签：javascript, jquery, function, object

我打算在我的 js 中创建一个像这样的对象助手：

```
var person_helper = {
   isAlive : function(person) {
      ...
   },
   isHisNameIs : function(person,name) {
      ...
   },
   isSeniorCitizen : function(person) {

   }
} 
```

这样我就这样调用助手：

```
person_helper.isAlive(person_object); 
person_helper.isHisNameIs(person_object,"Dan"); 
person_helper.isSeniorCitizen(person_object); 
```

现在，我的问题是：由于我在**人员助手中使用****人员**对象，并且我可能总是会一遍又一遍地使用同一个对象 -**有没有办法以我可以这样使用它的方式编写助手？ ：**

 ****```
person_helper(person_object).isAlive();
person_helper(person_object).isHisNameIs("Dan");
person_helper(person_object).isSeniorCitizen(); 
```

1.  这样写有什么逻辑吗？（主要是为了避免在定义函数时每次都传递“person”对象）
2.  我该如何编写它才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:00:22.613

您必须在助手中添加一个函数并使用父函数的变量。

```
var person_helper = function(person) {
    var parent = this;
    this.name = person.name ;
    this.isHisNameIs = function(name) {
        if(name == parent.name)
            console.log('OK');
        else
            console.log('NOP');                    
    }
} 
```

[http://jsfiddle.net/H4RsJ/6/](http://jsfiddle.net/H4RsJ/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:10:17.317

我同意其他人的说法，这些方法应该是`person`对象的一部分。我想这会更有意义。

但是为了它的乐趣，你想要的是与 underscore.js 提供的类似的东西。所有方法都可以以函数方式调用，但您也可以包装对象/数组以面向对象的方式调用这些方法。

为此，您必须将其定义`person_helper`为一个函数，将这些方法分配给它的原型，并将其作为静态方法分配给它自己：

```
var person_helper = (function() {

    var methods = {
       isAlive : function(person) {},
       isHisNameIs : function(person,name) {},
       isSeniorCitizen : function(person) {}
    };

   var Helper = function(person) {
       if(!(this instanceof Helper)) { // so we can call the function with `new`
           return new Helper(person);    
       }
       this.person = person;
   };

   // set up instance and static methods
   for(var m in methods) {
       (function(m) { // instance methods setup
            Helper.prototype[m] = function() {
                 // call the original method, passing `this.person` as
                 // first argument
                 return methods[m].apply(null, [this.person].concat(arguments));
            };
        }(m));

       Helper[m] = methods[m]; // static method
   }

   return Helper;
}()); 
```

然后您可以将其用作：

```
person_helper.isHisName(person, 'Dan');
person_helper(person).isHisName('Dan'); 
```

[**演示**](http://jsfiddle.net/KAUF9/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:58:45.273

在我看来，创建 person_helper 并不是一个好主意。相反，您应该创建一个 Person 原型，阅读[此](http://shifteleven.com/articles/2007/04/29/how-to-create-objects-in-object-oriented-javascript-with-prototype)内容以获取更多信息。

您应该有诸如 Name 和 Alive 之类的成员，并且您可以根据您的要求实现您的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:37:13.320

[使用Object.create()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)继续您的示例：

```
var person_helper = function(newp) {
   return Object.create({
       person : newp,
       isAlive : function() {
           println(this.person + " is alive");
       },
       isHisNameIs : function(name) {
           println(this.person + " name is " + name);
       },
       isSeniorCitizen : function() {
           println(this.person + " is getting on in age..");
       }});
};

var person_object = "some guy";

person_helper(person_object).isAlive(); 
person_helper(person_object).isHisNameIs("Dan"); 
person_helper(person_object).isSeniorCitizen(); 
```

**使用 jrunscript 的jdk8**版本运行它[会](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jrunscript.html)打印：

```
some guy is alive 
some guy name is Dan
some guy is getting on in age.. 
```

您还可以选择将**person_helper()**的结果视为对象以避免重新构造：

```
var personObj = person_helper(person_object);
personObj.isAlive();    
personObj.isHisNameIs("Dan"); 
personObj.isSeniorCitizen(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T09:53:09.980

您会在[W3Schools.com 网站的 Javascript Object Section](http://www.w3schools.com/js/js_objects.asp)上找到非常好的内容。关键是您可以创建一个对象，并将其存储为 person_helper 的属性：

```
var person_helper = {
    ...
    /** which is the same than create a new instance of Person Object. */
    person : function person(firstname,lastname,age,eyecolor) {
        this.person = {};
        this.person.firstname=firstname;
        this.person.lastname=lastname;
        this.person.age=age;
        this.person.eyecolor=eyecolor;
    },
    ...
}; 
```

`person`您将在您的助手属性中检索。缺点是您必须为每个 person_helper 管理人员对象。但这不是一个大问题。****

# java - johannilssen 操作栏出错

> ID：12156639
> 
> 赞同：0
> 
> 时间：2012-08-28T09:44:03.990
> 
> 标签：java, android, android-actionbar

我正在为 2.3.3 开发一个 android 应用程序，但我想使用一个操作栏。环顾四周后，我找到了 johan nilssen ActionBar，所以我尝试了一下。

我遵循了整个[README](https://github.com/johannilsson/android-actionbar/blob/master/README.md)，但我在 2 个未描述的功能上遇到了错误。

```
actionBar.setHomeAction(new IntentAction(this, MainActivity.createIntent(this), R.drawable.ic_title_home_default));
actionBar.addAction(new IntentAction(this, createShareIntent(), R.drawable.ic_title_share_default)); 
```

它给出了这些错误

> 未定义 MainActivity 类型的方法 createIntent(MainActivity)

和

> 未为 MainActivity 类型定义方法 createShareIntent()。

我尝试自己制作这些方法，但没有成功，因为我不知道我必须输入什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:02:54.350

您是否不需要给这个`Activity`新名称并`Manifest`像这样声明它：

```
<activity
    android:name=".HomeActivity"
    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="package name.HomeActivity" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:01:00.647

确保您`MainActivity`扩展了适当的类。（即`Activity`或`ListActivity`）它可能没有继承所需的方法。

我的互联网也有问题，所以我不能自己检查，但这[可能](http://www.vogella.com/articles/AndroidIntent/article.html)是一个很好的资源供您查看。

# dataset - 如何免费获得 WT2g 和 WT10g？

> ID：12156645
> 
> 赞同：0
> 
> 时间：2012-08-28T09:44:27.690
> 
> 标签：dataset, compression, search-engine, inverted-index

因为我想测试一些`inverted index`压缩算法，所以我需要一些标准数据集，比如我上面提到的那些。

这些数据集可以免费下载吗？

据我所知，这些数据集由格拉斯哥大学分发，并且与大多数其他`TREC`测试数据集一样，不是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:28:58.807

看看[这个](http://boston.lti.cs.cmu.edu/callan/Data/)。

向下滚动到`Peer-to-Peer Testbed Definitions`。但我不确定！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:45:34.750

> 注意：这是对 Majid 回答的评论。我把它作为答案，因为它很长。

从这些数据集的名称可以明显看出，大小`WT2g`为 2 GB，大小`WT10g`为 10 GB。但是您[Majid] 向我介绍的数据集非常小。起初，我认为这个数据集是主数据集的一个子集。但是在我下载它并看到它包含之后，我发现它只包含`WT10g`从它们爬取的网站的 URL。此外，对于每个 URL，它都包含从中爬取的页面数。（我的意思是从每个 URL 爬取的页面数，而不是页面本身）
完全似乎我无法免费找到这些数据集，但我认为可以编写一个简单的爬虫并使用您 [Majid] 引入的数据集中存在的 URL 作为爬虫种子。我认为将使用此方法创建的集合将类似于主集合。

# javascript - 从 iframe 获取 javascript var 并放置在父 div 中

> ID：12156656
> 
> 赞同：0
> 
> 时间：2012-08-28T09:45:19.233
> 
> 标签：javascript, jquery, iframe

我得到以下代码：

```
<body>
<div class="header">
  <div class="logo">
     title of page goes here
  </div>
</div>
<iframe src='sameserver.html'>
     <script>
          var pagetitle = 'page title';
     </script>
</iframe>
</body> 
```

现在我怎样才能将 javascript var 放在 logo div 中？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:52:01.300

广告`ID`到您的徽标，等待`iFrame`加载并将变量放入`#logo`

```
<body>
<div class="header">
  <div class="logo" id="logo">
     title of page goes here
  </div>
</div>
<iframe src="sameserver.html" name="myIFrame"></iframe>

<script type="text/javascript">
    window.myIFrame.onload = function (){
        title = window.myIFrame.pagetitle;
        document.getElementById('logo').innerHTML = title;
    }
</script>
</body> 
```

和`sameserver.html`：

```
<script>
    var pagetitle = 'page title';
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:49:11.667

是的，有可能。你可以这样做。

```
parent.document.getElementById('someid').innerHTML=pagetitle; 
```

# xmpp - xmpp 中 pusub 节点的订阅者列表

> ID：12156660
> 
> 赞同：0
> 
> 时间：2012-08-28T09:45:33.023
> 
> 标签：xmpp, strophe

我想要订阅我的 pubsub 节点的所有订阅者（订阅者的 jid）的列表。我正在使用 strophe.js。

我已经完成了。但它无法正常工作：-

```
 $iq({to: service, type: "get"})
        .c('pubsub', {xmlns: NS_PUBSUB})
        .c('subscriptions', {node: node}) 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:41:15.000

根据您的访问模型（请参阅[http://xmpp.org/extensions/xep-0060.html#accessmodels](http://xmpp.org/extensions/xep-0060.html#accessmodels)），您可能必须使用 pubsub 所有者命名空间发送您的 iq。

```
$iq({to: service, type:"get"})
  .c('pubsub', {xmlns: Strophe.NS.PUBSUB_OWNER})
  .c('subscriptions', {node: node}); 
```

# elasticsearch - ElasticSearch 的 Java 客户端是否使用 REST API？

> ID：12156662
> 
> 赞同：1
> 
> 时间：2012-08-28T09:45:36.083
> 
> 标签：elasticsearch, amazon-elastic-beanstalk

ElasticSearch Java 客户端是否在后台使用 ES 集群的 REST API？我想知道是否可以通过需要`.war`s 的 AWS ElasticBeanstalk 部署 ES 集群。有一种将 ES 部署为 a 的方法，`.war`但它仅提供 REST 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:42:54.403

不，ES 的 REST API 在内部使用 Java API（请参见[此处](http://www.elasticsearch.org/guide/reference/java-api/index.html)），因此 Java 客户端不会通过 REST API。

如果您部署的 ES 仅提供 REST API，我猜您甚至必须从 Java 应用程序中使用它。

# html - 如何添加图像，重叠的引导模式？

> ID：12156669
> 
> 赞同：1
> 
> 时间：2012-08-28T09:45:48.297
> 
> 标签：html, css, twitter-bootstrap

我想添加关闭按钮，即重叠的 Bootstrap 模式。

这是我所拥有的： ![](../Images/a4e8a499b026f8a89f42c60d4d5fbd0e.png)

在这里我想做的是：![](../Images/015b363aa58ae2e65b978355b8a9e1db.png)

这是我的 HTML：

```
 <div class="sign_up_header">
 <a class="close" data-dismiss="modal">
     <%= image_tag("/images/close_btn.png") %>
 </a>
 </div> 
```

和 CSS（**尝试添加 z-index 并添加 top:-5px，但它隐藏在 modal 后面**）：

```
 .close{
      display: block;
      position: absolute;
      right:0px;
      top:0px
     }
  #sign_up{
border: 0;
width: 450px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
padding-bottom: 10px;
}

.sign_up_header{
padding-top:10px;
padding-left: 30px;
 } 
```

来自 Bootstrap 模式的 CSS：

```
 .modal {
   position: fixed;
   top: 50%;
   left: 50%;
   z-index: 1050;
   width: 560px;
   margin: -250px 0 0 -280px;
   overflow: auto;
    background-color: #ffffff;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
      border-radius: 6px;
 -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
 -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
      box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-background-clip: padding-box;
 -moz-background-clip: padding-box;
      background-clip: padding-box;
     } 
```

正如我在一些文章中发现的那样，我需要将 position:absolute 添加到模态中，但如果我这样做，它将不会居中。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:04:11.173

应用@James 解决方案后，您必须将`.modal`属性`overflow: auto`更改`overflow: visible`为让按钮离开模式，但这可能会导致意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:56:39.520

要实现关闭按钮的重叠效果，请执行以下操作：

```
.close {
  display: block;
  position: absolute;
  right:-8px;
  top:-8px
 } 
```

**编辑 1**

```
.modal {
   position: fixed;
   top: 50%;
   left: 50%;
   z-index: 1050;
   width: 560px;
   margin: -250px 0 0 -280px;
   overflow: visible;
   background-color: #ffffff;
   -webkit-border-radius: 6px;
   -moz-border-radius: 6px;
   border-radius: 6px;
   -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
   -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
   box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
   -webkit-background-clip: padding-box;
   -moz-background-clip: padding-box;
   background-clip: padding-box;
 } 
```

# django - 带有 mongoengine 文档的 Haystack

> ID：12156672
> 
> 赞同：2
> 
> 时间：2012-08-28T09:46:01.763
> 
> 标签：django, elasticsearch, django-haystack, mongoengine

在一个 Django 项目中，我有一些 mongoengine 的文档要在 elasticsearch 中进行索引。
为此，我一直在寻找简单、有据可查且广泛使用的 django-haystack。
不幸的是，haystack 似乎与 Django 的 ORM 非常相关，而我在使用 Mongoengine（非常接近 Django 的 ORM）时遇到了一些困难。

那么，有没有人玩过 haystack 和 mongoengine ？它是否按预期工作？
如果没有，您是否建议使用 pyes 或 pyelasticsearch ？

感谢您花时间在这个问题上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:26:21.917

我曾经`pyes`从弹性搜索中获取数据。我在我的文档中添加了一个`to_search`方法，并使用 celery 和信号来更新索引。我没有尝试过 pyelasticsearch 但它看起来也不错。

# asp.net-mvc - MVC 注解验证移除 data-val 属性

> ID：12156674
> 
> 赞同：1
> 
> 时间：2012-08-28T09:46:12.153
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, data-annotations

我有模型属性：

```
public int? RegionId { get; set; } 
```

我在视图中创建下拉列表：

```
@Html.DropDownListFor(m => m.RegionId, Model.Regions) 
```

在 html 中：

```
<select data-val="true" data-val-number="The field RegionId must be a number." 
</select> 
```

我需要删除属性 data-val-number，因为在特定情况下它不适合我。

我在 Application_Start 中尝试：

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

另请注意 RegionId 可以为空。

如何在服务器端代码上删除此属性？（不是javascript）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T10:06:36.823

在列表中需要添加这个项目：

> new SelectListItem {Text =SiteResources.NotSelected, Selected = true, **Value = ""** } //(not Value=null)

并且此项对 data-val-number 有效

在 Application_Start 中的另一种方式：

```
ModelValidatorProviders.Providers.Clear();
ModelValidatorProviders.Providers.Add(new DataAnnotationsModelValidatorProvider()); 
```

但显然禁用所有简单类型的隐式 DataAnnotation 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:09:08.693

正如 AlexC 在评论中所说，如果您的模型需要一个整数，那么您需要传递一个数字。**您可以通过删除ValidationFor**帮助程序来避免获取验证消息，但在类型不匹配之前，**Model.IsValid**永远不会为真。如果你想将一个空值绑定到一个控件，你可以这样做，你的**Model.Regions**将是这样的

```
"--Please Select--", Value: null
"US", Value:"1",
"Asia", Value:"2" 
```

# jquery - Jquery UI 对话框打开两次

> ID：12156681
> 
> 赞同：1
> 
> 时间：2012-08-28T09:46:50.067
> 
> 标签：jquery, jquery-ui

我的 UI 对话框有问题。

关闭对话框并重新打开后，对话框会出现两次。一个带有旧表单数据（我不想要）的对话框和一个新的空对话框。

我通过以下方式提交表单后关闭对话框：

```
$('.ui-dialog-titlebar-close').click(); 
```

我也试过这样关闭它：

```
$(this).closest('.ui-dialog-content').dialog('close'); 
```

有没有人经历过类似的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:58:43.917

关闭时确保对话框自毁..

```
$("#dialog").dialog({
  .
  .
  .
  close: function(){
     $(this).dialog("destroy");// I also use .remove() but its redundant
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:53:18.700

试试`.dialog( "destroy" )`方法。 [Dialog.destroy](http://jqueryui.com/demos/dialog/#method-destroy)

```
$(this).closest('.ui-dialog-content').dialog('destroy'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:55:53.960

试着放

```
 event.preventDefault(): 
```

这可以阻止这样的行为

# scala - 使用 orElse 更改元素类型的链接选项

> ID：12156683
> 
> 赞同：1
> 
> 时间：2012-08-28T09:47:01.310
> 
> 标签：scala

我发现使用 orElse 链接 Option 后，元素类型发生了变化，这使我无法按预期使用它。

例如：类型为 .xml 的 xml `NodeSeq`。

```
scala> xml1.headOption map { head => None } orElse xml2.lastOption map {last => Some(last)}
res11: Option[Some[ScalaObject with Equals]] = Some(Some(None)) 
```

在`orElse`,之前`head`是 type `Node`，这是正确的，但`last`也应该是 type `Node`，但编译器认为它是 type `ScalaObject with Equals`，我不能传递`last`给以 a`Node`作为参数的函数。

我可以使用它进行投射`last.asInstanceOf[Node]`，有没有办法避免这种投射并且仍然使用`last`类型`Node`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:11:36.180

试试这个（注意添加的括号）：

```
(xml.headOption map { head => None }) orElse (xml.lastOption map {last => Some(last)}) 
```

问题是`map`被应用 after`orElse`而不是 before `orElse`。换句话说，表达式是这样解析的：

```
((xml.headOption map { head => None }) orElse xml.lastOption) map {last => Some(last)} 
```

由于左侧的表达式`orElse`具有类型`Option[Option[Node]]`但右侧的表达式具有类型`Option[Node]`，因此最低的公共超类型是`Option[ScalaObject with Equals]`。

Scala 的灵活语法有时可以使编码变得非常好，但有时它会导致像这样疯狂的事情。对于像这样的复杂表达式，最好添加括号以使您的意思更明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:04:00.443

一般来说，我认为你需要重新检查你到底在做什么，因为它没有多大意义。`xml.headOption map { head => None }`总是会解决`Some(None)`（在你的情况下），这很少是你想要的。我最好的猜测是你想要这样的东西：

```
xml.headOption.orElse(xml.lastOption) 
```

虽然值得注意的是，如果 headOption 为 None，那么 lastOption 也是。

编辑：正如道文所指出的，在这个例子中很可能推断出正确的上限`Option[Node]`，而掩盖它的问题是错误`orElse`被调用的问题。但是，我仍然认为这里的真正问题是您所做的事情没有多大意义，可能应该重新考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:03:17.973

`map {head => None}`可能不是你想要的。这是一个错字吗？

之后，你有一个`Option[None.type]`，一个不太有趣的类型，它只有两个可能的值，`None`和`Some(None)`。由于您的 xml 不是空的，它恰好是 Some(None)。

`xml.LastOption`有类型`Option[Node]`

因此，当您对`orElse`它们进行比较时，它会寻找最精确的常见超类型（最小上限）`None.type`和`Node`。而且没有兴趣，它恰好是`ScalaObject with Equals`，它也可能是`AnyRef`。

你的决赛`map {last => Some(last)}`也很奇怪。你在那里有什么打算？

# c++ - std::string 的函数指针的 typedef 不起作用

> ID：12156686
> 
> 赞同：0
> 
> 时间：2012-08-28T09:47:04.537
> 
> 标签：c++, function-pointers, boost-bind

我正在尝试定义要在我的调用中使用的特定函数指针类型，`boost::bind`以解决与无法识别的函数重载相关的问题（通过调用`static_cast`）。我正在明确定义 typedef 以解决`std::string::compare`.

当我编写这个函数时，我得到了错误。

```
 typedef int(std::string* resolve_type)(const char*)const; 
```

你知道这个 typedef 有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:58:47.753

我想你想要这个。

```
typedef int(std::string::*resolve_type)(const char*) const; 
```

例子。

```
#include <iostream>
#include <functional>

typedef int(std::string::*resolve_type)(const char*)const;

int main()
{
   resolve_type resolver = &std::string::compare;
   std::string s = "hello";
   std::cout << (s.*resolver)("hello") << std::endl;
} 
```

[http://liveworkspace.org/code/4971076ed8ee19f2fdcabfc04f4883f8](http://liveworkspace.org/code/4971076ed8ee19f2fdcabfc04f4883f8)

和绑定的例子

```
#include <iostream>
#include <functional>

typedef int(std::string::*resolve_type)(const char*)const;

int main()
{
   resolve_type resolver = &std::string::compare;
   std::string s = "hello";
   auto f = std::bind(resolver, s, std::placeholders::_1);
   std::cout << f("hello") << std::endl;
} 
```

[http://liveworkspace.org/code/ff1168db42ff5b45042a0675d59769c0](http://liveworkspace.org/code/ff1168db42ff5b45042a0675d59769c0)

# c# - 如何在 C# 中使用具有相同表的两个数据库？

> ID：12156687
> 
> 赞同：2
> 
> 时间：2012-08-28T09:47:06.937
> 
> 标签：c#, database, linq-to-sql

我正在编写一个程序，我想拥有 2 个 SQL Server 数据库。一个在客户端，一个在服务器上。我想检查我的程序中的互联网连接，如果用户连接到互联网，则使用服务器数据库，如果它离线，则使用客户端数据库，然后当用户连接到互联网时，服务器数据库会自行更新客户端数据库。

由于两个数据库完全相同并且具有相同的表，我该怎么做？我的意思是连接字符串和 dbml 文件内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:51:01.403

既然你提到了 dbml，我就假设 LINQ2SQL。

我建议您添加 2 个连接字符串，一个用于客户端，一个用于服务器。

然后使用接受连接字符串名称的`DataContext()` [构造函数](http://msdn.microsoft.com/en-us/library/bb350721%28v=vs.100%29.aspx)来确定上下文指向哪个数据库。例如[这里](https://stackoverflow.com/questions/1019434/how-can-i-make-linq-to-sql-use-a-connection-string-which-is-being-modified-at-ru)

**编辑**

我会建议一个辅助方法/工厂是这样的：

```
public static MyDataClassesContext GetDataContext(bool isInternetAvailable)
{
  if (isInternetAvailable)
  {
    return new MyDataClassesContext("ServerConnStringName");
  }
  else
  {
    return new MyDataClassesContext("LocalConnStringName");
  }
} 
```

在您的代码中使用 DataContexts：

```
 // Whatever your mechanism is for determining internet availability 
    // (Note that you probably want to cache this bool lol)
    bool isInternetAvailable = GetPingToServer() < 10000 ? true : false;
    using (var dc = GetDataContext(isInternetAvailable))
    {
        ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:54:44.580

您应该查看[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)。它自己说：

> 一个全面的同步平台，支持任何数据类型、任何数据存储、任何传输协议和任何网络拓扑，支持应用程序、服务和设备的协作和离线访问。

它已经准备好涵盖您的场景。

# python - 寻路中的无限循环

> ID：12156691
> 
> 赞同：0
> 
> 时间：2012-08-28T09:47:13.213
> 
> 标签：python, infinite-loop

我想使用 OpenGL 在 Python中模拟[体心立方晶体结构。](http://en.wikipedia.org/wiki/Cubic_crystal_system)我已经编写了代码来获取`next_nodes`，如果节点满足边界则打印，否则递归查找下一个节点返回。

但是代码有一些问题，它无限运行。谁能帮我解决这个问题。在下面发布相关代码（删除了所有 OpenGL 调用）。

```
def get_node(x,y,z,side):
    return [x+side,y,z],[x,y+side,z],[x,y,z+side],[x-side,y,z],[x,y-side,z],[x,y,z-side]

def goto_next_nodes(x,y,z,cube_side,next_nodes,boundary_x,boundary_y,boundary_z):
    for node in next_nodes:
        if 0<=node[0]<=boundary_x and 0<=node[1]<=boundary_y and 0<=node[2]<=boundary_z:
             print node
             x,y,z=node[0],node[1],node[2]
             next_nodes=get_node(x,y,z,cube_side)
             goto_next_nodes(x,y,z,cube_side,next_nodes,boundary_x,boundary_y,boundary_z)
        else:
            return

def display_fcc(cube_side,boundary_x,boundary_y,boundary_z):
     x=y=z=0
     next_nodes=get_node(x,y,z,cube_side)
     goto_next_nodes(x,y,z,cube_side,next_nodes,boundary_x,boundary_y,boundary_z)

display_fcc(5,10,10,10) 
```

递归始于`display_fcc`函数，`goto_next_node`是递归函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:29:14.017

您的`next_node`函数返回距离 一步之遥的所有节点，`(x,y,z)`然后`goto_next_node`您开始访问边界内的所有节点。但是当您访问一个节点时，*您从不检查您之前是否访问过该节点*。所以你的算法卡在一个角落里，一圈又一圈，一次又一次地访问一个节点循环。如果您查看输出，您可以清楚地看到这一点：

```
>>> display_fcc(5,10,10,10)
[5, 0, 0]
[10, 0, 0]
[5, 5, 0]
[10, 5, 0]
[5, 10, 0]
[10, 10, 0]
[5, 5, 5]
[10, 5, 5]
[5, 10, 5]
[10, 10, 5]
[5, 5, 10]
[10, 5, 10]
[5, 10, 10]
[10, 10, 10]
[0, 5, 5]  
[5, 5, 5]      # Oops: we've been here before!
[10, 5, 5]
[5, 10, 5]
[10, 10, 5]
[5, 5, 10]
[10, 5, 10]
[5, 10, 10]
[10, 10, 10]
[0, 5, 5]
[5, 5, 5]      # And around we go again.
... 
```

所以你需要跟踪你去过的地方，并确保你不会再去那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:33:27.817

你可以记住你看到的节点，不要第二次去那里，就像这段代码一样。但我认为你还需要解决一件事，

```
else:
    return 
```

我认为这是不正确的，因为您的 for 将不再迭代。

```
def get_node(x, y, z, side):
    return [(x+side,y,z), (x,y+side,z), (x,y,z+side),
            (x-side,y,z), (x,y-side,z), (x,y,z-side)]

seen_nodes = set()

def goto_next_nodes(x, y, z, cube_side, next_nodes, boundary_x, boundary_y, boundary_z):
    for node in next_nodes:
        if node not in seen_nodes:
            seen_nodes.add(node)
            if 0<=node[0]<=boundary_x and 0<=node[1]<=boundary_y and 0<=node[2]<=boundary_z:
                 print node
                 x,y,z=node[0],node[1],node[2]
                 next_nodes=get_node(x,y,z,cube_side)
                 goto_next_nodes(x,y,z,cube_side,next_nodes,boundary_x,boundary_y,boundary_z)
    return

def display_fcc(cube_side,boundary_x,boundary_y,boundary_z):
     x=y=z=0
     next_nodes=get_node(x,y,z,cube_side)
     goto_next_nodes(x,y,z,cube_side,next_nodes,boundary_x,boundary_y,boundary_z)

display_fcc(5,10,10,10) 
```

# android - android：带有意大利日期的日期选择器

> ID：12156692
> 
> 赞同：0
> 
> 时间：2012-08-28T09:47:16.890
> 
> 标签：android, datepicker

我有一个这样的“正常” `DatePicker`：

```
// funzioni del datepicker
protected DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
    }
};
protected Dialog onCreateDialog(int id) {
    return new DatePickerDialog(this.getParent(),mDateSetListener,mYear, mMonth, mDay);
} 
```

我打电话`showDialog(0);`来揭露这一点。

它可以工作，但日期是`yyyy-mm-dd`格式。我需要改变它的`dd-mm-yyyy`格式。另外，我可以添加小时和分钟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:05:22.203

// 将日期格式从 (YYYY_MM-DD) 转换为 (DD-MM-YYYY)

```
private String convertDate(String cdate)
{
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
SimpleDateFormat postFormater = new SimpleDateFormat("dd-MM-yyyy");
Date convertedDate;    
convertedDate = dateFormat.parse(cdate);
cdate = postFormater.format(convertedDate);
return cdate;
} 
```

# iphone - 是否可以在情节提要的 UIViewController 中显示带有 XIB 的 UIView？

> ID：12156693
> 
> 赞同：1
> 
> 时间：2012-08-28T09:47:20.827
> 
> 标签：iphone, uiview, uiviewcontroller, uiscrollview, storyboard

我没有准确地问我的问题，因为它是故事板，我不知道如何问我的问题。

我有一个 UIViewController，在其中单击按钮时我想显示一些 UIView、ScrollView。在这里，我没有在我的父 ViewController 中添加 UIView，因为我可能有更多的 View，我不想在同一个 ViewController 中编写整个东西并使它变得复杂，因为我想制作单独的类。

为此，我想创建 UIView 和 ScrollView 的子类，然后单击按钮，我只需将它们添加为`subview`. 使用故事板，我不知道如何获取 UIView 或 ScrollView 的 XIB。

我需要为每个 UIView 或 scrollview 使用单独的 ViewController 吗？有了它，我想管理可以轻松显示应用程序前进方向的图形。

或者任何其他方式来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:23:01.500

完成在单个视图中显示多个视图作为容器的要求。我创建了不同的 ViewControllers 并习惯于“自定义”来绑定它们。

之后，我创建了一个继承“UIStoryboardSegue”类的类。我准备方法的地方

```
- (void)perform {

    UIViewController *src = (UIViewController *) [self sourceViewController];
    UIViewController *dest = (UIViewController *) [self destinationViewController];

   if([src isKindOfClass:[VC class]])
    {
        dest.view.frame = CGRectMake(0, 0, 485.0f, 582.0f);
        [src.view addSubview:dest.view];
    }

    [src addChildViewController:dest];

} 
```

这会将 viewcontroller 的视图作为子视图添加到 mainVC 以及不同的类文件，这样代码就不会混乱。

希望这有助于...

# javascript - css定位难度

> ID：12156699
> 
> 赞同：0
> 
> 时间：2012-08-28T09:47:45.797
> 
> 标签：javascript, jquery, html, css, media-queries

请原谅我问的这么简单，我的用户名说明了一切。我在我的网站上定位透明背景时遇到了一点问题：http: [//iamnatesmithen.com/bodyworks/index.php](http://iamnatesmithen.com/bodyworks/index.php)

当我展开屏幕时，我注意到嵌套在轮播中的透明背景

```
.rslides {
    position: relative;
    list-style: none;
    overflow: hidden;
    width: 100%;
    padding: 0;
    margin-top: -151px;
    float: left;
    z-index: -1;
}
.rslides img {
    display: block;
    width: 100%;
    border: 0;
    float: left;
} 
```

由于某种原因，#carousel-bg 在媒体查询调用中移动了 1050 像素到 1600 像素的位置。“如果您将屏幕尺寸扩大到 1200 像素以上，您会注意到 #carousel-bg 向下移动”

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:22:18.060

首先做下面的事情

使用 img 标签删除您添加为背景图像的图像。而不是使用css给出背景

```
background-image: url("images/carousel-bg-1.png"); 
```

# java - Java 中的 Sikuli - 如何捕获屏幕截图/Png？

> ID：12156700
> 
> 赞同：4
> 
> 时间：2012-08-28T09:47:49.967
> 
> 标签：java, automation, sikuli

```
public class MyFirstSikuliTest {    
public static void main(String[] args) {
    App.open("C:\\Program Files\\Mozilla Firefox\\firefox.exe");
    Screen s = new Screen();
    try{    
            s.click("How do I take the screenshot and pass the path of the PNG here?", 0);
            s.wait("How do I take the screenshot and pass the path of the PNG here?");
            s.type(null, "WEBSITE NAME", 0);
    }
    catch(FindFailed e){
            e.printStackTrace();
    }
}
} 
```

如何截取屏幕截图并将PNG的路径传递给click方法和wait方法？请帮助。

PS：我要打开firefox浏览器，点击地址栏，输入网站名称，点击回车。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:54:16.207

如[here](http://sikuli.org/docx/faq/030-java-dev.html#write-code)所述，只需提供与屏幕截图对应的**PNG图像的路径即可。**

可以使用任何屏幕截图实用程序创建该屏幕截图。我曾经使用**sikuli IDE**编写脚本，它提供了一种创建屏幕截图的简单方法。

希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T17:24:55.080

```
public static void takePictureOfError(String Name) throws IOException,
        AWTException {
    new File("Errors").mkdir();
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension screenSize = toolkit.getScreenSize();
    Rectangle screenRect = new Rectangle(screenSize);
    Robot robot = new Robot();
    BufferedImage image = robot.createScreenCapture(screenRect);
    utilsLogger.info(ImageIO.write(image, "png", new File("//"
            + Name)));
} 
```

我希望这个方法有帮助，它对我有用；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T17:04:07.373

![用于处理您的 PS 请求的 Sikuli 代码。](../Images/dfd121a40361fff3091c195e6737828d.png)

几行描述：

第 3 行：我打开一个新选项卡，以便地址栏看起来始终相同（栏中的不同 url 可能注册为不同的图像）。这是 Sikuli 的主要编程要求，忽略了可能会因使用程序而略有变化的显示区域。您还可以减少图像的百分比比较。

第4行：Sikuli找到地址栏图片（图片来自Windows中的FF）。您可以调整 Sikuli 单击的图像上的位置，或确保您的图像足够大，以使中间是单击地址栏位置（即，而不是 Sikuli 单击地球图标）。我在第 1 行中定义的 url 文本被输入到选定的地址栏中。url 中的 \n 是回车键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T06:16:10.530

**[西库里](http://www.sikuli.org/)**

```
public static void screenClipUser() throws IOException{
    org.sikuli.script.Screen screen = Screen.getPrimaryScreen();
    org.sikuli.script.Region region = screen.selectRegion("Select Area to capture as Image");
    ScreenImage clip = region.getLastScreenImage(); // screen.userCapture();
    ScreenImage printScreen = region.getScreen().capture();
    javax.imageio.ImageIO.write(clip.getImage(), "PNG", new File("D:\\SikuliImages\\Clip.png"));
    ImageIO.write(printScreen.getImage(), "PNG", new File("D:\\SikuliImages\\PrintScreen.png"));
    screenCaptureRegion(screen);
}
public static void screenCaptureRegion(Screen screen) throws IOException{
    java.awt.Point point = MouseInfo.getPointerInfo().getLocation();
    System.out.println("Mouse Location Co-Ordinates Previous Selected : " + point);
    //ScreenImage capturedRegion = screen.capture(point.x, point.y, 200, 200);
    ScreenImage capturedRegion = screen.capture(clip.x, clip.y, clip.w, clip.h);
    ImageIO.write(capturedRegion.getImage(), "PNG", new File("D:\\SikuliImages\\CapturedRegion.png"));
} 
```

**[西库利克斯](http://www.sikulix.com/quickstart.html)**

```
public static void screenClipOneNote(){
    org.sikuli.script.IScreen scr = null;
    org.sikuli.script.EventObserver ob = null;
    final OverlayCapturePrompt oc = new org.sikuli.script.OverlayCapturePrompt(scr, ob);
        oc.prompt("Select Area to capture as Image");
        oc.addObserver(new org.sikuli.script.EventObserver() { // Inner calss
            @Override
            public void update(org.sikuli.script.EventSubject arg0) {
                org.sikuli.script.ScreenImage capturedImg = oc.getSelection(); // To use oc object make as final.
                try { 
                    ImageIO.write(capturedImg.getImage(), "PNG", new File("D:\\SikuliImages\\ScreenClip.png"));
                } catch (Exception e) {     e.printStackTrace();        }
                }
    });
} 
```

# ruby-on-rails - 解决自动更新和手动覆盖之间的冲突

> ID：12156701
> 
> 赞同：2
> 
> 时间：2012-08-28T09:47:55.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是一个有点复杂、抽象的问题，如果不够具体，请原谅我。

我已经多次遇到特定类型的问题：一方面，数据源用于定期以自动化方式更新某个数据结构，但另一方面，利益相关者希望能够手动覆盖自动输入。

**例子：**

您有一个产品列表，这些产品由一些使用外部数据源（产品数据库等）的自动化脚本保持最新（标题、描述等）。

假设在您的数据源中有一个烤面包机“Freshtoast XYZ 300”，如果它的名称更改为“FreshToast！XYZ-300”，您希望将该更新传播到您自己的（不同结构的）产品模型中。

同时，如果一位同事不喜欢“Freshtoast XYZ 300”这个名称并想将其更改为“Freshtoast 的 Toaster XYZ 300”（手动），您不想自动覆盖该更改（他会生气），但您也不想简单地忽略更新的名称，因为如果同事知道更改，他会将名称调整为“FreshToast 的 Toaster XYZ-300！”。

* * *

“考虑”更新数据源的最佳方法是什么——即使是被覆盖的数据——同时仍然允许手动覆盖？

PS：我主要使用Ruby / Rails，但我想这个问题很笼统。此外，需要明确的是，自动更新是规则，而手动覆盖是这种情况下的例外。因此，假设每天更新 200,000 个产品，其中只有 20 个具有手动覆盖的标题。因此，例如，必须批准每一个更新不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:57:35.937

Here goes nothing...

Hands off approach: Add a string column to products table that contains a serialized list of user-touched columns. Anytime a user touches a column in the products table, put it in the serialized list. When the automatic updater hits that record it checks the list for columns it should ignore.

Hand-wringing micro-manager approach: Use a versioning library (e.g. vestal_versions gem) and add a user_id column to the products table. Anytime a user-touched record is automatically updated, send them a notification and allow them to view a before/after which they can approve or reject.

# c# - Visual Studio 2010 中 C# 颜色的颜色下划线

> ID：12156703
> 
> 赞同：3
> 
> 时间：2012-08-28T09:47:59.323
> 
> 标签：c#, visual-studio-2010, intellisense

我最近重新安装了 Windows 7 和 Visual Studio 2010 + Resharper。重新安装后，一些颜色下划线停止工作。它用于在下方创建一条蓝线，在下方创建一条`Colors.Blue`绿线`Colors.Green`。IntelliSense 在列出颜色时也有彩色方块。

这是缺少着色的代码示例：

```
textBox.Foreground = new SolidColorBrush(Colors.Red); 
```

如何让下划线颜色和 IntelliSense 颜色再次起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:57:10.830

此功能的 ReSharper 文档位于：http: [//www.jetbrains.com/resharper/webhelp/Coding_Assistance__Color_Assistance.html](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Color_Assistance.html)

正如那里所说，设置控制在：

> 突出颜色用法
> 
> 1.  在主菜单上，选择 ReSharper | 选项。
> 2.  选项对话框打开。单击对话框左侧窗格中的设置。
> 3.  选中“设置”窗格上的“突出显示颜色用法”复选框。
> 4.  单击保存或保存到以应用更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:02:05.357

我认为您安装了[VSCommands 2010](http://vscommands.squaredinfinity.com/Features2010#ColorsHighlighting)（注意：它可以在更多地方工作，而不仅仅是 css）：

![在此处输入图像描述](../Images/d133fbe58606ef0ad11a7c7c6ce4f48f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:53:25.660

我会说你正在寻找[http://visualstudiogallery.msdn.microsoft.com/7dbae8b3-5812-490e-913e-7bfe17f47f1d/?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/7dbae8b3-5812-490e-913e-7bfe17f47f1d/?SRC=VSIDE)

我不知道该功能与 resharper 有什么关系

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-28T09:58:09.157

```
 textBox.ForeColor=System.Drawing.Color.Red; 
```

用这个我认为这是工作

# ios - 如何使用图形 api 或 fql 从一个提要的评论中有效地获取所有 user_likes

> ID：12156708
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:14.100
> 
> 标签：ios, facebook-graph-api, facebook-fql

当我收到一个提要和他的所有评论时，我会查询每个评论 ID：170169929672639_320612368034130_1646407?fields=user_likes，以了解当前用户是否喜欢该评论。

有没有办法在一个请求（批量请求/多查询 fql/其他）中使用 user_like 字段获取所有提要\评论（不是全部，而是下一组评论）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:11:37.810

Graph API 的字段扩展更新将让您获得对提要的所有评论的所有喜欢 - USER_ID?fields=name,feed.fields(comments.fields(likes))。
链接 - [https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

# xamarin.ios - Monotouch 中的静态和内存管理

> ID：12156709
> 
> 赞同：1
> 
> 时间：2012-08-28T09:48:17.000
> 
> 标签：xamarin.ios

我们知道静态与单例的争论，所以这个问题与静态关键字的合法性无关。

当您有一个静态类时，Monotouch 如何处理该类的内存。收到内存警告时是否删除其成员？是否有关于在 Monotouch 中使用静态类的指南？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:14:30.977

静态类和成员将在应用程序的整个生命周期中存在。

一般来说，我不会担心静态类。最需要担心的是确保您正确清理`ViewDidUnload`所有控制器中的内容。

在这里你应该：

*   Dispose 并将任何 outlet 设置为 null （`ReleaseDesignerOutlets`将在 MonoTouch 的更高版本中执行此操作）您必须自己为从代码创建的任何视图执行此操作
*   对创建的 UIImage、UIFont 等的任何实例执行相同的操作`ViewDidLoad`
*   `ViewDidUnload`应该是镜像`ViewDidLoad`

`ViewDidUnload`在当前不在屏幕上的控制器的低内存条件下调用，例如在堆栈中的控制器`UINavigationControllers`等。

此外，您可能希望从`UINotificationCenter`缓存 UIImage、UIFont 等的任何帮助程序类中挂钩低内存通知。

释放视图和图像将释放更多内存，而静态类正在使用多少内存。

# c++ - 在以下程序中创建的地图初始化临时变量在哪里

> ID：12156710
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:22.030
> 
> 标签：c++, stl, stack, temp

在下面的代码片段中。静态成员变量映射使用其默认构造函数进行初始化。

```
#include <iostream>
#include <map>
using namespace std;

class A
{
 static map<int, int> m_map; //static member variable

 public:
 void PrintSize()
 {
     //accessing it
     //so that the map gets into the executable
     cout < m_map.size() << endl;
 }
};

// Initializing the static map member variable
map<int, int> A::m_map = map<int, int>();

int main()
{
     A a;
     cout << sizeof(a) << endl;
     a.PrintSize();

     return 0;
} 
```

程序运行良好。我的问题是，为初始化存储的静态地图而形成的临时变量在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:57:13.387

编译器想把它放在哪里，只要它在完整表达式的末尾被破坏。通常，它会在编译器生成的初始化函数的堆栈上，该函数在之前调用 `main`。（实际上，在这种特殊情况下，编译器通常会优化临时离开，所以它不会在任何地方。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T06:11:43.903

Although, It has been aptly answered by "James", I just want to show you how shall how that shall happen in case of g++

here is some analogous code for the purpose of answer:

```
[Fooo@EXP]$ cat TestStatic.cpp
#include<iostream>
#include<map>
using namespace std;
class DummyStatic
{
#ifdef TEST
        static map<int,int> mymap;
#else
        map<int,int> mymap;
#endif
};
#ifdef TEST
        map<int,int> DummyStatic::mymap = map<int,int>();
#else
        //Do Nothing
#endif
int main(){
        DummyStatic obj;
} 
```

now when we compile with 'TEST' undefine & see the size of the 'exe' this is what we get

```
[Fooo@EXP]$ g++ -o TestStatic TestStatic.cpp
[Fooo@EXP]$ size TestStatic
   text    data     bss     dec     hex filename
   2724     300      12    3036     bdc TestStatic 
```

Now we do it with 'TEST' Define ...

```
[Fooo@EXP]$ g++ -o TestStatic TestStatic.cpp -D TEST
[Fooo@EXP]$ size TestStatic
   text    data     bss     dec     hex filename
   2616     300      36    2952     b88 TestStatic 
```

Observe the difference in BSS

hope this answers your question.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T09:59:59.467

我假设你问的是`map<int, int>()`临时的。

与初始化局部变量的情况没有根本区别

```
int main()
{
    map<int, int> a_map = map<int, int>();
...
} 
```

临时是在`main`函数堆栈上创建的。

当创建需要非平凡初始化的静态对象时，编译器会生成一个在`main`. 临时将在该函数的堆栈上创建（如果没有优化）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:55:22.167

如果我没听错，那么您是在询问静态变量的存储方式。静态变量由类的所有实例共享，但它*不*存储在类“中”，*也不*是类的“部分”。实际上，静态变量的分配方式并没有在标准中明确说明，因此只要它们的行为符合标准，它们就可以以不同的方式实现（比如在没有对象的情况下可用）。

静态类成员的行为非常接近全局变量的行为。您可能会*认为*它（*作为一种抽象*，我并不打算让它成为它真正工作的方式！）好像某处有一个全局变量，并且每个类成员都有一个指向该全局变量的指针。

考虑在 SO 上阅读[这个](https://stackoverflow.com/questions/4842056/do-static-members-of-a-class-occupy-memory-if-no-object-of-that-class-is-created)和[这个问题。](https://stackoverflow.com/questions/5359930/memory-allocation-of-static-members-in-a-class)

# jquery - jquery验证中的额外参数

> ID：12156713
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:30.687
> 
> 标签：jquery, validation, jquery-validate

我正在以某种复杂的形式使用 jquery 验证。通过将类分配给表单字段，在代码中添加了验证规则，但我似乎无法使用额外的参数使其工作。恐怕我对 jQuery 文档不太走运。

下面是一个例子，说明什么对我有用，什么没用，这个例子显然不是很有用。

* * *

**工作**（显示除 之外的任何错误`a`）

（伪代码）

```
$fieldXclasses = "myrule"; 
```

生成的 HTML

```
<input id="x" name="x" value="fromdatabase" class="myrule error" type="text"> 
```

js方法：

```
jQuery.validator.addMethod("myrule", function(value, element) { 
    return this.optional(element) || /^a$/.test(value);
}, "Please enter 'a'"); 
```

它具有“错误”，因为“fromdatabase”显然不是额外的类`a`，因此它使“myrule”功能失败。当我`a`在该字段中键入时，它会`class="docnmr valid"`按预期更改。我的结论是我的验证设置适用于简单的情况，所以我不需要在加载验证插件时寻找错误。

* * *

**不工作：**

（伪代码）

```
$fieldXclasses = "myrule:1"; 
```

生成的 HTML

```
<input id="x" name="x" value="fromdatabase" class="myrule:1 valid" type="text"> 
```

js方法：

```
jQuery.validator.addMethod("myrule", function(value, element,param) { 
    return this.optional(element) || /^a$/.test(value);
}, "Please enter 'a'"); 
```

现在初始状态从一开始就是错误的：它应该是错误而不是有效，因为它不符合要求。我假设该类没有被解析为使用as 参数`myrule:1`调用该`myrule`函数的东西。`1`但这是我认为添加参数的方法，尽管我在 jquery-documentation 中找不到正确的方法。

**谁能启发我如何添加额外的参数？**

*对于背景：最终目标是使用另一个字段值作为参数，因为它们相互依赖。另一种选择肯定是忘记参数和`this`规则中的对象以找到正确的字段。不确定这是否可行。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:15:50.787

您有两个选择，都不涉及使用该`class`属性。您可以像`myrule="1"`在输入中一样指定一个属性和值，这将满足您的要求：

```
<input id="x" name="x" value="fromdatabase" myrule="1" type="text"> 
```

或者，在您的验证调用中，您可以指定如下规则：

```
$('form').validate({
 ...
 rules: {
    ...
    x: {
       myrule: 1
    },
    ...
 }
}); 
```

有关第一种方法的简单示例，请参见此处：http: [//jsfiddle.net/ryleyb/2E6k9/](http://jsfiddle.net/ryleyb/2E6k9/)

# wordpress - Wordpress 循环计数

> ID：12156714
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:34.767
> 
> 标签：wordpress, loops, counter

我已经创建了一个简单的 Wordpress 循环，但现在它应该循环有点不同，我不知道如何开始，甚至不知道从哪里开始。我在 DIV class="item-row-wrap" 里面有我的循环，它通常通过 DIV class="vinyl-wrap" 循环。

我的问题：我希望它循环三次，然后创建一个新的 DIV class="item-row-wrap" 并再次开始循环 DIV class="vinyl-wrap" 三次......然后继续

```
Here is the code:
<code>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<?php if(get_field('artist-repeater')): while(has_sub_field('artist-repeater')): ?>

<div class="item-row-wrap"> <!--START of item-row-wrap-->

    <div class="vinyl-wrap"> <!--START of vinyl-wrap-->
        <?php if(get_sub_field('play-repeater-songlink')): ?>
            <a class="play" href='<?php the_sub_field('play-repeater-songlink'); ?>' target="_blank"></a>
        <?php endif; ?>
        <?php if(get_sub_field('moreinfo-repeater-song')): ?>
            <a class="more-info" href='<?php the_sub_field('moreinfo-repeater-song'); ?>' target="_blank"></a>
        <?php endif; ?>
        <div class="vinyl-cover">
            <div class="vinyl-cover-plastik"></div>
             <?php if(get_sub_field('album-repeater-image')): ?>
             <?php $image = wp_get_attachment_image_src(get_sub_field('album-repeater-image'), 'thumbnail'); ?>
             <img class="album-cover-art" src="<?php echo $image[0]; ?>" alt="<?php get_the_title(get_field('album-repeater-image')) ?>" />
             <?php endif; ?>
        </div> <!--End of vinyl-cover-->
        <div class="likeit">
            <?php if(function_exists(getILikeThis)) getILikeThis('get'); ?>
        </div>
        <div class="artist-name-wrap">
            <div class="artist-wrap-left"></div>
            <div class="artist-wrap-mid">
                <p><?php the_title(); ?></p>
            </div>
            <div class="artist-wrap-right"></div>
        </div> <!--End of artist-name-wrap-->
        <div style="clear:both;"></div>
        <div class="song-name-wrap">
            <div class="song-wrap-left"></div>
            <div class="song-wrap-mid">
                <?php if(get_sub_field('song-repeater-name')): ?>
                    <p><?php the_sub_field('song-repeater-name'); ?></p>
                <?php endif; ?>
            </div>
            <div class="song-wrap-right"></div>
        </div> <!--end of song-name-wrap-->

    </div> <!--END OF VINYL-WRAP-->

        <?php endwhile; endif; ?>

    <?php endwhile; ?>
    <?php wp_reset_query(); ?>
    <?php else: ?>
        Yht&auml;&auml;n artikkelia ei ole viel&auml; julkaistu.
    <?php endif; ?>

</div> <!--END OF ITEM-ROW-WRAP--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:57:05.583

`$i`在循环之前制作var 。
在循环关闭之前提高值：`$i++` 围绕`<div class="item-row-wrap">`（和关闭`</div>`） 设置模检查

[模数教程](http://www.learnphpin24hours.org/2010/07/14/php-modulo-tutorial/)

不是一个完整的答案，但足以让你开始。

**示例**
下面的示例显示了您应该如何执行此操作

```
<?php
$i = 0;
if (have_posts()) : while (have_posts()) : the_post();
if(get_field('artist-repeater')): while(has_sub_field('artist-repeater')):

    if ($i % 3 == 0) {
        echo '<div class="item-row-wrap"> <!--START of item-row-wrap-->';
    }
    $i++; // up the numer of looped
?>
DO your magic
<?php
    if ($i % 3 == 0) {
        echo '</div> <!--END OF ITEM-ROW-WRAP-->';
    }

endwhile; //end have_posts()
endif; 
```

# .net - Autofac - 如何过滤自动装配的属性

> ID：12156715
> 
> 赞同：1
> 
> 时间：2012-08-28T09:48:34.490
> 
> 标签：.net, properties, filter, autofac, autowired

是否可以配置 Autofac 注册，以便在注册类上使用 AutoWired 属性，但不是全部？

我想指出哪些属性不应该自动装配。

# sql-server - sql脚本语法和语法问题

> ID：12156716
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:41.527
> 
> 标签：sql-server, tsql

有人可以帮忙吗我不知道我做错了什么：

```
IF EXISTS ( SELECT  name
        FROM    sys.tables
        WHERE   name = N'MemberIdsToDelete' ) 
DROP TABLE [MemberIdsToDelete];
GO

SELECT  mm.memberid ,
        mm.aspnetuserid ,
        mm.email ,
        mm.RowNum AS RowNum
INTO    #MemberIdsToDelete
FROM    membership.members AS mm
        LEFT JOIN aspnet_membership AS asp ON mm.aspnetuserid = asp.userid
        LEFT JOIN trade.tradesmen AS tr ON tr.memberid = mm.memberid
WHERE   asp.isapproved = 0
        AND tr.ImportDPN IS NOT NULL
    AND tr.importDPN <> ''
ORDER BY mm.memberid

DECLARE @MaxRownum INT
SET @MaxRownum = ( SELECT   MAX(RowNum)
                   FROM     #MemberIdsToDelete
                 )

DECLARE @Iter INT
SET @Iter = ( SELECT    MIN(RowNum)
              FROM      #MemberIdsToDelete
            )

DECLARE @MemberId INT
DECLARE @TrademId INT
DECLARE @UId UNIQUEIDENTIFIER
DECLARE @Successful INT
DECLARE @OutputMessage VARCHAR(200)
DECLARE @Email VARCHAR(100)
DECLARE @Username VARCHAR(100)

SELECT  @MemberId = memberId ,
        @UId = AspNetUserId
FROM    MemberIdsToDelete
SELECT  @TrademId = TradesManId
FROM    trade.TradesMen
WHERE   memberId = @MemberId;

WHILE @Iter <= @MaxRownum 
  BEGIN
    SELECT  *
    FROM    #MemberIdsToDelete
    WHERE   RowNum = @Iter
  --more code here
    SET @Iter = @Iter + 1
  END 
```

我只想检查我的表 MemberIdsToDelete 是否存在，如果存在则删除它，使用从 select 循环中通过 MemberIdsToDelete 表设置的结果创建 MemberIdsToDelete 并执行操作

我收到 RowNum 不存在的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:58:27.113

该表中没有 RowNum 列。

尝试：

select mm.memberid, mm.aspnetuserid, mm.email, row_number() over (order by (select 1)) as RowNum ....

这应该可以解决您的问题，但我实际上并不推荐这种循环删除的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:04:09.083

首先，要检查表是否存在然后相应地删除，您需要使用类似的东西

```
IF EXISTS (SELECT name 
           FROM sys.tables 
           WHERE name = N'MemberIdsToDelete') 
DROP TABLE [MemberIdsToDelete];
GO 
```

至于错误，当您尝试引用它时，您的 RowNum 列不存在。将其包含在 SELECT 语句中

```
select mm.memberid, mm.aspnetuserid, mm.email, mm.RowNum AS RowNum    
into #MemberIdsToDelete     
from membership.members as mm      
    left join aspnet_membership as asp       
        on mm.aspnetuserid=asp.userid       
            left join trade.tradesmen as tr       
                on tr.memberid=mm.memberid       
where asp.isapproved = 0 and tr.ImportDPN IS NOT NULL 
    and tr.importDPN <> '' 
order by mm.memberid;
GO 
```

我希望这有帮助。

*编辑。根据您评论中的其他错误。您现在正试图访问一个不存在的临时表。您必须先填充临时表`#MemberIdsToDelete`，然后再尝试从中读取。无效列错误归结为同样的问题。您正在尝试读取`RowNum`从不存在的临时表中调用的列。*

*编辑2。从`#MemberIdsToDelete`. 您插入的是表而不是临时表。或者，在`select into`上面添加 # （参见上面的代码）。这将根据需要使其成为临时表。*

# html - 多个字符集 — æ ø å

> ID：12156718
> 
> 赞同：2
> 
> 时间：2012-08-28T09:48:48.437
> 
> 标签：html, character-encoding

我来自丹麦，我们有æ ø 和 å。我目前正在使用这个字符集：

```
<meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' /> 
```

但是，正如您在[http://www.bonusrunner.net/betfair.php](http://www.bonusrunner.net/betfair.php)上看到的那样，虽然主区域的文本没有问题，但我的标题、菜单文本等没有正确显示。

一旦我将字符集更改为

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> 
```

它切换，突然我的标题，菜单文本等正确显示。

我可以使用多个字符集，还是有其他解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:50:30.773

不，您不能使用多个字符集。

您需要做的是*将*HTML、PHP 和 JavaScript 文件转换为 UTF-8——它们目前可能都被编码为`ISO-8859-1`(Latin1)。

# javascript - JS跨域子到父窗口通信

> ID：12156719
> 
> 赞同：1
> 
> 时间：2012-08-28T09:48:48.613
> 
> 标签：javascript, facebook, cross-domain

我正在为我的网站创建一个类似于 Facebook Connect 的 API。我有一个有效的弹出窗口，如果它与父窗口位于同一域中，则该窗口可以工作。

不过会发生什么，用户将通过从我的服务器中包含一个 JS 文件来合并我的 API。当他们调用登录窗口时，它将从他们的站点打开并允许用户登录我的域。但是，当用户实际登录时，我需要向父窗口发送事件通知！大多数人可能都知道，这不可能发生，因为这些窗口是跨域的。

我想知道当前还有哪些其他解决方案可用于此任务。我知道如果我在两个站点上将 document.domain 设置为相同（即，将 API 客户端的 document.domain 更改为我的域 - 如果可能的话？）然后 windows 可以通信，但我不确定那会是完全安全。如果域可以通信，那么 API 客户端可能会等待用户打开登录窗口，然后在用户输入登录凭据时读取用户的登录凭据。它是这样工作的吗？还是他们只会在一个方向上交流？

我希望有一个相当简单的解决方案。但如果需要，我愿意尝试更复杂的东西。我知道 Facebook 正在这样做，所以我知道这是可能的。提前谢谢各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:29:40.730

一个快速而肮脏的技巧是通过[属性](http://www.sitepen.com/blog/2008/07/22/windowname-transport/)[发送通知`window.name`](http://www.sitepen.com/blog/2008/07/22/windowname-transport/)。

# c# - 使用 asp.net 的每个浏览器的唯一标识符

> ID：12156721
> 
> 赞同：0
> 
> 时间：2012-08-28T09:48:53.617
> 
> 标签：c#, asp.net, session, browser

我需要使用asp.net从每个浏览器获取唯一标识符。我已经搜索了很多网站，但我没有得到结果。直到现在我发现像Session.SessionId这样的东西，将会话传递给导航页面还没有得到我们所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-08T12:04:02.693

不，我们不能为每个浏览器实例设置唯一标识符...

但是可以通过使用 cookie 来解决要求。

**如果两个站点都在主域的子域上，您可以轻松访问 cookie。**

**如果域不同**

1.  在站点 A 上向站点 C 添加隐藏的 iframe
2.  使用 GUID 在站点 C 上创建 cookie
3.  使用 window.postMessage 将 C 的 cookie 发送给 A
4.  然后站点 A 可以将其发送到服务器（使用 cookie 或其他东西）
5.  对站点 B 执行相同操作
6.  站点 B 也可以使用 iframe 和 window.postMessage 读取 C 的 cookie

我认为这可以解决您的问题，但我仍在寻找如何唯一地识别浏览器

# ios - iPhone - 导航控制器弹出时翻转动画

> ID：12156723
> 
> 赞同：0
> 
> 时间：2012-08-28T09:49:00.060
> 
> 标签：ios, iphone

如何在导航弹出控制器时翻转动画，我们如何实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:52:22.343

以下代码用于弹出视图的翻转动画

```
[UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
[UIView commitAnimations];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelay:0.375];
[self.navigationController popViewControllerAnimated:NO];
[UIView commitAnimations]; 
```

动画块的以下代码

```
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [UIView setAnimationTransition:transition forView:self.navigationController.view cache:NO];
                         }];
[self.navigationController popViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:00:47.730

试试下面的代码，将您的视图推送到下一个视图。

```
-(IBAction)gotonextView:(id)sender
{
NextView *info = [[NextView alloc]initWithNibName:@"NextView" bundle:nil];
        UINavigationController * nvc = [[UINavigationController alloc] initWithRootViewController:info];

        info.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self.navigationController presentModalViewController:nvc animated:YES];

} 
```

自动弹出时您将获得相同的翻转动画。

# iphone - uitableView，带有标签的新视图

> ID：12156725
> 
> 赞同：1
> 
> 时间：2012-08-28T09:49:05.940
> 
> 标签：iphone, objective-c, ios, uitableview, uiviewcontroller

我有一个 UITableView 我也有标签：

![在此处输入图像描述](../Images/06f107cb0ad7d56c159c3ed3770bb5e3.png)

当我单击一个单元格时，它会打开一个新的 viewControler，但我无法设置选项卡，我该怎么做？

提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:20:25.967

您可以使用此代码执行此操作...当您选择单元格时

```
[self.tabBarController setSelectedIndex:index]; 
```

# java - 公钥验证总是返回“签名不匹配”

> ID：12156734
> 
> 赞同：10
> 
> 时间：2012-08-28T09:49:58.233
> 
> 标签：java, security, x509certificate, keystore

我正在尝试验证证书的公钥。已使用以下命令将证书导入密钥库：

```
keytool -importcert -file cert.cer -keystore kstore.jks -alias mycert -storepass changeit 
```

这是我用来验证公钥的 java 代码：

```
File keyStore = new File("kstore.jks");
String keyStorePassword = "changeit";
KeyStore ks = null;
try {
   ks = KeyStore.getInstance("jks");
   ks.load(keyStore.toURI().toURL().openStream(), keyStorePassword.toCharArray());
} catch (Exception e) {
   e.printStackTrace();
} 

try {
   Certificate cert = ks.getCertificate("mycert");
   PublicKey pk = cert.getPublicKey();
   cert.verify(pk);
   //cert.verify(pk, "SunRsaSign");
   System.out.println("Keys verified");
} catch (Exception e) {
   e.printStackTrace();
} 
```

我得到的例外是：

```
java.security.SignatureException: Signature does not match.
   at sun.security.x509.X509CertImpl.verify(X509CertImpl.java:446)
   at sun.security.x509.X509CertImpl.verify(X509CertImpl.java:389)
   at VerifyEBXMLSignature.runIt3(VerifyEBXMLSignature.java:62)
   at VerifyEBXMLSignature.main(VerifyEBXMLSignature.java:41) 
```

证书包含公钥，我无权访问私钥。是否可以根据我导入密钥库的证书验证公钥？公钥来自证书本身，所以它应该是正确的。

我还应该通过证书寻找什么？

我刚刚获得了有关证书的更多信息：它是从私钥导出的。在这个过程中是否有任何可能做错的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T14:40:45.677

您不应该传递从证书中提取的公钥。您应该传递颁发者证书的公钥来验证签名。

因此，正如罗伯特在评论中指出的那样，您的上述代码仅在它是自签名证书（证书由自身签名）时才有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T15:05:29.767

公钥验证方法内部使用`X509`证书实现。

所以它只能验证那些按照`X509`标准生成的证书。

欲了解更多信息，请访问[http://en.wikipedia.org/wiki/X.509](http://en.wikipedia.org/wiki/X.509)

# 3d - 有什么方法可以进行 Java 3D 模型/场景导出？

> ID：12156735
> 
> 赞同：0
> 
> 时间：2012-08-28T09:50:13.727
> 
> 标签：3d, java

在问了我[之前的问题](https://stackoverflow.com/questions/12040296/recommended-format-to-export-3d-models-for-webgl-from-a-java-web-app)后，我评估了从 Java 执行任何3D 场景和模型*导出的可能性。*我首先关心的是找到一种在我们应用程序的某些限制范围内兼容的格式，但经过进一步研究后，似乎很少有导出方法可用于从 Java 执行 3D 导出​​。我能找到的所有示例要么非常陈旧且无人维护，要么导出为与几乎任何东西都不兼容的专有二进制/XML 格式。此外，我发现的任何潜在解决方案都不是作为库分发的，而是更大代码库的一部分。

我正在寻找的是一个库，它允许我在 Java 中进行场景和模型操作，然后允许我将该模型导出为可重用的通用格式（Collada、Wavefront、X3D 甚至）的文件。有没有我忽略的图书馆？我可以使用 JNI 中的本机代码来执行转换吗？还有其他我可以使用的解决方案吗？或者是为此实施我自己的出口商的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:46:14.073

我曾经使用 .obj 从 Java 导出，因为它是基于 ASCII 的格式，大多数编辑器都有支持它的转换工具（即 Maya 和 3D Max）。

我找到了一个 OBJ 导出器库，它是作为 sweethome3d 项目的一部分的 GPL： [http ://sweethome3d.cvs.sourceforge.net/viewvc/sweethome3d/SweetHome3D/src/com/eteks/sweethome3d/j3d/OBJWriter.java?view=标记](http://sweethome3d.cvs.sourceforge.net/viewvc/sweethome3d/SweetHome3D/src/com/eteks/sweethome3d/j3d/OBJWriter.java?view=markup)

# sql - PostgreSQL：将 Select 和 Insert 与返回 ID 结合起来

> ID：12156736
> 
> 赞同：0
> 
> 时间：2012-08-28T09:50:26.043
> 
> 标签：sql, postgresql

`temp123`可以说我有一张桌子

```
Column      |      Type         |       Modifiers
------------+-------------------+------------------------
id          | integer           | not null default nextval('temp12_id_seq'::regclass)
description | character varying | 
```

我想结合返回的 ID

```
INSERT INTO temp123 (description) 
      VALUES ('TESTING') RETURNING ID; 
```

带有“选择”。例如（不起作用）：

```
SELECT 23, x.* 
FROM (INSERT INTO temp123 (description) 
       VALUES ('TESTING') RETURNING id ) AS x; 
```

PostgreSQL v9.0.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:04:25.230

您的示例中不需要 SELECT 部分。使用任何支持 INSERT...RETURNING (>=8.2) 的 PG 版本都将获得所需的结果：

```
insert into temp123(description) values('TESTING') returning 23,*; 
```

# objective-c - 在 MacRuby 中创建 iTunes 播放列表并添加曲目

> ID：12156740
> 
> 赞同：1
> 
> 时间：2012-08-28T09:50:39.163
> 
> 标签：objective-c, itunes, macruby, scripting-bridge

为什么这段代码会导致播放列表为空，我怎样才能将该曲目放入播放列表？

```
#!/usr/local/bin/macruby
framework 'Cocoa'
framework 'ScriptingBridge'

load_bridge_support_file 'iTunes.bridgesupport'
iTunes = SBApplication.applicationWithBundleIdentifier 'com.apple.iTunes'

userPlaylists = iTunes.sources.objectWithName("Library").userPlaylists
userPlaylists << (ITunesUserPlaylist.alloc.initWithProperties Hash[{"name"=>"something unique"}])
playlist = userPlaylists.objectWithName("something unique")
iTunes.add [userPlaylists.objectWithName("Music").tracks[0]], to:playlist 
```

（如果您知道一种避免在使用前插入播放列表的方法，那也会很有帮助。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:20:58.547

尤里卡，找到了（感谢这篇旧帖子 - [http://www.exampler.com/mac-scripting/todays-tunes.rb](http://www.exampler.com/mac-scripting/todays-tunes.rb)）

```
playlist = ITunesUserPlaylist.alloc.initWithProperties ({"name"=>"something unique"})
$iTunes.sources.objectWithName("Library").playlists << playlist
track = $iTunes.sources.objectWithName("Library").userPlaylists.objectWithName("Music").tracks[0]
track.duplicateTo(playlist) 
```

# wpf - 使用 MVVM 的 wpf 工具栏中的按钮和切换按钮

> ID：12156741
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:50:41.037
> 
> 标签：wpf, button, datatemplate, toolbar, togglebutton

我的应用程序内的 ToolbarTray 中有一个 wpf 工具栏，它必须承载按钮和切换按钮。有人可以建议我如何在 MVVM 中实现这种行为吗？下面的代码是我现在拥有的：

```
 <ToolBarTray Margin="5,30,5,30" MinWidth="35" HorizontalAlignment="Center" Orientation="Vertical" Background="Transparent">
            <ToolBar x:Name="ToolBarControl" HorizontalAlignment="Stretch" ItemsSource="{Binding ToolBarItems}" >
                <ToolBar.ItemTemplate>
                    <DataTemplate>
                        <Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" HorizontalAlignment="Stretch" Margin="0,0,0,15"
                        Template="{Binding ToolBarIcon}" 
                        cal:Message.Attach="[Event Click] = [Action Select()]"
                        IsEnabled="True"
                        ToolTip="{Binding Text}"/>
                    </DataTemplate>
                </ToolBar.ItemTemplate>
            </ToolBar>
        </ToolBarTray> 
```

其中 Button 可以是普通 Button 或 ToggleButton。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:11:26.760

在 MVVM 模式中，您的模型类将包含您要绑定并在视图中显示的属性（所有数据对象）。所以 ToolBarItems 集合将成为模型的一部分。

您的视图基本上将包含您编写的上述代码。并且在代码隐藏文件中，将有一个模型类类型的对象作为属性。

您的视图模型可以初始化模型和视图对象并将模型绑定到视图的数据上下文。

# actionscript-3 - AS3 - 使用类属性 example.exampleClass 从库中添加对象

> ID：12156744
> 
> 赞同：0
> 
> 时间：2012-08-28T09:50:59.950
> 
> 标签：actionscript-3, class

我有个问题：

我在 Fla 库中有一个具有 Class 属性的对象，例如：com.tool.zoom 链接到外部 as。

在时间线上我打电话给：

```
mainApp.iniZoom("com.tool.zoom"); 
```

这个 fla 在我调用 iniZoom 函数时加载到另一个 FLA 中。

有可能吗？我收到错误 1007。

我希望你能理解我，我的英语不是很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:23:00.073

据我了解，您正在尝试实例化从 FLA 文件导出的类。您选择该对象，为 Actionscript 执行导出，并将类命名为“com.tool.zoom”，对吗？如果是这样，你应该使用这样的“新”子句：

```
var iniZoom:com.tool.zoom = new com.tool.zoom(); 
```

显然，您需要在编译时提供 AS 文件。

编辑：假设您加载了 SWF，[这里](http://blog.newmovieclip.com/2007/08/23/access-load-library-assets-from-another-swf-in-flash-cs3/)是可能适合您的解决方案。请注意，您必须加载要从 SWF 导出的所有类，以便您的父 SWF 可用。

# c# - 测试按钮是否被点击

> ID：12156748
> 
> 赞同：0
> 
> 时间：2012-08-28T09:51:10.907
> 
> 标签：c#, javascript, .net

我有一个 asp.net 页面，它从记录加载值并将其写入页面上的控件。

有一个指向另一个页面的链接和一个保存按钮。

如果用户单击保存，很好，更改被保存并且他们可以导航到任何地方。

如果他们不单击保存并单击链接，则任何更改都将丢失。

有没有办法在用户加载该页面时检查是否已单击保存？

我正在考虑链接的 OnClick Javascript 函数，例如 - 下面，我不确定如何测试被点击的保存按钮 - 谁能指出我正确的方向？

```
function handleHyperLinkClick(hyperlink) 
{ 
    confirm("You have not clicked save, any changes will be lost - click cancel then save  your changes or ok to continue");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:54:36.260

添加一个 bool 变量，默认为 false，如果单击了按钮，则设置为 true。如果用户离开页面，则检查该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:55:10.500

您可以使用`hidden field`. 当用户点击保存按钮然后设置`hidden field`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:56:39.030

您必须在 javascript 中保留一个临时变量，例如 state；

`

```
var state = 0;

 //your function calls here
function yourFunction()
{
//// your coding
 state =1;
//// your coding
} 
```

` 在这种情况下，您必须在 state=1 时提交值或导航到其他页面，否则您不应该这样做。在单击链接（如果它通过函数导航）或页面的 onBeforeUnload 事件时要检查此标志。

如果您正在寻找其他东西，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:57:39.530

单击按钮时，您可以将一些值附加到变量。然后当用户尝试导航时，检查该变量是否具有该值。如果是，它已被点击，否则不是：

```
button = document.getElementById("button");
button.onclick = function() { clicked = true; }
document.getElementById("link").onclick = function() { if (!clicked) { alert("Sure?"); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T09:58:46.897

假设您正在使用这样的 ASP.NET 服务器按钮：

```
<asp:Button runat="server" id="someButtonId" Click="someClickHandler" Text="Continue" /> 
```

如果我是你，我会使用 jQuery 来动态绑定按钮的点击事件，如下所示：

```
$(document).ready(function() {
   $("input[type=button][id$=someButtonId]").on("click", function(e) {
      if(!confirm("You have not clicked save, any changes will be lost - click cancel then save  your changes or ok to continue"))
      {
          e.preventDefault()
      }
   });
}); 
```

希望这可以帮助。

# java - 如果我有带有包含按钮的自己的单击事件的 LinearLayout，我如何单击按钮

> ID：12156751
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:51:20.263
> 
> 标签：java, android, android-layout

```
 <LinearLayout
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/btn_image" />

    <TextView
        android:layout_width="150dp"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:text="something" />

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout>

btn1 = (LinearLayout) findViewById(R.id.btn1);
btn1.setOnClickListener(this);
btn = (Button) findViewById(R.id.btn);
btn.setOnClickListener(this); 
```

我无法点击按钮。总是称为单击 LinearLayout。

```
@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btn:
// set something parametr
        break;
    case R.id.btn1:
// go to activity
        break;
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:01:10.543

似乎像这样为我工作，

你的xml文件，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

 <LinearLayout
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:layout_width="150dp"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:text="something" />

    <Button
        android:id="@+id/btn"
        android:text="Button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout>

</RelativeLayout> 
```

还有你的活动课，

```
public class MainActivity extends Activity implements OnClickListener{
     LinearLayout  btn1 =null;
     Button     btn =null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
           btn1 = (LinearLayout) findViewById(R.id.btn1);
           btn1.setOnClickListener(this);
           btn = (Button) findViewById(R.id.btn);
           btn.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onClick(View v) {

        if(v==btn)
        {
            Toast.makeText(getApplicationContext(), "btn clicked", Toast.LENGTH_SHORT).show();
        }

        if(v==btn1)
        {
            Toast.makeText(getApplicationContext(), "btn1 clicked", Toast.LENGTH_SHORT).show();
        }
    }

} 
```

![在此处输入图像描述](../Images/8e12b08df05e9f2abb32da61cd866217.png)

![在此处输入图像描述](../Images/3155b5267da45a587e44e0b6113f5e3a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:08:47.783

在标签中放置可点击的 true ..

文件**android:clickable="true"**

```
 <LinearLayout
        android:id="@+id/btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical" android:onClick="" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/actionbar_background" />

        <TextView
            android:layout_width="150dp"
            android:layout_height="fill_parent"
            android:gravity="center_vertical"
            android:text="something" />

        <Button
            android:id="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true" />

    </LinearLayout> 
```

...................................................

```
btn1 = (LinearLayout) findViewById(R.id.btn1);

btn1.setOnClickListener(this);

btn = (Button) findViewById(R.id.btn);

btn.setOnClickListener(this); 
```

...................................................

```
 @Override
   public void onClick(View v) {

      switch (v.getId()) {
      case R.id.btn:
         // set something parametr
       break;
     case R.id.btn1:
         // go to activity
       break;
    }   

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:00:50.630

您仍然可以在 onclick 方法中进行区分：

```
@Override
public void onClick(View v) {

    if (v.getId() == R.id.btn1)
    {
        // Linear was clicked
    }
    else if (v.getId() == R.id.btn){
        // Button was clicked
    }

} 
```

但是您仍然应该从线性中删除按钮

# java - “调用 Landroid/database/sqlite/SQLiteOpenHelper 时堆栈溢出；。 :VLLLI"

> ID：12156756
> 
> 赞同：0
> 
> 时间：2012-08-28T09:51:37.783
> 
> 标签：java, android, sqlite

Android 开发和 Java 的新手，试图将我的查询分成查询/命令文件，这些文件继承自管理 QueryBase.java 文件的数据库。当我运行我的应用程序时，我收到以下错误：

```
08-28 09:31:02.266: I/dalvikvm(536): threadid=1: stack overflow on call to Landroid/database/sqlite/SQLiteOpenHelper;.<init>:VLLLI
08-28 09:31:02.266: I/dalvikvm(536): method requires 32+20+8=60 bytes, fp is 0x432d1318 (24 left)
08-28 09:31:02.266: I/dalvikvm(536): expanding stack end (0x432d1300 to 0x432d1000)
08-28 09:31:02.266: I/dalvikvm(536): Shrank stack (to 0x432d1300, curFrame is 0x432d3eb8)
08-28 09:31:02.266: D/AndroidRuntime(536): Shutting down VM
08-28 09:31:02.266: W/dalvikvm(536): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-28 09:31:02.356: D/dalvikvm(536): GC_FOR_MALLOC freed 4131 objects / 329392 bytes in 47ms
08-28 09:31:02.366: E/AndroidRuntime(536): FATAL EXCEPTION: main
08-28 09:31:02.366: E/AndroidRuntime(536): java.lang.StackOverflowError
08-28 09:31:02.366: E/AndroidRuntime(536): at com.childsoft.icantalk.queries.QueryBase.<init>(QueryBase.java:18) 
```

我以前从未真正遇到过堆栈溢出错误！我不确定如何纠正这个 hrrrm。我有一个单独的 SchemaHelper 生成我的数据库 - 工作正常。我的 QueryBase.java 看起来像这样：

```
public class QueryBase extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "icantalk.db";
private static final int DATABASE_VERSION = 1;

protected SQLiteDatabase sqdb;
protected QueryBase sqh;

public QueryBase(Context context) { 
    super(context, DATABASE_NAME, null, DATABASE_VERSION);  

    this.sqh = new QueryBase(context);
    this.sqdb = sqh.getWritableDatabase();
}

@Override
public void onCreate(SQLiteDatabase db) {           
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}
} 
```

**QueryBase 上的第 18 行是这样的：**

```
super(context, DATABASE_NAME, null, DATABASE_VERSION); 
```

从 QueryBase 继承的示例命令文件如下所示：

```
public class ChildCommands extends QueryBase  {

public ChildCommands(Context context) {
    super(context);     
}

public long addChild(String name)
{
    ContentValues cv = new ContentValues();     
    cv.put(ChildrenTable.NAME, name);       
    SQLiteDatabase sd = super.getWritableDatabase();        
    long result = sd.insert(ChildrenTable.TABLE_NAME, ChildrenTable.NAME, cv);

    return result;
}   
} 
```

对此方法的示例调用如下所示：

```
private ChildCommands command;
.....

this.command = new ChildCommands(this);
command.addChild(childsNameValue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:54:16.523

```
public QueryBase(Context context) { 
    super(context, DATABASE_NAME, null, DATABASE_VERSION);  

    this.sqh = new QueryBase(context);
    this.sqdb = sqh.getWritableDatabase();
} 
```

这导致在创建 QueryBase 的新对象的同时创建 QueryBase 的新对象。这是一个永无止境的电话。

用这个：

```
public QueryBase(Context context) { 
    super(context, DATABASE_NAME, null, DATABASE_VERSION);  

    this.sqh = this;
    this.sqdb = sqh.getWritableDatabase();
} 
```

编辑：`sqh`不需要顺便说一句，因为这个变量包含它所在的相同实例（非静态！）所以`sqh == this`......

# c++ - 如果满足条件，则 C++ 构造

> ID：12156758
> 
> 赞同：5
> 
> 时间：2012-08-28T09:51:45.223
> 
> 标签：c++, design-patterns, constructor

我有一个设计问题，实际上并不复杂，但我想找到一种优雅的方法来解决它。我想到了这个：

问题：我有一个类 A 初始化并保留 B 的集合

B 只是一个接口，必须实现（所以我们有 C、D、E 等类）。

在构造函数 A 中接收一堆数据集，并且必须在给定每个数据集的情况下初始化 B 中的一些（也是相同或不同类的许多不同实例化）。我希望 A 不知道 B 的任何实现。

我有几个可行的解决方案，但我正在考虑一种“构造函数中的委托”。例如：

```
1\. for each dataset, ds
2\.   for each implementation of B, bi
3\.     try to instantiate bi(ds)
4\.       if success (means no exception)
5\.         keep reference 
```

这是因为我用来检查 bi 是否与初始化非常相似的数据和微积分，并且在性能关键的应用程序中，我想避免这样做两次或在集合类中进行。
这会非常好，但显然问题出在第 2 行......
以及对实际上不是异常的事情使用异常的怀疑。（第 4 行）
那么应该是什么模式
- 让我评估数据并构建所有内容。
- 避免创建几个“架构类”我想避免这样一个简单任务的类爆炸（在使用以下设计模式 java 风格原则夸大其词时很典型）。- 尽可能快。
- ...优雅:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:01:56.970

答案是基于我现在的直觉，所以它可能并不完美，但另一方面，大多数设计解决方案都不是。

我只会创建一个额外的类，称之为工厂或类似的东西。然后通过这个类运行所有的结构。它应该能够在运行时（通过在程序开始时运行回调），或者甚至更好地通过可变参数模板特征，使用 B 派生的可能实例进行初始化。

```
template<class ... RegisteredBImplementations>
class CFactory
{
    B* Create (dataset const& d)
    {
        // some magical meta-ifs to create compile time conditions
        // or for (auto& registered_type : registered types), and then choose one
        return new T(d);
    }
} 
```

然后，A 可以使用此类的实例来正确初始化它的指针：

```
for (auto& dataset : datasets)
{
    m_BPtrs.emplace_back( std::unique_ptr<dataset> (m_FactoryInstance.Create(dataset)) );
} 
```

该解决方案的要点是 A 类有效地管理“B”对象，将它们的正确构造留给其他类。它们实际上是分开的，并且添加新`B`实现意味着仅在 中进行更改`CFactory`，而不是在 中进行更改`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:51:50.643

最简单的解决方案是委托给工厂方法。

```
std::unique_ptr<B> build(DataSet const& ds) {
    if (ds.property() == value) {
        return std::unique_ptr<B>(new D(ds));
    }
    return std::unique_ptr<B>(new C(ds));
} 
```

那么`A`只需要依赖于`build`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:01:48.150

您的伪代码提出了一个解决方案：您的使用`bi`只不过是一个工厂函数，它将 a`dataset`作为输入并返回 a`B*`作为输出。所以，你真的只需`bi`要从对象集合中获取`std::function<B* (dataset)>`。

很容易要求这些工厂只是“条件”工厂：有时它们返回有效对象，有时它们不返回，`nullptr`而是返回。这将使您避免异常，并且更忠实于您的使用意图。

# c++ - 发送成员函数的函数指针时编译错误

> ID：12156765
> 
> 赞同：0
> 
> 时间：2012-08-28T09:52:22.823
> 
> 标签：c++, boost

我正在尝试使用 boost scope_guard

我需要将成员函数的函数指针发送到 make_guard 函数

我通过以下方式进行了尝试：

```
class A
{
  HRESULT foo(int x);
  HRESULT foo_1(int x);
}

STDMETHODIMP A::foo(int x)
{....};

STDMETHODIMP A::foo_1(int x)
{

    boost::scope_guard xyz= 
    boost::make_guard(&A::foo, x);
} 
```

但它给出了编译错误：

```
E:\ThirdPartyCore\Boost\1_43_0\winx64\include\boost/multi_index/detail/scope_guard.hpp(103) : error C2064: term does not evaluate to a function taking 1 arguments
        E:\ThirdPartyCore\Boost\1_43_0\winx64\include\boost/multi_index/detail/scope_guard.hpp(103) : while compiling class template member function 'void boost::multi_index::detail::scope_guard_impl1<F,P1>::execute(void)'
        with
        [
            F=HRESULT (__cdecl A::* )(int),
            P1=int
        ]
        see reference to class template instantiation 'boost::multi_index::detail::scope_guard_impl1<F,P1>' being compiled
        with
        [
            F=HRESULT (__cdecl A::* )(int),
            P1=int
        ]

AGPSEngine - 1 error(s), 0 warning(s) 
```

任何人都可以帮我修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:58:16.020

就像错误消息说的那样，`A::foo`不是一个带一个参数的函数；它是一个成员函数。相信你想用`obj_scope_guard`and `make_obj_scope_guard`，传递`this`。

# java - 如何为此文件夹结构创建 build.xml 文件

> ID：12156773
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:52:37.717
> 
> 标签：java, ant, antbuilder

我有，

```
 build/classes - compiled java codes

   libs - some jar files

   src - java codes

   WebContent - all the .jsp files, WEB-INF/lib and META-INF 
```

我创建了一些构建文件，但它们不起作用。如何为此文件夹结构创建 build.xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:57:36.763

[Ant for War 文件](http://www.dzone.com/tutorials/java/ant/ant-sample-build-file-war-1.html)详细示例

src 目录中的所有类都应该被编译并放在一个单独的 build/classes 目录中。创建的war文件将放置在dist目录中。

1.  所以首先我们创建 build/classes 和 dist 目录。init 目标完成这项工作。

2.  下一步是编译 src 目录中的所有类，并将它们放在 build/classes 目录中。首先，您需要将“WebContent/WEB-INF/lib”目录中的所有 lib 文件添加到类路径中。

3.  目标编译使用 javac 任务编译 java 类，它依赖于目标 init，因为只有当您准备好目录时，您才能将类放入其中。我们之前创建的路径将在此处使用元素引用。

4.  现在我们可以使用war任务创建war文件。要创建war 文件，您需要指定web 目录、lib 目录和classes 目录。destfile 属性指定war 文件位置，webxml 属性指定web.xml 文件位置

5.  您可以使用 clean 目标来清理项目。clean 目标删除 build 和 dist 目录。

# php - Doctrine 2 是否需要定义外键？

> ID：12156775
> 
> 赞同：1
> 
> 时间：2012-08-28T09:52:43.417
> 
> 标签：php, doctrine-orm

我有一个关系数据库，但是，没有定义任何外键，而且很多表都没有`InnoDB`，所以无论如何都不能支持外键。

我想开始在这个数据库上试验 Doctrine，但是文档中有很多外键引用，所以我不确定这是否可能。

我对潜入并将表存储引擎更改为`InnoDB`并定义大量外键感到焦虑，因为如果不需要，我不想影响性能。

*   Doctrine 是否需要定义外键来管理实体之间的关联？
*   如果不是必需但可选，如果我没有定义外键，我会牺牲 Doctrine 的哪些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:09:54.973

你没有理由切换到 InnoDB for Doctrine。

1.  不。
2.  我发现 Doctrine 用于更新和生成数据库模式的 CLI 工具通常会尝试使用外键生成 SQL。您可以手动设置数据库，或修改它生成的代码，以避免这种情况。

所以，**不**，这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:57:43.803

如果您为您的实体定义了一些关联映射，它可能会自动按原则转换为外键

[http://docs.doctrine-project.org/en/latest/reference/association-mapping.html](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html)

我你也想要你的数据库中的那些外键你必须使用学说 CLI 来创建你的模式

有关使用学说 cli 的更多信息：http: [//docs.doctrine-project.org/en/latest/reference/tools.html](http://docs.doctrine-project.org/en/latest/reference/tools.html)

# iphone - 无法在 Sqlite 数据库中插入记录

> ID：12156776
> 
> 赞同：1
> 
> 时间：2012-08-28T09:52:48.633
> 
> 标签：iphone, sqlite

我正在使用下面的代码来创建 sqlite DB，但是我无法通过执行查询插入值，谁能告诉我我哪里错了？

```
 - (void)createEditableCopyOfDatabaseIfNeeded {
    // First, test for existence.
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:DATABASE_NAME];
    success = [fileManager fileExistsAtPath:writableDBPath];
    if (success) return;

    // The writable database does not exist, so copy the default to the appropriate location.
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:DATABASE_NAME];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
    if (!success) {
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
} 
```

初始化数据库

```
 - (void)initializeDatabase {    

    // The database is stored in the application bundle. 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:DATABASE_NAME];
        // Open the database. The database was prepared outside the application.
    if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) 
    {      
        //TRUE
    } 
    else 
    {
        // Even though the open failed, call close to properly clean up resources.
        sqlite3_close(database);
        NSAssert1(0, @"Failed to open database with message '%s'.", sqlite3_errmsg(database));
        // Additional error handling, as appropriate...
    }

} 
```

执行 Sql 方法

```
 -(void)ExecuteSQL:(NSString*)SQL
    {

            @synchronized(self)
        {

            sqlite3_stmt *select_statement=nil;

            if (sqlite3_prepare_v2(database, [SQL UTF8String], -1, &select_statement, NULL) != SQLITE_OK) {
                NSString *errString = [NSString stringWithFormat:@"%@", 
                          [NSLocalizedString(@"statementPrepareFailedKey",@"")          
                          stringByReplacingOccurrencesOfString:@"#" withString:[NSString 
                          stringWithCString:sqlite3_errmsg(database) encoding:NSUTF8StringEncoding] ]];
                NSAssert1(0, @"%@", errString);
            }

            //int columncount=sqlite3_column_count(select_statement);

            //NSMutableDictionary* dic;

            if(sqlite3_step(select_statement) == SQLITE_DONE) 
            {   
                NSLog(@"Execute sql");
            }

            sqlite3_finalize(select_statement);
        }

    } 
```

谢谢。

# blackberry - 测量不同网络上互联网流量的最佳方法

> ID：12156778
> 
> 赞同：0
> 
> 时间：2012-08-28T09:52:54.647
> 
> 标签：blackberry, java-me

根据我的研究，我正在 Blackberry SDK 5.0.0 中开发一个应用程序，唯一处理互联网流量的类是`RadioInfo`方法`RadioInfo.getNumberOfPacketsReceived()/Sent()`，但此方法检索所有网络上的总流量，计算移动数据和 WiFi 数据。有没有办法确定设备连接到互联网时使用的是哪个网络？

# objective-c - 如何在iphone中的一个字符串中添加连接多个NSString

> ID：12156780
> 
> 赞同：14
> 
> 时间：2012-08-28T09:52:57.347
> 
> 标签：objective-c, ios, cocoa-touch, nsstring

我有 5 个字符串，我希望它们必须存储在单个 NSString 中，所有值都用`|`符号分开

```
 NSString *first=@"Ali";
   NSString *second=@"Imran";
   NSString *third=@"AliImran";
   NSString *fourth=@"ImranAli";
   NSString *fifth=@"Ali Imran Jamshed"; 
```

我希望将所有这些存储在单个 NSString 中，并且所有值都由给定符号分隔。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-28T09:54:59.330

```
NSArray *myStrings = [[NSArray alloc] initWithObjects:first, second, third, fourth, fifth, nil];
NSString *joinedString = [myStrings componentsJoinedByString:@"|"];
// release myStrings if not using ARC. 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-16T03:24:29.287

```
you can try ....
NSString *joinString=[NSString stringWithFormat:@"%@|%@|%@|%@|%@",youstring1,youstring2,youstring3,youstring4,youstring5]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-02T09:28:31.877

**简短的解决方案：**

```
NSString *str = [@[nstring1, nstring2, nstring3] componentsJoinedByString:@","]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T10:05:23.820

我猜 DrummerB 的建议是最好的方法。您必须将字符串存储在数据结构中。数组或字典。
如果您只想使用字符串，这并非不可能，但这是不明智的。干得好 ：

```
NSString*first=@"Ali";  
first = [first stringByAppendingString:@"|"];
first = [first stringByAppendingString:@"Imran"];
first = [first stringByAppendingString:@"|"];
first = [first stringByAppendingString:@"AliImran"];
first = [first stringByAppendingString:@"|"];
first = [first stringByAppendingString:@"ImranAli"];
first = [first stringByAppendingString:@"|"];
first = [first stringByAppendingString:@"Ali Imran Jamshed"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T09:59:34.597

```
NSArray *stringsArray = [[NSArray alloc] initWithObjects:first, second, third, fourth, fifth, nil];
NSString *combinedString = [stringsArray componentsJoinedByString:@","]; 
```

组合的字符串如下所示`@"Ali,Imran,AliImran,ImranAli,Ali Imran Jamshed"`；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-04T09:28:25.043

为了改进 Nitish 的答案，您可以按照以下步骤减少行数：

```
NSString *first=@"Ali";  
first = [first stringByAppendingString:[@"|" stringByAppendingString:[@"Imran" stringByAppendingString:@"|"]]];
. 
```

# jquery - jQuery UI Accordion - 悬停 - 图标取决于活动/默认状态

> ID：12156784
> 
> 赞同：1
> 
> 时间：2012-08-28T09:53:14.677
> 
> 标签：jquery, jquery-ui, hover, jquery-ui-accordion

如何让 jQuery UI Accordion 根据状态（活动或默认）显示不同的标题图标？

最后我想拆分这个：

> .ui-state-hover

对此：

> .ui-state-default-hover
> 
> .ui-state-active-hover

所以我可以为这四种情况定义不同的背景图像：

> .ui-state-default { background-image: url(images/default.png); }
> 
> .ui-state-active { background-image: url(images/active.png); }
> 
> .ui-state-default-hover { background-image: url(images/default-hover.png); }
> 
> .ui-state-active-hover { background-image: url(images/active-hover.png); }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:58:05.483

只需使用两个 css 类的组合：

```
.ui-state-default.ui-state-hover { background-image: url(images/default-hover.png); }

.ui-state-active.ui-state-hover { background-image: url(images/active-hover.png); } 
```

# java - Java 的 GWT Grid 替代方案

> ID：12156788
> 
> 赞同：1
> 
> 时间：2012-08-28T09:53:38.740
> 
> 标签：java, gwt, grid, panel, grid-layout

a的`Java`等价物是什么`GWT Grid`（您可以将图形对象插入到 上的坐标 x,y 上`Grid`）？我做了一些`Java`看起来像它的东西，通过使用 a`JPanel`和 a制作`GridLayout`，但添加了`add(int x, int y)`方法，以`JButtons`支持`JLabels`在`Panel`. 还是没有等效的，我的解决方案是将图形内容插入到这样的最佳方法`Panel`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:01:10.057

我认为[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)更接近你真正想要的。您可以通过 指定组件的位置`GridBagConstraints`。然后使用约束添加组件。

一个简单的例子：

```
GridBagConstraints c = new GridBagConstraints();
// Position in upper left corner
c.gridx = 0;
c.gridy = 0;

panel.add(component, c); 
```

# ruby - 未找到捆绑器，但 gem 列表显示捆绑器

> ID：12156789
> 
> 赞同：0
> 
> 时间：2012-08-28T09:53:41.900
> 
> 标签：ruby, gem, rvm, bundler

我使用 rvm，效果很好。

当我输入 gem list 时，它会显示 bundler 1.1.5，但会打印出哪个 bundler：找不到 bundler。

我确实安装了几次捆绑器，但没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:07:35.030

gem 的命令`bundler`不是`bundler`but `bundle`。所以只需`bundle`在你的 shell 上输入，它就会起作用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:22:27.870

我可以解决这个问题：

```
rvm gemset use global && gem install bundler 
```

显然gemset有问题。使用全局 gemset 后，它就像一个魅力。

# php - PHP全局变量在循环的第一次迭代中显示为空

> ID：12156795
> 
> 赞同：0
> 
> 时间：2012-08-28T09:53:57.570
> 
> 标签：php, include

抱歉，找不到更好的标题。所以这是我在functions.php中有一个函数的问题

```
function show_news(){
$id_counter = 1;
$json_news = array(
        "id" => 0,
        "title" => ""
    );
$json_o = json_decode(file_get_contents(JSON_DATA_FOLDER.'news.json'));
foreach ($json_o as $id => $news_category)
{
    echo '<h2>'.$id.'<h2>';
    foreach ($news_category as $news)
    {
        if(IsNullOrEmptyString($news->id)){$json_news['id'] = $id_counter; $id_counter++;}
        else{$json_news['id']=$news->id;}
        if(!IsNullOrEmptyString($news->title)){$json_news['title']=$news->title;}
        var_dump($json_news);
        echo "<br/>-------<br/>";
        include('news-layout.php');
    }
}
} 
```

我正在读取一个 json 文件，并且对于每个元素，我将其值分配给一个数组。然后我包括'news-layout.php'。出于测试目的，我只在“news-layout.php”中保留了这 3 行代码

```
<?php 
global $json_news;
var_dump($json_news);
echo"<br/>=======================<hr/>";
?> 
```

所以我在我的函数内以及包含的页面上做一个 var_dump。但我得到了奇怪的结果。一切正常，除了包含页面上的 var_dump($json_news) 显示循环的第一次迭代为 NULL ！这是输出

```
todays_specials
array(2) { ["id"]=> int(1) ["title"]=> string(26) "Okie Since I have to do it" } 
-------
NULL 
=======================
array(2) { ["id"]=> int(2) ["title"]=> string(16) "Vegetable Samosa" } 
-------
array(2) { ["id"]=> int(2) ["title"]=> string(16) "Vegetable Samosa" } 
=======================
array(2) { ["id"]=> int(3) ["title"]=> string(16) "Vegetable Pakora" } 
-------
array(2) { ["id"]=> int(3) ["title"]=> string(16) "Vegetable Pakora" } 
======================= 
```

你可以看到那个奇怪的 NULL 来了。谁能解释发生了什么或如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:24:55.807

您的 $json_news 变量首先是函数文件的本地变量。然后包含布局文件并创建全局 $json_news var，然后使用全局。在你的函数文件中将它设置为全局并删除布局文件中的变量声明，你应该很高兴！

像这样：

```
function show_news(){
    $id_counter = 1;
    global $json_news = array(
        "id" => 0,
        "title" => ""
    );
    $json_o = json_decode(file_get_contents(JSON_DATA_FOLDER.'news.json'));
    foreach ($json_o as $id => $news_category){
        echo '<h2>'.$id.'<h2>';
        foreach ($news_category as $news){
            if(IsNullOrEmptyString($news->id)){
                $json_news['id'] = $id_counter; $id_counter++;
            }else{
                $json_news['id']=$news->id;
            }
            if(!IsNullOrEmptyString($news->title)){
                $json_news['title']=$news->title;
            }
            var_dump($json_news);
            echo "<br/>-------<br/>";
            include('news-layout.php');
        }
    }
} 
```

'新闻-layout.php'

```
<?php 
var_dump($json_news);
echo"<br/>=======================<hr/>";
?> 
```

旁注：不推荐使用这样的全局变量！

# c - 计算一个小数点后五位的序列

> ID：12156796
> 
> 赞同：-2
> 
> 时间：2012-08-28T09:53:58.173
> 
> 标签：c, floating-point

我想编写一个计算序列的 C 程序：

```
1/x + 1/2*x^2 + 1/3*x^3 + 1/4*x^4 + ... 
```

最多五位小数。

该程序将`x`作为输入并将（系列的值）打印`f(x)`到小数点后五位。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:36:03.600

为了评估多项式，Horner 形式通常比扩展形式具有更好的数值稳定性参见[http://reference.wolfram.com/legacy/v5/Add-onsLinks/StandardPackages/Algebra/Horner.html](http://reference.wolfram.com/legacy/v5/Add-onsLinks/StandardPackages/Algebra/Horner.html)

如果第一项是拼写错误，那么`(((((1/4 )* x + 1/3) * x ) + 1/2) * x + 1) * x`
如果第一项真的是 1/x，请尝试 Else`(((((1/4 )* x + 1/3) * x ) + 1/2) * x*x + 1/x`

当然，您仍然必须分析 Eric Postpischil 回答中提出的收敛性和数值稳定性。

最后一件事，您作为示例提交的系列真的会收敛到某个 x 的有限值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:32:29.917

为了知道您计算的总和在系列极限的所需距离内，您需要证明误差源小于所需距离。

以数值方式评估系列时，有两个错误来源。一是数值计算的局限性，例如浮点舍入。另一个是剩余项的总和，没有被添加到部分总和中。

数值误差取决于所做的计算。对于您要评估的每个系列，必须执行错误的自定义分析。对于您显示的示例系列，可以轻松计算出数值误差的粗略但足够的界限。这是您主要感兴趣的系列，还是有其他系列？

剩余项的总和也需要自定义分析。通常，给定一个序列，我们可以找到一个表达式，该表达式可以被证明至少与所有剩余项的总和一样大，但更容易计算。

在确定这两个错误的界限后，您可以对序列的项求和，直到两个界限的总和小于所需的距离。

# .htaccess - .htaccess：如何拒绝对除我以外的所有特定文件夹的访问

> ID：12156797
> 
> 赞同：0
> 
> 时间：2012-08-28T09:53:59.363
> 
> 标签：.htaccess

我想在我的管理文件夹中进行独占访问，我尝试了这段代码（在管理文件夹内的 .htaccess 文件中）：

```
order allow,deny
allow from m.y.i.p
deny from all 
```

也试过这个：

```
order deny,allow
deny from all
allow from m.y.i.p 
```

和这个：

```
order deny,allow
allow from m.y.i.p
deny from all 
```

但任何时候服务器都会给我这个回复：

403 禁止

Forbidden 您无权访问此服务器上的 /provo/prova/。

我该如何解决这个问题？我有一个连接到路由器/调制解调器的交换机，我从这个站点获取我的 IP 地址[http://whatismyipaddress.com/](http://whatismyipaddress.com/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:25:56.183

这对我有用：

```
Order deny,allow
deny from all
allow from m.y.i.p 
```

但是，既然您已经尝试过了，您需要确保这是网络服务器看到的 IP。加载页面后立即查看访问日志以查看记录的 IP。

除此之外，请确保您已将这些放在正确的位置。您要保护的目录中的 htaccess 文件，或`<Directory>`服务器/虚拟主机配置中的块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:06:35.790

使用[.htpasswd](http://httpd.apache.org/docs/2.2/programs/htpasswd.html)。它比仅使用 IP 地址更具弹性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:59:23.433

Prob 不是您正在寻找的答案，而是：

如果您使用的是 cPanel .. 从那里开始真的很容易。

它涉及制作密码文件。我不记得确切的方法，因为我总是让 cPanel 为我做这件事。

如果您已从您的 ISP 获得静态 IP，我只会通过 IP 执行此操作……否则这可能会改变。

# android - 无法在 AChartEngine 中将轴以 Origo 为中心

> ID：12156801
> 
> 赞同：0
> 
> 时间：2012-08-28T09:54:14.707
> 
> 标签：android, achartengine

我无法让 AChartEngine 将实际可见轴集中在 Origo 上，而不是让它们沿着图表的左侧和底部。

我需要这样的轴：

![在此处输入图像描述](../Images/dc144dcb3dfd939259c6aa5aa4da0361.png)

有任何想法吗？

（这个问题类似于问题#2 [2]：[Make x-axis in vertical center using AChartEngine](https://stackoverflow.com/questions/10979790/make-x-axis-in-vertical-center-using-achartengine)但我认为更具体的问题可能会得到答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:25:46.180

我对 AChartEngine 1.0.0 进行了一些修改，以便可以在绘图中心显示轴。使用下面的代码将轴设置为中心。

```
XYMultipleSeriesRenderer.setXAxisAlign(Align.CENTER, 0);
XYMultipleSeriesRenderer.setYAxisAlign(Align.CENTER, 0); 
```

[XYMultipleSeriesRenderer.patch](https://docs.google.com/open?id=0B0YNo-RO7CbbNHEzWE45SUlrWVU%20)
[XYChart.patch](https://docs.google.com/open?id=0B0YNo-RO7CbbSDVJeWFFNU9vMFk)

这是一个关于它的外观的示例 ![在此处输入图像描述](../Images/712724d6593a76377b443c7a451b01c5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:04:45.003

没有比你提到的更好的答案了。只需确保您计算 X 和 Y 范围，例如您的数据适合其中，并确保您设置的范围以 0 点为中心：

```
renderer.setXAxisMin(-value);
randerer.setXAxisMax(value); 
```

Y轴也一样。

# php - PHP MySQL分页很慢

> ID：12156807
> 
> 赞同：5
> 
> 时间：2012-08-28T09:54:31.090
> 
> 标签：php, mysql, pagination

我的桌子

```
Field   Type    Null    Key Default Extra
id      int(11)     NO  PRI NULL    auto_increment
userid  int(11)     NO  MUL NULL     
title   varchar(50) YES     NULL     
hosting varchar(10) YES     NULL     
zipcode varchar(5)  YES     NULL     
lat     varchar(20) YES     NULL     
long    varchar(20) YES     NULL     
msg    varchar(1000)YES MUL NULL     
time    datetime    NO      NULL 
```

那是桌子。我模拟了 500k 行数据并随机删除了 270k 行，只留下 230k 行，自动增量为 500k。

这是我的索引

```
Keyname Type    Unique  Packed  Field   Cardinality Collation   Null
PRIMARY BTREE   Yes No  id            232377    A       
info    BTREE   No  No  userid          2003    A       
lat                                    25819    A   YES
long                                   25819    A   YES
title                                  25819    A   YES
time                                   25819    A 
```

考虑到这一点，这是我的查询：

> SELECT * FROM `posts`WHERE `long`>-118.13902802886 AND `long`<-118.08130797114 AND `lat`>33.79987197114 AND `lat`<33.85759202886 ORDER BY id ASC LIMIT 0, 25

显示第 0 - 15 行（共 16 行，查询耗时 1.5655 秒）[id: 32846 - 540342]

该查询只给我带来了 1 页，但因为它必须搜索所有 230k 条记录，所以仍然需要 1.5 秒。

这是解释的查询：

```
id  select_type table   type    possible_keys   key     key_len ref rows    Extra
1   SIMPLE      posts   index   NULL            PRIMARY 4       NULL 25     Using where 
```

因此，即使我使用 where 子句只返回 16 个结果，我仍然会得到一个缓慢的查询。

现在例如，如果我进行更广泛的搜索：

```
SELECT * FROM `posts` WHERE `long`>-118.2544681443 AND `long`<-117.9658678557 AND `lat`>33.6844318557 AND `lat`<33.9730321443 ORDER BY id ASC LIMIT 0, 25 
```

显示第 0 - 24 行（共 25 行，查询耗时 0.0849 秒）[id: 691 - 29818]

从 20 页中检索第一页时速度要快得多，总共找到 483 页，但我限制为 25 页。

但如果我要最后一页

```
SELECT * FROM `posts` WHERE `long`>-118.2544681443 AND `long`<-117.9658678557 AND `lat`>33.6844318557 AND `lat`<33.9730321443 ORDER BY id ASC LIMIT 475, 25 
```

显示第 0 - 7 行（共 8 行，查询耗时 1.5874 秒）[id: 553198 - 559593]

我得到一个缓慢的查询。

我的问题是如何实现良好的分页？当网站上线时，我预计当它起飞时，每天都会有数百条帖子被删除和发布。帖子应按 id 或时间戳排序，并且 Id 不连续，因为某些记录将被删除。我想要一个标准的分页

```
1 2 3 4 5 6 7 8 ... [Last Page] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:57:50.197

使用`WHERE`子句从出现在较早页面上的结果记录中过滤：然后您不需要指定偏移量，只需指定行数。例如，跟踪查看的最后一个 id 或时间戳，并仅过滤那些 id 或时间戳大于该值的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:00:30.663

不幸的是，mysql 在输出 30 个结果之前必须读取所有 20000 行。如果您可以尝试使用 WHERE 子句中的索引列过滤来缩小搜索范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:01:14.510

几句话。

鉴于 you `order by id`，这意味着在每个页面上，您都有第一条和最后一条记录的 id，因此您应该使用 where id > $last_id limit 20 而不是限制 200000，这将非常快。

缺点显然是，如果 id 不是连续的（在两者之间删除），则您不能提供“最后”页面或中间的任何页面。然后，您可以使用最后一个已知 id 和 offset + limit 组合的组合。

显然，拥有适当的索引也将有助于排序和限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:03:46.307

看起来你只有一个主键索引。您可能希望在您使用的字段上定义索引，例如：

```
create index idx_posts_id on posts (`id` ASC);
create index idx_posts_id_timestamp on posts (`id` ASC, `timestamp` ASC); 
```

除了主唯一键索引之外，在您的键字段上有一个常规索引通常有助于加快 mysql 的速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:03:59.297

Mysql 在较大的偏移量下损失了相当多的性能：来自[mysqlPerformance 博客](http://www.mysqlperformanceblog.com/2006/09/01/order-by-limit-performance-optimization/)：

当心大的 LIMIT 如果您需要前几行，则使用索引进行排序是有效的，即使发生了一些额外的过滤，因此您需要按索引扫描更多行，然后由 LIMIT 请求。但是，如果您正在处理具有大偏移效率的 LIMIT 查询，则会受到影响。LIMIT 1000,10 可能比 LIMIT 0,10 慢。确实，大多数用户的搜索结果不会超过 10 页，但搜索引擎机器人可能会这样做。我已经看到机器人在我的项目中查看 200 多页。此外，对于许多未能解决此问题的网站来说，这为发起 DOS 攻击提供了非常简单的任务——从少数连接中请求具有大量数量的页面，这就足够了。如果您不执行任何其他操作，请确保阻止页码过大的请求。

在某些情况下，例如，如果结果是静态的，那么预先计算结果可能是有意义的，这样您就可以查询它们的位置。因此，不是使用 LIMIT 1000,10 进行查询，而是在 1000 和 1009 之间的 WHERE 位置，这对于任何位置都具有相同的效率（只要它被索引）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T10:08:14.037

如果您使用自动增量，您可以使用：

`SELECT * FROM`帖子 `WHERE`id `>= 200000 ORDER BY`id`DESC LIMIT 200000 , 30`

这样 mysql 将不得不只遍历 200000 以上的行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T23:56:22.473

我想到了。让我慢下来的是订购。因为我会调用一个限制，并且我要求走的越远，它必须排序的越多。所以然后我通过添加一个子查询来修复它，首先使用`WERE` 子句提取我想要的数据，然后我使用`ORDER BY`和`LIMIT`

```
SELECT * FROM 
    (SELECT * from `posts` as `p` 
        WHERE 
           `p`.`long`>-119.2544681443 
           AND `p`.`long`<-117.9658678557 
           AND `p`.`lat`>32.6844318557 A
           ND `p`.`lat`<34.9730321443  

    ) as posttable 
    order by id desc 
    limit x,n 
```

通过这样做，我实现了以下目标：

```
id  select_type     table        type   possible_keys   key key_len ref     rows    Extra
1   PRIMARY         <derived2>   ALL    NULL            NULL NULL   NULL    3031    Using filesort
2   DERIVED         p            ALL    NULL            NULL NULL   NULL    232377  Using where 
```

现在，我使用“where”过滤 232k 结果，并且仅使用 orderby 和限制 3031 个结果。

Showing rows 0 - 3030 (3,031 total, Query took 0.1431 sec)

# javascript - 用于从 html 页面到 servlet 的多个图像的 File API base 64 编码

> ID：12156813
> 
> 赞同：5
> 
> 时间：2012-08-28T09:54:57.563
> 
> 标签：javascript, html, servlets, base64

基本上我的要求是我必须上传 4 到 12 个小图标（6kb）和 15-20 个中等大小的图标（比如 200kb）图标。

我有一个 html 页面，它使用 POST 请求将使用 base 64 编码的多个图像上传到 servlet。这个 base 64 字符串被转换为字节以在服务器端代码中创建图像。

POST 请求可以很好地上传任何小尺寸图像（7kb）和 6-7 个中型图标（200 kb）。但是当我上传超过 8 个中等大小的图标时，html 页面无法将数据从 html 页面传送到 servlet。即使在我的 servlet 中，当我对其他属性执行 (sipReq.getParameter("name")) 时，这些值也会变为 null。

请帮助寻求可能的解决方案，或者我应该寻找其他替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:47:08.773

Apache Commons 的[FileUpload](http://commons.apache.org/fileupload/)很可能是您的解决方案 - 正如@Sean 所暗示的那样，由于它的多部分支持，我在 Tomcat 上同时上传多个、数兆字节的文档没有问题。

如果您已经在使用 Spring MVC，它可以像添加一个[额外的 bean](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s08.html)一样简单。

# apache - apache Alias 是否也适用于 mod_vhost_alias 变量？

> ID：12156815
> 
> 赞同：2
> 
> 时间：2012-08-28T09:55:03.917
> 
> 标签：apache, alias, virtualhost

我正在使用 Apache 的 mod_vhost_alias 来动态使用 vhosts 和 documentroots，效果很好......但现在我试图在动态分配的目录中的某个位置向另一个目录添加别名，但我无法让它工作......

这就是我所拥有的：

```
<VirtualHost *:80>
    ServerName project.dev.testdomain.com
    ServerAlias *.project.dev.testdomain.com

    UseCanonicalName Off
    VirtualDocumentRoot /home/%-5/www/%-4/subdir/httpdocs

    Alias /images/ "/home/%-5/www/%-4/subdir/latest/images/"
</VirtualHost> 
```

在错误日志中它只显示：文件不存在：/home/%-5

请指教...

# objective-c - 如何在 dispatch_queue 或 NSThread 或 NSOperationQueue 中使用 NSURLConnection？

> ID：12156816
> 
> 赞同：0
> 
> 时间：2012-08-28T09:55:03.013
> 
> 标签：objective-c, grand-central-dispatch, nsthread, nsoperation, nsoperationqueue

我尝试在 NSThread 和 dispatch_queue 中使用 NSURLConnection。不调用已实现的 NSURLConnectionDelegate 方法。但是当我在 NSThread 和 NSOperationQueue 中使用 NSOperation 时，会调用这些方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:25:56.877

没有调用这些`NSURLConnectionDelegate`方法，因为您的线程或调度块在调用委托方法之前完成了执行。如果您想以`NSURLConnection`这种方式在自己的线程中使用，正如其他人所建议的那样，您必须保持运行循环。

[这](http://www.sortedbits.com/nsurlconnection-in-its-own-thread/)是一个例子。基本上

```
while(!finished) {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    finished = TRUE;
} 
```

`NSURLConnection`综上所述，在异步块中使用同步 API不是更好吗？例如，您可以将同步请求包装在一个`NSOperation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:24:52.293

您可以使用基于块的方法：

```
 NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
    {
        if ([data length] > 0 && error == nil){
            // we should check that data is OK
            NSLog(@"Data received");
        }
    } 
```

# c++ - 如何在 Doxygen 中为不同范围的模板值添加行为描述？

> ID：12156819
> 
> 赞同：0
> 
> 时间：2012-08-28T09:55:09.770
> 
> 标签：c++, templates, doxygen

是否有一种“通用”方法可以在 Doxygen 中为不同范围的模板值添加行为列表？

例如：

```
template<int Var> class MyClass{}; 
```

我将描述 Var < 0、Var = 0 和 Var > 0 的行为。如何清楚地呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:36:17.653

您可以使用[tparam](http://www.doxygen.nl/manual/commands.html#cmdtparam)记录模板参数。

如果它不适合那里，我可能会使用[par](http://www.doxygen.nl/manual/commands.html#cmdpar)命令来描述类文档中的行为。

# java - 使用内部类强制转换代理 Java 类

> ID：12156820
> 
> 赞同：0
> 
> 时间：2012-08-28T09:55:17.267
> 
> 标签：java, proxy

这是我面临的一个问题。

我正在写一个插件。有一个名为*SystemObject*的接口和一个默认的 getter。

```
public class MyPlugin extends Plugin {
        @override
        public SystemObject getSystemObject() {
                return super.getSystemObject();
        } 
} 
```

SystemObject 接口有一个名为 getScreenSize() 的方法，我想代理或拦截它。当我创建一个代理类，或者只是自己实现这个 SystemObject 接口时，我得到一个类转换异常。

这是因为 getSystemObject （插件系统的一部分）的调用者在他们的代码中有这个（通过逆向工程找到）：

```
private void foo() { 
     SystemObjectImpl impl = (SystemObjectImpl)plugin.getSystemObject(); 
} 
```

* * *

我的问题是：**有什么方法可以代理 SystemObject 接口上的调用？**

我尝试实现接口并使用 java 反射代理调用无济于事。不幸的是，我不负责运行java进程，所以我不能使用代理。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:07:11.593

[您可以使用CGLIB 之](http://cglib.sourceforge.net)类的东西来创建扩展的代理类`SystemObjectImpl`。

# asp.net-membership - 具有 MVC4 的 asp.net 成员资格

> ID：12156829
> 
> 赞同：2
> 
> 时间：2012-08-28T09:56:13.450
> 
> 标签：asp.net-membership, asp.net-mvc-4

我有一个使用 asp.net 在生产上运行的项目。现在我需要创建另一个项目来管理站点。所以我决定使用 MVC4。我必须使用相同的数据库，其中包含所有成员表（aspnet_users 等）。

但是 MVC4 仅使用 6 个表（成员资格、配置文件等），左侧没有“aspnet_”。

现在我的问题是当我尝试在现有数据库中验证（Membership.Validate（用户名，密码））用户时，提供者找不到用户。因为提供者试图在 'Memberships, users' 表中搜索，而不是在 'aspnet_membership, aspnet_users' 表中。

在这种情况下，我将如何将新的 MVC4 项目与我现有的数据库集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:07:24.507

MVC4 / .NET 4.5 Membership 提供程序使用具有完全不同表结构的[SimpleMembership 。](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

但是，显然可以在您的[Web 配置中将您的提供程序改回旧的 .NET 2 提供程序 - 请参见此处](http://aspnet.codeplex.com/workitem/9622)。

# c# - 当 File.Move 发生时，File.Open 不会抛出 IOException

> ID：12156831
> 
> 赞同：3
> 
> 时间：2012-08-28T09:56:20.390
> 
> 标签：c#, ioexception

`IOException`我在不同的服务器上遇到奇怪的问题。这是我的故事：

我有监视文件夹以进行文件更改的 win 服务器 (C#)。此外，FTP 服务器 (WinSSHD) 指向同一个文件夹。当有人上传文件时，WinService 检查是否写入完成。如果上传文件，WinService 会通过 File.Move 方法对其进行重命名。

是否写入完成检查由 File.Open 方法进行。像这样：

```
public static bool IsWriteComplete(string filePath)
{
    bool isWriteComplete;
    FileStream stream = null;
    try
    {
        stream = File.Open(filePath, FileMode.Open, FileAccess.Write, FileShare.ReadWrite|FileShare.Delete);
        isWriteComplete = true;
    }
    catch (IOException)
    {
        isWriteComplete = false;
    }
    catch (Exception ex)
    {
        isWriteComplete = false;
    }
    finally
    {
        if (stream != null) { stream.Close(); }
    }
    return isWriteComplete;
} 
```

由于某种原因，它在一台服务器上运行良好（Win2003SP2），而在另一台服务器上（Win2003SP1）则根本无法运行。该`IsWriteComplete`方法说 True，WinServer 尝试移动文件并在`IOException`稍后死去。我还没有找到有关此类问题的任何参考资料。

为了解决我替换`File.Open`为`File.Move`. 前：

```
stream = File.Open(filePath, FileMode.Open, FileAccess.Write, FileShare.ReadWrite|FileShare.Delete); 
```

后：

```
File.Move(filePath, filePath); 
```

现在它可以在第二台服务器（Win2003SP1）上运行，而不能在第一台服务器（Win2003SP2）上运行。

有谁知道它为什么会这样工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:35:42.253

当您使用 File.Open 时，您有一个“竞争条件”，即使您使用 FileShare.None - 在您关闭文件后，另一个线程/进程可以在您调用 File.Move 之前潜入并锁定文件（打开它）。这个其他进程可能不是 FTP 服务器，但可能是您甚至不知道的东西，例如病毒检查程序。因此，您应该使用 File.Move 而不是 File.Open，并在 File.Move 失败时捕获 IOException，然后重试，直到成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:13:00.407

使用 时`FileShare.ReadWrite|FileShare.Delete`，您允许其他进程在您打开文件时读取、写入或删除文件。另一方面，您可以打开文件，而其他人也可以访问它。因此，尝试`FileShare.None`以独占方式打开该文件，只要该文件正被 FTP 服务器使用，该文件就会失败。

此外，您应该使用`FileAccess.ReadWrite`以确保您拥有对该文件的完全访问权限。您不知道 FTP 服务器如何锁定文件，也许它允许其他进程以读取模式打开文件并在上传仍在进行时拒绝写入模式。所以，`FileAccess.ReadWrite`比较好。

MSDN 参考： http: [//msdn.microsoft.com/en-us/library/system.io.fileshare.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)和[http://msdn.microsoft.com/en-us/library/system.io.fileaccess.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileaccess.aspx)

关于您的代码：

```
catch (IOException)
{
    isWriteComplete = false;
}
catch (Exception ex)
{
    isWriteComplete = false;
} 
```

`IOException`如果您还catch `Exception`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:05:01.667

或者，您可以以其他方式检查然后打开方法。

```
FileInfo fileInfo = new FileInfo(filePath);
bool isNormal = ((fileInfo.Attributes & FileAttributes.Normal) == FileAttributes.Normal);

//or 

bool isReadOnly = ((fileInfo.Attributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly); 
```

您可以通过任何一种方式找到该方法，以了解文件是否可用。您可以根据状态继续。

如果您正在寻找其他东西，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:26:47.623

找到行为的根本原因。安装了不同的 FTP 服务：Techia。出于某种原因，Tectia 没有在上传文件时设置写锁定。这就是 File.Open(filePath, FileAccess.Write) 不抛出 IOException 的原因。

# jquery - 如何使用 jQuery 选择器

> ID：12156836
> 
> 赞同：1
> 
> 时间：2012-08-28T09:57:01.147
> 
> 标签：jquery, jquery-selectors, fadein, slidedown

我有一个这样的 HTML 结构：-

```
<article id="a_post" class="a_post">
<div id="thumbnail">
<img id="shine" src="wp-content/themes/dabanggknight/images/play.png"/>
</div>
<div id="instant_video" class="instant_video">
<span class="close"></span>
    // Some content here
</div>
</article>    
<article id="a_post" class="a_post">
<div id="thumbnail">
<img id="shine" src="wp-content/themes/dabanggknight/images/play.png"/>
</div>
<div id="instant_video" class="instant_video">
<span class="close"></span>
    // Some content here
</div>
</article> 
```

在上面的 HTML 中，`<div id="instant_video" class="instant_video"> <span class="close"></span> // Some content here </div>`有一个`display:none;`. 我想要做的就是当有人点击时， `<img id="shine" src="wp-content/themes/dabanggknight/images/play.png"/>`我想用 Instant_video 的 id 向下滑动 div，它的显示在 css 中设置为 none。

然后，当有人点击关闭类的跨度时，它会再次淡出该特定 div。

但是我对 jQuery 选择器有一个严重的问题，因为我真的很业余。

我使用的代码在所有隐藏的 div 中滑动，id 为`instant_video`，这就是问题仍然存在的地方。

我要做的就是只向下滑动包含我单击的图像的文章标签内的 div。

我目前使用的代码如下：-

```
jQuery(document).ready(function() {
    jQuery('img#shine').click(function() {
        jQuery('.instant_video').slideDown('fast')
    }); 
});
jQuery(document).ready(function() {
    jQuery('.close').click(function() {
        jQuery('.instant_video').fadeOut('slow')
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:01:53.143

首先，任何给定的元素都不允许有多个元素`id`。`id`属性在文档中必须是唯一的。

你的问题的解决方案是给你的`img`元素一个`class`属性而不是一个`id`，然后使用jQuery的遍历方法（`closest and` `find`在这种情况下）来获取相关元素。

所以，假设你的`img`元素有 class `shine`，你可以这样做：

```
$(document).ready(function() {
    $('img.shine').click(function() {
        $(this).closest('article').find('.instant_video').slideDown('fast');
    });
    $('span.close').click(function() {
        $(this).closest('.instant_video').fadeOut('slow');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:01:21.947

试试这个：

```
jQuery(document).ready(function($) {
   $('.a_post img').click(function() {
      $(this).closest('.a_post').find('.instant_video').slideDown('fast')
   });

   $('.close').click(function() {
      $(this).closest('.instant_video').fadeOut('slow')
   });
}); 
```

不需要`$(document).ready`两次

标签也`id`必须始终是唯一的

因为你有很多`instant_video`你应该`closest`用来获取与`img`你点击的相关的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:05:33.967

请记住，ID 是唯一的。一个页面上不能有两个具有相同 ID 的元素！

但是，请尝试以下操作：将类分配给 img`#shine`而不是 id：

`<img class="shine" src="wp-content/themes/dabanggknight/images/play.png"/>`

然后使用此代码：

```
jQuery(function(){
    jQuery('img.shine').on('click', function(){
        jQuery(this).closest('.a_post').find('.instant_video').slideDown('fast');
    });

    jQuery('.close').on('click', function(){
        jQuery(this).closest('.a_post').find('.instant_video').fadeOut('slow');
    }); 
});​ 
```

（或更短，试试这个：）

```
$(function(){
    $('img.shine').on('click', function(){
        $(this).closest('.a_post').find('.instant_video').slideDown('fast');
    });

    $('.close').on('click', function(){
        $(this).closest('.a_post').find('.instant_video').fadeOut('slow');
    }); 
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:08:02.930

尝试类似的东西；

```
$('#shine').click(function() {
    $(this).closest('.a_post').find('.instant_video').slideDown('fast');
});
$('.close').click(function() {
    $(this).closest('.instant_video').fadeOut('slow');
}); 
```

***[这](http://jsfiddle.net/blasteralfred/eR2Xw/1/)***是一个有效的现场演示。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T10:00:52.777

ids 必须是页面唯一的，您按类别选择，即

```
jQuery('.instant_video') 
```

按id选择是这样的

```
jQuery('#instant_video') 
```

# qt - qvtkwidget 与滑块的交互

> ID：12156844
> 
> 赞同：0
> 
> 时间：2012-08-28T09:57:16.687
> 
> 标签：qt, connection, slider, vtk

我对 qvtkwidget 有疑问。我有一个带有 vtkimageplanewidget 的立方体，并且我已经在滑块和它们之间建立了连接，但是当我在 qvtkwidget 中使用鼠标更改平面时，我希望滑块也可以更改。

我怎样才能做到这一点？

这是我将滑块连接到飞机的方法。

投币口：

```
void planevolume::SplaneXpixel()
{
    double xvalue=ui->Slider->value();
    planeX->SetSliceIndex(xvalue);
    ui->qvtkWidget->update();
} 
```

进而：

```
 connect(ui->Slider, SIGNAL(valueChanged(double)), this, SLOT(SplaneXpixel())); 
```

相反的呢？我试过：

投币口：

```
void planevolume::planeXSpixel()
{
    double xvalue=planeX->GetSliceIndex();
    ui->Slider->setValue(xvalue);
    ui->qvtkWidget->update();
} 
```

进而：

```
connect(ui->qvtkWidget, SIGNAL(mouseEvent(QMouseEvent*)), SLOT(planeXSpixel())); 
```

但它不会工作，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:55:13.000

我相信您正在寻找 vtkEventQtSlotConnect。这是一个示例： [http ://www.vtk.org/Wiki/VTK/Examples/Cxx/Qt/EventQtSlotConnect](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Qt/EventQtSlotConnect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:27:55.703

If you work with the UI form, right click the slider, choose "Go to slot..." and select the sliderMoved(int) slot. Inside the automated slot created by Qt, it should be on_slider_sliderMoved(int position). just insert your code there. maybe this implementation should help you further:

[Displaying DICOM Series using the Qt sliderbar](http://hxr99.blogspot.com/2013/03/qt-vtk-displaying-dicom-series-using.html)

# php - 500 - 内部服务器错误 PHP - IIS 7.0

> ID：12156845
> 
> 赞同：1
> 
> 时间：2012-08-28T09:57:29.577
> 
> 标签：php, iis-7, plesk

在 PHP 页面中，我有一个类似的表单

```
<form name="frm" method="POST" action="<?=$_SERVER['PHP_SELF'];?>"> 
```

但是每当我提交表单时，它都会给我错误消息，例如

```
500 - Internal server error.
There is a problem with the resource you are looking for, and it cannot be displayed. 
```

我的网站正在以下配置上运行

服务器：-`Microsoft-IIS/7.0`

PHP版本：-`PHP5.3.0`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:06:59.403

**错误 500 是内部服务器错误** ，因此存在服务器端问题

您可以查看 iss / php 日志以获取有关它的更多详细信息

# php - 根据网速切换网站页面

> ID：12156847
> 
> 赞同：0
> 
> 时间：2012-08-28T09:57:36.380
> 
> 标签：php, javascript, pagespeed

我打算用java脚本和flash做一个网站主页。两者都是单独的页面。

我想要的意思是，如果用户的互联网连接速度很慢，则需要加载脚本页面。如果用户有快速的互联网，Flash 网站想要加载。

如何用 php 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:35:41.420

这对我有用，在以下教程[http://www.ehow.com/how_5804819_detect-connection-speed-javascript.html中进行了一些更改](http://www.ehow.com/how_5804819_detect-connection-speed-javascript.html)

```
<html>
<head><Title>Test Speed</title>
<script type="text/javascript" language="Javascript">
var imageAddr = "/myimage.gif" + "?n=" + Math.random() ;
var startTime, endTime ;
var downloadSize = 5500 ;
var download = new Image() ;
download.onload = function() {
endTime = (new Date()).getTime() ;
showResults () ;
}
startTime = (new Date()).getTime() ;
download.src = imageAddr ;
function showResults () {
var duration = Math.round((endTime - startTime) / 1000) ;
var bitsLoaded = downloadSize * 8 ;
var speedBps = Math.round(bitsLoaded / duration) ;

if (speedBps <= 50000){
    window.location = "/script.html";
    }
    else{
    window.location = "/flash.html";
    }

}
</script>
</head>
<body>
<center>Page Loding</center>
</body>
</html> 
```

# bitmap - 动态壁纸强制关闭问题

> ID：12156849
> 
> 赞同：0
> 
> 时间：2012-08-28T09:57:42.093
> 
> 标签：bitmap, live-wallpaper

我正在创建动态壁纸应用程序，它可以在 xhdpi 和 ldpi 设备上完美运行，但在基于 hdpi 和 mdpi 的手机中出现强制关闭问题。

当我们单击“设置壁纸”时它会在预览屏幕中加载图像，它会崩溃，即使我们从应用程序更改设置也是如此。

以上两个条件使应用程序强制关闭。

看起来像**OutOfMemoryError**

**错误不一致**

这是我的代码：

**pixeltwo.java**

```
public class pix11two extends SurfaceView {
private pix11three three;
int fps;
Bitmap mBitmap;
int country_flag;

public pix11two(Context context, int fps, int country) {
    super(context);
    this.fps = fps;

    country_flag = country;

    DisplayMetrics displayMetrics = new DisplayMetrics();
    displayMetrics = context.getResources().getDisplayMetrics();
    int displayWidth = displayMetrics.widthPixels;
    int displayHeight = displayMetrics.heightPixels;

    if (mBitmap != null)
        mBitmap.recycle();

    BitmapFactory.Options options = new BitmapFactory.Options();

    options.inSampleSize = 1;

    options.inPurgeable = true;

    if (country_flag > 1) {

        if (country_flag == 2) {

            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.yellow, options);
        }

        if (country_flag == 3) {

            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.orange, options);
        }

        if (country_flag == 4) {

            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.green, options);
        }

        if (country_flag == 5) {

            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.red, options);
        }
        if (country_flag == 6) {
            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.purple, options);
        }

        if (country_flag == 7) {
            mBitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.pink, options);
        }

    } else {

        mBitmap = BitmapFactory.decodeResource(getResources(),
                R.drawable.blue, options);
    }

    three = new pix11three(mBitmap, displayWidth, displayHeight, 0, 0, fps,
            10);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // handle touch
    }
    return true;
}

public void render(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    three.draw(canvas);
}

public void update() {
    three.update(System.currentTimeMillis());
} 
```

}

**pixelone.java**

```
 public class pix11one extends WallpaperService {
public static final String SHARED_PREFS_NAME = "animation";

@Override
public void onCreate() {
    super.onCreate();
}

@Override
public void onDestroy() {
    super.onDestroy();
}

@Override
public Engine onCreateEngine() {
    return new pix11engine();
}

class pix11engine extends Engine implements
        SharedPreferences.OnSharedPreferenceChangeListener {

    boolean mVisible = false;

    pix11two two;

    pix11three three;

    int country_counter = 1;

    private final Handler mHandler = new Handler();

    private final Runnable mDrawPattern = new Runnable() {
        public void run() {

            draw();
        }
    };
    SharedPreferences mPrefs;

    public pix11engine() {

        mPrefs = pix11one.this.getSharedPreferences(SHARED_PREFS_NAME, 0);
        mPrefs.registerOnSharedPreferenceChangeListener(this);
        onSharedPreferenceChanged(mPrefs, null);
    }

    public void onSharedPreferenceChanged(SharedPreferences prefs,
            String key) {

        String speed = prefs.getString("animate_speed", "one");

        String country_flag = prefs.getString("country", "English");

        String country_values[] = getResources().getStringArray(
                R.array.country_values);

        // Comparing with preference value and array value

        for (int i = 0; i < country_values.length; i++) {

            if (country_values[i].equalsIgnoreCase(country_flag)) {

                country_counter = i + 1;

            }

        }

        if (speed.equals("one")) {

            // Default
            two = new pix11two(getBaseContext(), 7, country_counter);

            draw();

        } else if (speed.equals("two")) {

            // Slowest
            two = new pix11two(getBaseContext(), 2, country_counter);
            draw();
        } else if (speed.equals("three")) {

            // Slow
            two = new pix11two(getBaseContext(), 4, country_counter);
            draw();
        } else if (speed.equals("four")) {

            // Fast

            two = new pix11two(getBaseContext(), 14, country_counter);
            draw();
        } else if (speed.equals("five")) {

            // Fastest

            two = new pix11two(getBaseContext(), 18, country_counter);
            draw();
        }
    }

    @Override
    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);
        setTouchEventsEnabled(true);
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        mVisible = false;
        mHandler.removeCallbacks(mDrawPattern);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mHandler.removeCallbacks(mDrawPattern);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        mVisible = visible;
        if (visible) {
            draw();
        } else {
            mHandler.removeCallbacks(mDrawPattern);
        }
    }

    @Override
    public void onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {

        }
        super.onTouchEvent(event);
    }

    private void draw() {
        final SurfaceHolder holder = getSurfaceHolder();
        Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {

                two.render(c);
                two.update();
            }
        } catch (Exception e) {
        } finally {
            if (c != null)
                holder.unlockCanvasAndPost(c);
        }
        mHandler.removeCallbacks(mDrawPattern);
        if (mVisible) {
            mHandler.postDelayed(mDrawPattern, 1000 / 75);
        }

    }

} 
```

}

我没有展示pixelthree类，但我认为两个类足以解决这个问题。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:20:05.553

似乎内存不足错误。尝试减少位图的内存。[选中此项](https://stackoverflow.com/questions/2641726/decoding-bitmaps-in-android-with-the-right-size/10868883#10868883)将帮助您优化位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:15:50.157

我已经尝试将样本量减少到 2，它对我有用..

BitmapFactory.Options 选项 = 新 BitmapFactory.Options();

```
options.inSampleSize = 2;

options.inPurgeable = true 
```

# java - Java：显示进度监视器和子进度监视器的进度

> ID：12156850
> 
> 赞同：2
> 
> 时间：2012-08-28T09:57:43.410
> 
> 标签：java, eclipse, monitor, progress

嗨，我实现了“org.eclipse.core.runtime”的 IProgressMonitor 和 SubProgressMonitor。进度监视器正在工作，但我的问题是它没有像我想要的那样显示进度。在完成之前它没有显示任何进展。我会给你代码示例。

```
 try {
            PlatformUI.getWorkbench().getProgressService().
            busyCursorWhile(new IRunnableWithProgress() {

                @Override
                public void run(IProgressMonitor monitor) throws InvocationTargetException,
                        InterruptedException {
                    // TODO Auto-generated method stub
                    try{

                        monitor.beginTask("Operation in Progress...", ticks);

                        for(int i = 0;  i < getCompilationUnit().size(); i++){

                            try {
                                IType type = getCompilationUnit().get(i).findPrimaryType();

                                IType[] types = getCompilationUnit().get(i).getTypes();

                                if(monitor.isCanceled())
                                    throw new OperationCanceledException();

                                updateListPrimaryType(type, totalNumberOfCode, types);
                                monitor.worked(1/ticks);

                                IMethod[] method = type.getMethods();
                                int work = method.length;
                                updateListIMethod(method);
                                monitor.worked(1/ticks);

                                updateListMethodAttributeMember(type,new SubProgressMonitor(monitor, (1/ticks)));           
                                updateListMember(type,types);
                                monitor.worked(1/ticks);

                            } catch (JavaModelException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }

                    }finally{
                        monitor.done();
                    }
                }
            }); 
```

这是方法 updateListMethodAttributeMember 的代码：

```
 private void updateListMethodAttributeMember(IType type,SubProgressMonitor subProgressMonitor) {
    // TODO Auto-generated method stub      
    ClassList tmp;
    try{

        IMethod[] method = type.getMethods();
        IField[] field = type.getFields();

        subProgressMonitor.beginTask("Operation in Progress...", method.length);
        for(int m = 0; m < method.length; m++){
            String methodName = getSubstringName(method[m].toString());

            IMethod met = method[m];
            tmp = new ClassList(className, methodName, path);

            if(!met.isConstructor() || !met.isMainMethod()){
                try {
                    int number = performIMethodSearch(met);
                    tmp.setNumberOfCalls(number);
                } catch (CoreException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            subProgressMonitor.worked(1/method.length);
            getMethodClassList().add(tmp);
        }

        for(int f = 0; f < field.length; f++){
            String attributeName = getSubstringName(field[f].toString());
            tmp = new ClassList(className, attributeName, path);
            String parent = field[f].getParent().getElementName().toString();
            String description = "Parent Class: " + parent;
            tmp.setDataDescription(description);
            getAttributeClassList().add(tmp);
        }

    } catch (JavaModelException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        subProgressMonitor.done();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:38:17.110

working() 方法采用一个整数作为工作单元的数量。看起来您正在传递一个四舍五入为 0 的浮点值，因此对进度条没有任何更改。更改您的 working() 调用以传入 1，您应该会看到正确的进度。

# datagridview - 用我的方法更新datagridview？

> ID：12156861
> 
> 赞同：0
> 
> 时间：2012-08-28T09:58:24.790
> 
> 标签：datagridview

以下是将“datagridview”中所做的更改保存到我的数据库的代码。但是代码只是将最后一条记录的值复制到所有其他记录中。

问题是什么？

```
 public void update_tbl(string tbl_name)
    {
         try
        {
            foreach(DataGridViewRow row in dgv1.Rows)
            {
                cn.Open();
                cmd.CommandText = "update [" + tbl_name + "] set tf='" + row.Cells[1].Value.ToString()+"'";
                cmd.ExecuteNonQuery();
                cn.Close();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            this.Close();
            cn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:14:20.057

更改以下代码行并添加 where 子句

你的代码：

```
cmd.CommandText = "update [" + tbl_name + "] set tf='" + row.Cells[1].Value.ToString()+"'"; 
```

预期代码：

```
 cmd.CommandText = "update [" + tbl_name + "] set tf='" + row.Cells[1].Value.ToString()+"' where SomeUniqueField=" + row.Cells[0].Value.ToString(); 
```

上面的代码

# opengl - NvTriStripe: Generates stripes with duplicate indices

> ID：12156868
> 
> 赞同：1
> 
> 时间：2012-08-28T09:58:50.803
> 
> 标签：opengl, graphics, opengl-es, 3d, directx

Using NvTriStrip library from Nvidia, [http://www.nvidia.in/object/nvtristrip_library.html](http://www.nvidia.in/object/nvtristrip_library.html)

I was trying to use NVTriStriper for creating triangle stripes from triangle indices. But, seems it does not work perfectly.

The following is the input indices,

```
PrimitiveGroup *pPrimitiveGroup = NULL;
uint16 NbGroups;
uint16 ind[] = {1, 2, 3, 1, 3, 4, 0, 1, 4, 5, 0, 4, 61, 0, 5, 60, 61, 5, 59, 60, 5, 59, 5, 6, 6, 58, 59, 57, 58, 6, 7, 57, 6, 56, 57, 7, 8, 56, 7, 21, 56, 8, 21, 8, 9, 9, 20, 21, 19, 20, 9, 18, 19, 9, 18, 9, 10, 18, 10, 17, 11, 17, 10, 16, 17, 11, 16, 11, 15, 15, 11, 12, 15, 12, 14, 14, 12, 13, 21, 22, 56, 22, 55, 56, 22, 54, 55, 23, 54, 22, 53, 54, 23, 53, 23, 24, 52, 53, 24, 36, 52, 24, 36, 24, 25, 35, 36, 25, 25, 26, 35, 27, 35, 26, 27, 34, 35, 34, 27, 33, 33, 27, 28, 32, 33, 28, 31, 32, 28, 28, 30, 31, 30, 28, 29, 51, 52, 36, 37, 51, 36, 37, 50, 51, 37, 49, 50, 37, 48, 49, 48, 37, 38, 48, 38, 47, 39, 47, 38, 47, 39, 46, 46, 39, 45, 45, 39, 40, 44, 45, 40, 44, 40, 41, 43, 44, 41, 43, 41, 42};
uint16 count=180;
GenerateStrips(ind, count, &pPrimitiveGroup, &NbGroups, true); 
```

The output generated is,

```
NbGroups = 1
(*pPrimitiveGroup).numIndices = 101 
```

And stripe indices as follows,

```
outputIndices={10, 10, 17, 11, 16, 11, 15, 12, 14, 13, 13, 54, 54, 54, 22, 55, 22, 56, 21, 8, 21, 9, 20, 9, 19, 9, 18, 10, 17, 17, 2, 2, 2, 3, 1, 4, 0, 5, 61, 5, 60, 5, 59, 6, 58, 6, 57, 7, 56, 8, 8, 24, 24, 24, 36, 25, 35, 26, 35, 27, 34, 27, 33, 28, 32, 28, 31, 28, 30, 29, 29, 42, 42, 43, 41, 44, 40, 45, 39, 46, 39, 47, 38, 48, 37, 37, 48, 48, 37, 49, 37, 50, 37, 51, 36, 52, 24, 53, 23, 54, 22} 
```

Now, with this out as you can see, there are triangles with indices such as (56, 8, 8), this results in rendering lines and not triangles.

Anyone aware of such problems in NVTriStrip?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:19:25.697

> there are triangles with indices such as (56, 8, 8), this results in rendering lines and not triangles.

No, they result in rendering *nothing*. The triangle rasterizer renders the *area* of a triangle; a triangle composed of 2 points has no area and therefore is not rendered.

And yes, this is expected. That's how NVTriStrip *works*. This is a common technique called "stitching": multiple triangle strips are tied together with degenerate triangles (triangles with no area). This is what allows you to draw the entire model with a single `glDrawElements` call (or `DrawIndexedPrimitive`, if you use that).

# c# - 无法将 HttpWebResponse.GetResponseStream() 分配给 Stream

> ID：12156873
> 
> 赞同：0
> 
> 时间：2012-08-28T09:59:16.687
> 
> 标签：c#, .net, json, stream, webclient

我得到**jsonstream.Length** 在尝试时抛出了 System.NotSupportedException 类型的异常错误：

```
 HttpWebRequest jsonHTTPRequest = (HttpWebRequest)WebRequest.Create(jsonRequestURL);
        jsonHTTPRequest.ContentType = "application/json; charset=utf-8";

        HttpWebResponse jsonHTTPResponse = (HttpWebResponse)jsonHTTPRequest.GetResponse();
        RootObject vikiRootObject = default(RootObject);

        using (Stream jsonstream = jsonHTTPResponse.GetResponseStream())
        {
            //encoding encode = system.text.encoding.getencoding("utf-8");
            DataContractJsonSerializer serializer =
                                     new DataContractJsonSerializer(typeof(RootObject));
            vikiRootObject = (RootObject)serializer.ReadObject(jsonstream);
        } 
```

也尝试了 Webclient 但仍然是同样的错误。**这是因为响应量大吗？？？**

请求网址为： http: [//www.viki.com/api/v2/channels.json](http://www.viki.com/api/v2/channels.json)

```
WebClient webClient = new WebClient();
                RootObject vikiChannelData = default(RootObject);
                webClient.OpenReadAsync(new Uri(jsonRequestURL), UriKind.RelativeOrAbsolute);

                webClient.OpenReadCompleted += (obj, Args) =>
                    {
                        //DataContractJsonSerializer vikiChannelerialized = new DataContractJsonSerializer(typeof(RootObject),null);
                        DataContractJsonSerializer vikiChannelerialized = new DataContractJsonSerializer(typeof(RootObject));
                        vikiChannelData = vikiChannelerialized.ReadObject(Args.Result) as RootObject;
                        Console.WriteLine();
                    }; 
```

**编辑：** 我尝试使用 LINQ：

```
var RootObjects = from vikiroot in vikiRootObject
                                  select new Thumbnails2
                                  {
                                      thumbnails = vikiRootObject.thumbnails
                                  }; 
```

> 但是遇到错误，找不到源类型对象的查询模式的实现。选择未找到。

我的班级结构是这样的：

```
 public class RootObject
    {
        public int id { get; set; }
        public string title { get; set; }
        public string description { get; set; }
        public string uri { get; set; }
        public List<Episode> episodes { get; set; }
        public Thumbnails2 thumbnails { get; set; }
        public string timestamp { get; set; }
        public List<object> genres { get; set; }
        public string origin_code { get; set; }
    } 
```

和

```
public class Thumbnails2
    {
        public string c_220_160 { get; set; }
        public string c_102_102 { get; set; }
        public string c_180_130 { get; set; }
        public string c_110_80 { get; set; }
        public string xl { get; set; }
        public string large { get; set; }
        public string medium { get; set; }
        public string small { get; set; }
        public string c_320_300 { get; set; }
        public string c_640_600 { get; set; }
        public string c_95_70 { get; set; }
        public string c_190_140 { get; set; }
        public string c_280_200 { get; set; }
        public string c_560_400 { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:49:39.923

您返回的 json 不是单个对象，而是一个数组。由于您还没有发布您的 RootObject 和其他子类（我懒得声明它们），我将使用[Json.Net](http://json.codeplex.com/)和`dynamic`关键字

```
using (var wc = new WebClient())
{
    var json = wc.DownloadString("http://www.viki.com/api/v2/channels.json");
    dynamic dynObj = JsonConvert.DeserializeObject(json);

    foreach (var item in dynObj)
    {
        Console.WriteLine(item.title);
        foreach (var episode in item.episodes)
        {
            Console.WriteLine("\t" + episode.title);
        }
    }

} 
```

**编辑**

```
using (var wc = new WebClient())
{
    var json = wc.DownloadString("http://www.viki.com/api/v2/channels.json");
    var rootObj = JsonConvert.DeserializeObject<RootObject[]>(json);

    var obj = rootObj.Select(r=>new 
                    {
                        Title = r.title,
                        Thumbnail = r.thumbnails.small
                    });
} 
```

![在此处输入图像描述](../Images/16e3e2e364a15f232fc203ec2191b26a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:49:43.567

你试过这个吗？

```
using (StreamReader reader = new StreamReader(jsonHTTPResponse.GetResponseStream()))
        {
             //your code goes here
        } 
```

实际上这应该在评论中，但我无法添加。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T12:12:44.000

尝试通过将其复制到内存流中来执行以下操作，以便能够读取 Stream：

```
using (Stream jsonstream = jsonHTTPResponse.GetResponseStream()) 
        { 
            DataContractJsonSerializer serializer = 
                                     new DataContractJsonSerializer(typeof(RootObject)); 

             using (MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(jsonstream)))
            {
                vikiRootObject = (RootObject)serializer.ReadObject(jsonstream); 

                using (MemoryStream ms2 = new MemoryStream())
                {
                    ser.WriteObject(ms2, vikiRootObject);
                    string serializedJson = Encoding.UTF8.GetString(ms2.GetBuffer(), 0, (int)ms2.Length);
                }
            }

 } 
```

# c# - 我需要用 c# 中的 new 初始化一个列表吗？

> ID：12156875
> 
> 赞同：1
> 
> 时间：2012-08-28T09:59:23.790
> 
> 标签：c#

我有以下课程：

```
public class CityDetailViewModel
{
    public IEnumerable<City.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
} 
```

在我的代码中，我有：

```
 public ActionResult getGrid(string pk, string rk) {
        var ms = new List<long>();
        var sw = Stopwatch.StartNew();
        var vm = new CityDetailViewModel(); 
```

我想将变量 ms 放入我的 CityDetailViewModel 类中。

```
public class CityDetailViewModel
{
    public IEnumerable<City.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
    public List<long> MS { get; set; }
} 
```

这是正确的方法吗。我不确定，但我需要使用“新”。同样在我的代码中，我使用以下命令添加到列表中：

```
ms.Add(sw.ElapsedMilliseconds); 
```

如果它是 CityDetailViewModel 的一部分，我仍然可以使用：

```
MS.Add(sw.ElapsedMilliseconds); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:04:42.500

当您创建 的新实例时`CityDetailViewModel`，该成员`MS`将为`null`，因此调用`Add`它会引发`NullReferenceException`.

您可以`List<long>`在类的构造函数中创建一个新的，或者在它之外创建一个新的

```
public class CityDetailViewModel
{
     ...

     public CityDetailViewModel()
     {
         this.MS = new List<long>();
     }
}

public ActionResult getGrid(string pk, string rk) {
    var sw = Stopwatch.StartNew();
    var vm = new CityDetailViewModel();
    ...
    vm.MS.Add(sw.ElapsedMilliseconds); 
```

或者

```
public ActionResult getGrid(string pk, string rk) {
    var ms = new List<long>();
    var sw = Stopwatch.StartNew();
    var vm = new CityDetailViewModel() { MS = ms };
    ...
    ms.Add(sw.ElapsedMilliseconds); 
```

因为`ms`和`vm.MS`将是相同的列表实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T10:03:43.637

是的，您需要初始化您的列表——我建议使用这些自动属性在构造函数中执行此操作。通过这种方式，您可以制作`set`列表的 -ter，`private`因为没有人应该能够从您的班级外部重新初始化列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T10:02:51.930

如果您不初始化列表，它将是`null`，并且尝试调用`Add`它会导致`NullReferenceException`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T10:08:46.893

是的，您可以通过这种方式访问​​ MS 属性。

您需要注意的是 MS 列表的初始化。所以在列表初始化模型构造函数。否则你会得到 NullReferenceExceptions。

我假设您正在使用数据源数据填充 Detail 和其他 SelectList，并且在没有初始化的情况下也不会直接访问它们。

```
public class CityDetailViewModel
{
    public IEnumerable<City.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
    public List<long> MS { get; set; }

    public CityDetailViewModel() 
    {
        MS = new List<long>();
    }
} 
```

您必须在构造函数中执行此操作的原因是您正在使用自动属性。如果您改用支持属性，则可以在构造函数之外初始化该属性。

像这样

```
public class CityDetailViewModel
{
    public IEnumerable<City.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
    private List<long> _ms = new List<long>();
    public List<long> MS { 
        get { return _ms; }
        set { _ms = value; }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:11:15.467

尝试使用这样的 ctor 扩展 CityDetailViewModel：

```
public class CityDetailViewModel
{
    public IEnumerable<City.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
    public List<long> MS { get; set; }

    public CityDetailViewModel (){
        MS = new List<long>();
    }
} 
```

然后你可以做

```
public ActionResult getGrid(string pk, string rk) {
    var vm = new CityDetailViewModel();
    var sw = Stopwatch.StartNew();
    vm.MS.Add(sw);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T10:13:26.027

getGrid 方法中的初始化可以通过将 ms 变量传递给 CityDetailViewModel 来实现

```
public ActionResult getGrid(string pk, string rk) {
    var ms = new List<long>();
    var sw = Stopwatch.StartNew();
    var vm = new CityDetailViewModel { MS = ms }; 
```

ms 确实需要在被传递之前实例化，否则调用`vm.MS.Add(sw.ElapsedMilliseconds)`将导致`NullReferenceException`.

# java - 来自mysql的jooq错误日期

> ID：12156877
> 
> 赞同：1
> 
> 时间：2012-08-28T09:59:26.923
> 
> 标签：java, mysql, datetime, jooq

我正在使用[jOOQ](http://www.jooq.org)从 MySql 数据库中读取数据。我正在阅读类型为“日期”的列。当我打印结果集日期是错误的。可能是什么原因？

```
Database Date        =>  2010-08-14
jOOQ result set Date =>  2010-08-13 
```

这是查询=>

```
f.select()
 .from(dal.jooq.Tables.INVOICES)
 .where(dal.jooq.Tables.INVOICES.CARRIER_ID
   .equal(UInteger.valueOf(carrier_id)))
 .and(dal.jooq.Tables.INVOICES.INVOICE_DATE.greaterOrEqual(sstart))
 .fetch(); 
```

# iphone - 将值从一个视图控制器传递到另一个视图控制器的问题

> ID：12156889
> 
> 赞同：0
> 
> 时间：2012-08-28T10:00:18.370
> 
> 标签：iphone, ipad

我有一个视图控制器。我在按钮操作上添加了 popoverviewcontroller 并加载了另一个具有 uitableview 控制器的视图控制器。当我在 tableview 控制器中选择一个值时，我无法将所选值传递给 firstviewcontroller。

该值将作为 null

第二个 ViewController 有 UITableview

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    [[NSNotificationCenter defaultCenter] postNotificationName:@"RemovePopOverController" object:self];
    selectedValue =   [titleArray objectAtIndex:indexPath.row];

} 
```

第一视图控制器

```
-(void)removePopOver:(id)sender{

    [self->popoverController dismissPopoverAnimated:YES];

    NSString *value = m_titleViewController.selectedValue; 

  NSLog(@" Value is %@", value);
} 
```

我不想使用 NSUserDefault。请为我提供解决此问题的方法！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:03:28.273

您在设置值之前发布通知。尝试这样做：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    selectedValue =   [titleArray objectAtIndex:indexPath.row];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"RemovePopOverController" object:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:14:14.770

使用**委托**来满足您的要求，因为在这种情况下使用而不是发布通知是最好的做法。

请参阅[simple-delegate-tutorial-for-ios-development](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)链接。希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T10:08:08.783

然后你可以使用另一种方法这样：

在 Appdelegate 中创建一个字符串（例如：stringValue）

首先将您的价值保存到您的 Appdelegate 中：

```
 Appdelegate *appdell=[[UIApplication sharedApplication]delegate];
    appdell.stringValue=@"Your Value Goes Here"; 
```

任何时候你都可以得到这个值。

```
Appdelegate *appdell=[[UIApplication sharedApplication]delegate];

requiredvalue=appdell.stringValue; 
```

# android - 从 ImageView 旋转后获取图像

> ID：12156891
> 
> 赞同：0
> 
> 时间：2012-08-28T10:00:27.440
> 
> 标签：android, bitmap, imageview

在这个问题[ImageView will reset to original state after rolling](https://stackoverflow.com/questions/12156171/imageview-will-reset-to-original-state-after-rotating)中，我知道如何旋转 imageView 并在旋转后保持它。

但是现在，我需要根据旋转后的图像进行一些缩放。缩放时，图像会在旋转之前重置为原始图像，这不是我想要的。

所以我想在旋转后从 ImageView 中获取位图，并让 ImageView 使用新的。问题是：

旋转后如何从 ImageView 中获取位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:07:45.090

从 imageview 获取位图：

```
 imageview.buildDrawingCache();
    Bitmap bm=imageview.getDrawingCache(); 
```

要将其保存在文件中：

```
OutputStream fOut = null;
    Uri outputFileUri;
     try {
    File root = new File(Environment.getExternalStorageDirectory()
      + File.separator + "folder_name" + File.separator);
    root.mkdirs();
   File sdImageMainDirectory = new File(root, "myPicName.jpg");
    outputFileUri = Uri.fromFile(sdImageMainDirectory);
    fOut = new FileOutputStream(sdImageMainDirectory);
   } catch (Exception e) {
    Toast.makeText(this, "Error occured. Please try again later.",
      Toast.LENGTH_SHORT).show();
   }

   try {
    bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);
    fOut.flush();
    fOut.close();
   } catch (Exception e) {
   } 
```

# android - Android中的SDK管理器错误？

> ID：12156894
> 
> 赞同：0
> 
> 时间：2012-08-28T10:00:31.510
> 
> 标签：android

当我打开 Eclipse 时，我收到一个消息框，其中包含特定错误。**所以我确实从LocalDisk C的****Android**文件夹中卸载了 Android 。在我重新安装 Eclipse 并重新插入 ADT 后，当时它询问 Eclipse 重启。重启后打开 Eclipse 时，我在下面看到了相同的消息框。

 **![Eclipse 错误消息框][2]

**如何解决这个问题呢 ？**

![在此处输入图像描述](../Images/d8a1a29cddf0211279c088318cbe15b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:09:18.343

首先更新您的 ADT 插件 转到帮助并单击检查更新并检查以下链接以获取更多信息。

[更新 ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)**

# iphone - 在视图控制器之间切换时自动旋转

> ID：12156896
> 
> 赞同：3
> 
> 时间：2012-08-28T10:00:47.263
> 
> 标签：iphone, ios, xcode, ipad

我在编程时遇到问题。我有两个视图控制器。第一个只在横向左/右运行，另一个只在纵向运行。如果我在视图之间切换，方向不会自动改变。只有当我转动设备时，方向才会改变。之后，方向是固定的。在控制器之间切换时是否可以自动更改方向？

例如，当我按下横向视图控制器中的后退按钮并切换到纵向视图控制器时，方向会自动从横向切换到纵向？

对不起我的英语不好，这不是我的母语。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:14:40.057

在第二个视图中尝试以下肖像代码。

```
- (void)viewWillAppear:(BOOL)animated {
    [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];

} 
```

在第一视图中尝试以下横向代码。

```
 - (void)viewWillAppear:(BOOL)animated {
        [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscape];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:26:46.930

```
if(UIDeviceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation))
{
  self.view.frame = CGRectMake(0,0,1024,768);
}
 else
{
  self.view.frame = CGRectMake(0,0,768,1024);
} 
```

----在你想改变的地方使用这个代码---

# c++ - OBJ、缓冲区对象和面部索引

> ID：12156901
> 
> 赞同：4
> 
> 时间：2012-08-28T10:00:52.383
> 
> 标签：c++, opengl, render, wavefront

我最近在让顶点缓冲区对象工作方面取得了很大进展。所以我转向元素数组，我想通过这样的实现，我可以从 obj 加载顶点和面数据。

我不太擅长用 C++ 读取文件，所以我写了一个 python 文档来解析 obj 并编写 2 个单独的 txt 来给我一个顶点数组和面索引，并将它们直接粘贴到我的代码中。这就像 6000 行，但它可以工作（没有编译错误）。这就是它的样子

![](../Images/b638e876b2f6061aeecaa4d7ce5d3876.png).

我认为他们错了。我不知道。顶点和面的顺序并没有改变，只是从 obj 中提取出来的，因为我还没有用于缓冲区对象的法线或纹理。如果你看立方体，我会这样做，但不是真的。

这是[渲染代码](http://pastebin.com/MTN0mn3i)

```
void Mesh_handle::DrawTri(){
    glBindBuffer(GL_ARRAY_BUFFER,vertexbufferid);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,elementbufferid);
    int index1=glGetAttribLocation(bound_program,"inputvertex");
    int index2=glGetAttribLocation(bound_program,"inputcolor");
    int index3=glGetAttribLocation(bound_program,"inputtexcoord");

    glEnableVertexAttribArray(index1);
    glVertexAttribPointer(index1,3,GL_FLOAT,GL_FALSE,9*sizeof(float),0);

    glEnableVertexAttribArray(index2);
    glVertexAttribPointer(index2,4,GL_FLOAT,GL_FALSE,9*sizeof(float),(void*)(3*sizeof(float)));

    glEnableVertexAttribArray(index3);
    glVertexAttribPointer(index3,2,GL_FLOAT,GL_FALSE,9*sizeof(float),(void*)(7*sizeof(float)));

    glDrawArrays(GL_TRIANGLE_STRIP,0,elementcount);
    //glDrawElements(GL_TRIANGLE_STRIP,elementcount,GL_UNSIGNED_INT,0);
} 
```

我的python解析器只是将信息写入文件：[source](http://pastebin.com/6GYht7g9)

对象是英雄联盟的伊泽瑞尔

我不确定我是否看错了这些面孔，或者它们是否甚至不是我认为的那样。我想使用`GL_TRIANGLE_STRIP`还是别的什么。任何提示或请求更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:04:12.657

obj 文件中的索引是基于 1 的，因此您必须从所有索引中减去 1 才能将它们与 OpenGL 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:22:40.077

首先，正如 Andreas 所说，.obj 文件使用基于 1 的索引，因此您需要将它们转换为基于 0 的索引。

第二：

```
glDrawArrays(GL_TRIANGLE_STRIP,0,elementcount);
//glDrawElements(GL_TRIANGLE_STRIP,elementcount,GL_UNSIGNED_INT,0); 
```

除非您做了一些特殊的工作来将您在 .obj 文件中提供的人脸列表变成三角形*条带*，否则您没有三角形条带。你应该渲染`GL_TRIANGLES`，而不是条带。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-29T15:55:30.013

从图像中可以肯定你的verticies被搞砸了。看起来您在 glGetAttribLocation 中指定了 9*sizeof(float) 的步幅，但从我从您的代码中可以看出，您的数组非常紧凑。

```
glEnableVertexAttribArray(index1);
glVertexAttribPointer(index1,3,GL_FLOAT,GL_FALSE,0,0); 
```

还从颜色/纹理坐标中删除步幅。

# common-lisp - `eval-when` 的意外行为

> ID：12156902
> 
> 赞同：2
> 
> 时间：2012-08-28T10:00:55.080
> 
> 标签：common-lisp, slime, ccl

对于运行 SLIME 的 CCL，以下 CL 代码片段无法正常工作。如果我首先使用 编译和加载文件`C-c C-k`，然后运行

```
(rdirichlet #(1.0 2.0 3.0) 1.0) 
```

在 SLIME/CCL REPL 中，我收到错误

```
value 1.0 is not of the expected type DOUBLE-FLOAT.
   [Condition of type TYPE-ERROR] 
```

它适用于 SBCL。我希望`(setf *read-default-float-format* 'double-float))`允许我使用像`1.0`. `LOAD`如果我使用REPL将此文件加载到 CCL 中，它可以工作。我错过了什么？

```
(eval-when (:compile-toplevel :load-toplevel :execute)
  (require :asdf) (require :cl-rmath) (setf *read-default-float-format* 'double-float))

(defun rdirichlet (alpha rownum)
  ;;(declare (fixnum rownum))
  (let* ((alphalen (length alpha))
    (dirichlet (make-array alphalen :element-type '(double-float 0.0 *) :adjustable nil :fill-pointer nil :displaced-to nil)))
    (dotimes (i alphalen)
      (setf (elt dirichlet i) (cl-rmath::rgamma (elt alpha i) rownum)))
    ;; Divide dirichlet vector by its sum
    (map 'vector #'(lambda (x) (/ x (reduce #'+ dirichlet))) dirichlet))) 
```

更新：我忘了提及我的平台和版本。我正在使用 Debian 挤压 x86。SLIME 的版本来自 Debian 不稳定，`1:20120525-2`. CCL 是 1.8 版本。我尝试了来自[http://svn.clozure.com/publicsvn/openmcl/release/1.8/linuxx86/ccl](http://svn.clozure.com/publicsvn/openmcl/release/1.8/linuxx86/ccl)的上游二进制文件和我创建的二进制包 - 请参阅[package ccl at advisors.debian.net](http://mentors.debian.net/package/ccl)。结果在每种情况下都是相同的。

这个问题似乎很可能是特定于 SLIME 的。如果人们可以评论他们是否看到这种行为，那将会很有帮助。`C-c C-k`另外，如果在基本命令行模式下运行 CCL，那么在 SLIME中的等价物是什么？`(LOAD filename)`， 或者是其他东西？或者，问一个稍微不同的问题，调用什么 CCL 函数`C-c C-k`？

我注意到调用`C-c C-k`以下代码

```
(eval-when (:compile-toplevel :load-toplevel :execute)
      (require :asdf) (require :cl-rmath) (setf *read-default-float-format* 'double-float))

(print *read-default-float-format*) 
```

产生`DOUBLE-FLOAT`，尽管`*read-default-float-format*`在 REPL 之后立即给出`SINGLE-FLOAT`。

更新 2：正如 Rainer 所说，看起来编译发生在一个单独的线程中。

[根据线程字典](http://ccl.clozure.com/ccl-documentation.html#Threads-Dictionary)`all-processes`中的函数

`all-processes`使用 Cc Ck 从缓冲区打印给出

```
(#<PROCESS worker(188) [Active] #x18BF99CE> #<PROCESS repl-thread(12) [Semaphore timed wait] #x187A186E> #<PROCESS auto-flush-thread(11) [Sleep] #x187A1C9E> #<PROCESS swank-indentation-cache-thread(6) [Semaphore timed wait] #x186C128E> #<PROCESS reader-thread(5) [Active] #x186C164E> #<PROCESS control-thread(4) [Semaphore timed wait] #x186BE3BE> #<PROCESS Swank Sentinel(2) [Semaphore timed wait] #x186BD0D6> #<TTY-LISTENER listener(1) [Active] #x183577B6> #<PROCESS Initial(0) [Sleep] #x1805FCCE>)
CL-USER> (all-processes) 
```

在 REPL 中给出

```
(#<PROCESS repl-thread(12) [Active] #x187A186E> #<PROCESS auto-flush-thread(11) [Sleep] #x187A1C9E> #<PROCESS swank-indentation-cache-thread(6) [Semaphore timed wait] #x186C128E> #<PROCESS reader-thread(5) [Active] #x186C164E> #<PROCESS control-thread(4) [Semaphore timed wait] #x186BE3BE> #<PROCESS Swank Sentinel(2) [Semaphore timed wait] #x186BD0D6> #<TTY-LISTENER listener(1) [Active] #x183577B6> #<PROCESS Initial(0) [Sleep] #x1805FCCE>) 
```

所以似乎`#<PROCESS worker(188) [Active] #x18BF99CE>`是正在编译的线程。当然，仍然存在为什么这些变量是线程本地的，以及为什么 SBCL 的行为方式不同的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:03:27.583

我也可以通过 CCL 和一些较旧的（我使用的）SLIME 看到这一点。还没有尝试过使用更新的 SLIME。

SBCL 或 LispWorks 不会发生这种情况。

`*read-default-float-format*`是 Common Lisp 的 I/O 变量之一。类似的东西`WITH-STANDARD-IO-SYNTAX`将它们绑定到标准值，并在退出时恢复以前的值。所以我怀疑 CCL 的 SLIME 代码具有这样的绑定效果。这可以通过设置其他 I/O 变量来确认`*read-base*`- 它们也被绑定。

CCL、Emacs 和 SLIME 有一些代码层，这使得调试它有点复杂。

*   Emacs 运行 SLIME 的 ELISP 代码并与 SWANK 对话。
*   SWANK 是 SLIME 的后端，是在 CCL 中运行的 Common Lisp 代码。
*   SWANK 有可移植的代码和一些 CCL 特定的代码。

在 Emacs 端，`SLIME-COMPILE-AND-LOAD-FILE`使用了 SLIME/ELISP 函数。

在 SWANK 端`swank:compile-file-for-emacs`调用 Common Lisp 函数。后来`SWANK:LOAD-FILE`被叫了。

我看不到 I/O 变量的绑定位置 - 也许它在 CCL 网络代码中？

**这似乎是答案**：

如果 CCL 具有线程本地 I/O 变量，则编译发生在另一个线程中，并且不会更改 REPL 线程中的 I/O 绑定，也不会更改任何其他线程中的 I/O 绑定。

这是各种 CL 实现之间的差异。由于 CL 标准没有指定线程或*进程*，因此也没有指定特殊绑定是全局的还是默认具有线程局部绑定...

如果您考虑一下，保护线程的 I/O 变量免受其他线程的更改是有意义的……

因此，处理它的正确方法应该是确保在每个线程中独立地确保正确的 I/O 变量值有效。

* * *

让我稍微扩展一下为什么事情会像现在这样。

通常一个 Common Lisp 实现可以运行多个线程。一些实现还允许并发线程同时在不同的内核上运行。这些线程可以做非常不同的事情：一个可以运行 REPL，另一个可以响应 HTTP 请求，一个可以从磁盘加载数据，另一个可以读取电子邮件的内容。在这种情况下，Lisp 在一个 Lisp 系统中运行多个不同的任务。

Lisp 有几个变量决定了 I/O 操作的行为。例如，读取时使用哪种格式的浮点数或读取时使用哪种基整数。这封信是由` *read-base*完成的。

`*read-base*`现在想象一下，上面的磁盘读取线程出于某种目的将其设置为 16。现在您将另一个线程中的全局更改为 8，然后突然所有其他线程都以 8 为基数。结果：磁盘读取线程将突然看到`*read-base*`8 而不是 16，并且工作方式不同。

因此，以某种方式防止这种情况是有意义的。最简单的是，在每个线程中，运行代码都有自己的 I/O 值绑定，然后更改`*read-base*`不会对其他线程产生影响。这些绑定通常由`LET`函数调用或函数调用引入。通常，代码将负责绑定变量。

另一种防止它的方法是给每个线程一些初始绑定，例如应该包括 I/O 绑定。CCL 就是这样做的。例如，LispWorks 也这样做。但不适用于 I/O 变量。

现在每个 Lisp 都可能为您提供一种不可移植的方式来更改线程局部顶部绑定（CCL 也有这种方式 - 例如`(setf ccl:symbol-value-in-process)`）。但这并不意味着它可能会改变 REPL 中有效的绑定。由于 REPL 本身是一段 Lisp 代码，在线程中运行，它可能已经设置了自己的绑定。

在 CCL 中，您还可以设置全局静态绑定：`(CCL::%SET-SYM-GLOBAL-VALUE sym value)`. 但是如果你使用这样的功能，你可能做错了什么或者你有充分的理由。

CCL 的一些背景：http: [//clozure.com/pipermail/openmcl-devel/2011-June/012882.html](http://clozure.com/pipermail/openmcl-devel/2011-June/012882.html)

**知识**

*   不要尝试从对其他线程可见的一个线程更改全局绑定。
*   通过将关键变量绑定到正确的值来保护您的代码免受其他线程中的更改。
*   编写一个函数，以可控的方式将变量值设置为某些值。

# sql-server-2008-r2 - 将 SQL Server 2008 R2 Express 与 C# Express 2010 一起使用

> ID：12156904
> 
> 赞同：1
> 
> 时间：2012-08-28T10:01:01.630
> 
> 标签：sql-server-2008-r2, visual-c#-express-2010

想知道 SQL Server 2008 R2 Express 版本是否可以与 C# Express 2010 一起使用？尝试将“基于服务的数据库”项目添加到我的项目时出现以下错误。

请注意，我只有 SQL Server 2008 **R2** Express。

**更新 1**`MSSQLSERVER` -我检查了服务（

**实际错误：**

> *与 SQL Server 数据库文件 (.mdf) 的连接需要在本地计算机上安装并运行 SQL Server 2005 Express 或 SQL Server 2008 Express。可以从以下 URL 下载当前版本的 SQL Server Express：http: [//go.microsoft.com/fwlink/ ?LinkId=125883](http://go.microsoft.com/fwlink/?LinkId=125883)*

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:48:15.023

如消息所述，Visual C# Express 2010 不支持连接到 SQL Server 2008 R2 Express（这不是对 SQL Server 2008 Express 的升级）。你可以试试 Visual Studio 2012。

编辑：看来我的上述说法不正确。我已经对其进行了测试，并且我得到了 SQL Server 2008 R2 Express 与 Visual Studio 2010 Premium 一起使用。所以我想它也应该在 Visual C# Express 2010 中工作。

为了让它工作，我必须更改在“数据库工具”->“数据连接”下的选项中找到的“SQL Server 实例名称”。默认值为 SQLEXPRESS，但我在安装过程中将实例名称更改为 SQLEXPRESS2008R2。

# php - 初始化然后单行输出

> ID：12156905
> 
> 赞同：0
> 
> 时间：2012-08-28T10:01:02.993
> 
> 标签：php, c++

**PHP**

```
<?php 
    $x = 10; 
    echo $x = 20;
?> 
```

**C++**

```
#include<iostream>
using namespace std;

int main(){

    int x = 10;

    cout << x = 20;

    return 0;

} 
```

为什么在 php 中初始化然后在一行中输出，在 c++ 中它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:05:00.083

*   这：`cout << x = 20;`不是*初始化*。初始化是将初始值分配给变量，因此在您的情况下，它是在第一个字符串中完成的：`int x = 10;`.
*   您在 PhP 中有 2 行，而不是 1 行。
*   C++ 中发生的事情是由于运算符优先级而发生的。

运算符优先级基本上是运算符应该执行的顺序。就像在数学中 where `*`and`/`发生在`+`and之前一样`-`。

`operator<<`在 C++ 中具有比 更高的优先级`operator=`，因此它将首先执行，然后`operator=`才会发生。

[运算符优先级表](http://en.cppreference.com/w/cpp/language/operator_precedence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:04:17.053

因为运算符的优先级不同。

“运算符的优先级有时我们认为是理所当然的，特别是如果我们完全熟悉并熟悉常见算术运算符的标准优先级规则。但是过于顺从可能会使我们处于危险之中，尤其是在像 C++ 这样的语言中，运营商种类繁多，值得警惕。

作为一个简短的示例，请注意表中输入/输出运算符（>> 和 <<）的优先级高于关系运算符，但低于算术运算符的优先级。这意味着像“

[http://cs.stmarys.ca/~porter/csc/ref/cpp_operators.html](http://cs.stmarys.ca/~porter/csc/ref/cpp_operators.html)

* * *

您的 c++ 代码根本无法编译并抛出：

```
a.cpp: In function 'int main()':
a.cpp:6:17: error: no match for 'operator=' in 'std::cout.std::basic_ostream<_CharT, _Traits>::operator<< [with _CharT = char, _Traits = std::char_traits<char>](x) = 20'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.3/include/g++-v4/iosfwd:86:11: note: candidate is: std::basic_ostream<char>& std::basic_ostream<char>::operator=(const std::basic_ostream<char>&) 
```

您必须将代码括在括号中才能编译。当你这样做时，你将得到与 php 相同的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:57:26.830

它*确实*有效

```
#include<iostream> 
using namespace std;  

int main(){
      int x = 10;
      cout << (x = 20);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:47:00.083

我很惊讶它为你编译，因为`std::cout << x = 20`; 与 相同`( std::cout << x ) = 20`，且 的结果`std::cout << x`不是左值。但是，如果您希望进行这种初始化，无论如何这都是一个坏主意，您可以执行`std::cout << ( x = 20 )`. 但是请不要这样做。它使阅读源代码变得困难，并且无论如何它都不会提高性能。这种简单的优化现在由编译器完成。

# c# - 我可以从代码启动 ASP.NET MVC 服务器吗

> ID：12156911
> 
> 赞同：2
> 
> 时间：2012-08-28T10:01:24.087
> 
> 标签：c#, asp.net-mvc, host

我编写了一个 ASP.NET MVC3 站点（它包含数据模型、控制器和视图）。但我想从代码开始托管这个网站，而不是使用 IIS。
我的意思是，例如，这样的控制台应用程序：

```
int Main(string[] argv)
{
    Console.WriteLine("starting web application");
    var webStarter = new SomeWebServerStartingClass(typeof(MvcApplication), 80);
    webStarter.Run();
    Console.WriteLine("closing web application");
} 
```

在线`webStarter.Run();`网络应用程序托管在 80 端口上，用户可以从互联网访问它。

附言。我在一家开发计算机视觉软件的公司工作。我们的程序实现为 Windows 服务。现在我们需要在每个产品中创建监控模块。这个监控模块将是 asp.net mvc 项目。我想从代码开始托管它

pps。我不想使用 IIS，我只想从控制台应用程序运行这个 Web 项目。想要开始在指定端口上接收请求，就像在 IIS 中打开这个 webapp

购买力平价。也许，我想要一个可以在代码中托管网站的简单包

pppps：我阅读了关于自我托管的信息并理解了我想要的东西：我想要像 ASP.NET Web API Self-Host 这样的东西，但是对于带有 html 控制器的 MVC 应用程序

还是对不起英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:54:13.410

也许这样的产品就是您正在寻找的？

[http://ultidev.com/products/UWS-Cassini-Pro/](http://ultidev.com/products/UWS-Cassini-Pro/)

注意：我没有尝试过，但它似乎可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T19:02:51.400

几年过去了，答案并没有变得更好。:)

[如果您在 Windows 上运行， CassiniDev 目前](http://cassinidev.codeplex.com/)看起来是一个不错的选择。

OWIN+Katana 是本月的热门话题，但作为 Microsoft 支持的项目，它提出了重要的生活问题，例如“我想依赖 Microsoft 支持的开源项目吗？” 和“为什么每个示例都如此强调它'易于使用'，而它显然有点复杂？”

如果你不在 Windows 上，你就有麻烦了。我一直在寻找支持单声道和“Web 表单”（又名 aspx 页面）的自托管、可嵌入的 ASP.NET 服务器。我发现的最接近的是github 上 CassiniDev 库 (whew)[的 grendello 分支的单声道分支。](https://github.com/grendello/CassiniDev/tree/mono)这些更改*尚未*合并到 CassiniDev 主干中，我还没有尝试过，但代码看起来是正确的，主要是路径分隔符和一个 DLL 链接在不在 Windows 上时的删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T14:43:30.910

尽管这个问题相当古老，但我只想指出，使用 mono 项目中的 xsp 可以满足您的需求。

您需要的程序集是 * Mono.Security.dll * Mono.WebServer2.dll

2005 年有一篇博客文章描述了如何使用它 [http://weblogs.asp.net/britchie/archive/2005/07/25/embedding-xsp-mono-webserver-in-your-application.aspx](http://weblogs.asp.net/britchie/archive/2005/07/25/embedding-xsp-mono-webserver-in-your-application.aspx)

# java - Maven 存储库更新和维护

> ID：12156915
> 
> 赞同：0
> 
> 时间：2012-08-28T10:01:40.950
> 
> 标签：java, jakarta-ee, maven, spring-mvc, repository

我刚刚从互联网上下载了一个 Spring 教程，并试图在我的本地工作区中运行它。为此，我首先尝试获取项目所需的所有依赖 jar。我尝试了 maven build 但它失败了，因为我的本地存储库中缺少依赖的 jar 并且远程存储库（我的项目使用的那个）中也缺少这些 jar

最初，我的 settings.xml 仅引用远程存储库 url，该远程存储库 url 被各种项目在整个组织中使用。我不能指望它是最新的罐子。我可以获取各种实用程序项目的远程存储库名称，例如 Log4j、commons 日志记录、spring jar 等。然后我可以将这些存储库 URL 放在我的 setting.xml 中来解决我的问题。

编辑：我什至尝试了“http://repo1.maven.org/maven2/”，我认为它包含所有必需的最新罐子，但即使这样也行不通。

例子..

## 失踪：

1) log4j:log4j:jar:1.2.13

尝试从项目网站手动下载文件。

然后，使用以下命令安装它： mvn install:install-file -DgroupId=log4j -DartifactId=log4j \ -Dversion=1.2.13 -Dpackaging=jar -Dfile=/path/to/file

依赖路径：1) com.mkyong.core:Spring3Example:jar:1.0-SNAPSHOT 2) org.codehaus.castor:castor:jar:1.1.2.1 3) log4j:log4j:jar:1.2.13

2) xerces:xerces:jar:1.4.0

尝试从项目网站手动下载文件。

然后，使用以下命令安装它： mvn install:install-file -DgroupId=xerces -DartifactId=xerces \ -Dversion=1.4.0 -Dpackaging=jar -Dfile=/path/to/file

依赖路径：1) com.mkyong.core:Spring3Example:jar:1.0-SNAPSHOT 2) org.codehaus.castor:castor:jar:1.1.2.1 3) xerces:xerces:jar:1.4.0

3) commons-lang:commons-lang:jar:2.5

尝试从项目网站手动下载文件。

然后，使用以下命令安装它： mvn install:install-file -DgroupId=commons-lang -DartifactId=commons-lang \ -Dversion=2.5 -Dpackaging=jar -Dfile=/path/to/file

**我的 pom.xml：**

```
 <project xmlns="http://maven.apache.org/POM/4.0.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mkyong.core</groupId>
<artifactId>Spring3Example</artifactId>
<packaging>jar</packaging>
<version>1.0-SNAPSHOT</version>
<name>Spring3Example</name>
<url>http://maven.apache.org</url>

<properties>
    <spring.version>3.0.5.RELEASE</spring.version>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Uses Castor for XML -->
    <dependency>
        <groupId>org.codehaus.castor</groupId>
        <artifactId>castor</artifactId>
        <version>1.1.2.1</version>
    </dependency>

    <!-- Castor need this -->
    <dependency>
        <groupId>xerces</groupId>
        <artifactId>xercesImpl</artifactId>
        <version>2.8.1</version>
    </dependency>

</dependencies> 
```

**我的设置.xml**

```
<settings>
    <localRepository>
        C:\Repository
    </localRepository>

    <interactiveMode>true</interactiveMode>
    <offline>false</offline>

    <profiles>
            <profile>
                <id>R2</id>
                <activation>
                    <activeByDefault>true</activeByDefault>
                </activation>
                <repositories>

                    <repository>
                        <id>Log4j</id>
                        <url>http://central.maven.org/maven2</url>
                        <layout>default</layout>
                        <releases>
                            <enabled>true</enabled>
                            <updatePolicy>never</updatePolicy>
                            <checksumPolicy>warn</checksumPolicy>
                        </releases>
                        <snapshots>
                            <enabled>false</enabled>
                            <updatePolicy>never</updatePolicy>
                            <checksumPolicy>warn</checksumPolicy>
                        </snapshots>
                    </repository>                   

                </repositories>
                <pluginRepositories>
                    <pluginRepository>
                        <id>Artifact_Repository_Plugin</id>
                        <url>http://central.maven.org/maven2</url>
                        <layout>default</layout>
                        <releases>
                            <enabled>true</enabled>
                            <updatePolicy>never</updatePolicy>
                            <checksumPolicy>warn</checksumPolicy>
                        </releases>
                        <snapshots>
                            <enabled>false</enabled>
                            <updatePolicy>never</updatePolicy>
                            <checksumPolicy>warn</checksumPolicy>
                        </snapshots>
                    </pluginRepository>                                                         
                </pluginRepositories>
            </profile>
        </profiles>

        <pluginGroups>
            <pluginGroup>com.hsbc.alm.maven.plugins</pluginGroup>
            <pluginGroup>com.hsbc.alm.maven.scm</pluginGroup>
            <pluginGroup>com.hsbc.alm.maven.jr2</pluginGroup>
    </pluginGroups>

</settings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:13:25.777

是的，您走在正确的道路上，您需要做的就是这样做，或者一个好的解决方案是`generate a new archetype`使用您下载的所有添加的 jar 文件。然后每当你做一个类似的项目时使用相同的工件。

即使您缺少 m2Eclipse 插件，也可以使用以下命令。

如果您按照以下命令执行此操作，则可以实现：

> **移动到项目并键入以下命令以使项目成为原型**

`mvn archetype:create-from-project`

> **将原型安装到本地存储库**

`mvn install`

> **移动到您希望找到使用您创建的原型创建的新项目的某个目录**

`mvn archetype:generate -DarchetypeCatalog=local`

> **如果列表中填充了要过滤的数字，则进行相应选择，您就完成了。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:42:50.993

这个正在成功构建（pom.xml）：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.test.new.project</groupId>
  <artifactId>dadada</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>dadada</name>
  <url>http://maven.apache.org</url>

  <properties>
    <spring.version>3.0.5.RELEASE</spring.version>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Uses Castor for XML -->
    <dependency>
        <groupId>org.codehaus.castor</groupId>
        <artifactId>castor</artifactId>
        <version>1.1.2.1</version>
    </dependency>

    <!-- Castor need this -->
    <dependency>
        <groupId>xerces</groupId>
        <artifactId>xercesImpl</artifactId>
        <version>2.8.1</version>
    </dependency>

</dependencies>
</project> 
```

我的 settings.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>

<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <proxies>

  </proxies>

  <servers>

  </servers>

  <mirrors>

  </mirrors>

  <profiles>

  </profiles>

</settings> 
```

不确定为什么需要更改 settings.xml 是否有具体原因？

**环境信息：**

Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200) Java 版本：1.6.0_29

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T04:33:18.407

我终于能够通过在我的 settings.xml 中定义代理设置来解决 jar 下载问题。我的公司使用代理与外部世界通信。话虽如此，我还了解到，bcos maven默认不需要在settings.xml中定义特定的远程存储库，默认搜索它自己的存储库，其中大部分都有所有的开源jar。

```
 <proxies>
   <proxy>
      <active>true</active>
      <protocol>http</protocol>
      <host>xyz.hk.hsbc</host>
      <port>8080</port>       
    </proxy>
</proxies> 
```

# javascript - 如何离线存储数据库并在在线时共享到服务器？

> ID：12156917
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:01:48.150
> 
> 标签：javascript, sql, sqlite, local-storage, offline

有人可以为此推荐简单的方法或服务吗？

基本上我们有一个 iPad 应用程序，但它应该能够在离线时存储表单数据。所以我需要一个本地存储并在它重新联机时将其同步到服务器。

我们需要能够处理几千个表单输入，在这种情况下，javascript/html 是首选。

非常感谢大师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:13:45.543

[使用localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)保存它：

```
localStorage.setItem('whatever', value); 
```

每当您重新联机时，只需使用以下命令检索它：

```
localStorage.getItem('whatever'); 
```

# visual-studio - Visual Studio 2012 的 PowerCommands？

> ID：12156921
> 
> 赞同：21
> 
> 时间：2012-08-28T10:01:55.420
> 
> 标签：visual-studio, visual-studio-2012, ide, powercommands

我看到[Visual Studio 2010 的 PowerCommands 支持 Visual Studio](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99) 2012，但它最后一次更新是在 2010 年 8 月。是否有新的“PowerCommands for Visual Studio 2012”或者是否有可行的替代品？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-28T14:05:46.323

你不需要更换。如果**从 VS 2012**（工具 -> 扩展和更新）中再次安装电源命令，它将应用于 VS 2012。

从[这里](http://geekswithblogs.net/terje/archive/2012/03/22/visual-studio-amp-tfs-11-ndash-list-of-extensions-and.aspx)：

> > 只需重新安装，即使您已经为 VS2010 安装了它。然后重新安装会将其应用于 VS 11

我刚刚做到了，而且效果很好。

**编辑**

[生产力电动工具](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)

[Microsoft Visual Studio Team Foundation Server 2012 更新 1 电动工具](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)

对于 Visual Studio 2013，Power Commands 现在似乎是 Power Productivity Tools 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:05:26.380

我最终使用[VSCommands for Visual Studio 2012](http://bit.ly/PYmtXa)。这个工具提供了我需要的所有 PowerCommands 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:15:00.567

Productivity Power Tools 中的大部分内容现在已成为 VS 2012 的一部分。缺少一些项目，afaik，您特别在寻找什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T10:33:31.647

如[Productivity Power Tools 2012](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)页面所述，电源命令已添加到该插件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T21:06:14.110

从[VS Gallery](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99)下载 VS2010/2012 版本。

将 .vsix 解压缩到一个文件夹（即使用出色的[7zip](http://www.7-zip.org/download.html)），它只是一个 zip 文件。

编辑 extension.vsixmanifest 文件并在 11.0 之后添加此元素：

```
 <VisualStudio Version="12.0">
    <Edition>Pro</Edition>
  </VisualStudio> 
```

对出现的每个未来版本的 VS 重复此操作；）

现在重新压缩内容（文件，而不是根文件夹，以便扩展名.vsixmanifest 位于 zip 文件的根目录，而不是在文件夹中），将 zip 文件重命名为 .vsix，然后双击安装到您所有新支持的版本。

享受！

# c# - MVC3 应用程序中的本地化

> ID：12156930
> 
> 赞同：4
> 
> 时间：2012-08-28T10:02:27.317
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在我的 MVC 3 应用程序中，我需要进行本地化。我想请教一些建议，最好的方法是什么。还有一个问题。我在我的应用程序中使用这样的模型：

```
public class MyModel
{          
    [HiddenInput(DisplayValue = false)]
    public Guid? DepartmentId { get; set; }

    [Display(Name = "Caption")]
    public string Caption { get; set; }

    [Display(Name = "Owner")]
    public string Owner { get; set; }

    [Display(Name = "Enabled")]
    public bool Enabled { get; set; }
} 
```

如何在这个模型类中使用本地化？

**更新**

我决定创建一个自定义 resource.xml 而不是使用 asp.net 的 Resource .resx 实现，如何在这个模型类中使用本地化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:05:53.540

在 [Display] 属性中使用以下设置：

```
[Display(Name = "Caption", ResourceType = typeof(SomeResource))] 
```

其中 SomeResource 是资源文件的类名。要获得正确的命名空间和类名，只需打开添加资源文件时生成的*Designer.cs*文件。确保资源文件的**自定义工具**设置为**PublicResXFileCodeGenerator**。这可以在资源文件的“属性”窗口中完成。

### 原问题更新后：

如果您使用 resources.xml 文件，则可能会出现重载或新属性，例如使用 XPath 表达式和 xml 文件的位置。

您可以连接一个新的提供商，例如：

```
ModelValidatorProviders.Providers.Add(new CustomMetadataValidationProvider()); 
```

在哪里

```
public class CustomMetadataValidationProvider : DataAnnotationsModelValidatorProvider
{

} 
```

[您可能还对Orchard CMS](http://www.orchardproject.net/.)解决它的方式感兴趣。他们使用[.po 文件](http://docs.orchardproject.net/Documentation/Creating-global-ready-applications)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:39:30.707

您可以在不修改模型的情况下执行此操作：

```
public class MyModel
{          
    [HiddenInput(DisplayValue = false)]
    public Guid? DepartmentId { get; set; }

    public string Caption { get; set; }
    public string Owner { get; set; }
    public bool Enabled { get; set; }
} 
```

如果您在我的 Griffin.MvcContrib 中使用***自定义元数据提供程序***[：http: //www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri](http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri)

源代码：[https ://github.com/jgauffin/griffin.mvccontrib](https://github.com/jgauffin/griffin.mvccontrib)

**更新**

您可以使用 XML 作为数据源。只需实现接口[ILocalizedStringProvider](https://github.com/jgauffin/griffin.mvccontrib/blob/master/source/Griffin.MvcContrib/Localization/Types/ILocalizedStringProvider.cs)并使用它从 XML 文件加载字符串。

然后像这样配置MVC：

```
var stringProvider = new MyXmlProvider(@"C:\AppData\MyStrings.xml");
ModelMetadataProviders.Current = new LocalizedModelMetadataProvider(stringProvider); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:55:51.350

如果要将本地化字符串存储在自定义文件中，而不是 RESX，则可以实现资源提供程序。查看以下文章了解更多信息：http:
[//msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic4](http://msdn.microsoft.com/en-us/library/aa905797.aspx#exaspnet20rpm_topic4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:06:08.130

您可以使用资源文件来存储字符串的本地化版本。查看[以下指南](http://helios.ca/2010/02/17/asp-net-mvc-2-model-validation-with-localization/)。

# qt - svg 文件中的图像不会显示在 Qt 中

> ID：12156932
> 
> 赞同：2
> 
> 时间：2012-08-28T10:02:41.480
> 
> 标签：qt, svg

我正在尝试使用 Qt 显示 svg 图像，它运行良好，除了 svg 图像中的任何图像（.gif、.bmp、...）都没有显示（线条、圆圈、文本工作正常）。

如果我在 Firefox 中打开 svg，图像会正确显示。

除了可执行文件外，我已将 qgif4.dll 放在 imageformats 和 QtSvg4.dll 文件夹中，但无济于事。

我在 svgview.h/.cpp 的帮助下显示 svg，并且我在 WinXP 机器上运行（Qt 版本 4.7.2）。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:32:45.220

如果您通过 a 加载它`QIcon`，它应该可以在没有帮助的情况下工作。

如果您尝试使用`QPixmap`或加载它`QImage`- 您不能。您必须在模块中使用`QSvgRenderer`（或[相关的类](https://qt-project.org/doc/qt-4.8/qtsvg.html)）`svg`来栅格化数据。

# ruby-on-rails - Rails: rake db:test:prepare VS rake test:prepare

> ID：12156936
> 
> 赞同：10
> 
> 时间：2012-08-28T10:02:55.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, rake-task

作为指南，用于准备测试数据库的命令是

```
bundle exec rake db:test:prepare 
```

但是，我发现以下命令也可以工作并为我创建了测试数据库。

```
bundle exec rake test:prepare 
```

想知道这是否是一个有效的命令，如果是的话。我在哪里可以找到文档。

测试`rails 3.2.8`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T11:07:43.310

根据[github，源代码](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake) `task 'test:prepare' => 'db:test:prepare'`在底部提到。

因此，它是一个快捷方式，包装器，无论你想怎么称呼它。另一个问题是为什么当你这样做时这不会出现，`bundle exec rake -T`但是嘿。

# r - 对列表的每个元素分别应用一个函数

> ID：12156939
> 
> 赞同：2
> 
> 时间：2012-08-28T10:03:04.230
> 
> 标签：r, for-loop

我有一个关于在列表的每个元素上应用函数的问题。

这是我的问题：

我有一个 DF 列表（我按天划分了一个更大的 DF）：

```
 mydf <- data.frame(x=c(1:5), y=c(21:25),z=rnorm(1:5))
 mylist <- rep(list(mydf),5)
 names(mylist) <-c("2006-01-01","2006-01-02","2006-01-03","2006-01-04","2006-01-05") 
```

如果它相同，请不要关心这个假数据），它只是为了示例。对于列表的每个 DF，我在列“z”中的结果，以及代表一些空间坐标的其他 2 列“x”和“y”。

我还有另一个包含“x”和“y”列表的独立 DF，代表一些特定区域（想象 10 个区域）：

```
region <- data.frame(x=c(1:10),y=c(21:30),region=c(1:10)) 
```

最终目标是每 10 个区域都有一个值“z”（我的结果），距离我列表中每个 DF 的最近点（根据坐标）。这意味着对于一个区域：来自我列表的 DF1 的 10 个结果“z”，然后来自 DF2 的 10 个其他结果“z”，......如果可能的话，我的最终 DF 应该看起来像这样（对于结构）：

```
final1 <- data.frame("2006-01-01"=rnorm(1:10),"2006-02-01"=rnorm(1:10),
"2006-03-01"=rnorm(1:10),"2006-04-01"=rnorm(1:10),"2006-05-01"=rnorm(1:10)) 
```

一天一列（因此列表的一个 DF）和每行一个值（例如对于 2006-01-01：距第一个区域最近的点的值“z”）。

我已经有一个小函数来寻找最接近的值：

```
min.dist <- function(p, coord){
     which.min( colSums((t(coord) - p)^2) )
} 
```

然后，我试图制作一个循环来获得我想要的东西，但我对列表有困难。我需要将 2 个变量放入循环中，但它不起作用。

如果我只取列表中的 1 个 DF，这大约可以工作：

```
 for (j in 1:nrow(region)){

imin <- min.dist(c(region[j,1],region[j,2]),mylist[[1]][,1:2])
imin[j] <- min.dist(c(region[j,1],region[j,2]),mylist[[1]][,1:2])
final <- mylist[[1]][imin[j], "z"]
final[j] <- mylist[[1]][imin[j], "z"]
final <- as.data.frame(final)
} 
```

但是，如果我选择我的整个列表（为了在对象“final”中为列表的每个 DF 提供一列结果），我就会出错。

我认为第一个问题是“区域”的长度与我的列表长度不同，第二个问题可能是为我的列表长度添加第二个变量。我对循环不是很熟悉，所以对 2 变量循环也不是很熟悉。

你能帮我在循环中改变什么应该改变以获得我正在寻找的东西吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:44:31.023

您可以使用 lapply() 在列表上应用函数。

这应该有效。它返回一个向量列表。

```
lapply(
  mylist,
  FUN = function(mydf)
    mydf[apply(
      region[, -3],
      1,
      FUN = function(x)
        which.min(apply(
          mydf[, -3],
          1,
          FUN = function(y)
            dist(rbind(x, y))
        ))
    ), 3]
) 
```

# recursion - 递归javap并将结果保存到同名文件

> ID：12156957
> 
> 赞同：1
> 
> 时间：2012-08-28T10:04:08.123
> 
> 标签：recursion, javap

我想反编译许多目录中的 .class 文件，然后将每个文件的输出保存到同名文件（当然扩展名不同）。我试图设置类路径，但我收到一些错误，即找不到目录之一，但这是无稽之谈，所以我认为我做错了。(javap -classpath path/to/files/ -c *)。

我想使用 javap 来做，我不想使用库、程序等。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:52:59.233

这是解决方案：

```
javap -classpath yourjar.jar -c $(jar -tf yourjar.jar | grep class | sed 's/.class//g') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T06:27:52.680

要保存到单独的文件：

```
for i in $(jar -tf yourjar.jar | grep class | sed 's/.class//g') ; do mkdir -p $(dirname $i) ; javap -cp yourjar.jar -c $i > $i.javap ; done 
```

# p4v - 如何按变更列表编号过滤待处理的变更列表

> ID：12156961
> 
> 赞同：0
> 
> 时间：2012-08-28T10:04:13.463
> 
> 标签：p4v, changelist

使用 p4V 客户端，我想查看搁置文件的挂起更改列表。我有更改列表编号，但找不到根据更改列表编号进行过滤的方法。

我发现了使用 Ctrl-G 来搜索挂起的更改列表。然而，这并没有给我一个取消搁置的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:11:54.200

在“搁置文件”列表中的文件的上下文菜单中查找“取消搁置...”命令。

# mysql - MySQL 查询嵌套或连接

> ID：12156963
> 
> 赞同：0
> 
> 时间：2012-08-28T10:04:23.730
> 
> 标签：mysql, sql, database, nested, left-join

我有这样一个MYSQL表

```
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `screen_name` text NOT NULL,
  `user_no` int(20) NOT NULL,
  `avatar` text NOT NULL,
  `name` varchar(50) NOT NULL,
  `location` varchar(50) DEFAULT NULL
  PRIMARY KEY (`id`) 
```

我需要创建一个 SQL 查询。

*   顺序`id`排列
*   通过...分组`screen_name`
*   获取“名称”和“屏幕名称”字段
*   `id`在 $idmin 和 $idmax 之间

我将分别比较**嵌套查询**和**JOIN 查询**的性能。
你能提出查询词吗？
谢谢

编辑：对于嵌套查询我试过这个：

```
SELECT `name`,`screen_name` FROM `mytable` WHERE `id` IN
(SELECT `id` FROM `mytable` WHERE `id` BETWEEN 100 AND 500 ORDER BY `id` DESC)
GROUP BY `screen_name` 
```

我无法为连接类型写作。

Edit2：说我有这样的行：

*   id=1，screen_name=mike，name=uk
*   id=2，screen_name=albert，name=usa
*   id=3，screen_name=ash，name=uk
*   id=4，screen_name=albert，name=new_zelland

我需要得到这样的结果：
id=4
id=3
id=1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:07:20.757

您的查询应采用以下格式：

```
SELECT MAX(id) AS max_id, user_no, screen_name
FROM table_name
WHERE id BETWEEN $idmin AND $idmax
GROUP BY screen_name
ORDER BY MAX(id) DESC; 
```

[**SQLFIDDLE 演示在这里**](http://sqlfiddle.com/#!2/5945e/3)

或使用子查询：

```
SELECT a.id, a.name, a.screen_name
FROM example a
    INNER JOIN (SELECT screen_name, MAX(id) id
                FROM example
                WHERE id BETWEEN 1 AND 4
                GROUP BY screen_name
               ) b
        ON a.screen_name = b.screen_name
           AND a.id = b.id
ORDER BY a.id DESC; 
```

[**SQLFIDDLE 演示在这里**](http://sqlfiddle.com/#!2/5945e/14)

# python - Python客户端-服务器脚本单元测试错误

> ID：12156969
> 
> 赞同：0
> 
> 时间：2012-08-28T10:04:44.677
> 
> 标签：python, unit-testing, sockets, python-unittest

我有服务/读取一些数据的客户端和服务器脚本。

当我尝试使用 PyUnit 编写单元测试时，会出现一个我无法推理的错误。

这是相关的代码片段：

```
class TestSequenceFunctions(unittest.TestCase):
def setUp(self):
    #some set up operations

def testRecieve(self):
    s = socket.socket()   
    s.connect((FEED_SERVER_HOST, FEED_SERVER_PORT))
    sock = socket.socket()    
    #some recieve operations        
    s.close()

 # When i write this code snippet below, i get error: [Errno 98] Address already in use
error. I tried closing 's' socket in tearDown function but still same error raising.

    def testAnotherRecieve(self):
        sock = socket.socket() # Results ERRNO 98. 
```

总而言之，我无法在 unittest 类中创建第二个套接字。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:14:52.810

查看[close()](http://docs.python.org/library/socket.html#socket.socket.close)的[套接字文档](http://docs.python.org/library/socket.html)，在第二次测试启动时，套接字可能尚未关闭：

> close() 释放与连接关联的资源，但不一定立即关闭连接。如果要及时关闭连接，请在 close() 之前调用 shutdown()。

# mysql - mysql在sql语法中计算单词

> ID：12156970
> 
> 赞同：12
> 
> 时间：2012-08-28T10:04:46.737
> 
> 标签：mysql

让我们有一个简单的查询：

```
SELECT myfield
FROM   mytable
WHERE  criteria 
```

例如，上面的查询为我们提供了 10 行结果。该字段`myField`是一个文本字段。

我的问题是：是否可以更改上述查询并获取该字段的总字数`myField`？

**编辑：**总字数是指查询中所有选定字段的总字数，在所有行中

**例子**

```
+------------------------------+-------+
| sentence                     | Words |
+------------------------------+-------+
| Hello World                  |     2 |
| Hello World                  |     2 |
| Mary had a little lamb       |     5 |
| Her fleece was white as snow |     6 |
| Everywhere that mary went    |     4 |
| Umm, sheep followed her      |     4 |
+------------------------------+-------+ 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T10:13:52.420

在您的查询中使用@otis[这个问题](https://stackoverflow.com/questions/748276/using-sql-to-determine-word-count-stats-of-a-text-field)的出色功能：

```
mysql> select * from test;
+----+------------------------------+
| id | sentence                     |
+----+------------------------------+
|  0 | Hello World                  |
|  1 | Hello World                  |
|  2 | Mary had a little lamb       |
|  3 | Her fleece was white as snow |
|  4 | Everywhere that mary went    |
|  5 | Umm, sheep followed her      |
+----+------------------------------+
6 rows in set (0.00 sec)

mysql> SELECT sentence, wordcount(sentence) as "Words" from test;
+------------------------------+-------+
| sentence                     | Words |
+------------------------------+-------+
| Hello World                  |     2 |
| Hello World                  |     2 |
| Mary had a little lamb       |     5 |
| Her fleece was white as snow |     6 |
| Everywhere that mary went    |     4 |
| Umm, sheep followed her      |     4 |
+------------------------------+-------+
6 rows in set (0.02 sec) 
```

要使函数工作，您需要在 MySQL 中执行函数的声明。就像执行任何其他查询一样：

```
mysql> DELIMITER $$
mysql> CREATE FUNCTION wordcount(str TEXT)
            RETURNS INT
            DETERMINISTIC
            SQL SECURITY INVOKER
            NO SQL
       BEGIN
         DECLARE wordCnt, idx, maxIdx INT DEFAULT 0;
         DECLARE currChar, prevChar BOOL DEFAULT 0;
         SET maxIdx=char_length(str);
         WHILE idx < maxIdx DO
             SET currChar=SUBSTRING(str, idx, 1) RLIKE '[[:alnum:]]';
             IF NOT prevChar AND currChar THEN
                 SET wordCnt=wordCnt+1;
             END IF;
             SET prevChar=currChar;
             SET idx=idx+1;
         END WHILE;
         RETURN wordCnt;
       END
     $$
Query OK, 0 rows affected (0.10 sec)

mysql> DELIMITER ; 
```

# java - Excel中的彩色饼图导出

> ID：12156974
> 
> 赞同：1
> 
> 时间：2012-08-28T10:04:51.843
> 
> 标签：java, excel, colors, export

我需要在 Excel 中导出饼图。到目前为止，导出工作正常，但图表的某些颜色是相同的。无法弄清楚问题所在。

这是代码：

```
Color[] c = this.createRainbow(100);
int n = chart.getDataPointCount(0); //number of Pies
ArrayList<Integer> compare = new ArrayList<Integer>();
for (int j = 0; j < n && !ValueWatcherServer.canceled_id.contains(connectionid); j++) {
    int rePos = (int)(((double)j / (double)n * (double)c.length));                    
    ChartFormat format = chart.getDataPointFormat(0, j);
    format.setSolid();
        if(!compare.contains(rePos)){
            compare.add(rePos);
            format.setForeColor(c[rePos].getRGB());
        }
        else{
            format.setForeColor(3);
        }
     chart.setDataPointFormat(0, j, format);
 } 
```

结果是这样的： ![饼形图](../Images/0545c267514be1f08951810e89e3bd8f.png)

# php - Apple 推送通知 - PHP - SSL 操作失败，代码为 1

> ID：12156976
> 
> 赞同：2
> 
> 时间：2012-08-28T10:04:55.567
> 
> 标签：php, ios, apple-push-notifications

在过去的几天里，当使用套接字连接到生产服务器上的 APN 服务器时，我们遇到了 PHP 的一些奇怪行为。

在大多数情况下，有效负载被推送而没有任何错误，并且客户端会收到通知。然而，在某些情况下，我们开始收到 PHP 错误（即使我们收到错误，有时也会推送通知）。当我们开始看到这个错误时，它会持续几个小时然后消失，PHP 继续工作，就像什么都没发生一样。

另一个奇怪的事情是，从 shell 运行相同的 PHP 代码不会产生任何错误。从 web (nginx / php-fpm) 运行它确实......在 shell 和 web 上运行的 PHP 具有相同的配置并共享相同的 php.ini。唯一的区别是 web 是在 php-fpm 上运行的。

此外，相同的代码 + 证书在我们的登台服务器上运行，没有任何错误。生产服务器是登台服务器的副本，因此每个配置都是相同的。

我们能够找到一些可能导致此错误的答案，包括来自 stackoverflow.com 的答案，但我们无法找到解决方案或解决它。

发送到 Apple 服务器的通知是逐个发送的，而不是捆绑发送的。但是我们并没有建立太多的联系（可能每天有一千个）。没有排队系统。

所以，简而言之

*   我们有时会在发送通知时收到 PHP 错误，但并非总是如此。
*   通过相同的 PHP 从 shell 发送通知不会产生任何错误
*   从登台服务器发送通知不会产生任何错误

我们试过这些

*   重新创建证书和密钥
*   重新创建 PEM 文件
*   将 ssl:// 更改为 sslv3://
*   使用 stream_socket_client
*   使用 fsockopen
*   更改/删除证书密码

错误是：

```
2012/08/28 12:18:09 [error] 4282#0: *225858 FastCGI sent in stderr: 
"PHP message: PHP Warning:  fwrite() [<a href='function.fwrite'>function.fwrite</a>]:
SSL operation failed with code 1\. OpenSSL Error messages:
error:1409F07F:SSL routines:func(159):reason(127) in 
/usr/local/nginx/html/play/classes/PushNotification.php on line 283"
while reading response header from upstream, client: 94.---.---.---,
server: play.--------.com, request: "POST /game_request_random.php HTTP/1.1",
upstream: "fastcgi://unix:/var/run/phpfpm.sock:",
host: "play.--------.com", referrer: "http://--------.com/" 
```

从 php 连接和发送有效载荷的代码实际上是一个类的一部分，这部分是建立连接和发送有效载荷的部分：

```
 private function ConnectAndSend ( $msg = false ) {
    $ctx = stream_context_create();
    stream_context_set_option( $ctx, 'ssl', 'local_cert', $this->certificate );
    stream_context_set_option( $ctx, 'ssl', 'passphrase', $this->certificatepass );

    // Open a connection to the APNS server
    $fp = stream_socket_client( APN_SERVER, $err, $errstr, 60, STREAM_CLIENT_CONNECT | STREAM_CLIENT_PERSISTENT, $ctx );
    if ( !$fp ) {
      errorlog( "Push notification error : $err $errstr" );
      $this->error = "$err $errstr";
      return;
    }

    // Build the notification
    if ( !$msg ) {
      $msg = chr( 0 ) . pack( 'n', 32 ) . pack( 'H*', $this->devicetoken ) . pack( 'n', strlen( $this->payload ) ) . $this->payload;
    }

    // Send it to the server
    if ( !($result = fwrite( $fp, $msg, strlen( $msg ) )) ) {
      // Could not send
      $this->error = 'Notification could not be send';
      errorlog( "Push notification error : {$this->error}" );
    } else {
      // Notification sent
      $this->error = false;
      errorlog( "Push notification sent" );
    }

    fclose($fp);

    // Reset the content
    $this->devicetoken = false;
    $this->message = false;
    $this->command = false;
    $this->badge = 0;
    $this->payload = false;
    $this->sound = false;
  } 
```

*   stream_socket_connection 是出现在错误消息中的第 283 行
*   我们没有使用沙盒 (sslv3://gateway.push.apple.com:2195)
*   PHP版本是5.3.15

这是我们不知道的 PHP 或 OpenSSL 错误吗？任何想法什么和在哪里检查？Apple 是否有可以检查 APN 网络当前运行状况的站点？

非常感谢任何帮助...谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-05T11:58:16.827

查看此代码以发送多条消息

```
$i = 0;
while($res = mysql_fetch_array( $result )) {
    $deviceTokens[$i] = $res['token'];
    $i++;
}

// APNs Push testen auf Token
//$deviceToken = $token; // Hier das Device-Token angeben, ist 64-stellig

// Payload erstellen und JSON codieren
$message = $_POST['message'];
$message = utf8_encode($message);

$payload['aps'] = array('alert' => 'Neuer Artikel in Aktuelles', 'badge' => +1, 'sound' => 'default');
if (trim($message) != '') {
    $payload['aps'] = array('alert' => "$message", 'badge' => 1, 'sound' => 'default');
}
$payload = json_encode($payload);

//Development: $apnsHost = 'gateway.sandbox.push.apple.com';
$apnsHost = 'gateway.push.apple.com';
$apnsPort = 2195;

//Development: $apnsCert = 'apsDevBundle.pem';
$apnsCert = 'apns-dev.pem';

// Stream erstellen
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);

$apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);
if ($error==0)
{     
  for($i = 0; $i<count($deviceTokens); $i++) {

      // Build the binary notification
      $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceTokens[$i])) . chr(0) . chr(strlen($payload)) . $payload;

      fwrite($apns, $apnsMessage);
  }

  // Verbindung schliessen
  fclose($apns);
}
else
{
  var_dump($error);
  var_dump($errorString);
  die("Fehler aufgetreten.");
} 
```

# c# - 在 DateTime 中从 jquery 转换日期

> ID：12156980
> 
> 赞同：0
> 
> 时间：2012-08-28T10:05:00.760
> 
> 标签：c#, json, asp.net-mvc-3, jquery-ui, datepicker

我使用 jquery ui 控件。
我有一个日期选择器，我检索日期如下：

```
var sDate = $("#startDatePicker").datepicker('getDate'); 
var eDate = $("#endDatePicker").datepicker('getDate'); 
```

作为 sDate 返回的示例

```
Tue Aug 14 00:00:00 UTC+0200 2012 
```

我从网页调用代码如下

```
$.ajax(
{
  url: '@Url.Action("LogsView","Home")',
  type: 'POST',
  data: { startDate: sDate, endDate: eDate },
  success: function(result) { alert(result); },                        
  error: function(param1) { alert(param1); }
}); 
```

我有一个具有以下操作的控制器

```
public JsonResult LogsView(DateTime startDate, DateTime endDate)
{   
  var items = FetchItems(startDate, endDate);
  return Json(items, JsonRequestBehavior.AllowGet);
} 
```

当我运行它时，返回的部分错误如下（在 fiddler 中竞争时）：

```
The parameters dictionary contains a null entry for parameter 'startDate' of non-nullable type 'System.DateTime' for method 'System.Web.Mvc.JsonResult LogsView(System.DateTime, System.DateTime)' .. 
```

我检查了通过提琴手发送的参数，如下所示`startDate=&endDate=`

任何人都知道如何正确格式化和传递日期（我认为这是错误所在）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:09:57.837

我需要添加`.toJSON()`到`$("#startDatePicker").datepicker('getDate')`
即 `$("#startDatePicker").datepicker('getDate').toJSON()`

如果您在功能上遇到错误，请`toJSON()`尝试

```
var sd = $("#startDatePicker").datepicker('getDate');
var sDate = $.datepicker.formatDate('dd-MM-yy', sd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:08:40.240

在将日期发送到 $.ajax() 方法之前，您需要将其转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T13:21:58.303

您可以使用此方法将日期转换为字符串：

```
function ShowUTCDate()
{
    var dNow = new Date();
    var utc = new Date(dNow.getTime() + dNow.getTimezoneOffset() * 60000);
    var utcdate= (utc.getMonth()+1) + '/' + utc.getDate() + '/' + utc.getFullYear() + ' ' + utc.getHours() + ':' + utc.getMinutes();
    return utcdate;
} 
```

# objective-c - AVAudioPlayer 不播放用 AVAudioRecorder 制作的录音

> ID：12156984
> 
> 赞同：1
> 
> 时间：2012-08-28T10:05:12.453
> 
> 标签：objective-c, ios, avfoundation, avaudioplayer, avaudiorecorder

这可能是一个非常简单的问题，但我已经使用 进行了录音`AVAudioRecorder`，然后我停止了录音机。停止后`AVAudioRecorder`，我按另一个按钮播放录音，但没有播放。文件存在，我可以在我的电脑上播放，连代码都知道它存在，没有错误，但是拒绝播放。可能是什么问题？

```
NSError *error = nil;
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self.recorder.url path]]) {
        self.recordingPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:self.recorder.url error:&error];
        self.recordingPlayer.delegate = self;

        if (error) {
            NSLog(@"error: %@", [error localizedDescription]);
        } else {
            [self.recordingPlayer play];
        }

    } else {
        NSLog(@"Recording file doesn't exist");
    } 
```

编辑：刚刚在我的设备上尝试过，它工作正常，播放录音。它只是在iOS模拟器上不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:50:44.490

问题出在我的记录设置上，我将数量`AVNumberOfChannelsKey`设置为 2，出于某种原因 iOS 模拟器不喜欢这个，但 iPhone 没问题。不管怎样，我的录音一开始就不应该有 2 个频道，所以我发现了这一点。

```
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:AVAudioQualityMax], AVEncoderAudioQualityKey,
                                    [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                                    [NSNumber numberWithInt:1], AVNumberOfChannelsKey,
                                    [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                    nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:43:33.273

试试这个链接的代码。在此您可以录制音频并从文件夹中检索。

[录制音频文件并在 iPhone 上本地保存](https://stackoverflow.com/questions/12135687/record-audio-file-and-save-locally-on-iphone/12136853#12136853)

# hibernate - 为什么在junit期间将SessionFactory注入AbstractDAO时，concreteDAO中的SessionFactory为null？

> ID：12156985
> 
> 赞同：0
> 
> 时间：2012-08-28T10:05:14.877
> 
> 标签：hibernate, junit4

我有单元测试来测试休眠过程让我通过这个

下面是我的 AbstractDAO

```
public abstract class BaseDAO {

    protected JdbcTemplate jdbcTemplate;
    protected SessionFactory sessionFactory;
    protected NamedParameterJdbcTemplate namedParameterJdbcTemplate;

    ...

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
        this.namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }
} 
```

这是我的concreteDAO，它扩展了BaseDAO

```
public class LoginDAO extends BaseDAO implements InitializingBean {

    private static final Logger log = Logger.getLogger(LoginDAO.class);
    private MD5PasswordEncoder passwordEncoder;
    private SaltSource saltSource;

    public User getLoggedinUserByUserid(Long userid){
        log.info("in getLoggedinUserByUserid"); 
        User result = null;
        Session session = sessionFactory.openSession();

        try {
            session.beginTransaction();

            result = (User) session.get(User.class, userid);

            session.getTransaction().rollback();
            session.close();

        } catch (Exception e) {
            log.error(e,e);

            session.getTransaction().rollback();
            session.close();
        }

        return result;
    }

...
} 
```

这是我的junit

```
@Test
public void shouldReturnCorrectlyUserWhenCallingGetLoggedinUserByUseridMethod() {

    // Given When
    User adminUser = loginDAO.getLoggedinUserByUserid(1l);

    // Then
    assertNotNull(adminUser);
    assertEquals("sadmin", adminUser.getUsername());
    assertEquals("ecedee8662a0bcd15c157e5734056ac5", adminUser.getPassword());
    assertEquals(1, adminUser.getStatus());
    assertEquals("TS", adminUser.getFirstname());
    assertEquals("Sys Admin Person", adminUser.getLastname());
    assertEquals(0, adminUser.getIdType());
    assertTrue(adminUser.getEnabled());
    assertTrue(adminUser.getAuthenLocal());
    assertTrue(StringUtils.isBlank(adminUser.getTitle()));
} 
```

SessionFactory 在 BaseDAO 中注入正常，但是当它进入 `Session session = sessionFactory.openSession();`时`LoginDAO`，它变成了 null！

这怎么可能发生？需要一些解释，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:23:58.857

使用真实对象进行测试确实是一种不好的做法，除非这些测试是集成测试。你有为此目的的模拟对象：[jmock](http://www.jmock.org)、[EasyMock](http://www.easymock.org)、[Mockito](http://code.google.com/p/mockito)是你会找到的最好的 java 库，如果你要搜索的话。

也许您可以尝试使用诸如 OpenSessionInView 之类的东西来查找您的 JPA 或 Hibernate Session，以用于 MVC 模式的 View 部分。它可能是这样的：

```
public abstract class AppContextTestCase extends TestCase {

    protected FileSystemXmlApplicationContext context = null;
    protected SessionFactory sessionFactory = null;

    /* (non-Javadoc)
     * @see junit.framework.TestCase#setUp()
     */
    protected void setUp() throws Exception {
        super.setUp();
        String[] contextLocations = new String[2];
        contextLocations[0] = "web/WEB-INF/applicationContext.xml";
        contextLocations[1] = "test/dataSource-local.xml";
        context = new FileSystemXmlApplicationContext(contextLocations);
        sessionFactory = (SessionFactory) context.getBean("sessionFactory");
        Session session = SessionFactoryUtils.getSession(sessionFactory, true);
        TransactionSynchronizationManager.bindResource(sessionFactory, new SessionHolder(session));
    }

    /* (non-Javadoc)
     * @see junit.framework.TestCase#tearDown()
     */
    protected void tearDown() throws Exception {
        SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);
        SessionFactoryUtils.closeSessionIfNecessary(sessionHolder.getSession(), sessionFactory);
        context = null;
        super.tearDown();
    }
} 
```

或者做这样的事情：

```
protected void setUp() throws Exception {    
    Session session = SessionFactoryUtils.getSession(sessionFactory, true);
    TransactionSynchronizationManager.bindResource(sessionFactory, new SessionHolder(session));
}

protected void tearDown() throws Exception {
    SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);
    SessionFactoryUtils.closeSessionIfNecessary(sessionHolder.getSession(), sessionFactory);
} 
```

# css - 为什么浮动“添加”一个新行到元素？

> ID：12156987
> 
> 赞同：0
> 
> 时间：2012-08-28T10:05:21.423
> 
> 标签：css

关键是在这个菜单上有一个单行，包裹。相反，我们得到的是“两条线”，我不明白他为什么要放弃这条线。

任何人都可以让我快速了解一下这是怎么回事吗？

的HTML

```
<div id="main-menu">
<ul>
    <li><a href="">item 1</a></li>
    <li><a href="">item 2</a></li>
    <li><a href="">item 3</a></li>
</ul>
</div> 
```

CSS

```
#main-menu {
    clear: right;
    overflow: hidden;
    margin-top: 75px;
    float:right;
}

#main-menu ul {
    overflow: hidden;
    text-align: right;
    border-radius: 5px;
    background-color: #333;
}

#main-menu ul li {
    display:inline-block;
    padding: 2px 2%;
}

#main-menu ul li a {
    color: #fff;
    font-size: .9em;
}

#main-menu ul li:hover {
    background-color: #EFAB00;
}

#main-menu ul li a:hover {
    text-decoration: none;
} 
```

这里有一个例子：

[http://jsfiddle.net/XRm6Q/2/](http://jsfiddle.net/XRm6Q/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:14:15.810

这不是由 s 引起的`float`，而是因为您应用到`li`s 的填充（因为当您有 percent `padding`s 时，父级不会调整大小以适应）。如果你改变你`padding: 2px 2%;`的`padding: 2px;`包装将消失：[little link](http://jsfiddle.net/XRm6Q/11/)。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:11:46.713

这是因为父元素 (ul) 根本不够宽，无法容纳您的 lis。

使UL更宽，它会起作用。

[http://jsfiddle.net/Kyle_Sevenoaks/XRm6Q/8/](http://jsfiddle.net/Kyle_Sevenoaks/XRm6Q/8/)

* * *

添加`width: 100%;`到父 DIV，而不是 UL。对不起 :D

[http://jsfiddle.net/Kyle_Sevenoaks/XRm6Q/16/](http://jsfiddle.net/Kyle_Sevenoaks/XRm6Q/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:12:13.297

见[http://jsfiddle.net/XRm6Q/10/](http://jsfiddle.net/XRm6Q/10/)

我`white-space: nowrap;`在`ul`元素和元素`white space: normal`上使用过`li`。这样，您无需调整父宽度*（然后只需删除/调整元素上的额外填充`li`或使用边距）*

这样做，所有项目将保持在同一行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T10:12:54.327

要么`width`在菜单上设置 a，要么使用`table-row` `display`它和`table-cell`项目。在后一种情况下，您可能也会`white-space: nowrap`在项目上使用什么，但如果您不知道宽度是多少，它会具有优势。

# python - 一台服务器上的多个 Django 应用程序

> ID：12156990
> 
> 赞同：4
> 
> 时间：2012-08-28T10:05:25.550
> 
> 标签：python, django, apache, mod-wsgi

如何在多个域上提供多个 Django 应用程序？

例如我有

djangoapp1.com 和 djangoapp2.com

然后我在两个不同的位置有两个独立的应用程序

/srv/www/djangoapp1 /srv/www/djangoapp2

我正在使用 mod_wsgi 运行 Apache2，我目前在其 httpd.conf 中有以下内容

```
WSGIScriptAlias / /srv/www/app1/app1/wsgi.py
WSGIPythonPath /srv/www/app1

<Directory /srv/www/app1/system>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

然后我显然也有虚拟主机，我得到了 django 默认安装页面，但现在我想提供我的第二个应用程序，有人能指出我正确的方法吗？

Django V：1.4.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T10:31:54.933

您可以在这里采取许多方法，但没有简单的答案 - 这取决于您的要求和限制。

可能工作的最简单的事情很可能是@Hedde 建议的方法 - 在虚拟主机内定义每个站点的 WSGI 配置。

第二种可能更灵活的方法是将每个 Django 应用程序运行在它自己的包含应用程序服务器中，例如[gunicorn](http://gunicorn.org/)（希望在[virtualenv](http://www.virtualenv.org/en/latest/index.html)中以隔离应用程序特定的依赖项）在不同的端口上，然后使用 Apache 甚至[Nginx](http://nginx.org/)作为应用程序流量的代理。

这涉及到一个更复杂的服务器环境来管理，但为您提供了能够单独管理您的应用程序的优势。

您可以一次为一个应用程序重新配置可用工作程序、升级应用程序版本、更改 settings.py 等，而不必重新启动单个单一进程。

此外，虽然当然可以，但在同一个 Apache 进程中监控虚拟主机比单独监控单个应用服务器实例要复杂得多。

YMMV

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T10:11:37.923

您可以使用 Apache 的[VirtualHosts](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

Django有很多例子，例如[here](https://stackoverflow.com/questions/1553165/multiple-django-sites-with-apache-mod-wsgi#answer-1553751)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-10T15:40:20.947

在单个服务器上运行多个 django 应用程序的一种方法是在每个端口上运行一个应用程序。

**如何在两个不同的端口上运行两个应用程序？**

正如 Django 所推荐的，我正在使用 wsgi 来连接 apache 和 Django 代码。棘手的事情是您不能在“嵌入式​​”模式下使用 wsgi。在嵌入式中，一些操作系统资源是共享的，因此会导致竞争条件。解决方案是在守护进程模式下使用 wsgi。在守护进程模式下，顾名思义，wsgi 作为单独的进程运行，因此没有共享资源。您的两个 django 应用程序将不知道彼此。

这就是我的配置的样子。我在端口 8082 和 8083 上运行应用程序。注意带有`WSGIDaemonProcess`和`WSGIProcessGroup`和的行`process-group=pas`

```
Listen 8082
<VirtualHost *:8082>
  WSGIDaemonProcess djangoapp1 processes=2 threads=15 display-name=%{GROUP}
  WSGIProcessGroup djangoapp1
  WSGIScriptAlias /apis /home/apis/djangoapp1/xyz/config.wsgi  process-group=djangoapp1      
  WSGIApplicationGroup %{GLOBAL}
  <Directory /home/apis/djangoapp1>
    Options +ExecCGI
    <Files config.wsgi>
      Require all granted
    </Files>
  </Directory>
</VirtualHost>

Listen 8083
<VirtualHost *:8083>

  WSGIDaemonProcess djangoapp2 processes=2 threads=15 display-name=%{GROUP}
  WSGIProcessGroup djangoapp2
  WSGIScriptAlias /apis /home/apis/discovery_api/nykaa/config.wsgi process-group=djangoapp2
  WSGIApplicationGroup %{GLOBAL}
  <Directory /home/apis/djangoapp2>
    Options +ExecCGI
    <Files config.wsgi>
      Require all granted
    </Files>
  </Directory>
</VirtualHost> 
```

**如何为端口 80 上的两个应用程序提供服务？**

```
<VirtualHost *:80>

  ProxyPreserveHost On
  ProxyRequests Off
  ServerName example.com
  ServerAlias localhost

   ProxyPassMatch "^/(apis/v1/hello$.*)" "http://127.0.0.1:8082/$1"
   ProxyPassMatch "^/(apis/v1/hi$.*)" "http://127.0.0.1:8082/$1"

   ProxyPassMatch "^/(apis/v1/wassup$.*)" "http://127.0.0.1:8083/$1"
   ProxyPassMatch "^/(apis/v1/howdy$.*)" "http://127.0.0.1:8083/$1"
</VirtualHost> 
```

访问 wassup 和 hello API 的两种方式：

```
http://example.com:8083/apis/v2/wassup?q=howsitgoing
http://example.com/apis/v2/wassup?q=howsitgoing
http://example.com:8082/apis/v2/hello?q=how are you
http://example.com/apis/v2/hello?q=howareyou 
```

**Django 代码按照**[Django 网站](http://os.environ.setdefault(%22DJANGO_SETTINGS_MODULE%22,%20%22%7B%7B%20project_name%20%7D%7D.settings%22)) 上的建议，我已替换

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "{{ project_name }}.settings") 
```

到

```
os.environ["DJANGO_SETTINGS_MODULE"] = "{{ project_name }}.settings" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T09:48:18.760

请看看这是否有帮助

在 apache2.conf 或 htppd.conf

```
# Virtual hosts setup
NameVirtualHost *
<VirtualHost *>
    ServerName example1.com
    ............    
    WSGIScriptAlias / /..../path/to/wsgi1.py
</VirtualHost>

<VirtualHost *>
    ServerName example2.com
    ............    
    WSGIScriptAlias / /..../path/to/wsgi2.py
</VirtualHost>
in wsgi1.py

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings1' # or projectnaame.settings1
in wsgi2.py

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings2' # or projectname.settings2
In settings1.py & settings2.py you can make necessary databases and other configurations 
```

# arrays - 如何在 Groovy 中将 byte[] 转换为 Object，反之亦然

> ID：12156995
> 
> 赞同：0
> 
> 时间：2012-08-28T10:05:44.013
> 
> 标签：arrays, object, groovy, byte

我正在尝试使用**Groovy**将 byte[] 转换为 Object 。我由字节数组表示的实际 Groovy 类实现了 Serializable 接口，并存储在单独的 Groovy 类文件中。`ClassNotFoundException`然而，当我试图调用我的`toObject`函数时，我总是得到这个类。我的代码是用 Java 编写的，在使用 Java 时有效，但在使用 Groovy 时无效。

```
private static byte[] toByteArray(Object obj) {
    byte[] bytes = null;
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try {
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        oos.writeObject(obj);
        oos.flush();
        oos.close();
        bos.close();
        bytes = bos.toByteArray();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return bytes;
}

private static Object toObject(byte[] bytes) {
    Object obj = null;
    try {
        ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
        ObjectInputStream ois = new ObjectInputStream(bis);
        obj = ois.readObject();
    } catch (Exception ex) {
        ex.printStackTrace(); // ClassNotFoundException
    }
    return obj;
} 
```

做这个的最好方式是什么？

编辑：将在发生 ClassNotFoundException 的上下文中使用的类是这样的：

```
public class MyItem implements Serializable {

/**
 *
 */
private static final long serialVersionUID = -615551050422222952L;

public String text

MyItem() {
    this.text = ""
}
} 
```

然后测试整个事情：

```
 void test() {
        MyItem item1 = new MyItem ()
        item1.text = "bla"

        byte[] bytes = toByteArray(item1) // works

        Object o = toObject(bytes) // ClassNotFoundException: MyItem

        MyItem item2 = (MyItem) o

        System.out.print(item.text + " <--> " + item2.text)
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:30:55.963

我的猜测（这也是@JustinPiper 的建议）是您没有在引用它之前编译您的 groovy 类。您必须使用 groovyc 编译您的 groovy 类，并确保已编译的类文件位于类路径中（可能与 java 测试类位于同一文件中）。