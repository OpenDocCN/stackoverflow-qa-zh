# StackOverflow 问答 10074000-10074999

# c# - 如何通过 Foreach 创建按钮？

> ID：10074000
> 
> 赞同：0
> 
> 时间：2012-04-09T13:33:23.437
> 
> 标签：c#, windows-phone-7

我想通过 Foreach 创建许多按钮，这些按钮打印 Uri 的属性。但我不知道该怎么做。你能告诉我怎么做吗？这是我的代码：

```
private void CreateButtons()
{
    Uri uri = new Uri("/Pages/PageTest.xaml?Name=Stephen&Age=17",UriKind.Relative);

    foreach(var pi in typeof(Uri).GetProperties())
    {
        //create button
        Button btn = new Button();

        btn.Content = pi.Name;

        btn.Margin = new Thickness(0,0,0,12);

        //i think this is bug, but i don't know,how to do
        btn.Click += (se,ev)=>
        {
           MessageBox.Show(pi.GetValue(btn,null).ToString());
        }

        stackPanel.Children.Add(btn);            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:02:36.167

您使用了错误的目标

> pi.GetValue(btn,null)

您正在查询 URI 属性，但您的目标是按钮对象。

你需要类似的东西：

```
MessageBox.Show(pi.GetValue(uri, null).ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:04:58.930

我猜你在事件处理程序中遇到了异常。

尝试在抛出异常时启用中断（调试|异常 -> 检查公共语言运行时异常旁边的“抛出”）。

然后在附加调试器的情况下运行，看看单击按钮时会发生什么。我怀疑 NullPointerException

# c# - C# 应用程序之间的 IPC，通过本机 C++ DLL，到另一个使用嵌入式 Lua 的 DLL 的应用程序？

> ID：10074003
> 
> 赞同：1
> 
> 时间：2012-04-09T13:33:36.980
> 
> 标签：c#, c++, dll, lua, ipc

基本上我在问如何实现与[此处](https://stackoverflow.com/questions/978627/c-sharp-app-to-c-dll-back-to-the-c-sharp-app-via-callbacks)解释的相同的流程。

我希望我的 C# 向我编写的本机 C++ DLL 提供回调。

我希望这个 DLL 由嵌入到另一个应用程序的 Lua 引擎加载，
[MUSHClient](http://en.wikipedia.org/wiki/Mushclient)（一个 MUD/telnet 客户端，带有嵌入式 Lua），通过`package.loadlib("native.dll", "someInitFunction");`.

然后在[MUSHClient](http://en.wikipedia.org/wiki/Mushclient)中，我想编写调用 DLL 公开的函数的脚本。我希望这些函数调用我的 C# 应用程序提供的回调函数/委托。

**我怎样才能做到这一点？** 我知道如何在我的 DLL 中导出函数，我不知道如何在进程之间共享回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:47:14.043

您需要某种进程间通信（[IPC](http://en.wikipedia.org/wiki/Inter-process_communication "工业PC")）。

我推荐命名管道。

[这](http://msdn.microsoft.com/en-us/library/bb546085.aspx)是 C# 和 C++ 中命名管道实现的一个很好的例子。

# java - 在hadoop map reduce中读取矩阵

> ID：10074005
> 
> 赞同：0
> 
> 时间：2012-04-09T13:33:44.593
> 
> 标签：java, matrix, hadoop, mapreduce, mapper

嗨，我有一个矩阵，想将它传递给hadoop 多节点集群设置中的**映射器类，但***矩阵不在文件中*。有什么方法可以传递矩阵而不将其写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:07:03.513

In [JobConf](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/JobConf.html), you specify the input using the method [setInputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/JobConf.html#setInputFormat%28java.lang.Class%29). [InputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/InputFormat.html) has many classes implementing its interface.

Apart from [FileInputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html) and its subclasses, you have other classes which implement [InputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/InputFormat.html) like [DBInputFormat](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/lib/db/DBInputFormat.html), [Parser.Node](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/join/Parser.Node.html) and more.. See if you can use any those.

If none suits your needs, try to build your own custom InputFormat class to achieve the same.

# orm - 我是否需要将命名查询放在 ORM.xml 文件中

> ID：10074008
> 
> 赞同：0
> 
> 时间：2012-04-09T13:33:53.867
> 
> 标签：orm, openjpa, entity-bean

我最近对我的 JPA 实体进行了 F-ed，并且我正在拼命地尝试恢复该功能。向我的实体添加一些默认查询后，我无法在会话 bean 中调用它们......我收到了这个异常

```
There is no query with the name "" defined for any of the known persistent classes: 
```

虽然上述命名查询确实存在，但它只是对持久性类（或实体 bean）的注释。我需要将其添加到 ORM.xml 文件中吗？我似乎记得您可以对 ORM.xml 文件进行注释，也可以直接对实体 bean 进行注释。我在这里错过了一步吗？

谢谢。

更新：实际命名查询：

```
import javax.persistence.Table;
import javax.persistence.NamedQuery;
import javax.persistence.NamedQueries;

@Entity
@Table(name="EMAIL_DOMAIN_TRUST")
@NamedQueries({
@NamedQuery(name="getEmailDomainTrust", query = "SELECT e FROM EmailDomainTrust e"),
    ...
}) 
```

这是我在无状态会话 bean 中调用它的地方

```
public List<EmailDomainTrust> getEmailDomains() {       

    List listOfEmailDomains = null;
    //try
    //{
        System.out.println("Testing 1..2...3...!");
        listOfEmailDomains = emf.createNamedQuery("getEmailDomainTrust").getResultList(); 
        System.out.println(listOfEmailDomains.size());
    //}
    //catch(Exception e)
    //{
        //System.out.println("Sugar Cookies!  This thing doesn't work");        
    //}
    // while(it)
   return listOfEmailDomains; 
```

}

不知道为什么好像找不到？我在 Websphere 集成开发人员工作。也许有些东西没有正确更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:07:27.220

多谢你们。我是个白痴，没有建立我的项目。

# plsql - 将 PL/SQL 转换为 Hive QL

> ID：10074010
> 
> 赞同：4
> 
> 时间：2012-04-09T13:34:03.557
> 
> 标签：plsql, hadoop, hive, bigdata

我想要一个工具，通过它我可以通过提供 PL/SQL 查询来获取相应的配置单元查询。有很多工具可以将 sql 转换为 hql。即：云数据库的taod。但它没有向我显示相应的配置单元查询。

有没有这样的工具可以将给定的sql转换为hql。请帮我。

谢谢和问候， 拉坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T05:02:11.617

[请查看http://www.hplsql.org/](http://www.hplsql.org/)上的开源项目 PL/HQL，它现在是 Hive 2.x 或更高版本的一部分。它允许您在 Hive 中运行现有的 SQL Server、Oracle、Teradata、MySQL 等存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T22:36:25.490

Ratan，我没有如何开始回应。所以，让我们这样开始吧。我认为您检查了 toad 并认为有一种工具可以将 SQL 转换为 hive QL。我不认为有这样的工具。

让我澄清一下，HIVE QL 与 SQL 相同。在尝试编写一些查询之前检查此链接：

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual](https://cwiki.apache.org/confluence/display/Hive/LanguageManual) ,

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)。

如果您了解 sql 并且易于编写（当您检查 HIve ql 时），这很容易理解。

Hive 没有很多 sql 支持的运算符。例如：

`select * from sales where country like 'EU~%';`“蜂巢支持喜欢”

但是，当我们用 SQL 编写时，试试这个否定查询：

`select * from sales where country not like 'EU~%';`“HIVE 不支持”

这只是一个例子，我记得。还有更多这样的。但是要处理这些蜂巢有很多像“哪里不是”等。

如果您的问题是 Hive 是否有任何 PL/SQL 支持。直接回答是否定的。但是，我们可以检查 hive 中的 UDF 以及 Hadoop 上的 PIG。

# iphone - iOS：直接访问 MySQL 数据库？

> ID：10074012
> 
> 赞同：1
> 
> 时间：2012-04-09T13:34:09.670
> 
> 标签：iphone, mysql, ios

在谷歌搜索这个问题时，我发现了这个：[Karl Kraft 编写的 MySQL 连接器](http://www.karlkraft.com/index.php/2011/06/07/mysql-for-iphone-and-osx-version-2-0/)。有人试过成功吗？有没有更好的库来解决这个问题？有教程吗？

我知道我可以通过 REST Web 服务访问数据库，但我没有 PHP 程序员为我配置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:04:19.593

如果你只写一个 REST 服务，你会更开心。这非常容易，尤其是在 Rails 上。请参阅[此链接](http://gavinmorrice.com/blog/posts/21-building-a-rest-api-in-rails-3)。

在 6 分钟内，他向您展示了如何创建一个支持创建、更新和删除的 RESTful 服务。

# c - 与标准输出流关联的文件

> ID：10074015
> 
> 赞同：0
> 
> 时间：2012-04-09T13:34:24.417
> 
> 标签：c, windows, freopen

我有很长的多线程应用程序，我无法在此处添加哪些代码。从我调用的主程序

```
freopen ("uniq_name",w+,stdout) 
```

之后，不同的线程开始运行。从其中一些线程开始写入标准输出。其中一些发生了向 stderr 的写入（也可能被重定向）。在成功打印随机数之后`uniq_name`，突然我看到打印到屏幕上，我希望它应该进入`uniq_name`文件。在屏幕上出现如此随机数量的打印后，我再次看到`uniq_name`文件已完成打印。它在 Win7 和 Linux 上运行良好 - 失败在 Win8 上。我对任何想法（甚至是理论上的）都感兴趣——这可能是什么原因

# emacs - 组织模式：在议程视图中过滤标签？

> ID：10074016
> 
> 赞同：14
> 
> 时间：2012-04-09T13:34:38.593
> 
> 标签：emacs, org-mode

当议程构建其视图时，是否可以过滤标签？我尝试了以下方法来仅显示与工作相关的约会：

```
("j" "Jobb"
   ((agenda ""
       ((org-agenda-skip-function '(org-agenda-skip-entry-if 'notregexp":jobb:"))))
    (tags-todo "jobb"))
    ((org-agenda-compact-blocks nil))) 
```

这仅适用于直接标记实际约会的情况，但如果约会从父标题继承其标记则无效，如下所示：

```
 * Tider                                                              :jobb:                                                                                                                                                         
 ** Millas arbetstider                                                                                                                                                                                                               
   <2012-04-11 ons 05:00-09:00>                                                                                                                                                                                                     
   <2012-04-12 tor 04:15-08:30>                                                                                                                                                                                                     
   <2012-04-13 fre 14:30-18:30> 
```

是否有另一种方法可以显示继承其标签的约会？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T15:08:15.547

问题在于如何`org-agenda-skip-entries-if`与`'notregexp`. 它将跳过任何不匹配的条目`:jobb:`。即使后面的条目继承了标记，它也没有明确列出，因此它们被跳过。似乎也没有任何内置方法可以匹配（或不匹配）使用`org-agenda-skip-entries-if`. 如果有这样的功能，它可能是查找标签的更有效方法，但我不知道有这样的功能。

相反，您必须创建一个自定义函数来提供所需的搜索格式。

如果您将议程命令更改为：

```
("j" "Jobb"
         ((agenda ""
                  ((org-agenda-skip-function '(zin/org-agenda-skip-tag "jobb" 't))))
          (tags-todo "jobb"))
         ((org-agenda-compact-blocks nil))) 
```

并定义`zin/org-agenda-skip-tag`为：

```
(defun zin/org-agenda-skip-tag (tag &optional others)
  "Skip all entries that correspond to TAG.

If OTHERS is true, skip all entries that do not correspond to TAG."
  (let ((next-headline (save-excursion (or (outline-next-heading) (point-max))))
        (current-headline (or (and (org-at-heading-p)
                                   (point))
                              (save-excursion (org-back-to-heading)))))
    (if others
        (if (not (member tag (org-get-tags-at current-headline)))
            next-headline
          nil)
      (if (member tag (org-get-tags-at current-headline))
          next-headline
        nil)))) 
```

你会得到我理解的你想要的议程视图。如果我把它倒过来并且接下来 3 天的条目不应该出现，您只需将函数更改为`(zin/org-agenda-skip-tag "jobb")`or `(zin/org-agenda-skip-tag "jobb" 'nil)`，在这种情况下它们是等效的。

### 议程视图

在这种情况下`test-new`是我使用的 org 文件的名称，可以忽略它。我还将两个标题设置`TODO`为在测试功能时让它们可见，因为我将议程限制在一个文件中。

```
Week-agenda (W15):
Monday      9 April 2012 W15
Tuesday    10 April 2012
Wednesday  11 April 2012
  test-new:    5:00- 9:00 TODO Millas arbetstider                        :jobb::
Thursday   12 April 2012
  test-new:    4:15- 8:30 TODO Millas arbetstider                        :jobb::
Friday     13 April 2012
  test-new:   14:30-18:30 TODO Millas arbetstider                        :jobb::
Saturday   14 April 2012
Sunday     15 April 2012

================================================================================
Headlines with TAGS match: jobb
  test-new:   TODO Tider                                                  :jobb:
  test-new:   TODO Millas arbetstider                                    :jobb:: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-30T20:56:43.377

在使用乔纳森的回答中的函数几个月来进行这种逐块过滤之后，我发现自己想要一些能够处理更复杂查询的东西（比如其他块类型使用的匹配字符串），我想我' d 在这里为将来偶然发现此问题的任何人发布。

编辑： 的原始实现`my/org-match-at-point-p`现在有些过时了。Org 模式源现在是词法范围的，这改变了`org-make-tags-matcher`. 过去`todo`和`tags-list`变量需要在调用周围动态限定范围`org-make-tags-matcher`，而现在它们似乎被传递给从调用返回的函数。（耶！这好多了！）我已经修改了下面的代码以匹配新版本，但我不再使用 Org 模式，所以它只是经过轻微测试。

```
(defun my/org-match-at-point-p (match)
  "Return non-nil if headline at point matches MATCH.
Here MATCH is a match string of the same format used by
`org-tags-view'."
  (funcall (cdr (org-make-tags-matcher match))
           (org-get-todo-state)
           (org-get-tags-at)
           (org-reduced-level (org-current-level))))

(defun my/org-agenda-skip-without-match (match)
  "Skip current headline unless it matches MATCH.

Return nil if headline containing point matches MATCH (which
should be a match string of the same format used by
`org-tags-view').  If headline does not match, return the
position of the next headline in current buffer.

Intended for use with `org-agenda-skip-function', where this will
skip exactly those headlines that do not match." 
  (save-excursion
    (unless (org-at-heading-p) (org-back-to-heading)) 
    (let ((next-headline (save-excursion
                           (or (outline-next-heading) (point-max)))))
      (if (my/org-match-at-point-p match) nil next-headline)))) 
```

如果您仍在使用旧版本的 Org 模式，这里是原始代码。请注意，此版本假定`my/org-match-at-point-p`定义的文件是词法范围的；如果没有，您可以安全地将`my/defun-dyn`宏替换为简单的`defun`.

```
(defmacro my/defun-dyn (&rest def)
  "As `defun', but always in dynamic scope.
A function defined in this way ignores the value of
`lexical-binding' and treats it as if it were nil.

\(fn NAME ARGLIST &optional DOCSTRING DECL &rest BODY)"
  (declare (debug defun)
           (indent defun)
           (doc-string 3))
  `(eval '(defun ,@def) nil))

(my/defun-dyn my/org-match-at-point-p (match &optional todo-only)
  "Return non-nil if headline at point matches MATCH.
Here MATCH is a match string of the same format used by
`org-tags-view'.

If the optional argument TODO-ONLY is non-nil, do not declare a
match unless headline at point is a todo item."
  (let ((todo      (org-get-todo-state))
        (tags-list (org-get-tags-at)))
    (eval (cdr (org-make-tags-matcher match))))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-12T15:50:28.773

可以通过在议程视图中点击“/”来过滤[议程调度程序。](https://orgmode.org/manual/Agenda-Dispatcher.html#Agenda-Dispatcher)

> "/" = 在所有议程文件以及 org-agenda-text-search-extra-files 中列出的文件中搜索正则表达式。这使用 Emacs 命令多次出现。前缀参数可用于指定每个匹配的上下文行数...

# iphone - 在图像上绘制矩形，可以使用触摸在屏幕上调整大小和移动

> ID：10074019
> 
> 赞同：0
> 
> 时间：2012-04-09T13:34:45.503
> 
> 标签：iphone, image-processing, core-graphics, uigesturerecognizer, uitouch

我正在创建一个提供自定义图像裁剪的应用程序…… 其中用户使用矩形选择图像的一部分，该矩形应调整大小并可以根据用户触摸移动以裁剪该部分……</p>

我想要图像上的矩形，以便我可以使用以下方法裁剪该部分

我可以通过以下方法在图像上裁剪矩形

```
-(void) cropImage
{
   CGSize size = iv.frame.size;

   CGRect rect = CGRectMake(size.width / 4, size.height / 4, size.width/2,size.height / 2);

   CGImageRef imageRef = CGImageCreateWithImageInRect([iv.image CGImage], rect);    
   UIImage *img = [UIImage imageWithCGImage:imageRef]; 

   CGImageRelease(imageRef);        

   // Display Image     
   UIImageView *imageView = [[UIImageView alloc] initWithImage:img];    
   [imageView setFrame:CGRectMake(70.0, 480.0,(size.width / 2), (size.height / 2))];    
   [scrollView addSubview:imageView]; 

   [imageView release];

   [scrollView scrollRectToVisible:imageView.frame animated:YES];

} 
```

我想要绘制矩形的解决方案，可以通过触摸调整大小并通过触摸移动...

我是 iPhone 的新手，所以....请帮助我如何做到这一点....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:18:18.663

我从这个链接[Image Cropper](https://github.com/barrettj/BJImageCropper)的好例子中得到了答案。

如果有人有比这更好的，请把它放在这里....如果值得的话，我会接受这个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:42:56.093

这是使用`UILongGesture`2 个手指的简单方法。选择矩形仅限于触摸。SelectionView`UIView`最初是隐藏的。

这是手势的初始化`UIViewController`：

```
UILongPressGestureRecognizer *twoFingerLongGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerLongGesture:)];
[twoFingerLongGesture setNumberOfTouchesRequired:2];
[self.view addGestureRecognizer:twoFingerLongGesture]; 
```

这是手势的处理：

```
- (void)handleTwoFingerLongGesture:(UIGestureRecognizer *)sender
{
    switch (sender.state) {
        case UIGestureRecognizerStateBegan:
        {
            NSLog(@"mainView 2FingerLONG - UIGestureRecognizerStateBegan");
            CGPoint p1 = [sender locationOfTouch:0 inView:self.view];
            CGPoint p2 = [sender locationOfTouch:1 inView:self.view];
            [self updateFrameSelectionWithPoint1:p1 point2:p2];
            [self.view bringSubviewToFront:selectionView];
            selectionView.hidden = NO;
            break;
        }
        case UIGestureRecognizerStateChanged:
        {
            NSLog(@"mainView 2FingerLONG - UIGestureRecognizerStateChanged");
            CGPoint p1 = [sender locationOfTouch:0 inView:self.view];
            CGPoint p2 = [sender locationOfTouch:1 inView:self.view];
            [self updateFrameSelectionWithPoint1:p1 point2:p2];
            break;
        }
        case UIGestureRecognizerStateEnded:
        {
            selectionView.hidden = YES;
            // Here you must perform the selection
            break;
        }
        case UIGestureRecognizerStateCancelled:
        {
            selectionView.hidden = YES;
            break;
        }
        default:
            break;
    }
}

- (void) updateFrameSelectionWithPoint1:(CGPoint)p1 point2:(CGPoint)p2
{
    CGRect frameSelection;
    frameSelection.origin.x = fminf(p1.x, p2.x);
    frameSelection.origin.y = fminf(p1.y, p2.y);
    frameSelection.size.width = fabsf(p1.x - p2.x);
    frameSelection.size.height = fabsf(p1.y - p2.y);
    selectionView.frame = frameSelection;
} 
```

# html - 如何在css中仅在边框的顶部圆角？

> ID：10074023
> 
> 赞同：66
> 
> 时间：2012-04-09T13:35:04.390
> 
> 标签：html, css

在我的网站中，我需要使 div 仅在顶角具有圆角。但我不知道该怎么做。有人能帮我吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-04-09T13:41:08.490

Brendan 的回答是正确的，但要让它在更多浏览器中呈现，你应该使用这个：

```
-moz-border-radius: 0px;
-webkit-border-radius: 3px 3px 0px 0px;
border-radius: 3px 3px 0px 0px; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-09T13:37:53.390

```
border-top-left-radius: 3px;
border-top-right-radius: 3px; 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-09T13:40:22.077

其他答案是正确的，但有速记解决方案：

```
border-radius: 3px 3px 0 0; 
```

这将仅使顶角变圆，而将底角留在原处。值的顺序是顺时针 - 左上、右上、右下、左下。

这是一个例子：http: [//jsfiddle.net/9sXWf/](http://jsfiddle.net/9sXWf/)

# spring - ResultSetExtractor 与 Rowmapper 有什么区别？

> ID：10074025
> 
> 赞同：49
> 
> 时间：2012-04-09T13:35:11.520
> 
> 标签：spring, jdbctemplate

我在行映射器和结果集提取器回调接口上都工作过。我发现了不同之处，即，

1.Row mapper 可以逐行处理。但是Resultset 提取器我们可以导航所有行并且返回类型是对象。

除了上面还有什么不同吗？。Rowmapper 内部的工作原理和返回类型是列表吗？。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-01-08T17:41:10.000

基本区别在于ResultsetExtractor，您需要自己遍历结果集，比如在while循环中。此接口为您提供一次对整个 ResultSet 的处理。接口方法 extractData(ResultSet rs) 的实现将包含该手动迭代代码。 [查看ResultsetExtractor的一种实现](http://www.javatpoint.com/ResultSetExtractor-example)

而像 RowCallbackHandler 这样的回调处理程序，接口方法 processRow(ResultSet rs) 会为您循环。

RowMapper 既可以用于映射每一行，也可以用于映射整行。

对于整行对象（通过模板方法 jdbcTemplate.query()）

```
 public List findAll() {    
    String sql = "SELECT * FROM EMPLOYEE";
    return jdbcTemplate.query(sql, new EmployeeRowMapper());
} 
without casting will work 
```

对于单个对象（使用模板方法 jdbcTemplate.queryForObject()）

```
@SuppressWarnings({ "unchecked", "rawtypes" })
public Employee findById(int id) {
    String sql = "SELECT * FROM EMPLOYEE WHERE ID = ?";
//  jdbcTemplate = new JdbcTemplate(dataSource);

    Employee employee = (Employee) jdbcTemplate.queryForObject(sql,  new EmployeeRowMapper(), id );

    // Method 2 very easy
    //  Employee employee = (Employee) jdbcTemplate.queryForObject(sql, new Object[] { id }, new BeanPropertyRowMapper(Employee.class));

    return employee;
} 
```

* * *

```
@SuppressWarnings("rawtypes")
public class EmployeeRowMapper implements RowMapper {

public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
    Employee employee = new Employee();
    employee.setId(rs.getInt("ID"));
    employee.setName(rs.getString("NAME"));
    employee.setAge(rs.getInt("AGE"));
    return employee;
} 
```

}

最佳用例：

**Row Mapper：**当一个ResultSet的每一行都映射到一个域Object时，可以实现为私有内部类。

**RowCallbackHandler：**当没有从每一行的回调方法返回值时，例如将行写入文件，将行转换为 XML，在添加到集合之前过滤行。非常有效，因为这里没有完成 ResultSet 到 Object 的映射。

**ResultSetExtractor：**当多行 ResultSet 映射到单个 Object 时。就像在查询中进行复杂连接时，可能需要访问整个 ResultSet 而不是单行 rs 来构建复杂的 Object，并且您希望完全控制 ResultSet。就像将从 TABLE1 和 TABLE2 的连接返回的行映射到完全重构的 TABLE 聚合。

**ParameterizedRowMapper**用于创建复杂对象

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-09T13:46:19.640

[JavaDoc 的`ResultSetExtractor`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html)：

> 该接口主要用于 JDBC 框架本身。RowMapper 通常是 ResultSet 处理的一种更简单的选择，每行映射一个结果对象，而不是为整个 ResultSet 映射一个结果对象。

[`ResultSetExtractor`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html)假设提取整个`ResultSet`（可能是多行），同时[`RowMapper`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html)一次输入一行。

大多数时候，`ResultSetExtractor`将循环`ResultSet`使用`RowMapper`Spring 的代码片段示例`RowMapperResultSetExtractor`：

```
List<T> results = (this.rowsExpected > 0 ? new ArrayList<T>(this.rowsExpected) : new ArrayList<T>());
int rowNum = 0;
while (rs.next()) {
    results.add(this.rowMapper.mapRow(rs, rowNum++));
}
return results; 
```

注意，所有结果都会被转换，这会产生 Out Of Memory 异常。

# 也可以看看

*   [`RowMapperResultSetExtractor`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapperResultSetExtractor.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-07T05:52:00.237

`RowMapper`：一次处理一条ResultSet记录。

`ResultSetExtractor`：一次处理多条ResultSet记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-27T15:56:16.797

我认为 ResultSetExtractor 可能具有优势的一个地方是，当您拥有一个结果集（例如从调用存储过程）和一个行映射器，并且想要像在 jdbcTemplate 方法的幕后那样处理它们时，例如查询（字符串 sql，RowMapper 行映射器）。在这种情况下，您可以通过使用 ResultSetExtractor 而不仅仅是 RowMapper 来手动迭代结果集。

例如：

行映射器

```
ResultSet resultSet = cs.executeQuery();
int row = 0;
DateRowMapper dateRowMapper = new DateRowMapper();
List<String> dates = new ArrayList<>();
while (resultSet.next()) {
    dates.add(dateRowMapper.mapRow(resultSet, ++row));
}
return dates; 
```

结果集提取器

```
ResultSet resultSet = callableStatement.executeQuery();
return new RowMapperResultSetExtractor<>(new DateRowMapper()).extractData(resultSet); 
```

# powershell - 需要在无法访问远程桌面的远程服务器上运行命令

> ID：10074026
> 
> 赞同：1
> 
> 时间：2012-04-09T13:35:17.563
> 
> 标签：powershell

正如标题所述，我需要在**远程服务器上运行****命令**，但我无权访问远程桌面！我认为这应该可以使用**Powershell**，但我找不到任何好的教程。

 ****建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:38:16.870

最简单的方法是使用**psexec.exe**（Microsoft Sysinternals 的一部分）。

你也可以使用powershell。

几天前，我写了一篇关于这两种选择的博文：

[http://blog.degree.no/2012/03/executing-commands-and-programs-on-a-remote-machine-using-powershell/](http://blog.degree.no/2012/03/executing-commands-and-programs-on-a-remote-machine-using-powershell/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:09:44.610

使用 PSEXEC 或 PowerShell 远程处理时，您可以在远程计算机上执行命令，但它不会与任何当前登录的用户交互。使用 PowerShell 需要在您的计算机上安装 2.0，并且必须启用远程和远程处理，并且您必须在远程计算机上具有管理员权限。****

# ssas - 对 ssas 聚合设计感到困惑

> ID：10074028
> 
> 赞同：0
> 
> 时间：2012-04-09T13:35:24.743
> 
> 标签：ssas

我已经阅读了 ssas 中的聚合设计选项卡。它告诉我们可以预先计算聚合，它将提高响应时间。但是当我尝试该选项时，我还没有完成任何显示聚合类型的步骤（例如:sum,avg etc) 我们必须做的。在其中一个步骤中，有一个指定行数的选项。所以聚合只意味着表中的行数？除此之外，我们知道，还有一个计算度量选项，我们可以指定 sum 或 avg 等。这也是一种聚合对吗？

那么，任何人都可以说清楚有两个吗？

先感谢您.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:31:17.567

我不确定我是否理解你的问题，但聚合方法是为每个度量定义的。查看度量的属性以了解使用了哪种聚合方法。

SSAS 使用估计的（每个分区的）行数来确定聚合设计的必要存储空间。

# c# - 无锁引用计数

> ID：10074030
> 
> 赞同：6
> 
> 时间：2012-04-09T13:35:33.720
> 
> 标签：c#, .net, concurrency, locking, reference-counting

我正在开发一个需要大量 C API 互操作的系统。部分互操作需要在任何操作之前和之后初始化和关闭相关系统。不这样做将导致系统不稳定。我通过简单地在核心一次性环境类中实现引用计数来实现这一点，如下所示：

```
public FooEnvironment()
{
  lock(EnvironmentLock)
  {
    if(_initCount == 0)
    {
      Init();  // global startup
    }
    _initCount++;
  }
}

private void Dispose(bool disposing)
{
  if(_disposed)
    return;

  if(disposing)
  {
    lock(EnvironmentLock)
    {
      _initCount--;
      if(_initCount == 0)
      {
        Term(); // global termination
      }
    }
  }
} 
```

这工作正常并实现了目标。但是，由于任何互操作操作都必须嵌套在 FooEnvironment using 块中，因此我们一直在锁定，分析表明这种锁定占运行时完成工作的近 50%。在我看来，这是一个足够基本的概念，.NET 或 CLR 中的某些东西必须解决它。有没有更好的方法来做引用计数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T15:16:26.127

这是一项比您乍看之下可能预期的更棘手的任务。我不相信 Interlocked.Increment 足以完成您的任务。相反，我希望您需要使用 CAS（比较和交换）来执行一些魔法。

还要注意，*很容易*得到这个大部分正确，但是当你的程序因 heisenbugs 而崩溃时，大部分正确仍然是完全错误的。

我强烈建议在走这条路之前进行一些真正的研究。如果您搜索“无锁引用计数”，那么几个不错的起点会出现在顶部。 [Dobbs 博士的这篇文章](https://web.archive.org/web/20110913041849/http://drdobbs.com/184401888)很有用，[这个 SO Question](https://stackoverflow.com/questions/1147904/x86-equivalent-for-lwarx-and-stwcx)可能是相关的。

最重要的是，请记住*无锁编程很难*。如果这不是您的专长，请考虑退后一步并围绕参考计数的粒度调整您的期望。如果您不是专家，重新考虑您的基本引用计数策略可能比创建可靠的无锁机制要便宜得多。尤其是当您还不知道无锁技术实际上会更快时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:55:30.750

正如[哈罗德的](https://stackoverflow.com/users/555045/harold)评论指出的那样，答案是[`Interlocked`](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)：

```
public FooEnvironment() {
  if (Interlocked.Increment(ref _initCount) == 1) {
    Init();  // global startup
  }
}

private void Dispose(bool disposing) {
  if(_disposed)
    return;

  if (disposing) {
    if (0 == Interlocked.Decrement(ref _initCount)) {
      Term(); // global termination
    }
  }
} 
```

两者都[`Increment`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)返回[`Decrement`](http://msdn.microsoft.com/en-us/library/1z4b2e5y.aspx)新计数（仅用于这种用法），因此进行不同的检查。

但请注意：如果其他任何东西需要并发保护，*这将不起作用。*`Interlocked`操作本身是安全的，但没有别的（包括不同线程的`Interlocked`调用相对顺序）。上面的代码`Init()`在另一个线程完成构造函数后仍然可以运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:49:59.547

可能在类中使用通用静态变量。静态只是一件事，并不特定于任何对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:55:54.893

我相信这将为您提供使用 Interlocked.Increment/Decrement 的安全方式。

**注意**：这过于简单了，如果 Init() 抛出异常，下面的代码可能会导致**死锁。**当计数变为零时，还有一个**竞争条件**，初始化被重置并再次调用构造函数。`Dispose`我不知道您的程序流程，因此如果您有可能在几次 dispose 调用后再次初始化，那么您最好使用像[SpinLock这样更便宜的锁，而不是 InterlockedIncrement。](http://msdn.microsoft.com/en-us/library/system.threading.spinlock.aspx)

```
static ManualResetEvent _inited = new ManualResetEvent(false);
public FooEnvironment()
{
    if(Interlocked.Increment(ref _initCount) == 1)
    {
        Init();  // global startup
        _inited.Set();
    }

    _inited.WaitOne();
}

private void Dispose(bool disposing)
{
    if(_disposed)
        return;

    if(disposing)
    {
        if(Interlocked.Decrement(ref _initCount) == 0)
        {
            _inited.Reset();
            Term(); // global termination
        }
    }
} 
```

**编辑：**
在进一步考虑这一点时，您可能需要考虑重新设计一些应用程序，而不是这个类来管理 Init 和 Term，只需在应用程序启动时调用 Init 并在应用程序关闭时调用 Term，然后你完全不需要锁定，如果锁定显示为您执行时间的 50%，那么您似乎总是想调用 Init，所以只需调用它就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T09:26:05.613

您可以使用以下代码使其几乎无锁。它肯定会减少争用，如果这是您的主要问题，那将是您需要的解决方案。

另外我建议从析构函数/终结器调用 Dispose（以防万一）。`disposing`我已经更改了您的 Dispose 方法 - 无论参数如何，都应该释放非托管资源。检查[此](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)以获取有关如何正确处置对象的详细信息。

希望这对您有所帮助。

```
public class FooEnvironment
{
    private static int _initCount;
    private static bool _initialized;
    private static object _environmentLock = new object();

    private bool _disposed;

    public FooEnvironment()
    {
        Interlocked.Increment(ref _initCount);

        if (_initCount > 0 && !_initialized)
        {
            lock (_environmentLock)
            {
                if (_initCount > 0 && !_initialized)
                {
                    Init(); // global startup
                    _initialized = true;
                }
            }
        }
    }

    private void Dispose(bool disposing)
    {
        if (_disposed)
            return;

        if (disposing)
        {
            // Dispose managed resources here
        }

        Interlocked.Decrement(ref _initCount);

        if (_initCount <= 0 && _initialized)
        {
            lock (_environmentLock)
            {
                if (_initCount <= 0 && _initialized)
                {
                    Term(); // global termination
                    _initialized = false;
                }
            }
        }

        _disposed = true;
    }

    ~FooEnvironment()
    {
        Dispose(false);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T01:05:34.580

使用`Threading.Interlocked.Increment`会比获取锁、执行增量和释放锁快一点，但不会非常快。多核系统上任一操作的昂贵部分是强制在内核之间同步内存缓存。的主要优势`Interlocked.Increment`不是速度，而是它将在有限的时间内完成。相比之下，如果一个人试图获得一个锁，执行一个增量，然后释放锁，即使这个锁除了保护计数器之外没有其他目的，如果其他线程有可能不得不永远等待获得锁，然后被搁置。

您没有提及您使用的是哪个版本的 .net，但有一些`Concurrent`类可能有用。根据您分配和释放事物的模式，一个看起来有点棘手但可以正常工作的类是`ConcurrentBag`班级。它有点像队列或堆栈，只是不能保证事情会以任何特定的顺序出现。在您的资源包装器中包含一个指示它是否仍然好的标志，并在资源本身中包含对包装器的引用。创建资源用户时，将包装对象放入包中。当不再需要资源用户时，设置“无效”标志。只要包中至少有一个设置了“有效”标志的包装器对象，或者资源本身包含对有效包装器的引用，资源就应该保持活动状态。如果在删除项目时资源似乎没有有效的包装，获取锁，如果资源仍然没有有效的包装，则将包装从包中拉出，直到找到有效的包装，然后将该资源与资源一起存储（或者，如果没有找到，则销毁资源）。如果当一个项目被删除时，资源包含一个有效的包装器，但包似乎可能包含过多数量的无效项目，获取锁，将包的内容复制到数组，然后将有效项目放回包中。记下有多少物品被退回，这样就可以判断何时进行下一次清除。

这种方法可能看起来比使用锁或 更复杂`Threading.Interlocked.Increment`，并且需要担心很多极端情况，但它可能会提供更好的性能，因为`ConcurrentBag`它旨在减少资源争用。如果处理器 1 执行`Interlocked.Increment`在某个位置，然后处理器 2 这样做，处理器 2 将必须指示处理器 1 从其缓存中刷新该位置，等到处理器 1 这样做，通知所有其他处理器它需要控制该位置，加载该位置位置到它的缓存中，最后开始增加它。在这一切发生之后，如果处理器 1 需要再次增加位置，则需要相同的一般步骤序列。所有这些都非常缓慢。相比之下，ConcurrentBag 类的设计目的是让多个处理器可以将内容添加到列表中而不会发生缓存冲突。在添加内容和删除内容之间的某个时间，必须将它们复制到一致的数据结构中，但是可以以产生良好缓存性能的方式分批执行此类操作。

我没有尝试过像上面这样使用 using 的方法`ConcurrentBag`，所以我不知道它实际上会产生什么样的性能，但根据使用模式，它可能会提供比通过引用计数获得的性能更好的性能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T17:08:07.860

Interlocked class 方法的工作速度比 lock 语句快一点，但在多核机器上速度优势可能不是很大，因为 Interlocked 指令必须绕过内存缓存层。

当代码未使用和/或程序退出时调用 Term() 函数有多重要？

通常，您只需将调用 Init() 一次放在包装其他 API 的类的[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=VS.80%29.aspx)中，而不必真正担心调用 Term()。例如：

```
static FooEnvironment() { 
    Init();  // global startup 
} 
```

CLR 将确保静态构造函数将在封闭类中的任何其他成员函数之前被调用一次。

还可以挂钩某些（但不是全部）应用程序关闭场景的通知，从而可以在干净关闭时调用 Term()。见这篇文章。[http://www.codeproject.com/Articles/16164/Managed-Application-Shutdown](http://www.codeproject.com/Articles/16164/Managed-Application-Shutdown)

# c# - DataGridView 使用对象列表作为 DataSource 过滤 BindingSource

> ID：10074032
> 
> 赞同：17
> 
> 时间：2012-04-09T13:35:45.997
> 
> 标签：c#, winforms

我正在尝试使用 BindingList 作为数据源来过滤 BindingSource。我试过 BindingSource.Filter = 'Text Condition' 但它没有用，没有任何反应，屏幕上的数据保持不变。但是，如果我使用 DataSet 作为数据源，它就可以工作。是否可以使用 BindingSource.Filter 属性过滤对象列表？

我有以下课程：

```
class Person
        {
            public String Nombre { get; set; }
            public String Apellido { get; set; }
            public int DNI { get; set; }
            public int Edad { get; set; }
            public Decimal Tamano { get; set; }
        } 
```

这就是我使用它的方式：

```
BindingList<Person> personas = new BindingList<Person> { 
                new Person{ Apellido = "App1", DNI = 3011, Edad = 20, Nombre ="Name1", Tamano = new decimal(1.7)}
                ,new Person{ Apellido = "App2", DNI = 1520, Edad = 30, Nombre ="Name2", Tamano = new decimal(1.5)}
                ,new Person{ Apellido = "App3", DNI = 5654, Edad = 21, Nombre ="Name3", Tamano = new decimal(1.6)}
                ,new Person{ Apellido = "App4", DNI = 778, Edad = 40, Nombre ="Name4", Tamano = new decimal(1.68)}
            };

            BindingSource bs = new BindingSource();
            bs.DataSource = personas;
            grid.DataSource = bs;

            bs.Filter = "Apellido like 'App1'"; 
```

这只是一个例子，这个想法是为了测试是否可以过滤这样的数据源。我将在一个新项目中使用这些知识。

pd：我们的想法是尽可能使用 BindingSource.Filter。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T13:45:07.647

根据[http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx)

> 只有实现`IBindingListView`接口的底层列表支持过滤。

[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)似乎没有实现[`IBindingListView`](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglistview.aspx)- 因为它是**基础列表**，所以您的集合不会过滤。

[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)类虽然不是通用类，但确实实现了此接口，因此请尝试将其用作您的角色集合。我觉得简单地将新的 BindingSource 的数据源分配给 BindingList 是不够的，因为它不会更改基础列表。尝试：

```
BindingSource personas = new BindingSource { new Person{ ... }, ... }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:58:45.143

作为实现 IBindingListView 的替代方案，您可以尝试这种类型的过滤：

```
BindingList<Person> personas = new BindingList<Person> {  
new Person{ Apellido = "App1", DNI = 3011, Edad = 20, Nombre ="Name1", Tamano = new decimal(1.7)} 
,new Person{ Apellido = "App2", DNI = 1520, Edad = 30, Nombre ="Name2", Tamano = new decimal(1.5)} 
,new Person{ Apellido = "App3", DNI = 5654, Edad = 21, Nombre ="Name3", Tamano = new decimal(1.6)} 
,new Person{ Apellido = "App4", DNI = 778, Edad = 40, Nombre ="Name4", Tamano = new decimal(1.68)} 
};

BindingList<Person> filtered = new BindingList<Person>(personas.Where(
                                 p => p.Apellido.Contains("App1")).ToList());
grid.DataSource = filtered; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T13:40:50.293

我认为这是因为 BindingSource 不知道它正在过滤什么类型的数据。将数据转换为数据集并转换为列和行后，即可运行过滤器。因为你的数据源是一个类，它不能做自动过滤。

# css - Drupal css导致多个div彼此相邻以进行图像换行

> ID：10074036
> 
> 赞同：0
> 
> 时间：2012-04-09T13:36:20.550
> 
> 标签：css, drupal-7

我有一个页面，我对设计的布局非常满意：http: [//dev.twoggle.com/](http://dev.twoggle.com/)

然后我把它放到一个 Drupal 主题中，它在中间插入了一些额外的 div，我正在努力弄清楚如何让我原来的样子回来！: dev2.parkingmadeeasy.com.au

ser_text_right 类，当我使用 Firebug 的页面元素检查工具将鼠标悬停在它上面时，似乎与 ser_image_left 类重叠 - 我不确定为什么会发生这种情况。

下面是导致我的问题的 css（当与 Drupal 的输出相结合时）。

我想将整个 ser_text_right 类向上移动，但不确定如何？

非常感谢您的帮助，Gvanto

```
 /*
=======================================================================
        services-prov
=======================================================================
*/
.services-pro {
    background: none repeat scroll 0 0 #f3f3f3;
    border: 1px solid #A2A1A1;
    border-radius: 5px 5px 5px 5px;
    float:left;
    width:998px;
}
.services-pro .ser {
    float: left;
    margin: 0;
    padding: 10px;
    width: 47%;
}

.services-pro .ser img {
    margin: 0px 10px 10px;
    padding: 0;
}

.services-pro .ser .ser_image_left {
    float: left;
    height: 100px;
}

.services-pro .ser .ser_text_right {
    padding:0;
}

.services-pro .ser .ser_text_right h4 {
    padding: 3px 0 0px;
    font-weight:bold;
    font-size:14px;
}

.services-pro .ser .ser_text_right p {
    color: #000;
    margin: 0;
    padding: 2px;
    font-size:14px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:45:23.403

将此添加到您的 CSS 中：

```
#block-views-home-slideshow-block { width: 400px; float:right; } 
```

当然，您可以将宽度更改为图像的任何宽度。

# javascript - 单独的回调函数java脚本

> ID：10074044
> 
> 赞同：0
> 
> 时间：2012-04-09T13:37:10.583
> 
> 标签：javascript

我在我的网页中使用 kcfinder 没问题，但只有一个问题；我需要分离回调函数并进一步使用它......但我不能

```
function openKCFinder(div) {
window.KCFinder = {
    callBack: function(url) {
///all action 
} 
```

//我需要类似的东西 ///这是行不通的；

```
function set_pic(url,div){
    ///all action
}
function openKCFinder(div) {
  window.KCFinder = {
    callBack: set_pic(url,div) ;
 } 
```

谢谢你的帮助。

请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:45:44.137

您当前的代码`set_pic(url,div)`立即运行；它的返回值被赋值给`callback`. 尝试：`callback: function(){ set_pic(url, div); }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:44:27.287

只需制作另一个功能：

```
 callback: function(url) { set_pic(url, div); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T16:37:33.100

**您可以按照此代码希望解决此问题**

```
function set_pic(url, div,callBack) {

    callBack(div)
}

function openKCFinder(div) {
    window.KCFinder = {
        callBack: set_pic(url, div)
    }
}

set_pic('passing url','passing div', openKCFinder(div)) 
```

# mpi - MPI + GPU：如何混合两种技术

> ID：10074047
> 
> 赞同：10
> 
> 时间：2012-04-09T13:37:27.147
> 
> 标签：mpi, gpu, hpc

我的程序非常适合 MPI。每个 CPU 都执行自己的特定（复杂）工作，生成单个`double`，然后我使用 an`MPI_Reduce`将每个 CPU 的结果相乘。

但是我重复了很多很多次（> 100,000）。因此，我想到 GPU 会大大加快速度。

我已经google了，但找不到任何具体的东西。您如何将 MPI 与 GPU 混合使用？程序有没有办法查询和验证**“哦，*这个*等级是GPU，其他都是CPU”？** 有推荐的教程之类的吗？

重要的是，我不想要或不需要一整套 GPU。我真的只需要很多 CPU，然后是单个 GPU 来加速常用`MPI_Reduce`操作。

这是我正在谈论的示意性示例：

假设我有 500 个 CPU。每个 CPU 以某种方式产生 50`double`秒。我需要将所有 250,00 个这些`double`s 相乘。然后我重复这 10,000 到 100 万次。如果我可以拥有一个 GPU（除了 500 个 CPU），这将非常有效。每个 CPU 将计算`double`所有约 100 万个“状态”的 50 秒。然后，所有 500 个 CPU 都会将它们`double`的 s 发送到 GPU。然后，GPU 会将`double`100 万个“状态”中的每一个的 250,000 s 相乘，产生 100 万个 s `doubles`。
这些数字并不准确。计算量确实很大。我只是想传达一般问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:48:16.047

这不是思考这些事情的方式。

我想说 MPI 和 GPGPU 的东西是正交的（*）。您在任务之间使用 MPI（对于哪些思考节点，尽管每个节点可以有多个任务），并且每个任务可能会或可能不会使用像 GPU 这样的加速器来加速任务内的计算。GPU 上没有 MPI 等级。

无论如何，Talonmies 是对的。这个特殊的例子听起来并不会从 GPU 中受益匪浅。每个任务有数万个双打也无济于事；如果你每双只做一个或几个 FLOP，将数据发送到 GPU 的成本将超过让所有这些内核在它们上运行的好处。

(*) 这曾经更清楚地是真实的；现在，例如，[GPUDirect](http://developer.nvidia.com/gpudirect)能够通过 infiniband 将内存复制到远程 GPU，区别就更加模糊了。然而，我坚持认为这仍然是最有用的思考方式，RDMA 到 GPU 之类的事情是一个重要的优化，但在概念上是一个小调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-26T08:42:49.223

[在这里](https://devblogs.nvidia.com/parallelforall/introduction-cuda-aware-mpi/)，我发现了一些关于该主题的新闻：

"*MPI（消息传递接口）是一种标准 API，用于通过分布式进程之间的消息进行数据通信，通常在 HPC 中用于构建可扩展到多节点计算机集群的应用程序。因此，MPI 与 CUDA 完全兼容，CUDA 专为在单台计算机或节点上进行并行计算而设计。想要将 MPI 和 CUDA 这两种并行编程方法结合起来的原因有很多。一个常见的原因是能够解决数据量太大而无法放入单个 GPU 的内存的问题，或者在单个节点上需要不合理的长计算时间。另一个原因是使用 GPU 加速现有的 MPI 应用程序，或者使现有的单节点多 GPU 应用程序能够跨多个节点进行扩展。使用支持 CUDA 的 MPI，可以轻松高效地实现这些目标。*"

# c# - 如何比较两个列表并将值设置为列表属性

> ID：10074049
> 
> 赞同：1
> 
> 时间：2012-04-09T13:37:37.613
> 
> 标签：c#, linq

我有两个清单

```
    清单 A 清单 B
    ID 名字 DepartmentID ID 名字 DepartmentID
    5 彼得空 5 彼得 1
    9 史蒂夫空 9 史蒂夫 2
    16 标记空 16 标记 3

```

我想使用 LINQ 比较这些列表，如果两个列表中的 ID 相等，我想在第一个列表 A 列表中设置 DepartmentID。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:56:49.457

```
ListA.ForEach(a=>a.DepartmentID = ListB.Any(b=>b.ID == a.ID) ? ListB.First(b=>b.ID == a.ID).DepartmentID : null); 
```

编辑：如果你想检查空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:59:28.117

你可以加入他们。然后枚举结果并保存更改：

```
var results = from a in ListA
              join b in ListB on ai.ID equals bi.ID
              select new
              {
                  itemA = a,
                  itemB = b
              };

foreach(var result in results)
{
    // This was not listed as a requirement, but it may be a valid check
    if (itemA.FirstName == itemB.FirstName)
    {
        itemB.DepartmentID = itemA.DepartmentID;
    }
}

DataContext.SubmitChanges(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T07:59:07.820

```
ListA.Join(ListB, x => x.ID, y => y.ID, (x, y) =>
{
    x.DepartmentID = y.DepartmentID;
    return 0;
}).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:44:58.523

你可以做什么使用另一个列表并使用以下代码

```
var temp = from ai in ListA 
        join bi in ListB on ai.id equals bi.id
        select bi;

var ListC = temp.ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:00:52.860

```
var replacements = ListA
    .Where(a => a.DepartmentID == null)
    .Join(ListB, 
         a => a.ID, 
         b => b.ID, 
         (a, b) => new { Source = a, Replacement = b }
    );

foreach (var item in replacements)
{
    // here you could perform more replacements
    item.Source.DepartmentID = item.Replacement.DepartmentID;
} 
```

# postgis - 计算或保存空间数据

> ID：10074051
> 
> 赞同：0
> 
> 时间：2012-04-09T13:37:52.290
> 
> 标签：postgis

在 Postgis 等数据库中处理空间数据时，在每个 SELECT 上计算两个多边形的交点或多边形的面积是否是一种好方法？还是对 INSERT、UPDATE 或 DELETE 语句进行计算并将结果保存在表的列中对性能问题更好？大空间数据库中的方法如何？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:26:59.460

这个问题太抽象了。

当然，如果您使用交叉区域 ( `ST_Intersection`)，您应该存储`ST_Intersection`几何结果。但在实践中，我们经常不得不即时计算交叉点，因为入口参数取决于动态参数（例如，温度<30C 的区域与风的区域> 20 ms 的交叉点）。顺便说一句，您可以使用 VIEW 以这种方式简化查询。

当然，如果您的表包含两个几何列参数，或者其中一个是常量，则最好存储交集。特别是您可以为此列构建空间索引。

没有任何一成不变的规则。您应该以实践条件为指导：数据库大小、使用类型等。例如，我存储了雷击点生成的椭圆（置信区），但我不存储与电力线相交（布尔值）的事实，因为那些intersetionings 可以参数化。

# c - 检测传入的套接字连接

> ID：10074057
> 
> 赞同：0
> 
> 时间：2012-04-09T13:38:25.340
> 
> 标签：c, sockets

我正在编写一个服务器应用程序并且`select`在套接字上遇到问题。`select`即使客户端尝试连接，服务器端也始终返回 0。当我评论`select`并直接进入该`accept`行时，一切正常（但我的应用程序被阻止）

服务器代码（在 C 中）：

```
int sockfd = socket(AF_INET, SOCK_STREAM, 0);
memset((char *) &serv_addr, 0, sizeof (serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(System_->commParams.port);
bind(sockfd, (struct sockaddr *) &serv_addr, sizeof (serv_addr));
fd_set fds;
timeval tv;
FD_ZERO(&fds);
FD_SET(sockfd, &fds);
int retval = 0;
tv.tv_sec = 1;
tv.tv_usec = 0;
listen(sockfd, 5);
while (retval == 0)
{
   retval = select(1, &fds, NULL, NULL, &tv);
   tv.tv_sec = 1;
   tv.tv_usec = 0;
   FD_ZERO(&fds);
   FD_SET(sockfd, &fds);        
}
unsigned int clilen = sizeof (cli_addr);
int newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen); 
```

客户端代码（（在python中）：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((RemoteIP, Port)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:41:03.117

> ```
> retval = select(1, &fds, NULL, NULL, &tv); 
> ```

的第一个参数`select`应该是`sockfd + 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:42:00.097

```
 retval = select(1, &fds, NULL, NULL, &tv); 
```

1有点低。尝试：

```
 retval = select(sockfd+1, &fds, NULL, NULL, &tv); 
```

# php - 如何获取 cakephp 中 updateAll() 函数更新的行的 ID？

> ID：10074060
> 
> 赞同：0
> 
> 时间：2012-04-09T13:38:34.840
> 
> 标签：php, mysql, cakephp, cakephp-1.3, cakephp-model

我正在 cakephp 中开发一个应用程序。我需要使用 cakephp 中的 updateAll() 函数获取所有已更新行的 ID。任何建议将不胜感激。谢谢..

这是我应该在我的应用模型中做的吗

```
class AppModel extends Model {

    var $infos = array();

    function updateAll($fields, $conditions = true) {
        $this->$infos = $this->find('all', array('conditions' => $conditions));
        $return = parent::updateAll($fields, $conditions);
        $this->afterUpdateAll();
        return $return;
    }

    function afterUpdateAll(){
        foreach ($this->$infos as $info) {
            //do something
        }
    }

} 
```

这行得通吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:46:04.693

您必须发出`find`与您传递给的相同条件的传递`updateAll`。

如果更新操作更改了条件中使用的任何列中的数据，则应在调用`find` *之前*`updateAll`使用.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:46:46.537

如果你是`UPDATE`uncial 行 - 你可能会在`SELECT`之后再次使用它们`UPDATE`

# c# - 当收集计数小于参数时取（参数）

> ID：10074062
> 
> 赞同：11
> 
> 时间：2012-04-09T13:38:47.430
> 
> 标签：c#

假设我有一个对象列表 TheListOfObjects。

如果我写这个：

```
TheListOfObjects = TheListOfObjects.Take(40).ToList(); 
```

如果列表中只有 30 个项目，它会崩溃还是只返回前 30 个？当 TheListOfObjects 为空，甚至为空时？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-09T13:40:59.753

这是您*应该*尝试或至少检查[文档](http://msdn.microsoft.com/en-us/library/bb503062.aspx)的地方之一。

> 如果列表中只有 30 个项目，它会崩溃还是只返回前 30 个？

它只会返回前 30 个。

> 当 TheListOfObjects 为空时

它将返回空序列。

> 甚至为空？

这将导致一个`ArgumentNullException`.

来自 MSDN：

> `Take<TSource>`枚举 source 并产生元素，直到产生 count 个元素或 source 不再包含元素。
> 
> 如果`count`小于或等于零，`source`则不枚举并`IEnumerable<TSource>`返回空。

在例外情况下：

```
Exception             Condition
ArgumentNullException source is null 
```

在您登录 StackOverflow 的时间里，您可以检查 MSDN 并获得**权威**答案（请注意，一些稍微不正确或部分不完整的答案已在此处发布和删除）或启动 Visual Studio 并润滑您的轮子一点点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:40:42.327

MSDN 说：

> Take(Of TSource) 枚举 source 并产生元素，直到产生 count 个元素或 source 不再包含元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T13:41:12.883

来自[msdn](http://msdn.microsoft.com/en-us/library/bb503062.aspx)：

> `Take<T>` 枚举 source 并产生元素，直到产生 count 个元素或 source 不再包含元素。
> 
> 如果 count 小于或等于 0，则不枚举 source 并`IEnumerable<T>`返回空值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-17T16:20:33.337

试试这个

```
TheListOfObjects = TheListOfObjects.Take(TheListOfObjects.Count > 30 ? 30 : TheListOfObjects.Count).ToList(); 
```

# c# - 使用动态表达式 API 时验证 ASP.NET MVC 3 控制器的操作参数

> ID：10074071
> 
> 赞同：4
> 
> 时间：2012-04-09T13:39:34.030
> 
> 标签：c#, asp.net-mvc-3, dynamic-linq

我有一个标准的 ASP.NET MVC 3 控制器，其操作具有以下签名： `public ActionResult Index(int? page, string sort, string sortDir)` 我的视图正在使用 WebGrid，因此它会自动生成参数。

接下来我使用动态表达式 API（又名动态 LINQ）将参数转换为查询。例子：

```
var customerSummary = CustomerManager.CustomerRepository.GetQuery()
      .OrderBy(sort + " " + sortDir)
      .Select(c => new CustomerSummaryViewModel()
                  {
                      Id = c.Id,
                      Name = c.Name,
                      IsActive = c.IsActive,
                      OrderCount = c.Orders.Count
                  })
      .Skip(page.Value - 1 * 10) //10 is page size
      .Take(10)
      .ToList(); 
```

# 目标

我想做的是使用[动态表达式 API](http://nuget.org/packages/DynamicQuery)本身来验证用于排序的参数（并可能创建一个有效的 lambda）。例如，我想使用`DynamicExpression.Parse()`or`DynamicExpression.ParseLambda()`方法来查看它们是否产生`ParseException`，在这种情况下，我可以用默认值替换错误的参数（例如按名称升序“名称 ASC”排序）...

# 问题

问题是`IQueryable`扩展只接受一个字符串如果我想使用`ParseLambda`然后将它提供给`.OrderBy`我不能使用方向（它只接受属性名称）。例如，我可以这样做：

```
var se = DynamicExpression.ParseLambda<Customer, string>("Name"); // now I can use  .OrderBy(se) which is same as .OrderBy(c=>c.Name) 
```

但不是这个

```
var se = DynamicExpression.ParseLambda<Customer, string>("Name DESC"); 
```

# 回顾

我想使用动态 LINQ 来 1）验证和 2）基于操作参数构建谓词（用于排序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:48:14.203

我对 Dymaic LINQ 不是很熟悉，但您可以执行以下操作：

```
var customerSummary = CustomerManager.CustomerRepository.GetQuery();

if ("desc".Equals(sortDir, StringComparison.CurrentCultureIgnoreCase))
   customerSummary = customerSummary.OrderByDescending(sort);
else
   customerSummary = customerSummary.OrderBy(sort);

var pageNumber = page.GetValueOrDefault();
if (pageNumber < 1)
   pageNumber = 1;

customerSummary = customerSummary
   .Select(c => new CustomerSummaryViewModel()
      {
         Id = c.Id,
         Name = c.Name,
         IsActive = c.IsActive,
         OrderCount = c.Orders.Count
      })
   .Skip((pageNumber - 1) * 10) 
   .Take(10)
   .ToList(); 
```

我在我的项目中做了类似的事情（除了我使用原始表达式），但更进一步。

我创建了一个像这样的基本 ViewModel：

```
class TableViewModel 
{
   public string SortColumn { get; set; }
   public bool IsAsc { get; set; }
   public int? PageNumber { get; set; }
} 
```

并创建了一个辅助方法来完成所有的分页/排序工作。签名是这样的：

```
public static IQueryable<T> TableHelper(this IQueryable<T> source, TableViewModel model) { ... } 
```

当我需要从表控件接收数据并返回请求的数据时，控制器操作如下所示：

```
public ActionResult Index(TableViewModel model)
{
   var data = _productRepository.AsQueryable().TableHelper(model);

   ... //Operation on data
} 
```

在调用助手之前和之后你可以自由地应用任何过滤或smth的共同点。

非常方便。

当我需要扩展我的 ViewModel 时，我继承它并向子模型添加新成员。

**UPD：**如果您决定保留 LINQ，请尝试以下签名 -`OrderBy("Name", "ascending");`

**UPD2：**如果你想验证你的排序参数，我认为，反射是唯一的选择。像这样的东西：

```
bool doSort = typeof(Product).GetProperty(sort, BindingFlags.Instance | BindingFlags.Public | BindingFlags.FlattenHierarchy /*Or whatever flags you need*/) != null 
```

这样一来，您应该仅在为真时应用`OrderBy`/`OrderByDescending`逻辑。`doSort`否则，只需跳过排序或应用任何默认逻辑。

在我看来，你想要的代码功能越多，适合它的 LINQ 似乎就越少。一旦`PropertyInfo`获得，下一个合理的步骤可能是在表达中使用它。一旦我们这样做了，哪里会是 LINQ 的地方？:)

我同意表达式和反射代码在操作中非常难看，但是将其移到外部，例如，在我的情况下，到 ExtensionMethod，或者在控制器基类的 NonAction 方法中，可以避免你看到它:)

# android - 从 Android 发布到 Rails 时的 MultiJson::DecodeError

> ID：10074076
> 
> 赞同：1
> 
> 时间：2012-04-09T13:39:56.660
> 
> 标签：android, ruby-on-rails, ruby-on-rails-3

我正在尝试将多部分 JSON 从 Android 发布到 Rails 3.2 JSON API 服务器。

我正在像这样构建 MuttipartEntity：

```
MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
mp.addPart("DATA", new StringBody(jsonPostObject.toString())); 
```

其中 jsonPostObject 是一个 JSONObject ，其中包含我要发布的数据，如果我使用 StringEntity 而不是 MultipartEntity 一切正常，但我需要上传文件以及 JSON 哈希..

rails 代码看起来像这样：

```
 @post = @current_user.posts.new(params[:DATA][:post]) 
```

我收到以下错误：

```
[e0497f16bbc4bfacf4bdff43113f1d34] [127.0.0.1] 
MultiJson::DecodeError (756: unexpected token at '--1Cg_oM4E624kPv1bobRRbZvkyO_kAKN3E
Content-Disposition: form-data; name="DATA"

{"tags":["df"],"location_id":2,"post":{"content":"test #df"}}
--1Cg_oM4E624kPv1bobRRbZvkyO_kAKN3E--
'):
  json (1.6.6) lib/json/common.rb:148:in `parse'
  json (1.6.6) lib/json/common.rb:148:in `parse'
  multi_json (1.2.0) lib/multi_json/engines/json_common.rb:9:in `decode'
  multi_json (1.2.0) lib/multi_json.rb:81:in `decode'
  activesupport (3.2.3) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:47:in      `  parse_formatted_parameters'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3)    lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in  `_run__1468729498116700342__call__1422066066276649474__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:14:in `block in call'
  activesupport (3.2.3) lib/active_support/tagged_logging.rb:25:in `tagged'
  railties (3.2.3) lib/rails/rack/logger.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/gal/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/gal/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/gal/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

[e0497f16bbc4bfacf4bdff43113f1d34] [127.0.0.1]   Rendered /home/gal/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
[e0497f16bbc4bfacf4bdff43113f1d34] [127.0.0.1]   Rendered /home/gal/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
[e0497f16bbc4bfacf4bdff43113f1d34] [127.0.0.1]   Rendered /home/gal/.rvm/gems/ruby-    1.9.3-p0/gems/actionpack-    3.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout     (10.0ms) 
```

更新：

这是使用“tcpflow”捕获的请求：

```
POST /api/posts.json HTTP/1.1
Content-Type: application/json
Accepts: application/json
X-API-KEY: 7d867d16a5e25337b6d7857965f812bee73b76ac
Content-Length: 203
Host: 10.0.2.2:3000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)

--UcMcwIxqCnaZ5GiqW1GVqb9JnK7n3rjH
Content-Disposition: form-data; name="DATA"

{"tags":["test"],"location_id":2,"post":{"content":"test content\n\n#test tag"}}
--UcMcwIxqCnaZ5GiqW1GVqb9JnK7n3rjH-- 
```

是否可以删除该令牌或如何使用 rails 正确解码它？

# selenium - Selenium IDE - 不重复所有测试用例常见操作的最佳方法

> ID：10074078
> 
> 赞同：0
> 
> 时间：2012-04-09T13:40:01.943
> 
> 标签：selenium, selenium-ide

对于我所有的 Selenium IDE TC，我都有一个共同的步骤，即使用用户名、密码登录并在每个 TC 结束时注销。

我能想到的最好方法是

在通用文件中创建用户 ID、密码、基本 url 作为变量。这样我就不必重复所有测试用例的通用步骤，如果用户 ID 或基本 url 发生变化 - 我不必修改每个 TC。

也在寻找机器人框架来解决这个问题，但无法解决。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:34:15.833

> 在通用文件中创建用户 ID、密码、基本 URL 作为变量

你完全正确！您还可以为将要重复的操作（“方法”）创建单独的文件，并将它们组织到不同的文件夹中。然后用这些文件组成不同的测试套件（使用相对路径，如../../../../）。在测试套件文件夹中，您可以存储包含仅与此测试套件和测试套件文件本身相关的变量的文件。例如，使用 Login.html、Logout.html 测试用例创建 Authentication 文件夹。测试套件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
  <title>Test Suite</title>
</head>
<body>
<table id="suiteTable" cellpadding="1" cellspacing="1" border="1" class="selenium"><tbody>
<tr><td><b>Test Suite</b></td></tr>
<tr><td><a href="StoredVariables.html">StoredVariables</a></td></tr>
<tr><td><a href="../../../../Tests/Authentication/Login.html">Login</a></td></tr>
...
<tr><td><a href="../../../../Tests/SomeActions/SomeActions.html">SomeActions</a></td></tr>
...
<tr><td><a href="../../../../Tests/Authentication/Logout.html">Logout</a></td></tr>
</tbody></table>
</body>
</html> 
```

变量将存在于所有测试套件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:47:18.097

使用 Selenium RC 或 Selenium 2 (WebDriver) 似乎你可能会更好，这将允许你初始化设置 ID、密码和设置文件？我之前遇到的这篇文章中显示了一些示例：[Selenium Test - 在多个测试运行中保留会话](https://stackoverflow.com/questions/5230197/selenium-test-preserve-session-across-multiple-test-runs) 对不起，如果这些是您已经知道的事情:)

# css - 当用户上传图像时，我如何使用 CSS 来最小化倾斜？

> ID：10074080
> 
> 赞同：0
> 
> 时间：2012-04-09T13:40:08.457
> 
> 标签：css, image, styles

我允许用户将个人资料图片上传到他们的个人资料页面。头像的尺寸为 100 像素 x 100 像素。如何在 css 中编辑我的 img 属性样式，以便当用户上传不完全正方形的图像时，图像失真最小化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:44:13.090

**[裁剪它](http://www.talkphp.com/advanced-php-programming/1709-cropping-images-using-php.html)**而不是正常更改它的尺寸。即使重新采样，它也会扭曲图像。让用户裁剪他上传的图像（使用 canvas/javascript）并让 PHP 脚本根据从中获得的坐标裁剪图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:48:02.497

在 CSS 中裁剪图像很简单——将其包装在 DIV 中并隐藏溢出：

```
div.imgwrapper {
    width: 100px;
    height: 100px;
    overflow: hidden;
} 
```

但是，问题在于，如果图像非常大——比如 600 像素 x 400 像素——那么你只会看到整个画面的一个小角落。如果图像小于 100 像素乘 100 像素，则不会向上调整大小。

解决此问题的唯一（客户端）方法是使用 JavaScript 检测图像的尺寸，即使这样它也会变得棘手（因为在图像加载之前您无法检测图像尺寸，但您无法检测图像从缓存中加载与图像，无需进一步的技巧）。我不会详细介绍，因为您没有要求 JS 解决方案，但您可以[搜索 SO 寻找一些解决方案](https://stackoverflow.com/search?q=image+resize+onload+javascript&submit=search)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:46:25.570

您可以像@Truth 提到的那样在上传时裁剪图像，或者使用像[TimThumb](http://code.google.com/p/timthumb/)这样的脚本将原始大小的图像即时裁剪为您需要的任何尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:47:13.960

无需借助某种通过代码裁剪图像的方法，另一种方法是使用 100px/100px `div`，并将上传的图像设置为此 div 的背景，并将其水平/垂直位置设置为居中。

当然，您需要检查上传图片的文件大小，否则您可能会在一页上加载 20 个 3Mb 的个人资料图片。

# c++ - 在 c++ 中使用 __asm 将 short 类型的变量移动到 EAX（VS 2010）

> ID：10074082
> 
> 赞同：1
> 
> 时间：2012-04-09T13:40:32.153
> 
> 标签：c++, visual-studio-2010, assembly

在 c++ (Visual Studio 2010) 中使用 asm 插入时，当我尝试将 short 类型的 16 位变量移动到 32 位 EAX 寄存器时出现“不兼容类型”错误。但是，如果我使用 16 位 AX 寄存器，一切正常。这个错误背后的逻辑是什么？谢谢！

```
#include <iostream>

int main()
{
   short sVar;

   std::cout << "sVar=";
   std::cin >> sVar;

   __asm
   {
      MOV AX, sVar;
      SHL AX, 1;
      MOV sVar, AX;
   }
   std::cout << sVar << "\n";

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T13:44:20.630

逻辑很简单 -`eax`是 32 位和`short`16 位，因此您不能将一个复制到另一个，因为它们的大小不同。`ax`是16位的，所以`short`可以复制没有问题。然后，您可以使用`movzx`或`movsx`将 16 位值扩展为 32 位，使用零或符号扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:18:44.547

EAX 是 32 位，sVar（短）是 16 位。在这种情况下，您需要查看 MOVSX（使用符号扩展移动）或 MOVZX（使用零扩展移动）。

# android - Android片段：从其他片段替换片段

> ID：10074087
> 
> 赞同：0
> 
> 时间：2012-04-09T13:40:47.523
> 
> 标签：android, android-fragments

可以制作这个 UI 架构：

```
 |-Fragment A              |-Tab A (Fragment)
                    |                         |
Fragment Activity <-|-Fragment with Tabhost <-|-Tab B (Fragment)
                    |                         |
                    |-Fragment B              |-Tab C (Fragment) 
```

Fragment A、B Fragment 和 Tabhost 直接放在 FrameActivity 中。标签 A、B 和 C 与 Tabhost 拼成片段。

Tab Fragment mast 能够将带有 Tabhost 的片段替换为其他片段（A 或 B）。

有可能制作吗？可能是存在的好例子吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:02:49.740

据我所知，您不能将片段添加到片段中。在设计文档中写道：“片段必须始终嵌入到活动中，并且片段的生命周期直接受到宿主活动生命周期的影响。” 因此，您的设计目前似乎无法开发。

# php - 如何检查用户是否喜欢 facebook 应用程序？

> ID：10074094
> 
> 赞同：2
> 
> 时间：2012-04-09T13:41:07.833
> 
> 标签：php, facebook, facebook-graph-api, facebook-like, facebook-page

我们如何检查用户是否喜欢 facebook 应用程序？

我正在尝试创建一个 Facebook 应用程序，其中有两个不同的页面，如果用户喜欢，则显示 page_1，否则显示 page_2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:29:52.717

```
<?php 
$user = $facebook->getUser(); 
if ($user) { 

try{ 
$user_profile = $facebook->api('/me');
 $likeID = $facebook->api(array( 'method' => 'fql.query',
 'query' => 'SELECT url FROM url_like WHERE user_id = "'.$user_profile['id'].'" AND url="myurl/"'; )); 
}
 catch(FacebookApiException $e) { }
 } 
if(count($likeID)>0) echo "User likes this page"; 
else echo "User doesn\'t like this page";

?> 
```

# 可靠和/或官方消息来源：

1.  [http://www.zuberi.me/2011/how-to-check-if-user-liked-the-application-or-page.html](http://www.zuberi.me/2011/how-to-check-if-user-liked-the-application-or-page.html)
2.  [http://www.chilipepperdesign.com/2011/02/15/reveal-fan-gate-like-gate-facebook-iframe-tab-tutorial-with-php](http://www.chilipepperdesign.com/2011/02/15/reveal-fan-gate-like-gate-facebook-iframe-tab-tutorial-with-php)
3.  [如何使用 Facebook 的 API 检查用户是否喜欢我的 Facebook 页面或 URL](https://stackoverflow.com/questions/5093398/check-if-user-liked-page)
4.  [Facebook如何检查用户是否喜欢页面并显示内容？](https://stackoverflow.com/questions/6246449/facebook-how-to-check-if-user-has-liked-page-and-show-content)
5.  [Facebook 检查用户是否“喜欢”该页面](https://stackoverflow.com/questions/4750012/facebook-check-if-user-liked-the-page)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:18:38.927

解决该问题的更好方法是：

```
// to generate user access token after the user is logged in
$USER_ACCESS_TOKEN = $facebook->getExtendedAccessToken();

$isFan = curl("https://api.facebook.com/method/pages.isFan?format=json&access_token=" . $USER_ACCESS_TOKEN . "&page_id=" . $FACEBOOK_PAGE_ID);

        function curl($url) {

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
            $data = curl_exec($ch);
            curl_close($ch);
            return $data;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:44:39.183

```
require 'facebook.php';

$app_id = "your app id";
$app_secret = "your app secret";
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true,
));

$signed_request = $facebook->getSignedRequest();

$like_status = $signed_request["app"]["liked"];

if ($like_status == 1){
echo 'User likes this page';
}
else{
echo 'User doesn\'t like this page';
} 
```

也许你应该尝试这样的事情，查看[Facebook 的 PHP SDK 参考页面](http://developers.facebook.com/docs/reference/php/)以了解确切的方法。

# java - 静态内部类的序列化

> ID：10074097
> 
> 赞同：13
> 
> 时间：2012-04-09T13:41:09.133
> 
> 标签：java, serialization, inner-classes

我们可以在 Java 中序列化静态内部类吗？类本身在这里被声明为静态的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-09T13:45:10.577

在这方面，静态内部类与顶级类没有什么不同：如果它被声明为实现`Serializable`（或者是声明为实现的类的子类`Serializable`），它可以被序列化。此外，与顶级类一样，在运行时序列化期间遇到的所有对象都必须是可序列化的，以避免`NotSerializableException`. 由于内部类是`static`，因此外部类的性质与此无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T17:19:38.787

@Tinkerbel 需要注意的一点 -

序列化静态嵌套类很好，但是当（将来）静态内部类被移动到不同的外部类时，反序列化旧对象是一个问题。

所有字段都被分配为默认/空。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-24T22:20:07.920

现在看来答案可能因 Java 版本而异。

JDK 7 中的序列化规范说：

注意 - 强烈建议不要对内部类（即不是静态成员类的嵌套类）（包括本地和匿名类）进行序列化，原因有几个。因为在非静态上下文中声明的内部类包含对封闭类实例的隐式非瞬态引用，所以序列化这样的内部类实例也会导致其关联的外部类实例的序列化。由 javac（或其他 JavaTM 编译器）生成的用于实现内部类的合成字段是依赖于实现的，并且可能因编译器而异；此类字段的差异可能会破坏兼容性并导致默认 serialVersionUID 值冲突。分配给本地和匿名内部类的名称也取决于实现，并且可能因编译器而异。由于内部类不能声明编译时常量字段以外的静态成员，因此它们不能使用 serialPersistentFields 机制来指定可序列化字段。最后，因为与外部实例关联的内部类没有零参数构造函数（此类内部类的构造函数隐式接受封闭实例作为前置参数），它们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。他们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。他们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。

根据在 Oracle 和 IBM JDK 1.7 版本之间序列化对象的经验，我可以告诉您它并不总是有效。我不能肯定它总是失败，但你肯定不能指望它工作。

在我的应用程序中没有失败的代码路径在 JDK 1.5 上运行了 5 年，在生产中运行良好，我在以前的序列化文档中没有看到与当前语句类似的任何内容。所以，Java 之神似乎在 JDK 7 中允许使用这种代码模式。

# sharepoint - Reporting Services，从任何 Sharepoint 列表中获取数据

> ID：10074102
> 
> 赞同：3
> 
> 时间：2012-04-09T13:41:30.173
> 
> 标签：sharepoint, sharepoint-2010, reporting-services

我正在尝试基于 Sharepoint (2010) 列表构建 SSRS (2008R2) 报告。主要问题是报告将运行的列表必须是报告参数。我知道列表结构将是什么，但是共享点站点可以包含多个具有这种结构的列表实例，并且在运行报告时，用户必须选择列表名称。此外，报告有两个日期参数，MinDateTime 和 MaxDateTime，并且只选择时间介于这两者之间的记录。

据我所知，构建报告至少有两种方法：

1.  使用 Sharepoint 列表数据源并在 CAML 中编写数据集查询，在数据源中指定站点，让 SSRS 处理其余细节。这种情况下的问题是我无法将 ListName 指定为报告参数。DataSet 查询如下所示：

    ```
    <pre>
       <RSSharePointList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <ListName>BusinessList1</ListName>
              <ViewFields>
                <FieldRef Name="Title" />
                <FieldRef Name="BusinessUnit" />
                <FieldRef Name="ScanDateTime" />
              </ViewFields>
              <Query>
                <Where>
                  <And>
                    <Geq>
                      <FieldRef Name="ScanDateTime" />
                      <Value Type="DateTime">
                        <Parameter Name="MinScanDateTime" />
                      </Value>
                    </Geq>
                    <Leq>
                      <FieldRef Name="ScanDateTime" />
                      <Value Type="DateTime">
                        <Parameter Name="MaxScanDateTime" />
                      </Value>
                    </Leq>
                  </And>
                </Where>
              </Query>
            </RSSharePointList> 
    ```

2.  使用 XML 数据源并以肥皂可读的 XML 编写数据集查询，直接访问 /_vti_bin/lists.asmx 网络服务。查询应该看起来像这样（包括列表名称作为参数）。但是，我无法使用 Date 参数让它工作。应该在哪里添加它们？

    ```
     <pre>  
       <Query>
          <SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems</SoapAction>
       <Method Namespace="http://schemas.microsoft.com/sharepoint/soap/" Name="GetListItems">
          <Parameters>
             <Parameter Name="listName">
                <DefaultValue>BusinessList1</DefaultValue>
             </Parameter>
             <Parameter Name="viewFields">         
                  <ViewFields>
                    <FieldRef Name="Title" />
                    <FieldRef Name="BusinessUnit" />
                    <FieldRef Name="ScanDateTime" />
                 </ViewFields>
             </Parameter>
          </Parameters>
       </Method>
       <ElementPath IgnoreNamespaces="True">*</ElementPath>
    </Query> 
    ```

任何方向都会很棒。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:29:35.387

您可以使用选项 1，将查询编写为表达式。用中间的参数构建一个长字符串。您需要一个单独的查询来为参数提供 BusinessLists 列表。

表达式如下所示：

```
="<pre>
   <RSSharePointList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <ListName>"

& Parameters!BusinessList.value & 

"</ListName>
          <ViewFields>
            <FieldRef Name="Title" />
            <FieldRef Name="BusinessUnit" />
            <FieldRef Name="ScanDateTime" />
          </ViewFields>
          <Query>
            <Where>
              <And>
                <Geq>
                  <FieldRef Name="ScanDateTime" />
                  <Value Type="DateTime">
                    <Parameter Name="MinScanDateTime" />
                  </Value>
                </Geq>
                <Leq>
                  <FieldRef Name="ScanDateTime" />
                  <Value Type="DateTime">
                    <Parameter Name="MaxScanDateTime" />
                  </Value>
                </Leq>
              </And>
            </Where>
          </Query>
        </RSSharePointList>" 
```

[编辑]：我也不确定 pre 标签是从哪里来的。我已经使用共享点列表连接类型创建了一个测试报告，但它没有添加它。查看此[MS 链接，了解基础知识](http://msdn.microsoft.com/en-us/library/ee633650.aspx)。

它指出您不需要指定要返回的字段，因此一个非常基本的查询表达式如下所示（添加了我的填充参数）：

```
="<RSSharePointList xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema""><ListName>" & Parameters!List.Value & "</ListName></RSSharePointList>" 
```

在我上面的原始示例中，我没有提到您需要通过将它们加倍来转义 XML 中的双引号。我已经对此进行了测试，并且效果很好。

# c# - Windows 7 中没有声音 TAPI

> ID：10074110
> 
> 赞同：0
> 
> 时间：2012-04-09T13:42:18.637
> 
> 标签：c#, .net, tapi

我尝试在 C#.NET 中使用 TAPI 编写自动应答机。

我使用tapi3_dev 示例工作。此示例在Windows XP 中工作，但在Windows 7 中，一切正常（没有错误或异常），但没有声音播放，只是我可以录制音频；

请帮我。

* * *

我的代码::

```
case TAPI3Lib.ADDRESS_EVENT.AE_RINGING: this.PlayVoice(CallInfo);

...

 private void PlayVoice(TAPI3Lib.ITCallInfo iTCallInfo)
        {
            try
            {
                //the supported file extensions are .avi and .wav.   http://msdn.microsoft.com/en-us/library/ms730457.aspx
                TAPI3Lib.ITBasicCallControl2 iTBasicCallControl2 = (TAPI3Lib.ITBasicCallControl2)iTCallInfo;
                this.selectedTerminal = iTBasicCallControl2.RequestTerminal(TAPI3Lib.TapiConstants.CLSID_String_FilePlaybackTerminal, TAPI3Lib.TapiConstants.TAPIMEDIATYPE_AUDIO, TAPI3Lib.TERMINAL_DIRECTION.TD_CAPTURE);
                TAPI3Lib.ITMediaPlayback iTMediaPlayback = (TAPI3Lib.ITMediaPlayback)this.selectedTerminal;
                object[] playList = new object[1];
                playList[0] = @"C:\ModemLog\7533f717-6cc5-41d5-9845-6983cff85e4b.avi";
                //playList[0] = @"C:\Users\Abedi\Desktop\Anghezi.wav";
                //playList[0] = @"C:\ProgramData\Venta\VentaFax & Voice 6\Service\greet1.wav";
                iTMediaPlayback.PlayList = playList;
                iTBasicCallControl2.SelectTerminalOnCall(this.selectedTerminal);
                this.iTMediaControl = (TAPI3Lib.ITMediaControl)this.selectedTerminal;
                if (iTCallInfo.CallState == TAPI3Lib.CALL_STATE.CS_OFFERING)
                    iTBasicCallControl2.Answer();
                this.iTMediaControl.Start();
                (selectedTerminal as TAPI3Lib.ITBasicAudioTerminal).Volume = 0;
            }
            catch (Exception exception)
            {
                this.Log(exception.Message, "Exception in PlayVoice");
                this.WriteLine(exception.Message);
                this.buttonDisconnect_Click(null, EventArgs.Empty);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:56:09.037

您的代码是否在 Windows 服务中运行？在 Windows 7 下，来自 Windows 服务的音频控制存在一个已知问题。目前，除了启动 Windows 应用程序以与 Tapi 集成之外，我找不到解决方法。

# android - 使用 Google、Facebook 和 Twitter 登录 Android 的简单应用程序

> ID：10074113
> 
> 赞同：0
> 
> 时间：2012-04-09T13:42:38.510
> 
> 标签：android, authentication, login, facebook-login

我正在寻找在 Android 上开发一个简单的应用程序，以使用 Google 帐户、Facebook 帐户或 Twitter 帐户或插入用户的少量个人数据的典型注册来签署用户。你有什么建议吗？我在哪里可以找到每个帐户的简单教程？我的想法包括开发一个菜单作为该站点中的菜单以登录它但进入应用程序 android。我希望清楚，这是我第一次在 Stack Overflow。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:49:21.000

那么您可以做些什么来为 Facebook、Google、Twitter 创建不同的菜单项。您还需要路标库来签署您的请求。建议你看看 OAuth 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:10:39.687

没有任何方法可以让您制作自己的登录窗口。要登录，您应该遵循[此 url](https://github.com/facebook/facebook-android-sdk/)。有示例和 Facebook api，我们可以通过它登录 Facebook 并制作自己的 Facebook 应用程序。

# asp.net-mvc-3 - 将 Google 图表 API 与 MVC 3 Razor 和 jquery ajax 一起使用

> ID：10074114
> 
> 赞同：3
> 
> 时间：2012-04-09T13:42:43.497
> 
> 标签：asp.net-mvc-3, razor, google-visualization

**我正在尝试使用Google 图表 API**在我的网站中显示一个饼图，到目前为止我无法让它工作，我找不到任何使用 MVC 3 **Razor**的示例。

这是我使用 json 获取数据的代码

```
// Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    JSON.stringify = JSON.stringify || function (obj) {
        var t = typeof (obj);
        if (t != "object" || obj === null) {
            // simple data type
            if (t == "string") obj = '"' + obj + '"';
            return String(obj);
        }
        else {
            // recurse array or object
            var n, v, json = [], arr = (obj && obj.constructor == Array);
            for (n in obj) {
                v = obj[n]; t = typeof (v);
                if (t == "string") v = '"' + v + '"';
                else if (t == "object" && v !== null) v = JSON.stringify(v);
                json.push((arr ? "" : '"' + n + '":') + String(v));
            }
            return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
        }
    };
    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        $.post('@Url.Content("~/Home/GetMyChart1")',
            function (items) {
                // Successful requests get here
                alert(JSON.stringify(items) + "   -   " + items.rows.length);
                data.addRows(items.rows.length);
                $.each(items.rows, function (i, item) {
                    alert(i);
                    data.setCell(i, 0, item.Name);
                    data.setCell(i, 1, item.ID);
                });
                alert("finished");
                alert(data.length);
            });
        // Set chart options
        var options = { 'title': 'How Much Pizza I Ate Last Night',
            'width': 400,
            'height': 300
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    } 
```

控制器代码

```
public ActionResult GetMyChart1(string CurrentClass)
    {
        var tests = from t in db.Tests
                    group t by new { t.StudentID, t.Student.CurrentSchoolGrade } into tl
                    select new { StudentID = tl.Key.StudentID, Class = tl.Key.CurrentSchoolGrade, Score = (tl.Sum(k => k.Score)/tl.Sum(l => l.Part.Score))* 100, Count = tl.Count() };
        var results = from t in tests
                      where t.Class == CurrentClass
                      select t;
        List<DataItem> dt = new List<DataItem>();
        dt.Add(new DataItem(results.Count(x => x.Score <= 40), "0% - 40%"));
        dt.Add(new DataItem(results.Count(x => x.Score <= 60 && x.Score > 40), "40% - 60%"));
        dt.Add(new DataItem(results.Count(x => x.Score <= 80 && x.Score > 60), "60% - 80%"));
        dt.Add(new DataItem(results.Count(x => x.Score <= 100 && x.Score > 60), "80% - 100%"));

        chartJson cj = new chartJson();
        cj.rows = dt;

        return Json(cj);
    }
public class chartJson
    {
        public List<DataItem> rows { get; set; }
    }
public class DataItem
{
    public DataItem(int id, string name)
    {
        ID = id;
        Name = name;
    }
    public int ID { get; set; }
    public string Name { get; set; }
 } 
```

除 alert(data.length) 外，所有警报都返回正确的值；它返回 undefined 并且绘图 div 出现，其中写有标签 没有数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:23:50.077

我认为您需要在`POST`回调内移动图表绘制线：

```
$.post('@Url.Content("~/Home/GetMyChart1")', function (items) {
    // Successful requests get here                 
    alert(JSON.stringify(items) + "   -   " + items.rows.length);                 
    data.addRows(items.rows.length);                 
    $.each(items.rows, function (i, item) { 
        alert(i);                     
        data.setCell(i, 0, item.Name);                     
        data.setCell(i, 1, item.ID);                 
    });                 
    alert("finished");                 
    alert(data.length);             
    // Set chart options         
    var options = { 
        'title': 'How Much Pizza I Ate Last Night',             
        'width': 400,             
        'height': 300         
        // Instantiate and draw our chart, passing in some options.         
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));   
        chart.draw(data, options); 
    });         
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:48:58.890

Google 图表 API 是用 JavaScript 编写的，因此它可以与任何 Web 框架一起使用，包括 ASP.NET MVC。您需要做的就是将其包含在您的视图中。它不应该受到限制或不工作，因为您使用的是 ASP.NET MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:02:31.643

在查看完整的代码示例之后，看起来`google.setOnLoadCallback(drawChart);`最有可能在准备好`drawChart`之前执行该方法`data`。因此没有图表。

无需对服务器进行 Ajax`.Post`来检索数据，只需根据初始请求构建数据。

# python - 蟒蛇查找表

> ID：10074115
> 
> 赞同：3
> 
> 时间：2012-04-09T13:42:46.150
> 
> 标签：python

我需要创建一个查找表，其中 A=10 和 Z=35（B=11，C=12 等），在 python 中完成此操作的最简单方法是什么？我知道必须有一个非常简单的方法来做到这一点，只是似乎找不到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T13:43:41.573

对于查找表，您可以使用`dict`：

```
d = { 'A' : 10, 'Z' : 35 } # etc.. 
```

但是在这种情况下，似乎有一个简单的逻辑规则来计算结果，因此您可以使用带有一些简单算术的函数来代替查找表：

```
def letterToNumber(c):
    if not 'A' <= c <= 'Z':
         raise ValueError('invalid character: ' + c)
    return ord(c) - ord('A') + 10

def numberToLetter(x):
    if not 10 <= x <= 35:
         raise ValueError('invalid number: ' + x)
    return chr(x - 10 + ord('A')) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T13:43:55.510

您不需要查找表 - 表达式

```
chr(c) - 54 
```

（使用`c`大写字符）可以解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T13:50:28.627

我同意查找表是不必要的，但这是一个

```
>>> import string
>>> x = dict(zip(string.uppercase[:26],range(10,36)))
>>> x['A']
10
>>> x['Z']
35 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:05:43.453

我会采用直截了当的方法：

```
import string

def make_lookup_table():
    "make a lookup table where 'A' -> 10, 'B' -> 11, ..., 'Z' -> 35"
    lookup_table = {}
    value = 10
    for letter in string.uppercase[:26]:
        lookup_table[letter] = value
        value += 1 
```

# tsql - 如何通过避免扫描空值来减少索引扫描

> ID：10074120
> 
> 赞同：5
> 
> 时间：2012-04-09T13:43:04.487
> 
> 标签：tsql, indexing, sql-server-2008-r2, nullable, non-clustered-index

我正在使用 SQL Server 2008 R2，我想在非唯一、可为空的字段上添加非聚集索引。我的索引还将包含一列，以避免访问我的聚集索引：

```
CREATE INDEX IX_My_Index 
ON MyTable (myBasicField) 
INCLUDE (myIncludedField); 
```

在实际数据中`myBasicField`会有很多，`NULLs`我想知道是否有一种方法可以通过不扫描这些来提高性能`NULLs`，或者阻止`NULL`将值存储在我的索引上。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T13:47:02.467

对于 SQL Server 2008 及更高版本，您可以使用**过滤索引**。在此处查看[介绍性博客文章](http://blog.sqlauthority.com/2008/09/01/sql-server-2008-introduction-to-filtered-index-improve-performance-with-filtered-index/)- 语法为：

```
CREATE INDEX IX_My_Index 
ON MyTable (myBasicField) 
INCLUDE (myIncludedField)
WHERE myBasicField IS NOT NULL; 
```

任何包含相同`WHERE`子句的查询都可以利用这一点，并且如果您排除像这样的 NULL 值，索引会小很多，因此性能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:46:39.737

您正在寻找过滤索引。看：

[http://technet.microsoft.com/en-us/library/cc280372.aspx](http://technet.microsoft.com/en-us/library/cc280372.aspx)

# jquery - 如何制作这样的动画？

> ID：10074125
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:43:46.813
> 
> 标签：jquery

嗨，如何为这样的网站徽标创建动画..

[http://www.arch-intl.com/](http://www.arch-intl.com/)

如您所见，不同的元素在此站点中一个接一个地加载。它是在闪存中完成的。我想在 jquery 中做同样的事情。我们如何设置每个动画元素的执行顺序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:20:48.017

你可以对溢出做一些事情：隐藏属性。这是我刚刚制作的一个示例：http: [//jsfiddle.net/LJnaB/9/](http://jsfiddle.net/LJnaB/9/)

# c# - 如何将 Visual Studio 2008 解决方案资源更改为链接而不是嵌入？

> ID：10074126
> 
> 赞同：2
> 
> 时间：2012-04-09T13:43:55.377
> 
> 标签：c#, visual-studio-2008, resources, persistence, resx

我正在开发一个使用文件作为外部资源的 C# 解决方案。我需要修改这些文件，而无需再次构建所有解决方案。我曾经有过这样的配置，一切都很顺利。我不记得我改变了什么，但现在所有资源都嵌入在 .exe 文件中，我找不到让它们再次链接的方法。

在所有资源中的资源属性`Persistence`选项被禁用并设置为`Linked at compile time`，所以我认为这不是问题，因为我认为它必须是这种方式。

我认为这可能是一种语言配置，当我更改创建语言特定 resx 的表单语言属性时问题开始了，但后来它返回到其原始配置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:51:18.720

将它们从资源中取出，将它们添加（添加现有文件）到项目中，确保将每个属性设置为如果更新则复制，假设您很高兴将它们部署到与 exe/dll 相同的文件夹中取决于他们。

# php - 我如何使用（邮件）发送带有 php 的附件

> ID：10074130
> 
> 赞同：-5
> 
> 时间：2012-04-09T13:44:13.600
> 
> 标签：php, email

> **可能重复：**
> [php 发送带附件的电子邮件](https://stackoverflow.com/questions/3092821/php-send-e-mail-with-attachment)

你好我需要用php发送附件我正在使用邮件方法来帮助我代表3种类型的配置但是我做配置解释了如何发送附件如果有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:10:30.630

使用[PHPMailer](http://phpmailer.worxware.com/)，它有很多配置选项和兼容性。

# oracle - 标量子查询具有聚合操作

> ID：10074133
> 
> 赞同：0
> 
> 时间：2012-04-09T13:44:23.757
> 
> 标签：oracle, subquery, aggregate, scalar, scalar-subquery

我的oracle版本是10.2。当标量子查询具有聚合操作时，这很奇怪。我的表名为 t_test 看起来像这样；

```
t_id    t_name
 1       1
 2       1
 3       2
 4       2
 5       3
 6       3 
```

查询字符串看起来像这样；

```
select t1.t_id,
       (select count(t_name)
         from (select t2.t_name 
                 from t_test t2 
                 where t2.t_id=t1.t_id 
                 group by t2.t_name)) a
from t_test t1 
```

这个查询的结果是，

```
t_id  a
 1    3
 2    3
 3    3
 4    3
 5    3
 6    3 
```

这很奇怪，以 t1.t_id=1 为例，

```
select count(t_name)
 from (select t2.t_name 
         from t_test t2 
         where t2.t_id=1
         group by t2.t_name) 
```

结果是 1，不知何故，“where”运算符不起作用，结果与我这样查询的结果完全相同：

```
select t1.t_id,
       (select count(t_name)
         from (select t2.t_name 
                 from t_test t2 
                 group by t2.t_name)) a
from t_test t1 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:31:16.097

您可以从 SQL*Plus 中发布一个剪切和粘贴来准确显示您正在运行的查询吗？您发布的查询似乎无效 - 别名`t1`在您引用它的子查询中无效。这让我怀疑您正在简化问题以在此处发布，但您不小心遗漏了一些重要的东西。

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 1 id, 1 name from dual union all
  3    select 2,1 from dual union all
  4    select 3,2 from dual union all
  5    select 4,2 from dual union all
  6    select 5,3 from dual union all
  7    select 6,3 from dual
  8  )
  9  select t1.id
 10        ,(select count(b.name)
 11            from (select t2.name
 12                    from x t2
 13                   where t2.id = t1.id
 14                   group by t2.name) b) a
 15*   from x t1
SQL> /
                 where t2.id = t1.id
                               *
ERROR at line 13:
ORA-00904: "T1"."ID": invalid identifier 
```

据推测，这样编写查询会更自然（假设您真的想使用标量子查询） where`t1`将是标量子查询中的有效别名。

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 1 id, 1 name from dual union all
  3    select 2,1 from dual union all
  4    select 3,2 from dual union all
  5    select 4,2 from dual union all
  6    select 5,3 from dual union all
  7    select 6,3 from dual
  8  )
  9  select t1.id
 10        ,(select count(t2.name)
 11            from x t2
 12           where t2.id = t1.id) cnt
 13*   from x t1
SQL> /

        ID        CNT
---------- ----------
         1          1
         2          1
         3          1
         4          1
         5          1
         6          1

6 rows selected. 
```

# magento - Magento 显示它忽略了哪些文件

> ID：10074141
> 
> 赞同：0
> 
> 时间：2012-04-09T13:45:06.460
> 
> 标签：magento

Magento 似乎正在使用“Happy go Lucky”错误处理，其中 xml 文件中的所有错误只会导致 xml 配置文件被忽略。丢失/错误的标签也会被忽略，有时会导致 Magento 跳过部分 xml 文件。

但是有什么方法（日志文件或其他东西）可以准确地显示配置文件的哪些部分 Magento 跳过，以及哪些标签是未知/错误的。如果这很重要，请使用 Magento 1.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:23:32.620

从我在 Magento 中看到的情况来看，如果其中有无效的 XML，它将丢弃整个 XML 文件 - 损坏/不匹配的标签、错误的字符等。我认为 xml 解析器做任何类型的事情都是不可能的将其解析出来是一项体面的工作——这就是 XML 的目标。如果我的配置没有加载，我想做的第一个想法是对代码执行格式良好的验证，这将告诉我是否有问题。

如果有对无效类的引用，通常它会中断。布局 XML 是不同的 - 它会忽略该块并继续，这可能是一个真正的故障排除。

因此，要回答您的问题-不，没有本地方法可以做到这一点。IMO 最好的方法是去第三方验证它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T22:13:29.657

登录 Magento，启用它：

1.  进入您的管理面板，然后进入系统 > 配置 > 高级 > 开发人员
2.  在日志设置下确保启用 = 是
3.  **这将在magento root/var/log**中创建两个单独的日志（在我的情况下为 /var/www/html/var/log）
4.  Exception.log 将保存使用创建的任何错误`Mage::LogException($e)`
5.  System.log 将保存使用创建的任何日志记录`Mage::Log('message')`

您还可以创建自己的日志文件...如果您愿意的话

`Mage::Log('message', null, 'my.log');`

这将在 var/log 目录中创建一个 my.log 文件。

仅供参考 - 我相信 Magento 以这种方式处理配置文件的原因是为了保护系统的其余部分免受单个扩展名的问题。

# sql - 通过三层标量子查询传递数据

> ID：10074146
> 
> 赞同：0
> 
> 时间：2012-04-09T13:45:30.250
> 
> 标签：sql, scalar-subquery

我有一个查询，它分为三层。也就是说，我有一个主查询，里面有一个标量子查询，里面也有一个标量子查询。

底层标量查询返回两个不同的值，中级子查询返回两个的平均值。但是，底层查询不是接收当前值，而是平均表中的所有值。

有谁知道如何正确地将当前顶级查询结果的值传递给底部子查询？

代码示例：

```
Select Product, 
       Description, 
       (Select Avg(Mfg_Cost, Purchasing_Cost) 
        FROM (Select Mfg_Cost, 
                     Purchasing Cost
              From Cost
              Where Cost.Product = Products.Product)) 
From Products; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:52:35.370

你不能只使用 JOIN 和 GROUP BY，像这样：

```
Select p.Product, 
       p.Description, 
       Avg(c.Mfg_Cost),
       Avg(c.Purchasing_Cost)
From Products p 
    INNER JOIN
              Cost c
              ON c.Product = p.Product
GROUP BY p.Product, p.Description; 
```

一般来说，如果您需要从子查询中返回多个值：

```
Select p.Product, 
       p.Description,
       q2.AvgMfg_Cost,
       q2.AvgPurchasing_Cost
From Products p INNER JOIN
  (
       Select c.Product, 
              Avg(c.Mfg_Cost) AS AvgMfg_Cost, 
              Avg(c.Purchasing_Cost) AS AvgPurchasing_Cost
              From Cost c
              Group by c.Product
  ) AS q2
  on q2.Product = p.Product; 
```

在 Microsoft SQL Server 中，您还可以使用[公用表表达式 (CTE)](http://msdn.microsoft.com/en-us/library/ms190766.aspx)

# php - 在 CodeIgniter 路由中使用问号

> ID：10074148
> 
> 赞同：2
> 
> 时间：2012-04-09T13:45:35.587
> 
> 标签：php, regex, codeigniter, routing, wildcard

我需要改变

```
http://mysite.com/profile?username=nick 
```

至

```
http://mysite.com/user/nick 
```

使用 CodeIgniter 路由。我添加了以下行，`routes.php`但它不起作用：

```
$route['user/(:any)'] = "profile?username=$1"; 
```

这是`.htaccess`我使用的文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L,QSA]
AddDefaultCharset utf-8 
```

我怎么解决这个问题？提前致谢。

**编辑：**

我的意思是 URL 结构发生变化。所以在路由之后它必须*重定向*

```
http://mysite.com/user/nick 
```

至

```
http://mysite.com/profile?username=nick 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:23:04.347

处理重定向的 Htaccess 规则：

```
RewriteRule user/([^/?]+) /profile?username=$1 [L,R=301] 
```

Route.php 更改：

```
<?php
$route['profile'] = 'profile/index'; 
```

轮廓控制器：

```
<?php
class Profile extends CI_Controller {

    public function index()
    {
        $username = $this->input->get('username');
        // do lookup based on username
    }
} 
```

**但是**：这种重定向只有在您有很多没有意义的缓存链接更改时才有意义。从您的问题看来，您可能会混淆路由和重定向的概念。

* * *

**编辑**：要“路由”（而不是“重定向”），步骤如下：

内部重新路由请求的 Htaccess 规则：

```
RewriteRule /profile?username=([^&]*) index.php/user/$1 [L] 
```

路由.php：

```
<?php
$route['user/(:any)'] = 'user/index/$1'; 
```

控制器：

```
<?php
class User extends CI_Controller {
    public function index($username)
    {
        // ...
    }
} 
```

如果这不起作用，那么，那么，你在解释你的问题时做得很糟糕:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:48:10.437

问题很可能是`?`正则表达式语言中的一个特殊字符，表示 1 或 0。您需要对其进行转义以使其匹配，这样的事情应该可以解决您的问题： `$route['user/(:any)'] = "profile\?username=$1";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:53:12.020

好吧，你想反过来做。尝试：

```
RewriteRule user/([^/?]+) index.php/profile?username=$1 [L] 
```

[抱歉，如果这不起作用，我的 Apache 不合作。]

# google-app-engine - 使用 Ant 编译具有数据存储回调的 AppEngine 项目

> ID：10074150
> 
> 赞同：1
> 
> 时间：2012-04-09T13:45:49.583
> 
> 标签：google-app-engine, ant, google-cloud-datastore, annotation-processing

我已经在我们的 AppEngine 项目中实现了[数据存储回调，并在 Eclipse 中进行了设置，如链接中所示。](https://developers.google.com/appengine/docs/java/datastore/callbacks)

现在我无法让它在 Ant 中编译。这是我现在为 javac 目标所拥有的：

```
<path id="appengine.api.path">
    <pathelement location="${appengine.folder}/lib/impl/appengine-api.jar" />
</path>

<target name="javac" depends="clean,libs" description="Compile java source">
    <mkdir dir="war/WEB-INF/classes" />
    <apt compile="false" preprocessdir=".apt_build_generated" destdir="war/WEB-INF/classes"
        srcdir="src"
        factorypathref="appengine.api.path"
        >
    </apt>
    <javac srcdir="src" includes="**" encoding="utf-8" destdir="war/WEB-INF/classes" source="1.6" target="1.6" nowarn="true" debug="true" debuglevel="lines,vars,source">
        <classpath refid="project.class.path" />
    </javac>
    <copy todir="war/WEB-INF/classes">
        <fileset dir="src" excludes="**/*.java" />
    </copy>

</target> 
```

apt 任务运行，但它所做的只是列出一堆没有处理器的注释，包括 PrePut 注释。

我尝试将 factorypathref 设置为 ${appengine.folder}/lib/impl/appengine-api.jar 但它说找不到 appengine-api.jar 引用（我已验证路径存在）。我还查看了 jar 文件以查看是否可以找到它用作工厂但尚未找到的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:34:58.350

终于发现问题了。由于其他原因，我们在 Ant 构建中使用了 Eclipse 编译器。当我们切换回内置 Java 编译器时，注释处理器开始正常工作。

# sql-server - 表范围内具有特定值的约束列

> ID：10074155
> 
> 赞同：1
> 
> 时间：2012-04-09T13:46:15.257
> 
> 标签：sql-server, database-design, domain-driven-design

如果我想在表范围内获得相同的结果，基于[仅标记为默认的一条记录的约束是否会应用相同的视图和唯一聚集索引方法？](https://stackoverflow.com/questions/637894/constraint-for-only-one-record-marked-as-default)

我有一个名为 Accounts 的表。只能有一个系统帐户，但可以有多个合作伙伴和客户帐户。每种类型的帐户在列方面没有变化，而只是在类型列上有所不同。

```
ID | Type    | Name 
1    System    Contoso
2    Partner   Wingtip
3    Partner   Northwind
4    Client    Adventure Works
5    Client    Fabrikam 
```

在上面我想阻止添加另一个系统帐户，但允许许多合作伙伴和客户帐户。感觉像是属于数据库而不是域的问题（也许我错了）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:04:39.140

如果您知道系统帐户的 ID 号始终为 1，则可以使用 CHECK 约束来实现这一点。类似的东西。. .

```
create table accounts (
  id integer primary key,
  type varchar(15) not null,
  name varchar(15) not null,
  unique (type, name),
  check (
    (id = 1 and type = 'System') or
    (id <> 1 and type <> 'System')
  )
); 
```

事实上，如果这是*您的*数据库，系统帐户可以有任何 ID 号。只需更改 CHECK() 约束以匹配。

如果您正在构建以部署到客户端站点，则可以在部署之前添加系统帐户。（无论您如何处理约束，您都可能应该这样做。）

想想当用户试图从这个表中删除行时该怎么做。（尤其是系统帐户行。）然后考虑当数据库管理员尝试从该表中删除行时该怎么做。

您可能可以使用外键约束（无级联）或触发器来防止数据库管理员意外删除系统帐户。管理员可能可以绕过这些限制，但如果她愿意走那么远来删除一行，你会希望她知道自己在做什么。

# sql - 与此 sql 的“rails 控制台”中相同的等效查询是什么？

> ID：10074160
> 
> 赞同：0
> 
> 时间：2012-04-09T13:46:25.213
> 
> 标签：sql, ruby-on-rails

SQL：

```
select * from user where room_id not in (select id from rooms); 
```

`rails console` 与此 sql相同的等效查询是什么？

前任：

```
User.all.each { |u| user.room } 
```

（对不起，这个例子不正确。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:06:56.543

您几乎可以按字面意思翻译它：

```
User.where('room_id not in (select id from rooms)').all 
```

该`where`条款在接受什么方面非常灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:06:43.343

```
User.where("room_id not in (select id from rooms)") 
```

但你想要这个，因为它会更快：

```
User.where("not exist (select id from rooms where id=users.room_id)") 
```

这是你能得到的最接近的。似乎没有办法创建转换为 SQL 的 Active Record 查询`NOT()`。对该主题的搜索会返回一堆答案大致相同的 SO 问题。

你可以做类似的事情

```
User.all.select { |u| !Room.find_by_id(u.room_id) } 
```

但这可能会再次降低效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T19:21:20.930

不知道大家对`squeel`宝石有没有了解。它允许您在纯 Ruby 代码中构建非常复杂的 SQL 查询。在您的情况下，它应该像以下代码一样简单（`gem 'squeel'`在 Gemfile 中添加该行并运行`bundle install`）：

```
room_ids = Room.select{id}; User.where{room_id.not_in room_ids} 
```

值得一试，不是吗？

这是[squeel 的页面](https://github.com/ernie/squeel)。

# jquery - 带有淡入淡出效果的jquery照片库

> ID：10074162
> 
> 赞同：0
> 
> 时间：2012-04-09T13:46:25.630
> 
> 标签：jquery, jquery-animate, image-gallery

我在下面的链接中找到了很好的图像幻灯片放映工具

[http://thiagosf.net/projects/jquery/skitter/](http://thiagosf.net/projects/jquery/skitter/)

可以快速设置具有多种效果的图像幻灯片，不幸的是我无法让它为我工作，我只是想要和图像淡入/淡出的图像效果，并且没有导航，如 Skitter 中所示。我不确定是否可以使用 skitter 来复制示例 2 中所示的效果。

我正在使用以下代码进行跳过，但它没有给我想要的效果。当我设置“点：假”

*   它隐藏了点，但会自动显示我不想要的数字导航。
*   我希望图像淡入/淡出，但我无法在脚本中找到该选项。

我做错了什么或者我正在寻找的效果是不可能使用skitter Script的

```
$(document).ready(function() {
        $(".box_skitter_large").skitter({
            numbers_align: "center", 
            dots: true, 
            preview: false, 
            focus: true, 
            focus_position: "leftTop", 
            controls: false, 
            controls_position: "leftTop", 
            progressbar: true, 
            progressbar_css: { 
                top:'0px', 
                left:'0px', 
                height:0, 
                borderRadius:'0px', 
                width:0, 
                backgroundColor:'#000', 
                opacity:.7 
            }, 
            animateNumberOver: { 'backgroundColor':'#555' }, 
            enable_navigation_keys: true
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:01:25.503

你可以看看这个 Jquery 插件

[http://snook.ca/archives/javascript/simplest-jquery-slideshow](http://snook.ca/archives/javascript/simplest-jquery-slideshow)

它非常接近您的要求..

也可以使用适当的文档。

# html - 下拉Bootstrap中的中心表格？

> ID：10074172
> 
> 赞同：0
> 
> 时间：2012-04-09T13:47:01.937
> 
> 标签：html, css, twitter-bootstrap

我在引导程序中有一个下拉菜单，但我不知道如何将我在其中的表格居中。

这是我的代码；

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Testing, 123</a>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#"><i class="icon-home icon-white"></i> Home</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
            <div class="dropdown-menu">
              <form accept-charset="UTF-8" action="/sessions" method="post">
                <fieldset class='textbox login'>
                  <label id='js-username'>
                    <span>Username</span>
                    <input autocomplete="on" id="username" name="username" type="text" size="20px"/>
                  </label>
                  <label id='password'>
                    <span>Password</span>
                    <input id="userpassword" name="userpassword" type="password" />
                  </label>
                </fieldset>
                <fieldset class='subchk'>
                  <input name="commit" type="submit" value="Log In" />
                </fieldset>
              </form>
            </div>
          </li>
        </ul>
        <form class="navbar-search pull-right" action="">
          <input type="text" class="search-query span2" placeholder="Search">
        </form>
      </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

我已经调整了 CSS 中下拉菜单的宽度以适合我的表单，但我无法弄清楚如何在下拉菜单中将表单居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T18:48:07.487

如果没有看到你的 CSS，很难确定这会起作用，但试试这个：

```
.dropdown-menu form {
width: *insert form width here in pixels*;
margin: 0 auto;
} 
```

这个答案假设带有类下拉列表的 li 在水平方向上比您的表单大，并且您正试图将表单置于其中。要使用此方法水平居中某些内容，它必须具有固定宽度，并且宽度必须小于父元素（在本例中为带有类下拉列表的 li）。

编辑添加：直到我回答它之后，我才意识到这个问题有多老了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:00:32.300

使用中心标签它可能对你有帮助

```
 <center>  </center>

    <div class="dropdown-menu">
        <center>
          <form accept-charset="UTF-8" action="/sessions" method="post">

         .......

          </form>
         </center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T21:55:43.750

只需创建一个带有一些填充的类并将其添加到您的表单标签中，如下所示：

**CSS**

```
.wrap {
    padding:15px;
} 
```

**HTML**

```
<form class="wrap" accept-charset="UTF-8" action="/sessions" method="post">...</form> 
```

演示：http: [//jsfiddle.net/a52UY/](http://jsfiddle.net/a52UY/)

# android - 如何从 Eclipse 调试签名的 Android 应用程序？

> ID：10074177
> 
> 赞同：18
> 
> 时间：2012-04-09T13:47:35.460
> 
> 标签：android, eclipse, debugging, ddms

安卓 2.2。我需要在我的 Nexus S 上调试我**签名**的 APK。如何使用 Eclipse 来完成？

我在手机上启动应用程序，然后...？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-09T13:54:51.087

`debuggable=true`在清单中设置，导出，安装并签署应用程序。通过 USB 连接设备，启用 USB 调试。然后打开 DDMS 透视图，选择设备并附加到您的应用程序的进程（您将看到列出的包名称）。如果您有 root 设备，并且 adb 以 root 身份运行，您可以连接到任何进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T14:00:00.407

当设备连接到运行机器的 Eclipse 时，在 manifest 文件中设置 debuggable=true 并在 android 手机中启用调试模式，它可以使用 logcat 查看当前运行日志，否则

您可以从命令行使用 adb 工具调试正在运行的应用程序

`adb logcat`- 查看设备日志

将显示当前的 logcat（调试消息）

`adb logcat [ <filter-spec> ]`

使用您只能过滤给定的调试消息

用于配置调试工具查看 [http://developer.android.com/guide/developing/tools/adb.html](http://developer.android.com/guide/developing/tools/adb.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-27T20:34:32.317

在 Android Studio stable 中，您必须`application`在`AndroidManifest`文件中添加以下 2 行：

```
 android:debuggable="true"
    tools:ignore="HardcodedDebugMode" 
```

第一个将启用已签名 APK 的调试，第二个将防止编译时错误。

在此之后，您可以通过“将调试器附加到 Android 进程”按钮附加到该进程。

![](../Images/01b5c163c12873269a272eed63792955.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T13:52:25.723

你有两种方法..

1.  您可以在代码中使用 Log.v 或 log.d 或 Log.i（记录），并在您的应用程序在您的设备上运行时在 eclipse 的 logcat 视图中获取所有这些日志。
2.  您可以从设备上的 eclipse 运行（在调试时，按下 eclipse 上的昆虫图标）应用程序，通过在代码中放置断点，您可以调试应用程序。

# django - django：nginx静态内容不起作用

> ID：10074179
> 
> 赞同：3
> 
> 时间：2012-04-09T13:47:52.670
> 
> 标签：django, nginx, gunicorn

我将 django 与 nginx 和 gunicorn 一起使用。nginx 应该提供静态内容，但浏览器中没有加载 css、图像和 js 文件。这是为什么？

*我已将 Django 项目的名称替换为`domain`.*

**/etc/nginx/sites-enabled/domain.tld**

```
server {
    listen 80;
    server_name 127.0.0.1;

    access_log /srv/domain/access.log;
    error_log /srv/domain/error.log;

    location /static {
        alias /srv/domain/collected_static;
    }

    location / {
        proxy_pass http://127.0.0.1:8888;
   }
} 
```

**/etc/nginx/conf/nginx.conf**

```
user http;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                  '$status $body_bytes_sent "$http_referer" '
#                  '"$http_user_agent" "$http_x_forwarded_for"';

#access_log  logs/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

#gzip  on;

server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location / {
        root   html;
        index  index.html index.htm;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}

# another virtual host using mix of IP-, name-, and port-based configuration
#
#server {
#    listen       8000;
#    listen       somename:8080;
#    server_name  somename  alias  another.alias;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}

# HTTPS server
#
#server {
#    listen       443;
#    server_name  localhost;

#    ssl                  on;
#    ssl_certificate      cert.pem;
#    ssl_certificate_key  cert.key;

#    ssl_session_timeout  5m;

#    ssl_protocols  SSLv2 SSLv3 TLSv1;
#    ssl_ciphers  HIGH:!aNULL:!MD5;
#    ssl_prefer_server_ciphers   on;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}
include /etc/nginx/sites-enabled/*;

} 
```

**gunicorn.conf.py**

```
bind = "127.0.0.1:8888"
logﬁle = "/srv/domain/gunicorn.log"
loglevel = "info"
workers = 3 
```

**摘自 Django 设置**

```
DEPLOY_PATH = os.path.dirname(os.path.realpath(__file__))

STATIC_ROOT = os.path.join(DEPLOY_PATH, 'collected_static')

STATIC_URL = '/static/' 
```

**编辑：** 机器的输出（链接到 pastebin）：

[ps辅助| grep nginx](http://pastebin.com/3MpQcik6)

[ls -l *.log](http://www.pastie.org/3755821)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:41:47.340

您的配置看起来正确。只要文件真的被收集起来，Django 和 Gunicorn 配置就与静态文件服务无关。我想到了以下可能性：

*   文件尚未收集到您的collected_static 目录中（`./manage.py collectstatic`）
*   Nginx 对文件没有读取权限
*   您使用的旧 nginx 版本与当前配置存在问题。您应该使用当前的 1.x 版本，如果您使用的是 Debian，请使用来自 nginx.org 的 Deb 存储库。

如果权限不是问题，请检查 nginx 访问文件以查看请求是否真的到达 Nginx。然后检查 nginx 错误日志以查看是否记录了任何错误。

作为旁注（但不相关），我建议在您的`/`位置配置中放置一些代理标头并将应用服务器配置移动到单独的部分，例如：

```
upstream app_server {
    server localhost:8888 fail_timeout=0;
}

server {
    ...
    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;

        proxy_pass http://app_server;
        break;
    }
} 
```

# sql-server-2008 - 经纪服务交易管理

> ID：10074180
> 
> 赞同：1
> 
> 时间：2012-04-09T13:47:53.463
> 
> 标签：sql-server-2008, service-broker

我正在实施许多在**两个不同**实例上工作的 SSB。它们是基于异步触发器的**数据推送模式。**

我的**SQL 信息**如下所示： Microsoft SQL Server Management Studio 10.50.2500.0 Microsoft Analysis Services Client Tools 10.50.2500.0 Microsoft Data Access Components (MDAC) 6.1.7601.17514 Microsoft MSXML 3.0 4.0 5.0 6.0 Microsoft Internet Explorer 9.0.8112.16421 Microsoft .NET Framework 2.0.50727.5448 操作系统 6.1.7601

我的场景主要如下图

1.  **多条记录**作为Bulk **in** table 或**One Record****插入**。

*****   该数据被发送到另一个数据库。

    *   激活过程**在 BEGIN TRAN 和 END TRAN 之间**开始。

    *   它验证此消息。

    *   如果**验证**不成功，则应**从队列**中删除此**消息**，并将**ACk**发送回，因为该消息使用不同的 SSB 对象无效。

    *****   否则，将发送**ACK**消息，因为消息已**成功读取**。

    *   然后，**激活过程调用另一个过程**来**处理****消息**体。

    *   这个 USP_Process_Records 也在**BEGIN TRAN 和 END TRAN 之间**。

    *   由于很多原因，**根据**我的某些业务需求，此过程可能会失败。

    *   要么是 Pro SQL Server 2008 Service Broker。

    *   所以在激活过程中，它要么**进入 USP_Process_Records 的失败状态，**要么**进入 BEGIN CATCH 部分并回滚事务并发送失败 ACK**。

    *   最后**发现前面的read success ack根本**没有发送，**第二个发送正常。**

    *   所以我对 Broker Service 中的事务管理感到非常困惑。

    *   我应该对每个单独的任务使用 BEGIN TRAN 并将其从接收和处理 UPS 中删除吗？

    *   我是否也应该在 USP_Process_Records 中使用 TRY、CATCH 并将错误返回给 USP_Receive_Records？

    *   我是否应该修改我的 TRY、CATCH 块 ar Receive 以避免此问题******** 

 ****最后，我希望即使之后出现问题也能发送所有确认，并希望完全避免 Poison 消息和回滚。提前致谢。

-顺便说一句，我**使用 rusanu 博客进行代理服务错误处理**并**阅读 Pro SQL Server 2008 Service Broker 事务管理部分。**

查找以下 USP 示例。

--USP_Receive_Records

```
BEGIN TRY
BEGIN TRAN

        WHILE 1=1
        BEGIN
            SELECT @ReplyMessage = NULL, @TargetDlgHandle = NULL

            WAITFOR (RECEIVE TOP(1)
            @TargetDlgHandle=Conversation_Handle
            ,@ReplyMessage = CAST(message_body AS XML)
            ,@ReplyMessageName = Message_Type_Name
            FROM Q_Service_Receive), TIMEOUT 1000

            IF @TargetDlgHandle IS NULL 
            BREAK

            --Check if the message has the same message type expected
            IF @ReplyMessageName=N'Service_Msg'  
            BEGIN
                        --Send Batch Read Success ACK
                        --Send ACK Here
                        EXEC [dbo].[USP_ACKMsg_Send] @ACKMsg, @Service_Msg;
                        --Handle ACK Send failed!

                        -- Execute the USP_Service_Msg_Process for the batch rows
                        EXECUTE USP_Service_Msg_Process @ReplyMessageName, @RC OUTPUT;

                        --Case Processing Succeeded             
                        IF @RC=0
                        BEGIN
                            --Send Batch Read Success ACK
                        END

                        --SEND ACK Processing failed with Return Code to define cause of the error
                        ELSE
                        BEGIN
                            --Send Batch Processing Failed ACK
                        END

            END 
            END CONVERSATION @TargetDlgHandle;
        END
    COMMIT TRAN;
    END TRY

    BEGIN CATCH
    if (XACT_STATE()) = -1
        BEGIN
              rollback transaction;
        END;
    if (XACT_STATE()) = 1
        BEGIN
    DECLARE @error int, @message nvarchar(4000), @handle uniqueidentifier;
    SELECT @error = ERROR_NUMBER(), @message = ERROR_MESSAGE();
    END conversation @handle with error = @error description = @message;
    COMMIT;
        END
    END CATCH
END

--USP_Process_Records
BEGIN TRAN 
        While(@nCount <= @nodesCount)
        BEGIN

        IF(@S_HIS_Status = '02')
            BEGIN
                -- check N_Paid_Trans_ID is not nuul or zero or empty
                IF( @N_GET_ID IS NULL OR @N_GET_ID = 0 OR @N_GET_ID = '')
                    BEGIN
                        SET @RC = 8
                        RETURN;
                    END

                EXECUTE USP_Handle_Delivered_Service @N_GET_ID, @RC OUTPUT
                SELECT @myERROR = @@ERROR--, @myRowCount = @@ROWCOUNT
                IF @myERROR <> 0 OR @RC <> 0
                BEGIN
                    ROLLBACK TRAN
                END
            END

            --A lot of similar cases
END TRAN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:53:04.250

您将 BEGIN TRY/BEGIN CATCH 块与旧式 @@ERROR 检查混合在一起。它使错误处理*和*事务处理几乎无法管理。考虑这段代码：

```
SELECT @myERROR = @@ERROR--, @myRowCount = @@ROWCOUNT
IF @myERROR <> 0 OR @RC <> 0
BEGIN
   ROLLBACK TRAN
END 
```

你能按照这里涉及的控制流和事务流吗？代码在从 TRY/CATCH 块调用的上下文中执行，因此不应出现 @@ERROR 情况，并且控制流应跳转到 CATCH 块。但是等一下，如果在没有 TRY/CATCH 块的情况下从不同的上下文调用该过程怎么办？然后可以采用@@ERROR 情况，但这意味着控制流*继续*！即使设置了 TRY/CATCH 竞赛*，*如果@RC 为非零，事务将回滚但*控制流继续*到现在将在每个语句独立事务的上下文中执行的下一个语句，因为整个包含事务已经回滚！换句话说，在这种情况下，您可以向您*未*收到的消息发送响应 Ack（您只是将其回滚！）。难怪您会看到行为似乎不稳定的情况。

我建议您只坚持一种错误处理方式（唯一合理的方式是 BEGIN TRY/BEGIN CATCH 块）。不要在应用程序逻辑错误的情况下故意回滚，而是[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx)在必要时使用并依赖 CATCH 块进行回滚。[还要按照异常处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)中显示的模板来设置您的过程的样式。此模板允许在发生错误时逐个消息决定回滚到事务中的安全点（即提交您的 RECEIVE 批消息，即使*某些*消息在处理过程中发生错误）。****

# jquery - HTML5 / jQuery 视差效果——“背景尺寸”问题

> ID：10074183
> 
> 赞同：1
> 
> 时间：2012-04-09T13:48:09.237
> 
> 标签：jquery, html, parallax

因此，我使用[本教程](http://www.ianlunn.co.uk/blog/code-tutorials/recreate-nikebetterworld-parallax/)构建了一个站点，并遇到了一个小错误。

我有一组照片（大小约为 700-800 像素），我想将它们用作垂直页面每个“部分”的背景图像。

我通过 CSS 加载图像没有问题，但是当我尝试使用以下命令将图像重新调整为全屏时

```
background-size:cover; 
```

或者

```
background-size:100%; 
```

jQuery 滚动动画变得非常不稳定/滞后。

并且澄清一下，当图像以正常大小加载（并且不填满整个窗口）时，页面滚动非常流畅。

有什么建议么？使用 CSS 调整图像大小的不同方法？有什么方法可以优化 jQuery 脚本以防止呆滞？

# php - 在网站上创建 ImageMap - 建议

> ID：10074185
> 
> 赞同：0
> 
> 时间：2012-04-09T13:48:14.367
> 
> 标签：php, javascript, html, image, map

我需要一些关于在我的网站上创建图像地图的开源解决方案的建议，然后能够保存图像地图并在单独的页面上查看它们。

我还希望能够将每个选定区域保存为单独的图像文件 (jpeg/gif/png)。

有没有人有什么建议？

我遇到过这个： http: [//www.maschek.hu/imagemap/imgmap](http://www.maschek.hu/imagemap/imgmap) 但它已经很老了，而且对用户不太友好。缺少保存图像映射的功能，尽管它确实提供了生成的代码。

此外，如果我自己创建它会更容易，我会推荐教程/说明。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:48:17.397

如果您使用图像地图，我建议您查看[ImageMapster JQuery 插件](http://www.outsharked.com/imagemapster/)，它可以真正帮助完成许多图像地图操作任务。

保存图像地图并可以单独查看它们的任务非常不寻常且难以实现，我想如果你真的需要这个，你应该再考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:59:12.380

您可以只`DIV`使用 in image as创建`background`，然后将其放在其中`float`的`absolute`位置 other `div`s 将作为链接：

```
<div style="width:500px; height:500px; background: #FAFAFA url('someImage.png') center center;">
    <div style="width:250px; height:250px; float:left;" onclick="location.href='http://someurl.com'"></div>
    <div style="width:250px; height:250px; position:absolute; top:20px; right:5px" onclick="location.href='http://someurl.com'"></div>
</div> 
```

# php - 错误 MySQL 服务器版本，以便在 '(menuname) =('') where menuname=('Food Menu')' 附近使用正确的语法

> ID：10074195
> 
> 赞同：0
> 
> 时间：2012-04-09T13:49:34.633
> 
> 标签：php

我有 2 个数组，`$arr`用于旧菜单名称和`$arr1`新菜单名称。我想用数据库中的新菜单名称替换旧菜单名称。我有以下代码，但它抛出了一个错误。

```
<?php
$arr  = explode(',', preg_replace('/^.*\[(.*)\].*$/', '$1', trim($_POST['menuname'],
                                                                 '[]')));
$arr1 = explode(',', preg_replace('/^.*\
       [(.*)\].*$/', '$1', trim($_POST['editmainmenu'], '[]')));

mysql_connect("localhost", "root", "root");
mysql_select_db("test");
foreach ($arr as $key => $value)
{
    $value1 = $arr1[$key];

    mysql_query("update test set (menuname) =('" .
                    mysql_real_escape_string($value1) . "') where menuname=('" .
                    mysql_real_escape_string($value) . "')")or
        die('unable' . mysql_error());
    echo "updated";
}
?> 
```

我收到以下错误：

```
04-09 19:06:27.201: I/System.out(1291): unableYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(menuname) =('') where menuname=('Food Menu')' at line 1 
```

请告诉我如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:02:48.663

只是建立在埃米尔提供的答案之上：

> 删除所有不需要的括号。

您的 SQL 语句中有不正确且不必要的括号。您的声明将如下所示：

```
update test set (menuname) = ('foo') where menuname = ('foo2'); 
```

当它看起来像这样（减去不正确的括号）时：

```
update test set menuname = 'foo' where menuname = 'foo2'; 
```

如果你用大写字母表示 SQL 语句，它也会更容易阅读：

```
UPDATE test SET menuname = 'foo' WHERE menuname = 'foo2'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:26:41.180

这是我对它进行清理后您的代码的样子：

```
<?php
$old_menu_names = explode(',',
                          preg_replace(
                              "|\[(.+)\]|",          //Find the part in between the square brackets
                              "$1",                  //And extract it
                              trim(
                                  $_POST['menuname'] //From the trimmed menuname.
                              )
                          )
);
$new_menu_names = explode(',',
                          preg_replace(
                              "|\[(.+)\]|",
                              "$1",
                              trim(
                                  $_POST['editmainmenu']
                              )
                          )
);

mysql_connect("localhost", "root", "root");
mysql_select_db("test");
foreach ($old_menu_names as $key => $old_name)
{
    $new_name = mysql_real_escape_string($new_menu_names[$key]);
    $old_name  = mysql_real_escape_string($old_menu_names[$key]);

    mysql_query("UPDATE `test` SET `menuname` = '$new_name' WHERE menuname = '$old_name'")
        or die('Error' . mysql_error());
    echo "Updated";
}
?> 
```

＃＃我做了什么：

*   变量命名 - 根据变量包含的内容命名变量，不要使用晦涩的名称，例如`$arr`或`$arr1`，在较大的应用程序中，您很快就会迷失方向。
*   如果语句很长、很复杂和/或包含嵌套括号，不要害怕换行，这样更容易理解。
*   注释，当某些事情没有立即被理解时，请随意添加注释，向任何人（包括几个月后的你自己）解释代码的用途。
*   不要在不需要的地方添加括号。请参阅我编写的新查询。
*   您没有在 foreach 循环中声明旧名称，因此结果为空并引发错误。

总之，我建议你阅读一本关于最佳实践和编程概念的好书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:50:47.080

删除所有不需要的括号。

# metadata - Tridion 在哪里存储元数据值？

> ID：10074196
> 
> 赞同：4
> 
> 时间：2012-04-09T13:49:41.823
> 
> 标签：metadata, tridion

当我们为组件定义自定义元数据时，我的理解是这个用户给定的元数据存储在 SQL Server 中。它在组件 xml 中不可见。谁能解释链接到组件的元数据究竟是如何存储的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T14:02:17.793

Tridion 中的组件定义有两种类型的字段：内容字段和元数据字段。这两种字段类型都存储在 Content Manager 数据库（SQL Server 或 Oracle）中。每当您通过 Tridion 的任何 API（TOM、TOM.NET 或核心服务）从 Tridion 读取组件时，都会检索这两种字段类型。

只有内容字段显示在组件编辑窗口的源选项卡中，但元数据字段在同一窗口的元数据选项卡上可见。

如果您想拥有元数据和内容字段的 XML 的单一视图（以及 Tridion 中组件的许多其他属性），请考虑安装[PowerTools](http://code.google.com/p/tridion-2011-power-tools/)或[Item XML 扩展](http://yoavniran.wordpress.com/2010/08/30/the-item-xml-display-tridion-gui-extension/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T14:26:23.867

我想你可能会有点混淆。

元数据始终作为组件的一部分存储在`tcm:Metadata`. 当您*发布*此组件时，元数据字段也可用于在 Content Delivery Data Store 上进行查询。

这些字段是否显示为组件表示的一部分取决于您的模板。没有什么能阻止您在模板的输出中包含这些值（例如 SEO 的典型用例）。

总之：

*   在 CM 中，Metadata 与 Component 一起存储
*   在 CD 中，元数据存储为与该组件关联的“CUSTOM_META”的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T14:32:18.150

只是一个注释，

还有另一个元数据不存储为元数据字段，即系统元数据，例如上次修改日期或上次修改组件的用户。那是 CMS 中的元数据。此外，在发布给定组件时，前端也会发布系统元数据（代理或文件系统元数据），例如上次发布日期。

您也可以在模板中利用/使用系统元数据。

# python - 在清除（）树时使用 ElementTree.iterparse() 是否应该增加内存使用量？

> ID：10074200
> 
> 赞同：8
> 
> 时间：2012-04-09T13:49:55.803
> 
> 标签：python, memory-leaks, elementtree

```
import os
import xml.etree.ElementTree as et

for ev, el in et.iterparse(os.sys.stdin):
    el.clear() 
```

[在 ODP 结构RDF 转储](http://rdf.dmoz.org/rdf/structure.rdf.u8.gz)上运行上述内容总是会增加内存。这是为什么？我知道 ElementTree 仍然构建一个解析树，尽管有子节点`clear()`编辑。如果这是这种内存使用模式的原因，有没有办法解决它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T19:26:35.503

您正在`clear`读取每个元素，但对它们的引用仍保留在根文档中。所以单个元素仍然不能被垃圾收集。

解决方案是清除根中的引用，如下所示：

```
import xml.etree.ElementTree as ET

# get iterator
context = ET.iterparse(source, events=("start", "end"))

# get the root element
event, root = next(context)

for event, elem in context:
    if event == "end" and elem.tag == "record":
        # process record elements here...
        root.clear() 
```

关于内存使用的另一件事要记住，这可能不会影响您的情况，即一旦 VM 从系统为堆存储分配内存，它通常永远不会归还该内存。大多数 Java VM 也以这种方式工作。因此，即使该堆内存未被使用，您也不应该期望解释器的大小会减少`top`或减少。`ps`

## 更新 ：

为了在 Python 3+ 中工作而更改了代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-12T22:26:27.410

正如 Kevin Guerra 的回答中提到的，ElementTree 文档中的“root.clear()”策略只删除了根的完全解析的子节点。如果那些孩子正在锚定巨大的树枝，那不是很有帮助。

他谈到了理想的解决方案，但没有发布任何代码，所以这里是一个例子：

```
element_stack = []
context = ET.iterparse(stream, events=('start', 'end'))
for event, elem in context:
    if event == 'start':
        element_stack.append(elem)
    elif event == 'end':
        element_stack.pop()
        # see if elem is one of interest and do something with it here
        if element_stack:
            element_stack[-1].remove(elem)
del context 
```

感兴趣的元素将没有子元素；一旦看到它们的结束标签，它们就会被删除。如果您只需要元素的文本或属性，这可能没问题。

如果要查询元素的后代，则需要为其构建完整的分支。为此，维护一个标志，实现为这些元素的深度计数器。仅在深度为零时调用 .remove() ：

```
element_stack = []
interesting_element_depth = 0
context = ET.iterparse(stream, events=('start', 'end'))
for event, elem in context:
    if event == 'start':
        element_stack.append(elem)
        if elem.tag == 'foo':
            interesting_element_depth += 1
    elif event == 'end':
        element_stack.pop()
        if elem.tag == 'foo':
            interesting_element_depth -= 1
            # do something with elem and its descendants here
        if element_stack and not interesting_element_depth:
            element_stack[-1].remove(elem)
del context 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T22:52:31.127

我遇到了同样的问题。该文档并没有使事情变得非常清楚。我的问题是：

1) 调用 clear 确实会释放子节点的内存。文档说它会释放所有内存。Clear 不会释放调用 clear 的内存，因为该内存属于分配它的父级。2) 调用 root.clear()，这取决于 root 是什么。如果 root 是父级，那么它将起作用。否则，它不会释放内存。

修复方法是保留对父节点的引用，当我们不再需要该节点时，我们调用 parent.remove(child_node)。这很有效，它使内存配置文件保持在几 KB。

# eclipse - WebLogic Server 已在 Eclipse Galileo 中启动并正常运行，但启动时出现几个错误

> ID：10074202
> 
> 赞同：0
> 
> 时间：2012-04-09T13:50:03.353
> 
> 标签：eclipse, weblogic

我能够在我的本地计算机上启动 WebLogic Server 11gR1 PatchSet 2，并且在启动 WLS 后可以访问我的 Web 应用程序，但是在启动时我的 Eclipse Galileo 错误日志中出现错误。这是我按升序收到的消息：

*   启动 WebLogic Server Monitor [mydomain@localhost:7001, Version:10.3.3.0]
*   无法在与目标 WebLogic 运行时关联的 Java VM 中找到 tools.jar；依赖于 tools.jar 的功能可能无法运行
*   服务器无法在超时内启动。
*   本地主机上的服务器 Oracle WebLogic Server 11gR1 PatchSet 2 无法在 480 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时。

我已将超时设置增加到 480 秒（8 分钟），人们会认为这对于启动来说已经足够了。

我能够成功运行我的 Web 应用程序，并且在控制台上也生成了输出，因此上面项目符号中的最后三个错误消息不会显示停止符。

想知道你们中是否有人遇到过这些错误以及如何解决这些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:23:17.653

升级到最新版本的 Eclipse Java EE（用于 win32 的 Indigo SR2）并且能够毫无问题地启动它。

# algorithm - 从后缀树生成后缀

> ID：10074203
> 
> 赞同：1
> 
> 时间：2012-04-09T13:50:15.447
> 
> 标签：algorithm, data-structures, suffix-tree

我已经基于此处的站点[http://marknelson.us/1996/08/01/suffix-trees/](http://marknelson.us/1996/08/01/suffix-trees/)在 Java 中构建了一个后缀树，但我遇到了一个问题。我可以很好地构建后缀树，但我可以尝试从树中构建一组所有后缀。我基本上找到了所有的“结束节点”并返回由那个“结束节点”表示的字符串

该算法适用于“簿记员”之类的词

```
├── (1) bookkeeper
├── (9) e
│   ├── (8) eper
│   ├── (10) per
│   └── (12) r
├── (6) k
│   ├── (7) eeper
│   └── (5) keeper
├── (3) o
│   ├── (4) kkeeper
│   └── (2) okkeeper
├── (11) per
└── (13) r 
```

后缀：

```
[bookkeeper, ookkeeper, okkeeper, kkeeper, keeper, eeper, eper, er, per, r] 
```

但是当我使用“ATATATATATA”之类的东西时它会失败

```
├── (1) ATATATATATA
└── (2) TATATATATA 
```

后缀：

```
[ATATATATATA, TATATATATA] 
```

但正确的后缀应该是：

```
[A, ATA, ATATA, ATATATA, ATATATATA, ATATATATATA, TA, TATA, TATATA, TATATATA, TATATATATA] 
```

我可以通过查找每个“结束节点”字符串的所有后缀来找到答案，但这似乎不是正确的方法。还有其他建议吗？

编辑：谢谢izomorphius！在原始字符串中添加 END_CHAR 帮助了很多。

```
├── (21) #
├── (19) A
│   ├── (20) #
│   └── (15) TA
│       ├── (16) #
│       └── (11) TA
│           ├── (12) #
│           └── (7) TA
│               ├── (8) #
│               └── (3) TA
│                   ├── (4) #
│                   └── (1) TA#
└── (17) TA
    ├── (18) #
    └── (13) TA
        ├── (14) #
        └── (9) TA
            ├── (10) #
            └── (5) TA
                ├── (6) #
                └── (2) TA# 
```

后缀：

```
[A, ATA, ATATA, ATATATA, ATATATATA, ATATATATATA, TA, TATA, TATATA, TATATATA, TATATATATA] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:54:18.317

关于如何构建后缀树的典型提示是添加一个您知道不在字母表中的人工字符。我通常添加“#”，然后为 ATATATATATA# 构建后缀树，这样您就不会再遇到这个问题了。

您会遇到您描述的问题，因为缺少的后缀实际上是作为另一个后缀的前缀来满足的。最后添加一个人造角色确保这永远不会发生。

# arrays - 有没有比在 F# 中追加更有效的向数组添加尾部的方法？

> ID：10074205
> 
> 赞同：5
> 
> 时间：2012-04-09T13:50:17.893
> 
> 标签：arrays, f#, append

我目前正在尝试构建一个程序，其中我有一个递归函数，该函数对于每个循环都将一个新元素附加到它正在构建的数组中。我不想多次使用 append 函数，因为我的函数应该做大量的循环，而且我从以前的经验中了解到 append 函数通常需要很多时间。我试图到处寻找一个简单地将一个元素添加到数组尾部的函数，但我没有找到这种类型。所以我想我会在这里问。

所以我的问题基本上是：“有没有比使用追加更有效的方法将一个元素添加到数组的后面？”

* * *

## 更新了一个关于前一个问题的新问题

所以我使用了一个列表，将每个新元素作为头部插入，并在函数完成时恢复列表。这使该功能快了大约 70 倍。但是问题仍然存在，因为我有另一个功能几乎相同，它变得慢了大约 4 倍，增加了我的主要功能的总时间。功能非常相似。第一个函数（变得更快的那个）产生整数，将每个新整数添加到列表中。第二个函数（变得慢得多的函数）生成一个对象，将每个新对象添加到列表中。有谁知道为什么一个功能变得如此之快而另一个功能变得如此之慢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T14:13:00.453

[ResizeArray](http://msdn.microsoft.com/en-us/library/ee353447.aspx)是这个任务更高效的数据结构，例如：

```
let filterRange predicate (i, j) =
    let results = ResizeArray(j-i+1)
    for k = i to j do
        if predicate k then results.Add(k)
    results.ToArray() 
```

[F# PowerPack中的](http://fsharppowerpack.codeplex.com/)[ResizeArray 模块](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp.powerpack/microsoft.fsharp.collections.resizearray.html)提供高阶函数以`ResizeArray`函数式方式进行操作。*但是，请注意这些函数会创建新`ResizeArray`实例，这会使它们的效率低于 .NET 方法。*

一个纯粹的功能替代方法是使用列表作为累加器，将元素添加到累加器，反转它（如果顺序很重要）并最终转换为 Array：

```
let filterRange predicate (i, j) =
    let rec loop k acc =
        if k = j+1 then acc
        elif predicate k then loop (k+1) (k::acc)
        else loop (k+1) acc
    loop i [] |> List.rev |> Array.ofList 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T14:15:02.310

我建议使用列表而不是数组。如果您确实需要数组中的最终结果，您可以在过程结束时将列表转换为数组 - 它仍然会更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T13:56:32.413

不，您可能想要使用不同的数据结构。

# wpf - Wpf DatePicker 文本在绑定源更新后未更新

> ID：10074206
> 
> 赞同：2
> 
> 时间：2012-04-09T13:50:19.673
> 
> 标签：wpf

我希望用户能够输入例如 310312 并将日期选择器的文本属性自动更新为 31/03/12；我已将日期选择器绑定到视图模型“日期”属性，如下所示。

使用 WPF4.0，绑定现在会在设置后自动执行获取（不需要 INotifyPropertyChanged）；这发生在下面的代码中，但尽管“get”日期字段值是正确的“31/03/12”，但 datepicker 文本属性没有更新，并且保持在 310312（NB UpdateSourceTrigger=PropertyChanged）。

文本框属性确实发生了变化（例如，未显示的设置代码转换为大写的地方）

我真的很感激一些关于为什么会这样的指示。

```
 <Grid>
        <DatePicker Text="{Binding Path=Date,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
            Height="25" HorizontalAlignment="Left" Name="datePicker1"/>
        <TextBox Text="{Binding Path=State,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Height="23" HorizontalAlignment="Left"  Name="textBox1" />
    </Grid>

        private string date;
        public string Date
        {
            get
            {
                return date;
            }
            set
            {
                if (value != null)
                {
                    Regex abbreviatedDateFormat = new Regex(@"\A\d{6}\Z");
                    if (abbreviatedDateFormat.IsMatch(value))
                    {
                        value = value.Insert(2, "/");
                        value = value.Insert(5, "/");
                    }
                }

                date = value;                    
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:01:39.497

这不是一个明确的答案，但我想发布代码并对其进行格式化，所以我把它放在这里。

这引起了我的兴趣，所以我一直在玩一个简单的测试项目。这是我的代码：

**主窗口.xaml**

```
<Window x:Class="datepickertest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" x:Name="Me">
   <StackPanel>
      <DatePicker Name="datePicker" Text="{Binding ElementName=Me, Path=Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

      <TextBlock Text="{Binding ElementName=datePicker, Path=Text}"/>
      <TextBlock Text="{Binding ElementName=datePicker, Path=SelectedDate}"/>
      <TextBlock Text="{Binding ElementName=Me, Path=Date}"/>
   </StackPanel>
</Window> 
```

**主窗口.xaml.cs**

```
public partial class MainWindow : Window
{
  public MainWindow()
  {
     Date = "030912";
     InitializeComponent();         
  }

  private string date;
  public string Date
  {
     get { return date; }
     set
        {
            if (value != null)
            {
                Regex abbreviatedDateFormat = new Regex(@"\A\d{6}\Z");
                if (abbreviatedDateFormat.IsMatch(value))
                {
                    value = value.Insert(2, "/");
                    value = value.Insert(5, "/");
                }
            }

            date = value;                    
        }
  } 
```

}

我注意到的是 DateTime 控件的输入不理解日期格式，如果它们没有用“/”字符分隔。我将 Text 属性绑定到像您一样的 TextBlock ，我可以看到它逐个字符地更新 TextBlock 并且在匹配正则表达式时它会出现斜线，但是在提供有效日期之前，实际输入框值不会更新（无论 UpdateSourceTrigger 是什么）并按下回车键。在我看来，这可能是控件的期望行为。

我知道控件的格式基于当前线程的文化信息，但是按照这个链接 [http://social.msdn.microsoft.com/Forums/en/wpf/thread/f065bcda-a5df-4fd1-bd29-3d0186245c8c](http://social.msdn.microsoft.com/Forums/en/wpf/thread/f065bcda-a5df-4fd1-bd29-3d0186245c8c)，我是仍然无法找到适合您的解决方案。

# java - 有没有一种简单的方法可以将复杂类的对象写入 java 文件？

> ID：10074209
> 
> 赞同：1
> 
> 时间：2012-04-09T13:50:29.470
> 
> 标签：java

假设我有这样的事情：

```
class A
{
public B mem;
public int x;
public int y;
}

class B
{
public C mem1;
public D mem2;
}

class C
{
public Image img;
}

class D
{
public int m;
}

//Writing object A onto a file using ObjectWriter? 
```

如何使用 ObjectWriter 将 A 类写入文件？如果我直接写，那么它只会复制指针（如果我没记错的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T13:54:05.820

是的。使用[序列化 API](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。这非常简单。

# javadoc - 以 DOC 或 RTF 格式生成 JavaDoc 的工具？

> ID：10074210
> 
> 赞同：2
> 
> 时间：2012-04-09T13:50:42.867
> 
> 标签：javadoc, rtf, .doc

是否有任何可用的免费工具可以生成 JavaDoc`.doc`或（我`.rtf`也`.pdf`可以使用 pdf）格式而不是 HTML？

我正在使用 NetBeans，它会生成一个非常整洁的 javadoc 作为 html 和 css，但我想将它们放在 MS Word 文档中。它有大约 50 个 html 文档，将其复制粘贴到文档文件中是不可行的，而且如果我复制粘贴它，也会丢失 NetBeans 通过 CSS 创建的格式。任何解决方案？插件？软件？

# jquery - jQueryUI 对话框重新打开输入文本未被禁用

> ID：10074212
> 
> 赞同：0
> 
> 时间：2012-04-09T13:50:50.360
> 
> 标签：jquery, jquery-ui, dialog

我正在动态创建一个对话框，当我第一次打开它时它运行良好，但是当我尝试再次重新打开它时，我创建的功能单击不起作用。这是我的代码，都在 onready 函数中。我只是试图禁用一个输入字段并给它焦点。非常感谢。

```
$("#rdoAddressN").click(function(){
    var html;
    html="<table>"
                +"<tr>"
                    +"<td style='font-size: 14px;'  align='center'><strong>D I R E C T O R I O</strong></td>"
                +"</tr>"
                +"<tr>"
                    +"<td align='center' nowrap>"
                    +"<input name='zipcodeType' id='zipcodeTypeCP' value='1' type='radio' style='margin: 10px'><strong>CP</strong>"
                    +"<input name='zipcodeType' id='zipcodeTypeCol' value='2' type='radio'  style='margin: 10px'><strong>Colonia</strong>"
                    +"<input name='btnBuscarCP' id='btnBuscarCP' value='Buscar' type='button'  style='margin: 10px'>"
                    +"</td>"
                +"</tr>"
                +"<tr>"
                    +"<td align='center'>"
                        +"<input autocomplete='off' name='zipcodeDialog' id='zipcodeDialog' class='zipcodeDialog' size='50' class='authInput' type='text' disabled='disabled' />"
                    +"</td>"
                +"</tr>"
                +"<tr>"
                        +"<td >"
                            +"<div style='width: 576px; opacity: 0.999999; display: none;' id='divResultsCP' align='center'>"
                            +"</div>"
                        +"</td>"
                    +"</tr>";

        +"</table>";

    var caja2 = $('<div title="Direccion de Codigos Postales"><p>'+html+'</p></div>');
    caja2.dialog({modal: true,show: 'fade',hide: 'fade',height:'auto',width:'auto'});
    $(":button").button();
    $('#zipcodeTypeCP').click(function(){
        $('.zipcodeDialog').remove("disabled");
        $('.zipcodeDialog').attr("disabled", true);
        $('.zipcodeDialog').attr("disabled", false);
        $('.zipcodeDialog').focus();
    })
    $('#zipcodeTypeCol').click(function(){
        $('.zipcodeDialog').remove("disabled");
        $('.zipcodeDialog').attr("disabled", true);
        $('.zipcodeDialog').attr("disabled", false);
        $('.zipcodeDialog').focus();
    })
    $('#btnBuscarCP').click(function(){
            if($('#zipcodeDialog').val().length>3){
            $("#divResultsCP").html('<img src="img/ajax-loader-big.gif" />')
            $.ajax({
                data: "texto="+ $('#zipcodeDialog').val()+"&zipcodeType="+$('input:radio[name=zipcodeType]:checked').val() ,
                type: "post",
                dataType: "json",
                url: "ajax/cp.php",

                success: function(data){
                        switch(data.error){
                        case undefined:
                                if(data.mensaje==undefined){
                                    $("#autocomplete_choices").html('');
                                    var tabla="<table  class='cptable'>";
                                    tabla+="<tr >"
                                        tabla+="<td ></td>";
                                        tabla+="<td>CP</td>";
                                        tabla+="<td>Colonia</td>";
                                        tabla+="<td>Municipio</td>";
                                        tabla+="<td>Ciudad</td>";
                                        tabla+="<td>Estado</td>";
                                    tabla+="</tr>"

                                    for(index=0; index<data.length; index++) {
                                        tabla+='<tr><td><a href=""> + </a></td><td>' + data[index].postal_code +  '</td><td> ' + data[index].colony_name + '</td><td>'+ data[index].d_mnpio+'</td><td>'+ data[index].city_name+'</td><td> '+data[index].state_name+'</td></tr>'
                                    }
                                    tabla+="<table>"
                                }else{
                                    tabla=data.mensaje;
                                    $("#divResultsCP").addClass("ui-state-highlight");
                                }
                                $("#divResultsCP").html(tabla)
                                $("#divResultsCP").show()
                            break;
                        case 'Login':
                                $("#autocomplete_choices").html('');
                                alert("Usuario No logueado");
                            break;
                        default:
                                $("#autocomplete_choices").html('');
                                $("#divResultsCP").html(data.error);
                                $("#divResultsCP").addClass("ui-state-highlight");
                            break;
                    }
                }
                ,error: function (request, status, error) {
                    alert(request.responseText);
                }

            });
        }
    });

})` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:14:55.030

好吧，午休时间，我看没有人给你一个像样的答案。我为您制作了 jsFiddle，它可能会向您展示如何更轻松地完成您想做的事情。如果没有，它应该向您展示如何更好地使用 jQuery 和 HTML。像您正在做的那样创建长的 HTML 字符串完全违背了 jQuery 的“多做少写”的目的。他们已经完成了艰苦的工作，您需要做的就是聪明地工作。

# [在此处查看工作 jsFiddle](http://jsfiddle.net/SpYk3/4Qt2b/)

（ - ajax url 工作，因为我没有真正的 php 控制器可以调用，但我猜测成功代码，如果你将它应用到本地开发人员，它应该仍然可以正常工作）

另外，如果我知道更多的期望和正在发生的事情，实际上，即使是我的工作示例也可能会减少大约十几行左右。那和我尝试使用“最简单的”来理解 jQuery 的部分，但是有很多不同的方法来完成诸如“附加”html 和那里的一些其他元素之类的事情。

# android - .Net 服务器和移动操作系统之间的 2 路通信

> ID：10074213
> 
> 赞同：0
> 
> 时间：2012-04-09T13:51:08.593
> 
> 标签：android, .net, objective-c

我正在尝试构建一款适用于 android 和 iPhone 的游戏，该游戏与 .Net 服务器通信以发送和接收有关游戏状态的数据。其中一个要求是我遇到的问题是我需要一种方法来近乎实时地进行双向通信，但我似乎找不到一种可行的方法。此外，如果它有帮助的话，我主要是希望至少在第一个版本中通过 wifi 连接到服务器和客户端来玩这个游戏。

我曾尝试查看推送消息服务，但它们似乎不够快。我还研究过在 wcf 中使用 netTcp 绑定，但这似乎需要 .net 客户端。

有谁知道解决我可能错过的这个问题的好方法？

# vb.net - 从数据库中选择 0776578969 并显示 0776 578 969

> ID：10074214
> 
> 赞同：-1
> 
> 时间：2012-04-09T13:51:09.360
> 
> 标签：vb.net, ms-access

尝试使用数据库空间（ms-access）显示数据，例如选择 0776578969 并使用 access 和 vb 显示 0776 578 969。帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:37:00.163

如果您在报告或表格中需要此信息，则只需使用自定义格式。

（在格式设置中：

@@@@ @@@ @@@

而且，在代码中，你可以去：

格式("你的价值","@@@@ @@@ @@@")

Access 是一种业务应用程序开发工具，这种类型的字符串处理和必须使用 VBA 代码对于报表、表单中的通用格式不是必需的。即使如上所示，对于您不使用 mid$ 等处理的代码，但使用格式化命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:14:36.977

如果您想在 MS Access 中执行此操作，那么您需要查看[`Left`](http://office.microsoft.com/en-us/access-help/left-function-HA001228873.aspx),[`Mid`](http://office.microsoft.com/en-us/access-help/mid-function-HA001228881.aspx)和[`Right`](http://office.microsoft.com/en-us/access-help/right-function-HA001228900.aspx)函数。这是一个示例查询，应该可以为您提供所需的结果：

```
Test Table:
PhoneNumber
776578969
123456789

SELECT Left(test.phonenumber, 3) & " " & Mid(test.phonenumber, 4, 3) & " " & Right(test.phonenumber, 3)
FROM test;

Results:
776 578 969
123 456 789 
```

# php - 在 While 循环内部设置的变量在外部未定义的问题。

> ID：10074218
> 
> 赞同：0
> 
> 时间：2012-04-09T13:51:18.927
> 
> 标签：php, html

好的，所以我创建了一个新的支持票证系统，但在我的票证搜索页面中，它不断给我错误，例如第 197 行中的未定义变量。奇怪的是，该变量是在它的正上方定义的。请帮助我这里是代码的链接：http: [//pastebin.com/AMzRLDK4](http://pastebin.com/AMzRLDK4)

我试图让我能够查看打开的支持票并将它们标记为已读或更改状态，并通过转到 pm 系统来回复它们。我昨晚让它工作了，但我一定是在没有意识到它的效果的情况下改变了一些东西。

在此先感谢，马特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:08:29.477

看起来这是您第一次在代码中使用 $Sid 或 $Sname。它们暂时位于代码块内，这意味着它们是唯一存在的地方。另外，我认为您想使用[mysql_fetch_assoc()](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)。它实际上将使用列名，而不是索引。（可能最好使用较新的[MySQLi](http://www.php.net/manual/en/book.mysqli.php)有几个原因）

```
while($raw = mysql_fetch_array($ret)){ $Sid = $raw['id']; $Sname = $raw['username']; } 
```

快速解决：

```
$Sid = null; //or 0 whichever makes sense for you
$Sname = null; //or ''
while($raw = mysql_fetch_assoc($ret)){ $Sid = $raw['id']; $Sname = $raw['username']; } 
```

但是，使用 MySQL 查询中的 LIMIT 1，您可以将 WHILE 全部删除

```
$raw = mysql_fetch_assoc($ret);
if($raw === false)
{
    //Error Condition
}

$Sid = $raw['id'];
$Sname = $raw['username']; 
```

# jquery - 需要脚本通过输入更改 div 背景

> ID：10074221
> 
> 赞同：2
> 
> 时间：2012-04-09T13:51:34.007
> 
> 标签：jquery, input, background-color

当我返回并删除输入字段空白的数据时，除非我键入 A“0”，否则背景不会恢复到原来的颜色。

我需要 DIV 的背景颜色在空白时恢复到原来的颜色。

我究竟做错了什么？

```
<script>
$(document).ready(function() {

    $("#id").keypress(function() {
        if ($("#id").val().length > 0) $("#in").css("background-color", "red");
        else {
            if ($("#id").val().length == 0) $("#in").css("background-color", "grey");
        }
    });

});​
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:01:08.837

问题是因为您使用`keypress`的是在执行键操作之前调用的。如果你使用`keyup`这将工作：

```
$("#id").keyup(function() {
    if ($(this).val().length > 0) {
        $("#in").css("background-color", "red");
    }
    else {
        $("#in").css("background-color", "grey");
    }
}); 
```

此外，正如@mblase75 指出的那样，您不需要测试`length`else 条件中的值。

[**示例小提琴**](http://jsfiddle.net/FAL4C/1/)

如果您想进一步简化此代码，您可以简单地使用三元语句`.val().length`作为条件，因为正整数将等于 true：

```
$("#id").keyup(function() {
    $(this).css("background-color", $(this).val().length ? "red" : "grey");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:02:03.143

您可能想使用`keyup`来说明刚刚输入的字符：

```
$(function(){
    $("#id").keyup(function() {
        $("#in").css("background-color", $(this).val().length > 0 ? "red" : "grey");
     });
 });​ 
```

这是一个[jsFiddle](http://jsfiddle.net/bgLVf/1/)来演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:00:59.150

这个应该可以...

```
<script>

$(document).ready(function() {

    $("#id").keyup(function() {
        if($("#id").val().length > 0) {
           $("#in").css("background-color", "red");
        }
        else {
           $("#in").css("background-color", "grey");
        }
    });
});​

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:20:56.060

在您的情况下，'keypress' 事件在 input.val().length 更改之前已调用。并且您的代码运行选择器检索五次，插入一次。

看看这段代码，它工作正常：

html:

```
<input id="id" type="text" autocomplete="off">
<div class="in"></div>​​​ 
```

CSS：

```
.in {width:200px; height:20px; background-color:#grey;}
.in-red {background-color:red;} 
```

​ js：

```
$(function(){
    var $in = $('.in');
    $('#id').on('keyup', function(){
        $this = $(this);
        if ($this.val().length > 0) {
            $in.addClass('in-red');
        } else {
            $in.removeClass('in-red');
        }
    });
});​ 
```

您可以在[http://jsfiddle.net/Qhkev/1/上对其进行测试](http://jsfiddle.net/Qhkev/1/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-09T14:09:45.077

使用键位

```
<script>
$(document).ready(function(){

$("#id").keyup(function() {
    if($("#id").val().length > 0) $("#in").css("background-color", "red");
  else {
    if($("#id").val().length == 0) $("#in").css("background-color", "grey");
 }

 });
 });
 </script> 
```

# php - 上传到服务器后需要一些帮助来解决 php 脚本

> ID：10074223
> 
> 赞同：0
> 
> 时间：2012-04-09T13:51:39.033
> 
> 标签：php, mysql, upload

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我在家里使用 xampp……下周我需要在学校展示我的工作，因此我决定上传到免费的托管服务器。在我的 xampp 机器上，它工作得非常好，但是一旦我将数据库和我的文件上传到**public_html**，这些文件就不能再正常工作了。

我的网站

这是登录页面，但是在我使用准确的用户名和密码登录后，出现了几个错误，例如

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 41

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 43

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 51

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 59

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 67

Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/hubertj/public_html/login_now.php on line 75

Warning: Cannot modify header information - headers already sent by (output started at /home/hubertj/public_html/login_now.php:41) in /home/hubertj/public_html/login_now.php on line 86 
```

但是在我的 xampp 机器上它运行顺利。因此我所做的是我在 sql 界面中尝试了查询，它也可以正常工作。我只是不明白上传到服务器时错过了什么步骤。这是我第一次用数据库上传网站。非常感谢。

发生错误的 login_now.php 代码：

```
<?php session_start(); ?>
<?php include("Connections/database.php");?>
<?php

$myeid = $_POST['logineid'];
$mypassword = $_POST['password'];

$conn = dbConnect(); //get connected to database    
//successful?
if (!$conn)
    die("Couldn't connect to MySQL");

$query = "select * from emp where EID = '$myeid' and PASS = '$mypassword'";

//run the query
$result = mysql_query($query, $conn);
$row = mysql_fetch_assoc($result);

if (mysql_num_rows($result) > 0 and $row['POSITION']=="manager")    //found a record whose position is manager?
{
    $_SESSION['eid'] = $myeid;  //remember name as a session variable
    $_SESSION['password'] = $mypassword;    //remember password as a session variable
    $_SESSION['start'] = time();    // taking now logged in time
    $_SESSION['expire'] = $_SESSION['start'] + (60 * 60) ;  // ending a session in 60 minutes from the starting time
    header('Location: manager/welmanager.php');     //redirect user to index
}
elseif (mysql_num_rows($result) > 0 and $row['POSITION']=="staff")         //found a record whose position is staff?
{
    $_SESSION['eid'] = $myeid;  
    $_SESSION['password'] = $mypassword;    
    $_SESSION['start'] = time(); 
    $_SESSION['expire'] = $_SESSION['start'] + (60 * 60) ; 
    header('Location: staff/welstaff.php');             //redirect user to index
}
elseif (mysql_num_rows($result) > 0 and $row['POSITION']=="nurse")          
{
    $_SESSION['eid'] = $myeid;      
    $_SESSION['password'] = $mypassword;    
    $_SESSION['start'] = time();
    $_SESSION['expire'] = $_SESSION['start'] + (60 * 60) ; 
    header('Location: nurse/welnurse.php');             //redirect user to index
}
elseif (mysql_num_rows($result) > 0 and $row['POSITION']=="train")          
{
    $_SESSION['eid'] = $myeid;      
    $_SESSION['password'] = $mypassword;    
    $_SESSION['start'] = time(); 
    $_SESSION['expire'] = $_SESSION['start'] + (60 * 60) ; 
    header('Location: train/weltrain.php');             //redirect user to index
}
elseif (mysql_num_rows($result) > 0 and $row['POSITION']=="hr")             
{
    $_SESSION['eid'] = $myeid;      
    $_SESSION['password'] = $mypassword;    
    $_SESSION['start'] = time(); 
    $_SESSION['expire'] = $_SESSION['start'] + (60 * 60) ; 
    header('Location: hr/welhr.php');           //redirect user to index
}
else
{
    $_SESSION['form_error'] = "Invalid Employee ID or Password";
    header('Location: login.php');          //kick back to login
}

dbDisconnect($conn);
?> 
```

我无法弄清楚上传到服务器时错过的步骤。希望可以有人帮帮我。谢谢。

我的数据库脚本在这里：

```
<?php

function dbConnect()
{
    $host = "mysql16.000webhost.com";       //location of MySQL server
    $username = "a5523583_root";        //username to access MySQL Server
    $password = "cailing8195";      //password to access MySQL Server
    $database = "a5523583_jlr";     //database to access

    //try to get connected
    $conn = mysql_connect ($host, $username, $password);

    //try to wselect the database
    $select = mysql_select_db ($database, $conn);
    return $conn;
}

function dbDisconnect($conn)
{
    mysql_close($conn); //get disconnected from DB
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:06:58.337

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 41 行的 /home/hubertj/public_html/login_now.php 中给出

这意味着查询返回 false，因此您不能使用 mysql_fetch_assoc。

您确定您正确连接到数据库吗？表存在吗？数据库名称是否正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:10:51.793

调试`dbConnect()`，您可能会添加

```
if (!is_resource($conn))
    die("Couldn't connect to MySQL"); 
```

然后`mysql_error()`得到错误。我认为您`mysql_select_db()`在连接时可能会错过

# iphone - 在 App Store 中更改或删除开发者名称

> ID：10074232
> 
> 赞同：36
> 
> 时间：2012-04-09T13:52:29.080
> 
> 标签：iphone, ios, app-store-connect, iphone-developer-program

我为我的客户创建了一个应用程序。我们已经使用我的帐户发布了应用程序。现在，他们想将开发人员名称更改为公司名称。有没有办法更改开发者名称？我可以将我的应用程序移动到他们的企业帐户，以便开发者名称更改为他们的企业名称吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-21T01:07:41.840

是的，您可以从 WWDC 2013 开始将该应用转让给其他人。此外，您可以致电 Apple 支持更改卖家名称。这是一个关于此的视频：[应用程序传输教程。](https://itunesconnect.apple.com/downloads/Documentation/AppTransferTutorial.mov?itcKey=1371330774_a10d04a999ea5c1a30915ba3f42738a8)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T09:17:54.737

我的应用最初以错误的卖家名称出现在 App Store 中。我个人没有信用卡，所以我是一个支付我开发者订阅费的家庭成员。虽然我的正确姓名出现在其他地方，但在**卖方**下方却显示了信用卡上的姓名。我使用 iTunes Connect 中的一个联系选项请求更改名称，并在几天内应用。

在当前的**联系**页面上，**合同和法律**类别包括**请求名称/地址更新**。试试看。

您肯定会发现重命名您的帐户比将应用程序移动到其他帐户更容易。他们是这样说的。

> **我将我的应用程序卖给了另一个开发者，并且无法再在 App Store 上分发它。我可以将应用转移到新开发者的 iTunes Connect 帐户吗？**
> 
> 不可以，您不能将应用转移到 iTunes Connect 上的另一个开发者帐户。要将应用程序添加到另一个帐户，请从当前帐户中删除该应用程序并将其上传到新的 iTunes Connect 帐户。
> 
> 请注意，将应用程序上传到新的 iTunes Connect 帐户将使当前客户无法接收应用程序的自动和免费更新。所有客户评论、评级和排名信息将被重置。您将无法在旧帐户中重复使用应用名称和 SKU。如果您已上传二进制文件或将应用程序与 iAd Network 一起使用，您的 Bundle ID 也将不可重复使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-30T13:11:08.727

这仅适用于 OP 问题的一部分：

> 有没有办法更改开发者名称？

**我发现更改**开发人员名称的最简单方法是在此页面上填写请求：

[联系我们页面](https://developer.apple.com/contact/submit.php)

然后从选项中选择：

> **注册、会员资格和帐户**-> 帐户更新和续订

我只是告诉他们我想使用哪些名字，名字和姓氏。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-15T14:18:19.147

这是关于同一问题的 Apple 支持电子邮件；

> 作为个人，您不能更改您的名字和姓氏，您只能在 App Store 中显示您的法定姓名。我可以建议您注册为公司，这意味着您可以使用您的公司名称而不是您自己的名字，但首先您需要检查您是否符合我们的初始迁移要求：
> 
> 1.  您是您公司的创始人或联合创始人。
> 2.  您的公司尚未拥有有效或过期的公司会员资格。
> 3.  贵公司不作为独资企业、DBA、虚构名称、商号或分支机构运营。
> 4.  如果您有付费应用程序，则您已同意 iTunes Connect 中协议、税务和银行业务中最新的付费应用程序合同。
> 5.  您有资格获得贵公司的 DUNS 编号：[https](https://developer.apple.com/support/D-U-N-S) ://developer.apple.com/support/DUNS 。
> 
> 如果是这种情况并且您符合我们的要求，请随时再次与我们联系，以便我们将您的帐户迁移到公司。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-15T21:12:48.523

如果您需要将您的应用转移到另一个开发者帐户，现在可以。自 WWDC 2013 以来，iTunes Connect 现在支持将应用程序从一个开发人员转移到另一个开发人员，这正是牢记这种情况。前往 iTunes Connect 主页了解更多信息。苹果还提供了关于这个问题的[视频教程。](https://itunesconnect.apple.com/downloads/Documentation/AppTransferTutorial.mov?itcKey=1371330774_a10d04a999ea5c1a30915ba3f42738a8)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-11T16:31:22.820

就个人而言，我想将我的真实名字和姓氏更改为公司/品牌名称，并拥有一个个人帐户。这就是截至 2020 年，Apple 的支持表示：

**“作为个人注册的开发者将使用他们的个人法定名称在 App Store 上销售应用程序。有两种方法可以将您的姓名更改为公司名称：**

*   **让您的公司[注册其自己的 Apple Developer Program 会员资格](https://developer.apple.com/programs/enroll/)，然后[将您的应用程序转移](https://help.apple.com/app-store-connect/?lang=en#/deved688524f)到该会员资格。**
*   **将您的会员资格从个人[迁移到组织。](https://developer.apple.com/contact/submit/?entityType=individual&requestType=migrateAccount)**"

# php - 编辑页面结构

> ID：10074234
> 
> 赞同：1
> 
> 时间：2012-04-09T13:52:31.750
> 
> 标签：php, mysql

我有一个**place**的编辑表单。地点只能由创建“所有者”条目的代理编辑。

链接到编辑页面：*/edit.php?owner=1&place=2*

**一、数据库：**

**地方所有者信息（数据库所有者）：**

```
ownerID(PK)       oAddress       oPhone       agentID
------------------------------------------------------ 
   1              street 15       0523541        500 
```

**地点信息（分贝地点）：**

```
placeID(PK)       pAddress       pPhone       ownerID
------------------------------------------------------ 
   1              street 24       0523541        500 
```

**图像信息（数据库图像）：**

```
imageID(PK)       URL             placeID
--------------------------------------------------- 
   1           image.jpg            5 
```

**国家数据库（选择字段的国家数据库）**

**二、结构（不是实际的 PHP 代码）：**

```
data from login session ->  $agentID

owner ID from url -> $ownerID

place ID from url -> $placeID

SELECT agentID, oAddress, oPhone FROM owner WHERE ownerID='$ownerID' ($oAgentID)

check if $oAgentID==$agentID (if agent is allowed to edit, if not exit code).

check if submit button is set (if yes -> include UPDATE code )

SELECT * FROM place WHERE placeID='$placeID'

SELECT * FROM countries

SELECT url FROM images WHERE placeID='$placeID'

<html>

<img>current place images preview</img>

<form>

text inputs, values filled with current database data
form submit

</form>
</html> 
```

我的问题：

这个结构好不好？我认为数据库中的选择太多。我也许可以在 UPDATE 过程之前将 place 表与 owner 表连接起来，但是这些值不会是最新的。

有什么建议么？

# php - 如何确定PHPExcel中打印区域的最后一行？

> ID：10074238
> 
> 赞同：4
> 
> 时间：2012-04-09T13:52:51.063
> 
> 标签：php, phpexcel, page-break

我有一张大桌子，它并不总是适合打印页面。如果表格不适合一个打印页面，脚本必须将“继续下一页”写入当前页面的最后一行。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T08:28:17.173

我的猜测是您正在构建一个由 javascript 更新的页面。我可以在这里提供2个答案：

*   从可用性的角度来看，您应该在表格之前和之后添加“下一页”。届时，正在搜索特定页面的用户不必向下滚动所有页面即可转到下一页
*   从技术角度来看，没有理由将下一页放在表格中。如果您以后需要访问它，只需将其放入 a 并命名即可。

如果我的猜测不正确，您能否详细说明您的问题（包括相关的代码片段）？

# sql-server-2005 - 在 SQL Server 2005 中组合来自两个查询的数据

> ID：10074240
> 
> 赞同：1
> 
> 时间：2012-04-09T13:52:53.117
> 
> 标签：sql-server-2005

我有以下查询，它返回问题列表和每个问题的可能答案：

```
SELECT
sq.question_id, sq.question_text, qo.question_option_id, qo.option_text

FROM
 dbo.survey_question sq
LEFT OUTER JOIN dbo.question_option qo on sq.question_id = qo.question_id

ORDER BY
sq.question_id 
```

我还有以下查询，它返回选择了特定答案的次数：

```
SELECT ra.question_id, ra.question_option_id, count(*) AS Total
FROM
dbo.form_response_answers ra
GROUP BY ra.question_option_id, ra.question_id 
```

我需要组合这两个查询，以便返回的结果列出所有问题/可能的答案（如第一个查询）以及选择该答案的次数。

我尝试从第二个查询中创建一个 VIEW 并从第一个查询到第二个查询执行几个 OUTER JOINS，但我无法使其工作。有人会指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:58:24.707

试试这个：

```
SELECT  sq.question_id, sq.question_text, qo.question_option_id, qo.option_text, G.Total
FROM    dbo.survey_question sq
LEFT OUTER JOIN dbo.question_option qo 
    ON sq.question_id = qo.question_id
LEFT JOIN
(SELECT ra.question_id, ra.question_option_id, count(*) AS Total
 FROM dbo.form_response_answers ra
 GROUP BY ra.question_option_id, ra.question_id ) G
    ON G.question_id = sq.question_id AND G.question_option_id = qo.question_option_id
ORDER BY
sq.question_id 
```

# php - 试图从数组中删除一个项目，但它不会工作

> ID：10074242
> 
> 赞同：-2
> 
> 时间：2012-04-09T13:53:04.883
> 
> 标签：php, arrays

我真的不明白为什么这不起作用，我被返回到正确的标题但该项目仍在数组中！

这是从数组中删除的代码：

```
<?php
session_start();
if ( !isset($_SESSION['username']) )
{
  header("Location:loginform.php");
  exit();
}

foreach ($_SESSION['list'] as $key => $disk)
{
  if (($_SESSION['list'][$key]['bookisbn']) - ($_GET['bookisbn'])== 0)
  {
    unset($_SESSION['list'][$key]);
    break;
  }
}
header("Location: ".$_GET['location']);
exit();
?> 
```

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:18:39.963

这只是一个猜测，但问题可能在于

```
$_GET['bookisbn'] 
```

被视为字符串。因此，如果将其转换为 int，则 if 语句将返回 true，从数组中删除该项目。

引入这段代码：

```
// Casting the ISBN to an integer here
$bookISBN = (int) $_GET['bookisbn'];

if( ($_SESSION['list'][$key]['bookisbn'] - $bookISBN) == 0 ) {
    // Unset item
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:19:07.550

在标题之前尝试 session_write_close() 。也许是不储蓄。

你也可以这样做：

```
$mydata = $_SESSION['list'] ;

//do something with $mydata

$_SESSION['list'] = $mydata; 
```

这将使代码更容易阅读，如果您有其他类型的错误，这样您就不会再犯同样的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:19:32.697

我会听 Artragis，但也试试这个：

每个变量都有括号，但实际上是减法必须等于零。所以，而不是：

```
if (($_SESSION['list'][$key]['bookisbn']) - ($_GET['bookisbn'])== 0)
{
    unset($_SESSION['list'][$key]);
    break;
} 
```

尝试：

```
if (($_SESSION['list'][$key]['bookisbn'] - $_GET['bookisbn']) == 0)
{
    unset($_SESSION['list'][$key]);
    break;
} 
```

**编辑：**

我还将 Session 和 GET 变量都转换为 INT，就像提到的其他海报之一一样。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T14:35:05.343

## 您需要调试和测试是否可以访问带有 unset 的行。

您需要调试意味着您需要验证每个程序的步骤和每个变量。
您需要测试是否可以访问带有未设置的行，这意味着您必须在未设置时回显某些内容：

```
foreach ($_SESSION['list'] as $key => $disk)
{
  var_dump("---\n",$_SESSION['list'][$key]['bookisbn'],$_GET['bookisbn']);
  var_dump($_SESSION['list'][$key]['bookisbn'] - $_GET['bookisbn']);
  var_dump($_SESSION['list'][$key]['bookisbn'] - $_GET['bookisbn'] == 0);

  if ($_SESSION['list'][$key]['bookisbn'] - $_GET['bookisbn'] == 0)
  {
    unset($_SESSION['list'][$key]);
    var_dump($_SESSION['list']);
    break;
  }
}
//comment out header to prevent moving out of page
#header("Location: ".$_GET['location']);
exit(); 
```

运行此代码并查看是否有任何值错误或意外。

# c# - 没有 SQL 的 ADO.net 更新？

> ID：10074247
> 
> 赞同：0
> 
> 时间：2012-04-09T13:53:09.987
> 
> 标签：c#, ado.net

这可能是一个愚蠢的问题。但是 ADO.net 是否支持无需编写 SQL 命令即可更新到数据库？

**示例：** 我有一个从数据库读取数据并将行保存在内存中的方法。然后我修改了一些行。那么是否可以让 ADO.net 更新对数据库的最新更改，而无需编写更新 SQL 语句，而是让 ADO.net 解决？

我问这个是因为我可能想在以后更新。我可以只将 SQL 语句存储在一个列表中，但随后我将进行许多更新，而不是只进行一项需要更长时间的大更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:54:30.060

您需要的是某种[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)，而 ADO 不是 ORM。所以不行。您必须编写 SQL。不过，您可以通过编写存储过程来简化事情。然后就可以使用ADO参数了

如果需要，您可以将更改作为对象保存在内存中，直到您需要实际持久化它们。然后你可以有一个映射器来获取对象并为你编写 SQL。但是，您正在重做一些已经在 ORM 中完成的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T13:56:43.857

就像你用来获取数据的 sql 一样，你需要 sql 来放置数据。它还需要更新要更新的列。我不认为它可以是自动的。或者使用实体框架。可能将对象保存为更新（ID）是立即更新或更新的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:02:41.453

ADO.NET 支持 DataAdapter 和 DataSet，它们允许您执行以下操作：

1.  操作数据集中的数据。
2.  通过将 DataSet 作为参数传递给DataAdapter的*Update方法，将更改推送到数据库。*

为了让 DataAdapter 推送更改，需要指定插入、更新和删除命令。您必须在命令配置中指定*一些*sql，但它就像 sql 语句的模板，它将更新您操作的每一行，而不必手动跟踪更改。

配置好命令后，使用 UPDATE 方法并将 DataSet 作为参数，它将根据您的命令保留您的更改。您将不需要跟踪单个 sql 更改。

1.  可以在[此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)找到配置命令的示例。
2.  可以在[此处](http://msdn.microsoft.com/en-us/library/at8a576f.aspx)找到调用更新的示例。

# android - 如何将角半径应用于线性布局

> ID：10074249
> 
> 赞同：136
> 
> 时间：2012-04-09T13:53:36.237
> 
> 标签：android, android-layout

我想制作一个带有圆形边框的布局。如何在 a 中应用特定大小的半径`LinearLayout`？

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-04-09T14:20:17.543

您可以在 drawable 文件夹中创建 XML 文件。例如，调用它，`shape.xml`

在`shape.xml`：

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"   >

    <solid
        android:color="#888888" >
    </solid>

    <stroke
        android:width="2dp"
        android:color="#C4CDE0" >
    </stroke>

    <padding
        android:left="5dp"
        android:top="5dp"
        android:right="5dp"
        android:bottom="5dp"    >
    </padding>

    <corners
        android:radius="11dp"   >
    </corners>

</shape> 
```

该`<corner>`标签适用于您的特定问题。

根据需要进行更改。

在你的`whatever_layout_name.xml`：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_margin="5dp"
    android:background="@drawable/shape"    >
</LinearLayout> 
```

这是我通常在我的应用程序中所做的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-09T13:57:50.650

您将使用[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)作为布局的背景并设置其cornerRadius。 [查看此博客](http://www.vogella.de/blog/2011/07/19/android-shapes/)以获取详细教程

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-03-17T07:40:47.170

布局

```
<LinearLayout 
    android:id="@+id/linearLayout"
    android:layout_width="300dp"
    android:gravity="center"
    android:layout_height="300dp"
    android:layout_centerInParent="true"
    android:background="@drawable/rounded_edge">
 </LinearLayout> 
```

可绘制文件夹rounded_edge.xml

```
<shape 
xmlns:android="http://schemas.android.com/apk/res/android">
    <solid 
        android:color="@android:color/darker_gray">
    </solid>
    <stroke 
         android:width="0dp" 
         android:color="#424242">
    </stroke>
    <corners 
         android:topLeftRadius="100dip"
         android:topRightRadius="100dip"
         android:bottomLeftRadius="100dip"
         android:bottomRightRadius="100dip">
    </corners>
</shape> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-10-04T13:41:51.573

试试这个，以编程方式将具有半径的背景设置为 LinearLayout 或任何视图。

```
 private Drawable getDrawableWithRadius() {

    GradientDrawable gradientDrawable   =   new GradientDrawable();
    gradientDrawable.setCornerRadii(new float[]{20, 20, 20, 20, 20, 20, 20, 20});
    gradientDrawable.setColor(Color.RED);
    return gradientDrawable;
}

LinearLayout layout = new LinearLayout(this);
layout.setBackground(getDrawableWithRadius()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-16T09:33:15.613

尝试使用 Glide 模块来处理图像。你需要像这样实现它：

```
implementation 'com.github.bumptech.glide:glide:4.12.0'
annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0' 
```

Here is my use case in a Fragment. This is where I get the URL of image from the constant. Then I set the corner radius to 16\. And then I set the resulting background in my LinearLayout:

```
 Glide.with(this).load(Constants.FLAT_IMAGE).apply(RequestOptions.bitmapTransform(
        RoundedCorners(16)
    )).into(object :
        CustomTarget<Drawable>() {
        override fun onLoadCleared(placeholder: Drawable?) {
            super.onLoadStarted(placeholder)
        }

        override fun onResourceReady(
            resource: Drawable,
            transition: Transition<in Drawable>?
        ) {
            binding.llPromoDreamFlatImage.background = resource
        }
    }) 
```

This way you can set the background image as a picture or a color with rounded edges for the LinearLayout. Here is my example:

```
 <LinearLayout
        android:id="@+id/llPromoDreamFlatImage"
        android:layout_width="match_parent"
        android:layout_height="420dp"
        android:layout_marginTop="35dp"
        android:layout_gravity="center"
        android:gravity="center"
        > 
```

# wpf - WPF 绑定到 DataGridTemplateColumn 中的组合框

> ID：10074253
> 
> 赞同：1
> 
> 时间：2012-04-09T13:54:03.663
> 
> 标签：wpf, mvvm, datagrid, combobox

我在 WPF MVVM 应用程序中有一个类，我想以弹出形式显示它并管理它的一些成员。

```
public class Route
{
    public string Name { get; set; }
    public List<RouteSegment> MandatorySegments { get; set; }
}

public class RouteSegment
{
   public decimal Id { get; set; }
   public string Name { get; set; }
} 
```

我只添加了一些成员字段，其余的不相关。

我想做的是`MandatorySegments`在数据网格的组合框中显示列表中找到的所有项目，以便我可以轻松添加和删除新成员。

这是我到目前为止的代码：

在我的视图模型中

```
public RouteTest SelectedRoute { get; set; }
public ObservableCollection<RouteSegment> AllRouteSegments { get; private set; }
public RouteSegment SelectedMandatorySegment { get; set; } 
```

在我看来

```
<DataGrid Grid.RowSpan="2"
                AutoGenerateColumns="False" HorizontalAlignment="Left" Margin="5,6,0,5" Name="dgMandatorySegments" VerticalAlignment="Stretch" Width="306"
                  ItemsSource="{Binding SelectedRouteTest.MandatorySegments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" CanUserResizeRows="False" CanUserSortColumns="False" CanUserResizeColumns="False" CanUserReorderColumns="False"
                      CanUserAddRows="{StaticResource False}" SelectionMode="Single" SelectedItem="{Binding SelectedMandatorySegment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="Route Segment">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox ItemsSource="{Binding DataContext.AllRouteSegments, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" 
                                           ItemTemplate="{StaticResource CboxItemTemplate}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

我缺少的是模板网格列中组合框上的`SelectedValue`or 。`SelectedItem`现在，在网格中，我的行数与列表中的元素相同，并且`ItemsSource`组合框的绑定正确，因为我可以从所有`RouteSegment`元素中进行选择。但是对于数据网格中的所有行，初始值始终为空。组合框的应该`SelectedValue`绑定到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T06:34:20.463

**DisplayMemberPath**可能是您想要的。以下 ComboBox 在我的 WPF 应用程序的 DataGrid 中运行良好。（请注意，您需要更新绑定路径以使其在您的应用程序中工作。）

```
<ComboBox ItemsSource="{Binding Path=AllRouteSegments}" DisplayMemberPath="Name" SelectedItem="{Binding Path=SelectedMandatorySegment, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:09:20.393

这取决于您是否希望所有行都使用相同的默认值 - 还是与行无关的初始值。我建议您使用`SelectedItem`以避免`SelectedValue`无法可靠工作的问题。您拥有的当前 VM 仅允许一个选定的强制段 - 鉴于此假设，您只需为所有网格行设置一个默认值。

```
<ComboBox ItemsSource="{Binding DataContext.AllRouteSegments, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" 
          SelectedItem="{Binding DataContext.SelectedMandatorySegment, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"                                               
          ItemTemplate="{StaticResource CboxItemTemplate}"/> 
```

# android - 如何计算android应用程序的功耗？

> ID：10074254
> 
> 赞同：6
> 
> 时间：2012-04-09T13:54:05.287
> 
> 标签：android, performance

是否有任何公式，Api或方法？我想测试不同应用程序的功耗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T14:15:59.853

使用 adb 工具可以查看每个正在运行的应用程序的功耗

```
adb shell dumpsys cpuinfo 
```

样本输出

```
Load: 1.12 / 1.07 / 1.01
CPU usage from 11344ms to 1613ms ago:
  10% 122/system_server: 5.8% user + 4.5% kernel / faults: 989 minor
  0% 233/com.htc.android.wallpaper: 0% user + 0% kernel / faults: 910 minor
  0.8% 271/com.htc.launcher: 0.8% user + 0% kernel / faults: 832 minor
  0% 40/panel_on/0: 0% user + 0% kernel
  0% 8/suspend: 0% user + 0% kernel
  0% 54/synaptics_wq: 0% user + 0% kernel
  0.2% 57/w1_bus_master1: 0% user + 0.2% kernel
  0% 253/com.android.phone: 0% user + 0% kernel / faults: 3 minor
  0% 13/kondemand/0: 0% user + 0% kernel
  0% 56/curcial_wq: 0% user + 0% kernel
  0% 2879/com.htc.bg: 0% user + 0% kernel / faults: 8 minor
  0% 2904/dhd_dpc: 0% user + 0% kernel
  0% 2906/com.google.android.apps.maps:NetworkLocationService: 0% user + 0% kern 
```

使用[batterystats](https://developer.android.com/studio/command-line/dumpsys.html#battery)，您可以查看每个应用程序的电池使用情况和功耗：

```
adb shell dumpsys batterystats 
```

列出所有可用的 dumpsys 工具：

```
adb shell dumpsys -l 
```

*配置 adb 工具：http:* [//developer.android.com/guide/developing/tools/adb.html](http://developer.android.com/guide/developing/tools/adb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T18:25:31.910

为了分析功耗，例如估计 mAh 使用量，请查看：

要实时查看正在发生的事情（唤醒锁、cpu、传感器等）：

*   [API 26+] [Energy Profiler](https://developer.android.com/studio/profile/energy-profiler) * - Android Studio 中包含的现代 UI

[![在此处输入图像描述](../Images/0e3eba8b29a63018a421245703028735.png)](https://i.stack.imgur.com/YSouH.png)

看看随着时间的推移发生了什么，例如这一天：

*   [API 21+] [Battery Historian](https://developer.android.com/studio/profile/battery-historian.html) - 与[Dumpsys Battery](https://developer.android.com/studio/command-line/dumpsys.html#battery)结合使用。有关说明，请参阅他们的[github 项目](https://github.com/google/battery-historian)。悬停电池电量图表（屏幕截图中的黑色）可为您提供手机*未*充电时以 mAh 为单位的放电率。

[![在此处输入图像描述](../Images/9b10256c5f45942ce1728d822fa0d617.png)](https://i.stack.imgur.com/u6bSS.png)

*我还没有发现是否可以在 Profiler 中看到估计的 mAh 消耗，而不是抽象的“低、中、高”单位。如果您这样做，请发表评论。Historian 应该能够根据文档执行此操作。*

# c# - 如何检测 IE9 中启用了哪个插件？

> ID：10074261
> 
> 赞同：2
> 
> 时间：2012-04-09T13:54:37.473
> 
> 标签：c#, .net, internet-explorer, internet-explorer-9

如何使用 C# 检测是否在 IE9 中启用了加载项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:01:20.763

您的问题与此相反-

[如何在 IE9 中检测到用户已禁用加载项？](https://stackoverflow.com/questions/5433581/how-to-detect-that-an-add-on-has-been-disabled-by-the-user-in-ie9)

看一看..

# php - 连接两个或多个数组数组

> ID：10074262
> 
> 赞同：0
> 
> 时间：2012-04-09T13:54:51.140
> 
> 标签：php

假设我有两个数组，如下所示：

```
$arr2 = array(array("first", "second"), array("third", "fourth"));
$arr3 = array(array("fifth", "sixth", "seventh"), array("eighth", "ninth"), array("tenth", "eleventh")); 
```

我想要这样的结果：

```
$arr4 =  array("first", "second", "third", "fourth", "fifth", "sixth", "seventh","eighth", "ninth","tenth", "eleventh" ); 
```

怎么做？在 PHP 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:59:29.387

你想要的是展平和组合阵列。在array_values的PHP手册中的注释中有一个很好的扁平化功能，[http ://www.php.net/manual/en/function.array-values.php#104184](http://www.php.net/manual/en/function.array-values.php#104184)

这是代码：

```
/**
 * Flattens an array, or returns FALSE on fail.
 */
function array_flatten($array) {
  if (!is_array($array)) {
    return FALSE;
  }
  $result = array();
  foreach ($array as $key => $value) {
    if (is_array($value)) {
      $result = array_merge($result, array_flatten($value));
    }
    else {
      $result[$key] = $value;
    }
  }
  return $result;
} 
```

运行这个就行了`array($arr2, $arr3)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:58:43.617

```
function flatten($ar,&$res) {
  if (is_array($ar))
    foreach ($ar as $e) flatten($e,$res);
  else
    $res[]=$ar;
}

$arr2 = array(array("first", "second"), array("third", "fourth"));
$arr3 = array(array("fifth", "sixth", "seventh"), array("eighth", "ninth"), array("tenth", "eleventh"));

$arr4=array();
flatten($arr2,$arr4);
flatten($arr3,$arr4); 
```

# ios - Xcode 4.3.2 在源代码编辑时崩溃。

> ID：10074266
> 
> 赞同：1
> 
> 时间：2012-04-09T13:55:09.843
> 
> 标签：ios, objective-c, crash, xcode4.2, xcode4.3

> **可能的重复：**
> [Xcode 崩溃，SourceCache 中的断言失败](https://stackoverflow.com/questions/8708231/xcode-crashes-with-assertion-failure-in-sourcecache)

我刚刚安装了 XCode 4.3.2。每次我尝试编辑源代码时它都会崩溃。有时当我刚刚打开源文件 (*.m) 时，有时当我将光标放在适当的位置时，有时当我真正开始输入时。无论如何，我不能输入任何代码行。

同时，我可以毫无问题地更改构建设置、执行构建和运行我的应用程序。

XCode 4.2 在同一台机器上运行良好。

```
Process:         Xcode [731]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.3.2 (1177)
Build Info:      IDEApplication-1177000000000000~6
App Item ID:     497799835
App External ID: 7171108
Code Type:       X86-64 (Native)
Parent Process:  launchd [132]

Date/Time:       2012-04-09 09:47:21.737 -0400
OS Version:      Mac OS X 10.7.3 (11D50d)
Report Version:  9

Interval Since Last Report:          677289 sec
Crashes Since Last Report:           63
Per-App Interval Since Last Report:  5129 sec
Per-App Crashes Since Last Report:   9
Anonymous UUID:                      242558D6-04D0-4CA7-875F-AEA455F19216

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4E2002
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-1192/Framework/Classes/Model/SourceControl/IDESourceControlTreeItem.m:775
Details:  (((IDESourceControlWorkingTree *)self.sourceTree).origin) should not be nil.
Object:   <IDESourceControlWorkingTreeItem: 0x404eab060>
Method:   -repositoryURLString
Thread:   <NSThread: 0x40010a220>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x0000000102ef7b9f -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x00000001023ad635 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x0000000102a1c14f -[IDESourceControlWorkingTreeItem repositoryURLString] (in IDEFoundation)
  3  0x00007fff82baf384 _NSGetUsingKeyValueGetter (in Foundation)
  4  0x00007fff82baf339 -[NSObject(NSKeyValueCoding) valueForKey:] (in Foundation)
  5  0x00007fff82bcedc6 -[NSObject(NSKeyValueCoding) valueForKeyPath:] (in Foundation)
  6  0x00007fff8b1c28c9 -[NSArrayController _multipleValueForKeyPath:atIndex:] (in AppKit)
  7  0x00007fff8b1c19bd -[NSArrayController _singleValueForKeyPath:] (in AppKit)
  8  0x00007fff8af28c36 -[_NSControllerObjectProxy valueForKeyPath:] (in AppKit)
  9  0x00007fff82bced89 -[NSObject(NSKeyValueCoding) valueForKeyPath:] (in Foundation)
 10  0x00007fff82bced89 -[NSObject(NSKeyValueCoding) valueForKeyPath:] (in Foundation)
 11  0x00007fff8af28ae2 -[NSBinder _valueForKeyPath:ofObject:mode:raisesForNotApplicableKeys:] (in AppKit)
 12  0x00007fff8af287cc -[NSBinder valueForBinding:resolveMarkersToPlaceholders:] (in AppKit)
 13  0x00007fff8b12c07e -[NSValueBinder _referenceBindingValue] (in AppKit)
 14  0x00007fff8b12be8f -[NSValueBinder _adjustObject:mode:observedController:observedKeyPath:context:editableState:adjustState:] (in AppKit)
 15  0x00007fff8b12bb74 -[NSValueBinder _observeValueForKeyPath:ofObject:context:] (in AppKit)
 16  0x00007fff8b1438cf -[NSTextValueBinder _observeValueForKeyPath:ofObject:context:] (in AppKit)
 17  0x00007fff8af1a777 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] (in AppKit)
 18  0x000000010263d8fa -[NSObject(DVTBindingUtilities) dvt_bind:toObject:withKeyPath:options:] (in DVTKit)
 19  0x0000000102e04762 -[IDEInspectorBasicStringProperty bindAndConfigure] (in IDEKit)
 20  0x0000000102e095c5 -[IDEInspectorPathFieldProperty bindAndConfigure] (in IDEKit)
 21  0x0000000102e0452d -[IDEInspectorProperty viewDidInstall] (in IDEKit)
 22  0x00007fff8374e021 -[NSObject performSelector:] (in CoreFoundation)
 23  0x00007fff83752462 -[NSArray makeObjectsPerformSelector:] (in CoreFoundation)
 24  0x0000000102e044f3 -[IDEInspectorPropertyContainingView propertiesDidInstall] (in IDEKit)
 25  0x0000000102e0449b -[IDEInspectorPropertyContainingView viewDidMoveToWindow] (in IDEKit)
 26  0x00007fff8b01577d -[NSView _setWindow:] (in AppKit)
 27  0x00007fff8af41c08 __NSViewRecursionHelper (in AppKit)
 28  0x00007fff836e4ea4 CFArrayApplyFunction (in CoreFoundation)
 29  0x00007fff8b015766 -[NSView _setWindow:] (in AppKit)
 30  0x00007fff8af41c08 __NSViewRecursionHelper (in AppKit)
 31  0x00007fff836e4ea4 CFArrayApplyFunction (in CoreFoundation)
 32  0x00007fff8b015766 -[NSView _setWindow:] (in AppKit)
 33  0x00007fff8af41c08 __NSViewRecursionHelper (in AppKit)
 34  0x00007fff836e4ea4 CFArrayApplyFunction (in CoreFoundation)
 35  0x00007fff8b015766 -[NSView _setWindow:] (in AppKit)
 36  0x00007fff8af41c08 __NSViewRecursionHelper (in AppKit)
 37  0x00007fff836e4ea4 CFArrayApplyFunction (in CoreFoundation)
 38  0x00007fff8b015766 -[NSView _setWindow:] (in AppKit)
 39  0x00007fff8af41c08 __NSViewRecursionHelper (in AppKit)
 40  0x00007fff836e4ea4 CFArrayApplyFunction (in CoreFoundation)
 41  0x00007fff8b015766 -[NSView _setWindow:] (in AppKit)
 42  0x00007fff8b013999 -[NSView addSubview:] (in AppKit)
 43  0x000000010564d36c -[NSView(IBAppKitViewIntegration) ibSwizzledNSViewDebug_addSubview:] (in IDEInterfaceBuilderCocoaIntegration)
 44  0x000000010266cd1c -[DVTDisclosureView layoutTopDown] (in DVTKit)
 45  0x0000000102633adf +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 46  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 47  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 48  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 49  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 50  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 51  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 52  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 53  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 54  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 55  0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] (in DVTKit)
 56  0x000000010263393c +[DVTLayoutView_ML _recursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:] (in DVTKit)
 57  0x000000010264782b -[DVTLayoutView_ML viewWillDraw] (in DVTKit)
 58  0x00007fff8af406fc -[NSView viewWillDraw] (in AppKit)
 59  0x00007fff8af406fc -[NSView viewWillDraw] (in AppKit)
 60  0x00007fff8af406fc -[NSView viewWillDraw] (in AppKit)
 61  0x00007fff8af406fc -[NSView viewWillDraw] (in AppKit)
 62  0x00007fff8af3f441 -[NSView _sendViewWillDrawInRect:clipRootView:suppressRecursion:] (in AppKit)
 63  0x00007fff8af3e1ac -[NSView displayIfNeeded] (in AppKit)
 64  0x00007fff8af3db69 _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints (in AppKit)
 65  0x00007fff83716bd7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ (in CoreFoundation)
 66  0x00007fff83716b36 __CFRunLoopDoObservers (in CoreFoundation)
 67  0x00007fff836ebce9 __CFRunLoopRun (in CoreFoundation)
 68  0x00007fff836eb676 CFRunLoopRunSpecific (in CoreFoundation)
 69  0x00007fff8791331f RunCurrentEventLoopInMode (in HIToolbox)
 70  0x00007fff8791a51b ReceiveNextEventCommon (in HIToolbox)
 71  0x00007fff8791a456 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 72  0x00007fff8af01f5d _DPSNextEvent (in AppKit)
 73  0x00007fff8af01861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 74  0x00007fff8aefe19d -[NSApplication run] (in AppKit)
 75  0x00007fff8b17cb88 NSApplicationMain (in AppKit)
 76  0x0000000102326eec (in Xcode)

objc[731]: garbage collection is ON
abort() called

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff81a43ce2 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff8ae6b7d2 pthread_kill + 95
2   libsystem_c.dylib               0x00007fff8ae5ca7a abort + 143
3   com.apple.dt.IDEKit             0x0000000102ef760e +[IDEAssertionHandler _handleAssertionWithLogString:] + 506
4   com.apple.dt.DVTFoundation      0x00000001023ad635 _DVTAssertionFailureHandler + 128
5   com.apple.dt.IDEFoundation      0x0000000102a1c14f -[IDESourceControlWorkingTreeItem repositoryURLString] + 1512
6   com.apple.Foundation            0x00007fff82baf384 _NSGetUsingKeyValueGetter + 62
7   com.apple.Foundation            0x00007fff82baf339 -[NSObject(NSKeyValueCoding) valueForKey:] + 392
8   com.apple.Foundation            0x00007fff82bcedc6 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 348
9   com.apple.AppKit                0x00007fff8b1c28c9 -[NSArrayController _multipleValueForKeyPath:atIndex:] + 84
10  com.apple.AppKit                0x00007fff8b1c19bd -[NSArrayController _singleValueForKeyPath:] + 151
11  com.apple.AppKit                0x00007fff8af28c36 -[_NSControllerObjectProxy valueForKeyPath:] + 77
12  com.apple.Foundation            0x00007fff82bced89 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 287
13  com.apple.Foundation            0x00007fff82bced89 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 287
14  com.apple.AppKit                0x00007fff8af28ae2 -[NSBinder _valueForKeyPath:ofObject:mode:raisesForNotApplicableKeys:] + 654
15  com.apple.AppKit                0x00007fff8af287cc -[NSBinder valueForBinding:resolveMarkersToPlaceholders:] + 171
16  com.apple.AppKit                0x00007fff8b12c07e -[NSValueBinder _referenceBindingValue] + 31
17  com.apple.AppKit                0x00007fff8b12be8f -[NSValueBinder _adjustObject:mode:observedController:observedKeyPath:context:editableState:adjustState:] + 647
18  com.apple.AppKit                0x00007fff8b12bb74 -[NSValueBinder _observeValueForKeyPath:ofObject:context:] + 303
19  com.apple.AppKit                0x00007fff8b1438cf -[NSTextValueBinder _observeValueForKeyPath:ofObject:context:] + 43
20  com.apple.AppKit                0x00007fff8af1a777 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 591
21  com.apple.dt.DVTKit             0x000000010263d8fa -[NSObject(DVTBindingUtilities) dvt_bind:toObject:withKeyPath:options:] + 44
22  com.apple.dt.IDEKit             0x0000000102e04762 -[IDEInspectorBasicStringProperty bindAndConfigure] + 527
23  com.apple.dt.IDEKit             0x0000000102e095c5 -[IDEInspectorPathFieldProperty bindAndConfigure] + 51
24  com.apple.dt.IDEKit             0x0000000102e0452d -[IDEInspectorProperty viewDidInstall] + 25
25  com.apple.CoreFoundation        0x00007fff8374e021 -[NSObject performSelector:] + 49
26  com.apple.CoreFoundation        0x00007fff83752462 -[NSArray makeObjectsPerformSelector:] + 786
27  com.apple.dt.IDEKit             0x0000000102e044f3 -[IDEInspectorPropertyContainingView propertiesDidInstall] + 50
28  com.apple.dt.IDEKit             0x0000000102e0449b -[IDEInspectorPropertyContainingView viewDidMoveToWindow] + 62
29  com.apple.AppKit                0x00007fff8b01577d -[NSView _setWindow:] + 2618
30  com.apple.AppKit                0x00007fff8af41c08 __NSViewRecursionHelper + 25
31  com.apple.CoreFoundation        0x00007fff836e4ea4 CFArrayApplyFunction + 68
32  com.apple.AppKit                0x00007fff8b015766 -[NSView _setWindow:] + 2595
33  com.apple.AppKit                0x00007fff8af41c08 __NSViewRecursionHelper + 25
34  com.apple.CoreFoundation        0x00007fff836e4ea4 CFArrayApplyFunction + 68
35  com.apple.AppKit                0x00007fff8b015766 -[NSView _setWindow:] + 2595
36  com.apple.AppKit                0x00007fff8af41c08 __NSViewRecursionHelper + 25
37  com.apple.CoreFoundation        0x00007fff836e4ea4 CFArrayApplyFunction + 68
38  com.apple.AppKit                0x00007fff8b015766 -[NSView _setWindow:] + 2595
39  com.apple.AppKit                0x00007fff8af41c08 __NSViewRecursionHelper + 25
40  com.apple.CoreFoundation        0x00007fff836e4ea4 CFArrayApplyFunction + 68
41  com.apple.AppKit                0x00007fff8b015766 -[NSView _setWindow:] + 2595
42  com.apple.AppKit                0x00007fff8af41c08 __NSViewRecursionHelper + 25
43  com.apple.CoreFoundation        0x00007fff836e4ea4 CFArrayApplyFunction + 68
44  com.apple.AppKit                0x00007fff8b015766 -[NSView _setWindow:] + 2595
45  com.apple.AppKit                0x00007fff8b013999 -[NSView addSubview:] + 405
46  com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000010564d36c -[NSView(IBAppKitViewIntegration) ibSwizzledNSViewDebug_addSubview:] + 49
47  com.apple.dt.DVTKit             0x000000010266cd1c -[DVTDisclosureView layoutTopDown] + 131
48  com.apple.dt.DVTKit             0x0000000102633adf +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 206
49  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
50  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
51  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
52  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
53  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
54  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
55  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
56  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
57  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
58  com.apple.dt.DVTKit             0x0000000102633bb3 +[DVTLayoutView_ML _doRecursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:completionCallBackHandlers:] + 418
59  com.apple.dt.DVTKit             0x000000010263393c +[DVTLayoutView_ML _recursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:] + 108
60  com.apple.dt.DVTKit             0x000000010264782b -[DVTLayoutView_ML viewWillDraw] + 161
61  com.apple.AppKit                0x00007fff8af406fc -[NSView viewWillDraw] + 666
62  com.apple.AppKit                0x00007fff8af406fc -[NSView viewWillDraw] + 666
63  com.apple.AppKit                0x00007fff8af406fc -[NSView viewWillDraw] + 666
64  com.apple.AppKit                0x00007fff8af406fc -[NSView viewWillDraw] + 666
65  com.apple.AppKit                0x00007fff8af3f441 -[NSView _sendViewWillDrawInRect:clipRootView:suppressRecursion:] + 1358
66  com.apple.AppKit                0x00007fff8af3e1ac -[NSView displayIfNeeded] + 1039
67  com.apple.AppKit                0x00007fff8af3db69 _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints + 648
68  com.apple.CoreFoundation        0x00007fff83716bd7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
69  com.apple.CoreFoundation        0x00007fff83716b36 __CFRunLoopDoObservers + 374
70  com.apple.CoreFoundation        0x00007fff836ebce9 __CFRunLoopRun + 825
71  com.apple.CoreFoundation        0x00007fff836eb676 CFRunLoopRunSpecific + 230
72  com.apple.HIToolbox             0x00007fff8791331f RunCurrentEventLoopInMode + 277
73  com.apple.HIToolbox             0x00007fff8791a51b ReceiveNextEventCommon + 181
74  com.apple.HIToolbox             0x00007fff8791a456 BlockUntilNextEventMatchingListInMode + 62
75  com.apple.AppKit                0x00007fff8af01f5d _DPSNextEvent + 659
76  com.apple.AppKit                0x00007fff8af01861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
77  com.apple.AppKit                0x00007fff8aefe19d -[NSApplication run] + 470
78  com.apple.AppKit                0x00007fff8b17cb88 NSApplicationMain + 867
79  com.apple.dt.Xcode              0x0000000102326eec 0x102326000 + 3820

Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff81a447e6 kevent + 10
1   libdispatch.dylib               0x00007fff836005be _dispatch_mgr_invoke + 923
2   libdispatch.dylib               0x00007fff835ff14e _dispatch_mgr_thread + 54

Thread 2:: com.apple.NSURLConnectionLoader
0   libsystem_kernel.dylib          0x00007fff81a4267a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff81a41d71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff836e36fc __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff836ebe64 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff836eb676 CFRunLoopRunSpecific + 230
5   com.apple.Foundation            0x00007fff82beeffb +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 335
6   com.apple.Foundation            0x00007fff82be374e -[NSThread main] + 68
7   com.apple.Foundation            0x00007fff82be36c6 __NSThread__main__ + 1575
8   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
9   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 3:
0   libsystem_kernel.dylib          0x00007fff81a4267a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff81a41d71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff836e36fc __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff836ebe64 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff836eb676 CFRunLoopRunSpecific + 230
5   com.apple.DTDeviceKit           0x0000000108be8ee8 -[DTDKRemoteDeviceDataListener listenerThreadImplementation] + 298
6   com.apple.Foundation            0x00007fff82be374e -[NSThread main] + 68
7   com.apple.Foundation            0x00007fff82be36c6 __NSThread__main__ + 1575
8   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
9   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 4:: com.apple.CFSocket.private
0   libsystem_kernel.dylib          0x00007fff81a43df2 __select + 10
1   com.apple.CoreFoundation        0x00007fff83734cdb __CFSocketManager + 1355
2   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
3   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 5:: DYMobileDeviceManager
0   libsystem_kernel.dylib          0x00007fff81a4267a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff81a41d71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff836e36fc __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff836ebe64 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff836eb676 CFRunLoopRunSpecific + 230
5   com.apple.Foundation            0x00007fff82b94f9f -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 267
6   com.apple.Foundation            0x00007fff82b94e8b -[NSRunLoop(NSRunLoop) run] + 62
7   com.apple.Foundation            0x00007fff82be374e -[NSThread main] + 68
8   com.apple.Foundation            0x00007fff82be36c6 __NSThread__main__ + 1575
9   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
10  libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 6:: CVDisplayLink
0   libsystem_kernel.dylib          0x00007fff81a43bca __psynch_cvwait + 10
1   libsystem_c.dylib               0x00007fff8ae6d274 _pthread_cond_wait + 840
2   com.apple.CoreVideo             0x00007fff8a7a7b3c CVDisplayLink::runIOThread() + 710
3   com.apple.CoreVideo             0x00007fff8a7a785d _ZL13startIOThreadPv + 148
4   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
5   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 7:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 8:
0   libsystem_kernel.dylib          0x00007fff81a43bca __psynch_cvwait + 10
1   libsystem_c.dylib               0x00007fff8ae6d274 _pthread_cond_wait + 840
2   com.apple.Xcode.DevToolsCore    0x0000000105e23b48 -[XCInvocationQueue _processInvocationsInThreadSlotNumber:] + 348
3   com.apple.Foundation            0x00007fff82be374e -[NSThread main] + 68
4   com.apple.Foundation            0x00007fff82be36c6 __NSThread__main__ + 1575
5   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
6   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 9:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 10:
0   libsystem_kernel.dylib          0x00007fff81a43bca __psynch_cvwait + 10
1   libsystem_c.dylib               0x00007fff8ae6d274 _pthread_cond_wait + 840
2   com.apple.Foundation            0x00007fff82be54e4 -[NSCondition wait] + 261
3   com.apple.dt.IDE.IDEiPhoneSupport   0x0000000108a9d45f 0x108a69000 + 214111
4   com.apple.Foundation            0x00007fff82be374e -[NSThread main] + 68
5   com.apple.Foundation            0x00007fff82be36c6 __NSThread__main__ + 1575
6   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
7   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 11:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 12:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 13:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 14:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 15:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 16:
0   libsystem_kernel.dylib          0x00007fff81a44192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8ae6b594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff8ae6cb85 start_wqthread + 13

Thread 17:
0   libsystem_kernel.dylib          0x00007fff81a4267a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff81a41d71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff836e36fc __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff836ebe64 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff836eb676 CFRunLoopRunSpecific + 230
5   com.apple.DebugSymbols          0x00007fff835c92f2 _ZL20SpotlightQueryThreadPv + 434
6   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
7   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 18:
0   libsystem_kernel.dylib          0x00007fff81a43e42 __semwait_signal + 10
1   libsystem_c.dylib               0x00007fff8ae1fdea nanosleep + 164
2   com.apple.CoreSymbolication     0x00007fff885523bb cleaner_thread_main(void*) + 42
3   libsystem_c.dylib               0x00007fff8ae698bf _pthread_start + 335
4   libsystem_c.dylib               0x00007fff8ae6cb75 thread_start + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x0000000000000006  rcx: 0x00007fff61f219d8  rdx: 0x0000000000000000
  rdi: 0x0000000000000507  rsi: 0x0000000000000006  rbp: 0x00007fff61f21a00  rsp: 0x00007fff61f219d8
   r8: 0x00007fff71feefb8   r9: 0x0000000000000063  r10: 0x00007fff81a43d0a  r11: 0xffffff80002d8220
  r12: 0x00007fff82dba281  r13: 0x0000000000000000  r14: 0x00007fff71ff1960  r15: 0x00007fff61f21b08
  rip: 0x00007fff81a43ce2  rfl: 0x0000000000000246  cr2: 0x0000000103a9f140
Logical CPU: 0 
```

# hungarian-algorithm - 如何找到覆盖二维数组中所有零所需的最少行数？

> ID：10074270
> 
> 赞同：3
> 
> 时间：2012-04-09T13:55:51.900
> 
> 标签：hungarian-algorithm

我正在尝试对匈牙利算法进行体面的实现，但是我被困在如何找到覆盖数组中所有零的最小行数

我还需要知道这些行以便稍后进行一些计算

这是解释：

[http://www.ams.jhu.edu/~castello/362/Handouts/hungarian.pdf](http://www.ams.jhu.edu/~castello/362/Handouts/hungarian.pdf)

在第 3 步中它说

> 使用尽可能少的行来覆盖矩阵中的所有零。没有简单的规则可以做到这一点 - 基本上是反复试验。

试错在计算方面意味着什么？例如，如果我有一个 5 行 5 列的二维数组，那么

第一行可以覆盖所有的零，第一和第二，第一行和第一列等等太多的组合

没有比这更有效的吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:30:03.183

您需要在这里实现二分匹配算法。您在图中有两个分区 - 其中一个中的顶点代表行，另一个中的顶点代表表中的列。如果单元格 (i,j) 中有 1，则在第[i]行和第[j]列之间有一条边。然后你创建最大的二分匹配。在二分匹配算法的最后一次迭代之后，您需要确定哪些顶点通过增量路径与匹配源连接。增量路径是仅使用具有正容量的边的路径。你应该有这样的图片：

```
 row_1                  col_1
        /                             \
       / - row_2                col_2 -\
source  - ....     some_edges           \ sink
       \                                / 
        \ - row_n                col_n /
                                 .... /
                                 col_m 
```

找到最大二分匹配后，找出哪些行和列可以通过来自 sink 的正容量边到达。现在，您需要使用以下算法找到所需的最小行数和列数 - 您删除了所有无法从源访问的行和所有可访问的列，这是您的最佳解决方案。

希望这个答案对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:54:57.297

我不太清楚他们为什么告诉你要反复试验。然而，匈牙利算法不需要指数时间。看看 wikipedia，它会引导您了解如何计算最小行数的示例（查看第 3 步）：

[http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation](http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation)

这篇文章还包括实现的链接，以及一些在线课程笔记，这些笔记提供了比您正在使用的匈牙利算法更完整（虽然也更具技术性）的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:19:41.610

反复试验意味着 O((n+m)!) 复杂度。

最多您只需要选择 min(n,m) 行，因为选择所有行或列将覆盖所有 0。

我会实现一个动态规划算法来解决大问题的这一步。

# mysql - Mysql子查询优化

> ID：10074277
> 
> 赞同：1
> 
> 时间：2012-04-09T13:56:15.320
> 
> 标签：mysql

我有一个包含 450,000 条记录的用户表。表结构如下：

```
 UserID Int(11) Primary Key
  Firstname (50) Varchar
  Lastname  (50) Varchar 
```

我还需要检查另外两个表以查看 UserID 是否在这些表中。（结构有点不同，但表有相同的 UserID） 我在下面运行这个子查询，运行速度很慢。欣赏第二双眼睛，提供全新的视角，帮助跑得更快……

```
SELECT 
`Users`.`Firstname`, 
`Users`.`Lastname`, 
`Users`.`UserID` 
FROM `Users`
WHERE `Users`.`UserID` IN  (SELECT `admin`.`UserID` FROM `admin` WHERE `admin`.`UserID`=`User`.`UserID`)
AND `Users`.`UserID` IN  (SELECT `elite`.`UserID` FROM `elite` WHERE `elite`.`UserID`=`Users`.`UserID`)
AND `Users`.`Lastname` LIKE '%smith%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:00:13.000

在 MySQL 中优化查询时绝对**最重要的事情**是确保您拥有适当的**索引**。检查您有哪些索引（使用 SHOW INDEX），以及查询正在使用哪些索引（使用 EXPLAIN SELECT）。一旦表变大，索引对于良好的性能绝对至关重要。

特别是，您应该确保`UserID`在所有三个表中的列上都有索引。如果适合您的情况，我还建议添加外键约束。

但是，如果您已经检查过您有正确的索引并且您仍然没有获得适当的性能，您可以尝试使用连接而不是子选择：

```
SELECT 
    Users.Firstname, 
    Users.Lastname, 
    Users.UserID 
FROM Users
JOIN admin USING (UserID)
JOIN elite USING (UserID)
WHERE Users.Lastname LIKE '%smith%' 
```

请注意，`LIKE '%smith%'`无法有效地使用索引。如果可能，您应该**避免**使用通配符开头的 LIKE 表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:01:11.883

我想您应该使用内部联接而不是子查询...因为现在您正在从 admin 表、elite 表中获取用户 id 并检查是否必须在用户表中...所以继续加入并查看区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:00:17.483

从连接开始；

```
SELECT 
`Users`.`Firstname`, 
`Users`.`Lastname`, 
`Users`.`UserID` 
FROM `Users`
INNER JOIN `admin` ON (`Users`.`UserID` = `admin`.`Users`)
INNER JOIN `elite` ON (`Users`.`UserID` = `elite`.`UserID`)
WHERE `Users`.`Lastname` LIKE '%smith%' 
```

然后检查你的指数。

你也应该远离你的姓氏搜索会很慢，因为它没有锚定在`Lastname`字符串的开头或结尾。

# ios - iOS SDK Mapview Annotation标注重绘错误

> ID：10074279
> 
> 赞同：1
> 
> 时间：2012-04-09T13:56:19.137
> 
> 标签：ios, mkmapview, mkannotation

我正在尝试添加从用户位置到地图视图中选定注释的副标题的距离。它的机制是有效的，但实际标注在第一次显示时就搞砸了。似乎有重绘问题。

![mapView注解重绘问题](../Images/539bf7a2f7a991e6ef7799c67a1a0c4e.png)

随后点击引脚显示正确的布局。

以下是相关代码：

// 选择注解时调用

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{

MKPointAnnotation *selectedAnnotation = view.annotation;

//attempt to add distance on annotation
CLLocation *pointALocation = [[CLLocation alloc] 
                              initWithLatitude:selectedAnnotation.coordinate.latitude 
                              longitude:selectedAnnotation.coordinate.longitude];
float distanceMeters = [pointALocation distanceFromLocation:locationManager.location];

//for sending info to detail
myPinTitle = selectedAnnotation.title;

[selectedAnnotation setSubtitle:[NSString stringWithFormat:@"%.2f miles away", (distanceMeters / 1609.344)]]; 
```

我试过调用 [view setNeedsDisplay]，但无济于事。

在此先感谢您的帮助。

* * *

# 有效的解决方案

这是我最终想出的解决方案。它似乎工作。

我从上面的 didSelectAnnotationView 方法中编辑了重复的代码，并想出了：

```
//called when user location changes

- (void)updatePinsDistance
{
for (int x=0; x< [[mapView annotations]count]; x++) {
    MKPointAnnotation *thisPin =[[mapView annotations] objectAtIndex:x];

    //attempt to add distance on annotation
    CLLocation *pointALocation = [[CLLocation alloc] 
                                 initWithLatitude:thisPin.coordinate.latitude 
                                 longitude:thisPin.coordinate.longitude];
    float distanceMeters = [pointALocation distanceFromLocation:locationManager.location];
    NSString *distanceMiles = [NSString stringWithFormat:@"%.2f miles from you",
                                                    (distanceMeters / 1609.344)];

    [thisPin setSubtitle:distanceMiles];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:03:54.660

您应该将字幕设置在 didSelectAnnotationView 之外的其他位置。实际上，所有的 annotationView 都应该在 mapView:viewForAnnotation: 方法返回之前设置它们的标题和副标题。

您设置长字幕的事实肯定说明标注的大小不合适。必须在调用 didSelectAnnotationView 之前计算大小。

# objective-c - 读取文件修改日期

> ID：10074293
> 
> 赞同：0
> 
> 时间：2012-04-09T13:57:19.050
> 
> 标签：objective-c

如何访问文件修改日期

```
 NSString *docsDir = [NSHomeDirectory() stringByAppendingPathComponent:
                         @"TempiPad"];
    NSFileManager *localFileManager=[[NSFileManager alloc] init];
    NSDirectoryEnumerator *dirEnum =
    [localFileManager enumeratorAtPath:docsDir];
    NSString *file;

    // List all files in docsDir
    while (file = [dirEnum nextObject]) {
        NSLog(@"File = %@",file);
        NSError *attributesError = nil;
        NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:file error:&attributesError];

        NSString *fileModificationDate = [fileAttributes objectForKey:NSFileModificationDate];
        NSLog(@"ModDate = %@",fileModificationDate);

        } 
    } 
```

这只是输出（空）。最终我会想要比较两个文件的 fileModificationDate，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:14:30.007

IIRC，您需要将文件名附加到目录路径；就像是：

```
while (file = [dirEnum nextObject]) {
    NSLog(@"File = %@",file);
    NSError *attributesError = nil;
    file = [docsDir stringByAppendingPathComponent:file];
    NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:file error:&attributesError];

    NSDate *fileModificationDate = [fileAttributes objectForKey:NSFileModificationDate];
    NSLog(@"ModDate = %@",fileModificationDate);

    } 
} 
```

而且，正如更紧张的说法，`NSFileModificationDate`是一个`NSDate`，而不是一个`NSString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:10:09.303

`NSFileModificationDate`返回一个`NSDate`实例，而不是一个`NSString`. 看：

[NSFileModificationDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/fileModificationDate)

# ios - userPlaylists 返回空

> ID：10074294
> 
> 赞同：0
> 
> 时间：2012-04-09T13:57:22.390
> 
> 标签：ios, spotify

我正在开发一个 Spotify IOS 应用程序，我一直在尝试让用户的播放列表使用 `[[SPSession sharedSession]userPlaylists]`

大多数时候，它不返回任何播放列表，偶尔，它确实返回所有播放列表。从那以后我正确登录 `[[SPSession sharedSession] starredPlaylist]` 并 `[[SPSession sharedSession] inboxPlaylist]` 始终返回播放列表
有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:44:04.657

CocoaLibSpotify 中的所有内容都是异步的——您需要等到`loaded`属性`userPlaylists`返回`YES`之前，该`playlists`属性才会包含任何有用的内容，并且其中包含的每个播放列表都有一个`loaded`属性，该属性设置为`YES`播放列表的名称和曲目列表已加载时。

播放列表堆栈（以及 CocoaLibSpotify 中的其他地方）中的所有属性都符合 Key-Value Observing。最好的方法是观察您感兴趣的属性，然后在设置它们时做出反应。

# asp.net-mvc-3 - 最佳实践：应用程序池身份帐户

> ID：10074295
> 
> 赞同：1
> 
> 时间：2012-04-09T13:57:30.487
> 
> 标签：asp.net-mvc-3, iis-7.5

配置应用程序池身份帐户的最佳做法是什么？在托管服务器上使用“网络服务”帐户是否可以接受？当我将该身份帐户添加到 SQL Server DB 时，我应该为其分配什么权限？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:02:31.567

我遵循的最佳实践是授予帐户完成其工作所需的最低权限。这就是[最小特权原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)。

# windows - 文件句柄无法访问

> ID：10074297
> 
> 赞同：0
> 
> 时间：2012-04-09T13:57:42.513
> 
> 标签：windows, file-io, fopen

在 Windows xp/win7 上，我的应用程序经常进入文件句柄无法访问的状态（在大量使用之后），这意味着即使请求的文件确实存在且可读，所有 fopen() 调用也会开始失败。一旦进入此状态，除非我重新启动，否则它将无法恢复。

一些观察： 1\. GetLastError 返回 0。所以那里没有帮助。2\. App总句柄数一般在1500-1700左右，在意料之中。显然，系统上还有其他应用程序具有更多句柄，所以我认为我没有达到某些操作系统限制。

关于我还可以在这里调查什么的任何建议？谢谢。

# java - 如何检查两个字符串是否大致相等？

> ID：10074298
> 
> 赞同：17
> 
> 时间：2012-04-09T13:57:43.753
> 
> 标签：java, string

我正在为游戏制作聊天响应者，我想知道是否有一种方法可以比较两个字符串并查看它们是否近似相等，例如：

如果有人输入：“强度水平？” 它会做一个功能..那么如果其他人输入：“Str level？” 它会做同样的功能，但我想要它，这样如果有人打错字或类似的东西，它会自动检测他们试图输入的内容，例如：“强度水平？” 也会使函数被调用。

我在这里问的是简单的事情还是需要我做一个巨大的刺激性功能来检查字符串？

如果您对我的解释感到困惑（这不是我的强项之一），那么这基本上就是我要问的。

如何检查两个字符串是否彼此相似？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T14:02:59.073

请参阅此问题和答案：[获取最接近的字符串匹配](https://stackoverflow.com/questions/5859561/getting-the-closest-string-match/5859823#5859823)

使用一些启发式方法和[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法，您可以计算两个字符串的相似性并猜测它们是否相等。

![在此处输入图像描述](../Images/7e2e91ad957e8f64522f848ffcec4d8a.png)

除此之外，您唯一的选择是一本与您正在寻找的相似的已接受单词的字典。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T14:02:43.753

您可以使用[Levenshtein distance](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T14:10:06.597

我相信您应该使用一种[编辑距离算法](http://en.wikipedia.org/wiki/Edit_distance)来解决您的问题。这是例如Java 中的[Levenstein 距离](http://www.merriampark.com/ldjava.htm)算法实现。您可以使用它来比较句子中的单词，如果它们的编辑距离之和小于例如句子长度的 10%，则认为它们相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T14:02:49.687

或许您需要的是一个包含相似词和常见拼写错误的大型字典，您可以使用它来将每个词“翻译”为一个条目或键。

这对于自定义单词很有用，因此您可以在与“strength”相同的键中添加“str”。

但是，您也可以使用一些自动化方法，即当您的单词在字典中未找到时，递归循环 1 个字母差异（丢失或替换）并且可以递归到更深层次，即 2 个丢失字母等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T14:03:02.470

找了几个做文字到音素翻译的项目，不知道哪个最好

*   [http://mary.dfki.de/](http://mary.dfki.de/)
*   [http://www2.eng.cam.ac.uk/~tpl/asp/source/Phoneme.java](http://www2.eng.cam.ac.uk/~tpl/asp/source/Phoneme.java)
*   [http://java.dzone.com/announcements/announcing-phonemic-10](http://java.dzone.com/announcements/announcing-phonemic-10)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T14:14:31.163

如果你想找到相似的词首，你可以使用词干分析器。词干将单词简化为一个共同的开头。最著名的算法是 Port Stemmer ( [http://tartarus.org/~martin/PorterStemmer](http://tartarus.org/~martin/PorterStemmer/) )。

如上所述，Levenshtein 非常棒，但是对于大于一或二的距离，计算量很大。

# c# - wcf 服务应用程序部署问题

> ID：10074305
> 
> 赞同：0
> 
> 时间：2012-04-09T13:58:25.627
> 
> 标签：c#, wcf, web-services

我是 wcf 的新手。我开发了一个 wcf 服务应用程序（不是库）。有人可以告诉我如何部署它而不是 iis。以及如何将服务作为 Web 服务访问。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:00:48.583

Visual Studio 中有一个自动 WCF 部署工具或将代码复制到服务器。

服务器将像通过[http://localhost:2342342432342/YourWebService.Svc](http://localhost:2342342432342/YourWebService.Svc)这样的网站访问。

您必须使用为您生成所有类的工具从 WS 获取引用，然后使用该服务的类来编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:04:15.513

如果您打算部署到不使用 IIS 进行托管的服务器，您可以查看其他托管应用程序，例如[Cassini](http://ultidev.com/products/cassini/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:46:18.340

[此链接](http://msdn.microsoft.com/en-us/library/ms731758.aspx)有一个示例，展示了如何将 WCF 服务部署为 servicehost 应用程序。

这意味着它作为服务运行，不需要部署到 IIS 实例。

# web-hosting - 具有自定义数据库选择的虚拟主机

> ID：10074306
> 
> 赞同：1
> 
> 时间：2012-04-09T13:58:30.600
> 
> 标签：web-hosting, custom-server-controls, orientdb

我在其他地方问过这个问题：[https](https://webmasters.stackexchange.com/questions/28320/webhosting-with-custom-database-choice) ://webmasters.stackexchange.com/questions/28320/webhosting-with-custom-database-choice但希望这里的人也能指出我正确的方向.. . 有人知道任何支持 OrientDB 的虚拟主机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:32:51.243

AFAIK 只有 NuvolaBase 提供它：[www.nuvolabase.com](http://www.nuvolabase.com)

# spring - 如何使用 Spring Security 登录页面传递附加参数

> ID：10074308
> 
> 赞同：44
> 
> 时间：2012-04-09T13:58:36.507
> 
> 标签：spring, spring-security

我正在尝试将数据库名称设置为来自 spring 安全登录页面的请求输入参数。目前我只得到使用 spring security 检索到的用户名`SecurityContextHolder.getContext().getAuthentication()`。

如何访问登录页面上设置的附加字段？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-09T19:33:27.463

有很多方法可以做到这一点，但官方的方法是使用自定义`AuthenticationDetails`and ，分别`AuthenticationDetailsSource`继承 Spring 的[`WebAuthenticationDetails`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/authentication/WebAuthenticationDetails.html)and [`WebAuthenticationDetailsSource`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/authentication/WebAuthenticationDetailsSource.html)。将额外字段添加到自定义项`WebAuthenticationDetails`，并让自定义`WebAuthenticationDetailsSource`项从请求中获取数据以填充该字段。

在 Spring Security 3.1 中，使用元素的`authentication-details-source-ref`属性很容易配置。`<form-login>`

在 3.0 中，您必须使用`BeanPostProcessor`. Spring Security FAQ 中有一个关于[使用 BeanPostProcessor 配置自定义 WebAuthenticationDetailsS​​ource 的示例](http://static.springsource.org/spring-security/site/faq.html#faq-namespace-post-processor)。

完成此操作后，您可以调用 SecurityContextHolder.getContext().getAuthentication().getDetails() 来访问您的额外字段。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-09T18:14:20.107

> 详细阐述@Vacuum 的评论

这是一个简单的方法（未经测试，但我相信这会奏效）

1.  创建一个新类`ExUsernamePasswordAuthenticationFilter`，它将扩展默认过滤器并获取附加参数并将其存储在会话中。它看起来像这样：

```
public class ExUsernamePasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

    @Override
    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {
        final String dbValue = request.getParameter("dbParam");
        request.getSession().setAttribute("dbValue", dbValue);

        return super.attemptAuthentication(request, response); 
    } 
} 
```

2.  在您的`UserDetailsService`实施中，修改您的实施：

```
UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException; 
```

获取步骤 1) 中的过滤器提供的会话变量。

3.  在您的`<http />`安全设置中，用您的自定义过滤器覆盖默认过滤器

```
<custom-filter ref="beanForYourCustomFilterFromStep1" position="FORM_LOGIN_FILTER"/> 
```

有关自定义过滤器的更多信息，请参阅文档的这一部分：http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-custom-filters](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-custom-filters)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-05-31T10:13:38.390

[sourcedelica](https://stackoverflow.com/a/10078692/3151168)提到 using`AuthenticationDetailsSource`和 custom `AuthenticationDetails`。这是一个例子。

`authentication-details-source-ref`将带有 bean id 的属性添加`customWebAuthenticationDetailsSource`到`form-login`：

```
<security:http>
    <security:intercept-url pattern="/**" access="..." />
    <security:form-login authentication-details-source-ref="customWebAuthenticationDetailsSource" login-page="..." />
    <security:logout logout-success-url="..." />
</security:http> 
```

创建一个新类`CustomWebAuthenticationDetailsSource`：

```
package security;

import org.springframework.security.authentication.AuthenticationDetailsSource;
import org.springframework.security.web.authentication.WebAuthenticationDetails;

import javax.servlet.http.HttpServletRequest;

public class CustomWebAuthenticationDetailsSource implements AuthenticationDetailsSource<HttpServletRequest, WebAuthenticationDetails> {
    @Override
    public WebAuthenticationDetails buildDetails(HttpServletRequest context) {
        return new CustomWebAuthenticationDetails(context);
    }
} 
```

和相关的`CustomWebAuthenticationDetails`：

```
package security;

import org.springframework.security.web.authentication.WebAuthenticationDetails;
import javax.servlet.http.HttpServletRequest;

public class CustomWebAuthenticationDetails extends WebAuthenticationDetails {

    private final String yourParameter;

    public CustomWebAuthenticationDetails(HttpServletRequest request) {
        super(request);
        yourParameter = request.getParameter("yourParameter");
    }

    public String getyourParameter() {
        return yourParameter;
    }

    //TODO override hashCode, equals and toString to include yourParameter
    @Override
    public int hashCode() { /* collapsed */ }
    @Override
    public boolean equals(Object obj) { /* collapsed */ }
    @Override
    public String toString() { /* collapsed */ }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-10-13T01:56:42.897

如果您使用 custom ，有一种更简单的方法`AuthenticationProvider`。您可以注入`HttpServletRequest`并检索您的额外参数：

```
@Component
public class CustomAuthenticationProvider implements AuthenticationProvider {

    @Autowired(required = false)
    private HttpServletRequest request;

    @Autowired
    private MyAccountService myAccountService;

    @Override
    public Authentication authenticate(Authentication authentication) {

        System.out.println("request testing= " + request.getParameter("testing"));

        .....
    }

    @Override
    public boolean supports(Class<?> authentication) {
        return authentication.equals(UsernamePasswordAuthenticationToken.class);
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-30T12:11:53.253

@user1322340 没有提供在 loadUserByUsername 函数中获取会话属性的实现细节：

第 1 步：按照@user1322340 提供的所有步骤进行操作

第 2 步：您需要在 web.xml 中添加一个配置，如下所示：

```
<listener>
    <listener-class>
       org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener> 
```

第 3 步：使用此类代码获取属性：

```
RequestContextHolder.getRequestAttributes().getAttribute("yourAttributeName", RequestAttributes.SCOPE_SESSION); 
```

第 4 步：在 Spring Security 配置中注册您的过滤器。如果您收到错误“**必须指定 authenticationManager** ”。在配置中注册过滤器后。您需要为扩展过滤器设置一个 authenticationManagerBean 并以这种方式配置它：

```
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Bean
    public ExUsernamePasswordAuthenticationFilter exUsernamePasswordAuthenticationFilter()
            throws Exception {
        ExUsernamePasswordAuthenticationFilter exUsernamePasswordAuthenticationFilter = new ExUsernamePasswordAuthenticationFilter();
        exUsernamePasswordAuthenticationFilter
                .setAuthenticationManager(authenticationManagerBean());
        return exUsernamePasswordAuthenticationFilter;
    }

    @Bean
    @Override
    public AuthenticationManager authenticationManagerBean() throws Exception {
        return super.authenticationManagerBean();
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {

        RequestMatcher requestMatcher = new RequestMatcher() {
            @Override
            public boolean matches(HttpServletRequest httpServletRequest) {
                if (httpServletRequest.getRequestURI().indexOf("/api", 0) >= 0) {
                    return true;
                }
                return false;
            }
        };

        http
                .addFilterBefore(exUsernamePasswordAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class)
                ...
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-22T14:46:29.953

对于使用 java 配置的 spring security 3.0 或更高版本，以下简单步骤效果很好。

*   在配置中的 HttpSecurity 对象中的 UserNameandPasswordAuthenticationFilter 之前添加您的过滤器。

    ```
    http.addFilterBefore(new YourFilter(), UsernamePasswordAuthenticationFilter.class); 
    ```

*   让过滤器有这样一行来获取会话请求中所需的字段。

    ```
    if(requestPath != null &&requestPath.equals("/login") ) {
            session.setAttribute("yourParam",req.getParameter("yourParam"));
        } 
    ```

*   稍后您可以从任何类的会话中获取参数值：

    ```
    String yourParam =(String)request.getSession().getAttribute("yourParam"); 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-14T11:44:28.007

简单的方法：

1）注册RequestContextListener

```
@Bean
public RequestContextListener requestContextListener(){
    return new RequestContextListener();
} 
```

2）和主课：

```
HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.
currentRequestAttributes()).
getRequest(); 
```

3）之后，我们可以在自定义标头中获取参数：

```
request.getHeader("OrganizationId") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-11T10:24:48.937

最简单的方法只需两步：

**第1步。**

在 web.xml 中添加以下监听器：

```
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value></param-value>
</context-param> 
```

**第2步。**

在您想要获取其他参数的类方法中添加以下内容：

```
RequestAttributes attribs = RequestContextHolder.getRequestAttributes();

if (RequestContextHolder.getRequestAttributes() != null) {
    HttpServletRequest request = ((ServletRequestAttributes) attribs).getRequest();
} 
```

现在您可以通过以下方式获取附加参数，假设附加参数名为“loginType”：

```
request.getParameter("loginType") 
```

# c++ - 整个程序编译没有栈分配？

> ID：10074309
> 
> 赞同：7
> 
> 时间：2012-04-09T13:58:38.200
> 
> 标签：c++, c, memory-management, stack, allocation

如果您编写的应用程序是：

*   单线程
*   调用图中没有循环
*   不使用 alloca 或[VLA](http://en.wikipedia.org/wiki/Variable-length_array)

现代整个程序优化编译器可以优化所有堆栈分配（例如 GCC、MSVC、ICC）吗？在这种情况下，它似乎应该能够静态分配所有可能的堆栈空间。“整个程序”是指编译器可以访问 /all/ 源代码（在运行时不可能 dlopen 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:48:45.867

如果您可以*保证*您所说的条件，那么可以：可以有效地使堆栈完全静态分配。每个函数都有一块堆栈内存。

但是，实际的编译器会这样做吗？不。

这样做绝对没有任何好处。事实上，它可能获得的收益可能会少得可怜。很多时候，大部分工作堆栈都在缓存中，因此对其进行修改非常便宜。如果堆栈在静态内存中，那么任何特定函数的“堆栈”内存将被缓存的唯一时间是您最近调用了该函数。使用真正的堆栈，您更有可能在缓存中工作。

此外，给每个函数一个堆栈内存块可以很容易地使您的程序的静态内存使用量比它需要的大得多。栈是一个固定大小的结构；无论你有多少个函数，堆栈都会占用一定的大小。如果您有 100,000 个函数，并且每个函数占用 64 字节空间，那么您的静态“堆栈”必须占用 ~6.4MB 空间。

为什么？您永远不会在任何时候使用大部分内存。该程序可以在 1MB 甚至 512KB 的堆栈中正常运行；为什么要白白占用 6 倍的内存？

因此，它既不是性能优化*，又*会使程序的内存膨胀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:24:30.843

这是一个太长的评论，不能成为评论：

请注意，虽然理论上所有的堆栈分配都可能被优化掉，但分配的数量可能超出了必要的范围。这不是 OP 所要求的，但考虑起来可能很有趣。找到所需的最小大小分配将等同于解决停机问题。想象一个程序结构如下：

```
<do 'something'>
<call last thing which happens to require more
 stack space than everything else in 'something'> 
```

如果`<do 'something'>`“停止”，您只需要额外的堆栈空间。

您还可以想象优化变得任意困难的其他变体。例如，您的程序可以简单地使用用户输入评估 3SAT 表达式并根据该输入执行某些操作——但该 3SAT 表达式可能具有也可能没有任何导致 true 的值。

也许还有一个更简单的情况：用户可能根本不会输入需要更多堆栈空间进行处理的输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T20:32:04.343

编译器可以做到这一点，但它可能是一种特定的优化，它可能不会。

如果您有一个完全内联的程序，您将负责为函数调用设置堆栈帧的开销。

但是，如果您还想摆脱局部变量的堆栈分配，编译器必须将这些局部变量转换为全局变量。我所知道的编译器都没有这样做，并且在某些平台上，与局部变量相比，引用全局变量需要额外的指令（因为地址必须加载两条指令而不是一条指令）。另外，由于引用堆栈变量是一种常见的操作，它通常被编码成更小的指令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:46:26.053

除非您将“不使用任何外部库”添加到列表中，否则对外部函数的任何调用都需要设置堆栈，因为它们会被编译，期望调用代码以特定方式传递其参数，最有可能在堆栈上。此外，这些库几乎肯定必须为自己的本地人调整堆栈。

此外，根据您的精确应用程序，即使您知道可以静态分配堆栈，编译器也可能很难知道您的代码中没有任何回调等，这将导致需要堆栈分配。

我只是看不到编译会尝试这种优化的情况，因为分配堆栈空间已经非常快了（我相信有几个寄存器操作）

# xpages - 自定义控件自定义方法？

> ID：10074316
> 
> 赞同：1
> 
> 时间：2012-04-09T13:59:03.470
> 
> 标签：xpages

我一直在通过自定义控件充分利用自定义属性。有没有自定义方法之类的东西？假设我想在 CC 中发生一些事情。一个很好的例子是对话框扩展的 show 方法。如果我有一个内部带有扩展对话框的 cc，我希望我的自定义控件有一个 Show 方法，它将最终用户程序员与扩展页面 Shoe 方法隔离开来。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T22:25:13.253

在运行时，所有自定义控件元素都成为[UIIncludeComposite](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/component/UIIncludeComposite.html)类的实例；因此，您可以针对任何给定的控件实例调用许多内置方法，但无法指定自定义方法，而不是自定义属性。

但是，至少有两种方法可以实现您所追求的结果：

1.  将您的自定义控件转换为组件（[此 NotesIn9 插曲](http://notesin9.com/index.php/2012/04/04/notesin9-064-global-custom-controls-fixed/)描述了此过程的最简单方法）。一旦您将 Designer 生成的类迁移到不会在您每次构建 NSF 时被覆盖的类，您就可以添加自定义方法，而不必担心下一次构建会再次将它们清除。由于自定义控件本质上只是 IBM 对“复合组件”的 JSF 2.0 概念的实现，因此您还可以从头开始创建一个与现有自定义控件具有相同行为但也支持自定义行为的组件。请注意，这两种方法都不一定需要您创建 OSGi 库……您可以直接在 NSF 中定义这些组件；如果您想在多个 NSF 中重用它们，而无需将各种文件复制到每个 NSF，则只需将它们推送到库中。

2.  在控件的自定义属性中，包括一个接受 API 对象的属性。换句话说，您可以创建任何支持您希望定义的自定义方法的对象（例如，Java 类或 SSJS 对象），并将*该*对象传递给控件。然后，您可以通过 CC 的属性映射获取对象的句柄来调用这些方法。

例如：

```
<myCC id="myCustomControl" API="#{someObject}" /> 
```

假设任何 #{someObject} 解析为包含 show() 方法，您可以通过获取已传递给控件的实例的句柄来调用该方法：

```
var cc = getComponent("myCustomControl");
var ccProperties = cc.getPropertyMap();
var ccAPI = ccProperties.get("API");
ccAPI.show(cc); 
```

在上面的示例中，我将实际的自定义控件传递给 show() 方法，因为对象本身并不知道它被传递到的自定义控件。因此，例如，如果该方法需要获取其子级的句柄以切换其渲染属性，那么它需要一些其他方式来确定其上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:57:41.517

Tim 传入对象的解决方案是一个很好的解决方案。

只是突然出现在我脑海中的东西，很容易在控件上创建一个类似于呈现属性的属性。传入一个值并在自定义控件内部根据其值执行某些操作，即。如果 true 显示对话框，否则隐藏，在运行时在 XPage 中修改此值并部分刷新控件，逻辑将由此重新运行，控件将显示等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:53:00.777

另一种解决方案可能是在您的自定义控件中包含一个 JavaScript 库，提供函数（您的自定义控件方法），您必须在其中传递自定义控件实例的 id。

# .net - 实体框架 - 连接方法 - 混合代码优先和数据库优先

> ID：10074317
> 
> 赞同：0
> 
> 时间：2012-04-09T13:59:05.033
> 
> 标签：.net, entity-framework, ef-code-first

我有我的域实体。这些实体都在一个类库中。我的数据库已经存在，许多系统都在使用它。

我想使用 EDMX 来映射我的 POCO 类中的哪个字段是数据库中的哪个列。

我不想再次生成数据库或实体，因为它们都已经存在。我只想使用 EDMX 来简化开发，而不是使用流利的 api 进行映射（代码优先方法）。

**更新 1：**

我只想要一个*DATA MAPPER*功能。我认为 iBatis 是我想要的最接近的。我可以使用实体框架（或 nHibernate）实现相同的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:11:39.350

只需将 .edmx 文件复制到您的新项目中，打开它，添加代码生成项并为其添加 POCO 生成器。

完毕。确保在 web.config 中添加连接字符串。

编辑：

对不起，我误会了。您需要将数据库反向工程为 .edmx 文件，然后将代码生成策略设置为无。接下来，您必须将类的名称空间映射到现有的域名称空间，如果实体名称与表名称有任何差异，您必须专门映射这些名称。

您可能还需要进行其他配置，但这应该可以帮助您入门。

# android - 在android应用程序中放置sqlite文件的位置

> ID：10074320
> 
> 赞同：1
> 
> 时间：2012-04-09T13:59:13.283
> 
> 标签：android, sqlite

我直接在移动设备上开发，我有一些问题希望你能帮助我澄清使用数据库的开发：

*   我的应用程序打算使用 SQLite 数据库（只读模式），所以我想知道我应该将在 pc 上创建的 .sqlite 文件放在哪里，以便应用程序读取甚至直接读取。

*   稍后，应用程序应该从中央服务器下载 db 文件。因此，我们的想法是继续将该文件放在同一位置，应用程序肯定会知道并可以在尝试使用它之前检查它是否存在。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:07:19.570

您需要将您的 SQLite 数据库作为资源（例如 res/raw）或资产与您的应用程序一起打包。但是，您将无法直接使用打包的 SQLite 数据库。您需要将其复制到 Android 期望您的应用程序的数据库文件所在的位置，然后从那里使用它。最好的方法是使用[`Context.getDatabasePath(String)`](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)（传递数据库文件的名称）来确定文件路径。这也是您应该放置应用程序在运行时下载的数据库文件的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:11:10.677

您需要将数据库文件复制到您的资产文件夹中，然后使用以下代码将其写入内存以在应用程序中访问：

```
public class DataBaseHelper extends SQLiteOpenHelper{

private static final String TAG = "DataBaseHelper";

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/" + Constants.package_name + "/databases/";

private static String DB_NAME = "YourDatabaseName.db";

public SQLiteDatabase myDataBase; 

private final Context myContext;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;

}   

  /**
 * Creates a empty database on the system and rewrites it with your own database.
 * */
public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getWritableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[2048];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();

        super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T16:50:10.770

我将我的初始数据库放在“资产”目录中，然后将其复制到用户可访问的路径上——比如外部存储器（SD 卡等）。使用这种方式我没有任何麻烦:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:27:41.747

我建议您是否也想插入数据而只是获取值，您可以在应用程序中创建数据库

这将永远有路径

像

/data/data/your_project_name/databases/yourdatabase_name

[http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/)

# php - Javascript/Jquery：下载多张图片并保存在本地

> ID：10074324
> 
> 赞同：1
> 
> 时间：2012-04-09T13:59:28.490
> 
> 标签：php, javascript, jquery, image, save

我在 php 中创建，从 file_get_content 开始加载 HTML 页面，解析为 DOM 并使用 xpath 按类名查找所有图像标签。基本上最后我可以调整大小并将所有图像保存在本地（因为我在本地主机上尝试）。

问题是一旦我托管了我的 php，所有图像都将保存在服务器上。另一种解决方案可能是要求用户安装（例如xampp）以在本地运行它（但不是一个更好的解决方案）。

我可以使用 javascript/jquery 执行相同的方法来保存页面中找到的所有图像吗？我所知道的是javascript可以保存，但必须弹出对话框另存为，并且还需要为每个图像一一完成。

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:07:04.717

不需要使用 JavaScript，可以使用 PHP 强制下载图片：

```
$file = 'path/to/image.png';
header('Content-Description: File Transfer');
header("Content-type: application/octet-stream");
header("Content-disposition: attachment; filename= ".$file."");
readfile($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:11:52.110

您不能发送多个单独的文件。最好的办法是使用 zip 扩展名将多个文件压缩在一起并提供下载。

[邮编扩展](http://php.net/manual/en/book.zip.php)

# python - 通过 SWIG 和 Python 从第三方 .dll 共享库访问函数

> ID：10074325
> 
> 赞同：4
> 
> 时间：2012-04-09T13:59:29.767
> 
> 标签：python, dll, swig, pyd

我从第三方获得了一个 DLL 连同他的 .lib 和 .h 文件（假设这些文件是：“test.dll”、“test.lib”和“test.h”）

这个交付的 DLL 包含一些我应该从 Python 脚本访问它们的函数。为此，我必须使用 SWIG 和 MSVC2010 构建一个扩展 (.pyd)。（我将第三方文件复制到 MSVC 项目的目录中）

为了对“test.h”文件有一个概述，它是这样的（为了简单起见，我只放了一个函数，“CreateFile()”，它返回一个文件句柄）：

```
/* File : test.h */

#if !defined ( TEST_H )
       #define TEST_H

#if defined ( _MSC_VER )
  #pragma warning( disable: 4103)
  #pragma pack( push, 8)
#elif defined ( __BORLANDC__ )
  #pragma option push -a8
  #pragma nopushoptwarn
  #pragma nopackwarning
#endif

#include <wtypes.h>

/*----------------------------------------------------------------------------
| BL API
-----------------------------------------------------------------------------*/
#if defined ( DLL_EXPORTS )
  #define BLAPI( ret)                        ret __stdcall
#else
  #define BLAPI( ret) __declspec( dllimport) ret __stdcall
#endif

/*----------------------------------------------------------------------------
| API
-----------------------------------------------------------------------------*/
#if defined ( __cplusplus )
extern "C" {
#endif

BLAPI( HANDLE) CreateFile( LPCTSTR lpFileName, DWORD dwDesiredAccess);

#if defined ( __cplusplus )
}
#endif

/*----------------------------------------------------------------------------
|
-----------------------------------------------------------------------------*/

#if defined ( _MSC_VER )
  #pragma pack( pop)
#elif defined ( __BORLANDC__ )
  #pragma option pop
  #pragma nopushoptwarn
  #pragma nopackwarning
#endif

#endif // TEST_H 
```

我打算创建一个类来包装那些第三方函数（在“test.dll”库中实现）。“myInterface.h”文件如下所示：

```
/* File : myInterface.h */

#include <windows.h>
#include "test.h"           // <--- third party header

class myInterfaceClass {
public:
    myInterfaceClass() {
    }

    virtual ~myInterfaceClass() {
    };

    HANDLE  hFile;
    BOOL    errorCode;

    BOOL    OpenFile( LPCTSTR lpFileName );  // <-- function wrapper

}; 
```

...以及该类的实现，我将其放入“myInterface.cxx”文件中：

```
/* File : myInterface.cxx */

#include "myInterface.h"
#include "test.h"           // <--- third party header
#include <windows.h>

BOOL myInterfaceClass::OpenFile( LPCTSTR lpFileName )
{
    errorCode = TRUE;
    // open file
    hFile = CreateFile(lpFileName, GENERIC_READ);   // <--- third party function call
    errorCode = ( INVALID_HANDLE_VALUE == hFile);

    return errorCode;
} 
```

要使用 SWIG，我必须将以下 SWIG 接口文件 .i 添加到 MSVC 项目中：

```
/* File : myInterface.i */
%module myInterface

%{
#include "myInterface.h"
#include "test.h"
%}

/* Let's just grab the original header file here */
%include "myInterface.h"
%include "test.h" 
```

在 MSVC 项目中，在这个 .i 文件的“属性”中，我输入了“自定义构建工具”->“命令行”，如下：

```
echo PYTHON_INCLUDE: %PYTHON_INCLUDE% 
echo PYTHON_LIB: %PYTHON_LIB% 

rem
rem WARNING!: Use quotes (" ") on path names to avoid errors !
rem

echo on 
echo. 
echo. "%(FullPath)"
echo. 
"%SWIG_PATH%\swig.exe" -c++ -python -I%SWIG_PATH%\lib  -Itest "%(FullPath)" 
```

好的！当我尝试构建 PYD 扩展时，我遇到了这个错误：

```
Error   1   error : Syntax error in input(1).   D:\ADXWorkZone\testSwig\test.h  33  1   myInterface 
```

...但是“test.h”文件没有任何问题。我使用相同的文件（没有任何修改）来实现与经典 DLL 相同的 C++ 包装类，并且效果很好。

项目规格：

```
Properties -> C/C++ -> General -> Additional Include Directories: $(PYTHON_INCLUDE)
Properties -> Linker -> General -> Output File: _myInterface.pyd
Properties -> Linker -> Input -> Additional Dependencies: $(PYTHON_LIB);test.lib 
```

有人可以帮我吗？任何想法将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:17:11.507

尝试在接口文件中的其他 %includes 之前添加以下内容。

```
%include <windows.i> 
```

SWIG 不会递归到嵌套包含中，这提供了诸如 BOOL 和 _declspec 之类的定义，否则会混淆 SWIG。

# facebook-c#-sdk - 无法从程序集中加载类型“Facebook.FacebookApplication”

> ID：10074328
> 
> 赞同：0
> 
> 时间：2012-04-09T13:59:37.387
> 
> 标签：facebook-c#-sdk

我正在尝试在 ASP.NET MVC 3 中使用 Facebook 程序集。我正在关注本教程：[http](http://csharpsdk.org/docs/web/getting-started) ://csharpsdk.org/docs/web/getting-started 但是当我尝试使用他的功能之一时作为这个...

```
[FacebookAuthorize(LoginUrl = "...")]
    public abstract class SuperController<T> : Controller where T : BaseRequirement
{
...
} 
```

当其他控制器从它继承时，我得到一个异常。例外：

```
Could not load type 'Facebook.FacebookApplication' from assembly 'Facebook, Version=6.0.10.0, Culture=neutral, PublicKeyToken=58cb4f2111d1e6de'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.TypeLoadException: Could not load type 'Facebook.FacebookApplication' from assembly 'Facebook, Version=6.0.10.0, Culture=neutral, PublicKeyToken=58cb4f2111d1e6de'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[TypeLoadException: Could not load type 'Facebook.FacebookApplication' from assembly 'Facebook, Version=6.0.10.0, Culture=neutral, PublicKeyToken=58cb4f2111d1e6de'.]
   Facebook.Web.Mvc.FacebookAuthorizeAttributeBase.OnAuthorization(AuthorizationContext filterContext) in e:\Prabir\Documents\Projects\facebooksdk\v5.3.2\Source\Facebook.Web.Mvc\FacebookAuthorizeAttributeBase.cs:44
   System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +102
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969201
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

我尝试从 Nuget 更新并检查我是否使用的是最新版本，我认为没问题。在我的 app.config 中，我发现了这个：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Facebook" publicKeyToken="58cb4f2111d1e6de" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.10.0" newVersion="6.0.10.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:30:46.057

`FacebookAuthorize`已在 v6 中删除。

[您可以在https://github.com/facebook-csharp-sdk/facebook-aspnet-sample](https://github.com/facebook-csharp-sdk/facebook-aspnet-sample)和[https://github.com/facebook-csharp-sdk/facebook-canvas-aspnet-sample](https://github.com/facebook-csharp-sdk/facebook-canvas-aspnet-sample)找到 v6 示例

# javascript - 如何在地图 api v3 中创建可拖动的矩形

> ID：10074333
> 
> 赞同：2
> 
> 时间：2012-04-09T13:59:56.060
> 
> 标签：javascript, google-maps-api-3

如何在 map api v3 中创建一个可拖动的矩形，正如您在我的代码中看到的那样，我的矩形在标记中心上是可拖动的 onclick 我不会在单击所有矩形时拖动我的矩形以寻求帮助：

```
(function() 
{
    window.onload = function()
    {
        var path;
        var counter = 0;
        // Creating a map
        var options = 
        {
            zoom: 11,
          center: new google.maps.LatLng(49.2541, -123.072),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('mapDiv'), options);

    };// end window.onload

})();// end anonymous function

    //-------------------------createRectangle BEGINS---------------------------
    /**
      * Creates the rectangle
      */
    function createRectangle()
    {
            // make the center marker
            try
            {
              markerCenter.setMap(null);
              markerSouthWest.setMap(null);
              markerNorthEast.setMap(null);
              rectangle.setMap(null);
              fusionLayer.setMap(null);
            }
            catch(err){}
            centerPositionSave = map.getCenter();

            latLngSouthWest = map.getCenter().DestinationPoint(225,4200); // 225 degrees, 1200 meters
            latLngNorthEast = map.getCenter().DestinationPoint(45,4200);  // 45 degrees, 1200 meters
            bounds = new google.maps.LatLngBounds(latLngSouthWest,latLngNorthEast);
            rectangle = new google.maps.Rectangle
            (
                {
                    strokeWeight: 2,
                    bounds:bounds,
                    map:map,                    
                }
            ); // end rectangle
            markerSouthWest = new google.maps.Marker(
            {
                draggable: true,
                title: 'south west',
                icon:polyEditSquare,
                raiseOnDrag:false,
                position: latLngSouthWest,
                map: map
            }); // end markerSouthWest
            google.maps.event.addListener(markerSouthWest,'drag',markerSouthWestDrag);
            markerNorthEast = new google.maps.Marker(
            {
                draggable: true,
                title: 'north east',
                icon:polyEditSquare,
                raiseOnDrag:false,
                position: latLngNorthEast,
                map: map
            }); // end markerNorthEast
            google.maps.event.addListener(markerNorthEast,'drag',markerNorthEastDrag);
            markerCenter = new google.maps.Marker(
            {
                draggable: true,
                title: 'center',
                icon: new google.maps.MarkerImage("icons/move.png"),
                raiseOnDrag:false,
                position: map.getCenter(),
                map: map
            });// end markerCenter
            markerClose = new google.maps.Marker(
            {
                draggable: false,
                title: 'Fermer',
                icon: new google.maps.MarkerImage("icons/x.png",  new google.maps.Size(16,16), new google.maps.Point(0,0),  new google.maps.Point(8,8)),
                raiseOnDrag:false,
                position: new google.maps.LatLng(latLngNorthEast.lat(), latLngSouthWest.lng()),
                map: map
            });// end markerClose
            google.maps.event.addListener(markerCenter, 'drag', markerCenterDrag);
            google.maps.event.addListener(markerClose,'click',markerCenterDoubleClick);

    }//end of createRectangle 

    //new google.maps.LatLng(latLngSouthWest.lat(),latLngNorthEast.lng())///////////////////////////::::::

    //------------------------------createRectangle ENDS------------------------

    //-------------------------markerCenterDoubleClick BEGINS---------------------------
    /**
      * Handles the markerCenter doubleclick event. Removes the rectangle.
      */
    function markerCenterDoubleClick(e)
    {
        rectangle.setMap(null);
        markerCenter.setMap(null);
        markerSouthWest.setMap(null);
        markerNorthEast.setMap(null);
        markerClose.setMap(null);
    }//end of markerCenterDoubleClick
    //------------------------------markerCenterDoubleClick ENDS------------------------

    //-------------------------markerCenterDrag BEGINS---------------------------
    /**
      * Handles the center marker drag event. We want the southwest and northwest markers to update accordingly
    */
    function markerCenterDrag(e)
    {
        var southWest = markerSouthWest.getPosition();
        var northEast = markerNorthEast.getPosition();
        centerPositionNew = markerCenter.getPosition();
        var distance = google.maps.geometry.spherical.computeDistanceBetween(centerPositionSave,centerPositionNew);
        var headingNew = google.maps.geometry.spherical.computeHeading(centerPositionSave,centerPositionNew);
        var newSouthWest = google.maps.geometry.spherical.computeOffset(southWest,distance,headingNew);
        var newNorthEast = google.maps.geometry.spherical.computeOffset(northEast,distance,headingNew);
        markerSouthWest.setPosition(newSouthWest);
        markerNorthEast.setPosition(newNorthEast);
        bounds = new google.maps.LatLngBounds(newSouthWest,newNorthEast);
        rectangle.setBounds(bounds);
        centerPositionSave = centerPositionNew;
        markerClose.setPosition(new google.maps.LatLng(newNorthEast.lat(), newSouthWest.lng()));

    }//end of markerCenterDrag
    //------------------------------markerCenterDrag ENDS------------------------

    //-------------------------markerSouthWestDrag BEGINS---------------------------
  /**
    * Handles the southwest marker drag event. We want the rectangle to update accordingly.
    */
    function markerSouthWestDrag(e)
    {
        latLngSouthWest = markerSouthWest.getPosition();
        latLngNorthEast = markerNorthEast.getPosition();
        bounds = new google.maps.LatLngBounds(latLngSouthWest,latLngNorthEast);
        rectangle.setBounds(bounds);
        center = bounds.getCenter();
        markerCenter.setPosition(center);
        centerPositionSave = center;
        markerClose.setPosition(new google.maps.LatLng(latLngNorthEast.lat(), latLngSouthWest.lng()));

    }//end of markerSouthWestDrag
    //------------------------------markerNorthEastDrag ENDS------------------------

    /**
    * Handles the southwest marker drag event. We want the rectangle to update accordingly.
    */
    function markerNorthEastDrag(e)
    {
        latLngSouthWest = markerSouthWest.getPosition();
        latLngNorthEast = markerNorthEast.getPosition();
        bounds = new google.maps.LatLngBounds(latLngSouthWest,latLngNorthEast);
        rectangle.setBounds(bounds);
        center = bounds.getCenter();
        markerCenter.setPosition(center);
        centerPositionSave = center;
        markerClose.setPosition(new google.maps.LatLng(latLngNorthEast.lat(), latLngSouthWest.lng()));

    }//end of markerNorthEastDrag
    //------------------------------markerNorthEastDrag ENDS------------------------

//-------------------------fusionCommunityCentres BEGINS---------------------------
/**
  * Puts the community centres Fusion Table on the map
  */
function fusionCommunityCentres()
{
    tableId = 1067437;
    southWest = markerSouthWest.getPosition().toString();
    northEast = markerNorthEast.getPosition().toString();
    query = "SELECT * FROM " + tableId + " WHERE ST_INTERSECTS(geometry, RECTANGLE(LATLNG" +
            southWest + ", LATLNG" + northEast + "))";
     $("#queryOutput").html("Query sent to Fusion Tables:<br>" + query);
    fusionLayer = new google.maps.FusionTablesLayer(tableId,
    {
        query: query,
        map:map
    });
 //layer.setMap(map);
}//end of fusionCommunityCentres
//------------------------------fusionCommunityCentres ENDS------------------------ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:39:25.893

[Here I drag a single rectangle.](http://jsfiddle.net/dvzJA/)

Since there's no drag event for Rectangles, I assign a marker to its center, and let its drag event control the rect movement.

The code can be extended, like adding a marker directly to the Rectangle object, or even subclass it. You decide.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T13:50:30.283

您可以在选项中将矩形设置为可拖动。

尝试：

```
var rectangle = new google.maps.Rectangle({
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35,
    map: map,
    draggable:true,//<-----------Here set draggable option
    bounds: new google.maps.LatLngBounds(
      new google.maps.LatLng(33.671068, -116.25128),
      new google.maps.LatLng(33.785282, -116.133942))
  }); 
```

[演示](http://jsfiddle.net/neERA/)

# css - 如果在我的 HTML 中声明了元字符集，是否需要 CSS @charset？

> ID：10074340
> 
> 赞同：0
> 
> 时间：2012-04-09T14:00:13.493
> 
> 标签：css, html

我继承了一些在 CSS 顶部设置字符集的 CSS，如下所示：

```
@charset "UTF-8"; 
```

但是，如果我在 HTML 页面的头部有这样的标签，这仍然是必要的吗？

```
<meta charset="UTF-8" /> 
```

它做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:04:14.280

两者都做同样的事情，他们**建议**在编写和保存文档时使用哪个字符集的浏览器。

它帮助浏览器决定在哪个字符集中显示/解析文件，这样它就不会像乱码一样出现。

如果您不使用其中任何一个，浏览器将进行有根据的猜测并以它认为最合适的任何字符集读取文件。现代浏览器通常会很容易地做到这一点。

我个人从没用过 CSS 版本，我的 IDE 会自动添加 HTML 版本，所以我不介意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:16:37.793

`<meta charset="UTF-8" />`用于 HTML 文档，而`@charset`用于 CSS 文档。`http`如果标头告诉浏览器两个文件都已`utf-8`编码，则它们都不是必需的。仅当您在本地查看它们时，这些才是重要的。

# ruby-on-rails - Rails 使用 <%= 渲染 JSON 未按预期工作

> ID：10074344
> 
> 赞同：0
> 
> 时间：2012-04-09T14:00:40.567
> 
> 标签：ruby-on-rails, json

我目前正试图在我的一个控制器中返回多个 JSON 对象。

```
 @chromosomes = @organism.chromosomes.to_json
  @file_data = current_user.files.to_json
  respond_to do |format|
    format.html
  end 
```

但是，当我这样做时，在前端：

```
 <%= @chromosomes %> 
```

或者

```
 <%= @file_data %> 
```

我没有得到 JSON 对象，而是将数据作为字符串获取，其中包含 "e 等内容。我尝试解析字符串，例如

```
console.log($.parseJSON("<%= @chromosomes %>")); 
```

但它仍然无法正常工作。这是因为发回的请求是html吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:06:56.800

你的代码应该是这样的，

```
respond_to do |format|
    format.html index.html.erb
    format.xml  { render :xml => @organism.chromosomes) }
    format.json { render :json => @organism.chromosomes) }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:53:23.450

问题最终在于 Rails 将 json 数据编码为字符串，这是默认设置。解决我使用的问题

```
 <%= @chromosomes.html_safe %> 
```

在前端。可以在此处找到有关此的更多信息：

[Rails 中奇怪的 JSON Javascript 问题](https://stackoverflow.com/questions/5970419/weird-json-javascript-problem-in-rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:04:08.890

您只需要

```
render :json => @organism.chromosomes 
```

通过查看您的编辑，我认为您想要的内容如下：

```
console.log($.parseJSON("<%= raw @chromosomes %>")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:06:06.033

这应该适用于 Rails 2，

```
console.log($.parseJSON(<%= @chromosomes.dump %>)); 
```

对于 Rails 3，

```
console.log($.parseJSON(<%= @chromosomes.dump.html_safe %>)); 
```

String#dump 转义字符并使 parseJSON() 工作。请注意，不需要引号。

# restlet - Restlet 使用 Get 和 Post 方法

> ID：10074346
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:00:51.617
> 
> 标签：restlet

嗨，

我正在使用 Restlet 2.0 API 开发一个小应用程序。

我只想知道如何创建一个接受多个参数用于插入查询的 URI。

前任：

```
router.attach("/{patient}/insertpatient", insertpatient); 
```

我想使用 POST 插入有关患者的所有信息。

或者例如使用 GET 按 ID 和地址搜索。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T00:05:18.170

对于“插入患者”操作，我建议对 /patients 进行 POST（如果服务器生成患者 ID）或对 /patients/{patient-id} 进行 PUT（如果客户端生成患者 ID）。无论哪种方式，消息正文都将包含创建新患者实体所需的所有输入数据。序列化数据的两个简单选项是 URL 编码形式或 JSON。

按 ID 查找可能很简单，例如在 /patients/{patient-id} 上的 GET。按地址查找也可以是 GET，可能使用 URL 编码的查询参数。例如，您可以使用 GET on /patients?addr=%20Main%20Street%2C%20apt%204%2C%20Anytown%2C% 获取地址“123 Main Street, apt 4, Anytown, USA, 98765”的患者20美国%2C%2098765

# generics - 将继承对象的集合传递给接受基础对象的 ICollection 的方法

> ID：10074350
> 
> 赞同：1
> 
> 时间：2012-04-09T14:01:03.393
> 
> 标签：generics, c#-4.0, icollection, generic-collections

背景：我有一个通用的 type 集合，`DirectoryCollection<T>`并指定 T 必须是 type `IEntity`。我有一个具体类型`Entity`，它实现`IEntity`了两个派生类型，`Employee`并且`Station`.

在 .NET 4.0 中，我知道可以（[从这里](https://stackoverflow.com/questions/1174328/passing-a-generic-collection-of-objects-to-a-method-that-requires-a-collection-o)）调用带有`IEnumerable<Entity>`参数的方法`DirectoryCollection<Employee>`，但是，对于带有类型参数的方法似乎不起作用`ICollection<Entity>`。在所述方法中，我使用了集合的`Remove`and方法，因此犹豫是否要放入方法签名中。`Add``IEnumerable`

解决这个问题的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:57:11.590

你需要`ICollection`在`DirectoryCollection`课堂上实现。由于@SamHolder 在评论中提到的协方差限制，您可能需要明确实现它。请参阅[本教程](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.100%29.aspx)以明确实现接口。

此外，在接受`ICollection<Entity>`作为参数的方法中，您可能需要将签名更改为接受`ICollection<IEntity>`。

# android - 在 android 中保存使用 FingerPaint.java 代码完成的绘图

> ID：10074353
> 
> 赞同：0
> 
> 时间：2012-04-09T14:01:15.420
> 
> 标签：android

我使用 APIDemo 的 FingerPaint 应用程序完成了一个示例绘画应用程序。代替 setContentView(R.layout.main) 的“通常”模式，它使用类 MyView 扩展 View 并将内容设置为 setContentView(new MyView(this)); 现在无论我画什么，我都想将它保存在 SDCard 中。为此，我需要使用 getRootView 了解 rootview。这是由布局对象获得的（例如：LinearLayout L1 = new...）L1.getRootView。因为我使用的是这个 MyView，所以我无法获取 rootview 也无法保存位图。

```
 myview.setDrawingCacheEnabled(true);
    myview.requestFocus();
    myview.getRootView();

    System.out.println("MYVIEW = "+myview);

    myview.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    myview.layout(0, 0, myview.getMeasuredWidth(), myview.getMeasuredHeight());

    myview.buildDrawingCache(true);
    mBitmap = myview.getDrawingCache();
    //System.out.println("myview.getDrawingCache() = "+newview.getDrawingCache());

    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    myview.setDrawingCacheEnabled(false); // clear drawing cache
    System.out.println("BITMAP = "+mBitmap);

    File f = new File(Environment.getExternalStorageDirectory()
            + File.separator + "test.jpg");
    try {
        f.createNewFile();
        FileOutputStream fo = new FileOutputStream(f);
        fo.write(bytes.toByteArray());
    } catch (Exception e) 
    {
        e.printStackTrace();
    } 
```

我想知道如何使用菜单按钮单击保存我的绘图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:26:28.287

After a lot of effort into research I bumped into this [http://blahti.wordpress.com/2010/11/18/how-to-save-jpeg-files-in-the-android-emulator/](http://blahti.wordpress.com/2010/11/18/how-to-save-jpeg-files-in-the-android-emulator/) This solved my issue of saving the drawing.

# youtube - 到达视频中的某个位置时的 ytplayer api 事件？

> ID：10074357
> 
> 赞同：2
> 
> 时间：2012-04-09T14:01:42.533
> 
> 标签：youtube, youtube-api

有没有办法在视频到达特定时间时引发事件？我想在视频到达某个时间时获取回调函数，并且视频到达该时间所需的时间是不可预测的，因为用户可以跳过部分视频，或者缓冲可能需要在视频恢复之前的某个时间，或者类似的东西，所以简单地设置一个定时事件是行不通的，因为视频可能会提前到达特定时间。

我可以查询视频的时间，但我想要的是当视频到达某个时间时得到回调。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:09:33.583

我不打算写完整的代码，但你应该设置一个间隔，像这样：

```
var time = 70; // Time in seconds, e.g. this one is one minute and 10 seconds
var reached = false;

var interval = setInterval(function(){
    if(player.getCurrentTime() >= time && !reached) {
        clearInterval(interval);
        reached = true;
        timeReached();
    }
},1000);

function timeReached() {
    // Do what you have to
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:02:53.123

您可以将此[Javascript 包装器用于 YouTube 播放器 API](https://github.com/dmolsen/YoutubePlayer)。

API 提供了非常简单的事件处理。例如：

```
youtubePlayer.at('5000', function() {
    alert("You're five seconds into this Youtube clip");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T16:15:31.343

使用`player.getCurrentTime()`！

[https://developers.google.com/youtube/iframe_api_reference#Playback_status](https://developers.google.com/youtube/iframe_api_reference#Playback_status)

# magento - 如何在 Magento 中增加 csv 字段的最大大小，它位于何处

> ID：10074358
> 
> 赞同：1
> 
> 时间：2012-04-09T14:01:43.410
> 
> 标签：magento, csv

导入时我有一个字段可以包含大数据，似乎 CSV 有大约 65000（可能是 65535*）字符的非官方限制。因为 libreoffice calc 和 magento 都会截断该特定字段的数据。我调查得很好，我确定这不是因为特殊字符或引号。数据非常简单，行的格式彼此相似。

问题：如何增加该尺寸？或者至少我应该在哪里找到它？

注意：我在 libreoffice writer 中数了一下，大约是 65040。但可能使用回车符可以达到 65535

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T15:57:23.690

我改变：

1) 在表**catalog_category_entity_text** 类型的字段“值”从“文本”到“长文本”

2) 在文件**app/code/core/Mage/ImportExport/Model/Import/Entity/Abstract.php** const DB_MAX_TEXT_LENGTH = 65536; 到 const DB_MAX_TEXT_LENGTH = 16777215; 一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:43:02.557

你是对的，Magento 有一个限制，因为它在 MySQL 数据库中将文本字段设置为 TEXT，根据 MySQL 文档，这种字段最多支持 65535 个字符。

[http://dev.mysql.com/doc/refman/5.0/es/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/es/storage-requirements.html)

因此，您可以将 Magento 数据库中的列类型更改为使用 MEDIUMTEXT。我想正确的位置是在 catalog_product_entity_text 表中，您应该在其中修改“值”字段类型以满足您的需求。但请记住，这是危险的。在尝试之前进行完整备份。你甚至可能需要玩核心文件......不推荐！

我对 400 多个列表中的 8 个产品有同样的问题，我想我不会弄乱 Magento 核心和数据库，我们可以减少这几个产品的描述字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:48:21.313

CSV 可能不在乎。由于 Microsoft Access 允许包含大量数据的备注字段，我已经以 CSV 格式导出了 2-3k 描述，以便非常成功地导入 Magento。

您的限制是因为您使用的电子表格对单元格有单元格限制或导出限制，或者因为您尝试导入的字段在其表中为该字段设置了最大字符限制。

您可以通过使用 phpMyAdmin 查看该字段的最大字符设置来确定后者。

# java - HTTP 查询参数和 HTTP 表单参数之间的区别？

> ID：10074359
> 
> 赞同：17
> 
> 时间：2012-04-09T14:01:45.207
> 
> 标签：java, http, rest

HTTP 查询参数和 HTTP 表单参数有什么区别？我在restful相关文档中看到了这些话。你能举一个HTTP请求中的单词的例子吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T14:16:30.960

如果您发出请求[http://test.com?id=123](http://test.com?id=123)，那么 id 是一个 QueryParam（更准确地说是 GET 请求参数），如果您在正文中使用表单发出 POST 请求，那么这些表单参数（填充通常由用户）被翻译成 FormParam-s。

# android - 为什么蓝牙在android中需要DBUS通信方式？

> ID：10074364
> 
> 赞同：3
> 
> 时间：2012-04-09T14:02:03.237
> 
> 标签：android, android-intent, bluetooth, dbus

我是 Android DBUS 的新手，最近我被告知我需要使用 DBUS 在 Android 中实现蓝牙，从 DBUS 文档中我看到 DBUS 用于两个应用程序之间的通信介质。

1.  在 Android 应用程序中，应用程序通信是通过意图进行的，如果是这样，为什么我们需要 DBUS 进行蓝牙？
2.  由于 DBUS 是基于套接字构建的，因此 DBUS 是否可用作两个应用程序之间的网络 (IP) 通信介质？

如果我的理解有误，请纠正我，感谢您提供有关 DBUS 以及 Android 中蓝牙实现的更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:25:48.877

对于 Android 上的任何应用程序级编程，包括蓝牙，您无需担心 D-Bus。

您对使用 Intent 进行 Android 应用程序通信是正确的 - Intent 是 Android 应用程序开发的基础。

在幕后，Android Intents 可以使用 D-Bus 实现，但我的理解是它们不是（如果我错了，请有人纠正我）。无论哪种方式，如果您正在做系统级 Android 蓝牙开发，您只需要担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T00:08:40.083

据我了解，以前的 android 使用 bluez 进行蓝牙实现。bluez 的实现依赖于 dbus。如果你是应用开发者，大多不需要关心蓝牙的内部实现，只需要使用level api和intent即可

# c# - 将字符串解析为浮点数

> ID：10074365
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:02:06.250
> 
> 标签：c#, parsing

现在我知道使用 float.Parse 的方法，但遇到了问题。

我正在解析字符串“36.360”，但是解析后的浮点数变为 36.3600006103516。

我是否可以安全地将其四舍五入到小数点后 3 位，或者是否有更好的策略来解析字符串中的浮点数。

显然，我正在寻找解析后的浮点数为 36.360。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:04:40.597

这与解析无关，而是浮点数的固有“特征”。许多具有精确十进制表示的数字不能精确地存储为浮点数，从而导致出现这种不等式。

[维基百科](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)（网络上的许多文章）解释了这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:05:59.250

浮点数天生就容易出现舍入错误；即使是不同的 CPU 架构也会在百万分之一位及以上给出不同的数字。`==`这也是为什么在比较浮点数时 不能使用的原因......由于浮点精度错误，它们很少会评估为相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:06:46.167

浮点数的精度是有限制的。查看[此链接](https://stackoverflow.com/questions/753948/why-is-floating-point-arithmetic-in-c-sharp-imprecise)以获取更多详细信息。

如果您需要更精确的跟踪，请考虑使用类似 a`double`或`decimal`类型的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T14:08:04.997

这是由于以下事实`float`或`double`两者都以这样一种方式存储，即从内存中读取值是一个数学过程。如果您想将该值存储为实际值，则更好的选择是`decimal`.

根据[System.Decimal 上的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)：

> Decimal 值类型适用于需要大量有效整数和小数位数且无舍入错误的财务计算。Decimal 类型不会消除舍入的需要。相反，它最大限度地减少了由于四舍五入引起的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T14:08:12.707

这根本不是一个奇怪的问题，它只是你总会遇到的花车的迷人特征之一。浮点数不能准确表达那种十进制值！

因此，如果您需要结果*恰好是*36.36，请使用 a`decimal`而不是 a `float`。
否则，你可以自由地四舍五入。请注意，四舍五入也无济于事，因为四舍五入后也不会完全是 36.36。

# c - 如何创建一个为每个客户端创建一个新线程的服务器？

> ID：10074375
> 
> 赞同：-4
> 
> 时间：2012-04-09T14:02:46.147
> 
> 标签：c, sockets, client-server

我需要创建一个服务器，它为每个尝试连接到服务器的客户端创建一个新线程。为每个客户端创建的新线程管理客户端，服务器进程侦听来自端口的新连接。

我需要在 Unix C 中编写代码。这是我需要尽快完成的任务的子任务。我是这个领域的新手，因此对创建服务器知之甚少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:47:57.570

基本上，您正在寻找的是这样的：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <pthread.h>

void* handle_connection(void *arg)
{
    int client_sock = *(int*)arg;
    /* handle the connection using the socket... */
}

int main(void)
{
    /* do the necessary setup, i.e. bind() and listen()... */
    int client_sock;
    pthread_t client_threadid;
    while((client_sock = accept(server_sock, addr, addrlen)) != -1)
    {
        pthread_create(&client_threadid,NULL,handle_connection,&client_sock);
    }
} 
```

这是服务器应用程序的一个非常基本的框架，它为每个传入的客户端连接创建一个不同的线程。如果您不知道`bind`、`listen`或`accept`是什么，请查阅当地手册的第二部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:31:42.600

首先看一下[https://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)。这是关于 C 线程库的教程。享受吧！

# google-maps - 谷歌地图 API 3.0 打印友好模式

> ID：10074384
> 
> 赞同：0
> 
> 时间：2012-04-09T14:03:17.563
> 
> 标签：google-maps, printing

我使用 google map api 3.0 在我的页面中以卫星模式打印 google map。现在我可以在打印模式下打印谷歌地图的窗口。我对此一无所知！

谷歌地图加载：

```
<div id="mapdiv"></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:21:09.833

谷歌地图有什么特定的东西会影响打印风格吗？

假设不，我认为您想研究 CSS 媒体查询并定义打印模式的样式。我猜你想做一些事情，比如隐藏导航元素，也许让地图 div 更大。

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# c - Linux 守护进程 localhost 有效，但不是实际 IP

> ID：10074385
> 
> 赞同：4
> 
> 时间：2012-04-09T14:03:20.800
> 
> 标签：c, linux, sockets, service, daemon

这些天我正在学习 APUE.2e（UNIX® 环境中的高级编程，第二版），并且已经学习了第 16 章网络 IPC：套接字。当我运行程序`ruptime`（对于客户端）和`ruptimed`（对于服务器端）时，发生了一些奇怪的事情。客户端程序显示一个客户端命令，它与服务器通信以从系统`uptime`命令中获取输出，服务器程序`ruptimed`（注意“d”）接收命令，执行`uptime`命令并将输出返回`uptime`给客户端。这两个程序编译成功，我将 . 添加`ruptime 4000/tcp`到文件`/etc/service`中，这意味着服务`ruptime`绑定到 port `4000/tcp`。我在同一台机器（Ubuntu 11.04）和第`ruptimed`一个（当然）上运行了这两个程序：

```
$ ./ruptimed
$ ./ruptime 127.0.0.1
 21:35:48 up 13:06,  3 users,  load average: 0.56, 0.85, 0.94 
```

输出是我所期望的。但是，当我运行时：

```
$ ./ruptimed
$ ./ruptime 192.168.1.221
  # the terminal blocks here 
```

IP地址192.168.1.221是机器在内网的实际IP。这里有什么问题？我搜索了互联网，发现它似乎需要在`/etc/init.d/`. 然后我在目录中添加一个名为`ruptime`的`/etc/init.d/`文件。这里是：

```
#! /bin/sh

### BEGIN INIT INFO
# Provides:     ruptimed
# Required-Start:   $remote_fs $syslog
# Required-Stop:    $remote_fs $syslog
# Default-Start:    2 3 4 5
# Default-Stop:     
# Short-Description:    ruptime
### END INIT INFO
start()
{
    echo "start ruptime"
    /home/tlh1987/apue-practice/tlh-practice/ruptimed
    exit 0;
}
stop()
{
    killall ruptimed
    echo "stop ruptime"
}

case "$1" in
    start)
    start
    ;;
    stop)
    stop
    ;;
    restart)
    stop
    start
    ;;
    *)
    echo "usage: $0 start|stop|restart"
    exit 0;
esac 
```

但是，它没有用，我不知道为什么。我还设置了 ufw 启用并允许 ruptime 像这样：

```
sudo ufw allow ruptime 
```

它也没有用。`ruptime`和的源代码`ruptimed`如下：

### 连接重试（）

```
// the  functions used in the two program
// the  connect_retry() function 
#include "apue.h"
#include <sys/socket.h>

#define MAXSLEEP 128

int
connect_retry(int sockfd, const struct sockaddr *addr, socklen_t alen)
{
  int nsec;

  for (nsec = 1; nsec <= MAXSLEEP; nsec <<= 1) {
    if (connect(sockfd, addr, alen) == 0) {
      return (0);
    }
    if (nsec <= MAXSLEEP/2)
      sleep(nsec);
  }
  return (-1);
} 
```

### 初始化服务器（）

```
// the initserver function 
#include "apue.h"
#include <errno.h>
#include <sys/socket.h>

int
initserver(int type, const struct sockaddr *addr, socklen_t alen, 
       int qlen)
{
  int fd;
  int err = 0;
  if ((fd = socket(addr->sa_family, type, 0)) < 0)
    return (-1);
  if (bind(fd, addr, alen) < 0) {
    err = errno;
    goto errout;
  }
  if (type == SOCK_STREAM || type == SOCK_SEQPACKET) {
    if (listen(fd, qlen) < 0) {
      err = errno;
      goto errout;
    }
  }
  return(fd);

 errout:
  close(fd);
  errno = err;
  return (-1);
} 
```

### 客户端

```
// the client end i.e. ruptime.c
#include "apue.h"
#include <netdb.h>
#include <errno.h>
#include <sys/socket.h>

#define MAXADDRLEN 256

#define BUFLEN 128
extern int connect_retry(int, const struct sockaddr *, socklen_t);

void
print_uptime(int sockfd)
{
  int n;
  char buf[BUFLEN];

  while ((n = recv(sockfd, buf, BUFLEN, 0)) > 0)
    write(STDOUT_FILENO, buf, n);
  if (n < 0)
    err_sys("recv error");
}

int
main(int argc, char *argv[])
{
  struct addrinfo   *ailist, *aip;
  struct addrinfo    hint;
  int            sockfd, err;

  if (argc !=2 )
    err_quit("usage: ruptime hostname");
  hint.ai_flags = 0;
  hint.ai_family = 0;
  hint.ai_socktype = SOCK_STREAM;
  hint.ai_protocol = 0;
  hint.ai_addrlen = 0;
  hint.ai_canonname = NULL;
  hint.ai_addr = NULL;
  hint.ai_next = NULL;
  if ((err = getaddrinfo(argv[1], "ruptime", &hint, &ailist)) != 0)
    err_quit("getaddrinfo error: %s", gai_strerror(err));
  for (aip = ailist; aip != NULL; aip = aip->ai_next) {
    if ((sockfd = socket(aip->ai_family, SOCK_STREAM, 0)) < 0)
      err = errno;
    if (connect_retry(sockfd, aip->ai_addr, aip->ai_addrlen) < 0) {
      err = errno;
    } else {
      print_uptime(sockfd);
      exit(0);
    }
  }
  fprintf(stderr, "can't connect to %s: %s\n", argv[1], 
      strerror(err));
  exit(1);
} 
```

### 服务器端

```
//the server end i.e. ruptimed is as follows:
#include "apue.h"
#include <netdb.h>
#include <errno.h>
#include <syslog.h>
#include <sys/socket.h>

#define BUFLEN 128
#define QLEN 10

#ifndef HOST_NAME_MAX
#define HOST_NAME_MAX 256
#endif

extern int initserver(int, struct sockaddr *, socklen_t, int);

void
serve(int sockfd)
{
  int   clfd;
  FILE *fp;
  char buf[BUFLEN];

  for ( ; ; ) {
    clfd = accept(sockfd, NULL, NULL);
    if (clfd < 0) {
      syslog(LOG_ERR, "ruptimed: accept error: %s", 
         strerror(errno));
      exit(1);
    }
    if ((fp = popen("/usr/bin/uptime", "r")) == NULL) {
      sprintf(buf, "error: %s\n", strerror(errno));
      send(clfd, buf, strlen(buf), 0);
    } else {
      while (fgets(buf, BUFLEN, fp) != NULL)
    send(clfd, buf, strlen(buf), 0);
      pclose(fp);
    }
    close(clfd);
  }
}

int 
main(int argc, char *argv[])
{
  struct addrinfo   *ailist, *aip;
  struct addrinfo    hint;
  int            sockfd, err, n;
  char          *host;

  if (argc != 1)
    err_quit("usage: ruptimed");
#ifdef _SC_HOST_NAME_MAX
  n = sysconf(_SC_HOST_NAME_MAX);
  if (n < 0)
#endif 
    n = HOST_NAME_MAX;
  host = malloc(n);
  if (host == NULL)
    err_sys("malloc error");
  if (gethostname(host, n) < 0)
    err_sys("gethostname error");
  daemonize("ruptimed");
  hint.ai_flags = AI_CANONNAME;
  hint.ai_family = 0;
  hint.ai_socktype = SOCK_STREAM;
  hint.ai_protocol = 0;
  hint.ai_addrlen = 0;
  hint.ai_canonname = NULL;
  hint.ai_addr = NULL;
  hint.ai_next = NULL;
  if ((err = getaddrinfo(host, "ruptime", &hint, &ailist)) != 0) {
    syslog(LOG_ERR, "ruptimed: getaddrinfo error: %s", 
       gai_strerror(err));
    exit(1);
  }
  for (aip = ailist; aip != NULL; aip = aip->ai_next) {
    if ((sockfd = initserver(SOCK_STREAM, aip->ai_addr, 
                 aip->ai_addrlen, QLEN)) >= 0)
      serve(sockfd);
    exit(0);
  }
  exit(1);
} 
```

有没有人可以帮忙？

命令 netstat -nap 的标题行：

```
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:4000          0.0.0.0:*               LISTEN      2252/ruptimed   
tcp        0  13033 192.168.1.221:47380     91.189.89.114:443       LAST_ACK    -               
tcp       74      0 192.168.1.221:43914     91.189.89.76:443        ESTABLISHED 1846/python     
tcp        0      0 127.0.0.1:4000          127.0.0.1:56344         TIME_WAIT   -               
tcp        0      1 192.168.1.221:35442     192.168.1.89:24800      SYN_SENT    1478/synergyc   
tcp        0      0 192.168.1.221:34957     74.125.71.125:5222      ESTABLISHED 1618/chrome     
tcp        0      0 192.168.1.221:57795     203.208.46.163:443      ESTABLISHED 1618/chrome     
tcp6       0      0 :::22                   :::*                    LISTEN      - 
```

第三条记录是我的服务中断时间。有什么问题吗？我不太了解它的含义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T14:22:18.263

我不是 C 专家，但我知道一件事：你的守护进程可能只绑定到一个地址/接口，并且只接受来自它的连接。

用于`netstat -nap`检查守护程序绑定到哪个地址。

如果它正在侦听，`0.0.0.0`那么它正在接受来自每个接口的连接，包括本地主机。

如果它正在收听，`127.0.0.1`它将只接受来自 localhost。

我敢打赌它只绑定到`127.0.0.1`，这就是为什么你不能连接到任何其他地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:23:24.340

这几乎可以肯定是防火墙问题，而不是编码问题。您可能想查看[一些 ufw 文档](http://www.ubuntugeek.com/ufw-uncomplicated-firewall-for-ubuntu-hardy.html)并在 ufw 行上指定端口或 IP 地址。

# php - 让所有设置页面都指向同一个脚本以在 PHP 中应用设置是一个糟糕的模型吗？

> ID：10074386
> 
> 赞同：0
> 
> 时间：2012-04-09T14:03:24.060
> 
> 标签：php, model, settings

这个问题的措辞有点奇怪，但我想不出任何其他方式。我想知道是否有更好的模型来做到这一点。这是我现在拥有的：

假设我正在我的应用程序上编辑用户。我提交表单，然后它发布到`apply.php?ref=edituser`. 然后`apply.php`，它有一个很大的条件来确定要提交哪些设置，基于 ref 变量，此时它运行脚本的那部分。如果成功或有错误，则用于`header("Location: uedit.php")`返回上一页，同样设置`$_SESSION['err']`错误代码。该页面检查是否设置了错误代码，如果是则显示和取消设置。

我觉得我在一个脚本中可能有太多内容。对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:05:19.803

取决于你的风格。我正在处理的网站只使用 2 个主要的 php 文件。我唯一推荐的是确保你评论得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:07:03.027

是否有多个表单提交给它？

作为一般规则，表单不会提交给模型，而表单提交给 MVC 结构中的控制器。然后控制器决定它应该如何处理所有事情。但是，如果您对所有内容都进行了很好的评论并且认为这不是太多，我就不会担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:11:14.153

这种系统的缺点就像前面提到的那样，很难以逻辑方式跟踪所有代码。

另一个缺点是 php 是一种解释性语言，这意味着每次运行都需要解析整个文件。这意味着如果您将代码分成不同的文件而不是构建一个大文件，您将获得性能。但当然，如果它不是很大，那也没关系。

# java - Java JTabbedPane 允许 Tab 仅在 true 时切换到

> ID：10074387
> 
> 赞同：6
> 
> 时间：2012-04-09T14:03:26.200
> 
> 标签：java, swing, events, jtabbedpane

当用户单击选项卡时，我会执行一些验证。如果验证 == true 则允许选项卡显示（或切换到）。现在我正在使用 StateChanged 事件进行验证。问题是，当您单击选项卡时，它会显示选项卡内容，如果验证 == false 它会切换回上一个选项卡。除非验证 == true，否则我根本不希望它切换到。我该怎么做，我是否在检查错误的事件？谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:59:48.750

如果validation = false，您可以使用方法tab.setEnabledAt(index, false) 禁用选项卡，并在validation = true 时使用tab.setEnabledAt(index, true) 重新打开它。

编辑：禁用选项卡会将其变灰，因此用户无法首先单击它，这意味着您必须在用户单击选项卡之前执行验证检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:11:33.090

尝试覆盖 JTabbedPane.setSelectedIndex(int index)。

# api - 如何通过 API 从 Liferay 获取内容？

> ID：10074389
> 
> 赞同：0
> 
> 时间：2012-04-09T14:03:35.777
> 
> 标签：api, liferay, liferay-6

链接为： [http://localhost:8080/api/jsonws?signature=/journalarticle/get-article-content-4-groupId-articleId-languageId-themeDisplay](http://localhost:8080/api/jsonws?signature=/journalarticle/get-article-content-4-groupId-articleId-languageId-themeDisplay)

我尝试使用**JournalArticle**服务和**get-article-content**方法，其中参数很少：

1.  groupId（长）
2.  articleId (java.lang.String)
3.  语言标识（java.lang.String）
4.  主题显示（com.liferay.portal.theme.ThemeDisplay）

有了*groupId*、*articleId*、*languageId*就很清楚了。但我不明白要传递什么作为 themeDisplay ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:53:29.000

尝试这个：

```
ThemeDisplay themeDisplay = (ThemeDisplay) req.getAttribute(WebKeys.THEME_DISPLAY); 
```

# json - Perl 到 JSON，带有键/值对

> ID：10074393
> 
> 赞同：0
> 
> 时间：2012-04-09T14:03:59.493
> 
> 标签：json, perl

我正在尝试将一些数据从 Perl 输出到 JSON。我可以做一个简单的输出，但想更好地构造它。

我有一个带有 id、开始时间和结束时间的数组。这是我用来输出的代码：

```
print header('application/json');
my $json->{$entry} = \@array;
my $json_text = to_json($json);
print $json_text; 
```

返回：

```
{"Season":[["1","1330065300","1344038401"],["7","1298505601","1312416001"]]} 
```

但我想输出更像：

```
{"Season":0[{"id":1,"DateStart":1330065300,"DateEnd":1344038401},{"id":7,"DateStart":1298505601,"DateEnd":1312416001}]} 
```

谁能帮助我更好地构建我的输出？

- -更新 - - -

谢谢迈克尔。我试图实现你的例子。

这是目前的代码：

```
foreach my $key (keys %$seasons)
    {
        $seasons->{$key} =
        [
            map
            {
                { id=>$_[0], DateStart=>$_[1], DateEnd=>$_[2] }
            } @{$seasons->{$key}}
        ];
    } 
```

但它返回错误（参考 foreach 行）：

```
Not a HASH reference at line 148 
```

$seasons 是从 SQL fetchall_arrayref 返回的 arrayref

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:17:31.200

如果要输出带有键/值对的对象数组而不是数组数组，则首先将适当的数据放入`to_json`其中。

即hashrefs 数组而不是arrayrefs 数组。

您可以[使用`map`来转换数据](http://perldoc.perl.org/functions/map.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:38:05.930

每当您尝试这样的事情时，请始终检查 CPAN 以查看是否有人以前做过，而不是尝试重新发明轮子。我发现了一个名为[JSON](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm)的模块，它似乎完全符合您的要求。

该页面上有一个示例可以完全满足您的要求。这是一个快速的解释：

```
use JSON; # imports encode_json, decode_json, to_json and from_json.

# simple and fast interfaces (expect/generate UTF-8)
my $utf8_encoded_json_text = encode_json \@array; 
```

没有比这更容易的了。最好的部分是，无论您的数组结构变得多么复杂，这都会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T20:57:15.480

您基本上想将数组数组转换为哈希数组，您可以使用[`map`](http://perldoc.perl.org/functions/map.html). 假设`$data`是您的结构，应该这样做：

```
for my $key (keys %$data) {
    $data->{$key} = [
        map {
            { id => $_->[0], DateStart => $_->[1], DateEnd => $_->[2] }
        } @{$data->{$key}}
    ];      
} 
```

# iphone - 拍摄照片时如何在相机上添加照片？

> ID：10074395
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:04:07.977
> 
> 标签：iphone, ios, uiimagepickercontroller

我是 iphone 应用程序开发领域的新手，所以任何人都可以帮助我。现在我的问题是当我点击一个按钮然后相机会打开，但另一个问题是当相机框架出现时，相框上会出现一个图像，当我点击捕获按钮时，相框的背景和图像会一起捕捉。如果任何人有任何进一步的问题，请不要犹豫，问...

我希望我已经解释清楚，如果没有请问我。这对我来说非常紧急。

提前致谢。

示例：假设有人在应用程序中看到了戒指。现在她想看看她什么时候戴上它会是什么样子。所以当她点击戒指时，相机屏幕会打开，这个戒指会在相机屏幕的中间。现在她会把她的手放在相机下面，然后看起来戒指就在她手里。我想现在我已经解释清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:53:27.207

试试这个（灵感来自[这个问题](https://stackoverflow.com/questions/1354811/how-can-i-take-an-uiimage-and-give-it-a-black-border)）：

```
 - (UIImage*)addRing:(UIImage*)ringImage toPhoto:(UIImage*)photo;
{
  CGSize size = [photo size];
  UIGraphicsBeginImageContext(size);
  CGRect rect = CGRectMake(0, 0, size.width, size.height);
  [photo drawInRect:rect blendMode:kCGBlendModeNormal alpha:1.0];
  CGRect ringRect = <<< find suitable bounds for ring image here >>>
  [ringImage drawInRect:ringRect blendMode:kCGBlendModeNormal alpha:1.0];

  UIImage *resultingImage =  UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return resultingImage;
} 
```

# c++ - C++：限制派生类中的方法访问

> ID：10074407
> 
> 赞同：1
> 
> 时间：2012-04-09T14:04:47.847
> 
> 标签：c++, inheritance

我有一个 Message 类的对象，可以编写并随后更新。据我所知，MessageUpdate IS-A MessageWrite：

```
class MessageWrite
{
  protected:
    void setVersion(int version_) {...}
    void setReceiveTime(int tmReceive_) {...}

    Message _msg;
};

class MessageUpdate:public MessageWrite
{
    //ONLY setVersionShould be accessible here, NOT setReceiveTime
}; 
```

是否有方法访问级别和继承级别的组合可以帮助实现这一目标？

我知道 MessageUpdate 可以简单地作为基类，但有一个问题：如果我想扩展消息类，它会导致菱形图案。考虑：

```
class MessageUpdate {...};
class MessageWrite: public MessageUpdate {...};

//Now, while extending:
class AdminMessageUpdate:public MessageUpdate {...};
class AdminMessageWrite: public AdminMessageUpdate, public MessageWrite //DIAMOND Pattern!! 
```

我对继承的理解差距在哪里？在没有多重继承的情况下，有没有完全不同的方法来实现这个逻辑（如后面的代码片段所示）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:08:38.383

只需声明方法：

```
private:
void setReceiveTime(int tmReceive_); 
```

`private`在基类中使用访问说明符`MessageWrite`。

我的这个答案应该是一个很好的阅读：

**[什么是访问说明符？我应该以私有、受保护还是公共继承？](https://stackoverflow.com/a/5448004/452307)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:08:51.533

如果`MessageUpdate`is-a `MessageWrite`，那么根据定义，它可以访问所有受保护的和公共的成员。

因此，如果您不想在 中公开/受保护地公开某些成员`MessageWrite`，`MessageUpdate`那么根据[*Liskov 替换原则*](http://en.wikipedia.org/wiki/Liskov_Substitution_Principle)，`MessageUpdate`不能是`MessageWrite`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:24:22.047

`MessageWrite`由于are 的所有成员`protected`，您只需 make `setReceiveTime()` `private`inside `MessageUpdate`，因此继承自的类`MessageUpdate`将无法访问它。但是我仍然对您的设计有一些问题，例如：

您的设计如何避免使用钻石？它不会同样导致：

```
class MessageWrite {...};
class MessageUpdate: public MessageWrite {...};

//Now, while extending:
class AdminMessageWrite:public MessageWrite {...};
class AdminMessageUpdate: public AdminMessageWrite, public MessageUpdate //DIAMOND Pattern!! 
```

当您后来说它不是时，您为什么认为`MessageUpdate`IS-A （通过指定并非所有都适用于它）？如果此代码必须无效：`MessageWrite``MessageWrite`

```
MessageWrite& m = MessageUpdate();
m.setReceiveTime(); // Should this be valid? 
```

然后`MessageUpdate`IS-NOT-A `MessageWrite`。如果我的代码应该是有效的，那么没有理由避免访问`setReceiveTime()`in `MessageUpdate`。

你可能会更好地创建一个基类`AdminMessage`，然后直接从它继承以避免菱形：

```
class MessageWrite {...};
class MessageUpdate: public MessageWrite {...};

//Now, while extending:
class AdminMessage {...};
class AdminMessageWrite: public MessageWrite, public AdminMessage {...};
class AdminMessageUpdate: public MessageUpdate, public AdminMessage {...}; // No diamond 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:08:09.837

protected：继承成员可以访问。

private：继承的成员不能访问。

```
 protected:
    void setVersion(int version_) {...}
  private:
    void setReceiveTime(int tmReceive_) {...} 
```

# bash - Linux 进程：CPU 密集型程序问题 [Bash Shell]

> ID：10074410
> 
> 赞同：0
> 
> 时间：2012-04-09T14:05:00.737
> 
> 标签：bash, operating-system, process

我正在尝试了解有关 Linux 中进程的一些事情，并且我有一些问题希望您能为我解答。

我做了这个小程序来看看它是如何工作的：

```
#!/bin/bash
count=1
while [ true ]
do
  echo "Counter $count "
  count=$(( $count + 1 ))
done 
```

只是一个**无限循环**。

现在，当我执行程序并`top`在 shell 中使用命令时，该进程是消耗更多 CPU 资源的进程：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND   
4037 lola    20   0  16880 1248 1028 R   80  0.0   0:33.42 memoryleak.sh 
```

我让程序运行了一段时间，但是从来没有超过85%的CPU消耗，**这是为什么呢？**我猜这是 OP 的卫生机制，但是，如果是真的，这是要决定的参数。更重要的是，计数器仍在工作，而且，就我所见，仍然可以*无限*工作。**为什么 CPU 密集型程序不会使 CPU 崩溃？**

现在，如果我中断该过程 - 发送一个**STOP**信号 - 并做一个`ps aux`我得到：

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
lola       3896 24.4  0.0  16880  1248 pts/3    T    09:15   0:37 /bin/bash ./cpukilla.sh 
```

**为什么进程停止后，CPU消耗还是24%？**不应该是零吗？

任何援助将不胜感激。

**编辑**：好吧，对不起内存泄漏术语的“混乱”。无论如何，从技术上讲，这不会是内存泄漏，因为**计数**会消耗大量内存而不释放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:16:57.870

如果它从未超过 CPU 的 85%，那是因为操作系统有*其他*东西在调用它的资源。许多进程在多任务系统上运行，操作系统的工作就是让它们都运行良好。

事实上，在 Linux 下（对于一个），如果你的进程一直使用它的整个时间片（即不提前让出），它的优先级将被降级为“惩罚”。

CPU 密集型程序不会仅仅因为操作系统知道如何保护自己免受此类恶作剧而使操作系统*崩溃:-)*

至于 24% 的数字，我不确定。*可能*这个数字是基于程序生命周期而不是最后几秒，在这种情况下它会逐渐减少（`ps -aux`相隔十秒的一系列陈述将证实或破坏该理论，前者如果不断减少，后者如果它又跳起来了）。

手册页没有*详细*说明`%cpu`实际代表的内容，但确实说：

> CPU 使用率目前表示为在进程的整个生命周期中运行所花费的时间百分比。这并不理想，并且不符合 ps 在其他方面符合的标准。CPU 使用率加起来不太可能达到 100%。

这*可以*被解读为在一段时间内（例如，最后五分钟）而不是瞬时（最后一秒）计算的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:15:16.400

首先，这根本不会导致内存泄漏。也许您将“内存泄漏”误认为是另一个概念。内存泄漏是指您分配内存但未能释放它。在这里，您没有**直接**分配任何内存。

1.  内核为每个进程保留时间，所以没有人会“饿死”，特别是为自己，所以它可以很好地安排一切（顺便说一句，这样的脚本会导致 Windows 98 崩溃，例如，多任务处理的实现很差）。
2.  为什么CPU会崩溃？这个问题没有意义。它会*无限*工作，是的。
3.  [它没有运行](https://unix.stackexchange.com/questions/28712/among-ps-command-output-fields-cpu-isnt-the-actual-cpu-usage-of-the-process)（感谢 geekosaur）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:23:20.770

通常，内存泄漏是指将一块内存分配给程序的情况，并且（通常由于编程错误），当程序完成时，该内存永远不会被释放。实际上，这里的 bash 脚本没有内存泄漏。

操作系统将阻止进程 100% 控制 CPU。Linux 是一个抢占式多任务系统；它永远不会放弃对 CPU 的控制。调度程序确保所有需要 CPU 时间片的进程都获得一个。以下是有关 Linux 调度程序的更多信息：http: [//www.ibm.com/developerworks/linux/library/l-scheduler/](http://www.ibm.com/developerworks/linux/library/l-scheduler/)

发送 STOP 信号不会终止进程；它只会暂停它。发送一个 SIGCONT 让它继续。如果您终止它，它将从您的进程列表中删除。

# iphone - PDF 预览，如 Mail App

> ID：10074413
> 
> 赞同：0
> 
> 时间：2012-04-09T14:05:23.580
> 
> 标签：iphone, pdf

我正在寻找一种类似于在 iPad 邮件应用程序中通过邮件接收 PDF 时可用的 PDF 预览功能。它具有打印/邮件和打开方式菜单等选项。你有什么想法是苹果的自定义实现还是框架的一部分。我在 QLPreviewController 和 UIDocInteract 框架中找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:42:54.623

它的实现非常简单..您只需`NSURLRequest`将`NSURL`保存 pdf 路径的文件加载到`UIWebView`.

例如 ：

```
NSString *pdfPath = [[NSBundle mainBundle] pathForResource:@"iPadHIG" ofType:@"pdf"];
NSURL *pdfUrl = [NSURL fileURLWithPath:pdfPath];

[webView loadRequest:[NSURLRequest requestWithURL:pdfUrl]];

webView.scalesPageToFit = YES; 
```

# php - 雅虎天气API

> ID：10074414
> 
> 赞同：0
> 
> 时间：2012-04-09T14:05:24.570
> 
> 标签：php, rss, yahoo, weather

我想从雅虎的天气 API 中获取温度值。我找到了一个教程，但在教程中他得到了不同的价值。有人可以帮我修改教程，让它可以从雅虎的天气 RSS 提要中获取温度值吗？

```
<yweather:condition text="Partly Cloudy" code="30" temp="3"
                    date="Mon, 09 Apr 2012 3:48 pm EEST" /> 
```

RSS 提要：[http ://weather.yahooapis.com/forecastrss?w=566473&u=c](http://weather.yahooapis.com/forecastrss?w=566473&u=c)

我遵循的教程： http: [//css-tricks.com/using-weather-data-to-change-your-websites-apperance-through-php-and-css/](http://css-tricks.com/using-weather-data-to-change-your-websites-apperance-through-php-and-css/)

如果有人有更好的解决方案来获得价值，请不要犹豫，说出来。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:35:56.390

这似乎很简单。从教程：

> 由于我们关心的唯一信息是`yweather:condition`元素的`text`属性，因此我们将避免创建 XML 解析对象并使用简短的正则表达式。

因此，只需查看带有正则表达式的行：

> ```
> $weather_class = format_result(
>   get_match( '/<yweather:condition  text="(.*)"/isU', $data )
> ); 
> ```

这实际上是一个糟糕的正则表达式，因为它假定`text`总是第一个属性（并且总是会有那个奇怪的双空格。这是一个正则表达式，`temp`无论它落在哪里，它都会获取属性：

```
/<yweather:condition\s+(?:.*\s)?temp="(.+)"/isU 
```

用它代替给定的正则表达式`get_match()`，你应该很高兴。

哦，以免我因为不这么说而被踢掉：尝试解析任意~~HTML~~带有正则表达式的 XML[是通向疯狂的道路](https://stackoverflow.com/a/1732454/179125)。

# ios - 如何使用 Objective C 从餐厅菜单中实现餐厅订单

> ID：10074425
> 
> 赞同：-3
> 
> 时间：2012-04-09T14:06:18.757
> 
> 标签：ios, objective-c, nsarray

我制作了一个显示餐厅菜单的应用程序（在表格视图中）。我想做的是让用户将项目添加到订单中并（文本或电子邮件）将其发送到餐厅。

我只是不确定使用什么方法。当他们单击表格中的一行时，我应该创建一个数组吗？然后将该数组作为短信发送？还是有其他方法可以实现这一目标？

任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:12:19.167

您 [大概] 已经在维护一个支持 UITableView 的数组。

提交订单时，一种常用的方法是将数组转换为 JSON，然后通过 HTTP PUT 或 POST 将其提交给服务器。

从 iOS 5 开始，iOS 就内置了对 JSON 的支持。

...当然，另一端的 Web 服务器需要等待 HTTP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:00:30.327

我不知道问题是什么，但这里有几点我会考虑：

1.  我会使用 POST 来使用 Web 服务。在您的情况下，您可能需要两个：一个用于获取菜单，另一个用于提交订单。

2.  无论是 JSON、XML 还是其他信息，我都会使用对象。在您的应用程序端，您可以创建一个类，例如 order，包含两个字段，Item Id 和 Item count。所以当你提交订单时，网络服务会很简单，你只需要传递一个订单对象的 NSArray。

我有一个类似于你的应用程序，我在我们的 .Net 服务器端使用了基于 SOAP 的 Web 服务。我猜对于 JSON，它应该不会有太大的不同。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:21:16.667

您能否为菜单创建一个应用程序，以便服务员可以通过电话接单，然后将其引导到厨房接收，然后准备好食物，而无需服务员亲自将一张纸带到厨房

# redirect - php重定向在某些位置不起作用

> ID：10074427
> 
> 赞同：1
> 
> 时间：2012-04-09T14:06:40.333
> 
> 标签：redirect

我有一个不能轻易解决的奇怪问题，也不知道为什么！！我有一个文件夹，我在其中放置了一个普通的 php 重定向代码：`<? Header( "HTTP/1.1 301 Moved Permanently" ); Header( "Location: http://www.mydomain.com" ); ?>`

这很好用，但是当我将确切的文件复制到另一个不同的文件夹时，重定向不起作用。页面本身在加载后停止！

我使用了另一个代码，但仍然没有工作。

```
error_reporting(E_ALL | E_WARNING | E_NOTICE);
ini_set('display_errors', TRUE);

flush();
header("Location: http://www.website.com/");
die('should have redirected by now'); 
```

PS> 在我放置包含重定向的 index.php 的文件夹中没有任何内容。

任何的想法？？

感谢您的评论。

谢谢

**解决方案：**

我在此处“原始问题”中包含的代码完美运行，但如果包含在文件夹名称或目录名称中，php 似乎不适用于***下划线。*** `(_)`当我从目录名称中删除***下划线时，事情又恢复了。***我希望任何人都觉得这个解决方案有用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:26:18.810

我会检查您的代码中的任何空格（甚至是编码，因为某些编码将一个字符放在文件的开头）。还要确保在要`header`调用的脚本中包含的文件中没有输出。

如果您仅将其放入文件中，则以下代码不应失败：

```
<?php
header("Location: http://www.website.com/");    
exit;
?> 
```

或者，您可以使用 javasctipt：

```
<script type="text/javascript">
<!--
window.location = "http://www.website.com/";
//-->
</script> 
```

# c++ - TCP vs Enet 用于带大厅的在线纸牌游戏？

> ID：10074430
> 
> 赞同：2
> 
> 时间：2012-04-09T14:06:44.967
> 
> 标签：c++, networking, tcp, enet

我正在为 PC 开发一款在线回合制纸牌游戏。它有一个大厅，可以自动更新活动游戏列表，因此我会向许多客户发送许多更新。我将为此准备一个游戏服务器。延迟对我来说不是什么大问题，如果玩家有时必须额外等待 1/4 秒才能显示他们的卡片，我并不关心。我关心的是可靠性和稳定性。我希望能够主持许多 4 人游戏，我也允许人们观看特定的游戏。

我还需要让他们登录，并在他们断开连接时记住他们的会话，以便他们在断开连接时重新进入游戏。

我正在争论的是我是否应该使用基于 UDP 且具有可靠性的 Enet，或者使用普通的旧 TCP/IP。

我最终需要能够以 zip 文件的形式向他们发送其他创建的内容，例如额外的套牌。但为此，我确信有一个库可以帮助我从 HTTP 源获取这些。

如果有人对这两种方法或两种方法都有经验，我将不胜感激您的意见。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:18:10.720

我会坚持使用经典的 TCP，而不是某些库将正确的排序和数据包传递可靠性入侵到不是为它设计的协议中。

Enet 声称拥有 TCP 的一些好处，同时为“实时”游戏提供速度。这句话让我想到了 FPS，它根本不是你的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:44:30.487

我没有使用过 ENet，但我快速阅读了它的文档，它似乎在某些情况下很有用。

第一个问题：你需要一个可靠的数据包传递机制，还是不可靠可以？ENet 可以做到可靠，但在这一点上它有点类似于 TCP，除非你需要它的多流支持，否则我不确定它是否值得愚弄。

如果不可靠是可以的，那么接下来的问题是：你需要ENet所具备的数据包分片支持吗？如果您的数据包很小，那么我会说直接使用UDP。

我不清楚 ENet 如何使用 UDP 套接字以及它如何管理连接，所以我不清楚使用大量打开的 TCP 套接字还是打开大量的 ENet 连接会更好。

# iphone - 在矩形中垂直居中文本

> ID：10074440
> 
> 赞同：1
> 
> 时间：2012-04-09T14:07:19.243
> 
> 标签：iphone, objective-c, ios

我有以下代码在矩形中绘制垂直（和水平）居中的文本：

```
CGSize size=[self.buttonText sizeWithFont:font];
CGRect textFrame=CGRectMake(self.bounds.size.width/2-size.width/2, self.bounds.size.height/2-size.height/2, size.width, size.height);
[self.buttonText drawInRect:textFrame withFont:font]; 
```

但是，我的文本绘制的像素太高了。我的计算是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:28:22.460

你的代码看起来不错。尝试为同一矩形提供背景颜色以查看/调试正在发生的事情。

# objective-c - 将纯文本保存到文件 (Obj-C)

> ID：10074450
> 
> 赞同：0
> 
> 时间：2012-04-09T14:08:29.710
> 
> 标签：objective-c, nssavepanel

我的应用程序（适用于 Mac）生成一些 HTML……然后需要将这个 HTML 保存到 .html 文件中。我正在尝试使用这样的 NSSavePanel：

```
- (IBAction)saveFile:(id)sender{
    NSSavePanel *savePanel = [NSSavePanel savePanel];
    [savePanel setRequiredFileType:@"html"];
    [savePanel setTitle:@"Save Code to File"];
    if ([savePanel runModal] == NSOKButton) 
    {
        [[_codeStore RTFFromRange:
          NSMakeRange(0, [[_codeStore string] length])] 
         writeToURL:[savePanel URL] atomically:YES];
        NSLog(@"saved");
    }    
} 
```

我的问题是这不保存是纯文本。例如，当我在网络浏览器中打开生成的文件时，会显示 html，但是

> {\rtf1\ansi\ansicpg1252\cocoartf1157\cocoasubrtf700 {\fonttbl\f0\fswiss\fcharset0 Helvetica;} {\colortbl;\red255\green255\blue255;} \pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\ tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\f0\fs24\cf0

位于页面顶部...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:44:39.987

问题看起来是

```
 [[_codeStore RTFFromRange: NSMakeRange(0, [[_codeStore string] length])]
     writeToURL: [savePanel URL]
     atomically: YES]; 
```

您正在输出包含 HTML 的 RTF 文档。你需要

```
 [[_codeStore string] writeToURL: [savePanel URL] 
                         atomically: YES
                           encoding: NSUTF8StringEncoding
                              error: nil]; 
```

这将从您的 NSAttributedString 获取原始 NSString`_codeStore`并将其写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:47:23.280

我认为使用 rtf 编码会导致问题，因为它可以使用转义序列写入超过 8 位。您可以尝试使用简单的 nsstring 方式写入文件。

```
BOOL ok = [string writeToFile:path atomically:YES

                  encoding:NSUnicodeStringEncoding error:&error]; 
```

# python - 从字符串运行函数

> ID：10074452
> 
> 赞同：-3
> 
> 时间：2012-04-09T14:08:43.150
> 
> 标签：python, function

我需要调用一个函数，其名称在 python 中的字符串中可用，例如：

```
 [(x, y) for x in [1,2,3] for y in [3,1,4] if x != y] 
```

我需要执行上述语句，但变量计数可能会根据用户输入增加任何想法？

另一个例子 ：

```
a = "for y in range(2,20):print y" 
```

我需要将上述字符串作为 python 命令执行

实际问题是没有循环并且变量可能会增加取决于输入 somtimes 我想迭代 3 个项目，所以有时 3 个循环 4 个项目然后 4 个循环，所以如果我用变量生成字符串并且如果我可以执行它，我想出了这种方式问题可以解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:15:40.563

内置`eval`功能是您正在寻找的：

```
s = "[(x, y) for x in [1,2,3] for y in [3,1,4] if x != y]"
result = eval(s) 
```

如果你想要变量，你可以使用`locals`参数：

```
>>> eval("s.upper()",{'s':'hello'})
'HELLO' 
```

如果要执行语句而不是评估表达式，请使用`exec`：

```
>>> a = "for y in range(2,20):print y"
>>> exec a
2
3
...
19 
```

# javascript - 使用 Javascript 从函数中获取值

> ID：10074455
> 
> 赞同：0
> 
> 时间：2012-04-09T14:08:57.210
> 
> 标签：javascript, json, return

我有 2 个功能： 1 检查用户是否登录，如果他登录了 - 它需要第二个函数来获取他的用户 ID。现在我只是用警报测试它，看看我是否得到了参数。

这是第一个功能：

```
//Checking if the user is logged in or not
$(function(){
$.getJSON("inc/API.php", {command : "getUserName"},
    function(result){
        if(result==null){
            $("#divGreeting").html("Hello, guest!");
            $("#divLogin").hide();
            $("#divUserOption").hide();
            $("#divConnectOption").show();
        }
        else {
            alert(getUserID(result));
            $("#divGreeting").html("Hello, "+result+"!");
            $("#divHeader").html("Hello, "+result+"! <a href='javascript:logout()'>Logout</a>");
            $("#divUserOption").html("Hello, "+result+"! <a href='javascript:logout()'>Logout</a>");
            $("#divConnectOption").hide();
            $("#divLogin").hide();
            $("#divUserOption").fadeIn(300);
        }
    });
}); 
```

这是第二个函数，应该返回用户 ID：

```
function getUserID(){
$.getJSON("inc/API.php",
{
    command : "getUserID"
},
function(result){
    alert(result);
    return result;
});
} 
```

第`alert`一个函数的 是`undefined`，而第二个函数的 alert 确实有 userID。为什么我不能将它的值返回给第一个函数？为什么我会得到`未定义？

谢谢！`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:12:51.343

Ajax 是异步的。您不能从中返回值。

正在尝试做的类似于：

```
function foo() {
    $('button').click(function () { return 1; });
}
var not_one = foo(); 
```

在此示例中，在单击按钮之前不会返回该值（`foo`无论如何它都不是的返回值）。使用 Ajax，在 HTTP 响应到达之前不会返回该值。

您必须在回调函数中处理数据，而不是尝试返回调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:29:27.703

尝试这个：

```
//Checking if the user is logged in or not
$(function(){
$.getJSON("inc/API.php", {command : "getUserName"},
    function(result){
        if(result==null){
            $("#divGreeting").html("Hello, guest!");
            $("#divLogin").hide();
            $("#divUserOption").hide();
            $("#divConnectOption").show();
        }
        else {
            getUserID(function(result) {
                $("#divGreeting").html("Hello, "+result+"!");
                $("#divHeader").html("Hello, "+result+"! <a href='javascript:logout()'>Logout</a>");
                $("#divUserOption").html("Hello, "+result+"! <a href='javascript:logout()'>Logout</a>");
                $("#divConnectOption").hide();
                $("#divLogin").hide();
                $("#divUserOption").fadeIn(300);
            });
        }
    });
}); 
```

然后是你的 getUserID 函数：

```
function getUserID(callback){
    $.getJSON("inc/API.php",
    {
        command : "getUserID"
    },
    callback
} 
```

**编辑**

您说您需要在字符串连接上下文中使用用户名：

`"Hello "+getUserName()+"!"`

但是，如果它必须每次都发出 AJAX 请求，则这是不可能的，除非正在使用阻塞同步调用，这根本不是一个好习惯。如果在页面加载时将用户名存储在变量中，则可以只使用该变量。如果您仍想使用每次使用时都请求它的函数，则必须执行以下操作：

```
function getUserName(callback) {
    $.getJSON("inc/API.php", {command : "getUserName"}, callback);
}

getUserName(function(result){
    //do username processing here
}); 
```

# php - PHP Preg_Replace 正则表达式 BB 代码

> ID：10074457
> 
> 赞同：1
> 
> 时间：2012-04-09T14:09:03.713
> 
> 标签：php, regex, preg-replace

所以我在 PHP 中创建了这个函数来以所需的形式输出文本。这是一个简单的BB-Code系统。我已经从中剪掉了其他 BB 代码以使其更短（剪掉大约 15 个）

我的问题是最后一个 [title=blue]Test[/title]（测试数据）不起作用。它的输出完全相同。我已经尝试了 4-5 种不同版本的 REGEX 代码，但没有任何改变。

有谁知道我哪里出错或如何解决？

```
function bbcode_format($str){
$str = htmlentities($str);
$format_search =  array(
'#\[b\](.*?)\[/b\]#is',
'#\[title=(.*?)\](.*?)\[/title\]#i'
);
$format_replace = array(
'<strong>$1</strong>',
'<div class="box_header" id="$1"><center>$2</center></div>'
);
$str = preg_replace($format_search, $format_replace, $str);
$str = nl2br($str);
return $str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:28:31.450

将分隔符更改`#`为`/`. 并将“ `/[/b\]`”改为“ `\[\/b\]`”。您需要转义“/”，因为您需要它作为文字字符。

也许“ `array()`”应该使用括号：“ `array[]`”。

注意：我从这里借用了答案：[Convert BBcode to HTML using JavaScript/jQuery](https://stackoverflow.com/questions/9210680/convert-bbcode-to-html-using-javascript-jquery)

编辑：我忘记了“/”不是元字符，所以我相应地编辑了答案。

更新：我无法使其与功能一起使用，但这个工作。见评论。（我在接受的答案中使用小提琴来测试我上面链接的问题。您也可以这样做。）请注意，这是 JavaScript。您的问题中有 PHP 代码。（至少在一段时间内，我无法帮助您编写 PHP 代码。）

```
$str = 'this is a [b]bolded[/b], [title=xyz xyz]Title of something[/title]';

//doesn't work (PHP function)
//$str = htmlentities($str);

//notes: lose the single quotes
//lose the text "array" and use brackets
//don't know what "ig" means but doesn't work without them
$format_search =  [
/\[b\](.*?)\[\/b\]/ig,
/\[title=(.*?)\](.*?)\[\/title\]/ig
];

$format_replace = [
  '<strong>$1</strong>',
  '<div class="box_header" id="$1"><center>$2</center></div>'
];

// Perform the actual conversion
for (var i =0;i<$format_search.length;i++) {
  $str = $str.replace($format_search[i], $format_replace[i]);
}

//place the formatted string somewhere
document.getElementById('output_area').innerHTML=$str; 
```

​</p>

更新2：现在使用PHP...（对不起，您必须根据`$replacements`自己的喜好格式化。我只是添加了一些标签和文本来演示更改。）如果“标题”仍然存在问题，请查看您的文本类型试图格式化。我将标题“=”设为可选，`?`因此它应该可以正常工作，例如：“[title=id with one or more words]Title with id[/title]”和“[title]Title without id[/title]。不确定是否`id`允许该属性包含空格，我猜不是：[http://reference.sitepoint.com/html/core-attributes/id](http://reference.sitepoint.com/html/core-attributes/id)。

```
$str = '[title=title id]Title text[/title] No style, [b]Bold[/b], [i]emphasis[/i], no style.';

//try without this if there's trouble
$str = htmlentities($str);

//"#" works as delimiter in PHP (not sure abut JS) so no need to escape the "/" with a "\"
$patterns = array();
$patterns = array(
  '#\[b\](.*?)\[/b\]#',
  '#\[i\](.*?)\[/i\]#', //delete this row if you don't neet emphasis style
  '#\[title=?(.*?)\](.*?)\[/title\]#'
);

$replacements = array();
$replacements = array(
  '<strong>$1</strong>',
  '<em>$1</em>', // delete this row if you don't need emphasis style
  '<h1 id="$1">$2</h1>'
);

//perform the conversion
$str = preg_replace($patterns, $replacements, $str);
echo $str; 
```

# java - 在java中读取动态网页内容

> ID：10074466
> 
> 赞同：2
> 
> 时间：2012-04-09T14:10:13.260
> 
> 标签：java, javascript, jquery, webharvest

我需要帮助阅读网页的内容。目前我正在使用以下方法来阅读内容

```
BufferedReader in = new BufferedReader(new InputStreamReader(page.openStream())); 
String inputLine;
while ((inputLine = in.readLine()) != null)
{Content = Content + inputLine;} 
```

然而，这种方法存在一个问题。. 一些jsp页面中有ajax，它会随机更新网页的css类，就像Javascript代码一样，只是为了给出一个想法：

```
if (request.readyState === 4 && request.status === 200) 
{
var type = request.getResponseHeader("Content-Type");
$('.update').empty();
$('.update').append(request.responseText); //update the css class
} 
```

因此，当通过上面提到的我的 java 方法读取此页面阅读器时，我得到了

```
<div class="update"></div> 
```

虽然在屏幕上这个类有一个值。但是，现在如果我先保存页面（通过在 Firefox 中单击另存为），那么 jquery 在 CSS 类中附加的值也是可见的。有没有一种方法或方法可以让我读取值或通过保存页面来获取像 firefox 一样的值。我想使用字符串中存在的 Ajax 值读取整个网页的内容。

一方面，我读到这很困难，因为 JAvascript 由浏览器渲染和执行，所以我想知道 firefox 是否有任何可能有帮助的 api？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:18:06.427

您可能会发现以下项目很有用：

*   [HTML单元](http://htmlunit.sourceforge.net/gettingStarted.html)

这也是来自 Data Big Bang的一篇内容丰富的[博文。](http://blog.databigbang.com/web-scraping-ajax-and-javascript-sites/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:08:39.027

另请查看[PhantomJS](http://www.phantomjs.org/)。就像 Crowbar 是无头 Mozilla 浏览器一样，PhantomJS 是无头 WebKit 浏览器 - Safari 和 Google Chrome 使用的引擎。

# iphone - 如何访问iphone中的字典值数组

> ID：10074470
> 
> 赞同：0
> 
> 时间：2012-04-09T14:10:32.623
> 
> 标签：iphone

我有字典内容数组，但我无法获取字典值。下面是字典格式，字典中的“resdata”和时间戳是字典键值。所以我需要知道如何获取时间戳值。

```
 <__NSArrayM 0x89426d0>(
{
    resData =     (
                {

                timestamp = "2012-04-09 13:54:08 +0000";

               }
    );
    seqCounter = 101;
}

here is the source code
 for (int i = 0; i < [self.gluClkDetailArray count]; i++) 
        {
            NSMutableDictionary *mDict = [self.gluClkDetailArray objectAtIndex:i];
            NSDate *mDate = [[mDict objectForKey:@"resData"] objectForKey:@"timestamp"];
            NSLog(@"NSDATE-----%@", mDate);
        }

In above code the dictionary value is 0.

Thanks in advance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:59:26.650

`resData` is an array of dictionaries.

Index into the array:

```
for (NSDictionary *mDict in self.gluClkDetailArray) {
    NSArray *resData = [mDict objectForKey:@"resData"];
    NSString *timestamp = [[resData objectAtIndex:0] objectForKey:@"timestamp"];
    NSLog(@"timestamp: %@", timestamp);
} 
```

Example (with llvm 4.0):

```
NSArray *a = @[ @{ @"resData"    : @[ @{ @"timestamp" : @"2012-04-09 13:54:08 +0000" } ],
                   @"seqCounter" : @101
                 }
             ];
NSLog(@"a: %@", a);

for (NSDictionary *mDict in a) {
    NSArray *resData = [mDict objectForKey:@"resData"];
    NSString *timestamp = [[resData objectAtIndex:0] objectForKey:@"timestamp"];
    NSLog(@"timestamp: %@", timestamp);
} 
```

NSLog output:

```
a: (
        {
        resData =         (
                        {
                timestamp = "2012-04-09 13:54:08 +0000";
            }
        );
        seqCounter = 101;
    }
) 
```

> timestamp: 2012-04-09 13:54:08 +0000

# javascript - 拖动 Google Map 时使 Overlay 移动

> ID：10074476
> 
> 赞同：1
> 
> 时间：2012-04-09T14:11:02.610
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用 Google Map V3 API 并使用叠加层在地图上显示一些图像。

**问题：**当覆盖在地图上并且地图被拖动时，地图移动，但覆盖保持在地图容器中的相同位置（即它不移动）。拖动地图时，如何使叠加层与地图一起移动？

**JS代码**

```
var overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(map);
divLatLng = new google.maps.LatLng(lat, lng);
var left = overlay.getProjection().fromLatLngToContainerPixel(divLatLng).x;
var top = overlay.getProjection().fromLatLngToContainerPixel(divLatLng).y;
$('#div').css('position', 'absolute');
$('#div').css('top', top);
$('#div').css('left', left); 
```

# json - 通过 https 进行 WCF 身份验证

> ID：10074477
> 
> 赞同：1
> 
> 时间：2012-04-09T14:11:03.250
> 
> 标签：json, authentication, wcf-security, webhttpbinding

我有一个 WCF 服务，它使用 https 进行通信，使用 json 作为响应格式。我不希望任何人都可以使用我的方法，因此我将 IIS 中的身份验证从匿名和基本更改为基本。

到目前为止，浏览器正在询问用户并通过，但我收到以下错误：

> 找不到与绑定 WebHttpBinding 的终结点的方案 http 匹配的基地址。注册的基地址方案是 [https]。

我必须对我的端点进行什么更改才能使用身份验证？

我的 web.config 看起来像：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="restBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Basic" proxyCredentialType="Basic" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <services>
      <service name="ContactLibrarySecure.ContactLibraryService">
        <endpoint address="mex" binding="mexHttpsBinding" bindingConfiguration=""
          name="mex" contract="IMetadataExchange" />
        <endpoint address="rest" behaviorConfiguration="restBehavior"
          binding="webHttpBinding" bindingConfiguration="restBinding"
          name="rest" contract="ContactLibrarySecure.IContact" />
        <host>
          <baseAddresses>
            <add baseAddress="https://192.168.1.31/ContactLibrary2.0HTTPS" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="restBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:22:23.490

```
 <?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="soapBinding" maxBufferSize="2000000000" maxBufferPoolSize="2000000000"
          maxReceivedMessageSize="2000000000">
          <security mode="Transport">
            <transport clientCredentialType="Windows" proxyCredentialType="Basic" />
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </basicHttpBinding>
      <wsHttpBinding>
        <binding name="mexBinding">
          <security mode="Transport">
            <transport clientCredentialType="Windows" />
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </wsHttpBinding>
      <webHttpBinding>
        <binding name="restBinding" closeTimeout="00:10:00" sendTimeout="00:10:00"
          maxBufferSize="2000000000" maxBufferPoolSize="2000000000" maxReceivedMessageSize="2000000000">
          <security mode="Transport">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <services>
      <service name="ContactLibrarySecure.ContactLibraryService">
        <endpoint address="mex" binding="wsHttpBinding" bindingConfiguration="mexBinding"
          name="mex" contract="IMetadataExchange" />
        <endpoint address="rest" behaviorConfiguration="restBehavior"
          binding="webHttpBinding" bindingConfiguration="restBinding"
          name="rest" contract="ContactLibrarySecure.IContact" />
        <endpoint address="soap" behaviorConfiguration="soapBehavior"
          binding="basicHttpBinding" bindingConfiguration="soapBinding"
          name="soap" contract="ContactLibrarySecure.IContact" />
        <host>
          <baseAddresses>
            <add baseAddress="https://192.168.1.31/ContactLibrary2.0HTTPS" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="restBehavior">
          <webHttp />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
        <behavior name="soapBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

这个配置文件解决了我的问题。在 iis 中安装 windows 身份验证后，我从基本身份更改为 windows 身份验证。

# r - R：RQuantLib 不计算希腊语

> ID：10074480
> 
> 赞同：1
> 
> 时间：2012-04-09T14:11:25.283
> 
> 标签：r, quantlib

我正在尝试使用该`RQuantLib`包来计算某些选项的希腊语，但获取`NAs`除价格之外的所有输出值。

当我从包用户手册中复制示例时，我得到了相同的结果：

```
> AmericanOption("put", strike=100, volatility=0.4, 100, 0.02, 0.03, 0.5)
Concise summary of valuation for AmericanOption 
  value   delta   gamma    vega   theta     rho  divRho 
10.9174      NA      NA      NA      NA      NA      NA 
> AmericanOption("call", 100, 100, 0.02, 0.03, 0.5, 0.4)
Concise summary of valuation for AmericanOption 
  value   delta   gamma    vega   theta     rho  divRho 
11.3648      NA      NA      NA      NA      NA      NA 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T04:06:02.070

您所要做的就是将引擎 CrankNicolson 包括在内，如下所示：

```
# simple call with unnamed parameters, using Crank-Nicolons
AmericanOption("put", strike=100, volatility=0.4, 100, 0.02, 0.03, 0.5, engine="CrankNicolson") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:28:41.663

之前已经讨论过这一点，[例如在 r-sig-finance 邮件列表上的这个线程中](http://thread.gmane.org/gmane.comp.lang.r.finance/9397)：存根在那里是因为 QL 曾经为美式期权提供（数字）希腊字母，但多年前就停止了。

所以你必须通过改变输入来近似它们；有关详细信息，请参阅上面引用的帖子。考虑订阅 r-sig-finance。

# fpga - 在 FPGA 上测试 PCI 接口

> ID：10074481
> 
> 赞同：0
> 
> 时间：2012-04-09T14:11:30.693
> 
> 标签：fpga, hdl, intel-fpga, pci-e

我的老板给出了在 Altera 板上测试 PCI Express 的代码。该代码由几个 c 代码文件组成，其中包含读取 Bios、设置一些寄存器、写入缓冲区等指令。我目前的工作是通过运行代码来查看代码的功能。我是 FPGA 新手，我无法理解我将使用哪些工具、编译器等来为 FPGA 编译它。

由于它是 C 代码，所以我确信我不能使用与 Verilog/VHDL 相同的环境。我能否获得一些关于哪些编译器可用于编译 C 代码以测试 FPGA 的各种接口的提示？

谢谢并恭祝安康

H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:21:42.313

如果 FPGA 板只是通过标准 PCIexpress 接口连接，那么创建一个 Linux 驱动程序来简单地访问几个寄存器并不难。这甚至可能比让一些旧的基于 DOS 的驱动程序工作更容易。

几年前，我在我的硕士论文的预项目中做了一些工作——如果你有兴趣，可以在这里找到：http: [//loejer.dk/files/FORK,%20pdf.zip](http://loejer.dk/files/FORK,%20pdf.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:19:29.017

听上去的意图是把PCI-E卡连接到一台普通的带有PCI-E插槽的电脑上，然后在主机上运行测试软件，它就会通过PCI-E与板卡对话，并练习从主机上板，在主机上收集数据，等等。

这样的代码几乎肯定是非常不可移植的。您可能需要询问它适用于什么系统（或检查代码以找到提示——例如，如果它以它开头`#include <windows.h>`是相当公平的迹象表明它适用于 Windows）。

它所针对的操作系统将提供至少 80%（左右）的线索来说明要使用什么编译器——如果它是用于 Windows，那么它很有可能是为微软的编译器设计的。如果它用于 Linux，那么它用于 gcc/g++ 的可能性更大。如果它是针对 MacOS 的，它可能是针对 g++ 的，但如果它真的是新的，可能会针对 Clang。

# c# - 如何在 Windows 窗体中创建“锐利”渐变？

> ID：10074482
> 
> 赞同：2
> 
> 时间：2012-04-09T14:11:35.010
> 
> 标签：c#, winforms

我需要用黑色到白色（透明）渐变填充一个矩形。但是，我只能找到一个`GradientBrush`类，并且我找到的所有示例都显示平滑过渡，并且我想要清晰的条形。这就是我需要的：

![截屏](../Images/1a663b5b1f00fa32744ca5f7a6926a5c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:50:20.333

您需要平均开始颜色和结束颜色之间的颜色。这是一个使用此处找到的平均公式完成所有操作的例程：[Generate Color Gradient in C#](https://stackoverflow.com/a/2011839/719186)

```
private void PaintGradientBars(Graphics g, Rectangle r, 
                               Color startColor, Color endColor, int numBars) {
  int rMin = startColor.R;
  int gMin = startColor.G;
  int bMin = startColor.B;
  int rMax = endColor.R;
  int gMax = endColor.G;
  int bMax = endColor.B;
  int left = 0;

  for (int i = 0; i < numBars; i++) {
    int rAvg = rMin + (int)((rMax - rMin) * i / numBars);
    int gAvg = gMin + (int)((gMax - gMin) * i / numBars);
    int bAvg = bMin + (int)((bMax - bMin) * i / numBars);
    Color useColor = Color.FromArgb(rAvg, gAvg, bAvg);

    int width = (r.Width - left) / (numBars - i);
    using (SolidBrush br = new SolidBrush(useColor)) {
      g.FillRectangle(br, new Rectangle(left, 0, width, r.Height));
    }
    left += width;
  }
} 
```

然后你打一个简单的电话：

```
private void panel1_Paint(object sender, PaintEventArgs e) {
  PaintGradientBars(e.Graphics, panel1.ClientRectangle,
                    Color.Blue, Color.Green, 5);
} 
```

导致：

![在此处输入图像描述](../Images/74f13d4d4bdfcea325ca3d76ca002817.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:26:29.983

在这段代码中，我使用图片框，使用“k”和“i”

```
 private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        int k = 20;
        Color mycolor = new Color();
        for (int i = 0; i < 10; i++)
        {
            mycolor = Color.FromArgb(i * k, i * k, i * k);
            SolidBrush mybrash = new SolidBrush(mycolor);
            e.Graphics.FillRectangle((Brush)mybrash, 0 + i * k, 0, k, k);
        }
    } 
```

祝你好运！

# r - R：如何重新排序 ggplot2 线图中的图例键以匹配每个系列中的最终值？

> ID：10074483
> 
> 赞同：5
> 
> 时间：2012-04-09T14:11:38.147
> 
> 标签：r, ggplot2

我正在使用 ggplot2 绘制显示多种工具价格随时间变化的折线图。我已经成功地在图上获得了多条线，并添加了显示最近价格变化的值。我想要做的（但尚未实现）是重新排序图例键，使上涨最多的价格系列位于图例的顶部，其次是价格系列中上涨第二多的键和很快。

在下图中，图例按字母顺序显示键。我想做的是按照 DDD、AAA、CCC 然后 BBB 的顺序显示图例键条目，这是截至最近日期的性能顺序。我怎样才能做到这一点？

![显示图例顺序的 ggplo2 图表](../Images/cfa5e436a2b1942ad299a5daf8279d68.png)

最小的代码如下。

```
require(ggplot2)
require(scales)
require(gridExtra)
require(lubridate)
require(reshape)

# create fake price data
set.seed(123)
monthsback <- 15
date <- as.Date(paste(year(now()), month(now()),"1", sep="-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(date), by = "month", length.out = monthsback),
                      aaa = runif(monthsback, min = 600, max = 800),
                      bbb = runif(monthsback, min = 100, max = 200),
                      ccc = runif(monthsback, min = 1400, max = 2000),
                      ddd = runif(monthsback, min = 50, max = 120))

# function to calculate change
change_from_start <- function(x) {
   (x - x[1]) / x[1]
}

# for appropriate columns (i.e. not date), replace fake price data with change in price
mydf[, 2:5] <- lapply(mydf[, 2:5], function(myparam){change_from_start(myparam)})

# get most recent values and reshape
myvals <- mydf[mydf$mydate == mydf$mydate[nrow(mydf)],]
myvals <- melt(myvals, id = c('mydate'))

# plot multiple lines
p <- ggplot(data = mydf) +
    geom_line( aes(x = mydate, y = aaa, colour = "AAA"), size = 1) +
    geom_line( aes(x = mydate, y = bbb, colour = "BBB"), size = 1) +
    geom_line( aes(x = mydate, y = ccc, colour = "CCC"), size = 1) +
    geom_line( aes(x = mydate, y = ddd, colour = "DDD"), size = 1) +
    scale_colour_manual("", values = c("AAA" = "red", "BBB" = "black", "CCC" = "blue", "DDD" = "green")) +
    scale_y_continuous(label = percent_format()) +
    geom_text(data = myvals, aes(x = mydate + 30, y = value, label = sprintf("%+1.1f%%", myvals$value * 100)), size = 4, colour = "grey50") +
    opts(axis.title.y = theme_blank()) +
    opts()

# and output
print(p) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T14:25:38.653

试试这个：

```
mydf <- melt(mydf,id.var = 1)
mydf$variable <- factor(mydf$variable,levels = rev(myvals$variable[order(myvals$value)]),ordered = TRUE)

# plot multiple lines
p <- ggplot(data = mydf) +
    geom_line(aes(x = mydate,y = value,colour = variable,group = variable),size = 1) +
    scale_colour_manual("", values = c("aaa" = "red", "bbb" = "black", "ccc" = "blue", "ddd" = "green")) +
    scale_y_continuous(label = percent_format()) +
    geom_text(data = myvals, aes(x = mydate + 30, y = value, label = sprintf("%+1.1f%%", myvals$value * 100)), 
                size = 4, colour = "grey50") +
    opts(axis.title.y = theme_blank()) +
    opts()

# and output
print(p) 
```

![在此处输入图像描述](../Images/1c16119a19985c3e9bd35c3a2b37f393.png)

我融化了你的完整数据集，为你节省了几行代码来绘制代码。像往常一样，关键是确保变量是有序因子。

为了解决评论中出现的问题，您可以传递您希望出现在图例本身中的任何标签，只要您的顺序正确：

```
ggplot(data = mydf) +
    geom_line(aes(x = mydate,y = value,colour = variable,group = variable),size = 1) +
    scale_colour_manual("", values = c("aaa" = "red", "bbb" = "black", "ccc" = "blue", "ddd" = "green"),labels = c('Company D','Company A','Company C','Company B')) +
    scale_y_continuous(label = percent_format()) +
    geom_text(data = myvals, aes(x = mydate + 30, y = value, label = sprintf("%+1.1f%%", myvals$value * 100)), 
                size = 4, colour = "grey50") +
    opts(axis.title.y = theme_blank()) +
    opts() 
```

![在此处输入图像描述](../Images/8581df78b9ea3dd0e95a522e996c07bf.png)

**注意**：由于版本 0.9.2`opts`已被[替换](http://docs.ggplot2.org/current/theme.html)，`theme`例如：

```
+ theme(axis.title.y = element_blank()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-05T11:17:55.820

试试这个

*   指南（颜色=指南图例（反向=T））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T19:10:17.280

我认为有一个更简单的方法。融化数据框后，按日期值对其进行排序，并使用最后一个日期的值来创建图例。由于您按值排序，因此图例将按照与您对值排序的方式相对应的顺序显示行（最大值到最小值或最小值到最大值）。代码如下。

```
require(ggplot2)
require(scales)
require(gridExtra)
require(lubridate)
require(reshape)

# create fake price data
set.seed(123)
monthsback <- 15
date <- as.Date(paste(year(now()), month(now()),"1", sep="-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(date), by = "month", length.out = monthsback),
                      aaa = runif(monthsback, min = 600, max = 800),
                      bbb = runif(monthsback, min = 100, max = 200),
                      ccc = runif(monthsback, min = 1400, max = 2000),
                      ddd = runif(monthsback, min = 50, max = 120))

# function to calculate change
change_from_start <- function(x) {
   (x - x[1]) / x[1]
}

# for appropriate columns (i.e. not date), replace fake price data with change in price
mydf[, 2:5] <- lapply(mydf[, 2:5], function(myparam){change_from_start(myparam)})

mydf <- melt(mydf, id.var=1)

#Order by date and value.  Decreasing since want to order greatest to least
mydf <- mydf[order(mydf$mydate, mydf$value, decreasing = TRUE),]

#Create legend breaks and labels
legend_length <- length(unique(mydf$variable))
legend_breaks <- mydf$variable[1:legend_length]

#Pass order through scale_colour_discrete
ggplot(data=mydf) + geom_line(aes(x = mydate,y = value,colour = variable,group = variable),size = 1) + scale_colour_discrete(breaks=legend_breaks) 
```

# ruby - Ruby 错误：nil:NilClass 的未定义方法“[]”

> ID：10074486
> 
> 赞同：4
> 
> 时间：2012-04-09T14:11:49.740
> 
> 标签：ruby

我正在学习 Ruby，但有一个我无法理解的错误。我有一个方法，它接受一个字符串数组（行）并删除所有行，直到包含一个模式的某一行。该方法如下所示：

```
def removeHeaderLines(lines)
  pattern = "..." # Some pattern.

  # If the pattern is not there, do not drop any lines.
  prefix  = lines.take_while {|line| (not line.match(pattern))}
  if prefix.length == lines.length then
    return prefix
  end

  # The pattern is there: remove all line preceding it, as well as the line
  # containing it.
  suffix  = (lines.drop_while {|line| (not line.match(pattern))}).drop(1)
  return suffix
end 
```

这工作正常，生成的字符串（行）正确显示在我正在生成的网页上。

此外，我想删除模式后面的所有非空行。我已将方法修改如下：

```
def removeHeaderLines(lines)
  pattern = "..." # Some pattern.

  # If the pattern is not there, do not drop any lines.
  prefix  = lines.take_while {|line| (not line.match(pattern))}
  if prefix.length == lines.length then
    return prefix
  end

  # The pattern is there: remove all line preceding it, as well as the line
  # containing it.
  suffix  = (lines.drop_while {|line| (not line.match(pattern))}).drop(1)

  # Remove leading non-empty lines.
  # ADDING THIS INTRODUCES A BUG.
  body = suffix.drop_while {|line| (line != "")}
  return body
end 
```

非常令人惊讶（至少对我而言）这不起作用。在生成的网页上，我看到的不是内容，而是错误消息：Liquid error: undefined method `[]' for nil:NilClass。

我无法从这条信息中理解多少。据我了解，一些调用我的代码的代码试图访问一个非数组对象，就好像它是一个数组一样。但是我的方法的两个版本都返回一个字符串数组（变量 suffix 和 body 都设置为一个字符串数组），那么为什么会有区别呢？

所以，不幸的是，由于我对 Ruby 的了解很少，我不知道如何调试这个问题。

有人在上面的代码中看到任何错误吗？或者，是否有人对可能导致错误“nil:NilClass 的未定义方法‘[]’”有任何提示？

**编辑**

附加信息。我正在扩展我自己没有编写的代码（它来自 [Octopress](http://octopress.org)，文件 plugins/include_code.rb）。原始渲染代码如下所示：

```
def render(context)
  code_dir = (context.registers[:site].config['code_dir'].sub(/^\//,'') || 'downloads/code')
  code_path = (Pathname.new(context.registers[:site].source) + code_dir).expand_path
  file = code_path + @file

  if File.symlink?(code_path)
    return "Code directory '#{code_path}' cannot be a symlink"
  end

  unless file.file?
    return "File #{file} could not be found"
  end

  Dir.chdir(code_path) do

    ##################################
    # I have replaced the line below #
    ##################################
    code = file.read

    @filetype = file.extname.sub('.','') if @filetype.nil?
    title = @title ? "#{@title} (#{file.basename})" : file.basename
    url = "/#{code_dir}/#{@file}"
    source = "<figure class='code'><figcaption><span>#{title}</span> <a href='#{url}'>download</a></figcaption>\n"
    source += " #{highlight(code, @filetype)}</figure>"
    safe_wrap(source)
  end
end 
```

我已经更换了线路

```
code = file.read 
```

和

```
code = linesToString(removeHeaderLines(stringToLines(file.read))) 
```

其中两个缺失的方法是：

```
def stringToLines(string)
  ar = Array.new
  string.each_line {|line| ar.push(line)}

  return ar
end

def linesToString(lines)
  s = ""
  lines.each {|line| s.concat(line)}

  return s
end 
```

我希望这有帮助。

**编辑 2**

感谢 Hassan 的提示（使用 join 方法）我发现了问题！与 join 方法并行存在一个 split 方法。所以

```
"A\nB\n".split(/\n/) 
```

给

```
["A", "B"] 
```

而通过使用 each_line （就像我所做的那样），可以在每一行末尾加上 '\n' 。作为结果

```
suffix.drop_while {|line| (line != "")} 
```

删除所有行。结果是一个空字符串，显然使我正在使用的库崩溃。感谢 Hassan 提出了一个更惯用的解决方案。我现在有以下内容：

```
def removeHeaderLines(code)
  lines = code.split(/\r?\n/)
  pat   = /.../ # Some pattern.
  index = lines.index {|line| line =~ pat}
  lines = lines.drop(index + 1).drop_while {|line| line != ""} unless index.nil?

  lines.join "\n"
end 
```

它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:38:12.400

当您尝试`nil`像数组（或哈希）一样使用时会发生该异常：

```
irb(main):001:0> nil[0]
NoMethodError: undefined method `[]' for nil:NilClass
        from (irb):1
        from /home/mslade/rubygems1.9/bin/irb:12:in `<main>' 
```

或在尚未初始化时将变量用作数组（或哈希）：

```
irb(main):005:0> @b[0]
NoMethodError: undefined method `[]' for nil:NilClass
        from (irb):5
        from /home/mslade/rubygems1.9/bin/irb:12:in `<main>' 
```

查找您忽略初始化数组的位置，例如`@b = []`

如果您实际上没有使用数组，那么您调用的函数可能需要一个。从顶部开始扫描给出的 stak 转储，直到它提到您的代码行。然后调查那条线，看看你可能错过了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:26:12.273

我不知道是什么导致了异常，但是您的代码可能是这样的：

```
def remove_header_lines(lines)
  pattern = /some pat/
  index = lines.index {|lines| lines =~ pattern}

  lines = lines.drop(index+1).drop_while {|lines| line != ""} unless index.nil?

  lines.join
end 
```

# c# - Linq to XML 不知道有多少后代

> ID：10074489
> 
> 赞同：2
> 
> 时间：2012-04-09T14:12:01.423
> 
> 标签：c#, linq-to-xml

我正在查看一个如下所示的 XML 文件：

```
<test>
   <vehiclenumber>123</vehiclenumber>
   <form>
     <form_id>1</form_id>
     <datafield>
         <fieldnumber>1</fieldnumber>
         <data>
            <datawords>
               <datatext1>1234</datatext1>
               <mc2>656865</mc2>
            </datawords>
         </data>
      </datafield>
   </form>
</test> 
```

目前我有以下代码：

```
IEnumerable<XElement> elements = documentXDoc.Descendants("test");

            _fuelReceipts.AddRange(elements
                .Select(receipt => new Receipt()
                {
                    vehicle_number = receipt.Element("vehiclenumber") == null ? "" : receipt.Element("vehiclenumber").Value,
                    field = receipt.Descendants("datafield")
                    .Select(x => new Field()
                    {
                        field_number = x.Element("fieldnumber") == null ? "" : x.Element("fieldnumber").Value,
                        event_data = x.Descendants("data")
                        .Select(y => new FieldData()
                        {
                            event_data = y.Value
                        }).ToList()
                    }).ToList()
                }));
        } 
```

这里的问题是，`<data>`我不知道有多少后代将在那里或他们将被称为什么。有没有办法在不知道这些信息的情况下单独解析这些信息？现在，我会得到类似 1234656865 的东西，而实际上我想要一个对象中的 1234 和同一对象中的单独对象中的 656865。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:16:25.310

我假设 XML 后代的名称是有意义的。此代码将它们放在字典中，因为它将它们提取到 Field 对象中。

```
void Main()
{
    string input = "<test><vehiclenumber>123</vehiclenumber><form><form_id>1</form_id><datafield>";
    input += "<fieldnumber>1</fieldnumber><data><datawords>";
    input += "<datatext1>1234</datatext1><mc2>656865</mc2>";
    input += "</datawords></data></datafield></form></test>";

    XDocument documentXDoc = XDocument.Parse(input);
    IEnumerable<XElement> elements = documentXDoc.Descendants("test");

    IEnumerable<Receipt> _fuelReceipts =  elements
        .Select(receipt => new Receipt()
        {
            vehicle_number = receipt.Element("vehiclenumber") == null ? "" : receipt.Element("vehiclenumber").Value,
            field = receipt.Descendants("datafield")
            .Select(x => new Field()
            {
                field_number = x.Element("fieldnumber") == null ? "" : x.Element("fieldnumber").Value,
                event_data = x.Elements("data").Descendants()
                    .Where(d => !d.HasElements)
                    .ToDictionary(d => d.Name.LocalName, d => d.Value)
            }).ToList()
        });
}

class Receipt {
    public string vehicle_number { get; set; }
    public List<Field> field { get; set; }
}

class Field {
    public string field_number { get; set; }
    public Dictionary<string, string> event_data { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:07:06.777

将您的内部“数据”选择更改为：

```
event_data = x.Descendants("data").Descendants().Where(d => !d.HasElements).Select(y => y.Value).ToList() 
```

这将给出一个`string`包含两个元素的列表：1234 和 656865。您可以使用`String.Join()`以下方法轻松地将其连接到一个字符串：

```
event_data = String.Join(" ", x.Descendants("data").Descendants().Where(d => !d.HasElements).Select(y => y.Value).ToList()) 
```

# html - 使用 JUnit / Selenium 查找 HTML 表格单元格

> ID：10074493
> 
> 赞同：0
> 
> 时间：2012-04-09T14:12:23.377
> 
> 标签：html, testing, selenium, junit, css-selectors

我正在使用包含表格的 Selenium IDE 测试网页。我想通过 CSS 选择器验证表格单元格（行、列）中的文本。表格的 HTML 结构非常简单。这是一个表格示例，其中每一行代表一个人的不同属性：

```
<html...>
  <head>
  </head>
  <body>
    <div class="pageBody">
      <table>
        <tbody>
          <tr>
            <td></td>
            <td>AGE</td>
            <td>49</td>
          </tr>
          <tr>
            <td></td>
            <td>WEIGHT</td>
            <td>165</td>
          </tr>
... and so on 
```

在 Selenium IDE 中，我可以使用以下 CSS 选择器在包含 AGE 的表行中找到“49”：

> **（方法 1）** css=#pageBody 表 tbody tr:nth-child(1) td:nth-child(3)

但是，如果我不确定每个表的行数是否相同（如果基于每个人可用的数据动态创建表），我可以将伪选择器从 nth-child 更改为包含：

> **(方法 2)** css=#pageBody table tbody tr:contains('AGE') td:nth-child(3)

当我将这些方法导出为 JUnit 代码时，问题就来了。以下 JUnit 代码块有效：

> (使用**方法 1** )
> WebDriver.findElement (By.cssSelector ("#pageBody table tbody tr:nth-child(1) td:nth-child(3)"))

以下 JUnit 代码块失败的地方：

> (使用**方法 2** )
> WebDriver.findElement (By.cssSelector ("#pageBody table tbody tr:contains('AGE') td:nth-child(3)"))

有谁知道为什么 JUnit **APPROACH 2**无法找到完全有效且在 Selenium IDE 中运行良好的 CSS 选择器？请提出问题以进行澄清。非常感谢您对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:57:09.137

据我所知`:contains`，CSS 不支持选择器。要根据文本内容选择元素，您应该改用 XPath。

# iphone - 将 UIImageView 表单首先点击 UIControl 移动到第二个点击 UIControl

> ID：10074495
> 
> 赞同：0
> 
> 时间：2012-04-09T14:12:29.037
> 
> 标签：iphone, cocoa-touch, ios4, logic

我有 25 个 UIControls 和 10 个 UIImageView。它看起来像这样：

![在此处输入图像描述](../Images/e4fddbf1913a5f74139ae6d084b18954.png)

现在图像是 UIImageVIews，网格是 UIControls。我想要的是当用户点击图像然后点击任何网格（当然是任何空白网格）时，UIImageView 将从当前的 superView 中删除并添加为所点击的空白网格的子视图。例如，如果用户先点击 A1 网格，然后点击 B2 网格，则会发生两个动作，

1.  A1 网格中的 UIImageView 被移除，
2.  UIImageView 添加到 B2 网格

这意味着当用户点击 A1 网格处的图像，然后点击 B2 网格时，输出窗口如下所示：

![在此处输入图像描述](../Images/b3b6a24971da12acec51d66c1028b271.png)

***编辑***

因此，一次我需要跟踪两个 UIControl：
1.首先按下哪个，以及
2.第二个按下哪个。
然后从第一个 UIControl 中删除 UIImageView 并将其添加到第二个 UIControl。我试过给 UIControls 一个标签，比如，

```
//....    
A1.tag = 1;
//...
-(void)a1ViewTapped:(id)sender
{
    int i = A1.tag;
    [self switch:i];
}
//...
-(void)switch:(int)_tag
{
    //....
    UIView *view = (UIView*)[self.view viewWithTag:_tag];

    [view removeFromSuperview];
    //...
} 
```

通过这个我可以跟踪一个 UIControl，但需要跟踪其中两个。我怎样才能做到这一点，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:43:51.850

`UIControl`继承自`UIView`，因此您可以`UIControl`通过调用向您的子视图添加`addSubview:`.

您可以`UIImageView`通过`removeFromSuperview`调用`UIImageView`

编辑：

一个非常简单的实现是创建一个包含对 selected 的引用的属性`UIControl`。当属性为 nil 时，您处于选择模式。在控件内部进行修饰会将对该控件的引用放入属性中。当属性不为零时，您正在寻找一个网格控件来放置图像。

您还需要一种方法来跟踪您的 UIControl 是否有一个 UIImageView 实例作为子视图。有很多方法可以做到这一点。一种方法是子类`UIControl`化以向它添加一个指向它包含的 UIImage 的属性。另一种方法可能是简单地检查 UIControl 的子视图以查看它是否包含有问题的图像之一。另一种方法是创建一些数据结构来跟踪图像的位置。怎么做取决于你自己，最好的方法取决于你的实现细节。

只是为了讨论，假设您设置了一个`NSMutableDictionary`调用`imageMap`，它使用 UIControls 的标签作为键并将对图像的引用设置为值。然后你可以做类似的事情：

```
-(void)selectGridControl:(UIView*)view
{
    if (selectedControl == nil)  // In this case nothing is selected
    {
        selectedControl = view;
    }
    else   // In this case we are moving the image to the new view
    {
        UIImageView *selectedImage = [imageMap objectForKey:selectedControl.tag];

        if (selectedImage != nil)
        {
            [selectedImage removeFromSuperview];
            [view addSubview:selectedImage];
            [imageMap removeObjectForKey:selectedControl.tag];
            [imageMap addObject:selectedImage forKey:view.tag];
            selectedControl = nil;
         }
     } 
```

`imageMap`目标控件已有图像时的初始化和处理情况留给读者作为练习。

# ruby-on-rails - 使用地理编码器 gem for rails，我如何获得访问者的城市？

> ID：10074497
> 
> 赞同：11
> 
> 时间：2012-04-09T14:12:55.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-geocoder

[https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)

我找不到从 IP 地址显示访问者所在城市的文档？我知道如何使用 HTML5，但我想使用地理编码器的值。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-19T20:36:06.223

我花了几个小时才意识到答案很简单：

```
request.location.city 
```

[地理编码器页面](http://www.rubygeocoder.com/)有这个例子，但我认为我需要声明**请求**，但不，不需要更多。

如果您没有地理编码器，则必须安装 gem，但除此之外什么都没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T16:56:22.013

我是怎么做到的——

```
location = Geokit::Geocoders::IpGeocoder.geocode(source_ip)
city = location.city
country = location.country 
```

这里，source_ip 是一个字符串对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:33:03.893

```
# app/models/user.rb
geocoded_by :ip_address,
  :latitude => :lat, :longitude => :lon
after_validation :geocode 
```

[来自地理编码器站点](http://www.rubygeocoder.com/)的片段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T15:06:07.203

你可以用两种不同的方式来做

1）如果您可以将访问者城市/地址作为字符串获取，则地理编码器将自动将其转换为纬度和经度

```
class Message < ActiveRecord::Base
  geocoded_by :full_address
  after_validation :geocode

  def full_address
    "#{city}, Sri Lanka"
  end

end 
```

2) 否则您将不得不跟踪访问者的 ip，例如在“地理编码器”gem的[主页中](http://www.rubygeocoder.com/)

**注意：您可以使用 near by 方法，如下所示**

```
<Active Record Object List>.near(<City Name>, <distance>, :order => :distance)

Ex: @messages = @messages.near("colombo", 10, :order => :distance) 
```

[并且在railscasts](http://railscasts.com/episodes/273-geocoder)中有一个由 ryan 制作的超级大屏幕

# ruby-on-rails - Rails OCI8 防止注入

> ID：10074500
> 
> 赞同：1
> 
> 时间：2012-04-09T14:13:01.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oracle, sql-injection, oci8

我正在构建一个网络表单，我想用来自外部 oracle 数据库的数据预填充它。我们正在使用 rails OCI8 插件。

我想通过直接在查询中使用 URL 参数来确保我不会让自己被注入。

例如在控制器中：

```
 def new
    if params[:provider] && u = findByUserName(params[:provider])
        monkey = {
            :employeeEmail => u['EMAIL_ADDRESS'],
            :employeeFirst => u['FIRST_NAME'],
            :employeeLast => u['LAST_NAME'],
            :userID => u['LOGIN_ID'],
            :supervisorUserID => u['SUPERVISOR_ID'],
            :supervisorName => u['SUPERVISOR_NAME'],
            :supervisorEmail => u['SUPERVISOR_EMAIL']
        }
        @service = Service.new(monkey)
    else
        @service = Service.new
    end
  end 
```

如您所见， params[:provider] 直接传递给 OCI8 查询：

```
def findByUserName(id)
    if id
        cursor = cursor_exec("SELECT DISTINCT 
                    <QUERY INFO HERE>
            AND external_user = :id
            ORDER BY last_name, first_name", id)
        collection = cursor.fetch_hash()
        cursor.close
        logoff
        collection
    end
end 
```

Cursor_exec 函数

```
def cursor_exec(sql, *params)
  @conn = OCI8.new('user','pass','server')
  if params.length > 0
    cursor = @conn.exec(sql, *params)
  else
    cursor = @conn.exec(sql)
  end 
end 
```

OCI8 会通过绑定正确清理参数，还是有一种方法可以让我更安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:51:00.463

由于您在内部调用`OCI8#exec()`，传递给它的第二个参数将作为参数绑定到查询，您不必担心额外的转义。它应该通过`exec()`调用在内部受到保护。

[从文档：](http://ruby-oci8.rubyforge.org/en/api_OCI8.html)

> ### 执行（sql，*绑定变量）
> 
> 执行sql语句。返回值的类型取决于sql语句的类型：select; 插入、更新和删除；创建、更改和删除；和 PL/SQL。
> 
> 当指定了 bindvars 时，它们在执行前被绑定为绑定变量。

# python - 是否有 django 成语将与应用程序相关的变量存储在数据库中？

> ID：10074502
> 
> 赞同：7
> 
> 时间：2012-04-09T14:13:15.130
> 
> 标签：python, django, variables, persistence, idioms

我对 django 很陌生，并从 Drupal 转移到它。

在 Drupal 中，可以定义存储在数据库中的模块级变量（读取 django 的“应用程序”）并使用 Drupal 的“核心表”之一。成语是这样的：

```
variable_set('mymodule_variablename', $value);
variable_get('mymodule_variablename', $default_value);
variable_del('mymodule_variablename'); 
```

**这个想法是让每个模块（应用程序）实例化整个“模块表”以仅存储一个值是没有意义的，因此核心提供了一个通用的跨模块共享的值。**

就我对 django 的新手而言，django 缺乏这样的功能，但是——因为它是一种常见的模式——我想求助于 SO 社区来**检查 django 开发人员是否有一种典型/标准/惯用的方式来解决这个问题**。

（顺便说一句：该值不是我可以放入设置文件的常量。它是一个应该每天刷新的值，并且应该在每次请求时读取）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:38:39.790

有一些应用程序可以实现这一点，但我想从 disqus 推荐[django-modeldict](https://github.com/disqus/django-modeldict)，作为它的简介

> ModelDict 是一种在数据库中存储诸如设置之类的东西的非常有效的方法。整个模型被转换为字典（惰性）并存储在您的缓存中。它仅在需要时才失效（无论是在进程中还是基于 CACHE_BACKEND）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:28:05.973

非静态数据存储在模型中。如果您需要在应用程序之间共享数据或功能，我已经看到了制作共享应用程序的约定，例如“通用”。这将容纳共享模型或实用程序功能。

在我见过的 django 项目中，数据通常是特定的。您存储的数据应该在代表该数据的模型中，我宁愿有一个表示我的数据的显式模型/对象，然后是一个包含截然不同数据的通用对象。

如果您只定义 1 或 2 个每天更改的变量，也许只有像 memcached 这样的键/值存储对您有用？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-30T00:23:29.070

ModelDict 的另一个 +1。另一个潜在的类似解决方案是 Django Constance：

[https://github.com/jazzband/django-constance](https://github.com/jazzband/django-constance)

它旨在将应用程序配置参数存储在数据库中，并具有以下优点：它公开了一个很好的后端来为管理员编辑它们（具有正确的权限），处理默认值并且还具有缓存等。

**编辑：**

如果文档中不清楚（它不是），您可以设置与“Pythonic 方式”相同的设置。即设置一个值，你做

从康斯坦斯导入配置

config.variable_name = 值

# c# - 如何查看用户名和密码？

> ID：10074503
> 
> 赞同：1
> 
> 时间：2012-04-09T14:13:23.407
> 
> 标签：c#, sql-server, security

通过登录名和密码检查用户的最佳做法是什么？我知道两种方式，但无法选择最安全和正确的方式。

1.  `where login = @login and password = @password`像使用存储过程一样签入 sql

2.  首先通过登录选择用户，然后在代码中进行密码检查。（C＃）

还有什么是检查密码强度的官方标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:14:30.260

第一种方法只检查数据库端程序中的用户和密码。

修改此第一次加密并存储加密的密码在创建用户时将其存储在数据库中。

与检查用户登录相比，仅通过将加密密码作为参数传递给程序来比较此加密密码...

对于密码强度尝试使用谷歌谷歌密码强度 API [http://www.codeproject.com/KB/ajax/GooglePasswordStrength.aspx](http://www.codeproject.com/KB/ajax/GooglePasswordStrength.aspx)

# objective-c - Mac os 应用程序签名？

> ID：10074506
> 
> 赞同：0
> 
> 时间：2012-04-09T14:13:40.460
> 
> 标签：objective-c, macos, osx-mountain-lion

我想使用 Mountain Lion 的新功能通知中心。在`NSUserNotification.h`我发现行说：

```
// Use of these classes requires your application be signed. 
```

这意味着什么？我应该拥有 Apple 开发者帐户和证书吗？我在控制台应用程序中使用这样的类。

```
NSUserNotificationCenter * center = [NSUserNotificationCenter defaultUserNotificationCenter];

    NSUserNotification *notification = [[NSUserNotification alloc] init];

    notification.title = @"asdasdasdasd";
    notification.informativeText = @"text text";

    [center deliverNotification:notification]; 
```

但实际上什么也没发生。如何签署应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:15:20.923

2 秒的谷歌会带你到这里：[https ://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html)

# asp.net-mvc - 在 MVC4 WebApi 中加密请求/响应

> ID：10074507
> 
> 赞同：1
> 
> 时间：2012-04-09T14:13:41.220
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我有一个旧 api，它接收加密请求并在完成后加密响应。我正在尝试将其切换到 mvc4 webapi，并且在我点击此加密之前它一直很顺利。我需要的是一种在请求进入时解密请求的方法，以便 mvc 正确处理它。此外，一旦该过程完成，请在发送响应之前对其进行加密。我不想在每个动作中放置加密部分。

注意：主体仍然被正确格式化为单个项目，因此我会使用自己的选择器通过单个操作将其全部推送，但更喜欢更合适的休息样式实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:01:43.760

您应该能够使用 MessageHandler 执行此操作。[在WebAPIContrib](https://github.com/WebApiContrib/WebAPIContrib/tree/master/src/WebApiContrib/MessageHandlers)中有一堆如何创建 MessageHandlers 的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:15:03.410

您可以实现自己的模型绑定器

```
public class DecObjModelBinder : IModelBinder
{   

  public object BindModel(ControllerContext controllerContext, 
      ModelBindingContext bindingContext)
   {
    //make a instance of your object
    var myObj = new DecObj()

    //bind the properties from my obj

    myObj.Title= bindingContext
        .ValueProvider
        .GetValue("Title") // The Property name sent from the browser
        .ToString();

    /* then the property you want to decrypt */
    var encBody = bindingContext
        .ValueProvider
        .GetValue("EncBody") // The Property name sent from the browser
        .ToString();

    /* decryption logic here to the encBody then after assign the decrypted value to myObj*/

    return myObj;
   } 
```

然后您`ModelBinder`通过以下方式在 Application_Start 中注册 Global.asx：`ModelBinders.Binders.Add(typeof(DecObj), new DecObjModelBinder());`

# php - 更新数据库中的记录不起作用

> ID：10074510
> 
> 赞同：0
> 
> 时间：2012-04-09T14:13:51.303
> 
> 标签：php

我再次尝试研究 php mysql，似乎我尝试了一切来解决问题.. 但似乎互联网上的初学者代码没有帮助.. 我真的无法更新数据库中的记录.

```
<html>
<body>
<?php
$db = mysql_connect("localhost", "root");
mysql_select_db("dbtry",$db);
$id = isset($_GET['id']) ? $_GET['id'] : null;
$submit = isset($_POST['submit']);
if ($id) {
if ($submit) {

        $result = mysql_query("select * from employees where id = " . mysql_real_escape_string($_GET['id']) );
        $row = mysql_num_rows($result);

if ($myrow != 0) {
mysql_query ("UPDATE employees SET firstname='$first',lastname='$last',address='$address',position='$position' WHERE id = '$id'");

}

echo "Thank you! Information updated.\n";
} else {
// query the DB
$result = mysql_query("SELECT * FROM `employees` WHERE `id` = " . mysql_real_escape_string($_GET['id']), $db);

$myrow = mysql_fetch_array($result);
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']?>">
<input type=hidden name="id" value="<?php echo $myrow["id"] ?>">
First name:<input type="Text" name="first" value="<?php echo $myrow["firstname"] ?>"><br>
Last name:<input type="Text" name="last" value="<?php echo $myrow["lastname"] ?>"><br>
Address:<input type="Text" name="address" value="<?php echo $myrow["address"]
?>"><br>
Position:<input type="Text" name="position" value="<?php echo $myrow["position"]
?>"><br>
<input type="Submit" name="submit" value="Enter information">
</form>
<?php
}
} else {
// display list of employees
$result = mysql_query("SELECT * FROM employees",$db);
while ($myrow = mysql_fetch_array($result)) {
printf("<a href=\"%s?id=%s\">%s %s</a><br>\n",  $_SERVER['PHP_SELF'], $myrow["id"],
$myrow["firstname"], $myrow["lastname"]);
}
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:27:22.917

有两件事可能会导致您出现问题：首先，您尝试设置的值是尚未定义的变量。我假设您发现的初学者代码假设您启用了注册全局变量，您真的不想这样做！

第二个问题是，如果您确实启用了注册全局变量，则不会对数据进行清理，因此引号可能会使更新出错。

试试这个：

```
$first = mysql_real_escape_string( $_POST['first'] );
$last = mysql_real_escape_string( $_POST['last'] );
$address= mysql_real_escape_string( $_POST['address'] );
$position = mysql_real_escape_string( $_POST['position'] );

mysql_query ("UPDATE employees SET firstname='$first',lastname='$last',address='$address',position='$position' WHERE id = '$id'"); 
```

这至少应该让你启动并运行。我强烈建议您使用 MySQLi 库或 PHP PDO，并考虑使用准备好的语句来增加安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:00:04.487

You need to differentiate post and get. Follow the working example below. It will sort you out :D

```
<html>
<body>
<?php
$db = mysql_connect("localhost", "root","");
mysql_select_db("test",$db);

if($_SERVER['REQUEST_METHOD']=='POST')
{
    //SUBMIT FORM
    $id=isset($_POST['id'])?$_POST['id']:0;
    if ($id) {
        $result = mysql_query("select * from parameter where id = " . mysql_real_escape_string($id) );
        $rows = mysql_num_rows($result);
        if ($rows != 0) {
        mysql_query ("UPDATE parameter SET name='".$_POST['name']."',value='".$_POST['value']."' WHERE id = '".$id."'");
        echo "Thank you! Information updated.\n";
    }
    }
}

if($_SERVER['REQUEST_METHOD']=='GET')
{
    //SELECT WHERE ID=GER VAR AND DISPLAY   
    $id = isset($_GET['id']) ? $_GET['id'] :0;// 
    if ($id) {
    // query the DB
    $result = mysql_query("SELECT * FROM parameter WHERE `id` = " . mysql_real_escape_string($_GET['id']), $db);
    $myrow = mysql_fetch_array($result);
    ?>
    <form method="post" action="<?php echo $_SERVER['PHP_SELF']?>">
    <input type=hidden name="id" value="<?php echo $myrow["id"] ?>">
    First name:<input type="Text" name="name" value="<?php echo $myrow["name"] ?>"><br>
    Last name:<input type="Text" name="value" value="<?php echo $myrow["value"] ?>"><br>
    <input type="Submit" name="submit" value="Enter information">
    </form>
    <?php
    }
    else {
    // display list of employees
    $result = mysql_query("SELECT * FROM parameter",$db);
    while ($myrow = mysql_fetch_array($result)) {
    echo "<a href='".$_SERVER['PHP_SELF']."?id=".$myrow['id']."'>".$myrow['name'].": ".$myrow['value']."</a><br>";
}
}
}
?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:29:14.270

我认为问题可能在于您与数据库的连接。mysql_connect 函数的第三个参数是密码。因此：

```
$db = mysql_connect("localhost", "root"); 
```

应该：

```
$db = mysql_connect("localhost", "root", "yourPassword"); 
```

如果您发布遇到的错误类型也会有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:24:18.797

```
mysql_query("UPDATE `employees` SET `firstname`='".$first."', `lastname`='".$last."',
`address`='".$address."', `position`='".$position."' WHERE `id` = '".$id".' ; ", $db) or 
die(mysql_error()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:16:42.183

通常当我遇到这个问题时，这是因为自动提交已关闭，我忘记明确告诉连接提交。

编辑：您是否尝试过：[如何在 PHP 中实现 MySQL 的提交/回滚？](https://stackoverflow.com/questions/329622/how-can-i-implement-commit-rollback-for-mysql-in-php)? 根据您的设置，可以将 InnoDB 设置为关闭自动提交，这意味着您需要明确告诉 MySQL 在完成后提交更新。

# php - 字符串中的正则表达式额外空格不在双引号或单引号中 - PHP

> ID：10074512
> 
> 赞同：4
> 
> 时间：2012-04-09T14:14:11.523
> 
> 标签：php, regex

我想用一个空格替换额外的空格（连续空白字符的实例），只要这些额外的空格不在双引号或单引号中（或我可能想要包含的任何其他附件）。

我看到了一些类似的问题，但我在上面找不到对我的需求的直接回应。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:42:04.903

您可以分几个步骤完成。考虑以下示例：

```
$str = 'This is    a string with  "Bunch of    extra  spaces". Leave them  "untouched  !".';

$id = 0;
$buffer = array();
$str = preg_replace_callback('|".*?"|', function($m) use (&$id, &$buffer) {
    $buffer[] = $m[0];
    return '__' . $id++;
}, $str);
$str = preg_replace('|\s+|', ' ', $str);
$str = preg_replace_callback('|__(\d+)|', function($m) use ($buffer) {
    return $buffer[$m[1]];
}, $str);

echo $str; 
```

这将输出字符串：

```
This is a string with "Bunch of    extra  spaces". Leave them "untouched  !". 
```

虽然这不是最漂亮的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:31:37.453

希望你还在寻找，或者回来检查！这似乎对我有用：

```
'/\s+((["\']).*?(?=\2)\2)|\s\s+/' 
```

...并替换为` $1`

**编辑**

此外，如果您需要允许转义引号，例如`\"`or `\'`，您可以使用以下表达式：

```
 '/\s+((["\'])(\\\\\2|(?!\2).)*?(?=\2)\2)|\s\s+/' 
```

如果您想添加对括号等“平衡”引号的支持（例如`()`或`{}`） ，它会变得有点粘

**结束编辑**

如果您发现问题或想要一些解释，请告诉我！

* * *

**希望最后的编辑和警告**

*   潜在问题：如果带引号的字符串从字符串变量（或文件）的开头开始，它要么不会算作带引号的字符串（并减少任何空格），要么会丢弃整个内容，使任何内容不在引号中被视为在引号中，反之亦然 -
    *   可能解决此问题的潜在更改是使用以下匹配表达式
    *   `/(?:^|\s+)((["\'])(\\\\\2|(?!\2).)*?(?=\2)\2)|\s\s+/`
    *   这在表达式的开头替换`\s+`为`(?:^|\s+)`
    *   *如果*字符串以引号开头，这将在变量的开头添加一个空格- 只需 trim() 或删除该空格以继续
*   我似乎使用了“逐行”方法（如 sed，如果我没记错的话）来达到我的原始结果 - 如果您使用“整个文件”或“整个字符串”设置或方法，回车 -换行符似乎算作两个空白字符（无法想象为什么......），因此将任何换行符变成单个空格（除非它们在引号内并且使用“dot-matches-newline”，当然）
    *   这可以通过用您想要匹配的特定字符替换`.`和速记字符类来解决，如下所示：`\s`
    *   `/(?:^|[ \t]+)((["\'])(\\\\\2|(?!\2)[\s\S])*?(?=\2)\2)|[ \t]{2,}/`
    *   这不需要 dot-matches-newline 开关，并且只用一个空格替换多个**空格或制表符**-*而不是换行符*（当然，只有当它们没有被引用时）

* * *

**例子**

[此链接显示了在](http://codepad.viper-7.com/YhtoCb)[http://codepad.viper-7.com](http://codepad.viper-7.com)上的示例文本中使用的第一个表达式和最后一个表达式的示例

# cakephp - CakePhp 以 Json 形式发送响应并显示它

> ID：10074514
> 
> 赞同：0
> 
> 时间：2012-04-09T14:14:22.890
> 
> 标签：cakephp, jquery, cakephp-2.1

我正在尝试使用 jquery 自动完成库自动完成部门。ajax调用如下

```
 $( "#auto_complete" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url:  "/employees/getDepartment"
                dataType: "jsonp",
                //dataType: "text/html",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {
                    alert("success--");
                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.name,
                            value: item.id
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    }); 
```

我的控制器有一个名为 getDepartment 的操作如下：

```
 public function getDepartment() {
        $this->log($this->params->query['name_startsWith'] , 'debug');
        $str = $this->params->query['name_startsWith'];
        $this->log($str, 'debug');
        $name='Departmet';
        $this->layout = 'ajax';
        $departments = $this->Employee->Department->find('all', array( 'recursive' => -1,
            'conditions'=>array('Department.name LIKE'=>$str.'%'),
            'fields'=>array('name', 'id')));
        $this->set('departments',$departments);
} 
```

在这里，我需要将 $departments 作为 Json 发送。

1.  如何以 JSON 格式发送响应
2.  为什么控制器没有达到自动完成成功功能（我已经发出警报）

当我运行时，我得到响应（使用 fireBug）

```
 [{"Department":{"name":"Testing","id":"1"}},{"Department":{"name":"Testing","id":"3"}},{"Department":{"name":"Testing2","id":"6"}},{"Department":{"name":"testing","id":"7"}},{"Department":{"name":"test","id":"8"}}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:19:09.907

您的响应是有效的 JSON，因此您`dataType`也必须如此。

```
dataType: "json" 
```

# c# - windows phone 模拟器警告和配置

> ID：10074515
> 
> 赞同：2
> 
> 时间：2012-04-09T14:14:29.193
> 
> 标签：c#, visual-studio-2010, windows-phone-7

![在此处输入图像描述](../Images/b67699d851274a609e022a6ef00089eb.png)

这里发生了什么，我为 Windows Phone 安装了 Visual Studio Express。当我很高兴并即将调试我的第一个 hello-world win-phone 应用程序时。它给了我这个作为回报。

看起来图形处理单元配置有问题。但我是这方面的绝对新手，以前从未使用过 Visual Studio，请大家帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:21:14.437

您能否确认您安装了 SDK 的计算机满足以下要求？

**操作系统**

Windows 7 32 位、Windows 7 64 位、Windows Vista SP2 32 位、Windows Vista 64 位。

笔记：

不支持 Windows XP、Windows Server、Virtual PC 和 Hyper-V。

**记忆**

计算机上有 3 GB RAM 和 1.5 GB 可用 RAM。

**图形处理单元 (GPU) 仿真**

DirectX 10 或 DirectX 11 显卡，带有 WDDM 1.1 或更高版本的驱动程序，以及 DDI 10 或更高版本。有关其他信息，请参阅优化 Windows Phone 模拟器的性能。有关确定当前配置的信息，请参阅本主题中的 DirectX 配置。

**.xap 包**

Silverlight 应用程序和 XNA Framework 应用程序的 .xap 包的最大大小为 225 MB。

**笔记：**

模拟器模拟 2 GB 的闪存驱动器。由于 Windows Phone OS 7.0 设备具有更大的闪存驱动器，因此您无法在模拟器上安装与在设备上安装的应用程序一样多的应用程序。

**Silverlight 应用程序**

GPU 仿真是 Silverlight 应用程序的要求。Silverlight 应用程序可以在没有 GPU 仿真的情况下在 Windows Phone Emulator 上运行，但不支持这种情况。

**XNA 框架应用程序**

DirectX 10 或 DirectX 11 显卡，带有 WDDM 1.1 或更高版本的驱动程序，以及设备驱动程序接口 (DDI) 10 或更高版本。如果没有 GPU 仿真，XNA Framework 应用程序将无法运行。有关确定当前配置的信息，请参阅本主题中的 DirectX 配置。

**视频**

VC-1、H.264 和 AAC 编码。不支持 GPU 仿真。请参阅此表中的 GPU 仿真要求。

**Blur 和 DropShadow 等效果**

Windows Phone SDK 不支持。

**硬件辅助虚拟化**

需要支持硬件辅助虚拟化的处理器。有关其他信息，请参阅优化 Windows Phone 模拟器的性能。

**硬件键盘**

您可以将主机键盘用作硬件键盘。有关详细信息，请参阅 Windows Phone 模拟器的键盘映射。

**隔离存储**

隔离存储中的数据在模拟器运行时仍然存在，但在模拟器关闭后会丢失。

**启动器和选择器**

有关详细信息，请参阅 Windows Phone 模拟器中的启动器和选择器支持。

**多点触摸**

需要支持多点触控输入的主机。当前版本的 Windows Phone SDK 不支持使用鼠标模拟多点触控。

**加速度计，GPS**

加速度计和 GPS 可以使用模拟器进行模拟。有关更多信息，请参阅如何：测试使用加速度计的应用程序和如何：测试使用位置数据的应用程序。

**照相机、指南针和陀螺仪**

目前不支持。

取自[MSDN - 设置和系统要求](http://msdn.microsoft.com/en-us/library/ff626524%28v=VS.92%29.aspx)

# c - 为什么编译器抱怨这个宏声明

> ID：10074520
> 
> 赞同：13
> 
> 时间：2012-04-09T14:14:31.253
> 
> 标签：c, debugging, c-preprocessor

为了调试方便，我编写了以下宏，

```
1 #ifndef DEF_H
2 #define DEF_H
3 #define DEBUG_MODE
4 #define DEBUG_INFO(message)     \
5         #ifdef DEBUG_MODE       \
6                 cout << message << endl; \
7         #endif                          \
8 #endif 
```

但 gcc 抱怨如下

```
def.h:4: error: '#' is not followed by a macro parameter
def.h:1: error: unterminated #ifndef 
```

这段代码有什么问题？我在这里错过了一些重要的点吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-09T14:16:10.797

`#ifdef`宏定义中不能有s。你需要把它翻过来：

```
#ifdef DEBUG_MODE
#define DEBUG_INFO(message) cout << (message) << endl
#else
#define DEBUG_INFO(message)
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T14:20:14.180

您不能将预处理器指令嵌入另一个预处理器指令（`#ifdef DEBUG_MODE`在 的定义中`DEBUG_INFO`）。相反，做类似的事情

```
#ifdef DEBUG_MODE
# define DEBUG_INFO(message) cout << message << endl
#else
# define DEBUG_INFO(message) 0
#endif 
```

（这仍然不理想；防御性宏编码建议类似

```
#ifdef DEBUG_MODE
# define DEBUG_INFO(message) do {cout << message << endl;} while (0)
#else
# define DEBUG_INFO(message) 0
#endif 
```

也许一个`inline`函数会更好。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:53:52.093

我猜如果你在第 7 行吃了 '\'，那么这段代码就可以工作了。

# r - R 告诉我“找不到对象‘火车’”

> ID：10074522
> 
> 赞同：0
> 
> 时间：2012-04-09T14:14:41.563
> 
> 标签：r, function, regression

在我的自定义功能中，我遇到了一个奇怪的问题。

我正在编写一个函数来使用逻辑和 clogit（生存）回归进行交叉验证。因此我需要生成一个训练集和测试集。我已经标记了要执行的部分。

我需要比较经典逻辑回归和条件逻辑回归。所以我使用“if”语句来区分这两个函数。

**这就是问题所在。**似乎glm函数可以找到训练向量并且做得很好，但是clogit找不到它！即使训练向量输出正确。

当我从我的函数 gcv 中测试每一行时，clogit 再次工作。有人能告诉我为什么clogit不能和火车一起工作吗？

我将此函数称为：

```
gcv(as.numeric(FNDX)~HIGD+DEG+CHK+AGP1+AGMN+NLV+LIV+WT+AGLP+MST+strata(STR),bbdm,method="clogit") 
```

错误信息是

> ```
> Error in `[.data.frame`(bbdm, train, ) : object 'train' not found 
> ```

*您需要 traceback() 信息吗？*

数据集是http://www.umass.edu/statdata/statdata/stat-logistic.html[中的](http://www.umass.edu/statdata/statdata/stat-logistic.html)**bbdm13**。原始数据中有NA，或者使用代码后的示例:)

**相关代码如下：**

```
gcv<-function(formula,data=NULL,method="rpart",cross=5,times=10,k=7,layer=5,seed=0)
{

    set=data;
n=nrow(set);
set.seed(as.vector(Sys.time()));
bb1=1:n;
bb2=rep(1:cross,ceiling(n/cross))[1:n];
bb2=sample(bb2,n);
samp=sample(c(1:n),size=n);
m=ceiling(n/cross);
smp<-mat.or.vec(cross,m);
j=rep(0,cross)
for (i in 1:n)
{
    smp[bb2[i],j[bb2[i]]]=i
    j[bb2[i]]=j[bb2[i]]+1
}
# Here we separate the original set into 5(variable cross)sets,
    # each time we take one out and treat it as the testing set

mf <- match.call(expand.dots = FALSE)
m <- match(c("formula","data"), names(mf), 0L)
mf <- mf[c(1L, m)]
mf$drop.unused.levels <- TRUE
mf[[1L]] <- as.name("model.frame")
mf <- eval(mf, parent.frame())
response<-model.response(mf)
#code copied from function.lm

reslvl<-length(levels(response))
tra<-mat.or.vec(reslvl,reslvl);
tes<-mat.or.vec(reslvl,reslvl);

for (i in 1:cross)
{
    test<-smp[i,];
    train<-setdiff(1:200,test);
    show(train); #THe 'train' set can be shown here. 

    #some "if" and "else"statements are hidden 

    if (method=="logistic")#logistic is running well
    {
        bb.log<-step(glm(formula,set,family=binomial),trace=FALSE)
        tra<-tra+as.vector(t(table(response[train], 
                                       bin(predict.glm(bb.log,set[train,],type="response")))))
        tes<-tes+as.vector(t(table(response[test], 
                                        bin(predict.glm(bb.log,set[test,],type="response")))))
    }
    else if (method=="clogit")#clogit is meeting a problem.
    {
        library("survival")
        bb.clog<-step(clogit(formula,bbdm[train,]),trace=FALSE)
        tra<-tra+as.vector(t(table( response[train], 
                                                bin(predict(bb.clog,set[train,])))))
        tes<-tes+as.vector(t(table( response[test], 
                                                bin(predict(bb.clog,set[test,])))))
    }
}
tra<-tra/cross;
tes<-tes/cross;
trainrate=1-sum(diag(tra))/sum(tra)
testrate=1-sum(diag(tes))/sum(tes)
result<-list(Train=tra,TrainRate=trainrate,Test=tes,TestRate=testrate)
result
} 
```

样本数据：

```
 STR OBS AGMT FNDX HIGD DEG CHK AGP1 AGMN NLV LIV  WT AGLP MST
1    1   1   39    1    9   0   1   23   13   0   5 118   39   1
2    1   2   39    0   10   0   2   16   11   1   3 175   39   3
3    1   3   39    0   11   0   2   20   12   1   3 135   39   2
4    1   4   39    0   12   1   1   21   11   0   3 125   40   1
5    2   1   38    1   14   2   1   24   14   1   3 118   39   1
6    2   2   38    0   12   1   2   20   15   0   2 183   38   1
7    2   3   38    0    9   0   2   19   11   0   5 218   38   1
8    2   4   38    0   13   1   1   23   13   0   2 192   37   1
9    3   1   38    1    9   0   1   22   15   2   2 125   38   1
10   3   2   38    0   10   0   2   20   14   0   2 123   38   1
11   3   3   38    0   15   1   1   19   13   3   2 140   37   1
12   3   4   38    0   12   1   1   18   13   0   2 160   38   1
13   4   1   38    1   15   1   1   24   14   2   3 150   38   5
14   4   2   38    0   15   2   1   26   13   1   1 130   38   2
15   4   3   38    0   12   1   2   23   14   0   4 140   38   1
16   4   4   38    0   12   1   1   25   16   0   2 130   38   1
17   5   1   38    1   12   1   1   21   17   0   2 150   38   2
18   5   2   38    0   12   1   2   20   12   1   2 148   38   1
19   5   3   38    0   14   2   1   22   13   0   2 134   39   1
20   5   4   38    0   13   1   1   16   14   0   6 138   38   4
21   6   1   38    1   13   1   1   24   12   1   3 116   39   1
22   6   2   38    0   12   1   2   19   12   0   2 145   35   2
23   6   3   38    0   14   2   2   21   10   4   3 195   35   1
24   6   4   38    0   14   4   1   25    8   0   1 180   38   2
25   7   1   37    1   17   4   1   26   13   1   4 137   37   5
26   7   2   37    0   15   2   1   20   11   2   2 135   37   2
27   7   3   37    0    9   0   1   18   10   2   3 155   37   1
28   7   4   37    0   12   1   2   22   13   2   2 120   38   1
29   8   1   36    1   12   1   1   23   14   0   2 126   36   2
30   8   2   36    0   10   0   1   20   12   1   2 191   36   1
31   8   3   36    0   10   0   2   17   10   1   3 185   37   1
32   8   4   36    0   12   1   2   23   12   0   2 119   37   1
33   9   1   35    1   12   1   1   23   14   0   3 129   36   1
34   9   2   35    0   14   1   2   21   11   0   3 170   34   2
35   9   3   36    0   12   1   1   22   14   0   4 110   36   1
36   9   4   35    0   14   2   2   24   11   0   2 155   35   1
37  10   1   35    1   12   1   2   21   12   0   2 105   29   1
38  10   2   36    0   17   3   1   26   13   1   2 115   36   1
39  10   3   36    0   12   1   2   22   12   2   3 120   36   1
40  10   4   36    0   12   1   1   33   16   0   1 150   36   1 
```

结构：

```
structure(list(STR = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 
6L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 10L, 10L, 
10L, 10L, 11L, 11L, 11L, 11L, 12L, 12L, 12L, 12L, 13L, 13L, 13L, 
13L, 14L, 14L, 14L, 14L, 15L, 15L, 15L, 15L, 16L, 16L, 16L, 16L, 
17L, 17L, 17L, 17L, 18L, 18L, 18L, 18L, 19L, 19L, 19L, 19L, 20L, 
20L, 20L, 20L, 21L, 21L, 21L, 21L, 22L, 22L, 22L, 22L, 23L, 23L, 
23L, 23L, 24L, 24L, 24L, 24L, 25L, 25L, 25L, 25L, 26L, 26L, 26L, 
26L, 27L, 27L, 27L, 27L, 28L, 28L, 28L, 28L, 29L, 29L, 29L, 29L, 
30L, 30L, 30L, 30L, 31L, 31L, 31L, 31L, 32L, 32L, 32L, 32L, 33L, 
33L, 33L, 33L, 34L, 34L, 34L, 34L, 35L, 35L, 35L, 35L, 36L, 36L, 
36L, 36L, 37L, 37L, 37L, 37L, 38L, 38L, 38L, 38L, 39L, 39L, 39L, 
39L, 40L, 40L, 40L, 40L, 41L, 41L, 41L, 41L, 42L, 42L, 42L, 42L, 
43L, 43L, 43L, 43L, 44L, 44L, 44L, 44L, 45L, 45L, 45L, 45L, 46L, 
46L, 46L, 46L, 47L, 47L, 47L, 47L, 48L, 48L, 48L, 48L, 49L, 49L, 
49L, 49L, 50L, 50L, 50L, 50L), .Label = c("1", "2", "3", "4", 
"5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", 
"16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", 
"27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", 
"38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", 
"49", "50"), class = "factor"), OBS = structure(c(1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L), .Label = c("1", "2", "3", "4"), class = "factor"), 
AGMT = c(39L, 39L, 39L, 39L, 38L, 38L, 38L, 38L, 38L, 38L, 
38L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 
38L, 38L, 37L, 37L, 37L, 37L, 36L, 36L, 36L, 36L, 35L, 35L, 
36L, 35L, 35L, 36L, 36L, 36L, 35L, 35L, 35L, 35L, 34L, 35L, 
34L, 34L, 33L, 33L, 32L, 33L, 33L, 33L, 33L, 33L, 32L, 32L, 
32L, 32L, 31L, 30L, 31L, 31L, 68L, 68L, 68L, 68L, 64L, 64L, 
64L, 64L, 63L, 63L, 63L, 63L, 62L, 62L, 62L, 62L, 61L, 61L, 
61L, 61L, 61L, 62L, 62L, 61L, 61L, 62L, 61L, 61L, 61L, 61L, 
61L, 61L, 60L, 60L, 60L, 60L, 58L, 58L, 58L, 58L, 55L, 55L, 
55L, 55L, 55L, 55L, 55L, 55L, 52L, 52L, 52L, 52L, 52L, 52L, 
52L, 52L, 51L, 51L, 51L, 51L, 49L, 49L, 49L, 49L, 48L, 48L, 
48L, 48L, 47L, 47L, 47L, 47L, 47L, 47L, 47L, 47L, 46L, 46L, 
46L, 46L, 46L, 46L, 46L, 46L, 45L, 45L, 45L, 45L, 45L, 45L, 
45L, 45L, 45L, 45L, 45L, 45L, 45L, 45L, 45L, 45L, 44L, 44L, 
44L, 44L, 44L, 44L, 44L, 44L, 43L, 43L, 43L, 43L, 28L, 27L, 
28L, 28L, 53L, 53L, 53L, 53L, 56L, 56L, 56L, 56L, 41L, 41L, 
41L, 41L, 41L, 41L, 40L, 41L, 41L, 42L, 41L, 41L), FNDX = structure(c(2L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 
1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L), .Label = c("0", "1"), class = "factor"), 
HIGD = c(9L, 10L, 11L, 12L, 14L, 12L, 9L, 13L, 9L, 10L, 15L, 
12L, 15L, 15L, 12L, 12L, 12L, 12L, 14L, 13L, 13L, 12L, 14L, 
14L, 17L, 15L, 9L, 12L, 12L, 10L, 10L, 12L, 12L, 14L, 12L, 
14L, 12L, 17L, 12L, 12L, 20L, 10L, 12L, 14L, 12L, 18L, 12L, 
12L, 20L, 15L, 12L, 14L, 18L, 12L, 13L, 18L, 12L, 12L, 15L, 
12L, 17L, 10L, 13L, 13L, 14L, 8L, 16L, 12L, 12L, 20L, 13L, 
12L, 10L, 12L, 5L, 12L, 12L, 12L, 16L, 10L, 8L, 13L, 8L, 
16L, 11L, 9L, 15L, 14L, 12L, 18L, 6L, 12L, 10L, 8L, 12L, 
8L, 13L, 12L, 11L, 13L, 12L, 12L, 13L, 12L, 14L, 12L, 12L, 
11L, 12L, 12L, 12L, 10L, 12L, 14L, 8L, 12L, 12L, 14L, 9L, 
12L, 7L, 16L, 15L, 15L, 20L, 12L, 12L, 14L, 17L, 12L, 12L, 
12L, 17L, 15L, 12L, 10L, 12L, 10L, 11L, 17L, 10L, 12L, 14L, 
8L, 12L, 12L, 12L, 11L, 12L, 12L, 8L, 13L, 12L, 12L, 12L, 
19L, 12L, 12L, 13L, 12L, 17L, 12L, 16L, 14L, 16L, 18L, 12L, 
12L, 12L, 12L, 12L, 12L, 16L, 16L, 12L, 12L, 16L, 11L, 12L, 
12L, 16L, 12L, 12L, 11L, 12L, 12L, 16L, 12L, 12L, 12L, 12L, 
16L, 10L, 11L, 15L, 12L, 14L, 10L, 15L, 13L), DEG = structure(c(1L, 
1L, 1L, 2L, 3L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 2L, 3L, 2L, 2L, 
2L, 2L, 3L, 2L, 2L, 2L, 3L, 5L, 5L, 3L, 1L, 2L, 2L, 1L, 1L, 
2L, 2L, 2L, 2L, 3L, 2L, 4L, 2L, 2L, 5L, 1L, 2L, 2L, 2L, 5L, 
2L, 2L, 5L, 2L, 2L, 3L, 5L, 2L, 2L, 5L, 2L, 2L, 2L, 2L, 4L, 
1L, 2L, 2L, 3L, 1L, 4L, 2L, 2L, 5L, 2L, 2L, 1L, 2L, 1L, 2L, 
2L, 2L, 4L, 1L, 1L, 2L, 1L, 4L, 1L, 1L, 3L, 2L, 2L, 5L, 1L, 
2L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 3L, 2L, 2L, 3L, 2L, 3L, 2L, 
2L, 1L, 2L, 2L, 2L, 1L, 2L, 3L, 1L, 2L, 2L, 3L, 1L, 2L, 1L, 
4L, 3L, 3L, 5L, 2L, 2L, 3L, 5L, 2L, 2L, 2L, 5L, 2L, 2L, 1L, 
2L, 1L, 1L, 4L, 1L, 2L, 3L, 1L, 2L, 2L, 2L, 1L, 2L, 2L, 1L, 
2L, 2L, 2L, 2L, 5L, 2L, 2L, 2L, 2L, 5L, 2L, 4L, 2L, 4L, 5L, 
2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 4L, 1L, 2L, 2L, 4L, 
2L, 2L, 1L, 2L, 2L, 4L, 2L, 2L, 2L, 2L, 4L, 1L, 1L, 2L, 2L, 
2L, 1L, 2L, 2L), .Label = c("0", "1", "2", "3", "4"), class = "factor"), 
CHK = structure(c(1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 
1L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 
2L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 
2L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 
1L, 2L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 
1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 
2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 2L), .Label = c("1", 
"2"), class = "factor"), AGP1 = c(23, 16, 20, 21, 24, 20, 
19, 23, 22, 20, 19, 18, 24, 26, 23, 25, 21, 20, 22, 16, 24, 
19, 21, 25, 26, 20, 18, 22, 23, 20, 17, 23, 23, 21, 22, 24, 
21, 26, 22, 33, 26, 18, 19, 21, 25, 27, 20, 25, 26, 21, 24, 
25, 28, 21, 20, 21, 30, 25, 20, 23, 30, 21, 23, 24, 22, 34, 
23, 19, 30, 28, 26, 25, 21, 24, 24, 24, 26, 26, 32, 22, 28, 
26, 28, 27, 22, 30, 25, 26, 26, 33, 25, 29, 21, 18, 22, 23, 
28, 25, 24, 33, 20, 25, 24, 24, 30, 30, 30, 24, 24, 23, 16, 
26, 24, 28, 20, 25, 23, 21, 23, 20, 24, 24, 22, 24, 25, 25, 
24, 25, 22, 22, 23, 19, 26, 20, 24, 22, 19, 23, 23, 21, 27, 
19, 26, 15, 27, 23, 22, 17, 33, 25, 20, 22, 24, 23, 20, 30, 
18, 22, 30, 22, 25, 23, 23, 23, 25, 27, 27, 25, 24, 22, 23, 
18, 27, 31, 14, 20, 29, 22, 20, 23, 29, 28, 23, 26, 21, 27, 
26, 25, 25, 20, 21, 22, 40, 21, 21, 26, 34, 21, 30, 21), 
AGMN = c(13L, 11L, 12L, 11L, 14L, 15L, 11L, 13L, 15L, 14L, 
13L, 13L, 14L, 13L, 14L, 16L, 17L, 12L, 13L, 14L, 12L, 12L, 
10L, 8L, 13L, 11L, 10L, 13L, 14L, 12L, 10L, 12L, 14L, 11L, 
14L, 11L, 12L, 13L, 12L, 16L, 11L, 13L, 11L, 12L, 10L, 13L, 
11L, 16L, 14L, 11L, 12L, 12L, 14L, 12L, 13L, 13L, 13L, 11L, 
9L, 16L, 14L, 14L, 11L, 13L, 12L, 14L, 13L, 12L, 14L, 14L, 
11L, 10L, 15L, 12L, 14L, 11L, 16L, 15L, 12L, 12L, 14L, 13L, 
15L, 14L, 16L, 11L, 15L, 13L, 17L, 11L, 13L, 13L, 15L, 13L, 
17L, 15L, 17L, 11L, 13L, 15L, 12L, 16L, 12L, 10L, 16L, 13L, 
12L, 14L, 14L, 14L, 12L, 15L, 12L, 12L, 14L, 13L, 14L, 12L, 
11L, 11L, 16L, 12L, 13L, 13L, 14L, 12L, 13L, 13L, 11L, 11L, 
12L, 11L, 14L, 12L, 14L, 13L, 12L, 15L, 13L, 12L, 15L, 11L, 
13L, 13L, 12L, 12L, 11L, 13L, 14L, 13L, 11L, 11L, 12L, 11L, 
12L, 12L, 15L, 17L, 13L, 10L, 16L, 12L, 13L, 12L, 12L, 13L, 
14L, 13L, 15L, 15L, 12L, 17L, 15L, 12L, 12L, 14L, 12L, 12L, 
11L, 16L, 12L, 11L, 12L, 11L, 17L, 11L, 13L, 12L, 16L, 13L, 
14L, 12L, 15L, 16L, 12L, 14L, 13L, 13L, 12L, 12L), NLV = c(0, 
1, 1, 0, 1, 0, 0, 0, 2, 0, 3, 0, 2, 1, 0, 0, 0, 1, 0, 0, 
1, 0, 4, 0, 1, 2, 2, 2, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 2, 
0, 0, 2, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 
1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 
0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 2, 2, 1, 0, 2, 
0, 0, 0, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 
0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 4, 0, 0, 0, 0, 1, 1, 0, 1, 
0, 0, 0, 4, 1, 0, 0, 1, 3, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 
0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 1, 0, 
0, 0, 0, 0, 2, 1, 1, 1, 0), LIV = c(5, 3, 3, 3, 3, 2, 5, 
2, 2, 2, 2, 2, 3, 1, 4, 2, 2, 2, 2, 6, 3, 2, 3, 1, 4, 2, 
3, 2, 2, 2, 3, 2, 3, 3, 4, 2, 2, 2, 3, 1, 4, 2, 3, 2, 1, 
4, 3, 1, 4, 1, 2, 2, 5, 2, 2, 1, 1, 2, 2, 2, 0, 3, 2, 3, 
3, 3, 3, 7, 3, 3, 5, 2, 5, 2, 3, 3, 3, 2, 2, 3, 3, 1, 3, 
2, 4, 1, 4, 3, 2, 1, 3, 2, 3, 5, 2, 3, 2, 2, 2, 3, 5, 3, 
3, 0, 2, 2, 2, 6, 4, 3, 3, 4, 2, 2, 6, 3, 3, 3, 2, 5, 5, 
4, 2, 5, 4, 2, 3, 3, 3, 1, 2, 0, 4, 5, 2, 3, 1, 3, 2, 5, 
11, 3, 7, 1, 4, 4, 6, 3, 2, 1, 1, 3, 3, 2, 1, 3, 4, 2, 2, 
5, 4, 3, 3, 4, 3, 3, 1, 2, 1, 1, 5, 7, 2, 1, 2, 6, 3, 1, 
2, 2, 4, 3, 4, 1, 6, 4, 4, 2, 3, 4, 5, 4, 1, 3, 4, 3, 2, 
2, 2, 2), WT = c(118L, 175L, 135L, 125L, 118L, 183L, 218L, 
192L, 125L, 123L, 140L, 160L, 150L, 130L, 140L, 130L, 150L, 
148L, 134L, 138L, 116L, 145L, 195L, 180L, 137L, 135L, 155L, 
120L, 126L, 191L, 185L, 119L, 129L, 170L, 110L, 155L, 105L, 
115L, 120L, 150L, 135L, 110L, 170L, 145L, 170L, 140L, 240L, 
100L, 92L, 160L, 155L, 132L, 110L, 145L, 155L, 110L, 129L, 
131L, 218L, 115L, 110L, 130L, 97L, 120L, 130L, 150L, 123L, 
145L, 135L, 132L, 205L, 127L, 120L, 145L, 175L, 144L, 123L, 
170L, 134L, 155L, 125L, 140L, 120L, 134L, 150L, 117L, 147L, 
124L, 129L, 170L, 153L, 130L, 145L, 140L, 155L, 116L, 115L, 
175L, 179L, 119L, 153L, 185L, 280L, 140L, 126L, 193L, 140L, 
116L, 140L, 138L, 175L, 155L, 125L, 113L, 110L, 190L, 114L, 
126L, 159L, 170L, 156L, 161L, 150L, 115L, 95L, 235L, 145L, 
123L, 145L, 155L, 115L, 190L, 120L, 110L, 148L, 120L, 132L, 
115L, 125L, 120L, 155L, 170L, 180L, 179L, 137L, 107L, 144L, 
189L, 80L, 142L, 150L, 154L, 90L, 150L, 102L, 110L, 101L, 
109L, 210L, 198L, 124L, 133L, 120L, 165L, 130L, 240L, 125L, 
183L, 130L, 105L, 123L, 180L, 130L, 104L, 158L, 160L, 108L, 
127L, 145L, 127L, 132L, 140L, 178L, 130L, 130L, 265L, 195L, 
125L, 105L, 161L, 135L, 185L, 115L, 140L, 145L, 195L, 138L, 
118L, 129L, 180L), AGLP = c(39L, 39L, 39L, 40L, 39L, 38L, 
38L, 37L, 38L, 38L, 37L, 38L, 38L, 38L, 38L, 38L, 38L, 38L, 
39L, 38L, 39L, 35L, 35L, 38L, 37L, 37L, 37L, 38L, 36L, 36L, 
37L, 37L, 36L, 34L, 36L, 35L, 29L, 36L, 36L, 36L, 35L, 35L, 
36L, 36L, 34L, 35L, 34L, 35L, 33L, 33L, 32L, 33L, 33L, 29L, 
29L, 33L, 32L, 32L, 26L, 32L, 30L, 30L, 31L, 31L, 50L, 53L, 
35L, 46L, 53L, 44L, 42L, 50L, 52L, 46L, 51L, 50L, 33L, 39L, 
53L, 39L, 53L, 50L, 41L, 45L, 56L, 36L, 52L, 52L, 34L, 54L, 
50L, 55L, 53L, 56L, 55L, 43L, 51L, 42L, 50L, 47L, 53L, 55L, 
42L, 25L, 44L, 50L, 55L, 47L, 52L, 50L, 47L, 50L, 36L, 45L, 
40L, 48L, 50L, 43L, 42L, 42L, 52L, 50L, 45L, 51L, 49L, 44L, 
44L, 49L, 48L, 48L, 48L, 29L, 47L, 47L, 45L, 45L, 47L, 29L, 
47L, 39L, 46L, 45L, 46L, 40L, 46L, 46L, 46L, 39L, 45L, 38L, 
45L, 46L, 45L, 45L, 28L, 45L, 45L, 40L, 40L, 33L, 45L, 45L, 
46L, 35L, 44L, 45L, 44L, 44L, 44L, 44L, 33L, 44L, 43L, 43L, 
21L, 39L, 29L, 27L, 27L, 29L, 50L, 49L, 43L, 49L, 47L, 42L, 
50L, 47L, 27L, 31L, 36L, 41L, 41L, 41L, 40L, 41L, 42L, 41L, 
41L, 41L), MST = structure(c(1L, 3L, 2L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 5L, 2L, 1L, 1L, 2L, 1L, 1L, 4L, 1L, 2L, 
1L, 2L, 5L, 2L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 5L, 1L, 1L, 1L, 
1L, 5L, 3L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 2L, 4L, 5L, 
4L, 1L, 5L, 4L, 4L, 1L, 5L, 3L, 1L, 5L, 1L, 4L, 4L, 1L, 1L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 4L, 1L, 4L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 4L, 5L, 1L, 1L, 1L, 1L, 3L, 
5L, 1L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 5L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 4L, 1L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 5L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 4L, 1L, 4L, 1L, 1L, 
4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 4L, 1L, 1L, 1L, 
1L, 3L, 4L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L), .Label = c("1", 
"2", "3", "4", "5"), class = "factor")), .Names = c("STR", 
"OBS", "AGMT", "FNDX", "HIGD", "DEG", "CHK", "AGP1", "AGMN", 
"NLV", "LIV", "WT", "AGLP", "MST"), row.names = c(NA, -200L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:50:06.213

难道是`bbdm[train]`它找不到，而不是`train`它自己？你得到什么错误信息？

您可以在`browser`此处使用命令进行调试。IE

```
gcv<-function(formula,data=NULL,method="rpart",cross=5,times=10,k=7,layer=5,seed=0)
{

    set=data;
n=nrow(set);
set.seed(as.vector(Sys.time()));
bb1=1:n;
bb2=rep(1:cross,ceiling(n/cross))[1:n];
bb2=sample(bb2,n);
samp=sample(c(1:n),size=n);
m=ceiling(n/cross);
smp<-mat.or.vec(cross,m);
j=rep(0,cross)
for (i in 1:n)
{
    smp[bb2[i],j[bb2[i]]]=i
    j[bb2[i]]=j[bb2[i]]+1
}
# Here we separate the original set into 5(variable cross)sets,
    # each time we take one out and treat it as the testing set

mf <- match.call(expand.dots = FALSE)
m <- match(c("formula","data"), names(mf), 0L)
mf <- mf[c(1L, m)]
mf$drop.unused.levels <- TRUE
mf[[1L]] <- as.name("model.frame")
mf <- eval(mf, parent.frame())
response<-model.response(mf)
#code copied from function.lm

reslvl<-length(levels(response))
tra<-mat.or.vec(reslvl,reslvl);
tes<-mat.or.vec(reslvl,reslvl);

for (i in 1:cross)
{
    test<-smp[i,];
    train<-setdiff(1:200,test);
    show(train); #THe 'train' set can be shown here. 

    #some "if" and "else"statements are hidden 

    if (method=="logistic")#logistic is running well
    {
        bb.log<-step(glm(formula,set,family=binomial),trace=FALSE)
        tra<-tra+as.vector(t(table(response[train], 
                                       bin(predict.glm(bb.log,set[train,],type="response")))))
        tes<-tes+as.vector(t(table(response[test], 
                                        bin(predict.glm(bb.log,set[test,],type="response")))))
    }
    else if (method=="clogit")#clogit is meeting a problem.
    {
        ##### BROWSER() CALL ##########
        browser()
        library("survival")
        bb.clog<-step(clogit(formula,bbdm[train,]),trace=FALSE)
        tra<-tra+as.vector(t(table( response[train], 
                                                bin(predict(bb.clog,set[train,])))))
        tes<-tes+as.vector(t(table( response[test], 
                                                bin(predict(bb.clog,set[test,])))))
    }
}
tra<-tra/cross;
tes<-tes/cross;
trainrate=1-sum(diag(tra))/sum(tra)
testrate=1-sum(diag(tes))/sum(tes)
result<-list(Train=tra,TrainRate=trainrate,Test=tes,TestRate=testrate)
result
} 
```

浏览器可以用来调试这样的功能。本质上，当您运行代码时，您将进入`browser`被调用的那一刻的环境。这将允许您探索并查看变量是否是您认为的那样。您可以执行 an`ls()`查看定义了哪些对象，或者尝试查找`train`or 的值（我的怀疑）`bbdm`以查看它们是否都已正确定义。

# reporting-services - 能够在 ssrs 中选择多个日期（参数）

> ID：10074524
> 
> 赞同：1
> 
> 时间：2012-04-09T14:14:55.233
> 
> 标签：reporting-services

有没有一种方法可以让我选择多个日期并将其作为存储过程的参数传递给 ssrs 中的报告。选择允许参数的多个值会给出一个下拉列表。但是我可以在其中选择多个日期的日历控件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:39:38.303

从版本 2008R2 开始，SQL Server Reporting Services 没有内置此功能。我没有看过 2012，但如果它提供了这个功能，我会感到惊讶。

（您始终可以使用 ReportViewer 控件、URL 访问或其他访问方法来构建您自己的界面来显示报告。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T14:28:07.387

正如杰米所说，你不能真正做到这一点。根据我的经验，我遇到的“最佳”工作是将您的参数值作为一个文本字符串传递，并使用拆分函数在存储过程中解析您的 WHERE 条件。

```
 USE [YOUR DATABASE]
    GO

    SET ANSI_NULLS ON
    GO
     SET QUOTED_IDENTIFIER ON
    GO

   CREATE FUNCTION [dbo].[split](
      @delimited NVARCHAR(MAX),
      @delimiter NVARCHAR(100)
    ) RETURNS @t TABLE (id INT IDENTITY(1,1), val NVARCHAR(MAX))
    AS
    BEGIN
      DECLARE @xml XML
      SET @xml = N'<t>' + REPLACE(@delimited,@delimiter,'</t><t>') + '</t>'

      INSERT INTO @t(val)
      SELECT  r.value('.','varchar(MAX)') as item
      FROM  @xml.nodes('/t') as records(r)
      RETURN
      END 
```

您的参数在您的存储过程中将是这样的：

```
 @Parameter VARCHAR(200) 
```

然后你的存储过程中的 where 条件将是这样的

```
 where  convert(varchar(10), cast([YOURDATE] as date), 101)  IN (select val from dbo.split(@Paramater,',')) 
```

我希望这有帮助！

# android - 在构建 android 源代码后启动模拟器到平板电脑大小

> ID：10074526
> 
> 赞同：0
> 
> 时间：2012-04-09T14:15:06.570
> 
> 标签：android

我正在使用 source.android.com 上给出的默认指令构建代码，例如

1) 源码 build/envsetup.sh 2) 启动完整版 3) 制作

当我尝试启动模拟器时，它以酒吧电话的默认大小打开。但我想以平板电脑大小启动我的模拟器（任何默认大小就足够了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:43:19.190

使用平板电脑皮肤。您可以在 AVD 管理器中更改皮肤。在这里找到：[SDK]/platforms//skins

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T10:49:35.837

```
 emulator -skin <skinname> 
```

有关 aosp 中可用的皮肤列表 - 请参阅 droid/development/tools/emulator/skins

# directshow - 在表达式编码器 sdk 中创建 directshow 过滤器对象

> ID：10074527
> 
> 赞同：0
> 
> 时间：2012-04-09T14:15:10.523
> 
> 标签：directshow, expression-encoder, expression-encoder-sdk

我有一个表达式编码器可以使用的 directshow 过滤器。
是否可以使用表达式编码器 sdk（两个项目）创建此过滤器的两个对象？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:46:44.103

过滤器将在每次应用程序需要时被实例化，因此没有什么可以阻止您的对象的 2+ 个实例，除非应用程序“跟踪”正在使用的设备并且不给您使用相同设备的选项再次（应用程序可能假设设备是“真实的”，而不是虚拟的，并且不能在两个管道中同时工作）并且您的解决方法是注册 2+ 相同类型的虚拟设备。

# android - Android SDK 需要 android developer toolkit 17.0.0 或以上版本

> ID：10074532
> 
> 赞同：23
> 
> 时间：2012-04-09T14:15:26.540
> 
> 标签：android, eclipse, sdk, adt

当我尝试将我的项目从 eclipse 合并到 netbeans 时，我遇到了这个奇怪的问题。现在当试图重新运行 eclipse 我得到这个错误

> “Android SDK 需要 android developer toolkit 版本 17.0.0 或以上”

我试图解决这个问题的方法是尝试更新其中的 SDK 和工具包。

到目前为止，一切都已更新，现在我一无所知。

![启动eclipse时的错误信息](../Images/a7b872db9b0a16d83b52a74a53f3ea24.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-19T03:46:26.533

转到您的 Eclipse，单击帮助 -> 安装新软件 -> 添加... -> 输入“ADT 插件”作为名称，输入“ [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) ”对于 URL，然后包括 ADT 在内的几个选项将显示在窗口中，单击要更新的内容，然后单击确定，您将能够更新 ADT。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-09T14:19:55.563

在 Eclipse 中运行软件更新（帮助 > 检查更新）并更新 ADT。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-06-27T13:34:35.420

1.  在 Eclipse 中转到帮助。
2.  安装新软件 ---> 在 Add Repository 中添加名称：ADT 和位置： [https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)
3.  加载后你会得到开发者工具和 NDK 插件
4.  如果需要，请检查两者或检查开发人员工具。
5.  点击下一步
6.  结束

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-24T17:40:10.180

有同样的问题。尝试通过“帮助”>“检查更新”进行更新，但收到如下警告消息：

> 联系软件站点时遇到问题

之后更新过程失败。谷歌搜索并找到了解决方案。

您只需在 Eclipse.ini 中添加一行，该文件位于 Eclipse 文件夹中。将此行添加到文件末尾：

```
-Djava.net.preferIPv4Stack=true 
```

之后更新过程正常进行。

问题在于上传过程通过 IPv6，但互联网服务提供商支持 IPv4。

[来源（俄语）](http://drfits.com/2011/11/13/eclipse-contacting-software-sites-has-encountered-a-problem/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T14:19:12.827

只需更新您的 Android 开发者工具包。它是通过包含的 GUI 更新程序/管理器自动完成的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-05T21:19:15.180

首先更新您的 Android SDK（看起来您已经这样做了）然后执行更新 Eclipse

更新 Eclipse 后，请确保您安装了最新的 Eclipse Android 插件。

最后，在 Android SDK Manager 插件中，确保更新后的 Android SDK 的路径是正确的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-01-17T03:39:01.467

添加存储库后，我看到此消息：无法在[https://dl-ssl.google.com/android/eclipse/content.xml](https://dl-ssl.google.com/android/eclipse/content.xml)读取存储库。无法在[https://dl-ssl.google.com/android/eclipse/content.xml](https://dl-ssl.google.com/android/eclipse/content.xml)读取存储库。sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

# sql - SQL Server 查询和重复项

> ID：10074533
> 
> 赞同：0
> 
> 时间：2012-04-09T14:15:28.647
> 
> 标签：sql, sql-server, duplicates

免责声明 - 我对 SQL Server 的了解有限。因此，如果这是一个“愚蠢”的问题，我提前道歉。

查询的目的 - 从我们公司使用的程序的多表数据库中收集信息，并将结果存入我们的网络数据库，以便我们可以显示一些信息。

问题 - 重复信息。部分问题是数据库中有多个人员实例，因此结果以这种方式重复......而其他重复来自联接。我需要合并结果，以便只存入一个具有相同名称或代码 (ID) 的结果。我想合并其余信息，以免丢失任何可能需要的信息。

这是我的查询：

```
SELECT people.Code AS [athlete-id],
    people.Name AS [athlete-name],
    people.DOB AS [DOB],
    people.Division AS [agency-id],
    certifs.[Expiration date] AS [expiration-date], 
    groups.Name AS [agency-name],
    address.Addresses AS [address],
    address.City AS [city],
    address.State AS [state],
    case when tags.Field = 'ABJD86GHKXXQWA9Q'
        then tags.Value 
    end AS [restrictions], 
    case when tags.Field = 'VH2C78N9A15S059T'
        then tags.Value 
    end AS [comments]
FROM people 
LEFT OUTER JOIN certifs 
    ON people.Code = certifs.Owner 
LEFT OUTER JOIN groups 
    ON people.Division = groups.Code 
LEFT OUTER JOIN address 
    ON people.Code = address.Owner 
LEFT OUTER JOIN tags 
    ON people.Code = tags.Owner 
ORDER BY [agency-name], [athlete-name] 
```

让我知道您可能有任何问题。我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:23:30.913

如果您在 SELECT 之后和 people.Code 之前插入 DISTINCT 怎么样？

```
SELECT DISTINCT 
people.Code [...] 
```

# c# - 字符串的模式匹配

> ID：10074544
> 
> 赞同：0
> 
> 时间：2012-04-09T14:16:22.203
> 
> 标签：c#, regex

我需要浮点值模式的帮助。

我拥有的字符串：

```
[[-307.,16.01,-171.31],[0.84528,-0.503623,-0.142485,-0.107531],[-1,-2,1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]], [[-306.43,24.47,-176],[0.845282,-0.503624,-0.142472,-0.107528],[-1,-2,1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]] 
```

我正在使用的模式：

```
\s*[-+]?([0-9]*\.)?[0-9]*([eE][-+]?[0-9]+)?\s* 
```

我必须对我的模式进行哪些更改才能识别整个文本。现在问题
[306.43,24.47,-176] 这是这个长字符串的一部分。
我对这种模式有什么改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:30:20.953

不需要正则表达式。您可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var list = new JavaScriptSerializer()
                .Deserialize<List<List<List<Double>>>>("[" + yourstr + "]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:19:05.873

您似乎缺少小数位的 + 或 *：

```
\s*[-+]?([0-9].)?[0-9]+([eE][-+]?[0-9]+)?\s* 
```

# c# - 根据当前 IPrincipal 查找用户电子邮件

> ID：10074546
> 
> 赞同：2
> 
> 时间：2012-04-09T14:16:34.977
> 
> 标签：c#, asp.net, active-directory

我在 ASP.net MVC 应用程序中使用 Windows 身份验证。我想查询 Active Directory 以获取基于当前用户的用户电子邮件地址：

```
IPrincipal principal = HttpContext.Current.User; 
```

有没有办法可以使用 Active Directory 来查询他们的电子邮件地址？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-04-14T09:49:04.147

```
using (var context = new PrincipalContext(ContextType.Domain)) {
  using (var user = UserPrincipal.FindByIdentity(context, userName)) {
    if (user != null) {
       return user.EmailAddress;
    }
  }
} 
```

# mysql - 我可以用 int、tinyint、mediumint 等保存什么

> ID：10074548
> 
> 赞同：1
> 
> 时间：2012-04-09T14:16:40.827
> 
> 标签：mysql, database-design, integer

我都..

我一直使用 int(10) 来处理所有事情，但是几天前，我开始了一个新项目，并希望能做到 100% 优化；）

所以我想知道，有多少；

user_id => int(6) vs. mediumint (8) 或类似的将可以创建/添加

group_id => tinyint(1) vs tinyint (4) 或类似的是否可以创建/添加

等等..

我知道（X）是字段的宽度，但是，我不太了解可以使用示例创建的用户/帖子/消息++的实际数量；mediumint(8) 用于 id，而不是 int(10)。

感谢您对此的任何回复！

-汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T20:13:13.763

数据库 ID 通常总是正数 (0->∞)，因此最大值为：

```
Integer Type    Max Value
TINYINT         255
SMALLINT        65535
MEDIUMINT       16777215
INT             4294967295
BIGINT          18446744073709551615 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T13:05:52.407

> 我知道 (X) 是字段的宽度

括号中的可选数字是*显示*宽度。它与整数范围内有多少唯一值或整数需要多少存储空间无关。 [应用程序代码可以随意忽略](http://dev.mysql.com/doc/refman/5.6/en/numeric-type-attributes.html)有关显示宽度的提示。“显示宽度”是 SQL 的非标准扩展。

INTEGER(6) 和 INTEGER(2) 都需要 4 个字节来存储，并且都接受[范围从 -2147483648 到 2147483647 的值](http://dev.mysql.com/doc/refman/5.6/en/integer-types.html)。

所有中等整数都需要 3 个字节来存储，并接受范围从 -8388608 到 8388607 的值。

假设一个中等 int 足够大（约 1600 万个唯一值）来识别您的完整值域，您可能会在 4 字节整数上每行节省 1 个字节。（*可能*，因为某些平台需要填充到下一个字边界。对于 32 位系统，这将是 4 个字节，因此没有实际节省空间。我不知道 MySQL 是否这样做。）对于 1000 万行，您可能节省 10 兆字节（加上索引中的一些空间节省）——这些天不是很多。较窄的表通常比较宽的表更快，但我认为您不会注意到这里的区别。

# kohana - 如何在 Kohana 3.2 中为此目录结构创建路由：/application/my_use_case/classes/

> ID：10074550
> 
> 赞同：0
> 
> 时间：2012-04-09T14:16:43.423
> 
> 标签：kohana, routes

> **可能重复：**
> [如何在 Kohana 3.2 中为此目录结构创建路由：/application/my_use_case/classes/](https://stackoverflow.com/questions/10075558/how-can-i-create-the-route-in-kohana-3-2-for-this-directory-structure-applicat)

我正在使用 Kohana 3.2，我需要为我的应用程序创建这个目录结构：

```
 /application/my_use_case_1/classes/controller/..
     /application/my_use_case_1/classes/model/..
     /application/my_use_case_2/classes/controller/..
     /application/my_use_case_2/classes/model/.. 
```

我需要创建什么路线才能拥有这种结构？

谢谢。

干杯，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:21:10.360

简单地说 - 没有。您可以在单独的文件夹中拥有单独的应用程序，也可以拥有应用程序/类/目录路由：

```
<?php
Route::set('global', '<directory>(/<controller>(/<action>))', 'directory' => 'app1|app2|app3')
    ->defaults(array(
        'directory' => 'app1',
        'controller' => 'index',
        'action' => 'index',
    )); 
```

所以类名看起来像`App1_Controller_Index`和文件结构像`app1/controller/index.php`

# c# - 在 DataTable 上创建 LINQ 以获取 RowNumber

> ID：10074551
> 
> 赞同：2
> 
> 时间：2012-04-09T14:16:52.380
> 
> 标签：c#, asp.net, linq

```
SELECT * FROM
 (SELECT distinct ROW_NUMBER() OVER (ORDER BY ProductId desc) AS Ranking,
 ProductId,
 ProductName,
 FROM View_AllArt) 
 AS foo 
 WHERE Ranking > " + i + " AND Ranking <= (" + (j) + ") 
```

`i`并且`j`是具有一些整数值的可验证的。

我如何编写 LINQ 查询，就像这个 SQL 查询一样，我`View_AllArt`将成为`dtAccount`表。（我想在 DataTable 上创建 LINQ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:20:49.577

如果您返回结果，您可以通过排名过滤列表，如下所示：

```
var table = GetDataTable(); //retrieve the data

int i = 10;
int j = 20;

table = table.AsEnumerable().Where(r => r.Field<int>("Ranking") >= i && r.Field<int>("Ranking") <= j).AsDataView.ToTable(); 
```

**编辑**

您可能能够避免使用 的行索引返回行号`DataTable`：

```
table = table.AsEnumerable().Where(r => table.Rows.IndexOf(r) >= i && table.Rows.IndexOf(r) <= j).AsDataView().ToTable(); 
```

# nosql - orientdb，如何插入文档字段

> ID：10074562
> 
> 赞同：1
> 
> 时间：2012-04-09T14:17:34.293
> 
> 标签：nosql, nested, orientdb

我可以尝试通过 shell 将这样的结构插入到用户类（又名表）中：

```
email: 'test@domain.com'
display_name: 'name surname test'
tags: {id: 1, name: 'first', type:'something'} 
```

因此，当其中一个是文档时，某些字段。

我试试这个查询：

```
insert into users (email, display_name, tags) values 
('test@domain.com',
 'name surname test',
 {'id': 1, 'name': 'first', 'type' : 'something'}
) 
```

但获得此错误：错误：com.orientechnologies.orient.core.sql.OCommandSQLParsingException：在位置 #52 解析命令时出错：缺少一组值。示例：('Bill', 'Stuart', 300) 命令：插入用户（电子邮件、display_name、标签）值（'test@domain.com'、'name surname test'、{'id': 1、'name ': 'first', 'type' : 'something'}, ) ---------------------------------- --------------------------^

如何将此数据插入用户类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:14:38.953

这是回车的问题。这已修复适用于 1.0-SNAPSHOT。为避免更新您的 OrientDB 发行版，只需删除 \n。

# iphone - 从 AddressBook iphone 获取笔记时应用程序崩溃

> ID：10074567
> 
> 赞同：0
> 
> 时间：2012-04-09T14:17:49.587
> 
> 标签：iphone, memory, crash, addressbook

这是我从地址簿获取笔记的代码。

```
 +(NSString*)getNote:(ABRecordRef)record {

  return ABRecordCopyValue(record, kABPersonNoteProperty);
} 
```

但是在上面的实现中我有内存泄漏。因此，为了消除内存泄漏，我编写了以下代码

```
 +(NSString*)getNote:(ABRecordRef)record {

    NSString *tempNotes = (NSString*)ABRecordCopyValue(record, kABPersonNoteProperty);
    NSString *notes = [NSString stringWithString:tempNotes];
    [tempNotes release];
    return notes;

} 
```

如果我编写上面的代码，我的应用程序就会崩溃。怎么了？谢谢。

更新：我将此方法称为如下：

```
notes = [AddreesBook getNote:record]; 
```

notes 是我的 ivar 并且我在 dealloc 方法中释放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:56:57.337

您的第一个实现违反了所有权规则：

[内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html "Memory Management Rules")

也就是说，您使用的 API 调用包含“复制”，但您将其视为自动释放的对象。

Given that you're returning an autoreleased object in your revised implementation, I suspect you're not retaining your returned note string. You'll be able to tell for sure if this is the case if when running under a debugger your app crashes in `NSPopAutoreleasePool()`.

A simple test would be to send `-retain` to the note object you get back and see if the crash goes away:

```
NSString    *note = [ MyAddressBook getNote: abRecord ];

[ note retain ];
/* ... use note ... */

/* we retained the object, we must also release it when done with it. */
[ note release ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:52:20.287

假设`record`参数设置正确，下面应该返回一个自动释放的 NSString。

```
+ (NSString *)getNote:(ABRecordRef)record {
    return [(NSString *)ABRecordCopyValue(record, kABPersonNoteProperty) autorelease];
} 
```

但是，我目前不明白为什么您当前的版本`getNote`不起作用。

# javascript - jquery 颜色选择器？

> ID：10074572
> 
> 赞同：0
> 
> 时间：2012-04-09T14:18:11.240
> 
> 标签：javascript, jquery, color-picker

我是 jquery 的新手。

我确实遇到过[http://komunitasweb.com/2009/09/3-amazing-jquery-color-picker-plugins/](http://komunitasweb.com/2009/09/3-amazing-jquery-color-picker-plugins/)但这些插件对我来说太多了。我想要一个只有 3 个改变 div 框的小滑块的颜色选择器。没有额外的彩色字段。只有`R,G,B`？

我也读过[jQuery 颜色选择器推荐](https://stackoverflow.com/questions/4424368/jquery-color-picker-recommendation):)

这些工具中的一种是否存在或可能使其变得更小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:21:34.460

您可以简单地在演示中使用[这个 jQuery UI Colorpicker](http://jqueryui.com/demos/slider/#colorpicker)。

# python - 与 python 的网络连接

> ID：10074574
> 
> 赞同：4
> 
> 时间：2012-04-09T14:18:16.367
> 
> 标签：python, web.py

我有这段代码可以在我的服务器中创建一个 webapp：

```
import web

urls = (
    '/update', 'Update',
)

app = web.application(urls, globals())

class Update:

    print "hola"

if __name__=='__main__':
    app.run() 
```

当我尝试执行时：

```
python@ubuntu:~$ python prueba.py 8081
hola
http://0.0.0.0:8081/
Traceback (most recent call last):
  File "prueba.py", line 21, in <module>
    app.run()
  File "/usr/local/lib/python2.6/dist-packages/web/application.py", line 311, in run
    return wsgi.runwsgi(self.wsgifunc(*middleware))
  File "/usr/local/lib/python2.6/dist-packages/web/wsgi.py", line 54, in runwsgi
    return httpserver.runsimple(func, validip(listget(sys.argv, 1, '')))
  File "/usr/local/lib/python2.6/dist-packages/web/httpserver.py", line 148, in runsimple
    server.start()
  File "/usr/local/lib/python2.6/dist-packages/web/wsgiserver/__init__.py", line 1753, in start
    raise socket.error(msg)
socket.error: No socket could be created 
```

为什么会这样？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:22:51.887

错误消息说它无法在指定端口上创建侦听套接字。检查是否已经有服务器在端口 8081 上运行。

# jquery - jquery 可排序和可调整大小的重叠列表项

> ID：10074575
> 
> 赞同：8
> 
> 时间：2012-04-09T14:18:22.223
> 
> 标签：jquery, jquery-ui-sortable, resizable

我有多个并排的可排序列表。您可以调整 div 的宽度以覆盖其他列表。这使得一个项目可以成为多个列表的一部分。

我想在没有任何可排序的 div 重叠的情况下做到这一点。

[请参阅http://jsfiddle.net/2J6af/](http://jsfiddle.net/2J6af/)上的小提琴

编辑：如果您转到上面的小提琴并扩展可排序项目的宽度，则将其移动并放下。您会看到它与其他可排序项目重叠。我希望安排所有可排序的项目，以免重叠。

编辑：我已经按照@KateA 的建议再次[处理重叠的 jQuery 可排序列表](https://stackoverflow.com/questions/4092817/dealing-with-overlapping-jquery-sortable-lists)，虽然它很相似，但它讨论的是列表重叠而不是覆盖多个列表的可排序项目。

编辑：在成品中将有 7 个并排的列表，我需要在用户丢弃一个项目后以特定顺序重新排列排序。我知道你可以在 sort: 事件中添加一个函数，也许这是重新排列和检查/更正任何重叠的可排序项目的关键函数？

编辑：我还注意到，可排序项目在拖动时的行为不同，具体取决于您是否使用左手柄或右手柄调整了它的大小。它对您悬停在哪个列表上感到困惑。例如，如果您使用左手柄调整大小，然后拿起它并尝试将其放在中间或右侧列表中，它将下降到鼠标指针左侧的下一个列表，而不是在下方显示空占位符的位置鼠标指针。

编辑： jquery fullCalendar 确实满足我的需要，但他们是怎么做到的？[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

编辑：我一直在努力将小提琴扩展到我的可分类知识范围内，你认为我在正确的轨道上吗？[http://jsfiddle.net/2J6af/17/](http://jsfiddle.net/2J6af/17/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:26:59.060

**fullcalendar**似乎在背景上有一个可视网格，可排序项目在虚拟网格的顶部，因此它们很可能是手动计算它们的位置。

jQueryUI 执行 Sortable 的方式是在列表中添加一个占位符，这自然（页面流）显示了*drop*的空间。我建议不要这样做，我认为没有办法可以干净地*破解*jQueryUI 来获得你正在寻找的行为。

我建议您做与 fullcalendar 相同的事情，使用*可拖动*和*可调整大小*的插件，并在与其他项目重叠时使用绝对位置将元素移开。

不要将捕捉功能设置为可拖动对象，而是根据可拖动对象的位置计算碰撞并决定如何处理它们，或者向上或向下移动它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T17:30:46.360

您正在尝试的内容存在一些问题，但我设法制作了一个修复其中一些问题的[示例](http://jsfiddle.net/haYDE/)。最重要的问题是这两个 Jquery UI 插件（可排序、可调整大小）不支持您想要的所有功能，因此至少有一个（如果不是两者）都必须从头开始重写或实现。一些问题包括：

1.  西手柄导致宽度增加，css 'left' 属性减小，导致左侧列表项出现问题。东部和右侧也存在同样的问题。
2.  将列表项定位为“相对”或“绝对”将导致它们不占用页面流中的空间，从而导致重叠。
3.  拥有三个单独的 div 意味着每个项目只能是一个列表的成员，并且您必须检查宽度以查看它是否还占用其他列。它有点乱。

在我提供的示例之上，我相信您需要以编程方式保留一个数据模型，该模型将跟踪每个项目及其存在的列，并允许它根据需要在显示中进行更正。

我已经收集到这与代表一周以及该时间范围内发生的事情有关的所有内容。虽然我认为我已经解决了您问题的主要问题，但我发现这个问题很有趣，如果您提供更多背景信息，我愿意为最终产品提供帮助。

# excel - 使用宏或 VBA 将科学计数法中的数字转换为 Excel 中的数字格式

> ID：10074576
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:18:36.327
> 
> 标签：excel, vba

[MS Excel](http://en.wikipedia.org/wiki/Microsoft_Excel)吃了我的头。它是将数字随机转换为科学记数法格式。当我将以制表符分隔格式保存的文件加载到 SQL Server 中时，这会导致问题。我知道我可以提供一个格式文件并做很多花哨的事情。但是，假设我不能。

是否有一个宏循环遍历所有单元格，如果单元格中的数字是科学记数法格式，那么它将其转换为数字格式？

说：

```
Input: spaces signify different cells.
1.00E13 egalitarian 
```

宏之后的输出：

```
10000000000000 egalitarian 
```

我正在 Excel 2007 中尝试此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:14:50.857

我写了一个简单的 C# 程序来解决这个问题。希望有用。

### 输入：

文件所在的输入目录（假设文件为 .txt 格式）。

### 输出：

转换后的文件将被吐出的输出目录。

### 分隔符：

列分隔符。

### 编码

```
using System;
using System.Text.RegularExpressions;
using System.IO;
using System.Text;
using System.Threading;

namespace ConvertToNumber
{
    class Program
    {
        private static string ToLongString(double input)
        {
            string str = input.ToString().ToUpper();

            // If string representation was collapsed from scientific notation, just return it:
            if (!str.Contains("E")) 
                return str;

            var positive = true;
            if (input < 0)
            {
                positive = false;
            }

            string sep = Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator;
            char decSeparator = sep.ToCharArray()[0];

            string[] exponentParts = str.Split('E');
            string[] decimalParts = exponentParts[0].Split(decSeparator);

            // Fix missing decimal point:
            if (decimalParts.Length == 1) 
                decimalParts = new string[] { exponentParts[0], "0" };

            int exponentValue = int.Parse(exponentParts[1]);

            string newNumber = decimalParts[0].Replace("-","").
                Replace("+","") + decimalParts[1];

            string result;

            if (exponentValue > 0)
            {
                if(positive)
                    result =
                       newNumber +
                       GetZeros(exponentValue - decimalParts[1].Length);
                else
                    result = "-"+
                     newNumber +
                     GetZeros(exponentValue - decimalParts[1].Length);

            }
            else // Negative exponent
            {
                if(positive)
                    result =
                        "0" +
                        decSeparator +
                        GetZeros(exponentValue + decimalParts[0].Replace("-", "").
                                   Replace("+", "").Length) + newNumber;
                else
                    result =
                    "-0" +
                    decSeparator +
                    GetZeros(exponentValue + decimalParts[0].Replace("-", "").
                             Replace("+", "").Length) + newNumber;

                result = result.TrimEnd('0');
            }
            float temp = 0.00F;

            if (float.TryParse(result, out temp))
            {
                return result;
            }
            throw new  Exception();
        }

        private static string GetZeros(int zeroCount)
        {
            if (zeroCount < 0)
                zeroCount = Math.Abs(zeroCount);

            StringBuilder sb = new StringBuilder();

            for (int i = 0; i < zeroCount; i++) sb.Append("0");

            return sb.ToString();
        }

        static void Main(string[] args)
        {
            //Get Input Directory.
            Console.WriteLine(@"Enter the Input Directory");
            var readLine = Console.ReadLine();
            if (readLine == null)
            {
                Console.WriteLine(@"Enter the input path properly.");
                return;
            }
            var pathToInputDirectory = readLine.Trim();

            //Get Output Directory.
            Console.WriteLine(@"Enter the Output Directory");
            readLine = Console.ReadLine();
            if (readLine == null)
            {
                Console.WriteLine(@"Enter the output path properly.");
                return;
            }
            var pathToOutputDirectory = readLine.Trim();

            //Get Delimiter.
            Console.WriteLine("Enter the delimiter;");
            var columnDelimiter = (char) Console.Read();

            //Loop over all files in the directory.
            foreach (var inputFileName in Directory.GetFiles(pathToInputDirectory))
            {
                var outputFileWithouthNumbersInScientificNotation = string.Empty;
                Console.WriteLine("Started operation on File : " + inputFileName);

                if (File.Exists(inputFileName))
                {
                    // Read the file
                    using (var file = new StreamReader(inputFileName))
                    {
                        string line;
                        while ((line = file.ReadLine()) != null)
                        {
                            String[] columns = line.Split(columnDelimiter);
                            var duplicateLine = string.Empty;
                            int lengthOfColumns = columns.Length;
                            int counter = 1;
                            foreach (var column in columns)
                            {
                                var columnDuplicate = column;
                                try
                                {
                                    if (Regex.IsMatch(columnDuplicate.Trim(),
                                                      @"^[+-]?[0-9]+(\.[0-9]+)?[E]([+-]?[0-9]+)$",
                                                      RegexOptions.IgnoreCase))
                                    {
                                        Console.WriteLine("Regular expression matched for this :" + column);

                                        columnDuplicate = ToLongString(Double.Parse
                                                                           (column,
                                                                            System.Globalization.NumberStyles.Float));

                                        Console.WriteLine("Converted this no in scientific notation " +
                                                          "" + column + "  to this number " +
                                                          columnDuplicate);
                                    }
                                }
                                catch (Exception)
                                {

                                }
                                duplicateLine = duplicateLine + columnDuplicate;

                                if (counter != lengthOfColumns)
                                {
                                    duplicateLine = duplicateLine + columnDelimiter.ToString();
                                }
                                counter++;
                            }
                            duplicateLine = duplicateLine + Environment.NewLine;
                            outputFileWithouthNumbersInScientificNotation = outputFileWithouthNumbersInScientificNotation + duplicateLine;
                        }

                        file.Close();
                    }

                    var outputFilePathWithoutNumbersInScientificNotation
                        = Path.Combine(pathToOutputDirectory, Path.GetFileName(inputFileName));

                    //Create the directory if it does not exist.
                    if (!Directory.Exists(pathToOutputDirectory))
                        Directory.CreateDirectory(pathToOutputDirectory);

                    using (var outputFile =
                        new StreamWriter(outputFilePathWithoutNumbersInScientificNotation))
                    {
                        outputFile.Write(outputFileWithouthNumbersInScientificNotation);
                        outputFile.Close();
                    }

                    Console.WriteLine("The transformed file is here :" +
                        outputFilePathWithoutNumbersInScientificNotation);
                }
            }
        }
    }
} 
```

这在我们无法在 MS Excel 中打开的大文件的情况下非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:44:26.987

谢谢彼得。我将您的原始工作更新为：1）接收输入文件或路径 2）仅在每读取 1000 行后写出一个处理语句 3）在处理转换后的行时将其写入输出文件，因此不会出现潜在的大字符串一直徘徊 4) 在最后添加了一个 readkey，以便控制台在调试时不会自动退出

```
 using System;
using System.Text.RegularExpressions;
using System.IO;
using System.Text;
using System.Threading;

namespace ConvertScientificToLong
{
    class Program
    {
        private static string ToLongString(double input)
        {
            string str = input.ToString().ToUpper();

            // If string representation was collapsed from scientific notation, just return it:
            if (!str.Contains("E"))
                return str;

            var positive = true;
            if (input < 0)
            {
                positive = false;
            }

            string sep = Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator;
            char decSeparator = sep.ToCharArray()[0];

            string[] exponentParts = str.Split('E');
            string[] decimalParts = exponentParts[0].Split(decSeparator);

            // Fix missing decimal point:
            if (decimalParts.Length == 1)
                decimalParts = new string[] { exponentParts[0], "0" };

            int exponentValue = int.Parse(exponentParts[1]);

            string newNumber = decimalParts[0].Replace("-", "").
                Replace("+", "") + decimalParts[1];

            string result;

            if (exponentValue > 0)
            {
                if (positive)
                    result =
                       newNumber +
                       GetZeros(exponentValue - decimalParts[1].Length);
                else
                    result = "-" +
                     newNumber +
                     GetZeros(exponentValue - decimalParts[1].Length);

            }
            else // Negative exponent
            {
                if (positive)
                    result =
                        "0" +
                        decSeparator +
                        GetZeros(exponentValue + decimalParts[0].Replace("-", "").
                                   Replace("+", "").Length) + newNumber;
                else
                    result =
                    "-0" +
                    decSeparator +
                    GetZeros(exponentValue + decimalParts[0].Replace("-", "").
                             Replace("+", "").Length) + newNumber;

                result = result.TrimEnd('0');
            }
            float temp = 0.00F;

            if (float.TryParse(result, out temp))
            {
                return result;
            }
            throw new Exception();
        }

        private static string GetZeros(int zeroCount)
        {
            if (zeroCount < 0)
                zeroCount = Math.Abs(zeroCount);

            StringBuilder sb = new StringBuilder();

            for (int i = 0; i < zeroCount; i++) sb.Append("0");

            return sb.ToString();
        }

        static void Main(string[] args)
        {
            //Get Input Directory.
            Console.WriteLine(@"Enter the Input Directory or File Path");
            var readLine = Console.ReadLine();
            if (readLine == null)
            {
                Console.WriteLine(@"Enter the input path properly.");
                return;
            }
            var pathToInputDirectory = readLine.Trim();

            //Get Output Directory.
            Console.WriteLine(@"Enter the Output Directory");
            readLine = Console.ReadLine();
            if (readLine == null)
            {
                Console.WriteLine(@"Enter the output path properly.");
                return;
            }
            var pathToOutputDirectory = readLine.Trim();

            //Get Delimiter.
            Console.WriteLine("Enter the delimiter;");
            var columnDelimiter = (char)Console.Read();

            string[] inputFiles = null;

            if (File.Exists(pathToInputDirectory))
            {
                inputFiles = new String[]{pathToInputDirectory};
            }
            else
            {
                inputFiles = Directory.GetFiles(pathToInputDirectory);
            }

            //Loop over all files in the directory.
            foreach (var inputFileName in inputFiles)
            {
                var outputFileWithouthNumbersInScientificNotation = string.Empty;
                Console.WriteLine("Started operation on File : " + inputFileName);

                if (File.Exists(inputFileName))
                {
                    string outputFilePathWithoutNumbersInScientificNotation
                        = Path.Combine(pathToOutputDirectory, Path.GetFileName(inputFileName));

                    //Create the directory if it does not exist.
                    if (!Directory.Exists(pathToOutputDirectory))
                        Directory.CreateDirectory(pathToOutputDirectory);

                    using (var outputFile =
                        new StreamWriter(outputFilePathWithoutNumbersInScientificNotation))
                    {
                        // Read the file
                        using (StreamReader file = new StreamReader(inputFileName))
                        {
                            string line;
                            int lineCount = 0;
                            while ((line = file.ReadLine()) != null)
                            {
                                String[] columns = line.Split(columnDelimiter);
                                var duplicateLine = string.Empty;
                                int lengthOfColumns = columns.Length;
                                int counter = 1;
                                foreach (var column in columns)
                                {
                                    var columnDuplicate = column;
                                    try
                                    {
                                        if (Regex.IsMatch(columnDuplicate.Trim(),
                                                          @"^[+-]?[0-9]+(\.[0-9]+)?[E]([+-]?[0-9]+)$",
                                                          RegexOptions.IgnoreCase))
                                        {
                                            //Console.WriteLine("Regular expression matched for this :" + column);

                                            columnDuplicate = ToLongString(Double.Parse
                                                                               (column,
                                                                                System.Globalization.NumberStyles.Float));

                                            //Console.WriteLine("Converted this no in scientific notation " +
                                            //                  "" + column + "  to this number " +
                                            //                  columnDuplicate);

                                            if (lineCount % 1000 == 0)
                                            {
                                                Console.WriteLine(string.Format("processed {0} lines. still going....", lineCount));
                                            }
                                        }
                                    }
                                    catch (Exception)
                                    {

                                    }
                                    duplicateLine = duplicateLine + columnDuplicate;

                                    if (counter != lengthOfColumns)
                                    {
                                        duplicateLine = duplicateLine + columnDelimiter.ToString();
                                    }
                                    counter++;
                                }

                                outputFile.WriteLine(duplicateLine);

                                lineCount++;
                            }
                        }
                    }
                    Console.WriteLine("The transformed file is here :" +
                        outputFilePathWithoutNumbersInScientificNotation);

                    Console.WriteLine(@"Hit any key to exit");
                    Console.ReadKey();
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T16:40:08.390

一种更简单的方法是将其保存为 .csv 文件。然后，不仅仅是打开文件，而是转到数据选项卡并选择“来自文本”，这样您就可以获得对话框。这样，您可以将该列与科学记数法标识为文本以消除该格式。导入文件，然后您可以将其重新格式化为数字或任何您想要的。

# image - 从共现矩阵中提取纹理特征

> ID：10074580
> 
> 赞同：2
> 
> 时间：2012-04-09T14:18:44.743
> 
> 标签：image, matlab, cbir, glcm

我正在尝试在 MATLAB 中为彩色图像创建基于内容的图像检索系统 (CBIR)，并使用 k-means 算法来提取数据库中图像的特征向量。每个图像有四个簇，每个簇都有关于颜色（R，G，B）和位置（X，Y）的信息。

我现在正在尝试向我的集群添加纹理特征，并且需要为此使用灰度共现矩阵 (GLCM)。我知道 GLCM 只是某个灰度级出现在另一个旁边的概率的指标，并且已经为我的图像创建了 GLCM。

我不清楚如何将 GLCM 映射到原始图像（以及它的簇），因为 GLCM 谈论像素对，我希望每个 X、Y 位置都有纹理信息。如何将 GLCM 转换为像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:31:01.243

GLCM 的输出似乎是一个 T×T 矩阵，其中 T 是图像中不同灰度级别的数量。因此，此矩阵的大小并不真正取决于图像的大小。该矩阵还描述了整个图像的纹理，因此将 GLCM 数据与单个像素相关联并不是特别有意义。

听起来您可以为单个集群计算 GLCM，因为这将描述该集群内的纹理？我认为[graycomatrix](http://www.mathworks.co.uk/help/toolbox/images/ref/graycomatrix.html)需要一个矩形图像，但您可以找到每个集群的边界框并分别从中提取 GLCM。

如果您想从 GLCM 矩阵中获取一些更有意义的信息（即适合作为“特征”的信息），您可以使用返回 4 个汇总统计信息的[graycoprops 。](http://www.mathworks.co.uk/help/toolbox/images/ref/graycoprops.html)

# git - git - 如何删除空文件夹并推送更改？

> ID：10074582
> 
> 赞同：90
> 
> 时间：2012-04-09T14:19:00.843
> 
> 标签：git, directory, rm, rmdir

如何在本地删除一个空文件夹，并让其他通过 pull-push 共享远程的协作者也发生这种情况？我知道 git 在这个意义上没有“跟踪”文件夹，但问题仍然存在。

例如，我将文件移动到另一个文件夹并提交了（移动的）更改。

但是我不能`git rm name`得到“不匹配”的文件夹 `git rmdir name`不存在。

我可以做一个`git clean -f folder`，但它是如何被推高的？

我可以直接`rm`删除该文件，但是如何正确删除该目录并将其推送到存储库，然后在其他人拉取时将其发送给其他人，以便删除现有文件夹？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-04-09T15:24:20.480

简短的回答：**您不能将更改推送到目录（添加、删除等），因为 Git 不会自行跟踪目录**。

根据[常见问题解答](https://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F)：

> 目前 git 索引（暂存区）的设计只允许列出文件，并且没有足够能力进行更改以允许空目录的人足够关心这种情况来补救它。
> 
> 在目录中添加文件时会自动添加目录。也就是说，目录永远不必添加到存储库中，并且不会自行跟踪。

因此，就 Git 而言，您的空目录不再存在。

我发现养成使用习惯可以`git clean -fd`消除推动删除目录的需要。但是，[`git clean`](https://git-scm.com/docs/git-clean/1.8.2)可以删除您可能不想删除的项目（包括您尚未提交的任何新文件），因此我倾向于首先使用`git clean -fdn`查看如果我使用该命令**将删除的内容。**

看起来您可能被迫与其他开发人员交谈以清理该目录。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-28T00:14:45.850

```
git add --all
git clean -f -d
git commit -m "trying to remove folders"
git push 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-26T10:53:43.903

您不能推送空文件夹。但是，如果您想清除克隆/本地存储库中的空文件夹，请提交您的最新更改。然后只需删除本地副本中 .git 文件夹之外的所有文件。然后再次重置所有更改，这会放回所有文件，但会留下它不跟踪的空目录。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2014-07-29T15:04:02.337

解决这个问题的一个稍微笨拙的方法是在目录中创建一个假文件，提交它，然后删除它。删除它也会删除该目录。所以创建 name/fake.txt

```
git add name/fake.txt
git commit -m "message"
git rm name/fake.txt
git commit -m "message2" 
```

# c# - 在复制文件和另一个进程写入文件时避免错误

> ID：10074586
> 
> 赞同：0
> 
> 时间：2012-04-09T14:19:06.193
> 
> 标签：c#, .net, windows

我正在编写一个简单的文件夹同步应用程序。

因此，我希望在源文件夹中创建文件时将其复制到目标。

我的问题是：在尝试读取源文件时如何避免错误，因为另一个进程可能想要写入它？我应该以读写共享模式读取文件还是简单的 System.IO.File.Copy 就足够了？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:34:42.567

**文件复制**将在复制文件时锁定文件。
如果未锁定，则文件可能在复制过程中被另一个进程损坏
因此，当您启动复制过程时，有两种可能性：

*   None 锁定您的源文件，然后 File.Copy 开始工作并锁定源文件。
*   有人锁定了您的源文件，然后 File.Copy 将抛出异常。

# iterm - 重启后 iTerm 设置消失

> ID：10074591
> 
> 赞同：1
> 
> 时间：2012-04-09T14:19:16.747
> 
> 标签：iterm

我重新启动了我的 Mac，发生了一些奇怪的事情。我有自定义 iTerm 设置（提示显示的方式 - 我删除了机器等）。我不介意在重新启动时丢失它，但我似乎在 ruby​​ 1.8.7 上并且丢失了 rvm。

我已经重新启动了很多次机器，为什么这次我的设置消失了？我怎样才能让他们回来？

# c++ - 这个枚举是否有效，如果有效，为什么？

> ID：10074592
> 
> 赞同：3
> 
> 时间：2012-04-09T14:19:16.613
> 
> 标签：c++

```
enum color = {blue, black=3, yellow=3}; 
```

2种颜色的值为3，有效吗？我认为枚举必须具有不同的值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:21:27.700

它是有效的，因为它是被允许的。虽然可能不是一个好的设计。

至于为什么，我不确定你在那里寻找什么答案。如果不允许，那么它将防止让两个枚举引用相同值是有意义的情况。（我相信我可以很容易地想出一些有意义的例子。）

因此，如果要在限制我能做的事情或因为我通常不想要重复而受到限制之间做出选择，那么我会投票支持这种方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:34:03.567

[C++ 标准](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)第 7.2 节第1 部分仅要求常量表达式为整数或枚举类型；不要求常量值是不同的。如果您认为这使您的代码更具表现力，这为您在为常量起别名时提供了额外的灵活性。例如，

```
enum color {red=1,green=2,blue=3,max_color=3};

if (myColor > max_color) {/* report an error *} 
```

好于

```
enum color {red=1,green=2,blue=3};

if (myColor > blue) {/* report an error *} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:26:55.163

考虑你已经开发了一个框架。该框架使用枚举进行参数化

出于某种原因，您对较早使用的术语不再满意。

只是替换该术语会破坏现有软件。您决定提供新旧术语（至少在一个发布周期内）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:28:49.810

```
#include <iostream>

using namespace std;

enum color {blue, black=3, yellow=3};

int main()
{

    color a = blue;
    color b = black;
    color c = yellow;
    cout<<a<<endl;
    cout<<b<<endl;
    cout<<c<<endl;

        return 0;
} 
```

使它们相同不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:34:18.603

是的，它是有效的。因为它不违反语言规范。以下引用自 N3242 草案，如您在示例中所见，与不同枚举数关联的值不必不同：

```
The identifiers in an enumerator-list are declared as constants, 
and can appear wherever constants are required. An enumeratordefinition
with = gives the associated enumerator the value indicated by the 
constant-expression. The constant-expression shall be an integral 
constant expression (5.19). If the first enumerator has no initializer,
the value of the corresponding constant is zero. An enumerator-definition without
an initializer gives the enumerator the value obtained by
increasing the value of the previous enumerator by one.
[ Example:
enum { a, b, c=0 };
enum { d, e, f=e+2 };
defines a, c, and d to be zero, b and e to be 1, and f to be 3\. —end example ] 
```

# python - 如何为 mod_wsgi (Python) 配置路径并处理请求

> ID：10074594
> 
> 赞同：0
> 
> 时间：2012-04-09T14:19:27.530
> 
> 标签：python, web, mod-wsgi

虽然我有相当多的 Python 经验，但我从未将它用于 Web，而且我对 PHP 有大量的 Web 经验。

现在我想创建一个`service.py`在`example.com`. 我按照文档的建议安装了 mod_wsgi，我的网络服务器是 Apache 2.2，mod_wsgi 加载成功。

如何配置我的 Web 服务器/mod_wsgi 以便`example.com/service`处理请求`service.py`？

那么如何从 python 脚本访问请求参数（如 $_GET、$_POST、$_FILES）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:27:33.490

使用 mod_wsgi，您可以通过设置来配置提供哪些 URL `WSGIScriptAlias`。但是，您的脚本需要是一个实际的 WSGI 应用程序，它公开一个`application`由服务器调用的变量。

我怀疑将脚本配置为简单的 CGI 会更容易。然后，您可以使用标准库中的[`cgi`模块](http://docs.python.org/library/cgi.html)来访问您的请求参数（但请注意，您提供的示例是特定于 PHP 的：它们在 Python 中的访问方式不同，具体取决于特定的框架）。

另一种选择是使用像 Flask 这样的迷你框架，它将封装所有这些并为您提供一个简单的接口，以便在您的 service.py 脚本中使用。

# boot - 从 PCIE USB 3.0 扩展卡启动

> ID：10074599
> 
> 赞同：4
> 
> 时间：2012-04-09T14:19:37.380
> 
> 标签：boot, bootloader, pci-e

我刚买了一个支持 USB 3.0 的 PCIE 扩展卡。它在 Windows 中运行良好。但是，我没有成功启动我的 USB 3.0 拇指驱动器（它连接到扩展卡），因为没有从启动菜单中选择的选项。所以我只是想知道是否有任何方法可以启动我的 USB 3.0 设备？是否有任何启动软件可以扩展对 USB 3.0 扩展卡的支持？例如 Plop Boot Manager 5.0 之类的东西？或者，有可能开发一个吗？

我的扩展卡是创见PDU3 [http://www.transcend-info.com/products/catlist.asp?ModNo=291&Func1No=1](http://www.transcend-info.com/products/catlist.asp?ModNo=291&Func1No=1)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:41:37.810

从扩展卡（无论是 PCIE SATA 卡、PCI 网卡还是 PCIE USB 卡）启动与从板载设备启动不同。卡*本身*必须支持通过自己的引导 ROM 引导。在某些扩展卡上，引导 ROM 芯片是可选的，可能不存在；其他卡没有引导ROM。

我在网上找不到有关您的特定卡上是否有引导 ROM 的信息。

看起来 Plop Boot Manager 目前不支持 USB 3.0，尽管他们计划很快支持。尝试没有坏处。如果您正在引导 Linux，plopKexec 对 xHCI 具有实验性支持。

如果你喜欢冒险，你可以尝试[这个过程](http://etherboot.org/wiki/romdumping)来尝试从你的卡中转储扩展 ROM（如果有的话），然后在上面运行[strings](http://en.wikipedia.org/wiki/Strings_%28Unix%29)或[xxd](http://man.cx/xxd)以查看那里是否有任何引导代码。

# image - 如何将背景图像动态加载到 JPanel 中？

> ID：10074608
> 
> 赞同：1
> 
> 时间：2012-04-09T14:20:07.777
> 
> 标签：image, swing, jpanel

我有一个摆动 gui 应用程序。我想输入图像路径，然后单击按钮将图像加载到 jpanel 中。问题是它不会被加载，但是如果我在启动jframe时添加能够加载图像的扩展jpanel，则可以正常加载图像。这是为什么？

相关代码：

```
package com.xdg.graphic;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class ImageLoader extends JPanel {
    private String imgPath;
    private BufferedImage image;

    public ImageLoader(String imgPath) {
        this.imgPath = imgPath;
        try {
            this.image=ImageIO.read(new File(imgPath));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void paint(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }

    @Override
    protected void paintComponent(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }

    public Dimension getPreferredSize() {
        if (image == null) {
             return new Dimension(100,100);
        } else {
           return new Dimension(image.getWidth(null), image.getHeight(null));
       }
    }

    public String getImgPath() {
        return imgPath;
    }

    public void setImgPath(String imgPath) {
        this.imgPath = imgPath;
    }

} 
```

调用者类：

```
package com.xdg.image;

import com.xdg.graphic.ImageLoader;
import sun.awt.windows.ThemeReader;

import java.awt.*;

public class FrmImgCropper extends javax.swing.JFrame {
    private ImageLoader imageLoader;

    /** Creates new form FrmImgCropper */
    public FrmImgCropper() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    //GEN-BEGIN:initComponents
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel2 = new javax.swing.JPanel();
        tfImagePath = new javax.swing.JTextField();
        btnPreview = new javax.swing.JButton();
        tfRatioW = new javax.swing.JTextField();
        tfRatioH = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        btnLoad = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        btnPreview.setText("Preview");

        jLabel1.setText(":");

        btnLoad.setText("Load");
        btnLoad.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLoadActionPerformed(evt);
            }
        });

        jLabel2.setText("Image Path:");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(jPanel2Layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        jPanel2Layout
                                .createSequentialGroup()
                                .addGap(34, 34, 34)
                                .addComponent(tfRatioW, javax.swing.GroupLayout.PREFERRED_SIZE, 55,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(tfRatioH, javax.swing.GroupLayout.PREFERRED_SIZE, 53,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 123,
                                        Short.MAX_VALUE)
                                .addComponent(btnLoad, javax.swing.GroupLayout.PREFERRED_SIZE, 82,
                                        javax.swing.GroupLayout.PREFERRED_SIZE).addGap(46, 46, 46)
                                .addComponent(btnPreview).addGap(276, 276, 276))
                .addGroup(
                        jPanel2Layout.createSequentialGroup().addGap(66, 66, 66).addComponent(jLabel2)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(tfImagePath, javax.swing.GroupLayout.DEFAULT_SIZE, 593, Short.MAX_VALUE)
                                .addGap(29, 29, 29)));
        jPanel2Layout.setVerticalGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        javax.swing.GroupLayout.Alignment.TRAILING,
                        jPanel2Layout
                                .createSequentialGroup()
                                .addContainerGap(20, Short.MAX_VALUE)
                                .addGroup(
                                        jPanel2Layout
                                                .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel2)
                                                .addComponent(tfImagePath, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(18, 18, 18)
                                .addGroup(
                                        jPanel2Layout
                                                .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel1)
                                                .addComponent(tfRatioW, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(tfRatioH, javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(btnPreview).addComponent(btnLoad)).addGap(20, 20, 20)));

        getContentPane().add(jPanel2, java.awt.BorderLayout.SOUTH);

        pack();
    }// </editor-fold>
    //GEN-END:initComponents

    private void btnLoadActionPerformed(java.awt.event.ActionEvent evt) {
        if (imageLoader == null) {
            imageLoader = new ImageLoader(tfImagePath.getText());
            imageLoader.setBackground(Color.green);

            getContentPane().add(imageLoader, BorderLayout.CENTER);
            getContentPane().repaint();
            this.repaint();//image does not show up this way dnamically
        } else {
            imageLoader.setImgPath(tfImagePath.getText());
            imageLoader.repaint();
        }

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {

                FrmImgCropper cropper = new FrmImgCropper();
                cropper.getContentPane().add(new ImageLoader("i:\\temp4\\car.jpg"));  //if I add the image loader here directly,image shows up
                cropper.setSize(800, 900);
                cropper.setVisible(true);
            }
        });
    }

    //GEN-BEGIN:variables
    // Variables declaration - do not modify
    private javax.swing.JButton btnLoad;
    private javax.swing.JButton btnPreview;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField tfImagePath;
    private javax.swing.JTextField tfRatioH;
    private javax.swing.JTextField tfRatioW;
    // End of variables declaration//GEN-END:variables

} 
```

有任何想法吗？我已经工作了两个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:16:15.027

要更新您的面板，您应该在面板的父级上调用 revalidate() 方法，而不是在新面板上调用 repaint()，因为您更改的是内容本身（面板）而是图像。在您的情况下，它的内容窗格，应该验证哪些内容。

但是，如果您问我，它仍然不是更新面板内图像的最佳方法...
您可以尝试这个简单的示例（它更简单并且效果很好）：

```
private static BufferedImage image = null;

public static void main ( String[] args )
{
    final JFrame imageFrame = new JFrame ();
    imageFrame.setLayout ( new BorderLayout () );

    final JPanel panel = new JPanel ()
    {
        protected void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );

            if ( image != null )
            {
                g.drawImage ( image, getWidth () / 2 - image.getWidth () / 2,
                        getHeight () / 2 - image.getHeight () / 2, this );
            }
        }
    };
    imageFrame.add ( panel, BorderLayout.CENTER );

    imageFrame.add ( new JButton ( "Load image" )
    {
        {
            addActionListener ( new ActionListener ()
            {
                public void actionPerformed ( ActionEvent e )
                {
                    JFileChooser fc = new JFileChooser ();
                    fc.setDialogType ( JFileChooser.OPEN_DIALOG );

                    if ( fc.showOpenDialog ( imageFrame ) == JFileChooser.APPROVE_OPTION )
                    {
                        try
                        {
                            image = ImageIO.read ( fc.getSelectedFile () );
                            panel.repaint ();
                        }
                        catch ( IOException e1 )
                        {
                            //
                        }
                    }
                }
            } );
        }
    }, BorderLayout.SOUTH );

    imageFrame.setSize ( 500, 500 );
    imageFrame.setLocationRelativeTo ( null );
    imageFrame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    imageFrame.setVisible ( true );
} 
```

如果您更改面板内的图像，您唯一需要做的实际事情是重新绘制受影响的面板矩形（或者如果您不喜欢深入了解 Swing 中图形的工作方式，则重新绘制整个面板）。

如您所见，我什至没有触摸面板本身 - 只是更改了图像源。

# c# - 如何让侧边栏自动拉伸

> ID：10074609
> 
> 赞同：0
> 
> 时间：2012-04-09T14:20:08.180
> 
> 标签：c#, asp.net, css

我估计，这是一个简单的问题。我的页面上有一个带有自己独特颜色的侧边栏，我希望它根据主要内容区域中的文本进行放大和缩小，以便它从导航栏延伸到页脚。我尝试在它上面设置一个高度，但这只会迫使整个内容区域在底部有大量的空白区域。我希望侧边栏的高度由主要区域中的内容量决定。

这是侧边栏的 CSS（如果我需要发布更多代码，请告诉我）：

```
.LeftSidebar
{
float: left;
background-color: #1b619c;
color: White;
width: 175px;
text-align: center;
padding: 20px;
clear:both;
} 
```

我仍在努力学习，因此将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:35:19.547

您正在寻找的是一个 CSS 列。有几个选项可以使用设置三列布局或两列布局的 CSS 包装器。我建议您访问以下网站：

[http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)

或者，如果您使用 CSS3 标记，那么您也可以使用 display:table 和 display:table-cell 标记来设置列。请参考本站：

[http://www.onenaught.com/posts/201/use-css-displaytable-for-layout](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)

```
div#ContentWrapper { display: table; }
div#LeftSidebar { display: table-cell; }
div#MainContent { display: table-cell; } 
```

我显示 ID 是因为您应该使用一个类的唯一时间是在同一页面上有多个对该类的引用。

但是，这将比仅修改侧栏列的 css 复杂一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:34:50.303

您可以`height:100%`通过 jQuery 根据显示（屏幕、监视器）大小设置或调整高度：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
function updateView()
    {   
         var obj = $(".LeftSidebar");
         var sc_size = $(window).height()

         var obj_height = sc_size - 90 //90 is example of footer os smthg else height

         $(".LeftSidebar").css({'height': obj_height});
    }
</script> 
```

`updateView()`继续_`<body onload="updateView()">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:43:14.540

如果你有一个 DIV 元素作为你的侧边栏，具有固定的宽度，它会根据你内容的大小自动垂直拉伸。

让我把钱放在嘴边：http: [//jsfiddle.net/alexpeta/NkHY5/](http://jsfiddle.net/alexpeta/NkHY5/)

# netty - netty 3.3.1 ChannelLocal如何清空防止内存泄漏？

> ID：10074616
> 
> 赞同：1
> 
> 时间：2012-04-09T14:20:43.480
> 
> 标签：netty

因此，当在通道上的处理程序之间共享项目时，ChannelLocal（带有伴随的 put 和 get）是 3.3.1 中的解决方案。

当我处理完处理程序链后，ChannelLocal 是否会自动意识到我的 Channel 已关闭并清空它在 ChannelLocal 中的条目？或者，我是否需要在完成共享对象后显式地“清空”或清空 ChannelLocal？

IE，如果我使用 ChannelLocal 并且在完成后没有明确地将我放入其中的项目清空，我是否会发生内存泄漏？

挖掘源代码注释让我不确定垃圾收集如何与项目交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:37:19.290

如果使用参数 true 构造 ChannelLocal，一旦 Channel 关闭，它就会自动清理。否则你需要自己做。默认是用 false 构造它。

见[1]。

[1] [http://netty.io/docs/stable/xref/org/jboss/netty/channel/ChannelLocal.html#127](http://netty.io/docs/stable/xref/org/jboss/netty/channel/ChannelLocal.html#127)

# java - 将正则表达式应用于 SAX 流

> ID：10074617
> 
> 赞同：1
> 
> 时间：2012-04-09T14:20:48.273
> 
> 标签：java, xml, regex, sax

有人知道一个好的Java*流式*正则表达式解析器吗？

特别是，我希望能够通过并检测内容是否与给定正则表达式匹配以及在何处匹配 XML 元素流的内容。例如，我想从 MediaWiki 元素流的内容中查看 SAX“字符”回调，但要检测匹配 ==([^=\n]+)== 的子字符串的位置。

诀窍是内容以不确定大小的块出现，这意味着匹配的子字符串可能会在多个回调中被破坏。

当然，简单的解决方案是简单地缓冲所有回调并在长字符串上运行 Java 的内置正则表达式引擎。不幸的是，这占用了太多内存。

复杂性的下一步是将正则表达式转换为 DFA 并检测 DFA 何时进入“接受”状态。我想知道是否有人知道是否有一些 Java 库可以简化这个过程。

我一直在看Ragel；但这需要在编译时指定 DFA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:42:40.523

也许[hitEnd](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#hitEnd%28%29)在这种情况下`Matcher`可能有用：

> 当此方法返回 true 时，更多输入可能会改变上次搜索的结果。

您可以尝试匹配每个块，如果没有匹配但`hitEnd`返回 true，则必须附加下一个块并重试。

如果匹配器也以某种方式返回了可能的起始索引，那就太好了，但这似乎是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T14:46:15.770

缓冲这些回调，每次关闭标签时检查正则表达式，丢弃缓冲区

# visual-studio-2010 - 将系列列表传递给 SetSeries

> ID：10074620
> 
> 赞同：4
> 
> 时间：2012-04-09T14:20:55.730
> 
> 标签：visual-studio-2010, highcharts

我将 DotNet.Highcharts 与 Visual Studio 2010 结合使用。我创建了一系列系列：

```
List<Series> allSeries = new List<Series>(); 
```

然后我遍历一个数据库并添加了几个不同的系列。然后我创建了一个 Highchart 并需要将 allSeries 列表添加到它。我有下面的代码，我曾经一次创建一个系列。如何获取 allSeries 列表并将其传递给 SetSeries？

```
.SetSeries(new[]
           {
               new Series { Name = "Combiner 2", Data = new Data(myData2) },
               new Series { Name = "Combiner 3", Data = new Data(myData3) }
           }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:38:51.877

如果我假设`myData2`and`myData3`对象包含在或可以从中提取`allSeries`，那么您应该能够执行以下操作：

```
.SetSeries(allSeries.Select(s=> new Series { Name = s.Name, Data = s.Data })); 
```

编辑：如果 set series 不是在寻找`IEnumerable<Series>`而是需要`Object[]`or `Series[]`，那么你可以这样做：

```
//casts series elements to object, then projects to array
.SetSeries(allSeries.Select(s=> (object)new Series { Name = s.Name, Data = s.Data }).ToArray()); 
```

或者这个：

```
//projects series elements to array of series
.SetSeries(allSeries.Select(s=> new Series { Name = s.Name, Data = s.Data }).ToArray()); 
```

这完全取决于方法签名的用途`SetSeries`。

# linux - 发送 ipv6 数据包

> ID：10074622
> 
> 赞同：1
> 
> 时间：2012-04-09T14:21:06.953
> 
> 标签：linux

我想从一台机器从终端向另一台机器发送一个 ipv6 数据包。谁能告诉我任何命令？我尝试 `echoping -6 fd06:63df:059d:a45c::1`了命令，但出现错误 `The syntax hostname:port is only for HTTP or ICP`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:01:21.103

试试ping6。

或者，尝试以下操作：

```
echoping -6 '[fd06:63df:059d:a45c::1]' 
```

如果可能与端口语法（即附加冒号和端口号）混淆，IPv6 地址可以用方括号括起来。在这种情况下，我也避开了方括号，因为它们往往会被 shell 解释。

**编辑：** 这仍然不适用于回显，但这是因为程序中的错误。手册页声称它支持 RFC2732 样式的 IPv6 地址，但它不支持。它明确检查地址中的“：”并拒绝接受它。

一种解决方法是在 /etc/hosts 中插入一个虚拟名称，然后将该名称用作目标。理想情况下，您当然只需修复回声；）

# prolog - 附加嵌套列表

> ID：10074623
> 
> 赞同：0
> 
> 时间：2012-04-09T14:21:08.880
> 
> 标签：prolog

我想将两个列表说 [1,2] 和 [3,4] 附加到单个列表中，

`[[1,2],[3,4]]`. 这怎么能在序言中实现。我总是把它当作`[1,2,3,4]`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:27:01.617

```
glue(A, B, [A, B]). 
```

这个不用多说了吧！

用法是

```
?- glue([1, 2], [3, 4], R).
R = [[1, 2], [3, 4]]. 
```

但实际上，您可以对其进行硬编码，而不是将其包装在谓词中。

# android - HTC Sensation 的特殊布局目录

> ID：10074631
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:21:43.587
> 
> 标签：android, android-layout, size, screen

我正在尝试将我的应用程序布局从 Galaxy 的应用程序布局转换为 HTC Sensation 的应用程序布局。我`layout-540x960`根据屏幕大小创建了一个文件夹，但出现此错误：`invalid resource directory name layout-540x960` 如何解决？谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:28:03.460

你不能给一个布局目录任何你想要的名字。请阅读这篇文章以了解如何支持不同的屏幕尺寸：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

> 可用于提供特定于大小的资源的配置限定符有 small、normal、large 和 xlarge。例如，超大屏幕的布局应该放在 layout-xlarge/ 中。
> 
> 从 Android 3.2（API 级别 13）开始，不推荐使用上述大小组，您应该改用 swdp 配置限定符来定义布局资源所需的最小可用宽度。例如，如果您的多窗格数位板布局需要至少 600dp 的屏幕宽度，则应将其放置在 layout-sw600dp/ 中。

# php - 上传文件时总是显示错误

> ID：10074632
> 
> 赞同：0
> 
> 时间：2012-04-09T14:21:52.247
> 
> 标签：php, javascript, jquery, file-upload

我在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)有一个应用程序，用户在其中添加了一个表格行，它将在该行中显示一个文件输入。现在我遇到的问题是，如果您使用输入选择一个文件并单击“上传”，它总是指出上传文件时出错，任何文件都会发生这种情况。

我已将文件的权限设置为能够读取和写入，但它仍然指出上传文件时出现错误。如果有人使用过 MAx 的 AJAX 文件上传器并且之前遇到过这个问题但后来修复了它，那么我可以问你是如何解决这个问题的。如果没有，那么我是否有其他方法可以解决此问题，以便它停止显示完全合法文件上传的错误消息，而是显示文件上传成功消息。

当我在此链接中测试使用不同服务器的相同代码时：[ [er5325.aisites.com/scripts/stack/test.html](http://er5325.aisites.com/scripts/stack/test.html)，然后在上传合法文件时它不会显示错误消息。

我正在使用大学的服务器 helios.hud.ac.uk

下面是文件输入的代码和停止和开始上传的函数：

```
 <script type="text/javascript">
     var sourceForm; 

    function insertQuestion(form) {   

        var $tbody = $('#qandatbl > tbody'); 
        var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
        var $image = $("<td class='image'></td>"); 

       var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload(this);' class='imageuploadform' >" + 
        "<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/><label>" + 
        "File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label>" + 
        "(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/><label>" + 
        "<input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
        "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px;solclass #fff;'></iframe></form>");

        $image.append($fileImage);

        $tr.append($image);  
        $tbody.append($tr); 

    }

   function startUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceForm = imageuploadform;
      return true;
}

    function stopUpload(success){
          var result = '';
          if (success == 1){
             result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
          }
          else {
             result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
          }
          $(sourceForm).find('.imagef1_upload_process').css('visibility','hidden');
          $(sourceForm).find('.imagef1_upload_form').html(result + '<label>File: <input name="fileImage" type="file"/><\/label><br/><label>(jpg, jpeg, pjpeg, gif, png, tif)</label><br/><br/><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>');
          $(sourceForm).find('.imagef1_upload_form').css('visibility','visible');     
          return true;   
    }
    </script> 
```

下面是上传文件的上传页面 (imageupload.php)：

```
<?php
   // Edit upload location here
   $destination_path = getcwd().DIRECTORY_SEPARATOR;

   $result = 0;

   $target_path = $destination_path . basename( $_FILES['fileImage']['name']);

   if(@move_uploaded_file($_FILES['fileImage']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);
?>

<script language="javascript" type="text/javascript">window.top.window.stopUpload(<?php echo $result; ?>);</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:48:19.380

我无法遵循您的代码，但函数 startUpload(source_form) 可能没有按照您的意愿执行。您对局部变量使用与全局变量相同的名称，然后编写类似 sourceForm = source_form; 那不会有任何影响。也许您可以找到一种方法来避免使用全局变量，或者将局部变量重命名为不同的名称。

```
function startUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceForm = imageuploadform;
      return true;
} 
```

我不知道这是否与错误有关，但会使您的代码不那么奇怪。

您是否测试过您的脚本可以在您尝试的地方写入文件？你有没有访问服务器的日志来检查相关的错误？

# rhomobile - rhomobile 按字母顺序列出 ActiveRecord 对象

> ID：10074637
> 
> 赞同：0
> 
> 时间：2012-04-09T14:22:07.403
> 
> 标签：rhomobile

如何在 rhomobile 中创建查询集并查看（在我的情况下为@contacts）以按字母顺序列出 ActiveRecord 对象？

我正在尝试执行此操作；

A -> 联系人以 A 开头

B -> 联系人以 B 等开头。

最后看看：http: [//jquerymobile.com/demos/1.0b1/#/demos/1.0b1/docs/lists/lists-divider.html](http://jquerymobile.com/demos/1.0b1/#/demos/1.0b1/docs/lists/lists-divider.html)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:36:44.093

对您来说最简单的事情是对您的查询集进行排序并将 listdividers（就像您对 jQuery Mobile 所做的那样）放置在您的 ERB 文件中，只要下一个元素以不同于前一个元素的字母开头（这可以实现通过 for-each 循环）。

我假设您使用的是 Rhodes (Rhomobile) 的 Contacts API。在这种情况下，实际上[这里](http://docs.rhomobile.com/rhodes/device-caps#pim-contacts)有一个示例，他们根据 对联系人进行排序`display_name`。但是应该注意，该`display_name`属性仅在 Android 平台上可用。因此，您可能希望将其替换为所有平台都支持的`first_name`或属性。`last_name`

[您可以在此处](http://ariejan.net/2007/01/28/ruby-sort-an-array-of-objects-by-an-attribute)找到另一个解释 Ruby 排序的参考资料。

# python - 获取两个字符串之间添加和删除的单词

> ID：10074638
> 
> 赞同：2
> 
> 时间：2012-04-09T14:22:09.297
> 
> 标签：python, diff

给定两个字符串，我希望能够 - 在 Python 中 - 能够确定在两者之间添加了哪些单词以及删除了哪些单词。我见过 difflib，但显然它做不到。

例如：给定 'hello my name is' 和 'hello my guy is'，它将返回 ['guys'] 作为添加的单词，并将 ['name'] 作为删除的单词。非常感谢。

编辑：可能我给出的例子不是最好的。它也应该在当前文本和新文本之间没有空格的情况下工作。也许使用 difflib 来获取所有新部分，然后使用正则表达式“\b”进行拆分。我会试一试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:01:06.610

关于 python，首先要记住的是它有“包括电池”。这意味着您应该在标准库中查找一个工具来完成您需要的工作，然后再自己重新发明它。

更强大的技术是重新使用[difflib.SequenceMatcher](http://docs.python.org/library/difflib.html#sequencematcher-examples)来查找字符串中的差异。例子：

```
import difflib

before = 'hello my name is'
after = 'hello my guys is'

def isjunk(string):
    "Return True if we don't care about this string"
    return string == ' '

s = difflib.SequenceMatcher(isjunk)
s.set_seqs(before, after)

for (
        opcode,
        before_start, before_end,
        after_start, after_end
) in s.get_opcodes():
    if opcode == 'equal':
        # We don't care.
        continue

    print "%7s '%s' -> '%s'" % (
            opcode,
            before[before_start:before_end],
            after[after_start:after_end],
    ) 
```

这会产生此输出，显然可以对其进行自定义以完全满足您的需要：

```
replace 'name' -> 'guys' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:39:55.817

```
before = "hello my name is"
after = "hello my  guy is test"

before = before.split(' ')
after = after.split(' ')

for item in after:
    if not item in before:
        print item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:39:33.990

这不是特别漂亮，但似乎适用于我能想到的大多数情况。我相信这也可以整理很多，并且应该很容易区分大小写。

```
def freqs(list):
    words = {}
    for word in list:
        words[word] = words.get(word, 0) + 1
    return words

def added_and_removed(a, b):
    af = freqs(a.split())
    bf = freqs(b.split())

    removed = []
    added = []

    for key in af:
        num = bf.get(key)
        if num == None:
            if af[key] > 1:
                words = [key]*af[key]
                removed.extend(words)
            else:
                removed.append(key)

    for key in bf:
        num = af.get(key)
        if num == None:
            added.append(key)
        elif num > 1:
            words = [key]*(num-1)
            removed.extend(words)

    return added, removed

a = 'hello hello hello my name is Dave dave bar foo'
b = 'hello my guys is test easy rob dave beef foo'     

added, removed =  added_and_removed(a, b)
print added
print removed 
```

给

```
['beef', 'rob', 'easy', 'test', 'guys']
['bar', 'name', 'Dave', 'hello', 'hello'] 
```

# php - 如何在 PHP 中用更灵活的代码替换 switch 语句？

> ID：10074639
> 
> 赞同：0
> 
> 时间：2012-04-09T14:22:16.863
> 
> 标签：php, oop, design-patterns

我的数据库中有名为**帖子**的表。每个**帖子**都有名为**social_network的字段**

当我在我的代码中将所有**帖子**放入数组时，我需要根据它的**social_network**字段为每个帖子创建实例。

现在我为此使用 switch 语句，但我不喜欢它，因为它不灵活。

```
$posts = DataBase::getPosts(); // pseudocode
foreach($posts as $post) {
  switch($post->getSocialNetwork()){
    case 'Facebook':
      $social = new FacebookPost($post->getId());
      break;
    case 'Twitter':
      $social = new TwitterPost($post->getId());
      break;        
    // .... other social networks
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T14:26:54.347

将接口添加到定义了相同基本必要方法的类 FacebookPost 和 TwitterPost（例如 SocialPostInterface）`getId()`，`postToNetwork()`然后您可以根据需要添加任意数量的新社交网络，而无需更改这段代码。他们只需要实现接口

然后体验多态的威力：

```
foreach ($posts as $post) {
    $className = $post->getSocialNetwork() . 'Post';
    // lets check if such class exists
    if (!class_exists($className, false /* do not attempt autoload */)) {
        throw new Exception("Unknown social network post class $className");
    }
    $social = new $className($post->getId());
    $social->doSomeStuffThatTheInterfaceHasDeclared();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T14:30:19.277

我不认为你可以避免这种代码。但是您可能希望将其移至抽象工厂，因此您不必在控制器中查看它。

```
$posts = DataBase::getPosts(); // pseudocode
foreach($posts as $post) {
    $social = SocialFactory::post($post);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:29:50.963

```
$socialClass = $post->getSocialNetwork() . 'Post';
$social = new $socialClass($post->getId()); 
```

您可以从包含其名称的字符串中创建一个新对象。

# c# - 有没有等价物？: Javascript/Jquery 中的 C# 运算符？

> ID：10074640
> 
> 赞同：-8
> 
> 时间：2012-04-09T14:22:17.383
> 
> 标签：c#, javascript, jquery

我想在 JavaScript/jQuery 中编写以下等效的 C# 代码

```
(x == 0 && y < 0 ? x : x+y) 
```

在 JavaScript/jQuery 中是否有类似的速记方式，或者我必须写整个 if else。

我需要在 for 循环定义中加入这样的条件，

```
for (i=0; i< (x == 0 && y < 0 ? x-y : x+y); i++) 
```

因此想知道是否有一种方法可以在 JavaScript 中做类似的事情。据我所知，我将不得不编写一个 if else，计算该值，然后使用该值。但也许有人知道更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T14:24:09.003

是的，三元运算符也存在于 Javascript 中。

您发布的代码

```
for (i=0; i< (x == 0 && y < 0 ? x-y : x+y); i++) 
```

将工作，逐字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:23:57.873

这应该有效：

```
for (i=0; i< (x == 0 && y < 0 ? x-y : x+y); i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:25:18.937

那最初是 ac/c++ 运算符。据我所知，这个运算符在 javascript 中可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T14:27:23.973

请想想maint。程序员并重新考虑一下。

为什么不这样：

```
var countTo=0;
if( x == 0 && y < 0 )
    countTo = x-y;
else
    countTo = x+y;

for (i=0; i< countTo; i++){
} 
```

虽然它可能是几行额外的代码，但它更具可读性和可维护性，并且在表达你的意图方面要好得多，如果在 for 循环声明中是一个神秘的内联！

# java - jdom 文档的大小与单个变量

> ID：10074642
> 
> 赞同：0
> 
> 时间：2012-04-09T14:22:25.803
> 
> 标签：java, xml, jsp, session, jdom

我计划从 JSP 中的 xml 文件中读取配置文件数据。

现在我可以读取它并将重要信息存储在单个会话变量中，或者将 xml 文件中的整个部分放入 jdom 文档中并将其放入单个会话变量中。

根据您的经验，数据大小会影响大还是可以忽略不计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:15:16.017

[JDOM 2.0.0](https://github.com/hunterhacker/jdom/wiki/JDOM-2.0) - 昨天发布（我是维护者）改进了内存占用……它使用的内存不到输入文档的 10 倍。此外，如果在解析 XML 时使用“SlimJDOMFactory”，则使用的更少。使用 SlimJDOMFactory 在 1.5Meg 中解析一个典型的 275KB 文档。[在http://hunterhacker.github.com/jdom/jdom2/performance.html](http://hunterhacker.github.com/jdom/jdom2/performance.html)上查看 JDOM 2.0.0 的性能指标并搜索 SlimJDOMFactory 以使用（较慢）但更高效的工厂获得结果。

这绝不会回答您的问题，因为实际上，这完全取决于您的输入数据大小。我的经验和我的偏见是，对于小型文档，将其全部加载到内存中会更容易，而对于大型文档则只需要“出汗”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:52:44.717

使用 DOM 将 XML 存储在内存中时，有一条经验法则。XML 文件的大小 * 10。因此，如果您的 XML 文件是 1MB 大，那么您将需要 10MB 内存来存储它。

但根据我的经验，我永远不会在内存中存储 DOM 文档。曾经有学生尝试这样做，但 XML 文件有 50MB 大，猜猜会发生什么？我们的内存用完了。

对于您的情况，我将创建一个可以保存所有相关信息的类，通过阅读 xml 来填充该类。

您真的需要在会话中存储配置文件数据吗？你真的需要它吗？有时只需要一个 id 或一个小类就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:51:47.867

好吧，您在内存中存储的对象越多，您拥有的可用堆内存就越少，这是没有办法的。

这实际上取决于您的应用程序域。

但总的来说，人们在数据源（您的 xml 文件/s）和他们的应用程序域模型之间使用缓存解决方案（ehCache 就是其中之一）。

缓存过期或按需清除，因此您可以合理控制对象及其占用的堆内存。

# c# - nunit 2.6 可以与 resharper 6.1.1 一起运行吗？

> ID：10074645
> 
> 赞同：5
> 
> 时间：2012-04-09T14:22:42.640
> 
> 标签：c#, visual-studio, nunit, resharper

有没有办法升级 resharper 6.1.1 以在测试浏览器中或一般使用 nunit 2.6？
`NUnit`2.6 支持新的`ActionAttribute`. 我需要它来运行数据库创建功能。

有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:50:48.520

不，它不能。

这是来自 R# 开发人员之一：

> 2012 年 3 月 5 日
> 
> 回复：运行 NUnit 2.6 测试的异常 NUnit 2.6 仅在几天前发布，ReSharper 6.1.1 尚不支持它，因为它发布得更早。我们正在努力支持 NUnit 2.6，它将在未来的版本中提供。

博客：[运行 NUnit 2.6 测试的异常](http://devnet.jetbrains.net/message/5453470?tstart=0)

# python - 检索最高值的列表位置？

> ID：10074646
> 
> 赞同：0
> 
> 时间：2012-04-09T14:22:44.413
> 
> 标签：python, list

有一个带有浮点值的列表，可以不同也可以不同。如何找到此列表中最高值之一的随机选择的列表索引？

如果您对上下文感兴趣：我尝试为纸笔游戏[Battleship](http://en.wikipedia.org/wiki/Battleship_%28game%29)编写求解器。我尝试计算每个字段命中的概率，然后希望求解器在*最有可能的位置之一*射击，这意味着检索我的可能性列表中最高可能性的索引，然后告诉游戏引擎这个索引作为我的选择。第一步已经表明它可能发生，有很多领域具有相同的可能性。在这种情况下，随机选择其中一个是有意义的（而不仅仅是总是选择第一个或类似的东西）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:26:35.470

使用[如何查找列表中最大值的所有位置来查找最大值？](https://stackoverflow.com/questions/3989016/how-to-find-positions-of-the-list-maximum). 然后使用 . 从列表中随机选择一个[`random.choice`](http://docs.python.org/library/random.html#random.choice)。

```
>>> m = max(a)
>>> max_pos = [i for i, j in enumerate(a) if j == m]
>>> random.choice(max_pos) 
```

# scala - 使用 Scala 实现可扩展性良好的 MMORPG？

> ID：10074649
> 
> 赞同：3
> 
> 时间：2012-04-09T14:23:04.887
> 
> 标签：scala, concurrency, scalability

Scala 是实现可扩展性良好的 MMORPG 的好选择吗？我读到有人建议 Erlang，因为更好的并发处理。但是 Scala 具有参与者/消息驱动的并发性和函数式编程。那不应该也很好地处理并发和扩展吗？

对不起，我不了解 Erlang，也没有 Scala 的经验，也没有 MMORPG 开发。这就是为什么我还不能使问题更具体的原因。我正在寻找开发易于扩展的 MMORPG 的最佳方法。并认为 Scala 可能是/可能是一个不错的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:30:05.533

Scala 非常适合 MMORPG，但它不一定具有可用于其他平台（尤其是 C++）的现有框架。Erlang 的容错性和可扩展性是传奇的，但是如果您使用 Akka 框架，您将拥有一组可比较的功能（大部分）。

使用 Scala 的一个优势是您可以利用 Project Darkstar，这是一个基于 Java 的 MMORPG 创建平台。 [这是一个正在使用的示例](http://hvilela.com/java-mmo-game-engine-using-darkstar-and-jmonkey/)，尽管我不确定它是否已被积极维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T14:29:18.653

Scala 演员（考虑[akka](/questions/tagged/akka "显示标记为“akka”的问题")）实际上受到[erlang](/questions/tagged/erlang "显示标记为“erlang”的问题")的影响。这是非常主观的，但我相信演员模型非常适合[mmorpg](/questions/tagged/mmorpg "显示标记为“mmorpg”的问题")。

我猜整个架构将涉及每个角色/NPC 的演员——Akka 完全有能力在一个集群中处理数百万个演员。哦，我有没有提到 Akka 2.0 可以轻松分发？

# c++ - 将模板成员函数传递给模板

> ID：10074654
> 
> 赞同：3
> 
> 时间：2012-04-09T14:23:22.760
> 
> 标签：c++, templates, template-meta-programming

我有一组以整数 N 为模板的类型，以及一个包含 N <= K 和 N >= 0 的所有类型的类，例如

```
template <int N> struct T { int i; }

template <int N> struct TContainer{
    std::vector<T<N>> vec;
    TContainer<N - 1> prev;

    template <int target_n> TContainer<target_n> & get() { return prev.get(); }
    template <> TContainer<N> & get<N>() { return *this; }
};

template <> struct TContainer<0>{
    std::vector<T<N>> vec;

    template <int target_n> TContainer<target_n> & get() {  }
    template <> TContainer<0> & get<0>() { return *this; }
};

class ContainsAll{
    TContainer<K> my_data;
    int my_instance_data;
}; 
```

ContainsAll 是否有可能具有某种 foreach 函数，该函数能够采用模板成员函数作用于所有 N 的每个元素？就像是

```
template<int N>
void for_each(TContainer<N> & container, template_function){
    for(auto it = container.vec.begin(); it != container.vec.end(); ++it){
        template_function(*it);
    }
    for_each<K - 1>(container.prev, template_function);
}

template<> void for_each<0>(TContainer<0> & container, template_function){
    for(auto it = container.vec.begin(); it != container.vec.end(); ++it){
        template_function(*it);
    }
} 
```

所以我可以

```
template <int N> add_to_T(T<N> & in){
    in.i += my_instance_data;
}

for_each(my_container, add_to_T); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:49:31.227

您不能传递模板函数。但是你可以传递一个结构的实例（一个*函数对象*），它包含一个模板函数，例如

```
template <typename F>
void for_each(TContainer<0>& container, F f)
{
    for (auto& t : container.vec)
        f(t);
}

template <int N, typename F>
void for_each(TContainer<N>& container, F f)
{
    for (auto& t : container.vec)
        f(t);
    for_each(container.prev, std::move(f));
}

struct TAdder {
    template <int N>
    void operator()(T<N>& t) const
    {
        t.i += N;
    }
};

for_each(c, TAdder{}); 
```

# ubuntu - Ubuntu 11.10 下的 Zend Framework：虚拟服务器出现内部服务器错误

> ID：10074657
> 
> 赞同：2
> 
> 时间：2012-04-09T14:23:33.087
> 
> 标签：ubuntu, zend-framework, apache2

我在 Ubuntu 11.10 下使用 Zend Framework 有一个奇怪的问题。我使用笔记本电脑作为我的编程环境来测试一些东西，然后再将它们上传到我的主服务器。我下载并安装了 Zend Framework 并创建了一个新项目。访问 localhost.project 时，一切正常。

问题是当我尝试设置虚拟服务器时，我可以去 project.localhost 并以相同的方式查看它（我知道能够这样做并不重要，但我还是想这样做）。我通过转到 /etc/apache2/sites-available 并在其中创建一个新的虚拟主机来设置一个虚拟主机。如果我将 documentRoot 等设置为 /var/www/project/public，我会收到内部服务器错误。更奇怪的是，如果我将它设置为 /var/www/project，我可以看到所有目录——应用程序、文档、库、测试——但没有公开。我不知道为什么会这样。

我正在使用全新安装的 Ubuntu 11.10，并使用 tasksel 安装 LAMP 服务器。这应该可以工作——它在我的 VPS 上工作得很好——但事实并非如此。

编辑：这是虚拟主机的文件：

```
<VirtualHost *:80>
ServerAdmin webmaster@localhost
ServerName project.localhost

DocumentRoot /home/moi/web_docs/project/public
<Directory />
    Options All
    AllowOverride All
</Directory>
<Directory /home/moi/web_docs/project/public>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all

Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:29:40.610

您必须启用 Apache 的重写模块：

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

# ios - 如何解除ModalViewControllerAnimated：是

> ID：10074662
> 
> 赞同：0
> 
> 时间：2012-04-09T14:23:56.647
> 
> 标签：ios, uinavigationcontroller, modalviewcontroller

在我决定问之前，我阅读了很多关于此的文档。所以我的应用程序中有导航控制器。当用户第一次进入我的应用程序时，我会这样做

```
RegViewController *opr = [[RegViewController alloc] init];
self.regController = opr;
[self.navigationController presentModalViewController:self.regController animated:NO];
[opr release]; 
```

它工作正常。但是当我点击 RegViewController 中的 OK 按钮时，我调用了这个方法

```
-(IBAction)btn_regPressed:(id)sender
{
   NSLog(@"start to dissmis modal");
 [self.navigationController dismissModalViewControllerAnimated:YES];
//[self.navigationController.parentViewController dismissModalViewControllerAnimated:YES];
 } 
```

但是这段代码不想解除ModalViewController 有人可以帮我解决thios 问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:29:50.120

尝试将您的呼叫更改为（删除导航控制器）：

```
[self presentModalViewController:self.regController animated:NO]; 
```

并在您的按钮中（删除导航控制器）：

```
[self dismissModalViewControllerAnimated:YES]; 
```

您告诉您的 navigationController 关闭您的模式，但您的 viewcontroller 应该这样做。导航控制器用于导航（前进和后退）目的。并且可能，您的 navigationController 为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:29:35.523

在您的 RegViewController 中，尝试像这样关闭 self：

```
-(IBAction)btn_regPressed:(id)sender
{
   NSLog(@"start to dissmis modal");
   [self dismissModalViewControllerAnimated:YES];
} 
```

# sql - SQL 平均结果

> ID：10074667
> 
> 赞同：1
> 
> 时间：2012-04-09T14:24:18.040
> 
> 标签：sql, sql-server, select

我有以下 SQL 查询

```
SELECT TOP 10000 AVG(DailyNodeAvailability.Availability) AS AVERAGE_of_Availability
FROM Nodes 
INNER JOIN DailyNodeAvailability 
    ON (Nodes.NodeID = DailyNodeAvailability.NodeID)
WHERE 
( DateTime > (GetDate()-7) )
 AND  
(
  (
  (Nodes.Caption LIKE '%server1%') OR 
  (Nodes.Caption LIKE '%server2%') OR 
  (Nodes.Caption LIKE '%server3%') 
  )
) 
```

它给了我 3 台服务器的平均可用性报告。但我想要最少的可用性。例如。

```
Server1 = 100%
Server2 = 97%
Server3 = 88% 
```

我希望 SQL 查询结果至少有一个 Server3 = 88%（非平均）

如何修改现有查询以使其正常工作？

有混乱所以，我附上结果的图片。它给了我一个单一的结果，但平均而言，我不想要平均我在我的结果中需要最少的结果值，根据示例。

![在此处输入图像描述](../Images/f2c9893bd3aaf02d538605a2a85f6983.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:36:42.987

```
SELECT MIN(AVERAGE_of_Availability)
FROM
(
SELECT AVG(DailyNodeAvailability.Availability) AS AVERAGE_of_Availability
FROM Nodes 
INNER JOIN DailyNodeAvailability 
    ON (Nodes.NodeID = DailyNodeAvailability.NodeID)
WHERE 
( DateTime > (GetDate()-7) )
 AND  
(
  (
  (Nodes.Caption LIKE '%server1%') OR 
  (Nodes.Caption LIKE '%server2%') OR 
  (Nodes.Caption LIKE '%server3%') 
  )
)
group by Nodes.Caption
) AvgAvailability 
```

这将为您提供最低限度，但它不会告诉您显示的是哪个服务器。要获得服务器名称（Nodes.Caption），我们还需要做更多工作。由于它不在原始查询中，因此我不包括该部分，否则它会使它变得更复杂一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T20:40:29.133

您可以在 SQL Server 中更紧凑地执行此操作，如下所示：

```
SELECT TOP (1) WITH TIES
  N.Caption AS Server,
  AVG(A.Availability) AS Avg_Availability
FROM Nodes AS N
JOIN DailyNodeAvailability AS A
ON (N.NodeID = A.NodeID)
WHERE DateTime > (GetDate()-7)
AND N.Caption LIKE '%server[123]%'
GROUP BY N.Caption
ORDER BY AVG(A.Availability) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T14:54:44.250

您的基本查询应写为：

```
SELECT N.Caption AS Server, AVG(A.Availability) AS Avg_Availability
  FROM Nodes AS N
  JOIN DailyNodeAvailability AS A ON (N.NodeID = A.NodeID)
 WHERE DateTime > (GetDate()-7)
   AND (N.Caption LIKE '%server1%' OR
        N.Caption LIKE '%server2%' OR
        N.Caption LIKE '%server3%'
       )
 GROUP BY N.Caption 
```

这将为您提供一个列表，其中包含每个服务器名称以及该服务器在上周的平均可用性。

要获得具有最低平均可用性及其平均可用性的服务器名称，您必须将该查询视为更大查询的一部分。在标准 SQL 中有两种方法可以做到这一点：冗长且普遍可用，以及简洁但不太广泛可用。

冗长的方式最终将该查询作为子查询写出几次（因此，在开发查询时，在继续执行更复杂的查询之前，让第一个查询正确并经过测试至关重要）：

```
SELECT m.server, m.avg_availability
  FROM (SELECT N.Caption AS Server, AVG(A.Availability) AS Avg_Availability
          FROM Nodes AS N
          JOIN DailyNodeAvailability AS A ON (N.NodeID = A.NodeID)
         WHERE DateTime > (GetDate()-7)
           AND (N.Caption LIKE '%server1%' OR
                N.Caption LIKE '%server2%' OR
                N.Caption LIKE '%server3%'
               )
         GROUP BY N.Caption
       ) AS m
  JOIN (SELECT MIN(y.avg_availability) AS min_availability
          FROM (SELECT N.Caption AS Server, AVG(A.Availability) AS Avg_Availability
                  FROM Nodes AS N
                  JOIN DailyNodeAvailability AS A ON (N.NodeID = A.NodeID)
                 WHERE DateTime > (GetDate()-7)
                   AND (N.Caption LIKE '%server1%' OR
                        N.Caption LIKE '%server2%' OR
                        N.Caption LIKE '%server3%'
                       )
                 GROUP BY N.Caption
               ) AS Y
       ) AS x
    ON x.min_availability = m.avg_availability 
```

简洁的方法是使用公用表表达式，即 WITH 子句：

```
WITH AvgAvailability AS
    (
    SELECT N.Caption AS Server, AVG(A.Availability) AS Avg_Availability
      FROM Nodes AS N
      JOIN DailyNodeAvailability AS A ON (N.NodeID = A.NodeID)
     WHERE DateTime > (GetDate()-7)
       AND (N.Caption LIKE '%server1%' OR
            N.Caption LIKE '%server2%' OR
            N.Caption LIKE '%server3%'
           )
     GROUP BY N.Caption
    )
SELECT A.Server, A.Avg_Availabilty
  FROM AvgAvailability AS A
  JOIN (SELECT MIN(Avg_Availability) AS Min_Availability
          FROM AvgAvailability
       ) AS M
    ON A.Avg_Availability = M.Min_Availability 
```

（未经测试的语法。）我不确定 MS SQL Server 中是否提供简洁选项。

# php - 如何将变量传递给多模块/布局 Zend Framework 应用程序中的布局？

> ID：10074671
> 
> 赞同：1
> 
> 时间：2012-04-09T14:24:30.107
> 
> 标签：php, zend-framework, module, zend-view, zend-layout

在我将 Zend Framework 应用程序转换为基于模块的结构之前，它有一个单一的布局，我可以从我的控制器向它传递变量，如下所示：

```
// Controller action
$this->view->foo = 'Something';

// Layout
<?= $this->foo ?> 
```

但是，由于将所有内容都移动到默认模块并创建了一个单独的“管理”模块，我无法再让它工作，很可能是因为我将我的“视图设置”从我的引导文件中移到了我的控制器插件中我正在根据模块切换布局。我的插件看起来像这样：

```
class KW_Controller_Plugin_LayoutSelector extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $layout = Zend_Layout::getMvcInstance();
        $layout->setLayout($request->getModuleName());

        $view = $layout->getView();
        $view->doctype('HTML5');
        $view->setEncoding('UTF-8');
        $view->headMeta()->appendHttpEquiv('Content-Type', 'text/html; charset=UTF-8');
        $view->headScript()->appendFile('/js/jquery-1.7.1.min.js');

        switch ($request->getModuleName()) {
            case 'admin':
                $view->headTitle('Admin Area')->setSeparator(' - ');
                $view->headLink()->appendStylesheet('/css/admin/global.css');
                $view->headScript()->appendFile('/js/admin/common.js');
                break;
            default:
                $view->headTitle('Main Site')->setSeparator(' - ');
                $view->headLink()->appendStylesheet('/css/global.css');
                $view->headScript()->appendFile('/js/common.js');
                break;
        }
    }
} 
```

如果我将所有这些对视图的方法调用移回我的引导程序，我可以再次将变量传递给布局；所以我猜测某些事情发生的顺序错误，也许在我将变量从控制器传递给视图之后我的布局正在切换并且它们没有进入我的布局？（我尝试通过将代码放在 preDispatch() 和 postDispatch() 等中来更改上述运行的点）

值得注意的是，我可以在我的个人视图脚本中访问这些变量，而不是它们包含在其中的布局。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:00:26.210

我在当前项目中做类似的事情，它在很大程度上工作正常。

我注意到的一个区别是我使用标准应用程序资源在应用程序级别引导布局和视图。

然后在我的插件中，我使用以下方法访问视图：

```
$front = Zend_Controller_Front::getInstance();
$view = $front->getParam('bootstrap')->getResource('view'); 
```

这似乎可以保证我在引导程序、插件和控制器中访问相同的视图实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:12:57.987

也许这不能解决整个问题，但它会对你有这个丑陋的开关有所帮助:-)

```
public function preDispatch(Zend_Controller_Request_Abstract $request)
{

    $module = $request->getModuleName();
    $layout = Zend_Layout::getMvcInstance();

    // check module and automatically set layout
    $layoutsDir = $layout->getLayoutPath();
    // check if module layout exists else use default
    if(file_exists($layoutsDir . DIRECTORY_SEPARATOR . $module . ".phtml")) {
        $layout->setLayout($module);
    } else {
        $layout->setLayout("layout");
    }
} 
```

}

# wcf - 如果同一服务器上的项目引用 WCF 项目来访问其方法，那么它不是通过 HTTP 进行通信的，对吗？

> ID：10074675
> 
> 赞同：0
> 
> 时间：2012-04-09T14:24:47.717
> 
> 标签：wcf, http, project-reference

如果我的 MVC 项目正在引用（常规项目引用而不是服务引用）WCF 服务项目，我没有使用 HTTP 进行通信，对吗？

我想让我的 WCF 服务通过 web 上的 HTTP 暴露给多个移动和 3rd 方客户端，但是由于更高的性能，我想在没有 HTTP 的情况下使用我自己的应用程序。

我目前正在做什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:34:30.900

如果您使用的是项目参考（即它出现在“参考”文件夹下而不是“服务参考”文件夹下），那么您没有使用 HTTP。在这种情况下，您正在直接调用程序集/DLL。我通常开发我的应用程序，以便有一个[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)（有时称为应用程序层），它基本上模仿了 Web 服务提供的 API。如果我不想分发此服务，可以直接引用此程序集。那么实际的 Web 服务只是服务层之上的一个薄层，它提供实际的 WCF 绑定和契约供分布式客户端调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:38:56.043

这取决于您如何添加它。如果您是通过“添加服务引用”完成的，并且您的 app/web.config 中充斥着 WCF 客户端设置，那么它可能会通过 HTTP。您应该使用您的配置检查传输和地址设置。如果您看到 HTTP，那么您使用的是 HTTP。

即使您切换到命名管道，仍然存在开销。用于本地通信的最快传输可能是Roman Kiss 开发的[NullTransport示例。](http://www.codeproject.com/Articles/20709/NullTransport-for-WCF)

# c# - 数据层中的静态变量，通过 web 服务

> ID：10074676
> 
> 赞同：1
> 
> 时间：2012-04-09T14:24:55.520
> 
> 标签：c#, asp.net

我被要求接管一个应用程序，该应用程序在 1-2 个用户测试下运行良好，但是一旦我们对其进行更大的测试，它就开始崩溃。我们看到随机超时，以及关于代码无法找到它预期绑定到的某些列的消息，尽管它只有 1-2 个用户工作。

应用程序的结构是：

```
--------------
| WebSite    |
--------------
| WebService |
--------------
| Database   |
-------------- 
```

该网站通过网络服务与数据库进行所有通信。查看 web 服务代码，我看到它使用一个类来完成数据库工作，并将其声明为类级变量：

```
private static SqlConnection cn; 
```

然后在页面上需要连接的所有方法中使用它。是静态的，这意味着所有用户只有一个实例，对吗？我只是想确认我看到的是正确的，因为我们删除了它并正在测试它。看到那行对我来说意味着连接对象的 1 个实例正在所有用户之间共享，这可以解释为什么 1-2 个用户可以使用，但是用户数量越多，排队等待它的人就越多，最终导致随机错误。只是想确认我理解正确。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T14:29:16.097

是的，该静态变量将跨用户访问。问题的真正根源是缺乏线程安全，但不一定是连接对象的共享。

# css - css 3d 透视图在某些浏览器中无法正确显示

> ID：10074678
> 
> 赞同：1
> 
> 时间：2012-04-09T14:25:01.620
> 
> 标签：css, google-chrome, 3d, windows-xp, perspective

我有一堆我在 css 中设置的图像，以显示为 3d 堆栈。它始终在 Safari（PC 或 Mac）中正确显示，但有时仅在 Chrome 中显示。我没有放入 Moz 的东西，所以它肯定不会在那里工作，但我知道这一点，这不是我要处理的问题。Mac 上的 Chrome （始终如一地）和较新的 PC 上似乎工作正常，但在我的 windows XP 机器上它不起作用，而且它几乎肯定是透视属性的问题。

我设置了一个 jsfiddle 隔离页面部分：http: [//jsfiddle.net/4vXXd/](http://jsfiddle.net/4vXXd/)

这是用于 windows xp 的 chrome，但透视图不起作用： ![在此处输入图像描述](../Images/75490c4b3bc2e36af78847c1f5dbb349.png)

在 Safari for windows xp 中工作： ![在此处输入图像描述](../Images/a54d8c6d8abbd80710c59dc126224cdc.png)

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:16:10.883

如果启用了 GPU 加速，Chrome 只会以真正的 3D 透视渲染 3D css。如果不是，它将改为使用一种准 3d 等距投影。

要查看您的 chrome 是否启用了 GPU 加速，`about:GPU`请在地址栏中输入内容并查看内容。

# google-app-engine - NDB 查询未返回完整对象

> ID：10074679
> 
> 赞同：1
> 
> 时间：2012-04-09T14:25:04.943
> 
> 标签：google-app-engine, datastore, app-engine-ndb

我正在做一个 NDB 查询，它似乎只获取部分对象。对于模型，我已经关闭了缓存，以防万一。但是，当我看到它们在数据存储查看器中填充时，许多属性会返回无。

这是本地开发服务器（并已部署），查询由后端进程完成。

注意：清除内存缓存没有帮助。

注意：如果我导致后端重新启动，它将开始提取正确的数据。

基本上：

后端每 X 秒开始查询模型的实例

前端导致模型实例发生变化

后端继续查看实例的原始版本，直到重新启动

后端代码非常简单：

```
while 1:
    time.sleep(2)
    q = None
    res = None
    q = core.Agent.query()
    res = q.fetch(10)
    for a in res:
        logging.error("%s" % a.to_dict()) 
```

前端更改了一些属性（并显示在查看器中），但后端只会显示旧值。似乎过滤器将根据正确的值进行过滤，但 fetch() 返回旧的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:17:51.820

您需要清除循环顶部的上下文缓存，例如

```
while 1:
  ndb.get_context().clear_cache()
  <rest of your code> 
```

# ant - ant 的子字符串

> ID：10074680
> 
> 赞同：0
> 
> 时间：2012-04-09T14:25:16.673
> 
> 标签：ant

有人可以帮助我吗？我想通过 ant 获取字符串的子字符串。例如，我有路径**d:\Folder_for_Ant\Incremental_Build\My.ear\Common\classes.jar**我想通过这条路径的子串来获取单词**“Common”**。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:40:40.683

您应该使用[propertyregex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)。

或者您可以在可以使用 javacript 的地方使用脚本（[scriptdef](http://ant.apache.org/manual/Tasks/scriptdef.html)）

# eclipse - CREDENTIAL_ERROR 启动 GLASSFISH 内部服务器

> ID：10074683
> 
> 赞同：0
> 
> 时间：2012-04-09T14:25:37.587
> 
> 标签：eclipse, glassfish, credentials

### 已解决 - 见帖子底部

首先，我将声明我已阅读有关此问题的所有现有帖子，并且建议的解决方案都没有奏效。

将 eclipse 升级到 Indigo SR2 和 java 7 后，我无法启动 Glassfish，无论是嵌入式安装还是单独安装。

一周后，由于我的电脑变得迟钝，我决定需要对我的电脑进行完全重建，所以我将电脑重置为出厂设置并重新开始。我的规格现在看起来像这样......

Windows XP SP3 - 防火墙被禁用，因为安装了第 3 方解决方案 Java 7 - jdk1.7.0_03 + jre Eclipse Indigo SR2

主机文件... 127.0.0.1 本地主机

我从以下位置安装了最新的 Glassfish 插件：http: [//download.java.net/glassfish/eclipse/indigo](http://download.java.net/glassfish/eclipse/indigo) 但是，就像重建之前一样，当我尝试启动服务器时，我得到了 CREDENTIAL_ERROR。我现在非常沮丧，因为我原本希望这个完全干净的安装能够正常工作。

我禁用了防火墙，但这没有任何区别。

然后我尝试手动启动嵌入式服务器。例如 asadmin start-domain，它开始正常。我可以从 Eclipse 中停止它，但是一旦我尝试再次启动它，我就会得到 CREDENTIAL_ERROR。呜呜呜！！！

我还在 eclipse .log 文件中发现了这个条目......

!MESSAGE GlassFish：读取一个 jmx 端口时出错java.lang.NumberFormatException：对于输入字符串：“${JMX_SYSTEM_CONNECTOR_PORT}”

...这可能是相关的，因为服务器的详细手动启动的最后一行看起来像这样... [#|2012-04-09T15:33:16.625+0100|INFO|glassfish3.1.2|javax.enterprise。 system.jmx.org.glassfish.admin.mbeanserver|_ThreadID=41;_ThredName=Thread-23;|JMX005: JMXStartupService 已在 JMXService URL 服务上启动 JMXConnector:jmx:rmi://HOME:8686/jndi/rmi:/ /HOME :8686/jmxrmi|#]

非常感谢克里斯

### 解决了

该死。就在发布这个之后，我偶然发现了这个链接...... [http://java.net/jira/browse/GLASSFISHPLUGINS-72](http://java.net/jira/browse/GLASSFISHPLUGINS-72) ...这表明反病毒（不是防火墙）是罪魁祸首，你瞧， 它是。我从扫描中删除了端口 8080，服务器启动没有问题。现在我需要弄清楚我是否打开了一个安全漏洞。

### 更新

我决定安装一个单独的 Glassfish 实例，问题又重新开始了。最后我发现我必须完全禁用 NOD32 HTTP Scanner 才能让服务器启动。重新启用它再次得到 CREDENTIAL_ERROR。似乎没有任何配置设置可以解决这个问题。我将不得不向 ESET 发送一封电子邮件以查看他们的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:03:29.803

我正在使用大约相同的配置。只有我的 Eclipse 是版本：Indigo Service Release 1，并且我在不允许禁用防火墙的环境中工作。

在我的情况下，它有助于切换到以前版本的 Java (jdk6-u30)，这不是我想要的。所以我此时安装了最新版本的JDK：jdk1.7.0_04，并将其用作de eclipse.ini中的-vm值。

当我们的 Glassfish 的 asadmin 版本期望 1.6 时，这仍然留下了一些关于 1.7 的当前版本的抱怨。通过将注册表更改回 1.6，而不是通过安装 jdk1.7.0_04 添加的 1.7 版本来解决这些问题。

在这些更改之后，我可以在没有 CREDENTIAL_ERROR 的情况下从 Eclipse 中启动和停止 Glassfish。

# java - Infobright/MySQL 加载数据 infile 死锁

> ID：10074687
> 
> 赞同：0
> 
> 时间：2012-04-09T14:26:03.150
> 
> 标签：java, mysql, database, deadlock, infobright

我在使用多个并发 LOAD DATA INFILE 命令时遇到死锁。这是背景：

我开发了一个基于 Java 的 ETL 工具，可以将平面文件加载到 Infobright 数据库中（Infobright 是一个基于 MySQL 的列式数据库）。在处理结束时，使用 LOAD DATA INFILE 命令执行加载。此过程可以处理加载到多个表中，并且每个加载都使用单独的连接并行完成（出于性能原因）。

我还编写了一个 bash 脚本，它为多个文件并行运行这个工具（为了节省处理部分的时间，因为 LOAD 命令无论如何都会被数据库服务器序列化）。这意味着我可以对同一个目标表（来自不同的进程）有多个 LOAD DATA 命令。

我所期待的是 LOAD DATA 命令将以串行方式执行，但最终会完成。但是，我遇到了僵局。如果我执行“显示进程列表”，我可以看到我所有的 LOAD DATA 命令都处于“系统锁定”状态。

有没有人遇到过这样的问题并找到了解决方案？

详细信息：我使用的是 Infobright Enterprise Edition v3.5.2。这是基于
MySQL 5.1.40。我的 ETL 应用程序使用 java 1.5.0_08 和 Mysql
Connector Java v5.1.12。操作系统：Centos 5.6 64 位（Linux 2.6.18-238.12.1.el5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:48:03.387

请确保您的系统上有足够的内存来运行 ETL 进程和脚本。根据对您的外部调查，确定您在只有 1GB RAM（[1002M/498M, 1/0.00]）的机器上运行，这非常低。尝试在普通桌面级机器（>4G RAM）和生产级机器（>32G RAM）上进行测试。

# search - google“子搜索”可能性检测

> ID：10074698
> 
> 赞同：0
> 
> 时间：2012-04-09T14:26:44.020
> 
> 标签：search

如果用户在谷歌中输入“sub search amazon”，他可以找到如下结果：![亚马逊的子搜索结果](../Images/3f9a9ebb70242444aa754f623253e905.png)

当用户直接使用谷歌搜索（而不是亚马逊）时，亚马逊如何进行搜索？我怎样才能像亚马逊在我自己的网站上那样进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:31:03.303

我认为你假设谷歌在搜索谷歌的同时也在搜索亚马逊。更有可能是谷歌在自己的索引中找到的存档搜索结果页面。即该搜索是在一段时间之前在亚马逊上完成的，被谷歌索引，现在你的谷歌搜索正在找到它。

RE 如何在您自己的网站上执行此操作：您的意思是让 Google 搜索您的网站吗？真的不可能。但是您可以通过确保您的结果页面在您的 sitemap.xml 中来复制此行为

您可以在链接到搜索结果页面 (SERP) 的网站上构建“热门搜索”链接列表。这是您的 SERP 可以被 Google 索引。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T21:01:17.740

也许尝试搜索查询，例如：

*   站点：mydomain.com
*   augeri (site:thoughtpuzzle.com | site:awesomeispossible.com)[搜索链接](https://www.google.com/search?q=augeri%20%28site%3athoughtpuzzle.com%20%7C%20site%3aawesomeispossible.com%29)
*   斯诺登网站：*.gov -site:whitehouse.gov -site:cia.gov inurl:obama[搜索链接](https://www.google.com/search?q=snowden%20site%3a%2a.gov%20-site%3awhitehouse.gov%20-site%3acia.gov%20inurl%3aobama)

或者，如果您需要包含或排除超过 10 个和最多 5,000 个特定网站或网页，例如此[移动应用搜索引擎](https://www.google.com/cse/publicurl?cx=partner-pub-3989641269425886:5048880850#gsc.tab=0)，则创建一个[Google 自定义搜索](https://www.google.com/cse/)引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:39:33.597

我认为在您的示例中发生的是亚马逊在其站点地图中将该链接提交给谷歌。（亚马逊与谷歌的连接比普通的站点地图要高得多，但想法相同）。所以谷歌将其视为一个页面。您在亚马逊页面上提供了红色下划线的描述。说得通？如果您需要更清晰的信息，请告诉我。

所以如果你想要同样的东西。您只需要在站点地图中包含搜索结果页面即可。但是，请确保页面与搜索词相关。

[http://en.wikipedia.org/wiki/Sitemaps](http://en.wikipedia.org/wiki/Sitemaps)

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624)

# c# - C#播放列表实现

> ID：10074712
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:28:16.423
> 
> 标签：c#, .net, media

我正在寻找一个简单的 C# 解决方案来管理播放列表。不是实际的播放功能，只是添加、删除、重新排序等等。

这样的代码存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:07:57.803

假设您的播放列表中有这样的项目：

```
public class PlaylistItem { 
    public String Artist { get; set; }
    public String Album { get; set; }
    public String Song { get; set; }
    public TimeSpan Length { get; set; }
    public String SongFile { get; set; }
} 
```

然后`List<PlaylistItem>`应该做：

```
var mySong = new PlayListItem { 
    Artist = "LMFAO", 
    Album = "Sorry for Party Rocking", 
    Song = "Sexy and I Know It", 
    Length = new TimeSpan(0,0,0,0,3,19,0), 
    SongFile = "C:\LMFAO.mp3" };
var myPlaylist = new List<PlaylistItem>();

// Add an item:
myPlayList.Add(mySong);

// Remove an item:
myPlayList.Remove(mySong);

// Reorder (assuming you've added some other items):
var song = myPlayList[0];
myPlayList[0] = myPlayList[1];
myPlayList[1] = song; 
```

ETC...

如果您愿意，您甚至可以子类`List<T>`化以添加您自己的信息，例如当前正在播放的歌曲：

```
public class Playlist : List<PlaylistItem> {
    public Int32 CurrentSong { get; set; }
} 
```

# java - Java AnnotationProcessor 源代码

> ID：10074715
> 
> 赞同：-2
> 
> 时间：2012-04-09T14:28:45.580
> 
> 标签：java, annotations

谁能给我一个简单的java注释处理器的代码片段，当它的process方法被调用时，它只打印“foo”。我已经为此工作了 2 天，但我还没能走到那一步

这是我的代码：

```
 public class ComplexityProcessor extends AbstractProcessor {

    public ComplexityProcessor() {
        super();
    }

    @Override
    public boolean process(Set annotations,
                           RoundEnvironment roundEnv) {
        String message = "annotation found in ";
        processingEnv.getMessager().printMessage(javax.tools.Diagnostic.Kind.NOTE, message);

        try {
            JavaFileObject jfo = processingEnv.getFiler().createSourceFile("Foo");
            BufferedWriter bw = new BufferedWriter(jfo.openWriter());
            bw.append("Bar!!!");
            bw.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        for (Element elem : roundEnv.getElementsAnnotatedWith(Complexity.class)) {
            Complexity complexity = elem.getAnnotation(Complexity.class);
            message = "annotation found in " + elem.getSimpleName()
                           + " with complexity " + complexity.value();
            processingEnv.getMessager().printMessage(javax.tools.Diagnostic.Kind.NOTE, message);
            try {
                JavaFileObject jfo = processingEnv.getFiler().createSourceFile("Foo");
                BufferedWriter bw = new BufferedWriter(jfo.openWriter());
                bw.append("Bar!!!");
                bw.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        return true; // no further processing of this annotation type
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:23:19.673

我发现了答案

所以你未来需要什么：

1.  带有注释处理器和任何提到的注释的 jar，这样您就不会遇到类路径问题
2.  META-INF/services/processor 文件中带有处理器类名称的文本文件。这也放在我的处理器所在的罐子里
3.  使用 javac -processor 参数进行编译。这就是我最初使用的 3 或 4 个教程中没有提到的内容

# linux - 在第 4 层的桥下获取真实的 net_device

> ID：10074718
> 
> 赞同：0
> 
> 时间：2012-04-09T14:28:59.203
> 
> 标签：linux, linux-kernel, linux-device-driver

我们的场景如下：当 TCP 连接建立后（我们可以在`tcp_set_state()`函数中查看），我们可以`net_device`通过`sk->sk_dst_cache->dev`. 有了这个`net_device`，我们可以在系统上区分我们`net_device`与其他`net_device`。

当出口设备是网桥的子接口时，此方法失败，因为`sk->sk_dst_cache->dev`始终指向网桥。如果我们目前处于第 4 层，是否有可能在桥下获得真实的`net_device`( )。`struct net_bridge_port`

任何建议表示赞赏。谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:09:49.497

有`struct net_bridge`一个成员端口列表，`port_list`. 该列表包含`struct net_bridge_port`元素，而元素又包含`struct net_dev`.

您可以轻松地`struct net_bridge`从`struct net_device`桥上获取：

```
struct net_bridge *br = netdev_priv(dev); 
```

当然，这仍然不能告诉您数据包来自哪个成员接口，但是不知道您*为什么*要这样做，我不能说这是否有问题。

# spring-integration - Spring Integration：从出站通道适配器返回非空回复

> ID：10074719
> 
> 赞同：0
> 
> 时间：2012-04-09T14:29:01.323
> 
> 标签：spring-integration

我有一个带有 2 个出站通道适配器的通道，它们都返回一个包含其活动结果的 Message 对象。这在升级到 SI 2.1 之前一直有效。现在，由于方法返回非空值，我收到一条错误消息。

这是一个代码示例：

```
<integration:gateway id="notificationGateway"
                     default-request-channel="notificationRecordsFetcher" 
                     default-reply-channel="notifySupplier"
                     service-interface="com.supplier.NotificationGateway"/>

<!-- Submit the file to the supplier-->
<integration:channel id="notifySupplier"/>

<!-- Handle the secured transfer (first) -->
<integration:outbound-channel-adapter order="1" channel="notifySupplier" id="SupplierSecuredFileTransfer" ref="SubmitToSupplier" method="submit" />

<!-- Delete the notification records marked as successful (second) -->
<integration:outbound-channel-adapter order="2" channel="notifySupplier" id="deleteNotificationRecords" ref="databaseService" method="removeNotificationEntries" /> 
```

标识为“SupplierSecuredFileTransfer”的适配器需要一堆 XML 文件，每个文件代表一个数据库记录，并使用 SFTP 将它们发送到目标文件夹。然后，它标记已成功传递的记录并将它们作为回复发送给标识为“deleteNotificationRecords”的第二个适配器，后者又读取第一个适配器更新的消息有效负载并对其执行。现在由于引入了新限制，我无法在适配器之间传递信息。任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:06:51.960

你是从哪个版本迁移过来的？

将 <outbound-channel-adapter/> 更改为 <service-activator/>，将 channel 更改为 input-channel 并将 output-channel 设置为“nullChannel”。

# iphone - 使用 UIAlertView 在 ViewController 之间导航

> ID：10074724
> 
> 赞同：2
> 
> 时间：2012-04-09T14:29:18.950
> 
> 标签：iphone, objective-c, ios, uialertview, pushviewcontroller

我正在尝试根据用户在`UIAlertView`. 我是目标 c 的新手，遇到了一些麻烦。

当用户按下“我完成了”时，我希望应用程序导航回上一个视图控制器。当用户按下“记分板”时，我希望应用导航到下一个视图控制器。

```
UIAlertView *jigsawCompleteAlert = [[UIAlertView alloc]   //show alert box with option to play or exit
                                  initWithTitle: @"Congratulations!" 
                                  message:completedMessage 
                                  delegate:self 
                                  cancelButtonTitle:@"I'm done" 
                                  otherButtonTitles:@"Play again", @"Scoreboard",nil];
            [jigsawCompleteAlert show];

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        NSLog(@"Cancel Tapped.");
        [self.navigationController popViewControllerAnimated:YES];

    }
    else if (buttonIndex == 1) {
        NSLog(@"GO tapped.");
        startDate = [NSDate date];
        // Create the stop watch timer that fires every 10 ms
        stopWatchTimer = [NSTimer 
                          scheduledTimerWithTimeInterval:1.0/10.0
                          target:self
                          selector:@selector(updateTimer)
                          userInfo:nil
                          repeats:YES];
    } else if (buttonIndex == 2) {
        NSLog(@"Scoreboard tapped.");
    }

} 
```

popView 部分正在工作，应用程序导航回一个视图控制器。我不知道如何让应用程序向前移动一个视图控制器。我知道这与此有关，`pushViewController`但我只看过相当古老且相互矛盾的文章，详细说明了如何做到这一点。

我会很感激这方面的帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:44:26.510

您需要创建新的 UIViewController 然后将其推送到堆栈，如下所示：

```
else if (buttonIndex == 2) {
    NSLog(@"Scoreboard tapped.");
    MoreDetailViewController *ctrl = [[MoreDetailViewController alloc] initWithNibName:@"MoreDetailViewController" bundle:nil];

    [self.navigationController pushViewController:ctrl animated:YES];
} 
```

如果您使用 StoryBoard，则在情节提要文件（属性检查器）中为您的 UIViewController 提供标识符。 ![在此处输入图像描述](../Images/27eb3d263df3e432d070a24a2ba7ff1e.png)

将此代码放入处理程序：

```
MoreDetailViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"MoreDetailViewController"];
[self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:44:12.513

只需调用以下命令：

```
[self.navigationController pushViewController:viewControllerToPush animated:YES]; 
```

如果您没有设置视图控制器，则需要以编程方式创建一个或使用头文件中的 IBOutlet 通过 Interface Builder 链接一个。

# c# - Windows 任务调度程序 C#

> ID：10074726
> 
> 赞同：2
> 
> 时间：2012-04-09T14:29:30.043
> 
> 标签：c#, windows, task, scheduler

是否可以通过 C# 以某种方式与 Windows 任务调度程序进行交互？

我想做的是，我们的服务器有时需要重新启动，但我不想只是“硬重启”它。因此，如果能够以某种方式在任务调度程序中获取我们应用程序的当前状态，以查看它是否正在运行，那就太好了。

如果它当前正在运行，那么我的重启应用程序应该等待 X 分钟再次检查。

但首先，我可以从我的任务中获得状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:31:40.463

不要费心与任务调度程序交互。只需打开应用程序的远程处理（或 wcf）并检查它是否以这种方式运行。任务调度程序只是它可以启动的许多可能方式中的一种，因此这确实是一种检查应用程序是否实际运行的不可靠方式。您想知道您的应用程序是否正在运行，而不是任务调度程序是否启动了它。

[浅谈应用程序之间的通信（WCF）](https://stackoverflow.com/questions/2082450/communication-between-c-sharp-applications-the-easy-way)

# linux - rsync 包含来自特定文件夹的文件？

> ID：10074734
> 
> 赞同：0
> 
> 时间：2012-04-09T14:29:55.783
> 
> 标签：linux, backup, rsync

我有一个目录结构如下

Client_Site/

some_folder1/

some_folder2/

some_folder3/ 很多文件

some_folder4/

Client_Site2/

等等。我想在每个客户端站点的目录结构中定位 some_folder3 并仅使用 rsync 备份该文件夹，但将目录结构的其余部分保持为空文件夹。

这可能吗？我的包含文件会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:34:48.407

我相信你必须分两步完成。就像是：

```
rsync -dv * remote:dir/
rsync -rv some_folder3 remote:dir/ 
```

阅读神话般的男人页面。

# java - 是否有一个集合 addAll 实用程序方法可以确保集合的底层数据结构最多只调整一次大小？

> ID：10074735
> 
> 赞同：2
> 
> 时间：2012-04-09T14:29:58.513
> 
> 标签：java, collections

java.util.Collections 中 addAll 方法的实现只是简单地遍历源集合，并为源集合中的每个元素调用接收集合的 add 方法。

因此，如果接收集合的容量很小并且我们正在向其中添加许多元素，则可能会多次调整接收集合的底层数据结构的大小。每次调整大小都是 O(n) 操作。

似乎应该存在一个好的集合 addAll 方法，该方法将检查我们将添加的元素数量并在开始时设置一次接收集合的容量（如有必要）。这样的实用方法存在吗？如果没有，为什么不呢？

**澄清：**我意识到有特定于实现的 addAll 方法（如在 ArrayList 中）具有这种所需的行为。我想知道是否有 Collection 实用程序类可以让我以一种适用于所有 Collection 实现类的方式获得这种行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T14:32:37.440

你具体说的是哪个系列？我看到例如`ArrayList`执行以下操作：

```
public boolean addAll(Collection<? extends E> c) {
    Object[] a = c.toArray();
    int numNew = a.length;
    ensureCapacity(size + numNew);
    System.arraycopy(a, 0, elementData, size, numNew);
    //...
} 
```

这似乎正是您想要的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T14:58:38.130

这样的实用方法不能用于泛型`Collection`，因为必要的方法`ensureCapacity(int)`不在任何接口中，而仅在对此有一些好处的实现上。目前这是`ArrayList`,`BitSet`和`Vector`。两者`ArrayList`都有调整`Vector` *方法*`addAll`。`BitSet`是完全不同的东西:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T14:40:52.890

这取决于具体的集合实现。

例如，对于 ArrayList，它将增加一次数组大小。通常它会加倍大小，因此执行 10 次调用并不总是需要创建 10 个新数组。

但是对于 LinkedList 它只需要附加到每个元素的末尾。做起来会非常快的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T16:41:11.103

我对你的澄清感到困惑，因为这`Collection.addAll` *是*你似乎要求的方法。

# vbscript - vbscript SelectionNamespaces selectSingleNode error 运行时错误：需要对象：

> ID：10074741
> 
> 赞同：0
> 
> 时间：2012-04-09T14:30:18.780
> 
> 标签：vbscript

我在一个名为 response2.xml 的文件中有以下 xml

```
 &lt;?xml version="1.0"?&gt;  
&lt;S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"&gt;  
&lt;S:Body&gt;&lt;ns2:commonServiceResponse xmlns:ns2="http://webservice.mas.gepics.ab.com"&gt;  
&lt;return&gt;  
&lt;responseData&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;  
&lt;tnsa:GetABQData xmlns:tns="http://www.ab.com/ns/ABQ/ABQSchemaExtensions"
        xmlns:tnsa="http://www.ab.com/ns/ABQ/ABQMessageStandard" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.ab.com/ns/ABQ/ABQMessageStandard ABQSchemaHeaders.xsd"
        releaseID="string" versionID="string"&gt;  
        &lt;tnsa:ApplicationArea&gt;  
                &lt;tnsa:CreationDateTime&gt;2012-04-03T08:53:20&lt;/tnsa:CreationDateTime&gt;  
                &lt;tnsa:ABQHeader&gt;  
                        &lt;tnsa:VehicleAssemblyPlant&gt;CHW&lt;/tnsa:VehicleAssemblyPlant&gt;  
                        &lt;tnsa:Source&gt;GEPICS&lt;/tnsa:Source&gt;  
                        &lt;tnsa:Destination&gt;SEP&lt;/tnsa:Destination&gt;  
                        &lt;tnsa:TransactionCode&gt;  
                                &lt;tnsa:Transaction&gt;TACK&lt;/tnsa:Transaction&gt;  
                        &lt;/tnsa:TransactionCode&gt;  
                        &lt;tnsa:TriggerID&gt;0&lt;/tnsa:TriggerID&gt;  
                        &lt;tnsa:InputDevice&gt;MAS01&lt;/tnsa:InputDevice&gt;  
                        &lt;tnsa:OutputDevice&gt;MASOUT01&lt;/tnsa:OutputDevice&gt;  
                &lt;/tnsa:ABQHeader&gt;  
        &lt;/tnsa:ApplicationArea&gt;  
        &lt;tnsa:DataArea&gt;  
                &lt;tnsa:Get&gt;  
                        &lt;tnsa:Expression&gt;string&lt;/tnsa:Expression&gt;  
                &lt;/tnsa:Get&gt;  
                &lt;tnsa:ABQData releaseID="string"&gt;  
                        &lt;tnsa:ABQSpecific&gt;  
                                &lt;tnsa:Vehicle&gt;  
                                        &lt;tns:GEPICSTrgPrimaryKey&gt;101718664&lt;/tns:GEPICSTrgPrimaryKey&gt;  
                                        &lt;tns:GEPICSTrgSecondaryKey&gt;   &lt;/tns:GEPICSTrgSecondaryKey&gt;  
                                &lt;/tnsa:Vehicle&gt;  
                                &lt;tns:BroadCastData&gt;  
                                        &lt;tns:DataTagID&gt;231&lt;/tns:DataTagID&gt;  
                                        &lt;tns:DataLength&gt;34&lt;/tns:DataLength&gt;  
                                        &lt;tns:DataString&gt;ADDORDER1017186643G1SE51X3AS118601&lt;/tns:DataString&gt;  
                                &lt;/tns:BroadCastData&gt;  
                        &lt;/tnsa:ABQSpecific&gt;  
                &lt;/tnsa:ABQData&gt;  
        &lt;/tnsa:DataArea&gt;  
&lt;/tnsa:GetABQData&gt;  

&lt;/responseData&gt;  
&lt;success&gt;true&lt;/success&gt;  
&lt;/return&gt;  
&lt;/ns2:commonServiceResponse&gt;  
&lt;/S:Body&gt;  
&lt;/S:Envelope&gt; 
```

我有以下名为 5.vbs 的 vbscript 从文件中读取节点

```
Set oXMLDoc = CreateObject("MSXML2.DOMDocument.4.0")   
oXMLDoc.async = False   
oXMLDoc.load ("response2.xml")   
oXMLDoc.setProperty "SelectionLanguage", "XPath"   
oXMLDoc.setProperty "SelectionNamespaces", "xmlns:S='http://schemas.xmlsoap.org/soap/envelope/' xmlns:ns2='http://webservice.mas.gepics.ab.com' xmlns:tnsa='http://www.ab.com/ns/ABQ/ABQMessageStandard'"  
WScript.Echo oXMLDoc.selectSingleNode("//S:Envelope//S:Body//ns2:commonServiceResponse//return//responseData").text 
```

我执行命令 cscript 5.vbs 并收到以下错误运行时错误： Object required: 'oXMLDoc.selectSingleNode(...)'

无论我做什么，我都无法选择 tnsa:GetABQData 树中的任何节点。

任何建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:10:46.543

也许这并不明显，但是您那里没有 XML。那是 HTML 编码的 XML。如果您希望使用 XML 解析器对其进行解析，则需要对其进行解码。您可以先使用此函数对其进行解码：

[http://psacake.com/web/func/htmldecode_function.htm](http://psacake.com/web/func/htmldecode_function.htm)

```
Private Function HTMLDecode(byVal encodedstring)
    Dim tmp, i
    tmp = encodedstring
    tmp = Replace( tmp, "&quot;", chr(34) )
    tmp = Replace( tmp, "&lt;"  , chr(60) )
    tmp = Replace( tmp, "&gt;"  , chr(62) )
    tmp = Replace( tmp, "&amp;" , chr(38) )
    tmp = Replace( tmp, "&nbsp;", chr(32) )
    For i = 1 to 255
        tmp = Replace( tmp, "&#" & i & ";", chr( i ) )
     Next
    HTMLDecode = tmp
End Function 
```

# windows-phone-7 - 在我的项目中使用 Newtonsoft.Json.WindowsPhone.dll 时的程序集加载问题

> ID：10074745
> 
> 赞同：1
> 
> 时间：2012-04-09T14:30:26.913
> 
> 标签：windows-phone-7, json.net

> 错误 2 无法加载程序集文件：///C:\Users\Jitendra\Downloads\Json40r1\Bin\WindowsPhone\Newtonsoft.Json.WindowsPhone.dll。此程序集可能已从 Web 下载。如果程序集是从 Web 下载的，Windows 会将其标记为 Web 文件，即使它驻留在本地计算机上也是如此。这可能会阻止它在您的项目中使用。您可以通过更改文件属性来更改此名称。仅取消阻止您信任的程序集。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=179545](http://go.microsoft.com/fwlink/?LinkId=179545)。

添加 newtonsoft.Json.dll 后，我在 windows phone 7 中收到这样的错误

我怎样才能克服这个问题。？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:48:36.307

转到：C:\Users\Jitendra\Downloads\Json40r1\Bin\WindowsPhone

右键单击“Newtonsoft.Json.WindowsPhone.dll”

选择“属性”

查找并按“解锁”（应该出现在“常规”选项卡中）

# iphone - 应用内访问网络设置

> ID：10074746
> 
> 赞同：0
> 
> 时间：2012-04-09T14:30:42.070
> 
> 标签：iphone, ios, network-programming

我正在为即将到来的项目做一些研究，我想知道是否可以从应用程序内访问用户的 iPhone 网络设置。换句话说，iPhone 可以与应用程序共享网络设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:37:07.050

我不相信这是可能的。您必须通过苹果设置菜单等。您可以使用应用程序中的链接打开网络设置

# c# - 如何在wpf中获取某个控制点的颜色。背景

> ID：10074747
> 
> 赞同：2
> 
> 时间：2012-04-09T14:30:43.963
> 
> 标签：c#, .net, wpf, controls

有一个以 png 作为背景的控件。它可能被鼠标点击，我想做某事。根据点击点的颜色。我怎样才能得到颜色？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:46:21.673

好吧，从鼠标单击事件参数 e 中，您可以获得具有单击确切坐标的 Point：

```
Point clickPoint = e.GetPosition(cntrlWithPNGasBackground); 
```

据推测，您可以使用以下方法获取该位置的图像颜色：

```
System.Drawing.Image _image = cntrlWithPNGasBackground.BackgroundImage;
Bitmap _bitmap = new Bitmap(image);
Color _color = _bitmap.GetPixel(Point.x, Point.y); 
```

不是最有效的事情，但它可以完成工作。

看：

*   [`Bitmap.GetPixel`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)
*   [`System.Drawing.Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)
*   [`System.Drawing.Image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)
*   [`MouseEventArgs.GetPosition`](http://msdn.microsoft.com/en-us/library/system.windows.input.mouseeventargs.getposition.aspx)
*   [`System.Windows.Point`](http://msdn.microsoft.com/en-us/library/system.windows.point.aspx)

# objective-c - 如何在文本字段中打印实时运行的控制台脚本输出？

> ID：10074750
> 
> 赞同：1
> 
> 时间：2012-04-09T14:31:00.387
> 
> 标签：objective-c, xcode, cocoa

我正在尝试制作一个小型 OS X 应用程序，该应用程序将按需启动 bash 脚本并将其输出打印在文本字段中，但不是完成后**的结果，而是运行时的结果**。

它只是一个带有一个开始/停止按钮的简单应用程序。

关于我如何做到这一点的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:06:07.843

[在这里](https://stackoverflow.com/questions/2406204/what-is-the-best-way-to-redirect-stdout-to-nstextview-in-cocoa)查看关于 SO 的答案，或者只是阅读[NSTask](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)和[NSPipe类的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPipe_Class/Reference/Reference.html)

刚刚编辑了我的答案以使其更加清晰：

这个想法是在 NSPipe 方法*fileHandleForReading*返回的 NSFileHandle 上添加一个通知（*NSFileHandleDataAvailableNotification* ） 。

 *希望这会有所帮助=)*

# sql - PL/sql 存储过程引用游标作为参数

> ID：10074753
> 
> 赞同：0
> 
> 时间：2012-04-09T14:31:09.217
> 
> 标签：sql, oracle

我需要将多行传递给存储过程。我可以使用参考光标吗？因为我尝试了以下方法：

在我的包裹里，我有：

```
TYPE FACT_VND_RECORD
IS
  RECORD
  (
    COD_NOMCPDT P6PCM2_PARMCMS.COD_NOMCPDT%TYPE,
    LIB_LIBNOMCPDT P6PCM2_PARMCMS.LIB_LIBNOMCPDT%TYPE,
    DHS_MAJ P6PCM2_PARMCMS.DHS_MAJ%TYPE,
    LIB_AUTH_MAJ P6PCM2_PARMCMS.LIB_AUTH_MAJ%TYPE );

TYPE FACT_VND_CURSOR
    IS
      REF
      CURSOR
        RETURN FACT_VND_RECORD; 
```

和2个程序：

```
PROCEDURE REC_FACT_VND(
      P_IN_NUM_VND   IN OUT P6PCM2_PARMCMS.NUM_VND%TYPE,
      P_OUT_FACT_VND IN OUT FACT_VND_CURSOR,
      P_OUT_CODE_RET OUT INTEGER,
      P_OUT_MSG_ERR OUT VARCHAR2);

  PROCEDURE MAJ_FACT_VND(
      P_IN_NUM_VND   IN OUT P6PCM2_PARMCMS.NUM_VND%TYPE,
      P_IN_FACT_VND IN OUT FACT_VND_CURSOR,
      P_OUT_CODE_RET OUT INTEGER,
      P_OUT_MSG_ERR OUT VARCHAR2); 
```

接收先前填充的游标并对数据进行处理。

我使用这两个电话；第一个工作正常，我可以看到参考游标 C1 中的数据，然后我尝试使用它。

```
C1 PACK_REC_FACT_VND.FACT_VND_CURSOR;
--other definitons
      PACK_REC_FACT_VND.REC_FACT_VND(NUM_VND,C1,COD_RET,MSG_ERR);
    PACK_REC_FACT_VND.MAJ_FACT_VND(NUM_VND,C1,COD_RET,MSG_ERR); 
```

我无法遍历数据，因为它未定义：（来自第二个过程的代码）

```
LIGNE_TAUX PACK_REC_FACT_VND.FACT_VND_RECORD;
    BEGIN
      DELETE FROM P6PCM2_PARMCMS WHERE NUM_VND=P_IN_NUM_VND;
      FOR LIGNE_TAUX IN P_IN_FACT_VND
      LOOP
        INSERT
        INTO P6PCM2_PARMCMS VALUES
          (
            P_IN_NUM_VND,   
LIGNE_TAUX.COD_NOMCPDT, 
LIGNE_TAUX.LIB_LIBNOMCPDT, 
LIGNE_TAUX.DHS_MAJ, 
LIGNE_TAUX.LIB_AUTH_MAJ);
      END LOOP;

Error(48,21): PLS-00221: 'P_IN_FACT_VND' is not a procedure or is undefined 
```

或者我应该切换到记录表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:03:00.317

我们不能像那样使用引用游标；我们需要使用显式游标语法。试试这个（警告：未经测试的代码！）：

```
 LIGNE_TAUX PACK_REC_FACT_VND.FACT_VND_RECORD;
    BEGIN
      DELETE FROM P6PCM2_PARMCMS WHERE NUM_VND=P_IN_NUM_VND;

      LOOP
         fetch P_IN_FACT_VND   into LIGNE_TAUX; 
         exit when P_IN_FACT_VND%notfound;
        INSERT
        INTO P6PCM2_PARMCMS VALUES
          (
            P_IN_NUM_VND,   
            LIGNE_TAUX.COD_NOMCPDT, 
            LIGNE_TAUX.LIB_LIBNOMCPDT, 
            LIGNE_TAUX.DHS_MAJ, 
            LIGNE_TAUX.LIB_AUTH_MAJ);
      END LOOP;

  close P_IN_FACT_VND; 
```

但是，如果您将记录提取到集合中，则会获得更好的性能。像这样的东西：

```
 type LIGNE_TAUX_NT is table of PACK_REC_FACT_VND.FACT_VND_RECORD;
        LIGNE_TAUX_COLL LIGNE_TAUX_NT;
    BEGIN
      DELETE FROM P6PCM2_PARMCMS WHERE NUM_VND=P_IN_NUM_VND;

      fetch P_IN_FACT_VND bulk collect  into LIGNE_TAUX_COLL; 
      close P_IN_FACT_VND;

      -- while we're at it why not use the more efficient FORALL syntax 
      -- to perform the inserts?

      forall idx in LIGNE_TAUX_COLL.first() .. LIGNE_TAUX_COLL.last()
            INSERT
           INTO P6PCM2_PARMCMS VALUES
              (
            P_IN_NUM_VND,   
            LIGNE_TAUX_COLL(idx).COD_NOMCPDT, 
            LIGNE_TAUX_COLL(idx).LIB_LIBNOMCPDT, 
            LIGNE_TAUX_COLL(idx).DHS_MAJ, 
            LIGNE_TAUX_COLL(idx).LIB_AUTH_MAJ); 
```

[了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#i7106)。

# linker - ifort 中 linux 盒上的编译器选项

> ID：10074754
> 
> 赞同：0
> 
> 时间：2012-04-09T14:31:10.993
> 
> 标签：linker, compiler-errors, fortran

我正在使用 ifort，当我尝试使用编译器选项编译我的程序时出现链接错误。尽管如此，我已经在一个非常小的简单程序上测试了这些选项，但我遇到了同样的问题。

因此，我怀疑这与 ifort 的安装方式或我使用的系统类型有关，但我不能确定。这些程序在没有选项的情况下编译时可以正常编译。我的问题是我做错了什么，有没有办法在使用编译器选项时不出现这些错误，或者编译器选项与我正在使用的系统不兼容。

以下是程序的定期编译方式：

```
 ifort -free  testrealprint.out testrealprint.f90 
```

以下是使用选项编译程序的方式：

```
 ifort -free  -O2 -stand f03 -check all -traceback -warn all -fstack-protector -    assume protect_parens -implicitnone testrealprint.out testrealprint.f90 
```

这是我用来测试编译器选项的非常简单的代码：

```
program main 

implicit none

real, dimension(1:3)  :: adremvect
 integer :: j
 character (LEN = 7) :: adremchar, adremcharadj,adremcharadjtrm, adremcharnew 
 adremvect = (/ 2.0, 1.3, 1.0 /)
  do j = 1, 3
        write(adremchar, '(f5.1)') adremvect(j)
        adremcharadj = adjustl(adremchar)
        adremcharadjtrm =  trim(adremcharadj)
         adremcharnew = adremchar(4:)
          print *, adremvect(j), adremcharadj, adremcharadjtrm, adremcharnew
 end do 
```

这是我在使用编译器选项时收到的部分错误消息：

```
testrealprint.out: In function `_start':
(.text+0x0): multiple definition of `_start'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib64/crt1.o:(.text+0x0): first     defined here
  testrealprint.out: In function `_fini':
  (.fini+0x0): multiple definition of `_fini'
  /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib64/crti.o:(.fini+0x0): first     defined here
   testrealprint.out:(.rodata+0x0): multiple definition of `_IO_stdin_used'
   /usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib64/crt1.o:  (.rodata.cst4+0x0):   first defined here
        testrealprint.out: In function `__data_start':
     (.data+0x0): multiple definition of `__data_start'
   ld: error in testrealprint.out(.eh_frame); no .eh_frame_hdr table will be created. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T14:43:09.287

看起来很像您缺少用于命名编译器发出的可执行文件的命令行选项。我想你实际上想要这样的东西（注意`-o`选项）：

```
ifort -free  -O2 -stand f03 -check all -traceback -warn all -fstack-protector -assume protect_parens -implicitnone -o testrealprint.out testrealprint.f90 
```

您看到的错误可能是因为您告诉编译器尝试通过编译`testrealprint.f90`然后将其与*现有可执行文件* `testrealprint.out`链接来创建可执行文件。这就是您从链接器收到重复符号错误的原因 - 您正在尝试将现有应用程序链接到当前链接器调用。我有点惊讶，`testrealprint.out`在搜索路径中不存在的情况下尝试编译时没有找到文件未找到错误....

# asp.net - 中等信任级别的 Linq to SQL

> ID：10074755
> 
> 赞同：0
> 
> 时间：2012-04-09T14:31:13.723
> 
> 标签：asp.net, linq, medium-trust

我在我现在需要在服务器上部署的 ASP.NET 应用程序中使用了 Linq to SQL。不幸的是，托管服务器只能提供中等级别的信任。我的应用程序在没有 ReflectionPermission 类型的权限时崩溃。

有没有办法编辑我的查询来解决这个限制？

例如，我的应用程序在调用此代码时崩溃：

```
Error error = new Error { Date = DateTime.Now, Message = message, StackTrace = stack };
dataContext.Errors.InsertOnSubmit(error);
dataContext.SubmitChanges(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:46:31.057

这可能是由您的`ReflectionPermission.RestrictedMemberAccess`财产引起的。

确保 EF 模型类中的每个属性都是公开的。

我有一个更复杂的问题，尽管可能与您的情况相似。我在我的 EF 模型类中聚合了一个具有私有属性的类。在加载过程中，来自 DB 的任何记录，EF 也会尝试从这个聚合类中加载每个属性。

从我的一个模型类中删除此引用（并通过复制所需的属性来替换它）解决了中等信任环境中的问题。

# c# - 在 Sqlite 中更新顶部

> ID：10074756
> 
> 赞同：3
> 
> 时间：2012-04-09T14:31:14.783
> 
> 标签：c#, sql, sqlite

是否可以使用 WHERE 子句更新第一行。
我试过：

```
UPDATE TOP (1) Players SET... WHERE... 
```

和：

```
UPDATE TOP 1 Players SET... WHERE 
```

但似乎sqlite中没有TOP。我可以使用一些替代品吗？
还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:33:39.983

尝试

```
UPDATE Players SET... WHERE... LIMIT 1 
```

我现在无法验证，但可能`LIMIT`只适用于`SELECT`语句。如果是这样，请执行以下操作：

```
UPDATE Players SET... WHERE ID in (SELECT ID FROM Players WHERE ... LIMIT 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:37:28.337

SQLite 确实支持 TOP N 查询，但它使用[LIMIT 子句](http://www.sqlite.org/lang_select.html)来完成此操作。在任何情况下，这仅适用于 SELECT 语句，而不适用于 UPDATE。如果只想更新一行，则需要使用 WHERE 子句过滤 UPDATE。

编辑：

我的立场是正确的，看来[UPDATE 语句确实支持 LIMIT 子句](http://www.sqlite.org/lang_update.html)。

# json - JQuery JSON 从文件到对象

> ID：10074759
> 
> 赞同：0
> 
> 时间：2012-04-09T14:31:22.303
> 
> 标签：json, parsing, getjson

我从 jquery 网站复制了这个。我正在尝试学习如何将 json 数据获取到网页。日期已验证：http: [//jsonlint.com/](http://jsonlint.com/)

运行我的脚本的结果是：[object Object] [object Object] [object Object] [object Object] [object Object]

我需要解析数据还是 getJSON 这样做。
这是我正在使用的代码：

```
<!doctype html> 
<html>
<head>

    <script type="text/javascript" src="js/jquery-1.7.1.js"></script>

    <script type="text/javascript">
$.getJSON('data.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});
    </script>
</head>
<body>

</body>
</html> 
```

故障排除提示会很棒，当然答案也会很棒！

数据.json

```
[
    {
        "bytes": "476.577044"
    },
    {
        "bytes": "136113.5289"
    },
    {
        "bytes": "118870.8151"
    },
    {
        "bytes": "55001.67852"
    }
] 
```

console.log(data) 响应：

```
[Object { bytes="476.577044"}, Object { bytes="136113.5289"}, Object { bytes="118870.8151"}, Object { bytes="55001.67852"}]
JSON.html (line 14)
[Object { bytes="476.577044"}, Object { bytes="136113.5289"}, Object { bytes="118870.8151"}, Object { bytes="55001.67852"}]
JSON.html (line 14)
[Object { bytes="476.577044"}, Object { bytes="136113.5289"}, Object { bytes="118870.8151"}, Object { bytes="55001.67852"}]
JSON.html (line 14)
[Object { bytes="476.577044"}, Object { bytes="136113.5289"}, Object { bytes="118870.8151"}, Object { bytes="55001.67852"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:47:25.287

我有同样的问题。我通过将 JSONP 对象放入`console.log()`然后在 Chrome 的开发人员工具中查看树来解决它。在那里我意识到“对象”只是解析器给 JSON 文件中所有不同对象的名称，因此在获取值时必须考虑到这一点。

```
$(document).ready(function(){
    $.getJSON('data.json', function(data) {
      var items = [];

      $.each(data, function(key, val) {
        items.push('<li >' + data.object.bytes + '</li>');
      });

      $('<ul/>').addClass('my-new-list').html(items.join('')).appendTo('body');
    });
}); 
```

您想要的数据位于一个名为“对象”的对象*内*的键：值对中，该对象位于数组内（这是您执行时正在循环的内容`$.each()`）

所以你必须告诉 JQuery 查看对象内部，*然后*告诉它要查找什么键。

我没有放任何 ID，因为我不确定你想要它们是什么。您是否只是希望每个元素都有“字节”作为 ID？ID 应该是唯一的（至少根据这个[http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)）

如果你想要的是一个`class`这样你就可以在整个批次上做 CSS/JQuery 那么你可以尝试类似的东西`'<li class ="' + object.key + '">'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:36:11.480

非常接近，试试这个：（只要文件“data.json”是有效文件）

```
$(document).ready(function(){
    $.getJSON('data.json', function(data) {
      var items = [];

      $.each(data, function(key, val) {
        items.push('<li id="' + key + '">' + val + '</li>');
      });

      $('<ul/>').addClass('my-new-list').html(items.join('')).appendTo('body');
    });
}); 
```

**编辑**

您的 json 设置方式`$.each`将迭代包含对象的外部数组。这使得`key`数字索引和`val`实际对象。话虽如此，将`$.each`部分更改为如下所示：

```
$.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val.bytes + '</li>');
}); 
```

应该做的伎俩

（旁注：id 不应该以数字开头）

# java - Android 连接到 MJPEG 流 - 权限被拒绝错误

> ID：10074766
> 
> 赞同：1
> 
> 时间：2012-04-09T14:31:43.067
> 
> 标签：java, android, sockets, mjpeg

我正在使用这段代码：

```
public static MjpegInputStream read(String url) {
    HttpResponse res;
    DefaultHttpClient httpclient = new DefaultHttpClient();   
    httpclient.getCredentialsProvider().setCredentials(
            new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
            new UsernamePasswordCredentials("admin", "1234"));
    try {
        res = httpclient.execute(new HttpGet(URI.create(url)));
        return new MjpegInputStream(res.getEntity().getContent());              
    } catch (ClientProtocolException e) { Log.e("MjpegInputStream - CP", e.getMessage()); } 
    catch (IllegalArgumentException e) { Log.e("MjpegInputStream - IA", e.getMessage()); } 
    catch (IOException e) { Log.e("MjpegInputStream - IO", e.toString() + " " + e.getMessage()); } 
    return null;
} 
```

我得到**IOExcetion：**

> 04-09 17:27:52.350：E/MjpegInputStream - IO（5749）：java.net.SocketException：权限被拒绝 权限被拒绝

我的网址是**http://192.168.1.113/videostream.cgi**当我用浏览器连接时，用户名和密码是（**管理员**，**1234**）

我究竟做错了什么 ？

更新：

我添加了 INTERNET 权限，现在我的应用程序在此行崩溃：

```
res = httpclient.execute(new HttpGet(URI.create(url))); 
```

与**NetworkOnMainThreadException**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:41:49.800

好像忘记添加了

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

到您的清单文件。

另请参阅[安全性和权限](http://developer.android.com/guide/topics/security/security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T20:40:15.843

您的**NetworkOnMainThreadException**错误是由在主 UI 线程上运行网络操作引起的。我有一个类似的问题，还没有弄清楚如何正确修复它，但我知道你需要让 MjpegInputStream 进入它自己的线程。一个临时解决方案是允许网络在 UI 线程上运行，但这是不好的做法，不应该发布：

```
//DO NOT LEAVE THIS IN PUBLISHED CODE: http://stackoverflow.com/a/9984437/1233435
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
.permitAll()
.build();
StrictMode.setThreadPolicy(policy);
//END of DO NOT LEAVE THIS IN PUBLISHED CODE 
```

# .net - MySql Connector/NET 响应慢

> ID：10074767
> 
> 赞同：0
> 
> 时间：2012-04-09T14:31:48.377
> 
> 标签：.net, mysql, mysql-connector

我正在使用 MySQL Connector/NET 连接到远程 MySQL 服务器并检索/更新数据。问题是，它真的很慢......

我的应用程序应该每分钟甚至每秒检查一次数据库中的新更改。每次运行“SELECT”命令，完成请求大约需要 5 秒！有时我必须在 FOR 子句中运行一些查询，因此加载需要很长时间......

顺便说一句，我正在使用 MySqlDataAdapter、DataSet、MySqlCommand 和 MySqlConnection....

# visual-studio-2010 - dll 引用没有被复制到 Bin 文件夹中

> ID：10074768
> 
> 赞同：1
> 
> 时间：2012-04-09T14:31:49.933
> 
> 标签：visual-studio-2010, asp.net-4.0

我创建了一个包含 4 个项目的解决方案。1 个控制台应用程序和 3 个类库。

```
Console App Name : MyProject (Dependencies on Common and Domain and Logic)
Class Library 1 : MyProject.Logic (Dependencies on Common and Domain)
Class Library 2 : MyProject.Domain 
Class Library 3 : MyProject.Common 
```

现在我使用并选择引用添加`MyProject.Domain`和项目的引用`MyProject.Common``MyProject.Logic``References --> Add Refernce --> Project`

和添加的参考 ，`MyProject.Domain`以及`MyProject.Common`使用`MyProject.Logic`和选择参考`MyProject``References --> Add Refernce --> Project`

我还验证了所有三个参考的属性，它们都`"Copy Local"`设置为`True`

当我构建/重建 MyProject 时，它没有找到参考`MyProject.Common`，`MyProject.Logic`但它获得了参考`MyProject.Domain`。因此 Dll 的`MyProject.Common`并`MyProject.Logic`不会被复制到 bin 文件夹中`MyProject`

我在网上看到过类似的论坛..但我没有找到任何解决方案。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:23:22.453

谢谢大家的回复，

Proejct -->`MyProject.Common`正在使用`log4net`程序集，因此目标框架`MyProject.Common`是`.Net Framework 4`，

其中作为的目标框架`MyProject`是`.Net Framework 4 Client Profile`。

所以我将 Traget 框架更改`MyProject`为`.Net Framework 4`使用

右键单击`MyProject --> Properties --> Application Tab --> Select Target Framework: to .Net Framework 4`

如果有人有这样的问题，那么还要检查你所有使用相同框架引用的项目的目标。

# java - 让 Xerces 提供比“#AnonType_blahblahblah”更易读的文本

> ID：10074769
> 
> 赞同：0
> 
> 时间：2012-04-09T14:32:03.363
> 
> 标签：java, xml, xsd, schema, xerces

我有一个`javax.xml.parsers.DocumentBuilderFactory`与相关的 shchema 工作正常。但是，它会以不那么易读的形式“... for type #AnonType_FooBarQuux”给出错误。我更喜欢它阅读类似“... for attribute Foo of element Bar of element Quux”的内容。有没有办法让输出看起来像这样？

**编辑**：

我正在检查的 XML 文件如下所示：

```
<bindings>
    <bind trigger="blah" command="blah"/>
    <bind trigger="blah" command="blah"/>
    .... 
```

虽然架构是：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="bindings">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="bind">
                    <xs:complexType>

                        <xs:attribute name="trigger" use="required">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:minLength value="1"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:attribute> <!-- trigger -->

                        <xs:attribute name="command" use="required">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:minLength value="1"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:attribute> <!-- command -->

                    </xs:complexType>
                </xs:element> <!-- bind -->
            </xs:sequence>
        </xs:complexType>
    </xs:element> <!-- bindings -->

</xs:schema> 
```

如果`trigger`属性是无效的空字符串，它会告诉我`... for type #AnonType_triggerbindbindings`.

# php - 如何在 jqGrid 中在线编辑时将自定义参数传递给 ajax 请求

> ID：10074774
> 
> 赞同：2
> 
> 时间：2012-04-09T14:32:31.513
> 
> 标签：php, javascript, jqgrid

这是我的 jqGrid 处理程序。

```
var myEditParams = {
    keys: true,
    extraparam: {
        ajax: function () {
            alert("in myEditParams:extraparam");
            return "1";
        }
    }
};
var lastsel;
jQuery("#list2").jqGrid({
        data: data,
        height: 250,
        emptyDataText: "No Records Found",
        width: $('#mainwrapper').width(),
        datatype: "local",        
        colNames:['Table Description','Display Table name'],
        colModel:[
            { name:'table_desc', index:'table_desc', sortable: false, align: 'left', editable: true, edittype: 'text', editoptions:{ size:40 }, formatoptions:{
                keys: true,
                editOptions: myEditParams
            } },
            { name:'display_table_name',index:'display_table_name', sortable: false }
        ],
        loadComplete: function(){
            $('.ui-jqgrid-htable').css('width',$('#mainwrapper').width()+'px');
             if ($('#list2').getGridParam('records') == 0){ // are there any records?
                DisplayEmptyText(true);
             }else{
                DisplayEmptyText(false); 
             }                    
        },
        rowNum:10,
        rowList:[10,20,30],
        pager: '#pager2',
        sortname: 'id',
        viewrecords: true,
        sortorder: "desc",
        caption:"Changelog Tables",
        postData: { ajax: "1" },
        onSelectRow: function(id){
            if(id && id!==lastsel){
                jQuery('#list2').jqGrid('restoreRow',lastsel);
                jQuery('#list2').jqGrid('editRow',id,true);
                $('#list2').jqGrid('setGridParam',id,{ ajax:"1" }); //wanted to set some custom params here.
                lastsel=id;
            }
        },
        editurl: "changeLog.php"
    }); 
```

当我进行一些就地编辑操作时，我想发送一个额外的参数作为 ajax=1。我已经尝试了各种方法。但似乎没有任何效果。我几乎感到沮丧。

我试过这个：

```
$("#list2").jqGrid('setGridParam',{postData:{ajax:'1'}}); 
```

没用。`postData`正如您在处理程序中看到的那样，我还尝试设置参数。那也行不通。这里出了什么问题？请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:47:52.090

方法[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#editrow)支持`extraparam`. 所以你可以这样重写`onSelectRow`：

```
onSelectRow: function (id) {
    var $myGrid = $(this); // it's better as jQuery('#list2')
    if (id && id !== lastsel) {
        $myGrid.jqGrid('restoreRow', lastsel);
        $myGrid.jqGrid('editRow', id, {
            keys: true,
            extraparam: { ajax: "1" }
        });
        lastsel = id;
    }
} 
```

顺便说一句，您可以使用方法（函数）而不是`extraparam`. 在以下情况下，它可能是有帮助的。类似的值`extraparam: { ajax: $("#myControl").val() }`将在调用`editRow`函数时计算。如果您要使用`extraparam: { ajax: function () { return $("#myControl").val(); } }`，那么参数的值将在*保存*`ajax`值的那一刻进行评估。目前，可以有另一个价值。*`$("#myControl").val()`*

# android - 从 R.string 获取 TextView 字符串 ID

> ID：10074779
> 
> 赞同：1
> 
> 时间：2012-04-09T14:32:43.740
> 
> 标签：android, string, textview

我想从显示它的 TextView 控件中找出与字符串关联的整数值到 R.string 文件中。

所以，我有一个名为 MyTextView 的 TextView 并将它的字符串关联为

```
MyTextView.setText(R.string.MyString); 
```

现在，我想要创建一些函数来提供 MyTextView 的字符串 ID，例如*GetStringId(MyTextView)*。也许 TextView 包已经实现了这个，我找不到它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:00:36.893

要将多个翻译添加到您的应用程序，您应该使用“语言限定资源”，如[Android Docs](http://developer.android.com/guide/topics/resources/localization.html)中所述。

基本上，您将备用语言（通常是英语）的字符串添加到您的`res/values/strings.xml`-file 中。

[任何其他翻译（例如西班牙语）使用给定的语言限定符（在ISO 639-1](http://www.loc.gov/standards/iso639-2/php/code_list.php)中指定）进入其语言限定资源目录。对于西班牙语，这将是`res/values-es/strings.xml`.

然后，Android 会检查当前的设备语言，使用相应的语言限定符搜索任何翻译，并自动使用该文件中指定的字符串。如果它找不到任何具有相应语言限定符的文件夹，它会使用没有限定符的文件夹（例如“后备”语言）。

这是 Android 的一项服务，您只需将相应的翻译放在相应的语言限定文件夹中，其余的工作将由 Android 为您完成。

另请参阅这个较旧的问题：[android 中的国际化](https://stackoverflow.com/questions/7441000/internationalisation-in-android/7441027#7441027)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:08:06.940

您可以轻松实现自己的功能，将文本设置为执行您想要的 TextView。只需执行以下操作：

```
 textview.setText(R.string.my_text);
    textview.setTag(new Integer(R.string.my_text)); 
```

在用于设置文本的函数中，然后在第二个函数（用于获取字符串 ID）中执行以下操作：

```
 return ((Integer)textview.getTag()).intValue(); 
```

阅读以下两个函数的文档：

> [http://developer.android.com/reference/android/view/View.html#setTag()](http://developer.android.com/reference/android/view/View.html#setTag%28%29) [http://developer.android.com/reference/android/view/View.html#getTag()](http://developer.android.com/reference/android/view/View.html#getTag%28%29)

# android - Android 列表中的 ArrayIndexOutOFBoundsException

> ID：10074783
> 
> 赞同：1
> 
> 时间：2012-04-09T14:33:27.590
> 
> 标签：android, list, exception

我有一个 ArrayIndexOutOfBoundsException

```
private Size getPictureSize() {
    List<Size> list = camera.getParameters().getSupportedPictureSizes();
        int i = 0;
    for (Size size : list) {
        if (Math.min(size.width, size.height) <= 800) {
            if (Math.max(size.width, size.height) > 800) {
                return size;
            } else {

                return (i > 0 ? list.get(i - 1) : list.get(0));
            }
        }
        i++;

    }

    return list.get(0);
} 
```

这是有人在将其投放市场后要求我测试的应用程序的一部分，其中一个错误报告是在线的

```
return (i > 0 ? list.get(i - 1) : list.get(0)); 
```

我知道这个异常意味着什么，但是什么可能导致它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:45:29.580

您的代码中有几个问题：

*   这一行：`return (i > 0 ? list.get(i - 1) : list.get(0));`可能会计算一个在您的列表中不存在的索引；
*   如果您的列表为空，则代码的最后一行 ( `return list.get(0);`) 可能会引发一个。`IndexOutOfBoundsException`

我更改了您的代码以解决这些问题。看看能不能解决你的问题：

```
private Size getPictureSize() {
    List<Size> list = camera.getParameters().getSupportedPictureSizes();
    Size prevSize = null;
    for (Size size : list) {
        if (Math.min(size.width, size.height) <= 800) {
            if (Math.max(size.width, size.height) > 800) {
                return size;
            } else {
                return (prevSize == null? size : prevSize);
            }
        }
        prevSize = size;
    }

    if(list.size() > 0) {
        return list.get(0);
    }

    return null;
} 
```

# php - 从数组中删除重复值 - array_unique() 不起作用

> ID：10074784
> 
> 赞同：0
> 
> 时间：2012-04-09T14:33:28.697
> 
> 标签：php, arrays, image, web-scraping

我有一个从网站 (4chan) 抓取图像的脚本。它必须通过从锚标签而不是图像中获取 url 来做到这一点，否则它只会获取缩略图。问题是图像的 url 出现在两个锚标签中，因此每个图像出现两次。

我尝试将它们放入一个数组中，然后应用 array_unique() 但它不起作用。

这是我的代码：

```
foreach($html->find('a') as $element) {
    if (strpos($element->href, "/src/")){
    $a = $element->href;    
    $ht = "<img src=\"" . $a. "\" />\n";
    $arr = array($ht);
    $arr = array_unique($arr);
    foreach($arr as &$b) {
            echo $b;
        }
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:37:39.530

您没有添加到数组中，而是`$arr`在每次迭代中重新定义。尝试这个：

```
$arr = array();
foreach($html->find('a') as $element) {
    if (strpos($element->href, "/src/")){
        $a = $element->href;    
        $ht = "<img src=\"" . $a. "\" />\n";
        $arr[] = $ht; 
    }
}
$arr = array_unique($arr);
foreach($arr as &$b) {
    echo $b;
} 
```

# php - 基于 URL 变量的搜索

> ID：10074792
> 
> 赞同：0
> 
> 时间：2012-04-09T14:34:19.110
> 
> 标签：php, mysql

我有这段代码——它试图从 URL 中获取变量，然后根据条件（NULL 值除外）进行 MYSQL 选择。但是，我相信我要去某个地方，但我不知道在哪里：

```
<?php

    include('db.php'); // include your code to connect to DB.
    $tbl_name="mobile"; //your table name

    $model = ($_GET['model'] ? $_GET['model'] : NULL);
    $mins = ($_GET['mins']  ? $_GET['mins']  : NULL);    
    $texts = ($_GET['texts'] ? $_GET['texts'] : NULL); 
    $freegift = ($_GET['free-gift'] ? $_GET['free-gift'] : NULL);
    $network = ($_GET['network']   ? $_GET['network']   : NULL);
    $plan = ($_GET['plan']  ? $_GET['plan']  : NULL);
    $vars = array($model, $mins, $texts, $freegift, $network, $plan);

    foreach($vars as $value) {
        $value = (isset($_GET[$value]) ? $_GET[$value] : NULL);
        unset ($vars[$value]);  //sweeping the NULL ones 
    }
    $where_clause = $vars[0]; //the only remaining value after previous cleanup

    $where = '';
    if (count($whereClauses) > 0) {
        $where = ' WHERE '.implode(' AND ',$whereClauses);
    }
    $sql5 = mysql_query("SELECT * FROM $tbl_name".$where); 
```

这根本行不通。它应该像`www.domain.com/page.php?mobile=Samsung&mins=500`- 应该使用变量来执行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:34:21.610

我想我明白你想要什么。但是您的代码有太多错误（语义和安全性）。因此，我建议使用以下代码：

```
include 'db.php';
$tbl_name = 'mobile';

$default_list = array('model', 'mins', 'texts', 'free-gift', 'network', 'plan');
$ins_vars = array_intersect_key($_GET, array_flip($default_list));

if(!empty($ins_vars))
{
   foreach($ins_vars as $key => $val)
   {
      $val = mysql_real_escape_string($val);
      $ins_vars[$key] = "{$key}='{$val}'";
   }

   $where_clause = implode(' AND ', $ins_vars);
   $sql5 = mysql_query("SELECT * FROM {$tbl_name} WHERE {$where_clause}");
} 
```

附言。未经测试，但应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:41:37.307

您应该在此处阅读有关 sql 注入以及如何避免它的更多信息：

[http://www.sqlmag.com/article/tsql3/how-to-avoid-sql-injection](http://www.sqlmag.com/article/tsql3/how-to-avoid-sql-injection)

并且您的查询应该`LIMIT`避免 sqlserver 每次都返回所有记录。

# javascript - Javascript 每个函数在 jQuery Colorbox 中不起作用

> ID：10074800
> 
> 赞同：0
> 
> 时间：2012-04-09T14:35:14.050
> 
> 标签：javascript, jquery, colorbox

如果在我的起始页上按下一个链接，一个 jQuery Colorbox 会打开我的新站点。

```
<script type="text/javascript">    
        $(document).ready(function(){        
            $(".deletealbum").each(function(){         
                $(this).click(function(event){
                    event.preventDefault();
                    var albumname = $(this).attr('name');
                    alert(albumname);               
                    $.post('deleteAlbum.php',
                    {
                        albumname: albumname
                    });                                       
                });
            });
        });   
    </script> 
```

这是我的 Javascript - 代码，下面我有链接，看起来是这样的

```
echo "<a href='#' class='deletealbum' id='$Album' name='$Album'> DELETE </a>"; 
```

如果我按下按钮，我的颜色框中不会发生任何事情，但如果我将此页面包含在我的起始页面上，它就会完美地工作。

那么为什么它在颜色框中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:45:19.660

您的 Colorbox 是否使用 iFrame？在这种情况下，您的代码段可能不会在您愿意添加它们的元素上添加事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:09:21.070

运行此代码并查看是否收到错误消息。

```
$(function () {
    var selector = ".deletealbum";
    var $el = $(selector);
    if (!$el.length) {
        var errMsg = "Error can't find '" + selector + "'";
        throw new Error(errMsg);
    }
    $el.click(function (e) {
        var albumname = $(e.target).attr('name');
        $.post('deleteAlbum.php', {
            albumname : albumname
        });
        return false;
    });
}()); 
```

如果您收到一条错误消息，那么您将不得不找到包含您想要的元素的框架 ID。您应该能够使用 $( window.frame[ id ] ).find( selector ) 在 iframe 和框架中找到元素。

这是一个链接以获取更多信息。

[如何使用 JavaScript 从框架集框架中获取元素？](https://stackoverflow.com/questions/2509934/how-can-i-get-an-element-from-within-a-frameset-frame-using-javascript)

[Javascript - 从 iFrame 中获取元素](https://stackoverflow.com/questions/1088544/javascript-get-element-from-within-an-iframe)

我会用萤火虫检查你的 html 以加快进程。

# visual-studio-2010 - Visual Studio 2010 Ultimate 无法再创建 VC++ 项目

> ID：10074803
> 
> 赞同：2
> 
> 时间：2012-04-09T14:35:22.613
> 
> 标签：visual-studio-2010, visual-c++

突然之间，Visual Studio 2010 Ultimate 无法创建运行 Windows 7 的 VC++ 项目。

例如，当我转到新建 -> 项目 -> Visual C++ -> Win32 -> Win32 控制台应用程序，并通过向导时，我收到一条错误消息：

**名称不能为空**

**参数名称：名称**

我试过几次重新安装VS2010，但我无法让它工作。例如，创建 Visual C# 项目时没有问题。

我真的需要一些帮助。谷歌搜索这个问题似乎指向权限错误，但我无法让它与我找到的任何解决方案一起工作。

**编辑**

我解决了这个问题。进程监控工具非常适合调试此类问题。我启动它并监控**deenv**。

显然，VS2010 似乎已经保存了查找查询，我使用了“查找文件..”选项。这些文件很久以前就被删除了，我看到了与旧 C# 文件相关的错误，在这些文件中我使用了“查找文件..”选项。我检查了 Find-dropdown 并在注册表中搜索了其中一个查询，并删除了所有出现的 Find* 和 Replace* 键。

因此，转到**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\Find**并删除键**Find**、**Find1**等和**Replace**、**Replace1**等。

现在我可以在不进入安全模式的情况下创建 VC++ 项目。如果其他人有类似的问题，我将把我的解决方案留在这里。

**编辑2**

刮那个。现在我又弄坏了东西，我不知道发生了什么。

# gdb - 带有多个参数的 gdb 调试

> ID：10074805
> 
> 赞同：5
> 
> 时间：2012-04-09T14:35:25.880
> 
> 标签：gdb

我有一个程序可以读取一个图像文件，对该图像进行一些更改，然后将其存储。

程序运行如下：

```
./main file1.pgm file2.pgm 
```

我正在使用`-g`标志，所以我可以使用 GDB。

现在当我尝试像这样运行 GDB

```
# gdb main file1.pgm file2.pgm 
```

我收到此错误：

```
Excess command line arguments ignored. (file2.pgm) 
```

我该如何解决这个问题？

我的主要需要这两个论点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T14:38:45.747

从这样的命令行：

```
gdb --args ./main file1.pgm file2.pgm 
```

`run`如果您要广泛编写脚本，则在 GDB 提示符下*可能会更灵活。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:37:23.813

这不是您将参数传递给要运行的程序的方式。它`file1.pgm`作为核心文件的名称。

你想使用，*在* `gdb`，

```
gdb> :run file1.pgm file2.pgm 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T14:40:05.120

使用以下内容填充 .gdbinit：

```
set args file1.pgm file2.pgm 
```

然后简单地

```
gdb> run 
```

# python - pygame.display.set_mode().fill((0, 200, 255)) 中的 fill()

> ID：10074807
> 
> 赞同：2
> 
> 时间：2012-04-09T14:35:29.420
> 
> 标签：python, function, pygame

考虑 pygame 循环中的这一行：

```
pygame.display.set_mode().fill((0, 200, 255)) 
```

来自： http: [//openbookproject.net/thinkcs/python/english3e/pygame.html](http://openbookproject.net/thinkcs/python/english3e/pygame.html)

一、你怎么知道set_mode中嵌套了一个填充函数？我在 pygame 文档中搜索，并没有关于填写 set_mode 部分的信息。

二、`set_mode()`是pygame包的显示模块的一个功能。如何调用嵌套在另一个函数中的函数？我怎么能用`print"hi"`这个函数调用（试过但得到一个AttributeError）：

```
def f():
    def g():
        print "hi" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T14:52:05.297

pygame.display.set_mode() 返回一个 Surface 对象。

从[文档](http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode)中：

> pygame.display.set_mode 初始化用于显示的窗口或屏幕 pygame.display.set_mode(resolution=(0,0), flags=0, depth=0): return Surface

所以你是`.fill()`在表面对象上调用方法，而不是在函数上`set_mode()`。

您可以在pygame的[表面文档](http://www.pygame.org/docs/ref/surface.html)中找到表面对象可用的方法。

您不能以这种方式调用嵌套函数。要在打印示例中获得所需的结果，您可以通过以下方式使用类：

```
class F():
  def g(self):
    print "hi" 
```

导致：

```
>>> F().g()
hi 
```

这是一个简化的例子来展示它是如何`display.set_mode().fill()`工作的：

```
class Surface():
    def fill(self):
        print "filling"

class Display():
    def set_mode(self):
        return Surface()

Display().set_mode().fill() 
```

编辑：

您可以使用嵌套函数，但它的工作方式与使用对象和模块的方式略有不同：

```
def f():
  def g():
    print "hi"
  return g 
```

导致：

```
>>> outerf = f()
>>> outerf()
hi 
```

# python - 在 Windows 7 中安装 Django cms

> ID：10074808
> 
> 赞同：0
> 
> 时间：2012-04-09T14:35:32.707
> 
> 标签：python, django-cms

我在 windows 中执行 django-cms 项目时遇到了麻烦（但我已经尝试过，在 linux 和 mac 中一切正常）我已经按照本页 [https://www.django-cms.org/中描述的过程进行操作zh/documentation/](https://www.django-cms.org/en/documentation/) 我遇到的错误是

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.4
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.staticfiles',
 'cms',
 'menus',
 'mptt',
 'south',
 'cms.plugins.text',
 'cms.plugins.picture',
 'cms.plugins.link',
 'cms.plugins.file',
 'cms.plugins.snippet',
 'cms.plugins.googlemap',
 'sekizai')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  89\.                     response = middleware_method(request)
File "C:\Python27\lib\site-packages\cms\middleware\toolbar.py" in process_request
  33\.         request.toolbar = CMSToolbar(request)
File "C:\Python27\lib\site-packages\cms\cms_toolbar.py" in __init__
  61\.         self.init()
File "C:\Python27\lib\site-packages\cms\cms_toolbar.py" in init
  65\.         self.can_change = (self.request.current_page and
File "C:\Python27\lib\site-packages\cms\middleware\page.py" in __get__
  8\.             request._current_page_cache = get_page_from_request(request)
File "C:\Python27\lib\site-packages\cms\utils\page_resolver.py" in get_page_from_request
  91\.     pages_root = urllib.unquote(reverse("pages-root"))
File "C:\Python27\lib\site-packages\cms\models\__init__.py" in new_reverse
  51\.             url = django.core.urlresolvers.old_reverse(viewname, urlconf=urlconf, args=args, kwargs=kwargs, prefix=prefix, current_app=current_app)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in _reverse_with_prefix
  363\.         possibilities = self.reverse_dict.getlist(lookup_view)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in _populate
  242\.         for pattern in reversed(self.url_patterns):
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "C:\Python27\lib\site-packages\django\utils\importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named urls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:53:26.040

编辑 settings.py 文件并确保 ROOT_URLCONF 指向您存储 url 的位置。（也许是“[appname].urls”）无论如何，我通常更喜欢将 url 保留在项目根级别。

# delphi - 可以通过在运行时添加应用程序清单来对**运行时主题**进行运行时可选切换？

> ID：10074809
> 
> 赞同：1
> 
> 时间：2012-04-09T14:35:42.367
> 
> 标签：delphi, themes, manifest

> **可能重复：**
> [如何在运行时在主题和非主题之间切换应用程序？](https://stackoverflow.com/questions/4393723/how-to-switch-an-application-between-themed-and-not-themed-at-run-time)

我创建了一个*运行时主题*选项设置为*未启用*的 GUI 应用程序，并且需要在应用程序初始化期间手动启用嵌入式清单的选项。

问题：

VCL 是否允许扩展点来实现它？

让我解释：

*   自定义清单作为字符串常量嵌入到二进制文件中。
*   使用命令行参数开关启用运行时主题，例如：`MyApp.exe -themeOn`

我已经深入研究了 Forms.TApplication，希望能找到一个句柄，但没有发现任何有趣的东西指向一个方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T14:44:38.013

我会反过来做。我将通过在项目设置中启用运行时主题来包含标准 comctl v6 清单。然后我会[`SetThemeAppProperties`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759825.aspx)在启动时从 .dpr 文件中调用，以在必要时禁用运行时主题。

```
procedure DisableRuntimeThemes;
begin
  InitThemeLibrary;
  if Assigned(SetThemeAppProperties) then
    SetThemeAppProperties(STAP_ALLOW_NONCLIENT);
end;

begin
  if not FindCmdLineSwitch('themeOn') then
    DisableRuntimeThemes;
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TMainForm, MainForm);
  Application.Run;
end. 
```

您需要确保它`UxTheme`在 .dpr uses 子句中，或者甚至更好地将该功能移至其自己的专用单元。

正常包含清单然后禁用运行时主题更容易。启用运行时主题的替代方案涉及激活上下文，这比这种方法涉及更多。

* * *

已经说过这比使用激活上下文更容易，我决定看看其中涉及到什么。这就是我想出的：

```
unit ActivateRuntimeThemes;

interface

implementation

uses
  Windows, SysUtils;

type
  TActivationContext = class
  private
    FActCtxHandle: THandle;
    FCreateActCtx: function(var pActCtx: TActCtx): THandle; stdcall;
    FActivateActCtx: function(hActCtx: THandle; var lpCookie: LongWord): BOOL; stdcall;
    FDeactivateActCtx: function(dwFlags: DWORD; ulCookie: LongWord): BOOL; stdcall;
    FReleaseActCtx: procedure(hActCtx: THandle); stdcall;
    FCookie: LongWord;
    FSucceeded: Boolean;
  public
    constructor Create;
    destructor Destroy; override;
  end;

constructor TActivationContext.Create;
var
  ActCtx: TActCtx;
  hKernel32: HMODULE;
begin
  inherited;
  hKernel32 := GetModuleHandle(kernel32);
  FCreateActCtx := GetProcAddress(hKernel32, 'CreateActCtxW');
  if Assigned(FCreateActCtx) then
  begin
    FReleaseActCtx := GetProcAddress(hKernel32, 'ReleaseActCtx');
    FActivateActCtx := GetProcAddress(hKernel32, 'ActivateActCtx');
    FDeactivateActCtx := GetProcAddress(hKernel32, 'DeactivateActCtx');
    ZeroMemory(@ActCtx, SizeOf(ActCtx));
    ActCtx.cbSize := SizeOf(ActCtx);
    ActCtx.lpSource := 'C:\desktop\comctlv6.manifest.txt';
    FActCtxHandle := FCreateActCtx(ActCtx);
    FSucceeded := (FActCtxHandle<>INVALID_HANDLE_VALUE) and FActivateActCtx(FActCtxHandle, FCookie);
  end
  else
    FActCtxHandle := INVALID_HANDLE_VALUE;
end;

destructor TActivationContext.Destroy;
begin
  if FSucceeded then
    FDeactivateActCtx(0, FCookie);
  if FActCtxHandle<>INVALID_HANDLE_VALUE then
    FReleaseActCtx(FActCtxHandle);
  inherited;
end;

var
  ActivationContext: TActivationContext;

procedure FinaliseActivationContext;
begin
  ActivationContext.Free;
end;

initialization
  if FindCmdLineSwitch('themeOn') then
    ActivationContext := TActivationContext.Create;

finalization
  ActivationContext.Free;

end. 
```

您应该尽早将本单元包含在您的 .dpr 文件中。在任何内存管理器之后，但在任何 RTL/VCL 单元之前。在项目设置中将运行时主题设置为**无**。您可能希望将清单文件作为资源包含在内，但为了方便起见，我在此处将其作为文件完成。

# php - PHP HTML 仅提交表格中的某些信息

> ID：10074811
> 
> 赞同：0
> 
> 时间：2012-04-09T14:35:56.607
> 
> 标签：php, html

我正在使用 php 生成一个包含来自 mysql 服务器的值的表。在每一行旁边，我都有一个删除该行的按钮。如何将信息提交到将执行删除的 php 页面，以便它知道我希望它删除哪一行？

现在我已经命名了我的提交按钮，以便名称随着每行后增加的计数器而变化。然后我想检查是否设置了提交按钮，然后获取该提交按钮名称的值，该名称与我的行名称相同。

这行得通吗？还是有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:41:32.360

您可以简单地使用行唯一键/ID 来识别正确的行。然后可以使用此 ID 来确保删除正确的行。当您的表中没有这样的唯一 id 时，请查看[primary key](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。

# php - 在 MySQL 插入方面几乎没有挣扎

> ID：10074814
> 
> 赞同：1
> 
> 时间：2012-04-09T14:35:59.353
> 
> 标签：php, mysql

您好我正在尝试使用 php 代码将记录插入表中。

```
<?php
$server = "localhost";
$user = "root";
$pwd = "";
$db_con = mysql_connect($server,$user,$pwd);
$select_db = mysql_select_db("test_database",$db_con);
$txnid = date ("ydmHis") . mt_rand(1000, 9999);
$custnumber = "4316010100000001";
$cust_mo_num = "7875432990";
$bc_id = "LTH001";
$timestamp = "12:12:12:12:12:12";
$amounta = "500";
$txnupdate = "INSERT INTO cust_txn (txnid,cust_num,cust_mo_num,bc_username,txn_time,txn_amount,txn_type,txn_status) VALUES ('$txnid','$custnumber','$cust_mo_num','$bc_id','$timestamp','$amounta','WTH','SUCC')";
$result = mysql_query($txnupdate);
mysql_close($db_con);
echo $result;
?> 
```

当我运行此页面并刷新它时，记录只插入一次。（txnid 是主键，我每次都会更改它。）我无法知道我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:17:26.610

您的代码运行良好。因为我使用的是 ubunthu 框，所以我只是将表名大写。（您的创建表语句提供了 CUST_TXN 表名）

**来源**

```
<?php
$user = "root";
$pwd = "root123";
$db_con = mysql_connect($server,$user,$pwd);
$select_db = mysql_select_db("ci",$db_con);
$txnid = date ("ydmHis") . mt_rand(1000, 9999);
$custnumber = "4316010100000001";
$cust_mo_num = "7875432990";
$bc_id = "LTH001";
$timestamp = "12:12:12:12:12:12";
$amounta = "500";
$txnupdate = "INSERT INTO CUST_TXN (txnid,cust_num,cust_mo_num,bc_username,txn_time,txn_amount,txn_type,txn_status) VALUES ('$txnid','$custnumber','$cust_mo_num','$bc_id','$timestamp','$amounta','WTH','SUCC')";
echo $txnupdate;
$result = mysql_query($txnupdate);
mysql_close($db_con);
echo $result;
?> 
```

**结果**

```
> select * from CUST_TXN;
+------------------+------------------+-------------+-------------+-------------------+------------+----------+------------+
| txnid            | cust_num         | cust_mo_num | bc_username | txn_time          | txn_amount | txn_type | txn_status |
+------------------+------------------+-------------+-------------+-------------------+------------+----------+------------+
| 1209042028162311 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
| 1209042028177407 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
| 1209042028194204 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
| 1209042028342444 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
| 1209042028358383 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
| 1209042028362068 | 4316010100000001 | 7875432990  | LTH001      | 12:12:12:12:12:12 | 500        | WTH      | SUCC       |
+------------------+------------------+-------------+-------------+-------------------+------------+----------+------------+ 
```

您也可以将 current_timestamp 用于您的 txn_time 列

**MYSQL DDL**

```
CREATE TABLE CUST_TXN_2 ( txnid char(16), PRIMARY KEY(txnid), cust_num char(16), cust_mo_num char(10), bc_username char(6), txn_time timestamp DEFAULT CURRENT_TIMESTAMP, txn_amount varchar(10), txn_type varchar(5), txn_status varchar(10) ); 
```

**来源**

```
<?php
$user = "root";
$pwd = "root123";
$db_con = mysql_connect($server,$user,$pwd);
$select_db = mysql_select_db("ci",$db_con);
$txnid = date ("ydmHis") . mt_rand(1000, 9999);
$custnumber = "4316010100000001";
$cust_mo_num = "7875432990";
$bc_id = "LTH001";
$amounta = "500";
$txnupdate = "INSERT INTO CUST_TXN_2 (txnid,cust_num,cust_mo_num,bc_username,txn_amount,txn_type,txn_status) VALUES ('$txnid','$custnumber','$cust_mo_num','$bc_id','$amounta','WTH','SUCC')";
echo $txnupdate;
$result = mysql_query($txnupdate);
mysql_close($db_con);
echo $result;
?> 
```

**结果**

```
> select * from CUST_TXN_2;
+------------------+------------------+-------------+-------------+---------------------+------------+----------+------------+
| txnid            | cust_num         | cust_mo_num | bc_username | txn_time            | txn_amount | txn_type | txn_status |
+------------------+------------------+-------------+-------------+---------------------+------------+----------+------------+
| 1209042055524683 | 4316010100000001 | 7875432990  | LTH001      | 2012-04-09 20:55:52 | 500        | WTH      | SUCC       |
| 1209042055563581 | 4316010100000001 | 7875432990  | LTH001      | 2012-04-09 20:55:56 | 500        | WTH      | SUCC       |
| 1209042055564435 | 4316010100000001 | 7875432990  | LTH001      | 2012-04-09 20:55:56 | 500        | WTH      | SUCC       |
| 1209042055579931 | 4316010100000001 | 7875432990  | LTH001      | 2012-04-09 20:55:57 | 500        | WTH      | SUCC       |
+------------------+------------------+-------------+-------------+---------------------+------------+----------+------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:35:52.237

$txnid 听起来像时间戳。mysql可以自动插入。设置为

ALTER TABLE `CUST_TXN`CHANGE `txnid` `txnid`TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP。

您将不再在代码中设置时间戳。

# php - Ajax-loader.gif 在页面加载后结束

> ID：10074815
> 
> 赞同：0
> 
> 时间：2012-04-09T14:35:58.980
> 
> 标签：php, javascript, ajax, jquery

我一直在为这个问题苦苦挣扎一段时间。我安装了 OpenCart 1.5.2.1，在结帐阶段我有几个步骤必须在后台完成。在发生这种情况时，我正在尝试显示一个简单的 ajax-loader.gif，并且我希望它在页面完成处理后消失。目前，ajax-loader.gif 没有显示...

这是我的javascript：

```
 var el = $("#confirm .checkout-heading").addClass("loading");
  $.ajax({
      url: 'checkout/checkout.php',
      success: function(data) {},
      failure: function() {},
      complete: function() {
          el.removeClass("loading");
      }
  }); 
```

样式表：

```
#confirm .checkout-heading {
    background: #fff;
}
#confirm .checkout-heading.loading {
    background-image: url('../image/ajax-loader.gif');
    background-position: 98% 50%;
    background-repeat: no-repeat;
} 
```

页：

```
 <div class="breadcrumb">
    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
    <?php } ?>
  </div>
  <h1><?php echo $heading_title; ?></h1>
  <div class="checkout">
    <div id="checkout">
      <div class="checkout-heading"><?php echo $text_checkout_option; ?></div>
      <div class="checkout-content"></div>
    </div>
    <?php if (!$logged) { ?>
    <div id="payment-address">
      <div class="checkout-heading"><span><?php echo $text_checkout_account; ?></span></div>
      <div class="checkout-content"></div>
    </div>
    <?php } else { ?>
    <div id="payment-address">
      <div class="checkout-heading"><span><?php echo $text_checkout_payment_address; ?></span></div>
      <div class="checkout-content"></div>
    </div>
    <?php } ?>
    <?php if ($shipping_required) { ?>
    <div id="shipping-address">
      <div class="checkout-heading"><?php echo $text_checkout_shipping_address; ?></div>
      <div class="checkout-content"></div>
    </div>
    <div id="shipping-method">
      <div class="checkout-heading"><?php echo $text_checkout_shipping_method; ?></div>
      <div class="checkout-content"></div>
    </div>
    <?php } ?>
    <div id="payment-method">
      <div class="checkout-heading"><?php echo $text_checkout_payment_method; ?></div>
      <div class="checkout-content"></div>
    </div>
    <div id="confirm">
      <div class="checkout-heading">Confirm Purchase</div>
      <div class="checkout-content"></div>
    </div>
  </div> 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:58:40.987

可能的原因有以下三种：

1.  您试图在 DOM 准备好之前获取元素（使用 $(document).ready)）；

2.  Ajax 执行速度太快，因此您无法观察加载程序。

3.  你在使用 css/image 时遇到了麻烦。要测试它摆脱 javascript 并查看它是否适用于静态内容（手动添加类“加载”）。

在以下示例中，我将 ajax 的执行推迟了 2 秒：

[http://jsfiddle.net/webdevel/Dd3B7/1/](http://jsfiddle.net/webdevel/Dd3B7/1/)

# c# - 尝试执行“读取”时出现 SslStream 错误

> ID：10074818
> 
> 赞同：0
> 
> 时间：2012-04-09T14:36:20.247
> 
> 标签：c#, ssl, sslstream

我有一些创建 TCP/IP (IPv4) 套接字并侦听传入连接的功能。

```
private string RunServer(string certificate)
    {
        string messageData = "";
        X509Certificate2 cert = new X509Certificate2(@"C:\a.p12", "qwerty");
        var listener = new TcpListener(IPAddress.Parse("127.0.0.1"), 443);
        listener.Start();
        while (true)
        {
            var client = listener.AcceptTcpClient();
            var sslStream = new SslStream(client.GetStream(), false);
            try
            {
                sslStream.AuthenticateAsServer(cert,
                false, SslProtocols.Tls, true);
                messageData = ReadFromSslClient(sslStream, client);
            }
            finally
            {
                sslStream.Close();
                client.Close();
            }
        }
        return messageData;
    } 
```

以及读取客户端测试消息的功能。发生错误的地方：

```
private static string ReadFromSslClient(SslStream sslStream, TcpClient client)
    {
        byte[] buffer = new byte[2048];
        var messageData = new StringBuilder();
        int bytes = -1;
        do
        {
            try{
                if (client.Connected)
                {
                    bytes = sslStream.Read(buffer, 0, 1);
                    messageData.Append(bytes);
                }
                if (messageData.ToString().IndexOf("<EOF>") != -1)
                {
                    break;
                }
             }
            catch(System.NotSupportedException notSupportedException)
            {

            }
        } while (bytes != 0);

        return messageData.ToString();
    } 
```

当我尝试将数据读取到缓冲区时，我看到 10054 错误并且 client.Connected 等于 false。

# video - FFMPEG：视频比特率的动态变化

> ID：10074822
> 
> 赞同：2
> 
> 时间：2012-04-09T14:37:04.517
> 
> 标签：video, ffmpeg, bitrate

我在我的 C++ 应用程序中使用 ffmpeg 代码，并希望在那里控制 VIDEO 的 bit_rate 参数。我试图改变它在工作中的价值（通过 ost->st->codec->codec->bit_rate），但 ffmpeg 不想改变它。也许有人知道如何制作它？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:16:04.430

我试过这样，它对我有用。

```
 avcodec_init();

     avcodec_register_all();

     codec = avcodec_find_encoder(CODEC_ID_H263);

     c = avcodec_alloc_context();

     picture= avcodec_alloc_frame();

        c->bit_rate = bitrate;
        c->width = w;
        c->height = h;
        c->time_base= (AVRational){1,framerate};
        c->pix_fmt = PIX_FMT_YUV420P;

avcodec_close(c);

av_free(c); 
```

# ipad - 在 iPad-Simulator 上模拟捏合

> ID：10074825
> 
> 赞同：37
> 
> 时间：2012-04-09T14:37:08.637
> 
> 标签：ipad, ios-simulator, pinch

我目前正在尝试在 iPad 显示器上实现（2 指）捏的处理。这样做我遇到了手指（由 iPhone 模拟器中的两个灰色圆圈表示）不会出现在 iPad 模拟器中的问题。即使仍然可以模拟捏合，但有时很难在没有看到手指的情况下这样做，甚至不可能将手指拖动到应该发生捏合的位置。

是否有秘密设置等来启用那些灰色圆圈？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-04-09T14:50:34.610

如果在您希望“捏合”的区域单击鼠标时按住 Option 键，您应该能够看到它们。此外，如果您按下 Shift-Option，它将锁定两个“手指”相对于彼此的位置。

1.  将指针放在您希望发生捏合的位置。

2.  按住选项键。

3.  将代表手指触摸的圆圈移动到起始位置。

4.  按住 Shift 键移动捏合目标的中心，将圆圈移动到所需的中心位置，然后松开 Shift 键。

5.  按住鼠标按钮，将圆圈移动到结束位置，然后松开 Option 键。

通过[Apple 文档](https://developer.apple.com/library/archive/documentation/IDEs/Conceptual/iOS_Simulator_Guide/InteractingwithiOSandwatchOS/InteractingwithiOSandwatchOS.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T22:33:05.120

要让灰色圆圈在 iOS Simulator 5.1 for iPad 中工作，您必须将比例设置为 75% (Cmd-2) 或 50% (Cmd-3)。为什么？我不知道。似乎是一个错误。

# ios - Xcode：标签制作错误

> ID：10074826
> 
> 赞同：1
> 
> 时间：2012-04-09T14:37:11.263
> 
> 标签：ios, xcode, xcode4, window

```
 - (void)viewDidLoad
{
    CGRect frame = CGRectMake(20, 45, 140, 21);
    UILabel *label = [[UILabel alloc] initWithFrame:frame];

    [window addSubview:label];
    [label setText:@"Hello world"];
    [label release];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

错误是：使用下划线标识符“窗口”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:51:17.820

您可以设置每个字母的**标签**属性，并在 touchesMoved 上检查它们。`UIImageView`

```
- (void)touchesMoved:(NSSet*)touches withEvent: (UIEvent*)event{

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view.superview];

    switch (touch.view.tag) {
        case 0:
            a.center=location;
            break;
        case 1:
            b.center=location;
            break;
        case 3:
            c.center=location;
            break;
    }
} 
```

## 编辑

使用@beryllium 的评论：

```
- (void)touchesMoved:(NSSet*)touches withEvent: (UIEvent*)event{

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view.superview];
    touch.view.center = location;
} 
```

另请注意，您应该获取图像的超级视图位置，而不是从图像本身。

# c# - 在会话中存储整个 LINQ 对象的想法？

> ID：10074827
> 
> 赞同：3
> 
> 时间：2012-04-09T14:37:13.067
> 
> 标签：c#, asp.net, linq, oop, session

我想就您将整个对象存储到会话中的想法获得一些反馈？例如，客户对象。一旦客户登录到他们的控制面板，而不是每次需要从会话中存储的 ID 重新获取他们的数据，将整个客户对象存储在会话中的优缺点是什么？

因此，只要您需要引用客户对象，您就可以这样做：

```
Customer c = (Customer)Session["objCustomer"]; 
```

显然，您需要检查并具有刷新会话的功能。在空会话的情况下或进行更新后，您需要运行此函数。

除此之外，还有其他我应该注意的问题吗？就编程而言，这似乎要好得多，而且对数据库的调用也少得多。有人想吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T14:53:26.317

这不是一个好主意。

主要原因是 ORMappers 的工作方式 - 当您混合来自不同上下文的对象时，它们不喜欢它。这将在您建议的场景中发生 - 您在会话中有一个对象，由您的下一个（和后续）请求使用的不同上下文创建。Sonner 或以后你会开始遇到异常。

就我个人而言，我更喜欢一种方法，其中包含客户 ID（可能还有其他属性）的简单对象存储在会话中（或表单 cookie 的自定义数据部分），我将对客户对象的访问包装在一个简单的语句中涉及`Items`容器：

（生产代码需要在这里和那里进行一些检查才能更具防御性）：

```
const string CUSTOMERITEM = "customeritem";
public Customer Current
{
    get
    {
        if ( HttpContext.Current.Items[CUSTOMERITEM] == null )
        {
           int id = retrieve_the_id;

           using ( DbContext ctx = GetCurrentDbContext() ) 
           {
               HttpContext.Current.Items.Add( CUSTOMERITEM, ctx.Customers.FirstOrDefault( c => c.ID == id );
           }
        }
        return (Customer)HttpContext.Current.Items[CUSTOMERITEM];
    }
} 
```

项目容器仅持续一个请求的时间。上面的代码片段确保每个请求只加载一次对象。

当然，与您的方法相比，每个请求需要额外查询一次。但优点是您永远不会弄乱数据库上下文。

请注意，有些业务流程不需要该`Customer`对象，但您可以直接传递客户 ID 并在查询中使用：

```
 public IEnumerable<Order> CustomerOrders( int CustomerID ) 
 {
     // use the customer id directly, without first loading the customer object
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:59:38.227

我在另一个答案中遇到了 Wiktor 描述的问题。我使用 NHibernate，如果您将对象存储在会话中，您会遇到比较它们的问题、断开会话的问题等。尽管如此，我还是将对象存储在会话中。我只是确保他们都实现了自己的 Equals() 和 GetHashCode() 函数。这样我就可以比较来自不同会话的对象，看看它们是否是同一个对象。我养成了使用`obj1.Equals(obj2)`而不是`obj1 == obj2`.

当然，总会有权衡——您获得了不必重复查询的速度，而不是增加代码的复杂性。哪种方式适合您取决于您​​的具体情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T16:12:18.837

mellamokb 我同意你引入你需要的属性的观点。你可以通过调整模型来做到这一点，你也可以关闭延迟加载。除此之外，我认为这是非常安全的。除非我们将所有这些对象存储为引用，否则这些对象一旦放置在会话中就没有问题。唯一可能导致问题的情况是两个上下文都在范围内。

# asp.net - 传递列表 到一个存储过程

> ID：10074829
> 
> 赞同：3
> 
> 时间：2012-04-09T14:37:15.623
> 
> 标签：asp.net, sql-server, stored-procedures

我有一个字符串列表，我需要检查列表中的任何值是否包含在数据库表中。如果存在则返回现有值的数据集。

```
public DataSet CheckDocumentNumber(List<string> DocNumber)
{
   DataSet DocNum = new DataSet();
   SqlTransaction transaction = DALDBConnection.SqlConnection.BeginTransaction();

   try
   {
      string[] taleNames = new string[1];
      taleNames[0] = "DocNum";
      SqlParameter[] param = new SqlParameter[1];
      param[0] = new SqlParameter("@DocNumber", DocNumber);

      SqlHelper.FillDataset(transaction, CommandType.StoredProcedure, "spCheckDocNumber", DocNum, taleNames, param);
      transaction.Commit();
   }
   catch (Exception e)
   {
      transaction.Rollback();
   }

   return DocNum;
} 
```

我的存储过程是

```
CREATE PROCEDURE spCheckDocNumber
    @DocNumber VARCHAR(MAX)
AS
BEGIN
   SELECT * FROM tblDocumentHeader WHERE DocumentNumber = @DocNumber
END 
```

我需要知道如何将列表传递给存储过程以及如何在过程中检查列表。请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:40:29.350

创建一个拆分函数，该函数根据字符拆分字符串。

```
GO
CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(8000))
RETURNS table
AS
RETURN (
    WITH splitter_cte AS (
      SELECT CHARINDEX(@sep, @s) as pos, 0 as lastPos
      UNION ALL
      SELECT CHARINDEX(@sep, @s, pos + 1), pos
      FROM splitter_cte
      WHERE pos > 0
    )
    SELECT SUBSTRING(@s, lastPos + 1,
                     case when pos = 0 then 80000
                     else pos - lastPos -1 end) as chunk
    FROM splitter_cte
  )
GO

SELECT *
  FROM dbo.Split(' ', 'the quick brown dog jumped over the lazy fox')
OPTION(MAXRECURSION 0); 
```

然后使用 Split 函数以逗号分隔，然后您可以将输出用作表，然后连接到您要查找的表。

这可以使拆分逗号分隔列表变得非常容易。然后你可以传入一个字符串，其中所有 hte 值用逗号分隔。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:04:26.007

您可以使用如下代码： 这适用于 SQL Server 2005（及更高版本）：

```
create procedure IGetAListOfStrings
@List xml -- This will recevie a List of values
  as
begin
  -- You can load then in a temp table or use it as a subquery:
  create table #Values (ListValue nvarchar(20)); -- adjust nvarchar size
  INSERT INTO #Values
  SELECT DISTINCT params.p.value('.','varchar(20)') -- adjust nvarchar size
  FROM @List.nodes('/params/p') as params(p);
  ...
end 
```

您必须使用如下参数调用此过程：

```
exec IGetAListOfValues
@List = '<params> <p>string1</p> <p>string2</p> </params>' -- xml parameter 
```

节点函数使用 xPath 表达式。在这种情况下，`/params/p`XML`<params>`用作根和`<p>`元素。

有关更多信息，请参阅此答案： [将值列表传递给存储过程](https://stackoverflow.com/questions/9792131/using-an-in-clause-with-linq-to-sqls-executequery/10075467#10075467)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:42:33.200

也许您可以在 sql 中使用[In 运算符。](http://www.w3schools.com/sql/sql_in.asp)[在http://vyaskn.tripod.com/passing_arrays_to_stored_procedures.htm](http://vyaskn.tripod.com/passing_arrays_to_stored_procedures.htm)上也有一些关于如何使用它的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:43:14.557

您必须自己编写代码，使用 xml sql 数据类型是一个不错的选择。

请参阅：[将参数数组传递给存储过程](https://stackoverflow.com/questions/1069311/passing-an-array-of-parameters-to-stored-procedure)以获取代码示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:49:31.313

将 XML 发送到 SQL

```
 List<string> lst = new List<string> {
                                                        "1",
                                                        "2",
                                                        "3"
                                                };

            XmlSerializerNamespaces namespaces = new XmlSerializerNamespaces(); 
            namespaces.Add(string.Empty, string.Empty);
            StringBuilder sb = new StringBuilder();
            using (var sw = new StringWriter(sb)) //serialize
            {
                var serializer = new XmlSerializer(typeof (List<string>));
                serializer.Serialize(sw, lst, namespaces);
            } 
```

现在，将 SB 作为参数发送到 sql。

就这样。

不要使用 CSV。

# cpu - 超标量和乱序（OoO）执行之间的一般区别是什么？

> ID：10074831
> 
> 赞同：18
> 
> 时间：2012-04-09T14:37:27.807
> 
> 标签：cpu, cpu-architecture

我一直在阅读一些关于 superscalr 和 OoO 的材料，我很困惑。
我认为他们的架构图看起来非常相似。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-26T05:35:47.280

**超标量微处理器可以同时执行两条或多条指令。** 例如，通常它们至少有 2 个 ALU（尽管超标量处理器可能有 1 个 ALU 和其他一些执行单元，如移位器或跳转单元。）

更准确地说，超标量处理器可以在同一周期内开始执行两条或更多条指令。 **流水线处理器一次可以执行多条指令，但非超标量流水线处理器在任何给定周期内只会启动一条指令。** 流水线执行单元需要多个周期来端到端执行。换句话说：超标量处理器通常能够以每个周期的单周期延迟执行两条非流水线指令，而非超标量流水线处理器不能同时在 ALU 中执行两条单周期指令。

**乱序处理器可以乱序执行指令。**例如，在下面，其中 MULTIPLY 需要 5 个周期，指令 3 可能在指令 2 之前执行 - 因为指令 2 正在等待指令 1 的 MULTIPLY 的 5 个周期结果：

```
1: MULTIPLY reg1 := reg2 * reg3
2: ADD reg4 := reg1 + 5
3: ADD reg6 := reg2 + 1 
```

大多数乱序处理器也是超标量的。但是，您可以想象构建一个非超标量的乱序处理器，每个周期只能在流水线 ALU 上启动一个操作。（当英特尔采用这种操作时，我*已经*提议将此类操作作为低功耗芯片。哎呀，您可以构建只有中途标量的无序处理器，例如，只有一个 16 位宽的 ALU，需要 2 个周期一个 32 位的添加，等等。但那是拉伸的。）

然而，许多超标量处理器并不是乱序的。在上面的示例中，有序超标量将首先执行指令 1。它*不会*启动指令 3，而是会等到指令 2 可以启动——此时它会同时启动指令 2 和 3。

有时您必须考虑不太可能的极限情况，例如 1 宽或半宽 OOO 机器，才能理解这些概念。

# jquery - 如何在 JavaScript 中滚动 div 时更改光标？

> ID：10074836
> 
> 赞同：0
> 
> 时间：2012-04-09T14:37:42.160
> 
> 标签：jquery

我在 div 上滚动。当用户滚动该 div 时，我想更改我的光标符号。对于其他页面滚动，这应该保持默认。

我怎样才能在 jQuery 或 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:40:36.807

jQuery

```
$('div:hover').css({'cursor':'whatever'}); 
```

或者

```
$('div').scroll(function() {
    $(this).css({'cursor':'whatever'});
}); 
```

CSS

```
div:hover { cursor: whatever } 
```

在此处查看光标选项：http: [//www.w3schools.com/cssref/pr_class_cursor.asp](http://www.w3schools.com/cssref/pr_class_cursor.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:52:35.613

```
$("#MyDivsID").on('scroll', function() {
   $(this).css('cursor', 'pointer'); //or whatever cursor you'd like
}); 
```

# vb.net - 在 VB.NET 中重载 Equals / GetHashCode 以将对象用作字典键

> ID：10074837
> 
> 赞同：1
> 
> 时间：2012-04-09T14:37:46.793
> 
> 标签：vb.net, excel, dictionary, equals, gethashcode

我有一个字典，其键是 Excel Range 对象（不，这是不可协商的），定义如下（CellProp 类型是一个包含各种单元格属性的对象）：

```
Dim dic As New Dictionary(Of Excel.Range, CellProp)(New RangeComparer()) 
```

因为键是对象，所以我需要重载 Equals/GetHashCode 函数。我目前的实现如下：

```
Class RangeComparer
Implements IEqualityComparer(Of Excel.Range)
Public Overloads Function Equals(ByVal x As Excel.Range, ByVal y As Excel.Range) As Boolean Implements IEqualityComparer(Of Excel.Range).Equals
    If x.Address(External:=True) = y.Address(External:=True) Then
        Return True
    Else
        Return False
    End If
End Function
Public Overloads Function GetHashCode(ByVal obj As Excel.Range) As Integer Implements IEqualityComparer(Of Excel.Range).GetHashCode
      Return obj.Count.GetHashCode
    End Function
End Class 
```

但是，当一次将许多单元格（即数百个）添加到字典时，执行起来可能会很慢。最重要的是，有没有更快的方法来做到这一点？其次，为什么获取 Range 的 Count 属性的哈希码似乎有效（尽管速度很慢）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:54:14.843

您可能想对[哈希码的工作原理](http://en.wikipedia.org/wiki/Hash_function)进行一些研究。哈希码是 100% 任意的，可由程序员定义。唯一重要的是，如果*两个实例不相同，那么它们的哈希码应该不同*。如果您有一个几乎所有哈希码都相同的集合（即count = 1），那么您的字典仍然可以正常工作，但它会退化为线性搜索，这是非常低效的。这是因为几乎所有的实例都在产生散列冲突，因此散列到桶中没有任何好处。

例如，您可以尝试的另一种哈希码算法是从单元格的名称生成一个，它应该有更少的哈希冲突：

```
Public Overloads Function GetHashCode(ByVal obj As Excel.Range) _
    As Integer Implements IEqualityComparer(Of Excel.Range).GetHashCode

  Return obj.Address(External:=True).GetHashCode

End Function 
```

# jquery - 清除动态生成的图像

> ID：10074841
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:04.960
> 
> 标签：jquery, image, dynamic, generated

这是我当前的[演示](http://jsfiddle.net/gbzsR/8/)。我正在尝试动态加载图像，现在我想知道如何通过单击按钮从所有页面中删除所有图像。

这是我的代码：

```
 $(function () {
        $('#fileupload').fileupload({

            dataType: 'json',
            done: function (e, data) {
                $("#demo5").paginate({
                    count: pageNumber,
                    start: 1,
                    display: Math.min(7, pageNumber),
                    border: true,
                    border_color: '#fff',
                    text_color: '#fff',
                    background_color: 'black',
                    border_hover_color: '#ccc',
                    text_hover_color: '#000',
                    background_hover_color: '#fff',
                    images: false,
                    mouse: 'press',
                    onChange: function (page) {
                        $('#paginationdemo ._current').removeClass('_current').hide();
                        $('#p' + page).addClass('_current').show();
                    }
                });
                $.each(data.result, function (index, file) {

                    if (imagesInPage >= imagesPerPage) {
                        imagesInPage = 1;
                        pageNumber += 1;
                        divPage = $('<div/>', { id: "p" + pageNumber }).addClass('pagedemo').hide().appendTo(pagesContainer);
                    } else {
                        imagesInPage += 1;
                    }
                    var src = 'Uploads/' + file.name;
                    $('<img>', { src: src, href: src, "class": 'LoadclickImage', align: 'left', width:'87', height:'60' }).appendTo(divPage);

                });

            }
        }); 
```

这是我的 div 结构：

```
<div id="paginationdemo" class="demo">
    <div id="pagesContainer">
        <div id="p1" class="pagedemo _current"></div>
    </div>
    <div id="demo5"></div>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:43:52.840

这应该这样做：

$(".LoadclickImage").remove();

`.remove()`在[jQuery 文档](http://docs.jquery.com/)中查找。还要考虑`.detach()`。

# c# - 在 Windows 窗体应用程序中托管交互式 Web 服务

> ID：10074843
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:06.840
> 
> 标签：c#, windows, wcf, forms

所以我知道如何在 Windows 窗体应用程序中托管 WCF 服务。但是如何让服务与表单上的控件进行交互。例如，我希望 Web 服务调用将图像加载到图片控件中。如果您找到了这样做的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:22:09.727

您可以执行此操作的一种方法如下所示...

*注意：我会有点担心这种方法，并且可能想在做这样的事情之前更多地了解你想要实现的目标，但为了在这里回答你的问题，它是......*

假设您想允许某人向您发送一张图片以显示在表单上的图片框中，因此从服务开始，它可能如下所示：

```
[ServiceContract]
public interface IPictureService
{
    [OperationContract]
    void ShowPicture(byte[] picture);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
public class PictureService : IPictureService
{
    private readonly Action<Image> _showPicture;

    public PictureService(Action<Image> showPicture)
    {
        _showPicture = showPicture;
    }

    public void ShowPicture(byte[] picture)
    {
        using(var ms = new MemoryStream(picture))
        {
            _showPicture(Image.FromStream(ms));    
        }            
    }
} 
```

现在创建一个用于显示图片的表单（Form1 是表单的名称，pictureBox1 是相关的图片框）。代码如下所示：

```
public partial class Form1 : Form
{
    private readonly ServiceHost _serviceHost;

    public Form1()
    {
        // Construct the service host using a singleton instance of the
        // PictureService service, passing in a delegate that points to
        // the ShowPicture method defined below
        _serviceHost = new ServiceHost(new PictureService(ShowPicture));
        InitializeComponent();
    }

    // Display the given picture on the form
    internal void ShowPicture(Image picture)
    {
        Invoke(((ThreadStart) (() =>
                                   {
                                       // This code runs on the UI thread
                                       // by virtue of using Invoke
                                       pictureBox1.Image = picture;
                                   })));
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // Open the WCF service when the form loads
        _serviceHost.Open();
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        // Close the WCF service when the form closes
        _serviceHost.Close();
    }
} 
```

为了完整起见，添加一个 app.config 并将其放入（显然，您如何托管服务并不重要，因为 WCF 会在很大程度上将其抽象出来，但我想给您一个完整的工作示例）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service name="WindowsFormsApplication1.PictureService">
            <endpoint address="" binding="wsHttpBinding" contract="WindowsFormsApplication1.IPictureService">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:8732/WindowsFormsApplication1/PictureService/" />
                </baseAddresses>
            </host>
        </service>
    </services>
  </system.serviceModel>
</configuration> 
```

就是这样 - 如果您向 ShowPicture 操作发送一个作为图像的字节数组，它将显示在表单上。

例如，说创建一个控制台应用程序并添加对上面定义的 winforms 应用程序中托管的服务的服务引用，main 方法可以简单地将其包含在其中（并且 logo.png 将显示在表单上）：

```
var buffer = new byte[1024];
var bytes = new byte[0];
using(var s = File.OpenRead(@"C:\logo.png"))
{
    int read;
    while((read = s.Read(buffer, 0, buffer.Length)) > 0)
    {
        var newBytes = new byte[bytes.Length + read];
        Array.Copy(bytes, newBytes, bytes.Length);
        Array.Copy(buffer, 0, newBytes, bytes.Length, read);
        bytes = newBytes;
    }              
}

var c = new PictureServiceClient();
c.ShowPicture(bytes); 
```

# ruby-on-rails - 尝试以使用 fields_for 的嵌套形式访问子对象

> ID：10074845
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:12.963
> 
> 标签：ruby-on-rails, nested-attributes

我有一个名为 Account 的父模型，它有一个 Company。

Account 模型使用`accepts_nested_attributes_for :company`助手。

我正在使用 RESTful 方法来创建一个帐户，这将/也应该创建一个公司。

在我对 AccountsController 的新操作中，我有：

```
@account = Account.new
@company = @account.companies.new 
```

当我启动新视图时，我可以使用`<%= debug... %>`视图中的函数同时看到帐户对象和公司对象。

在我为 AccountsController 的创建操作中，`render 'new'`如果验证没有通过。

**这让我感到困惑：**

调用时`render 'new'`，我不再看到公司对象，而只看到帐户对象。

公司对象去哪儿了，我如何取回它以便我可以访问它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:05:43.970

如果验证未通过，方法“create”必须包含带有“@company = @account.companies.new”的行。

# android - 在数组列表中的随机索引处添加值

> ID：10074846
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:17.400
> 
> 标签：android, arraylist

我想在数组列表中添加一些值，但在随机索引处。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:40:30.803

您可以使用带有范围的[Math.Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#random%28%29)来执行此操作。我怀疑你想在任何索引处添加它，因为 ArrayList 是一个[动态扩展的数组](http://en.wikipedia.org/wiki/Dynamic_array)，这意味着如果你使用超过一定大小的索引，它必须调整大小。这将使您的插入成本超过所需的成本，并且占用的内存也超出所需。如果你知道你只会说.. 100 个项目，那么只需选择 1 - 100 之间的随机值。

**编辑：**如果您执行以下操作，随机不会产生十进制值..您说您想要 1-4 之间的范围，而不是以下应该给您想要的内容...

```
public int Rand(){
    return ((int)(1+(Math.random()*4)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:44:42.840

是的，有可能，`Math.random()`可以`add()`与`ArrayList`.
例如：

```
arrayList.add(getRandomIndex(arrayList.size()),object); 
```

getRandomIndex() 方法可以是：

```
public int getRandomIndex(int size){
    return ((int)Math.random()*size)
} 
```

# php - Non Breaking 空间转换为奇怪的字符（编码）；

> ID：10074847
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:25.303
> 
> 标签：php, mysql, utf-8

导入后我从数据库中导入了一些文本我发现`ISO-8859-1`当我用 phpmyadmin 检查这个时它变成了两个奇怪的字符 我发现它看起来像星号不存在所以我无法在替换查询中匹配它，所有什么我想要的是通过mysql查询用空格替换这个字符。感谢您的帮助`UTF8``&nbsp;``Â*``Â`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:52:22.017

经过一番检查，我可以匹配所需的字符组合`Â+space`我可以将空格与`alt+0160`非正常空格匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:01:27.973

在将其插入数据库之前尝试使用 utf8_encode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:03:23.243

`REPLACE(text_string, from_string, to_string)`您可以使用函数更新表字段。请参阅[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

# php - 表格完成后返回上一页

> ID：10074848
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:26.417
> 
> 标签：php, forms

基本上我有一个注册表单，当我点击提交按钮时，检查电子邮件是否有效。

但是，如果有错误记录，我会执行 "header (" location: ". $ _SERVER ['HTTP_REFERER']);" 转到上一页。发生这种情况时，您需要在表单中重新写入，我该如何填写数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:44:38.913

您需要将先前输入的值临时存储在会话中：

```
$_SESSION['prevPost'] = $_POST; 
```

然后，您可以在加载原始页面时使用它们重新填充表单：

```
<?php
    $prevPost = $_SESSION['prevPost'];
?>
<input type="text" name="email" value="<?php echo $prevPost['email']; ?>"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:45:16.630

如果您提交到显示表单的同一页面，则不需要进行重定向。然后，您`value`使用从帖子传入的数据设置表单元素并重新显示表单。您的数据需要正确转义以防止跨站点脚本攻击等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:50:47.957

当您绘制表单时，您只需要检查值是否存在。

```
$name = '';
if(!empty($_POST['name']){
    $name =  $_POST['name'];
}

<input type="text" name="name" value="<?php echo $name?>" /> 
```

注意：当适用于遏制 xss 攻击时，您应该对这些值进行 urlencode。

# javascript - 如何使用空格设置 dojo 内容选项卡标题？

> ID：10074849
> 
> 赞同：1
> 
> 时间：2012-04-09T14:38:36.457
> 
> 标签：javascript, user-interface, dojo, dijit.layout

我将 Dojo 1.7.1 用于 UI 的 Web 应用程序，并使用内容选项卡作为显示信息的主要方式。我在需要时使用 ajax 调用动态生成这些内容选项卡。

对于内容选项卡，我面临在内容选项卡标题中有空格的问题。例如，我想将选项卡标题显示为“查看客户端详细信息”，但它不适用于空格或 . 我被迫将其显示为“ViewClientDetails”，这肯定不好，并且在用户界面方面非常有限。

我在 dojo 论坛上进行了搜索，发现关于此的文档很少。如何使用空格设置 dojo 内容选项卡标题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:14:22.173

```
data-dojo-props="title: 'View Client Details'" 
```

应该管用。

# jquery - 如何触发与当前按钮关联的远程元素？

> ID：10074856
> 
> 赞同：0
> 
> 时间：2012-04-09T14:38:55.373
> 
> 标签：jquery, hover, mouseevent, contains

如何触发与当前按钮关联的远程元素？

例如，

HTML

```
<ul class="menu-1">
    <li><a href="#">button 1</a></li>
    <li><a href="#">button 2</a></li>
    <li><a href="#">button 2</a></li>
</ul>

<ul class="menu-2">
    <li><a href="#">button 1</a></li>
    <li><a href="#">button 2</a></li>
    <li><a href="#">button 2</a></li>
</ul> 
```

因此，当我将**按钮 1** in悬停时`menu-1`，**按钮 1** in`menu-2`也应该悬停。

因此，当我将**按钮 1** in悬停时`menu-2`，**按钮 1** in`menu-1`也应该悬停。

我的工作jQuery，

```
$(".menu-1 li").hover(function () {

        var text = $(this).text();

        if ($('.menu-2 li a:contains("'+text+'")').length > 0) {
            $('.menu-2 li a:contains("'+text+'")').trigger("mouseenter");
        }
    }); 
```

jsfiddle，

[http://jsfiddle.net/JDG7U/](http://jsfiddle.net/JDG7U/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:08:51.023

我使用的方法是将您的替换`:hover`为一个`.hover`类并将 CSS 更改分配给该类。然后我`data-`为每个属性添加了一个属性`li`并对其进行过滤。（使用类会导致问题，因为如果不选择类，我也无法读取任意类属性`hover`。）

有点复杂，但它留下了一些非常简短和简单的代码，如果需要，它允许对元素进行重新排序。

HTML：

```
<ul class="menu-1">
    <li data-num="1"><a href="#">button 1</a></li>
    <li data-num="2"><a href="#">button 2</a></li>
    <li data-num="3"><a href="#">button 3</a></li>
</ul>

<ul class="menu-2">
    <li data-num="2"><a href="#">button 2</a></li>
    <li data-num="3"><a href="#">button 3</a></li>
    <li data-num="1"><a href="#">button 1</a></li>
</ul>​ 
```

JS：

```
$('ul li').hover(function() {
    var num = $(this).data('num');
    $('li').filter(function() {
        return $(this).data('num') === num;
    }).toggleClass('hover');
});​ 
```

CSS：

```
ul li.hover a {
    color: green;
}​ 
```

[http://jsfiddle.net/he7Uk/2/](http://jsfiddle.net/he7Uk/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:08:41.090

据我所知，您不能真正触发像 :hover 这样的伪类，但是您可以使用类或在 JS 的 mouseenter/mouseleave 事件中设置样式，或者直接更改 CSS，例如：

```
$(".menu-1 li").on({
    mouseenter: function () {
       var index = $(this).index();
       $('.menu-2 li a').eq(index).css('color', 'green');
    },
    mouseleave: function() {
       var index = $(this).index();
       $('.menu-2 li a').eq(index).css('color', 'black');
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/JDG7U/3/)

或与课程，双向工作：

```
$(".menu-1 li, .menu-2 li").on({
    mouseenter: function () {
        var index = $(this).index(),
            elems = $('.menu-1 li a:eq('+index+'), .menu-2 li a:eq('+index+')');
        $(elems).addClass('hover');
    },
    mouseleave: function () {
        var index = $(this).index(),
            elems = $('.menu-1 li a:eq('+index+'), .menu-2 li a:eq('+index+')');
        $(elems).removeClass('hover');
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/JDG7U/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:10:25.547

还有一个变体使用`:nth-child`：

```
$lis = $('.menu li');
$lis.hover(function() {
    var index = $(this).index() + 1;
    $lis.filter(':nth-child(' + index + ')').addClass('hovered');
}, function() {
    $lis.removeClass('hovered');
});​ 
```

演示：http: [//jsfiddle.net/JDG7U/5/](http://jsfiddle.net/JDG7U/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:42:11.960

给他们两个一样的`.class`

# php - 如何检测图像中的框并将它们作为单个文件拉出？

> ID：10074860
> 
> 赞同：2
> 
> 时间：2012-04-09T14:39:18.327
> 
> 标签：php, image-processing, imagemagick, ocr, tesseract

我需要一种编程方式来获取扫描图像（假设 PNG 或任何其他方便的图像格式）并将其分解为许多较小的图像。扫描的图像是一个网格，网格的框总是相同的大小和相同的相对位置。因为图像是扫描的，所以它们不一定在同一个绝对位置。每个框中都有一个字符，理想情况下我想将字符保存为自己的图像文件，没有任何框边框。

我更喜欢 PHP 和 ImageMagick，我认为这将是正确的工具组合。但是，如果有更好的方法可以做到这一点，我会很灵活。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:55:55.173

这是解决问题的算法方法的开始......

我正在使用我为测试目的创建的这张图片，称为`box.jpg`，尺寸为 352x232 像素：

![测试图...](../Images/84ee3b62db1d6c8321f1c2c429f78311.png)

目标是识别红色框并提取“戴夫”图片。

我的算法方法如下：

1.  将图片缩放到具有原始宽度，但高度仅为 1 像素的图片；同时转为灰度，增加对比度；使用 ImageMagick 可以发出的每个像素属性的文本描述。这样，您应该能够找到垂直红线像素累积极端颜色值的两个点。（垂直的红线像素与灰色字母像素将具有更常见的颜色值。）

2.  在另一个方向上做同样的事情：将图片缩放到具有原始高度但宽度仅为 1 像素的图片（转换为灰度，增加对比度，使用文字描述...... yadda-yadda）。您会发现水平红线像素累积极端颜色值的两个点。（与灰色字母像素相结合的垂直红线将具有更“平均”的颜色值。）

3.  确定两个结果中每个颜色值峰值的位置：这将为您提供要从原始图像中提取的子图像的几何形状。

4.  从原始图像中提取子图像。根据需要裁剪每一侧。

我无法详细说明完整的算法，但这里是我将用于第 1 步和第 2 步的命令。

## 步骤 1 的命令

```
convert                   \
    -type grayscale       \
    -depth 8              \
     box.jpg              \
    -scale x1\!           \
    -contrast-stretch 6x6 \
     columns.txt 
```

## 步骤 1 的结果

这是的内容`columns.txt`：

```
 # ImageMagick pixel enumeration: 352,1,255,gray
 0,0: (  0,  0,  0)  \#000000  black                 <-- left outer image border 
 1,0: (253,253,253)  #FDFDFD  gray(253,253,253)
 2,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 3,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 [...]
 20,0: (255,255,255)  #FFFFFF  white
 21,0: (255,255,255)  #FFFFFF  white
 [...]
 46,0: (255,255,255)  #FFFFFF  white
 47,0: (255,255,255)  #FFFFFF  white
 48,0: (243,243,243)  #F3F3F3  gray(243,243,243)
 49,0: (  0,  0,  0)  #000000  black                 <-- left box border (ex-red)
 50,0: (  0,  0,  0)  #000000  gray(0,0,0)           <-- left box border (ex-red)
 51,0: (  0,  0,  0)  #000000  black                 <-- left box border (ex-red)
 52,0: (  0,  0,  0)  #000000  black                 <-- left box border (ex-red)
 53,0: (221,221,221)  #DDDDDD  gray(221,221,221)
 54,0: (231,231,231)  #E7E7E7  gray(231,231,231)
 55,0: (236,236,236)  #ECECEC  gray(236,236,236)
 [...]
 247,0: (236,236,236)  #ECECEC  gray(236,236,236)
 248,0: (216,216,216)  #D8D8D8  gray(216,216,216)
 249,0: (  0,  0,  0)  #000000  black                <-- right box border (ex-red)
 250,0: (  1,  1,  1)  #010101  gray(1,1,1)          <-- right box border (ex-red)
 251,0: (  0,  0,  0)  #000000  black                <-- right box border (ex-red)
 252,0: (  1,  1,  1)  #010101  gray(1,1,1)          <-- right box border (ex-red)
 253,0: (226,226,226)  #E2E2E2  gray(226,226,226)
 254,0: (244,244,244)  #F4F4F4  gray(244,244,244)
 255,0: (244,244,244)  #F4F4F4  gray(244,244,244)
 [...]
 303,0: (255,255,255)  #FFFFFF  white
 304,0: (255,255,255)  #FFFFFF  white
 305,0: (255,255,255)  #FFFFFF  white
 [...]
 342,0: (255,255,255)  #FFFFFF  white
 343,0: (255,255,255)  #FFFFFF  white
 344,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 345,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 346,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 347,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 348,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 349,0: (255,255,255)  #FFFFFF  gray(255,255,255)
 350,0: (253,253,253)  #FDFDFD  gray(253,253,253)
 351,0: (  0,  0,  0)  #000000  black                <-- right outer image border 
```

（**注意**`#FFFFFF`：ImageMagick有时调用颜色值似乎有点令人困惑`white`，有时`gray(255,255,255)`- 以及调用颜色值`#000000`somtimes `black`， somtimes `gray(0,0,0)`......也许是一个错误？无论如何，这里不会阻止我们......）

## 步骤 2 的命令

```
convert                   \
    -type grayscale       \
    -depth 8              \
     box.jpg              \
    -scale 1x\!           \
    -contrast-stretch 6x6 \
     rows.txt 
```

## 步骤 2 的结果

这是`rows.txt`（这次我删除了令人困惑的颜色名称）的内容：

```
 # ImageMagick pixel enumeration: 1,232,255,gray 
 0,0: (  0,  0,  0)  #000000                 <-- top outer image border
 0,1: (255,255,255)  #FFFFFF  
 0,2: (255,255,255)  #FFFFFF  
 0,3: (255,255,255)  #FFFFFF       
 0,4: (255,255,255)  #FFFFFF       
 0,5: (255,255,255)  #FFFFFF       
 0,6: (255,255,255)  #FFFFFF       
 0,7: (255,255,255)  #FFFFFF       
 0,8: (255,255,255)  #FFFFFF       
 0,9: (255,255,255)  #FFFFFF       
 0,10: (255,255,255)  #FFFFFF       
 [...]
 0,46: (255,255,255)  #FFFFFF       
 0,47: (255,255,255)  #FFFFFF       
 0,48: (240,240,240)  #F0F0F0       
 0,49: (  0,  0,  0)  #000000                <-- top box border (ex-red)
 0,50: (  0,  0,  0)  #000000                <-- top box border (ex-red)
 0,51: (  0,  0,  0)  #000000                <-- top box border (ex-red)
 0,52: (  0,  0,  0)  #000000                <-- top box border (ex-red)
 0,53: (225,225,225)  #E1E1E1       
 0,54: (234,234,234)  #EAEAEA       
 [...]
 0,207: (244,244,244)  #F4F4F4       
 0,208: (230,230,230)  #E6E6E6       
 0,209: (  0,  0,  0)  #000000               <-- bottom box border (ex-red) 
 0,210: (  0,  0,  0)  #000000               <-- bottom box border (ex-red)
 0,211: (  0,  0,  0)  #000000               <-- bottom box border (ex-red)
 0,212: (  0,  0,  0)  #000000               <-- bottom box border (ex-red)
 0,213: (234,234,234)  #EAEAEA       
 0,214: (245,245,245)  #F5F5F5       
 [...]
 0,229: (255,255,255)  #FFFFFF       
 0,230: (255,255,255)  #FFFFFF       
 0,231: (  0,  0,  0)  #000000               <-- bottom outer image border 
```

从这两个结果我们可以可靠地得出结论：

1.  左侧垂直红色框边界线位于像素列 49-52 处。
2.  右侧垂直红色框边框线位于像素列 249-252 处。
3.  顶部水平红色框边界线位于像素行 49-52。
4.  底部水平红框边界线位于像素行 209-222。
5.  从 1\. 和 2\. 您可以计算红色框的“内宽”为 197（249 减去 52）。让我们使用 196 作为提取的子图像的宽度。
6.  从 3\. 和 4\. 您可以计算出红色框的“内部高度”为 157（209 减去 52）。让我们使用 156 作为提取的子图像的高度。
7.  裁剪的水平偏移量需要为 52 像素。我们选择 53。
8.  裁剪的垂直偏移量需要为 52 像素。我们选择 53。

因此，我们从原始图像中剪切子图像的命令可能是：

```
convert  -crop 196x156+53+53  box3.jpg  sub-box.jpg 
```

或者，为了使图像尺寸更好地与该网页的白色背景区分开来：

```
convert  -crop 196x156+53+53  box3.jpg  -colorize 20,0,20  sub-box.jpg 
```

**结果图像：**
![在此处输入图像描述](../Images/8a365b15113f1b58629e3e23018792ec.png)

您现在可以在图像上应用 OCR：

```
tesseract sub-box.jpg OCR-subbox 1>/dev/null && cat OCR-subbox.txt

  Dave 
```

# android - Android 底部导航栏重叠 Spinner。设置 Spinner 下拉高度/边距

> ID：10074867
> 
> 赞同：4
> 
> 时间：2012-04-09T14:39:39.827
> 
> 标签：android, android-layout, android-spinner

我在处理 Android Honeycomb 项目时偶然发现了一个有趣的问题。如下图所示，在对话框中展开 Spinner 时，底部的导航栏与其重叠。因此，无法选择底部的元素。

为了解决这个问题，我尝试`android:fitsSystemWindows="true"`在 Spinner 小部件中使用。它不起作用。我还注意到我们有一个用于下拉宽度的 XML 属性`android:dropDownWidth`，但没有用于高度的 XML 属性。

![导航栏重叠微调器](../Images/9c7a989a6ccf97a478a737bc95440bd8.png)

这是 3 个 Spinner 的 XML 布局：

```
 <TableRow>

        <Spinner
            android:id="@+id/order_dialog_category_code_Spinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:fitsSystemWindows="true" />

        <Spinner
            android:id="@+id/order_dialog_packing_code_Spinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:fitsSystemWindows="true" />

        <Spinner
            android:id="@+id/order_dialog_product_Spinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:fitsSystemWindows="true" />
    </TableRow> 
```

我将继续测试并希望尽快找到解决方案，但这是一个有趣的问题，值得发布。

我还没有在 Android ICS 中进行测试，但我认为它的行为可能相同。

**编辑**

我通过使用`android:layout_marginBottom`Spinners 的属性进行了一些修复。它确实解决了这个问题，但现在我在对话框视图中也有边距，我不希望这样。

![微调器重叠临时修复](../Images/e1966fba307ea40d5aa9f4faebfd6f94.png)

有谁知道如何仅为下拉资源设置边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:52:48.870

经过更多研究后，您似乎无法操纵 Spinner 下拉列表的高度或任何其他布局属性。

这是因为下拉菜单实际上是一个无法从 Spinner View 访问的弹出对话框。

这个答案说得很清楚：[https ://stackoverflow.com/a/1918655/529138](https://stackoverflow.com/a/1918655/529138)

所以它接缝我必须`android:layout_marginBottom`按照问题中的规定使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T14:19:58.287

即使我面临同样的问题。与您的屏幕不同，我的屏幕只有一个选项。所以我做了一个修复，改变了 android:spinnerMode:"dialog"。

```
<Spinner
        android:id="@+id/dialog_spinner"
        android:spinnerMode="dialog"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
       > 
```

这将在新对话框中显示您的列表。以防万一可能对搜索类似问题的人有所帮助。

# javascript - 如何将 ActiveX 转换为 Jquery/AJAX

> ID：10074868
> 
> 赞同：0
> 
> 时间：2012-04-09T14:39:47.683
> 
> 标签：javascript, jquery, ajax

我有一个正在处理的项目，我需要转换一些为 ActiveX 编写的 .js 文件。我对 ActiveX 不是很熟悉，所以请多多包涵。

文件中写着

```
this.m_DOM = new XMLHttpRequest();
this.m_DOM = new ActiveXObject("Microsoft.XMLDOM");
this.m_DOM.async = false; 
```

有人可以帮我将其转换为 JQuery/AJAX 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:02:02.870

jQuery[`$.ajax`](http://api.jquery.com/jQuery.ajax/)正是您所需要的。只需将您需要的选项添加到对象，就是这样。这是一个例子：

```
$.ajax({
    url: 'http://example.com',
    type: 'GET', // or POST
    data: {id: 3}, // any data you want to send to the server (optional)
    async: false, // note: this will lock up your browser
                  // only use it if you *really* need to
    success: function(data){
        console.log(data);
    }
}); 
```

# c++ - rand() %4000000000UL 只给出小值

> ID：10074879
> 
> 赞同：6
> 
> 时间：2012-04-09T14:40:51.310
> 
> 标签：c++, random, srand

我对以下代码有疑问：

```
#include <iostream>
#include <ctime>

int main(){
    unsigned long int blob;   
    srand(time(0)); 

    for(int counter = 0; counter <= 100; counter++) {
        blob = rand() % 4000000000UL ;
        std::cout << blob << std::endl;
    }//for
    system("pause");
    return 0;
} //main 
```

在 codepad.org 上，它输出较大的值，例如

```
378332591
1798482639
294846778
1727237195
62560192
1257661042 
```

但在 Windows 7 64 位上，它只输出小值（在 VS11 和 Code::Blocks 上测试编译）

```
10989
13493
13169
18581
17972
29 
```

在此先感谢您帮助 C++ 学习者 ;)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:44:24.830

rand() 只生成不超过其 RAND_MAX 的数字。

根据[MSDN](http://msdn.microsoft.com/en-us/library/398ax69y%28v=vs.80%29.aspx)，在 Windows 上 RAND_MAX 仅为 32767，或 (2**15 - 1)（请注意，这是根据 C 标准允许的最小 RAND_MAX（此处[链接到](http://pubs.opengroup.org/onlinepubs/009695399/functions/rand.html)基于 C 标准的开放组基本规范）） .

如果您想要更大的数字，则需要多次调用它并进行位移，例如：

```
long long int my_big_random = rand() ^ (rand() << 15) ^ ((long long int) rand() << 30); 
```

（[键盘上的示例](http://codepad.org/w0YVwxK9)）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T14:44:25.090

您遇到的行为是由于`RAND_MAX`您正在测试的两个系统上的值。

在[windows 7 系统](http://msdn.microsoft.com/en-us/library/398ax69y%28v=vs.80%29.aspx)上，`RAND_MAX`是 32767，这个值明显小于任何环境键盘运行您的代码。因此，随机生成的值的范围要小得多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T14:44:53.963

Windows 使用最大值为 32767 的随机数生成器。请参阅 RAND_MAX 的值。

您可以通过粘贴两个 rand() 调用的输出来创建更大的随机数。

```
big_rand = rand() << 15 | rand(); 
```

您还可以切换到不同的随机数生成器，例如[Boost.Random](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_random.html)或[C++11](https://stackoverflow.com/questions/7114043/random-number-generation-in-c11-how-to-generate-how-they-work)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T14:45:20.423

rand 的结果取决于实现并保证仅高达 32767：

[http://en.cppreference.com/w/cpp/numeric/random/RAND_MAX](http://en.cppreference.com/w/cpp/numeric/random/RAND_MAX)

因此，当您在具有不同库实现的不同系统上运行代码时，您可以获得不同的结果 - Windows 仅返回最多 32767 的数字，因此您从代码中获得的数字很小。

# eclipse - Eclipse PHP 编辑器突然坏了

> ID：10074882
> 
> 赞同：0
> 
> 时间：2012-04-09T14:40:59.270
> 
> 标签：eclipse

我正在使用Eclipse，重启后，我突然无法打开PHP文件。当我尝试时，我得到一个弹出错误框说：

```
打开编辑器时出错。（错误时间：[现在]）
原因：
id org.eclipse.php.editor 没有编辑器描述符
```

关于发生了什么以及如何解决它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:48:53.710

您使用的是最新的 Eclipse 吗？这似乎是几年前的一个错误，与您的一个 PHP 文件中的特定代码有关。

检查这个：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=326247](https://bugs.eclipse.org/bugs/show_bug.cgi?id=326247)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:24:14.150

我会尝试删除工作区目录中隐藏的 .metadata 文件夹。重命名它并尝试再次打开eclipse。它应该创建一个新的。如果仍然不起作用，请还原更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:00:22.350

*掌心*

当您更新到最新版本的 Eclipse 时，不要继续使用旧版本的链接。这会导致问题。

# java - 在访问文件的 .jar 上使用 Apple 的 Jar Bundler

> ID：10074884
> 
> 赞同：1
> 
> 时间：2012-04-09T14:41:14.457
> 
> 标签：java, file, jar, io

我有一个大型项目，其中包含一个从文件中读取的类（我在下面附上了一个 SSCCE）。一切正常。但是，当我使用 Apple Jar Bundler 或 Eclipse 的“导出到 Mac OS X 应用程序命令”（按照[这些说明](https://stackoverflow.com/a/1455779/732016)）时，它不起作用，我得到一个`java.io.FileNotFoundException`.

我试图找出我为什么会得到这个`FileNotFoundException`以及如何防止它。我的猜测是 Eclipse 正在使用它自己的类加载器或其他东西，并且说类加载器没有在导出中正确调用，`jar`因此`app`.

SSCCE：以下代码在从 Eclipse 运行时有效，但不能从`.app`,`java -jar`甚至从目录`java readfromfile.ReadFromFile`执行`bin`。

在*ReadFromFile.java*中：

```
package readfromfile;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class ReadFromFile {
    public static void main(String[] args) {
        String filepath = "src/readfromfile/file.txt";
        try {
            BufferedReader br = new BufferedReader(new FileReader(filepath));
            JFrame frame = new JFrame();
            frame.getContentPane().setLayout(
                    new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));
            for (String line; (line = br.readLine()) != null;) {
                frame.getContentPane().add(new JLabel(line));
            }
            frame.pack();
            frame.setVisible(true);
        } catch (FileNotFoundException e) {
            System.err.println("File not found");
            e.printStackTrace();
        } catch (IOException e) {
            System.err.println("IOexception");
            e.printStackTrace();
        }
    }
} 
```

在*file.txt*中：

```
I am text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T14:43:19.050

当您创建 Jar Bundle 时，`src/...`路径可能不存在。

为什么不将文件作为包资源并阅读它：

```
Reader r = new InputStreamReader(ReadFromFile.class.getResourceAsStream("file.txt"));
BufferedReader br = new BufferedReader(r); 
```

自然，您必须将文件“file.txt”放在您班级的同一个包中。

# android - 没有aidl的Android远程服务？

> ID：10074889
> 
> 赞同：3
> 
> 时间：2012-04-09T14:41:28.577
> 
> 标签：android

是否可以在没有aidl 的情况下在 Android 中编写远程服务？如果是的话 - 那么使用aidl会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:48:41.527

不。如果你想编写一个远程服务，你将——在某种程度上——使用与 AIDL 非常相似的代码。虽然 AIDL 用于生成存根和打包数据，但您也可以使用 Messenger 和 Handler 对：但这只是在 AIDL 之上实现的，因此无论如何您都在使用它。对于简单的交换，Messenger 和 Handler 对有效，但对于更复杂的情况，使用 AIDL 是合适的。如果你的问题是是否有比 AIDL 更轻的通信机制（除了 Intents），答案是否定的。

# iphone - 查找下周五下午 5 点从一个时区到另一个时区

> ID：10074890
> 
> 赞同：0
> 
> 时间：2012-04-09T14:41:31.577
> 
> 标签：iphone, nsdate, nsdatecomponents, nstimezone

我有`NSDate`一个 NZDT 时区，我需要在 EST 时区找到下周五。我已经搜索并习惯于`NSDateComponents`生成日期，但时区的变化让我很困惑。

如果我将 3 天加上`setWeekday`现在是星期二，那么它是星期四 EST，星期五是 NZDT。当美国东部标准时间星期二到达 00:00:00 时，时间是正确的。在美国东部标准时间 00:00:00 之前，该时间是休息日。

我想知道我是否遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:36:50.593

正如您所怀疑的，使用 GMT 可以简化事情。

但是您的问题不清楚您要查找的“下周五”是谁。如果下周五是NZDT，那么流程是：

*   从你的约会开始
*   提前到下周五。
*   将结果转换为 EST。

如果是 EST 下周五，那么：

*   从你的约会开始。
*   转换为 EST。
*   提前到下周五。
*   （如果需要，转换回 NZDT。）

如果您要问其他问题，我深表歉意。也许一些例子会有所帮助。另一件有帮助的事情是，如果您可以发布不工作的代码（以及一些逐步执行的值）并指出您期望不同结果的位置。

# ruby - ruby fastercsv，在文件中的每个单元格之前和附加相同的文本

> ID：10074896
> 
> 赞同：0
> 
> 时间：2012-04-09T14:41:50.377
> 
> 标签：ruby, fastercsv

我已经阅读了文档，但仍然看不到如何定位单个单元格并将字符串预先或附加到单元格内容。文件相当大，如果重要的话（90MB）。

CSV：

```
2.22,3.33,4.44,5.55
6.66,7.77,8.88,9.99 
```

我需要这个输出：

```
%text2.22%,%text3.33%,%text4.44%,%text5.55%
%text6.66%,%text7.77%,%text8.88%,%text9.99% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:47:54.133

你一定*要*使用`fastercsv`吗？如果您的输入真的像您展示的那样简单，那么以下内容就足够了：

```
pre_text = '%text'
post_text = '%'
File.open('outfile.csv', 'w') {|of|
    File.readlines('input_file.csv').each {|line|
        of.puts line.strip.split(',').map{|x| pre_text + x + post_text}.join(',')
    }
} 
```

# php - CakePHP Elements 不更新表格

> ID：10074897
> 
> 赞同：0
> 
> 时间：2012-04-09T14:41:53.470
> 
> 标签：php, mysql, cakephp-2.0, model-associations, cakephp-2.1

嗨，我正在尝试在视频流媒体网站上为大学项目制作帖子部分。我有一个帖子控制器和模型。我以为我会为帖子输入框创建一个元素，以便我可以在 localhost/evolvids/uploads/watch/ 部分中回显它，但是当我提交帖子时，我会抛出一个 MISSING CONTROLLER 错误。

这是我的帖子元素代码

```
<div class="postsform">

<table>
<tr>
<td>
<?php echo $this->Form->create('Posts', array('action'=>'add'));
    echo $this->Form->input('comment', array('between'=>'<br/>', 'cols'=>'60'));
    echo $this->Form->input('video.id', array('id'=>'video_id','value' => $uploads['Upload']['id']));
    echo $this->Form->input('user.id', array('id'=>'userid','value' => $auth['username']));
    echo $this->Form->end(__('Submit', true));?>
</td>
</tr>
</table>

</div> 
```

这是我的帖子控制器脚本

```
<?php
class PostsController extends AppController {

var $name = 'Posts';
function index(){
$this->Post->recursive = 0;
$this->set('posts', $this->paginate());
}

function add(){
if (!empty($this->data)){
$this->Post->create();
if($this->Post->save($this->data)){
$this->Session->setFlash(__('Post saved', true));
} else{
$this->Session->setFlash(__('Post could not be saved. Please try again', true));
}
}
}

function view($id = null){
}
}
?> 
```

帖子模型

```
 <?php

   class Post extends AppModel{

public $name = 'Post';

 public $belongsTo = array(
    'User' => array(
    'className' => 'User',
    'foreignKey' => 'id'
    ),
    'Uploads' => array(
        'className'    => 'Uploads',
        'foreignKey'    => 'upload_id'
    )

   );  
   }
  ?> 
```

上传控制器

```
<?php
class UploadsController extends AppController {

    var $name = 'Uploads';

 public $components = array(
    'Session',
    'Auth'=>array(
        'loginRedirect'=>array('controller'=>'uploads', 'action'=>'add'),
        'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
        'authError'=>"Members Area Only, Please Login…",
        'authorize'=>array('Controller')
       )
      );

     public function isAuthorized($user) {
     // regular user can access the file uploads area
      if (isset($user['role']) && $user['role'] === 'regular') {
      return true;
       }

  // Default deny
      return false;
    }

function browse ($id = null) {
        $this->Upload->id = $id;      

    $this->set('uploads', $this->Upload->find('all'));

    }

function watch ($id = null){

    $this->Upload->id = $id;      
  $this->set('uploads', $this->Upload->read());
   }

function add() {

    if (!empty($this->data)) {
        $this->Upload->create();
        if ($this->uploadFile() && $this->Upload->save($this->data)) {
            $this->Session->setFlash(__('<p class="uploadflash">The upload has been saved</p>', true));
            $this->redirect(array('action' => 'add'));
        } else {
            $this->Session->setFlash(__('<p class="uploadflash">The upload could not be saved. Please, try again.</p>', true));

        }
    }
        }

function uploadFile() {
    $file = $this->request->data['Upload']['file'];
    if ($file['error'] === UPLOAD_ERR_OK) {
        $this->Upload->save($this->data); // data must be saved first before renaming to ID $this->(ModelName)->id 
        if (move_uploaded_file($file['tmp_name'], APP.'webroot/files/uploads'.DS.$this->Upload->id.'.mp4')) {
            return true;
        }
    }
    return false;
}

} 
```

?> 上传模型

```
<?php

 class Upload extends AppModel {

public $name = 'Upload';

public $hasandBelongstoMany = array(
    'User' => array(
    'className' => 'User',
    'unique' => 'true'),
    'Posts' => array(
        'className'     => 'Posts',
        'foreignKey'    => 'id',
        'associationForeignKey'  => 'upload_id',
        'associationForeignKey'  => 'username',
        'unique' => 'true')

    );  

  }
 ?> 
```

在上传视图中，我将元素调用如下

```
<?php echo $this->element('Posts/add'); ?> 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:48:24.483

中的模型声明`$this->Form->create()`不应该是复数：

`<?php echo $this->Form->create('Post', array('action'=>'add')); ?>`

它不能解决丢失的控制器错误，请使用错误消息的内容更新您的原始问题（例如，缺少哪个控制器）。

# mongodb - 一个无模式的数据库/不像 mongodb 但支持酸性事务

> ID：10074902
> 
> 赞同：0
> 
> 时间：2012-04-09T14:42:12.983
> 
> 标签：mongodb, transactions, rdbms

是否有像 mongodb 这样的无数据库模式/更少但只有在需要时才能在 Web 应用程序的一小部分中使用的酸性事务支持？

所以，我正在构建一个 Web 应用程序，70% 它不需要事务，但 30% 是的。我的问题是，当我可以查询这 30% 时，它还需要来自 nosql 数据库的数据。我知道mongodb和其他nosql数据库为了高性能牺牲了酸性事务，但是我选择了mongodb，因为它是简单的将文档和数组嵌套到集合中并查询它，然后我可以很好地扩展。但是对于那 30% 效果不好，因为我需要事务支持。

那么，如果我的 Web 应用程序在用户的访问读写操作方面增长，是否有一个面向酸性事务支持的 dbms 文档可以很好地扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:45:23.620

nosql 数据库通常不兼容酸，但据说 OrientDB 是（有人在这里问过这个问题：[Is there any NoSQL that is ACID compliant?](https://stackoverflow.com/questions/2608103/is-there-any-nosql-that-is-acid-compliant)）

...以及来自 CraigTB 的引用 nosql wiki ( [http://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL) ) 的回答：

> NoSQL 是一项促进松散定义的非关系数据存储类的运动，它打破了关系数据库和 ACID 保证的悠久历史。

并且：

> 该名称试图描述越来越多的非关系分布式数据存储的出现，这些存储通常不尝试提供 ACID 保证。

和

> NoSQL 系统通常提供弱一致性保证，例如最终一致性和仅限于单个数据项的事务，即使可以通过添加补充中间件层来强制执行完整的 ACID 保证。

另外，不要觉得你必须强迫你的整个应用程序成为 nosql，facebook 一次使用了一大堆不同的数据库类型。例如，他们将 sql 用于他们的时间线功能，并将 nosql 用于许多其他功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:48:10.830

您可以支持针对 nosql 数据库的多文档事务的唯一方法是在您的应用程序中管理事务。这不是一项无关紧要的任务，尤其是对于分布式数据库。像 Mongo 这样的基于文档的数据库的好处在于，它可以通过在文档中分组数据（例如，客户文档中的订单中的行项目）来帮助减轻您对事务的需求，因为它主要是用于单个文档操作的 ACID。

如果您想管理部分数据的事务，请查看 Gigaspaces。它可能成本高昂，实施起来也不是最简单的，但它可能适合您的需求。它完全支持内存中数据的 XA 事务，然后异步写入您的数据存储。基本上，您对 Gigaspaces XAP 产品针对您想要事务完整性的表以及您直接访问数据库的所有其他内容进行操作。他们甚至有一篇关于将它与 Cassandra 一起使用的文章，可以很容易地应用于 Mongo - [http://blog.gigaspaces.com/cassandra-on-acid/](http://blog.gigaspaces.com/cassandra-on-acid/)。不是理想的解决方案，但它确实为您提供了非事务性数据库的事务性选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T10:10:01.687

我只是简单地回答这个问题。

正如其他人所说的那样，MongoDB 并不完全符合 ACID，实际上有时与大多数 NoSQL DB 一样会破坏 ACID 合规性，无论从他们嘴里冒出多少营销，NoSQL 的本质确实会破坏 ACID。

写入内存的任何事务都不符合 ACID，因为内存是临时存储，因此您不能保证它已写入磁盘并在您的网络中复制，这会立即破坏 ACID 以进行持久写入。我不确定 Gigaspaces 是如何做到这一点的，但这听起来像是我个人不会看的东西。

为了成为 ACID，您必须先写入磁盘（也许也写入网络中的两个节点？）然后数据库必须写回临时存储，而不是相反。

现在 Mongo 确实提供了写入磁盘甚至多个节点的安全性。在 PHP 中，它提供了`safe`and选项，您可以使用该选项来指示在函数 ( , , ) 返回 true 或 false`fsync`之前它应该写入多少个节点。所以你可以在你的应用程序中得到写关注。您还可以将您的实际副本和分片设置为完全一致，本质上它们不是，但您可以。不仅如此，MongoDB 还有日记功能。实际上，即使写入内存写入也“不持久”100 毫秒（严重的是，您将在 100 毫秒内丢失多少数据？我敢打赌，您的应用程序的持久性不如实际情况）。`insert``save``update`

当进行事务和两阶段提交时，困难的部分就来了。大多数人通过使用要插入的文档的哈希值和/或版本号来找到克服这些问题的方法。我刚刚在 Google 上快速搜索了一个我知道支持 ACID 事务和两阶段提交的 Java 框架，但我在找到它时遇到了问题。如果您在用户组中搜索一些用户组，并且用户组中有完整的解释（我知道这一点，因为我参与了一些）关于如何根据哈希和版本号在 MongoDB 中实现回滚。然而，我应该警告你，就像在 SQL 中一样，事务非常缓慢，并且有点违背 MongoDB 的基本原理。

所以现在你知道了如何开始依赖 Mongo，甚至在你的应用程序中拥有一个缓慢的事务处理程序，以应对那些需要对许多相互依赖的文档进行持久写入的小时候。

> 那么，如果我的 Web 应用程序在用户的访问读写操作方面增长，是否有一个面向酸性事务支持的 dbms 文档可以很好地扩展？

这取决于您对扩展的关注程度，我认为这里没有人可以对此给出认真的答案。

至于其他 DB 的 Fbs 使用情况。有一次，我在写完一个小时后在墙上丢失了大约 5 个墙贴。我就此事联系了 Fb，并要求他们提供一个令人讨厌的解释。他们说，即使墙上的帖子写入临时存储，它也无法同步到永久存储。所以所有这些谈话 Fb 完全符合 ACID 只是谈话，正如 Kristian 所说，他们使用包括 NoSQL 在内的许多数据库。

希望这会有帮助，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T19:00:10.377

阿兰戈数据库。

声称拥有交叉集合 ACID 事务、JOINS、文档存储、图形存储。但是交易应该“一件”发送。

因此，您不能在事务期间使用隔离来处理业务逻辑，并且仍然需要手动获取锁定机制。获得 redis 或 zookeeper 进行悲观锁定应该不是问题。

# excel - 如何自动将 Excel 列表重新格式化为矩阵形式？

> ID：10074903
> 
> 赞同：1
> 
> 时间：2012-04-09T14:42:17.267
> 
> 标签：excel, excel-2007, excel-formula

我有以下 Excel 工作表：

```
 | A  B     C     
 -+---------------
 1|id  date  views
 2| 1  12-3  211
 3| 1  13-3  198
 4| 1  14-3  230
 5| 2  12-3   19
 6| 2  13-3   24
 7| 2  14-3   18
 8| 3  12-3   77
 9| 3  13-3   76
10| 3  14-3   98 
```

该表给出了每个网站每个日期的页面浏览量（由整数标识）。但是，这很难阅读，因此我想将工作表转换为另一种格式：

```
 | A    B    C   D  
 -+------------------
 1|date  1    2   3
 2|12-3  211  19  77
 3|13-3  198  24  76
 4|14-3  230  18  98 
```

每个网站的日期数始终相同（本例中为 3 个）。没有缺失值。我的问题：我怎样才能自动化这个（我现在复制粘贴我的屁股，但它变得越来越令人沮丧）。我盯着这样一张空纸：

```
 | A    B    C   D  
 -+------------------
 1|date  1    2   3
 2|12-3  
 3|13-3  
 4|14-3 
```

我应该在单元格中输入什么公式以便自动填充它们？请记住：实际上没有 3 个而是数百个日期和数百个网站，所以我无法在每个单元格中输入不同的公式 :-) 我从下面的内容开始，但如果我“拉下单元格”我在 F 列的所有单元格中获得相同的 C2 值 (211)。

```
 | E    F    G    H  
 -+-------------------
 1|date  1    2    3
 2|12-3  =C2  =C5  =C8
 3|13-3
 4|14-3 
```

所以问题是在单元格 F2（可能还有 G2 和 H2）中放入什么公式，以便我可以“将它们拉入其他单元格”并且矩阵用 C 列中的信息填充自己？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:58:16.490

将数据透视表应用于该数据。将 ID 设置为列源，将 Dates 设置为 Row Source，将 VIEWS 设置为 DATA 源。

1.  突出显示数据
2.  单击**插入>数据透视表**
3.  选定的范围将立即输入。单击**[x] 新建工作表** ![在此处输入图像描述](../Images/24692541d2d62c5321ee75c2387235b0.png)
4.  单击**确定**，将出现新工作表。同样在屏幕上，您会在某处看到*PivotFieldList*，看起来像这样： ![在此处输入图像描述](../Images/c03dbdfe44be1f154ba9cb0f04d60ade.png)

5.  最后，将上面的字段拖放到下面的部分中，以获得您想要的表格布局。执行此操作时，表格将在工作表上自行构建。 ![在此处输入图像描述](../Images/37be468d121cec16d96f1106196cf9d3.png)

# c# - 为什么我不能在初始化中使用 Selenium WebDriver for C# 和 PageFactory 执行鼠标移动

> ID：10074904
> 
> 赞同：1
> 
> 时间：2012-04-09T14:42:21.807
> 
> 标签：c#, selenium, webdriver

我在 HTML 中有一个链接，我使用页面对象模式用 Selenium 编写脚本。但是当使用 pageFactory 初始化对象时，我无法执行 MouseMove 操作。所以，我有这样的课：

```
class BingPage
{
private readonly IWebDriver driver;
public static readonly String BASE_URL = "http://bing.com/";
[FindsBy(How = How.XPath, Using = ".//*[@id='scpt2']/a[text()='Shopping']")]
private IWebElement ShoopingLink;

public BingPage(IWebDriver driver)
{
    this.driver = driver;
    //Page Factory will use Driver to init searchButton and queryEdit objects
    PageFactory.InitElements(driver, this);
}

public void HoverShoppingLink()
{
    Actions builder = new Actions(driver);

    IWebElement elem = driver.FindElement(By.XPath(".//*[@id='scpt2']/a[text()='Shopping']"));
    builder.MoveToElement(elem).Build().Perform();//This will work

    builder.MoveToElement(ShoopingLink).Build().Perform(); //This will fail
}
} 
```

标有注释“这将失败”的行将引发异常“必须为移动操作提供位置。参数名称：actionTarget”

但是当我手动查找元素时 - 它可以工作。有人能告诉我为什么吗？

它是 .Net 的 selenium 2.0，带有 IE 驱动程序的 .Net 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T00:38:37.863

因为为元素创建的代理对象 ( `ProxiedWebElementInterceptor`) 不代理`ILocatable`，这是`Actions`类对其方法的要求。这是 .NET 绑定中的一个错误。它已在当前资源中得到修复，并将在即将推出的下一个公开版本 (2.21) 中提供。

# entity-framework - EF Code First 不会在数据导入后仅在属性上延迟加载

> ID：10074907
> 
> 赞同：0
> 
> 时间：2012-04-09T14:42:31.910
> 
> 标签：entity-framework, ef-code-first, code-first

我目前正在使用带有 SQL 2008 R2 的 EF 版本 4.3.1

当我使用应用程序生成的数据运行应用程序时，一切正常，但是一旦我导入数据，那么只有一个属性不想延迟加载。

这是我正在使用的 Order 类：

```
[DisplayName("Orders")]
public class Order
{
    [Key]
    [DisplayName("Order Number")]
    public virtual string OrderNumber { get; set; }

    [StringLength(30, ErrorMessage = "Order name cannot be more than 30 characters.")]
    public string Name { get; set; }

    [DisplayName("Order Status")]
    public virtual OrderStatus OrderStatus { get; set; }

    [Timestamp]
    public Byte[] TimeStamp { get; set; }

    [DisplayName("Customer")]
    [Required()]
    public virtual Customer Customer { get; set; }

    [DisplayName("Order Lines")]
    public virtual ICollection<OrderLine> OrderLines { get; set; }
} 
```

遍历所有订单时：

```
foreach (var order in orders)
        {
            returnValue.Add(new FriendlyOrder()
            {
                Customer = order.Customer.Name,
                Name = order.Name,
                OrderNumber = order.OrderNumber,
                OrderStatus = order.OrderStatus.Status
            });
        } 
```

订单状态将延迟加载，但不是客户，客户将为空。当我手动运行 SQL 查询时，关系就在那里，所以它与坏数据无关。

这是客户实体：

```
[DisplayName("Customers")]
public class Customer
{
    [Key]
    [DisplayName("Customer Code")]
    public string CustomerCode { get; set; }

    public virtual ICollection<Order> Orders { get; set; }

    public bool Active { get; set; }

    [Timestamp]
    public Byte[] TimeStamp { get; set; }

} 
```

以下是订单查询：

```
return (from tbl in db.Orders orderby tbl.OrderNumber select tbl).ToList(); 
```

如果我手动将 .Include("Customer") 包含到上述查询中，那么它将加载 Customer 属性，但如果我将两个属性都设置为虚拟，我不需要这样做吗？此外，它适用于应用程序生成的数据，但导入的数据不起作用，除非我将 .Include 添加到查询中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:16:05.690

为惰性字段编写**virtual**允许 EF 从您编写的类派生并使用惰性功能重载该字段。因此，延迟加载只能在 EF 内部类型的对象上工作，实际上您大部分时间都在使用它，并且除了让 EF 创建它之外，没有明显的方法来获取该类型的对象。

至于我，似乎获得你想要的结果的唯一方法是：

1.  将导出的对象添加到适当的数据集
2.  提交更改
3.  从跟踪中删除对象
4.  查询对象，因此它将由 EF 从头开始​​生成。

# wpf - 将单个 ResourceDictionary 用于多个主题 WPF

> ID：10074909
> 
> 赞同：1
> 
> 时间：2012-04-09T14:42:37.010
> 
> 标签：wpf, xaml, resourcedictionary

我有一个包含很多主题的控件，每个主题都由一个 ResourceDictionary 表示。问题是字典几乎相同，它们仅在我声明颜色画笔的开头有所不同，例如：

```
<SolidColorBrush x:Key="FirstRd1" Color="#3F555555" />
<SolidColorBrush x:Key="SecondRd1" Color="#00000000" />
<SolidColorBrush x:Key="ThirdRd1" Color="#FF333333" />
<SolidColorBrush x:Key="FourthRd1" Color="#FF000000" /> 
```

这些画笔（以及其他用于样式的 xaml 对象）在同一个地方到处使用，如下所示：

```
 <!-- ResourceDictionary 1 -->
 <Border CornerRadius="4"
         Margin="0, 0, 0, 0" 
         BorderThickness="1"
         BorderBrush="{StaticResource FirstRd1}">
         <!-- Some content -->
 </Border>

 <!-- ResourceDictionary 2 -->
 <Border CornerRadius="4"
         Margin="0, 0, 0, 0" 
         BorderThickness="1"
         BorderBrush="{StaticResource FirstRd2}">
         <!-- Some content -->
 </Border> 
```

如何在单个文件中使用不同的画笔移动相同的元素？还有其他元素不依赖于画笔，但它们是嵌套的或具有嵌套的依赖控件。在这种情况下，最好的解决方案是什么，因为我不想为单个虚拟更改编辑 15 个以上的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:10:59.303

您可以合并资源字典。在一个文件中声明您的共同内容，然后为不同的部分制作每个自己的文件并将其与共同文件合并。

请参阅[http://msdn.microsoft.com/en-us/library/aa350178.aspx](http://msdn.microsoft.com/en-us/library/aa350178.aspx)

# css - ie7 css 规则适用于 ie 开发者工具，但不适用于代码。

> ID：10074915
> 
> 赞同：0
> 
> 时间：2012-04-09T14:43:05.200
> 
> 标签：css

div 在 ie7 中的绝对位置消失，但是当我使用 ie 开发人员工具并分配任何 css 规则时，例如 zoom:1; 它有效，当我实际将其放入代码中时，它根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:52:04.347

可能只是与 IE 的兼容性问题，请尝试以下操作

创建一个 CSS 页面来控制 DIV 标签的位置，给 DIV 标签一个 ID 和一个 CLASS

然后通过在您的 CSS 页面中执行以下操作来调用 ID

```
#ID
{
   //Put your styles here
} 
```

[http://www.w3schools.com/css/default.asp](http://www.w3schools.com/css/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:05:09.840

此问题已通过在绝对定位的 div 下方放置空标签来解决。

# c# - 控制具有相同事件类型的多个文本框

> ID：10074920
> 
> 赞同：0
> 
> 时间：2012-04-09T14:43:17.270
> 
> 标签：c#, wpf, events

我有一个 C# WPF 窗口，其中有 20 个文本框。他们没有做任何特别的事情，我想要的只是当我去选择要选择的文本时。

我知道设置 20 个事件是公平的，例如

```
private void customerTextBox_GotFocus(object sender, RoutedEventArgs e)
{
    customerTextBox.SelectAll();
} 
```

但我想知道是否有更平滑的东西

```
private void (genericTextBox)_GotFocus(object sender, RoutedEventArgs e)
{
    (genericTextBox).SelectAll();
} 
```

我可以只使用一次，每个文本框都可以理解用户该事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:49:49.273

您可以使用`sender`包含对引发事件的文本框的引用的参数：

```
private void GenericTextBox_GotFocus(object sender, RoutedEventArgs e)
{
    (sender as TextBox).SelectAll();
} 
```

然后，您可以为所有文本框设置此错误处理程序：

```
<TextBox x:Name="textBox1" GotFocus="GenericTextBox_GotFocus" />
<TextBox x:Name="textBox2" GotFocus="GenericTextBox_GotFocus" />
<TextBox x:Name="textBox3" GotFocus="GenericTextBox_GotFocus" />
<TextBox x:Name="textBox4" GotFocus="GenericTextBox_GotFocus" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:50:19.633

您可以使用“sender”参数为多个文本框编写一个处理程序。
例子：

```
private void textBox_GotFocus(object sender, RoutedEventArgs e)
{
    TextBox textBox = sender as TextBox;
    if (sender == null)
    {
       return;
    }
    textBox.SelectAll();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:59:46.357

you can use RegisterClassHandler method like this:

```
 EventManager.RegisterClassHandler(typeof(YourClass), TextBox.GotFocusEvent, new RoutedEventHandler((s, e) =>
        {(s as TextBox).SelectAll();}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T19:20:29.603

除了如上所述创建通用处理程序之外，您还可以在窗口的构造函数中添加一行代码，这样您就不必将 xaml 中的处理程序附加到每个文本框。

```
this.AddHandler(TextBox.GotFocusEvent, new RoutedEventHandler(TextBox_GotFocus)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:48:54.547

像在示例中那样创建事件处理程序，然后将所有文本框的 GotFocus 事件指向该处理程序。

# sql - 我需要在客户端 PC 上安装什么才能使我的 .mdf 数据库正常工作？

> ID：10074925
> 
> 赞同：2
> 
> 时间：2012-04-09T14:43:25.920
> 
> 标签：sql, mdf

我在 vs 2008 中开发了一个应用程序，C#。在项目中添加了数据库`add -> new item`。（使用 SQL Server 2005）

我从以下位置获取连接字符串`app.config`：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Baza.mdf;Integrated Security=True;User Instance=True" 
```

我在测试客户端机器上尝试并安装了 SQL Server 2005 Express，它运行良好。但是有更好的解决方案吗？或者这是在客户端电脑上安装我的应用程序的一种安全的好方法？

编辑：另外，我计划将来让我的应用程序在网络（本地）中使用，是否有关于如何管理它的指令/说明？（如何使我的数据库在网络中工作）..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:47:42.733

好吧，根据您的描述...如果您要在本地使用该应用程序，这就是要走的路。您需要在客户端计算机上使用 SQL Server。这是启动和运行应用程序的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:54:24.790

SQL 2005 Express 非常好，将它与您的应用程序一起分发也非常好，因为它是免费的，如果您使用 Visual Studio 中的单击一次部署，它将自动安装。SQL 2005 Express 的最大数据库大小为 4gb，但如果您需要更多，SQL 2008 及更高版本允许 10gb 的数据库大小。

# android - Android Webview中的字体大小调整功能

> ID：10074927
> 
> 赞同：2
> 
> 时间：2012-04-09T14:43:41.910
> 
> 标签：android

我一直在开发 Android RSS 新闻阅读器。我想在 Webview 中加载新闻时添加两个用于调整字体大小的按钮。谁能告诉我，如何创建一个更改 Webview 字体大小的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T14:51:01.147

A`WebView`有一个`WebSettings`与之关联的对象。您可以通过调用`getSettings`您的`WebView`. 该`WebSettings`对象有一个调用方法`setTextZoom(int)`，允许您设置文本大小。`int`参数是缩放百分比，默认为 100 。

所以，也许是这样的：

```
increaseFontButton.setOnClickListener( new OnClickListener() {
    public void onClick(View v) {
        WebSettings settings = myWebView.getSettings();
        settings.setTextZoom( (int)(settings.getTextZoom() * 1.1) );
    }
} 
```

和类似减少字体的东西。

编辑：我应该提到这一点，`setTextZoom`并`getTextZoom`在 API 14 中引入。如果您在该 API 之前定位，则应使用`settings.setTextSize(WebSettings.TextSize)`其中传入[WebSettings.TextSize](http://developer.android.com/reference/android/webkit/WebSettings.TextSize.html)枚举之一（SMALLEST、SMALLER、NORMAL、LARGER 或 LARGEST） .

# objective-c - 从 couchCocoa 中的 documentProperties 获取附件

> ID：10074933
> 
> 赞同：2
> 
> 时间：2012-04-09T14:44:06.770
> 
> 标签：objective-c, couchcocoa

我有一个从视图下载的文档属性，所以我有来自文档的实际 JSON，包括 ID 和 Rev ID。不过，我没有实际的 CouchDocument。

该文件有一个附件，我知道它的名称。我正在尝试将附件下载到 CouchAttachment 对象中，但我无法找到一种方法，而无需重新下载文档，这很慢。这就是我正在做的事情：

```
-(CouchAttachment *)getAttachmentFor:(NSObject *)doc named:(NSString *)fileName {

  if ([[doc valueForKey:@"_attachments"] valueForKey:fileName]==nil)
    return nil;

  CouchDocument * document = [[[App shared] database] documentWithID:[doc valueForKey:@"_id"]];
  CouchRevision * revision = [document revisionWithID:[doc valueForKey:@"_rev"]];
  return [revision attachmentNamed:fileName];
} 
```

有什么方法可以直接获取附件，而不必先获取文档和修订版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:26:23.117

CouchCocoa 框架似乎没有提供`CouchAttachment`直接创建对象的方法。但是，您可以通过 GET 操作直接获取附件，前提是您知道附件的 URL。

假设您在某个数据库中有一些文档，其附件名为 someAttachment.txt。该附件的 URL 格式为：

```
http://couchdb/someDatabase/someDocumentID/someAttachment.txt?rev=<your revision id> 
```

您有您的`doc`字典中的修订 ID 和文档 ID。如果您可以传递服务器 URL 和/或数据库 URL，则可以执行 GET 操作来获取附件。

```
RESTResource *aRestResource=[[RESTResource alloc] initWithURL:[NSURL URLWithString:@"http://couchdb/someDatabase/someDocumentID/someAttachment.txt?rev=<your revision id>"]];
    [aRestResource autorelease];
    RESTOperation *aRestOperation=[aRestResource GET];
    [aRestOperation onCompletion:^{
        NSLog(@"Content Type:%@",aRestOperation.responseBody.contentType);
        //The response for the GET will contain the attachment's data. You can
        NSData *contentData=[[NSData alloc] initWithData:aRestOperation.responseBody.content];
        NSString *contentString=[[NSString alloc] initWithData:contentData encoding:NSUTF8StringEncoding];
        NSLog(@"Content:%@",contentString);   //Should contain the text in someAttachment.txt
        [contentData release];
        [contentString release];
    }];
    [aRestOperation wait]; 
```

来源：[http ://wiki.apache.org/couchdb/HTTP_Document_API#Attachments](http://wiki.apache.org/couchdb/HTTP_Document_API#Attachments)

或者，您可以使用's方法创建一个`CouchAttachment`对象，但它不会构造特定属性，如文档和数据库等。`RESTResource``initWithURL:``CouchAttachment`

# c# - DataContractJsonSerializer 在 WP7 上的行为如何？

> ID：10074937
> 
> 赞同：0
> 
> 时间：2012-04-09T14:44:17.310
> 
> 标签：c#, json, windows-phone-7, deserialization

我正在处理一个 REST 服务，它根据提供给它的信息（它是一个搜索服务）返回带有字符串元素或字符串元素列表的元素。一个示例可能是搜索具有零个或多个图像的项目 - 保存为 url 字符串。My`model`包含以下属性来处理我的示例：

```
private List<string> _Images = new List<string>();
[DataMember(Name="images", IsRequired=false)]
public List<string> Images
{
    get
    {
        return _Images;
    }
    set
    {
        _Images = value;
        onPropertyChanged("Images");
    }
} 
```

`JSON`带有多个图像的示例：

```
{
    "id": 24955,
    "title": "Conan the Barbarian",
    "duration": 105,
    "hd": false,
    "trailer": "800/BM_6305_800_tr.wmv",
    "images": [
        "http://website.com/images/conanthebar_1.jpg",
        "http://website.com/images/conanthebar_2.jpg",
        "http://website.com/images/conanthebar_3.jpg",
        "http://website.com/images/conanthebar_4.jpg",
        "http://website.com/images/conanthebar_5.jpg",
        "http://website.com/images/conanthebar_6.jpg"
    ]
} 
```

一张图片的样本`JSON`：

```
{
    "id": 24955,
    "title": "Conan the Barbarian",
    "duration": 105,
    "hd": false,
    "trailer": "800/BM_6305_800_tr.wmv",
    "images": "http://website.com/images/conanthebar_6.jpg"
} 
```

现在，我的问题是，当我使用 时`DataContractJsonSerializer`，将如何处理？如果我传入的 json 的图像字符串是单个字符串（与数组/字符串列表相比），它会将其转换为只有一个成员的字符串列表吗？

* * *

最后，如果不是这样（我的理论是错误的），这种情况怎么处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:57:29.237

Kris，如果 DataContractJsonSerializer 期待一个数组或任何 IEnumerable 字符串，它实际上会期待以下格式的内容：

[“str1”，“str2”，“str3”，...]

如果它只接收一个字符串，如下所示：

“str1”

它实际上会引发异常。它不会自动将其转换为数组，也没有办法。

但是，您拥有的一种解决方法是，如果您将“图像”声明为 System.Object 类型。如果你这样做，序列化将同样工作。反序列化将完全按照您的要求工作 - 如果遇到数组，它将反序列化为字符串数组，如果遇到字符串，它将反序列化为 System.string。

# android - android类路径异常

> ID：10074938
> 
> 赞同：2
> 
> 时间：2012-04-09T14:44:22.437
> 
> 标签：android, classpath

[我从这里](https://github.com/markfguerra/GLWallpaperExample)下载了一个示例 pf GLWallpaper 。我按照自述文件所述导入项目。但是，我得到了“找不到类”异常。

```
04-09 22:24:06.281: E/AndroidRuntime(31990): java.lang.RuntimeException: Unable to
instantiate service net.markguerra.android.glwallpaperexample.MyWallpaperService:
java.lang.ClassNotFoundException:
net.markguerra.android.glwallpaperexample.MyWallpaperService in loader
dalvik.system.PathClassLoader[/mnt/asec/net.markguerra.android.glwallpaperexample-1/pkg.apk] 
```

我现在不知道它有什么问题。清单 xml 已经有“MyWallpaperService”。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="net.markguerra.android.glwallpaperexample"
  android:versionCode="1"
  android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name">
     <service android:label="@string/service_label" android:name=".MyWallpaperService"
        android:permission="android.permission.BIND_WALLPAPER">
        <intent-filter>
            <action android:name="android.service.wallpaper.WallpaperService" />
        </intent-filter>
        <meta-data android:name="android.service.wallpaper"
            android:resource="@xml/myglwallpaper" />
    </service>
</application>
<uses-sdk android:minSdkVersion="7" /> 
```

我没有更改示例代码中的任何内容。这是“MyWallpaperService”类的一部分。

```
package net.markguerra.android.glwallpaperexample;

import net.rbgrn.android.glwallpaperservice.*;

// Original code provided by Robert Green
// http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers
public class MyWallpaperService extends GLWallpaperService {
    public MyWallpaperService() {
    super();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:15:04.540

问题解决了。在 Eclipse ADT17 中，需要将 .jar 放在“libs”而不是“lib”文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:13:02.303

WallpaperService 应该是 MyWallpaperService。在清单中尝试这个：

```
<intent-filter>
        <action android:name="android.service.wallpaper.MyWallpaperService" />
    </intent-filter> 
```

# iphone - 给定渐变时，CoreGraphics 未按预期绘制

> ID：10074944
> 
> 赞同：0
> 
> 时间：2012-04-09T14:44:37.317
> 
> 标签：iphone, objective-c, core-graphics

这是我的代码：

```
CGContextSaveGState(context);
    CGContextAddRect(context, CGContextGetClipBoundingBox(context));
    CGContextAddPath(context, pickerPath);
    CGContextEOClip(context);
    CGContextAddPath(context, pickerPath);

//Gradient
    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat colors[20];

    colors[0] = 0.255;
    colors[1] = 0.255;
    colors[2] = 0.286;
    colors[3] = 1.0;
    colors[4] = 0.169;
    colors[5] = 0.169;
    colors[6] = 0.188;
    colors[7] = 1.0;
    colors[8] = 0.153;
    colors[9] = 0.153;
    colors[10] = 0.173;
    colors[11] = 1.0;
    colors[12] = 0.133;
    colors[13] = 0.133;
    colors[14] = 0.149;
    colors[15] = 1.0;
    colors[16] = 0.122;
    colors[17] = 0.122;
    colors[18] = 0.137;
    colors[19] = 1.0;

    CGFloat locations[] = { 0.0, 0.171, 0.580, 0.580, 1.0 };

    CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, locations, 5);
    CGContextDrawLinearGradient(context, gradient, CGPointMake(0, 0), CGPointMake(0, 257), 0);

//Red fill
    CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
    CGContextFillPath(context);

    CGContextRestoreGState(context); 
```

它绘制渐变，但不绘制红色填充。如果我注释掉渐变，它仍然不会绘制红色填充。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:54:35.660

问题可能是您试图在上下文仍被裁剪时填充椭圆。尝试在 2 个操作中进行绘图：

```
CGContextSaveGState(context);
// Draw gradient with ellipse clipped-out as you do now
CGContextRestoreGState(context);
CGContextSaveGState(context);
// Set ellipse path again and fill it
CGContextRestoreGState(context); 
```

# sql - 将多条记录中的数据合并到一个字段中

> ID：10074964
> 
> 赞同：1
> 
> 时间：2012-04-09T14:45:50.237
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)

我的查询如下所示：

```
select analyst, issuer, coveragegroup
from analystcoverage 
```

特定发行人可以有多个分析师。在这种情况下，我想将他们的名字连接到一条记录中。

我想要这两个记录：

```
John Doe      Walmart      Fixed Income
Bill Jones    Walmart      Fixed Income 
```

返回为：

```
John Doe; Bill Jones      Walmart      Fixed Income 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:55:29.907

一种选择是使用 COALESCE。我知道如何使用它，但我不确定如何告诉它只连接具有相等值的记录。这是帮助您入门的代码：

[将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

# css - 如何在 CSS 中使用固定定位？

> ID：10074970
> 
> 赞同：1
> 
> 时间：2012-04-09T14:46:16.177
> 
> 标签：css, positioning, fixed

我正在尝试在我的网站左侧进行固定的垂直导航。

但是，每当我给它的位置：固定；然后使用边距定位它，它会取消我在`<nav>`标签中的信息上拥有的任何链接。

有没有人对如何改变这个有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:49:54.243

解决方案是使用 left 和 top 属性而不是边距进行定位:)

```
#mydiv{
  position:fixed;
  top:100px;
  left:0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:56:19.273

这篇文章对你有用吗？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Fixed Position</title>

<style type="text/css">
#nav{
    position:fixed;
    background-color:#EFEFEF;
    width:200px;

    left:0;
    top:0;
}
#main{
    width:900px;
    margin:0 auto;
    background-color:#0CF;
    height:3000px;
}
</style>

</head>

<body>

    <div id="nav">
        <ul>
            <li><a href="#">Link1</a></li>
            <li><a href="#">Link2</a></li>
            <li><a href="#">Link3</a></li>
        </ul>
    </div>

    <div id="main">
    </div>

</body>
</html> 
```

# performance - 加密和解密单个 8 * 1K 消息的 300 毫秒是可接受的 RSA 性能吗？

> ID：10074973
> 
> 赞同：0
> 
> 时间：2012-04-09T14:46:23.320
> 
> 标签：performance, haskell, wolfram-mathematica, openssl, rsa

**注意：** 对于那些想提出无聊、愚蠢的评论甚至建议来关闭有效问题的人，请在此处查看已接受的答案：[使用 GNU/Linux 系统调用`splice`进行零复制套接字到套接字Haskell](https://stackoverflow.com/questions/10080670/using-gnu-linux-system-call-splice-for-zero-copy-socket-to-socket-data-transfe)中的数据传输是如何为那些真正寻求建设性答案的人提供适当帮助的一个很好的例子！

* * *

嗨，我刚刚阅读`PowerMod`Mathematica 8 的文档并想测试 Haksell`RSA`包（`ghc --make -O2 -O3 -fllvm -optlo-O3 test.hs`）：

```
{-# LANGUAGE OverloadedStrings #-}

module Main where

import Control.Monad
import System.Random
import Codec.Crypto.RSA
import Data.ByteString.Lazy
import Data.ByteString.Char8

import Criterion.Main
import Criterion.Config

main :: IO ()
main = do
  print m1
  print m4
  print m8
  defaultMainWith defaultConfig (return ()) [
    bgroup "RSA" [
       bench "1" $ ed m1
     , bench "4" $ ed m4
     , bench "8" $ ed m8
     ]
   ]

m1 = fromChunks [ Data.ByteString.Char8.replicate (1*1024) '0' ]
m4 = fromChunks [ Data.ByteString.Char8.replicate (4*1024) '0' ]
m8 = fromChunks [ Data.ByteString.Char8.replicate (8*1024) '0' ]

ed m = do
  g1 <- newStdGen
  let (el,il,g2) = generateKeyPair g1 1024
  loop 1 g2 el il m

loop :: RandomGen g => Int -> g -> PublicKey -> PrivateKey -> Data.ByteString.Lazy.ByteString -> IO ()
loop n g e i m = do
  let   nn     = n-1
  let  (em,ng) = encrypt g e  m
  let   dm     = decrypt   i em
  when (m == dm) $ Data.ByteString.Char8.putStr "1"
  when (nn > 0 ) $ loop nn ng e i m 
```

在 Mathematica 中也试过这个：

```
{p, q} = Prime[RandomInteger[{10^4, 10^5}, {2}]];
{p, q, n = p q}
\[Lambda] = CarmichaelLambda[n]
d = NestWhile[#1 + 1 & , Round[n/3], GCD[\[Lambda], #1] =!= 1 &]
e = PowerMod[d, -1, \[Lambda]]
enc = PowerMod[#, e, n] &;
dec = PowerMod[#, d, n] &;
c = ConstantArray[48, 8 1024];
t = Table[c // enc // dec; // AbsoluteTiming, {10}][[All, 1]] 
```

Haskell ( `m8`) 和 Mathematica 案例中的时序相似：

```
{0.313015, 0.302337, 0.303766, 0.303321, 0.303018, 0.302574, \
0.302511, 0.303958, 0.301411, 0.300820} 
```

对于 RSA 来说，每 8192 字节长的消息 300 毫秒是可接受的性能吗？OpenSSL 或其他实现如何比较？

（测试台：64 位 linux；4xCORE，Intel(R) Core(TM) i5 CPU M 430 @ 2.27GHz）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T06:14:42.953

首先，好问题 - RSA 与 OpenSSL 的性能差异也是我的一个问题。也就是说，这里有一堆没有给出答案的文本。

**Haskell RSA 软件包已更改**

我最近将 RSA 移到使用`CryptoRandomGen`from `RandomGen`。您使用的速度非常慢`StdGen`，因此切换到 intel-aes 包中的生成器或`HashDRBG`从 DRBG 包（可能是缓冲版本）会有所帮助。

**这不是您应该使用公钥密码术的方式**

通常，您使用公钥来交换密钥或加密密钥，以便只有接收者才能解密它。您似乎打算使用 RSA 不断加密消息流。RSA 的性能很少有人关心，因为它是一种非常罕见的操作。

**适当的基准测试**

正如 Daniel 所说，您目前正在对密钥生成、加密和解密进行基准测试。你回答说你不会生成很多密钥，只是做很多 enc/dec 操作......所以你不认为你应该修复基准吗？

此外，您的基准似乎不完整，因此值得怀疑 - 至少它缺少导入。

**其他令人担忧的事情**

你说“密钥对的随机性[目前]不重要。” 在它们变得重要之前，没有理由担心密码学。

**基准测试** Oli 也有一个好处。对 OpenSSL 进行基准测试是必经之路。

从命令行（就我的答案部分而言）OpenSSL 强制您半正确地使用 RSA，因此我们将只对非常小的文件的加密进行基准测试：

```
dd if=/dev/urandom of=64B bs=64 count=1
openssl genrsa -out test.key 1024
openssl rsa -in test.key -out public.pem -outform PEM -pubout
openssl rsa -in test.key -out private.pem -outform PEM
time openssl rsautl -raw -ssl -encrypt -inkey private.pem -in 64B -out 64B.enc 
```

这给了我们 5 到 12 毫秒的时间。

现在为 Haskell。除了外观上的更改之外，我还使用 CryptoRandomGen 和不那么快但 OK 的 HashDRBG 生成器迁移到新的 RSA，同时使您的加密函数变得纯净并放弃不必要的比较。我们最终得到：

```
import Criterion.Main
import Criterion.Config
import qualified Data.ByteString as B
import qualified Data.ByteString.Lazy as L
import Codec.Crypto.RSA
import Crypto.Random.DRBG

main :: IO ()
main = do
  r1 <- newGenIO :: IO HashDRBG
  r2 <- newGenIO :: IO (GenBuffered HashDRBG)

  -- We don't care about the performance of generate, so we do it outside the benchmark framework
  let (pub,priv,g2) = generateKeyPair r2 1024

  defaultMainWith defaultConfig (return ()) [
    bgroup "RSA" [
       bench "1" $ whnf (enc r1 pub priv) m1
       , bench "2" $ whnf (enc r2 pub priv) m1
     ]
   ]

m1 :: L.ByteString
m1 = L.pack [0..63]

enc :: CryptoRandomGen g => g -> PublicKey -> PrivateKey -> L.ByteString -> L.ByteString
enc g pub priv m = 
    let (em,ng) = encrypt g pub m
        dm     = decrypt   priv em 
    in dm 
```

这会产生大约 3.5 毫秒的测量结果（使用 GHC 7.4 和 -O2 编译）。需要明确的是：我并不是说 RSA 比 OpenSSL 更快——OpenSSL 测试有更多的开销（加载可执行文件、读取密钥、读取明文、加密、写入结果），而且它非常可信地可能是一个命令比 RSA 包快很多。我要说的是“嘿，看，Haskell RSA 代码的执行速度非常快，我并不在意，如果你愿意，你可以进一步完善基准测试。”

作为参考，`openssl speed rsa1024`它说它在 0.5 毫秒内签名（显然在我的机器上），我怀疑这是 16 字节的 RSA 加密以及其他操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T05:27:56.600

简短的回答是我不知道，我没有什么可比较的。我试图找出如何使 openssl 执行相同的操作，但没有找到任何可以理解的（我）文档。所以我所能做的就是玩弄 Haskell RSA 代码（顺便说一句，你的代码不适用于 hackage 的最新版本，相关的约束现在`CryptoRandomGen`不是`RandomGen`，所以我捏造了一个`instance CryptoRandomGen Stdgen`，当然不是最理想的，但那没有t有很大的不同）。

我玩弄的结论是，Haskell [RSA](http://hackage.haskell.org/package/RSA)实现肯定是可以改进的，但可能不会太慢​​。它的速度是否可以接受当然取决于您的需求。

起点是您的基准代码与我的伪造`CryptoRandomGen`实例。在我的计算机（64 位 linux，Core i5 M2410，2.3GHz）上，报告的 8K 字符串的平均值约为 360 毫秒。

将密钥生成移出基准测试使时间缩短到约 295 毫秒，因此密钥生成相当重要，主要是由于次优的质数测试。强费马检验的更好实现大大减少了质数发现时间，使用 Baillie PSW 检验代替米勒拉宾可以进一步减少。

在密钥生成之外，缺少模幂实现，它在指数上使用一位移位，这对于大`Integer`s 来说相当慢。改进带来了显着但不是显着减少的运行时间。

我可以稍微提高性能的另一点是八位字节流和`Integer`s之间的转换，但与上述相比差异很小。

完成明显的事情后，剩下的就是找出时间花在哪里了。事实证明，绝大多数时间都花在了模幂运算上。幸运的是，单独对模幂算法进行基准测试并将其与 GMP 的性能进行比较相对容易。一个快速而肮脏的测试表明（至少在我的计算机上）GMP 的`mpz_powm`工作速度大约是我的 Haskell 实现的 2-2.5 倍（因此，如果 GHC 提供对 的直接绑定`mpz_powm`，则可以预期会有很大的加速）。

总而言之，8K 基准测试现在在约 270 毫秒（包括密钥生成）和约 245 毫秒（不包括密钥生成）内运行，其中约 200 毫秒用于模幂运算。

假设大小限制不允许比 GMP 更好的模幂运算，我估计一个好的 C 实现将是当前 RSA 包¹的 5-10 倍。

这可以接受吗？你的来电。

¹但我有一半希望会因一个不平凡的因素而偏离。

# objective-c - 如何在目标c中进入顶部栏

> ID：10074974
> 
> 赞同：-2
> 
> 时间：2012-04-09T14:46:27.673
> 
> 标签：objective-c, uiviewcontroller

我有一个视图控制器类，我把它放在标签栏里面。我想要一个带有文字的顶栏，但我不知道该怎么做，[就像这样](http://imageshack.us/photo/my-images/406/oldmain.png/)。现在我使用标签并将其放在顶部但不一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:50:43.793

您可以将视图控制器放在导航控制器中，也可以将[UINavigationBar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)用作独立对象。只需创建一个 UINavigationBar 实例并将其添加到视图层次结构中，就像任何其他子视图一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T23:08:54.250

假设你正在使用 interface builder 来实现这一点，`UINavigationBar`可以像这样添加 a。

![在此处输入图像描述](../Images/eb652cff5338ee05c4ff7cd447a2a14f.png)

您所要做的就是拖放。

# r - 有人可以指出正常分数转换及其在 R 中的使用吗？

> ID：10074983
> 
> 赞同：1
> 
> 时间：2012-04-09T14:47:39.563
> 
> 标签：r, spss

我想使用等效的命令 Rank Cases...--> SPSS 使用的正常分数来转换一个变量（这根本不正常）。我想使用 R 来执行此操作。我发现 SPSS 使用 Blom 公式来执行此操作。

你能帮我或给点建议吗？

提前致谢。

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:40:12.453

我不知道 Blom 的公式是什么，但包`powerTransform`中的函数`car`可能会做你想做的事。该函数使用 Box-Cox 变换

```
x <- exp(qnorm(runif(100)))
require(car)
powerTransform(x)
#Estimated transformation parameters 
#          x 
#-0.02340301 
xT <- x^(-0.02340301) 
```

绘制未转换和已转换变量的密度显示了转换的效果。 ![在此处输入图像描述](../Images/1ac4b7a522b8871db809c7b4363d98c9.png)

# javascript - 使用 Google Fusion 创建的标记的多个过滤器

> ID：10074988
> 
> 赞同：0
> 
> 时间：2012-04-09T14:48:06.437
> 
> 标签：javascript, google-fusion-tables

我正在尝试根据融合表中的列为标记创建多个过滤器。我希望过滤器并行交叉工作，而不是单独过滤。这是我到目前为止的代码，我基于我在 ERIC 在这里找到的答案，但它对我不起作用：

```
<!DOCTYPE html>
<html>
  <head>
<style>
#map-canvas { width:500px; height:400px; }
  </style>
<script src="http://code.jquery.com/jquery.min.js"></script> 
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
<script src="eq_jsonp.js"></script> 
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
<script type="text/javascript"src="http://maps.google.com/maps/api/js?sensor=false">         </script>
 <script type="text/javascript">
var map;
 var layerl0;
var tableid = 3470746;
var locationCol = 'Latitude'; 
  function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(28.2798935535169, -81.3486099243164),
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

 layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'latitude'",
      from: 3470746
    },
    map: map
  });
}
google.maps.event.addDomListener(window, 'load', initialize);

function doQuery(){

// collect WHERE conditions here for each search-string value

 var query = [];

 var searchString = '';

// I'd name my select id's something more descriptive, e.g. "damage_level" vs search-     string1, etc.

 searchString = document.getElementById('classification').value;

 if(searchString){

 query.push(" 'Roadway Classification:' = '" + searchString + "'");

}

searchString = document.getElementById('name').value;

if(searchString){

query.push("'Roadway Name:' = '" + searchString + "'");

}

// Date Filter

 searchString = dateFilter();

if(searchString){

query.push(searchString);

}

// Now build the WHERE clause by joining with ' AND ' all the conditions.

// Note: if nothing is in the where Fusion Tables will not object

var where = query.join(' AND ');
//alert(where);

var qryOpts = {

query: {

  select: "'latitude'",

  from: 3470746,

  }

};

layer.setOptions(qryOpts);
return;

}

// set all form inputs to null and call doQuery again.

function resetQuery(){

 $('#classification').val('');
 $('#name').val('');
 doQuery();
}

</script>
</head>
<body>
 <div id="map-canvas"></div>
 <form> 
<div style="margin-top: 10px;">
   <label>Roadway Classification</label>
   <select id="classification" onchange="doQuery;" title="Select Roadway by  Classification">
    <option value="">--Roadway Type--</option>
    <option value="Collector">Collector</option>
    <option value="Highway">Highway</option>
    <option value="Minor Arterial">Minor Arterial</option>
  </select>
 </div>
<div style="margin-top: 10px;">
  <label>Roadway Name</label>
  <select id="name" onchange="doQuery;" title="Select Roadway by Name">
    <option value="">--Roadway Name--</option>
    <option value="Neptune Rd">Neptune Rd</option>
    <option value="Partin Settlement Rd">Partin Settlement Rd</option>
    <option value="Shady Ln">Shady Ln</option>
   </select>
  <br>
  <input type="button" onclick="doQuery();" value="Search" />

  <input type="button" onclick="resetQuery();" value="Reset" />
  </form>
 </div>
</body>
</html>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:54:58.137

看看你的[表 3470746](http://www.google.com/fusiontables/DataSource?dsrcid=3470746)，你的列名后面没有冒号。尝试：

```
query.push("'Roadway Name' = '" + searchString + "'"); 
```

和

```
query.push(" 'Roadway Classification' = '" + searchString + "'"); 
```

您也没有将 where 子句添加到您的 qryOpts：

```
var where = query.join(' AND ');

var qryOpts = {

query: {

  select: "'latitude'",

  from: 3470746,
  // WHERE clause was missing
  where: where

  }

}; 
```

# powershell - Get-ChildItem 使用变量用于 -Include 不工作

> ID：10074989
> 
> 赞同：6
> 
> 时间：2012-04-09T14:48:08.940
> 
> 标签：powershell

当前版本的问题：

我初始化一个数组 $tbd_list 如下：

```
$tbd_list = @()
foreach($i in $tbd) {
    # -- If statement prevents duplicate id's
    if(!($tbd_list -match $i.id)){
        $tbd_list += $i.id
    }
} 
```

此时，如果我打印 $tbd_list 我得到：

```
"dce50fdd-2298-45db-8aac-fb13a176fe1a*.*"
"79c1538f-09b1-4ed7-b84c-ff1a7934596a*.*"
"60511686-7a87-4352-a781-62e7c04913e5*.*"
"0821f8ee-c1ca-4568-ab68-bb5e30d07268*.*"
"3b9f5da0-fc2d-49e3-a11d-943f5ac2296a*.*"
"ff7720fd-2c0f-43c8-871a-e283f231c823*.*" 
```

（$tbd_list.GetType().FullName 返回 System.Object）

然后我尝试运行以下代码：

```
Get-ChildItem F:\store_test\ -Recurse -Include $tbd_list 
```

但是，我没有得到任何回报。

但是，如果我手动输入：

```
$tbd_list = "dce50fdd-2298-45db-8aac-fb13a176fe1a*.*", "79c1538f-09b1-4ed7-b84c-ff1a7934596a*.*", "60511686-7a87-4352-a781-62e7c04913e5*.*", "0821f8ee-c1ca-4568-ab68-bb5e30d07268*.*", "3b9f5da0-fc2d-49e3-a11d-943f5ac2296a*.*", "ff7720fd-2c0f-43c8-871a-e283f231c823*.*" 
```

此时，如果我打印 $tbd_list 我仍然得到：

```
"dce50fdd-2298-45db-8aac-fb13a176fe1a*.*"
"79c1538f-09b1-4ed7-b84c-ff1a7934596a*.*"
"60511686-7a87-4352-a781-62e7c04913e5*.*"
"0821f8ee-c1ca-4568-ab68-bb5e30d07268*.*"
"3b9f5da0-fc2d-49e3-a11d-943f5ac2296a*.*"
"ff7720fd-2c0f-43c8-871a-e283f231c823*.*" 
```

并运行同一行（$tbd_list.GetType().FullName 仍返回 System.Object）：

```
Get-ChildItem F:\store_test\ -Recurse -Include $tbd_list 
```

它完美地工作。有什么建议么？

**解决方案**

以下两个答案都是正确的，但我只能选择一个。

在确保变量是一个数组之后，我必须删除前导引号和尾随引号，脚本才能工作。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:08:26.770

> $tbd_list.GetType().FullName 给出 System.String

虽然从您的问题中看不出您是如何定义 $tbd_list 的，但它应该是一个数组，并且只有当它是一个数组时，它才能与`Get-ChildItem`'`Include`选项一起使用。如果它是一个字符串，它将不会以您期望的方式工作。正确定义它：

```
$tbd_list = "dce50fdd-2298-45db-8aac-fb13a176fe1a*.", "79c1538f-09b1-4ed7-b84c-ff1a7934596a.*", "dce50fdd-2298-45db-8aac-fb13a176fe1a*.", "79c1538f-09b1-4ed7-b84c-ff1a7934596a.*", "dce50fdd-2298-45db-8aac-fb13a176fe1a*.", "60511686-7a87-4352-a781-62e7c04913e5.*", "0821f8ee-c1ca-4568-ab68-bb5e30d07268*.", "3b9f5da0-fc2d-49e3-a11d-943f5ac2296a.*", "ff7720fd-2c0f-43c8-871a-e283f231c823*.*" 
```

使用上面的行对我有用`Get-ChildItem`

更新：

这是你做错的地方：

```
$tbd_list = "$tbd_list, " + $i.id 
```

它将构造一个字符串。

您必须初始化`$tbd_list`为数组：

```
$tbd_list = @() 
```

并添加您想要的项目：

```
$tbd_list += $i.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:12:53.573

`$i.id`不应包含引号字符。在命令行上，它们指定一个字符串，但是当这些字符是存储在字符串变量中的字符串的一部分时，它对您不起作用，例如：

```
9 >  gci t*.txt

    Directory: Microsoft.PowerShell.Core\FileSystem::C:\Users\Keith

Mode           LastWriteTime       Length Name
----           -------------       ------ ----
-a---      4/3/2012  8:54 PM           13 test.txt
-a---    10/20/2011  9:13 AM         2872 trace.txt

10 >  $a = "`"t*.txt`""
11 >  $a
"t*.txt"
12 >  gci * -Include $a 
```

像这样去掉前导和尾随引号：

```
$tbd_list += $i.id.Trim('"') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T06:15:33.833

```
$pattern="packages","obj","bin" # needs to be string[] 
```

或者

```
[string[]] $pattern="packages","obj","bin"

Get-ChildItem -Recurse -Name -Attributes H,!H -Directory -Include $pattern 
```

# android - android中带有webservices的异步任务

> ID：10074993
> 
> 赞同：0
> 
> 时间：2012-04-09T14:48:18.973
> 
> 标签：android, web-services, android-asynctask

我需要帮助..我正在尝试从我的 android 客户端应用程序调用 php webservices，我无法从主线程调用它，因为 SDK 是 15，我在网上搜索，我发现这个问题的解决方案是使用 Asynktask .. 但它对我不起作用我不知道为什么.. 请帮助..谢谢

```
public class CustomWebConnection extends AsyncTask<Void, Void, String> {
private final String                 uri = "http://localhost/mywebservices.php?op=GetAllRest";
private ArrayList<NameValuePair>     mParams;
private OnPostExecuteListener        mPostExecuteListener = null;

public static interface OnPostExecuteListener{
    void onPostExecute(String result);
}

CustomWebConnection(ArrayList<NameValuePair> nameValuePairs,
    OnPostExecuteListener postExecuteListener) throws Exception {

    mParams = nameValuePairs;
    mPostExecuteListener = postExecuteListener;
    if (mPostExecuteListener == null)
        throw new Exception("Param cannot be null.");
}

@Override
protected String doInBackground(Void... params) {

      JSONObject param=null;
      String result = null;
      HttpClient httpClient = new DefaultHttpClient();
        HttpHost httpHost = new HttpHost("localhost",80);  
        HttpPost httpPost = new HttpPost(uri);
        httpPost.addHeader("Content-Type", "application/json; charset=utf-8");

        try
        {
            //HttpEntity bodyEntity = new StringEntity(param.toString(), "utf8");
            //httpPost.setEntity(bodyEntity);
            HttpResponse response = httpClient.execute(httpPost);
            HttpEntity entity = response.getEntity();

            if (entity != null) {
                InputStream instream = entity.getContent();
                BufferedReader reader = new BufferedReader(
                     new InputStreamReader(instream));
                StringBuilder sb = new StringBuilder();

                String line = null;
                while ((line = reader.readLine()) != null)
                    sb.append(line + "\n");

                result = sb.toString();
                instream.close();           
            }
        }

        catch(Exception e)
        {
            e.printStackTrace();
        }

    httpPost.abort();
    return result ;
}

@Override
protected void onPostExecute(String result) {
    if (mPostExecuteListener != null){
        try {
            JSONObject json = new JSONObject(result);
            mPostExecuteListener.onPostExecute(result);
        } catch (JSONException e){
            e.printStackTrace();
        }
    }
} 
```

它抛出了这个异常

```
 04-09 16:31:37.393: E/AndroidRuntime(2284): FATAL EXCEPTION: main
     04-09 16:31:37.393: E/AndroidRuntime(2284): java.lang.NullPointerException
      04-09 16:31:37.393: E/AndroidRuntime(2284):   at    org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
     04-09 16:31:37.393: E/AndroidRuntime(2284):    at  org.json.JSONTokener.nextValue(JSONTokener.java:94)
      04-09 16:31:37.393: E/AndroidRuntime(2284):   at org.json.JSONObject.<init>(JSONObject.java:154)
     04-09 16:31:37.393: E/AndroidRuntime(2284):    at org.json.JSONObject.<init>(JSONObject.java:171)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at  com.vtab.CustomWebConnection.onPostExecute(CustomWebConnection.java:92)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at com.vtab.CustomWebConnection.onPostExecute(CustomWebConnection.java:1)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at  android.os.AsyncTask.finish(AsyncTask.java:602)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at android.os.Handler.dispatchMessage(Handler.java:99)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at android.os.Looper.loop(Looper.java:137)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at android.app.ActivityThread.main(ActivityThread.java:4424)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at java.lang.reflect.Method.invokeNative(Native Method)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at java.lang.reflect.Method.invoke(Method.java:511)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  04-09 16:31:37.393: E/AndroidRuntime(2284):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 04-09 16:31:37.393: E/AndroidRuntime(2284):    at dalvik.system.NativeStart.main(Native Method) 
```

错误在`HttpResponse response = httpClient.execute(httpPost);`

这是来自服务器的**JSON 响应**

```
[{"rest_id":"1","rest_name":"Al Dabke","cuisine":"Lebanese","no_tables":"15","bg_img":"lebanon","rest_logo":"dabke"},{"rest_id":"4","rest_name":"MY KIND OF PLACE","cuisine":null,"no_tables":"10","bg_img":"kindofplacebg","rest_logo":"mykindofplacelogo"},{"rest_id":"5","rest_name":"LANTANIA","cuisine":"Thai","no_tables":"10","bg_img":"lantaniabg","rest_logo":"lantanialogo"},{"rest_id":"6","rest_name":"LEONARDO","cuisine":"italian","no_tables":"10","bg_img":"leonardobg","rest_logo":"leonardologo"},{"rest_id":"7","rest_name":"LE MARCHE ","cuisine":"French","no_tables":"10","bg_img":"lemarchebg","rest_logo":"lemarchelogo"},{"rest_id":"8","rest_name":"Marias","cuisine":"mexican","no_tables":"10","bg_img":"mariang","rest_logo":"marialogo"},{"rest_id":"9","rest_name":"NOBLE HOUSE","cuisine":"chinese","no_tables":"10","bg_img":"noblehousebg","rest_logo":"noblehouselogo"}] 
```

请有任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:36:27.923

我最近也遇到了这个问题，我发现 HttpClient 是 Android ICS 中的问题，我使用的简单技巧是将最小 SDK 版本从 15 更改为 7。但这不是一个合适的解决方案。我从博客中看到代码

```
StrictMode.ThreadPolicy policy = new StrictMode.
ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

把它放在 onCreate() 方法中解决了我的问题。也许它可以帮助你。我仍在寻找更多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:54:30.857

看起来错误是在解析 JSON 时出现的，尽管您没有收到 JSONException。