# StackOverflow 问答 000723000-000723999

# ruby-on-rails - VB .NET 中是否有类似于 Rails 部分的类似物？

> ID：723008
> 
> 赞同：1
> 
> 时间：2009-04-06T20:11:22.370
> 
> 标签：ruby-on-rails, ruby, vb.net, partials

我是 VB .NET 的新手，如果可能的话，我想要像 Rails partials 这样的东西——可以在页面脚本中引用的 HTML 模板位，可能在循环中。我知道可能没有这样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T20:13:54.923

[用户控制](http://www.dotnet-guide.com/usercontrol15.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-28T17:51:46.300

Castle Project 是 ASP.NET / ADO.NET 的一个有趣的开源替代方案。此外，Castle Project 还为 .NET 提供了一个类似于 Rails 的开发框架。 [http://jamescrisp.blogspot.com/2007/06/castle-project-rails-for-net.html](http://jamescrisp.blogspot.com/2007/06/castle-project-rails-for-net.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:57:40.967

You can read html into a string, and spit it out with a placeholder / literal control. the function is like so:

```
Dim tmp as string = GetHtmlFragement()
Placeholder1.controls.add(New LiteralControl(tmp)) 
```

# documentation - 各种编程语言的离线文档？

> ID：723017
> 
> 赞同：49
> 
> 时间：2009-04-06T20:12:22.400
> 
> 标签：documentation, offline

我最近发现了这个： http: [//php.net/get/php_manual_en.chm/from/a/mirror](http://php.net/get/php_manual_en.chm/from/a/mirror)。这是一个 .chm 文件，其中包含您通常可以在他们的网站上找到的所有 PHP 文档。方便离线使用。

我想知道，有没有人知道其他语言的类似事情。如果您有一段时间没有无线网络，您可以使用完整的离线文档。

对于 C#，Visual Studio 为您提供了作为 VS2008 安装的一部分下载和安装整个在线文档的选项，因此，如果您有 Visual Studio 2008，那么您就有了 C# 离线文档。

编辑：如果您要这样说，那是可能的，请张贴超链接。

这就是我们现在所拥有的：

*   PHP：[http ://be.php.net/get/php_manual_en.chm/from/a/mirror](http://php.net/get/php_manual_en.chm/from/a/mirror)
*   Java：http: [//java.sun.com/javase/downloads/index.jsp#docs](http://java.sun.com/javase/downloads/index.jsp#docs)
*   C：[http ://www.gnu.org/software/libc/manual/](http://www.gnu.org/software/libc/manual/)
*   MS SQL 服务器：[http ://www.microsoft.com/downloads/details.aspx?FamilyId=765433F7-0983-4D7A-B628-0A98145BCB97](http://www.microsoft.com/downloads/details.aspx?FamilyId=765433F7-0983-4D7A-B628-0A98145BCB97)
*   Python 2.x：[http ://docs.python.org/download.html](http://docs.python.org/download.html)
*   Python 3.x：[http ://docs.python.org/py3k/download.html](http://docs.python.org/py3k/download.html)
*   红宝石：[http ://railsapi.com/](http://railsapi.com/)
*   Common Lisp HyperSpec： ftp: [//ftp.lispworks.com/pub/software_tools/reference/](ftp://ftp.lispworks.com/pub/software_tools/reference/)
*   完整的 MSDN 库：遗憾的是不再可用
*   Visual Studio 2008 SP1 离线库：[https ://www.microsoft.com/downloads/en/details.aspx?FamilyID=7BBE5EDA-5062-4EBB-83C7-D3C5FF92A373&displaylang=en](https://www.microsoft.com/downloads/en/details.aspx?FamilyID=7BBE5EDA-5062-4EBB-83C7-D3C5FF92A373&displaylang=en)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T19:13:15.733

Dash [http://kapeli.com/dash](http://kapeli.com/dash)包含 150 多个 API 的离线文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T20:23:31.390

大多数语言都应该提供这一点。

一些例子：

Java：[Java SE 6 文档（页面下方）](http://java.sun.com/javase/downloads/index.jsp)

Perl：Perl 的 Unix 版本通常带有完整的文档，如联机帮助页和 perldoc（一些 Linux 发行版将它们放入额外的包中）；我想Windows版本也一样

C: GNU libc 库有[可下载的文档](http://www.gnu.org/software/libc/manual/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-16T07:23:08.910

Python 也有[可下载的文档](http://docs.python.org/download.html)。因此，大多数提供 Python 的操作系统也提供了一个文档包。例如，在 Debian 上，这是包`python2.5-doc`（每个版本一个包）。

安装它，您可以离线浏览文档。对于不总是连接的笔记本电脑来说非常方便。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T10:37:37.710

对于 jQuery，我推荐 jQAPI - Alternative jQuery Documentation Browser，你可以在这里找到：[http ://www.jqapi.com/](http://www.jqapi.com/)

您可以在线使用它，也可以下载它以供离线使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T20:16:57.537

顺便说一句，Visual Studio 文档 (MSDN) 还包括 JScript、VBScript、HTML 和 CSS 的文档。当我编写 PERL 时，我总是安装 perldoc。

如果我需要用不熟悉的语言做任何严肃的工作，下载文档几乎是我要做的第一件事。只是阅读 API 就像在挖金子！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T20:29:54.383

Visual Studio 附带 C# 规范，默认安装在

`C:\Program Files\Microsoft Visual Studio 9.0\VC#\Specifications\1033`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T20:55:52.170

MS SQL Server 附带一整套称为“联机丛书”的文档。尽管有这个名字，你可以从[MSDN](http://www.microsoft.com/downloads/details.aspx?FamilyId=765433F7-0983-4D7A-B628-0A98145BCB97&displaylang=en)下载这些。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-02-25T02:02:14.920

Ruby、Rack、Rails 和几个 gem 都可以在[railsapi.com找到](http://railsapi.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-16T15:06:16.050

[Cppreference.com](http://en.cppreference.com/w/)非常适合 C++ 和 C 参考。[他们在这里](http://en.cppreference.com/w/Cppreference:Archives)也有离线版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-06T20:16:11.283

对于 Java，您可以下载整个 API 以供离线使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T20:21:19.740

Sun 提供了 Java 平台文档的可下载版本。

**[Java SE 下载](http://java.sun.com/javase/downloads/index.jsp)**

向下滚动页面并查找名为 Java SE 6 Documentation 的链接。它是一系列覆盖整个 Java SE JDK 的 HTML 文件。将其存储在本地可能很方便，但由于没有搜索功能，因此其用途受到一定限制。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-06T20:51:18.500

虽然严格来说不是一种语言，但您可以通过执行以下操作为 Ruby on Rails 构建文档

```
rails sample_project
rake rails:freeze:gems
rake doc:rails
rake rails:unfreeze 
```

然后使用或自己获取 doc/api 文件夹的副本

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-16T17:08:17.143

您还可以[下载 MSDN](http://www.microsoft.com/express/download/msdn/Default.aspx)以获取 VB.NET、C#、C++ 和各种 Windows 和组件 API 的文档

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-16T23:34:59.880

Common Lisp 具有超规范。语言及其库的完整指南。

[Common Lisp 超规范](http://www.lispworks.com/documentation/common-lisp.html)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-16T23:35:49.333

实际上，我每周只通过 RSync 为自己[镜像 PHP 站点](http://php.net/mirroring.php)的一部分（这非常有效，只需下载大约 1/6 的完整下载量）。

在我自己的服务器上运行本地副本的几个优点是快捷方式（例如 php.net/array_merge）可以工作，而且我也有完整的注释。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-01-25T06:51:50.957

对于 C#，我刚刚找到了这个离线文档：
[http ://www.microsoft.com/downloads/details.aspx?FamilyID=7BBE5EDA-5062-4EBB-83C7-D3C5FF92A373&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=7BBE5EDA-5062-4EBB-83C7-D3C5FF92A373&displaylang=en)

当心 - 大文件大小。
（仍在下载，所以希望我不会在这里误导任何人）

# mysql - mysql中的嵌套选择加载时间

> ID：723021
> 
> 赞同：0
> 
> 时间：2009-04-06T20:13:13.333
> 
> 标签：mysql, nested, selection, loading

我有一个表数据包数据
包包含 2 个字段 id 和总计
它们都是 bigint 长度 20 并且只有主键id 在每条记录
中自动递增总计 = id 我有 10000 条记录让我们说 id = 1 - 10000 和总计 = 1 - 10000

我得到了 2 个几乎相同的查询 1 个导致加载时间非常长，一个几乎立即完成。

加载时间非常长：

```
设置@i = 0; 

SELECT * 

FROM packet as p1 

WHERE p1.total in ( SELECT p2.total

FROM 数据包为 p2 where ( ( @i := ( @i + 1 ) )

```

加载时间非常短：

```
设置@i = 0; 

SELECT * 

FROM packet as p1 

WHERE p1.id in ( SELECT p2.id

FROM 数据包为 p2 where ( ( @i := ( @i + 1 ) )

```

当 id 和 total 的值相同时会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T20:28:41.110

> 它们都是 bigint 长度 20 和主键

一个表中不能有两个主键。

你好像没有索引`packets.total`

创建它并查看它是否有帮助：

```
CREATE INDEX ix_packets_total ON packets (total) 
```

# javascript - 流体元素和溢出问题

> ID：723023
> 
> 赞同：0
> 
> 时间：2009-04-06T20:13:27.560
> 
> 标签：javascript, html, css, fluid

所以这是我碰到的一个树桩。

我正在设计一个……东西。它根据浏览器窗口调整大小，顶部有一些控件，底部附近有一个相当大的列表。无论如何，它基本上是一个与浏览器窗口大小一致的表格单元格，其大小是文档大小 - 高度为 130 像素，文档大小 - 宽度为 50 像素。我想要它做的是，当该单元格内的内容列表大于该单元格时，它会使用 css 的溢出变为滚动：自动。

问题是我无法做到这一点，只能让整个文档滚动。目前，该单元格除了 valign:top 之外没有其他属性，并且其中有一个 div（列表元素写入其中），并且它设置为 overflow:auto。但是，当列表变长时，它只会放大整个文档。

我不想给它一个静态大小，因为它与页面一起调整大小。

有任何想法吗？

谢谢！-戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T21:12:00.180

我不确定我是否理解正确，但这里有一个可能会给你一些想法的尝试。

```
<head>
<title>Test</title>
<style>
div.outer {
    background-color: red;
    position: absolute;
    top: 40px; 
    bottom: 40px;
    left: 40px;
    right: 40px;
}
div.inner {
    position: absolute;
    top: 0; 
    bottom: 0;
    left: 0;
    right: 0;
    overflow: auto;
    background-color: aqua;
}
</style>
</head>

<body>

<div class="outer">
<div class="inner">
On the Insert tab, the galleries include items that are designed to coordinate with the overall look of your document. You can use these galleries to insert tables, headers, footers, lists, cover pages, and other document building blocks. When you create pictures, charts, or diagrams, they also coordinate with your current document look.
You can easily change the formatting of selected text in the document text by choosing a look for the selected text from the Quick Styles gallery on the Home tab. You can also format text directly by using the other controls on the Home tab. Most controls offer a choice of using the look from the current theme or using a format that you specify directly.
To change the overall look of your document, choose new Theme elements on the Page Layout tab. To change the looks available in the Quick Style gallery, use the Change Current Quick Style Set command. Both the Themes gallery and the Quick Styles gallery provide reset commands so that you can always restore the look of your document to the original contained in your current template.
</div>
</div>

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T21:28:25.367

buti-oxa 的解决方案非常好，但在 Internet Explorer 中不起作用。对于跨浏览器解决方案，您需要为包含列表的 div 分配固定高度。您不能仅使用 css 来执行此操作，因为要分配的高度取决于浏览器窗口的高度。但是您可以使用一个简单的 javascript 函数动态地将高度分配给 div。这是一个使用 jQuery 的示例：

```
function resizeDiv(){
    var h = $(window).height(); //maybe the window height minus the header and footer height...
    $("#yourDivId").css("height", h + "px");
} 
```

您应该在页面加载和用户调整窗口大小时调用此函数：

```
$(document).ready(function(){

    resizeDiv();

    $(window).resize(function(){
        resizeDiv();
    });

 }); 
```

您可以在我发布的演示页面中看到这一点（调整窗口大小以进行测试）： [http ://www.meiaweb.com/test/BMS_DM_NI/](http://www.meiaweb.com/test/BMS_DM_NI/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T13:31:37.487

如果我没有错，并且您的内容只是文本，您可以添加 wrap 属性，尽管这在 Firefox 中不起作用，您可以将 wbr 添加到您的文本中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:10:40.130

我认为您应该考虑流畅的布局设计模式。

几个提示：

1.  **媒体查询**
2.  使用**%**而不是像**px这样的固定值**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-06T20:20:05.937

我认为 iFrame 会有所帮助。将您的“事物”放入基本 URL，然后使用带有 iFrame 的另一个页面来加载它。随着“东西”的大小变得疯狂，滚动条出现，但您的外页不受影响。

老式的框架也应该可以工作，但 iFrame 更有趣....

# database - ACCPAC 表

> ID：723028
> 
> 赞同：3
> 
> 时间：2009-04-06T20:14:23.407
> 
> 标签：database, accpac

我正在与 ACCPAC 合作，但没有任何文档的好处。

具体来说，我正在寻找：

*   阿库斯
*   ARIBD
*   阿里布
*   AROBL

如果你也能告诉我这些列是什么，那将是双重有益的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T20:37:48.517

希望这些对您有所帮助：

[http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARCUS](http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARCUS)
[http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARIBD](http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARIBD)
[http:// www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARIBH](http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=ARIBH)
[http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=AROBL](http://www.priceconsulting.ab.ca/cgi-bin/accpac.cgi?dat=AROBL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-03T22:50:13.720

如果您有权访问数据库，则应该有一个表列出所有表和描述，另一个表包含完整的字段列表。查找字段描述的 sysdflds 表和表描述的 sydtabl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:02:22.453

他们的疯狂是有办法的……

AH Sage Accpac HRMS 薪资链接 AP 应付帐款
AR 应收帐款
AS 行政服务 BK 银行服务
CP 加拿大薪资 CS 公共服务 CT Cdn PR 税务更新 2009 年 7 月 1 日
FA Sage FAS 集成
GL 总帐
GP G/L 分类帐服务
IC 库存控制OE 订单输入
PM 项目和作业成本核算
PO 采购订单
TX Tax Services
UP US Payroll
UT US PR Tax Update 2009 年 10 月 1 日
ZC G/L Consolidations
ZI Intercompany Transactions

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-19T00:13:42.003

您需要使用 Internet Explorer，对于 AR、OE 等所有模块。

[http://sageaom.kcsvar.com/AOM2012/Advantage.xml](http://sageaom.kcsvar.com/AOM2012/Advantage.xml)

您可以在此处找到所有 AR 表：

[http://sageaom.kcsvar.com/AOM2012/AR0036.xml](http://sageaom.kcsvar.com/AOM2012/AR0036.xml)

例如，AROBL： [http ://sageaom.kcsvar.com/AOM2012/AR.xml](http://sageaom.kcsvar.com/AOM2012/AR.xml)

# c# - 从极慢的 API 加载或缓存的最快方法？

> ID：723031
> 
> 赞同：2
> 
> 时间：2009-04-06T20:15:48.723
> 
> 标签：c#, itunes

我的 WPF 项目使用 iTunes API。在启动时，有几个后台线程负责将 iTunes 库从 API 加载到内存中（这是出于应用程序运行时的性能原因）。

但是，加载库非常缓慢。将近三分钟的时间。

最近，我尝试将库保存到 DataSet，这样加载时间会更快，并且我可以在应用程序运行后在后台更新 DataSet，但这也不起作用。它不会正确保存数据集。

我也尝试过使用本地 MDF 数据库，但由于我不记得的原因而出错了。

我认为主要的症结在于我需要保存 iTunesLib.IITTrack COM 对象。

我的问题是，我想，你们对如何更快地加载这个库有什么想法吗？我的想法不多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T20:21:52.593

> 但是，加载库非常缓慢。将近三分钟的时间。

加载时间有问题，我建议您分析代码并找到问题，它超出正常范围，要么是您的代码中的错误，要么是 iTunes api 中的错误。

我不了解 iTunes api，但因为它是一个 COM api，所以尝试将加载线程 [Tread.ApartmentState](http://msdn.microsoft.com/en-us/library/system.threading.thread.setapartmentstate.aspx)设置为 STA，以防 iTunes api 不使用 MTA 线程（这是 .net 线程的默认设置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-11T13:11:15.027

根据我的经验，从 iTunes COM 界面加载是一个缓慢的过程。我发现 iTunes 本身就是瓶颈，没有什么可以做的。

# .net - 在 64 位操作系统中运行 32 位 .NET 应用程序，真的很糟糕吗？

> ID：723038
> 
> 赞同：6
> 
> 时间：2009-04-06T20:18:28.857
> 
> 标签：.net, performance, 64-bit

我知道我们可以通过以 AnyCPU 为目标来编译 .NET 应用程序，这将导致在 32 位操作系统中运行 32 位，在 64 位操作系统中运行 64 位。

但是，在 64 位操作系统上报告了一个错误*，我的应用程序给出了错误以及解决方案，我需要以 x86 为目标。

现在我的问题是：即使您的代码将在 x64 中运行，以 x86 为目标真的很糟糕吗？我们在谈论什么样的表现？（我的应用程序是 CPU 密集型的，但真的很难想出）

毕竟 .NET Framework 将以 32 位运行，这对我来说听起来很糟糕，而不是充分利用 x64 CPU 的寻址能力**。

*我不记得该错误，但该解决方案专门针对 x86，并解决了该问题。

** 我不确定它是否重要，但我的应用程序不使用任何 Int64 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T20:21:38.570

不，还不错；事实上，对于我正在开发的应用程序，我*必须*以 x86 为目标（因为它引入了 COM 对象，供应商不支持 x64）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T20:21:30.863

我有一个大量使用 CPU 的数字运算应用程序（蛮力一些解决方案）。在 64 位 .NET Framework（8 秒）上运行它比 32 位（30 秒）快大约 4 倍。但这只是一个案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T20:24:39.453

不，需要在 x64 系统上定位 x86 并没有那么糟糕。您将错过额外的 x64 优势并最终在 32 位仿真层中运行。但这总比被完全破坏要好，而且大多数应用程序仍然是 32 位的。

使用 .Net，需要这样做的正常原因是依赖于仅本机 32 位 dll。如果您将 .Net 留在任何 cpu 中，它将尝试以 64 位模式加载您的 32 位 dll，从而导致崩溃。最终，您确实希望摆脱这种依赖关系，以便可以使用 64 位模式。但是对于一个版本，它不会杀死你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T20:31:39.123

答案是“视情况而定”。这取决于您的应用程序做什么，它是否大量访问内存。Kevin 是对的：处理器确实需要进行很多地址转换，但这可能不会对您的应用程序的性能造成太大影响。x86 和 amd64 之间的底层硬件指令基本相同，并且假设 CLR 作者知道他们在做什么（我相信他们知道），那里并没有太多的低效率。如果您正在执行图形操作，您可能会看到很大的性能差异，但由于这只是一个 .NET 应用程序，我认为您不会。对于某些数字运算任务，您可能会注意到 Mehrdad 提到的差异，但如果您这样做了，我会感到惊讶。

总而言之，除非你有一个性能敏感的应用程序，否则我会说不要担心性能问题。然后，只有在了解应用程序的性质后才担心性能问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T20:42:15.213

如果您使用结构分配，并且有很多 64 位计算（双倍、长），那么您会看到性能下降，因为 32 位 Jit 引擎与 64 位引擎相比不那么先进。

否则 .Net 的 32 位和 64 位版本在性能方面有些相似。

此外，如果您的进程不需要超过 2GB 的限制，则您**不需要**64 位的寻址功能，操作系统会使用称为[长模式](http://en.wikipedia.org/wiki/Long_mode)- 兼容性子模式的特殊 CPU 模式为您处理。（CPU实际上是运行在64位模式下，但是使用32位进行寻址，为了兼容）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T20:22:41.687

您必须记住的是，要让 32 位进程在 64 位环境中运行，系统必须对其所做的一切进行内存地址转换。不好吗？这取决于场景。它肯定没有它应有的效率。在 x-64 服务器上运行 32 位版本的 IIS 与它可能的速度相比非常慢。这完全取决于您对应用程序的需求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T20:23:59.780

不，它将毫无问题地运行。事实上，我们经常发现我们的 32 位应用程序在 64 位 Vista 上比在 32 位 Vista 上运行得更好，这要归功于更新的操作系统内存管理器。直接针对 x86 应该可以正常工作。但是，能够在 64 位上本地运行将具有其他优势，例如能够访问更多内存、更多 CPU 寄存器等，因此如果可能的话，值得努力启动和运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T20:26:55.610

我要说最好的方法来确定是否测量，但显然如果它不能正常运行，那么它有点难以测量。

首先看看是不是性能问题。如果这看起来是个问题，那么看看您是否可以查明应用程序中不符合 x64 的确切内容。大多数 .NET 代码应该是平台独立的，因此最有可能的罪魁祸首是任何本机互操作或 3rd 方库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T20:49:01.420

您的“错误”是否是您的 .NET 代码使用 32 位 COM 对象？

在使用 AnyCPU 设置编译的 64 位架构上运行 .NET 进程时，这种情况可能确实是个问题。

原因是该进程将作为 64 位进程执行，并且任何在进程中执行的 COM 组件也必须是 64 位版本。如果不是这种情况，您的进程将退出。

一种可能的解决方案是将目标平台设置为 x86。

# asp.net - ASP.NET MVC。不知道如何使用 Url.action 将对象传递给控制器

> ID：723044
> 
> 赞同：4
> 
> 时间：2009-04-06T20:20:30.693
> 
> 标签：asp.net, asp.net-mvc

我是 asp.net MVC 的新手。我能够创建我的视图并显示数据（Gridview）。此外，我能够创建一个超链接（使用 Url.Action）传递字符串和 int 类型。但是，我想创建一个引用更复杂类型的超链接。与我的视图关联的类具有对列表的引用。我想要的是在我的控制器中创建一个额外的 ActionResult 作为参数列表（见下文）

```
public ActionResult ViewItems(List<Items> c)
{            
    return View(c);
} 
```

我的想法是何时能够将该列表传递给控制器​​，然后控制器将调用相应的视图。我试过（见下文）但我只是空白。

```
<asp:HyperLink ID="LinkContractID" runat="server" NavigateUrl='<%#Url.Action("ViewItems", new {c = **((Contract)Container.DataItem).ContractItems.ToList<Items>(**)}) %>'
Text='<%# Eval("ContractId") %>'></asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T22:06:54.143

就像在上一个答案中一样，您不使用 asp 控件。Html.ActionLink 有利有弊，但是，如果您想在图像周围放置一个链接，它就不太好了。在这种情况下，语法将是

```
<a href="<%= Url.Action(
   "ShowListPage", "MyController", new { modelId = 101 }) %>">
   <img src="img.gif" />
</a> 
```

同样通过您在控制器中的操作，理想情况下，您希望执行此操作并让模型传递给对该模型进行强类型化的视图。因此，您有一个模型对象，其构造函数采用 id，例如

```
public MyModel(int modelId)
{
   this.TheListThatHoldsTheGridData = MyDataLayerProc(modelId);
} 
```

这样您就可以在 MyController 控制器中执行操作，像这样返回视图 ShowListPage（与 MyModel 实例相关联）

```
public ActionResult ShowListPage(int modelId)
{
   return View(new MyModel(modelId));
} 
```

希望这可以帮助，

标记

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T05:41:26.883

如果您正在寻找网格，[本教程](http://www.asp.net/learn/mvc/tutorial-26-cs.aspx)将展示如何使用 MVC 创建网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T06:12:00.197

使用 MVC，您不应该使用 Gridview 和 asp: 控件。如果要生成链接，只需使用 <%=Html.ActionLink(...) %> 和必要的参数。

# c# - Fluent Nhibernate 问题（ClassMap）

> ID：723050
> 
> 赞同：3
> 
> 时间：2009-04-06T20:21:39.617
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有以下 XML (.hbm)：

```
<property name="Geometry" column="the_geom">
   <type name="NHibernate.Spatial.Type.GeometryType,NHibernate.Spatial">
      <param name="subtype">MULTIPOLYGON</param>
      <param name="srid">-1</param>
   </type>
</property> 
```

它使用 Nhibernate Spatial 类型...如何使用 ClassMap (Fluent Nhibernate) 映射该属性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T21:09:20.037

好吧，我没有使用过 NHibernate Spatial，但我浏览了代码，它看起来像是`GeometryType`从 IUserType 继承的，所以你应该可以使用它`.CustomTypeIs<>`

例如：

```
Map(x => x.Geometry, "the_geom").CustomTypeIs<GeometryType>(); 
```

除非它自动发生，否则可能不会让您获得您的`param`元素。我不确定是否有一种真正好的方法来做到这一点，但您总是可以像这样添加 XML 更改：

```
Map(x => x.Geometry, "the_geom").AddAlteration(p => p.AddElement("type")
    .WithAtt("name", "NHibernate.Spatial.Type.GeometryType,NHibernate.Spatial")
        .AddElement("param")
            .WithAtt("name", "subtype")
            .WithText("MULTIPOLYGON")
        .ParentNode
        .AddElement("param")
            .WithAtt("name", "srid")
            .WithText("-1")
    ); 
```

请注意，要获得该`WithText`功能，您必须`XmlElement`像这样添加扩展（WithAtt 和 AddElement 是 Fl​​uentNHibernate.Mapping 命名空间中的扩展）：

```
public static class XmlExtensions
{
    public static XmlElement WithText(this XmlElement element, string text)
    {
        element.InnerText = text;
        return element;
    }
} 
```

# sql - 带有 SQL MIN() 和 GROUP BY 的额外字段

> ID：723054
> 
> 赞同：24
> 
> 时间：2009-04-06T20:22:17.523
> 
> 标签：sql, mysql, aggregate-functions

当使用 SQL MIN() 函数以及 GROUP BY 时，任何其他列（不是 MIN 列或 GROUP BY 列之一）是否与匹配的 MIN 行中的数据匹配？

例如，给定一个包含部门名称、员工姓名和薪水的表：

```
SELECT MIN(e.salary), e.* FROM employee e GROUP BY department 
```

显然我会得到两个很好的列，最低工资和部门。员工姓名（和任何其他员工字段）是否来自同一行？即具有 MIN(salary) 的行？

我知道很可能有两名员工的薪水相同（且最低），但我（现在）所关心的只是获取有关（或*一名*）最便宜员工的所有信息。

这会选择最便宜的推销员吗？

```
SELECT min(salary), e.* FROM employee e WHERE department = 'sales' 
```

本质上，我可以确定与 MIN() 函数一起返回的数据将与具有该最小值的（或*单个*）记录匹配吗？

如果数据库很重要，我正在使用 MySql。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-06T20:36:07.630

如果您想在每个部门中获得“最便宜”的员工，您将有两个选择：

```
SELECT
     E.*     -- Don't actually use *, list out all of your columns
FROM
     Employees E
INNER JOIN
     (
          SELECT
               department,
               MIN(salary) AS min_salary
          FROM
               Employees
          GROUP BY
               department
     ) AS SQ ON
     SQ.department = E.department AND
     SQ.min_salary = E.salary 
```

或者您可以使用：

```
SELECT
     E.*
FROM
     Employees E1
LEFT OUTER JOIN Employees E2 ON
     E2.department = E1.department AND
     E2.salary < E1.salary
WHERE
     E2.employee_id IS NULL -- You can use any NOT NULL column here 
```

第二个语句有效地告诉我，向我展示在同一部门找不到另一位薪水较低的员工的所有员工。

在这两种情况下，如果两名或多名员工的最低工资相同，您将获得他们（全部）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T20:25:44.783

```
SELECT  e.*
FROM    employee e
WHERE   e.id =
        (
        SELECT  id
        FROM    employee ei
        WHERE   ei.department = 'sales'
        ORDER BY
                e.salary
        LIMIT 1
        ) 
```

要获取每个部门的值，请使用：

```
SELECT  e.*
FROM    department d
LEFT JOIN
        employee e
ON   e.id =
        (
        SELECT  id
        FROM    employee ei
        WHERE   ei.department = d.id
        ORDER BY
                e.salary
        LIMIT 1
        ) 
```

要仅为那些有员工的部门获取值，请使用：

```
SELECT  e.*
FROM    (
        SELECT  DISTINCT eo.department
        FROM    employee eo
        ) d
JOIN
        employee e
ON   e.id =
        (
        SELECT  id
        FROM    employee ei
        WHERE   ei.department = d.department
        ORDER BY
                e.salary
        LIMIT 1
        ) 
```

当然，有一个索引`(department, salary)`将大大改善所有三个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T19:43:18.890

最快的解决方案：

```
SET @dep := '';
SELECT * FROM (
  SELECT * FROM `employee` ORDER BY `department`, `salary`
) AS t WHERE IF ( @dep = t.`department`, FALSE, ( @dep := t.`department` ) OR TRUE ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-20T22:02:35.250

另一种方法是使用分析函数。这是使用分析和 ROW_NUM 函数的查询

选择 first_name，salary from (select first_name,salary, Row_NUMBER() over (PARTITION BY DEPARTMENT_ID ORDER BY Salary ASC) as row_count from employees) where row_count=1;

# c# - 访问 XML 嵌入资源文件在发布模式下会引发错误，但在调试模式下不会

> ID：723055
> 
> 赞同：0
> 
> 时间：2009-04-06T20:22:17.553
> 
> 标签：c#, .net, visual-studio-2008, resources

.NET 3.5 Visual Studio 2008 团队版

我有一个 XML 文件，我已通过项目属性的 Resources 选项卡将其添加到程序集中；并将访问修饰符标记为公开。在调试模式下运行时，在另一个项目中引用程序集和嵌入资源没有问题，即

```
XElement errorMap = XElement.Parse( Properties.Resources.ErrorMapper ); 
```

但是，当项目在发布模式下运行时，我收到此错误：

> 无法加载文件或程序集“XXX.XXX，版本=1.1.0.25104，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

为什么项目在调试模式下运行良好但在发布模式下运行良好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T21:08:09.113

嗯……

我运行 64 位开发机器，并将构建和发布模式定位到 x86 平台。显然，当我添加资源文件时，发布模式的平台构建更改为任何 CPU。

由于我引用了一些需要 32 位的第 3 方 DLL，因此在发布模式下构建的任何 CPU 都被淘汰了。

问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T23:47:59.493

您是否引用了测试盒上的 .dll 文件，而该文件与您的生产盒上的位置不同？我想这取决于您是否将引用设置为复制本地...

你的 .net 框架和服务包呢，我会确保它们是相同的/最新的......

# version-control - 带有 Vault 的源中的文件版本号

> ID：723058
> 
> 赞同：0
> 
> 时间：2009-04-06T20:22:32.077
> 
> 标签：version-control, versioning

是否可以将 Vault 文件版本号添加到此文件的源中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T23:50:15.497

您可以使用`$Revision: $`在源文件的注释中指定修订号。您必须通过使用管理工具和更改存储库选项为存储库启用关键字扩展。在关键字扩展部分的关键字中勾选“启用关键字扩展”并列出文件类型，例如.txt等。

[关于打开关键字扩展的保险柜问答。](http://support.sourcegear.com/viewtopic.php?f=22&t=5988)

[VSS 的 MSDN 关键字列表](http://msdn.microsoft.com/en-us/library/d826hy97(VS.80).aspx)（与 Vault 使用的相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-20T02:34:02.847

除此之外，还有一个完整的关键字列表可以在 Vault 文档中使用。它们可以在这里找到[http://download.sourcegear.com/misc/vault/help/admin/keywordexpansion.html](http://download.sourcegear.com/misc/vault/help/admin/keywordexpansion.html)

# windows-services - Windows 服务，如何从 VS 安装项目中卸载？

> ID：723061
> 
> 赞同：2
> 
> 时间：2009-04-06T20:23:11.453
> 
> 标签：windows-services, project, uninstallation

我创建了一个 Windows 服务，效果很好，但是当我尝试安装该服务时，它删除了目录，但是，该服务没有被删除，当我再次尝试安装该服务时，它给了我一个错误 1001：服务已存在。我该如何解决？

而且，当我卸载项目时，是否有任何代码可以让我删除该服务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T20:38:34.410

您可以使用 installutil.exe 从命令行安装或卸载服务。

安装： installutil yourproject.exe

卸载： installutil /u yourproject.exe

您也可以从命令行使用 sc delete。单独键入 sc 以获取参数列表。

最后，如果您使用预定义的安装组件，您可以使用 ServiceInstaller.Uninstall() 方法。您必须从安装程序的卸载处理程序中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T20:36:07.787

看看[这个帖子](https://stackoverflow.com/questions/370940/visual-studio-2008-service-installer-project-upgrade-issue)。它引用了另一个，因此，在它们之间，它们可能有您的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T20:25:29.043

您可能需要从 [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services] 的注册表中删除它

# wpf - 具有固定宽度列的 WPF 树视图

> ID：723065
> 
> 赞同：8
> 
> 时间：2009-04-06T20:24:04.943
> 
> 标签：wpf, listview, treeview

我想创建一个树视图和一个列表视图的混合。我想要2列。在左列中，我想要一个递归树视图，右列应该显示有关左列项目的一些信息。让我们调用左列名称和右列值。问题是，当您展开树视图时，缩进级别会发生变化，并且值列变得不对齐。

我能想到的只是：

A: 使用内置的 TreeView 并根据缩进级别手动更改 Name-column 的宽度，以便 value-column 始终对齐。

B. 使用内置的 ListView 并通过在父项之间添加子项来手动创建 TreeView，并更改这些项的缩进。

真的没有更好的办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T20:58:36.657

有一种方法，我在一个 Silverlight 应用程序中有这样一个野兽

您需要调整 treeviewitem 的模板。默认模板不会一直延伸到整个树视图。

通过 tweeking 模板，您可以让它一直扩展，然后您可以将 DataTemplate（或 HierarchicalDataTemplate）设置为网格。如果我没记错的话，您需要获取 TreeviewItem 的默认模板的副本，并将“Header”元素的 Horizo​​ntalAlignment 属性更改为“Stretch”，删除构成模板的网格中最右边的列，然后更改包含从“自动”到“*”的元素的列的宽度。

使用混合很容易做到。创建一个 TreeViewItem，右键单击它并选择“编辑控件部件（“模板”）> 编辑副本...”这将为 TreeViewItem 创建一个默认模板的副本。从那里，找到名为 PART_Header 的 ContentPresenter。从这里开始，找到包含网格并修改其列以匹配我的解释（删除最后一列，将第二列从“自动”更改为“*”）。在为项目创建的样式中，将 Horizo​​ntalContentAlignment 设置为“Stretch”（默认情况下它绑定到其他东西）。

使用在树视图上创建为 ItemContainerStyle 的样式。之后，您可以删除您最初创建的 TreeViewItem。

最后，你应该得到一堆资源，其中之一就是你的风格。请参阅下文了解我的最终结果（TreeViewItem 样式和带有名称和值列的项目的基本 DataTemplate）。还创建了 TreeViewItem 样式/模板引用的其他资源，但此处未显示它们（因为它已经太长了：p）。

```
<Window.Resources>    
<Style x:Key="TreeViewItemStyle1" TargetType="{x:Type TreeViewItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding Path=VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="1,0,0,0"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="FocusVisualStyle" Value="{StaticResource TreeViewItemFocusVisual}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TreeViewItem}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MinWidth="19" Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <ToggleButton x:Name="Expander" Style="{StaticResource ExpandCollapseToggleStyle}" ClickMode="Press" IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"/>
                        <Border x:Name="Bd" SnapsToDevicePixels="true" Grid.Column="1" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" x:Name="PART_Header" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" ContentSource="Header"/>
                        </Border>
                        <ItemsPresenter x:Name="ItemsHost" Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="false">
                            <Setter Property="Visibility" TargetName="ItemsHost" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="false">
                            <Setter Property="Visibility" TargetName="Expander" Value="Hidden"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

        <HierarchicalDataTemplate x:Key="DataTemplate1"                                   
                                  ItemsSource="{Binding SubNodes}">
            <Grid Margin="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Grid.Column="1"
                           Text="HEADER"
                           TextWrapping="Wrap" />
                <TextBox HorizontalAlignment="Left"
                         Margin="2"
                         VerticalAlignment="Top"
                         Text="VALUE"
                         TextWrapping="Wrap"
                         Grid.Column="2" />
            </Grid>

</Window.Resources>

<TreeView HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch"
                  Width="Auto"
                  Height="Auto"
                  x:Name="trv"
          ItemContainerStyle="{StaticResource TreeViewItemStyle1}"
                  ItemTemplate="{DynamicResource DataTemplate1}">            
        </TreeView> 
```

请注意，您需要确保包含右侧单元格的网格列始终具有相同的宽度，否则您会有一些奇怪的东西（我使用具有固定宽度内容的“自动”列，我添加了一个空白“*”名称和“单元格”之间的列以使它们右对齐）。

另请注意，此解决方案基本上将树视图的外观“冻结”为您机器上的任何主题。（根据您进行修改时使用的操作系统，它在 Vista 和 XP 机器上看起来是一样的）。

# java - .NET GUI 组件是否支持 HTML（就像 Java swing 一样）？

> ID：723070
> 
> 赞同：1
> 
> 时间：2009-04-06T20:24:42.540
> 
> 标签：java, .net, html, winforms, swing

[HTML 可用于 Java swing GUI 组件](http://java.sun.com/docs/books/tutorial/uiswing/components/html.html)，如`JTextBox`, `JButton`, ... 等。

.NET (C#) WinForms 中是否有等价物？或者至少有一些简单的方法可以在不使用其他 GUI 组件的情况下在文本框中使单个单词**变为粗体？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T20:27:15.047

对于 .Net，您需要使用 RichTextbox 控件（和 rtf 格式）、嵌入 WebBrowser 控件或从文本框继承您自己的 OwnerDrawn 控件。

如果没有第三方控件可以为您执行最后一个选项，我会感到惊讶，但是对此没有“官方”，您必须自己评估它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T20:27:30.007

不，我认为您不能使用普通的 TextBox 或 Button 轻松做到这一点。有第三方控件可以做到这一点。WinForms 本质上不是一个非常可扩展的 GUI 框架。如果您正在寻找这种功能，WPF 是一件很棒的事情。WPF 几乎在任何地方都支持控件组合和样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T20:32:59.963

一种选择是使用 WPF TextBlock（我认为）控件，该控件支持HTML*等*基本格式（但不支持 HTML 标记本身）。

# unit-testing - URL解析测试套件

> ID：723083
> 
> 赞同：1
> 
> 时间：2009-04-06T20:27:43.237
> 
> 标签：unit-testing, url, parsing, standards-compliance, rfc3986

我需要测试一些*现有的* `http://`URL 解析代码是否符合[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)。

我不想重新发明轮子并碰到各种角落案例。

是否有一些现有的综合测试套件？

我没有指定我使用的语言，因为我希望测试套件足够通用以适应。不过，我愿意接受任何理智的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T21:03:38.843

[`Addressable`](http://Addressable.RubyForge.Org/)Ruby 库有一个非常全面的Spec [Suite](http://Addressable.RubyForge.Org/specdoc/)（618 个示例，123 个示例组中的 800 个期望值，超过 3700 个 SLOC），涵盖了 RfC3986 的大部分内容。代码在[这里](https://GitHub.Com/Sporkmonger/Addressable/blob/master/spec/addressable/uri_spec.rb)。我不确定您可以如何直接在您的库上运行它，也许您可​​以通过为您的库编写一个与 API 兼容的简单 Ruby 包装器来使其不加修改地工作？否则，规范的模式非常好，所以你应该能够通过一些简单的重命名方法重构和 Regexp-fu 走得更远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T20:55:43.917

这是[RFC 2396 的一小部分](http://lists.w3.org/Archives/Public/www-qa/2001Aug/0000.html)，我认为它来自[这里](http://www.w3.org/2004/04/uri-rel-test.html)，如果有帮助的话。还有[这个](http://skew.org/uri/uri_tests.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T20:53:01.257

嗯...解析 URL 现在几乎是一个已解决的问题。大多数主要语言都有一个 URI 类或函数，可以完成您需要的所有解析。你确定你真的需要自己动手吗？

以下是一些当今流行语言的 URI 模块的链接：

*   [爪哇](http://java.sun.com/j2se/1.4.2/docs/api/java/net/URI.html#method_summary)
*   [C#/.NET](http://msdn.microsoft.com/en-us/library/system.uri(VS.71).aspx)
*   [PHP](http://us2.php.net/function.parse-url)
*   [Python](http://docs.python.org/library/urlparse.html)
*   [红宝石](http://www.ruby-doc.org/core/classes/URI/Generic.html)

由于您正在测试现有代码，因此您可以使用这些类/函数作为该代码的预期值。只需建立一堆不同类型的有效和无效 URI，然后去镇上。

# sql - 在选择查询中获取表的最后一条记录

> ID：723101
> 
> 赞同：0
> 
> 时间：2009-04-06T20:33:50.147
> 
> 标签：sql, mysql

[这是我在获取最后一条记录插入到选择查询](https://stackoverflow.com/questions/717720/getting-the-last-record-inserted-into-a-select-query)时遇到的另一个问题的后续行动

我正在尝试编辑 Andrea 昨天很友好地帮助我的查询，该查询适用于一页，但我正在尝试创建一个类似的查询，但运气不佳。

我需要为每个版块显示版块名称、链接到该版块的主题和消息的数量以及最后一条消息的用户、主题和日期（确实有效）

我需要的是获取版块名称、主题和消息数

这是我的表结构

```
CREATE TABLE `boards` (
  `boardid` int(2) NOT NULL auto_increment,
  `boardname` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`boardid`)
);

CREATE TABLE `messages` (
  `messageid` int(6) NOT NULL auto_increment,
  `topicid` int(4) NOT NULL default '0',
  `message` text NOT NULL,
  `author` varchar(255) NOT NULL default '',
  `date` datetime(14) NOT NULL,
  PRIMARY KEY  (`messageid`)
);

CREATE TABLE `topics` (
  `topicid` int(4) NOT NULL auto_increment,
  `boardid` int(2) NOT NULL default '0',
  `topicname` varchar(255) NOT NULL default '',
  `author` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`topicid`)
); 
```

以及我根据 Andrea 为我所做的查询提出的查询。此查询在 boardname 中输出的内容、主题和消息的数量（即使有 5 个也显示为 1）、主题作者和消息计数（不需要）、最后一篇文章的作者和日期（需要) 但不是所需的主题名称

```
SELECT b.boardname, count( DISTINCT t.topicname ) AS topics, count( lm.message ) AS message, t.author as tauthor, 

      (select count(message) from messages m where m.topicid = t.topicid) AS messagecount, 
       lm.author as lauthor, lm.date
  FROM topics t
  INNER JOIN messages lm
    ON lm.topicid = t.topicid AND lm.date = (SELECT max(m2.date) from messages m2)
  INNER JOIN boards b
    ON b.boardid = t.boardid
  GROUP BY t.topicname 
```

这是我最初的查询，它做了我想要的，但得到了第一个帖子，而不是最后一个

```
SELECT b.boardid, b.boardname, count( DISTINCT t.topicname ) AS topics, count( m.message ) AS message, m.author AS author, m.date AS date, t.topicname AS topic
FROM boards b
INNER JOIN topics t ON t.boardid = b.boardid
INNER JOIN messages m ON t.topicid = m.topicid
INNER JOIN (

SELECT topicid, MAX( date ) AS maxdate
FROM messages
GROUP BY topicid
) test ON test.topicid = t.topicid
GROUP BY boardname
ORDER BY boardname 
```

对此非常感谢的任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T20:35:38.660

您需要根据 ORDER BY 子句定义“LAST”。完成此操作后，您只需反转订单方向并添加`LIMIT 1`到查询中即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T20:42:57.130

```
SELECT  b.*, m.*, t,*
        (
        SELECT  COUNT(*)
        FROM    topics ti
        WHERE   ti.boardid = b.boardid
        ) AS topiccount,
        (
        SELECT  COUNT(*)
        FROM    topics ti, messages mi
        WHERE   ti.boardid = b.boardid
                AND mi.topicid = ti.topicid
        ) AS messagecount
FROM    boards b
LEFT JOIN
        messages m
ON      m.messageid = (
        SELECT  mii.messageid
        FROM    topics tii, messages mii
        WHERE   tii.boardid = b.boardid
                AND mii.topicid = tii.topicid
        ORDER BY
                mii.date DESC
        LIMIT 1
        )
LEFT JOIN
        topics t
ON      t.topicid = m.topicid 
```

# reporting-services - SSRS 在报告末尾给出一个空白页

> ID：723103
> 
> 赞同：20
> 
> 时间：2009-04-06T20:34:47.447
> 
> 标签：reporting-services, reportingservices-2005

**在SSRS 2005**报告的末尾，我得到一个空白页。

我有一个页眉徽标和页脚日期值，并将两者都设置为**PrintOnLastPage = False**，但我仍然得到一个空白的最后一页。

任何想法如何消除它？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2011-06-27T19:17:01.450

此解决方案适用于 SSRS 2008 R2。我不确定早期版本。在 Report Properties 页面的 Other 类别下，将 ConsumeContainerWhitespace 设置为 True。

其他建议仍然适用：确保您的纸张大小可以包含报告宽度和边距。删除您的报告中可能存在的任何空白。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-26T21:44:49.807

设置`ConsumeContainerWhitespace`有效，但可能导致报告生成时间的灾难性增加，尤其是对于非常大的报告。

另一种解决方案如下，包括自己跟踪哪条记录是数据集中的最后一条记录。

# SQL - 跟踪行数与总行数

[![在此处输入图像描述](https://i.stack.imgur.com/ItX9l.jpg)](https://i.stack.imgur.com/ItX9l.jpg)

您可以使用上述技术来跟踪当前行数与总行数，只需确保您的“排序依据”机制与主选择语句的机制相匹配。

# 向除最后一条记录外的所有记录添加记录结束分页符

*   在报表正文的末尾添加一个垂直的小矩形
*   矩形属性 -> PageBreak -> BreakLocation -> End

现在，我们希望这个矩形在我们需要分页时可见，并且我们希望在我们不需要分页时隐藏它。

因此，在 Rectanble Properties (right click) -> Visibility -> Show or hide based on an expression -> Expression Edit

```
 =Fields!RowNumber.Value=Fields!TotalRows.Value 
```

**这将导致在每条记录的末尾出现分页符，最后一条记录除外**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T15:45:49.997

缩短报告的宽度，将右侧垂直边拖到左侧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-30T17:37:47.217

我有一份不断打印第二页的报告。其他人添加了 tablix 并为 tablix 设置了“分页符”END 属性。当我将其更改为 NONE 时，它解决了问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-18T22:20:03.150

添加到 MikeGee 的回答并考虑到这是一个非常古老的线程，我想我会加上我的 2 美分。为避免出现空白页，请将每个 tablix 的每个“BreakLocation”属性设置为“None”。有时它默认为“结束”，空白页的数量取决于报告中的 tablix 数量。例如，如果您的报表中有 3 个 tablix，并且每个 tablix 的“BreakLocation”属性设置为“End”，那么您将有 3 个空白页。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-18T19:08:10.710

I had a report containing a subReport. The subreport had a 'PageBreak' property with the 'BreakLocation' set to 'Start'. Changing it back to 'None' removed the blank page I was getting.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-11T21:08:06.407

`ConsumeContainerWhitespace`如果是 2008 R2，则设置为 True。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-23T14:12:08.753

我在最后一页上有一张图片，当它的尺寸设置为 210 毫米、297 毫米（A4）时，它会在报告的末尾产生一个空白页。但是当我将高度尺寸从 297mm 更改为*296.9mm*时，空白页消失了。这是使用VS2013。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2010-08-10T10:57:31.657

如上所述检查您的利润

+

如果您有一个 tablix 可以动态地将列添加到您的报告中，请检查您的 tablix 的“运行时宽度”是否在您的边距内。在运行时，它可能大于您在设计器中指定的 body-width。（注意：设计者无法做到这一点；尝试减小列的大小以查看空白页是否消失）。

# c# - 我可以在 C# 中将对象转换为它的泛型类型吗？

> ID：723104
> 
> 赞同：-1
> 
> 时间：2009-04-06T20:35:06.370
> 
> 标签：c#, generics, casting

很抱歉再次问这个问题。我已经在这里阅读了几个小时的相关主题，但仍然不太了解强制转换和泛型的一些问题。我正在尝试创建我们自己的 HashSet 类，因为我们还不能使用 .net 3.5。

错误出现在下面的 RetainAll 方法中。它编译得很好，但我得到一个运行时错误'无法将'System.Collections.DictionaryEntry'类型的对象转换为在foreach语句中键入'mycompany.UnivID'。

这是否意味着我不能将泛型对象转换为其实现类型？我尝试了几件事，例如

```
foreach ((T) obj in set) 
```

但他们不编译。

相关代码为：

```
public sealed class HashSet<T> : ISet<T> {

  private readonly Hashtable set;

  public HashSet() {
    this.set = new Hashtable();
  }

  public void RetainAll(ISet<T> c) {
    lock (set) {
      foreach (T obj in set) {
        if (!c.Contains(obj))
          this.set.Remove(obj);
      }
    }
  }
} 
```

实现类片段是

```
public sealed class UnivIDSet : ISet {
  private readonly ISet<UnivID> univIDs;

  public UnivIDSet() : base() {
    univIDs = new HashSet<UnivID>();
  }
} 
```

然后我们得到了我们的`UnivID`类，它们实际上是集合中的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T20:43:54.023

我认为

```
foreach (T obj in set) { 
```

应该

```
foreach (T obj in set.Values) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T20:44:57.983

When you enumerate a HashTable the type the enumerator returns is a DictionaryEntry. Read the Key and Value properties of this object to get what you need.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T20:48:18.723

Hashtables map keys to values. When you iterate over each item in the hashtable, that item is a key/value pair (that's what the DictionaryEntry class is). You probably want to iterate over the Keys property or the Values property instead, depending on how you entered things into the table.

Also note that the Dictionary class is the generic version of a hashtable, so it's probably worth building your HashSet on top of that instead.

# visual-studio-2008 - 为什么我的 Visual Studio 2008 停止识别 .aspx 和 .css 文件？

> ID：723105
> 
> 赞同：2
> 
> 时间：2009-04-06T20:35:35.650
> 
> 标签：visual-studio-2008

我今天格式化并重新安装了我的系统。我重新安装了 VS 2008，但我的所有 .aspx 页面不再突出显示语法（文本编辑器以纯黑色字体颜色显示它们）并且 IntelliSense 也无法在这些页面上工作。.css 文件也会出现字体颜色问题。

而且我在设计模式下也看不到 aspx 页面，只能在源代码模式下。

有谁知道发生了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T20:38:33.943

听起来安装可能不太顺利。尝试对安装进行修复。否则，请尝试在 [工具/导入导出设置] 菜单中重置您的 VS 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T20:37:32.620

您是否自定义安装？我不太了解 VS2008 的复杂性，但您是否可能不小心取消了某些 Web 创作组件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-14T21:26:07.270

我有一个相同的问题。但我的环境似乎有一天会在这种状态下自行醒来。从命令提示符运行以下命令为我解决了这个问题。

devev.exe /ResetSkipPkgs

# javascript - jquery - 从一个非常大的表中删除所有行的最快方法

> ID：723112
> 
> 赞同：103
> 
> 时间：2009-04-06T20:36:37.987
> 
> 标签：javascript, jquery, dom

我认为这可能是删除一个非常大的表（3000 行）内容的快速方法：

```
$jq("tbody", myTable).remove(); 
```

但是在Firefox中完成大约需要五秒钟。我在做一些愚蠢的事情吗（除了尝试将 3000 行加载到浏览器中）？有更快的方法吗？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2009-04-06T20:39:03.987

```
$("#your-table-id").empty(); 
```

这和你得到的一样快。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2011-11-10T11:04:13.350

最好避免任何类型的循环，只需像这样直接删除所有元素：

```
$("#mytable > tbody").html(""); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-06-18T18:27:30.080

```
$("#myTable > tbody").empty(); 
```

它不会触及标题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-11-07T22:19:13.413

使用 detach 比这里的任何其他答案都快：

```
$('#mytable').find('tbody').detach(); 
```

不要忘记将 tbody 元素放回表格中，因为 detach 删除了它：

```
$('#mytable').append($('<tbody>')); 
```

另请注意，说话时效率`$(target).find(child)`语法比`$(target > child)`. 为什么？ [咝咝咝！](https://learn.jquery.com/performance/optimize-selectors/)

**清空 3,161 个表行所用的时间**

**使用 Detach() 方法** （如我上面的示例所示）：

*   火狐：0.027s
*   铬：0.027s
*   边缘：1.73s
*   IE11：4.02s

**使用 empty() 方法：**

*   火狐：0.055s
*   铬：0.052s
*   边缘：137.99s（还不如被冻结）
*   IE11：冻结且永不返回

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-10T17:54:31.203

我可以在这里看到两个问题：

1.  jQuery 的 empty() 和 remove() 方法实际上做了很多工作。有关原因，请参阅 John Resig 的[JavaScript 函数调用分析](http://ejohn.org/blog/function-call-profiling/)。

2.  另一件事是，对于大量表格数据，您可能会考虑使用数据网格库（例如出色的[DataTables](http://www.datatables.net/)）从服务器动态加载数据，从而增加网络调用的数量，但减少这些调用的大小。我有一个非常复杂的表，有 1500 行，速度很慢，更改为基于 AJAX 的新表使相同的数据看起来相当快。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-28T09:29:03.307

这对我有用：

> 1-为每一行添加类“removeRow”
> 
> 2-在jQuery中

```
$(".removeRow").remove(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-10-06T05:27:21.337

如果你只想快速删除..你可以像下面这样..

```
$( "#tableId tbody tr" ).each( function(){
  this.parentNode.removeChild( this ); 
}); 
```

但是，表中可能有一些事件绑定元素，

在这种情况下，

上面的代码不能防止 IE 中的内存泄漏...... TT 而在 FF 中并不快......

对不起....

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-19T11:44:50.027

你可以试试这个...

```
var myTable= document.getElementById("myTable");
if(myTable== null)
    return;
var oTBody = myTable.getElementsByTagName("TBODY")[0];
if(oTBody== null)
    return;
try
{
    oTBody.innerHTML = "";
}
catch(e)
{
    for(var i=0, j=myTable.rows.length; i<j; i++)
        myTable.deleteRow(0);
} 
```

# metadata - 如何查看 Sybase 中的列元数据？

> ID：723115
> 
> 赞同：7
> 
> 时间：2009-04-06T20:37:42.557
> 
> 标签：metadata, sybase, sap-ase

我有一个同事给我的列列表，但这些列位于数据库的不同表中。Sybase 中是否有某种工具可以查询列所属的表？

（我试过用谷歌搜索这种工具，但到目前为止还没有运气）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T23:01:37.640

syscolumns 保存列元数据。

select * from syscolumns where name = ;

syscolumns 中的 id 列是该列的表的 id，在 sysobjects 中；

```
select b.name as tablename, a.name as columnname
from syscolumns a join systables b on (a.id = b.id) 
where b.type='U' and b.name = 'foo'; 
```

获取名为“foo”的表的所有列。type = 'U' 将其限制为用户表。

```
select b.name as tablename, a.name as columnname
from syscolumns a join systables b on (a.id = b.id) 
where b.type='U' and a.name = 'foo'; 
```

获取所有名为 'foo' 的列。

大多数当前版本的 ASE 将`sysbojects`使用`systables`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-02-07T22:44:01.597

我必须进行一些小改动才能使其正常工作：

```
select  b.name as tablename, 
        a.name as columnname
from    dbo.syscolumns a 
join    sysobjects     b on a.id = b.id
where   b.type='U' 
and     upper(a.name) like '%FOO%'      -- wildcard search for column name
and     b.name = 'bar'                  -- exclude tables
order by b.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T22:06:58.830

您可以在以下位置找到任何列的信息：

```
SELECT * 
  FROM sys.syscolumns 
```

如果您想知道列属于哪个表：

```
SELECT cname, tname 
  FROM sys.syscolumns
 WHERE tname IN ('col_1', 'col_2') 
```

^(注意：我在 Sybase ASA 9 中对此进行了测试。)

# asp.net - AJAX Toolkit 控件在设计器中显示错误

> ID：723128
> 
> 赞同：0
> 
> 时间：2009-04-06T20:40:22.143
> 
> 标签：asp.net, visual-studio, ajaxcontroltoolkit

我需要安装什么东西才能在 VS2008 的“设计”模式下获得 Ajax Toolkit 控件支持吗？此外，在 Ajax 控件中添加控件时，我似乎遇到了问题。他们不更新designer.cs 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-06-10T12:35:43.693

如果您在设计器模式下收到错误：“创建控件时出错；未知控件 'asp:TabContainer etc' 那么问题是损坏的 Asp.net 临时文件系统；

1.  关闭 Visual Studio 开发人员；

2.  要更正，请根据您使用的框架转到“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files”并删除此文件夹的内容。

3.  重启VS。它应该像魅力一样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T20:55:58.643

大多数 Ajax 工具包控件似乎在设计器中支持非常狡猾的拖放。如果要从工具箱中拖放控件，请尝试将它们拖放到源视图中。

我的建议是习惯于在源代码中工作，并放弃与设计师合作 - 它往往很慢而且有点不可靠。

# java - 在 VB.NET 中使用 AesCryptoServiceProvider

> ID：723129
> 
> 赞同：3
> 
> 时间：2009-04-06T20:41:15.450
> 
> 标签：java, vb.net, aes, encryption

我的问题实际上比如何在 VB.NET 中使用 AES 要复杂一些，因为我真正想要做的是在 JACOB 的 Java 应用程序中在 VB.NET 中使用 AES。但现在，我需要关注的是 AES 实现本身。

这是我的加密代码

```
Public Function EncryptAES(ByVal toEncrypt As String, ByVal key As String) As Byte()
    Dim keyArray = Convert.FromBase64String(key)
    Dim toEncryptArray = Encoding.Unicode.GetBytes(toEncrypt)

    Dim aes = New AesCryptoServiceProvider
    aes.Key = keyArray
    aes.Mode = CipherMode.ECB
    aes.Padding = PaddingMode.ISO10126
    Dim encryptor = aes.CreateEncryptor()

    Dim encrypted = encryptor.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length)
    aes.Clear()

    Return encrypted
End Function 
```

回到 Java 代码后，我将字节数组转换为十六进制字符串。

现在，为了扭转这个过程，这是我的解密代码

```
Public Function DecryptAES(ByVal toDecrypt As String, ByVal key As String) As Byte()
    Dim keyArray = Convert.FromBase64String(key)
    Dim toDecryptArray = Convert.FromBase64String(toDecrypt)

    Dim aes = New AesCryptoServiceProvider
    aes.Key = keyArray
    aes.Mode = CipherMode.ECB
    aes.Padding = PaddingMode.ISO10126
    Dim decryptor = aes.CreateDecryptor()

    Dim decrypted = decryptor.TransformFinalBlock(toDecryptArray, 0, toDecryptArray.Length)
    aes.Clear()
    Return decrypted
End Function 
```

当我运行解密代码时，我收到以下错误消息

> 填充无效且无法移除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T00:52:54.517

OK, so there were a couple of things wrong with my original code.

For one, no debugging. I had to add an internal test to verify that my code could encrypt and decrypt before wrapping it in Java. That was silly of me.

Two: the TransformFinalBlock method of both the encryptor and decryptor objects doesn't seem to perform as advertised.

Enough talk. Here's the code

```
Public Function EncryptAES(ByVal clearText As String, ByVal key As String) As String

    ' prepare input
    Dim keyBytes = Convert.FromBase64String(key)
    Dim sourceBytes = Encoding.Unicode.GetBytes(clearText)

    ' prepare encryption provider
    Dim aes = New AesCryptoServiceProvider
    aes.Key = keyBytes
    aes.Mode = CipherMode.ECB
    aes.Padding = PaddingMode.ISO10126
    Dim encryptor = aes.CreateEncryptor()

    Dim ms = New MemoryStream
    Dim cs = New CryptoStream(ms, encryptor, CryptoStreamMode.Write)
    cs.Write(sourceBytes, 0, sourceBytes.Length)
    cs.FlushFinalBlock()
    Dim encrypted = Convert.ToBase64String(ms.ToArray())

    'Dim decrypted = DecryptAES(encrypted, key)
    'If Not EventLog.SourceExists("CryptoBridge") Then
    '   EventLog.CreateEventSource("CryptoBridge", "CryptoBridge")
    'End If
    'Dim log As New EventLog
    'log.Source = "CryptoBridge"
    'log.WriteEntry(clearText & ":" & decrypted)

    aes.Clear()
    cs.Dispose()
    ms.Dispose()

    Return encrypted
End Function

Public Function DecryptAES(ByVal base64Cipher As String, ByVal key As String) As String
    Dim keyBytes = Convert.FromBase64String(key)
    Dim cipherBytes = Convert.FromBase64String(base64Cipher)

    ' prepare decryption provider
    Dim aes = New AesCryptoServiceProvider
    aes.Key = keyBytes
    aes.Mode = CipherMode.ECB
    aes.Padding = PaddingMode.ISO10126
    Dim decryptor = aes.CreateDecryptor()

    Dim ms = New MemoryStream(cipherBytes)
    Dim cs = New CryptoStream(ms, decryptor, CryptoStreamMode.Read)

    Dim decryptedBytes As Byte()
    ReDim decryptedBytes(cipherBytes.Length)

    Dim readByteCount = cs.Read(decryptedBytes, 0, decryptedBytes.Length)
    Dim decrypted = Encoding.Unicode.GetString(decryptedBytes, 0, readByteCount)

    aes.Clear()
    cs.Dispose()
    ms.Dispose()

    Return decrypted
End Function 
```

Next, I'll be modifying this code to bump up the AES algorithm to 256-bit and CBC cipher mode, which requires an initial vector (IV) value. This adds a level of complexity to the implementation that I wasn't ready to add until the rest worked 100% of the time.

Thanks to all those who commented on my issue.

# c# - Silverlight XAML 对象的二进制序列化

> ID：723142
> 
> 赞同：3
> 
> 时间：2009-04-06T20:43:58.453
> 
> 标签：c#, silverlight, xaml, silverlight-2.0

我正在开发需要显示复杂 2d 矢量图形的 Silverlight 应用程序。它从服务器下载压缩的 XAML 文件，对其进行解析 (XamlRead) 并注入到页面上的布局根目录。这适用于相当小的 xaml 文件。问题是我需要让它与更大的文件一起工作（里面有更多的内容）。例如，我的一个未压缩的 xaml 文件有 20 MB 大，而 XamlRead 方法需要很长时间才能解析它。我的问题是是否有办法在服务器端进行所有解析。最好将 XamlRead 方法的序列化二进制输出作为 BLOB 存储在数据库中。但是，当我尝试对其进行序列化时，我收到一条消息“画布对象未标记为可序列化”。我将非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T21:48:48.110

Silverlight 没有内置太多的二进制序列化；但是，[protobuf-net](http://code.google.com/p/protobuf-net/)可以在 Silverlight 上运行，可能有助于填补这一空白。在当前版本中，您只能真正序列化您控制的类型（由于添加了属性） - 但是，我正在进行一个大重构，以（除其他外）添加对没有属性的序列化类型的支持。

我预计还需要大约 2 周的时间才能将其作为（希望的）稳定版本提供，但届时欢迎您查看它。

请注意，您仍然需要给它一些帮助（告诉它您希望它序列化什么），但它可能很有用。

特别是，数据格式（“协议缓冲区”）被设计为既密集又高效的处理，这应该会提高解析速度。[有关更多信息，请参见此处](http://code.google.com/p/protobuf-net/wiki/Performance)（数字来自主要 .NET，而不是 Silverlight）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-03T18:33:46.600

我发现 SharpSerializer 包非常易于用于 Silverlight 中的快速二进制序列化：http: [//www.sharpserializer.com/en/index.html](http://www.sharpserializer.com/en/index.html)。您不需要使用 Serializable 属性——但它只对公共成员进行序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-20T18:32:23.267

如果解析确实是问题，使用称为“BAML”的预编译 XAML 可能会有所帮助。这是 XAML 文件的二进制表示。由于二进制格式有一个便宜得多的解析器，而不是过于通用的 XML，这很有帮助。.NET 编译器内部也使用 BAML 来生成更紧凑的文件。

有关更多信息，另请参阅[http://stuff.seans.com/2008/07/13/hello-wpf-world-part-2-why-xaml/](http://stuff.seans.com/2008/07/13/hello-wpf-world-part-2-why-xaml/)

# networking - SSH 和 SSL 之间的区别，特别是在“SFTP”与“FTP over SSL”方面

> ID：723152
> 
> 赞同：45
> 
> 时间：2009-04-06T20:47:05.747
> 
> 标签：networking

除了 SSH 提供的增强身份验证选项外，SSH 和 SSL 协议的基本工作方式有什么区别吗？

我在问，因为我们可以通过 SSL 使用[SFTP](https://en.wikipedia.org/wiki/File_Transfer_Protocol#Secure_FTP)或 FTP，两者都需要身份验证。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-06-13T15:40:40.380

## SSH 和 SSL 有什么区别，我们为什么要关心？

**SSL 代表“安全套接字层”**。我们关心，因为它使浏览器能够以安全的加密方式将数据传输到网络服务器或从网络服务器传输数据，从而使监控所有互联网流量的第三方间谍难以生存。

**SSH 代表“安全外壳”。** 我们之所以关心，是因为它使联网计算机 1 能够访问联网计算机 2 上的外壳。用户可以确信侦听不安全通道的间谍无法解密联网计算机之间发送的数据。

SSL 和 SSH 都与提供通过不安全通道加密和解密数据的系统有关。

当浏览器访问以“https://”开头的 URL 时，浏览器会通过 SSL 连接使用 HTTP。

启用 SSL 的 Web 服务器（例如[Apache HTTP Server](http://en.wikipedia.org/wiki/Apache_HTTP_Server)）可以配置为使用 SSL 成为“安全 Web 服务器”。由安全 Web 服务器提供的网站将导致用户通过“https://”协议而不是“http://”访问 URL。使用 https 协议，用户可以确信监控互联网频道的第三方间谍只会收到加密的内容。

SSL 是一种可以在[OSI 模型](https://en.wikipedia.org/wiki/OSI_model)的第 6 层（表示层）中实现的协议。

SSH 有自己的独立于 SSL 的传输协议，这意味着 SSH 在底层不使用 SSL。

在密码学上，安全外壳层和安全套接字层同样安全。

[SSL 终止代理](https://en.wikipedia.org/wiki/SSL_termination_proxy)可以处理传入的SSL 连接、解密 SSL 并将未加密的请求传递给其他服务器。

SSL 允许您通过签名证书使用[PKI（公钥基础设施） 。](http://en.wikipedia.org/wiki/Public-key_infrastructure)使用 SSH，您必须通过 ftp 或信鸽等其他协议手动交换密钥指纹。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-06T21:03:38.033

主要区别在于 SSL 允许您使用 PKI（通过签名证书）。在 SSH 中，您必须在带外交换密钥指纹。但无论如何，您可能希望不使用 PKI，在这种情况下，它是平局。

有关很好的解释，请参阅[http://www.snailbook.com/faq/ssl.auto.html](http://www.snailbook.com/faq/ssl.auto.html)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-04-08T13:06:32.157

SSH 和 SSL 是相似的协议，它们都在底层使用大多数相同的加密原语，因此它们彼此一样安全。SSH 的一个优点是使用密钥对身份验证实际上很容易做到，并且直接内置在协议中。

使用 SSL，涉及 CA 证书和其他东西有点混乱。安装 PKI 后，您还需要将服务配置为使用 PKI 进行身份验证，而不是使用其内部密码数据库；这对某些服务来说是一场噩梦，而对另一些服务来说则是小菜一碟。这也意味着您需要麻烦地签署所有用户的密钥，以便他们可以使用它们登录。

大多数有能力的用户都可以立即掌握 SSH 密钥，但了解 SSL 密钥需要更长的时间（当我第一次发现它时，额外的 CA 证书和密钥证书让我很困惑）。

选择可以支持的。SSH+SFTP 非常适合 Unix 用户，但是如果您的用户是基于 Windows 的并且对 Internet Exploiter 以外的任何东西都一无所知，那么通过 SSL 的 FTP 可能更容易实现（而且您不介意冒着用户选择不安全密码的风险）。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-06T20:54:52.030

在密码学上，它们都同样安全（假设使用相同的密码）。除此之外，它们是完全不同的协议......

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-17T07:30:29.610

首先，TLS 服务器身份验证是可选的，因为它的协议支持完全匿名的服务器身份验证。在 SSH 中，这是强制性的。

TLS 使用 X.509 证书进行客户端和服务器身份验证，这需要某种 PKI。SSH 在这一点上无法扩展，但提供了更广泛的身份验证方法：密码、公钥等。

另一个区别是SSH允许多个连接，并支持远程程序执行、终端管理、TCP隧道等。

# shell - 如何在模式前插入换行符？

> ID：723157
> 
> 赞同：147
> 
> 时间：2009-04-06T20:47:58.757
> 
> 标签：shell, sed

如何在一行中的模式之前插入换行符？

例如，这将在正则表达式模式*后面插入一个换行符。*

```
sed 's/regex/&\n/g' 
```

*我怎么能在模式前面*做同样的事情？

给定这个示例输入文件，要匹配的模式是电话号码。

```
some text (012)345-6789 
```

应该成为

```
some text
(012)345-6789 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-06-22T20:05:35.287

这适用于`bash`and `zsh`，在 Linux 和 OS X 上测试：

```
sed 's/regexp/\'$'\n/g' 
```

通常，for`$`后跟单引号中的字符串文字`bash`执行 C 样式的反斜杠替换，例如`$'\t'`被翻译为文字选项卡。另外， sed 希望你的换行文字用反斜杠转义，因此是`\`before `$`。最后，不应该引用美元符号本身，以便它被 shell 解释，因此我们在 the 之前关闭引用`$`，然后再次打开它。

**编辑**：正如@mklement0 评论中所建议的，这也有效：

```
sed $'s/regexp/\\\n/g' 
```

这里发生的是：整个 sed 命令现在是一个 C 样式的字符串，这意味着 sed 需要放置在新行文字之前的反斜杠现在应该用另一个反斜杠转义。虽然更具可读性，但在这种情况下，您将无法进行 shell 字符串替换（不会再次使其变得丑陋。）

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-04-06T21:06:07.637

其他一些答案不适用于我的 sed 版本。切换位置`&`并`\n`确实有效。

```
sed 's/regexp/\n&/g' 
```

编辑：这似乎不适用于 OS X，除非您安装`gnu-sed`.

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2009-04-06T20:50:27.160

在 sed 中，您不能轻易在输出流中添加换行符。您需要使用续行，这很尴尬，但它有效：

```
$ sed 's/regexp/\
&/' 
```

例子：

```
$ echo foo | sed 's/.*/\
&/'

foo 
```

有关详细信息，请参见[此处](http://www.grymoire.com/Unix/Sed.html#uh-nl)。如果您想要稍微不那么尴尬的东西，您可以尝试使用`perl -pe`匹配组而不是 sed：

```
$ echo foo | perl -pe 's/(.*)/\n$1/'

foo 
```

`$1`指正则表达式中的第一个匹配组，其中组在括号中。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2011-09-27T10:44:07.567

在我的 Mac 上，以下内容插入一个 'n' 而不是换行符：

```
sed 's/regexp/\n&/g' 
```

这替换为换行符：

```
sed "s/regexp/\\`echo -e '\n\r'`/g" 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-12-01T10:30:49.097

```
echo one,two,three | sed 's/,/\
/g' 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-05-21T17:44:38.537

您可以像使用 sed 一样使用 perl 单行语句，并具有完整的[perl 正则表达式](http://jkorpela.fi/perl/regexp.html)支持的优势（这比使用 sed 获得的功能强大得多）。*nix 平台之间的差异也很小 - perl 通常是 perl。因此，您不必担心如何使您的特定系统版本的 sed 执行您想要的操作。

在这种情况下，你可以做

```
perl -pe 's/(regex)/\n$1/' 
```

`-pe`将 perl 放入“执行和打印”循环中，很像 sed 的正常操作模式。

`'`引用其他所有内容，因此外壳不会干扰

`()`围绕正则表达式的是一个分组运算符。 `$1`在替换的右侧打印出这些括号内匹配的任何内容。

最后，`\n`是换行符。

无论您是否使用括号作为分组运算符，您都必须转义您尝试匹配的任何括号。因此，与您上面列出的模式匹配的正则表达式将类似于

```
\(\d\d\d\)\d\d\d-\d\d\d\d 
```

`\(`or`\)`匹配一个文字括号，并`\d`匹配一个数字。

更好的：

```
\(\d{3}\)\d{3}-\d{4} 
```

我想您可以弄清楚大括号中的数字在做什么。

此外，您可以为您的正则表达式使用除 / 以外的分隔符。所以如果你需要匹配 / 你不需要逃避它。以下任何一项都相当于我回答开头的正则表达式。理论上，您可以用 [任何字符](https://stackoverflow.com/questions/5770590/which-characters-can-be-used-as-regular-expression-delimiters)替换标准 / 的。

```
perl -pe 's#(regex)#\n$1#'
perl -pe 's{(regex)}{\n$1}' 
```

几个最后的想法。

using`-ne`而不是`-pe`类似的行为，但不会在最后自动打印。如果您想自己打印，它会很方便。例如，这是一个类似 grep 的（`m/foobar/`是一个正则表达式匹配）：

```
perl -ne 'if (m/foobar/) {print}' 
```

如果您发现处理换行符很麻烦，并且希望为您神奇地处理它，请添加`-l`. 不过，对于使用换行符的 OP 来说没有用。

额外提示 - 如果您安装了 pcre 包，它会附带`pcregrep`，它使用完全兼容 perl 的正则表达式。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-08-20T19:50:16.943

在这种情况下，我不使用 sed。我用 tr。

```
cat Somefile |tr ',' '\012' 
```

这需要逗号并将其替换为回车符。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-05-21T20:35:31.487

嗯，刚刚转义的换行符似乎在更新的版本中工作`sed`（我有 GNU sed 4.2.1），

```
dev:~/pg/services/places> echo 'foobar' | sed -r 's/(bar)/\n\1/;'
foo
bar 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-12-10T15:40:38.710

```
echo pattern | sed -E -e $'s/^(pattern)/\\\n\\1/' 
```

在 El Captitan 的`()`支持下运行良好

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-09-14T20:02:01.200

为了在 Linux 上的输出流中插入换行符，我使用了：

```
sed -i "s/def/abc\\\ndef/" file1 
```

在哪里`file1`：

```
def 
```

在 sed 就地替换之前，并且：

```
abc
def 
```

在 sed 就地替换之后。请注意使用`\\\n`. 如果模式`"`里面有一个，使用 . 转义`\"`。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-08-18T10:23:00.033

就我而言，以下方法有效。

```
sed -i 's/playstation/PS4/' input.txt 
```

可以写成：

```
sed -i 's/playstation/PS4\nplaystation/' input.txt 
```

***PS4
游戏机***

考虑在字符串文字中使用**\\n时使用它。**

*   **sed** : 是流编辑器

*   **-i** : 允许编辑源文件

*   **+**：是分隔符。

我希望以上信息对您有用。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-06T20:50:51.480

在 sed 中，您可以使用“\1”、“\2”、...来引用模式中的组。因此，如果您要查找的模式是“PATTERN”，并且您想在其前面插入“BEFORE” ，你可以使用，没有转义

```
sed 's/(PATTERN)/BEFORE\1/g' 
```

IE

```
 sed 's/\(PATTERN\)/BEFORE\1/g' 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-12-13T17:06:51.677

```
sed -e 's/regexp/\0\n/g' 
```

**\0**是空值，因此您的表达式被替换为空值（无），然后...
**\n**是新行

在某些风格的 Unix 上不起作用，但我认为这是解决您问题的方法。

```
echo "Hello" | sed -e 's/Hello/\0\ntmow/g'
Hello
tmow 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-07-28T08:32:25.293

您也可以使用 awk 执行此操作，`-v`用于提供模式：

```
awk -v patt="pattern" '$0 ~ patt {gsub(patt, "\n"patt)}1' file 
```

这将检查一行是否包含给定的模式。如果是这样，它会在它的开头附加一个新行。

看一个基本的例子：

```
$ cat file
hello
this is some pattern and we are going ahead
bye!
$ awk -v patt="pattern" '$0 ~ patt {gsub(patt, "\n"patt)}1' file
hello
this is some 
pattern and we are going ahead
bye! 
```

请注意，它将影响一行中的所有模式：

```
$ cat file
this pattern is some pattern and we are going ahead
$ awk -v patt="pattern" '$0 ~ patt {gsub(patt, "\n"patt)}1' d
this 
pattern is some 
pattern and we are going ahead 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-10-25T12:33:50.223

这适用于我的 MAC

```
sed -i.bak -e 's/regex/xregex/g' input.txt sed -i.bak -e 's/qregex/\'$'\nregex/g' input.txt 
```

Dono 是否是完美的...

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-25T13:34:51.840

在阅读了这个问题的所有答案后，我仍然尝试了很多次才能获得以下示例脚本的正确语法：

```
#!/bin/bash
# script: add_domain
# using fixed values instead of command line parameters $1, $2
# to show typical variable values in this example
ipaddr="127.0.0.1"
domain="example.com"
# no need to escape $ipaddr and $domain values if we use separate quotes.
sudo sed -i '$a \\n'"$ipaddr www.$domain $domain" /etc/hosts 
```

该脚本使用单个命令将换行符`\n`后跟另一行文本附加到文件末尾。`sed`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-11-01T17:03:27.203

在 Red Hat 上的 vi 中，我能够仅使用 \r 字符插入回车。我相信这在内部执行“ex”而不是“sed”，但它是相似的，vi 可以是另一种进行批量编辑（例如代码补丁）的方式。例如。我用一个 if 语句包围了一个搜索词，该语句坚持在大括号后回车：

```
:.,$s/\(my_function(.*)\)/if(!skip_option){\r\t\1\r\t}/ 
```

请注意，我还让它插入了一些标签以使事情更好地对齐。

# mysql - 在 MySQL 中动态选择列

> ID：723163
> 
> 赞同：2
> 
> 时间：2009-04-06T20:49:38.347
> 
> 标签：mysql

我知道如何将一个 MySQL 查询传递给另一个：

```
SELECT user_name FROM users WHERE user_id=( SELECT user_id FROM entries WHERE header="foo" ); 
```

出于纯粹的求知欲，我如何动态选择列或表？

前任：

```
SELECT ( 
    SELECT column_name FROM column_names WHERE id = 1 
) FROM ( 
    SELECT table_name FROM table_names WHERE id = 1 
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T21:09:45.817

使用准备好的语句：

```
mysql> SET @sql = CONCAT("SELECT", (SELECT"NOW()"));
查询正常，0 行受影响（0.00 秒）

mysql> 选择@sql;
+---------------+
| @sql |
+---------------+
| 立即选择（）|
+---------------+
一组中的 1 行（0.00 秒）

mysql>从@sql准备stmt；
查询正常，0 行受影响（0.00 秒）
准备好的声明

mysql> 执行 stmt;
+----------+
| 现在（）|
+----------+
| 2009-04-06 23:08:31 |
+----------+
一组中的 1 行（0.00 秒）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T20:53:05.657

我很确定这对于常规查询或视图是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T23:38:04.340

在回答您的第一个问题时，您应该了解如何使用`JOIN`SQL 进行操作。连接是 SQL 语言中的基本操作。理解如何用其他语言进行循环同样重要。

```
SELECT DISTINCT users.user_name
FROM users JOIN entries USING (user_id)
WHERE entries.header = 'foo'; 
```

关于您的第二个问题，不，您不能在单个语句中使表名或列名动态化。

但是，您可以在应用程序中编写代码，根据查找列名和表名，将 SQL 语句构建为字符串。然后将生成的字符串作为新的 SQL 查询执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T20:57:16.393

您可以通过查询 information_schema.columns 表来做到这一点。

这样做并检查结果。我不确定您要做什么，但该表包含与您的列相关的任何内容：

```
SELECT * FROM information_schema.`COLUMNS` C; 
```

顺便说一句，我不知道在单个查询中执行此操作的任何方法。您应该获取列信息，然后用您的编码语言创建一个新查询，无论是什么。

# actionscript-3 - 如何使用 ActionScript 3.0 停止使用 Loader 类动态加载的 SWF 影片？

> ID：723169
> 
> 赞同：2
> 
> 时间：2009-04-06T20:51:38.780
> 
> 标签：actionscript-3

影片剪辑(_loader.content).stop(); this.removeChild(_loader); _loader.unload(); _loader = null;

我一直在尝试，但这并没有停止这部电影。这部电影有一个嵌入的画外音，并且一直在播放。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-11T00:31:48.737

Flash 10 引入了 unloadAndStop(); （_loader.unloadAndStop() 如果它在您的示例中命名为 _loader）并且如果您使用的是 Flash 10，那么您应该使用它。

但 Adob​​e 在 AS3 中为 Flash 9 设计的最初想法是，加载的 swf 将是自力更生的，能够检测到它何时被移除并停止其内部的声音。在正在加载的 swf 中使用它，以便它可以检测到它何时从舞台上移除，从而关闭它自己的声音：

```
addEventListener(Event.REMOVED_FROM_STAGE, swfWasRemoved);

function swfWasRemoved(event: Event) : void
{
  // inside this function shut down the sound that is inside the swf
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T21:18:32.380

如果唯一剩下的正在播放的是声音，也可以用它[`SoundMixer.stopAll()`](http://livedocs.adobe.com/flex/2/langref/flash/media/SoundMixer.html#stopAll())来停止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T19:07:06.277

确保嵌入的画外音设置为流式传输。如果它是 on 事件，它将一直播放直到它完成，而不管 swf 的播放头。

# sql-server-2005 - 将数据从一个数据库复制到另一个？

> ID：723170
> 
> 赞同：5
> 
> 时间：2009-04-06T20:51:43.443
> 
> 标签：sql-server-2005

我正在将客户端应用程序升级到更新版本，数据库很接近但略有不同。我需要找到一种方法来将数据从一个数据库中的一个表转换并复制到新数据库中的另一个表。哦，天哪:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T20:54:07.960

```
INSERT INTO new_db.dbo.TableA
SELECT * FROM old_db.dbo.TableB 
```

如果表相同，这可能是最简单的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T20:52:56.997

[SQL Server 集成服务](http://msdn.microsoft.com/en-us/library/ms141026.aspx)（以前称为数据转换服务）是要走的路。

SQL Server 导入和导出数据向导非常适合简单的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T20:54:00.910

SQL Server 集成服务将是您最好的选择。如果您熟悉 SQL 2000 DTS 包，那么您应该不会很难搞清楚 SSIS 包。

# .net - 生成调试信息 (pdb) 是否会使我的应用程序在运行时变慢？

> ID：723171
> 
> 赞同：5
> 
> 时间：2009-04-06T20:51:56.267
> 
> 标签：.net, performance, debugging, pdb-files

在 .NET 应用程序中生成调试信息 (pdb) 使我的应用程序在运行时变慢？还是它们仅在应用程序崩溃时才起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T20:55:30.440

它们仅在程序崩溃时发挥作用。PDB 仅包含用于将运行时信息映射到对调试有用的源信息的信息。

但是，在调试模式和零售模式下构建程序可能会使其在运行时变慢。这与 PDB 无关 - 您可以为零售二进制文件生成调试信息并将其用于调试。为了使调试更容易，调试构建通常会进行不太积极的优化。

您应该始终生成 PDB，即使对于零售版本也是如此。零售构建通常是部署的，因此您将看到的许多问题都来自这些系统。

# visual-studio - 编译时的项目（bin）文件夹路径？

> ID：723172
> 
> 赞同：5
> 
> 时间：2009-04-06T20:52:28.357
> 
> 标签：visual-studio, visual-studio-2008, configuration, nunit, web-config

有没有办法在编译时找出项目路径？

我想创建一个单元测试来测试默认 web.config 中的配置（项目文件夹中的那个）。主要是减少人为错误。

我不能在运行时依赖程序集位置（用于测试），所以我需要知道项目文件夹在哪里才能访问那里的 web.config。

我需要一个“通用”解决方案，因为我想为多个项目使用相同的（基本）测试代码，而且大多数开发机器的物理位置都不同。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T23:20:18.983

根据 rkb 的回答，

听起来您有一个 C# 项目，请使用此构建后步骤。

```
echo namespace ProjectPath { static public class ProjectPath { public static readonly string Path = @"$(ProjectDir)";} } > $(ProjectDir)path.cs 
```

然后将 path.cs 作为现有项目包含到您的测试项目中。然后您可以通过以下方式访问它：

```
string path = ProjectPath.ProjectPath.Path; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T21:14:55.213

如果您想要 Visual Studio 项目路径，在编译时，您可以使用 Pre-Build Event（请参阅“项目属性”对话框）运行命令行，该命令行将创建项目中使用的源文件。

源文件将包含一些代码，比如变量定义。您的测试代码使用此变量。变量的值将来自VS；当它运行您的 Pre-Build Event 命令时，它会将项目属性替换为某些宏。您想要的宏可能是 ProjectDir。

所以最后，你的预构建事件的命令是这样的：

```
echo 'const char * PROJECT_PATH = "$(ProjectDir)";' > source.cpp 
```

不确定您使用的是什么语言，因此请进行相应调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T11:47:12.917

为了稍微改进解决方案，您可以在项目的 BeforeBuild Target 中将该命令作为 MSbuild Exec Task 运行，而不是使用 Post Build Event Command Line。

# php - 用 RegExps 替换 PHP 中包含的标签

> ID：723188
> 
> 赞同：0
> 
> 时间：2009-04-06T20:55:31.810
> 
> 标签：php, regex, preg-replace, preg-match

我需要读取一个字符串，检测一个 {VAR}，然后用 file_get_contents('VAR.php') 代替 {VAR}。“VAR”可以命名为任何名称，例如 TEST 或 CONTACT-FORM 等。我不想知道 VAR 是什么——不是要进行硬编码条件，而是只想看到一个大写字母数字标签花括号，只需执行 file_get_contents() 即可加载它。

我知道我需要使用 preg_match 和 preg_replace，但我在这方面的 RegExps 中磕磕绊绊。

这有什么用？它在挂钩 WordPress 时很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T21:03:32.930

你需要做很多事情。我假设您可以做一些工作来将要预处理的页面数据转换为字符串。

1.  首先，您需要正则表达式正确匹配。使用类似的东西应该相当容易`/{\w+}/`。

2.  接下来，您需要使用 preg_match 的所有标志来获取页面数据中的偏移位置。这个偏移量可以让你将字符串分成匹配的前、匹配和后部分。

3.  一旦你有了这 3 个部分，你需要运行你的包含，并将它们重新组合在一起。

4.  起泡，冲洗，重复。

5.  当您没有发现更多变量时停止。

这不是非常有效，并且可能有更好的方法。您可能希望考虑做一个 preg_split 代替，在`/[{}]/`. 无论您如何分割它，您都假设您可以信任您的传入数据，这将大大简化整个过程。为此，我会像这样布置代码：

1.  获取您的内容并像这样拆分它：`$parts = preg_split('/[{}]/', $page_string);`

2.  在具有以下条件的部分上编写递归函数：

    *   当 arg 的长度 < 3 时停止
    *   否则，返回一个由以下组成的新数组
    *   $arg[0] 。加载数据（$arg[1]）。$arg[2]
    *   加上 $argv[3...] 中剩下的东西
3.  在 $parts 上运行你的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T23:33:34.740

上面的 Orion 有一个正确的解决方案，但在您的简单情况下，实际上没有必要使用回调函数。

假设文件名是 AZ + 连字符，您可以使用正则表达式中的 PHP /e 标志在 1 行中执行此操作：

```
$str = preg_replace('/{([-A-Z]+)}/e', 'file_get_contents(\'$1.html\')', $str); 
```

这会将 {VAR} 的任何实例替换为 VAR.html 的内容。如果需要指定特定目录，可以在第二个术语中添加路径前缀。

存在与上述相同的模糊安全担忧，但我想不出任何具体的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T21:07:13.953

你可以在没有正则表达式的情况下做到这一点（上帝保佑），比如：

```
//return true if $str ends with $sub
function endsWith($str,$sub) {
    return ( substr( $str, strlen( $str ) - strlen( $sub ) ) === $sub );
}

$theStringWithVars = "blah.php cool.php awesome.php";
$sub = '.php';
$splitStr = split(" ", $theStringWithVars);
for($i=0;$i<count($splitStr);$i++) {
    if(endsWith(trim($splitStr[$i]),$sub)) {
        //file_get_contents($splitStr[$i]) etc...
    }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T21:08:16.447

在我的脑海中，你想要这个：

```
// load the "template" file
$input = file_get_contents($template_file_name);

// define a callback. Each time the regex matches something, it will call this function.
// whatever this function returns will be inserted as the replacement
function replaceCallback($matches){
  // match zero will be the entire match - eg {FOO}. 
  // match 1 will be just the bits inside the curly braces because of the grouping parens in the regex - eg FOO
  // convert it to lowercase and append ".html", so you're loading foo.html

  // then return the contents of that file.
  // BEWARE. GIANT MASSIVE SECURITY HOLES ABOUND. DO NOT DO THIS
  return file_get_contents( strtolower($matches[1]) . ".html" );
};
// run the actual replace method giving it our pattern, the callback, and the input file contents
$output = preg_replace_callback("\{([-A-Z]+)\}", replaceCallback, $input);

// todo: print the output 
```

**现在我将解释正则表达式**

```
 \{([-A-Z]+)\} 
```

*   并且只是告诉`\{`它`\}`匹配花括号。您需要斜杠，因为`{`和`}`是特殊字符，所以它们需要转义。
*   并`(`创建`)`一个分组。基本上，这可以让您提取匹配的特定部分。我在上面的函数中使用它来匹配大括号内的内容，而不匹配大括号本身。如果我不这样做，那么我需要从比赛中删除`{`和`}`退出，这会很烦人
*   说“`[-A-Z]`匹配任何大写字符，或`-`
*   `+`后面的意思`[-A-Z]`是我们需要至少有 1 个字符，但我们最多可以有任意数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T23:55:32.597

相对而言，正则表达式是昂贵的。虽然您可能需要它们来确定要加载哪些文件，但您当然不需要它们来进行替换，并且可能不应该使用正则表达式。毕竟，您确切地知道要替换什么，那么为什么需要模糊搜索呢？

使用关联数组和 str_replace 进行替换。str_replace 支持数组一次进行多次替换。一行替换，没有循环。

例如：

```
$substitutions = array('{VAR}'=>file_get_contents('VAR.php'),
'{TEST}'=>file_get_contents('TEST.php'),
...
);

$outputContents = str_replace(array_keys($substitutions), $substitutions, $outputContents);

```

# c# - Gridview 列删除

> ID：723194
> 
> 赞同：0
> 
> 时间：2009-04-06T20:56:02.793
> 
> 标签：c#, asp.net, gridview, field

我有一个正在开发的 Web 应用程序（ASP.NET 2.0 C#）。其中我有一个 GridView，其数据源是 Oracle 数据库。我将数据放入我的代码隐藏中的网格视图中，并且不直接设置数据源。

我想创建一个超链接字段 (NAME)，将我带到有关特定记录的详细信息页面。最终发生的是它创建了超链接字段以及它从数据源获取的常规字段，这是我不想要的。如果我从我的 SELECT 语句中删除该字段，它会给出一个错误，例如：在数据源中找不到“NAME”。

如何消除常规字段，并获得超链接字段？我试过`Gridview.Columns.Remove(columnlocation)`了，但这不起作用，因为这些列最初不存在。

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T21:06:58.103

不要删除列，而是禁用 gridview 的 AutoGenerateColumns 属性并像这样手动设置超链接列：

```
<asp:gridview id="GridView1" 
    autogeneratecolumns="false"
    runat="server">                
        <asp:HyperLinkField DataNavigateUrlFields="UserID" 
            DataNavigateUrlFormatString="UserDetails.aspx?id={0}"
            DataTextField="UserName" />
</asp:gridview> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T21:08:46.163

听起来您在网格上将[AutoGenerateColumns 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx)设置为 TRUE。这意味着为您从查询返回的每一列生成一列。

如果您想要一些自定义列，您应该设置 AutoGenerateColumns="false" 并将所有列添加到 GirdView 作为 asp:BoundField 和您的 Hyperlink 列作为 asp:TemplateField

让我知道我是否对此不满意

这是一些代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="Name" />
        <asp:BoundField DataField="Whatever" />
        <asp:TemplateField>
        <ItemTemplate>
        <a href='<%# Eval("UserId", "URL_TO_USER?userId={0}") %>'>Details</a>
        </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# sql - 我应该在 T-SQL 中使用 != 或 <> 表示不相等吗？

> ID：723195
> 
> 赞同：853
> 
> 时间：2009-04-06T20:56:15.100
> 
> 标签：sql, sql-server, tsql

我已经看到`SQL`使用 both`!=`和`<>`for ***not equal***。首选语法是什么，为什么？

我喜欢`!=`，因为`<>`让我想起了`Visual Basic`。

* * *

## 回答 #1

> 赞同：761
> 
> 时间：2009-04-06T22:02:31.603

大多数数据库都支持`!=`（流行的编程语言）和`<>`（ANSI）。

支持`!=`和的数据库`<>`：

*   MySQL 5.1：[`!=`和`<>`](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#operator_not-equal)
*   PostgreSQL 8.3：[`!=`和`<>`](http://www.postgresql.org/docs/current/static/functions-comparison.html#FUNCTIONS-COMPARISON-TABLE)
*   SQLite：[`!=`和`<>`](http://www.sqlite.org/lang_expr.html#binaryops)
*   Oracle 10g：[`!=`和`<>`](http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/conditions002.htm#CJAGAABC)
*   Microsoft SQL Server 2000/2005/2008/2012/2016：[`!=`](http://msdn.microsoft.com/en-us/library/ms190296.aspx)和[`<>`](http://msdn.microsoft.com/en-us/library/ms176020.aspx)
*   IBM Informix 动态服务器 10：[`!=`和`<>`](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst46.htm)
*   InterBase/火鸟：[`!=`和`<>`](http://www.ibphoenix.com/main.nfs?a=ibphoenix&s=1239054922:316459&page=ibp_60_sqlref)
*   Apache Derby 10.6：[`!=`和`<>`](http://db.apache.org/derby/docs/10.6/ref/rrefsqlj23075.html)
*   Sybase Adaptive Server Enterprise 11.0：[`!=`和`<>`](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.0/dbreference_en11/coco.html)
*   Mimer SQL 11.0：[`!=`和`<>`](https://docs.mimer.com/MimerSqlManual/v110/html/Manuals/App_deprecated/App_deprecated.htm)

支持 ANSI 标准运算符的数据库，**专门**：

*   IBM DB2 UDB 9.5：[`<>`](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/topic/db2/rbafzmstch2pred.htm)
*   微软访问 2010：[`<>`](http://office.microsoft.com/en-us/access-help/table-of-operators-HA010235862.aspx)

* * *

## 回答 #2

> 赞同：574
> 
> 时间：2009-04-06T21:29:28.330

从技术上讲，如果您使用的是 SQL Server AKA T-SQL，它们的功能相同。如果您在存储过程中使用它，则没有性能理由将其用于另一个。然后归结为个人喜好。我更喜欢使用 <>，因为它符合 ANSI。

您可以在以下位置找到各种 ANSI 标准的链接...

[http://en.wikipedia.org/wiki/SQL](http://en.wikipedia.org/wiki/SQL)

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2009-04-06T20:59:22.677

`'<>'`来自[SQL-92 标准](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)，`'!='`是[专有](http://msdn.microsoft.com/en-us/library/ms188074(SQL.90).aspx)的T-SQL 运算符。它也可以在其他数据库中使用，但由于它不是标准的，您必须根据具体情况进行处理。

在大多数情况下，您会知道要连接到哪个数据库，因此这不是真正的问题。在最坏的情况下，您可能必须在 SQL 中进行搜索和替换。

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2009-04-06T20:59:53.830

ANSI SQL 标准定义`<>`为“不等于”运算符，

[http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt) ( `5.2 <token> and <separator>`)

没有`!=`符合 ANSI/SQL 92 标准的运算符。

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2009-04-06T20:58:21.603

`<>`是根据 SQL-92 标准的有效 SQL。

[http://msdn.microsoft.com/en-us/library/aa276846(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa276846(SQL.80).aspx)

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2009-04-06T20:58:44.097

它们对于[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)都是有效且相同的，

[https://docs.microsoft.com/en-us/sql/t-sql/language-elements/not-equal-to-transact-sql-exclamation](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/not-equal-to-transact-sql-exclamation)

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2010-02-05T03:19:48.233

微软自己似乎更喜欢`<>`他们`!=`的表约束。我个人更喜欢使用`!=`，因为我清楚地将其读为“不等于”，但是如果您输入`[field1 != field2]`并将其保存为约束，下次查询时，它将显示为`[field1 <> field2]`. 这对我说，正确的做法是`<>`.

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2009-10-12T11:45:06.027

`!=`，尽管不是 ANSI，但更符合 SQL 作为一种可读语言的真正精神。它尖叫不相等。 `<>`说对我来说（小于，大于）这很奇怪。我知道其意图是小于或大于因此不相等，但这是一种非常复杂的方式来表达非常简单的事情。

出于一大堆愚蠢的原因，我只需要进行一些长 SQL 查询并将它们亲切地放入 XML 文件中，我将不再赘述。

可以说 XML 完全没有下降，`<>`我不得不将它们更改为`!=`并检查自己，然后才弄坏了自己。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2009-04-06T21:01:40.407

你可以在 T-SQL 中使用任何你喜欢的东西。[文档](http://msdn.microsoft.com/en-us/library/ms190296(SQL.90).aspx)说它们的功能相同。我更`!=`喜欢`<>`.

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2009-04-06T21:35:30.030

我知道 C 语法`!=`由于其 Unix 传统而存在于 SQL Server 中（早在 Sybase SQL Server 时代，Microsoft SQL Server 6.5 之前）。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-11-24T05:59:25.740

[一种替代方法是使用除Microsoft Docs 中](https://docs.microsoft.com/en-in/sql/t-sql/language-elements/nullif-transact-sql)的两个参数等于NULLIF以外的 NULLIF 运算符`<>`或返回 NULL 的运算符。所以我相信 WHERE 子句可以修改如下：`!=``<>``!=`

```
NULLIF(arg1, arg2) IS NOT NULL 
```

正如我发现的那样，在某些情况下，使用`<>`和`!=`不适用于日期。因此，使用上面的表达式是有必要的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-06-10T17:57:49.260

我更喜欢使用`!=`而不是`<>`因为有时我使用`<s></s>`语法来编写 SQL 命令。在这种情况下，使用`!=`更方便避免语法错误。

* * *

## 回答 #13

> 赞同：-6
> 
> 时间：2014-02-21T15:30:36.483

它们都在 T-SQL 中被接受。但是，似乎 using**`<>`比`!=`**. 我刚刚运行了一个正在使用的复杂查询，`!=`平均运行大约需要 16 秒。我将它们更改为`<>`，现在查询平均需要大约 4 秒才能运行。这是一个巨大的进步！

* * *

## 回答 #14

> 赞同：-15
> 
> 时间：2014-03-16T20:29:26.253

虽然它们的功能相同，但`!=`意味着完全“不等于”，而`<>`意味着大于和小于存储的值。

考虑`>=`or `<=`，当考虑到查询的索引时，这将是有意义的......`<>`在某些情况下（使用正确的索引）会运行得更快，但在其他一些情况下（无索引）它们会运行相同。

这还取决于您的数据库系统如何读取值`!=`和`<>`. 数据库提供者可能只是简化它并使它们功能相同，因此任何一种方式都没有任何好处。PostgreSQL 和 SQL Server 没有捷径；它按照上面显示的方式读取。

# eclipse - 为什么我的 Eclipse 项目有幻像调试器断点？

> ID：723199
> 
> 赞同：76
> 
> 时间：2009-04-06T20:57:50.167
> 
> 标签：eclipse, debugging, breakpoints

我有一个小项目，当在 Eclipse 调试器中运行时，它似乎总是停在 FileInputStream.class 第 106 行，打开文件。没有设置断点，但 Eclipse 的行为就像我在这里设置了断点一样。如果我清除所有断点，它仍然会发生。

我在同一个 Eclipse 工作区中有第二个更大的项目，它没有遇到这个问题。

我刚刚将较小的项目从我的旧 Linux 机器上移出，我在 Europa Eclipse 中开发它并遇到了这个问题，到我的新 Windows 机器上，我继续在 Ganymede Eclipse 中看到问题。这个问题在操作系统和 Eclipse 版本中仍然存在，但显然不是跨项目。我不明白！我浏览了该项目目录中的每个文件，但找不到任何可能以某种方式指示 Eclipse 在 FileInputStream 中停止的文件。

**更多信息**：明显的断点实际上不是 FileInputStream 的第 106 行；它似乎是 FileNotFoundException 的异常断点，是从 FileInputStream 中的该行调用的本机代码抛出的。但同样，我似乎根本没有设置任何断点。异常断点是否在其他地方定义？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-04-06T21:28:55.537

您是否尝试取消选择

```
Window > Preferences > Java > Debug : Suspend execution on uncaught exceptions 
```

? （例如[在这个线程中提到的](http://web.archive.org/web/20080913140934/http://dev.eclipse.org/newslists/news.eclipse.tools.jdt/msg20144.html)）

![替代文字](https://i.stack.imgur.com/Dd5kp.jpg)

**为什么 Eclipse 会这样工作？**

它[可以追溯到 2002 年](http://dev.eclipse.org/mhonarc/lists/jdt-debug-dev/msg00077.html)，当时断点对象层次结构已被剥离。

> 为了设置断点，对于旧 API，客户端需要 Java 模型对象 - 例如`IType`,`IField`等。
> 对于新 API，调试模型所需的只是类型名称、字段名称等。
> 
> 这允许客户端在 Java 模型对象不可用时设置断点。
> 客户端现在指定与断点关联的资源（在我们将其限制为关联的 Java 模型资源之前）。
> 
> **断点现在也可以“隐藏”**。也就是说，它们不需要向断点管理器注册。
> 断点也可以选择性地保留（标记只允许保留所有/不保留标记类型）。
> 这使调试模型更加灵活，并为客户端提供了更多构建块。
> 
> 这也简化了我们 Java 调试实现的某些部分——例如，**特性“ `suspend on any uncaught exception`”，只是为名为“ `java.lang.Throwable`”的类型设置断点，而不是`IType`特定项目中的特定**断点。
> **断点没有注册到断点管理器（即*隐藏*）——它只有一个客户端知道和使用**。
> 另一个例子是“ `run to line breakpoint`”。已`IJavaRunToLineBreakpoint`删除，因为不再需要其特殊功能。现在，Java 调试 ui 简单地创建了一个“行断点”，它是隐藏的、非持久化的，并且命中计数为 1。这是向客户端提供构建块的示例。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-03T22:39:48.843

我遇到了类似的问题，但接受的解决方案对我不起作用。我正在做 Eclipse Android 开发并设置了一些断点，后来又取消了它们。即使我禁用了它们，Eclipse 仍然在这些幻像断点处停止执行。我的解决方案是打开断点窗口：

窗口 > 显示视图 > 其他...

调试 > 断点

然后右键单击任何断点并选择“全部删除”

不幸的是，您必须重置所有有效断点，但这对我有用，并且避免了很多焦虑和挫败感。

一些指导他人的图片：

![将断点窗口添加到 Eclipse](https://i.stack.imgur.com/ZQKyS.png)

![全部删除（断点，右键单击）](https://i.stack.imgur.com/yUkRu.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-28T21:35:08.423

对于那些不认为其他解决方案有用的人，我找到了解决问题的个人解决方案。我使用一个 .jar 库，该库是通过在工作区中构建另一个项目而生成的。如果我在 .java 中将断点设置到库项目中，那么在调试最终项目时将触发断点。但是，当调试器暂停执行时**，会显示 .class 文件，该文件有自己的断点**，因此设置到 .java 文件中的断点不会在此处显示！

**解决方案：** 为了删除断点，您必须将断点删除到库项目中的 .java 文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-06T23:39:10.443

我遇到了一个问题，即源文件具有不存在的断点的持久标记。我尝试清理项目，进行完整构建，重新启动 Eclipse - 没有任何效果。

我深入研究了 Eclipse 元数据，并找到了项目的 .markers 文件。删除该文件最终解决了这个问题。

对于遇到此问题的其他人，请打开您的工作区目录，然后导航到 .metadata/.plugins/org.eclipse.core.resources/.projects/您的项目，然后重命名/删除文件 .markers。

例如，如果您的工作区文件夹是 ~/workspace，并且您的项目名为 Foo，您可以这样做：

```
$ mv ~/workspace/.metadata/.plugins/org.eclipse.core.resources/.projects/Foo/.markers ~/safe.Foo.markers 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-13T01:09:17.373

对于那些没有从之前的答案中找到解决方案的人，他们可以尝试解决我的问题。我认为类似于 HAL9000 问题/解决方案

如果您有两个具有相同名称的类（在两个不同的项目中），则断点在一个上，也应用在另一个上。它们都显示在“断点”窗口中。

**解决方案**：如果您从类中删除断点 - 具有相同的名称 - 您不使用它会从您正在调试的类中删除断点。

# javascript - 发送到 Web 客户端需要多少 JSON？

> ID：723206
> 
> 赞同：0
> 
> 时间：2009-04-06T20:59:35.420
> 
> 标签：javascript, performance, client

所以，我的问题有点基于经验，所以我想知道那些试图加载数据集的人，要加载的数据量是多少。我的用户有相对较大的管道​​，所以我不必担心调制解调器用户，但我确实关心处理时间。我猜我的限制在 300-1024k 范围内，但有没有人有办法或网站做了一些更明确的事情？

我遇到过这个资源。它是从 2005 年开始的，所以我认为它已经过时了，尽管一般的教训似乎很合理：

[http://blogs.nitobi.com/dave/2005/09/29/javascript-benchmarking-iv-json-revisited/](http://blogs.nitobi.com/dave/2005/09/29/javascript-benchmarking-iv-json-revisited/)

我也遇到了这个：

[http://www.jamesward.com/census/](http://www.jamesward.com/census/)

还有什么值得检查的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T21:03:21.823

一个典型的 JSON 数据包可以（并且应该）由 Web 服务器使用 gzip 压缩到大约 其初始大小的 10%。所以你真的在看30-100k。如果这些响应可以被缓存，那么问题就更小了。

传输的大小不应成为数据包是否“太多”的决定因素。相反，请查看浏览器处理此数据包需要多长时间（更新 UI 等）。

实际上解析 JSON 应该非常快，最多可以处理数兆字节的数据。将其转化为 UI 中的新内容在很大程度上取决于您生成的 HTML 的复杂程度。

# c# - 在 C# 中创建值列表的快速方法？

> ID：723211
> 
> 赞同：140
> 
> 时间：2009-04-06T21:00:00.787
> 
> 标签：c#, list

我正在寻找一种在 C# 中创建值列表的快速方法。在 Java 中，我经常使用下面的代码片段：

```
List<String> l = Arrays.asList("test1","test2","test3"); 
```

除了下面明显的之外，C# 中是否有任何等价物？

```
IList<string> l = new List<string>(new string[] {"test1","test2","test3"}); 
```

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2009-04-06T21:01:57.973

查看 C# 3.0 的[Collection Initializers](http://www.developer.com/net/csharp/article.php/3607421)。

```
var list = new List<string> { "test1", "test2", "test3" }; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-06T21:05:57.857

如果您想减少混乱，请考虑

```
var lst = new List<string> { "foo", "bar" }; 
```

这使用了 C# 3.0 的两个特性：类型推断（`var`关键字）和列表的集合初始值设定项。

或者，如果您可以使用数组，这甚至更短（少量）：

```
var arr = new [] { "foo", "bar" }; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-06T21:03:28.733

在 C# 3 中，您可以执行以下操作：

```
IList<string> l = new List<string> { "test1", "test2", "test3" }; 
```

这使用了 C# 3 中新的集合初始化器语法。

在 C# 2 中，我只会使用您的第二个选项。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-06T21:03:12.573

```
IList<string> list = new List<string> {"test1", "test2", "test3"} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-06-15T21:44:29.573

你可以这样做

```
var list = new List<string>{ "foo", "bar" }; 
```

以下是其他常见数据结构的一些其他常见实例：

字典

```
var dictionary = new Dictionary<string, string> 
{
    { "texas",   "TX" },
    { "utah",    "UT" },
    { "florida", "FL" }
}; 
```

数组列表

```
var array = new string[] { "foo", "bar" }; 
```

队列

```
var queque = new Queue<int>(new[] { 1, 2, 3 }); 
```

堆

```
var queque = new Stack<int>(new[] { 1, 2, 3 }); 
```

正如您所看到的，在大多数情况下，它只是在花括号中添加值，或者实例化一个新数组，然后是花括号和值。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-06T21:03:45.893

您可以删除该`new string[]`部分：

```
List<string> values = new List<string> { "one", "two", "three" }; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-06T21:03:31.013

您可以使用[集合初始化](http://msdn.microsoft.com/en-us/library/bb384062.aspx)程序在 C# 中稍微简化该行代码。

```
var lst = new List<string> {"test1","test2","test3"}; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-06-10T18:20:49.433

你可以：

```
var list = new List<string> { "red", "green", "blue" }; 
```

或者

```
List<string> list = new List<string> { "red", "green", "blue" }; 
```

签出：[对象和集合初始化器（C# 编程指南）](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/object-and-collection-initializers)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-15T14:39:33.167

您可以创建辅助通用静态方法来创建列表：

```
internal static class List
{
    public static List<T> Of<T>(params T[] args)
    {
        return new List<T>(args);
    }
} 
```

然后用法非常紧凑：

```
List.Of("test1", "test2", "test3") 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-25T21:53:45.373

如果你想创建一个带值的类型列表，这里是语法。

假设一类学生喜欢

```
public class Student {
   public int StudentID { get; set; }
   public string StudentName { get; set; }
 } 
```

你可以做一个这样的列表：

```
IList<Student> studentList = new List<Student>() { 
                new Student(){ StudentID=1, StudentName="Bill"},
                new Student(){ StudentID=2, StudentName="Steve"},
                new Student(){ StudentID=3, StudentName="Ram"},
                new Student(){ StudentID=1, StudentName="Moin"}
            }; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-11-11T08:52:42.943

如果我们假设有一个名为 Country 的类，那么我们可以这样做：

```
var countries = new List<Country>
{
    new Country { Id=1, Name="Germany", Code="De" },
    new Country { Id=2, Name="France",  Code="Fr" }
}; 
```

# c# - C#中的数独算法

> ID：723213
> 
> 赞同：5
> 
> 时间：2009-04-06T21:00:49.007
> 
> 标签：c#, linq, sudoku

我需要一个衬垫（或接近它）来验证给定的 9 个元素数组不包含重复数字 1、2、3、...、9。重复的零不算数（它们代表空单元格）。

到目前为止，我出来的最好的是：

```
var a = new int[9] {1,2,3,4,5,6,7,8,9};
var itIsOk = a.Join(a, i => i, j => j, (x, y) => x)
    .GroupBy(y => y).Where(g => g.Key > 0 && g.Count() > 1).Count() == 0; 
```

如果您不想解决我的问题:)，您至少可以判断上述算法是否正常工作吗？

而且，是的，一个已经读过[这个](https://stackoverflow.com/questions/289537/a-cool-algorithm-to-check-a-sudoku-field)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-07T01:02:03.140

这比 LINQ 解决方案快大约 50-250 倍（取决于多早发现重复项）：

```
public static bool IsValid(int[] values) {
    int flag = 0;
    foreach (int value in values) {
        if (value != 0) {
            int bit = 1 << value;
            if ((flag & bit) != 0) return false;
            flag |= bit;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-06T21:05:39.900

幸运的是，不久前我自己构建了一个数独求解器 :) 整个过程大约有 200 行 C#，它可以在 4 秒或更短的时间内解决我能找到的最棘手的难题。

由于使用了.Count，性能可能不是那么好，但它应该可以工作：

```
!a.Any(i => i != 0 && a.Where(j => j != 0 && i == j).Count >  1) 
```

此外，这`j != 0`部分并不是真正需要的，但它应该可以帮助事情运行得更快一些。

[编辑：] kvb的回答给了我另一个想法：

```
!a.Where(i => i != 0).GroupBy(i => i).Any(gp => gp.Count() > 1) 
```

在分组*前*过滤 0 。虽然基于 IEnumerable 的工作方式，但它可能无关紧要。

无论哪种方式，为了获得最佳性能，请`.Count > 1`使用如下所示的新 IEnumerable 扩展方法替换其中的任何一个：

```
bool MoreThanOne(this IEnumerable<T> enumerable, Predictate<T> pred)
{
    bool flag = false;
    foreach (T item in enumerable)
    {
       if (pred(item))
       {
          if (flag)
             return true;
          flag = true;
       }
    }
    return false;
} 
```

由于数组仅限于 9 个项目，因此它可能不会太重要，但如果你经常调用它，它可能会加起来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T21:10:51.993

`!a.GroupBy(i => i).Any(gp => gp.Key != 0 && gp.Count() > 1)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T21:58:53.237

为什么你想要一行错综复杂的 Linq 代码，而不是在扩展方法中封装测试的有效实现并调用它？

```
var a = new int[9] {1,2,3,4,5,6,7,8,9};
var itIsOk = a.HasNoNonZeroRepeats(); 
```

NoNonZeroRepeats 的一种实现可能是使用 short 的 9 个最低位来指示数组中是否存在值，从而在不使用动态内存的情况下进行 O(length(a)) 测试。Linq 很可爱，但除非您只是出于审美原因使用它（您没有特别说您正在编写一个仅使用 Linq 作为练习的数独求解器），否则它似乎只是在这里增加了复杂性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-28T22:37:41.987

这是一个老问题，但我最近被指出使用 Oracle 的自定义 SQL 进行树状结构的 1 行解决方案。我认为将其转换为 Linq 会很好。

您可以在我的博客上阅读有关如何[在 1 行 Linq 中解决数独的更多信息](http://jjasonclark.com/2009/solve-sudoku-in-1-line-of-linq/)

这是代码：

```
public static string SolveStrings(string Board)
{
    string[] leafNodesOfMoves = new string[] { Board };
    while ((leafNodesOfMoves.Length > 0) && (leafNodesOfMoves[0].IndexOf(' ') != -1))
    {
        leafNodesOfMoves = (
            from partialSolution in leafNodesOfMoves
            let index = partialSolution.IndexOf(' ')
            let column = index % 9
            let groupOf3 = index - (index % 27) + column - (index % 3)
            from searchLetter in "123456789"
            let InvalidPositions =
            from spaceToCheck in Enumerable.Range(0, 9)
            let IsInRow = partialSolution[index - column + spaceToCheck] == searchLetter
            let IsInColumn = partialSolution[column + (spaceToCheck * 9)] == searchLetter
            let IsInGroupBoxOf3x3 = partialSolution[groupOf3 + (spaceToCheck % 3) +
                (int)Math.Floor(spaceToCheck / 3f) * 9] == searchLetter
            where IsInRow || IsInColumn || IsInGroupBoxOf3x3
            select spaceToCheck
            where InvalidPositions.Count() == 0
            select partialSolution.Substring(0, index) + searchLetter + partialSolution.Substring(index + 1)
                ).ToArray();
    }
    return (leafNodesOfMoves.Length == 0)
        ? "No solution"
        : leafNodesOfMoves[0];
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-11-07T01:38:44.627

为了简洁，如果不是性能，如何 var itIsOk = a.Sum() == a.Distinct().Sum();

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T21:47:11.907

怎么样：

```
var itIsOk = a.Where(x => x > 0).Distinct().Count() == a.Where(x => x > 0).Count(); 
```

推理：首先创建一个没有0的枚举。在剩余的数字中，如果其不同的列表与实际列表的长度相同，则没有重复。

或者：如果唯一编号列表小于实际列表，那么您必须有一个重复编号。

这是单行版本。a.Where(x=>x>0) 列表可以被分解。

```
var nonZeroList = a.Where(x => x > 0).ToList();
var itIsOk = nonZeroList.Distinct().Count() == nonZeroList.Count(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-07T00:56:05.710

我通常对涉及捕获变量的解决方案皱眉头，但我有一种冲动要写这个：

```
bool hasRepeating = false;
int previous = 0;

int firstDuplicateValue = a
  .Where(i => i != 0)
  .OrderBy(i => i)
  .FirstOrDefault(i => 
  {
    hasRepeating = (i == previous);
    previous = i;
    return hasRepeating;
  });

if (hasRepeating)
{
  Console.WriteLine(firstDuplicateValue);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-24T19:11:30.660

以下简单快速。

```
if a.Select(i => Math.Pow(2, i - 1)).ToArray().Sum()==511 ... 
```

# sql - 为什么 SQL Server 将两个整数相除的结果四舍五入？

> ID：723215
> 
> 赞同：22
> 
> 时间：2009-04-06T21:01:24.480
> 
> 标签：sql, sql-server, rounding

我有一个带有 smallint 列的表，其中包含整数百分比（即 50、75、85 等）

当我将此列除以 100 时，如

```
SELECT MY_COLUMN/100 AS PCT_AS_FRACTION
FROM MY_TABLE 
```

结果四舍五入到最接近的整数。例如，对于包含数字“50”的行，我的结果是零。

我可以用一个简单的语句来复制它：

```
SELECT 50 / 100 AS TEST_VALUE 
```

为什么会这样，我怎样才能获得更精确的结果？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-06T21:03:42.213

当你进行整数除法（整数除以整数）时，你总是得到一个整数答案。50/100 = .50，以整数表示为 0。

您是否尝试过将 MY_COLUMN 除以 100.0？

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-06T21:05:05.050

投整数。

```
SELECT (cast(50 AS float)/100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T21:03:47.393

你正在做整数除法。50/100 为 0，余数为 50。

您需要使用浮点除法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-04T00:39:22.357

注意 - 请注意整数除法的余数未四舍五入。相反，它被丢弃了。这相当于调用 FLOOR sql 函数。

这很常见，并且这样定义是因为当两个整数相乘时，永远不会出现分数。因此，在乘以整数时从不假定使用分数处理方法，但对于整数除法则不能这样说。

在 SQL 中执行 dateTime 算术时，这通常会产生影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-12T16:06:18.917

当您使用[/(Divide)](http://msdn.microsoft.com/en-us/library/ms175009.aspx)运算符时

> 返回具有较高优先级的参数的数据类型。

和

> 如果整数被除数除以整数除数，则结果是一个整数，结果的任何小数部分都被截断。

因此，您需要将至少一个操作数转换为适当的类型：[十进制和数字](http://msdn.microsoft.com/en-us/library/ms187746.aspx)或[浮点或实数](http://msdn.microsoft.com/en-us/library/ms173773.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T21:45:19.773

您将 2 个整数相除，得到另一个整数。

应该也可以这样投

选择（50/100）：：数字；

# java - 使用瘦驱动程序的 jdbc 连接

> ID：723223
> 
> 赞同：1
> 
> 时间：2009-04-06T21:02:20.733
> 
> 标签：java, oracle, classpath, jdbc

我正在将 oracle 10g xe 与 java 连接，但出现异常 java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver

即使我已经包含了驱动程序的类路径，即 ojdbc14.jar
，如果我设置了错误的类路径，请告诉我设置类路径的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T09:34:28.087

请注意，运行**JAR**（双击“java -jar file.jar”）不使用 CLASSPATH 环境变量

[如何找到类](http://java.sun.com/javase/6/docs/technotes/tools/findingclasses.html)

在这种情况下 - 运行 JAR - 您必须在清单文件中设置 Class-Path 属性

[JAR 文件规范](http://java.sun.com/javase/6/docs/technotes/guides/jar/jar.html#JAR%20Manifest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-10T02:33:28.767

我想你想使用 oracle.jdbc.OracleDriver。我相信 oracle.jdbc.driver.OracleDriver 在 9i 和 10g 之间已被弃用和删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-11T07:38:03.487

我在 oracle app server 9.0.4 的一个名为 classes12.jar 的 jar 文件中找到了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T21:05:24.830

这取决于您如何运行您的应用程序。通常，您可以通过 env var CLASSPATH 或命令行开关 -cp 设置类路径。

请提供有关您的环境的更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-10T02:39:35.787

**如果您在Tomcat**中将应用程序作为 Web 应用程序运行，我相信**ojdbc14.jar**必须位于**{tomcat_home}/server/lib**中。那个或 {tomcat_home}/common/lib... 但我很确定它是 server/lib。

# datagrid - WPFtoolkit 及其 DatagridColumnHeader

> ID：723225
> 
> 赞同：0
> 
> 时间：2009-04-06T21:02:28.893
> 
> 标签：datagrid, header, wpftoolkit

我需要在我的数据网格中有不同的上下文菜单 - 一个用于其标题，一个用于网格行。所以我正在处理 MouseClick 事件，然后我需要评估鼠标光标的基础对象是否是 Datagrid 的标题。你能解释一下我怎么做这个吗？我无法理解的是，DataGrid 和 DataGridColumn 的对象层次结构都不包含 DataGridColumnHeader 对象或对它的任何引用。但是在虚拟树中，如果我得到位于标题中并包含列标题文本的文本块，然后得到它的父容器，我将得到 DatagridColumnHeader 对象。

任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-19T10:04:38.273

```
Private Sub DGrid_MouseLeftButtonDown(ByVal sender As System.Object, ByVal e As System.Windows.Input.MouseButtonEventArgs)
    Dim dep As DependencyObject = DirectCast(e.OriginalSource, DependencyObject)

    ' iteratively traverse the visual tree 
    While (dep IsNot Nothing) AndAlso Not (TypeOf dep Is DataGridRow OrElse TypeOf dep Is Primitives.DataGridColumnHeader OrElse TypeOf dep Is DataGrid)
        dep = VisualTreeHelper.GetParent(dep)
    End While

    If dep Is Nothing Then
        Exit Sub
    End If

    If TypeOf dep Is Primitives.DataGridColumnHeader Then
        Dim CurrentHeader As Primitives.DataGridColumnHeader = TryCast(dep, Primitives.DataGridColumnHeader)
        If Not CurrentHeader Is Nothing Then
            CurrentHeader.ContextMenu.Items.Add("Option")
        End If
    ElseIf TypeOf dep Is DataGridRow Then
        'Something else
    End If
End Sub 
```

# xslt - 在 XSLT 中生成新行

> ID：723226
> 
> 赞同：209
> 
> 时间：2009-04-06T21:02:41.280
> 
> 标签：xslt

我想为 XSLT 中的文本输出生成换行符。有任何想法吗？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2010-08-19T13:01:33.847

以下 XSL 代码将生成[换行符](http://en.wikipedia.org/wiki/Newline)（换行符）：

```
<xsl:text>&#xa;</xsl:text> 
```

对于[回车](http://en.wikipedia.org/wiki/Carriage_return)，请使用：

```
<xsl:text>&#xd;</xsl:text> 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-04-07T08:58:41.370

我最喜欢的方法是这样的：

```
<xsl:stylesheet>

<xsl:output method='text'/>

<xsl:variable name='newline'><xsl:text>
</xsl:text></xsl:variable>

<!-- note that the layout there is deliberate -->

...

</xsl:stylesheet> 
```

然后，每当您想输出换行符（可能在 csv 中）时，您都可以输出如下内容：

```
<xsl:value-of select="concat(elem1,elem2,elem3,$newline)" /> 
```

从 xml 输入输出 sql 时，我使用了这种技术。事实上，我倾向于为逗号、引号和换行符创建变量。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2009-04-06T21:07:05.717

在 xsl:output 标记上包含属性 Method="text" 并在 XSL 中的文字内容中的适当位置包含换行符。如果您希望保持 XSL 的源代码整洁，请使用`&#10;`您想要换行的实体。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2011-08-04T11:56:03.257

您可以使用：`<xsl:text>&#10;</xsl:text>`

看例子

```
<xsl:variable name="module-info">
  <xsl:value-of select="@name" /> = <xsl:value-of select="@rev" />
  <xsl:text>&#10;</xsl:text>
</xsl:variable> 
```

如果你把它写在文件中，例如

```
<redirect:write file="temp.prop" append="true">
  <xsl:value-of select="$module-info" />
</redirect:write> 
```

此变量将生成一个新行 infile 为：

```
commons-dbcp_commons-dbcp = 1.2.2
junit_junit = 4.4
org.easymock_easymock = 2.4 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-29T07:53:08.917

恕我直言，不需要比@Florjon 提供的更多信息。也许留下一些小细节来理解为什么它有时对我们不起作用。

首先，a 中的`&#xa`(hex) 或`&#10`(dec)`<xsl:text/>`将始终有效，但您可能看不到它。

1.  HTML 标记中没有换行符。使用简单的`<br/>`就可以了。否则你会看到一个空白。从浏览器查看源代码会告诉你到底发生了什么。但是，在某些情况下，您会期望这种行为，尤其是在消费者不是直接浏览器的情况下。例如，您想创建一个 HTML 页面，并在将其提供给浏览器之前查看其结构，并使用空行和标识很好地格式化。
2.  记住哪里需要使用`disable-output-escaping`，哪里不需要。以下面的示例为例，我必须从另一个 xml 中创建一个 xml，并从样式表中声明它的 DTD。

第一个版本确实转义了字符（默认为 xsl:text）

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes" encoding="utf-8"/>

    <xsl:template match="/">
        <xsl:text>&lt;!DOCTYPE Subscriptions SYSTEM "Subscriptions.dtd"&gt;&#xa;&#xa;&#xd;</xsl:text>
        <xsl:copy>
            <xsl:apply-templates select="*" mode="copy"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="@*|node()" mode="copy">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" mode="copy"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

结果如下：

```
<?xml version="1.0" encoding="utf-8"?>
&lt;!DOCTYPE Subscriptions SYSTEM "Subscriptions.dtd"&gt;

&#13;<Subscriptions>
    <User id="1"/>   
</Subscriptions> 
```

好的，它达到了我们的预期，转义是为了正确显示我们使用的字符。根节点内的 XML 部分格式由`ident="yes"`. **但仔细观察**，我们发现换行符`&#xa`并没有按原样转义和翻译，而是执行了双换行！我对此没有任何解释，很高兴知道。任何人？

第二个版本没有逃避角色，所以他们正在生产他们想要的东西。所做的更改是：

```
<xsl:text disable-output-escaping="yes">&lt;!DOCTYPE Subscriptions SYSTEM "Subscriptions.dtd"&gt;&#xa;&#xa;&#xd;</xsl:text> 
```

结果如下：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Subscriptions SYSTEM "Subscriptions.dtd">

<Subscriptions>
    <User id="1"/>   
</Subscriptions> 
```

没关系。cr 和 lf 都正确渲染。

3.  别忘了我们说的是`nl`，而不是`crlf`( `nl=lf`)。我的第一次尝试是仅使用 cr:`&#xd`并且输出 xml 已由 DOM 正确验证。

我正在查看损坏的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Subscriptions>riptions SYSTEM "Subscriptions.dtd">
    <User id="1"/>   
</Subscriptions> 
```

DOM 解析器忽略了控制字符，但渲染的却没有。在我意识到我没有看到这一点之前，我花了相当长的时间撞了头！

作为记录，我确实在体内使用了一个带有 CRLF 的变量，只是为了 100% 确保它可以在任何地方工作。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-27T13:48:12.983

你可以试试，

```
<xsl:text>&#xA;</xsl:text> 
```

它会起作用的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-07-18T18:54:27.413

我添加了`DOCTYPE`您在此处看到的指令：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [
  <!ENTITY nl "&#xa;">
]>
<xsl:stylesheet xmlns:x="http://www.w3.org/2005/02/query-test-XQTSCatalog"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="2.0"> 
```

这允许我使用`&nl;`而不是`&#xa;`在输出中生成换行符。与其他解决方案一样，这通常放置在`<xsl:text>`标签内。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-10-28T05:56:24.313

我支持 Nic Gibson 的方法，这一直是我最喜欢的：

```
<xsl:variable name='nl'><xsl:text>
</xsl:text></xsl:variable> 
```

但是，我一直在使用 Ant 任务 <echoxml> 创建样式表并针对文件运行它们。该任务将执行属性值模板，例如 ${DSTAMP} ，但也将重新格式化您的 xml，因此在某些情况下，实体引用更可取。

```
<xsl:variable name='nl'><xsl:text>&#xa;</xsl:text></xsl:variable> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-28T15:50:04.927

我发现文字换行符 in`<xsl:text>`和文字换行符使用`&#xA;`.

虽然文字换行符在我的环境中运行良好（同时使用 Saxon 和默认的 Java XSLT 处理器），但当另一个在 .NET 环境中运行的组执行时，我的代码失败了。

更改为实体 ( `&#xA;`) 使我的文件生成代码在 Java 和 .NET 上一致运行。

此外，文字换行符很容易被 IDE 重新格式化，并且当文件由“不知情的人”维护时可能会无意中丢失。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-29T14:55:02.523

我不能只使用这种`<xsl:text>&#xa;</xsl:text>`方法，因为如果我使用 XSLT 格式化 XML 文件，实体将会消失。所以我不得不使用稍微多一点的方法来使用变量

```
<xsl:variable name="nl" select="'&#10;'"/>
<xsl:template match="/">
    <xsl:value-of select="$nl" disable-output-escaping="no"/>
    <xsl:apply-templates select="*"/>
</xsl:template> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-10-07T07:36:51.140

根据我的经验，我注意到在**INSIDE** a`<xsl:variable>`子句中生成新行是行不通的。我试图做类似的事情：

```
<xsl:variable name="myVar">
  <xsl:choose>
    <xsl:when test="@myValue != ''">
      <xsl:text>My value: </xsl:text>
      <xsl:value-of select="@myValue" />
      <xsl:text></xsl:text> <!--NEW LINE-->
      <xsl:text>My other value: </xsl:text>
      <xsl:value-of select="@myOtherValue" />
    </xsl:when>
  </xsl:choose>
<xsl:variable>

<div>
  <xsl:value-of select="$myVar"/>
</div> 
```

我试图放入那个“新行”（空`<xsl:text>`节点）的任何东西都不起作用（包括这个页面中大多数更简单的建议），更不用说 HTML 在那里不起作用了，所以最终我必须将其拆分为 2 个变量，在`<xsl:variable>`范围之外调用它们并在它们之间放置一个简单`<br/>`的，即：

```
<xsl:variable name="myVar1">
  <xsl:choose>
    <xsl:when test="@myValue != ''">
      <xsl:text>My value: </xsl:text>
      <xsl:value-of select="@myValue" />
    </xsl:when>
  </xsl:choose>
<xsl:variable>

<xsl:variable name="myVar2">
  <xsl:choose>
    <xsl:when test="@myValue != ''">
      <xsl:text>My other value: </xsl:text>
      <xsl:value-of select="@myOtherValue" />
    </xsl:when>
  </xsl:choose>
<xsl:variable>

<div>
  <xsl:value-of select="$myVar1"/>
  <br/>
  <xsl:value-of select="$myVar2"/>
</div> 
```

是的，我知道，这不是最复杂的解决方案，但它确实有效，只是分享我对 XSL 的~~挫败~~体验；）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-13T09:31:14.720

```
<xsl:text xml:space="preserve">
</xsl:text> 
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2013-08-20T12:46:39.890

只需添加此标签：

```
<br/> 
```

这个对我有用 ;） 。

# wpf - WPF中的浮动子窗口

> ID：723239
> 
> 赞同：0
> 
> 时间：2009-04-06T21:04:42.773
> 
> 标签：wpf, xaml, .net-3.5

我想在 .NET 3.0 WPF 应用程序中创建浮动子窗口。我正在做的是：

```
sideWindow = new SideWindow(this);
sideWindow.Left = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width -    sideWindow.Width;
sideWindow.Top = 125;
sideWindow.WindowStartupLocation = WindowStartupLocation.Manual;
sideWindow.Owner = this;
sideWindow.Show(); 
```

除了一位客户外，这一切都很好。根据跟踪消息，创建了窗口，但客户端看不到它！

关于类似问题的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-01-30T11:31:15.670

我很惊讶这完全有效：`sideWindow.Width`当您检查它时应该是 NaN（不是数字），因为此时尚未执行布局传递。

您需要在 sideWindow 上调用 Measure/Arrange 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T21:44:46.157

您是否尝试过使用 WPF 本机：

```
System.Windows.SystemParameters.PrimaryScreenWidth 
```

我通常使用 SystemParameters.VirtualScreenWidth，它在双显示器上效果更好。

# licensing - 如何评估和定价软件（许可证）

> ID：723242
> 
> 赞同：11
> 
> 时间：2009-04-06T21:05:19.557
> 
> 标签：licensing

在我的公司，我们经常认为该软件与市场上的并发软件几乎相同。虽然这是我对其他（可能更具学术性的）价值方式感兴趣并为软件定价的一种方式。

有什么对你成功的想法或方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T21:08:59.190

虽然我并不总是乔尔的粉丝，但这篇 2004 年的[老文章](http://www.joelonsoftware.com/articles/CamelsandRubberDuckies.html)很好地回答了你的问题。您根据您认为以该价格出售的单位数量收费，以实现利润最大化。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-06T21:10:30.807

我过去做过一些合同工作，我的估计基于：

*   生产软件的工时成本，从开始到结束
*   客户通过使用该软件节省的潜在资金
*   任何计划的软件支持成本
*   任何其他相关费用，例如安装费、文件、培训等。

然后我将其与行业标准进行了比较。就我而言，它通常更便宜，而且我仍然赚钱。因此，客户和我自己都很高兴。

编辑：

请注意，上述方法适用于单个客户端，具有自定义软件解决方案和简单的无限制使用许可证。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T21:24:14.597

如果您想了解为产品定价的学术方法，我有一个 MBA，我想卖给您。

说真的，这取决于很多事情。您是在销售服务、订阅还是“盒子”？您想要的市场位置在哪里？您的客户必须花费什么？

倾听您的客户并准备好改变您的定价策略。如果您曾经听到客户说：“哇，我希望支付更多！”，可能是时候大幅提高您的价格了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T21:10:45.987

Magsto，我敢打赌，这个问题将很快被关闭，因为它“与编程无关”。

但是，我会告诉您，您的问题比这里可以回答的要复杂得多。有*很多*因素，包括上市时间、市场规模、您可以提供的投资回报率、竞争优势或劣势、支付结构（信用卡、采购订单、现金），甚至一年中的时间。我在这里只有经验，因为我经营自己的公司。

你真的想问*程序员*这个问题吗？我想不是...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T21:13:17.103

我将我的产品视为其对客户价值的一小部分。我的企业销售网络应用程序，因此略有不同，但如果网络应用程序可以从办公室的预算中减少价值 75K 的开销，我会收取 25K 的费用。

如果这是一次性销售，您可以选择检查客户以及它将为他们带来什么价值。如果它是公开销售的产品，则选项会非常不同。

基本公式是以大约 30% 的价格出售给客户/最终用户。如果您可以提供比下一家公司更好的质量，那么与他们同步定价是一个大错误，因为您可以通过推广证明成本合理的功能来赚更多钱并获得更好的市场份额。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T21:14:10.613

客户通常认为成本等于质量。如果您想将您的产品定位为最高质量的选择，您可能会考虑将定价比其他竞争对手高 20%。

产品的价格与利润最大化同样重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T21:19:14.423

您可能想阅读以下内容：
[保护 .NET 应用程序](https://stackoverflow.com/questions/651291/securing-a-net-application)

它有点长，但我确实在最后得到了一些定价。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T13:55:27.460

我是一名 IT 企业家，我的事业是网络和应用程序开发领域。当我们向客户交付任何产品时，我们会询问他们——使用我们的应用程序可以节省多少时间。-然后我们要求他们珍惜自己的时间。例如，他们在一小时内赚了多少钱 - 然后我们 **节省时间 * 时间价值（根据客户）** ，这些是一天的价值。我们进行了类似的计算，并向他们展示了他们在一个月和一年中节省了多少

此后，根据客户以及每月和每年节省的结果，我们为他们提供最终报价。

我们认为这是给软件定价的最佳方式，因为在这些过程中，我们根据软件帮助客户节省的资金来定价软件

我在网上浏览了一下，几乎所有的论坛都推荐了这本书，虽然我没有亲自看过这些书，但这里是下载链接

[不要只是掷骰子](http://neildavidson.com/download/dont-just-roll-the-dice/dontjustrollthedice/?forcedownload=true)

# mysql - 什么会导致查询在使用子查询时运行缓慢，但在单独运行时不会？

> ID：723250
> 
> 赞同：0
> 
> 时间：2009-04-06T21:07:11.457
> 
> 标签：mysql, subquery

我有类似以下内容：

```
SELECT c.id
FROM contact AS c
WHERE c.id IN (SELECT s.contact_id 
    FROM sub_table AS s
        LEFT JOIN contact_sub AS c2 ON (s.id = c2.sub_field)
    WHERE c2.phone LIKE '535%')
ORDER BY c.name 
```

问题是查询需要非常非常长的时间（> 2 分钟），但是如果我采用子查询，单独运行它，内爆 id 并将它们插入到主查询中，它的运行时间不到 1 秒，包括数据检索和内爆。

我已经检查了有关方法和密钥的说明是否正确使用并且方式相同。子查询返回的 ID 不超过 200 个。

什么可能导致子查询方法花费这么长时间？

顺便说一句，我知道上面的查询可以用连接编写，但我的查询不能——这只是一个简化版本。

使用 MySQL 5.0.22。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T21:12:57.247

听起来很像[MySQL bug #32665: Query withdependent subquery is too slow](http://bugs.mysql.com/bug.php?id=32665)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T21:36:38.093

如果你这样尝试会发生什么？

```
SELECT c.id
FROM contact AS c
INNER JOIN (SELECT s.contact_id 
    FROM sub_table AS s
        LEFT JOIN contact_sub AS c2 ON (s.id = c2.sub_field)
    WHERE c2.phone LIKE '535%') subq ON subq.contact_id=c.id
ORDER BY c.name 
```

假设 s.contact_id 的结果是唯一的。如果不是，您可以向子查询添加 distinct。

我总是以这种方式使用不相关的子查询，而不是在 where 子句中使用 IN 运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T21:11:28.980

您是否检查过查询的执行计划？这通常会向您显示问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T21:13:01.800

这是一个*相关*的子查询。它为外部选择中的*每一行*运行一次。（我想。你有两个具有相同相关名称的表，我假设这是一个错字。你说它不能被重写为连接意味着它是相关的。）

好的，我会给你一些东西来试试。您说子查询不相关，并且您仍然无法加入它。如果您获取子查询的输出，并在词法上将其替换为子查询，则主查询的运行速度要快得多。

所以试试这个：将子查询变成一个视图：`create view foo`后跟子查询的文本。然后重写主查询以摆脱“IN”子句，而是加入视图。

那个时间点怎么样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T21:16:08.080

你不能做另一个联接而不是子查询吗？

```
SELECT c.id
FROM contact AS c
JOIN sub_table AS s on c.id = s.contact_id
LEFT JOIN contact_sub AS cs ON (s.id = cs.sub_field)
WHERE cs.phone LIKE '535%'
ORDER BY c.name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T21:16:16.987

由于子查询引用`sub_field`外部选择中的字段，因此必须为外部表中的每一行运行一次 - 内部查询的结果将随着外部表中的每一行而改变。

# asp.net-mvc - 在 mvc.net 中重新路由回上一个控制器和操作

> ID：723271
> 
> 赞同：1
> 
> 时间：2009-04-06T21:13:09.023
> 
> 标签：asp.net-mvc

我有一个 UserController，它具有注册、登录、注销等方法。

在我的网站上，我有一个小的登录表单，我已将其作为部分视图制作，并且是母版页的一部分。我想要的行为是能够从任何视图登录，然后返回到我调用 Login 方法时所在的控制器。

我可以从任何地方调用这些方法就好了，但不知道该怎么做才能找出用户要重新路由回来的控制器和操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T21:16:29.763

使用 HTTP 请求中的 Referer 标头。在 PHP 中，您可以使用 $_SERVER['HTTP_REFERER']; 我不知道它是如何在 ASP.NET 中完成的，但如果你在 google 上搜索“HTTP Header Referer”应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T07:16:14.067

不保证会填充Referer，因为某些代理不发送它。所以我建议不要依赖它。

相反，当您将用户从受保护页面重定向到登录页面时，将他们所在的位置保存到 Session 对象、Viewdata 或 TempData 对象中。因此，您可以使用其中的值将他们重定向回他们成功登录时的位置。

# php - WordPress + mod_rewrite

> ID：723283
> 
> 赞同：0
> 
> 时间：2009-04-06T21:17:46.250
> 
> 标签：php, wordpress, mod-rewrite

我使用 Wordpress 作为 CMS，其中首页大部分是静态的，并且它的实际博客部分已移动到使用自定义页面模板的新页面，该模板基本上就像它是标准的首页WordPress 安装。它工作得很好，但仍然有一些错误。主要的一个是分页将不再起作用，Wordpress 将无法识别生成的页面 URL。

到目前为止，我已经将 Wordpress 配置为显示正确的 URL（domain.com/blog/page/2 而不是 domain.com/page/2），并且我还让它通过URL 参数 (domain.com/blog?page=N)。所以基本上我差不多完成了，我只需要将 domain.com/blog/page/N 映射到 domain.com/blog?page=N。如果它只是一个普通的旧静态站点，这将是一件容易的事，但 Wordpress 有它自己的 URL 处理，我认为这可能会干扰它 - 更不用说“博客”不是一个实际的 URL，所以它需要通过规则两次，一次用于映射博客分页，再一次是为了让 Wordpress 可以像往常一样处理生成的 URL……我想我可能需要使用 N 或 NS 标志来重写规则，但我只是不知道我会如何使用它们

我想出的规则：

```
RewriteRule ^/blog/page/([0-9]+)$ /blog?page=$1 
```

默认 Wordpress .htaccess：

```
RewriteEngine On  
RewriteBase /  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L] 
```

根据一些建议，我已经为 .htaccess 获得了这个，但它仍然无法识别它。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule /blog/page/([0-9]+)$ /blog?page=$1 [N,QSA]
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

而且我相当肯定通过 URL 参数更改页面确实有效 - 我手动更改了 URL 中的数字，它确实更改了页面。Web 服务器是 LiteSpeed，如果这有什么不同的话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T21:22:43.570

尝试以下

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule /blog/page/([0-9]+)$ /blog?page=$1 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-15T21:55:55.287

我最终想通了（几天后——直到现在我才忘记了这一点）。首先，确保您更新了 Wordpress。当时我使用的是 2.5 或 2.6，但由于某种原因，直到我更新它才起作用。

首先，创建一个自定义模板。您将使用此模板作为您的主页，以便自定义它和所有爵士乐。单独保留“主索引”（index.php）模板——该模板将用于博客索引页面，因此它需要 WP 循环来列出您的博客文章。

现在，去创建两个页面。一个用于您的主页（我们称其为“主页”），另一个用于您的博客（我们称其为“博客”）。在“主页”页面上，将模板设置为您之前创建的主页模板。在博客页面上，将其保留在默认模板上——默认情况下它将使用“主索引”模板。

现在，进入“阅读”设置并将其更改为“静态页面”。对于首页，选择您之前创建的“主页”页面。对于帖子页面，选择您创建的“博客”页面。

应该是这样的。我实际上之前已经尝试过，但它没有用，所以我尝试使用重定向规则，但无济于事。我最终成为一个过时的 WP 安装。如果您安装了站点地图模块，请确保排除“主页”页面，这样蜘蛛就不会在 example.com/home 上获取您主页的副本。您也可以将其放入您的 robots.txt 以确保。

Once you're done, the root (example.com/) of your domain (assuming you have WP installed there) will point to your "home" page. Your blog page (example.com/blog) will list your posts. Pagination will work as expected (example.com/blog/page/2 etc.).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T22:30:02.847

或者试试

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^blog/page/([0-9]+)$ /blog?page=$1 [NC,N]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [NC,L]
</IfModule> 
```

NC 使其不区分大小写，N 使其重新应用规则，L 停止规则处理。

# java - Vista系统上的请求队列有多长？

> ID：723287
> 
> 赞同：0
> 
> 时间：2009-04-06T21:19:43.267
> 
> 标签：java, networking, operating-system

我目前正在开发一个新项目，一个网络应用程序。但是出了点问题，我认为这是 Vistas 的错，当我对应用程序进行压力测试时，并不是所有的请求都得到了回答。

我唯一能想到的是传入请求的队列太长了，我用谷歌搜索了，但找不到队列有多长，只是它取决于操作系统。艰难，这可能只是因为我不知道它的“真实”名称；）

该项目是用 Java SE 编写的。

如果有人知道答案，我会很高兴，因为我自己在任何地方都找不到；）

更新：该应用程序只是一个宠物项目，完成后我不会在 Vista 机器上运行它。我什至一直在考虑在 Solaris 机器上运行它，只是为了尝试 Solaris:)

没有错误或任何东西，但请求计数器太低了。测试是从 Opera 完成的，每秒自动刷新 30 个标签。我知道，这不是正确的方法，但它有效:)

我不使用任何框架、EE 或任何东西，只使用纯 Java SE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T21:23:28.623

如果您正在编写服务器应用程序，但在 Vista 上运行它，您可能会遇到 Vista OS 上入站网络连接的硬限制。我已经看到允许同时连接 5（对于 Home Basic）到 25（对于 Business Pro 和 Ultimate）的数字。

Vista 并非设计为服务器操作系统。如果您想要更多的同时网络连接，并且想要运行 Windows，请获取其中一种 Windows Server 产品的许可证。或者，您可以在某些 *NIX 系统上运行。

# javascript - 在 onclick 处理程序中，如何检测是否按下了 shift？

> ID：723290
> 
> 赞同：36
> 
> 时间：2009-04-06T21:21:31.173
> 
> 标签：javascript

如何编写一个 onclick 处理程序，它为常规点击做一件事，而为 shift-clicks 做另一件事？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-04-06T21:26:07.197

您可以查看单击事件的 shiftKey 属性。

```
window.addEventListener("click",
  function(e) {
    if (e.shiftKey) console.log("Shift, yay!");
  },
  false);
```

```
<p>Click in here somewhere, then shift-click.</p>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-06T14:26:44.157

你需要确保你`event`作为参数传递给你的`onclick`函数。您也可以传递其他参数。

```
<html>
<head>
    <script type="text/javascript">
        function doSomething(event, chkbox)
        {
            if (event.shiftKey)
                alert('Shift key was pressed while picking ' + chkbox.value);
            else
                alert('You picked ' + chkbox.value);
        }
    </script>
</head>
<body>
    <h3>Pick a Color</h3>
    <input type="radio" name="myColors" onclick="doSomething(event, this)" value="Red" /> Red<br/>
    <input type="radio" name="myColors" onclick="doSomething(event, this)" value="Green" /> Green<br/>
    <input type="radio" name="myColors" onclick="doSomething(event, this)" value="Blue" /> Blue<br/>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T21:29:18.440

从 DOM 触发的事件应该包含一个`shiftKey`（或等效的）属性，指示触发事件时 shift 键的状态；例如，请参阅[https://developer.mozilla.org/en/DOM/event.shiftKey](https://developer.mozilla.org/en/DOM/event.shiftKey)。

如果您使用的是 JavaScript/DOM 包装库，例如 YUI、Prototype 或 jQuery，那么实现上的任何差异都应该不是问题。

# python - 在 Django 中使用 ManyToMany 插入对象

> ID：723293
> 
> 赞同：1
> 
> 时间：2009-04-06T21:23:22.977
> 
> 标签：python, django, many-to-many

我有一个类似博客的应用程序，其中包含故事和类别：

```
class Category(models.Model):
    ...
class Story(models.Model):
    categories = models.ManyToManyField(Category)
    ... 
```

现在我知道，当您保存具有多对多字段的模型的新实例时，会出现问题，因为该对象尚未在数据库中。这个问题通常表现在表单提交上，可以巧妙地使用`story_form.save(commit=False)`. 没有形式可言的情况呢？就我而言，我想构建一个 API 来接受远程提交。由于我喜欢 JSON，而且我们公司的许多其他消息都是 JSON 格式（包括来自该服务器的传出消息），我希望能够接收以下内容：

```
{ "operation": "INSERT",
  "values": [
            { "datatype": "story",
              "categories": [4,6,8],
              "id":50,
              ...
            }
            ]
} 
```

并实现一个将值转换为实例的工厂。但我希望工厂对操作类型尽可能不可知。所以：

```
{ "operation": "UPDATE",
  "values": [
            { "datatype": "story",
              "categories": [4,6,8],
              "id":50,
              ...
            }
            ]
} 
```

也应该以相同的方式转换，除了 INSERT 忽略 id 并且 UPDATE 获取已经存在的实例并覆盖它。（远程提交者侦听一个提要，除其他外，它还提供要缓存的类别对象，因此它可以而且必须通过 id 引用它们，但它与数据库没有任何直接通信。）

我真正的问题是：对涉及 ManyToManyManager 的 Django 模型对象的实例进行膨胀最简单的方法是什么。据我所知，任何插入具有多对多字段的对象都需要两次数据库命中，因为必须首先获得一个新的 id。但我目前尴尬的解决方案是立即保存对象并将其标记为隐藏，以便后续功能可以使用它并将其保存为更有意义的东西。似乎上一步将被覆盖`save`，以便没有 id 的对象保存一次，将一些代理字段复制到`categories`，然后再次保存。最重要的是一些强大的管理器对象可以为我省去麻烦。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T22:34:55.490

“据我所知，任何插入具有多对多字段的对象都需要两次数据库命中，......”

所以呢？

微观管理每个单独的数据库访问通常不值得考虑。做最简单、最明显的事情，以便 Django 可以为您优化缓存。

您的应用程序性能——通常——主要由下载到浏览器的速度慢，以及页面中的所有 JPEGS、CSS 和其他静态内容支配。

花在思考如何在不进行两次数据库访问的情况下创建两个主键（对于多对多关系）上的时间不会得到很好的回报。两个 PK 通常是两个数据库访问。

* * *

**编辑**

“......在错误中乱扔数据库......”

Django 有事务。请参阅[http://docs.djangoproject.com/en/dev/topics/db/transactions/#managing-database-transactions](http://docs.djangoproject.com/en/dev/topics/db/transactions/#managing-database-transactions)。使用`@transaction.commit_manually`装饰器。

“强制验证将在以后发生”

没有意义 - 更新您的问题以解释这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T23:04:11.940

我评论了 S.Lott 的帖子，我觉得他的回答是最好的。他是对的：如果目标只是避免两次数据库命中，那么您将陷入一个不必要的痛苦世界。

但是，阅读您对 ModelForm 的引用，如果您正在寻找一种解决方案，可以让您以某种方式推迟官方保存，您可能希望查看`save_instance()`. `forms.models`内部功能`save_m2m`是如何为表单完成延迟的多对多保存。为没有表单的模型实现一些东西基本上遵循相同的原则。

话虽如此，回到 S.Lott 的帖子，ModelForm 和实际 Model 的情况有些不同。因为表单只公开了要在浏览器中编辑的“安全”数据集（“安全”是因为它以某种方式被过滤，或者排除了用户不应该编辑的关键字段），所以合理的设计期望是有人可能需要在保存之前向表单派生模型添加重要信息。这就是为什么 django 有`commit=False`.

对于直接实例化模型的情况，这种期望会下降。在这里，您可以对模型 API 进行编程访问，因此您可能会发现直接使用该 API 比通过通用间接方式更易于维护且不易出错。我可以理解您为什么要描绘工厂概念，但在这种情况下，您可能会发现为各种模型创建防弹泛化的努力是不值得的复杂化。

# delphi - Delphi 2009 编译器如何处理递归内联方法？

> ID：723309
> 
> 赞同：4
> 
> 时间：2009-04-06T21:26:46.417
> 
> 标签：delphi, recursion, delphi-2009, inline-method

“[使用内联函数有什么问题](https://stackoverflow.com/questions/60830/what-is-wrong-with-using-inline-functions)”和“[递归函数可以内联](https://stackoverflow.com/questions/190232/can-a-recursive-function-be-inline)”是否适用于 Delphi 内联函数？此外，有谁知道在 Delphi 中如何处理递归内联函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-08T00:05:09.087

我的猜测可能不是因为 inline 只是一个建议，但让我们找出答案。

一个简单的递归阶乘例程：

```
function Factorial(const aNum: cardinal): cardinal;
begin
  if aNum > 1 then
    Result := Factorial(aNum - 1) * aNum
  else
    Result := 1;
end; 
```

这是对它的调用的反汇编：

```
// fact := Factorial(5);
mov eax,$00000005
call Factorial
mov ebx,eax 
```

以及例程本身的反汇编：

```
// 9: begin
push ebx
mov ebx,eax
// 10: if aNum > 1 then
cmp ebx,$01
jbe $0040ab30
// 11: Result := Factorial(aNum - 1) * aNum
mov eax,ebx
dec eax
call Factorial
imul ebx
pop ebx
ret 
// 13: Result := 1;
0040ab30: mov eax,$00000001
// 14: end;
pop ebx
ret 
```

现在我们让它**内联**，看看调用中有什么不同：

```
// 21: fact := Factorial(5);
mov eax,$00000005
call Factorial
mov ebx,eax 
```

而例程本身：

```
// 9: begin
push ebx
mov ebx,eax
// 10: if aNum > 1 then
cmp ebx,$01
jbe $0040ab30
// 11: Result := Factorial(aNum - 1) * aNum
mov eax,ebx
dec eax
call Factorial
imul ebx
pop ebx
ret     
// 13: Result := 1;
0040ab30: mov eax,$00000001
// 14: end;
pop ebx
ret 
```

而且它们在我看来都是一样的，所以我将坚持我最初的假设并说它们不被支持。

**顺便说一句**：这是在 Delphi 2009 中。

# google-maps - 申请谷歌地图密钥时指定的站点是什么？

> ID：723315
> 
> 赞同：0
> 
> 时间：2009-04-06T21:29:10.950
> 
> 标签：google-maps

我可能是昏暗的，但是当谷歌在要求谷歌地图的密钥时向我询问 URL 时，我真的不知道该回答什么。

我的意思是，我在我的笔记本电脑上，没有互联网 dns 条目在 Visual Studio 中开发解决方案，那么我该怎么告诉谷歌呢？本地主机？我知道该网站最终将使用的域名？我的笔记本电脑名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T21:33:43.403

使用与 URL 中的服务器名称相对应的密钥。我在本地网络上使用了 localhost 和笔记本电脑的名称。

在生产服务器上更改为不同的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T21:32:33.127

我一直设置 API 密钥来代表网站未来的 URL。我没有发现在 localhost 上使用为 domainname.com 设置的 API 密钥有任何问题，但这可能与我使用的 Google Map API 的子集有关。当您为 Google 地图设置密钥时，我会使用您网站的最终到达网址。

# php - php 数组到 xml，使用相同的数组键名

> ID：723321
> 
> 赞同：0
> 
> 时间：2009-04-06T21:30:28.873
> 
> 标签：php, xml-serialization, pear, associative-array

我们正在使用 pear 的 xml 序列化程序将我们的请求数组转换为 XML 以提交给其他服务器以获得 XML 响应。

问题是，对于其中一个属性，我们需要提交与此类似的 XML

```
<totalRooms>
  <Room>
    ...
  </Room>
  <Room>
    ...
  </Room>
</totalRooms> 
```

我们如何在 PHP 数组中编译它，以便 Serializer 生成正确的 XML？

即，我们需要：

数组（“总房间数”=>

数组（“房间”=> ...）

数组（“房间”=> ...）

)

由于共享密钥名称“房间”最终会相互覆盖，目前无法正常工作......还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T00:15:21.300

在这里，只是从我从文档中读到的内容进行猜测，如果您只有未命名的“房间”并且没有其他未命名的内部列表。

只要您使用设置 defaultTagName 选项，就可以正常工作并被序列化 `$serializer->setOption("defaultTagName", 'Room');`

完成后，以下将序列化

```
 array("totalRooms" =>
      array(
        array("Room" => ...),
        array("Room" => ...),
        array("Room" => ...)
            )
         ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-09T21:43:58.087

We've taken this job from the server and given it to Flash (client-side platform), making the problem much easier to handle.

Thank you Mr.Zombie for your response.

# php - PHP 和 PHP 5.3 中要添加的 goto 语句

> ID：723324
> 
> 赞同：18
> 
> 时间：2009-04-06T21:31:39.383
> 
> 标签：php, goto

“goto”语句直接来自 ASM 或任何其他汇编语言。

这是一个链接：[http ://be2.php.net/manual/en/control-structures.goto.php](http://be2.php.net/manual/en/control-structures.goto.php)

我想知道：这可以使我的代码更有条理吗？我怎样才能在更大的项目中实现这一点，而不会搞砸。由于 goto 将允许您来回跳转，因此如果您以错误的方式使用它，意外分配和无限循环正在等待发生。

有人可以给我一个很好地使用它的例子吗？

编辑：好吧，我已经看到了一些回复，显然对于“goto”语句的使用存在广泛的共识，而且它很糟糕。

所以我仍然想知道：为什么 PHP 会费心将它添加到语言中。如果他们没有看到其中的东西，他们就不会这样做……那为什么呢？

另外：[StackOverflow 上关于“goto”的一般讨论](https://stackoverflow.com/questions/46586/goto-still-considered-harmful)

EDIT2：看到这个问题导致很多不好的事情对 goto 语句感到难过，我去问了我的父亲。他今年 52 岁，是一名工业工程师。
他告诉我几次，他在他的日子里做了很多编程，主要是在 FORTRAN 和 COBOL 中。现在他做IT服务、服务器和网络管理等。

不管怎样，他说了一些“回到我的时代……”
讨论了一下之后，他回到了 goto 语句，说即使回到他学生时代，他们就已经知道这不是一个聪明的使用它的想法，但他们当时并没有更好的选择。Try/catch 还需要几年的时间，而且几乎没有消除错误处理。
那么你做了什么来检查你的程序？在末尾添加几行，允许您打印输出以及您需要在代码中检查的所有内容，然后放置以下行：“goto printing;”或类似的内容，以开始打印数据。

并且以这种方式，您逐渐调试了您的代码。

他同意在现代编程世界中使用 goto 是毫无用处的。他认为唯一合理的用途是“紧急中断”，用于极端调试和意外情况。有点像`goto fatal_error;`，并让代码的“fatal_error”部分做一些事情来向您展示深入的结果。
但仅限于创建某些东西的过程中。成品不应该有 goto 语句。

后期编辑：[关于 PHP5.3/PHP6 中“goto”的另一个讨论](https://stackoverflow.com/questions/19388/goto-command-in-php6)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T21:37:21.243

如果您正在编写好的 PHP 代码，则不需要使用 goto。我认为他们添加它是一个错误，因为它只会导致懒惰的编程。

看

[http://www.procata.com/blog/archives/2004/07/29/goto-in-php/](http://www.procata.com/blog/archives/2004/07/29/goto-in-php/)

有关将 this 添加到 PHP 以及此处有关堆栈溢出的良好评论，

[GOTO 仍然被认为是有害的？](https://stackoverflow.com/questions/46586/goto-still-considered-harmful)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-06T21:38:14.393

我只发现了两种用途`goto`：

1.  打破嵌套循环。但是大多数较新的语言都有一种机制可以做到这一点，`goto`无论如何（`break <number>`在 PHP 或`break <loop label>`Java 等中）。
2.  转到函数末尾的清理部分。但同样，这在垃圾收集语言中通常并不有用。

换句话说，如果你不知道你是否应该使用`goto`某事，你不应该。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-05-31T07:24:25.940

我在语言中看到 goto 的主要用途是跨语言移植的能力。我用 C 语言编写了一个解析器生成器，它生成带有 goto 的解析器（因为使用 goto 比实现更健全的控制结构更容易），现在将它移植到 PHP 并没有那么令人头疼。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-16T00:19:15.573

goto 可以帮助减少堆栈展开的代码重复，在下面的伪代码中：

```
do A
if (error)
    goto out_a;
do B
if (error)
    goto out_b;
do C
if (error)
    goto out_c;
goto out;

out_c:
undo C

out_b:
undo B:

out_a:
undo A

out:
return ret; 
```

（Robert Love 的伪代码，取自 linux 内核归档邮件列表： [https](https://lkml.org/lkml/2003/1/12/203) ://lkml.org/lkml/2003/1/12/203 ）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T23:46:53.740

它可用于调试目的，因此您不必为了临时更改工作流程而注释或重构代码块。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-07T13:53:33.190

在经典 VB 编码中，使用 goto 可以方便地模拟 try/catch 错误处理，如下所示：

```
Function MyFunction() as String

'-- start of error block
'
 On Error Goto Catch
   ' do something here that might cause an error
   MyFunction = "IT WORKED"
   Exit Function

 Catch:
   ' error occured - do something else
   MyFunction = Err.Description

 '
 '-- end of error block

End Function 
```

**...这是一种模拟 try/catch/finally 的方法 ..**

```
Function MyFunction() as String

'-- start of error block
'
 On Error Goto Catch
   ' do something here that might cause an error
   MyFunction = "IT WORKED"
   Goto Finally

 Catch:
   ' error occured - do something else
   MyFunction = Err.Description
   Err.Clear

 Finally:
   ' put your finally code here

 '
 '-- end of error block

End Function 
```

它对于函数末尾的清理也很有用，尽管我想你可以提出一个可以调用另一个函数来进行清理的案例。

老实说，我在 PHP 中从来没有遇到过这样的情况：我想‘嗯，我希望有一个 goto 语句’。我还没有了解他们为什么决定这样做，但是，这些人非常聪明，并且到目前为止已经将 PHP 带入了非常好的方向，所以也许他们正在预测我们尚未意识到的需求。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T21:33:38.803

没有很好地使用 goto 之类的东西。

也许，只是也许，摆脱多个嵌套循环可能很有用，但你已经可以使用“break 2”等来做到这一点。为此，像 Java 中的标记中断会比 goto 更好。

当您需要在一个失败时跳到一堆语句的末尾时，它可能对不使用异常编写的代码也很有用。但这只是用更糟糕的代码来修复糟糕的代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-07T10:53:20.050

我承认我从未在我的代码中使用过 goto。:)

对我来说，唯一的原因似乎是促进了从其他语言到 PHP 的最短迁移路线（实际上只是在不触及控制结构的情况下更改语言）并在移植的第二阶段重构代码。

我个人相信受过教育的同事，因为他们可以避免循环中的条件中断，他们将能够抵制 goto 的诱惑。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-09-28T14:30:19.870

Goto 主要用于编写有限状态机。在解析上下文无关语法时，您实际上需要其中之一。尽管我们可以不用 goto if`continue $case;`是 switch 块中的一个有效语句来跳转到不同的案例，并且当然具有当今许多语言所具有的案例范围。在那之前，我们几乎都被 goto 困住了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-31T13:11:39.557

有时我`goto`用来避免多个嵌套的 if。这不仅与逻辑、结构或程序流程有关，有时还可能与代码的外观有关。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T23:56:20.520

`goto`确实应该是语言中的东西，并且由于更好的编程实践而将被淘汰。现在添加它似乎是倒退。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-12-14T11:23:03.870

我猜，生成的代码可以很好地利用 goto。生成代码的好处是您不需要维护它 - 您只需重新生成它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-27T04:34:08.767

goto 的最大优势是学习曲线。人们想知道为什么 Visual studia 和 mac 等工具表现出色。原因是人们想要的不仅仅是伟大的产品。他们想要一个很棒的产品，他们可以在一个小时左右的时间内学会使用。许多程序员现在只是将编程作为他们的工作之一。我看到很多书都说永远不应该使用 goto，然后给出五种左右的技术，这样他们就说消除了对它的所有需求。我说他们提到 5 的事实证明了 goto 有多好！！！！！！我没有时间教五件事，其中包括需要整章解释的异常结构！！！！！！！当你真正需要的是一个可以在 30 秒内解释的简单 goto 时。当然，如果程序员愿意，你可以用它们创建糟糕的代码——但是，嘿，大多数程序员都不会 不想编写糟糕的代码，如果他们这样做了，他们无论如何都可以。我们实验室的大多数 goto 使代码非常易于理解和学习；比阅读一本 2000 页的书要重要得多。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-13T18:20:35.997

GOTO 是受限制的执行控制结构，可以用来代替循环，但非常不鼓励这样做。它的使用往往会鼓励创建非结构化代码，这是一种糟糕的做法。如果仅用于开发、调试（跳过大量代码以访问特定问题区域）和测试，它很可能是最好的。GOTO 的唯一其他用途可能是编写汇编程序。不见得。如果在开发之外使用 GOTO，则应谨慎使用，并且仅作为最后的手段。如果可能，将 GOTO 替换为适用的循环结构。

至于最后链接的线程（[PHP 中的 GOTO 命令？](https://stackoverflow.com/questions/19388/goto-command-in-php6)）：

正如 Ishmaeel 所说（由 Gordon 编辑；迄今为止最好的答案）：

GOTO 只是一个扩展的 BREAK，具有“使用静态标签”的能力。“基本上，它将增强突破嵌套 if 语句的能力。”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-21T23:09:07.633

简短的回答是 goto 是有限堆栈空间的解决方法，在单线程代码中具有更好的性能。除了处理堆栈空间或性能之外，它的使用至少是不必要的，最多是不合适的，因为它会导致不必要的复杂性。

在我用所有语言编写的超过 200 万行代码中，不包括机器代码 :-)。只有两次使用它是必要的，而且都是由于检查\排序大型树数据集。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2009-04-07T00:44:22.743

如前所述，goto 仅在某些类型的算法中真正*需要*，通常是那些出现在语言解析或有限状态机中的算法。我从未错过 PHP 中缺少 goto。

OTOH，我用一种语言编程，其中只有两个结构是函数和条件 goto：[SNOBOL4](http://en.wikipedia.org/wiki/Snobol4)。由于意大利面条代码的风险如此之高，因此大多数 SNOBOL4 程序员都小心翼翼地避免这种情况。但是 gotos 确实实现了一些非常紧凑的编程、创造性的循环执行等等。如果您只有 goto，那么执行 FSM 类型的循环实际上会更容易一些。

# c# - C#：有人能解释一下反射的实用性吗？

> ID：723328
> 
> 赞同：19
> 
> 时间：2009-04-06T21:33:21.563
> 
> 标签：c#, .net, reflection

所以我尝试搜索所以希望有人对此有一个很好的解释，但没有运气。

我问了我的另一个朋友一个不同的问题（我现在忘记了），他的回答只是在他签字之前“反思”。

我对 C# 世界还很陌生，曾经是一名业余的 VB.net 程序员（也包括 JavaScript、ActionScript 和 C），并且正在努力掌握这些高级概念。

有很多哲学答案——“应用程序审视自身”——但它们没有提供任何关于实际发生的事情或在该上下文中如何使用它的实际提示。

那么，什么是反射，为什么它很重要，为什么/如何使用它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T23:18:31.220

反射提供了在运行时确定事物和执行代码的能力。

如果您不想使用它，则*不必*使用它，但它对于动态行为非常方便。

例如：

a) 您可以通过加载外部配置文件并基于它启动服务来使用反射来配置您的应用程序。您的应用程序不必提前知道实现这些服务的类，只要它们符合特定的接口或 API。

b) 使用反射，您可以动态生成类和代码，这简化了某些编程任务，因为程序员不必显式创建所有需要的代码。

c) 反射对于通过检查代码工作的程序也是无价的。IDE 或 UI 设计器就是一个例子。

d) 反射可帮助您减少样板代码。

e) 反射对于在代码中定义迷你领域特定语言 (DSL) 很方便。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T21:43:43.507

（我的定义）反射是编写在运行时执行代码的静态代码的能力，这通常在编译时确定。

例如，我可以通过在该命令中编译来调用类方法来绘制，例如：

```
pen.DrawLine() 
```

或者通过反射，我可以首先查看我的对象是否有一个名为“drawline”的方法，如果有，调用它。（注意这不是实际的 C# 反射语法）

```
 if(pen.Methods.Contains("DrawLine"))
 {
    pen.InvokeMethod("DrawLine"))
 } 
```

我不是反射大师，但我将反射用于插件架构。

通过反射，我可以在运行时加载 .NET 程序集（在本例中为 dll），找出 .NET 程序集中的所有类型，查看这些类型中是否有任何类型实现了特定接口，如果是，则实例化我调用接口方法的类。

我知道用例有点技术性，但本质上反射允许我动态加载插件（即在运行时），并让我对它进行类型安全的调用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-06T21:51:08.417

反射最常见的用途是以前称为 RTTI（运行时类型信息）的扩展，主要是 C++ 程序员的领域。

反射是 .net 构建方式的副作用，Microsoft 选择向 Microsoft 以外的开发人员公开他们用于创建 Visual Studio 和 .net 运行时的库。

大多数反射库都专注于可以在运行时调用的类型发现和创建。这允许一些非常强大的自引用代码。以我们的配置管理系统的核心为例（为清楚起见，删除了一些部分）：

```
 public static IMyCompanySetting UnwrapSetting(XmlNode settingNode)
    {

        string typeName = settingNode.Attributes["type"].Value;
        string typeAssembly;
        if(settingNode.Attributes["assembly"] != null)
        {
            typeAssembly = settingNode.Attributes["assembly"].Value;
        }

        Type settingType = null;
        Assembly settingAssembly = null;
        try
        {
            // Create an object based on the type and assembly properties stored in the XML
            try
            {
                settingAssembly = Assembly.Load(typeAssembly);
                if (settingAssembly == null)
                {
                    return null;
                }
            }
            catch (Exception outerEx)
            {
                try
                {
                    settingType = GetOrphanType(typeName);
                }
                catch (Exception innerEx)
                {
                    throw new Exception("Failed to create object " + typeName + " :: " + innerEx.ToString(), outerEx);
                }
            }

            // We will try in order:
            // 1\. Get the type from the named assembly.
            // 2\. Get the type using its fully-qualified name.
            // 3\. Do a deep search for the most basic name of the class.
            if (settingType == null && settingAssembly != null) settingType = settingAssembly.GetType(typeName);
            if (settingType == null) settingType = Type.GetType(typeName);
            if (settingType == null) settingType = GetOrphanType(typeName);
            if (settingType == null) throw new System.Exception(
                String.Format("Unable to load definition for type {0} using loosest possible binding.", typeName));
        }
        catch (Exception ex)
        {
            throw new CometConfigurationException(
                String.Format("Could not create object of type {0} from assembly {1}", typeName, typeAssembly), ex);
        }

        bool settingIsCreated = false;
        IMyCompanySetting theSetting = null;

        // If the class has a constructor that accepts a single parameter that is an XML node,
        // call that constructor.
        foreach (ConstructorInfo ctor in settingType.GetConstructors())
        {
            ParameterInfo[] parameters = ctor.GetParameters();
            if (parameters.Length == 1)
            {
                if (parameters[0].ParameterType == typeof(XmlNode))
                {
                    object[] theParams = { settingNode };
                    try
                    {
                        theSetting = (IMyCompanySetting)ctor.Invoke(theParams);
                        settingIsCreated = true;
                    }
                    catch (System.Exception ex)
                    {
                        // If there is a pre-existing constructor that accepts an XML node
                        // with a different schema from the one provided here, it will fail
                        // and we'll go to the default constructor.
                        UtilitiesAndConstants.ReportExceptionToCommonLog(ex);
                        settingIsCreated = false;
                    }
                }
            }
        } 
```

这段代码允许我们创建无限数量的类来实现 IMyCompanySetting 并使用 XML 序列化和反序列化自己。然后，给定一个作为对象序列化输出的 XML 块，系统可以将其转回对象，即使对象本身来自序列化库没有静态链接的库。

没有它，反射在这里做的三件事是不可能的：

在运行时根据其名称加载程序集。

在运行时根据其名称从程序集中加载对象。

根据编译时未知的类的对象的签名调用对象构造函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T21:37:10.307

假设您有两个替代的接口实现。您希望允许用户通过简单的文本配置文件选择其中一个。

通过反射，您可以简单地从配置文件中读取要使用其实现的类的名称（作为字符串），并实例化该类的实例。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-06T21:38:38.387

反射使您可以深入研究程序集并使用它，无论您以后没有引用它。

考虑一个插件系统，其中主机不知道它将拥有哪些插件；使用反射（和正确的架构），您可以构建一个简单的解决方案来实现这一点。

考虑另一种情况，您必须在给定字符串的对象上调用方法，反射也为您提供了实现此目的的方法。

还有很多其他的用法，但我希望这两个，打开你对 CLR 的这个优秀特性的胃口

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-06T21:51:01.193

在不知道类在设计时具有哪些属性或方法的情况下，能够读取类的属性或调用方法有时很有用。实现这一点的方法是反思。正如下面的代码所示，您可以在编译时获取类上所有属性的列表并检索它们的值，而无需对此一无所知。或者您可以通过名称获取方法，即使您在编译时不知道方法的名称，并通过反射调用它。例如，这将允许您创建一种对在另一个用户提供的 DLL 中定义的对象进行操作的脚本语言。（当然你也可以枚举一个类中的所有方法或者通过名字来检索一个特定的属性，但是这些情况并没有在下面的代码中演示。）

```
class Program
{
  static void Main(string[] args)
  {
     UserDefinedClass udc = new UserDefinedClass();
     udc.UserProperty = "This is the property value";

     ClassTracer ct = new ClassTracer(udc);
     ct.TraceProperties();
     ct.CallMethod("UserFunction", "parameter 1 value");
  }
}

class ClassTracer
{
  object target;

  public ClassTracer(object target)
  {
     this.target = target;
  }

  public void TraceProperties()
  {
     // Get a list of all properties implemented by the class
     System.Reflection.PropertyInfo[] pis = target.GetType().GetProperties();
     foreach (System.Reflection.PropertyInfo pi in pis)
     {
        Console.WriteLine("{0}: {1}", pi.Name, pi.GetValue(target, null));
     }
  }

  public void CallMethod(string MethodName, string arg1)
  {
     System.Reflection.MethodInfo mi = target.GetType().GetMethod(MethodName);
     if (mi != null)
     {
        mi.Invoke(target, new object[] { arg1 });
     }
  }
}

class UserDefinedClass
{
  private string userPropertyValue;

  public string UserProperty
  {
     get
     {
        return userPropertyValue;
     }
     set
     {
        userPropertyValue = value;
     }
  }

  public void UserFunction(string parameter)
  {
     Console.WriteLine("{0} - {1}", userPropertyValue, parameter);
  }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-06T21:41:57.597

反射是使用代码来检查代码本身。例如，`foo.DoBar()`您可以调用而不是调用：

```
foo.GetType().GetMethod("DoBar").Invoke(foo,null); 
```

这似乎是一种到达同一目的地的迂回方法，但它也可以用来做一些可能违反规则的黑魔法，例如在框架类上调用私有方法。它还可以用于实际生成代码和输出新的二进制文件，以及对一小群人非常有用的一大堆东西。

有关更多信息，请查看[MSDN 上的 Reflection 部分](http://msdn.microsoft.com/en-us/library/cxz4wk15.aspx)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-06T21:37:40.337

在许多情况下，应用程序不应该对自身做出太多假设，而应该查看运行时以了解它实际上是什么。这就是反思进入节目的地方。例如，ASP.NET 不对您使用的成员资格提供程序做出任何假设，只是它继承了适当的类。它使用反射在运行时查找类并实例化它。由于解耦和减少类之间的依赖关系，这提供了很大的可扩展性。

当然，这只是反射的一个用例。在许多其他情况下，它可能非常有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-06T21:43:55.423

[Pro C# 2008 和 .NET 3.5 Platform 的](https://rads.stackoverflow.com/amzn/click/com/1590598849)作者 Andrew Troelsen 以这种方式定义反射：

> 在 .NET 世界中，*反射*是运行时类型发现的过程。

我不确定我能否准确解释这意味着什么，但我可以告诉你我是如何使用它的。

我可以将用户定义的属性放在程序集 (dll) 上。在运行时使用反射，我可以检查某个目录位置中的所有程序集，以查看它们是否定义了此属性。这可以提示我的应用程序如何使用程序集，比如作为插件。

我还使用反射来加载和保存应用程序设置。

* * *

对于它的价值，除非您使用反射，否则我不确定它与您的 GUI 抛出异常有什么关系。

> 关于 C# 反射我唯一知道的就是它非常烦人，因为我所有的 GUI 应用程序都喜欢在 Application.Run(new frmMain() );，而不是在真正的问题发生的地方停下来（如 innerException 所示）。

您的陈述让我相信您在应用程序中的任何地方都几乎没有 try/catch 块，这样每个异常都会渗透回调用堆栈的顶部。如果您在调试模式下使用 Visual Studio 2005/2008，请进入 Debug 菜单并选择 Exceptions... 菜单选项。在 Exceptions 对话框中，选中 Throw 列下的复选框。现在，当您运行应用程序并引发异常时，调试器将在引发异常的地方中断。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-06T23:14:45.220

假设您有一些业务实体，它们都派生自一个名为 Entity 的基类。假设您需要/希望所有派生类都是可克隆的。您可以在基类上实现一个方法“Clone”（接口 ICloneable），该方法将遍历当前类的所有属性（尽管它是在实体类中实现的）并将它们复制到克隆对象。这是反射可以真正提供帮助的情况。因为你无法知道基类属性的名称和数量。而且您不想在所有派生类中实现该方法。但是，您可能希望将方法设为虚拟。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-04-06T23:20:41.290

其他人已回答

> 什么是反射，为什么它很重要

因此，我将仅回答以下问题。

> 我该如何使用它？

通过以下命名空间

*   [系统反射](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)
*   [System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)

> 我为什么要使用它？

调用/检查程序集类型、成员、属性

当您查看像[Reflector](http://www.red-gate.com/products/reflector/)这样的产品时，能够检查代码结构已经足够**实用**了。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-06T23:54:51.303

如果你跑得又快又猛，也许你是从一个对象继承的，需要访问一个私有字段。你没有来源，但没关系，你有反射。（我知道哈克）

我见过的一个更合理的用途是在实现 C# 泛型时使用反射，我想对泛型类型执行一些其他方式不可用的操作。泛型类型上唯一可用的操作是那些具有泛型约束的操作（即，如果您约束泛型类型以实现 IFoo，则可以在该类的实例上使用 IFoo 方法）。有些操作虽然不可用——例如，我采用了一个应该具有特定非默认构造函数的泛型类。我不能将泛型方法限制为只接受带有该构造函数的泛型类型参数，但至少我可以在通过反射实现泛型时尝试使用该构造函数。

我很少使用反射，但它偶尔会派上用场。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-06T22:44:44.653

我使用反射来实现自定义数据绑定系统。

例如，使用我的绑定 API，我可以编写以下代码：

绑定 b = new Binding(textBox, "Text", myObject, "Text", BindingMode.Bidirectional);

Binding 对象（附加到 TextChanged 事件）检测到 textBox 对象中文本的任何更改并传递到 myObject.Text 属性。检测到 myObject.Text 的更改（通过其 TextChanged 事件）并将其传递到 textBox.Text 成员。

我使用反射实现了这个系统。Binding 构造函数声明为：

绑定（对象，字符串，对象，字符串，BindingMode）

因此，该系统适用于任何对象（有一个重要的附带条件）。

我检查第一个对象并在第一个字符串中找到与命名成员对应的成员（文本框和“文本”，即文本框是否有一个名为“文本”的成员）。重复第二个对象和字符串。

附带条件：对于要在此方案中使用的对象，它们必须实现任何可绑定属性必须具有相应的 PropertyNameChanged 事件的非正式要求。令人高兴的是，几乎所有 .Net UI 组件都遵循这个约定。

然后，我检查对象是否存在必需的 PropertyNameChanged 事件，向它们添加事件处理程序，一切都已设置好。

注意。我在 .Net 1.0 中实现了这个，所以它早于微软的绑定实现——我还没有开始调查。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-06T23:34:42.693

实际应用

使用反射将数据与对象对齐，就像在数据映射情况下一样。例如，您可以将数据库列映射到对象的属性。如果您要编写一个对象关系映射器，您将需要某种方法从配置设置（即 DatabaseColumnName 映射到 Class.MemberName）到它所引用的对象。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-06T21:45:43.033

反射之所以如此命名，是因为它允许代码像照镜子一样审视自己。

如前所述，反射可用于使用类名创建新实例。序列化也由反射提供支持。在这种情况下，代码会检查所有可序列化的字段并递归地序列化这些字段，直到整个图被使用并写入其字节形式。

反射允许人们在编译时通过在运行时发现类型、方法、字段等来逃避静态类型。JVM 上的许多动态语言（不确定 CLR，但我想也是如此）使用反射来调度方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-07T01:21:10.473

在反射的实际用途方面，我们使用它来允许我们的客户提供他们自己的本地化。

通过我们的应用程序，我们提供了一个本地资源数据库，客户端可以通过为所有字符串、菜单项、对话框控件等提供语言翻译来工作。有了这个客户端翻译的数据库，我们然后在应用程序启动时使用反射并遍历我们所有的控件，并用客户端提供的翻译字符串替换默认语言字符串。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-07T04:09:48.147

反射的许多用途已在此处详述，但另一种用途可能是记录对象的状态，包括其私有成员以用于调试。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-04-07T04:20:02.197

您可以发布一些示例代码来显示您如何执行反射吗？您是否将 PDB 文件与您使用反射 API 的程序集放在同一位置？如果是这样，则在 Visual Studio 中转到“调试”菜单 -->“异常”并选中“引发公共语言运行时”复选框。在调试模式下运行您的应用程序。希望调试器应该在您的反射程序集中抛出真正异常的点中断。

# c++ - 初始化对象之前在对象上运行的方法？

> ID：723344
> 
> 赞同：1
> 
> 时间：2009-04-06T21:38:30.383
> 
> 标签：c++, initialization

```
#include <iostream>
using namespace std;

class Foo
{

public:

 Foo(): initialised(0)
 {
  cout << "Foo() gets called AFTER test() ?!" << endl;
 };

 Foo test()
 {
  cout << "initialised= " << initialised << " ?! - ";
  cout << "but I expect it to be 0 from the 'initialised(0)' initialiser on Foo()" << endl;
  cout << "this method test() is clearly working on an uninitialised object ?!" << endl;
  return Foo();
 }

 ~Foo()
 {};

private:

 int initialised;

};

int main()
{

 //SURE this is bad coding but it compiles and runs
 //I want my class to DETECT and THROW an error to prevent this type of coding
 //in other words how to catch it at run time and throw "not initialised" or something

 Foo foo=foo.test();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T21:43:43.660

是的，它在尚未构造的对象上调用函数，这是未定义的行为。您无法检测到它是否可靠。我认为您也不应该尝试检测它。与例如在已删除的对象上调用函数相比，这不是偶然发生的事情。试图抓住所有可能的错误几乎是不可能的。声明的名称在其初始化程序中已经可见，用于其他有用的目的。考虑一下：

```
Type *t = (Type*)malloc(sizeof(*t)); 
```

这是 C 编程中的常见习语，在 C++ 中仍然有效。

就个人而言，我喜欢Herb Sutter 关于空引用（同样无效）的[这个故事。](http://www.gotw.ca/conv/002.htm)要点是，不要试图避免语言明确禁止的情况，尤其是在一般情况下无法可靠诊断的情况。随着时间的流逝，您将获得虚假的安全性，这变得非常危险。相反，训练你对语言和设计界面的理解（避免原始指针，......），以减少犯错的机会。

在 C++ 和 C 中，许多情况并未明确禁止，而是未定义。部分是因为有些事情很难*有效*地诊断，部分是因为未定义的行为允许实现为它设计替代行为而不是完全忽略它——现有编译器经常使用它。

例如，在上述情况下，任何实现都可以随意抛出异常。还有其他情况同样是未定义的行为，对于实现来说更难有效诊断：在构造之前访问不同翻译单元中的对象就是这样的例子——这就是所谓的*静态初始化顺序惨败*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T21:47:50.563

构造函数是您想要的方法（不在初始化之前运行，而是在初始化时运行，但这应该没问题）。它在您的情况下不起作用的原因是您在这里有未定义的行为。

特别是，您使用尚不存在的 foo 对象来初始化自身（例如`foo`in`foo.Test()`尚不存在）。您可以通过显式创建对象来解决它：

```
Foo foo=Foo().test() 
```

您无法在程序中检查它，但也许 valgrind 可以找到这种类型的错误（就像任何其他未初始化的内存访问一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T21:53:49.893

**你不能阻止人们编码不好**，真的。它就像“应该”一样工作：

1.  为 Foo 分配内存（这是“this”指针的值）
2.  通过执行以下操作进入 Foo::test： Foo::test(this)，其中，
3.  它通过this->initialized获取值，这是随机垃圾，然后它
4.  调用 Foo 的默认构造函数（因为 return Foo();），然后
5.  调用 Foo 的复制构造函数，复制右手的 Foo()。

就像它应该的那样。你不能阻止人们不知道使用 C++ 的正确方法。

你能做的最好的就是有一个神奇的数字：

```
class A
{
public:
    A(void) :
    _magicFlag(1337)
    {
    }

    void some_method(void)
    {
        assert (_magicFlag == 1337); /* make sure the constructor has been called */
    }

private:
    unsigned _magicFlag;
} 
```

这“有效”是因为 _magicFlag 在值已经是 1337 的地方被分配的机会很低。

但真的，不要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T23:15:08.077

您收到很多回复，基本上是说“您不应该指望编译器会帮助您解决这个问题”。但是，我同意你的观点，编译器应该通过某种诊断来帮助解决这个问题。不幸的是（正如其他答案所指出的那样），语言规范在这里没有帮助 - 一旦你到达声明的初始化部分，新声明的标识符就在范围内。

不久前，DDJ 有一篇关于[名为“DogTag”的简单调试类](http://www.ddj.com/cpp/184403504)的文章，可以用作调试辅助工具来帮助：

*   删除后使用对象
*   用垃圾覆盖对象的内存
*   在初始化对象之前使用它

我没有使用太多 - 但它确实在遇到一些内存覆盖错误的嵌入式项目中派上用场。

它基本上是对[GMan 所描述的“MagicFlag”技术的阐述](https://stackoverflow.com/questions/723344/method-running-on-an-object-before-the-object-has-been-initialised/723398#723398)。

# sharepoint - HKCU\Software\Microsoft\Office\Common\Offline\Files 条目中时间注册表值的格式

> ID：723350
> 
> 赞同：1
> 
> 时间：2009-04-06T21:39:58.413
> 
> 标签：sharepoint, ms-office

HKEY_CURRENT_USER\Software\Microsoft\Office\Common\Offline\Files 中的条目中的时间注册表值中的信息是什么？

我看到（示例）：0x01c99b84|0x11990880

我很确定第一个“半”（在条形字符之前）是文件修改时间（可能是文件时间格式。我不确定条目的第二个“半”是什么。

条目是由 SharePoint 结帐完成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T21:48:26.630

[http://blogs.msdn.com/oldnewthing/archive/2003/09/05/54806.aspx](http://blogs.msdn.com/oldnewthing/archive/2003/09/05/54806.aspx)很好地概述了不同的时间格式。在这种情况下，它看起来像一个 NT 时间（自 1600 年 1 月 1 日以来的 100 ns 间隔。）

文件时间是 64 位的。您需要将两个 32 位值组合在一起，即 0x01c99b8411990880。

此注册表项是否记录在案？如果没有，你不应该依赖它。

# sql-server - 创建存储过程以返回另一个存储过程的行数

> ID：723352
> 
> 赞同：4
> 
> 时间：2009-04-06T21:41:41.920
> 
> 标签：sql-server, stored-procedures

是否有可能做到这一点？我在源存储过程中设置了一些过滤器，我真的不想为了获得行数而将它复制到另一个中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T21:49:09.280

我知道如何做到这一点的唯一方法是从存储过程中插入临时表，然后选择计数。不幸的是，没有很好的方法来对存储过程执行“选择”。

```
CREATE TABLE #stuff (id int, status char(6))
INSERT #stuff (id, status)
EXEC dbo.sp_get_stuff

SELECT count(*) FROM #stuff

DROP TABLE #stuff 
```

**编辑**

上述方法将允许您从存储过程中进行选择，但正如 Greg 指出的那样，行数可以简化为：

```
EXEC dbo.sp_get_stuff
SELECT @@Rowcount 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T13:56:09.637

这也有效：

```
create proc pTest1
as
select * from comp
go

create proc pTest2
as
exec pTest1
select @@rowcount
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-30T01:04:39.813

如果您真的想尽可能地进行微调，那么您将不得不更改源存储过程。如果您正在查看性能，那么返回行集只是为了获取计数甚至不需要考虑。

# math - 什么时候适合使用浮点精度数据类型？

> ID：723356
> 
> 赞同：6
> 
> 时间：2009-04-06T21:43:34.847
> 
> 标签：math

很明显，在处理货币金额时不应使用浮动精度，因为在使用该金额进行计算时，精度的变化会导致不准确。

也就是说，什么是可以接受的用例？而且，在决定时应该牢记哪些一般原则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T21:55:15.130

浮点数应该用于它们的设计目的：计算你想要的是一个固定的*精度*，你只关心你的答案在一定的公差范围内是准确的。如果您在所有情况下都需要一个准确的答案，那么您最好使用其他东西。

以下是您可能使用浮点的三个域：

1.  **科学模拟**
    科学应用程序需要大量的数字运算，并且经常使用复杂的数值方法来求解微分方程组。您通常在这里谈论双精度浮点。

2.  **游戏**
    将游戏视为可以作弊的模拟。如果物理“足够好”以看起来真实，那么对于游戏来说就可以了，并且您可以在用户体验中弥补您在准确性方面所缺少的东西。游戏通常使用单精度浮点。

3.  **统计**
    像科学应用程序一样，统计方法需要大量的浮点数。很多数值方法都是一样的；应用程序域只是不同。您会在金融应用程序以及您分析大量调查数据的任何领域中找到大量统计数据和蒙特卡罗模拟。

浮点不是微不足道的，对于大多数业务应用程序，您真的不需要知道所有这些微妙之处。你知道你不能用浮点数精确地表示一些十进制数就很好了，你应该确保使用一些十进制类型来表示价格和类似的东西。

如果您真的想深入了解细节并了解所有权衡和陷阱，请查看经典的[What Every Programmer Should Know About Floating Point](http://docs.sun.com/source/806-3568/ncg_goldberg.html) ，或者如果您真的很喜欢冒险，可以选择一本关于[数值分析](http://en.wikipedia.org/wiki/Numerical_analysis)或[应用数值线性代数的书。](http://books.google.com/books?id=bj-Lu6zjWbEC&dq=applied+numerical+linear+algebra&printsec=frontcover&source=bl&ots=5F5fVNdfwX&sig=Z9FiPDHVocrwrJZNkoQ9rh8ow70&hl=en&ei=LXvaSc6bC42qtAPW5vDXBg&sa=X&oi=book_result&ct=result&resnum=8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T21:49:17.750

我猜你的意思是“浮点数”。基本上，答案是任何时候所涉及的数量都是近似的、测量的，而不是精确的；任何时候所涉及的数量大于在底层机器上可以方便地精确表示的数量；任何时候对计算速度的需求超过了精确的精度；并且任何时候都可以保持适当的精度，而无需其他复杂性。

有关这方面的更多详细信息，您确实需要阅读一本数值分析书。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T22:15:09.780

简短的故事是，如果您需要**精确**计算，请不要使用浮点数。

不要使用浮点数作为循环索引：不要被抓到：

```
for ( d = 0.1; d < 1.0; d+=0.1) 
{  /* Some Code... */ } 
```

你会感到惊讶。

不要使用浮点数作为任何类型映射的键，因为你永远不能指望相等行为像你所期望的那样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T22:06:51.657

大多数现实世界的数量都是不精确的，通常我们知道它们的数字属性的精度远低于典型的浮点值。在几乎所有情况下，C 类型的 float 和 double 都足够好。

有必要了解一些陷阱。例如，测试两个浮点数的相等性通常不是您想要的，因为只需要一点不准确就可以使比较不相等。tgamblin 提供了一些很好的参考。

通常的例外是金钱，它是根据某些不能很好地转换为二进制表示的约定精确计算的。其中一部分是使用的常数：您永远不会看到 pi% 的利率或 22/7% 的利率，但您很可能会看到 3.14% 的利率。换句话说，使用的数字通常以精确的十进制小数表示，并非所有数字都是精确的二进制小数。此外，计算中的舍入受制于也不能很好地转换为二进制的约定。这使得使用标准浮点精确复制财务计算变得极其困难，因此人们使用其他方法来进行计算。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T21:49:28.360

在处理科学或统计计算时使用浮点类型是合适的。这些总是只有 3-8 位有效数字的准确度。

至于是使用单精度还是双精度浮点类型，这取决于您对精度的需求以及您需要多少有效数字。通常，尽管人们最终只会使用双打，除非他们有充分的理由不这样做。

例如，如果您测量距离或重量或任何类似的物理量，您得出的数字并不准确：根据您的仪器和测量的准确性，它具有一定数量的有效数字。

对于涉及此类的计算，浮点数是合适的。

此外，如果您正在处理无理数，那么浮点类型是合适的（并且确实是您唯一的选择），例如线性代数，您经常处理平方根。

金钱是不同的，因为您通常需要准确，并且每个数字都很重要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T21:51:32.333

我认为你应该反过来问：你什么时候不应该使用浮点数。对于大多数数值任务，浮点是首选数据类型，因为您可以（几乎）忘记溢出和整数类型通常遇到的其他类型的问题。

查看浮点数据类型的一种方法是精度与动态无关，即数字是很小还是很大（当然在可接受的范围内），有意义的位数大致相同。

一个缺点是浮点数有一些令人惊讶的属性，例如 x == x 可以为 False（如果 x 为 nan），它们不遵循大多数数学规则（分布性，即 x( y + z) != x *y + xz* )。根据 z、y 和 z 的值，这可能很重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T21:50:22.600

来自[维基百科](http://en.wikipedia.org/wiki/Floating_point)：

> 浮点运算在仅用于测量广泛范围内的真实世界量（例如 Io 的轨道周期或质子的质量）时处于最佳状态，而在预期时则处于最差状态对以十进制字符串表示的量的交互作用进行建模，这些量应该是精确的。

浮点数很快但不精确。如果这是可以接受的权衡，请使用浮点数。

# asp.net - 在通过 Web 服务传递的类中确定要序列化的属性

> ID：723363
> 
> 赞同：0
> 
> 时间：2009-04-06T21:45:30.350
> 
> 标签：asp.net, web-services, serialization

我正在使用 NHibernate 来管理我的实体，并且要启用延迟加载，我需要让我的属性返回一个 IList<>。问题是 .NET 引发异常，因为当我尝试传递实体时它无法序列化接口。这很有意义。

我需要知道的是如何控制哪些字段序列化，哪些不序列化？到目前为止，我最好的选择是通过在序列化对象之前将 IList<> 的内容复制到 List<> 中来解决这个问题，但要做到这一点，我需要告诉 .NET 我不需要 IList<> 属性序列化:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T22:04:25.187

只是想让你们知道我发现答案是 [System.Xml.Serialization.XmlIgnore] 属性:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-06T21:50:49.573

MSDN 有一个关于[序列化对象](http://msdn.microsoft.com/en-us/library/7ay27kt9(VS.71).aspx)的区域，但您想要的是[选择性序列化](http://msdn.microsoft.com/en-us/library/axwwbcs6(VS.71).aspx)。所以基本上，您可以使用属性 [NonSerialized] 标记您不想序列化的任何属性。第二个链接中有一个示例。

# java - 如何使用 PEM 文件在 Java 中创建 SSL 套接字？

> ID：723368
> 
> 赞同：11
> 
> 时间：2009-04-06T21:46:04.700
> 
> 标签：java, ssl, certificate, pem, jks

[请参阅相关问题。](https://stackoverflow.com/questions/722931/ssl-socket-php-code-needs-to-be-converted-to-java)

我有一个 PEM 文件提供给我，并被告知在建立连接到 c++ 服务器以进行某些 API 调用的 SSL 套接字时需要它。有谁知道我如何读取 PEM 文件并进行连接？我还得到了释义密码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T21:54:59.767

听起来 PEM 文件是您用来登录服务器的客户端证书。如果它是客户端证书，并且听起来确实如此，那么您可能还需要一个 ca 证书文件来验证服务器证书以建立连接。

CA 证书需要进入信任库，您的客户端证书需要进入密钥库。在 Java 中，这两个都是 JKS（尽管它对 PKCS12 的支持有限。）JRE 以及每个用户都有默认的密钥库/信任库位置。您还可以在代码中为这些文件指定外部位置，如下例所示。commons-ssl库貌似可以直接支持PEM，不需要JKS，不过我没用过。

Java 中这些密钥库的默认密码是“changeit”，不带引号。

[此页面](http://www.agentbob.info/agentbob/79-AB.html)显示您必须将 PEM 读入您的密钥库/信任库。这是[另一个例子](http://pa55word.wordpress.com/2009/01/21/how-to-get-your-java-keystoretruststore-from-pem-files/)。

正确设置信任库和密钥库后，您需要将以下[JSSE 系统属性](http://publib.boulder.ibm.com/iseries/v5r2/ic2924/index.htm?info/rzaha/rzahajssesysprops.htm)传递给 JVM：

```
javax.net.ssl.keyStore
javax.net.ssl.keyStoreType
javax.net.ssl.keyStorePassword
javax.net.ssl.trustStore
javax.net.ssl.trustStoreType
javax.net.ssl.trustStorePassword 
```

您可以将它们指定为 JRE 的 -D 参数，或者如下例所示，以编程方式指定它们。

完成后，这里有一个创建套接字的[commons-ssl 示例。](http://juliusdavies.ca/commons-ssl/ssl.html)[此外，这是SSLSocket](http://java.sun.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html)的 Java api 。这也是一个不使用任何 apache commons的[示例。](http://www.herongyang.com/JDK/ssl_socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-08T10:26:52.507

您需要一个处理 SSL 的库。正如 John Ellinwood 所指出的，某些框架（例如 Java 2 SE）提供了这些内置功能，而其他框架则需要使用 3rd 方库。

C 开发人员经常直接使用 openssl，但它不能说是容易的，在使用 C++ 时有几个“陷阱”很容易陷入。

我建议您使用支持 SSL 的 C++ 网络库，例如 QT 的网络库或 Poco NetSSL。有关一些教程文档[，](http://pocoproject.org/docs/Poco.Net.SSLManager.html)请参见[此处](http://www.appinf.com/docs/poco/NetSSL_Schannel.html)，有关 API 文档，请参见此处 - 您可能想查看直接采用 PEM 文件的[initializeClient 。](http://pocoproject.org/docs/Poco.Net.SSLManager.html#11818)

# jquery - 使用 jQuery 正确循环 JSON

> ID：723375
> 
> 赞同：1
> 
> 时间：2009-04-06T21:47:16.943
> 
> 标签：jquery, json

我有以下 JSON：

```
{
  "status" : "success",
  "0": { 
    "link"  : "test1",
    "img"   : "test2",
    "title" : "test3"
  },
  "1":{
    "link"  : "test4",
    "img"   : "test5",
    "title" : "test6"
  }
} 
```

显然 0 和 1 本身就是对象，我想要一种正确的方法来遍历该对象中的所有数据，即“状态”、“0”和“1”。我现在拥有（和工作）如下，我知道必须有一种更好的方法来查看元素是否只有一个深度，例如“状态”或者它是否是一个对象，例如“0”和“1” '：

```
// Prints the link from '0' and '1'
$.each(test, function(){
if(this == '[object Object]')
 alert(this.link);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T22:00:43.340

```
for (var propName in object) {
    var prop = 对象[propName];
    if (typeof prop == "object")
        ...
}

```

# c# - 多个 SQL 调用（参数化查询或存储过程）哪个更快？

> ID：723381
> 
> 赞同：3
> 
> 时间：2009-04-06T21:48:48.610
> 
> 标签：c#, sql-server, sql-server-2005, ado.net

我正在使用 SQL Server 2005。我正在考虑打开 SQL 连接、循环通过集合并使用来自集合项的数据运行更新查询（存储过程或参数化查询），然后关闭连接。

哪个会给我更好的表现，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T22:01:25.430

在最新版本的 SQL Server 中，为存储过程和参数化查询缓存了执行计划。查询将有一次创建执行计划的成本，但这将非常小，甚至会在几次调用的开销中丢失。

从性能的角度来看，它们几乎是相同的。

例外情况是，如果您正在执行递归或嵌套查询（对于查询 1 中的每一行，执行查询 2），客户端和服务器之间的往返行程将累加。在这种情况下，proc 会好很多。

许多公司仍然有“Everything as a proc”规则，但这通常是由于对数据库的控制而不是性能相关。随着 LINQ 越来越受欢迎，这种情况可能会减少。

如果您的应用程序有一个（或几个）部署点，则使用您喜欢的任何一个。另一方面，如果您要部署到许多安装，那么存储过程可以在某些（但不是全部）情况下允许您更新数据库功能而无需重新部署客户端代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T22:12:29.660

很难肯定地说，因为有许多因素会影响性能。理论上，存储过程方法应该更快。

还有另一种解决方案，您可以将 XML 传递给存储过程，这样您就不必多次调用它。假设您可以并且知道如何将您的对象序列化为 XML。然后，您可以使用 Xquery、Open XML 或 sp_XML_preparedocument 以基于集合的方式从 XML 中检索数据并执行更新语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T04:23:35.557

这通常会变成程序员和 DBA 之间的宗教辩论。许多程序员倾向于喜欢预准备语句方法，因为它允许他们完全控制正在执行的查询，而 DBA 出于同样的原因喜欢存储过程方法。如果您在公司的开发人员和 DBA 之间没有明确的界限，并且您同时涉足开发和 DBA 角色，那么我可能会更倾向于存储过程路线，因为如果您将来需要对查询进行细微更改微调性能或修复错误，那么您不必重新编译和重新部署您的应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T22:00:37.973

存储过程通常是要走的路。也就是说，它还取决于您的 proc 编写的好坏。尝试在您的存储过程上运行执行计划，以确保您物有所值。此外，如果 SQL 实例与您的代码不在同一个盒子上，那么使用存储过程通常是更安全的方式以及服务器上的最佳性能。当您使用存储过程时，您将工作负载放在 SQL 框上，这将为您在存储过程中优化查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T22:19:46.337

使用直接查询或存储过程在性能（如果有的话）上没有太大差异，但是如果您使用不同的数据反复运行相同的查询，则绝对应该使用参数。

使用[Prepare](http://technet.microsoft.com/en-us/library/ms175528(SQL.90).aspx)方法确保重复使用相同的执行计划：

*   `SqlCommand`使用查询/过程创建对象。
*   创建`SqlParameter`具有指定数据类型但没有值的对象，并将它们添加到`Parameters`命令的集合中。
*   调用`Prepare`命令对象的方法。
*   循环数据只是设置参数值并执行命令。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-06T21:54:54.743

通常是存储过程，因为服务器可以预先优化执行计划。尽管编写良好的参数化查询比过于笼统的存储过程要好。

# .net - 在 PNG 中使用块

> ID：723392
> 
> 赞同：5
> 
> 时间：2009-04-06T21:51:07.870
> 
> 标签：.net, png

我正在寻找一种方法来获取和设置PNG文件中的那些奇怪的块，即在我的例子中，'zTXt'块。.Net 框架或任何其他已知程序集中是否有任何东西可以提供访问这些数据？如果已经完成，我想避免为此目的编写整个 PNG 读取器/写入器。

谢谢！

**进度更新：** 经过更多搜索，我想要完成的任务似乎没有任何预先设置。我现在正在尝试自己通读该文件，但在处理数据的压缩部分时遇到了问题。我在这里针对这个特定问题提出了另一个问题：[如何在文件的一部分上使用 DeflateStream？](https://stackoverflow.com/questions/762614/how-do-you-use-a-deflatestream-on-part-of-a-file)

一旦我得到这个工作，我会在这里发布代码作为自己的答案。（当然，除非其他人比我强。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-10T15:15:27.320

以下应该可以工作： http: [//sourceforge.net/projects/pngnet/](http://sourceforge.net/projects/pngnet/) 使用 Subversion 进行检查。它是一个用于对 png 文件进行低级访问的库和一个小型 C# 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T23:48:49.163

它必须是.net吗？这是一些 ruby​​ 代码，用于读取块并再次将它们写回。在中间插入您的处理

```
def extract_chunk(input, output)
   lenword = input.read(4) 
   length = lenword.unpack('N')[0]
   type = input.read(4)
   data = length>0 ? input.read(length) : ""
   crc = input.read(4)
   return nil if length<0 || !(('A'..'z')===type[0,1]) 

   #modify data here.

   output.write [data.length].pack('N')
   output.write type
   output.write data
   output.write crc(data)
   return type
end

def extract_png(input, output)
    hdr = input.read(8)
    raise "Not a PNG File" if hdr[0,4]!= "\211PNG"
    raise "file not in binary mode" if hdr[4,4]!="\r\n\032\n"
    output.write(hdr)
    loop do
      chunk_type = extract_chunk(input,output)
      p chunk_type
      break if  chunk_type.nil? || chunk_type == 'IEND' 
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T21:51:13.337

这是[用 Java 巧妙地](http://www.java2s.com/Code/Java/2D-Graphics-GUI/PNGfileformatdecoder.htm)读取整个 PNG 的代码。它很小，您应该能够挑选您需要的东西。

我认为翻译 it c# 会相当简单

# sql - 用于将数据从一个表合并到另一个表的 T-SQL

> ID：723395
> 
> 赞同：1
> 
> 时间：2009-04-06T21:52:13.593
> 
> 标签：sql, sql-server, sql-server-2008

假设有 2 个表 Table1 { ID, Name, Other } 和 Table2 { ID, Name, Other }。除了表 1 中的所有 Name 值都是 NULL 之外，它们都有相同的记录和相同的 ID。如何使用 T-SQL (SQL Server 2008) 将名称值从 Table2 导入 Table1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T21:55:21.730

```
Update Table1
Set Table1.Name = Table2.Name
From
Table1 INNER JOIN Table2 on Table1.ID = Table2.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T21:54:25.820

您正在寻找 MERGE 命令，它类似于您可能在其他地方读过的 UPSERT。这是一篇关于它的[快速文章](http://www.databasejournal.com/features/mssql/article.php/3739131/UPSERT-Functionality-in-SQL-Server-2008.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T21:55:11.480

```
UPDATE Table1
SET Table1.Name = Table2.Name
FROM Table2
WHERE Table1.Id = Table2.Id
--AND Table1.Name IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T21:57:01.460

只需加入表格并更新：

```
update t1
set [Name] = t2.Name
from Table1 t1
inner join Table2 t2 on t2.ID = t1.ID 
```

# jquery - Ajax 回调如何意识到用户的已验证会话已超时？

> ID：723396
> 
> 赞同：3
> 
> 时间：2009-04-06T21:52:52.843
> 
> 标签：jquery, ajax, django, authentication, http-authentication

我正在使用 django 和 jquery 来实现经过身份验证的会话和 Ajax 请求。

在我的网站上长时间不活动后，我已经验证了会话超时以注销经过验证的用户。我网站上的一些页面中有很多 AJAX 调用，要求用户处于经过身份验证的会话中。当用户长时间打开此类页面并且会话自动超时时，进行的任何 AJAX 调用都将失败并显示浏览器错误。我的网络堆栈（django）为这些 AJAX 请求返回登录重定向，但它们只是显示为 $.ajax() 的错误（使用 jquery。）

当我发现他们的身份验证会话已超时时，如何重新加载页面并通过 AJAX 请求将用户发送到登录页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-10T03:42:20.550

一种方法是使用一个脚本来 ping 一个页面以查看它是否仍处于登录状态，但这会增加您必须执行的 AJAX 请求的数量。

另一种选择是具有检查传入的 XMLHttpRequest 对象上的 HTTP 状态代码的`complete`功能：`$.ajax()`

```
$.ajax({..., complete = function(xhr, textStatus){
    if(xhr.status > 300 && xhr.status < 400) //you got a redirect
        window.location.href = '/login/';
    ...
    }, ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T21:56:54.067

真的很简单，让您查询的任何脚本返回某种错误代码，也许

```
{'error', 'notloggedin'} 
```

然后，您需要做的就是在您的 javascript 中检查此值。如果找到了，你就做类似的事情

```
window.location.href = '/login/'; 
```

使 javascript 重定向到登录页面（根据需要更改路径）

# text - 比较上一个和下一个文件中包含重复“存根”的许多文本文件，并自动删除重复文本

> ID：723397
> 
> 赞同：4
> 
> 时间：2009-04-06T21:53:47.867
> 
> 标签：text, scripting, nlp, duplicate-data

我有大量文本文件（1000 多个），每个文件都包含来自学术期刊的文章。不幸的是，每篇文章的文件还包含上一篇文章结尾（开头）和下一篇文章开头（结尾）的“存根”。

我需要删除这些存根以准备对文章进行频率分析，因为存根构成重复数据。

在所有情况下，没有一个简单的字段来标记每篇文章的开头和结尾。但是，在这两种情况下，重复文本的格式似乎相同且位于同一行。

将每个文件与下一个文件进行比较然后删除重复文本的 1 个副本的脚本将是完美的。这似乎是编程时非常常见的问题，所以我很惊讶我找不到任何可以做到这一点的东西。

文件名按顺序排序，因此将每个文件依次与下一个文件进行比较的脚本应该可以工作。例如

```
bul_9_5_181.txt
bul_9_5_186.txt

```

是两篇文章，一篇从第 181 页开始，另一篇从第 186 页开始。这两篇文章都包含在下面。

有两卷测试数据位于 [ [http://drop.io/fdsayre][1]](http://drop.io/fdsayre][1])

注意：我是一名学者，正在为心理学史上的一个项目对旧期刊文章进行内容分析。我不是程序员，但我确实有 10 年以上的 linux 经验，并且通常可以在我去的时候解决问题。

谢谢你的帮助

**文件名：bul_9_5_181.txt**

通感

ISI

大多数葡萄牙语单词表示黑色物体或与黑色有关的想法。诚然，这种关联并不是真正的联觉，但作者认为，这些合乎逻辑的自发关联与真实的有色试镜案例之间只是程度问题。参考

DOWNEY, JUNE E. 一个有色味觉的案例。阿米尔。J. of Psycho!., 1911, 22, S28-539MEDEIROS-E-ALBUQUERQUE。Sur un phenomene de synopsie presente par des Millions de sujets。/ 。德心理。规范等路径，1911, 8, 147-151。MYERS, CS 一例通感。英国人。J. of Psychol., 1911, 4, 228-238。

情感现象——密歇根大学约翰·F·谢泼德教授的实验

今年莱比锡实验室发表了三篇文章。Drozynski (2) 反对使用味觉和嗅觉刺激来研究有感觉的器质性反应，因为可能涉及呼吸障碍。他使用有节奏的听觉刺激，发现当以不同的速率和不同的分组给予时，每个受试者都伴随着独特的感觉。他用脉搏计和水体积描记器记录胸部呼吸和曲线。每个实验都以正常记录开始，然后给予刺激，然后是对比刺激；最后，取了另一个正常值。测量呼吸的长度和深度（没有记录时间线），并确定吸气长度与呼气长度的关系。还测量了脉搏的长度和高度。表格总结了作者在每种感觉的反应期间发现每个数量增加或减少的次数。伴随给定节奏的感觉状态总是复杂的，但结果是指那个似乎占主导地位的维度。仅从记录中复制了一些与正常和反应期无关的摘录。作者指出，兴奋会增加呼吸的频率和深度、吸气-呼气比以及脉搏的频率和大小。手臂体积有起伏。只要效果是安静的，它会导致速度和深度的降低 表格总结了作者在每种感觉的反应期间发现每个数量增加或减少的次数。伴随给定节奏的感觉状态总是复杂的，但结果是指那个似乎占主导地位的维度。仅从记录中复制了一些与正常和反应期无关的摘录。作者指出，兴奋会增加呼吸的频率和深度、吸气-呼气比以及脉搏的频率和大小。手臂体积有起伏。只要效果是安静的，它会导致速度和深度的降低 表格总结了作者在每种感觉的反应期间发现每个数量增加或减少的次数。伴随给定节奏的感觉状态总是复杂的，但结果是指那个似乎占主导地位的维度。仅从记录中复制了一些与正常和反应期无关的摘录。作者指出，兴奋会增加呼吸的频率和深度、吸气-呼气比以及脉搏的频率和大小。手臂体积有起伏。只要效果是安静的，它会导致速度和深度的降低 但结果是指似乎占主导地位的那个维度。仅从记录中复制了一些与正常和反应期无关的摘录。作者指出，兴奋会增加呼吸的频率和深度、吸气-呼气比以及脉搏的频率和大小。手臂体积有起伏。只要效果是安静的，它会导致速度和深度的降低 但结果是指似乎占主导地位的那个维度。仅从记录中复制了一些与正常和反应期无关的摘录。作者指出，兴奋会增加呼吸的频率和深度、吸气-呼气比以及脉搏的频率和大小。手臂体积有起伏。只要效果是安静的，它会导致速度和深度的降低

182

约翰·F·谢泼德

呼吸、吸气-呼气比、脉搏频率和大小。手臂体积显示出随着呼吸波增加的趋势。宜人性显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T20:44:04.513

看起来一个更简单的解决方案实际上会起作用。

似乎没有人使用文件名提供的信息。如果您确实使用了此信息，则可能无需在文件之间进行任何比较来识别重叠区域。编写 OCR 的人可能对这个问题进行了一些思考。

文件名中的最后一个数字告诉您该文件的起始页码是什么。此页码也单独出现在文件中的一行上。看起来这一行之前和之后都是空行。因此，对于给定的文件，您应该能够查看序列中下一个文件的名称，并确定您应该开始删除文本的页码。由于此页码出现在您的文件中，因此只需查找仅包含此页码的行（前后为空行）并删除该行和之后的所有内容。序列中的最后一个文件可以单独放置。

这是算法的大纲

1.  选择一个文件；调用它：file1
2.  查看下一个文件的文件名；调用它：file2
3.  从file2的文件名中提取页码；称它为：pageNumber
4.  扫描 file1 的内容，直到找到仅包含 pageNumber 的行
5.  确保此行前后各有一个空行。
6.  删除此行以及之后的所有内容
7.  移动到序列中的下一个文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-09T17:34:31.290

您可能应该尝试这样的事情（我现在已经在您提供的示例数据上对其进行了测试）：

```
#!/usr/bin/ruby

class A_splitter
    Title   = /^[A-Z]+[^a-z]*$/
    Byline  = /^BY /
    Number = /^\d*$/
    Blank_line = /^ *$/
    attr_accessor :recent_lines,:in_references,:source_glob,:destination_path,:seen_in_last_file
    def initialize(src_glob,dst_path=nil)
        @recent_lines = []
        @seen_in_last_file = {}
        @in_references = false
        @source_glob = src_glob
        @destination_path = dst_path
        @destination = STDOUT
        @buffer = []
        split_em
        end
    def split_here
        if destination_path
            @destination.close if @destination
            @destination = nil
          else
            print "------------SPLIT HERE------------\n" 
          end
        print recent_lines.shift
        @in_references = false
        end
    def at_page_break
        ((recent_lines[0] =~ Title  and recent_lines[1] =~ Blank_line and recent_lines[2] =~ Number) or
         (recent_lines[0] =~ Number and recent_lines[1] =~ Blank_line and recent_lines[2] =~ Title))
        end
    def print(*args)
        (@destination || @buffer) << args
        end
    def split_em
        Dir.glob(source_glob).sort.each { |filename|
            if destination_path
                @destination.close if @destination
                @destination = File.open(File.join(@destination_path,filename),'w')
                print @buffer
                @buffer.clear
              end
            in_header = true
            File.foreach(filename) { |line|
                line.gsub!(/\f/,'')
                if in_header and seen_in_last_file[line]
                    #skip it
                  else 
                    seen_in_last_file.clear if in_header
                    in_header = false
                    recent_lines << line
                    seen_in_last_file[line] = true
                  end
                3.times {recent_lines.shift} if at_page_break
                if recent_lines[0] =~ Title and recent_lines[1] =~ Byline
                    split_here
                  elsif in_references and recent_lines[0] =~ Title and recent_lines[0] !~ /\d/
                    split_here
                  elsif recent_lines.length > 4
                    @in_references ||= recent_lines[0] =~ /^REFERENCES *$/
                    print recent_lines.shift
                  end
                }
            } 
        print recent_lines
        @destination.close if @destination
        end
    end

A_splitter.new('bul_*_*_*.txt','test_dir') 
```

基本上，按顺序运行文件，并在每个文件中按顺序运行行，从每个文件中省略前一个文件中存在的行，并将其余行打印到 STDOUT（可以从中传输），除非目标指定了director（在示例中称为“test_dir”，请参见最后一行），在这种情况下，将在指定目录中创建与包含大部分内容的文件同名的文件。

它还删除了分页部分（期刊标题、作者和页码）。

它做了两个拆分测试：

*   对标题/署名对的测试
*   在参考部分之后的第一个标题行上进行测试

（应该很明显如何为额外的分割点添加测试）。

为后代保留：

如果您没有指定目标目录，它只会在输出流中的分割点处放置一个 split-here 行。这应该使测试更容易（您可以只`less`输出），并且当您希望它们在单个文件中时，只需将其通过管道传输到[`csplit`](http://www.gnu.org/software/coreutils/manual/html_node/csplit-invocation.html)（例如

```
csplit -f abstracts - '---SPLIT HERE---' '{*}' 
```

或其他东西）把它剪掉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-07T01:59:35.090

你有一个不平凡的问题。编写代码很容易在文件 1 的末尾和文件 2 的开头找到重复的文本。但是你不想删除重复的文本——你想把它*拆分*到第二篇文章的开头。正确分割可能很棘手——一个标记是全部大写，另一个是`BY`下一行开头的。

从连续文件中获取示例会有所帮助，但下面的脚本适用于一个测试用例。**在尝试此代码之前，请备份所有文件。** 该代码*会覆盖*现有文件。

实现是在[Lua](http://www.lua.org/)中。算法大致是：

1.  忽略文件 1 末尾和文件 2 开头的空白行。
2.  查找文件 1 的结尾和文件 2 的开头共有的一长串行。
    *   这通过尝试一系列 40 行，然后是 39 行，依此类推
3.  从两个文件中删除序列并调用它`overlap`。
4.  在标题处拆分重叠
5.  将重叠的第一部分附加到 file1；将第二部分添加到 file2。
6.  用行列表覆盖文件的内容。

这是代码：

```
#!/usr/bin/env lua

local ext = arg[1] == '-xxx' and '.xxx' or ''
if #ext > 0 then table.remove(arg, 1) end  

local function lines(filename)
  local l = { }
  for line in io.lines(filename) do table.insert(l, (line:gsub('', ''))) end
  assert(#l > 0, "No lines in file " .. filename)
  return l
end

local function write_lines(filename, lines)
  local f = assert(io.open(filename .. ext, 'w'))
  for i = 1, #lines do
    f:write(lines[i], '\n')
  end
  f:close()
end

local function lines_match(line1, line2)
  io.stderr:write(string.format("%q ==? %q\n", line1, line2))
  return line1 == line2 -- could do an approximate match here
end

local function lines_overlap(l1, l2, k)
  if k > #l2 or k > #l1 then return false end
  io.stderr:write('*** k = ', k, '\n')
  for i = 1, k do
    if not lines_match(l2[i], l1[#l1 - k + i]) then
      if i > 1 then
        io.stderr:write('After ', i-1, ' matches: FAILED <====\n')
      end
      return false
    end
  end
  return true
end

function find_overlaps(fname1, fname2)
  local l1, l2 = lines(fname1), lines(fname2)
  -- strip trailing and leading blank lines
  while l1[#l1]:find '^[%s]*$' do table.remove(l1)    end
  while l2[1]  :find '^[%s]*$' do table.remove(l2, 1) end
  local matchsize  -- # of lines at end of file 1 that are equal to the same 
                   -- # at the start of file 2
  for k = math.min(40, #l1, #l2), 1, -1 do
    if lines_overlap(l1, l2, k) then
      matchsize = k
      io.stderr:write('Found match of ', k, ' lines\n')
      break
    end
  end

  if matchsize == nil then
    return false -- failed to find an overlap
  else
    local overlap = { }
    for j = 1, matchsize do
      table.remove(l1) -- remove line from first set
      table.insert(overlap, table.remove(l2, 1))
    end
    return l1, overlap, l2
  end
end

local function split_overlap(l)
  for i = 1, #l-1 do
    if l[i]:match '%u' and not l[i]:match '%l' then -- has caps but no lowers
      -- io.stderr:write('Looking for byline following ', l[i], '\n')
      if l[i+1]:match '^%s*BY%s' then
        local first = {}
        for j = 1, i-1 do
          table.insert(first, table.remove(l, 1))
        end
        -- io.stderr:write('Split with first line at ', l[1], '\n')
        return first, l
      end
    end
  end
end

local function strip_overlaps(filename1, filename2)
  local l1, overlap, l2 = find_overlaps(filename1, filename2)
  if not l1 then
    io.stderr:write('No overlap in ', filename1, ' an 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-15T01:28:26.257

这是 Perl 中另一个可能的解决方案的开始（它按原样工作，但如果需要，可能会变得更复杂）。听起来好像您所关心的只是删除整个语料库中的重复项，并且并不真正关心一篇文章的最后一部分是否在下一篇的文件中，只要它没有在任何地方重复。如果是这样，此解决方案将删除重复的行，在整个文件集中只留下任何给定行的一个副本。

您可以只在包含不带参数的文本文件的目录中运行该文件，或者指定一个文件名，该文件名包含您想要按照处理顺序处理的文件列表。我推荐后者，因为当在命令行上使用*ls*或在 Perl 脚本中使用*glob*等简单命令时，您的文件名（至少在您提供的示例文件中）不会自然地按顺序列出。因此，它不一定会相互比较正确的文件，因为它只是顺着列表运行（由 glob 命令输入或生成）。如果您指定列表，则可以保证它们将按正确的顺序进行处理，并且不会花费很长时间来正确设置它。

该脚本只是打开两个文件并记下第二个文件的前三行。然后它为第一个文件打开一个新的输出文件（原始文件名 + '.new'），并将第一个文件中的所有行写到新的输出文件中，直到找到第二个文件的前三行。很有可能最后一个文件中的第二个文件没有三行，但在我抽查的所有文件中，由于期刊名称标题和页码，这似乎是这种情况。一行肯定是不够的，因为期刊标题通常是第一行，这会提前中断。

我还应该注意，您输入的文件列表中的最后一个文件将不会被处理（即基于它创建一个新文件），因为此过程不会更改它。

这是脚本：

```
#!/usr/bin/perl
use strict;

my @files;
my $count = @ARGV;
if ($count>0){
    open (IN, "$ARGV[0]");
    @files = <IN>;
    close (IN);
} else {
    @files = glob "bul_*.txt";
}
$count = @files;
print "Processing $count files.\n";

my $lastFile="";
foreach(@files){
    if ($lastFile ne ""){
        print "Processing $_\n";
        open (FILEB,"$_");
        my @fileBLines = <FILEB>;
        close (FILEB);
        my $line0 = $fileBLines[0];
            if ($line0 =~ /\(/ || $line0 =~ /\)/){
                    $line0 =~ s/\(/\\\(/;
                    $line0 =~ s/\)/\\\)/;
            }
        my $line1 = $fileBLines[1];
        my $line2 = $fileBLines[2];
        open (FILEA,"$lastFile");
        my @fileALines = <FILEA>;
        close (FILEA);
        my $newName = "$lastFile.new";
        open (OUT, ">$newName");
        my $i=0;
        my $done = 0;
        while ($done != 1 and $i < @fileALines){
            if ($fileALines[$i] =~ /$line0/ 
                && $fileALines[$i+1] == $line1
                && $fileALines[$i+2] == $line2) {
                $done=1;
            } else {
                print OUT $fileALines[$i];
                $i++;
            }
        }
        close (OUT);
    }
    $lastFile = $_;
} 
```

**编辑：**在第一行中添加了括号检查，稍后将进入正则表达式检查重复性，如果发现则将它们转义，以免它们弄乱重复性检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T22:05:14.640

存根是否与前一个文件的结尾*相同*？还是不同的行尾/OCR 错误？

有没有办法辨别文章的开头？也许是缩进的摘要？然后，您可以浏览每个文件并丢弃第一个标题之前和（包括）第二个标题之后的所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T22:35:08.640

标题和作者总是在一行吗？那一行是否总是包含大写的“BY”这个词？如果是这样，您可能可以使用**awk**做一个公平的工作，使用这些标准作为开始/结束标记。

**编辑：**我真的不认为使用 diff 会起作用，因为它是一种用于比较大致相似文件的工具。您的文件（从差异的角度来看）实际上完全不同 - 我认为它会立即不同步。但是，我不是差异大师 :-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-15T17:21:52.083

假设存根在两个文件中完全相同：

```
#!/usr/bin/perl

use strict;

use List::MoreUtils qw/ indexes all pairwise /;

my @files = @ARGV;

my @previous_text;

for my $filename ( @files ) {
    open my $in_fh,  '<', $filename          or die;
    open my $out_fh, '>', $filename.'.clean' or die;

    my @lines = <$in_fh>;
    print $out_fh destub( \@previous_text, @lines );
    @previous_text = @lines;
}

sub destub {
    my @previous = @{ shift() };
    my @lines = @_;

    my @potential_stubs = indexes { $_ eq $lines[0] } @previous;

    for my $i ( @potential_stubs ) {
        # check if the two documents overlap for that index
        my @p = @previous[ $i.. $#previous ];
        my @l = @lines[ 0..$#previous-$i ];

        return @lines[ $#previous-$i + 1 .. $#lines ]
                if all { $_ } pairwise { $a eq $b } @p, @l;

    }

    # no stub detected
    return @lines;
} 
```

# c#-2.0 - 用于分离数据访问、业务逻辑和表示的简单优雅模式

> ID：723404
> 
> 赞同：1
> 
> 时间：2009-04-06T21:55:16.800
> 
> 标签：c#-2.0, data-access-layer, business-logic-layer, presentation-layer

我需要一个简单的模式来完成上述操作。有几点需要注意：

1）我有一个类，我必须使用它来进行实际数据检索并返回 DataTable

2）我不关心支持所有可能的数据库类型的通用接口，我们坚持使用一种数据库类型。

3）我如何优雅地捕获错误并通知用户发生了错误。

4) 不要让我学习 MVC - 现在不是一个选择。

我对实际的图案设计很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T22:14:04.463

您想使用[MVC](http://en.wikipedia.org/wiki/Model-view-controller)模式将业务逻辑与表示分离（注意我**不是**在谈论[ASP.NET MVC 框架](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)）和[DAO](http://en.wikipedia.org/wiki/Data_Access_Object)模式将业务逻辑与数据访问分离。

返回 DataTable 的类成为模型的一部分。您编写了一个层（每个域对象的 DAO），它获取您的 DataTable 并将其转换为您的各种域对象。您的 UI 不应包含任何除了向用户呈现输出之外的逻辑；从模型中检索数据的任何实际逻辑都在控制器层中处理，该层获取用户从模型中请求的数据并将其发送到适当的视图以将其呈现给用户。

异常应该在层边界处理；要么捕获并做一些事情（可能只是记录它并将用户发送到错误页面），要么在适当的情况下包装更高级别的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T23:05:25.477

> 不要让我学习 MVC - 现在不是一个选择。

您可以在不使用 ASP MVC 框架的情况下执行简单的 MVC 或 MVP 模式。介绍起来很简单。这是一个非常简单的示例[MVP 示例](http://haacked.com/archive/2006/08/09/ASP.NETSupervisingControllerModelViewPresenterFromSchematicToUnitTestsToCode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:27:01.563

有许多模式可以接近您所描述的。我建议购买 Martin Fowler 的优秀著作*《企业架构模式》，*特别是第 14 章*。Web 表示模式。*您会发现，任何将表示、域（业务逻辑）和数据源分开的认真尝试都会导致您进入同一主题的许多变体之一。

MVC、MVP、可视化代理等都分解为三层，不同的是每一层的职责以及层之间的通信方式。

例如，*被动视图*模式基本上剥离了 UI 层与表示不直接相关的任何内容。如果某个条件为真，则典型示例是您要突出显示的字段。在*被动视图*中，表单仅包含确定是否应突出显示该字段的逻辑。触发此状态的业务规则将位于不直接依赖于实际视图的演示者/控制器层中。

就数据源层而言，主要好处是无法立即切换数据库。主要好处是对数据库模式的更改只会影响数据源层，不会扩展到应用程序的其余部分。如果您坚持使用数据集，一个好方法是*Table Data Gateway*模式。

# sql-server-2000 - 在 sql server 2000 中添加双引号的最佳方法是什么

> ID：723409
> 
> 赞同：0
> 
> 时间：2009-04-06T21:55:57.783
> 
> 标签：sql-server-2000, escaping, quotes

我有以下。

```
SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO

ALTER  FUNCTION doublequotestring(@str nvarchar(1998)) RETURNS nvarchar(4000) AS
BEGIN
   DECLARE @ret nvarchar(4000),
           @sq  char(1)
   SELECT @sq = '"'
   SELECT @ret = replace(@str, @sq, @sq + @sq)
   RETURN(@sq + @ret + @sq)
END

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T23:42:43.610

使用[QUOTENAME](http://msdn.microsoft.com/en-us/library/aa238369(SQL.80).aspx)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T22:03:29.013

为什么不简单：

```
alter function doublequotestring(@str nvarchar(1998)) returns nvarchar(4000)
begin
    return '"' + replace(@str, '"', '""') + '"'
end 
```

# javascript - TinyMCE - 外部工具栏位置

> ID：723410
> 
> 赞同：5
> 
> 时间：2009-04-06T21:56:28.887
> 
> 标签：javascript, css, tinymce

我正在尝试使用 TinyMCE 创建一个多文本框、点击编辑类型的图形内容编辑器。我已经让 TinyMCE 达到了可以添加和删除它们、定位和调整它们大小、单击以编辑它们等等的地步——但有一件事困扰着我，那就是工具栏。

我有一个外部工具栏，我试图将其放置在页面的底部边缘，以及我的“保存并关闭”按钮和其他一些工具按钮。外部工具栏由 TinyMCE 在具有类的 DIV 中创建`"mceExternalToolbar"`。我尝试在页面样式表中设置`position: fixed`和`left:`和`top:`属性，但无济于事 - TinyMCE在创建它时设置`position: absolute`和在 DIV 上。`top: -28px`

由于项目限制，我无法修改 TinyMCE 的源代码，但我可以用额外的 CSS 文件对其进行补充。

谁能指出我正确的方向以正确定位工具栏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T22:11:15.310

提供的样式表中的 CSS 选择器会覆盖您正在编写的选择器。您需要做的是使用更具体的选择器定位工具栏元素：

```
body div.mceExternalToolbar {
    position: fixed ;
    top: -28px ;
}; 
```

或者使用`!important`指令覆盖它：

```
.mceExternalToolbar {
    position: fixed !important ;
    top: -28px !important ;
} 
```

有关选择器特异性和 的更多详细信息`!important`，请参阅[W3C 的文档](http://www.w3.org/TR/CSS21/cascade.html#specificity)。

# visual-studio - 我可以在 Visual Studio 2008 中使用 Visual Studio 6 编译的 C++ 静态库吗？

> ID：723416
> 
> 赞同：4
> 
> 时间：2009-04-06T21:59:04.187
> 
> 标签：visual-studio, visual-studio-2008, visual-c++, visual-c++-6, static-libraries

是否可以在 Visual Studio 2008 中使用使用 Visual Studio 6 编译的 C++ 静态库 (.lib)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T22:40:09.593

这真的取决于。lib是否只公开'extern“C”'函数，其中内存由直接的Win32方法（CoTaskMemAlloc等）管理，或者调用者永远不会释放被调用者分配的内存，反之亦然？您是否只依赖自 VS 6 以来没有太大变化的基本库？如果是这样，你应该没问题。

有 2 件基本的事情需要注意。更改第 3 方库使用的全局变量，以及更改这些第 3 方库定义的结构、类等结构。例如，CRT 内存分配器可能在两个版本之间更改了其隐藏的分配管理结构，因此让一个版本的库分配一块内存而让另一个版本释放它可能会导致崩溃。

再举一个例子，如果您通过接口公开 C++ 类并且它们依赖于 MFC 等 MS 运行时库，则类布局有可能在 VS 6 和 VS 2008 之间发生了变化。这意味着访问类上的成员/字段可以做错事，导致不可预知的结果。如果 .lib 以任何方式使用 MFC，您可能会感到厌烦。MFC 定义并在内部使用大量全局变量，如果 MFC 基础结构在托管环境中发生变化（自 VS 6 以来发生了很大变化，顺便说一句），通过 .lib 中的操作对 MFC 全局变量的任何访问都可能导致失败。

我还没有详细研究 MFC 标头中发生了哪些更改，但我已经看到在不同 VS 版本中编译的基于 MFC/ATL 的类二进制文件之间存在不可预知的行为。

除了这些问题之外，像 strtok() 这样依赖于运行时库中定义的静态全局变量的函数还存在风险。我不确定，但我担心如果您在多线程 CRT 上创建的线程上使用期望单线程 CRT 的客户端，这些静态变量可能无法正确初始化。查看 _beginthread() 的文档以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T22:02:39.483

我不应该想为什么不这样做——只要你保持通常的 CRT 内存边界（即，如果你在库函数中分配内存，总是从库中释放它——通过调用库中的函数来进行释放）。

这种方法适用于使用各种编译器编译的 dll，静态链接的库也应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T22:07:38.753

是的。这根本不应该有任何问题。正如[gbjbaanb](https://stackoverflow.com/users/13744/gbjbaanb)提到的，你需要注意你的记忆，但 VS2008 仍然可以使用它。只要您不尝试将 CLR、（托管）代码与它混合。如果可能的话，我建议不要这样做。但是，如果您谈论的是原始 C 或 C++ 代码，那当然可以。

你到底打算用什么？（这个库中有什么？）您是否已经尝试过，但遇到了问题，或者您只是在浪费大量时间试图让某些无法正常工作的东西之前进行检查？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T22:09:31.290

肯定会奏效的。

您是在问在 VS2008 中的何处对引用进行编码吗？

如果是这样，请转到 proj props -> Linker -> Input on Configuration properties on the property pages。查找“附加依赖项”并在那里编写 .LIB 代码。

转到 proj props -> Linker -> General 并在“附加库目录”中对库路径进行编码。

应该这样做！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T22:12:32.517

在某些情况下，答案是否定的，当我们从 VS6 迁移到 VS2k5 时，我们必须重建所有库，因为内存模型已经改变，CRT 功能也不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-09T18:12:09.487

VC6、VS2003、VS2005 和 VS2008 之间有一些重大变化。Visual C++（在 VS2005 中）停止支持单线程、静态链接的 CRT 库。[这里](http://msdn.microsoft.com/en-us/library/ms235427.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms177253.aspx)列举了一些重大变化。这些更改将影响您在以后的版本中使用 VC6 构建的库。

# django - Django Admin 中的自定义操作

> ID：723421
> 
> 赞同：17
> 
> 时间：2009-04-06T22:01:17.223
> 
> 标签：django, django-admin

在我的 Django 应用程序中，我有一个 Newsletter 模型。现在我希望能够从 Django Admin***发送***时事通讯（甚至***重新发送）。***

我可以在方法上加上一个钩子来做到这一点，`Model.save()`但是还有另一种不与模型相关的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-06T22:30:14.453

[管理员操作](http://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/#ref-contrib-admin-actions)允许您轻松连接自定义操作，这些操作可以对管理员列表页面中的选定项目执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T22:30:29.650

如果你是从管理员那里做的，那么你需要覆盖 save() 方法，但它可以是 AdminModel 保存...不需要是完整的模型保存。

但是，如果您要发送*大量*电子邮件，更好的方法是安装[django-mailer](http://code.google.com/p/django-mailer/)，它将电子邮件放入队列中以供以后处理，然后为您提供新的管理命令：send_mail。

因此，一旦您准备好发送时事通讯，您就可以手动运行`python manage.py send_mail`. 任何有错误的电子邮件都将被移至延迟队列，您可以稍后重试发送它们。

您可以通过`manage.py send_mail`从 cron 运行来自动执行此操作。

如果您真的想从管理站点获得幻想并执行此操作，请安装[django-chronograph](http://code.google.com/p/django-chronograph/)并从那里设置您的 send_mail 时间表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-30T15:19:05.817

你可以试试这个[https://www.youtube.com/watch?v=WvL1cR2MgLI](https://www.youtube.com/watch?v=WvL1cR2MgLI)

只是改变

```
 def available (modeladmin,request,queryset):
    queryset.update(status='ava')

def not_available (modeladmin,request,queryset):
    queryset.update(status='not') 
```

类似于

```
def send(modeladmin, request, queryset):

    for data in queryset:

        subject=data.title
        message=data.mesage

        for d in Users.objects.filter(newsletter=True):
            email=d.email

            sendemail = EmailMessage(subject, message+unsubscribe,    'emailo@mdjangotutsme.com',
                [email], [],
                headers = {'Reply-To': 'emailo@mdjangotutsme.com'})

            sendemail.content_subtype = "html" 

            sendemail.send() 
```

# python - 使用标准输入管道控制 Windows 控制台应用程序

> ID：723424
> 
> 赞同：1
> 
> 时间：2009-04-06T22:01:25.600
> 
> 标签：python, windows, command-line, subprocess, jtag

我正在尝试使用 subprocess 模块从 Python 控制控制台应用程序（Segger 的 JTAG 应用程序）。应用程序在标准输出上表现正确，但似乎没有读取标准输入。如果启用 shell，我可以输入输入并控制应用程序，但我需要以编程方式执行此操作。相同的代码适用于向 cmd.exe 之类的命令发出命令。

我猜是直接读取键盘而不是标准输入。有什么想法可以发送应用程序输入吗？

```
from subprocess import Popen, PIPE, STDOUT
jtag = Popen('"C:/Program Files/SEGGER/JLinkARM_V402e/JLink.exe"', shell=True,
                        universal_newlines=True,
                        stdin=PIPE,
                        stdout=PIPE,
                        stderr=STDOUT)

jtag.stdin.write('usb\n')
jtag.stdin.flush()

print "Stdout:"
while True:
    s = jtag.stdout.readline()
    if not s:
        break
    print s,

jtag.terminate() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T00:16:30.143

正如 shoosh 所说，我会尝试验证应用程序是否真的在寻找键盘输入。如果是，您可以尝试 Win32 消息传递，或通过自动化发送键盘输入。

对于消息传递路径，您可以通过 ctypes 使用[EnumWindows](http://msdn.microsoft.com/en-us/library/ms633497.aspx)函数找到您要查找的窗口，然后使用 PostMessage 向其发送 WM_KEYDOWN 消息。

您还可以通过[pywinauto](http://pywinauto.openqa.org/)发送键盘输入，或通过 win32com发送[AutoIt](http://www.autoitscript.com/autoit3/index.shtml)的 ActiveX 控件。

使用 AutoIt：

```
from win32com.client import Dispatch

auto = Dispatch("AutoItX3.Control")
auto.WinActivate("The window's title", "")
auto.WinWaitActive("The window's title", "", 10)

auto.Send("The input") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T22:40:50.060

```
I'm guessing that the keyboard is being read directly instead of stdin 
```

这是一个非常强的假设，在拼接解决方案之前，您应该尝试以某种方式验证它。这样做有不同的层次。其实我现在能想到的有两个：

*   等待来自主窗口循环的键盘事件。如果是这种情况，那么您可以简单地通过向窗口发送正确类型的消息来模拟键盘。这些可能是枯萎的`WM_KEYDOWN`，或者`WM_CHAR`可能是其他一些相关的变体。
*   实际轮询硬件，例如使用`GetAsyncKeyState()`. 这有点不太可能，如果这真的发生了，我怀疑你可以做任何事情来以编程方式模拟它。

对此的另一种看法是尝试使用屏幕键盘并查看它是否适用于应用程序。如果确实如此，请弄清楚如何模拟它的作用。

一些可能有用的工具 -

*   Spy++（与 Visual Studio 一起提供）- 允许您查看进入窗口的消息
*   [strace](http://www.intellectualheaven.com/default.asp?BH=projects&H=strace.htm)允许您查看进程正在进行的系统调用。

# java - 为什么这个简单的小程序占用了我 50% 以上的 CPU？

> ID：723428
> 
> 赞同：1
> 
> 时间：2009-04-06T22:03:12.040
> 
> 标签：java, applet, cpu

我写了一个简单的小程序作为制作游戏的基础，它已经占用了我 50% 以上的 CPU。我在一个 3ghz P4 和 1.5gb 内存上，所以我知道它不应该占用那么多。

```
import java.awt.*;
import java.applet.*;

public class applettest extends Applet implements Runnable {

    long lastFrame;

    public void init() { 
        (new Thread(this)).start();
    }

    public void paint(Graphics g) {
        g.drawString("Welcome to Java!!", 50, 60 ); 
    }

    public void run() { 
        while(true) {
            // code here
            repaint();

            try{
                // wait 16 milliseconds to cap frame rate to 60 fps
                while (System.nanoTime() < lastFrame + 160000000)       {
                    Thread.yield();
                }

                lastFrame = System.nanoTime();
            }

            catch(Exception e){}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T22:11:02.147

尝试用[**_**](http://en.wikipedia.org/wiki/Busy_waiting)

```
lastFrame = System.currentTimeMillis();

while(true) 
{
   repaint();

   long msSleep = 16 - (System.currentTimeMillis() - lastFrame);
   lastFrame = System.currentTimeMillis();

   if(nsToSleep > 0)
   {
      Thread.sleep(msSleep);
   }
   else
   {
      Thread.yield();  // Only necessary if you want to guarantee that
                       // the thread yields the CPU between every frame
   }
} 
```

这将保证帧之间的时间**至少为 16ms**。如果您的渲染时间小于 16 毫秒，并且没有任何其他线程占用 CPU，它将以 60 fps 运行。

您的原始解决方案将强制执行最少 16 毫秒，但它必须不断[轮询](http://en.wikipedia.org/wiki/Busy_waiting)系统时间（使用 CPU），直到经过必要的时间。

**笔记：**

*   `repaint()`是一个异步调用（即[它会立即返回](http://www.ryerson.ca/~dgrimsha/courses/cps840/repaint.html)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T05:45:36.343

抱歉，这篇文章更多的是“以及更多信息......”类型而不是直接答案，我认为现在已经给出了 - 我只是认为不要让评论中的东西丢失是有帮助的。

这个线程似乎对 Thread.sleep() 和 Thread.yield() 之类的方法实际上做了很多（公认的典型）误解。我之前写过一些人们可能会觉得有趣的材料，我试图澄清其中一些问题：[Thread.sleep()](http://www.javamex.com/tutorials/threads/sleep.shtml)（包括不同负载水平下的行为图）、[Thread.yield()](http://www.javamex.com/tutorials/threads/yield.shtml)和- - 与此相关，虽然这里没有提到，但人们可能会对我对[线程优先级](http://www.javamex.com/tutorials/threads/priority.shtml)的看法感兴趣。

顺便说一句，在这种情况下**使用 System.nanoTime() 通常没有任何好处**：无论如何，您只会得到一个四舍五入到最接近毫秒的时间。我会为你自己节省检索纳秒时钟时间的笨拙计算和潜在开销（尽管后者也不是那么糟糕），只需使用良好的 ole' 传统 System.currentTimeMillis()。如果你的线程睡过头了，下次只需少睡一点就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T22:12:34.293

您正在忙着等待，直到时间达到某个阈值。但是，屈服并不意味着如果没有其他线程想要时间，您的线程就会停止运行......

如果您想等待并减少 CPU 使用，请考虑 Thread.sleep

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T22:35:30.900

请注意，1600000 ns = 1.6 ms，因此您的睡眠时间可能没有预期的那么长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T05:26:36.747

Thread.sleep 和忙等待之间的区别在于，当您让线程进入睡眠状态时，您是在告诉计算机您在 x 秒内不需要做任何事情，而 pc 将让其他进程使用该时间。

然而，在忙碌的等待中，你告诉你的机器不断地运行循环代码，即使它并没有真正完成任何事情。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-06T22:11:43.190

由于 java 没有使用 CPU 的第二个内核，您可能只看到 50%。

您的代码将尽可能快地进行加法和比较。

```
// wait 16 milliseconds to cap frame rate to 60 fps
while (System.nanoTime() < lastFrame + 16000000)        {
  Thread.yield();
} 
```

使用 Thread.sleep(16) 代替带有大量数学运算的紧密 while 循环。

# c# - 使用什么类型将一组值保存在用户控件的状态中？

> ID：723431
> 
> 赞同：1
> 
> 时间：2009-04-06T22:03:31.727
> 
> 标签：c#, asp.net, serialization, user-controls

我有一个用于某种用户控件的基类，并且在该基类及其继承的类中，我想存储一些属性。我用

```
protected override object SaveControlState()
protected override void LoadControlState(object savedState) 
```

保存或加载我的自定义值的方法。因为我只能使用对象类型的 1 个参数，所以如果我想使用超过 1 个变量，我必须使用某种列表。

我试着用

```
[Serializable]
public class ControlSate : Dictionary<string, object>, ISerializable
{   
    void ISerializable.GetObjectData(SerializationInfo info, 
      StreamingContext context)
    {
    }

    public ControlSate(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {    
    }

    public ControlSate()
        : base()
    {
    }
} 
```

但它没有用，并且正在寻找我读过 Dictionary 不可序列化的解决方案。

所以，我的问题*是我应该使用什么类型来处理用户控件状态中的一组值？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T22:06:54.543

虽然`LoadControlState`确实通过了你，`Object`但它可能`Object`是一个`Object[]`. 换句话说，我们非常欢迎您`Objects`在 ControlState 中存储一个数组。我还相信 ControlState 已针对该[`System.Web.UI.Pair`](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.aspx)类型进行了优化，因此您可以根据需要在 ControlState 中创建对象树。

请阅读[这篇优秀的文章](http://haacked.com/archive/2007/03/16/gain-control-of-your-control-state.aspx)，了解在 ControlState 中存储多个值的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T01:05:48.090

为了存储复杂的状态，有 IStateManager 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T04:03:48.693

这很奇怪。如果您查看 Reflector 中的通用 Dictionary<T,U> ，它具有 [Serializable] 属性。我注意到你有一个 Dictionary<string,object>，所以这里是 U = 'object'。'U'的真正类型是什么？如果您对“U”使用复杂类型，那么也需要标记为 [Serializable]。您可能还需要将每个字段和/或属性显式标记为 [Serializable]。如果这不起作用，可能值得尝试使用 List<KeyValuePair<T,U>>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T13:10:55.177

根据编译器，我会质疑属性的可序列化属性：

属性“Serializable”在此声明类型上无效。它仅对“类、结构、枚举、委托”声明有效。

# javascript - 您可以使用 jQuery 的 $.load() 函数将表单插入页面吗？

> ID：723432
> 
> 赞同：0
> 
> 时间：2009-04-06T22:04:01.693
> 
> 标签：javascript, jquery, ajax, firefox, innerhtml

我有一个页面，其中有一个拖放表，其中行的顺序决定了小计的值。然而，它比简单的加法更复杂，我宁愿不复制 JavaScript 中的逻辑来更新值。

一个简单的解决方案是使用 Ajax 重新加载整个页面，然后从通过 Ajax 获取的页面中替换表。也许这不是最优雅的解决方案，但我认为这是完成工作的一种快速方法，目前可以接受。

你可以像这样使用 jQuery 来做到这一点：

```
$('#element-around-table').load(document.location.href + ' #table-id'); 
```

但是，我的“简单”解决方案结果并不是那么简单，因为该表还包含一个`<form>`未在 Firefox 中显示的标签（Safari 有效）。

当我使用 Firebug 检查页面时，我看到了表单，但它和它的元素是灰色的。

在网上搜索，我发现一个人说 FF3 和 IE从通话中去除标签的[帖子相当混乱。](http://www.jqueryhelp.com/viewtopic.php?t=935&start=0&postdays=0&postorder=asc&highlight=&sid=3bbfd58b10cde4db6961f2c2fdf6f062)`<form>``innerHTML`

我可能会继续以其他方式执行此操作，但为了我将来的参考，我想知道：是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T22:33:51.077

那篇文章相当混乱，我刚刚测试了你的代码，它运行良好。表单标签在 Firefox 3.0.8 中显示得很好。

查看您的代码示例，尽管我想知道您是否只是给出了一个不完整的示例...确保您调用的页面**仅**返回该包装器元素内部的html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T23:28:22.397

我以前遇到过这种类型的事情。需要将 FORM 标签添加到 DOM。如果它们是使用写​​入 innerHTML 的方法添加的，则该标记将出现，但就 JavaScript 而言它不会存在。

# perl - 我可以从 Rose::DB::Object 元数据创建一个表（如果不存在）吗？

> ID：723435
> 
> 赞同：2
> 
> 时间：2009-04-06T22:05:10.223
> 
> 标签：perl, orm, rose-db-object

[我在CPAN 文档](http://search.cpan.org/dist/Rose-DB-Object/)中找不到它——有没有办法`IF NOT EXISTS`从手动输入的`Rose::DB::Object`元数据创建一个表（）？

我使用 SQLite 作为引擎，如果它碰巧很重要。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T02:01:50.593

虽然可以使用[Rose::DB::Object::Loader](http://search.cpan.org/dist/Rose-DB-Object/lib/Rose/DB/Object/Loader.pm)从现有 SQL 模式创建[Rose::DB::Object](http://search.cpan.org/dist/Rose-DB-Object/)类（作为磁盘上的文件或仅在内存中） ，但目前没有内置的做相反的方法：从[Rose::DB::Object](http://search.cpan.org/dist/Rose-DB-Object/)类定义生成一个 SQL 表定义。`.pm`

为了做这样的事情，我建议考虑使用[SQL::Translator](http://search.cpan.org/dist/SQL-Translator/)。所有的[Rose::DB::Object 元数据](http://search.cpan.org/dist/Rose-DB-Object/lib/Rose/DB/Object/Metadata.pm)都是现成的。只需调整它以适应`SQL::Translator`'s 的要求。如果您在这方面需要更多指导或帮助，我建议您在[RDBO 邮件列表](http://groups.google.com/group/rose-db-object)上四处询问。

# windows - Windows下获取USB键盘的序列号

> ID：723449
> 
> 赞同：3
> 
> 时间：2009-04-06T22:10:46.983
> 
> 标签：windows, hardware, usb

许多 USB 设备包含一个唯一的序列号（实际上是一个 Unicode 字符串），主机可以将其与 16 位供应商和产品 ID 号结合使用，以唯一地标识设备。

我试图弄清楚如何编写一个能够显示连接到系统的所有 USB 人机接口设备列表的 Windows 应用程序。该列表将为每个 HID 保留一行，包括系统键盘。列表中有供应商 ID、产品 ID 和序列号的列。

我可以通过`SetupDiGetClassDevs`使用返回的 GUID调用`HidD_GetHidGuid`并通过重复调用`SetupDiEnumDeviceInterfaces`. 然后，我可以调用`SetupDiGetDeviceInterfaceDetail`以获取每个设备的路径，我可以使用`CreateFile`. 从那里我可以通过调用`HidD_GetAttributes`.

我无法弄清楚如何检索序列号字符串。当我搜索此问题的解决方案时，我发现了很多有关如何获取 USB 大容量存储设备序列号的信息，但似乎没有任何信息适用于任何其他类型的 USB 设备。我很高兴发现检索序列号字符串的通用方法或 HID 特定方法。

我有一种感觉，Win32 端口`libusb`可以轻松管理这个问题，但不幸的是，我需要一个仅依赖于 Windows 附带的库的解决方案，例如包含上述功能的 DLL`setupapi`和DLL。`hid`

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-23T04:19:45.480

事实证明，给定如上所述的句柄，它`HID.dll`定义了一个调用的函数`HidD_GetSerialNumberString`，它完全符合我的要求。`CreateFile`刚刚试了一下，效果很好。还有一些函数可以检索设备描述符`HidD_GetManufacturerString`中`HidD_GetProductString`引用的其他字符串描述符，甚至可以在`HidD_GetIndexedString`给定索引的情况下获取任意字符串描述符（可能是因为允许 HID 描述符包含字符串描述符索引）。我现在觉得很傻——答案一直就在我的眼皮底下。

感谢大家花时间阅读并回答我的问题！我将继续接受 Alphaneo 的答案，因为这听起来很有希望，事实上，当我偶然发现这个答案时，我正在等待 DDK 下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T02:06:44.560

有没有试过DDK自带的USBVIew源代码。USBView 工具显示任何 USB 设备的序列号，并且源随 DDK 一起提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T12:51:13.993

您是否尝试过搜索 Hid 键盘的输入记录、输出记录和功能记录的 HID 定义文档。这应该向您显示您可以通过 HID 退出/进入键盘的“事物”列表。

另外，我知道可以通过软件枚举 HID 记录定义。大约 1 年前我做过类似的事情，但我不记得头顶的细节了。这样做可以让您看到键盘 USB 类作为标准接口发布的内容。

我希望它可以为您提供一些指导，以找出您正在寻找的东西。对不起，我不能更精确！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-13T18:09:10.817

我推荐这本书[USB Complete](http://www.lvr.com/usbc.htm)。第 4 章枚举：主机如何了解设备具有您需要的信息。

[此页面](http://www.lvr.com/usb.htm)有许多指向信息的链接，以及指向您可以使用的库和实用程序的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-08T09:37:05.090

您可以使用它`GetVolumeInformation`来获取连接的任何硬件的序列号。

# javascript - 客户端分页

> ID：723459
> 
> 赞同：1
> 
> 时间：2009-04-06T22:13:05.243
> 
> 标签：javascript, search, pagination

目前可用于客户端分页的最佳库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T22:18:03.003

[jQuery Tablesorter](http://tablesorter.com/docs/)是一个不错的选择，因为您在显示数据时通常需要一个带有排序功能的表格，并且它还内置了分页功能，因此您可以获得整个 shebang。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T23:35:26.483

YUI 还有一个非常好用的[客户端分页控件](http://developer.yahoo.com/yui/examples/datatable/dt_clientpagination.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T23:36:27.603

这个也相当不错，可以与 HTML 表格一起使用，而不需要表格模型。带有分页和排序。

[http://www.frequency-decoder.com/2007/10/19/client-side-table-pagination-script](http://www.frequency-decoder.com/2007/10/19/client-side-table-pagination-script)

编辑：现在使用了“ [jquery tablesorter](http://tablesorter.com/docs/) ”脚本，我不得不说它比“client-side-table-pagination-script”更好。

# ruby-on-rails - 让最终用户在 Rails 中指定排序顺序的最佳方式

> ID：723462
> 
> 赞同：6
> 
> 时间：2009-04-06T22:14:21.217
> 
> 标签：ruby-on-rails, sorting, interface

我正在寻找有关让最终用户从 Rails 应用程序的视图文件中设置模型的“查找”方法返回的结果集的排序顺序的最佳方法的建议。换句话说，我希望用户能够从选择列表中选择他们的排序顺序。

最初，我认为我可以将我要放入 :order 参数的字符串放入，但从安全角度来看，这似乎是个坏主意。

我想我总是可以使用基于选择列表中的关闭值的开关，但这似乎有点笨重。

感谢您的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T22:51:38.490

我会使用 AR::Base#column_names 来清理输入。就像是：

```
@models = Model.find(:all, :order => params[:sort].select({|name| Model.column_names.include? (name) } ).join(',') ) 
```

您可以通过一些预处理来扩展它，以改变是否要对每个键进行升序或降序排序。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T23:54:18.607

这可能超出了您的要求，但最近，我一直依靠 javascript 来为我处理后续排序。Tablekit（[http://www.millstream.com.au/view/code/tablekit](http://www.millstream.com.au/view/code/tablekit)）是一个很好的原型表分类器，它不显眼、快速且易于使用。它还包括诸如就地编辑和列大小调整等细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:50:18.160

rails 可以从 cakephp 脚手架复制的东西（cak​​ephp 中 index() 上的分页器排序器）

# iphone - 为什么可达性示例应用程序在这里停滞不前？

> ID：723463
> 
> 赞同：5
> 
> 时间：2009-04-06T22:14:29.187
> 
> 标签：iphone, objective-c

Apple 名为 Reachability 的示例应用程序展示了如何检测连接。如果您只有 wifi 而没有互联网，应用程序会在下面的第二行停止超过一分钟：

```
SCNetworkReachabilityFlags reachabilityFlags;
BOOL gotFlags = SCNetworkReachabilityGetFlags(reachabilityRef, &reachabilityFlags); 
```

SCNetworkReachabilityGetFlags 来自 SystemConfiguration.framework。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-08T04:52:42.000

要直接回答您的问题，不，似乎没有任何方法可以“绕过” SCNetworkReachabilityGetFlags() 在您描述的特定情况下需要很长时间才能返回（例如，通过 WiFi 连接到路由器检查远程主机可访问性没有互联网）。几个选项：

选项 1\. 在单独的线程中进行调用，以便您的应用程序的其余部分可以继续运行。修改 ReachabilityAppDelegate.m 示例如下：

```
// Modified version of existing "updateStatus" method
- (void)updateStatus
{
    // Query the SystemConfiguration framework for the state of the device's network connections.
    //self.remoteHostStatus           = [[Reachability sharedReachability] remoteHostStatus];
    self.remoteHostStatus = -1;
    self.internetConnectionStatus   = [[Reachability sharedReachability] internetConnectionStatus];
    self.localWiFiConnectionStatus  = [[Reachability sharedReachability] localWiFiConnectionStatus];
    [tableView reloadData];

    // Check remote host status in a separate thread so that the UI won't hang
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSTimer *timer = [NSTimer timerWithTimeInterval:0 target:self selector:@selector(updateRemoteHostStatus) userInfo:nil repeats:NO];
    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
    [pool release];
}
// New method
- (void) updateRemoteHostStatus
{
    self.remoteHostStatus = [[Reachability sharedReachability] remoteHostStatus];
    [tableView reloadData];
} 
```

选项 2\. 在尝试连接到远程主机时使用使用超时值的不同 API/函数。这样，您的应用程序在放弃之前只会挂起 X 秒。

其他一些需要注意的事项：

*   您询问的对 SCNetworkReachabilityGetFlags() 的特定调用（即 Reachability.m 中的第 ~399 行）试图查看 www.apple.com 是否“可访问”以推断“外部互联网”是否“可访问”一般来说。
*   在 Apple 的系统配置框架中，“可达”可能并不意味着您认为它的作用。根据官方文档，“可达”似乎意味着，理论上，您的计算机可以根据需要连接到主机 X，但它可能需要先实际建立连接（例如，先拨打调制解调器）。换句话说， SCNetworkReachabilityGetFlags() 实际上并没有建立连接。

# data-structures - googlemap之类的应用程序的数据结构？

> ID：723464
> 
> 赞同：1
> 
> 时间：2009-04-06T22:14:58.733
> 
> 标签：data-structures

我正在做一个地图路由应用程序。有几个人建议我做一个数据结构，将地图拆分为网格。从理论上讲，这听起来确实不错，但我不确定，因为我在实现它时性能很差。

在最坏的情况下，您必须绘制每条道路。如果将地图划分为网格，则网格中所有单元格中的道路总和将远大于将所有道路放在列表中的情况。（如果道路通过，每个单元格的道路必须比实际需要的多它）。

如果我必须放大，我可以看到使用网格的一些巧妙之处，但如果我将它保存在一个列表中，我可以在每次放大时减少道路数量。现在（通过使用列表）它是不是很快，所以我完全赞成让它更快。但实际上在网格中划分会让我变慢。

关于我应该使用什么数据结构和/或我可能做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T22:20:31.547

如果你想让它走得快，你最好把你的道路组织成主要和次要道路。

使用次要道路列表查找到最近的主要道路的路线。使用主要道路让您靠近目的地。然后回到小路完成路线。

没有这样的分割，有很多路要搜索，其中大部分是相当慢的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T22:21:58.233

每次刷新屏幕时，谷歌都不会绘制每条道路。他们使用预先绘制的地图图块。他们可以根据需要重新绘制它们。例如，当有地图更新时。他们甚至使用透明的覆盖层、成堆的瓷砖来添加和删除细节层。

非常聪明，但非常简单。

您可能想查看 openlayers javascript 库。免费，几乎可以做任何你需要用地图做的事情。

Maptraction JS 也可用 - 它不如 OpenLayers 完整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T22:23:43.817

有关相关信息，请参阅此问题：

[什么算法计算地图上从 A 点到 B 点的方向？](https://stackoverflow.com/questions/430142/what-algorithms-compute-directions-from-point-a-to-point-b-on-a-map)

以写这种软件为生的人已经回答了。

渲染参见：

[读取、表示和渲染地图数据的最佳方式是什么？](https://stackoverflow.com/questions/222716/what-is-the-best-way-to-read-represent-and-render-map-data)

我不太确定您是要快速路由还是渲染！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T22:27:58.110

比使用网格作为空间数据结构更优化，可能是四叉树，因为它以对数方式分解地图。通过研究来源，我的猜测是谷歌使用（那个或）类似的数据结构。

至于获取方向，您可能希望首先考虑分层路径查找来近似方向并加快过程；在这种复杂程度下，通用路径查找算法往往很慢。

# database - MS Access - 打开一个从前一个表单中获取字段值的表单

> ID：723468
> 
> 赞同：4
> 
> 时间：2009-04-06T22:16:01.277
> 
> 标签：database, ms-access, vba

我在 MS Access 数据库中有一个表格，其中列出了为新电线咨询过的所有土地所有者。在每一行的末尾是一个按钮，可以打开另一个表格，显示所有咨询、报价等的详细信息。

我正在尝试在MS Access中使用vb来获取contactID并自动将其放入详细信息表单中的字段中，以便自动弹出土地所有者的咨询详细信息。我根本不是一个 vb 程序员（我有一个 comp sci 学位，主要是 Java，我目前是一名 GIS 分析师，但它是一家小公司，所以我被要求让一个 Access 数据库工作）。

我想说 [detailsForm]![contactID] = [landownerlist]![ID] 以 vb 和 access 会满意的方式。然后我可以看看我是否在正确的轨道上以及它是否真的有效！我上面的内容实际上不起作用。它不会编译。

从卡利亚纳

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T14:46:55.167

如果你想打开一个新记录的表单并在那里设置 ID，你可以使用 Openargs，Openform 的一个参数：

```
DoCmd.OpenForm "FormName",,,,acFormAdd,,Me.ID 
```

打开的表单还需要一些代码：

```
If Me.Openargs<>vbNullstring Then
   Me.Id = Me.Openargs
End If 
```

还可以找到：

```
Forms!LandownersList.Recordset.FindFirst "ID=" & Me.ID 
```

或填写一个值：

```
Forms!LandownersList!Id = Me.ID 
```

在从调用表单打开的表单上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T23:15:36.483

您可能想查看这些按钮背后的代码。如果您使用的是 docmd.openform，您可以在打开下一个表单时将第四个设置设置为 where 子句。

```
DoCmd.OpenForm "OpenFormName", acNormal, , "[contactID] = " _
    & [detailsForm]![contactID] , acFormEdit, acWindowNormal 
```

这假定联系人 ID 是数字并且不需要任何引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-05T07:19:02.140

正如其他人所提到的，使用开放参数是普遍接受的解决方案。这只是属于“为您启迪”的类别：) 使用开放参数的问题之一是，除非您对自己的评论很小心，否则很容易忘记它们的意思。你通过的不止一个吗？哪个是哪个？我是怎么在这里做的？我是怎么做到的等等。为了我自己的钱，我标准化了这个（如下），所以我总是可以毫无畏惧地传递多个论点，而且当我一年后审查我的代码时，我仍然可以看到没有什么是什么一个巨大的麻烦：

```
Option Explicit

'Example use: DoCmd.OpenForm "Example", OpenArgs:="Some Filter|True"

Public Enum eForm1Args
    eFilter = 0
    eIsSpecial = 1
End Enum

Private m_strArgs() As String

Public Property Get Args(ByVal eForm1Args As eForm1Args) As String
    Args = m_strArgs(eForm1Args)
End Property

Private Sub Form_Open(Cancel As Integer)
    m_strArgs = Split(Nz(Me.OpenArgs, vbNullString), "|")
    If LenB(Me.Args(eFilter)) Then Me.Filter = Me.Args(eFilter)
End Sub

Private Sub Command1_Click()
    If LCase$(Me.Args(eIsSpecial)) = "true" Then
        'Do something special
    End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T18:49:23.403

正如之前发布的那样，OpenArgs 非常适合这一点。我学到的一个技巧是，如果需要，可以很容易地将多个参数作为分隔字符串（例如逗号）传递，然后目标表单可以使用 Split() 函数访问这些值，因此：

```
StringArrayVariable()= Split(me.OpenArgs,",")
Me.textbox= StringArrayVariable(0)
Me.textbox1= StringArrayVariable(1) 
```

等等

这是空气代码，因此请查看 Split() 的帮助文件。

也可以在 OpenArgs 中传递对象，它需要一些手动内存指针操作，我手头没有代码，但我相信谷歌搜索会找到一些例子。但是，这种技术可能会导致一些随机崩溃。被警告！

# google-app-engine - 使用 Amazon Web Services S3 与 Google Application Engine 的存储的相对优势

> ID：723469
> 
> 赞同：6
> 
> 时间：2009-04-06T22:16:36.327
> 
> 标签：google-app-engine, cloud, amazon-s3

与 Google Application Engine 相比，您认为 Amazon Web Services S3 的优缺点是什么？在我问的时候，这两者的每 GB 成本大致相似。我没有看到任何关于服务质量的广泛投诉；所以我认为使用哪一个的决定可能取决于 API（所有事物）。

Google 的 API 将您的内容分解为他们所谓的*静态*内容，例如您的 CSS 文件、网站图标、图像等以及非静态动态生成的 HTTP 响应。对静态内容的请求将提供给任何请求它的人，直到达到您的带宽限制；在达到您的带宽或 CPU 限制之前，将满足非静态请求。对于您的非静态请求，您可以提供您能够用 Python 表达的任何逻辑，因此您可以选择为谁服务。

Amazon 的 API 将您的所有内容视为存储桶中的 blob，并提供一种访问协议，让您能够区分各种可满足的请求，范围从世界可读到仅供所有者使用。但是，如果您想要工具包中没有的东西，除了考虑分发 URI 之外，我不知道您会做什么。

你觉得两者有什么不同？还有其他你喜欢的云存储服务吗？ [Zetta](http://www.zetta.net)今天发布了一份新闻稿，但他们正在寻找至少 10 TB 的 beta 应用程序，而我的客户都没有（目前）；[Joyent](http://www.joyent.com)可能会在不久的将来做点什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T22:54:58.983

我认为 Google App Engine 基本上为您提供了一个沙箱来部署您的应用程序，只要它是按照他们的要求（Python 等）编写的。亚马逊为您提供了一个虚拟机，在可以做什么方面具有更大的灵活性，但您可能需要做更多的工作。MS new Azure 似乎正在走 GAE 路线，但用 .NET 替换 Python。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T22:43:49.353

GAE 对通过 appcfg.py 上传的静态文件的每个限制为 10MB（请查看[http://code.google.com/appengine/docs/python/tools/uploadinganapp.html](http://code.google.com/appengine/docs/python/tools/uploadinganapp.html)的底部）。显然，您可以编写代码将大文件切成小块并在下载时重新组合，但它向我表明 Google 不希望 App Engine 仅用作简单的 CDN，如果您想将其用作一个'将不得不做一些工作。S3 开箱即用，您所要做的就是获取第三方界面应用程序。

如果你想在 S3 上做一些非标准的文件访问，那么亚马逊可能希望你在 EC2 上创建一个服务器实例。完成此操作后，您将拥有比 GAE 环境更大的灵活性，但您需要支付更多费用（现金和可能的维护费用）。

GAE 的优点是它对小型应用程序“便宜”（高达 1GB 存储、1GB 带宽和每天 130 万次点击是免费的：[http ://code.google.com/appengine/docs/quotas .html](http://code.google.com/appengine/docs/quotas.html)）。根据您的使用情况，这可能很重要，或者与您的总带宽成本的规模无关。

巧合的是，我最近几天才第一次看 GAE。我把一个旧的 Perl CGI 脚本变成了一个 GAE 应用程序，它可以启动并运行。总共大约 10 个小时，包括阅读 GAE 介绍性文档和记住 Python 应该如何工作，足以编写几百行代码。我推测这比将一堆文件加载到 S3 上更费力，但比维护 EC2 服务器更省力。但是，我没有使用亚马逊。

[编辑补充：这听起来像亚马逊的优势都是出于商业目的。这很可能是真的，但是 GAE 还没有成熟，大概会很快从这里变得更好。他们只允许人们在 12 月左右开始付款，在此之前，除非与谷歌有特殊安排，否则它是免费配额的。虽然谷歌有时会因其“永久测试版”的说法而受到抨击，但我认为 GAE 确实仍在起步。如果您的应用非常适合 BigTable 数据范例，那么它在 GAE 上的扩展性可能比 EC2 更好。对于存储，我认为 S3 对于所有合理的目的已经足够好，而且当你所做的只是提供文件时，谷歌的聪明架构没有给 GAE 带来任何优势来弥补。]

* 除了 Google 刚刚向我提供了 GAE 对 Java 支持的预览。

** 刚刚注意到您可以设置 chron 作业，但它们受到与任何其他请求相同的规则的限制（30 秒运行时，无法修改文件等）。

# asp.net - Ajax Control Toolkit 中的 MaskedEdit 问题 - 不同的文化

> ID：723472
> 
> 赞同：0
> 
> 时间：2009-04-06T22:18:26.747
> 
> 标签：asp.net, ajaxcontroltoolkit, maskededitextender

我想使用 maskededit 使用户执行与 maskededit 的 ajax 控件工具包示例中相同的操作，但我需要使用另一种格式，因为我的客户端的日期显示为 dd-MM-yyyy。我还需要在其中输入一个值，因为日期是从数据库加载的（一旦我让这个代码工作，那就是）

看看这个样本： [http ://www.asp.net/ajax/ajaxcontroltoolkit/samples/maskededit/maskededit.aspx](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/maskededit/maskededit.aspx)

我需要在标有“输入日期（格式：99/99/9999）：”的文本框中执行相同的操作

我下载了示例代码，并在相关代码中将格式改为“99-99-9999”：

但是文本框中不显示示例日期“12-12-1999”。为什么不？

我无法弄清楚，我做错了什么。我还尝试将cultureName 设置为da-DK，但它没有任何机会。我也试过 Chrome、Firefox 和 IE7，同样的行为......

我该如何解决？

```
<asp:TextBox ID="TextBox5" runat="server" Width="130px" MaxLength="1" style="text-align:justify" ValidationGroup="MKE">12-12-1999</asp:TextBox>
    <asp:ImageButton ID="ImgBntCalc" runat="server" ImageUrl="~/images/Calendar_scheduleHS.png" CausesValidation="False" />
    <ajaxToolkit:MaskedEditExtender ID="MaskedEditExtender5" runat="server"
        TargetControlID="TextBox5"
        Mask="99-99-9999"
        MessageValidatorTip="true"
        OnFocusCssClass="MaskedEditFocus"
        OnInvalidCssClass="MaskedEditError"
        MaskType="Date"
        DisplayMoney="Left"
        AcceptNegative="Left"
        ErrorTooltipEnabled="True" />
    <ajaxToolkit:MaskedEditValidator ID="MaskedEditValidator5" runat="server"
        ControlExtender="MaskedEditExtender5"
        ControlToValidate="TextBox5"
        EmptyValueMessage="Date is required"
        InvalidValueMessage="Date is invalid"
        Display="Dynamic"
        TooltipMessage="Input a date"
        EmptyValueBlurredText="*"
        InvalidValueBlurredMessage="*"
        ValidationGroup="MKE" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:59:07.623

我想你已经解决了这个问题，但是......你试过使用`UserDateFormat="DayMonthYear"`吗？

```
UserDateFormat="DayMonthYear"

<asp:TextBox ID="TextBox5" runat="server" Width="130px" MaxLength="1" style="text-align:justify" ValidationGroup="MKE">12-12-1999</asp:TextBox>
<asp:ImageButton ID="ImgBntCalc" runat="server" ImageUrl="~/images/Calendar_scheduleHS.png" CausesValidation="False" />
<ajaxToolkit:MaskedEditExtender ID="MaskedEditExtender5" runat="server"
    TargetControlID="TextBox5"
    Mask="99-99-9999"
    MessageValidatorTip="true"
    OnFocusCssClass="MaskedEditFocus"
    OnInvalidCssClass="MaskedEditError"
    MaskType="Date"
    DisplayMoney="Left"
    AcceptNegative="Left"
    ErrorTooltipEnabled="True" **UserDateFormat="DayMonthYear"** />
<ajaxToolkit:MaskedEditValidator ID="MaskedEditValidator5" runat="server"
    ControlExtender="MaskedEditExtender5"
    ControlToValidate="TextBox5"
    EmptyValueMessage="Date is required"
    InvalidValueMessage="Date is invalid"
    Display="Dynamic"
    TooltipMessage="Input a date"
    EmptyValueBlurredText="*"
    InvalidValueBlurredMessage="*"
    ValidationGroup="MKE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-28T07:55:17.370

我`ValidationExpression`在`MaskedEditValidator`替换`userDateFormat`类型中使用的日期`dd/MM/yyy`非常好。这是 ：

```
ValidationExpression="(((((0[1-9])|(1\d)|(2[0-8]))\/((0[1-9])|(1[0-2])))|((31\/((0[13578])|(1[02])))|((29|30)\/((0[1,3-9])|(1[0-2])))))\/((20[0-9][0-9])|(19[0-9][0-9])))|((29\/02\/(19|20)(([02468][048])|([13579][26]))))" 
```

并`MaskedEditExtender`在`MaskType="none"`.
验证确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:33:53.147

```
<asp:TextBox ID="TextBox5" runat="server" Width="130px" MaxLength="10" style="text-align:justify" ValidationGroup="MKE" Text="12-12-1999"></asp:TextBox> 
```

我想知道您是否将文本移动到实际的文本属性，如果这会有所不同...我没有最新版本的 AjaxToolkit 否则我会自己尝试...哦，我只是注意到您的最大长度真的设置为 1 还是复制和粘贴错误？那也会引起问题。

# web-applications - Web 应用程序开发流程

> ID：723474
> 
> 赞同：7
> 
> 时间：2009-04-06T22:18:49.317
> 
> 标签：web-applications

你们发现了哪些开发 Web 应用程序的好方法？

例如，您是否从用户界面开始，然后开始添加功能？在继续下一个资源之前，您是否专注于单一资源并围绕它编写所有代码？还是从模型/数据库层开始逐层构建？

**我一个人工作。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T22:20:39.580

“用户故事” > 原型 > 设计 > 编码 > 迭代 1 > 迭代 2 > ... > 发布

这是一个很好的迭代示例：

[http://www.asp.net/mvc/](http://www.asp.net/mvc/)

向下滚动到“ASP.NET MVC Contact Manager Sample Application”，它看起来像：

*   迭代 #1 - 创建应用程序
*   迭代 #2 - 使应用程序看起来不错
*   迭代 #3 - 添加表单验证
*   迭代 #4 - 使应用程序松散耦合
*   迭代 #5 - 创建单元测试
*   迭代 #6 - 使用测试驱动开发
*   迭代 #7 - 添加 Ajax 功能

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T22:40:13.447

我假设您已经有一些用户故事和需求。我喜欢创建一个基本的域模型（基本上是一个类图），可能没有所有内容将包含的所有字段，但足以大致了解所有内容如何连接、继承层次结构以及所有内容。

至于编码，我喜欢从单一资源开始，然后围绕它构建一些基本功能。在这一点上，我通常不会将它连接到数据库，我使用的是一个非常简单的 DAO，它将事物填充到域对象的集合中。

接下来，我添加了一些次要的连接资源，并开始在它们之间建立各种链接。在这一点上，我已经有了一些领域对象，但可能还没有建立他们需要的所有领域和东西。只需几个重要的字段就足以区分对象的实例并将其中的一些实例链接在一起。

此时，我尝试用字段和行为充实我拥有的域对象，并将所需的位添加到视图中以使这些功能可用。然后，我得到某种真正可用的持久性工作，设置验证，并使视图漂亮。

优化你所拥有的，然后迭代以覆盖模型的其余部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T23:11:08.477

如果您想要一个人们喜欢使用的应用程序，请从用户开始。然后回到适用于用户故事的数据库设计。

如果您想要一个像我们熟悉的许多应用程序一样工作的应用程序，用户只是在那里执行数据库维护，请从数据库开始。您可能会更快完成，但您的用户不会对结果感到满意。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T22:32:43.310

我倾向于从数据库开始并进行备份，因为为我做实体建模往往会突出问题。

然后，我将创建基线 Webapp 结构（在 Java 中，这意味着创建我的项目、添加 Spring、配置数据源和安全性等等）。

一旦我拥有了所有的管道，我将创建数据访问、控制器和视图，通常创建一个来获得概念证明或作为初级开发人员遵循的模型。

Webapps 是迭代过程（通常不是），我发现最好尽快创建一个垂直切片。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T22:47:10.607

但是，如果您知道自己想要什么，则可以从各个角度解决问题，但是，良好的设计原则要求您首先拥有某种规格，该规格概述了您想要的功能。它不仅可以帮助您设置功能里程碑，而且在规划您的应用程序时这是一个非常有用的练习。

同样，良好的设计原则要求您首先设计域对象或业务对象。这是您的应用程序中的所有“名词”。假设您想开发一个网站，显示大联盟球员的棒球统计数据。这里的领域对象是名词“players”、“statistics”、“baseball”、“league”等。对于其中的每一个，您都创建了一个域模型和一个相应的数据库表。然后您开始考虑要添加到每个的功能，例如 Player.CareerSpan() 或 Player.GamesPlayer(int year)。

界面设计也可以并行进行，在这里你也应该使用纸上的模型或使用一些工具（Balsamiq 模型是我最喜欢的）。

在某些时候，它只是归结为个人管理和避免回溯。如果您撤消了太多代码，则说明有些问题。源代码控制系统也将帮助您实现这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T22:26:37.303

你提到你在工作中是孤独的。

Koistya上面的答案很好。然而，我发现通过让 UI 处于可展示的状态，我可以让客户更开心，并很快获得他们的支持。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-06T22:27:58.860

就个人而言，我总是从思维导图开始。然后我创建模型的结构，然后输入添加新数据的逻辑（无论是管理控制面板还是前端的东西）

然后我写测试

然后我开始显示逻辑、编辑等，以及所需的任何附加功能

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-06T22:34:29.280

我从模型开始 -> 数据访问 -> 数据库模式 -> UI

我为每个用户故事做同样的事情（是的，做测试驱动开发）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-06T22:36:36.327

独自开发时，做任何对你有用的事情。这里有一些其他资源供您查看，同时提出适合您的任何方法。请注意，这些其他方法假设一个团队。

*   这是我撰写的一个页面，它是我对[SDLC](http://www.dynamicalsoftware.com/cr/prod/guest/sitemap.html)的推荐。
*   看一下[RUP](http://www.ibm.com/developerworks/rational/library/content/03July/1000/1251/1251_bestpractices_TP026B.pdf)的概述，尤其是第 3 页的迭代模型图。
*   [SCRUM](http://scrum.dk/about_scrum)是另一个值得关注的有趣事物。

我希望这有帮助。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-13T05:05:37.580

[Web application development](http://prog4biz.com/web%20application%20development) starts from very good specifications, that include every aspect of user experience, features, future development needs etc. Only after having it written and approved, you can start working on the web application development. Other wise you will find yourself getting back to add additional features and opening the code again and again

# c# - 如何设置一个 comboBox.selecteditem

> ID：723475
> 
> 赞同：0
> 
> 时间：2009-04-06T22:19:03.797
> 
> 标签：c#

我有：

```
ComboBox.DataSource = System.Enum.GetValues(typeof(ImageLayout)); 
```

但我如何设置`ComboBox.SelectedItem`一个`ImageLayout`值？

我试过..

```
LayOutCB.SelectedItem = (int)ImageLayout.Center; 
```

但我有一个例外

* * *

### 更新：

最初我试图`SelectedItem`在`UserControl`.

我添加了事件处理程序

```
this.Load += new EventHandler(PageSettings_Load); 
```

然后在那里设置 combobox.SelectedItem 。

```
void PageSettings_Load(object sender, EventArgs e)
{                 
  LayOutCB.SelectedItem = ImageLayout.Center;
} 
```

现在真的很好用。

那是怎么回事？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T22:48:48.340

你没有试过这个吗？

```
ComboBox.SelectedItem = ImageLayout.Center 
```

它对我来说非常好。

* * *

### 编辑：

关于您的更新，我相信您正在设置`SelectedItem`调用之前`InitializeComponent()`的组合框，但尚未创建组合框给您对象引用异常（该框已定义但未分配。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T22:24:40.070

尝试这样的事情：

```
ComboBox.SelectedItem = (int)ImageLayout.Foo; 
```

替换`int`为您的枚举的基础类型。老实说，它可能在没有演员阵容的情况下也能正常工作，但我现在不在附近`csc.exe`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:24:28.053

`ComboBox`Windows.Forms 中的控件是底层 Windows 控件的*包装器。*这是一种常见的模式 - 大多数 Windows.Forms 控件都是这种包装器。

*在*创建基础 Windows**句柄**之前，无法设置 ControlBox 的某些属性（如 SelectedItem ）。通常，第一次显示控件时会创建句柄。

在您的用户控件的构造函数中，此代码：

```
LayOutCB.SelectedItem = (int)ImageLayout.Center; 
```

会抛出异常，因为句柄不可用。它稍后会起作用（在您的事件处理程序中），因为该句柄可用。

# html - 需要不重叠的通用 div css（如表格）

> ID：723476
> 
> 赞同：5
> 
> 时间：2009-04-06T22:19:26.400
> 
> 标签：html, css, overlap, css-tables

我正在尝试使用 div 而不是表格来围绕我的内容设置样式框。内容可以是**任意大小**，并且需要允许浏览器任意**调整大小**。需要背景颜色和边框来**包含内容**。这适用于表格。如何让 div 以相同的方式工作？

注意：我添加了“_”，因为我的不间断空格丢失了。

[示例页面](http://www.c3o.com/divonly.htm)

[示例图像](http://www.c3o.com/div-like-table.JPG)

[![替代文字](https://i.stack.imgur.com/ZdQIg.jpg)](https://i.stack.imgur.com/ZdQIg.jpg)
[（来源：[c3o.com](http://www.c3o.com/div-like-table.JPG)）]

内容：

```
<style type="text/css">
    div.box, table.box
    {
        padding: 10px 1000px 10px 10px;
    }

    div.box-header, td.box-header
    {
        border:  solid  1px  #BBBBBB ;
        font-size: larger;
        padding: 4px;
        background-color: #DDDDDD;
    }   

    div.box-body, td.box-body
    {
        padding: 6px;
        border:  solid  1px  #BBBBBB ;
        border-top: none;
    }
</style>

<div class="box">
    <div class="box-header">please_help_make_these_divs_stop_overlapping</div>
    <div class="box-body">please_help_make_these_divs_stop_overlapping</div>
</div>

<table class="box" width="100%" cellpadding="0" cellspacing="0">
    <tr><td class="box-header">tables_make_good_containers_tables_make_good</td></tr>
    <tr><td class="box-body">tables_make_good_containers_tables_make_good</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T22:37:31.550

据我所知，没有一种简单的跨浏览器友好的方法可以做到这一点。

至少在 Firefox 中，您可以通过设置 div 来创建模拟表

```
display:table;
display:table-row;
display:table-cell; 
```

这样那些 div 就像表格元素一样工作。然后盒子将包含它的内容。这是否是一个好的解决方案是有争议的。

我自己也遇到过类似的页面布局问题。通常我通过设置 min-width 和 overflow:auto; 来解决这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-08T16:33:22.750

如果你真的不想使用表格，你可以这样做：

```
div.box div {
  overflow: hidden;
  zoom: 1; /* trigger haslayout for ie */
} 
```

下次出现此类问题时，请访问[giveupandusetables.com](http://giveupandusetables.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:01:35.857

一种方法是让你的盒子漂浮起来。添加浮动：左；到 box、box-header 和 box-body。添加明确：两者；到 box-body 以强制它低于 box-header。您可能还需要为后面的任何内容添加 clear 属性。

但是，您不会使 box-header 和 box-body 的右边缘对齐。如果您希望它们的宽度相同，那么您真的需要一张桌子。表格是使同一列中的所有单元格共享宽度的工具。

对于其他想法，请查看[这个 SO question](https://stackoverflow.com/questions/450903/make-css-div-width-equal-to-contents/451074#451074)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T08:59:30.620

这很有效（实际上也比 ie7 中的表格更好地结合在一起）

```
div.box{
  float:left;
  width:auto;
  margin: 10px 1000px 10px 10px;
}

div.box-header{
  float:left;
  width:100%;
  border:  solid  1px  #BBBBBB ;
  font-size: larger;
  padding: 4px; 
  background-color: #DDDDDD;
}

div.box-body{
  clear:left;
  float:left;
  width:100%; 
  padding: 4px; 
  border:  solid  1px  #BBBBBB ; 
  border-top: none;
} 
```

注意：两个盒子必须具有相同的左右填充或一个突出一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T09:35:57.880

首先，您应该使用语义标记。如果某些内容是标题和内容，则使用标题和段落标签将其标记出来。如果您尝试像表格一样模拟您的标记和样式，这将帮助您摆脱“表格方式”的思维，标记应该放在第一位，CSS 可以放在后面。

以下应该做你想要的：

```
<style type="text/css">
    * {
    margin:0px;
    padding:0px;
    }
.box {
border: solid 1px #BBBBBB;
margin:10px;
}
.box h3 {
padding: 4px;
border-bottom: solid 1px #BBBBBB;
background-color: #DDDDDD;
}
.box p {
padding: 6px;
}
</style>

<div class='box'>
    <h3>please help make these divs stop overlapping</h3>
    <p>please help make these divs stop overlapping</p>
</div> 
```

分别考虑标记和样式是通向 CSS Zen Mastery 的途径 :o)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-08T15:52:54.893

不需要浮点数，但您似乎混淆了边距与填充的使用。以下对您的风格的细微调整可根据您的需要进行：

```
<style type="text/css">
    div.box, table.box
    {
        margin: 10px 1000px 10px 10px;
        border:  solid  1px  #BBBBBB ;
       padding: 0px;
    }

    div.box-header, td.box-header
    {

        font-size: larger;
        padding: 4px;
        background-color: #DDDDDD;
    border-bottom:  solid  1px  #BBBBBB ;

    }   

    .box-body, td.box-body
    {
        padding: 6px;
    }
</style> 
```

我已将框上的填充更改为边距，将边框移至您的框，并在标题中添加了下划线。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-01T15:26:18.613

我在使用 Firefox 6.0.1、Opera 10.62、Safari 5.1 时也遇到了这个问题，但在 IE 9 中没有，并且溢出：自动在所有浏览器中修复了它。其他什么都没做。我还尝试了溢出：包含，这也解决了问题，但似乎包含不是溢出的有效值，所以我假设，由于该值无效，因此替换了 auto。

# sql - T-SQL 用于将 2 列的值与“复制”组合为一个

> ID：723486
> 
> 赞同：1
> 
> 时间：2009-04-06T22:22:36.393
> 
> 标签：sql, sql-server, sql-server-2008

有一个表，其值如下：

```
Sets | Reps
-----+------
2    | 10
3    | 15
3    | 12
4    | 8 
```

我需要在我的 SELECT 语句中将这两个值合并为一个，这样我就可以得到

```
SELECT ... AS Reps FROM Table

Reps
------------
10,10
15,15,15
12,12,12
8,8,8,8 
```

任何想法如何做到这一点？

测试脚本：

```
DECLARE @Test TABLE ([Sets] INT, [Reps] INT);

INSERT INTO @Test VALUES (2, 10);
INSERT INTO @Test VALUES (3, 15);
INSERT INTO @Test VALUES (3, 12);
INSERT INTO @Test VALUES (4, 8);

SELECT [Sets], [Reps] FROM @Test;

// Here is an answer by tpdi:
SELECT CAST([Reps] AS VARCHAR) +
       REPLICATE(',' + CAST([Reps] AS VARCHAR), [Sets] - 1)
       AS [Reps] FROM @Test; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T22:29:42.757

像这样：

```
select substring(replicate(','+cast(Reps as varchar),Sets),2,8000) as Reps
from Table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T22:32:45.137

从表中选择 cast(reps as varchar) + replicate( ',' + cast(reps as varchar), sets - 1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:37:22.017

选择 SUBSTRING(REPLICATE(CAST([Reps] as varchar)+',' , [Sets]), 0, LEN(REPLICATE(CAST([Reps] as varchar)+',' , [Sets])) 作为 [代表]来自@Test

# mysql - 如何判断 MySQL 进程是否卡住？

> ID：723492
> 
> 赞同：9
> 
> 时间：2009-04-06T22:27:21.217
> 
> 标签：mysql, process, long-integer

我在 MySQL 中有一个长期运行的进程。它已经运行了一周。还有另一个连接到复制主机，但我已经停止了从属处理，所以实际上没有其他事情发生。

我怎么知道这个过程是否仍然有效？我知道这需要很长时间，这就是为什么我把它放在自己的数据库实例上，但这比我预期的要长。显然，如果它还在工作，我不想杀死它。如果它是僵尸，那么我不知道如何完成它应该做的工作。

它处于“发送数据”状态。该表是一个 InnoDB 表，但没有查询使用的任何 FK 引用。自查询开始以来，InnoDB 状态显示没有错误或锁定。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T23:00:51.293

试试“SHOW PROCESSLIST”看看什么是活跃的。

当然，如果你杀死它，它可能想要花同样多的时间来回滚它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T22:37:58.087

您需要杀死它并提出更好的索引。

我为一个男人做了一份工作。有一个大约有 3500 万行的表。他的批处理过程，和你一样，已经运行*了一周*，看不到尽头。我添加了一些索引，对他批处理的顺序和方法进行了一些更改，整个过程缩短到两个半*小时*左右。在较慢的机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-21T18:55:17.237

鉴于你所说的，它没有被卡住。但是，绝对不能保证它会在任何类似合理的时间内完成。添加索引几乎肯定会有所帮助，并且根据查询的类型将其重构为使用临时表的一系列查询可能会给您带来巨大的性能提升。我不建议等待它完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-29T18:18:53.687

为了在这种大小的数据库上获得更好的性能，您可能需要查看基于文档的数据库，例如 mongoDB。存储数据库需要更多的硬盘空间，但根据您当前的模式，您可能会获得更好的性能。

# java - 在同一个 Java 源代码中处理不同的 API 版本

> ID：723493
> 
> 赞同：6
> 
> 时间：2009-04-06T22:27:55.723
> 
> 标签：java, build-process, configuration-management

我确定这是一个愚蠢的问题，但是.. 我们有相同的 Java 源文件，我们希望根据我们构建应用程序的客户端使用不同版本的 Java API（jar 文件）。

较新版本的 API 具有我们在 Java 源代码中引用的方法 setAAA() 和 setBBB()：

```
if (...) {
  api.setAAA(a);
  api.setBBB(b);
} 
```

如果使用旧 API 编译而旧 API 没有这些设置器，则此代码将失败。如果我们使用新的 API，是否有任何方法可以条件化此代码以仅编译 setter 行？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T22:37:47.277

最安全的方法是回退到您需要支持的最低版本。假设所有版本都向后兼容，但不一定如此。

如果该解决方案不合适或不理想，那么我将退回到[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。[Spring 框架](http://www.springsource.org/)是迄今为止最流行和最常见的 DI 框架，但也不是唯一的。[古斯](http://code.google.com/p/google-guice/)是另一个。如果不希望为此添加一个完整的框架，您甚至可以自行开发。

但是我在设想一个不使用 Spring 的 Java 应用程序（尤其是 Web/J2EE 应用程序）时遇到了问题。它太有用了。

假设有 4 个版本的相关 jar。该 API 在那段时间更改了两次，因此您有 3 个不同的 API 版本。您需要将该 jar 的使用抽象为您自己的 API，该 API 在所有这些版本中都是一致的，然后创建它的三个实现：一个用于每个不同的 API 版本。

在 Spring 中，您创建一个应用程序上下文，它定义了所有 bean 以及它们如何注入其他 bean。您没有理由不能选择或构建应用程序上下文作为构建过程的一部分。通常会为此使用属性，但您也可以通过这种方式包含部分应用程序上下文。

这里的关键点是，即使 API 不同，就代码而言，您需要抽象出这些差异。如果你不这样做，你只是在自找麻烦，它只会变得更加混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T22:39:15.010

Java 真的不适合这种条件编译（与 C++ 不同），老实说，这听起来像是最终陷入“类路径地狱”的秘诀。

虽然您可以手动开始处理返回 API 版本的函数，但您会拥有一个适合特定版本的类文件，但没有任何迹象表明它可能不兼容。

我以前遇到过这种情况（例如，使用不同版本的 Eclipse），它并不漂亮。我最终做的是拥有一个具有两种不同实现的接口，一个用于每个 API，将它们中的每一个放在一个单独的项目中（在我的例子中是一个插件），然后尝试使用工厂或注入加载它们。尽可能地隔离它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T22:38:07.277

您还可以保留包含客户特定（即版本特定）代码的版本控制系统的单独分支

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T22:46:38.113

我过去所做的是：尽可能简洁地编写与库的版本相关方面交互的最少代码量。为每个版本的库提供此代码的版本。让它们都实现相同的接口。您的应用程序的大部分应该尝试（`Class.forName`可能还有*一点*构造反射）动态加载适合最新库的版本。如果失败，则回退到旧库的静态链接版本。

通过适当使用源路径和类路径，您可以安排防止您的核心代码使用新库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-07T04:42:22.970

您可以编译到最低公分母，然后使用反射调用仅在以后的 API 上可用的方法。例如，假设在类 com.foo.Bar 上，方法“getFoogle()”在 API 的更高版本中被方法“getFiggle()”取代。让我们假设该方法（在任一变体中）采用一个 int 和一个 double 并返回一个 int。您按如下方式进行包装器调用：

```
public int getFoogleFiggle(Bar bar, int n, double d) {
  try {
    Class clz = Class.forName("com.foo.Bar");
    Method m = clz.getMethod("getFiggle", new Class[] {Integer.class, Double.class});
    return (Integer) m.invoke(bar, new Object[] {n, d});
  } catch (NoSuchMethodException nsme) {
    return getFoogle(n, d);
  } catch (various other spurious exceptions) {
    ... deal with in intesresting ways ...
  }
} 
```

请注意，在*编译*时，编译器并不关心类 coo.foo.Bar 和/或方法 getFiggle 是否存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T22:35:26.937

您可以使用 java 内省。看包装：

**java.lang.reflect**

它有一个名为 Method 的类。您可以使用以下方法获取 Class 的所有公共方法：

```
Method[] methodList = obj.getClass().getMethods(); 
```

由于它是一个 API，因此设置器将是公开的。然后你可以遍历数组 methodList 并检查那些与 setter 同名的方法。如果您找到它们，请使用它们。否则，您知道这是早期版本。

此外，大多数开发良好的 API 都有一个返回 JAR 文件当前版本值的函数。

例如 ：

```
String currentVersion = api.SomeClass.version() ; 
```

尝试检查您正在使用的 API 中是否有类似的功能。这会更容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-07T04:00:01.620

我也有同样的需求，因为我们的代码需要在 Java 1.2 的所有 Java 版本上运行，但是如果有更新的 API 可用，一些代码需要利用它们。

在使用反射来获取 Method 对象并动态调用它们的各种排列之后，我通常选择最好的包装器样式方法（尽管在某些情况下，将反射的 Method 存储为静态并调用它会更好 - 这取决于） .

以下是一个示例“系统实用程序”类，它公开了某些较新的 API。此示例使用单例，但如果底层 API 需要，可以轻松实例化多个对象。

有两个类：

*   系统实用程序
*   SysUtil_J5

如果运行时 JVM 是 Java 5 或更高版本，则使用后者。否则，从 SysUtil 中的默认实现中使用与合同兼容的回退方法，该实现仅使用 Java 4 或更早的 API。每个类都使用特定版本的编译器进行编译，因此不会在 Java 4 类中意外使用 Java 5+ API：

## SysUtil（使用 Java 4 编译器编译）

```
import java.io.*;
import java.util.*;

/**
 * Masks direct use of select system methods to allow transparent use of facilities only
 * available in Java 5+ JVM.
 *
 * Threading Design : [ ] Single Threaded  [x] Threadsafe  [ ] Immutable  [ ] Isolated
 */

public class SysUtil
extends Object
{

/** Package protected to allow subclass SysUtil_J5 to invoke it. */
SysUtil() {
    super();
    }

// *****************************************************************************
// INSTANCE METHODS - SUBCLASS OVERRIDE REQUIRED
// *****************************************************************************

/** Package protected to allow subclass SysUtil_J5 to override it. */
int availableProcessors() {
    return 1;
    }

/** Package protected to allow subclass SysUtil_J5 to override it. */
long milliTime() {
    return System.currentTimeMillis();
    }

/** Package protected to allow subclass SysUtil_J5 to override it. */
long nanoTime() {
    return (System.currentTimeMillis()*1000000L);
    }

// *****************************************************************************
// STATIC PROPERTIES
// *****************************************************************************

static private final SysUtil            INSTANCE;
static {
    SysUtil                             instance=null;

    try                  { instance=(SysUtil)Class.forName("SysUtil_J5").newInstance(); } // can't use new SysUtil_J5() - compiler reports "class file has wrong version 49.0, should be 47.0"
    catch(Throwable thr) { instance=new SysUtil();                                                                    }
    INSTANCE=instance;
    }

// *****************************************************************************
// STATIC METHODS
// *****************************************************************************

/**
 * Returns the number of processors available to the Java virtual machine.
 * <p>
 * This value may change during a particular invocation of the virtual machine. Applications that are sensitive to the
 * number of available processors should therefore occasionally poll this property and adjust their resource usage
 * appropriately.
 */
static public int getAvailableProcessors() {
    return INSTANCE.availableProcessors();
    }

/**
 * Returns the current time in milliseconds.
 * <p>
 * Note that while the unit of time of the return value is a millisecond, the granularity of the value depends on the
 * underlying operating system and may be larger. For example, many operating systems measure time in units of tens of
 * milliseconds.
 * <p>
 * See the description of the class Date for a discussion of slight discrepancies that may arise between "computer time"
 * and coordinated universal time (UTC).
 * <p>
 * @return         The difference, measured in milliseconds, between the current time and midnight, January 1, 1970 UTC.
 */
static public long getMilliTime() {
    return INSTANCE.milliTime();
    }

/**
 * Returns the current value of the most precise available system timer, in nanoseconds.
 * <p>
 * This method can only be used to measure elapsed time and is not related to any other notion of system or wall-clock
 * time. The value returned represents nanoseconds since some fixed but arbitrary time (perhaps in the future, so values
 * may be negative). This method provides nanosecond precision, but not necessarily nanosecond accuracy. No guarantees
 * are made about how frequently values change. Differences in successive calls that span greater than approximately 292
 * years (263 nanoseconds) will not accurately compute elapsed time due to numerical overflow.
 * <p>
 * For example, to measure how long some code takes to execute:
 * <p><pre>
 *    long startTime = SysUtil.getNanoTime();
 *    // ... the code being measured ...
 *    long estimatedTime = SysUtil.getNanoTime() - startTime;
 * </pre>
 * <p>
 * @return          The current value of the system timer, in nanoseconds.
 */
static public long getNanoTime() {
    return INSTANCE.nanoTime();
    }

} // END PUBLIC CLASS 
```

## SysUtil_J5（使用 Java 5 编译器编译）

```
import java.util.*;

class SysUtil_J5
extends SysUtil
{

private final Runtime                   runtime;

SysUtil_J5() {
    super();

    runtime=Runtime.getRuntime();
    }

// *****************************************************************************
// INSTANCE METHODS
// *****************************************************************************

int availableProcessors() {
    return runtime.availableProcessors();
    }

long milliTime() {
    return System.currentTimeMillis();
    }

long nanoTime() {
    return System.nanoTime();
    }

} // END PUBLIC CLASS 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-06T23:22:29.103

你可以试试

*   基于反射的调用或代码生成或旧的预处理技术或

*   封装变化的策略模式。

```
class ThirdPartyApi {
     void foo(){}  // available in all versions
     void bar(){}  // available only in new version
}

ThirdPartyApiV1 extends ThirdPartyApi {
     void foo() {
        thirdpartyV1Object.foo();
     }
}

ThirdPartyApiV2 extends ThirdPartyApi {
     void foo() {
        thirdpartyV2Object.foo();
     }
     void bar() {
        thirdpartyV2Object.bar();
     }
} 
```

使用 DependencyInjection 注入正确版本的 ThridPartyApi 实现。否则，使用 ThirdPartyApiFactory 根据配置或系统属性值创建适当的实例。

# wpf - WPF：带有在用户拖动后触发的事件的滑块

> ID：723502
> 
> 赞同：61
> 
> 时间：2009-04-06T22:30:41.833
> 
> 标签：wpf, xaml, slider

我目前正在 WPF 中制作 MP3 播放器，我想制作一个滑块，允许用户通过向左或向右滑动滑块来寻找 MP3 中的特定位置。

我曾尝试使用该`ValueChanged`事件，但每次更改它的值时都会触发，因此如果将其拖动过去，该事件将触发多次，**我希望该事件仅在用户完成拖动滑块时触发，然后获取新的值**。

我怎样才能做到这一点？

* * *

**[更新]**

我在 MSDN 上发现[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d8b9c195-12b9-45f5-8880-94cb05aefdee/)基本上讨论了同样的事情，他们提出了两个“解决方案”；子类化 Slider 或在时间跨度后调用操作`DispatcherTimer`的`ValueChanged`事件中调用 a。

你能想出比上面提到的两个更好的吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-11-03T07:51:35.957

除了使用`Thumb.DragCompleted` 事件之外，您还可以同时使用`ValueChanged` and `Thumb.DragStarted`，这样当用户通过按箭头键或单击滑块修改值时，您不会失去功能。

xml:

```
<Slider ValueChanged="Slider_ValueChanged"
    Thumb.DragStarted="Slider_DragStarted"
    Thumb.DragCompleted="Slider_DragCompleted"/> 
```

后面的代码：

```
private bool dragStarted = false;

private void Slider_DragCompleted(object sender, DragCompletedEventArgs e)
{
    DoWork(((Slider)sender).Value);
    this.dragStarted = false;
}

private void Slider_DragStarted(object sender, DragStartedEventArgs e)
{
    this.dragStarted = true;
}

private void Slider_ValueChanged(
    object sender,
    RoutedPropertyChangedEventArgs<double> e)
{
    if (!dragStarted)
        DoWork(e.NewValue);
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2009-04-06T22:46:38.393

您可以为此使用拇指的“DragCompleted”事件。不幸的是，这仅在拖动时触发，因此您需要单独处理其他点击和按键。如果您只希望它是可拖动的，您可以通过将 LargeChange 设置为 0 并将 Focusable 设置为 false 来禁用这些移动滑块的方法。

例子：

```
<Slider Thumb.DragCompleted="MySlider_DragCompleted" /> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-06-30T17:07:29.173

```
<Slider PreviewMouseUp="MySlider_DragCompleted" /> 
```

为我工作。

您想要的值是 mousup 事件后的值，无论是单击侧面还是拖动手柄后的值。

由于 MouseUp 不会向下隧道（它在它可以之前被处理），因此您必须使用 PreviewMouseUp。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-17T08:25:13.830

另一个 MVVM 友好的解决方案（我对答案不满意）

看法：

```
<Slider Maximum="100" Value="{Binding SomeValue}"/> 
```

视图模型：

```
public class SomeViewModel : INotifyPropertyChanged
{
    private readonly object _someValueLock = new object();
    private int _someValue;
    public int SomeValue
    {
        get { return _someValue; }
        set
        {
            _someValue = value;
            OnPropertyChanged();
            lock (_someValueLock)
                Monitor.PulseAll(_someValueLock);
            Task.Run(() =>
            {
                lock (_someValueLock)
                    if (!Monitor.Wait(_someValueLock, 1000))
                    {
                        // do something here
                    }
            });
        }
    }
} 
```

它被延迟（`1000`在给定示例中为毫秒）操作。为滑块（通过鼠标或键盘）完成的每个更改创建新任务。在开始任务之前，它会*发出信号*（通过使用`Monitor.PulseAll`，甚至`Monitor.Pulse`可能就足够了）运行已经运行的任务（如果有的话）停止。仅当在超时内未收到信号时才会*执行某些操作。*`Monitor.Wait`

为什么这个解决方案？我不喜欢在视图中产生行为或进行不必要的事件处理。所有代码都在一个地方，不需要额外的事件，`ViewModel`可以选择对每个值更改或在用户操作结束时做出反应（这增加了很多灵活性，尤其是在使用绑定时）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-09-17T06:57:30.750

我的实现基于@Alan 和@SandRock 的回答：

```
public class SliderValueChangeByDragBehavior : Behavior<Slider>
    {
        private bool hasDragStarted;

        /// <summary>
        /// On behavior attached.
        /// </summary>
        protected override void OnAttached()
        {
            AssociatedObject.AddHandler(Thumb.DragStartedEvent, (DragStartedEventHandler)Slider_DragStarted);
            AssociatedObject.AddHandler(Thumb.DragCompletedEvent, (DragCompletedEventHandler)Slider_DragCompleted);
            AssociatedObject.ValueChanged += Slider_ValueChanged;

            base.OnAttached();
        }

        /// <summary>
        /// On behavior detaching.
        /// </summary>
        protected override void OnDetaching()
        {
            base.OnDetaching();

            AssociatedObject.RemoveHandler(Thumb.DragStartedEvent, (DragStartedEventHandler)Slider_DragStarted);
            AssociatedObject.RemoveHandler(Thumb.DragCompletedEvent, (DragCompletedEventHandler)Slider_DragCompleted);
            AssociatedObject.ValueChanged -= Slider_ValueChanged;
        }

        private void updateValueBindingSource()
            => BindingOperations.GetBindingExpression(AssociatedObject, RangeBase.ValueProperty)?.UpdateSource();

        private void Slider_DragStarted(object sender, DragStartedEventArgs e)
            => hasDragStarted = true;

        private void Slider_DragCompleted(object sender, System.Windows.Controls.Primitives.DragCompletedEventArgs e)
        {
            hasDragStarted = false;
            updateValueBindingSource();
        }

        private void Slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            if (!hasDragStarted)
                updateValueBindingSource();
        }
    } 
```

你可以这样应用它：

```
...
xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
xmlns:myWhateverNamespace="clr-namespace:My.Whatever.Namespace;assembly=My.Whatever.Assembly"
...

<Slider
                x:Name="srUserInterfaceScale"
                VerticalAlignment="Center"
                DockPanel.Dock="Bottom"
                IsMoveToPointEnabled="True"
                Maximum="{x:Static localLibraries:Library.MAX_USER_INTERFACE_SCALE}"
                Minimum="{x:Static localLibraries:Library.MIN_USER_INTERFACE_SCALE}"
                Value="{Binding Source={x:Static localProperties:Settings.Default}, Path=UserInterfaceScale, UpdateSourceTrigger=Explicit}">
                <i:Interaction.Behaviors>
                    <myWhateverNamespace:SliderValueChangeByDragBehavior />
                </i:Interaction.Behaviors>
            </Slider> 
```

正如行为所做的那样，我已将 UpdateSourceTrigger 设置为显式。您需要 nuget 包 Microsoft.Xaml.Behaviors(.Wpf/.Uwp.Managed)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T09:11:12.300

这是处理此问题的行为以及与键盘相同的事情。[https://gist.github.com/4326429](https://gist.github.com/4326429)

它公开了 Command 和 Value 属性。该值作为命令的参数传递。您可以将数据绑定到 value 属性（并在 viewmodel 中使用它）。您可以为代码隐藏方法添加事件处理程序。

```
<Slider>
  <i:Interaction.Behaviors>
    <b:SliderValueChangedBehavior Command="{Binding ValueChangedCommand}"
                                  Value="{Binding MyValue}" />
  </i:Interaction.Behaviors>
</Slider> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T15:15:29.863

我的解决方案基本上是带有更多标志的 Santo 解决方案。对我来说，滑块正在通过读取流或用户操作（通过鼠标拖动或使用箭头键等）进行更新

首先，我编写了代码来通过读取流来更新滑块值：

```
 delegate void UpdateSliderPositionDelegate();
    void UpdateSliderPosition()
    {
        if (Thread.CurrentThread != Dispatcher.Thread)
        {
            UpdateSliderPositionDelegate function = new UpdateSliderPositionDelegate(UpdateSliderPosition);
            Dispatcher.Invoke(function, new object[] { });
        }
        else
        {
            double percentage = 0;  //calculate percentage
            percentage *= 100;

            slider.Value = percentage;  //this triggers the slider.ValueChanged event
        }
    } 
```

然后我添加了当用户通过鼠标拖动操作滑块时捕获的代码：

```
<Slider Name="slider"
        Maximum="100" TickFrequency="10"
        ValueChanged="slider_ValueChanged"
        Thumb.DragStarted="slider_DragStarted"
        Thumb.DragCompleted="slider_DragCompleted">
</Slider> 
```

并在后面添加了代码：

```
/// <summary>
/// True when the user is dragging the slider with the mouse
/// </summary>
bool sliderThumbDragging = false;

private void slider_DragStarted(object sender, System.Windows.Controls.Primitives.DragStartedEventArgs e)
{
    sliderThumbDragging = true;
}

private void slider_DragCompleted(object sender, System.Windows.Controls.Primitives.DragCompletedEventArgs e)
{
    sliderThumbDragging = false;
} 
```

当用户通过鼠标拖动更新滑块的值时，由于正在读取和调用流，该值仍然会发生变化`UpdateSliderPosition()`。为了防止冲突，`UpdateSliderPosition()`不得不改变：

```
delegate void UpdateSliderPositionDelegate();
void UpdateSliderPosition()
{
    if (Thread.CurrentThread != Dispatcher.Thread)
    {
        UpdateSliderPositionDelegate function = new UpdateSliderPositionDelegate(UpdateSliderPosition);
        Dispatcher.Invoke(function, new object[] { });
    }
    else
    {
        if (sliderThumbDragging == false) //ensure user isn't updating the slider
        {
            double percentage = 0;  //calculate percentage
            percentage *= 100;

            slider.Value = percentage;  //this triggers the slider.ValueChanged event
        }
    }
} 
```

虽然这可以防止冲突，但我们仍然无法确定该值是由用户更新还是通过调用`UpdateSliderPosition()`. 这是由另一个标志修复的，这次是从内部设置的`UpdateSliderPosition()`。

```
 /// <summary>
    /// A value of true indicates that the slider value is being updated due to the stream being read (not by user manipulation).
    /// </summary>
    bool updatingSliderPosition = false;
    delegate void UpdateSliderPositionDelegate();
    void UpdateSliderPosition()
    {
        if (Thread.CurrentThread != Dispatcher.Thread)
        {
            UpdateSliderPositionDelegate function = new UpdateSliderPositionDelegate(UpdateSliderPosition);
            Dispatcher.Invoke(function, new object[] { });
        }
        else
        {
            if (sliderThumbDragging == false) //ensure user isn't updating the slider
            {
                updatingSliderPosition = true;
                double percentage = 0;  //calculate percentage
                percentage *= 100;

                slider.Value = percentage;  //this triggers the slider.ValueChanged event

                updatingSliderPosition = false;
            }
        }
    } 
```

最后，我们能够检测到滑块是由用户更新还是通过调用更新`UpdateSliderPosition()`：

```
 private void slider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        if (updatingSliderPosition == false)
        {
            //user is manipulating the slider value (either by keyboard or mouse)
        }
        else
        {
            //slider value is being updated by a call to UpdateSliderPosition()
        }
    } 
```

希望对某人有所帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-07T14:39:52.450

如果即使用户没有使用拇指来更改值（即单击轨迹栏中的某处），您也想获得操作结束的信息，您可以将事件处理程序附加到滑块以获取按下的指针并捕获丢失的事件。你可以对键盘事件做同样的事情

```
var pointerPressedHandler   = new PointerEventHandler(OnSliderPointerPressed);
slider.AddHandler(Control.PointerPressedEvent, pointerPressedHandler, true);

var pointerCaptureLostHandler   = new PointerEventHandler(OnSliderCaptureLost);
slider.AddHandler(Control.PointerCaptureLostEvent, pointerCaptureLostHandler, true);

var keyDownEventHandler = new KeyEventHandler(OnSliderKeyDown);
slider.AddHandler(Control.KeyDownEvent, keyDownEventHandler, true);

var keyUpEventHandler   = new KeyEventHandler(OnSliderKeyUp);
slider.AddHandler(Control.KeyUpEvent, keyUpEventHandler, true); 
```

这里的“魔法”是 AddHandler 最后带有 true 参数，它允许我们获取滑块“内部”事件。事件处理程序：

```
private void OnKeyDown(object sender, KeyRoutedEventArgs args)
{
    m_bIsPressed = true;
}
private void OnKeyUp(object sender, KeyRoutedEventArgs args)
{
    Debug.WriteLine("VALUE AFTER KEY CHANGE {0}", slider.Value);
    m_bIsPressed = false;
}

private void OnSliderCaptureLost(object sender, PointerRoutedEventArgs e)
{
    Debug.WriteLine("VALUE AFTER CHANGE {0}", slider.Value);
    m_bIsPressed = false;
}
private void OnSliderPointerPressed(object sender, PointerRoutedEventArgs e)
{
    m_bIsPressed = true;
} 
```

当用户当前正在操作滑块（单击、拖动或键盘）时，m_bIsPressed 成员将为真。一旦完成，它将被重置为 false 。

```
private void OnValueChanged(object sender, object e)
{
    if(!m_bIsPressed) { // do something }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-16T14:59:26.560

根据需要，此 Slider wokrs 的子类版本：

```
public class NonRealtimeSlider : Slider
{
    static NonRealtimeSlider()
    {
        var defaultMetadata = ValueProperty.GetMetadata(typeof(TextBox));

        ValueProperty.OverrideMetadata(typeof(NonRealtimeSlider), new FrameworkPropertyMetadata(
        defaultMetadata.DefaultValue,
        FrameworkPropertyMetadataOptions.Journal | FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
        defaultMetadata.PropertyChangedCallback,
        defaultMetadata.CoerceValueCallback,
        true,
        UpdateSourceTrigger.Explicit));
    }

    protected override void OnThumbDragCompleted(DragCompletedEventArgs e)
    {
        base.OnThumbDragCompleted(e);
        GetBindingExpression(ValueProperty)?.UpdateSource();
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-12T02:02:45.577

我喜欢@sinatr 的回答。

我的解决方案基于上面的答案：这个解决方案清理了很多代码并封装了机制。

```
public class SingleExecuteAction
{
    private readonly object _someValueLock = new object();
    private readonly int TimeOut;
    public SingleExecuteAction(int timeOut = 1000)
    {
        TimeOut = timeOut;
    }

    public void Execute(Action action)
    {
        lock (_someValueLock)
            Monitor.PulseAll(_someValueLock);
        Task.Run(() =>
        {
            lock (_someValueLock)
                if (!Monitor.Wait(_someValueLock, TimeOut))
                {
                    action();
                }
        });
    }
} 
```

在你的课堂上使用它：

```
public class YourClass
{
    SingleExecuteAction Action = new SingleExecuteAction(1000);
    private int _someProperty;

    public int SomeProperty
    {
        get => _someProperty;
        set
        {
            _someProperty = value;
            Action.Execute(() => DoSomething());
        }
    }

    public void DoSomething()
    {
        // Only gets executed once after delay of 1000
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-07-29T22:10:34.607

```
<Slider x:Name="PositionSlider" Minimum="0" Maximum="100"></Slider>

PositionSlider.LostMouseCapture += new MouseEventHandler(Position_LostMouseCapture);
PositionSlider.AddHandler(Thumb.DragCompletedEvent, new DragCompletedEventHandler(Position_DragCompleted)); 
```

# sql-server - 如何使用 Sql Server 数据库发布向导制作没有数据的架构？

> ID：723503
> 
> 赞同：1
> 
> 时间：2009-04-06T22:30:58.773
> 
> 标签：sql-server, databasepublishingwizard

我似乎无法弄清楚如何让它创建一个不包含所有数据的脚本，以创建一个空的数据库外壳。还是我必须手动删除所有插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T22:42:54.080

好的，我想通了：最后有一个下拉菜单，您可以在其中选择“架构和数据”、“仅架构”或“仅数据”。

# xml - Flex：从树控件中提取数据

> ID：723509
> 
> 赞同：1
> 
> 时间：2009-04-06T22:33:29.313
> 
> 标签：xml, apache-flex, tree

因此，Flex 为其数据馈送控件的用户操作提供了出色的 API，但是，在我的一生中，我无法弄清楚如何在用户玩完数据后将数据从控件中取出。具体来说，我在 Tree 组件上启用了 dragMove 控件，但我不知道如何将用户发起的更改恢复为可以写回数据库的 XML 数据。

当用户重新排序树时，dataProvider 中没有注册任何更改，如果 dataDescriptor 正在注册这些更改，我不知道如何将数据取回。dataDescriptor 方法 getData() 调用节点参数....哪个节点？节点来自自己的dataProvider？？我不明白。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:38:12.493

I believe what you have to do is listen to the dragOver event and manipulate the resulting data in that handler. Drag drops support is mainly for transferring from one list control to another control.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T02:15:39.623

CookieOfFortune is correct: if you are trying to do more than just nominal drag&drop (e.g. detect changes and propagate them to a DB), you'll probably need to work with the drag & drop interface on the tree.

You can also set a listener to detect when the tree has changed (e.g. a select has occurred). This works for both selects and drag & drops.

Not knowing what you're doing, here's a little code. I only overrode `dragComplete` just to show how an event can be detected.

```
<?xml version='1.0'?>
<mx:Application xmlns:mx='http://www.adobe.com/2006/mxml' backgroundGradientColors='[0xFFFFFF,0xAAAAAA]'>

    <mx:Script>
        <![CDATA[
        import mx.events.DragEvent;
        import mx.controls.Alert;

        [Bindable]
        private var treeData:XML =
            <root>
                <node label="foo">
                    <node label="bar" />
                </node>
                <node label="baz">
                    <node label="buzz">
                        <node label="foobar" />
                    </node>
                </node>
            </root>;

        private function detectChange(event:Event):void {
            Alert.show("change detected!");
        }
        private function detectDragComplete(event:DragEvent):void {
            Alert.show("drag completed!");
        }

        ]]>
    </mx:Script>

  <mx:Tree id="tree" labelField="@label" 
           dataProvider="{treeData.node}" width="200"
           dragEnabled="true"
           dropEnabled="true"
           dragMoveEnabled="true"
           dragComplete="detectDragComplete(event)"
           change="detectChange(event)" />
</mx:Application> 
```

Here are some links with some more information regarding drag&drop functionality in various controls:

*   [http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_7.html](http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_7.html)
*   [http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-08T15:41:54.133

我不得不做同样的事情。我在 DataProvider 上为 CollectionEvent.COLLECTION_CHANGE 事件上的树设置了一个事件侦听器。

```
public function init():void{

        //watch the tree dataProvider changes.
        BindingUtils.bindSetter(setUpDataChangeListner,_tree,["dataProvider"]);
    }

    public function setUpDataChangeListner(value:XMLListCollection):void{
        //set up the event listener for the dataProvider as long as it is not null
        if(value)
            value.addEventListener(CollectionEvent.COLLECTION_CHANGE,onTreeChanged,false,0,true);
    }

    public function onTreeChanged(event:CollectionEvent):void{
        trace("fun");
    } 
```

# dojo - 道场树刷新

> ID：723512
> 
> 赞同：2
> 
> 时间：2009-04-06T22:34:16.787
> 
> 标签：dojo, tree, refresh

使用 Dojo 1.3，在将子项（即文件夹或项）添加到树后，有没有办法通过刷新或其他方法立即反映它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T12:38:02.827

来自官方[Dojo 手册](http://docs.dojocampus.org/dijit/Tree)

> 更新树
> 
> 人们经常问：
> 
> 如何更新树（添加或删除项目？）
> 
> 您不能直接更新树，而是需要更新模型。通常模型连接到数据存储，在这种情况下，您需要更新数据存储。因此，您需要使用允许更新（通过其官方 API）的数据存储，例如 dojo.data.ItemFileWriteStore。
> 
> 如何从商店刷新树？
> 
> 这不受支持。商店需要将数据的任何更改通知树。目前，这实际上只有 dojo.data.ItemFileWriteStore 支持（开箱即用），因为设置一个客户端-服务器 dojo.data 源，服务器在数据发生更改时通知客户端非常复杂，超出了dojo，这是一个仅限客户端的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T17:54:17.373

我已经解决了这个问题，不需要刷新。

```
_refreshNodeMapping: function (newNodeData) {

    if(!this._itemNodesMap[newNodeData.identity]) return;

    var nodeMapToRefresh = this._itemNodesMap[newNodeData.identity][0].item;
    var domNode = this._itemNodesMap[newNodeData.identity][0].domNode;

    //For every updated value, reset the old ones
    for(var val in newNodeData)
    {
        nodeMapToRefresh[val] = newNodeData[val];

        if(val == 'label')
        {
            domNode.innerHTML = newNodeData[val];
        }
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:52:26.360

比如说，如果您的模型有查询 `{type:'continent'} - 意味着具有此属性的任何项目都是顶级项目，那么以下模型扩展将监视更改并刷新树的视图

```
var dataStore = new ItemFileWriteStore( { ... });
new Tree({
  store: dataStore,
  model: new ForestModel({
    onNewItem: function(item, parentInfo){
        if(this.store.getValue(item, 'type') == 'continent'){
            this._requeryTop();
        }
        this.inherited(arguments);
    }
  }
}); 
```

这应该反过来`childrenChanged`在树中调用并在每次添加新项目时更新它。

参见[模型参考](http://dojotoolkit.org/reference-guide/1.7/dijit/tree/ForestStoreModel.html)

另外，如果添加的项目不是顶级项目，则应该可以使用此语句立即更新。`parent`是已将项目添加到其`children`.

```
tree._collapseNode(parent);
parent.state = 'UNCHECKED';
tree._expandNode(parent); 
```

可以通过以下方式实现或多或少的“标准”刷新树。它没有被添加到基本实现的原因，我认为是因为它会破坏与树上 DnD 功能的链接

```
dojo.declare("My.Tree", [dijit.Tree], {

           // Close the store? (So that the store will do a new fetch()).
         reloadStoreOnRefresh : true, 

         update: function() {
            this.model.store.clearOnClose = this.reloadStoreOnRefresh;
            this.model.store.close();

            // Completely delete every node from the dijit.Tree
            delete this._itemNodesMap;
            this._itemNodesMap = {};
            this.rootNode.state = "UNCHECKED";
            delete this.model.root.children;
            this.model.root.children = null;

            // Destroy the widget
            this.rootNode.destroyRecursive();

            // Recreate the model, (with the model again)
            this.model.constructor(this.model)

            // Rebuild the tree
            this.postMixInProperties();
            this._load();
         }
      }
); 
```

# ado.net - 我如何使用 ado.net 数据服务来检查行是否存在？

> ID：723530
> 
> 赞同：0
> 
> 时间：2009-04-06T22:38:57.587
> 
> 标签：ado.net, dataservice

```
var svc = new LocationDataServiceContext();
var q = from c in svc.LocationTable
                      where c.ID == int.Parse(location.ID)
                      select c;
if (q.ToArray().Length == 0) 
```

有没有更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T23:01:37.873

是的，我相信是的……

```
 var svc = new LocationDataServiceContext();

    if (svc.LocationTable.SingleOrDefault(c => c.ID == int.Parse(location.ID) != null))
    {

    } 
```

我以为有一个 Exist() 方法……但我想没有。

# c# - 在单独的线程上启动事件处理程序类时 GUI 更新？

> ID：723532
> 
> 赞同：0
> 
> 时间：2009-04-06T22:39:16.553
> 
> 标签：c#, .net, multithreading, user-interface

我们有一个 DLL 可以监控状态变化并从单独的购买产品中查找事件。实际上，它是 Siemens 的 ScreenPop API，对于那些可能知道它是什么的人来说。我使用 C#.NET 3.5 作为平台。

这个 API 需要很长时间来初始化，所以我们想使用一个单独的线程来初始化它。目前，我们在一个名为 ScreenPop 的类中拥有该功能。该类监视 2 个事件，一个状态更改事件和一个屏幕弹出事件（告诉我们正在呼叫的客户是谁的数据）。

当前实现的方式不起作用，或者至少不能可靠地工作。在 ScreenPop 类中，有一个初始化方法，用于放置所有长时间运行的启动代码。这是从类的构造函数中调用的，如下所示：

```
public ScreenPop( string Address, int Ext, CallbackStatusType pStatusFunc,
      CallbackScreenPopType pPopFunc 
)
{
    CallbackStatus = pStatusFunc;
    CallbackPopup = pPopupFunc;

    Thread t = new Thread( StartInBackground );
    t.Start();
} 
```

在 GUI 代码中，pStatusFunc 处的 func 更新状态标签，pPopupFunc 处的 func 将触发一些其他代码来执行屏幕弹出 - 现在它只显示来自事件的数据。

缺少很多胶水，但我希望你明白这一点。这种方法的问题是 GUI 没有更新。我知道事件触发并且事件处理程序运行，并且回调函数被调用并且它们似乎应该运行，但 GUI 从未更新。

所以，我的问题是，我应该放弃这个以支持 BackgroundWorker 方法吗？或者我只是在让 GUI 更新时遗漏了什么？

应要求提供更多信息...谢谢，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T22:53:30.593

您永远不能从不同的线程更新 GUI - 只能从启动应用程序的 UI 线程更新。您需要使用 Control.Invoke 方法在 UI 线程上运行代码。表单实例，frmMain.Invoke。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T23:02:54.657

您不能`WinForms`在多线程单元中使用，要解决此问题，您必须编组到 UI 线程以对其执行操作或获取结果。由于您使用的是 C#3.5，因此您可以利用 lambda、泛型和扩展方法来制作一个非常干净且易于使用的解决方案。

```
public static class ControlExtensions
{
  public static TResult InvokeEx<TControl, TResult>(this TControl control,
                            Func<TControl, TResult> func)
    where TControl : Control
  {
    if (control.InvokeRequired)
    {
      return (TResult)control.Invoke(func, control);
    }
    else
    {
      return func(control);
    }
  }
} 
```

现在您可以安全轻松地进行更改或获取值。

```
this.InvokeEx(f => f.label1.Text = "Hello from another thread");

new Thread(() =>
  {
    string formTitle = this.InvokeEx(f => f.Text); // Safely get form title
  }).Start(); 
```

# mysql - 快速 InnoDB 恢复？

> ID：723544
> 
> 赞同：2
> 
> 时间：2009-04-06T22:45:06.120
> 
> 标签：mysql, innodb

我正在开发大约 5GB 的 MySQL / InnoDB 数据库的开发副本。

我需要经常恢复它以测试更改脚本，并且使用 mysqldump 文件需要相当长的时间。该文件本身大约 900MB，加载大约需要一个小时。我已经删除了不重要表的数据插入，并完成了扩展插入等，但它仍然很慢。

有没有更快的方法来做到这一点？我正在考虑从 .../mysql/database-name、id_logfile# 和 ibdata1 复制数据库文件，并在我需要“重置”数据库时将它们复制回来，但这对 InnoDB 是否可行? ibdata 文件是一个数据库吗？我只看到一个，即使我在这个盒子上有多个 InnoBD 数据库。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T22:49:23.940

我不知道它是否会更快——实际上它可能会更慢，这取决于你的测试改变数据的程度——但是如果你把所有的测试放在一个事务中，然后回滚呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T22:55:36.033

我相信您可以复制为数据库命名的文件（关闭服务器守护程序），一切都应该很好。似乎对示例数据库进行一些测试应该很快就能回答，不是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T23:57:02.283

使用磁盘的 LVM 快照。加载您的数据（漫长的过程）并拍摄快照（几秒钟）。然后，当您需要返回快照时，玩 LVM 游戏——同样只需几秒钟即可重新加载和重新克隆*任何*大小的磁盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-05T22:58:51.030

[你也许可以用http://dev.mysql.com/doc/refman/5.1/en/multiple-tablespaces.html](http://dev.mysql.com/doc/refman/5.1/en/multiple-tablespaces.html)做点什么

请参阅 ALTER TABLE xxx IMPORT TABLESPACE 选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-09T13:33:17.063

对于 innodb 备份和恢复速度，您可能需要查看 mydumper/myloader - 由于多线程性质，比 mysqldump 快得多[http://vbtechsupport.com/1716/](http://vbtechsupport.com/1716/)

# c# - TCP Socket.Connect 正在生成误报

> ID：723566
> 
> 赞同：2
> 
> 时间：2009-04-06T22:56:36.187
> 
> 标签：c#, .net, sockets, tcp

我在 C# 中使用 Socket.Connect 方法时遇到了非常奇怪的行为。我正在尝试 TCP Socket.Connect 到一个有效的 IP 但关闭的端口，并且该方法正在继续，就好像我已成功连接一样。当我嗅探数据包发生的事情时，我看到应用程序正在从远程机器接收 RST 数据包。然而，从现有的跟踪中可以清楚地看出，connect 方法没有引发异常。有什么想法可能导致这种情况吗？

运行的代码基本上是这样的

```
IPEndPoint iep = 
    new IPEndPoint(System.Net.IPAddress.Parse(m_ipAddress), m_port);
Socket tcpSocket = new Socket(AddressFamily.InterNetwork, 
    SocketType.Stream, ProtocolType.Tcp);
tcpSocket.Connect(iep); 
```

更神秘的是……当在一个独立的控制台应用程序中运行这段代码时，结果与预期的一样——connect方法抛出了一个异常。但是，在 Windows 服务部署中运行它时，我们的 connect 方法不会引发异常。

**编辑以回应神秘人的回答** 如何吞下异常？我在 .Connect 方法的正上方有一个 Trace.WriteLine，在它的正下方有一个 Trace.WriteLine（为了便于阅读，代码示例中未显示）。我知道两条跟踪都在运行。我也尝试了整个事情，它也做了一个 Trace.Writeline ，我在任何地方的日志文件中都看不到它。我还按照您的建议启用了内部套接字跟踪。我没有看到任何例外。我看到似乎是成功的连接。

我正在尝试确定 Windows 服务应用程序和我制作的诊断控制台应用程序之间的差异。虽然我的想法不多了

**结束编辑**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T23:05:18.177

您确定异常没有在服务中被捕获和吞噬，但不是在控制台应用程序中？

我的第一步是隔离两种实现之间的差异。您提到了跟踪，但您没有说这是网络跟踪（BCL 的一部分）还是您自己的跟踪。如果您不使用网络跟踪，请启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-23T17:30:29.093

请参阅 AppDomain.CurrentDomain.UnhandledException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-16T15:05:38.793

我再也没有观察到这一点。在我看来，某处发生了腐败。安装应用程序的操作系统或 .NET 框架。

# events - 处理日志中的重复事件

> ID：723572
> 
> 赞同：0
> 
> 时间：2009-04-06T22:58:57.460
> 
> 标签：events, logging, spam, system

我有一个日志系统，其中一些事件无限重复。例如：

12:03 - 重新启动尝试
12:03 - 重新启动失败
12:02 - 重新启动尝试
12:02 - 重新启动失败
12:01 - 重新启动尝试
12:01 - 重新启动失败

这可能会持续几天。我想系统有一些标准的方式来处理这样的垃圾邮件事件。

日志系统在不淹没日志系统的情况下处理此类事件的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T23:06:28.300

一种方法是合并在彼此的某个时间增量内重复的匹配条目，例如

```
12:03 - 尝试重新启动 [自 12:01 起 3 次]
12:03 - 重启失败 [自 12:01 起 3 次]
12:02 - 某事
11:23 - 尝试重启 [自 11:21 起 17 次]

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T23:47:09.870

他们通常要么强迫你解决问题，要么有标志来压制它们。我认为是正确的。

无论如何，错误日志通常长期得不到管理和监控。如果它是我以任何方式参与的应用程序，如果它引起某人的注意，我会尽快看到尽可能多的挥舞旗帜。

# java - Java BrowserLauncher 抛出 InvocationTargetException

> ID：723573
> 
> 赞同：0
> 
> 时间：2009-04-06T22:59:39.313
> 
> 标签：java, exception

我正在使用 BrowserLauncher2 库从我的 Swing 应用程序中打开用户的默认 Web 浏览器，但它引发了一个非常令人困惑的异常：

```
public static void openURL(String url) {
        try{
            BrowserLauncher launcher = new BrowserLauncher();
            launcher.openURLinBrowser(url);
        }catch(Exception e){
            e.printStackTrace();
        }
    }

Exception:

edu.stanford.ejalbert.exception.BrowserLaunchingExecutionException: java.lang.reflect.InvocationTargetException
    at edu.stanford.ejalbert.launching.macos.MacOs3_1BrowserLaunching.openUrl(MacOs3_1BrowserLaunching.java:61)
    at edu.stanford.ejalbert.BrowserLauncherRunner.run(BrowserLauncherRunner.java:136)
    at java.lang.Thread.run(Thread.java:613)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at edu.stanford.ejalbert.launching.macos.MacOs3_1BrowserLaunching.openUrl(MacOs3_1BrowserLaunching.java:58)
    ... 2 more
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission canOpenURLs)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:264)
    at java.security.AccessController.checkPermission(AccessController.java:427)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.apple.eio.FileManager.openURL(FileManager.java:229)
    at com.apple.mrj.MRJPriv.openURL(MRJPriv.java:255)
    at com.apple.mrj.MRJFileUtils.openURL(MRJFileUtils.java:206)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:12:13.103

您正在使用一`SecurityManager`组运行您的应用程序。(aka acc) 中的某些代码`AccessControlContext`没有所需的权限。可能该代码是您的应用程序代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:53:08.070

An`InvocationTargetException`总是包装另一个异常，该异常是在通过反射调用方法或构造函数时引起的。要解决您的问题，您需要查看其下的异常`IllegalAccessException`，正如 Tom Hawtin 指出的那样，由于`SecurityManager`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T00:09:30.373

首先，`BrowserLauncher`不支持Mac OS < 10.2。

此外，在 MacOS 上，`BrowserLauncher`无法针对特定浏览器启动默认浏览器。您可以尝试更改计算机上的默认浏览器，看看是否有帮助。显然，这可以通过以下方式完成：启动 Safari -> 选择首选项 -> 在常规选项卡中，找到默认网络浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T15:31:08.367

我通过我的一个小程序使用 BrowserLauncher2 获取 AccessControlExceptions。您的情况可能类似，因为您正在使用 SecurityManager 运行您的应用程序。

我通过用我的证书签署 BrowserLauncher2 jar 解决了我的问题。如果您的用户接受您的证书，BrowserLauncher 应该拥有完成其工作所需的权限。

# networking - 为什么这些站点会收到我的网络超时，而其他人却没有？

> ID：723574
> 
> 赞同：0
> 
> 时间：2009-04-06T23:00:00.110
> 
> 标签：networking

我遇到了一个丑陋的障碍。几年前，我为一位客户开发了一个网站，从那时起，他们将网站转移到了不同​​的域名提供商和主机。现在他们想要一些更新，但是当我尝试访问他们的网站时，我得到了网络超时（页面只是尝试加载几分钟，然后 Firefox 显示网络超时错误）。我可以通过代理访问该站点，但代理有点糟糕并且不支持所有内容，而且我对通过代理发送敏感数据有点偏执，更不用说我不知道​​这对我有什么帮助 FTP访问和什么不是。我不确定这个问题发生在哪里……是我的 ISP 阻止了它，网络服务器阻止了我，是我的路由器，还是发生了什么？我知道有两个网站可以做到这一点，*他们由同一个人主持。*

 *这些网站是[http://fvringette.com/](http://fvringette.com/)和[http://damngoodtimes.com/](http://damngoodtimes.com/)

* * *

@MarkusQ：fvringette.com 的跟踪路由（结果与damngoodtimes.com 相同）

```
traceroute: Warning: Multiple interfaces found; using 134.117.14.35 @ hme0
traceroute to 76.74.225.90 (76.74.225.90), 30 hops max, 40 byte packets
 1  unix-gate.physics.carleton.ca (134.117.14.1)  0.973 ms  0.513 ms  0.514 ms
 2  10.50.254.3 (10.50.254.3)  0.437 ms  0.385 ms  0.351 ms
 3  10.30.33.1 (10.30.33.1)  0.488 ms  0.394 ms  0.370 ms
 4  10.30.55.1 (10.30.55.1)  0.396 ms  0.416 ms  0.391 ms
 5  134.117.254.242 (134.117.254.242)  0.708 ms  0.720 ms  0.704 ms
 6  10.30.57.1 (10.30.57.1)  1.338 ms  1.221 ms  1.237 ms
 7  kolker.fcican.com (207.34.252.249)  1.464 ms  1.544 ms  1.459 ms
 8  * * *
 9  154.11.3.17 (154.11.3.17)  7.355 ms  7.393 ms  7.426 ms
10  oc48.so-2-0-3.van-hc21e-cor-1.peer1.net (216.187.114.137)  62.762 ms  62.838 ms  62.625 ms
11  oc48.pos4-0.van-hc21e-dis-1.peer1.net (216.187.89.253)  62.795 ms  63.238 ms  62.893 ms
12  64.69.91.245 (64.69.91.245)  64.103 ms  62.908 ms  63.266 ms
13  64.69.91.245 (64.69.91.245)  63.094 ms !H  63.072 ms !H  63.173 ms !H 
```

* * *

64.69.91.245 - 地理信息

```
IP Address  64.69.91.245
Host        64.69.91.245
Location    CA CA, Canada
City        Vancouver, BC v6b4n5
Organization    Peer1 Internet Bandwidth & Server Co-Location Faci
ISP         Peer 1 Network
AS Number   AS13768
Latitude    49°25'00" North
Longitude   123°13'33" West
Distance    9281.29 km (5767.13 miles) 
```

64.69.91.245 - Whois 信息

```
OrgName:    Peer 1 Network Inc. 
OrgID:      PER1
Address:    75 Broad Street
Address:    2nd Floor
City:       New York
StateProv:  NY
PostalCode: 10004
Country:    US

NetRange:   64.69.64.0 - 64.69.95.255 
CIDR:       64.69.64.0/19 
NetName:    PEER1-BLK-01
NetHandle:  NET-64-69-64-0-1
Parent:     NET-64-0-0-0-0
NetType:    Direct Allocation
NameServer: NS1.PEER1.NET
NameServer: NS2.PEER1.NET
Comment:    
RegDate:    2000-04-12
Updated:    2007-08-29

RTechHandle: ZP55-ARIN
RTechName:   Peer1 Network Inc. 
RTechPhone:  +1-604-683-7747
RTechEmail:  net-admin@peer1.net 

OrgAbuseHandle: NSA-ARIN
OrgAbuseName:   Peer 1 Network AUP Enforcement 
OrgAbusePhone:  +1-604-484-2588
OrgAbuseEmail:  abuse@peer1.net

OrgTechHandle: ZP55-ARIN
OrgTechName:   Peer1 Network Inc. 
OrgTechPhone:  +1-604-683-7747
OrgTechEmail:  net-admin@peer1.net

OrgName:    Peer1 Internet Bandwidth & Server Co-Location Facilities 
OrgID:      PIBSCF
Address:    2100-555 W. hastings St.
City:       Vancouver
StateProv:  BC
PostalCode: V6B 4N5
Country:    CA

NetRange:   64.69.91.240 - 64.69.91.255 
CIDR:       64.69.91.240/28 
NetName:    PEER1-GVLANPRI-01
NetHandle:  NET-64-69-91-240-1
Parent:     NET-64-69-64-0-1
NetType:    Reassigned
Comment:    
RegDate:    2002-03-14
Updated:    2002-03-14

RTechHandle: MT1763-ARIN
RTechName:   Teolis, Mark 
RTechPhone:  +1-604-683-7747
RTechEmail:  net-admin@peer1.net 

# ARIN WHOIS database, last updated 2009-04-06 19:10
# Enter ? for additional hints on searching ARIN's WHOIS database. 
```

* * *

我突然想到，如果我从我的家用计算机跟踪到 fvringette.com，而不是从一些实际上可以连接的随机计算机进行跟踪，它可能会更有用。输出`tracert`：

```
 1    <1 ms    <1 ms    <1 ms  <snip>
  2    24 ms    24 ms    23 ms  70.71.106.1
  3    24 ms    24 ms    24 ms  rd1bb-ge5-0-0-1.vc.shawcable.net [64.59.149.2]
  4    25 ms    29 ms    29 ms  rc2bb-tge0-15-0-0.vc.shawcable.net [66.163.69.137]
  5    28 ms    30 ms    29 ms  rc2wh-tge0-15-1-0.vc.shawcable.net [66.163.69.121]
  6    25 ms    24 ms    24 ms  204.239.129.213
  7    26 ms    29 ms    29 ms  oc48.pos3-0.van-spenc-dis-1.peer1.net [216.187.89.250]
  8    27 ms    29 ms    30 ms  64.69.91.245
  9     *        *        *     Request timed out.
 10     *        *        *     Request timed out. 
```

在此之后，所有请求都保持超时。它是同一个 IP，`64.69.91.245`这似乎是导致问题的原因......这是否意味着我只是不走运并且有一个无法转发我的请求的死服务器？我不知道这些东西是如何工作的。

* * *

我可以 ping 64.69.91.245，但不能 telnet 64.69.91.245。它说'连接失败'，而不是'连接被拒绝'......我想不出为什么它会失败，但没有其他人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T23:22:55.437

尝试为初学者做一个`traceroute`。

第 13 行的 " `!H`" 表示主机 (64.69.91.245) 无法访问——但并非一直无法访问（参见第 12 行）。乍一看，这比您的 ISP 更远，也许是他们的。

下一步将是弄清楚那是谁......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-12T03:40:38.820

我的猜测是他们的硬件有问题，或者他们无意中阻止了你。

某些网络具有阻止 telnet 连接/数据包的策略，前提是它们未加密且仅允许 SSH。

当然，他们可能出于其他原因阻止您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-12T03:46:58.680

也许你应该和他们讨论一下。他们可能会阻止您的 IP 地址，因为您整天都在尝试远程登录到他们的服务器。:)

# c++ - 我是如何打破继承的？

> ID：723581
> 
> 赞同：2
> 
> 时间：2009-04-06T23:02:45.327
> 
> 标签：c++, inheritance, oop

[从bug_report_view.cc](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/views/bug_report_view.cc)和[bug_report_view.h](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/views/bug_report_view.h)重构，我提取了`send_report()`, `report_phishing()`，其他一些较小的函数并`BugReport::Cleanup`放入[bug_report.cc](http://codepad.org/pRBblPQQ)和[bug_report.h](http://codepad.org/5mHJXwaf)（我的版本）。现在编译，我得到：

> `[...]bug_report.cc:196: error: no matching function for call to ‘URLFetcher::URLFetcher(std::wstring&, URLFetcher::RequestType, BugReport::PostCleanup*)’ ../chrome/browser/net/url_fetcher.h:136:`
> 
> `note: candidates are: URLFetcher::URLFetcher(const URLFetcher&) ../chrome/browser/net/url_fetcher.h:82:`
> 
> `note: URLFetcher::URLFetcher(const GURL&, URLFetcher::RequestType, URLFetcher::Delegate*)`

出于某种原因，`BugReport::PostCleanup`（在我的版本中）不被识别为 URLFetcher::Delegate 的子类，但`BugReportView::PostCleanup`（在第一个链接中）是。那我哪里搞砸了？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T23:16:43.017

问题不在于 PostCleanup 类的类型。问题是 URLFetcher 类构造函数的第一个参数的类型。构造函数需要一个 GURL &，你正在传递一个`std::wstring`被调用的`post_url`. 您将需要在两者之间执行某种转换。可能这样的事情是合适的：

```
GURL post_url(l10n_util::GetString(IDS_BUGREPORT_POST_URL));
URLFetcher* fetcher = new URLFetcher(post_url, URLFetcher::POST,
                                   new BugReport::PostCleanup); 
```

在您修改的代码中，该类有一个在构造函数中初始化的 GURL 成员，您已将其更改为仅在该函数中引用的变量，但更改了类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T23:14:42.430

在：

```
 URLFetcher* fetcher = new URLFetcher(post_url, URLFetcher::POST,
                                       new BugReport::PostCleanup); 
```

它找不到 URLFetcher 构造函数，它接受你给它的参数 - 问题可能出在你没有显示的 url_fetcher.h 中。

顺便说一句，您的代码中还存在许多其他问题和不良做法 - 尽快发起完整的代码审查是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:18:32.263

第一个版本使用成员变量 post_url_ 第二个只是局部变量 post_url。
请描述什么是 GURL 类型 - 它是 std::wstring 上的 typedef 或其他类型。

# sql-server - 我应该在电话的 SQL varchar(length) 中考虑的最长的全球电话号码是多少

> ID：723587
> 
> 赞同：226
> 
> 时间：2009-04-06T23:04:40.330
> 
> 标签：sql-server, validation, database-design, data-modeling, phone-number

我应该在电话的 SQL`varchar(length)`中考虑最长的全球电话号码是多少。

考虑因素：

*   + 国家代码
*   () 代表区号
*   x + 6 个数字用于扩展扩展名（所以将其设为 8 {space}）
*   组之间的空格（即在美国电话中 +x xxx xxx xxxx = 3 个空格）
*   这是我需要你帮助的地方，我希望它在全球范围内

考虑到现在在我的特殊情况下，我不需要卡等号码以国家代码开头并以分机号结尾，不需要传真/电话等评论，也不需要电话卡的东西。

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2011-01-18T21:26:50.013

假设您不存储诸如“+”、“()”、“-”、空格和你有什么（为什么会这样，它们是表示问题，会因当地习俗和网络分布而异）无论如何），国际电话网络（大多数国家网络通过该网络连接）的 ITU-T 建议[E.164](http://www.itu.int/ITU-T/recommendations/rec.aspx?rec=E.164)指定整个号码（包括国家代码，但不包括前缀，例如拨出所需的[国际呼叫前缀](http://en.wikipedia.org/wiki/International_dialing_prefix)，因国家/地区而异，不包括后缀，例如 PBX 分机号码）最多**15 个字符**。

呼叫前缀取决于呼叫者，而不是被呼叫者，因此（在许多情况下）不应与电话号码一起存储。如果数据库存储个人通讯录的数据（在这种情况下存储国际电话前缀是有意义的），那么在芬兰，您必须处理的最长的国际前缀（[根据维基百科](http://en.wikipedia.org/wiki/List_of_international_call_prefixes)）目前是 5 位数字。

至于后缀，一些 PBX 最多支持 11 位扩展名（同样，[根据 Wikipedia](http://support.apple.com/kb/TA46568?viewlocale=en_US)）。由于 PBX 分机号码是不同拨号计划的一部分（PBX 与电话公司的交换机分开），因此分机号码需要与电话号码区分开来，可以使用分隔符，也可以将它们存储在不同的列中。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2009-04-06T23:13:25.600

好吧，考虑到 varchar(30) 和 varchar(100) 之间没有开销差异，如果您只在每个字符中存储 20 个字符，请谨慎行事，只需将其设为 50。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-07T00:47:03.800

在 GSM 规范**3GPP TS 11.11**中，在 MSISDN EF (6F40) 中留出了 10 个字节用于“拨号号码”。由于这是电话号码的 GSM 表示，并且它的用法是半字节交换的，（并且总是有括号的可能性）22 个字符的数据应该足够了。

根据我的经验，只有一个开/关括号的实例，这就是我对上述内容的推理。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-06T23:11:05.853

更糟糕的是，我使用电话卡拨打国际电话，所以它在美国的本地号码 + 帐号（6 位）+ 密码（4 位）+“暂停”+ 你上面描述的。

我怀疑可能还有其他情况

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-08-23T10:48:48.307

至于“电话号码”，您应该真正考虑“订户号码”和“拨号号码”之间的区别以及它们可能的格式选项。

用户号码通常在国家编号方案中定义。这个问题本身通过提到许多国家没有的“区号”来表明与国家观点的关系。国际电联汇总了发布建议 E.164 的全球编号计划概览，其中发现国家号码最多为 12 位数字。使用由 1 到 3 位数的国家代码定义的国际直接长途电话 (DDD)，他们添加了最多 15 位数字......没有格式化。

The dialling number is a different thing as there are network elements that can interpret exta values in a phone number. You may think of an answering machine and a number code that sets the call diversion parameters. As it may contain another subscriber number it must be obviously longer than its base value. RFC 4715 has set aside 20 bcd-encoded bytes for "subaddressing".

If you turn to the technical limitation then it gets even more as the subscriber number has a technical limit in the 10 bcd-encoded bytes in the 3GPP standards (like GSM) and ISDN standards (like DSS1). They have a seperate TON/NPI byte for the prefix (type of number / number plan indicator) which E.164 recommends to be written with a "+" but many number plans define it with up to 4 numbers to be dialled.

因此，如果您想成为未来的证明（并且许多软件系统出乎意料地运行了几十年），您将需要考虑 24 位用户号码和 64 位拨号号码作为限制......没有格式化。添加格式可能会为每个数字添加大约一个额外的字符。因此，作为最后的想法，以任何方式限制数据库中的电话号码并给用户体验设计师留下更短的限制可能不是一个好主意。

# mysql - 无法在正确的 URL 上打开 Joomla 文章

> ID：723588
> 
> 赞同：0
> 
> 时间：2009-04-06T23:04:48.177
> 
> 标签：mysql, joomla, joomla-article

**问题：**我的文章有正确的网址：例如，newsite.com/article。但是，通过单击一篇文章，我会得到一篇空文章。我可以看到我的侧边栏。

我将我的 Joomla 安装移动到服务器中的另一个文件夹。我想将我的域从 OldSite.com 更改为 NewSite.com。

我不确定是否也需要更改**数据库**。

我最近在 NewSite.com 上的**configuration.php**是从 OldSite.com 移来的。

```
<?php
class JConfig {
var $offline = '1';
var $editor = 'jce';
var $list_limit = '20';
var $helpurl = 'http://help.joomla.org';
var $debug = '0';
var $debug_lang = '0';
var $sef = '1';
var $sef_rewrite = '1';
var $sef_suffix = '0';
var $feed_limit = '10';
var $secret = '----------------';
var $gzip = '0';
var $error_reporting = '7';
var $xmlrpc_server = '0';
var $log_path = '/home/masi/public_html/NewSite/logs';        // I added this
var $tmp_path = '/home/masi/public_html/NewSite/tmp';         // I added this
var $live_site = 'http://www.NewSite.com/';                   // I added this
var $offset = '0';
var $caching = '0';
var $cachetime = '15';
var $cache_handler = 'file';
var $memcache_settings = array();
var $ftp_enable = '0';
var $ftp_host = '127.0.0.1';
var $ftp_port = '21';
var $ftp_user = 'admin';
var $ftp_pass = '------------';              // hidden now for security
var $ftp_root = '';
var $dbtype = 'mysql';
var $host = 'localhost';
var $user = 'masi_jml02';                   
var $db = 'masi_jml02';                      
var $dbprefix = '';
var $mailer = 'mail';
var $mailfrom = 'admin@masi.com';          
var $fromname = '';
var $sendmail = '/usr/sbin/sendmail';
var $smtpauth = '1';
var $smtpuser = '';
var $smtppass = '';
var $smtphost = 'localhost';
var $MetaAuthor = '0';
var $MetaTitle = '1';
var $lifetime = '15';
var $session_handler = 'database';
var $password = '--------------';                   // hidden now for security
var $sitename = '--------------';                   // hidden now for security
var $MetaDesc = '';
var $MetaKeys = '';
var $offline_message = 'This site is down for maintenance. Please check back again soon.';
}
?> 
```

我在上面的代码中添加了注释以指示我在移动安装文件夹后更改的行。

我的**index.php**在 public_html/NewSite/templates/Theme/

```
<?php

// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" >
<head>
<jdoc:include type="head" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl;?>/templates/system/css/general.css" type="text/css" />

<link rel="stylesheet" href="<?php echo $this->baseurl;?>/templates/<?php echo $this->template ?>/css/customize.css" type="text/css" />

<script type="text/javascript" src="<?php echo $this->baseurl;?>/templates/<?php echo $this->template ?>/js/global.js"></script>
<?php if($this->countModules('left') <= 0 ) : ?>

<?php endif; ?>
<?php $div_wrap = ($this->countModules('left')) ? 'modulewrap' : 'modulewrap_wide'; ?>
<?php $div_right = ($this->countModules('user4')) ? 'right' : 'right_wide'; ?>
<?php $div_left = ($this->countModules('right')) ? 'left' : 'left_wide'; ?>
</head><body>
<div id="outerwrap">

  <div id="header">

    <?php if($this->countModules('user1')) : ?>
    <jdoc:include type="modules" name="user1" style="xhtml" />
    <?php else: ?>
    <h1><a href="<?php echo $mainframe->getCfg('live_site');?>" title="<?php echo $mainframe->getCfg('sitename');?>"><?php echo $mainframe->getCfg('sitename');?></a></h1>
    <?php endif; ?>

  </div>

<!-- 3bar column -->
      <?php if ($this->countModules('top')): ?>
      <div id="top">
      <jdoc:include type="modules" name="top" style="xhtml" />
      </div>
      <?php endif; ?>
<!-- End 3bar column -->
  <div class="clear"></div>
  <div id="wrapper">

  <!-- Start leftcol -->
    <?php if($this->countModules('left')) : ?>
    <div id="leftcol">
      <jdoc:include type="modules" name="left" style="xhtml" />
    </div>
    <!-- END leftcol -->
    <?php endif; ?>

<!-- Right column -->
      <?php if ($this->countModules('user3')): ?>
      <div id="user3">
      <jdoc:include type="modules" name="user3" style="xhtml" />
      </div>
      <?php endif; ?>
<!-- End Right column -->

    <div id="mainbody">
      <div class="inside">
        <jdoc:include type="message" />
        <jdoc:include type="component" />
</div>
      <!-- END INSIDE -->
    </div>
    <!-- END MAINBODY -->

      <div class="clear"></div>
    </div>
    <!--END WRAP-->
  </div>
  <!--END WRAPPER-->
  <div class="clear"></div>
  <div id="bottombar"></div>
</div>
<!--END OUTERWRAP-->

<div class="designer">
<jdoc:include type="modules" name="footer" style="raw" /></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-08T09:32:59.453

行...

*   您将整个安装移至新目录？子目录？
*   “未正确打开”是什么意思？请提供错误信息或链接！
*   你调整了configuration.php！？你能把它贴在这里吗（去掉密码）
*   它绝对可以在数据库中不做任何事情的情况下工作。
*   你确定configuration.php中的更改已经生效吗？例如文件不可写或您离线编辑它并忘记上传它......
*   你干预了你的模板的 index.php 吗？也许网址在某处被硬编码？
*   是否还有其他需要重新调整/重新配置的组件/模块/插件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-12T16:23:05.213

我的站点配置为使用 mod_rewrite，但没有可用的 .htaccess 文件。

我禁用了 mod_rewrite，链接现在可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T20:54:39.640

如果您的新网站位于 web-server 根目录下的子文件夹中，只需检查`RewriteBase`.htaccess 文件中的指令。更新`RewriteBase /`到`RewriteBase /subfolder/` 我可以看到，您网站的根目录很可能是`public_html`目录，而实际网站位于`NewSite`目录中。所以尝试替换`RewriteBase /`为`RewriteBase /NewSite/`（尾随斜杠是强制性的）。

# oop - 新的架构概念

> ID：723589
> 
> 赞同：13
> 
> 时间：2009-04-06T23:05:16.133
> 
> 标签：oop, architecture, theory

我发布了这个社区 wiki，希望创建一个专业知识线程。因此，我的问题是……“专家们去哪里学习最新的编码技术？”。

我基本上是在寻找建筑、设计、开发和理论的前沿/前沿。

我知道会议和贸易展览可能是看到最新和最伟大的最佳场所，但对于像我这样预算有限（时间和金钱）的人，我正在寻找我可以在晚上阅读的网站将使我了解世界上的最新动态。

我主要用 C# 编程，但网站不需要面向 C#。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T23:11:31.157

**博客**

*   **Martin Fowler**，我认为最好的起点。( [http://martinfowler.com/](http://martinfowler.com/) )
    *   诸如*“消费者驱动的合同：服务演进模式”、“模拟不是存根”、“控制容器的反转和依赖注入模式”等*文章( [http://martinfowler.com/articles.html](http://martinfowler.com/articles.html) )
*   *大卫·海登*( [http://www.davidhayden.com/](http://www.davidhayden.com/) )
*   *Reflective Perspective*，一个很好的日常提要（[http://blog.cwa.me.uk/tags/morning-brew/](http://blog.cwa.me.uk/tags/morning-brew/)）
*   艾扬德 ( [http://ayende.com/Blog/](http://ayende.com/Blog/) )
*   [Eric Lippert](http://blogs.msdn.com/ericlippert/) - 在语言上工作。有时会在其他地方宣布新的 C# 功能之前阅读它们。
*   [斯科特·汉塞尔曼](http://www.hanselman.com/blog/AboutMe.aspx)

**期刊**

*   *建筑杂志*( [http://msdn.microsoft.com/en-us/architecture/bb410935.aspx](http://msdn.microsoft.com/en-us/architecture/bb410935.aspx) ) 还有一个不错的选择 - 您可以**免费订购纸质**副本！
*   *MSDN 杂志*( [http://msdn.microsoft.com/en-us/magazine/default.aspx](http://msdn.microsoft.com/en-us/magazine/default.aspx) )

**社区**

*   *Codeproject.com*，短篇和大篇文章
*   *pnpguidance.com*、教程、博客和文章

**真实的应用程序和开发团队**

*   **模式与实践**主页： http: [//msdn.microsoft.com/en-us/practices/default.aspx](http://msdn.microsoft.com/en-us/practices/default.aspx)和 P&P 产品
*   *SCSF*，智能客户端软件工厂之家。了解桌面企业系统。( [http://msdn.microsoft.com/en-us/library/aa480482.aspx](http://msdn.microsoft.com/en-us/library/aa480482.aspx) )
*   *WCSF*，Web 客户端软件工厂的主页。了解面向业务（流程）的 Web 架构。（[http://msdn.microsoft.com/en-us/library/bb264518.aspx](http://msdn.microsoft.com/en-us/library/bb264518.aspx)）
*   企业图书馆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T23:10:46.307

免费 - 我会推荐[MSDN](http://msdn.microsoft.com/en-us/default.aspx)，尤其要留意[C#](http://msdn.microsoft.com/en-us/vcsharp/default.aspx)和[.NET](http://msdn.microsoft.com/en-us/netframework/default.aspx)技术页面。很多博客，几乎所有关于即将发生和即将发生的事情的公告都放在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T23:10:13.517

[服务器端.net](http://www.theserverside.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T23:14:12.710

[来自 Microsoft](http://www.microsoft.com/events/webcasts/ondemand.mspx)的点播（以前录制的）网络广播通常非常好，但实际上要达到可以下载文件的地步是非常痛苦的点击次数，有时您会发现它不可用。

此外，有时您可以在本地找到一个偶尔会有演讲者/会议的 .NET 用户组。这些也是建立联系并了解您所在地区正在进行的工作类型的好方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-07T01:50:56.530

书，书，书！好书是按预期的主题编写的，涉及来自许多来源的输入，经过同行评审，结构良好，并且比贸易展览和大多数在线材料要深入几个数量级。当您购买一本书时，您会以非常合理的价格获得专家的经验。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-10-18T17:27:44.373

NDepend 文档附带[两本白皮书](http://www.ndepend.com/WhiteBooks.aspx)以及有关大型 .NET 应用程序架构的在线博客文章和文章：

*   [通过 .NET 程序集和 Visual Studio 项目对代码库进行分区](http://www.ndepend.com/Res/NDependWhiteBook_Assembly.pdf)（8 页）
*   [使用命名空间定义 .NET 组件](http://www.ndepend.com/Res/NDependWhiteBook_Namespace.pdf)（7 页）
*   [控制组件依赖以获得干净的架构](http://www.theserverside.net/tt/articles/showarticle.tss?id=ControllingDependencies)
*   [重构、重构和水平化成本](http://codebetter.com/blogs/patricksmacchia/archive/2009/02/15/re-factoring-re-structuring-and-the-cost-of-levelizing.aspx)
*   [进化设计和非循环组件化](http://codebetter.com/blogs/patricksmacchia/archive/2009/02/22/evolutionary-design-and-acyclic-componentization.aspx)
*   [分层、级别度量和方法论](http://codebetter.com/blogs/patricksmacchia/archive/2008/02/10/layering-the-level-metric-and-the-discourse-of-method.aspx)
*   [对抗虚构的复杂性](http://codebetter.com/blogs/patricksmacchia/archive/2009/06/28/fighting-fabricated-complexity.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-07T00:30:14.277

我从来没有去 PDC，但我确实喜欢看[视频](http://www.microsoftpdc.com/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T00:53:09.773

正如前一篇文章所提到的，MS PDC 视频在线。与 具有良好 MS Web 开发相关内容的[Mix相同。](http://videos.visitmix.com/)此外，对于一般的 MS 视频，有[Channel 9](http://channel9.msdn.com/)，它并不全是技术内容，但如果您正在寻找特别的东西，则值得搜索。

有人已经提到了博客，这里还有一些：

[Scott Hansleman](http://www.hanselman.com/blog/) - 上面有很多东西，很多 ASP、MVC 的东西。

[Phil Haack](http://haacked.com/) - 另一个优秀的 MVC 人。

[Rob Connery](http://blog.wekeroad.com/) - 再次大量关注 MVC。

[ScottGu](http://weblogs.asp.net/scottgu/) - 根据他的博客，他“为 Microsoft 构建了一些产品”，这肯定是今年的轻描淡写 - 除了 MS，他还负责 ASP、IIS、SIlverlight 等等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-07T01:18:16.843

查看[Sharp Architecture](http://code.google.com/p/sharp-architecture/)，它非常有前途。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-06T13:25:18.417

我收集了几个 RSS 提要，我经常使用这些提要来了解 .NET 和 Agile 的最新信息。如果你喜欢我可以和你分享这份清单。它包含这里已经提到的大部分内容。

# iphone - 为什么@contenteditable 在 iPhone 上不起作用？

> ID：723592
> 
> 赞同：13
> 
> 时间：2009-04-06T23:06:17.130
> 
> 标签：iphone, safari, contenteditable, mobile-safari

[Safari HTML 参考：支持的属性](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html)说：

> 内容可编辑
> 
> 如果为 true，则可以动态编辑元素；如果为假，则不能。
> 
> 可用性
> 
> 在 Safari 1.2 及更高版本中可用。适用于 iPhone OS 1.0 及更高版本。

但是，在我的 iPhone 上，我无法让它工作。有人在这方面取得成功吗？

您可以使用[此文档](http://dev.plutext.org/sandbox/StyleResolutionTest.html)进行尝试（诚然不是纯 html，但该文档适用于桌面 Safari、Chrome 和 Firefox 3）。我什至无法在移动 Safari 中编辑最简单的 html 文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-09-02T23:23:30.750

`contenteditable`根据 WWDC 2011 的开发者视频之一，已添加到 iOS 5 beta 2。我建议注册 Apple 的[Safari 开发者计划](http://developer.apple.com/safari)并从 WWDC 视频页面下载该视频。

如果您注册成为 Safari 开发人员，您还有权将您的网站提交到他们的在线 iOS Web 应用程序库。

**编辑：**我已经确认这适用于运行 iOS 5.0.1 的 iPad。在这里试试：[http ://www.quirksmode.org/dom/execCommand/](http://www.quirksmode.org/dom/execCommand/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-15T00:42:41.010

它有效，有点。我认为 contenteditable 以前在 iPhone 上不起作用。当我将 div 设置为 contenteditable 时，我无法将光标/指针移动到我想要移动的位置。但是，当我在 iPad 上的 iBooks.app 中使用 contentEditable 来摆弄 XHTML 时，我发现“execCommand('insertText', null, 'foobar');” 在 Mobile Safari 中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-18T06:02:00.763

如果您愿意，您可以使用巧妙的 css 和 javascript 制作一个虚拟键盘，并将其制作成一个小书签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-19T13:06:50.920

设计模式和内容可编辑在 IOS 5 中工作正常。但在以前的版本中它不起作用。有帖子

[http://mobile.tutsplus.com/tutorials/mobile-web-apps/safari-5_html5/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/safari-5_html5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-08T20:28:40.147

如果您无法关注 contenteditable 元素，请尝试将其添加到您的 css

```
[contenteditable] {
    -webkit-user-select: text;
    user-select: text;
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-06-29T18:39:13.943

我认为这是因为编辑 HTML 需要相当高级的用户界面。这就是为什么桌面版 Safari 实现了它，而移动版 Safari 没有。

# iphone - NSRunloops 和强制事件处理

> ID：723608
> 
> 赞同：2
> 
> 时间：2009-04-06T23:14:51.913
> 
> 标签：iphone, cocoa-touch

我的 iPhone 应用程序中有几个选项卡需要几秒钟才能加载（从本地 sqlite 数据库中提取大量数据）。当用户触摸选项卡时，它看起来好像应用程序完全没有做任何事情。我试图放置一个显示微调器的窗口，但是由于处理立即进行，因此它从未显示。

我知道我有几个不同的选项可以异步加载数据，但是我想对社区进行民意调查，看看是否存在强制另一个 NSRunloop 循环显示窗口的潜在问题。

这是我的代码的样子......

```
[[ActivityIndicator sharedActivityIndicator] show];
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]]; 
```

在 1 到 10 的范围内，您对这个 hack 的评价有多差？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T14:13:20.927

我不知道我会在哪里评价它，但我知道我不想那样做。乱用系统默认的 runloop 似乎是个坏主意。

有几个我认为是好的方法。最简单的是将额外的处理放在一个单独的私有方法中，然后这样做：

```
[[ActivityIndicator sharedActivityIndicator] show];
[self performSelector:@selector(processingMethod) withObject:nil afterDelay:0]; 
```

这将导致在您的指标显示后，在运行循环结束时调用 processingMethod。应该可以正常工作。

需要注意的是，如果您的指标是动画的，则取决于它的设置方式，它在 processingMethod 运行时可能不会动画。在这种情况下，您可能希望在后台线程中运行 processingMethod，这可能会更复杂一些，或者可能像这样做一样简单：

```
[self performSelectorInBackground:@selector(processingMethod) withObject:nil]; 
```

潜在的复杂情况是，在 processingMethod 结束时，当您要显示处理结果时，您可能必须将方法调用回主线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T20:24:50.893

我的经验是 iPhone 上的事件处理代码是不可重入的。因此，如果您在默认模式下运行 runloop，请为各种崩溃做好准备。我发现其他人也有问题：

1.  [http://lists.apple.com/archives/xcode-users/2009/Apr/msg00313.html](http://lists.apple.com/archives/xcode-users/2009/Apr/msg00313.html)
2.  [http://www.iphonedevsdk.com/forum/iphone-sdk-development-advanced-discussion/16246-trying-make-modal-dialog-using-nested-nsrunloop.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development-advanced-discussion/16246-trying-make-modal-dialog-using-nested-nsrunloop.html)

# refresh - TextMate：在 Firefox 中预览而无需先保存文档？

> ID：723615
> 
> 赞同：2
> 
> 时间：2009-04-06T23:17:05.263
> 
> 标签：refresh, command, textmate, pipe, preview

使用文本伴侣：

是否可以分配一个快捷方式来预览/刷新当前编辑的 HTML 文档，比如 Firefox，而不必先点击保存？

我正在寻找与 TextMate 的内置 Web 预览窗口相同的功能，但我更喜欢外部浏览器而不是 TextMate 的。（主要是为了使用 JavaScript 控制台，例如 Firebug）。

是否可以通过 shell 管道传输当前未保存的文档，然后在 Firefox 中预览。如果是这样，是否有人对此有 TextMate 命令，愿意分享它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T15:50:15.723

不是微不足道的。最简单的方法是将当前文件写入临时目录，然后启动该文件。但是，这会破坏任何相关链接（图像、脚本、CSS 文件）

添加捆绑包：

```
Input: Entire Document
Output: Discard
Scope Selector: source.html 
```

和脚本：

```
#!/usr/bin/env python2.5

import os
import sys
import random
import tempfile
import subprocess

fname = os.environ.get("TM_FILEPATH", "Untitled %s.html" % random.randint(100, 1000))
fcontent = sys.stdin.read()

fd, name = tempfile.mkstemp()
print name

open(name, "w+").write(fcontent)

print subprocess.Popen(["open", "-a", "Firefox", name]).communicate() 
```

正如我所说，这不适用于相关资源链接，这可能是一个大问题。另一个选择是从现有的“刷新浏览器”命令修改以下代码行：

```
osascript <<'APPLESCRIPT'
    tell app "Firefox" to Get URL "JavaScript:window.location.reload();" inside window 1
APPLESCRIPT 
```

它可以清除它，并使用一系列`document.write()`调用写入当前文档，而不是让 javascript 重新加载页面。这样做的问题是您不能保证当前文档是您要替换的文档。Windows 1 可能已更改为另一个站点等，尤其是在选项卡式浏览中。

最后，一个没有太大缺点的选项：使用版本控制，尤其是“分布式”版本控制之一，您不必将更改发送到远程服务器 - git、mercurial、darcs、bazaar 等（都有 TextMate 集成）

如果您的代码处于版本控制中，那么在预览之前是否保存也没关系，如果您破坏了某些内容并丢失了撤消缓冲区，您也可以随时返回到上次提交的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-13T19:21:28.927

这是您可以使用的东西，只需将“Safari”替换为“Firefox”： [http ://wiki.macromates.com/Main/Howtos#SafariPreview](http://wiki.macromates.com/Main/Howtos#SafariPreview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-19T04:14:55.200

打开捆绑编辑器（控制+选项+命令+ B）滚动到HTML捆绑并展开树选择“在运行浏览器中打开文档”分配激活密钥等效（快捷方式）关闭捆绑编辑器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T14:50:38.147

我不认为这是可能的。但是，您可以启用“原子保存”选项，这样每次您将选项卡切换到 Firefox 时，您的项目都会被保存。

如果您找到了正确的 Firefox 实时预览的解决方案，请告诉我们。

# sql - 在 sql server 上运行条件 DDL 语句

> ID：723634
> 
> 赞同：9
> 
> 时间：2009-04-06T23:28:56.497
> 
> 标签：sql, sql-server

我有一种情况，我想检查某个列（如版本号），然后应用一堆 ddl 更改

问题是我无法在 IF BEGIN END 块中执行此操作，因为 DDL 语句需要它们之间的 GO 分隔符，而 TSQL 不允许这样做。

我想知道是否有任何方法可以做到这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T04:34:06.047

您不需要使用完整的块。如果您不使用 BEGIN/END，条件语句将完整地执行下一条语句——包括单个 DDL 语句。这相当于 Pascal、C 等语言中**if**的行为。当然，这意味着您将不得不一遍又一遍地重新检查您的条件。这也意味着使用变量来控制脚本的行为几乎是不可能的。

*[编辑：CREATE PROCEDURE 在下面的示例中不起作用，因此我将其更改为其他内容并将 CREATE PROCEDURE 移到下面进行更广泛的讨论]*

```
If ((SELECT Version FROM table WHERE... ) <= 15)
CREATE TABLE dbo.MNP (
....
)
GO

If ((SELECT Version FROM table WHERE... ) <= 15)
ALTER TABLE dbo.T1
ALTER COLUMN Field1 AS CHAR(15)
GO

... 
```

或者类似的，取决于你的情况。

不幸的是，CREATE/ALTER PROCEDURE 和 CREATE/ALTER VIEW 有特殊要求，这使得它更难使用。它们几乎必须是语句中的唯一内容，因此您根本不能将它们与 IF 结合使用。

对于许多场景，当您想要“升级”您的对象时，您可以将其作为一个条件删除，然后是一个创建：

```
IF(EXISTS(SELECT * FROM sys.objects WHERE type='p' AND object_id = OBJECT_ID('dbo.abc')))
DROP PROCEDURE dbo.abc
GO

CREATE PROCEDURE dbo.abc
AS
    ...
GO 
```

如果您确实需要条件逻辑来决定要做什么，那么我所知道的唯一方法是使用 EXECUTE 将 DDL 语句作为字符串运行。

```
If ((SELECT Version FROM table WHERE... ) <= 15)
EXECUTE 'CREATE PROC dbo.abc 
AS
    ....
') 
```

但这是非常痛苦的。您必须转义程序正文中的任何引号，这真的很难阅读。

根据您需要应用的更改，您可以看到所有这些都可能很快变得非常难看。以上甚至不包括错误检查，这本身就是一种皇家痛苦。这就是为什么成群结队的工具制造商通过找出自动创建部署脚本的方法来谋生。

对不起; 没有适用于所有事情的简单“正确”方式。这只是 TSQL 支持得很差的东西。尽管如此，以上应该是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T03:50:21.267

多个“IF”语句？然后您可以测试后续 DDL 语句是否成功

动态SQL？EXEC（'ALTER TABLE foo WITH CHECK ADD CONSTRAINT ...'）？

如前所述，GO 是一个仅限客户端的批处理分隔符，用于将单个 SQL 文本块分解为提交给 SQL Server 的批处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T23:35:33.597

GO 被客户端工具识别，而不是被服务器识别。您可以在存储过程中创建 CREATE 或在没有 GO 的临时查询中使用。

# python - 如何发送带有损坏 FCS 的以太网帧？

> ID：723635
> 
> 赞同：9
> 
> 时间：2009-04-06T23:30:16.883
> 
> 标签：python, networking, automated-tests, ethernet

我不确定这是否可能，因为这可能在硬件中处理，但我需要发送一些带有错误的以太网帧。我希望能够创建 runts、jabber、misalignment 和 bad FCS 错误。我正在使用 Python。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-07T02:50:09.807

它*可以*在硬件中处理，但并非总是如此——即使是，您也可以将其关闭；请参阅[ethtool](http://linux.die.net/man/8/ethtool)卸载参数。

关于获得对您创建的帧的完全控制——查看[PF_PACKET](http://swoolley.org/man.cgi/7/packet)（对于一种方法）或[tap driver](http://vtun.sourceforge.net/tun/faq.html)（对于另一种方法）。

这是一篇关于[使用 PF_PACKET 从 Python 发送手工制作的帧](http://www.larsen-b.com/Article/206.html)的文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-06-17T08:02:35.137

首先，禁用以太网卡的校验和：

```
sudo ethtool -K eth1 tx off 
```

然后，您从 python 发送损坏的帧：

```
#!/usr/bin/env python

from socket import *

#
# Ethernet Frame:
# [
#   [ Destination address, 6 bytes ]
#   [ Source address, 6 bytes      ]
#   [ Ethertype, 2 bytes           ]
#   [ Payload, 40 to 1500 bytes    ]
#   [ 32 bit CRC chcksum, 4 bytes  ]
# ]
#

s = socket(AF_PACKET, SOCK_RAW)
s.bind(("eth1", 0))
src_addr = "\x01\x02\x03\x04\x05\x06"
dst_addr = "\x01\x02\x03\x04\x05\x06"
payload = ("["*30)+"PAYLOAD"+("]"*30)
checksum = "\x00\x00\x00\x00"
ethertype = "\x08\x01"
s.send(dst_addr+src_addr+ethertype+payload+checksum) 
```

看到[一个类似的问题](https://stackoverflow.com/questions/6329583/how-to-reliably-generate-ethernet-frame-errors-in-software)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-12-02T13:15:42.377

尝试使用 scapy for python，有一些例子可以生成巨型帧，还有一个矮帧。[http://www.dirk-loss.de/scapy-doc/usage.html](http://www.dirk-loss.de/scapy-doc/usage.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-18T20:55:09.790

该程序没有按预期工作以生成 FCS 错误。

网络驱动程序再次在生成帧的末尾添加了正确的校验和。当然，该解决方案很可能适用于某些卡，但我敢肯定英特尔的任何卡都不会。（对我来说，它也可以在没有任何 ethtool 更改的情况下工作。）

至少有一个 Intel e1000e 网卡，你需要对上面的代码做一个小的改动：在“s = socket(AF_PACKET, SOCK_RAW)”之后添加以下行：

```
s.setsockopt(SOL_SOCKET,43,1) 
```

这告诉 NIC 驱动程序使用 socket.h 中定义的“SO_NOFCS”选项并在不计算和添加 FCS 的情况下发送帧。

您可能还对以下 C 程序感兴趣，它确实向我展示了如何做到这一点：http: [//markmail.org/thread/eoquixklsjgvvaom](http://markmail.org/thread/eoquixklsjgvvaom)

但请注意，如果不进行小的更改，该程序将无法在最近的内核上运行。SOL_SOCKET 似乎在过去某个时间将数字 ID 从 42 更改为 43。

根据原作者的说法，该功能至少应适用于以下驱动程序：e100、e1000 和 e1000e。3.16.0 内核源代码中的快速 grep 表明 ixgbe igb 和 i40e 也应该可以工作。如果您不使用这些卡中的任何一个，则此插槽选项可​​能不可用。

# django - 来自models.CommaSeparatedIntegerField 的forms.SelectMultiple

> ID：723639
> 
> 赞同：0
> 
> 时间：2009-04-06T23:32:59.827
> 
> 标签：django, django-models, django-forms

我有一个带有字段的模型：

```
class Movie(models.Model):
    genre = models.CommaSeparatedIntegerField(max_length=100, choices=GENRE_CHOICES, blank=True, default=0)
    lang = models.CommaSeparatedIntegerField(max_length=100, choices=LANG_CHOICES, blank=True, default=0) 
```

我需要从中获取多个选择字段（不是复选框）。

我发现的一种方法是从 ModelAdmin 重新定义表单

```
class MyMovieAdminForm(forms.ModelForm):
    genre = forms.MultipleChoiceField(choices=GENRE_CHOICES)
    lang = forms.MultipleChoiceField(choices=LANG_CHOICES)

class MovieAdmin(admin.ModelAdmin):
    form = MyMovieAdminForm

admin.site.register(Movie, MovieAdmin) 
```

但是它需要为每个字段重新声明“标签”和“初始”，这不利于 DRY 原则。而且我不明白，如何为每个字段的初始值设置对象的当前值？

而我在手册中发现的其他方式是[formfield-overrides](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#formfield-overrides)。我使用主干中的开发版本，并尝试使用此代码，但它没有将我的选择字段更改为管理界面中的多选：

```
class MovieAdmin(admin.ModelAdmin):
    formfield_overrides = {
        models.CommaSeparatedIntegerField: {'widget': forms.SelectMultiple},
    } 
```

可能有人知道，定义多个选择字段的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:51:00.987

我没有找到任何将models.CommaSeparatedIntegerField 制作为forms.SelectMultiple 的有效答案。所以我将 models.CommaSeparatedIntegerField 更改为 models.ManyToManyField 并且表单字段变得非常好用！它更适合您需要对该字段进行查询的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-20T08:16:08.837

1）从模型中的models.CommaSeparatedIntegerField中删除选择

2) 创建 CommaSeparatedCharField 作为替换

```
class CommaSeparatedCharField(forms.CharField):
    def to_python(self, value):
        if value in validators.EMPTY_VALUES:
            return u''
        csv = smart_unicode(','.join(value) )
        return csv   

class CommaSeparatedSelectMultiple(forms.SelectMultiple):
    def render(self, *args, **kwargs):
        print args, kwargs
        args_=list(args)
        if type(args_[1])!=list:
            args_[1] = args_[1].split(',')
        return super(CommaSeparatedSelectMultiple, self).render(*args_, **kwargs) 
```

3) 申请

```
class MyAdmin(admin.ModelAdmin):
    class form(forms.ModelForm):
        def __init__(self, *args, **kwargs):
            super(forms.ModelForm, self).__init__(*args, **kwargs)
            for field_name, choices in [
                ('minutes', [(i,str(i)) for i in range(60)]),
            ]:
                self.fields[field_name] = CommaSeparatedCharField(
                    label=self.fields[field_name].label,
                    initial=self.fields[field_name].initial,
                    widget=forms.CommaSeparatedSelectMultiple(choices=choices)
                ) 
```

在 1.2 主干上工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T13:42:13.403

我将以下内容用于有点 DRYer 的表单操作，它适用于 1.0。它很冗长，但它有效。

```
class MyMovieAdminForm(forms.ModelForm):
    ## Meta, etc

    def __init__(self, *args, **kwargs):
        super(MyMovieAdminForm, self).__init__(*args, **kwargs)
        self.fields["genre"].widget = forms.SelectMultiple(choices=foo)
        self.fields["genre"].initial = self.instance.genre
        # Doesn't require redefining label, etc. 
```

# asp.net-mvc - 我可以在 ASPnet mvc 中嵌套用户控件吗？

> ID：723644
> 
> 赞同：1
> 
> 时间：2009-04-06T23:35:22.707
> 
> 标签：asp.net-mvc, user-controls

我该怎么办？

编辑：用户控制中的用户控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T23:37:38.863

使用嵌套调用[`Html.RenderPartial`](http://bradwilson.typepad.com/blog/2008/08/partial-renderi.html).

即在您的 page1.aspx 视图中有 Html.RenderPartial 以呈现您的 usercontrol1.ascx 视图

包含另一个 Html.RenderPartial 调用以呈现 usercontrol2.ascx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T23:40:08.500

您想查找部分视图

这是一个让您入门的链接[http://bradwilson.typepad.com/blog/2008/08/partial-renderi.html](http://bradwilson.typepad.com/blog/2008/08/partial-renderi.html)

# python - Dreamweaver 的 Python/Django 插件

> ID：723652
> 
> 赞同：6
> 
> 时间：2009-04-06T23:38:22.403
> 
> 标签：python, django, dreamweaver

Dreamweaver 中是否存在用于 Python/Django 的插件？只是想知道 Dreamweaver 是一个很棒的 Web 开发工具。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T23:54:16.530

我记得我也在寻找一个插件，但是遇到了[这个](http://www.djangobook.com/en/beta/chapter04/)绊脚石：

> **假定设计人员对 HTML 代码感到满意**。模板系统的设计不是为了使模板必须在 Dreamweaver 等所见即所得编辑器中很好地显示。这是一个太严重的限制，并且不允许语法像现在这样好。Django 希望模板作者能够轻松地直接编辑 HTML。

话虽如此，我在快速浏览的同时找到了一个[Dreamweaver 扩展](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1557518)，所以试一试，让我们知道它是如何进行的！根据经验，Paolo 提供的 Eclipse 解决方案运行良好，[Komodo](http://www.activestate.com/komodo/) [插件](http://code.google.com/p/django-komodo-kit/wiki/ActiveState)看起来也很棒。我知道您正在寻找图形编辑器，但是[emacs](http://code.djangoproject.com/wiki/Emacs)做得非常好；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T23:41:55.703

据我所知，那里没有特定于 Django 的 IDE 插件。

但是我使用[Eclipse](http://www.eclipse.org/)和[PyDev](http://pydev.sourceforge.net/)来满足我的 Django/Python 需求，它非常好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T23:49:06.340

[从某个名叫 Beshr Kayali 的人那里找到了一个](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1557518)，但我自己无法尝试，因为我没有 Dreamweaver。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-28T23:58:14.107

Beshir Kayali 的插件无法安装 DW CS5 和 Extension Manager CS4。具有讽刺意味的是，它要求 DW CS4 或更好，否则将扩展管理器“升级”到 CS3。

我可以付出一些努力来完成这项工作，但这是对扩展的唯一评论：

> 我允许你插入6种模板标签；if、for、模板变量、块、注释和标签。您按下一个按钮，然后会出现一个对话框，要求您提供一些信息，其中可能包含一些选项。据我所知，它实际上并没有做太多，绝对可以跳过。

# configuration - 存储加密密钥——最佳实践？

> ID：723653
> 
> 赞同：64
> 
> 时间：2009-04-06T23:38:45.197
> 
> 标签：configuration, encryption

我有一个使用对称加密算法的 Web 应用程序。

您将如何存储密钥和初始化向量？在代码中存储为文字似乎是个坏主意。应用程序设置如何？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-07T14:37:17.627

webapp 世界中的一种标准方法是拆分密钥并将其放在不同的位置。例如，您可以拆分密钥并将其一部分放在文件系统中（“webapps”目录之外），一部分放在 JNDI 配置中（或 .net 等效项），另一部分放在数据库中。如果您受到威胁，例如检查备份媒体或 SQL 注入，获取任何单个部分并不是特别困难，但要获取所有部分将需要更多的工作。

您可以通过使用相同大小的随机数对密钥进行异或来拆分密钥。（使用加密强的随机数生成器！）如果要将密钥拆分为多个部分，可以重复此过程多次。在您想要的过程结束时，例如，三个部分键，使得 p1 ^ p2 ^ p3 = key. 您可能需要对某些部分键进行base64 编码，以便它们可以正确存储，例如，在JNDI 属性中。

（有更复杂的方法来拆分密钥，例如，n-of-m 算法，您不需要所有部分来重新创建密钥，但这远远超出了您在这里所需要的。）

如果您可以要求用户主动输入密码，则有 PBE（基于密码的加密）算法可以将密码转换为良好的对称密钥。您还想找到一个需要外部文件的文件。同样，磁带备份或密码本身还不够，您需要两者。您还可以使用它通过 JNDI 将密码分成两部分 - 您可以在 JNDI 中使用纯文本密码短语，并在文件系统中的某处使用初始化文件。

最后，无论您做什么，都可以确保您可以相当轻松地“重新加密”您的应用程序。一种方法是使用上面获得的密码来解密另一个包含实际加密密钥的文件。如果您认为密码已被泄露，则可以轻松更改密码，而无需对所有数据进行大量重新加密 - 只需重新加密您的实际密钥即可。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-06T23:47:53.893

是否可以在应用程序启动时以交互方式输入密码？这样您就不必存储密钥，或者至少任何密钥（无论是对称密钥还是私钥）都可以使用此“引导”密码进行加密。

如果没有，请将您的密钥单独存储在一个文件中，并修改其权限以使其只有运行 Web 应用程序的用户可以访问。

这些方法与平台无关。有关更具体的建议，有关您的平台的信息会有所帮助。

顺便说一句，初始化向量应该只用于一条消息。而且 IV 没有保密，因此您可以将其存储在任何地方，但习惯上将其与使用它的一条消息一起存储。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-07T00:34:48.087

我使用了一种方法，我的应用程序在启动时需要对称密钥并在某个文件中查找它。应用程序启动后，我将删除该文件。远程保存该文件的副本以供任何需要的重新启动使用。显然，如果您的应用程序经常重启，这种方法是不可行的。

另一种选择是证书管理器，例如 Windows 证书存储。它可以安全地存储证书及其密钥，还可以将私钥标记为不可导出，因此需要一些严重的黑客攻击才能将密钥取出。您的应用程序可以从证书存储加载其证书，并能够调用操作来签署请求或生成新的对称密钥。此外，您可以为不同的证书存储分配权限，以便只有某些特权帐户才能访问证书。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T23:45:57.813

将其粘贴在 web.config 中并[加密该部分](http://odetocode.com/Blogs/scott/archive/2006/01/08/2707.aspx)

[这个 SO question](https://stackoverflow.com/questions/682698/encrypting-web-config-using-protected-configuration-pointless)更多地讨论了 web.config 加密

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T23:48:13.177

这应该有助于...

[http://msdn.microsoft.com/en-us/library/ms998280.aspx](http://msdn.microsoft.com/en-us/library/ms998280.aspx)

但是，如果您认真考虑保护您的数据，您真的应该考虑使用 PKI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-26T17:31:26.303

我们有一个略有不同但相关的问题。我们每隔几天就会生成一次密钥，在解密时，我们必须尝试所有的密钥，因为我们不知道加密发生在哪一天。我们所做的是再次加密密钥并将它们存储为秘密。这样，我们只需管理一组密钥。

# wpf - WPF：为什么 DataContextChanged 没有在逻辑孩子上提出？

> ID：723655
> 
> 赞同：3
> 
> 时间：2009-04-06T23:40:39.107
> 
> 标签：wpf, datacontext, logical-tree

我的自定义面板控件的逻辑子级没有引发**DataContextChanged**的​​问题。我把它缩小到这个：

从向导生成的 WPF 应用程序开始，我添加：

```
 private void Window_Loaded( object sender, RoutedEventArgs e )
    {
        var elt = new FrameworkElement();
        this.AddLogicalChild( elt );
        DataContext = 42;
        Debug.Assert( (int)elt.DataContext == 42 );
    } 
```

据我了解，这是有效的，因为**DataContext**是一个[可继承的依赖属性](http://msdn.microsoft.com/en-us/library/ms753197.aspx)。

现在，我在 Window (this) 及其逻辑子项上为**DataContextChanged**添加事件处理程序：

```
 this.DataContextChanged += 
        delegate { Debug.WriteLine( "this:DataContextChanged" ); };
    elt.DataContextChanged += 
        delegate { Debug.WriteLine( "elt:DataContextChanged" ); }; 
```

如果我运行它，*只会执行第一个事件处理程序*。**为什么是这样？**如果不是 AddLogicalChild( elt ) 我执行以下操作：

```
this.Content = elt; 
```

两个处理程序都将执行。但在我的情况下，这不是一个选项 - 我将 FrameworkContentElements 添加到我的控件中，这些控件不应该是可视子项。

这里发生了什么？除了 AddLogicalChild() 之外，我还应该做更多的事情来使它工作吗？

（幸运的是，有一个相当简单的解决方法——只需将元素的 DataContext 绑定到窗口的 DataContext 即可）

```
BindingOperations.SetBinding( elt, FrameworkElement.DataContextProperty, 
            new Binding( "DataContext" ) { Source = this } ); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T08:23:38.583

您还需要覆盖该`LogicalChildren`属性：

```
protected override System.Collections.IEnumerator LogicalChildren
{
    get { yield return elt; }
} 
```

当然，您也希望返回由基本实现定义的任何逻辑子代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-20T07:45:45.043

如果有人遇到类似问题，我想为 Kent 的回答添加一些建议：

如果您创建具有多个内容对象的自定义控件，您应该确保：

*   内容对象通过 AddLogicalChild() 添加到 LogicalTree
*   创建您自己的 Enumerator 类并在覆盖的 LogicalChildren 属性中返回该类的实例

如果您不将内容对象添加到逻辑树，您可能会遇到诸如无法解析与 ElementNames 的绑定之类的问题（ElementName 由 FindName 解析，而 FindName 又使用 LogicalTree 来查找元素）。

更危险的是，我的经验是，如果您错过将对象添加到逻辑树中，则 ElementName 解析在某些情况下有效，而在其他情况下则无效。

如果您不覆盖 LogicalChildren，则不会像上面描述的那样更新 DataContext。

这里有一个简单的 SplitContainer 的简短示例：

拆分容器：

```
 public class SplitContainer : Control
{
    static SplitContainer()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(SplitContainer), new FrameworkPropertyMetadata(typeof(SplitContainer)));
    }

    /// <summary>
    /// Identifies the <see cref="Child1"/> property.
    /// </summary>
    public static readonly DependencyProperty Child1Property =
        DependencyProperty.Register(nameof(Child1), typeof(object), typeof(SplitContainer), new FrameworkPropertyMetadata(Child1PropertyChangedCallback));

    /// <summary>
    /// Left Container
    /// </summary>
    public object Child1
    {
        get { return (object)GetValue(Child1Property); }
        set { SetValue(Child1Property, value); }
    }

    /// <summary>
    /// Identifies the <see cref="Child2"/> property.
    /// </summary>
    public static readonly DependencyProperty Child2Property =
        DependencyProperty.Register(nameof(Child2), typeof(object), typeof(SplitContainer), new FrameworkPropertyMetadata(Child2PropertyChangedCallback));

    /// <summary>
    /// Right Container
    /// </summary>
    public object Child2
    {
        get { return (object)GetValue(Child2Property); }
        set { SetValue(Child2Property, value); }
    }

    private static void Child1PropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var splitContainer = (SplitContainer)d;

        if (e.OldValue != null)
        {
            splitContainer.RemoveLogicalChild(e.OldValue);
        }
        if (e.NewValue != null)
        {
            splitContainer.AddLogicalChild(((object)e.NewValue));
        }
    }

    private static void Child2PropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var splitContainer = (SplitContainer)d;

        if (e.OldValue != null)
        {
            splitContainer.RemoveLogicalChild(e.OldValue);
        }
        if (e.NewValue != null)
        {
            splitContainer.AddLogicalChild(((object)e.NewValue));
        }
    }

    protected override IEnumerator LogicalChildren
    {
        get
        {
            return new SplitContainerLogicalChildrenEnumerator(this);
        }
    }
} 
```

SplitContainerLogicalChildrenEnumerator：

```
 internal class SplitContainerLogicalChildrenEnumerator : IEnumerator
{
    private readonly SplitContainer splitContainer;
    private int index = -1;

    public SplitContainerLogicalChildrenEnumerator(SplitContainer splitContainer)
    {
        this.splitContainer = splitContainer;
    }

    public object Current
    {
        get
        {
            if (index == 0)
            {
                return splitContainer.Child1;
            }
            else if (index == 1)
            {
                return splitContainer.Child2;
            }
            throw new InvalidOperationException("No child for this index available");
        }
    }

    public bool MoveNext()
    {
        index++;
        return index < 2;
    }

    public void Reset()
    {
        index = -1;
    }
} 
```

样式（例如在 Themes/generic.xaml 中）：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:scm="clr-namespace:System.ComponentModel;assembly=PresentationFramework"
                xmlns:sys="clr-namespace:System;assembly=mscorlib"
                xmlns:local="clr-namespace:SplitContainerElementNameProblem">
<Style TargetType="{x:Type local:SplitContainer}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:SplitContainer}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <ContentPresenter Grid.Column="0"
                                      Content="{TemplateBinding Child1}" />
                    <ContentPresenter Grid.Column="1"
                                      Content="{TemplateBinding Child2}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

演示每个绑定都可以正常工作的示例：

XAML：

```
<Window x:Class="SplitContainerElementNameProblem.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:SplitContainerElementNameProblem"
    mc:Ignorable="d"
    Title="MainWindow" Height="450" Width="800">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid Grid.Row="0">
        <TextBox x:Name="text1" Text="abc" />
    </Grid>
    <local:SplitContainer Grid.Row="1">
        <local:SplitContainer.Child1>
            <TextBox x:Name="text2"
                     Text="{Binding ElementName=text1, Path=Text}" />
        </local:SplitContainer.Child1>
        <local:SplitContainer.Child2>
            <StackPanel>
                <TextBox x:Name="text3"
                         Text="{Binding ElementName=text2, Path=Text}" />
                <TextBox x:Name="text4"
                         Text="{Binding MyName}" />
            </StackPanel>
        </local:SplitContainer.Child2>
    </local:SplitContainer>
</Grid> 
```

XAML.cs

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        DataContext = this;

        MyName = "Bruno";
    }

    public string MyName
    {
        get;
        set;
    }
} 
```

# windows - 将 linux 应用程序移植到 windows 的建议

> ID：723659
> 
> 赞同：1
> 
> 时间：2009-04-06T23:42:32.207
> 
> 标签：windows, linux, cygwin

我想将在linux下编写的应用程序移植到windows。目前我正在使用 Cygwin，但我很好奇是否有任何其他选项不会强迫我发布我的源代码，因为我现在无法这样做。除了必须完全重新编写它或购买许可证之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T23:53:41.367

[MinGW](http://www.mingw.org/)没有 Cygwin 那么多的许可限制，但它可能需要更多的努力才能让您的代码在其下运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T01:34:48.567

请向我们提供有关您的申请的更多信息。简单的命令行实用程序？使用 KDE 库？使用 linux 内核扩展？等等等等。仅供内部使用？用于企业桌面？供最终用户使用？这些都会改变我们的建议。

我还建议使用 MinGW。

移植的基本流程：

1.  安装 MinGW 和 MSYS
2.  运行你的 Makefile。
3.  您可能会收到错误，修复它（通过更改代码或将其注释掉）
4.  通过 Makefile 重新编译。
5.  重复 2-4 直到编译没有错误。
6.  然后测试您的应用程序，并跟踪您可能引入的任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T23:59:06.473

我绝不是专家。话虽如此，如果你不打算发布你的应用程序，我相信你可以在内部将它与 GPL 的东西一起使用。只有当您开始分发二进制文件时，您才受 GPL 约束，必须随二进制文件或用户请求发布您的源代码。 *例如*，公司可以修改一些 GPL 的源代码，并在内部使用它，只要他们不将代码或应用程序分发到公司之外。

所以这取决于你打算用你的应用程序做什么。

您现在也许可以使用 cygwin 只是为了让它达到一个工作点，然后逐渐用本机 Windows 代码替换应用程序的各个部分，直到您完全取消了 cygwin 的使用。

我知道这可能不是你想要的形式，但我想我会把它扔在那里。这些天，他们应该有几个法律/许可课程被推入 CS 学位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-18T15:46:55.450

Cygwin 也有商业许可证。

[http://www.redhat.com/services/custom/cygwin/](http://www.redhat.com/services/custom/cygwin/)

# c# - 注释提供者链的最佳方法

> ID：723665
> 
> 赞同：0
> 
> 时间：2009-04-06T23:46:10.577
> 
> 标签：c#, .net, provider

媒体浏览器有一个提供者模型，这基本上是一个类链，每个实体按特定顺序调用。

例如，我们有：

```
 providers = new List<IMetadataProvider>();
        providers.Add(new ImageFromMediaLocationProvider());
        providers.Add(new ImageByNameProvider());
        providers.Add(new MovieProviderFromXml());
        providers.Add(new MovieDbProvider());
        providers.Add(new TVProviderFromXmlFiles());
        providers.Add(new TvDbProvider());
        providers.Add(new VirtualFolderProvider());
        providers.Add(new FrameGrabProvider());
        providers.Add(new MediaInfoProvider()); 
```

列表中提供程序的顺序是**显着**的，较高顺序的提供程序优先于较低顺序的提供程序。

最近，我试图使这部分可扩展。因此，第三方 DLL 可以定义自己的提供程序，这些提供程序将被注入我们的链中。

问题是，一旦您允许第 3 方将自己注入链中，您就失去了定义此顺序的中心位置。

我目前有点不舒服的解决方案是为每个提供者定义一个可选的优先级属性，然后按优先级排序。

例如，我现在有：

```
[ProviderPriority(20)]
class ImageByNameProvider{} 
```

这允许第 3 方定义他们在链中的位置。

我想到的另一个解决方案是在属性之前和之后，例如。

```
[Before(typeof(ImageByNameProvider))]
class ImageFromMediaLocationProvider {} 
```

但是，我不确定这是否更容易或更难编程。

这个问题还有其他解决方案吗？你会选择哪种解决方案？

也许，我应该只保留核心提供商的列表并为第三方提供商添加之前/之后的属性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T02:07:34.323

似乎这里实际上应该解决一些不同的问题。基本问题是试图提出一种机制，允许将任意对象插入到现有列表中的某个位置。

您没有描述 IMetadataProvider 接口的实际外观，但它应该有某种方式来唯一标识提供程序（最好的选择是使用 Guid）。使用类名的好处是它允许您在重构等期间根据需要重命名类，而不会影响自定义（第 3 方）提供程序，只要您保持 Guid 相同。

而不是使用一个简单的列表，您可能应该派生自己的列表：

```
class ProviderList : List<IMetadataProvider { } 
```

这为自定义（第 3 方）提供商提供了一种从该列表安装/卸载自身的方式。这些机制需要足够聪明，知道如何将新提供者插入到链的中间，但也需要足够聪明，知道如何处理已插入的多个自定义提供者。同样，删除过程也需要聪明，以处理类似的问题，并确保有人不会试图删除您的“核心”提供商之一。

这里的一个好方法可能是将要插入的提供程序的 Guid 作为参数传递给 Install() 方法。Remove() 方法同样会采用要删除的提供者的 Guid。

例如，假设我在 MovieProviderFromXml 之后插入了一个新的提供程序。然后另一个第 3 方也在 MovieProviderFromXml 之后安装了一个新的提供程序。新的链序应该是什么？第二个提供程序总是在 MovieProviderFromXml 之后立即插入，还是从那里开始然后跳过任何自定义提供程序并在安装最后一个自定义提供程序之后插入（所以就在下一个“核心”提供程序之前？

与该问题相关的是您需要有某种方法来区分“核心”提供者和自定义提供者的想法。

最后，您需要确保有一种方法可以处理链中的故障，尤其是当自定义提供程序插入错误的位置时。

您确实希望始终维护默认链的基本（“主”）列表。当在该链的中间安装一个新的提供者时，应该创建一个新的链，但您不想松开基本链。这使您能够将链重置为默认状态。

基于优先级的链接是有问题的，因为您必须确定如何处理优先级冲突。至于 Before/After 属性集，您是否允许在同一个提供者上使用两者？可能不是，因此创建一个具有 ChainInsert 枚举属性的 ProviderChainAttribute 可能更有意义，其中 ChainInsert 将 Before 和 After 定义为枚举值。这允许您强制自定义提供程序决定它是在指定提供程序之前**还是之后安装。**我仍然会使用 Guid 而不是类型。

希望这能给你一些关于如何解决这个问题的其他想法。

# database - 防止添加主键已存在于 mnesia 中的记录的最佳方法是什么？

> ID：723680
> 
> 赞同：3
> 
> 时间：2009-04-06T23:52:32.230
> 
> 标签：database, erlang, mnesia

假设我有一个简单的记录定义：

```
-record(data, {primary_key = '_', more_stuff = '_'}). 
```

我想要一个简单的函数，将这些记录之一添加到 mnesia 数据库中。但是如果已经有一个具有相同主键的条目，我希望它失败。

（在下面的例子中，假设我已经定义了

```
db_get_data(Key)->
    Q = qlc:q([Datum
               || Datum = #data{primary_key = RecordKey}
                      <- mnesia:table(data),
                  RecordKey =:= Key]),
    qlc:e(Q). 
```

)

以下作品，但让我觉得有点丑陋......

```
add_data(D) when is_record(D, data)->
    {atomic, Result} = mnesia:transaction(fun()->
                                                  case db_get_data(D#data.primary_key) of
                                                      [] -> db_add_data(D);
                                                      _ -> {error, bzzt_duplicate_primary_key}
                                                  end
                                          end),

    case Result of
        {error, _} = Error -> throw(Error);
        _ -> result
    end. 
```

这也有效，但也很丑陋：

```
add_data(D) when is_record(D, data)->
    {atomic, Result} = mnesia:transaction(fun()->
                                                  case db_get_data(D#data.primary_key) of
                                                      [] -> db_add_data(D);
                                                      _ -> throw({error, bzzt_duplicate_primary_key})
                                                  end
                                          end). 
```

它与上面的不同之处在于上面的 throws

```
{error, bzzt_duplicate_primary_key}, 
```

而这个抛出

```
{error, {badmatch, {aborted, {throw,{error, bzzt_duplicate_primary_key}}}}} 
```

那么：是否有一些约定来指示这种错误？或者有没有一种内置的方法可以让 mnesia 为我抛出这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T06:18:52.970

我认为它们都很好，如果你只是让你的代码更漂亮，比如：

```
add_data(D) when is_record(D, data)->

    Fun = fun() ->
                  case db_get_data(D#data.primary_key) of
                      [] -> db_add_data(D);
                      _  -> throw({error, bzzt_duplicate_primary_key})
                  end
          end,

    {atomic, Result} = mnesia:activity(transaction, Fun). 
```

或者

```
add_data(D) when is_record(D, data)->

    Fun = fun() ->
                  case db_get_data(D#data.primary_key) of
                      [] -> db_add_data(D);
                      _  -> {error, bzzt_duplicate_primary_key}
                  end
          end,

    {atomic, Result} = mnesia:activity(transaction, Fun),

    case Result of
        {error, Error} -> throw(Error);
        _              -> result
    end. 
```

你抛出错误还是返回错误？我自己会返回一个错误。我们将代码拆分为 mnesia 工作单元——一个具有一组函数的模块，这些函数执行不在事务中的基本 mnesia 活动，以及一个 api 模块，它将工作单元“组合”成 mnesia 事务，其功能看起来与上面的非常相似.

# java - 自定义 JVM 中的 RMI/异常处理

> ID：723685
> 
> 赞同：0
> 
> 时间：2009-04-06T23:55:08.493
> 
> 标签：java, exception-handling, rmi

我知道自定义 JVM 的行为可能会有所不同，我正在尝试查看我观察到的行为是否与真正的 JVM 相同。此外，我正在寻找某种方法来始终如一地使这些东西发挥作用。

我见过的最糟糕的部分是异常被 JVM 完全吃掉了。例如：

```
public myMethod(String test) extends Remote {
    if(test.equals("Hey"))
        doSomething()
} 
```

我在我的代码中看到了两个响应，即为“测试”传入 null。一是它记录“NullPointerException”。没有别的，就是那根弦。

另一个是它什么都不记录。代码执行只是停止，并且在运行此代码之后什么都没有（即使调用方法周围有一个 try/catch）

此外，在异常之后，调用线程似乎永远不会继续（使这样的错误非常难以追踪）。

如果我围绕这个方法抛出一个 try/catch 并记录错误，它工作正常。

诚然，我正在使用自定义代码开发一个较旧的 JVM，所以我不希望有太多帮助，但是有没有人看到过这样的行为？也许在旧的 JVM 中？它应该通过网络抛出异常，还是应该在远程系统上打印堆栈跟踪？

将异常包装在 RemoteException 中并重新抛出它是一个合理的解决方案吗？

有什么建议么？（除了规范一个新的 JVM——这远远超出了可能的范围，甚至都不好笑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-06-18T18:51:10.443

这最终成为可重现的行为。抛出的异常没有在我无权访问的中间层被捕获/重新抛出——调用我的代码的线程正在吞噬异常。

这根本不是虚拟机问题。

只要把它放进去，我就可以接受它的答案。

# c# - 3 层架构中的错误处理

> ID：723690
> 
> 赞同：6
> 
> 时间：2009-04-06T23:56:25.027
> 
> 标签：c#, error-handling, n-tier-architecture

如何优雅地实现错误处理？例如，我的数据访问层可能会引发 2 种类型的错误：1) 未经授权的访问，在这种情况下，页面应该隐藏所有内容并仅显示错误消息 2) 通知用户此类内容已存在于数据库（例如，名称不是唯一的），在这种情况下，我不想隐藏所有内容。

编辑：

由于这里的一些评论，我设计我应该创建派生的专门异常类型，例如 NotAuthorizedException、DuplicateException 等......这一切都很好，但我可能会看到 2 个问题：

1）每个存储过程都有一个返回字段 p_error ，其中包含错误消息。从 DB 获取数据后，我需要检查该字段以查看返回的错误类型，以便引发适当的异常。所以，我仍然需要将我的错误类型/错误消息存储在某个地方......换句话说，我应该如何向用户提供确切的消息（在某​​些时候我需要）而不先检查 p_error 字段。这让我回到了错误对象。任何人？

2）我可能会变成一场噩梦，其中异常的数量等于错误消息类型的数量。

我在这里错过了什么吗？

非常感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T23:59:50.417

您应该查看[Enterprise Library](http://msdn.microsoft.com/en-us/library/dd203099.aspx)中的异常处理块。许多关于包装异常和在层之间传递它们的好技巧和代码软件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T00:06:10.730

您的业​​务层在哪里，为什么不检查授权和完整性？DAL 的级别太低，无法检查这些规则——如果你在那里遇到问题，几乎是时候抛出异常了。您的业​​务层或控制器可以捕获该异常，并显示合理的消息 - 但这不是您应该经常做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:36:26.803

> 我正在考虑使用的一个选项是创建一个错误类，但是我需要将它从 UI 传递到业务层，然后通过引用传递到数据访问层

我不确定我是否理解这一点。您不必在每一层都传递错误对象。例如，在您的一个示例中，`errors that inform the user that something like this already exists in the database (say name not unique - for example)`框架可能会引发 sql 异常，您只需要在业务层或 UI 层捕获特定异常即可。

其他人建议的企业库的异常处理块将允许您在 web.config 文件中定义一些基于策略的异常处理。如果您想开发一些企业应用程序，这可能是个好地方。但是对于简单的应用程序，您可能不需要走那么远。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T02:21:09.173

上层发生的事情不取决于您的数据访问层。它甚至不应该知道上层将要做什么。如果你有重复键错误，那么它应该抛出类似“DuplicateKeyException”的东西。如果您遇到授权错误（我认为您的意思是“异常”），那么不要对它做任何事情 - 让它冒泡回到 UI 层，它可以显示适当的错误页面。

请记住，错误状态值等是我们发明异常的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T03:51:24.497

正如许多人指出的那样，企业库异常处理块是炸弹。使用策略，您可以执行诸如记录异常、将其包装在不同的异常中、抛出新异常而不是原始异常等事情。此外，如果您希望根据身份验证错误或重复记录错误等执行特定操作，您始终可以创建特定的派生异常类并捕获那些排除自上而下传递任何对象的需要的异常类型。异常应该总是向上冒泡而不是向下冒泡。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-05T02:19:37.513

创建您自己的异常层。

DALExceptionManager DuplicateException 数据库异常

BLLExceptionManager NotAuthorizedException InvalidDateException

在您的表示层中，添加此引用并创建一个通用异常处理程序。这样你就知道如何处理异常消息了。

# asp.net-mvc - ASP.NET MVC 加 Silverlight

> ID：723695
> 
> 赞同：2
> 
> 时间：2009-04-07T00:01:11.507
> 
> 标签：asp.net-mvc, silverlight

在我看来，对于具有深度和广度能力的结构化开发，ASP.NET MVC 和 Silverlight 有潜力打造一个具有卓越 UI 粒度和减少 AJAX 暴露的功能强大的框架。你们有没有人尝试过考虑未来的耐用性来构建这样的堆栈？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T08:39:08.453

ASP.NET MVC**和**Silverlight？

在某些方面，这是一个非此即彼的选择——您的数据要么显示在 ASP.NET 生成的 html/css/js 中，要么显示在 Silverlight 中。为什么要混合它们？我确信 ASP.NET MVC 是提供 Silverlight 的好方法，但这并不一定使它成为同一个 UI 的一部分。

它通常是关于覆盖率与丰富度的。没有 Silverlight 或 Flash 的 Web UI 可以吸引更多用户，但使用 Silverlight 的 Web UI 可以拥有更丰富的 UI。Silverlight 编写代码很有趣，我已经看到一些使用 Silverlight 的流式视频功能的精彩应用程序，但是如果您正在执行数据输入和显示，并且您不需要 Silverlight 的丰富性，那么为什么不保持范围和留在 Asp.Net？

如果您打算在 Silverlight 中完成 UI，那么在 Silverlight 中完成所有这些操作是有意义的。[我对 Silverlight 应用程序内部发生的所有ViewModel](http://blogs.conchango.com/davidwynne/archive/2008/12/15/silverlight-and-the-view-viewmodel-pattern.aspx) -view-controller 页面流程有很好的经验，而不是转换到另一个 html 页面并加载不同的 silverlight 应用程序。它速度更快，您可以在 Silverlight 的 XAML 标记中制作精美的过渡或淡入效果。

为什么“减少 AJAX 暴露”是一个理想的目标？像 Stackoverflow 这样的网站在这里使用 AJAX 技术效果非常好。

Stephen Walther 在 MIX09 上的演讲展示了当前 ASP.Net 的四大支柱——表单、MVC、AJAX 和动态数据。很多人将其视为“从表单迁移到 MVC”，但也有其他方法正在开发中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T08:21:23.037

我用 SL 和 MVC 构建了一个小测试应用程序。它没有那么好，但我认为我做得不对。我曾尝试在视图中使用 SL，但由于它一直在加载新的 SL 实例，因此切换页面的速度很慢。我尝试了一个 SL 应用程序，这意味着它也包含所有控制代码，但这将服务器降级为只需要一些 WCF/Web 服务代码而不需要 MVC 的数据访问。

如果我们放弃有很多视图页面的想法，它可能会更好。在我的下一次迭代中，我将使用控制器以 XML 或 JSON 直接响应来自包含视图的 Silverlight 应用程序的请求。然而，这种方法仍然会留下一些未解决的问题，例如，控制器如何对实际显示的视图有发言权？

老实说，我感觉 SL 与 ASP.NET-MVC 的匹配度还不错。一些 Web 应用程序可能会受益于某些 SL 元素（例如图表），但该应用程序仍保持 HTML 格式。另一方面，一个 UI 完全在 SL 中的应用程序（同时在内部使用一些类似的 View/Controller 概念）实际上并不需要服务器端的 MVC。

在早期，我们的早期采用者需要一段时间才能看到真正有效的方法和无效的方法。版本 3 有一个测试版，更多来自 MS，SL 可以访问服务器端数据的方式可能会进一步改变事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T19:00:19.927

我在这里问了一个类似的问题：[Does Silverlight 3 Change the MVC vs. Silverlight question](https://stackoverflow.com/questions/670223/does-silverlight-3-change-the-mvc-vs-silverlight-question)。这是对 SL2 与 MVC 的回应，人们都认为它们是免费的技术。我仍然不相信。我的经历与 AnthonyWJones 相似。根据之前的帖子，我试图将它们混合在一起，但没有取得很大成功。不过可能是我自己的无知。现在我正在使用 SL3 beta 构建一个仅限 Silverlight 的应用程序。我似乎更接近我的预期效果。也就是说，具有一些数据库功能的应用程序。所以构建一个完全独立的应用程序没有意义（因为数据是中心的），但我真的想要一些 Silverlight 的优点来呈现最终结果并允许用户交互。

那么我到底要去哪里呢？根据我的经验，这似乎仍然是一个 YMMV 类型的问题。这实际上取决于您要构建的内容。由于我对数据库很轻，对交互很重，所以我在使用 Silverlight 3 和 .NET RIA 服务来解决小数据库的问题。如果我正在编写 Stackoverflow，我可能会使用 ASP.NET MVC 和 AJAX。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-10T19:55:51.857

我们目前正在使用 ASP.NET MVC 作为 WCF 的替代方案来向 Silverlight 公开数据，其中我们的 Silverlight 应用程序对 Mvc 应用程序中的 url 进行 RESTFUL 调用，并且控制器返回一个 JsonResult 对我们很有效。这绝不是教科书的方式，但我们发现这两种技术相互补充。现在，如果我们需要一个 HTML 实现，我们已经完成了可以重用的模型控制器工作。

# c# - 用电压降控制遥控车

> ID：723696
> 
> 赞同：3
> 
> 时间：2009-04-07T00:01:20.163
> 
> 标签：c#, c

所以我和我的搭档需要一些帮助；我们正在做一个电气工程学位的最终项目。我们的问题是，班上没有人真正懂编程。我们需要帮助或一些关于如何编程的一般想法。

该项目：

我们有一辆带有两个 IR（红外线）传感器的巨型卡车，通过电压检测它的路径。有了这个，我们使用一个自由规模的电路板作为“大脑”，同时我们还有一个 nerf“导弹炮塔”可以通过敞开的门射击（我们需要进行编程以记录来自 IR 传感器的电压降。

编程：

我们正在努力并非常努力地为此创建代码

1.  在程序开始时需要一个延迟功能来将怪物卡车设置在地面上，之后我们需要它从红外传感器在地面上读取的设定电压标准遵循一条直线。
2.  当它经过一扇敞开的门时，它会有很大的 V 下降读数，我们需要它停止射击，然后跟随它的路径。

我知道有很多问题要问，但我们非常需要帮助，我们的老师虽然在所有电气方面都超过了他多年的智慧（让我想起了回到未来的 doc），但缺乏 c 编程，而且这里没有太多使用 C 编程技能的海量知识。最后，一旦我们完成这项工作（5 月中旬），我也会发布视频并向大家展示。我感谢任何意见和任何想法，谢谢大家的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T00:20:23.097

您的代码可能如下所示：

```
 // Give yourself some time to set the robot down
  <sleep_for_some_interval>;

  // Keep reading the sensors and reacting until
  // some amount of time passes, or a button is pressed, etc.
  while(<keep_running_condition>)
  {
     // Update sensor readings
     int leftDist = <ConvertToDistance>(<read_left_voltage>);
     int rightDist = <ConvertToDistance(<read_right_voltage>);

     // React to sensor readings
     if(leftDist > <door_threshold> && 
        rightDist > <door_threshold>)
     {
         // A door has been detected.
         <stop>
         <shoot>
         <move_forward_fixed_amount>
     } 
     else if(leftDist > <turn_threshold>) 
     {
         // Left distance is beyond the threshold, 
         // need to turn left
         <turnLeft>;
     } 
     else if(rightDist > <turn_threshold>) 
     {
         // Right distance is beyond the threshold,
         // need to turn right
         <turnRight>
     } 
     else (<terminate_condition>) 
     {
         // Something happened (a sensor condition, etc)
         // that tells us that we need to end
         // the program
         break; // This will exit the while loop
     } 
     else (...) 
     {
         // Other conditions...
     } 
     else 
     {
         // Default reaction (happens if none of the previous 
         // conditions are met)
         <goForward>
     }
  }

  // Shutdown the robot
  <stop>
  // ... 
```

显然，比较可能需要有所不同，但基本想法是不断读取您的传感器，然后列出要检查的条件以及满足条件时要采取的措施。

**注释/提示：**

*   要“在程序开始时延迟 ...”，您将调用类似[`sleep`](http://docsrv.sco.com:507/en/man/html.C/sleep.C.html)/`usleep`
*   确保以正确的顺序检查条件（首先检查最严格的条件） 在上面的示例中，如果我将“turnLeft”检查移到顶部，我可能最终会左转而不是对门做出反应。
*   上述代码的编写方式，每次通过循环时只会发生一个反应。（这将防止您在应该只做一件事时意外地尝试做两件事，例如左转和开火）
*   编写一个可以将电压转换为距离的函数可能会有所帮助
*   如果您采取复杂的操作（例如检测到门后的反应）并将它们移动到自己的功能中，您的代码将更清晰，更易于维护。
*   确保使用某种形式的[修订控制](http://en.wikipedia.org/wiki/Revision_control)，即使您只是定期压缩您的开发目录。当您发现您在代码中引入了错误时，这将非常有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T00:26:22.303

Out of curiosity, is there a reason you can't do all this in hardware? I'm assuming a lot about your project, but I'd think at least #1 might even be easier to do in hardware if that's your area of expertise. Unless, of course, you have instructions to do this in software that you must obey.

If the IR sensors are already outputting variable voltage, couldn't you just scale the voltage output from the sensors to drive the motors? I'm assuming the wheels are driven by motors and you're spinning one faster than the other to get it to turn. Then you might even get a smoother driving pattern (turning/adjusting as you go), as opposed to the standard software solution, which is go-or-turn.

For #2, you could implement a [state machine](http://en.wikipedia.org/wiki/Finite_state_machine#Hardware_applications). This could take care of the delay as well, just throw a [timer](http://www.uoguelph.ca/~antoon/gadgets/555/555.html) between state 0 (waiting) and state 1 (normal). Then use the voltage output from the door sensor to trigger state 2 (firing). If you need, you can split it into two states, 2 (arming) and 3 (firing), with another timer between the two. The wheel motors are only active in state 1, and release the missile trigger when state 3 occurs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:17:33.353

大多数大学都有一个编程俱乐部（我知道我的） - 为什么不在那里闲逛，看看是否有人愿意帮忙？或者甚至在大学计算机房周围的布告栏上放一些东西，我相信大多数优秀的程序员都会觉得这是一个有趣的项目，可以花点时间去做。

因为这是一个你已经完成的物理项目，所以你真的希望有人和你一起“在地面上”，可以这么说。

# c++ - 继承与专业化

> ID：723702
> 
> 赞同：9
> 
> 时间：2009-04-07T00:03:41.330
> 
> 标签：c++, inheritance, specialization

考虑以下两种使用场景（如您所见，即最终用户只会对使用`Vector2_t`and感兴趣`Vector3_t`）：

[1]继承：

```
template<typename T, size_t N> struct VectorBase
{
};

template<typename T> struct Vector2 : VectorBase<T, 2>
{
};

template<typename T> struct Vector3 : VectorBase<T, 3>
{
};

typedef Vector2<float> Vector2_t;
typedef Vector3<float> Vector3_t; 
```

[2]专业：

```
template<typename T, size_t N> struct Vector
{
};

template<typename T> struct Vector<T, 2>
{
};

template<typename T> struct Vector<T, 3>
{
};

typedef Vector<float, 2> Vector2_t;
typedef Vector<float, 3> Vector3_t; 
```

我无法决定哪个是更好的解决方案。继承的明显优势是派生类中的代码重用；一个可能的缺点是性能（更大的尺寸，用户可能通过价值等）。专业化似乎可以避免这一切，但代价是我不得不多次重复自己。

我错过了哪些其他优点/缺点，在您看来，我应该走哪条路？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-07T00:13:13.693

我认为你最终想要的是让用户类型

```
Vector<T, N> 
```

并且根据`N`，用户会得到轻微不同的东西。第一个不会实现这一点，但第二个会，因为代码重复的代价。

您可以做的是反转继承：

```
template<typename T, size_t N> struct VectorBase 
{
};

template<typename T> struct VectorBase<T, 2>
{
};

template<typename T> struct VectorBase<T, 3>
{
};

template<typename T, size_t N> struct Vector : VectorBase<T, N>
{
}; 
```

并实现仅依赖于 N 作为适当基类中的某个特定值的少数函数。您可以在其中添加一个受保护的析构函数，以防止用户删除`Vector`通过指针的实例`VectorBase`（通常他们甚至不应该命名`VectorBase`：将这些基础放在某个实现命名空间中，例如`detail`）。

另一个想法是将此解决方案与另一个答案中提到的解决方案结合起来。私下继承（而不是像上面那样公开）并将包装函数添加到调用基类实现的派生类中。

另一个想法是只使用一个类，然后`enable_if`（使用`boost::enable_if`）为特定值启用或禁用它们`N`，或者使用像这样更简单的 int-to-type 转换器

```
struct anyi { };
template<size_t N> struct i2t : anyi { };

template<typename T, size_t N> struct Vector
{
    // forward to the "real" function
    void some_special_function() { some_special_function(i2t<N>()); }

private:
    // case for N == 2
    void some_special_function(i2t<2>) {
        ...
    }

    // case for N == 3
    void some_special_function(i2t<3>) {
        ...
    }

    // general case
    void some_special_function(anyi) {
        ...
    }
}; 
```

这样，它对 的用户是完全透明的`Vector`。它也不会为执行空基类优化（很常见）的编译器增加任何空间开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T00:10:14.777

使用继承和私有继承。并且不要使用任何虚函数。由于使用私有继承，您没有 is-a，因此没有人能够使用指向派生子类的 baseclas 指针，并且在按值传递时不会遇到切片问题。

这为您提供了两全其美的优势（事实上，这也是大多数库实现许多 STL 类的方式）。

来自[http://www.hackcraft.net/cpp/templateInheritance/](http://www.hackcraft.net/cpp/templateInheritance/)（讨论 std::vector，而不是你的 Vector**类**）：

> `vector<T*>`被声明为具有`vector<void*>`. 所有将新元素放入向量中的函数，例如`push_back()`，都在这个私有基础上调用等效函数，因此在内部我们`vector<T*>`使用 a `vector<void*>`存储。所有从向量返回元素的函数，例如 `front()`，对调用私有基上的等效函数的结果执行 a `static_cast`。由于获得指向`vector<void*>`（除了故意危险的技巧）的指针的唯一方法是通过`vector<T*>`它提供的接口，因此可以安全地静态地将`void*`back to `T*` （或`void*&`back to`T*&`等）。

一般来说，如果 STL 这样做，它似乎是一个不错的模仿模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-29T09:05:14.510

继承只能用于建模“is-a”。专业化将是更清洁的选择。如果您出于某种原因需要或想要使用继承，至少将其设为私有或受保护的继承，这样您就不会从具有公共非虚拟析构函数的类公开继承。

是的，模板元编程的人总是这样做

```
 struct something : something_else {}; 
```

但是那些`something`s 是*元函数*，并不意味着用作类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-07T00:08:53.780

如果您过多地使用模板专业化，您可能需要重新考虑您的设计。考虑到你把它藏在 a 后面`typedef`，我怀疑你需要它。

# sql - SQL中的日期格式转换

> ID：723703
> 
> 赞同：1
> 
> 时间：2009-04-07T00:04:10.517
> 
> 标签：sql, sql-server, sql-server-2005

我想将日期格式从 01/09 转换为 January 2009 ，从 09/03 转换为 September 2003 等。这在 SQL 中是否可行？请让我知道是否有相同的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:09:12.737

如果您的表中有 DateTime 列，则有可能

```
SELECT DATENAME(MM, YOUR_DATE_COLUMN) + ' ' + CAST(YEAR(YOUR_DATE_COLUMN) AS VARCHAR(4)) AS [Month YYYY] 
```

[http://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T00:09:19.037

你应该看看[这里](http://msdn.microsoft.com/en-us/library/aa226054(SQL.80).aspx)。

这很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T00:20:53.847

您应该首先将其转换为日期时间。然后，您可以在以后阅读时轻松应用任何格式。

```
declare @d varchar(10);
set @d = '01/09'

select 
  --cast(@d as datetime) as d1, --syntax error converting char string
  cast('20' + right(@d, 2) + '-' + left(@d, 2) + '-01' as datetime) as d2 
```

然后使用 rm 的答案将其转换为 mmm yyyy

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T08:31:26.847

```
select datename(month, GETDATE()) + ' '+ substring(convert(varchar, GETDATE(), 100),8,4) 
```

[![图像1](https://i.stack.imgur.com/LUzHD.png)](https://i.stack.imgur.com/LUzHD.png)

# python - 是否可以在不以所有者身份登录的情况下从 App Engine 更新 Google 日历？

> ID：723719
> 
> 赞同：1
> 
> 时间：2009-04-07T00:13:07.563
> 
> 标签：python, web-services, google-app-engine

我希望能够使用 AppEngine 应用程序中的 Google 数据 API 来更新日历，而无需以日历所有者或与之共享日历的用户身份登录。这与此处的示例相反：

[http://code.google.com/appengine/articles/more_google_data.html](http://code.google.com/appengine/articles/more_google_data.html)

日历所有者的登录名和密码可以嵌入到应用程序中。有没有办法完成必要的身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T02:44:17.307

应该可以使用 OAuth，我自己没有使用过，但我的理解是用户登录，然后授予您的应用访问其私人数据（例如日历记录）的权限。一旦他们授权您的应用程序，您将能够在他们不登录的情况下访问他们的数据。

这是一篇解释 oauth 和 google data api 的文章。

[http://code.google.com/apis/gdata/articles/oauth.html](http://code.google.com/apis/gdata/articles/oauth.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-11T13:25:19.907

可以按照此处所述使用 ClientLogin：

[http://code.google.com/apis/accounts/docs/AuthForInstalledApps.html#Response](http://code.google.com/apis/accounts/docs/AuthForInstalledApps.html#Response)

请注意文档底部提到处理 CAPTCHA 质询的部分。

在 samples/calendar/calendarExample.py 中的 gdata python 客户端中包含示例代码

您需要使用正确的参数调用 run_on_app_engine 以使其工作，如附录中所述：

[http://code.google.com/appengine/articles/gdata.html](http://code.google.com/appengine/articles/gdata.html)

请注意，同一文档建议不要将 ClientLogin 用于 Web 应用程序。使用 OAuth 或 AuthSub 是正确的解决方案，但这对于测试来说更简单且足够好。

# iphone - UITableView 单元格最初加载正确但随后发生变化

> ID：723723
> 
> 赞同：1
> 
> 时间：2009-04-07T00:16:17.553
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

以下方法将数组中的数据加载到 UITableView 的自定义单元格中。数据已正确加载。但是，当我向下滚动上述单元格中的数据（不可见的单元格）时，将更改为数组中看似随机的元素。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    cellComments=nil;
    cellComments=(FullCommentCell *)[tableView dequeueReusableCellWithIdentifier:FullCommentCell_ID];
    if(cellComments==nil)
    {
        [[NSBundle mainBundle]loadNibNamed:@"FullCommentCell" owner:self options:nil];
    }
    NSString *row = [NSString stringWithFormat:@"#%i",indexPath.row+1];
    [cellComments loadFullComments:[latestFMLComments objectAtIndex:(indexPath.row+1)] withCommentNumber:row];
    //cellComments.userInteractionEnabled=NO;
    return cellComments;
} 
```

当我单击单元格时，我还有以下处理方法。当单元格的数据更改为数组中的某个随机元素时-如果我单击单元格（调用下面的方法），则单元格中的数据将更改为正确的数据。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
[self tableView:tableView cellForRowAtIndexPath:indexPath];
} 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:25:17.453

您正在使用缓存的单元格，很可能是您没有在 loadFullComments 中正确重置单元格的 subvview 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T16:52:56.050

埃尔弗雷德的想法是正确的。使用时

```
cellComments=(FullCommentCell *)[tableView dequeueReusableCellWithIdentifier:FullCommentCell_ID]; 
```

方法调用，您需要确保每次都在该单元格上设置任何子视图/属性，例如标签、图像、文本等。你不能假设你会得到一个没有内容的“新鲜”单元格。

例如，当显示索引 17 处的单元格时，表格视图可能会将先前位于索引 3 处的可重用单元格出列。此单元格将具有与索引 3 中相同的属性，并且您有责任重置它们。（例如，将文本从“I'm Cell 3”更改为“I'm Cell 17”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T15:53:17.083

我将 UITextView 更改为多行 UILabel ，现在一切正常。我不知道为什么这会有所不同 - 但它有效 :)

# php - PHP Server to Server Transfers

> ID：723742
> 
> 赞同：2
> 
> 时间：2009-04-07T00:26:42.880
> 
> 标签：php

We are storing a Final Image, Back and Front proof and a thumbnail on one server, but what I need to is when the user goes to took at their images, it needs to transfer the image from the image server on to our web server.

I have tried opening the the server connection and the transferring the image from where it is to where the .php file that has opened the connection is, but i just continually got errors saying that the stream could not be opened because the directory didn't exist. And i had tried to open up two connections (one for each server) and using get and put to move it from server to server.

These images can't be stored on a intermittent PC. Any help or advice on how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:32:35.317

You could try transferring the image directly to the user through [Apache mod-proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html) connection. I'm sure there are ways to work out user permissions between the servers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T00:34:15.903

What is the purpose of the image server you're using? Are you sure you need to transfer the image across to your other server rather than just having the HTML the web server is producing link to the image server?

Other than that you might want to look into using NFS rather than programatically transferring the files yourself every time they're requested (assuming you're using some form of *nix on both machines and can create NFS shares).

# unity-container - Is it possible to configure ms Unity container from an xml document and NOT from a file?

> ID：723747
> 
> 赞同：4
> 
> 时间：2009-04-07T00:31:02.887
> 
> 标签：unity-container, containers, configure

Is it possible to configure ms Unity container from an xml document and NOT from a file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T00:37:02.840

Not sure about that, but you can configure programmatically without a .config, so you could have your own xml file, read settings and programmatically setup your Unity container. It's ashame this facet isn't covered in alot of the documentation. There are alot of scenarios where the App.config isn't available or appropriate.

Edit:

> By default, this is the App.config or Web.config file for your application. However, you can load configuration information from any other XML format file or from other sources.

**See: [http://msdn.microsoft.com/en-us/library/cc440941.aspx](http://msdn.microsoft.com/en-us/library/cc440941.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-25T09:08:34.683

为什么不将 XMLDocument 保存在机器上的某个本地文件中，然后将该 XML 文件加载到 Unity 容器中。

除非保存 XML 文档有任何限制，否则我认为它会起作用。

# ajaxcontroltoolkit - Ajax Control Toolkit Date Picker - 是否可以不必选择日期？

> ID：723755
> 
> 赞同：3
> 
> 时间：2009-04-07T00:37:54.100
> 
> 标签：ajaxcontroltoolkit, calendarextender

所以我可以将日历扩展器上的日期格式设置为只显示月份，但您仍然必须选择年份，然后是月份，然后是日期。

我只想选择年份，然后选择月份。

```
 <cc2:CalendarExtender ID="DateOfReleaseCalendarExtender" runat="server"
        TargetControlID="DateOfReleaseTextBox"
      Format="MMMM yyyy" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-08T15:11:02.197

这不是内置功能，不是。你必须自己扩展它。我可能会加入 Javascript 事件——无论你认为在你的情况下哪个是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-14T12:19:04.287

这需要修补 AjaxControlToolkit 程序集的 CalendarExtender 部分。

我发现一篇博客文章解释了如何做一些与你正在尝试做的事情非常相似的事情：
**[修补 CalendarExtender 控件](http://tonesdotnetblog.wordpress.com/2009/04/15/how-to-patch-the-ajax-control-toolkit-calendarextender-to-add-decade-support-and-initialview-part-1/)**

# python - Import XML into SQL database

> ID：723757
> 
> 赞同：5
> 
> 时间：2009-04-07T00:39:25.627
> 
> 标签：python, sql, xml

I'm working with a 20 gig XML file that I would like to import into a SQL database (preferably MySQL, since that is what I am familiar with). This seems like it would be a common task, but after Googling around a bit I haven't been able to figure out how to do it. What is the best way to do this?

I know this ability is built into MySQL 6.0, but that is not an option right now because it is an alpha development release.

Also, if I have to do any scripting I would prefer to use Python because that's what I am most familiar with.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T01:51:15.407

You can use the getiterator() function to iterate over the XML file without parsing the whole thing at once. You can do this with [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html), which is included in the standard library, or with [lxml](http://codespeak.net/lxml/).

```
for record in root.getiterator('record'):
    add_element_to_database(record) # Depends on your database interface.
                                    # I recommend SQLAlchemy. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T08:13:20.747

Take a look at the `iterparse()` function from `ElementTree` or `cElementTree` (I guess cElementTree would be best if you can use it)

This piece describes more or less what you need to do: [http://effbot.org/zone/element-iterparse.htm#incremental-parsing](http://effbot.org/zone/element-iterparse.htm#incremental-parsing)

This will probably be the most efficient way to do it in Python. Make sure not to forget to call `.clear()` on the appropriate elements (you *really* don't want to build an in memory tree of a 20gig xml file: the `.getiterator()` method described in another answer is slightly simpler, but *does* require the whole tree first - I assume that the poster actually had `iterparse()` in mind as well)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T01:11:28.810

我用 Python 做过几次，但从来没有用过这么大的 XML 文件。[ElementTree](http://effbot.org/zone/element-index.htm)是一个优秀的 Python XML 库，可以提供帮助。如果可能的话，我会将 XML 分成更小的文件，以便更容易加载到内存中并进行解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-10T07:56:12.750

[MySQL 文档](http://dev.mysql.com/tech-resources/articles/xml-in-mysql5.1-6.0.html)似乎并未表明 XML 导入仅限于版本 6。它显然也适用于 5 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T02:04:11.070

It may be a common task, but maybe 20GB isn't as common with MySQL as it is with SQL Server.

I've done this using SQL Server Integration Services and a bit of custom code. Whether you need either of those depends on what you need to do with 20GB of XML in a database. Is it going to be a single column of a single row of a table? One row per child element?

SQL Server has an XML datatype if you simply want to store the XML as XML. This type allows you to do queries using XQuery, allows you to create XML indexes over the XML, and allows the XML column to be "strongly-typed" by referring it to a set of XML schemas, which you store in the database.

# html - 选项卡式界面是否令人困惑？

> ID：723758
> 
> 赞同：12
> 
> 时间：2009-04-07T00:39:51.350
> 
> 标签：html, user-interface, tabs, tabbed-interface

我们正在设计一个网站，并且遇到了一些 UI 挑战，这些挑战可以通过选项卡式界面巧妙地解决。用户将与网站的不同元素进行交互（有一些基本的查看/编辑/复制/粘贴功能可用），并且一次只在一个选项卡中显示一个对象可以大大简化事情。

当然，我们对选项卡式界面完全满意，但是新手用户呢？我在网上搜索了指导，但没有找到任何确定的东西。您是否有向新手用户展示选项卡式界面的经验，他们是否遇到过麻烦？或者，我们是否已经达到了每个人都对标签感到满意并且我们可以毫无保留地使用它们的地步？

可用性很重要——这个项目比大多数项目更重要。如果天真的用户对选项卡式界面感到困惑，它就无法正常工作，我们将不得不寻找另一种方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-07T01:10:27.673

Steve Krug在他的优秀著作“Don't Make Me Think”（[Sensible.com](http://www.sensible.com/)）中讨论了使用选项卡式界面的好处：

*   他们是不言而喻的
*   他们很难错过
*   他们很光滑
*   他们建议一个物理空间

他接着描述了 Amazon.com 展示的成功标签的关键：

*   他们被正确绘制
*   它们是彩色编码的
*   进入站点时选择了一个选项卡。

显然，他提供了书中每个项目符号的详细信息（我不会在这里抄袭他）。如果您想要为新手和专家创建网站的指南，这本书绝对值得一看。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T00:54:37.603

标签变得越来越普遍，只要您正确实施它们，我就不用担心使用它们。确保使活动选项卡在视觉上与其他选项卡不同。

此外，尝试使用渐进增强创建选项卡，以便在禁用 JavaScript 的情况下内容仍然存在。有两种主要方法可以做到这一点：

1.  使用AJAX加载除第一个选项卡外的每个选项卡。选项卡本身应该是指向 AJAX
    获取的内容的链接。
2.  保留页面上的所有信息，但使用 JavaScript 将其隐藏。当您循环浏览选项卡时，它们会从页面的隐藏部分填充。

[YUI 设计模式库](http://developer.yahoo.com/ypatterns/)及其[选项卡](http://developer.yahoo.com/ypatterns/parent.php?pattern=tabs)部分可能对您有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T00:45:15.143

我认为只要标签是可见的，用户就可以理解。我见过一些网站，他们展示了一个带有链接的垂直条，这些链接的作用类似于标签，但用户并不能立即看到它，并且发现这非常令人困惑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-07T01:05:43.503

我不得不不同意那些支持标签的人。在我们为一个流量相当大的网站（当时有超过 100 万个独立网站）进行的设计测试中，我们发现标签没有被使用。标签被清楚地标记，位于主要内容区域的右侧。根据这种经验，我建议要么找到替代方案，要么像 staticscan 建议的那样运行可用性测试来确定哪些可行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-07T01:09:43.777

不要认为你可以先验决定什么是可用的，什么是不可用的。做可用性测试

“只需要五个用户就可以发现 80% 的高级可用性问题” Jakob Nielsen

谷歌可用性测试并开始学习。这并不难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-07T00:51:31.090

我倾向于同意 lothar 和 ricebowl 的观点——这些天人们似乎对它很熟悉。任何 GUI 元素最重要的一点是清晰——用户必须天生就知道当他们按下某个东西时会发生什么（他们知道点击一个不活动的选项卡会使其处于活动状态）；在导航中 - 必须非常清楚他们当前在哪个选项卡上。正如lothar 所说，如果用户不能立即看到它，那将非常令人困惑。如果你解决了这些问题，那应该没问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-07T16:08:45.830

只是想注意 SmashingMagazine 有一篇新文章展示标签：[标签展示](http://www.smashingmagazine.com/2009/04/06/showcase-of-well-designed-tabbed-navigation/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T00:46:40.990

我认为人们已经习惯了标签的隐喻（来自活页夹或卡片索引等）。尤其是那些长时间使用网络的人。我认为，如果 IE 采用了一个隐喻，它意味着对这个隐喻的普遍熟悉。

所以，不，我建议他们不要混淆，并建议你去做。只是，也许，发布一个欢迎/首次介绍（或一个突出的“帮助”链接到这样的介绍）来使用标签。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-07T01:04:00.700

我一直是使用选项卡式界面、由 HTML 生成并由 JavaScript 控制的 Intranet 应用程序的开发人员。这是在 IE7 和 Firefox 之前的方式。事实上，这在一般网站上也有点新奇。

幸运的是，以前的开发人员发现，如果你让它看起来像一个对话框 - 甚至使用灰色背景，那么人们通常会理解这个比喻。我们还在初始页面加载中加载了所有选项卡的所有内容，并且在选项卡式结构*之外有保存/取消按钮。*正因为如此，大多数人立即明白他们可以在选项卡之间移动（我们使用 JavaScript 来隐藏和显示 DIV），并且保存会保存对*所有*选项卡的更改。

如果你想偏离这样一个明显的比喻，那么你需要做一些可用性研究。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-07T01:05:17.327

一个良好实现的 Tab 界面不应该让用户感到困惑。

与其他人所说的一致，使用选项卡或任何其他导航界面要考虑的最重要的事情之一是，它们当前在导航方案中的位置很明显。

另一个重要的一点是不要破坏浏览器！许多 AJAX 或 javascript 实现会破坏后退按钮。这对一些人来说是一个小烦恼，对另一些人来说是一个很大的不便。请务必在此处考虑您的目标受众。

就个人而言，我更喜欢不预加载所有选项卡而是将每个选项卡作为自己的页面并使用模板方法来管理导航界面的老式方法，无论是选项卡还是其他方式。这可以维护浏览器历史记录，并且无论是否使用 javascipt 都可以正常工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-07T01:13:35.903

标签等只是工具。我们如何决定如何布置和使用它们决定了它们的有效性。

我要记住的是：

1）**保持关闭。**我们使用最多的东西应该尽可能放在前面或靠近顶部，其余的根据使用/调整的频率埋葬。

2)**很容易让妈妈使用。**如果没有以清晰和合乎逻辑的方式布局，所有接口都会令人困惑。

3）**组织它的使用方式，而不是你认为它的意义。***我经常使用标签来分解流程中的步骤，或者分解基本/高级选项等区域。我根据相似性或使用情况对它们进行分组，具体取决于哪种效果更好

4)**尽量少用**无论哪种方式，我都尽量保持在 7-10 范围内，因为人脑很难跳出 7-10 位数字，所以我假设信息片段也是如此。垂直手风琴可能也是您想要研究的东西。

我之前也在选项卡中嵌入了选项卡。效果很好，但大多数时候只有一层深。

# javascript - Javascript / jQuery not executing in IE until the body of the page is moused over

> ID：723759
> 
> 赞同：1
> 
> 时间：2009-04-07T00:40:08.200
> 
> 标签：javascript, jquery, internet-explorer

I'm working on a new portfolio site at [http://www.nitrohandsome.com](http://www.nitrohandsome.com), and am using the experience to cut my teeth on jQuery. I'm using the latest build and jcarouselite along with the easing extension on my main page for a nifty carousel effect. It works fine in most browsers, but when I started testing in IE (7 and 8, haven't started optimizing for 6.5) I find that jQuery does not execute code as soon as the document is loaded. Rather, it seems to wait until one moves the mouse on to the body of html itself. This causes my carousel to display like a list and my main menu buttons to not render properly until the user moves the mouse. I used [browsershots.org](http://www.browsershots.org) to check if it was only happening on my machine, but sadly not. Can anyone shed some light on this for me? I'm a novice with jQuery, and have only a bit more experience with javascript in general, although I am quite familiar with other ECMA languages such as Actionscript.

I would post the source, but the live preview of the post shows that it would try to render the HTML.

Thanks in advance.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-07T00:45:36.500

You have an extra comma somewhere in your code. Check it for something like this:

```
{
 param: "whatever",
 param2: "whatever", // <- extra comma!
} 
```

IE dies on these while Firefox does not.

**EDIT**: Here is the extra comma:

```
$("#carousel").jCarouselLite({
    btnNext: "#next",
    btnPrev: "#prev",
    visible: 3,
    easing: "easeout",
    speed: 150, // <- REMOVE THIS COMMA
}); 
```

**SECOND EDIT:**

For the sake of anyone that finds this page later on, the reason his page was not showing correctly was because of jQuery's 1.3.1 [documented](https://stackoverflow.com/questions/477463/jquery-is-waiting-for-images-to-load-before-executing-document-ready) [problems](http://dev.jquery.com/ticket/3988#preview) with document.ready firing after images or not at all. A fix to the latest jQuery version did the trick.

# c# - Why is the data from my html form not submitting?

> ID：723761
> 
> 赞同：0
> 
> 时间：2009-04-07T00:42:52.513
> 
> 标签：c#, asp.net, jquery, asp.net-mvc

I am developing asp.net mvc application. I have a section on the form where I add some text boxes dynamically when the user clicks a "Add New Part" button. The problem is when I submit the form I don't get the data from the fields I added dynamically. I am passing the FormCollection to my controller and stepping through the code in the debugger and those fields are not there. If I look at them in firebug I see them just fine. Any ideas?

Here is the javascript for adding the text fields to the page:

```
function moreFields() {
        var newFields = document.getElementById('readrootpu').cloneNode(true);
        newFields.id = '';
        newFields.style.display = 'block';
        var newField = newFields.childNodes;
        for (var i = 0; i < newField.length; i++) {
            var theName = newField[i].name
            if (theName)
                newField[i].name = theName;
        }
        var insertHere = document.getElementById('newpartusageitems');
        insertHere.parentNode.insertBefore(newFields, insertHere);
    } 
```

Here is the html:

```
<div id="readrootpu" class="usedparts" style="display: none">
    <% var fieldPrefix = "PartUsage[]."; %>
    Part ID:
    <%= Html.TextBox(fieldPrefix + "ID", "")%>
    Serial Number:
    <%= Html.TextBox(fieldPrefix + "Serial", "")%>
    Quantity:
    <%= Html.TextBox(fieldPrefix + "Quantity", "") %>
    <input type="button" value="Remove" onclick="this.parentNode.parentNode.removeChild(this.parentNode);" />
</div> 
```

When I inspect the html with firebug it looks fine to me:

```
Part ID: <input type="text" name="PartUsage[].ID" id="PartUsage[]_ID" value="" />
Serial Number: <input type="text" name="PartUsage[].Serial" id="PartUsage[]_Serial" value="" />
Quantity: <input type="text" name="PartUsage[].Quantity" id="PartUsage[]_Quantity" value="" /> 
```

Thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T07:15:28.827

使用 Firebug 验证是否所有发布数据都是通过“网络”选项卡从页面发送的。

另外，我同意 Kobi 的观点：您需要增加克隆元素的 ID，以便它们是唯一的。

我建议您查看 jQuery 以动态创建 html 元素。我才刚刚开始学习 jQuery，它非常简单。下面的代码演示了一个简单的文件上传表单，它允许用户动态添加更多的输入元素。每次 jQuery 添加一个新的 input 元素时，我都会在 id 属性上附加一个 chr，因此它们都是唯一的。希望这可以帮助您：

jQuery 的脚本块.. 注意最后一部分是 ajax 动画。实际的复制代码只是 $("#moreFiles").click 中的那 4 行

> ```
>  <script type="text/javascript">
>         var counter = "oneFile";
>         $(document).ready(function() {
>             $("#moreFiles").click(function() {
>                 var newCounter=counter+"1";
>                 $("p#"+counter).after("<p id='"+newCounter+"'><input type='file' name='"+newCounter+"' id='"+newCounter+"' size='60' /></p>");
>                 counter=newCounter;
>             });
>             $("#submitUpload").click(function() {
>                 $("#submitUpload").val("Uploading...");
>                 $("img.uploadingGif").show(); 
>             });
>         });
>     </script> 
> ```

..和 aspnet 标记：

```
 <% string postUrl = Model.PostUrl + (Model.ModelID > 0 ? "/" + Model.ModelID.ToString() : ""); %>
    <form id="uploadForm" class="uploadForm" action="<% =postUrl %>" 
        method="post" enctype="multipart/form-data">
        <label>Select file(s) for upload (size must not exceed 
            <% =Html.Encode(ServiceConstants.MAX_FILE_UPLOAD_SIZE_INBYTES) %> bytes):</label>  
        <p id="oneFile"><input type="file" name="oneFile" id="oneFile" size="60" /></p>
        <% if(Model.MultipleFiles) { %>
            <p><a id="moreFiles" href="#">add more files</a></p>
            <input id="MultipleFiles" type="hidden" name="MultipleFiles" value="true" />
        <% } %>
        <p><%--<input id="submitUpload" type="submit" value="Upload" />--%>
        <% =Html.InputSubmit("Upload","submitUpload") %>
            <% =Html.LoadingImage("uploadingGif") %>
    </form> 
```

..这一切都只归结为几行html和jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T06:59:13.047

当您在具有相同名称的字段上有多个值时，您应该能够在服务器端使用`Request.Form.GetValues("key")`.

您应该注意，当您克隆节点时，会创建具有相同 ID 的副本，这被认为是无效的。
此外，您在`for`那里有一个循环，我不太明白它的作用（读取节点的名称并将其设置回来 - 这样做的原因是什么？应该是`var theName = newField`**s**`[i].name`吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-02T14:11:19.697

如果所有字段都留空，当我的表单工作正常时，我正在使用纯 HTML，但如果我填写表单，它将不会提交。

后来我意识到这是因为一个文本字段条目“电子邮件”，我在其中输入了一个包含字符“@”的电子邮件地址。当我删除“@”时，表单再次开始提交。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-07T01:24:03.927

在没有相应的服务器端控件准备好从回发中读取数据的情况下，您不能随意地在客户端添加文本框。但是，您应该能够从 HttpRequest.Form 读取原始数据。

更新：哎呀！这是MVC。我没读过^H^H^H^H 看到那个。没关系。

-Oisin

# c++ - 程序会在扬声器中产生静电噪音？

> ID：723762
> 
> 赞同：4
> 
> 时间：2009-04-07T00:44:04.837
> 
> 标签：c++, opengl, audio

有谁知道我的程序可能导致我的扬声器输出一些柔和的静电的原因？这些程序本身没有一个可以向任何东西输出声音的元素，但是当我运行一些程序时，我可以听到扬声器发出的静电声。当我运行某些程序时，它甚至会变得更响亮。移动扬声器没有帮助，所以它必须来自计算机内部。

我不确定还有什么其他细节可以写下来，因为这看起来很奇怪。它们是用 C++ 和 MS Visual C++ 编写的 OpenGL 程序。

编辑：似乎在无限循环中交换帧缓冲区会产生噪音，因为当我停止交换时，我会变得沉默......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T00:49:37.147

计算机在执行代码时消耗不同的电量。这种电流波动就像一个射频发射器，可以被音频设备接收到，它本质上会像 AM 调制信号一样被“解码”。由于执行通常不会产生可识别的信号，因此听起来像是白​​噪声。音频设备接收 RF 信号的一个很好的例子是，如果您在接听电话时将 (GSM) 手机靠近音频放大器。您很可能会从手机的发射器中听到典型的抽吸嗡嗡声。

前往此处了解有关[电磁兼容性](http://en.wikipedia.org/wiki/Electromagnetic_compatibility)的更多信息。信号可以通过多种方式耦合到您的音频中。正如您提到的电源线是电源线，它很可能是磁感应耦合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T00:50:25.350

:)

您会惊讶地发现扬声器输入正在从**硬盘**中拾取静电。当您执行一些**内存/磁盘密集型**操作（例如交换帧缓冲区）以使硬盘必须快速旋转时，会出现声音。

几年前我也遇到过同样的问题，我也解决了。但我很抱歉我不记得我是怎么做到的。

希望诊断有助于解决问题。

**更新：**我记得。如果您使用的是 Windows，请转到音量控制并静音所有外部输入/输出，如 CD 输入等。只保留两个基本的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-07T00:51:22.587

既然你说你没有在你的程序中触摸声音，我怀疑是你的代码在做这个。如果您运行任何其他图形密集型程序，是否会发生这种情况？另外，如果您将混音器中的各个通道静音（32 位 Windows 上的 sndvol32.exe）会发生什么？

不知道其他任何事情，我冒险猜测它可能与您显卡上的风扇有关。如果您的程序导致风扇打开并且它靠近您的声卡或风扇的电源线穿过音频电缆，则可能会导致一些静电。尝试将任何音频线尽可能远离风扇和电源线，看看会发生什么。

它也可能从许多其他来源获取静态，我不会说这一定是不寻常的。如果非图形密集型程序也导致了这种情况，则可能是硬盘访问，甚至是某些频率的 CPU/电源使用率在音频线路（如天线）上被拾取。您还可以尝试减少音频线中的循环数，看看是否有帮助，但不能保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T01:04:11.590

主板上糟糕的音频硬件，尤其是那些最终出现在办公室 PC 中的音频硬件。PC 机箱的内部充满了电噪声。如果这与音频硬件相结合，您会听到它。

解决方案：获取一副带有音量控制的耳机。调低耳机的音量，然后将 PC 的音量调到最大。在大多数情况下，这将增加相对于噪声电平的信号电平。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T01:05:18.577

大多数电子设备都会发出某种电磁干扰。您的扬声器或声音硬件可能会接收到像视频电缆或显卡本身上的信号一样简单的东西。根据我的经验，廉价的扬声器和保护不善的音频设备往往对这种辐射相当敏感。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-07T01:06:05.000

主板上有干扰泄漏到声音总线上。

这通常是因为主板的质量或它的使用年限。此外，计算机内部设备的布局（靠近、重叠）通常会产生有趣的 EM 场。我的旧笔记本电脑随着年龄的增长而变得更容易做到这一点。

因此，随着事情的发展或下降，您会听到它。

尝试查看它是否发生在另一台计算机上。尝试不同年龄和不同配置的不同计算机（外部声卡或物理声卡等）。

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-07T05:49:19.813

[暴风雨](http://www.erikyyy.de/tempest/)

[dvbt](http://bellard.org/dvbt/)

# ruby-on-rails - 知道@vendor.name，如何使Ruby on Rails SEO 中的URL 友好？

> ID：723765
> 
> 赞同：11
> 
> 时间：2009-04-07T00:44:59.513
> 
> 标签：ruby-on-rails, ruby

我的申请在 RoR

我有一个名为 showsummary 的操作/视图，其中 ID 已传递到 URL，控制器使用它来实例化 @vendor，其中 @vendor.name 是公司的名称。

我希望 URL 是，而不是 showsummary/1/ 在 URL 中包含 /vendor-name 。

我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T05:10:17.690

所有这些解决方案都使用`find_by_name`，这肯定需要在该列上有一个索引并且要求它们是唯一的。我们使用的一个更好的解决方案是牺牲少量的美感，就是在供应商名称前加上其 ID。这意味着您不必在名称列上有索引和/或要求唯一性。

供应商.rb

```
def to_param
  normalized_name = name.gsub(' ', '-').gsub(/[^a-zA-Z0-9\_\-\.]/, '')
  "#{self.id}-#{normalized_name}"
end 
```

所以这会给你像

/1-极致

/19-Safeway

ETC

然后在你的表演动作中你仍然可以使用

```
Vendor.find(params[:id]) 
```

因为该方法将隐式调用`.to_i`其参数，并且调用`to_i`这样的字符串将始终返回数字前缀并删除剩余的文本 - 在那一点上它都是绒毛的。

以上假设您使用的是默认路由`/:controller/:action/:id`，这将使您的 URL 看起来像

/vendors/show/1-Acme

但是如果你想让他们看起来

/1-极致

然后有一个像

```
map.show_vendor '/:id', :controller => 'vendors', :action => 'show' 
```

这意味着它会吞下很多你可能也不想要的 URL。引以为戒。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-07T07:57:54.340

我想我会提到 String#parameterize，作为标记答案的补充。

```
def to_param
  "#{id}-#{name.parameterize}"
end 
```

它会过滤掉连字符，用破折号替换空格等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T03:43:52.453

Ryan Bates对这个主题进行了精彩的[截屏视频。](http://railscasts.com/episodes/63-model-name-in-url)

基本上，您重载`to_param`了供应商模型中的方法。

```
 def to_param
     permalink
   end 
```

然后，当您在控制器中查找资源时，您会执行以下操作：

```
 @vender = Vender.find_by_name(params[:id]) 
```

但是这样做的问题是您必须确保供应商的名称是唯一的。如果不能，则执行 Ryan 建议的其他解决方案，他将 id 附加到名称中，然后解析生成的 uri 以找到项目 id。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-07T04:26:51.353

您可以通过修改用于访问这些 URL 的路由并将它们更改为使用 :name 而不是 :id 来做到这一点。这可能意味着您必须自己编写路由，而不是依赖资源。

例如，将其添加到 routes.rb 文件中：

```
map.with_options :controller => "vendor" do |vendor|
  vendor.connect "/vendor/:name", :action => "show"
  # more routes here for update, delete, new, etc as required
end 
```

需要进行的另一项更改是，现在您必须通过名称而不是 id 在数据库中查找供应商对象，因此：

```
@vendor = Vendor.find_by_name(params[:name]) 
```

在内部（至少据我所知/实验）路由的 URL 部分中未指定的任何参数名称（即不在“/Controller/Action/:id”部分中）作为参数附加到末尾.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-07T08:07:50.277

友好 ID [http://github.com/norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b/README.rdoc](http://github.com/norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b/README.rdoc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-07T01:00:21.927

我必须进行一些试验才能做到正确，但解决方案有两个主要部分。

1）添加路线。在 config/routes 中，添加一行将 baseurl/controller/:vendor-name 形式的请求发送到操作 showsummary，（或者可能是一个新操作，show_summary_by_vendor_name）[另外，如果您计划使用 baseurl/:vendorname，那就是也很好] 为方便起见，请确保参数类似于 :vendor-name，而不是默认的 :id

2) 编写控制器动作。在控制器文件中，编辑您的 showsummary 操作以根据是使用 id 还是使用供应商名称调用来区分，或者只编写一个 show_summary_by_vendor_name。（取决于最佳实践，以及您在 1 中编写的路线。我不知道哪个更可取）然后您可以执行 @vendor = Vendors.find_by_name(params[:vendor_name]) 或类似的事情，然后按照您在常规节目摘要中的方式进行渲染。

3）使用它作为链接。一旦您确认 baseurl[/controller?]/vendor-name 有效并显示摘要，请确保您的应用程序和其他地方的所有链接都使用该链接。在我的脑海中，我不记得将自定义路由集成到 link_to 有多么困难，但我认为这是可行的。大多数搜索引擎 [google] 严重依赖链接，因此良好的 SEO 会让您使用那些命名的链接，而不是编号的链接。我认为。我对SEO了解不多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-12-27T12:50:05.813

也看看这个[SEO for Rails的快速入门](http://programmers-blog.com/2010/12/21/quick-start-to-seo-for-ruby-on-rails)

# database - 在数据库设计中是否不鼓励使用个人身份信息 (PII) 作为外键？

> ID：723773
> 
> 赞同：2
> 
> 时间：2009-04-07T00:48:30.037
> 
> 标签：database, database-design

在从测试数据中提取[PII](http://en.wikipedia.org/wiki/Personally_identifiable_information)时，我遇到了一个具有挑战性的场景：通过数据中的外键关系级联更改。鉴于对隐私和法规的关注，是否应该阻止这种做法？如果 PII 本身没有以任何关键方式使用，那么一个巧妙的技巧就是随机排列列。

有一些商业工具可以解决这个问题，但它们似乎都不能很好地处理各种各样的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T00:56:11.843

听起来危险、愚蠢*和*低效。键应该是合成 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:14:17.213

HIPAA 有一个称为“唯一患者标识符”的概念，可用于链接数据：[http ://www.ncvhs.hhs.gov/app4.htm](http://www.ncvhs.hhs.gov/app4.htm)

> 独特的患者标识符无需重复使用和披露个人的个人身份信息（即姓名、年龄、性别、种族、婚姻状况、居住地等），用于日常内部和外部通信（例如订单、结果、药物、咨询等）并保护个人隐私。它有助于保持患者的匿名性，同时促进沟通和信息共享。医疗保健基本上是一个多学科的过程。唯一的患者标识符能够整合和提供来自多学科来源和多种护理环境的急需信息。因此，患者信息的完整性和安全性取决于使用可靠的唯一患者标识符。

隐私问题不在于标识符本身，而在于标识符用于访问的数据的安全性和隐私性，以及如何控制该访问。我的理解是，通常这意味着通过患者标识符查询信息的系统应该只取回无法拼凑在一起以泄露私人信息的信息。

本质上，您将为每个人生成一个人工密钥。即使它对个人来说是独一无二的，它也不是个人身份识别信息，除非您也将连同它一起发布个人身份识别信息。例如，如果您让人们在特定查询中只看到名字，但还返回了人工密钥，那么他们现在知道人工密钥 00003 与名字 Bob 相关联。现在，如果您允许他们以某种方式返回并以 00003 作为条件进行查询，并允许他们访问姓氏，您可以看到他们如何开始积累信息。重要的是，未经授权的用户无法获得在同一查询中返回的人工密钥和 PII，因为这会使人工密钥本身成为 PII。至少这是我的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T17:29:35.823

除了 HIPPA 问题之外，使用 PII 作为密钥的另一个问题是它会发生变化。人们在身份被盗时会获得新的 SSN。SSN 也经常输入错误，因此将信息关联到错误的人（这里更多地考虑从其他系统导入的数据）。人们（尤其是女性）经常改名。不同的人也有相同的名字（由于这个原因，数据库通常也会为他们保存不正确的 SSN 信息，因为它们与该名字的错误 SSN 匹配）因此实际上很少有 PPI 是唯一的，足以成为关键字段. 此外，PII 应存储在加密字段中，使其成为关键字段的更糟糕选择。

# php - Flash and PHP, live user environment: how do I use sockets?

> ID：723776
> 
> 赞同：0
> 
> 时间：2009-04-07T00:50:06.770
> 
> 标签：php, flash, sockets

I've been scouring Google to find out how I can make Flash bring at least two users together in an environment. What I've been trying to do is, for example: both users load [http://example.com/myflashenvironment.html](http://example.com/myflashenvironment.html), and on that page is the same `flashenv.swf` file that they both see from two different computers. In the `flashenv.swf` there is a movieclip object that is draggable. I want to make it so if user 1 drags the movieclip then user 2 can see it being dragged, over the Internet in some kind of online type of deal. I've been trying to do it at runtime, like an online game.

I've been searching google and I've found things about sockets, but it's very hard to just jump right in when you are me. I've tried to figure out so far that I need a PHP file that creates a connects to my server with `fsockopen`, and then I need to create a socket? But then I don't know how to have user 1 write the (x, y) coordinates of the movieclip when he drags it and have user 2 automatically pick up those same coordinates.

And please believe me, I used this as a last resort to see if anyone knew what I am talking about. Google just isn't cutting it tonight.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T01:00:19.447

It sounds to me like you need to read up on how to actually use sockets. Once you understand how they work, how you should structure your program should become very clear. You could serialize a small object with whatever you want the other user to see (like a coordinate change, for example).

But nevermind that, PHP is not what you want. PHP is not made for this sort of thing. What you need is some kind of standalone server - you would have to roll your own using C++ or Java, for example. PHP is made for short requests - you can't run it as a server. Yes, it does have sockets, but they're also made for quick one-shot connections. You need something that is always running, I'm assuming.

You should check out some of the flash multiuser servers that are already made if you don't want to roll your own. [Red5](http://osflash.org/red5) is a free one, and [SmartFoxServer](http://www.smartfoxserver.com/) is a more fully featured server, but it is not free (they do have a free version, but it only supports a few concurrent users).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T13:26:35.347

如果您对多用户 Flash 完全陌生，我建议您使用 SmartFox Server。它非常易于使用，并且有很多教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T16:18:03.483

可以在 php 中创建您想要的套接字服务器，但我真的不推荐它。

与传统 php 脚本的不同之处在于，您不会像在浏览器上调用它那样运行它，而是长时间运行（想想无限循环）cli-server-application（更像 java）

简化它的工作原理是这样的：

1.  php：脚本启动并监听传入的请求
2.  flash: flash 应用程序启动并连接到服务器
3.  php：连接（来自 2）存储在数组中
4.  flash：现在如果用户移动他的movieclip，坐标被发送到脚本
5.  php: 数据到达（来自 4 的坐标）。现在您遍历所有连接并...
6.  ...将数据发送到所有其他影片剪辑
7.  flash：如果数据（从 6 开始）到达，相应地更新 mc 位置
8.  如果闪存连接终止，请将其从阵列中移除

问题： - php 不是很适合这个 - 你仍然需要了解套接字。有很多关于这个主题的教程，但其中大多数只涉及单个连接。- 根据您托管它的位置，您的提供商可能不支持长时间运行的 php-cli 应用程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T10:37:24.877

用 PHP 编写和运行服务器是有问题的（但并非没有优先）。建议的基于 Java 的解决方案更适合您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T17:34:06.217

无需编写自己的服务器、使用套接字或其他复杂且耗时的技术。

Adobe正是为此目的创建了[共享对象类。](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/SharedObject.html)您需要有一台运行[Flash Media Server](http://www.adobe.com/products/flashmediaserver/)（或同等产品）的服务器并使用[远程共享对象](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/SharedObject.html#getRemote())。

# macos - OS X：哪个卷是 DVD？

> ID：723778
> 
> 赞同：1
> 
> 时间：2009-04-07T00:50:18.940
> 
> 标签：macos, mount, dvd

如何以编程方式确定哪些（如果有）挂载的卷是 DVD？

我目前正在寻找一个权限为 555 的目录，但我更喜欢一些不那么 hacky 的东西。谢谢！！

```
$ ls -l /Volumes/
total 12
dr-xr-xr-x  4 mh    gfx    136 Aug  3  2001 DQRMX2102
lrwxr-xr-x  1 root  admin    1 Apr  6 15:09 Macintosh HD -> /
drwxrwxr-x  9 mh    gfx    374 Feb  3 12:55 data 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T00:56:12.153

您使用的是什么编程语言/工具包？

如果你在 Objective-C 中使用 Cocoa，你可以[NSWorkspace](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/doc/uid/20000391-BCIDFHCF)：

```
NSArray *volumes = [[NSWorkspace sharedWorkspace] mountedRemovableMedia]; 
```

如果你想从命令行或者脚本之类的东西中找出来，[`diskutil`](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man8/diskutil.8.html)应该会派上用场的。

```
$ diskutil info -plist /Volumes/Foobar
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
...snip...
    <key>OpticalMediaType</key>
    <string>CD-ROM</string>
...snip...
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T01:11:38.840

对于 Cocoa，您可以使用 NSWorkspace [mountedRemovableMedia:](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/mountedRemovableMedia)获取卷列表，并使用 NSWorkspace [getFileSystemInfo:...](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/getFileSystemInfoForPath:isRemovable:isWritable:isUnmountable:description:type:)获取有关每个已挂载卷的更多信息。

```
- (BOOL)getFileSystemInfoForPath:(NSString *)fullPath 
                     isRemovable:(BOOL *)removableFlag 
                      isWritable:(BOOL *)writableFlag 
                   isUnmountable:(BOOL *)unmountableFlag 
                     description:(NSString **)description 
                            type:(NSString **)fileSystemType 
```

如果要进行系统调用，可以在相同的信息处使用[statfs 。](http://developer.apple.com/DOCUMENTATION/Darwin/Reference/ManPages/man2/statfs.2.html)

```
int statfs(const char *path, struct statfs *buf); 
```

# php - 自我更新 PHP+MySQL 应用程序的最佳实践是什么？

> ID：723791
> 
> 赞同：29
> 
> 时间：2009-04-07T00:58:47.343
> 
> 标签：php, mysql, security, upgrade

现在，桌面应用程序自我更新是非常标准的做法。[在 Mac 上，我书中使用Sparkle](http://sparkle.andymatuschak.org/)的每一个非 Apple 程序都是立竿见影的。对于 Windows 开发人员，[这已经详细讨论过了](https://stackoverflow.com/questions/232347/how-should-i-implement-an-auto-updater)。我还没有找到关于自我更新Web应用程序的信息，希望你能有所帮助。

我正在构建一个 Web 应用程序，该应用程序旨在像 Wordpress 或 Drupal 一样安装 - 将其解压缩到一个目录中，点击某个安装页面，然后就可以使用了。为了获得广泛的服务器兼容性，我被要求使用 PHP 和 MySQL —— 那是 **MP 吗？无论如何，它必须是广泛的跨平台。就上下文而言，这基本上是针对小型企业的统一 Web 消息传递应用程序。它不是另一个 CMS 平台，想想 webmail。

我想了解自更新 Web 应用程序。首先，（1）这是一个坏主意吗？从 Wordpress 2.7 开始，自动更新是一个按钮，这看起来很简单，但我可以想象有很多方法可能会变得非常非常错误。此外，Web 文件可被 Web 进程写入的想法不是安全漏洞吗？

(2) 值得开发时间吗？世界上可能有数百万个 WP 安装，因此 WP 团队花费时间来简化它可能是值得的，在全球范围内节省了数百万工时。我只能想象我的软件安装了几千次——构建自我升级值得花时间投资，还是我可以假设足够老练的用户首先下载和安装 Web 软件可以通过升级清单？

如果这不是安全灾难或浪费时间，那么（3）我正在寻找以前做过的任何人的建议。您是否在数据库中保留版本表？您如何管理数据库升级？在自更新 Web 应用程序的上下文中，您使用什么方法来回滚部分升级？使用 ORM 层是否更容易或更难？您是保留版本更改的增量还是每次都将整个事情炸毁？

我很欣赏你对此的想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-07T01:23:15.053

坦率地说，这确实取决于您的用户群。有大量的 PHP 应用程序不会自动升级。他们的用户要么有足够的技术来处理升级过程，要么就是不升级。

我打算两个步骤：

1) 认真问问自己你的用户可能真正需要什么。自我更新是否会为采用提供足够的推动力来证明额外工作的合理性？如果你确信答案是肯定的，那就去做吧。

既然你在这里问，我猜你还不知道。在这种情况下，我打算执行第 2 步：

2) 发布没有该功能的 1.0 版。等待用户反馈。您的用户可能会立即要求更简单的升级过程，在这种情况下，您应该优先考虑它。或者，您可能会发现您的用户更关心其他一些功能。

在不询问用户的情况下猜测用户想要什么是一种将大量开发时间浪费在人们实际上并不需要的东西上的好方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T17:49:47.677

我最近一直在考虑有关数据库架构更改的问题。目前我正在研究 WordPress 以了解他们如何处理版本之间的数据库更改。这是我到目前为止发现的：

`$wp_db_version`从 加载`wp-includes/version.php`。此变量对应于 Subversion 修订号，并在`wp-admin/includes/schema.php`更改时更新。（可能通过钩子？我不确定。）`wp-admin/admin.php`加载时，`db_version`从数据库中读取名为的 WordPress 选项。如果此数字不等于`$wp_db_version`，`wp-admin/upgrade.php`则加载。

`wp-admin/includes/upgrade.php`包括一个名为`dbDelta()`. `dbDelta()`扫描`$wp_queries`（将从头开始创建最新数据库模式的 SQL 查询字符串）并将其与数据库中的模式进行比较，根据需要更改表以使模式保持最新。

`upgrade.php`然后运行一个调用的函数，该函数在小于目标值时`upgrade_all()`运行特定`upgrade_NNN()`函数。`$wp_db_version`（即`upgrade_250()`，如果数据库版本低于 7499，将运行 WordPress 2.5.0 升级。）这些函数中的每一个都运行自己的数据迁移和填充过程，其中一些在初始数据库设置脚本期间被调用。很好地减少了重复代码。

所以，这是一种方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T10:26:00.700

是的，如果 PHP 在没有警告的情况下从 Internet 上的某个地方覆盖其文件，这将是一项安全功能。无法保证服务器正确连接到*您的*更新服务器（如果发生 DNS 中毒，它可能会下载其他人制作的代码） - 让其他人访问您的客户端数据。因此，数字签名很重要。

用户可以通过在 web 目录上设置权限来控制更新，以便 PHP 只能读取文件 - 这个过程可以简单地记录在您的程序中。

仍然存在一个问题（我真的不知道答案）：如果 PHP 当前正在使用文件，它可以覆盖文件吗（例如，如果 update.php 文件本身需要更新）？值得测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-07T01:25:28.310

我想您已经排除了这一点，但是您可以将其作为服务托管。（想想 wordpress.com）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-07T08:24:10.487

我建议你用[pear](http://pear.php.net/)打包你的应用程序并[设置一个 channel](http://greg.chiaraquartet.net/archives/123-Setting-up-your-own-PEAR-channel-with-Chiara_PEAR_Server-the-official-way.html)。然后，您的用户可以通过标准接口 (pear) 升级应用程序。它不是完全自动的（除非用户在 pear 上运行某种自动化），但它是标准的，因此任何系统管理员都可以维护它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-07T03:08:55.330

我认为您最好的选择是更新检查机制，当有更新时会提醒管理员。

正如您所提到的，存在许多潜在的安全问题。仅由于这些，我建议不要这样做。相反，请尝试创建一个相当智能的升级脚本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-07T10:44:40.697

只是我的 2 美分：我认为我的 CMS 中的自动自我更新应用程序存在安全漏洞，因此如果您决定编写此功能，您应该考虑实现此行为的不同级别：

*   自动更新
*   检查更新并通知
*   禁用

# c++ - C++ 中的链接错误 - 实现 indexList

> ID：723796
> 
> 赞同：0
> 
> 时间：2009-04-07T01:01:32.640
> 
> 标签：c++, symbols

```
Linking... 
Directory.obj : error LNK2019: unresolved external symbol "public: void __thiscall indexList<class entry,100>::read(class std::basic_istream<char,struct std::char_traits<char> > &)" (?read@?$indexList@Ventry@@$0GE@@@QAEXAAV?$basic_istream@DU?$char_traits@D@std@@@std@@@Z) referenced in function _main 
```

获取此错误以及与 indexList 实现相关的其他错误。我已经包含了所有正确的文件，不知道这意味着什么？

[indexList.h](http://www2.cs.uregina.ca/%7Emouhoubm/=teaching/=cs170/=indexList/indexList.h)
[indexList.cpp](http://www2.cs.uregina.ca/%7Emouhoubm/=teaching/=cs170/=indexList/indexList.cpp)

此外，使用 VS .NET 2003 - 它们位于“源文件”和“头文件”下但是，我测试了删除 indexLish.h 并且错误没有改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T01:12:23.927

你所拥有的是一个类模板。这意味着当编译器需要调用一个函数时，它会查看您的模板定义并根据需要生成相应的代码。

例如，如果尝试调用以下代码，*可能会出现编译时错误：*

```
template <typename T>
void doSomething(const T& x) {
    x->_this_function_does_not_exist_ever_();
} 
```

但只要你不打电话`doSomething`，你就不会出错。

您遇到的问题是您的头文件告诉编译器“嘿，这些函数存在”，但是当编译器尝试生成它们时，它找不到任何定义。（您不能“编译”源文件中的定义并将它们链接起来，它们必须对调用者可见。）

`.h`最常见的解决方案是在or`.hpp`文件中简单地定义整个类模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:07:19.460

您是否使用 Visual Studio，然后将这两个文件都包含到解决方案中，然后运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T01:08:13.170

由于您使用的是**模板**，因此最好的方法是将定义包含在 .H 文件中。

我从这[本书](https://rads.stackoverflow.com/amzn/click/com/0201734842)中读到了一些东西。这也可能对您[有所](http://gisresearch.blogspot.com/2008/07/concept-which-confuses-me-for-while.html)帮助。

# c# - Unity Framework 的容器类型的构造函数参数的类型

> ID：723800
> 
> 赞同：0
> 
> 时间：2009-04-07T01:03:18.033
> 
> 标签：c#, unity-container

目前我正在尝试使用配置文件来提供如下所示的 Unity 框架信息......

```
<configuration>
<unity>
 <typeAliases>
  <typeAlias alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager,   Microsoft.Practices.Unity, Culture=neutral, Version=1.1.0.0,   PublicKeyToken=31bf3856ad364e35" />
 </typeAliases>
 <containers>
   <container>
     <types>  
       <type type="Common.ISharedConfiguration, Common, Version=3.1.0.0, Culture=neutral,  PublicKeyToken=1111111111111111" mapTo="Common.SharedConfigurationManager, Common, Version=3.1.0.0, Culture=neutral, PublicKeyToken=1111111111111111">
         <lifetime type="singleton" />
         <typeConfig  extensionType="Microsoft.Practices.Unity.Configuration.TypeInjectionElement, Microsoft.Practices.Unity.Configuration, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
           <constructor>
             <param name="OurEnumChoice" parameterType="MyProjectsEnum" >
               <value value="MyProjectsEnum.OurFirstConstant" type="MyProjectsEnum"/> 
             </param>
           </constructor> 
         </typeConfig>
       </type>
     </types>
   </container>
 </containers>
</unity>
</configuration> 
```

如果我选择类似的东西`System.String`并让我的具体类有一个字符串的构造器，那么这个 Unity 的配置文件信息效果很好。我选择使用`Enum`而不是字符串 Unity 的那一刻会引发这样的错误......

> 无法从程序集 Microsoft.Practices.Unity.Configuration 加载类型 MyProjectsEnum，Version=1.1.0.0，Culture=neutral，PublicKeyToken=31bf33856ad364e35

我想我需要了解通过这个配置过程，除了简单类型之外，我可以通过 Unity 作为一种理解类型传递什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-23T12:27:00.067

You need to specify fully qualified type name for both 'parameterType' and 'type' attributes. Much the same you did for 'typeAlias' node. By default, Unity looks up its own assembly for unqualified types.

# asp.net - jqGrid、ASP.NET、JSON 快把我逼疯了。请帮忙

> ID：723801
> 
> 赞同：4
> 
> 时间：2009-04-07T01:03:35.833
> 
> 标签：asp.net, jquery, json, jqgrid

我一直试图让这个工作好几天，这似乎是一件接一件的事情。最初，我终于找到了将 JSON 字符串中的 ASP.NET 日期传递回网格的麻烦。我现在正在使用 JSON.NET，日期又回到了应有的状态，我被困在了我似乎一直在的地方。这是我的代码，返回的 json 字符串和 jqGrid 代码：（很抱歉它太长了，但我只是不想遗漏任何东西，以防那部分让我搞砸了）！基本上，我一直停留在尝试添加JSONData的ajax调用的成功方法中......截至目前，我从Firebug收到一个错误，上面写着：无效的属性ID（{total：1，page：1，记录：5,[{"ROWID":1,"...rName":"BCC","SubmitterID":"BCC4010","Su

**任何帮助都会非常感激！我非常**想使用这个插件，但我绝对要让它发挥作用！

* * *

在此先感谢，Briana :-)

```
WebMethod:
<WebMethod()> _
    <Script.Services.ScriptMethod(UseHttpGet:=False, ResponseFormat:=ResponseFormat.Json)> _
    Public Function GetTableData() As String
        Dim objController As New TradingPartnersController
        Dim gv_page As String = String.Empty
        Dim sidx As String = String.Empty
        Dim sord As String = String.Empty
        Dim start As String = String.Empty
        Dim limit As String = String.Empty
        Dim row As String = String.Empty
        Dim header As String = String.Empty
        Dim count As Integer = 0
        Dim total_pages As Integer = 0

        gv_page = HttpContext.Current.Request.Form("page")  '.Form("page")
        ' get the requested page 
        limit = HttpContext.Current.Request.Form("rows")
        ' get how many rows we want to have into the grid 
        sidx = HttpContext.Current.Request.Form("sidx")
        ' get index row - i.e. user click to sort 
        sord = HttpContext.Current.Request.Form("sord")
        ' get the direction 
        If String.IsNullOrEmpty(sidx) Then
            sidx = "PartnerID"

        End If

        If String.IsNullOrEmpty(sord) Then
            sord = "ASC"

        End If

        If String.IsNullOrEmpty(limit) Then
            limit = 10

        End If

        '' connect to the database 
        'GridView1.DataSource = objController.ListAll()
        'GridView1.DataBind()

        Dim objCollection As List(Of TradingPartnersInfo) = objController.ListAll()
        count = objCollection.Count

        If count > 0 Then
            total_pages = Math.Ceiling(count / Int32.Parse(limit))
        Else
            total_pages = 0
        End If

        If gv_page Is Nothing Then
            gv_page = 1
        End If
        If Not gv_page > total_pages Then
            gv_page = total_pages
        End If

        start = Math.Ceiling(Int32.Parse(limit) * (Int32.Parse(gv_page) - Int32.Parse(limit)))
        If start < 1 Then start = 1
        Dim objPageCollection As List(Of TradingPartnersInfo) = objController.ListTradingPartners(sidx, sord, Int32.Parse(start), Int32.Parse(limit))
        Dim json As New StringBuilder
        json.Append("{")
        json.Append("total:" & total_pages.ToString & ",")
        json.Append("page:" & gv_page.ToString & ",")
        json.Append("records:" & count.ToString & ",")
        json.Append(JsonConvert.SerializeObject(objPageCollection))
        json.Append("}")
        Return json.ToString

    End Function

Here is the jqGrid code:  

jQuery('table.scroll').jqGrid({  
    jsonReader: {  
        root: "rows", //arry containing actual data  
        page: "page", //current page  
        total: "total", //total pages for the query  
        records: "records", //total number of records  
        repeatitems: false,  
        id: "ID" //index of the column with the PK in it   
    },  
    datatype: function(postdata) {  
        jQuery.jmsajax({  
            type: "POST",  
            url: "EDI.asmx",  
            method: "GetTableData",  
            dataType: "msjson",  
            data: {},  
            complete: function(data) {  
                var mygrid = jQuery('table.scroll')[0];  
                var result = (eval("(" + data.responseText + ")"));  
                var myjsongrid = (jeval(result.d));  
                alert(myjsongrid.rows);  
                mygrid.addJSONData(jeval(myjsongrid.rows));  //This is ERROR LINE

                myjsongrid = null;  
                myjsongridParsed = null;  
                result = null;  
            },  
            success: function(data) {  
                alert('success: ' + data);  
            },  
            error: function(xhr) {  
                var res = xhr.responseText;  
                alert(res);  
            }  
        });  
    },  
    colNames: [
                    "ROWID",
                    "ID",
                    "PartnerID",
                        "Direction",
                        "InterchangeVersion",
                        "InterchangeSenderID",
                        "InterchangeReceiverID",
                        "ProductionMode",
                        "SubmitterName",
                        "SubmitterID",
                        "SubmitterPOC",
                        "CommQual",
                        "CommNumber",
                        "ReceiverName",
                        "ReceiverID",
                        "PartnerType",
                        "PartnerNotes",
                        "IncomingSP",
                        "OutgoingSP",
                        "ExchangeAck",
                        "isDeleted",
                        "DateTimeInserted",
                        "KeyID"
                    ],

    colModel: [
                { name: "ROWID",
                    width: 1,
                    hidden: true,
                    key: false,
                    sorttype: 'int',
                    editrules: { searchhidden: false,
                        hidedlg: true,
                        index: 'ROWID',
                        jsonmap: 'ROWID'
                    }
                },

                { name: "ID",
                    width: 1,
                    hidden: true,
                    key: true,
                    sorttype: 'int',
                    editrules: { searchhidden: true,
                        hidedlg: false,
                        index: 'ID',
                        jsonmap: 'ID'
                    }
                },

                { name: "PartnerID",
                    width: 50,
                    resizable: true,
                    sortable: true,
                    sorttype: 'text',
                    editable: true,
                    edittype: 'text',
                    editrules: { required: true,
                        index: 'PartnerID',
                        jsonmap: 'PartnerID',
                        label: 'PartnerID',
                        resizable: true,
                        search: true
                    }
                },
                    { name: "Direction",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'select',
                        editoptions: { value: "I:O" },
                        editrules: { required: true,
                            index: 'Direction',
                            jsonmap: 'Direction',
                            label: 'Direction',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "InterchangeVersion",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'select',
                        editoptions: { value: "004010X098A1:004010X097A1:004010X096A1:004010X098A:004010X097A:004010X096A" },
                        editrules: { required: true,
                            index: 'InterchangeVersion',
                            jsonmap: 'InterchangeVersion',
                            label: 'InterchangeVersion',
                            resizable: true, search: true
                        }
                    },

                    { name: "InterchangeSenderID",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'InterchangeSenderID',
                            jsonmap: 'InterchangeSenderID',
                            label: 'InterchangeSenderID',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "InterchangeReceiverID",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'InterchangeReceiverID',
                            jsonmap: 'InterchangeReceiverID',
                            label: 'InterchangeReceiverID',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "ProductionMode",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'select',
                        editoptions: { value: "T:P" },
                        editrules: { required: true,
                            index: 'ProductionMode',
                            jsonmap: 'ProductionMode',
                            label: 'ProductionMode',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "SubmitterName",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'SubmitterName',
                            jsonmap: 'SubmitterName',
                            label: 'SubmitterName',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "SubmitterID",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'SubmitterID',
                            jsonmap: 'SubmitterID',
                            label: 'SubmitterID',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "SubmitterPOC",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'SubmitterPOC',
                            jsonmap: 'SubmitterPOC',
                            label: 'SubmitterPOC',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "CommQual",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: "select",
                        editoptions: { value: "ED:EM:FX:TE" },
                        editrules: { required: false,
                            index: 'CommQual',
                            jsonmap: 'CommQual',
                            label: 'CommQual',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "CommNumber",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: false,
                            index: 'CommNumber',
                            jsonmap: 'CommNumber',
                            label: 'CommNumber',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "ReceiverName",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'ReceiverName',
                            jsonmap: 'ReceiverName',
                            label: 'ReceiverName',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "ReceiverID",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: true,
                            index: 'ReceiverID',
                            jsonmap: 'ReceiverID',
                            label: 'ReceiverID',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "PartnerType",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: "select",
                        editoptions: { value: "Clearinghouse:PPO:Both" },
                        editrules: { required: true,
                            index: 'PartnerType',
                            jsonmap: 'PartnerType',
                            label: 'PartnerType',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "PartnerNotes",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'textarea',
                        editrules: { required: false,
                            index: 'PartnerNotes',
                            jsonmap: 'PartnerNotes',
                            label: 'PartnerNotes',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "IncomingDataPrepSP",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: false,
                            index: 'IncomingDataPrepSP',
                            jsonmap: 'IncomingDataPrepSP',
                            label: 'IncomingDataPrepSP',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "OutgoingDataPrepSP",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: 'text',
                        editrules: { required: false,
                            index: 'OugoingDataPrepSP',
                            jsonmap: 'OugoingDataPrepSP',
                            label: 'OutgoingDataPrepSP',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "ExchangeAck",
                        width: 50,
                        resizable: true,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: "select",
                        editoptions: { value: "True:False" },
                        editrules: { required: true,
                            index: 'ExchangeAck',
                            jsonmap: 'ExchangeAck',
                            label: 'ExchangeAck',
                            resizable: true,
                            search: true
                        }
                    },

                    { name: "isDeleted",
                        width: 5,
                        resizable: false,
                        sortable: true,
                        sorttype: 'text',
                        editable: true,
                        edittype: "select",
                        editoptions: { value: "Yes:No" },
                        editrules: { required: true,
                            index: 'isDeleted',
                            jsonmap: 'msg.d.isDeleted',
                            label: 'isDeleted',
                            resizable: true,
                            search: true
                        }
                    },

                      { name: "DateTimeInserted",
                          width: 20,
                          hidden: false,
                          datefmt: 'Y-m-d',
                          sorttype: 'date',
                          editable: false,
                          editrules: { index: 'DateTimeInserted',
                              jsonmap: 'DateTimeInserted',
                              label: 'DateTimeInserted',
                              resizable: true,
                              search: true
                          }
                      },

                    { name: "KeyID",
                        width: 5,
                        hidden: true,
                        key: false,
                        sorttype: 'int',
                        editrules: { index: 'KeyID',
                            jsonmap: 'KeyID',
                            hidedlg: true,
                            label: 'KeyID',
                            resizable: false,
                            search: false
                        }
                    }
                ],
    height: 400,
    shrinkToFit: true,
    pager: jQuery('#pager'),
    rowNum: 10,
    rowList: [10, 20, 30, 40, 50],
    sortname: 'ROWID',
    sortorder: "asc",
    viewrecords: true,
    imgpath: 'http://localhost/DNN5/js/jQuery/jqGrid-3.4.3/themes/sand/images',
    caption: 'X12 Trading Partners',
    viewrecords: true,
    gridComplete: function() {
        alert("i'm grid complete" + JSON.stringify(msg));
        //updates the new column order position
        $('table.scroll').tableDnDUpdate();
    }}).navGrid('table.scroll', { edit: true, add: true, del: true }).tableDnD(); 
```

这是返回的 JSON 字符串：（我看到这些数据返回给客户端没有问题。）

成功：

```
{total:1,page:1,records:5,[{"ROWID":1,"ID":1,"PartnerID":"BCN","Direction":"I","InterchangeVersion":"004010X096A1","InterchangeSenderID":"BCC4010","InterchangeReceiverID":"company","ProductionMode":"T","SubmitterName":"BCC","SubmitterID":"BCC4010","SubmitterPOC":"BCC","CommQual":"","CommNumber":"","ReceiverName":"company","ReceiverID":"BCC4010","PartnerTypes":"","PartnerNotes":"","IncomingDataPrepSP":"","OutgoingDataPrepSP":"","ExchangeAck":false,"DateTimeInserted":new Date(1214412777787),"IsDeleted":false},{"ROWID":2,"ID":2,"PartnerID":"BCN","Direction":"I","InterchangeVersion":"004010X098A1","InterchangeSenderID":"BCC4010","InterchangeReceiverID":"company","ProductionMode":"T","SubmitterName":"BCC","SubmitterID":"BCC4010","SubmitterPOC":"BCC","CommQual":"","CommNumber":"","ReceiverName":"company","ReceiverID":"BCC4010","PartnerTypes":"","PartnerNotes":"","IncomingDataPrepSP":"","OutgoingDataPrepSP":"","ExchangeAck":false,"DateTimeInserted":new Date(1212088125000),"IsDeleted":false},{"ROWID":3,"ID":3,"PartnerID":"BCN","Direction":"O","InterchangeVersion":"004010X091A1","InterchangeSenderID":"HCA770385729","InterchangeReceiverID":"BCC47198       ","ProductionMode":"T","SubmitterName":"company Administrators","SubmitterID":"HCA770385729","SubmitterPOC":"briana","CommQual":"EM","CommNumber":"briana@company.com","ReceiverName":"BCN","ReceiverID":"BCC47198","PartnerTypes":"","PartnerNotes":"","IncomingDataPrepSP":"","OutgoingDataPrepSP":"","ExchangeAck":false,"DateTimeInserted":new Date(1212088125547),"IsDeleted":false},{"ROWID":4,"ID":4,"PartnerID":"EHG","Direction":"I","InterchangeVersion":"004010X097A1","InterchangeSenderID":"330989922","InterchangeReceiverID":"company","ProductionMode":"T","SubmitterName":"DENTALCONNECT","SubmitterID":"330989922","SubmitterPOC":"","CommQual":"","CommNumber":"","ReceiverName":"","ReceiverID":"","PartnerTypes":"Clearinghouse","PartnerNotes":"Dental clearinghouse.  Sends billing address in the pay-to segment (NM1*87) and the service address in the billing segment (NM1*85).","IncomingDataPrepSP":"[dispatch].spPreprocessEHG","OutgoingDataPrepSP":"","ExchangeAck":true,"DateTimeInserted":new Date(1235603192033),"IsDeleted":false},{"ROWID":5,"ID":5,"PartnerID":"EMDEON","Direction":"I","InterchangeVersion":"004010X097A1","InterchangeSenderID":"341884003","InterchangeReceiverID":"857297703","ProductionMode":"T","SubmitterName":"INTERACTIVE PAYER NETWORK","SubmitterID":"341884003","SubmitterPOC":"","CommQual":"","CommNumber":"","ReceiverName":"","ReceiverID":"","PartnerTypes":"Clearinghouse","PartnerNotes":"Dental clearinghouse.  Sends billing address in the pay-to segment (NM1*87) and the service address in the billing segment (NM1*85).","IncomingDataPrepSP":"","OutgoingDataPrepSP":"","ExchangeAck":true,"DateTimeInserted":new Date(1235603192000),"IsDeleted":false}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T01:26:42.253

缺少该列表的标识符：

```
return_value = {
    total:1,
    page:1,
    records:5,
    [{  .. some X12 messages  ..}]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T01:51:56.763

实际上，*tvanfosson*对“行”标识符的要求提出了一个很好的观点。我不熟悉*jMSAjax*，所以我的评论可能是无效的。我很高兴知道这一点。

* * *

它可以像返回类型是字符串一样简单吗？也就是说，在评估响应时，您最终会得到封装的字符串而不是 json 对象。

我自己也去过类似的地方。我发现选项是，创建一个表示预期 jqGrid 响应的业务对象并返回对象而不是字符串（ASP.NET 将为您将其序列化为 JSON！）或修改 jqGrid 以*评估*响应两次（混乱） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-23T16:44:07.040

我花了很多时间试图让 jqGrid 使用 JSON 与 ASP.NET 一起工作。现在我已经开始工作了，我想和你分享一下。希望为其他人节省时间。

[我在这里](http://forums.asp.net/t/1430017.aspx)找到了答案。这并不是说没有其他方法可以使这项工作（我确信有）。但这绝对有效。

总结一下对我产生影响的事情：

*   在 jqGrid 的设置中使用“datatype: function() {”，而不是使用“datatype: json”。该函数使用“$.ajax(”来调用服务。在 Fiddler 中查看，这将返回到浏览器的数据更改为纯 JSON（而不是用 XML 包装的 JSON）。
*   使用返回数据类的 Web 服务（在 jqGrid 期望的模式中）。我首先尝试使用 JSON.NET，但由于某种原因，消息显示（再次在 Fiddler 中）用 \ 转义字符串中的每个引号。我很确定你可以让 JSON.NET 工作。但没有它它也能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-07T01:28:42.200

看起来您没有添加 rows 属性标识符。尝试改变：

```
json.Append(JsonConvert.SerializeObject(objPageCollection)) 
```

到

```
json.Append("rows: " + JsonConvert.SerializeObject(objPageCollection)) 
```

如果这不起作用，我建议你简化问题——例如，将数据减少到一行——看看你是否可以让它使用更简单的数据，然后逐渐添加更多的东西。

# javascript - 浏览器中的最大并发文件下载数？

> ID：723810
> 
> 赞同：1
> 
> 时间：2009-04-07T01:05:31.197
> 
> 标签：javascript

两个相关问题：

1.  一个网页允许打开的最大并发文件数是多少（例如，图像、css 文件等）？我假设这个值在不同的浏览器中是不同的（可能是每个文件类型）。例如，我很确定 javascript 文件一次只能加载一个（对吗？）。

2.  有没有办法可以使用 javascript 来查询这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-07T01:45:11.710

对于 Internet Explorer，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/cc304129(VS.85).aspx "MSDN")。基本上，除非用户已编辑注册表或运行“互联网加速”程序，否则如果使用 IE7 或更早版本，他们将最多有两个连接。IE8 尝试对其进行智能处理，并且可以创建多达 6 个并发连接，具体取决于服务器和 Internet 连接的类型。在 JavaScript 中，在 IE8 上，您可以查询属性**window.maxConnectionsPerServer**。

对于 Firefox，FF2 及更早版本的默认值为 2，FF3 的默认值为 6。请参阅[Mozilla 文档](http://kb.mozillazine.org/Network.http.max-persistent-connections-per-server)。无论如何，我都不知道要从 FF 中的 JavaScript 中检索此值。

大多数 HTTP 服务器几乎没有能力限制来自单个主机的连接数，除了禁止 IP。一般来说，这不是一个好主意，因为许多用户都在代理或 NAT 路由器后面，这将允许来自同一个 IP 地址的多个连接。

在客户端，您可以通过从多个域请求资源来人为地增加此数量。您可以设置 www1、www2 等。别名都指向您的同一个 Web 服务器。然后混合从哪里提取静态内容。由于额外的 DNS 解析，这将在第一次产生少量开销。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T01:15:57.787

绕过每个服务器的 X 连接限制的一种有趣方法是将脚本和图像等静态资源映射到它们自己的域... img.foo.com 或 js.foo.com。

我只读过这个 - 没有实际尝试或测试。因此，如果这不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T01:08:22.577

1.  这既是服务器限制，也是浏览器限制。一般网络礼仪认为同时连接不超过 4 个是允许的。大多数服务器默认最多允许 2 个连接，大多数浏览器都遵循。大多数都是可配置的。
2.  不。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-07T01:17:34.863

限制通常是网络服务器。Web 服务器通常只允许每个用户同时下载两次。

像 ASP.NET 这样的活动脚本引擎每个用户一次只执行一个请求。脚本引擎不会处理对静态文件的请求，因此您仍然可以在获取 aspx 文件时获取例如图像。

页面通常包含来自不同服务器的内容，例如流量测量脚本等。由于下载限制是每台服务器的，您通常可以从每台服务器一次下载两个文件。

由于这是服务器限制，因此您无法使用 javascript 找到有关它的任何信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T01:08:38.210

我知道至少在 Firefox 中，这个值是可配置的（`network.http.max-connections`、`network.http.max-connections-per-server`和`network.http.pipelining.maxrequests`），所以我怀疑你会得到一个明确的答案。但是，默认值为 4。

你试图完成什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-07T01:46:31.330

HTTP 中没有限制会话数的内容。

但是，FF 中有一个配置项，它专门设置了总会话数和单个服务器允许的会话数。其他浏览器也可能具有此功能。

此外，服务器可以限制总共有多少会话来自每个客户端 IP 地址。

所以正确答案是：

1/ 会话数限制为客户端（浏览器）和服务器强加的最小值。

2/ 因此，在 JavaScript 中没有可靠的方法来查询它。

# delphi - Delphi IDE 项目“清洁”命令——它有什么作用？

> ID：723821
> 
> 赞同：19
> 
> 时间：2009-04-07T01:09:52.870
> 
> 标签：delphi, ide, compiler-construction, packages

运行 Delphi 2007（我猜可能还有其他版本），如果我在项目管理器中右键单击一个项目（在这种情况下为 BPL 的 EXE），编译和构建上方有一个“清理”命令. 它究竟是做什么的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-07T01:16:24.447

“清理”构建意味着删除编译器生成的所有中间文件和输出文件。一些编译器或 IDE 也有一个“clean & build”或“rebuild all”选项，基本上执行清理，然后是构建。

当您重建现有项目时，编译器通常只重建它确定已更改或新的文件。当然，这是为了节省时间，而不是每次都完全重新编译整个项目。但是，有时这会出现问题；您会发现您的程序出现奇怪的错误或无法正常工作。这会随着项目中依赖项的数量而增加 - 它们可能无法正确重建。在这种情况下，您会发现清理输出并从头开始重新构建将解决问题。

出于同样的原因，通常还建议在构建任何发布版本之前进行清理。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-08T15:31:32.260

是的，它删除了 DCU 文件和 EXE 文件，但它不清理：

*   项目目录以外的其他目录中的 DCU（即使将 PAS 添加到项目中），
*   .MAP 文件
*   .RES 文件（从相应的 .RC 文件编译而来）
*   .DRC 文件
*   .TLB 文件
*   ...

所以，......实施非常非常糟糕，......

使用德尔福 2009。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-07T13:53:59.180

Clean 是 MSBuild 的命令之一，现在用作每次编译或构建的底层引擎。此命令删除临时文件（如 DCU），但也删除最终输出（如 EXE）。

# javascript - 为什么我的网站在 IE 中崩溃？

> ID：723823
> 
> 赞同：2
> 
> 时间：2009-04-07T01:10:42.197
> 
> 标签：javascript, jquery, internet-explorer, crash

我的网站在 Firefox 中运行良好，但在 IE 中崩溃。

我正在使用大量的 jQuery 来淡入内容。当用户多次点击上述链接之一时，它会在 IE 中崩溃。

这是我的网站：[创意调色板](http://www.idea-palette.com/)

我完全不知道为什么该网站在 IE 中崩溃。我什至不知道从哪里开始调试我的问题。我的计算机上没有 Visual Studio，但在我朋友的计算机上，Visual Studio 读取消息“iexplore.exe [####] 中发生未处理的 win32 异常”

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-07T01:16:54.927

干得好。它与您的 DirectX 过滤器有关（可能是淡入淡出的原因）。这是堆栈，EAX 为 NULL。无论代码在做什么都是试图取消 EAX：

```
CDXTFilterBehavior::_ClearSurface:
6C8E87E1  mov         edi,edi 
6C8E87E3  push        ebp  
6C8E87E4  mov         ebp,esp 
6C8E87E6  push        ecx  
6C8E87E7  mov         eax,dword ptr [ebp+0Ch] 
6C8E87EA  mov         ecx,dword ptr [eax] <--- EAX is NULL

>   dxtrans.dll!CDXTFilterBehavior::_ClearSurface()     
    dxtrans.dll!CDXTFilterBehavior::_DrawUnfilteredElementLayers()  
    dxtrans.dll!CDXTFilterBehavior::_DrawElementWithProceduralSurfaces()    
    dxtrans.dll!CDXTFilterBehavior::_ExecuteFilterChain()   
    dxtrans.dll!CDXTFilterBehavior::Draw()  
    mshtml.dll!CPeerHolder::Draw()  
    mshtml.dll!CLayout::DrawClientLayers()  
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispContainer::DrawChildren()   
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispContainer::DrawChildren()   
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispContainer::DrawChildren()   
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispContainer::DrawChildren()   
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispContainer::DrawChildren()   
    mshtml.dll!CDispContainer::DrawSelf()   
    mshtml.dll!CDispNode::Draw()    
    mshtml.dll!CDispRoot::DrawEntire()  
    mshtml.dll!CDispRoot::DrawRoot()    
    mshtml.dll!CView::RenderView()  
    mshtml.dll!CDoc::OnPaint()  
    mshtml.dll!CServer::OnWindowMessage()   
    mshtml.dll!CDoc::OnWindowMessage()  
    mshtml.dll!CServer::WndProc()   
    user32.dll!_InternalCallWinProc@20()    
    user32.dll!_UserCallWinProcCheckWow@32()    
    user32.dll!_CallWindowProcAorW@24()     
    user32.dll!_CallWindowProcW@20()    
    user32.dll!_InternalCallWinProc@20()    
    user32.dll!_UserCallWinProcCheckWow@32()    
    user32.dll!_DispatchClientMessage@20()  
    user32.dll!___fnDWORD@4()   
    ntdll.dll!_KiUserCallbackDispatcher@12()    
    user32.dll!_NtUserDispatchMessage@4()   
    user32.dll!_DispatchMessageWorker@8()   
    user32.dll!_DispatchMessageW@4()    
    ieframe.dll!CTabWindow::_TabWindowThreadProc()  
    kernel32.dll!@BaseThreadInitThunk@12()  
    ntdll.dll!___RtlUserThreadStart@8()     
    ntdll.dll!__RtlUserThreadStart@8() 
```

也许您正在从 DOM 中删除一个元素，而转换仍在对其进行操作？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-07T01:29:06.227

我可以建议你必须遵循“分而治之的策略”。

删除所有 javascript，并尝试加载它，如果失败，则问题出在您已删除的代码上。现在再次添加您已删除的代码的“一半”，如果它没有崩溃，那么问题不在这一半，如果它再次崩溃，那么它在你添加的那一半。现在你必须在它工作时继续添加剩余代码的“一半”，或者如果它失败则删除你添加的一半代码。如果你最终继续这样做，你将导致一段你不能分割的代码，如果添加的话会使 IE 崩溃。

这不会解决你的错误，但它可能会让你知道真正的问题在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-09T11:58:57.153

这是特定于 XP 的问题。我们有一个完整的开发团队正在调查这个问题，因此您不会在 Vista 中看到同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T12:19:28.160

继续@jeffamaphone 所说的话，如果它与修改 DOM 有关，那么可能值得将您的 JavaScript 从 <head> 移动到结束 </body> 标记之前。

我之前遇到过 IE 问题和[臭名昭著的 Operation Aborted 错误](http://www.google.co.uk/search?q=ie6+operation+aborted)，这样做有助于解决这个问题，但我很欣赏 YMMV。

# php - 从 Magento 的管理面板导航中删除项目

> ID：723828
> 
> 赞同：14
> 
> 时间：2009-04-07T01:12:09.603
> 
> 标签：php, xml, magento, navigation, overriding

使用 Magento 电子商务系统，是否可以从管理面板导航菜单中删除项目？更一般地说，有没有办法使用配置覆盖系统从配置中*删除*现有元素？

我知道我可以使用看起来像这样的覆盖添加到导航中

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Module>
            <version>
                0.1.0
            </version>
        </Company_Module>
    </modules>

    <adminhtml>
        <menu>
             <cms translate="title" module="cms">
                <title>The CMS</title>
                <sort_order>70</sort_order>
                <children>
                    <foo translate="title" module="cms">
                        <title>Foo Item</title>
                        <action>adminhtml/foo</action>
                    </foo>
                </children>
             </cms>
        </menu>    
    </adminhtml>
</config> 
```

但是我将/如何完全抑制 CMS 导航项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T16:49:12.127

更清洁的方法：

添加**adminhtml.xml**（例如，添加到保留所有其他自定义内容的现有模块，或创建新模块）

```
<?xml version="1.0" ?>
<config>
    <menu>
        <xmlconnect>
            <disabled>1</disabled>
        </xmlconnect>
    </menu>
</config> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-20T20:24:10.697

您可以将虚假模块依赖项注入到 config.xml 中的菜单项中。

在你的情况下，

```
<adminhtml>
  <menu>
    <cms translate="title" module="cms">
      <depends><module>HideMe</module></depends>
    </cms>
  </menu>
</adminhtml> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T20:33:54.053

我认为 Alan 仍然不需要任何人来问这个问题，但是对于可能最终阅读此问题的其他任何人来说，使用它会更好一些：

```
<adminhtml>
  <menu>
    <cms translate="title" module="cms">
      <depends><config>some/configuration/flag</config></depends>
    </cms>
  </menu>
</adminhtml> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-02T09:05:23.843

对于特定的菜单点，您可以使用：

```
<?xml version="1.0"?>
<config>
    <menu>
        <customer>
            <children>
                <online>
                    <disabled>1</disabled>
                </online>
            </children>
        </customer>
    </menu>
</config> 
```

# c++ - 基于堆栈的回文检查器

> ID：723830
> 
> 赞同：0
> 
> 时间：2009-04-07T01:12:52.723
> 
> 标签：c++, stack, palindrome

我的程序有问题。它应该是通过堆栈识别回文的程序。一切都很好，唯一不起作用的是在功能完成后打印堆栈（原始和反向）。这是我的整个代码，问题在于案例 d 和 e：

```
#include <iostream>

using namespace std;

const int MAXSTACK = 21;
class stack {
private:
    int  stop;  
    char stk[MAXSTACK];
public:
    stack();
    ~stack();
    stack(const stack& s);
    void push(const char c);
    char pop();
    char top(void);
    int  emptystack(void);
    int  fullstack(void);
    void stack_print(void);
    int stack::create(void);
};
stack::stack()
{
    stop = 0;
}
stack::~stack() { }  
stack::stack(const stack& s)
{
    stop = s.stop;
    strcpy(stk,s.stk);
}
void stack::push(const char c)
{
    stk[stop++] = c;
}
char stack::pop()
{
    return stop--;
}
char stack::top(void)
{
    return stk[stop - 1];
}
int  stack::emptystack(void)
{
    return !stop; 
}
int  stack::fullstack(void)
{
    return stop == MAXSTACK;
}
void stack::stack_print(void)
{
    for (int i=0; i<stop; i++)
        cout<<stk[i];
    cout<<endl;
}
int  stack::create(void)
{
    return !stop; 
}
char menu()
{

    char volba;

    cout<<"\n";
    cout<<" **********.\n";
    cout<<"\n";
    cout<<" a ... make new containers\n";
    cout<<" b ... delete content\n";
    cout<<" c ... enter string\n";
    cout<<" d ... print on screen first stack\n";
    cout<<" e ...  print on screen first stack\n";
    cout<<" f ... is it palindrom\n";
    cout<<" x ... exit\n";
    cout<<"\n your choice : ";

    cin >>  volba;
    return volba;
}
int main() {
    char  palindrome[MAXSTACK]; 
    char volba;
    stack original,reversed;
    int   stackitems = 0,i;
    //cin.getline(palindrome,MAXSTACK);
    do{
        volba = menu();
        switch (volba)
        {
        case'a':
            {
                original.create();
                reversed.create();
                cout<<"done'";
                break;
            }
        case'b':
            {
            original.emptystack();
            reversed.emptystack();
            cout<<"empty";
            break;
            }
        case'c':
            {
                cout<<"enter your string"<<endl;
            cin.get();
            //cin.get();
            cin.getline(palindrome,MAXSTACK);
    for(int o = 0; o < strlen(palindrome); o++)

        if (isalpha(palindrome[o]))
        {
            original.push(tolower(palindrome[o]));
            stackitems++;                           
        }
            original.stack_print();

        break;
            }
        case'd':
            {
                original.~stack();
                for(int g = 0; g < strlen(palindrome); g++)
                original.push(tolower(palindrome[g]));
                original.stack_print();
            }
            /*//cin.getline(palindrome,MAXSTACK);
    for(int g = 0; g < strlen(palindrome); g++)

        if (isalpha(palindrome[g]))
        {
            original.push(tolower(palindrome[g]));
            stackitems++;                           
        }

            }
            original.stack_print();*/
            break;

        /*{
                cout<<"original: ";
        original.stack_print();
                break;
            }*/
            break;
        case'e':
            {
            cout<<"reversed:"<<endl;
            for( i = 0; i < stackitems; i++) {
            reversed.push(original.top());
            original.pop();
        }
        reversed.stack_print();
            }
            break;

        case'f':
            {
            for( i = 0; i < stackitems / 2; i++) {
            reversed.push(original.top());
            original.pop();
        }

        if (stackitems % 2)
            original.pop();

        while (!original.emptystack()) {
            if (original.top() != reversed.top()) break;
            original.pop(); reversed.pop();
        }
        if (original.emptystack())
            cout << "it is palindrom\n";
        else
            cout << "not palindrom\n";

        break;

            }
        default:cout<<"!??!";

        }
    } while(volba!='x');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T01:18:34.067

您已经明确调用了堆栈的析构函数。这样做几乎没有充分的理由。如果堆栈是本地的（“在堆栈上”，嘻嘻），编译将为您完成。如果它在堆上，使用创建`new`，调用`delete`它，这将导致编译器调用析构函数。

```
 case'd':
            {
                    original.~stack(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T02:56:41.100

有几件事我想回应一下。首先，我认为 GMan、tpdi 和 Vinay 都有优点。这个[常见问题解答](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.5)解释了为什么在局部变量上调用析构函数是一个坏主意。

我意识到这只是一个简单的家庭作业问题，您可能只是想保持堆栈类的轻量级，但您可能会考虑在堆栈类[中使用容器类而不是字符数组](http://www.parashift.com/c++-faq-lite/containers.html#faq-34.1)。

接下来，我不确定您的 emptystack 和 create 函数是否在做您认为他们正在做的事情。当您在主程序中声明原始堆栈类和反向堆栈类时，将为您的内部字符数组分配内存。在这种情况下，实际上不需要创建函数。也许如果您在堆上为字符数组分配内存，您会将该代码放入 create 函数中（如果您出于某种原因选择将其排除在构造函数之外），但这里不是这种情况。

同样，emptystack 并没有真正做任何事情。最好让空堆栈将 stop 成员变量设置为 0。至少这样，下次有人尝试使用它时堆栈看起来是空的。

关于这个类还有很多可以说的，但是如果你在这里尝试一些建议，比如使用 std::stack 和调试，可能会更好。毕竟，这是您的家庭作业：如果您自己找到解决方案，它将来帮助您更多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T01:19:54.140

你评论了回文阅读:)

```
//cin.getline(palindrome,MAXSTACK); 
```

# version-control - LSL 是否有任何形式的版本控制？

> ID：723832
> 
> 赞同：3
> 
> 时间：2009-04-07T01:13:57.430
> 
> 标签：version-control, linden-scripting-language

Linden 脚本语言是否有任何形式的版本控制？

如果那里的数据库出现故障，我会失去所有的辛勤工作，那么我认为在第二人生中投入所有精力进行编程是不值得的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T20:57:08.260

不幸的是，世界上没有源代码控制。我同意吉吉的观点。我目前正在将我的项目转移到 Subversion (SVN) 系统以控制它们。真的应该在不久前这样做。

网上有许多免费和付费的 SVN 服务。

只有两个免费的例子：
[http://www.sourceforge.net](http://www.sourceforge.net)
[http://code.google.com](http://code.google.com)

您还可以选择在本地设置一个，以便更好地控制它。

在此处搜索“subversion”或“svn”以了解有关如何设置的更多信息。

[编辑 5/18/09]
您在评论中添加了要备份整个对象的评论。有各种程序可以做到这一点。[我在谷歌快速搜索](http://www.google.com/search?q=export+second+life+inventory&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)中遇到的一个是：[第二个库存](https://www.xstreetsl.com/modules.php?name=Marketplace&file=item&ItemID=612924)
我不能推荐这个或任何其他程序，因为我没有使用过它们。但这应该给你一个开始。
[/编辑]

-cb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-16T20:08:45.137

您可以使用[Meerkat 查看器](http://www.meerkatviewer.org/)来备份完整的对象。或者使用 libopenmetaverse 的一些测试程序在文本环境中进行备份。我认为您可以使用它们从库存中备份脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-14T17:11:24.553

在 SL 工作的架构师 Jon Brouchoud 开发了一个名为 Wikitree 的全球协作版本控制系统。它是一个视觉 SVN，没有典型源代码控制系统中出现的差异差异。[他在http://archvirtual.com/2009/10/28/wiki-tree-goes-open-source/#.VQRqDeEyhzM](http://archvirtual.com/2009/10/28/wiki-tree-goes-open-source/#.VQRqDeEyhzM)宣布它正在开源

查看博客文章中的视频，了解它的使用方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T01:33:18.587

你能把它保存到一个文件吗？如果是这样，那么您几乎可以使用任何东西，SVN、Git、VSS ......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-10T23:49:58.540

游戏中没有良好的源代码控制。我在我的脚本名称上保留了细致的版本信息，并且我在文件夹中有一堆旧版本的东西。

我大部分时间都将我的源代码排除在游戏之外并使用 SVN。LSLEditor 是一个不错的使用脚本的应用程序，如果您使用对象创建解决方案，它可以模拟很多游戏环境。（赠送物品、阅读记事卡等） [链接文本](http://www.lsleditor.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T02:09:59.637

[我个人会在 github.com ( http://github.com/cylence/slscripts](http://github.com/cylence/slscripts) )上保留我认为值得保留的所有代码片段。

Git 是一个非常好的 LSL 源代码管理器，因为它的提交是逐行工作的，不像其他 SCM，例如 Subversion 或 CVS。之所以如此重要，是因为大多数第二人生脚本都存在于一个文件中（因为它们不能相互调用...... grrr）。因此，在文件级别进行比较几乎没有那么有效。逐行比较非常适合 LSL。话虽如此，它还（与 SourceForge 和 Google Code 类似）允许您将您的代码公开可见（如果您愿意的话）并且可以以压缩文件的形式下载以便于分发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-19T22:52:03.370

回复晚了，我知道，但是 SecondLife 中有些事情发生了变化，而有些事情，嗯，没有。由于第三方查看器政策仍然阻止在查看器和系统之间保存和加载对象，我正在考虑迄今为止完全被忽视的另一种可能性：机器人！

脚本代理（AKA Bots）拥有所有常用的化身动作。尽管我从未*见过*将其用作对象存储库，但没有理由不能创建一个。作为一个单独的帐户登录，代理可以自动或通过命令在您想要的任何地方，然后以设定的时间间隔或通过命令收集您正在处理的任何或所有对象，并且他们收集的任何东西都可以提供给您或合作者。

我不会说编写代理脚本很容易，甚至不能说自己对脚本代理进行扩展，但是如果您不想从头开始，可以使用广泛的开源框架，[科拉德](https://grimore.org/secondlife:scripted_agents:corrade)。其他机器人服务似乎也没有在[其能力](https://wiki.secondlife.com/wiki/Second_Life_bot_software_comparison)中列出“对象存储库”，但任何支持 CasperVend 的服务都必须已经提供根据请求接收项目的能力。

当然 lo-fi 路由，只是定期复制并将对象发送到备份 avatar，对于一个用户来说可能仍然是一种简单的备份解决方案。尽管这确实需要以其他帐户的身份同时登录或每 20 个左右的项目登录一次，以确保它们被接收并且不受服务器限制。此过程无法像机器人一样重命名项目或自动对它们进行排序。相同名称的项目在库存中列为最新的，但在处理多个不同项目时这是一团糟。

Finally, there is a [Coalesce](https://community.secondlife.com/knowledgebase/english/building-tips-r13/) feature for managing several items as one in inventory. This is currently not supported for sending or receiving objects, but in the absence of a bot, can make it easier to keep track of projects you don't wish to actually link as one item. (Caveat; don't rezz 'no-copy' coalesced items near 'no-build' land parcels, any that cannot be rezzed are completely lost)

# javascript - 为什么我的 JScript（Windows 脚本宿主）在未捕获的异常中以 0 退出？

> ID：723840
> 
> 赞同：3
> 
> 时间：2009-04-07T01:17:51.620
> 
> 标签：javascript, exception, exit-code

我有一些 JScript 用 ODBC 连接做一些事情。ODBC ActiveXObject 对象引发了一个异常，并且没有在我的脚本中捕获。我预计脚本会以非 0 值退出，但事实并非如此。任何人都知道为什么会这样，以及如何让它在未捕获的异常上以非 0 值退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T09:09:14.467

JScript 引擎可以被认为是一个虚拟机。如果 JScript 引擎本身或脚本宿主出现某种形式的灾难性故障，您可能会得到一个非零退出代码（例如，脚本宿主找不到它需要的 DLL 之一）。

但是，如果在此“VM”上运行的脚本程序引发异常，即使是未处理的异常，也不构成引擎或主机的故障。

您可以做的是将整个脚本放在 try 块中，然后在 catch 中抛出异常。脚本引擎将完全按照您希望处理的原始异常处理这个抛出的异常：-

```
try
{

  // the rest of your script

}
catch(e)
{
  throw(e);  // returns nonzero exit code
} 
```

# xml - 将元素插入 xml 会产生不必要的属性 xmlns=

> ID：723841
> 
> 赞同：2
> 
> 时间：2009-04-07T01:17:51.977
> 
> 标签：xml, properties, namespaces, linq-to-xml, xml-namespaces

每当我在我的 xml 文档中插入一个元素时，系统都会向它添加一个 xmlns="" 属性。我该如何摆脱它？为什么会在那里？我使用非常简单的 linqtoxml。

我有一个简单的 XML 文件（注意没有 Xml 声明行，它包含一个命名空间）：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
  <PropertyGroup>
  </PropertyGroup>
</Project> 
```

我执行以下操作：

```
 //  1\. Read in the Xml file
        XDocument testXml = XDocument.Load(@"C:\test.xml");

        //  2\. Add in the extra node
        XNamespace ns = testXml.Root.Attribute("xmlns").Value;          // Get the existing namespace
        XElement newElement = new XElement("MyNewElement", "12345");    // Create the new element
        testXml.Element( ns + "Project").Add( newElement );          // Insert the new element into the document

        //  3\. Write To Disk (without the xml header line)
        TextWriter tw = File.CreateText(@"C:\test2.xml");
        tw.Write(testXml.ToString());
        tw.Close(); 
```

查看文件时，我得到：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
  <PropertyGroup></PropertyGroup>
  <MyNewElement xmlns="">12345</MyNewElement>
</Project> 
```

我需要摆脱 xmlns="" 位。我相信在添加新元素时需要包含命名空间，因为原始文档有一个命名空间。我试图插入元素：

```
 testXml.Element( "Project").Add( newElement ); 
```

但它一直给我一个空引用异常，我假设这是因为元素需要命名空间名称。

我想再次解析它并删除所有 xmlns="" 属性，但它似乎不起作用；我不断收到空引用异常。我可能在这里缺乏对命名空间的一些基本理解，但我环顾四周，似乎找不到任何提示。

谁能指出我正确的方向？

干杯杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T02:09:32.120

XmlNs is "XML NameSpace" - basically the idea is the same as C++ namespaces, Java/C# packages, etc, except it's for parsing against varying [XML Schemas](http://en.wikipedia.org/wiki/XML_schema) (eg XSD, DTD).

You are creating MyNewElement without specifying its namespace, so your DOM tree is interpreting that to be the blank namespace. Since your document root specifies a non-blank namespace, the xmlns="" declaration it is inserting is correct according to your code. You need to specify the namespace on your MyNewElement before adding it to the document somehow. I'm not familiar with the LinQ XML API, but I know that in one earlier version of the .Net XML parsers, recommended practice was to use a `CreateElement()` call from an `XmlDocument` instance to correctly hoist in those settings.

Just on a wild guess based on the lookup code for the Project element, and not knowing LinQ at all, try changing:

```
XElement newElement = new XElement("MyNewElement", "12345"); 
```

to:

```
XElement newElement = new XElement(ns + "MyNewElement", "12345"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T11:53:48.280

这不是问题的答案，但我仍然希望它告诉你。

您可以使用 save 方法将 xdocument 保存到文件中：

```
XDocument testXml = XDocument.Load(@"C:\test.xml");
...
testXml.Save(@"c:\test.xml"); 
```

无需使用 TextWriter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-26T15:19:49.173

您必须将您的命名空间有意地放在 xml 字符串中，例如：

```
<serveur nom='nouveau serveur'  xmlns='urn:myLogConfig'> 
```

然后在代码中删除它：（vb）

```
myXelement.SetAttributeValue("xmlns", Nothing) 
```

# .net - 人员（手动）测试的代码覆盖率？

> ID：723844
> 
> 赞同：9
> 
> 时间：2009-04-07T01:18:19.887
> 
> 标签：.net, testing, code-coverage

是否有任何用于手动测试的代码覆盖率工具？例如，如果我写了 30 行新代码，编译，然后运行，有什么方法可以快速验证所有 30 行代码都运行了吗？

另外，稍后，在我将代码检查到正式版本后，有什么方法可以验证测试部门在进行独立测试时是否命中了所有 30 行代码？

我知道有很多工具可以验证测试部门是否测试了所有需求，但我还没有找到一个工具可以验证测试人员是否测试了所有代码行。

我对 .NET / C# 工具最感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T01:22:37.317

[通过手动测试](http://blogs.msdn.com/marcalt/archive/2006/07/02/654157.aspx)检查代码覆盖率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T01:38:42.410

获得 100% 的覆盖率可能是多余的——在某些情况下，即使覆盖了所有行，该工具也可能不会显示它。话虽如此，您应该查看 Visual Studio Team System 中的代码覆盖工具或任何一些外部覆盖工具，例如[nCover](http://www.ncover.com/)。Team System 允许您定义与测试相关的签入策略，这些策略可以让您在确保签入代码已经过测试方面做您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T01:45:46.747

是的，请查看[AutomatedQA](http://automatedqa.com)的工具。他们可以通过手动测试进行代码覆盖，*并且*他们拥有自动化手动测试的工具，这些工具也可以与代码覆盖相结合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T19:16:18.857

这是一个更详细的答案，而不仅仅是一个链接：

要为 IIS Express 应用程序执行此操作：

检测您想要查看覆盖范围的 dll。所以在你的 bin 目录中运行这个

```
vsintr /coverage yourapp.dll 
```

不幸的是，我还没有弄清楚如何让它利用通配符。

启动应用程序

```
vsperfcmd /start:coverage /output:run.coverage 
```

*   启动您的应用
*   如果 IIS Express 应用程序：
    *   从中获取站点名称`C:\Users\<your user>\Documents\IISExpress\config\applicationhost.config`

运行您的手动测试，然后完成

```
vsperfcmd /shutdown 
```

来自相关问题[https://stackoverflow.com/a/23791306/57883](https://stackoverflow.com/a/23791306/57883)

# ms-access - 具有多个选项卡控件的访问表单

> ID：723849
> 
> 赞同：0
> 
> 时间：2009-04-07T01:20:28.897
> 
> 标签：ms-access, database-design, reporting

这不是一个开发人员的问题，它是一个新手问题，来自多年来一直使用 Access 作为 SQL 数据库的前端而没有任何问题的人。我现在已经创建了一个独立的 Access 数据库，我已经为各种员工创建了该数据库来填写三页表单的不同页面。该表格具有第 1、2 和 3 页的控制选项卡。每个页面上都有个人的社会保障 (SS) 号码。第 2 页和第 3 页只是备注字段，SS 编号除外。我为个人创建了 4 条记录。当我尝试从表单打印或进行打印预览时，它只显示每个人的第一页。如果我将它保存为报告，它会做同样的事情。

我怎样才能为每个人打印三页，或者只在一个人上打印三页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T01:40:31.893

就个人而言，我会将您的报告与您的用户界面分开。这样，您的报告就可以正是您所需要的，而不是制作一个双重目的的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T02:39:06.773

如果您不想使用报表向导来构建自定义报表，那么如何删除选项卡控件并构建一个长（垂直）表单，其中包含三个部分中的所有字段，并带有垂直滚动条。然后打印应该工作。

# resources - Fortran 90 资源？

> ID：723851
> 
> 赞同：6
> 
> 时间：2009-04-07T01:22:05.900
> 
> 标签：resources, programming-languages, fortran

我正在上 Fortran 90 课程，我正在寻找任何关于 Fortran 的好网站。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T01:33:02.860

*   [Dmoz.Org Fortran 90/95 教程](http://www.dmoz.org/Computers/Programming/Languages/Fortran/FAQs,_Help,_and_Tutorials/Fortran_90_and_95/)
*   [Fortran.com Fortran 90 免费在线教程](http://www.fortran.com/tutorials.html)
*   [免费编程资源 - Fortran](http://www.freeprogrammingresources.com/fortrantutr.html)
*   [技术教程 - Fortran](http://www.techtutorials.info/fortran.html)
*   [计算机科学系 - 密歇根理工大学](http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/fortran.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T02:04:03.707

此外，comp.lang.fortran 是一群非常友好的人。

但是，除此之外，您到底在寻找什么？某种介绍性教程，一些专门的东西......你必须提供更多数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T03:50:40.330

Gortok 提供了一个很好的列表 - 我会再添加一个：

*   [Fortran 90 内部函数列表](http://www.nsc.liu.se/~boein/f77to90/a5.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:15:35.153

几门 Fortran 90 在线课程： http: [//people.ds.cam.ac.uk/nmm1/Fortran/](http://people.ds.cam.ac.uk/nmm1/Fortran/)

Michael Metcalf 的 Fortran 90 文章： [http ://www.fortran.com/metcalf.htm](http://www.fortran.com/metcalf.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-24T20:25:47.903

我来这里是为了寻找可靠的 Fortran 参考资料，但对之前的所有链接感到失望。我想要的不仅仅是一个教程或内在函数列表。我最终使用的是实际的标准文档，这些文档在 GNU GCC 网站上很方便：http: [//gcc.gnu.org/wiki/GFortranStandards](http://gcc.gnu.org/wiki/GFortranStandards)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-24T21:58:58.830

Fortran 95 语言功能：[http ://en.wikipedia.org/wiki/Fortran_95_language_features](http://en.wikipedia.org/wiki/Fortran_95_language_features)

# python - WSGI 身份验证：本土、Authkit、OpenID ......？

> ID：723856
> 
> 赞同：6
> 
> 时间：2009-04-07T01:23:45.987
> 
> 标签：python, authentication, wsgi

我想要一个非常小的站点的基本身份验证，我个人只需要一个超级用户。虽然在我的一个源文件中硬编码密码和用户名非常诱人，特别是因为我将网站托管在自己的服务器上，但我觉得我违反了互联网法律，我应该只使用数据库（我正在将 sqlite 用于博客文章等）。就时间和精力而言，使用 OpenID 或 AuthKit哪个是***最容易***设置的（repoze 让我感到害怕......对于我想要实现的目标来说，这感觉开销太大了），还是我应该自己动手？

我提出 OpenID 的原因是，它可能只是解决了我的垃圾邮件问题（我目前正在使用 Akismet），只要求所有评论者使用 OpenID 登录。我完全不知道如何将 OpenID 与我的 WSGI 应用程序集成（它可能非常简单，我还没有真正研究过它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-26T17:06:48.200

也看看 repose.who

[http://static.repoze.org/whodocs/](http://static.repoze.org/whodocs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T01:44:51.570

AuthKit 包含一个内置的 OpenID 模块，如果有帮助的话。

AuthKit 食谱在这里包含一个简单的示例... [http://wiki.pylonshq.com/display/authkitcookbook/OpenID+Passurl](http://wiki.pylonshq.com/display/authkitcookbook/OpenID+Passurl)

也就是说，如果您只需要一次登录（因此没有复杂的用户管理），为什么不使用 Apache 的内置身份验证功能（[AuthUserFile .htpasswd](http://httpd.apache.org/docs/2.0/mod/mod_auth.html#authuserfile)与[Require valid-user](http://httpd.apache.org/docs/2.0/mod/core.html#require)一起使用）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-19T16:43:04.797

Opid 是一个非常小且易于使用的 WSGI OpenID 应用程序：[python-opid](http://code.google.com/p/python-opid/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T01:51:22.740

You can adapt this.

[http://code.activestate.com/recipes/302378/](http://code.activestate.com/recipes/302378/)

Or, better, adapt this.

[http://devel.almad.net/trac/django-http-digest/](http://devel.almad.net/trac/django-http-digest/)

This is quite nice.

# database - 如何在 Visual Studio (Express) 中生成数据库模式图？

> ID：723860
> 
> 赞同：1
> 
> 时间：2009-04-07T01:25:43.877
> 
> 标签：database, visual-studio-express

现在我所做的只是使用数据集设计器并从数据库资源管理器中将表拖到其中。它可以工作（无论如何我都需要），但感觉就像是对数据集的滥用。（实际上我不确定如何使用数据集或预期用途是什么，我打算使用 LINQ2SQL 与数据库交互）

这个可以吗？我只需要它用于设计器视图，它是一个非常简单的数据库布局（只有 4 个表）。我确定那里还有其他工具，但是我应该使用 VS Express 中集成的任何东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T01:35:21.890

您可以使用 SQL Studio Management Studio Express 下载 MS SQL Express。只有在 Studio Express 中才能连接服务器、选择数据库、打开数据库图表和编辑图表。

然后，您可以将整组表拖放到 Linq to SQL 中。实体框架很好，但我还没有让它很好地呈现我的表格。我会坚持使用 Linq to SQL，直到他们发布对 EF 的另一个升级（对您来说更容易）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:37:30.027

你说它有效，而你只想制作一个图表，那么就去做吧。但是，您应该确保它不会构建生成的代码文件，因为它可能会导致您的最终产品膨胀。

如果您不打算将它用于代码并且它为您提供了足够的输出，那么如果它是“误用”又有什么关系呢？我认识使用 Excel 设计文档的人，因为这样更容易排列。我会使用 Word，这显然不是 Excel 声明的主要目的，但这是否意味着使用 Excel 是错误的？

# java - 使用套接字的服务器和客户端

> ID：723866
> 
> 赞同：0
> 
> 时间：2009-04-07T01:33:26.747
> 
> 标签：java, sockets

是否有任何使用套接字但具有发送和获取方法的服务器和客户端的示例？我正在做这个网络战舰程序，几乎完成了，但无法让服务器和客户端工作。我做了一个只发送字符串的聊天程序，但是这次我需要发送对象。我已经很沮丧了，所以有没有任何源代码已经有了这个。

这是客户端的代码...您将如何修改它以允许发送对象？我还需要监听传入的对象并立即处理它们。

```
import java.net.*;
import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SimpleChat extends JFrame {
  private Socket         communicationSocket   = null;
  private PrintWriter    outStream             = null;
  private BufferedReader inStream              = null;
  private Boolean        communicationContinue = true;
  private String         disconnectString      = "disconnect764*#$1";
  private JMenuItem      disconnectItem;
  private JTextField     displayLabel;
  private final Color    colorValues[]         = { Color.black, Color.blue, Color.red, Color.green };

  // set up GUI
  public SimpleChat() {
    super("Simple Chat");

    // set up File menu and its menu items
    JMenu fileMenu = new JMenu("File");
    fileMenu.setMnemonic('F');

    // set up Activate Server menu item
    JMenuItem serverItem = new JMenuItem("Activate Server");
    serverItem.setMnemonic('S');
    fileMenu.add(serverItem);
    serverItem.addActionListener(new ActionListener() { // anonymous inner class
                // display message dialog when user selects About...
                public void actionPerformed(ActionEvent event) {
                  setUpServer();
                }
              } // end anonymous inner class
              ); // end call to addActionListener

    // set up Activate Client menu item
    JMenuItem clientItem = new JMenuItem("Activate Client");
    clientItem.setMnemonic('C');
    fileMenu.add(clientItem);
    clientItem.addActionListener(new ActionListener() { // anonymous inner class
                // display message dialog when user selects About...
                public void actionPerformed(ActionEvent event) {
                  setUpClient();
                }
              } // end anonymous inner class
              ); // end call to addActionListener

    // set up Activate Client menu item
    disconnectItem = new JMenuItem("Disconnect Client/Server");
    disconnectItem.setMnemonic('D');
    disconnectItem.setEnabled(false);
    fileMenu.add(disconnectItem);
    disconnectItem.addActionListener(new ActionListener() { // anonymous inner
                    // class
                    // display message dialog when user selects About...
                    public void actionPerformed(ActionEvent event) {
                      disconnectClientServer(true);
                    }
                  } // end anonymous inner class
                  ); // end call to addActionListener

    // set up About... menu item
    JMenuItem aboutItem = new JMenuItem("About...");
    aboutItem.setMnemonic('A');
    fileMenu.add(aboutItem);
    aboutItem.addActionListener(new ActionListener() { // anonymous inner class
               // display message dialog when user selects About...
               public void actionPerformed(ActionEvent event) {
                 JOptionPane.showMessageDialog(SimpleChat.this, "This is an example\nof using menus", "About",
                                               JOptionPane.PLAIN_MESSAGE);
               }
             } // end anonymous inner class
             ); // end call to addActionListener

    // set up Exit menu item
    JMenuItem exitItem = new JMenuItem("Exit");
    exitItem.setMnemonic('x');
    fileMenu.add(exitItem);
    exitItem.addActionListener(new ActionListener() { // anonymous inner class
              // terminate application when user clicks exitItem
              public void actionPerformed(ActionEvent event) {
                disconnectClientServer(true);
                System.exit(0);
              }
            } // end anonymous inner class
            ); // end call to addActionListener

    // create menu bar and attach it to MenuTest window
    JMenuBar bar = new JMenuBar();
    setJMenuBar(bar);
    bar.add(fileMenu);

    // set up label to display text
    displayLabel = new JTextField("Sample Text", SwingConstants.CENTER);
    displayLabel.setForeground(colorValues[0]);
    displayLabel.setFont(new Font("Serif", Font.PLAIN, 72));
    displayLabel.addActionListener(new ActionListener() { // anonymous inner
                  // class
                  // display message dialog when user selects About...
                  public void actionPerformed(ActionEvent event) {
                    sendData();
                  }
                } // end anonymous inner class
                ); // end call to addActionListener

    getContentPane().setBackground(Color.CYAN);
    getContentPane().add(displayLabel, BorderLayout.CENTER);

    setSize(500, 200);
    setVisible(true);

  } // end constructor

  public static void main(String args[]) {
    final SimpleChat application = new SimpleChat();
    application.addWindowListener(new WindowAdapter() {
      public void windowClosing(WindowEvent e) {
        application.disconnectClientServer(true);
        System.exit(0);
      }
    });

    // application.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
  }

  public void setCommunicationSocket(Socket sock) {
    communicationSocket = sock;
    communicationContinue = true;
    disconnectItem.setEnabled(true);
  }

  public void setOutStream(PrintWriter out) {
    outStream = out;
  }

  public void setInStream(BufferedReader in) {
    inStream = in;
  }

  public void setUpServer() {
    ServerThread st = new ServerThread(this);
    st.start();
  }

  public void setUpClient() {
    ClientThread st = new ClientThread(this);
    st.start();
  }

  public void disconnectClientServer(Boolean sendMessage) {
    if (communicationSocket == null)
      return;

    try {
      // shut down socket read loop
      communicationContinue = false;
      disconnectItem.setEnabled(false);

      // send notification to other end of socket
      if (sendMessage == true)
        outStream.println(disconnectString);

      // sleep to let read loop shut down
      Thread t = Thread.currentThread();
      try {
        t.sleep(500);
      } catch (InterruptedException ie) {
        return;
      }

      outStream.close();
      inStream.close();
      communicationSocket.close();
    } catch (IOException e) {
      System.err.println("Stream Read Failed.");
      JOptionPane.showMessageDialog(SimpleChat.this, "Disconnection Failed", "SimpleChat", JOptionPane.PLAIN_MESSAGE);
      return;
    } finally {
      communicationSocket = null;
    }
  }

  public void sendData() {
    if (communicationSocket != null) {
      String data = displayLabel.getText();
      outStream.println(data);
    }
  }

  public void getData() {
    String inputLine;
    try {
      while (communicationContinue == true) {
        communicationSocket.setSoTimeout(100);
        // System.out.println ("Waiting for Connection");
        try {
          while (((inputLine = inStream.readLine()) != null)) {
            System.out.println("From socket: " + inputLine);
            if (inputLine.equals(disconnectString)) {
              disconnectClientServer(false);
              return;
            }
            displayLabel.setText(inputLine);
          }
        } catch (SocketTimeoutException ste) {
          // System.out.println ("Timeout Occurred");
        }
      } // end of while loop
      System.out.println("communication is false");
    } catch (IOException e) {
      System.err.println("Stream Read Failed.");
      JOptionPane.showMessageDialog(SimpleChat.this, "Input Stream read failed", "SimpleChat",
                                    JOptionPane.PLAIN_MESSAGE);
      return;
    }
  }
}

class ServerThread extends Thread {
  private SimpleChat sc;
  private JTextField display;

  public ServerThread(SimpleChat scParam) {
    sc = scParam;
  }

  public void run() {
    ServerSocket connectionSocket = null;

    try {
      connectionSocket = new ServerSocket(10007);
    } catch (IOException e) {
      System.err.println("Could not listen on port: 10007.");
      JOptionPane.showMessageDialog(sc, "Could not listen on port: 10007", "Server", JOptionPane.PLAIN_MESSAGE);
      return;
    }

    JOptionPane.showMessageDialog(sc, "Server Socket is now activated", "Server", JOptionPane.PLAIN_MESSAGE);

    Socket communicationSocket = null;

    try {
      communicationSocket = connectionSocket.accept();
    } catch (IOException e) {
      System.err.println("Accept failed.");
      JOptionPane.showMessageDialog(sc, "Accept failed", "Server", JOptionPane.PLAIN_MESSAGE);
      return;
    }

    JOptionPane.showMessageDialog(sc, "Comminucation is now activated", "Server", JOptionPane.PLAIN_MESSAGE);

    try {
      PrintWriter out = new PrintWriter(communicationSocket.getOutputStream(), true);
      BufferedReader in = new BufferedReader(new InputStreamReader(communicationSocket.getInputStream()));

      sc.setCommunicationSocket(communicationSocket);
      sc.setOutStream(out);
      sc.setInStream(in);

      connectionSocket.close();

      sc.getData();

    } catch (IOException e) {
      System.err.println("Accept failed.");
      JOptionPane.showMessageDialog(sc, "Creation of Input//Output Streams failed", "Server", JOptionPane.PLAIN_MESSAGE);
      return;
    }
  }
}

class ClientThread extends Thread {
  private SimpleChat sc;

  public ClientThread(SimpleChat scParam) {
    sc = scParam;
  }

  public void run() {
    Socket echoSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;
    String ipAddress = "127.0.0.1";

    try {
      echoSocket = new Socket(ipAddress, 10007);
      out = new PrintWriter(echoSocket.getOutputStream(), true);
      in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));
    } catch (UnknownHostException e) {
      System.err.println("Don't know about host: " + ipAddress);
      JOptionPane.showMessageDialog(sc, "Don't know about host: " + ipAddress, "Client", JOptionPane.PLAIN_MESSAGE);
      return;
    } catch (IOException e) {
      System.err.println("Couldn't get I/O for " + "the connection to: " + ipAddress);
      JOptionPane.showMessageDialog(sc, "Couldn't get I/O for the connection to: " + ipAddress, "Client",
                                    JOptionPane.PLAIN_MESSAGE);
      return;
    }
    JOptionPane.showMessageDialog(sc, "Comminucation is now activated", "Client", JOptionPane.PLAIN_MESSAGE);

    sc.setCommunicationSocket(echoSocket);
    sc.setOutStream(out);
    sc.setInStream(in);

    sc.getData();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T02:11:30.210

I suggest you read up on java serialization. There is an example [here](http://java.sun.com/developer/technicalArticles/Programming/serialization/). Basically, there is built in serialization support. Your class needs to implement **Serializable**. Then you use **ObjectOutputStream** and **ObjectInputStream** to write object.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T02:51:31.037

你在正确的轨道上。聊天程序是开始学习套接字的好地方。

您想要的是使用 ObjectOutputStream 和 ObjectInputStream 类。您只需使用这些过滤器包装您的输入流/输出流。ObjectOutputStream 有一个 writeObject() 方法，ObjectInputStream 有一个对应的 readObject() 方法。

大多数序列化示例显示了将对象读取和写入文件，但同样可以使用套接字流来完成。见[http://www.acm.org/crossroads/xrds4-2/serial.html](http://www.acm.org/crossroads/xrds4-2/serial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T01:36:24.647

建议您使用可以保护您免受容易出错的低级套接字编程的库。

对于 C++，请查看 Boost ( [http://www.boost.com](http://www.boost.com) ) 或 ACE ( [http://www.cs.wustl.edu/~schmidt/ACE.html](http://www.cs.wustl.edu/~schmidt/ACE.html) )

对于 Java，我只找到了一个关于接受器模式的文档[http://www.hillside.net/plop/plop99/proceedings/Fernandez3/RACPattern.PDF](http://www.hillside.net/plop/plop99/proceedings/Fernandez3/RACPattern.PDF) 但我确信某处有一个实现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T01:39:34.063

我没有费心去阅读你成堆的代码，但一般来说你不能直接通过网络发送对象。网络通信只是位和字节。如果要发送对象，则需要在发送端对其进行序列化，并在接收端对其进行反序列化。有大量的序列化方法，例如 JSON、XML，甚至 Java 的内置序列化支持（仅在客户端和服务器始终是 Java 时才推荐）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T05:23:13.340

您可能会发现此代码是创建自己的课程的一个不错的起点。这是我创建的两个类，用于抽象 TCP 和 UDP 套接字协议所需的工作：

[http://code.google.com/p/hivewars/source/browse/trunk/SocketData.java](http://code.google.com/p/hivewars/source/browse/trunk/SocketData.java) [http://code.google.com/p/hivewars/source/browse/trunk/UDPSocket.java](http://code.google.com/p/hivewars/source/browse/trunk/UDPSocket.java)

快速免责声明：这些是功能完整类的一种版本，我只是根据需要添加了功能。但是，它可以帮助您开始。

# delphi - 在代码编辑器中折叠 If-Then-Else 语句 (Delphi 2007)

> ID：723869
> 
> 赞同：1
> 
> 时间：2009-04-07T01:33:59.957
> 
> 标签：delphi, ide, plugins, folding

每隔一段时间，我都会编辑一些长的 if-then-else 语句（或者更糟糕的是，*嵌套*的 if-then-else 语句），例如：

```
 if A < B then 
  begin
    DoSomething; 
    DoSomethingElse;
    {...and more statements going on and on and on...}
    FinallyWrapUpThisBit;
  end 
  else 
  begin
    DoThis;
    DoThat;
    {...and more statements going on and on and on...}
    FinallyWrapUpThisBit;
  end; 
```

...而且我发现自己想要“折叠”第一个开始-结束对，以调出较低的“else”部分（通常是因为我指的是 if-then 语句之上的内容。也许它会这么说“开始...”并在其左侧添加 [+} 符号以再次展开。

我已经探索了 IDE 中的“折叠”功能，但似乎没有一个命令可以做到这一点。似乎我的旧 D6 的 CodeRush 做到了这一点，但我可以想象事情。（我的想象力很活跃……）。

像 Castalia（或其他一些）这样的任何 IDE 插件都可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T01:49:30.060

使用开箱即用的普通 Delphi，您将不得不围绕您的开始...结束

```
 {$region 'begin...end'}
  .... 
  {$endregion} 
```

这可以通过代码模板完成...

我记得 Castalia 对代码块进行了漂亮的彩色可视化（begin..end），但我不记得它是否可折叠。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-07T02:43:16.623

使用重构工具将条件分支的代码移动到单独的函数中。然后你就不需要折叠任何东西了。您可能还会发现您可以合并两个分支共有的代码，例如对`FinallyWrapUpThisBit`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-13T23:27:08.897

Another big helper here would be [CNPack](http://www.cnpack.org/index.php?lang=en). It is a wizard which installs into Delphi and will colorize your begin/end pairs, making it MUCH easier to follow the code. It doesn't exactly do code folding, for that you need to use the {$REGION} {$ENDREGION} tags.

# delphi - 确定另一个应用程序是否正忙

> ID：723876
> 
> 赞同：2
> 
> 时间：2009-04-07T01:37:57.327
> 
> 标签：delphi, console, delphi-7, redirect

如何检查另一个应用程序是否正忙？

我有一个将文本发送到控制台的程序。我将发送的文本包含#13 字符（例如`ls#13cd documents#13dir`）。换句话说，我想一次发送许多命令，控制台会一一处理。我正在逐个字符地发送文本。有时控制台只执行`ls`和`cd documents`. 我想这可能是因为即使控制台很忙，我的程序也会不断发送字符，在这种情况下，控制台不会接收到传入的字符。

这是我的代码：

```
procedure TForm1.SendTextToAppO(Str: String; AHandle: Integer);
var
  iWindow, iPoint, i: Integer;
  SPass: PChar;
  sList: TStringList;
begin
sList := TStringList.Create;
  ExtractStrings([#13],[' '],PChar(Str),sList);
  iWindow := AHandle;// AHandle is the handle of the console
  iPoint := ChildWindowFromPoint(iWindow, Point(50,50));
  for i:=0 to sList.Count-1 do begin
    SPass := PChar(sList[i]);
    try
      while(SPass^ <> #$00) do begin
      SendMessage(iPoint,WM_CHAR,Ord(SPass^),0);
      Inc(SPass);
      end;
      SendMessage(iPoint,WM_KEYDOWN,VK_RETURN,0);
    except
        // do nothing;
    end;
  end;
end; 
```

我正在使用德尔福 7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T01:45:50.180

如果我正确地解释了您的问题，您就是将文本发送到某种 shell/命令行解释器，并且您希望它执行您的命令。

通常命令行解释器会输出一个特定的提示符（如 Linux 系统上的 $ 或 DOS 下的 C:\），表明它们可以接受新命令。在发送另一个命令之前，您需要阅读输出以等待适当的提示。如果您不这样做，您发送的文本将被当前运行的命令用作输入（就像您所经历的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-07T03:48:59.307

洛塔尔走在正确的轨道上；你想要做的是，而不是使用 ShellExecute，使用 CreateProcess。环顾 Stack Overflow 和 Google 的“控制台重定向”——这会让你得到你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T03:37:28.367

我想我明白发生了什么，而不是我有解决办法：

您向控制台发送命令。在命令运行时，该程序将接收您发送的密钥。

# .net - 在 .net 应用程序中存储用户相关信息

> ID：723878
> 
> 赞同：1
> 
> 时间：2009-04-07T01:38:17.747
> 
> 标签：.net, registry, storage, config

为 .NET 应用程序存储用户级信息的首选方式是什么？

我可以使用注册表或配置文件——但有些用户没有足够的权限来保存/加载这些文件。

我听说过有关组装私人存储或类似的东西，这是一种方法吗？

我主要关心的是确保即使具有最低权限的用户也能够访问这个存储位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-07T01:42:43.463

[用户范围的应用程序设置](http://msdn.microsoft.com/en-us/library/ms171565.aspx)怎么样？（它们本地存储在每个用户的本地设置文件夹中。）您也可以[使用 VS 设计器创建设置文件](http://msdn.microsoft.com/en-us/library/wabtadw6.aspx)，它们非常易于维护。

MSDN 提供[了](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)更多关于应用程序设置体系结构的信息，该页面上还有很多链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:42:18.550

您可以使用 my.settings 。从 msdn检查此[页面。](http://msdn.microsoft.com/en-us/library/ms379611(VS.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T01:50:25.003

Most applications nowadays use some sort of database to store information. SQL Express and SQLLite can server this purpose.

# emacs - 如何在 Emacs 中强制执行最大行长度？

> ID：723881
> 
> 赞同：23
> 
> 时间：2009-04-07T01:39:14.813
> 
> 标签：emacs, lisp, code-formatting

在 Emacs 中，如何强制规定最大行长，例如 80 个字符？我希望它在我的代码中插入正确的换行符，就像`fill-paragraph`文本一样，如果可能的话，正确插入行的第二部分。

这里有一个小例子：

```
LongNameType<PrettyLong, AlsoLong> doSomethingWithLongFunctionName(int a, int b);
foo(); 
```

如果我真的这样做`fill-paragraph`，它会变成：

```
LongNameType<PrettyLong, AlsoLong>
doSomethingWithLongFunctionName(int a, int b); foo(); 
```

而我更喜欢这个：

```
LongNameType<PrettyLong, AlsoLong>
  doSomethingWithLongFunctionName(int a, int b);
foo(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-13T18:15:25.917

有[许多软件包](http://www.emacswiki.org/emacs/FindLongLines#toc5)会警告您行长限制。就个人而言，我使用[wide-column](http://homepages.cs.ncl.ac.uk/phillip.lord/download/emacs/wide-column.el)，它会根据当前列更改光标颜色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T13:10:28.113

fill-paragraph 和 auto-fill-mode 故意不包装代码。有太多的方法可以做到这一点，它可能会出错。他们会包装评论，但这对你没有帮助。

我曾经做过的唯一方法是明确地将我希望文本中断的位置。然后自动缩进应该把虚线放在正确的位置。

您是否正在尝试重排大量现有代码？或者尝试对您现在正在编写的代码进行自动填充工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T01:54:10.657

Not really an emacser, but what happens if you turn on [auto-fill-mode](http://www.emacswiki.org/emacs/AutoFillMode) while in [c++-mode](http://www.emacswiki.org/emacs/CPlusPlusMode)?

C++ mode should give you auto-indent, and auto-fill-mode gives you line-wrapping....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-07T02:07:22.280

I use [modeline-posn](http://www.emacswiki.org/emacs/modeline-posn.el) package. It highlights column number in the modeline if it's greater than specified value.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-17T00:52:48.010

您应该查看 Emacs 的许多“垂直线”库之一。有些库始终在整个缓冲区上保留一条垂直突出显示线（不是您真正想要的），但其他库始终将垂直突出显示放在固定列上，这并不是您真正想要的，但您可以立即看到当你应该换行时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T12:43:45.513

尝试

```
'(c-max-one-liner-length 80)

'(fill-column 80)
'(c-ignore-auto-fill (quote (string cpp))) 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-12T14:08:03.150

您可以使用更高级的[clang-format](https://github.com/sonatard/clang-format)包。

*   你必须安装 clang-fromat 以及它的 emacs 包。
*   将此添加到您的 .emacs`(setq clang-format-style "file")`或添加到`custom-set-variables` `'(clang-format-style "file")`.
*   生成您的模板样式，`clang-format -style=gnu -dump-config > .clang-format`然后将其放入项目的根目录中。
*   根据需要自定义 .clang-format 并更改`ColumnLimit: 120`为 80 或任何您想要的值。

这将使用 clang-format 工具强制列限制。

参考： [ClangFormatStyleOptions。](https://clang.llvm.org/docs/ClangFormatStyleOptions.html) [相关问题](https://emacs.stackexchange.com/questions/55635/how-can-i-set-up-clang-format-in-emacs)

# php - 使用 CodeIgniter 重定向

> ID：723883
> 
> 赞同：65
> 
> 时间：2009-04-07T01:39:34.843
> 
> 标签：php, codeigniter, redirect, urlhelper

谁能告诉我为什么我的重定向助手不能按我期望的方式工作？我正在尝试重定向到我的主控制器的 index 方法，但是`www.mysite.com/index/provider1/`当它应该路由到`www.mysite.com/provider1`. 这对任何人都有意义吗？我将配置中的索引页面设置为空白，尽管我认为这不是问题。有人对如何解决此问题有建议吗？提前致谢！

**控制器**：

```
if($provider == '') {
    redirect('/index/provider1/', 'location');
} 
```

**.htaccess**：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !^(index\.php|files|images|js|css|robots\.txt|favicon\.ico)

RewriteCond %{HTTP_HOST} ^mysite.com/ttnf/
RewriteRule (.*) http://www.mysite.com/ttnf/$1 [R=301,L]

RewriteBase /ttnf/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

php_flag display_errors On 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-04-07T11:27:08.050

# 重定向（）

### 网址助手

* * *

代码点火器中的重定向语句使用重定向头语句将用户发送到指定的网页。

该语句位于 URL 帮助程序中，该帮助程序以下列方式加载：

```
$this->load->helper('url'); 
```

重定向函数加载在函数调用的第一个参数中指定的本地 URI，并使用配置文件中指定的选项构建。

第二个参数允许开发者使用不同的 HTTP 命令来执行重定向“位置”或“刷新”。

根据 Code Igniter 文档：“定位速度更快，但在 Windows 服务器上有时可能会出现问题。”

例子：

```
if ($user_logged_in === FALSE)
{
     redirect('/account/login', 'refresh');
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-20T09:45:09.500

如果你的目录结构是这样的，

```
site
  application
         controller
                folder_1
                   first_controller.php
                   second_controller.php
                folder_2
                   first_controller.php
                   second_controller.php 
```

当您要将它重定向到您正在工作的同一控制器中时，只需编写以下代码。

```
 $this->load->helper('url');
    if ($some_value === FALSE/TRUE) //You may give 0/1 as well,its up to your logic
    {
         redirect('same_controller/method', 'refresh');
    } 
```

如果您想重定向到另一个控件，请使用以下代码。

```
$this->load->helper('url');
if ($some_value === FALSE/TRUE) //You may give 0/1 as well,its up to your logic
{
     redirect('folder_name/any_controller_name/method', 'refresh');
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-20T21:02:03.337

首先，您需要加载这种类型的 URL 帮助程序，或者您可以在 autoload.php 文件中上传：

```
$this->load->helper('url');

if (!$user_logged_in)
{
  redirect('/account/login', 'refresh');
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-28T07:19:42.500

如果您想重定向以前的位置或最后一个请求，那么您必须包含`user_agent`库：

```
$this->load->library('user_agent'); 
```

然后最后在您正在使用的函数中使用：

```
redirect($this->agent->referrer()); 
```

它为我工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-28T08:22:53.250

这是隐藏索引文件的 .htacess 文件

```
#RewriteEngine on
#RewriteCond $1 !^(index\.php|images|robots\.txt)
#RewriteRule ^(.*)$ /index.php/$1 [L]

<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /

        # Removes index.php from ExpressionEngine URLs
        RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
        RewriteCond %{REQUEST_URI} !/system/.* [NC]
        RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,NE,L]

        # Directs all EE web requests through the site index file
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

# java - Rhino：限制可以从 JavaScript 访问的 Java 包

> ID：723886
> 
> 赞同：12
> 
> 时间：2009-04-07T01:41:22.233
> 
> 标签：java, javascript, scripting, sandbox, rhino

当将 JavaScript 解释器 (Rhino) 嵌入到 Java 应用程序中（以便能够编写该应用程序的脚本）时，如何限制脚本可用的 Java 包？例如，应该只能访问“java.lang.*”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-07T01:48:45.943

[此处](http://codeutopia.net/blog/2009/01/02/sandboxing-rhino-in-java/)描述了在 Rhino 中阻止访问某些包和类（包括通过反射）的方法。重要的接口是[ClassShutter](http://www.mozilla.org/rhino/apidocs/org/mozilla/javascript/ClassShutter.html)，它为 Rhino 的 LiveConnect 支持提供访问控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-15T15:53:17.520

不如说：

爪哇=未定义；com = 未定义；包=未定义；

在首先加载的初始脚本中。

# javascript - 如何从 Google 的 Visualization API 生成的条形图中删除 x 轴？

> ID：723895
> 
> 赞同：32
> 
> 时间：2009-04-07T01:46:10.210
> 
> 标签：javascript, css, charts, google-visualization

参考此处显示的图表类型： [http ://code.google.com/apis/visualization/documentation/gallery/barchart.html](http://code.google.com/apis/visualization/documentation/gallery/barchart.html)

似乎没有一个简单的开关，并且将轴颜色更改为白色（在白色背景上）似乎没有做任何事情。我什至尝试使用 jquery 来隐藏 api 输出产生的选择器，但没有骰子。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-07T12:27:11.433

您可以设置`hAxis.textPosition`为 ' `none`'的值

例如：

```
var options = {

                hAxis: { textPosition: 'none' },
            };

chart.draw(data, options); 
```

请参阅[https://developers.google.com/chart/interactive/docs/gallery/barchart#Configuration_Options](https://developers.google.com/chart/interactive/docs/gallery/barchart#Configuration_Options)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-04T15:17:36.487

`let options = {legend: { position: 'none' }};`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-29T14:46:52.943

他们的 API 确实没有这个功能，但是：

```
chart.draw( data, 
    {
        width: 400, 
        height: 240, 
        is3D: true, 
        legend :'none',
        axisFontSize : 0
    }); 
```

将 axisFontSize 设置为 0 将删除您的 x 轴数据。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-13T04:08:54.277

通过删除数据表中的字符串，我能够删除图表材料版本中的标签。

前：

```
data.addColumn('string', 'Date'); 
```

后：

```
data.addColumn('string', ''); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-21T15:36:41.077

谷歌改变 API 的速度如此之快，这就是今天的工作方式：

```
chart.draw(daily, {
    hAxis : {textColor: '#ffffff'},
    *[... your other options here ...]*
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-21T05:24:47.037

axisFontSize : 0 将删除 x 轴和 y 轴数据

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-07-18T03:50:58.010

查看[http://code.google.com/apis/chart/docs/gallery/bar_charts.html#axis_label_styles](http://code.google.com/apis/chart/docs/gallery/bar_charts.html#axis_label_styles)

轴标签样式 chxs "axis_or_tick"

您会注意到此文档：“_ -（下划线）既不绘制轴线也不绘制刻度线。如果要隐藏轴线，请使用此值。”

示例：'chxs=0,,0,0,_'

# sqlite - 带有 VB6 错误的 SQLite3 ODBC 驱动程序

> ID：723906
> 
> 赞同：0
> 
> 时间：2009-04-07T01:52:00.367
> 
> 标签：sqlite, vb6, odbc

我在我的 VB6 应用程序中使用 SQLite ODBC 驱动程序（来自这里[http://www.ch-werner.de/sqliteodbc/ ）。](http://www.ch-werner.de/sqliteodbc/)就检索和保存数据而言，一切正常，但是，如果我尝试通过以下命令获取表列的列表：

```
pragma table_info (myTableName) 
```

ADO 调用失败并出现 2 个错误（在 Connection.Errors 属性中找到）

错误 #1：描述：“多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。” : 字符串 : cMisDataLayer.ExecuteRecordset

错误 #2：描述：“提供者不支持该属性。” : 字符串 : cMisDataLayer.ExecuteRecordset

我的问题是为什么我会收到此错误，是否有解决方法来获取 SQLite 中表的列列表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T03:53:05.583

虽然我没有使用过 SQLite ODBC，但我猜你可以做一个 ADOX 库——我猜它是用来从数据库中获取模式信息的。

此[页面](http://allenbrowne.com/func-ADOX.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T15:15:24.290

为什么不只使用 ADO RecordSet Fields 集合？只需执行 SELECT * FROM table WHERE 1=0。当 ADO 获得结果集时，它也会返回所有列信息。

```
Private Sub cmdTest_Click()

   Dim conTest As ADODB.Connection
   Dim cmdTest As ADODB.Command
   Dim rstResults As ADODB.Recordset
   Dim fldCurrent As ADODB.Field

   Set conTest = New ADODB.Connection
   conTest.ConnectionString = "whatever your connection string is"
   conTest.Open

   Set cmdTest = New ADODB.Command
   cmdTest.CommandType = adCmdText
   cmdTest.CommandTimeout = 30
   cmdTest.CommandText = "SELECT * FROM myTableName WHERE 1=0"

   cmdTest.ActiveConnection = conTest
   Set rstResults = cmdTest.Execute()

   For Each fldCurrent In rstResults.Fields

      Debug.Print fldCurrent.Name & " " & CStr(fldCurrent.Type)

   Next fldCurrent

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-04T16:25:27.763

检查您使用的是 Win32 还是 Win64 版本的 SQLite ODBC 驱动程序可能会有所帮助。

# .net - 用“A”作为前缀的抽象类，类似接口的前缀是“I”？

> ID：723911
> 
> 赞同：4
> 
> 时间：2009-04-07T01:53:01.580
> 
> 标签：.net, naming-conventions

在我看来，一眼就能看出一个类是抽象的而不是直接实例化的，就像能够轻松识别接口一样有用。

我的问题是，为什么“AFourLeggedAnimal : IAnimal”没有流行起来？是否仅仅是因为可能的混淆（我在写这篇文章时才注意到），例如将其混淆为“四足动物”而不是“抽象类 FourLeggedAnimal”？还是更多？

从学校的 Java 到工作的 C#，我发现“I”前缀命名约定在浏览类列表时非常有用，在我看来，能够区分具体和非具体是很方便的类一目了然，无需查看代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-07T02:00:17.103

使用 Joel 提到的后缀“Base”。一旦您的项目中有很多内容，就很容易区分：

```
public abstract AnimalBase
{
  public AnimalType AnimalType { get; set; }
}

public abstract HorseBase : AnimalBase
{
  public HoovesManufacturer HoovesManufacturer { get; set; }
}

public class Pony : HorseBase
{
  public Pony()
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-07T01:56:08.563

我更喜欢用“Base”作为后缀。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-07T01:57:35.643

因为，坦率地说，已经设置了命名抽象类的公认模式；-) 它带有“Base”后缀，如 MyControlBase 或 FooBase。

-Oisin

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-07T02:04:38.107

在 Java 中，许多“抽象”类都以“抽象”为前缀，例如 - AbstractList 等。

最后，为什么仅仅通过阅读它的名称就需要知道一个类是否是抽象的。在类名变得相当长之前，只有这么多细节可以塞进类名。

我个人发现接口的“I”前缀也很丑陋。我相信人们不应该尝试在类名中编码这些细节。我相信通过将实现细节与接口名称相结合，可以得出真正有意义但又短的名称。一个完美的例子是 Java 的 Map、HashMap 等，都非常具有描述性和简洁性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-10-27T15:18:36.330

I 前缀很难看，但不幸的是这是微软的惯例。在一个理想的世界里，我们都应该为接口编程。具体类会有一个后缀 Impl 或其他东西来将它们与接口或抽象类区分开来（我们不在乎，因为我们的 IoC 容器会为我们处理这些！）

例如，Book 将是一个接口或抽象类，这实际上并不重要。大多数时候，我们都会编写漂亮干净的名字。要使用的实际实现很容易从配置文件中插入。

但是很可惜，我们并不是生活在这样一个理想的世界里。

# visual-studio - Connect Visual Studio 2008 to Virtual PC 2007

> ID：723920
> 
> 赞同：1
> 
> 时间：2009-04-07T01:56:33.413
> 
> 标签：visual-studio

How do I go about connecting Visual Studio on my host machine to Window Server 2008 that is running in VPC? I basically want to be able to deploy ASP.Net apps to it as well as access the apps from the host machines browser.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T02:36:19.230

以完全相同的方式对待 VPC，就好像它是一台单独的物理机一样。

VS 和主机上的浏览器将简单地使用 HTTP 与 VPC 来宾上的 IIS/ASP.NET 实例进行通信。

# php - 哪种 Web 开发语言最适合 C 程序员？

> ID：723925
> 
> 赞同：3
> 
> 时间：2009-04-07T02:00:03.983
> 
> 标签：php, c

**问题**

我定期在 *n*x 环境中使用 C (ANSI C89/ISO C90) 进行编程。我现在处于学习 Web 开发语言对我有益的位置。特别是，我希望学习一种语言：

1.  ...利用我作为 C 程序员的背景。
2.  ...可以产生像 stackoverflow.com 这样的网站的交互性水平。

我听到很多关于 PHP 的好消息。你们还有其他建议吗？

**笔记**

1.  我熟悉的其他语言：Java、Perl、Tcsh 和 Scheme。
2.  我忘了提到我有兴趣学习一种能够在客户端做事的网络开发语言。如果不清楚，我很抱歉。
3.  我计划利用我对这门语言的了解来开发一个风格类似于 stackoverflow.com 的网站（当然，概念非常不同）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-07T02:10:34.893

如果您已经了解 C、Perl 和 Java，那么老实说您已经了解 PHP，只是您还不了解而已。有道理？也许不是。但一旦你开始玩它，它就会出现。

您没有说明您为什么要学习 Web 开发语言或它的用途。这是提供此类推荐的关键信息。在没有此类信息的情况下，我建议使用 PHP 有几个原因：

*   它以网络为中心；
*   它非常受欢迎。找到问题的答案非常容易；
*   它很容易学习（你已经知道 C、Perl 和 Java，但即使你不知道也很容易）
*   正如[Cal Henderson](http://en.wikipedia.org/wiki/Cal_Henderson)在他的主题演讲[“为什么我讨厌 Django”](http://www.youtube.com/watch?v=i6Fr65PFqfk)（在 DjangoCon 2008 上）中所说的那样，“PHP 是一门严肃的语言”。它为互联网上排名前 20 的网站中的 4 个提供支持（维基百科、Flickr、Facebook 和我忘记的另一个；
*   它与 Perl 并没有太大的不同，尽管 Perl 确实有一些不同的类型系统，并且正则表达式在 Perl 中更为一流。另外，PHP 没有 $_ 运算符，但尽管有很多相似之处；
*   作为一种动态脚本语言，它将帮助您摆脱强类型模式，这应该会带来一些改变和有用的体验；
*   尽管 PHP 支持对象（我赞同[PHP 不是面向对象](http://michaelkimsal.com/blog/php-is-not-object-oriented/)的观点），但大多数 PHP 都是以过程方式编写的，这使得 C 程序员更熟悉它；
*   它拥有极其丰富的库集；
*   只需要 Apache，它非常轻量级，因此与 Java 或 ASP.NET 托管相比，托管非常便宜；和
*   只需保存您的文本文件并在浏览器上单击重新加载以查看会发生什么，而不是单独的编译、构建和部署步骤，这是令人满意的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T02:04:32.053

PHP 的语法与 C 非常相似。但是，它有其不同之处，您无法管理指针和内存（至少，我不知道）。这也很容易。

PHP 是一种服务器端语言，因此浏览器与它没有任何关系。它们都将获得相同的 HTML/CSS 信息，并且存在不同之处。

如果你想拥有像这个网站这样的交互性，你应该看看 Javascript（以及它的框架（即：jQuery）。这种语言负责 web 开发中的客户端。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-07T02:34:34.523

我喜欢前面提到的所有选项。只是想补充一点，如果您已经了解 PERL，那么您可以使用它来制作您能想到的所有网站。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-07T02:43:46.483

这里的很多人都在谈论 PHP、.NET、java 等等。

但我要提出一个新的论点：

对于 Web，服务器端正迅速变得无关紧要，尤其是当您考虑您的标准（SO.COM 的交互性）时。您想学习 4 项核心技术。如果你认为你了解它们或者不用研究就能弄清楚它们，那你可能错了。标准已经发展了太久，如果你只是死记硬背地学习，就很容易对“事情应该如何做”一头雾水。

1) 现代标准 (x)HTML。了解 HTML/xHTML 4 中的内容和不存在的内容。认为您知道吗？你知道块级元素和内联元素的区别吗？你知道哪些元素被允许在哪些其他元素中？

2) CSS 2.1 或更高版本。我推荐 O'Reilly 的“CSS：权威指南”。了解内部和外部的 CSS 选择器。您将需要它们用于技术#4。您会惊讶于 CSS 可以完成的事情，您认为您只能使用 HTML 中的大量标签来完成。

3) Javascript。不，我不是在开玩笑。它不再是一种行不通的玩笑语言。有用。它运行着响应速度最快、互动性最强、最有趣的网站（Google Maps、SO.COM）。

4) 查询。它是如此的光荣，我发现自己甚至无法谈论它。也许评论者不会被它的光环所征服，并且能够呼吸它的名字。

由于所有真正令人印象深刻的东西，IMO，现在都在客户端，服务器端语言并不那么重要。我喜欢 .NET 的 LINQ 语法。起初我对此表示怀疑，但这些天我正在按加仑喝那种 Kool-aid。但是，如果您选择 PHP 或 RoR 或 Java 或其他什么，那很好。但这应该是次要决定。首先学习上面的 4 种技术——无论你在服务器上做什么，你都需要它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-07T02:09:09.467

您需要同时考虑语言和平台。我建议使用 C# 中的 ASP.NET MVC。语法将非常熟悉。MVC 是一个很好的模式，它支持内置的 jQuery，为您提供对 javascript 的良好跨浏览器支持。MVC 还为您提供了对生成的 HTML 的更多控制。事实上，它是 SO 所基于的平台。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-07T02:58:08.977

这取决于你想做的事情的复杂性。

正如几乎每张海报所提到的，PHP 非常适合服务器端 Web 开发，简单的东西很简单，复杂的东西处理得很好。PHP 语法类似于 C 并且在逻辑上是一致的——您几乎不需要参考优秀文档的语法部分。

然而 php 只是提供页面，你需要学习 HTML、CSS 和可能的一些 Javascript 才能放入这些页面。

我个人错误地认为 Javascript 只是另一种基本的脚本语言，错过了 JavaScript 可以带来几年的力量、优雅和可能性。您在 gmail 和 stackoverflow 等网站上看到的几乎所有交互式好东西都归结为 Javascript。

同样，这些网站上几乎所有“酷”的视觉呈现都归结为 CSS。

对于极其复杂的后端内容（特别是如果您需要在页面之间保持状态），您可能最好使用 Java 和各种框架（Tomcat 或 Jetty，加上带有 Freemarker 模板的 Spring，而 IBATIS 是我个人的获胜组合！）。这里的问题是有一个陡峭的学习曲线，如果你真的需要 Java 后端的强大功能，你只想去那里。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-07T02:46:15.917

如果你想在客户端工作，那么学习 Javascript 是必须的。它得到所有主流浏览器的良好支持，并且有多种丰富的框架可供使用（jQuery、dojo、ASP.net）。一些人仍在使用 Java 小程序，但总体而言，小程序非常缓慢。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T02:05:53.673

如果您决定使用 PHP，请保持理智并使用一个体面的框架。我强烈推荐 CakePHP，但我不想引发任何圣战。

您虽然提到了 Java 的经验 - 为什么不应用它呢？或者，作为 C 程序员，C# 和 .NET 怎么样？

世界是你的软体动物，朋友。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-07T02:31:16.857

有了 Perl 和 C 背景，我认为 PHP 会变得容易。了解框架之类的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-07T03:29:49.990

我是一个非常严格的 C 程序员。不是我的范围狭窄或害怕其他语言，而是我的工作需要的语言。我所做的大部分工作是虚拟化、云计算等的后端自动化。

有时，我必须组装某种 Web 前端来将所有内容联系在一起。当我这样做时，我真的很喜欢使用 PHP。事实上，我发现大多数使用具有强大 C 背景的 PHP 的人都可以非常高效和富有创造力。

这就是我喜欢 PHP 的原因，以及为什么带着良好的 C 知识来 PHP 很酷：

**PHP 很容易扩展。**虽然 PHP 确实带有一组非常丰富的库，但您经常会发现（至少我是这样）您需要它才能与其他一些库一起工作。libvirt 就是一个很好的例子。无需调用和抓取一堆 shell fork，您只需将 libvirt 中所需的函数转换为 PHP 函数即可。

**PHP 不会将 OO 概念强加给您**正如其他人所说，PHP 作为一种面向对象的语言做得很好。但是，它的语法不会向您*推送*OO 方法。换句话说，您的代码在程序上看起来不像是使用 OO 语言的人。它读起来很像 C。

**PHP 自我解释**如果您在 php.net 上的大量文档中找不到函数参考和示例，请获取 PHP 的源代码并自行查找。Zend 核心相当神秘，但扩展并不难阅读。

简而言之，直到你习惯了带有垃圾收集器的动态类型语言......你会觉得你在开车时没有系安全带。但是，我认为您会很快掌握它并对您的工作效率感到满意。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-07T03:35:37.420

如果您是一名优秀的 C 程序员，为什么不干脆继续用 C 编写代码呢？使用不同的编程语言是有正当理由的，但仅仅因为你要为网络编码并不是其中之一。使用 C 语言进行 Web 开发有两种流行的方式：

*   (F)CGI，数据在环境和命令行中传递
*   编写您自己的迷你网络服务器，它可以与端口 80 或更高的端口通信，并使用 mod_proxy 或 nginx

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-07T05:05:07.110

我与几位在 C 和/或 JAVA 之后学习 PHP 的同事一起工作。他们真的很高兴。如果你想成为一个 .net 人并且对那个环境有所了解，你会发现 C# 很熟悉，但对我来说，它充满了 l'art pour l'art 的东西。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-04-07T02:02:58.250

到目前为止，我会推荐 C#。其中的 OOP 非常棒，您可以轻松地很好地使用设计模式。它从头开始构建为 OOP。它也是一种 {} 语言。

# url - Example of a URI that isn't a URL?

> ID：723934
> 
> 赞同：43
> 
> 时间：2009-04-07T02:05:51.677
> 
> 标签：url, uri, web-standards

It's been explained to me numerous times that all URLs are URIs but not all URIs are URLs. Can anyone give an example of something that is a URI but is not a URL?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-07T02:14:59.250

Example stolen from [here](http://www.pierobon.org/iis/url.htm) (where there is also a description of the differences):

```
URL     http://www.pierobon.org/iis/review1.htm
URN     www.pierobon.org/iis/review1.htm#one
URI     http://www.pierobon.org/iis/review1.htm.html#one 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-07T02:10:37.903

urn:isbn:0451450523

[http://en.wikipedia.org/wiki/Uniform_Resource_Name](http://en.wikipedia.org/wiki/Uniform_Resource_Name)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-07T02:07:02.717

> A Uniform Resource Name (URN) is a URI that identifies a resource by name in a particular namespace. A URN can be used to talk about a resource without implying its location or how to access it. For example, the URN urn:isbn:0-395-36341-1 is a URI

From: Wikipedia: [http://en.wikipedia.org/wiki/Uniform_Resource_Identifier](http://en.wikipedia.org/wiki/Uniform_Resource_Identifier)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-07T03:28:13.957

XML Schema 通常用 URI 标识，虽然它们的格式可能类似，但不能保证那里有任何东西，因为它不是 URL。

如果您必须验证 XML 文件，则必须能够识别正确的 XML 模式。在成功验证意味着任何有用之前，必须在内容和模式作者之间共享一种标识方法。URI 可以很好地满足这一需求。请记住，使用 XML 文件不一定需要模式。因此，它不需要是通用的可定位或可用的，它只需要是可识别的。URI 的语义避免了资源必须位于“此处”的暗示，就像 URL 的情况一样，并且有充分的理由。这样的细节与识别任务无关。

Schema 发布者通常会基于他们拥有的 URL 建立 URI。我可以想象这样做有很多原因，但其中一个原因是，它有助于避免在没有中介的情况下发生命名冲突。当使用这样的约定时，很难拒绝将定义托管在 URI 指向的位置（如果它位于 URL 的位置）。虽然通过了解手段是必要的，但我相信这样做标志着一项值得赞赏的努力，并且是良好信息架构的一个示例，但这一事实与 URI 满足的需求无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-21T21:09:39.250

> 既不是 URL 也不是 URN 的 URI 的示例是数据 URI，例如： data:,Hello%20World 它既不是 URL 也不是 URN，因为 URI 包含数据。它既没有命名它，也没有告诉您如何通过网络找到它。

取自这里：[https ://webmasters.stackexchange.com/questions/19101/what-is-the-difference-between-a-uri-and-a-url](https://webmasters.stackexchange.com/questions/19101/what-is-the-difference-between-a-uri-and-a-url)

我相信 TofuBeer 的答案（迄今为止投票最多）是错误的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-07T02:08:57.923

A common case would be a [URN](http://en.wikipedia.org/wiki/Uniform_Resource_Name), which is a URI of the format `urn:namespace-id:resource-id`. Per Wikipedia:

> Defined in 1997 in RFC 2141, URNs were intended to serve as persistent, location-independent identifiers, allowing the simple mapping of namespaces into a single URN namespace. The existence of such a URI does not imply availability of the identified resource, but such URIs are required to remain globally unique and persistent, even when the resource ceases to exist or becomes unavailable.

Both styles of resource reference (URL and URN) were later combined under the concept of the [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier), but they remain recognized as serving distinct purposes (emphasis mine):

> A Uniform Resource Name (URN) can be compared to a person's name, while a Uniform Resource Locator (URL) can be compared to their street address. In other words, a **URN identifies** an item and a **URL provides a method for finding** it.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-30T15:07:48.387

为了测试在我的单元测试中失败的异常（涵盖 Java 中的 URI ←→ URL 转换），我使用以下示例：

*   `"_ "`— 无效`URI`自`String`
*   `"data://valid-uri"`— 有效`URI`，但无效，格式错误`URL`（`MalformedURLException`从 抛出`URI#toURL`）。
*   `"valid-uri"`— 有效`URI`，但无效，非绝对`URL`（`IllegalArgumentException`从 抛出`URI#toURL`）。
*   `"http:// _"`— 有效`URL`，但无效，格式错误`URI`（`URISyntaxException`从 抛出`URL#toURI`）。

它可能不是 RFC 规范的完美答案，但这些是 Java 的工作示例。

# c# - 如何以强类型的方式动态获取特定方法的名称？

> ID：723936
> 
> 赞同：3
> 
> 时间：2009-04-07T02:06:37.010
> 
> 标签：c#, vb.net, reflection

我有点不确定如何说出这个问题的标题，但我正在寻找 VB.NET（或 C#，但目前使用 VB.NET）中最短/最简单的方法来获取方法的字符串值动态给定方法调用的名称。

例如，我有一个这样的类：

```
Public Class Blah
    Public Sub Foo()
    End Sub
End Class 
```

现在 Foo 是动态设置的强类型覆盖，并且我有一个事件处理程序，它将在设置更改时触发并返回更改设置的字符串名称。

我希望能够在这个字符串上切换/选择，并有一个基于 Foo() 方法的案例。为此，我需要能够从方法调用本身获取 Foo 方法的字符串名称（即不知何故 GetMethodName(blahInstance.Foo())）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T02:23:23.053

我目前没有 VB.NET，但在 C# 中，我认为这就是答案。这看起来是否像您正在寻找的一样？如果是这样，VB.NET 的语法应该比较容易解决：

```
 Blah blahInstance = new Blah();
     System.Action fooFunc = blahInstance.Foo;
     Console.WriteLine(fooFunc.Method.Name); 
```

# php - 什么时候最推荐使用 mysql_real_escape_string()

> ID：723945
> 
> 赞同：3
> 
> 时间：2009-04-07T02:10:19.230
> 
> 标签：php, mysql, security

我实际上是使用此功能的新手..并且在找到它之前正在使用 preg_replace 和添加斜杠。

我很好奇，因为我即将在我的第一个大型应用程序中通过并加强发布区域的安全性，并想知道此功能有效的最佳实例，强烈推荐。我已经看到此功能在几种不同的情况下应用，而不仅仅是在发布用户输入之前......而是在一般情况下完成查询时，所以我真的很好奇它的全部可能性，以及如何实现它的全部有效性。

此外，任何可靠的安全方法和一般建议都将不胜感激。

大家干杯！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-07T02:18:53.283

理想情况下，您*永远不*应该使用它，因为[参数化查询](http://en.wikipedia.org/wiki/SQL_injection#Using_Parameterized_Statements)（通过[PDO](http://php.net/manual/en/pdo.prepare.php)或[mysqli](http://php.net/manual/en/mysqli-stmt.prepare.php)）是防止 SQL 注入的正确方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T02:19:10.457

您可能应该使用带有绑定参数的[mysqli_real_escape_string](http://ca.php.net/mysqli_real_escape_string)或[PDO 。](http://ca.php.net/pdo)它们的主要用途是转义单引号和双引号等字符。这一般是为了防止[SQL 注入](http://phpsec.org/projects/guide/3.html#3.2)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T02:19:35.993

最推荐使用 mysql_real_escape_string() 的时间：每当您将数据放入数据库时​​。如果您将来自任何地方的输入（来自网页、来自数据库、来自 Web 服务）视为您必须防御和过滤问题的恶意攻击，那么您不会出错

在最初的几次努力中，然后使用一个框架（我使用 ZendFramework），或者至少是其中的一部分，比如 Zend_DB，让你自己更轻松。

对于一个可靠的安全方法 - 一个不能被闯入的服务器：

1.  断开机器与网络的连接
2.  断开机器电源
3.  将机器放入保险箱
4.  把它扔进马里亚纳海沟
5.  派个警卫。

注意：此时不能保证它的有用性。虽然它非常安全。不是 100%，但尽可能好。

并不断了解安全性和最佳实践。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-07T02:21:15.087

请参阅不久前对类似问题的回复。

基本上，安全性不仅仅是避免 SQL 注入攻击。此外，每当您对包含任何类型的动态数据的数据库运行查询时，都存在 sql 注入的危险。最后，使用 PDO 库的 Prepared Statements 比使用 mysql_real_escape_string() 更好。

1) [strip_tags() 和 mysqli_real_escape_string() 的安全性](https://stackoverflow.com/questions/585358/security-of-striptags-and-mysqlirealescapestring/585568#585568)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-07T03:17:38.570

```
mysql_real_escape_string(magic_quotes_gpc() ? strip_slashes($variable) : $variable) 
```

如果你坚持不使用 mysqli 或 PDO，那么总是。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-07T02:12:51.097

几乎任何时候，数据中都可能存在可能会弄乱查询的字符，尤其是引号和单引号。有一些扩展字符依赖于您当前的 MySQL 字符编码也可以做到这一点，这就是为什么您要在 mysql 中使用扩展字符而不是 addlashes()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-07T02:26:45.620

最好的办法是将内容解析为数据，而不是代码（永远不要执行代码）。例如，JSON (Javascript) 是一种在客户端从服务器组装数据的非常简单的方法，但您永远不应该执行它。您应该使用正则表达式解析数据以确认它是正确的并且只包含数据。

也就是说，当您接受 html 中的表单数据时，通常会发生 SQL 注入。关键是检查导致问题的 SQL 保留字，即 '; （单引号，分号。）您可以轻松地创建保留字列表并通过 RegEx 表达式运行它们（jQuery 可能在服务器上有一些不错的东西或 C#。）我相信 PHP 也可以轻松地做到这一点。CRUD（创建检索更新和删除）动词很容易寻找，但不要忘记已经存在的服务器端 SQL 存储过程，或者更糟的是执行 sql 语句（动态 sql）。如果您也不需要在网页之外使用它们，您可以对“转义”字符进行 url 编码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T07:14:09.593

我在哪里使用它：我在我的站点中使用一个数据库层，该层遍历所有查询输入并转义它。这样，未发送到数据库的输入不会被转义，但是在发送发送到数据库时所做的一切都会被转义。在数据库之间传输时，它还允许更大的灵活性。所以我建议的经验法则 - 将所有 mysql 函数与数据库包装器一起使用。它使它们在正确的时间使用，并且您的应用在切换时不会崩溃

# iphone - Objective-C：为什么在导入头文件时会出现编译错误？

> ID：723950
> 
> 赞同：0
> 
> 时间：2009-04-07T02:12:30.303
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

我很好奇只是导入头文件而导致编译器错误的一些原因。如果我将其注释掉，一切都编译得很好——我试图导入到我的 UIViewController 之一的类的标头/实现通过编译器而没有任何警告。然而，一旦我包含它，我就会得到很多错误。

我正在尝试在自己的代码中使用 Apple 的 Reachability 应用程序，并执行以下操作：

```
#import "Reachability.h" 
```

我得到了很多：

```
error: syntax error before 'target'
error: syntax error before 'SCNetworkReachabilityFlags'
error: syntax error before 'SCNetworkReachabilityRef'
error: syntax error before 'SCNetworkReachabilityRef'
fatal error: method definition not in @implementation context 
```

它主要抱怨：

```
static void ReachabilityCallback(SCNetworkReachabilityRef target,       SCNetworkReachabilityFlags flags, void *info);
- (BOOL)isNetworkAvailableFlags:(SCNetworkReachabilityFlags *)outFlags;
- (SCNetworkReachabilityRef)reachabilityRefForHostName:(NSString *)hostName;
- (CFRunLoopRef)startListeningForReachabilityChanges:(SCNetworkReachabilityRef)reachability onRunLoop:(CFRunLoopRef)runLoop; 
```

知道为什么只有在我尝试导入头文件时才会发生这种情况吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-07T02:19:45.433

听起来你可能需要

```
#import <SystemConfiguration/SystemConfiguration.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T02:29:12.710

该错误几乎总是由错误词之前的词的未定义引起的（在这种情况下，为`SCNetworkReachabilityRef`before `target`）。

因此，您还没有定义`SCNetworkReachabilityRef`（看起来）所有其他`"SC..."`类型。

我不确定其中`SystemConfiguration.h` *是否*包含`Reachability.h`（如果您使用的是[此处](http://iphone.svn.wordpress.org/trunk/Classes/Reachability.m)的示例代码）。

该代码包括`SystemConfiguration/SCNetworkReachability.h` *和* `Reachability.h`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T14:38:15.700

在 iPhone 上，Apple 的 Reachability 1.5 版本包括

```
#import <SystemConfiguration/SystemConfiguration.h> 
```

但您需要在您的应用程序中导入 SystemConfiguration 框架。你可以在那里 /System/Library/Frameworks/SystemConfiguration.framework

# asp.net - IIS 或 ASP.NET 是否进行任何类型的连接限制？

> ID：723960
> 
> 赞同：0
> 
> 时间：2009-04-07T02:20:42.683
> 
> 标签：asp.net, iis, asynchronous, ocracoke

我正在尝试创建一个 ASP.NET Web 服务，我可以使用它来展示异步实现 Web 方法与同步实现 Web 方法之间的区别。这是一种概念验证，我可以用它来展示异步编写内容如何使应用程序更具可扩展性。为了进行比较，我实现了两个方法， RunSqlSync 和 RunSqlAsync 。像这样：

```
[WebMethod]
public int RunSqlSync(string sql)
{
    // call SQL synchronously
}

[WebMethod]
public IAsyncResult BeginRunSqlAsync(string sql, AsyncCallback callback, object state)
{
    // call SQL asynchronously
}

[WebMethod]
public int EndRunSqlAsync(IAsyncResult result)
{

} 
```

我希望我能够通过使用方法的异步版本来处理更多并发请求，尤其是在 SQL 调用需要一段时间才能完成的情况下。不幸的是，对于这两种方法，我似乎都达到了请求/秒的限制（该限制取决于 SQL 调用的延迟），而且我什至没有接近最大化我的 CPU。当我增加发送到 Web 服务的请求数量（通过增加在我的 Ocracoke 负载测试中使用的用户数量）时，平均响应时间只会增加，而不会改变实际的 TPS 吞吐量。我在内部对 Web 服务进行了检测，以测量完成请求所需的时间，并且在我的代码中，无论负载如何，每个单独的请求都在同一时间处理。这让我觉得 ASP.NET 在某种程度上是在节流。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T02:25:29.880

您可以在 .net sql 连接字符串调用中设置最大池大小。我相信默认设置是最多 20 个连接，所以如果你点击它，那么它只会允许使用这些连接，并且基本上你会得到相同的结果。这是一篇关于连接池的文章。

[http://www.15seconds.com/Issue/040830.htm](http://www.15seconds.com/Issue/040830.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T02:46:23.060

就像 schwig 说的那样，您可能没有遇到带宽限制，您的进程中的工作线程可能已经用完了。这是您应该从 MS 中阅读的章节，我发现它很有启发性：

[http://msdn.microsoft.com/en-us/library/ms998549.aspx](http://msdn.microsoft.com/en-us/library/ms998549.aspx)

# java - 如何解决创建大于 64K 的静态块的 WSDL2Java？

> ID：723966
> 
> 赞同：0
> 
> 时间：2009-04-07T02:24:20.383
> 
> 标签：java, web-services, soap, axis, wsdl2java

我们目前正在使用供应商提供的非常大的 WSDL 模式。绑定样式为 RPC。据我所知，Axis 1.x 是唯一支持 RPC WSDL 定义的 Java 工具。如果我错了，请纠正我。

WSDL2Java 生成一个***服务名称*Skeleton.java**文件，该文件有一个大小为 1.3Mb 的静态初始化块 - 远大于 Java 的 64K 限制。

**鉴于我们无法更改接口的定义，您认为我们应该如何进行？**

在我看来，我们的选择是：

*   分解生成的静态块
*   分解 WSDL（不确定在不改变接口的情况下是否可行）
*   修补 Axis WSDL2Java 代码

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T05:36:50.780

如果您的 wsdl 可能会经常更改，那么可能值得修补 wsdl2java 代码，否则我会选择第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T06:14:07.007

请参阅这篇[文章](http://wso2.org/library/knowledge-base/convert-rpc-encoded-wsdl-document-literal-wrapped-wsdl)，它提供了一些关于如何将 RPC WSDL 转换为文档的说明。我建议先尝试一下。

此外，您可能有一个 RPC/编码的 WSDL（顺便说一下，它不符合 WS-I）。JAXWS 仅支持 RPC/literal。所以任何框架（如 CXF 或 Axis2）都会支持它。因此，您也可以尝试将 WSDL 转换为 RPC/literal。

CXF 有一个[工具](http://cwiki.apache.org/CXF20DOC/wsdl-to-soap.html)可以为您完成这项工作。

无论如何，我建议尝试将 WSDL 转换为更新的形式。对于服务器和客户端实现，这将使您的生活更轻松。我认为这不值得与 Axis1 战斗。甚至手动编写和解析 SOAP 消息也会更容易。

# cocoa - 用于创建 OS X 小部件的 OpenGL 或 QuartzComposer

> ID：723968
> 
> 赞同：1
> 
> 时间：2009-04-07T02:25:05.530
> 
> 标签：cocoa, user-interface, user-experience, quartz-composer

我正在观看[http://www.youtube.com/watch?v=XiqgmAYrd3c](http://www.youtube.com/watch?v=XiqgmAYrd3c)并认为创建一些与 NSView/UIView 系统兼容的小部件可能会很有趣，这些小部件具有视频中的一些交互。其中一些涉及一些流畅的 3-D 动画。有没有人尝试过使用 OpenGL 或 Quartz Composer 来创建类似于该视频中的小部件？有谁知道在 Quartz Composer 中是否有可能而不是下降到 OpenGL 级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T02:58:47.787

您可能希望使用[Core Animation](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)来制作这些类型的小部件。Core Animation 使用 OpenGL 进行加速，但与较低级别的 OpenGL 相比，它更适合为许多 2D 图层设置动画并与更多标准的小部件和事件进行交互。Quartz Composer 适合做某些类型的装饰动画，但这是它的主要目的，而不是构建 UI。Core Animation 还有一个优势，就是如果你想做低级的图形，或者集成 Quartz Composer 动画，你可以把它们中的任何一个放到一个 CALayer 中，从而获得所有系统的优势。有关详细信息，请参阅[QCCompositionLayer](http://developer.apple.com/DOCUMENTATION/GraphicsImaging/Reference/QCCompositionLayer_class/Introduction/Introduction.html#//apple_ref/occ/cl/QCCompositionLayer)和[CAOpenGLLayer](http://developer.apple.com/DOCUMENTATION/GraphicsImaging/Reference/CAOpenGLLayer_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAOpenGLLayer)。

要了解一些 Core Animation 可以做什么，您应该观看[Steve Jobs 的主题演讲介绍 Core Animation](http://www.youtube.com/watch?v=pyd8O-2mkgk)。

# backup - 通过 WHM 备份 - 具体设置时间表？

> ID：723971
> 
> 赞同：1
> 
> 时间：2009-04-07T02:29:01.073
> 
> 标签：backup, whm

我们有通过 WHM 运行到 FTP 服务器的备份——我看到我们可以设置每天、每周、每月——但是我们可以指定一天中的什么时间进行备份，这样它就不会干扰其他繁重的服务器负载任务？

查看备份完成后收到的电子邮件，它似乎是在各种随机时间进行的。

另外 - 有没有办法改变运行备份的优先级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-11-13T12:49:05.333

在左侧菜单 > 管理插件区域的 WHM > cPanel 部分中，您会发现其中列出了一个名为 cronconfig。勾选“安装并保持更新”框，然后滚动到底部并单击保存。

然后刷新您的网页并滚动到插件下的“配置 cPanel Cron 时间”，您可以在那里更改备份时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:15:39.387

尽管 cPanel 不提供任何直接控制，但我相信您应该能够通过更改 /wsbackup/cpbackup/monthly 的时间戳来更改执行备份的日期。当目录超过 29 天时，cPanel 将执行备份。

我正在努力弄清楚如何指定实际的一天。

乔什

# c++ - 初始化列表是否总是在构造函数代码之前处理？

> ID：723973
> 
> 赞同：18
> 
> 时间：2009-04-07T02:29:30.790
> 
> 标签：c++, constructor, initialization

初始化列表是否总是在构造函数代码之前处理？

换句话说，以下代码是否总是 print `<unknown>`，并且构造的类将具有“已知”作为值`source_`（如果全局变量`something`是`true`）？

```
class Foo {
  std::string source_;
public:
  Foo() : source_("<unknown>") {
    std::cout << source_ << std::endl;
    if(something){
      source_ = "known";
    }
  }
}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-07T02:30:46.357

是的，它会按照`C++11: 12.6.2 /10`（中的相同部分`C++14`，`15.6.2 /13`中`C++17`）：

* * *

在非委托构造函数中，初始化按以下顺序进行（我的粗体）：

*   首先，并且仅对于最派生类（1.8）的构造函数，虚拟基类按照它们出现在基类的有向无环图的深度优先从左到右遍历的顺序进行初始化，其中“左- to-right”是派生类base-specifier-list中基类的出现顺序。

*   然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。

*   然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。

*   ***最后，***执行构造函数主体的复合语句。

* * *

使用 init-lists 的主要原因是帮助编译器进行优化。非基本类型（即类对象而不是 , 等）的初始化列表`int`通常`float`可以就地构建。

如果创建对象然后在构造函数中赋值给它，这通常会导致临时对象的创建和销毁，这是低效的。

初始化列表可以避免这种情况（当然，如果编译器可以做到，但大多数都应该这样做）。

以下完整程序将输出 7 ，但这是针对特定编译器（CygWin g++）的，因此与原始问题中的示例相比，它不能保证该行为。

但是，根据上面第一段中的引用，该标准*确实*保证了这一点。

```
#include <iostream>
class Foo {
    int x;
    public:
        Foo(): x(7) {
            std::cout << x << std::endl;
        }
};
int main (void) {
    Foo foo;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-07T02:31:16.450

是的，C++ 在调用构造函数代码之前构造所有成员。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-07T06:05:04.627

正如已经回答的那样，初始化列表在进入构造函数块*之前完全执行。*所以在构造函数体中使用（初始化的）成员是完全安全的。

您在接受的答案中发表了关于必须*引用构造函数参数而不是*构造函数块内的成员变量的评论。你没有。

您可能误认为您*应该*引用参数而不是初始化列表中的*成员属性。*例如，给定一个具有两个 int 类型成员（a_ 和 b_）的类 X，以下构造函数可能定义不正确：

```
 X::X( int a ) : a_( a ), b( a_*2 ) {} 
```

这里可能的问题是初始化列表中元素的构造取决于类中声明的顺序，而不是您键入初始化列表的顺序。如果类被定义为：

```
class X
{
public:
   X( int a );
private:
   int b_;
   int a_; 
}; 
```

然后，无论您如何键入初始化列表，事实是 b_( a_*2 ) 将在 a_ 初始化*之前*执行，因为成员的声明首先是 b_，然后是 a_。这将产生一个错误，因为您的代码认为（并且可能取决于）b_ 是 a_ 值的两倍，实际上 b_ 包含垃圾。最简单的解决方案是不引用成员：

```
 X::X( int a ) : a_( a ), b( a*2 ) {} // correct regardless of how X is declared 
```

避免这个陷阱是建议您不要将成员属性用作其他成员初始化的一部分的原因。

# c++ - 我需要使用参考参数来返回值吗？

> ID：723975
> 
> 赞同：1
> 
> 时间：2009-04-07T02:31:00.350
> 
> 标签：c++, winapi, api

如果 HANDLE 是一个输出参数，是需要使用 HANDLE 的引用还是直接使用 HANDLE？

```
bool fn(HANDLE h_result); 
```

或者

```
bool fn(HANDLE&　h_result); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-07T02:34:47.317

要返回值，您可以：

1.  使用引用作为参数
2.  使用指针作为参数
3.  实际上通过返回值`return`

当您指定以下内容时：

```
bool fn(HANDLE h_result); 
```

您正在制作 h_result 的副本。所以如果你在你的函数中改变它，你改变的是副本，而不是原始的。

在处理指针时，概念完全相同。请记住，指针只是一个保存内存地址的变量。该内存地址中的内容无关紧要。如果要通过参数返回内存地址，则需要使用指向指针或指针引用的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T07:52:57.893

在你的情况下，我宁愿做这样的事情：

```
HANDLE fn() 
```

并在失败的情况下返回无效（或 NULL）句柄，否则返回有效句柄。当然，我假设 HANDLE 类型在某种程度上类似于 Win32 API 用作句柄的类型。

至于您的问题，请通过引用或指针传递输出参数，因此：

```
bool fn( HANDLE& out) 
```

或者

```
bool fn( HANDLE* out) 
```

在第二个示例中，您应该确保传递的指针不为 NULL，通常带有断言：

```
bool fn( HANDLE* out)
{
   assert( NULL != out);
   // ... rest of the code
} 
```

将输出参数作为指针传递的另一个缺点是您无法确定传递的指针是否有效（是否已初始化）。

当涉及到输出参数时，通过引用传递有时可读性较差。打电话

布尔结果 = fn(myHandle);

并没有给开发者提示myHandle是一个输出参数，由于代码可读性可能会出现一些细微的问题。

总之，我建议尽可能避免输出参数，因为代码可读性，但是，如果你真的别无选择，如果输出参数是强制性的，请使用引用而不是指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T08:14:48.777

HANDLE 基本上是一个 void*，仅此而已。将有问题的代码更改为

```
bool fn(void* pResult); 
```

答案会更清楚。如果您希望分配给 pResult 的值可供调用 fn 的人使用，则必须将函数更改为

```
bool fn(void*& pResult); 
```

这相当于

```
bool fn(HANDLE&　h_result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T03:46:13.447

如果您直接使用“HANDLE”，您在函数调用中所做的任何更改都不会传递给调用者的对象。

例如对于“bool fn(HANDLE h_result);”

```
HANDLE oH = CreateHandle(); // Some function
oH.SetName("Sam");
bool bRet = fn(oH);   // Assume we call oH.SetName("Max");
cout << oH.GetName() << endl;  //will print "Sam" 
```

但是如果你使用“bool fn(HANDLE& h_result);” 输出将是“最大”

所以选择将取决于应用程序。如果您需要维护在“fn”中所做的状态更改，请将参数作为引用传递。如果没有，请使用“bool fn(HANDLE h_result);”传递一个副本

PS“bool fn（HANDLE h_result）”处理起来会很繁重，因为对复制构造函数有很多调用

# c# - 在 ASP.NET 中使用 ItemTemplate 参数执行方法

> ID：723981
> 
> 赞同：2
> 
> 时间：2009-04-07T02:35:40.807
> 
> 标签：c#, .net, asp.net, eval

我需要`ItemTemplate`在我的`DataList`. 如何格式化页面中的方法以正确使用`Eval`?

该方法接受一个`int`作为参数。

```
<%# NumberOfEmplyeeOrders(Int32.Parse("EmployeeID"))%> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-07T02:39:04.747

`<%# NumberOfEmplyeeOrders((Int32)Eval("EmployeeID")) %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T02:47:50.217

我的演员表中有语法错误。这是正确的代码：

```
<%#NumberOfEmplyeeOrders((Int32)(Eval("EmployeeID"))) %> 
```

# python - 将信息从我的 wx.Process 传播回我的主线程的最佳方式是什么？

> ID：723984
> 
> 赞同：0
> 
> 时间：2009-04-07T02:38:47.447
> 
> 标签：python, multithreading, events, process, wxpython

我正在尝试子类`wx.Process`化，以便我有一个自定义的进程启动器，它使用从标准输出流收集的数据将事件触发回主线程。这是做事的好方法吗？

```
class BuildProcess(wx.Process):
    def __init__(self, cmd, notify=None):
       wx.Process.__init__(self, notify)
       print "Constructing a build process"
       self.Bind(wx.EVT_IDLE, self.on_idle)
       self.Redirect()
       self.cmd = cmd
       self.pid = None

   def start(self):
       print "Starting the process"
       self.pid = wx.Execute(self.cmd, wx.EXEC_ASYNC, self)
       print "Started."

   def on_idle(self, evt):
       print "doing the idle thing..."
       stream = self.GetInputStream()
       if stream.CanRead():
          text = stream.read()
          wx.PostEvent(self, BuildEvent(EVT_BUILD_UPDATE, self, data=text))
          print text

   def OnTerminate(self, *args, **kwargs):
       wx.Process.OnTerminate(self, *args, **kwargs)
       print "Terminating" 
```

`BuildEvent`这是一个自定义子类`wx.PyEvent`。该进程正在正确启动、运行和终止，但我的`on_idle`函数从未执行，即使我确定我已将其绑定到空闲事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T12:32:47.283

目标不是调用另一个进程的方法，目标是通过进程执行时定期触发的“更新”事件将另一个进程的标准输出重定向回父进程。

一种解决方案是使用 wx.Timer 定期轮询进程的输出流，这样我们就不会依赖 EVT_IDLE 为我们完成工作（我无法让 EVT_IDLE 触发）

```
class BuildProcess(wx.Process):

    def __init__(self, cmd, notify=None):
        wx.Process.__init__(self, notify)
        self.Redirect()
        self.cmd = cmd
        self.pid = None
        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.on_timer)

    def start(self):
        wx.PostEvent(self, BuildEvent(EVT_BUILD_STARTED, self))
        self.pid = wx.Execute(self.cmd, wx.EXEC_ASYNC, self)
        self.timer.Start(100)

    def on_timer(self, evt):
        stream = self.GetInputStream()
        if stream.CanRead():
            text = stream.read()
            wx.PostEvent(self, BuildEvent(EVT_BUILD_UPDATE, self, data=text))

    def OnTerminate(self, *args, **kwargs):
        print "terminating..."
        stream = self.GetInputStream()
        if stream.CanRead():
            text = stream.read()
            wx.PostEvent(self, BuildEvent(EVT_BUILD_UPDATE, self, data=text))
        if self.timer:
            self.timer.Stop()
        wx.PostEvent(self, BuildEvent(EVT_BUILD_FINISHED, self)) 
```

通过这种方法，每 100 毫秒输出流被读取、打包并作为构建事件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T07:28:52.040

从查看 wxProcess 文档来看，我不认为它是这样工作的：wxProcess 将创建一个新的独立进程，作为当前进程的子进程运行。在这样的进程中，不可能运行连接到消息的方法。

也许您可以将空闲事件连接到主线程中的函数或方法。

或者，也许 wxThread 类是您真正想要使用的。

# silverlight - 在 Silverlight 2 DataGrid 中编辑单元格时禁用 LostFocus 行为

> ID：723991
> 
> 赞同：1
> 
> 时间：2009-04-07T02:40:12.403
> 
> 标签：silverlight, datagrid, event-handling, focus

我有一个自定义`CellEditingTemplate`，在网格内有一个文本框和一个日历控件。`F2`当用户通过按下键盘编辑单元格时，我已使文本框获得焦点。不幸的是，Silverlight 的数据网格与 Grid 的事件挂钩，`LostFocus`因此当用户单击日期选择器控件时，将触发该`LostFocus`事件并且单元格退出编辑模式。有人对如何阻止这种情况发生有任何想法吗？（如果只有 Silverlight 在`.Handled`上有一个属性`RoutedEventArgs`。）

**示例 XAML：**

```
<data:DataGridTemplateColumn.CellEditingTemplate>
  <DataTemplate>
    <Grid>
      <TextBox Loaded="FocusTextBox"
         Text="{Binding Path=ETD, Mode=TwoWay}" />
      <controls:DatePicker
         x:Name="datePicker"
         SelectedDate="{Binding Path=ETD, Mode=TwoWay, Converter={StaticResource DateTimeConverter}}"
         Margin="2"
         Width="22"
         HorizontalAlignment="Right" />
    </Grid>
  </DataTemplate>
</data:DataGridTemplateColumn.CellEditingTemplate> 
```

# asp.net-mvc - 在 ASP.NET MVC 中连接数据库驱动菜单的最佳方法

> ID：723994
> 
> 赞同：3
> 
> 时间：2009-04-07T02:42:59.403
> 
> 标签：asp.net-mvc, linq-to-sql, .net-3.5, master-pages

我正在寻找一种在不违反 MVC 原则的 ASP.NET MVC 中处理数据库驱动菜单的方法。我想用我的数据库中的内容替换硬编码的默认“主页，关于”菜单。我该如何接线？我会在我的 Site.Master 中设置一个 ContentPlaceHolder 并在我的视图中重新生成吗？这对我来说似乎不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T02:48:36.220

我的主菜单是一个 ViewUserControl，它在我的 MasterPage 中呈现为部分视图。虽然我的是硬编码的，但您可以轻松地从 ViewData 生成它。从视图数据生成它可能涉及实现一个自定义 FilterAttribute，该属性指定用于生成将应用于每个控制器/动作的菜单的参数，或者，如果每个页面上的菜单相同，则实现一个基本控制器来填充通过覆盖 OnActionExecuted 并添加到其中的 ViewData 在视图数据中。

示例（请注意，您可能会对结果使用缓存，而不是每次都从数据库中获取它们）。

模型类

```
public class MenuItem
{
    public string Text { get; set; }
    public string Action { get; set; }
    public string Controller { get; set; }
}

public class Menu
{
     public string Heading { get; set; }
     public IEnumerable<MenuItem> Items { get; set; }
} 
```

MenuControl.ascx : 类型`System.Web.Mvc.ViewPage<List<Menu>>`

```
<div id="mainMenu">
<% foreach (var menu in Model) { %>
   <div class="menu">
      <h2 class="menu-heading"><%= menu.Heading %></h2>
      <% foreach (var item in Model.Items) { %>
         <%= Html.ActionLink( item.Text,
                              item.Action,
                              item.Controller,
                              null,
                              { @class = "menu-item" } ) %>
      <% } %>
   </div>
<% } %>
</div> 
```

母版页

```
<html>
<head>
...
<asp:ContentPlaceHolder runat="server" id="HeaderContent">
</head>
<body>

... other HTML...

<% Html.RenderPartial( "MenuControl", ViewData["mainMenu"], ViewData ); %>

<asp:ContentPlaceHolder runat="server" id="BodyContent" />

... more HTML ...

</body>
</html> 
```

基本控制器

```
public override void OnActionExecuted( ActionExecutedContext filterContext )
{
     if (filterContext != null)
     {
         var context = filterContext.Result as ViewResult;
         if (context != null) {
             context.ViewData["mainMenu"] = 
                 db.MenuData.Where( m => m.Type == "mainMenu" )
                            .Select( m => new Menu {
                                Heading = m.Heading,
                                Items = db.ItemData.Where( i => i.MenuID == m.MenuID )
                                               .OrderBy( i => i.Name )
                                               .Select( i => new MenuItem {
                                                   Text = i.Text,
                                                   Action = i.Operation,
                                                   Controller = i.Table
                                               })
                            });
         }
    }
} 
```

# database - 什么是数据库范式，你能举个例子吗？

> ID：723998
> 
> 赞同：289
> 
> 时间：2009-04-07T02:43:56.390
> 
> 标签：database, database-design, database-normalization

在关系数据库设计中，有一个数据库规范化或简称规范化的概念，即对列（属性）和表（关系）进行组织的过程，以减少数据冗余，提高数据完整性。[（如维基百科](https://en.wikipedia.org/wiki/Database_normalization)上所写）。

由于大多数文章都有些技术性，因此更难理解，我要求有人根据关于 1NF、2NF、3NF 甚至 3.5NF（Boyce-Codd）含义的示例写一个更易于理解的解释。

* * *

## 回答 #1

> 赞同：450
> 
> 时间：2009-04-07T03:09:53.020

1NF是最基本的范式——表格中的每个单元格必须只包含一条信息，并且不能有重复的行。

2NF 和 3NF 都是关于依赖于主键的。回想一下，一个主键可以由多个列组成。正如克里斯在回复中所说：

数据取决于密钥 [1NF]、整个密钥 [2NF] 以及密钥 [3NF]（所以请帮帮我[Codd](http://en.wikipedia.org/wiki/Ted_Codd)）。

## 2NF

假设您有一个包含某个学期所学课程的表格，并且您有以下数据：

```
|-----Primary Key----|               uh oh |
                                           V
CourseID | SemesterID | #Places  | Course Name  |
------------------------------------------------|
IT101    |   2009-1   | 100      | Programming  |
IT101    |   2009-2   | 100      | Programming  |
IT102    |   2009-1   | 200      | Databases    |
IT102    |   2010-1   | 150      | Databases    |
IT103    |   2009-2   | 120      | Web Design   | 
```

这**不在 2NF 中**，因为第四列不依赖于*整个*密钥 - 而只是其中的一部分。课程名称取决于课程的 ID，但与学习的学期无关。因此，如您所见，我们有重复的信息 - 有几行告诉我们 IT101 是编程，IT102 是数据库。所以我们通过将课程名称移动到另一个表中来解决这个问题，其中 CourseID 是 ENTIRE 键。

```
Primary Key |

CourseID    |  Course Name |
---------------------------|
IT101       | Programming  |
IT102       | Databases    |
IT103       | Web Design   | 
```

没有冗余！

## 3NF

好的，假设我们还将课程老师的姓名以及有关他们的一些详细信息添加到 RDBMS 中：

```
|-----Primary Key----|                           uh oh |
                                                       V
Course  |  Semester  |  #Places   |  TeacherID  | TeacherName  |
---------------------------------------------------------------|
IT101   |   2009-1   |  100       |  332        |  Mr Jones    |
IT101   |   2009-2   |  100       |  332        |  Mr Jones    |
IT102   |   2009-1   |  200       |  495        |  Mr Bentley  |
IT102   |   2010-1   |  150       |  332        |  Mr Jones    |
IT103   |   2009-2   |  120       |  242        |  Mrs Smith   | 
```

现在希望很明显 TeacherName 依赖于 TeacherID - 所以这**不在 3NF 中**。为了解决这个问题，我们做了很多与 2NF 中相同的操作——从该表中取出 TeacherName 字段，并将其放入以 TeacherID 作为键的自己的字段中。

```
 Primary Key |

 TeacherID   | TeacherName  |
 ---------------------------|
 332         |  Mr Jones    |
 495         |  Mr Bentley  |
 242         |  Mrs Smith   | 
```

没有冗余！！

要记住的一件重要的事情是，如果某物不在 1NF 中，那么它也不在 2NF 或 3NF 中。因此，每个额外的范式*都需要较低范式所具有的**所有*内容，以及一些必须满足的额外条件。

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2009-04-07T02:53:01.187

我对确切的措辞从来没有很好的记忆，但在我的数据库课上，我认为教授总是说这样的话：

> 数据取决于密钥 [1NF]、整个密钥 [2NF] 以及密钥 [3NF]。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2009-04-07T02:53:31.263

这是一个快速的，公认的*屠杀*回应，但在一句话中：

*1NF：您的表被组织为一组*无序的数据，并且没有重复的列。

2NF：您不会因为另一列而在表的一列中重复数据。

3NF：表中的每一列仅与表的键相关——表中的列不会描述表中不是键的另一列。

更多详细信息，请参阅维基百科...

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2012-10-22T22:28:41.710

1NF：每列只有一个值

2NF：表中的所有非主键列都应该依赖于整个主键。

3NF：表中的所有非主键列都应直接依赖于整个主键。

我在这里写了一篇更详细的[文章](http://dotnetanalysis.blogspot.com/2012/01/database-normalization-sql-server.html)*