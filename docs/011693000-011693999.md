# StackOverflow 问答 11693000-11693999

# android - Delphi XE2 DataSnap 生命周期与 Android 连接

> ID：11693001
> 
> 赞同：1
> 
> 时间：2012-07-27T17:46:19.390
> 
> 标签：android, delphi, session, delphi-xe2, datasnap

我有一个带有 DSServerClass.LifeCycle=Session 的 DataSnap 服务器（公开 TDSServerModule 的下降类）。

当客户端连接 TDSServerModule 时，它​​会被创建并保留在内存中，只要会话存在， - 这建立了一个 datasnap 连接（隧道） - 没关系。

当通过 Android 连接（移动连接）时，TDSServerModule 通过调用（实例）创建/销毁。这建立了一个 REST 连接......

我有一个小演示。

任何想法来解决这个问题......

在此先感谢佩德罗·洛佩斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:45:31.013

REST 根据定义是无状态的。来自*[Server Class LifeCycle](http://docwiki.embarcadero.com/RADStudio/en/Server_Class_LifeCycle)*的文档：

> 对于 REST 客户端连接，如果在服务器类上使用 Session LifeCycle，它的行为类似于 Invocation LifeCycle。

这是设计使然。你的问题到底是什么？

# vba - 如何在 Excel 的另一个工作表和使用表单的活动工作表中找到一个值？

> ID：11693003
> 
> 赞同：0
> 
> 时间：2012-07-27T17:46:40.930
> 
> 标签：vba, excel

好吧，到目前为止，这是我的问题，我在 VB 中有一个表单，用户输入了一个数字，我想做的是在 Sheet2 中进行 excel 搜索“数据”如果已经捕获，最后放到Sheet1中最后一个空的A行。

到目前为止我有这个。

```
Private Sub CommandButton1_Click()
Me.TextBox1.Text = ""
Me.TextBox2.Text = ""
End Sub

Private Sub CommandButton2_Click()
Dim lastrow As Double
Dim frange As Range

lastrow = ActiveSheet.UsedRange.Row - 1 + ActiveSheet.UsedRange.Rows.Count

If TextBox1.Text = TextBox2.Text Then

Sheets("Sheet2").Activate
ActiveSheet.Range("A2").Select

If Range("A2:A200").Find(What:=TextBox2.Value _
, After:=ActiveCell, LookIn:=xlValues, LookAt:= _
xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
False).Activate Then

Sheets("Datos").Activate

If Range("A3:A200").Find(What:=TextBox2.Value _
, After:=ActiveCell, LookIn:=xlValues, LookAt:= _
xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
False).Activate Then

MsgBox ("This number is already registred")

Else

Cells(lastrow + 1, 1) = TextBox2.Value

End If

Else

MsgBox ("The number has not been buyed")

End If

Else

MsgBox ("The number are not the same")

End If

End Sub 
```

我真的希望有人能帮助我，因为我被困住了，我看不到答案。

谢谢

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:57:57.077

**未经测试**

请看看这是否是你正在尝试的？

```
Private Sub CommandButton1_Click()
    Me.TextBox1.Text = "": Me.TextBox2.Text = ""
End Sub

Private Sub CommandButton2_Click()
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim aCell As Range, bCell As Range
    Dim lrow As Long

    Set ws1 = Sheets("Datos"): Set ws2 = Sheets("Sheet2")

    If TextBox1.Text = TextBox2.Text Then
        Set aCell = ws2.Columns(1).Find(What:=TextBox2.Value _
                , LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, _
                SearchDirection:=xlNext, MatchCase:=False)
        If Not aCell Is Nothing Then
            Set bCell = ws1.Columns(1).Find(What:=TextBox2.Value _
                    , LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, _
                    SearchDirection:=xlNext, MatchCase:=False)
            If Not bCell Is Nothing Then
                MsgBox ("This number is already registred")
            Else
                '~~> This will write to sheet "Datos". if you want to
                '~~> write to sheet Sheet2 then change ws1 to ws2 below
                With ws1
                    lrow = ws1.Range("A" & .Rows.Count).End(xlUp).Row + 1
                    .Cells(lrow, 1) = TextBox2.Value
                End With
            End If
        Else
            MsgBox ("The number has not been buyed")
        End If
    Else
        MsgBox ("The number are not the same")
    End If
End Sub 
```

# zlib - Qemu 配置抛出 zlib、pthread 和 kvm 缺失错误

> ID：11693004
> 
> 赞同：1
> 
> 时间：2012-07-27T17:46:51.517
> 
> 标签：zlib, configure, qemu, kvm

我一直试图让我的 qemu 版本在新机器上运行。我安装了 zlib1g-dev、zlib-bin 等。当我执行 whereis zlib 时，我得到了

```
zlib: /usr/include/zlib.h /usr/share/man/man3/zlib.3.gz 
```

我也尝试从源代码编译和安装 zlib，但存在同样的问题。

我得到的确切错误是

```
big/little test failed

Error: zlib check failed
Make sure to have the zlib libs and headers installed. 
```

此外，如果我因此而注释掉出口，我会得到

```
Error: pthread check failed 
```

和

```
ERROR: User requested feature kvm
ERROR: configure was not able to find it 
```

kvm 模块已启用并且机器支持硬件虚拟化。我已经使用 kvm-ok 进行了检查。lsmod 显示 kvm 和 kvm_intel 模块。

我真的对这些错误感到困惑。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:46:16.737

我仍然不确定导致问题的实际依赖关系，但所有问题都通过使用解决了

```
sudo apt-get depmod qemu 
```

在此之后，我现在可以配置 qemu

# mysql - 如何在 mysqli_multi_query 中传递变量？

> ID：11693005
> 
> 赞同：-1
> 
> 时间：2012-07-27T17:46:51.180
> 
> 标签：mysql, mysqli

[我在这里](https://stackoverflow.com/questions/11692586/how-to-pass-variable-in-mysqli-multi-query)问了一个类似的问题，但我意识到这个例子不能满足我的需要。这是我的新问题：

我正在尝试`number`从 mysqli 查询中设置一个变量。并在下一个查询中使用该变量。我尝试了以下查询，但徒劳无功。什么是正确的方法？

```
mysqli_multi_query($mysqli, "COUNT(fruits) FROM eatables as num SET @number= num; UPDATE fruits SET fruits = @number") or die('</br>mySqli Error</br>'); 
```

这是示例 sql 数据库：

```
table eatables:

#fruits   #numbers
apple      null
apple      null
grapes     null
mango      null
pears      null
grapes     null 
```

查询后应该是

```
#fruits   #numbers
apple      3
apple      3
grapes     2
mango      1
pears      1
grapes     2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:55:20.447

您的情况不需要多查询，
为更新做一个内部连接就可以了

```
update eatables
inner join (select fruits, count(*) as total from eatables group by fruits) as b
on eatables.fruits = b.fruits
set eatables.numbers = b.total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:56:06.783

您应该显示更多代码上下文，尽管听起来您想要做的并不是 mysqli_multi_query 的使用方式。它旨在用于执行一组以字符串形式传递的不同查询，并使您能够独立处理每个结果集。它不适用于您在同一查询上循环 X 次更改 SQL 语句以响应前一条语句的执行。

# eclipse - maven 安装失败“不支持泛型”

> ID：11693008
> 
> 赞同：0
> 
> 时间：2012-07-27T17:47:08.443
> 
> 标签：eclipse, maven

我正在使用嵌入式码头服务器来构建战争，我通过 eclipse 运行 maven clean，然后 maven install。我收到一堆“不支持”的错误

```
\RoleDao.java:[86,13] generics are not supported in -source 1.3
(use -source 5 or higher to enable generics)
        public List<Role> findAllRoles()

UserAuth.java:[44,1] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
@SuppressWarnings("deprecation") 
```

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:53:46.180

错误消息指出您定义的语言级别为 1.3。这是 Maven 编译器插件的旧版本（如 2.0）的默认设置。升级到较新的版本，如 2.3.2 甚至最新的 2.5.1，默认为 1.5，它应该可以正常工作。

在您使用它的同时，还升级到最新版本的 Maven (3.0.4)，以便这些新版本的 Maven 编译器插件是默认的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T19:14:54.200

这是 Manfred 指出的默认问题。要摆脱这个讨厌的错误，您可以升级 maven 版本、maven-compiler-plugin 版本或在 pom.xml 中配置版本

```
<build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.5.1</version>
          <configuration>
            <source>1.5</source>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build> 
```

然后将值 from `source`作为 -source 参数传递给编译器，以找出接受的值，检查此页面[javac](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)并搜索 **-source *release***

# java - 通过 JCheckBox 设置 JScrollPane 可见/不可见不起作用

> ID：11693013
> 
> 赞同：1
> 
> 时间：2012-07-27T17:47:23.170
> 
> 标签：java, swing, jscrollpane, visibility, jcheckbox

有一个 JCheckBox 称为“**一**”，另一个称为“**二**”。还有一个名为“ **sp** ”的 JScrollPane。其中有一个 JTextArea。复选框的目的是隐藏和显示程序的某些部分。我简化了程序，在这里我繁琐地解释了应该发生的事情，只是为了确保你理解程序。

这应该发生：

最初只有**一个**可见并且未选中。Whenever **one** is selected, **two** should be set visible. 无论何时选择**两个**，都应将**sp设置为可见。**取消选中复选框时，相应的组件将设置为不可见。但是，当取消选择一个时，**sp**也被设置为不可见。（**一**控制**二**和**sp**）。

问题：

选择**一个**时，可以看到**两个**。But when **two** is selected, **sp** is not visible (it should be). 当一个被取消选中而**两个**被选中时，**两个**是不可见的（这应该发生）。But when **one** is selected, **two** is visible and all of a sudden **sp** is now visible. 在此之后，程序按预期运行。

然而，这适用于其他 JComponent（代替 JScrollPane）。

有什么问题？

```
package tests;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Checkboxscrollpane extends JPanel {

    private JCheckBox one, two;
    private JScrollPane sp;

    private Checkboxscrollpane() {
        Listener listener = new Listener();

        one = new JCheckBox();
        one.addActionListener(listener);
        add(one);

        two = new JCheckBox();
        two.addActionListener(listener);
        add(two);

        sp = new JScrollPane(new JTextArea("hello"));
        add(sp);

        one.setVisible(true);
        two.setVisible(false);
        sp.setVisible(false);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        one.setLocation(50, 50);
        two.setLocation(70, 70);
        sp.setLocation(90, 90);
    }

    private class Listener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == one) {
                two.setVisible(one.isSelected());
            }
            sp.setVisible(one.isSelected() && two.isSelected());
        }
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setSize(300, 200);
        frame.add(new Checkboxscrollpane());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:00:45.983

您应该重新验证`Checkboxscrollpane`面板。

但是您不应该在每个绘制事件上设置组件的位置：

```
setLayout(null);

    one.setSize(100, 20);
    two.setSize(100, 20);
    sp.setSize(100, 20);
    one.setLocation(50, 50);
    two.setLocation(70, 70);
    sp.setLocation(90, 90); 
```

并删除该`public void paintComponent(Graphics g) {`方法。

# javascript - 你如何在 Rails 中处理特定环境的 javascript 文件？

> ID：11693014
> 
> 赞同：0
> 
> 时间：2012-07-27T17:47:26.207
> 
> 标签：javascript, ruby-on-rails, assets

假设您在开发和生产中有不同的设置（不同的选项，`setInterval`/的不同时间`setTimeout`）。你如何处理配置之间的变化？

我在考虑使用生成器，每次在环境之间切换时，我都可以重新生成相关的js文件。你的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:52:15.643

非常非常简单。在我的布局中：

```
<% if Rails.env.development? %>
  <%= javascript_include_tag "development.js" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:54:55.283

根据您拥有的这些不同设置的数量，我会使用 ENV['RAILS_ENV']（Rails 2.3，它可能在 Rails 3+ 中已更改）来查看您是否处于“生产”、“开发”等状态。

如果它只是一个样式表或 javascript 文件，我会在应用程序布局中进行这些检查。如果您的开关更深入，我会在应用程序助手中创建一个助手，它会告诉您您的代码当前所在的环境，然后从您的代码中调用该助手。

# ios - 使用 iframe 的 PhoneGap iOS 不会加载页面

> ID：11693018
> 
> 赞同：1
> 
> 时间：2012-07-27T17:47:59.420
> 
> 标签：ios, xcode, cordova

我有一个 iframe 可以获取有关歌曲的信息，然后它会尝试启动 iTunes。我有`OpenAllWhitelistURLsInWebView`with`YES`作为值，但是当框架尝试加载 iTunes 商店时。这是错误：

```
shouldStartLoadWithRequest: Received Unhandled URL itms://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?term=It%27s+Happening+++Daniel+Bashta&partnerId=30&siteID=aOx3s4PxaYI-u3VQ6FY0xTj9XV2LxTTfDg
2012-07-27 13:46:05.115 Victory 91.5[7024:13403] Failed to load webpage with error: Frame load interrupted 
```

如果您有任何建议，请告诉我。谢谢！

# c# - 如何使用 C# 按文件大小拆分 PDF 文件？

> ID：11693019
> 
> 赞同：1
> 
> 时间：2012-07-27T17:48:03.490
> 
> 标签：c#, pdf, acrobat

我找到了[如何将 PDF 分解为多个部分的](http://acrobatusers.com/tutorials/how-to-break-a-pdf-into-parts)教程，该教程演示了如何使用 Adob​​e Acrobat 按页面或最大文件大小将 PDF 文件拆分为单独的 PDF 文件：

![工具 > 拆分文档 > 按文件大小拆分文档](../Images/76d7c6568dead59251fca3f64846f91e.png)

我在 StackOverflow 上[找到](https://stackoverflow.com/questions/122109/how-can-i-split-up-a-pdf-file-into-pages-preferably-c) [了很多](https://stackoverflow.com/questions/6999296/split-huge-40000-page-pdf-into-single-pages-itextsharp-outofmemoryexception) 关于如何使用 C# 逐页拆分 PDF 的[示例。](https://stackoverflow.com/questions/3574505/split-pdf-into-multiple-files-in-c-sharp)但是我该怎么做后者呢？如何使用 C# 按最大文件大小将 PDF 文件拆分为多个 PDF 文件？

例如，假设我有一个 70 页和 40 MB 的 PDF 文件。我如何使用 C# 将文件分成大约 5 个每个不超过 10 MB 的 PDF 文件，而不是分成 7 个 10 页的 PDF 文件？

到目前为止，我见过的最好的方法是[使用 itextsharp 根据大小将 pdf 拆分为更小的 pdf，](https://stackoverflow.com/questions/9024839/using-itextsharp-to-split-a-pdf-into-smaller-pdfs-based-on-size?rq=1)其中[Cyfer13](https://stackoverflow.com/users/105172/cyfer13)使用[iTextSharp](http://itextpdf.com/)按页面拆分文件，然后按大小对这些页面文件进行分组。但是，是否有一种更直接的方式来实现这一点而无需先按页面拆分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:27:18.293

从[PDFsharp Sample: Split Document](http://www.pdfsharp.net/wiki/SplitDocument-sample.ashx)开始，我编写了以下 SplitBySize 方法：

```
public static void SplitBySize(string filename, long limit)
{
    PdfDocument input = PdfReader.Open(filename, PdfDocumentOpenMode.Import);
    PdfDocument output = CreateDocument(input);

    string name = Path.GetFileNameWithoutExtension(filename);
    string temp = string.Format("{0} - {1}.pdf", name, 0);
    int j = 1;
    for (int i = 0; i < input.PageCount; i++)
    {
        PdfPage page = input.Pages[i];
        output.AddPage(page);
        output.Save(temp);
        FileInfo info = new FileInfo(temp);
        if (info.Length <= limit)
        {
            string path = string.Format("{0} - {1}.pdf", name, j);
            if (File.Exists(path))
            {
                File.Delete(path);
            }
            File.Move(temp, path);
        }
        else
        {
            if (output.PageCount > 1)
            {
                output = CreateDocument(input);
                ++j;
                --i;
            }
            else
            {
                throw new Exception(
                    string.Format("Page #{0} is greater than the document size limit of {1} MB (size = {2})",
                    i + 1,
                    limit / 1E6,
                    info.Length));
            }
        }
    }
} 
```

我将继续测试，但到目前为止它正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:59:09.907

这是一个未经测试的示例代码，假设您准备在纯二进制级别进行拆分，即 PDF 阅读器不会读取这些部分，您必须重新加入这些部分以使其可读：

下面的代码首先在 byte[] 数组中获取 pdf 文件。然后根据任意分区大小（本例中为 5），获取每个部分二进制文件的文件大小。然后，它将创建一个临时内存流并循环创建每个分区并写入一个新的 .part 文件。（您可能需要进行一些更改才能使其可行）。

```
 byte[] pdfBytes = File.ReadAllBytes("c:\foo.pdf");
        int fileSize = pdfBytes.Length / 5; //assuming foo is 40MB filesize will be abt 8MB
        MemoryStream m = new MemoryStream(pdfBytes);
        for (int i = 0; i < 4; i++)
        {
            byte[] tbytes = new byte[fileSize];
            m.Read(tbytes,i*fileSize,fileSize);
            File.WriteAllBytes("C:\foo" + i + ".part",tbytes);
        } 
```

# image - JSOUP：获取图像的绝对 URL 时出错

> ID：11693028
> 
> 赞同：0
> 
> 时间：2012-07-27T17:48:49.743
> 
> 标签：image, url, jsoup, absolute

使用 jsoup 获取图像的绝对 URL 时出现错误。

# 代码：

```
package org.zzz.parser;
import java.io.File;
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

public class DocumentParser {
    /**
     * Parsing html from file
     */
    public static void main(String[] args) {

        String url = "www.guiabh.com.br/evento/back-in-jack-seu-madruga.aspx";

        File input = new File("/home/thalesfc/Code/recSystem/wgetao/" + url);

        Document doc = null;

        // parsing the document
        try {
            doc = Jsoup.parse(input, "ISO8859-1", url);
        } catch (IOException e) {
            System.err.println("$ Erro ao fazer o parsing do arquivo: " + input.getName());
            e.printStackTrace();
        }

        //getting the image url
        Element image = doc.getElementById("ctl00_ContentPlaceHolderConteudo_controleInternoAgito1_imageFotoCasa");
        String imageUrl = image.attr("src");
        String imageRealUrl = image.absUrl("src");
        String imageRealUrl2 = image.attr("abs:src");

        System.out.println("# image: " + imageUrl);
        System.out.println("# real image: " + imageRealUrl);
        System.out.println("# real image 2: " + imageRealUrl2);
    }
} 
```

# 输出：

# 图片：../imgs_cadastradas/seu madruga.jpg

# 真实图片：

# 真实图片2：

理想的输出是： [http](http://www.guiabh.com.br/imgs_cadastradas/seu) ://www.guiabh.com.br/imgs_cadastradas/seu madruga.jpg

难道我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:34:49.750

您正在查看“www.guiabh.com.br/evento/back-in-jack-seu-madruga.aspx”网址。

当你得到图片的url时，它以“../”开头，这意味着要烘焙一个lvl。

简单地说，它可以回到“www.guiabh.com.br/evento/”+图片网址。

它会引发错误，因为您试图在此处连接：“../imgs_cadastradas/seu madruga.jpg”

我建议有一种方法可以从您获取图像的位置获取 URL，而不是预期我上面所说的内容。

# javascript - 如果用户有多个浏览器，如何分配 localStorage 空间？

> ID：11693029
> 
> 赞同：1
> 
> 时间：2012-07-27T17:48:50.883
> 
> 标签：javascript, local-storage

我相信最大存储是基于域的......即每个域都获得 x 量的数据。

但是当用户在浏览器之间切换时呢？

他们是否使用两个完全独立的空格，并且类似地分开最大数据量。

第二，

浏览器 1 中的 localStorage.a 与浏览器 2 中的 localStorage.a 是否不同？

**类似的**

[localStorage 值的最大大小是多少？](https://stackoverflow.com/questions/2989284/max-size-of-localstorage-values)

[子域的 HTML5 localStorage 大小限制](https://stackoverflow.com/questions/2747285/html5-localstorage-restrictions-and-limits)

**参考**

[W3](http://www.w3schools.com/html5/html5_webstorage.asp)

[Mozilla](https://developer.mozilla.org/en/DOM/Storage)

[维基百科](http://en.wikipedia.org/wiki/Web_Storage)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:50:31.007

简而言之，是的。它是特定于浏览器/特定于域的存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:52:21.757

浏览器供应商不会实现共享本地存储。每个支持 localStorage 的浏览器都有一个独立的实例，但是它已经实现了。

# c++ - 我应该使用函数指针吗？C++ 和 Objective-C

> ID：11693030
> 
> 赞同：0
> 
> 时间：2012-07-27T17:49:05.390
> 
> 标签：c++, objective-c, function-pointers, member-function-pointers

我正在编写一个使用我也在编写的 C++ 库的 Cocoa 应用程序。我希望 C++ 库能够在 Cocoa 应用程序中调用 draw 方法。

*细节——具体来说*，我正在运行 OpenNi 骨骼跟踪并记录骨骼数据。在每个新帧，我想告诉 Objective-C 代码它可以/应该将数据绘制到屏幕上。

OpenNI 跟踪代码由控制对象 SkeletalModuleControl 调用（并具有句柄）。Objective-C 代码与之交互的唯一对象是这个控件类。我的想法是最好在控件类中创建 callDraw 和 registerDraw 方法。Objective-C 代码会注册它的 draw 方法（或多个 draw 方法？）并且 callDraw 会调用注册的 draw 方法（如果有的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:18:22.050

一般来说，只有在 Cocoa 调用视图的`-drawRect:`方法时才能绘制到 Cocoa 视图中。因此，您真正需要考虑的问题是，当您更新了要显示的数据时，如何让 Cocoa 使您的视图无效......

编写一个可以从 C++ 代码调用的普通 C 函数可能是最简单的方法。让 C++ 库让您注册一个回调函数以使相关视图无效也很简单。请记住，无论哪种方式，该函数都应该只负责*使*视图无效（例如调用`-setNeedsDisplay:`或`-setNeedsDisplayInRect:`）。实际的*绘制*需要稍后发生，当 Cocoa 开始调用`-drawRect:`方法时。

如果您想将代码放入 C++ 库中进行绘图，只需将其包装为可以从`-drawRect:`.

# php - 为 Codeigniter 设置 BaseURL

> ID：11693031
> 
> 赞同：6
> 
> 时间：2012-07-27T17:49:09.560
> 
> 标签：php, codeigniter

我设置`baseurl`为：

```
http://localhost/codeigniter/ 
```

按照[安装说明](http://codeigniter.com/user_guide/installation/index.html)`application/config/config.php file`的要求。

我正在关注[本教程](http://codeigniter.com/user_guide/tutorial/static_pages.html)。但是，当我输入 url:`http://localhost/codeigniter/index.php/pages/view`时，出现以下错误：

> 找不到对象！
> 
> 在此服务器上找不到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 
> 错误 404
> 
> 本地主机 2012 年 7 月 27 日晚上 11:14:39 Apache/2.2.12 (Win32) DAV/2 mod_ssl/2.2.12 OpenSSL/0.9.8k mod_autoindex_color PHP/5.3.0 mod_perl/2.0.4 Perl/v5.10.0

`.htaccess`我在以下路径的文件中找到了以下内容`E:\WEB D\xampp\htdocs\CodeIgniter_2.1.2\application`：

> 拒绝一切

我对 CodeIgniter 框架完全陌生。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T18:00:30.203

好的，对于任何想知道最终解决方案是目录没有正确命名的人来说。创建本地服务器时，将文件的内容放在正确的文件夹中很重要。

所以如果你有`http://localhost/codeigniter`那么目录应该设置为`\path\to\webdirectory\root\codeigniter`或在这种情况下：`E:\WEBD\xampp\htdocs\codeigniter`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T07:12:37.070

尝试编辑您的 .htaccess 文件，如下所示，并将 .htaccess 文件放在您的根应用程序文件夹中

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:56:54.170

确保您的 php 错误可见。

当我在本地工作时尝试为 Code Igniter 设置 base_url 时，我也遇到了这个问题。我查看了 htaccess 文件，检查了 mod_rewrite 是否已打开，尝试更改 base_url 但都失败了。

解决方案是确保在主 index.php 文件中将环境设置为 development 并确保 $config['log_threshold'] = 4; 在 config.php 中设置。

之后我的php错误出现了。我忘记为新网站构建切换开发环境。

# sublimetext2 - find_under_expand_skip 在 mac sublime 上不起作用吗？

> ID：11693032
> 
> 赞同：2
> 
> 时间：2012-07-27T17:49:12.087
> 
> 标签：sublimetext2

find_under_expand_skip 在 mac sublime 上不起作用吗？

嗨，我上周一直在尝试打开和关闭。

我一直使用“find_under_expand”，当我听说可以跳过某些变量时，它完全有意义，但我无法让它发挥作用。有什么想法吗？

干杯

将要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:26:30.613

find_under_expand_skip 绑定到键序列`command + k, command + d`。由于它是一个序列，因此您必须连续按下两个键绑定。

# php - 从 MySQL 读取记录后，如何在 PHP 中将 ¶ (pilcrow) 转换为 \n

> ID：11693033
> 
> 赞同：0
> 
> 时间：2012-07-27T17:49:13.380
> 
> 标签：php

在以下代码中，当我在从 mySQL 数据库检索记录后回显“详细信息”列中的文本时，我希望它为数据库记录中的所有 ¶（pilcrows）回显换行符（<br/>）。

我知道我可以使用`nl2br()`将所有 \n 替换为`<br/>`，但首先我需要将所有 ¶ (pilcrows) 替换为`\n`. 我该怎么做？这是我的代码：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM Persons");

while($row = mysql_fetch_array($result))
  {
  echo $row['Details'];
  }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:53:10.357

只需使用类似`$row['Details'] = str_replace("¶", "\n", $row['Details']);`. 这会将每个 pilcrow 更改为换行符（当然，只要 pilcrow 未编码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:53:16.207

使用 PHP 函数[str_replace](http://php.net/manual/en/function.str-replace.php)：

```
str_replace('¶', '<br>', $row["Details"]); 
```

# vba - copyshortcut 功能滞后/落后

> ID：11693038
> 
> 赞同：1
> 
> 时间：2012-07-27T17:49:45.377
> 
> 标签：vba, excel, clipboard, copy-paste

我正在编写一个宏来进入 Internet Explorer，搜索和员工编号，从该搜索中找到经理，最后将其复制并粘贴到工作簿中的一个单元格中......但是，它似乎总是落后于“复制”后面。我的意思是，如果我在运行宏之前复制某些内容，然后运行它，复制的内容会进入单元格。然而，我再次点击运行，它会复制经理姓名。它似乎总是落后一个“副本”，或者选择剪贴板上第二个最近的项目。此外，如果我在复制和粘贴代码之前清除剪贴板，我会收到错误消息。这是为什么？

```
`Sub Macro1()
'
Dim ie As Object
Set ie = CreateObject("internetexplorer.application") 'start up IE

Dim HWNDSrc As Long
HWNDSrc = ie.HWND   'to setup for focusing internet explorer

ie.Visible = True

ie.navigate "http://url.com/" 'address to find

While ie.Busy   'loop until ie is done loading
     DoEvents
Wend

Call WaitForIE(ie, HWNDSrc, 7) 'to check and make sure ie is done loading

ie.document.getElementById("SSOID").Value = "m1z016p32" 'input into search box

ie.document.getElementById("SSOID").Select
SetForegroundWindow HWNDSrc 'focuses the active application
Application.SendKeys "~"    'enter key
ie.document.getElementById("Advanced").Checked = False  'make sure the advanced box is unchecked

For i = 1 To 200000000      'loop to load the search
i = i + 1
Next i

ie.document.getElementById("Advanced").Checked = False

ie.document.getElementById("SSOID").Select  'focuses the cursor so the tabs will align

SetForegroundWindow HWNDSrc
Application.SendKeys "{TAB 6}"  'tab to location

Application.SendKeys "+{F10}"   'right click on the manger name
Application.SendKeys "{DOWN}"   'goes down to 'copyshortcut'
Application.SendKeys "{DOWN}"

Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "{DOWN}"
Application.SendKeys "~"        '[presses enter

Windows("Book21").Activate      'workbook o activate
Range("A1").Select          'selects the cell
ActiveSheet.Paste           'past the data

End Sub` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:55:05.643

好的，这是逻辑。

导航到 url 后，找到需要输入 SSO 和密码的 HTML 对象，然后使用`.Value`. 我看到你已经在这样做了。

接下来是找到按钮并使用而不是`Submit`模拟点击事件`.Click``Application.SendKeys "~"`

一旦您到达目标 url，而不是使用制表符，找到对象的元素 ID 并检索它的值并将其写入 excel 文件。

你已经涵盖了大部分内容。您需要做的就是直接与浏览器元素交互，而不是使用 sendkeys。

你可能想看看[这个](https://stackoverflow.com/questions/8798260/html-parsing-of-cricinfo-scorecards/8846791#8846791)。一本有趣的读物，展示了如何将数据检索到 Excel。

[cricinfo记分卡的html解析](https://stackoverflow.com/questions/8798260/html-parsing-of-cricinfo-scorecards/8846791#8846791)

# r - 根据前一列的行创建新列

> ID：11693041
> 
> 赞同：0
> 
> 时间：2012-07-27T17:49:55.723
> 
> 标签：r, dataframe

我正在尝试将治疗标签分配给我的实验 ID。SO 帮助我走到了这一步，但现在我不确定为什么我的代码不起作用。id 是数字（作为因子输入（colname 是 plotF）），处理是 A、B 和 C。数据框非常大，这是一个示例。

```
data$trt[data$plotF == c(12, 21, 35, 43)] <- "A"
data$trt[data$plotF == c(15, 23, 32, 41)] <- "B"
data$trt[data$plotF == c(13, 24, 31, 46)] <- "C" 
```

输出是：

```
plotF  trt
21 <NA>
24    C
46 <NA>
12 <NA>
23 <NA>
31 <NA>
13 <NA>
43    A
32 <NA>
15 <NA>
35    A
41    B
24 <NA>
46 <NA>
32    B
31 <NA>
13    C
21    A
12 <NA>
43    A
23 <NA>
15 <NA>
41 <NA>
35 <NA> 
```

为什么它有时会起作用，但并非总是如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:57:48.890

如果您替换`==`为`%in%`以下内容，会发生什么？

```
data$trt[data$plotF %in% c(12, 21, 35, 43)] <- "A"
data$trt[data$plotF %in% c(15, 23, 32, 41)] <- "B"
data$trt[data$plotF %in% c(13, 24, 31, 46)] <- "C" 
```

# c++ - 如何在 Visual Studio 2010 中使用 SWIG 创建 DLL

> ID：11693047
> 
> 赞同：22
> 
> 时间：2012-07-27T17:50:27.053
> 
> 标签：c++, python, visual-studio-2010, swig

几周以来，我一直在尝试让 Microsoft Visual Studio 2010 使用 SWIG 为我创建一个 DLL。如果你已经经历过这个过程，你会不会好心给一个深思熟虑的一步一步的过程解释？我在网上到处找，花了很多时间尝试这样做；但是我发现的所有教程都已过时或解释不清。

我已经用 cygwin 成功地完成了这个过程；但正如你们中的一些人所知，cygwin DLL 不是很实用。

结果，我有 .i、.cpp 和 .h 文件，我知道它们可以一起创建一个 DLL。我只需要知道如何使用 Visual Studio C++ 2010 做到这一点。我的目标语言是 Python。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-31T03:20:04.867

分步说明。这假设您拥有源代码并且正在构建一个将源代码直接链接到其中的单个 DLL 扩展。创建一个工作项目后我没有回顾它，所以我可能错过了一些东西。如果您卡在某个步骤上，请评论此帖子。如果您有一个现有的 DLL 并希望创建一个包装它的 Python 扩展 DLL，则此步骤略有不同。如果您在这篇文章的评论方面需要帮助，我会扩展它。

**编辑 8/19/2012**：如果从 C 示例开始，请不要`-c++`在步骤 13 中使用，而是在步骤 14 和 19 中使用`.c`而不是`.cxx`包装文件扩展名。

1.  启动 Visual Studio 2010
2.  现有代码中的文件、新建、项目...
3.  选择“Visual C++”项目类型并单击下一步。
4.  输入 .cpp/.h/.i 文件所在的项目文件位置。
5.  对于项目名称，选择 .i 文件中 %module 语句中使用的名称（大小写很重要）。
6.  选择项目类型“动态链接库 (DLL) 项目”，然后单击“下一步”。
7.  将 Python.h 文件的路径添加到包含搜索路径，通常类似于“C:\Python27\include”，然后单击下一步。
8.  单击完成。
9.  右键单击解决方案资源管理器中的项目，添加，现有项...，然后选择您的 .i 文件。
10.  右键单击 .i 文件，属性，然后选择配置“所有配置”。
11.  将项目类型更改为“自定义构建工具”，然后单击应用。
12.  在属性中选择“自定义构建工具”（它会出现在上面的应用之后）。
13.  输入“swig -c++ -python -outdir $(Outdir) %(Identity)”的命令行（假设 SWIG 在您的路径中，并根据需要将生成的 .py 文件重定向到 Debug 或 Release 目录）。
14.  在输出中输入“%(Filename)_wrap.cxx;$(Outdir)%(Filename).py”。
15.  单击确定。
16.  右键单击 .i 文件，然后选择编译。
17.  右键单击项目，添加，新建过滤器，将其命名为“生成的文件”。
18.  右键单击“Generated Files”，单击“Properties”，然后将“SCC Files”设置为“False”（如果您使用源代码控制，这会阻止 VS2010 尝试在此过滤器中检入生成的文件）。
19.  右击“Generated Files”，Add，Exiting Item，选择编译生成的_wrap.cxx文件。
20.  右键单击项目，属性。
21.  选择配置“所有配置”。
22.  选择配置属性、链接器、常规、附加库目录并添加 python 库的路径，通常是“C:\Python27\libs”。
23.  选择 Configuration Properties、General 并将 TargetName 设置为“_$(ProjectName)”。
24.  将目标扩展名设置为“.pyd”。
25.  构建项目的“发布”版本。除非您构建 Python 本身的调试版本，否则您无法构建调试版本。
26.  打开一个控制台，进入项目的Release目录，运行python，导入你的模块，调用一个函数！

# html - 如何将 Google 已编入索引的所有网站添加到 Google 自定义搜索

> ID：11693052
> 
> 赞同：0
> 
> 时间：2012-07-27T17:50:33.350
> 
> 标签：html, google-search, google-search-api, google-custom-search

我想在谷歌自定义搜索中添加谷歌索引的所有网站。如果我尝试从 Google 自定义搜索中手动添加网站，那么包含所有这些网站将花费我的生命。有什么办法可以通过任何技巧来做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:39:08.967

我认为您的问题没有解决方案。原因如下：

谷歌提供了他们的搜索工具，使人们能够搜索他们自己的网站和他们选择的相关网站列表。但是，如果谷歌允许你在你的网站上使用他们的整个搜索工具，那么你就没有理由再访问谷歌了，他们的广告收入就会直线下降。

您可以考虑的一件事是选择您要添加的网站，然后创建一个脚本，该脚本将根据您的用户搜索内容自动添加更多网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T08:41:30.837

它在哪里说：要搜索的站点，不要进入添加特定站点的子菜单。旁边有一个下拉菜单，将从“仅搜索包含的站点”更改为“搜索整个网络但强调包含的站点”

[![搜索整个网络](../Images/276148dd1cd66f2a7985b1dc59edaeeb.png)](https://i.stack.imgur.com/nwaQD.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:04:59.860

据谷歌称，不可能进行所有网络搜索：http: [//support.google.com/customsearch/bin/answer.py ?hl=en&answer=1210656](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=1210656)

但是，可以将所有已知的顶级域包含到搜索引擎中。[根据：http: //support.google.com/customsearch/bin/answer.py](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=70322) ?hl=en&answer= 70322 它会像：*.com、*.ch、*.pl 等等：[http:// en.wikipedia.org/wiki/List_of_Internet_top-level_domains](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)

更重要的是，如果谷歌禁止执行所有网络搜索，那么任何黑客攻击都不会持续很长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:01:18.127

我认为这可能是您正在寻找的：

[http://www.google.com/cse/](http://www.google.com/cse/)

# xml - AS3：强制保存 Xml 文件

> ID：11693055
> 
> 赞同：0
> 
> 时间：2012-07-27T17:50:37.293
> 
> 标签：xml, actionscript-3, save, flash

我想知道是否有办法强制用户将 xml 文件保存在某个位置。即他们不能选择保存文件的位置。我希望它始终保存在与 swf 文件相同的位置。

* * *

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:10:53.283

如果它在线运行，您可以在编辑 xml 后将其转换为字符串。可以使用 POST 或 GET 请求将此字符串发送到 php 或其他服务器端语言。

因为 swf 的运行客户端，他们无法访问服务器上的文件。像 php 这样的服务器端语言可以访问文件并写入文件。

在 as3 上，将您的 xml 字符串发送到 php 脚本。（检查[AS3 URL 字符串 -> URLRequest](https://stackoverflow.com/questions/6085855/as3-url-string-urlrequest)）

```
// url variables all which will appear after ? sign
var url = "www.example.nl/phpfilelocation.php";
var urlVariables : URLVariables = new URLVariables ();
urlVariables.xmldata = myXml.toString();

var request : URLRequest = new URLRequest  ( url );
request.data = urlVariables;
request.method = URLRequestMethod.POST;

var loader : URLLoader = new URLLoader ();
loader.addEventListener( Event.COMPLETE, handleLoaderComplete )
loader.load ( request ); 
```

在 php 方面，您可以使用此代码（警告这是一个示例，并不安全，因为现在每个人都可以使用 url 编写您的 myFile.xml 并提供名为 xmldata 的发布数据。

```
$file = "myFile.xml";
$fileHandle = fopen($file, 'w');
fwrite($fileHandle , $_POST['xmldata']);
fclose($fileHandle ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:13:26.830

不，你不能。

In order to do that, you would need to know a valid path to the user's **filesystem**. You can't just use `C:\mylocation\`, because **Flash Player** will run in others OS's as well, which don't have `C:\mylocation\`.

If you are using Flash as an internal tool, and not for the web, you have alternatives, like storing the data in the clipboard, and then run a background application that will fetch that clipboard data and save it in a specific path; or simply using **AIR**.

# javascript - 图像未显示在 Jquery Prepend 上

> ID：11693056
> 
> 赞同：0
> 
> 时间：2012-07-27T17:50:38.323
> 
> 标签：javascript, jquery, prepend

我有以下功能，当我的用户登录 Facebook 时，它会在一个带有 gif 加载器的模态框和显示框之前添加。

```
function loadFacebookconnect() {
    $("#modalwait").prepend(
        "<div class='modal-backdrop id='modal-backdropid'></div>\
         <div class='modal hide fade in' id='myModal' style='display: block; '>\
             <div class='modal-body'>\
                 <p style='font-size: 28px; padding: 30px;text-align: center;'>\
                      <img style='padding-right:8px; vertical-align: text-bottom;'\
                           src='imgurl.gif'>\
                      Loading...\
                 </p>\
             </div>\
         </div>");
} 
```

正如我在用户通过 Facebook 进行身份验证时提到的那样，我调用此函数：

```
FB.Event.subscribe('auth.login', function(response) {
    loadFacebookconnect();
    window.location.reload();
}); 
```

我的简单问题是，当我使用 FB 进行身份验证时，我的图像不会加载。模态出现了，文本也出现了，但没有图像。我知道图像或 CSS 没有任何问题，因为当我如下所示定期调用它时，它可以完美运行并且图像会显示出来。

```
<button onclick="loadFacebookconnect()">Try it</button> 
```

非常感谢任何帮助，我知道这个问题可能看起来微不足道，但图像加载器非常重要，因为我的初始图形调用确实需要几秒钟。我还查看了几个 SO 问题[，例如 this one](https://stackoverflow.com/questions/9524458/why-does-my-image-not-show-up-when-i-use-javascript-innerhtml-to-call-it)，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:59:07.667

试试这个

```
$("#modalwait").prepend('<div class="modal-backdrop" id="modal-backdropid"></div><div class="modal hide fade in" id="myModal" style="display: block; "><div class="modal-body"><p style="font-size: 28px;padding: 30px;text-align: center;"><img style="padding-right:8px;vertical-align: text-bottom;" src="imgurl.gif"/>Loading...</p></div></div>');} 
```

# android - Android Dev：是否可以在联系人应用程序之上开发/自定义？

> ID：11693059
> 
> 赞同：2
> 
> 时间：2012-07-27T17:50:55.767
> 
> 标签：android, contacts, android-contacts

我敢肯定，这是一个非常小众的问题，但基本上我想知道的是新应用程序是否有可能修改 Android 中现有的联系人应用程序。举一个（非常）简单的例子，考虑一个应用程序，它可以让你将你女朋友的联系方式涂成粉红色，或者突出显示你所有的家庭成员。像这样简单的事情，改变个别联系人的外观。

请注意，我不想创建新的联系人应用程序。这显然是可能的，并且已经做到了。我只是想改变或定制现有的原生 Android 联系人应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:55:06.243

不，不幸的是，如果您想更改用户访问其联系人的方式，您必须创建自己的应用程序。无法在 Android 现有的默认联系人应用程序的基础上进行构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:50:45.037

实际上，您可以做一件小事。从 ICS 及更高版本开始，如果您注意到，人脉应用程序可以选择在 Skype、gtalk、facebook 等中显示特定联系人的可用性。这是通过某种插件机制完成的，其中每个“联系人提供者”（给它一个名字）可以将他们的信息提供给人员应用程序。（我还没有完全弄清楚这是如何完成的）。

您可以做的是：创建您自己的应用程序，该应用程序可插入人员应用程序（如 Skype、gtalk、fb 等），并为您选择的联系人提供“在线”状态。也许您甚至可以为这些联系人设置一些状态消息（您可以在联系人上看到 G+ 状态，所以应该可以）。不像你想做的那样花哨，但在某个地方。

# php - 长插入查询

> ID：11693062
> 
> 赞同：3
> 
> 时间：2012-07-27T17:51:27.763
> 
> 标签：php, javascript, mysql, node.js, wamp

我想在我的数据库中插入大约 12500 行，用于游戏服务器的地图。这是我的脚本生成查询

```
sql = "INSERT INTO `legends`.`map` (`x`, `y`, `land`, `collision`, `impedance`, `effect`) VALUES "
for (y=0;y<ig.game.collisionMap.data.length;y++){
   for (x=0;x<ig.game.collisionMap.data[y].length;x++){
      if (x==0&&y==0){
         comma=""
      }else{
         comma=","
      }
      sql=sql+comma+"("+x*55+","+y*55+",'kesmai',"+ig.game.collisionMap.data[y][x]+","+ig.game.backgroundMaps[0].data[y][x]+", '0')";
   }
}
console.log(sql) 
```

输出是 y=86 x=145 我的客户端脚本可以访问地图的数据，所以我只是将输出粘贴到 phpMyAdmin 以运行查询。我遇到的问题（我预期的）是我的 php 脚本只能运行 30 秒，这是我的错误。

致命错误：第 92 行 C:\wamp\apps\phpmyadmin3.4.10.1\libraries\session.inc.php 中的最大执行时间超过 30 秒

我正在运行 WAMP 服务器，并尝试在此处编辑我的 php.ini 文件

```
; Maximum execution time of each script, in seconds
; http://php.net/max-execution-time
; Note: This directive is hardcoded to 0 for the CLI SAPI
max_execution_time = 0

; Maximum amount of time each script may spend parsing request data. It's a good
; idea to limit this time on productions servers in order to eliminate unexpectedly
; long running scripts. 
; Note: This directive is hardcoded to -1 for the CLI SAPI
; Default Value: -1 (Unlimited)
; Development Value: 60 (60 seconds)
; Production Value: 60 (60 seconds)
; http://php.net/max-input-time
max_input_time = -1 
```

到目前为止没有运气......关于如何运行长查询的任何建议，例如this>？

我正在考虑暂时将其放入在 node.js 中运行的服务器脚本中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:54:42.177

我认为您正在寻找的是`set_time_limit()` [http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

但是您应该看看是否有任何方法可以提高查询本身的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:55:30.830

你们有一些非常好的建议，我无法为我的特定应用程序工作。我的解决方案是从 node.js 执行查询，将 sql 从我的客户端发送到服务器。而不是使用 phpMyAdmin。我确实尝试从我的 phpMyadmin 脚本中删除时间限制，但它没有用。我通过 websockets 传递了查询，但这不是必需的。

# python - 获取和更新磁盘空间使用情况的快速方法？

> ID：11693065
> 
> 赞同：0
> 
> 时间：2012-07-27T17:52:00.797
> 
> 标签：python, unix, diskspace

我需要监控网络磁盘空间使用情况并生成报告列表目录及其每个用户的大小。
有目录包含超过 1000 个文件，每个文件 20mb 大。
速度是关键，因为报告需要经常更新。

我的 Python 脚本遍历给定目录并将每个目录和文件信息存储到列表字典中。
字典的后期处理很快。I/O 是瓶颈。使用当前脚本，扫描一个 35TB 的目录大约需要 5-6 小时。

我试过普通的*os.walk* & *stat*， suprocessing *du*，*find -type f -printf*。

### os.walk 和 du

他们都深入到底部并统计每个目录，文件。虽然这是初始运行所必需的，但后续更新会因不必要地统计未修改的目录和文件而受到影响。而且我无法设置最大深度，因为如果有任何更改，我需要知道子目录中发生了什么变化。

### 查找类型 f

这将仅查找文件。和上面没有太大区别。至少这不会统计目录（目录信息是从驻留文件中收集的）。速度没有明显提升。

我曾希望使用目录的*修改时间*来检查内部是否发生了变化。如果是这样，请潜入，否则跳过。但是*mtime*只更新目录中创建、删除、重命名的项目。

那么除了暴力破解所有目录和文件之外，没有其他方法了吗？

```
Directory layout:
group_002/
    bob/
        fubar/
        etc/
    dave/
    jim/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:13:39.067

不确定这是否会更快，但您可以尝试生成用户目录列表，然后[在磁盘使用情况下通过此配方](http://code.activestate.com/recipes/577972-disk-usage/)运行它们。

# ruby-on-rails-3 - 在 Rails 查询中包含 has_many 记录

> ID：11693072
> 
> 赞同：1
> 
> 时间：2012-07-27T17:52:21.583
> 
> 标签：ruby-on-rails-3, activerecord, group-concat

我在模型用户和模型播放器之间有一个 has_many（通过帐户）关联。

我想知道查询所有用户的最佳方式是什么，并为每个返回的记录获取关联的玩家用户名属性（以逗号分隔的值）。

因此，例如，如果一个名为“John”的用户与 3 个用户名分别为“john_black”、“john_white”、“john_yellow”的玩家相关联。我希望查询不仅返回用户属性，还返回一个名为例如 player_username 的属性，该属性将具有以下值：`john_black, john_white, john_yellow`.

我在用户模型中尝试了以下 Arel 查询：

```
select(`users`.*).select("GROUP_CONCAT(`players`.`username` SEPARATOR ',') AS comma_username").joins(:user)
      .joins(:accounts => :player ) 
```

这给了我以下SQL：

```
SELECT `users`.*, GROUP_CONCAT(`players`.`username` SEPARATOR ',') AS comma_username FROM `users` INNER JOIN `accounts` ON `accounts`.`user_id` = `users`.`id` INNER JOIN `players` ON `players`.`id` = `accounts`.`player_id` 
```

如果我在 MySQL 控制台中执行它，它可以工作，但是如果我尝试从模型中获取，我不会得到逗号分隔的值。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:36:17.363

我相信 ActiveRecord 将 SQL 查询检索到的所有列与模型上的所有属性进行映射，在大多数情况下，这些属性完全相同。也许如果您在模型上创建虚拟访问器，ActiveRecord 可以将您的虚拟列映射到虚拟属性。

```
class User

  attr_accessible :player_username
  ... 
```

试一试，看看这是否有效。

# objective-c - UIPageControl 无法正确响应点击

> ID：11693073
> 
> 赞同：6
> 
> 时间：2012-07-27T17:52:22.473
> 
> 标签：objective-c, ios, uiscrollview, swipe, uipagecontrol

在我的 TestApp 中，我创建了一个“Carousel”类，它应该让我以一种简单的方式（通过简单地创建 Carousel 类的实例）创建一个带有 UIPageControl 的滑动菜单。

*   Carousel 是 UIView 的子类
*   在初始化时，它会创建一个 UIView，包含 UIScrollView、UIPageControl
*   我可以在滚动视图中添加更多 UIView

我不知道这是否是正确的方法，但我的示例在我的 TestApp 中运行良好。在页面之间滑动完美，并且 UIPageControl 中当前页面的显示是正确的。

如果没有一个问题： UIPageControl 有时会对点击/点击做出反应（到目前为止我只在模拟器中测试过！），有时不会。让我们说大多数时候它没有。我还不知道它什么时候出现，对我来说这只是随机的......

如下所示，我添加了

```
[pageControl addTarget:self action:@selector(pageChange:) forControlEvents:UIControlEventValueChanged]; 
```

到我的代码。我认为这可以正确处理水龙头？但不幸的是，pageChange 并不总是被调用（因此 UIPageControl 的值不会在我每次单击时改变）。

我将不胜感激对此的任何意见，因为我还找不到任何解决方案。

这是我到目前为止所拥有的：

**轮播.h**

```
#import <UIKit/UIKit.h>

@interface Carousel : UIView {
    UIScrollView *scrollView;
    UIPageControl *pageControl;
    BOOL pageControlBeingUsed;
}

- (void)addView:(UIView *)view;
- (void)setTotalPages:(NSUInteger)pages;
- (void)setCurrentPage:(NSUInteger)current;
- (void)createPageControlAt:(CGRect)cg;
- (void)createScrollViewAt:(CGRect)cg;

@end 
```

**轮播.m**

```
#import "Carousel.h"

@implementation Carousel

- (id)initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];

    if (self) {

        // Create a scroll view
        scrollView = [[UIScrollView alloc] init];
        [self addSubview:scrollView];

        scrollView.delegate = (id) self;

        // Init Page Control
        pageControl = [[UIPageControl alloc] init];
        [pageControl addTarget:self action:@selector(pageChange:) forControlEvents:UIControlEventValueChanged];
        [self addSubview:pageControl];

    }

    return self;

}

- (IBAction)pageChange:(id)sender {
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * pageControl.currentPage;
    frame.origin.y = 0;
    [scrollView scrollRectToVisible:frame animated:TRUE];
    NSLog(@"%i", pageControl.currentPage);
}

- (void)addView:(UIView *)view {
    [scrollView addSubview:view];
}

- (void)createPageControlAt:(CGRect)cg {
    pageControl.frame = cg;
}

- (void)setTotalPages:(NSUInteger)pages {
    pageControl.numberOfPages = pages;
}

- (void)setCurrentPage:(NSUInteger)current {
    pageControl.currentPage = current;
}

- (void)createScrollViewAt:(CGRect)cg {
    [scrollView setPagingEnabled:TRUE];
    scrollView.frame = cg;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width*pageControl.numberOfPages, scrollView.frame.size.height);
    [scrollView setShowsHorizontalScrollIndicator:FALSE];
    [scrollView setShowsVerticalScrollIndicator:FALSE];

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

    float frac = scrollView.contentOffset.x / scrollView.frame.size.width;
    NSUInteger page = lround(frac);
    pageControl.currentPage = page;

}

@end 
```

**ViewController.m**（viewDidLoad 中的某处）

```
Carousel *carousel = [[Carousel alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

for (int i=0; i<5; i++) {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(i * 320, 0, 320, 420)];
    UIColor *color;
    if(i%3==0) color = [UIColor blueColor];
    else if(i%3==1) color = [UIColor redColor];
    else color = [UIColor purpleColor];
    view.backgroundColor = color;
    [carousel addView:view];
    view = nil;
}

[carousel setTotalPages:5];
[carousel setCurrentPage:0];

[carousel createPageControlAt:CGRectMake(0,420,320,40)];
[carousel createScrollViewAt:CGRectMake(0,0,320,420)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:57:24.340

你的代码是正确的。很可能您的框架`pageControl`很小，因此没有太多区域可以查找触摸事件。您需要增加**高度**的大小，`pageControl`以确保始终能够识别水龙头。

# git - git：'credential-cache' 不是 git 命令

> ID：11693074
> 
> 赞同：312
> 
> 时间：2012-07-27T17:52:25.793
> 
> 标签：git, msysgit, git-bash, git-config

我完全按照[这些说明](https://help.github.com/articles/set-up-git)进行操作，包括有关密码缓存的部分。似乎说明是错误的，因为每次`git push origin master`我收到此错误时：

```
git: 'credential-cache' is not a git command. See 'get --help'. 
```

...此时我被迫输入我的用户名和密码。这样做之后，我再次看到相同的错误消息，然后是`git push`.

这是我的 .gitconfig 文件的内容：

```
[user]
    name = myusername
    email = myusername@myemaildomain.com
[credential]
    helper = cache 
```

需要明确的是，在我安装 Git 并运行 Git Bash 之后，这正是我输入的内容：

```
git config --global user.name "myusername"
git config --global user.email "myusername@myemaildomain.com"
git config --global credential.helper cache 
```

请帮忙。这太令人沮丧了！

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2012-08-09T18:06:20.370

从[我发现的博客中](http://blog.sdbarker.com/2012/07/09/git-credential-caching-on-windows/)：

> 这个 [git-credential-cache] 不适用于 Windows 系统，因为 git-credential-cache 通过 Unix 套接字进行通信。

**用于 Windows 的 Git**

由于 msysgit 已被 Git for Windows 取代，因此现在使用[Git for Windows](https://git-for-windows.github.io/)是最简单的选择。某些版本的 Git for Windows 安装程序（例如 2.7.4）在安装期间有一个复选框以启用 Git 凭据管理器。这是一个屏幕截图：

[![Git For Windows 2.7.4 安装向导截图](../Images/03c94098e12af46ab5e9f8aa4dbbb95c.png)](https://i.stack.imgur.com/1vwlV.jpg)

**还在使用 msysgit？对于 msysgit 版本 1.8.1 及更高版本**

`wincred`助手是在 msysgit 1.8.1 中添加的。按如下方式使用它：

```
git config --global credential.helper wincred 
```

**对于早于 1.8.1 的 msysgit 版本**

首先，下载[git-credential-winstore](https://github.com/anurse/git-credential-winstore/downloads)并将其安装在您的 git bin 目录中。

接下来，确保包含的目录`git.cmd`在您的 Path 环境变量中。默认目录是64 位系统上的*C:\Program Files (x86)\Git\cmd或 32 位系统上的**C:\Program Files\Git\cmd*。一个简单的测试方法是启动命令提示符并键入`git`. 如果您没有获得 git 命令列表，则说明设置不正确。

最后，启动命令提示符并键入：

```
git config --global credential.helper winstore 
```

或者您可以`.gitconfig`手动编辑文件：

```
[credential]
    helper = winstore 
```

完成此操作后，您可以通过 Windows 凭据管理器管理您的 git 凭据，您可以通过 Windows 控制面板调出该管理器。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-03-08T11:12:36.240

看起来`git`现在`wincred`在 Windows (msysgit) 上提供了开箱即用的功能：

```
git config --global credential.helper wincred 
```

**参考**： [https ://github.com/msysgit/git/commit/e2770979fec968a25ac21e34f9082bc17a71a780](https://github.com/msysgit/git/commit/e2770979fec968a25ac21e34f9082bc17a71a780)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-12-31T03:18:21.737

第一次运行`git config --global credential.helper wincred`

然后转到：`CONTROL PANEL\CREDENTIAL MANAGER\WINDOWS CREDENTIAL\GENERIC CREDENTIAL`

然后在`Internet or network address:` 添加`git:https://`{username}中单击添加凭据`.github.com`

`User:`{姓名}

`Password:`{密码}

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-02-26T17:16:34.717

我在 windows7 上使用 AptanaStudio3 时遇到了这个问题。这帮助了我：

```
git config --global credential.helper wincred 
```

从[这里获取的代码](https://stackoverflow.com/a/15382950/1344509#remove-credentials-from-git)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-11-17T17:48:30.833

首先找到您用于 GIT 的版本。

使用这个命令： git --version

如果您有比 1.7.10 更新的版本。

然后只需使用此命令即可。

视窗：

```
git config --global credential.helper wincred 
```

苹果电脑

```
git config --global credential.helper osxkeychain 
```

[参考](https://help.github.com/articles/caching-your-github-password-in-git/)

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-11-01T16:45:03.547

A similar error is `'credential-wincred' is not a git command`

## The accepted and popular answers are now out of date...

> `wincred` is for the project git-credential-winstore which is [no longer maintained](https://archive.codeplex.com/?p=gitcredentialstore).
> 
> It was replaced by **[Git-Credential-Manager-for-Windows](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)** maintained by [Microsoft open source](https://opensource.microsoft.com/).

Download the release as zip file from link above and extract contents to

```
\cygwin\usr\libexec\git-core 
```

(or `\cygwin64\usr\libexec\git-core` as it may be)

Then enable it, (by setting the global `.gitconfig`) - execute:

```
git config --global credential.helper manager 
```

**How to use**

> No further config is needed.
> 
> It works [automatically] when credentials are needed.
> 
> For example, when pushing to Azure DevOps, it opens a window and initializes an oauth2 flow to get your token.

ref:

*   [https://github.com/babun/babun/issues/318](https://github.com/babun/babun/issues/318)

*   [https://github.com/Microsoft/Git-Credential-Manager-for-Windows#installation-in-an-msys2-environment](https://github.com/Microsoft/Git-Credential-Manager-for-Windows#installation-in-an-msys2-environment)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-05-24T21:47:18.707

现在有一种更简单的方法来设置 Git 密码缓存，方法是在 Windows 上双击一个小*exe 。*`git-credential-winstore`尽管该项目已从 GitHub 移至[http://gitcredentialstore.codeplex.com/](http://gitcredentialstore.codeplex.com/) ，但该程序仍基于投票最多的答案。

您可以从此博客文章下载 exe（和 Mac 的二进制文件）：[https ://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage](https://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-12-25T16:05:13.310

我通过从特定项目的配置中删除该`credential`部分来解决此问题：

*   刚刚输入：`git config -e`
*   在编辑器中，我删除了整个部分**`[credential] helper = cache`**。

这消除了烦人的消息：

`git: 'credential-cache' is not a git command. See 'git --help'.`

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-09-17T16:03:35.620

为了解决这个问题的其他人，我在 Ubuntu 中遇到了同样的问题（即我的密码没有缓存，尽管正确设置了选项并得到了错误`git: 'credential-cache' is not a git command.`），直到我发现**这个功能只是在 Git 1.7.9 及更高版本中可用**。

在旧版本的 Ubuntu（Natty；我是一个顽固的 Gnome 2 用户）上，repo 中的版本是 git 版本 1.7.4.1。我使用以下 PPA 进行升级： [https ://launchpad.net/~git-core/+archive/ppa](https://launchpad.net/~git-core/+archive/ppa)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-10-24T20:51:44.980

为了其他人有这个问题 - 我来到这里是因为我试图让我如何设置一个新的 github 存储库变得可爱，但是根据[设置页面](https://help.github.com/articles/set-up-git)，凭据帮助程序不起作用，除非你克隆一个存储库。

“提示：凭据助手仅在您克隆 HTTPS 存储库 URL 时起作用。如果您改用 SSH 存储库 URL，则使用 SSH 密钥进行身份验证。本指南提供生成和使用 SSH 密钥对的帮助。”

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-08-19T18:05:35.200

我意识到我的谈话有点晚了，但我遇到了完全相同的问题在我的 git config 中我有两个条目凭据......</p>

**在我的 .gitconfig 文件中**

```
[credential]
helper = cached
[credentials]
helper = wincred 
```

**修复：将我的 .gitconfig 文件更改为以下设置**

```
[credential]
helper = wincred
[credentials]
helper = wincred 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-12-26T04:05:27.187

另一个有效的解决方法是：

1- 转到控制面板并为 github.com 添加您的凭据，如下所示：

[![GitHub 的 Windows 凭据](../Images/bee8036feba10d801900b5f91bf28a03.png)](https://i.stack.imgur.com/Z2j17.png)

2-转到CMD并输入以下命令：

*   a- cd %localappdata%\Atlassian\SourceTree\git_local\mingw32\bin\
*   b- git.exe 配置 --edit --system
*   c- 更正最后一行：helper = manager
*   d- 通过单击 CTRL+C 然后输入 :wq 然后按 Enter 来保存新的配置文件

[![更新配置：helper = manager](../Images/f6759d73974fd86bcda4e68d90be561f.png)](https://i.stack.imgur.com/22VFw.png)

这对我来说非常有效！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-22T00:41:23.000

在较旧的 Ubuntu Linux 系统上：

```
git config --global credential.helper store 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-01-12T15:53:09.833

`helper=`我的 .gitconfig 的 [credential] 部分中有三个不同的条目，其中一个是空的。删除其他两个并`helper=wincred`继续为我解决了这个问题。

顺便说一句：我不知道为什么，但我没有立即找到我的 .gitconfig。然后我在 C:\Users\username 中找到了它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-11-14T04:25:38.163

我真的只是经历了这个！

1.  下载 Git Credential Manager Core 并安装它：[https ://github.com/microsoft/Git-Credential-Manager-Core#download-and-install](https://github.com/microsoft/Git-Credential-Manager-Core#download-and-install)
2.  转到`Account Settings > Emails`GitHub 上。你应该看到这样的东西： [![在此处输入图像描述](../Images/f45ea7030e5de2ba4777d2750b4edfe7.png)](https://i.stack.imgur.com/5iRR3.png)
3.  突出显示的电子邮件是系统生成的，以保持您的私人电子邮件的私密性。现在复制它并在下一步中使用它
4.  配置 git：

```
 git config --global user.name "yourusername"
 git config --global user.email "1234567+yourgithubusername@users.noreply.github.com"
 git config --global credential.helper cache 
```

现在，您的 git 命令应该可以再次工作了。

小提示：我使用的是 Linux Mint。YMMV

附加说明： Git Credential Manager Core v 2.0.567 在他们的 Debian backage 中有一个[错误。](https://github.com/microsoft/Git-Credential-Manager-Core/issues/528)请在新版本发布前安装[v2.0.474 。](https://github.com/microsoft/Git-Credential-Manager-Core/releases/tag/v2.0.474)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-03T17:10:30.820

在 mac 上运行以下命令：

`git config --global credential.helper osxkeychain`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-01-10T08:29:05.040

在我们的域更改后，我们的 Azure DevOps 存储库也遇到了同样的问题，即从 @xy.com 到 @xyz.com。为了解决这个问题，我们生成了一个新的具有以下权限的个人访问令牌：

代码：读&写 打包：读

然后我们打开 Windows 凭据管理器，添加一个新的通用 Windows 凭据，其中包含以下详细信息：

**Internet 或网络地址：** “git:{ *projectname* }@dev.azure.com/{ *projectname* }” - 或者，您应该在此处使用您的 git 存储库名称。
**用户名：** “个人访问令牌”
**密码：** {*生成的个人访问令牌*}

之后我们所有的 git 操作都重新开始工作了。希望这对其他人有帮助！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-13T07:35:38.220

当前与 Git for Windows（2.32，2021 年第 2 季度）打包的凭证助手是

```
 git config credential.helper
 manager-core

 where git-credential-manager-core
 C:\Program Files\Git\mingw64\libexec\git-core\git-credential-manager-core.exe 
```

这是在 GCM-core（Git Credential Manager Core）之后：[`microsoft/Git-Credential-Manager-Core/`](https://github.com/microsoft/Git-Credential-Manager-Core/)

> Git Credential Manager Core (GCM Core) 是基于 .NET 构建的安全 Git 凭证助手，可在 Windows 和 macOS 上运行。Linux 支持处于早期预览阶段。
> 
> 与 Git 的内置凭证助手（Windows：wincred，macOS：osxkeychain，Linux：gnome-keyring）相比，GCM Core 为[Azure DevOps](https://dev.azure.com/)提供单因素身份验证支持、Azure DevOps Server（以前称为 Team Foundation Server）、GitHub 和 Bitbucket。
> 
> Git Credential Manager Core (GCM Core) 取代了基于 .NET Framework 的[Git Credential Manager for Windows (GCM)](https://github.com/microsoft/Git-Credential-Manager-for-Windows)和基于 Java 的[Git Credential Manager for Mac 和 Linux (Java GCM)](https://github.com/microsoft/Git-Credential-Manager-for-Mac-and-Linux)，在所有平台上提供一致的身份验证体验。

* * *

随着 Git 2.34（2021 年第四季度），Unix 套接字开始考虑用于 Windows 的 Git：

请参阅[Carlo Marcelo Arenas Belón ( ) 的](https://github.com/carenas)[提交 bb390b1](https://github.com/git/git/commit/bb390b1f49406d967e8bf3401337cf1d9535f820)、[提交 245670c](https://github.com/git/git/commit/245670cd46c4713818b5fbca2c084ce2e19f4ed8)、[提交 0fdcfa2](https://github.com/git/git/commit/0fdcfa2f9f59a8bf4202ac3933991f42a4ac1393)（2021 年 9 月 14 日[）](https://github.com/carenas)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c2e7990](https://github.com/git/git/commit/c2e799012b3657f4f91560d299b5606c297e7cf7))^(中，2021 年 9 月 23 日）)[`carenas`](https://github.com/carenas)
^([`gitster`](https://github.com/gitster))

> ## [`git-compat-util`](https://github.com/git/git/commit/bb390b1f49406d967e8bf3401337cf1d9535f820): 在 windows 中包含 unix 套接字的声明
> 
> ^(签字人：Carlo Marcelo Arenas Belón)

> 自 Windows 10 版本 1803 和 Windows Server 2019 起可用。
> 
> `NO_UNIX_SOCKETS`仍然是 Windows 构建的默认设置，因为它们需要保持与 Windows 7 之前的版本的向后兼容性，但允许在其他情况下包含标头。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-08-13T07:09:51.380

我最初的答案结果证明即使对我自己也不是很有用，所以我仔细研究了一下，发现了一个 hack（虽然有点复杂）。

所以，我`git`在 MSYS2 下使用，并且我想使用`credential-cache`, 来暂时记住我的密码（而且我还没有看到这样的用例`wincred`或其他适用于 Windows 的方法）。

基本上，这需要在[https://github.com/git/git/blob/55144cc/builtin/credential-cache--daemon.c#L239](https://github.com/git/git/blob/55144cc/builtin/credential-cache--daemon.c#L239)中进行破解- 而不是`die`-ing 在该行中，我们想继续.

所以，首先，我们要`git`在 MSYS2 下构建。

*   问题 1：您不能只在 MSYS2 下构建正确的[https://github.com/git/git ，链接阶段将失败，并显示“](https://github.com/git/git) *src/git/cache.h:1262: undefined reference to `win32_has_dos_drive_prefix'* ”和类似消息

因此，我们需要构建`git`在 MSYS2 中使用的实际。首先，检查版本：

```
$ git --version
git version 2.33.0
$ pacman -Ss git | grep installed # msys/git 2.33.0-1 (VCS) [installed] 
```

然后，按照[https://www.msys2.org/wiki/Creating-Packages/](https://www.msys2.org/wiki/Creating-Packages/)，我们可以这样做：

```
$ git clone "https://github.com/msys2/MSYS2-packages"
$ cd MSYS2-packages/
$ cd git
$ makepkg -sCLf
==> Making package: git 2.33.0-1 (Thu, Sep 23, 2021 12:47:33 PM)
==> Checking runtime dependencies...
==> Checking buildtime dependencies...
==> Installing missing dependencies...
...
make[1]: Entering directory '/c/src/MSYS2-packages/git/src/git-2.33.0'
make[1]: 'GIT-VERSION-FILE' is up to date.
make[1]: Leaving directory '/c/src/MSYS2-packages/git/src/git-2.33.0'
sed -e '1s|#!.*/sh|#!/bin/sh|' git-subtree.sh >git-subtree
chmod +x git-subtree
make: Leaving directory '/c/src/MSYS2-packages/git/src/git-2.33.0/contrib/subtree'
==> Starting check()... 
```

注意这里：

*   这个构建过程首先以 ASCIIDOC/XMLTO 部分结束，这在我的机器上需要半小时
*   然后它会在一个需要更长时间的部分结束`*** prove ***`，但可以用 Ctrl-C 中断，并且构建的可执行文件不会被删除。

所以，现在我们想在源代码中做一个 hack；笔记：

*   **如果我们在源代码中进行hack**，我们不想使用`makepkg -sCLf`，因为这将删除源目录（以及所有构建的 .exe 工件），然后在构建之前重建它

因此，我们使用 hack 进行破解`sed`，然后构建：

```
$ sed -i 's/die(_(permissions_advice), dir);/fprintf(stderr, "Permissions on cached credentials socket directory %s are too loose, but HACK: going on\\n", dir);/' ./src/git-2.33.0/builtin/credential-cache--daemon.c
$ (cd src/git-2.33.0/; make)
    CC builtin/credential-cache--daemon.o
    LINK git.exe
...
    SUBDIR templates 
```

在这一点上，请注意，黑客最终至少包含三个可执行文件，可以通过以下方式确认：

```
$ grep -ao ....HACK........ ./src/git-2.33.0/git-credential-cache--daemon.exe
$ grep -ao ....HACK........ ./src/git-2.33.0/git-credential-cache.exe
$ grep -ao ....HACK........ ./src/git-2.33.0/git.exe 
```

...在替换所有三个之后，我只能让它工作：

```
# backup the original files:

$ mv /usr/lib/git-core/git-credential-cache--daemon.exe /usr/lib/git-core/__git-credential-cache--daemon_orig.exe
$ mv -v /usr/lib/git-core/git-credential-cache.exe /usr/lib/git-core/__git-credential-cache__orig.exe
$ mv -v /usr/bin/git.exe /usr/bin/__git_orig.exe
$ mv -v /usr/lib/git-core/git.exe /usr/lib/git-core/__git_orig.exe

# copy over the hacked files:

cp -v ./src/git-2.33.0/git-credential-cache--daemon.exe /usr/lib/git-core/
cp -v ./src/git-2.33.0/git-credential-cache.exe /usr/lib/git-core/
cp -v ./src/git-2.33.0/git.exe /usr/bin/
cp -v ./src/git-2.33.0/git.exe /usr/lib/git-core/ 
```

在这一点上，`credential-cache`我也开始在 MSYS2 上工作（在有限的时间内缓存密码）；只是它在启动时转储了被黑的行：

```
$ git pull
Password for 'https://user@git.mysite.com':
Permissions on cached credentials socket directory /home/user/.cache/git/credential are too loose, but HACK: going on
Already up to date.

# second pull, password is cached
$ git pull
Already up to date. 
```

有点棘手，但似乎有效。

PS：一个棘手的事情是，我最初`die`只用`printf`to替换`stdout`，但一直失败；事实证明，`stdout`它用于进程间通信，并且要成功，显然答案`ok\0`是`stdout`三个字节；所以解决方案是打印通知`stderr`。

* * *

（原答案）：

虽然没有完全按照要求回答问题，但这是我能找到的最合适的问题，将其记录为答案：

我`git`在Windows 10的MSYS2下使用，目前有以下版本：

```
$ git --version
git version 2.32.0 
```

我通常只想让 git 在有限的时间内（可能 10 分钟左右）缓存我的密码，然后忘记它；而且我还没有看到`wincred`在该用例中使用或其他特定于 Windows 的凭据管理器。

话虽这么说，但对我来说有一个“简单的解决方法”——基本上，凭证管理器第一次运行就可以了；只有在随后的使用中，我才得到：

```
$ git push
Password for 'http://user@githost.example.com':
fatal: The permissions on your socket directory are too loose; other
users may be able to read your cached credentials. Consider running:

        chmod 0700 /home/user/.cache/git/credential
fatal: cache daemon did not start:
Enumerating objects: 8, done.
Counting objects: 100% (8/8), done.
... 
```

因此，基本上，解决方法是删除`credential`目录 - 此后，凭据缓存管理器就像第一次一样运行，并在有限的时间内缓存密码 - 就像我想要的那样：

```
$ rm -rf ~/.cache/git/credential

# note below, the very first pull still asks for a password:

$ git pull
Password for 'http://user@githost.example.com':
Already up to date.

# ... but the second pull does not, it uses credentials cache

$ git pull
Already up to date. 
```

对我来说已经足够了，我猜`:)`

编辑：不是真的，我在此之后立即体验到，如果您尝试拉入另一个选项卡，错误就会返回。

# wpf - Telerik 的 RadDataFilter 未找到

> ID：11693076
> 
> 赞同：1
> 
> 时间：2012-07-27T17:52:33.190
> 
> 标签：wpf, telerik

我正在尝试开始使用 Telerik 的 RadDataFilter。

```
 xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" 
```

...

```
 <telerik:RadDataFilter Name="radDataFilter" 
     Source="{Binding FirstEntries}"/> 
```

但我收到一个错误：

XML 命名空间“http://schemas.telerik.com/2008/xaml/presentation”中不存在标记“RadDataFilter”。第 44 行位置 10。

你能向我解释一下我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:05:34.843

您的项目是否引用了 Telerik.Windows.Controls.dll 和 Telerik.Windows.Controls.Data.dll？[RadDataFilter](http://www.telerik.com/help/wpf/datafilter-getting-started.html#sectionSectionID0EEAAA)的Telerik 文档提到这两个参考都是必要的。

通过尝试构建一个使用 RadDataFilter 但仅引用提到的两个程序集之一的项目，我能够重现您遇到的错误。当我添加对第二个的引用并重建时，错误就消失了。

（诚​​然，这是使用 Silverlight 版本的控件。但是，Telerik RadControls 的 WPF 和 Silverlight 版本是从相同的源代码构建的，所以我希望 WPF 版本的控件行为相同。）

# r - 为什么聚类图标签使用行而不是 ID 列中的名称？

> ID：11693078
> 
> 赞同：1
> 
> 时间：2012-07-27T17:52:36.537
> 
> 标签：r, plot, hierarchical-clustering

我正在处理一个数据集（第 1 列 = 基因名称和第 2 列 = 表达值），我正在尝试做一个聚类图，但我发现分支是用行号而不是列中的基因 ID 标记的1.

数据集：[https ://dl.dropbox.com/u/364456/miRNA.csv](https://dl.dropbox.com/u/364456/miRNA.csv)

使用：

```
attach(animals)
d=dist(as.matrix(animals))
hc=hclust(d)
plot(hc) 
```

结果图：

![在此处输入图像描述](../Images/508adcccda0d43357e450ac5819fa557.png)

我尝试进行 kmeans 聚类并最终收到此错误：

> 通过强制引入的 NA。

这表明我没有正确格式化我的数据文件。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:48:29.507

为了`hclust`将您的基因名称识别为正确的标签名称，此列必须是行名称。

问题：基因`mmu-miR-191`出现两次，行名不能重复。考虑到两行的值相同，我只是假设它是重复的并删除第二行。

```
read.table("miRNA.csv", sep=",", header=TRUE, row.names=1) -> mirna
mirna[-34,] -> mirna  # Delete the redundant row.
row.names(mirna) <- mirna[,1] # Declare column 1 as the row names
dist(as.matrix(mirna)) -> d # And then your routine
hc <- hclust(d)
plot(hc) 
```

![在此处输入图像描述](../Images/bd17106d6824b089702f7bb9345031f5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T12:10:05.707

默认情况下，行号或行名用于标记观测值。但是，您可以使用标签参数来选择用于标签的变量。

```
plot(modelname, labels=dataset$variable) 
```

# c++ - OpenCV 处理图像的一部分

> ID：11693079
> 
> 赞同：1
> 
> 时间：2012-07-27T17:52:42.740
> 
> 标签：c++, opencv

我正在尝试使用带有 alpha 通道的 PNG 从视频流中“屏蔽”当前帧。

我的 PNG 在我不想处理的区域有黑色像素，在其他区域有 alpha - 目前它保存了一个具有 4 个通道的 4 色图像，但它也可能是一个二进制图像。

我正在对图像进行背景减法和轮廓查找，所以我想如果我将我的“蒙版”图像中的黑色像素复制到当前图像中，那么在黑色区域中将找不到轮廓。这是一个好方法吗？如果是这样，我如何从一个`cv::Mat`上复制黑色/非透明像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:13:27.397

您所描述的对我来说听起来像是使用图像蒙版。当 OpenCV 库中有这么多可用的方法支持遮罩时，您会在 alpha 通道中执行此操作很奇怪。与其使用 alpha 通道，不如在您想找到轮廓的任何地方创建一个具有非零值的单独二进制图像？

根据您使用的算法，您的假设是正确的，即您不会在黑色像素区域中找到轮廓。不幸的是，我不知道有任何有效的方法可以选择性地将像素从一个图像复制到另一个图像，而无需深入了解 Mat 结构的本质，以及从一个字节到另一个字节/像素到另一个像素的迭代。将上面介绍的掩码想法与您的预处理函数一起使用，然后将生成的二进制图像发送到 findContours 等，将允许您利用 OpenCV 库已经编写好的和优化的代码，并保留更多你头上的头发，它所属的地方；）。

# postgresql - 按创建时间查询行？

> ID：11693084
> 
> 赞同：9
> 
> 时间：2012-07-27T17:53:12.383
> 
> 标签：postgresql, datetime

我有一个不包含日期或时间相关字段的表。我仍然想根据创建记录/行的时间来查询该表。有没有办法在 PostgreSQL 中做到这一点？

我更喜欢直接在 PostgreSQL 中执行此操作的答案。但如果那不可能，hibernate 可以为 PostgreSQL 做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T05:28:15.017

基本上：**没有**。PostgreSQL 中的行没有自动时间戳。

我通常在我的表中添加这样的列（忽略时区）：

```
ALTER TABLE tbl ADD COLUMN log_in timestamp DEFAULT localtimestamp NOT NULL; 
```

只要您不操纵该列中的值，您就会获得创建时间戳。您可以添加触发器和/或限制写入权限以避免对值进行调整。

### 二等舱选项

*   如果您有一个序列列，您至少可以以*某种*概率判断输入行的顺序。这不是 100% 可靠的，因为可以手动更改值，并且应用程序可以从序列中获取值并且`INSERT`是无序的。

*   如果您创建了 table [`WITH (OIDS=TRUE)`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)，那么 OID 列可能是一些指示 - 除非您的数据库被大量编写和/或非常旧，那么您可能已经经历了 OID 环绕，并且后面的行可能具有较小的 OID。这就是为什么这个功能几乎不再使用的原因之一。

    默认取决于[`default_with_oids`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-DEFAULT-WITH-OIDS)我引用手册的设置：

> 该参数默认关闭；在 PostgreSQL 8.0 和更早的版本中，它默认是打开的。

*   如果您没有更新您的行或经历转储/恢复周期，或运行`VACUUM FULL`or`CLUSTER`或 .. ，则纯`SELECT * FROM tbl`文本按输入顺序返回所有行。但这是非常不可靠且依赖于实现的。PostgreSQL（像任何 RDBMS 一样）不保证没有`ORDER BY`子句的任何顺序。

# javascript - 图像悬停时显示下拉菜单

> ID：11693092
> 
> 赞同：-3
> 
> 时间：2012-07-27T17:53:39.590
> 
> 标签：javascript, jquery, drop-down-menu

我正在实施类似于雅虎新闻的朋友活动选项卡，就像我网站上的这个[链接一样。](http://in.news.yahoo.com/what-makes-iit-kanpur-india%E2%80%99s-best-engineering-college.html#prev)它显示了您的朋友在我的网站上所做的事情！

请连接 facebook 以查看活动标签。但是，我无法制作一个正确的下拉菜单，可以在其中显示我网站上的产品。

任何人都可以将我重定向到一些适当的插件或提供一些其他提示吗

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:59:26.250

网络上有很多 HTML 下拉菜单的示例。一个快速的谷歌搜索会给你一些工作。这是一个：

[http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizo​​ntal-dropdown-menu-with-html-css-and-jquery/](http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizontal-dropdown-menu-with-html-css-and-jquery/)

想要：

[http://www.99points.info/2010/09/fancy-menus-using-jquery-and-css/](http://www.99points.info/2010/09/fancy-menus-using-jquery-and-css/)

# .net - 如何对待所有服务引用返回类型相同

> ID：11693094
> 
> 赞同：0
> 
> 时间：2012-07-27T17:54:19.450
> 
> 标签：.net, wcf, silverlight, service-reference

我有一个 Silverlight 项目，它引用了一些 Web 服务。每个 Web 服务方法都返回一个标准的响应包装对象，称为`GenericWebResponse`. 此类包含有关调用是否成功的信息，以及一些状态代码（如果失败则指示失败的原因）。常见的情况是身份验证票证已过期，或者用户无权执行该操作。

无论如何，每当 Web 服务调用失败时，我都想以同样的方式对待它。我想创建一个日志条目，通知用户出现问题等。

由于我有多个服务，每个服务引用都会生成同一个`GenericWebResponse`类的一个新实例。所以我有`ProductService.GenericWebResponse`and `OrderService.GenericWebResponse`，显然.NET 将它们视为完全独立的类。

我想要一种针对这些对象编写代码的方法。我知道响应总是相同的，但 .NET 不知道这一点。我明白了。但是有什么方法可以针对这些对象编写代码，这样我就不必为我拥有的每个服务编写新版本的失败日志记录代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:52:39.327

您可以为每个代理生成的响应类型创建一个部分类，该类实现您定义的公共接口，并在您的实现中转发到具体的代理生成类型。使用 T4，可能有一种方法可以自动生成而不是手动生成。

如果您定义了服务并可以访问接口类型，那么您可以以不同的方式创建代理....动态代理....或使用您自己的 T4 模板。

[http://wcfdynamicclient.codeplex.com/](http://wcfdynamicclient.codeplex.com/)

[http://intellecting.net/blog/post/Using-T4-To-Generate-WCF-Client-Proxy.aspx](http://intellecting.net/blog/post/Using-T4-To-Generate-WCF-Client-Proxy.aspx)

过去使用过 DynamicProxy...有 2 个好处....它解决了当通道出现故障时您不能再使用代理的问题...以及在开发时您的服务接口是流畅的/不断发展......您不必每次都更新您的服务参考......使用您的服务的 C# 接口意味着您在构建时保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:56:19.773

如果您知道字段完全相同，则一种选择是使用反射来提取属性值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:50:19.913

如果服务是.NET服务，那么当你使用“添加服务引用”时，可以点击“高级”，选择“重用类型”。您将需要引用包含原始类型的项目，但它应该为每个引用使用真实类型。

# android - 这种 Google LVL 政策实施是否合理安全？

> ID：11693100
> 
> 赞同：15
> 
> 时间：2012-07-27T17:54:33.773
> 
> 标签：android, algorithm, google-play, android-lvl, access-rights

`ServerManagedPolicy`Google 在其[许可证验证库](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)中提供的默认值依赖于服务器响应来确定许可证重新验证间隔。这导致需要永久每隔几天重新验证一次。这不仅会给用户带来麻烦，对于长时间没有连接的用户来说，这可能是一个严重的问题。（我们刚刚收到一位用户的询问，该用户预计将在几周内没有互联网连接，这就是提出这个问题的原因。）

总之，我正在寻找一种能够完成两件事的算法：

1.  与 相比，大大降低了连接要求`ServerManagedPolicy`；
2.  提供相同级别的反盗版保护。

在回答[这个问题](https://stackoverflow.com/questions/5433036/what-is-a-reasonable-licensing-policy-using-android-market-licensing)时，建议的策略算法是忽略 Google 服务器响应中提供的时间，而是使用大约一个月的 LICENSED 到期期限，每隔几天尝试一次许可证检查（如果收到一个 LICENSED 响应）。

虽然这种方法部分解决了第一个目标，但它仍然要求用户在使用该应用程序时每月连接一次，因此它不适用于我们的（至少一个）用户。

以下算法实现了第一个目标，但我不知道第二个目标。任何指出该算法弱点的评论，或对另一种方法的建议，都将受到欢迎。

1.  首次运行时，请进行许可证检查并坚持在提供完整功能之前进行 LICENSED 响应。收到后，设置一个相对较短的到期期限（但比 Google Play 提供的退款期限长，目前为 15 分钟）。在此之后还要注册几天的宽限期。
2.  该应用程序将在许可证到期后再次开始检查。如果连接失败（飞行模式等），它仍然可以工作，直到宽限期到期。
3.  宽限期到期后，坚持第二次 LICENSED 响应，然后再允许正常的应用程序运行。
4.  收到第二个 LICENSED 响应后，永久启用该应用程序的所有功能，不再费心检查。
5.  如果在任何时候收到 UNLICENSED 响应，请永久禁用全部功能。（当然，用户可以通过删除所有应用数据来恢复到第 1 步。）

附加点：

*   有人建议放弃第一次许可证检查，等到返回期限到期后再进行许可证检查。坚持第一个 LICENSED 响应的目的是防止在许可证检查失败后用户简单地停止应用程序进程、清除应用程序数据并重新启动应用程序的漏洞利用。（即使一次只能使用 15 分钟，该应用程序也能提供价值。）
*   坚持第二个 LICENSED 响应的目的是绕过购买-运行-备份-退货-恢复漏洞。
*   我不是在问回调许可证检查是否是一个好主意（这就是谷歌提供的替代其已弃用的复制保护机制的方法）。我也很清楚，没有任何反盗版保护是万无一失的，谷歌的整个许可机制都可以被规避（在这种情况下，所有关于策略算法设计的问题都无关紧要）。这个问题的重点是与其他策略（例如）*相比，*`ServerManagedPolicy`上述算法的相对风险（对我们）和收益（对用户）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:08:12.233

关于盗版，总会有风险，你做什么都不能完全阻止它。

与其他风险相反，您可能会使用他们无法使用的应用程序让客户感到不安。

我预计会有很多 0* 评论来自不满意的客户，他们甚至无法使用他们付费购买的应用程序，因为它已被禁用，而免费获得该应用程序的人可能不会受到干扰。当盗版者不间断地观看时，这就像购买 DVD 并让您的脸上充满版权警告。

在购买应用程序时，我会坚持获得许可响应，而不是为第二个响应而烦恼。如果有人能在一种反应中找到自己的出路，他们就会在第二种反应中找到自己的出路。

编辑：我同意 kcoppock 的观点，即购买后 20 分钟的许可支票将对客户造成的干扰最小，并避免您提到的退款错误

# wordpress - 选项主题 - WordPress

> ID：11693105
> 
> 赞同：0
> 
> 时间：2012-07-27T17:54:47.383
> 
> 标签：wordpress, frameworks, themes, options-menu

搜索选项页面，我发现很多主题都使用这样的选项主题页面：

![在此处输入图像描述](../Images/81ab1477a473e3de0efe032024aa8193.png)

有预建选项吗？你建议什么框架？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:30:05.183

看看这个选项树插件。

[http://www.wordpress.org/extend/plugins/option-tree/](http://www.wordpress.org/extend/plugins/option-tree/)

它非常好，很容易通过您加载的 XML 文件进行自定义，也很容易设置面板样式，因此您的客户感觉他们已经为他们准备了一个完全自定义的选项面板。

还有一个内置的媒体上传器，对于图库标签非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:02:09.050

如果您不喜欢插件，请使用这两个选项，您可以将文件放在主题中，然后会出现一个选项面板。我列出了两个非常好的开发人员使用的。还有许多开源选项框架，但它们没有记录。

1.  [选项主题框架](http://wptheming.com/options-framework-theme/)
2.  [丙烷](http://codecanyon.net/item/propanel-wordpress-theme-options-panel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T05:38:27.830

NHP 是一个强大的，但它只是与 ReduxFramework 合并，使其更加强大。搏一搏。

[http://wordpress.org/plugins/redux-framework/](http://wordpress.org/plugins/redux-framework/)

# asp.net - 为什么 Internet Explorer 8 在运行时插入时无法识别文档类型？

> ID：11693112
> 
> 赞同：1
> 
> 时间：2012-07-27T17:55:21.713
> 
> 标签：asp.net, doctype

正如标题所示，我试图在运行时逐页注入一个文档类型。

该应用程序使用带有大量内容页面的单个母版，因此我自然尝试在母版上插入控件，并在内容页面上`asp:contentplaceholder`使用控件。`asp:content`这是因为当您查看源代码时会显示 doctype 元素，但由于某些被上帝抛弃的原因，浏览器 (IE8) 仍以 Quirks 模式运行而不起作用。

这是主人的占位符：

```
<asp:contentplaceholder id="doctype" runat="server" /> 
```

这是页面上的内容面板：

```
<asp:content contentplaceholderid="doctype" runat="server" >
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
</asp:content> 
```

我有点困惑为什么这不起作用，因为替换应该发生在服务器端，然后输出被发送到浏览器，文档类型已经到位......

## 我为什么要这样做？

我这样做只是因为在 master 上指定一个 doctype 意味着我需要去修复大量的内容页面，然后才能开始处理分配的任务。如果我能找到一种通过某些内容页面注入 doctype 的方法，那么我可以一次有效地修复一个页面，直到它们完成。

## 这会影响哪些浏览器？

*Internet Explorer 8*是我们的主要目标。具有讽刺意味的是，浏览器实际上忽略了注入的文档类型。`document.doctype`在加载 DOM 后在运行时检查时，它返回`null`.

*Firefox*的行为不同。这种技术实际上适用于 Firefox，但对 [我] 并没有真正的帮助，因为我们所有的用户都被 Internet Explorer 8 卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:12:53.217

IE中是否打开了兼容模式？即浏览器是否在 URL 栏的右侧显示“锯齿状页面”图标？我们在某些用户的某些 Intranet 站点上默认激活此功能时遇到了一些问题。我相信我们必须确保 Intranet 站点在其本地 IE 安全设​​置中受到信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:28:45.047

您可以尝试在内容页面上以编程方式更改 DOCTYPE。我已经对此进行了测试，甚至可以在 Internet Explorer 上使用。

首先删除 MasterPage 页面源上的 DOCTYPE，然后在内容页面上尝试以下代码：

```
Imports System.IO

Public Class WebForm2
    Inherits System.Web.UI.Page

    Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)    

        Dim sb As New StringBuilder("<!DOCTYPE HTMLP>") 
        Dim textWriter As New HtmlTextWriter(New StringWriter(sb))
        MyBase.Render(textWriter)
        writer.Write(sb.ToString())

    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:03:30.777

事实证明，在文档类型被渲染的地方有一条评论。Internet Explorer 8 不喜欢这样。删除后，浏览器会以标准模式呈现页面。

# winapi - WinApi：如何正确调整 MouseMove 事件的窗口区域大小？

> ID：11693113
> 
> 赞同：1
> 
> 时间：2012-07-27T17:55:32.283
> 
> 标签：winapi, regions

我的应用程序是屏幕截图制作工具。用户需要选择屏幕区域进行截图。我使用带有 PureBasic 的 Win32 API，但没关系，一切都与 C++ 相似。当用户运行应用程序时，全屏显示半透明无边框表单以将鼠标悬停在所有其他窗口上。在鼠标按下事件选择开始时，我将 XORed 区域应用于表单以在其中切割一个具有当前选择大小的孔。

我在每个**mousemove**事件上创建并应用一个新区域：

```
rgn1 = CreateRectRgn_(0,0,DWidth,DHeight) ; full size of desktop
rgn2 = CreateRectRgn_(sx, sy, ex, ey) ; current selection points
CombineRgn_(rgn1, rgn1, rgn2, #RGN_XOR)
SetWindowRgn_(WindowID(0), rgn1, #True); apply region 
```

它在我的装有 Windows XP 的计算机上运行良好，但在其他装有 Vista 的计算机上运行良好。我认为在每次鼠标移动时创建新的区域对象是错误的。也许我需要创建一次然后调整大小？任何人都可以解释如何正确地做到这一点吗？C ++上的示例还可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-02T14:14:51.500

在开始时，您使用**CreateRectRgn**创建区域（就像在您的代码中一样）。然后调用**SetRectRgn**函数更新区域边界就足够了

# java - 基本和最小的 Java 开发设置

> ID：11693114
> 
> 赞同：0
> 
> 时间：2012-07-27T17:55:43.847
> 
> 标签：java

我正在使用 Ubuntu，我想知道要安装的基本工具，以便我可以开始用 java 进行开发。

“最小”是指最透明的方式，没有花哨的工具和堆栈等。就像最小的 C 编程一样，您只需编写代码并运行“gcc file.c -o myapp”。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:58:07.637

只需下载[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)。

最小的工具是用于编译的[javac](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javac.html)和用于执行 JVM 的[java 。](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/java.html)两者都在 bin 目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T17:57:15.493

[您需要安装JDK](http://www.wikihow.com/Create-Your-First-Java-Program-on-Ubuntu-Linux)才能开始`hello world`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T17:59:25.767

Eclipse IDE。它可能是最全面的 Java IDE。我知道这不是您要寻找的东西，但是像 JCreator 这样的轻量级简单的不是免费使用的。如果没有任何类型的 IDE，我看不出开发的意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T17:59:49.250

安装 JDK。IDE 是 Java 开发的最低要求。并非所有开发人员都会同意，但恕我直言，这是用 Java 开发的最有效的方式。我建议免费的 IntelliJ CE。

# python - 编写更短、更易读的 Python 代码

> ID：11693115
> 
> 赞同：5
> 
> 时间：2012-07-27T17:55:55.027
> 
> 标签：python

我正在尝试制作更短、更pythonic、可读的python。**[对于Project Euler 的问题 8](http://projecteuler.net/problem=8)**，我有这个可行的解决方案（在 1000 位数字中找到 5 个连续数字的最大乘积）。

关于编写这个脚本的更 Pythonic 版本的建议？

```
numstring = ''
for line in open('8.txt'):
    numstring += line.rstrip()

nums = [int(x) for x in numstring]

best=0
for i in range(len(nums)-4):
    subset = nums[i:i+5]
    product=1
    for x in subset:
        product *= x
    if product>best:
        best=product
        bestsubset=subset

print best
print bestsubset 
```

例如：下面的代码段必须有一个单行。我确定这里有一个过去的话题，但我不确定如何描述我在下面做的事情。

```
numstring = ''
for line in open('8.txt'):
    numstring += line.rstrip() 
```

有什么建议么？多谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:06:53.253

```
from operator import mul

def product(nums):
    return reduce(mul, nums)

nums = [int(c) for c in open('8.txt').read() if c.isdigit()]
result = max((product(nums[i:i+5]) for i in range(len(nums)))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T18:04:12.850

我正在研究一个完整的答案，但现在这是一个班轮

```
numstring = ''.join(x.rstrip() for x in open('8.txt')) 
```

**编辑：**给你！一个用于搜索的班轮。列表推导很棒。

```
from operator import mul
def prod(list):
    return reduce(mul, list)

numstring = ''.join(x.rstrip() for x in open('8.txt'))
nums = [int(x) for x in numstring]
print max(prod(nums[i:i+5]) for i in range(len(nums)-4)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T19:04:15.760

这是我的解决方案。我尝试编写我知道如何编写的最“Pythonic”的代码。

```
with open('8.txt') as f:
    numstring = f.read().replace('\n', '')

nums = [int(x) for x in numstring]

def sub_lists(lst, length):
    for i in range(len(lst) - (length - 1)):
        yield lst[i:i+length]

def prod(lst):
    p = 1
    for x in lst:
        p *= x
    return p

best = max(prod(lst) for lst in sub_lists(nums, 5))
print(best) 
```

可以说，这是使用的理想案例之一，`reduce`因此可能`prod()`应该是：

```
# from functools import reduce   # uncomment this line for Python 3.x
from operator import mul
def prod(lst):
    return reduce(mul, lst, 1) 
```

我不喜欢尝试在有理由多行的情况下编写单行。我真的很喜欢这个`with`声明，而且我的习惯是将它用于所有 I/O。对于这个小问题，你可以只做单行，如果你使用 PyPy 或其他东西，当你的小程序完成执行并退出时，文件将被关闭。但我喜欢使用双线，`with`所以我写了那个。

我喜欢@Steven Rumbalski 的单线：

```
nums = [int(c) for c in open('8.txt').read() if c.isdigit()] 
```

我可能会这样写：

```
with open("8.txt") as f:
    nums = [int(ch) for ch in f.read() if ch.isdigit()] 
```

同样，对于这种短程序，您的文件将在程序退出时关闭，因此您不必担心确保文件被关闭；但我喜欢养成使用`with`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:02:30.357

至于解释最后一点是什么，首先你创建一个`string`名为的空`numstring`：

```
numstring = '' 
```

然后循环遍历文件中的每一行文本（或`string`s 行）：`txt``8.txt`

```
for line in open('8.txt'): 
```

因此，对于您找到的每一行，您都希望将结果添加`line.rstrip()`到其中。`rstrip`从字符串中“去除”空格（换行符、空格等）：

```
 numstring += line.rstrip() 
```

假设您有一个`8.txt`包含文本的文件：`LineOne \nLyneDeux\t\nLionTree`您最终会得到一个看起来像这样的结果：

```
>>>'LineOne' #loop first time
>>>'LineOneLyneDeux' # second time around the bush
>>>'LineOneLyneDeuxLionTree' #final answer, reggie 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:02:51.730

这是一个完整的解决方案！首先读出数字：

```
with open("8.txt") as infile:
    number = infile.replace("\n", "") 
```

然后创建一个包含 5 个连续数字的列表：

```
cons_numbers = [list(map(int, number[i:i+5])) for i in range(len(number) - 4)] 
```

然后找到最大的并打印出来：

```
print(max(reduce(operator.mul, nums) for nums in cons_numbers)) 
```

如果您使用的是 Python 3.x，则需要替换`reduce`为`functools.reduce`.

# jquery - 在 div 块而不是整个页面中打开颜色框

> ID：11693119
> 
> 赞同：1
> 
> 时间：2012-07-27T17:56:09.680
> 
> 标签：jquery, jquery-plugins, colorbox

我目前正在构建一个 Jquery 交互式游戏，并且正在使用 jQuery Colorbox 插件向用户显示消息。

问题是，所有游戏都在一个 div 内，我需要在该 div 内打开该 Colorbox（该容器 div 是`overflow:hidden`）。

我希望 Colorbox 的工作方式与默认情况下相同，居中，但在 div 块中而不是在整个主体中。

我试图在 colorbox.js 中更改这一行：

```
$(document.body).append($overlay, $box.append($wrap, $loadingBay)); 
```

进入这个：

```
$("#game").append($overlay, $box.append($wrap, $loadingBay)); 
```

但它不起作用。你有什么主意吗？

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:44:42.263

这个答案有点晚了......

我正在查看 jquery.colorbox.js 的第 300 行。

更改：$window = $(window);

至：

$window = $(".Class");

# reference - Xtext 交叉引用和作用域

> ID：11693120
> 
> 赞同：2
> 
> 时间：2012-07-27T17:56:10.030
> 
> 标签：reference, xtext, scoping

我对 xtext 交叉引用有一些问题这是一个非常简单的语法：

```
grammar org.xtext.example.mydsl1.Test with org.eclipse.xtext.common.Terminals
generate test "http://www.xtext.org/example/mydsl1/Test"
Model: block=Block? cs+=Company* ; 
Block:  '{' g=[Employee] '}';
Company: 'Company' name=ID
    '{' es+= Employee* '}';
Employee: 'Employee' name=ID ';' ; 
```

这是我的 dsl：

```
{ Pooyan }
Company Sony{
    Employee Pooyan;
    Employee John;
} 
```

它总是显示“无法解析对员工 'Pooyan' 的引用”。有人可以帮我吗？我不知道...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:08:08.337

Pooyan 的完全限定名称是 Sony.Pooyan。由于您的块中的交叉引用“g”是在另一个包含中定义的，因此您必须进行少量定制才能将其放入范围。

1.  如果您的语言始终使用平面命名空间，您可以在语言生成器中启用 SimpleNamesFragment 并删除 QualifiedNamesFragment。这应该可以解决问题。
2.  或者，您可以在范围提供程序中自定义具体引用“g”的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T00:29:30.043

添加到 Sebastians 的答案以使其更精确：您需要在 xtext 项目的相应 .mwe2 文件中将“fragment = exporting.QualifiedNamesFragment auto-inject {}”更改为“fragment = exporting.SimpleNamesFragment”。

希望这可以帮助。

# php - PHP simplexml获取图片显示

> ID：11693121
> 
> 赞同：-2
> 
> 时间：2012-07-27T17:56:12.007
> 
> 标签：php, xml, simplexml

我有一个看起来像这样的 xml：

```
<gallery server="5"> 
    <image path="http://i.imgur.com/8n5MB.jpg"/>
    <image path="http://i.imgur.com/TIXL2.jpg"/>
</gallery> 
```

我正在尝试使用 PHP 将图像显示在一个页面中。这就是我所拥有的：

```
$xml = simplexml_load_file('./images.xml');

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
  {
  echo $child->getName() . "<br />";
  } 
```

我的问题是这只输出以下内容

```
gallery
image
image
image 
```

我找不到任何关于如何读取标签本身信息的信息，任何指针？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:03:22.510

你应该这样做：

```
foreach ($xml->children() as $child)
{
    echo '<img src="' . $child['path'] . '" alt="gallery image" />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:59:48.003

您可以使用[XPath](http://php.net/simplexml.xpath)选择元素，然后`path`从元素的属性列表中获取属性，如下所示：

```
foreach( $xml->xpath('//image') as $image)
{
    $attributes = $image->attributes();
    echo $attributes['path'] . "<br />";
} 
```

所以这个循环只会循环`<image>`标签。对于每个`<image>`标签，它都会获取该标签的属性并打印出该`path`属性。

# jquery - 使用 jquery 更改 div 的颜色以匹配另一个 div

> ID：11693123
> 
> 赞同：3
> 
> 时间：2012-07-27T17:56:16.327
> 
> 标签：jquery

我目前共有 4 个具有相同类的框，每个框都有自己的 ID，当单击任何框时，所有框的背景颜色都应更改为分配的 div ID 的背景颜色。

我确实想让它成为当前 JS 小提琴示例中的特定颜色，我希望它成为特定 div 的颜色。即#box2 将在.click 上将颜色更改为#box1 的颜色，而#box1 将更改为#box4 的颜色。从而产生盒子顺时针移动的错觉。我希望它可用于无限次点击。

```
 $(document).ready(function () {
            $('.colorbox').click(function () {
                $('#box1').css('background-color', 'blue');
                $('#box2').css('background-color', 'red');
                $('#box3').css('background-color', 'yellow');
                $('#box4').css('background-color', 'green');           
            });
        }); 
```

见[http://jsfiddle.net/YMqyE/](http://jsfiddle.net/YMqyE/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:11:49.677

像这样？[http://jsfiddle.net/YMqyE/2/](http://jsfiddle.net/YMqyE/2/)

```
$(document).ready(function () {
        $('.colorbox').click(function () {
            var $b1 = $('#box1'),
                $b2 = $('#box2'),
                $b3 = $('#box3'),
                $b4 = $('#box4'),
                box4Color = $b4.css('background-color');
            $b4.css('background-color', $b3.css('background-color'));
            $b3.css('background-color', $b2.css('background-color'));
            $b2.css('background-color', $b1.css('background-color'));
            $b1.css('background-color', box4Color);

        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:33:13.313

```
$(document).ready(function () {
    $('.colorbox').click(function () {
        var $OddColorOut = $('#box1').css('background-color');

        $('#box1').css('background-color', $('#box4').css('background-color'));
        $('#box4').css('background-color', $('#box3').css('background-color'));
        $('#box3').css('background-color', $('#box2').css('background-color'));
        $('#box2').css('background-color', $OddColorOut);
    });
}); 
```

[http://jsfiddle.net/thalladay/p92V6/](http://jsfiddle.net/thalladay/p92V6/)

# sql - 选择返回表的最后一条记录

> ID：11693131
> 
> 赞同：0
> 
> 时间：2012-07-27T17:56:32.800
> 
> 标签：sql, sql-server

我来自具有一点 mySQL 的访问背景，所以在谈到 SQL 时我有点迷茫。

这是我正在使用的查询：

```
Select 
    tbl_AcerPFSSurveyIVR.NTlogin,
    tbl_AcerPFSSurveyIVR.Customer_Firstname,
    tbl_AcerPFSSurveyIVR.Customer_Lastname,
    tbl_AcerPFSSurveyIVR.CaseId,
    tbl_AcerPFSSurveyIVR.ContactNumber,
    CRM_TRN_ORDER.ORDER_PRICE,
    CRM_TRN_ORDER.ORDER_CREATEDDATE 
```

这会返回正确的记录，但我想要最后一个......我知道我应该使用这样的东西......

```
SELECT TOP 1 * 
FROM table_Name 
ORDER BY unique_column DESC 
```

我迷路的地方，如果我说得对，您只能做一个 Select... 那我该如何整合两者呢？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:08:18.293

你想要的是这样的：

```
SELECT TOP(1) 
  tbl_AcerPFSSurveyIVR.NTlogin,
  tbl_AcerPFSSurveyIVR.Customer_Firstname,
  tbl_AcerPFSSurveyIVR.Customer_Lastname,
  tbl_AcerPFSSurveyIVR.CaseId,
  tbl_AcerPFSSurveyIVR.ContactNumber,
  CRM_TRN_ORDER.ORDER_PRICE,
  CRM_TRN_ORDER.ORDER_CREATEDDATE
FROM
  tbl_AcerPFSSurveyIVR
JOIN CRM_TRN_ORDER
    ON tbl_AcerPFSSurveyIVR.CustomerId = CRM_TRN_ORDER.CUSTOMERID
ORDER BY
  CRM_TRN_ORDER.ORDER_CREATEDDATE DESC 
```

注意：我编写了 JOIN 子句，因为我不知道您的架构。假设存在某种外键关系，您应该选择满足连接的真实列。否则，您将只是采用笛卡尔积，这很可能不是您想要的。但是，您可以通过将上面的 FROM ... JOIN 子句替换为“FROM tbl_AcerPFSSurveyIVR, CRM_TRN_ORDER”来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:08:52.193

你有没有尝试过 ：

```
Select TOP (1)
tbl_AcerPFSSurveyIVR.NTlogin,
tbl_AcerPFSSurveyIVR.Customer_Firstname,
tbl_AcerPFSSurveyIVR.Customer_Lastname,
tbl_AcerPFSSurveyIVR.CaseId,
tbl_AcerPFSSurveyIVR.ContactNumber,
CRM_TRN_ORDER.ORDER_PRICE,
CRM_TRN_ORDER.ORDER_CREATEDDATE 
FROM Table_Name ORDER BY unique_Column DESC 
```

这包括您之前的查询中的前 1 个并同时按降序过滤请求。我理所当然地认为第一个`SELECT`来自`table_name`.

# mongodb - Mongo 在哈希中查找

> ID：11693132
> 
> 赞同：1
> 
> 时间：2012-07-27T17:56:33.997
> 
> 标签：mongodb, mongodb-query

假设我有几个这样的文件

```
{
  title: 'blah',
  value: {
    "A": {property: "foo"},
    "B": {property: "bar"},
    "C": {property: "foo"},
    "D": {property: "foo"}
  }
}

{
  title: 'blah2',
  value: {
    "A": {property: "bar"},
    "B": {property: "bar"},
    "C": {property: "bar"},
    "D": {property: "foo"}
  }
} 
```

什么 mongodb 查询会得到我所有的文档/哈希键`{property: "foo"}`

（我知道这可以在查询后使用 js 来完成，但可以在查询本身内完成吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:40:21.267

正如第一个答案所说，mongodb 查询语言中没有任何内容可以让您执行此类查询。

您可能需要考虑更改架构以使 value 成为这样的数组：

```
value: [
         { name : "A", property : "bar" },
         { name : "B", property : "bar" },
         { name : "C", property : "bar" },
         { name : "D", property : "foo" }
       ] 
```

然后您可以对 value.property 进行索引并在 value.property = "foo" 上运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:21:15.800

问题是对象键没有通配符（请参阅[https://jira.mongodb.org/browse/SERVER-267](https://jira.mongodb.org/browse/SERVER-267)），因此如果不列出“值”中的所有键，您将无法执行此操作. 如果你知道所有的键是什么，这可能是一个选择，但我想你不知道。

如果您将“值”转换为数组而不是对象，则可以轻松进行查询（这将返回文档，而不是哈希键）。

# linux - nginx 和站点上的多个网站可用

> ID：11693135
> 
> 赞同：75
> 
> 时间：2012-07-27T17:56:51.310
> 
> 标签：linux, nginx, webserver

使用 nginx 的基本安装，您的`sites-available`文件夹只有一个文件：`default`

该`sites-available`文件夹是如何工作的，我将如何使用它来托管多个（单独的）网站？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-28T14:44:50.617

只是为了添加另一种方法，您可以为您托管的每个虚拟域或站点使用单独的文件。您可以使用默认副本作为每个副本的起点，并为每个站点进行自定义。
然后在启用站点中创建符号链接。通过这种方式，您可以通过添加或删除符号链接并发出服务 nginx 重新加载来启动和关闭站点。

在进行站点维护时，您可以发挥创意并使用此方法将站点重定向到维护模式页面。

所以结构看起来像这样：

```
/sites-available/ (you can use obvious file names like this)
| 
|-> a.mysite.com
|-> b.mysite.com
|-> someOtherSite.com

/sites-enabled/ (these are just symlinks to the real files in /sites-available)
| 
|-> a.mysite.com
|-> b.mysite.com 
```

请注意，由于只有前两个条目是 中唯一的符号链接项`sites-enabled`，因此第三个条目`someOtherSite.com`是脱机的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-27T20:22:40.303

If you look at `nginx.conf`, you will find [`include`](http://nginx.org/r/include) directive that includes all files from the `sites-enabled` directory. This directory stores symlinks to config files from `sites-available` in order to be convenient to switch on and off parts of your configuration.

As you can see, there's no magic with these directories.

If you want to host multiple websites you should use multiple [`server`](http://nginx.org/r/server) blocks and/or [`server_name`](http://nginx.org/r/server_name) directive. Official tutorials are here: [Server names](http://nginx.org/en/docs/http/server_names.html) and [How nginx processes a request](http://nginx.org/en/docs/http/request_processing.html).

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-10-19T21:22:28.720

您将默认文件从可用站点符号链接到已启用站点。然后修改可用站点以包括两个服务器块，每个块具有不同的 server_name。见下文。这假设您必须拥有名为 example.com 和 example2.com 的域。您还可以将@records 指向您安装了nginx 的服务器的IP 地址。

将可用站点符号链接到启用的站点

```
sudo ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default 
```

使用您选择的编辑器编辑文件（对我来说是 vim）

```
sudo vi /etc/nginx/sites-available/default 
```

这是工作 nginx conf 的内容，假设您在端口 4567 和 4568 上运行 Web 应用程序。

```
server {

    server_name www.example.com

    location / {
        proxy_pass http://localhost:4567/;
    }

}

server {

    server_name www.example2.com

    location {
        proxy_pass http://localhost:4568/;
    }

} 
```

# linux - 如何使用 ImageMagick 控制 PDF 纸张大小？

> ID：11693137
> 
> 赞同：50
> 
> 时间：2012-07-27T17:57:14.027
> 
> 标签：linux, pdf, imagemagick

我有 16 个 jpg 文件，大约 920x1200 像素（宽度略有不同，但高度均为 1200）。我正在尝试将它们加入到pdf中：

```
convert *.jpg foo.pdf 
```

但生成的纸张尺寸为 1.53x2 英寸。如果我传递参数`-page Letter`，页面大小最终会变成令人眼花缭乱的 1.02x1.32 英寸。这里出了什么问题？我能找到的所有信息都表明这应该有效。我只想要一份由 16 个信纸大小的页面组成的文档。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-05-08T18:47:02.087

这个问题很老了，但我有一个类似的问题，我想我找到了解决方案。

-page 选项的文档说“此选项与 -density 一起使用”，但选项之间的关系似乎有点不清楚，可能是因为文档是针对光栅图像的。

通过对设置进行试验，我发现可以通过组合 -page -density 和 -units 来控制 pdf 页面大小。-page的[文档](http://www.imagemagick.org/script/command-line-options.php#page)显示该字母与输入 612 x 792 相同。将 -density 72 与 -units pixelperinch 结合将得到 (612px /72px) * 1in = 8.5in。

`convert *.jpg -units pixelsperinch -density 72 -page letter foo.pdf`应该做原始海报想要的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-21T15:28:30.113

我刚刚成功了 `convert file.mng -page letter file.pdf`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-27T20:27:34.477

对于 Letter，您需要将大小指定为 792x612 PostScript 点。因此尝试这个命令：

```
 convert \
    in1.jpg \
    in2.jpg \
    in3.jpg \
    in4.jpg \
    in5.jpg \
   -gravity center \
   -resize 792x612\! \
    letter.pdf 
```

适用于 Mac OS X 上的 ImageMagick 版本*6.7.8-3 2012-07-19 Q16 ：*

```
识别-格式 "%f[%s] : %W x %H\n" letter.pdf
  letter.pdf[0] : 792 x 612
  letter.pdf[1]：792 x 612
  letter.pdf[2]：792 x 612
  letter.pdf[3] : 792 x 612
  letter.pdf[4] : 792 x 612

```

或者

```
pdfinfo -f 1 -l 5 字母.pdf
  标题： _
  制作人：ImageMagick 6.7.8-3 2012-07-19 Q16 http://www.imagemagick.org
  创建日期：2012年7月27日星期五22:28:00
  修改日期：2012 年 7 月 27 日星期五 22:28:00
  标签： 没有
  形式：无
  页数：5
  加密：否
  第 1 页尺寸：792 x 612 pts（字母）
  第 1 页腐烂：0
  第 2 页尺寸：792 x 612 pts（字母）
  第 2 页腐烂：0
  第 3 页尺寸：792 x 612 pts（字母）
  第 3 页腐烂：0
  第 4 页尺寸：792 x 612 pts（字母）
  第 4 页腐烂：0
  第 5 页尺寸：792 x 612 pts（字母）
  第 5 页腐烂：0
  文件大小：178642 字节
  优化：无
  PDF版本：1.3

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-01T11:39:47.567

据此[，](https://www.imagemagick.org/script/command-line-options.php#density) 72 dpi 是默认密度 => 每像素一个点（对于计算机屏幕）。

所以你只需要指定`-units pixelsperinch`.

您可以键入以下命令：

```
$ convert *.jpg -units pixelsperinch -page letter foo.pdf 
```

顺便说一句：如果您想使用非标准页面大小，例如 A4R，您必须首先确定以点为单位的页面大小（或以 72dpi 给出的像素）：

```
$ paperconf -s -p A4
595.276 841.89 
```

那么`-page`参数将是`842x595`

# python - 根据第二个数组在一个数组中查找项目

> ID：11693140
> 
> 赞同：4
> 
> 时间：2012-07-27T17:57:17.440
> 
> 标签：python, numpy

我有两个数组`A`和`B`：

```
A=array([[ 5.,  5.,  5.],
         [ 8.,  9.,  9.]])
B=array([[ 1.,  1.,  2.],
         [ 3.,  2.,  1.]]) 
```

任何有“1”的地方`B`我都想对`A`.

因此，例如对于这个答案将是 5+5+9=10

我希望这继续 2,3....n （所有唯一值`B`）

所以对于 2 的......它将是 9+5=14 而对于 3 的它将是 8

我使用以下方法找到了唯一值：

```
numpy.unique(B) 
```

我意识到这需要多个步骤，但我无法真正使用索引矩阵将这些位置汇总到另一个矩阵中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:58:51.917

对于每个唯一值`x`，您可以执行

```
A[B == x].sum() 
```

例子：

```
>>> A[B == 1.0].sum()
19.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:37:39.410

我想`numpy.bincount`这就是你想要的。如果 B 是一个小整数数组，例如您的示例，您可以执行以下操作：

```
import numpy
A = numpy.array([[ 5.,  5.,  5.],
                 [ 8.,  9.,  9.]])
B = numpy.array([[ 1,  1,  2],
                 [ 3,  2,  1]])
print numpy.bincount(B.ravel(), weights=A.ravel())
# [  0\.  19\.  14\.   8.] 
```

或者如果 B 除了小整数之外还有其他东西，你可以做这样的事情

```
import numpy
A = numpy.array([[ 5.,  5.,  5.],
                 [ 8.,  9.,  9.]])
B = numpy.array([[ 1.,  1.,  2.],
                 [ 3.,  2.,  1.]])
uniqB, inverse = numpy.unique(B, return_inverse=True)
print uniqB, numpy.bincount(inverse, weights=A.ravel())
# [ 1\.  2\.  3.] [ 19\.  14\.   8.] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:00:38.313

`[(val, np.sum(A[B==val])) for val in np.unique(B)]`给你一个元组列表，其中第一个元素是 B 中的唯一值之一，第二个元素是 A 中元素的总和，其中 B 中的相应值是该值。

```
>>> [(val, np.sum(A[B==val])) for val in np.unique(B)]
[(1.0, 19.0), (2.0, 14.0), (3.0, 8.0)] 
```

关键是您可以`A[B==val]`用来访问 A 中 B 等于 val 的位置的项目。

编辑：如果你只想要总和，就做`[np.sum(A[B==val]) for val in np.unique(B)]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:09:37.433

我会使用 numpy 掩码数组。这些是标准的 numpy 数组，带有与之关联的掩码，以阻止某些值。该过程非常简单，使用

```
numpy.ma.masked_array(data, mask) 
```

其中掩码是通过使用掩码函数生成的

```
mask = numpy.ma.masked_not_equal(B, 1).mask 
```

和数据是A

```
for i in numpy.unique(B):
    print numpy.ma.masked_array(A, numpy.ma.masked_not_equal(B, i).mask).sum()

19.0
14.0
8.0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T14:22:06.107

[我在这里](https://stackoverflow.com/questions/4373631/sum-array-by-number-in-numpy)找到了老问题

[答案](https://stackoverflow.com/a/8732260/1400411)之一

```
def sum_by_group(values, groups):
 order = np.argsort(groups)
 groups = groups[order]
 values = values[order]
 values.cumsum(out=values)
 index = np.ones(len(groups), 'bool')
 index[:-1] = groups[1:] != groups[:-1]
 values = values[index]
 groups = groups[index]
 values[1:] = values[1:] - values[:-1]
 return values, groups 
```

在你的情况下，你可以展平你的阵列

```
aflat = A.flatten()
bflat = B.flatten()
sum_by_group(aflat, bflat) 
```

# c# - 如何在 EF 中设置外键值？

> ID：11693142
> 
> 赞同：1
> 
> 时间：2012-07-27T17:57:18.720
> 
> 标签：c#, .net, entity-framework

我有以下代码：

```
BudgetLineItem actualLi = new BudgetLineItem();
actualLi.YearId = be.lu_FiscalYear.Where(t => t.Year == actualYear).Select(t => t.Id).First();
actualLi.TypeId = be.lu_Type.Where(t => t.Name == "Actual").Select(t => t.id).First();
actualLi.DeptId = be.lu_Department.Where(t => t.Name == DeptName).Select(t => t.ID).First();
actualLi.LineItemId = be.lu_LineItem.Where(t => t.Name == revenueType).Select(t => t.id).First();
actualLi.Amount = actualAmount;
be.AddToBudgetLineItems(actualLi);
be.SaveChanges(); 
```

它创建了一个我想要在数据库中插入的对象。但是当我尝试保存这条记录时，我得到了错误：

> “xxxx”中的实体参与“xxxx”关系。找到 0 个相关的“xxxx”。1 '' 是预期的。

我的表与错误引用`BudgetLineItem`的表有外键关系。`lu_Department`

我发现[这个问题](https://stackoverflow.com/questions/1011519/entity-framework-entitykey-foreign-key-problem)似乎提供了一个解决方案，但对于我想要做的事情来说似乎过于复杂。

我的最佳选择是我链接到的问题中提供的解决方案吗？如果是这样，为什么 EF 让这变得如此复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:21:29.413

```
BudgetLineItem actualLi = new BudgetLineItem();
actualLi.YearId = be.lu_FiscalYear.FirstOrDefault(t => t.Year == actualYear);
actualLi.TypeId = be.lu_Type.FirstOrDefault(t => t.Name == "Actual");
actualLi.Dept = be.lu_Department.FirstOrDefault(t => t.Name == DeptName)
actualLi.LineItemId = be.lu_LineItem.FirstOrDefault(t => t.Name == revenueType)
actualLi.Amount = actualAmount;
be.AddToBudgetLineItems(actualLi);
be.SaveChanges(); 
```

我建议直接附加实体而不是使用“ID”。这将解决问题，因为您的数据库上下文将处理为其设计的实体关系

如果所有这些 Id 都是 FK，则将它们更改为分配实体，例如 lu_Department

# javascript - 理解 javascript 中的原型

> ID：11693145
> 
> 赞同：3
> 
> 时间：2012-07-27T17:57:32.780
> 
> 标签：javascript, oop

> **可能重复：**
> [JavaScript .prototype 是如何工作的？](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)

来自 Java 背景，我正在尝试理解 javascript。

请让我知道这些是否正确。

1.  就像在java中一样，有一个至高无上的对象，所有其他对象都继承自该对象。
2.  原型属性就像一个指向父对象的指针（java中的类）
3.  对于“Object”对象，原型为空。
4.  原型属性的值是表示对象命名法的字符串，而不是像 C 中的指针。指针概念是使用隐藏属性实现的，[[PROTOTYPE]] 在脚本中无法访问。

我正在使用 node.js 而不是浏览器来学习 JS。我试过了，

```
var human = Object.create(null);  // same as var human;
console.log(Object.getPrototypeOf(human)); //null

var man  = Object.create(human);
console.log(Object.getPrototypeOf(man));
//{}
//expected 'human'

var person = Object.create(Object.prototype); // same as var person = {}
console.log(Object.getPrototypeOf(person));
//{}
//expected 'object' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:12:06.527

首先，IMO，不要从节点开始。如果你还不知道 javascript，Node 会把你拖入流沙池。其次，当我开始使用基于函数的代码时，然后是 OO，然后我才转向原型。但如果你真的想知道，这个问题已经在这里回答过[了](https://stackoverflow.com/questions/1635116/javascript-class-method-vs-class-prototype-method)。如果您还有其他问题，请随时问我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:10:48.947

`create`首先，在尝试使用它之前，您需要阅读有关该方法的信息。

其次，通过以下方式调用对象：

```
var human = {}, man = {}, person = {}; 
```

第三，这不是Java。在 Java 中，类和对类的理解非常重要。原型在 JavaScript 中是完全可选的。原型提供的唯一性能优势来自于您的代码在不同范围内通过引用大量重用函数。如果这种编码风格不适用于您，那么您可能不需要使用原型。

原型是从父对象或某些祖先对象继承而来的。JavaScript 解析器将首先查找本地分配，如果不存在，则检查当前对象的原型是否存在命名引用。简而言之，这是您在编写 JavaScript 的早期阶段需要了解的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:10:50.337

1.  是的，除了`Object.create(null)`它不继承任何东西。
2.  不确定“父对象”是什么，但函数的原型由实例可访问的函数组成。因为`Object.prototype.toString`存在，所以存在`{}.toString`——它是*继承*的。
3.  是的，原型链到此结束。
4.  不，`.prototype`（或返回的值`Object.getPrototypeOf`）是一个可以使用属性扩展的对象，以便这些属性由实例继承。

你的例子：

```
var human = Object.create(null);  // same as var human; 
```

不，它创建了一个不继承任何东西的空对象。`var human;`设置`human`为`undefined`- 这不是一个对象，而是一个原始值（在 JavaScript 中并非所有东西都是对象）。

```
var man  = Object.create(human);
console.log(Object.getPrototypeOf(man));
//{}
//expected 'human' 
```

`Object.getPrototypeOf(man)`返回对象`human`。这是一个空对象；节点将其显示为`{}`。它*不是*一个字符串。事实上，对象可以分配给多个变量。一个对象没有绑定到它的变量，所以从设计上来说根本不可能得到一个字符串。要检查相等性，您可以执行`Object.getPrototypeOf(man) === human`which yield `true`。

```
var person = Object.create(Object.prototype); // same as var person = {}
console.log(Object.getPrototypeOf(person));
//{}
//expected 'object' 
```

这确实与`{}`- 直接继承自的空对象相同`Object`。如上所述，原型是`Object.prototype`而不是字符串。它看起来是空的，但那是因为`Object.prototype`'s 函数在默认情况下是可用的并且是隐藏的。

# jquery - Jqueryui可拖动，如何从拖动函数中获取句柄ID

> ID：11693146
> 
> 赞同：3
> 
> 时间：2012-07-27T17:57:34.397
> 
> 标签：jquery, jquery-ui

有这个简单的代码：

```
$( "#draggable" ).draggable({ 
    handle: ".dragableHandler", 
    drag: function(e, ui) {}
}); 
```

并且有 4 个图像，其类为 .dragableHandler，每个图像都有不同的 id。内部拖动功能如何找到当前句柄（图像之一）ID？我只能找到可拖动的元素信息..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:00:16.823

您可以通过`srcElement`事件访问它：

```
drag: function(e, ui) {
    var id = e.srcElement.id;
    // do what you need...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:03:28.503

好的，我已经找到了如何从可拖动函数（如停止、拖动、启动）中找到句柄 elment id。你必须使用：

```
$( "#draggable" ).draggable({ 
    handle: ".dragableHandler", 
    start: function(e, ui) {
       alert(e.originalEvent.target.id);
    }
}); 
```

# regex - 正则表达式检测存储过程中的 WITH 选项

> ID：11693147
> 
> 赞同：0
> 
> 时间：2012-07-27T17:57:39.410
> 
> 标签：regex

我一直在处理我们的应用程序中的一些遗留代码，这些代码使用 Regex 检测 SQL 存储过程文本中的某些关键字，但由于我对 Regex 的了解有限，我发现了一个无法完全纠正的错误。

基本上，我目前拥有的正则表达式适用于所有情况，但只有一种情况：

```
(?<=\n\s*)(?<!with.*[\s\S]*)as 
```

它应该在这个版本的存储过程上返回一个匹配项：

```
ALTER PROCEDURE [dbo].[p_obj_name_with_something] 
    @username [nvarchar](100) = null,
    @id [int] = null,
    @mode [int] = 0
AS
/*------------------------------------------------------------------------- 
```

但是它不应该用于这个版本，但它目前确实返回了一个匹配项：

```
ALTER PROCEDURE [dbo].[p_obj_name_with_something] 
    @username [nvarchar](100) = null,
    @id [int] = null,
    @mode [int] = 0
WITH EXECUTE AS CALLER
AS
/*------------------------------------------------------------------------- 
```

当关键字 WITH**未**在 AS 关键字之前找到时，我想要一个匹配项，但它将允许存储过程的名称或参数中的单词。

我认为检测将起作用的方式是关键字 WITH 的任一侧是否有空格（或换行符），但我无法完全弄清楚正则表达式的语法。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:14:59.457

看看这个网站： http:
[//www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

注意以下几行：

\s 匹配任何空格，包括空格、制表符、换页符等。等效于“[ \f\n\r\t\v]”。
[^xyz] 否定字符集。匹配任何未包含的字符。例如，“[^abc]”匹配“plain”中的“p”。

所以.....
[\s]+[[WITH]|[with][\s]+[[^AS]|[^as]]* 分解它：
[\s]+ 是任何一个上的空格边
[[with]|[WITH][ 不区分大小写检查 with
[[^AS]|[^as]]* 不区分大小写的检查将匹配只要 AS 或不存在
希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:54:09.150

尽管这不是一个真正的答案，但我发现更简单的方法是在我们的存储过程中强制执行一些命名约定规则并修改违反规则的 20 左右。

确实，这是 Regex 不是解决方案的情况！

# java - LVL 在果冻豆上崩溃

> ID：11693150
> 
> 赞同：1
> 
> 时间：2012-07-27T17:57:45.780
> 
> 标签：java, android, android-lvl

关于 Android 的文档是写的，我可以在这里询问 LVL 问题。

我的 Android LVL 在 android <=4.0.4 上运行良好。今天我更新到果冻豆，它不再工作了。这是日志猫：

```
07-27 19:53:28.036: I/Spegni schermo intelligente PRO(2976): Lo schermo si è acceso
07-27 19:53:34.661: E/ActivityThread(3087): Activity it.android.smartscreenoffpro.LicenseCheck has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@41754650 that was originally bound here
07-27 19:53:34.661: E/ActivityThread(3087): android.app.ServiceConnectionLeaked: Activity it.android.smartscreenoffpro.LicenseCheck has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@41754650 that was originally bound here
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:965)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:859)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ContextImpl.bindService(ContextImpl.java:1191)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ContextImpl.bindService(ContextImpl.java:1183)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.content.ContextWrapper.bindService(ContextWrapper.java:394)
07-27 19:53:34.661: E/ActivityThread(3087):     at com.google.android.vending.licensing.LicenseChecker.checkAccess(LicenseChecker.java:150)
07-27 19:53:34.661: E/ActivityThread(3087):     at it.android.smartscreenoffpro.LicenseCheck.doCheck(LicenseCheck.java:89)
07-27 19:53:34.661: E/ActivityThread(3087):     at it.android.smartscreenoffpro.LicenseCheck.onCreate(LicenseCheck.java:106)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.Activity.performCreate(Activity.java:5008)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.os.Looper.loop(Looper.java:137)
07-27 19:53:34.661: E/ActivityThread(3087):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-27 19:53:34.661: E/ActivityThread(3087):     at java.lang.reflect.Method.invokeNative(Native Method)
07-27 19:53:34.661: E/ActivityThread(3087):     at java.lang.reflect.Method.invoke(Method.java:511)
07-27 19:53:34.661: E/ActivityThread(3087):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-27 19:53:34.661: E/ActivityThread(3087):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-27 19:53:34.661: E/ActivityThread(3087):     at dalvik.system.NativeStart.main(Native Method) 
```

我必须更新一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:13:40.460

在这里我找到了解决方案（解释）：

[http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=26722](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=26722)

这是一个问题。

# objective-c - 从情节提要中删除了默认场景无法旋转！\

> ID：11693151
> 
> 赞同：0
> 
> 时间：2012-07-27T17:57:46.547
> 
> 标签：objective-c, ios, storyboard, orientation

所以我创建了一个通用应用程序，当我进入我的 iPad 故事板并删除创建的唯一场景然后添加导航控制器、表格视图控制器甚至常规视图控制器之类的东西时，我无法再在模拟器中旋转我的应用程序。在这一点上，我没有进行任何代码更改。我确认我的 shouldAutorotateToInterfaceOrientation 方法没有改变。是否有我错过的设置，我必须在场景中设置以允许它旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:42:04.873

您可能忘记将新控制器的类设置为具有`shouldAutorotateToInterfaceOrientation`

# nsnotificationcenter - Mountain Lion 上的同时 NSUserNotification 警报

> ID：11693164
> 
> 赞同：4
> 
> 时间：2012-07-27T17:58:57.833
> 
> 标签：nsnotificationcenter, osx-mountain-lion, nsusernotification

我正在尝试为通过 ML 通知中心显示的 Outlook 2011 创建新电子邮件警报（通过 AppleScript 和 Cocoa 应用程序）。

那里有 90%，唯一的问题是，当一次超过 1 封电子邮件到达时，第二个警报会迅速覆盖第一个警报。

我感觉这是设计使然，通知中心一次不允许在屏幕上显示多个警报（不像 Growl 会在屏幕上发送一系列警报），因为代码看起来相当简单.

如果有人对此有任何见解，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T18:53:56.430

请注意，虽然在 Mountain Lion 中仍然不可能（我认为）在 10.9 及更高版本中有一个新属性[identifier](https://developer.apple.com/library/prerelease/mac/documentation/Foundation/Reference/NSUserNotification_Class/index.html#//apple_ref/occ/instp/NSUserNotification/identifier)，它允许您一次显示多个通知（只要标识符不同）

# javascript - jQuery 显示 setTimeout 计时器

> ID：11693171
> 
> 赞同：7
> 
> 时间：2012-07-27T17:59:36.787
> 
> 标签：javascript, jquery, timer, settimeout

我正在尝试构建一个简单的倒计时应用程序。是否可以在 setTimeout 上显示计时器值，还是必须使用 for 循环？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-27T18:02:32.633

与`setTimeout`：

```
var n = 100;
setTimeout(countDown,1000);

function countDown(){
   n--;
   if(n > 0){
      setTimeout(countDown,1000);
   }
   console.log(n);
} 
```

或使用`setInterval`：

```
var n = 100;
var tm = setInterval(countDown,1000);

function countDown(){
   n--;
   if(n == 0){
      clearInterval(tm);
   }
   console.log(n);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T18:06:49.153

```
<script>
var timer = setInterval("mytimer()",1000);
seconds = 0;
function mytimer()
{
document.getElementById("div_timer").innerHTML = seconds; // this is the same as $("div_timer").html(timer) in       jquery.
seconds++;
} 

 </script>
    <body>
      <div id="div_timer"></div>
       </body> 
```

# google-maps-api-3 - Fusion Tables 图层信息窗口列表

> ID：11693173
> 
> 赞同：1
> 
> 时间：2012-07-27T17:59:40.320
> 
> 标签：google-maps-api-3, google-maps-markers, google-fusion-tables

我正在尝试将查询的 FusionTablesLayer 行打印到单独的 div 中，而不是在单击标记时在标准 infoWindow 中打开信息。基本上我试图显示每个标记的信息，就像你在进行普通的谷歌地图搜索时得到的一样。当您单击特定标记时，Google Maps API v3 似乎只会从 FusionTablesLayers 中提取信息。我发现执行类似任务的所有 JSON 示例似乎都使用了 SQL API for Fusion Tables，该 API 已被弃用。我需要找到一种使用 orderBy 距离查询表的方法。我正在使用的地图查询如下，该查询非常适合填充地图上的点。

```
var Layer = new google.maps.FusionTablesLayer({
    query: {
        select: 'Latitude',
        from: 'table_id',
        orderBy: "ST_DISTANCE(Latitude, LATLNG"+latlng+")",
        limit: 50
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:06:55.220

[Fusion Tables API V1.0](https://developers.google.com/fusiontables/docs/v1/getting_started)未被弃用。

您还可以使用来自[可视化 API的查询](https://developers.google.com/chart/interactive/docs/reference)

这是[一个](http://www.geocodezip.com/orderby_test_gviz_numbered_sidebar.html)带有简单侧边栏的示例

# ruby-on-rails - Rails - 按评论数排序视频

> ID：11693178
> 
> 赞同：0
> 
> 时间：2012-07-27T17:59:52.333
> 
> 标签：ruby-on-rails

我有一个`Video`模型和`VideoComment`一个与`Video`.

我正在尝试查找**评论最多的视频**。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:06:08.040

你应该实现一个 counter_cache ：

```
class Video < ActiveRecord::Base
  has_many :video_comments, :counter_cache => true
end 
```

您必须创建一个`video_comments_count`在`videos`表上调用的属性才能完成这项工作。然后，您将能够按此属性进行排序。

Rails 会在创建视频评论时自动为您增加计数器缓存，并在删除时自动减少

# jsf - 对 bean 的参数引用未传递到复合组件中

> ID：11693185
> 
> 赞同：2
> 
> 时间：2012-07-27T18:00:19.577
> 
> 标签：jsf, components, composite

我在 JSF 2.1 vanilla 中的复合组件（在 glassfish 3.1 上）遇到了一些麻烦。我的问题的简化版本在这里：

【复合成分】

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cc="http://java.sun.com/jsf/composite">

    <!-- INTERFACE -->
    <cc:interface>

            <cc:attribute name="value" required="true"/>
            <cc:attribute name="title" required="false" default=""/>

            <cc:editableValueHolder name="inputTarget" targets="labeledInputField"/>

    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

            <p:inputText id="labeledInputField" 
                label="#{cc.attrs.title}"
                value="#{cc.attrs.value}" 
                title="#{cc.attrs.title}">

                <cc:insertChildren/>

            </p:inputText>

    </cc:implementation>
</html> 
```

[实施于]

```
 <!-- thisPerson is passed in via ui:param to the facelet containing this code.  
                it works in other (non-composite) components on the page -->

              <comp:labeledInputText
                  id="baseUsername"
                  value="#{controller.username}"
                    title="#{bundle.Username}">

                  <f:validator for="inputTarget" binding="#{thisPerson.usernameValidator}"/>
                  <f:converter for="inputTarget" converterId="#{whiteSpaceTrimConverter}"/>

              </comp:labeledInputText> 
```

问题是，“thisPerson.usernameValidator”正在评估为 NULL，然后导致 com.sun.faces.facelets.tag.jsf.ValidatorTagHandlerDelegateImpl 跳到尝试通过“validatorID”加载验证器的代码，即未设置，因为我们试图通过“绑定”发送验证器。有没有办法让复合材料评估 ui:param 值，或者不需要重新设计验证器的解决方法（这是一个巨大的反模式，我现在没有时间扭转损害）。假设验证者必须通过绑定进入。

我知道复合是有效的，因为在不同的 facelet 中，我将验证器绑定到一个具体的 bean 引用，而不是一个“软”引用，它就像一个冠军。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:57:31.693

在不知道您的确切 JSF 实现的情况下，我将假设 Mojarra，您可能会遇到以下已知错误。

[http://java.net/jira/browse/JAVASERVERFACES-2040](http://java.net/jira/browse/JAVASERVERFACES-2040)

无论这是否是您的确切问题，您都可以尝试禁用部分状态保存，看看这是否能解决您的问题。如果确实如此，则意味着您正面临这个问题，这显然在 Mojarra 的更高版本中（已修复？）。

另一种可能性是简单地使用`renderFacet`代替`insertChildren`并以构面的形式插入您的验证器。

# java - 使用 JTable 选择表中的所有行

> ID：11693190
> 
> 赞同：5
> 
> 时间：2012-07-27T18:00:39.267
> 
> 标签：java, swing, jtable

如何选择表中的所有行而不用户用鼠标选择它们？例如，我在一张名为`InputTable`. 使用`ActionListener`/ `TableModelListener`，我可以通过这种方式在表格中获取选定的行（当用户单击它们时）：

```
int[] rows = inputTable.getSelectedRows(); 
```

我现在想选择 Input 表中的所有行并将其分配给`int [] rows1`. 有没有像`getSelectedRows()`我可以在没有用户交互的情况下选择所有行的命令？我知道有一个`SelectAll()`，但我想要一些特定于行的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:01:53.683

我认为您正在尝试以编程方式*选择*`JTable`.

这`JTable`只是一个显示机制。不是在表（视图）中选择行，而是在 中选择行[`SelectionModel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html)，所以看看我做的这个小例子：

![在此处输入图像描述](../Images/722b88df5c14b73be61288a2a4d60e7f.png)

```
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class Test extends JFrame {

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents(frame);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {

        String data[][] = {
            {"1", "2", "3"},
            {"4", "5", "6"},
            {"7", "8", "9"},
            {"10", "11", "12"}
        };

        String col[] = {"Col 1", "Col 2", "Col 3"};

        DefaultTableModel model = new DefaultTableModel(data, col);
        JTable table = new JTable(model);

        //call method to select rows (select all rows)
        selectRows(table, 0, table.getRowCount());

        //call method to return values of selected rows
        ArrayList<Integer> values = getSelectedRowValues(table);

        //prints out each values of the selected rows
        for (Integer integer : values) {
            System.out.println(integer);
        }

        frame.getContentPane().add(new JScrollPane(table));
    }

    private void selectRows(JTable table, int start, int end) {
        // Use this mode to demonstrate the following examples
        table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        // Needs to be set or rows cannot be selected
        table.setRowSelectionAllowed(true);
        // Select rows from start to end if start is 0 we change to 1 or leave it (used to preserve coloums headers)
        table.setRowSelectionInterval(start, end - 1);
    }

    /**
     * Will return all selected rows values
     *
     * @param table
     * @return ArrayList<Intger> values of each selected row for all coloumns
     */
    private ArrayList<Integer> getSelectedRowValues(JTable table) {
        ArrayList<Integer> values = new ArrayList<>();
        int[] vals = table.getSelectedRows();
        for (int i = 0; i < vals.length; i++) {
            for (int x = 0; x < table.getColumnCount(); x++) {
                System.out.println(table.getValueAt(i, x));
                values.add(Integer.parseInt((String) table.getValueAt(i, x)));
            }
        }
        return values;
    }
} 
```

魔法发生在这里：

```
 private void selectRows(JTable table, int start, int end) {
        // Use this mode to demonstrate the following examples
        table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        // Needs to be set or rows cannot be selected
        table.setRowSelectionAllowed(true);
        // Select rows from start to end if start is 0 we change to 1 or leave it (used to preserve coloums headers)
        table.setRowSelectionInterval(start, end - 1);
    } 
```

有关更多示例，请查看[此处](http://www.exampledepot.com/egs/javax.swing.table/Sel.html)向您展示如何使用`SelectionModel`on `JTable`for rows 和 colomns

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:45:23.923

如果我正确理解了您的问题，则您存储了先前（或所需）的选择，并且您想要恢复该选择：

```
int[] rowsToSelect = inputTable.getSelectedRows(); 
```

您可以在以后设置或恢复此选择或将其恢复到另一个表：

```
final ListSelectionModel sm = inputTable.getSelectionModel();
sm.clearSelection(); // First clear selection

for ( final int idx : rowsToSelect )
    sm.addSelectionInterval( idx, idx ); // Make this row selected 
```

**注意：**如果您首先对索引进行排序并`addSelectionInterval()`使用连续索引范围调用，则可以提高性能：

```
Arrays.sort( rowsToSelect );  // You only have to sort if it is not yet sorted

final ListSelectionModel sm = inputTable.getSelectionModel();
sm.clearSelection(); // First clear selection

int rangeFirst = -1, previous = -1;
for ( final int idx : rowsToSelect ) {
    if ( rangeFirst < 0 )
        previous = rangeFirst = idx; // Start an index range
    else if ( idx != previous + 1 ) {
        // A continuous index range ends here, make it selected
        sm.addSelectionInterval( rangeFirst, previous );
        previous = rangeFirst = idx; // Start a new index range
    }
    else
       previous = idx; // Index range is continuous, proceed to the next index
}

// Add the last range which is not handled by the for loop:
if ( rangeFirst >= 0 )
    sm.addSelectionInterval( rangeFirst, previous ); 
```

**最后说明：**如果您想/必须多次选择相同的索引，存储连续范围是有利可图的，这样您就不必每次都检测它们。`sm.addSelectionInterval()`基本上，这意味着在上面的代码示例中存储您传递给方法的范围：

```
Arrays.sort( rowsToSelect );  // You only have to sort if it is not yet sorted

// Detect and store continuous index ranges:
final List< int[] > idxRangeList = new ArrayList< int[] >();

int rangeFirst = -1, previous = -1;
for ( final int idx : rowsToSelect ) {
    if ( rangeFirst < 0 )
        previous = rangeFirst = idx; // Start an index range
    else if ( idx != previous + 1 ) {
        // A continuous index range ends here, store it
        idxRangeList.add( new int[] { rangeFirst, previous } );
        previous = rangeFirst = idx; // Start a new index range
    }
    else
       previous = idx; // Index range is continuous, proceed to the next index
}

// Add the last range which is not handled by the for loop:
if ( rangeFirst >= 0 )
     idxRangeList.add( new int[] { rangeFirst, previous } );

// And now if you want those ranges selected:
final ListSelectionModel sm = inputTable.getSelectionModel();
sm.clearSelection(); // First clear selection

for ( final int[] range : idxRangeList )
    sm.addSelectionInterval( range[ 0 ], range[ 1 ] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T15:25:34.973

如果您在构造函数中执行 selectAll() 函数，它应该选择孔表而无需任何用户交互。

```
 private void createAndShowUI() {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    initComponents(frame);
    frame.pack();
    frame.setVisible(true);
    table.selectAll();
} 
```

# vb.net - VB.NET 多个 MDI 子窗体：是否可以有一些最大化而另一些不能？

> ID：11693193
> 
> 赞同：0
> 
> 时间：2012-07-27T18:00:56.327
> 
> 标签：vb.net, forms, resize, mdi

有人经常使用 .NET MDI 容器吗？

我有一个 MDI 父窗体，在用户单击工具栏后，它会在其中创建一堆较小的 MDI 子窗体。子窗体都设置为具有最大化按钮，当单击时，它们会填充父容器。但这是我的问题：

最大化一个子窗体后，您打开的所有后续子窗体也将被最大化。同样，如果您打开并最大化了多个子窗体，则单击缩小窗口按钮会缩小所有子窗体。

无论如何要解决这个问题？

谢谢，埃利奥特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:18:56.090

听起来这可能会破坏很多你不想破坏的东西

[http://social.msdn.microsoft.com/Forums/en/winforms/thread/4760c883-f789-4b91-8843-38863ad3add2](http://social.msdn.microsoft.com/Forums/en/winforms/thread/4760c883-f789-4b91-8843-38863ad3add2)

您可能想尝试不同的方法

# facebook - 将普通的“喜欢”转换为 OpenGraph 对象

> ID：11693194
> 
> 赞同：1
> 
> 时间：2012-07-27T18:01:00.413
> 
> 标签：facebook, facebook-like, facebook-opengraph

我一直在用 Facebook 之类的按钮做一个小项目，但遇到了一个小问题。

假设我有一个网页并且我执行以下操作：

*   在该页面上放置一个“喜欢”按钮（[如文档中所述](http://developers.facebook.com/docs/reference/plugins/like/)）
    *   ...不包括 OpenGraph 元标记
*   我“喜欢”该页面
*   我检查了关联的 OpenGraph 对象（通过[http://graph.facebook.com/?id=SITE_NAME](http://graph.facebook.com/?id=SITE_NAME)）。

在这种情况下，我得到这样的东西：

```
{
    "id": "http://my-page/path",
    "shares": 1
} 
```

但是，如果我稍后添加 OpenGraph 标记，我仍然会得到相同的结果，即使它看起来应该像一个实际的 OpenGraph 对象。例如

```
{
   "id": "100559863426647",
   "name": "Page",
   "picture": "http://path-to-image.jpg",
   "link": "http://my-url/path",
   "likes": 1,
   "app_id": 392482400810748,
   "category": "Product/service",
   "is_published": true,
   "description": "Some Description",
   "about": "&nbsp;Llama #2"
} 
```

**有什么方法可以获取现有的“喜欢”的 URL 并将其转换/更正为 OpenGraph 对象（如果有）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:20:46.853

Facebook 需要重新抓取您的页面，然后才能获取更新的元数据。这可能是问题所在。

要让 Facebook 重新抓取页面，您需要使用[Facebook 的 Linter](http://developers.facebook.com/tools/debug)访问该页面，或者以页面管理员的身份“赞”该页面。

更多详细信息可在 [https://developers.facebook.com/docs/opengraphprotocol/的“编辑元标记”部分中找到](https://developers.facebook.com/docs/opengraphprotocol/)

# facebook - 有没有办法从在 facebook 上喜欢您的业务页面的人那里提取用户信息，例如用户的照片、姓名和位置？

> ID：11693197
> 
> 赞同：0
> 
> 时间：2012-07-27T18:01:19.773
> 
> 标签：facebook, facebook-graph-api, interface

有没有办法从在 facebook 上喜欢您的业务页面的人那里提取用户信息，例如用户的照片、姓名和位置？

我正在尝试拉出最后 13 个喜欢或有权访问的用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:07:07.943

不，这只有在您还为应用程序对这些用户进行了身份验证并[请求相关权限](https://developers.facebook.com/docs/authentication/permissions/)时才有可能。这是您可以这样做的唯一方法。

[Facebook Insights](https://developers.facebook.com/docs/insights/)将为您提供高级别的匿名人口统计信息，但没有具体内容。

# html - HTML/CSS 浮动左问题

> ID：11693198
> 
> 赞同：1
> 
> 时间：2012-07-27T18:01:23.197
> 
> 标签：html, css, resize, css-float

我最近一直在设计一些需要并排并且高度自动调整大小的内容，但高度不会调整大小。div 不会扩展到其内部项目的大小。有没有办法让 div 扩展到其中元素的大小？

## CSS

```
* {
    padding: 0px;
    margin: 0px;
}
body {
    font-family: 'Metrophobic', sans-serif;
    background-color: #c5c5c5;
    background-image: url('../images/noise.png');
}
#container {
    width:900px;
    background-color: #dbdbdb;
    margin-top: 20px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 20px;
    box-shadow: 0px 0px 5px black;
}
.center_align {
    display: inline-block;
    margin-left: auto;
    margin-right: auto;
}
#header {
    height:80px;
    font-size: 60px;
    padding: 10px;
    text-align: center;
}
#menu {
    width:900px;
    height:50px;
    margin-top: 10px;
    margin-bottom: 10px;
    background-color: #cacaca;
}
.menu_link {
    width:224px;
    height:50px;
    text-align: center;
    font-size: 35px;
    float: left;
    opacity: 0.3;
    background-color: #cacaca;
}
.menu_divider {
    width: 1px;
    height: 50px;
    background-color: #dbdbdb;
    float:left;
}
#content {
    width: 900px;
    height: auto;
    padding: 10px;
    font-size: 20px;
    height: auto;
}
.line_container {
    margin-top:5px;
    margin-bottom:5px;
}
#footer {
    width:900px;
    height:22px;
    padding-top:2px;
    text-align: center;
    font-size: 14px;
    color:black;
}

a:link {
    color:black;
    text-decoration: none;
}
a:visited {
    color:black;
    text-decoration: none;
}
a:hover {
    color:black;
    text-decoration: none;
}
a:active {
    color:black;
    text-decoration: none;
}

a.link:link {
    color:#21525e;
}
a.link:visited {
    color:#21525e;
}
a.link:hover {
    color:#307f91;
    text-decoration: underline;
}
a.link:active {
    color:#307f91;
    text-decoration: underline;
} 
```

## HTML

```
<html>
<head>
<title>Home</title>
<link rel="shortcut icon" href="../images/favicon.ico" />
<link href="http://fonts.googleapis.com/css?family=Metrophobic" rel="stylesheet" type="text/css" />
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<style type="text/css">
.icon {
    width:100px;
    height:100px;
    border: 3px solid white;
    border-radius:25px;
    margin-left:10px;
    margin-right:10px;
    background-position: center center;
    background-size: 100px 100px;
}
</style>
</head>
<body>
<div id="container">
    <div id="header">
        <div class="center_align">
            <img src="../images/header_icon.png" alt="header_icon" width="80" height="80" style="margin-right:20px;float:left;" />
            <div style="height:80px;float:left;">Title</div>
        </div>
    </div>
    <div id="menu">
        <a href="../home" class="menu_link">Home</a>
        <div class="menu_divider"></div>
        <a href="../tutorials" class="menu_link">Tutorials</a>
        <div class="menu_divider"></div>
        <a href="../about" class="menu_link">About</a>
        <div class="menu_divider"></div>
        <a href="../contact" class="menu_link">Contact</a>
    </div>
    <div id="content">
        <div style="width:900px;">
            <div class="icon" style="background-image:url('image.jpg');float:left;"></div><div style="float:left;margin-top:20px;">I'm a freelance Web, Iphone, and Game developer.</div>
        </div>
    </div>
    <div id="footer">
        &copy;&nbsp;Cameron
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:03:48.647

看起来问题是`#footer`元素没有正确清除。添加`clear: both;`到`#footer`. 这会将清除的元素推到浮动元素的下方，并且应该在功能上导致相同的视觉修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T18:19:13.313

“容器 div”基本上“忘记”它是它们的容器，所以只需添加一个`overflow:auto;`使其记住。我也倾向于为 IE 添加**zoom:1**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:05:03.910

问题是你是浮动元素，这会导致默认包装 div 的问题（几乎......）。

这是一个工作解决方案，其中`overflow:hidden`添加到包装 div：http: [//jsfiddle.net/s2dxw/2/](http://jsfiddle.net/s2dxw/2/)

浮动问题非常令人困惑，过去有几个解决方案。这是关于 HTML 中的浮点数的好读物：http: [//css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T18:07:18.987

`clear: both;`或者，您可以在 wrapping 内部和末尾放置一些带有规则的元素`div`。

# javascript - 如何在 iOS 中的输入元素上使用 Jquery :focus 选择器？

> ID：11693201
> 
> 赞同：1
> 
> 时间：2012-07-27T18:01:41.367
> 
> 标签：javascript, jquery, ios, input, focus

我正在使用 Jquery 1.7.1 和 iPad1 iOS3。

除非输入元素具有焦点，否则我需要在 scrollstart 上触发一个函数。下面的函数工作了很长时间，但突然间就没有了（我猜是因为切换到了 Jquery 1.7.1）

```
$(document).on('scroll', function(){
   if ( !$("input:focus").length > 0 ) {  
       self.hideAllPanels();
       }
  }); 
```

特别**是 $('input:focus').length = 0**，虽然我可以检测到在滚动事件之前触发的焦点事件。

我一直在摆弄一种解决方法：

```
 if ( !$(document.activeElement).get(0).tagName == "input" ){
 ....
 } 
```

但我不确定 activeElement 何时发生变化，因为即使在我“离开”相应元素之后，它似乎也会持续很长时间。

**问题**：
知道为什么我无法在 iOS 上检测到焦点元素吗？一些提示我可以如何使用 activeElement 进行设置，所以在模糊时，我不再将输入作为 activeElement 也是受欢迎的！

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:08:30.977

```
$(document).on('scroll', function(){
   if (!$("input").is(':focus')) {  
       self.hideAllPanels();
   }
}); 
```

这似乎对我有用，但如果输入元素没有焦点，它将在滚动期间多次触发该功能。

# php - 我可以在同一页面上使用多个内容类型吗？

> ID：11693202
> 
> 赞同：0
> 
> 时间：2012-07-27T18:01:43.870
> 
> 标签：php, mysql, html

我有这个 php 代码，它从数据库中获取二进制（ blob ）数据并在浏览器中显示为图像。但是，此后的所有内容都将被忽略。有没有办法我也可以使用 text `queries/forms/tables`？同一页面上的基本 HTML 元素？

拥有一个只能显示来自数据库的图片而没有其他任何东西的页面对我来说毫无用处。

```
<?php
    $mysqli=mysqli_connect('localhost','root','','draftdb');
    if (!$mysqli)
    die("Can't connect to MySQL: ".mysqli_connect_error());
    $imageid= 1;
    $stmt = $mysqli->prepare("SELECT PICTURE_ID FROM display WHERE INDEX_ID =?"); 
    $stmt->bind_param("i", $imageid);
    $stmt->execute();
    $stmt->bind_result($image);
    $stmt->fetch();
    header("Content-Type: image/jpeg");
    echo $image; 
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:03:38.430

`Content-Type`不可以，每页只能有一个。

您应该做的是简单地创建另一个页面，其中包含图像（src 指向您显示的代码）和您要显示的表单，如下所示：

```
<html>
    <body>
        <div>
            <img src="image.php" alt="image retreived from DB" />
        </div>
        <form>
            <input type="text" name="foo" />
            ...
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:11:01.267

一个 http 响应中不能有多种内容类型。

要使用数据库中的图片制作页面，您可以制作常规页面并为您的`img`标签使用以下选项之一：

1.  `src="your_picture_script.php?pic_id=xxxx"`- 'your_picture_script.php' 几乎就是您问题中的示例。

2.  `src="data:image/jpeg;base64,<?php echo base64encode($image);?>"`- $image 是实际的 jpeg 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:03:49.143

当使用图像类型的标题内容时，该页面上唯一可以显示的信息是图像本身。虽然可以在大脚本中使用子 php 脚本，并让子脚本返回图像标题，然后让常规脚本对此进行其他操作。

所以你可以这样做：`<img src="\path\to\php\script" />`在你的其他脚本中，它会按照你的意愿工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:05:02.023

为什么不在`<img>`标签中显示图像？然后在它下面写其他 HTML 元素？

标`Content-Type`头告诉浏览器它将显示哪种类型的数据。您可以在 HTML 中显示图像，而不是在图像中显示 HTML（除非它是 HTML 代码的图像）。

# javascript - 为什么我的输入值不求和？

> ID：11693203
> 
> 赞同：1
> 
> 时间：2012-07-27T18:01:50.177
> 
> 标签：javascript

我试图对我从 id 获得的值求和，但它一直将第二个值附加到第一个值，而不是按应有的方式求和。

示例 23+25=2325

这是我的代码：

这是我用来求和的代码。

```
 $('input').blur(function() {
            for (var i=1; i<=value; i++) {

              var one = document.getElementById("veb_blocos-"+i).value; 
              var two = document.getElementById("veb_pellet-"+i).value;
              var sum1 = one+two;
              document.getElementById("total1-"+i).value = sum1; 
           };

        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:03:45.243

尝试这个：

```
var one = parseInt(document.getElementById("veb_blocos-"+i).value, 10); 
var two = parseInt(document.getElementById("veb_pellet-"+i).value, 10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T18:04:16.393

因为输入的值是一个字符串。将其转换为 int。

```
$('input').blur(function() {
    for (var i=1; i<=value; i++) {

      var one = document.getElementById("veb_blocos-"+i).value; 
      var two = document.getElementById("veb_pellet-"+i).value;
      var sum1 = parseInt(one,10)+parseInt(two,10);
      document.getElementById("total1-"+i).value = sum1; 
   };

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:17:35.277

这是最安全的解决方案（假设存在请求的 DOM 节点）：

```
$('input').blur(function () {
    var i = 0,
        one = 0,
        two = 0;
    for (i = 1; i <= value; i += 1) {
        one = Number(document.getElementById("veb_blocos-" + i).value);
        two = Number(document.getElementById("veb_pellet-" + i).value);
        if (isNaN(one)) {
            one = 0;
        }
        if (isNaN(two)) {
            two = 0;
        }
        document.getElementById("total1-" + i).value = one + two;
    };
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T18:03:51.383

尝试：

```
$('input').blur(function() {
            for (var i=1; i<=value; i++) {

              var one = parseInt(document.getElementById("veb_blocos-"+i).value); 
              var two = parseInt(document.getElementById("veb_pellet-"+i).value);
              var sum1 = one+two;
              document.getElementById("total1-"+i).value = sum1; 
           };

        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T18:05:07.937

这是因为您的值是字符串数据类型而不是数字类型。您需要先解析它们。

```
$('input').blur(function() {
            for (var i=1; i<=value; i++) {

              var one = parseFloat(document.getElementById("veb_blocos-"+i).value); 
              var two = parseFloat(document.getElementById("veb_pellet-"+i).value);
              var sum1 = one+two;
              document.getElementById("total1-"+i).value = sum1; 
           };

        }); 
```

# haskell - Haskell，加载，这个合并功能是否正确？

> ID：11693205
> 
> 赞同：1
> 
> 时间：2012-07-27T18:01:57.563
> 
> 标签：haskell

首先，我在 ubuntu 11.10 下使用 ghci 来运行 haskell 代码。第二这是我第一次尝试haskell。第三，我如何将文件加载到 ghci 中，它需要放在哪里，它的扩展名应该是什么？我知道 ":l "file.haskelxtnsn"" 是如何加载文件的，但这是我迄今为止最好的猜测。

看到我可以执行上述操作，此代码如何查找以升序合并两个可能无限大小的列表。（由于缩进，我不能把它放在前奏>提示符中？？？）给定 [1, 2, 3] 和 [4, 5, 6] 我应该得到 [1, 2, 3, 4, 5, 6 ]，我认为用法是“take 10 (merge listx listy)”

```
let merge x y = (min (head x) (head y)) : 
     case (min (head x) (head y)) of 
         head x -> merge (drop 1 x) y 
         head y -> merge x (drop 1 y) 
```

伪：

*   输出列表头部的最小值
*   如果第一个列表头是输出调用与第一个列表的其余部分和第二个列表合并
*   否则调用与第一个列表和第二个列表的其余部分合并

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:20:30.403

*   通常使用的扩展名是“.hs”。
*   您可以`:cd`在 ghci 中使用来更改目录，也可以提供`:load`（`:l`简称）命令的路径。
*   你的逻辑是正确的，虽然也许我会写得有点不同（希望你知道 where 子句并将函数定义为一系列方程）：

    ```
    merge [] ys = ys
    merge xs [] = xs
    merge xs ys = min x y : if x < y then merge (tail xs) ys
                                     else merge xs (tail ys)
            where x = head xs
                  y = head ys 
    ```

*   在 ghci 中，您需要`let`在定义前面加上 a，这与`let ... in ...`表达式不同。这相当令人困惑，所以我建议您将代码放在一个文件中并在 ghci 中加载它。
*   函数应用程序的优先级高于`:`运算符，因此不需要括号。我们通常会尽量减少括号的数量以使代码更简洁，但不要过分热衷于它。
*   我真的不明白在这里使用 case 表达式的意义（除了导致错误）。尝试阅读模式匹配以获取更多详细信息，数据构造函数与函数应用程序，为什么你不能`head x`在模式中使用但你可以这样做`x:xs`（虽然我没有在这里）。调用`head`and`min`多次看起来是多余的，你也可以`drop 1`用`tail`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:21:37.220

如果你想在 GHCi 提示符中输入这个，你可以这样做：

```
> let merge x y = (min (head x) (head y)) : case (min (head x) (head y)) of { 
     head x -> merge (drop 1 x) y ; head y -> merge x (drop 1 y) } 
```

即使用显式大括号代替缩进（以上所有内容都意味着在一个完整的行中输入）。将代码放入要加载的文件时，`let`不应使用前导。

至于代码本身，它会导致错误“Parse error in pattern”。这是因为`head x`不是有效的模式。

[您可以在此处](http://en.wikipedia.org/wiki/Haskell_features#Mergesort)找到`merge`代码，例如：

```
merge (x:xs) (y:ys) | y < x     = y : merge (x:xs) ys
                    | otherwise = x : merge  xs (y:ys)
merge  xs     []                = xs
merge  []     ys                = ys 
```

这会保留重复项。

# sql - 如何在不使用游标的情况下一次将查询结果分配给多个变量？

> ID：11693214
> 
> 赞同：2
> 
> 时间：2012-07-27T18:02:43.960
> 
> 标签：sql, sql-server, sql-server-2005

当我需要将 SQL 语句的结果存储在变量中时，我可以使用这样的代码

```
declare @Max as int
set @Max=(select max(field_name) from table_name) 
```

但现在我想知道是否有可能对多个变量做同样的事情，例如对于像这样的句子

```
select max(field_name), min(field_name) from table_name 
```

我如何将结果存储在两个名为@Max 和@Min 的变量中？

我知道这可以使用游标来完成

```
DECLARE @Max as int, @Min as int
DECLARE cursor_minmax CURSOR FOR
Select max(field_name), min(field_name) from table_name
OPEN cursor_minmax 
FETCH NEXT FROM cursor_minmax  INTO @Max,@Min
CLOSE cursor_minmax 
DEALLOCATE cursor_minmax 
```

但我想知道是否可以在不使用游标的情况下分配该值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T18:05:15.640

你可以这样做：

```
select @max =  max(field_name), @min = min(field_name)
from table_name 
```

我懂了 。. . 你的困惑是你想使用“set”。“set”只能设置一个值。您可以使用“选择”设置任意数量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:08:04.110

```
Select @Max = max(field_name), @Min = min(field_name) from table_name 
```

还是我对您的要求有所了解？

# c - 宏扩展和字符串化：如何使用另一个宏字符串化宏名称（不是它的值）？

> ID：11693219
> 
> 赞同：8
> 
> 时间：2012-07-27T18:02:57.503
> 
> 标签：c, macros

不感兴趣：

```
#define _ACD 5, 5, 5, 30

#define DEFAULT_NETWORK_TOKEN_KEY_CLASS   _ACD 

#define DEFAULT_NETWORK_TOKEN_KEY { DEFAULT_NETWORK_TOKEN_KEY_CLASS } 
```

仅使用 DEFAULT_NETWORK_TOKEN_KEY_CLASS 宏，如何在 const unsigned char [] 中获取 _ACD 字符串化。

```
const uint8 startMsg[] = ?? DEFAULT_NETWORK_TOKEN_KEY_CLASS ; 
```

只会产生**_ACD**。

在此处获取 _ACD 的正确宏扩展是什么。在[如何将具有数组的宏字符串化为#define a_macro {5,7,7,97} 的上下文中？](https://stackoverflow.com/questions/11689825/how-to-stringify-macro-having-array-as-define-a-macro-5-7-7-97)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T19:12:25.433

（关于在没有充分理由的情况下不滥用 C 预处理器的标准免责声明适用于此。）

当然可以做你想做的事。你需要一个`STRINGIFY`宏和一些宏间接。

通常，`STRINGIFY`使用一级间接定义，以允许 C 预处理器在其参数进行字符串化之前扩展其参数。一种实现是：

```
/* The # operator converts symbol 'v' into a string */
#define STRINGIFY0(v) #v
#define STRINGIFY(v) STRINGIFY0(v) 
```

但是，您会发现这还不够：

```
#define _ACD 5, 5, 5, 30
#define DEFAULT_NETWORK_TOKEN_KEY_CLASS   _ACD 
#define DEFAULT_NETWORK_TOKEN_KEY { DEFAULT_NETWORK_TOKEN_KEY_CLASS }

#define START_MSG STRINGIFY(DEFAULT_NETWORK_TOKEN_KEY_CLASS)
const char startMsg[] = START_MSG; 
```

在这里，`STRINGIFY(DEFAULT_NETWORK_TOKEN_KEY_CLASS)`展开为`STRINGIFY0(5,5,5,30)`，C 预处理器抱怨您提供`STRINGIFY0`了太多参数。

解决方案是延迟扩展，`_ACD`使其仅`5,5,5,30`在您想要的时候扩展。为此，请将其定义为类似函数的宏：

```
#define _ACD() 5, 5, 5, 30 
```

这样，`_ACD`只有当你“调用”它时才会被扩展：`_ACD()`. `DEFAULT_NETWORK_TOKEN_KEY_CLASS`现在将扩展为`_ACD`，您必须通过“调用”它来进一步扩展它：`DEFAULT_NETWORK_TOKEN_KEY_CLASS()`.

以下代码说明了解决方案：

```
#include <stdio.h>

#define STRINGIFY0(v) #v
#define STRINGIFY(v) STRINGIFY0(v)

#define _ACD() 5, 5, 5, 30
#define DEFAULT_NETWORK_TOKEN_KEY_CLASS   _ACD 
#define DEFAULT_NETWORK_TOKEN_KEY { DEFAULT_NETWORK_TOKEN_KEY_CLASS() }

#define START_MSG STRINGIFY(DEFAULT_NETWORK_TOKEN_KEY_CLASS)

const char startMsg[] = START_MSG;

int main(int argc, char** argv)
{
  printf("%s\n",startMsg);
  return 0;
} 
```

# postgresql - 管理对 postgresql 数据库的更新的技术

> ID：11693220
> 
> 赞同：0
> 
> 时间：2012-07-27T18:02:59.117
> 
> 标签：postgresql

目标是构建一个简洁的 SQL 脚本来更改/更新表，因为在任何两个时间点之间对模式进行了更改。

例如，我在一台机器上进行开发，在“A”天，我使用转储和恢复实用程序在生产机器上安装数据库。然后在“B”天，在我的开发机器上进行一些更改并测试它们之后，我需要将这些对我的架构的更改放到我的生产服务器上。

没有写下我对我的模式所做的每一个命令（其中一些可能是实验性的和撤消的），管理从 A 点到 B 点（或 B 点到 F 点）升级模式的好方法是什么？

**更新：**

似乎有充分的理由不赞成类似 diff 的数据库概念。所以这给我留下了新的问题。

1.  有什么简单的方法可以将实验性更改与生产价值更改区分开来？当您做一些不利的事情时，只是继续将您的开发数据库恢复到最后一个已知的良好状态？

2.  可以将 postgresql 配置为以一种可以作为更新脚本使用的方式记录您的所有操作吗？我问的原因是我喜欢使用 PgAdminIII，我宁愿用它来工作，也不愿编写用于构建或试验的更新脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:16:45.370

> *没有写下我对我的模式所做的每一个命令*

如果您想以受控且“专业”的方式进行操作，则无法解决。您应该考虑使用模式管理工具来帮助您组织和运行这些迁移脚本：

*   [Liquibase](http://www.liquibase.org/)
*   [飞路](http://code.google.com/p/flyway/)

我们对 Liquibase 的体验非常好。我们将它用于 Oracle、DB2 和 PostgreSQL 上的迁移。

对于 Postgres 特定的解决方案，您可能想看看[Sqitch](https://github.com/theory/sqitch)

# php - 清除画布并保存画布

> ID：11693221
> 
> 赞同：1
> 
> 时间：2012-07-27T18:03:01.713
> 
> 标签：php, javascript, ajax, html5-canvas

我刚刚完成用于图片分析和修复的 Web 应用程序。我需要画布方面的帮助。这就是我所做的：

**编辑：**

```
 <img id="imgEdit" src="<?php echo $imagename; ?>" border="0">
    <canvas id="canvasPaint" 
        width="<?php echo $width; ?>" 
        height="<?php echo $height; ?>"> 
    </canvas>
    <input type="button" value="Clear" onClick="clearCanvas();" class="button">
<input type="button" value="Save" onClick="saveViaAJAX();" class="button">
    <div id="debugFilenameConsole">Wait for a while after clicking the button and the filename of the image will be shown to you.  </div> 
```

但现在我对 clearCanvas 函数有问题。因为浏览器无法读取属性“宽度”。这是我的完整源代码。如何，请有人告诉我我做错了什么。

**编辑：**

```
function clearCanvas()
                {
                var theCanvas = document.getElementById("canvasPaint"); 
                if (theCanvas && theCanvas.getContext) {
                    var ctx = theCanvas.getContext("2d");
                    if (ctx) {

                    ctx.clearRect(0, 0, <?php echo $width; ?>, <?php echo $height; ?>);

                    var srcImg = document.getElementById("imgEdit");
                    ctx.drawImage(srcImg, 0,0);

                    clickX = new Array();
                    clickY = new Array();
                    clickDrag = new Array();
                }}}
function saveViaAJAX()
{
    var theCanvas = document.getElementById("canvasPaint");  
    var canvasData = theCanvas.toDataURL("image/jpg");
    var postData = "canvasData="+canvasData;

    var ajax = new XMLHttpRequest();
    ajax.open("POST",'canvasSave.php',true);    
    ajax.setRequestHeader('Content-Type', 'canvas/upload');

    ajax.send(postData);  
} 
```

用户单击“保存图像”后，我需要将画布保存为本地磁盘上的 jpeg 图像。这意味着，画布中透明的区域变成黑色背景。

我需要这样的东西：http: [//i48.tinypic.com/2w5vhpv.jpg](http://i48.tinypic.com/2w5vhpv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:08:35.203

您可以将画布保存到带有`canvas.toDataUrl('image/jpg')`.

关于第一个问题：通常你用`context.clearRect(0, 0, canvas.width, canvas.height)`方法清除画布。话虽如此，如果画布和上下文声明正确，您的代码应该可以按预期工作。

# matlab - 如何对已经重新排列的矩阵求和

> ID：11693224
> 
> 赞同：0
> 
> 时间：2012-07-27T18:03:13.383
> 
> 标签：matlab, matrix, sum

我有一些矩阵：

```
A = [ 1 2 3 4 5 6;
      1 2 3 4 5 6]

B = [ 6 5 4 3 2 1;
      6 5 4 3 2 1]

C = [ 1 2 3 4 5 6;
      1 2 3 4 5 6] 
```

制作以下矩阵的代码是什么：

```
Result = [1 2 9 9 10 11 5 5 5 6;
          1 2 9 9 10 11 5 5 5 6] 
```

注意：实际上上面的矩阵是上面已经重新排列的 3 个矩阵的总和，如下面的矩阵。#sum 是基于列的总和。

```
1 2 3 4 5 6 
1 2 3 4 5 6
    6 5 4 3 2 1
    6 5 4 3 2 1
        1 2 3 4 5 6
        1 2 3 4 5 6 
```

和。我将第一行与第一行相加，第二行与第二行相加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:09:31.827

做你上面说的：

```
Result = zeros(size(A) + [0,4]);
Result(:,1:size(A,2)) = A;
Result(:,3:end-2) = Result(:,3:end-2) + B;
Result(:,5:end) = Result(:, 5:end) + C; 
```

关键是，您可以选择矩阵的一个子区域，并为其分配另一个矩阵。你只需要确保分配的两边是相同的形状。

# stored-procedures - 简单的 teradata 存储过程

> ID：11693225
> 
> 赞同：1
> 
> 时间：2012-07-27T18:03:15.413
> 
> 标签：stored-procedures, cursor, resultset, teradata

对于应该很常见的东西，网络似乎有点缺乏工作示例。“给我一些记录”的简单简示例。这是我的第一个存储过程，我只想查看一些记录。怎么这么难翻？;-) 我想如果我能找到一个有效的例子，我可以从那里将它调整为我可以真正使用的东西。这是我在网上找到的另一个例子。无法编译，因为 CURSOR 声明是某种语法错误。

```
CREATE PROCEDURE "SCHEMA"."GETRESULTSET (
    IN "p1" VARCHAR(30))
DYNAMIC RESULT SETS 1
BEGIN       
DECLARE CURSOR cur1 WITH RETURN ONLY TO CLIENT FOR 
 SELECT partitioninfo FROM SCHEMA.SessionInfo where username = p1;    
  OPEN cur1;    
END; 
```

无论如何，当然可以使用线索。我看到了一个示例，其中 CURSOR 与 SQL 分开声明，但是没有一个示例说明如何将变量声明为 VARCHAR 时将其放入 SQL 中。我正在处理的示例已经很老了，但这是我能找到的最好的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:59:24.543

对于您所描述的内容，Teradata MACRO 将是一个更好的解决方案。

```
REPLACE MACRO [MyDB].GetResultSet(p1 VARCHAR(30)) AS (
SELECT "Partition"
  FROM DBC.SessionInfo
 WHERE UserName = :p1;
);

EXEC MyDB.GetResultSet 
```

虽然存储过程可用于完成其他流行数据库系统（Oracle、SQL Server 等）中使用的基于任务游标的逻辑，但可能会导致 Teradata 中的不良编程习惯。通常，在 Teradata 中处理大型游标会降低性能。您在其他 DBMS 中使用过游标的许多事情最好尽可能使用基于 SET 的逻辑来完成。

话虽如此，游标可以在 Teradata 中成功用于执行某些需要条件逻辑或动态 SQL 处理的任务。我希望这会有所帮助，如果您有更具体的示例，您需要帮助，我很乐意提供一些建议。

**编辑：** 您的程序的此 DDL 适用于 Teradata 13.10：

```
CREATE PROCEDURE "SCHEMA"."GETRESULTSET" (
    IN "p1" VARCHAR(30))
DYNAMIC RESULT SETS 1
BEGIN       
DECLARE cur1 CURSOR WITH RETURN ONLY TO CLIENT FOR 
 SELECT "Partition" FROM "SCHEMA".SessionInfo where username = p1;    
  OPEN cur1;    
END; 
```

游标名称必须在 CURSOR 关键字之后。PartitionInfo 不是 DBC.SessionInfo 上的有效列。不确定“Schema”是否被 MyBatis 替换，因此您可能需要调整 SELECT 语句。

# http - 按 BACK 按钮时防止缓存

> ID：11693226
> 
> 赞同：3
> 
> 时间：2012-07-27T18:03:19.280
> 
> 标签：http, caching, web-applications, web, browser-history

当您在 Google Chrome 中按下后退按钮时，它似乎会缓存源代码（与 FF 中的 DOM 不同，但这只是观察，不是我确定的事情）。

有时我需要防止这种缓存，例如当您在结帐过程中时，重定向到贝宝等。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T21:04:54.473

这确实是一个问题，并且似乎特定于 Chrome。在我的情况下，我只担心如果它包含一个表单会显示一个陈旧的页面，并且我的所有表单都是使用我编写的同一个 AJAX 表单库提交的，所以我添加了这段代码以在执行重定向之前运行（重定向使用 JS 在 JS 中完成`window.location = ...`）：

```
//If the user clicks the back button after submitting the form and being redirected,
//Google Chrome redisplays previous entries even if they have since been changed
//(its caching works differently from other browsers).
//This is a (non-foolproof) hack to try to prevent this.
if (window.chrome) {
    //This re-requests the page headers for the current page,
    //which causes Chrome to clear its cache of the page.
    //Unfortunately there appears to be no other client-side way of preventing this caching issue in Chrome.
    $.ajax({
        url: window.location,
        method: 'HEAD'
    })
} 
```

当然，在服务器端设置 no-cache 标头会更干净，但我不想对*所有*页面都这样做，我不想费心检测哪些页面包含表单（或手动设置这些页面上的缓存标头）只是为了防止 Chrome 中出现此问题。

我希望有更好的解决方案，但我还没有找到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T09:59:20.787

```
<script type = "text/javascript" >
    history.pushState(null, null, '');
    window.addEventListener('popstate', function(event) {
    history.pushState(null, null, '');
    });
    </script> 
```

添加这个 javascript，这应该会阻止后退按钮，您可以使用此方法作为替代方法

# php - PHP - MySQL 从存储过程中获取 out 参数的值

> ID：11693234
> 
> 赞同：4
> 
> 时间：2012-07-27T18:03:37.407
> 
> 标签：php, mysql, out-parameters

我使用 .php 从 PHP 调用了一个 MySQL 存储过程`mysqli`。这有一个输出参数。

```
$rs = $mysqli->query("CALL addNewUser($name,$age,@id)"); 
```

这里，@id 是 out 参数。接下来，我触发以下查询以获取 out 参数的值：

```
$rs2 = $mysqli->query("SELECT @id");
while($row = $rs->fetch_object()){
    echo var_dump($row);
} 
```

的输出`var_dump`如下。

```
object(stdClass)#5 (1) { ["@id"]=> string(6) "100026" } 
```

所以，现在我想检索 的值`@id`，但我无法做到。我试过`$row[0]->{@id}`了，但这给出了以下错误：

> PHP 致命错误：不能将 stdClass 类型的对象用作数组

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T22:08:51.370

或者甚至只是做一个`"SELECT @id AS id"`then`$row->id`就可以了。我总是重命名选择列以在必要时保持名称有意义:-)

顺便说一句，您可以简单地连接调用并选择 @... （使用 ; 语句分隔符），RS 将是返回值。不幸的是，这会返回一个多结果集，您需要刷新完整集，否则后续查询将停止。请参阅以下示例：

```
$db->multi_query( "CALL addNewUser($name,$age,@id);SELECT @id as id" );
$db->next_result();            // flush the null RS from the call
$rs=$db->store_result();       // get the RS containing the id
echo $rs->fetch_object()->id, "\n";
$rs->free(); 
```

或者将选择添加到 addNewUser 并返回 RS 而不是 out 参数

```
$rs = $db->query( "CALL addNewUser($name,$age)" );
echo $rs->fetch_object()->id, "\n";
$rs->close();
$db->next_result();            // flush the null RS from the call 
```

第一个返回一个多查询 (NULL, RS) 集，第二个返回一个 (RS, NULL) 集，因此您可以使用嵌入第一个 fetch_object() 的简单 query() 调用，但您仍然需要刷新 RS 堆栈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T18:07:31.537

只是`$row->{"@id"}`会在这里工作。您不能将 an`stdClass`用作数组 ( `$row[0]...`)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T18:10:01.983

或者，您可以使用 将数据作为数组`mysqli::fetch_assoc()`获取并使用`$row['@id']`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-26T19:19:34.303

另一个正确的方法它工作正常：干杯！

```
$procedureName = 'VALIDATE_USER';
$procedure = "CALL $procedureName('$username','$pwd',@p_userid)";
$results1 = $dbconnection->query($procedure);
$results2 = $dbconnection->query("SELECT @p_userid");
$num_rows = $results2->num_rows;
if ($num_rows > 0) {

    while($row = $results2->fetch_object())
    {
    echo $row->{"@p_userid"};

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-03T19:46:48.967

这是工作解决方案：

```
enter code $res = $conn->multi_query( "CALL PROCNAME(@x);SELECT @x" );
if( $res ) {
  $results = 0;
  do {
    if ($result = $conn->store_result()) {
      printf( "<b>Result #%u</b>:<br/>", ++$results );
      while( $row = $result->fetch_row() ) {
        foreach( $row as $cell ) echo $cell, "&nbsp;";
      }
      $result->close();
      if( $conn->more_results() ) echo "<br/>";
    }
  } while( $conn->next_result() );
}
$conn->close(); 
```

# java - 使用并发类并行处理目录中的文件

> ID：11693235
> 
> 赞同：3
> 
> 时间：2012-07-27T18:03:38.137
> 
> 标签：java, multithreading, java.util.concurrent

我试图弄清楚如何使用`java.util.concurrent`包中的类型来并行处理目录中的所有文件。

我熟悉 Python 中的 multiprocessing 包，它使用起来非常简单，所以理想情况下我正在寻找类似的东西：

```
public interface FictionalFunctor<T>{
  void handle(T arg);
}

public class FictionalThreadPool {
  public FictionalThreadPool(int threadCount){
    ...
  }
  public <T> FictionalThreadPoolMapResult<T> map(FictionalFunctor<T> functor, List<T> args){
    // Executes the given functor on each and every arg from args in parallel. Returns, when
    // all the parallel branches return.
    // FictionalThreadPoolMapResult allows to abort the whole mapping process, at the least.
  }
}

dir = getDirectoryToProcess();
pool = new FictionalThreadPool(10);   // 10 threads in the pool
pool.map(new FictionalFunctor<File>(){ 
  @Override
  public void handle(File file){
    // process the file
  }
}, dir.listFiles()); 
```

我有一种感觉，其中的类型`java.util.concurrent`允许我做类似的事情，但我完全不知道从哪里开始。

有任何想法吗？

谢谢。

**编辑 1**

按照答案中给出的建议，我写了这样的东西：

```
public void processAllFiles() throws IOException {
  ExecutorService exec = Executors.newFixedThreadPool(6);
  BlockingQueue<Runnable> tasks = new LinkedBlockingQueue<Runnable>(5); // Figured we can keep the contents of 6 files simultaneously.
  exec.submit(new MyCoordinator(exec, tasks));
  for (File file : dir.listFiles(getMyFilter()) {
    try {
      tasks.add(new MyTask(file));
    } catch (IOException exc) {
      System.err.println(String.format("Failed to read %s - %s", file.getName(), exc.getMessage()));
    }
  }
}

public class MyTask implements Runnable {
  private final byte[] m_buffer;
  private final String m_name;

  public MyTask(File file) throws IOException {
    m_name = file.getName();
    m_buffer = Files.toByteArray(file);
  }

  @Override
  public void run() {
    // Process the file contents
  }
}

private class MyCoordinator implements Runnable {
  private final ExecutorService m_exec;
  private final BlockingQueue<Runnable> m_tasks;

  public MyCoordinator(ExecutorService exec, BlockingQueue<Runnable> tasks) {
    m_exec = exec;
    m_tasks = tasks;
  }

  @Override
  public void run() {
    while (true) {
      Runnable task = m_tasks.remove();
      m_exec.submit(task);
    }
  }
} 
```

我**认为**代码的工作原理是：

1.  文件一个接一个地被读取。
2.  文件内容保存在专用`MyTask`实例中。
3.  一个容量为 5 的阻塞队列来保存任务。我依靠服务器一次最多保留 6 个文件的内容的能力——队列中有 5 个，另一个完全初始化的任务等待进入队列。
4.  一个特殊`MyCoordinator`的任务从队列中获取文件任务并将它们分派到同一个池中。

好的，所以有一个错误 - 可以创建超过 6 个任务。即使所有池线程都忙，也会提交一些。我打算以后解决它。

问题是它根本不起作用。第`MyCoordinator`一次删除时线程阻塞 - 这很好。但它永远不会解除阻塞，即使新任务已放入队列中。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:41:11.960

比使用 ExecuterService 更简单的解决方案是实现您自己的生产者-消费者方案。有一个创建任务并提交到 LinkedBlockingQueue 或 ArrayBlockingQueue 的线程，并有检查此队列以检索任务并执行它们的工作线程。您可能需要一种特殊的任务名称 ExitTask 来强制工作人员退出。因此，在作业结束时，如果您有 n 个工作人员，您需要将 n 个 ExitTasks 添加到队列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:17:55.107

您正在寻找的线程池是[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)类。您可以使用`newFixedThreadPool`. 这使您可以轻松地实现生产者-消费者模式，池为您封装了所有队列和工作器功能：

```
ExecutorService exec = Executors.newFixedThreadPool(10); 
```

然后，您可以以类型实现的对象的形式提交任务`Runnable`（或者`Callable`如果您还想获得结果）：

```
class ThreadTask implements Runnable {
    public void run() {
       // task code
    }
}

...

exec.submit(new ThreadTask());
// alternatively, using an anonymous type
exec.submit(new Runnable() {
           public void run() {
              // task code
           }
      }); 
```

**关于并行处理多个文件的一个重要建议**：如果您有一个保存文件的机械磁盘，明智的做法是使用单个线程逐个读取它们并将每个文件提交给上述线程池任务，对于加工。不要并行执行实际读取，因为它会降低性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T19:14:00.153

Basically, what @Tudor said, use an ExecutorService, but I wanted to expand on his code and I always feel strange editing other people's posts. Here's a sksleton of what you would submit to the ExecutorService:

```
public class MyFileTask implements Runnable {
   final File fileToProcess;

   public MyFileTask(File file) {
      fileToProcess = file;
   }

   public void run() {
      // your code goes here, e.g.
      handle(fileToProcess);
      // if you prefer, implement Callable instead
   }
} 
```

See also [my blog post here for some more details if you get stuck](http://flyingspaniel.blogspot.com/2012/06/how-to-parallelize-your-algorithm-with.html)

Since processing Files often leads to IOExceptions, I'd prefer a Callable (which can throw a checked Exception) to a Runnable, but YMMV.

# android - 视图不显示 onTouch

> ID：11693236
> 
> 赞同：0
> 
> 时间：2012-07-27T18:03:41.540
> 
> 标签：android, view, while-loop

我正在开发一个应用程序，我想在注册触摸事件时显示一个视图。问题是视图不会显示并且我的代码变得无响应。

这是我的看法：

```
public class TouchFX extends View {

RectF oval;
float Tx, Ty;
Paint paint;
int longSide, numRun;
float top, left, right, bottom;
boolean removable;

public TouchFX(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    Tx = TouchService.x;
    Ty = TouchService.y;
    paint = new Paint();
    paint.setColor(Color.WHITE);
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    numRun = 0;
    removable = false;
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    if (canvas.getWidth() > canvas.getHeight())
        longSide = canvas.getWidth();
    else
        longSide = canvas.getHeight();

    if (numRun == 0) {
        left = Tx - (longSide / 15);
        top = Ty + (longSide / 15);
        right = Tx + (longSide / 15);
        bottom = Ty - (longSide / 15);
    } else if (numRun <= 8) {
        left += 2;
        top += 2;
        right += 2;
        bottom += 2;
    }
        oval = new RectF(left, top, right, bottom);

    if (numRun < 9)
        canvas.drawArc(oval, 0, 360, false, paint);
    else
        removable = true;

    numRun++;

    try {
        Thread.sleep(400);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
    }
} 
```

这是我的 onTouch 处理程序：

```
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if (v == tv && event.getAction() == MotionEvent.ACTION_DOWN
            && isRunning == true) {
        x = event.getX();
        y = event.getY();

        tfx = new TouchFX(this);

        winmngr.addView(tfx, lpFX);

                    //Do some stuff, make some Toasts

        while(!tfx.removable) {
            //waiting for animation to end
        }

        winmngr.removeView(tfx);
    }
    return false;
} 
```

现在，显然它被卡在了 while 循环中，但为什么它不绘制圆弧并更新布尔值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:14:57.493

它卡住了，因为 onTouch 事件在 UI 线程中运行（如 onDraw）。所以你在`while`循环中阻塞了你的 UI 线程并且 onDraw() 没有得到处理器时间。

考虑使用回调机制，因此`removeView()`例程由您的`onDraw`方法触发。在`sleep(400)`UI 线程中也是非常糟糕的主意。您可以尝试使用处理程序并延迟执行：

```
 public class YouCustomView extends View
 {

     Handler handler = new Handler();

     @Override
     protected onDraw(Canvas canvas){
         //your draw routine here
         .... 

         //wait 400 ms and remove view
         handler.postDelayed(new Runnable()
         {
             @Override
             public void run()
             {
                 //trigger callback to remove view
             }
         }, 400); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T18:14:24.417

这是我的代码它完全适合我它会画一个字符串希望它能帮助你解决问题

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    // draw text at touch
    try {
        canvas = getHolder().lockCanvas();
        synchronized (getHolder()) {
            if (event.getAction() == MotionEvent.ACTION_DOWN 
                    || event.getAction() == MotionEvent.ACTION_MOVE) {
                // clear the screen
                canvas.drawColor(Color.BLACK);
                // draw glyphs
                glyphs.drawString(canvas, "Drawing string at "
                        + (int) event.getX() + " " + (int) event.getY(),
                        (int) event.getX(), (int) event.getY());
            }
            if (event.getAction() == MotionEvent.ACTION_UP) {
                canvas.drawColor(Color.BLACK);
                glyphs.drawString(canvas, "Drawn string at "
                        + (int) event.getX() + " " + (int) event.getY(),
                        (int) event.getX(), (int) event.getY());
            }
        }
    } finally {
        if (canvas != null) {
            getHolder().unlockCanvasAndPost(canvas);
        }
    }
    // event was handled
    return true;
} 
```

# openlayers - 使用 Openlayers 和 GEOServer 显示特征名称

> ID：11693243
> 
> 赞同：1
> 
> 时间：2012-07-27T18:04:03.667
> 
> 标签：openlayers, geoserver

我试图在加载时在地图中显示特征名称（例如：建筑物的名称）。

我们如何使用**GeoServer在****OpenLayers**中显示它。

 **谢谢，阿肖克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:51:26.283

如果您使用的是 WMS 图层，请尝试使用[SLD 样式](http://docs.geoserver.org/latest/en/user/styling/sld-reference/labeling.html)。但是，如果你使用矢量图层，你必须使用 OpenLayers StyleMap[来标记你的特征](http://dev.openlayers.org/releases/OpenLayers-2.11/examples/vector-features-with-text.html)，试试这个

```
var style = new OpenLayers.StyleMap({
    default :new OpenLayers.Style({
          'label': '${feature_attr}'
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:34:19.493

您需要使用 geoserver 中的样式为该功能定义 TextSymbolizer。转到geoserver admin --> Styles --> 添加新样式。

添加一个 TextSymblizer 如下

```
<sld:NamedLayer xmlns:sld="http://www.opengis.net/sld"
    xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">
    <sld:UserStyle>
        <sld:Name>layer_name</sld:Name>
        <sld:Title>layer_title</sld:Title>
        <sld:Abstract/>
        <sld:FeatureTypeStyle>
            <sld:FeatureTypeName>Feature</sld:FeatureTypeName>

            <sld:Rule>
                <sld:Name>rule01</sld:Name>                             
                <sld:TextSymbolizer>
                    <sld:Label>
                        <ogc:PropertyName>feature_name</ogc:PropertyName>
                    </sld:Label>
                    <sld:Font>
                      <sld:CssParameter name="font-family">Arial</sld:CssParameter>
                      <sld:CssParameter name="font-style">Normal</sld:CssParameter>
                      <sld:CssParameter name="font-size">12</sld:CssParameter>
                    </sld:Font>

                    <sld:LabelPlacement>
                        <sld:PointPlacement>
                        <sld:AnchorPoint>
                            <sld:AnchorPointX>
                                0.5
                            </sld:AnchorPointX>
                            <sld:AnchorPointY>
                                0.5
                            </sld:AnchorPointY>
                        </sld:AnchorPoint>
                        </sld:PointPlacement>
                    </sld:LabelPlacement>            
                </sld:TextSymbolizer>
            </sld:Rule>
        </sld:FeatureTypeStyle>
    </sld:UserStyle>
</sld:NamedLayer> 
```

在标签中定义需要显示其值的特征。接下来将给定的图层与此样式相关联，更新并重新加载。**

# image - Tesseract [OCR] - 只有数字和欧元符号

> ID：11693244
> 
> 赞同：0
> 
> 时间：2012-07-27T18:04:12.383
> 
> 标签：image, ocr, tesseract

目前我正在使用`tesseract a.tif output nobatch digits`解析仅包含数字的图像。

我需要解析包含数字和欧元符号的图像。我怎么能用 tesseract 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:22:06.077

**修改tessdata\configs**下的文件**数字**以包含 € 符号。

# codeigniter - 使用标签面板显示杂货杂货

> ID：11693245
> 
> 赞同：1
> 
> 时间：2012-07-27T18:04:11.910
> 
> 标签：codeigniter, grocery-crud

我是杂货杂货的新手。我有一个数据库表，可以说 customer_details，它包括 customer_name 和 customer_id 等列。我有另一个名为 purches_details 的表，customer_id 是该表的外键。

我想根据 customer_detail 表中的 customer_name 列在我的视图中创建一个选项卡面板（菜单）。选项卡名称应该是客户名称

＆当有人单击相关的 customer_name 选项卡时，相关的购买详细信息应显示为杂货杂货网格。

请朋友们帮助我，我非常想要它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:38:46.317

我得到了这个答案...

```
the controller from grocery CRUD 1.2.3 with CodeIgniter 2.1.2 (! try to use CI 2.1.2 or CI 2.1.0 versions + latest grocery CRUD):

            <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');    
        class Examples extends CI_Controller {    public function __construct()
            {
              parent::__construct();
              $this->load->database();
              $this->load->helper('url');
              $this->load->library('grocery_crud');
            }    
        public function _example_output($output = null)
            {
              $this->load->view('example', $output);
            }    public function index()
            {
              $this->_example_output( (object) array('output' => '', 'js_files' => array(), 'css_files' => array()));
            }    
        public function customers()
            {
              $crud = new grocery_crud();
              $crud->set_table('customer_details');
              $crud->set_subject('Customer Details');
              $output = $crud->render();
              $output->menu = $this->db->select('customer_id, customer_name')->get('customer_details')->result();
              $this->_example_output($output);
            }    public function purches_details($customer)
            {
              $company = $this->uri->segment(3);
              $crud = new grocery_crud();
              $crud->set_table('purches_details');
              $crud->set_subject('Purches Details');
              $crud->where('customer_id', $customer);
              $output = $crud->render();
              $output->menu = $this->db->select('customer_id, customer_name')->get('customer_details')->result();
              $this->_example_output($output);
            }    
        }

and the view with our customer names links:

            [CODE]
            <!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8" />
            <?php
            foreach($css_files as $file): ?>
            <link type="text/css" rel="stylesheet" href="<?php echo $file; ?>" />
            <?php endforeach; ?>
            <?php foreach($js_files as $file): ?>
            <script src="<?php echo $file; ?>"></script>
            <?php endforeach; ?>
            <style type='text/css'>
            body
            {
            font-family: Arial;
            font-size: 14px;
            }
            a {
                color: blue;
                text-decoration: none;
                font-size: 14px;
            }
            a:hover
            {
            text-decoration: underline;
            }
            </style>
            </head>
            <body>
            <div>
            <?php echo anchor('examples/customers', 'All Customers');?> :
            <?php foreach ($menu as $link) {?>
              <?php echo anchor("examples/purches_details/$link->customer_id", "$link->customer_name");?> &middot;
            <?php }?>
            </div>
            <div style='height:20px;'></div>
                <div>
              <?php echo $output; ?>
                </div>
            </body>
            </html> 
```

# ms-access - 访问报告详细信息格式 - 默认值和引用

> ID：11693247
> 
> 赞同：0
> 
> 时间：2012-07-27T18:04:15.543
> 
> 标签：ms-access, ms-access-2007, vba

这个问题主要是出于好奇，但在描述中，我曾打算强调 Access 的一个不常记录的行为。

### 背景

创建 Access 报表时，我们可以使用详细信息部分的 On Format 方法来修改每条记录的值或属性。例如，假设我们想在值为空时隐藏字段标签：

```
Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)
    If (IsNull(Me.SomeField) Or Me.SomeField = "") Then
        Me.SomeFieldLabel.Visible = False
    Else
        Me.SomeFieldLabel.Visible = True
    End If
End Sub 
```

直到今天我才意识到，赋值`.Visible = False` 并没有修改 Detail 部分中标签的**实例**，而是修改了报表上标签的**定义**。

这可以通过对代码的以下修改来证明：

```
Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)
    If (IsNull(Me.SomeField) Or Me.SomeField = "") Then
        Me.SomeFieldLabel.Visible = False
    End If
End Sub 
```

假设标签最初是可见的（在表单设计器中），该事件会产生一些意想不到的行为：标签将保持可见直到第一个空记录；之后，它将对所有其他记录保持隐藏 - 我最初预计在每次调用`Detail_Format`控件时都会从它们的默认定义开始。

### 问题

有没有办法在事件中引用控件的特定实例`Detail_Format`？

在这种可见真/假的简单情况下，只需一个简单的 if-then-else 即可轻松处理，但我可以想象更高级的场景，其中可能希望保留默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:52:29.777

我不这么认为，根据我的所有经验，报表对象的属性总是普遍适用于整个报表，而不是对象的特定实例（如果对象重复）。

对于您的示例，我将使用文本框而不是标签来标记字段，并使用类似的东西`=IIf(IsNull(Field1), "", "Label:")`作为控制源。这样，如果字段为空，它不会显示任何内容，但如果有值，仍会显示标签文本。

# javascript - Firebug 命令编辑器已禁用

> ID：11693248
> 
> 赞同：0
> 
> 时间：2012-07-27T18:04:15.940
> 
> 标签：javascript, editor, firebug

控制台选项卡上的命令编辑器被禁用。 [http://i.imgur.com/DTq42.png](http://i.imgur.com/DTq42.png)

我已经重置了所有设置，但它仍然无法自行恢复。我还启用了所有面板。我该怎么做才能重新启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:15:02.417

[以下](https://getfirebug.com/wiki/index.php/I_found_a_Firebug_Bug!#Isolating_the_problem)是隔离 Firebug 问题的一些步骤：

1.  创建一个新的配置文件，安装 Firebug，重现问题。还是bug？报告问题，否则
2.  返回到您以前的配置文件，通过 Firefox 菜单栏 > 工具 > 附加组件、Firefox 按钮 > 附加组件或 about:addons 打开附加组件管理器以禁用除 Firebug 之外的所有扩展。解决了？再次一一启用其他扩展，直到找到错误的一个并报告它，否则
3.  通过 Firebug 按钮打开故障排除信息 > 帮助 > 故障排除信息，单击打开包含文件夹，`prefs.js`在文本编辑器中打开，将包含的所有行复制`extensions.firebug`到单独的文本文件中，重置所有选项（通过 Firebug 图标菜单（左上角）> 选项 >重置所有 Firebug 选项），重现问题。解决了？报告附加创建文件的问题，否则
4.  在配置文件文件夹中转到 firebug/，将文件 breakpoints.json（如果不存在，请转到步骤 4）移出该文件夹，重现问题。解决了？报告附加您的问题`breakpoints.json`（注意：breakpoints.json 包含您设置的所有断点的 URL，因此请确保没有任何内容，不应该公开），否则
5.  在 firebug/ 下的 profile 文件夹中，将文件 annotations.json（如果不存在，请转到步骤 5）移出该文件夹，重现问题。解决了？报告附加您的 annotations.json 的问题（注意：annotations.json 包含您启用 Firebug 的所有页面的 URL，因此请确保没有任何内容，不应该公开）

我还发现[了这个线程](http://fbug.googlecode.com/issues/attachment?aid=57280000000&name=firebug.png&token=-D4idAvnDc2vuaLRKSBqQSzYAVc%3A1343412328245&inline=1)，由似乎和你有同样问题的人创建。他说它适用于新的配置文件。要创建新配置文件，请使用[本](https://getfirebug.com/wiki/index.php/FAQ#Installing_in_a_clean_profile)指南。

# java - Salesforce：生日 Apex 计划程序问题

> ID：11693252
> 
> 赞同：0
> 
> 时间：2012-07-27T18:04:24.493
> 
> 标签：java, salesforce, apex-code, scheduler

我写了一个 Apex Scheduler 类，以便在距离同事生日还有 2 天时发送电子邮件。我创建了一个 2 天后生日的联系人。联系人的生日是 2012 年 7 月 29 日。今天的日期是 2012 年 7 月 27 日。

我被困住了。我没有收到错误消息或任何东西。我已将课程安排在今天 12 点上课。我没有收到电子邮件（要么告诉我这是某人的生日（成功），要么来自 Salesforce 的错误消息告诉我我的代码无法运行（失败）

为了排除故障，我还尝试了电子邮件方法的 if (contact.Next_Birthday__c = : system.Today().addDays(2)) 并得到了不兼容的类型错误。Next_Birthday__c 是一个日期字段，所以我不确定为什么类型不兼容或者为什么这个 SOQL 语句不起作用。

任何意见，将不胜感激。这是我的代码。

```
global class BirthdayNameOptions implements Schedulable{
  global void execute (SchedulableContext ctx)
  {
    sendBirthdayEmail();
  }

  public void sendBirthdayEmail()
  {
    for(Contact con : [SELECT Name FROM Contact WHERE Next_Birthday__c = : system.Today().addDays(2)])
    {
      Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
      mail.setTemplateId('00XJ0000000M31w');
      mail.setTargetObjectId('005J0000000');
      mail.setSaveAsActivity(false);
      Messaging.sendEmail(new Messaging.SingleEmailMessage[] {mail });
    }
  }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:36:27.247

我相信您想将`targetObjectId`出站电子邮件设置为生日的联系人，而不是对其进行硬编码……`005J0000000`您的代码中的值似乎也不是有效的 ID，这可能会导致您不接收电子邮件。出于测试目的，您需要确保将联系人记录的电子邮件设置为您的电子邮件，以便您收到通知。此外，每次执行您只能获得 10 次调用`Messaging.sendEmail()`，所以我为您稍微扩大了一点。试一试：

```
global class BirthdayNameOptions implements Schedulable {
    global void execute (SchedulableContext ctx) {
        sendBirthdayEmail();
    }
    public void sendBirthdayEmail() {
        List<Messaging.SingleEmailMessage> mails = new List<Messaging.SingleEmailMessage>();
        for ( Contact con : [SELECT Id, Name FROM Contact WHERE Next_Birthday__c = : system.Today().addDays(2)] ) {
            Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
            mail.setTemplateId('00XJ0000000M31w');
            mail.setTargetObjectId(con.Id);
            mail.setSaveAsActivity(false);
            mails.add(mail);
        }
        if ( mails.size() > 0 )
            Messaging.sendEmail(mails, false);
    }
} 
```

# javascript - 防止 iframe 破坏会杀死网站上的所有链接

> ID：11693253
> 
> 赞同：0
> 
> 时间：2012-07-27T18:04:52.143
> 
> 标签：javascript, iframe

我在下面有这个脚本，它确实可以防止 iFrame 被破坏，但它也会杀死我页面上的每个链接。如何防止脚本禁用我的所有链接？

```
<script>
    var prevent_bust = 0  
    window.onbeforeunload = function() { prevent_bust++ }  
    setInterval(function() {  
        if (prevent_bust > 0) {  
            prevent_bust -= 2  
            // 204 header response prevents redirect
            window.top.location = '/204-response'  
        }  
    }, 1)  
</script> 
```

我遇到的问题与此处描述的完全一样：[http ://slightlyparanoid.com/?p=11](http://slightlyparanoid.com/?p=11)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:19:05.217

编辑：您使用这种方法来进行框架破坏是否有原因？普遍接受的方法是 compare `self === top`，我非常怀疑这会破坏任何锚标签：

```
if (self !== top) {
    // this script is running in an iframe
} else {
    // this script is not running in an iframe
} 
```

这很可能会影响 IE（[文档](http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx)）：

*   单击引用另一个文档的锚点。
*   调用 anchor.click 方法。

要允许`onbeforeunload`事件继续而不干扰锚标记点击，您必须从中返回`undefined`。

```
window.onbeforeunload = function() { 
    prevent_bust++; 
    return undefined; 
}; 
```

澄清一下，`onbeforeunload`期望从处理程序返回一个字符串，然后将其放入确认框中。如果你 return `undefined`，它会绕过这个并继续`unload`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T05:43:50.607

截至目前，禁用帧破坏的最佳方法是[沙盒](https://www.w3schools.com/tags/att_iframe_sandbox.asp)，但正如您在测试中可能发现的那样，
这种方法有一些缺点。

但是，204 代码会禁用所有浏览器导航（所有链接、后退、前进等）。
然而，一些浏览器重新设置了后退和前进按钮，但仍然没有链接导航，因此将其应用于您的代码可能不是最好的主意，您是否尝试将“/204-response”添加到
iframe 源（src 属性）？

帧破坏是跨域嵌入的一个问题......但就像我说的沙盒规则只在一定程度上有效。

所以试试沙盒属性，让我们知道它是如何工作的！
（显然，这种类型的事情是针对每种情况的，但这是一个很好的通用方法。）

# c# - 如果该行项目为真，如何使数据网格的一行变为粗体？

> ID：11693256
> 
> 赞同：3
> 
> 时间：2012-07-27T18:05:06.143
> 
> 标签：c#, wpf, datagrid

所以假设我有一个自定义类：

```
Class Elements{

    int width;
    int height;
    bool isBol;

} 
```

主要我有类似的东西：

```
Public class MainWindow{

    DataGrid dgv = new DataGrid();
    List<Elements> elem = new List<Elements() { 
         new Element(){width=100, height = 200, isBold = false}, 
         new Element(){ width=20, height=100, isBold = true}
    };

    dgv.ItemsSource = elem;

    dgv.Columns.Add(new DataGridTextColumn() { 
           Header = "Width", Binding = new Binding("width")}
    dgv.Columns.Add(new DataGridTextColumn() { 
           Header = "Height", Binding = new Binding("height")}

} 
```

所以它只是一个简单的表格，有 2 列，宽度和高度。

如何根据 bool 值 isBold 使一行显示为粗体？在我上面的示例中，表格中的 20x100 行应该是粗体，而 100x200 不应该是粗体。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T18:12:02.813

我会`DataTrigger`在隐式中使用 a`Style`

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridRow}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding isBold}" Value="True">
                <Setter Property="FontWeight" Value="Bold" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.Resources> 
```

# makefile - 获取 make 以在错误时显示行号

> ID：11693262
> 
> 赞同：5
> 
> 时间：2012-07-27T18:05:17.810
> 
> 标签：makefile, gnu-make

我有一个makefile，它缺少一个ldflag。我知道如何修复它，但我不知道生成文件中的哪一行错误。

```
+ make
  CCLD   test
test-test.o: In function `write_png':
/home/lenovo/scratch/libass/test/test.c:52: undefined reference to `png_create_write_struct'
...
/home/lenovo/scratch/libass/test/test.c:57: undefined reference to `png_destroy_write_struct'
collect2: ld returned 1 exit status
make: *** [test] Error 1 
```

如何让 make 打印出错误所在的行？

（如果有人想知道，它是来自测试目录中 libass 项目的生成文件。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:19:35.497

尝试使用`remake`，看看是否有帮助。

[http://static.usenix.org/events/lisa11/tech/full_papers/Bernstein.pdf](http://static.usenix.org/events/lisa11/tech/full_papers/Bernstein.pdf)

这是从上面的链接获得的示例：

![在此处输入图像描述](../Images/61fcfcd13023e46b1b256e0fb687d844.png)

希望这可以帮助！

# toggle - 动态更改内容和切换按钮

> ID：11693275
> 
> 赞同：0
> 
> 时间：2012-07-27T18:06:23.363
> 
> 标签：toggle, forms

我有一个表单，我想切换它的模式以及相应的按钮。基本上，当用户首先打开页面时，他们会看到无法编辑的表单。还有一个“编辑”按钮。当他们点击按钮时，会发生两件事： 1\. 表单是可编辑的。2.“编辑”按钮被隐藏，另外两个按钮显示，分别是“保存”和“取消”。

我现在拥有的代码很接近，但不像我上面提到的那样工作。知道如何解决吗？

html:

```
<div class="eq-height widget grid_4 container flat rounded-sm bspace" id="Div5">
   <header class="widgetheader">
   <h2>Contact</h2>
   </header>

<input type="submit" value="Edit" class="edit edit-one-button btn lg bold ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover" style="border-style:Solid;"/> 
<input type="submit" value="Save" class="save edit-one-button btn lg bold ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover" style="border-style:Solid;"/>
<input type="submit" value="Cancel" class="cancel edit-one-button btn lg bold ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-hover" style="border-style:Solid;"/>

<fieldset id="Fieldset1" class="content form-fields">
              <div class="inner tspace clearfix">
                <ul id="contact" class="alpha">
                  <li class="contactinfo">
                    <label class="contactinfo grid_12">
                      Rebekah Becker</label>
                  </li></ul>
              </div>

</fieldset>

<fieldset id="Fieldset6" style="display:none"
              class="content form-fields">
              <div class="inner tspace clearfix">
                <ul id="Ul1" class="alpha">
                  <li class="contactinfo">               
                    <label class="contactinfo grid_4">
                      First Name:</label>
                    <input type="text" trim="true" maxlength="250" value="Rebekah" class="profile-field grid_4">              
                  </li></ul>
                 <div class="clear-both"></div>
              </div>
</fieldset>
</div> 
```

CSS：

```
.save, .cancel 
{
display:none;
} 
```

javascript:

```
/*script to toggle the form mode*/
<script type="text/javascript">
    var divheight;
    $(".edit-one-button").click(function () {
      var btnname = $(this).val();
      if (btnname == 'Edit') {
        divheight = $('.widget').attr('style');
        $(this).closest('.widget').removeAttr('style');
        $(this).nextUntil('.edit-one-button').toggle();
      }
      else {
        $(this).nextUntil('.edit-one-button').toggle();
        $(this).closest('.widget').attr('style', divheight);
      }
    });
  </script>

/*script to switch the buttons*/
<script type="text/javascript">
  $('.edit').click(function () {
    $(this).hide();
    $(this).siblings('.save, .cancel').show();
  });
$('.cancel').click(function() {
    $(this).siblings('.edit').show();
    $(this).siblings('.save').hide();
    $(this).hide();
});
$('.save').click(function() {
    $(this).siblings('.edit').show();
    $(this).siblings('.cancel').hide();
    $(this).hide();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:22:04.433

这是按照您在顶部所说的那样做。

```
$(document).ready(function(){
$("#edit").click(function(){
$('#Fieldset1').hide();
$('#Fieldset6').show();
$('#edit').hide();
$('#save').show();
$('#cancel').show();
});
});
  </script> 
```

如果你想让我做剩下的取消和保存，请告诉我:)

# javascript - 虚线错误

> ID：11693284
> 
> 赞同：1
> 
> 时间：2012-07-27T18:07:03.467
> 
> 标签：javascript, html, canvas

我采用并改编了一个绘制虚线的 HTML5 画布扩展，但它有几个问题，如[http://jsfiddle.net/VxCYL/2/所示](http://jsfiddle.net/VxCYL/2/)

示例 1：如何避免两点之间的距离非常小的点“聚集”在一起（参见第一个角点 30,50 到 32,50）。我想在确定是否绘制或移动到下一个点时，我需要检查与最后一个点的距离？当我有很多点时，输出看起来很笨拙。

示例 2：from.x 小于 to.x 或 from.y 小于 to.y 即向后绘制 moveTo 的行为不像我预期的那样，即在示例中显示的行仍应连接向上。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:22:00.803

第一个问题在图书馆中不容易解决。它需要一个包装器方法，该方法需要一个点数组，以便它可以在“圆角”时累积并跟踪当前的点/破折号状态。（如果时间允许，我将编写一个方法来执行此操作；如果这样做，我将编辑此答案并添加通知评论。）

您无法通过更改您的`dashArray`.

例如，对于`[2,9]`图案的标称 dashArray，每 11 像素重复一次。如果你的第一行是 115px，这意味着你将绘制 10 个图案副本，2px 的点和 3px 的虚线。因此，您希望下一行以 6px 偏移量开始，然后再绘制下一个点。`[0,6,2,9,2,9,2,9,2,9,2,9,...]`在覆盖下一行的长度之前，您将需要一个 dashArray 。：/

* * *

第二个例子显然是代码中的一个错误。这是一个稍微简单的演示：

### 破碎：http: [//jsfiddle.net/VxCYL/3/](http://jsfiddle.net/VxCYL/3/)

为了解决这个问题，我们需要确保`xStep`当为负数时`dx`为负数。我们将这一行添加到：

```
if (dx<0) xStep = -xStep; 
```

### 固定：http: [//jsfiddle.net/VxCYL/4/](http://jsfiddle.net/VxCYL/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:11:10.087

谢谢，你是绅士。值得注意的是，我尝试了类似的方法，但在我的无知中将 dx<0 设置为 dx<1。

此 Fiddle 中还显示了另一个问题：

[http://jsfiddle.net/VxCYL/5/](http://jsfiddle.net/VxCYL/5/)

如果 x 或 Y 是内联的，则不会渲染任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T10:44:50.337

最后一个问题现在已经解决了。修复是在计算斜率时满足 Infinity 或 -Infinity ：

var 斜率 = (dy / dx); 斜率 = 斜率 == 无穷大 || 斜率 == -Infinity ? dy : 斜率;

# objective-c - 使用 Objective C 从 iPad 访问 FTP 服务器

> ID：11693286
> 
> 赞同：0
> 
> 时间：2012-07-27T18:07:06.210
> 
> 标签：objective-c, xcode, http, url, ftp

我有这段代码试图使用 URL 访问 FTP。但我无法访问，因为它受用户名和密码保护。我如何实现它以便我可以进入服务器？这是我的代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response
{

[receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

[receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{

NSLog(@"Connection failed! Error - %@ %@",
      [error localizedDescription],
      [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
// do something with the data
// receivedData is declared as a method instance elsewhere
NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

// release the connection, and the data object
//[connection release];
//[receivedData release];
}

-(IBAction)getURL:(id)sender {

NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL     URLWithString:@"ftp://10.0.1.***/App_Data/text.txt"]
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:60.0];

NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest     delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    receivedData = [NSMutableData data];
} else {
    // Inform the user that the connection failed.
    NSLog(@"connection failed");
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:33:24.193

用户 ID 和密码可以嵌入到 URL 中：

```
ftp://userid:password@10.0.1.***/App_Data/text.txt 
```

# github - 如何使用 git bash 在 Github 创建一个新的仓库？

> ID：11693288
> 
> 赞同：22
> 
> 时间：2012-07-27T18:07:08.637
> 
> 标签：github, github-api, git-bash

如何使用 git bash 从我的机器创建一个新的存储库？

我按照以下步骤操作：

```
mkdir ~/Hello-World

cd ~/Hello-World

git init

touch README

git add README

git commit -m 'first commit'

git remote add origin https://github.com/username/Hello-World.git

git push origin master 
```

但我收到“致命错误：您是否在服务器上运行了 update-server-info？”

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-27T19:23:38.820

您不能使用 git bash 在 github 上创建存储库。Git 和 github 是不同的东西。Github 是一个让您托管和协作代码的平台，而 git 是使用的版本控制工具。您可以在 wikipedia 文章中阅读更多关于它们的信息：[github](http://en.wikipedia.org/wiki/GitHub)和[git](http://en.wikipedia.org/wiki/Git_%28software%29)。

但是，如果您打算使用终端创建 github 存储库，则可以使用 github api 和 curl 来完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-31T02:05:41.170

在 github 上创建 repo 的最简单方法可能是在此行**之前的某个地方：**

```
git remote add origin https://github.com/username/Hello-World.git 
```

转到[https://github.com/new](https://github.com/new)并在 github 上创建一个存储库，然后运行最后两行，一切都会正常。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-26T02:43:35.617

我创建了这个 bash 文件来自动完成这一切。

```
#!/bin/sh
reponame="$1"
if [ "$reponame" = "" ]; then
read -p "Enter Github Repository Name: " reponame
fi
mkdir ./$reponame
cd $reponame
curl -u USERNAME https://api.github.com/user/repos -d "{\"name\":\"$reponame\"}"
git init
echo "ADD README CONTENT" > README.md
git add README.md
git commit -m "Starting Out"
git remote add origin git@github.com:USERNAME/$reponame.git
git push -u origin master 
```

又怎样：

复制上面的代码。将其保存为 NAME.sh，将其添加到您的 PATH 中。重新启动终端或打开一个新终端。

```
$ NAME newreponame
$ NAME
$ Enter Github Repository Name: 
```

谢谢。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-06T00:58:14.550

首先，尝试在 git push 之前执行此操作：

```
git pull repo branch 
```

然后尝试执行以下操作：

```
$ git init --bare yourreponame.git 
```

然后做你之前做的事情：

```
touch README

git add README 
```

`git commit -m 'first commit'`

`git remote add origin https://github.com/username/Hello-World.git`

`git push origin master`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-22T16:50:26.903

我认为这是可行的。

您可以使用 curl 来完成（如果您在 Windows 上，则必须安装它）

```
curl -u USER https://api.github.com/user/repos -d '{ "name": "REPO" }' 
```

确保将 USER 和 REPO 分别替换为您的 github 用户名和您要创建的存储库的名称

它要求输入密码，输入你的 github 管理员密码，你就可以开始了。

实际上在这里由 James Barnett 回答[https://teamtreehouse.com/community/how-does-one-add-a-repository-to-github-using-git-commandline-calls-only](https://teamtreehouse.com/community/how-does-one-add-a-repository-to-github-using-git-commandline-calls-only)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-02T19:38:06.443

## 概述

命令 'git' 不允许您创建 repo，但可以从 BASH 脚本在 github 创建新的 repo。所有解决方案都使用用户/密码身份验证，该身份验证已被[删除](https://developer.github.com/changes/2020-02-14-deprecating-password-auth/)但仍在使用中。必须使用[个人访问令牌](https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line)进行身份验证。下面有解决办法：

## 第三方申请

[https://github.com/github/hub](https://github.com/github/hub)

```
sudo apt install hub;
cd <folder with code>;
hub init;
hub create -p -d "<repo description>" -h "<project site>" \
"user_name>/<repo_name>"; 
```

更多选项：[https ://hub.github.com/hub-create.1.html](https://hub.github.com/hub-create.1.html)

## 纯 BASH

```
REPONAME="TEST";
DOMAIN="www.example.com";
DESCRIPTION="Repo Description";
GITHUB_USER="github_user";

FOLDER="$HOME/temp/$REPONAME";
mkdir -p "$FOLDER"; cd "$FOLDER";

read -r -d '' JSON_TEMPLATE << EOF
{
  "name" : "%s",
  "description" : "%s",
  "homepage" : "%s",
  "visibility" : "private",
  "private" : true,
  "has_issues" : false,
  "has_downloads" : false,
  "has_wiki" : false,
  "has_projects" : false
}
EOF

JSON_OUTPUT=$(printf "$JSON_TEMPLATE" "$REPO_NAME" \
  "$DESCRIPTION" "http://$DOMAIN");

# https://developer.github.com/v3/repos/#create-an-organization-repository
curl -u ${GITHUB_USER} https://api.github.com/user/repos \
  -d "$JSON_OUTPUT" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-12T01:34:07.783

也许您收到此错误是因为您没有设置身份：

`$ git config --global user.name "John Doe" $ git config --global user.email johndoe@example.com`

在这里您可以找到在 github 上创建和放置存储库的步骤：http: [//programertools.blogspot.com/2014/04/how-to-use-github.html](http://programertools.blogspot.com/2014/04/how-to-use-github.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-06T13:36:47.963

只需尝试在最后一行添加 -u ：

```
git push -u origin master 
```

# single-sign-on - 用于什么不同的 NameID 格式？

> ID：11693297
> 
> 赞同：65
> 
> 时间：2012-07-27T18:07:47.250
> 
> 标签：single-sign-on, saml, opensaml

在 SAML 元数据文件中定义了几种 NameID 格式，例如：

```
<NameIDFormat>urn:mace:shibboleth:1.0:nameIdentifier</NameIDFormat>

<NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</NameIDFormat>

<NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</NameIDFormat> 
```

谁能解释一下这些是干什么用的？有什么区别？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-02-10T16:35:34.003

请参阅oasis SAML 规范的此[SAML 核心 pdf](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)的第 8.3 节。

SP 和 IdP 通常就某个主题相互交流。该主题应通过 NAME-IDentifier 进行标识，该名称应采用某种格式，以便对方根据该格式轻松识别它。

所有这些

```
1.urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified [default]

2.urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress

3.urn:oasis:names:tc:SAML:2.0:nameid-format:persistent

4.urn:oasis:names:tc:SAML:2.0:nameid-format:transient 
```

是名称标识符的格式。

[SAML 1 中瞬态 ID 的名称格式为 urn:mace:shibboleth:1.0:nameIdentifier，在 SAML 2 中为 urn:oasis:names:tc:SAML:2.0:nameid-format:transient](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPTransientNameIdentifier)

Transient 适用于 [ [SAML Core](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)的第 8.3.8 节]

> 指示元素的内容是具有瞬态语义的标识符，并且应该被依赖方视为不透明的临时值。

可以使用未指定的，它完全取决于实体实现自己的意愿。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-06-12T08:29:01.117

关于这一点，我认为您可以参考[http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html)。

这是我对此的理解，**身份联合用例**提供了这些概念的详细信息：

*   持久标识符-

IdP 提供持久标识符，它们用于链接到 SP 中的本地帐户，但它们单独标识为特定服务的用户配置文件。例如，持久标识符有点像：johnForAir、jonhForCar、johnForHotel，它们都只针对一个指定的服务，因为它需要链接到服务中的本地标识。

*   瞬态标识符-

瞬态标识符是IdP告诉SP会话中的用户已被授权访问SP上的资源，但用户的身份实际上并不提供给SP。例如，断言就像“匿名（Idp 不告诉 SP 他是谁）有权访问 SP 上的 /resource”。SP 得到它并让浏览器访问它，但仍然不知道 Anonymity 的真实姓名。

*   未指定的标识符-

规范中对它的解释是“元素内容的解释留给单独的实现”。这意味着 IdP 为其定义了真正的格式，并假设 SP 知道如何解析来自 IdP 的格式数据响应。例如，IdP给出一个格式数据“UserName=XXXXX Country=US”，SP得到断言，可以解析得到UserName为“XXXXX”。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-07-29T14:56:57.690

它只是提示服务提供者对身份提供者返回的 NameID 的期望。有可能：

1.  `unspecified`
2.  `emailAddress`– 例如`john@company.com`
3.  `X509SubjectName`– 例如`CN=john,O=Company Ltd.,C=US`
4.  `WindowsDomainQualifiedName`– 例如`CompanyDomain\John`
5.  `kerberos`– 例如`john@realm`
6.  `entity`– 这个用于识别提供基于 SAML 的服务的实体，看起来像一个 URI
7.  `persistent`– 这是一个不透明的特定于服务的标识符，它必须包含一个伪随机值，并且不能追溯到实际用户，因此这是一项隐私功能。
8.  `transient`– 不透明的标识符，应被视为临时的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-31T15:25:03.870

1 和 2 是 SAML 1.1，因为这些 URI 是 OASIS SAML 1.1 标准的一部分。[OASIS SAML 2.0 标准](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf "SAML 2.0 核心")的链接 PDF 的第 8.3 节解释了这一点：

> 在可能的情况下，使用现有的 URN 来指定协议。对于 IETF 协议，使用指定协议的最新 RFC 的 URN。根据首次引入它们的规范集版本，专为 SAML 创建的 URI 引用具有以下词干之一：
> 
> ```
> urn:oasis:names:tc:SAML:1.0:
> urn:oasis:names:tc:SAML:1.1:
> urn:oasis:names:tc:SAML:2.0: 
> ```

# objective-c - 不会写入 plist 数组 Xcode。这是使用的代码，它不起作用，有人知道为什么吗？

> ID：11693298
> 
> 赞同：0
> 
> 时间：2012-07-27T18:07:48.573
> 
> 标签：objective-c, iphone, xcode, storage, plist

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSString *finalPath = [path stringByAppendingPathComponent:@"HighScore.plist"];
NSMutableArray* plistDict = [[NSMutableArray alloc]
                             initWithContentsOfFile:finalPath];   
[plistDict addObject:[highScoreLabel  text]];
NSArray *regArray =  [NSMutableArray arrayWithArray:plistDict];
[regArray writeToFile:@"HighScore.plist" atomically: YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:12:45.947

p list write to file 表示写入p list 或保存数据，,, 用于检索视图写入文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:16:34.323

该文件是否存在并包含有效数据？

请参阅 Apple的[文档](https://developer.apple.com/library/ios/documentation/cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithContentsOfFile%3a)：`NSMutableArray initWithContentsOfFile:`

> 返回值
> 
> 一个数组初始化为包含由 aPath 指定的文件的内容，如果文件无法打开或文件的内容无法解析为数组，则为 nil。返回的对象可能与原始接收者不同。
> 
> 讨论
> 
> 由 aPath 标识的文件中的数组表示必须仅包含属性列表对象（NSString、NSData、NSArray 或 NSDictionary 对象）。该数组包含的对象是不可变的，即使该数组是可变的。

如果`initWithContentsOfFile:`返回`nil`，很明显其余代码也不起作用。

# python - python 正则表达式：如何让模式搜索多个模式字符串？

> ID：11693301
> 
> 赞同：4
> 
> 时间：2012-07-27T18:07:56.390
> 
> 标签：python, regex

我必须在文件中搜索以下模式，（任何匹配都符合条件）

```
pattern_strings = ['\xc2d', '\xa0', '\xe7', '\xc3\ufffdd', '\xc2\xa0', '\xc3\xa7', '\xa0\xa0', '\xc2', '\xe9']
pattern = [re.compile(x) for x in pattern_strings] 
```

并使用此功能

```
def find_pattern(path):
    with open(path, 'r') as f:
        for line in f:
            found = pattern.search(line)
            if found:
                logging.info('found - ' + found) 
```

当我尝试使用它时

```
find_pattern('myfile') 
```

我懂了`AttributeError: "'list' object has no attribute 'search'"`

因为模式是

`[<_sre.SRE_Pattern object at 0x107948378>, <_sre.SRE_Pattern object at 0x107b31c70>, <_sre.SRE_Pattern object at 0x107b31ce0>, <_sre.SRE_Pattern object at 0x107ac3cb0>, <_sre.SRE_Pattern object at 0x107b747b0>, <_sre.SRE_Pattern object at 0x107b74828>, <_sre.SRE_Pattern object at 0x107b748a0>, <_sre.SRE_Pattern object at 0x107b31d50>, <_sre.SRE_Pattern object at 0x107b31dc0>]`

我怎样才能有一种模式来查找所有字符串`pattern_strings`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:10:32.283

您可以简单地将所有表达式与 a 连接在一起`|`：

```
pattern_strings = ['\xc2d', '\xa0', '\xe7', '\xc3\ufffdd', '\xc2\xa0', '\xc3\xa7', '\xa0\xa0', '\xc2', '\xe9']
pattern_string = '|'.join(pattern_strings)
pattern = re.compile(pattern_string) 
```

但是，这确实假设您的任何模式都不够复杂，以至于像这样的简单串联可能会中断。对于您示例中的那些，它应该可以工作。对于更复杂的模式，它可能不会。

# ruby-on-rails - 基于多个模型创建范围

> ID：11693310
> 
> 赞同：0
> 
> 时间：2012-07-27T18:08:27.693
> 
> 标签：ruby-on-rails, scope

我正在尝试创建一个有点不同寻常的范围。我有一个处理网站的应用程序。有一个名为“sites”的模型，它有_many 个页面。站点模型有一个称为主页的列。每个站点的页面列表包含主页和附加页面（关于、定价等）。

我想为页面模型创建两个范围。一个标识主页，另一个标识所有附加页面。我在想这样的事情。

```
my_homepage =  Site.find_by_id(self.site_id).homepage
scope :homepage, where(url: my_homepage) 
scope :additional_pages, where(url != my_homepage) 
```

不幸的是，这些都不起作用。事实上，当我尝试在控制台中与它们一起玩时，我做不到。我得到这个错误。

```
(Object doesn't support #inspect) 
```

有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:13:50.517

尝试这个 ：

```
scope :homepage, joins(:sites).where("sites.homepage = pages.url") 
scope :additional_pages, joins(:sites).where("sites.homepage <> pages.url") 
```

# windows-8 - Windows 8 Metro 是否支持托管 c++/cli

> ID：11693315
> 
> 赞同：4
> 
> 时间：2012-07-27T18:08:48.370
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012, managed-c++, c++-cx

我似乎在任何地方都找不到这个问题的答案，但是 Metro 会支持托管 C++ 吗？现在在 Visual Studios 2012 RC 中它没有（仅在 Metro 中）。

我有一些用 c++/cli 编写的框架，想将它们移植到 Metro。我知道 c++/cx 是相似的，但是我的 c++/cli 对象派生自用 C# 编写的对象，并且必须重写我系统的那部分会很糟糕（但如果我这样做，我只需要知道从这里去哪里）。

如果有计划在 Windows 8 真正推出时支持它，我可以等待。或者，如果不是，我现在想知道，这样我就可以着手进行移植了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:09:09.440

Metro 不支持 C++/CLI，您可以在此处看到：[Windows Metro 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/7e117a9a-3e86-46f8-b53f-2163418479f2)

# html - 如何用简单的 XSLT 剪切和替换 xml 数据？

> ID：11693318
> 
> 赞同：1
> 
> 时间：2012-07-27T18:09:09.650
> 
> 标签：html, xml, xslt

我在编写简单的 XSLT 转换时遇到了麻烦。这是 XML 数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
<lst name="responseHeader">
  <lst name="params">
  </lst>
</lst>
<result name="response" numFound="2" start="0">
  <doc>
    <str name="Race">Elf</str>
    <int name="TraderKey">128</int>
    <str name="TraderName">TraderLato</str>
    <int name="CharacterName">Maleysh</int>
  </doc>
  <doc>
    <str name="Race">Human</str>
    <int name="TraderKey">62</int>
    <str name="TraderName">TraderSam</str>
    <int name="Comments">Farl</int>
  </doc>
</result>
</response> 
```

我不能修改进来的XML的格式，而且会有很多很多的节点。我需要能够编写一个 XSLT 1.0 转换，它将复制所有原始 XML，但将 TraderName 替换为某些 TraderKey 值。在任何包含 TraderKey 为 128 的节点上，将 TraderName 更改为“Trader Lato Carum”。任何包含 62 的 TraderKey，将 TraderName 更改为“Trader Samson Vero”。我以前从未编写过 XSLT，并且对 XML 的经验有限，所以这是我编写 XSLT 转换的尝试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="response/result/doc/int[@name='TraderKey'][. = '128']>
   <xsl:value-of select="../TraderName"/>
   <xsl:text>Trader Lato Carum</xsl:text>
  </xsl:template>

  <xsl:template match="response/result/doc/int[@name='TraderKey'][. = '62']>
   <xsl:value-of select="../TraderName"/>
   <xsl:text>Trader Samson Vero</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

它根本不起作用，过去一个小时我一直在用头敲墙。我不认为这应该是一个难题，我做错了什么？

谢谢变焦比尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:21:11.377

您的身份/复制模式是正确的，您只需要一些条件输出。

在[这个 XMLPlayground](http://www.xmlplayground.com/ob67cg)演示（见输出*源*）

```
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select='@*' />
        <xsl:apply-templates select='*' />
        <xsl:choose>
            <xsl:when test='@name = "TraderName" and preceding-sibling::*[@name = "TraderKey"] = 62'>
                Trader Samson Vero
            </xsl:when>
            <xsl:when test='@name = "TraderName" and preceding-sibling::*[@name = "TraderKey"] = 128'>
                Trader Lato Carum
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select='text()' />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:35:46.443

**解决方案可以很简单，采用纯推送风格（没有显式`xsl:apply-templates`），不使用任何 XSLT 条件指令（例如`xsl:choose`, `xsl:when`, `xsl:otherwise`）——因此更短、更易读和更易于理解**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "*[int[@name='TraderKey'] = 128]
          /str[@name='TraderName']
            /text()">
  <xsl:text>Trader Lato Carum</xsl:text>
 </xsl:template>

 <xsl:template match=
  "*[int[@name='TraderKey'] = 62]
          /str[@name='TraderName']
            /text()">
  <xsl:text>Trader Samson Vero</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<response>
    <lst name="responseHeader">
        <lst name="params"></lst></lst>
    <result name="response" numFound="2" start="0">
        <doc>
            <str name="Race">Elf</str>
            <int name="TraderKey">128</int>
            <str name="TraderName">TraderLato</str>
            <int name="CharacterName">Maleysh</int>
        </doc>
        <doc>
            <str name="Race">Human</str>
            <int name="TraderKey">62</int>
            <str name="TraderName">TraderSam</str>
            <int name="Comments">Farl</int>
        </doc>
    </result>
</response> 
```

**产生了想要的正确结果**：

```
<response>
   <lst name="responseHeader">
      <lst name="params"/>
   </lst>
   <result name="response" numFound="2" start="0">
      <doc>
         <str name="Race">Elf</str>
         <int name="TraderKey">128</int>
         <str name="TraderName">Trader Lato Carum</str>
         <int name="CharacterName">Maleysh</int>
      </doc>
      <doc>
         <str name="Race">Human</str>
         <int name="TraderKey">62</int>
         <str name="TraderName">Trader Samson Vero</str>
         <int name="Comments">Farl</int>
      </doc>
   </result>
</response> 
```

# jquery - 点击逻辑——使用 jQuery 交换图标

> ID：11693319
> 
> 赞同：0
> 
> 时间：2012-07-27T18:09:13.487
> 
> 标签：jquery

我有两个按钮可以显示/隐藏下面的区域。默认情况下，两个按钮都有以下图标：“ui-icon-triangle-1-e

单击按钮时，我想将单击按钮的图标更改为：“ui-icon-triangle-1-s，并在下面显示适当的部分，同时隐藏另一个（如果它是打开的）。

当我展开一个部分然后单击另一个按钮时，我似乎无法获得正确的逻辑。区域正确交换，但按钮图标未更新...

需要更多的眼睛来看看并告诉我我错过了什么。

```
$(".features").bind("click", function () {
    var that = this,
        pid  = $(this).attr("id"),
        pidC = pid + "C",
        index = $(this).closest("td").index();

    $(".features").find("span").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");
    $(that).find("span").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");

    // indicator OFF for all
    $(".ui-icon-triangle-1-s").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");
    $("#prT").find("td").removeClass("txtCCC");

    $.each($("#prT").find("tr").children(), function () {
        if ($(that).index() != index) {
            $(that).addClass("txtCCC");
        }
    });

    if ($(".fList").hasClass("current")) {
        $(".fList:visible").slideUp().removeClass("current");

        if ($(".fList:visible").attr("id") != pidC) {
            $("#" + pidC).slideDown(function(){
            }).addClass("current"); 
        }           
    } else {        
        $("#" + pidC).slideDown(function(){
            $(".ui-icon-triangle-1-e", that).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");
        }).addClass("current");

    }
}); 
```

# gcc - 静态链接 GLIBC 和专有软件许可

> ID：11693320
> 
> 赞同：3
> 
> 时间：2012-07-27T18:09:15.500
> 
> 标签：gcc, cross-compiling, glibc, lgpl

我对开源和许可证有基本的理解问题。有人可以澄清以下情况的一些问题。对不起，如果它是非常基本的

1.  我正在编写一个专有软件，我计划在其中使用一些开源库。我还需要 glibc 和 C 编译器，但不想在我的操作系统中使用默认的 gcc 工具链，所以使用 crosstools-ng 构建了我自己的

2.  现在在 ct-ng 中，我猜 libstdc++ 库是静态链接的（这是用于 c++ 的，我猜在大多数情况下我不会使用它）但是从我的工具链配置来看，我的 libc 是静态链接还是动态链接？如果是这种情况，鉴于 glibc 是 LGPL，并且我可以将它链接到我的专有软件，这种静态链接是否会对我的许可造成任何问题？我的软件仍然可以是封闭源代码吗？还是我必须释放编译的对象。

我的工具链配置如下，如果 glibc 是静态链接或动态链接，有人可以指向我吗？

```
Target: x86_64-some-linux-gnu
Configured with: /home/balravin/tools/platform/x86/src/gnu/gcc/4.4.7/.build/src/gcc-4.4.7/configure --build=i686-build_pc-linux-gnu --host=i686-build_pc-linux-gnu --target=x86_64-some-linux-gnu --prefix=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.4.7/x86_64-some-linux-gnu --with-sysroot=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.4.7/x86_64-some-linux-gnu/x86_64-some-linux-gnu/sysroot --enable-languages=c,c++,fortran --with-pkgversion='crosstool-NG 1.15.3' --disable-sjlj-exceptions --enable-__cxa_atexit --enable-libmudflap --enable-libgomp --enable-libssp --with-gmp=/home/balravin/tools/platform/x86/src/gnu/gcc/4.4.7/.build/x86_64-some-linux-gnu/buildtools --with-mpfr=/home/balravin/tools/platform/x86/src/gnu/gcc/4.4.7/.build/x86_64-some-linux-gnu/buildtools --with-ppl=/home/balravin/tools/platform/x86/src/gnu/gcc/4.4.7/.build/x86_64-some-linux-gnu/buildtools --with-cloog=/home/balravin/tools/platform/x86/src/gnu/gcc/4.4.7/.build/x86_64-some-linux-gnu/buildtools --with-host-libstdcxx='-static-libgcc -Wl,-Bstatic,-lstdc++,-Bdynamic -lm' --enable-threads=posix --enable-target-optspace --with-long-double-128 --disable-multilib --with-local-prefix=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.4.7/x86_64-some-linux-gnu/x86_64-some-linux-gnu/sysroot --enable-c99 --enable-long-long
Thread model: posix
gcc version 4.4.7 (crosstool-NG 1.15.3) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T18:16:43.050

`libc.so`进行动态链接的原因有很多，既有法律上的，也有技术上的。

在法律方面，GNU libc 的[LGPL](http://www.gnu.org/licenses/lgpl.html)许可证要求您允许您的用户增强他们的 libc；因此，如果您销售静态链接的专有软件（技术上是个坏主意），您需要为您的用户提供将其重新链接到更好版本的 libc 的方法；具体来说，您可能还需要提供`*.o`软件的对象。

在技​​术方面，`libc.so`所有间接利用`libdl.so`或`ld.so`使用动态链接的特性几乎都需要动态链接，特别是与 NSS 相关的功能（如`getpwent`和`getaddrinfo`许多其他功能，请参阅[nsswitch.conf(5)](http://man7.org/linux/man-pages/man5/nsswitch.conf.5.html)和[nss(5 ）](http://man7.org/linux/man-pages/man5/nss.5.html)）。此外，动态链接 libc 效率更高（RAM 几乎由所有使用`libc.so`的进程共享，并且可执行文件大小更小；最重要的是，升级`libc.so`更容易）。

顺便说一句，您的公司是否考虑过让您的 Linux 软件免费（如语音）？它确实有很多优势，很多公司都在选择开源路线。

# c# - 使用泛型将对象转换为结构

> ID：11693330
> 
> 赞同：3
> 
> 时间：2012-07-27T18:09:57.137
> 
> 标签：c#, generics, struct

我正在寻找一种将对象转换为几种不同类型的结构之一的方法。我需要结构，因为我需要它不可为空。我不知道该怎么做，但这是我迄今为止尝试过的，但它不起作用，因为：“对象必须实现 IConvertible。” <- 尝试 Convert.ChangeType

```
public class Something
{
    private object[] things;

    public Something()
    {
        //I don't know at compile time if this will
        //be an array of ThingA's or ThingB's
        things = new object[1];

        things[0] = new ThingA();
        ThingA[] thingsArrayA = GetArrayofThings<ThingA>();

        things[0] = new ThingB();
        ThingB[] thingsArrayB = GetArrayofThings<ThingB>();
    }

    public TData[] GetArrayofThings<TData>() where TData : struct
    {
        return (TData[])Convert.ChangeType(things, typeof(TData[]));
    }
}

[Serializable]
public struct ThingA
{
    //...
}

[Serializable]
public struct ThingB
{
    //...
} 
```

由于 Serg 的回答，这是有效的实现：

```
 public TData[] GetArrayofThings<TData>() where TData: struct
    {
        return things.OfType<TData>().ToArray<TData>();
    } 
```

我仍然对 .ToArray() 的任何处罚感到好奇，因为这是将发送到流对象的数据，并且可能有很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:36:59.757

`ChangeType`方法签名公开了两个参数，第一个：`value`必须是实现 IConvertible 接口的对象。在您的示例`things`中是一个`object`数组并且没有实现该接口。您应该以不同的方式设计您的 GetArrayOfThings 方法，如下所示：

> 公共 TData[] GetArrayofThings() 其中 TObject:IConvertible, TData: 结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:42:56.717

在我看来，几个 LINQ 查询就足够了。

```
//getting only ThingA from mixed array
IEnumerable<ThingA> thingsA = things.OfType<ThingsA>()
//we know type of thins inside array, so we just need type conversion
IEnumerable<ThingB> thingsB = things.Cast<ThingB>() 
```

不要使用`Convert`，它用于真正的*转换*（例如，`string`to `int`），而您拥有的是*类型转换*。

# google-bigquery - Google Bigquery 创建没有代码的表？句法

> ID：11693331
> 
> 赞同：1
> 
> 时间：2012-07-27T18:09:58.287
> 
> 标签：google-bigquery

我希望在 Google BigQuery 中使用基本的 SQL Create Table 语法来创建基于 BQ 中已有的 2 个表中的列的表。[Google SQL 方言参考](https://developers.google.com/bigquery/docs/query-reference)不显示 CREATE 。所有文档似乎都暗示我需要知道如何编码。

是否有任何语法或方法来做

```
CREATE TABLE XYZ AS 
    SELECT ABC.123, DFG.234 
    from ABC, DFG 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:31:31.560

您不能完全通过 SQL 语句来完成。

但是，UI 确实允许您将结果保存到表中（压缩后的最大结果大小为 64MB。API 和命令行客户端具有相同的功能。

# jquery - 使用 :onkeyup=> 为 f.text_field 使用 jQuery

> ID：11693333
> 
> 赞同：1
> 
> 时间：2012-07-27T18:10:12.967
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有以下代码的一部分：

```
<%= form_for :subString_typed, :controller => "deployment_group", :remote=> true, :method => "get", :url => {:action => "show_workflow_list"}, :html => {:id => "subString_form"} do |f| %>
    <%= f.label :Substring %> <%= f.text_field :subString, :onkeyup => "show_alert()" %>
<%end%> 
```

在下面以相同的形式，我写了这样的javascript函数`show_alert()`：

```
<script type="text/javascript">   
function show_alert()
{
    $('#subString_typed_subString').change(function(){$('#subString_form').submit();});
}
</script> 
```

当我在子字符串文本字段中输入一个字母时，上面的代码会提交子字符串表单吗？它对我不起作用。我的 jQuery 代码错了吗？我的 id 在 jQuery 代码中是正确的，但是我认为我`.change()`在文本字段中使用了错误的函数。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:37:48.137

您是否希望在键入时提交表单？为什么不直接调用 $('#subString_form').submit() 而不使用 change() 函数

# c++ - 为什么 C++ 有一个额外的类名声明？

> ID：11693338
> 
> 赞同：0
> 
> 时间：2012-07-27T18:10:22.577
> 
> 标签：c++

为什么我们必须`C++`像这样声明一个类名：

```
class MDT_DECL Transfer{
    // declaration goes here
}; 
```

? 的原因是`<DIRNAME>_DECL`什么？我看到它在需要编译代码时特别使用`Windows`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:11:26.320

你不必。但是在 Windows 中，您必须明确声明您希望该类导出符号`_declspec(dllexport)`（这可能是该宏扩展的内容）。

# wordpress - wordpress分页，链接出现但点击时无处可去

> ID：11693339
> 
> 赞同：0
> 
> 时间：2012-07-27T18:10:26.840
> 
> 标签：wordpress, pagination

我的问题是，虽然链接确实出现在我放置调用分页的函数的页面底部。

单击时，该页面不执行任何操作。

我在网上发现了无数类似的问题（很多在 SO 上），但是当我尝试实施这些帖子解决方案时，同样的事情也会发生。我尝试的所有不同的分页方法、循环、功能......甚至插件都可以工作，因为它们**出现**在页面上，但是当点击时，URL 会相应地改变，但页面内容不会改变。

因此，作为一个例子，我正在使用我在 SO 上其他人的问题的“已接受答案”中找到的这个循环

```
function pagination($pages = '', $range = 3){ 
    $showitems = ($range * 2)+1;
    global $paged; if(empty($paged)) $paged = 1;
    if($pages == '') {
        global $wp_query; $pages = $wp_query->max_num_pages; if(!$pages)
    { $pages = 1; } 
}

 if(1 != $pages) { echo "<div class='pagination'><span>Page ".$paged." of ".$pages."</span>";
     if($paged > 2 && $paged > $range+1 && $showitems < $pages) {
         echo "<a href='".get_pagenum_link(1)."'>&laquo; First</a>";
     }
     if($paged > 1 && $showitems < $pages) {
         echo "<a href='".get_pagenum_link($paged - 1)."'>&lsaquo; Previous</a>";
     }

     for ($i=1; $i <= $pages; $i++){
          if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems )){
               echo ($paged == $i)? "<span class='current'>".$i."</span>":"<a href='".get_pagenum_link($i)."' class='inactive'>".$i."</a>";
        } 

     }

      if ($paged < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($paged + 1)."'>Next &rsaquo;</a>";
     if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($pages)."'>Last &raquo;</a>";
     echo "</div>n"; }
 } 
```

并将函数调用应用到我的帖子循环底部 endwhile//if 下，这样它就不会在页面上显示的每个帖子中重复，并且再次显示（就像所有其他帖子一样）但页面本身没有什么都不做。

我的问题是，对于这种类型的问题，链接显示出来并且我尝试过的所有类型的不同版本**确实**出现在页面上，但是当点击时，无处可去，我可能会错过什么？

我是否需要在某处启用分页，就像启用小部件的方式一样，或者......或者我的页面是否必须有任何类型的钩子或......就像插入“**“ ETC...**

 **我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:21:27.387

这应该可以解决您的问题。我也使用[kriesi](http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin)分页功能，但您可以使用默认的 wordpress 旧和新功能切换 if (function_exists("pagination"))。

```
// Backup the original property value
$backup_page_total = $wp_query->max_num_pages;
// Copy the custom query property to the $wp_query object
$wp_query->max_num_pages = $loop->max_num_pages;
?>
<!-- now show the paging links -->
<?php if (function_exists("pagination")) {pagination($additional_loop->max_num_pages);} ?>
<?php
// Finally restore the $wp_query property to it's original value
$wp_query->max_num_pages = $backup_page_total;
?> 
```**

# ios - 在 UIWebView 中启用关闭按钮

> ID：11693343
> 
> 赞同：1
> 
> 时间：2012-07-27T18:10:45.797
> 
> 标签：ios, xcode, cocos2d-iphone

我需要在 cocos2D 游戏中显示 webview。我使用了这段代码。但它没有显示关闭按钮，我该如何启用关闭按钮？这是我想要的屏幕：

![在此处输入图像描述](../Images/61b671035bc6ea9a0fe2103b2447464b.png)

使用的代码：

```
CGRect webFrame = [[UIScreen mainScreen] applicationFrame];

UIWebView* myWebView = [[[UIWebView alloc] initWithFrame:webFrame] autorelease];
myWebView.backgroundColor = [UIColor whiteColor];
myWebView.scalesPageToFit = YES;
myWebView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
myWebView.delegate = self;
[self.navController.view addSubview:myWebView];

[myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://biggooseegg.com/moregamesscreen"]]]; 
```

其他一些疑问：我怎样才能得到这个网页视图的圆形边框？

这是我未完成[的示例。](http://www.4shared.com/zip/ixFhVeQZ/webViewSampleCocos2d.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:23:23.487

关闭按钮不是 UIWebView 的一部分，您必须自己添加它。

圆角可以通过在 UIWebView 后面显示圆角背景图像来实现。您可以为此使用 CCSprite。然后使 web 视图适合背景图像。

# visual-studio-2010 - 如何查看数据库是否安装

> ID：11693347
> 
> 赞同：0
> 
> 时间：2012-07-27T18:10:51.273
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010 Premium，我只是想知道是否有办法查看数据库 SQL Server 2008 Express 是否已安装？我在某处读到，如果您安装了 Visual Studio 的专业版！？

简单的问题，但只是想在我下载和安装数据库之前检查一下。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:38:36.823

要检查是否安装了 SQL Server，您可以检查此注册表项是否存在：HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Microsoft SQL Server

对于版本，我不确定，因为我没有安装不同版本的 SQL Server。在我的电脑上，注册表路径 HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Microsoft SQL Server\80\Tools\Client Setup\Current Version 存在。在此键中，您可以读取字符串“CurrentVersion”。就我而言，它是 8.00.194。

此致，

或者你可以使用的替代品

[验证 Sql 实例的备用资源](http://learningsqlserver.wordpress.com/2011/01/21/what-version-of-sql-server-do-i-have/)

# command-line-arguments - 如何在 InstallShield 生成的快捷方式中编辑命令行参数？

> ID：11693352
> 
> 赞同：1
> 
> 时间：2012-07-27T18:11:31.970
> 
> 标签：command-line-arguments, shortcuts, installshield-le

有时，当安装程序安装程序并创建快捷方式时，由于某种原因它们不是“正常”快捷方式。他们将目标文本框和打开文件位置按钮显示为灰色，如下所示：

![](../Images/a165d6eb3d51b5d69b9f910285308d7a.png)

我正在为 Visual Studio 2010 使用 InstallShield 2011 LE（限量版）。它像宣传的那样工作，但我没有看到任何选项来更改它创建快捷方式的方式。我正在安装的程序将极大地受益于向该目标文本框添加命令行参数。如果我在 Program Files 中找到可执行文件，然后发送到 -> 桌面（创建快捷方式），我（和我的用户）可以修改那个，没问题。不过，我不想让他们经历这一步。

安装程序放置的快捷方式与“普通”快捷方式有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:37:06.370

在 InstallShield 中，将 Advertise 属性设置为“no”。

# json - json.loads 函数没有收到正确的 JSON - 例外：期望属性名称：第 1 行第 1 列（字符 1）

> ID：11693356
> 
> 赞同：0
> 
> 时间：2012-07-27T18:11:41.280
> 
> 标签：json, exception, curl

我在 Windows 7 上，我的 curl 表达式如下：

curl --header "X-CSRFToken: csrftoken" -X POST -H "Content-type:application/json" -d "{"username":"Steven"}"

但是抛出异常

```
simplejson.loads(request.body) 
```

大概是因为 json.loads 函数没有接收到正确的 JSON。

它显示：捕获异常：期望属性名称：第 1 行第 1 列（字符 1）

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:34:37.377

Similar question: [link](https://stackoverflow.com/questions/4033633/handling-lazy-json-in-python-expecting-property-name)

Try this: `"{"username":"Steven"}"` change to `'{"username":"Steven"}'`

# ruby-on-rails - 声明要在 Ruby On Rails 视图中使用的数组变量

> ID：11693359
> 
> 赞同：0
> 
> 时间：2012-07-27T18:11:57.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在使用 Ruby 1.9.3 和 Rails 3.2.6。我想创建一个用户可以邀请朋友注册的页面。该页面将包含许多字段，用户可以在其中输入电子邮件地址。我希望这些存储在一个数组中。基本上，页面上的每个字段都是数组中的一个元素。我希望遍历数组元素，验证输入的每个电子邮件地址，更新我表上的临时电子邮件字段，然后启动 ActionMailer 以发送邀请电子邮件。

我希望每次用户进入邀请页面时都初始化这个数组。根据我在**Programming Ruby 1.9**一书中读到的内容，我应该能够在某处声明这样的数组。

```
friend_email = Array.new 
```

当我验证在我的视图中输入的数据时，我需要足够长的可用变量才能在我的控制器中访问它。根据我对变量的有限理解，它们通常在它们被声明或初始化的地方之外不可用。这使得尝试将输入的信息发送到邮件程序时变得有趣。我在模型上使用了临时字段来简化事情。

如果有更好的方法可以做到这一点，我将不胜感激。我也会继续研究。我只看到下面列出的一个，其中一个数组由现有表填充，然后显示在视图中。我想从视图中填充数组。

[在 ruby​​ on rails 的视图中渲染数组](https://stackoverflow.com/questions/9014923/render-an-array-in-a-view-in-ruby-on-rails)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:55:05.663

如果您只想显示/处理电子邮件地址列表，我根本看不出您的 Active Record (AR) 模型是如何参与的。如果他们不需要在 dbms 中并且不涉及 AR 模型，则不要涉及 AR 模型。

要回答您的问题的标题：“声明要在 Ruby On Rails 视图中使用的数组变量”-

A：将数组声明为控制器中的实例变量。（实例变量以@开头）控制器中声明的所有实例变量在视图中自动可用。

```
def show_emails
  @emails = []
return  # the view "show_emails" will be used

def process_emails
  @emails = params['emails'] || []

  ...
     # check the emails. If there's a bad one, you can 
     #   re-render the show_emails view with an error msg
     # or send out the emails and then show a confirmation page
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:20:05.013

好吧，我相信解决这个问题的一个好方法可能是使用一个`text_field`用户输入的电子邮件，用逗号/冒号/分号/其他分隔，当提交时，控制器将使用该`split`方法和一些分隔这些电子邮件正则表达式，然后验证其中的每一个。如果验证通过，您手头上有一系列电子邮件。
我不认为你真的需要一个数组来做到这一点。

# ruby-on-rails - mysql2 gem 无法构建原生扩展

> ID：11693360
> 
> 赞同：7
> 
> 时间：2012-07-27T18:11:58.663
> 
> 标签：ruby-on-rails, macos, gem, mysql2

我们实习生的计算机在安装 mysql2 gem 时出现问题。我们刚刚将他的电脑从 OS X 10.6 升级到 10.8（Mountain Lion）。我尝试通过自制软件和 64 位 DMG 安装程序安装 mysql。我还尝试符号链接到开发工具（如此处指出：[山狮升级后无法安装一些宝石](https://stackoverflow.com/questions/11682429/not-able-to-install-some-gems-after-mountain-lion-upgrade)）。我们安装了 Xcode (4.4) 和命令行工具。我们在安装命令行工具后尝试重新启动。

这是他的 PATH 声明`~/.bashrc`：

```
PATH=/usr/local/bin:$PATH:$HOME/.rvm/bin:/usr/local/mysql/bin # Add RVM to PATH for scripting 
```

符号链接：

```
Diego-Blantons-MacBook-Pro-3:~ lmrunner07$ sudo ln -s /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2
Password: 
```

尝试安装gem：

```
Diego-Blantons-MacBook-Pro-3:~ lmrunner07$ gem install mysql2
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
    ERROR: Failed to build gem native extension.

        /Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql.h... yes
checking for errmsg.h... yes
checking for mysqld_error.h... yes
creating Makefile

make
compiling client.c
In file included from /Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby.h:32,
                 from ./mysql2_ext.h:8,
                 from client.c:1:
/Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:105: error: size of array ‘ruby_check_sizeof_long’ is negative
/Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:109: error: size of array ‘ruby_check_sizeof_voidp’ is negative
In file included from /Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:34,
                 from /Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:1382,
                 from /Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby.h:32,
                 from ./mysql2_ext.h:8,
                 from client.c:1:
/Users/lmrunner07/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/st.h:67: error: size of array ‘st_check_for_sizeof_st_index_t’ is negative
client.c: In function ‘rb_raise_mysql2_error’:
client.c:98: warning: ISO C90 forbids mixed declarations and code
client.c: In function ‘rb_mysql_client_socket’:
client.c:590: warning: ISO C90 forbids mixed declarations and code
make: *** [client.o] Error 1

Gem files will remain installed in /Users/lmrunner07/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11 for inspection.
Results logged to /Users/lmrunner07/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/ext/mysql2/gem_make.out 
```

我已经删除了自制安装的 mysql 以及启动代理。还有`rm -rf`gem 目录 (Users/lmrunner07/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T04:30:52.573

我通过以下方式解决了这个问题：

1.  安装自制软件`ruby <(curl -fsSk https://raw.github.com/mxcl/homebrew/go)` （查看他们的网站以了解使用[链接](https://brew.sh/)）
2.  按照这些说明[http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion](http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion)
3.  用 homebrew 重新安装 mysql `brew install mysql`。（我尝试按照这些说明安装mysql [http://erictarn.com/post/28269453881/how-i-installed-mysql-rvm-ruby-and-rails-on-mountain](http://erictarn.com/post/28269453881/how-i-installed-mysql-rvm-ruby-and-rails-on-mountain)但我后来遇到了问题所以我会推荐用自制软件重新安装mysql。）
4.  为我的项目（包括 mysql2）重新安装 rvm 和 rails 以及 gems

注意：当我尝试构建时，我遇到了一个库问题，`Library not loaded: libmysqlclient.18.dylib`该问题已通过运行修复`sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib`（请参阅[Library not loaded: libmysqlclient.16.dylib error when trying to run 'rails server' on OS X 10.6 with mysql2 gem](https://stackoverflow.com/questions/4546698/library-not-loaded-libmysqlclient-16-dylib-error-when-trying-to-run-rails-serv) if you get同样的问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:29:06.667

你有没有尝试过：

```
gem install mysql2 --with-mysql-config=/usr/lib64/mysql/mysql_config 
```

将 替换`/usr/lib64/mysql/mysql_config`为您的 mysql 配置的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:18:22.857

不幸的是，安装过程是非常分段的，如果不查看整体步骤，很难找出您的问题可能是什么。

在不了解您的安装步骤的情况下，以下是我遵循的一些注释，这些注释使我进入了一个稳定的 Rails Mountain Lion 开发箱（再次道歉，这不是更具体）。

1.  RVM、Ruby 的说明：[moncefbelyamani.com](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

    **注意：**这里肯定有一些步骤是我通过建议采取的，`brew doctor`而且`'rvm requirements'`我从未在以前的设置中采取过。

    **像这样的注释：**

    *   Xcode 4.3+ 仅使用 ruby​​-1.9.3-p125+ （并告诉我是否有编译问题要降级到 Xcode 4.1）
    *   使用`brew install autoconf automake apple-gcc42`
    *   使用`brew tap homebrew/dupes`
    *   和别的...
2.  Rails 特定说明：[railsapps.github.com](http://railsapps.github.com/installing-rails.html)

3.  对于 mysql（跳到安装的 mysql 部分：[coolestguyplanettech.com](http://coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion)

**注意：我做了可选步骤：** ...为了在不输入命令的完整路径的情况下使用 mysql 命令，您需要将 mysql 目录添加到 shell 路径...**因为我发现这样做可以在构建过程中提供帮助等（一些脚本假设...）**

在这里，我尝试简单地创建一个新的 rails 应用程序，默认数据库是 mysql（它通过 bundler 关闭了 mysql2）。从那里开始——我试图用一个快速的脚手架做一个测试应用程序——并且 mysql2 被拒绝了。

从那里我遇到了一个错误“库未加载：libmysqlclient.16.dylib”，并且如此处所述：[stackoverflow awesomeness](https://stackoverflow.com/questions/4546698/library-not-loaded-libmysqlclient-16-dylib-error-when-trying-to-run-rails-serv) 我将此行添加到我的 .profile 中：`export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH`

**MY PATH 明确包括 rails 和 ruby​​：** `/Users/gabriel/.rvm/gems/ruby-1.9.3-p194@rails327/bin:/Users/gabriel/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/gabriel/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/gabriel/.rvm/bin:/usr/local/mysql/bin:/usr/local/bin:/usr/bin:/usr/sbin:/opt/X11/bin:`

希望这些资源能提供一些额外的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T04:16:22.210

我能够通过运行来编译它： PATH=/bin:/usr/bin:/opt/mysql5_64/bin gem install mysql2 where mysql5_64 我下载了最新的 64 位版本的 mysql 并在那里解压。保持我已经安装的 mysql 数据库完好无损。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T18:51:43.080

我可以通过`implode`-ing rvm 并安装 Homebrew 的 ruby​​ 来解决这个问题。然后，mysql2 gem 安装就好了。

这不是我在使用 rvm 时遇到的第一个此类问题。我不认为我会再次使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-16T05:30:10.023

我在 OSX Yosemite 上成功完成了这项工作：

```
sudo port install mysql56
gem install mysql2 -- --with-mysql-config=/opt/local/lib/mysql56/bin/mysql_config 
```

# oracle - Oracle 11g 中的合并错误

> ID：11693366
> 
> 赞同：0
> 
> 时间：2012-07-27T18:12:21.507
> 
> 标签：oracle, oracle11g

我是 Oracle 11g 和这个论坛的新手。我只需要使用 Oracle Merge 语句运行一个简单的更新语句，因为我的 SQL 开发人员不会采取任何其他方式。

奇怪的是，无论我如何尝试更正该声明，即使在阅读了该论坛中的许多条目后，我仍然收到完全相同的错误消息。

有 2 种不同的错误消息，取决于我在 SQL Developer 中运行语句的方式。如果我将我的语句作为存储过程运行（更新语句是存储过程中的一小部分。我注释掉了其他 SQL 语句，只是将这个更新语句留在了存储过程中）我得到了这个错误：

## 我跑了这个：

```
create or replace
PROCEDURE ADDR_UPDATE_2
AS
/*     other sql statements are commented out    */  

MERGE INTO (SELECT id,xseq,line_1,line_2,zip,tax FROM ADDR ) b
USING (SELECT id,xseq,line_1, line_2,NVL(zip, '') AS pos_10 , NVL(tax, '') AS pos_11
     FROM TEMP_ADDR ) v
ON(b.id = v.id
  AND b.xseq = v.xseq)  
WHEN MATCHED THEN UPDATE SET b.line_1 = v.line_1,
                          b.line_2 = v.line_2,                            
                          b.zip = v.pos_10,
                          b.tax = v.pos_11
                          WHERE b.line_1 <> v.line_1  
                          OR b.line_2 <> v.line_2
                          OR b.zip <> v.pos_10; 

/*     other sql statements are commented out   */

END; 
```

## 我得到了这个错误：

错误（23,9）：PLS-00103：在预期以下情况之一时遇到符号“INTO”：常量异常表 long double ref char 时间时间戳间隔日期二进制国家字符 nchar

（我到处看，没有找到任何答案）

第 23 行指的是“INTO”这个词

*   但是，如果我自己运行上面的 Merge 语句，而不是作为 str 的一部分。proc.，我没有收到任何错误。我得到了一个结果：0 行合并。

## 现在我将 Merge 语句修改为：

```
create or replace
PROCEDURE ADDR_UPDATE_2
AS

/*  other sql statements are commented out  */  

MERGE INTO ADDR b
USING (SELECT id,xseq, line_1, line_2, NVL(zip, '') AS pos_10, 
            NVL(tax, '') AS pos_11 
     FROM TEMP_ADDR) v
 ON(b.id = v.id
    AND b.xseq = v.xseq
    AND b.line_1 <> v.line_1  
    OR b.line_2 <> v.line_2 
    OR  b.zip <> v.pos_10)  
 WHEN MATCHED THEN UPDATE SET b.line_1 = v.line_1,
                          b.line_2 = v.line_2,
                          b.zip = v.pos_10,
                          b.tax = v.pos_11;

 /*
   other sql statements are commented out
 */

END; 
```

## 我得到了同样的错误：

错误（23,9）：PLS-00103：在预期以下情况之一时遇到符号“INTO”：常量异常表 long double ref char 时间时间戳间隔日期二进制国家字符 nchar

第 23 行指的是“INTO”这个词

## 当我运行该语句时，该语句不是 str 的一部分。过程：

## 我得到了一个不同的错误：

命令行错误：9 列：8
错误报告：SQL 错误：ORA-38104：无法更新 ON 子句中引用的列：“B”。“LINE_2”38104。00000 -“无法更新 ON 子句中引用的列: %s" *原因：UPDATE SET 的 LHS 包含 ON 子句中引用的列 *操作：

我从两天前开始尝试寻找答案，但没有结果，有没有人可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:57:37.743

正如我在上面提到的问题中所解释的那样，“不能更新 ON 子句中引用的列”意味着如果 MATCHED 子句中的列包含在 ON 标准中，我们将无法更新它们。

你处于这个位置是因为你试图使用 MERGE 来做一些它不打算做的事情。现在你说

> “我只需要使用 Oracle Merge 语句运行一个简单的更新语句，因为我的 SQL 开发人员不会采取任何其他方式。”

福特。*只要语法正确，* SQL Developer 绝对不会阻止您运行更新语句。不幸的是，Oracle 不支持 DML 语句中的 ANSI 连接语法（与其他 RDBMS 不同），并且 Oracle 语法不直观：

```
update
(
   select v.id
          , v.xseq
          , v.line_1
          , v.line_2
          , nvl(v.zip, '') AS pos_10
          , nvl(v.tax, '') AS pos_11
   from   addr b
         ,temp_addr v
   where  ( b.id = v.id
            and b.xseq = v.xseq )
      and ( b.line_1 <> v.line_1  
            or  b.line_2 <> v.line_2 
            or  b.zip <> v.pos_10)
     )
set b.line_1 = v.line_1,
    b.line_2 = v.line_2,
    b.zip = v.pos_10,
    b.tax = v.pos_11
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T16:53:41.927

以下 MERGE 语句至少应该正确编译和执行，尽管我同意@APC 的正确做法是使用 UPDATE （因为这是你真正想要做的）：

```
MERGE INTO ADDR b
USING TEMP_ADDR v
  ON (b.id = v.id AND
      b.xseq = v.xseq)  
WHEN MATCHED THEN
  UPDATE
    SET b.line_1 = v.line_1,
        b.line_2 = v.line_2,                            
        b.zip = v.zip,
        b.tax = v.tax; 
```

我消除了`NVL`您正在执行的操作，因为在 Oracle 中，零长度字符串（例如`''`）与 NULL 相同，因此 NVL 调用相当于说“如果此字段不是 NULL，则返回它 - 否则返回 NULL”，这是排序毫无意义的。

祝你好运。

# c# - 如何确保只有我的程序可以访问命名管道？

> ID：11693367
> 
> 赞同：5
> 
> 时间：2012-07-27T18:12:33.970
> 
> 标签：c#, .net, security, named-pipes, inter-process-communicat

我计划将我的程序分成 2 个进程：第一个是 GUI，第二个是使用管理员帐户运行的后台进程。两者应该相互交流。

我正在考虑为此使用命名管道，但有一件事情困扰着我：

有没有办法确保只有我的程序才能访问命名管道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:30:45.500

[创建命名管道时，您通常可以使用安全描述符](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379563%28v=vs.85%29.aspx)（在两侧）保护对它的访问。但是，安全描述符是针对*用户*的，而不是针对应用程序的（出于充分的理由，从安全的角度来看，您希望保护*用户，而不是应用程序*）。

也就是说，您可以创建一个用户，您的客户端和服务器在其下运行，只要您保持*该*帐户的安全，就可以了（您可以使用该用户的安全描述符保护管道）。

因此，如果您的程序是*唯一*使用该用户身份的程序，那么从技术上讲，是的，管道只能由您的程序使用。但是，您必须管理帐户的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:17:58.340

如果您只需要支持 Windows Vista 或更高版本，则可以调用 Windows API 在建立连接后找出管道另一端进程的 ProcessId 和/或 SessionID（例如 GetNamedPipeClientProcessId 和系列） . 您可以使用这些来实现显式检查，以确保只有您想通过管道进行通信的应用程序才能这样做。

# c# - C# 构造函数链接

> ID：11693375
> 
> 赞同：1
> 
> 时间：2012-07-27T18:12:55.997
> 
> 标签：c#, constructor

给定下面的两个类，我想用 int 参数调用 Child 构造函数，然后用 int 参数调用父构造函数，最后调用 Child 无参数构造函数。

这可以在不使用可选参数的情况下完成吗？

```
public class Parent
{
    public Parent()
    {
        Console.WriteLine("Parent ctor()");
    }

    public Parent(int i)
    {
        Console.WriteLine("Parent ctor(int)");
    }
}

public class Child:Parent
{
    public Child()
    {
        Console.WriteLine("Child ctor()");
    }

    public Child(int i)
    {
        Console.WriteLine("Child ctor(int)");
    }
} 
```

这是我们希望在 .NET 2.0 中完成的 .NET 4 中的逻辑

```
public class Parent2
{
    public Parent2(int? i = null)
    {
        Console.WriteLine("Parent2 ctor()");

        if (i != null)
        {
            Console.WriteLine("Parent2 ctor(int)");

        }
    }
}

public class Child2 : Parent2
{
    public Child2(int? i = null)
        : base(i)
    {
        Console.WriteLine("Child2 ctor()");

        if (i != null)
        {
            Console.WriteLine("Child2 ctor(int)");
        }
    }
} 
```

这是我们正在讨论的生产代码

```
public class DataPoint<T>
{
    public DataPoint() { }

    public DataPoint(T xValue, int yValue)
    {
        XAxis = xValue;
        YAxis = yValue;
    }

    public T XAxis { get; set; }
    public int YAxis { get; set; }
}

public class DataPointCollection<T> : DataPoint<T>
{
    DataPointCollection()
    {
        Labels = new List<string>();
    }

    DataPointCollection(T xValue, int yValue)
        : base(xValue, yValue)
    { }

    public List<string> Labels { get; set; }
} 
```

**编辑：**

在这一点上，问题的原因是“代码高尔夫”学术练习，以最少的代码遵循 DRY 方法。正常模式是在类中使用内部私有函数，该函数具有要从每个构造函数执行的公共代码。

**编辑 2**

我添加了示例生产代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:15:01.080

不，你不能这样做，因为你不能`Child`从`Parent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:28:35.647

如果您需要一系列初始化方法，我建议您将它们定义为普通（不是构造函数）方法。您可以使用可覆盖的受保护方法来设置来回，因为构造函数可以选择以任意组合或顺序调用哪些初始化方法：

```
public class Parent {

    public Parent() { }

    public Parent(int i) {
        initWithArg(i);
        initNoArgs();
    }

    virtual protected void initWithArg(int i) {
        Console.WriteLine("Parent initWithArg(int)");
    }

    virtual protected void initNoArgs() {
        Console.WriteLine("Parent initNoArgs");
    }
}

public class Child : Parent {

    // Override the *parameterless* constructor
    public Child(int i) : base() {
        initWithArg(i);
        base.initWithArg(i);
        initNoArgs();
    }

    override protected void initWithArg(int i) {
        Console.WriteLine("Child initWithArg(int)");
    }

    override protected void initNoArgs() {
        Console.WriteLine("Child initNoArgs");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:15:35.980

[继承](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.80%29.aspx)仅作为一种方式起作用。

`Child`--->`Parent`

你可能有一个结构错误，因为（如果我错了，有人纠正我）没有场景你**必须同时**调用同一类的两个构造函数。

除了递归构造函数，因为它调用自己，所以它不是一回事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:19:43.133

`Child(int i)`您可以通过像这样定义构造函数来完成问题的第一部分：

```
public Child(int i) : base(i)
{
    Console.WriteLine("Child ctor(int)");
} 
```

但是，如前所述，您不能随后调用另一个`Child`' 构造函数。如果您的*实际*目标（假设这不是一个纯粹的学术问题）是确保`Child`始终执行包含在 ' 的默认构造函数中的某些标准行为，则最好将其封装在一个方法中并从`Child`' 的每个构造函数中调用它：

```
public class Child:Parent
{
    public Child()
    {
        Console.WriteLine("Child ctor()");
        CommonChildConstructionBehaviour();
    }

    public Child(int i) : base(i)
    {
        Console.WriteLine("Child ctor(int)");
        CommonChildConstructionBehaviour();
    }

    private void CommonChildConstructionBehaviour()
    {
        Console.WriteLine("All child constructors must call me.");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:40:33.000

有几个选择，但没有一个是完美的。最后，如果可以（显然），我的主要建议是升级到 .NET 4.0。

这是一种选择，使用一个对象，然后将其转换为您需要的任何内容。这是明显的缺点，因为您将丢失打字或破坏签名，但它可能适用于您的情况，我不知道：

```
public class Parent3
{
    public Parent3(object i)
    {
        Console.WriteLine("Parent3 ctor()");

        if (i != null)
        {
            Console.WriteLine("Parent3 ctor(int)");
        }
    }
}

public class Child3 : Parent3
{
    public Child3(object i)
        : base(i)
    {
        Console.WriteLine("Child3 ctor()");

        if (i != null)
        {
            Console.WriteLine("Child3 ctor(int)");
        }
    }
} 
```

这是另一种选择，使用 Init 方法。但是，它们不会以完全相同的顺序触发，但它可能对您有用。

```
 public class Parent
{
    public Parent()
    {
        Init();
    }

    protected void Init()
    {
        Console.WriteLine("Parent ctor()");
    }

    public Parent(int i)
    {
        Init(i);
    }

    protected void Init(int i)
    {
        Console.WriteLine("Parent ctor(int)");
    }
}

public class Child : Parent
{
    public Child()
    {
        Init();
    }

    protected void Init()
    {
        Console.WriteLine("Child ctor()");
    }

    public Child(int i)
    {
        Init(i);
        base.Init(i);
        Init();
    }

    protected void Init(int i)
    {
        Console.WriteLine("Child ctor(int)");
    }

} 
```

**那么这是一种我真的不推荐的方法，但无论如何我都会包括它**：

```
 public class Parent
{
    public Parent()
    {
        Console.WriteLine("Parent ctor()");
    }

    public Parent(int i)
    {
        Console.WriteLine("Parent ctor(int)");
    }
}

public class Child : Parent
{
    private static int _i; //this is likely to blow up at some point.

    public Child() : base(_i)
    {
        Console.WriteLine("Child ctor()");
    }

    public Child(int i) : this()
    {
        _i = i;
        Console.WriteLine("Child ctor(int)");
    }
} 
```

# haskell - haskell 没有 MonadThrow 的实例

> ID：11693379
> 
> 赞同：1
> 
> 时间：2012-07-27T18:13:40.257
> 
> 标签：haskell

完整代码在[https://github.com/gertcuykens/haskell-design](https://github.com/gertcuykens/haskell-design)

```
application :: MVar ServerState -> WS.Request -> WS.WebSockets WS.Hybi10 ()
application state rq = do
    --snip--
    let a = ("code","test")
    e <- fbEmail $ (\(x,y) -> (C.pack x, C.pack y)) a 
```

给我错误

```
src/Server.hs:60:10:
    No instances for (resourcet-0.3.2.2:Control.Monad.Trans.Resource.MonadThrow
                        (WS.WebSockets WS.Hybi10),
                      resourcet-0.3.2.2:Control.Monad.Trans.Resource.MonadUnsafeIO
                        (WS.WebSockets WS.Hybi10),
                      monad-control-0.3.1.3:Control.Monad.Trans.Control.MonadBaseControl
                        IO (WS.WebSockets WS.Hybi10))
      arising from a use of `fbEmail'
    Possible fix:
      add instance declarations for
      (resourcet-0.3.2.2:Control.Monad.Trans.Resource.MonadThrow
         (WS.WebSockets WS.Hybi10),
       resourcet-0.3.2.2:Control.Monad.Trans.Resource.MonadUnsafeIO
         (WS.WebSockets WS.Hybi10),
       monad-control-0.3.1.3:Control.Monad.Trans.Control.MonadBaseControl
         IO (WS.WebSockets WS.Hybi10))
    In the expression: fbEmail
    In a stmt of a 'do' block:
      e <- fbEmail $ (\ (x, y) -> (C.pack x, C.pack y)) a
    In the expression:
      do { WS.acceptRequest rq;
           WS.getVersion >>= liftIO . putStrLn . ("Client version: " ++);
           sink <- WS.getSink;
           msg <- WS.receiveData;
           .... } 
```

我最终想要实现的是替换

```
let prefix = "Facebook code"
let client = (T.drop (T.length prefix) msg, sink) 
```

有类似的东西

```
let prefix = "Facebook code"
let code = T.drop (T.length prefix) msg
client = (fbEmail code, sink) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:42:57.547

```
e <- liftIO $ fbEmail $ (\(x,y) -> (C.pack x, C.pack y)) a 
```

# c# - 从数据库 c# 和 asp.net 收集表名时出错

> ID：11693384
> 
> 赞同：0
> 
> 时间：2012-07-27T18:14:17.227
> 
> 标签：c#, asp.net, sql, sql-server, database

数据库名称是 ONLINEEXAM

我在数据库中有几个表，我想在 asp.net 的 Dropdownlist 中列出一些以字母“set %”开头的表名。

我使用以下代码，但出现错误： **无效的对象名称 ONLINEEXAM.dbo.sysobjects**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack == false)
    {
        paperset();
    }  
}

private void paperset()
{
    try
    {
        string conn = ConfigurationManager.ConnectionStrings["sqlconn"].ConnectionString;
        SqlConnection con = new SqlConnection(conn);
        con.Open();

        SqlCommand cmd = new SqlCommand(
            "select * from ONLINEEXAM.dbo.sysobjects where name like 'Set%'", con);
        SqlDataReader dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            ListItem item = new ListItem();
            item.Value = dr[0].ToString();
            papersetlist.Items.Add(item);
        }

        dr.Close();
        con.Close();
    }
    catch (System.Exception ex) 
    { 
        MessageBox.Show(ex.Message); 
    }
    finally { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:22:14.927

可能是您正在对不同的数据库运行查询，请在 sql server 中运行查询以检查它。也试试这个

```
SqlCommand cmd = new SqlCommand("select * from sys.objects where name like 'Set%'", con); 
```

或使用它来获取所有表格

```
select * from sys.tables where name like 'Set%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:21:43.937

查看以验证用户 ID 是否有权访问该`sysobjects`表。假设您正在运行 SQL2005 或更高版本，您还可以查看`INFORMATION_SCHEMA`架构并查看`TABLES`视图：

```
Select TABLE_CATALOG, TABLE_SCHEMA, TABLE_NAME, TABLE_TYPE 
from [database.]INFORMATION_SCHEMA.TABLES 
```

# php - 插入数据库后 JQUERY 刷新 .val()

> ID：11693386
> 
> 赞同：1
> 
> 时间：2012-07-27T18:14:19.317
> 
> 标签：php, jquery, html, refresh

提交后返回时如何更改注册表中的时间。

```
$("#leaveComment").find("input#time").val("<? echo time(); ?>"); 
```

插入数据库后（插入数据库已配置并在文件资源/lib/add-comment.php 中工作）？

[这是所需jquery的完整代码](http://paste.php.lv/6281064c6d1aa8b1e67ef5e2a03f47ae?lang=javascript)

[这是提交的 PHP 脚本（add-comment.php 文件内容](http://paste.php.lv/ac92cd4a149cd9d31bcdd3f9d49e4d3f?lang=php)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:16:59.523

如果返回结果是`json`：

```
$("#leaveComment").find("input#time").val(data.time); 
```

或在`echo`里面做简单的事情`add-comment.php`：

```
echo time(); 
```

然后 ：

```
$("#leaveComment").find("input#time").val(data); 
```

# c# - 更新现有的自定义属性 word doc

> ID：11693390
> 
> 赞同：1
> 
> 时间：2012-07-27T18:14:31.450
> 
> 标签：c#, ms-word

我正在尝试以编程方式更新 word .doc（word 97 - 2003）上的现有自定义属性。我最初用 Aspose 解决了，但由于许可证有限，我不能将它用于这个项目。

此代码是从这里批发的，对 word 进行了少量修改，而不是 excel 以[编程方式访问 Excel 自定义文档属性](https://stackoverflow.com/questions/1137763/accessing-excel-custom-document-properties-programatically)。

如果自定义属性不存在，第一种方法可以添加自定义属性，第二种方法可以拉取自定义属性。我还没有弄清楚如何更新已经存在的属性。我认为这可能与 InvokeMember() 中的动词有关，但我找不到太多文档。

```
 public void SetDocumentProperty(string propertyName, string propertyValue)
    {
        object oDocCustomProps = oWordDoc.CustomDocumentProperties;
        Type typeDocCustomProps = oDocCustomProps.GetType();

        object[] oArgs = {propertyName,false, 
                             MsoDocProperties.msoPropertyTypeString, 
                             propertyValue};

        typeDocCustomProps.InvokeMember("Add",
                                        BindingFlags.Default | BindingFlags.InvokeMethod,
                                        null,
                                        oDocCustomProps,
                                        oArgs);

    }

    public object GetDocumentProperty(string propertyName, MsoDocProperties type)
    {
        object returnVal = null;

        object oDocCustomProps = oWordDoc.CustomDocumentProperties;
        Type typeDocCustomProps = oDocCustomProps.GetType();

        object returned = typeDocCustomProps.InvokeMember("Item",
                                                           BindingFlags.Default |
                                                           BindingFlags.GetProperty, null,
                                                           oDocCustomProps, new object[] { propertyName });

        Type typeDocAuthorProp = returned.GetType();
        returnVal = typeDocAuthorProp.InvokeMember("Value",
                                                   BindingFlags.Default |
                                                   BindingFlags.GetProperty,
                                                   null, returned,
                                                   new object[] { }).ToString();

        return returnVal;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T15:03:55.620

不知道您是否找到了正确答案，但对于访问此页面并希望设置现有自定义文档属性的任何人。似乎您需要先使用 检索文档属性`BindingFlags.GetProperty`，然后使用`BindingFlags.SetProperty`设置检索到的特定项目的值。

您还可以添加一些自定义检查以确定您尝试设置的对象是否有效。

```
 public void SetDocumentProperty(string propertyName, object value)
    {
        // Get all the custom properties
        object customProperties = wordDocument.CustomDocumentProperties;
        Type customPropertiesType = customProperties.GetType();

        // Retrieve the specific custom property item
        object customPropertyItem = customPropertiesType.InvokeMember("Item",
            BindingFlags.Default | BindingFlags.GetProperty, null, customProperties,
            new object[] { propertyName });
        Type propertyNameType = customPropertyItem.GetType();

        // Set the value of the specific custom property item
        propertyNameType.InvokeMember("Value", BindingFlags.Default | BindingFlags.SetProperty, null,
            customPropertyItem, new object[] { value });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:47:38.673

We normally retrieve all the props to a list and delete from document, change values and insert again. We use DSOFile.dll approach

# apache-flex - 如何使用 Actionscript 创建和下载 zip 文件

> ID：11693391
> 
> 赞同：0
> 
> 时间：2012-07-27T18:14:36.217
> 
> 标签：apache-flex, flash-builder

我正在使用 Adob​​e Flex 4.5 SDK 开发一个应用程序，用户可以在其中导出捆绑在一个 zip 文件中的多个文件。我在想我必须采取以下步骤才能执行此任务：

1.  在服务器上为请求下载的用户创建一个临时文件夹。由于它是匿名类型的用户，我必须读取 Sate/Session 信息来识别用户。

2.  将所有请求的文件复制到服务器上的临时文件夹中

3.  压缩复制的文件

4.  将 zip 文件从服务器下载到客户端计算机

我想知道是否有人知道该任务的任何最佳实践/示例代码
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:37:01.840

该类`ByteArray`有一些压缩方法，但这更多是用于数据传输，而不是用于打包多个文件。

我不喜欢说事情是不可能的，但我会说这应该在服务器端完成。根据您的服务器架构，我建议将二进制文件发送到可以为您打包文件的服务器脚本。

快速 google 搜索您首选的服务器端语言和压缩文件应该会为您提供一些示例脚本以帮助您入门。

# heroku - 使用带有 Heroku 和 CNAME 的电子邮件

> ID：11693394
> 
> 赞同：8
> 
> 时间：2012-07-27T18:14:52.800
> 
> 标签：heroku, cname

我正在 HEROKU 托管应用程序上设置 MX 记录，但遇到了问题。

我有两个 CNAME 的设置：

```
@ myapp.herokuapp.com
www myapp.herokuapp.com 
```

网站可以按照上面的设置正常工作。我现在正在尝试通过添加 Google Apps MX 记录来添加电子邮件支持。

```
@ ASPMX.L.GOOGLE.COM.  MX 10 1800 
```

--以及其他四个 MX 后备方案--

Google Apps 说它无法读取 MX 记录。这是因为它们与@CNAME 记录冲突吗？如果是这样，我应该放弃它并使用“裸域”方法（改为设置三个 A 记录）。Heroku 听起来这种方法对于“@”非 WWW 的 CNAME 是非常不鼓励的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-21T08:13:37.943

我发现最好的方法是使用 Google Apps“裸域”301 重定向功能，如[https://support.google.com/a/answer/2518373?hl=en中所述](https://support.google.com/a/answer/2518373?hl=en)

1）转到管理控制台 - 域 - 更改裸重定向

2) 重定向到 WWW.your_domain.com

3) 您将在 DNS 中设置 4 个 A 记录，将 your_domain.com 指向

*   216.239.32.21
*   216.239.34.21
*   216.239.36.21
*   216.239.38.21

现在，当有人指向 your_domain.com 时，他们会得到 301 重定向到 WWW.your_domain.com 这，顺便说一句，gooogle.com 的行为方式相同（301 重定向到 www.google.com）

HT：[http ://smallchou.com/post/41388058201/heroku-and-root-aka-apex-or-naked-domains](http://smallchou.com/post/41388058201/heroku-and-root-aka-apex-or-naked-domains)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T18:31:45.627

显然他们是冲突的。来自 Heroku：

```
Hi, you can't have CNAME entries on the zone apex. 
You'll need to do the A records setup, or use a DNS provider that 
supports ALIAS/ANAME records (DNSimple, DNS Made Easy, Route 53). 
```

删除 @CNAME 并用 A 记录替换它似乎可行 - 几分钟内，谷歌就拿起了我的 MX 记录。

最终设置是一个指向 myapp.herokuapp.com 的 WWW CNAME。和三个 A 记录，每个记录指向 Heroku 列出的 IP 之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-12T22:48:01.307

我只是在为这样的事情而苦苦挣扎。当我切换到 Heroku 时，我添加了 CNAME 以将我的根域 (my_domain.com) 指向 heroku，我猜该链接会转发所有内容并杀死你的电子邮件 MX 记录，所以我解决它的方法是只指向我的 www 子域通过 cname 记录 (www.my_domain.com) 到 heroku，然后我添加了一个链接，将我的根域 (my_domain.com) 转发到我的子域 (www.my_domain.com)。然后我的 MX 记录再次工作，但我不得不等待几个小时才能开始工作（幸运的是我放弃并上床睡觉，然后在早上意识到它已经工作了）。要将根指向 www 子域，我的域名提供商有一个称为指针的设置，我选择的选项是“标准”、“URL”和“www.my_domain.com”

然后为了让 SSL 工作，我必须在后端网络服务器代码中添加重定向以将 http 重定向到 https，所以我猜现在如果你输入 my_domain.com 它会重定向到 www.my_domain.com 然后重定向到 https.my_domain.com ，有点疯狂，但它运行得非常快，所以我想这很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-01T13:30:52.740

如果您的 DNS 提供商支持 ALIAS（Namecheap 现在支持），您可以轻松获取电子邮件（MX、TXT 记录）并使用带有 heroku 的裸 url（example.com，而不是 www.example.com）。

不要选择 CNAME 记录类型，而是选择 ALIAS。高级 DNS 线路的 Namecheap 示例如下所示：

```
(Type)            (Host)           (Value)                                (TTL)
ALIAS Record      @                heroku-weird-dns-target.herokudns.com  5 min 
```

ALIAS 将与 TXT 和 MX 一起使用。

# sql - 当需要执行第一个表列值时如何进行 JOIN？

> ID：11693401
> 
> 赞同：0
> 
> 时间：2012-07-27T18:15:14.930
> 
> 标签：sql, sql-server, stored-procedures, join, left-join

我有两张桌子`rawtable`和`tradetable`

**未加工的**

```
rawid companyname uniqueID 
1      AAA-XA         9CV
2      BBB-DEMO       10K
3      CCC-XOXO       7D 
```

**交易台**

```
tradeid securityname CUSIP
1       AAACOMP      9CV
2       BBBCOMP      10K 
```

现在我需要的是`companyname`from`rawtable`有点混，所以我需要`securityname`from`tradetable`作为公司名称，因为我使用了 LEFT JOIN

```
declare DataSourceId = 3;
SELECT DISTINCT
    @DataSourceId,
    dbo.CleanText(tradetable.securityname)
FROM    tradetable 
    LEFT JOIN
    (
        SELECT DISTINCT 
            companyname,
            uniqueID 
        FROM
            rawtable 
    ) rawtable ON tradetable.cusip =  rawtable. uniqueID 
```

这会给我`names`from`tradetable`但在这里我会错过新的不匹配的名称`rawtable`但我也想要这些名称但在 select 语句中

如果我使用

```
declare DataSourceId = 3;
SELECT DISTINCT
        @DataSourceId,
        dbo.CleanText(rawtable.securityname) --instead of tradetable 
```

那么我会选择错误的混合名称

那么我该如何解决这个问题呢？或从其他地方我需要按照我的意愿执行正确的名称`tradetable` `securityname`

**我预期的输出：**

**未加工的**

```
companyname uniqueID 
AAA-XA         9CV
BBB-DEMO       10K
CCC-XOXO       7D 
```

**交易台**

```
securityname CUSIP
AAACOMP      9CV
BBBCOMP      10K 
```

我想要一个格式正确的`securityname`即`companyname`我正在检查`uniqueID` 它是否匹配然后它将`securityname`从`tradetable`

现在

当有一个附加记录时，它的实际名称可能是`rawtable`这样的，我应该从它出现在第三张表中的地方取它，还是有其他方法？`CCC_XOXO``CCC``CCC``CCC`

意味着我也需要在我的 JOIN 中导入第三个表，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:24:06.173

你的意思是你想从中获取价值`tradetable`，如果它不存在，从`rawtable`? 像这样（[sqlfiddle](http://sqlfiddle.com/#!3/9a2f8/1)）？

```
SELECT dbo.CleanText(COALESCE(t.securityname,r.companyname)) AS companyname,
    COALESCE(t.CUSIP,r.uniqueID) AS uniqueID
FROM rawtable r
LEFT OUTER JOIN tradetable t ON r.uniqueID = t.CUSIP 
```

输出是：

```
公司名称唯一
AAACOMP 简历
BBBCOMP 10K
CCC-XOXO 7D

```

# r - 在 R 中循环的替代方法

> ID：11693402
> 
> 赞同：1
> 
> 时间：2012-07-27T18:15:21.373
> 
> 标签：r

```
df1 <- data.frame(Chr=1, Pos= c(100,200,300,400),stringsAsFactors=F)

df2 <- data.frame(Chr=1, PosStart= c(25,25,150,175,225,275,375),PosEnd= c(150,75,275,300,400,500,750),stringsAsFactors=F) 
```

我正在尝试比较中的`Pos`值`df1`以查看是否介于任何`PosStart`和`PosEnd`之间`df2`。对于超过 1 行的`df2`. 在输出中，我试图将 附加`df1$Pos`为新列`df2$CoPos`；每次条件为真。输出应该是这样的：

```
Chr PosStart PosEnd CoPos
1       25    150   100
1      150    275   200
1      175    300   200
1      225    400   300
1      275    500   300
1      375    750   400 
```

我做了类似的事情：

```
for(i in 1:length(df1$Pos)){

    for(j in 1:length(df2$PosStart){

            df2$CoPos[j]<- df1$Pos[which(df2$PosStart[j] < df1$Pos[i] < df2$PosEnd[j])]
    }

} 
```

有人可以告诉我是否有办法在不循环的情况下做到这一点。还有我在这里做错了什么？经过几个月的挣扎，我认为我仍然不理解循环的概念。

提前感谢一堆。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:27:54.550

你可以`apply`检查每一行`df2`：

```
myfun <- function(x) {
  data.frame(df2[x['Pos'] < df2$PosEnd & x['Pos'] > df2$PosStart,], Pos=x['Pos'])
} 
```

这将从 df2 返回满足条件的一行或多行以及`Pos`值。

```
> apply(df1, 1, myfun)
[[1]]
  Chr PosStart PosEnd Pos
1   1       25    150 100

[[2]]
  Chr PosStart PosEnd Pos
3   1      150    275 200
4   1      175    300 200

[[3]]
  Chr PosStart PosEnd Pos
5   1      225    400 300
6   1      275    500 300

[[4]]
  Chr PosStart PosEnd Pos
6   1      275    500 400
7   1      375    750 400

> 
```

然后您可以使用`plyr`and`ldply`转换为列表：

```
> library(plyr)
> ldply(apply(df1, 1, myfun), as.data.frame)
  Chr PosStart PosEnd Pos
1   1       25    150 100
2   1      150    275 200
3   1      175    300 200
4   1      225    400 300
5   1      275    500 300
6   1      275    500 400
7   1      375    750 400
> 
```

* * *

编辑评论：

这是在 for 循环中很难做到的事情。你不知道你会提前多少场比赛。可能是其中的每一行都`df1`匹配其中的每一行，`df2`或者没有任何行为或介于两者之间。因此，您不知道您的输出需要多大。这是 R 中不良做法的完美示例。例如`for loop`，如果您正在增加输出向量而不是分配给它“您将度过一段糟糕的时光 mm'kay”。

话虽如此，要使您的循环正常工作，您需要先制作该`CoPos`列。

```
df2$CoPos <- NA 
```

然后执行类似于你的循环的东西：

```
for (i in 1:length(df1$Pos)) {
    for (j in 1:length(df2$PosStart)) {
            if (df2$PosStart[j] < df1$Pos[i] & df2$PosEnd[j] > df1$Pos[i]) {
                    df2$CoPos[j] <- df1$Pos[i]
            }
    }

} 
```

但是，如果您找到符合您的约束条件的两行`df1`，您只需将找到的第二行记录到`df2`.

相反，您可以像这样增长一个新的 data.frame：

```
df3 <- data.frame(Chr=1, Pos= c(100, 125, 200,300,400),stringsAsFactors=F)

out <- data.frame()

for (i in 1:length(df3$Pos)) {
    for (j in 1:length(df2$PosStart)) {
            if (df2$PosStart[j] < df3$Pos[i] & df2$PosEnd[j] > df3$Pos[i]) {
                    out <- rbind(out, cbind(df2[j,], df3$Pos[i]))
            }
    }

} 
```

但是，不要这样做......请不要：）当我在传福音时，请查看[R-Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)以获得关于 R 中常见陷阱的出色参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T20:25:24.697

虽然[@Justin](https://stackoverflow.com/users/906490/justin)的[答案](https://stackoverflow.com/a/11693602/271616)在这种情况下有效，`apply`但如果您不记得在调用每一行/列`apply`之前将您的 data.frame 转换为矩阵，则在 data.frame 上使用可能会导致令人困惑的错误。`FUN`

这是避免此潜在问题的更通用的解决方案：

```
compareFun <- function(x) {
  data.frame(df2[x > df2$PosStart & x < df2$PosEnd,], Pos=x)
}
do.call(rbind, lapply(df1$Pos, compareFun)) 
```

更详细地说，如果`df1`并且`df2`改为定义`Chr`为字符，贾斯汀的解决方案会抛出一个错误，该错误无法明确导致问题的原因：

```
df1 <- data.frame(Chr="1", Pos=c(100,200,300,400), stringsAsFactors=FALSE)
df2 <- data.frame(Chr="1", PosStart=c(25,25,150,175,225,275,375),
  PosEnd=c(150,75,275,300,400,500,750), stringsAsFactors=FALSE)
apply(df1, 1, myfun)
# Error in data.frame(df2[x["Pos"] < df2$PosEnd & x["Pos"] > df2$PosStart,  : 
#  arguments imply differing number of rows: 0, 1 
```

# bash - sh: ...: 在尝试使用 plink 调用 shell 脚本时不是标识符

> ID：11693405
> 
> 赞同：4
> 
> 时间：2012-07-27T18:16:17.163
> 
> 标签：bash, shell, unix, plink

下面是我试图`PLINK`在（Windows 机器）上使用`MachineB`的shell 脚本。`MachineA`

```
#!/bin/bash
export HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology"
hive -S -e 'SELECT count(*) from testingtable1' > attachment22.txt 
```

我`plink`用来执行下面的shell脚本，

```
C:\PLINK>plink uname@MachineB -m test.sh
Using keyboard-interactive authentication.
Password:
Using keyboard-interactive authentication.
Your Kerberos password will expire in 73 days. 
```

这是我在尝试像上面那样运行时总是遇到的以下错误。

```
sh: HIVE_OPTS= -hiveconf mapred.job.queue.name=hdmi-technology: is not 
an identifier 
```

我的 shell 脚本有问题吗？或一些尾随空格？我无法弄清楚。我正在`PLINK`从 Windows 机器上运行

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T18:46:12.663

错误消息上的`sh:`前缀表示脚本正在由 执行`sh`，而不是`bash`。

bash 允许您组合设置变量并将其导出到单个命令中：

```
export foo=bar 
```

sh，或者至少它的一些旧版本，需要将这两个操作分开：

```
foo=bar ; export foo 
```

不识别`export foo=bar`语法的 sh 版本会将字符串解释`foo=bar`为变量名（并且是非法的，因为它不是标识符）。

要么安排脚本由 bash 执行，要么更改此：

```
export HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology" 
```

对此：

```
HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology"
export HIVE_OPTS 
```

就此而言，由于您在`$HIVE_OPTS`脚本的开头提到它，几乎可以肯定它*已经*导出，所以您可以删除`export`.

（您还需要避免任何其他特定于 bash 的功能。）

那么为什么系统用sh调用shell呢？该[`#!/bin/bash`语法](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)特定于类 Unix 系统。Windows 通常根据文件扩展名来决定如何执行脚本；显然，您的系统配置为`*.sh`使用 sh 调用文件。（您*可以*使用文件夹选项配置您的系统，以`*.sh`使用 bash 调用文件，但这可能会引入其他问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:30:03.127

我认为`-m`选项是从*本地*文件`plink`读取要在远程机器上执行的命令。如果我对行尾的评论不起作用，请尝试

 *```
plink uname@MachineB test.sh 
```

通过运行确保`test.sh`可执行

```
chmod +x test.sh 
```

在机器 B 上。*

# android - android 社 交网络应用程序的网络服务？

> ID：11693410
> 
> 赞同：0
> 
> 时间：2012-07-27T18:16:35.997
> 
> 标签：android, web-services, amazon, social-networking

我正在android上开发社交网络应用程序。我的应用程序的粗略想法是，当用户启动一个应用程序时，它将使该应用程序的所有用户都在附近。因此，为了存储用户数据，我想使用网络服务器。我不知道什么是最好的开始方式。我应该使用亚马逊网络服务吗？(S3,Ec2) 我在网上冲浪时得到了这些流行语。请指导我什么是数据库存储的最佳方法？我应该编写自己的服务器 api 吗？要不然是啥 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:38:11.753

我个人喜欢使用带有 PHP 的 MySQL 数据库来连接应用程序和后端！您的应用程序可以向 PHP 发送请求，然后您的 PHP Web 服务将写入/读取数据库，然后将 JSON 返回到您的应用程序。

我会说这是一个非常主观的问题，因为您可以通过多种方式编写 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:40:21.557

这些是您必须做的一些一般事情：

1.  购买一些服务器空间，您可以在其中托管您的服务器（这是亚马逊 ec2 等）。如果您需要一个花哨的域名，也可以购买，并将其映射到您带来的服务器的 IP 地址（可选）。
2.  在此服务器上设置某种数据库来存储您的数据（msql）
3.  编写包装 Web 服务（php、jsp 等），这将公开 api 以远程访问您的数据。出于安全原因，您还应该使用某种令牌传递机制进行一些身份验证。
4.  使用您在 Web 服务中创建的 API 远程访问服务器上的数据。

# xslt - 使用 xsl:for-each-group

> ID：11693413
> 
> 赞同：1
> 
> 时间：2012-07-27T18:16:45.510
> 
> 标签：xslt, xpath, xslt-2.0

这是我的要求。我的示例输入文档如下所示。（我添加了白线以使其清晰）

```
<body>
       <p name="h-title" other="main">Introduction</p>
       <p name="h-titledesc " other="other-desc">XSLT and XQuery</p>

       <p name=""> XSLT is used to write stylesheets.</p>
    <p name="section-title" other=" other-section">XSLT</p>
    <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
    <p name=""> Some text.</p>
    <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
    <p name="h1-title" other=" other-h1">XSLT</p>
    <p name=""> Some text.</p>
       <p name="h2-title " name="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>

    <p name="section-title" other=" other-section">XSLT</p>
    <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
    <p name=""> Some text.</p>
    <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
    <p name="h1-title" other=" other-h1">XSLT</p>
    <p name=""> Some text.</p>
       <p name="h2-title " name="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>

       <p name ="summary-title">this is summary</p>
       <p name="summary-desc " other="other-summarydesc">the summary</p>
    </body> 
```

现在我想要的输出是这个。

```
<body>
       <p name="h-title" other="main">Introduction</p>
       <p name="h-titledesc " other="other-desc">XSLT and XQuery</p>

       <p name=""> XSLT is used to write stylesheets.</p>

    <body-contents>
        <p name="section-title" other=" other-section">XSLT</p>
        <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
        <p name=""> Some text.</p>
        <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        <h1>
        <p name="h1-title" other=" other-h1">XSLT</p>
        <p name=""> Some text.</p>
        <h2>
           <p name="h2-title " name="other-h2">XQuery</p>
           <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        <h3>
           <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
           <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        </h3>
    </h2>
    </h1>
    </body-contents>
    <body-contents>
        <p name="section-title" other=" other-section">XSLT</p>
        <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
        <p name=""> Some text.</p>
        <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        <h1>
        <p name="h1-title" other=" other-h1">XSLT</p>
        <p name=""> Some text.</p>
        <h2>
           <p name="h2-title " name="other-h2">XQuery</p>
           <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        <h3>
           <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
           <p name="">
              <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        </h3>
    </h2>
    </h1>

    </body-contents>
    <body-contents>
           <p name ="summary-title">this is summary</p>
           <p name="summary-desc " other="other-summarydesc">the summary</p>
    </body-contents>
    </body> 
```

请帮我解决这个问题。

{**可选** 有如下限制：

*   h1、h2、h3 依次出现（也就是说，h3 不在 h1 和 h2 之间）
*   name="section-title" 的行应该在 name="section-desc" 之前
*   h1、h2、h3 等应该在 section-desc 之后。

我在这里解决了 h1、h2、h3 等的[问题](https://stackoverflow.com/questions/11585371/xslfor-each-group-help-needed)。我知道这很了不起。任何帮助都很棒。

如果违反这些规则，则不应发生转换。}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:05:15.327

这是我对先前发布的样式表的改编，它只是`group-starting-with`在调用递归函数对级别进行分组之前进行了附加操作。我意识到这与您在之前的帖子中提出的建议相同，但到目前为止，我不清楚为什么该建议对您不起作用。

所以这里是样式表：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:param name="prefix" as="xs:string" select="'h'"/>
<xsl:param name="suffix" as="xs:string" select="'-title'"/>

<xsl:output method="xml" version="1.0" indent="yes"/>

<xsl:function name="mf:group" as="node()*">
  <xsl:param name="items" as="node()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$items" group-starting-with="p[@name = concat($prefix, $level, $suffix)]">
    <xsl:choose>
      <xsl:when test="not(self::p[@name = concat($prefix, $level, $suffix)])">
        <xsl:apply-templates select="current-group()"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="h{$level}">
          <xsl:apply-templates select="."/>
          <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="body">
  <xsl:copy>
    <xsl:for-each-group select="*" group-starting-with="p[@name = 'section-title' or @name = 'summary-title']">
      <xsl:choose>
        <xsl:when test="not(self::p[@name = 'section-title' or @name = 'summary-title'])">
          <xsl:apply-templates select="current-group()"/>
        </xsl:when>
        <xsl:otherwise>
          <body-contents>
             <xsl:sequence select="mf:group(current-group(), 1)"/>
          </body-contents>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

当我将带有 Saxon 9.4 的样式表应用于更正的输入时

```
<body>
       <p name="h-title" other="main">Introduction</p>
       <p name="h-titledesc " other="other-desc">XSLT and XQuery</p>

       <p name=""> XSLT is used to write stylesheets.</p>
    <p name="section-title" other=" other-section">XSLT</p>
    <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
    <p name=""> Some text.</p>
    <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
    <p name="h1-title" other=" other-h1">XSLT</p>
    <p name=""> Some text.</p>
       <p name="h2-title" other="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>

    <p name="section-title" other=" other-section">XSLT</p>
    <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
    <p name=""> Some text.</p>
    <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
    <p name="h1-title" other=" other-h1">XSLT</p>
    <p name=""> Some text.</p>
       <p name="h2-title" other="other-h2">XQuery</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
       <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
       <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>

       <p name ="summary-title">this is summary</p>
       <p name="summary-desc " other="other-summarydesc">the summary</p>
    </body> 
```

我得到输出

```
<body>
   <p name="h-title" other="main">Introduction</p>
   <p name="h-titledesc " other="other-desc">XSLT and XQuery</p>
   <p name=""> XSLT is used to write stylesheets.</p>
   <body-contents>
      <p name="section-title" other=" other-section">XSLT</p>
      <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
      <p name=""> Some text.</p>
      <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
      <h1>
         <p name="h1-title" other=" other-h1">XSLT</p>
         <p name=""> Some text.</p>
         <h2>
            <p name="h2-title" other="other-h2">XQuery</p>
            <p name="">
               <p1 name="bold"> XQuery is used to query XML databases.</p1>
            </p>
            <h3>
               <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
               <p name="">
                  <p1 name="bold"> XQuery is used to query XML databases.</p1>
               </p>
            </h3>
         </h2>
      </h1>
   </body-contents>
   <body-contents>
      <p name="section-title" other=" other-section">XSLT</p>
      <p name="section-desc" other=" other-sectionsdesc">XSLT</p>
      <p name=""> Some text.</p>
      <p name="">
          <p1 name="bold"> XQuery is used to query XML databases.</p1>
       </p>
      <h1>
         <p name="h1-title" other=" other-h1">XSLT</p>
         <p name=""> Some text.</p>
         <h2>
            <p name="h2-title" other="other-h2">XQuery</p>
            <p name="">
               <p1 name="bold"> XQuery is used to query XML databases.</p1>
            </p>
            <h3>
               <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
               <p name="">
                  <p1 name="bold"> XQuery is used to query XML databases.</p1>
               </p>
            </h3>
         </h2>
      </h1>
   </body-contents>
   <body-contents>
      <p name="summary-title">this is summary</p>
      <p name="summary-desc " other="other-summarydesc">the summary</p>
   </body-contents>
</body> 
```

请下次提供输入样本时确保其格式正确，到目前为止，您总是发布类似 的内容`<p name="h2-title " name="other-h2">XQuery</p>`，并且不可能有两个相同名称的属性。

# ios - 禁用 facebook 中的电话号码链接，如 iframe

> ID：11693415
> 
> 赞同：2
> 
> 时间：2012-07-27T18:16:48.690
> 
> 标签：ios, web, facebook-like, mobile-safari

我最近在我们的一个页面上添加了一个 facebook like 按钮。一切正常，除了 ios 看到 facebook 喜欢的数量，认为它是一个电话号码，并将其变成一个链接。

我已经阅读并

```
<meta name = "format-detection" content = "telephone=no"> 
```

应该禁用自动电话链接。问题是，like 按钮被添加为 iframe，所以我无法将上述元标记插入到文档中。将其添加到包含文档中不会执行任何操作。

有没有人找到解决这个问题的方法？

# android - Android中的ATM查找器应用程序

> ID：11693417
> 
> 赞同：2
> 
> 时间：2012-07-27T18:17:03.437
> 
> 标签：android, android-maps

我正在尝试在 Android 中开发 ATM finder 应用程序。我配备了如何获取我的位置和访问地图。有人可以帮我在地图上找出自动取款机吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:23:12.377

使用[Google Maps API](https://developers.google.com/places/documentation/#PlaceSearchRequests)查找附近的地点。[支持的类型](https://developers.google.com/places/documentation/supported_types)之一是“atm”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:22:51.473

您可以使用 Google PLACE api...

这将允许您找到最近的自动取款机、医院……等等。

您可以 从其服务中获取**LATITUDE**和**LONGITUDE并可以显示在您的地图中**

这是[链接](https://developers.google.com/places/documentation/)希望这对你有帮助

# ruby-on-rails - 如何使用 client_side_validations 和 Twitter Bootstrap？

> ID：11693418
> 
> 赞同：2
> 
> 时间：2012-07-27T18:17:06.090
> 
> 标签：ruby-on-rails, twitter-bootstrap, validation

我发现[这篇博客文章](http://www.ddarrensmith.com/blog/2012/05/17/ruby-on-rails-client-side-validation-with-validation-helpers-and-twitter-bootstrap/)讨论了如何`client_side_validations`与 Twitter Bootstrap 结合。但是在博文中，作者使用的是SimpleForm。

**任何人都知道我如何在不使用的情况下获得相同的结果`SimpleForm`？**

在我的应用程序中，我正在使用`form_for`并且不想将整个项目转换为，`SimpleForm`因为它会花费很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:39:48.807

查看此视频[http://railscasts.com/episodes/263-client-side-validations?view=asciicast](http://railscasts.com/episodes/263-client-side-validations?view=asciicast)

我将 client_side_validations 与 form_for 一起使用

gem simple_form 安装在我的环境中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:22:33.470

我花了好几个小时来解决这个问题，试图让它在不使用 SimpleForm 的情况下工作……最后我放弃了。使用 SimpleForm，漂亮的 client_side_validations 插件，并保存你的理智 - 我花了大约 10 分钟才让它工作。

在您的 Gemfile 中：

```
gem 'simple_form'
gem 'client_side_validations'
gem 'client_side_validations-simple_form' 
```

然后运行这个：

```
rails generate simple_form:install --bootstrap 
```

那么您的表单将需要如下所示：

```
<%= simple_form_for(@qualification, :validate => true, :html => {:class => "form-horizontal"}) do |f| %>
    <%= f.input :year %>
<% end %> 
```

……就是这样。

# c# - 使 if 语句看起来更好

> ID：11693419
> 
> 赞同：2
> 
> 时间：2012-07-27T18:17:13.620
> 
> 标签：c#, if-statement

我怎样才能使它看起来更好：

```
lblTotalWorldSize.Text = GetDirectorySize(_worldsDirectory + selectedItem) * 1024 + " kb";    // Total world size
if (Directory.Exists(_worldsDirectory + selectedItem + "\\" + selectedItem))                  // World itself
{
    lblWorldSize.Text = GetDirectorySize(_worldsDirectory + selectedItem + "\\" + selectedItem) * 1024 + " kb";
}
else
{
    lblWorldSize.Text = "Couldn't find world.";
}
if (Directory.Exists(_worldsDirectory + selectedItem + "\\" + selectedItem + "_nether"))      // Nether
{
    lblNetherSize.Text = GetDirectorySize(_worldsDirectory + selectedItem + "\\" + selectedItem + "_nether") * 1024 + " kb";
}
else
{
    lblWorldSize.Text = "Couldn't find world.";
}
if (Directory.Exists(_worldsDirectory + selectedItem + "\\" + selectedItem + "_the_end"))     // The End
{
    lblTheEndSize.Text = GetDirectorySize(_worldsDirectory + selectedItem + "\\" + selectedItem + "_the_end") * 1024 + " kb";
}
else
{
    lblWorldSize.Text = "Couldn't find world.";
} 
```

它看起来真的很乱，我似乎找不到任何这样的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:21:05.983

好吧，这里有几件事可以提供帮助：

*   辅助方法（您每次都执行从“路径”到“大小字符串”的相同转换）
*   条件运算符
*   提取公共局部变量

像这样的东西：

```
// Note that _worldsDirectory must be an absolute path)
string prefix = Path.Combine(_worldsDirectory, selectedItem, selectedItem);
lblWorldSize.Text = GetDirectorySizeOrDefault(prefix, "Couldn't find world");
lblNetherSize.Text = GetDirectorySizeOrDefault(prefix + "_nether",
                                               "Couldn't find _nether");
lblTheEndSize.Text = GetDirectorySizeOrDefault(prefix + "_the_end",
                                               "Couldn't find _the_end");

...

static string GetDirectorySizeOrDefault(string directory, string defaultText)
{
    return Directory.Exists(directory)
        ? GetDirectorySize(directory) * 1024 + " kb"
        : defaultText;
} 
```

请注意，我已经更正了您的原始代码*总是*在错误时分配的事实`lblWorldSize.Text`- 我认为这不是故意的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:24:02.290

*请*用于`Path.Combine`路径创建，而不是像您那样进行字符串连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:22:53.740

这种方法有可能做不止 1 件事吗？你也许可以用其他一些方法来重构它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:29:47.790

我建议使用意图和变量替换来增强可读性：

```
string dir = "_worldsDirectory + selectedItem";
string dirItemPath = @"_worldsDirectory + selectedItem \\" + selectedItem;

// Total World Size
lblTotalWorldSize.Text = GetDirectorySize(_worldsDirectory + selectedItem) * 1024 + " kb";

// World itself
if (Directory.Exists(dirItemPath)) {

    lblWorldSize.Text = GetDirectorySize(dirItemPath) * 1024 + " kb";
} else {

     lblWorldSize.Text = "Couldn't find world.";
}

// Nether
if (Directory.Exists(dirItemPath + "_nether")) {

    lblNetherSize.Text = GetDirectorySize(dirItemPath + "_nether") * 1024 + " kb";
} else {

    lblWorldSize.Text = "Couldn't find world.";
}

// The End
if (Directory.Exists(dirItemPath + "_the_end")) {

    lblTheEndSize.Text = GetDirectorySize(dirItemPath + "_the_end") * 1024 + " kb";
} else {

    lblWorldSize.Text = "Couldn't find world.";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:32:49.260

```
lblTotalWorldSize.Text = GetDirectorySize(_worldsDirectory + selectedItem) * 1024 + " kb";    // Total world size

DoOnDirectoryExists(lblWorldSize, "");    
DoOnDirectoryExists(lblNetherSize, "_nether");    
DoOnDirectoryExists(lblWorldSize, "_the_end");    

//Change the name to something more appropriate to your program, same with the LBL type and tempString
public bool DoOnDirectoryExists(LBL lbl, string suffix)
{
    string tempString = _worldsDirectory + selectedItem + "\\" + selectedItem + suffix;

    if (Directory.Exists(tempString))     
    {
         lbl.Text = GetDirectorySize(tempString) * 1024 + " kb";
    }
    else
    {
        lblWorldSize.Text = "Couldn't find world.";
    }
} 
```

摆脱混乱并使代码更具可读性的最佳方法 - 删除代码重复。

# javascript - JavaScript 中的嵌入式循环和嵌套循环之间有区别吗？

> ID：11693423
> 
> 赞同：0
> 
> 时间：2012-07-27T18:17:24.803
> 
> 标签：javascript, loops, nested

嵌入式和嵌套循环只是同义词吗？每个示例将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:22:54.270

没有“嵌入式”循环之类的东西。嵌套循环是循环中的循环。例如：

```
for(i = 0; i < length; i++)
{
    for(j = 0; j < length; j++) // <----- nested loop
    {
      //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:23:02.967

“嵌入”和“嵌套”都意味着“在其他东西中的东西”。

循环内循环。

我不确定“嵌入式循环”的其他含义是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:25:47.547

嵌套循环是循环内的循环，对吗？确保嵌入式循环也是嵌套循环。可以用来告诉以下内容的相同内容：

```
for( var i=0; i<someValue; i++){ // parent loop
  for(var j=0; j<someValue; j++){ // loop within a loop
     //some code
  }
} 
```

# system.reactive - Rx：用于从 Observable 流中获取第一个和最新值的运算符

> ID：11693429
> 
> 赞同：3
> 
> 时间：2012-07-27T18:17:59.470
> 
> 标签：system.reactive

对于基于 Rx 的更改跟踪解决方案，我需要一个操作员，它可以让我获得可观察序列中的第一个和最近的项目。

我将如何编写一个生成以下大理石图的 Rx 运算符（*注意：括号仅用于排列项目......我不确定如何最好地在文本中表示这一点*）：

```
 xs:---[a  ]---[b  ]-----[c  ]-----[d  ]---------|
desired:---[a,a]---[a,b]-----[a,c]-----[a,d]---------| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T20:43:30.733

使用与@Wilka 相同的命名，您可以使用以下扩展名，这有点不言自明：

```
public static IObservable<TResult> FirstAndLatest<T, TResult>(this IObservable<T> source, Func<T,T,TResult> func)
{
    var published = source.Publish().RefCount();
    var first = published.Take(1);        
    return first.CombineLatest(published, func);
} 
```

请注意，它不一定返回 a `Tuple`，而是为您提供在结果上传递选择器函数的选项。这使它与底层的主要操作 ( `CombineLatest`) 保持一致。这显然很容易改变。

用法（如果你想在结果流中使用元组）：

```
Observable.Interval(TimeSpan.FromSeconds(0.1))
          .FirstAndLatest((a,b) => Tuple.Create(a,b))
          .Subscribe(Console.WriteLine); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:46:16.840

试试这个：

```
public static IObservable<Tuple<T, T>> FirstAndLatest<T>(
    this IObservable<T> source)
{
    return
        source
            .Take(1)
            .Repeat()
            .Zip(source, (x0, xn) => Tuple.Create(x0, xn));
} 
```

很简单吧？

* * *

或者，作为共享基础源的替代方法，试试这个：

```
public static IObservable<Tuple<T, T>> FirstAndLatest<T>(
    this IObservable<T> source)
{
    return
        source.Publish(
            s =>
                s.Take(1)
                .Repeat()
                .Zip(s, (x0, xn) => Tuple.Create(x0, xn)));
} 
```

哎呀！刮这个。它不起作用。它本质上一直在产生一对最新的值。这样的发布是行不通的。原始实现是最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T20:09:22.777

我怀疑有更好的方法来做到这一点（我不喜欢使用 Do），但你可以创建这样的运算符

```
public static IObservable<Tuple<T, T>> FirstAndLatest2<T>(this IObservable<T> source)
{
    return Observable.Defer(() => {
        bool hasFirst = false;
        T first = default(T);

        return source
            .Do(item =>
            {
                if (!hasFirst)
                {
                    hasFirst = true;
                    first = item;
                }
            })
            .Select(current => Tuple.Create(first, current));
    });
} 
```

然后你会像这样使用它：

```
Observable.Interval(TimeSpan.FromSeconds(0.1))
    .FirstAndLatest()
    .Subscribe(Console.WriteLine); 
```

# project-management - 使用 Jira 时，如何确保每个团队成员在 sprint 中都有足够的工作量？

> ID：11693432
> 
> 赞同：0
> 
> 时间：2012-07-27T18:18:16.473
> 
> 标签：project-management, agile, jira, scrum, greenhopper

在使用 Rapid Board 进行计划会议时，有哪些合理的方法可以确保团队中的每个人在 sprint 期间都有足够的工作量？

例如，如果您的团队中有 10 个人，您如何快速查看 1 个人是否只有 2 小时的工作时间？你应该等待他们说出来还是可以通过 Greenhopper 以某种方式完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T05:44:30.353

确保每个人在整个 sprint 中都有工作要做的最好方法是让他们在每次完成上一个任务时注册工作。这意味着成员将“拉动”工作，而不是让他们的工作“推”到他们身上。

如果你进行每日例会——每天——你会很快发现有人没有报名参加新工作——他要么坚持现有的工作，要么没有选择新工作。本质上，如果您将工作分解为足够小的任务，您将在一天内知道发生了什么。

无论您使用哪种软件工具来跟踪您的冲刺，所有这些都对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:54:17.353

如果您正在使用 Jira（并且您的项目可以负担得起），我建议您查看附加组件“Green Hopper”。它也是由 Atlassian 制作的，可以满足您的要求。您可以查看个人并查看他们有多少工作以及剩余多少空闲时间。

您还可以将故事（以虚拟索引卡表示的 Jira 问题）拖到不同的迭代（冲刺）中并拖到不同的人身上。同样，它将帮助您运行日常站立（将其用作 Scrum 板），但是 YMMV。

米

# regex - 来自 SpamAssassin 的无效 URI 错误实际匹配的是什么？

> ID：11693434
> 
> 赞同：0
> 
> 时间：2012-07-27T18:18:20.913
> 
> 标签：regex, spamassassin

我正在尝试调试一些由 SpamAssassin 发送到垃圾邮件文件夹的电子邮件，但我遇到了无法修复的错误。问题似乎是电子邮件中某处的 URI 无效，但我不确定如何找到它。也许如果我能弄清楚错误匹配的是什么，那会有所帮助。

这是我要回来的实际错误：

```
0.6      SARE_OBFU_AMP          invalid character within URI host/domain 
```

在谷歌上做了一些挖掘，看起来这是规则所基于的正则表达式*（[来源](http://mta.org.ua/spamassassin/stuff/spamass-rules/spamass-rules-20050821/70_sare_obfu1.cf)）*

```
m{(?!(?:mailto:|\#).*)^(?:https?://)?[^/\?]{4,40}\&}i 
```

所以实际的问题是：**我得到的错误实际上是什么意思，我如何才能真正识别错误的 URI？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:11:52.733

此类电子邮件包含一些 url/链接地址，其中包含. 之前`&`没有前导`/`或`?`字符的字符`&`。例如*http://www.domain.com&something-else*

# c++ - Objective-C 稳定 ABI

> ID：11693436
> 
> 赞同：7
> 
> 时间：2012-07-27T18:18:24.747
> 
> 标签：c++, objective-c, objective-c++

我主要是一个 C++ 人。由于 C++ 缺乏官方的 ABI，我总是对支持多个编译器的组件设计使用类似 COM 的方法。

最近我遇到了一个问题，Objective-C 是否会替代类似 COM 的方法。显然，要使 Objective-C 成为替代者，需要一个稳定的 ABI，因此我想知道是否存在用于 Objective-C 的稳定 ABI（在所有主要操作系统 [OSX、GNU/Linux、Windows] 上）以及有多容易它将使用 Objective-C(++) 作为不同编译器创建的组件之间的“粘合剂”。

**编辑：** 正如*Nikolai Ruhe*指出的那样，对 COM 的简短描述可能会有所帮助。COM 本质上是一个“二进制标准”，它允许混合不同编译器（以及多种语言）的二进制文件。COM 的载体是定义方法（映射到 C++ 的虚函数）的接口。组件实现至少一个接口并作为 DLL 分发。它们可以位于系统上的任何位置（位置在注册表中指定），并且可以由任何 COM 客户端通过它们实现的接口的 ID 加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:38:45.427

我只能代表 Apple 的实现，因为我没有使用 GNU 或其他端口的经验。

Objective-C 在很大程度上依赖于 C 的 ABI（如函数调用和结构的内存布局）。

它自己的 ABI 在 Apple 的实现中经历了一些变化，比如[“现代运行时”](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtVersionsPlatforms.html)引入的[非脆弱实例变量](http://en.wikipedia.org/wiki/Objective-C#Non-fragile_instance_variables)、属性的引入、更快的异常处理、垃圾收集、对 ARC 的支持。`__weak`

有些更改是向后兼容的，有些则不是。但是由于整个系统和框架由 Apple 提供，并且这些更改通常是与其他不兼容的更改（切换到 Intel 和 LP64）一起引入的，这对用户没有影响。

**编辑：**您应该记住的一件事是，Objective-C 不仅依赖于固定的 ABI，而且还依赖于兼容的运行时。为了您的目的，这是另一个令人头疼的问题。

# linux - 在 Vim 的新选项卡中打开上次关闭的文件

> ID：11693437
> 
> 赞同：57
> 
> 时间：2012-07-27T18:18:27.697
> 
> 标签：linux, vim, vi, macvim

我知道我可以`:q`在 Vim 中使用`:e#`. 这将在当前选项卡中打开文件。我将如何执行相同的任务但在新的 Vim 选项卡中打开文件。我也对如何在新拆分而不是当前选项卡中打开文件感兴趣。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-27T18:25:03.350

`#`只是一个 Ex 特殊字符，将替换为备用文件的名称。执行一个`:ls`，备用文件也将在此处标有 a `#`。

`#`可以类似地与`:tabnew`and一起使用`split`。在下面的示例中，我将使用更短的别名来`:tabe`代替`:tabnew`as （在帮助文档中搜索）：`:tabe``:tabnew`

*   要在新选项卡中打开备用文件：`:tabe#`
*   要在新拆分中打开文件：`:split#`; 这可以缩写为`:sp#`, 和`:vsp#`用于垂直分割。

使用 中的缓冲区*号*，`:ls`例如缓冲区号*5*，您还可以：

*   `:sp#5`用;在拆分中打开缓冲区 或者`:sb5`，如果`switchbuf`选项包含说明`newtab`符 - 请参阅`:help switchbuf`
*   在垂直分割中打开缓冲区`:vsp #5`（没有`:vsb`）
*   在新选项卡中打开缓冲区`:tabe #5`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T07:46:00.163

您不必离开正常模式即可在新窗口中打开备用缓冲区：

`CTRL`-`W` `^` **在水平拆分中打开备用缓冲区**。

`CTRL`-`W` `T`在新选项卡中打开当前缓冲区（即 Shift-T）。

因此，您的标题问题的一种解决方案是以下组合。

`CTRL`- `W` `^`, `CTRL`- `W` `T`：**在新选项卡中打开备用缓冲区。**

请注意，对于第一个命令中的插入符号“^”，您不必释放 Control 键，也不必按 Shift，只需按住`CTRL`然后点击`W`和`6`（插入符号位于许多英文键盘布局中） .

# php - 调度php脚本？

> ID：11693438
> 
> 赞同：2
> 
> 时间：2012-07-27T18:18:28.563
> 
> 标签：php

我正在寻找**一个每小时**执行一次的 php 脚本（不执行它）（例如用于发送电子邮件），但我不知道它的工作方式。我必须使用 Cron Jobs 还是 php 中有任何东西来制作这种脚本？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T18:20:08.047

PHP 不包含这样的内容。您必须使用外部工具（例如[cron](https://stackoverflow.com/questions/878600/how-to-create-cronjob-using-bash)）定期运行 PHP 脚本。

如果您不允许在虚拟主机上设置 cron 作业，则存在会定期调用一个 URL 的网站，例如[http://www.onlinecronjobs.com/](http://www.onlinecronjobs.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:19:54.327

如果您希望它按设定的时间表运行，则需要使用 cron 作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:24:12.773

是的，如果您使用的是 linux，请转到终端并输入 crontab -e。

你的线会是这样的

```
1  2 3 4 5 (this line here is just an information.. dont type it on crontab)
00 * * * * wget www.page.com/yourphp.php 
```

所以脚本将运行 1 00 On 分钟 00 2 * 每小时 3 * 每天 4 * 每个月 5 * 一周中的每一天

然后输入 :wq 关闭它就完成了。

在这种情况下，您需要拥有 crontab 和 wget。

# sql - 使来自不同数据库的表相互匹配

> ID：11693439
> 
> 赞同：0
> 
> 时间：2012-07-27T18:18:33.903
> 
> 标签：sql, database, sql-update, insert-update, sql-insert

我正在尝试更新一个表，以便所有值都与不同数据库上的另一个表相同。我可以使用插入命令而不是更新命令来做到这一点。

这有效：

```
INSERT [test1].[dbo].[table1]
    SELECT * FROM [source].[dbo].[table1] 
```

这不会：

```
UPDATE [test2].[dbo].[table1] 
SET [source].[dbo].[table1] = [test2].[dbo].[table1] 
```

也不是这个：

```
UPDATE [test2].[dbo].[table1]
SET 
     [test2].[dbo].[table1].[PKcolumn] = [source].[dbo].[table1].[PKcolumn]
    ,[test2].[dbo].[table1].[column2] = [source].[dbo].[table1].[column2] 
    ,[test2].[dbo].[table1].[column3] = [source].[dbo].[table1].[column3] 

WHERE
    [source].[dbo].[table1].[PKcolumn] = [test2].[dbo].[table1].[PKcolumn] 
```

尽管无数次检查错误，但结果始终是此错误消息的一些变化：

消息 4104，第 16 层，状态 1，第 1 行

无法绑定多部分标识符“source.dbo.table1.PKColumn”。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:20:50.130

由于`update`只能影响一个表，因此您不必指定它：

```
UPDATE dest
SET    column2 = src.column2
FROM   source.dbo.table1 as src
JOIN   test2.dbo.table1 as dest
on     dest.PKcolumn = src.PKcolumn 
```

PS 根据您使用的数据库，您可能需要查看该`MERGE`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:21:41.977

您缺少 FROM 子句（因为您在更新子句中使用多个表）检查此：[http ://scottonwriting.net/sowblog/archive/2010/07/13/howto-update-records-in-a-带有数据的数据库表，来自另一个表-ms-sql-server.aspx](http://scottonwriting.net/sowblog/archive/2010/07/13/howto-update-records-in-a-database-table-with-data-from-another-table-ms-sql-server.aspx)

尝试这个：

```
UPDATE [test2].[dbo].[table1]
SET 
     [test2].[dbo].[table1].[PKcolumn] = [source].[dbo].[table1].[PKcolumn]
    ,[test2].[dbo].[table1].[column2] = [source].[dbo].[table1].[column2] 
    ,[test2].[dbo].[table1].[column3] = [source].[dbo].[table1].[column3] 
FROM [source].[dbo].[table1] JOIN [test2].[dbo].[table1]
ON
    [source].[dbo].[table1].[PKcolumn] = [test2].[dbo].[table1].[PKcolumn] 
```

# javascript - 我怎样才能防止我的主播在我的屏幕上跳这么多？

> ID：11693440
> 
> 赞同：3
> 
> 时间：2012-07-27T18:18:34.553
> 
> 标签：javascript, css, anchor, pseudo-class, fragment-identifier

我决定尝试只使用 CSS 和 HTML 创建一个选项卡式菜单。使用`:target`伪类来显示适当的`div`，我已经实现了它，只是它跳得有点太多以至于对用户友好：

[http://brad.sebdengroup.com/newodynsite/stockman.php#StockControl](http://brad.sebdengroup.com/newodynsite/stockman.php#StockControl)

无论如何我可以解决这个问题吗？最初，我想远离 JavaScript，但如果它解决了这个问题，我会很乐意添加一些。

注意：我知道我可以使用 jQuery/一些花哨的库重建一个新的选项卡式菜单，但如果可能的话，我宁愿修复这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T18:29:40.067

**这是因为您在锚点中使用了哈希值。这会导致它跳转到具有哈希指定的 id 的 div。**

要对此进行排序，您可以使用 jQuery 通过使用来停止跳跃`.preventDefault();`

您可以通过给每个跳跃类的锚点`prevent`然后使用 jQuery 来停止跳跃来使用它。当然，您可以根据您的 html 结构更改此选择器。

```
$(".prevent").click(function(e) { //Note the e for event
  e.preventDefault();
}); 
```

**不使用 jQuery 进行编辑**

在诅咒没有 jQuery 可以使用之后，我试图组合一个纯 js 解决方案。您需要检查此项以确保它在您的页面上有效。

[这是 jsfiddle 示例](http://jsfiddle.net/ARpVy/5/)。

我所做的是找到页面上的所有锚点，然后将 return false 添加到它们的 onclick 属性中。如果这要在您的实时站点上进行，您将需要进一步选择锚点，请参阅此[示例](http://jsfiddle.net/ARpVy/5/)和说明：

我还为你不想跳的锚添加了一个类。要使用它，您需要将“menuControl”类添加到要停止跳跃的任何锚点。

下面是我的 JavaScript 以防 jsfiddle 链接损坏。顺便提一下，但您现在需要使用 JavaScript 控制这些选项卡的导航，因为使用`return false`将停止导航。

```
var anchors = document.getElementsByTagName("a");

for(var i = 0; i < anchors.length; i++) {
    if ( anchors[i].className == "menuControl" ) {
        anchors[i].setAttribute("onclick", "return false");
    }
} ​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:26:15.357

您可以`window.scrollTo(0, 0);`在每次单击后使用滚动回文档顶部，它很可能发生得太快，以至于任何用户都无法注意到。

[文档](https://developer.mozilla.org/en/Window.scrollTo)

对于水平跳转，你可以`overflow-y: scroll`在你的身体上使用，这样滚动条就一直在页面上，即使没有足够的内容导致滚动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T04:27:42.213

您可以将页面的最小高度设置为 div 使用 css 移动到顶部所需的高度。

```
body { min-height: 1000px; } 
```

用您需要的任意数量的 px 替换 1000px。

这将防止所有超出使浏览器视图以 div 为目标的初始点击的跳转。

这就像点击销售订单处理，然后点击现在的工作订单处理。如果您不希望页面加载时出现所有额外的空白，则可以仅在单击选项卡时设置高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T07:58:13.557

你有一个问题，因为你的容器高度是如此不同。

我建议您将所有内容容器包装在一个没有样式的 div 中。然后循环遍历所有容器。计算容器的最大高度。然后给所有的包装 div 这个最大高度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T18:30:50.693

我会使用 jQuery 让它平滑滚动。[这里](http://demos.flesler.com/jquery/scrollTo/)有一个很好的演示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-27T18:33:43.433

```
$(window).scroll(function () { 
       var newTop = $(window).scrollTop();
       if (newTop <= 130){
            newTop = 130;
       }
       $("#idofElementToScroll").stop()
       .animate({'top': newTop}, "slow");
}); 
```

这是我在个人网站的私有部分中编写并实现的功能。

这里发生的是你声明你当前在屏幕上的位置，然后当你向下滚动时，你正在滚动的元素会随着你平滑滚动。

我知道你要求移动锚点，但你可以很容易地调整这个功能来达到这个目的。

请注意，“130”是指我希望移动元素与窗口顶部的最小距离。

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-04T16:17:39.227

[按照Stu Nicholls](http://www.cssplay.co.uk/menus/cssplay-page-menu.html#picasso)的示例，使用带有目标伪类的兄弟选择器来避免此问题，但要注意[Webkit 错误](http://css-tricks.com/webkit-sibling-bug/)：

```
<!doctype html>
<html lang="en">
<head>
    <title>CSS Target Navigation</title>
    <style type="text/css">
/* ================================================================ 
This copyright notice must be untouched at all times.

The original version of this stylesheet and the associated (x)html
is available at http://www.cssplay.co.uk/menus/cssplay-page-menu.html
Copyright (c) Stu Nicholls. All rights reserved.
This stylesheet and the associated (x)html may be modified in any 
way to fit your requirements.
=================================================================== */

#cssplayPages {width:690px; height:400px; position:relative; margin:20px auto;}
#cssplayPages #navigate {padding:0; margin:35px 0 0 0; list-style:none; width:160px; text-align:right; float:left;}
#cssplayPages #navigate li {float:left; width:160px; margin:0 0 5px 0;}
#cssplayPages #navigate li a {display:block; width:140px; padding:0 10px; background:#ddd; font:bold 13px/35px arial, sans-serif; text-decoration:none; color:#000; border-radius:5px;
-moz-transition: 0.5s;
-ms-transition: 0.5s;
-o-transition: 0.5s;
-webkit-transition: 0.5s;
transition: 0.5s;
}
#cssplayPages #navigate li a:hover {background:#6cf;}

#cssplayPages #navigate.john a {background:#6cf;}

.targets {display:none;}
#cssplayPages div {position:absolute; width:0; left:190px; top:0; opacity:0; height:0px; overflow:hidden;
-moz-transition: 1.5s;
-ms-transition: 1.5s;
-o-transition: 1.5s;
-webkit-transition: 1.5s;
transition: 1.5s;
}
#cssplayPages div.constable {height:400px; width:500px; opacity:1;}

#cssplayPages div img {float:left; padding:0 10px 10px 0;}
#cssplayPages div h2 {padding:0 0 10px 0; margin:0; font: 24px/24px arial, sans-serif;}
#cssplayPages div p {padding:0 0 10px 0; margin:0; font: 13px/18px arial, sans-serif; text-align:justify;}

#constable:target ~ #navigate .john a {background:#6cf;}
#constable:target ~ .constable {height:400px; width:500px; opacity:1;}

#monet:target ~ #navigate .claude a {background:#6cf;}
#monet:target ~ #navigate .john a {background:#ddd;}
#monet:target ~ #navigate .john a:hover {background:#6cf;}
#monet:target ~ .constable {height:0; width:0; opacity:0;}
#monet:target ~ .monet {height:400px; width:500px; opacity:1;}

#vangogh:target ~ #navigate .vincent a {background:#6cf;}
#vangogh:target ~ #navigate .john a {background:#ddd;}
#vangogh:target ~ #navigate .john a:hover {background:#6cf;}
#vangogh:target ~ .constable {height:0; width:0; opacity:0;}
#vangogh:target ~ .vangogh {height:400px; width:500px; opacity:1;}

#chagall:target ~ #navigate .marc a {background:#6cf;}
#chagall:target ~ #navigate .john a {background:#ddd;}
#chagall:target ~ #navigate .john a:hover {background:#6cf;}
#chagall:target ~ .constable {height:0; width:0; opacity:0;}
#chagall:target ~ .chagall {height:400px; width:500px; opacity:1;}

#picasso:target ~ #navigate .pablo a {background:#6cf;}
#picasso:target ~ #navigate .john a {background:#ddd;}
#picasso:target ~ #navigate .john a:hover {background:#6cf;}
#picasso:target ~ .constable {height:0; width:0; opacity:0;}
#picasso:target ~ .picasso {height:400px; width:500px; opacity:1;}
</style>

</head>
<body>
    <div id="cssplayPages">
    <b class="targets" id="constable"></b>
    <b class="targets" id="monet"></b>
    <b class="targets" id="vangogh"></b>
    <b class="targets" id="chagall"></b>
    <b class="targets" id="picasso"></b>
    <ul id="navigate">
        <li class="john"><a href="#constable" onClick="history.go(1)">John Constable &#9755;</a></li>
        <li class="claude"><a href="#monet" onClick="history.go(1)">Claude Monet &#9755;</a></li>
        <li class="vincent"><a href="#vangogh" onClick="history.go(1)">Vincent Van Gogh &#9755;</a></li>
        <li class="marc"><a href="#chagall" onClick="history.go(1)">Marc Chagall &#9755;</a></li>
        <li class="pablo"><a href="#picasso" onClick="history.go(1)">Pablo Picasso &#9755;</a></li>
    </ul>
    <div class="constable">
        <h2>John Constable</h2>
        <img src="painters/constable2.jpg" alt="The Hay Wain" title="The Hay Wain" />
        <p>Although he showed an early talent for art and began painting his native Suffolk scenery before he left school, his great originality matured slowly.</p>
        <p>He committed himself to a career as an artist only in 1799, when he joined the Royal Academy Schools and it was not until 1829 that he was grudgingly made a full Academician, elected by a majority of only one vote.</p>
        <p>In 1816 he became financially secure on the death of his father and married Maria Bicknell after a seven-year courtship and in the fact of strong opposition from her family. During the 1820s he began to win recognition: The Hay Wain (National Gallery, London, 1821) won a gold medal at the Paris Salon of 1824 and Constable was admired by <a href="http://www.ibiblio.org/wm/paint/auth/delacroix/">Delacroix</a> and Bonington among others.</p>
        <p>His wife died in 1828, however, and the remaining years of his life were clouded by despondency.</p>
        <p>This text is an excerpt from <a href="http://www.ibiblio.org/wm/paint/auth/constable/">The&nbsp;WebMuseum,&nbsp;Paris</a></p>
    </div>
    <div class="monet">
        <h2>Claude Monet</h2>
        <img src="painters/monet2.jpg" alt="Women in the Garden" title="Women in the Garden" />
        <p>His youth was spent in Le Havre, where he first excelled as a caricaturist but was then converted to landscape painting by his early mentor <a href="http://www.ibiblio.org/wm/paint/auth/boudin/">Boudin</a>, from whom he derived his firm predilection for painting out of doors.</p>
        <p>In 1859 he studied in Paris at the Atelier Suisse and formed a friendship with <a href="http://www.ibiblio.org/wm/paint/auth/pissarro/">Pissarro</a>. After two years' military service in Algiers, he returned to Le Havre and met <a href="http://www.ibiblio.org/wm/paint/auth/jongkind/">Jongkind</a>, to whom he said he owed `the definitive education of my eye'.</p>
        <p>He then, in 1862, entered the studio of Gleyre in Paris and there met Renoir, Sisley, and Bazille, with whom he was to form the nucleus of the Impressionist group.</p> 
        <p>Monet's devotion to painting out of doors is illustrated by the famous story concerning one of his most ambitious early works, Women in the Garden (Mus&#233;e d'Orsay, Paris; 1866-67). The picture is about 2.5 meters high and to enable him to paint all of it outside he had a trench dug in the garden so that the canvas could be raised or lowered by pulleys to the height he required.</p>
        <p>This text is an excerpt from <a href="http://www.ibiblio.org/wm/paint/auth/monet/">The&nbsp;WebMuseum,&nbsp;Paris</a></p>
    </div>
    <div class="vangogh">
        <h2>Vincent Van Gogh</h2>
        <img src="painters/vincent2.jpg" alt="The Starry Night" title="The Starry Night" />
        <p>Gogh, Vincent (Willem) van (b. March 30, 1853, Zundert, Neth.--d. July 29, 1890, Auvers-sur-Oise, near Paris), generally considered the greatest Dutch painter and draughtsman after <a href="http://www.ibiblio.org/wm/paint/auth/rembrandt/">Rembrandt</a>.</p>
        <p>With <a href="http://www.ibiblio.org/wm/paint/auth/cezanne/">C&#233;zanne</a> and <a href="http://www.ibiblio.org/wm/paint/auth/gauguin/">Gauguin</a> the greatest of Post-Impressionist artists. He powerfully influenced the current of <a href="http://www.ibiblio.org/wm/paint/glo/expressionism/">Expressionism</a> in modern art. His work, all of it produced during a period of only 10 years, hauntingly conveys through its striking colour, coarse brushwork, and contoured forms the anguish of a mental illness that eventually resulted in suicide. Among his masterpieces are numerous self-portraits and the well-known <a href="http://www.ibiblio.org/wm/paint/auth/gogh/starry-night/">The&nbsp;Starry&nbsp;Night</a> (1889).</p> 
        <p>This text is an excerpt from <a href="http://www.ibiblio.org/wm/paint/auth/gogh/">The&nbsp;WebMuseum,&nbsp;Paris</a></p>
    </div>
    <div class="chagall">
        <h2>Marc Chagall</h2>
        <img src="painters/chagall2.jpg" alt="Adam and Eve" title="Adam and Eve" />
        <p>Russian-born French painter. Born to a humble Jewish family in the ghetto of a large town in White Russia, Chagall passed a childhood steeped in Hasidic culture.</p>
        <p>Very early in life he was encouraged by his mother to follow his vocation and she managed to get him into a St Petersburg art school. Returning to Vitebsk, he became engaged to Bella Rosenfeld (whom he married twelve years later), then, in 1910, set off for Paris, 'the Mecca of art'.</p>
        <p>He was a tenant at La Ruche, where he had Modigliani and Soutine for neighbours. His Slav Expressionism was tinged with the influence of <a href="http://www.artchive.com/artchive/D/daumier.html">Daumier</a>, Jean-Fran&#231;ois Millet, the Nabis and the Fauves.</p>
        <p>He was also influenced by <a href="http://www.artchive.com/artchive/cubism.html">Cubism</a>. Essentially a colourist, Chagall was interested in the Simultaneist vision of Robert Delaunay and the Luminists of the Section d'Or.</p>
    </div>
    <div class="picasso">
        <h2>Pablo Picasso</h2>
        <img src="painters/picasso2.jpg" alt="Girtl in front of mirror" title="Girtl in front of mirror" />
        <p>Pablo Picasso, born in Spain, was a child prodigy who was recognized as such by his art-teacher father, who ably led him along.</p>
        <p>The small Museo de Picasso in Barcelona is devoted primarily to his <a href="http://www.artchive.com/artchive/P/picasso_early.html">early works</a>, which include strikingly realistic renderings of casts of ancient sculpture.</p>
        <p>He was a rebel from the start and, as a teenager, began to frequent the Barcelona cafes where intellectuals gathered.</p>
        <p>He soon went to Paris, the capital of art, and soaked up the works of Manet, Gustave Courbet, and <a href="http://www.artchive.com/artchive/T/toulouse-lautrec.html">Toulouse-Lautrec</a>, whose sketchy style impressed him greatly. Then it was back to Spain, a return to France, and again back to Spain - all in the years 1899 to 1904.</p>
    </div>
</div>

            <p class="info">copyright &copy; stu nicholls - CSS play</p>

        </div> <!-- end info -->

</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T15:03:44.757

这是另一个建议：

```
<style>
    nav ~ div {
        display: none;
    }

    .tab {
        position:fixed;
        top:0;
    }

    :target:not([id="box1"]) ~ .box1 {
        display: none;
    }

    #box1:target ~ nav .box1,
    #box2:target ~ nav .box2,
    #box3:target ~ nav .box3 {
        color:red;
    }

    #box1:target ~ div.box1,
    #box2:target ~ div.box2,
    #box3:target ~ div.box3 {
        display:block;
    }
</style>

<section id="content">
    <div id="box1" class="tab"></div>
    <div id="box2" class="tab"></div>
    <div id="box3" class="tab"></div>
    <nav>
         <a href="#box1" class="box1">box1</a>
         <a href="#box2" class="box2">box2</a>
         <a href="#box2" class="box3">box3</a>
    </nav>
    <div class="box1">
         blah
    </div>
    <div class="box2">
         blah
    </div>
    <div class="box3">
         blah
    </div>
</section> 
```

由于锚是固定的，这应该可以解决问题。它可以跳一次，但以后就不会了。

# batch-file - 批处理文件，用于根据文件名的一部分将文件从一台服务器复制到另一台服务器

> ID：11693446
> 
> 赞同：0
> 
> 时间：2012-07-27T18:18:59.717
> 
> 标签：batch-file

我正在尝试创建一个批处理文件（通过 Windows XP Pro），该文件复制 2 个文件名长度不同的文件（.zpl）。ZPL 文件与标签打印机代码相关。文件名如下：

FillXferDataPBHAMFill###########.zpl
FillFormatsPBHAMFill###########.zpl

磅符号表示与要打印的特定标签/作业相关的数字。这些数字在每个作业中都是相同的。从一份工作到另一份工作，数字的长度各不相同，而且总是在变化。我试图从中提取这些文件的目录包含来自多个位置的 ZPL 文件，但是，我只想要 BHAM 文件。

批处理将从：\Server\C:\Directory1\Directory2\Directory3
复制到：\Server\Directory1\Directory2

不确定这是否会使事情进一步复杂化，但批处理文件将从第三台机器运行。此外，我不需要每次都复制每个文件。每当发送新的打印作业时，主管将运行批处理以在最后 X 时间内复制新的打印作业。X 是分钟。这是我到目前为止...

```
@echo off
SETLOCAL enableExtensions enableDelayedExpansion

SET sourceDir=Server\C:\Directory1\Directory2\Directory3
SET targetDir=Server\Directory1\Directory2

FOR %%a (FillFormatsPBHAM*.bat) DO (
SET "filename=%%a"
SET "folder=%targetDir%"
XCOPY "%%a" !folder!
)

FOR %%b (FillXferDataPBHAM*.bat) DO (
SET "filename=%%b"
SET "folder=%targetDir%"
XCOPY "%%b" !folder!
)

:END 
```

我为一篇冗长的帖子道歉；只是想尽可能彻底。我在飞行中学习这一点，对我的无知如此赤裸裸。预先感谢您的任何帮助！！

审查的 StackOverFlow 材料：[参考](https://stackoverflow.com/questions/11500242/batch-file-to-copy-files-based-on-characters-in-filename)1 、[参考](https://stackoverflow.com/questions/6357046/batch-file-to-copy-files-from-one-server-to-other-adding-remote-directory-to-fil)2——过去一周我一直在到处寻找，这些是迄今为止最有帮助的 2 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:36:14.477

我看到了一些修复或改进 BAT 脚本的方法。

1.  `FOR`命令语法是`FOR %%a IN (*.bat) DO (`

2.  sourcedir 变量已设置`Server\C:\Directory1\Directory2\Directory3`，这不是 Windows 中的正确路径。

3.  您在 FOR 循环和复制命令中都初始化但不使用 %sourcedir% variabe

    您应该使用命令更改当前驱动器和目录`pushd %sourcedir%`，或者在命令中指定它`FOR`。

4.  您的 FOR 循环分配了一个从未使用过的 %filename% 变量，您可以跳过此分配。

5.  您的 FOR 循环分配了一个 %folder% 变量，该变量仅在复制命令中使用，您可以跳过此分配并简单地使用 %targetdir%

6.  但是，只需将所有文件从一个文件夹复制到另一个文件夹，您不需要 FOR 来遍历所有文件，您可能只需正确复制它们即可。

所以，看看这个简单的脚本来帮助你开始吧..

```
SET sourceDir=\\servername\sharename\Directory1\Directory2\Directory3
SET targetDir=\\anotherserver\sharename\Directory1\Directory2
xcopy %sourceDir%\FillFormatsPBHAM*.bat %targetDir%
xcopy %sourceDir%\FillXferDataPBHAM*.bat  %targetDir% 
```

# php - 如何从多复选框数组中的 values = 1 中获取键？

> ID：11693450
> 
> 赞同：0
> 
> 时间：2012-07-27T18:19:16.067
> 
> 标签：php, arrays, implode

在[这个问题](https://stackoverflow.com/questions/11671733/how-to-separate-array-with-commas)中，我学会了如何进行内爆。

但是现在我需要一些更复杂的东西（我认为），在搜索后我尝试了几个内爆选项但没有明确的结果，我再次在这里寻求帮助......

我有一个填充有类别（**Wordpress**）的多复选框。

每个类别名称都有一个类别 ID，复选框的值为 1 表示选中。

因此，这是检查某些类别后示例数组的回声：

```
<?php $categories = of_get_option('check_categories' ); ?>

<?php print_r($categories); ?>

Array ( 
    [13] => 1 
    [7] => 1 
    [6] => 1 
    [23] => 0 
    [12] => 0 
    [5] => 0 
    [11] => 0 
    [22] => 0     
    [3] => 0 
    [14] => 0 
    [1] => 1 
    [17] => 0 
    [10] => 0 
    [18] => 1 
) 
```

如果我做`<?php echo implode(', ',of_get_option('check_categories' )); ?>`

这是结果：`1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1`

好的...但是我不想要这些结果，我需要的是：对于复选框 = 1，我只需要获取类别 ID（键）。在这种情况下，就像这样：`13,7,6,1,18`但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:08:17.613

我刚刚解决了它实际上很简单。

我使用函数 implode 在 array_keys 中进行搜索，以仅选择值为 1 的键：

```
<?php echo implode(', ',array_keys($categoriesblog2, 1)); ?> 
```

最终结果是（女巫是我博客中的类别 ID）：

```
13, 7, 6, 1, 18 
```

# c# - ASP.NET MVC 模型绑定 - JSON 属性和 C# 模型属性的不同名称

> ID：11693455
> 
> 赞同：4
> 
> 时间：2012-07-27T18:19:35.350
> 
> 标签：c#, asp.net-mvc, json

我已将模型类的属性注释如下。

```
[DataMember(Name = "EN")]
public string EmployeeName{ get; set; } 
```

这总体上产生了一个紧凑的 JSON（我正在使用 JSON.NET 序列化程序进行序列化）。

但是，当使用 POST 或 PUT 请求将包含这些较小名称的 JSON 传递给控制器​​时，ASP.NET MVC 模型绑定无法将“EN”JSON 属性正确映射到`EmployeeName`. 它期望`EmployeeName`在 JSON 中。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:29:50.990

你不能开箱即用。您有两种解决方法：在视图模型中重命名属性（毕竟，它是*视图*模型，因此它必须应对您的限制），或者您可以尝试编写自己的，在绑定属性时`ModelBinder`将`DataMember`注释考虑在内。

# python - python 正则表达式：找不到模式

> ID：11693457
> 
> 赞同：1
> 
> 时间：2012-07-27T18:19:40.817
> 
> 标签：python, regex

我有一个模式编译为

```
pattern_strings = ['\xc2d', '\xa0', '\xe7', '\xc3\ufffdd', '\xc2\xa0', '\xc3\xa7', '\xa0\xa0', '\xc2', '\xe9']
join_pattern = '|'.join(pattern_strings)
pattern = re.compile(join_pattern) 
```

然后我在文件中找到模式

```
def find_pattern(path):
    with open(path, 'r') as f:
        for line in f:
            print line
            found = pattern.search(line)
            if found:
                print dir(found)
                logging.info('found - ' + found) 
```

我作为`path`文件的输入是

```
\xc2d 
d\xa0 
\xe7 
\xc3\ufffdd 
\xc3\ufffdd 
\xc2\xa0 
\xc3\xa7 
\xa0\xa0 
'619d813\xa03697' 
```

当我运行这个程序时，什么也没有发生。

我无法捕捉到这些模式，我在这里做错了什么？

**期望的输出** ——每一行，因为每一行都有一个或另一个匹配模式

**更新**

将正则表达式更改为

```
pattern_strings = ['\\xc2d', '\\xa0', '\\xe7', '\\xc3\\ufffdd', '\\xc2\\xa0', '\\xc3\\xa7', '\\xa0\\xa0', '\\xc2', '\\xe9'] 
```

还是一样，没有输出

**更新**

在制作正则表达式后

```
pattern_strings = ['\\xc2d', '\\xa0', '\\xe7', '\\xc3\\ufffdd', '\\xc2\\xa0', '\\xc3\\xa7', '\\xa0\\xa0', '\\xc2', '\\xe9']
join_pattern = '[' + '|'.join(pattern_strings) + ']'
pattern = re.compile(join_pattern) 
```

事情开始起作用了，但部分地，仍然没有捕捉到的模式是为了线

```
\xc2\xa0 
\xc3\xa7 
\xa0\xa0 
```

我的模式字符串是`['\\xc2\\xa0', '\\xc3\\xa7', '\\xa0\\xa0']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:24:12.640

`r"\xa0"`使用或作为转义搜索模式中的 \`"\\xa0"`

做这个 ....

```
 ['\\xc2d', '\\xa0', '\\xe7', '\\xc3\\ufffdd', '\\xc2\\xa0', '\\xc3\\xa7', '\\xa0\\xa0', '\\xc2', '\\xe9'] 
```

就像每个人都说的那样，除了你也听过的那个人……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:24:01.023

您的文件是否实际上包含`\xc2d`--- 即五个字符：反斜杠后跟 c，然后是 2，然后是 d？如果是这样，您的正则表达式将不匹配它。您的每个正则表达式都将匹配一个或两个具有特定字符代码的字符。如果你想匹配`\xc2d`你的正则表达式需要的字符串`\\xc2d`。

# css - CSS 后代选择器

> ID：11693459
> 
> 赞同：0
> 
> 时间：2012-07-27T18:19:47.127
> 
> 标签：css, css-selectors

我想知道这两行之间的区别：

```
p.intro a{color=# ff99ff;}
p .intro a{color=# ff99ff;} 
```

`p`在第一个示例中， and之间没有空格`.intro`，而在第二个示例中，它们之间有空格。

我想用例子来解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:22:56.247

第一个是赋予 p 项目的类。

```
<p class="intro">
    <a href="#">Item</a>
</p> 
```

第二个是赋予 p 标签的孩子的类。

```
<p>
    <span class="intro">
        <a href="#">Item</a>
    </span>
</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:23:59.243

第一条规则是

```
<p class="intro"><a href="#">some</a></p> 
```

二是为了

```
<p><span class="intro"><a href="#">some</a></span></p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:25:44.563

好的，首先`p.intro a { color: #ff99ff; }`

```
<p class="intro">This <a>link</a> is colored #ff99ff.</p>

<p>But <a>this one</a> is not.</p> 
```

a中具有该类的任何`a`标签都会被着色。`p``intro`

然后`p .intro a { color: #ff99ff; }`

```
<p class="intro">This <a>link</a> is colored normally.</p>

<p>And so is <a>this one</a>, but <span class="intro"><a>this one</a> is colored #ff99ff.</span></p>

<div>Also, <span class="intro"><a>this link</a></span> doesn't get colored either.</div> 
```

在这里，只有在具有类的*任何东西*`a`中的标签，它本身在 some中，才会被着色。*`intro``p`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:22:50.877

第一个将影响作为具有 class 的标签`a`的后代的所有标签。`p``intro`

第二个将影响所有`a`标签，这些标签既是具有类`intro`AND 的元素（任何）的后代，同时也是`p`标签的后代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:23:36.127

```
p.intro a 
```

这发现了所有`<a>`的 体面`<p class="intro">`。

```
p .intro a 
```

这会找到所有`<a>`属于 a 的后代的类的任何元素的`intro`后代`<p>`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T18:24:03.657

第一种情况将选择所有嵌套在具有“intro”类的 P 标记下方某处的 A 标记。

```
<p class="intro"><div><a>This is selected</a></div></p> 
```

第二种情况将选择嵌套在任何类型的 DOM 元素下方某处的所有 A 标记，这些元素具有“intro”类，而“intro”类又嵌套在 a P 标记中的某处。

```
<p><div><div class="intro"><div><a>This is selected</a></div></div></div></p> 
```

请注意，嵌套元素不必直接位于选择器中先前元素的下方。它们只需要嵌套在选择器中前面的项目中的某个位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T18:30:53.860

```
p.intro a{
  color=# ff99ff; 
} 
```

这将影响`<a>`内部示例：

```
<p class="intro">
    <a href="#">one</a>
</p> 
```

和

```
p .intro a{
  color=# ff99ff;
} 
```

这将影响`<a>`在里面的类`intro`里面`<p>`

例子：

```
<p>
    <span class="intro">
        <a href="#">one</a>
    </span>
</p> 
```*

# facebook-apps - 重新激活 Facebook 应用程序

> ID：11693462
> 
> 赞同：0
> 
> 时间：2012-07-27T18:20:06.323
> 
> 标签：facebook-apps

我想知道是否可以重新激活之前禁用的 Facebook 应用程序。

这就是发生的事情：

我们创建了一个相互连接的 Facebook 应用程序和一个 iPhone 应用程序。在将我们的游戏发布到 App Store 后，我们的一位程序员不小心从 Facebook 上删除了该应用程序。现在玩家会看到一条消息，说 Facebook 应用程序不存在。

我们知道这可能是不可能的，但仍然想问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:46:43.887

我在 Facebook 的平台团队工作。

不幸的是，没有标准的方法来做到这一点，因为这不是经常发生的情况。但是，我可以想象这会是多么痛苦。如果您可以向我提供以下任一信息 - 应用名称空间、应用的画布/连接 URL 或应用 ID，我们或许可以提供帮助。

# android - 尝试使用 db.execSQL(DATABASE_CREATE) 创建数据库时出现 NullPointerException

> ID：11693470
> 
> 赞同：0
> 
> 时间：2012-07-27T18:20:45.667
> 
> 标签：android, sqlite, nullpointerexception

我尝试了多个实验，并意识到我`NullPointerException`在尝试执行 SQL 查询时遇到了问题。我的完整查询是：

```
create table transactiontable(_id integer primary key autoincrement, name text not null, reason text not null, money text not null ); 
```

关于我哪里出错的建议？堆栈跟踪是：

```
Caused by: java.lang.NullPointerException
at com.example.startandroid.DBAdapter$DatabaseHelper.<init>(DBAdapter.java:110)
at com.example.startandroid.DBAdapter.open(DBAdapter.java:43)
at com.example.startandroid.MainActivity.onButtonClick(MainActivity.java:34)
Not sure what is the issue. 
```

我的 SQL 适配器类是：

```
public class DBAdapter {

private static final String DATABASE_NAME = "transaction.db";
private static final String DATABASE_TABLE = "transactiontable";
private static final int    DATABASE_VERSION = 1;

public static final String KEY_ID   = "_id";
public static final String KEY_NAME = "name";
public static final String KEY_REASON = "reason";
public static final String KEY_MONEY = "money";

private static final String DATABASE_CREATE = "create table " 
        + DATABASE_TABLE 
        + "("
        + KEY_ID + " integer primary key autoincrement, "
        + KEY_NAME + " text not null,  " 
        + KEY_REASON + " text not null, "
        + KEY_MONEY + " text not null "
        + ");";

private final Context context;

private DatabaseHelper DBHelper;
private static SQLiteDatabase db;

public DBAdapter(Context context)
{
    this.context = context;
}

// Open the database
public DBAdapter open() throws SQLException
{
    DBHelper = new DatabaseHelper(context);
    if (DBHelper != null )
        db = DBHelper.getWritableDatabase();
    return this;
}

// Close the database
public void close()
{
    DBHelper.close();
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) 
    {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
    }
}
} 
```

我使用代码调用这个类的函数：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    db = new DBAdapter(this);
    Log.e(TAG, "OnCreate is run");
    myIntent = new Intent(MainActivity.this, FrameActivity.class);
}

public void onButtonClick(View v)
{
    try
    {
        Log.e(TAG, "OnButtonClick starts");
        if (db != null)
        {
            db.open();
            db.close();
        }
    }
    catch(SQLException e)
    {
        e.printStackTrace();
    }
    MainActivity.this.startActivity(myIntent);
    finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:27:03.423

`db``null`在`DatabaseHelper`. _ 移动线：

```
db.execSQL(DATABASE_CREATE); 
```

在`onCreate`方法中`DatabaseHelper`：

```
@Override
public void onCreate(SQLiteDatabase arg0) {
    arg0.execSQL(DATABASE_CREATE);
} 
```

# javascript - 如果选择了某个值，则 jquery 禁用项目选项

> ID：11693479
> 
> 赞同：0
> 
> 时间：2012-07-27T18:21:03.383
> 
> 标签：javascript, jquery, jquery-selectors

我遇到了一个 jquery 问题。如果所选值为“interestingValue”，我实际上想禁用所有（除父项之外的所有其他项目）

```
 <select name="menufoo" id="menufoo" class="menufooClass">
      <option value="interestingValue">bar foo</option>
      <option value="foo1">foo abc1</option>
      <option value="bar1">foo abc1</option>
    </select>

    <select name="menufoo2" id="menufoo2" class="menufooClass2">
      <option value="interestingValue2">bar foo2</option>
      <option value="foo2">foo abc2</option>
      <option value="bar2">foo abc2</option>
    </select> 
```

例如：如果我们从我们得到的第一个菜单中选择“interestingValue”

```
 <select name="menufoo" id="menufoo" class="menufooClass">
      <option value="interestingValue">bar foo</option>
      <option value="foo1">foo abc1</option>
      <option value="bar1">foo abc1</option>
    </select>

    <select name="menufoo2" id="menufoo2" class="menufooClass2">
      <option value="interestingValue2" disabled="disabled">bar foo2</option>
      <option value="foo2" disabled="disabled">foo abc2</option>
      <option value="bar2" disabled="disabled">foo abc2</option>
    </select> 
```

例如：如果我们从第二个菜单中选择“interestingValue2”，我们会得到

```
 <select name="menufoo" id="menufoo" class="menufooClass">
      <option value="interestingValue" disabled="disabled">bar foo</option>
      <option value="foo1" disabled="disabled">foo abc1</option>
      <option value="bar1" disabled="disabled">foo abc1</option>
    </select>

    <select name="menufoo2" id="menufoo2" class="menufooClass2">
      <option value="interestingValue2">bar foo2</option>
      <option value="foo2">foo abc2</option>
      <option value="bar2">foo abc2</option>
    </select> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:27:13.937

如果您的选择标签是兄弟姐妹，您可以尝试：

```
$('select').change(function(){
  if (this.selectedIndex == 0) {
     $(this).siblings('select').find('option').prop('disabled', true)
  }
}) 
```

[演示](http://jsfiddle.net/8K2jA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:25:43.157

我不确定我明白了，但是是这样的：

```
$('[id^=menufoo]').on('change', function() {
    if (this.value.indexOf('interestingValue') != -1 ) {
        $('[id^=menufoo]').not(this).find('option').prop('disabled', true);
    }else{
        $('[id^=menufoo]').find('option').prop('disabled', false);
    }
});​ 
```

[小提琴](http://jsfiddle.net/uEJAQ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:26:55.730

您可以将 onchange 事件附加到两个选择项，并检查新的选择值是否等同于第一个菜单的interestingValue 和第二个菜单的interestingValue2。您可以使用 .prop() 禁用此功能。

你可以这样做：

```
$("#menufoo").bind("change", function(event){

  $("#menufoo2").find("option").prop("disabled", ($(this).val() == "interestingValue"));

});

$("#menufoo2").bind("change", function(event){
  $("#menufoo").find("option").prop("disabled", ($(this).val() == "interestingValue2"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:40:25.487

干得好

```
<script src="jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("#menufoo").change(function (){
    if($("#menufoo option:selected").val()=="interestingValue")
        $('.menufooClass2 option').attr('disabled','disabled');
  });
    $("#menufoo2").change(function (){
    if($("#menufoo2 option:selected").val()=="interestingValue2")
        $('.menufooClass option').attr('disabled','disabled');
  });

});
</script>   

   <select name="menufoo" id="menufoo" class="menufooClass">
      <option value="interestingValue">bar foo</option>
      <option value="foo1">foo abc1</option>
      <option value="bar1">foo abc1</option>
    </select>

        <select name="menufoo2" id="menufoo2" class="menufooClass2">
      <option value="interestingValue2">bar foo2</option>
      <option value="foo2">foo abc2</option>
      <option value="bar2">foo abc2</option>
    </select> 
```

# php - PHP char 类型加密

> ID：11693487
> 
> 赞同：2
> 
> 时间：2012-07-27T18:21:24.897
> 
> 标签：php, variables, char

在完成我的网站 java 登录程序和页面时，我决定通过 URL 将加密值传递给验证页面，作为额外的安全线。我有一个很久以前写的加密算法，我认识的人还没有破解过，所以我想使用它。但我需要字符才能正常工作。据我所知，PHP 没有 char 类型。所以我的问题是首先，它们是 char 类型，其次，是否可以将其转换为 int？旁注：登录是一个签名的小程序，因此所有页面都使用 PHP。编辑：忘了提到这只是加密的基础，我将添加到算法中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:26:18.177

您可以通过 引用字符串中的`$str`字符`$str[$index]`。

该`ord`函数将返回一个字符的整数值：

```
$val = ord($str[$index]); 
```

该`chr`函数的作用相反：

```
$char = chr($val);//$char == $str[$index] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:24:19.403

您可以`$s`通过参考来逐个字符地访问字符串`$s[$i]`。`ord($s)`获取一个字符的ASCII值，`chr($n)`获取一个ASCII值对应的字符。

**除非您知道自己在做什么，否则**不要使用自己的密码原语！**使用 PHP 自己的已知强算法实现（例如 AES-256）。仅仅因为*您*认识的人没有破解您的自定义算法并不意味着其他人不能。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:24:40.900

PHP中没有`char`类型，并且`string`类型不容易转换为`int`. PHP 处理动态类型杂耍，因此不使用类型声明。

在旁注中，“还没有人破解[我的加密算法]”并不一定意味着将来有人不会。如果您要加密重要的东西，请使用标准的加密算法——它们之所以成为标准是有原因的。**

# fluent-nhibernate - Fluent Nhibernate：在 BuildSchema 或 UpdateSchema 期间忽略接口/抽象类

> ID：11693497
> 
> 赞同：0
> 
> 时间：2012-07-27T18:21:51.900
> 
> 标签：fluent-nhibernate

**编辑**

我有一个接口，我想以此为基础创建一些类。当我转到 BuildSchema（或 UpdateSchema）时，Nhibernate 会为接口创建一个表。我以为我找到了一种解决方法，如下所示：

接口和类：

```
public interface ILevel
{
    int Id { get; set; }
    string Name { get; set; }
}
public abstract class Level : ILevel
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}
public class LevelOne : Level { }
public class LevelTwo : Level { } 
```

映射：

```
public class LevelMap : ClassMap<ILevel>
{
    public LevelMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
    }
}
public class LevelOneMap : SubclassMap<LevelOne>
{
}
public class LevelTwoMap : SubclassMap<LevelTwo>
{
} 
```

**这不起作用**（我做了另一个 UpdateSchema 并且出现了讨厌的 ILevel 表）。

是否有我不知道完全忽略接口/抽象类的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:10:54.290

对于单独的表 LevelOne 和 LevelTwo，它们都具有 Level/ILevel 的属性，使用 Level 的通用映射：

```
public abstract class LevelMap<T> : ClassMap<T>
    where T : Level  // ILevel should work, too
{
    protected LevelMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
    }
}

public class LevelOneMap : LevelMap<LevelOne>
{
}

public class LevelTwoMap : LevelMap<LevelTwo>
{
} 
```

您提供了两个单独的类映射，而无需告诉 Fluent 真正的类层次结构。

# asp.net - 添加控件时如何不覆盖表格单元格文本

> ID：11693498
> 
> 赞同：0
> 
> 时间：2012-07-27T18:21:53.033
> 
> 标签：asp.net, controls

我想在服务器端的表格单元格中添加一个链接按钮控件。该单元格中还有文本，当我添加它时，它会被控件覆盖。如何将控件添加到单元格并保留文本？

```
 //Create a table cell and add text to it
        TableCell commentCell = new TableCell();
        commentCell.Text = "Text to remain in the cell."

        //Create a linkbtn and add it to the table cell
        LinkButton lbtnComments = new LinkButton();
        lbtnComments.Text = "...";
        lbtnComments.Style["float"] = "right";
        commentCell.Controls.Add(lbtnComments); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:27:00.227

[`Label`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.aspx)我会在你之前添加一个`LinkButton`：

```
TableCell commentCell = new TableCell();
Label lblComment = new Label();
lblComment.Text = "Text to remain in the cell."
commentCell.Controls.Add(lblComment);
LinkButton lbtnComments = new LinkButton();
commentCell.Controls.Add(lbtnComments); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T14:30:22.097

将您的文本添加到 LiteralControl ：

```
 //Create a table cell and add text to it
    TableCell commentCell = new TableCell();
    commentCell.Controls.Add(new LiteralControl("Text to remain in the cell.");

    //Create a linkbtn and add it to the table cell
    LinkButton lbtnComments = new LinkButton();
    lbtnComments.Text = "...";
    lbtnComments.Style["float"] = "right";
    commentCell.Controls.Add(lbtnComments); 
```

# machine-learning - 如何摆脱“粘性”状态？

> ID：11693500
> 
> 赞同：5
> 
> 时间：2012-07-27T18:21:59.233
> 
> 标签：machine-learning, neural-network, reinforcement-learning

**问题：**

我已经训练了一个代理在网格世界中执行一项简单的任务（在不撞到障碍物的情况下到达网格顶部），但似乎总是会出现以下情况。它发现自己处于状态空间的一个容易的部分（没有障碍物），因此不断地得到一个强大的正强化信号。然后当它确实发现自己是状态空间的困难部分（楔入两个障碍物旁边）时，它只是选择与以前相同的动作，没有效果（它上升并撞到障碍物）。最终，该值的 Q 值与负奖励匹配，但此时其他动作的 Q 值更低，因为在状态空间的简单部分无用，因此错误信号降至零，并且错误动作仍然始终存在选择。

我怎样才能防止这种情况发生？我想到了一些解决方案，但似乎没有一个可行：

*   *使用始终需要大量探索的策略。*由于障碍物需要大约 5 个动作才能绕过，因此时不时地进行一个随机动作似乎是无效的。
*   *使奖励函数在重复时使不良行为变得更糟。*这使得奖励函数破坏了马尔可夫属性。也许这不是一件坏事，但我根本不知道。
*   *只奖励完成任务的代理。*该任务需要完成一千多个动作，因此训练信号太弱了。

**关于任务的一些背景：**

因此，我制作了一个小测试平台来尝试 RL 算法——类似于 Sutton 书中描述的更复杂的网格世界版本。世界是一个大的二进制网格（300 x 1000），由 1 在 0 的背景上以随机大小的矩形形式填充。一个 1 的带环绕着世界的边缘。

一个代理在这个世界中占据一个空间，周围只有一个固定的窗口（41 x 41 窗口，代理位于中心）。代理的动作包括在四个基本方向中的任何一个上移动 1 个空间。代理只能通过标记为 0 的空间，1 是不可通过的。

当前要在此环境中执行的任务是从底部的随机位置开始使其到达网格世界的顶部。成功向上移动可获得+1的奖励。任何会撞到障碍物或世界边缘的动作都会获得 -1 的奖励。所有其他状态都获得 0 的奖励。

该代理使用带有神经网络值函数逼近器的基本 SARSA 算法（如 Sutton 书中所讨论的）。对于政策决策，我尝试了 e-greedy 和 softmax。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:11:29.653

教授此类任务的典型方法是每一步都给代理一个负奖励，然后在完成时给予大笔奖励。您可以通过使用资格跟踪并将代理放置在靠近目标的位置，然后靠近它已探索的区域来补偿长时间的延迟。

# php - 此 JavaScript 函数单独工作，但不能与其他 JavaScript 函数一起工作

> ID：11693504
> 
> 赞同：2
> 
> 时间：2012-07-27T18:22:06.090
> 
> 标签：php, javascript, jquery

我有这个 javascript：

```
<script type="text/javascript">
$(document).ready(function($) {
        $('#target-share ul li').click(function() {
            $('input#shareto').val($(this).data('val'));
        });
    });
</script> 
```

它真的像我预期的那样有效。但是当我添加另一个 javascript 来做下拉动画时，那个 javascript 不再工作了：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#select-shareto a").click(function () {
        var newClass = $(this).find("span").attr('class');
        var newText = $(this).find("span").text();
        $("#select-shareto a").removeClass("selected");
        $(this).addClass("selected");
        $("a#to-chosen span").removeClass().addClass(newClass).text(newText);
        $("a#to-chosen").toggleClass("opened");
        $('#select-shareto').slideToggle('fast');
        return false;
    });

    $('a#to-chosen').click(function() {
        $(this).toggleClass("opened");
        $('#select-shareto').slideToggle('fast', function() {
            // Animation complete.
        });
    });
});
</script> 
```

那些 javascript 实际上影响了这个 HTML 代码：

```
<div id="target-share">
<a href="#" title="" id="to-chosen" class="default"><span class="to-admin">Admin</span></a>
<ul id="select-shareto">
<li data-val="0-1">
<a href="#" title="" class="selected"><span class="to-Finance">Finance</span></a>
</li>
<li data-val="1-1">
<a href="#" title=""><span class="to-admin-private">Admin Private</span></a>
</li>
<li data-val="1-0">
<a href="#" title=""><span class="to-ceo">CEO</span></a>
</li>
<li data-val="0-0">
<a href="#" title=""><span class="to-ceo-private">CEO Private</span></a>
</li>                                    
</ul>
<input id="shareto" type="text" value="0-1" name="shareto">
</div><!-- #target-share --> 
```

知道如何让这 2 个 javascript 并排工作吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:27:28.823

```
$("#select-shareto a").click(function () {
    ...
    return false;
}); 
```

`click`因此，您停止了此事件的进一步传播 -将不再调用此事件的其他处理程序。相反，使用这个：

```
$("#select-shareto a").click(function (e) {
    e.preventDefault();
    ...
}); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/G8UXy/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:26:22.300

我假设您尝试在评论动画完成的位置插入代码，如果是这样，您只需要放置代码：`$('#target-share ul li').click(function() { $('input#shareto').val($(this).data('val'));});`

您的代码已经包含在 a 中`$(document).ready`，因此您不需要另一个。

# hibernate - 错误的列类型 - 找到：串行，预期：int8

> ID：11693509
> 
> 赞同：5
> 
> 时间：2012-07-27T18:22:16.080
> 
> 标签：hibernate, postgresql, grails

我正在编写我的第一个 Grails 应用程序，并使用 Grails 应用程序生成器反转了我现有的 Postgresql 模式。（GRAG）当我运行应用程序时，我收到错误：

> 调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：public.event_staff 中列 event_staff_id 的列类型错误。找到：串行，预期：int8

我猜这是因为“串行”不是 Postgresql 中的*真实*类型，而更多的是与序列相关的自动递增整数值的别名。我想有一种干净的方法可以解决这个问题，但是没有使用 Hibernate 的经验，我不确定前进的最佳方法。

这是有问题的课程：

```
 class EventStaff {
        static mapping = {
             table 'event_staff'
             // version is set to false, because this 
             // isn't available by default for legacy databases
             version false
             id generator:'identity', column:'event_staff_id', name: 'eventStaffId'
             staffMemberIdStaffMember column:'staff_member_id'
             gameIdGame column:'game_id'
        }

        Long eventStaffId
        Boolean shouldNotify
        Date created
        Date modified
        // Relation
        StaffMember staffMemberIdStaffMember
        // Relation
        Game gameIdGame

        static constraints = {
            eventStaffId()
            shouldNotify()
            created()
            modified()
            staffMemberIdStaffMember()
            gameIdGame()
        }

        String toString() {
            return "${eventStaffId}" 
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T20:53:28.337

Hibernate 无法将“串行”转换为有效的 Java 类型。这是一个[老问题](https://hibernate.onjira.com/browse/HHH-6179)。如果可以的话，将您的数据库 id 类型更改为 bigint 或 bigserial 而不是串行，就像[这个人](https://forum.hibernate.org/viewtopic.php?f=1&t=993712)所做的那样，它可能会解决您的问题。如果没有，请尝试使用以下命令指定列的类型：

```
id generator:'identity', column:'event_staff_id', 
name: 'eventStaffId', type: 'serial' //though I don't know if 'serial' will work in this dialect. 
```

您仍然可以尝试将您的 id 类型更改为 Integer 而不是 Long。

分别尝试这些技巧。

# c++ - 虚拟继承与非默认构造函数

> ID：11693512
> 
> 赞同：8
> 
> 时间：2012-07-27T18:22:32.797
> 
> 标签：c++, constructor, language-lawyer, virtual-inheritance

此代码被（至少）MSVC、ICC 和 GCC 拒绝：

```
class A {
public:
    A( int ) {  }
};

class B: virtual public A {
public:
    //B(): A( -1 ) {  } // uncomment to make it compilable
    virtual void do_something() = 0;
};

class C: public B {
public:
    C(): A( 1 ) {  }
    virtual void do_something() {  }
};

int main() {
    C c;
    return 0;
} 
```

在...的基础上

```
error : no default constructor exists for class "A"
    class B: virtual public A {
                            ^
            detected during implicit generation of "B::B()" at line 14 
```

问题：

1.  如果代码确实无效，那么这*究竟*是如何遵循标准的？AFAICT、10.4/2 和 1.8/4 合在一起意味着 B 不能是最派生类的类型，因此从 12.6.2/10 开始，我们知道 B 永远不能调用 A 的构造函数。（节号适用于 C++11。）

2.  如果代码有效，编译器是否违反了标准，要求存在他们不可能调用的构造函数？请注意，他们不仅想从 B::B() 调用 A::A()，而且还想*在编译 C::C() 时*这样做（双重怪异）。

PS 这最初是在 ICC 论坛上提出的，但由于不限于此编译器（并且没有详细信息），所以在此处发布。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:52:42.860

Clang 将错误显示为：

```
error: call to implicitly-deleted default constructor of 'B'
    C(): A( 1 ) {  }
    ^ 
```

12.1/5 说“如果 [...] 任何 [...] 虚拟基类 [...] 具有类类型 M [...] 和 [... ] M 没有默认构造函数 [...]。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T19:06:19.770

我认为您试图从标准中可以找到的事实中得出一个“定理”，然后您希望标准承认该“定理”的存在。该标准不这样做。它并不努力寻找和合并所有可以从标准文本中推导出来的“定理”。

你的“定理”是完全有效的（除非我遗漏了什么）。你是对的，因为类`B`是抽象的，所以这个类永远不能用作最派生类。这立即意味着该类`B`将永远没有机会构造其虚拟基础`A`。这意味着从技术上讲，`B`编译器不应该关心任何其他虚拟库中`A`或任何其他虚拟库中的适当构造函数的可用性和/或可访问性。

但是该标准根本没有建立这种联系，也不愿意建立这种联系。它不以任何特殊方式处理抽象类的构造函数。对此类构造函数的要求与对非抽象类的要求相同。

您可以致电 try 向标准委员会提出可能的改进建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:58:04.213

看起来 12.6.2/4 禁止我这样做：

> 如果给定的非静态数据成员或基类不是由 mem-initializer-id 命名的（包括由于构造函数没有 ctor-initializer 而没有 mem-initializer-list 的情况），则
> 
> — 如果实体是（可能是 cv 限定的）类类型（或其数组）或基类的非静态数据成员，并且实体类是非 POD 类，则实体是默认初始化的 (8.5).. .

在我看来，无论类是虚拟基类，`B`' 的默认构造函数仍然由编译器合成，并且这样的默认构造函数不知道如何构造它的`A`基类（“实体是默认初始化的（8.5） ”）。

# grails - 春季社交 ProviderSignInController 注册网址

> ID：11693514
> 
> 赞同：1
> 
> 时间：2012-07-27T18:22:46.870
> 
> 标签：grails, grails-plugin, spring-social

我正在尝试使用 Spring 社交核心插件编写一个 grails 插件。我得到提供程序弹出窗口，在我输入用户名和密码后它给了我 404。当我调试代码时，它进入 SpringSocialProviderSignInController handleSignIn() 方法并且它没有得到任何注册 url。在 grails 插件中，这是代码片段

```
if (userIds.size() == 0) {
  if (log.isDebugEnabled()) {
    log.debug("No user found in the repository, creating a new one...")
  }
  ProviderSignInAttempt signInAttempt = new ProviderSignInAttempt(connection, connectionFactoryLocator, usersConnectionRepository)
  request.setAttribute(ProviderSignInAttempt.SESSION_ATTRIBUTE, signInAttempt, RequestAttributes.SCOPE_SESSION)
  //TODO: Document this setting
  result = request.session.ss_oauth_redirect_on_signIn_attempt ?: config.page.handleSignIn
} 
```

我看到即使在常规的春季社交网络 jar 中，这也有类似的逻辑。除了在 web 中，signupUrl 上有一个默认设置。我尝试在 config.page.handleSignIn 中给出相同的值（/signup），但没有帮助。

```
if (userIds.size() == 0) {
        ProviderSignInAttempt signInAttempt = new ProviderSignInAttempt(connection, connectionFactoryLocator, usersConnectionRepository);
        request.setAttribute(ProviderSignInAttempt.SESSION_ATTRIBUTE, signInAttempt, RequestAttributes.SCOPE_SESSION);
        return redirect(signUpUrl);
    } 
```

一般来说，我试图了解这个 signUpUrl 的作用。在此之后我无法更进一步。是否必须提供signUpUrl？我的理解是否定的。

在春季社交论坛上问过同样的问题，但没有得到任何回应。在这里碰碰运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:27:06.303

在春季论坛中找到有意义的答案：[春季论坛链接](http://forum.springsource.org/showthread.php?128796-ProviderSignInController-signupurl)

# android - 我无法在 Sqlite Android 应用程序中插入（blob 数据）

> ID：11693523
> 
> 赞同：0
> 
> 时间：2012-07-27T18:23:04.620
> 
> 标签：android, database, sqlite

我在 sqlite 中设计一个数据库我按照本[指南](http://www.vogella.com/articles/AndroidSQLite/article.html)对具有三个元素（id、文本、blob 数据）的表进行 db 访问，bolb 是一个字节数组，但不幸的是，当使用此代码时：

```
long insertId = database.insert(MySQLiteHelper.TABLE_COMMENTS, null, values); 
```

`insertId`总是返回-1，然后有一个我不明白的错误！

表是这样的：

```
private static final String DATABASE_CREATE = "create table "
        + TABLE_COMMENTS + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_COMMENT
        + " text not null,"+ MOVE + "blob" + ");"; 
```

允许我将文件中的 txt 文件转换为要插入表中的 blob 字节的算法是：( txt --> byte [] array --> blob )

```
public byte[] ConvertByte () 
{
    byte[] b = new byte[1024];
    int bytesRead =0;
    byte[] dataToSave = null;
    ByteArrayOutputStream bos = null;
    try {
        InputStream is = new FileInputStream(FileName); 
        bos = new ByteArrayOutputStream();
        while ((bytesRead = is.read(b)) != -1) {
          bos.write(b, 0, bytesRead);
        }
      byte[] bytes = bos.toByteArray();
      dataToSave = Base64.encode(bytes, Base64.DEFAULT);
    } catch (IOException e) {
         Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
 return dataToSave;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:44:06.447

您是否考虑过将纯`String`文本作为 blob 数据插入的选项？

该`Base64.encode()`函数有一个返回`String`值的替代函数。我还将 blob 数据插入到表中，并且我使用了这种替代方法，它就像一个魅力。

# ios - 如何在首次应用加载时隐藏主弹出视图？

> ID：11693524
> 
> 赞同：0
> 
> 时间：2012-07-27T18:23:08.863
> 
> 标签：ios, ipad, uisplitviewcontroller, uipopovercontroller

我有很好的辅助功能，可以让我显示/隐藏主弹出视图控制器。但是，我一生都无法弄清楚如何在初始化时隐藏它，以便在应用程序首次启动时隐藏它。

我已经尝试了几件事（例如试图从 viewLoaded 或 viewDidAppear 中解散），但这些会引发奇怪的错误（例如，滑块计数过多......等等）。

现在我开始相信必须有一种更简单、正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:53:36.497

您是否要隐藏 splitviewController 主弹出框？哪个方向会使这个问题更具体。我假设您实际上是在尝试在横向中隐藏 SplitView MasterPopover（因为它应该已经隐藏在纵向中）。

这样做：你`detailViewController`应该有`UISplitViewControllerDelegate`. 只需将此代码放入：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation{
    return YES;
} 
```

这将使 popoverView 在应用程序启动时隐藏。请让我知道这对你有没有用。

# javascript - 萤火虫控制台不做吊装

> ID：11693526
> 
> 赞同：3
> 
> 时间：2012-07-27T18:23:12.727
> 
> 标签：javascript, firebug, hoisting

```
console.log(a());
function a(){
    console.log("hello");
} 
```

从上面的代码中，我希望`"hello"`（和一些`undefined`）能够登录控制台。但萤火虫给

```
ReferenceError: a is not defined 
```

所以firebug不做吊装？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:47:28.630

问题的原因是

> 在子块内声明时，函数不会提升。

由[MDN](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet#function_oddities)（这里涵盖的很多内容不是标准的 ECMAScript）。

比较以下片段：

```
alert(c());
function c(){return 42;} 
```

和

```
{
    alert(c());
    function c(){return 42;}
} 
```

第一个将警告 42，而第二个将 throw `ReferenceError`。

下面是在玩 Firebug 时执行的代码： ![Firebug 的工具提示](../Images/4e69e407b4214088e64d4d53e153e691.png)

```
data;
with(_FirebugCommandLine){ // >> block begins
    console.log(a());
    function a(){
        console.log("hello");
    }
} // << block ends 
```

**更新**
观察到的行为似乎是 Firefox javascript 引擎中的一个小故障，因为在 chrome 和 IE9 中没有观察到它，请参阅this [fiddle](http://jsfiddle.net/FZ92S/)。

# java - 确定音频处理中的延迟

> ID：11693527
> 
> 赞同：2
> 
> 时间：2012-07-27T18:23:18.743
> 
> 标签：java, multithreading, audio, midi

我一直致力于在现有音乐软件项目中实现实时音频捕获和分析系统。该系统的目标是在用户按下录音按钮时（或在指定的预备时间后）开始捕获音频，确定用户演唱或演奏的音符，并在乐谱上标记这些音符。我的方法的要点是使用一个线程捕获音频数据块并将它们放入队列中，并使用另一个线程从队列中删除数据并执行分析。

这个方案运作良好，但我无法量化音频捕获开始和 MIDI 支持乐器播放之间的延迟。音频捕获在 MIDI 乐器开始播放之前开始，用户可能会将他或她的演奏与 MIDI 乐器同步。因此，我需要忽略在支持 MIDI 乐器开始播放之前捕获的音频数据，只分析在那之后收集的音频数据。

伴奏曲目的播放由已经存在了很长时间并由其他人维护的代码体处理，因此我希望尽可能避免重构整个程序。音频捕获由 Timer 对象和扩展 TimerTask 的类控制，其实例在称为 Notate 的笨重（约 25k 行）类中创建。顺便说一句，Notate 还保留了处理背景音轨播放的对象的标签。Timer 的 .scheduleAtFixedRate() 方法用于控制音频捕获的周期，TimerTask 通过调用队列 (ArrayBlockingQueue) 上的 .notify() 来通知捕获线程开始。

我计算这两个进程初始化之间时间间隔的策略是从播放开始时的时间戳中减去捕获开始前的时间戳（以毫秒为单位），我将其定义为 .start () 方法在负责 MIDI 支持轨道的 Java Sequencer 对象上调用。然后，我使用结果来确定我希望在此间隔 (n) 期间捕获的音频样本数，并忽略捕获的音频数据数组中的前 n * 2 个字节（n * 2，因为我正在捕获 16-位样本，而数据存储为字节数组……每个样本 2 个字节）。

但是，这种方法并没有给我准确的结果。计算出的偏移量总是比我预期的要小，因此在指定位置开始分析后，音频数据中仍然存在非平凡（不幸地变化）数量的“空白”空间。这会导致程序尝试分析在用户尚未开始与伴奏 MIDI 乐器一起演奏时收集的音频数据，从而在用户乐段的开始处有效地添加休止符（没有音符）并破坏节奏值为所有后续注释计算。

下面是我的音频捕获线程的代码，它还确定了捕获的音频数据数组的延迟和相应的位置偏移。谁能提供有关为什么我的确定延迟的方法无法正常工作的见解？

```
public class CaptureThread extends Thread
{
    public void run()
    {
        //number of bytes to capture before putting data in the queue.
    //determined via the sample rate, tempo, and # of "beats" in 1 "measure"
        int bytesToCapture = (int) ((SAMPLE_RATE * 2.) / (score.getTempo()
                / score.getMetre()[0] / 60.));
    //temporary buffer - will be added to ByteArrayOutputStream upon filling.
        byte tempBuffer[] = new byte[target.getBufferSize() / 5];

        int limit = (int) (bytesToCapture / tempBuffer.length);

        ByteArrayOutputStream outputStream = new ByteArrayOutputStream(bytesToCapture);
        int bytesRead;

        try
        { //Loop until stopCapture is set.
            while (!stopCapture)
            { //first, wait for notification from TimerTask
                synchronized (thisCapture)
                {
                    thisCapture.wait();
                }

                if (!processingStarted)
                { //the time at which audio capture begins
                    startTime = System.currentTimeMillis();
                }

                //start the TargetDataLine, from which audio data is read
                target.start();

                //collect 1 captureInterval's worth of data
                for (int n = 0; n < limit; n++)
                {
                    bytesRead = target.read(tempBuffer, 0, tempBuffer.length);
                    if (bytesRead > 0)
                    {   //Append data to output stream.
                        outputStream.write(tempBuffer, 0, bytesRead);
                    }
                }

                if (!processingStarted)
                {
                    long difference = (midiSynth.getPlaybackStartTime()
                            + score.getCountInTime() * 1000 - startTime);

                    positionOffset = (int) ((difference / 1000.)
                            * SAMPLE_RATE * 2.);

                    if (positionOffset % 2 != 0)
                    { //1 sample = 2 bytes, so positionOffset must be even
                        positionOffset += 1;
                    }
                }
                if (outputStream.size() > 0)
                {   //package data collected in the output stream into a byte array
                    byte[] capturedAudioData = outputStream.toByteArray();
                    //add captured data to the queue for processing
                    processingQueue.add(capturedAudioData);

                    synchronized (processingQueue)
                    {
                        try
                        { //notify the analysis thread that data is in the queue
                            processingQueue.notify();
                        } catch (Exception e)
                        {
                            //handle the error
                        }
                    }

                    outputStream.reset(); //reset the output stream
                }
            }
        } catch (Exception e)
        {
            //handle error
        }
    }
} 
```

我正在研究使用[Mixer](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/Mixer.html)对象来同步接收来自麦克风的数据的[TargetDataLine和处理来自 MIDI 乐器播放的 Line。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/TargetDataLine.html)现在找到处理播放的线路......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-21T05:11:47.803

Google 有一个您可能熟悉的名为 AudioBufferSize 的优秀开源应用程序。我修改了这个应用程序的单向延迟测试——也就是说，用户按下按钮和音频 API 播放声音之间的时间。这是我添加到 AudioBufferSize 以实现此目的的代码。您能否使用这种方法来提供事件与用户感知事件之间的时间增量？

```
final Button latencyButton = (Button) findViewById(R.id.latencyButton);
latencyButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        mLatencyStartTime = getCurrentTime();
        latencyButton.setEnabled(false);

        // Do the latency calculation, play a 440 hz sound for 250 msec
        AudioTrack sound = generateTone(440, 250);              
        sound.setNotificationMarkerPosition(count /2); // Listen for the end of the sample

        sound.setPlaybackPositionUpdateListener(new OnPlaybackPositionUpdateListener() {
            public void onPeriodicNotification(AudioTrack sound) { }
            public void onMarkerReached(AudioTrack sound) {
                // The sound has finished playing, so record the time
                mLatencyStopTime = getCurrentTime();
                diff = mLatencyStopTime - mLatencyStartTime;
                // Update the latency result
                TextView lat = (TextView)findViewById(R.id.latency);
                lat.setText(diff + " ms");
                latencyButton.setEnabled(true);
                logUI("Latency test result= " + diff + " ms");
            }
        });
        sound.play();
    }
}); 
```

有一个对 generateTone 的引用，看起来像这样：

```
private AudioTrack generateTone(double freqHz, int durationMs) {
    int count = (int)(44100.0 * 2.0 * (durationMs / 1000.0)) & ~1;
    short[] samples = new short[count];
    for(int i = 0; i < count; i += 2){
        short sample = (short)(Math.sin(2 * Math.PI * i / (44100.0 / freqHz)) * 0x7FFF);
        samples[i + 0] = sample;
        samples[i + 1] = sample;
    }
    AudioTrack track = new AudioTrack(AudioManager.STREAM_MUSIC, 44100,
    AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT,
    count * (Short.SIZE / 8), AudioTrack.MODE_STATIC);
    track.write(samples, 0, count);
    return track;
} 
```

刚刚意识到，这个问题已经存在多年了。对不起，也许有人会觉得它有用。

# javascript - 无法让 fancybox 完全显示退出按钮或在初始点击时淡出

> ID：11693530
> 
> 赞同：0
> 
> 时间：2012-07-27T18:23:41.003
> 
> 标签：javascript, css, fancybox

我不完全确定什么代码最适合展示，但我遇到的问题不会出现在 firefox/palemoon 中，但它会出现在所有其他主要浏览器中。

问题可以在这里查看：http: [//cyberbytesdesign.com/WIP2/gallery.php](http://cyberbytesdesign.com/WIP2/gallery.php)。在初始页面加载时，单击其中一张照片时，右上角的退出按钮被切断，并且图像周围的阴影不会与添加到图像的任何文本一起显示。

奇怪的是，在更改图像后，它解决了问题，这只是单击第一个图像的问题。我不知道它为什么会这样做，我完全被难住了。

同样，我完全不知道我会发布什么代码，因为我不知道可能会遇到什么错误。我希望更多，以便有人可能以前遇到过这个问题并且他们知道发生了什么。如果您认为您知道任何可能是问题的特定编码，我会在这里提供帮助，但我不知道。

非常感谢，

对不起这个困难的问题/：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:26:01.723

您的 fancybox 具有内联样式`overflow: hidden`. 将其设置为`overflow: visible`或完全删除溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:39:38.173

该`overflow`属性应该通过打开动画回调来更新，但是您的页面有 JavaScript 错误并且可能会停止 JavaScript 代码的执行 -

```
Uncaught SyntaxError: Unexpected token ) modernizr.custom.js:4
Uncaught TypeError: object is not a function custom.js:129 
```

# git - 如何将壁球合并中的更改推送回源分支

> ID：11693537
> 
> 赞同：2
> 
> 时间：2012-07-27T18:24:07.293
> 
> 标签：git, merge

我有一个分支，我想通过 squash 提交合并到另一个分支。在某些情况下，这些新文件具有不需要的前导或尾随空格。如果我在壁球合并期间删除了额外的空间，我如何将这些更改推送到原始分支而无需再次手动进行修复？

目前我正在应用两次更改。有一次当我将合并合并到一个测试分支时。当我再次将原始分支合并到 master 时。

我的工作流程

```
git co staging
git merge origin/feature --squash
git push origin staging 
```

做我的检查，然后跟进

```
git co master
git merge origin/feature --squash
git push origin master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:47:05.483

最好有一个`pre-commit`钩子先删除那些尾随空格，这意味着任何进一步的合并在这方面都不会有任何问题。

参见例如“[让 git 在提交之前自动删除尾随空格](https://stackoverflow.com/questions/591923/make-git-automatically-remove-trailing-whitespace-before-committing)”。

* * *

对于您现有的提交，您可以将 a`git reset --soft`与 a 结合使用，以便在将其合并到/之前`git commit --all --amend`将该 post-commit 钩子应用于您的最后一次提交。`feature``staging``master`

请参阅“ [?](https://stackoverflow.com/questions/5203535/practical-uses-of-git-reset-soft)[的实际用途`git reset --soft`](https://stackoverflow.com/questions/5203535/practical-uses-of-git-reset-soft)”。

# javascript - JS 运行时上下文模式的最佳实践

> ID：11693541
> 
> 赞同：0
> 
> 时间：2012-07-27T18:24:14.547
> 
> 标签：javascript, jquery, stack, mode

我有一个基于 apache 的 Web 应用程序。php、js 和 jquery。一切正常。

在客户端，有一个 JS/jquery 中的小库，提供一些通用的列表处理方法。过去，我使用回调来处理那些方法必须略有不同的少数问题。这样我就可以为应用程序的不同部分重用列表处理、对话框处理等方法。然而，最近我在进入图书馆时不得不处理的回调数量增加了，我正在尝试重新设计：

我没有将所有回调指定为函数参数，而是在库中创建了一个中央目录对象。应用程序的每个模块在初始化时将其自己的回调变体注册到该目录中。在运行时，这些方法会在该目录中查找所需的回调，而不是期望在其参数列表中指定它。这清理了很多东西。

但是，我仍然无法摆脱一件事：我需要一个参数（我称之为上下文，模式可能是另一个术语），方法使用该参数在目录中查找所需的回调。这个上下文必须传递给所有方法。当然比到处指定的各种不同的回调要好，但我想知道我是否可以摆脱最后一个。但是，如果不是作为方法参数，我在哪里指定该上下文？我对 JS 和 jquery 很陌生，所以我没有找到解决这个问题的方法。显然我不想使用全局变量，坦率地说，我怀疑我是否可以简单地将上下文存储在单个变量中，因为由于所有事件处理程序和外部影响，方法可能会同时在不同的上下文中调用时间，或者至少是交错的。所以我想我需要更接近函数堆栈的东西。也许我可以简单地将上下文对象推送到堆栈并从需要知道的库层中读取它？当我再次离开图书馆时，该对象将被删除。当然也存在其他方法。

这里有这么多经验丰富的编码人员，当然可以给新手一个简短的提示，一个导致想法的起点，如何实现这一点。这种事情“通常”是如何完成的？

* * *

我试了一会儿，探索`arguments.callee.caller`层次结构。我想也许我可以在调用函数中设置一个原型成员，然后，当执行进一步向下时，我可以简单地向上遍历调用堆栈，直到找到持有该属性的调用者并将该值用作上下文。然而，我也看到正在进行的讨论揭示了两件事：1.）`arguments.callee`似乎已经贬值，2.）它似乎真的很贵。所以这是不行的。

我还阅读了有关 Function.caller 替代方案的信息（它似乎*没有*被贬低而且效率更高，但是直到现在我还没有探索这条线索......

* * *

正如当前所写的那样，通过在函数调用中指定一个附加参数来简单地传递上下文/模式。它带有一个唯一的字符串，在查阅目录时用作键。所以像这样的东西（不是复制的，而是作为原始示例编写的）：

```
<!-- callbacks -->
callback_inner_task_base:function(arg1,arg2){
  // do something with args
}
callback_inner_task_spec:function(arg1,arg2){
  // do something with args
}

<!-- catalog -->
Catalog.Callback:function(context,slot){
  // some plausibility checks...
  return Catalog[context][slot];
}
Catalog.base.slot=callback_inner_task_base;
Catalog.spec.slot=callback_inner_task_spec;

<!-- callee -->
do_something:function(arg1,arg2,context){
  ...
  // callback as taken from the catalog
  Catalog.Callback(callback,'inner_task')(arg1,arg2);
  ...
}

<!-- caller -->
init:function(...){
  ...
  do_something('thing-1',thing-2','base');
  do_something('thing-1',thing-2','spec');
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T14:25:30.700

> 但是，如果不是作为方法参数，我在哪里指定该上下文？

*   使用函数属性，例如`Catalog.Callback.context`
*   使用[单子](https://stackoverflow.com/questions/11871065/monads-in-javascript/14467443#14467443)

# xsd - 用新 XSD 替换旧 XSD

> ID：11693543
> 
> 赞同：1
> 
> 时间：2012-07-27T18:24:17.493
> 
> 标签：xsd, xsd-validation

我的任务是为特定解决方案替换 xsd。但是，我不断收到“在这种情况下不支持元素”。

这是原始的xsd：

```
 public const string Xsd = @"
<xs:schema attributeFormDefault='unqualified' elementFormDefault='qualified'     xmlns:xs='http://www.w3.org/2001/XMLSchema'>
  <xs:element name='DataRow'>
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs='unbounded' name='Data'>              
          <xs:complexType>
            <xs:attribute name='Site' type='xs:string' use='required' />
            <xs:attribute name='Month_Num' type='xs:unsignedShort' use='required' />
            <xs:attribute name='Numerator' type='xs:unsignedByte' use='required' />
            <xs:attribute name='Data_Indicator' type='xs:string' use='required' />
            <xs:attribute name='Budgeted' type='xs:unsignedByte' use='required' />
            <xs:attribute name='Executive_Comments' type='xs:string' use='required' />
            <xs:attribute name='Fleet_Executive_Comments' type='xs:string' use='required' />
         </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>"; 
```

这是我应该用以下内容替换它的内容：

```
<xs:schema attributeFormDefault='unqualified' elementFormDefault='qualified' xmlns:xs='http://www.w3.org/2001/XMLSchema'>
  <MonthlyValues>
    <MonthlyValue IndicatorName='name' LocationName='name' GroupingName='name' Year='MonthNum.Value.Year' Month='MonthNum.Value.Month' Numerator='Numerator' Budget='Budget'>
    </MonthlyValue>
 </MonthlyValues>
</xs:schema> 
```

该架构是由其他人制作的，我应该能够替换它。不幸的是，它不是那样工作的，我对此知之甚少。

我应该改变吗

```
 <MonthlyValues> 
```

到

```
<xs:element name='MonthlyValues> and keep the 
<xs:sequence>
   <xs:element maxOccurs='unbounded' name='MonthlyValues'>
      <xs:complexType> 
```

并添加

```
<MonthlyValue IndicatorName='name' LocationName='name' GroupingName='name' Year='MonthNum.Value.Year' Month='MonthNum.Value.Month' Numerator='Numerator' Budget='Budget'>
</MonthlyValue> 
```

之后？实际上，我试过了，但没有用，但是我有类似的事情要做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:40:09.607

XSD 是另外一回事……您似乎对 XSD 不熟悉，所以让您开始的最快方法可能是从您的示例 XML 生成 XSD。调整生成的以匹配 XML。使用下面的 XSD 作为起点。

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="MonthlyValues">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="MonthlyValue">
          <xsd:complexType>
            <xsd:simpleContent>
              <xsd:extension base="xsd:string">
                <xsd:attribute name="IndicatorName" type="xsd:string" use="required" />
                <xsd:attribute name="LocationName" type="xsd:string" use="required" />
                <xsd:attribute name="GroupingName" type="xsd:string" use="required" />
                <xsd:attribute name="Year" type="xsd:string" use="required" />
                <xsd:attribute name="Month" type="xsd:string" use="required" />
                <xsd:attribute name="Numerator" type="xsd:string" use="required" />
                <xsd:attribute name="Budget" type="xsd:string" use="required" />
              </xsd:extension>
            </xsd:simpleContent>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

You should rely on an editor to help you through the learning... Eclipse, Netbeans, etc. come with decent editors, and free.

# python - Python str.format() 方法无法按预期工作

> ID：11693546
> 
> 赞同：1
> 
> 时间：2012-07-27T18:24:21.337
> 
> 标签：python

我正在尝试格式化我在屏幕上打印的一些输出。这是我的代码：

```
someString = someList[someIndex] +  '{0:<8}'.format('\t') + someList[someOtherIndex]
print someString 
```

**我的预期输出：**

```
abcdefghi someOutput
abcde someOtherOutput

**或者**
abcdefghi someOutput
abcde someOtherOutput

```

**我得到的实际输出：**

```
abcdefghi someOutput
abcde someOtherOutput

```

Q.1：为什么我没有得到预期的输出？具体来说，为什么第二列中的条目未对齐？
Q.2：我应该在我的代码中进行哪些更改以获得预期的输出？

附加信息：我正在使用 Python 2.6

感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:32:44.313

您必须在打印的第一个字符串上应用“填充”，以便它始终将第二个字符串“推”到同一点：

```
someString = '{0:<16}{1}'.format(someList[someIndex], someList[someOtherIndex]) 
```

不过，请确保您需要的填充内容大于您必须打印的最长的第一个单词。

您之前所做的只是打印第一个单词，然后打印带有填充的 '\t'（始终相同），最后打印第二个单词。

# function - 如何在 VBScript 中指定整数的总位数？

> ID：11693551
> 
> 赞同：0
> 
> 时间：2012-07-27T18:24:45.933
> 
> 标签：function, vbscript, ssrs-2008

我在 Visual Studio 2008 的 SSRS 中有一个“文本字段”，我想将其转换为数字，以便导出到 Excel 工作。简单地将属性更改为 Number 是行不通的。因此，我决定尝试在 Value 字段中编写一些代码以使其正常工作。

我有一个必须始终包含七位数字的发票编号，例如 1938576、0000001。使用`CInt(Fields!Invoice.Value)`不起作用，因为它不保留任何前导零。如何将此字段转换为数值（此字段为整数，但我还有一些其他字段必须使用双精度），同时还确定必须显示多少位数？类似的东西`CInt(Fields!Invoice.Value, 7)`会很棒，但我不认为该参数是函数的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:30:10.687

VBScript 没有任何适用于此的数字格式化函数。你必须自己写。

```
Function PadNumber(x, digit_count)
    If Len(x) < digit_count Then
        PadNumber = String(digit_count - Len(x), "0") & x
    Else
        PadNumber = x
    End If
End Function 
```

# java - 不使用注释的 Java 代码到 XML/XSD

> ID：11693552
> 
> 赞同：13
> 
> 时间：2012-07-27T18:24:47.233
> 
> 标签：java, xml, jaxb, marshalling, unmarshalling

我需要将 Java 类编组和解组为 XML。不属于我的类，我无法添加注释以便可以使用 JAXB。

有没有给定约束将 Java 转换为 XML 的好方法？

此外，认为一个工具可能会有所帮助，但我会更感兴趣的是有一些 Java API 可以做同样的事情。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T19:11:02.343

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**领域模型**

我将使用以下域模型来回答这个问题。请注意模型上没有 JAXB 注释。

***顾客***

```
package forum11693552;

import java.util.*;

public class Customer {

    private String firstName;
    private String lastName;
    private List<PhoneNumber> phoneNumbers = new ArrayList<PhoneNumber>();

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public List<PhoneNumber> getPhoneNumbers() {
        return phoneNumbers;
    }

    public void setPhoneNumbers(List<PhoneNumber> phoneNumbers) {
        this.phoneNumbers = phoneNumbers;
    }

} 
```

***电话号码***

```
package forum11693552;

public class PhoneNumber {

    private String type;
    private String number;

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getNumber() {
        return number;
    }

    public void setNumber(String number) {
        this.number = number;
    }

} 
```

* * *

**选项 #1 - 任何 JAXB (JSR-222) 实现**

JAXB 是按异常配置的，这意味着您只需在希望映射行为与默认行为不同的地方添加注释。下面是一个示例的链接，该示例演示了如何在没有注释的情况下使用任何 JAXB impl：

***演示***

```
package forum11693552;

import javax.xml.bind.*;
import javax.xml.namespace.QName;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        Customer customer = new Customer();
        customer.setFirstName("Jane");
        customer.setLastName("Doe");

        PhoneNumber workPhone = new PhoneNumber();
        workPhone.setType("work");
        workPhone.setNumber("555-1111");
        customer.getPhoneNumbers().add(workPhone);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        JAXBElement<Customer> rootElement = new JAXBElement<Customer>(new QName("customer"), Customer.class, customer);
        marshaller.marshal(rootElement, System.out);
    }

} 
```

***输出***

```
<customer>
    <firstName>Jane</firstName>
    <lastName>Doe</lastName>
    <phoneNumbers>
        <number>555-1111</number>
        <type>work</type>
    </phoneNumbers>
</customer> 
```

***了解更多信息***

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics)

* * *

**选项 #2 - EclipseLink JAXB (MOXy) 的外部映射文档**

如果您确实想自定义映射，那么您可能会对 MOXy 的外部映射文档扩展感兴趣。示例映射文档如下所示：

***oxm.xml***

```
<?xml version="1.0"?>
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11693552">
    <java-types>
        <java-type name="Customer">
            <xml-root-element />
            <java-attributes>
                <xml-element java-attribute="firstName" name="first-name" />
                <xml-element java-attribute="lastName" name="last-name" />
                <xml-element java-attribute="phoneNumbers" name="phone-number" />
            </java-attributes>
        </java-type>
        <java-type name="PhoneNumber">
            <java-attributes>
                <xml-attribute java-attribute="type" />
                <xml-value java-attribute="number" />
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

***jaxb.properties***

要启用 MOXy 作为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

***演示***

当使用 EclipseLink MOXy 作为您的 JAXB 提供程序时（请参阅），您可以在引导您的`JAXBContext`

```
package forum11693552;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.namespace.QName;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String,Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum11693552/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Customer.class}, properties);

        Customer customer = new Customer();
        customer.setFirstName("Jane");
        customer.setLastName("Doe");

        PhoneNumber workPhone = new PhoneNumber();
        workPhone.setType("work");
        workPhone.setNumber("555-1111");
        customer.getPhoneNumbers().add(workPhone);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        JAXBElement<Customer> rootElement = new JAXBElement<Customer>(new QName("customer"), Customer.class, customer);
        marshaller.marshal(rootElement, System.out);
    }

} 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8"?>
<customer>
   <first-name>Jane</first-name>
   <last-name>Doe</last-name>
   <phone-number type="work">555-1111</phone-number>
</customer> 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)
*   [http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html](http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T18:27:24.780

你看过[XStream](http://xstream.codehaus.org/)吗？它将反序列化/反序列化没有注释或 XSD 的标准 POJO。您可以提供自定义以影响元素在 XML 中的显示方式，并且几乎可以开箱即用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:33:36.573

您可以编写自定义`XmlAdapter`并使用注释对约束类型的字段进行`XmlJavaTypeAdapter`注释。基础是这样的：

```
public enum CannotBeAnnotated { value1, value2; }
@XmlRootElement(name="client")
public class ClientClass {
    @XmlJavaTypeAdapter(Bridge.class)
    public CannotBeAnnotated;
}
@XmlRootElement(name="representation")
public class XmlType {
    @XmlValue
    public String value;
}
public class Bridge extends XmlAdapter<XmlType, CannotBeAnnotated>{
    public XmlType marshal(CannotBeAnnotated c) {
        XmlType x=new XmlType(); 
        x.value=c.name();
        return x;
    }
    public CannotBeAnnotated unmarshall(XmlType x) {
        return CannotBeAnnotated.valueOf(x.value);
    }
} 
```

当然，对于枚举，这不会有用，因为 JAXB 知道如何处理它们。为了简单起见，我只是选择了一个枚举，这样你就可以看到这个想法：

1.  *设计一个您可以*控制的 XML 表示
2.  编写一个适配器，将该 Java 类型转换为所需的类型
3.  注释“客户端”代码引用所需类型的适配器
4.  利润。

# wpf - 如何对齐文本框中的文本，似乎不同的字符有不同的宽度

> ID：11693556
> 
> 赞同：1
> 
> 时间：2012-07-27T18:25:00.323
> 
> 标签：wpf, wpf-controls

对于 wpf 中的多行文本框，我发现文本字符的长度并不总是相等。例如，如果我将 kkk 放在第一行，将“f f”放在第二行，它们将不会对齐……因为 f 和空间占用较小的尺寸。

如何阻止这种情况并使每个字符都具有相同的大小？

这样我的字符串可以对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:26:51.680

将字体设置为 Courier New 或其他等宽字体。

# scala - 演员名称不是唯一的 InvalidActorNameException

> ID：11693562
> 
> 赞同：3
> 
> 时间：2012-07-27T18:25:28.933
> 
> 标签：scala, playframework, actor, akka, remote-actors

我的环境是eclipse、play、akka、scala。尝试创建远程主 akka 演员时出现错误。

我不确定为什么会收到此错误：

> [InvalidActorNameException：演员名称你好不是唯一的！]

当用户提交表单时，`calculate`调用：

```
options => {
     this.calculate(options.numWorkers.toInt, options.numElements.toInt,          options.numMessages.toInt) 
     //Redirect(routes.Application.)
     Ok(html.form(this.optionsForm))
} 
```

这是我创建演员的代码

```
val master = RemoteSystem.system.actorOf(Props[Master], "hello") 
```

我也只创建了这个演员的一个实例，并尝试了许多其他名称，例如`master`、`Master`和`master1983274612987346198356`。

`Master`定义为：

```
class Master extends Actor {

    var pi: Double = _
    var nrOfResults: Int = _
    var start: Long = _

    def receive = {
        case calculate(numWorkers, numElements, numMessages) =>{
            for (i <- 0 until numWorkers) {
                val worker = RemoteSystem.system.actorOf(Props[Worker], "Worker")
                for(j <- 0 until numMessages) 
                {
                    worker ! Work(0, numElements)      
                }
            }
        }
        case PiResult(start, numTerms, acc) => println("Pi Result: " + acc)
    }

    override def preStart() {
        start = System.currentTimeMillis
    }

    override def postStop() {
        println(
"\n\tCalculation time: \t%s millis".format(System.currentTimeMillis - start))
    }
} 
```

演员系统是：

```
object RemoteSystem {
    val system = ActorSystem(
"RemoteCreation", ConfigFactory.load.getConfig("remotecreation"))
} 
```

其中`remotecreation`定义为：

```
remotecreation{
    include "common"

    akka {
        actor{
            deployment{
                /Worker{
                    remote="akka://Pi@10.0.100.254:2552"
                }
            }
        }
    remote.netty.port = 2554
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:06:27.943

在以下代码中，您似乎正在创建许多具有相同名称“Worker”的工人：

```
for (i <- 0 until numWorkers) {
      val worker = RemoteSystem.system.actorOf(Props[Worker], "Worker")
      for(j <- 0 until numMessages) 
      {
         worker ! Work(0, numElements)      
      }
} 
```

您需要移动演员创建代码（请参阅此[文档](http://doc.akka.io/docs/akka/2.0.2/scala/actors.html#Creating_Actors_with_default_constructor)）：

```
class Master extends Actor {
    val worker = RemoteSystem.system.actorOf(Props[Worker], "Worker")
    ...
} 
```

# android - Android打算从单独的类打开电子邮件应用程序？

> ID：11693566
> 
> 赞同：0
> 
> 时间：2012-07-27T18:25:42.317
> 
> 标签：android, android-intent

我有一个 TabHost 应用程序，用户可以在其中从任何选项卡活动发送电子邮件。我想编写一个可以从任何将处理启动电子邮件意图的活动实例化的类，但不确定这是实现它的理想方式。

尽管它节省了一些代码重复，但似乎必须创建一个意图来创建另一个意图来启动 createChooser() 的开销很大。有没有更好的办法？

应用代码

```
Intent send = new Intent (this, Email.class); 
send.putExtra ("mailto", EMAIL_ADDRESS); 
send.putExtra ("subject", SUBJECT); 
send.putExtra ("body", MSG_BODY); 
this.startActivity (send); 
```

电子邮件类

```
public class Email extends Activity
{
    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
        super.onCreate (savedInstanceState);
        Log.d ("email" , " oncreate");

        Bundle ex = getIntent ().getExtras ();
        String mailto =  ex.getString ("mailto");
        String subject = ex.getString ("subject");
        String body = ex.getString ("body");

        if (body == null)
           body = "";
        if (subject == null)
           subject = "";

        try
        { 
            // use the builtin chooser for users mail app or SMS
            /* NOTE: AndroidManifest has android:noHistory="true" for this */
            Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
            sendIntent.setType("text/plain");
            sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String [] {mailto});
            sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
            sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);
            startActivityForResult (Intent.createChooser(sendIntent, "Send via which Application?"), 0);
        }
        catch (Exception e) 
        {
            Toast.makeText (this, "No activity was found to handle this action",Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:46:22.637

> 我想编写一个可以从任何将处理启动电子邮件意图的活动实例化的类，但不确定这是实现它的理想方式。

由于您的代码不起作用，因此它肯定不是理想的方法。

> 有没有更好的办法？

使用静态方法。将您的主题等作为参数传递给该方法。让方法调用`startActivity()`你的`ACTION_SEND` `Intent`（注意：不要打扰调用`startActivityForResult()`，因为`ACTION_SEND`它不是为使用而设计的`startActivityForResult()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:28:05.397

好的，事实证明，这是相当微不足道的。棘手的部分是传递上下文并从中启动意图。希望它可以帮助别人。

```
package foo.test.email;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

    public class Email
    {

        public static void send (Context ctx, String addy, String subject, String body)
        {
            try
            {
                // use the builtin chooser for users 'send' app
                Intent sendIntent = new Intent(Intent.ACTION_SEND);
                sendIntent.setType("text/plain");

                sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String [] {addy});
                sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
                sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);

                ctx.startActivity (Intent.createChooser(sendIntent, "Send via which Application?"));
            }
            catch (Exception e) 
            {
                Toast.makeText (ctx, "No activity was found to handle this action",Toast.LENGTH_SHORT).show();
            }
        }

    } 
```

并从另一个类调用静态发送方法：

```
Email.send (mainApp.this, "who@where", "a subject", "a body"); 
```

# objective-c - 如何重新创建 Jetsetter 的 iOS 预告照片和照片查看器幻灯片过渡？

> ID：11693574
> 
> 赞同：5
> 
> 时间：2012-07-27T18:26:01.773
> 
> 标签：objective-c, ios, cocoa-touch, ios5, core-animation

我遇到的最令人印象深刻的 iOS 应用之一是 Jetsetter，因为它具有出色的设计、令人难以置信的界面和对动画的创造性使用。我最喜欢的应用程序组件之一是他们为酒店/场地提供的预告照片界面。它们提供了一个最小化的照片幻灯片，但如果你想要完整的视图，你可以单击它，它会展开以显示更大版本的图像。[你可以在这里](https://vimeo.com/46502302)看到一个模糊的视频。

我有兴趣重新创建类似的东西。我很清楚[MHPagingScrollview](http://www.cocoacontrols.com/platforms/ios/controls/mhpagingscrollview)之类的分页画廊（这是较大的照片查看器的功能），但我想弄清楚的是处理过渡的正确方法。我还看到了处理图像的[Ken Burns 效果](http://en.wikipedia.org/wiki/Ken_Burns_effect)的库。然而，尚不清楚是否有单独的视图控制器。

这是两个独立视图控制器之间的过渡吗？或者最小化和最大化的照片查看器是同一个控制器的一部分吗？你将如何最有效地复制类似的东西？我在下面嵌入了一个屏幕截图来说明之前和之后。然而，上面链接的[视频](https://vimeo.com/46502302)最有效地说明了这种转变。

![在此处输入图像描述](../Images/bd78e6efb27469ff6ddfa8794a8d5707.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T19:51:14.397

来自 Jetsetter 的移动工程师。它们是两个独立的控制器，但过渡动画发生在第一个控制器中。这是流程：

1.  用户点击较小的照片。
2.  包含完整尺寸图像的过渡视图直接放置在较小图像的顶部。
3.  过渡视图动画到屏幕的边界。
4.  照片查看器控制器以没有动画的模式呈现，在一个无缝动画中完成效果。

当模态控制器被解除时，效果是相反的。

诀窍在于您的过渡视图。我们创建了一个包含 imageView 的 UIView 子类（启用了 clipsToBounds）。过渡视图的边界展开以显示 imageView，从而在动画期间不会导致最终图像失真。

# android - Android onHoverEvent 和 onTouchEvent

> ID：11693578
> 
> 赞同：1
> 
> 时间：2012-07-27T18:26:18.213
> 
> 标签：android

我有一个正在扩展的类，`View`我想使用手写笔（银河笔记）进行输入，因为它具有悬停功能。

我已经为悬停和触摸事件添加了侦听器，但是我遇到了这个问题，我无法很好地解决：当我用触控笔触摸屏幕时，我会生成一个悬停事件`ACTION_HOVER_EXIT`和一个使用`ACTION_DOWN`.

我想知道如果`ACTION_HOVER_EXIT`手写笔开始触摸屏幕或者它是否被移开，是否有办法知道我何时收到事件。

当我抬起触控笔但仍处于悬停区域时也是如此： one`ACTION_UP`和 one `ACTION_HOVER_ENTER`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:59:29.553

**这是为 Galaxy Note 准备的。**

在`ACTION_HOVER_EXIT`事件操作中，我尝试了几种不同的方法，但均未成功：

1.  事件坐标 (getX, getY) - 有时，将触控笔从屏幕上移开时的坐标类似于 0、-146，而当触控笔开始触摸屏幕时，坐标都大于 0。
2.  与屏幕的距离。触控笔笔尖到屏幕的距离有一个轴。通过检查它是否接近 0，手写笔尖端应该接触到屏幕。不幸的是，Galaxy note 上的触控笔设备没有此功能。
3.  检查尖端的压力。`ACTION_HOVER_EXIT`当调度带有动作的悬停事件时，这仍然为 0 。

查看存储在设备中的信息，`device.toString()`我没有看到这两种情况有什么不同。但是，通过使用`handler.postDelayed()`电话，我设法解决了这个问题。基本上我会在 10 毫秒后执行退出悬停动作，并且只有在此期间没有发送触摸事件。

这是我的手写笔的输出`device.toString()`：

```
Input Device 5: sec_e-pen
Keyboard Type: non-alphabetic
Key Character Map: /system/usr/keychars/Generic.kcm
Sources: 0x2103 ( keyboard mouse )
AXIS_X: source=0x2002 min=0.0 max=799.8877 flat=0.0 fuzz=0.11234377
AXIS_Y: source=0x2002 min=0.0 max=1279.8877 flat=0.0 fuzz=0.11234969
AXIS_PRESSURE: source=0x2002 min=0.0 max=1.0 flat=0.0 fuzz=0.0 
```

# css - Chrome 和 Safari 浏览器中的线性渐变

> ID：11693580
> 
> 赞同：16
> 
> 时间：2012-07-27T18:26:23.640
> 
> 标签：css, cross-browser, linear-gradients

我无法在 Safari 和 Chrome 中显示线性渐变。在 Firefox 中，它显示得很好。

我在尝试：

```
background: -webkit-linear-gradient(center top , #9E9E9E, #454545) repeat scroll 0 0 transparent;   
background:    -moz-linear-gradient(center top , #9E9E9E, #454545) repeat scroll 0 0 transparent;
background:     -ms-linear-gradient(center top , #9E9E9E, #454545) repeat scroll 0 0 transparent;
background:      -o-linear-gradient(center top , #9E9E9E, #454545) repeat scroll 0 0 transparent; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-27T18:30:23.593

试试这个 - [http://jsfiddle.net/fwkgM/1/](http://jsfiddle.net/fwkgM/1/)

```
 background-color: #9e9e9e;
  background-image: linear-gradient(to bottom, #9e9e9e, #454545); 
```

[CSS3 请](http://css3please.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T06:20:58.263

你也可以试试这个：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这是一个非常好的 CSS3 渐变生成器。它对我来说效果很好。希望对你也有帮助！:D

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-13T06:46:51.480

对于跨浏览器兼容性，请尝试以下操作

```
background-color: #9e9e9e; /* fallback color if gradients are not supported */
background-image: -webkit-linear-gradient(bottom, rgb(213,12,18), #9e9e9e 40%); /* For Chrome 25 and Safari 6, iOS 6.1, Android 4.3 */
background-image:    -moz-linear-gradient(to bottom, #9e9e9e 60%, #454545 100%); /* For Firefox (3.6 to 15) */
background-image:      -o-linear-gradient(to bottom, #9e9e9e 60%, #454545 100%); /* For old Opera (11.1 to 12.0) */ 
background-image:         linear-gradient(to bottom, #9e9e9e 60%, #454545 100%); /* Standard syntax; must be last */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-12T18:30:27.850

```
background: -webkit-linear-gradient(left,transparent,black 50%,transparent); /* worked for me*/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-17T10:47:43.137

```
background-attachment: fixed; /* worked for me */ 
```

# php - 用php创建xml

> ID：11693584
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:26:39.650
> 
> 标签：php, xml

我有来自文件上传器的这个 PHP 脚本。它正在生成一个 XML 文件，但每次我上传一个新项目时，它都会替换当前节点而不是添加到“树”中。

```
<?php

$todayDate = $_POST['todayDate'];
$Name = $_POST['Name'];
$Email = $_POST['Email'];
$filename = $_FILES['Filedata']['name'];    
$filetmpname = $_FILES['Filedata']['tmp_name']; 
$fileType = $_FILES["Filedata"]["type"];
$fileSizeMB = ($_FILES["Filedata"]["size"] / 1024 / 1000);

move_uploaded_file($_FILES['Filedata']['tmp_name'], "images/".$filename);

$xml = new XMLWriter;
$xml->openMemory();
$xml->startDocument( '1.0' , 'iso-8859-1' );
$xml->startElement("galeria");
$xml->writeElement("Name", $Name);
$xml->writeElement("Email", $Email);
$xml->endElement();

$file = fopen('data.xml','w+');
fwrite($file, $xml->outputMemory(true));
fclose($file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:55:38.193

试试`$file = fopen('data.xml', 'a');`我认为这是附加文件的正确方法

# actionscript-3 - 如何在非 AIR 应用程序中检索 http 响应标头

> ID：11693585
> 
> 赞同：1
> 
> 时间：2012-07-27T18:26:40.150
> 
> 标签：actionscript-3, flash, apache-flex, http-headers, urlloader

[访问 flash.net.URLLoader 对象的 HTTP 响应标头？](https://stackoverflow.com/questions/185761/access-http-response-headers-in-for-flash-net-urlloader-object)

我发现上面的问题似乎对 AIR 应用程序有解决方案，但对我的非 AIR flex 应用程序没有解决方案？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:08:57.523

如果在本机 as3 中不可能，您可以自己解析它。使用 Socket 类打开一个套接字连接，并使用端口 80 连接到 url/域。

连接后，您可以读出套接字缓冲区并解析字符串以获取响应标头。

您可以按照[http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-181c51321220efd9d1c-8000.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7cf7](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-181c51321220efd9d1c-8000.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7cf7)上的 Telnet 示例将端口号更改为 80。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:56:00.393

我相信我已经超越了非空气闪光应用程序的能力。我最终检索了标头服务器端，然后使用外部接口回调功能来使用我对标头 flex-side 的了解。

# javascript - 检测输入是否有焦点

> ID：11693589
> 
> 赞同：2
> 
> 时间：2012-07-27T18:26:58.027
> 
> 标签：javascript, jquery

我的一个网络应用程序页面由一个网格和一个搜索框组成。我捕获按键事件以使用空格键在网格的每一行中进行选择。但是，当有人想在搜索框中查找短语时，这会产生问题。

我知道 jQuery 有一种`.focus`方法可以将事件处理程序绑定到输入或将焦点放在元素上。但是如何获得一个布尔值来确定搜索输入是否具有焦点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:29:15.983

尝试这个

```
if ($("#id").is(":focus")) {
  alert('focus');
} 
```

您可以在以下链接中找到更多信息：

[使用 jQuery 测试输入是否有焦点](https://stackoverflow.com/questions/967096/using-jquery-to-test-if-an-input-has-focus)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:29:36.420

像这样？

```
if($('...').is(':focus')){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:31:22.453

也许：

```
$(this).is(":focus"); 
```

# android - 使用 ActivityInstrumentationTestCase2 进行 Android 单元测试，当前一个测试用例导致另一个 Activity 启动时，getActivity() 挂起

> ID：11693598
> 
> 赞同：8
> 
> 时间：2012-07-27T18:27:33.657
> 
> 标签：android, junit, android-activity

我正在尝试使用 ActivityInstrumentationTestCase2 为登录 Activity 运行多个测试用例。第一个测试用例测试登录成功，这会导致 Activity 通过调用 startActivity(Intent intent) 启动下一个 Activity。现在，在我要测试的 Activity 之上还有另一个 Activity。第一个测试用例通过，启动第二个测试用例。但是，当它被第二个测试用例调用时，它将永远挂在 getActivity() 处。

如果我进入我的登录 Activity 的代码并注释掉调用 startActivity(Intent intent) 的部分，那么两个测试用例都会成功运行。

我已经尝试了几件事。我使用 Intent.FLAG_ACTIVITY_CLEAR_TOP 来清除 Activity 堆栈。在这种情况下，顶级活动被关闭，并显示登录活动，但当第二个测试用例启动时，它仍然卡在 getActivity() 处。

我也尝试过 sendKeys(KeyEvent.KEYCODE_BACK)，但这没有任何效果。

我能做些什么来克服这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:42:44.970

```
getInstrumentation().addMonitor(NextActivity.class.getName(), null, true); 
```

成功了。请注意，最后一个参数是一个标志，指示是否阻止活动启动。将其设置为 true 解决了问题。

[链接到文档](http://tinyurl.com/na5hh9r)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T15:12:30.927

就我而言，我只是在每个案例之后关闭活动：

```
public void tearDown() {
    // here goes other code to be executed after each test case
    getActivity().finish();
} 
```

# r - 用于 data.frames 的 expand.grid 的替代方案

> ID：11693599
> 
> 赞同：38
> 
> 时间：2012-07-27T18:27:35.290
> 
> 标签：r

我有一个 data.frame `df`，我希望其中的每一行都是`df`重复`lengthTime`的时间，并且添加一个从 1 到.`lengthTime``df`

我知道，这听起来很复杂，但我基本上想要的是`expand.grid`申请`df`. 这是一个丑陋的解决方法，我觉得大多数都有一个更简单的解决方案（甚至可能是一个 base-R 函数？）：

```
df <- data.frame(ID   = rep(letters[1:3], each=3),
                 CatA = rep(1:3, times = 3),
                 CatB = letters[1:9])
lengthTime <- 3
nrRow <- nrow(df)
intDF <- df
for (i in 1:(lengthTime - 1)) {
  df <- rbind(df, intDF)
}
df$Time <- rep(1:lengthTime, each=nrRow) 
```

我以为我可以只使用`expand.grid(df, 1:lengthTime)`，但这不起作用。`outer`也没有带来任何运气。那么有人知道一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-02-20T14:48:38.137

自从这个问题发布以来已经有一段时间了，但我最近发现它只是在寻找标题中的东西，即`expand.grid`适用于数据框的东西。发布的答案解决了 OP 更具体的问题，所以如果有人正在寻找更通用的数据帧解决方案，这里有一个更通用的方法：

```
expand.grid.df <- function(...) Reduce(function(...) merge(..., by=NULL), list(...))

# For the example in the OP
expand.grid.df(df, data.frame(1:lengthTime))

# More generally
df1 <- data.frame(A=1:3, B=11:13)
df2 <- data.frame(C=51:52, D=c("Y", "N"))
df3 <- data.frame(E=c("+", "-"))
expand.grid.df(df1, df2, df3) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-27T18:39:28.380

为什么不只是`df[rep(1:nrow(df),times = 3),]`扩展数据框，然后像上面一样添加额外的列，使用`df$Time <- rep(1:lengthTime, each=nrRow)`?

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-11-03T14:27:45.897

您也可以只做一个简单`merge`的 by `NULL`（这将导致`merge`做简单的组合数据复制）：

```
merge(data.frame(time=1:lengthTime), iris, by=NULL) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-08-16T12:13:41.630

快速更新

现在在包 tidyr 中还有 cross() 函数，它可以用来代替合并，速度更快，并返回一个 tbl_df / tibble。

```
data.frame(time=1:10) %>% merge(iris, by=NULL) 

data.frame(time=1:10) %>% tidyr::crossing(iris) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T18:40:31.867

这有效：

```
REP <- rep(1:nrow(df), 3)
df2 <- data.frame(df[REP, ], Time = rep(1:3, each = 9))
rownames(df2) <- NULL
df2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-25T18:16:27.783

一个`data.table`解决方案：

```
> library(data.table)
>  ( df <- data.frame(ID   = rep(letters[1:3], each=3),
+                  CatA = rep(1:3, times = 3),
+                  CatB = letters[1:9]) )
  ID CatA CatB
1  a    1    a
2  a    2    b
3  a    3    c
4  b    1    d
5  b    2    e
6  b    3    f
7  c    1    g
8  c    2    h
9  c    3    i
> ( DT <- data.table(df)[, lapply(.SD, function(x) rep(x,3))][, Time:=rep(1:3, each=nrow(df0))] )
    ID CatA CatB Time
 1:  a    1    a    1
 2:  a    2    b    1
 3:  a    3    c    1
 4:  b    1    d    1
 5:  b    2    e    1
 6:  b    3    f    1
 7:  c    1    g    1
 8:  c    2    h    1
 9:  c    3    i    1
10:  a    1    a    2
11:  a    2    b    2
12:  a    3    c    2
13:  b    1    d    2
14:  b    2    e    2
15:  b    3    f    2
16:  c    1    g    2
17:  c    2    h    2
18:  c    3    i    2
19:  a    1    a    3
20:  a    2    b    3
21:  a    3    c    3
22:  b    1    d    3
23:  b    2    e    3
24:  b    3    f    3
25:  c    1    g    3
26:  c    2    h    3
27:  c    3    i    3 
```

另一个 ：

```
> library(data.table)
>  ( df <- data.frame(ID   = rep(letters[1:3], each=3),
+                  CatA = rep(1:3, times = 3),
+                  CatB = letters[1:9]) )
> DT <- data.table(df)
> rbindlist(lapply(1:3, function(i) cbind(DT, Time=i)))
    ID CatA CatB Time
 1:  a    1    a    1
 2:  a    2    b    1
 3:  a    3    c    1
 4:  b    1    d    1
 5:  b    2    e    1
 6:  b    3    f    1
 7:  c    1    g    1
 8:  c    2    h    1
 9:  c    3    i    1
10:  a    1    a    2
11:  a    2    b    2
12:  a    3    c    2
13:  b    1    d    2
14:  b    2    e    2
15:  b    3    f    2
16:  c    1    g    2
17:  c    2    h    2
18:  c    3    i    2
19:  a    1    a    3
20:  a    2    b    3
21:  a    3    c    3
22:  b    1    d    3
23:  b    2    e    3
24:  b    3    f    3
25:  c    1    g    3
26:  c    2    h    3
27:  c    3    i    3 
```

# php - 关闭与 PHP 的套接字连接

> ID：11693600
> 
> 赞同：0
> 
> 时间：2012-07-27T18:27:42.923
> 
> 标签：php, sockets

我有一个脚本可以打开一个端口并允许多个连接之间的套接字通信（一个简单的 Flash 聊天框）。该脚本必须自行处理运行多长时间以及何时关闭端口。我的问题是，如果这个脚本陷入无限循环（或者我失去对它的控制），我该怎么做才能关闭端口？

为了明确这一点，我正在使用第二个 php 脚本，该脚本将强制关闭第一个脚本打开的端口（然后，如果套接字已关闭，我可以将一些检查代码放入该脚本以停止执行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:34:39.343

我不知道有办法做到这一点。套接字存在于它创建的实例中。如果您创建套接字并`while(1)`在脚本“foo.php”中运行循环，据我所知，没有办法单独执行另一个脚本，比如“bar.php”来访问在 foo.php 中创建的套接字和关闭它。通常，客户端-服务器应用程序依靠线程来实现套接字池和监视。

# javascript - jQuery Transit 动画未在 for 循环中正确执行

> ID：11693601
> 
> 赞同：0
> 
> 时间：2012-07-27T18:27:45.203
> 
> 标签：javascript, jquery, for-loop, jquery-animate, nonblocking

我正在使用[jQuery Transit](http://ricostacruz.com/jquery.transit/)为不断变化的元素设置动画。

我正在使用 for 循环为多个框设置动画。

javaScript：

```
<script>
window.onload = function(){
  $('div.test').mouseover(function(){
    for (var i = 0; i < 2; i++){
      console.log(i+' Starting Loop');

      //Rotate box animation
      $('div.test' && '.'+i).transition({
        perspective: '100px',
        rotateY: '-180deg',
        x: '-90px'
      }, 'slow',function(){
        //On completion code.
        $('div.test' && '.'+i).append(' With Changed Text');
        console.log(i + 'Text has been changed');

        //Rotate back
        $('div.test' && '.'+i).transition({
          perspective: '100px',
          rotateY: '0deg',
          x: '0px'
        }, 'slow');
      });
      console.log(i + 'finished the loop');
      alert(i + ' finished loop');
    }
  });
}
</script> 
```

和 HTML：

```
<body>
<div class='test 0'>
  Box1
</div>
<div class='test 1'>
  Box2
</div>
</body> 
```

它应该通过使框移动，进行适当的更改，然后移回其原始位置来工作。

但是，与其等待第一个动画完成，然后再进行 for 循环的下一次迭代，它似乎是在等待 for 循环完成后再执行`$.transition()`函数。

所以当`$.transition()`函数被调用时，`i = 2`. 因此，该`$.append()`函数将附加到具有类“.2”的元素，该类不存在。

有什么方法可以确保动画在循环中正确执行？

**注意**这是我真实代码的简化版本。我通常会为每个框附加不同的值。我还在遍历一个可能长于 2 的列表。

**编辑**我通过递归遍历数组找到了解决方案。[这里是。](http://jsfiddle.net/bHsL3/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:47:58.953

我认为您已经拥有来回为框设置动画所需的代码，但是，您的 for 循环正在立即执行（从而几乎同时触发转换）。

看看这个例子。您应该能够修改它以根据需要循环多次。 [http://jsfiddle.net/zca33/](http://jsfiddle.net/zca33/)

另外，我不确定您是否可以将 jQuery 选择器与 && 结合使用，至少它不是首选方法。见：[http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

**编辑：**由于您尝试在成功调用 ajax 时执行动画，因此您可以通过 CSS 类定位特定框。见：http: [//jsfiddle.net/zca33/2/](http://jsfiddle.net/zca33/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:58:56.083

就这样这有一个官方的答案，这是我的新 javaScript 代码。

```
<script>   
function rotateBox(list){
  if (list.length <= 0){
    return;
  }

  var i = list.pop();
  console.log("i: "+i);

  $('div.test' && '.'+i).transition({
    perspective: '100px',
    rotateY: '-180deg',
    x: '-90px'
  }, 'slow',function(){
    //On completion code.
    $('div.test' && '.'+i).append(' With Changed Text');
    console.log(i + 'Text has been changed');

    //Rotate back
    $('div.test' && '.'+i).transition({
      perspective: '100px',
      rotateY: '0deg',
      x: '0px'
    }, 'slow', function(){

      //Recursion!
      rotateBox(list);
    });
  });

}

window.onload = function(){

  //a list of arbitrary values that match with a <div> class
  list = [0, 1];

  $('div.test').mouseover(function(){
    rotateBox(list);

    //Just in case you feel like running through it again
    list = [0, 1];
  });
};
</script> 
```

还有一个演示：http: [//jsfiddle.net/bHsL3/6/](http://jsfiddle.net/bHsL3/6/)。

# javascript - 将参数传递给动画回调jQuery？

> ID：11693607
> 
> 赞同：3
> 
> 时间：2012-07-27T18:28:27.713
> 
> 标签：javascript, jquery, animation, mobile, callback

我设计了一个类似于我在制作 jQuery 应用程序时遇到的问题的小提琴。我有多个按钮，它们执行一个动作，并且必须在动画完成后更改一个标题。标题取决于按下的按钮。由于您无法将参数传递给回调，因此我求助于传递全局变量。有没有更合适的方法呢？

[http://jsfiddle.net/XDdEV/](http://jsfiddle.net/XDdEV/)

```
var heading = '';

function headingChanger(e) {
    $("#heading").html(heading);
}

$("#one").click(function (e) {
    heading = 'HEADING 1'
    $("#slider").animate({
        'margin-left' : '200px'
    },1000,'linear',headingChanger);
});

$("#two").click(function (e) {
    heading = 'HEADING 2'
    $("#slider").animate({
       'margin-left' : '0'
    },1000,'linear',headingChanger);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:31:05.990

您可以将函数称为：

```
$("#two").click(function (e) {
    heading = 'HEADING 2'
    $("#slider").animate({
       'margin-left' : '0'
    },1000,'linear',function() { headingChanger(heading) });
}); 
```

这将使 headingChanger 在回调时被评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:44:12.860

您可以将它们结合起来并执行以下操作：

```
function headingChanger(heading) {
    $("#heading").html(heading);
}

$("#one, #two").click(function (e) {
    var h = e.target.id==='one'?'1':'2';
    $("#slider").animate({
        'margin-left' : h=='1'?'200px':'0'
    },1000,'linear',function() { 
        headingChanger('HEADING '+h); 
    });
}); 
```

​</p>

[小提琴](http://jsfiddle.net/XDdEV/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:35:28.430

JS 是函数范围的（IE8 也支持），因此，您可以将所有内容包装到一个不错的函数中，并全局导出您需要的内容：

```
(function headingMoverModule(exports){
    var heading = '';

    function headingChanger(e) {
        $("#heading").html(heading);
    }

    $("#one").click(function (e) {
        heading = 'HEADING 1'
        $("#slider").animate({
            'margin-left' : '200px'
        },1000,'linear',headingChanger);
    });

    $("#two").click(function (e) {
        heading = 'HEADING 2'
        $("#slider").animate({
           'margin-left' : '0'
        },1000,'linear',headingChanger);
    });
    exports.headingChanger = headingChanger;
})(window); 
```

一些类似 OOP 的处理会有所帮助，尽管可以将其应用于模块，或者将函数绑定到它们的原始参数，例如使用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)

# html - 我们应该把 里面的标签 标签？

> ID：11693608
> 
> 赞同：4
> 
> 时间：2012-07-27T18:28:34.077
> 
> 标签：html, nav

我想知道许多网站将标签放在标签内，从规范来看，导航标签有锚标签，这里是[w3schools](http://www.w3schools.com/html5/tag_nav.asp)中的示例，为什么许多网站是这样的：

```
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
    </ul>
</nav> 
```

这是正确的还是我们应该这样做

```
<nav>
    <a href="#">Home</a>
    <a href="#">About</a>
</nav> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:36:26.353

一般来说，这不是必需的，但是将导航项放在列表中并使用 CSS 内联显示它们是非常常见的做法（如果需要）。这不仅是对 HTML5 的建议——如果您在浏览器中禁用示例 CSS，您的菜单将显示为：

开始关于我的联系方式（你能读懂这个吗？）

与列表它将是：

*   开始
*   关于我
*   接触

如果显示设计出现问题，请考虑自己希望看到哪个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:40:40.457

这里需要注意的重要一点是导航、部分、页眉、页脚等新标签的设计目的。就其本身而言，这些标签的行为与 div 没有什么不同。人们开始在他们的 html5 网站上使用它们的原因是为文档提供上下文。当我听到“Web 2.0”之类的术语时，我会翻白眼，但这些术语确实传达了我们对如何使用网络的思考方式的变化。每当你听到“Web 3.0”……呃，它真正的意思是人们正在尝试思考如何让 Web 更加语义化，这意味着用户体验更加基于用户行为和偏好进行定制。使用这些类型的标签标记您的文档有助于提供该上下文。但是，如何实现它仍然取决于您，我相信您提供的两个示例都是完全有效的。

这里有一篇不错的文章更详细地讨论了这一点：

[http://html5doctor.com/lets-talk-about-semantics/](http://html5doctor.com/lets-talk-about-semantics/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:40:51.477

我一直认为，任何纯粹为了容纳另一个标签而存在的标签都是无关紧要的。

然而语义和合理标记是一门不精确的科学，所以人们有不同的看法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T18:56:59.183

根据“nav”元素规范，它表示链接到其他页面或页面内**部分**的页面部分。规范不要求“导航”元素中的任何特定结构。另一方面，“ul”块出于逻辑和/或实际目的将导航链接组合在一起。使用导航块列表对使用辅助技术导航 Web 的用户有好处，因为屏幕阅读器可以跳过整个导航块，从一个导航级别跳到另一个导航级别。

参考：

*   [http://reference.sitepoint.com/html/ul](http://reference.sitepoint.com/html/ul)
*   [http://html5doctor.com/nav-element/](http://html5doctor.com/nav-element/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-06T10:08:09.660

我会说：是的，如果是多级导航（因此将对其进行分层排序）。不，在所有其他情况下：您可以保存数据、获得速度和**可读性**。

恕我直言，UL 应该用于显示实际的无序列表，关于表格也是如此，应该显示表格数据。

# javascript - 没有查询字符串的 Bing 地图

> ID：11693609
> 
> 赞同：1
> 
> 时间：2012-07-27T18:28:34.757
> 
> 标签：javascript, android, query-string, bing-maps

[Android SDK](http://bingmapsandroidsdk.codeplex.com/)的Bing 地图目前在 Android 版本 3.x 及更高版本中已损坏。虽然我想切换到谷歌地图，但现在对我来说不是一个选择。在任何情况下，Bing 地图都无法工作，因为 API 11 中引入了一个尚未修复的错误。Android`WebView`目前在处理查询字符串时存在问题，并且会拒绝加载带有查询字符串的 HTML 文件。因此，我无法加载我的 Bing 地图文件，因为它的 URL 采用以下格式：

```
file:///android_asset/map.html?bingMapsKey=INSERTBINGMAPSKEYHERE&lat=WHATEVER&lon=WHATEVERLSE&zoom=10&mkt=en-US 
```

有没有办法在不包含查询字符串的情况下加载地图？我应该编辑 HTML 文件还是 Javascript 文件，我应该怎么做？好吧，我浏览了 Javascript 文件，并更改了以下脚本行

```
var key = "MYKEY";
// _bingMapKey = Utilities.GetQuerystring('bingMapKey', '');
_bingMapKey = key;

var options = {
            credentials : _bingMapKey,
            zoom: parseInt(Utilities.GetQuerystring('zoom', '1')),
            center: new MM.Location(parseFloat(Utilities.GetQuerystring('lat', '0')),parseFloat(Utilities.GetQuerystring('lon', '0'))),
            showDashboard : false, 
            showScalebar: false, 
            showCopyright: false,
            enableSearchLogo: false, 
            enableClickableLogo: false,
            fixedMapPosition: true }; 
```

但是，HTML 文件仍然没有加载 Bing 地图。我可以看到，我仍在调用`GetQuerystring`以检索缩放级别和经纬度这一事实可能会出现问题，但我坚持这些。我不能像使用 API 密钥那样将缩放级别和经纬度硬编码到 Javascript 文件中。有没有办法解决？

PS Javascript 被标记是因为 Bing 地图使用 Javascript 来加载`MapView`.

# ruby-on-rails-3 - 设计，未定义的局部变量或方法 current_user

> ID：11693617
> 
> 赞同：0
> 
> 时间：2012-07-27T18:28:56.687
> 
> 标签：ruby-on-rails-3, devise

我有`Project`控制器和 rspec 文件。我`current_user`以这种方式使用助手：

```
# projects_controller_spec.rb

describe "user signed in" do
  before(:each) { sign_in @user }
  after(:each)  { sign_out @user}

  describe "GET index" do      
    it "assigns all projects as @projects" do
      project = FactoryGirl.create(:project, :user => current_user)
      get :index, {}, valid_session
      assigns(:projects).should eq([project])
    end
  end
  ...
end 
```

帮手`sign_in`，`sign_out`似乎工作正常，但我有一个错误`current_user`：

```
undefined local variable or method `current_user' 
```

可能是什么问题，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:33:58.067

这是正常的。您应该创建一个用户实例。你可以这样使用 let ：

```
# projects_controller_spec.rb

describe "user signed in" do

  let(:user) {FactoryGirl.create(:user)}
  before(:each) { sign_in user }
  after(:each)  { sign_out user}

  describe "GET index" do      
    it "assigns all projects as @projects" do
      project = FactoryGirl.create(:project, :user => user)
      get :index, {}, valid_session
      assigns(:projects).should eq([project])
    end
  end
  ...
end 
```

你知道 current_user 是 user ...

您无需在每个规范之后退出使用。

# javascript - 通过 Javascript 检测文档标题的变化

> ID：11693618
> 
> 赞同：14
> 
> 时间：2012-07-27T18:28:59.617
> 
> 标签：javascript, jquery, google-chrome-extension, webkit

有什么方法可以检测到`document.title`/`head > title`通过 Javascript 的更改？我想通过 Google Chrome 扩展内容脚本检测到这一点，所以我无法在目标页面的 JS 中真正连接代码，在其中执行实际的标题更改。

我发现 WebKitMutationObserver 理论上应该能够检测到的更改`head > title`，但它不适用于所有情况：

```
// set up an observer for the title element
var target = document.querySelector('title');
var observer = new WebKitMutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        console.log(mutation);
    });
});
var config = { attributes: true, childList: true, characterData: true };
observer.observe(target, config);

// this jQuery statement fires the observer as expected ...
$('head > title').text('foo');

// ... but this doesn't:
document.querySelector('title').innerText = 'cheezburger';

// ... and neither does this:
document.title = 'lorem ipsum'; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-27T19:12:14.603

我找到了一个完全可行的解决方案，它只是对我在原始帖子中发布的示例的一个小修改。

```
// set up an observer for the title element
var target = document.querySelector('head > title');
var observer = new window.WebKitMutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        console.log('new title:', mutation.target.textContent);
    });
});
observer.observe(target, { subtree: true, characterData: true, childList: true });

// all three of these methods correctly fire the mutation observer
setTimeout(function() { document.title = 'foo'; }, 1000); // the usual method
setTimeout(function() { document.querySelector('head > title').innerText = 'bar'; }, 2000); // DOM method
setTimeout(function() { $('head > title').text('cheezburger'); }, 3000); // jQuery-only method 
```

添加`subtree: true`是使此工作正常所需的全部内容。

最后在调用中包装三个换标题方法`setTimeout`只是为了演示目的；没有这个，标题值变化太快，以至于 WebKitMutationObserver 不会单独报告每个变化，因为 MutationObserver 旨在在执行观察者回调之前在短时间内累积变化。

如果不需要检测通过最后一个仅限 jQuery 的方法所做的标题更改，则`childList: true`可以从该`observer.observe`行中省略该属性；只`characterData: true`需要检测前两种标题更改方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:35:17.967

您的代码示例中同时包含 JQuery 和 Javascript。不确定您是否仅限于 JavaScript，但这是使用 jQuery 的方法

如果要触发更改，请查看：[http ://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

**jQuery**

```
$(document).ready(function () {
    $("title", "head").change(function () {
        console.log("Title has changed");
    });
    //Trigger Change
    $("title","head").text("New Title").trigger("change");
}); 
```

# python - 从 Django 中的相关类访问数据

> ID：11693635
> 
> 赞同：0
> 
> 时间：2012-07-27T18:29:56.653
> 
> 标签：python, django

我有以下代码：

```
class TelefoneIPInline(admin.StackedInline):
        model = MovimentoTelefoneIP
        extra = 1
        list_filter = ['nome']

class TelefoneIPAdmin(admin.ModelAdmin):
        list_display = ('mac', 'modelo', 'fornecedor', )
        list_filter = ['cliente__nome']
        search_fields = ['mac']
        inlines = [TelefoneIPInline]
        actions = [export_as_csv_action("Exportar para Excel", fields=['mac','modelo','cliente'])] 
```

我想知道是否有办法使用来自 MovimentoTelefoneIP 的字段，该字段是 TelefoneIP 的相关类，作为 list_display、list_display 或操作中的“字段”中的参数。

这是我的模型：

```
class TelefoneIP(models.Model):
        mac = models.CharField(max_length=12, help_text="Este campo deve ter 12 digitos")
        modelo = models.ForeignKey(ModeloTelefoneIP)
        cliente = models.ForeignKey(Cliente, verbose_name="Cliente Atual")
        fornecedor = models.ForeignKey(Fornecedor)
        datacompra = models.DateField(verbose_name="Data de compra", null=True, blank=True)
        nfcompra = models.IntegerField(verbose_name="Nota fiscal de compra", blank=True, null=True)
        obs = models.TextField(max_length=500, null=True, blank=True)

class MovimentoTelefoneIP(models.Model):
        equipamento = models.ForeignKey(TelefoneIP)
        cliente = models.ForeignKey(Cliente)
        nfvenda = models.IntegerField(verbose_name="Nota fiscal de saída", null=True, blank=True)
        datavenda = models.DateField(verbose_name="Data de saída", null=True, blank=True) 
```

谢谢。

尝试了克里斯的回答：

```
class TelefoneIPAdmin(admin.ModelAdmin):
        cliente = MovimentoTelefoneIP.objects.all()
        list_display = ('mac', 'modelo','get_clientes')
        search_fields = ['mac']
        list_filter = ['get_clientes']
        def get_clientes(self, obj):
                clientes = [m.cliente for m in obj.MovimentoTelefoneIP_set.all()]
                return u', '.join(clientes)
        get_clientes.short_description = 'Clientes'
        inlines = [TelefoneIPInline]
        actions = [export_as_csv_action("Exportar para Excel", fields=['mac','modelo','fornecedor'])] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:41:58.293

只需在您的方法上创建一个`ModelAdmin`返回其值的方法：

```
list_display('get_related_field')
...
def get_related_field(self, obj):
    return obj.related_object.some_field
get_related_field.short_description = 'Some Field' # Column header
get_related_field.admin_order_field = 'related_object__some_field' 
```

您可能应该添加：

```
list_select_related = True 
```

同样，这样它就不会每次都生成查询。

**更新**

不，这是不正确的。你想要这样的东西：

```
 def get_clientes(self, obj):
    clientes = [m.cliente for m in obj.movimentotelefoneip_set.all()]
    return u', '.join(clientes)
 get_clientes.short_description = 'Clientes' 
```

# php - 缩放水印以适合父图像

> ID：11693644
> 
> 赞同：3
> 
> 时间：2012-07-27T18:30:38.213
> 
> 标签：php, image-processing, image-resizing, watermark

我的照片尺寸各不相同，它们是横向、纵向或方形，我需要为每张照片制作最适合的水印 - 所以我只需要调整水印的宽度（没有 Imagick），因为它是一个长矩形，所以高度无关紧要。

我找到了 PHP 函数，`imagecopyresized`但老实说，即使查看 PHP 文档，我也无法确定我的情况需要哪些参数！我也不确定在使用 imagecopyresized 之后，我的函数的其余部分是否会在它获得水印宽度和高度的地方工作。

谁能帮我越过终点线。这就是我得到的结果，它所需要的只是将正确的参数添加到`imagecopyresized`部件中：

```
<?php

header('content-type: image/jpeg');

$image = imagecreatefromjpeg('https://.....jpg');
$imageSize = getimagesize('https://.....jpg');

$newWatermarkWidth = $imageSize[0]-50; // width of image minus 50px
$watermark = imagecreatefrompng('watermark.png');

// resize watermark to newWatermarkWidth here with imagecopyresize
$watermark = imagecopyresized(?,?,?,?);

$watermark_width = imagesx($watermark);
$watermark_height = imagesy($watermark);

$dest_x = ($imageSize[0]/2) - ($watermark_width/2) ;
$dest_y = ($imageSize[1]/2) - ($watermark_height/2);

imagecopy($image, $watermark, round($dest_x,0), round($dest_y,0), 0, 0, $watermark_width, $watermark_height);
imagejpeg($image);
imagedestroy($image);
imagedestroy($watermark);

?> 
```

* * *

**这就是我的结尾和完美的作品**

调整水印宽度以适应整个父图像的脚本，居中且成比例。

```
<?php
header('content-type: image/jpeg');

$image = imagecreatefromjpeg('http://mydomain.com/myPhoto.jpg');
$imageSize = getimagesize('http://mydomain.com/myPhoto.jpg');

$watermark = imagecreatefrompng('http://mydomain.com/myWatermark.png');

$watermark_o_width = imagesx($watermark);
$watermark_o_height = imagesy($watermark);

$newWatermarkWidth = $imageSize[0]-20;
$newWatermarkHeight = $watermark_o_height * $newWatermarkWidth / $watermark_o_width;

imagecopyresized($image, $watermark, $imageSize[0]/2 - $newWatermarkWidth/2, $imageSize[1]/2 - $newWatermarkHeight/2, 0, 0, $newWatermarkWidth, $newWatermarkHeight, imagesx($watermark), imagesy($watermark));

imagejpeg($image);

imagedestroy($image);
imagedestroy($watermark); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:43:48.323

这会调整水印的大小并直接复制到图像。

您不再需要现有的 imagecopy 行。

```
$success = imagecopyresized($image,                 // Destination image
           $watermark,                              // Source image
           $imageSize[0]/2 - $newWatermarkWidth/2,  // Destination X
           $imageSize[1]/2 - imagesy($watermark)/2, // Destination Y
           0,                                       // Source X
           0,                                       // Source Y
           $newWatermarkWidth,                      // Destination W
           imagesy($watermark),                     // Destination H
           imagesx($watermark),                     // Source W
           imagesy($watermark));                    // Source H 
```

# django - 如何使用变量来选择将在 Django 中使用的代理模型

> ID：11693653
> 
> 赞同：0
> 
> 时间：2012-07-27T18:30:59.863
> 
> 标签：django, django-models, proxy-classes

我有一个模型

```
#models.py
class BaseModel(model.Models)
    some_field = ...

class Proxy_1(BaseModel)
    class Meta:
        proxy=True

class Proxy_2(BaseModel)
    class Meta:
        proxy=True

class Proxy_3(BaseModel)
    class Meta:
        proxy=True 
```

在我看来

```
#views.py
    #check the field and based on the value
    #choose appropriate Proxy model
    if request.POST['some_field'] == '1'
        # Table_Name = Proxy_1   ??????? ---HERE ---
    if request.POST['some_field'] == '2'
        # Table_Name = Proxy_2   ??????? ---HERE ---
    if request.POST['some_field'] == '3'
        # Table_Name = Proxy_3   ??????? ---HERE ---

    foo = Table_Name.objects.get_or_create(...) 
```

我真的不知道该怎么做...显然我可以在 request.POST 调用之间编写 foo = Table_Name.objects.get_or_create(...) ，但是将来会太长且难以调试。

我的想法也是关于在 models.py 中创建一个函数来检查它，但又不知道该怎么做，或者可能以某种方式在我的 html 模板中检查它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:59:11.943

一个简单的解决方案是为您的模型创建一个表单并覆盖 save 方法以返回正确的代理实例：

```
# forms.py
PROXIES = {'1': Proxy_1, '2': Proxy_2, '3': Proxy_3}
class BaseModelForm(forms.ModelForm):
    class Meta:
        model = BaseModel

    def save(self, commit=True):
        instance = super(BaseModelForm, self).save(commit=True)
        if instance.some_field in PROXIES.keys():
            if commit:
                return PROXIES[instance.some_field].objects.get(pk=instance.pk)
            return PROXIES[instance.some_field](**self.cleaned_data)
        return instance

# views.py
def myview(request):
    form = BaseModelForm(request.POST or None)
    if form.is_valid():
        instance = form.save() 
```

# c# - Silverlight 工作线程完成工作后应该做什么？

> ID：11693655
> 
> 赞同：1
> 
> 时间：2012-07-27T18:31:01.847
> 
> 标签：c#, multithreading, silverlight, windows-phone-7, asynchronous

所以这是我的 Windows Phone 应用程序的问题。
我有可以导航到第 2 页的第 1 页。在第 2 页中，`OnNavigateTo`我进行了异步调用。
我第一次运行应用程序时这似乎没问题，异步调用创建了一个新的工作线程并为我工作，这很酷。
但我意识到，如果我回到第 1 页并重新调用第 2 页，就会出现问题：现在我有一个来自异步调用的新工作线程，而旧的工作线程没有被终止。所以两个工作线程之间存在竞争并导致我的应用程序出现问题。
我没有直接控制线程，因为它们是由异步方法隐式创建的。

所以在这种情况下，任何人都对如何处理它有建议，或者是否有处理这个问题的共同模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:41:14.347

这取决于您如何发出异步请求。如果你使用 say,`WebClient`来做类似的事情，`DownloadStringAsync`你会看到你的`WebClient`实例有一个方法`CancelAsync`可以将你的`Completed`事件处理程序中的取消属性设置为`true`. 离开页面时只需调用`CancelAsync`并在处理程序中对此进行测试，您应该会很好。

```
// in some button handler or whereever
webClient.DownloadStringAsync("http://url.com")

void OnLeavePage(object sender, EventArgs e) {
  webClient.CancelAsync();
}

void OnCompleted(object sender, DownloadStringCompletedEventArgs e) {
  if (e.Cancelled) {
    return;
  }

  // do your handling
} 
```

如果您没有，`CancelAsync`您可以传入一个`UserState`具有模拟行为的属性的对象`Cancelled`（当您离开并在处理程序中测试时将其设置为 true）。

# bash - 运行vim时仅使用bash自动完成文件名？

> ID：11693656
> 
> 赞同：5
> 
> 时间：2012-07-27T18:31:03.267
> 
> 标签：bash, vim

当我尝试使用 vim 打开文件时，是否有一些 bash 插件可以修改选项卡完成？例如，如果我有一个包含以下文件的目录：

*   富/
*   foo.c
*   富
*   酒吧.c
*   酒吧/

（其中 foo/ 和 bar/ 是目录，而 foo 是二进制文件）

我这样做：

> 虚拟机

然后点击选项卡，自动完成有没有办法忽略 foo/ 和 foo 二进制文件，并自动用“foo.c”填充它，因为这是唯一以 f 开头的文本文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:19:11.020

是的！它本身并不是一个真正的*插件，但您可以编辑 bash 的自动完成配置文件以匹配特定应用程序的参数。*在基于 Debian 的系统上，您可以在`/etc/bash_completion`.

事实上，在 Debian Administration 中有一个方便[的修改指南。`/etc/bash_completion`](http://www.debian-administration.org/articles/316)我确定您可以将文件名完成修改为仅接受非二进制文件。

# java - JAX-RS CXF：如何从 ResponseExceptionMapper 获取异常

> ID：11693659
> 
> 赞同：0
> 
> 时间：2012-07-27T18:31:20.177
> 
> 标签：java, cxf, jax-rs, cxfrs

我在服务器上有一个提供程序来编组 MyException 如下

```
Response.ok(myExceptionObj, MediaType.APPLICATION_JSON).status(Response.Status.BAD_REQUEST).build(); 
```

我想知道如何实现 CXF 的 ResponseExceptionMapper 以便我可以取回异常对象。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-30T17:47:17.293

我已经使用 ResponseExceptionMapper 为我完成了这项工作。

# javascript - 针对多个字段的简化 JQuery 自动完成解决方案

> ID：11693661
> 
> 赞同：1
> 
> 时间：2012-07-27T18:31:42.213
> 
> 标签：javascript, jquery, ruby, ruby-on-rails-3, json

我刚刚成功集成了 jquery 的自动完成功能，以便在您为不同的表以几种不同的形式输入多个文本字段时，从我的 rails 3 应用程序中的 mysql 数据库返回和过滤结果。

它非常有效，但绝对是一种低效的代码设置。我花了一些时间尝试以正确的方式编写它，但我就是无法正确地写出来；远远超出我目前的技能水平。

**我想我会在这里为那些仍在寻找的新手发布解决方案（因为即使这对我来说有点困难），看看是否有人可以通过一些技巧来推荐/指导我们以正确简化它？**

（这也是我的第一个 SO 贡献；我终于觉得我有一些有价值的东西，所以请原谅任何新手错误）

**在我的宝石文件中；**

```
group :assets do
     gem 'jquery-ui-rails'
end

gem 'jquery-rails' 
```

然后确保已安装所有 gem。

**在我的 application.css 文件中，该文件包含在必要的视图中；**

```
*= require jquery.ui.all 
```

**在一种形式的关联控制器文件中；**

```
 # GET /auto_custom_method1.json
  def auto_custom_method1
    render :json => Model.where("database_column_name1 LIKE ?", "%#{params[:term]}%").map(&:database_column_name1).uniq
  end

  # GET /auto_custom_method2.json
  def auto_custom_method2
    render :json => Model.where("database_column_name2 LIKE ?", "%#{params[:term]}%").map(&:database_column_name2).uniq
  end

  # GET /auto_custom_method3.json
  def auto_custom_method3
    render :json => Model.where("database_column_name3 LIKE ?", "%#{params[:term]}%").map(&:database_column_name3).uniq
  end

  # GET /auto_custom_method4.json
  def auto_custom_method4
    render :json => Model.where("database_column_name4 LIKE ?", "%#{params[:term]}%").map(&:database_column_name4).uniq
  end

  # GET /auto_custom_method5.json
  def auto_custom_method5
    render :json => Model.where("database_column_name5 LIKE ?", "%#{params[:term]}%").map(&:database_column_name5).uniq
  end 
```

**在关联的控制器文件中为另一种形式；**

```
# GET /auto_custom_method6.json
  def auto_custom_method6
    render :json => Model.where("database_column_name5 LIKE ?", "%#{params[:term]}%").map(&:database_column_name6).uniq
  end

  # GET /auto_custom_method7.json
  def auto_custom_method7
    render :json => Model.where("database_column_name5 LIKE ?", "%#{params[:term]}%").map(&:database_column_name7).uniq
  end

  # GET /auto_custom_method8.json
  def auto_custom_method8
    render :json => Model.where("database_column_name5 LIKE ?", "%#{params[:term]}%").map(&:database_column_name8).uniq
  end 
```

**在我的 application.js 文件中，该文件包含在必要的视图中；**

model_name、auto_custom_method 和 #field_id 都是根据您的独特应用程序定制的。

```
//= require query
//= require jquery_ujs
//= require jquery.ui.all

$(function() {
    $.getJSON("/model_name1/auto_custom_method1", function(data) {
        $("#field_id1").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name1/auto_custom_method2", function(data) {
        $("#field_id2").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name1/auto_custom_method3", function(data) {
        $("#field_id3").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name1/auto_custom_method4", function(data) {
        $("#field_id4").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name1/auto_custom_method5", function(data) {
        $("#field_id5").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name2/auto_custom_method6", function(data) {
        $("#field_id6").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name2/auto_custom_method7", function(data) {
        $("#field_id7").autocomplete({
            source: data,
            minLength: 1
        });
    });
});
$(function() {
    $.getJSON("/model_name2/auto_custom_method8", function(data) {
        $("#field_id8").autocomplete({
            source: data,
            minLength: 1
        });
    });
}); 
```

# mysql - MySQL精确搜索外来字符

> ID：11693664
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:32:14.423
> 
> 标签：mysql, search, foreign-keys, character, filtering

我有一个以 UTF-8 编码的 MySQL 数据库，其中包含英语和匈牙利语文本。

我正在研究搜索功能，结果是可以接受的，除了一件事：

搜索包含“á”、“é”、“í”、“ó”、“ö”、“ő”、“ú”、“ü”、“ű” 的字符串的结果是它们的所有出现，但也显示了“a”、“e”、“i”、“o”、“u”的结果。这样搜索就不会精确，因为它会产生很多不需要的记录，例如，我们得到了所有“bar”的“bar”（显然不一样）。

我以一种简单的方式通过 LIKE 进行了搜索（尽管它对于全词搜索或确切的词序有很多变体，但基本是相同的）：

```
SELECT * FROM table WHERE coloumn LIKE 'word' 
```

我怎样才能逃避不想要的结果？我不是 SQL 专家，也从未进行过这样的搜索，所以我需要一点帮助......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:45:21.090

不确定这是否可行，但您可以尝试使用

```
CAST(value1 AS BINARY) = CAST(value2 AS BINARY) 
```

做一个直接比较和

```
POSITION( CAST(value1  as BINARY) IN CAST(value2  as BINARY)) 
```

检查 value1 是否是 value2 的子字符串。
MySQL 不会为它们使用索引，因此您可能应该在正常的`WHERE`.

# shell - 当某些字段为空白时，使用 AWK 从数据库查询列表中列出几列？

> ID：11693665
> 
> 赞同：2
> 
> 时间：2012-07-27T18:32:14.970
> 
> 标签：shell, awk

我正在尝试使用 awk 有选择地显示数据库表中的几列（请参见下面的示例）。虽然并非所有字段都已填充，但我仍然需要返回一个空白字段来表示它。

```
--------- -------------------------- ------------ ------
000       0000000000198012           702          29
000       0000000000198013                        29
000                                  702          29
000       0000000000198015           702          03
055       0000000000000001           702 
```

这就是我正在使用的：

```
select * from db| awk '{print $1,$3,$4}' 
```

但在有空白字段的行中，awk 会跳过这些字段并显示下一个填充字段的结果。如何准确显示结果？

-谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:53:49.030

`gawk`有 FIELDWIDTHS
[http://www.gnu.org/software/gawk/manual/html_node/Constant-Size.html](http://www.gnu.org/software/gawk/manual/html_node/Constant-Size.html)
用法：
`command | awk -f foo.awk`

**foo.awk**

```
NR==1 {
    for (i=1; i<=NF; i++) {
      FIELDWIDTHS = FIELDWIDTHS " " length($(i))+1
    }
}

NR>1 {
    print $1, $3, $4
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T19:01:07.153

如果列具有一致/静态宽度，并且间距是用 ' ' 字符而不是制表符处理的（意味着每一行的长度相同，无论缺少字段），您可以使用`cut`适当的字段开始/停止位置列表.

# twitter-bootstrap - 从另一个模态对话框引导模态对话框

> ID：11693666
> 
> 赞同：1
> 
> 时间：2012-07-27T18:32:21.683
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap 模态插件，我有一个模态对话框，单击一个按钮，我想显示一个较小的模态对话框。

发生的事情是我的第二个较小的模态对话框并不是真正的模态对话框，因为我仍然可以访问它下面的第一个对话框（单击按钮选择文本等。）

我确实为第二个模式对话框设置了 data-backdrop="static" 属性，但它似乎无法正常工作。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:42:01.843

这是正常行为。背景和模态的`z-index`给定值是固定的，这意味着第二个背景仍然会比第一个模态具有更小的值。

如果您`z-index`在显示时增加第二个元素的 s，它可能会起作用。

恕我直言，您可能会发现在显示第二个模态时隐藏第一个模态更容易 - 因为该模态并不意味着同时在多个实例中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:47:29.690

是的，Sherbrow 是对的.. 解决它的方法是定位第一个模态的 ID，并将其 z-index 更改为新模态设置的 1050 和背景设置的 1040 之间的值调成..

就我而言，我使用了：

```
#modal1 {z-index: 1048;} 
```

现在，当我打开#modal1 并单击指向另一个模态的链接时，第二个模态会覆盖#modal1，但背景不会！

# iphone - IOS 为什么初始化失败，_variable 但不是 self.variable 的 NSNumber？

> ID：11693667
> 
> 赞同：0
> 
> 时间：2012-07-27T18:32:28.850
> 
> 标签：iphone, ios

我有以下课程：

---- .h 文件

```
#import <Foundation/Foundation.h>
#import "MapperProtocoll.h"

@interface ServiceRequest : NSObject {
}

@property (strong, nonatomic) NSString *url;
@property (strong, nonatomic) NSString *postData;
@property (strong, nonatomic) NSNumber *requestId;
@property (strong, nonatomic) id<ServiceMapperDelegate> mapper;

-(id)initWithUrl:(NSString *)url andWithPostdata:(NSString *)postData;

@end 
```

-------- .m 文件

```
#import "ServiceRequest.h"

@implementation ServiceRequest

@synthesize url = _url, postData = _postData, requestId = _requestId, mapper = _mapper;

-(id)initWithUrl:(NSString *)url andWithPostdata:(NSString *)postData {
    if (self = [super init]) {
        _url = url;
        _postData = postData;
        self.requestId = [NSNumber numberWithInt:-1]; // HERE IS THE PROBLEM
    }
    return self;
}

@end 
```

为什么 **self.requestId = [NSNumber numberWithInt:-1];** 工作但 **_requestId = [NSNumber numberWithInt:-1];** 抛出运行时错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:37:58.513

类方法`[NSNumber numberWithInt:-1]`返回一个自动释放的值。当您使用合成的 setter 方法时，该值由 setter 保留。当您绕过设置器时，没有保留...因此，一旦自动释放池耗尽，您就会有一个悬空指针。

# wxpython - 安排 wxpython 窗口从其内容中合理地继承其大小

> ID：11693669
> 
> 赞同：3
> 
> 时间：2012-07-27T18:32:30.207
> 
> 标签：wxpython

我已经编写了我的第一个 wxpython 应用程序，它运行良好，但我遇到了正确调整主窗口大小的困难。该面板包含一个`wx.BoxSizer`，而后者又包含一个`wx.FlexGridSizer`，而后者又包含 6 个`wx.TextCtrl`s。

我读过的教程似乎侧重于手动设置大小。我真正想做的是让`TextCtrl`s 计算出它们应该是什么大小以包含来自给定字体的 3 个字符（比如“WWW”），然后应该自动确定 FlexGridSizer 的大小和主窗户。我不需要担心调整布局的大小（所以也许 Sizer 不是必需的？），我只想自动确定大小，而不是通过我将魔术常量放入程序中。

```
import wx
from names_as_vs import name_sum, name_mult

NAME_SIZE = 35

class MyForm(wx.Frame):
    def __init__(self, parent,title):
        wx.Frame.__init__(self,parent,title=title,size=(405,200))

        self.default_init_UI()
        self.init_UI()
        self.Show()

    def default_init_UI(self):
        """Do all the standard UI stuff"""
        file_menu = wx.Menu()
        menuAbout = file_menu.Append(wx.ID_ABOUT,"About\tCtrl-A")
        menuExit = file_menu.Append(wx.ID_EXIT,"Quit\tCtrl-Q")

        menu_bar = wx.MenuBar()
        menu_bar.Append(file_menu,"File")
        self.SetMenuBar(menu_bar)

        self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
        self.Bind(wx.EVT_MENU, self.OnExit, menuExit)

    def init_UI(self):
        """Particular UI setup for this program"""

        hbox = wx.BoxSizer(wx.HORIZONTAL)
        panel = wx.Panel(self)
        fgs = wx.FlexGridSizer(2,5,9,9)

        fixed_elts_args = {"size":(30,70)}
        plus = wx.StaticText(panel, label="+", **fixed_elts_args)
        times = wx.StaticText(panel, label=".",**fixed_elts_args)

        equals1 = wx.Button(panel, label="=", **fixed_elts_args)
        equals2 = wx.Button(panel, label="=", **fixed_elts_args)
        equals1.Bind(wx.EVT_BUTTON, self.compute_sum)
        equals2.Bind(wx.EVT_BUTTON, self.compute_mult)

        font = wx.Font(48,wx.ROMAN,wx.NORMAL,wx.NORMAL)
        text_ctrl_args = {"size":(95,70)}
        self.summand1 = wx.TextCtrl(panel, **text_ctrl_args)
        self.summand2 = wx.TextCtrl(panel, **text_ctrl_args)
        self.scalar = wx.TextCtrl(panel, **text_ctrl_args)
        self.multiplicand = wx.TextCtrl(panel, **text_ctrl_args)
        self.sum_result = wx.TextCtrl(panel, style = wx.TE_READONLY, **text_ctrl_args)
        self.mult_result = wx.TextCtrl(panel, style = wx.TE_READONLY,     **text_ctrl_args)

        for ctrl in (plus,times,equals1,equals2,self.summand1,self.summand2,
                     self.scalar,self.multiplicand,self.sum_result,self.mult_result):
            ctrl.SetFont(font)

        fgs.AddMany([ 
            self.summand1,plus,self.summand2,equals1,self.sum_result,
            self.scalar,times,self.multiplicand,equals2,self.mult_result
            ])

        hbox.Add(fgs, proportion=1, flag= wx.ALL, border=15)
        panel.SetSizer(hbox)

    def OnAbout(self,e):
        dlg = wx.MessageDialog(self, "A GUI implementation of 815 as a vector space",     "About 815 as a vector space", wx.OK)
        dlg.ShowModal() # Shows it
        dlg.Destroy() # finally destroy it when finished.

    def OnExit(self,e):
        self.Close(True)  # Close the frame.

    def compute_sum(self,e):
        """Computes the sum of the names in summand1 and summand2 and displays the result in self.sum_result"""
        n1 = self.summand1.GetValue()
        n2 = self.summand2.GetValue()
        self.sum_result.SetValue(name_sum(n1,n2))

    def compute_mult(self,e):
        """
        Computes the scalar multiple of the name in multiplicand by the scalar in scalar and displays the result in self.mult_result
        """
        n = self.multiplicand.GetValue()
        lamb = self.scalar.GetValue()
        self.mult_result.SetValue(name_mult(lamb,n)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:24:19.890

您需要执行两个步骤来解决您的问题。

第一步是计算字符串的宽度（以“WWW”为例）。请查看[有关使用 wxpython 以像素为单位计算字符串宽度的 SO question](https://stackoverflow.com/questions/2455255/how-to-get-the-width-of-a-string-in-pixels)。一旦你有了宽度和高度，你就可以设置你的`wx.TextCtrl`尺寸。

第二步是设置`wx.Frame`大小。我想说的是，在 wxpython 术语中，任何可以出现在屏幕上的对象都称为窗口，而大多数用户将其称为窗口（即 MS Windows 中具有最小化/最大化/关闭按钮的东西）称为框架。我知道，这可能会让人感到困惑。

因此，您想使用内容的大小自动设置框架的大小。简单的！您想使用该`Fit()`方法（[文档](http://wxpython.org/docs/api/wx.Window-class.html#Fit)）。您也可以使用该`SetSizerAndFit()`方法（[文档](http://wxpython.org/docs/api/wx.Window-class.html#SetSizerAndFit)），但这只是一种同时调用两者的便捷`SetSizer()`方法`Fit()`。该`Fit()`方法查看对象内容的大小并相应地调整该对象的大小。不幸的是，在您的特定代码中并不是那么简单。

在您的代码中，您有一个`MyForm`（一个`wx.Frame`实例），其中包含一个`wx.Panel`然后包含您的尺寸器和您`wx.TextCtrl`的 s。不幸的是，这会导致`MyForm`根据内容计算 's 大小的问题，因此调用`Fit()`只会将其设置为默认大小。原因是`wx.Frame`s 根据它们的 sizer（由 分配`SetSizer()`）计算它们的大小，而 current`MyForm`没有 sizer，所以它不能根据你的内容计算大小`wx.Panel`。幸运的是，这个问题有两种解决方案，而且都很简单。

**1.删`panel`​​除并将所有内容设置为`MyForm`直接然后调用的子项`SetSizerAndFit()`**

这看起来像这样：

```
def init_UI(self):

    [...]

    #note that the parent is now "self" and not "panel"
    self.multiplicand = wx.TextCtrl(self, **text_ctrl_args)
    self.sum_result = wx.TextCtrl(self, style = wx.TE_READONLY, **text_ctrl_args)
    self.mult_result = wx.TextCtrl(self, style = wx.TE_READONLY,     **text_ctrl_args)

    [...]

    self.SetSizerAndFit(hbox) 
```

**2\. 放置在`panel`另一个尺寸器内并调用`SetSizerAndFit()``MyForm`**

看起来像这样：

```
def init_UI(self):

    [...]

    panel.SetSizer(hbox)

    sizer = wx.BoxSizer(wx.Horizontal)
    sizer.Add(panel)
    self.SetSizerAndFit(sizer) 
```

最后，我想快速解释一下为什么教程倾向于使用那些“神奇的数字”。UI 设计很困难，有时您需要像素完美的东西。如果您正在开发一个应用程序以在具有不同设置和屏幕分辨率甚至不同操作系统的不同计算机上使用，那么确保所有内容都一致地显示需要明确设置字体和大小等内容，而不是依赖系统默认值。随着您的进步并开始制作更复杂的 wxpython 应用程序，您会遇到有时无法正确计算对象大小的问题，并且使用我告诉您使用的方法仍然会使您的窗口太大/太小。请记住这一点，然后继续前进。

# jquery-mobile - 每次我导航到 jQueryMobile 页面时，Cordova 应用程序都会启动移动 Safari

> ID：11693673
> 
> 赞同：0
> 
> 时间：2012-07-27T18:32:47.517
> 
> 标签：jquery-mobile, cordova-2.0.0

每次我点击 jQuery Mobile 链接时，我的应用程序都会做正确的事情并导航到选择页面，但是当我在 iPhone 模拟器中运行时，它也会在 Mobile Safari 中启动该页面的副本。我确定我只是缺少一些配置设置。

这是我的mobileinit函数

```
$(document).bind('mobileinit', () -> 
  $.mobile.allowCrossDomainPages = true
) 
```

而且我已经修改了`ExternalHosts`数组以`Cordova.plist`将我的应用服务器的域名列入白名单。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:18:21.770

我有同样的问题。这个解决方案工作正常。

[http://moduscreate.com/opening-all-urls-with-phonegaps-childbrowser-plugin/](http://moduscreate.com/opening-all-urls-with-phonegaps-childbrowser-plugin/)

# actionscript-3 - 如何在 Flex 中更改 Popup 标题的 alpha

> ID：11693676
> 
> 赞同：0
> 
> 时间：2012-07-27T18:32:49.237
> 
> 标签：actionscript-3, apache-flex, flex3

我想让弹出窗口的标题比默认的更不透明。请看下图：

![在此处输入图像描述](../Images/45cd1d4377fdf90eed2c79a40e3f5be7.png)

我可以阅读它下面写的文字。有没有办法可以改变它的Alpha。我尝试使用以下方法更改标题颜色：

```
titleWin.setStyle("headerColors",  [blue, blue]); 
```

但它仍然将标题显示为透明。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:42:10.193

这似乎可以解决问题：

```
titleWin.setStyle("borderAlpha","1.0"); 
```

# javascript - JavaScript - 根据正则表达式更改文本颜色

> ID：11693678
> 
> 赞同：2
> 
> 时间：2012-07-27T18:32:52.483
> 
> 标签：javascript, css, regex

我希望能够使用搜索`textarea`所有 HTML 标记的特定属性的特定正则表达式来搜索 a 的内容（其中将包含用户可见的 HTML 标记）。然后我想更改`textarea`搜索结果的字体颜色（在同一范围内）。假设我有一个提交按钮，它将调用一个 JS 函数：

1.  创建一个变量，其值为`textarea`
2.  使用我的正则表达式搜索对象创建一个变量
3.  使用正则表达式字符串搜索`textarea.value`并更改所有匹配项的字体颜色

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:37:04.240

是的。但这需要一些工作。您很可能需要用 div 替换 textarea 并将其`contenteditable`属性设置为 true。然后，您可以用 span 包装匹配的单词并为这些 span 设置字体颜色。

[来自 MDN 的富文本编辑](https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla)

# c# - 多个属性合二为一？

> ID：11693681
> 
> 赞同：2
> 
> 时间：2012-07-27T18:32:57.843
> 
> 标签：c#, asp.net-mvc, inheritance, attributes

我有这些属性 (A,B) ：

```
[DataType(DataType.MultilineText)]
[Required(ErrorMessage = "A is required"), DisplayName("A")]
[StringLength(Constants.MaximunStringSize)]
public string A { get; set; }

[DataType(DataType.MultilineText)]
[Required(ErrorMessage = "B is required"), DisplayName("B")]
[StringLength(Constants.MaximunStringSize)]
public string B { get; set; } 
```

我可以通过其构造函数创建一个“继承”所有属性（DataType、Required、StringLength、DisplayName）和集合的类？举例：

```
[MyAttribute("A","A is required")]
public string A { get; set; }

[MyAttribute("B","B is required")]
public string B { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:35:26.027

一般来说，没有。

但是，对于验证属性，您可以创建自己的验证属性，其中包含现有属性中的所有逻辑。

要模拟`[DataType]`，您需要实现`IMetadataAware`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:35:39.713

C# 中没有多重继承，所以不，你不能这样做。

但是，您可以编写自己的 Attribute 来包含这些属性的所有功能。

# c++ - C++ 头文件中的 const 数组声明

> ID：11693690
> 
> 赞同：18
> 
> 时间：2012-07-27T18:33:48.567
> 
> 标签：c++, header, constants

我有一个名为 AppSettings 的类，其中有一个具有一系列音符频率的数组。我在下面的代码中遇到了几个错误，我不确定问题是什么。

错误消息是：

*   `static data member of type 'const float [36] must be initialized out of line`
*   `A brace enclosed initializer is not allowed here before '{' token`
*   `Invalid in-class initialization of static data member of non-integral type`

和代码：

```
class AppSettings{

public:
    static const float noteFrequency[36] = {
    //  C       C#      D       D#      E       F       F#      G       G#      A       A#      B
        130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, 196.00, 207.65, 220.00, 223.08, 246.94,
        261.63, 277.18, 293.66, 311.13, 329.63, 349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88,
        523.25, 554.37, 587.33, 622.25, 659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77
    };

}; 
```

顾名思义，这只是一个头文件，其中包含我在整个应用程序中需要的一些设置和值。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-27T18:38:21.883

您不能在类中定义`static`类成员的值。你需要在课堂上有这样的一行：

```
class AppSettings
{
public:
    static const float noteFrequency[]; 
```

然后在类的实现文件中（`AppSettings.cpp`也许）：

```
const float AppSettings::noteFrequency[] = { /* ... */ }; 
```

此外，您不需要在`[]`此处指定数字，因为 C++ 足够聪明，可以计算初始化值中的元素数量。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-27T19:01:43.083

这在 C++11 中工作得很好

```
class AppSettings{

public:
    static constexpr float noteFrequency[36] = {
//  C       C#      D       D#      E       F       F#      G       G#      A       A#      B
    130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, 196.00, 207.65, 220.00, 223.08, 246.94,
    261.63, 277.18, 293.66, 311.13, 329.63, 349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88,
    523.25, 554.37, 587.33, 622.25, 659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77
    };

}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-27T18:55:03.353

C++03 不支持复杂数据的类内定义，例如常量数组。

要将此类定义放在头文件中的命名空间范围内，并避免违反单一定义规则，您可以利用模板类的特殊豁免，如下所示：

```
#include <iostream>
using namespace std;

//----------------------------------------- BEGIN header file region
template< class Dummy >
struct Frequencies_
{
    static const double noteFrequency[36];
};

template< class Dummy >
double const Frequencies_<Dummy>::noteFrequency[36] =
{
    //  C       C#      D       D#      E       F       F#      G       G#      A       A#      B
    130.81, 138.59, 146.83, 155.56, 164.81, 174.61, 185.00, 196.00, 207.65, 220.00, 223.08, 246.94,
    261.63, 277.18, 293.66, 311.13, 329.63, 349.23, 369.99, 392.00, 415.30, 440.00, 466.16, 493.88,
    523.25, 554.37, 587.33, 622.25, 659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77
};

class AppSettings
    : public Frequencies_<void>
{
public:
};
//----------------------------------------- END header file region

int main()
{
    double const a = AppSettings::noteFrequency[21];

    wcout << a << endl;
} 
```

还有一些其他技术可以使用：

*   产生对数组的引用（或用作索引器）的内联函数。

*   将定义放在单独编译的文件中。

*   只需根据需要计算数字。

如果没有更多信息，我不想为您做出选择，但这应该不是一个困难的选择。

# scala - scala.actors 包消失了吗？

> ID：11693691
> 
> 赞同：6
> 
> 时间：2012-07-27T18:33:53.440
> 
> 标签：scala, actor, scala-2.10

在最新的里程碑中找不到 scala.actors 包，但它仍然出现在 scaladocs 中： [https ://oss.sonatype.org/content/groups/public/org/scala-lang/scala-library/2.10.0-M6](https://oss.sonatype.org/content/groups/public/org/scala-lang/scala-library/2.10.0-M6)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T18:50:43.890

scala-actors 库现在是一个单独的工件。您可以将其添加到您的项目中，例如

```
"org.scala-lang" % "scala-actors" % "2.10.0-M6" 
```

它在这里在线：

[https://oss.sonatype.org/content/groups/public/org/scala-lang/scala-actors/2.10.0-M6/](https://oss.sonatype.org/content/groups/public/org/scala-lang/scala-actors/2.10.0-M6/)

# android - Android - 带有基本适配器的 ListView 空指针异常

> ID：11693692
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:33:56.500
> 
> 标签：android, listview, android-custom-view, baseadapter

我正在为我最近完成的一个先前发布的 iOS 项目移植到 Android。此应用程序从站点解析 XML 并将 XML 元素中的文本填充到 ListView 中。我的 XML 解析部分没有问题。我遇到的问题是将这些数据加载到 ListView 中。我有一个自定义适配器来处理将填充在每一行上的文本和按钮，但是应用程序在我设置适配器的行崩溃：lv.setAdapter(adap)。该错误是空指针异常。错误和代码如下。我相信我错过了 ListView 和适配器的一步。我还验证了我的 ArrayList menuItems 有数据并且不为空。我将不胜感激任何输入、指导或反馈。

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to startactivity 
ComponentInfo{tv.undignified.android/tv.undignified.android.Undignified}:     
java.lang.RuntimeException: Unable to start activity ComponentInfo{tv.undignified.android/ java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{tv.undignified.android/tv.undignified.android.Podcasts}: java.lang.NullPointerException

Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{tv.undignified.android/tv.undignified.android.Podcasts}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
at android.widget.TabHost.setCurrentTab(TabHost.java:323)
at android.widget.TabHost.addTab(TabHost.java:213)
at tv.undignified.android.Undignified.onCreate(Undignified.java:48)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

主要代码：

```
public class Podcasts extends ListActivity{

    private static final String HASHMAP_ID = "_id";
    private CustomAdapter adap;

    static final String URL = "http://www.undignified.podbean.com/feed";

    //XML Node Keys
    static final String KEY_ITEM  = "item";
    static final String KEY_TITLE = "title";
    static final String KEY_DESCRIPTION = "itunes:subtitle";
    static final String KEY_PODCASTURL = "enclosure";

    public static final  ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 

        setContentView(R.layout.podcasts); 

        UndigParser uparser = new UndigParser();

        String xml = uparser.getXmlFromURL(URL);        

        Document doc = uparser.getDomElement(xml);    

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for(int i = 0; i < nl.getLength(); i++){

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_TITLE, uparser.getValue(e, KEY_TITLE));
            map.put(KEY_DESCRIPTION, uparser.getValue(e, KEY_DESCRIPTION));
            map.put(KEY_PODCASTURL, uparser.getValue(e, KEY_PODCASTURL));

            menuItems.add(map);
        }

        adap = new CustomAdapter(Podcasts.this, menuItems);           
       ListView lv = (ListView) findViewById(R.id.LinearLayout01);

       lv.setAdapter(adap);

    }

    public static class CustomAdapter extends BaseAdapter implements Filterable{

        private LayoutInflater mInflater;
        private Context context;

        public CustomAdapter(Context context, ArrayList<HashMap<String,String>>menuItems){

            mInflater = LayoutInflater.from(context);
            this.context = context;
        }

        public View getView(final int position, View convertView, ViewGroup parent){
            ViewHolder holder;

                convertView = mInflater.inflate(R.layout.list_item, null);

                holder = new ViewHolder();
                holder.description=(TextView)convertView.findViewById(R.id.description);
                holder.podcasturl=(TextView)convertView.findViewById(R.id.podcasturl);
                holder.title=(TextView)convertView.findViewById(R.id.title);
                holder.downloadBTN=(Button)convertView.findViewById(R.id.btnStartDownload);

                convertView.setOnClickListener(new OnClickListener(){
                    private int pos = position;

                    @Override
                    public void onClick(View v){
                        Toast.makeText(context, "Text-" + String.valueOf(pos), Toast.LENGTH_SHORT).show();
                    }
                });

                holder.downloadBTN.setOnClickListener(new OnClickListener(){
                    private int pos = position;

                    @Override
                    public void onClick(View v){
                        Toast.makeText(context, "Button-"+String.valueOf(pos), Toast.LENGTH_SHORT).show();
                    }
                });
                convertView.setTag(holder);
            return convertView;
        }

        static class ViewHolder{
            TextView description;
            TextView title;
            TextView podcasturl;
            Button downloadBTN;
        }

        @Override
        public int getCount() {

            Log.d("Sizetest2343",""+menuItems.size());
            return menuItems.size();
        }

        @Override
        public Object getItem(int position) {

            return null;
        }

        @Override
        public long getItemId(int position) {

            return position;
        }

        @Override
        public Filter getFilter() {
            return null;
        }
    }

 } 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip">

<LinearLayout
    android:id="@+id/LinearLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <Button
        android:id="@+id/startPodcastDownload"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:focusable="false"
        android:text="Download Podcast"> 
    </Button>        

</LinearLayout>    
        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/LinearLayout01"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <TextView
            android:id="@+id/description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/LinearLayout01"
            android:layout_below="@id/title"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <TextView
            android:id="@+id/podcasturl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/LinearLayout01"
            android:layout_below="@+id/description"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:50:03.930

我认为问题的一部分可能是您的代码行：

```
ListView lv = (ListView) findViewById(R.id.LinearLayout01); 
```

在这里，您尝试从 LinearLayout 制作 ListView。我的布局中通常会有这样的东西：

```
<ListView android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="0.7" /> 
```

然后你在你的活动中膨胀列表视图，如下所示：

```
ListView friendList = (ListView)findViewById(android.R.id.list); 
```

使用 android.R.id.list 参数很重要。

# dojo - Dojo 中的路由/模块化（单页应用程序）

> ID：11693695
> 
> 赞同：2
> 
> 时间：2012-07-27T18:34:04.320
> 
> 标签：dojo

我以前与骨干合作过，想知道是否有类似的方法可以在 dojo 中实现这种模式。如果您有一个路由器并分别传递您的视图（如图层），然后您可以在其他地方（例如视图内部）添加它们的实习生功能，因此代码非常模块化并且可以很容易地更改/添加新内容。这段代码实际上是在 jquery 中（并且来自以前的项目），它是在 jquery/backbone.js 下开发单个应用程序页面的“常见”基本模式。

**main.js**

```
var AppRouter = Backbone.Router.extend({

routes: {
        "home"                  : "home"},
home: function(){

        if (!this.homeView) {
            this.homeView= new HomeView();
        }
        $('#content').html(this.homeView.el);

        this.homeView.selectMenuItem('home-link');
    }};

utils.loadTemplate(['HomeView'], function() {
    app = new AppRouter();
    Backbone.history.start();
}); 
```

**实用程序.js**

```
loadTemplate: function(views, callback) {

        var deferreds = [];

        $.each(views, function(index, view) {
            if (window[view]) {
                deferreds.push($.get('tpl/' + view + '.html', function(data) {
                    window[view].prototype.template = _.template(data);
                }));
            } else {
                alert(view + " not found");
            }
        });

        $.when.apply(null, deferreds).done(callback);
    }}; 
```

**HomeView.js**

```
window.HomeView = Backbone.View.extend({

    initialize:function () {
        this.render();
    },

    render:function () {
        $(this.el).html(this.template());
        return this;
    }

}); 
```

基本上，您只需传递 html 模板。可以通过此链接在任何地方调用此模式：

```
<li class="active"><a href="#home"><i class="icon-home"></i> Dashboard</a></li> 
```

或者，使用 dojo 样板实现这一点的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:13:40.773

这个主题的“样板”是一个 dojox.mvc 应用程序。参考在这里。

从另一个方面来看，看看我前一阵子的做法，我为“控制器”设置了一个抽象，然后在其实现中构建了一个视图。

[抽象的](https://github.com/mschr/oocms/blob/master/admin/include/AbstractController.js)

然后我有一个[应用程序](https://github.com/mschr/oocms/blob/master/admin/include/application.js)控制器，它在其 menu.onClick 上执行以下操作

1.  触发加载图标，
2.  卸载当前窗格（如果表单不脏）
3.  加载它需要的模块（在主菜单商店中定义的“路线”）
4.  设置视图窗格，其中包含一个新的、请求的窗格

每个视图要么只是一个 server-html 页面，要么是使用声明的“oocms”控制器模块构建的。[这里是抽象实现](https://github.com/mschr/oocms/blob/master/admin/include/config.js)的最简单示例。每个都实现了一个卸载功能和一个启动功能，我们希望在拆卸中取消引用存储或事件挂钩 - 反过来，断言存储在设置中被加载等。

如果你想使用模板，那么你的观点基于 dijit._TemplatedMixin

## *编辑*

这是对我的 oocms 设置的简化说明，我不会将其基于 BorderLayout，而是将其设为 ContentPanes：

### 菜单的 JSON 示例，其中单个项目表示上述声明的视图

```
 {
    identifier: 'view',
    label: 'name',
    items: [
      { name: 'myForm', view: 'App.view.MyForm', extraParams: { foo: 'bar' } }
    ]
 } 
```

### 文件“AppPackagePath/Application.js”中的基本应用程序控制器

请注意，代码尚未经过测试，但应该可以很好地了解如何实现这样的设置

```
 define(['dojo/_base/declare', 
"dojo/_base/lang",
"dijit/registry",
"OoCmS/messagebus", // dependency mixin which will monitor 'notify/progress' topics'
"dojo/topic",
"dojo/data/ItemFileReadStore",
"dijit/tree/ForestStoreModel",
"dijit/Tree"

], function(declare, lang, registry, msgbus, dtopic, itemfilereadstore, djforestmodel, djtree) {
    return declare("App.Application", [msgbus], {

        paneContainer: NULL,
        treeContainer: NULL,
        menuStoreUrl: '/path/to/url-list',
        _widgetInUse: undefined,
        defaultPaneProps: {},
        loading: false, // ismple mutex
        constructor: function(args) {
            lang.mixin(this, args);
            if(!this.treeContainer || !this.paneContainer) {
                console.error("Dont know where to place components")
            }
            this.defaultPaneProps = {
                id: 'mainContentPane'
            }
            this.buildRendering();
        },
        buildRendering: function() {
            this.menustore = new itemfilereadstore({
                id: 'appMenuStore',
                url:this.menuStoreUrl
            });
            this.menumodel = new djforestmodel({
                id: 'appMenuModel',
                store: this.menustore
            });
            this.menu = new djtree( {
                model: this.menumodel,
                showRoot: false,
                autoExpand: true,
                onClick: lang.hitch(this, this.paneRequested) // passes the item
            })
                            // NEEDS a construct ID HERE
            this.menu.placeAt(this.treeContainer)
        },
        paneRequested: function(item) {
            if(this.loading || !item) {
                console.warn("No pane to load, give me a menustore item");
                return false;
            }
            if(!this._widgetInUse || !this._widgetInUse.isDirty()) {
                dtopic.publish("notify/progress/loading");
                this.loading = true;
            }
            if(typeof this._widgetInUse != "undefined") {
                if(!this._widgetInUse.unload()) {
                    // bail out if widget says 'no' (isDirty)
                    return false;
                }
                this._widgetInUse.destroyRecursive();
                delete this._widgetInUse;
            }

            var self = this,
                modules = [this.menustore.getValue(item, 'view')];
            require(modules, function(viewPane) {
                self._widgetInUse = new viewPane(self.defaultProps);

                            // NEEDS a construct ID HERE

                self._widgetInUse.placeAt(this.paneContainer)
                self._widgetInUse.ready.then(function() {
                    self.paneLoaded();
                })
            });
            return true;
        },
        paneLoaded: function() {
            // hide ajax icons
            dtopic.publish("notify/progress/done");
            // assert widget has started
            this._widgetInUse.startup();
            this.loading = false;
        }
    })
}) 
```

### 文件“AppPackagePath/view/AbstractView.js”中的 AbstractView：

```
define(["dojo/_base/declare",
"dojo/_base/Deferred",
"dojo/_base/lang",
"dijit/registry",
"dijit/layout/ContentPane"], function(declare, deferred, lang, registry, contentpane) {

    return declare("App.view.AbstractView", [contentpane], {
        observers: [],      // all programmatic events handles should be stored for d/c on unload
        parseOnLoad: false,
        constructor: function(args) {
            lang.mixin(this, args)
            // setup ready.then resolve
            this.ready = new deferred();
            // once ready, create
            this.ready.then(lang.hitch(this, this.postCreate));
            // the above is actually not nescessary, since we could simply use onLoad in contentpane
            if(typeof this.content != "undefined") {
                this.set("content", this.content);
                this.onLoad();
            } else if(typeof 'href' == "undefined") {
                console.warn("No contents nor href set in construct");
            }
        },
        startup : function startup() {
            this.inherited(arguments);
        },
        // if you override this, make sure to this.inherited(arguments);
        onLoad: function() {
            dojo.parser.parse(this.contentNode);
            // alert the application, that loading is done
            this.ready.resolve(null);
            // and call render
            this.render();
        },
        render: function() {
            console.info('no custom rendering performed in ' + this.declaredClass)
        },
        isDirty: function() { return false; },
        unload: function() {
            dojo.forEach(this.observers, dojo.disconnect);
            return true;
        },
        addObserver: function() {
            // simple passthrough, adding the connect to handles
            var handle = dojo.connect.call(dojo.window.get(dojo.doc), 
                arguments[0], arguments[1], arguments[2]);
            this.observers.push(handle);
        }
    });

}); 
```

### 查看文件“AppPackagePath/view/MyForm.js”中的实现示例：

```
define(["dojo/_base/declare",
"dojo/_base/lang",
"App/view/AbstractView",
// the contentpane href will pull in some html
// in the html can be markup, which will be renderered when ready
// pull in requirements here
"dijit/form/Form",  // markup require
"dijit/form/Button" // markup require
], function(declare, lang, baseinterface) {
    return declare("App.view.MyForm", [baseinterface], {
        // using an external HTML file
        href: 'dojoform.html',
        _isDirty : false,
        isDirty: function() {
            return this._isDirty;
        },
        render: function() {
            var self = this;
            this.formWidget = dijit.byId('embeddedForm') // hook up with loaded markup
            // observer for children
            dojo.forEach(this.formWidget._getDescendantFormWidgets(), function(widget){
                if(! lang.isFunction(widget.onChange) )
                    console.log('unable to observe ' + widget.id);
                self.addObserver(widget, 'onChange', function() {
                    self._isDirty = true;
                });
            });
        // 
        },

        // @override
        unload: function() {
            if(this.isDirty()) {
                var go = confirm("Sure you wish to leave page before save?")
                if(!go) return false;
            }
            return this.inherited(arguments);

        }
    })
}); 
```

# dns - 外部托管站点的 DNS 设置

> ID：11693696
> 
> 赞同：0
> 
> 时间：2012-07-27T18:34:13.020
> 
> 标签：dns

我有一个通过 Google Apps 购买的域，DNS 管理是通过 enom 进行的，但我希望将站点托管在其他地方（但保留所有 Google 应用程序服务，如文档、电子邮件、日历，如下所示）。我需要更改哪些内容才能将网站指向我的外部主机？

![DNS 设置](../Images/3d47c282d3734a82241a0b5d353d997d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:49:56.147

用新主机更新了 www 记录

# iphone - 制作一个可以连接另一个蓝牙设备的简单iphone应用

> ID：11693703
> 
> 赞同：14
> 
> 时间：2012-07-27T18:34:50.657
> 
> 标签：iphone, ios, xcode, bluetooth

我知道一些关于 iOS 编程的基本知识，现在我想将我的应用程序连接到另一个非 iPhone 设备，例如连接到可以控制灯泡开关或控制任何家具的蓝牙设备。

我的问题是，除了 iOS xcode，我需要学习什么样的程序才能实现我的目标？

有什么我可以从中学习的资源吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-27T18:57:16.813

对于低功耗蓝牙设备，您可以使用[CoreBluetooth](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)框架来访问它们。

对于使用 Dock 连接器的经典蓝牙设备或配件，协议未开放，需要加入 Made for iPhone (MFi) 计划。我不建议将其作为开始。

我的建议是购买例如支持低功耗蓝牙的 Polar 心率带。这些使用[标准协议](http://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx)。[Apple 提供了示例代码](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011322-Intro-DontLinkElementID_2)，显示了如何从此类设备中读取心率。

一旦你掌握了心率监测器的例子，下一步就是购买一个可编程的低功耗蓝牙芯片（然而，这些芯片的开发工具通常相当昂贵！）。这些芯片可以使用自定义配置文件进行编程，以侦听低功耗蓝牙连接，然后在写入特征时执行定义的操作（点亮 LED）。因此，您不仅限于心率监测器和类似设备。

您可以搜索的关键字：GATT 协议、低功耗蓝牙、CoreBluetooth。

我知道这对初学者来说是一个陡峭的学习曲线，但这个领域是相当新的。但是，我可以向您保证，这是一个有趣的区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:49:01.073

我还认为您应该研究从设备的嵌入式 C 编程（心率监视器）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T09:33:25.413

你可以花 150 美元买一个 tod 智能信标开发套件，然后使用 BGScript 对固件进行编码，以通过手机或电脑控制 BLE 设备。todhq.com 了解更多信息。

# python - 试图从 IRC 消息中隔离链接

> ID：11693705
> 
> 赞同：0
> 
> 时间：2012-07-27T18:34:59.517
> 
> 标签：python, regex, beautifulsoup, bots, irc

我有一个正在开发的 IRC 机器人，我希望它具有的功能之一是获取一个人发布的任何链接并使用 BeautifulSoup 来解析该页面。现在，我让机器人工作，获取人们发布的消息等。但是，我将如何从 IRC 消息中提取链接？假设有人这样说：

人：看看[http://www.site.com](http://www.site.com)，很酷！

我如何取出链接并将其分配给一个变量以供以后使用，而不提取消息的其他部分？

我认为这与正则表达式有关，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:42:15.310

您确实需要使用正则表达式。

有一篇不错的文章，其中包含用于匹配 URL 的正则表达式，并在一定程度上描述了它在[daring fireball](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)中所做的事情。

你可以在[这里](https://github.com/django/django/blob/master/django/utils/html.py#L160)查看 Django 是如何做到的。

最后，Python 的正则表达式[文档](http://docs.python.org/library/re.html)也可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:36:41.363

你正在完成这件事的确切轨道上。你用问题的最后一句话给了自己答案。您将使用带有捕获组的正则表达式来获取 url，然后您可以从那里解析/抓取用户在 irc 中所说的页面。

这个网站可能对你有用：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# perl - 使用 Image::Magick 和 Perl 使背景透明

> ID：11693706
> 
> 赞同：4
> 
> 时间：2012-07-27T18:35:14.390
> 
> 标签：perl, imagemagick, transparency

[我构建了一个使用Image::Magick](https://metacpan.org/module/Image::Magick)绘制横幅的 Perl 脚本。

```
# ... some code
my $icon = Image::Magick->new();
$icon->Set(size => '16x16');
$icon->Transparent(color=>'#010101');
$icon->ReadImage($imagepath);
$full_image->Composite( # small icon 
    image=>$icon,
    compose=>'Over',
    opacity=>'99%',
    x=>'12',
    y=>'62',
);
# ... some code 
```

通常图标背景（`#010101`）应该是透明的，但是失败了……知道为什么这不起作用吗？或者也许我可以用什么来代替这个透明方法？

**编辑：**两个图像都是`PNG`文件。`Image::Magick`版本是6.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:36:29.477

我并没有真正使用这个模块，但我有几个想法:)

1.  您将 $full_image 的不透明度设置为 99%。您不希望以较小的值使图像透明吗？

2.  根据[这个](http://www.imagemagick.org/script/perl-magick.php)页面，你可以调用一个名为 opaque 的方法：

    > **不透明**: color=>color name, fill=>color name, channel=>{All, Default, Alpha, Black, Blue, CMYK, Cyan, Gray, Green, Index, Magenta, Opacity, Red, RGB, Yellow}, 反转=>{对，错}

3.  我会先阅读图像，然后使颜色透明（以防万一）：

    ```
    $icon->ReadImage($imagepath);   
    $icon->Transparent(color=>'#010101'); 
    ```

4.  （**丑陋的黑客**）在图像上运行转换作为系统命令，然后加载它：

    ```
    my $icon = Image::Magick->new();
    $icon->Set(size => '16x16');
    system("convert -transparent '#010101' not_transp.png transp.png");
    $icon->ReadImage('transp.png');
    $full_image->Composite( # small icon 
        image=>$icon,
        compose=>'Over',
        opacity=>'99%',
        x=>'12',
        y=>'62',
    ); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:48:28.193

您需要告诉 ImageMagick 使用 Alpha 通道。

在命令行上，这将是`-alpha On`.

# python - Python 共享内存数组，没有属性 get_obj()

> ID：11693714
> 
> 赞同：7
> 
> 时间：2012-07-27T18:35:39.997
> 
> 标签：python, numpy, multiprocessing, ctypes

我正在使用多处理模块操作 numpy 数组，并且在尝试我在这里运行的一些代码时遇到了问题。具体来说，我正在从一个 numpy 数组创建一个 ctypes 数组，然后尝试将 ctypes 数组返回到一个 numpy 数组。这是代码：

```
 shared_arr = multiprocessing.RawArray(_numpy_to_ctypes[array.dtype.type],array.size) 
```

我不需要任何同步锁，所以我使用的是 RawArray。ctypes 数据类型是根据输入数组的 dtype 从字典中提取的。那工作得很好。

```
 shared_arr = numpy.ctypeslib.as_array(shared_arr.get_obj()) 
```

在这里，我得到一个堆栈跟踪说明：

```
 AttributeError: 'c_double_Array_16154769' object has no attribute 'get_obj' 
```

我还尝试了[这篇文章](https://stackoverflow.com/a/7908612/839375)中的以下内容，但得到了相同的错误。

```
 def tonumpyarray(shared_arr):
        return numpy.frombuffer(shared_arr.get_obj()) 
```

我被困在运行 python 2.6 并且不知道这是否是问题，是否是共享变量名称的问题（我试图保持内存使用尽可能低，并且试图不复制 numpy 数组和 ctypes内存中的数组），或者我刚刚学习python的这个组件的其他东西。

建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T04:12:54.477

由于你使用的是 RawArray，它只是一个从共享内存分配的 ctypes 数组，没有包装对象，所以你不需要 get_obj() 方法来获取包装对象：

```
>>> shared_arr = multiprocessing.RawArray("d",10)
>>> t = np.frombuffer(shared_arr, dtype=float)
>>> t[0] = 2
>>> shared_arr[0]
2.0 
```

# php - PHP'无法加载动态库...找不到过程'

> ID：11693716
> 
> 赞同：0
> 
> 时间：2012-07-27T18:35:55.777
> 
> 标签：php, zend-framework, php-extension, dynamic-library

这是我使用 Zend Framework 和 appServ 的第一天，我使用了 NetBeans IDE，但我收到了这个错误。

> PHP 启动：无法加载动态库 'G:/PROGRA~2/AppServ\php5\ext\php_exif.dll' - 找不到指定的程序。

我很惊讶，因为当我在谷歌上搜索时，这个文件已经存在，我发现我可以通过更改 php.ini 中的扩展顺序并将 ;extension=php_exif.dll 放在其他的末尾来解决这个问题。但错误仍然存​​在。

请帮帮我；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:09:43.637

您必须在 php_exif.dll**之前**加载 php_mbstring.dll 。

# android - 活动后台堆栈中的问题

> ID：11693717
> 
> 赞同：0
> 
> 时间：2012-07-27T18:35:56.373
> 
> 标签：android

Activity`A`是启动器活动。我有一个广播接收器，它接收传入的消息并调用活动`B`（只是一个显示消息的弹出窗口）。

这是我用来调用的代码`B`：

```
intent.setClass(context, popup.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(intent); 
```

每当`B`调用活动时，`A`即使它在后台，也会在它后面（前台）。`A`在接收器的任何地方都没有被调用。

我怎么能在`B`没有`A`显示的情况下打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:39:11.927

Activity B 需要与 ActivityA 不同的 taskAffinity。在您的清单中，将此添加到 ActivityB 的 ` 标记中：

```
android:taskAffinity="" 
```

当你做你正在做的事情时，当 Android 想要启动 ActivityB 时，它会找到一个与 ActivityB 具有相同 taskAffinity 的现有任务，并将该任务带到前台（即使你指定了你想要一个 NEW_TASK）。这是一项功能，而不是错误 ;-)

# javascript - Backbone：如何调用父父视图？

> ID：11693719
> 
> 赞同：1
> 
> 时间：2012-07-27T18:36:07.013
> 
> 标签：javascript, backbone.js

我得到以下嵌套视图结构：

```
LayoutView
  - SidebarView
    - ContactListView
      - ContactItemView
  - ContentView 
```

现在想象以下情况：

用户单击 ContactItem。现在，ContactItem 应该调用一个事件或其他东西，以在 ContentView 中呈现单击的联系人的配置文件。

我不知道如何在不破坏灵活性的情况下做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:06:35.547

一种方法是使用事件聚合器，它使您的视图能够订阅某些事件。这将允许您将视图彼此分离。您的视图不需要相互了解，它们只需要跟踪某些事件。有关如何执行此操作的精彩教程，请参阅[Derick Bailey](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)关于该主题的出色帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:51:51.137

您可能希望使用事件将它们连接在一起，而不是让 ContactItemView 直接调用 ContentView。在创建视图时，每个父视图都可以绑定到子视图的事件。然后当点击发生时，它将通过链冒泡，直到适当的视图处理它。

这是一个简单的例子来展示一般的想法。我按照事件冒泡发生的顺序来呈现这个，希望它更清楚一点。

首先，ContactItemView 获取 DOM click 事件并为其触发 Backbone 事件。

```
//ContactItemView.js
events : {
   "click .contactName" : "click"
},

click : function(evt){
   this.trigger("clicked", this);
} 
```

ContactListView 可以监听并重新发布它：

```
//ContactListView.js    
render : function(){
 var itemView = new ContactItemView();
 itemView.on("clicked", this.itemClicked, this);
},

itemClicked : function(item){
  this.trigger("clicked", item);
} 
```

SidebarView 监听该事件，并且实际上知道如何处理它：

```
//SidebarView.js    
render: function(){
  var listView = new ContactListView();
  this.contentView = new ContentView();
  listView.on(clicked, this.contactItemClicked, this);
},

contactItemClicked : function(contactItem){
   this.contentView.showMeAContact(contactItem.model); //or whatever
} 
```

这样，您的 ContactItemView 对父视图一无所知，因此可以更加灵活。缺点是它有很多样板代码。也许其他人会有更清洁的方法，但这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:54:39.400

查看[Backbone.Courier](https://github.com/rotundasoftware/backbone.courier)。它是一个轻量级的主干插件，专为您描述的那种“事件冒泡”场景而构建，使子视图可以轻松地与父母、祖父母等进行通信，而无需触发链或全局事件聚合器。

# c# - iis7.0打不开asp.net4.0网站

> ID：11693722
> 
> 赞同：0
> 
> 时间：2012-07-27T18:36:30.617
> 
> 标签：c#, asp.net, iis, isapi

我在 IIS7.0 上有一个不会加载的 asp 4.0 站点。错误消息： **HTTP 错误 404.17 - 未找到。**

IIS 中不存在 4.0 的 ISAPI 筛选器。

**aspnet_regiis.exe**不存在于：

**C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319**。所以我不能安装它。

**aspnet_filter.dll**也不存在于上述文件夹中。

我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:44:16.523

如果您在 .NET 安装中缺少一些东西，我会打开程序和功能并在您的 .Net 4 项目上执行上下文菜单->修复。

如果那里没有此类项目，请检查您的功能。如果它们在那里也不可用，请从网上下载全新安装。

# ios - 为 CPF 和 CNPJ 格式化文本字段

> ID：11693724
> 
> 赞同：0
> 
> 时间：2012-07-27T18:36:33.593
> 
> 标签：ios, formatting

我应该如何处理 iOS 中的文本格式？我不是在谈论货币或小数样式。由于iOS没有`setFormat()`，所以有点复杂。

我想要的格式的两个示例：`123.456.789-10`和`123.456.789/1000-00`.

我的目标是在用户键入时格式化文本字段。例如，当您键入电话号码时，就像任何普通网站一样。它不是来自模型或任何东西。用户只需要输入数字，必要时我会插入`".","/"`or `"-"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T19:10:27.443

您可以使用正则表达式进行格式化，如下所示：

```
NSRegularExpression *fmt = [NSRegularExpression
    regularExpressionWithPattern:@"(.{1,3})(.{1,3})(.{1,3})(.{1,2})"
                         options:0
                           error:NULL];
NSMutableString *str = [NSMutableString stringWithString:@"12345678910"];
[fmt replaceMatchesInString:str
                    options:0
                      range:NSMakeRange(0, str.length)
               withTemplate:@"$1.$2.$3-$4"]; 
```

这将字符串转换为`123.456.789-10`

为了在用户键入时动态应用此格式，`NSRegularExpression *fmt`请预先创建，将其存储在您的中，然后在您的方法`UITextFieldDelegate`中使用它。`textField:shouldChangeCharactersInRange:replacementString:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:41:17.937

几天前我创建了自己的方法来检查有效的温度输入。这也有点痛苦，因为我必须检查： -只有数字 -只有一位小数 -如果有负号，它必须在前面

我最终使用`[my string characterAtIndex:index];`并检查了每个字符，因为我不会超过 4 个字符。

编辑：

这是一些伪代码

```
for (every char in your string)
    if(the index of the char % 3 == 2) //every third char, 0,2,5...
        the char must be a . or / or -

    else
        the char must be a number 
```

# mysql - mysql 授予 + 在哪里

> ID：11693727
> 
> 赞同：5
> 
> 时间：2012-07-27T18:36:43.407
> 
> 标签：mysql, grant

我只想授予 mysql 中指定行的权限。表：消息 cols：从，到，消息

`GRANT ALL ON db.messages TO 'jeffrey'@'localhost' WHERE messages.from = 'jeffrey' OR messages.to = 'jeffrey' ;`

有了这样的东西，用户只能访问他自己的消息。

你知道如何解决问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:39:49.357

根据该[`GRANT`](http://dev.mysql.com/doc/refman/5.0/en/grant.html)命令，无法在每行的基础上设置权限级别（表/列，是的 - 但不是单独的行）。

您可以设置一个[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)来处理这个问题，并授予用户访问视图的权限。

如下所示的视图应该会根据当前用户为您提供消息：

```
CREATE VIEW user_messages AS
    SELECT *
    FROM messages
    WHERE
        messages.from = user() OR messages.to = user(); 
```

并且授权声明应该是类似的：

```
GRANT ALL ON db.user_messages TO 'jeffrey'@'localhost'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:38:37.413

MySQL 没有行级权限。您有数据库、表和列。不是行。对于行级，使用视图和/或适当的`where`子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:59:08.160

如果您想要行级权限，则必须添加自己的机制。通常它是一个整数，用作位模式

例如 0x0002 是主管级访问

用户 Fred 是主管，因此他们的权限为 0x0002，并且他们的 UserId 为 23

然后像

```
Select * From SomeTable
inner Join myUsers On MyUsers.UserID = 23 and (SomeTable.PermissionID & MyUsers.PermissionID) > 0 
```

因此，Fred 只能访问设置了 bit 1（Big endian ！）的 permissionId 的行。

尽管要维护主要的 PIA，但请进行深入思考。

# lua - 在这个 Lua 模式中括号的用途是什么？

> ID：11693730
> 
> 赞同：4
> 
> 时间：2012-07-27T18:36:57.047
> 
> 标签：lua, lua-patterns

基本字符串是：`IP: 192.168.0.1`

将该字符串传递给 string.gmatch 函数（除了下面的模式）将返回以下结果：

模式：`IP: (%d+.%d+.%d+.%d+)` -->192.168.0.1

模式：`IP: %d+.%d+.%d+.%d+` -->IP：192.168.0.1

我的问题是，这些括号对 Lua 模式匹配引擎的含义是什么？为什么通过在第一个模式中使用括号，`IP:`省略了字符串但在第二个模式中没有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T19:07:04.107

括号内的任何内容都是[捕获组](http://www.lua.org/manual/5.1/manual.html/#5.4.1)；与括号中的模式部分匹配的输入字符串的任何部分都由`match()`and捕获并返回`gmatch()`。如果模式中没有捕获组，则返回整个字符串。

```
local x, y, z = ("123456"):match("(%d)%d(%d)%d(%d)%d")
print(x, y, z)
-- 1, 3, 5 
```

在指定关联的捕获组之后的任何时候`%1`，`%2`等都可以用于访问捕获的值：

```
local x, y = ("123123123"):match("(%d%d%d)%1(%1)")
print(x, y)
-- 123, 123 
```

这在 的第三个参数中最常见`string.gsub()`，但可以在任何模式匹配函数中使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T18:48:15.013

在这种情况下，它应该只用于对事物进行分组，这在这里都无关紧要。

# mysql - 如何以相反的顺序检索记录？

> ID：11693737
> 
> 赞同：0
> 
> 时间：2012-07-27T18:37:34.577
> 
> 标签：mysql

对于新闻报道应用程序，例如 Facebook 中的应用程序，我们看到当我们进一步滚动时，会出现较旧的新闻。现在，新闻肯定会在它们出现时被插入到表中，因此正常的选择总是会更早地检索较旧的记录，而这里会发生相反的情况。我假设它的完成方式是当用户向下滚动到最后时，FB 发送一个 Ajax 请求，其中包含当前出现在股票行情中的最后一个新闻 id 的 id（在 Firebug 中无法确定，FB 发送负载数据！），PHP 查询数据库，根据**时间**列翻转结果集，然后提取具有收到 id 的记录之后的接下来的 5 条记录。现在这样的表很大，所以频繁地翻转它们肯定会对数据库造成沉重的负担。那么有什么方法可以在不翻转的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:49:23.390

如果您没有在查询中指定 ORDER BY 变量，则不能保证 MySQL 按插入顺序返回记录。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/1793467/1146835)。如果您想确保获得最新的行，则需要有一个插入时间列并对其进行排序。

如果您按 排序`time desc`，那么您可以使用通常的 LIMIT 子句仅请求前 5 条记录（即最近的 5 条），或某个 ID 之后的 5 条最近的记录，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:48:40.300

是的，请记住，我们正在非常抽象地谈论这个。如果您想以相反的顺序访问索引集合。

```
$collection = array(); // Filled through request to server
....
for ($i = sizeof($collection)-1; $i >= 0; $i--) {
    echo $collection[$i]
    .... // execute some action based on access to 
} 
```

也就是说，没有理由不能从最后一个索引访问数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T18:51:27.913

在您的 sql 语句中指定`order by`以首先获取最旧的。并做得到`where id > last_id`之后的行`last_id`

# javascript - 无需单击登录按钮即可提交登录表单

> ID：11693739
> 
> 赞同：0
> 
> 时间：2012-07-27T18:37:38.017
> 
> 标签：javascript, dom

所以我有一个 login.jsp，我在其中硬编码了用户名和密码值。我的问题是我希望登录自动提交用户名和密码值，而用户不必物理单击登录。因此，在用户被重定向到下一页之前，登录屏幕几乎只能在瞬间可见。

```
 <div class="center-me">
<form:form name="login" id="login">

<div class="login_header_logo">
    <img border="0" src="<c:url value='img/pidslogo.gif' />" />
</div>

<div id="login_header">
    <h1>Login</h1>
</div><!-- #login_header -->

<div id="login_content">

    <form:errors path="*" cssClass="validationErrors" />    

    <table id="form_fields">
    <tr>
        <td class="label">
            Username:
        </td>
        <td class="field">
            <form:input path="username" cssClass="inputField" />
        </td>
    </tr>
    <tr>
        <td class="label">
            Password:
        </td>
        <td class="field">
            <form:password path="password"cssClass="inputField" />
        </td>
    </tr>
    <tr <c:if test="${repoListSize <= 1}">class="repository" style="display:none" </c:if>>
        <td class="label">
            Repository:
        </td>
        <td class="field">
            <form:select id="repository" path="repository" multiple="false">
                <c:forEach items="${repoList}" var="item">
                    <form:option value="${item.valueField}">${item.labelField}  </form:option>
                </c:forEach>
            </form:select>
        </td>
    </tr>
    </table>

    <div id="submit1">
        <input type="submit" value="Login" />
    </div> 

</div><!-- #login_content -->

</form:form><!-- #login -->
</div>

<script language="javascript">
TSG.util.onPageReady(function() {
    if (parent.frames.length > 0)
    {
        parent.location = this.location;
    }
    if (window.opener)
    {
        window.opener.document.location=this.location;
        window.close();
    }
    document.login.username.focus();
    Nifty("div#login_header","top, big");
});

document.getElementById("username").value = "111111111";
document.getElementById("password").value = "111111111";

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:43:57.303

只需在脚本部分的末尾添加以下行，即可自动提交登录表单：

```
document.forms["login"].submit(); 
```

# php - XML 是自动编码的

> ID：11693741
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:37:42.350
> 
> 标签：php, xml, html-encode

我正在尝试动态创建 XML，但我遇到了一个障碍，由于某种原因，它会自动对 < 和 > 进行编码，我需要它来阻止它，因为它破坏了我的标签，但我在我的函数中看不到任何地方它告诉它进行编码。

```
function GenerateList($titleB, $descB, $thumbB, $dirB, $patternB){
if (is_dir($dirB)){
$myDirectory = opendir($dirB);
// get each entry
while($entryName = readdir($myDirectory)) {
    $dirArray[] = $entryName;
}

// close directory
closedir($myDirectory);

//  count elements in array
$indexCount = count($dirArray);
print ("<center><h1>'$titleB' Directory</h1>");
$true_count = 0;

// sort em
sort($dirArray);
$outputB = "<CATEGORY name=\"$titleB\" desc=\"$descB\" thumb=\"$thumbB\">";
print("<TABLE border=1 cellpadding=5 cellspacing=0 class=whitelinks>");
print("<TR><TH>Filename</TH><th>Filesize</th><TH>Filename</TH><th>Filesize</th><TH>Filename</TH><th>Filesize</th></TR>");
print("<TR><TD colspan=2><TABLE border=0 cellpadding=0 cellspacing=0 class=whitelinks>");
// loop through the array of files and print them all
$one_third = round($indexCount/3);
$two_third = $one_third+$one_third;
for($index=0; $index < $indexCount; $index++) {
    $ext = explode(".", $dirArray[$index]);
    $parsed_title = preg_replace ($patternB, "", $ext[0]);
    if ((substr("$dirArray[$index]", 0, 1) != ".")&&($ext[1] == "flv")){ // don't list hidden files
        $true_count++;
        print("<TR><TD><a href=\"$dirB$dirArray[$index]\">$parsed_title</a></td>");
        print("<td>");
        print(filesize($dirB.$dirArray[$index]));
        print("</td>");
        print("</TR>");
            if ($one_third == ($index+1) || $two_third == ($index+1)){
                print("</td></TR></table>");
                print("</TD><TD colspan=2><TABLE border=0 cellpadding=0 cellspacing=0 class=whitelinks>");
            }
        $outputB .= "<ITEM>";
        $outputB .= "<file_path>/$dirB".htmlentities($dirArray[$index])."</file_path>";
        $outputB .= "<file_width>500</file_width>";
        $outputB .= "<file_height>375</file_height>";
        $outputB .= "<file_title>".$parsed_title."</file_title>";
        $outputB .= "<file_desc>Loaded from a seperate txt file, index to match with the index of the dir file</file_desc>";
        $outputB .= "<file_image>$thumbB</file_image>";
        $outputB .= "<featured_image>$thumbB</featured_image>";
        $outputB .= "<featured_or_not>true</featured_or_not>";
        $outputB .= "</ITEM>";
    }
}
print("</td></TR></table>");
print("</TR><td colspan=6 align=right>$true_count files</td></TABLE>");
};//if (file_exists($dirB))
$outputB .= "</CATEGORY>";
return $outputB;
};//function 
```

然后我获取几个函数调用的最终输出并将其传递给 xml 解析器

//$output = 几个 GenerateList 函数的连接返回 $dom = new DOMDocument('1.0', 'utf-8');

```
$element = $dom->createElement('CONTENT',$output);

$dom->appendChild($element);
  $xml_final = $dom->saveXML(); 
  $dom->save("playlist.xml") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:23:59.310

PHP 不是我的事，只是为了让你上路。

DOMDocument 应该有类似 LoadXml 的方法。

因此，您需要在 $output、?xml 标记和根节点等中添加更多内容，然后创建 DoMDocument 并调用 LoadXml($output)

或任何类似的方式。

# java - java getRuntime().exec() 不工作？

> ID：11693748
> 
> 赞同：1
> 
> 时间：2012-07-27T18:38:13.303
> 
> 标签：java, runtime, exec

基本上，当我在终端中手动键入这些命令时，sift 程序会工作并写入一个 .key 文件，但是当我尝试从我的程序中调用它时，什么都没有写入。

我是否正确使用了 exec() 方法？我查看了 API，但似乎无法发现哪里出错了。

```
public static void main(String[] args) throws IOException, InterruptedException
{           
        //Task 1: create .key file for the input file
        String[] arr  = new String[3];
        arr[0] =  "\"C:/Users/Wesley/Documents/cv/final project/ObjectRecognition/sift/siftWin32.exe\"";
        arr[1] = "<\"C:/Users/Wesley/Documents/cv/final project/ObjectRecognition/sift/cover_actual.pgm\"";
        arr[2] = ">\"C:/Users/Wesley/Documents/cv/final project/ObjectRecognition/sift/keys/cover_actual.key\"";

        String command = (arr[0]+" "+arr[1]+" "+arr[2]);

        Process p=Runtime.getRuntime().exec(command); 
        p.waitFor(); 
        BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
        String line=reader.readLine(); 

        while(line!=null) 
        { 
            System.out.println(line); 
            line=reader.readLine(); 
        } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:47:00.590

您使用的命令行是 DOS 命令行，格式如下：

```
prog < input > output 
```

程序本身不带参数执行：

```
prog 
```

但是，您的代码中的命令执行为

```
prog "<" "input" ">" "output" 
```

可能的修复：

a) 使用 Java 处理输入和输出文件

```
Process process = Runtime.getRuntime().exec(command);
OutputStream stdin = process.getOutputStream();
InputStream stdout = process.getInputStream();

// Start a background thread that writes input file into "stdin" stream
...

// Read the results from "stdout" stream
... 
```

请参阅：[无法从 Java 进程（Runtime.getRuntime().exec() 或 ProcessBuilder）读取 InputStream](https://stackoverflow.com/questions/3159913/problem-reading-inputstream-from-java-process-runtime-getruntime-exec-or-pr)

b) 使用 cmd.exe 按原样执行命令

```
cmd.exe /c "prog < input > output" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:44:06.470

您不能使用重定向（`<`和`>`），`Runtime.exec`因为它们是由 shell 解释和执行的。它仅适用于一个可执行文件及其参数。

进一步阅读：

*   [https://stackoverflow.com/a/11250789/105224](https://stackoverflow.com/a/11250789/105224)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:48:44.997

您不能将输入/输出重定向与`Runtime.exec`. 另一方面，同样的方法返回一个`Process`对象，你可以访问它的输入和输出流。

```
Process process = Runtime.exec("command here");

// these methods are terribly ill-named:
// getOutputStream returns the process's stdin
// and getInputStream returns the process's stdout
OutputStream stdin = process.getOutputStream();
// write your file in stdin
stdin.write(...);

// now read from stdout
InputStream stdout = process.getInputStream();
stdout.read(...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T16:13:33.540

我测试，没问题。你可以试试。祝你好运

```
String cmd = "cmd /c siftWin32 <box.pgm>a.key"; 
Process process = Runtime.getRuntime().exec(cmd); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T10:21:58.793

*对于通常会导致问题的特殊字符：此代码即使使用以下文件名也能正常工作：“1 - Volume 1 (Fronte).j​​pg”

```
String strArr[] = {"cmd", "/C", file.getCanonicalPath()};
Process p = rtObj.exec(strArr);///strCmd); 
```

也同意，这里不支持重定向。

在 Windows 7 上测试 {guscoder:912081574}

# jquery - 在jquery中替代非平凡的“>子”子选择

> ID：11693752
> 
> 赞同：0
> 
> 时间：2012-07-27T18:38:23.650
> 
> 标签：jquery, jquery-selectors, deprecated

子选择器 ('>')的官方[文档](http://api.jquery.com/child-selector/)说明如下：

> 注意：$("> elem", context) 选择器将在未来的版本中被弃用。因此不鼓励使用它来代替使用替代选择器。

我目前有一个形式的选择器`$("> thead th:eq(" + columnIndex + ")", context)`。建议使用什么替代语法？

我知道 .children() 方法，它可以选择`thead`元素，但之后需要额外的选择。多个选择步骤似乎比单个选择器效率低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:38:23.650

我可以想象一些类似的东西

`context.children("thead").find("th:eq(" + columnIndex + ")")`

这能行吗？还没有测试它。

# java - LoggerFactory - 输出位置

> ID：11693768
> 
> 赞同：2
> 
> 时间：2012-07-27T18:39:09.293
> 
> 标签：java, logging, hadoop

通过 Java 代码运行 Hadoop 时，LoggerFactory 对象使用的输出到哪里去了？如何追踪这个记录器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T22:14:55.933

如果您的 LoggerFactory 对象是 slf4j api 的一部分，您的类路径中应该有一个 xml 或属性配置文件。如果存在，您应该能够读取日志文件路径。

# asp.net - 如何在超链接上实现全球化

> ID：11693770
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:39:26.577
> 
> 标签：asp.net, localization, globalization

我有三个超链接英文、西班牙文和中文。当用户点击西班牙语时，网站的所有内容都会变成西班牙语（等等）。我试图在谷歌上找到答案，但没有得到完美的答案。如果您有任何链接，请与我分享。我不知道如何实现全球化。

注意：-我尝试在超链接上实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:10:26.163

这是一个使用 ComboBox 在语言之间切换的教程。本教程保存在 Session 集合中选择的最后一个区域性。如果您希望它在访问中保持不变，您可以将其存储在 cookie 中。

[本地化教程](http://www.codeproject.com/Articles/15313/Globalization-and-localization-demystified-in-ASP)

# asp.net - 我的向导中的 ViewState

> ID：11693777
> 
> 赞同：0
> 
> 时间：2012-07-27T18:40:05.347
> 
> 标签：asp.net, viewstate

我有一个从我的组织添加员工的向导。在 Step1 中，我有几个控件，其中之一是 EmpID (PK)。问题出现在第 2 步，我只有一个控件，即 DropDownList1，它是从数据源（代码隐藏）绑定的。我希望上一步中的 DropDownList1 和 EmpID 的值将其插入另一个名为“dbo.Emp_Skills”的表中。

'dbo.Emp_skills' 表有 2 列：

EmpID (FK) | 技能 ID (FK)

当 EmpID 没有实际保存时，如何将它的值插入到该表中？我可以在连接后像这样简单地插入我的 DropDownList 的值..

```
cmd.Parameters.AddWithValue("@SkillID", DropDownList1.SelectedValue); 
```

但是如何将 EmpID 插入表中？EmpID 和 CertID 都是 dbo.Emp_Cert 中的 FK.. 会不会有问题？

我像这样在 Page_Load 中使用了 ViewState-

好吧，我使用了类似这样的简单 ViewState-

```
 if(ViewState["NameOfUser"] != null)
            NameLabel.Text = ViewState["NameOfUser"].ToString();
        else
            NameLabel.Text = "Not set yet..."; 
```

* * *

我在向导的 Step2 中使用了 Label1 Control。

```
protected void Wizard1_NextButtonClick(object sender, WizardNavigationEventArgs e)
        {
            ViewState["NameOfUser"] =  TextBox1.Text;
            NameLabel.Text = TextBox1.Text;

        } 
```

然后我用来插入那个-

```
cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text);
cmd.Parameters.AddWithValue("@SkillID", DropDownList1.SelectedValue); 
```

但它不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:37:45.410

假设您使用的是 asp.net 向导控件，您的 TextBox1 仍然在页面上，您可以访问它的值。

这会奏效。

```
cmd.Parameters.AddWithValue("@SkillID", DropDownList1.SelectedValue);
cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text); 
```

# ios - 在 iphone 中启动其他没有 URL 架构的应用程序？

> ID：11693796
> 
> 赞同：3
> 
> 时间：2012-07-27T18:41:34.590
> 
> 标签：ios, xcode, jailbreak, iphone-privateapi

我知道其他应用程序可以通过 URL 架构从您的应用程序调用。但并非所有应用程序都注册了架构 URL。那么如何启动该应用程序呢？我正在为 iphone jaibroken 开发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T18:47:03.890

您可以通过多种方式使用 Bundle ID 启动应用程序。

## SB应用

```
SBApplication *app = [[objc_getClass("SBApplicationController") sharedInstance] applicationWithDisplayIdentifier:@"com.wrightscs.someapp"];
[[objc_getClass("SBUIController") sharedInstance] activateApplicationFromSwitcher: app]; 
```

## SBApplicationController

```
SBUIController *uicontroller = (SBUIController *)[%c(SBUIController) sharedInstance];
SBApplicationController *appcontroller = (SBApplicationController *)[%c(SBApplicationController) sharedInstance];

if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)])
{
    [uicontroller activateApplicationFromSwitcher:[[appcontroller applicationsWithBundleIdentifier:bundleID] objectAtIndex:0]];
}
else
{
    // doesn't work outside of Springboard
    [uicontroller activateApplicationAnimated:[[appcontroller applicationsWithBundleIdentifier:bundleID] objectAtIndex:0]];
} 
```

我在 4.x 中使用了另一种方法，`SBUIController`但在 5.0 中停止工作，所以我不打算发布它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T03:30:12.270

我用这种方式：

```
void* sbServices = dlopen("/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices", RTLD_LAZY);
int (*SBSLaunchApplicationWithIdentifier)(CFStringRef identifier, Boolean suspended) = dlsym(sbServices, "SBSLaunchApplicationWithIdentifier");
int result = SBSLaunchApplicationWithIdentifier((CFStringRef)bundleId, false);
dlclose(sbServices); 
```

您需要授予您的应用程序的权利：

```
 <key>com.apple.springboard.launchapplications</key>
 <true/> 
```

它可以在 iOS 6 上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T02:48:08.073

据我所知，只有私有 api 可以做到这一点。第一的

```
@interface PrivateApi_LSApplicationWorkspace
- (bool)openApplicationWithBundleID:(id)arg1;
@end 
```

然后使用它

```
PrivateApi_LSApplicationWorkspace* _workspace;
_workspace = [NSClassFromString(@"LSApplicationWorkspace") new];
[_workspace openApplicationWithBundleID:bundleIdentifier]; 
```

您可以查看[https://github.com/wujianguo/iOSAppsInfo](https://github.com/wujianguo/iOSAppsInfo)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-14T10:31:08.640

我刚刚测试过：在 iOS 9.3.5 和 11.2 中工作，而且这种方法不需要任何包含或动态加载库。完全依赖 obj-c 运行时。而且这种方法不需要越狱设备，可以使用 xcode 设备和带有配置文件的免费开发人员帐户来完成。不要以为它会通过 App store 审核流程，但可以成功用于企业或 ad-hoc 分发等。

```
id wrkS;
wrkS = [NSClassFromString(@"LSApplicationWorkspace")  performSelector:@selector(defaultWorkspace)];
[wrkS performSelector:@selector(openApplicationWithBundleID:) withObject:@"com.apple.reminders"]; 
```

# asp.net - 连接超时并在 Web.Config 文件中显示错误文本

> ID：11693798
> 
> 赞同：0
> 
> 时间：2012-07-27T18:41:35.783
> 
> 标签：asp.net, mysql, web-config, connection-timeout

嗨，我有时会收到以下错误

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：连接尝试失败，因为连接方在一段时间后没有正确响应，或建立连接失败，因为连接的主机没有响应
> 
> 源错误：
> 
> 第 61 行：applicationName="/" 第 62 行：
> name="MySqlRoleProvider" 第 63 行：
> type="MySql.Web.Security.MySQLRoleProvider, MySql.Web,Version=6.5.4.0,
> Culture=neutral,PublicKeyToken=c5687fc88969c44d" 第 64 行: 第 65 行:
> autogenerateschema="true" />
> 
> 源文件：E:\EDUCATIONAL\DOT NET\website\WebSite1\WebSite1\web.config

第 62 到 65 行的错误在 roleManager 中

```
<roleManager enabled="true" defaultProvider="MySQLRoleProvider">
      <providers>
        <clear />
        <add connectionStringName="conStr"
             applicationName="/"
             name="MySqlRoleProvider"
             type="MySql.Web.Security.MySQLRoleProvider, MySql.Web,Version=6.5.4.0,&#xD;&#xA;             Culture=neutral,PublicKeyToken=c5687fc88969c44d"

             autogenerateschema="true" />
      </providers>
    </roleManager> 
```

如何避免这个问题以及这里实际发生了什么？我了解这是连接超时错误，但我的页面尚未加载。在几秒钟内导航到所需页面后，我突然收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:46:39.507

您的连接字符串中有一个换行符和空格：

```
&#xD;&#xA; 
```

这很可能是正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:56:40.467

可能是您的连接字符串导致了问题，并且 RoleManager 无法使用您当前的连接字符串连接到您的 MySql 数据库。

# c# - 检索谁创建/修改/删除了文件

> ID：11693799
> 
> 赞同：1
> 
> 时间：2012-07-27T18:41:42.910
> 
> 标签：c#, c++, file-io, driver

我正在开发一个可以在几个 Windows Server 2008 机器上运行的应用程序。该应用程序将监视共享目录中的文件更改并将它们报告给我。我目前正在使用 FileSystemWatcher 类，但这确实支持检索与生成的事件关联的活动目录用户名。我已经研究了一些解决方案，但我不确定从哪里开始。这是我的一些选择。

*   监视事件日志中的安全事件。我真的不喜欢这个解决方案 [Get Username of an Accesed File](https://stackoverflow.com/questions/7861512/get-username-of-an-accesed-file)

*   创建文件系统过滤器驱动程序。这将允许我实时检测所有类型的文件操作，但我没有看到任何关于检索相关用户信息的内容。这似乎是最有希望的解决方案。

*   我还没有看到其他人这样做，但我认为可以挂钩“服务器”服务（我相信这负责网络共享交互）并尝试退出文件系统操作。我真的很想避免这种情况。

欢迎使用 C#/C++ 中的解决方案。

# html - 调整 DIV 元素的宽度和高度

> ID：11693800
> 
> 赞同：3
> 
> 时间：2012-07-27T18:41:47.650
> 
> 标签：html, css

我有一个页面，页面左侧有一个垂直导航栏，导航栏右侧有一个“内容”区域。我希望“内容”区域的宽度填充屏幕的其余部分，并且高度匹配导航栏的高度。

这是我到目前为止所拥有的：[jsFiddle](http://jsfiddle.net/hsGN6/)

最好我正在寻找一个纯 CSS 解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:44:26.960

通常，[Faux Columns](http://www.alistapart.com/articles/fauxcolumns/)技术用于填充未填充内容的空间。您需要将 CSS 渐变替换为图像，并且使用固定尺寸进行设置要容易得多（但仍然可以使用流动尺寸）。

本质上，您需要像这样构建 HTML 元素：

```
<div id="header"></div>
<div id="wrapper">
    <div id="sidebar"></div>
    <div id="content"></div>
</div>
<div id="footer"></div> 
```

就拉伸内容而言，您的 CSS 将为您完成工作：

```
/* The top part of the rounded container */
#header { 
    background: url(images/bg_top.gif) 100% 100% no-repeat; /* sit on top */
}

/* The background for your content */
#wrapper { 
    background: url(images/bg_tile.gif) 100% 0 repeat-y; /* repeat on the right */
}

/* The bottom of your content */
#footer {
    background: url(images/bg_bottom.gif) 100% 0 no-repeat; /* sit on the bottom */
} 
```

你肯定需要玩一些负边距才能让事情完美地坐下来。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T19:54:11.640

将最小高度应用于您的内容区域：

```
#content {
  position: absolute;
  margin-left: 200px;
  width: 100%;
  min-height:328px;
} 
```

查看更新的小提琴：http: [//jsfiddle.net/hsGN6/6/](http://jsfiddle.net/hsGN6/6/)

它很粗糙，但它有效。

# linux - 如何以字节为单位将文件大小打印到 .txt 文件

> ID：11693805
> 
> 赞同：2
> 
> 时间：2012-07-27T18:41:59.900
> 
> 标签：linux, unix

我使用`ls -l`命令查看文件夹中的所有文件大小。任何人都可以帮助我如何将其输出到`.txt`文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T18:44:01.787

打开终端并使用以下命令：

```
ls -l > yourfile.txt 
```

[http://www.tuxfiles.org/linuxhelp/iodirection.html](http://www.tuxfiles.org/linuxhelp/iodirection.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T19:23:48.940

如果您只想将某个文件的大小放入*文本*`foo`文件`out.txt`中，您可能会

```
 ls -l foo | awk '{print  $5}' > out.txt 
```

还有许多其他变体（例如使用`cut`代替`awk`，或使用`stat`代替`ls`等）。

在 shell 脚本或终端上，您可以将该大小分配给某个变量`VAR`，例如

```
VAR=$(ls -l foo | awk '{print  $5}') 
```

如果您对`ls`普通重定向`ls -l foo > out.txt`的所有输出感到满意，那么正如其他人所回答的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T19:26:12.243

我会`stat(1)`直接使用：

```
stat -c '%s %n' * 
```

或者如果递归地这样做：

```
find /some/path -type f -printf '%s %f\n' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T18:44:14.480

为此，请使用 ls -l> yourfile.txt

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T20:57:17.350

你可以使用*[du](http://linux.die.net/man/1/du)*命令：

```
du * > file.txt 
```

*du*返回文件的空间使用情况，因此如果您需要目录中的所有文件，则必须使用 *

例子：

```
$ cd /path/to/directory
$ du * > file.txt 
```

或者

```
$ du /path/to/directory/* > /path/to/file.txt 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-21T00:30:05.227

**编辑：刚刚意识到这是非常离题的，因为问题是关于重定向的。**

我不知道为什么`du`喜欢显示块而不是字节。

我个人认为`ls -l $1 | awk '{ print $5 }'`处理过多，如果您期望优雅的错误处理是不合理的。

对我来说，最简单的选择就是编译一些更有效的东西：

$`nano flsz.c`

```
#include <stdio.h>

int main(int argc, char **argv) {
  if (argc > 1) {
    FILE *f = fopen(argv[1], "r");
    if (f && (fseek(f, 0, SEEK_END) == 0)) {
      int size = ftell(f);
      fclose(f);
      fprintf(stdout, "%d\n", size);
    } else {
      fprintf(stdout, "0\n");
    }
  } else {
    fprintf(stdout, "-1\n");
  }
  return 0;
} 
```

$`gcc -o /usr/bin/flsz flsz.c`

$`flsz flsz.c`

`340`

$`flsz /usr/bin/flsz > output.txt`

$`cat output.txt`

`8972`

# c# - 在我的网站中显示文件

> ID：11693807
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:03.583
> 
> 标签：c#, file, directory, show, getfiles

嗨，我如何在我的网站上显示文件以下载它。我有代码：

```
Directory.GetFiles("http://example.com/Folder1/Folder2", "*.*") 
```

但它不起作用。我可以这样使用它：

```
Directory.GetFiles(@"C:\Program Files\Folder1\Folder2", "*.*") 
```

如何将此代码用于[http://example.com/Folder1/Folder2](http://example.com/Folder1/Folder2)中的显示文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T00:42:51.893

你的问题有点含糊，但我想我得到了你要找的东西。无论如何，我假设您使用的是 ASP.NET，第一步是创建一些东西来显示您的文件。我使用了一个中继器，其中只有一个超链接，如下所示：

```
<asp:Repeater ID="rpt" runat="server" OnItemDataBound="rpt_ItemDataBound">
    <ItemTemplate>
        <asp:HyperLink ID="hyp" runat="server" />
    </ItemTemplate>
</asp:Repeater> 
```

在此之后，您需要填充中继器。您可以像这样在页面加载中执行此操作：

```
if (!Page.IsPostBack)
{
    string[] files = Directory.GetFiles(@"C:\testfolder");
    rpt.DataSource = files;
    rpt.DataBind();
} 
```

下一步您可以完成 ItemDataBound 方法，如下所示：

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        string file = e.Item.DataItem as string;
        HyperLink hyp = e.Item.FindControl("hyp") as HyperLink;
        hyp.Text = file;
        hyp.NavigateUrl = string.Format("~/Handlers/FileHandler.ashx?file={0}", file);
    }
} 
```

正如您在导航 url 中看到的，我们将使用 HttpHandler。当您创建一个新的处理程序文件 (.ashx)。在它的 ProcessRequest 方法中，您将需要这样的东西，因此该文件可供下载：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.Clear();
    context.Response.ContentType = "application/octet-stream";
    context.Response.AddHeader("Content-Disposition", "attachment; filename=" + context.Request.QueryString["file"]);
    context.Response.WriteFile(context.Request.QueryString["file"]);
    context.Response.End();
} 
```

不要忘记在 system.web 节点的 web.config 中注册您的处理程序，如下所示：

```
<httpHandlers>
  <add verb="*" path="~/Handlers/FileHandler.ashx?file={0}" type="StackOverflow.Questions.Handlers.FileHandler, StackOverflow.Questions"/>
</httpHandlers> 
```

请记住，不应该像我一样通过查询字符串传递路径，但我不知道您的应用程序是如何工作的，所以找到适合您的东西。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:49:00.990

在一个像样的网站上没有办法做到这一点，如果你知道它的 URL，你可以下载一个文件，但如果网站设置正确，则无法获取目录中的所有文件或获取目录结构。

要从 Web 服务器下载文件，您必须使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)，如下所示：

```
WebClient wc = new WebClient();
wc.DownloadFile(" http://example.com/Folder1/Folder2/File.txt", "C:\\temp\\File.txt"); 
```

要从 FTP 服务器下载文件，请使用[FtpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)，这是列出目录文件的示例：

[http://www.coding.defenselife.com/index.php/articles/20-ftpwebrequest-sample-c](http://www.coding.defenselife.com/index.php/articles/20-ftpwebrequest-sample-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:48:59.840

来自文档：*返回指定**目录**中的文件名（包括它们的路径） 。

您正在将一个 URL 传递给一个网站，这就是它不返回任何内容的原因——它需要一个本地路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T19:53:58.380

感谢大家的回答。我下载了 C# 的 ftp 客户端。我使用了该代码：

```
 ftp.Connect("ftp.domain.com");
            ftp.Login("user", "pw");

            // If files in : domains/httpdocs/Install/Program
            ftp.ChangeFolder("domains");
            ftp.ChangeFolder("httpdocs");
            ftp.ChangeFolder("Install");

            ftp.DownloadFiles("Program",
            "C:/Program Files/Install/", new RemoteSearchOptions("*.*", true));

            ftp.Close(); 
```

您可以从这里下载 ftp 客户端：[http ://www.limilabs.com/ftp](http://www.limilabs.com/ftp)

# c++ - 为什么在使用 shared_ptr 时会出现此运行时异常？

> ID：11693809
> 
> 赞同：3
> 
> 时间：2012-07-27T18:42:15.987
> 
> 标签：c++, shared-ptr

在下面的代码中，我在 return 1 后得到以下运行时异常（可能是内存泄漏）；在 Node() 的析构函数中。

`Unhandled exception at 0x0f9bad4a (msvcp100d.dll) in test.exe: 0xC0000005: Access violation reading location 0xfeeefef2.`

自从我使用 smart_ptr 已经有一段时间了，所以我想知道我在这里做错了什么？

```
#include <vector>
#include <queue>
#include <memory>

#include <iostream>
using namespace std;

class Node;
typedef shared_ptr<Node> SharedNode;

class Node {
    Node* parent;
    vector< SharedNode > children;
    int value;

    //limiting construction
    Node(int a_value):value(a_value),parent(0){}
    Node(const Node &copy); //non-construction-copyable
    Node& operator=(const Node& copy); //non-copyable
public:
    static SharedNode create(int a_value){
        return SharedNode(new Node(a_value));
    }
    SharedNode addChild(SharedNode child){
        child->parent = this;
        children.push_back(child);
        return child;
    }

SharedNode getNode(int searchValue);
};

SharedNode Node::getNode(int searchValue){

    // Breadth First Search
    queue<SharedNode> que;
    que.push(SharedNode(this));

    while(!que.empty()){
        SharedNode node = que.front();
        que.pop();

        if(node->value == searchValue)
            return node;

        vector<SharedNode>::iterator it;
        for(it = node->children.begin(); it != node->children.end(); it++){
            que.push(*it);
        }
    }

    return 0;
}

int main(){
    SharedNode node_ptr = Node::create(5);

    for(int i  = 0; i < 4; ++i)
        node_ptr->addChild(Node::create(i));

    cout << (node_ptr->getNode(-1) != 0 ? "Found" : "Not found");

    return 1;
} 
```

我想我在使用 shared_ptr 时搞砸了，比如：`shared_ptr(this)`。但是，那是我的猜测。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T19:15:06.360

问题来自

`que.push(SharedNode(this));`

这将创建一个现在拥有的新共享指针`this`。但是，由于该`create()`方法，还有另一个共享指针拥有相同的对象。这可能导致双重删除。

如果您有理由在这种情况下使用共享指针，那么正确的解决方案是`enable_shared_from_this`.

首先，将节点定义更改为此。

`class Node : public std::enable_shared_from_this<Node> { ...`

然后将违规行更改为

`que.push(this->shared_from_this());`

这会导致它返回一个指向对象的 shared_ptr，但它与已经存在的 shared_ptr 共享，而不是两个单独的 shared_ptr 对象。

注意，为了`this->shared_from_this()`合法使用，对象必须由 shared_ptr 拥有。您已经通过静态`create()`方法完成了此操作，但我想确保您了解限制。

`shared_ptr`编辑：所有权 的简要说明。

当您`shared_ptr`使用构造函数从原始指针创建 a 时，它会创建一个引用对象，其中包含指向该对象的指针和引用计数，该引用计数用于确定有多少`shared_ptr`对象指向它。然后将指向该引用对象的指针传递给从该原始对象创建的所有副本，`shared_ptr`引用计数跟踪有多少`shared_ptr`对象引用它。

当您调用`shared_ptr(this)`时，共享指针无法知道它`this`属于另一个共享指针，并创建一个新的引用对象。一旦其中一个引用计数达到零，该对象将被删除，尽管另一个`shared_ptr`引用对象仍指向它，从而导致悬空指针和您看到的错误。

如果您只需要在父级存在时子级存在，我会考虑将节点更改为简单地拥有一个`std::vector`其他节点（删除指针）。当最高级节点通过其析构函数被销毁时，它将销毁向量，从而销毁子节点，依此类推。

```
class Node
{
  // whatever operations you need... 

  std::vector<Node> children;
} 
```

编辑：根据要求...

如果您有一个用例，您确实希望孩子比父母长寿，那么您将不得不处理父指针，因为它可能在孩子之前被销毁。一种快速的解决方案是确定您是否真的需要父指针，如果不需要则将其删除。

但是，假设您仍然想保留它，则不能`shared_ptr`在此处使用。如果你这样做，你将有一个循环依赖，并且两者都不会被自动销毁，这不是你想要的。

这里的解决方案是使用`std::weak_ptr`. 基本上，它与`shared_ptr`引用对象的交互方式不会阻止指向对象的破坏。

```
class Node
{
private:
   std::weak_ptr<Node> parent;
   // Other constructors.  
   Node(int a_value):value(a_value),parent() {} 
public:
   SharedNode addChild(SharedNode child){
        child->parent = this->shared_from_this(); // Initialize their pointer using
                                                  // your shared pointer
        children.push_back(child);
        return child;
   }
   // This function will return a shared_ptr to nullptr (and will evaluate false) 
   // if you have no parent, or if the parent node has been deleted
   SharedNode getParent()
   {
       return parent.lock();
   }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T19:01:22.980

考虑以下代码会发生什么：

```
Node * dumb_ptr = new Node;
shared_ptr<Node> smart1 = dumb_ptr;
shared_ptr<Node> smart2 = dumb_ptr; 
```

您现在有两个智能指针，它们都认为它们拥有同一个对象。其中一个将删除该对象，另一个将在某个时候尝试使用或删除该已删除对象。解决此问题的方法是始终从另一个智能指针或从`new`. 最好不要使用任何哑指针——包括`this`.

```
shared_ptr<Node> smart1 = new Node;
shared_ptr<Node> smart2 = smart1; 
```

# css - Windows 7中的Chrome CSS转换错误

> ID：11693810
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:32.423
> 
> 标签：css, google-chrome

我正在尝试转换某个事件的图片..说点击。它在 linux 甚至 XP 中的 chrome 中运行良好，但 Windows 7 或 8 中的 chrome 无法正确显示。

如果你在 windows 7 或 8 中的 Firefox 和 chrome 中打开下面的链接，你就会知道我的问题是什么。

[http://blacksheepinc.in/temp.php](http://blacksheepinc.in/temp.php)

**示例代码：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript'>
function rtt() { 
  $('#logo').css('-webkit-transition', 'all 2s ease-in')
  $('#logo').css('-moz-transition', 'all 2s ease-in')
  $('#logo').css('-webkit-transform','rotate(270deg)');
  $('#logo').css('-moz-transform','rotate(270deg)');
}
</script>
</head>
<body>
<pre>
Click on the pic
</pre>
<img id='logo' src='logo.png' onclick='rtt()' style='position:absolute;'/>
</body>
</html> 
```

还有人面对吗？

感谢您的时间！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:25:48.490

您是否尝试过让这个更多的 CSS 和更少的 JS？比起 jQuery，我更信任 CSS 与我的动画。像这样：

```
<style type="text/css">

  .logo {
    -webkit-transition:all 2s ease-in;
    -moz-transition: all 2s ease-in;
  }
  .logo.end {
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
  }

</style>
<script type='text/javascript'>

  $('#logo').click(function() {
    $(this).addClass('end');
  });

</script> 
```

# linq-to-sql - 我是否正确使用 TransactionScope 和 DataContext？

> ID：11693811
> 
> 赞同：1
> 
> 时间：2012-07-27T18:42:34.310
> 
> 标签：linq-to-sql, transactionscope, msdtc

如果我新建一些 DataContext，读取一些数据，然后只将 SubmitChanges 包装在 TransactionScope 中怎么办？

```
string conn1 = GetConn1();
string conn2 = GetConn2();
using (DataContext1 dc1 = new DataContext1(conn1))
{
  List<Customer> customers = ReadSomeData(dc1);
  ModifySomeCustomers(customers);  //performs local modification to Customer instances

  using (DataContext2 dc2 = new DataContext2(conn2))
  {
    List<Order> orders = ReadSomeData(dc2);
    ModifySomeOrders(orders); //performs local modification to Order instances

    using (TransactionScope scope = new TransactionScope())
    {
      dc1.SubmitChanges();
      dc2.SubmitChanges();
      scope.Complete();
    }
  }
} 
```

第一个 SubmitChanges 调用预计会从池中获取一个连接并将该连接登记到作用域中。MS DTC 已启用 - 第二次 SubmitChanges 调用预计将事务提升为“分布式”，从池中获取连接并将该连接纳入范围。

我担心 ReadSomeData 可能使连接保持打开状态，因此 SubmitChanges 不会从池中获取连接，因此不会在范围内登记连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:58:40.400

`SubmitChanges`将参加`TransactionScope`。

如果`SubmitChanges`找到一个环境事务，它会加入该事务，否则它会在方法的生命周期内自己创建一个事务`SubmitChanges`。

有一篇关于事务处理的[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb386995)`SubmitChanges`。

# python - 从python中的字符串中获取一个值

> ID：11693812
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:36.547
> 
> 标签：python

**节目详情：**

我正在为 python 编写一个程序，该程序需要查看该行的文本文件：

找到模式 1 of 12：EV= 1.5185449E+04，f= 19.612545，T= 0.050988。

**问题：**

然后在程序找到该行之后，它将将该行存储到一个数组中并从 f = 19.612545 中获取值 19.612545。

**问题：**

到目前为止，我已经能够在找到它之后将它存储到一个数组中。但是，在存储字符串以搜索字符串，然后从变量 f 中提取信息后，我无法确定使用什么。有没有人对如何实现这一点有任何建议或提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:47:30.007

根据您的想法，CosmicComputer 将您推荐给正则表达式是正确的。如果您的语法如此简单，您总是可以执行以下操作：

```
line = 'Found mode 1 of 12: EV= 1.5185449E+04, f= 19.612545, T= 0.050988.'

splitByComma=line.split(',')

fValue = splitByComma[1].replace('f= ', '').strip()
print(fValue) 
```

结果`19.612545`被打印（尽管仍然是一个字符串）。

用逗号分割你的行，抓住第二块，然后打破`f`价值。错误检查和转换由您决定！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:52:13.437

在这里使用正则表达式是疯狂的。只需按如下方式使用[string.find](http://docs.python.org/library/string.html#string.find)：（其中 string 是保存您的字符串的变量的名称）

```
index = string.find('f=')
index = index + 2 //skip over = and space 
string = string[index:] //cuts things that you don't need 
string = string.split(',') //splits the remaining string delimited by comma
your_value = string[0] //extracts the first field 
```

我知道它很丑，但与 RE 相比，它什么都不是。

# javascript - 函数内的 JavaScript 全局变量定义

> ID：11693813
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:37.700
> 
> 标签：javascript

我有一个全局变量`a`，我在函数中使用它并为其赋值。当我在函数之外使用这个变量时，它给了我`undefined`.

例如。：

```
var a;
function my_func(){
  a=5;
}
console.log(a); //outputs undefined, how do I get the value 5 here 
```

为什么我得到`undefined`而不是`5`？

* * *

它可以解决我的问题。

```
var id;

function set_id(myid){
 id=myid;
}

function get_id(){
 return id;
}

$("#btn").click(function(){
 $.post("....", function(data){ //data reurns a JSON
  set_id(id); //success!!
 }
}

$("#show").click(function()[
 console.log(get_id()); //doesn't work, how do I get this workin.. Where am I going wrong
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:43:59.057

`my_func`您应该在日志之前调用该函数：

```
var a;
function my_func(){
  a=5;
}
my_func();      //<-- here
console.log(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:08:18.710

```
var a;

function my_function1() {
    return 5;
}

function my_function2() {
    a = 5;
}

/* Either of these options below will work to change the value of "a" to 5*/

// a = my_function1()
// my_function2()​​​ 
```

# ios - iPad 上的 SQLite 慢查询

> ID：11693814
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:50.617
> 
> 标签：ios, sqlite, xamarin.ios

我有一张表，里面有近 30 万条记录。我在索引列上运行带有 where 子句的简单 select 语句（“类型”被索引）：

```
SELECT *
FROM Asset_Spec
WHERE type = 'County' 
```

该查询很快 - 大约 1 秒。此外，我想针对状态进行测试：

```
SELECT *
FROM Asset_Spec
WHERE type = 'County'
AND status = 'Active' 
```

第二个非常慢（分钟）。状态没有被索引，在这种特殊情况下，db 中 99.9% 的值是“活动的”。

有什么想法可以让我获得更好的性能吗？我们正在编译我们自己的 SQLite 版本，因此我可以调整许多设置（仅供参考 - 在 iOS 预装 SQLite 上的性能相同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:06:55.013

我查看了查询计划，对行数的估计值相差了惊人的数量。Asset_Spec (~2 行) - 实际行数接近 300,000。Ran 'ANALYZE' - 现在相同的查询在 16 毫秒内运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:07:33.637

我会尝试的第一件事是使用子查询

```
SELECT * FROM
(SELECT *
FROM Asset_Spec
WHERE type = 'County')
WHERE status = 'Active' 
```

正如罗伯特建议的那样，在您想要过滤的任何列上添加索引是一个好主意。我还考虑将字段类型和状态更改为字符串以外的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:30:59.703

有什么理由需要选择 *？

建议：

您需要检索多条记录吗？如果您只需要找到的第一条记录，则将“limit 1”添加到查询的末尾。

如果你只是检查一行是否存在，即你只需要知道有一行状态为活动，那么“select 1”而不是“select *”。

# css - 空白预包装不重新计算

> ID：11693815
> 
> 赞同：5
> 
> 时间：2012-07-27T18:42:51.723
> 
> 标签：css, internet-explorer, whitespace, word-wrap

[小提琴说明问题](http://jsfiddle.net/3ae4V/1/)- 单击按钮几次，框会缩小，揭示问题。

此问题似乎只发生在 Internet Explorer 中。

基本上，当一个包含的元素`white-space: pre-wrap`被缓慢调整大小时，IE 不会重新计算自动换行，导致文本被推到元素之外。确实会发生一些重新计算，但不是全部。元素的大小调整得越多，似乎实际上进行的重新计算就越多。

缩放页面可以解决问题，但显然不是一个实用的解决方案。

当容器的大小发生变化时，如何强制 IE 重新计算自动换行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T20:00:06.447

## 新的（荒谬的）HTML 更改解决方案（但有效！）

由于奇怪的第一行故障，解决方案取决于生成不重要的第一行，然后对其进行调整。[**这个小提琴演示**](http://jsfiddle.net/3ae4V/73/)了现在看来是 IE9 的“无错误”解决方案（对于早期的 IE 版本，需要进行一些调整以考虑我的伪元素/类的使用）。

HTML 需要过多的换行，以至于每个文本部分都被“双重换行”。该演示具有三种不同的获得块级环绕的方法，但都使用相同的修复。

**基本 HTML**

```
<div id="cnt">
  <p class="ieFixBlockWrap">
    <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tincidunt consectetur tortor, sed vestibulum lectus hendrerit at. Praesent fermentum augue molestie lectus pharetra eget cursus erat cursus.
    </span>
  </p>
  <span class="ieFixBlockWrap">
    <span>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Praesent fringilla nisl posuere tortor rutrum lobortis.
    </span>
  </span>
  <div class="ieFixBlockWrap">
    <span>In risus libero, faucibus ac congue et, imperdiet ac purus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi aliquam lobortis ullamcorper. Proin risus sapien, pulvinar in adipiscing non, rutrum hendrerit magna. Praesent interdum pharetra vehicula. Integer molestie mi neque.
    </span>
  </div>
</div> 
```

**CSS**

```
#cnt {
    white-space: pre-wrap; 
    border:1px solid black;
    line-height: 1.2em; /* set explicitly, see below */
    /* prevent shifted :before from interfering with elements preceeding #cnt */
    overflow: hidden; 
}

.ieFixBlockWrap:before { /* this becomes the first line, but also an extra line gap */
    content:''; 
    display: inline-block;
    width: 100%;
}

.ieFixBlockWrap { 
    display: block; /* just to demo span as block level */
    margin: -1.2em 0; /* offset by line-height to remove gaps from :before*/
}

.ieFixBlockWrap:last-child {
    margin-bottom: 0; /* last one does not need the bottom margin adjusted */
} 
```

## 原始 HTML 更改解决方案（在第一行仍然失败）

将所有文本包装在集合`span`内的单个中似乎使它[在这个小提琴中](http://jsfiddle.net/3ae4V/18/)表现。`div``pre-wrap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:11:09.007

看起来您可以通过删除元素然后将其添加回来来强制 IE 重新绘制容器（不幸的是，您不得不求助于这个，但是哦，好吧）。这是一个调整大小的函数，可以做到这一点，还有[一个小提琴可以看到它的实际](http://jsfiddle.net/3ae4V/4/)效果：

```
var resize = function(element, changeWidth, changeHeight){
    changeWidth = parseInt(changeWidth) || 0;
    changeHeight = parseInt(changeHeight) || 0;

    element.style.width = (parseInt(element.style.width) + changeWidth) + 'px';
    element.style.height = (parseInt(element.style.height) + changeHeight) + 'px';
    var parent = element.parentNode;
    parent.removeChild(element);
    parent.appendChild(element);
}; 
```

# android - 有没有更好的方法来处理这个字符串列表？

> ID：11693817
> 
> 赞同：0
> 
> 时间：2012-07-27T18:42:57.187
> 
> 标签：android, expandablelistview

我正在为**Android开发一个应用程序**

我有不同的类别：

```
String[] cat = { "Category",  "Books", "Clothing", "Shoes", "Hobbies", 
                 "General", "Electronics", "Transportation", "Medicine",
                 "Sports", "Education", "Outdoor"}; 
```

UI 要求用户选择一个类别、名称和一些描述，然后将其写入数据库。当用户按下 List 按钮时，将显示每个已填充的类别，并且该类别下的项目也使用**ExpandableListActivity**显示。

```
List<List<String>> children = new ArrayList<List<String>>();

/**********************
  I have a list for each category!!! But I don't like this solution. :(
**********************/
List<String> books = new ArrayList<String>();
List<String> clothing = new ArrayList<String>();
    ...
    ...

public void fillData() {

// Get all of the notes from the database and create the item list
Cursor c = mDbHelper.fetchAllItems();

startManagingCursor(c);

// for all rows
for(int i=0; i<c.getCount(); i++)
{
    // next row
    c.moveToNext();

    // pick a category
    String t = c.getString(c.getColumnIndex("category"));

    switch (getCat(t))
    {
    case Books:
        books.add(c.getString(c.getColumnIndex("name")));
        break;
    case Clothing:
            // do stuff for Clothing
        break;

     /**
       And there are other cases for the rest of the categories but i am not listing
       them here, since it is the same process
     */
        default:
        break;
    }   // end switch
} // end for loop

    //for each category that has been filled up
    children.add(category);
} // end function 
```

**我的问题：**

是否可以不必为每个类别创建一个列表？我尝试了一个列表，但结果看起来不太好。所有类别都显示相同的项目，而不是单个项目，这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:06:58.140

您不需要自己创建列表。

您可能需要 2 个表 - 一个列出类别名称及其 id（这将是主表键），另一个列出每行具有项目的类别 id、项目名称以及单个项目的任何其他内容的东西。

然后你可以有`SimpleCursorTreeAdapter`这样的：

```
SimpleCursorTreeAdapter (Context context, Cursor cursor, int groupLayout, String[] groupFrom, int[] groupTo, int childLayout, String[] childFrom, int[] childTo). 
```

因为`groupLayout`你会有`android.R.layout.simple_expandable_list_item_1`. 因为`childLayout`你会有`android.R.layout.simple_list_item_1`

因为`groupFrom`你会有

字符串[] groupFrom = { FLD_CATEGORY_NAME }; int[] groupTo = { android.R.id.text1 };

对于 childFrom 你将拥有

```
String[] childFrom = { FLD_ITEM_NAME };
int[] childTo = { android.R.id.text1 }; 
```

如果您想显示超过 1 或 2 个元素，或者更确切地说是您自己的布局

你会有

```
protected Cursor getChildrenCursor(Cursor groupCursor) {
      int categoryId = groupCursor.getColumnIndex(FLD_CATEGORY_ID);
      // and here you a Cursor from your items table WHERE CTAEGORY_ID == categoryId
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:31:57.690

我刚刚创建了一个列表列表，并且工作了:)

# python - 理解 Python 中的递归

> ID：11693819
> 
> 赞同：8
> 
> 时间：2012-07-27T18:43:09.120
> 
> 标签：python, algorithm, python-2.7, recurrence, induction

我真的很想围绕递归的工作原理和理解递归算法。例如，当我输入 5 时，下面的代码返回 120，请原谅我的无知，我只是不明白为什么？

```
def fact(n):
    if n == 0:
        return 1
    else:
        return n * fact(n-1)

answer = int (raw_input('Enter some number: '))

print fact(answer) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-27T18:52:34.400

让我们来看看执行过程。

```
fact(5):
   5 is not 0, so fact(5) = 5 * fact(4)
   what is fact(4)?
fact(4):
   4 is not 0, so fact(4) = 4 * fact(3)
   what is fact(3)?
fact(3):
   3 is not 0, so fact(3) = 3 * fact(2)
   what is fact(2)?
fact(2):
   2 is not 0, so fact(2) = 2 * fact(1)
   what is fact(1)?
fact(1):
   1 is not 0, so fact(1) = 1 * fact(0)
   what is fact(0)?
fact(0):
   0 IS 0, so fact(0) is 1 
```

现在让我们收集我们的结果。

```
fact(5) = 5* fact(4) 
```

用我们的结果代替 fact(4)

```
fact(5) = 5 * 4 * fact(3) 
```

用我们的结果代替 fact(3)

```
fact(5) = 5 * 4 * 3 * fact(2) 
```

用我们的结果代替 fact(2)

```
fact(5) = 5 * 4 * 3 * 2 * fact(1) 
```

用我们的结果代替事实（1）

```
fact(5) = 5 * 4 * 3 * 2 * 1 * fact(0) 
```

用我们的结果替换 fact(0)

```
fact(5) = 5 * 4 * 3 * 2 * 1 * 1 = 120 
```

你有它。递归是通过将较大的问题视为成功的较小问题来分解较大问题的过程，直到您遇到微不足道的（或“基本”）案例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T18:50:38.023

将问题分解为执行步骤。

```
fact(5)
| 5  * fact(4)
|| 5 * (4 * fact(3))
||| 5 * (4 * (3 * fact(2))
|||| 5 * (4 * (3 * (2 * fact(1))))
||||| 5 * (4 * (3 * (2 * (1 * fact(0)))))
|||||| 5 * 4 * 3 * 2 * 1 * 1
120 
```

您的函数只是调用它自己，就像任何其他函数可以调用它一样。但是，在这种情况下，您的函数需要一个停止点，以便它不会无限递归（导致堆栈溢出！）。在您的情况下，这`n`是 0 的时间（它可能应该是 1）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T18:56:18.130

请记住，fact() 的每次调用，无论是外部调用还是自身调用，都会获得自己独特的局部变量集。

```
fact(1) has n of 5
   fact(2) has n of 4
      fact(3) has n of 3
         fact(4) has n of 2
            fact(5) has n on 1
               fact(6) has n of 0 
```

最深的（这里`fact(6)`是最深的）在调用堆栈中它们上面的级别能够完成之前完全计算出来。

所以

*   `fact(6)`返回 1 到`fact(5)`（终止情况）。
*   `fact(5)`返回 1 到`fact(4)`(1*1)
*   `fact(4)`返回 2 到`fact(3)`(2*1)
*   `fact(3)`返回 6 到`fact(2)`(3*2)
*   `fact(2)`返回 24 到`fact(1)`(4*6)
*   最后`fact(1)`返回 120 (5*24) 给它的调用者，不管它是什么。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-27T18:48:59.407

递归函数是一个调用自身并继续这样做直到评估完成并产生结果的函数。上面的阶乘函数的关键是 return x * fact(x-1)

因此，如果您输入 5，它将执行 5 * fact(5-1) * fact 4-1) .... 依此类推，直到达到 0 然后返回 1。所以您将拥有 5*4*3*2* 1 是 120。

它继续在堆栈上分配变量。因此，如果您输入的数字太高，可能会导致堆栈溢出异常。除非您使用称为尾调用优化 (TCO) 的东西，它将递归函数转换为 for 循环并清理分配的内存。

# spring - 连接没有bean名称的属性？

> ID：11693821
> 
> 赞同：0
> 
> 时间：2012-07-27T18:43:12.440
> 
> 标签：spring

如果可能，我需要在不使用 bean id 的情况下为给定对象连接属性。自动装配不起作用，因为属性的类型是`Object`并且是，因此，根本不是特定的。有没有办法像这样按类或接口自动装配：

```
<bean class="NonSpecificClassThing">
    <property name="targetObject">
        <a:wire-by-type type="com.things.MyInterface"/>
    </property>
</bean>

<bean class="com.things.MyInterfaceImpl"/> 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:28:52.177

显然你可以做这样的事情：

目标类：

```
public class NonSpecificClassThing {

      private Object targetObject;

      // do something;

      public getTargetObject() {
         return targetObject;
      } 

      public void setTargetObject(Object targetObject) {
         this.targetObject = targetObject;
      }
} 
```

春天的背景：

```
<bean class="NonSpecificClassThing">
    <property name="targetObject">
        <ref bean="com.things.MyInterfaceImpl"/>
    </property>
</bean>

<bean class="com.things.MyInterfaceImpl"/> 
```

# php - 从 php 插入 mysql 将日期字段保存为 00:00:00 而不是 NULL

> ID：11693823
> 
> 赞同：5
> 
> 时间：2012-07-27T18:43:21.863
> 
> 标签：php, mysql, date, null

我通过 POST 收到以下变量，有时它必须是日期，有时它必须为空（例如，如果该事件尚未发生）

```
$hora_entrada = $_POST['hora_entrada'];
$salida_comida = $_POST['salida_comida'];
$regreso_comida = $_POST['regreso_comida'];
$hora_salida = $_POST['hora_salida']; 
```

因此，如果 POST 为空，我将 NULL 分配给变量：

```
if ($hora_entrada == '') {$hora_entrada = "NULL";}
if ($salida_comida == '') {$salida_comida = "NULL";}
if ($regreso_comida == '') {$regreso_comida = "NULL";}
if ($hora_salida == '') {$hora_salida = "NULL";} 
```

现在，我想将值插入到 mysql 表中：

```
UPDATE  `nomina`.`registro_tiempo` SET  
`hora_entrada` =  '$hora_entrada',
`salida_comida` =  '$salida_comida',
`regreso_comida` =  '$regreso_comida',
`hora_salida` =  '$hora_salida',
WHERE  `registro_tiempo`.`id_tiempo` ='$id_tiempo';
") or die (mysql_error()); 
```

问题是当变量为 NULL 时，记录显示 00:00:00 我想保持它为 NULL

我试图以这两种方式分配 NULL 但没有成功：

```
$variable = NULL;

$variable = "NULL"; 
```

注意：MySql 字段的 NULL 值为 Predetermined。

¿ 你知道其他方法吗？我会感谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:47:27.973

原因是`'NULL'`并且`NULL`对于 SQL 来说是两件不同的事情。`'NULL'`当您应该插入`NULL`（预定的 NULL 值）时，您正在插入（文字字符串 NULL）

```
UPDATE  `nomina`.`registro_tiempo` SET  
`hora_entrada` =  'NULL',
`salida_comida` =  'NULL',
`regreso_comida` =  'NULL',
`hora_salida` =  'NULL',
WHERE  `registro_tiempo`.`id_tiempo` ='$id_tiempo';
") or die (mysql_error()); 
```

它应该是

```
UPDATE  `nomina`.`registro_tiempo` SET  
`hora_entrada` =  NULL,
`salida_comida` =  NULL,
`regreso_comida` =  NULL,
`hora_salida` =  NULL,
WHERE  `registro_tiempo`.`id_tiempo` ='$id_tiempo';
") or die (mysql_error()); 
```

做一个简单的修复是如果它不为NULL，则将逻辑用引号括起来：

```
<?php
$var = $var != "" ? "'" . $var . "'" : "NULL";
$sql = "INSERT INTO MyTable VALUES ('$id', $var)";
?> 
```

**并记住转义您的内容（特别是如果它是由用户提供的！）** 请参阅[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

**编辑：**

```
<?php
// If the variable is not null/empty, wrap quotes around it. Otherwise, store as NULL
$hora_entrada = $_POST['hora_entrada'] != "" ? "'" . $_POST['hora_entrada'] . "'" : "NULL";
$salida_comida = $_POST['salida_comida'] != "" ? "'" . $_POST['salida_comida'] . "'" : "NULL";
$regreso_comida = $_POST['regreso_comida'] != "" ? "'" . $_POST['regreso_comida'] . "'" : "NULL";
$hora_salida = $_POST['hora_salida'] != "" ? "'" . $_POST['hora_salida'] . "'" : "NULL";

// You should also mysqli_real_escape_string them
$hora_entrada = mysqli_real_escape_string($hora_entrada);
$salida_comida = mysqli_real_escape_string($salida_comida);
$regreso_comida = mysqli_real_escape_string($regreso_comida);
$hora_salida = mysqli_real_escape_string($hora_salida);

"UPDATE  `nomina`.`registro_tiempo` SET  
`hora_entrada` =  $hora_entrada,
`salida_comida` =  $salida_comida,
`regreso_comida` =  $regreso_comida,
`hora_salida` =  $hora_salida,
WHERE  `registro_tiempo`.`id_tiempo` ='$id_tiempo';
") or die (mysql_error());
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:48:00.850

如果您的列设置为允许`NULL`值，当您要插入时`NULL`，它不能用引号引起来。

也就是说，您的查询现在看起来像这样：

```
INSERT INTO `table` (datecol) VALUES('NULL'); 
```

但它必须看起来像：

```
INSERT INTO `table` (datecol) VALUES(NULL); 
```

您可以使用：

```
$variable = "NULL"; // for null values
// and
$variable = "'2012-07-01'"; // for actual date values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:51:43.447

首先检查 $_POST 是否设置，然后分配 null

```
$hora_entrada = $_POST['hora_entrada'];    
if (isset($hora_entrada) && empty($hora_entrada)) {
    $hora_entrada = null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:50:03.667

我假设您使用 TIME 列数据类型，文档明确指出当 TIME 对象无效时，它默认为 00:00:00。

[http://dev.mysql.com/doc/refman/5.5/en/time.html](http://dev.mysql.com/doc/refman/5.5/en/time.html)

您可能想要添加一个布尔列“validDate”，并在设置 NULL 日期时将其设置为 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:50:08.100

```
$hora_entrada = "'".$_POST['hora_entrada']."'";
$salida_comida = "'".$_POST['salida_comida']."'";
$regreso_comida = "'".$_POST['regreso_comida']."'";
$hora_salida = "'".$_POST['hora_salida']."'";

if ($_POST['hora_entrada'] == '') {$hora_entrada = "NULL";}
if ($_POST['salida_comida'] == '') {$salida_comida = "NULL";}
if ($_POST['regreso_comida'] == '') {$regreso_comida = "NULL";}
if ($_POST['hora_salida'] == '') {$hora_salida = "NULL";}

"UPDATE  `nomina`.`registro_tiempo` SET  
`hora_entrada` =  $hora_entrada,
`salida_comida` =  $salida_comida,
`regreso_comida` =  $regreso_comida,
`hora_salida` =  $hora_salida,
WHERE  `registro_tiempo`.`id_tiempo` ='$id_tiempo';
") or die (mysql_error()); 
```

# php - 使用 .htaccess 文件获得好看的 url

> ID：11693824
> 
> 赞同：2
> 
> 时间：2012-07-27T18:43:42.000
> 
> 标签：php, apache, .htaccess, url, mod-rewrite

我想要做的是让我的网站的网址对用户来说看起来更漂亮。
例如，我在**index.php**文件中**的 href**标记中有此链接：

> index.php?v=class&id=5

我希望用户在地址栏中看到：

> www.mysite.com/class/5

我试过使用这段代码：

> 重写规则 /([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$ index.php?v=$1&id=$2

但我发现它恰恰相反。它使好看的 url 变成了坏的。它需要*www.mysite.com/class/5*并显示：*www.mysite.com/index.php?v=class&id=5*。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:54:21.360

您快到了。

不要`R`在你的 RewriteRule 中使用。R 是一个外部重定向（它告诉浏览器重定向，所以 URL 会改变）。相反，删除 R 以进行内部重定向，这样 Apache 仍然可以正常解析查询字符串，但用户会看到漂亮的 URL（URL 在浏览器中不会更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:49:42.667

你试过这些了吗？

以下是我在搜索 Google 时发现的一些链接：

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

[http://www.nouveller.com/quick-tips/quick-tip-6-how-to-write-clever-pretty-urls-with-htaccess/](http://www.nouveller.com/quick-tips/quick-tip-6-how-to-write-clever-pretty-urls-with-htaccess/)

# c# - 使用 .Toarray 方法后对通用列表进行排序

> ID：11693827
> 
> 赞同：3
> 
> 时间：2012-07-27T18:43:49.107
> 
> 标签：c#, asp.net, arrays, sorting

我正在使用以下代码将分页数据源绑定到转发器控件

```
 protected void Paging()
    {
        Array q = (Array)Session["q"];
        PagedDataSource objPds = new PagedDataSource();
        objPds.DataSource = q;
        objPds.AllowPaging = true;
        objPds.PageSize = Convert.ToInt32(ddlPageNo.SelectedValue);

        objPds.CurrentPageIndex = CurrentPage;

        lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of "
           + objPds.PageCount.ToString();

        // Disable Prev or Next buttons if necessary
        cmdPrev.Enabled = !objPds.IsFirstPage;
        cmdNext.Enabled = !objPds.IsLastPage;

        rptHotels.DataSource = objPds;
        rptHotels.DataBind();

    } 
```

`q`在哪里

```
 getAvailableHotelResponse getres = new getAvailableHotelResponse();    
  getres = objsoap.getAvailableHotel(apiKey, destinationId, checkIn, checkOut, strCurrencyCode, "UK", false, rooms, f);   
            List<hotel> hr = new List<hotel>();
            hr = getres.availableHotels.ToList();

            List<BALHotelList> bh = new List<BALHotelList>();
            bh = h.GetHotelListByDestinationId(destinationId);
     var q = from a in bh
                    join b in hr on a.HotelCode equals b.hotelCode
                    orderby a.HotelName
                    select new
            {
                a.HotelCode,
                a.ImageURL_Text,
                a.HotelName,
                a.StarRating,
                a.HotelAddress,
                a.Destination,
                a.Country,
                a.HotelInfo,
                a.Latitude,
                a.Longitude,
                b.totalPrice,
                b.totalPriceSpecified,
                b.totalSalePrice,
                b.totalSalePriceSpecified,
                b.rooms

            };

            //rptHotels.DataSource = getres.availableHotels;

            Session["q"] = q.ToArray(); 
```

现在我想用

想要通过`hotelname`or对数组 q 进行排序`starRating`。

我没有找到任何类似的方法

```
q.sort(); 
```

或者

```
q.orderBy(q->hotelName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:51:35.010

对于成员对现有数组的就地排序：

```
Array.Sort(theArray, (x,y) => string.Compare(x.HotelName, y.HotelName)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T18:52:40.607

使用以下..

```
q.OrderBy(x => x.HotelName); 
```

**更新**

从会话中回退，这样做

```
//if you have concrete type instead of object, use that type

var t = (IEnumerable<object>)Session["q"]; 
```

**更新 2**

您的投影应该是具体类型（即创建一个新的 Hotel 类来表示您的投影），否则您将无法对投影的某些属性执行 OrderBy

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T19:29:17.193

`q`for you 是`Array`类的一个实例，而不是某种类型的数组（即`int[]`, `string[]`, `object[]`）。 `Array`only implements `IEnumerable`，而不是`IEnumerable<T>`Linq 方法不存在。这里的根本问题是它是一个匿名类型的数组，因此除了使用非常混乱的解决方法之外，您无法有效地获取强类型数组。

此时最好的解决方案是创建一个新类来保存您的数据（即`Hotel`），而不是将其放入匿名类型中。当您填充会话时，创建该类型的新实例 ( `Hotel`)，然后当您将其从会话中拉出时，将其转换为该类型的数组 ( `Hotel[]`)，而不是泛型`Array`。此时，您将能够在对象上使用 Linq 方法。

# android - Android 只允许一个根元素。xml 错误

> ID：11693834
> 
> 赞同：0
> 
> 时间：2012-07-27T18:44:11.383
> 
> 标签：android

为什么我总是收到此错误。我正在尝试将数据附加到现有的 xml 文件中。我[在这里](https://stackoverflow.com/questions/6497606/xml-and-android-only-one-root-element-allowed)阅读了答案并尝试了建议的内容。但仍然没有成功。我知道这个错误意味着顶部根元素只能出现一次。但是为什么我会收到这个错误我不知道。

这将是我的 xml 文件的结构。

```
<root>
  <ip>ip1</ip>
  <ip>ip2</ip>
</root> 
```

并且 ip 标签将继续增加。这就是我尝试读取数据并将数据附加到现有文件的方式。

```
private void UpdateExistingXML(String ip,File file) 
{
    try
    {
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(file.toURI().toString());   // <--error here

        // Get the root element
        Node root= doc.getFirstChild(); 
        org.w3c.dom.Element newip=doc.createElement("ip");
        newip.appendChild(doc.createTextNode(ip));
        root.appendChild(newip);
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(file);
        transformer.transform(source, result);
    }
    catch (ParserConfigurationException pce)
    {
            pce.printStackTrace();
    }
    catch (TransformerException tfe) 
    {
            tfe.printStackTrace();
    }
    catch (IOException ioe) 
    {
            ioe.printStackTrace();
    }
    catch (SAXException sae) 
    {
            sae.printStackTrace();
    }
    catch (Exception e)
    {
        Log.e("eeee",e.getMessage());
    }
} 
```

这是我第一次创建 xml 文件的方式，它显示根元素只插入一次。

```
private void CreateNewXML(String ip) throws FileNotFoundException
{
    FileOutputStream fos=null ;

    Log.i("Fileeee","new");
    try
    {
        fos = openFileOutput("clients.xml", Context.MODE_PRIVATE);
    }
    catch(FileNotFoundException e)
    {
            Log.e("FileNotFoundException", "can't create FileOutputStream");
    }
    XmlSerializer serializer = Xml.newSerializer();
    try {
                    serializer.setOutput(fos, "UTF-8");
                    serializer.startDocument(null, Boolean.valueOf(true));
                    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);
                    serializer.startTag(null, "root");

                            serializer.startTag(null, "ip");
                            serializer.text(ip);
                            serializer.endTag(null, "ip");

                    serializer.endTag(null, "root");
                    serializer.endDocument();
                    serializer.flush();
                    fos.close();

            } 
    catch (Exception e) 
    {
                    Log.e("Exceptionhaiiiiiiiiiii",e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:25:20.897

这看起来像你的问题：

```
Document doc = docBuilder.parse(file.toURI().toString());   // <--error here 
```

您正在尝试解析文件路径，而不是文件。您需要创建一个`inputStream`并解析它。

如果您从 Web 服务器获取文件，它可能如下所示：

```
URL url = new URL(DATAURL);
            conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(TIMEOUT);
            conn.setConnectTimeout(CONNECT_TIMEOUT);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);
            conn.connect();

DocumentBuilderFactory builderFactory =
            DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = null;

        try
        {

            builder = builderFactory.newDocumentBuilder();
        }
        catch (ParserConfigurationException e)
        {
            Log.e(TAG, "Parse Configuration issue", e);
            throw new ServiceException("Service Exception Error");
        }
        catch (IllegalAccessError e)
        {
            Log.e(TAG, "Illegal Accessor Error", e);
            throw new ServiceException("Service Exception Error");
        }

        try
        {
            // parse input from server
            Document document = builder.parse(conn.getInputStream());
            Element xmlElement = document.getDocumentElement();
            NodeList recordNodes = xmlElement.getChildNodes();

            // assign parsed data to listItem object
            for (int i = 0; i < recordNodes.getLength(); i++)
            {

                Node record = recordNodes.item(i);
                NodeList recordDetails = record.getChildNodes();
                ListData listItem = new ListData();

                for (int ii = 0; ii < recordDetails.getLength(); ii++)
                {
                    Node detailItem = recordDetails.item(ii);
                    String detailType = detailItem.getNodeName();
                    String detailValue = detailItem.getTextContent();
..... 
```

# jquery - 如何触发和绑定 Chrome 扩展程序中的任意事件？

> ID：11693839
> 
> 赞同：0
> 
> 时间：2012-07-27T18:44:17.773
> 
> 标签：jquery, javascript-events, google-chrome-extension

我在后台脚本中有一些代码。我希望能够发射类似的东西：

```
$(document).trigger('someEvent', [args]); 
```

然后在弹出窗口中用这样的东西听它：

```
var backgroundPage = chrome.extension.getBackgroundPage();
$(backgroundPage.document).bind('someEvent', function (args) {...}); 
```

但这不起作用。触发代码被触发，但显然我没有绑定到正确的东西。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:42:09.913

我真的不知道 JQuery 所以我在那里没有帮助，但我想我指出它似乎确实以 JS 方式工作......

**清单.json**

```
{
  "name": "TEST - Background to PopUp Event Triggering",
  "version": "1.0",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "browser_action": {
      "default_title": "TEST - Background to PopUp Event Triggering",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
   "background": {
    "scripts": ["background.js"]
  },
  "manifest_version" : 2
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

**popup.js**

```
var backgroundPage = chrome.extension.getBackgroundPage();

backgroundPage.document.addEventListener('myCustomEvent', function(e) {
    document.write(e.args + '\n');
}) 
```

**背景.js**

```
var customEvent = document.createEvent('Event');
customEvent.initEvent('myCustomEvent', true, true);

setInterval(function() {
    customEvent.args=["bunyips","smell"];
    document.dispatchEvent(customEvent);
}, 3000); 
```

# php - PHP ftp_connect 到站点的文件夹

> ID：11693840
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:44:19.293
> 
> 标签：php, ftp, connect

我可以用 ftp_connect('server.someServer.com') 连接，但连接后它不会让我做任何事情。我真正想连接的地方是“server.someServer.com/someFolder/someSubFolder”，这是我拥有用户名/密码的路径。但是，当我尝试使用更长的路径进行 ftp_connect 时，它会返回“php_network_getaddresses: getaddrinfo failed: Name or service not known”错误。

我已经尝试了所有我能想到的组合，但它们都不起作用！

有人对此有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:47:53.467

你想连接什么？`fopen()`根据我的经验，我发现在使用FTP 和 PHP 时通常更容易使用。当然，这假设您使用的是 PHP 5.0.0 或更高版本。

```
$username = 'FTP_USERNAME';
$password = 'FTP_PASSWORD';
$server = 'FTP_SERVER';
$directory = 'FOLDER_NAME';
$handle = fopen("ftp://$username:$password@$server/$directory", 'rb');

// Do some reading or writing or unlinking or whatever. 
```

祝你好运！

# css - 为什么我的图片在 IE 中无法点击？

> ID：11693842
> 
> 赞同：0
> 
> 时间：2012-07-27T18:44:37.303
> 
> 标签：css, internet-explorer, hyperlink, image, clickable

希望有人可以帮助我解决我在 IE 上遇到的这个问题。所以我正在处理的页面有一个包含 Facebook、Twitter 和 Youtube 选项卡的图像。

![在此处输入图像描述](../Images/9939dbc247b7990790bb5c4d50afcd99.png)

除了 Internet Explorer (7/8) 之外，所有这些选项卡在大多数其他浏览器 (Chrome/Safari/Firefox/Opera) 中都是可点击的。我不确定我在这里做错了什么，有人可以帮助我吗？

HTML（已编辑）：

```
<div id="head">
    .
    .
    .
    <div id="icons">
        <ul class="nav1">
            <li></li>
            <li><a id="facebook" rel="_blank" href="https://www.facebook.com">&nbsp;</a></li>
            <li><a id="twitter" rel="_blank" href="https://twitter.com">&nbsp;</a></li>
            <li><a id="youtube" rel="_blank" href="https://www.youtube.com">&nbsp;</a></li>
        </ul>
    </div>
    .
    .
    .
</div> 
```

CSS（已编辑）：

```
#icons {
    position:absolute;
    top:44px;
    right:200px;
    z-index:9;
    float:left;
    /*width:105px;*/
    height:35px;
    /*background:url(/images/sprite_header_icons.png) no-repeat -6px 0;*/
}
#icons ul.nav1{
    height: 35px; /*added*/
}
#icons ul.nav1 li {
    display: inline;
    padding-left: 1px;
height: 35px !important; /*added*/ 
}
#icons ul.nav1 li a {
    display: inline;
    /*width: 34px;
    height: 31px;*/
}
ul.nav1 li a:hover {

}
#icons ul.nav1 li a#facebook {
    padding-left: 20px;
    padding-right: 13px;
    padding-bottom: 28px;
    background:url(/images/sprite_header_icons.png) no-repeat -6px 0; /*added*/
    width: 20px; /*added*/
    height: 35px; /*added*/
}
#icons ul.nav1 li a#twitter {
    padding-left: 20px;
    padding-right: 13px;
    padding-bottom: 28px;   
    background:url(/images/sprite_header_icons.png) no-repeat -40px 0; /*added*/
    width: 20px; /*added*/
    height: 35px; /*added*/

}
#icons ul.nav1 li a#youtube {
    padding-left: 20px;
    padding-right: 13px;
    padding-bottom: 28px;
    background:url(/images/sprite_header_icons.png) no-repeat -74px 0; /*added*/
    width: 20px; /*added*/
    height: 35px; /*added*/
} 
```

**笔记：**

好的，所以我根据*Ryan Beaulieu*、*Alex Reynolds*和*OhMrBigshot*在这里的建议做了一些更改。现在，这些选项卡在 IE (7/8) 中是可点击的……但是，这些选项卡是部分可见的（li 38px x 16px），如下所示：

![在此处输入图像描述](../Images/65290a278c84f43ce6ad5fb84eea7e65.png)

宽度很好，但是**如何将高度从 16px 增加到 35px？**谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:55:44.927

尝试添加显示：块

```
#icons {
    position:absolute;
    top:44px;
    right:200px;
    z-index:9;
    float:left;
    width:210px;
    height:30px;
    background:url(/images/sprite_header_icons.png) no-repeat -6px 0;
}
#icons ul.nav1 li {
    display: inline;
    float:left;
    padding-left: 1px;
}
#icons ul.nav1 li a {
    float:left;
    display:block;
    width: 34px;
    height: 31px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:46:51.473

你在使用 rel="_blank" 吗？那是HTML5吗？你用的IE版本是9吗？难道你应该使用 target="_blank" 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:58:52.477

IE 有时会忽略“空”元素，即使您定义了大小。尝试添加标签`&nbsp;`。`a`

# c++ - 我在我的这个 c++ 程序中遇到断点错误，看看。编译器视觉 C++ 2010

> ID：11693843
> 
> 赞同：-3
> 
> 时间：2012-07-27T18:44:44.463
> 
> 标签：c++

```
error snapshot : https://rapidshare.com/files/3201989698/Capture5.JPG

code :

#include<fstream>
#include<conio.h>
#include<Windows.h>
#include<iostream>

using namespace std;
int ch_m;

HANDLE hConsole;

class budget
{
public :
    float balance;

    string due_name,loan_name;
    int  year,month;
    float due_pay,loan_given;//due_pay due to be paid 

    budget()
    {
        balance=0;
        month=1;
        due_name="NO BODY";
        loan_name="SAFE";
        year=0;            
        balance = 0;
        due_pay=0;
        loan_given=0;

    }
    char get_data();
    void show_data();
    void budget_menu();
    void balance_menu();

    int yr()
    {
        return(year);

    }

    int mont()
    {
        return month;
    }

};

void gotoxy(int x,int y)
{
    HANDLE hConsoleOutput;
    COORD dwCursorPosition;
    cout.flush();
    dwCursorPosition.X=x;
    dwCursorPosition.Y=y;
    hConsoleOutput=GetStdHandle(STD_OUTPUT_HANDLE);
    SetConsoleCursorPosition
    (hConsoleOutput,dwCursorPosition);
}

char budget :: get_data()
{
  char ch_b;
    gotoxy(5,2);
    cout<<"Enter Month                                                           :";
    cin>>month;
    gotoxy(5,4);
    cout<<"Enter year                                                            :";
    cin>>year;
    gotoxy(5,6);
    cout<<"Enter your balance for the current month and year in Rs               :"; 
    cin>>balance;
     do
       {
           gotoxy(6,9);
           cout<<"Continue adding records?(y/n)\n";
           cin>>ch_b;
       }while(tolower(ch_b)!='n'&&tolower(ch_b)!='y');

       return ch_b;

}

void budget :: show_data()
{

    gotoxy(5,2);
    cout<<"Month                                                           :"<<month;
    gotoxy(5,4);
    cout<<"Year                                                            :"<<year;

    gotoxy(5,6);
    cout<<"Your balance for the current month and year in RS               :"<<balance; 

  _getch();
}

void budget:: budget_menu()
{

    system("cls");
    gotoxy(12,5);

    cout<<"---------------------------------------";
    gotoxy(12,6);
    cout<<"Budget Menu";
    gotoxy(12,7);
    cout<<"---------------------------------------";
    gotoxy(12,10);  
    cout<<"1) Balance";
    gotoxy(12,12);
    cout<<"2) Loan Given";
    gotoxy(12,14);
    cout<<"3) Due to be paid";
    gotoxy(12,16);
    cout<<"4) Exit";

   gotoxy(14,17);
    cout<<"Enter your choice\n";
    cin>>ch_m;

    switch(ch_m)
    {
    case 1:  
        balance_menu();
        break;
    default:
        system("cls");
        gotoxy(15,8);
        cout<<"Wrong Input!!";

    }

}

void write_balance()
 {
system("cls");
 budget b;
 ofstream f1;
 f1.open("balance.dat",ios::app|ios::binary);
 char ch;
 do{
        ch = b.get_data();
        f1.write((char*)&b,sizeof(b));
   }while(tolower(ch)=='y');

 f1.close();

 }

 void read_balance()                //PROBLEM AFTER ENTERING THIS FUNCTION
     {
         system("cls");
       budget b;
    ifstream f1;
    f1.open("balance.dat",ios::in|ios::binary);
    while(f1.read((char*)&b,sizeof(b)))
    { b.show_data();
     }

   system("cls");
       cout<<"No More Records To Display!!";
    getch();
    f1.close();

     }

void budget :: balance_menu()
{
    int ch_bm;//balance menu choice

    char coni;//continue?
    system("cls");
    gotoxy(12,6);
    cout<<"1) Add current month and year balance";
    gotoxy(12,7);
    cout<<"2) Modify a balance";
    gotoxy(12,8);
    cout<<"3) Search a balance";
    gotoxy(12,9);
    cout<<"4)Delete a Record";
    gotoxy(12,10);
    cout<<"5) Display all records";
    gotoxy(12,11);
    cout<<"6) Back to previous menu";
    gotoxy(12,12);
    cout<<"7) Exit";
    gotoxy(14,15);
    cout<<"Enter your choice\n";
    cin>>ch_bm;
    switch(ch_bm)
    {
    case 1 :write_balance();
        break;
    case 5:
        read_balance();
        break;
    default :
        system("cls");
        gotoxy(15,8);
        cout<<"Wrong Input!!";
    }

    if(ch_bm!=6)
    {
        system("cls");
        gotoxy(15,8);
        cout<<"Continue?";
        cin>>coni;
    if(tolower(coni)=='y')
     {
        balance_menu();
     }
    }

getch();
}

void main()

{

    system("cls");

    budget b;
    b.budget_menu();

    _getch();
} 
```

首先转到选项 1/1 以创建文件，然后转到 1/5 读取将出现断点错误的内容.... 直到现在我只包含了读写选项。

已经3周了..我被困在这里

我尝试了很多东西

我的代码在 turbo c++ 中运行良好，但在 vc++ 中却不行，这段代码是为了保存预算数据。使用注释突出显示有问题的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:44:10.847

这是我的评论：

1.  除非需要更小的变量大小，否则`double`不要使用。`float`
2.  分配`0.0`给浮点数。如果是浮点数，则附加“F”。
3.  首选每行一个变量定义。使开发和维护更容易。构建时间的成本可以忽略不计。
4.  更喜欢在构造函数中使用初始化列表，例如`: balance(0.0), //...`
5.  在你的`return`陈述中保持一致。不需要括号。
6.  你*需要*有光标定位吗？这是 Windows 中的一个难题。
7.  C++ 默认 I/O 流可能与 Windows 控制台定位不兼容。
8.  您没有存储记录。最后一次迭代总是会覆盖之前的记录。
9.  为什么需要从 中返回操作员的响应`get_data`？
10.  绝对摆脱光标定位。它阻碍了你的发展。如有必要，在您的程序正常运行且健壮后将其重新添加。
11.  您不给操作员机会更正选择并重试。 *不好*
12.  最好不要使用二进制 I/O，尤其是在将结构和类写入文件时。如果类或结构布局发生更改，或者编译器在字段之间插入填充，则可能无法正确分配您的读数。此外，验证文件中的数据将更加困难。我建议每条记录使用一个文本行，每个字段用制表符、逗号或其他分隔符分隔。这允许您将数据导入其他应用程序（例如电子表格）以进行验证。文本比二进制数据更容易验证。
13.  更喜欢在你的类/对象中有 I/O 方法。这样你就可以做出一个简单的陈述，比如`file << my_budget;`
14.  如果您不使用 x,y 定位，则可以将菜单声明为一个常量文本文字并输出（更容易和更快），而不是一次显示一行。更容易修改和维护。
15.  `main`函数`int`总是返回。`return EXIT_SUCCESS;`必要时使用。
16.  在您的方法中，`budget`变量是本地的，并且会在从方法返回时消失。而是引用类变量。
17.  始终检查 I/O 错误。这可能是您的问题所在。
18.  在清除之前暂停控制台。尝试这个： `cin.ignore(100000, "\n");`

# java - 如何在 sql 中转义导致“引用的字符串未正确终止”的单引号？

> ID：11693846
> 
> 赞同：15
> 
> 时间：2012-07-27T18:44:55.023
> 
> 标签：java, sql, regex, oracle

我正在尝试从数据库（> 10K）中读取术语，并且在另一个查询中使用该术语。我在 Oracle 中收到以下错误：

> 引用的字符串未正确终止'

我做了

```
term.replaceAll("'", "\\'"); 
```

但这似乎对我不起作用。此外，这些术语在转换为文本时是来自文档的标记。有没有可以解决这个问题的正则表达式？

确切的 SQL 查询是：

```
String sql = "Select * from indexDB where (DocID=" + d.getDocId() + "and Term='" + term + "')"; 
```

我正在使用 Java。替换对我不起作用。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-27T18:45:25.310

您可以通过重复来转义单引号：

```
term.replaceAll("'","''"); 
```

一个更好的选择是参数化查询。例如，我们必须了解您的客户语言。

# php - 嵌套引用悖论 PHP

> ID：11693847
> 
> 赞同：-1
> 
> 时间：2012-07-27T18:44:59.520
> 
> 标签：php, quotes

我在嵌套引用方面遇到问题……实际上更像是一个悖论。

所以这是我使用 4 级嵌套引用的代码段，并且不知何故（对于我在 Chrome 的开发人员工具中看到的）浏览器错误地解释了第三和第四级：

```
 echo
    "<script type='text/javascript'>
    var latlng = new L.LatLng(".$row ['lat'].", ".$row ['long']."); 
    var flyer = ";

    echo 
    "\"<img class='flyerwide' 
    src='http://plandenuit.com/boliches/flyers/".$clubday."/".$name.".jpg'/>
    <br /><br />";

    echo "<a href='#' onClick='return false' onmousedown= 
```

1.3 在这一行是问题，我使用 ' 作为第三级引用和 \' 作为第四

```
 'javascript:swapContent(\'profilepage\',\'\',\'".$influenceGroupRow['id']."\');'> 
```

1.3 问题行尾

```
 <img class='pic' src='http://graph.facebook.com/".$influenceGroupRow['id']."/picture'/></a>";

    echo
    "\"; 
    var MyIcon = L.Icon.extend({
    iconUrl: 'boliches/icons/".$name.".png',
    shadowUrl: null,
    iconSize: new L.Point(50, 50),
    shadowSize: null,
    iconAnchor: new L.Point(25, 25),
    popupAnchor: new L.Point(1, 1)
    }); 
    var icon = new MyIcon();    
    var marker = new L.Marker(latlng, {icon: icon});
    map.addLayer(marker);   
    marker.bindPopup(flyer);
    map.panTo(new L.LatLng(".$setlat.", ".$setlong."));
    </script>
    "; 
```

现在，我已经尝试了几乎所有我能想象或谷歌的东西。Chrome 的开发者工具显示浏览器对这一行的解释如下：

```
 <a href="#" onclick="return false" onmousedown="javascript:swapContent(" profilepage','','1005497360');'=""> 
```

有人能破解这个吗？我在这里有点业余。（哦！顺便说一句，这一切都在一个while循环中，所以它必须被回显出来）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:48:48.930

反斜杠不会转义 HTML 属性中的引号。相反，您应该分别使用`&quot;`or`&apos;`和。`"``'`

此外，您可以使用 HEREDOC 代替 PHP 中的引号：

```
echo <<<END
All of your stuff goes here. "quotes are fine" as are 'single quotes',
and you can still include variables like $myvar or {$myarray['key']}.
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:50:28.877

[您可以使用HEREDOC](http://php.net/heredoc)消除至少一个级别的引用：

```
echo <<<EOL
<script type="text/javascript">
    var latlng = new L.LatLng({$row ['lat']}, {$row['long']}); 
    var flyer = '<img class="flyerwide" src="http://plandenuit.com/boliches/flyers/{$clubday}/{$name}.jpg"/ ><br /><br />';
etc...
EOL; 
```

# c# - WPF/ASP.NET 和 Silverlight 之间的 WCF 问题

> ID：11693850
> 
> 赞同：0
> 
> 时间：2012-07-27T18:45:14.983
> 
> 标签：c#, asp.net, wpf, wcf, silverlight-4.0

我有一个包含一个 WPF (4.0) 项目、一个 WCF (4.0) 项目、一个 ASP.NET (4.0) 和一个 Silverlight 4 项目的解决方案。

我开始开发工作正常的 WCF 服务和 WPF 客户端，我还使用与 ASP.NET 项目相同的 WCF 服务来获取数据。一切正常。但是，silverlight 根本不想播放，所以我创建了一个新的 .svc 文件作为启用 Silverlight 的 WCF 服务。现在，突然之间 ASP.NET 和 WPF 不会打扰与 WCF 通信，我得到的错误是：

> 该服务无法激活，因为它不支持 ASP.NET 兼容性。为此应用程序启用了 ASP.NET 兼容性。在 web.config 中关闭 ASP.NET 兼容模式，或将 AspNetCompatibilityRequirements 属性添加到服务类型，RequirementsMode 设置为 Allowed 或 Required

那么究竟如何才能为 Silverlight 和 WPF 拥有相同的 WCF 项目（尽管项目中的 .svc 文件不同）？？）

任何帮助将不胜感激。

//JaggenSWE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:51:23.140

您可以尝试将其更改为“允许”而不是“必需”。

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class SomeWCFService : ISomeWCFService 
```

# php - 在eclipse中运行php时出错

> ID：11693851
> 
> 赞同：-2
> 
> 时间：2012-07-27T18:45:15.167
> 
> 标签：php

我正在尝试在 Eclipse 中运行 php，但每次单击运行时都会出现以下错误。

> 找不到对象！

在此服务器上找不到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。

如果您认为这是服务器错误，请联系网站管理员。

> 错误 404
> localhost Fri Jul 27 21:32:48 2012 Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1

我仍然可以使用浏览器运行 php。此外，当我在 Eclipse 中手动更新文件 URL 时，它会为我正常工作并显示正确的输出。

当前文件目录（显示上述错误）：`http://localhost/RemoteSystemsTempFiles/LOCALHOST/Applications/XAMPP/htdocs/php_video/source/example5.php`

当我将其编辑为以下内容时，它将完美地为我工作： `http://localhost//php_video/source/example5.php`

我想我需要在设置和配置中改变一些东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:54:03.243

在浏览器中运行您的代码（chrome 最适合您的大多数测试，然后是 IE，因为一切都倾向于在 IE 中中断）而不是您的 IDE。PHP 是解释的，而不是编译的，所以你不需要 IDE 来编译和执行你的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:47:18.540

尝试使用 aptana studio 3.0。我去了那里，再也没有回头。

# php - WinXP - PHP 启动：无法加载动态库 php_ibm_db2.dll

> ID：11693859
> 
> 赞同：1
> 
> 时间：2012-07-27T18:45:32.123
> 
> 标签：php, apache, dll, db2, zend-server

运行 Windows XP Professional SP 3

PHP 版本 5.3.14

Zend 服务器版本 5.6.0

Apache/2.2.22 (Win32) mod_ssl/2.2.22

> PHP 警告：PHP 启动：无法加载动态库 'C:\Program Files\Zend\ZendServer\lib\phpext\php_ibm_db2.dll' - 找不到指定的过程。在第 0 行的未知中

这是我的“路径”变量中的所有内容。

```
C:\app\adam\product\11.2.0\client_1
;C:\app\adam\product\11.2.0\client_1\bin
;%SystemRoot%\system32
;%SystemRoot%
;%SystemRoot%\System32\Wbem
;C:\PROGRA~1\IBM\CLIENT~1
;C:\PROGRA~1\IBM\CLIENT~1\Shared
;C:\PROGRA~1\IBM\CLIENT~1\Emulator
;C:\PHP
;C:/PHP
;C:\Program Files\Zend\ZendServer\bin
;C:\Program Files\Zend\ZendServer\share\ZendFramework\bin
;C:\PROGRA~1\IBM\SQLLIB\BIN
;C:\PROGRA~1\IBM\SQLLIB\FUNCTION 
```

文件属性：

```
C:\Program Files\Zend\ZendServer\lib\phpext\php_ibm_db2.dll
Size: 51.5 KB (52,736 bytes)
Created: Sunday, July 01, 2012, 12:18:48 PM
Modified: Tuesday, June 07, 2011, 3:43:00 PM 
```

我的 PHP.ini 文件位于 C:\PHP

> extension_dir = "C:\PHP\ext"
> 
> 扩展=php_ibm_db2.dll

在我的整个 C:\ 驱动器中搜索 php_ibm_db2.dll 会出现： ![在此处输入图像描述](../Images/09bb0e2281680b772e18e7e33c260f56.png)

如果我可以提供任何其他细节，请告诉我。我很困惑为什么它“找不到”这个文件。

谢谢你的帮助

**-- 7 月 30 日更新 --**

仍然没有解决方案，但我可能发现了一个问题：

在这个页面的左边：http: [//windows.php.net/download/](http://windows.php.net/download/)

“我该选择哪个版本？如果您使用的是 Apache 1 或 apache.org 的 Apache2 的 PHP，您需要使用 PHP 的 VC6 版本”

由于我们使用的是Apache2，根据上面的说法，我们需要使用VC6版本的PHP。

PHP 5.4 和 PHP 5.3 是 VC9。PHP 5.2 是唯一列出的 VC6。PHP 5.2 下载“php-5.2.17-nts-Win32-VC6-x86.msi”不包含 php_ibm_db2.dll 文件。

我尝试将 5.3 中的 .DLL 文件与 PHP 5.2 一起使用，但也得到了相同的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-31T07:30:34.273

使其在 Windows 上与 PHP5.5/apache2.4.9/mysql5.5 一起工作的步骤：

所有库必须根据您的操作系统保持一致，如果您使用 32 位下载 32 位库，与 64 位相同，请勿混合使用。

1) 安装 iSeries 客户端库 ( [https://www-01.ibm.com/marketing/iwm/iwm/web/preLogin.do?source=swg-idsdpds](https://www-01.ibm.com/marketing/iwm/iwm/web/preLogin.do?source=swg-idsdpds) ) 如果您没有 IBM ID，则需要下载它只是注册。

2) 配置您的 WAMP 服务器并创建一个`phpinfo()`脚本来检查 `Compiler`和`Thread Safe`字段。

3）打开你的php.ini并添加/修改： `extension_dir`= `"C:\wamp\bin\php\php5.5.12\ext\"` `extension`=`php_ibm_db2.dll`

4) 下载 ibm_db2 的 PECL ( [https://pecl.php.net/package/ibm_db2/1.9.7/windows](https://pecl.php.net/package/ibm_db2/1.9.7/windows) ) 并使用步骤 2) 的 和 进行检查，在我的情况下`Compiler`，当我下载名称时该文件的内容是表示VC11，（线程安全），64 位 1.9.7 版本。`Thread Safe``5.5 Thread Safe (TS) x64``php_ibm_db2-1.9.7-5.5-ts-vc11-x64``Compiler``TS`

5）解压缩文件并复制`php_ibm_db2.dll`到您的 php`extension_dir`中，在我的情况下`"C:\wamp\bin\php\php5.5.12\ext\"`。

6）重新启动Apache，

7）运行“ `<?php echo phpinfo()?>`”，如果你看到`ibm_db2`它工作的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:41:08.953

您需要先安装**DB2 Runtime Client**！

# qt - 如何在 Qt 中显示为渐变选择的一系列颜色？

> ID：11693860
> 
> 赞同：1
> 
> 时间：2012-07-27T18:45:35.277
> 
> 标签：qt, colors, gradient

我想制作一个 QDialog 框（我认为库中没有一个...叹息），它允许用户选择任意数量的颜色以添加到渐变中（并可能调整它们），有点像渐变选项，可用于重新着色 Power Point 中的对象。

有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:14:02.303

我尝试了类似的概念来根据用户选择更改 QDialog 背景颜色。我通过我的代码使用了样式表。这是我的代码示例。

```
void Dialog::changeBackgroundColor()
{
    int bg_r = ui->horizontalSlider_2->value(); // user set value on horizontal slider
    int bg_g = ui->horizontalSlider_3->value(); // user set value on horizontal slider
    int bg_b = ui->horizontalSlider_4->value(); // user set value on horizontal slider

    ui->R_label->setText(QString::number(bg_r));
    ui->G_label->setText(QString::number(bg_g));
    ui->B_label->setText(QString::number(bg_b));

    QString styleSheet = "QDialog { background-color : rgb(%1, %2, %3)}";

    this->setStyleSheet(styleSheet.arg(bg_r).arg(bg_g).arg(bg_b));

   //in your case for gradient you can use
   QString styleSheet = "QDialog { qlineargradient(spread:pad, x1:0, y1:0, x2:0, y2:0.568, stop:0 rgba(%1, %2, %3, 255)) }";

   this->setStyleSheet(styleSheet.arg(bg_r).arg(bg_g).arg(bg_b));

} 
```

我希望您可以将此概念用于您的目的。

# mysql - SQL 公式帮助

> ID：11693861
> 
> 赞同：0
> 
> 时间：2012-07-27T18:45:43.003
> 
> 标签：mysql

```
 tablename: lineitem
            +----------------+-----+-----------+--------+
            | item           | amt | allocated | lotnum |
            +----------------+-----+-----------+--------+
            | bags galore    |  20 | Received  | 000590 |
            | test inventory |  10 | Received  |        |
            | bags galore    |  19 | Shipped   | 000590 |
            | test inventory |  20 | Received  |        |
            +----------------+-----+-----------+--------+ 
```

你好，我正在尝试创建一个 SQL 公式，但我碰壁了。上面是我的桌子。

我正在寻找一个公式，该公式将比较项目并从匹配项目和 lotnum 的 Received 中减去它的发货位置，并将 Received 加在一起。

所以最终的结果是这样的。

```
 +----------------+-----+--------+
            | item           | amt | lotnum |
            +----------------+-----+--------+
            | bags galore    |  1  | 000590 |
            +----------------+-----+--------+
            | test inventory |  30 |        |
            +----------------+-----+--------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:49:01.417

```
SELECT
    item,
    SUM(IF(allocated='Received',amt,-amt)) as amt,
    lotnum
FROM lineitem
GROUP BY item, lotnum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:49:43.323

也许是这样的？

```
select item,
sum(case allocated when 'Received' then amt when 'Shipped' then -amt end) as amt,
lotnum
from lineitem
group by item, lotnum 
```

# jquery - 如何创建一个标题栏，左边有一些文本，右边有一些文本？

> ID：11693862
> 
> 赞同：0
> 
> 时间：2012-07-27T18:45:55.130
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 jquery 小部件，我需要在标题栏的左侧和右侧创建一个带有一些文本的标题。这是一个片段：

```
 <div id="newtask" class="ui-widget-content ui-state-default">
    <h4 class="ui-widget-header">
        <span class="ui-icon ui-icon-done">New Task</span> Todo <div style="text-align:right">This needs 
    </h4> 
```

然而，右手文本在左手下方移动了一行。如何获得一行文字，左边有一些文字，右边有一些文字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:49:35.637

你应该使用浮动：对...

```
 <div id="newtask" class="ui-widget-content ui-state-default">
    <h4 class="ui-widget-header">
        <span class="ui-icon ui-icon-done">New Task</span> Todo <div style="float:right;">This needs 
    </h4> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:50:03.343

将要在左侧显示的文本浮动到左侧，将要在右侧显示的文本浮动到右侧。

或者，将要出现在左侧的文本绝对定位在左侧（父级相对定位），并将要出现在右侧的文本绝对定位在右侧。

# cognos - 在没有硬编码的情况下过滤 YYYYMM 中的当前年份

> ID：11693864
> 
> 赞同：0
> 
> 时间：2012-07-27T18:46:13.703
> 
> 标签：cognos

在我的报告中，我目前有一个提示框，以 YYYYMM 格式显示当年月份的列表：201201 201202 201203...等

但是，我目前已将其硬编码以显示在 201201 和 201212 之间。这工作正常，但我想删除 2012 的硬编码并使用系统日期来确定当前月份应该是什么。这样，在 1 月份，我就不必回头将 2012 年到 2013 年的每个实例都更改。

实现这一目标的最佳方法是什么？我了解 to_char(current_date,'YYYYMM') 但不知道如何成功创建一个过滤器，该过滤器将在一月份转换为显示 201301-201312。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:01:47.730

我想到了：

[月份 YYYYMM] to_char(current_date, 'YYYY')+'00' 和 to_char(current_date, 'YYYY')+'13'

希望这可以帮助某人，lostintern

# json - Go 中带有 JSON Marshal 的小写 JSON 键名

> ID：11693865
> 
> 赞同：205
> 
> 时间：2012-07-27T18:46:19.290
> 
> 标签：json, go, serialization, tags, marshalling

我希望使用该`"encoding/json"`包来编组在我的应用程序的一个导入包中声明的结构。

例如。：

```
type T struct {
    Foo int
} 
```

因为它是导入的，所以结构中所有可用（导出）的字段都以大写字母开头。但我希望有小写的键名：

```
out, err := json.Marshal(&T{Foo: 42}) 
```

将导致

> {“Foo”：42}

但我希望得到

> {“富”：42}

是否有可能以某种简单的方式解决问题？

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2012-07-27T19:14:25.923

查看[encoding/json.Marshal](http://golang.org/pkg/encoding/json/#Marshal)的文档。它讨论了使用结构字段标签来确定生成的 json 的格式。

例如：

```
type T struct {
    FieldA int    `json:"field_a"`
    FieldB string `json:"field_b,omitempty"`
} 
```

这将生成如下 JSON：

```
{
    "field_a": 1234,
    "field_b": "foobar"
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T19:11:24.680

您可以使用要导出的键创建自己的结构，并为它们提供适当的 json 标记以表示小写名称。然后，您可以将所需的结构复制到您的结构中，然后再将其编码为 JSON。或者，如果您不想费心制作本地结构，您可以制作 a`map[string]interface{}`并对其进行编码。

# wpf - 服务调用时，Treeview 选定项目更改为根项目

> ID：11693877
> 
> 赞同：1
> 
> 时间：2012-07-27T18:46:56.300
> 
> 标签：wpf, treeview, selecteditemchanged

我在一个作为对话框打开的窗口中有一个 TreeView。当单击一个项目时，它会被选中。但是当有服务调用时，所选项目会更改为根项目。TreeView 的 DataContext 是一个“作者”数组，每个都包含一个“书籍”数组，其中包含一个“页面”数组。我从服务调用中获取“作者”数组以及“页面”PDF 的字节。“作者”和“书籍”显示在 TreeView 中，但“页面”不显示。单击“书”时，“页面”数组被加载到组合框中，第一个“页面”显示在 PDF 查看器中。“页面”是通过服务调用从服务器加载的。根“作者”

注意：这是我实际使用的代码，但由于我公司的隐私政策，事物的名称已更改。不过，功能和结构上的一切都是一样的。

这基本上就是 XAML 和背后的代码。

XAML：

```
<Window.Resources>
        <HierarchicalDataTemplate DataType="{x:Type local:author}" ItemsSource="{Binding Path=books}">
            <TextBlock Text="{Binding name}"/>
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate DataType="{x:Type local:book}" >
            <TextBlock Text="{Binding title}"/>
        </HierarchicalDataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" MinWidth="125"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <GridSplitter HorizontalAlignment="Right" VerticalAlignment="Stretch" Grid.Column="1" Grid.RowSpan="2" ResizeBehavior="PreviousAndNext" Width="5" Background="#FFBCBCBC"/>

        <TreeView x:Name="booksTreeView" Grid.Column="0" Grid.RowSpan="2" SelectedItemChanged="booksTreeView_SelectedItemChanged" Background="WhiteSmoke"/>

        <ComboBox x:Name="pagesDropBox" Grid.Column="2" Grid.Row="0" HorizontalAlignment="Left" MinWidth="100" SelectionChanged="pagesDropBox_SelectionChanged" />

        <Grid Grid.Column="2" Grid.Row="1" x:Name="previewHolderGrid"/>
    </Grid> 
```

C＃：

```
private void booksTreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
        {
            TreeView tree = sender as TreeView;
            book b = tree.SelectedItem as book;
            if (b != null)
            {
                e.Handled = true;
                pagesDropBox.ItemsSource = db.pages;
                if (b.pages.Count > 0)
                    pagesDropBox.SelectedIndex = 0;
            }
        }

        private void pagesDropBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            previewHolderGrid.Children.Clear();
            Guid p = pagesDropBox.SelectedItem as Guid;
            if (p != Guid.Empty)
            {
                byte[] bytes = ServiceAccess.Instance.GetPage(p); //This is the line that will cause the root item to be selected even if the next line is commented out
                this.previewHolderGrid.Children.Add(new PDFViewer.PdfViewerControl(bytes));
            }
        } 
```

数据上下文对象：

```
public class author{
    String name;
    BindingList<book> books;

}

public class book{
    String title;
    BindingList<Guid> pages;
} 
```

# javascript - 从 asp.net 中继器执行 Java 脚本

> ID：11693880
> 
> 赞同：1
> 
> 时间：2012-07-27T18:47:07.143
> 
> 标签：javascript, asp.net, zeroclipboard

我正在尝试使用中继器中的 zeroclipboard 库。我在中继器的每一行都有一个带有数据的文本框和一个复制到剪贴板的按钮。

我所做的是编写了一个 js 函数，该函数接受文本框 id 和按钮，并在将数据从服务器绑定到中继器时在单击按钮时调用它。这是js方法

```
function copyToClipBoard(txtbox, btn, btnEvent) {
            if (btnEvent == 1) {
                //create client
                var clip = new ZeroClipboard.Client();

                //event                    
                clip.addEventListener('mousedown', function() {
                    clip.setText(document.getElementById(txtbox).value);
                });
                clip.addEventListener('complete', function(client, text) {
                    alert('copied: ' + text);
                });

                //glue it to the button
                clip.glue(btn);
                //document.getElementById(btn).click();

            }
        } 
```

现在的问题是，当您第一次单击任何按钮时，它会调用 js 函数并绑定 zeroclipboard 库以将数据复制到剪贴板。并在第二次单击病房时开始正常运行（复制到剪贴板）

我无法想出任何方法来使用中继器实现 zeroclipboard。提前感谢您的帮助。

# javascript - JavaScript 正则表达式代码匹配字符和数字的问题

> ID：11693882
> 
> 赞同：0
> 
> 时间：2012-07-27T18:47:16.210
> 
> 标签：javascript, regex

我想要帮助使用正则表达式解决问题。

我编写了以下 JavaScript 代码：

```
var s = '/Date(1341118800000)/';
var regex = new RegExp('^/Date\(\d+\)/$');
if ( typeof s === 'string' && s.match(regex) )
    s = 'abc';
alert (s); 
```

我写了一个正则表达式，我想匹配以以下确切字符开头的字符串：`/Date(`后跟一个或多个数字，后跟确切字符`)/`，仅此而已。

在上面的 JavaScript 代码中，我希望字符串 'abc' 应该分配给`s`，但在这段代码的结尾，值`s`是 '/Date(1341118800000)/'。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:50:24.623

转义斜线已被字符串消耗，即`"\(" === "("`. 生成的未转义字符串被传递给`new RegExp`，它被解释`(`为一个特殊字符。

您应该使用正则表达式文字并转义`/`s ：

```
var regex = /^\/Date\(\d+\)\/$/; 
```

要测试字符串是否匹配，您可以使用：

```
regex.test(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:51:47.693

问题是在javascript中`"/^/Date\(\d+\)/$/"`转换为。`"/^/Date(d+)/$/"`

`"/^/Date\(\d+\)/$/" == "/^/Date(d+)/$/" // returns true`

因此，只需转义退格键 ,`\`即可解决问题。

`var regex = new RegExp('^/Date\\(\\d+\\)/$');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:02:59.317

我相信您正在寻找此代码：

```
var s = '/Date(1341118800000)/';
s = s.match(/^\/Date\((\d+)\)\/$/)[1];
alert(s); 
```

[在这里](http://jsfiddle.net/Sev23/)测试一下。

# vim - 在vim中下划线而不改变其颜色

> ID：11693883
> 
> 赞同：3
> 
> 时间：2012-07-27T18:47:18.070
> 
> 标签：vim, syntax-highlighting

我想为 vim 中的某些句法组使用带下划线的文本。一个简单的例子是搜索组：

```
:highlight Search cterm=underline 
```

但是，当我这样做时，所有搜索匹配也会将其颜色更改为白色。我可以将它们全部下划线，但保留它们的原始颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:05:07.990

简单的。对于新的突出显示组，只需省略`bg`/`fg`定义。要覆盖现有组，请使用特殊颜色`NONE`：

```
:highlight Search guibg=NONE guifg=NONE gui=underline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T15:45:54.660

您需要使用 ctermfg、ctermbg 和 cterm 来影响彩色终端中的突出显示。“cterm”代表“彩色终端”。

您可以组合颜色终端和 gui 终端选项，以在两者之间提供一致的行为/突出显示：

```
:highlight Search guibg=NONE guifg=NONE gui=underline ctermfg=NONE ctermbg=NONE cterm=underline 
```

希望有帮助

# apache-flex - 自定义事件未在 Flash Builder 中触发

> ID：11693890
> 
> 赞同：0
> 
> 时间：2012-07-27T18:47:34.310
> 
> 标签：apache-flex, flash-builder, custom-component, custom-event

我在 Flash Builder 中有 2 个自定义组件，A.mxml 包含 B.mxml。B 有一个文本输入，每次更改文本时，我都想在 A 上调用“save()”函数。

B中的相关代码为：

```
<fx:Metadata>
    [Event(name="customChange", type="flash.events.Event")]
</fx:Metadata>

...

<s:TextInput text="@{value}" valueCommit="{dispatchEvent(new Event(Event.CHANGE))}"/> 
```

我可以用跟踪语句替换代码`valueCommit="{}"`，并确认它按预期工作。

A中的相关代码为：

```
<widgets:B customChange="{save()}"/> 
```

但是`save()`永远不会被调用。

为什么事件没有到达 A？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:14:36.500

The metadata in your class (B.mxml) says it dispatches an event who's type/name is "customChange":

```
[Event(name="customChange", type="flash.events.Event")] 
```

But the component is dispatching `Event.CHANGE` -- the type/name for this event is just "change".

You have two options:

*   Change your meta data to use the the same event type/name that you are dispatching:

    [Event(name="change", type="flash.events.Event")]

*   Create your own event class and dispatch that, then modify the meta data to specify that your custom event class is dispatched by B.mxml

# asp.net - 获取 ASP.NET 服务器上图像的 URI

> ID：11693891
> 
> 赞同：0
> 
> 时间：2012-07-27T18:47:45.757
> 
> 标签：asp.net, asp.net-mvc-3, uri

我需要将存储在我的 asp.net mvc 项目中的 png 作为位图图像加载到我的程序中。但是，BitmapImage 的构造函数只接受一个 Uri 对象。如何访问图像？

做类似的事情

```
new Uri(VirtualPathUtility.ToAbsolute("~\\Content\\image.png")) 
```

告诉我无法确定 URI 的格式。但是，如果我对路径进行硬编码（C：\\...等），它会起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:52:53.763

正如 Stefan 所指出的，您可以使用[MapPath 方法](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)。

```
new Uri(Server.MapPath("~/Content/image.png")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:53:08.283

您可能希望将您拥有的相对路径映射到服务器上的物理路径，为此您可以使用 Server.MapPath();

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)

# ios - iOS 应用程序和数据生存能力

> ID：11693895
> 
> 赞同：0
> 
> 时间：2012-07-27T18:48:03.790
> 
> 标签：ios

沙盒应用程序具有某些文档文件夹，它们可以在其中保存 plist 和 sqlite 文件等数据。这些文件夹无法升级，这意味着 - 当您从应用商店升级应用时，数据不会被重置。

但是，当您删除应用程序时，所有本地数据都被删除了吗？不是吗？除了应用程序删除之外，有没有办法将其持久化？所以如果你重新安装，你只是把你的旧数据拿回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:55:10.873

您可以将数据从外部存储在 iCloud、Dropbox 或其他在线服务中。

这样做的好处是，数据不仅可以在删除和重新安装后保留下来，而且还可以在用户更换设备、升级到新设备、在设备之间共享数据等情况下保留下来。

# android - ActionBarSherlock 将第二个 Action Bar 添加到 SherlockFragmentActivity

> ID：11693899
> 
> 赞同：1
> 
> 时间：2012-07-27T18:48:13.733
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock

我使用带有 ActionBarSherlock 的 ViewPager 实现创建了一个带有选项卡式视图的 ActionBar。这一切都很好，我的屏幕上有一个带有两个选项卡（配置文件和信息）的顶部栏，用 Fragments 实现。然而，这只是我的应用程序的一个部分/活动（主要活动），现在我想在屏幕底部添加另一个菜单/操作栏，在我的应用程序的不同部分之间导航。所以现在我有了主要活动，我想在底部操作栏中得到以下内容：

*   主要活动
*   设置活动
*   帮助活动

如何集成将在整个应用程序中显示的底部栏？我当前的 Activity 实现如下：

```
public class ContactsActivity extends SherlockFragmentActivity implements  OnContactsFetchedListener { 

private static final String TAG = "MainActivity";

private ViewPager mViewPager;
private TabsAdapter mTabsAdapter;
private TabHost mTabHost;

private String user;
private String token;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME);
    super.onCreate(savedInstanceState);
    // Hide the title bar (just shows "Minggler")
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    //setContentView(R.layout.main);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        String message = extras.getString("message");
        Utils.showToast(getApplicationContext(), message);
        String user = extras.getString("user");
        String token = extras.getString("token");
        if (token != null) {
            saveUniqueToken();
        }
    }

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);
    mViewPager.setOffscreenPageLimit(3);
    setContentView(mViewPager);
    mTabsAdapter = new TabsAdapter(this, mViewPager);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayUseLogoEnabled(false);
    bar.setDisplayShowTitleEnabled(false);
    bar.setDisplayShowHomeEnabled(false);

    mTabsAdapter = new TabsAdapter(this, mViewPager);
    mTabsAdapter.addTab(bar.newTab().setText("Profile"),
            ContactsFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Info"),
            InformationFragment.class, null);

    Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
    getContactInfo(intent);
    getCallHistory();
}

public static class TabsAdapter extends FragmentPagerAdapter
        implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();

        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public int getCount() {
        return mTabs.size();
    }

    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment)Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {

    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
        Object tag = tab.getTag();
        for (int i=0; i<mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {}

    public void onTabReselected(Tab tab, FragmentTransaction ft) {}

} 
```

我的布局定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight="5" />

</LinearLayout> 
```

任何人都知道如何解决这个问题？可能会很辛苦，但是非常感谢！

# php - 将对象添加到数组，显示计数为 0

> ID：11693914
> 
> 赞同：1
> 
> 时间：2012-07-27T18:49:09.927
> 
> 标签：php, arrays, scope

这是我正在运行的代码。

基本上我会抓取数据，并将它们放入简单的 POCO 类中。在循环结束时，我想将`$newItem`对象添加到`$parsedItems`数组中。我是 PHP 新手，这可能是范围问题吗？

```
<h1>Scraper Noticias</h1>

<?php

include('simple_html_dom.php');

class News {
    var $image;
    var $fechanoticia;
    var $title;
    var $description;
    var $sourceurl;

    function get_image( ) {
        return $this->image;
    }

    function set_image ($new_image) {
        $this->image = $new_image;
    }

    function get_fechanoticia( ) {
        return $this->fechanoticia;
    }

    function set_fechanoticia ($new_fechanoticia) {
        $this->fechanoticia = $new_fechanoticia;
    }

    function get_title( ) {
        return $this->title;
    }

    function set_title ($new_title) {
        $this->title = $new_title;
    }

    function get_description( ) {
        return $this->description;
    }

    function set_description ($new_description) {
        $this->description = $new_description;
    }

    function get_sourceurl( ) {
        return $this->sourceurl;
    }

    function set_sourceurl ($new_sourceurl) {
        $this->sourceurl = $new_sourceurl;
    }
}

// Create DOM from URL or file
$initialPage = file_get_html('http://www.uvm.cl/noticias_mas.shtml');

// Declare variable to hold all parsed news items.
$parsedNews = array();

// Since the University blog page has 262 pages, we'll iterate through that.
for ($i = 2; $i <= 5; $i++) {
    $url = "http://www.uvm.cl/noticias_mas.shtml?AA_SL_Session=34499aef1fc7a296fb666dcc7b9d8d05&scrl=1&scr_scr_Go=" . $i;
    $page = file_get_html($url);
    parse_page_for_news($page);
}

echo "<h1>Final Count:" . count($parsedNews) . "</h1>";

// Function receives an HTML Dom object, and the library works against that single HTML object.
function parse_page_for_news ($page) {

    foreach($page->find('#cont2 p') as $element) {

        $newItem = new News;

        // Parse the news item's thumbnail image.
        foreach ($element->find('img') as $image) {
            $newItem->set_image($image->src);
            //echo $newItem->get_image() . "<br />";
        }

        // Parse the news item's post date.
        foreach ($element->find('span.fechanoticia') as $fecha) {
            $newItem->set_fechanoticia($fecha->innertext);
            //echo $newItem->get_fechanoticia() . "<br />";
        }

        // Parse the news item's title.
        foreach ($element->find('a') as $title) {
            $newItem->set_title($title->innertext);
            //echo $newItem->get_title() . "<br />";
        }

        // Parse the news item's source URL link.
        foreach ($element->find('a') as $sourceurl) {
            $newItem->set_sourceurl("http://www.uvm.cl/" . $sourceurl->href);
        }

        // Parse the news items' description text.
        foreach ($element->find('a') as $link) {
            $link->outertext = '';
        }

        foreach ($element->find('span') as $link) {
            $link->outertext = '';
        }

        foreach ($element->find('img') as $link) {
            $link->outertext = '';
        }

        $newItem->set_description($element->innertext);

        // Add the newly formed NewsItem to the $parsedNews object.
        $parsedNews[] = $newItem;

        print_r($newItem);
        echo "<br /><br /><br />";

    }
} 

?> 
```

在我目前对语言的理解中，由于`$parsedItems`对象是在函数之外声明的，不应该正确添加它吗？

为什么我的 count() 调用会返回 0，就好像它没有对象一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T19:03:26.903

这确实是一个范围界定问题。这将不起作用：

```
$foo= array();

function bar()
{
    $foo[] = 'baz';
}

bar();
var_dump($foo); // will output an empty array 
```

您想要做的是以下内容：

```
$parsedNews = array();

// loop through the items as you are doing now
for ($i = 2; $i <= 5; $i++) {
    $url = "http://www.uvm.cl/noticias_mas.shtml?AA_SL_Session=34499aef1fc7a296fb666dcc7b9d8d05&scrl=1&scr_scr_Go=" . $i;
    $page = file_get_html($url);
    $newItems = parse_page_for_news($page);

    $parsedNews = array_merge($parsedNews, $newItems);
} 
```

并让`parse_page_for_news`函数`parsedNews`在循环完成后返回：

```
return $parsedNews; 
```

请永远不要使用`global`关键字，除非您有充分的理由，否则请不要通过引用传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T19:11:23.543

不，您误解了**[Variable Scope](http://il.php.net/manual/en/language.variables.scope.php)**的概念。

考虑以下：

```
$foo = "bar";

function change_foo($new_foo) {
    $foo = $new_foo;
}

change_foo("New Foo!");
echo $foo; 
```

在这种情况下，输出仍然是`"bar"`. 那是因为`$foo`inside of`change_foo()`包含在*函数范围内*。

但是，如果我们要做这样的事情（正确的方法）：

```
$foo = "bar";

function change_foo($new_foo) {
    $foo = $new_foo;
    return $foo;
}

$foo = change_foo("New Foo!");
echo $foo; 
```

结果确实是`New Foo!`。

另一种（较少推荐的）方法如下：

```
$foo = "bar";

function change_foo(&$old_foo, $new_foo) {
    $old_foo = $new_foo;
}

change_foo($foo, "New Foo!");
echo $foo; 
```

不推荐这样做的原因是因为从`$foo`更改的代码中并不明显（当然，由于我给函数起的正确名称，这似乎足够明显）。

这样做最糟糕的方法是`$foo`进入全局状态。

```
$foo = "bar";

function change_foo($new_foo) {
    global $foo;
    $foo = $new_foo;
}

change_foo("New Foo!");
echo $foo; 
```

通过全球化`$foo`变量，函数中的任何人和每个人都可以访问和更改它。如果函数的名称不是那么明显，我们永远不会知道它改变了值`$foo`！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:55:03.437

> 在我目前对该语言的理解中，由于 $parsedItems 对象是在函数之外声明的，不应该正确添加它吗？

不，您需要将它传递给函数，就像使用 C# 一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:55:19.250

虽然你可以添加

```
global $parsedNews 
```

在你的函数声明里面。如果您需要能够修改它并将修改后的值反映在全局范围中，我认为通过引用将项目传递给函数是更好的编码实践。所以你可以简单地把你的函数签名改成这个

```
function parse_page_for_news ($page, &$parsedNews) 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-07-27T18:51:24.780

您的`News`对象没有括号。它应该是一个构造函数，如下所示：

`$newItem = new News();`

此外，您的`News`类需要一个构造函数。我不确定是否通过不声明一个，它会自动被赋予一个默认构造函数（即，没有任何参数）

# javascript - 遍历表格jQuery中的选择框

> ID：11693922
> 
> 赞同：0
> 
> 时间：2012-07-27T18:49:46.340
> 
> 标签：javascript, jquery, html

我在表单中添加了行选项，用户可以根据需要添加任意数量的行，然后通过 ajax 一次性提交。

每行包含选择框和一堆文本框。

文本框已正确提交，但我的表单仅在第一行中为所有其他行提交选择框值，尽管值不同。

正确解释了我的问题（希望如此），以下是选择框的 html 代码代码：

```
<td><span id="xyz"><select id="whatever">
<option value="one">ONE</option>
 <option value="two">TWO</option>
<option value="three">THREE</option>
</select>
</span></td> 
```

以下是 jQuery 获取所有选择框值的不同代码版本的代码：

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0)").find("select#whatever).val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $("select#whatever).val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0)").find("select#whatever option:selected").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0)").find("select#whatever").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0)").find("select").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0).xyz").find("select#whatever").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0).dropdown select#whatever").val();
//etc
}

$("#table tbody tr").each(function(){

var select = $(this).find("td:eq(0)").find("select#whatever").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $("select#whatever option:selected").val();
//etc
} 
```

或者

```
$("#table tbody tr").each(function(){

var select = $("select option:selected").val();
//etc
} 
```

如果我没记错的话，最重要的是代码的各种版本，我已经在 IE 8 中尝试过，但没有取得多大成功。

它们在 IE 9 和 firefox 等其他浏览器中运行良好。

循环工作正常，因为我能够获取其他输入框值。

我也尝试过没有 id 属性的 html select boxe，但也没有用。

我真的需要有人帮忙。

提前感谢天才。

标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:53:35.427

我想你正在寻找这个：

`var selectValue = $(this).find("td:eq(0)").find("select option:selected").val();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:56:03.197

假设每行只有一个选择框，这应该有效：

```
var values = $("#table select").map(function(){
    return $(this).val();
}).get(); 
```

如果您有更复杂的标记，并且只想从每行的第一个单元格中获取值，则可以将选择器更改为

```
$('#table td:first-child select') 
```

# c - 释放内存/跨平台兼容性的问题

> ID：11693923
> 
> 赞同：1
> 
> 时间：2012-07-27T18:49:49.863
> 
> 标签：c, gcc, tree, free, runtime-error

我用 C 制作了一棵树，当我使用 Visual C++ 时，除了免费功能外，一切都在我的计算机上运行。

当我在任何其他平台（DOS 和 UNIX 上的 gcc）上编译时，我在运行时也会遇到很多问题。我不知道那里有什么问题。

在我的 Visual C++ 调试器上，它在 (1) 处中断

```
void freePhoneBook(PhoneBookP P)
{
    traverseFree(P->Root);
}
static void traverseFree(NodeP N)
{
    if(N)
    {
        traverseFree(N->Left);
        traverseFree(N->Right);
        free(N);//(1)<------fails here
    }
} 
```

错误说：

00A01768 处的堆块在 00A01798 处修改，超过 28 Windows 的请求大小已触发 PhoneBook.exe 中的断点。

这可能是由于堆损坏，这表明 PhoneBook.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 PhoneBook.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。HEAP [PhoneBook.exe]：指定给 RtlValidateHeap(00A00000, 00A01770) 的地址无效 Windows 已在 PhoneBook.exe 中触发断点。

这可能是由于堆损坏，这表明 PhoneBook.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 PhoneBook.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。

这是我的所有代码：

```
 /*
 * PhoneBook.h
 * Cop 3530 
 * jlewis
 */

#ifndef _phonebook_h
#define _phonebook_h

/*
 * PhoneBookP is a pointer to the phonebook struct
 * Define the phonebook struct and the node struct 
 * in your (.c) file
 */
typedef struct PhoneBookT *PhoneBookP;

/*
 * PhoneBook Interface
 */

/*
 * Returns a pointer to a new empty PhoneBook
 * If memory cannot be allocated, returns a NULL pointer
 */
PhoneBookP newPhoneBook();

/*
 * Locates and displays the desired entry from the phone book
 * If entry is not found, display an appropriate message
 * Parameters: book, firstname, lastname
 */
void lookupPhoneBook(PhoneBookP, char *);

/*
 * Creates node with the provided data
 * Inserts the node into the correct position in the tree
 * NOTE: Copy the data into the node
 */
void insertPhoneBook(PhoneBookP, char *, char *);

/*
 * Removes the node containing the matching names
 * Parameters: phonebook, firstname
 * Returns true if successful, else false
 *
 * NOTE: THIS FUNCTION IS FOR BONUS POINTS
 * YOU CAN SIMPLY INSERT A DUMMY FUNCTION THAT 
 * ALWAYS RETURNS ZERO IF YOU CHOOSE
 */
int removePhoneBook(PhoneBookP, char *);

/*
 * Dislpays all the entries in the Phone book in order
 * Display one person per line, firstname followed by phone number
 */
void displayPhoneBook(PhoneBookP);

/*
 * Frees the memory used by each node in the book
 * Frees the memory used by this addressbook
 */
void freePhoneBook(PhoneBookP);

#endif 
```

这是.c文件

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "PhoneBook.h"
typedef struct NodeT
{
    struct NodeT *Left;
    struct NodeT *Right;
    char *Name;
    char *Number;
}* NodeP;

struct PhoneBookT
{
    NodeP Root;
};
static void Insert(PhoneBookP, NodeP, char* Name,char* Number);
static void traversePrint(NodeP N);
static NodeP newNode(PhoneBookP P, NodeP, char *Name,char *Number);
static int find(NodeP N,char *Name);
static void traverseFree(NodeP N);
PhoneBookP newPhoneBook()
{
    PhoneBookP P =(PhoneBookP) malloc(sizeof(PhoneBookP));
    P->Root = NULL;
    return P;
}
void lookupPhoneBook(PhoneBookP P, char * Name)
{
    if(find(P->Root, Name));
    else printf("Error\n");
}
static int find(NodeP N,char *Name)
{
    if(N)
    {
        find(N->Left,Name);
        if(0 == strcmp(Name,N->Name))
        {
            printf("Name: %s\nNumber: %s\n", N->Name, N->Number);
            return 1;
        }
        find(N->Right,Name);
    }
    else
        return 0;
}
void insertPhoneBook(PhoneBookP P, char *Name, char *Number)
{
    if(P->Root)
        Insert(P, P->Root, Name,Number);
    else
        P->Root = newNode(P,P->Root, Name,Number);
}
static void Insert(PhoneBookP P,NodeP N,  char* Name,char* Number)
{
    if(N)
    {
        if(0 > strcmp(Name,N->Name))
        {
            if(N->Left)
            {
                Insert(P,N->Left, Name, Number);
            }
            else
            {
                N->Left = newNode(P,N->Left, Name, Number);
            }
        }
        else
        {
            if(N->Right)
            {
                Insert(P,N->Right, Name, Number);
            }
            else
            {
                N->Right = newNode(P,N->Right, Name, Number);
            }
        }
    }
    else
        N = newNode(P, N, Name, Number);
}
static NodeP newNode(PhoneBookP P,NodeP N,char *Name,char *Number)
{
    NodeP New = (NodeP) malloc(sizeof(NodeP));
    N = New;
    New->Left = NULL;
    New->Right = NULL;
    New->Name = Name;
    New->Number = Number;
    return New;
}
int removePhoneBook(PhoneBookP P, char * Name)
{
    return 0;
}
void displayPhoneBook(PhoneBookP P)
{
    traversePrint(P->Root);
}
static void traversePrint(NodeP N)
{
    if(N)
    {
        traversePrint(N->Left);
        printf("Name: %s\n", N->Name);
        printf("Number: %s\n", N->Number);
        traversePrint(N->Right);
    }
}
void freePhoneBook(PhoneBookP P)
{
    traverseFree(P->Root);
}
static void traverseFree(NodeP N)
{
    if(N)
    {
        traverseFree(N->Left);
        traverseFree(N->Right);
        free(N);
    }
} 
```

这是我没有制作删除功能的测试仪，所以不要使用它。

```
/*
 * PhoneBookTest.h
 * Cop 3411 Spr11
 * jlewis
 */

#include "PhoneBook.h"
#include <stdio.h>

int main()
{
    PhoneBookP myBook = newPhoneBook();
    printf("Book contains (Joe, Sue, Tom, Vince, Zachary)\n");
    insertPhoneBook(myBook, "Sue", "800-444-4444");
    insertPhoneBook(myBook, "Joe", "555-5555");
    insertPhoneBook(myBook, "Tom", "111-1111");
    insertPhoneBook(myBook, "Zachary", "1-888-888-8888");
    insertPhoneBook(myBook, "Vince", "333-3333");
    displayPhoneBook(myBook);
    printf("\nLooking for Sue ... ");
    lookupPhoneBook(myBook, "Sue");
    printf("Looking for Tom ... ");
    lookupPhoneBook(myBook, "Tom");
    printf("Looking for Zac ... ");
    lookupPhoneBook(myBook, "Zachary");
/*
    fprintf(stderr, "\nRemoving Joe\n");
    removePhoneBook(myBook, "Joe");
    displayPhoneBook(myBook);
*/
    printf("\nAdding 5 more ... Al, Jason, Thomas, Billy, Tommy\n");
    insertPhoneBook(myBook, "Al", "888-8888");
    insertPhoneBook(myBook, "Jason", "888-8888");
    insertPhoneBook(myBook, "Thomas", "888-8888");
    insertPhoneBook(myBook, "Billy", "888-8888");
    insertPhoneBook(myBook, "Tommy", "888-8888");
    displayPhoneBook(myBook);
   /*
    fprintf(stderr, "\nRemoving Thomas\n");
    //removePhoneBook(myBook, "Thomas");
    displayPhoneBook(myBook);
    fprintf(stderr, "\nRemoving Zachary\n");
    //removePhoneBook(myBook, "Zachary");
    displayPhoneBook(myBook);*/
    freePhoneBook(myBook);
    return 0;
} 
```

任何帮助深表感谢

这也是中部时间下午 4 点到期。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:02:13.730

一个主要的错误是，`sizeof(PhoneBookP)`当你应该传递`sizeof(struct PhoneBookT)`或传递给 malloc 时，你传递给了 malloc `sizeof(*P)`。

# interface - IPTables/Route 和多接口配置

> ID：11693925
> 
> 赞同：0
> 
> 时间：2012-07-27T18:49:54.170
> 
> 标签：interface, routes, iptables, gateway

我有这种情况，一个运行多个网卡的 Debian 盒子：

1.  **eth0** - 通过本地路由器的 Internet 连接（172.20.1.x，255.255.255.0）
2.  **ppp0** - 拨号到没有互联网的网络 (10.xxx , 255.255.255.255)
3.  **tun0** - 虚拟 OpenVPN Tun 接口 (172.50.1.x, 255.255.255.255)

我的目标是允许客户端通过 ppp0 连接到 VPN 并将他们的互联网流量转发到 eth0。

目前，客户端可以连接到 VPN，并且可以访问 eth0 172.20.1.1 上的路由器，但无法访问 google 或 Internet 上的其他任何地方。（不，这不是 DNS 问题。我尝试了 IP）

如何设置 iptables/route 以允许这样做？

我认为问题与路由有关，因为在 debian 机器上我也可以 ping 并访问路由器（172.20.1.1），但我无法访问互联网。

```
root@shv1:~# ping 172.20.1.1
PING 172.20.1.1 (172.20.1.1) 56(84) bytes of data.
64 bytes from 172.20.1.1: icmp_req=1 ttl=64 time=0.416 ms
64 bytes from 172.20.1.1: icmp_req=2 ttl=64 time=0.428 ms
^C
--- 172.20.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 0.416/0.422/0.428/0.006 ms
root@shv1:~# ping google.com
PING google.com (173.194.34.197) 56(84) bytes of data.
^C
--- google.com ping statistics ---
4 packets transmitted, 0 received, 100% packet loss, time 3003ms

root@shv1:~# ping 173.194.34.197
PING 173.194.34.197 (173.194.34.197) 56(84) bytes of data.
^C
--- 173.194.34.197 ping statistics ---
3 packets transmitted, 0 received, 100% packet loss, time 2004ms 
```

我还尝试使用以下方法将默认网关更改为路由器 IP (172.20.1.1)：

```
route add default gw 172.20.1.1 eth0 
```

现在我可以访问互联网，但客户端无法通过拨号连接 (ppp0) 连接或 ping 我的机器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:26:56.723

所以......我设法通过以下方式解决了这个问题：

```
route add default gw 172.20.1.1 eth0
route add -net 10.0.0.0 netmask 255.0.0.0 ppp0 
```

这会将我的默认网关设置在 eth0 和它的路由器上，并为 10.xxx 网络添加一条新路由。

这样我就可以访问互联网，并且仍然可以通过 ppp0 拨号访问。

# java - 具有动态数据的 Java JFreeChart

> ID：11693929
> 
> 赞同：1
> 
> 时间：2012-07-27T18:50:03.920
> 
> 标签：java, swing, jfreechart

我在使用 Java 的 JFreeChart 时遇到了一些问题。我正在从远程数据库中检索数据，以使它们显示在我的应用程序的面板中。

1.  问题：当我获取数据时，它不会直接显示在面板上。我必须最小化和最大化表单才能加载数据。

2.  我需要这些数据每分钟刷新一次。我在考虑一个`Timer`，但我真的不知道如何整合它。

以下是部分代码：

```
import java.io.BufferedReader;
import java.net.Socket;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.List;
import java.util.ArrayList;
import javax.swing.JPanel;

public class GetRequest implements Runnable{

    public BufferedReader _input = null;
    public Socket clientSocket = null;
    public DrawChart draw;
    public List<Double> values_1, values_2, values_3, values_4;
    public JPanel _panel;

    public GetRequest(Socket socket, JPanel panel){
        clientSocket = socket;
        draw = new DrawChart();
        _panel = panel;
        values_1 = new ArrayList<Double>();
        values_2 = new ArrayList<Double>();
        values_3 = new ArrayList<Double>();
    }

    @Override
    public void run(){
        while(true){

            try{
                _input = new BufferedReader(
                    new InputStreamReader(clientSocket.getInputStream ()));
                String line = _input.readLine ();

                String[] clineComat = line.split (",");
                for(int i = 0 ;i<clineComat.length;i++){

                    String[] clineSemiComa_ = clineComat[i].split (";");
                    System.out.println(">"+clineComat[i]);
                    values_1.add (Double.parseDouble (clineSemiComa_[0])+1);
                    values_2.add (Double.parseDouble (clineSemiComa_[1])+1);
                    values_3.add (Double.parseDouble (clineSemiComa_[2]));
                }

                EventQueue.invokeLater (new Runnable(){
                public void run(){
                    draw.displayPie (_panel, values_1, values_2, values_3);
                }
            });
            }
            catch(IOException e){e.printStackTrace ();}
        }
    }} 
```

这是 DrawChart.java 的代码

```
import  org.jfree.chart.ChartFactory;
import  org.jfree.chart.ChartPanel;
import  org.jfree.chart.JFreeChart;
import  org.jfree.data.general.DefaultPieDataset;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import org.jfree.chart.plot.PlotOrientation;
import java.awt.Dimension;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.data.category.CategoryDataset;
import java.util.List;
import java.lang.Float;
import java.util.Timer;
import java.util.TimerTask;

public class DrawChart {

    public void displayPie(JPanel jpanel, List<Double> values_1, List<Double> values_2, List<Double> values_3) {

        CategoryDataset data = createDataset(values_1, values_2, values_3);
        //create a chart...
        JFreeChart chart=ChartFactory.createBarChart ("", null, null, data, PlotOrientation.VERTICAL, true, true, false);
        chart = ChartFactory.createLineChart ("", null, null, data, PlotOrientation.VERTICAL, true, true, false);

        //create and display a frame...
        ChartPanel panel=new ChartPanel(chart);
        panel.setPreferredSize (new Dimension(700,300));
        jpanel.setLayout(new java.awt.BorderLayout());
        jpanel.add (panel, BorderLayout.CENTER);
        jpanel.setVisible(true);
        }

    public static CategoryDataset createDataset(List<Double> a, List<Double> b, List<Double> c) {

        String series1 = "Series1";
        String series2 = "Series2";
        String series3 = "Series3";

        final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

        if(a.size () != 0 && b.size () != 0 && c.size () != 0 ) {

            for(int i=0;i<a.size ();i++) {
                dataset.addValue(a.get (i), series1, i+1+"");
            }

            for(int i=0;i<b.size ();i++) {
                dataset.addValue(b.get (i), series2, i+1+"");
            }

            for(int i=0;i<c.size ();i++) {
                dataset.addValue(c.get (i), series3, i+1+"");
            }

        }

        return dataset;
    }
} 
```

我该如何解决这个问题？有没有人做过类似的？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:56:01.583

我可能忽略了一个 JFreeChart 问题，但是在 Swing 中绘图*必须*发生在[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上。相反，您的呼叫`displayPie()`来自`Runnable`. `GetRequest`常见的补救措施包括：

*   `EventQueue.invokeLater`,[在这里](https://stackoverflow.com/a/3245805/230513)说明。

*   `SwingWorker`,[在这里](https://stackoverflow.com/a/4637725/230513)说明。

*   `javax.swing.Timer`对于定期更新，请[在此处](https://stackoverflow.com/a/5048863/230513)和[此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)进行说明。

# android - 从另一个 Fragment 填充 Listview

> ID：11693930
> 
> 赞同：1
> 
> 时间：2012-07-27T18:50:04.967
> 
> 标签：android, listview, arraylist, android-fragments

我正在尝试制作一个选项卡式 android 应用程序。两个选项卡都是列表视图。第一个选项卡从 RSS Feed 获取帖子。第二个选项卡将它们按类别显示。

问题是我想从第一个选项卡的片段中填充第二个选项卡中的列表视图。

我的第一个片段的代码是：

```
public class PostsFragment extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.posts_fragment, container, false);
    return view;
}

...
...
...

// Populate the "posts_fragment.xml" with Posts 
public void populate_postview() {
    ListView lv1;

    lv1 = (ListView)getView().findViewById(R.id.postlist);
    lv1.setAdapter(new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1 , arrays.PsychoTitle));
    lv1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            ...             
        }
    });

// Populate the "categories_fragment.xml" with Categories
public void populate_catview() {
    ListView lv2;

    lv2 = (ListView)getView().findViewById(R.id.catList);
    lv2.setAdapter(new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1 , arrays.PsychoCategories));
} 
```

这里的问题是`catList`in`populate_catview()`是“categories_fragment.xml”的一部分，但使用`getView()`返回的是“posts_fragment.xml”的当前布局。

那么如何在第二个片段中填充项目列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:37:30.667

在此处查看我的答案[Call functions of Activities Belonging to a Fragment](https://stackoverflow.com/questions/11550929/call-functions-of-activities-belonging-to-a-fragment/11551076#11551076)它显示足以解释它。您不应该直接调用另一个片段的方法。片段应该是自包含的。创建一个到活动的接口，然后使用第二个片段中的数据调用一个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:41:02.243

假设两个片段具有相同的父活动，一种解决方案是将支持列表的数据保存在父活动中。然后，当用户点击任一选项卡时，相应的片段会检索数据并相应地填充列表。

# c# - WCF 配置 AddressFilter 不匹配

> ID：11693931
> 
> 赞同：8
> 
> 时间：2012-07-27T18:50:05.433
> 
> 标签：c#, wcf, c#-4.0, wcf-binding, wcf-configuration

我遇到了 WCF 配置问题。我有一个 WCF Web 服务，我希望能够使用 GET 参数通过 Web 浏览器访问它（最终在 PHP 中使用 simplexml_load_file()）。我的 Visual Studio 解决方案设置为一个 WCF 服务库项目，其中包含一个接口（定义服务的位置）、一个类（实现服务的位置和一个 app.config（默认情况下）。我还有一个WCF 服务项目，其中包含一个 .svc 文件（指向我的类）和一个 web.config。我的服务接口设计如下：

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using RTXEngineLib.externalLibrary;
namespace RTXEngineLib {
    [ServiceContract(Name = "RTXEngine", Namespace = "")]
    public interface IRTXEngine {
        [OperationContract(Name = "GetCountryList"), WebGet(UriTemplate = "/GetCountryList/", ResponseFormat = WebMessageFormat.Xml)]
        List<Country> GetCountryList();
        [OperationContract(Name = "GetRegions"), WebGet(UriTemplate = "/GetRegions/?countryID={countryID}", ResponseFormat = WebMessageFormat.Xml)]
        List<Region> GetRegions(int countryID);
        [OperationContract(Name = "GetExchangeAvailability"), WebGet(UriTemplate = "/GetExchangeAvailability/?countryID={countryID}&month={month}&year={year}&regionID={regionID}&resortID={resortID}", ResponseFormat = WebMessageFormat.Xml)]
        AvailabilityList GetExchangeAvailability(int countryID, String month, int year, String regionID = "?", String resortID = "");
        [OperationContract(Name = "GetResortsForDate"), WebGet(UriTemplate = "/GetResortsForDate/?month={month}&year={year}", ResponseFormat = WebMessageFormat.Xml)]
        List<AvailabilityList> GetResortsForDate(String month, int year);
        [OperationContract(Name = "GetRegionLists"), WebGet(UriTemplate = "/GetRegionLists/", ResponseFormat = WebMessageFormat.Xml)]
        List<RegionList> GetRegionLists();
        [OperationContract(Name = "GetRegionListCacheState"), WebGet(UriTemplate = "/GetRegionListCacheState/", ResponseFormat = WebMessageFormat.Xml)]
        Boolean GetRegionListCacheState();
    }
    [DataContract(Namespace = "")]
    public class LoginRequestResponse {
        [DataMember]
        public Boolean Success { get; set; }
        [DataMember]
        public AccountStanding AccountStanding { get; set; }
        [DataMember]
        public double FTXBalance { get; set; }
        [DataMember]
        public List<User> Users { get; set; }
        [DataMember]
        public List<ContractData> Contracts { get; set; }
    }
    [DataContract(Namespace = "")]
    public enum AccountType {
        [DataMember]
        NonAuthenticatedAccount,
        [DataMember]
        AC,
        [DataMember]
        PT,
        [DataMember]
        Wks
    }
    [DataContract(Namespace = "")]
    public enum AccountStanding {
        [DataMember]
        NotAuthenticated,
        [DataMember]
        Good,
        [DataMember]
        Mixed,
        [DataMember]
        Delinquent
    }
    [DataContract(Namespace = "")]
    public struct RegionList {
        [DataMember]
        public String CountryName { get; set; }
        [DataMember]
        public String CountryID { get; set; }
        [DataMember]
        public List<Region> Regions { get; set; }
    }
    [DataContract(Namespace = "")]
    public struct Country {
        [DataMember]
        public String CountryName { get; set; }
        [DataMember]
        public String ID { get; set; }
    }
    [DataContract(Namespace = "")]
    public struct Region {
        [DataMember]
        public String RegionName { get; set; }
        [DataMember]
        public String ID { get; set; }
    }
    [DataContract(Namespace = "")]
    public struct User {
        [DataMember]
        public String FirstName { get; set; }
        [DataMember]
        public String LastName { get; set; }
        [DataMember]
        public String Address { get; set; }
        [DataMember]
        public String City { get; set; }
        [DataMember]
        public String State { get; set; }
        [DataMember]
        public String Zip { get; set; }
        [DataMember]
        public String CountryOfResidence { get; set; }
        [DataMember]
        public String PhoneNumber { get; set; }
    }
    [DataContract(Namespace = "")]
    public struct ContractData {
        [DataMember]
        public String ContractID { get; set; }
        [DataMember]
        public AccountType AccountType { get; set; }
        [DataMember]
        public AccountStanding AccountStanding { get; set; }
        [DataMember]
        public String AvailablePoints { get; set; }
        [DataMember]
        public String UnavailablePoints { get; set; }
        [DataMember]
        public String Usage { get; set; }
    }
    [DataContract(Namespace = "")]
    public struct PointsData {
        [DataMember]
        public String ContractID { get; set; }
    }
    [DataContract(Namespace = "")]
    public class GlobalAppCache {
        [DataMember]
        public static DateTime RegionListsLastUpdate { get; set; }
        [DataMember]
        public static List<RegionList> CachedRegionLists { get; set; }
    }
} 
```

我的库的 App.config 如下所示：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=5555555555555555">
      <section name="RTXEngineLib.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    </sectionGroup>
  </configSections>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="RTXEngineLib.RTXEngineLib">
        <endpoint address="" binding="wsHttpBinding" contract="RTXEngineLib.IRTXEngineLib">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/RTXEngineLib/RTXEngineLib/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <applicationSettings>
    <RTXEngineLib.Properties.Settings>
      <setting name="RTXEngineLib_externalLibrary" serializeAs="String">
        <value>http://externalLibrary.com/websvcs/externalLibrary.asmx</value>
      </setting>
    </RTXEngineLib.Properties.Settings>
  </applicationSettings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

然后我的 Web.config 如下：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="Web" sendTimeout="00:03:00" maxBufferSize="131072"
          maxReceivedMessageSize="131072" />
      </webHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Basic" name="RTXEngineLib.RTXEngineLib">
        <endpoint address="http://devrtxengine.telemark/RTXService.svc"
          binding="webHttpBinding" bindingConfiguration="Web" name="Basic"
          contract="RTXEngineLib.IRTXEngine" listenUri="http://devrtxengine.myserver/RTXService.svc" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
        <behavior name="Basic">
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
        <behavior name="Web">
          <serviceMetadata httpGetEnabled="true" httpGetBinding="webHttpBinding"
            httpGetBindingConfiguration="" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

当我尝试使用运行我的服务`http://devrtxengine.myserver/RTXService.svc/GetCountryList`时，出现以下错误：

```
<Fault xmlns="http://schemas.microsoft.com/ws/2005/05/envelope/none">
<Code>
<Value>Sender</Value>
<Subcode>
<Value xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:DestinationUnreachable</Value>
</Subcode>
</Code>
<Reason>
<Text xml:lang="en-US">
The message with To 'http://devrtxengine.telemark/RTXService.svc/GetCountryList' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree.
</Text>
</Reason>
</Fault> 
```

我怀疑我的 App.config 和我的 Web.config 之间存在某种不匹配，但是每次我尝试更改 Web.config 中的某些内容时，我都会破坏我的服务，甚至超过它已经被破坏的程度。有更多 WCF 经验的人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:45:46.947

我注意到端点地址是 devrtxengine.telemark，但是您将 listenUri 作为 devrtxengine.myserver。不确定这是否是一个错字或是否会有所作为。此外，您可以尝试将 WebHttpBinding 添加到行为中 - 有关示例，请参阅[Resolving Configuration Error in WCF AddressFilter Mismatch](https://stackoverflow.com/questions/339421/resolving-configuration-error-in-wcf-addressfilter-mismatch)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T19:25:13.233

这是我遇到该错误时检查的内容：

```
* endpoint is missing in web.config, 
* doublecheck the UriTemplate path
* make sure to set an endpointBehavior inside behaviors, such as 
  < endpointBehaviors >
    < behavior name =" web" >
      < webHttp />
    </ behavior >
  </ endpointBehaviors >
* and set behaviorConfiguration="web" on endpoint your individual endpoint 
```

# python - 如何从 CSV 文件中提取数据列并将它们定义为 x 和 y 变量，然后使用 pylab 在 python 中绘制它们？

> ID：11693935
> 
> 赞同：0
> 
> 时间：2012-07-27T18:50:14.553
> 
> 标签：python, csv, matplotlib, plot

我有一个包含数据的 CSV 文件，例如

```
350, -0.042447984
349, -0.041671798
348, -0.04158416
347, -0.041811798
346, -0.041716855 
```

虽然我有更多的数据。我要做的是将第一列（350、349 等）定义为我的 x 值，将第二列（-0.042447984、-0.041671798 等）定义为我的 y 值。到目前为止，这是我的代码：

```
import pylab
x=[350, 349, 348, 347, 346]
y=[-0.042447984, -0.041671798, -0.04158416, -0.041811798, -0.041716855]
pylab.plot(x, y)
pylab.show() 
```

但是，我没有手动输入数字，而是尝试编写一个程序，该程序将从我的 CSV 文件中提取第 1 列作为 x 值，将第 2 列提取为 y 值。这可能比我尝试做的要简单得多。我是python的新手，所以请耐心等待！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:00:59.463

假设您的 csv 文件采用您描述的格式，我可能会使用`loadtxt`.

```
>>> d = numpy.loadtxt("plot1.csv", delimiter=",")
>>> d
array([[  3.50000000e+02,  -4.24479840e-02],
       [  3.49000000e+02,  -4.16717980e-02],
       [  3.48000000e+02,  -4.15841600e-02],
       [  3.47000000e+02,  -4.18117980e-02],
       [  3.46000000e+02,  -4.17168550e-02]]) 
```

并且有很多方法可以从中获取`x`和`y`获取：

```
>>> x,y = numpy.loadtxt("plot1.csv", delimiter=",", unpack=True)
>>> x
array([ 350.,  349.,  348.,  347.,  346.])
>>> y
array([-0.04244798, -0.0416718 , -0.04158416, -0.0418118 , -0.04171685]) 
```

或`x,y = d.T`或`d[:,0], d[:,1]`等

格式越复杂，`csv`直接使用模块就越好。尽管`loadtxt`有很多选择，但您通常需要比它提供的更精细的控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:55:19.240

这将使您开始：

```
import csv

with open('data.txt') as inf:
    x = []
    y = []
    for line in csv.reader(inf):
        tx, ty = line
        x.append(int(tx))
        y.append(float(ty)) 
```

列表`x`，`y`并将分别包含：

```
[350, 349, 348, 347, 346]
[-0.042447984, -0.041671798, -0.04158416, -0.041811798, -0.041716855] 
```

*备注*：

`with`当我们完成文件或遇到异常时，使用来打开文件将负责关闭它。[csv](http://docs.python.org/library/csv.html)模块将逐行读取输入数据，并根据逗号分隔符将每一行拆分为一个列表。第一项被转换为`int`，第二项被转换为`float`之前被附加到各自的列表。

文件`data.txt`包含您的示例数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T03:58:21.740

我知道这篇文章已经过时了；但是，对于需要快速绘制 csv 数据的人来说，以下脚本将提供一个很好的解决方案。

它展示了如何从 csv 文件中导入数据，以及如何使用 matplotlib 制作一个绘图，该绘图将制作一个 png 并绘制它。

使用没有标题的[休伦湖](https://vincentarelbundock.github.io/Rdatasets/csv/datasets/LakeHuron.csv)数据，你会得到一个很好的情节。

```
import csv
import matplotlib.pyplot as plt
from numpy import arange

#####################################
# instatiation of variables

filehandle = "lake_huron.csv"
x_data = []                         # makes a list
y_data = []                         # makes a list
png_filename = 'LakeData.png'

#####################################
# opening csv file and reading

my_file = open(filehandle, "rb")    # opens file for reading
data = csv.reader(my_file)          # saves file to variable "data"

#####################################
# saves csv data to x_data and y_data

for row in data:
    x_data.append(eval(row[1]))     # selects data from the ith row
    y_data.append(eval(row[2]))     # selects data from the ith row

#####################################
# closes csv file
my_file.close()                     # closes file

#####################################
# makes plot (show) and saves png

fig = plt.figure()                  # calls a variable for the png info

# defines plot's information (more options can be seen on matplotlib website)
plt.title("Level of Lake Huron from 1875 to 1972")      # plot name
plt.xlabel('Year')                                      # x axis label
plt.ylabel('Lake Level (in feet)')                      # y axis label
plt.xticks(arange(1875,1973,10))                        # x axis tick marks
plt.axis([1875,1973,573,584])                           # x and y ranges

# defines png size
fig.set_size_inches(10.5,5.5)                           # png size in inches

# plots the data from the csv above
plt.plot(x_data,y_data)

#saves png with specific resolution and shows plot
fig.savefig(png_filename ,dpi=600, bbox_inches='tight')     # saves png
plt.show()                                                  # shows plot

plt.close()                                                 # closes pylab 
```

# sql - 计算 On 和 Off 状态行之间的时间 SQL Server

> ID：11693939
> 
> 赞同：2
> 
> 时间：2012-07-27T18:50:28.787
> 
> 标签：sql, sql-server, tsql, time, gaps-and-islands

我正在使用 SQL Server 2008，如何计算开启和关闭状态之间的时间？我有下表（按顺序排列`timestamp`）：

```
ID | EQUIP_ID | TIMESTAMP           | STATUS (1 on/0 off)
1  |     1    | 21/05/2012 13:00:00 |   1
3  |     1    | 21/05/2012 13:04:00 |   1
4  |     1    | 21/05/2012 13:05:00 |   0
6  |     1    | 21/05/2012 13:09:00 |   1
7  |     1    | 21/05/2012 13:10:00 |   1
9  |     1    | 21/05/2012 13:12:00 |   1
10 |     1    | 21/05/2012 13:13:00 |   0
10 |     1    | 21/05/2012 13:14:00 |   1
10 |     1    | 21/05/2012 13:15:00 |   0 
```

我期待这样的结果：

```
EQUIP_ID |    START             |          END           | STATUS
    1    | 21/05/2012 13:00:00  |   21/05/2012 13:05:00  |   1       (WORKING)
    1    | 21/05/2012 13:05:00  |   21/05/2012 13:09:00  |   0       (STOPPED)
    1    | 21/05/2012 13:09:00  |   21/05/2012 13:13:00  |   1
    1    | 21/05/2012 13:13:00  |   21/05/2012 13:14:00  |   0
    1    | 21/05/2012 13:14:00  |   21/05/2012 13:15:00  |   1 
```

我已经尝试了一些间隙和岛屿的功能，但没有奏效，我不知道我错过了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:03:54.433

这种方法首先过滤掉重复的行和重复的行。在只剩下状态开关的情况下，可以通过基于 搜索下一行来检索“结束时间” `row_number`。

```
; with  numbered as
        (
        select  row_number() over (partition by equip_id order by timestamp) rn
        ,       *
        from    YourTable
        )
,       nodups as
        (
        select  row_number() over (partition by cur.equip_id order by cur.timestamp) rn
        ,       cur.equip_id
        ,       cur.timestamp
        ,       cur.status
        from    numbered cur
        left join    
                numbered prev
        on      cur.rn = prev.rn + 1
                and cur.status = prev.status
        where   prev.id is null
        )
select  cur.rn
,       cur.equip_id
,       cur.timestamp as StartTime
,       next.timestamp as EndTime
,       cur.status
from    nodups cur
left join    
        nodups next
on      next.rn = cur.rn + 1
        and next.equip_id = cur.equip_id 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/9fa75/12/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:47:11.433

这是我的看法。假设您的表名为“MyData”：

```
WITH operating AS
(
    SELECT
        d.EQUIP_ID
        , d.[TIMESTAMP]
        , d.[STATUS]
        , ROW_NUMBER() OVER (PARTITION BY EQUIP_ID ORDER BY [TIMESTAMP]) RowNum
        , ROW_NUMBER() OVER (PARTITION BY EQUIP_ID ORDER BY [TIMESTAMP]) -
            ROW_NUMBER() OVER (PARTITION BY EQUIP_ID, [STATUS] ORDER BY [TIMESTAMP]) AS [Group]
    FROM 
        MyData d
)
SELECT 
    state1.EQUIP_ID
    , MIN(state1.[TIMESTAMP]) [START]
    , MAX(state2.[TIMESTAMP]) [END]
    , state1.STATUS 
FROM 
    operating state1
LEFT JOIN
    operating state2 
    ON 
    state1.RowNum = state2.RowNum - 1
WHERE
    state2.[TIMESTAMP] IS NOT NULL
GROUP BY  
    state1.EQUIP_ID, state1.[STATUS], state1.[Group]
ORDER BY 
    MIN(state1.[TIMESTAMP]) 
```

它利用该`ROW_NUMBER()`函数来确定每个`EQUIP_ID`. 然后它只是查找状态何时开始（`MIN([TIMESTAMP])`），然后我将其与下一行中的结束时间（`MAX([TIMESTAMP])`）匹配（请参阅自加入`RowNum`）。`WHERE`消除没有结束时间的最后一行。我得到的结果是：

```
EQUIP_ID | START                   | END                     | STATUS 
---------+-------------------------+-------------------------+-------
       1 | 2012-05-21 13:00:00.000 | 2012-05-21 13:05:00.000 |      1
       1 | 2012-05-21 13:05:00.000 | 2012-05-21 13:09:00.000 |      0
       1 | 2012-05-21 13:09:00.000 | 2012-05-21 13:13:00.000 |      1
       1 | 2012-05-21 13:13:00.000 | 2012-05-21 13:14:00.000 |      0
       1 | 2012-05-21 13:14:00.000 | 2012-05-21 13:15:00.000 |      1 
```

# ember.js - 使用 Ember 的 action helper，bind-attr 是设置 CSS 样式的唯一方法吗？

> ID：11693947
> 
> 赞同：1
> 
> 时间：2012-07-27T18:51:05.090
> 
> 标签：ember.js

随着 Ember.Button 视图（带有最近的 Ember 主干版本）的弃用，有利于动作助手，有没有办法设置动作助手的父 HTML 元素的静态/不变 CSS 样式（该元素是否是按钮，链接等）没有那些静态CSS样式被绑定/覆盖？那是，

*   使用旧的 Ember.Button 和 #view，我们可以同时传入 class（用于静态 CSS 样式）和 classBinding（用于动态 CSS 样式），并且静态样式将不受动态样式的影响。
*   但是使用新的操作助手，classBinding 似乎不起作用。bind-attr 确实有效，但是在 bind-attr 之外为该元素指定的任何 CSS 类都将被 bind-attr class="foo" 规范覆盖。
*   因此，我发现使用动作助手在元素上保留静态 CSS 样式的唯一方法是指定一个字符串属性（在相关的 Ember 视图中），指定所需的 CSS 静态样式。例如 {{bind-attr class="App.TheView.isActive App.TheView.cssStyles}} 这是不优雅/泄漏的。

提前感谢您的任何建议/帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T07:59:53.803

您还可以在 中混合使用静态和动态样式`{{bind-attr}}`，如下所示：

```
{{bind-attr class=":staticStyle view.someProperty:dynamicStyle}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:25:05.513

你是如何使用动作助手的？您应该能够给 HTML 元素一个类。

```
<a {{action "testIt"}} class="test">testing</a> 
```

这是一个例子：http: [//jsfiddle.net/A9VZS/](http://jsfiddle.net/A9VZS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T13:18:59.290

您现在可以使用 inline `if`。 [在 1.13](http://emberjs.com/deprecations/v1.x/#toc_legacy-code-bind-attr-code)`bind-attr`中已弃用。

```
<div class={{if isUrgent 'is-urgent'}}> 
```

新文档在[这里](http://guides.emberjs.com/v1.13.0/templates/binding-element-class-names/#toc_conditional-values)。

# javascript - 关于 JavaScript object.constructor 属性的问题

> ID：11693950
> 
> 赞同：1
> 
> 时间：2012-07-27T18:51:15.630
> 
> 标签：javascript, constructor

1.  属性是否有可能为`anyObject.constructor`null 或未定义（尤其是当 ConstructorFunc.prototype 未修改/覆盖时）？
2.  `var date = new Date(); console.log(date.constructor);`// 记录“日期（）”。好的。
    `var data = new Array(1, 2, 3); console.log(data.constructor);`// 它记录类似 [ undefined ] 的内容。它是什么以及为什么不是 Array()。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:57:40.767

1.  是的，您可以手动覆盖`.constructor`构造函数`prototype`对象的属性。

2.  好像`constructor`属性变了。通常你可能会看到类似的东西，`function Array() { [native code] }`而不是`[ undefined ]`.

您可以做的一件事是验证...

```
console.log(typeof [].constructor); 
```

它应该给你`"function"`。如果它给了你`"object"`，那么它已经被改变了。

* * *

***不要相信控制台输出***

从评论看来，您正在 Firebug 中进行测试。

作为一般规则*，不要*过分信任控制台日志记录。控制台是环境的插件，必须*解释*它们被记录的内容。有时这种解释具有误导性。

如果您得到奇怪的结果，请执行其他测试...

```
console.log(Array);          // [ undefined ] ...huh???
console.log([].constructor); // [ undefined ] ...huh???

typeof [].constructor; // Firebug still gives "function"

[].constructor === Array; // Firebug returns true 
```

所以你可以看到，尽管 Firebug 对函数本身给出了一个奇怪的解释，但它并没有改变它仍然是预期的`Array`构造函数的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:08:04.950

1.  该`constructor`物业是`writable`。因此`anyObject.constructor`可以显式设置为`undefined`or `null`（这将创建一个新属性`anyObject`并且不会修改 的`constructor`属性`prototype`）。您还可以更改to or的`constructor`属性，以便它反映在函数的每个实例上。默认情况下它永远不会是or 。`prototype``null``undefined``null``undefined`

2.  `function Array() { [native code] }`它按预期向我显示。由于您没有得到相同的结果，因此可能`Array.prototype.constructor`已被某些第三方代码修改。你应该检查一下。

# iphone - IOS向导航栏添加右键不起作用

> ID：11693951
> 
> 赞同：2
> 
> 时间：2012-07-27T18:51:17.260
> 
> 标签：iphone, objective-c, ios

它适用于没有标签栏但不适用于标签栏的 ViewController。此外，这是故事板中的第一个视图控制器。

```
UIImage *bookmarkImage = [UIImage imageNamed:@"bookmark"];

//create the button and assign the image
UIButton *bookmarkButton = [UIButton buttonWithType:UIButtonTypeCustom];

 //set the frame of the button to the size of the image (see note below)
bookmarkButton.frame = CGRectMake(100, 0, bookmarkImage.size.width,      bookmarkImage.size.height);
        [bookmarkButton setImage:bookmarkImage forState:UIControlStateNormal];

bookmarkButton addTarget:self action:@selector(addFavorite:) forControlEvents:UIControlEventTouchUpInside];
bookmarkButton.imageView.contentMode=UIViewContentModeScaleAspectFit;

//create a UIBarButtonItem with the button as a custom view
UIBarButtonItem *customBarItem2 = [[UIBarButtonItem alloc] initWithCustomView:bookmarkButton];
self.navigationItem.rightBarButtonItem = customBarItem2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:36:49.343

我在理解您的问题时遇到了一些问题，但据我所知，您尝试添加按钮的任何课程似乎都没有保存在`UINavigationController`.

我不确定你如何实例化这个类（ClassX），但它应该类似于这样：

```
ClassX *temp = [[ClassX alloc] init....];

UINavigationController *control = [[UINavigationController alloc] initWithRootViewController:temp]; 
```

然后显示控件视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:49:00.430

第一印象，我认为问题是由 引起的`UIButton *bookmarkButton = [UIButton buttonWithType:UIButtonTypeCustom];`，但我不太确定。如果你愿意，你可以像这样修改。它确实有效。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UINavigationItem *navigationItem = [[[UINavigationItem alloc] initWithTitle:@"My NavigationBar"] autorelease];

    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(100, 0, 70, 30)];

    [button setImage:[UIImage imageNamed:@"bookmark.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonClicked)
     forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]
                                   initWithCustomView:button];

    navigationItem.rightBarButtonItem = buttonItem;
    [navigationBar pushNavigationItem:navigationItem animated:NO];
    [self.view addSubview:navigationBar];

    [buttonItem release];
    [button release];
} 
```

# php - 如何使用 cakephp 2.2.1 html helper 编写此代码？

> ID：11693956
> 
> 赞同：0
> 
> 时间：2012-07-27T18:51:30.903
> 
> 标签：php, cakephp

在为输出生成的链接编写回显时，我可能制造了一个怪物 :( 我不明白在使用 HtmlHelper 时如何连接所有这些参数。我读了两次关于它的文章，但没有明白。

我的代码是：

```
echo "<a href=\"/img/filmography/" . $movie['Film']['frameset'] . 
     "_frame_" . $i . ".jpg\"" . "rel=\"lightbox[" . $movie['Film']['id'] . 
     "]\"" . " title=\"\">" 

     . "<img src=\"/img/filmography/thumb/" . $movie['Film']['frameset'] . 
     "_frame_" . $i . ".jpg\"" . "alt=\"pic from " . $movie['Film']['title'] . 
     "\"" . "/></a>"; 
```

我想在 HTML 中实现的目标：

```
 <a href="/img/filmography/movie_frame_1.jpg" rel="lightbox[1]" title="">
        <img src="/img/filmography/thumb/movie_frame_1.jpg" 
             alt="pic from some movie"/>
   </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:11:29.240

我想，这对你有用..

```
$path = sprintf("/filmography/thumb/%s_frame_%s.jpg", $movie['Film']['frameset'], $i);
echo $this->Html->link($this->Html->image($path, array(    "alt" => "pic from " . $movie['Film']['title'])) , '/img/filmography/'. $movie['Film']['frameset'] . '_frame_' . $i . '.jpg',  array('escape' => false, 'rel' => 'lightbox[' . $movie['Film']['id'] . ']')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:06:30.910

用这个：-

```
$frame_thumbnail = "img/filmography/" . $movie['Film']['frameset'] ."_frame_" . $i . ".jpg";
$frame_full = "img/filmography/thumb/" . $movie['Film']['frameset'] . "_frame_" . $i . ".jpg";

$alt= "pic from " . $movie['Film']['title'];
$real = "lightbox[" . $movie['Film']['id'] ."]";

$thumb = $html->image($frame_thumbnail, array('alt'=>$alt));
$full = $html->image($frame_full, array('alt'=>$alt));

echo $this->Html->link($thumb,$full,array('escape' => false, 'rel' =>$real)); 
```

或阅读此 htmlHelper 和链接

[http://api.cakephp.org/class/html-helper#method-HtmlHelperlink](http://api.cakephp.org/class/html-helper#method-HtmlHelperlink)

[http://book.cakephp.org/view/1442/link](http://book.cakephp.org/view/1442/link)

# ruby-on-rails - Rails 的 REST 实现怎么能说是 REST 呢？

> ID：11693959
> 
> 赞同：3
> 
> 时间：2012-07-27T18:51:41.527
> 
> 标签：ruby-on-rails, rest

所以，我正在学习 Ruby on Rails。我了解了应用程序架构的 RESTful 方法的基础知识，但我还没有完全构建一个 RESTful 应用程序。

在传统的 Web 应用程序中，幂等请求（不改变任何状态）是通过 HTTP 的`GET`方法发出的，所有非幂等请求通常都是通过该`POST`方法发出的。为了让应用程序区分`POST`请求可能触发的不同操作，通常在`POST`请求中包含一个隐藏字段，例如`action=delete`或`action=add_to_foo_file`。这是一个相当简单的架构，并且在今天很常见，但是 REST 方法让我们远离它，并建议“让我们发布所有内容！” 设计被认为是有害的。

相反，RESTful 架构让我们通过唯一标识资源的 URI（名词）和 HTTP 请求方法（动词）来操作资源，而不是根据请求中的单独字段确定要采取的操作：

```
GET    => show the resource
PUT    => update the resource
POST   => create a new resource
DELETE => destroy the resource 
```

所以现在我们来到 Ruby on Rails。在 Rails 中，`PUT`并由`DELETE`JavaScript 实现，它将您的链接更改为带有隐藏字段的表单，称为`_method`. 浏览器通过 接收表单`POST`，然后 Rails 查找该字段并决定是否将请求路由到控制器的`PUT`或`DELETE`方法。

等等，什么？这听起来有点像——甚至完全像——传统 Web 应用程序的行为，它通过接收所有状态更改请求`POST`并检查特定字段以决定是否销毁或修改记录。

**那么，Rails 的方法怎么能说是 RESTful*的*呢，因为在底层，它只是对 REST 专门试图摆脱的“让我们发布一切”方法的重新实现？**

而且，**这种方法不会阻止我的 Rails 应用程序优雅地降级，因为在浏览器中关闭了 JS 的人？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T19:12:57.443

What makes a system RESTful or not isn't so much the verb it uses, but the fact the interactions are driven by the hypermedia (in this case, this includes code-on-demand JavaScript).

The GET/PUT/POST/DELETE mapping you're quoting works fine for CRUD operations, but isn't necessarily appropriate for everything (and isn't necessarily supported by all browsers). This is a reasonable rule of thumb to design a RESTful system, but it's neither sufficient nor necessary. (It's in the same category of ideas as what people insist on when they want "RESTful" URIs: there's no such thing.)

Part of this comes under influence of books like [RESTful Web Services](https://rads.stackoverflow.com/amzn/click/com/0596529260). It's a good book, but it came out at a time where WS-*/SOAP was predominant, and where everything was tunnelled through POST. A reaction to SOAP was to make people aware that there were other HTTP verbs they could use.

For REST, what really matters in particular is to respect the notions behind the URI concept, the semantics of each HTTP verb (no side-effects, idempotent requests, ..., where appropriate and if you're using HTTP) and the HATEOS principle. It's an architectural style, don't stress too much about what POST/PUT/DELETE the JavaScript does underneath.

You should certainly read these:

*   [*REST APIs must be hypertext-driven*](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)
*   [*It is okay to use POST*](http://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post)

**EDIT:** (Following comments)

> What I should have said was this: If most frameworks turn `DELETE` `http://server.tld/resource/1` into `POST` `http://server.tld/resource/1?_method=DELETE`, then what's the advantage of that approach over just using `POST` `http://server.tld/resource/1?my_method=delete` in the first place?

*   It makes the overall goal a little bit cleaner/clearer, in terms of API design. REST frameworks can ultimately only be as RESTful as one uses them, since REST is an architectural style, not a protocol or an implementation.
*   In addition, strictly speaking, the URI includes the query component, so `http://server.tld/resource/1` and `http://server.tld/resource/1?my_method=DELETE` could identify different resources in principle (although that wouldn't be a good design choice).
*   It's good for the framework to be able to expose `DELETE`/`PUT` as such directly, but have a fallback solution via `POST` for the clients that don't support it.

    The reason for this is that clients that do support `DELETE`/`PUT` will be able to make use of them, and make assumptions about their usage. It's not so much of a problem for the client to treat a request as non-idempotent even if it was idempotent in principle as the opposite. If the client thinks it can send at most 1 request (non-idempotent) when it could have sent N+1 of the requests, this doesn't cause major problems; if the client thinks it can send N+1 times the same request for something that shouldn't be idempotent, this can cause quite a lot of problems. Emulating `PUT` through `POST` is OK, you're just not making the most of `PUT`, emulating `POST` through `PUT` would be problematic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:58:37.970

Rails 当然支持正确的 HTTP 动词（很快甚至支持 PATCH）。唯一的问题是：浏览器不支持，因为它们只支持 GET 和 POST。`_method`为了规避这个限制，Rails 提供了额外的工具来使用您所描述的参数“覆盖”实际的 HTTP 动词。

使用 API 的主要且正确的方法是通过实际的 HTTP 动词来代替。有了一个有能力的客户，您可以并且被鼓励这样做。

至于您关于优雅降级的第二个问题，由您作为开发人员来确保您的应用程序在所有对您重要的情况下都能正常工作。如果您希望您的应用程序在没有 JavaScript 的情况下运行，您可以随时创建实际的 HTML 表单和提交按钮。如果您真的想要一个创建 PUT 的链接，生成的 Javascript 链接只是另一种方式。同样，Rails 认为这不是什么好东西，而是一种规避当前所有浏览器实现所施加的限制的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T19:01:02.270

PUT 和 DELETE 请求的问题在于 HTML 表单不支持它。大多数框架处理这个问题的方式是通过 POST 请求对它们进行隧道传输。

您仍然可以执行“curl -X DELETE [http://example.com/posts/1](http://example.com/posts/1) ”，这仍然有效。

虽然，对 Rails 和 Rest 有很多误解。看看[http://en.wikipedia.org/wiki/HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)和[http://nicksda.apotomo.de/2010/12/rails-misapprehensions-rest-is-more-than-get-post-put-和删除/](http://nicksda.apotomo.de/2010/12/rails-misapprehensions-rest-is-more-than-get-post-put-and-delete/)

# javascript - Javascript 自动释放资源（如 RAII）

> ID：11693963
> 
> 赞同：16
> 
> 时间：2012-07-27T18:52:00.333
> 
> 标签：javascript, raii

我的一般问题是我可以使用哪些技术来确保在 Javascript 中清理/释放资源？目前，我正在采用 C（无 goto）方法在我的函数中查找返回或异常的每个执行路径，并确保进行清理。

我的具体示例是这样的：在 Node.js 中，我在对象成员函数中使用互斥锁（通过文件锁）（我需要互斥，因为我运行 Node.js 应用程序的多个实例并且在不同实例交互时存在竞争条件文件系统）。

例如，在 C++ 中，我会执行以下操作：

```
void MyClass::dangerous(void) {
     MyLock lock(&this->mutex);
     ...
     // at the end of this function, lock will be destructed and release this->mutex.
} 
```

据我所知，JavaScript 不提供任何 RAII 功能。在 C 语言中，如果发生错误，我会使用`goto`s 来展开我的资源分配，这样我就只有一个函数的返回路径。

有哪些技术可以在 Javascript 中实现类似的效果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-01-07T19:23:40.270

正如其他人可能已经指出的那样，您需要使用 try/finally。来自 c++ 的创建包装函数来模拟生命周期范围可能会更舒服。尝试在 javascript 控制台中运行以下代码以获取其用法示例：

#### C++ 风格

```
class MockFileIO {
    constructor(path) {
        console.log("Opening file stream to path", path);
        this.path = path;
    }
    destructor() {
        console.log("Closing file stream to path", this.path);
    }
    write(str) {
        console.log("Writing to file: ", str);
    }
}

async function run_with(resource, func) {
    try {
        func(resource);
    } catch(e) {
        throw e;
    } finally {
        resource.destructor();
    }
}

async function main() {
    console.log("Starting program");
    const fpath = "somewhere.txt";
    await run_with(new MockFileIO(fpath), (f) => {
        f.write("hello");
        f.write("world");
    });
    console.log("returning from main");
}

main(); 
```

#### Golang 风格

从那以后，我找到了一个更适合我个人使用 javascript 的范例。它基于golang的`defer`声明。您只需将代码包装在“范围”IIFE 中，当该函数**因任何原因**离开时，延迟表达式将以相反的顺序执行，等待任何承诺。

用法：

```
scope(async (defer) => {
    const s = await openStream();
    defer(() => closeStream(s));

    const db = new DBConnection();
    defer(() => db.close());

    throw new Error("oh snap"); // could also be return

    // db.close() then closeStream(s)
}); 
```

范围可以返回值并且是异步的。下面是一个使用 defer 技术编写的相同函数的示例：

```
// without defer
async function getUser() {
    const conn = new DB();
    const user = await conn.getUser();
    conn.close();
    return user;
}
// this is bad! conn.getUser could throw an error. 
```

变成：

```
// with defer
async function getUser() {
    return await scope(async defer => {
        const conn = new DB();
        defer(() => conn.close());
        return await conn.getUser();
    });
}
// conn.close is always called, even after error. 
```

基本上就是这样。范围也可以嵌套。定义范围的代码非常小：

```
async function scope(fn) {

    const stack = [];
    const defer = (action) => {
        stack.push(action);
    };
    const errs = [];

    try {
        return await fn(defer);
    } catch(e) {
        errs.push(e);
    } finally {
        while (stack.length) {
            try {
                await (stack.pop())();
            } catch(e) {
                errs.push(e);
            }
        }
        for (const e of errs.slice(1)) {
            await error("error in deferred action: " + e);
        }
        if (errs.length) {
            throw errs[0]; // eslint-disable-line
        }
    }
} 
```

scope 立即执行回调并将所有延迟函数收集到堆栈中。当函数退出时（通过返回或错误），延迟堆栈被弹出，直到所有延迟都被评估。延迟函数本身发生的任何错误都会被收集到一个错误列表中，当“范围”退出时会抛出第一个错误。我已经在我为工作而编写的一个非常关键、容错率低的守护程序中使用了这种技术（实际上就是这段代码），它经受住了时间的考验。我希望这对遇到这种情况的人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-02T06:25:03.120

您可以使用闭包和`try ... finally`块来近似 RAII，如下所述：http: [//jeanlauliac.com/raii-in-javascript/](http://jeanlauliac.com/raii-in-javascript/)

例如，

```
function using(start, close, execute) {
    try {
        start.call(this);
        return execute.call(this);
    } finally {
        close.call(this);
    }
}

// specialize to some resource (inside a Context2D wrapper)
    usingScaledLineWidth(execute) {
        const tmp = this.context.lineWidth;
        const start = () => {
            this.context.lineWidth *= Math.abs(this.cf().a);
        };
        const close = () => {
            this.context.lineWidth = tmp;
        };
        return using.call(this, start, close, execute);
    }

// later RAII based usage
    stroke() {
        // have to manually do this because we're not scaling context
        if (this.context.strokeStyle !== "rgba(0, 0, 0, 0)") {
            this.usingScaledLineWidth(()=>{
                this.context.stroke();
            });
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T02:37:32.493

使用要在范围结束时调用的回调列表。需要时给他们打电话。

例如，此方法用于取消初始化附加到浏览器窗口的附加处理程序。包含反初始化代码的回调存储在一个列表中，该列表在窗口的卸载事件上处理。

不幸的是，由于异常安全要求，这种方法大多不适合范围管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-07T16:22:54.957

不幸的是，它没有语言声明（如析构函数和确定性破坏）。您必须为此使用`try { ... } finally { ... }`语句。

如果您想知道如何以类似于 C++ 的方式完成它，请在我尝试使用 raii 容器和 TypeScript 装饰器时查看[https://github.com/cardinalby/ts-raii-scope 。](https://github.com/cardinalby/ts-raii-scope)但我不确定它是否适合生产代码，因为其他开发人员可能会对这种方法感到困惑。

如果我们在谈论 TypeScript，我也认为它可以通过[TypeScript 转换来实现](https://dev.doctorevidence.com/how-to-write-a-typescript-transform-plugin-fc5308fdd943)

# c++ - 无法从资源加载位图

> ID：11693967
> 
> 赞同：0
> 
> 时间：2012-07-27T18:52:11.777
> 
> 标签：c++, windows, winapi, mfc

我无法从资源加载位图。我有一个想要维护的项目。图像是从文件中加载的，但我想从资源中加载它们。

因此，下面的代码正在运行：

```
WCHAR path[MAX_PATH] = TEXT("C:\\nananana...");
pBitmapClose = Bitmap::FromFile(path); 
```

但是，当我尝试从资源中使用时，它不起作用。我尝试了以下几个参数：

```
pBitmapClose = Bitmap::FromResource(g_hInstance, MAKEINTRESOURCE(IDB_BTN_CLOSE)); 
```

或者

```
pBitmapClose = Bitmap::FromResource((HINSTANCE) GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_BTN_CLOSE)); 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:19:11.080

你的资源是什么格式的？

GDI+ 只能从资源中加载位图 (.BMP) 图像。如果要从资源中加载 PNG 或 JPG 图像，则需要使用流将其组合在一起。请参阅[http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI](http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI)了解可以做到这一点的便捷类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T14:39:21.543

```
BOOL  CreateBitmap(LPCTSTR szFileName)
{
    if(::PathFileExists(szFileName))
        m_pBitmap = Bitmap::FromFile(T2CW(szFileName));
    else
    {
        m_pBitmap = Bitmap::FromResource( ModuleHelper::GetResourceInstance(), MAKEINTRESOURCE(IDB_NOFIND));
    }
    return !IsNull();
} 
```

// 代码将起作用

# android - 了解 dumpsys meminfo

> ID：11693968
> 
> 赞同：1
> 
> 时间：2012-07-27T18:52:12.697
> 
> 标签：android, memory, android-binder

我有两个问题。

1.  中`dumpsys meminfo`，有一个号码叫`Local Binders`。这是什么意思？它只是一种本机指针吗？在什么情况下这个数字会增加？我观察到当这个数字增加到大约 1000 时，应用程序甚至模拟器都会崩溃。

2.  在内存使用部分，有三列：`native`、`dalvik`、 和`total`、 和`total=native+dalvik`。那么为什么将 (`native`和`dalvik`) 两部分加在一起呢？堆不是`dalvik`指Java堆，它应该是Unix进程的数据部分的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T03:52:49.363

1.  我认为本地binder是一个binder服务，比如框架会创建一个ApplicationThread，它是一个binder服务，当进程从zygote分叉时。

每次进程创建一个 binder 服务时，数量都会增加。

更重要的是，binder 需要在内核空间中分配的 binder 缓冲区，而内核空间对系统来说是非常宝贵的，所以，过多的 binder 服务可能会造成一些麻烦。

2.  本机堆供 c/c++ 使用，当您调用 malloc 时，new 。dalvik heap 是供 java 使用的，它由 dalvik(GC ?) vm 管理，当你调用 new 来创建 java 对象时

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-13T03:59:21.840

`dumpsys`可以通过阅读其源代码来最好地理解其输出。

# html - 导航下拉定位

> ID：11693972
> 
> 赞同：0
> 
> 时间：2012-07-27T18:52:26.253
> 
> 标签：html, css, drop-down-menu

在我的网站导航上将鼠标悬停在“艺术区”和“物业管理”上时，我需要子菜单项的下拉位置相对于父项，当您将鼠标悬停在此 jsFiddle 中的“The Bulding”上时可以看到：[http： //jsfiddle.net/8Wce6/1/](http://jsfiddle.net/8Wce6/1/)

做这个的最好方式是什么？我需要为每个下拉菜单创建 ul id 吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:59:25.177

使父 li 的相对定位和浮动。然后孩子 ul 的绝对定位值为“left：0”

[JSFiddle 示例](http://jsfiddle.net/8Wce6/3/)

# javascript - HTML5 中的高级音频处理

> ID：11693974
> 
> 赞同：1
> 
> 时间：2012-07-27T18:52:38.893
> 
> 标签：javascript, html, audio

一位客户向我询问了一个网络应用程序的报价，我想用 HTML5 创建它，但在我的研究中，我无法找到是否可行的迹象。该应用程序需要能够：

在每个浏览器中工作

使用计算机的麦克风录制用户的音频

播放录制的音频

同时播放两个或多个音轨

对音频应用简单的效果，例如混响和弯音。

据我所知，这比 HTML5 的当前功能更先进。但也许我错过了一些东西。可能吗？或者你能建议一种方法吗？如果没有，我应该求助于使用 Java 小程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:04:36.943

有一种`getUserMedia`使用 HTML5 的方法，它允许使用计算机的麦克风进行录音。但是，目前只有 Opera 支持。
[http://caniuse.com/#feat=stream](http://caniuse.com/#feat=stream)

所有现代浏览器都支持音频播放。
[http://caniuse.com/#feat=audio](http://caniuse.com/#feat=audio)

Thw Web Audio API 将允许您要求的其他内容。它没有完整的浏览器支持。 [http://caniuse.com/#feat=audio-api](http://caniuse.com/#feat=audio-api)

# ruby-on-rails-3 - Heroku 的 rack-mini-profiler？

> ID：11693978
> 
> 赞同：4
> 
> 时间：2012-07-27T18:52:52.530
> 
> 标签：ruby-on-rails-3, heroku, rack-mini-profiler

[问题也在 miniprofiler 论坛上提出。](http://community.miniprofiler.com/permalinks/79/deploying-to-heroku)

[今天看到了一个关于 rack-mini-profiler gem 的很棒的 railscast](http://railscasts.com/episodes/368-miniprofiler?autoplay=true)，这正是我现在需要的来追踪一些性能问题。在开发中效果很好，但我真的需要它在满载数据的生产环境中使用。

我对 RACK 的经验不是很丰富，或者不仅仅是编写我的 rails 应用程序并让它运行起来。我今天在我们的 Rails 项目中安装了 miniprofiler，我需要对其进行一些性能修复，然后将其投入生产。我还按照此处的说明[http://samsaffron.com/archive/2012/07/12/miniprofiler-ruby-edition](http://samsaffron.com/archive/2012/07/12/miniprofiler-ruby-edition)关于放入前置过滤器，并且仅在用户位于适当的管理员组中时才打开分析。通过代码跟踪，它在开发中运行良好。

然而，在生产中，它没有打开。不知道是不是因为：

1.  我需要在其他地方翻转一点魔法来告诉它在生产中打开
2.  我需要在 Heroku 中做一些奇怪的事情来让它玩得很好，或者
3.  没有希望。

有人在heroku中使用过这个gem并有任何反馈吗？同时，我打算将开发系统指向生产，但这也增加了额外的延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:00:02.947

由于免费版插件的限制，我使用 Redis2Go 插件来存储数据，并为 Redis 连接稍微定制了一个 Gem。

回购协议可在此处获得... [https://github.com/mark-ellul/MiniProfiler](https://github.com/mark-ellul/MiniProfiler)

我用下面的代码添加了一个初始化程序......

```
uri = URI.parse(ENV["REDISTOGO_URL"])
Rack::MiniProfiler.config.storage_options = { :host => uri.host, :port => uri.port,    :password => uri.password }
Rack::MiniProfiler.config.storage = Rack::MiniProfiler::RedisStore
Rack::MiniProfiler.config.pre_authorize_cb =  lambda { |env|
    true
  } 
```

# jquery - 重用 jQuery 选择器而不是构建它两次？

> ID：11693980
> 
> 赞同：2
> 
> 时间：2012-07-27T18:53:01.017
> 
> 标签：jquery, jquery-selectors

刚开始使用 jQuery。我在这里得到了一些丑陋的代码来动态改变世界地图各个区域的背景。我为`mouseover`and构造了两次相同的选择器`mouseout`。（这就是它的`hover`作用：将两者结合起来......是吗？）有没有更清洁的方法来做到这一点？也就是说，只构建一次就可以同时使用吗？

```
$('.regionName').hover(  
  function() {
    var id = $(this).attr("id");
    id = (id.substring(0, 2));
    var region = "#" + id + "BG";
    $(region).css('background', 'url(images/world-map-' + id + '.png) no-repeat');
  },
  function() {
    var id = $(this).attr("id");
    id = (id.substring(0, 2));
    var region = "#" + id + "BG";
    $(region).css('background', 'none');
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:56:06.027

```
$('.regionName').on('mouseenter mouseleave', function(e) {
    var id = this.id.substring(0, 2);
    $("#" + id + "BG").css('background', e.type==='mouseenter'?'url(images/world-map-' + id + '.png) no-repeat':'none');
}); 
```

来自 jQuery[文档](http://api.jquery.com/hover/)：

> 调用 $(selector).hover(handlerIn, handlerOut) 是以下的简写：
> 
> $(选择器).mouseenter(handlerIn).mouseleave(handlerOut);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:06:42.503

与其编写紧凑的代码，我更喜欢可读性：

```
$('.regionName').hover(  
    function() {
        var id = $(this).attr("id");
        regionHelper(id);
});

//performs the toggle
function regionHelper(id){
     id = id.substring(0, 2);
     var region = "#" + id + "BG";
     var element = $('#' + id);
     if (element.css('background').length == 0){
        element.css('background', 'url(images/world-map-' + id + '.png) no-repeat');
     } else {
        element.css('background', '');
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:55:07.457

代替该`.css`方法，创建一个自定义类并使用`.toggleClass()`. 然后，您可以将两个函数合并为一个：

```
$('.regionName').hover(  
  function() {
    var id = $(this).attr("id");
    id = (id.substring(0, 2));
    var region = "#" + id + "BG";
    $(region).toggleClass('addbg-'+id); // add on mouseover, remove on mouseout
  }
); 
```

现在将所有相关的`.addbg-<whatever>`类添加到您的样式表中，您就可以开始了。

# objective-c - 顺序整数的列表或数组

> ID：11693985
> 
> 赞同：0
> 
> 时间：2012-07-27T18:53:39.483
> 
> 标签：objective-c

我是 Objective-C 的新手，虽然我对 Ruby 有很好的理解。

我想要一个从 1、2、3、... 一直到 x 的数字列表/数组（x 是我代码中其他地方定义的最大值）。

最好的方法是什么（x 可能是数百万的高数，因此手动输入每个整数是不可取的）。数字按正常顺序排列。

在 Ruby 中，我会这样写：

```
y = [1..x] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:14:06.193

Do you truly need an `NSArray`, or do you just need an object that represents this range? If it's the latter, you can use an `NSIndexSet`, as in

```
NSIndexSet *idxSet = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(1, x-1)]; 
```

If you do need an `NSArray` then Josh Caswell's links are probably your best bet.

# import - 在 Jython 中导入 jar API

> ID：11693993
> 
> 赞同：7
> 
> 时间：2012-07-27T18:54:16.510
> 
> 标签：import, jar, jython

我正在尝试导入作为 jar 文件分发的 Java API。我在 Stack Overflow 中的一个类似问题上按照[这个答案](https://stackoverflow.com/a/1734231/1072062)的说明进行操作，但它没有用。

在 Jython 中，我做了：

```
>>> import sys
>>> sys.path.append("/path/to/jar/api")
>>> from com.thingmagic import *
Traceback (most recent calls last):
  File "<stdin>", line 1, in <module>
ImportError: no module named thingmagic 
```

我错过了什么还是我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T22:08:28.763

您需要提供 JAR 文件的完整路径。改变

```
sys.path.append("/path/to/jar/api") 
```

至

```
sys.path.append("/path/to/jar/api/whatever_the_name_is.jar") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T13:42:53.880

问题是我在路径上只使用了一个反斜杠（我正在 Windows 上开发），而不是两个：

```
sys.path.append("C:\\remember\\to\\use\\two\\backaslashes\\jarName.jar") 
```

# c++ - 如何编写脚本文件来运行 MingW

> ID：11693995
> 
> 赞同：0
> 
> 时间：2012-07-27T18:54:25.823
> 
> 标签：c++, windows, path, mingw

我正在尝试从源代码编译一些程序并用于`MinGW`编译它们。

在文档中，它建议使用脚本文件来执行此操作，以避免将`MinGW`程序永久添加到`PATH`变量中。

我有两个问题：

1）实现这个脚本文件的最佳方法是什么？每次使用前只需编写一个`.bat`文件并更改详细信息（即源文件的位置等）？

2) 以编程方式获取和设置`PATH`变量的最佳方法是什么？有什么方法可以按照以下方式编写脚本：

```
oldPath = getCurrentPath()
newPath = oldPath + "; c:/MingGW/bin"
setCurrentPath(newPath)

make ...
make install...
...

setCurrentPath(oldPath) 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:31:07.460

简单`.bat`文件看起来像这里

```
SETLOCAL
set PATH=%PATH%;c:\mingw\bin
echo %PATH%
rem your commands here insrtead of echo 
```

由于`SETLOCAL`路径将在浴文件完成后恢复。如果您想要交互式会话，只需编写

```
set PATH=%PATH%;c:\mingw\bin 
```

在控制台窗口中。在您关闭控制台之前，您将`PATH`在当前控制台会话（不是全局）中进行更改。