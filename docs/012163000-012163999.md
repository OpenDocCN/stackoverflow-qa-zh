# StackOverflow 问答 12163000-12163999

# sql-server - 在 SSRS 中隐藏报告结构

> ID：12163001
> 
> 赞同：0
> 
> 时间：2012-08-28T15:50:55.470
> 
> 标签：sql-server, reporting-services

我正在使用 Visual Studio 2010 来设计 SSRS 报告。

报告已成功发布，并将有如下链接：

```
http://hostname/ReportServer/Pages/ReportViewer.aspx?%Reports%2fDistributed&rs:Command=Render&rp_db_catalog=ts 
```

现在，当用户转到链接时，

```
http://hostname/ReportServer 
```

它将向他们显示其余可用的报告，这是一个安全问题。

有没有办法向用户隐藏报告结构？

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:59:57.770

我不认为你可以“隐藏”它，你也不应该。您需要使用另一种方法来保护您的报告。这里有几个选项：

*   在您当前使用的 Web 前端中安全。您需要设置用户帐户和角色以及文件夹的权限。这是[MSDN 起点](http://msdn.microsoft.com/en-us/library/ms156014%28v=sql.105%29.aspx)，您可以从那里开始[保护文件夹](http://msdn.microsoft.com/en-us/library/ms155804%28v=sql.105%29)。
*   通过 Sharepoint 交付您的报告，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb326358%28v=sql.105%29.aspx)的这一点作为起点。
*   [将 ssrs 集成到您的应用程序中](http://msdn.microsoft.com/en-us/library/ms153697%28v=sql.105%29.aspx)，例如使用 SOAP webservices、asp.net 或 winforms 应用程序，或通过[URL 访问](http://msdn.microsoft.com/en-us/library/ms153563%28v=sql.105%29.aspx)（最后一个选项甚至可能非常接近您想要的）。

# c# - 如何让 axMozillaBrowser 控件等待它导航另一个网页

> ID：12163004
> 
> 赞同：0
> 
> 时间：2012-08-28T15:51:00.107
> 
> 标签：c#, .net, webbrowser-control, mozilla

我正在创建一个简单的网络浏览器重新加载程序。在我的程序中，我正在使用这些控件

```
axMozillaBrowser,
Button,
progressBar,
TextBox 
```

我正在尝试加载网页“5”次。下面是我使用 webBrowser 控件（Internet Explorer 的一个实例）时有效的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        while (progressBar1.Value !=5 )
        {
            webBrowser1.Navigate(textBox1.Text);
            while(webBrowser1.ReadyState != webBrowserRedyState.Complete)
            {
            if (webBrowser1.ReadyState == webBrowserRedyState.Complete)
            {
                    progressBar1.Value =+ 1;
            }
            }
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        progressBar1.Maximum = 5;
        textBox1.Text = "www.google.com";
    }
}
} 
```

这是我使用 axMozillaBrowser 控件（Mozilla 浏览器的一个实例）时不起作用的代码。这不会加载网页，它的等待光标只是闪烁。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        while (progressBar1.Value !=5 )
        {
            axMozillaBrowser1.Navigate(textBox1.Text);
            while(axMozillaBrowser1.ReadyState != MOZILLACONTROLLib.tagREADYSTATE.READYSTATE_COMPLETE)
            {
            if (axMozillaBrowser1.ReadyState == MOZILLACONTROLLib.tagREADYSTATE.READYSTATE_COMPLETE)
            {
                    progressBar1.Value =+ 1;
            }
            }
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        progressBar1.Maximum = 5;
        textBox1.Text = "www.google.com";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:19:06.930

您的浏览器控件是否有导航（或类似的）事件？例如，您可以在简单的逻辑循环中使用它，您的控件导航到集合中的第一个 URL，然后，当导航完成时，导航到第二个 URL 和下一个。

upd：对不起，我又读了一遍，现在看不懂。upd2：但我建议您找到 Navigated 和 Navigating 事件以及 NavigationState 属性。

# wxpython - wxPython 继承

> ID：12163011
> 
> 赞同：0
> 
> 时间：2012-08-28T15:51:20.057
> 
> 标签：wxpython

我确实在一本书中看到了这段代码，并引发了我关于继承的几个问题，

txt.py

```
class LoginPanel(wx.Panel):
    def __init__(self,parent)
        super(LoginPanel,self).__init__(parent)

        self._username = wx.TextCtrl(self)
        self._password = wx.TextCtrl(self,style=wx.TE_PASSWORD)

        sizer          = wx.FlexGridSizer(2,2,8,8)

        sizer.Add(wx.StaticText(self,label="Username:"),
                0,wx.ALIGN_CENTER_VERTICAL)
        sizer.Add(self._username,0,wx.EXPAND)
        sizer.Add(wx.StaticText(self,label="Password"),
                0,wx.ALIGN_CENTER_VERTICAL)
        sizer.Add(self._password,0,wx.EXPAND)

        msizer          = wx.BoxSizer(wx.VERTICAL)
        msizer.Add(sizer,1,wx.EXPAND|wx.ALL,20)
        btnszr          = wx.StdDialogButtonSizer()
        button          = wx.Button(self, wx.ID_OK)
        button.SetDefault()
        btnszr.AddButton(button)
        msizer.Add(btnszr,0,wx.ALIGN_CENTER|wx.ALL,12)
        btnszr.Realize()

        self.SetSizer(msizer) 
```

我们如何直接使用作为 Window 对象一部分的 SetSizer 方法？那是我们如何在没有任何参考的情况下使用父方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:16:00.867

Any time you inherit from a class, it gets the methods of that class. If you were to import wx.Panel and do this:

```
dir(wx.Panel) 
```

You'd get a whole bunch of methods and properties. If you did that same thing to your subclass, you'd get the same list plus whatever methods and properties you created in your subclass. And yes, you have to use "self.SomeMethod" to access the methods from the parent class AND for the ones you create yourself.

# android - 将 xml 布局与视图混合的正确方法

> ID：12163012
> 
> 赞同：0
> 
> 时间：2012-08-28T15:51:20.807
> 
> 标签：android, android-layout

Android新手问题在这里。我有一个我正在试验的应用程序，大部分屏幕都可以用基本的 XML 定义的对象很好地处理。我只想使用屏幕的一部分来绘制一些图形。

虽然我可以为 View 或 SurfaceView 分配适当的区域，但我找到的代码示例使用 setContentView() 并且图形部分呈现在整个屏幕上。我错过了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:00:27.327

创建自定义视图以重新生成图形，并将其与您想要在屏幕上的其他内容一起放在 xml 布局文件中的某个布局中。然后在 setContentView 中使用这个布局。

# xslt - 如何从其页面序列中检索 xsl-fo 标记？

> ID：12163016
> 
> 赞同：2
> 
> 时间：2012-08-28T15:51:28.637
> 
> 标签：xslt, xsl-fo

我正在使用 XSL-FO 标记生成运行磁头，但在检索书名时遇到了问题。我有一个解决方法，但我认为必须有一个更优雅的解决方案。由于书名仅在书的开头显示为文本，因此我的标记与我的静态内容不在同一个页面序列中。是否有检索页外序列标记的机制？

我正在为我的 PDF 生成使用 XSLT Formatter V 4.3，但我并没有与之结婚。

一个非常简化的 XML 示例：

```
<book>
<bktitle>Alice in Wonderland</bktitle>
<chapter>
<chaptitle>Chapter 1</chaptitle>
<para>This is the story of Alice in Wonderland.</para>
</chapter>
</book> 
```

XSL-FO 的片段：

```
<fo:page-sequence master-reference="fm">
  <fo:title>Alice in Wonderland</fo:title>
  <fo:flow flow-name="xsl-region-body">
     <fo:block font-variant="small-caps">
        <fo:marker marker-class-name="book">Alice in Wonderland</fo:marker>Alice in Wonderland</fo:block>
  </fo:flow>
</fo:page-sequence>

<fo:page-sequence master-reference="body">
  <fo:title>Chapter 1</fo:title>
  <fo:static-content flow-name="header">
     <fo:block><fo:retrieve-marker retrieve-class-name="book"/></fo:block>
  </fo:static-content>
  <fo:flow flow-name="xsl-region-body">
     <fo:block font-variant="small-caps">
        <fo:marker marker-class-name="chapter">Chapter 1</fo:marker>Chapter 1</fo:block>
     <fo:block>This is the story of Alice in Wonderland.</fo:block>
  </fo:flow>
</fo:page-sequence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:27:55.150

如果您使用它应该可以工作[`retrieve-boundary="document"`](http://www.w3.org/TR/xsl11/#retrieve-boundary)：

```
<fo:retrieve-marker retrieve-boundary="document" retrieve-class-name="book"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T17:28:54.837

由于您的静态内容确实是静态的——毕竟，书名不会在本书中途改变——使用相同的逻辑，将 的内容`bktitle`放入第一个`fo:page-sequence`，也将其放入`fo:static-content/fo:block`.

FO 格式化程序也将少一个要存储的标记和少一些要执行的标记查找，尽管您可能不会看到这对处理速度有明显的影响。

# jquery-ui - jQuery UI Autocomplete：对象的来源不是函数，如何使用外部 url？

> ID：12163018
> 
> 赞同：1
> 
> 时间：2012-08-28T15:51:37.927
> 
> 标签：jquery-ui, jquery-autocomplete

我试图让 jQuery UI 自动完成与 URL 一起工作（因为我正在处理数千条记录，这似乎是正确的解决方案），但我在 JavaScript 中遇到错误，我不知道为什么。

**错误信息**

```
Uncaught TypeError: Property 'source' of object #<Object> is not a function 
assets/js/plugins/jquery-ui-1.8.22.custom.min.js:45 
```

**HTML 表单域**

```
<input class='autocomplete-remote' name='client_id' data-remote-source='<?= base_url(); ?>/clients/json_list'/> 
```

**JavaScript**

```
$(".autocomplete-remote").autocomplete({                                                                                                        
    source : $(this).attr('data-remote-source')                                                                                                 
}); 
```

**客户端/json_list 输出**

```
[{ "label" : "John Doe", "value" : "1"}, {"label" : "Jane Doe" : "value" : "2"}] 
```

我对文档的理解是，如果 source 是一个字符串，它将被用作 URL 并从该源获取数据。但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:39:21.717

你的 javascript 是错误`$(this)`的，不是指`$(".autocomplete-remote")`. 它们在同一范围内，因为选项对象不在函数内。

它应该如下所示：

```
$(".autocomplete-remote").autocomplete({                                                                                                        
    source :  $(".autocomplete-remote").attr('data-remote-source')                                                                                                 
}); 
```

或者

```
var elem = $(".autocomplete-remote");
elem.autocomplete({                                                                                                        
    source :  elemn.attr('data-remote-source')                                                                                                 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:46:50.000

还有第3点[@jQuery：自动完成教程](http://www.giveupalready.com/content.php?187-jQuery-Autocomplete-Tutorial)

> 如果使用此方法，则数据源必须与请求页面位于同一域中。

# jquery - PrettyPhoto Ajax 内容未加载

> ID：12163023
> 
> 赞同：1
> 
> 时间：2012-08-28T15:52:06.180
> 
> 标签：jquery, ajax, prettyphoto

我有一个通过 Ajax 加载的页面，我想为我的 youtube 视频设置一个灯箱，但是每次我重新启动 prettyPhoto 插件时，它都会导致我的页面冻结和中断。

这是我的代码：

```
$(".vidlist a").live("click", function(evt) {
     var page4 = $(this).attr('href');
     $("#page1").load(page4, function() {
        $(this).hide().fadeIn("slow");
        $("a[rel^='prettyPhoto']").prettyPhoto({theme:'dark_square'});
     });
     evt.preventDefault();
  }); 
```

这是我的锚标签

```
<a id="1" href="http://www.youtube.com/watch?v=O0pCMVwwqOM" rel="prettyPhoto[ajax]" title="Body language quirks">
    Body language quirks</a> 
```

# java - 使用 Spring 3 进行动态作业调度

> ID：12163028
> 
> 赞同：5
> 
> 时间：2012-08-28T15:52:18.727
> 
> 标签：java, spring, jakarta-ee, spring-mvc, scheduled-tasks

我开发了一个网络爬虫，它使用起始 URL 作为种子参数进行爬网。如果可能，我希望允许用户根据作业安排此任务。

目前我正在使用`Spring 3.1.2`和`Hibernate`。我需要为用户提供一个接收 cronJob 参数的前端，并在此基础上运行爬虫。是否可以使用弹簧来做到这一点。

我读了一点，`Quartz`但是 SO 或其他网站上的文章根本不清楚，或者它们不完整，以便完全了解如何在 spring 中实现调度程序。

我知道它包含三个组成部分的基础知识

1.  调度器工厂
2.  扳机
3.  作业（要运行的服务）

我希望有人可以指导我正确的方向。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T15:59:16.257

Quartz 调度器正是这项工作的正确工具。出于某种原因，几乎所有教程都专注于在启动时用 XML 定义作业——而 Quartz 完全能够在运行时*（重新|取消）*调度作业。

您可以而且应该利用 Spring 的优势来启动 Quartz 调度程序，但是您可以直接从您的代码中与它进行交互。[这是文档](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example3)中的一个简单示例：

```
JobDetail job = newJob(SimpleJob.class)
    .withIdentity("job1", "group1")
    .build();

CronTrigger trigger = newTrigger()
    .withIdentity("trigger1", "group1")
    .withSchedule(cronSchedule("0/20 * * * * ?"))
    .build();

scheduler.scheduleJob(job, trigger); 
```

在这里，您定义一个*作业*（要运行的一段 Java 代码）、*触发器*（何时运行它，用户可以提供任何有效的 CRON 表达式）并通过调度它来包装它。*调度程序*实例可以由 Spring 注入。Spring 还将处理正确的关闭。

# wcf - 将对象发布到 WCF 方法

> ID：12163040
> 
> 赞同：2
> 
> 时间：2012-08-28T15:52:45.063
> 
> 标签：wcf, restsharp

我是 RestSharp 和 WCF 的新手，我正在尝试编写一个工作示例，该示例具有一个 post 方法，该方法将字符串和对象作为参数。我在这里查看了另一个帖子，有人问了同样的问题，但我仍然无法让它工作。有人可以指出我正确的方向。我调试了代码，我得到了一个`null`对象。这似乎很简单，但我不确定我错过了什么。这就是我到目前为止所拥有的。

服务器端：

```
[OperationContract]
        [Description("addUser")]
        [WebInvoke(Method = "POST", UriTemplate = "/addUser?id={id}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        TSCRUResponse addUser(string id, User usr);

 public TSCRUResponse addUser(string id, User usr)
        {
            TSCRUResponse r = new TSCRUResponse();
            r.status =  id + usr.name + usr.age + usr.gender;
            return r;
        } 
```

上述方法的第一个参数是通过 OK 而不是对象。

这些是对象：

```
[DataContract]
    public class TSCRUResponse
    {
        [DataMember(Name = "status")]
        public string status { get; set; }
    }

    [DataContract]
    public class User
    {
        [DataMember(Name = "name")]
        public string name { get; set; }
        [DataMember(Name = "age")]
        public string age { get; set; }
        [DataMember(Name = "gender")]
        public string gender { get; set; }
    } 
```

客户端 ：

```
public void postmethod(string uri)
        {
            ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateRemoteCertificate);

            RestClient client = new RestClient();
            client.BaseUrl = "http://localhost:1119/TestService.svc/";
            client.Authenticator = new HttpBasicAuthenticator("username", "password");

            RestRequest request = new RestRequest("addUser?id={id}", Method.POST);
            request.AddHeader("Accept", "application/json");
            request.JsonSerializer = new RestSharp.Serializers.JsonSerializer();
            request.RequestFormat = DataFormat.Json;
            request.AddParameter("id", "12839", ParameterType.UrlSegment);
            User itm = new User { age = "40", name = "user1", gender = "M" };
            request.AddBody(itm);

            var response = client.Execute<TSCRUResponse>(request);
            TSCRUResponse addres = response.Data;
            Console.WriteLine(addres.status);
        } 
```

# java - 处理“EJB 不存在”或“无法从 BACKUPSTORE FOR 键加载”

> ID：12163045
> 
> 赞同：2
> 
> 时间：2012-08-28T15:52:51.833
> 
> 标签：java, jsf, exception, jakarta-ee, ejb

所以问题很简单：

我们正在使用带有 Primefaces 和 EJB 的 JSF 2.0 来处理我们的应用程序，但遇到了一个问题。我们有一个`@SessionScoped`bean 来存储我们所有的 bean `@Stateful Session Beans`。

在一种情况下，（当我们没有处理来自 JPA 的一些异常时）并且有一个异常：

```
javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "webuser_idwebuser_pk"
  Detail: Key (idwebuser)=(6) already exists. 
```

它导致我们的一个`@Stateful Session Bean`. 因此，在刷新网站后，当 JSF 仍然正常工作时，在填写表单并尝试提交后，通过调用该 Bean 中的方法会出现异常：

```
javax.ejb.NoSuchObjectLocalException: The EJB does not exist. session-key: 22900a4d007e1f-6dcc714a-0 
```

最有问题的是，我们必须重新启动并重新部署应用程序以使其在同一台计算机（或 Web 浏览器）上工作，因为 JSF 的`@SessionScoped`Bean 以某种方式通过 cookie 或其他方式保存。

所以我猜的解决方案是强制销毁`@SessionScoped`该会话或以某种方式刷新会话，但实际上我不知道该怎么做。或者有什么更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T08:50:57.160

为了解决这个问题，您需要了解 EJB 中应用程序异常和系统异常之间的区别。

这些大致分别对应于检查异常和运行时异常。

应用程序异常应该由您自己的代码处理，并且不会导致事务回滚或破坏 bean。系统异常具有相反的效果，会导致回滚和 EJB bean 的破坏。

后一种效果就是您所看到的。JPA 抛出未经检查的异常，从而成为系统异常，从而导致您的 SFSB 被破坏。JSF 和 CDI 托管的 bean 都参与了这个“系统异常”的事情，所以它们只会传播异常并保持活动状态。

您可能想要的是定义一个新的异常，您使用 @ApplicationException 进行注释，然后将其回滚属性设置为 true。在您的 SFSB 中捕获 JPA 异常，并使用您的自定义异常包装并重新抛出它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-29T09:41:15.247

好的，所以我自己找到了答案。实际上我需要的是通过扩展 ActionListenerImpl 来处理 JSF 视图中的异常。

原文在这里： [原文](http://www.jroller.com/mert/entry/jsf_handling_exceptions_by_extending)

但是我所做的是通过使 HTTP 会话无效来扩展异常处理，这最终结束了`@SessionScoped`托管 Bean 的生命并导致重新注入 SSB。像这样：

```
private void gotoErrorPage(MethodExpression expression) {
        FacesContext context = FacesContext.getCurrentInstance();
        Application application = context.getApplication();

        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        if (session != null) {
            session.invalidate();
        }

        NavigationHandler navHandler = application.getNavigationHandler();
        navHandler.handleNavigation(context, null == expression ? null : expression.getExpressionString(), NAV_ERRORPAGE);
        context.renderResponse();
    } 
```

# android - 如何降低 ListActivity (Android) 中的高度？

> ID：12163046
> 
> 赞同：1
> 
> 时间：2012-08-28T15:52:52.300
> 
> 标签：android, listview, listactivity

目前我正在使用Android聊天屏幕应用程序，使用TabHost设置五个选项卡，然后我使用ListActivity在我的项目中创建ListView，但是ListView全屏显示，我想降低高度，因为在底部添加了一个EditText屏幕，请帮帮我。

提前致谢

我尝试了以下给出的供您参考：

```
public class Texts extends ListActivity
{
     String[] data={"How may i help you?", "Please help me", "Item 3","Item 1", "Item 2", "Item 3","Item 1", "Item 2", "Item 3"};

    Drawable[] usrimg=null;
    String bgimg = "",_user="",_pass="";
    int odd_resID,even_resID;

     public void onCreate(Bundle savedInstanceState)
     {
            super.onCreate(savedInstanceState);
            System.out.println(" CHAT SCREEN ");

          //finding the list view
            ListView myList = getListView();
            myList.setAdapter(new MyCustomAdapter());
            myList.setCacheColorHint(0);

//          setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, mListContent));
     }
     class MyCustomAdapter extends BaseAdapter
        {

            /**
             * returns the count of elements in the Array that is used to draw the text in rows 
             * @see android.widget.Adapter#getCount()
             */
            @Override
            public int getCount() 
            {
                return data.length; // data is nothing but the message length
            }

            /**
             * Get the data item associated with the specified position in the data set.
             * (not Implemented at this point)
             * @param position The position of the row that was clicked (0-n)
             * @see android.widget.Adapter#getItem(int)
             */
            @Override
            public String getItem(int position) 
            {
                // TODO Auto-generated method stub
                return null;
            }

            /**
             * Get the row id associated with the specified position in the list.
             * (not implemented at this point)
             * @param position The position of the row that was clicked (0-n)
             * @see android.widget.Adapter#getItemId(int)
             */
            @Override
            public long getItemId(int position) 
            {
                // TODO Auto-generated method stub
                return position;
            }

            /**
             * Returns the complete row that the System draws.
             * It is called every time the System needs to draw a new row;
             * You can control the appearance of each row inside this function.
             * @param position The position of the row that was clicked (0-n)
             * @param convertView The View object of the row that was last created. null if its the first row
             * @param parent The ViewGroup object of the parent view
             * @see android.widget.Adapter#getView(int, android.view.View, android.view.ViewGroup)
             */

            public View getView(int position, View convertView, ViewGroup parent) 
            {

                System.out.println("Enter here");

                LayoutInflater inflater = getLayoutInflater();//When you use a custom view in a ListView you must define the row layout.
                //You create an xml where you place android widgets and then in the adapter's code 
                View row;
                String even_color,odd_color;

//              SharedPreferences prefList = getSharedPreferences("PrefsFile",MODE_PRIVATE);
//              even_color = prefList.getString("even_bubble_color","pink");
//              odd_color = prefList.getString("odd_bubble_color","green");
//              
//              int even_color_id=getResources().getIdentifier(even_color,"drawable","com.teks.chilltwit"),
//                  odd_color_id=getResources().getIdentifier(odd_color,"drawable","com.teks.chilltwit");

                //ImageView even_view,odd_view;

                System.out.println("Timeline: Position: "+position+", Length: "+data.length);
//              if(position!=data.length-1){

                if(position%2==0)
                {
                    row = inflater.inflate(R.layout.list_row_layout_even, parent, false);
                    TextView textLabel = (TextView) row.findViewById(R.id.text);
                    textLabel.setText(data[position]);

                }
                else
                {
                    row = inflater.inflate(R.layout.list_row_layout_odd, parent, false);
                    TextView textLabel = (TextView) row.findViewById(R.id.text);
                    textLabel.setText(data[position]);
                }

                return (row);
            }
        } 
```

![在此处输入图像描述](../Images/96a4f43faa7b39f4bce87f912356cdc5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:04:56.653

尝试使用片段来划分你的屏幕并完成你想要的。

*   顶部片段包含 ListView 中的对话，就像您一样。

*   底部片段包含 EditText、“发送”按钮等。

这样，用户可以滚动到对话的任何部分*并*能够发送新消息而无需向下滚动。

![聊天片段](../Images/3269cae3e257a6dbe13bfc3c8ff07745.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T11:01:07.870

尝试使用分割屏幕

**使用 px,dp...等设置的权重**

# sql - 不带 WHERE 子句的 UPDATE 查询

> ID：12163047
> 
> 赞同：28
> 
> 时间：2012-08-28T15:52:54.113
> 
> 标签：sql, database, sql-update, where-clause

我知道这听起来是一个愚蠢的问题，但我想知道是否`UPDATE`可以在没有`WHERE`子句的情况下使用该查询。如果是这样，在什么条件下？

提前致谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-28T15:54:16.510

如果您不使用该`WHERE`子句，则表上的所有记录都会受到影响

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-08T14:16:40.887

因此，我认为当您出于某种原因想要更新整个字段时，例如将用户注册状态更新为对所有用户免费。

```
UPDATE users SET status = "free"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-06T06:39:22.577

SQL 中的`UPDATE`语句用于更新表中的记录。`UPDATE`我们可以使用语句修改表中的一条或多条记录（行） 。如果不使用`WHERE`语句中的子句，`UPDATE`则表中的所有记录都将被更新。

# c - 从 C 文件中读取、处理和输出数字

> ID：12163048
> 
> 赞同：0
> 
> 时间：2012-08-28T15:53:08.403
> 
> 标签：c, file, input

在我执行编写一些代码的任务之前，我希望有人可以确认以下是可能的（或至少相当简单）。

我想读取一个包含 9 列（由单个空格分隔）和多行数字的文件。第二列按数字排序，从大到小。我想丢弃第二列中包含低于指定数字的所有行，然后生成一个新文件并仅输出符合此规则的顶部行。

此外，我想添加第 10 列，它是其他 2 列之间的计算结果。

这是使用数组完成的吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:00:15.097

这在 awk 中是微不足道的。假设`$N`是一个 shell 变量，其中包含您想要的第二列的最小值，并且您想让第 10 列成为第 3 列和第 5 列的总和：

```
awk '$2 > '$N'{ $10 = $3 + $5 }1' input-file 
```

这将输出所有行。管道输出到 head 以减少输出的行数，或者在 awk 脚本中添加一个计数器。如果您编写 C 代码来执行此操作，那么您就是在浪费时间，除非这是帮助学习 C 的练习。

另一方面，它在 C 中非常简单。为简单起见，假设您只有 2 列：

```
int c[2];
do { 
  rc = scanf( "%d %d", c, c + 1 );
  if( c[1] > N && rc == 2 )
    printf( "%d %d %d", c[0], c[1], c[0] + c[1] );
} while( rc > 0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:01:04.863

最严格的方法可能是将文件中的每一列转换为一个数组，然后按照您从那里的描述对其进行操作。

请记住，该文件存储*字符*而不是*整数*，请确保根据您想要存储的内容分配数组。

您可能还会发现讨论将[字符转换为整数](https://stackoverflow.com/questions/439573/how-to-convert-a-single-char-into-an-int)的这个问题很有用。

# ember.js - 在 emberjs 中重新渲染视图

> ID：12163049
> 
> 赞同：1
> 
> 时间：2012-08-28T15:53:12.860
> 
> 标签：ember.js, handlebars.js

我在 View 中有一个带有来自 Controller 的绑定的数组对象。当我更改控制器中的数组时，视图中的数组会正确更改。但我的视图模板似乎已损坏：http: [//jsfiddle.net/secretlm/2C4c4/84/](http://jsfiddle.net/secretlm/2C4c4/84/)

当我尝试在视图中使用重新渲染方法时。我的模板没有损坏。这个小提琴效果很好：http: [//jsfiddle.net/secretlm/2C4c4/85/](http://jsfiddle.net/secretlm/2C4c4/85/)

HTML：

```
 <script type="text/x-handlebars" data-template-name="test">
        <button {{action "changeContent" target="App.latController"}}> Change</button>
    {{#each element in view.content}}
 <!-- if openTag is true, <ol> tag is created -->       
       {{#if element.openTag}}
          <ol>                                    
        {{/if}}
             <li>{{element.teo.item.Name}}</li>
 <!-- if closeTag is true, </ol> tag is created -->
        {{#if element.closeTag}}
          </ol>                   
        {{/if}}
    {{/each}}
   </script>​ 
```

Javascript：

```
App = Ember.Application.create({});

App.LatView = Ember.View.extend({
    templateName: "test",
    contentBinding: "App.latController.contentWithIndices",
    onRerender: function() {
        this.rerender();
        console.log(this.get('content'));
    }.observes('content')

});

App.latController = Ember.Object.create({
    changeContent: function() {
        this.set('model', []);
        var model = this.get('model');

        var obj1 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test1",
                "Name": "The name1"
            }
        };
        var obj2 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test2",
                "Name": "The name2"
            }
        }
        var obj3 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test3",
                "Name": "The name3"
            }
        }
        var obj4 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test4",
                "Name": "The name4"
            }
        }
        var obj5 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test5",
                "Name": "The name5"
            }
        }
        model.pushObject(obj1);
        model.pushObject(obj2);
        model.pushObject(obj3);
        model.pushObject(obj4);
        model.pushObject(obj5);

    },

    model: [
        {
           item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test1",
            "Name": "The name1"
          }
       }
        ,
    {
        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test2",
            "Name": "The name2"
        }
    }
        ,
    {
        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test3",
            "Name": "The name3"
        }
    },
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test4",
            "Name": "The name4"
        }
    },
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test5",
            "Name": "The name5"
        }
    } ],

            contentWithIndices: function() {
                var length = this.get('model').length;
                return this.get('model').map(function(i, idx) {
                    return {
                        teo: i,
                        openTag: (idx % 4 == 0),
                        closeTag: ((idx % 4 == 3) || (idx == length - 1))
                    };
                });
            }.property('model.@each')

        });

        var view = App.LatView.create({});
        view.append(); 
```

我们什么时候应该手动使用重新渲染方法？有没有办法在不重新渲染我的视图的情况下做到这一点？欢迎任何想法，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:10:18.240

我尝试使用另一种策略[http://jsfiddle.net/davidsevcik/FjB3E/重写您的示例](http://jsfiddle.net/davidsevcik/FjB3E/)

我没有计算索引，而是使用 Array.slice 函数创建四个项目的组。它还使代码更清晰。

```
<script type="text/x-handlebars" data-template-name="test">
<button {{action "changeContent" target="App.latController"}}> Change</button>
{{#each elementGroup in view.content}}
    <ol>    
        {{#each element in elementGroup}}                
             <li>{{element.item.Name}}</li>
        {{/each}}
    </ol>                   
{{/each}}
</script>​ 
```

Javascript：

```
App = Ember.Application.create({});

App.LatView = Ember.View.extend({
    templateName: "test",
    contentBinding: "App.latController.contentSlicedBy4"
});

App.latController = Ember.Object.create({
    changeContent: function() {
        this.set('model', []);
        var model = this.get('model');

        var obj1 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test1",
                "Name": "The name1"
            }
        };
        var obj2 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test2",
                "Name": "The name2"
            }
        }
        var obj3 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test3",
                "Name": "The name3"
            }
        }
        var obj4 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test4",
                "Name": "The name4"
            }
        }
        var obj5 = {
            item: {
                "DisplayOrder": 1,
                "Public": true,
                "Description": "The test5",
                "Name": "The name5"
            }
        }
        model.pushObject(obj1);
        model.pushObject(obj2);
        model.pushObject(obj3);
        model.pushObject(obj4);
        model.pushObject(obj5);

    },

    model: [
        {
        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test1",
            "Name": "The name1"
        }}
        ,
    {
        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test2",
            "Name": "The name2"
        }}
        ,
    {
        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test3",
            "Name": "The name3"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test4",
            "Name": "The name4"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test5",
            "Name": "The name5"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test6",
            "Name": "The name6"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test7",
            "Name": "The name7"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test8",
            "Name": "The name8"
        }},
    {

        item: {
            "DisplayOrder": 1,
            "Public": true,
            "Description": "The test9",
            "Name": "The name9"
        }}],

    contentSlicedBy4: function() {
        var result = [],
            begin = 0,
            model = this.get('model'),
            slice = model.slice(begin, begin + 4);

        while (!Em.empty(slice)) {
            result.push(slice);
            begin += 4;
            slice = model.slice(begin, begin + 4);
        }
        return result;
    }.property('model.@each', 'model')

});

var view = App.LatView.create({});
view.append();​ 
```

# git - Git .pack 文件太大

> ID：12163050
> 
> 赞同：3
> 
> 时间：2012-08-28T15:53:14.440
> 
> 标签：git, bitbucket

我正在尝试从 bitbucket 存储库中进行 git clone。这样做时会发生此错误：

> 致命：内存不足，失败（尝试分配1822535087字节）
> 
> 致命：索引包失败
> 
> 致命：写入错误无效参数

在 stackoverflow 上搜索问题（[Repack of Git repository failed](https://stackoverflow.com/questions/4826639/repack-of-git-repository-fails)）后，我在本地运行此命令，然后将更改推送到 bitbucket 存储库。

```
git repack -a -d --window-memory 10m --max-pack-size 20m 
```

但是，当我尝试在另一台机器上克隆 repo 时，我仍然收到“maloc，失败”错误。

另外，运行命令后：

```
git repack -a -d --window-memory 10m --max-pack-size 20m 
```

我试图验证这个包文件，这个太大的包文件，确实在我的本地版本的 repo 中被改变了。但它仍然存在，大约为 217.263113 mb。

有没有办法安全地删除这个大包文件？git repack 是用于解决此问题的错误工具吗？

# c# - 在 Unity C# 的 GUI.Box 中使用小数点

> ID：12163069
> 
> 赞同：0
> 
> 时间：2012-08-28T15:54:32.917
> 
> 标签：c#, user-interface, decimal, unity3d

我有一个关于统一 C# 的问题：

这段代码是如何工作的：

```
GUI.Box(new Rect((Screen.width/2)-200,0,400,30) , "King of the hill"); 
```

虽然这个没有

```
GUI.Box(new Rect((Screen.width/2)-200,0,400.5,30) , "King of the hill"); 
```

我得到的错误是这样的：

```
The best overloaded method match for `UnityEngine.Rect.Rect(float, float, float, float)'   
has some invalid arguments 
```

此错误是否暗示 GUI.Box 采用浮点值？为什么我不能使用十进制数。

提前致谢， Spagnum

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:56:54.370

它可能不知道 400.5 是什么。

尝试 ：

`GUI.Box(new Rect((Screen.width/2)-200,0,400.5f,30) , "King of the hill");`

# php - php中的时间计算

> ID：12163071
> 
> 赞同：1
> 
> 时间：2012-08-28T15:54:46.713
> 
> 标签：php

我需要在 php 中得到这两个值之间的区别

```
1 = ** 12:10:am **

2 = ** 10:11:pm ** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:01:49.963

试试这个：

**减去时间：（*小时加分钟）***

```
function subtractTime($initialHour, $finalHour){
  return (date("H:i", strtotime("00:00") + strtotime($finalHour) - strtotime($initialHour)));
} 
```

**减去时间：（*小时加上分钟和秒）***

```
function subtractTime($initialHour, $finalHour){
  return (date("H:i:s", strtotime("00:00:00") + strtotime($finalHour) - strtotime($initialHour)));
} 
```

**求和时间：**

```
function sumTime($initialHour, $finalHour) {
  $h = date('H', strtotime($finalHour));
  $m = date('i', strtotime($finalHour));
  $s = date('s', strtotime($finalHour));
  $tmp = $h." hour ".$m." min ".$s." second";
  $sumHour = $initialHour." + ".$tmp;
  $newTime = date('H:i:s', strtotime($sumHour));
  return $newTime;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:58:27.267

看看[DateTime::diff](http://php.net/manual/en/datetime.diff.php)或[strtotime](http://php.net/manual/de/function.strtotime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:58:52.823

继承人的东西可能会有所帮助

```
$future = strtotime('21 July 2013');
$timefromdb = //source time you have to define
$timeleft = $future-$timefromdb;
$daysleft = round((($timeleft/24)/60)/60); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:37:09.950

```
function timeToMinutes($time) {
$time = explode(':', $time);

return (($time[2]=='pm')?($time[0]+12):$time[0])*60+$time[1];
}

$diff = timeToMinutes('10:11:pm') - timeToMinutes('12:10:am');

echo $diff; //difference in minutes 
```

# c# - SignalR 在 MVC3 中触发事件客户端

> ID：12163077
> 
> 赞同：1
> 
> 时间：2012-08-28T15:55:07.903
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, signalr

我有一个发票进口商中心，如下所示：

```
public class ImporterHub : Hub, IDisconnect, IConnected
{

    public void InvoiceImported(InvoiceImportedMessage message)
    {
        Clients["importer"].InvoiceImported(message);
    }

    public void FileImported(FileImportedMessage message)
    {
        Clients["importer"].FileImported(message);
    }

    public System.Threading.Tasks.Task Disconnect()
    {
        return Clients["importer"].leave(Context.ConnectionId, DateTime.Now.ToString());
    }

    public System.Threading.Tasks.Task Connect()
    {
        return Clients["importer"].joined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public System.Threading.Tasks.Task Reconnect(IEnumerable<string> groups)
    {
        return Clients["importer"].rejoined(Context.ConnectionId, DateTime.Now.ToString());
    }
} 
```

在我的控制器中，我正在为长时间运行的导入过程捕获事件，如下所示：

```
 [HttpPost]
    public ActionResult Index(IndexModel model)
    {
        if (ModelState.IsValid)
        {
            try
            {
                model.NotificationRecipient = model.NotificationRecipient.Replace(';', ',');
                ImportConfiguration config = new ImportConfiguration()
                {
                    BatchId = model.BatchId,
                    ReportRecipients = model.NotificationRecipient.Split(',').Select(c => c.Trim())
                };
                var context = GlobalHost.ConnectionManager.GetHubContext<ImporterHub>();
                context.Groups.Add(this.Session.SessionID, "importer");
                System.Threading.ThreadPool.QueueUserWorkItem(foo => LaunchFileImporter(config));
                Log.InfoFormat("Queued the ImportProcessor to process invoices.  Send Notification: {0} Email Recipient: {1}",
                    model.SendNotification, model.NotificationRecipient);
                TempData["message"] = "The import processor job has been started.";
                //return RedirectToAction("Index", "Home");
            }
            catch (Exception ex)
            {
                Log.Error("Failed to properly queue the invoice import job.", ex);
                ModelState.AddModelError("", ex.Message);
            }
        }

    private void LaunchFileImporter(ImportConfiguration config)
    {
        using (var processor = new ImportProcessor())
        {
            processor.OnFileProcessed += new InvoiceFileProcessing(InvoiceFileProcessingHandler);
            processor.OnInvoiceProcessed += new InvoiceSubmitted(InvoiceSubmittedHandler);
            processor.Execute(config);
        }
    }

    private void InvoiceSubmittedHandler(object sender, InvoiceSubmittedEventArgs e)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<ImporterHub>();
        var message = new InvoiceImportedMessage()
        {
            FileName = e.FileName,
            TotalErrorsInFileProcessed = e.TotalErrors,
            TotalInvoicesInFileProcessed = e.TotalInvoices
        };
        context.Clients["importer"].InvoiceImported(message);
    }
    private void InvoiceCollectionSubmittedHandler(object sender, InvoiceCollectionSubmittedEventArgs e)
    {
    }
    private void InvoiceFileProcessingHandler(object sender, InvoiceFileProcessingEventArgs e)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<ImporterHub>();
        var message = new FileImportedMessage()
        {
            FileName = e.FileName
        };
        context.Clients["importer"].FileImported(message);
    } 
```

我认为导入器有以下脚本：

```
<script type="text/javascript">
    jQuery.connection.hub.logging = true;
    var importerHub = jQuery.connection.importerHub;

    importerHub.InvoiceImported = function (message) {
        jQuery('#' + message.FileName + '_Invoices').text(message.TotalInvoicesInFileProcessed);
        jQuery('#' + message.FileName + '_Errors').text(message.TotalErrorsInFileProcessed);
    };

    importerHub.FileImported = function (message) {
        jQuery('#' + message.FileName + '_Processed').text('Done');
    };

    jQuery.connection.hub.start();
</script> 
```

**我期望发生的事情：**

我期待服务器端事件触发，这将向客户端发送消息，而客户端又会触发事件以更新导入过程的状态。

**似乎发生了什么：**

所有服务器端事件触发，一切正常。signalR 库似乎已正确初始化，但事件从未触发，而且我从未让更新出现在屏幕上。

我究竟做错了什么？这是我第一次尝试使用 signalR 库，所以我完全有可能做错了一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:29:57.793

我*相信*你的问题是你的客户端集线器事件是用 init-caps 命名的，而 SignalR 的默认行为是在发布到客户端时将它们转换为 init-lower 以符合常见的 JavaScript 约定。尝试将您的中心事件注册更改为：

```
importerHub.invoiceImported = function (message) { 
```

和

```
importerHub.fileImported = function (message) { 
```

# visual-studio-2010 - VS2010 LNK1181 重建具有依赖关系的项目时

> ID：12163080
> 
> 赞同：4
> 
> 时间：2012-08-28T15:55:08.843
> 
> 标签：visual-studio-2010, visual-c++, build

我有两个 C++ (CLR) 项目的解决方案。一个项目引用另一个项目，因此项目依赖项和构建顺序正确反映了这一点。两个项目都针对相同的输出文件夹。依赖项目的依赖项配置为`Copy Local: false`.

如果我自己“重建”依赖项，它会构建得很好，并且它的目标位于输出目录中。

当我“重建”解决方案（或依赖项目）时，我得到：

```
error LNK1181: cannot open input file '<outdir>\Dependency.lib' 
```

果然，依赖输出从输出目录中消失了。如果我查看构建日志，依赖项似乎已经（重新）正确构建，但是一旦依赖项目构建开始，这些输出似乎就被删除了。为什么会这样？

此外，当我“清理”解决方案，然后立即“构建”解决方案时，我没有收到任何错误。

“重建”不应该有效地清洁+构建吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:03:45.920

Visual Studio 中的重建会一个一个地清理和构建项目，所以最终可能发生的是

*   项目 A 已清理。
*   项目 A 已编译。
*   项目 B 被清理，由于相同的输出目录，从项目 A 中删除部分输出。
*   由于缺少依赖项，项目 B 无法构建。

更多讨论[在这里](https://stackoverflow.com/questions/1247457/difference-between-rebuild-and-clean-build-in-visual-studio-2008)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:07:01.320

当您对其执行重建时，第二个项目正在从其输出目录中删除任何内容。清理不区分真正的项目输出文件和其他文件。Clean All 后跟 Build All 不会导致它，因为在项目构建之间没有清理输出文件夹。简而言之，Visual Studio 不支持多个项目输出到同一个文件夹。将它们输出到它们的默认位置，然后让 Visual Studio 按照预期/设计的方式复制依赖项。

# java - 如何滚动锁定 Jface 表格查看器？

> ID：12163085
> 
> 赞同：2
> 
> 时间：2012-08-28T15:55:36.137
> 
> 标签：java, jface, tableviewer, scroll-lock

我有一个更新非常快的表格查看器，我想滚动锁定我的表格查看器，就像在 Eclipse 控制台视图中一样。

我试图在 Eclipse 中插入 spy 控制台视图，但我没有找到我要找的东西

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:53:56.987

我找到了答案，感谢另一个论坛上的人。您只需要使用方法 refresh(object, true, false) 来做到这一点

# python - GHMM - 在 NULL 指针上尝试 m_free

> ID：12163086
> 
> 赞同：2
> 
> 时间：2012-08-28T15:55:38.547
> 
> 标签：python, c, malloc, hidden-markov-models

我正在尝试在带有 Python 2.7 的 mac osx 上使用 ghmm python 模块。我已经成功安装了所有东西，我可以在 python 环境中导入 ghmm，但是当我运行它时出现错误（来自 ghmm 'tutorial'）（UnfairCasino 可以在这里找到[http://ghmm.sourceforge.net /UnfairCasino.py](http://ghmm.sourceforge.net/UnfairCasino.py)）：

```
from ghmm import *
from UnfairCasino import test_seq
sigma = IntegerRange(1,7)
A = [[0.9, 0.1], [0.3, 0.7]]
efair = [1.0 / 6] * 6
eloaded = [3.0 / 13, 3.0 / 13, 2.0 / 13, 2.0 / 13, 2.0 / 13, 1.0 / 13]
B = [efair, eloaded]
pi = [0.5] * 2
m = HMMFromMatrices(sigma, DiscreteDistribution(sigma), A, B, pi)
v = m.viterbi(test_seq) 
```

具体来说，我收到此错误：

> GHMM ghmm.py:148 - sequence.c:ghmm_dseq_free(1199)：在 NULL 指针上尝试 m_free。糟糕的程序，糟糕！没有饼干给你。python(52313,0x7fff70940cc0) malloc: *** 对象 0x74706d6574744120 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以调试 Abort 陷阱

当我将 ghmm.py 记录器设置为“DEBUG”时，日志会在之前打印出以下内容：

> GHMM ghmm.py:2333 - HMM.viterbi() -- 开始
> 
> GHMM ghmm.py:849 - EmissionSequence.asSequenceSet() -- 开始 >
> 
> GHMM ghmm.py:862 - EmissionSequence.asSequenceSet() -- 结束 >
> 
> 回溯（最近一次通话最后）：
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 842 行，在发出
> 
> msg = self.format（记录）
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 719 行，格式为
> 
> 返回 fmt.format（记录）
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 464 行，格式
> 
> 记录.消息 = 记录.getMessage()
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 328 行，在 getMessage
> 
> 味精 = 味精 % self.args
> 
> TypeError：字符串格式化期间并非所有参数都转换了
> 
> 从文件 ghmm.py 第 1159 行记录
> 
> 回溯（最近一次通话最后）：
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 842 行，在发出
> 
> msg = self.format（记录）
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 719 行，格式为
> 
> 返回 fmt.format（记录）
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 464 行，格式
> 
> 记录.消息 = 记录.getMessage()
> 
> 文件“/Library/Frameworks/EPD64.framework/Versions/7.1/lib/python2.7/logging/init **.py** ”，第 328 行，在 getMessage
> 
> 味精 = 味精 % self.args
> 
> TypeError：字符串格式化期间并非所有参数都转换了
> 
> 从文件 ghmm.py 第 949 行记录
> 
> GHMM ghmm.py:2354 - HMM.viterbi() -- 结束
> 
> GHMM ghmm.py:1167 -**删除**序列子集 >

所以我怀疑这与 Viterbi 函数完成后删除序列的方式有关，但我不确定这是否意味着我需要修改 Python 代码、C 代码，或者我是否需要编译 ghmm 和包装不同。任何帮助/建议将不胜感激，因为我在过去 4 天一直试图让这个库正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T00:17:23.057

考虑到这个问题的年龄，您可能已经转向其他问题，但这似乎是我发现的唯一相关结果。问题在于，由于 python 函数 'EmissionSequence::asSequenceSet' 的执行方式有些怪异，正在发生双重释放。如果您查看 ghmm.py 的实现方式（~第 845 - 863 行）

```
def asSequenceSet(self):
    """
    @returns this EmissionSequence as a one element SequenceSet
    """
    log.debug("EmissionSequence.asSequenceSet() -- begin " + repr(self.cseq))
    seq = self.sequenceAllocationFunction(1)

    # checking for state labels in the source C sequence struct
    if self.emissionDomain.CDataType == "int" and self.cseq.state_labels is not None:
        log.debug("EmissionSequence.asSequenceSet() -- found labels !")
        seq.calloc_state_labels()
        self.cseq.copyStateLabel(0, seq, 0)

    seq.setLength(0, self.cseq.getLength(0))
    seq.setSequence(0, self.cseq.getSequence(0))
    seq.setWeight(0, self.cseq.getWeight(0))

    log.debug("EmissionSequence.asSequenceSet() -- end " + repr(seq))
    return SequenceSetSubset(self.emissionDomain, seq, self) 
```

这可能会引发一些危险信号，因为它似乎有点深入到 C 中（我不确定，我没有深入研究它）。

不管怎样，如果你稍微看一下这个函数，还有另一个函数叫做“sequenceSet”：

```
def sequenceSet(self):
    """
    @return a one-element SequenceSet with this sequence.
    """

    # in order to copy the sequence in 'self', we first create an empty SequenceSet and then
    # add 'self'
    seqSet = SequenceSet(self.emissionDomain, [])
    seqSet.cseq.add(self.cseq)
    return seqSet 
```

它似乎具有相同的目的，但实现方式不同。无论如何，如果你在 ghmm.py 中替换 'EmissionSequence::asSequenceSet' 的主体，只需：

```
def asSequenceSet(self):
"""
@returns this EmissionSequence as a one element SequenceSet
"""
    return self.sequenceSet(); 
```

然后重建/重新安装 ghmm 模块，代码将不会崩溃，你应该能够继续你的快乐方式。我不确定这是否可以作为修复提交，因为 ghmm 项目看起来有点死，但希望这足够简单，可以帮助任何使用这个库的人。

# nhibernate - NHibernate Mapping 使用存储过程时如何进行单元测试

> ID：12163089
> 
> 赞同：1
> 
> 时间：2012-08-28T15:55:49.050
> 
> 标签：nhibernate, nhibernate-mapping

我问过如何在 SQL Server 中使用视图时注入存储过程支持。

[使用数据库视图时如何在 NHibernate 中使用存储过程进行创建/更新](https://stackoverflow.com/questions/12138700/how-to-use-stored-procedures-in-nhibernate-for-create-update-when-working-with-d)

这是一个映射文件：

```
 <sql-insert>
        exec sp_cycle_insert ?,?,?
    </sql-insert>
    <sql-update>
        exec sp_cycle_update ?,?,?,?,?,?
    </sql-update>
    <sql-delete>
        raiserror ('Cycle can not be deleted', 10, 1)
    </sql-delete> 
```

所以，我已经完成了重构等，并且我运行了我的测试....都失败了。

原因是 SQL Server 具有视图和存储过程，而每次运行测试时，我都会从头开始设置数据库：

```
 new SchemaExport(configuration).Execute(false, true, false); 
```

我想到了可能的解决方案，这里有：有没有办法：

*   使用数据库所需的东西（如存储过程、视图等）运行其他脚本（我想这是解决方案）

另一方面，运行脚本可能会失败（目前我使用 sdf 文件，但如果我将来更改为不同的提供程序怎么办？）。此外，过程/视图使用**WITH**构造以及测试期间使用的数据库不支持的一些**SQL Server 2005 函数。**

*   . 所以我认为是时候模拟存储库了。但在这里我也看到了障碍：视图计算一些只读属性，NHibernate 使用以下方法访问支持字段：

> access="nosetter.camelcase"

如果我切换到模拟存储库，我将负责在代码中实现视图的逻辑。还有其他解决方案吗？还是我有大麻烦！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:55:39.547

> 使用数据库所需的东西（如存储过程、视图等）运行其他脚本（我想这是解决方案）

为此使用 IAuxiliaryDatabaseObject 对象。它将包含使用 SchemaExport 创建/删除架构时要运行的额外脚本。您传递给您的 NH 配置对象 (AddAuxiliaryDatabaseObject) 的这个/这些对象。

> 所以我认为是时候模拟存储库了。但在这里我也看到了障碍：视图计算一些只读属性和 NHibernate 访问支持字段使用

你应该两者都做。对你的真实数据库进行集成测试，以验证你的基础设施/DAL/无论你怎么称呼它层工作。在更高的层中，您可能想要编写单元测试，而不是模拟存储库之类的东西。如果我正确理解您的问题，您在设置测试状态时遇到问题，因为某些数据在您的实体上是私有的？这并不是由 NH/repos/data access 引起的真正“问题”，而是一个普遍问题。有不同的方法可以解决这个问题，你可以；放宽您的 API 以使其更具可测试性，让 ctor 接受所有数据，以一种或另一种方式使用反射，让您的实体的接口是只读的，但它的实现具有设置器等等等。很难给出一般性建议，但尝试找到一个适合您情况的方式。

# c# - 在 Visual Studio 2010 中的 Crystal Reports 中打印

> ID：12163093
> 
> 赞同：1
> 
> 时间：2012-08-28T15:55:57.687
> 
> 标签：c#, visual-studio-2010, crystal-reports-2010

我在 VS2010 中有一个用 C# 编写的项目。我正在尝试打印条形码，但遇到了问题。条码打印页位于水晶报表中。

```
The bar code field has the formula that equals *25664A-1$1%0/A* which is correct. 

It is in the font - SKANDATA C39\. 
When it prints, the rest of the report prints correctly but where the barcode should show, it instead shows- *25664A-1$1%0/A* . 
```

这是因为字体错误吗？我需要得到它来打印条形码而不是数字。条形码字段特别有问题，因为报告的其余部分可以正常工作/打印，并且公式提取了正确的数据。

任何帮助，将不胜感激？如果您需要更多信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:21:03.003

我下载了一个新的条形码字体 - C39hrp24dhtt0（来自[http://www.free-fonts.com/font/c39.html](http://www.free-fonts.com/font/c39.html)）

只需将我的旧字体更改为我的新字体（SKANDATA C39 到 C39hrp24dhtt0）（在格式编辑器 - 字体选项卡中），它现在可以打印条形码并完美扫描。必须更改字体大小以获得相同的外观，但之后它可以正常工作。

# android - Gmap jquery android

> ID：12163094
> 
> 赞同：2
> 
> 时间：2012-08-28T15:55:59.777
> 
> 标签：android, jquery, cordova, map

我正在使用 Phonegap + JQueryMobile + JQuery 在我的 index.html 中创建地图。有一个问题，在浏览器中我的代码可以正常工作，但是当我尝试在手机上运行时却不显示地图。

这是代码：

```
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script
    src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script src="datepicker.js"></script>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript"
    src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/min/jquery.ui.map.full.min.js"></script>
<script type="text/javascript">
    $(function() {
        $("#map").gmap();
    });
</script>
</head> <body><div id="map" style="height: 350px; width: 600px"></div></body></html> 
```

我认为错误出在脚本源上，因为我需要为手机导入正确的 gmap，但我不知道。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:01:06.017

您是否在 AndroidManifest.xml 中启用了 Internet 访问？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# c# - Hashtable 上的 foreach 在第一个键上停止

> ID：12163097
> 
> 赞同：1
> 
> 时间：2012-08-28T15:56:16.550
> 
> 标签：c#, foreach, hashtable, dispose, event-log

我有一个包含许多 EventLog 对象的 Hashtable。在我的 FormClosed 事件中，我需要遍历这些对象，以便处理这些对象，但是在第一个键上，焦点又回到了表单，并且方法永远不会完成（并且表单永远不会关闭）。为什么这样做/这种方法有什么问题？

```
private void Main_FormClosed(object sender, System.Windows.Forms.FormClosedEventArgs e)
    {
        // There will probably be lots of stuff that we'll need to dispose of when closing
        if (servers.Count > 0)
        {
            foreach (string key in servers)
            {
                try
                {
                    EventLog el = (EventLog)servers[key];
                    el.Dispose();
                }
                catch { }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:59:04.847

迭代`Hashtable`键值对的迭代器。如果您想迭代键，请按如下方式更改您的代码：

```
foreach (string key in servers.Keys) 
```

`Hashtable`仅当您为了向后兼容而必须这样做时才使用；在 .NET 2.0 及更高版本中，请`Dictionary<K,T>`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:00:21.777

您可以尝试使用此代码

```
 private void Main_FormClosed(object sender, System.Windows.Forms.FormClosedEventArgs e)
        {
            // There will probably be lots of stuff that we'll need to dispose of when closing
            if (servers.Count > 0)
            {
                foreach (string key in servers.Keys)
                {
                    try
                    {
                        EventLog el = (EventLog)servers[key];
                        el.Dispose();
                    }
                    catch(Exception ex) 
                    {
                        EventLog.WriteEntry(ex.Message); 
                        throw ex;
                    }
                }
            }
        } 
```

# carrot2 - 如何增加 Carrot2 的 Java 堆大小？

> ID：12163100
> 
> 赞同：2
> 
> 时间：2012-08-28T15:56:45.953
> 
> 标签：carrot2

如何增加 Carrot2 Document Clustering Workbench 的 Java 堆大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:02:34.583

通过命令行：

胡萝卜2-工作台-vmargs -Xmx256m

提示：如果需要，您可以使用上述模式指定任何其他 JVM 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:11:11.813

```
carrot2-workbench -vmargs -Xmx256m 
```

另一个提示：

您还可以向位于安装目录`JVM`中的文件添加路径和选项。请参阅所有可用选项的列表。`eclipse.ini``Carrot2 Document Clustering Workbench``Eclipse Wiki`

# java - Python 框架作为“Java + OSGi”组合的替代方案

> ID：12163104
> 
> 赞同：3
> 
> 时间：2012-08-28T15:57:01.843
> 
> 标签：java, c++, python, osgi, modularity

我正在考虑用 Python 和 C/C++ 组合来取代我们 SW 架构中关于 OSGi + Java + JNI + C/C++ 的原始概念。

我绝对不需要替换 Felix 或 Equinox 等 OSGi 框架的所有功能。

我在 Python 代码中真正需要的内容：

1.  应用层模块化的推动者
2.  应用程序的基于组件的框架
3.  服务/组件的中央注册表
4.  非常轻量级的框架，它将在嵌入式设备上运行（虽然内存足够大）

您能否就这样的 Python 框架提出建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T06:53:15.220

我认为 OSGi 提供的很多东西都与 Java 的体系结构密切相关：它的类加载器和类型安全。实现服务注册表应该不会太难，但是以 OSGi 的准确性管理它几乎是不可能的。显然，OSGi 提供的多命名空间的强大功能在 Python 中不起作用，除非您将模块移动到单独的进程中，这将需要更昂贵的进程间通信来进行模块间通信。你可以从 Apache Celix 开始，它是基于原生的，但我对它的实用性有类似的怀疑，因为原生代码没有提供很多关于它的依赖关系的信息。

更通用的解决方案是Universal OSGi 的原始想法。在此模型中，您将 OSGi 框架保持原样用于部署和管理。但是，您创建的处理程序包可以映射用其他语言编写的包。例如 Python 处理程序或 C++ 本机。处理程序会将本机服务注册表模型映射到 OSGi 服务注册表。由于 OSGi 服务注册表已正确事件，因此这非常容易做到。本机处理程序将映射捆绑事件（如启动/停止）以指示操作系统启动/停止本机代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:24:57.730

Peter 已经提到了 Apache Celix。可能值得一试。Celix 的一部分是远程服务管理 (RSA) 实现，使其可以在分布式环境中使用。最终，这个实现还将使得与基于 Java 的 OSGi 框架进行通信成为可能，从而使 Celix+RSA 成为 JNI 的替代方案。这具有额外的好处，即本机代码和 java 代码不共享相同的进程。如果一端遇到问题，另一端仍然保持运行。

与 Celix 一致，您还可以查看 Native-OSGi，这是 Celix 和一些 C++ OSGi 类框架（CTK 插件框架和 nOSGi）的努力，旨在为 Native OSGi 类实现提供一种组合方法。这包括定义良好的 API、包格式、代码共享等内容。

看看您的要求，我认为 Celix 和 Native-OSGi 可能很合适。

# jsf-2 - 使用静态变量保存登录状态 - JSF2

> ID：12163105
> 
> 赞同：0
> 
> 时间：2012-08-28T15:57:09.777
> 
> 标签：jsf-2

我想知道在 jsf2 环境中创建登录/注销机制的正确方法是什么。我创建了一个登录 xhtml 表单和一个存储静态布尔值 (is_authenticated) 的管理 bean。如果为真，我想检查每个 xhtml 页面中的变量？continue ，否则重定向到登录页面。

这是 Admin.java bean：

```
@ManagedBean
@SessionScoped
public class Admin implements Serializable {
/**
 * 
 */
private static final long serialVersionUID = 1L;
static Boolean authenticated;
String username;
String password;

@PostConstruct
public void initialisation() {      // init bean on new instance
    Admin.authenticated = false;
}

public Boolean getAuthenticated(){
    return Admin.authenticated;
}

public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

public String doLogout() {
    Admin.authenticated=false;  

    return "login?faces-redirect=true";
}

public String validity() {

    if(username.equals("admin") && password.equals("admin")) {
        Admin.authenticated=true;
        return "success";
    }   else   {
        Admin.authenticated=false;
        return "failure";
    }
}

} 
```

这是main.xhtml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="template.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"      
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:define name="content">

<c:if test="#{admin.authenticated == false}">
// update Admin.authenticate to false
<meta http-equiv="refresh" content="0;URL=login.xhtml" />
</c:if>

<h1>Statistics</h1>
<div style="margin:10px">
<h:panelGrid columns="3">
Advertisers:
<h:outputText value="#{stats.advertisers}"/> 
<h:outputText value=""/>
Publishers:
<h:outputText value="#{stats.publishers}"/> 
<h:outputText value=""/>
Campaigns:
<h:outputText value="#{stats.campaigns}"/>
<h:outputText value="(#{stats.activeCampaigns} active)"/>
Banners:
<h:outputText value="#{stats.banners}"/>
<h:outputText value="(#{stats.activeBanners} active)"/>
Games:
<h:outputText value="#{stats.games}"/>
<h:outputText value="(#{stats.activeGames} active)"/>
</h:panelGrid>
</div>
</ui:define>
</ui:composition> 
```

两个问题：

1.  在 jstl 'if' 中，我得到：“在类型 com.pkg.name.Admin 上找不到属性 'authenticated'”

2.  如何从 xhtml 文件中将 Admin.authenticate 更新为 false （对不起，蹩脚的问题，我对 jsf 和 web 开发人员来说真的很陌生）

3.  使用这个静态变量是个好习惯吗？（就像会话变量的一个实例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:28:15.780

根据我的说法，实现登录/注销的正确和更简洁的方法是创建一个过滤器并将其应用于应该保护的 url（例如 /admin/*）。

如果用户成功登录，则在会话 bean 中加载他的详细信息。当用户请求受保护的页面时，过滤器首先运行。在过滤器中从请求中获取会话并调用其 getAttribute 方法来获取会话 bean（jsf 将会话范围的 bean 存储为会话属性）。如果您获得 bean 对象，则他已登录，否则如果您获得 null，则他未获得授权，您可以将他重定向到登录页面。

对于注销，您只需在会话上调用**invalidate**，所有会话范围的属性都将被销毁。

一个工作示例如下所示：

将保存登录信息的 SessionScoped bean：

用户Bean.java

```
 @ManagedBean
    @SessionScoped
    class UserBean implements Serializable{
    private User user;
    //getter/setter for user

  } 
```

登录Bean.java

```
 @ManagedBean
    class LoginBean
    {
    @ManagedProperty(value="#{userBean}")
    private UserBean userBean;
    public UserBean getUserBean(){
    return userBean;
    }
    public void setUserBean(UserBean userBean){
    this.userBean=userBean;
    }
    private String username,password;
    //getter and setter for username,password
    public String checkLogin(){
   //check database for user
   if(user!=null){
   userBean.setUser(user);
   }
   //...
   }
   } 
```

LoginFilter.java - 我们将此过滤器应用于 url 模式：/admin/*

```
@WebFilter("/admin/*")
    class LoginFilter implements Filter{
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {    
       HttpSession session=((HttpServletRequest)request).getSession();
       userBean userBean=(userBean)session.getAttribute("userBean");
       if(userBean!=null){
       User user=userBean.getUser();
       if(user==null){
          ((HttpServletResponse)response).sendRedirect("login.jsf");
       }
       else
        chain.doFilter(request, response);
       }
       else
         ((HttpServletResponse)response).sendRedirect("login.jsf");
    }

    public void init(FilterConfig fc){}
    public void destroy(){}
} 
```

登录.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core">
    <h:head><title>Login To Admin Panel</title>
    </h:head>
    <h:body>
    <h:form>
    Username : <h:inputText value="#{loginBean.username}"/>
    Password : <h:inputSecret value="#{loginBean.password}"/>
    <h:commandButton value="Login" action="#{loginBean.checkLogin}" />
    </h:form>

    </h:body>
    </html> 
```

对于注销，您可以简单地调用 session.invalidate() 它将销毁会话以及任何会话范围的属性。

这样就不用写有条件的jstl标签来判断使用是否登录了。

希望这可以帮助。

# delphi - 在 Delphi 中通过 Windows API 使用 COM 端口号获取设备名称

> ID：12163106
> 
> 赞同：3
> 
> 时间：2012-08-28T15:57:10.580
> 
> 标签：delphi, winapi, serial-port, wmi, port

我需要一种方法来使用 WMI 来查找当前连接到我已经知道的 COM 端口的调制解调器（或其他设备）的名称。

例如，假设我已经提取了我想要的设备在 COM 端口 3 上，并且我也知道它是一个调制解调器，我怎样才能找到与该 COM 端口关联的调制解调器的名称。

目前我有使用**Win32_PnPEntity**的代码，它可以提取名称中带有调制解调器或 COM 的 pnp 设备列表，但不幸的是，当我返回 COM 设备时，它们不带有调制解调器名称，并且当我提取调制解调器设备时，它们不与 COM 关联端口（所以如果我连接了两个调制解调器，我不知道哪个在 COM 端口 3 中）。我还找到了一个**Win32_SerialPort**函数，但这不会返回通过串行端口连接到我的计算机的所有设备。

```
const   wbemFlagForwardOnly = $00000020;

var

    FSWbemLocator : OLEVariant;
    FWMIService   : OLEVariant;
    FWbemObjectSet: OLEVariant;
    FWbemObject   : OLEVariant;
    oEnum         : IEnumvariant;
    iValue        : LongWord;
    ts            : String;

begin;

    FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
    FWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\cimv2', '', '');

//This WMI service checks for plug and play devices
FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM Win32_PnPEntity','WQL',wbemFlagForwardOnly);

//This WMI service which I didn't use checks for serial ports and what is on them - currently not displaying sufficient information}
//FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM  Win32_SerialPort','WQL',wbemFlagForwardOnly);

oEnum := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;

while oEnum.Next(1, FWbemObject, iValue) = 0 do
    begin
        if not VarIsNull(FWbemObject.name) then
            begin
                ts:= String(FWbemObject.name);

                if pos('(COM',ts)<>0 then
                    pnpForm.listbox1.items.add(ts);
            end;

        FWbemObject:=Unassigned;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T01:59:56.707

> ...例如，假设我已经提取了我想要的设备在 COM 端口 3 上，并且我也知道它是一个调制解调器，我怎样才能找到与该 COM 端口关联的调制解调器的名称。

您可以使用 WMI 类的`AttachedTo`属性[`Win32_POTSModem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394360%28v=vs.85%29.aspx)来获取调制解调器所连接的端口。

试试这个样本

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

function  GetConnectedModem(const PortName : string):string;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin
  Result:='';
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet:= FWMIService.ExecQuery(Format('SELECT Name FROM Win32_POTSModem Where AttachedTo="%s"',[PortName]),'WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  if oEnum.Next(1, FWbemObject, iValue) = 0 then
  begin
    Result:=FWbemObject.Name;
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      Writeln(GetConnectedModem('COM1'));
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode])); 
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# c++ - 如何解码 UTF-8？

> ID：12163108
> 
> 赞同：1
> 
> 时间：2012-08-28T15:57:12.470
> 
> 标签：c++, utf-8, decode

我有一个 UTF-8 编码的字符串。这个字符串首先保存到一个文件中，然后通过 Apache 发送到一个用 C++ 编写的进程，该进程使用 Curl 接收它。

如何在 C++ 进程中解码字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:11:31.383

[CodeProject](http://www.codeproject.com/Articles/38242/Reading-UTF-8-with-C-streams)上有一篇非常好的文章，展示了如何阅读 utf8 。或者[http://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/) 也有操作（[C++ & Boost: encode/decode UTF-8](https://stackoverflow.com/questions/6140223/c-boost-encode-decode-utf-8)）。

# joomla - joomla phoca 画廊分页线性 css 修复问题

> ID：12163109
> 
> 赞同：0
> 
> 时间：2012-08-28T15:57:15.347
> 
> 标签：joomla, gallery

我希望“开始”、“下一步”等按钮应该是线性的。已经在 J​​oomla Phoca 画廊分页中崩溃了。看这张图片：

[http://srajib.info/phoca/phoca-3.png](http://srajib.info/phoca/phoca-3.png)

CSS

```
#phocagallery .pgcenter, #phocagallery-upload .pgcenter, #phocagallery-subcategory-creating .pgcenter {text-align: center; vertical-align: middle;} 
```

HTML

```
<div class="pgcenter">
<div class="pginline">
</div>
<div class="sectiontablefooter" style="margin: 0pt 10px; display: inline;">
....
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:57:28.623

如果你把它添加到你的 phocagallery.css 中，它会解决这个问题：

```
ul.pagination li {
    float: left;
    padding: 0px 10px 0px 10px;
    list-style:none
} 
```

顺便说一句，我知道这是你的网站，但只是为了让你知道，我真的不喜欢 EED 光标以及它后面的字母；）

# c# - 保存 FormView 的过滤结果时，DropDownList 值为空

> ID：12163111
> 
> 赞同：1
> 
> 时间：2012-08-28T15:57:19.013
> 
> 标签：c#, linq, linq-to-sql, formview, linqdatasource

我有一个用于查看、编辑和将项目插入 MSSQL 数据库的 FormView。FormView 连接到 LinqDataSource，我使用它的`Selecting`事件根据查询字符串中传递的参数（列）过滤 FormView 中显示的数据。

在 FormView 我有一个 DropDownList 显示来自相关表的值。一切正常，除非我尝试编辑 - 由于某种原因，当我尝试保存编辑时，DropDownList 的选定值始终为空（即使我选择了一个值）。插入工作正常。

我已将问题追溯到`Selecting`我进行过滤的事件。如果我注释掉执行过滤的方法，它会成功更新项目 - 但我无法弄清楚为什么过滤会破坏更新。

这是我的（缩短的）FormView：

```
<asp:FormView ID="fvData" runat="server" AllowPaging="True" 
    DataKeyNames="ID" DataSourceID="ldsData" 
    ondatabound="fvData_DataBound">
    <EditItemTemplate>
        <table class="pad5">
            <tr>
                <td class="field-name">AREA:</td>
                <td><asp:DropDownList ID="cboAREA" runat="server" DataTextField="AREA_NAME" DataValueField="AREA1" SelectedValue='<%# Bind("AREA") %>' DataSourceID="ldsAreas" /></td>
            </tr>
            <tr>
                <td class="field-name">LOOP:</td>
                <td><asp:TextBox ID="txtLOOP" runat="server" Text='<%# Bind("LOOP") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">LOOP DESCRIPTION:</td>
                <td><asp:TextBox ID="txtLOOP_DESCRIPTION" runat="server" 
            Text='<%# Bind("LOOP_DESCRIPTION") %>' style="width: 600px" /></td>
            </tr>
        </table>

        <asp:Button ID="btnUpdate" runat="server" Text="Update" CommandName="Update" CausesValidation="True" />
        <asp:Button ID="btnCancel" runat="server" Text="Cancel" CommandName="Cancel" CausesValidation="False" />
    </EditItemTemplate>
    <InsertItemTemplate>
        <table class="pad5">
            <tr>
                <td class="field-name">AREA:</td>
                <td>
                    <asp:DropDownList ID="cboAREA" runat="server" DataTextField="AREA_NAME" 
                        DataValueField="AREA1" SelectedValue='<%# Bind("AREA") %>' AppendDataBoundItems="true" DataSourceID="ldsAreas">
                            <asp:ListItem Text="" Value="" />
                        </asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td class="field-name">LOOP:</td>
                <td><asp:TextBox ID="txtLOOP" runat="server" Text='<%# Bind("LOOP") %>' /></td>
            </tr>
            <tr>
                <td class="field-name">LOOP DESCRIPTION:</td>
                <td><asp:TextBox ID="txtLOOP_DESCRIPTION" runat="server" 
            Text='<%# Bind("LOOP_DESCRIPTION") %>' style="width: 600px" /></td>
            </tr>
        </table>

        <asp:Button ID="btnInsert" runat="server" Text="Insert" CommandName="Insert" CausesValidation="True" />
        <asp:Button ID="btnCancel" runat="server" Text="Cancel" CommandName="Cancel" CausesValidation="False" />
    </InsertItemTemplate>
</asp:FormView> 
```

LinqDataSource：

```
<asp:LinqDataSource ID="ldsData" runat="server" 
    ContextTypeName="E_and_I.EAndIDataDataContext" EnableDelete="True" 
    EnableInsert="True" EnableUpdate="True" EntityTypeName="" 
    TableName="INSTRUMENT_LOOP_DESCRIPTIONs" onselecting="ldsData_Selecting" OrderBy="ID ASC" >
</asp:LinqDataSource> 
```

我的`ldsData_Selecting`方法：

```
protected void ldsData_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    EI.FilterData<INSTRUMENT_LOOP_DESCRIPTION>(ref e, db.INSTRUMENT_LOOP_DESCRIPTIONs, this.db);
} 
```

最后`EI.FilterData`：

```
public static void FilterData<T>(ref LinqDataSourceSelectEventArgs e, IEnumerable<T> source, EAndIDataDataContext db)
{
    if (HttpContext.Current.Request.QueryString.Keys.Count > 0)
    {
        var result = source.AsQueryable();
        bool filtered = false;

        // get column names
        var columnNames = db.Mapping.MappingSource.GetModel(typeof(EAndIDataDataContext)).GetMetaType(typeof(T)).DataMembers;

        foreach (string key in HttpContext.Current.Request.QueryString.Keys)
        {
            string val = HttpContext.Current.Request.QueryString[key];

            // check the query string key exists as a column in the table, etc
            if (columnNames.SingleOrDefault(c => c.Name == key) != null && val.Trim() != "" && val != "*")
            {
                result = result.WhereLike(key, val.Replace("?", "_").Replace("*", "%"));
                filtered = true;
            }
        }

        if (filtered)
            e.Result = result;
    }
} 
```

是否有任何理由过滤结果会破坏更新（并且只有 DropDownList 的 - 文本框工作正常）？过滤工作完美（即，FormView 仅显示用户输入的基于记录的参数）；如果您想知道`WhereLike`扩展方法的作用，可以查看[此问题的](https://stackoverflow.com/questions/11512539/using-wildcards-with-a-linqdatasource)答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:31:45.077

因为当您通过编辑发布数据时，您会重新绑定数据，因此您会删除选定的值。

解决方案：调整绑定

```
If( !  IsPostBack)
{
  //Here realize your bind of data

} 
```

为了持久化您的数据，请使用 ViewState

使用此解决方案当您发布时，您不会重新绑定数据，因此 ViewState 包含您选择的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:40:36.100

您的两个案例的下拉列表存在差异，我认为这可能是造成这种情况的原因。对于 Insert，您有 AppendDataBoundItems="true"，而对于其上方的 Update 表单，此标志未设置（默认为 false）。就提交表单而言，这意味着，对于插入表单，当它重新绑定时，它会将项目附加到当前列表而不是清除它们；但是对于更新表单，因为它没有设置为追加，它会清除项目然后绑定它们 - 所以绑定在两种情况下都会发生，但在更新表单的情况下，它会在发生这种情况时清除项目并且给你空白数据。

我不会仅仅拒绝 Postback 上的过滤，这会导致您的表单最终失败，而是会根据导致 Postback 的控件进行过滤。在函数的顶部，您可以捕获导致回发的控件 ID，然后您可以仅在它不是来自触发数据存储步骤的按钮的回发时进行过滤。如果这样做了，我相信您应该能够完全取消 AppendDataBoundItems 标志。

我的意思的代码片段更新：

```
string initControl = Request.Form["__EVENTTARGET"];
if (!IsPostBack || (initControl != "btnInsert" && initControl != "btnUpdate") {
    // code here
} 
```

这样做是扩展对 PostBack 的检查，以便如果不是回发（您之前测试过），则允许条件，但至关重要的是，如果表单被回发，它也将允许列表更新，只要回发控件不是根据这些绑定元素的内容触发事件的控件。这应该意味着您可以避免它仅适用于第一页加载的问题。

此外，如果您需要绑定控件，则可以在脚本中添加一个全局布尔变量；默认情况下将其设置为 False，如果不满足上述条件（即，如果您阻止绑定），则将其设置为 True。然后您可以在 Page_PreRender 函数中检查该布尔值，如果它设置为 true，您可以在该步骤执行控件的后期绑定（这只会在插入/更新事件已经处理后触发，因此任何绑定在该点将不再影响表单处理的结果）。

# c# - 棱镜区域视图按需显示，如何在活动视图中刷新控件

> ID：12163112
> 
> 赞同：1
> 
> 时间：2012-08-28T15:57:19.373
> 
> 标签：c#, wpf, mvvm, prism

我正在使用 WPF、MVVM 和 PRISM 区域编写应用程序。

我有两个区域，每个区域有一个视图（A 和 B）。我在我的 regionmodules 类中向我的区域添加视图，如下所示：

```
 // I use the following private properties in both regionmodules.cs class
    private readonly IUnityContainer _container;
    private readonly IRegionManager _regionManager; 
```

- 一种 -

```
 private void RegisterViews()
    {
        var controlsView = _container.Resolve<EmulatorControlsView>();
        _regionManager.Regions["ControlsRegion"].Add(controlsView, "A");
    } 
```

--B--

```
 private void RegisterViews()
    {

        var templatesView = _container.Resolve<TemplatesView>();
        _regionManager.Regions["TemplatesRegion"].Add(templatesView, "B");

        var view = _regionManager.Regions["TemplatesRegion"].GetView("B");
        _regionManager.Regions["TemplatesRegion"].Deactivate(view);
    } 
```

我在我的应用程序初始化期间停用了视图“B”，因为视图 ​​B 覆盖了我的 shell.xaml 中的视图 A。

来自视图 A 的单击命令将根据以下代码激活视图 B 并停用视图 A：

```
 private void LoadTemplateExecute()
    {
        var controlView = _regionManager.Regions["ControlsRegion"].GetView("A");
        _regionManager.Regions["ControlsRegion"].Deactivate(controlView);

        var templateView = _regionManager.Regions["TemplatesRegion"].GetView("B");
        _regionManager.Regions["TemplatesRegion"].Activate(templateView);
    } 
```

我的模板区域视图模型中存在其他按钮命令，用于停用视图 A 和激活视图 B。

这段代码效果很好，并且允许我按需显示我的视图。

问题：视图 B 有一个 ListView 通过依赖属性绑定到视图模型中的 ObservableCollection。我目前通过视图模型构造函数将字符串项添加到我的 ObservableCollection 中：

```
 private void InitializeTemporaryLists()
    {
        TemplateList.Add("Dog");
        TemplateList.Add("Cat");
        TemplateList.Add("Horse");
    } 
```

但是，当视图 B 被激活时，我的 ObservableCollection 不会显示其列表中的项目。

***问题***：区域视图或视图模型中是否有可用的事件在视图变为活动状态时通知我？
每次我的视图变为活动状态时，我将数据从视图模型填充到我的视图的最佳方式是什么？

非常感谢任何想法和代码示例！

*** 更新 *** 我的 ListView 没有更新，因为我是一个愚蠢的程序员。我没有在我的依赖属性中声明 ObservableCollection<> 类型。

但是，我仍然很想知道你们那里的聪明程序员如何处理棱镜区域视图激活？我希望我可以订阅如下事件：

```
_regionManager.Regions["YourRegion"].OnActiveView() += HandleActiveViewEvent; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:20:32.320

您可以实现该`IActiveAware`接口以在视图被激活和停用时接收通知。如果您在视图或视图模型（但不是两者）上实现它，则由框架调用。

如果您想从视图或视图模型外部获得激活通知，您还可以监视该区域的`ActiveViews`集合以进行更改。这支持`INotifyCollectionChanged`接口。

# php - Cookie 不会设置

> ID：12163113
> 
> 赞同：0
> 
> 时间：2012-08-28T15:57:22.753
> 
> 标签：php, cookies

> **可能重复：**
> [PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/header-already-sent-error-in-php)

我有我的代码，以便用户指定他们的 IGN（游戏名称），然后将其存储在 cookie 中。但它不会起作用。

```
<form action="index.php" method="GET">
    Minecraft IGN:
    <input type="text" name="ign">
    <input type="submit" value="Submit">
</form>

<?PHP
error_reporting(0);
$player = $_GET["ign"];
$exp = time()+86400;
setcookie("ign", $player, $exp, "/", "", "");

if (isset($player)) {
    echo "Your Minecraft Ingame Name Was Set To $player!";
}
?>

<br>

<?PHP
if (isset($player)) {
    echo '<p>Click <a href="http://gophobia.com/phpsend/">Here</a> To Redeem Ur Prizes    :3</p>';
}
echo '<br />';
print_r($_COOKIE);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:03:57.527

这是一个非常常见的错误，但很容易修复。

这直接来自手册，但说得比我以往任何时候都好：

> setcookie() 定义了一个 cookie 与其余的 HTTP 标头一起发送。与其他标头一样，必须在脚本的任何输出之前发送 cookie（这是协议限制）。这要求您在任何输出之前调用此函数，包括`<html>`和`<head>`标记以及任何空格。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

关键是它必须在任何输出之前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:10:38.987

您的代码可能运行良好。该脚本在页面加载时设置 cookie。但是您必须再次分页加载以检索值，因为设置 cookie 和检索其值都不能在单个实例中工作。

# java - 如何在具有灵活宽度的同时沿 y 轴将组件动态添加到 JPanel？

> ID：12163114
> 
> 赞同：2
> 
> 时间：2012-08-28T15:57:27.157
> 
> 标签：java, swing

在下面的代码中，我希望调整 NotesPanel 内的面板的大小，因为调整了保存 NotesPanel 的 JFrame 的大小。

可运行的 CSSE：

```
package com.protocase.notes.views;

import com.protocase.notes.controller.NotesController;
import com.protocase.notes.model.Note;
import com.protocase.notes.model.User;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.util.Date;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.border.BevelBorder;

/**
 * @author dah01
 */
public class NotesPanel extends JPanel{
    public static void main(String[] args) {
        JFrame f= new JFrame();     
        f.setSize(500,500);
        Note note = new Note();
        User u = new User();
        note.setCreator(u);
        note.setLastEdited(u);
        note.setDateCreated(new Date());
        JPanel panel = new JPanel();
        panel.add(new NotesPanel(note, null));
        panel.add(new NotesPanel(note, null));
        panel.setBackground(Color.red);
        f.setContentPane(panel);
        f.setVisible(true);
    }
    // <editor-fold defaultstate="collapsed" desc="Attributes">
    private Note note;
    private NotesController controller;
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Getters N' Setters">
    public NotesController getController() {
        return controller;
    }

    public void setController(NotesController controller) {
        this.controller = controller;
    }

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Constructor">
    /**
     * Sets up a note panel that shows everything about the note.
     * @param note 
     */
    public NotesPanel(Note note, NotesController controller){
        // -- Setup the layout manager.
        this.setBackground(new Color(199, 187, 192));
        this.setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
        this.setBorder(new BevelBorder(BevelBorder.RAISED));

        // -- Setup the creator section.
        JLabel creatorLabel = new JLabel("Note by "+note.getCreator()+ " @ "+note.getDateCreated());
        creatorLabel.setAlignmentX(JLabel.LEFT_ALIGNMENT);

        // -- Setup the notes area.
        JTextArea notesContentsArea = new JTextArea(note.getContents());
        notesContentsArea.setEditable(false);
        notesContentsArea.setLineWrap(true);
        notesContentsArea.setWrapStyleWord(true);

        JScrollPane scrollPane = new JScrollPane(notesContentsArea);
        scrollPane.setAlignmentX(JScrollPane.LEFT_ALIGNMENT);

        // -- Setup the edited by label.
        JLabel editorLabel = new JLabel(" -- Last edited by "+note.getLastEdited() +" at "+note.getDateModified());
        editorLabel.setAlignmentX(Component.LEFT_ALIGNMENT);

        // -- Add everything to the view.
        Dimension wD = new Dimension(Short.MAX_VALUE, Short.MAX_VALUE);
        scrollPane.setMaximumSize(wD);
        this.setBackground(Color.yellow);
        this.setMaximumSize(wD);
        this.add(creatorLabel);
        this.add(scrollPane);
        this.add(editorLabel);
    }
    //</editor-fold>

} 
```

编辑：这是 BoxLayout 的一个问题，设置最大尺寸似乎没有任何好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:38:42.750

我稍微改变了你的代码来测试它。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;

/**
 * @author dah01
 */
public class T {
    public static void main(String[] args) {
        JFrame f= new JFrame();     
        f.setSize(500,500);
        f.add(new NotesPanel());
        f.setVisible(true);
    }
}
class NotesPanel extends JPanel{
    public NotesPanel(){
        // -- Setup the layout manager.
        setBackground(new Color(199, 187, 192));
        setLayout(new GridLayout());

        // -- Setup the border for the notes pane.
        this.setBorder(new EmptyBorder(8, 3, 8, 3));

        // -- Setup the border for the notes pane.
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel,BoxLayout.Y_AXIS));
        panel.setAlignmentX(JPanel.LEFT_ALIGNMENT);
        panel.setBorder(new BevelBorder(BevelBorder.RAISED));

        // -- Setup the creator section.
        JLabel creatorLabel = new JLabel("Note by "+ " @ ");
        creatorLabel.setAlignmentX(JLabel.LEFT_ALIGNMENT);

        // -- Setup the notes area.
        JTextArea notesContentsArea = new JTextArea("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.");
        notesContentsArea.setEditable(false);
        notesContentsArea.setLineWrap(true);
        notesContentsArea.setWrapStyleWord(true);

        JScrollPane scrollPane = new JScrollPane(notesContentsArea);
        scrollPane.setAlignmentX(JScrollPane.LEFT_ALIGNMENT);

        // -- Setup the edited by label.
        JLabel editorLabel = new JLabel(" -- Last edited by "+" at ");
        editorLabel.setAlignmentX(Component.LEFT_ALIGNMENT);

        // -- Add everything to the view.
        panel.add(creatorLabel);
        panel.add(scrollPane);
        panel.add(editorLabel);
        this.add(panel);
    }
    //</editor-fold>

} 
```

我看不出你的问题出在哪里，因为一切都在正确调整大小。

以下是一些屏幕截图，它在不同的窗口大小下对我的外观： ![1](../Images/f6ba268b9bc1b5bae88f51ffae890e8e.png) ![2](../Images/d385df809353a44f8610521436d5385e.png) ![3](../Images/3cff704cc5812bca1c212a8663133a5f.png)

你想达到什么不同？

# windows - 使用 rundll32.exe 作为 Windows 服务运行 dll

> ID：12163115
> 
> 赞同：1
> 
> 时间：2012-08-28T15:57:29.457
> 
> 标签：windows, winapi, dll, windows-services, rundll32

我能够使用 rundll32.exe 运行 dll。

现在我想将它作为 Windows 服务运行，但它似乎没有启动并超时。

我不确定如何传递参数。

尝试类似..

sc.exe 创建服务 binPath="c:\windows\system32\rundll32.exe -test.dll -Main"

尝试 [使用 sc.exe 创建服务的建议；如何传入上下文参数](https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters) ，但它似乎不起作用。

有什么建议么？

谢谢，

卡尔提克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:23:22.273

rundll32.exe 不能充当服务！您需要像 srvany.exe（来自旧资源工具包）这样的帮助程序。

# backbone.js - 使用 Backbone.Marionette 嵌套集合

> ID：12163118
> 
> 赞同：9
> 
> 时间：2012-08-28T15:57:37.093
> 
> 标签：backbone.js, marionette

我想创建一个日历，它是一天的集合，每一天都是约会的集合。day对象的结构是：

```
day:{
    date:'08-06-2012',
    appointment: {
        time_begin:'12:55',
        time_end: '16:40',
        customer: 'Jaime'
    }
} 
```

此刻我有这个模型和观点：

```
// CALENDAR COLLECTION
App.Calendar.Collection = Backbone.Collection.extend({
    // MODEL
    model: App.Day.Model
} 
```

当日历集合从服务器获取数据时，它会获取包括约会在内的完整日期对象。

```
// CALENDAR VIEW
App.Calendar.View = Backbone.Marionette.CompositeView.extend({
    // TEMPLATE
    template: Handlebars.compile(templates.find('#calendar-template').html()),
    // ITEM VIEW
    itemView: App.Day.View,
    // ITEM VIEW CONTAINER
    itemViewContainer: '#calendar-collection-block'
});

// DAY MODEL
App.Day.Model = Backbone.Collection.extend({
    // PARSE
    parse:function(data){
        console.log(data);
        return data;
    }
});

// DAY VIEW
App.Day.View = Backbone.Marionette.CompositeView.extend({
    collection: App.Day.Model,
    itemView: App.CalendarAppointment.View, //---->I NEED TO DEFINE THIS, NOT SURE HOW
    template: Handlebars.compile(templates.find('#day-template').html())
}); 
```

day 模型需要是约会的集合，并且不需要从服务器获取数据，因为它每天都在里面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T01:22:03.173

如果我正确理解了这个问题，那么您是在问如何将数据从`Day`模型、`Appointment`集合中获取到`CalendarApointmentView`itemView 中？

您`Day.View`可以设置为填充`collection`此复合视图，然后将其推送到项目视图中：

```
 // DAY VIEW
App.Day.View = Backbone.Marionette.CompositeView.extend({
    collection: App.Day.Model,
    itemView: App.CalendarAppointment.View,
    template: Handlebars.compile(templates.find('#day-template').html()),

    initialize: function(){

      // since `this.model` is a `Day` model, it has the data you need
      this.collection = this.model.get("CalendarAppointments");

    }
}); 
```

需要注意的一件事：`this.collection`必须是有效的 Backbone.Collection。如果您的模型将约会数据存储为一个简单的数组，那么您需要这样做：

```
 var appointments = this.model.get("CalendarAppointments");
this.collection = new AppointmentCollection(appointments); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T23:34:59.917

这看起来像是[主干关系](https://github.com/PaulUithol/Backbone-relational)的完美用例，它会自动处理嵌套数据的解析和创建嵌套集合结构。

# c# - 在此 ConcurrentDictionary 缓存方案中是否需要锁定

> ID：12163125
> 
> 赞同：6
> 
> 时间：2012-08-28T15:58:00.393
> 
> 标签：c#, multithreading, concurrency

我有以下代码来缓存我在多线程应用程序中使用的并发字典中某些类的实例。

简单地说，当我用 id 参数实例化类时，它首先检查字典中是否存在具有给定 id 的 privateclass 实例，如果不存在则创建 privateclass 的实例（这需要很长时间，有时需要几秒钟），并将其添加到字典中以备将来使用。

```
public class SomeClass
{
    private static readonly ConcurrentDictionary<int, PrivateClass> SomeClasses =
        new ConcurrentDictionary<int, PrivateClass>();

    private readonly PrivateClass _privateClass;

    public SomeClass(int cachedInstanceId)
    {
        if (!SomeClasses.TryGetValue(cachedInstanceId, out _privateClass))
        {
            _privateClass = new PrivateClass(); // This takes long time
            SomeClasses.TryAdd(cachedInstanceId, _privateClass);
        }
    }

    public int SomeCalculationResult()
    {
        return _privateClass.CalculateSomething();
    }

    private class PrivateClass
    {
        internal PrivateClass()
        {
            // this takes long time
        }

        internal int CalculateSomething()
        {
            // Calculates and returns something
        }
    }
} 
```

我的问题是，我是否需要在外部类构造函数的生成和赋值部分周围添加一个锁，以使这个代码线程安全，还是它本来就很好？

更新：

在 SLaks 的[建议下](http://reedcopsey.com/2011/01/16/concurrentdictionarytkeytvalue-used-with-lazyt/)，尝试使用ConcurrentDictionary 的[GetOrAdd()](http://msdn.microsoft.com/en-us/library/ee378677.aspx)方法和[Lazy](http://msdn.microsoft.com/en-us/library/dd642331.aspx)的组合，但不幸的是，构造函数`PrivateClass`仍然调用了不止一次。测试代码见[https://gist.github.com/3500955](https://gist.github.com/3500955)。

更新 2：您可以在此处查看最终解决方案： [https ://gist.github.com/3501446](https://gist.github.com/3501446)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T15:59:23.487

你在滥用`ConcurrentDictionary`.

在多线程代码中，您永远不应该检查项目是否存在，如果不存在则添加它。
如果两个线程同时运行该代码，它们最终都会添加它。

一般来说，这类问题有两种解决方案。您可以将所有代码封装在一个锁中，或者您可以在一个原子操作中将其重新设计为整个事物。

`ConcurrentDictionary`专为这种情况而设计。

你应该简单地打电话

```
 _privateClass = SomeClasses.GetOrAdd(cachedInstanceId, key => new PrivateClass()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T16:02:30.557

锁定不是必需的，但您所做的不是线程安全的。与其先检查字典中是否存在某个项目，然后在必要时添加它，不如使用[`ConcurrentDictionary.GetOrAdd()`](http://msdn.microsoft.com/en-us/library/ee378677.aspx)一个原子操作来完成所有操作。

否则，您将面临与使用常规字典相同的问题：另一个线程可能会`SomeClasses`在您检查存在之后但在插入之前添加一个条目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-12T12:49:31.687

[您在https://gist.github.com/3500955](https://gist.github.com/3500955)上使用 ConcurrentDictionary 和 Lazy<T>的示例代码不正确 - 您正在编写：

```
 private static readonly ConcurrentDictionary<int, PrivateClass> SomeClasses =
        new ConcurrentDictionary<int, PrivateClass>();
    public SomeClass(int cachedInstanceId)
    {
        _privateClass = SomeClasses.GetOrAdd(cachedInstanceId, (key) => new Lazy<PrivateClass>(() => new PrivateClass(key)).Value);
    } 
```

..应该是：

```
 private static readonly ConcurrentDictionary<int, Lazy<PrivateClass>> SomeClasses =
        new ConcurrentDictionary<int, Lazy<PrivateClass>>();
    public SomeClass(int cachedInstanceId)
    {
        _privateClass = SomeClasses.GetOrAdd(cachedInstanceId, (key) => new Lazy<PrivateClass>(() => new PrivateClass(key))).Value;
    } 
```

您需要使用 ConcurrentDictionary<TKey, Lazy<TVal>>，而不是 ConcurrentDictionary<TKey, TVal>。关键是您只有在从 GetOrAdd() 返回正确的 Lazy 对象*后*才能访问 Lazy的值 - 将 Lazy 对象的值发送到 GetOrAdd 函数会破坏使用它的整个目的。

编辑：啊 - 你在[https://gist.github.com/mennankara/3501446](https://gist.github.com/mennankara/3501446)得到它:)

# visual-studio - 想用 VS2012 安装 Entity Framework 5 但我迷路了

> ID：12163132
> 
> 赞同：6
> 
> 时间：2012-08-28T15:58:21.510
> 
> 标签：visual-studio, entity-framework

我安装了 Visual Studio 2012 并使用 Entity Framework 4.3 和 .Net Framework 4.0 从 Visual Studio 2010 迁移了一个项目

现在我想参考 Entity Framework 5.0 和 .Net 4.5

但是当我转到“管理 Nuget 包”窗口并搜索 EntityFramework 时。它说 Entity Framework 5 已经安装（没有“安装”按钮，我有一个绿色的复选标记）。这很奇怪，因为当我查看该项目的资源管理器窗口并获取引用“EntityFramework”的属性时，我看到这是版本 4.4.0.0。我同意路径被告知为 5.0，但是什么？我不再明白安装了哪个版本。

![在此处输入图像描述](../Images/56905996d9925b7e7500acfa9ced6cb4.png)

请问有什么帮助吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T18:17:24.627

从您的项目中删除 EntityFramework 包，将项目切换到 .NET 4.5 并再次添加该包。EF 4.4 和 5.0 代表“相同的包”，但区别在于它们所针对的 .NET 版本。

# javascript - 在面板中使用 JavaScript

> ID：12163133
> 
> 赞同：2
> 
> 时间：2012-08-28T15:58:24.893
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在使用插件 SDK 制作一个 Firefox 插件。我找不到在面板中使用 JavaScript 代码的方法。这是我所做的：

```
//file main.js
data = require("self").data

var MeteoPanel = require("panel").Panel({
  width:740,
  height:350,
  contentURL: data.url("test.html"), 
  allow:true
});

require("widget").Widget({
  id: "open-meteo-btn",
  label: "Meteo",
  contentURL: data.url("icon.png"),
  panel: MeteoPanel
}); 
```

这可行，但我不能在`test.html`页面中使用 JavaScript。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:12:43.000

尝试将 js 放在一个单独的文件中，然后：

```
var MeteoPanel = require("panel").Panel({
  width:740,
  height:350,
  contentURL: data.url("test.html"), 
  contentScriptFile: data.url("yourJSFile.js"), //Add this line
  allow:true
}); 
```

似乎也`contentScriptFile`接受一个数组，因此`[data.url("file1.js"),data.url("file2.js")]`如果您需要例如添加 2 个源文件，您可以将其值更改为。

# c++ - 调用虚函数时的静态成员函数语义

> ID：12163138
> 
> 赞同：0
> 
> 时间：2012-08-28T15:58:48.817
> 
> 标签：c++, inheritance

假设我们有一个类

```
class Abstract {
    Abstract( void );
    virtual ~Abstract( void ) = 0;

    virtual void VirtualFunction( void ) = 0;

    static void CallsVirtual( void ) {
        VirtualFunction();
    }
};
class Concrete : public Abstract {
    Concrete( void ) {}
    ~Concrete( void ){}
    virtual void VirtualFunction( void ) {/* Do virtual function-y stuff */}
};

int main( void ) {
    Concrete _concrete;
    Abstract& _abstractReference = _concrete;

    _abstractReference.callsvirtual();
} 
```

通过指向派生类的基类指针调用基类静态成员函数时，会调用哪个虚成员函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:59:35.393

两者都不。你会得到一个编译器错误。您不能调用非`static`方法或从方法访问非`static`成员`static`。

```
//...
virtual void VirtualFunction( void ) = 0;

static void CallsVirtual( void ) {
    VirtualFunction();   // Nope!
}
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:02:52.863

使用`this`指针调用非静态成员函数。指针隐式传递给每个`this`成员函数。
但是，对于`static`成员函数，`this`指针根本不传递。因此，您不能通过静态成员函数调用非静态成员函数。

# git - 启动分支太晚了，更改我分支的父级

> ID：12163145
> 
> 赞同：5
> 
> 时间：2012-08-28T15:59:14.567
> 
> 标签：git

我有以下情况：

```
A---B---F---G---H (master)
     \
      \
       C---D---E (experimental) 
```

我的问题是 B 是一件非常非常糟糕的事情，不应该发生在`master`. 它属于`experimental`. 不过 F---G---H 没问题。有没有办法让一切看起来像这样：

```
A---F'---G'---H' (master)
\
 \
  B---C---D---E (experiment) 
```

我读过关于 rebase 和类似的东西，但最大的问题是`master`已经被推到`origin`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:09:32.323

在 master 上，运行：

`git revert B`

然后，您可以安全地推送，如果该提交的下游更改没有直接受到它的影响（即，`B`可以删除提交的内容而不会破坏其后的其他更改。听起来确实是这种情况。）

这将创建：

```
A---B---F---G---H---I (master)
     \
      \
       C---D---E (experimental) 
```

`I`还原提交在哪里。Master 保留它的历史，同时删除`B`，experimental的内容`B`的变化。

`I`如果您稍后将实验性合并到主控中，您可能必须恢复提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:02:15.577

`git rebase --onto A B master`会做。

似乎您已经将 master 推送到了 orgin，如果您确定覆盖 origin 的 master 分支是安全的，只需`git push -f`在 master 分支上执行。请注意，这可能会导致其他开发人员在从源中提取时发生冲突。

通常，公共仓库中的分支应该保持不变，这意味着您不能期望从 master 中删除提交 B，您所能做的就是在新提交中修复提交 B 引入的错误并再次将其推送到 master。

如果可以将变基通知您的团队成员并且您坚持这样做，那么重写是可以的，只要确保不会经常发生这种情况。

# c# - 尝试后终于没有调用

> ID：12163149
> 
> 赞同：5
> 
> 时间：2012-08-28T15:59:24.367
> 
> 标签：c#, exception-handling, try-finally

由于某种原因，在我的控制台应用程序中，我无法让 finally 块运行。我正在编写这段代码来测试 finally 块是如何工作的，所以它非常简单：

```
static void Main()
{
    int i = 0;
    try
    {
        int j = 1 / i; // Generate a divide by 0 exception.
    }
    finally
    {

        Console.Out.WriteLine("Finished");
        Console.In.ReadLine();
    }
} 
```

起初我遇到了[这里描述的问题，](https://stackoverflow.com/questions/3421738/finally-doesnt-seem-to-execute-in-c-sharp-console-application-while-using-f5)但后来我尝试在 Visual Studio 之外运行程序，但出现“程序已停止响应”错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T16:09:56.757

因为您没有顶级异常处理程序，.Net 运行时会为您捕获异常并在 finally 有机会运行之前中止程序。这说明了这一点：

```
static void Main() 
{
  try
  {
      int i = 0;
      try
      {
         int j = 1 / i; // Generate a divide by 0 exception.
      }
      finally
      {
          Console.Out.WriteLine("Finished");
          Console.In.ReadLine();     
      }
  }
  catch (Exception ex)
  {
      Console.WriteLine(ex.ToString());
  }
} 
```

使用此代码，异常现在在调用链中通过 try...catch 处理（它恰好在同一个方法中），因此嵌入的 finally 将被执行。catch 不必在引发异常的同一个函数中，它可以在调用链中的任何位置。

编辑：最初，您的程序将在何时何地捕获异常似乎不确定。但是想想你的应用程序的边界，外部世界与你的代码交互的地方——通常它们是有限的并且定义明确的。因此对于控制台应用程序，边界是 Main 方法，这是您可以放置​​顶级异常处理程序的地方。对于 Web 表单应用程序，边界包括按钮单击事件（用户正在与您的 UI 交互）等事件，因此您也可以在其中包含异常处理程序。对于类库，边界通常是调用库的应用程序的边界，而不是库本身。所以不要在库中捕获异常（除非您可以明智地从中恢复），而是让它们冒泡到调用应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-28T10:03:18.483

想在这里添加我自己的发现，因为这里的行为肯定很奇怪——因此，接受的答案并不完全正确。

给定以下示例：

```
static void Main(string[] args)
{
    try{
        throw new Exception("");
    } finally {
        Console.WriteLine("I am never called!");
        Console.ReadLine();
    }
} 
```

如果我们选择 CANCEL 退出 Windows 错误报告对话框，则实际执行 finally 块，如下所示：

[![Windows 错误报告正在进行中](../Images/3f508bc683a2ac3ab3450403a7b731c4.png)](https://i.stack.imgur.com/2u3bg.png) [![完成后的控制台](../Images/848047027d7ee1e8ee1cfd51d0a227ad.png)](https://i.stack.imgur.com/YGMyM.png)

但是，如果我们允许 Windows 错误报告对话框“完成”，因此我们可以选择“调试”或“关闭程序”，那么 finally 块不会被执行。

[![在此处输入图像描述](../Images/52816322e010f149bd3e73f5ef07b1a0.png)](https://i.stack.imgur.com/fWFvq.png) [![在此处输入图像描述](../Images/e61d4b2dbb5cf98e06acccd070908111.png)](https://i.stack.imgur.com/1caRW.png)

* * *

对我来说，这表明 .NET 运行时将实际运行所有 finally 块，无论遇到“未处理的顶级异常”，并且阻止它这样做的实际上是 Windows（如果您选择“关闭程序”）或 Visual Studio 调试器（如果您选择“调试”或从附加的调试器开始）......因为他们在运行时之前终止进程作为继续的机会。

有什么想法吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:07:43.977

在一个更大的程序中，这不会是一个问题，因为`DevideByZero`异常会“冒泡”并*希望*在其他地方处理。因为这是在`main`方法中，所以异常无处可去。这会导致您看到的问题...

因此，以下内容会按您的预期进行

```
static void Main(string[] args)
{
    try
    {
        CatchTest();
    }
    catch (Exception)
    {

    }
}

private static void CatchTest()
{
    int i = 0;
    try
    {
        int j = 1 / i; // Generate a divide by 0 exception.    
    }
    finally
    {
        Console.Out.WriteLine("Finished");
        Console.In.ReadLine();
    }
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:01:27.763

您仍然需要一个 catch 来捕获抛出的异常：

```
int i = 0;
        try
        {
            int j = 1 / i; // Generate a divide by 0 exception.
        }
        catch(Exception e)
        {
            Console.Out.WriteLine("Exception caught");
        }
        finally
        {

            Console.Out.WriteLine("Finished");
            Console.In.ReadLine();
        } 
```

此异常导致应用程序崩溃，并且该异常未处理因此终止应用程序。

[http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.100).aspx)

> 通常，当未处理的异常结束应用程序时，finally 块是否运行并不重要。但是，如果即使在这种情况下也必须在 finally 块中运行语句，则一种解决方案是在 try-finally 语句中添加一个 catch 块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T16:10:21.333

您需要分离调试器（例如，在发布模式下运行您的应用程序），有关更多详细信息，请参阅以下（相关）问题：[finally doesn't seem to perform in C# console application while using F5](https://stackoverflow.com/questions/3421738/finally-doesnt-seem-to-execute-in-c-sharp-console-%20application-while-using-f5)

# javascript - 检测视口并重定向到不同的主页

> ID：12163152
> 
> 赞同：4
> 
> 时间：2012-08-28T15:59:37.640
> 
> 标签：javascript, html, browser, client-side, viewport

如果初始视口是某个尺寸，我想将主页重定向到不同的视图。我正在考虑使用 javascript 执行此操作并在 head 标记中执行重定向。这是最好的方法还是我可以先在服务器端检测到任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:01:57.563

您无法在服务器上检测视口大小，您需要在客户端进行。

客户端重定向也可能不是您的最佳解决方案，因为它对搜索引擎来说是阻碍和不利的。相反，您可以使用媒体查询来应用针对不同屏幕分辨率范围的不同样式表（或级联），而无需任何服务器端交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:02:22.727

无法在服务器端检测视口/浏览器大小。你可以用Javascript来做。请注意，您不必重定向，您可以使用 AJAX 根据视口大小加载替代内容。

# java - 如何将本地非 maven 项目添加为 maven 项目的依赖项？

> ID：12163153
> 
> 赞同：4
> 
> 时间：2012-08-28T15:59:40.700
> 
> 标签：java, spring, maven

我创建了一个新的 Spring Web 应用程序，我非常想使用 Maven 来处理构建/依赖项。我的问题是该项目依赖于一些现有的本地项目，目前还不能对它们进行 mavenizing。是否有可能依赖这些项目而不使它们成熟？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T16:05:22.523

我认为最简单的方法是将本地依赖项部署到本地存储库，以便 maven 可以将其用作常规依赖项。

要将本地文件部署`jar`到本地存储库中，请使用如下命令行：

```
mvn install:install-file -Dfile=<MY-FILE> -DgroupId=MY-GROUP-ID -DartifactId=MY-ARGIFACT -Dversion=MY-VERSION -Dpackaging=jar 
```

如果您在公司中有像 Artifactory 这样的共享存储库，您可以在那里部署 jar。否则，每个开发人员都必须部署到他的本地存储库中。好消息它必须只做一次。

编辑。

这是一种将项目到项目的依赖关系定义为的方法`pom.xml`

```
 <dependency>
        <groupId>com.mycompany.util</groupId>
        <artifactId>util</artifactId>
        <version>${com.mycompany.version}</version>
    </dependency> 
```

就是这样。Util 只是我工作空间中的另一个项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:13:28.507

不，你不应该那样尝试。Maven 的主要目标是有一个标准化的构建。这就是使 Maven 如此易于使用的原因：异常不是常态。这就是为什么 Maven 要求所有依赖项都采用典型的 Maven 格式（POM + jar）。

当你说“mavenizing 它们目前不是一个选项”时，你基本上是在说“Maven 目前不是一个选项”。根据我的经验，将现有项目转换为 Maven 只需几分钟……除非所述项目使用混乱、不可靠的构建过程，在这种情况下，您真的*应该*尽快将其转换为 Maven，以免浪费更多宝贵的时间. :-)

如果其他一切都失败了，请使用构建服务器从相关项目生成 JAR 文件，并将它们部署到公司范围的存储库服务器或仅部署到本地计算机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-17T00:02:01.477

这个答案有点晚了，但以防万一有人需要它，我使用 Maven 的[Build Helper Plugin](http://www.mojohaus.org/build-helper-maven-plugin/usage.html)找到了解决方案，也就是说，如果您不想将非 Maven 项目部署为 jar：

`<sources>`所以基本上你只需在标签中添加非maven项目的源目录：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>3.0.0</version>
    <executions>
        <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>C:\Users\user123\eclipse-workspace\my_non_maven_project\src</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

现在，如果该非 maven 项目有自己的依赖项，您还需要将它们添加到`<dependencies>`maven 项目的部分中。

# python - 数据到树状图并返回

> ID：12163158
> 
> 赞同：2
> 
> 时间：2012-08-28T15:59:58.093
> 
> 标签：python, scipy, dendrogram

我有一种感觉，这是一个非常简单的问题，但我无法弄清楚。

我有一小部分轨迹，我正在尝试使用 scipi hcluster 对其进行聚类。

![一小组轨迹](../Images/4923e906ee26d5618557a63d1395362d.png)

我在这方面取得了成功

```
 from hcluster import linkage, dendrogram

    l = linkage(matrix)
    d = dendrogram(l)
    show() 
```

![在此处输入图像描述](../Images/95f8f882dd12213ec97ead4cb93e56d5.png)

但是我无法弄清楚如何将树状图分配的颜色映射回原始轨迹。树状图具有以下键 ['ivl', 'dcoord', 'leaves', 'color_list', 'icoord']。根据文档，'ivl' 是打印在图底部的一组标签，由于字体很小，这些标签无法阅读。

我试过以下

```
 for index, label in enumerate(d['ivl']):
        print 'trajectory #%s has color %s' % (label, d['color_list'][index]) 
```

然而，这会爆炸，因为 color_list 中的颜色比 ivl 中的标签少一种。当我查看树状图时，我可以清楚地看到 2 个绿色、2 个红色、3 个洋红色等。但是树状图告诉我其他情况

```
 from collections import Counter        
    Counter(d['color_list'])
    Counter({'y': 68, 'b': 18, 'm': 2, 'c': 1, 'g': 1, 'r': 1}) 
```

所以最后我的问题。这个可怕的结构是什么？我如何真正获得树状图分配给每个轨迹的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:17:07.927

我有同样的问题，找到了你的帖子。希望你现在已经找到了答案，因为它已经几个月了，但如果其他人也遇到这个问题：你可以使用函数 fcluster 来获取集群： [http ://docs.scipy.org/doc/scipy/参考/生成/scipy.cluster.hierarchy.fcluster.html#scipy.cluster.hierarchy.fcluster](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.fcluster.html#scipy.cluster.hierarchy.fcluster)

```
fcluster(Z,0.7*max(Z[:,2]),'distance') 
```

应该将 fcluster 参数与默认的树状图参数匹配。

希望这有效！

# objective-c - 用于格式化 XML 的 Objective-c 类或框架

> ID：12163159
> 
> 赞同：1
> 
> 时间：2012-08-28T16:00:00.400
> 
> 标签：objective-c, xml

是否有任何 Objective-c 类或“带有实用程序类的框架”可以将块中接收的 XML 整理成可读的缩进 XML。

前

```
<Modules><Module><Description>Equities</Description><ModuleId>4</ModuleId></Module><Module><Description>Fleets</Description><ModuleId>2</ModuleId></Module><Module><Description>Futures</Description><ModuleId>5</ModuleId></Module><Module><Description>News</Description><ModuleId>1</ModuleId></Module><Module><Description>Podcasts</Description><ModuleId>7</ModuleId></Module><Module><Description>Time series</Description><ModuleId>3</ModuleId></Module><Module><Description>Clients</Description><ModuleId>13</ModuleId></Module><Module><Description>Seanet</Description><ModuleId>10</ModuleId></Module><Module><Description>S and P</Description><ModuleId>6</ModuleId></Module><Module><Description>Drycargo</Description><ModuleId>9</ModuleId></Module><Module><Description>Tankers</Description><ModuleId>8</ModuleId></Module><Module><Description>MarketLine</Description><ModuleId>11</ModuleId></Module></Modules> 
```

后

......

```
<Modules>
    <Module>
        <Description>Equities</Description>
        <ModuleId>4</ModuleId>
    </Module>
    <Module>
        <Description>Fleets</Description>
        <ModuleId>2</ModuleId>
    </Module>
...
</Modules> 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:22:05.777

非常简单的 XML 解析器 - 重写的描述方法进行完全缩进

[https://github.com/nfarina/xmldocument](https://github.com/nfarina/xmldocument)

```
SMXMLDocument *document = [SMXMLDocument documentWithData:data error:&error];

NSLog(@"%@",document);

<IndexPrices>
  <Index>
    <Change>109</Change>
    <ChangePercentage>3.15</ChangePercentage>
    <Description i:nil="true"/>
    <IndexCode>BCI</IndexCode>
    <IndexDate>2012-09-04T13:09:13</IndexDate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:09:38.333

您可以[`NSXMLParser`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)用来解析文档并自行格式化。在您的 NSXMLParserDelegate 中保留一个`level`指示当前级别或所需缩进的 ivar。每次解析器解析一个新的开始标记时，将其加一，当它遇到一个结束标记时，将其减一。然后，您所要做的就是[`NSMutableString`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)在解析后的节点前面加上适当数量的空格。

# javascript - 搜索包含值的 json 对象键，然后取消设置它

> ID：12163160
> 
> 赞同：1
> 
> 时间：2012-08-28T16:00:04.147
> 
> 标签：javascript, json, underscore.js, mlab

我正在寻找一种方法来搜索 JSON 对象以检查它是否包含给定值，如果存在，则取消设置它。

我的数据结构如下（附有解释）：

```
// Search within the 'seats' array for a given 'guestID', if it exists, unset it
tables = [
   {
      "_id":{
         $oid: "one"
      },
      "seats":[
         { "guestId":"01" },
         { "guestId":"02" },
         { "guestId":"03" }
      ]
   },
   {
      "_id":{
         $oid: "two"
      },
      "seats":[
         { "guestId":"11" },
         { "guestId":"12" },
         { "guestId":"13" }
      ]
   }
] 
```

我在这个项目中使用下划线，我尝试过使用`_.pluck(tables, 'seats')`，然后是 _.foreach 但我不得不嵌套多个 _.foreach 语句来访问席位数组进行搜索，我不确定这是否是最佳实践或不是。有没有我不知道的更简单的方法？

此数据是从 mongolab REST api 返回的。这是我应该在最初的 XHR 请求中做的事情，而不是获取一个大对象然后尝试在客户端解析它吗？

如果这是一个 SQL 请求，我就可以做类似的事情`select tables.seats where guestId = XXX`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:11:39.497

每当我过去遇到这种情况时，递归搜索功能一直是无价的......这是我的一个我躺在身边的一个*（我通过添加一个删除方法来扩展它）*：

```
function o ( target ) {
  /// if an instance of o has been created, then handle it
  if ( this instanceof o ) {
    /// O INSTANCE:
    /// an instance of o acts like a reference or pointer 
    /// to how the value it targets was reached.
    this.value = target;
    this.key = arguments[1];
    this.parent = arguments[2];
    this.toString = function(){ return 'o('+this.key+' = '+this.value+')';}
  }
  /// if no instance being created fall back to the 'scan object' code
  else {
    /// RECURSIVE CODE:
    /// the _ function is responsible for accepting the 
    /// attributeName and attributeValue search
    var _ = function ( key, value, modifier ) {
      var i, v, tar = ( modifier ? modifier.target : target ), items = [];
      /// if we are dealing with an o instance, handle slightly differently
      if ( tar instanceof o ) {
        for ( i in tar.value ) {
          /// check to see if our current key and value 
          /// match our search terms
          if ( _.test( i, (v=tar.value[i]), key, value ) ) {
            items.push(new o(v, i, tar));
          };
        };
      }
      /// if no o instance treat as a normal object or array
      else {
        for ( i in tar ) {
          if ( (v = tar[i]) ) {
            /// if we are an instance of o, recurse to actually 
            /// check the items within
            if ( v instanceof o ) {
              items = items.concat( _( key, value, {target:v} ) );
            }
            /// check to see if our current key and value match 
            /// our search terms
            else if ( _.test( i, v, key, value ) ) {
              items.push(new o(v, i, tar));
            };
          };
        };
      };
      /// if in modifier mode, don't rely on storing in scope, 
      /// return the calculated items instead
      if ( modifier ) {
        return items;
      }
      else {
        /// update what we are targeting
        target = items;
        /// return our underscore function
        return _;
      };
    };
    /// FUNCTION DECLARATIONS:
    /// a quick test to see if the key and value match (or either or)
    _.test = function ( i,v,key,value ) {
      var havekey = ( key !== null && key !== undefined ),
          haveval = ( value !== null && value !== undefined ),
          passkey = ( havekey && (i == key || key === '*') ),
          passval = ( haveval && (v == value || value === '*') );
      return ( havekey && haveval && passkey && passval ) || 
        ( havekey && !haveval && passkey ) || 
        ( haveval && !havekey && passval );
    };
    /// calculate the path needed to reach the object within the structure
    _.path = function () {
      var i = target.length, paths = [], path, cur, last;
      while ( i-- ) {
        cur = target[i]; path = [];
        do{ last = cur; if ( cur instanceof o ){ path.unshift( cur.key ); } }
          while( (cur = cur.parent) );
        paths.push(path.join('/'));
      };
      return ( paths.length == 1 ? paths[0] : paths );
    };
    /// remove the item we are targeting by stepping back 
    /// and deleting ourselves from the previous parent
    _.remove = function ( removeEntireObject ) {
      var i = target.length, paths, path, cur, last;
      while ( i-- ) {
        cur = target[i];
        /// remove the object that has the found attribute
        if ( removeEntireObject ) {
          if ( cur.parent.parent ) {
            cur.parent.parent.value[cur.parent.key] = null;
            delete cur.parent.parent.value[cur.parent.key];
          }
        }
        /// otherwise remove only the targeted attribute
        else {
          cur.parent.value[cur.key] = null;
          delete cur.parent.value[cur.key];
        }
      };
      return _;
    };
    /// a useful function for backwards navigation
    _.parent = function () {
      var i = target.length, cur, items = [], values = [];
      while ( i-- ) {
        cur = target[i];
        /// remove the object that has the found attribute
        if ( cur && cur.parent ) {
          /// store the values as we go so we can 
          /// spot and remove duplicated parents
          if ( values.indexOf(cur.parent.value) === -1 ) {
            items.push(cur.parent);
            values.push(cur.parent.value);
          }
        }
      };
      target = items;
      return _;
    }
    /// slimple debugging
    _.alert = function () {
      var i = target.length, cur;
      while ( i-- ) {
        cur = target[i];
        alert(cur);
      };
      return _;
    };
    return _;
  };
}; 
```

示例用法：

```
/// remove only the guestId object with a value '01'

o(tables)('*')('seats')('*')('guestId', '01').remove( true ); 
```

或者：

```
/// remove the 'guestIds' object in the first slot for either seat

o(tables)('*')('seats')(0)('guestId', '*').parent().remove(); 
```

或者：

```
/// remove all 'guestIds' from the first seat

o(tables)(0)('seats')('*')('guestId').parent().remove(); 
```

解释：

*   您必须始终从调用 开始`o(my_object_to_parse)`。
*   传递一个参数充当`attributeName`搜索。
*   传递两个参数充当`attributeName`和`attributeValue`搜索。
*   `*`充当简单的通配符，可用于处理基本数组。
*   `*`可以用作`attributeName`或。`attributeValue`
*   每个连续的请求将一个级别进一步移动到结构中。

我有一段时间没有使用此代码，因此它可能不是 100% 无错误或最佳的。但是，它似乎适用于您的特定用例……并且它还设法处理了我在测试时扔给它的所有内容。它应该很容易扩展更多的方法，而不是`.remove()`, `.parent()`，`.path()`并且`.alert()`最好添加一些错误检查。

# sql - 即席查询权限 SQL Server

> ID：12163161
> 
> 赞同：1
> 
> 时间：2012-08-28T16:00:05.460
> 
> 标签：sql, permissions, sql-server-express, adhoc

我有一个以前的 XP 应用程序，我必须在 WIN 7、SQL Server 2008 Express 和 VSC# 上复活。

我有一个可以执行以下操作的用户

```
SELECT * INTO dbo.[CARD DEF GENERAL POINT]
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                'C:\Users\E151624\Documents\TagConversionRefFiles\Card Def.accdb';'admin';'',[CARD DEF GENERAL POINT]) 
```

用户从 VSC# 应用程序连接并可以运行上面的查询。在重新创建用户时，它无权从程序或 SQL 查询窗口运行此查询。目前，该用户是具有 dbo 权限的 SQL Auth 用户，但该用户显然没有访问 C: 驱动器上文件的权限。我尝试创建一个 Windows 用户，但即使对该用户具有管理员权限，它仍然无法正常工作，所以我一定是做错了什么（我不记得用户配置来自 XP）。

顺便说一句，即席查询已启用：

```
name    minimum maximum config_value    run_value
access check cache bucket count 0   16384   0   0
access check cache quota    0   2147483647  0   0
Ad Hoc Distributed Queries  0   1   1   1
affinity I/O mask   -2147483648 2147483647  0   0
affinity mask   -2147483648 2147483647  0   0
Agent XPs   0   1   0   0
allow updates   0   1   0   0
awe enabled 0   1   0   0
blocked process threshold (s)   0   86400   0   0
c2 audit mode   0   1   0   0
clr enabled 0   1   0   0
cost threshold for parallelism  0   32767   5   5
cross db ownership chaining 0   1   0   0
cursor threshold    -1  2147483647  -1  -1
Database Mail XPs   0   1   0   0
default full-text language  0   2147483647  1033    1033
default language    0   9999    0   0
default trace enabled   0   1   1   1
disallow results from triggers  0   1   0   0
filestream access level 0   2   0   0
fill factor (%) 0   100 0   0
ft crawl bandwidth (max)    0   32767   100 100
ft crawl bandwidth (min)    0   32767   0   0
ft notify bandwidth (max)   0   32767   100 100
ft notify bandwidth (min)   0   32767   0   0
index create memory (KB)    704 2147483647  0   0
in-doubt xact resolution    0   2   0   0
lightweight pooling 0   1   0   0
locks   5000    2147483647  0   0
max degree of parallelism   0   64  0   0
max full-text crawl range   0   256 4   4
max server memory (MB)  16  2147483647  2147483647  2147483647
max text repl size (B)  -1  2147483647  65536   65536
max worker threads  128 32767   0   0
media retention 0   365 0   0
min memory per query (KB)   512 2147483647  1024    1024
min server memory (MB)  0   2147483647  0   8
nested triggers 0   1   1   1
network packet size (B) 512 32767   4096    4096
Ole Automation Procedures   0   1   0   0
open objects    0   2147483647  0   0
optimize for ad hoc workloads   0   1   0   0
PH timeout (s)  1   3600    60  60
precompute rank 0   1   0   0
priority boost  0   1   0   0
query governor cost limit   0   2147483647  0   0
query wait (s)  -1  2147483647  -1  -1
recovery interval (min) 0   32767   0   0
remote access   0   1   1   1
remote admin connections    0   1   0   0
remote login timeout (s)    0   2147483647  20  20
remote proc trans   0   1   0   0
remote query timeout (s)    0   2147483647  600 600
Replication XPs 0   1   0   0
scan for startup procs  0   1   0   0
server trigger recursion    0   1   1   1
set working set size    0   1   0   0
show advanced options   0   1   1   1
SMO and DMO XPs 0   1   1   1
SQL Mail XPs    0   1   0   0
transform noise words   0   1   0   0
two digit year cutoff   1753    9999    2049    2049
user connections    0   32767   0   0
user instance timeout   5   65535   60  60
user instances enabled  0   1   1   1
user options    0   32767   0   0
xp_cmdshell 0   1   1   1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:21:00.783

SQL Server 具有相当复杂的权限。

我可能有这个错误，但我认为访问本地或网络驱动器的权限是基于 SQL Server 进程本身的所有者。如果您转到控制面板 --> 管理工具 --> 服务，则查找 MSSQL 作为服务。这是数据库的侦听器进程。

其中一列是“登录身份”。那是需要文件系统权限的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T18:00:49.403

这个问题和[这个问题](https://stackoverflow.com/questions/3389312/allow-ad-hoc-distribution-queries-for-all-users)一样。

但是请注意，如果您不使用 Jet 提供程序，而是使用 ACE 提供程序（就像我一样），则必须将值放在该提供程序的键下。

# iphone - 在 UIScrollView 中放大多个 UIImageView

> ID：12163162
> 
> 赞同：0
> 
> 时间：2012-08-28T16:00:08.767
> 
> 标签：iphone, ios, uiscrollview, uiimageview, scrollview

我在放大时遇到了一些问题，**当我放大时**，下一个 UIImageView 超出了正在放大的 UIImageView。

我将 UIImageView 加载到我在控制器中调用的 UIScrollView 的子类中。**加载功能和滚动功能完美运行**。

**第一个问题**是，当我放大下一个 UIImageView 时，会超出我放大的那个。

所以我试图将每个 UIImageView 放在我放入 ScrollView 的 UIView 中，但它做同样的事情......

**我遇到的第二个问题**是，当我放大时，我的滚动不再起作用。

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
// Return the view that you want to zoom
NSLog(@"viewForZoomingInScrollView - current : %d",self.scrollPageControl.currentPage);
return [[[[self.productImageScrollView subviews]objectAtIndex:0] subviews]objectAtIndex:self.scrollPageControl.currentPage];
//return [[self.productImageScrollView subviews] objectAtIndex:0];
//return [self.productImageScrollView getSubViewsByPage:[NSNumber numberWithInteger:[self.scrollPageControl currentPage]]]; 
```

第一个返回 UIView 的 UIImageView 第二个返回 UIView 第三个返回 UIImageView 当我不使用 UIView 时。

**我看到了很多类似的问题，但我尝试过的没有任何帮助......** 所以我打电话给你！Ty 问我是否不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:03:15.077

尝试创建一个 UIView *（也许称它为 contentView）并将所有 UIImageView 作为子视图放入该 contentView

然后，在

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return contentView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:44:46.507

您是否在方法中返回该视图？这是关键部分...

滚动视图只会缩放您在 viewForZooming 中返回的视图，因此如果您要返回一张图像，其余的将不会缩放。我假设您按顺序添加它们，因此当放大的放大时，下一个将保持静止，因此位于当前的顶部

尝试将所有图像添加到视图中，然后在 viewForZoomingInScrollView 中返回相同的视图：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T08:33:54.080

这是确定要缩放的对象的函数：

```
func viewForZooming(in scrollView: UIScrollView) -> UIView?{
    return scrollImageView
} 
```

然后您可以将您想要的内容作为子视图添加到该对象，它将缩放到：

```
scrollImageView.addSubview(teritorysImages) 
```

# javascript - 未捕获的类型错误：无法读取 null 的属性“长度”

> ID：12163169
> 
> 赞同：2
> 
> 时间：2012-08-28T16:00:24.927
> 
> 标签：javascript, jquery

我正在使用 jQuery 1.7，并且我使用的是 28 位长的数字。我收到这个错误

```
Uncaught TypeError: Cannot read property 'length' of null    in jquery-1.7.1.min.js:2 
```

我是 Chrome 浏览器。Javascript中数字类型的限制是什么？

代码：

```
var rules = [];
rules.push({ field:"FieldName","op":"gt","data":"2525252525252525252525252525"}); 
```

# javascript - 安全推送到阵列，如何？担心与否？

> ID：12163175
> 
> 赞同：7
> 
> 时间：2012-08-28T16:00:40.370
> 
> 标签：javascript, javascript-events

我认为这可能是一个幼稚的问题。我经常发现我有多个 xhr 请求等待返回。我跟踪我在 javascript 数组中发出的请求。也就是说，当发出一个新请求时，我将它添加到数组中，然后当线程完成时，我将它从数组中删除。

在多线程操作系统中，我会担心线程交叉，但我知道 javascript 是单线程的。我应该担心数组是一致的吗？

抱歉，如果这已被问及并回答。我看了看，没有找到有关数组安全推送的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T16:01:43.400

不，你不应该担心它。正如你所说，JavaScript 是单线程的。

# javascript - 2个表，需要为每个匹配的行设置最大高度的行

> ID：12163176
> 
> 赞同：2
> 
> 时间：2012-08-28T16:00:46.377
> 
> 标签：javascript, jquery

我有 2 个 html 表，我需要每行具有相同的高度。

因此，如果 table#1 的第 3 行的高度为 25，则 table#2 的第 3 行的高度应为 25。

无论哪一个匹配的行具有最大的高度，那么两行应该具有相同的高度。

我怎样才能做到这一点？

我知道如何遍历行，例如：

```
$("table1 tr").each(function() {

});

$("table2 tr").each(function() {

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:07:36.560

您可以执行以下操作（假设两个表的行数相等）：

```
//for each row in table one
$("#table1 tr").each(function(index, element){

    //get row height from table1 and the corresponding row in table two
    var rowOneHeight = $(this).height();
    var rowTwo = $("#table2 tr:eq(" + index + ")");

    //if no matching row was found in table two, stop loop
    if(!rowTwo.length) return false;

    var rowTwoHeight = rowTwo.height();

    //compare row heights, and set the least high row to the height of the highest one
    if(rowOneHeight > rowTwoHeight){
        //set rowTwoHeight to rowOneHeight
        rowTwo.height(rowOneHeight);
    }else{
        $(this).height(rowTwoHeight);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:35:21.753

你可以在这里看到一个例子。[http://jsfiddle.net/anAgent/ZcnEp/](http://jsfiddle.net/anAgent/ZcnEp/)

设置高度时，您需要考虑行的边框，因为它会影响高度。我的示例不包含这段代码，但如果您要设置边框，可能需要考虑这些内容。

```
 $(document).ready(function() {
        var $table1 = $("#Table1");
        var $table2 = $("#Table2");
        $.each($table1.find("tr"), function(i, o) {
            var $t1r = $(o);
            var $t2r = $table2.find('tr').eq(i);
            if ($t2r != undefined) {
                $t1r.height($t1r.height() > $t2r.height() ? $t1r.height() : $t2r.height());
                $t2r.height($t1r.height());
                console.log("t1:r%s | t2:r%s", $t1r.height(), $t2r.height());
            } else {
              return false;
            }
        });
    });​ 
```

# php - 变量变量和超全局变量

> ID：12163183
> 
> 赞同：2
> 
> 时间：2012-08-28T16:01:14.410
> 
> 标签：php, variable-variables, superglobals

我正在将一个巨大的 PHP 软件从 PHP4 过渡到 PHP5，在我面临的许多（许多）问题中，迄今为止最大的一个似乎是以前的程序员刚刚对 register_globals 功能进行了宴会，不时抛出一些变量不指定来源，并无耻地将警告和通知隐藏在地毯下。

我试图通过创建一个迭代数组（作为参数传递）并通过“变量变量”功能创建全局变量的函数来解决这个问题，然后在每个页面中调用它来获取`$_POST`,`$_GET`和`$_SESSION`. 这是代码：

```
function fix_global_array($array) {
  foreach($array as $key => $value){
    if(!isset($$key)) {
      global $$key;
      $$key = $value;
    }
  }
} 
```

这个函数的问题是条件`isset($$key)`永远不会为真，因此括号内的代码总是被执行并覆盖之前的声明。

这种行为有什么解释吗？我阅读了 PHP 文档，其中指出

> 请注意，变量变量不能在函数或类方法中与 PHP 的超全局数组一起使用。

但我不明白这是否与我的问题有关（说实话，我也不明白这意味着什么，我找不到任何例子）。

PS：请不要告诉我使用全局变量和/或变量变量是不好的编程，我自己对此非常了解，但另一种选择是修改大约 2.700 个文件，每行有一千行代码每行，我是这里唯一的程序员......但如果你知道一个更好的解决方案来摆脱所有那些“未定义的变量”警告，你可以让我开心。

PPS：对我的英语也有耐心^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:33:11.460

在您给定的代码中，永远不正确的原因`isset($$key)`是因为您`global $$key`在条件检查之后调用；在使用 .注册之前，该变量不在范围内[`global`](http://php.net/manual/en/language.variables.scope.php)。要解决此问题，只需将该行移至 上方`if-statement`，您的函数将如下所示：

```
function fix_global_array($array) {
    foreach($array as $key => $value){
        global $$key;
        if(!isset($$key)) {
            $$key = $value;
        }
    }
} 
```

当传递一个数组时，这将正常工作，即使所述数组是`$_POST`or `$_GET`。不过，您传入数组的顺序很重要。`$_POST`如果在和 中定义了索引/键`$_GET`，并且您首先传递`$_POST`给函数 - 值 from`$_GET`将不会存储到变量中。

或者，如果您想回避使用变量变量，无论是出于可读性问题还是简单的偏好，您都可以[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)以相同的方式使用超全局：

```
function fix_global_array($array) {
    foreach($array as $key => $value){
        if(!isset($GLOBALS[$key])) {
            $GLOBALS[$key] = $value;
        }
    }
} 
```

使用这种方法，变量仍然可以访问，就好像它们是正常定义的一样。例如：

```
$data = array('first' => 'one', 'second' => 'two');
fix_global_array($data);
echo $first;    // outputs: one
echo $second;   // outputs: two 
```

此示例适用于上述两个代码示例。

另外，您可以使用 PHP 的[`extract()`](http://php.net/manual/en/function.extract.php)功能。它的目的是完全按照你的`fix_global_array()`方法做 - 甚至有一个标志来覆盖现有的变量值。示例用法：

```
extract($data);
echo $first; // outputs: one 
```

一个关于 的警告`extract()`，直接适用于这种情况，来自 PHP 网站：

> 不要对不受信任的数据使用 extract()，例如用户输入（即 $_GET、$_FILES 等）。如果这样做，例如，如果您想临时运行依赖于[register_globals](http://www.php.net/manual/en/security.globals.php)的旧代码，请确保使用不可覆盖的 extract_type 值之一，例如 EXTR_SKIP 并注意您应该按照 [variables_order](http://www.php.net/manual/en/ini.core.php#ini.variables-order)中定义的相同顺序进行提取php.ini。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:24:33.267

> 但是，如果您知道一个更好的解决方案来摆脱所有那些“未定义变量”警告，那么您可以度过我的一天。

有。修复未使用超全局变量的问题。现在，自然地，我并不是说您应该自己手动更改每个翻转变量调用，但我想这可能是您可以自动化的事情。看看你能不能跟随我的脑电波。

首先，您必须获得所有“未定义变量”通知的列表。这就像注册错误处理程序、检查 E_NOTICE 调用并检查它是否是未定义的变量调用一样简单。我冒昧地写了一小段代码来做到这一点。

```
<?php

/**
 * GlobalsLog is a class which can be used to set an error handler which will 
 * check for undefined variables and checks whether they exist in superglobals.
 * 
 * @author Berry Langerak
 */
class GlobalsLog {
    /**
     * Contains an array of all undefined variables which *are* present in one of the superglobals.
     * 
     * @var array 
     */
    protected $globals;

    /**
     * This contains the order in which to test for presence in the superglobals.
     * 
     * @var array 
     */
    protected $order = array( 'SERVER', 'COOKIE', 'POST', 'GET', 'ENV' );

    /**
     * This is where the undefined variables should be stored in, so we can replace them later.
     * 
     * @var string 
     */
    protected $logfile;

    /**
     * Construct the logger. All undefined variables which are present in one of the superglobals will be stored in $logfile.
     * 
     * @param string $logfile 
     */
    public function __construct( $logfile ) {
        $this->logfile = $logfile;

        set_error_handler( array( $this, 'errorHandler' ), E_NOTICE );
    }

    /**
     * The error handler.
     * 
     * @param int $errno
     * @param string $errstr
     * @param string $errfile
     * @param int $errline
     * @return boolean
     */
    public function errorHandler( $errno, $errstr, $errfile, $errline ) {
        $matches = array( );
        if( preg_match( '~^Undefined variable: (.+)$~', $errstr, $matches ) !== 0 ) {
            foreach( $this->order as $superglobal ) {
                if( $this->hasSuperglobal( $superglobal, $matches[1] ) ) {
                    $this->globals[$errfile][] = array( $matches[1], $superglobal, $errline );
                    return true;
                }
            }
        }
    }

    /**
     * Called upon destruction of the object, and writes the undefined variables to the logfile.
     */
    public function __destruct( ) {
        $globals = array_merge( $this->globals, $this->existing( ) );

        file_put_contents( 
            $this->logfile,
            sprintf( "<?php\nreturn %s;\n", var_export( $globals, true ) )
        );
    }

    /**
     * Gets the undefined variables that were previously discovered, if any.
     * 
     * @return array
     */
    protected function existing( ) {
        if( file_exists( $this->logfile ) ) {
            $globals = require $this->logfile;
            return $globals;
        }
        return array( );
    }

    /**
     * Checks to see if the variable $index exists in the superglobal $superglobal.
     * 
     * @param string $superglobal
     * @param string $index
     * @return bool
     */
    protected function hasSuperglobal( $superglobal, $index ) {
        return array_key_exists( $index, $this->getSuperglobal( $superglobal ) );
    }

    /**
     * Returns the value of the superglobal. This has to be done on each undefined variable, because
     * the session superglobal maybe created *after* GlobalsLogger has been created.
     * 
     * @param string $superglobal
     * @return array
     */
    protected function getSuperglobal( $superglobal ) {
        $globals = array(
            'SERVER' => $_SERVER,
            'COOKIE' => $_COOKIE,
            'POST' => $_POST,
            'GET' => $_GET,
            'ENV' => $_ENV
        );
        return isset( $globals[$superglobal] ) ? $globals[$superglobal] : array( );
    }
}

/**
 * Lastly, instantiate the object, and store all undefined variables that exist
 * in one of the superglobals in a file called "undefined.php", in the same 
 * directory as this file.
 */
$globalslog = new GlobalsLog( __DIR__ . '/undefined.php' ); 
```

如果您要在请求的每个页面中包含此文件（可选地使用`php_prepend_file`），在单击整个应用程序后，您最终会在“undefined.php”中得到所有未定义的变量。

这是相当有趣的信息，因为您现在知道哪个未定义变量位于哪个文件中、在哪一行以及它实际存在于哪个超全局中。在确定超全局时，我记住了 Environment、Get、Post、Cookie 和 Server 的顺序，以决定哪个优先。

对于我们巧妙的小技巧的下一部分，我们必须遍历所有`undefined variable`发现通知的文件，并尝试将未定义的变量替换为其超全局变量。这实际上也很简单，我再次创建了一个脚本来执行此操作：

```
#!/usr/bin/php
<?php
/**
 * A simple script to replace non globals with their globals counterpart.
 */
$script = array_shift( $argv );

$logfile = array_shift( $argv );

$backup = array_shift( $argv ) === '--backup';

if( $logfile === false || !is_file( $logfile ) || !is_readable( $logfile ) ) {
    print "Usage: php $script <logfile> [--backup].\n";
    exit;
}

$globals = require $logfile;

if( !is_array( $globals ) || count( $globals ) === 0 ) {
    print "No superglobals missing found, nothing to do here.\n";
    exit;
}

$replaced = 0;

/**
 * So we have the files where superglobals are missing, but shouldn't be.
 * Loop through the files.
 */
foreach( $globals as $filename => $variables ) {
    if( !is_file( $filename ) || !is_writable( $filename ) ) {
        print "Can't write to file $filename.\n";
        exit;
    }

    foreach( $variables as $variable ) {
        $lines[$variable[2]] = $variable;
    }

    /**
     * We can write to the file. Read it in, line by line,
     * and see if there's anything to do on that line.
     */
    $fp = fopen( $filename, 'rw+' );
    $i = 0;
    $buffer = '';
    while( $line = fgets( $fp, 1000 ) ) {
        ++$i;
        if( array_key_exists( $i, $lines ) ) {
            $search = sprintf( '$%s', $lines[$i][0] );
            $replace = sprintf( "\$_%s['%s']", $lines[$i][1], $lines[$i][0] );
            $line = str_replace( $search, $replace, $line );
            $replaced ++;
        }
        $buffer .= $line;
    }

    if( $backup ) {
        $backupfile = $filename . '.bck';
        file_put_contents( $backupfile, file_get_contents( $filename ) );
    }

    file_put_contents( $filename, $buffer );
}

echo "Executed $replaced replacements.\n";
unlink( $logfile ); 
```

现在，只需调用此脚本即可。我已经对此进行了测试，这是我测试过的文件：

```
<?php

require 'logger.php';

$_GET['foo'] = 'This is a value';
$_POST['foo'] = 'This is a value';

$_GET['bar'] = 'test';

function foo( ) {
    echo $foo;
}

foo( );

echo $bar; 
```

有两个未定义的变量（`$foo`和`$bar`），它们都存在于一个（或多个）超全局变量中。在我的浏览器中访问该页面后，我的日志文件中有两个条目`undefined.php`；即 foo 和 bar。然后，我运行了`php globalsfix.php undefined.php --backup`给我以下输出的命令：

```
berry@berry-pc:/www/public/globalfix% php globalsfix.php undefined.php --backup
Executed 2 replacements. 
```

好奇结果如何？好吧，我也是。这里是：

```
<?php

require 'logger.php';

$_GET['foo'] = 'This is a value';
$_POST['foo'] = 'This is a value';

$_GET['bar'] = 'test';

function foo( ) {
    echo $_POST['foo'];
}

foo( );

echo $_GET['bar']; 
```

**万岁**！没有更多未定义的变量，这些是从正确的超全局变量中读取的。*大胖免责声明*：先创建备份。此外，这不会立即解决您的所有问题。如果你有一个`if( $foo )`语句，未定义的变量将确保相应的块永远不会被执行，这意味着很可能不是所有未定义的变量都会一次被捕获（但它会在第二次或第三次使用此脚本时解决该问题） . 尽管如此; 这是开始“清理”代码库的好地方。

另外，恭喜您阅读了我的全部答案。:)

# android - 当我打开我的 android 应用程序时出现错误

> ID：12163187
> 
> 赞同：1
> 
> 时间：2012-08-28T16:01:37.407
> 
> 标签：android

我有这种不稳定的情况。今天，我开发了所有编程语言的第一个程序，即 Hello World 作为应用程序。Hello World 这个词刚刚显示在应用程序上。在开发的第一个实例中，一切都非常好，甚至可以在模拟器上显示。但是几个小时后，当我重新启动系统时，该应用程序没有执行，并且显示一个错误，上面写着“解析 XML 构建时出错”。我真的很困惑这个错误是从哪里悄悄出现的，而在第一个实例中根本不存在。请帮助纠正这个错误。

# c# - 报告显示原始数据而不是来自 linq 查询的数据？

> ID：12163190
> 
> 赞同：0
> 
> 时间：2012-08-28T16:01:48.737
> 
> 标签：c#, winforms, c#-4.0, linq-to-sql, crystal-reports

我的报告不断显示我认为报告中员工字段中姓名的原始数据。sql 表具有正确的数据，但报告从来没有正确的名称。它始终显示 pk 为零的员工，而不是加入中的员工。我认为我正在显示来自`expenseHdr`s 和`expenseDtl`s 字段的正确数据，因为它在报告中看起来正确但是当我在调试时将鼠标悬停在查询上时，我看到的只是费用详细信息（我的报告中的行项目）但我对 Visual Studio 比较陌生.

基本上，我的查询和我的数据源之间似乎存在脱节，或者我的连接有问题。这是我从数据源获得的 sql 选择，下面是查询。任何帮助将不胜感激。

```
SELECT DISTINCT expenseHdr.rptNo,expenseHdr.description,expenseHdr.purpose,
expenseHdr.reimbursement, expenseHdr.department, expenseHdr.period, 
expenseDtl.expDesc, expenseDtl.expType, expenseDtl.expCost, 
expenseDtl.expDate, employees.name, expenseDtl.expNo,   
expenseDtl.location
FROM   (Intranet.dbo.expenseHdr expenseHdr INNER JOIN
Intranet.dbo.expenseDtl expenseDtl ON 
expenseHdr.rptNo=expenseDtl.rptNo) INNER JOIN Intranet.dbo.employees 
employees ON expenseHdr.empPk=employees.pk
ORDER BY expenseDtl.expNo 
```

```
private void launchReport(int pKReport)
{
    using (DataClasses1DataContext db = new DataClasses1DataContext())
    {
        var query = (from s in db.expenseHdrs
                         join d in db.expenseDtls on s.rptNo equals d.rptNo
                         where s.rptNo == pKReport
                         join g in db.employees on s.empPk equals g.pk
                         select new
                         {
                             s.period,
                             s.description,
                             s.department,
                             s.rptNo,
                             s.reimbursement,
                             s.purpose,
                             g.name,
                             d.expDate,
                             d.expType,
                             d.expDesc
                     });

        expenseReportMain cr1 = new expenseReportMain();

        cr1.FileName = @"\\SRV-NAS\Intranet\Reports\expenseReportMain.rpt";

        ConnectionInfo connectionInfo = new ConnectionInfo();
        connectionInfo.ServerName = "svr-sql";
        connectionInfo.DatabaseName = "intranet";
        connectionInfo.UserID = "sa";
        connectionInfo.Password = "******";

        SetDBLogonForReport(connectionInfo, cr1);
        cr1.SetDataSource(query);
        crystalReportViewer1.ReportSource = cr1;
    }
}

private void SetDBLogonForReport(ConnectionInfo connectionInfo,
                                 expenseReportMain reportDocument)
{
    Tables tables = reportDocument.Database.Tables;
    foreach (CrystalDecisions.CrystalReports.Engine.Table table in tables)
    {
        TableLogOnInfo tableLogonInfo = table.LogOnInfo;
        tableLogonInfo.ConnectionInfo = connectionInfo;
        table.ApplyLogOnInfo(tableLogonInfo);
    }
} 
```

我还根据请求编辑了一些示例数据：

```
expenseHdr             expenseDtl                employees

rptNo  empPk           expNo   rptNo             pK    name    userid
1      333             3       1                 333   Tom     tom.b
2      240             4       1                 240   Kelly   kelly.c
3      542             5       2                 542   Jean    jean.g
                       6       3 
```

因此，员工表中的任何信息都不会在报告中正确显示。其他两个表中的数据显示正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:42:06.763

这很正常，因为在您的 linq 处理中，您不仅有 join 运算符，而且选择了很多。

你的 sql 查询：你有三个连接的查询

你 linq 查询：你有很多选择，有两个选择，对于每个选择，你都有一个连接

所以它总是显示 pk 为零的员工而不是加入的员工是正常的，因为您没有使用费用 Hdrs 加入员工。

```
 var query = (from s in db.expenseHdrs
                     join d in db.expenseDtls on s.rptNo equals d.rptNo
                     where s.rptNo == pKReport
                     join g in db.employeess on g.pk equals s.empPk
                     select new
                     {
                        //Adjust your select

                     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:59:35.413

我记得通过在两个连接之后放置 where 来更改您的查询，因为前面的定义可能会影响：

```
var query = (from s in db.expenseHdrs
                         join d in db.expenseDtls on s.rptNo equals d.rptNo
                         where s.rptNo == pKReport
                         join g in db.employees on s.empPk equals g.pk
                         select new
                         {
                             s.period,
                             s.description,
                             s.department,
                             s.rptNo,
                             s.reimbursement,
                             s.purpose,
                             g.name,
                             d.expDate,
                             d.expType,
                             d.expDesc
                     }); 
```

至：

```
var query = (from s in db.expenseHdrs
                         join d in db.expenseDtls on s.rptNo equals d.rptNo
                         join g in db.employees on s.empPk equals g.pk
                         where s.rptNo == pKReport
                         select new
                         {
                             s.period,
                             s.description,
                             s.department,
                             s.rptNo,
                             s.reimbursement,
                             s.purpose,
                             g.name,
                             d.expDate,
                             d.expType,
                             d.expDesc
                     }); 
```

将解决您的问题，因为在 sql 中您需要在 where 子句之前加入所有表。

# php - php tcpdf 不显示来自 strftime 的重音字符

> ID：12163194
> 
> 赞同：1
> 
> 时间：2012-08-28T16:02:00.357
> 
> 标签：php, localization, locale, tcpdf, strftime

所以我正在设置语言环境

```
setlocale(LC_TIME, "fr_FR"); 
```

然后像这样使用 strftime

```
$membershipStartDate = strftime('%A le %e %B %G', strtotime($_POST['membershipStartDate'])); 
```

这是有效的，但法语中八月的拼写是错误的。当它应该是“août”时，它会将 %B 输出为“aot”

有人有什么想法吗？

编辑：看起来这可能是 TCPDF 的问题。如果我在字符串中使用带有重音符号的 Write() 方法，它就可以工作。但是如果我使用 strftime() 函数，这些重音不会出现。在 TCPDF 之外使用 strftime() 也可以。

```
$pdf->Write(0,'août','',0,'L',false,0,false,true,0); // accents output correctly
$pdf->Write(0,$membershipStartDate,'',0,'L',false,0,false,true,0); // doesn't show accents 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:03:42.420

在 utf8_encode() 中包装 strftime() 解决了它。不确定这是 strftime() 还是 TCPDF 的错误。

```
$membershipStartDate = utf8_encode(strftime('%A le %e %B %G', strtotime($_POST['membershipStartDate']))); 
```

# asp.net - IIS 7.5 上非 asp.net 文件的授权/身份验证

> ID：12163196
> 
> 赞同：0
> 
> 时间：2012-08-28T16:02:07.660
> 
> 标签：asp.net, asp-classic, iis-7.5

我一直在 web.config 中使用下面的代码作为保护多个域用户的管理站点的 asp.net 文件的简单方法。我希望能够使用这种简单的方法来保护 IIS 7.5 上的经典 asp 和其他文件。这样我就可以使用 XCOPY 类型部署，而不必在 NTFS 或 IIS 中设置权限。

asp.net 版本为 4.0，App Pool 运行在 32 位模式。我发布了这个问题，因为我已经进行了大量的研究，并且在 IIS 7.5 中发现了很少的信息。

此 web.config 代码保护 asp.net 文件，但保护其他文件的最佳做法是什么？

```
<system.web>
  <authorization>
    <allow users="domain\user1,domain\user2"/>
    <deny users="*"/>
  </authorization>
</system.web> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:12:35.147

AFAIK 没有类似的 asp classic 机制（没有 web.config htacesss 列表等），但有如此 StackOverflow 帖子[.htaccess 或 .htpasswd 在 IIS 上的等效项中所述的解决方法？](https://stackoverflow.com/questions/257936/htaccess-or-htpasswd-equivalent-on-iis).

# php - 按类别名称查找或制作额外表格

> ID：12163211
> 
> 赞同：0
> 
> 时间：2012-08-28T16:02:42.470
> 
> 标签：php, mysql

我有一个数据库，其中有一个网站地址列表，每个地址都有一个类别。我拥有的表字段中`site_id, site_url and site_category`。在`site_category`我有简单的英语类别，例如：电影，教程等......

我想知道什么对速度更好。要这样或有两个表：

网站：`site_id, site_url and site_category`。

分类：`category_id, category_name`

而在`site_category`“网站”表中只放`category_id`.

我正在用 PHP 创建一个目录，并且想知道，在想要查询的那一刻，什么更好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:10:19.280

看起来您正在尝试以良好的[规范化](http://en.wikipedia.org/wiki/Database_normalization)数据库设计为代价来预先优化您的网站。我的建议：设置两个不同的表。一个用于类别。另一个用于网站。然后通过类别 ID 将两者联系起来。这样，如果您需要更新类别的名称，您就不必更新网站表中的多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:10:53.360

你的第二种方法更健壮。如果您想更改类别的名称，您只需要更改一次。

此外，在您希望在网站上拥有多个类别的情况下，它为您提供了更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:13:40.620

与几乎所有 SQL 一样，它实际上取决于一大堆因素。

通常，针对单个表的查询可能会比针对两个表的查询执行得更好。

* * *

使用相对较短的“category_name”值（例如 8 个字符或更少），并使用适当的索引 category_name 作为前导列，您将获得良好的查询性能，例如：

```
SELECT * FROM websites WHERE category_name = 'movies' ORDER BY category 
```

* * *

为获得最佳性能，请考虑`ENUM`category_name 的列。但这意味着 for 的值`category_name`将作为列定义的一部分“固定”。

如果您需要获取不同 category_name 值的列表（例如，对于下拉列表框），则首选单独的表（例如示例中的 Categories 表）。

最大的问题是“类别”是否是您系统中的实体。也就是说，是一个“类别”，一个人、地点、事物、概念或事件，对业务很重要，可以唯一标识，并且您需要存储有关信息。

如果是这样，它是一个“实体”，你想为它创建一个单独的表。

* * *

您需要考虑的一个更大的问题是网站和类别之间的关系。一个网站可以有多个类别吗？

如果是这样，那么您需要考虑一个关系表，该表将网站和类别相关联。例如：

```
 website_category (website_id, category_id) 
```

在您的数据库设计中适当地表示实体之间的“实体”和“关系”至关重要。在进行调整以优化性能之前，请确保您首先做到了这一点。

# android - ViewPager 错误：无法启动活动组件

> ID：12163212
> 
> 赞同：0
> 
> 时间：2012-08-28T16:02:47.270
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-xml

**ViewPagerFragment.java**

```
package nsixty.crew.app;

import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

public class ViewPagerFragment extends FragmentActivity {

    private PagerAdapter mPagerAdapter;

    ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.lcmeter);

        this.initialisePaging();
    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();

        fragments
                .add(Fragment.instantiate(this, LoginActivity.class.getName()));
        fragments.add(Fragment.instantiate(this, send.class.getName()));
        this.mPagerAdapter = new PagerAdapter(
                super.getSupportFragmentManager(), fragments);

        pager = (ViewPager) findViewById(R.id.viewpager);
        pager.setAdapter(this.mPagerAdapter);

    }

    public class PagerAdapter extends FragmentPagerAdapter {

        private List<Fragment> fragments;

        public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public int getCount() {
            return this.fragments.size();
        }

        @Override
        public Fragment getItem(int position) {
            return this.fragments.get(position);
        }

    }

} 
```

**lcmeter.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+android:id/viewpager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**Androidmanifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nsixty.crew.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <support-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="false" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/icon87"
        android:label="@string/app_name" >
        <activity android:name="ViewPagerFragment" >

            <!--
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Dialog"
            -->

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".main" >
            <intent-filter>
                <action android:name="nsixty.crew.app.main" />

                <category
                    android:name="android.intent.category.DEFAULT"
                    android:screenOrientation="portrait" />
            </intent-filter>
        </activity>
        <activity
            android:name=".play"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="nsixty.crew.app.play" />

                <category
                    android:name="android.intent.category.DEFAULT"
                    android:screenOrientation="landscape" />
            </intent-filter>
        </activity>
        <activity
            android:name=".secondView"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="nsixty.crew.app.SECONDVIEW" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".recorder"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="nsixty.crew.app.RECORD" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".send"
            android:label="@string/app_name" >

            <!-- android:theme="@android:style/Theme.Dialog" -->
            <intent-filter>
                <action android:name="nsixty.crew.app.SHARE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".gallery"
            android:theme="@android:style/Theme.Dialog" >
            <intent-filter>
                <action android:name="nsixty.crew.app.gallery" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".RegisterActivity"
            android:theme="@android:style/Theme.Dialog" >
        </activity>
        <activity
            android:name=".media"
            android:theme="@android:style/Theme.Dialog" >
            <intent-filter>
                <action android:name="nsixty.crew.app.media" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".LoginActivity" >
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.WRITE_SETTINGS" >
    </uses-permission>
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />

    <uses-feature android:name="android.hardware.camera" />

</manifest> 
```

**日志猫**

```
08-28 11:28:34.149: E/AndroidRuntime(18946): FATAL EXCEPTION: main
08-28 11:28:34.149: E/AndroidRuntime(18946): java.lang.RuntimeException: Unable to start activity ComponentInfo{nsixty.crew.app/nsixty.crew.app.ViewPagerFragment}: java.lang.ClassCastException: nsixty.crew.app.LoginActivity
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1664)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1680)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.os.Looper.loop(Looper.java:130)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread.main(ActivityThread.java:3703)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at java.lang.reflect.Method.invokeNative(Native Method)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at java.lang.reflect.Method.invoke(Method.java:507)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at dalvik.system.NativeStart.main(Native Method)
08-28 11:28:34.149: E/AndroidRuntime(18946): Caused by: java.lang.ClassCastException: nsixty.crew.app.LoginActivity
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at nsixty.crew.app.ViewPagerFragment.initialisePaging(ViewPagerFragment.java:35)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at nsixty.crew.app.ViewPagerFragment.onCreate(ViewPagerFragment.java:28)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-28 11:28:34.149: E/AndroidRuntime(18946):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1628)
08-28 11:28:34.149: E/AndroidRuntime(18946):    ... 11 more 
```

如果我在没有 ViewPager 的情况下正常运行应用程序，我的 LoginActivity 类和发送类工作正常。所以我没有在这里添加这些类的代码。我只是想让我的应用程序更时尚这就是为什么我使用视图寻呼机谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:05:22.307

我认为 LoginActivity 是扩展 Activity 类而不是 Fragment 类。这就是你得到classcastException的原因。该类需要是一个片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:10:38.313

以下是清单文件中的条目。

```
<activity android:name=".LoginActivity" > 
```

您不能从 Activity 扩展 LoginActivity 并实例化它..它必须扩展 Fragment 。

# asp.net - 从数据库中多选列表框

> ID：12163214
> 
> 赞同：0
> 
> 时间：2012-08-28T16:02:53.287
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在开发一个 mvc .net Web 应用程序，并且正在使用实体框架。在我的模型中，我有一个名为“utisateur”（用户）的实体，每个用户都有一个或多个监督他的用户。我想要做的是生成一个包含所有用户列表的多选列表框，以便选择新用户的主管。

我尝试这样做，但在填写创建新用户的表单并提交后，我收到此错误：对象引用未设置为对象的实例，但是我得到了选择列表并从中选择了项目。（空对象是“model.selectedusers”但我不知道为什么它是空的！）

这是我的模型课：

```
public class util 
{
    public util()
    {
        user = new utilisateur();
        listesups = Getutilisateurs(null);
    }
    public utilisateur user { get; set; }
    public int[] selectedusers;
    public string nom_role { get; set; }
    public MultiSelectList listesups { get; set; } 

    public MultiSelectList Getutilisateurs(int[] selectedValues)
    {
        var db = new BDGestionEntities();
        List<utilisateur> utilisateurs = db.utilisateurs.ToList();
        return new MultiSelectList(utilisateurs, "id", "login", selectedValues);
    }
} 
```

这是我的控制器：

```
public ActionResult Create2()
    {
        util u = new util();
        u.listesups = new MultiSelectList (db.utilisateurs, "id", "login");
        return View(u);
    }
    [HttpPost]
    public ActionResult Create2(util model)
    {
        utilisateur u = new utilisateur();
        try
        {
            foreach (var selecteduse in model.selectedusers)
            {
                utilisateur utilisateur = db.utilisateurs.Where(c => c.id == selecteduse).FirstOrDefault();
                u.superieur.Add(utilisateur);
            }
        }
        catch(Exception ex)
        {
            Logger.Error(ex.Message, "Erreur ajout supérieurs");
        }
        u.nom = model.user.nom;
        u.prenom = model.user.prenom;
        u.solde_conge = model.user.solde_conge;
        u.email = model.user.email;
        u.login = model.user.login;
        u.pwd = model.user.pwd;
        role role = new role();
        role = db.roles.Where(c => c.nom_role == model.nom_role).FirstOrDefault();
        u.role = role;
        db.utilisateurs.AddObject(u);
        db.SaveChanges();
        ViewBag.id_role = new SelectList(db.roles, "id", "nom_role", model.user.id_role);
        return RedirectToAction("index");

    } 
```

这是包含选择列表的视图部分

```
@Html.ListBoxFor(model => model.selectedusers, Model.listesups) 
```

这里是我在提交表单之前得到的，你可以在这里看到视图包含选择列表，但未保存选定的项目

![在此处输入图像描述](../Images/319209a36ff3768f8d7a4578f6c6ed21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:08:47.723

默认情况下，在 MVC 3 中，没有内置支持将多个项目（或一个或多个项目）从 View 中包含到 viewModel 中。这就是您丢失所选值的原因。

有很多方法可以实现，但更简单的一种是修改方法的签名以包含表单集合并查询列表框的值。您的`Create2`方法应如下所示：

```
 [HttpPost]
        public ActionResult Create2(FormCollection collection,util model)
        {
           //load selected users into a variable
           var selUsers= collection["selectedusers"];

          //do whatever you want to do with the selected users. 
```

# java - rmi 示例 compute.task

> ID：12163220
> 
> 赞同：0
> 
> 时间：2012-08-28T16:03:04.610
> 
> 标签：java, oracle, rmi

我是 RMI/JAVA 新手，正在使用 Oracle 网站 [http://docs.oracle.com/javase/tutorial/rmi/client.html上的 rmi 教程](http://docs.oracle.com/javase/tutorial/rmi/client.html)

我能够跟踪整个事情，直到它来到 Client.pi 类。第一行是导入任务接口 import compute.Task 的代码

我的问题是，Java 怎么知道从哪里获取任务接口？它是服务器上的非远程接口，所以我对如何导入它有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:26:44.393

您将提供任务接口以及远程接口（计算）作为客户端 API jar 的一部分。

通常，在设计任何类型的 RMI 服务器系统时，您最终会得到 2 个模块，即服务器 API 和服务器实现（这将取决于 API）。然后，您将向正在为您的服务器构建 RMI 客户端的任何人提供服务器 API jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:31:08.510

该`Task`接口对客户端和服务器代码都是通用的，因此客户端和服务器中都需要有副本。

`Pi`实施需要对`Task`客户可用。理想情况下，服务器不应该知道客户端的任务，所以不应该有自己的副本。因此，客户端上的 RMI 使用可以加载代码的 URL 来注释对象流中的类。服务器使用这个注解来动态加载实现类，这个实现类可能是在服务器实例启动后编写的。

虽然这是一个巧妙的聚会技巧，但要安全地加载远程代码可能会很棘手。设置`java.rmi.server.useCodebaseOnly`为`true`禁用该功能，我强烈推荐。

# python - Python - 评估字符串中的数学表达式

> ID：12163224
> 
> 赞同：8
> 
> 时间：2012-08-28T16:03:25.800
> 
> 标签：python, string, math, expression, eval

我有一个关于在字符串中评估数学表达式的问题。例如我的字符串如下：

```
my_str='I have 6 * (2 + 3) apples' 
```

我想知道如何评估这个字符串并得到以下结果：

```
'I have 30 apples' 
```

有没有办法做到这一点？

提前致谢。

PS python 的`eval`功能在这种情况下没有帮助。尝试使用该`eval`函数进行评估时，它引发了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:25:04.630

这是我的尝试：

```
>>> import string
>>> s = 'I have 6 * (2+3) apples'
>>> symbols = '^*()/+-'
>>> formula = [(x,s.index(x)) for x in s if x in string.digits+symbols]
>>> result = eval(''.join(x[0] for x in formula), {'__builtins__':None})
>>> s = s[:formula[0][1]] + str(result) + s[formula[-1][1]+1:]
>>> s
'I have 30 apples' 
```

笔记：

这很简单，它不会处理复杂的方程——比如那些有平方根、pi 等的方程，但我相信它符合问题所在的精神。有关*真正*可靠的答案，请参阅[jeffery_the_wind 发布](https://stackoverflow.com/questions/2371436/evaluating-a-mathematical-expression-in-a-string)的问题；但我相信对于这种简单化的案例来说，这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:43:18.397

有时最好简化问题，而不是提出复杂的解决方案。您可能希望通过像这样提供代码来简化问题

```
my_str='I have {6 * (2 + 3)} apples' 
```

这样，您可以使用简单的正则表达式解析它并评估里面的内容。否则，您将面临很多复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:12:29.843

这是一个非常棘手的问题，一般来说几乎不可能解决。然而，这里有一个简单的方法来解决与示例输入一起工作的问题。

*第 1 步——清理输入。一般来说，这是最难做的部分。基本上，您需要一种方法来从字符串中提取单个数学表达式，而不会破坏它。这里可以使用一个简单的正则表达式：

```
sanitized = re.sub(r'[a-zA-Z]','',my_str).strip() 
```

*步骤 2 - 使用评估`eval`：

```
value = eval(sanitized, {'__builtins__':None}) 
```

*第 3 步——替补

```
new_string = my_str.replace(sanitized, str(value)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:49:06.260

感谢大家的帮助。实际上，与我在实际任务中的示例相比，我提供的示例非常简单。我从文件中读取这些字符串，有时可以有这样的视图：

```
my_str='ENC M6_finger_VNCAPa (AA SYZE BY (0.14*2)) < (0.12 + 0.07) OPPOSITE REGION' 
```

数学方程式很简单，但可以在一个字符串中多次出现，应单独评估。

所以我写了一个示例代码，它能够处理这种情况：也许它不是很好，但解决问题：

```
def eval_math_expressions(filelist):
        for line in filelist:
              if re.match('.*[\-|\+|\*|\/].*',line):
                        lindex=int(filelist.index(line))
                        line_list=line.split()
                        exp=[]
                        for word in line_list:
                                if re.match('^\(+\d+',word) or re.match('^[\)+|\d+|\-|\+|\*|\/]',word):
                                        exp.append(word)
                                else:
                                        ready=' '.join(exp)
                                        if ready:
                                                eval_ready=str(eval(ready))
                                                line_new=line.replace(ready,eval_ready)
                                                line=line_new
                                                filelist[lindex]=line
                                        exp=[]
        return filelist 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-09T15:22:06.123

使用 f 字符串或切片。

F弦：`f'I have {str(6*(2+3))} apples'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T16:38:51.213

对于不使用 eval 的解决方案，这就是我要做的。首先在字符串中查找所有数学表达式，我将其定义为包含空格、括号、数字和运算的字符串，然后去除所有为空格的匹配项：

```
>>> import re
>>> my_str = 'I have 6 * (2 + 3) apples'
>>> exprs = list(re.finditer(r"[\d\.\s\*\+\-\/\(\)]+", my_str))
>>> exprs = [e for e in exprs if len(my_str[e.start():e.end()].strip()) > 0] 
```

接下来，使用[该问题](https://stackoverflow.com/a/2371789/624900)`NumericStringParser`中的类评估表达式，该类使用[pyparsing](http://pypi.python.org/pypi/pyparsing/)：

```
>>> nsp = NumericStringParser()
>>> results = [nsp.eval(my_str[e.start():e.end()]) for e in exprs]
>>> results
[30.0] 
```

然后，要将结果替换回表达式，请按表达式的起始索引对表达式进行反向排序并将它们放回原始字符串中：

```
>>> new_str = my_str
>>> for expr, res in sorted(zip(exprs, results), key=lambda t: t[0].start(), reverse=True):
...     new_str = new_str[:expr.start()] + (" %d " % res) + new_str[expr.end():]
... 
>>> new_str
'I have 30 apples' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T16:48:36.217

我的选择：

```
>>> import re
>>> def calc(s):
...     val = s.group()
...     if not val.strip(): return val
...     return " %s " % eval(val.strip(), {'__builtins__': None})
>>> re.sub(r"([0-9\ \.\+\*\-\/(\)]+)", calc, "I have 6 * (2 + 3 ) apples")
'I have 30 apples' 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-12-16T16:11:10.433

*[我知道这是一个老问题，但值得指出新的有用解决方案，因为它们弹出]*

从 python3.6 开始，这个功能现在被**内置到语言中**，被称为**“f-strings”**。

**请参阅：[PEP 498 -- 文字字符串插值](https://www.python.org/dev/peps/pep-0498/)**

例如（注意**`f`**前缀）：

```
f'I have {6 * (2 + 3)} apples'
=> 'I have 30 apples'
color = 'green'
f'I have {6 * (2 + 3)} {color} apples'
=> 'I have 30 green apples' 
```

# ios - 未创建数据库

> ID：12163230
> 
> 赞同：1
> 
> 时间：2012-08-28T16:03:50.667
> 
> 标签：ios, sqlite, nsfilemanager

如果尚未创建数据库，我有一段代码可以添加数据库。这是代码

```
-(void) checkAndCreateDatabase{
  // Check if the SQL database has already been saved to the users phone, if not then copy it over

  NSString *path=[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

  NSString *database_path=[path stringByAppendingPathComponent:@"Favorite_Database.sqlite"];

  // Create a FileManager object, we will use this to check the status
  // of the database and to copy it over if required

  // Check if the database has already been created in the users filesystem
  BOOL success = [[NSFileManager defaultManager] fileExistsAtPath:database_path];

  // If the database already exists then return without doing anything
  if(success) {
      //[fileManager removeFileAtPath:databasePath handler:nil];   
      return;
  }
  // If not then proceed to copy the database from the application to the users filesystem

  // Get the path to the database in the application package
  NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Favorite_Database.sqlite"];

  // Copy the database from the package to the users filesystem
  [[NSFileManager defaultManager] copyItemAtPath:databasePathFromApp toPath:database_path error:nil];

} 
```

当它到达这条线`BOOL success = [[NSFileManager defaultManager] fileExistsAtPath:database_path];`时，它只是跳过，其余的继续前进。我没有进入 if 语句。我需要它来检查，所以我可以添加这个数据库

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:07:27.617

注销路径，因此如果您在模拟器中运行，您可以通过在终端中转到该路径来查看文件是否实际存在。您还可以使用 sqlite cmdline 来检查 db 文件。

这是我的一个执行类似任务的示例的代码。

它（1）检查数据库是否存在，如果不存在，（2）它从包中复制它并（3）打开它。

希望能帮助到你 ...

```
- (BOOL)ensureDatabaseOpen: (NSError **)error
{
    // already created db connection
    if (_contactDb != nil)
    {
        return YES;
    }

    NSLog(@">> ContactManager::ensureDatabaseOpen");    
    if (![self ensureDatabasePrepared:error])
    {
        return NO;
    }

    const char *dbpath = [_dbPath UTF8String]; 
    if (sqlite3_open(dbpath, &_contactDb) != SQLITE_OK &&
        error != nil)
    {
        *error = [[[NSError alloc] initWithDomain:@"ContactsManager" code:1000 userInfo:nil] autorelease];
        return NO;
    }

    NSLog(@"opened");

    return YES;
}

- (BOOL)ensureDatabasePrepared: (NSError **)error
{
    // already prepared
    if ((_dbPath != nil) &&
        ([[NSFileManager defaultManager] fileExistsAtPath:_dbPath]))
    {
        return YES;
    }

    // db in main bundle - cant edit.  copy to library if !exist
    NSString *dbTemplatePath = [[NSBundle mainBundle] pathForResource:@"contacts" ofType:@"db"];
    NSLog(@"%@", dbTemplatePath);

    NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) lastObject];
    _dbPath = [libraryPath stringByAppendingPathComponent:@"contacts.db"];

    NSLog(@"dbPath: %@", _dbPath);

    // copy db from template to library
    if (![[NSFileManager defaultManager] fileExistsAtPath:_dbPath])
    {
        NSLog(@"db not exists");
        NSError *error = nil;
        if (![[NSFileManager defaultManager] copyItemAtPath:dbTemplatePath toPath:_dbPath error:&error])
        {
            return NO;
        }

        NSLog(@"copied");
    }    

    return YES;    
} 
```

# yaml - 设置默认 YML 值

> ID：12163233
> 
> 赞同：0
> 
> 时间：2012-08-28T16:04:12.243
> 
> 标签：yaml

我有一个包含许多表单条目的 yaml 文件

```
item1:
  name: item1
  stem: item1

items2:
  name: item2
  stem: item2 
```

由于每条记录的信息都遵循相同的形式，因此有没有办法将其干燥？

我想以某种方式指定无论我如何命名条目，它也应该用于名称和词干。

我知道我可以标记条目`&tag`并在其他条目中引用它们，`<<: *tag`但这是针对实际内容而不是表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:42:02.347

据我所知，YAML 没有用于循环和生成 1.2 规范的动态内容的设施：[http](http://www.yaml.org/spec/1.2/spec.html) ://www.yaml.org/spec/1.2/spec.html 。它只是一个序列化数据的标准。但是，如果您的目标是在 YAML 文件中生成不重复的类似对象，则可以使用 YAML 的实现，并以编程语言（例如 Ruby）返回一个数组。

YAML 的 Ruby 实现提供“对来自 Ruby 中可用的任何类的序列化对象的通用支持。”：[http](http://www.yaml.org/YAML_for_ruby.html#objects) ://www.yaml.org/YAML_for_ruby.html#objects这意味着您可以在 Ruby 中创建一个包含您的条目的 Array 对象通过创建自定义类在 YAML 文件中重复。

下面的示例类将生成`x`数组中的项目，如 YAML 键所定义`items`。

像这样构造 YAML 文件：

```
--- !ruby/object:Foo
  items: 2 
```

*注意*：要调用的类名在名字上指定，使用在以下位置定义的 Object 语法：[http ://www.yaml.org/YAML_for_ruby.html#objects](http://www.yaml.org/YAML_for_ruby.html#objects)

在 Ruby 中，定义你的类，并加载你的 YAML 文件进行解析：

```
class Foo
  attr_accessor :items

  def initialize(items)
    @items = items
  end

  def generate
    x = 1
    result = []
    while x < @items do
      result.push({ "item#{x}" => {"name" => "item#{x}", "stem" => "item#{x}"} })
      x+=1
    end
    result
  end
end

foo = YAML.load_file('/path/to/yaml.yml') # => #<Foo:0xa1ff694 @items=2>

foo.generate # => [{"item1"=>{"name"=>"item1", "stem"=>"item1"}}, {"item2"=>{"name"=>"item2", "stem"=>"item2"}}] 
```

YAML 文件是在定义我们的类之后加载的`Foo`。`Foo`在初始化时接受一个整数，这是我们将在`generate`调用时创建的项目数。`generate`然后循环多次，并将新对象推送到数组，然后返回。

在此示例中，您必须显式调用`generate`，因为您不能从`initialize`.

我不确定这是否是您正在寻找的答案，但通过外包自定义类中对象的循环和创建，这可能是保持 YAML 结构干燥的一种方法。

这种方法也可以用于其他语言，具体取决于它们的 YAML 实现是否支持自定义序列化类。有关其他语言实现库，请参见[http://yaml.org/ 。](http://yaml.org/)

# python - Python，对一大组变量进行分组

> ID：12163237
> 
> 赞同：1
> 
> 时间：2012-08-28T16:04:24.553
> 
> 标签：python, variables, sum

我有以下具有不同值的示例脚本，我的实际 xy 列表要大得多：

xy1 = value1 xy2
= value2
xy3 = value3
xy4 = value4
xy5 = value5
xy6 = value6
xy7 = value7
xy8 = value8
xy9 = value9

xytotal = sum((xy1, xy2, xy3, xy4, xy5, xy6, xy7, xy8, xy9))

当我有数千个这些 xy 变量时，就会出现问题，将它们全部添加到 sum 函数中变得乏味。

现在有没有办法告诉python为每个不同的xy（xy1，xy2，xy3等......）求和所有xy值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:05:55.573

不要使用单独的变量。使用列表，如果您的数据足够复杂，可能会与其他数据结构混合使用。

而当我们这样做的时候：[变量名不是 data](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)。假设 Python 把你的变量名扔掉了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-02T18:50:35.153

在回答您的问题时，是的，您可以在脚本中声明一堆 xy 变量并将它们相加：

```
xy1 = 1
xy2 = 2
xy3 = 3
xy4 = 4
xy5 = 5
xy6 = 6
xy7 = 7
xy8 = 8
xy9 = 9
xy10 = 10

cached = locals()
xytotal = sum(cached[k] for k in locals() if k.startswith('xy')) 
```

你为什么要这样做...`¯\_(ツ)_/¯`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:40:35.317

```
all_xy = [value1, value2, value3, ...]
# Note that xy_all[n-1] = valuen

xy_total = sum(all_xy) 
```

如果你想通过 using 来获取它们`all_xy[n] = valuen`，那么你可以使用`all_xy = [0, value1, value2, value3, ...]`.

在 Python 中使用列表结构绝对比使用变量名更可取，因为您可以轻松编写列表推导式，例如：

```
positive_xy = [ xy for xy in all_xy if xy>0 ]
positive_xy_total = sum(positive_xy) 
```

*另一种选择是使用字典。* .

另一个需要注意的原因是，如果您正在签`startswith('xy')`入`locals()`，您可以轻松地尝试对“意外”变量求和，例如一个函数，这会导致 Python 异常。

# php - Symfony 2 - 服务动态导入

> ID：12163238
> 
> 赞同：3
> 
> 时间：2012-08-28T16:04:25.537
> 
> 标签：php, symfony, yaml

我的**参数**定义为：

```
parameters:
    config1:
        title: Title 1
        data_proc: getDataOne
        options: [things, stuff]
    config2:
        title: Title 2
        data_proc: getDataTwo
        options: [things, stuff]
#... 
```

**服务**定义为

```
my_service:
    class: Me\MyBundle\Services\MyService
    arguments:
        - @security.context
        - @doctrine.dbal.my_connection
        - %config% # the parameter that I'd like to be dynamic 
```

**控制器**喜欢

```
class ProduitController extends Controller
{
    public function list1Action()
    {
        $ssrs = $this->get('my_service'); // with config1 params
        # ...
    }
    public function list2Action()
    {
        $ssrs = $this->get('my_service'); // with config2 params
        # ...
    }
    #...
} 
```

几个控制器使用`my_service`.
我`list1Action()`应该`my_service`通过只注入`config1`参数来调用

我怎样才能做到这一点而不必定义与控制器一样多的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:09:38.147

定义具有不同参数但具有相同类的两个服务并获取一个或另一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T08:00:31.080

在你的`Me\MyBundle\Services\MyService`你可以定义公共方法，它将设置新的参数（`setParameters($parameters)`例如）。然后在你的控制器中你可以这样做：

```
class ProduitController extends Controller
{
    public function list1Action()
    {
        $config = $this->container->getParameter('config1');
        $ssrs = $this->get('my_service')->setParameters($config);
    }

    public function list2Action()
    {
        $config = $this->container->getParameter('config2');
        $ssrs = $this->get('my_service')->setParameters($config);
    }
} 
```

这将是一个最佳解决方案。

当然，你可以重写一些核心类并实现自动注入，增加数字部分，但这真的值得花时间吗？

# ios - AVAudioRecorder 录制 AAC/m4a

> ID：12163240
> 
> 赞同：12
> 
> 时间：2012-08-28T16:04:43.257
> 
> 标签：ios, ipad, audio, xamarin.ios, avaudiorecorder

我正在尝试使用 AVAudioRecorder 在设备上录制音频。该文件被传输到网络服务器，我想在网络浏览器中播放生成的文件..

我在设备上尝试了各种设置组合...似乎没有将文件编码为正确的 AAC 格式。

QuickTime 说它不知道如何播放这个文件。

示例代码

```
 private void InitializeRecordingSession() {
         string fileName = string.Format("{0}.m4a", Guid.NewGuid());
         string tmpdir = Environment.GetFolderPath(Environment.SpecialFolder.Personal) + "/audio";
          if (!Directory.Exists(tmpdir))
               Directory.CreateDirectory(tmpdir);
          audioFilePath = Path.Combine(tmpdir, fileName);

          Console.WriteLine("Audio File Path: " + audioFilePath);

          var url = NSUrl.FromFilename(audioFilePath);
          var settings = new AVAudioRecorderSettings() {
               AudioFormat = AudioFormatType.MPEG4AAC,
               SampleRate = 44100,
               NumberChannels = 1,
               AudioQuality = AVAudioQuality.High,    
          };

          recorder = AVAudioRecorder.ToUrl(url, settings, out error);

          //Set Recorder to Prepare To Record
          recorder.PrepareToRecord();  
     } 
```

**编辑**- 通过将此代码放在该行之前

```
recorder = AVAudioRecorder.ToUrl(url, settings, out error); 
```

一切正常。

```
NSError error;    
AVAudioSession audioSession = AVAudioSession.SharedInstance();
audioSession.SetCategory(AVAudioSession.CategoryRecord, out error);
audioSession.SetActive(true, out error); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-02T21:34:28.270

对于硬件加速编码器，在任何给定时间只能激活一个会话。这意味着，对于 AAC，它将在模拟器（使用软件编码器）中工作，但可能在设备（使用硬件编码器）上失败，除非您的应用程序激活`AVAudioSession`.

我还尝试使用 AVAudioRecorder 以 AAC 编码格式录制音频，最好是在 .m4a 文件中。我在做这件事时玩得很开心。我很快就能在核心音频文件 (.caf) 中将代码录制到 AAC，但我无法让 AVAudioRecorder 正确格式化 .m4a。我正要使用较低级别的音频单元 API 重写我的应用程序中的录制代码，但我把它放在次要位置并添加到代码中以处理共享音频会话。设置完成后，我返回并尝试另存为 .m4a，它就可以正常工作。

这是一些示例代码：

```
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPaths objectAtIndex:0];
NSURL *tmpFileUrl = [NSURL fileURLWithPath:[docsDir stringByAppendingPathComponent:@"tmp.m4a"]];
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                        [NSNumber numberWithFloat:16000.0], AVSampleRateKey,
                        [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                        nil];
NSError *error = nil;
AVAudioRecorder *recorder = [[AVAudioRecorder alloc] initWithURL:tmpFileUrl settings:recordSettings error:&error];
[recorder prepareToRecord];

AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryRecord error:nil];
[session setActive:YES error:nil];

[recorder record]; 
```

然后结束我使用的录音：

```
[recorder stop];
AVAudioSession *session = [AVAudioSession sharedInstance];
int flags = AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation;
[session setActive:NO withFlags:flags error:nil]; 
```

然后可以随意使用“tmpFileUrl”处的文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T08:02:30.807

iOS SDK 显然是愚蠢的。将格式 ID 键设置`kAudioFormatMPEG4AAC`为 不足以使其实际编码文件；在 QuickTime 中它会播放，但在它的属性中你只会看到`AAC`而没有进一步的细节。将输出文件扩展名更改为`m4a`应该有助于解决问题并使其应用正确的编码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T19:27:43.110

关于的提示`AVAudioSession`非常有帮助！

由于`setActive:withFlags:error:`在 iOS 6.0 中已弃用，停止音频会话的代码应调整为：

```
AVAudioSession *session = [AVAudioSession sharedInstance];
int flags = AVAudioSessionSetActiveOptionNotifyOthersOnDeactivation;
[session setActive:NO withOptions:flags error:nil]; 
```

# gcc - 在链接的覆盖部分复制库

> ID：12163241
> 
> 赞同：2
> 
> 时间：2012-08-28T16:04:46.673
> 
> 标签：gcc, linker, gnu, ld

在带有 GNU 工具链的嵌入式系统中，当闪存（代码所在的位置）不可用时，我想使用链接处的 OVERLAY 部分从 RAM 执行代码。

我的问题是当覆盖层（在 RAM 中）中的 C 函数使用库中的函数时（例如：来自 libgcc 的 div/mod/...）。libgcc 链接在 flash 中的主要代码部分，它很忙。

有没有办法防止这种 RAM 覆盖和闪存之间的交叉引用（以及如何复制库代码？）？

干杯!

# c++ - 关于模板类的 C++ 动态转换

> ID：12163244
> 
> 赞同：17
> 
> 时间：2012-08-28T16:04:58.047
> 
> 标签：c++, templates, dynamic, casting

我有基类A，B类继承自A，作为模板类的C类继承自A。D类继承自C。关系如下：

```
 A
       / \   
      B   C (template class)
           \
            D 
```

我可以使用 D 对象 D1 创建一个 A 对象 O1，然后我想将 O1 动态转换为 C 类型对象 C1。但我发现它失败了。我的问题是为什么这个过程会失败？

然后我使用 static_cast 从 D 对象 D1 创建 C 类型对象 C2，并检查 C2 是否具有来自 D2 的正确值。使用static_cast从D类型转换为C类型总是成功吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T16:08:35.293

好吧，既然`C`是一个模板，它就不是一种类型，不能用作转换的目标（既不是动态的也不是静态的），你不能从它派生。您需要*实例化*类模板。生成的类*可以*在强制转换中使用。也就是说，以下将起作用：

```
struct A { };
template <typename T> struct C : A { };
struct D : C<int> { };

D d;
A& a = d;
C<int>& c = static_cast<C<int>&>(a); // or dynamic_cast, if `A` were polymorphic 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T16:10:07.667

> 到类型 C 对象 C1。但我发现它失败了。

既然`C`是模板，就真的没有“C 型”。而是有`C<int>`or `C<Foo>`（假设您有一个模板参数）。模板只有在专门化时才成为类。

因此，如果 D 继承自特定类型的 C：

```
 class D : public C<int>
 {
 }; 
```

你可以`dynamic_cast`达到 a`C<int>`但不能说 a `C<float>`。

为了帮助更好地解释，你的继承树真的是

```
 A
       / | \
C<float>... C<int> 
             | 
             D 
```

所以 C 不是 D 的父级，而是`C<int>`（在本例中）。的实例`C`在运行时并不真正存在，只有完全指定的实例`C<type>`实际存在。

# xcode - Xcode 4.4 - 在未使用的导入/包含上显示警告

> ID：12163246
> 
> 赞同：4
> 
> 时间：2012-08-28T16:05:06.970
> 
> 标签：xcode, cocoa

有没有办法让 XCode 在未使用的导入和包含时显示警告消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:09:12.803

据我所知，没有办法直接从 Xcode 执行此操作。

您可以检查«Include What You Use»，这是一个使用 Clang 检测不必要的包含标头的开源项目。

[http://code.google.com/p/include-what-you-use/](http://code.google.com/p/include-what-you-use/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T16:12:52.753

找出哪些导入或包含是不必要的最好方法是一一注释它们并尝试编译；）

# android - Proguard 混淆正在破坏 simplexml

> ID：12163250
> 
> 赞同：21
> 
> 时间：2012-08-28T16:05:27.593
> 
> 标签：android, proguard, simple-framework

我在我的 android 项目中使用 simplexml，在我混淆代码之前一切正常。然后，错误开始涌入。

部分 XML 如下：

```
<categories success="true">
  <category id="102" caption="Magazin" parent="0" num_mags="114" >
    <category id="15" caption="Kunst" parent="102" num_mags="13" >
      <category id="17" caption="Design" parent="15" num_mags="10" ></category>
      <category id="18" caption="Haute+Couture" parent="15" num_mags="2" >
... 
```

我有两个类： CategoryItemList：

```
@Root(name = "categories")
public class CategoryItemList {

    private final List<CategoryItem> mCategoryItems;
    /**
     * Create a new category items list.
     * 
     * @param categoryItems the list of category items
     */
    public CategoryItemList(@ElementList(name = "category", inline = true) final List<CategoryItem> categoryItems) {
        mCategoryItems = categoryItems;
    }
    @ElementList(name = "category", inline = true)
    public List<CategoryItem> getCategoryItems() {
        return mCategoryItems;
    }
} 
```

和类别项目：

```
@Root(name = "category")
public class CategoryItem {
    private final int mId;
    private final String mCaption;
    private final int mParent;
    private final int mNumberOfMagazines;
    private final ArrayList<CategoryItem> mSubCategoryItems;
    /**
     * Creating a new category item.
     * 
     * @param id the category id
     * @param caption the name of category
     * @param parent the parent category
     * @param numMags the number of magazines from that category
     */
    public CategoryItem(@Attribute(name = "id") final int id,
                        @Attribute(name = "caption") final String caption,
                        @Attribute(name = "parent") final int parent,
                        @Attribute(name = "num_mags") final int numMags,
                        @ElementList(name = "category", inline = true, required = false) final ArrayList<CategoryItem> subCategoryItems) {
        mId = id;
        mCaption = caption;
        mParent = parent;
        mNumberOfMagazines = numMags;
        mSubCategoryItems = subCategoryItems;
    }

    @Attribute(name = "id")
    public int getId() {
        return mId;
    }

    @Attribute(name = "caption")
    public String getCaption() {
        String categoryName = null;

        try {
            categoryName = URLDecoder.decode(mCaption, "UTF-8");
        } catch (final UnsupportedEncodingException e) {
            e.printStackTrace();
        }
        return categoryName;
    }

    @Attribute(name = "parent")
    public int getParentId() {
        return mParent;
    }

    @Attribute(name = "num_mags")
    public int getNumbersOfMagazines() {
        return mNumberOfMagazines;
    }

    @ElementList(name = "category", inline = true, required = false)
    public ArrayList<CategoryItem> getSubCategory() {
        return mSubCategoryItems;
    }
} 
```

现在，当我混淆代码时，如果我省略“-keepattributes *Annotation* ”，我会得到一个 PersistenceException: Constructor not match for class。

如果我包含它，我会在运行时收到“无法确定构造函数参数 1 的泛型类型”异常。
正如你所看到的，名字就在那里，我试图让整个班级都拿着它们，但都无济于事。

**如何配置 Proguard 以使用 simplexml？**

编辑：我的 proguard.cfg 文件如下：（它有点塞满了我尝试过的所有东西，但这是当前版本）

```
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-printseeds
-dontoptimize
-keepattributes *Annotation*
-keepattributes EnclosingMethod

-libraryjars <java.home>/lib/rt.jar (javax/xml/stream/** )

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference

-keepclasseswithmembers class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-dontwarn android.support.**,de.greenrobot.**,org.simpleframework.xml.**
-keep class com.crittercism.**{ *; }
-keepclassmembernames class com.crittercism.**{ *; }
-keepclasseswithmembers class com.crittercism.**{ *; }

-keep class org.simpleframework.**{ *; }
-keepclassmembernames class org.simpleframework.**{ *; }
-keepclasseswithmembers class org.simpleframework.**{ *; }

-keep class crittercism.android.**
-keepclassmembers public class com.crittercism.*{ *;}

-keep public class database.** {
    public static <fields>;
}

-keep class android.support.**
-keepclasseswithmembers class android.support.** { *;}

-keep class org.simpleframeork.**
-keepclasseswithmembers class org.simpleframeork.** { *;}

-keep class javax.**
-keepclasseswithmembers class javax.** { *;}

-keep class com.test.category.**
-keepclassmembernames class com.test.category.** { *; }
-keepclasseswithmembers class com.test.category.** { *;}

-keep class com.test.download.**
-keepclassmembernames class com.test.download.** { *; } 
-keepclasseswithmembers class com.test.download.** { *;}

-keep class org.simpleframework.**{ *; } 
-keep class org.simpleframework.xml.**{ *; } 
-keep class org.simpleframework.xml.core.**{ *; } 
-keep class org.simpleframework.xml.util.**{ *; }
-keep class org.simpleframework.xml.stream.**{ *; }

-keepclassmembers class * implements java.io.Serializable {
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T08:14:46.933

您已经发现保留注释是一个好主意。您也可以尝试将类型参数添加到 @ElementList 注释 - 显然泛型类型擦除存在问题，simplexml 需要有关列表中元素类型的额外提示

你也可以玩弄 -keepattributes Signature, *Annotation*：

> 在 JDK 5.0 及更高版本中编译时，需要“Signature”属性才能访问泛型类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T11:59:01.623

使用 SimpleXML 库并混淆代码时的问题如下：

1.  您必须保留实体的“注释”和“签名”

    @Attribute(name = "retcode", required = true) 私有字符串 _retcode;

2.  您必须保留 SimpleXML 库

3.  您必须防止某些代码块被删除，例如，如果不使用实体的构造函数，proguard 将删除它，但该方法可以在 Simple XML Library 内部使用

proguard.cfg 文件可能是这样的：

```
# The following line may be different
-libraryjars <java.home>/lib/rt.jar(java/**,javax/**)

-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
# (3)Not remove unused code
-dontshrink

-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService
# (2)Simple XML
-keep public class org.simpleframework.**{ *; } 
-keep class org.simpleframework.xml.**{ *; } 
-keep class org.simpleframework.xml.core.**{ *; } 
-keep class org.simpleframework.xml.util.**{ *; }
# (1)Annotations and signatures
-keepattributes *Annotation*
-keepattributes Signature

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

我在自己的项目中使用它并且它有效；）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T10:03:21.717

使用来自项目 Subversion 存储库的官方版本。

[https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/proguard.pro](https://simple.svn.sourceforge.net/svnroot/simple/trunk/download/stream/proguard.pro)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T20:25:50.783

在 Eclipse 中右键单击您的项目。转到 android -> 运行 Lint。

[Lint](http://tools.android.com/tips/lint)有能力检查 proguard 错误配置，并且可能会发现并解释您的错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-25T10:55:08.453

我不断收到以下错误：

`can't find referenced class javax.xml.stream.XMLEventReader`

`can't find referenced class javax.xml.stream.events.XMLEvent`

这是因为它们是 Java 运行时 ( `rt.jar`) 的一部分，而不是 Android 运行时 ( `android.jar`) 的一部分，所以 ProGuard 会发出警告，说某些东西可能会被破坏。这实际上不是问题，因此我们可以执行以下操作：

```
-dontwarn javax.xml.stream.events.** 
```

[资源](https://stackoverflow.com/a/7003061/389649)

结合zmicer的回答，我得到以下

```
-dontwarn javax.xml.stream.events.**

-keep public class org.simpleframework.** { *; }
-keep class org.simpleframework.xml.** { *; }
-keep class org.simpleframework.xml.core.** { *; }
-keep class org.simpleframework.xml.util.** { *; }

-keepattributes ElementList, Root

-keepclassmembers class * {
    @org.simpleframework.xml.* *;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-08T12:31:44.713

尝试将此添加到您的 proguard 文件中：

```
-keep public class org.simpleframework.** { *; }
-keep class org.simpleframework.xml.** { *; }
-keep class org.simpleframework.xml.core.** { *; }
-keep class org.simpleframework.xml.util.** { *; }

-keepattributes ElementList, Root

-keepclassmembers class * {
    @org.simpleframework.xml.* *;
} 
```

这为我修好了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-24T08:06:49.757

proguard 文件的这个确切添加对我有用：

```
-dontwarn javax.xml.stream.**

-keep public class org.simpleframework.** { *; }
-keep class org.simpleframework.xml.** { *; }
-keep class org.simpleframework.xml.core.** { *; }
-keep class org.simpleframework.xml.util.** { *; }

-keepattributes ElementList, Root

-keepclassmembers class * {
    @org.simpleframework.xml.* *;
} 
```

# python - 如何在 BeautifulSoup.BeautifulStoneSoup 中维护区分大小写的标签？

> ID：12163251
> 
> 赞同：17
> 
> 时间：2012-08-28T16:05:27.383
> 
> 标签：python, xml, beautifulsoup

我正在编写一个使用 编辑 XML 文件的脚本`BeautifulStoneSoup`，但该库将所有标签转换为小写。是否有保存案例的选项？

```
import BeautifulSoup    
xml = "<TestTag>a string</TestTag>"    
soup = BeautifulSoup.BeautifulStoneSoup(xml, markupMassage=False)    
print soup.prettify() # or soup.renderContents()
#prints
>>> <testtag>a string</testtag> 
#instead of the expected
>>> <TestTag>a string</TestTag> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T16:40:56.467

您可以使用[Beautiful Soup 4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#parsing-xml)，如下所示（需要 lxml XML 库）：

```
In [10]: from bs4 import BeautifulSoup

In [11]: xml = "<TestTag>a string</TestTag>"

In [12]: soup = BeautifulSoup(xml, "xml")

In [13]: print soup
<?xml version="1.0" encoding="utf-8"?>
<TestTag>a string</TestTag>

In [14]: 
```

# objective-c - 用动画调整 UIWebView 的大小

> ID：12163252
> 
> 赞同：2
> 
> 时间：2012-08-28T16:05:32.393
> 
> 标签：objective-c, ios, uiwebview

我想用 UIWebView 和 UIToolbar 调整 UIView 的大小作为带有动画的子视图。所以我使用以下代码：

```
[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
    self.outerView.frame = CGRectMake(self.outerView.frame.origin.x, self.outerView.frame.origin.y, self.outerView.frame.size.width - 400, self.outerView.frame.size.height);
} completion:^(BOOL finished) {

}]; 
```

当 UIToolbar 按预期随着动画调整大小时，UIWebView 的内容会在动画完成后直接跳转到新的大小。

有谁知道如何将动画应用到 UIWebView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:07:44.553

我认为这是不可能的，因为 UIWebView 拒绝在动画期间自我更新，但是我建议您可以将 UIWebView 的边界设置为您想要成为的目的地并将其包装在视图中，并且通过动画您可以为 UIWebView 的父级设置动画看法。这样动画就很流畅，没有跳跃，看起来好像你揭示了更多的内容。

# python - Python imp 模块 ImportError while load_module

> ID：12163255
> 
> 赞同：1
> 
> 时间：2012-08-28T16:05:40.317
> 
> 标签：python, swig

我正在使用 python(2.6.4)-swig(1.3.4) 来访问一些已编译成 .so 的 c++ 代码。swig 在 imp 模块的帮助下生成一些导入 .so 的 python 代码。

find_module 成功并获得正确的路径。但是 import_module 抛出了一个 ImportError。

```
File "/a/vin31f2/vol/vin31f2v11/cs_ets_03/pradyotd/shadows/testframework/src/MessageRouter/src/swig/MessageFactory.py", line 24, in swig_import_helper
_mod = imp.load_module('_MessageFactory', fp, pathname, description)
ImportError: /a/vin31f2/vol/vin31f2v11/cs_ets_03/pradyotd/shadows/testframework/src/MessageRouter/src/swig/_MessageFactory.so: cannot open shared object file: No such file or directory all 
```

请注意，该文件实际上是存在的`/a/vin31f2/vol/vin31f2v11/cs_ets_03/pradyotd/shadows/testframework/src/MessageRouter/src/swig/_MessageFactory.so`。

关于如何解决这个问题的任何建议？

此外，同样的事情似乎在另一台机器上的 python 2.6.5 中运行。

# tsql - 连接两个表时如何在不同的行中显示数据

> ID：12163260
> 
> 赞同：1
> 
> 时间：2012-08-28T16:05:54.317
> 
> 标签：tsql

我有 2 温度。看起来像这样的表

`@t1(p_ssn,p_fname,p_lname,Gender,.............)` -> 这个表有员工记录，大约有**30 列**

`@t2(p_ssn,benefit,medical_premium,dental_premium,..............)`-> 此表有员工福利，大约有**60 列**

中的每条记录`@t1`都会有 1 个或多个对应的记录`@t2`

我如何在表之间进行连接以获得这样的显示（在 p_ssn 上连接）我想要每个员工记录，然后是他们的所有福利记录 -**每个都在不同的行上，如图所示**

```
p_fname,p_lname,Gender etc...      -> 1st employee
benefit1,medical_premium1,dental_premium_1     -> all the benefit records for this employee
p_fname,p_lname,Gender etc...      -> 2nd  employee
benefit1,medical_premium1,dental_premium_1 
```

现在，我正在使用循环。但是由于每条记录都比较大，走一半就挂了。

* * *

@Tim - 这就是我卡住的地方。@t1 只有 30 列，但 @t2 有 60 列

-- 实际查询

```
 select col1, col2 from 
(     -- Get employees     
 select 10 as ordinal, p_ssn, p_fname as col1, p_lname as col2,**there are only 30 columns here**     
 from @t1     
union all    
 -- Get benefits     
select 20 as ordinal, a.p_ssn, cast(b.benefit as varchar(50)), cast(b.premium as varchar(50)) ,**I want to display more columns here like b.col1,b.col2,b.col3 etc...60 columns**    
from @t1 a         
 join @t2 b on a.p_ssn = b.p_ssn ) as a order by p_ssn, ordinal 
```

我知道我可以执行以下操作

```
 select 10 as ordinal, p_ssn, p_fname as col1, p_lname as col2,'','',''
from @t1
 union all
select 20 as ordinal, a.p_ssn, cast(b.benefit as varchar(50)), cast(b.premium as varchar(50)),b.col1,b.col2,n.col3 
```

但这是一个文件提要，不允许有空格。事实上，我无法使用强制转换，因为长度和数据类型已定义且无法更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:05:06.490

我的假设是您的输出是连接字段（例如 p_lname + '、' + p_fname）。这可能是一个可能的解决方案：

```
declare @tmpResult table(GroupRankNo int
                        , Name nvarchar(100)
                        , Benefits nvarchar(500)
                        , SSN int)

insert into @tmpResult table(GroupRankNo
                            , Name
                            , Benefits
                            , SSN)
select row_number() over(partition by aa.Name order by aa.Name) as GroupRankNo
        , aa.Name
        , aa.Benefits
        , aa.p_ssn
from
(       
    select a.p_fname + ', ' + a.p_lname as Name
            , b.benefit + ', ' + b.premium as Benefits
            , a.p_ssn
    from @t1 a
    inner join @t2 b on b.p_ssn = a.p_ssn
) aa                                

select aa.ColumnData
from
(
    select SSN
            , Name as ColumnData
            , 0 as RowType --Header
    from @tmpResult
    where GroupRankNo = 1

    union

    select SSN
            , Benefits as ColumnData
            , 1 as RowType --Detail
    from @tmpResult
) aa
order by aa.SSN
            , RowType asc 
```

我没有测试过。但是你会明白的，使用“row_number() over partition by”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:36:12.873

你最终可能会做这样的事情：

```
-- Setup demo data
declare @t1 table (
      p_ssn char(11) not null primary key
    , p_fname varchar(50) not null
    , p_lname varchar(50) not null
)
insert into @t1 select '000-00-0000', 'Joe', 'Blow'
insert into @t1 select '111-11-1111', 'Jane', 'Doe'
declare @t2 table (
      p_ssn char(11) not null
    , benefit varchar(50)
    , premium int
)
insert into @t2 select '000-00-0000', 'Benefit 1', 100
insert into @t2 select '000-00-0000', 'Benefit 2', 200
insert into @t2 select '111-11-1111', 'Benefit 1', 300
insert into @t2 select '111-11-1111', 'Benefit 2', 400

-- Actual query
select col1, col2
from (
    -- Get employees
    select 10 as ordinal, p_ssn, p_fname as col1, p_lname as col2
    from @t1
    union all
    -- Get benefits
    select 20 as ordinal, a.p_ssn, cast(b.benefit as varchar(50)), cast(b.premium as varchar(50))
    from @t1 a
        join @t2 b on a.p_ssn = b.p_ssn
) as a
order by p_ssn, ordinal 
```

要获得这样的输出：

```
col1        col2
Joe         Blow
Benefit 1   100
Benefit 2   200
Jane        Doe
Benefit 1   300
Benefit 2   400 
```

诀窍是生成`ordinal`我们稍后可以排序的列。

但是，我通常建议不要在数据库引擎中创建这样的报告，因为这就是您的 Web/应用服务器上的报告工具和前端代码的用途（这些通常可以更好地扩展）。另外，小心使用[SSN 作为主键](http://databases.about.com/od/specificproducts/a/primarykey.htm)。

# mysql - 在默认 MySQL 值中执行计算

> ID：12163263
> 
> 赞同：2
> 
> 时间：2012-08-28T16:06:00.473
> 
> 标签：mysql, database

`DEFAULT`有没有办法使用MySQL 的 Default Value 属性（即列定义上的子句）基于相同或不同表中其他列的值执行计算？

我们可以为任何列设置静态默认值，但我们可以执行计算或查询其他表的数据吗？

**编辑**

比方说一个表，其中列 for`marks`和其他列`total_marks`，第三列`percentage`。如何设置`percentage`从前两列计算的默认值

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T16:24:16.160

不可以。DEFAULT 子句的值必须是常数。（此规则的一个例外是将`CURRENT_TIMESTAMP`用作列的默认值`TIMESTAMP`。）

作为替代方案，您可以使用 TRIGGER 在插入或更新行时为列设置值。

例如，在 BEFORE INSERT FOR EACH ROW 触发器中，您可以根据为其他列提供的值执行计算和/或从其他表中查询数据。

* * *

**编辑**

对于问题编辑中给出的示例，触发器定义的示例起点：

```
CREATE TRIGGER mytable_bi 
BEFORE INSERT ON mytable 
FOR EACH ROW
BEGIN
  SET NEW.percentage = (100.0 * NEW.marks) / NULLIF(NEW.total_marks,0);
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T15:20:13.547

触发解决方案很棒，但我来到这里的情况略有不同，那个解决方案不是我想要的。

我将默认值用于唯一一次将新列添加到表中。在任何其他情况下，我都不会使用该默认值。所以我不想触发。

我认为在这种情况下，唯一的选择是将值默认为 0（或任何特定值）。然后用计算所需的值更新所有这些新插入的 0。

最后，从现在开始将该新列的默认值更新为所需的值。

# java - 矩阵相机，运动控制

> ID：12163264
> 
> 赞同：0
> 
> 时间：2012-08-28T16:06:02.220
> 
> 标签：java, camera

我在和某个人说话。他说我在游戏中的动作概念不好。当按下左箭头或右箭头时，我正在滚动背景是什么让你觉得玩家在移动（玩家的 X 保持不变）。所以......他告诉我一些关于矩阵视图的事情。我应该创建静态的所有墙壁和平台，只滚动相机并移动玩家的矩形。我在谷歌做了一些研究，但没有找到。你能告诉我什么吗？如何开始？也许是链接、书籍和资源？我的编程语言是 Java (2d)。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:54:22.997

我认为您正在尝试制作一个相机对象与玩家对象一起移动的游戏。分配真实世界 (x,y) 坐标

1.  相机位置（camx,camy）
2.  印版位置 (px,py)
3.  背景图像的左上角 (bgx,bgy)

根据游戏场景

现在使用一些简单的 2d 视口到窗口转换如下

1.  在 (px-camx,py-camy) 处绘制玩家对象
2.  在 (bgx-camx,bgy-camy) 处绘制背景对象
3.  按键时同时更改 (camx,camy) , (px,py)

现在如果玩家在 (100,200) 并且相机在 (50,50)，玩家将显示在 (100-50,200,50) 即 (50,150)。

对于从 (0,0) 开始的背景图像，它将从 (-50,-50) 绘制。所以有些部分会在屏幕外

[更多关于视口到窗口的转换](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCMQFjAA&url=http://www.di.ubi.pt/~agomes/cg/teoricas/04e-windows.pdf&ei=sgQ9UJ-1JITprQff94HYCA&usg=AFQjCNGuCI-0XXI6rzsLHj7GZUT4Zwco_w&sig2=JpDbGagP7i2uCwuNGEqFYA)

# php - 卷曲错误：来自服务器的空回复

> ID：12163265
> 
> 赞同：2
> 
> 时间：2012-08-28T16:06:02.773
> 
> 标签：php, curl

我正在尝试做 CURL Post 并遇到一些问题。

本质上，我正在向 API 发布邮政编码列表，根据选择的内容，它可能是一个非常大的列表。当我只发布几个邮政编码时，它就完美了。当我输入一个更大的邮政编码列表时，它会失败并显示来自服务器的空回复错误。

```
private function sendApiRequest($action, $request)
{
    // Testing
    $request['Test'] = $this->apitest;

    // Build URL
    $postURL = "{$this->apiurl}?Key={$this->apikey}&API_Action={$action}";

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $postURL);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($request));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $resp = curl_exec($ch);

    if(curl_errno($ch))
    {
        var_dump(curl_getinfo($ch));
        throw new Exception('Curl Error: ' . curl_error($ch));
    }
    curl_close($ch);
    return $resp;
} 
```

这是 curl_getinfo() 转储：

```
array
  'url' => string 'https://api.example.com/api.php?Key=xxx&API_Action=insertFilterSet' (length=147)
  'content_type' => null
  'http_code' => int 0
  'header_size' => int 0
  'request_size' => int 11736
  'filetime' => int -1
  'ssl_verify_result' => int 20
  'redirect_count' => int 0
  'total_time' => float 0.374
  'namelookup_time' => float 0
  'connect_time' => float 0.093
  'pretransfer_time' => float 0.203
  'size_upload' => float 11486
  'size_download' => float 0
  'speed_download' => float 0
  'speed_upload' => float 30711
  'download_content_length' => float -1
  'upload_content_length' => float 11486
  'starttransfer_time' => float 0.374
  'redirect_time' => float 0
  'certinfo' => 
    array
      empty
  'redirect_url' => string '' (length=0) 
```

正如我所说，它适用于较小的请求，但对于较大的请求会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T06:02:24.097

我遇到了同样的问题。我的 HTTP 状态代码返回 200，但我的响应为空。正如我所经历的那样，这可能有很多原因。

## 您的标题可能不正确

```
CURLOPT_HTTPHEADER => array('Content-Type:application/json', 'Expect:') 
```

## 您可能需要将数据作为 CURL 中的 post 字段发送，而不是附加到 URL 中，例如`url?p1=a1&p2=a2`

```
$data = array (p1=>a1, p2=>a2)
CURLOPT_POSTFIELDS => $data 
```

因此，您的选项数组将类似于以下内容

```
array(
    CURLOPT_URL => $url,
    CURLOPT_FAILONERROR => TRUE, // FALSE if in debug mode
    CURLOPT_RETURNTRANSFER => TRUE,
    CURLOPT_TIMEOUT => 4,
    CURLOPT_HTTPHEADER => array('Content-Type:application/json', 'Expect:'),
    CURLOPT_POST => TRUE,
    CURLOPT_POSTFIELDS => $data,
); 
```

# javascript - 当 console.assert 失败时进入 chrome 调试器

> ID：12163266
> 
> 赞同：2
> 
> 时间：2012-08-28T16:06:05.567
> 
> 标签：javascript, google-chrome, google-chrome-devtools

失败时如何导致中断`console.assert()`（除了用我自己的替换断言函数并在那里设置断点）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:29:41.587

当你第一次启动 Chrome 开发者工具时

`"Do not pause on exceptions. Click to pause on all exceptions"`单击左侧靠近 Chrome 开发人员工具最底栏的鼠标悬停时显示的暂停图标 。如果找不到该图标，请按`Sources`Chrome 开发人员工具中的选项卡。

该图标应变为蓝色。如果第一次没有变成蓝色，请再次单击它。然后，它甚至会暂停`console.assert(false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:10:51.207

我不知道有什么方法可以在失败`assert()`的 s 上自动中断，至少在 Chrome/Safari 中是这样。

但我认为用你自己的替换实际上几乎一样好：

```
var nativeAssert = console.assert;
function assertWrapper(expr) {
    nativeAssert.apply(this, arguments);
    if (!expr) {
        "";
    }
}
console.assert = assertWrapper; 
```

然后，您可以在行上放置一个断点`""`来捕获所有故障，同时仍然获得您期望的标准控制台输出。

# android - android:targetSdkVersion HTTP 请求错误

> ID：12163267
> 
> 赞同：0
> 
> 时间：2012-08-28T16:06:14.437
> 
> 标签：android

到目前为止，我的应用程序运行良好，直到我将以下行放入 android manifest

```
<uses-sdk android:targetSdkVersion="14"/> 
```

现在应用程序没有发出 HTTP 请求，据我所知 b'coz 应用程序没有登录。有什么我遗漏的吗？

当我使用

```
<uses-sdk android:targetSdkVersion="9"/> or <uses-sdk android:targetSdkVersion="7"/> 
```

有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:30:16.997

听起来您正在从 UI 线程进行 HTTP 调用，不建议这样做，但可以使用 targetVersion 9，更高版本强制要求 HTTP 请求从 UI 线程以外的线程完成，所以当您将 targetVersion 更改为 14 现在强制执行此检查。您需要更新您的应用程序代码以从不同的线程进行 HTTP 调用（检查 Loaders 和/或 AsyncTask 以帮助解决此问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:22:03.173

我解决了这个问题。问题是异步任务从未进入`doInBackground()`. 问题是我正在使用`webServiceTask.execute();`，但现在我将其更改为 if

```
(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
 webServiceTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR,""); 
     else
webServiceTask.execute(""); 
```

在此之后它开始工作。

# java - 为什么 Hibernate query.list() 很慢？

> ID：12163268
> 
> 赞同：16
> 
> 时间：2012-08-28T16:06:20.777
> 
> 标签：java, hibernate

我正在使用 Hibernate 4.1.6 并且在构建列表的速度方面存在问题。我正在运行以下查询。

```
public void doQuery(final Baz baz){
  final Query query = getSessionFactory().getCurrentSession().createQuery(
          "select c.id, foo.someValue from Foo as foo "+
          "join foo.a as a"+
          "join foo.b as b "+
          "join b.c as c "+
          "where baz=:baz"
          );
  query.setParameter("baz", baz);
  Long start=System.currentTimeMillis();
  final List<Object[]> list = query.list();
  Long end=System.currentTimeMillis();
  System.out.println((end-start));
} 
```

我设置了休眠调试以获取发送到数据库的实际查询。我直接在数据库中运行了该查询，它在 0.015 毫秒内返回了 23,000 行。所以，我猜查询不是问题。上面的示例显示创建该列表大约需要 32 秒。有什么办法可以加快速度吗？

更新：我尝试使用使用休眠调试查询的 createSQLQuery() 方法，它的运行速度与 createQuery() 方法一样慢。

更新：我尝试使用无状态会话，但运行速度同样慢。

更新：我输出了一些统计数据（将 hibernate.generate_statistics 标志设置为 true），但对我来说没有什么令人担忧的：

```
Hibernate SessionFactory Statistics [
    Number of connection requests[4]
    Number of flushes done on the session (either by client code or by hibernate[3]
    The number of completed transactions (failed and successful).[3]
    The number of transactions completed without failure[3]
    The number of sessions your code has opened.[4]
    The number of sessions your code has closed.[3]
    Total number of queries executed.[4]
    Time of the slowest query executed.[28258]
    the number of collections fetched from the DB.[6]
    The number of collections loaded from the DB.[6]
    The number of collections that were rebuilt[0]
    The number of collections that were 'deleted' batch.[0]
    The number of collections that were updated batch.[0]
    The number of your objects deleted.[0]
    The number of your objects fetched.[1]
    The number of your objects actually loaded (fully populated).[204]
    The number of your objects inserted.[1]
    The number of your object updated.[0]
]

Hibernate SessionFactory Query Statistics [
    total hits on cache by this query[0]
    total misses on cache by this query[0]
    total number of objects put into cache by this query execution[0]
    Number of times this query has been invoked[1]
    average time for invoking this query.[28258]
    maximum time incurred by query execution[28258]
    minimum time incurred by query execution[28258]
    Number of rows returned over all invocations of this query[23303]
] 
```

更新：从本机查询的 ScrollableResults 执行 next() 时，我看到同样的缓慢。请注意，我在循环中什么也没做。

```
 ScrollableResults results = query.scroll();
    Long start=System.currentTimeMillis();
    while (results.next()) {
       //do nothing
    }
    Long end=System.currentTimeMillis();
    System.out.println((end-start)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T17:05:30.147

我不能 100% 确定这个答案，因为调优/优化问题总是很难确定。

但是，基于您打开`show_sql`、提取查询并直接针对数据库运行它并通过 Hibernate 查询查看亚秒级结果与执行时间的事实，我将重点关注 Hibernate 构建和水合对象的方式通话的结果`query.list()`。

这是另一个用户，他提到了 Hibernate 中类似的查询性能问题，并通过在 POJO 中添加完整的便利构造函数（接受每个字段的值的构造函数）看到了性能的显着提升：[Simple hibernate query return very slow](https://stackoverflow.com/questions/6609645/simple-hibernate-query-beeing-very-slow)

听起来他们偶然发现了这个修复程序，并且不清楚为什么会这样。有人猜测 Hibernate 必须使用反射来检测属性。我自己很好奇，并计划在有机会时深入研究 Hibernate 的源代码，以便更好地理解这一点。不过，与此同时，您可能希望考虑为所有 POJO 类属性添加这些带有参数的完整构造函数，看看这是否会产生影响。

请让我知道你发现了什么，因为我对 Hibernate 性能优化非常感兴趣。谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T19:11:17.437

如果查询（带有`show_sql`）似乎没有问题，那么它可能在代码中。启动 VisualVM（随 JDK 一起提供`jvisualvm`）并使用其 CPU 分析器找出哪些方法花费的时间最长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:38:04.280

> 我直接在数据库中运行了该查询，它在 0.015 毫秒内返回了 23,000 行。所以，我猜查询不是问题。

这可能为时过早，因为查询执行时间不仅仅取决于查询文本。即使他们的查询是在相同的数据上运行的，你怎么知道数据库使用了相同的执行计划？你怎么知道它在磁盘缓存中获得了相同数量的缓存命中？例如，hibernate 在与数据库通信时使用准备好的语句，但您可能没有。在 Oracle 中，执行计划由查询文本缓存，因此不同的查询文本意味着新计算的执行计划。由于缓存的执行计划可能是基于不同的查询参数形成的，因此它很可能是不同的——并且可以将执行时间改变几个数量级。请注意，我并不是说它*是*数据库，但我不会低估这种可能性。

因此，您应该做的第一件事是衡量数据库或在您的 JVM 中运行的东西是否在浪费所有时间。一种简单的方法是在执行查询时观察 JVM 的 cpu 消耗。如果它明显少于一个线程，则 JVM 正在等待某些东西——可能是数据库。

如果是数据库，请使用数据库的优化工具来捕获执行计划，以及其他相关的性能指标。

如果它在 JVM 中，请使用 Profiler 来查明性能瓶颈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:28:00.367

我们遇到了类似的问题，不知道是否相关。基本上，由于我们每次查询都会更新一次新的 SessionFactory，它会执行如下查询：

```
 select streamref0_.UUID as UUID145_, streamref0_.Tape_TapeId as Tape2_145_ from StreamRefToTape streamref0_ where streamref0_.UUID=? 
```

你会注意到那里有大量的数字。事实证明，每个新的会话工厂都会增加一次。无论如何，这导致 oracle 花费所有时间为每个查询制定一个新计划（它报告说 cpu 几乎都在“硬解析”时间生成新计划——我猜 Oracle 生成它没有看到的计划的速度很慢前？）。在这种特殊情况下，解决方法是每次只使用同一个工厂而不是新工厂。另请参阅[Hibernate 为每个查询生成不同的 SQL](https://stackoverflow.com/questions/9452183/hibernate-produce-different-sql-for-every-query)

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2588723819082](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2588723819082)解释了硬解析，这显然很糟糕。

另一个可能的解决方法是在休眠中使用“原始 sql”（jdbc）或可能的原始 sql 查询，尽管在这种特殊情况下似乎并没有解决问题......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-21T14:51:14.830

我不确定，但我在当前项目中面临这个问题。

在我的情况下，问题是hibernate用于`cross join`执行隐式连接，因此（在我看来）从数据库中获取数据以构造结果（可能使用反射）后需要时间。

我的解决方案是明确使用内部联接。

对于你的问题，我认为你可以`inner join`明确地使用而不是仅仅使用`join`.

# c# - Active Directory 添加用户属性

> ID：12163273
> 
> 赞同：2
> 
> 时间：2012-08-28T16:06:41.417
> 
> 标签：c#, active-directory, directoryentry

我正在尝试将属性/属性添加到 Active Directory 中的用户条目。使用以下代码更新属性值没有任何问题。

```
string LDAPString = "LDAP://DC=oc,DC=edu";
DirectoryEntry ou = new DirectoryEntry(LDAPString, "fakeUsername", "password");

DirectorySearcher searcher = new DirectorySearcher(ou);
searcher.Filter = "sAMAccountName=" + username;
SearchResult result = searcher.FindOne();

DirectoryEntry user = new DirectoryEntry(result.Path, "fakeUsername", "password");

user.Properties[propertyName].Value = propertyValue;

user.CommitChanges();

user.Dispose(); 
```

但是，当我尝试添加新项目并调用`CommitChanges()`它时会引发错误：

> 指定的目录服务属性或值不存在。

ExtendedErrorMessage 说明如下：

> 00000057：LdapErr：DSID-0C090B8A，注释：属性转换操作出错，数据0，v1db1

```
string propertyName = "test";
string propertyValue = "testValue";
user.Properties[propertyName].Add(propertyValue);
user.CommitChanges(); 
```

我有一种感觉，我错过了一些简单的东西，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:12:42.473

我不明白，除非填充了值，否则通常不会出现属性/属性。由于 marc_s 暗示该属性已经存在于架构中，因此您只需用一个值填充它。

# javascript - jQuery post，在回调中访问 responseType 或 response

> ID：12163278
> 
> 赞同：0
> 
> 时间：2012-08-28T16:07:05.703
> 
> 标签：javascript, ajax, jquery

我正在尝试实现一个 jQuery ajax 帖子，内容如下：

```
$(this).click( function() { 
    jQuery.post('index', function() {
           console.log(responseText); 
    }, "text") 
}); 
```

在上面。ajax 调用肯定正在发生，所以我对此不以为然。我想了解的是如何在我的回调函数中访问 responseText，这基本上是在成功执行 ajax 调用后收到的 Ajax 响应。

我想很简单，但我无法理解：p

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:08:38.683

它作为参数传递给回调。阅读[文档](http://api.jquery.com/jquery.post/)可能会有所帮助:)

```
$(this).click(function() {
    jQuery.post('index', function(responseText) {
        console.log(responseText);
    }, "text")
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:08:40.383

响应作为参数传递给您的成功回调函数。您需要做的就是将参数添加到您的函数中，然后访问它：

```
jQuery.post('index', function(response){
    console.log(response);
}); 
```

如果您需要更多数据，则必须使用更详细的内容。你最好遵循这个问题的答案：

[jquery如何检查ajax回调的响应类型 - 代码日志](https://stackoverflow.com/questions/3741574/jquery-how-to-check-response-type-for-ajax-call)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:09:36.057

回调函数返回您需要添加的 responseText：

```
$(this).click( function() { 
   jQuery.post('index', function(responseText) {
       console.log(responseText); 
   }, "text") 
}); 
```

jquery 发布文档：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# variables - 您如何在 powershell 脚本/函数中执行任意字符串，就好像该字符串实际上已被输入到脚本/函数中一样？

> ID：12163285
> 
> 赞同：0
> 
> 时间：2012-08-28T16:07:38.423
> 
> 标签：variables, powershell, pipeline

我无法使用带有变量的 iex（调用表达式）使我的函数工作。我想要的是：

```
function My-Function {

    # code that constructs $command 
    #$command is an arbitrary string that may contain pipes, 
    #variables, command line paramaters, switchs, quoted strings, THE LOT!

    Execute-My-Command-Exactly-As-Though-I-Had-Typed-It-Here $command
} 
```

例如

```
function My-Function {
    $command = "`$input | select-string hello"

    iex $command
} 
```

这样做（之后。包括我包含上述功能的文件）

```
PS C:\> echo "hello" | My-Function
PS C:\> 
```

但显然它应该这样做：

```
PS C:\> echo "hello" | My-Function

hello

PS C:\> 
```

此外，在实际命令行中，变量 DO 似乎被 iex 拾取：

```
PS C:\> $hello = "hello"
PS C:\>
PS C:\> iex "`$hello | select-string hello"

hello

PS C:\> 
```

我能想到的唯一解决方法是将函数实际写入文件，然后 . 包括它，然后调用它。但这太可怕了！一个好的 shell 脚本语言的全部意义在于它应该能够轻松地完成这些元数据。

解决方案：

PowerShell 无法做到这一点，尽管 latkin 提供了一个有用的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:31:01.627

我想你是想在你能走路之前先跑。也就是说，让我们看一下上面的第一个示例：

```
function my-function {
    process {
       $_ | select-string "hello"
    }    
}

"hello" | my-function 
```

现在，你可能会对自己说：“嘿，这不是我问的！” 对此，我对 Invoke-Expression (iex) 提出以下建议：执行这样的任意文本可能很危险，而且很少需要。它通常表明对构建可互操作的功能和模块缺乏了解。即使是一次性脚本也很少需要 IEX。

所以，我不只是把它留在那里，但如果没有对你正在尝试做的事情的更高层次的观点，我无法合理地回答你的问题。听起来您正在尝试概括一些执行脚本或脚本的过程。因此，我的建议是研究在 PowerShell 中执行此操作的各种本机机制，即点源 (.) 和调用 (&) 运算符。

最后，喝杯咖啡，坐下来阅读 Keith Hill 最优秀的“Effective Windows PowerShell”免费电子书：

[http://rkeithhill.wordpress.com/2009/03/08/effective-windows-powershell-the-free-ebook/](http://rkeithhill.wordpress.com/2009/03/08/effective-windows-powershell-the-free-ebook/)

前几章将帮助您在学习正确的做事方式时*帮助自己。**它涵盖了 PowerShell 的主要工具：get-command、get-help、get-member 并了解命令*和*表达式*模式之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:59:44.337

`$input`是[一个很奇怪的特例自动变量](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)。完全依赖它是一个坏主意，更不用说与`Invoke-Expression`. 我猜`$input`只是在函数体本身的范围内，并且在您动态调用的表达式的范围内消失。

我完全赞同@x0n 的观点。这听起来像是一些非常hacky，脆弱，难以调试，难以维护的东西。想想你的目标，找出一些封装问题空间的**标准函数和变量。**阅读函数参数、管道参数等，这样您就可以利用得到语言适当支持的最佳解决方案。

话虽这么说...您可以通过创建一个脚本块来解决此问题，该脚本块允许从外部传递参数。

```
function My-Function{
    & ([scriptblock]::Create('param($newInput); "Newinput is $newInput"')) $input
}

'piped1', 'piped2' |  my-function 
```

# c# - 这种模式/算法叫什么？获得一个事件的随机订阅者顺序，一次只有一个人可以做出反应

> ID：12163288
> 
> 赞同：5
> 
> 时间：2012-08-28T16:07:46.167
> 
> 标签：c#, algorithm, design-patterns

我有一个问题，我在 c# 中有一个事件发布者，**为一群订阅者提供全局资源**。该资源是一种竞争商品，因此可能无法满足所有消费者的需求。

想象的模型是到达市场的一批原料。许多厨师正在等待每种食材，并且必须在每种食材上菜时决定是否购买其中的一些。厨师们同意每个人都应该对每种成分都有机会，而且他们不希望为每种食物争分夺秒，因此他们决定应该存在某种优先级系统。

1）这种场景有名字吗？

2)**以公平的方式实现这一点的好方法是什么，所以每个订阅者都有平等的机会获得成分？**请记住，是否请求资源的决定取决于订阅者。

3) 请注意，优先级不需要固定的优先级。如果您在每次活动前掷骰子，则每次都可以创建一个订单。您也可以预先计算这一点。这种解决方案有什么缺点吗？

无论如何，这不是一个家庭作业问题。只是想知道是否有人已经看到了这一点，或者是否能够将通用解决方案转换为解决此问题的形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:19:12.857

听起来像是某种草案系统。在某个预定的顺序中，所有订阅者都被赋予接受或拒绝资源的权利，直到资源被充分利用。诀窍是如何确定该顺序。

如果这是我的项目，我想我会从简单的开始。从第一个订阅的订阅者开始，然后按该顺序浏览列表，直到资源被充分利用。然后，随着额外资源的可用，第一个没有选择权的订阅者（因为您的资源用完了）获得了优先拒绝权，并从那里继续。当你到达终点时，循环回到起点。当有很多批次的资源时，这是一个很好的模型，只是每个批次都*不够*。厨师的配料模型可以很好地配合这个系统；当天第一个出现的厨师将获得第一人选，以此类推，如果厨师被排除在外，不用担心，他会在下一批中获得机会。

另一种可能的方法是顺序无关的。询问所有订阅者是否需要特定资源。如果想要它的人多于可用资源，则将所有订阅者的名字放入帽子中并选择其中 X 个；他们得到资源。那些没有获得资源的人会保留他们的名字，从而给他们额外的机会获得下一个资源。当批量资源很小并且大多数或全部资源都非常需要时，这是更好的模型，以避免最后一个订阅者必须永远等待以获得好的机会。魔兽世界的战利品系统可能有点像这样（简化了所有党员“选择加入”每个项目；我不玩魔兽世界，所以我从未见过战利品系统工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:23:45.393

> 1）这种场景有名字吗？

是的，它被称为[循环](https://en.wikipedia.org/wiki/Round-robin)（如果我理解正确的话）

> 2) 以公平的方式实现这一点的好方法是什么，所以每个订阅者都有平等的机会获得成分？

系统越复杂，您应该越容易制定解决方案，[KISS](https://en.wikipedia.org/wiki/KISS_principle)在这里工作得非常好。实现循环算法。

> 3) 请注意，优先级不需要固定的优先级。如果您在每次活动前掷骰子，则每次都可以创建一个订单。您也可以重新计算。这种解决方案有什么缺点吗？

这个问题在大型可扩展系统和网络中已经存在多年（例如，请参阅[此线程](https://serverfault.com/q/101053/82856)）。人们尝试了很多事情，但除非您*真的知道*自己在做什么，否则请使用简单的一次性策略。

Round robin 不是完美的，肯定有它自己的缺点，但它也是最简单的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:27:39.397

1> 我不确定这个场景是否有名字

2> 公平是非常主观的。您需要有一个优化标准才能获得最佳解决方案。你说每个订阅者都有平等的机会获得成分。然后你只需要一个统一的随机变量来决定哪个应该得到它。

但你也说过厨师可能不想要一种特定的成分。因此，只有那些想要当前成分的厨师才需要考虑。因此，您需要进行加权分配，以考虑所有想要当前食材的厨师之间的公平性。

这可以按如下方式完成

假设有 X 个厨师

所有厨师都从零开始。

每次厨师获得资源时，他都会获得 X 分。所有未获得资源的厨师都将获得 -1 分。因此，积分越高，您在近期历史中获得的资源就越多。理想情况下，资源应该分配给得分最少的人。

当您在最少点上有多人时，只需使用随机均匀分布选择一个。这在某种意义上是公平的。

另一种选择是仍然允许所有厨师获取资源，但使用现在根据需要资源的厨师的积分总和计算的分布。这使其随机分配由想要资源的厨师和他们当前获取资源的历史决定。

# java - 将列表与自身交错

> ID：12163291
> 
> 赞同：3
> 
> 时间：2012-08-28T16:08:15.070
> 
> 标签：java, list

给定一个实例，将 的大小增加1 倍以使新元素是原始元素的副本并与原始数组交错`List`的最有效方法是什么？`List``f`

例如

```
f        = 2
Original = [a,b,c,...,x,y,z]
New      = [a,a,b,b,c,c,...,x,x,y,y,z,z] 
```

我目前的实现是这样的：

```
List< Foo > interleave( List< Foo > original, int f ) {
    int newSize = original.size() * f;
    List< Foo > interleaved = new ArrayList< Foo >( newSize );

    for( Foo foo : original ) {
        for( int j = 0; j < factor; j++ ) {
            interleaved.add( new Foo( foo ) );
        }
    }
} 
```

问题是我的原始列表可能很大，所以性能不是很好。我有一种预感，有一种更有效的方法可以做到这一点；有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:49:29.800

您提供的代码经过了很好的优化，但是可以进行一些改进；重要的取决于您的确切需求。

* * *

首先，如果您的克隆元素将保持与原始元素相同的值，或者只有少数元素（与总数相比）将更改其值，您可能需要考虑基于引用的克隆当前的“真正克隆所有”代码，如果不是一种完全不同的方法，甚至不会创建新列表。

```
 /**
     * PROS:
     * -Very low memory-footprint, as no new objects are created in memory, just references to a single (original) object.
     * -Can be done with generalization; A single method will function for most classes and data-types, as is below.
     * 
     * CONS:
     * -If you need each clone element to be changed independently from eachother and/or the orininal, this will not work directly,
     * because any change to an reference-element will apply to all other reference-elements that point to that same Object.
     * 
     * @param <E> Sub-class generalizator. Used so that the returned list has the same sub-class as the source.
     * @param list Source list. The list containing the elements to be interleaved.
     * @param f The factor to interleave for. In effect, the number of resulting elements for each original.
     * @return A list containing the interleaved elements, with each element being a REFERENCE to the original object.
     */
    public static <E> List<E> interleaveByReference(List<E> list, int f) {
        List<E> interleaved = new ArrayList<E>(list.size() * f);
        for (E obj : list) {
            for (int i = 0; i < f; i++) {
                interleaved.add(obj);
            }
        }
        return interleaved;
    } 
```

如果您只需要几个克隆来更改值，则交错列表基于引用可能会更好，并且需要更改的元素稍后单独替换。

但是请注意，这种方法的有效性在很大程度上取决于需要更改多少原始列表元素；而且，如果需要更改太多，这种方法虽然在内存占用方面仍然更好，但速度性能会更差（这似乎是您主要关心的问题）。

“稍后单独克隆”可以通过类似的方式实现：

```
public static void replaceWithTrueClone(List<String> list, int objIndex) {
    list.add(objIndex, new String(list.get(objIndex)));
    list.remove(objIndex + 1);
}

//OR

public static void replaceWithNewObject (List<String> list, int objIndex, String newObject) {
    list.add(objIndex, newObject);
    list.remove(objIndex + 1);
} 
```

* * *

如果在程序执行过程中每个元素中的大多数都将具有独立的值，那么您当前的方法已经非常准确了。

有两个可以改进的地方。直接在代码中显示会更容易，所以这就是我要做的：

```
 /**
     * PROS:
     * -Each element is an independent object, and can be set to independent values without much of an effort.
     * 
     * CONS:
     * -Each element has it's own allocated memory for it's values, thus having a much heavier memory footprint.
     * -Is constructor-dependent, and thus cannot be generalized as easily;
     * Each different expected class will probably need it's own method.
     * 
     * @param list Source list. The list containing the elements to be interleaved.
     * @param f The factor to interleave for. In effect, the number of resulting elements for each original.
     * @return A list containing the interleaved elements.
     * For each of the original elements, the first is a REFERENCE, and the other are CLONES.
     */
    public static List<String> interleaveByClone(List<String> list, int f) {
        List<String> interleaved = new ArrayList<String>(list.size() * f);
        for (String obj : list) {
            interleaved.add(obj); //The first element doesn't have to be cloned, I assume.
            //If it has to be cloned, delete the line above, and change 'i=1' to 'i=0' on the line below.
            for (int i = 1; i < f; i++) {
                interleaved.add(new String(obj));
            }
        }
        return interleaved;
    }

    /*
     * What was changed from the original is commented below.
     */

    public static List<String> original(List<String> original, int factor) {
        /*
         * It is unnessessary to have this 'newSize' variable. It gets needlessly maintained until the end of the method.
         * Although the impact is unworthy of measurement (negligible), it still exists.
         */
        int newSize = original.size() * factor;
        List<String> interleaved = new ArrayList<String>(newSize); //Just do the '*factor' operarion directly, instead of 'newSize'.

        for (String foo : original) {
            /*
             * If you can use the original here, that's one less cloning operation (memory-allocation, etc...) per original element.
             * A low-impact optimization, but still a good one.
             */
            for (int j = 0; j < factor; j++) {
                interleaved.add(new String(foo));
            }
        }
        return interleaved;
    } 
```

* * *

使用包含 200 万个元素的原始列表和 2 倍的因子，我在 10 次运行中得到以下平均速度：

*   创建并使用 2000000 个不同元素填充原始列表需要 6030 (~) 毫秒。
*   将列表与方法交错需要 75 (~) 毫秒 `interleaveByReference()`。
*   将列表与方法交错需要 185 (~) 毫秒 `interleaveByClone()`。
*   将列表与方法交错需要 210 (~) 毫秒 `original()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:18:38.080

这可以很好地工作，而无需花费完全复制。

```
List< String > interleave(final List< String > original, final int f ) {
    final int size = f * original.size();
    final List<String> originalCopy = new ArrayList<String>();
    for (String each : original) {
        originalCopy.add(new String(each)); // <=== duplicate here.
    }
    return new AbstractList<String>() {
        @Override
        public String get(int index) {
            return originalCopy.get(index / f);
        }

        @Override
        public int size() {
            return size;
        }            
    };
} 
```

测试

```
System.out.println(interleave(Arrays.asList("a", "b", "c"), 2));
System.out.println(interleave(Arrays.asList("x", "y"), 3)); 
```

输出

```
[a, a, b, b, c, c]
[x, x, x, y, y, y] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:24:01.640

通过重新插入原始元素并仅创建副本可以实现较小的加速：

```
List< Foo > interleave( List< Foo > original, int factor ) {
  int newSize = original.size() * factor ;
  List< Foo > interleaved = new ArrayList< Foo >( newSize );

  for( Foo foo : original ) {
    interleaved.add( foo );
    for( int j = 1; j < factor; j++ ) {
        interleaved.add( new Foo( foo ) );
    }
  }

  return interleaved;
} 
```

# global-variables - PHPDoc 似乎无法识别输出中的全局变量。我究竟做错了什么？

> ID：12163292
> 
> 赞同：0
> 
> 时间：2012-08-28T16:08:17.983
> 
> 标签：global-variables, phpdoc

我的代码中有以下内容

```
/**
 * The primary database connection object
 * 
 * @global object $GLOBALS['db']
 * @name $db
 */
global $db; 
```

现在你会认为这已经足够了，但是当我运行 phpdoc 时，文档中的任何地方都没有提到这个变量或任何其他全局变量。是什么赋予了？这直接来自文档。为什么它不将此变量识别并记录为全局变量？

作为第二个问题，您似乎应该能够引用函数中使用的全局变量，而不必在使用它的每个函数中重复此处给出的描述。这在理论上是否正确？如何使这项工作？

不知道。从理论上讲，Phpdoc 似乎是一个很棒的工具，但它似乎并不喜欢我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:56:03.680

以您的示例作为有效初始化全局的代码：

```
/**
 * the primary database connection object
 *
 * @global resource $GLOBALS['db']
 * @name $db
 */
$GLOBALS['db'] = getConnection(...); 
```

请注意，这里您需要使用格式“@global datatype $globalvariablename”。另请注意，*如果*您对“$GLO​​BALS['db']”的使用需要与代码中显示“global $db”的*其他位置相匹配，您将在此处包含“@name $globalvariablename”标签。*相反，如果你只是在代码中使用“$db =”而不是“$GLO​​BALS['db']，@name 标记就会变得多余且不必要。至于我，我*会*选择使用 $GLOBALS['db']在代码中，因此需要两个全局+名称标记，只是因为我喜欢让全局变量在我的代码中非常明确可见（至少当我无法重构它们时 ;-) ）。

您在代码示例中使用“global”关键字意味着您实际上是在函数/方法中，而不是在全局变量的初始化中。在这种情况下，您的方法的 docblock 需要这种格式的全局标签：

```
/**
 * my method that uses a global
 *
 * @global resource the universally available database connection object
 */
public function foo {
    global $db;

    // do stuff here that uses the $db connection
} 
```

注意这里的格式是“@global datatype description”，与上面的格式不同。此外，您不要*在*此处放置@name 标记。

*在这里，phpDocumentor 将识别代码本身中*的“global $db”行，并查找您在哪里*分别*对全局本身的初始化进行了 docblock。

我认为有必要*同时*存在这样的“@global”用法，以便您在文档中看到*任何内容*——后者表明您记录的方法使用全局，而前者表明该方法的文档有信息展示那个特定的全局。

参考：

[1] -- @global -- [http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.global.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.global.pkg.html)

[2] -- @name -- [http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.name.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.name.pkg.html)

# ios - “您的请求无法完成” - iTunes url 错误

> ID：12163302
> 
> 赞同：2
> 
> 时间：2012-08-28T16:08:52.133
> 
> 标签：ios, app-store

我希望我的应用程序在应用程序商店的应用程序页面上重定向用户。问题是它一直显示“您的请求无法完成”警报，无论请求是否绝对正确（我为此使用了 iTunes 链接器）。
我唯一不确定的是，当我在其上使用美国 appleID 时，该应用程序是否在德国应用程序商店中。这可能是问题的原因吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:40:27.870

我发现您真的无法使用美国 appleId 访问德国 appstore 上的项目。基本上，我认为任何国家都存在同样的问题——appleId 的国家应该与应用商店的国家应用相匹配。
但是，如果在我的 mac iTunes 上只是重定向了我，则它不适用于该设备。
可能会帮助某人。

# c++ - 更大宏结构的有线输出

> ID：12163304
> 
> 赞同：0
> 
> 时间：2012-08-28T16:08:56.460
> 
> 标签：c++, gcc, macros

我使用宏研究日志记录机制：

```
#define LOGFATAL 1 // very serious errors
#define TOSTRING(s) dynamic_cast< std::ostringstream & >((std::ostringstream() << s ) ).str()

#define LOG_TRANSFER(t, s) "[" << t << "] " << s

void inline print_log(const char *level, const std::string& value)
{
    std::cout << "[" << timestamp() << "]["<< level << "]" << value << std::endl;
}

#ifdef DEBUGGING
    #define DEBUG_OUT(l, s) print_log(l, TOSTRING(s));
#else
    #define DEBUG_OUT(s, l)
#endif

#if DEBUGGING >= LOGFATAL
    #define LOG_FATAL(s)        DEBUG_OUT("FATAL", s)
#else
    #define LOG_FATAL(s)
#endif 
```

我按照他的方式使用它： LOG_TRACE(LOG_TRANSFER(ptr, "MemoryManager > allocate ")) LOG_TRACE("MemoryManager > size : " << active_list.size() )

gcc 的作用是：

```
print_log("TRACE", dynamic_cast< std::ostringstream & >((std::ostringstream() << "[" << ptr << "] " << "MemoryManager > allocate " ) ).str());
print_log("TRACE", dynamic_cast< std::ostringstream & >((std::ostringstream() << "MemoryManager > size : " << active_list.size() ) ).str()); 
```

这对我来说看起来不错，但我得到以下输出：

```
[0 s][TRACE]0x80940d40x9988ea8] MemoryManager > allocate 
[0 s][TRACE]0x80941e01 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:15:53.783

问题在于：

```
dynamic_cast< std::ostringstream & >((std::ostringstream() << s )).str() 
```

或更准确地说：

```
std::ostringstream() << s 
```

原因是表达式`std::ostringstream()`是一个临时对象，不能在其上调用非成员重载`<<`，因为所有非成员`<<`重载都采用第一个参数 as `std::ostream&`，这是非常量引用。但是临时不能绑定到非常量引用。因此，当您想要 print 时调用一个成员函数，该函数`char*`被转换为`void*`并打印地址。

你需要做一些小技巧。将临时对象（右值）转换为引用类型（左值）：

```
std::ostringstream().flush() << s 
```

**为什么我会这样打电话`flush()`？？**

好吧，您可以在临时对象上调用成员函数。我选择`flush()`是因为它返回`std::ostream&`哪个是非常量引用，而这正是我们所需要的。

它的不同之处在于：

```
std::ostringstream() << "nawaz" ; //it prints the address of "nawaz".
std::ostringstream().flush() << "nawaz" ; //it prints "nawaz" 
```

第一个调用打印地址的成员，第二个调用打印 c 字符串`operator<<`的非成员。`operator<<`这就是幕后的区别。

所以试试这个：

```
dynamic_cast< std::ostringstream & >((std::ostringstream().flush() << s )).str() 
```

那应该行得通。

另外，我建议`static_cast`在这里，因为您已经知道类型：

```
static_cast< std::ostringstream & >((std::ostringstream().flush() << s )).str() 
```

它不依赖于 RTTI。

# php - AJAX 功能在没有警报的情况下不起作用

> ID：12163307
> 
> 赞同：3
> 
> 时间：2012-08-28T16:09:01.307
> 
> 标签：php, javascript, ajax, xmlhttprequest

我在我的网站中使用了大量带有 XML Http 请求的 AJAX。对于看似随机的少数 AJAX 调用，我无法让 onreadystatechange 函数中的所有 javascript 正确执行，除非我有一个警报调用，我猜它会暂停执行足以让它完成运行 PHP 脚本服务器。这是我正在谈论的一个例子：

Javascript

```
xmlHttp=getXMLHttp();   //function returns an xmlhttp object to use
//get parameters ready
param="id=5"
xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4){
        s=xmlHttp.responseText;
        var myJson = eval("("+s+")");
        document.getElementById('Elem1').value=myJson.Result1;
        document.getElementById('Elem2').value=myJson.Result2;
        triggerEvent(document.getElementById('Elem3'),'onblur');
        document.getElementById('Elem4').value=myJson.Result3;
        document.getElementById('Elem5').value=myJson.Result4
        var sel = document.getElementById('Elem6');
        var i;
        for(i=0;i<sel.length;++i){
            if(sel.options[i].value==myJson.Result5){
                sel.selectedIndex = i;
                break;
            }
        }
        document.getElementById('MfgCustNum').value=myJson.Result6;
        document.getElementById('MfgOrderNum').value=myJson.Result7;
        document.getElementById('OrderDatePicker').value=myJson.Result8;
        document.getElementById('ShipDatePicker').value=myJson.Result9;
        document.getElementById('CancelDatePicker').value=myJson.Result10;
        document.getElementById('PO Number').value=myJson.Result11;
        //for some reason, the following 2 lines are where I'm having issues without an alert box
 document.getElementById('NewElement').value=myJson.Result12;
     document.getElementById('NewElement2').value=myJson.Result13;
 //everything else loads properly
        sel = document.getElementById('SelectBox1')
        for(i=0;i<sel.length;++i){
            if(sel.options[i].value==myJson.Result14){
                sel.selectedIndex = i;
                break;
            }
        }
        sel = document.getElementById('SelectBox2')
        for(i=0;i<sel.length;++i){
            if(sel.options[i].value==myJson.Result15){
                sel.selectedIndex = i;
                break;
            }
        }
        sel = document.getElementById('SelectBox3')
        for(i=0;i<sel.length;++i){
            if(sel.options[i].value==myJson.Result16){
                sel.selectedIndex = i;
                break;
            }
        }
        sel = document.getElementById('SelectBox4')
        for(i=0;i<sel.length;++i){
            if(sel.options[i].value==myJson.Result17){
                sel.selectedIndex = i;
                break;
            }
        }
    }
}
xmlHttp.open("POST","../ServerCall.php",true);
xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlHttp.send(params); 
```

我正在运行的 PHP 脚本是对作为 JSON 数组回显的数据库的简单查询

```
 $dc->connect();
    $query = "SELECT COLUMNS FROM TABLE"
    $res = $dc->queryDb($query);
    if(!$res){
        exit();
    }
    $ary = $dc->resultsToArray($res);
    $JSON_ARRAY=array();
    foreach($ary[0] as $key=>$value){
        if(!is_numeric($key))
            $JSON_ARRAY[$key]=$value;
    }
    echo json_encode($JSON_ARRAY); 
```

这对我来说是一个相当大的问题，因为它现在发生在我代码的 3 或 4 个不同部分中，但是在带有响应文本的警报对话框中显示一切运行正常。我尝试过同步而不是异步运行 AJAX 调用，但它没有帮助。我也尝试过使用 settimeout 将代码运行延迟一两秒，但结果好坏参半，我宁愿不必为脚本运行设置特定的延迟。

编辑：回答评论中的一些问题：对于这个代码片段，问题在于以下两行：

```
 document.getElementById('NewElement').value=myJson.Result12;
 document.getElementById('NewElement2').value=myJson.Result13; 
```

如果我在该行之前放置一个警告框以获取 myJson.Result12 的文本，则元素会在我的页面上正确填充。没有它，它们将留空，并且在 Firefox 的错误控制台中看不到任何错误

此代码正在运行 onclick。我正在使用 DataTables，当有人双击我表中的一行时，页面会填充内容。同样，除了我今天早些时候添加的 2 个新元素之外，一切都运行良好。更大的担忧更多是关于这似乎是我的代码中反复出现的问题。

此外，我已经尝试过 jQuery 的 AJAX 调用，但运气不佳，而且我的大部分代码都是使用 xmlHttp 和 JS 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:23:01.073

一个可能的原因；

您应该从 onload 处理程序执行 AJAX 请求，否则在您收到响应时您的页面可能尚未完全加载。如果在您尝试更新时未加载 NewElement 和 NewElement2，则您的脚本将无法运行。

警报将延迟脚本足以让页面完成加载，允许元素在脚本到达该点之前存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:09:24.007

所以现在，数据似乎加载得很好，没有警告框来暂停脚本。我不确定现在与以前有什么不同，但我将继续尝试重现该错误。我想知道问题是否基于我使用的浏览器或计算机，而不是代码本身无法正常工作。或者数据库响应速度较慢导致一些问题。FWIW，我试图接收的列虽然没有填充太多数据，但在我试图选择的所有列中具有最大的最大大小。

感谢大家的帮助。评论中肯定有很多关于使用 AJAX 的好建议。

# outlook - Outlook 如何识别（自动格式化）联系人表单中的公司前缀？

> ID：12163311
> 
> 赞同：1
> 
> 时间：2012-08-28T16:09:13.793
> 
> 标签：outlook

想知道 Outlook（任何版本）如何识别联系表格中的公司名称前缀。

例如，在 Outlook 中创建新联系人时，如果我将公司名称输入为“The BestCompany”，则在退出该字段后，它会自动将公司名称格式化为“BestCompany，The”，并且我相信“The”被考虑或调用作为公司名称前缀。

想知道outlook如何识别前缀是什么？请注意，它并不总是公司名称的第一个单词，因为如果我们将公司名称输入为“My BestCompany”，它的作用就不一样了。那么是否有任何预定义的单词列表将其标识为前缀？

感谢您提供这方面的任何线索。

# android - Android Webview 模拟器与 PopupWindow 中的设备

> ID：12163312
> 
> 赞同：2
> 
> 时间：2012-08-28T16:09:16.280
> 
> 标签：android, android-emulator, android-webview, popupwindow

我试图在 PopupWindow 中包含一个 WebView。WebView 用于显示维基百科页面。

有趣的是，WebView 在使用模拟器时按我的意图工作。当我在我的测试设备（原装 ASUS Transformer）上使用该应用程序时，弹出窗口中没有显示网页，而是弹出窗口，我的加载程序显示加载进度，但随后出现默认网络浏览器以显示网页. 同样，它在弹出窗口中显示页面的模拟器中按预期工作。我查看了许多网站，包括 SO 上的许多帖子，但我没有尝试过任何工作。我希望其他人在他们的应用程序开发之一中看到了这一点。

我为按钮、PopupWindow 和 WebView 的设置实现的代码是：

```
WikiButton   = (ImageButton)findViewById(R.id.WikiButton);
htmlProgress = (ProgressBar)elemWebView.findViewById(R.id.htmlProgressBar);

htmlShowing  = -1;

// Necessary for the Info Popup window
infoWebViewPopup = new PopupWindow(infoWebView = inflater.inflate(R.layout.property_info_layout, null, false), 1105, 685, true);
infoWebViewPopup.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
infoWebViewPopup.setFocusable(false);

infoWebHTMLView = (WebView)infoWebView.findViewById(R.id.infoWebHTMLView);
WebSettings mySettingsInfo = elemWebHTMLView.getSettings();
mySettingsInfo.setJavaScriptEnabled(true); 
```

按钮操作代码是：

```
WikiButton.setOnClickListener(new View.OnClickListener(){
    infoWebHTMLView.clearView();

    String urlToGet = "http://en.wikipedia.org/wiki/" + "SOME OTHER STRING HERE";

    // Load the URL into the web view
    infoWebHTMLView.loadUrl(urlToGet);

    // Calculate posX and posY for placement
    infoWebViewPopup.setOutsideTouchable(false);
    infoWebViewPopup.showAtLocation(findViewById(R.id.properties_view), Gravity.LEFT | Gravity.TOP, posX, posY);
} 
```

我为 WebView 实现的其他代码：

```
infoWebHTMLView.setWebChromeClient(new WebChromeClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url){
        view.loadUrl(url);

        return true;
    }

    public void onProgressChanged(WebView view, int progress) {
        elemWebHTMLView.invalidate();

        htmlProgress.setProgress(progress);

        if(progress >= 100){
            htmlProgress.setVisibility(View.INVISIBLE);
        }else{
            htmlProgress.setVisibility(View.VISIBLE);
        }
    }
}); 
```

PopupWindow、WebView 和 Button 都已在 XML 文件中定义。

任何帮助将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:33:28.143

您应该使用 WebViewClient，而不是 WebChromeClient。

```
infoWebHTMLView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}); 
```

确保在覆盖方法时添加 @Override 注释。如果您认为您正在覆盖一个方法，但实际上它并不存在，您会得到一个错误。

# sql-server - 在 SQL Server 中将日期时间值设置为变量的正确方法

> ID：12163315
> 
> 赞同：13
> 
> 时间：2012-08-28T16:09:31.077
> 
> 标签：sql-server, datetime

> **可能重复：**
> [转换和验证日期字符串的最佳方法](https://stackoverflow.com/questions/1138142/best-way-to-convert-and-validate-a-date-string)

在 SQL Server 中为 datetime 变量分配 datetime 值时，出于文化不可知的原因，哪种格式最适合采用，为什么？

下面预定的日期是 2013 年 12 月 1 日

```
DECLARE @myDate DATETIME
SET @myDate = '2013-12-01'
SET @myDate = '20131201'
SET @myDate = '12/01/2013'
SET @myDate = '2013-12-01T00:00:00.000'
SET @myDate = '2013-12-01T00:00:00' 
```

如果 @myDate 是 type `DATETIME2`，您的答案会有所不同吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T16:19:10.563

根据[ISO 8601](http://msdn.microsoft.com/en-us/library/ms190977%28v=sql.90%29.aspx)标准，问题中的以下 3 种格式是有效的：

```
DECLARE @myDate DATETIME
SET @myDate = '20131201'
SET @myDate = '2013-12-01T00:00:00.000'
SET @myDate = '2013-12-01T00:00:00' 
```

> 使用 ISO 8601 格式的优势在于它是一个国际标准。此外，使用此格式指定的日期时间值是明确的。此外，此格式不受 SET DATEFORMAT 或 SET LANGUAGE 设置的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:17:55.443

这在之前已经介绍过，例如[转换和验证日期字符串的最佳方法](https://stackoverflow.com/questions/1138142/best-way-to-convert-and-validate-a-date-string#1138172)

> ISO-8601 格式为 YYYYMMDD 仅用于日期，或 YYYY-MM-DDTHH:mm:ss 用于日期与时间

如果您不能保证 ISO 格式，那么您应该预先设置适用的[DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx)

**编辑**

Re: 你还会用这个吗`datetime2`

是的，实际上这在 MSDN [here 中已明确说明。](http://msdn.microsoft.com/en-us/library/bb677335.aspx#sectionToggle1)由于增加了 100ns 的精度，ISO 8601 格式为`YYYY-MM-DDTHH:mm:ss[.nnnnnnn]`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-28T16:13:16.460

`SET @myDate = '2013-12-01T00:00:00.000'`

`SET @myDate = '2013-12-01T00:00:00'`

`SET @myDate = '2013-12-01'`

这些是符合[ISO 8601的正确格式](http://en.wikipedia.org/wiki/ISO_8601)

# .net - 首次显示窗体时，Windows 窗体应用程序并不总是触发激活事件。

> ID：12163324
> 
> 赞同：1
> 
> 时间：2012-08-28T16:10:01.367
> 
> 标签：.net, forms, events

我不想在这个问题上花费更多时间，但如果您有兴趣阅读它并知道答案，请回复。提前致谢。

我有一个 Windows 窗体应用程序，它以最小化模式启动另一个 Windows 窗体应用程序，并将 ShowInTaskbar 设置为 False。第一个应用程序有一个显示按钮，该按钮使用以下方法显示另一个应用程序。

```
 ShowWindow(WindowHandle, ShowWindowCommands.Normal)
        SetForegroundWindow(WindowHandle) 
```

我在第二个应用程序中使用激活事件在激活时刷新其表单。问题是，在激活表单时，activate 事件通常不会触发。显示隐藏表单并激活，但未调用激活事件处理程序。第一个应用程序是一个 MDI 应用程序，但我不明白这会是一个因素。

第二个表单上有一个按钮可以隐藏它。此按钮仅调用表单的 Hide 方法，不会最小化表单。下次在第一个应用程序上按下 Show 按钮时，将为第二个应用程序触发 activate 事件。将第二个应用程序的 ShowInTask 栏设置为 True 没有帮助。最小化而不是隐藏窗口不会阻止在第二次激活应用程序时触发 Activate 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:42:54.607

我怀疑这是因为[激活事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activate.aspx)是针对可见 Windows 的。从 MSDN 文档（我的重点）：

> 如果这是活动应用程序，则激活表单会将其置于最前面，如果这不是活动应用程序，则它会闪烁窗口标题。**表单必须可见，此方法才能生效。**若要确定应用程序中的活动窗体，请使用 ActiveForm 属性或 ActiveMdiChild 属性（如果您的窗体位于多文档界面 (MDI) 应用程序中）。

作为替代方案，第一个应用程序可以向第二个应用程序发送一个组合键来触发内容刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:14:32.970

我仍然不确定是什么导致了问题，但我能够通过使用以下代码并切换到 VisibleChanged 事件而不是表单激活事件来解决它。

```
 ShowWindow(WindowHandle, ShowWindowCommands.Normal)
        ShowWindow(WindowHandle, ShowWindowCommands.Hide)
        ShowWindow(WindowHandle, ShowWindowCommands.Normal)
        SetForegroundWindow(WindowHandle) 
```

请注意，对于上面的代码，VisibleChanged 事件仅触发一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:13:00.257

好的，我放弃试图弄清楚为什么窗体的 Activated 事件处理程序在第一次显示并激活最小化、隐藏的窗口时不能可靠地触发。我尝试了所有我能想到的 ShowWindow 命令组合。我什至尝试引入计时器和睡眠，以防出现时间问题。任何时候显示最小化窗口时，Activated 事件都可能不会可靠地触发，并且它不触发可能与窗口被隐藏的事实无关。我没有测试过这些案例。

以下代码是我每次使用 VisibleChanged 事件而不是 Activate 事件时唯一可以工作的代码。

```
 If IsIconic(WindowHandle) Then
            ShowWindow(WindowHandle, ShowWindowCommands.Normal)
            ShowWindow(WindowHandle, ShowWindowCommands.Hide)
        End If
        ShowWindow(WindowHandle, ShowWindowCommands.Normal)
        SetForegroundWindow(WindowHandle) 
```

# jquery - 在 JSF + Primefaces 中的数据表和树节点之间拖放行为，反之亦然

> ID：12163327
> 
> 赞同：3
> 
> 时间：2012-08-28T16:10:07.600
> 
> 标签：jquery, jsf, primefaces

我知道 Prime faces 尚未在 Tree 节点上实现拖放行为，但目前是否有解决方法来实现此行为，或者根本不可能。我正在开发一个网站，我希望能够在以下位置之间进行拖放：

1.  数据表中的行 - 这是我能够实现的。
2.  树节点中的节点 - 我还没有尝试过，但是支持存在吗？
3.  表和树之间的数据

非常感谢这方面的任何帮助。我不一定需要解决方案，但即使是合理的方法也会对我有所帮助。

例如，我们可以使用jquery 的拖放功能而不是Prime faces 并调用后端的自定义ajax 请求来处理拖放事件吗？

有人有什么想法吗？

# javascript - 停止在 Javascript 上加载图像

> ID：12163329
> 
> 赞同：0
> 
> 时间：2012-08-28T16:10:13.987
> 
> 标签：javascript

我有一个可以加载很多小图像的 JS 软件。但是很多这些图像不再是必需的，但是浏览器会继续加载它们而不是我后来添加的新图像。

长话短说：我有一个`Image`仍在加载中，我可以取消图像加载吗？

Ps1：我看到Stackoverflow上有很多关于它的问题，但这些问题是指`<img>`尚未开始加载的，我的图像已经加载。

Ps2：如果没有标准的方法来做到这一点，使用 Firefox 和 Google Chrome 就足够了......

# dynamics-crm-2011 - 提取 XML 中链接实体的聚合计数不会返回 0

> ID：12163330
> 
> 赞同：9
> 
> 时间：2012-08-28T16:10:17.000
> 
> 标签：dynamics-crm-2011, fetchxml

## 问题

我有一个 Fetch XML 查询，该查询对未按预期运行的链接实体进行聚合计数。基本上我会返回一个课程列表，并计算当前注册该课程的联系人数量，但即使没有人注册该课程，我也会计算 1 个注册联系人。如果我注册 1 个联系人，我的计数为 1。如果我注册 5 个联系人，我的计数为 5，所以问题似乎解决了在没有相关记录时无法获得 0 的计数.

这是获取 XML

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false" aggregate="true">
  <entity name="new_coursesection">
    <attribute name="new_termscheduleid" groupby="true" alias="new_termscheduleid" />
    <attribute name="new_termid" groupby="true" alias="new_termid" />
    <attribute name="new_sectionname" groupby="true" alias="new_sectionname" />
    <attribute name="new_name" groupby="true" alias="new_name" />
    <filter type="and">
      <condition attribute="new_courseid" operator="eq" value="{some guid}" />
      <condition attribute="statecode" operator="eq" value="0" />
    </filter>
    <link-entity name="new_contactcoursesection" from="new_coursesectionid" to="new_coursesectionid" alias="new_contactcoursesection1" link-type="outer">
      <attribute name="new_contactcoursesectionid" aggregate="count" alias="coursecount" />
      <filter>
        <condition attribute="statecode" operator="eq" value="0"/>
      </filter>
      <order alias="coursecount" descending="true" />
    </link-entity>
  </entity>
</fetch> 
```

有没有人遇到过这个问题并知道解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T18:14:06.513

在启用跟踪日志的情况下查看生成的 SQL 后发现了问题。必须将 count 更改为 countcolumn：

破碎的

```
<attribute name="new_contactcoursesectionid" aggregate="count" alias="coursecount" /> 
```

使固定

```
<attribute name="new_contactcoursesectionid" aggregate="countcolumn" alias="coursecount" /> 
```

虽然我认为在处理 FetchXML 中链接实体的聚合值时，CRM 2011 中存在错误。即使用别名标记，Attribute 集合中的 AliasedValue 也将使用实际的 CRM 名称，而不是别名，即使 AttributeCollection 的键将正确使用别名。奇怪的...

# c++ - 如何在 C++ 头文件中使用 Objective-C？

> ID：12163342
> 
> 赞同：4
> 
> 时间：2012-08-28T16:10:58.167
> 
> 标签：c++, objective-c

我尝试在 Ah 文件中执行以下操作：

```
#include "Bar.hpp"

#import <Foundation/Foundation.h>

namespace foo 
{
  struct A : Bar::B
  {
    public:

    A() : Bar::B() {}

    id delegate;

    virtual void OnEvent(...);
  };
} 
```

但是我遇到了无数错误，例如“我不知道 NSString 是什么”。我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:12:27.533

你把它包含在一个`.cpp`文件中？将其重命名为`.mm`（这是 Objective-C++ 的正确文件扩展名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:17:15.793

如果您想在“常规”C++ 类（而不是 Objective C++）中使用您的 Objective C 类之一，您可以使用[本文中描述的技巧](http://philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)，归结为包含`<objc/objc-runtime.h>`而不是`<Foundation/Foundation.h>`，并使用`struct objc_object`原地包装一个“真正的”Objective C 对象。

```
#ifdef __OBJC__
@class ABCWidget;
#else
typedef struct objc_object ABCWidget;
#endif

namespace abc
{
  class Widget
  {
    ABCWidget* wrapped;
  public:
    Widget();
    ~Widget();
    void Reticulate();
  };
} 
```

# cocos2d-iphone - 在 CCSprite 上居中 CCLabelTTF

> ID：12163343
> 
> 赞同：0
> 
> 时间：2012-08-28T16:11:00.880
> 
> 标签：cocos2d-iphone, text-alignment, cclayer

我有一个简单的`CCLayer`子类，以圆圈作为背景图像。我也有一个`CCLabelTTF`作为子节点。**如何将标签的文本居中在背景图像上？**

这是我所拥有的：

```
// in MyCCLayer's init method
CCSprite *backgroundImage = [CCSprite spriteWithFile:@"circle.png"];
[self addChild:backgroundImage];
self.contentSize = backgroundImage.contentSize;

CCLabelTTF *label = [CCLabelTTF labelWithString:@"0" 
                                         dimensions:self.contentSize 
                                          alignment:UITextAlignmentCenter 
                                           fontName:@"Arial" 
                                           fontSize:32];
[self addChild:label]; 
```

我尝试更改标签上的锚点和位置，但我无法让文本仅以背景图像为中心。文本总是偏移。无论字体大小如何，我都希望文本居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:01:44.067

我假设查看您的代码，您的标签最终位于圆圈的底部？如果您创建如下标签，它应该适合您。

```
CCLabelTTF *label = [CCLabelTTF labelWithString:@"0" fontName:@"Arial" fontSize:32];
label.anchorPoint = ccp(0.5, 0.5);
label.position = ccp(backgroundImage.contentSize.width/2, backgroundImage.contentSize.height/2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T14:05:33.377

```
 try this code:

  CCSprite *backgroundImage = [CCSprite spriteWithFile:@"circle.png"];
  [self addChild:backgroundImage];

  backgroundImage.position=ccp(winSize.width/2,winSize.height/2);

  CCLabelTTF *label = [CCLabelTTF labelWithString:@"0" 
                                     dimensions:self.contentSize 
                                      alignment:UITextAlignmentCenter 
                                       fontName:@"Arial" 
                                       fontSize:32];
  label.position=backgroundImage.position;
  [self addChild:label]; 
```

# java - GWT 运行时 UserAgent 和编译时 UserAgent 不匹配

> ID：12163346
> 
> 赞同：1
> 
> 时间：2012-08-28T16:11:13.633
> 
> 标签：java, gwt, user-agent, gwtp

我最近将 gwt.xml 脚本更改为仅编译 1 个排列（仅限 ie8），这解决了我以前的问题，但是出现了一个外观问题，即每次使用 IE8 打开我的 GWT 页面时都会出现一个烦人的弹出窗口

在这里，我包括显示弹出窗口的屏幕截图，任何摆脱它的帮助将不胜感激。 ![在此处输入图像描述](../Images/e689fb6f45aa61c32ba226b390e88667.png)

更新：按照 Thomas 的建议，我可以通过为 ie8 和 safari 编译来消除该消息。但是从那时起，我只能在 IE9 文档模式下使用 IE9 打开网页，而不是使用 IE8 模式，我的用户正在使用 IE8

下面是 gwt.xml 的代码片段

```
 <set-property name="user.agent" value="ie8"/>
<extend-property name="user.agent" values="safari" /> 
```

下面是显示异常的 GWT 开发日志，用户代理“Mozilla/4.0”确实让我感到困惑，因为我确实安装了 Firefox 14.0.1。

```
 11:12:17.143 [ERROR] [dca] Failed to load module 'dca' from user agent 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; .NET4.0E; MS-RTC LM 8)' at 127.0.0.1:51883 
```

我还发现有一个适用于 IE 的 Google Chrome Frame 插件，但是由于它是公司默认设置，所以这将是我最后的选择。

好的，这是我的最后更新，在默认的 GWT 覆盖 6 排列中包括 IE8，但是我的 IE 有 Chromn Frame，它将我的浏览器屏蔽为 safari，IE8 和旧版浏览器不支持“AddEventListener”方法，这是大多数 GWT 小部件所依赖的。因此，我的 IE8 浏览器的 gwt 使用 safari 实现会在网页初始化时出错，说对象不支持 AddEventListener 方法。

我的第一次尝试是将 GWT 设置为只为 ie8 编译，但是这会生成上面显示的烦人的弹出窗口，

第二次尝试将 GWT 设置为同时编译 ie8 和 safari，这也是 AddEventListener 方法上的错误

最后一次尝试是利用 Chrome Frame 并设置

```
 <meta equiv="X-UA-Compatible" content="chrome=1"> 
```

这让带有 Chrome Frame 的 IE 浏览器使用 chrome 的引擎而不是 IE 引擎来处理网页，这对我没有多大作用，同样的故事。

我的最终解决方案是让 GWT 将 6 排列作为默认编译并禁用 Chrome 框架，这是公司范围内的默认插件，但如果用户想要这个插件，那么他们应该真正获得实际的 chrome，让自然选择发挥它的魔力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:18:03.590

GWT 认为您的 IE8 是一个*safari*，您可能安装了 Google Chrome Frame，并且您的页面或服务器发送[适当的位](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Making-Your-Pages-Work-With-Google-Chrome-Frame)来激活它。

所以，要么：

*   确保您的页面/服务器不会尝试在客户端启用 Chrome Frame
*   为 ie8*和*safari 编译（2 个排列）：`<set-property name="user.agent" value="ie8,safari" />`
*   卸载 Chrome 框架
*   或者如果只是为了在开发/测试你的应用程序时加快迭代，只编译`safari`排列

# powershell - foreach 循环的写入进度问题

> ID：12163347
> 
> 赞同：5
> 
> 时间：2012-08-28T16:11:13.693
> 
> 标签：powershell, active-directory, foreach

这可能是一个非常简单的答案。我无法让写入进度正常工作。我很确定问题出在我的变量上，但我似乎无法弄清楚到底是什么。

它现在所做的是在不存在任何输出文件时在第一次运行时进行炸弹。它会告诉我：

`Write-Progress : Cannot validate argument on parameter 'PercentComplete'. The 300 ar gument is greater than the maximum allowed range of 100\. Supply an argument that is less than 100 and then try the command again.`

它提到的“300 参数”每次都是一个不同的随机数。

现在，如果我使用现在存在的 livepcs.txt 再次运行脚本，它可能会起作用，也可能不起作用。即使是这样，进度条也会从一半开始。

这是我第一次尝试让 write-progress 工作，所以它可能非常简单，但我不太确定要寻找什么。您能提供的任何建议将不胜感激。

**最终代码**：

```
 #Import active directory module
Import-Module active*

#Query AD for all computers by name filter, AND that have an IP listed in AD, store in variable (use line 10)

$PCs = Get-ADComputer -Properties * -Filter {name -like "PCNameDomainPrefix*"} | Where-Object {$_.Ipv4Address -ne $null} | select name,ipv4address

#Dump list of PCs into CSV
$PCs | Export-Csv c:\script\pcs.csv

#Begin foreach loop to see which servers are alive

$i = 0

$livePCs = ForEach($name.name in $PCs) #specify the name string using .name after the variable
    {
    $entry = Test-Connection $name.name -count 1 -quiet #Test-connection pings. The -quiet parameter forces a boolean result (True/False).
    if ($entry -eq "True") {out-file -InputObject $name.name -Encoding ASCII -Width 50 -Append c:\script\livepcs.txt ; Write-Host "$name.name pings"} 
    else { write-host "server $name could not be contacted"}
    $i++
    Write-Progress -activity "Pinging servers . . ." -status "Pinged: $i of $($PCs.Count)" -percentComplete (($i / $PCs.Count)  * 100)
    }

#Announce WMI portion of script, clear host to get rid of status bar    
Clear-Host
Write-Host
Write-Host
Write-Host
Write-Host "Beginning WMI scans. Please wait..."
Write-Host
Write-Host
Write-Host

$livePCs = Get-Content C:\script\livepcs.txt

#Begin foreach loop to query each live machine using WMI. 

$i = 0    

foreach($livePC in $livePCs)
{
   $entry = Get-WmiObject win32_product -computername $livePC -Filter "Name LIKE '%db2%'"

   # do the work
   if ($entry -ne $null)
   {
     $livePc,$entry | out-file c:\script\db2pcs.txt -Encoding ASCII -Width 50 -Append
     Write-Host "$livePC has DB2 installed"
   } 
   else
   {
     write-host "$livePC does not have DB2 installed"
   }

   # update counter and write progress
   $i++
   Write-Progress -activity "Scanning WMI . . ." -status "Scanned: $i of $($livePCs.Count)" -percentComplete (($i / $livePCs.Count)  * 100)
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T19:51:26.403

在最后一个循环中，您需要在每次 WMI 查询后增加您的计数器，然后`Write-Progress`使用更新后的值进行调用。

清理并格式化：

```
$i = 0    

foreach($livePC in $livePCs)
{
   $entry = Get-WmiObject win32_product -computername $livePC -Filter "Name LIKE '%db2%'"

   # do the work
   if ($entry -ne $null)
   {
     $livePc,$entry | out-file c:\script\db2pcs.txt -Encoding ASCII -Width 50 -Append
     Write-Host "$livePC has DB2 installed"
   } 
   else
   {
     write-host "$livePC does not have DB2 installed"
   }

   # update counter and write progress
   $i++
   Write-Progress -activity "Scanning WMI . . ." -status "Scanned: $i of $($livePCs.Count)" -percentComplete (($i / $livePCs.Count)  * 100)
} 
```

# spring - Spring LDAP：InvalidNameException：/：[LDAP：错误代码 34

> ID：12163350
> 
> 赞同：2
> 
> 时间：2012-08-28T16:11:30.553
> 
> 标签：spring, ldap, spring-ldap

在验证用户身份时出现以下异常：

如果我像这样在 applicationContext 中使用值：

```
<property name="url" value="ldap://10.10.10.10:389/DC=lab2,DC=ins" />
<property name="base" value="DC=lab2,DC=ins" />
<property name="userDn" value="CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins" /> 
```

例外情况是：

```
Exception in thread "main" org.springframework.ldap.InvalidNameException: /: [LDAP: error code 34 - 0000208F: NameErr: DSID-031001BA, problem 2006 (BAD_NAME), data 8349, best match of:
    'DC=lab2,DC=ins/dc=lab2,dc=ins' 
```

否则，如果应用程序上下文是这样的：

```
<property name="url" value="ldap://10.10.10.10:389" />
<property name="base" value="DC=lab2,DC=ins" />
<property name="userDn" value="CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins" /> 
```

例外情况是：

```
Exception in thread "main" org.springframework.ldap.PartialResultException: nested exception is javax.naming.PartialResultException [Root exception is javax.naming.CommunicationException: lab2.ins:389 [Root exception is java.net.UnknownHostException: lab2.ins]]
    at org.springframework.ldap.support.LdapUtils.convertLdapException(LdapUtils.java:205) 
```

认证方法：

```
public boolean authenticate(String userName, String password) {
    AndFilter filter = new AndFilter();
    filter.and(new EqualsFilter("objectclass", "person")).and(
                new EqualsFilter("sAMAccountName", userName));
    return ldapTemplate.authenticate(DistinguishedName.EMPTY_PATH, filter
                .toString(), password);
} 
```

应用程序上下文.xml

```
<bean id="contextSource"
        class="org.springframework.ldap.core.support.LdapContextSource">
    <property name="url" value="ldap://10.10.10.10:389" />
    <property name="base" value="DC=lab2,DC=ins" />
    <property name="userDn" value="CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins" />
    <property name="password" value="secret" />
    <property name="baseEnvironmentProperties">
        <map>
            <entry key="java.naming.referral">
                <value>follow</value>
            </entry>
        </map>
    </property>
</bean>
<bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    <constructor-arg ref="contextSource" />
</bean>
<bean id="ldapContact"
        class="ldap.ContactLDAP ">
    <property name="ldapTemplate" ref="ldapTemplate" />
</bean> 
```

测试类：

```
Resource r = new ClassPathResource("applicationContext.xml");
BeanFactory factory = new XmlBeanFactory(r);
ContactLDAP contact = (ContactLDAP) factory.getBean("ldapContact"); 

System.out.println(contact.authenticate("username", "secret")); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:28:55.697

你不需要

```
<property name="base" value="DC=lab2,DC=ins" /> 
```

与在 UserDn 中一样，您已经放置了完整的 DN。

```
 <bean id="contextSource"
            class="org.springframework.ldap.core.support.LdapContextSource">
            <property name="url" value="ldap://10.10.10.10:389" />
            <property name="userDn" value="CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins" />
            <property name="password" value="secret" />

... 
```

这应该有效。（但我会避免 DN 中的空格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:10:20.563

可分辨名称中有一个斜线`/`字符。虽然这是 DN 中的合法字符，但它可能应该是逗号`,`。另见[专有名称](https://www.rfc-editor.org/rfc/rfc4514)

# javascript - javascript中的事件顺序无法正常运行

> ID：12163352
> 
> 赞同：1
> 
> 时间：2012-08-28T16:11:36.387
> 
> 标签：javascript, jquery, asp.net-mvc

我看过几个关于这个主题的帖子，但没有得到答案。我有一个 onClick 事件，它调用 Uploadfile() 函数，只有在调用 Uploadfile() 函数之后，我希望调用 EnableSaveButton() 函数。下面粘贴的是代码，我有点击事件、Uploadfile() 函数和 EnableSaveButton() 函数。目前只有 Uploadfile() 被调用，但 EnableSavebutton() 函数没有被触发。如果有人能告诉我我做错了什么，我将不胜感激。

***更新：让我重新措辞这个问题。如何确保仅在调用 UploadFile() 之后才调用 EnableSaveButton()。目前发生的情况是，EnableSaveButton 在 UploadFile() 之前触发。

```
$("#btnUploadFile").click(function(event) {
    event.preventDefault();
    uploadFile();
    EnableSaveButton();

});

function uploadFile() {
    $.get('<%: Url.Action("UploadFile","Files") %>', null, function(getData) {
        $(getData).appendTo('body');
    });
}

function EnableSaveButton() {
    var selectedvalue = $("#FileGuid").val();
    alert(selectedvalue);
    if (selectedvalue != "") {
        $("#btnSave").removeAttr("disabled");
    }
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:14:37.817

```
function (event) {
    event.preventDefault();
    EnableSaveButton();
} 
```

此函数已声明但未分配或使用......所以你的函数`EnableSaveButton`没有被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:19:34.603

我相信您希望在函数完成`EnableSaveButton()`后调用该`UploadFile()`函数（或者更具体地说，在`UploadFile`函数内部的 Ajax 调用完成之后），对吗？

```
$("#btnUploadFile").click(function (event) {
            event.preventDefault();
            uploadFile();
        });

  function uploadFile() {
        $.get(
            '<%: Url.Action("UploadFile","Files") %>',
            null,
            function (getData) {
                $(getData).appendTo('body');
                EnableSaveButton();
            }
        );
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:14:25.370

您在单击处理程序中声明了一个从未调用过的匿名函数。

```
function (event) {
    event.preventDefault();
    EnableSaveButton();
} 
```

为什么你不会这样做：

```
$("#btnUploadFile").click(function (event) {
    event.preventDefault();
    uploadFile();
    EnableSaveButton();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T17:00:37.347

那么为什么不调用 EnableSaveButton 作为上传文件的 ajax 代码的回调呢。我一直使用这种技术。ajax 请求获取一些数据并将其转储到页面中，然后执行用户定义的回调以调整滚动条、表单元素等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T16:18:29.517

这个：

```
function (event) { 
    event.preventDefault(); 
    EnableSaveButton(); 
} 
```

声明一个接受一个参数（称为事件）的匿名函数。然后它不会在任何地方被调用。如果你想调用你的函数，那么你可以这样做：

```
(function (event) { 
    event.preventDefault(); 
    EnableSaveButton(); 
})(event); 
```

或者：

```
var handler = function (event) { 
    event.preventDefault(); 
    EnableSaveButton(); 
}
handler(); 
```

或更简单：

```
EnableSaveButton(); 
```

# dojo - 难以将自定义模板化对话框从 dojo 1.5 升级到 1.7.3 或 1.8.0

> ID：12163353
> 
> 赞同：1
> 
> 时间：2012-08-28T16:11:42.663
> 
> 标签：dojo

我正在将 web 应用程序从 dojo 1.5 升级到 1.8（或 1.7.3）。这个应用程序有几个继承自 dijit.Dialog 的自定义模板化小部件。我发现这些根本无法正确渲染。例如，请参阅[http://jsfiddle.net/tinyels/XhrWF/1/](http://jsfiddle.net/tinyels/XhrWF/1/)

如果您将其设置为 dojo 1.5 或 1.6，则它的布局正确。在 1.7 中，它甚至不会`show()`。在 1.8 中，缺少各种附加点并且按钮不起作用。在调试器中检查它显示它只有一些附加点（titleBar、titleNode、closeButtonNode、closeText、containerNode、gridContainer）并且缺少几个，例如 btnGo。

我需要对小部件（或其模板）进行哪些更改才能使其在较新版本的 Dojo 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:46:34.723

我认为这`widgetsInTemplate`在 Dojo 1.7+ 中不再起作用。您的模板根本没有被解析。您可以手动调用`dojo.parser.parse(this.containerNode)`（例如 in `postCreate`），但您将丢失`dojoAttachPoint`和`dojoAttachEvent`生成引用。

在模板中包含小部件的 Dojo 1.7+ 方式是 subclass `dijit/_WidgetsInTemplateMixin`，在您的情况下：

```
dojo.require("dijit._WidgetsInTemplateMixin");

dojo.declare("imed.widgets.DapDialog", [dijit.Dialog, dijit._WidgetsInTemplateMixin], {}); 
```

一切都应该像以前一样工作。在 jsFiddle 试试：http: [//jsfiddle.net/phusick/UEXmF/](http://jsfiddle.net/phusick/UEXmF/)

# c# - 调度程序锁定 UI

> ID：12163358
> 
> 赞同：1
> 
> 时间：2012-08-28T16:11:56.317
> 
> 标签：c#, wpf, dispatcher

我正在使用带有 WPF 的 MVC 模型，并且在锁定 UI 时遇到了困难。该应用程序正在两个端点之间进行通信，并且 UI 有一个 TextBox，我将详细的通信日志写入该文本框。代码可以一次发送单个文件或多个文件。

我有一个特定的日志记录类，用于处理日志，因为它们需要创建、格式化和写入磁盘。我将 TextBox 传递给 Logging 类，然后使用 Dispatcher 对其进行写入，但是当我同时写入多个日志时，UI 会锁定。如果我只从一个发送的文件中写入日志，那么一切正常。

我试过添加一个线程锁，但这似乎没有解决任何问题。我什至锁定了整个写入过程（处理信息、写入磁盘和写入 UI），但仍然遇到相同的锁定问题。

下面列出了我用来写入 UI 的代码：

```
 /// <summary>
    /// Post the message to the UI.
    /// </summary>
    /// <param name="message">Message to post.</param>
    /// <param name="scrollToEnd">Scroll to the end of the Text Box if true</param>
    private void PostMessage(String message, bool scrollToEnd)
    {
        LoggingBox.Dispatcher.BeginInvoke(
            System.Windows.Threading.DispatcherPriority.Normal,
            new Action(delegate()
                {
                    LoggingBox.AppendText(message);
                    if (scrollToEnd)
                        LoggingBox.ScrollToEnd();
                }
            ));
    } 
```

LogBox 只是一个文本框：

```
 /// <summary>
    /// Location for logs to be displayed.
    /// </summary>
    public TextBox LoggingBox { get; set; } 
```

这是我第一次使用 WPF，所以我确信我犯了一个简单的错误。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:06:02.140

我要更改的第一件事是将调度程序调用中的优先级设置为后台，这意味着日志更改请求仅在 UI 完成所有其他杂务时才得到处理。否则，您可以尝试在 StringBuilder 中收集日志条目，并且每秒钟左右更新一次 UI，以节省昂贵的屏幕更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:09:50.280

这`Dispatcher`只是主 UI 线程。[它允许您在不同的DispatcherPriorities](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)中安排进程以影响任务运行的时间，但是它仍然是一个线程，并且对其进行任何繁重的处理仍然会锁定您的 UI。

因此，所有繁重的处理都应该在另一个线程上完成，并且只有在 UI 线程上确实需要完成某些事情时才传递给调度程序线程。

我实际上建议更新`string`属性并将其绑定`TextBox.Text`到您的字符串，而不是`TextBox`直接更新。这将允许您在另一个线程中完成所有处理，而完全不用担心`Dispatcher`。

此外，默认情况下 a`TextBox`具有设置为 true 的[IsUndoEnabled](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.isundoenabled.aspx)属性。这使它保留了对文本的所有更改的历史记录，因此您可以使用撤消/重做热键。如果您不想切换到绑定，至少`IsUndoEnabled=false`在您的`TextBox`.

最后，就像[hbarck 所说](https://stackoverflow.com/a/12164983/302677)，将你的切换`DispatcherPriority`到更低的值，例如`DispatcherPriority.Background`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:20:50.220

在完成代码并禁用各个部分之后，我意识到发布到 UI 并不是导致 UI 冻结的原因。完成大部分工作的对象之一并没有被原始开发人员放在单独的线程上。创建线程后，UI 停止冻结。

感谢所有给予帮助的人。这里的社区很棒！

# node.js - 无法使用 FTPClient node.js 模块上传两个或更多文件

> ID：12163359
> 
> 赞同：1
> 
> 时间：2012-08-28T16:12:08.313
> 
> 标签：node.js, put, ftp-client

我正在使用 node 和 node-ftp 模块。我需要将两个文件上传到另一台服务器，我可以上传一个文件，但是当我尝试上传两个文件时，它会抛出错误。

根据他们的api，这是发送文件的代码

```
var fs = require('fs');
conn.put(fs.createReadStream('/var/www/videoComplete/'+ videoID +'.flv'), '/home/wowza/content/'+ videoID +'.flv', function(e) {
  console.log(fileName + '.flv uploaded to Streaming Server :)');
  conn.end();
}); 
```

效果很好，但是如果我想做两个文件，我假设我必须重复该功能，但它不起作用。有谁知道如何使用 FTPClient 发送两个或多个文件

这是我要执行的代码

```
conn = new FTPClient({ host: 'serverIP' });
conn.on('connect', function() {
  conn.auth('user', 'pass', function(e) {
    if (e) throw e;
    var fs = require('fs');

    conn.put(fs.createReadStream('/var/www/ce-videoComplete/'+ videoID +'.flv'), '/home/wowza/content/'+ videoID +'.flv', function(e) {
      console.log(fileName + '.flv uploaded to Streaming Server :)');
      conn.end();
    });

    conn.put(fs.createReadStream('/var/www/ce-thumbnails/'+ videoID +'.jpg'), '/var/www/html/thumbnails/'+ videoID +'.jpg', function(e) {
      console.log(fileName + '.jpg uploaded to Streaming Server :)');
      conn.end();
    });

  });
});
conn.connect(); 
```

更新：我也试过了，但它不会再次连接。

```
conn.put(fs.createReadStream('/var/www/ce-videoComplete/'+ videoID +'.flv'), '/home/wowza/content/'+ videoID +'.flv', function(e) {
  console.log(fileName + '.flv uploaded to Streaming Server :)');
  conn.end();

  conn.put(fs.createReadStream('/var/www/ce-thumbnails/'+ videoID +'.jpg'), '/var/www/html/thumbnails/'+ videoID +'.jpg', function(e) {
    console.log(fileName + '.jpg uploaded to Streaming Server :)');
    conn.end();
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:03:47.853

在两个文件都连续上传之前不要结束连接：

```
conn.put(fs.createReadStream('/var/www/ce-videoComplete/'+ videoID +'.flv'), 
    '/home/wowza/content/'+ videoID +'.flv',
    function(e) {
        console.log(fileName + '.flv uploaded to Streaming Server :)');

        conn.put(fs.createReadStream('/var/www/ce-thumbnails/'+ videoID +'.jpg'),
            '/var/www/html/thumbnails/'+ videoID +'.jpg', 
            function(e) {
                console.log(fileName + '.jpg uploaded to Streaming Server :)');
                // Now that both files are uploaded, end the connection.
                conn.end();
            });  
        });
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T14:50:11.000

我是[FTPimp](https://www.npmjs.com/package/ftpimp)的作者，与任何其他 Node FTP 模块不同，FTPimp 有一个专有队列，可以异步和顺序地运行所有内容，因此您可以通过以下方式避免回调地狱和耦合依赖：

[FTPimp.put](http://ftpimp.net/FTP.html#put)

```
ftp.put(['/var/www/ce-videoComplete/'+ videoID +'.flv', '/home/wowza/content/'+ videoID +'.flv'], function (err, filename) {
    console.log(fileName + 'uploaded to Streaming Server :)');
});
ftp.put(['var/www/ce-thumbnails/'+ videoID +'.jpg', '/var/www/html/thumbnails/'+ videoID +'.jpg'], function(err, filename) {
    console.log(fileName + ' uploaded to Streaming Server :)');
    ftp.quit();
}); 
```

***并且***由于`FTPimp.put()`将文件名传递给回调，因此您的日志也更简单了:) 干杯

# php - 无论我调用多少次“next_result()”，mysqli 都会出现“命令不同步”错误

> ID：12163360
> 
> 赞同：1
> 
> 时间：2012-08-28T16:12:08.053
> 
> 标签：php, mysql, mysqli

我一直试图让这个 php 函数工作一段时间，但没有成功。由于某种原因，每次运行时，我的 mysql 中都会出现“命令不同步，您现在无法运行此命令”错误。我正在使用与我在所有其他 php 项目中所做的相同的技术，即调用 mysqli->next_result 以便我可以避免该错误。但是，当我在这里调用它时，它似乎没有任何效果。

```
if($questionType == 5){
    global $To;
        $to="znielsen@gbpi.net";
        $subject = "txtoutage session completed";
        $message ="Session completed by: ".$number." \n on: ".date("Y-m-d H:i:s")." \n";
        if($sid = $mysqli->query("CALL GetSessionFromPhoneNumProc('$number')")){
            $sids = $sid->fetch_assoc();
            $sid->free();
            $sids = $sids['sid'];
            $mysqli->close();
            $res->free();
            if($res = $mysqli->query("CALL GetAnswersFromSession('$sids')")){
                while($row = $res->fetch_assoc()){
                $mysqli->next_result();
                $qid = $row['Question_ID'];
                $question = $mysqli->query("SELECT Question_Text FROM questions WHERE Question_ID = '$qid'");
                $question = $question->fetch_assoc();
                $question = $question['Question_Text'];
                if($row['Answer_Text'] == null){
                    $displayText = $row['Answer_Body'];
                }
                else{
                    $displayText = $row['Answer_Text'];
                }
                $message = $message.$question.": ".$displayText." \n";
            }
        }
        else{
            $log->logError("mysql error sess: (" . $mysqli->errno . ") " . $mysqli->error);
        }
    }
    else{
        $log->logError("mysql error answers: (" . $mysqli->errno . ") " . $mysqli->error);
    }
    $from = "txtoutage@gbpi.net";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:39:38.950

`mysqli_next_result`从您的代码中删除对的调用（此行： `$mysqli->next_result();`）。

正如 PHP 文档中所解释的，[mysqli_next_result](http://php.net/mysqli_next_result)准备从先前调用 mysqli_multi_query() 的下一个结果集，可以通过 mysqli_store_result() 或 mysqli_use_result() 检索。

既然你没有使用`mysqli_multi_query()`，**你不需要也不能**调用`mysqli_next_result`。

在您的代码中，下一个结果是通过 using 检索的`mysqli_fetch_assoc`，并且您在每次调用`mysqli_query`.

# python - 在 scikit-learn 中使用具有多项式内核的支持向量分类器

> ID：12163362
> 
> 赞同：3
> 
> 时间：2012-08-28T16:12:16.177
> 
> 标签：python, machine-learning, nlp, scikit-learn

我正在尝试使用 scikit-learn 包中实现的不同分类器来完成一些 NLP 任务。我用来执行分类的代码如下

```
def train_classifier(self, argcands):
        # Extract the necessary features from the argument candidates
        train_argcands_feats = []
        train_argcands_target = []

        for argcand in argcands:
            train_argcands_feats.append(self.extract_features(argcand))
            train_argcands_target.append(argcand["info"]["label"]) 

        # Transform the features to the format required by the classifier
        self.feat_vectorizer = DictVectorizer()
        train_argcands_feats = self.feat_vectorizer.fit_transform(train_argcands_feats)

        # Transform the target labels to the format required by the classifier
        self.target_names = list(set(train_argcands_target))
        train_argcands_target = [self.target_names.index(target) for target in train_argcands_target]

        # Train the appropriate supervised model
        self.classifier = LinearSVC()
        #self.classifier = SVC(kernel="poly", degree=2)

        self.classifier.fit(train_argcands_feats,train_argcands_target)

        return

def execute(self, argcands_test):
        # Extract features
        test_argcands_feats = [self.extract_features(argcand) for argcand in argcands_test]

        # Transform the features to the format required by the classifier
        test_argcands_feats = self.feat_vectorizer.transform(test_argcands_feats)

        # Classify the candidate arguments 
        test_argcands_targets = self.classifier.predict(test_argcands_feats)

        # Get the correct label names
        test_argcands_labels = [self.target_names[int(label_index)] for label_index in test_argcands_targets]

        return zip(argcands_test, test_argcands_labels) 
```

从代码中可以看出，我正在测试支持向量机分类器的两种实现：LinearSVC 和带有多项式内核的 SVC。现在，对于我的“问题”。使用 LinearSVC 时，我得到了一个没有问题的分类：测试实例被标记了一些标签。但是，如果我使用多项式 SVC，则所有测试实例都带有相同的标签。我知道一种可能的解释是，简单地说，多项式 SVC 不是用于我的任务的合适分类器，这很好。我只是想确保我正确使用了多项式 SVC。

感谢您给我的所有帮助/建议。

**更新** 按照答案中给出的建议，我更改了训练分类器执行以下操作的代码：

```
# Train the appropriate supervised model
parameters = [{'C': [1, 10, 100, 1000], 'gamma': [0.001, 0.0001], 'kernel': ['poly'], 'degree': [2]}]
self.classifier = GridSearchCV(SVC(C=1), parameters, score_func = f1_score) 
```

现在我收到以下消息：

```
ValueError: The least populated class in y has only 1 members, which is too few. The minimum number of labels for any class cannot be less than k=3. 
```

这与我的训练数据中类的实例分布不均匀有关，对吧？还是我错误地调用了该程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:25:57.757

[在这两种情况下，您都应该使用网格搜索](http://scikit-learn.org/stable/modules/grid_search.html)调整正则化参数 C 的值。你不能比较结果，否则一个好的 C 值可能会为另一个模型产生糟糕的结果。

对于多项式内核，您还可以网格搜索度数的最佳值（例如 2 或 3 或更多）：在这种情况下，您应该同时网格搜索 C 和度数。

**编辑**：

> 这与我的训练数据中类的实例分布不均匀有关，对吧？还是我错误地调用了该程序？

检查每个类是否至少有 3 个样本才能进行`StratifiedKFold`交叉验证`k == 3`（我认为这是`GridSearchCV`用于分类的默认 CV）。如果你有更少，不要指望模型能够预测任何有用的东西。我建议每个类至少有 100 个样本（作为一个有点随意的经验法则，除非你处理少于 10 个特征并且类之间的决策边界有很多规律性的玩具问题）。

顺便说一句，请始终将完整的回溯粘贴到问题/错误报告中。否则，可能没有必要的信息来诊断正确的原因。

# c# - 插入大文件时出现“ORA-03135：连接失去联系”

> ID：12163370
> 
> 赞同：8
> 
> 时间：2012-08-28T16:12:48.240
> 
> 标签：c#, oracle, odp.net

我正在尝试使用实体框架（ODP.Net）将可能大量的二进制数据插入到远程 Oracle（11g）数据库中。它适用于非常小的文件（<5 KB），但对于较大的文件（例如 44 KB）我得到一个错误：“ORA-03135：连接丢失联系”。

我不认为它超时，因为异常发生在执行命令的一秒钟内。

我尝试在我的连接字符串中设置以下两项，但无济于事：

*   `Validate Connection=true`
*   `Pooling=false`

我还查看`listener.log`了远程机器上的文件。它显示正在建立的连接，但没有异常或终止连接的迹象。

我愿意提供建议的修复或故障排除方法。

**编辑：**

访问本地网络上的 Oracle 实例时，同样的 SQL 操作也有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-19T13:14:19.840

这可能是一个复杂的问题，有许多不同的可能原因和解决方案。从这里开始：

[http://www.dba-oracle.com/t_ora_03135_connection_lost_contact.htm](http://www.dba-oracle.com/t_ora_03135_connection_lost_contact.htm)

> 回答： orr 实用程序显示 ORA-03135 错误：
> 
> ORA-03135: 连接失去联系
> 
> 原因：1）服务器意外终止或被迫终止。或 2) 服务器超时连接。
> 
> 行动：1）检查服务器会话是否终止。2) 检查sqlnet.ora中的超时参数是否设置正确。
> 
> 当防火墙终止连接时远程连接时，ORA-03135 错误很常见。
> 
> ORA-03135 错误的一种解决方案是增加 sqlnet.ora 文件中 sqlnet.ora expire_time 参数的值或检查 SQL*Plus 配置文件中的 expire 参数。
> 
> 要诊断 ORA-03135 错误，首先使用 ps –ef|grep 语法检查操作系统 PID 是否仍然存在。
> 
> 检查客户端和服务器之间是否存在网络地址转换 (NAT)
> 
> 在 Windows 中，检查 Windows 防火墙是否正在检查您的本地连接：
> 
> Windows XP -> 控制面板 -> 安全 -> 选项卡“高级”
> 
> 此外，将参数 sqlnet.inbound_connect_timeout 和 inbound_connect_timeout_listenername 设置为 0 可以阻止 ORA-03135 错误。

同样如上所述，检查数据库警报日志是否在连接断开的同时发生错误。例如，有时它可能是由 ora-600 或 ora-7445 引起的。它不应出现在侦听器日志中，因为只有在握手完成后才会出现此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-09T14:29:12.530

这种情况一般由**断开/陈旧的连接**引起，取自连接池。如果在 Pooling=false 后出现此异常，则很可能防火墙会因为**tcp 空闲超时而阻止连接。**确保 tcp 空闲超时值大于预期的命令执行时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T11:41:22.673

尝试使用[KeepAlive](https://docs.oracle.com/en/database/oracle/oracle-data-access-components/19.3.2/odpnt/ConnectionKeepAlive.html)设置，这可以防止丢失连接的池错误。

[https://github.com/oracle/dotnet-db-samples/issues/58](https://github.com/oracle/dotnet-db-samples/issues/58)（最初这是针对 .NET Core 和 Oracle.ManagedDataAccess.Core 版本不低于 2.19.100 ）

`connection.KeepAlive = true;`在打开连接之前

# iphone - 多个 NSXMLParsers 未终止

> ID：12163371
> 
> 赞同：0
> 
> 时间：2012-08-28T16:12:50.923
> 
> 标签：iphone, objective-c, ios, xml, nsxmlparser

好的，所以我在做一些 NSXMLParsing 时遇到了一些问题。解析器单独工作正常，但是当我尝试在后台异步运行它们时，只有其中一个会指示它已完成对文档的解析。

为了解释我的整个过程，它如下

1.  我在后台使用多个 NSURLConnections 和 NSURLRequests 加载 2 个网页，以免阻塞用户界面
2.  然后，我获取该数据并将其传递给 xml 解析器。
3.  每个网页都有一个单独的 XML 解析器，每个都有自己的引用和分配给它的内存。
4.  然后我像往常一样运行解析器，它会查找我指出的特定标签，yadda yadda，这些东西都工作正常。
5.  当我让解析器指示它们已完成时，问题就出现了，我使用该`parserDidEndDocument:(NSXMLParser *)parser`方法检查文档是否已完成。不幸的是，这个方法只被调用一次，所以我不知道两个解析器是否都完成了。

我的代码是这样的：

**连接完成时**

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection {
    if (connection == actConnection) {
        [self processSynopsis]; // initiate synopsis parser
    } else if (connection == castConnection) {
        [self processCast]; // initiate cast parser
    }
} 
```

**分配和启动概要解析器**

```
-(void) processSynopsis {
    actParser = [[NSXMLParser alloc] initWithData:actData];
    [actParser setDelegate:self];
    [actParser parse];
} 
```

**分配和启动强制转换解析器**

```
-(void) processCast {
    castParser = [[NSXMLParser alloc] initWithData:castData];
    [castParser setDelegate:self];
    [castParser parse];
} 
```

**检查解析器是否终止**

```
-(void) parserDidEndDocument:(NSXMLParser *)parser {

    if (parser == actParser) {
        NSLog(@"ended act %@",parser);
    } else if (parser == castParser) {
        NSLog(@"ended cast %@",parser);
    }
} 
```

由于某种原因，该`parserDidEndDocument`方法只会被调用一次。任何人都看到任何错误或以前遇到过这个问题。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:18:22.557

NSLog 是 NSLogv 的一个简单前端，它执行实际的日志记录工作。根据文档：

> NSLogv 的输出是序列化的，因为一个进程中只有一个线程可以一次执行上述写入/日志记录。在下一个线程可以开始尝试之前，所有写入/记录消息的尝试都已完成。

我不确定如何解释“可以开始”。这可能意味着在 NSLogv 运行时记录某些内容的尝试将被忽略。因此，如果您的第二个解析器在第一个解析器之后很快完成，则不会发送日志消息。

尝试使用@synchronized() 指令来防止两个线程相互踩踏。像这样的东西：

```
-(void) parserDidEndDocument:(NSXMLParser *)parser {
    @syncronized(self) {
        if (parser == actParser) {
            NSLog(@"ended act %@",parser);
        } else if (parser == castParser) {
           NSLog(@"ended cast %@",parser);
        }
    }
} 
```

# c# - 编程“Spring.Net”配置

> ID：12163372
> 
> 赞同：1
> 
> 时间：2012-08-28T16:12:52.073
> 
> 标签：c#, unit-testing, dependency-injection, spring.net

我已经开始研究一个使用 Spring.Net 的项目，而且我是从 Unity 背景开始的。我正在尝试为解决方案的一部分设置集成测试，并且需要设置 Spring 来按需构建我的所有类。我不想使用配置文件。

我想做以下事情：

*   注册我的类型

*   配置根实例

*   当我从容器中拉出所有类型时，填充所有类型

我已经在容器中填充了我的类型（包括模拟），并配置了我的根实例，但没有填充任何类型。似乎没有任何属性可以指定我想要的内容，并且类型映射由字符串名称完成。

我正在考虑建立一个 MutablePropertyValues 集合，但它们似乎只采用我想要填充的类的实例，而不是引用，这会破坏延迟加载。有我可以使用的引用类型类吗？

如果这有点含糊，我很抱歉，但我知道我想要实现什么，并且不确定实现它的最佳方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:27:30.947

要使用代码配置 Spring .NET，您可以使用 CodeConfig 项目 - [http://www.springframework.net/codeconfig/index.html](http://www.springframework.net/codeconfig/index.html)

你如何运行你的测试？您可以从容器继承，`AbstractDependencyInjectionSpringContextTests`并且您的类将从容器中加载。更多信息在这里 - [http://www.springframework.net/doc-latest/reference/html/testing.html](http://www.springframework.net/doc-latest/reference/html/testing.html)

# java - Netbeans：如何将 Java EE 容器添加到 java 项目

> ID：12163374
> 
> 赞同：2
> 
> 时间：2012-08-28T16:12:51.983
> 
> 标签：java, jakarta-ee, netbeans, containers

我正在尝试在 Netbeans 中发送电子邮件 SSL 电子邮件，并且我已将两者都添加`javaee.jar`到`mail.jar`我的项目中，但我收到以下错误

```
Exception in thread "main" java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/MessagingException
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at GUI.CompilerForm.<init>(CompilerForm.java:43)
at Compiler.Main.main(Main.java:19) 
```

根据我的研究，我发现我将不得不在 Java EE 容器中运行我的代码，但我没有这方面的经验。我在网上查了一下，但收效甚微，只发现了 Java EE 容器。

那么如何将代码添加到 Java EE 容器中，然后在项目中使用它呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:35:42.633

> *如何将 Java EE 容器添加到 Java 项目*

不，请不要那样做。您的唯一意图似乎是运行 Java SE（桌面）应用程序，而不是 Java EE（Web）应用程序。您不应将 Java SE 应用程序作为 Java EE 应用程序运行。

您应该为您面临的具体问题找到*正确*的解决方案，而不是询问如何获得*错误*的解决方案。

至于你的具体问题，

> 线程“主”java.lang.ClassFormatError 中的异常：类文件 javax/mail/MessagingException 中非本机或抽象方法中的缺失代码属性

这基本上意味着`javax/mail/MessagingException`当前运行时类路径中提到的类（ ）*仅*包含类和方法签名，而根本没有具体代码。换句话说，当前运行时类路径中提到的类是*空*的。事实上，`javaee.jar`您所拥有的（显然您下载它是为了解决编译/导入问题的错误尝试）基本上包含抽象的 Java EE API *，没有*任何具体的实现代码。

这个不对。**完全删除**该`javaee.jar`文件。只要`mail.jar`你可以从[JavaMail 网站](http://www.oracle.com/technetwork/java/javamail/index.html)下载就足够了。您的具体问题是因为该`javaee.jar`文件*也*包含`javax.mail`API（但没有实现）在类加载中优先于`mail.jar`包含具体`javax.mail`实现的文件。该`javaee.jar`文件应仅用作 Java EE 项目中的编译时依赖项，而不应用作 Java SE 项目的运行时依赖项。

# html - 防止发件人破坏 html 时事通讯

> ID：12163375
> 
> 赞同：3
> 
> 时间：2012-08-28T16:12:56.520
> 
> 标签：html, newsletter

所以我创建了一个漂亮的 html 时事通讯，在电子邮件客户端上对其进行了测试，快乐的时光就在眼前。然后我把它给客户，他们把它寄出去。一切都很好。

但是当他们想在一周后发送另一个时。他们根据自己的知识编辑 html 并修改和更改以更新内容......最终破坏了一些东西。

你们建议我如何处理我的时事通讯以防止发件人破坏它们？我不想参与每一个发出的时事通讯。是否有一个应用程序或类似于“迷你 CMS”的东西可以用来帮助他们编辑代码的正确部分？

**编辑**

感谢您的回答。

所以我想我最好的解决方案可能只是在我设计时事通讯时考虑这个问题。尝试将内容全部保存在一个地方等等。

对我来说不幸的是，我工作的公司经营着大约 60 家电子商务商店，它们都是在内部管理的。因此，每当其中一位商店经理打破他们的时事通讯时，他们都会来找我修复它......呃，我应该接受委托！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:30:03.097

如果客户愿意使用时事通讯网站（例如 mailchimp、constant contact、cake mail），您可以简单地创建一个模板，客户只能在其中编辑某些字段。

这样，什么都不会被破坏，但这些网站需要花钱（取决于提供的计划）

如果他们坚持要通过电子邮件软件（outlook、apple mail 等）发送，他们可以注册一个免费的蛋糕邮件帐户，填写模板，将电子邮件发送给自己，然后转发（或更好）复制粘贴到新电子邮件中并将其发送给他们的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:20:37.017

您的时事通讯的 HTML 是如此具体，以至于没有“迷你 cms”可以开箱即用地做到这一点。您必须自己编写（或修改一些现有的模板系统）以使其具有适当的字段和自由格式的文本区域。即使这样，您也必须以这样一种方式设计您的 HTML，即当有人在给定区域中放置太多文本时，它不会破坏布局。

这是一个相当复杂的问题，需要适度的努力来“防白痴”整个事情。这本身就是一个自定义应用程序，而且价格不菲。你得到你所付出的。

有[提供此类功能的服务](http://www.exacttarget.com/)，但您仍然需要花时间正确配置它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:14:30.827

这被称为计费时间——如果他们打破了它，那就是你口袋里的钱让你修复它。如果他们不想为你的时间付钱，那就是他们的问题。

这是一件好事:)

话虽如此，模板系统无论如何都是一个好主意。创建一个通用的页眉和页脚，并引用一个包含新闻稿内容的“正文”文件。这不一定会消除新闻通讯正文中 HTML 损坏的风险，但可以减轻您未来的新闻通讯义务的压力。

如果这真的只是您不想再做的事情，他们也可以使用具有内置 WYSIWYG 界面的第三方电子邮件服务。我会推荐一些像[MyEmma.com](http://MyEmma.com)这样的小网站来启动，并根据客户的需求进行构建。

# sql - Rails，在最后一个之前找到对象，例如-1

> ID：12163376
> 
> 赞同：1
> 
> 时间：2012-08-28T16:13:10.000
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

整个下午，

我有这个查询，想知道如何将其转换为查找最后但一个记录，而不是 .last 它会得到-1。（我已阅读[Rails：如何在上次之前找到记录？](https://stackoverflow.com/questions/7015020/rails-how-to-find-record-before-last)但我不确定如何转换此查询）

编码;

```
Model.last.hotels.find_by_winner(true) 
```

提前谢谢了！安迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:16:11.110

```
Model.order('id desc').offset(1).first.hotels.find_by_winner(true) 
```

# python - 使用 oauth2 和服务器端 python 的范围无效

> ID：12163385
> 
> 赞同：1
> 
> 时间：2012-08-28T16:13:52.337
> 
> 标签：python, oauth-2.0, google-drive-api

在身份验证期间重定向到 google 时出现错误

该网页有： 一些请求的范围无效。{invalid=[https://www.googleapis.com/drive/v2/files]}了解更多请求详细信息范围=https://www.googleapis.com/drive/v2/files

在我的 Drive SDK 控制台上，启用两个范围：[https://www.googleapis.com/auth/drive] 和 [https://www.googleapis.com/drive/v2/files]

这是有问题的网址（内容已编辑）： [https ://accounts.google.com/ServiceLogin?service=lso&passive=1209600&continue=https://accounts.google.com/o/oauth2/auth?response_type%3Dcode% 26scope%3Dhttps://www.googleapis.com/drive/v2/files%26access_type%3Doffline%26redirect_uri%3Dhttps://www.myweb.com:8181/oauth2callback%26client_id%1111111.apps.googleusercontent.com%26hl% 3Den-US%26from_login%3D1%26as%3D4d3393dc2133b68e<mpl=popup&shdf=](https://accounts.google.com/ServiceLogin?service=lso&passive=1209600&continue=https://accounts.google.com/o/oauth2/auth?response_type%3Dcode%26scope%3Dhttps://www.googleapis.com/drive/v2/files%26access_type%3Doffline%26redirect_uri%3Dhttps://www.myweb.com:8181/oauth2callback%26client_id%1111111.apps.googleusercontent.com%26hl%3Den-US%26from_login%3D1%26as%3D4d3393dc2133b68e&ltmpl=popup&shdf=) &scc=1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:32:11.990

范围是：

```
https://www.googleapis.com/auth/drive 
```

另一个是您可以向其发出 API 请求的 URL，它不是范围。

# javascript - PDF文件复选框验证打印？

> ID：12163387
> 
> 赞同：0
> 
> 时间：2012-08-28T16:13:59.343
> 
> 标签：javascript, pdf, scripting, acrobat

我有一个包含 2 个复选框的 PDF 文档。我已经在 Acrobat pro X 中验证了它们。

我的问题是如何在不选中任一复选框的情况下防止打印文档？用户必须先选中至少 1 个复选框，然后才能打印文档。

我有 checkbox1 和 checkbox2

我如何通过 Javascript 做到这一点？

谢谢。

# sql - SET SCAN 和 SET DEFINE 的区别

> ID：12163389
> 
> 赞同：1
> 
> 时间：2012-08-28T16:14:08.173
> 
> 标签：sql, oracle

为什么在 SQL*PLUS 中我们有 SET SCAN 和 SET DEFINE ？我知道两者在 SQL 中可以互换使用。我测试并发现如果我将其中任何一个设置为 OFF，替换变量将不起作用。他们是否有任何我们需要两者并且两者的重要性可以同时理解的特定情况？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:33:33.627

`SET DEFINE`更灵活，因为它允许您将替换字符从更改为`&`其他字符，而`SET SCAN`只能打开或关闭。

可能更重要的`SET SCAN`是，已经过时了；从[文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/apc.htm#sthref3081)：

> 当前版本的 SQL*Plus 中提供了过时的命令。在未来的版本中，它们可能只能通过设置 SQLPLUSCOMPATIBILITY 变量来使用。您应该使用过时的命令修改脚本以使用替代命令。

所以现在两者都有效，但我不会`SET SCAN`在任何新代码中使用。

# excel - 使用 Excel VBA 关闭 Powerpoint 对象（不使用 Powerpoint.Application）

> ID：12163390
> 
> 赞同：5
> 
> 时间：2012-08-28T16:14:15.117
> 
> 标签：excel, vba, object, powerpoint

希望有人可以帮助我一些VBA代码。我使用 VBA 循环将 Excel 图表、文本框和表格粘贴到 Powerpoint 模板中。但是，因为我不能确定用户是否会安装 Powerpoint 对象库，所以我不能将 Dim PPTApp 用作 Powerpoint.Application 类型语法。

我使用对象。它工作得很好。除了一件：关闭Powerpoint。

代码：

```
Dim oPPTPres As Object  ' Late binding: This is a PowerPoint.Presentation but we cannot assume that the Microsoft PowerPoint 11 library will be loaded in the workbook that this module has been copied to.
Dim oPPTShape As Object ' Late binding: This is a PowerPoint.Shapebut we cannot assume that the Microsoft PowerPoint 11 library will be loaded in the workbook that this module has been copied to.

PPTFile = Range("PPTFile").value ' Read PowerPoint template file name
Set oPPTPres = GetObject(PPTFile): oPPTPres.Application.Visible = msoTrue ' Switch to or open template file 
```

. . . .

```
strNewPresPath = Range("OutputFileName").value
oPPTPres.SaveAs strNewPresPath
' Range("PPTFile").value = strNewPresPath
ScreenUpdating = True
oPPTPres.Close 'Closes presentation but not Powerpoint
oPPTPres.Application.Quit 'No noticeable effect 
```

活动演示文稿将关闭，但 Powerpoint 本身保持打开状态（没有打开文件窗口）。然后，因为它是打开的，所以当下一个运行时（我有一个循环将循环并连续执行许多这些构建），它会打开模板以及最新构建的 Powerpoint 文件，创建系统锁定问题。

有任何想法吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T18:06:34.237

我不完全确定您的代码为什么不起作用。我尝试`oPPTPres = Nothing`按照建议进行设置，但也没有用。但是，以下方式 PowerPoint 在我的计算机上关闭

```
Dim oPPTPres As Object  ' Late binding: This is a PowerPoint.Presentation but we cannot assume that the Microsoft PowerPoint 11 library will be loaded in the workbook that this module has been copied to.
Dim oPPTShape As Object ' Late binding: This is a PowerPoint.Shapebut we cannot assume that the Microsoft PowerPoint 11 library will be loaded in the workbook that this module has been copied to.
Dim oPPTApp As Object

Set oPPTApp = CreateObject("PowerPoint.Application")
oPPTApp.Visible = True

Set oPPTPres = oPPTApp.Presentations.Open(PPTFile) 
```

...

```
oPPTPres.Close
Set oPPTPres = Nothing
oPPTApp.Quit
Set oPPTApp = Nothing 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T18:08:52.393

JMP,

Sean 在从内存中删除对象方面是正确的，但您需要确保[释放对您的 powerpoint 对象的所有直接引用](http://www.excelforum.com/excel-programming-vba-macros/557498-remove-object-from-memory.html#7)，以防您将指向您的 powerpoint 的指针存储在其他变量中。然而，值得注意的是，这不会杀死应用程序并停止线程 - 它只会释放您的应用程序变量。

Paul B 关闭 powerpoint 的方法应该可以正常工作，并且这篇[SO 文章](https://stackoverflow.com/a/1439690/1146308)有一个软方法和一个[蛮力方法](https://stackoverflow.com/a/1439269/1146308)来关闭应用程序（如果它们保留在内存中）。

我在我的机器上通过 Excel 对这个简单的[暴力破解](https://stackoverflow.com/a/1439269/1146308)方法进行了调整和测试，结果它立即杀死了 Powerpoint 应用程序：

```
Sub ForcePowerpointExit()

Dim BruteForce As String
BruteForce = "TASKKILL /F /IM powerpnt.exe"

Shell BruteForce, vbHide

End Sub 
```

因此，这为您提供了杀死应用程序的另一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T23:19:48.940

我相信所有其他海报至少部分正确。Paul B. 的答案在大多数情况下应该有效。

唯一需要注意的是，如果您的 powerpoint VBA 代码直接从用户表单或用户表单直接引用的对象调用。

在这种情况下，仍有一个对象引用等待从内存中删除。

将所有 VBA PowerPoint 代码移动到一个模块并在启动自动化（PowerPoint）代码之前隐藏用户窗体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T17:58:09.277

`Set oPPTPres = Nothing`应该删除 Excel 对该对象的引用，并（希望）将其从内存中释放

# c# - 使用 C# 比较两个字符串生成器

> ID：12163391
> 
> 赞同：0
> 
> 时间：2012-08-28T16:14:16.880
> 
> 标签：c#, asp.net-3.5

嗨，我有两个字符串生成器 s1 和 s2。我正在使用逗号分隔符为该字符串生成器分配订单。我想比较两个字符串生成器。我想知道 s1 中的所有订单也在 s2 中。如果不是，我想知道 s2 中缺少哪个订单。如何做到这一点？

```
if (!IsPostBack)
{
    int reccount = dsResult.Tables[0].Rows.Count;
    for (int count = 0; count < reccount;count++)
    {
        HashSet<string> arrayOrdId = new HashSet<string>();
        arrayOrdId.Add(dsResult.Tables[0].Rows[count][1].ToString());
        // arrayOrdId[count] = dsResult.Tables[0].Rows[count][1].ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T16:16:38.233

我建议完全不要使用`StringBuilder`它 - 相反，创建两个`List<string>` 或可能`HashSet<string>`构建订单 ID，然后比较*这些*. 如果您出于其他原因需要创建字符串表示，请单独执行。（我假设您的订单 ID 是字符串。如果不是，请改用适当的集合类型。）

目前尚不清楚订单是否重要，但如果不重要，那[`HashSet<string>`](http://msdn.microsoft.com/en-us/library/bb359438%28v=vs.90%29.aspx)就是您应该使用的。您可以很容易地找到差异：

```
var missingFromX = y.Except(x);
var missingFromY = x.Except(y);
// Do whatever you want with those differences 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:23:55.567

类似的东西

```
var orders1 = new HashSet<string>();
var orders2 = new HashSet<string>();

// add the orders to the sets, not stringbuilders, here

var order1sInOrders2 = orders1.Intersect(orders2);
var order2sNotInOrders1 = orders2.Except(orders1); 
```

您可能要考虑直接在`IEnumerable`某个自定义`Order`类的 s 上而不是`string`s 上执行此操作。

# c# - 固定标题网格视图 ASP.NET

> ID：12163402
> 
> 赞同：3
> 
> 时间：2012-08-28T16:14:49.347
> 
> 标签：c#, asp.net, html, gridview

我浏览了很多固定标题网格视图的示例，并尝试了一些使用 div 和 java 脚本的选项。我没有从示例中工作的那个，这里有什么我想念的吗？

```
 CSS 
.gridViewHeader
{
     background-color:Navy;
    color:blue;
    font-size:12px;
    font-weight:bold;
    position:relative;
    z-index:10;
   top:expression(<%= gv.HeaderRow %>.offsetParent.scrollTop-2);
}

design source
<table>
<tr>
            <td>
                &nbsp;
            </td>
        </tr>
    </table>
    <div>
        <asp:GridView ID="gv" runat="server" CellPadding="4" PageSize="50" RowHeaderColumn="True"
            AllowPaging="True" BackColor="White" BorderColor="#3366CC" BorderStyle="None"
            BorderWidth="1px" CssClass="gridViewHeader">
            <PagerSettings Mode="NumericFirstLast" />
            <PagerStyle BackColor="#99CCCC" ForeColor="#003399" HorizontalAlign="Left" VerticalAlign="Middle" />
            <RowStyle BackColor="White" ForeColor="#003399" BorderStyle="Inset" HorizontalAlign="Center"
                VerticalAlign="Middle" Wrap="False" />
            <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        </asp:GridView>
    </div>
        <asp:HiddenField ID="hiddenfield1" runat="server"  />
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:56:55.940

you can use

```
<HeaderStyle CssClass="gridViewHeader" /> 
```

For your sample

```
<asp:GridView ID="gv" runat="server" CellPadding="4" PageSize="50" RowHeaderColumn="True"
            AllowPaging="True" BackColor="White" BorderColor="#3366CC" BorderStyle="None"
            BorderWidth="1px" >

            <HeaderStyle CssClass="gridViewHeader" />

            <PagerSettings Mode="NumericFirstLast" />
            <PagerStyle BackColor="#99CCCC" ForeColor="#003399" HorizontalAlign="Left" VerticalAlign="Middle" />
            <RowStyle BackColor="White" ForeColor="#003399" BorderStyle="Inset" HorizontalAlign="Center"
                VerticalAlign="Middle" Wrap="False" />
            <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        </asp:GridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T06:11:09.530

This CSS will fix your problem:

```
.GVFixedHeader { font-weight:bold; background-color: Green; position:relative; 
             top:expression(this.parentNode.parentNode.parentNode.scrollTop-1);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:41:12.023

我只是做了这件事。我用这篇文章作为参考。

[http://csharpdotnetfreak.blogspot.com/2009/07/scrollable-gridview-fixed-headers-asp.html](http://csharpdotnetfreak.blogspot.com/2009/07/scrollable-gridview-fixed-headers-asp.html)

诀窍是创建一个表格，然后将网格放置在该表格下方的 div 中。将细节单元格的宽度设置为与 gridview 中的单元格相同的宽度。然后确保滚动条保持打开状态，如果没有足够的行来实际需要滚动功能，则网格和表格将对齐。

# html - 支持2048px分辨率的响应式HTML主题设计框架

> ID：12163403
> 
> 赞同：0
> 
> 时间：2012-08-28T16:14:51.700
> 
> 标签：html, twitter-bootstrap, responsive-design

我正在寻找一个支持 2048 像素分辨率（iPad 视网膜显示）的响应式 HTML 主题设计框架——大多数框架都停止在 1280 像素。

如果没有这样的框架，那么如何扩展现有框架（如 Twitter Bootstrap）以使其支持 2048px？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:53:33.917

正如@Billy Moat 所说，[Twitter Bootstrap](http://twitter.github.com/bootstrap/)支持高分辨率；[Zurb 基金会](http://foundation.zurb.com/)也是如此。

顺便说一句，我觉得你提到 iPad 视网膜很奇怪。您是否知道 Retina iPad 的分辨率为 2048 像素，但它的 CSS 像素分辨率与原始 iPad 相同？[这篇文章](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)很好地总结了它。

# javascript - 下拉列表中的 iframe 多个站点

> ID：12163404
> 
> 赞同：1
> 
> 时间：2012-08-28T16:14:54.700
> 
> 标签：javascript, html

我正在尝试做这样的事情： ![例子](../Images/16095ddb5df6fcaae7bd50eb4b33980f.png)

我希望能够根据下拉列表中选择的选项动态更改 iframe。

我到目前为止的代码是这样的：

```
 <html>
    <head>
    <script>
        function hidem() {
        document.getElementById('Select').style.display = "none";
        document.getElementById('test1').style.display = "none";
        document.getElementById('test2').style.display = "none";
        }
    function changeIt(divid) {
        hidem();
        document.getElementById(divid).style.display = "block";
    }
    </script>
    </head>

    <table border="0">
        <tr>
            <td>
                <select id="Manage" onChange="changeIt(this.value)">
                <option value="Select">Select A Management Window</option>
                <option value="test1">Google</option>
                <option value="test2">Yahoo</option>
                </select>
            </td>
            <td>
                <div id="Select">
                    <h2>Information:</h2>
                    This is a management console
                </div>
                <div id="test1" style="display:none">
                    <h2>Google:</h2>
                    <iframe src="http://www.google.com" width="100%" height="100%"></iframe>
                </div>
                <div id="test2" style="display:none">
            <h2>Yahoo:</h2>
                    <iframe src="http://www.yahoo.com" width="100%" height="100%"></iframe>
                </div>
            </td>
        </tr>
    </html> 
```

但它似乎并没有按照我的意图工作。有人能帮我解决这个问题吗？

谢谢你，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:40:46.620

尽管有大量无效的 HTML 错误（@BillyMoat 在评论中强调了这些错误），**但我不相信您能够按照您的计划进行操作。**

许多大型网站（尤其是 Google）`X-Frame-Options: SAMEORIGIN`在其页面上使用 。

这意味着不允许浏览器在父级来自不同来源（即域）的框架中显示页面......这当然取决于浏览器理解该指令，大多数当前浏览器都会这样做。

[Mozilla 标头的详细信息](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)。

[这是一个博客，列出了有关标头的更多详细信息](http://blogs.msdn.com/b/ieinternals/archive/2010/03/30/combating-clickjacking-with-x-frame-options.aspx)，包括将阻止正在加载的页面的浏览器列表

# linker - 需要静态链接时的 MinGw32 编译问题（ADOL-C 链接 ColPack）

> ID：12163406
> 
> 赞同：1
> 
> 时间：2012-08-28T16:15:04.707
> 
> 标签：linker, mingw

我有一个数学库 ( [ADOL-C](https://projects.coin-or.org/ADOL-C) )，它需要链接到另一个库 ( [ColPack](http://www.cscapes.org/coloringpage/software.htm) ) 以执行一些可选任务。

我可以在 Linux 中很好地编译它们，在 Windows 中单独编译 ADOL-C 或 ColPack，但是当我尝试在 Windows（MinGW 32，ld 2.22）中使用 ColPack 编译 ADOL-C 时，我遇到了以下问题：

```
$ make
Making all in ADOL-C
make[1]: Entering directory `/c/tests/ADOL-C-2.3.0/ADOL-C'
[...]
  CC     int_reverse_s.lo
  CC     int_reverse_t.lo
  CXXLD  libadolc.la

*** Warning: This system can not link to static lib archive /usr/lib/libColPack.
la.
*** I have the capability to make that library automatically link in when
*** you link to this library.  But I can only do this if you have a
*** shared version of the library, which you do not appear to have.
Creating library file: .libs/libadolc.dll.a
sparse/.libs/libsparse.a(sparsedrivers.o): In function `generate_seed_jac':
c:\tests\ADOL-C-2.3.0\ADOL-C\src\sparse/sparsedrivers.cpp:119: undefined referen
ce to `ColPack::BipartiteGraphPartialColoringInterface::BipartiteGraphPartialCol
oringInterface(int, ...)'

[...]
collect2: ld returned 1 exit status
make[5]: *** [libadolc.la] Error 1
make[5]: Leaving directory `/c/tests/ADOL-C-2.3.0/ADOL-C/src'
make[4]: *** [all-recursive] Error 1 
```

我不能像在 MinGW 中那样只提供动态库，即使我使用 --enable-shared 配置 ColPack，我实际上从未从它的编译中获得任何共享库，只有 libColPack.[a|la|lai] 和 ColPack.exe .

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:33:47.580

花了一点时间，直到我解决了这个问题。

下载Colpack-1.0.8.tar.gz，用如下环境测试

Msys / mingw 4.7.0。

正如您所说，您不能使用它来创建共享库。一段时间后，我找到了一个更复杂的解决方案。在此基础上，我找到了一种更短的方法。

**简短的解决方案：**

打开**配置**

行# ***_* __ *_* __ *_* __ *_***将***_* __ *_* __ *_* __ *_* __ *_* __ *_***更改为 __

```
7660        enable_dlopen=no      set it to yes
7663        enable_win32_dll=no   set it to yes
7673        enable_shared=no      set it to yes
7710        enable_static=yes     set it to no
7717        enable_static=yes     set it to no  
8721        enable_shared_with_static_runtimes=no      set it to yes
11797       enable_shared_with_static_runtimes_CXX=no  set it to yes 
```

保存并运行

```
./configure --disable-static --enable-shared 
```

打开**libtool**

行# ***_* __ *_* __ *_* __ *_***将***_* __ *_* __ *_* __ *_* __ *_* __ *_***更改为 __

```
5547        allow_undefined=yes   set it to no
5550        allow_undefined=yes   set it to no 
```

保存并运行

```
make clean
make 
```

在**.lib**目录中现在应该是以下文件。

```
ColPack.exe      .. 30.08.2012
libColPack.la    .. 30.08.2012
libColPack.lai   .. 30.08.2012
libColPack-0.dll .. 30.08.2012
libColPack.dll.a .. 30.08.2012 
```

从**libColPack-0.dll中提取**

```
Export Table:
  Name:                          libColPack-0.dll
  Time Date Stamp:               0x503F3A43 (30.08.2012 11:02:43)
  Version:                       0.00
  Ordinal Base:                  1
  Number of Functions:           883
  Number of Names:               883

  Ordinal   Entry Point   Name
        1   0x000012FC    _Z10createArgsiPPKcRSt6vectorISsSaISsEE
        2   0x00011034    _Z10toFileBiPCSsSsSt6vectorISsSaISsEES1_St3mapISsbSt4lessISsESaISt4pairIKSsbEEE
        3   0x00001FB0    _Z11mm_is_validPc
        ........ 
```

从**libColPack.la中提取**

```
# libColPack.la - a libtool library file
# Generated by libtool (GNU libtool) 2.4 
#
# Please DO NOT delete this file!
# It is necessary for linking the library.

# The name that we can dlopen(3).
dlname='libColPack-0.dll'

# Names of this library.
library_names='libColPack.dll.a'

...... 
```

希望有帮助！

**笔记：**

没有测试过“make install”！

**同时拥有静态和动态：**

将 libColPack.la、libColPack.lai 和 libColPack.dll.a 移动到另一个文件夹。我们需要它们，它们将被覆盖。删除目录级别更高的文件 libColPack.la。

将 libtool 文件更改回其原始状态（2 行）。

运行“制作”

您将拥有一个新的 libColPack.a

将 libColPack.dll.a 移回 .libs

将之前移动的两个文件的内容与新的 libColPack.la (.lai) 合并。

还将更新后的 libColPack.la 复制到更高的目录级别。

**新的混音文件：libColPack.la**

```
# libColPack.la - a libtool library file
# Generated by libtool (GNU libtool) 2.4 
#
# Please DO NOT delete this file!
# It is necessary for linking the library.

# The name that we can dlopen(3).
dlname='libColPack-0.dll'

# Names of this library.
library_names='libColPack.dll.a'

....

# The name of the static archive.
old_library='libColPack.a'
.... 
```

有了这个技巧，你就有了**静态库和动态库**。

# clickonce - ClickOnce 在 Internet Explorer 9 中不起作用

> ID：12163411
> 
> 赞同：2
> 
> 时间：2012-08-28T16:15:28.223
> 
> 标签：clickonce

我的[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)部署过去运行良好，但在 Internet Explorer 9 中停止运行。它只显示*Desktop.application* XML 文件。它仍然适用于[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)等。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:33:40.157

嗯，通常它工作正常。但是，根据设置和环境，您可能会遇到这样的问题。

*   服务器上的 MIME 类型可能错误或缺失。例如，参见*[Apache 上的 ClickOnce](http://software.clempaul.me.uk/articles/clickonce/)*。
*   特定的 Internet Explorer 设置（例如，根据内容显示内容），因此请尝试将所有设置重置为默认值
*   .NET 框架 2.0 损坏/丢失

另外，请参阅这些帖子：

*   *[对 ClickOnce 部署中的特定错误进行故障排除](http://msdn.microsoft.com/en-us/library/ms229001.aspx)*(MSDN)
*   *[ClickOnce 部署和 IE9](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/53172aaf-1d30-43c8-8d52-7564b9ed1b7c)* (MSDN)
*   *[ClickOnce 将“.application”文件显示为 XML](https://stackoverflow.com/questions/481986)*（堆栈溢出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T13:22:20.490

它是否使用 .NET 控件？这解决了我的问题：

[http://social.msdn.microsoft.com/Forums/en-US/a6c7eb28-28b3-4e07-aa11-40145a997271/object-tag-loading-a-net-control-works-in-ie8-red-x- in-ie9?forum=ieextensiondevelopment](http://social.msdn.microsoft.com/Forums/en-US/a6c7eb28-28b3-4e07-aa11-40145a997271/object-tag-loading-a-net-control-works-in-ie8-red-x-in-ie9?forum=ieextensiondevelopment)

# java - Java - 调用 void 方法并存储它们的值

> ID：12163412
> 
> 赞同：0
> 
> 时间：2012-08-28T16:15:41.887
> 
> 标签：java

这是过去试卷中的一道题。问题要求在新类中声明一个`c`类型的变量。`Counter`然后我应该将它初始化为一个新的实例，`Counter`值为`n`100。然后我必须将其`n`字段增加两次。`n`然后将字段的值打印到`System.out`.

我已经完成了这两门课，但我不确定这`Counter2`门课。我想我可能在声明`Counter`变量错误。

```
public class Counter {
    private int n;
    public int x;

    public Counter(int theN){
        this.n=theN;
    }

    public int getN(){
        return n;
    }

    public void inc(){
        x = 1+ getN();
    }
}

public class Counter2{
    Counter c;

    public int incrementTwice(){
        int i = 0;

        while(i<2){
            c.inc();
            i++;
        }
        return c.x;
    }

    public static void main (String[] args){
        c = new Counter(100);
        int finalResult = c.getN();
        System.out.println(finalResult);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:20:51.403

在`inc()`你实际上并没有增加`n`. 您正在设置`x`为`n+1`.

所以，不管你跑了多少次`inc`，在第一次跑步之前你将拥有`n = initial Value`，`x=0`在第一次跑步之后和跟随你有`n = initialValue`和`x = n + 1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:23:48.373

```
public static void main (String[] args){

    c = new Counter(100);

    int finalResult = c.getN();
    System.out.println(finalResult);
} 
```

我希望输出是`100`

调用堆栈如下：

```
1) Set c.N = 100;  
2) set finalResult = c.X (100)  
3) Print finalResult (100) 
```

你从不打电话给`incrementTwice`. 你的主要应该是以下内容：

```
public static void main (String[] args){
    Counter2 counter2 = new Counter2();  
    counter2.c.n = 100;  
    counter2.incrementTwice();
    int finalResult = counter2.c.getN();
    System.out.println(finalResult);
} 
```

关键是`inc()`你正在添加`x`而不是添加，`n`所以你需要返回`x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:28:04.560

假设`n`是计数器的值，“声明一个计数器类型的变量 c”和“将其初始化为一个新实例......取值 100”将像这样完成`Counter c = new Counter(100);`：将其值增加两次就像这样简单：

```
int value = c.getValue(); 
value++;
value++;
c.setValue(value); 
```

...假设它`getValue()`被定义为获取计数器变量的方法。

所以把它们放在一起就这么简单：

```
public class MyClass {
    private Counter c;

    public MyClass() {
        c = new Counter(100);
    }

    public void increment() {
        int value = c.getValue();
        value++;
        c.setValue(value);
    }

    public void printCounterValue() {
        System.out.println(c.getValue());
    }

    public static void main(String[] args) {
        MyClass instance = new MyClass(); // creates new class with Counter c initialized to 100
        instance.increment(); // increment once
        instance.increment(); // increment twice
        instance.printCounterValue(); // print to screen
    }
} 
```

当然，这可以进一步简化——例如，递增可以像在`Counter`类中创建一个简单的方法一样`increment()`简单`n++`，但这是解决方案的基本实现。

（实现`increment()`in Counter 看起来像这样：）

```
public void increment() {
    n++; // equivalent to n = n+1 or n+= 1
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:19:05.617

*   为什么有一个while循环？为什么不把它增加两行。在我看来这会更清楚
*   就个人而言，我不会在您的 inc 方法中使用 getN() 。这是该类的公共接口。我会直接访问 n 变量，例如 x = 1 + n;

*   你不需要x和n。只需增加 n。这可能会导致问题，因为您总是在递增一个永远不会改变的值 (n)。如果要增加两次，则需要重新分配给 n。

我会做的

```
n+=2 
```

将两个加到 n

# git - Git 跟踪远程仓库

> ID：12163414
> 
> 赞同：0
> 
> 时间：2012-08-28T16:15:51.133
> 
> 标签：git, github, branch

首先，我们只是迁移到 GIT，我不知道如何实现我的目标。

我有一个项目 CORE 需要为客户拆分，因为客户想要一个 CUSTOM 项目。**大多数情况**下，CUSTOM 中的视图与 CORE 中的视图不同，但我们需要将所有进入 CORE 的错误修复反映或合并到 CUSTOM 中。

我知道 GIT --tracking，但我认为这仅适用于分支，对吗？

我们需要将 CORE 和 CUSTOM 都托管在 Github 上，所以我不能只让 CUSTOM 成为我本地机器上的一个分支。

任何人？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:37:55.420

从我的角度来看，CUSTOM 应该是您项目的长期`support branch`项目。您实际上需要的是一个 git 工作流程。检查[gitflow](https://github.com/nvie/gitflow)，它引入了一个 execllant 分支模型并提供了一个`git flow support`仅适用于您的情况的实验性子命令，请参阅此[FAQ](https://github.com/nvie/gitflow/wiki/FAQ)的最后一个条目。

如果您打算将 CUSTOM 保留为 github 上的单独存储库，您可以让您`origin`远程指向核心存储库，`CUSTOM`远程指向 CUSTOM 存储库。然后，将分支设置`master`为 orgin 的 track master 和`branch-custom`CUSTOM remote 的 branch tracking master。

这是代码：

```
git remote add -t master origin <path to orgin>
git remote add -t branch-custom CUSTOM <path to CUSTOM> 
```

# ios - NSPredicate 问题 - 未找到数据

> ID：12163419
> 
> 赞同：0
> 
> 时间：2012-08-28T16:16:16.117
> 
> 标签：ios, core-data, nspredicate

我有一个像这样的核心数据模型：

```
ArticleCache:
- NSString *link 
```

我有一些像这样的自定义对象：

```
Article:
- NSString *linkString //NSString version of link
- NSURL *link
- NSString *title 
```

我有一个`NSArray`of `Article`s（`articleList`如下），并且我有一个带有`ArticleCache`s 的核心数据存储。

我正在尝试检索在我的`ArticleCache`s 中具有匹配链接的 s `articleList`：

```
NSEntityDescription *articleCacheObjectModel = [NSEntityDescription entityForName:@"ArticleCache" inManagedObjectContext:backgroundContext];

// Setup the fetch request  
NSFetchRequest *request = [[NSFetchRequest alloc] init];  
[request setEntity:articleCacheObjectModel];

//search will return all items matching the link
NSPredicate *searchPredicate = [NSPredicate predicateWithFormat:@"link in %@", articleList];
[request setPredicate:searchPredicate];

NSError *error = nil;

NSArray *results = [backgroundContext executeFetchRequest:request error:&error]; 
```

当我运行它时，`results`它总是空的，尽管我知道`ArticleCaches`核心数据存储中有匹配的。我知道这一点，因为如果我从请求中删除谓词，我会得到所有的`ArticleCache`s，我可以打印出它们各自`link`的 s 并比较它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:35:50.160

“ArticleCache”实体的“链接”属性是一个字符串，在您的谓词中，您尝试测试该字符串是否包含在对象数组中`Article`。那永远不会匹配。

您可以先构建一个字符串 URL 数组，例如

```
NSArray *urlList = [articleList valueForKey:@"linkString"]; 
```

然后在谓词中使用它：

```
[NSPredicate predicateWithFormat:@"link in %@", urlList]; 
```

# ms-access - 如何在导航表单上将选项卡链接在一起，以便在切换选项卡时它不会更改记录？

> ID：12163420
> 
> 赞同：3
> 
> 时间：2012-08-28T16:16:15.183
> 
> 标签：ms-access, ms-access-2010

好的，我之前问过一个类似的问题，但我花了大约八个小时（真的）试图解决这个问题，但没有运气。

所以，我做了这个大的访问表单来修改“联盟”数据，它有一个记录选择器来改变联盟。我将大表单拆分为导航表单，因此它不会全部位于一页上。但是，现在当您切换选项卡时，它总是会恢复为修改第一个联盟。我想在不同的选项卡中保持一致。

现在，我已经阅读了表单和子表单控件以及链接字段，但我无法成功地将每个子表单（即每个选项卡）链接到更大的导航表单。整个“链接主字段/链接子字段”甚至都没有出现。是什么赋予了？每个不是主窗体的子窗体吗？它表现得好像那里没有等级制度。

这里有一些图片来说明我的观点。例如，在我的“评估”选项卡上，我可以包含一个子表单，该子表单能够链接到它的主表单：

[http://i.imgur.com/355DR.png](http://i.imgur.com/355DR.png)

但是，我无法将整个评估子表单链接到更大的导航表单。该选项甚至不存在，并且在更大的表单上更改记录不会更改评估子表单中的记录：

[http://i.imgur.com/uCGw1.png](http://i.imgur.com/uCGw1.png)

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T18:20:46.190

我在您的示例表单上看不到任何选项卡控件。表单上的选项卡控件与导航表单之间存在差异。

这里的建议是在这里使用选项卡控件。这是这里的控制：

![在此处输入图像描述](../Images/4b0a58a78f2c30e7b8bd8df07fa3ffac.png)

因此，您不想使用导航表单来执行此操作，而是要使用选项卡控件。

导航表单会导致表单的完全重新加载。更重要的是，当您切换到导航表单上的不同选项卡时，它会导致现有表单的完全卸载，并重新加载新表单（所以是的，在这些情况下，不仅是表单发生加载/卸载，但记录位置丢失）。

所以你想在这里使用选项卡控件，而不是导航表单。导航表单实际上只是最顶部导航的明智选择，而不是属于给定父表单的子表单。在这种情况下，您会发现使用选项卡控件可以解决问题。

您必须删除现有控件并将它们从功能区工具框中重新放置，以便能够将此类控件放置在 GIVEN/SINGLE 选项卡控件上。或者您可以将表单上的现有控件剪切 + 粘贴到选项卡控件上

最好的方法是突出显示表单上的所有控件，将它们向下移动以为选项卡控件腾出空间。然后，您放入选项卡控件。然后，您选择要放置在特定选项卡上的控件（您刚刚向下移动的控件）。然后你选择cut，然后点击你想要的页面（tab control），然后ctrl-v。（或者如前所述，只需将控件从功能区重新拖放到选项卡控件上）。

所以这里的混乱是由于放入导航表单而不是使用选项卡控件。使用导航表单不太适合此任务。

# c++ - 强制属性类型为 doxygen

> ID：12163423
> 
> 赞同：2
> 
> 时间：2012-08-28T16:16:31.190
> 
> 标签：c++, doxygen

例如：

```
class Test
{
    /// This var contain Apple class
    void* something;
}; 
```

我知道“某物”将指向 Apple 类型的对象。我如何强制将其告诉 doxygen（用于 DOT 图关系）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:29:26.587

除了编程设计，您还可以这样做：

```
class Test
{
    #ifdef DOXYGEN_RUNNING
        Apple* something;
    #else
        void* something;
    #endif
}; 
```

然后让 Doxygen 预定义`DOXYGEN_RUNNING`。（[预处理手册](http://www.doxygen.nl/manual/preprocessing.html)。）

* * *

（但说真的：如果它`Apple*`只是这样写的话。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:29:33.497

它可能有点笨拙，但一种方法是在`Apple*`使用 doxygen 处理它时有条件地将其声明为：

```
class Test
{
    /// This var contain Apple class
#ifdef DOXYGEN_INVOKED
    Apple* something;
#else
    void* something;
#endif
}; 
```

`DOXYGEN_INVOKED`您可以使用[PREDEFINED](http://www.doxygen.nl/manual/config.html#cfg_predefined)标签配置 Doxygen 来定义宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:28:52.647

通过将指针正确声明为`Apple* something`.

# php - PDO 列变量 LiKE 查询 QUOTES

> ID：12163426
> 
> 赞同：0
> 
> 时间：2012-08-28T16:16:42.177
> 
> 标签：php, mysql, pdo, prepared-statement

带有 MySQL 的 PDO；PHP v. 5.2.14

我有一个带有用于用户输入的文本框和单选按钮的搜索表单，可以选择按作者或标题进行搜索。输出最终将被分页。

我是 PDO 的新手，仍在学习基础知识。因此，如果我走在正确的轨道上，我将不胜感激。我已经掌握了基本的 SQL，所以一切正常，但现在我想将一个变量作为列。我了解到 PDO 不接受表名或列名作为参数。所以我尝试了以下方法：

编辑更正并添加了绑定参数的变化

```
try {

if (isset($_POST['submit1'])) {
    echo '<pre>', print_r ($_POST, TRUE), '</pre>';

$selected_radio = $_POST['text_search'];

if ($selected_radio == 'author') {
   $_SESSION['where_field'] = 'author';    
}
    else if ($selected_radio == 'title') {
      $_SESSION['where_field'] = 'title';
    }
}

 if (!empty($_POST['search_term'])){
    $_SESSION['search_term'] =   filter_var($_POST['search_term'], FILTER_SANITIZE_STRING);
     }else {
        echo "please enter a search term.";
    }

echo "search term: " . $_SESSION['search_term'] . "<br />";

// Find out how many items are in the table
$sql = "SELECT COUNT(*) as num_books from t_books where ". 
     $_SESSION['where_field'] ." LIKE :search_term';  
$prep = $dbh->prepare($sql);
$num = $prep->execute(array(':search_term' => '%'.$_SESSION['search_term']. '%'));

 var_dump($prep);
  echo "<br />";
   if ($num) {
    $total = $prep->fetchColumn();        
    }

    echo "total: $total <br />"; 
```

变化：

```
$sql = "SELECT COUNT(*) as num_books from t_books where ". $_SESSION['where_field'] . " LIKE
 CONCAT('%',:search_term,'%')";
$prep = $dbh->prepare($sql);
$prep->bindParam(':search_term', $_SESSION['search_term'], PDO:: PARAM_STR);
$prep->execute(); 

if ($prep) {
    $total = $prep->fetchColumn();        
} 
```

字符串引用问题：我最初的尝试和错误

```
$sql = 'SELECT COUNT(*) as num_books from t_books where '". $_SESSION['where_field'] ."' 
LIKE :search_term';  
Parse Error

$sql = "SELECT COUNT(*) as num_books from t_books where $_SESSION['where_field'] 
LIKE :search_term";
Parse error: parse error, expecting `T_STRING' or `T_VARIABLE' or `T_NUM_STRING'

$sql = "SELECT COUNT(*) as num_books from t_books where ". $_SESSION['where_field'] . " 
LIKE :search_term";
Notice: Undefined index: where_field
Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual 
that corresponds to your MySQL server version for the right syntax to use near  'LIKE '%the%'' 
at line 1

$sql = 'SELECT COUNT(*) as num_books from t_books where ' . "$where_field" . 'LIKE :search_term';
Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual 
that corresponds to your MySQL server version for the right syntax to use near 'LIKE '%the%'' at 
line 1 
```

我发现很难理解引用的内容。感谢您提供的任何课程更正和见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:20:59.457

它应该是：

```
$sql = "SELECT COUNT(*) as num_books 
       from t_books 
       where " . $_SESSION['where_field'] . " LIKE :search_term"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:21:46.900

尝试这个。

```
$sql = "SELECT COUNT(*) as num_books from t_books where " . $_SESSION['where_field'] . " LIKE :search_term"; 
```

# wpf - ItemsControl 上的 StackPanel 方向不完全水平

> ID：12163428
> 
> 赞同：1
> 
> 时间：2012-08-28T16:16:52.663
> 
> 标签：wpf, xaml, layout, itemscontrol, stackpanel

我有以下问题。我正在使用项目控件，但我不明白为什么我的结果是在多行而不是在单行上。这是我的代码：

```
<StackPanel Orientation="Horizontal" Margin="10,10,10,10">
    <ItemsControl ItemsSource="{Binding Countries}" >
        <ItemsControl.ItemTemplate>
            <DataTemplate x:Name="TabCountries" >
                <StackPanel Orientation="Horizontal">
                    <TextBlock Name="Country" Text="{Binding nom}" Style="{StaticResource whiteFontColor}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <CheckBox Margin="0,0,5,0" Name="isCountryAllowed" IsChecked="{Binding isAllowed}" />
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

结果是这样的：

```
FR
BE
AN 
```

而不是这样：

```
FR BE AN ... 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:22:46.907

您没有更改项目的布局，仅更改了`ItemsControl`整体的布局（如果同一 中没有其他元素，则几乎什么都不做`StackPanel`）。

用于[`ItemsControl.ItemsPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)使项目水平布局。

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal"/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

# javascript - jqPlot为不同的y轴对齐零

> ID：12163431
> 
> 赞同：4
> 
> 时间：2012-08-28T16:17:09.827
> 
> 标签：javascript, jqplot

在`jqPlot`中，我在图中呈现了两个系列。它们显示不同的数据，以不同的单位测量，因此它们都有自己的 y 轴（`yaxis`和`y2axis`）。

`jqPlot`自动构造两个 y 轴以适应数据范围。没关系 - 我不想`min, max, ticks`手动设置轴，因为数据的范围可能会有很大差异。

但是，我想将`0`两者的刻度对齐`y-axes`到同一水平。这可能吗？

**注意：**有人可能会争辩说，没有必要将`0° C`温度与`0 ms^-1`风速对齐，因为这些值之间没有数学关系。但如果是这样的话，它看起来确实好多了，而且看起来很好是图表的重点:)

**测试示例：**

```
var data1 = [[0, 0], [3, 50]];
var data2 = [[0, 0], [3, -50]];

$.jqplot('chart', [data1, data2], {
  series: [
    { yaxis: 'yaxis' },
    { yaxis: 'y2axis' },
  ]        
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:58:06.550

我认为这绝对是 jqplot 中的一个错误。

请参阅这三个小提琴[[1]](http://jsfiddle.net/jbalsas/h6sw9/1/)、[[2]](http://jsfiddle.net/jbalsas/h6sw9/3/)和[[3]](http://jsfiddle.net/jbalsas/h6sw9/2/)。第一个是从 jqplot 最新版本中的示例中提取的。第二个，显示默认模式，禁用 forceTickAt0 和 alignTicks。最后，第三个是相同的原始数据，但将第一个系列中的第二个数据值更改为负值。

您可以在第一个示例中看到零是如何对齐的。然而，在第三个示例中，尽管所有设置保持不变，但轴不再对齐。

您可以尝试在[jqplot 问题页面](https://bitbucket.org/cleonello/jqplot/issues)中为此提交问题。

同时，为了解决您的问题，您可以通过向值添加偏移量来解决此问题，以便所有值都变为正值，然后重写轴标签以显示此偏移量差异。你可以在这里看到一个[例子](http://jsfiddle.net/jbalsas/PggzB/4/)。但是，恐怕这仍然不是您想要完成的。

# javascript - jQuery调用keyup事件不起作用

> ID：12163432
> 
> 赞同：0
> 
> 时间：2012-08-28T16:17:09.910
> 
> 标签：javascript, jquery

需要一点帮助...

以下在输入数值后添加了转换后的货币标签 - 当我按下 keyup 时工作正常（我可以看到隐藏的标签）：

```
 $(document).ready(function(){ 
    $("input.currency-field").each(function () {
        $(this).after("<label class='currency'></label>");           
    });

    $("input.currency-field").bind("keyup", function () {
        $(this).siblings('label.currency').text($(this).val());
        $(this).siblings('label.currency').formatCurrency();
    });
}); 
```

我希望在页面加载时加载转换后的值，而不是等待按下 keyup。在 .each 函数中添加标签后，我尝试调用 keyup 事件，但我似乎无法让它工作（也尝试在外部调用 $("input.currency-field").keyup()功能;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:22:47.433

最好将它全部包装在一个函数中，然后将其用于绑定和准备好文档（或您想要使用它的其他地方），但是您可以使用触发器来执行您正在尝试做的事情：

```
$("input.currency-field").trigger('keyup'); 
```

如果它已设置，这应该触发 keyup 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:20:56.540

将代码放入一个函数中，然后在加载和`keyup`事件中调用它。尝试这个：

```
// Load
$("input.currency-field").each(function () {
    $(this).after("<label class='currency'></label>");  
    setLabelValue($(this));
});

// Keyup
$("input.currency-field").bind("keyup", function() { setLabelValue($(this)) });

function setLabelValue($el) {
    $el.siblings('label.currency').text($el.val());
    $el.siblings('label.currency').formatCurrency();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:24:13.727

我通常发现 keyup 事件以各种方式不可靠。我可能会转移到要绑定的 keypress() 事件，除非您专门寻找要按住的键，然后为每个操作释放不同的功能。

如果您想在文档准备好时计算值，您可以采用匿名函数，并将其设为“真正的”命名函数，然后在文档准备好时调用它，并将其附加到 keyup/keypress 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:20:11.027

1.将其包装在 Ready 处理程序中

```
$(document).ready(function(){
      $("input.currency-field").each(function () {
        $(this).after("<label class='currency'></label>");           
    });

    $("input.currency-field").bind("keyup", function () {
        $(this).siblings('label.currency').text($(this).val());
        $(this).siblings('label.currency').formatCurrency();
    });

}); 
```

# sql - 使用while循环在表中插入多条记录

> ID：12163433
> 
> 赞同：-5
> 
> 时间：2012-08-28T16:17:10.720
> 
> 标签：sql, sql-server, tsql

我想将几百行插入到另一个表中指向 pk 的表中。我一直在尝试使用 while 循环在表中插入多条记录。我实际上是在设置我的测试数据。

这就是我正在做的事情：

```
declare @count int;
set @count = 4018;

while @count <= 5040 
begin
    INSERT INTO [MY_TABLE]
               ([pk_from_other_table]
               ,[..]
               ,[...]
               ,[..]
               ,[..]
               ,[...]
               ,[...]
               ,[..])
        select
               (pk_from_other_table,
               ,[..]
               ,[...]
               ,[..]
               ,[..]
               ,[...]
               ,[...]
               ,[..])
    @count = @count + 1;
end 
```

但这似乎不起作用！谁能帮忙...我想做的就是插入记录数=主表中存在的记录数。

? 关于如何实现这一目标的任何想法？

我要么在 count 附近得到不正确的语法

或者

消息 102，级别 15，状态 1，第 17 行 ',' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T16:25:49.917

您当前的语法问题是`@count = @count + 1;`which need to be `set @count = @count + 1`。

但...

不需要循环。你可以直接做一个大的插入，比如：

```
insert into your_table (fk_col, other_col1, other_col2)
select pk_col, 'something', 'something else' 
from your_other_table 
```

如果需要，可以`where`在上面添加一个子句。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T16:55:56.817

关于*消息 102，级别 15，状态 1，第 17 行 ',' 附近的语法不正确。*：

您在第二个选择列表中有双逗号：

```
select
(pk_from_other_table,
,[..] 
```

删除一个。

关于插入：如果您想多次将所有记录从源表插入到目标，您可以循环执行：

```
declare @count int;
set @count = 4018;

while @count <= 5040 
begin
    INSERT INTO DestinationTableName
               (DestinationTableColumn1Name
               ,DestinationTableColumn2Name --ect
        )
        select
               SourceTableColumn1Name
               ,SourceTableColumn2Name --ect
               from SourceTableName
    set @count = @count + 1;
end 
```

但是当您想将许多行从源表插入到目标一次时，`where`就足够了：

```
INSERT INTO DestinationTableName
            (DestinationTableColumn1Name
            ,DestinationTableColumn2Name --ect
            )
            select
            SourceTableColumn1Name
           ,SourceTableColumn2Name --ect
            from SourceTableName
            where SourceTablePK between 4018 and 5040 --LowerBound and UpperBound
            --or SourceTablePK in (1, 2, 3) etc 
```

您不必逐行进行。

# objective-c - UITextField 文本在 uitableviewcell 中滚动时替换为相同的文本

> ID：12163436
> 
> 赞同：0
> 
> 时间：2012-08-28T16:17:17.050
> 
> 标签：objective-c, uitableview, uiscrollview, uitextfield

![在此处输入图像描述](../Images/fbf8b9ec7543a4c370f210e6f10e98f2.png)![检查此图像](../Images/b9d089c2007f14278470e13538a281f6.png)![在此处输入图像描述](../Images/23e9b34a3358f7210692fbcb9b2284d4.png)我在一行中放置了三个文本字段，在另一行中放置了 1 个文本字段。我将所有文本字段放在一个数组中，并在`cellForRowAtIndexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier ];
        if (indexPath.row == 0) {

            UITextField *tf = [[UITextField alloc]initWithFrame:CGRectMake(10, 10, 100, 30)];
            tf.delegate = self;
            tf.tag = 16;
            tf.borderStyle = UITextBorderStyleRoundedRect;
            [cell.contentView addSubview:tf];
            [tf release];

            UITextField *tf1 = [[UITextField alloc]initWithFrame:CGRectMake(150, 10, 100, 30)];
            tf1.delegate = self;
            tf1.tag = 17;
            tf1.borderStyle = UITextBorderStyleRoundedRect;
            [cell.contentView addSubview:tf1];
            [tf1 release];
        }
        else {
            UITextField *tf3 = [[UITextField alloc]initWithFrame:CGRectMake(10, 10, 100, 30)];
            tf3.delegate = self;
            tf3.tag = 18;
            tf3.borderStyle = UITextBorderStyleRoundedRect;
            [cell.contentView addSubview:tf3];
            [tf3 release];

        }

    }
    UITextField *tf = (UITextField *)[cell.contentView viewWithTag:16];
    tf.text =  [m_textFieldArray objectAtIndex:indexPath.row];

    UITextField *tf1 = (UITextField *)[cell.contentView viewWithTag:17];
    tf1.text =  [m_textFieldArray objectAtIndex:indexPath.row];
    UITextField *tf3 = (UITextField *)[cell.contentView viewWithTag:18];
    tf3.text =  [m_textFieldArray objectAtIndex:indexPath.row];
   // cell.textLabel.text = @"Hiiiii";
    return cell;
} 
```

并在`textFieldDidEndEditing`方法中写如下。

```
[textFieldsDataArray replaceObjectAtIndex:currentIndexPath.row withObject:textField.text]; 
```

我的问题是，一旦我在一个文本字段中输入文本并上下滚动，那么相同的文本就会出现在同一行中剩余的两个文本字段中。

如果我在三个文本字段中输入文本然后滚动，那就是从最后一个文本字段中获取所有文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:55:43.370

听起来您在单元重用方面遇到了问题。

为了提高性能，UITableView 将在屏幕外重用一个单元格，而不是创建一个新单元格。当一个单元格被重用时，它不会将其清除。重新分配您想要的信息是您的工作。

你设置的信息是这样的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]

    // If the cell is nil, it is a new cell and you need to init it    
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // setting the cell's information
    cell.textLabel.text = [dataSource objectAtIndex:indexPath.row];
    cell.textLabel.textAlignment = UITextAlignmentLeft;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    return cell;
} 
```

# ios - Restkit如何通过主键映射（到多个）关系

> ID：12163438
> 
> 赞同：3
> 
> 时间：2012-08-28T16:17:26.553
> 
> 标签：ios, mapping, key, restkit

我从[大约 6 个月前提交的对 Restkit 的更改中](https://github.com/mcfedr/RestKit/commit/f0d22e4c3e5413de4b6df4eaf7d88960078e3147)看到——Restkit 支持将 JSON 结构与外键数组映射：</p>

```
supports structure such as:
{
  items: [{id: 1}, {id: 2}, {id: 3}],
  itemgroups: [{items: [1, 2]}, {items:[2, 3]}]
} 
```

我的问题是，谁能告诉我如何将这个功能与核心数据一起使用？

我确实检查了 Restkit 源代码，发现[以下代码演示了更改的用法](https://github.com/RestKit/RestKit/blob/master/Tests/Logic/CoreData/RKManagedObjectMappingOperationTest.m)。但它们似乎不适用于 CoreData。

```
RKManagedObjectMapping *humanMapping = [RKManagedObjectMapping mappingForClass:[RKHuman class] inManagedObjectStore:objectStore];

humanMapping.primaryKeyAttribute = @"railsID";
[humanMapping mapAttributes:@"name", @"favoriteCatID", @"catIDs", nil];
[humanMapping mapRelationship:@"cats" withMapping:catMapping];
[humanMapping connectRelationship:@"cats" withObjectForPrimaryKeyAttribute:@"catIDs"]; 
```

人类对象中的 catIDs 属性是一个 NSArray：

```
@interface RKHuman : NSManagedObject {
}

@property (nonatomic, retain) NSNumber *railsID;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSSet *cats;
@property (nonatomic, retain) NSArray *catIDs; 
```

测试用例是通过 NSArray 实现的。但是我们都知道Coredata不能生成**NSArray类型**的属性。所以这个演示代码在现实世界中没有意义，这只是为了测试目的。有谁知道我应该如何使用这个功能：通过主键的多对多关系？

# objective-c - 声明一个带有条件的常量字符串

> ID：12163440
> 
> 赞同：4
> 
> 时间：2012-08-28T16:17:36.490
> 
> 标签：objective-c, ios

我有一个源文件来放置我的所有常量（`constant.h`），如下所示：

```
#define MY_URL @"url"
#define SECOND_URL @"url2"
... 
```

我的问题是用这样的条件声明一个常数：

```
if (ipad)
   #define MY_CONSTANT @"ipad"
else
   #define MY_CONSTANT @"iphone" 
```

请问我该怎么做并将其放入`constant.h`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:35:20.210

如果您同时支持 ipad 和 iphone，则直到*运行*时才知道设备。

如果您使用常量标头，那么您可以按如下方式处理设备特定定义：

常量.h

```
NSString * MON_CONSTANT(); 
```

常数.m

```
NSString * MON_CONSTANT() {
  switch (UI_USER_INTERFACE_IDIOM()) {
    case UIUserInterfaceIdiomPhone :
      return @"iphone";
    case UIUserInterfaceIdiomPad :
      return @"ipad";
    default :
      return @"omg";
  }
} 
```

笔记：

*   我建议将常量放在常量标头以外的地方。通常有一个位置（例如类）与常量更密切相关。
*   不使用`#define`您的常量，请改用该`extern NSString* const`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T16:22:41.520

```
#define MY_CONSTANT ( ipad ? @"ipad" : @"iphone" ) 
```

或者

```
#define MY_CONSTANT ( (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) ? @"ipad" : @"iphone" ) 
```

编辑：以上内容适用于实时做出决定的通用应用程序。如果您想要编译时间决定，那么我通常在 IPAD 或 IPHONE 的 Xcode 目标中使用 PreProcessor Macro，甚至是 UNIVERSAL（构建 3 种方式）：

```
#if defined(IPHONE)
#define MY_CONSTANT 4
#elif defined(IPAD)
#define MY_CONSTANT 6
#elif defined (UNIVERSALO)
#define MY_CONSTANT ( ipad ? 6 : 4 )
#endif 
```

我觉得写起来很乏味，读起来也很乏味：

```
(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

所以我创建了全局 BOOL 变量并在 appDelegate 中设置了值（在初始化中），然后放了一个“extern BOOL iPad;” 我的 pch 文件中的声明。在初始化：

```
ipad = (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) ? YES : NO; 
```

我知道我知道，全局变量不好等等——是的，如果你过度使用它们，但对于这样的事情，它们是完美的。

# ios-ui-automation - 如何使用 UIAutomation 编写测试套件？

> ID：12163441
> 
> 赞同：0
> 
> 时间：2012-08-28T16:17:43.550
> 
> 标签：ios-ui-automation

我开始研究 UIAutomation 来自动化我们的 iOS 应用程序。一切似乎都很好，但我需要有关如何使用 UIAutomation 创建测试套件的想法？

如何为每个测试用例初始化应用程序（重新启动应用程序）？我在其他工具（Robotium for android）中看到每个测试用例都可以独立于其他工具。

基本上我正在寻找的是，当一个测试用例失败/完成时，我将如何将它带到初始状态，以便下一个测试用例将继续没有任何失败？

谢谢， 孔加拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:29:36.703

它可以以不同的方式实现。这是几种方法（不是最好的但最简单的）：

1.  在运行每个测试之前，从您的测试脚本中恢复应用程序的初始状态。（不是最好的方法，因为如果恢复失败 - 所有其他测试也会失败）
2.  从命令行运行 UI 自动化。由于 UI 自动化在 cmd 行执行期间只能运行 1 个脚本 - 您必须创建一个 Python 或任何其他启动脚本来执行以下操作：

一个。读取 txt/xml 配置文件。conf 文件包含一个 js 文件名列表。每个 .js 文件都是您单独的测试。例如 TestSuiteCFG.txt：

```
test1.js
test2.js
... 
testN.js 
```

湾。使用在第一步中读取的测试名称参数从 1 到 N 的“for”循环中的 cmd 行启动 UI 自动化。UI 自动化将与 CFG 文件中的测试一样多次启动。每个新的测试 UI 自动化都将重新启动，您将满足“下一个测试用例将继续进行而不会出现任何故障”的要求。

这种方式还可以让您管理您的测试过程。使用不同的测试集（有限/完全回归、验收等）创建尽可能多的 CFG 文件（或测试套件文件），并通过仅执行一个脚本来运行您的测试套件。它也可以很容易地集成到 CIT 服务器中

# android - 使 Datepicker 在 Android 4.0 上看起来像 2.x

> ID：12163448
> 
> 赞同：1
> 
> 时间：2012-08-28T16:18:14.767
> 
> 标签：android, datepicker

有没有办法让 android 4.0 中的日期选择器看起来像 2.x 设备上的简单选择器？我真的不想使用带有对话框的按钮，但这绝对是巨大的，我不想要“日历”的东西。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:10:01.060

我在选择器中找到了这个方法（适用于 apk>=11）：

```
picker.setCalendarViewShown(false); 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:22:59.937

系统组件的外观取决于平台。您可能能够（或不能）影响颜色之类的东西，但不能影响功能（除非您实现自己的逻辑或布局）。所以总的来说，对你的问题的回答是“否”。

# objective-c - 创建 NSMutableDictionary

> ID：12163452
> 
> 赞同：-2
> 
> 时间：2012-08-28T16:18:33.840
> 
> 标签：objective-c, ios, nsdictionary

您可以使用以下命令创建 NSMutableDictionary：

```
[NSMutableDictionary dictionaryWithDictionary:(NSDictionary *)] 
```

和

```
[[NSMutableDictionary alloc] initWithDictionary:(NSDicitionary *)] 
```

两者之间的唯一区别是第一个返回自动释放的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:23:24.473

是的。

虽然你可以打电话`+ (id)dictionary`，`- (id)init`如果你没有`NSDictionary`实例。

在 ARC 下，越来越简洁的趋势是使用`+ (id)new`它。

# asp.net-web-api - Validating/Manipulating input parameters in multi-tenant web API

> ID：12163461
> 
> 赞同：5
> 
> 时间：2012-08-28T16:19:26.473
> 
> 标签：asp.net-web-api

Assume we have a multi-tenant blog application. Each user of the application may have a number of blogs hosted by the service.

Our API allows for both reading and writing of blog posts. In some cases specifying a BlogId is optional, for example, getting all posts tagged with ASP.NET:

```
/api/posts?tags=aspnet 
```

If we wanted to view all posts tagged with ASP.NET on a *specific* blog, we could request:

```
/api/posts?blogId=10&tags=aspnet 
```

Some API methods *require* a valid BlogId, such as when creating a new blog post:

```
POST: /api/posts
{
    "blogid" : "10",
    "title" : "This is a blog post."
} 
```

The BlogId needs to be validated on the server to ensure it belongs to the current (authenticated) user. I would also like to **infer** the user's default blogId if it is not specified in the request (for simplicity you can assume that default is the user's first blog).

We have an `IAccountContext` object that contains information about the current user. This can be injected if necessary.

```
{
    bool ValidateBlogId(int blogId);
    string GetDefaultBlog();
} 
```

In ASP.NET Web API what would be the recommended approach to:

1.  If the BlogId is specified either in the message body or uri, validate it to ensure it belongs to the current user. Throw a 400 error if not.
2.  If the BlogId is not specified in the request, retrieve the default BlogId from `IAccountContext` and make it available to the controller action. I don't want the controller to be aware of this logic which is why I don't want to call `IAccountContext` directly from my action.

### [Update]

Following discussions on Twitter and taking into account @Aliostad's advice, I decided to treat the Blog as a resource and make it part of my Uri template (so it is always required) i.e.

```
GET api/blog/1/posts -- get all posts for blog 1
PUT api/blog/1/posts/5 -- update post 5 in blog 1 
```

My query logic for loading single items was updated to load by Post id and blog id (to avoid tenants loading/updating other peoples posts).

The only thing left to do was validate the BlogId. It is a shame that we can't use validation attributes on Uri parameters otherwise @alexanderb's recommendation would have worked. Instead I opted to use an ActionFilter:

```
public class ValidateBlogAttribute : ActionFilterAttribute
{
    public IBlogValidator Validator { get; set; }

    public ValidateBlogAttribute()
    {
        // set up a fake validator for now
        Validator = new FakeBlogValidator();
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var blogId = actionContext.ActionArguments["blogId"] as int?;

        if (blogId.HasValue && !Validator.IsValidBlog(blogId.Value))
        {
            var message = new HttpResponseMessage(HttpStatusCode.BadRequest);
            message.ReasonPhrase = "Blog {0} does not belong to you.".FormatWith(blogId);
            throw new HttpResponseException(message);
        }

        base.OnActionExecuting(actionContext);
    }
}

public class FakeBlogValidator : IBlogValidator
{
    public bool IsValidBlog(int blogId)
    {
        return blogId != 999; // so we have something to test
    }
} 
```

Validating the blogId is now simply a case of decorating my controller/action with `[ValidateBlog]`.

Virtually everyone's answers helped in the solution but I have marked as @alexanderb's as the answer since it did not couple the validation logic inside my controller.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T20:44:13.097

I am afraid this is probably not the type of answer you are looking for but well it might add a humble bit to the discussion.

You see all that trouble you are going through to and jumping all the hoops since you need to infer the `blogId`? I think that is the problem. REST is all about stateless while you seem to holding a separate state (context) on the server which comes into clash with stateless nature of HTTP.

BlogId when is an integral part of the operation, needs to be explicitly part of the resource identifier - hence I would put it simply in URL. If you do not, the problem here is the **URL/URI** does not really *uniquely* identify a resource - unlike the name implies. If *John* goes to that resource sees a different resource from when *Amy* does.

This will simplify the design which is also telling. When design is right, it all works nicely. **I strive to achieve simplicity**.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T18:54:10.470

Here is the way, how I would implemented (taking into account, I'm not ASP.NET Web API expert).

So, fist of all - validation. You need to have a simple model, like this:

```
public class BlogPost
{
    [Required]
    [ValidateBlogId]
    public string BlogId { get; set; }

    [Required]
    public string Title { get; set; }
} 
```

For this model, it's better to implement custom validation rule. In case if `blogId` is available, it would be validate against the rule. The implementation could be,

```
public class ValidateBlogId : ValidationAttribute
{
    [Inject]
    public IAccountContext Context { get; set; }

    public override bool IsValid(object value)
    {
        var blogId = value as string;
        if (!string.IsNullOrEmpty(blogId))
        {
            return Context.ValidateBlogId(blogId);
        }

        return true;
    }
} 
```

(here and after, I'm assuming to use Ninject, but you can go ahead without it).

Next, you don't want to expose the details of `blogId` initialization. Best candidate for that job is action filter.

```
public class InitializeBlogIdAttribute : ActionFilterAttribute
{
    [Inject]
    public IAccountContext Context { get; set; }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var blogPost = actionContext.ActionArguments["blogPost"] as BlogPost;
        if (blogPost != null) 
        {
            blogPost.BlogId = blogPost.BlogId ?? Context.DefaultBlogId();
        }
    }
} 
```

So, if blogPost model is binded and it does not have Id, the default will be applied.

So, finally the API controller

```
public class PostsController : ApiController
{
    [InitializeBlogId]
    public HttpResponseMessage Post([FromBody]BlogPost blogPost) 
    {
        if (ModelState.IsValid)
        {
            // do the job
            return new HttpResponseMessage(HttpStatusCode.Ok);
        }

        return new HttpResponseMessage(HttpStatusCode.BadRequest);
    }
} 
```

That's it. I just quickly tried that in my VS, seems to work.

I think it should fulfil your requirements.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T19:11:55.107

Probably you could use HttpParameterBinding also for your scenario. You can look at the posts from [Mike](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx) and [Hongmei](http://blogs.msdn.com/b/hongmeig1/archive/2012/05/11/how-to-write-a-custom-parameter-binding-to-construct-an-object-either-from-body-or-from-uri-s-query.aspx) for more details.

Example below:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Runtime.Serialization;
using System.Security.Principal;
using System.Threading;
using System.Threading.Tasks;
using System.Web.Http;
using System.Web.Http.Controllers;
using System.Web.Http.Metadata;

namespace MvcApplication49.Controllers
{
public class PostsController : ApiController
{
    public string Get([BlogIdBinding]int blogId, string tags = null)
    {
        return ModelState.IsValid + blogId.ToString();
    }

    public string Post([BlogIdBinding]BlogPost post)
    {
        return ModelState.IsValid + post.BlogId.ToString();
    }
}

[DataContract]
public class BlogPost
{
    [DataMember]
    public int? BlogId { get; set; }

    [DataMember(IsRequired = true)]
    public string Title { get; set; }

    [DataMember(IsRequired = true)]
    public string Details { get; set; }
}

public class BlogIdBindingAttribute : ParameterBindingAttribute
{
    public override System.Web.Http.Controllers.HttpParameterBinding GetBinding(System.Web.Http.Controllers.HttpParameterDescriptor parameter)
    {
        return new BlogIdParameterBinding(parameter);
    }
}

public class BlogIdParameterBinding : HttpParameterBinding
{
    HttpParameterBinding _defaultUriBinding;
    HttpParameterBinding _defaultFormatterBinding;

    public BlogIdParameterBinding(HttpParameterDescriptor desc)
        : base(desc)
    {
        _defaultUriBinding = new FromUriAttribute().GetBinding(desc);
        _defaultFormatterBinding = new FromBodyAttribute().GetBinding(desc);
    }

    public override Task ExecuteBindingAsync(ModelMetadataProvider metadataProvider,
                                HttpActionContext actionContext, CancellationToken cancellationToken)
    {
        Task task = null;

        if (actionContext.Request.Method == HttpMethod.Post)
        {
            task = _defaultFormatterBinding.ExecuteBindingAsync(metadataProvider, actionContext, cancellationToken);
        }
        else if (actionContext.Request.Method == HttpMethod.Get)
        {
            task = _defaultUriBinding.ExecuteBindingAsync(metadataProvider, actionContext, cancellationToken);
        }

        return task.ContinueWith((tsk) =>
            {
                IPrincipal principal = Thread.CurrentPrincipal;

                object currentBoundValue = this.GetValue(actionContext);

                if (actionContext.Request.Method == HttpMethod.Post)
                {
                    if (currentBoundValue != null)
                    {
                        BlogPost post = (BlogPost)currentBoundValue;

                        if (post.BlogId == null)
                        {
                            post.BlogId = **<Set User's Default Blog Id here>**;
                        }
                    }
                }
                else if (actionContext.Request.Method == HttpMethod.Get)
                {
                    if(currentBoundValue == null)
                    {
                        SetValue(actionContext, **<Set User's Default Blog Id here>**);
                    }
                }
            });
    }
} 
```

}

[**UPDATED**] My colleague Youssef suggested a very easy approach using ActionFilter. Following is an example using that approach:

```
public class PostsController : ApiController
{
    [BlogIdFilter]
    public string Get(int? blogId = null, string tags = null)
    {
    }

    [BlogIdFilter]
    public string Post(BlogPost post)
    {
    }
}

public class BlogIdFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.Request.Method == HttpMethod.Get && actionContext.ActionArguments["blogId"] == null)
        {
            actionContext.ActionArguments["blogId"] = <Set User's Default Blog Id here>;
        }
        else if (actionContext.Request.Method == HttpMethod.Post)
        {
            if (actionContext.ActionArguments["post"] != null)
            {
                BlogPost post = (BlogPost)actionContext.ActionArguments["post"];

                if (post.BlogId == null)
                {
                    post.BlogId = <Set User's Default Blog Id here>;
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T17:52:01.840

As not all of the controller action requires this, normally I would implement an Action Filter for this purpose and make the validation there but your requirements have other concerns which makes this option, well not an option.

Also, I would require for the client to send the `BlogId` as part of the Uri because with this in place, you would avoid extra deserializing of the body (as you don't want to handle this inside the controller action).

You have some requirements here and they matter:

*   You don't want to handle this inside every action method.
*   You want to get the id automatically if it is not supplied.
*   If it is supplied but not valid (e.g. not belong to current user), you want to return 400 Bad Request.

Considering these requirements, best option is to handle this through the base controller. Might be a not good option for you but handles all your requirements:

```
public abstract class ApiControllerBase : ApiController {

    public int BlogId { get; set; }

    public override Task<HttpResponseMessage> ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancellationToken) {

        var query = controllerContext.Request.RequestUri.ParseQueryString();
        var accountContext = controllerContext.Request.GetDependencyScope().GetService(typeof(IAccountContext));
        if (query.AllKeys.Any(x => x.Equals("BlogId", StringComparison.OrdinalIgnoreCase | StringComparison.InvariantCulture))) {

            int blogId;
            if (int.TryParse(query["BlogId"], out blogId) && accountContext.ValidateBlogId(blogId)) {

                BlogId = blogId;
            }
            else {

                ModelState.AddModelError("BlogId", "BlogId is invalid");

                TaskCompletionSource<HttpResponseMessage> tcs = 
                    new TaskCompletionSource<HttpResponseMessage>();
                tcs.SetResult(
                    controllerContext.Request.CreateErrorResponse(
                        HttpStatusCode.BadRequest, ModelState));
                return tcs.Task;
            }
        }
        else {

            BlogId = accountContext.GetDefaultBlogId();
        }

        return base.ExecuteAsync(controllerContext, cancellationToken);
    }
} 
```

You can also consider implementing the [IValidatableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx) for your RequestModel but that might make your model a little bit coupled with another parts of your application

# windows-phone-7 - 用于 Windows 手机应用程序的 ram

> ID：12163469
> 
> 赞同：0
> 
> 时间：2012-08-28T16:20:15.610
> 
> 标签：windows-phone-7

根据 MS，windows phone sdk 的系统要求是 3gb RAM， [这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402530%28v=vs.92%29#BKMK_SysReqs.)

这是一个严格的要求，我的笔记本电脑只有 2gb 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:24:09.483

ram 要求主要针对 Visual Studio 本身，因为编译 siverlight(for wp) 有点繁重，缺少 ram 会导致系统挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:40:21.657

ram 要求适用于 Visual Studio。但是你应该能够用 2GB 的内存来运行它，它只会更慢并且可能会遇到内存不足的异常。

物理 Window phone 7 要么有 256MB 内存，要么有 512MB 内存。并且取决于您获得的手机型号。

随机说明，这里是 Windows Phone 7 必须具备的规格的链接：http: [//msdn.microsoft.com/en-us/library/ff637514%28v=VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff637514%28v=VS.92%29.aspx)

您的链接是用于开发 Windows Phone 7 应用程序的计算机“需要”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T18:39:20.520

我一直在用旧笔记本电脑制作 Windows Phone 应用程序。首先，笔记本电脑有 1gb 的 RAM，模拟器甚至无法启动（但我可以直接部署到设备上）。我升级到 2gb，现在它工作正常。所以不，这不是一个严格的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T06:27:38.987

3G 需要同时运行 Visual Studio 和手机模拟器，以便交互式调试手机应用程序。

如果您有一部可以运行应用程序的实体手机，那么您的开发工作站上只需要 2G 的 RAM。

我用 2G 和一部真手机做了很多工作。只是为了笑，我尝试使用模拟器，我发现这也适用于 2G，但由于大量交换，它非常慢。

# jquery - jQuery切片函数/每对两个

> ID：12163471
> 
> 赞同：2
> 
> 时间：2012-08-28T16:20:30.590
> 
> 标签：jquery, function, slice, each

我试图遍历一系列元素，迭代一个数字并以不同的方式将其应用于两个元素。

因此，假设我有 20 个元素，并且想要保持前 6 个元素不变，我在 6 处进行切片。然后，我需要从 #7 开始对每个元素应用样式，但需要成对进行两个。因此，元素 7 和 8 将位于顶部：0；左：0；而元素 9 和 10 将位于顶部：240px；左：240px；

然后元素 11 和 12 将位于顶部：480px；左：0；而元素 13 和 14 将位于顶部：720px；左：240px；

我希望这种模式是有意义的。

我不知道实现这一目标的最佳方法。我的代码在下面，但是，我只使用“this”来引用元素，绝不会试图识别对。那是我不明白该怎么做。

这是我的例子：

```
$('#main article').slice(6).each(function(i) {

    // first pair of two
    $(this).css({
        top  : i * 240 + 'px'
    });

    // second pair of two
    $(this).css({
        top  : i * 240 + 'px',
        left : 480 + 'px'
    });

}); 
```

非常感谢任何帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:35:53.087

**CSS 仅在原始 JS 答案下方进行非增量更新。**

您可以将其更改为在列表上使用 for 循环并在中途增加索引：

```
var el = $('#main .article');
for(var i=0; i <= el.length; i++){
    var left = (i == 0) ? 0 : i * 40;
        $(el[i]).css({
            top: i * 40 + "px",
            left: left + "px"
        });
        i++;
        $(el[i]).css({
            top: i * 40 + "px",
            left: left + "px"
        });
}​ 
```

当然，您仍然可以使用切片，但如果您使用的是 position:relative 或 absolute，则需要正确定位前 6 个元素，以免它们相互重叠。

[这是一个显示它工作的小提琴。](http://jsfiddle.net/digthedoug/mSfRS/4/)

## 从下面的评论讨论中编辑：

如果增量值对您不重要，您可以使用直接 CSS 实现模式：

```
.article:nth-child(4n-1),
.article:nth-child(4n-1) + li{
    opacity: 0.4;
} 
```

[这是小提琴。](http://jsfiddle.net/digthedoug/vRBUZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:06:57.887

很容易做到——在 .each 循环中只需要一些代码：

```
var pair = 0;
$('#main .article').slice(6).each(function(i) {
    var second = i%2 > 0;
    var topPx = (20 + (pair * 24)) + 'px';
    var leftPx = (pair * 24 + (second? 20 : 0)) + 'px';
    $(this).css({ "top": topPx, "left": leftPx });
    if(second) pair++;
}); 
```

这使用 mod 运算符来查看项目是否是该对中的第二个，并将顶部位置基于该对值。左侧位置稍作调整，因此可以看到。我调整了像素数以适应 jsFiddle 视图。

这是一个工作[jsFiddle](http://jsfiddle.net/styson/w3NsP/5/)。

# python - getattr 的最大递归深度误差

> ID：12163476
> 
> 赞同：2
> 
> 时间：2012-08-28T16:20:48.063
> 
> 标签：python, exception-handling, recursion, descriptor

我有这个代码；

```
class NumberDescriptor(object):
    def __get__(self, instance, owner):
        name = (hasattr(self, "name") and self.name)
        if not name:
            name = [attr for attr in dir(owner) if getattr(owner,attr) is self][0]
            self.name = name
        return getattr(instance, '_' + name)
    def __set__(self,instance, value):
        name = (hasattr(self, "name") and self.name)
        if not name:
            owner = type(instance)
            name = [attr for attr in dir(owner) if getattr(owner,attr) is self][0]
            self.name = name
        setattr(instance, '_' + name, int(value))

class Insan(object):
    yas = NumberDescriptor()

a = Insan()
print a.yas
a.yas = "osman"
print a.yas 
```

我在行中得到最大递归深度错误`name = [attr for attr in dir(owner) if getattr(owner,attr) is self][0]`。我希望那行得到用于当前描述符实例的变量的名称。谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T16:27:46.140

`getattr()`呼叫正在呼叫您的`__get__`.

解决此问题的一种方法是通过超类显式调用`object`：

```
object.__getattribute__(instance, name) 
```

或者，更清楚：

```
instance.__dict__[name] 
```

# java - 带有网络驱动器的类路径以运行 Java 程序

> ID：12163485
> 
> 赞同：0
> 
> 时间：2012-08-28T16:21:15.380
> 
> 标签：java, applescript, classpath, network-drive

我在共享（Windows）网络驱动器中有一堆罐子。我想推荐那些`jars`使用`java -classpath /network/drive/path/* myClass`. 我将从一个运行这个命令，`applescript`所以我尝试了类似下面的东西 -

```
 do shell script "java -classpath smb://user:pass@server/shared/jars/* myClass" 
```

但它似乎不起作用，有没有办法做到这一点，而不是在本地机器或包内有一大堆jar文件`Application`？

以上适用于Windows`batch`脚本，如

```
java -classpath S:\shared\jars\* myClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:35:29.890

您的 Windows 示例并不是一个真正公平的比较，因为您已经清楚地将驱动器号映射到网络路径，然后将其与 Java 命令一起使用。Mac OS 上的等价物是挂载网络卷，您可以通过 Finder -> Go -> Connect to server 或通过 AppleScript 使用`mount volume`命令来执行此操作。无论哪种方式，如果您挂载，则`smb://user:pass@server/shared`可以在路径下访问其内容`/Volumes/shared`：

```
do shell script "java -classpath /Volumes/shared/jars/\\* myClass" 
```

# c# - 如何在 Windows 窗体应用程序 c#/.net 中嵌入壁虎

> ID：12163486
> 
> 赞同：1
> 
> 时间：2012-08-28T16:21:26.497
> 
> 标签：c#, .net, webbrowser-control

你好，我是 c#/.net 的初学者，我不知道如何在 Visual Studio 2008 中添加额外的控件。

我想知道如何使用 Gecko 而不是 webBrowsercontrol。

我已经下载了 Gecko 包装器，但我不知道如何在 c#/.net 中使用这个浏览器。请告诉我如何在 c#/.net windows 窗体应用程序中使用 Gecko，因为我们使用 webBrowser 控件。我曾尝试在 Visual Studio 工具箱中添加此控件，但没有成功...................................... ………………………………………………………………………………………………………………………………………………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:24:41.713

你右键单击工具箱，你必须选择“Choose Items..”并选择包含控件 Gecko 的 dll

# php - DateTime 倒计时和到期

> ID：12163488
> 
> 赞同：3
> 
> 时间：2012-08-28T16:21:36.253
> 
> 标签：php, mysql, datetime

我在我的网站上发布了具有到期日期时间的帖子，我将它们存储在 Mysql 中

```
'Y-m-d H:i:s' 
```

IE。2012-08-28 00:00:00

我将此日期时间转换为以下格式，该格式传递给 jquery 倒计时

```
$offset.', Y, n - 1, j, H, i, s' 
```

这部分按应有的方式工作。

我想要做的是获取当前时间，并且只从数据库中获取未过期的帖子。让我绊倒的事情是所有帖子都有不同的时区。它们中的大多数在午夜到期，但在不同的时区，一些在东部午夜到期，而另一些在太平洋午夜到期。这些都存储为 2012-08-28 00:00:00 ，时区存储在数据库中作为 timezone.name 即。美国/东部。对于倒计时，$offset 是从这个值为 -4 的值创建的，因此倒计时的输入是

```
-4, 2012, 8 - 1, 28, 00, 00, 00 
```

哪个适用于我正在使用的 jquery 计数器，但在尝试将当前日期与 mysql 日期条目进行比较时它不起作用。我已经尝试在获取 mysql 日期时间条目并为东部存储这样的值之前设置时区

```
2012-08-27 20:00:00 
```

当我尝试设置当前时间并使用我的 America/Phoenix 时区时，我得到的值是晚上 9 点，东部的帖子应该到期时我得到

```
2012-08-28 21:00:00 
```

这对我来说意味着帖子会提前一个小时过期。这是我被卡住了，我愿意将数据存储在多个数据库条目中以用于倒计时和一个用于过期数据库检查，我只是不知道实现我需要的最佳方法是什么。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:31:19.630

我个人会将所有过期时间转换为 UTC（或其他一些定义的时区 - 如果它们相同，则可能是您的数据库服务器和应用程序服务器的时区），然后再将它们输入数据库表，然后根据时区查询该表特定的用户。例如，WHERE 子句可能看起来像

```
WHERE expiration_datetime > NOW() + INTERVAL X HOUR 
```

其中 X 是您为用户的时区应用小时差的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:28:27.437

如果您允许帖子时间戳未被规范化，那么您的数据库设计错误。只要所有时间戳都在同一个时区，我与用户所在的时区无关，没什么大不了的。因此，您的问题的答案是 - 修复您的设计，将所有时间戳保持在同一时区（为简单起见，GMT）。

# asp.net-mvc-3 - MVC 3 路由绑定问题

> ID：12163489
> 
> 赞同：0
> 
> 时间：2012-08-28T16:21:37.490
> 
> 标签：asp.net-mvc-3

我在尝试将 2 个数据库值绑定到 URL 时遇到问题，我的 global.asax 文件正确为

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}/{stitle}", // URL with parameters
            new { controller = "article", action = "Index", id = UrlParameter.Optional, stitle= UrlParameter.Optional} // Parameter defaults

        ); 
```

我遇到的问题是我的控制器由于某种原因我无法在这里返回第二个值是我的控制器代码

```
public ActionResult Detail(int id,string stitle)
    {

        Article article = db.Articles.Find(id);  
      stitle = (from s in db.Articles where id == s.ArticleID select s.stitle).FirstOrDefault();

        return View(article);
    } 
```

是否有某种方式可以返回**stitle**或将其包含在文章中，因为**stitle**是数据库中的字符串值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:24:07.673

只有路由的最后一个参数可以是可选的。因此，在您的情况下，`id`参数不再是可选的：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}/{stitle}",
    new { controller = "article", action = "Index", stitle = UrlParameter.Optional }
); 
```

然后确保您正在生成指向此操作的正确链接：

```
@Html.ActionLink("click me", "index", "article", new { id = "123", stitle = "some-title" }, null) 
```

生成的 url 应该是这样的：

```
href="/article/index/123/some-title" 
```

# css - 为每个 x 元素添加类

> ID：12163490
> 
> 赞同：1
> 
> 时间：2012-08-28T16:21:43.387
> 
> 标签：css

我有未定义数量的 div 用于在产品列表页面中显示产品，每行有 4 个 div，每个产品一个。我需要的是为每行的第一个 div 分配一个 CSS 类，然后为每行的第二个 div 分配另一个 CSS 类等。我相信你可以用 CSS 或者 jQuery 来做到这一点，但我不知道要搜索什么。

所需的输出如下所示：

```
<div> //row1
  <div id="1" class="grid1"> Product 1 </div>
  <div id="2" class="grid2"> Product 2 </div>
  <div id="3" class="grid3"> Product 3 </div>
  <div id="4" class="grid4"> Product 4 </div>
</div>
<div> //row 2
  <div id="5" class="grid1"> Product 5 </div>
  <div id="6" class="grid2"> Product 6 </div>
  <div id="7" class="grid3"> Product 7 </div>
  <div id="8" class="grid4"> Product 8 </div>
<div>
... 
```

任何指向正确方向的观点都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:23:07.687

你可以用纯 CSS 来做到这一点（你甚至不需要它的类）：

```
div > div:nth-child(1) { ... }
div > div:nth-child(2) { ... }
div > div:nth-child(3) { ... }
div > div:nth-child(4) { ... } 
```

基于 jQuery 的解决方案可能如下所示；请注意，它假定您的行级 div 具有`class="row"`：

```
$('div.row > div').each(function() {
    $(this).addClass('grid' + ($(this).index() + 1));
}); 
```

# excel - 用于复制特定行的 Excel 宏

> ID：12163494
> 
> 赞同：0
> 
> 时间：2012-08-28T16:22:07.970
> 
> 标签：excel, vba

我有一个大约 300001 行和 20 列的巨大电子表格。第一列 A 是从 0 到 3 的数字重复，步长为 0.001（3001 个单元格，总共 100 次重复）。我想挑选出对应于 3 列 A 条目的 ROWS，将它们转置并将它们写入新工作表。我该怎么做呢？宏和 VBA 的总菜鸟，但我熟悉编程（主要是 C++）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:11:18.967

你并不真的需要宏来做这样的事情——但话说回来，这看起来更像是你在做的事情，而不是任何实际的事情。

您可以按 A 列从高到低对范围“A1：T300001”进行排序，然后复制并粘贴前一百行。

但是，如果您想要一个执行此操作的宏，这应该适合您：

```
Sub MacroAutofilterExample()
    ActiveSheet.Range("$A$1:$T$300001").AutoFilter Field:=1, Criteria1:="3.000"

    Range("A1:T300001").Select
    Selection.Copy
    Sheets(2).Select
    Range("A1").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("A1").Select

    Sheets("Sheet1").Select
    Range("A1").Select
    Selection.AutoFilter
    Range("A1").Select

End Sub 
```

显然，使用选择会导致一些效率损失（因为我记录了其中的一部分），但您可以将其更改为使用设置范围 - 通常这应该会给您一个想法。

**编辑：**

您将更改该字段：

```
Transpose:=False 
```

在上面的代码中：

```
Transpose:=True 
```

如果你想要你的结果转置。

# android - 使用 CursorLoader 获取联系人会导致重复

> ID：12163497
> 
> 赞同：1
> 
> 时间：2012-08-28T16:22:25.277
> 
> 标签：android, cursor

我正在构建一个活动，我想用具有电话号码的联系人填充该活动。

我没有使用 Intent，因为我希望在我的列表视图中的每个联系人之前都有一个复选框。

我正在使用 CursorLoader。这是 onCreateLoader 方法的一些代码；

```
String projection[] = new String[]{ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME};
    Uri uri = ContactsContract.Data.CONTENT_URI;

    String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1" + 
    " AND " + ContactsContract.Contacts.IN_VISIBLE_GROUP + " =1";

    String order = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    CursorLoader loader = new CursorLoader(this, uri, projection, selection, null, order); 
```

我将 ResourceCursorAdapter 的子类与我的 ListView 一起使用。

有谁知道我如何删除重复项？除非真的必须，否则我不想使用 Set 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:34:08.223

我建议查询该`Contacts`表而不是原始`Data`表。

```
Uri uri = ContactsContract.Contacts.CONTENT_URI; 
```

数据表包含原始联系人数据，这可能意味着同一“人”的多个条目，因为 Android 联系人是从多个不同的帐户来源汇总的。其他一切看起来都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:28:59.277

如果您已经验证您的游标返回的数据没有加倍结果（并且该内容提供者没有重复），那么问题很可能出现在您的 and 的实现`newView`中`bindView`。确保`newView`只返回一个“空白”视图，这意味着没有设置 TextViews 或 ImageViews 的值。将这些值设置在`bindView`. 很可能`bindView`没有正确设置视图中的值。

# php - PHP mongodb 驱动程序在每个请求上检查副本集的主节点

> ID：12163498
> 
> 赞同：1
> 
> 时间：2012-08-28T16:22:34.803
> 
> 标签：php, mongodb, mongodb-php, nosql

对 mongodb 副本集的典型 PHP 调用

```
$m1 = new Mongo("mongodb://sf2.example.com,ny1.example.com", 
      array("replicaSet" => "myReplSet")); 
```

文件说：

```
// you only need to pass a single seed, the driver will derive the full list and
// find the master from this seed 
```

**问题：**

1.  那么这是否意味着司机会满足`derive the full list`每一个要求？或者他们会缓存它？

2.  如果他们缓存它，它会在故障转移期间引起问题吗？写到`slave`它被降级为`secondary`

3.  驱动程序在遇到写入错误时会刷新服务器列表并重试写入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:11:31.933

要回答您的问题：

1) PHP 驱动程序与大多数 MongoDB 驱动程序一样，一旦获得连接信息，就会对其进行缓存。

2) 如果发生故障转移，之前的主节点将断开与所有客户端的所有连接。下次驱动程序尝试在套接字上读取或写入时，它会得到一个错误。如果驱动程序在操作时无法重新连接到新的主节点，则会抛出 PHP MongoConnectionException 异常。

3) 由您的应用程序来捕获此异常并在引发此异常时重试。

参考： http: [//php.net/manual/en/mongo.connecting.php](http://php.net/manual/en/mongo.connecting.php)

# msbuild - msbuild 包任务无法包含程序集 DocumentFormat.OpenXml

> ID：12163506
> 
> 赞同：2
> 
> 时间：2012-08-28T16:22:51.663
> 
> 标签：msbuild, packaging, strongname

我有一个构建 mvc 3 站点的 Visual Studio 2010 解决方案。我的一个类库项目引用了程序集 DocumentFormat.OpenXml.dll。当我在本地和构建服务器上编译时，xml 程序集显示在 bin 中，但构建服务器上的 msbuild 尝试将其打包，这个程序集从包中丢失。我能看到的唯一区别是 DocumentFormat.OpenXml 是强命名的。

是否有特殊步骤来打包和部署强命名的程序集引用？我必须将它安装到 GAC 中吗？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:10:58.357

这似乎是 Visual Studio 中的一个错误：我在 notepad++ 中编辑了项目文件：

```
 <Reference Include="DocumentFormat.OpenXml, Version=2.0.5022.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL"> 
```

并将额外的属性剥离为：

```
<Reference Include="DocumentFormat.OpenXml"> 
```

现在它正在出版。现在我将返回并删除每个属性，看看是某个特定的属性导致了问题，还是所有属性都导致了问题。

# javascript - 有没有一种方法可以检查 javascript 以毫秒为单位执行一个函数需要多长时间？

> ID：12163507
> 
> 赞同：1
> 
> 时间：2012-08-28T16:22:50.893
> 
> 标签：javascript, jquery

我有如下代码：

```
oTable = $('#dataTable').dataTable({
    "sScrollX": "100%",
    "bScrollCollapse": true,
    iDisplayLength: -1,
    aLengthMenu: [[-1, 25, 50, 200, "All"], [10, 25, 50, 200, "All"]],
    aoColumnDefs: [
        { "sSortDataType":"dom-data-rk", "aTargets": ["sort-data-rk"] },
        { "sType": "date-uk", "aTargets": ["sort-date-uk"] },
        { "sType": "datetime-uk", "aTargets": ["sort-datetime-uk"] }
    ]
}); 
```

有没有办法可以计算这段代码使用 javascript 或 jQuery 执行的时间。类似于 C# 中的秒表方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:25:02.603

您可以使用控制台时间并验证它需要多长时间。

```
console.time('profile');

for ( var i=0; i < 100000; i++) {
   var arr = new Array();
}

var time = console.timeEnd('profile'); 
```

变量时间将以毫秒为单位得到结果示例：http: [//jsfiddle.net/dadviegas/dV9rf/](http://jsfiddle.net/dadviegas/dV9rf/)

适用于所有浏览器

```
var one=new Date();
for ( var i=0; i < 100000; i++) {
  var arr = new Array();
}
var two=new Date();

//Calculate difference btw the two dates
alert(two.getMilliseconds()-one.getMilliseconds()); 
```

我在 jsfiddle 中添加了这个解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:49:56.620

试试这个：

```
var start = new Date();
var startTime = start.getTime();

// do whatever you want, your code

var end = new Date();
var endTime= end.getTime();
var timeTaken = end - start;
alert('Execution time is : ' + timeTaken); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:25:10.137

是否有日期对象

```
var t = new Date;
//some processing here

console.log( new Date - t ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:49:11.617

对于 IE，你需要使用类似这样的东西

```
 var start = new Date().getTime();

    oTable = $('#dataTable').dataTable({
     "sScrollX": "100%",
     "bScrollCollapse": true,
     iDisplayLength: -1,
     aLengthMenu: [[-1, 25, 50, 200, "All"], [10, 25, 50, 200, "All"]],
     aoColumnDefs: [
        { "sSortDataType":"dom-data-rk", "aTargets": ["sort-data-rk"] },
        { "sType": "date-uk", "aTargets": ["sort-date-uk"] },
        { "sType": "datetime-uk", "aTargets": ["sort-datetime-uk"] }
     ]
    });

    var end = new Date().getTime();
    var time = end - start;
    alert('Execution time: ' + time); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T16:55:18.210

这是 C# 秒表的主要功能的实现。它使用新的[performance.now()](http://updates.html5rocks.com/tag/performance)函数——它比 getTime() 更准确——在可用的情况下。

```
var Stopwatch = function () {
    var startTime;
    var hasPerformance = window.performance && window.performance.webkitNow;

    return {
        start: function () {
            startTime = hasPerformance ? window.performance.webkitNow() : new Date().getTime();
        },
        end: function () {
            this.elapsed = (hasPerformance ? window.performance.webkitNow() : new Date().getTime()) - startTime;
        },
        elapsed: 0
    };
} 
```

用法：

```
var myStopwatch = Stopwatch();
myStopwatch.start();
/* code you want to time goes here */
myStopwatch.end()
alert("It took " + stopwatch.elapsed + " milliseconds!"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T17:27:51.690

内置的 JS 计时器根本不能提供很好的准确性。

我喜欢 dynatrace AJAX 版本。这是一个 IE 插件，提供了非常好的时间。

[http://ejohn.org/blog/deep-tracing-of-internet-explorer/](http://ejohn.org/blog/deep-tracing-of-internet-explorer/)

# mysql - PDO 而不是 MYSQL 函数

> ID：12163513
> 
> 赞同：1
> 
> 时间：2012-08-28T16:23:16.540
> 
> 标签：mysql, function, pdo

上周我帮助解决了以下脚本的问题。解决了。再次感谢。然而，许多人建议改用 PDO。这个脚本需要如何为 PDO 编写？有推荐的示例教程吗？

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

 mysql_select_db("bdcarterascv2", $con);

$COD_PAIS = '3';
$F_HASTACORTE = '2012-03-31 01:00:00';

$result = mysql_query("SELECT mcarteras.DES_CARTERA_CC                 AS 'Short Name of Fund'
     , mcarterasflias.DES_CARTERAFLIA           AS 'I/C'
     , msociedades.DES_SOCIEDAD_CORTO           AS 'Fund Manager Company'
     , mcarteras_clases.DES_CARTERACLASE        AS 'Class'
     , mcarteras_clasesesp.DES_CARTERACLASE_ESP AS 'Special Class'
     , dr_rentmovil_carteras.POR_RENTCARTERA    AS 'TTR year-to-date %'
     , dficha_mes.POR_REMUNERA_COBRADA          AS 'Mgmt Fee Effectively Charged'
     , dficha_mes.POR_GASTOS_TOTALESC           AS 'Total Expenses %'
     , dficha_mes.VR_CARTERA_FCORTE             AS 'Fund Size'

  FROM mcarteras
INNER
  JOIN mcarterasflias
    ON mcarterasflias.ID_CARTERAFLIA           = mcarteras.ID_CARTERAFLIA
INNER
  JOIN msociedades
    ON msociedades.ID_SOCIEDAD                 = mcarteras.ID_SOCIEDADADM
INNER
  JOIN mcarteras_clases
    ON mcarteras_clases.ID_CARTERACLASE        = mcarteras.ID_CARTERACLASE
INNER
  JOIN mcarteras_clasesesp
    ON mcarteras_clasesesp.ID_CARTERACLASE_ESP = mcarteras.ID_CARTERACLASE_ESP  
INNER
  JOIN dr_rentmovil_carteras
    ON dr_rentmovil_carteras.ID_CARTERA        = mcarteras.ID_CARTERA   
   AND dr_rentmovil_carteras.COD_PAIS                                       = $COD_PAIS
   AND dr_rentmovil_carteras.F_HASTACORTE                                   = '$F_HASTACORTE'
   AND dr_rentmovil_carteras.ID_FORMATO = 1
   AND dr_rentmovil_carteras. ID_COLUMNA = 5
INNER
  JOIN dficha_mes
    ON dficha_mes.ID_CARTERA                   = mcarteras.ID_CARTERA   
   AND dficha_mes.COD_PAIS                                                  = $COD_PAIS
   AND dficha_mes.F_CORTE                                                   = '$F_HASTACORTE'

 WHERE mcarteras.COD_PAIS                                                   = $COD_PAIS
   AND mcarteras.ID_CARTERATIPO = 4
   AND mcarteras.ID_CARTERAFLIA IN ( 3,4 )
   AND mcarteras.IND_PUBLICACION = 1
   AND mcarteras.COD_ESTADO= 1

")
or die(mysql_error());

// HTML ... Aliases from Mysql
echo "<table border='1'>
<tr>
<th>Short Name of Fund</th>
<th>I/C</th>
<th>Fund Manager Company</th>
<th>Class</th>
<th>Special Class</th>
<th>TTR year-to-date %</th>
<th>Mgmt Fee Effectively Charged</th>
<th>Total Expenses %</th>
<th>Fund Size</th>

</tr>";

//<tr> specifies table row. for each <td> (table data) will specify a new column.  The     $row specifies the mysql column name (in this case using an alias)
    while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Short Name of Fund'] . "</td>";
  echo "<td>" . $row['I/C'] . "</td>";
  echo "<td>" . $row['Fund Manager Company'] . "</td>";
  echo "<td>" . $row['Class'] . "</td>";
  echo "<td>" . $row['Special Class'] . "</td>";
  echo "<td>" . $row['TTR year-to-date %'] . "</td>";
  echo "<td>" . $row['Mgmt Fee Effectively Charged'] . "</td>";
  echo "<td>" . $row['Total Expenses %'] . "</td>";
  echo "<td>" . $row['Fund Size'] . "</td>";

  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:24:59.530

我不会把它翻译成PDO。对于简单的查询，我更喜欢 PDO，但我在纯 SQL 中做的任何复杂的事情。我通常在 a 处画线`JOIN`。

# solr - 哪些词在索引字段中最常见？

> ID：12163515
> 
> 赞同：5
> 
> 时间：2012-08-28T16:23:20.703
> 
> 标签：solr

我如何在 Solr 中查询最常见的索引词？例如，给定每个文档的这些字段：

*   有一位女士确信所有的闪光都是金色的。
*   黄金比白银更值钱。
*   这位女士戴着金手镯。

我希望 Solr 以任何格式返回给我以下输出：

*   金 (3)
*   女士 (2)
*   (2) // 作为停用词，这并不是必需的
*   ...

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:30:58.567

使用卢克请求处理程序

[http://wiki.apache.org/solr/LukeRequestHandler](http://wiki.apache.org/solr/LukeRequestHandler)

例子：

`http://localhost:8983/solr/admin/luke?fl=Your_Indexed_Field&numTerms=500`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T10:49:20.783

[条款组件](http://wiki.apache.org/solr/TermsComponent)似乎非常适合这项任务。这是一篇关于[自我更新 Solr 停用](http://www.jason-palmer.com/2011/12/self-updating-solr-stopwords/)词的文章，它使用术语组件查找 1000 个最常见的索引词并将它们添加到停用词文件中。

查找 1000 个索引关键字（按频率降序排序）：

```
http://url.to.solr/solr/terms?terms.fl=MY_FIELD&terms.limit=1000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:57:37.393

据我所知，这并不完全是 Solr 的用例，但可以通过 faceting 来完成。但是不能保证性能。确保您的字段设置为正确标记，然后像往常一样运行查询，但最后使用以下附加参数：

```
&facet=true&facet.field=yourfield 
```

替换`yourfield`为您存储数据的字段的名称。

# visual-studio-2010 - 学校：继承，证明我的课有效？

> ID：12163520
> 
> 赞同：0
> 
> 时间：2012-08-28T16:23:46.290
> 
> 标签：visual-studio-2010, class, visual-c++, inheritance

我有两个类，一个叫做“Person”，另一个叫做“Student”，我一直在追逐这个，但我无法编译它。我拥有从链接错误到现在的一切。

```
 Person.h    
 #include <iostream>
 #include <string>

 using namespace std;

 class Person
 {
public:
    Person() 
    {
        cout << "Person: no parameters\n";
    }

    Person(string a, string b, string c, string d, string e, string f)
    {
        cout << "Person:" << a << endl;
        cout << "Person:" << b << endl;
        cout << "Person:" << c << endl;
        cout << "Person:" << d << endl;
        cout << "Person:" << e << endl;
        cout << "Person:" << f << endl;
    }

    ~Person();

    void Person::set_values (string a, string b, string c, string d, string e, string f)
    {
        name = a;
        address = b;
        city = c;
        state = d;
        zip = e;
        phone_number = f;
    }

protected:
    string phone_number;
    string name;
    string address;
    string city;
    string state;
    string zip;
 };

 Student.h
 #include <iostream>
 #include <string>

 #ifndef Person
 #define Person
 #endif

 using namespace std;

 class Student: Person
 {

 private:
string grade;
string course;
string gpa;

 public:
Student()
{
    cout << "Person: no parameters\n";
}

Student(string g, string h, string i)
{
    cout << "Person:" << g << endl;
    cout << "Person:" << h << endl;
    cout << "Person:" << i << endl;
}

~Student();

void setClass_values (string g, string h, string i)
{
    grade=g;
    course=h;
    gpa=i;
}
 };

 friendly2.cpp

 #include <iostream>
 #include <string>
 #include "Person.h"
 #include "Student.h"

 using namespace std;

 int main(void) 
 {
Person person;
Student student;
person.set_values("Fred", "825 Rice Street", "St. Paul", "MN","55421", "651-488-8888"); 
student.setClass_values("A", "Truck Driving", "4.0");

system("pause");
return 0; 
 }
 Error  12  error C2039: '{ctor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  14  error C2039: '{ctor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  16  error C2039: '{ctor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  37  error C2039: '{ctor}' : is not a member of 'Student'    d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  15  1   friendly
 Error  3   error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  20  1   friendly
 Error  5   error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  20  1   friendly
 Error  7   error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  20  1   friendly
 Error  9   error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  10  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  11  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  13  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  15  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  17  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  25  1   friendly
 Error  27  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  35  1   friendly
 Error  28  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  35  1   friendly
 Error  29  error C2039: '{dtor}' : is not a member of 'std::basic_string<_Elem,_Traits,_Ax>'   d:\visual studio 2010\projects\friendly\friendly\student.h  35  1   friendly
 Error  38  error C2039: '{dtor}' : is not a member of 'Student'    d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  15  1   friendly
 Error  39  error C2039: '{dtor}' : is not a member of 'Student'    d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  15  1   friendly
 Error  42  error C2039: 'setClass_values' : is not a member of 'Student'   d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  17  1   friendly
 Error  1   error C2059: syntax error : '{' d:\visual studio 2010\projects\friendly\friendly\student.h  12  1   friendly
 Error  32  error C2065: 'course' : undeclared identifier   d:\visual studio 2010\projects\friendly\friendly\student.h  37  1   friendly
 Error  20  error C2065: 'endl' : undeclared identifier d:\visual studio 2010\projects\friendly\friendly\student.h  27  1   friendly
 Error  23  error C2065: 'endl' : undeclared identifier d:\visual studio 2010\projects\friendly\friendly\student.h  28  1   friendly
 Error  26  error C2065: 'endl' : undeclared identifier d:\visual studio 2010\projects\friendly\friendly\student.h  29  1   friendly
 Error  19  error C2065: 'g' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  27  1   friendly
 Error  31  error C2065: 'g' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  36  1   friendly
 Error  34  error C2065: 'gpa' : undeclared identifier  d:\visual studio 2010\projects\friendly\friendly\student.h  38  1   friendly
 Error  30  error C2065: 'grade' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  36  1   friendly
 Error  22  error C2065: 'h' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  28  1   friendly
 Error  33  error C2065: 'h' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  37  1   friendly
 Error  25  error C2065: 'i' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  29  1   friendly
 Error  35  error C2065: 'i' : undeclared identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  38  1   friendly
 Error  36  error C2065: 'person' : undeclared identifier   d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  14  1   friendly
 Error  40  error C2065: 'person' : undeclared identifier   d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  16  1   friendly
 Error  41  error C2228: left of '.set_values' must have class/struct/union d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  16  1   friendly
 Error  8   error C2676: binary '<<' : 'std::ostream' does not define this operator or a conversion to a type acceptable to the predefined operator d:\visual studio 2010\projects\friendly\friendly\student.h  22  1   friendly
 Error  18  error C2676: binary '<<' : 'std::ostream' does not define this operator or a conversion to a type acceptable to the predefined operator d:\visual studio 2010\projects\friendly\friendly\student.h  27  1   friendly
 Error  21  error C2676: binary '<<' : 'std::ostream' does not define this operator or a conversion to a type acceptable to the predefined operator d:\visual studio 2010\projects\friendly\friendly\student.h  28  1   friendly
 Error  24  error C2676: binary '<<' : 'std::ostream' does not define this operator or a conversion to a type acceptable to the predefined operator d:\visual studio 2010\projects\friendly\friendly\student.h  29  1   friendly
 Error  43  error C3861: 'system': identifier not found d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  19  1   friendly
44  IntelliSense: expected a declaration    d:\visual studio 2010\projects\friendly\friendly\person.h   10  3   friendly
46  IntelliSense: expected an identifier    d:\visual studio 2010\projects\friendly\friendly\student.h  12  1   friendly
47  IntelliSense: identifier "person" is undefined  d:\visual studio 2010\projects\friendly\friendly\friendly2.cpp  11  9   friendly
45  IntelliSense: the global scope has no "set_values"  d:\visual studio 2010\projects\friendly\friendly\person.h   26  16  friendly 
```

我已经尝试过friendly2.cpp中的两个类，但我似乎一直在追逐这个，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:39:29.793

您的代码适用于以下更改：

```
person.h
#pragma once

#include <iostream>
 #include <string>

 using namespace std;

class Person
{
public:
    Person() 
    {
        cout << "Person: no parameters\n";
    }

    Person(string a, string b, string c, string d, string e, string f)
    {
        cout << "Person:" << a << endl;
        cout << "Person:" << b << endl;
        cout << "Person:" << c << endl;
        cout << "Person:" << d << endl;
        cout << "Person:" << e << endl;
        cout << "Person:" << f << endl;
    }

    ~Person()
    {}

    void Person::set_values (string a, string b, string c, string d, string e, string f)
    {
        name = a;
        address = b;
        city = c;
        state = d;
        zip = e;
        phone_number = f;
    }

protected:
    string phone_number;
    string name;
    string address;
    string city;
    string state;
    string zip;
 };

student.h
#pragma once

#include <iostream>
#include <string>
#include "Person.h"

using namespace std;

class Student: Person
{

 private:
string grade;
string course;
string gpa;

 public:
Student()
{
    cout << "Person: no parameters\n";
}

Student(string g, string h, string i)
{
    cout << "Person:" << g << endl;
    cout << "Person:" << h << endl;
    cout << "Person:" << i << endl;
}

~Student()
{}

void setClass_values (string g, string h, string i)
{
    grade=g;
    course=h;
    gpa=i;
}
}; 
```

您的问题是您声明了析构函数而不定义它们。如果您插入声明，编译器将不会自动生成。我还在标题中添加了#pragma once。如果你更喜欢传统的包含保护，你应该使用大写字母的文件名（例如#ifndef PERSON_H ... for Person.h）。对于较大的项目，我建议在每个标题中使用包含防护。

# javascript - 在 javascript 中定义 maskRe

> ID：12163522
> 
> 赞同：1
> 
> 时间：2012-08-28T16:23:47.250
> 
> 标签：javascript, regex, validation, extjs, mask

我想在 javascript 中定义一个 maskRe，它只允许在表单中输入 0.002 - 0.1 的值，有什么想法吗？

詹姆士

最重要的是，我想在 javascript 中创建一个正则表达式，它只允许在表单中输入 0 - 50.00 的值，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:35:29.690

请理解，应该使用 maskRe 过滤掉无效*符号*- 但不能验证输入的*值*`regex`：应该使用属性。

不过，您可以同时使用两者：

```
maskRe: /[0-9.]/,
regex: /^0[.](1|0[1-9][0-9]?|00[2-9])$/ 
```

... 或者 ...

```
regex: /^0[.](1|0[1-9][0-9]*|00[2-9][0-9]*)$/ 
```

...如果您不需要将小数点后的位数限制为三位。

更新：对于 0 - 50.00，它可能是这样的，也许......

```
regex: /^(50(?:[.]0+)?|[1-4]?[0-9](?:[.][0-9]+)?)$/ 
```

# objective-c - 子类化 UIButton 来处理点击

> ID：12163525
> 
> 赞同：20
> 
> 时间：2012-08-28T16:24:00.107
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

我正在尝试对 UIButton 进行子类化以创建一个“更智能”的按钮，其中包含用于处理单击事件的逻辑。

实现这一目标的最佳方法是什么？我只需要覆盖 onClick 方法吗？或者我是否需要注册一个事件处理程序（如果是这样，应该在哪里完成，因为有很多方法可以初始化一个 UIButton？）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-28T20:54:57.887

我认为这个问题有比你提出的更好的解决方案，但要直接回答你的问题： UIButton 的子类观察触摸事件的方式与其他人观察触摸事件的方式相同。

```
// In your UIButton subclass

- (instancetype)initWithFrame:(CGRect)frame {
    self = [super buttonWithType:UIButtonTypeCustom];
    if (self) {
        [self addTarget:self action:@selector(didTouchButton) forControlEvents:UIControlEventTouchUpInside];
    }
    return self;
}

- (void)didTouchButton {
    // do whatever you need to do here
} 
```

重要提示：你不能使用`[UIButton buttonWithType:]`来创建你的按钮，你必须使用`init`or `initWithFrame:`。尽管 UIButton 有便捷的初始化器，但`initWithFrame:`它仍然是指定的初始化器。

# x86 - 使用链接寄存器是否可以防止 stackoverflow 攻击？

> ID：12163530
> 
> 赞同：1
> 
> 时间：2012-08-28T16:24:16.537
> 
> 标签：x86, arm, stack-overflow

我已经看到它`ARM`使用链接寄存器，并且想知道它是否无法被用户空间恶意代码写入？

我的意思是您不能进行 stackoverflow 攻击并覆盖堆栈上的返回地址（例如 in `x86`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:27:07.187

我会用一个问题来回答你的问题：

如果函数 A 调用函数 B，函数 B 调用函数 C，那么 C 执行时 B 的返回地址存储在哪里？它不能在链接寄存器中，因为它保存了 C 的返回地址...

* * *

顺便说一句，`LR`可从用户空间写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:39:33.213

链接寄存器使得用用户输入覆盖它有点困难，但绝对不是不可能的。最常见的原因是嵌套函数：如果您正在调用另一个函数，则必须将当前 LR 存储在某个地方，因为它会被调用破坏。它的逻辑位置是堆栈，以及其他保存的寄存器，这就是大多数编译器所做的。因此，缓冲区溢出仍然可以覆盖保存的 LR，并且当保存的值被弹出并用于“返回给调用者”时，可以发生控制转移。

# c# - 使用 BeginReceive 读取 POP3 电子邮件时出现特殊字符错误

> ID：12163531
> 
> 赞同：0
> 
> 时间：2012-08-28T16:24:25.497
> 
> 标签：c#, sockets, pop3, beginreceive

我正在使用`BeginReceive`from`Socket`来接收来自电子邮件的数据。

我创建了一个`StringBuilder`放在 BeginReceive 方法的最后一个位置，在`object state`

它有效，但`StringBuilder`带有奇怪的字符。而不是电子邮件中的基本葡萄牙语名称（**João Gelásio**），它显示**为 Jo=E3o Gel=E1sio**

我不明白问题是出在`StringBuilder`配置上，还是在阅读带有`BeginReceive`.

谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:28:21.450

> 它有效，但 StringBuilder 带有奇怪的字符。而不是电子邮件中的基本葡萄牙语名称 (João Gelásio)，而是显示 Jo=E3o Gel=E1sio

看起来这只是文本被[引用的可打印](http://en.wikipedia.org/wiki/Quoted-printable)编码的问题。应该有标题指定这一点。

请注意，这与您使用的是异步 API 还是同步 API 无关。

理想情况下，使用专用邮件 API 来处理 POP3，而不是编写自己的低级处理程序。它应该为您涵盖所有这些。

# php - PHP usort 对数组重新排序，排序值对所有人都是相同的

> ID：12163532
> 
> 赞同：7
> 
> 时间：2012-08-28T16:24:25.440
> 
> 标签：php, sorting, usort

我正在使用 usort 对每个元素内具有关联数组的数组进行排序。

当我在数组中排序的所有值都相同时，它仍然会改变数组中元素的位置，有没有办法防止这种情况发生？

例如这个：

```
array(
    array('name' => 'Ben', 'authn_weight' => 85.3),
    array('name' => 'Josh', 'authn_weight' => 85.3),
    array('name' => 'Fred', 'authn_weight' => 85.3)
); 
```

可以改成这样：

```
array(
    array('name' => 'Josh', 'authn_weight' => 85.3),
    array('name' => 'Ben', 'authn_weight' => 85.3),
    array('name' => 'Fred', 'authn_weight' => 85.3)
); 
```

这是排序功能：

```
private function weightSortImplementation($a, $b){ 
    $aWeight = $a['autn_weight'];
    $bWeight = $b['autn_weight'];

    if ($aWeight == $bWeight) {
        return 0;
    }
    return ($aWeight < $bWeight) ? 1 : -1;
} 
```

我已经检查过该`weightSortImplementation`函数始终返回 0 表明它们是相同的。那么为什么这仍在重新排序数组呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T16:52:57.593

啊哈，[施瓦茨变换](http://en.wikipedia.org/wiki/Schwartzian_transform)的一个案例。

它基本上包括三个步骤：

1.  装饰; 您将每个值转换为一个数组，其中值作为第一个元素，键/索引作为第二个元素
2.  排序（正常）
3.  不装饰；你倒转第 1 步

在这里（我已经根据您的特定用例对其进行了调整）：

```
function decorate(&$v, $k)
{
    $v['authn_weight'] = array($v['authn_weight'], $k);
}

function undecorate(&$v, $k)
{
    $v['authn_weight'] = $v['authn_weight'][0];
}

array_walk($a, 'decorate');
usort($a, 'weightSortImplementation');
array_walk($a, 'undecorate'); 
```

诀窍在于以下断言：

```
array($x, 0) < array($x, 1) 
```

这就是保持数组正确顺序的原因。而且，不需要递归:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T16:25:21.590

[从文档中](http://php.net/usort)：

> 如果两个成员比较相等，则它们在排序数组中的相对顺序是未定义的。

您可以使用此函数[[source]](http://php.net/manual/en/function.usort.php#38827)在两个元素相等的情况下保持顺序：

```
function mergesort(&$array, $cmp_function = 'strcmp') {
    // Arrays of size < 2 require no action.
    if (count($array) < 2) return;
    // Split the array in half
    $halfway = count($array) / 2;
    $array1 = array_slice($array, 0, $halfway);
    $array2 = array_slice($array, $halfway);
    // Recurse to sort the two halves
    mergesort($array1, $cmp_function);
    mergesort($array2, $cmp_function);
    // If all of $array1 is <= all of $array2, just append them.
    if (call_user_func($cmp_function, end($array1), $array2[0]) < 1) {
        $array = array_merge($array1, $array2);
        return;
    }
    // Merge the two sorted arrays into a single sorted array
    $array = array();
    $ptr1 = $ptr2 = 0;
    while ($ptr1 < count($array1) && $ptr2 < count($array2)) {
        if (call_user_func($cmp_function, $array1[$ptr1], $array2[$ptr2]) < 1) {
            $array[] = $array1[$ptr1++];
        }
        else {
            $array[] = $array2[$ptr2++];
        }
    }
    // Merge the remainder
    while ($ptr1 < count($array1)) $array[] = $array1[$ptr1++];
    while ($ptr2 < count($array2)) $array[] = $array2[$ptr2++];
    return;
} 
```

# ruby-on-rails - Ruby on Rails ActiveRecord：has_many 和 sum

> ID：12163533
> 
> 赞同：0
> 
> 时间：2012-08-28T16:24:37.183
> 
> 标签：ruby-on-rails, activerecord

我的`entry`模型有很多计数器：

```
class Entry < ActiveRecord::Base
  has_many :counters
end 
```

每个`counter`都有一个`number`，`total`代表 的总和`numbers`：

```
class Counter < ActiveRecord::Base
  scope :total, sum(:number)
end 
```

我需要获取属于特定条目的所有计数器的总和。

在 SQL 中它将是：

```
SELECT SUM(`number`) AS `total` FROM `counters` WHERE `entry_id` = entry.id 
```

我试过：

```
entry.counters.total 
```

但它返回：

> NoMethodError：未定义的方法`default_scoped？为 0:Fixnum

是否有任何“Rails 方式”可以很好地使用 ActiveRecord 关联和范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:31:34.567

在您的示例中，调用会立即`sum`发生，即您的代码相当于

```
scope :total, 0 
```

（假设在您的班级为 0 时总和为 0），这是无效的

从根本上说，范围是关于确定结果集的范围：添加条件、顺序、限制或诸如连接之类的选项，但结果是一个活动记录对象的集合。

您想要做的最好表示为类方法：

```
def self.total
  sum(:number)
end 
```

例如，您仍然可以将其链接到范围

```
some_entry.counters.total 
```

# ios - 添加日期选择器作为子视图

> ID：12163536
> 
> 赞同：0
> 
> 时间：2012-08-28T16:24:44.823
> 
> 标签：ios, datepicker, subview

我正在尝试将日期选择器添加到我的 iPad 应用程序中。如何将其添加为子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:28:19.297

这是我使用的

```
UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 40, 0, 0)];
// ... populate your date picker and format it as you see fit.
[self.view addSubview:datePicker]; 
```

# jquery - 在从网络摄像头捕获的网页中显示图片

> ID：12163537
> 
> 赞同：0
> 
> 时间：2012-08-28T16:24:45.957
> 
> 标签：jquery, plugins, webcam

我正在使用[jquery-webcam-plugin](http://www.xarg.org/project/jquery-webcam-plugin/)（不熟悉 jQuery）。我想在网络摄像头中拍照并希望立即在同一网页中显示该照片，可能会用从网络摄像头捕获的图像替换一些默认图像，而无需任何服务器通信，这可能吗？如果可能，请建议。

如果从网络摄像头捕获的图像保存在本地，我可以使用该图像路径吗？

我正在使用以下代码（以及相关的 API/插件）：

```
<html>
<script src="jquery.min.js" type="text/javascript"></script>
<script src="jquery.webcam.js" type="text/javascript"></script>
<script type="text/javascript">

// this is the interface to webcam, registers webcam
function showWebcam(){ 
$("#camera").webcam({
        width: 320,
        height: 240,
        mode: "callback",
        swffile: "jscam_canvas_only.swf",

        quality: 85,

    onCapture:  function () {
    },
    onTick:     function () {},
    onSave:     function () {},
    onLoad:     function () {},

        debug: function(type, string) {
            $('#wcStatus').append(type + ": " + string + '<br /><br />');
        }      
    }); 
}

// **** THIS IS THE FUNCTION I NEED HELP I THINK ****

//this function captures image from webcam
function capture_image(){ 
    var p = webcam.capture();
    //webcam.save();           
    alert("capture complete "+p); //getting true here

    void(0);

    var canvas = document.getElementById('canvas');
    var context = canvas.getContext("2d");
    var img = canvas.toDataURL("image/png");
    var item_image = img.replace(/^data:image\/(png|jpg);base64,/, "") ;
    //alert(item_image);

//LINE BELOW DOESN'T WORK, I want to replace default image by image of a <img> tag
//captured by WC
    document.getElementById('myImg').src=img;//<img tag>
    document.getElementById('myImg').src=item_image;
//  NOW WHAT TO DO HERE PLEASE SUGGEST
}
 </script>
 </head>

//FOLLOWING IS THE HTML SNIPPET

 <body>
    <div id="camera"></div>    
    <div id="camList"></div>
    <div id="wcStatus"></div>    
    <button onclick="showWebcam();">Use Webcam Instead</button>    
    <button onclick="javascript:capture_image();">Take a picture!</button>
    <div id="capture_images"><input id="capture_image" type="hidden" value="" name="capture[image]"></div>
    // some default image, which will be replaced by image captured by webcam
        <img id="myImg" src="face.png" border=1> 
        <p><canvas id="canvas" width="320" height="240"></canvas></p>
        </body>
        </html> 
```

任何建议表示赞赏。如果我做错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:30:54.077

源代码解释了它是如何工作的。照片不存储在文件系统中，而是存储为 base64 编码的 Javascript 变量。

# multithreading - 如果主线程拥有一个临界区，如果它也在主线程上，一个试图获取临界区的函数会阻塞吗？

> ID：12163538
> 
> 赞同：2
> 
> 时间：2012-08-28T16:24:59.153
> 
> 标签：multithreading, delphi

我对正在分析的多线程应用程序有点迷茫。我认为我试图理解的函数在主线程中起作用。确保我在其中放置了进入和退出临界区代码。同样的临界区也用于程序启动（进入临界区）和终止（离开临界区）。

如我错了请纠正我。如果我的函数在主线程中起作用，则应允许进入临界区。但事实并非如此 - 我的功能只是在进入关键部分时停止。根据我的理解，这个函数在另一个线程中起作用。

我的方法对于理解哪个函数在哪个线程中起作用是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:28:17.633

只需使用调试器。在应用程序的启动代码或应用程序的任何消息处理程序中设置断点，并在调试器线程窗口中检查当前线程 ID。然后在相关函数中设置断点，并在执行到达该函数时检查线程 ID。如果它们不匹配，则不会在运行 UI 消息的同一线程上调用该函数。

当您在调试器中停止您的函数时，您可以查看调用堆栈窗口以查看导致您的函数调用的调用序列。这可以让您深入了解您是如何到达那里的，以及您是如何在不同的线程上到达那里的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:51:44.177

我相信您以错误的方式使用关键部分。想象一下，您有一个可能在主线程和其他线程中修改的变量。每次要访问此变量时，首先要访问`Acquire`临界区；像这样：

```
if MyCriticalSection.TryEnter then  // MyVariable is accessible
begin
  MyVariable := MyVariable + 1;
  MyCriticalSection.Release;
end
else begin
  // do something useful and try again in a few milliseconds.
end; 
```

请记住，当您调用 时`Acquire`，调用线程将被冻结，直到临界区可用。因此，如果您`Acquire`在应用程序的开头调用，第二次调用它会冻结您的主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T10:50:52.970

您不能将其锁定在主线程中。始终在线程中使用临界区。将 cs:TRTLCriticalSection 声明为全局变量。调用任何线程。在不在主线程中或不在线程中的创建构造函数中的执行过程中锁定和解锁 cs。

您也无法读取主线程内的 cnt 变量。但是 Synchronize 方法更新 mainCnt 变量以在主线程中读取它

```
var //global
  cs :TRTLCriticalSection;
  cnt:integer;  //use it only inside thread
  mainCnt:integer; //same value for cnt. use it inside a main thread.

///formcreate..
begin
  InitializeCriticalSection(cs);

///formdestroy
  DeleteCriticalSection(cs);

type
  TThrInc = class(TThread)
  private
    fAnyParam:Integer;
  protected
    procedure Execute; override;
  public
    constructor Create(anyparam:integer);
  end;

constructor TThrInc.Create(anyparam:integer);
begin
  fAnyParam:=AnyParam;  //you dont need this
end;

procedure TThrInc.execute;
var tmpcnt:integer;
begin
  EnterCriticalSection(cs);
  try begin
    inc(cnt);
    tmpcnt:=cnt;
  end except end;
  LeaveCriticalSection(cs);

  Synchronize(
    procedure
    begin
      mainCnt:=tmpcnt;
    end);
end; 
```

# cakephp - 从 cakephp 中的 $this->request->data 中删除 ajax 删除的数据

> ID：12163540
> 
> 赞同：0
> 
> 时间：2012-08-28T16:24:59.373
> 
> 标签：cakephp, cakephp-2.0

我有一个用于费用报销的 edit() 表格。费用报销由大量费用组成。该表格允许您在同一视图中编辑这些费用。每个费用都有一个删除按钮，它使用 ajax 删除记录并从编辑表单中删除行。

ajax 删除功能可以正常工作并从数据库中删除记录。问题是，由于这是一个编辑表单，所有数据都已经在 $this->request->data 中，因此当您保存编辑时，它会重新创建被 ajax 删除的记录。正常编辑工作正常。

有没有办法用表单中的正确数据更新 $this->request->data 中的数据？

我错过了一些明显的东西吗？

我正在使用 cakephp 2.2。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:49:40.753

奇怪的是，删除我的浏览器缓存解决了这个问题....

可能会帮助有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:29:18.727

如果您从 DOM 中删除字段（在成功的 Ajax 删除时），提交表单时它们将不会成为 $this->request->data 的一部分。

# c++ - 调整向量大小编译器错误

> ID：12163543
> 
> 赞同：0
> 
> 时间：2012-08-28T16:25:01.853
> 
> 标签：c++, vector, compiler-errors

我全局定义：

```
vector<player> cUser; 
```

播放器结构如下：

```
struct player
{
char buffer[256];
string username;
string password;
string version;
int playerID;
int X;
int Y;
int direction;
string chats[5];
unsigned long robotID[3];
int gender;
int securityLevel;
float rep;
int isMember;
int inBattle;
int isFollowed;
int playerLocked;
string currentMap;
string lastHavenMap;
int mapHeight;
int mapWidth;
unsigned long money;
unsigned long points;
int wins;
int losses;
string oldIP;
string newIP;
unsigned long lastOnline;
int layer;
int rank;
int kicked;
void logout();
void refresh();
//other
void startLoops();
int execLoops;
//for the robots
Robots Robot[3];
int robotOut;
int totalRobots;
void addExp(int, int);
void subExp(int, int);
int calcRobotExp(int);
//battles
player *enemyBattleUser;//enemy is a player
npc enemyBattleNpc;//enemy is an npc or boss
Robots rogueRobot;//enemy is a rogue robot
string mainBattleUser;
int battleChoice;//which choice of the battleChoiceType
int battleChoiceType;//0 attack, 1 team, 2 flee
int battleSAD;//short for battleSceneAlgorythmsDone
int battleType;//0-rogue, 1=npc, 2-boss 3-player
int subHealth(int, int, int);
void addHealth(int, int, int);
void battleStart(string, int, int);
void battleEnd(int);
void getMove();
void userTurn(int&, int&, int&, string&, string&, int&);
void enemyTurn(int&, int&, int&, string&, string&, int&);
void extraDamage(int&, string&, string&, int);
void battleScene();
//sockets
int sockID;//main socket id
int cSockID;//chat socket id
void userSockError();
//roam
int rogueBattleCalc();
void warp(string, int, int);
int checkNpcBattle();
void sendInitData();
void roamWorld();
int playerWalk(int);
//chatting
void chatLoop();
void executeCommand(string);
int lastMessageSeen[5];
string chatName[5];
int chatsOpen;
//threads
boost::thread mainThread;
boost::thread chatThread;
}; 
```

然后，当我尝试使用以下任何方法调整它的大小时，它给了我一个非常大的错误，我相信它告诉我创建一个构造函数/析构函数，当我这样做时仍然给我同样的错误。

```
cUser.resize(cUser.size()+1);

player tempUser;
//members of tempUser set here
cUser.push_back(tempUser);

cUser.erase(index); 
```

但是当我以同样的方式调整这个结构的大小时，它工作正常并且它仍然没有构造函数/析构函数，并且它以同样的方式在 cUser 旁边定义。

```
struct chatbox
{
       //chatbox structure
       string name;
       int locked;//0 no, 1 yes
       int staffOnly;//0 no, 1 yes
       int mType[5];
       int security[5];
       string username[5];
       string message[5];//the higher the index the newer the message
       int messagesNo;
}; 
```

任何帮助将不胜感激，谢谢。

错误：

```
$ make
g++    -c -o server.o server.cpp
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/i686-pc-cygw
in/bits/c++allocator.h:34:0,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/allocat
or.h:48,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/string:43,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/locale_
classes.h:42,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/ios_bas
e.h:43,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ios:43,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/istream:40,
                 from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/fstream:40,
                 from server.cpp:5:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ext/new_allocator.h: In member fun
ction `void __gnu_cxx::new_allocator<_Tp>::construct(_Tp*, const _Tp&) [with _Tp
 = player, _Tp* = player*]':
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_vector.h:745:6:   instant
iated from `void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _T
p = player, _Alloc = std::allocator<player>, value_type = player]'
server.cpp:373:32:   instantiated from here
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ext/new_allocator.h:105:9: error:
no matching function for call to `player::player(const player&)'
user.hpp:81:1: note: candidates are: player::player()
user.hpp:81:1: note:                 player::player(player&)
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/vector:69:0,

                 from server.cpp:10:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/vector.tcc: In member functio
n `void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterat
or, const _Tp&) [with _Tp = player, _Alloc = std::allocator<player>, std::vector
<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<player*, std::vector<play
er> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = player
*]':
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_vector.h:749:4:   instant
iated from `void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _T
p = player, _Alloc = std::allocator<player>, value_type = player]'
server.cpp:373:32:   instantiated from here
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/vector.tcc:306:19: error: no
matching function for call to `player::player(const player&)'
user.hpp:81:1: note: candidates are: player::player()
user.hpp:81:1: note:                 player::player(player&)
In file included from server.hpp:9:0,
                 from server.cpp:15:
/usr/include/boost/thread/detail/thread.hpp: In member function `player& player:
:operator=(player&)':
user.hpp:81:1:   instantiated from `void std::vector<_Tp, _Alloc>::_M_insert_aux
(std::vector<_Tp, _Alloc>::iterator, const _Tp&) [with _Tp = player, _Alloc = st
d::allocator<player>, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_i
terator<player*, std::vector<player> >, typename std::_Vector_base<_Tp, _Alloc>:
:_Tp_alloc_type::pointer = player*]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_vector.h:749:4:   instant
iated from `void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _T
p = player, _Alloc = std::allocator<player>, value_type = player]'
server.cpp:373:32:   instantiated from here
/usr/include/boost/thread/detail/thread.hpp:114:17: error: `boost::thread& boost
::thread::operator=(boost::thread&)' is private
user.hpp:81:1: error: within this context
/usr/include/boost/thread/detail/thread.hpp:114:17: error: `boost::thread& boost
::thread::operator=(boost::thread&)' is private
user.hpp:81:1: error: within this context
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/vector:69:0,

                 from server.cpp:10:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/vector.tcc: In member functio
n `void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterat
or, const _Tp&) [with _Tp = player, _Alloc = std::allocator<player>, std::vector
<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<player*, std::vector<play
er> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = player
*]':
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/vector.tcc:312:4: note: synth
esized method `player& player::operator=(player&)' first required here
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/vector:63:0,

                 from server.cpp:10:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_construct.h: In function
`void std::_Construct(_T1*, const _T2&) [with _T1 = player, _T2 = player]':
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_uninitialized.h:74:3:   i
nstantiated from `static _ForwardIterator std::__uninitialized_copy<<anonymous>
>::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _I
nputIterator = player*, _ForwardIterator = player*, bool <anonymous> = false]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_uninitialized.h:116:46:
 instantiated from `_ForwardIterator std::uninitialized_copy(_InputIterator, _In
putIterator, _ForwardIterator) [with _InputIterator = player*, _ForwardIterator
= player*]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_uninitialized.h:318:63:
 instantiated from `_ForwardIterator std::__uninitialized_copy_a(_InputIterator,
 _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator =
player*, _ForwardIterator = player*, _Tp = player]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_uninitialized.h:328:24:
 instantiated from `_ForwardIterator std::__uninitialized_move_a(_InputIterator,
 _InputIterator, _ForwardIterator, _Allocator&) [with _InputIterator = player*,
_ForwardIterator = player*, _Allocator = std::allocator<player>]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/vector.tcc:338:8:   instantia
ted from `void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>:
:iterator, const _Tp&) [with _Tp = player, _Alloc = std::allocator<player>, std:
:vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<player*, std::vect
or<player> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer =
 player*]'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_vector.h:749:4:   instant
iated from `void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _T
p = player, _Alloc = std::allocator<player>, value_type = player]'
server.cpp:373:32:   instantiated from here
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_construct.h:80:7: error:
no matching function for call to `player::player(const player&)'
user.hpp:81:1: note: candidates are: player::player()
user.hpp:81:1: note:                 player::player(player&)
<builtin>: recipe for target `server.o' failed
make: *** [server.o] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:33:00.457

一个可能的问题是您的`player`类有`boost::thread`数据成员，而这些成员是不可复制或可分配的。由于`vector::resize()`可能需要复制和/或分配，因此编译失败。

# python - python解压小端

> ID：12163549
> 
> 赞同：8
> 
> 时间：2012-08-28T16:25:16.213
> 
> 标签：python

我正在尝试使用 Python 读取二进制文件。该文件处于 LSB 模式。我导入结构模块并像这样使用解包：

```
f=open(sys.argv[1],'rb')
contents= unpack('<I',f.read(4))[0]
print contents
f.close() 
```

文件中的数据在LSB模式下为0XC0000500，实际值为0X000500C0。所以你可以看到 LSB 模式的最小尺寸是每字节。

但是，我使用的是 Mac 机器，可能是因为我的 gcc 或机器的版本（我不确定。我刚刚阅读了有关 sizeof 和 sys.html的[http://docs.python.org/library/struct.html](http://docs.python.org/library/struct.html) 。 bitorder)，上面代码的结果是X0500C000，所以LSB模式的大小是2Bytes。

我应该如何解决这个问题？

无论这个问题是否得到回答，我都会继续挖掘，如果我得到任何东西，我会更新。

ps：数据文件是32位机器的ELF文件。

pps：由于我要读取大量数据，而且这是读取中普遍存在的问题，所以手动方式对我来说不是最好的。问题仍然有待解答。

ppps: < 表示“小端，**标准大小（16 位）** ” 现在我读到这个......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:34:22.210

> 如果实际值为 OXABCD，则文件存储 DCBA。

通常字节顺序定义字节顺序，而不是字节内的各个位。 `"\xDC\xBA"`是两个字节（16 位）。如果交换字节；所有可能的结果是：

```
>>> "0X%04X" % struct.unpack("<H", binascii.unhexlify("DCBA"))
'0XBADC'
>>> "0X%04X" % struct.unpack(">H", binascii.unhexlify("DCBA"))
'0XDCBA' 
```

以下是`0xabcd`little/big-endian 格式的外观：

```
>>> struct.pack('<H', 0xabcd)
'\xcd\xab'
>>> struct.pack('>H', 0xabcd)
'\xab\xcd' 
```

要从中获取`0XABCD`，`"\xDC\xBA"`您需要交换*半字节*（4 位）。这似乎不寻常。

> 因为我要读取大量数据

您可以使用[`array`模块](http://docs.python.org/library/array)一次读取多个值。它使用与模块相同的类型格式`struct`。

> < 表示“小端，标准大小（16 位）”

如果您`<>`与`struct`模块一起使用，则标准尺寸是固定的并且独立于任何东西。[标准大小仅取决于格式字符](http://docs.python.org/library/struct.html#byte-order-size-and-alignment)。特别`'<H'`是总是2字节（16位），`'<I'`总是4字节（32位）。只有`@`前缀使用本机尺寸。

### 旧答案

^(把它留在这里让评论有意义)

您可以将其读取为 2 个字节的值并手动转换为 int：

```
>>> hi, lo = struct.unpack("<HH", "\x05\x00\xC0\x00")
>>> n = (hi << 16) | lo
>>> n
327872
>>> "0X%08X" % n
'0X000500C0' 
```

# jquery - 在列表项中使用 jquery 添加 div

> ID：12163556
> 
> 赞同：2
> 
> 时间：2012-08-28T16:26:06.140
> 
> 标签：jquery

我有一个列表项：

```
<li class="sortedli">Call Type</li> 
```

我希望在列表中文本的两侧添加两个 div：

```
<li class="sortedli">
    <div class="sel-display-on">&nbsp;</div>
                Call Type
    <div class="sel-trash-on">&nbsp;</div>
</li> 
```

如何使用 Jquery 添加它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:27:41.207

使用`prepend()`和`append()`;

```
$(".sortedli").prepend("<div class=\"sel-display-on\"></div>");
$(".sortedli").append("<div class=\"sel-trash-on\"></div>"); 
```

[**示例小提琴**](http://jsfiddle.net/HD9B8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:28:00.283

这是未经测试的，但我建议：

```
var li = $('.sortedli').first();
$('<div />', {'class' : 'sel-display-on', 'text' : '&nbsp;'}).prependTo(li);
$('<div />', {'class' : 'sel-trash-on', 'text' : '&nbsp;'}).appendTo(li); 
```

您还可以使用：

```
$('.sortedli').html(
    function(i,h) {
        return '<div class="sel-display-on">&nbsp;</div>' + h + '<div class="sel-trash-on">&nbsp;</div>';
    }); 
```

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   `html()`.
*   [`prependTo()`](http://api.jquery.com/prependTo/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:28:55.073

你可以这样做

```
$("#content ul").append('< li > divs ... < / li >'); 
```

# php - Ajax 表单不适用于 Internet Explorer 8,9

> ID：12163558
> 
> 赞同：0
> 
> 时间：2012-08-28T16:26:17.540
> 
> 标签：php, jquery, ajax, forms

我使用 ajax 编写了一个表单，因此提交后页面不会刷新。在 Chrome 和 Firefox 中它工作得很好，当我使用 Internet Explorer 时出现问题（到目前为止我只检查了 8,9）。在 IE8,9 我无法发送表单，点击提交按钮不会触发任何事件，因为它应该。这是我正在使用的代码，我想澄清一下，由于老板的要求，我已经在同一个文件中编写了 PHP 和 AJAX 代码

```
if($_POST['isRadial']){
    if(($_POST['redialVal']) && ($_POST['waitVal'])&& ($_POST['userId']) ){
        $redial = $_POST['redialVal'] ;
        $wait = $_POST['waitVal'];
        $userId = $_POST['userId'];
        $error_message = "123Could Not Save Settings, Please Try Again.";
        $success_message ="Settings Were Updated Successfully, Will Be Implemented In 10 Minutes";
        $query = mysql_query("....");
        $getAll = mysql_query("...");
        if(mysql_num_rows($getAll)>0){
            $query = mysql_query("...'");
        }
        if(!$query){
            echo $error_message;
            return false;
        }
        else
            echo $success_message;
        //Update pull_tables
        file_put_contents("....);
    }
    else
        echo "</br>An Error Occured.Please Save Settings Again123.</br>";
} 
```

阿贾克斯代码：

```
$(function(){
    $('#submitRedialWait').click(function(){
    var redial = $("#redialSettings").val();
    var wait = $("#waitSettings").val();
    //var userData = $("#ui").text();
    var userData=<?php echo $IDuser; ?>;
    $.ajax({
    url: '' , 
    type: 'POST',
    data: {redialVal: redial , waitVal : wait, userId :userData, isRadial:"yes"},
    success: function(result){     
    // $('#RedialWaitResults').text(result) ;
     alert('settings have been saved.');

    }
    });   
    return false;     
    });
}); 
```

你知道我出现这个问题的原因是什么吗？（现有的IE除外）

任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:10:31.460

当我使用 AjaxForm 处理异步提交的文件时，我发现了 2 件有趣的事情。

首先，要让 ajaxform 跨浏览器（IE 7+、chrome、firefox）工作，你必须确保你使用的是 ajaxform 的提交方法，例如：

```
$('form').ajaxForm({
  success: ...,
  error: ...
}).submit(); 
```

第二件事让我很惊讶。AjaxForm 在任何地方都可以工作，包括 IE 7 和 9，但它不能在 IE 8 上工作。原因是这个，我忘记了 att method=POST。所以，你必须确保你有这样的东西：

```
<form action="/action.php" method="POST">... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T16:49:58.610

使用 ajax 时，ajax 将在后台工作。您必须对 ajax 请求的成功/错误执行您想要的操作，它本身不会做任何事情。

如果您只想在成功后重新加载页面。打电话

`document.location.reload(true);`或任何你想要的...

或者

使用一段时间后显示消息并重新加载窗口`setTimeOut`

```
setTimeout(function(){document.location.reload(true)},3000); 
```

在`alert('settings have been saved.');`你的代码之后。

# excel - 用随机字母填充二维数组

> ID：12163560
> 
> 赞同：0
> 
> 时间：2012-08-28T16:26:42.747
> 
> 标签：excel, vba

我想用随机字母填充 Excel 中的二维数组（比如说 A1:J20）。我如何使用编程（如果可能的话，甚至不用编程）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:31:41.257

返回 a 和 z 之间的随机小写字母的公式为：

```
=CHAR(97+RANDBETWEEN(0,25)) 
```

**这个怎么运作**

该`=char()`公式返回数字代码的字母。

*   请注意，97 用于小写 a，65 用于大写 A。

该`RANDBETWEEN`函数返回一个介于 0 到 25 之间的随机数。我们将从字母 a 开始，然后将这个随机数加到它上面以获得最终结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:54:27.927

在公式中很容易。

首先，将此公式放入某个单元格中：`=CODE("A")`- 你应该看到数字 65。然后，尝试`=CODE("Z")`- 这将显示 90。

您现在有了字母 A 和 Z 的数字代码

您真正想要做的是计算 65 到 90 之间的随机数，然后将这些数字转换回字符。

所以这里是任何单元格的公式，它将获得 65 到 90 之间的随机整数： `=TRUNC(65 + (RAND() * (91 - 65)))`- 请注意我使用的整数算术有一个截断，所以我将 1 添加到上边界......

最后，将结果输入一个函数，`CHAR()`该函数从其 ACSII 代码中返回一个字符：

`=CHAR(TRUNC(65 + (RAND() * (91 - 65))))`

那应该工作...

# php - 以前可以工作的代码现在不工作了

> ID：12163563
> 
> 赞同：0
> 
> 时间：2012-08-28T16:26:46.040
> 
> 标签：php, mysql

基本上几周前我遇到了一些代码[问题，](https://stackoverflow.com/questions/12097991/problems-checking-whether-a-table-exist-or-not-in-the-db)现在我的问题在于当我回到这个项目并尝试使用正在工作的代码但现在它以某种方式不起作用时......甚至当我单独尝试时....我在 Apache 中遇到的错误是

```
"[28-Aug-2012 16:24:45 UTC] PHP Fatal error:  Call to a member function fetchAll() on a non-object in C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\2.php on line 49" 
```

第 49 行是 if 语句

我真的不知道问题出在哪里，因为它以前曾经工作过......谁能给我一个提示，说明我的问题可能是什么？我一定是服务器问题吧？谢谢

```
$results = $db->query('SHOW TABLES LIKE \'pages\'');
if (count($results->fetchAll()) > 0) {
    echo 'table exists';
} else {
    echo "it doesnt";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:29:20.347

你的错误意味着`$results`没有得到一个对象。`$db->query`返回`null`

[我还看到原始问题](https://stackoverflow.com/questions/12097991/problems-checking-whether-a-table-exist-or-not-in-the-db)和您当前代码之间的差异。

```
$db->query('SHOW TABLE LIKE \'page\''); 
```

现在变成了

```
$db->query('SHOW TABLE LIKE \'pages\''); 
```

# oracle-apex - 如何使用 APEX_APPLICATION.G_F01 访问 APEX_ITEM.TEXTAREA 字段

> ID：12163564
> 
> 赞同：3
> 
> 时间：2012-08-28T16:26:47.607
> 
> 标签：oracle-apex

我使用以下查询获得以下表格报告：

```
select id,
       name,
       telephone,
       apex_item.checkbox2(1,id) as "Tick when Contacted",
       apex_item.text(20,my_date) as "Date Contacted",
       apex_item.textarea(30,my_comment,5,80) as "Comment"
from   my_table 
```

此报告显示 10 条记录，其中驱动键是分配给 F01 的复选框。

我的问题是，因为这是一个表格报告，使用 Oracle APEX_APPLICATION.G_F01.COUNT - 我如何访问 textarea 字段的值，其中“my_comment”是报告中的用户可输入值，而不是来自数据库列/表?

从我所见，这似乎是一个顺序问题，如果您输入的记录顺序不正确，那么就会丢失值。

我只勾选了第 1、3 和 5 行的复选框，因此希望返回仅与这些选定行相关的 textarea 字段的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T17:08:48.053

是的，当您的表格形式包含复选框时，它会变得很棘手。在您的示例中， g_f01 将仅包含 3 个值为 1、3、5 的元素，但数组 g_f30 将包含 10 个元素。

通常在使用 apex_item 构建表格形式时，最好也使用 APEX 集合：

1.  使用 my_table 中的相关数据填充页面入口处的 APEX 集合。将 mytable 行的 ID 保存在隐藏项中，例如 apex_item.hidden(2,id)。
2.  编写报告以从集合而不是 my_table 工作，并在复选框项目中使用 seq_id 而不是 ID：`apex_item.checkbox2(1,seq_id)`
3.  提交时，使用 g_fxx 数组更新集合 - 通常使用不止一次。
4.  最后使用集合更新 my_table

因此，在您的示例中，您可能首先更新 APEX 集合，以通过将 c050 设置为“Y”来指示哪些行已被勾选：

```
for i in 1..apex_application.g_f01.count loop
    apex_collection.update_member_attribute('MYCOLL', apex_application.g_f01(i), 
      50, 'Y');
end loop; 
```

然后使用其他更改对其进行更新：

```
for i in 1..apex_application.g_f02.count loop
    apex_collection.update_member_attribute('MYCOLL', apex_application.g_f02(i), 
      20, apex_application.g_f20(i));
    apex_collection.update_member_attribute('MYCOLL', apex_application.g_f02(i), 
      30, apex_application.g_f30(i));
end loop; 
```

最后将相关更改应用到 my_table：

```
for r in (select c002, c020, c030 
          from apex_collection
          where collection_name = 'MYCOLL'
          and c001 = 'Y' -- Checked rows only
         )
loop
    update my_table
    set my_date = r.c020
    ,   my_comment = r.c030
    where id = r.c002;
end loop; 
```

就那么简单...？！

# sql - 如何仅将 multi_query 与 DELETE / UPDATE 一起使用？

> ID：12163565
> 
> 赞同：0
> 
> 时间：2012-08-28T16:26:56.577
> 
> 标签：sql, mysqli, sql-delete, multi-query

当我在 SELECT 中使用 multi_query 时，它看起来像这样：

```
$sql = 'SELECT....';
$sql .= 'SELECT....';
...

if ($db->multi_query($sql))
{ 
    do
    {
        if ($stmt = $db->store_result())
        {
            while ($row = $stmt->fetch_assoc())
            {
                foreach ($row as $key => $value)
                {
                    $var[$key] = $value;
                }
            }
            $stmt->free_result();
        }
    } while ($db->more_results() && $db->next_result());
} 
```

但是当我只需要 DELETE 或 UPDATE 时，它应该是什么样子，因为没有结果？

```
$sql = 'DELETE...';
$sql .= 'DELETE...';
$sql .= 'UPDATE...';

if ($db->multi_query($sql))
{
    do
    {
        /*well.. nothing?*/
    }
    while ($db->more_results() && $db->next_result());
} 
```

似乎工作，即使没有`do {...}`，但没有更好/干净的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:44:55.923

据我记得，您正在以正确的方式执行多个更新。您似乎错过的一件事是检查错误。例如（从[这里](http://php.net/manual/en/mysqli.multi-query.php)），

```
if ($db->multi_query($sql))
{
  do
  {
  // do nothing, just iterate over results to make sure no errors  
  }
  while ($db->next_result());
}
if ($db->errno) {
    //error handling
} 
```

# android - Android 按时间生成敌人

> ID：12163568
> 
> 赞同：-1
> 
> 时间：2012-08-28T16:27:05.207
> 
> 标签：android

我正在开发一款随时间增加等级的游戏。也增加了产生的敌人的数量，但是，我真的不知道在哪里放置更新我的敌人的代码。

我在使用时间作为参考时遇到问题，我创建了一个 Time 类，它存储 beginTime(System.currenttimemillis) 和 timediff(System.currenttimemillis-beginTime)，我在我的线程类中实例化它们，所以它将获得游戏的当前时间状态，但是，当我在我的游戏面板类中特别是在更新方法中使用它时，当比较它存储的值时，即使它有一个值，它也会忽略条件。

```
if(time.getTimeDiff()==3000){
    enemy.update();
} 
```

游戏应该在 3 秒后开始，但是如果我设置条件，即使我设置了 1 个假人也不会出现敌人。

如果有人能清楚地解释我的一切，我会真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:37:50.857

也许你应该试试这个？

```
if (System.currentTimeMillis() - start > 3000)
{
   updateEnemy();
   start = System.currentTimeMillis();
} 
```

**编辑**

如果要增加难度，请将 3000 替换为变量.. 比如：int waitTime = 3000;

然后得到游戏的开始时间。

```
long gameStart = System.currentTimeMillis(); 
```

稍后检查：

```
if (timeEllaspsedSinceStart > howManySecondsTilLevelUp)
{
     waitTime -= howMuchLessYouWantToWait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:59:30.827

这对我有用：

这是我编写的一个用作计时器的类：

```
public class Timer {

    Long startTime;
    int delayTime;

    public Timer() {

    }

    public Timer(int delayTime) {
        this.delayTime = delayTime;

    }

    public void setDelayTime(int delayTime) {
        this.delayTime = delayTime;

    }

    public boolean delay() {
        if(this.startTime == null) {
            this.startTime = System.currentTimeMillis();
        }

        if(startTime + this.delayTime < System.currentTimeMillis()) {
            this.startTime = null;
            return true;
        }
        else {
            return false;
        }

    }

    public void reset() {
        this.startTime = System.currentTimeMillis();

    }

} 
```

现在在您的更新方法中，您可以检查是否应该像这样生成新敌人：

```
Timer spawnEnemyTimer = new Timer(5000); // 5 seconds

public void update() {
if(spawnEnemyTimer.update() == true) {
// spawn new enemy!
// Timer will automatically reset!
}

} 
```

我希望这有帮助！

# mysql - SQL 更新，子查询返回多行

> ID：12163571
> 
> 赞同：1
> 
> 时间：2012-08-28T16:27:28.397
> 
> 标签：mysql, subquery, sql-update

```
Timezones
---------
-AreaCode varchar
-Timezone varchar

Contacts
--------
-Phone    varchar
-Timezone varchar 
```

除了联系人表中的所有内容都已填充`Timezone`，因此我想查找每个电话号码的时区并更新联系人。这是我试图做的，但`MySQL`给了

> 错误 1242 子查询返回多于一行

对于每个时区（0、-1、-2、-3、-4、-5），我执行以下更新：

```
update contacts 
set contacts.timezone = '-1' 
where left(contacts.phone,3) = (Select timezones.areacode 
                                from timezones 
                                where timezones.timezone = '-1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:35:20.367

您的子查询返回不止一行。只需将“=”替换为“IN”即可处理此问题：

```
update contacts 
set contacts.timezone = '-1' 
where left(contacts.phone,3) in (Select timezones.areacode 
                                from timezones 
                                where timezones.timezone = '-1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:33:58.993

在更新或子查询上尝试内部联接：

```
update contacts 
set contacts.timezone = '-1' 
where left(contacts.phone,3) in (Select timezones.areacode 
                                from timezones 
                                where timezones.timezone = '-1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:34:15.777

更改 where 部分，例如： ....

```
where left(...) in (select ...... ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:34:46.357

问题是时区中可能有超过 1 行具有 t`imezone column = '-1'`

你可以在`Join`这里使用

```
update contacts join timezones on left(contacts.phone,3) = timezones.areacode and timezones.timezone = '-1'
set contacts.timezone = '-1'; 
```

它将区号与电话匹配，在这种情况下将更新为`'-1'`

# excel - 为什么在缩小其他工作平均函数的范围时会出现 #n/a 错误？

> ID：12163577
> 
> 赞同：0
> 
> 时间：2012-08-28T16:27:53.270
> 
> 标签：excel, excel-formula

我的电子表格中有一个运行良好的平均函数： `=AVERAGE( IF('Sheet2'!$2:$2="Tuesday", IF('Sheet2'!7:7<>"", 'Sheet2'!7:7)))`

我不想在平均计算中使用所有第 7 行，而是只想在一个小范围内工作，所以我将公式更改为： `=AVERAGE( IF('Sheet2'!$2:$2="Tuesday", IF('Sheet2'!B7:Y7<>"", 'Sheet2'!B7:Y7)))`

当我进行此更改时，我的公式返回 #n/a 错误。范围内没有#n/a `'Sheet2'!B7:Y7`。

什么会导致这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:39:35.637

试试这个：`=AVERAGE( IF('Sheet2'!$B2:$Y2="Tuesday", IF('Sheet2'!$B$7:$Y$7<>"", 'Sheet2'!$B$7:$Y$7)))`

由于这是一个数组公式，请确保在键入后按 Ctrl+Shift+Enter。

当数组的大小对应时，Excel 最适合使用数组公式。您的原始公式在每个部分都使用整行，因此如果您只想使用某个部分，请编辑整个公式，使其在数组公式的每个阶段使用相同数量的单元格。

可以这样想，它正在做的是跨行 2 运行 IF 测试。作为参数，我们假设有 30 列，所以它运行 30 个测试。对于这些测试中的每一个，它都会运行 sub-if 测试并最终返回 30 个值，这些值被发送到平均函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:39:20.543

我建议您将该 IF 语句的组件分解为单独的单元格，并查看它们如何评估为 True 或 False。

我认为您是声明中的问题`IF('Sheet2'!$2:$2="Tuesday", ...)`- 据我所知，'Sheet2'!$2:$2 定义了一行单元格，而不是一个可能等于“星期二”的值。

尝试`='Sheet2'!$A$2="Tuesday"`作为您的第一个测试，单独在一个单元格中进行。如果单元格 Sheet2!A2 确实是“星期二”，则此公式的计算结果为 True。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T18:30:12.590

如果您使用的是`Excel 2007`或更高版本，则有一个内置的单一功能`AVERAGEIF`。这对你来说可能更容易，它不需要`CTRL+SHIFT+ENTER`，也不需要检查空格的范围（`AVERAGEIF`无论如何都会忽略这些），所以你可以使用这个公式

`=AVERAGEIF(Sheet2!$B2:$Y2,"Tuesday",Sheet2!$B7:$Y7)`

# android - Nexus S 上的共享首选项保存在哪里？

> ID：12163582
> 
> 赞同：-1
> 
> 时间：2012-08-28T16:28:14.893
> 
> 标签：android, sharedpreferences

> **可能重复：**
> [SharedPreferences 文件](https://stackoverflow.com/questions/2566430/sharedpreferences-file)

Nexus S 上保存的共享首选项在哪里？我有一个创建和使用共享首选项的应用程序，并且需要从应用程序外部访问首选项 - 就像使用文件资源管理器一样。在您回答某个 xml 文件的位置之前，我列出了我设备上的每个 xml 文件，并且没有任何名为首选项的文件或任何看起来可能是首选项文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:33:48.147

如果设备已植根，则您只能在应用程序外部访问 SharedPreferences。它们位于：

```
/data/data/#packageName#/shared_prefs/#filename#.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:30:34.607

除非您的手机已植根，否则您无法获得特定应用程序的共享首选项。

如果它是植根的，你可以在

```
/data/data/[yourpackagename]/ 
```

# java - Spring NamedParameterJDBCTemplate 复用 Prepared Statements

> ID：12163591
> 
> 赞同：8
> 
> 时间：2012-08-28T16:28:48.417
> 
> 标签：java, spring, jdbc, jdbctemplate, spring-jdbc

我正在使用 Spring NamedParameterJdbcTemplate 从表中获取一些值。出于某种原因，与在 SQL Management Studio 上运行相同的查询相比，该查询在我的 Java 应用程序中运行速度非常慢。我还在分析器中注意到，准备好的语句不会被重用。如果我在我的 JAVA 应用程序中多次运行相同的查询，我会看到正在执行不同的准备好的语句。所以，不确定为什么这些语句没有被重用。性能是否因为我在查询中使用 IN 子句而变慢？

这是我的示例 java 代码

```
StringBuilder vQuery = new StringBuilder();
vQuery.append(" SELECT SUM(Qty) FROM vDemand");
vQuery.append(" WHERE ProductID = :ProductID");
vQuery.append(" AND [Date] >= :StartDate AND [Date] <= :EndDate");
vQuery.append(" AND CustomerID IN ( :CustomerID )");

MapSqlParameterSource vNamedParameters = new MapSqlParameterSource();
vNamedParameters.addValue("ProductID", aProductID);
vNamedParameters.addValue("CustomerID", aCustomerlIDs);
vNamedParameters.addValue("StartDate", aDate, Types.TIMESTAMP);
vNamedParameters.addValue("EndDate", aDate, Types.TIMESTAMP);

int vTotalQuantity = this.getNamedParameterJdbcTemplate().queryForInt(vQuery.toString(), vNamedParameters);
return vTotalQuantity; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T17:06:26.747

查看 Spring 的源代码`NamedParameterJdbcTemplate`，它将您的 SQL 解析为一个结构`ParsedSql`，然后用问号替换您的命名参数，然后构建`PreparedStatement`并用您的参数填充它。

它缓存`ParsedSql`条目，但总是构建新的`PreparedStatements`，因此最终这些条目不会在 JDBC 驱动程序级别重用。

A`PreparedStatement`与常规相比有两个优点`Statement`：

1.  您可以使用方法向 SQL 中添加参数，而不是在 SQL 查询本身中进行。这样可以避免 SQL 注入攻击，还可以让驱动程序为您进行类型转换。

2.  如您所说，`PreparedStatement`可以使用不同的参数调用相同的内容，并且数据库引擎可以重用查询执行计划。

似乎这`NamedParameterJdbcTemplate`可以帮助您获得第一个优势，但对后者没有任何帮助。

# c# - DIV C#中的asp.net文本框ID

> ID：12163595
> 
> 赞同：0
> 
> 时间：2012-08-28T16:28:59.073
> 
> 标签：c#, asp.net, html, textbox

我有 2 个带有 ID="situps" 和 ID="pushups" 的文本框它们在 Div 中的原因是因为我需要它们仅在平板电脑上使用时才使用数字键盘。我想知道是否有办法在 c# 中检索该 ID。这是文本框的代码：

```
<div style="display:none">
    <asp:TextBox ID="situps" runat="server" Height="16px"   
    ontextchanged="TextBox1_TextChanged" Width="108px"></asp:TextBox>
</div>
<input onblur="document.getElementById('<%=Sits.ClientID %>').value = this.value" type="tel" style="width: 86px" />

<div style="display:none">
        <asp:TextBox ID="pushups" runat="server" Height="16px" 
        ontextchanged="TextBox1_TextChanged" Width="108px"></asp:TextBox>
</div> 
<br />
    Push-ups <input onblur="document.getElementById('<%=Push.ClientID %>').value = 
    this.value" type="tel" style="width: 86px" />
<br /> 
```

我已经弄清楚如何在表单视图中检索标签，但无法弄清楚如何从表单视图之外的 texbox 获取 DIV ID。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:36:14.220

我想我犯了一个简单的错误。我一定有重复的名字仰卧起坐和俯卧撑。我现在可以抢到身份证了！！

# android - 如何将 Android-ViewPagerIndicator 库添加到 maven 项目

> ID：12163600
> 
> 赞同：0
> 
> 时间：2012-08-28T16:29:12.253
> 
> 标签：android, eclipse, maven, project, android-viewpager

我下载了库[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)，导入到 eclipse(Spring tools) ，我在 pom.xml 中添加到我的项目中：

```
<dependency>
      <groupId>com.viewpagerindicator</groupId>
      <artifactId>library</artifactId>
      <version>2.3.1</version>
      <type>apklib</type>
    </dependency> 
```

当我不想在我的项目中导入时，她给我错误：无法解析导入 com.viewpagerindicator。对 maven 的依赖不会出现 viewpageridicator 库！谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:19:00.870

在 ADT Eclipse 中支持 apklib 依赖项是 m2e-android 项目正在进行的工作的一部分，尚未完成。请对此问题发表评论以保持更新：

[https://github.com/rgladwell/m2e-android/issues/8](https://github.com/rgladwell/m2e-android/issues/8)

# java - 运行脚本时如何将信息发送到 RFT 播放窗口？

> ID：12163601
> 
> 赞同：1
> 
> 时间：2012-08-28T16:29:14.837
> 
> 标签：java, automated-tests, rft

当 Rational Functional Tester 运行脚本时，它会显示当前脚本名称、行号和方法。

![Rational Functional Tester 回放窗口](../Images/87571bea7cdbef78b1ad1c0ec923b3f6.png)

当我运行自己的代码或外部工具时，行号和方法名称保持为空。

如何将这些信息发送到播放窗口？我有一些耗时的工作（检查 PDF、数据库 I/O、通过网络传输文件）并且想在每个小工作开始时更新状态（方法名称），以确保事情正在进行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:41:59.870

您可以使用以下代码：

```
 IPlaybackMonitor pbMonitor = (IPlaybackMonitor)ServiceBroker.getServiceBroker().findService(IPlaybackMonitor.class.getName());
    if ( pbMonitor != null )
        pbMonitor.setDescription(IPlaybackMonitor.RUNNING, "MyTestCode"); 
```

# jquery - 播放框架和 javascript i18n

> ID：12163602
> 
> 赞同：2
> 
> 时间：2012-08-28T16:29:16.743
> 
> 标签：jquery, internationalization, playframework-2.0

我正在使用 twitter bootstrap 和带有 Jquery UI 的 jquery 获取 javascript 本地化以运行我的 play 2.0 应用程序。我针对的本地化需要验证插件、日期选择器等的消息。

AFAIK 这需要我包含一个带有本地化消息的 javascript 文件，用于验证和设置 datepicker.regional['XX']。所以我需要获取播放应用程序提供的当前选择的语言环境（使用 application.langs 属性在 application.conf 文件中配置），并在我的模板中使用它来包含正确的本地化文件，如下所示：

```
<script src="@routes.Assets.at("javascripts/i18n/messages_<locale>.js")"></script> 
```

这是最好/唯一的解决方案吗？如何从播放框架中获取当前选择的语言环境？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:49:15.440

我问了控制器，因为 Java 通过`lang`了，而 Scala 没有，无论如何，你的解决方案是：

```
<script 
src='@routes.Assets.at("javascripts/i18n/messages_" + lang().code + ".js")'></script> 
```

# php - 如何用感叹号写isset

> ID：12163605
> 
> 赞同：-3
> 
> 时间：2012-08-28T16:29:21.250
> 
> 标签：php

我只需要澄清一下。

我在下面有这段代码：

```
if ((!$username) && (!$userid)) 
```

但我想在此代码中包含一个 isset。正确的输入方式如下：

```
if ((!isset($username)) && (!isset($userid))) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:33:11.377

如果你想真正花哨，isset() 可以接受多个参数，如果所有参数都设置了，则返回 true。所以，你可以做

```
if (!isset($username,$userid)) 
```

编辑：这不完全是你要求的。*如果 $username或*$userid 未设置，则 if 块中的代码将被执行。在原始帖子中，您希望在未设置 $username 和 $userid 时执行*if*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:35:13.203

实际上，如果您有表达式`!$x`并且还希望添加`!isset($x)`，则使用 可能会更好`empty`：

```
if (empty($username) && empty($userid)) {
    // both $username and $userid are either non-existent or "empty"
    // "empty" is defined as: evaluates to false (see manual page)
} 
```

它还简化了条件，没有使用否定:)

也可以看看：[`empty()`](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:31:15.027

您的第二段代码将起作用。但这也将是：

```
if( !isset($username) && !isset($userid) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:31:41.037

是的，这很好，应该可以工作。

# optimization - 为什么 INC 和 ADD 1 有不同的表现？

> ID：12163610
> 
> 赞同：12
> 
> 时间：2012-08-28T16:29:36.183
> 
> 标签：optimization, assembly, x86, hardware, cpu-architecture

多年来我读过很多次你应该做 XOR ax, ax 因为它更快......或者在 C 编程时使用 counter++ 或 counter+=1 因为它们会 INC 或 ADD ......或者在 Netburst Pentium 4 INC 比 ADD 1 慢，因此必须警告编译器您的目标是 Netburst，因此它将所有 var++ 转换为 ADD 1 ...

我的问题是：为什么 INC 和 ADD 有不同的表现？例如，为什么声称 INC 在 Netburst 上速度较慢，而在其他处理器中却比 ADD 快？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T16:43:17.197

对于 x86 架构，INC 更新条件代码的子集，而 ADD 更新整个条件代码集。（其他架构有不同的规则，所以这个讨论可能适用也可能不适用）。

因此，INC 指令必须等待更新条件代码位的其他先前指令完成，然后才能修改该先前值以产生其最终条件代码结果。

ADD 可以产生最终的条件码位，而不考虑之前的条件码值，因此它不需要等待之前的指令完成计算*它们*的条件码值。

结果：您可以与许多其他指令并行执行 ADD，并与更少的其他指令并行执行 INC。因此，ADD 在实践中似乎更快。

（我相信在全宽寄存器（例如，EAX）的上下文中使用 8 位寄存器（例如，AL）存在类似的问题，因为 AL 更新需要先完成先前的 EAX 更新）。

我不再在我的高性能汇编代码中使用 INC 或 DEC。如果您对执行时间不是特别敏感，那么 INC 或 DEC 就可以了，并且可以减少指令流的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T16:36:42.887

问题是，我收集`XOR ax, ax`了几年过时的数据，现在分配零胜过它（有人告诉我）。

C 位大约`counter++`而不是`counter+=1`已经过时了几十年。确实。

第一个使用汇编的简单原因是，所有指令都将被转换为 CPU 的某种操作，虽然设计人员总是试图让一切尽可能快，但他们会做得更好与一些人一起工作而不是与其他人一起工作。不难想象 INC 怎么能更快，因为它只需要处理一个寄存器，尽管这太简单了（但我对这些东西不太了解，所以我只能做的就是过度简化）部分）。

但是，C 是很久以前的废话。如果我们有一个 INC 优于 ADD 的特定 CPU，那么编译器设计者究竟为什么不使用 INC 而不是 ADD，对于`counter++`和`counter+=1`？编译器做了很多优化，而这种变化远非最复杂的。

# ruby-on-rails-3 - 在 Tire::Model::Persistence 上实例化一个对象

> ID：12163611
> 
> 赞同：0
> 
> 时间：2012-08-28T16:29:48.993
> 
> 标签：ruby-on-rails-3, tire

我有一个非常简单的 rails3 应用程序，我正在尝试学习如何使用 Tire::Model::Persistence 将 Elasticsearch 用作数据存储，但我在搜索时遇到问题（你知道，搜索）

这是我的模型：

```
class Post
  include Tire::Model::Persistence

  property :name
  property :published_on
end 
```

这是我的路线：

```
Beta2::Application.routes.draw do
   root :to => 'posts#index'

  resources :posts
end 
```

这是我的控制器：

```
class ContestsController < ApplicationController

  def index
    if params[:q].present?
      #@posts = Post.search(params[:q], load: true)
      @posts = Post.all
    else
      @posts = Post.all
    end

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end

  end
...show, edit, destroy...
end 
```

我的 index.html.erb：

```
<h1>Listing posts</h1>

<%= form_tag posts_path, method: :get do %>
  <%= label_tag :query %>
  <%= text_field_tag :q, params[:q] %>
  <%= submit_tag :search, name: nil %>
<% end %>

<hr>

<table>
  <tr>
    <th>Name</th>
    <th>Published on</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= spot.name %></td>
    <td><%= post.published_on %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_contest_path(post) %></td>
    <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>
<br />

<%= link_to 'New Post', new_post_path %>
<%= link_to 'Back', posts_path if params[:q] %> 
```

有了上面，只查看不带参数的 index 方法，渲染就好了。我已经注释掉了 if params[:q] 这样我就可以像正常旅行一样返回所有帖子

```
http://localhost:3000/ 
```

但是，一旦我点击该搜索按钮，我就会收到此错误消息：路由错误

没有路线匹配 {:action=>"show", :controller=>"posts"}

如果我将视图中的行删除到 <%= link_to ... %> 然后视图会呈现所有帖子的名称和发布文本。

如果我在控制器中更改：

```
#@posts = Post.search(params[:q], load: true) 
```

回到

```
@posts = Post.search(params[:q], load: true) 
```

并删除 Post.all

然后在模板中我收到以下错误：

```
undefined method `detect' for #<Post:0x00000003a61b40>

Extracted source (around line #21):

18:     <th></th>
19:   </tr>
20: 
21: <% @posts.each do |post| %>
22:   <tr>
23:     <td><%= post.name %></td>
24:     <td><%= post.published_on %></td> 
```

可能有一件简单的事情我没有做，但我想不通，目前还没有一个很好的例子来说明只使用带轨道的轮胎作为唯一的数据存储，所以我不知道这是否只是人们的一个晦涩难懂的问题不使用 activerecord 时遇到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:59:20.353

Post.search{query{term :name, params[:q]}} 匹配特定字段或
Post.search{query{string "#{params[:q]}"}} 匹配任何字段到整个字符串或
Post.search{query{wildcard "#{params[:q]}*"}} 将部分字符串匹配到任何字段

# css - PrimeFaces 面板样式内容 CSS

> ID：12163613
> 
> 赞同：0
> 
> 时间：2012-08-28T16:29:55.123
> 
> 标签：css, jsf, primefaces

我很想设置 ui-panel-content 的样式但没有成功，这是我正在应用的 CSS

```
.loginPanel.ui-panel-content {
        border: 0;
        background: red;
        padding: 0.5em 1em; 
```

也试过：

```
.loginPanel.ui-panel, .loginPanel.ui-panel-content {
    border: 0;
    background: red;
    padding: 0.5em 1em; 
```

但这会使整个面板变红

这是我试图定位的输出 HTML：

```
<div id="j_idt9:loginPanel" class="ui-panel ui-widget ui-widget-content ui-corner-all loginPanel">
    <div id="j_idt9:loginPanel_header" class="ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">
        <span class="ui-panel-title">Login</span>
    </div>

    <div id="j_idt9:loginPanel_content" class="ui-panel-content ui-widget-content">

        <table id="j_idt9:loginPanelGrid" class="ui-panelgrid ui-widget loginPanelGrid" role="grid">
            <tbody>
                <tr class="ui-widget-content" role="row">
                    <td role="gridcell">Username</td>
                    <td role="gridcell">
                        <input id="j_idt9:username" name="j_idt9:username" type="text" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" role="textbox" aria-disabled="false" aria-readonly="false" aria-multiline="false">
                    </td>
                </tr>

                <tr class="ui-widget-content" role="row">
                    <td role="gridcell">Password</td>
                    <td role="gridcell">
                        <input id="j_idt9:password" name="j_idt9:password" type="password" class="ui-inputfield ui-password ui-widget ui-state-default ui-corner-all" role="textbox" aria-disabled="false" aria-readonly="false" aria-multiline="false">
                    </td>
                </tr>

                <tr class="ui-widget-content" role="row">
                    <td role="gridcell">
                        <button id="j_idt9:j_idt14" name="j_idt9:j_idt14" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="statusDialog.show();PrimeFaces.ab({source:'j_idt9:j_idt14',update:'j_idt9:growlID',oncomplete:function(xhr,status,args){statusDialog.hide();}});return false;" type="submit" role="button" aria-disabled="false">
                            <span class="ui-button-text">Submeter</span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="j_idt9:loginPanel_footer" class="ui-panel-footer ui-widget-content">V.1.0</div>
</div> 
```

任何想法如何设置

更新：这里是源

```
<div class="loginFromContainer">
    <h:form>
        <p:growl id="growlID">

        </p:growl>
        <p:panel id="loginPanel" styleClass="loginPanel" header="Login SRB Armazem" footer="V.1.0">
            <p:panelGrid id="loginPanelGrid" columns="1" styleClass="loginPanelGrid">
                <h:outputText value="Username" />
                <p:inputText id="username" value="#{loginController.userName}" />
                <h:outputText value="Password" />
                <p:password id="password" value="#{loginController.passWord}" />
                <p:commandButton value="Submeter" update="growlID" onclick="statusDialog.show()" oncomplete="statusDialog.hide()" actionListener="#{loginController.verifyLogin(event)}" action="#{loginController.decideRedireccionar()}" />
            </p:panelGrid>
        </p:panel>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:18:12.337

我放弃了 Panels 的想法，并使用了可以随意格式化的 div……这些面部组件仍然缺少很多东西，以使布局和定位变得像使用 DIV、SPAN 和 CSS 一样简单。 .. 仍然大量使用 Tables 只是为了使事情阵容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T02:19:14.077

如果您不希望 jsf 将表单 id 附加到它的子元素中，请在表单元素中使用此属性：

`<h:form prependId='false'>`

然后您可以通过它们的 ID 访问您的元素。

# google-maps - 无法通过 url 渲染谷歌地图热图图层

> ID：12163615
> 
> 赞同：0
> 
> 时间：2012-08-28T16:29:58.197
> 
> 标签：google-maps, google-maps-api-3

我一直在尝试使用 google maps javascript api v3 处理热图图层。我可以创建一个 html 页面来加载地图和热图图层并从我的本地计算机打开它，它工作正常。但是，当我尝试通过 url 打开同一页面时，地图会呈现，但热图图层不会。这是我要加载的html...

```
<!DOCTYPE html>
<html>  
<head>    
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    
<style type="text/css">     
html { height: 100% }      
body { height: 100%; margin: 0; padding: 0 }      
#map_canvas { height: 100% }    
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=visualization"></script>
<script type="text/javascript">
var map, heatmap, heatmapData;
heatmapData = [
{location: new google.maps.LatLng(41.578898,-73.032746), weight: 89.2},
{location: new google.maps.LatLng(41.903280,-71.392380), weight: 417.3},
{location: new google.maps.LatLng(41.910259,-71.438038), weight: 149.7},
{location: new google.maps.LatLng(41.777443,-72.524997), weight: 62.15},
{location: new google.maps.LatLng(40.956380,-74.159033), weight: 6.7},
{location: new google.maps.LatLng(39.862774,-74.815854), weight: 24.21},
{location: new google.maps.LatLng(39.210240,-74.728080), weight: 583.6},
{location: new google.maps.LatLng(40.698180,-75.135480), weight: 694.95},
{location: new google.maps.LatLng(41.463349,-74.421398), weight: 231.8},
{location: new google.maps.LatLng(43.980552,-75.620903), weight: 411.1},
{location: new google.maps.LatLng(44.090947,-75.804665), weight: 565.5},
{location: new google.maps.LatLng(40.989418,-80.336151), weight: 24.65},
{location: new google.maps.LatLng(40.765717,-79.528243), weight: 898.13},
{location: new google.maps.LatLng(39.976830,-76.685313), weight: 91.25},
{location: new google.maps.LatLng(40.100343,-76.427234), weight: 823.77}
];
function initialize() {      
   var mapOptions = {center: new google.maps.LatLng(40.765717,-79.528243), zoom: 8, mapTypeId: google.maps.MapTypeId.ROADMAP};        
   map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);      

   heatmap = new google.maps.visualization.HeatmapLayer({data: heatmapData, radius: 50});
   heatmap.setMap(map);
}
function toggleHeatmap() {
heatmap.setMap(heatmap.getMap() ? null : map);
}
</script> 
</head>  
<body onload=initialize();>    
<div id="map_canvas" style="width:80%; height:80%"></div>  
<input type=button onclick="toggleHeatmap();" value="click"/>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:30:04.073

热图图层由 Google 的服务器提供，它必须读取您的数据才能创建图层。您的防火墙允许这样做吗？

# bash - 带有 shell 脚本的音乐

> ID：12163616
> 
> 赞同：6
> 
> 时间：2012-08-28T16:29:58.527
> 
> 标签：bash, shell

以下命令将输出哔声。

> 哔 -f 10200 -l 500

我很想知道是否有人有一个使用 beep 命令生成音乐的 shell 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:33:13.233

规则#34：[如果你能想到，那么互联网上的某个人已经做到了](http://ubuntuforums.org/showthread.php?t=1157670)。

[这是另一个。](http://kirrus.co.uk/2010/09/linux-beep-music/)

# eclipse - 用于 Eclipse 和发布的 Aptana 3 插件

> ID：12163620
> 
> 赞同：0
> 
> 时间：2012-08-28T16:30:20.223
> 
> 标签：eclipse, aptana, sftp

我所追求的是能够右键单击已编辑的文件并将其发送到 SFTP 站点或 Eclipse 中的映射位置，因此，如果除了 Aptana 之外还有另一个插件允许我这样做，它也可以工作。

长期以来，我一直在 Eclipse 中使用 Aptana 2 插件，因为它能够将文件推送到服务器（通过 SFTP）或映射驱动器。我刚刚将我的 Eclipse 安装更新为 Juno，由于 Eclipse 的更改，Aptana 2 将不再安装。

然后我安装了 Aptana 3，但无法为我的项目设置发布选项。

我在 Aptana 站点上看到了 wiki，它告诉您使用 App Explorer，然后单击工具栏上的左侧按钮来设置部署选项。不幸的是，在eclipse（至少我的安装）中，左键什么都不做。我也尝试右键单击项目并选择发布（那里也没有选项）这是否在插件中损坏但在 Studio 中工作？

我也尝试过远程系统资源管理器，但我不想编辑远程文件，我想在准备好并部署到远程站点时编辑本地提交到源。

PS 我之前在 Eclipse Indigo 中安装了 Aptana 3，但后来由于同样的问题将其删除并恢复为 2.0，但由于 Juno 中的更改，现在这似乎不是一个选项。

任何帮助将不胜感激，因为我似乎无法在 Google 或此处找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:17:00.617

在 Aptana 支持网站上发现了一个开放的错误。问题的根源似乎与 Eclipse 相关，但在 bug 线程上发布了一个补丁来纠正它[jira.appcelerator.org/browse/APSTUD-4998](http://jira.appcelerator.org/browse/APSTUD-4998)

# java - 更改 JMenuBar 边框

> ID：12163624
> 
> 赞同：7
> 
> 时间：2012-08-28T16:30:40.287
> 
> 标签：java, swing, border, jmenubar

我正在尝试将 JMenuBar 的边框更改为其他边框。像那样（例如）：

从[图片 1 http://img11.hostingpics.net/pics/696780Sanstitre.png](http://img11.hostingpics.net/pics/696780Sanstitre.png) 到[图片 2 http://img11.hostingpics.net/pics/900299Sanstitre2.png](http://img11.hostingpics.net/pics/900299Sanstitre2.png)                                                                                                                        

但我找不到办法做到这一点。我可以改变任何我想要的东西，除了那个。

[编辑] 我已经尝试过：

```
UIManager.put("Menu.border", BorderFactory.createLineBorder(Color.black, 1));
UIManager.put("MenuBar.border", BorderFactory.createLineBorder(Color.black, 1));
UIManager.put("MenuItem.border", BorderFactory.createLineBorder(Color.black, 1)); 
```

它不起作用:( ...

[/编辑]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T17:40:12.270

最后我找到了你要找的东西:) UIManager 的正确属性是`PopupMenu.border`. 要将整个弹出菜单的边框更改为 4 像素的厚度和红色（只是一个有趣的示例），您需要以下行：

```
UIManager.put("PopupMenu.border", BorderFactory.createLineBorder(Color.red, 4)); 
```

这是一个小例子：

```
import java.awt.Color;
import javax.swing.*;
import javax.swing.border.*;

public class CustomPopupMenuBorder
{
    public static void main(String[] args)
    {
        UIManager.put("PopupMenu.border", BorderFactory.createLineBorder(Color.black, 1));      
        JDialog myJDialog = new JDialog();
        myJDialog.setSize(450,300);
        JMenuBar bar = new JMenuBar();
        JMenu menu = new JMenu("It's a me");
        JMenuItem item = new JMenuItem("JMenuItem 1");
        JMenuItem item2 = new JMenuItem("JMenuItem 2");
        menu.add(item);
        JSeparator sep = new JSeparator();    
        menu.add(sep);
        menu.add(item2);
        bar.add(menu);
        myJDialog.setJMenuBar(bar);
        myJDialog.setVisible(true);
    }
} 
```

我在旅途中获得此功能的最佳帮助是 java 应用程序[UIManager Defaults](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:55:51.120

我将从查看[javax.swing.border.Border 类](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/Border.html)开始。每个扩展[javax.swing.JComponent](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html)的 Swing 类都有一个[setBorder() 方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)。

我强烈建议您熟悉[Java API 文档](http://docs.oracle.com/javase/7/docs/api/)。当您使用 Java 编程时，这些是非常宝贵的工具。

# ruby - 在 Ruby 中创建或附加到数组

> ID：12163625
> 
> 赞同：92
> 
> 时间：2012-08-28T16:30:41.287
> 
> 标签：ruby, arrays

```
foo ||= []
foo << :element 
```

感觉有点笨重。有没有更惯用的方法？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-08-28T16:32:47.670

```
(foo ||= []) << :element 
```

但是嗯。保持可读性真的那么繁重吗？

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-08-28T16:36:49.407

您也可以随时在任何阵列上使用 push 方法。我更喜欢它。

```
(a ||= []).push(:element) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-01-09T16:39:30.787

您还可以从[Kernel#Array](https://ruby-doc.org/core-2.5.0/Kernel.html#method-i-Array)中受益，例如：

```
# foo = nil
foo = Array(foo).push(:element)
# => [:element] 
```

这具有展平潜在数组的好处，例如：

```
# foo = [1]
foo = Array(foo).push(:element)
# => [1, :element] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T01:12:05.210

对于可读性和没有条件的情况也更加冗长：

```
foo = Array(foo) << :element 
```

# java - 使用 Hazelcast 存储全局常量会被视为滥用吗？

> ID：12163628
> 
> 赞同：2
> 
> 时间：2012-08-28T16:30:57.433
> 
> 标签：java, cluster-computing, distributed-computing, distributed-caching, hazelcast

我最近一直在使用 Hazelcast，因为我非常喜欢它，我有屈服于[仪器法则](http://en.wikipedia.org/wiki/Law_of_the_instrument)的风险，或者“对于锤子来说，所有问题都是钉子”

我想知道存储静态最终数据是多么荒谬，例如网络应用程序的国家列表，因为这是一种方便/懒惰的方式来实现它。

鉴于 HazelCast 的设计目标实际上是针对分布式变异状态的，这是多么令人震惊的想法，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:51:24.857

如果您的静态数据不适合单个 JVM 内存，那么您可以考虑存储在 Hazelcast 中，但对于少量数据，它将过度设计。如果可以的话，保持本地化以避免可能的序列化、网络、集群等成本。

创始人@hazelcast

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:36:27.363

我不确定这是否令人震惊，特别是如果您的项目中已经使用了这项技术。无论如何，很少有数据实际上是静态的。尤其是国家会随着时间而变化。尝试在现代欧洲地图上找到南斯拉夫……而苏维埃社会主义共和国联盟到底在哪里消失了:)。

# javascript - ColdFusion XML 到 Javascript 变量

> ID：12163629
> 
> 赞同：2
> 
> 时间：2012-08-28T16:30:58.523
> 
> 标签：javascript, xml, coldfusion, tree

我需要将我们的 ColdFusion 后端创建的 XML 转换为专门格式化的 Javascript 变量，以便在 JQWidgets 树中使用（请参阅[http://www.jqwidgets.com/community/topic/xml-tree-with-empty-nodes/#post -7215](http://www.jqwidgets.com/community/topic/xml-tree-with-empty-nodes/#post-7215)获取背景信息）。

遍历 XML 并适当地创建 javascript 的最简单方法是什么？由于我的 XML 的复杂性，我认为 ColdFusion ToScript 不会起作用，但我非常愿意使用它。

示例 XML 数据：

```
 <Role>
        <RoleID>16</RoleID>
        <RoleName>Role C</RoleName>
        <Certifications>
            <Certification>
                <CertificationID>45</CertificationID>
                <CertificationName>Certification 2</CertificationName>
                <Requirements>
                    <Requirement>
                        <RequirementID>678</RequirementID>
                        <RequirementName>Requirement A</Requirement>
                    </Requirement>
                </Requirements>
            </Certification>
        </Certifications>
    </Role>
    <Role>
        <RoleID>16</RoleID>
        <RoleName>Role D</RoleName>
        <Certifications>
            <Certification>
                <CertificationID/>
                <CertificationName/>
            </Certification>
        </Certifications>
    </Role>
</Roles> 
```

示例 Javascript 变量：

```
var source = [
    { label: "Role C", expanded: true, items: [
        { label: "Certification 2", items: [
            { label: "Requirement A" } 
        ]},
    ]},
    { icon: "", label: "Role D" }
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:47:59.933

如果您不想重新发明轮子，可以使用[Xml2Struct 项目](http://xml2struct.riaforge.org/)将 xml 解析为结构，然后使用 SerializeJson() 获取 Javascript 对象。

例子：

```
<cfsavecontent variable="myXml">
<Roles>
    <Role>
        <RoleID>16</RoleID>
        <RoleName>Role C</RoleName>
        <Certifications>
            <Certification>
                <CertificationID>45</CertificationID>
                <CertificationName>Certification 2</CertificationName>
                <Requirements>
                    <Requirement>
                        <RequirementID>678</RequirementID>
                        <RequirementName>Requirement A</RequirementName>
                    </Requirement>
                </Requirements>
            </Certification>
        </Certifications>
    </Role>
    <Role>
        <RoleID>16</RoleID>
        <RoleName>Role D</RoleName>
        <Certifications>
            <Certification>
                <CertificationID/>
                <CertificationName/>
            </Certification>
        </Certifications>
    </Role>
</Roles>
</cfsavecontent>

<cfinvoke component="xml2Struct" method="ConvertXmlToStruct" xmlNode="#myXml#" str="#{}#" returnVariable="result">

<cfdump var="#serializeJson(result)#"> 
```

即使您不想使用该项目，也可以查看源代码以获取有关如何解析 xml 的好示例。

# magento - Magento 1.7 不加载扩展

> ID：12163635
> 
> 赞同：0
> 
> 时间：2012-08-28T16:31:27.340
> 
> 标签：magento, plugins

我在使用 magento 1.7 的扩展时遇到问题

我下载了软件包，将所有文件放入正确的文件夹中

*   /app/code/community/EXTENSION_FOLDER
*   /app/design/adminhtml/ - html 更改
*   /app/etc/modules/Extension.xml

配置文件

```
<?xml version="1.0"?>
<config>
   <modules>
      <Ebizmarts_Cakemail>
         <version>0.0.1</version>
      </Ebizmarts_Cakemail>
   </modules>

    <global>
        <rewrite>
            <ebizmarts_cakemail_account_edit>
                    <from><![CDATA[#^/customer/account/edit/(.*)#]]></from>
                    <to>cakemail/account/edit</to>
            </ebizmarts_cakemail_account_edit>
        </rewrite>

        <blocks>
            <adminhtml>
                <rewrite>
                    <newsletter_subscriber>Ebizmarts_Cakemail_Block_Adminhtml_Newsletter_Subscriber</newsletter_subscriber>
                </rewrite>
            </adminhtml>
        </blocks>

        <models>
            <cakemail>
                <class>Ebizmarts_Cakemail_Model_Cakemail</class>
                <emailtype>Ebizmarts_Cakemail_Model_Cakemail_emailtype</emailtype>
                <!--<rewrite>
                    <listids>Ebizmarts_Cakemail_Model_Cakemail_Listids</listids>
                </rewrite>-->
            </cakemail>
            <newsletter>
                <rewrite>
                    <subscriber>Ebizmarts_Cakemail_Model_Newsletter_Subscriber</subscriber>
                </rewrite>
            </newsletter>

        </models>

        <helpers>
            <Cakemail><class>Ebizmarts_Cakemail_Helper</class></Cakemail>
             <cakemail>
                <rewrite>
                      <data>Ebizmarts_Cakemail_Helper_Data</data>
                </rewrite>
            </cakemail>
        </helpers>

      <resources>
         <Cakemail_setup>
            <setup>
               <module>Ebizmarts_Cakemail</module>
            </setup>
            <connection>
               <use>core_setup</use>
            </connection>
         </Cakemail_setup>

         <Cakemail_write>
            <connection>
               <use>core_write</use>
            </connection>
         </Cakemail_write>

         <Cakemail_read>
            <connection>
               <use>core_read</use>
            </connection>
         </Cakemail_read>

      </resources>

   </global>

    <adminhtml>
        <acl>
            <resources>
                <admin>
                    <children>
                        <system>
                            <children>
                                <config>
                                    <children>
                                        <cakemail translate="title" module="cakemail">
                                            <title>cakemail Section</title>
                                            <sort_order>50</sort_order>
                                        </cakemail>
                                    </children>
                                </config>
                            </children>
                        </system>
                    </children>
                </admin>
            </resources>
        </acl>

        <!--<layout>
            <updates>
                <customerpartner module="Ebizmarts_Customerpartner">
                    <file>customerpartner.xml</file>
                </customerpartner>
            </updates>
        </layout>

    -->
    </adminhtml>

    <admin>
        <routers>
            <cakemail>
                <use>admin</use>
                <args>
                    <module>Ebizmarts_Cakemail</module>
                    <frontName>cakemail</frontName>
                </args>
            </cakemail>
        </routers>
    </admin>

    <default>
        <cakemail>
            <general>
                <active>1</active>
                <url>http://api.cakemail.com/</url>
            </general>
            <subscribe>
                <email_type>html</email_type>
                <double_optin>0</double_optin>
                <update_existing>1</update_existing>
            </subscribe>
            <unsubscribe>
                <delete_member>0</delete_member>
                <send_goodbye>0</send_goodbye>
                <send_notify>0</send_notify>
            </unsubscribe>
        </cakemail>
    </default>

</config> 
```

系统.xml

```
<?xml version="1.0"?>
<config>

   <sections>
          <cakemail translate="label" module="cakemail">
            <class>separator-top</class>
            <label>Cake Mail Configuration</label>
            <tab>customer</tab>
            <sort_order>109</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
            <groups>
                <general translate="label">
                    <label>General</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>0</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <active translate="label">
                            <label>Enabled</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </active>
                        <email translate="label comment">
                            <label>E-mail</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                            <comment>The E-mail you registered with at CakeMail.</comment>
                        </email>
                        <password translate="label comment">
                            <label>Password</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                            <comment>Your CakeMail Password.</comment>
                        </password>
                        <client translate="label comment">
                            <label>Client</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>4</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                            <comment>The Client E-mail.</comment>
                        </client>
                        <listid translate="label comment">
                            <label>List id</label>
                            <frontend_type>select</frontend_type>
                            <source_model>cakemail/listids</source_model>
                            <sort_order>5</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <comment>The Client's Cake Mail list id where customers will be added/removed</comment>
                        </listid>
                        <url translate="label comment">
                            <label>XML-RPC URL</label>
                            <frontend_type>text</frontend_type>
                            <sort_order>6</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </url>
                    </fields>
                </general>
              <subscribe>
                    <label>Subscribe options</label>
                        <frontend_type>text</frontend_type>
                        <sort_order>2</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>0</show_in_website>
                        <show_in_store>0</show_in_store>
                        <fields>
                            <interests translate="label comment">
                                <label>Interests</label>
                                <frontend_type>text</frontend_type>
                                <sort_order>1</sort_order>
                                <show_in_default>0</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Set Interest Groups that contains a comma delimited list of Interest Groups to add.</comment>
                            </interests>
                            <opt-in translate="label comment">
                                <label>Opt-in</label>
                                <frontend_type>text</frontend_type>
                                <sort_order>2</sort_order>
                                <show_in_default>0</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Set the Opt-in IP fields.</comment>
                            </opt-in>
                            <email_type translate="label">
                                <label>Email type</label>
                                <frontend_type>select</frontend_type>
                                <source_model>cakemail/emailtype</source_model>
                                <sort_order>3</sort_order>
                                <show_in_default>0</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Email type preference for the email</comment>
                            </email_type>
                            <double_optin translate="label">
                                <label>Double optin</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_yesno</source_model>
                                <sort_order>4</sort_order>
                                <show_in_default>0</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Flag to control whether a double opt-in confirmation message is sent</comment>
                            </double_optin>
                            <update_existing translate="label">
                                <label>Update existing</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_yesno</source_model>
                                <sort_order>5</sort_order>
                                <show_in_default>0</show_in_default>
                                <show_in_website>0</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Flag to control whether a existing subscribers should be updated instead of throwing and error</comment>
                            </update_existing>

                        </fields>
                </subscribe>
                <unsubscribe>
                    <label>Unsubscribe options</label>
                        <frontend_type>text</frontend_type>
                        <sort_order>3</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>0</show_in_website>
                        <show_in_store>0</show_in_store>
                        <fields>
                            <delete_member translate="label">
                                <label>Delete members</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_yesno</source_model>
                                <sort_order>1</sort_order>
                                <show_in_default>1</show_in_default>
                                <show_in_website>1</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Flag to completely delete the member from your list instead of just unsubscribing</comment>
                            </delete_member>
                            <send_goodbye translate="label">
                                <label>Send goodbye</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_yesno</source_model>
                                <sort_order>1</sort_order>
                                <show_in_default>1</show_in_default>
                                <show_in_website>1</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Flag to send the goodbye email to the email address</comment>
                            </send_goodbye>
                            <send_notify translate="label">
                                <label>Send notify</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_yesno</source_model>
                                <sort_order>1</sort_order>
                                <show_in_default>1</show_in_default>
                                <show_in_website>1</show_in_website>
                                <show_in_store>0</show_in_store>
                                <comment>Flag to send the unsubscribe notification email to the address defined in the list email notification settings</comment>
                            </send_notify>

                        </fields>
                </unsubscribe>

            </groups>
        </cakemail>

    </sections>

</config> 
```

它在 magento 1.4 上运行良好，但我无法在 1.7 上安装它。我没有在配置中将其视为单独的部分。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:57:21.073

你清除了`cache`吗？

我有一个可以在 中工作的演示扩展`Magento 1.7`，并且确实显示了一个配置部分以及一个指向它的菜单链接。

你可以[在这里](http://demo.jeroenvermeulen.eu/files/ConfigSetting.zip)下载。

# zend-framework - 使用标签装饰器添加所需标记的最佳方法是什么 - Zend

> ID：12163636
> 
> 赞同：3
> 
> 时间：2012-08-28T16:31:27.167
> 
> 标签：zend-framework, zend-form, zend-form-element

我有一个关于使用 Zend_Form_Decorator_Label 的问题，为了在需要表单元素时获得以下结果，我需要获取 Label-text *，我想知道如何以最可重用的方式实现它？

是编写新的装饰器还是覆盖 zend_View_helper_FormLabel ？也许还有其他方法可以实现这一目标？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:50:39.960

您可以在创建装饰器时添加以下选项之一：

*   **optionalPrefix**：当元素是可选时使用的标签前缀
*   **optionalSuffix**：当元素是可选时使用的标签后缀
*   **requiredPrefix** : 需要元素时使用的标签前缀
*   **requiredSuffix** : 需要元素时使用的标签后缀

代码示例：

```
$elementDecorators = array(
    'ViewHelper',
    array('Label', array('requiredSuffix' => ' *')),
);

$userName = new Zend_Form_Element_Text('userName');
$userName->setDecorators($elementDecorators);
$userName->setLabel('User Name'); 
```

或者，您可以在现有装饰器上显式设置后缀/前缀：

```
$userName->getDecorator('Label')->setReqSuffix(' *');
$userName->getDecorator('Label')->setOptSuffix('(Optional) '); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T08:08:23.207

由于 Label 装饰器将 CSS 类添加`required`到`<label>`附加到根据需要指定的表单输入元素的元素中，因此我能够通过使用`:after`带有`content()`声明的 CSS 选择器添加符号（如星号）：

```
label.required:after {
    content: "*";
} 
```

但是，我发现设置正确的间距、让星号以粗体或我想要的颜色呈现等可能很棘手。因此，我经常回退到使用 CSS 以粗体呈现标签本身或以不同的颜色，然后在表单的顶部或底部添加一个图例（“需要粗体/红色字段”或类似的）（通常通过创建我自己的自定义图例装饰器，但有时在视图脚本本身）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T18:12:32.400

```
class FormDecorators {
    public static $simpleElementDecorators = array(
        array('ViewHelper'),
        array('Label', array('tag' => 'span', 'escape' => false, 'requiredPrefix' => '<span class="required">* </span>')),
        array('Description', array('tag' => 'div', 'class' => 'desc-item')),
        array('Errors', array('class' => 'errors')),
        array('HtmlTag', array('tag' => 'div', 'class' => 'form-item'))
    );
    } 
```

对于你使用的元素

```
 $elem->setDecorators(FormDecorators::$simpleElementDecorators) 
```

我在标签数组中添加了带有“requiredPrefix”参数的必需前缀。

```
array('Label', array('tag' => 'span', 'escape' => false, 'requiredPrefix' => '<span class="required">* </span>')), 
```

# php - 使用 php 脚本提取 Joomla 页面标题

> ID：12163641
> 
> 赞同：0
> 
> 时间：2012-08-28T16:31:39.990
> 
> 标签：php, mysql, joomla, page-title

我正在尝试设计一个表单以在以前端管理员身份登录时在 Joomla 中使用来编辑页面标题。

我写了以下内容，列出了网站上的所有文章：

```
 <h3>Edit Page Titles</h3>
    <table border="0" style="text-align:left;">
      <tr style="text-align:left;">
        <th style="text-align:left;" width="400px"  scope="col">ID</th>
        <th style="text-align:left;" width="400px"  scope="col">Name</th>
     <th style="text-align:left;" width="400px"  scope="col">Params</th>
    <th style="text-align:left;" width="400px"  scope="col">Delete</th>
      </tr>
    <?php
    if (JFactory::getUser()->id == 0)
        die("Access denied: login required.");
        else
    {
    $today = date("d-m-y");
    $result = mysql_query("SELECT * FROM ymeg_menu ORDER BY id")or die(mysql_error());

    echo '<tr style="text-align:left;">';
    while($row = mysql_fetch_array($result))
      {
        echo '<td style="text-align:left;">';  
      echo $row['id'];
      echo '</td>'; 
      echo '<td style="text-align:left;">'; 
      echo $row['name'];
         echo '</td>'; 

      echo '<td style="text-align:left;">'; 
      echo $row['params'];
         echo '</td>';

    echo '<td>';
    echo '<a href="index.php?option=com_chronoforms&chronoform=DeleteTagsAction&token=';
    echo $row['id'];
    echo '"style="color:#AD0F02 !important; font-weight:bold !important;">Delete</a>';
    echo '</td>';
      echo "</tr>";
      }
      }
      ?>

    </table> 
```

运行脚本时，在 params 列中为站点上的每个页面列出类似于以下内容的内容：

```
 num_leading_articles=1 num_intro_articles=0 num_columns=1 num_links=0 orderby_pri= orderby_sec=order multi_column_order=1 show_pagination=2 show_pagination_results=1 show_feed_link=1 show_noauth=0 show_title=0 link_titles=0 show_intro=1 show_section=0 link_section=0 show_category=0 link_category=0 show_author=1 show_create_date=1 show_modify_date=1 show_item_navigation=0 show_readmore=1 show_vote=0 show_icons=1 show_pdf_icon=1 show_print_icon=1 show_email_icon=1 show_hits=1 feed_summary= fusion_item_subtext= fusion_customimage= fusion_customclass= fusion_columns=1 fusion_distribution=even fusion_dropdown_width=290 fusion_column_widths= fusion_children_group=0 fusion_children_type=menuitems splitmenu_item_subtext= suckerfish_item_subtext= page_title=SOS Direct – Motorcycle Breakdown Cover From The Motorcycle Breakdown Experts show_page_title=0 pageclass_sfx= menu_image=-1 secure=0 
```

我要提取的部分是：page_title=SOS Direct – Motorcycle Breakdown Cover From The Motorcycle Breakdown Experts

有谁知道如何从返回的结果中提取上述内容，以便在 params 列中我得到的所有内容类似于“SOS Direct - 摩托车故障专家提供的摩托车故障保险”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:19:35.107

尝试这样的事情：

```
$params = new JParameter( $row['params'] );
$title = $params->get('page_title'); 
```

JParameter 构造函数中的唯一参数是 INI 数据。

# c# - 扩展标题删除“_”字符

> ID：12163645
> 
> 赞同：3
> 
> 时间：2012-08-28T16:31:43.983
> 
> 标签：c#, wpf, xaml, header, expander

我使用 MVVM 模式将 XAML 中的 Expander.Header 属性绑定到我的 ViewModel 中的字符串类型的支持公共属性：

```
public string EnumName {...} 
```

我将此属性设置为“X_Y_Z”，但由于某些奇怪的原因，扩展器标题正在删除第一个下划线字符，并显示为 XY_Z。我尝试在之前添加“\”或将其设置为@“X_Y_Z”但没有运气。

这是我的 XAML 绑定部分：

```
<Expander IsExpanded="true" Header="{Binding EnumName}"> 
```

有人知道我为什么会出现这种行为吗？是将第一个“_”作为键盘快捷键还是元字符？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:35:46.617

可能转换为访问密钥，因为您[`Label`](http://msdn.microsoft.com/en-us/library/system.windows.controls.label.aspx)的.`ContentPresenter`[`RecognizesAccessKey`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.recognizesaccesskey.aspx)`true`[`Expander.Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)

例如，您可以切换模板或转义值中的下划线（连续两个下划线）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:03:35.700

```
<Expander Header="{Binding Path=Name}">                                    
   <Expander.HeaderTemplate>
      <DataTemplate>
          <TextBlock Text="{Binding}"/>
      </DataTemplate>
   </Expander.HeaderTemplate>
</Expander> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T17:06:23.333

@HB 为我指明了正确的方向。我最终为我的扩展器设置了一个标题模板，如下所示，访问祖先 ListViewItem 的 DataContext：

```
<Expander.HeaderTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding Path=DataContext.EnumName,RelativeSource={RelativeSource AncestorType=ListViewItem}}"/>
    </DataTemplate>
</Expander.HeaderTemplate> 
```

由于我现在使用的是 TextBlock，它不会删除字符串中的任何“_”字符。

# java - stuts 1 使用 HTML5 上传多个文件

> ID：12163646
> 
> 赞同：0
> 
> 时间：2012-08-28T16:31:45.420
> 
> 标签：java, html, struts, struts-1

我尝试使用 HTML5 属性 multiple ="multiple" 。我能够在 FF 中选择多个文件（ctrl+click）。但是这个属性在 IE 8 上不起作用。我对这种行为没有几个问题

1) 是否有任何 JS API 可以在 IE 上允许这样做。2）即使我在 FF 中选择了多个文件，我也只看到在服务器端的多部分数据中选择的最新文件。我正在使用 Struts 表单文件进行上传。

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:53:44.023

好吧，IE8 不允许您选择多个文件。在 IE8 中试试[这个小提琴。](http://jsfiddle.net/vapocalypse/LNYRG/)

当检测到 IE8 时，您可以做的是使用 Flash。我过去使用过[Uploadify](http://www.uploadify.com/)，它非常可靠。

干杯，阿波克

# php - APC 如何使用内存？

> ID：12163652
> 
> 赞同：3
> 
> 时间：2012-08-28T16:32:04.247
> 
> 标签：php, apc

APC 正在使用大量内存。在我的服务器上，大约 30 个 Wordpress 和 6 个 Magento 网站，它使用了超过 1GB 的空间，这超过了 PHP 文件的大小。

我认为操作码会比 PHP 文件小。与源代码相比，编译的 JAVA 也是如此。

例如，Magento 的 index.php 在磁盘上是 2571B，在 APC 中使用的是 16560B。

我不使用任何用户缓存。

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:35:56.447

操作码按其所在的路径缓存每个 php 文件。所以这是每个 wordpress PHP 文件 30 x 或每个 Magento PHP 文件 6 x。更不用说您可能正在使用的任何 PEAR 库或其他库。

另外，您在 /etc/php.d/apc.ini 或 php.ini 文件中为允许 APC 的内存设置了什么？

```
apc.shm_segments=1
apc.shm_size=256 
```

将分段乘以大小，与 APC 一样大将增长。即使您没有真正使用它，它也会立即使用此内存块。检查您的 apc.php 文件以查看实际使用情况。

查看 Wordpress 最近安装的 wordpress，我看到至少 8M 的 php 文件。因此，如果您有 30 个站点都安装了完整的 wordpress 并使用 APC，那么仅此一项（没有任何插件）将是操作码缓存中的大量内容。

通常操作码应该小于文件大小，但你不能确定 100%。例如，在系统缓存选项卡中检查 APC.php，我看到这个文件被缓存：`/usr/share/pear/Zend/View/Abstract.php`. 我知道在磁盘上它是 33k，但 APC 报告它正在使用 20K 的内存。如果我在两个位置（如`/usr/share/pear/Zend/View/Abstract.php`和`/usr/share/pear/Zend2/View/Abstract.php`）有这个文件的 2 个副本，并且在不同的代码块中引用了这两个副本，APC 会缓存每个副本——它认为它们是不同的文件。

# javascript - Ember.js 和 ember-data 错误加载 json

> ID：12163654
> 
> 赞同：1
> 
> 时间：2012-08-28T16:32:13.940
> 
> 标签：javascript, ember.js, ember-data

我收到错误

```
Uncaught TypeError: Object #<Object> has no method 'map' 
```

当使用 ember-data 尝试从我的 api 加载 json 时。

```
App = Ember.Application.create({});

App.Student = DS.Model.extend({
    primaryKey: 's_id',
    s_id: DS.attr('integer'),
    surname: DS.attr('string')
});

App.Student.reopenClass({
    url: 'api/student.php'
})

App.adapter = DS.Adapter.create({
    findAll: function(store, type) {
        var url = type.url;

        console.log(type.url);

        jQuery.getJSON(url, function(data){
            store.loadMany(type, data);
        });
    }
});

App.store = DS.Store.create({
    revision: 4,
    adapter: App.adapter
});

App.students = App.store.findAll(App.Student); 
```

我已确保 JSON 格式正确，但无济于事；有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:05:03.350

我发现在使用自定义适配器时，最好在 App.adapter 中定义所有方法（findAll、find、createRecord、createRecords 等）以避免抛出错误。你会认为逐步实现这个方法最好是控制你的应用程序中发生的事情，但是如果你这样做，默认适配器会跳进去。

还要检查 json 响应的正确格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:35:12.617

[pauldechov](https://stackoverflow.com/users/363073/pauldechov "pauldechov")在上面的评论中回答了这个问题：

> I think I know what's going on -- DS.RestAdapter does assume the pluralized form as the root of the json in its implementation of findAll, but if you need this, you should either mimic this implementation or just use/extend that built-in one.

Because the root of the json is named, I can call data.student to get call loadMany correctly.

# .net - 创建用于发送电子邮件的标准 html 的库

> ID：12163655
> 
> 赞同：0
> 
> 时间：2012-08-28T16:32:20.193
> 
> 标签：.net, html-email

.NET 中是否有任何库可以从富文本框生成的 html 创建符合标准的 html（大多数电子邮件阅读器，如 Outlook、gmail、hotmail 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:58:19.660

我使用的是[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，但是要将 RTF 转换为 HTML，您需要其他东西或另外的东西（谷歌“RTF 到 HTML”，一些 .NET 相关的结果出现了）。

# regex - 使用 RegEx 确定在另一个序列之前出现的序列的出现次数

> ID：12163658
> 
> 赞同：1
> 
> 时间：2012-08-28T16:32:25.360
> 
> 标签：regex

希望解析这样的字符串：

AxBxCxAxBxCxAxBxCxAxBx...AxBZCx...

在哪里

*   项目清单
*   A 是已知的字符序列（如 'foo'）
*   B 是已知的字符序列（如“bar”）
*   C 是已知的字符序列（如 'baz'）
*   x 是零个或多个不包含 A、B 或 C 的未知字符的序列
*   Z 是已知的字符序列（如“Gorilla”）

我需要知道的是在 BZC 之前出现的 A 的出现次数（将是 1 次或更多）。B 和 C 部分不是无关的，因为 Z 可能作为任何 x 的一部分出现。

我是正则表达式的新手，但这似乎只是它的工作。我宁愿避免涉及循环的编程语言实现（如标记器算法）。

*编辑*：在考虑了更多之后，我意识到虽然 Z 是我最初所说的我所追求的，但真正重要的是 BZC。鉴于我需要的只是在那之前的 A 的计数，并且 x 永远不会包含 A，我可以将 Z 定义为原始 BZC 并简化问题：

要解析的原始字符串：xAxAxAx...Z

其中 A 和 x 都不包含 Z，并且 x 不包含 A。在 Z 之前查找 A 的实例数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:14:07.860

```
var TextBeforeFirstZ = string.split(/Z/)[0]

var CountNumA = TextBeforeFirstZ.match(/A/g).length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:41:52.067

```
A(?:.(?!A|B|C))*?.BZC 
```

试试看。逻辑是：

```
A 
```

匹配A（清楚）

```
(?:.(?!A|B|C)) 
```

匹配一个不跟随 A、B 或 C 的字符（不捕获它） (?: ...) 是一个“非捕获”组，这意味着您的解析器不会单独存储它。和 (?!...) 是一个否定的前瞻，一个零宽度断言，它将检查前面的字符并确保它们不匹配内部的正则表达式，而不实际匹配它们中的任何一个。

```
*? 
```

执行任意次数（懒惰 - 满足要求的最短字符串。）

```
.BZC 
```

匹配任意字符（组不匹配，因为后面跟着B），然后是BZC

它不是最有效的正则表达式，但它应该可以完成工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:51:56.393

```
(A)(?=.*?Z) 
```

匹配数为您提供计数。

[在这里](http://regexpal.com/?flags=g&regex=%28A%29%28%3F%3D.%2a%3FZ%29&input=AxBxCxAxBxCxAxBxCxAxBx...AxBZCxAxBxCxAxBxCxAxBx)工作

在这里，您可以用 foo 替换 A，用 Gorilla 替换 Z。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T17:47:37.720

这就是我所做的：

`(A(?=.*BZC))`

**全面测试：**

```
var a = $('p').text();
var b = a.match(/(A(?=.*BZC))/g);

alert(b.length); 
```

**示例：http:** [//jsfiddle.net/7vkzF/1/](http://jsfiddle.net/7vkzF/1/)

# objective-c - Restkit - 如何将下载的 coredata 对象与存储中的对象链接

> ID：12163659
> 
> 赞同：1
> 
> 时间：2012-08-28T16:32:37.747
> 
> 标签：objective-c, ios, restkit

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
    [WBItemSummary setupDataMapping];
    [loader setOnDidLoadObjects:^(NSArray *objects){
        NSLog(@"%@",objects);
        block(objects);
    }]; 
```

在这段代码中，我已经加载了 WBItemSummary，它存储在 coredata 中，与 self 上的关系很多，我需要将先前加载的对象连接到当前加载的 throw 关系，我该如何使用 restkit 来做到这一点？响应对象与获取的先前加载的对象位于不同的 NSManagedObjectContext 中。

# ios5 - 显式共享

> ID：12163665
> 
> 赞同：2
> 
> 时间：2012-08-28T16:33:07.647
> 
> 标签：ios5, facebook-ios-sdk

我目前正在使用自定义操作将故事发布到墙上。我想使用 explicit_shared 选项，但不确定该参数的放置位置。我正在使用 iOS API，我使用的 post 方法是

[FBRequestConnection startForPostWithGraphPath:@"me/:" graphObject:completionHandler:

所有帮助表示赞赏。

谢谢，

学士学位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:20:16.923

这对我有用

```
[graphObject setObject:@"1" forKey:@"fb:explicitly_shared"]; 
```

# mysql - mysql函数返回一个表

> ID：12163666
> 
> 赞同：5
> 
> 时间：2012-08-28T16:33:08.413
> 
> 标签：mysql

有什么方法可以让我们从 mySQL 函数返回一个表？

就像我们在 SQL SRV 上所做的那样？

```
ALTER FUNCTION [dbo].[blablabla](
@grupo int,
@singular varchar(50), 
@plural varchar(50),
@flag_e bit,
@s_ext varchar(255)
)
RETURNS @resultado TABLE (flag_e bit, s_ext varchar(250))
AS
 BEGIN
  DECLARE 
```

这是 SQL SRV，如果可能的话，我想要一个类似的代码，但在 MySQL 上。

提前致谢

**编辑**

好的

```
[dbo].[blablabla] = returns @result TABLE 
```

现在在另一个功能中我需要

```
...
begin
...
select * 
from dbo.blablabla(parameters)
...
end 
```

这是来自 SQL SRV 的代码，我需要将其转换为 MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:34:48.723

不，MySQL 函数只能返回列数据类型。

但是，您的函数可以将结果插入到已知名称的表中——包括在函数体中创建的（临时）表；或者，过程（但不是函数）可以生成发送到客户端的结果集（例如，通过执行`SELECT`语句）。

# iis - bin文件夹中的奇怪'`'.dll文件，ASP.Net MVC

> ID：12163670
> 
> 赞同：4
> 
> 时间：2012-08-28T16:33:32.670
> 
> 标签：iis, asp.net-mvc-4

最近，当我构建和发布我的 MVC4 项目时，我的**bin**文件夹中出现了一个奇怪的文件，我在浏览网站时遇到了以下错误：

> 无法加载文件或程序集“`”或其依赖项。试图加载格式不正确的程序。

![在此处输入图像描述](../Images/059ad95e820240c9314a2f39da42750f.png)

该网站在存在这些文件的本地 IIS 上运行良好。

当我在本地或生产服务器上删除这两个文件时，它说：

> 无法加载类型“XXXX.MvcApplication”

什么会导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:53:26.723

转到您的**项目属性**（右键单击项目并点击属性）并在**应用程序**选项卡中将您的**程序集名称**从“`”更改为您期望的 dll 名称应该是。

# php - PHP 执行不工作

> ID：12163681
> 
> 赞同：2
> 
> 时间：2012-08-28T16:34:02.180
> 
> 标签：php, system

我在 Windows 7 64 位机器上运行 Apache 2.2.17 和 PHP 5.3.5。

我注意到，如果我尝试使用 exec()、system() 或任何其他函数通过 PHP 执行系统命令，它就不起作用。如果将它们粘贴到命令行窗口，完全相同的命令将起作用。这似乎会影响所有不是最简单的命令行程序的程序。即使是打开记事本的简单尝试也不起作用，例如 system('C:/Windows/system32/notepad.exe')。

这可能是什么原因造成的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:21:26.820

阅读

例如

```
<?php exec('C:\\WINDOWS\\system32\\psexec.exe \\192.168.1.224 -u myuser ... etc. 
```

我还在引用的讨论中看到以下内容：

引用; 在 Windows 中，exec() 发出对“cmd /c your_command”的内部调用。这意味着您的命令必须遵循 cmd.exe 强加的规则，其中包括完整命令周围的一组额外引号：

[http://ss64.com/nt/cmd.html](http://ss64.com/nt/cmd.html)

当前的 PHP 版本考虑到这一点并自动添加引号，但旧版本没有。尾声：

还有一些关于在命令所在的文件夹上设置 Windows 权限的讨论，我可以想象这在 Vista 或 Windows 7 机器上可能是相当令人痛心的。您可能需要以某种方式允许访问 WAMPserver 本身。

**编辑：**

我能想到的唯一其他建议是：

*   授予对可执行文件和包含它的文件夹路径的 EVERYBODY 的完全访问权限

*   检查服务器错误日志以查看是否有包含任何有用信息的错误消息

我又想到一件事：

*   将您的可执行文件复制到 C:\WINDOWS\SYSTEM32，并像“ping”一样运行它。

祝你好运！

来源：推荐阅读：很多人讨论很多问题的解决方案

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:55:15.580

不幸的是，这些解决方案都不适合我。我已经改变了我的方法，不会使用 PHP 来启动可执行文件。

# ruby - 为什么 rake aborts [rake --tasks] 无法在我的 Windows 机器上加载此类文件？

> ID：12163684
> 
> 赞同：1
> 
> 时间：2012-08-28T16:34:08.803
> 
> 标签：ruby, windows, rake

我正在尝试从没有导轨或任何东西的目录中执行 rake 任务。里面只有一个目录和一个 Rakefile.rb。

目前我不知道它为什么会失败。但我认为从 Rakefile 所在的目录中执行 rake 应该从该 rakefile 执行任务。我错过了加载路径还是什么？

我的环境

```
Win7 (x64)

ruby 1.9.3p194 (2012-04-20) [i386-mingw32]

rake, version 0.9.2.2

RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby193/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/Ruby193/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby193/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/Ruby193/lib/ruby/gems/1.9.1
     - C:/Users/pantarhei/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这是错误信息

```
[rake --tasks] rake aborted!
cannot load such file -- D:/Projects/_Web/FOO/Rakefile
C:/Ruby193/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load'
C:/Ruby193/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:501:in `raw_load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `<main>'

    [rake --prereqs] rake aborted!
cannot load such file -- D:/Projects/_Web/FOO/Rakefile
C:/Ruby193/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load'
C:/Ruby193/lib/ruby/1.9.1/rake/rake_module.rb:25:in `load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:501:in `raw_load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:82:in `block in load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:81:in `load_rakefile'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:65:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:12:56.593

您可以尝试将 Rakefile.rb 重命名为 Rakefile（不带 .rb 扩展名），然后再试一次吗？

还可以尝试：

```
rake -T -fRakefile.rb 
```

作品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:41:02.710

在你写的问题中`Reakefile.rb`；我不知道这是否只是问题中的拼写错误，或者您在目录中的 rakefile 是否实际上被称为 this，但请确保它被称为`Rakefile`, 或`Rakefile.rb`.

# netbeans - 如何使用 jdk7 制作 netbeans，java ee 6 知道？

> ID：12163685
> 
> 赞同：0
> 
> 时间：2012-08-28T16:34:12.160
> 
> 标签：netbeans, java-ee-6

我已经从 oracle 站点安装了 netbeans+jdk7u6 包，jdk7 仅由 netbeans 引用，我的系统有 openjdk6，我用于从命令行编写和编译程序。

如果我没记错的话，java ee 6 只是一个规范，实现是 GlassFish AS、tomcat 等。

安装tomcat（当然是我的netbeans版本支持的版本）可以缓解我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:56:32.167

您可以在 Netbeans 中使用`Tools -> java platforms`. 只需管理（添加或删除）java 平台并告诉 netbeans 你想使用哪一个`right clicking on project -> properties -> compile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:23:14.400

不知道oracle捆绑了什么NB版本，但是有一个Netbeans的Java EE包：http: [//netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)（Java EE）

如果您没有这个（或“全部”），您可以通过**Tools -> Plugins -> *(Available Plugins)***安装它并选择例如。**Jave EE Base**或任何你需要的东西。

# git - 如何找到我使用的是 32 位还是 64 位版本的 Git

> ID：12163689
> 
> 赞同：9
> 
> 时间：2012-08-28T16:34:20.317
> 
> 标签：git

我想知道我在 Windows 上运行的 Git 版本是 32 位还是 64 位。知道如何找出答案吗？我正在粘贴我拥有的任何信息。

```
$ git version 
```

> git 版本 1.7.10.msysgit.1

```
vkaul@NBVK ~
$ git config -l 
```

> core.symlinks=false
> core.autocrlf=true
> color.diff=auto
> color.status=auto
> color.branch=auto
> color.interactive=true
> pack.packsizelimit=2g
> help.format=html
> http.sslcainfo=/bin/curl-ca -bundle.crt
> sendemail.smtpserver=/bin/msmtp.exe
> diff.astextplain.textconv=astextplain
> rebase.autosquash=true
> gui.recentrepo=C:/OCRImages_GIT
> user.email=vivek.kaul@jumio.com
> user.name=Vivek Kaul merge.tool
> =kdiff3
> core.autocrlf=true
> core.editor="C:/Program Files (x86)/GitExtensions/GitExtensions.exe" fileeditor
> mergetool.kdiff3.path=C:/Program Files (x86)/KDiff3/kdiff3.exe
> diff.guitool=kdiff3
> difftool.kdiff3.path=C:/Program Files (x86)/KDiff3/kdiff3.exe
> http.postbuffer=2000000000
> push.default=匹配
> pack.windowmemory=512m
> pack.packsizelimit=2g

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-26T17:34:17.247

我很欣赏这是旧的，但我很沮丧试图找到答案，然后自己解决了。如果您使用默认安装位置，这非常非常简单。

如果您的安装在 中`C:\Program Files\Git`，则它是 64 位的。如果它`C:\Program Files (x86)\Git`是 32 位的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T16:39:16.730

命令

```
file $( which git ) 
```

输出

```
/usr/bin/git: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x4faadbc9c19a44ab71d1714a4e3d69e177e42a76, stripped 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-12T22:31:01.867

这应该为您提供您在任何平台上寻找的信息：

```
C:\>git --version --build-options
git version 2.21.0.windows.1
cpu: x86_64
built from commit: 2481c4cbe949856f270a3ee80c802f5dd89381aa
sizeof-long: 4
sizeof-size_t: 8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:39:18.117

使用`file`，例如

```
$ file `which git`
/usr/local/bin/git: Mach-O 64-bit executable x86_64 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-09T03:03:57.623

这就是我使用记事本++的方式

1.  在 Notepad++ 中打开 git-bash.exe（或 git-cmd.exe）
2.  转到搜索>查找或只需按`CTRL`+`F`
3.  输入`PE`并点击查找下一个
4.  现在寻找之后的第一个可打印字符`PE`

如果是，`d`那么你的 Git 是**64 位的**

如果是，`L`那么你的 Git 是**32 位的**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T16:50:20.413

在 Windows 版 Git Bash 上，您可以键入
`where git`

> C:\Program Files\Git\mingw64\bin\git.exe
> C:\Program Files\Git\cmd\git.exe

如果它已安装，`Program Files`那么您正在运行 64 位。
如果它已安装，`Program Files (x86)`那么您正在运行 32 位。

# html - HTML 的默认字符编码是什么？

> ID：12163692
> 
> 赞同：5
> 
> 时间：2012-08-28T16:34:27.760
> 
> 标签：html, character-encoding

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:44:56.750

That certainly looks like UTF-8 being interpreted as something else.

HTML doesn't have a default. It's picked up from the headers of the transfer protocol (normally HTTP) or failing that, from a BOM, from `meta` elements or, in the case of XHTML, the XML declaration. In the absence of any of those, the user-agent guesses.

HTTP has a default of ISO-8859-1, which even one HTML spec described as having "proved useless" [[source](http://www.w3.org/TR/html401/charset.html#spec-char-encoding)] (they don't even go into the fact that a large amount of stuff out there labelled as ISO-8859-1 is actually CP-1252).

Hence. Forget about defaults, always set your HTTP headers **and** your meta elements (in case it's saved as a file).

And always do so as UTF-8\. Anything else in this day and age is just an act of masochism.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:39:20.567

The `!DOCTYPE` doesn't set a character encoding, the `meta` element together with the (newly standardized) `charset` attribute does. If it's absent I'm not entirely sure how the browser determines the encoding.

I believe the problem you're having though is that your page is saved in one encoding and served in another.

Just make sure you set `<meta charset="utf8"/>` and make sure your document is in fact utf8 and it should work.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T16:38:02.317

i use the default that Eclipse for PHP provides with, and face no problems:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head> 
```

# c++ - 如何使 dumpObjectInfo 打印调试信息？

> ID：12163695
> 
> 赞同：8
> 
> 时间：2012-08-28T16:34:33.777
> 
> 标签：c++, qt

我想使用 dumpObjectInfo 函数打印对象信息的转储，但没有打印任何内容。

以下是使用 Qt 的 C++ 程序：

```
$ cat main1.cpp
#include <QObject>
#include <QString>
#include <QDebug>
#include "a.h"

int main() {
    A a;
    B b;
    QObject::connect(&b, SIGNAL(sendText(QString)), &a, SLOT(printText(QString)));
    b.sendSignal();
    qDebug() << "print object dump";
    a.dumpObjectInfo();
    return 0;
} 
```

有以下 .pro 文件（在 CONFIG 中有设置调试模式）：

```
$ cat qt.pro
######################################################################
# Automatically generated by qmake (2.01a) Tue Aug 28 17:41:22 2012
######################################################################

TEMPLATE = app
TARGET = 
DEPENDPATH += .
INCLUDEPATH += . 

# Input
CONFIG += debug
HEADERS += a.h
SOURCES += main1.cpp 
```

汇编：

```
$ qmake qt.pro && make clean && make
rm -f moc_a.cpp
rm -f main1.o moc_a.o
rm -f *~ core *.core
g++ -c -pipe -g -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I. -o main1.o main1.cpp
/usr/bin/moc-qt4 -DQT_WEBKIT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I. a.h -o moc_a.cpp
g++ -c -pipe -g -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I. -o moc_a.o moc_a.cpp
g++  -o qt main1.o moc_a.o    -L/usr/lib/i386-linux-gnu -lQtGui -lQtCore -lpthread 
{ test -n "" && DESTDIR="" || DESTDIR=.; } && test $(gdb --version | sed -e 's,[^0-9]\+\([0-9]\)\.\([0-9]\).*,\1\2,;q') -gt 72 && gdb --nx --batch --quiet -ex 'set confirm off' -ex "save gdb-index $DESTDIR" -ex quit 'qt' && test -f qt.gdb-index && objcopy --add-section '.gdb_index=qt.gdb-index' --set-section-flags '.gdb_index=readonly' 'qt' 'qt' && rm -f qt.gdb-index || true 
```

程序运行：

```
$ ./qt
Signal text!

print object dump 
$ 
```

dumpObjectInfo 不会打印任何内容，尽管在 .pro 文件中设置了调试模式。如何使函数 dumpObjectInfo 打印对象信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T01:06:34.937

如果 Qt 库本身没有在调试模式下编译，这是可以预料的。医生[说](http://qt-project.org/doc/qt-4.8/qobject.html#dumpObjectInfo)：

> 该函数对调试很有用，但如果库已在发布模式下编译（即没有调试信息），则不会执行任何操作。

为了完成这项工作，您可以从源代码自编译 Qt，而不是（或除此之外）使用预编译的包。

# php - 无效的论点

> ID：12163699
> 
> 赞同：0
> 
> 时间：2012-08-28T16:34:46.523
> 
> 标签：php, foreach

编辑：是因为 $i 被初始化为 1 而不是 0...？？？

我将从数据库中检索到的某些值存储在会话变量中。我就是这样做的：

```
$i = 1;   
//query to select tuples from the database;
while($i <= $num) //$num is the count of the rows returned by the query
{
    $_SESSION['first'][$i] = $row->first;
    $_SESSION['second'][$i] = $row->second;
    $i++;
} 
```

然后我按如下方式使用它们：

```
$i = 1;
foreach ($_SESSION['first'] as $names)
{
    //do something with $_SESSION['second'][$i];
    $i++;
} 
```

**我得到的错误：（** 刷新页面后消失）

```
Invalid argument supplied for foreach() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:37:42.200

根据您的代码，`$num == 0`您`$_SESSION`将永远不会被初始化，因此`$_SESSION['first']`将不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:36:48.453

在循环之前确保变量是一个数组`is_array`：

```
$i = 1;
if (is_array($_SESSION['first'])) { foreach ($_SESSION['first'] as $names) {
    //do something with $_SESSION['second'][$i];
    $i++;
}} 
```

问题可能来自您最初将值放入数组的方式，可以很容易地纠正`is_array`

```
$i = 1;
if (!is_array($_SESSION['first']))
    $_SESSION['first'] = array();
//query to select tuples from the database;
while($i <= $num) //$num is the count of the rows returned by the query
{
    $_SESSION['first'][$i] = $row->first;
    $_SESSION['second'][$i] = $row->second;
    $i++;
} 
```

**文档**

*   `is_array`- [http://php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)
*   `foreach`- [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

# javascript - 无法在 iOS 模拟器上运行简单的基于 KineticJs 的 Cordova/PhoneGap 应用程序

> ID：12163713
> 
> 赞同：1
> 
> 时间：2012-08-28T16:35:29.690
> 
> 标签：javascript, ios, cordova, kineticjs

我一直在玩 KineticJs JavaScript 库，现在我正在尝试在 iOS 模拟器中模拟一些简单的基于 PhoneGap 的应用程序。

但是，我什至无法在 iOS 模拟器中运行一段简单的代码。我的代码只是使用 KineticJs 库在 HTML5 画布上绘制了一个矩形。我可以使用 Ripple Emulator (emulate.phonegap.com) 在桌面浏览器中运行它，它工作正常（尽管 window.onload 事件似乎被触发了两次，但不确定这是否相关）。

问题出现在 iOS 模拟器中。一旦遇到用于实例化新 KineticJs 'stage' 的 javaScript 代码，Xcode 控制台面板中不会发生任何其他事情（没有显示 console.log() 消息）并且模拟器中不会出现 alert() 弹出窗口。

我在 kinetic-v4.0.0.js 源代码中为每个构造函数、方法、原型等添加了调试消息（使用 console.log() 和 alert() 语句），但没有一条消息显示在初始启动消息之后的 Xcode 控制台面板，因此很难弄清楚它在哪里丢失了。

我在下面粘贴了我的 index.html 文件。它仅包含用于绘制矩形的 KineticJs 调用，还包含 .

我尝试了很多事情，例如重新定位 KineticJS 源代码的包含（绝望的东西），等待用户按钮单击以创建 KineticJS 阶段，而不是在“设备就绪”事件上执行它（只是为了加倍确定一切都准备好了），但没有任何区别。

这是我在 kinetic-v4.0.0.js 中的调试语句的一个示例（以防万一我在做一些愚蠢的事情）：

```
Kinetic.Stage = Kinetic.Container.extend({
    init: function(config) {
        console.log("In Kinetic.Stage.init().");            //<<<<<< Debug
        if (myDbg) alert("In Kinetic.Stage.init().");       //<<<<<< Debug
        .
        .
        .
        . 
```

我的 index.html 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Basic Rect</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=0.75, maximum-scale=1, minimum-scale=1, width=device-width;" />
        <script src="../../js/kinetic-v4.0.0.js"></script>
        <script type="text/javascript" src="cordova-2.0.0.js"></script>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <script>
            document.addEventListener("deviceready", onDeviceReady, false);

            function onDeviceReady() {
                console.log("In onDeviceReady().");
                //alert("In onDeviceReady().");

                var stage = new Kinetic.Stage({
                    container: "container",
                    width: 578,
                    height: 200
                });

                console.log("onDeviceReady(): created stage.");
                //alert("onDeviceReady(): created stage.");

                var layer = new Kinetic.Layer();

                var rect = new Kinetic.Rect({
                    x: 239,
                    y: 75,
                    width: 100,
                    height: 50,
                    fill: "#00D2FF",
                    stroke: "black",
                    strokeWidth: 4
                });

                layer.add(rect);
                stage.add(layer);

                console.log("Finishing onDeviceReady().");
                //alert("Finishing onDeviceReady().");

            }; // onDeviceReady() function handler
        </script>
    </head>

    <body>
        <div id="container">
        </div>
    </body>

</html> 
```

从上面的代码可以看出，“在 onDeviceReady() 中”。应该在创建 KineticJS 阶段之前打印到 Xcode 控制台面板，然后是“onDeviceReady(): created stage”。应在舞台创建后立即打印。但是，只有“在 onDeviceReady() 中”。被打印。

这些是 Xcode 控制台面板消息：

```
2012-08-28 16:58:05.384 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] Multi-tasking -> Device: YES, App: YES
2012-08-28 16:58:05.577 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] PluginResult:toJSONString - {"status":1,"message":"wifi","keepCallback":false}
2012-08-28 16:58:05.578 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] PluginResult toSuccessCallbackString: cordova.callbackSuccess('NetworkStatus0',{"status":1,"message":"wifi","keepCallback":false});
2012-08-28 16:58:05.579 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] PluginResult:toJSONString - {"status":1,"message":{"name":"iPhone Simulator","uuid":"0000-0000-0000-0000-0000","platform":"iPhone Simulator","version":"5.1","cordova":"2.0.0"},"keepCallback":false}
2012-08-28 16:58:05.580 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] PluginResult toSuccessCallbackString: cordova.callbackSuccess('Device1',{"status":1,"message":{"name":"iPhone Simulator","uuid":"5EFBB116-CF1E-4E47-9259-6092C5F7C4F6","platform":"iPhone Simulator","version":"5.1","cordova":"2.0.0"},"keepCallback":false});
2012-08-28 16:58:05.584 misc35_basic_kinetic_rect_phonegap_prj[92196:13403] [INFO] In onDeviceReady(). 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:03:22.787

的确，我是愚蠢的。

问题在于，在 index.html 文件中，我从 Xcode 项目区域外部拉入了 kinetic-v4.0.0.js 文件，将其置于 www 目录或子目录中。

当然，Xcode 对此事的无线电沉默并没有帮助。

# postgresql - 在 CF Administrator 中管理证书

> ID：12163717
> 
> 赞同：1
> 
> 时间：2012-08-28T16:35:47.460
> 
> 标签：postgresql, coldfusion, ssl-certificate, coldfusion-8, cfadmin

我正在使用 keytool 来导入和管理证书。但是，在验证我正在使用的需要 x.509 证书的数据源时，我需要测试错误消息并没有帮助：

**org.postgresql.util.PSQLException：连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。**

我记得看到 CF Administrator 的一些插件页面允许您从浏览器上传和管理证书，但我找不到任何东西。它甚至是 Adob​​e 创建的，还是第三方的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:53:46.630

我看起来您的 JDBC 连接测试从未达到建立 TCP/IP 连接的程度，更不用说在 SSL 握手期间协商 X.509 客户端证书了。假设您引用的错误消息来自您为测试证书而运行的测试，即；这个问题并不完全清楚。

检查以确保 PostgreSQL 确实在您指定的主机上运行并侦听正确的 TCP/IP 端口（默认为 5432）。您还必须确保已[为 X.509 客户端证书身份验证正确配置](http://www.postgresql.org/docs/current/static/ssl-tcp.html)它，但我想如果您尝试针对它进行测试，您已经做到了。

顺便说一句，旧版本的 Pg 服务器有一个错误，当您的密钥库中有多个私钥时，会导致 PgJDBC 无法协商正确的客户端证书。我已经返回 git 日志以找到修复此问题的提交[c3bf3bf2aa0998876fd219fbfcc771fb83594539](http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=c3bf3bf2aa0998876fd219fbfcc771fb83594539)。`git tag --contains c3bf3bf2aa0998876fd219fbfcc771fb83594539`确认该修复程序首次出现在 9.0 中。

# c - 带有多个参数的 shellexecuteEx

> ID：12163718
> 
> 赞同：-1
> 
> 时间：2012-08-28T16:35:48.223
> 
> 标签：c, windows, winapi, sdk

我想打电话`dpinst.exe /u .\\foldername\\foldername\\inffile.inf \d`使用`shellexecuteEX`. 这个怎么做。抱歉，我对多个参数感到困惑。我尝试了下面的代码，但它不起作用。

```
hExecInfo.lpParameters = TEXT ("/u .\\dist\\Driver\\inffile.inf /d");
ShExecInfo.lpFile = TEXT (".\\dist\\dpinstx86.exe"); 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:41:34.723

投稿的遗漏是[`cbSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759784%28v=vs.85%29.aspx)会员的设定：

```
shExecInfo.cbSize = sizeof(shExecInfo); 
```

`struct`这是必需的（在接受s 的其他 WINAPI 函数中很常见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T00:04:40.133

执行 .exe 文件时，您确实应该使用`CreateProcess()`而不是`ShellExecute/Ex()`，例如：

```
STARTUPINFO si = {sizeof(STARTUPINFO), 0};
PROCESS_INFORMATION pi = {0};

TCHAR szCmdLine[] = TEXT(".\\dist\\dpinstx86.exe /u .\\foldername\\foldername\\inffile.inf \d");

if (CreateProcess(NULL, szCmdLine, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi))
{
    CloseHandle(pi.hThread);
    CloseHandle(pi.hProcess);
} 
```

# c++ - C++ 在 boost::mpl::vector 中为每个类添加好友

> ID：12163721
> 
> 赞同：4
> 
> 时间：2012-08-28T16:36:01.343
> 
> 标签：c++, boost

如何在 boost::mpl::vector 中的每个班级都有一个班级朋友？即，扩展为：

```
template <typename mpl_vector>
class A {
    friend class mpl_vector[0];
    friend class mpl_vector[1];
    ...
    friend class mpl_vector[n];
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:36:37.187

正如 Andres 所建议的那样，使用 boost 预处理器来做这件事是可行的。

我试了一下，效果不好，编译效率低。它也仅限于达到 BOOST_MPL_LIMIT_VECTOR_SIZE。如果他的方法有效，那么它可能会更干净一些。

类A.h：

```
#if BOOST_PP_IS_ITERATING
friend get_elem<mpl_vector, BOOST_PP_ITERATION()>::type;
#else
#ifndef SOME_INCLUSION_GUARD_H
#define SOME_INCLUSION_GUARD_H

#include <boost/preprocessor/iteration/iterate.hpp>
#include <boost/mpl/vector.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/at.hpp>
#include <boost/mpl/size.hpp>

class Dummy {};
template <int Exists> struct get_elem_i {
    template <typename V, int N> struct get {
        //typedef Dummy type;
        typedef typename boost::mpl::at< V, boost::mpl::int_<N> >::type type;
    };
};
template <> struct get_elem_i<0> {
    template <typename V, int N> struct get {
        typedef Dummy type;
    };
};

template <typename V, int N> struct get_elem {
    typedef typename boost::mpl::size<V>::type size;
    typedef get_elem_i<N < size::value> elem;
    typedef typename elem::get<V, N>::type type;
    //typedef Dummy type;
};

template <typename mpl_vector>
class A {

#define BOOST_PP_ITERATION_PARAMS_1 (3, (0, BOOST_MPL_LIMIT_VECTOR_SIZE, "classA.h"))
??=include BOOST_PP_ITERATE()

private:
    int test_;
};

#endif // SOME_INCLUSION_GUARD_H
#endif 
```

该文件包括自身，因此请确保与位中的文件具有相同的名称`BOOST_PP_ITERATION_PARAMS_1`。

此外，此代码还将使类“Dummy”成为“A”的朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:14:49.290

我认为您需要使用 Boost.Preprocessor 或[Pump](https://github.com/google/googletest/blob/master/googletest/docs/PumpManual.md)之类的东西，将您的模板专门用于不同大小的 MPL 向量。或者只是手动专门化它。

您必须通过这种方式专门化您的模板：

```
template< typename mpl_vector, std::size_t size = boost::mpl::size< mpl_vector >::type::value >
class A;

template< typename mpl_vector >
class A< mpl_vector, 0 >
{
};

template< typename mpl_vector >
class A< mpl_vector, 1 >
{
    friend class boost::mpl::at< mpl_vector, boost::mpl::int_< 0 > >::type;
}; 
```

# php - 使用 Tank Auth 加载 login_form 视图会导致 PHP 错误

> ID：12163723
> 
> 赞同：0
> 
> 时间：2012-08-28T16:36:05.457
> 
> 标签：php, codeigniter, tankauth

我正在尝试将 Tank_auth 视图中的 login_form 添加到我的 HTML 模板中。

当我这样做时，它会返回一些关于缺少变量的错误，我不确定我做错了什么。

我的控制器：

```
public function index()
{
    $topbar['account'] = $this->load->view('auth/login_form');
    $data['topbar'] = $topbar;
    $this->load->view('main_template', $data);
} 
```

主模板如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
    <head><?php echo $template['head'] ?></head>
<body>
    <div id="topbar"><?php echo $topbar['account'] ?></div>
</body>
</html> 
```

我在加载页面时收到的错误如下：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义变量：show_captcha
> 
> 文件名：auth/login_form.php
> 
> 行号：47

此外，我收到以下相同的错误：

`Undefined variable: login_by_username`

继承人登录表单（未触及...默认 tank_auth 表单）

```
<?php
$login = array(
    'name'  => 'login',
    'id'    => 'login',
    'value' => set_value('login'),
    'maxlength' => 80,
    'size'  => 30,
);
if ($login_by_username AND $login_by_email) {
    $login_label = 'Email or login';
} else if ($login_by_username) {
    $login_label = 'Login';
} else {
    $login_label = 'Email';
}
$password = array(
    'name'  => 'password',
    'id'    => 'password',
    'size'  => 30,
);
$remember = array(
    'name'  => 'remember',
    'id'    => 'remember',
    'value' => 1,
    'checked'   => set_value('remember'),
    'style' => 'margin:0;padding:0',
);
$captcha = array(
    'name'  => 'captcha',
    'id'    => 'captcha',
    'maxlength' => 8,
);
?>
<?php echo form_open($this->uri->uri_string()); ?>
<table>
    <tr>
        <td><?php echo form_label($login_label, $login['id']); ?></td>
        <td><?php echo form_input($login); ?></td>
        <td style="color: red;"><?php echo form_error($login['name']); ?><?php echo isset($errors[$login['name']])?$errors[$login['name']]:''; ?></td>
    </tr>
    <tr>
        <td><?php echo form_label('Password', $password['id']); ?></td>
        <td><?php echo form_password($password); ?></td>
        <td style="color: red;"><?php echo form_error($password['name']); ?><?php echo isset($errors[$password['name']])?$errors[$password['name']]:''; ?></td>
    </tr>

    <?php if ($show_captcha) {
        if ($use_recaptcha) { ?>
    <tr>
        <td colspan="2">
            <div id="recaptcha_image"></div>
        </td>
        <td>
            <a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a>
            <div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div>
            <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')">Get an image CAPTCHA</a></div>
        </td>
    </tr>
    <tr>
        <td>
            <div class="recaptcha_only_if_image">Enter the words above</div>
            <div class="recaptcha_only_if_audio">Enter the numbers you hear</div>
        </td>
        <td><input type="text" id="recaptcha_response_field" name="recaptcha_response_field" /></td>
        <td style="color: red;"><?php echo form_error('recaptcha_response_field'); ?></td>
        <?php echo $recaptcha_html; ?>
    </tr>
    <?php } else { ?>
    <tr>
        <td colspan="3">
            <p>Enter the code exactly as it appears:</p>
            <?php echo $captcha_html; ?>
        </td>
    </tr>
    <tr>
        <td><?php echo form_label('Confirmation Code', $captcha['id']); ?></td>
        <td><?php echo form_input($captcha); ?></td>
        <td style="color: red;"><?php echo form_error($captcha['name']); ?></td>
    </tr>
    <?php }
    } ?>

    <tr>
        <td colspan="3">
            <?php echo form_checkbox($remember); ?>
            <?php echo form_label('Remember me', $remember['id']); ?>
            <?php echo anchor('/auth/forgot_password/', 'Forgot password'); ?>
            <?php if ($this->config->item('allow_registration', 'tank_auth')) echo anchor('/auth/register/', 'Register'); ?>
        </td>
    </tr>
</table>
<?php echo form_submit('submit', 'Let me in'); ?>
<?php echo form_close(); ?> 
```

希望有人熟悉 Tank Auth 并可以轻松解决此问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:31:58.427

首先请检查身份验证控制器他们如何使用登录并将 show_captcha 传递给您 login_form 视图，您没有将 show_captcha 传递给 login_view

```
 $login_data['login_by_username'] = ($this->config->item('login_by_username','tank_auth') AND $this->config->item('use_username','tank_auth'));
    $login_data['login_by_email'] = $this->config->item('login_by_email', 'tank_auth');

    $login_data['show_captcha']  = FALSE

    $topbar['account'] = $this->load->view('auth/login_form',$login_data);
    $data['topbar'] = $topbar;
    $this->load->view('main_template', $data); 
```

它不会显示验证码，但我建议您遵循thank auth's auth controller的登录方法

# sql-server - QueryTables.Add 和 SQL Server 2008R2 Express 上的 Excel VBA 错误

> ID：12163735
> 
> 赞同：1
> 
> 时间：2012-08-28T16:36:44.853
> 
> 标签：sql-server, excel, oledb, vba

我正在将 Excel 报表从访问 SQLAnywhere 数据库中的数据转换为 SQL Server 2008R2 Express 数据库，并且在运行它时不断出现错误。用户输入一些他们想要比较销售动态的项目，然后按下按钮来运行宏。宏获取项目，创建 SQL 查询字符串，获取结果并显示它们。

这与旧数据库完美配合。现在使用 SQL Server，如果我运行宏，我会收到一个无用的“400”错误。如果我单步执行代码，则在“With ActiveSheets.QueryTables.Add(...)”段的末尾会抛出“运行时错误'1004'”。我猜我的语法有些东西不受 SQL Server 或 OLE DB 连接的支持，但如果我能看到它是什么，那该死的。

我已经完成了生成的 SQL 查询的 Debug.Print，如果我将它复制/粘贴到 SQL Server Studio 中的查询窗口，它可以完美运行。如果我将查询替换为“从 DEPT_TAB 中选择 *”之类的简单内容，则它可以在宏中正常运行。创建一个表也可以正常运行，但是添加一个 INSERT 语句的一些事情会把它扔掉。

这是宏代码：

```
Sub SalesHistory()
' Runs SQL from sheet and places into report
' declare method variables
Dim sSQL As String
Dim sConn As String
Dim N1 As Integer
Dim LR As Integer
' create connection string for SQL Server Express
sConn = "OLEDB;Provider=SQLOLEDB;" & _
    "Data Source=192.168.0.29\SQLEXPRESS;" & _
    "Initial Catalog=STORESQL;" & _
    "User ID=xxxxx;Password=xxxxx;Trusted_Connection=False;"

' stop screen updating while running
Application.ScreenUpdating = False

' select SQL sheet and get number of rows in column A
Sheets("SQL").Select
LR = Range("A" & Rows.Count).End(xlUp).Row

' loop through column A and create SQL command string
For N1 = 1 To LR
sSQL = sSQL & " " & Range("A" & N1).Value
Next N1

' test print sSQL
Debug.Print sSQL

' select Main sheet, clear report, and activate for new results
Sheets("Main").Select
Range("$A$2:$D$51").ClearContents
Sheets("Main").Activate

' use QueryTables.Add() to get data from server
With ActiveSheet.QueryTables.Add(Connection:=sConn, Destination:=Range("A2))
    .CommandText = sSQL
    .Name = "Movement"
    .FieldNames = False
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlOverwriteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
    .Refresh BackgroundQuery:=False
End With  
' HERE IS WHERE THE ERROR IS THROWN

' restart ScreenUpdating
Application.ScreenUpdating = True

End Sub 
```

这是工作表中的查询：

```
-- declare variables
DECLARE @StartDate DATE;
DECLARE @Location CHAR(3);
SET @StartDate = '07/29/2012';
SET @Location = 'PAL';
-- create temp table for holding results
CREATE TABLE #tmp_ItemMove (
UPC CHAR(13) NULL,
Brand CHAR(32) NULL,
Descriptor CHAR(32) NULL,
Sales INT NULL);
-- insert zero values for each item so that they always show up in final report
INSERT INTO #tmp_ItemMove 
SELECT OBJ.F01, OBJ.F155, OBJ.F29, 0
FROM OBJ_TAB OBJ
WHERE OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '';
-- insert sales information into temp table
INSERT INTO #tmp_ItemMove
SELECT OBJ.F01, OBJ.F155, OBJ.F29, 
CASE WHEN TRS.F67=0 THEN TRS.F64 ELSE TRS.F67 END
FROM
RPT_ITM_D TRS JOIN OBJ_TAB OBJ ON TRS.F01=OBJ.F01
JOIN TLZ_TAB TLZ ON TRS.F1034=TLZ.F1034
JOIN LNK_TAB LNK ON TRS.F1056=LNK.F1056 AND TRS.F1057=LNK.F1057 AND LNK.F1000=@Location
WHERE (OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '' OR
OBJ.F01 LIKE '') AND
TRS.F254 >= @StartDate AND
TRS.F1034 BETWEEN 3 AND 4;
-- get final report
-- sum sales history for each item and display
SELECT MAX(UPC),
MAX(Brand),
MAX(Descriptor),
SUM(Sales)
FROM #tmp_ItemMove
GROUP BY UPC, Brand, Descriptor
ORDER BY SUM(Sales) DESC, Brand, UPC;
DROP TABLE #tmp_ItemMove; 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:04:31.413

您是否尝试在应用程序中运行查询时运行跟踪？运行将显示所有错误和异常的跟踪。这应该向您显示确切的故障点。如果有很多交易正在进行，您将需要应用一些过滤器。这可能会有所帮助：[http](http://www.bbdevnetwork.com/blogs/debugging-t-sql-and-sql-profiler/) ://www.bbdevnetwork.com/blogs/debugging-t-sql-and-sql-profiler/但请确保打开错误。

这些表是否具有适当的权限？如果您将其粘贴到 SSMS 窗口中，您可能在该窗口中以 dbo 或 sa 身份运行，这将允许它在 excel 中的用户可能具有受限权限时运行。

你真的应该把那个查询变成一个存储过程并执行它，因为运行这样一个查询可能有几个失败点，而且许多驱动程序不会为你提供任何有用的错误信息。

# concurrency - 并发ml如何导入库

> ID：12163738
> 
> 赞同：0
> 
> 时间：2012-08-28T16:36:56.963
> 
> 标签：concurrency, smlnj, ml

我已经下载了新泽西标准机器学习 (SML/NJ)，现在我必须使用并发机器学习库 (CML)。如何导入（使用）库？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:16:39.147

您可能需要使用`sources.cm`类似这样的 CM 文件（例如 ）：

```
Group is
    $cml/cml-lib.cm
    $/basis.cm
    your-file.sml
    ... 
```

然后`sml sources.cm`应该正确加载 CML 并使其可用于您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:32:43.633

如果您只想在提示符下在 SML/NJ 内部进行操作，可以执行以下操作以使 CML 结构可用：

```
- CM.make "$cml/cml.cm";
[library $cml/cml.cm is stable]
[library $cml/cml-internal.cm is stable]
[library $cml/core-cml.cm is stable]
[New bindings added.]
val it = true : bool
- 
```

# iphone - UIDocument 打不开

> ID：12163743
> 
> 赞同：1
> 
> 时间：2012-08-28T16:37:28.297
> 
> 标签：iphone, ios, core-data, objective-c-blocks

使用 a`UIDocument`时，我的完成处理程序`openWithCompletionHandler:`永远不会被调用，并且文档保持关闭状态。我不确定我做错了什么；一切看起来都很好，并且与我找到的示例代码相匹配。这就是我正在做的事情：

```
+ (NSString *)documentsDirectory {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
}

+ (NSURL *)documentsURL {
    NSString *documentsDirectory = [XKCDParser documentsDirectory];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"documentModel"];
    return [NSURL fileURLWithPath:filePath];
}

- (void)loadComicsAfterNumber:(NSInteger)comicNumber {
    if (comicNumber < 0) {
        if ([self.delegate respondsToSelector:@selector(errorLoadingComics:)])
            [self.delegate errorLoadingComics:[NSError errorWithDomain:@"Comic number cannot be less than 0" code:2 userInfo:nil]];
        return;
    }

    self.document = [[UIManagedDocument alloc] initWithFileURL:[XKCDParser documentsURL]];
    NSLog(@"document: %@", document);
    if ([[NSFileManager defaultManager] fileExistsAtPath:[[XKCDParser documentsURL] path]]) {
        NSLog(@"file exists at path");

        [document openWithCompletionHandler:^(BOOL success) {
            NSLog(@"document: %@", document);
            if (success)
                NSLog(@"Document opened sucessfully");
            if (!success)
                NSLog(@"Document did not open successfully");
        }];
        NSLog(@"2 document: %@", document);
    }
    else {
        [document saveToURL:[XKCDParser documentsURL] forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            if (!success) {
                NSLog(@"Could not create document at path: %@", [[XKCDParser documentsURL] path]);
                if ([self.delegate respondsToSelector:@selector(errorLoadingComics:)])
                    [self.delegate errorLoadingComics:[NSError errorWithDomain:[NSString stringWithFormat:@"Could not create document at path: %@", [[XKCDParser documentsURL] path]] code:4 userInfo:nil]];
            }
            else
                [self downloadComicsAfterNumber:comicNumber];
        }];
    }
    NSLog(@"3 document: %@", document);
} 
```

**控制台输出**

```
2012-08-28 11:59:09.755 XKCD[12194:c07] document: <UIManagedDocument: 0xd2f90f0> fileURL: file://localhost/Users/User/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/CE8A9DC6-FB09-4426-BDCD-863F157FFA04/Documents/documentModel/ documentState: [Closed]
2012-08-28 11:59:09.757 XKCD[12194:c07] file exists at path
2012-08-28 11:59:09.757 XKCD[12194:c07] 2 document: <UIManagedDocument: 0xd2f90f0> fileURL: file://localhost/Users/User/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/CE8A9DC6-FB09-4426-BDCD-863F157FFA04/Documents/documentModel/ documentState: [Closed]
2012-08-28 11:59:09.761 XKCD[12194:c07] 3 document: <UIManagedDocument: 0xd2f90f0> fileURL: file://localhost/Users/User/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/CE8A9DC6-FB09-4426-BDCD-863F157FFA04/Documents/documentModel/ documentState: [Closed] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:13:07.803

尝试为您的文件指定一个带扩展名的名称。我通常使用.db，但任何事情都可以。现在系统可能会认为你正在尝试打开一个目录，而实际上你想要打开一个包（由 Core Data 创建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T18:25:20.633

重要的是在您的 .plist (LSTypeIsPackage) 中将“文档是一个包或捆绑包”设置为 YES，如 iOS 的基于文档的应用程序编程指南中 [所述声明文档类型](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/DocumentImplPreflight/DocumentImplPreflight.html#//apple_ref/doc/uid/TP40011149-CH3-SW12 "声明文档类型")部分。

# mysql - 独特的电子邮件查找方法

> ID：12163746
> 
> 赞同：0
> 
> 时间：2012-08-28T16:37:42.290
> 
> 标签：mysql, database, scalability

**解决方案！** 我按照@pilcrow 的建议做了。查找 mysql_error_num:1062 （唯一电子邮件），如果是则返回错误。

**描述：**

我正在构建一个应用程序，它需要许多不同的用户和可能的公司通过注册表单进行注册。我想确保个人输入的电子邮件是唯一的，因为公司可能会`info@company.com`向许多用户发出通用电子邮件。

我希望能够检查数据库以查看电子邮件是否存在。

**问题：**

我已经知道如何通过 完成此操作`Javascript`，`ajax`但`PHP`我担心如果我有许多（数千）用户，查询将永远持续下去。特别是如果我决定在表单上使用`keypress`事件而不是`blur`事件。我可能错了，但我看不出一个简单`WHERE email = $email`的可扩展性很强。

**问题**

有没有办法可以设置我的代码或数据库（mysql）来加快查询速度？我正在考虑为电子邮件设置一个单独的表格，但认为这行不通。

谢谢！

**ps**我对数据库/服务器技术非常了解，所以`PHP`+ `MYSQL`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:41:14.907

您的问题对于您将在数据库中存储的内容相当模糊。单独的电子邮件表格有什么缺点？

您真正需要的不仅仅是一张表格，而是电子邮件索引。基础表可能只是电子邮件，也可能包含其他用户信息。但是，如果您执行如下查询：

```
 select email
 from t
 where email = <your email to check>
 limit 1 
```

然后查询将有效地使用索引来进行匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:58:59.607

你问

> *有没有办法可以设置我的代码或数据库（mysql）来加快查询速度？*

是的，完全省略查询。

对存储在后端数据库中的电子邮件地址设置一个 UNIQUE 约束，然后准备在新帐户的 INSERTion 由于重复的电子邮件地址而失败时捕获[ER_DUP_UNIQUE 。](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html#error_er_dup_unique)

这种方法可以防止重复并在选择重复时警告新用户。

I very much doubt that you need to look up email addresses as they are being typed (*"...if I decide to use a `keypress` event..."*). If you really do want to check that the address exists before INSERTing, you'll also need a transaction to prevent [TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use) hilarity. However, since the UNIQUE constraint is your simplest but most effective defense against duplicates, just implement that.

# jquery - 如何编写点的 x 和 y 坐标图？

> ID：12163752
> 
> 赞同：0
> 
> 时间：2012-08-28T16:38:03.383
> 
> 标签：jquery, map, coordinates

我试图找到一个可以显示 x 和 y 坐标图的工具或 jquery 插件，有人知道可以修复它的东西吗？

我喜欢让它像谷歌地图一样具有平移和缩放功能，但这只是游戏地图上地图上点的 x 和 y 坐标。

我愿意接受任何建议，但 jQuery、html 和 css 是我所希望的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:48:53.463

您可以为 Google Maps 提供自己的地图（[UESP 是一个很好的例子](http://www.uesp.net/maps/obmap/obmap.shtml)），这样您将获得一个强大且经过良好测试的 API 来使用。UESP 还有[一篇文章描述了他们的地图是如何工作的](http://www.uesp.net/wiki/UESPWiki%3aOblivion_Map_Design)。这有点过时了，因为他们使用 Google Maps V2，但主要概念是相同的，所以你不应该遇到任何严重的问题将它移植到 V3（或者你可以继续使用 V2）。

# windows-phone-7 - 你需要windows phone 来开发windows 应用程序吗？

> ID：12163754
> 
> 赞同：0
> 
> 时间：2012-08-28T16:38:29.767
> 
> 标签：windows-phone-7

> **可能重复：**
> [您真的需要手机来开发 Windows Phone 7 应用程序吗？](https://stackoverflow.com/questions/3808491/do-you-actually-need-a-phone-to-develop-windows-phone-7-apps)

我是否需要 windows phone 来开发应用程序并对其进行测试，或者模拟器就像 android 一样足够？我知道这个问题之前已经问过了，[在这里](https://stackoverflow.com/questions/3808491/do-you-actually-need-a-phone-to-develop-windows-phone-7-apps.)

但由于那是很久以前的事了，我不确定 MS 是否改变了要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:15:55.950

基本上，在应用程序的开发过程中您不需要 Windows Phone 设备。您可以在模拟器中开发和测试。

但最后，如果您不在真实设备中进行测试，您的应用程序将不得不面临一些性能问题。逻辑很简单，模拟器运行在具有更多系统资源的桌面操作系统之上，而实际设备的资源有限，如电池电量、有限的 RAM 等。因此在真实条件下测试应用程序非常重要。

如果您现在买不起 WP 设备，您可以将您的应用提交到 Microsoft Marketplace 进行[Beta 测试](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%28v=vs.105%29.aspx)。然后，Microsoft 将为您提供一个链接，您可以与任何拥有设备的人共享该链接，并要求他们为您进行测试。

# javascript - 这个函数有什么作用以及如何在没有'with'语句的情况下重写 - Javascript

> ID：12163755
> 
> 赞同：0
> 
> 时间：2012-08-28T16:38:30.517
> 
> 标签：javascript, with-statement

Javascript：

```
function ValidDate(y, m, d)
{ // m = 0..11 ; y m d integers, y!=0
  with (new Date(y, m, d))
    return (getMonth()==m && getDate()==d); /* was y, m */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:40:11.230

简单的：

```
function ValidDate(y, m, d) {
  var date = new Date(y, m, d);
  return date.getMonth() == m && date.getDate() == d;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:40:47.477

`with`使其`this`范围是中的语句，`with`因此您不必做任何事情`.functionName(...)`

你可以做什么：

```
function ValidDate(y, m, d)
{ // m = 0..11 ; y m d integers, y!=0
    var date = new Date(y, m, d);
    return (date.getMonth()==m && date.getDate()==d); /* was y, m */
} 
```

# java - 我如何使用 Ajax 和 JSF 登录

> ID：12163756
> 
> 赞同：-2
> 
> 时间：2012-08-28T16:38:33.833
> 
> 标签：java, ajax, jsf, primefaces

如果我的帐户密码错误，或者没有此帐户，如何使用 Ajax 验证我的帐户密码，登录页面下方会显示一条消息。

索引.html

```
 <h:body>
    <p:panel header="Login" id="logic" style="width: 410px">
        <h:form id="form01">
            <p:panelGrid id ="pan01" columns="2">
                <f:facet name="header">
                </f:facet>
                <h:outputLabel   value="name : " />
                <p:inputText id="firstname" value="#{logic.name}" label="Firstname" required="true" requiredMessage="Must input your name" />
                <h:outputLabel  value="pass : " />
                <p:password id="surname"  value="#{logic.pass}" required="true"  label="Surname" requiredMessage="Must input your pass"/>
                <h:outputText  value="Login"/>
                <h:commandButton  value="Login" action="#{logic.register()}" style="height: 30px ; width: 210px">
                    <f:ajax execute="@form" render="123"/>
                </h:commandButton>

            </p:panelGrid>
            <p/>
            <p:message for="firstname" id="NameMessage" display="text"/>
            <p/>
            <p:message for="surname" id="PassMessage" display="text"/>
        </h:form>
    </p:panel>
</h:body> 
```

Java 代码

```
public String register() {
        Query q = e.createNamedQuery("BnUser.findByUserUsername");
        q.setParameter("userUsername", getName());
        List resultList = q.getResultList();
        BnUser result = (BnUser) resultList.get(0);
        permission = result.getBnMembershipList().iterator().next().getDbid();
        System.out.println("login=======" + permission);
        dbname = result.getUserUsername();
        dbpass = result.getUserPassword();

        if (dbpass.equals(getPass()) && (getPermission() == 6)) {
           return "/Administrator//index";
        } else if (dbpass.equals(getPass()) && (getPermission() == 5)) {
           return "/index";
        } else {
           return null;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:02:34.970

您的代码的结果是什么，您是否看到任何错误或异常。

这是一个示例： http: [//www.primefaces.org/showcase/ui/dialogLogin.jsf](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)

试试看，让我知道结果。

# php - PHP/Jquery：在函数中使用被点击元素的值

> ID：12163758
> 
> 赞同：1
> 
> 时间：2012-08-28T16:38:39.190
> 
> 标签：php, jquery

我有标签类的元素

```
<li><a><span class='label'>$element</span></a></li> 
```

我希望能够运行`loadStuff`onclick。如何获取单击元素的值以传递，例如：

```
$(".label").click(loadStuff(valueOfClickedElement)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:40:15.193

当您说价值时，我假设您的意思是跨度的文本..

如果是这样，那么试试下面，

```
$(".label").click(function () {
   loadStuff($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:39:48.107

```
$(".label").click(function() { 
    loadStuff($(this).text()); 
}); 
```

# vb.net - VB.Net linq 通过表达式树添加 GroupBy

> ID：12163760
> 
> 赞同：0
> 
> 时间：2012-08-28T16:38:42.153
> 
> 标签：vb.net, linq, group-by, expression-trees

我正在寻找将 GroupBy 动态添加到 Linq 表的正确语法，因为可以在用户界面中更改组参数。

基本上我有一个 Linq.EntitySet 我想为可变参数添加一个 GroupBy

日、周、月、年

而不是像写 4 个查询

```
data.View.GroupBy(Function(x) x.Moment.Date).OrderBy(Function(x) x.Key).Select(Function(x) New With {.Date = x.Key, .Count = x.Count()})

data.View.GroupBy(Function(x) x.Moment.Week).OrderBy(Function(x) x.Key).Select(Function(x) New With {.Date = x.Key, .Count = x.Count()})

data.View.GroupBy(Function(x) x.Moment.Month).OrderBy(Function(x) x.Key).Select(Function(x) New With {.Date = x.Key, .Count = x.Count()})

data.View.GroupBy(Function(x) x.Moment.Year).OrderBy(Function(x) x.Key).Select(Function(x) New With {.Date = x.Key, .Count = x.Count()}) 
```

我喜欢通过表达式树动态添加组，还是有更简单的方法？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:24:56.550

令人惊讶的是，它似乎比我想象的要简单！

```
 Private Function bar(x As Date) As Object
        Select Case ddlStatRange.SelectedValue
            Case 1
                Return x.Month
            Case 2
                Return x.Month
            Case 3
                Return x.Year
            Case Else
                Return x.Date
        End Select
    End Function

    Dim foo = data.View.GroupBy(Function(x) bar(x.Moment)).OrderBy(Function(x) x.Key).Select(Function(x) New With {.Date = x.Key, .Count = x.Count()}) 
```

无论如何，如果有人有更好的主意：D

# sql - 使用 case 处理 SQL 2 sum 1 查询

> ID：12163764
> 
> 赞同：1
> 
> 时间：2012-08-28T16:38:45.037
> 
> 标签：sql

嗨，我可能会使我的代码过于复杂，因此正在寻找更好的方法。

我有一个发票表，我正在比较 2 个日期范围我正在寻找一个简单的 sql 语句，它将查看日期在范围 1 中添加到 ordertotal1 否则如果在日期范围 2 中添加到 ordertotal2

这是我的尝试

```
 SELECT     CUST_CODE,

    CASE
        WHEN  ORDER_DATE >= CONVERT(DATETIME, '2011-01-01 00:00:00', 102) AND ORDER_DATE <= CONVERT(DATETIME, '2011-07-31 23:59:59', 102) THEN  SUM(INV_AMOUNT) AS OrderTotal, SUM(PAID_AMT) AS paidTotal
WHEN  ORDER_DATE >= CONVERT(DATETIME, '2012-01-01 00:00:00', 102) AND ORDER_DATE <= CONVERT(DATETIME, '2012-07-31 23:59:59', 102)  THEN SUM(INV_AMOUNT) AS OrderTotal2, SUM(PAID_AMT) AS paidTotal2
    END
    FROM         INVOICES
    WHERE (STATUS = 9)
    GROUP BY CUST_CODE 
```

当然这确实是错误的并且会引发很多错误，我想我注定要在我的 php 中运行几个查询来实现它，但我确定我记得过去做过类似上面的事情。

仅供参考：在 Windows 的 apache 2.2 上运行 php 5 Mssql 2000（不是选择）。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:44:16.703

您的`CASE`陈述似乎缺少`END`：

```
SELECT CUST_CODE,
    CASE
        WHEN  ORDER_DATE >= CONVERT(DATETIME, '2011-01-01 00:00:00', 102) 
            AND ORDER_DATE <= CONVERT(DATETIME, '2011-07-31 23:59:59', 102) 
        THEN  SUM(INV_AMOUNT) END AS OrderTotal, 
        SUM(PAID_AMT) AS paidTotal,
    CASE
        WHEN  ORDER_DATE >= CONVERT(DATETIME, '2012-01-01 00:00:00', 102) 
            AND ORDER_DATE <= CONVERT(DATETIME, '2012-07-31 23:59:59', 102)  
        THEN SUM(INV_AMOUNT) END AS OrderTotal2 
    ---SUM(PAID_AMT) AS paidTotal2 not needed
FROM         INVOICES
WHERE (STATUS = 9)
GROUP BY CUST_CODE 
```

或者更好：

```
SELECT CUST_CODE,
    SUM(
        CASE
        WHEN  ORDER_DATE >= CONVERT(DATETIME, '2011-01-01 00:00:00', 102) 
            AND ORDER_DATE <= CONVERT(DATETIME, '2011-07-31 23:59:59', 102) 
        THEN  INV_AMOUNT END) AS OrderTotal, 
        SUM(PAID_AMT) AS paidTotal,
    SUM(
        CASE
        WHEN  ORDER_DATE >= CONVERT(DATETIME, '2012-01-01 00:00:00', 102) 
            AND ORDER_DATE <= CONVERT(DATETIME, '2012-07-31 23:59:59', 102)  
        THEN INV_AMOUNT END ) AS OrderTotal2 
    ---SUM(PAID_AMT) AS paidTotal2 not needed
FROM         INVOICES
WHERE (STATUS = 9)
GROUP BY CUST_CODE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:59:02.540

ORDER_DATE 的数据类型到底是什么？你为什么不使用 CAST：

```
cast('2011-01-01 00:00:00' as DATETIME) 
```

无论如何，将其用作您的两个 CASE 子句：

```
case
    when ORDER_DATE between cast('2011-01-01 00:00:00' as datetime) and cast('2011-07-31 23:59:59' as datetime)
    then...
end 
```

其余的，您可以使用 bluefeet 的查询，因为它已被简化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:59:13.683

你不能在你的`CASE WHEN ... THEN THEN SUM(INV_AMOUNT) AS OrderTotal, SUM(PAID_AMT) AS paidTotal`

如果我很好地理解了您的问题，您需要一个将 INV_AMOUNT 拆分为两个值 OrderTotal 和 OrderTotal2 的解决方案。如果你想分别知道 2011 年和 2012 年的价值是多少，你需要这样的东西：

```
 SELECT CUST_CODE,
        SUM(CASE
            WHEN  ORDER_DATE >= CONVERT(DATETIME, '2011-01-01 00:00:00', 102) 
                AND ORDER_DATE <= CONVERT(DATETIME, '2011-07-31 23:59:59', 102) 
            THEN  INV_AMOUNT ELSE 0 END) AS OrderTotal, 
            SUM(PAID_AMT) AS paidTotal,
        SUM(CASE
            WHEN  ORDER_DATE >= CONVERT(DATETIME, '2012-01-01 00:00:00', 102) 
                AND ORDER_DATE <= CONVERT(DATETIME, '2012-07-31 23:59:59', 102)  
            THEN INV_AMOUNT ELSE 0 END) AS OrderTotal2, 
        SUM(PAID_AMT) AS paidTotal2
    FROM         INVOICES
    WHERE (STATUS = 9)
    GROUP BY CUST_CODE 
```

# node.js - 中间件不重定向

> ID：12163765
> 
> 赞同：0
> 
> 时间：2012-08-28T16:38:47.410
> 
> 标签：node.js, authentication, express, middleware

我正在编写一个简单的系统来控制用户的身份验证，只有注册用户才能访问该站点。如果您未通过身份验证，请将您重定向到登录页面。

很简单，我正在使用中间件来制作这个控件。

我的问题是，当重定向的条件有效时，这不会发生！

```
// Routes
module.exports = function(app) {
app.use(function(req, res, next) {
    console.log(req.url);

    if (typeof(res.session) == 'undefined' && req.url != '/users/login') {
        console.log('redirect');
        res.redirect('/users/login');
    } else {
        console.log('no redirect');
        next();
    }
});

app.get('/',                    routes.site.index);

app.all('/users/login',         routes.user.login);
}; 
```

显然，粗壮的控制台是：

```
/
redirect
/users/login
no redirect 
```

页面正在无限期加载......

有什么建议么？

谢谢！

PS：如果我拼错了，我很抱歉，谷歌帮助了我！

@ - - - - - - - - - - 编辑：

我选择使用 Passport 来管理 Auth。

我只有一个问题，我在一个单独的文件中运行我的应用程序的路由。

***应用程序.js***

```
// Auth
var passport = require('passport'), strategy = require('passport-local').Strategy;
passport.use(new strategy(function(username, password, done) {
var user = require('./db')('user');

user.findOne({username: username}, function(err, user) {
    if (err) return done(err);
    if (!user) return done(null, false);
    if (!user.validPassword(password)) return done(null, false);

    return done(null, user);
});
}));
passport.serializeUser(function(user, done) {
done(null, user.id);
});
passport.deserializeUser(function(id, done) {
var user = require('./db')('user');

user.findOne(id, function(err, user) {
    done(err, user);
});
});
// End Auth

require('./routes')(app, passport);

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

***路线/index.js***

```
// Routes
module.exports = function(app, passport) {
    app.get('/', passport.authenticate('local', {successRedirect: '/', failureRedirect: '/login' }), routes.site.index);

    app.all('/login', routes.user.login);
}; 
```

***路线/user.js***

```
exports.login = function(req, res, next) {
    switch (req.method) {
        default:
        case 'GET':
            res.render('user/login', {title: 'Login'});
        break;
        case 'POST':
            /*passport.authenticate('local', function(err, user, info) {
                res.json([user, info]);
            });
            */
        break;
    }
}; 
```

重定向到登录页面工作正常，但我会管理不同文件中的路由，因此我不禁维护变量**护照**以能够处理文件 user.js 中的回调控制。

想法？谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:55:07.647

如果您使用 Connect 的会话中间件，很可能每个请求都会有一个与之关联的会话。您需要检查会话中是否设置了用户 ID（或类似名称）以做出经过身份验证/未经身份验证的决定。

我也是[Passport](http://passportjs.org/)的开发人员，它与[connect-ensure-login](https://github.com/jaredhanson/connect-ensure-login)中间件一起工作以保护对经过身份验证的路由的访问。我建议您查看一下，因为它可以让您快速启动并运行身份验证系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:02:57.273

改为这样做：

`if (user.loggedin === undefined && req.url != '/users/login')`

我很确定 Express 会为每个请求者提供一个会话；登录与否。因此，您需要检查登录而不是会话。

# ruby-on-rails - Rails：同一模型的两个控制器

> ID：12163768
> 
> 赞同：2
> 
> 时间：2012-08-28T16:38:56.627
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我有一个模型用户和相应的用户控制器。由于项目的变化，用户模型的相同、精确的功能需要在 CentersController 中，当然只有 Centers 的附加功能。UsersController 保持原样。

设计问题是如何使用 UsersController 方法（更新、编辑、创建等）而不在 CentersController 中复制它们？例如，当用户在 Centers 视图中更新时，将调用 User 控制器的 Update 操作，但应将查看器重定向回 Centers 视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:41:31.290

这就是模块或“mixin”的用途。您将常用方法放在一个模块中，并将该模块包含在`UsersController`和`CentersController`中。

```
module Foo
  def bar
  end
end

class UsersController < ApplicationController
  include Foo
end

class CentersController < ApplicationController
  include Foo
end 
```

或者，将您的通用代码放入控制器中，并从该控制器继承：

```
class FooController < ApplicationController
  def bar
  end
end

class UsersController < FooController
end

class CentersController < FooController
end 
```

# java - snakeYaml 多次引用一个对象的同一个实例

> ID：12163769
> 
> 赞同：0
> 
> 时间：2012-08-28T16:39:01.920
> 
> 标签：java, yaml, snakeyaml

在列表中，我想多次引用同一个实例对象：

```
- text: Here is an object with some data that will allow an image to be generated
  image: &FirstIm
      imageType: ABC
      otherTypE: CB
- text: Later on, lets show you the same image again!
  image: *FirstIm 
```

我正在做的是使用提供的属性生成图像并将其缓存在图像对象中。由于具体实现，无法再次生成图片，所以想回溯一下图片对象的具体实例。

不幸的是，snakeYAML 将上述内容视为“哦，所以您想要另一个对象，但具有与 FirstIm 相同的属性”，因此当我检查第二个图像对象缓存时，其中没有任何内容。我需要的行为是“你又想要 FirstIm，好吧，我把它放在那里”。

有没有办法在不使用图像对象中的某种字符串来引用更高级别的缓存的情况下实现这一点？

希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:12:04.227

我认为您的代码中存在一些问题，或者我仍然不明白这个问题，因为您问题中的 yaml 通过测试就好了。

无法将代码放在评论中。所以就在这里。

```
import java.util.List
import java.util.Map
...
Yaml yaml = new Yaml();
List load = yaml.loadAs("- text: Here is an object with some data that will allow an image to be generated\n  image: &FirstIm\n    imageType: ABC\n    otherTypE: CB\n- text: Later on, lets show you the same image again!\n  image: *FirstIm", List.class);
assertSame(((Map)load.get(0)).get("image"), ((Map)load.get(1)).get("image")); 
```

# windows-phone-7 - 在windows phone 7中页面加载后，在计时器上动态更改页面的背景颜色

> ID：12163770
> 
> 赞同：0
> 
> 时间：2012-08-28T16:39:05.680
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7.1.1

如何在windows phone 7中页面加载后在计时器上动态更改页面的背景颜色。假设有4-5种颜色需要在特定时间后更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:16:49.803

您可以使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)进行此操作。

在您的页面中使用以下方法并从`PhoneApplicationPage_Loaded`事件中调用它。假设您必须每 5 秒更改一次背景颜色，

```
private void ChangeBackgroundColor()
{
    DispatcherTimer dt = new DispatcherTimer();
    dt.Interval = TimeSpan.FromMilliseconds(5000);

    dt.Tick += (s, e) =>
    {
        //Code for change background color 
    };

    dt.Start();
} 
```

这将每 5 秒处理一次。

# javascript - jQuery 选择 JavaScript 生成的元素

> ID：12163771
> 
> 赞同：0
> 
> 时间：2012-08-28T16:39:06.820
> 
> 标签：javascript, jquery

我正在使用 JavaScript 即时生成一些 HTML 表格。填写完这个动态表后，我使用 jQuery 来“抓取”一些输入并为表单验证做一些小的计算。但是，我的 jQuery 选择器不适用于动态 HTML 表单。谁能给我一些建议？谢谢！

这是代码：

```
<script>
//generate HTML table
$('<tr><th><label for="id_CAM_1">Input:</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'"><option value="1">Option 1</option><option value="2">Option 2</option></select></td></tr>').appendTo('.table');

// jQuery selector, which does not work dynamically

$('select[name=CAM_1_'+i+']').change(function() {
            var ss1=$(this).val()
            alert(ss1)})
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:42:57.030

```
<script type="text/javascript">
    $(function() {
        $('<tr><th><label for="id_CAM_1">Input:</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'"><option value="1">Option 1</option><option value="2">Option 2</option></select></td></tr>')
            .appendTo('.table')
            .on('change', function() {
                alert(this.value);
        });
    });
</script>​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:43:58.270

以下将检测名称以您的开头的所有元素`select`的所有更改`CAM_1_``tableSelector`

```
$('tableSelector').on('change', 'select[name^="CAM_1_"]', function() {
    alert(this.value);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T16:48:58.337

我想复制你的问题，但对我来说它工作得很好。我确实必须添加右括号 ( `})`)，因为您发布的内容似乎缺少这些。您是否在控制台中收到任何错误。检查您是否在 JavaScript 控制台中遇到任何错误，以及您是否使用的是最新版本的 jQuery。

```
<table class="table"></table>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script>
i = 0;
//generate HTML table
$('<tr><th><label for="id_CAM_1">Input:</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'"><option value="1">Option 1</option><option value="2">Option 2</option></select></td></tr>').appendTo('.table');

// jQuery selector, which does not work dynamically

$('select[name=CAM_1_'+i+']').change(function() {
    var ss1=$(this).val()
    alert(ss1)
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:57:39.267

```
<script>
//generate HTML table
$('<tr><th><label for="id_CAM_1">Input:</label></th><td><select name="CAM_1_'+i+'"   id="id_1_'+i+'"><option value="1">Option 1</option><option value="2">Option 2</option></select></td></tr>').appendTo('.table');

// jQuery selector, which does not work dynamically

$('select[name=CAM_1_'+i+']').live("change",function() {
        var ss1=$(this).val()
        alert(ss1)})
</script> 
```

* * *

所以基本上你需要使用jquery的live方法来动态生成html。

# json - iis 7.5 中 wcf 休息服务 json 响应的未知文件类型

> ID：12163782
> 
> 赞同：0
> 
> 时间：2012-08-28T16:39:52.637
> 
> 标签：json, wcf, rest, iis, webserver

我的 wcf 休息服务返回 json 响应时遇到问题。在我的本地 IIS-Web 服务器上的 Visual Studio 2010 中运行该服务运行良好。

但是现在我在带有 IIS 7.5 的 Windows Server 2008 R2 上使用相同的 web.config 运行相同的服务，并且当我通过调用该服务时

*http://localhost/EchoService/EchoService.svc/echo/123

它不会返回 json 结果，而是返回带有未知文件类型的下载对话框，其中包含 json 结果。

首先我认为问题是，网络服务器不知道 json mime 类型，所以我添加了它：

**扩展名：** .json

**MIME-类型：**应用程序/json

**入口类型：**本地

但这并没有解决问题。你能告诉我为什么它将结果作为文件返回并且不知道文件类型吗？

这是我的 web.config：

```
<?xml version="1.0" encoding="UTF-8"?>
   <configuration>
      <system.serviceModel>
         <services>
            <service name="wcf_iis_proto_1.EchoService">
               <endpoint address="" binding="webHttpBinding" contract="wcf_iis_proto_1.IEchoService" behaviorConfiguration="webEcho" />
            </service>
         </services>
         <behaviors>
            <endpointBehaviors>
               <behavior name="webEcho">
                  <webHttp />
               </behavior>
            </endpointBehaviors>
         </behaviors>
    </system.serviceModel>
</configuration> 
```

这是我的服务合同（没有使用和命名空间）：

```
public interface IEchoService
{
   [OperationContract]
   [WebGet(UriTemplate = "/echo/{message}", ResponseFormat = WebMessageFormat.Json)]
   string EchoMessage(string message);
} 
```

和服务实施：

```
public class EchoService: IEchoService
{
    public string EchoMessage(string message)
    {
       return "Hey Buddy. You said: " + message + "!";
    }
 } 
```

我希望你能帮助我。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:29:15.477

可能是您浏览器中的预期行为。它将 Json 视为要下载的类型。为避免这种情况，您应该更改内容类型以响应“text/plain”。[这里](https://stackoverflow.com/questions/6940502/wcf-rest-webservice-content-type-is-wrong)讨论了如何做到这一点。

# string - 使用字符串的 Tcl 编程

> ID：12163784
> 
> 赞同：1
> 
> 时间：2012-08-28T16:39:55.733
> 
> 标签：string, tcl

我想为给定的输入字符串“ **Hello I Am Fine** ”编写一个 TCL 程序，其输出必须是：“ **Fine Am I Hello** ”

还想知道，如何在元素列表中找到最后一个元素？例如：`[list 10 20 30 40 50 60 70 80 90 100]` - 所以从这个列表中我想使用最后一个元素。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T16:50:03.267

如果您需要列表的最后一个元素，可以使用

```
lindex $list end 
```

如果您想知道最后一个元素的索引，请使用

```
expr {[llength $list] - 1} 
```

如果要反转列表，请使用

```
set newList [lreverse $list] 
```

就那么简单。

而对于输入/输出的事情，我建议先把`split`它放到一个列表中，然后再反转它，然后再`join`返回结果。我把它留给你作为练习。

# ruby-on-rails - 通过续集建立连接时出错 - AmazonWs 上的 mysql2

> ID：12163785
> 
> 赞同：0
> 
> 时间：2012-08-28T16:40:08.780
> 
> 标签：ruby-on-rails, amazon-ec2, bundle, mysql2, engineyard

我的 rb 文件很简单，如下所示：

```
require 'rubygems'
require 'mysql2'
require 'sequel'

Sequel.connect(:adapter => 'mysql2', :database=>'xxx', :user => 'xxx', :password => 'xxxxxx', :host => 'xxxxxxxx.compute-1.amazonaws.com') 
```

当我运行此文件时，出现以下错误：

```
> /usr/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
  `require': cannot load such file -- mysql2 (LoadError)    from
> /usr/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
  `require'     from t.rb:2:in `<main>' 
```

我在我的亚马逊实例上运行了命令“bundle list”，得到了以下列表：

捆绑包中包含的宝石：* actionmailer (3.2.8) * actionpack (3.2.8) * activemodel (3.2.8) * activerecord (3.2.8) * activeresource (3.2.8) * activesupport (3.2.8) * arel (3.0.2) * builder (3.0.0) * bundler (1.0.21) * coffee-rails (3.2.2) * coffee-script (2.2.0) * coffee-script-source (1.3.3) * erubis (2.7.0) * execjs (1.4.0) * 远足 (1.2.1) * i18n (0.6.0) * 旅程 (1.0.4) * jquery-rails (2.1.1) * json (1.7.5) * mail (2.4.4) * mime-types (1.19) * multi_json (1.3.6) * mysql2 (0.3.11) * polyglot (0.3.3) * rack (1.4.1) * rack-cache (1.2) * rack -ssl (1.3.2) * rack-test (0.6.1) * rails (3.2.8) * railties (3.2.8) * rake (0.9.2.2) * rdoc (3.12) * sass (3.2.1) * sass-rails (3.2.5) * 续集 (3.38.0) * sprockets (2.1.3) * thor (0.16.0) * 倾斜 (1.3.3) * treetop (1.4.10) * tzinfo (0.3.33)

所以我们可以看到有 mysql2 gem。有什么建议吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:14:05.247

行！解决这个问题。在我的本地环境中，我手动编辑了 Gemfile（可能不是正确的方法）我添加了一行“gem mysql2”，然后在控制台中执行“bundle install”并将 Gemfile 上传到 github。

最后，在亚马逊实例中，我部署了我的环境以应用更改并执行命令“RAILS_ENV=production bundle exec file.rb”（始终使用生产）并且文件执行正常。

谢谢大家！

# java - 在不重新实例化日历和时间戳的情况下获取时间戳

> ID：12163788
> 
> 赞同：1
> 
> 时间：2012-08-28T16:40:16.127
> 
> 标签：java, calendar

我正在尝试获取时间戳。

这行得通。

```
final Calendar cal = new GregorianCalendar(tz);
final Timestamp ts = new Timestamp(cal.getTimeInMillis()); 
```

但是，我不想每次都重新实例化变量，我需要获取时间戳。我怎样才能做到这一点？

我试着做..

```
//instantiate the variables.

    private final Calendar cal = new GregorianCalendar(tz);
    private final Timestamp ts = new Timestamp(cal.getTimeInMillis());

Inside a method()

    // trying to ask calendar to recalculate the time -- not working.
    cal.setTimeZone(tz); // I tried cal.clear() but it is giving me time during 1970 which I don't want.
    ts.setTime(cal.getTimeInMillis()); 
```

这似乎不起作用。你能建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:43:08.607

也许我错过了一些东西，但是这个：

```
final Calendar cal = new GregorianCalendar(tz);
final Timestamp ts = new Timestamp(cal.getTimeInMillis()); 
```

相当于更轻量级：

```
final Timestamp ts = new Timestamp(System.currentTimeMillis()); 
```

那是因为`GregorianCalendar`带有特定时区的 new 指向*now*。并且由于调用`getTimeInMillis()`“忽略”时区，您基本上要求自纪元以来以毫秒为单位的当前时间。可以用[`System.currentTimeMillis()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29).

[`Timestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)类是：

> 一个薄薄的包装纸`java.util.Date`

And `Date` represents point in time, irrespective to time zone. You cannot create neither `Timestamp` nor `Date` in arbitrary time zone. These classes do not hold such information. In other words calendar object representing 14:00 in GMT+1 and 13:00 GMT+0 will result in exactly the same `Date` and `Timestamp` objects - because these dates are the same.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T16:43:11.590

Try `System.currentTimeMillis()` to avoid creating a calendar.

# c++ - 为什么 boost::multi_array 的 ConstMultiArrayConcept 有一个 NumDims 模板参数？

> ID：12163795
> 
> 赞同：8
> 
> 时间：2012-08-28T16:40:41.450
> 
> 标签：c++, boost, boost-multi-array, c++-concepts

我编写了一个`operator<<`专门处理`boost::multi_array`, 并使用`ConstMultiArrayConcept`它，以便它可以在外部数组和子数组上工作。不过，我想知道为什么这些`multi_array`概念有一个`std::size_t NumDims`模板参数，因为它可以简单地从`multi_array`. `NumDims`in的唯一用途`ConstMultiArrayConcept`是作为 的递归深度参数`idgen_helper`，用于测试切片。

`multi_array`作为参考，这里是概念 的标题：http: [//www.boost.org/doc/libs/1_51_0/boost/multi_array/concept_checks.hpp](http://www.boost.org/doc/libs/1_51_0/boost/multi_array/concept_checks.hpp)

这是我的超载`operator<<`

```
template <typename CharT, typename Traits, typename MultiArrayT>
BOOST_CONCEPT_REQUIRES(
                       ((boost::multi_array_concepts::ConstMultiArrayConcept<MultiArrayT, MultiArrayT::dimensionality>)),
                       (std::basic_ostream<CharT, Traits>&)) // return type
operator <<( std::basic_ostream<CharT, Traits>& os, MultiArrayT const& ary )
{
    typename std::basic_ostream<CharT, Traits>::sentry opfx( os );

    if ( opfx ) {
        boost::multi_array_types::size_type const* sizes = ary.shape();
        // using Mathematica array notation
        os << "{";
        for ( int i = 0; i < sizes[0]; ++i ) {
            if ( i > 0 ) os << ", ";
            // verbose just to keep the types apparent
            typedef typename MultiArrayT::const_reference subType;
            subType item = ary[i];
            os << item;
        }
        os << "}\n";
    }
    return os;
} 
```

这种专业化工作，但我必须在我的理解中遗漏一些东西。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:13:25.113

概念模板类声明：

```
template <typename Array, std::size_t NumDims>  struct ConstMultiArrayConcept
{
...
}; 
```

查看`ConstMultiArrayConcept`Boost 代码中的实际使用方式：

```
 template <typename T, std::size_t NumDims>
 class multi_array_ref {
   ...
   // Assignment from other ConstMultiArray types.
   template <typename ConstMultiArray>
   multi_array_ref& operator=(const ConstMultiArray& other)
   {
      function_requires< 
         detail::multi_array::
         ConstMultiArrayConcept<ConstMultiArray,NumDims> >();
      ... 
```

相同的代码`multi_array_view& operator=()`和`sub_array& operator=()`其他`ConstMultiArray`类型。

看起来`NumDims` **不是**传递数组类型`Array`的维数，而是外部数组类型的维数，用于检查与给定其他数组类型的分配兼容性。所以不能从`Array`模板参数中推导出来。

# mysql - MySQL删除“非活动”行

> ID：12163799
> 
> 赞同：3
> 
> 时间：2012-08-28T16:40:48.940
> 
> 标签：mysql, sql, sql-delete

我有两张桌子：

### 用户

编号 | 姓名 | 邮件 | 通过 | 盐

### 条目

编号 | uid | 标题 | 正文 | 时间戳

现在我想删除-table中不存在的`entries`所有行（已删除用户）`uid``user`

我认为这可能是这样的：

```
DELETE entries FROM user, entries WHERE [What comes here? I don't know :(] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T16:42:17.130

```
DELETE FROM entries WHERE uid NOT IN (SELECT DISTINCT id FROM user); 
```

# android - 多次旋转图像但保持角对齐

> ID：12163801
> 
> 赞同：3
> 
> 时间：2012-08-28T16:40:55.430
> 
> 标签：android, bitmap, rotation

我尝试使用以下代码旋转图像，但我发现生成的图像越来越大：

```
Matrix matrix = new Matrix();
matrix.setRotate(10);
Bitmap newImage = Bitmap.createBitmap(image, 0, 0, 
        image.getWidth(), image.getHeight(), matrix, true); 
```

你可以看到图片：

**原来的**

![在此处输入图像描述](../Images/fd1334b4ea2f015b5153688fa422bbfa.png)

**旋转 10 度**

![在此处输入图像描述](../Images/5e7f6d1fcd0bd2accc536a6e6daa316e.png)

**再旋转10度**

![在此处输入图像描述](../Images/e8c1839daa8a86aa223c54fcdcc3bb4e.png)

**再旋转10度**

![在此处输入图像描述](../Images/3ccc5f61fe1c372dda4b36d31055b12e.png)

蓝色矩形是完整图像。

可以看到图像越来越大（虽然沙发的尺寸没有改变），并且原来图像的4个角都没有在新图像的边界上。

如何更改代码以保持边框上的角（就像第二张图片一样）？

我忘了说我在 github 上创建了一个演示项目。你可以克隆它，主要的java代码在这里：

[https://github.com/freewind/Android-RotateTest/blob/master/src/com/example/MyActivity.java](https://github.com/freewind/Android-RotateTest/blob/master/src/com/example/MyActivity.java)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T18:44:03.977

我尝试了您的代码，经过一些轮换后，它会因 OutOfMemory 异常而崩溃，因为每次创建一个新的位图时都会占用大量资源。你永远不应该！在迭代中使用 createBitMap()。我对您的图像旋转代码进行了一些修改，现在它按预期运行。
这是代码：

```
private void addListeners() {
    this.button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {

            Matrix matrix = new Matrix();

            //copying the image matrix(source) to this matrix 
            matrix.set(imageView.getImageMatrix());

            matrix.postRotate(10, imageView.getWidth()/2, imageView.getHeight()/2);
            imageView.setImageMatrix(matrix);

            //checking the size of the image
            Drawable d = imageView.getDrawable();
            Bitmap bmp = ((BitmapDrawable)d).getBitmap();
            imageInfo(bmp);
        }
    });
} 
```

还将**imageView 的比例类型设置为矩阵**

```
<ImageView
    android:id="@+id/Image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#336699"
    android:scaleType="matrix"
    android:padding="2px"
    android:src="@drawable/m" /> 
```

如果我们想从 ImageView 中获取旋转的位图，请执行以下操作：

```
private Bitmap getBitmapFromView() {
    // this is the important code :)
    // Without it the view will have a dimension of 0,0 and the bitmap will be null
    imageView.setDrawingCacheEnabled(true);
    imageView.measure(View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED),
            View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
    imageView.layout(0, 0, imageView.getMeasuredWidth(), imageView.getMeasuredHeight());
    imageView.buildDrawingCache(true);
    Bitmap b = Bitmap.createBitmap(imageView.getDrawingCache());
    imageView.setDrawingCacheEnabled(false); // clear drawing cache
    return b;
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:55:44.943

您必须旋转第一张图像。将第一个图像保存到变量中，然后创建一个副本。旋转时，请始终从原件制作新副本并旋转该副本。

**编辑**

将您的代码更改为：

```
 @Override
        public void onClick(View view) {
            Matrix matrix = new Matrix();
            matrix.setRotate(10);
            Bitmap copy = image;
            Bitmap newImage = Bitmap.createBitmap(copy, 0, 0, image.getWidth(), image.getHeight(), matrix, true);
            setNewImage(newImage);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T17:10:37.663

我似乎看不到您的图像，但我遇到了同样的问题，每次我尝试旋转图像时，它似乎都会调整其自身的大小。

我设法编写了一些可以成功转换图像的代码。我给您的第一个提示是，当您尝试创建动画旋转图片时，您不应该每次都创建新的位图，因为这会使 GC 发疯并降低性能速度！

这是对我有用的代码，可以在不调整大小的情况下旋转图像：

```
public static Matrix rotateMatrix(Bitmap bitmap, Shape shape, int rotation) {

        float scaleWidth = ((float) shape.getWidth()) / bitmap.getWidth();
        float scaleHeight = ((float) shape.getHeight()) / bitmap.getHeight();

        Matrix rotateMatrix = new Matrix();
        rotateMatrix.postScale(scaleWidth, scaleHeight);
        rotateMatrix.postRotate(rotation, shape.getWidth()/2, shape.getHeight()/2);
        rotateMatrix.postTranslate(shape.getX(), shape.getY());

        return rotateMatrix;

    } 
```

注意：形状对象只包含您尝试旋转的对象的真实尺寸，例如 100x100。

我希望这有帮助。

# excel - 如何自动将非谷歌文档与谷歌驱动器同步？

> ID：12163804
> 
> 赞同：0
> 
> 时间：2012-08-28T16:41:02.543
> 
> 标签：excel, documentation, sync, google-drive-api

我知道谷歌驱动器现在有一个同步文件夹，并且放置在该文件夹中的大多数办公文档都会自动与谷歌驱动器同步。但是，例如，为了编辑已同步到谷歌驱动器的 Excel 电子表格，我必须将其转换为谷歌文档。这意味着我对桌面上的原始 excel 文件所做的任何编辑都不会与新创建的谷歌文档同步。是否有任何应用程序或我可以使用的东西，可以将我桌面（我使用的是 Mac）上的 excel 文件所做的更改同步到谷歌驱动器中的谷歌文档对应项，反之亦然？我仍然希望尽可能使用 Office 软件进行大部分编辑...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:08:30.413

据我所知，你不能。

您需要使用不同的云服务，或者如果您想使用办公软件，请不要将它们转换为 Google 文档。办公软件和谷歌云是不直接兼容的竞争产品。

# c# - C# 和正则表达式：递归替换直到特定字符串

> ID：12163806
> 
> 赞同：0
> 
> 时间：2012-08-28T16:41:15.530
> 
> 标签：c#, regex, string, expression, substitution

我有一个递归的 html 文本，例如：

```
string html = "<input id=\"txt0\" value=\"hello\"></input>some undefined text<input id=\"txt1\" value=\"world\"></input>"; 
```

可以重复 n 次（在示例中 n=2），但 n 是一个未知的变量数。

我想使用正则表达式将“value”属性中的所有文本（在示例“hello”和“world”中）替换为数组中的文本。

```
Regex rg = new Regex(which pattern?, RegexOptions.IgnoreCase);
int count= rg.Split(html).Length - 1; // in the example count = 2

for (int i = 0; i < count; i++)
{
     html= rg.Replace(html, @"value=""" + myarray[i] + @""">", 1);
} 
```

我的问题是我找不到正确的正则表达式模式来进行这些替换。

如果我使用类似的东西：

```
Regex rg = new Regex(@"value="".*""", RegexOptions.IgnoreCase);
int count= rg.Split(html).Length - 1;

for (int i = 0; i < count; i++)
{
     html= rg.Replace(html, @"value=""" + myarray[i] + @"""", 1);
} 
```

我得到像

```
<input id="txt0" value="lorem ipsum"></input> 
```

因为 .* 在模式中包含额外的字符，而我需要它停止直到下一个

```
'<input' 
```

发生。

结果应该是这样的：

```
<input id="txt0" value="lorem ipsum"></input>some undefined text<input id="txt1" value="another text"></input> 
```

非常感谢您的建议或帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:23:50.140

不要像其他人在评论中指出的那样尝试使用正则表达式解析 html。

假设你有一个`input`with **value** `<input id=txt2 value="x">`。

`<input id=txt1 value='<input id=txt2 value="x">' >`你能很容易地解析它吗？

因此使用 Html 解析器。我将用于您的示例**[Html Agility Pack](http://htmlagilitypack.codeplex.com/)**

```
string html = "<input id=\"txt0\" value=\"hello\"></input>some undefined text<input id=\"txt1\" value=\"world\"></input>";
var myarray = new List<string>() { "val111", "val222", "val333" };

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

int count = 0;
foreach(var inp in doc.DocumentNode.Descendants("input"))
{
    if (inp.Attributes["value"] != null) 
        inp.Attributes["value"].Value = myarray[count++]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:14:14.523

虽然我倾向于推动您使用 HTML 解析器，但**如果**您的 HTML 输入与您的示例中一样简单，并且您没有像 LB 在他的答案中那样的时髦 HTML，那么您的问题的解决方案就是不要贪婪：

```
 Regex rg = new Regex(@"value="".*""?", RegexOptions.IgnoreCase); 
```

问号告诉 Regex 在您的模式的最短匹配处停止。

# java - 我们如何提高 Ebean 的远程性能？

> ID：12163807
> 
> 赞同：5
> 
> 时间：2012-08-28T16:41:17.107
> 
> 标签：java, playframework-2.0, azure-sql-database, ebean

*（免责声明：这是一个非常开放的问题，而且我认为不会只有一个正确答案，无论如何请不要关闭它，也可以考虑将答案添加到社区维基）*

我们正在使用`Ebean`作为主要 ORM 的 Play 应用程序，当我们在本地服务器上处于开发模式时，一切都非常好。但应用程序的目标环境是云 + 远程 SQL 服务器。连接到目标数据库后，我们发现了在本地环境中不可见的一件事：`Ebean`执行单独查询的时间比手动编写的语句长很多倍。例如：

### 陈述

此查询`resultSet`在**~1200ms**内执行一系列子查询：

```
while (resultSet.next()) {
    Statement innerStatement = connection.createStatement();
    ResultSet innerSet
            = innerStatement.executeQuery("SELECT title FROM media WHERE id='" + resultSet.getInt("id") + "'");
    while (innerSet.next()) {
        Logger.info("Statement: " + innerSet.getString("title"));
    }
} 
```

### 豆豆

使用相同的操作`resultSet` `Ebean`需要大约**6500 毫秒**。（*`Media`模型没有任何关系，所以没有任何连接*）：

```
while (resultSet.next()) {
    Media media = Media.find.select("title").where().eq("id", resultSet.getInt("id")).findUnique();
    Logger.info("Ebean: " + media.title);
} 
```

**编辑：** 本地环境差异并不像一般情况下所有查询都快得多。

当然，有很多地方可以将查询系列替换为单个查询系列，但这并不总是可能的。有时我们需要在一个请求中查询多个不同的表。在其他情况下，我们需要在不同数据库之间一一匹配数千条记录，等等。

我们还发现，例如，`Page<Media>`当传递给 Play 的视图时，该类对其列表中的每个项目执行单独的选择。在这种情况下，很容易`getList()`在控制器中传递它`List<Media>`并添加一些信息以使用普通类型参数进行分页，但是......一次得到它真是太酷了:)

那么问题...

1.  如何`Ebean's`优化配置？
2.  如何优化查询（即提到`List`而不是`Page`，或使用`find.where().in(..., ...)`而不是使用语句单独获取每个对象`for()`）。还有什么？
3.  Ebean 还有其他让我们感到惊讶的事情吗（比如`Page`分别查询 's 的项目）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:08:14.687

我在这里有点猜测，但这可能是因为连接没有汇集。

检查 'conf/application.conf' 中的连接池设置，如[SettingsJDBC中所述](http://www.playframework.org/documentation/2.0/SettingsJDBC)

```
# [...] thread-affine pools, basically
db.default.partitionCount=2

# The number of connections to create per partition. Setting this to 
# 5 with 3 partitions means you will have 15 unique connections to the 
# database. [...]
db.default.maxConnectionsPerPartition=5

# The number of initial connections, per partition.
db.default.minConnectionsPerPartition=5 
```

# regex - 提取数字并从字符串中生成双精度数

> ID：12163810
> 
> 赞同：0
> 
> 时间：2012-08-28T16:41:41.337
> 
> 标签：regex, string, c#-4.0

我有弦，我需要用它们制作双打。它们都是格式：

```
"Blabla 11/moreBla 17-18"  That should become 11.1718
"Blabla 7/moreBla 8-9" --> 7.89
"Blabla 4/moreBla 6-8" --> 4.68 
```

等等

也可能有额外的空格或破折号可能是正斜杠。所以，这样的事情：

```
"Blabla 11/moreBla 17-18"
"Blabla 11 / moreBla 17-18"
"Blabla 11/moreBla 17/18"
"Blabla 11/moreBla 17 / 18"
"Blabla 11 / moreBla 17 / 18" 
```

我首先尝试拆分字符串，但显然还有所有其他情况。所以 split 在这里效果不佳。也许 RegEx 可能会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:06:03.180

根据您在问题中提供的测试用例：

```
string input = @"Blabla 11/moreBla 17/18";

MatchCollection matches = Regex.Matches(input, "(\\d+)");
double val = Convert.ToDouble(matches[0].Value + "." + matches[1].Value + matches[2].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:55:12.503

试试这个

```
(\d+).+?(\d+).+?(\d+) 
```

将其替换为

```
\1.\2\3 
```

基本上它匹配第一组数字并将其放入整数部分，然后匹配第二组和第三组数字，无论它们之间是什么，并制作小数部分。

c# 代码将是

```
public double MatchNumber(string input){
    Regex r = new Regex(@"(\d+).+?(\d+).+?(\d+)");
    Match match = r.Match(input);
    if (match.Success){
        return Convert.toDouble(
             match.Groups[1].Value+"."+
             match.Groups[2].Value+
             match.Groups[2].Value);
    }
    else{
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T17:00:31.293

你可以尝试这样的事情

```
String data = "Blabla 11/moreBla 17-18";
data = Regex.Replace(DATA, "[a-zA-Z ]", "");

data = String.Concat(DATA.Split('/')[0], "." , Regex.Replace(DATA.Split('/')[1], "(?:[^a-z0-9 ]|(?<=['\"])s)",""));

double MyValue = Convert.ToDouble(data); 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T17:06:18.500

代码：

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        string input = "Blabla 11/moreBla 17-18";
        string[] s = input.Split('/');
        Console.WriteLine(Regex.Replace(s[0], @"[^\d]", "") + "." + Regex.Replace(s[1], @"[^\d]", "")); 
    }
} 
```

输出：

```
11.1718 
```

[在此处](http://ideone.com/vk936)测试此代码。

* * *

或者这段代码：

```
 using System;
 using System.Text.RegularExpressions;

 class Program
 {
     static void Main()
     {
         string input = "Blabla 11/moreBla 17-18";
         string[] s = Regex.Replace(input, @"[^\d\/]", "").Split('/');
         Console.WriteLine(s[0] + "." + s[1]);
     }
 } 
```

输出：

```
11.1718 
```

[在此处](http://ideone.com/MyVXC)测试此代码。

# clojure - 将 CSV 值转换为 Clojure 列表

> ID：12163811
> 
> 赞同：1
> 
> 时间：2012-08-28T16:41:56.563
> 
> 标签：clojure

将第 3 列的这行 CSV 转换为 Clojure 列表的最佳方法是什么？

```
357302041352401, 2012-08-27 19:59:32 -0700, 100, ["SNIA34", "M33KLC", "M34KLC", "W35REK", "SRBT", "MODE", "BFF21S", "CC12", "RCV56V", "NBA1", "RESP", "A0NTC", "PRNK", "WAYS", "HIRE", "BITE", "INGA1", "M32MOR", "TFT99W", "TBF5P", "NA3NR"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:56:52.697

假设您已经可以读取 csv 文件...

您可以将[read-string](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/read-string)与[into结合使用](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/into)

```
user=> (def your_csv_column "[\"SNIA34\", \"M33KLC\", \"M34KLC\"]")
#'user/your_csv_column
user=> (into '() (read-string your_csv_column))
("M34KLC" "M33KLC" "SNIA34") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:10:08.360

您可以使用[Clojure Csv](https://github.com/clojure/data.csv/)来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:24:56.550

你的数据很有趣，它似乎包括一个传统的逗号分隔行，后面是括号中的数据。我无法完全确定括号中的数据是您在 .csv 文件中的表示还是在阅读后想要的表示，但无论哪种方式，这都是我读取 .csv 文件的方式：

我的图书馆使用 clojure-csv 的 project.clj：

```
(defproject util "1.0.4-SNAPSHOT"
  :description "A general purposes Clojure library"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [clojure-csv/clojure-csv "1.3.2"]]
  :aot [util.core]
  :omit-source true) 
```

我的图书馆的 core.clj 标头：

```
(ns util.core
  ^{:author "Charles M. Norton",
    :doc "util is a Clojure utilities directory containing things
          most Clojure programs need, like cli routines.
        Created on April 4, 2012"}

  (:require [clojure.string :as cstr])
  (:import java.util.Date)
  (:import java.io.File)
  (:use clojure-csv.core)) 
```

我的库函数返回解析为向量向量的 .csv 文件。

```
(defn ret-csv-data
"Returns a lazy sequence generated by parse-csv.
 Uses open-file which will return a nil, if
 there is an exception in opening fnam.

 parse-csv called on non-nil file, and that
 data is returned."

 [fnam]
 (let [  csv-file (open-file fnam)

   inter-csv-data (if-not (nil? csv-file)
                    (parse-csv csv-file)
                     nil)

  csv-data (vec (filter #(and pos? (count %) (not (nil? (rest %)))) 
            inter-csv-data))]

    ;removes blank sequence at EOF.                
    (pop csv-data)))

(defn fetch-csv-data
    "This function accepts a csv file name, and returns parsed csv data,
     or returns nil if file is not present."

    [csv-file]
        (let [csv-data (ret-csv-data csv-file)]
            csv-data)) 
```

我发现非常有帮助的是避免使用 nth——来自 SO 和其他来源的非常有用的建议——并且鉴于我的大部分 .csv 数据来自数据库查询，我将列压缩到每个 .csv 序列（行），并且然后通过映射键对该数据进行操作。它为我简化了事情。

# regex - 为什么这个正则表达式会导致我的正则表达式引擎挂起？

> ID：12163812
> 
> 赞同：0
> 
> 时间：2012-08-28T16:41:59.377
> 
> 标签：regex

有谁知道为什么这个正则表达式导致我的应用程序挂起？

`/^(?:((?:.+?)(?: of the )?)+) of the (?:(.+?)) (?:"(.+?)")$/`

当我尝试使用它来匹配这样的字符串时，它会挂起：

`'description of the post "This is a Post"'`

但是当我用它来匹配这样一个较短的字符串时，它似乎发生得很快： `'age of the person "Bob"'`

关于为什么会发生这种情况或如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:53:50.340

这是正则表达式中[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)的结果，正则表达式的以下部分可能是罪魁祸首：

```
((?:.+?)(?: of the )?)+ 
```

每当您有嵌套重复时，您都应该尝试重构您的正则表达式。在这种情况下，我认为您可以将整个部分简化为`.+`并使您的正则表达式表现相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:45:23.573

这可能是因为有太多的回溯/分组需要花费大量时间来解析更大的字符串。

正如您在演示中看到的：[http](http://regex101.com/r/xC3dF0) ://regex101.com/r/xC3dF0 ，由于大量回溯，系统无法解析字符串

# iphone - 无需翻转 iOS 设备即可更改键盘方向

> ID：12163813
> 
> 赞同：0
> 
> 时间：2012-08-28T16:42:00.483
> 
> 标签：iphone, objective-c, ios, ipad, uikeyboard

我想让 iOS 设备处于纵向模式，并且任何键盘都将以横向模式显示。我怎么能管理这样的事情？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:56:20.310

我会尝试设置状态栏的方向。这将需要特殊处理以确保您的视图不会旋转，但键盘、弹出框、操作表等都采用应用程序状态栏的方向。像这样设置状态栏的方向：

```
[[UIApplication sharedApplication] setStatusBarOrientation:newOrientation] 
```

# objective-c - Restkit嵌套对象映射失败

> ID：12163817
> 
> 赞同：1
> 
> 时间：2012-08-28T16:42:08.957
> 
> 标签：objective-c, restkit, object-object-mapping

我必须解析`JSON`下面发布的嵌套对象。它没有得到任何测试对象。我做错了什么？

```
{"tests":[{"type":"QA","list":[{"test_performed":{"id":11,"time":" 9:00 AM","tester":"Tester 1"}}]},{"type":"BAT","list":[]},{"type":"UAT","list":[]}],"tested":"true"} 
```

创建的对象：

```
Result
NSArray *tests;
NSNumber *tested;

TestTypeList
NSArray *list;
NSString *type;

Test
NSNumber *identifier
NSString *start_time;
NSString *tester;

RKObjectMapping *testMapping=[RKObjectMapping mappingForClass:[Test class]];
[testMapping mapKeyPath:@"id" toAttribute:@"identifier"];
[testMapping mapKeyPath:@"time" toAttribute:@"time"];
[testMapping mapKeyPath:@"tester" toAttribute:@"tester"];
[[RKObjectManager sharedManager].mappingProvider setMapping:testMapping forKeyPath:@"test_performed"];

RKObjectMapping *testInverseMapping = [testMapping inverseMapping];
testInverseMapping.rootKeyPath = @"test_performed";

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:timeInverseMapping forClass:[Time class]];

RKObjectMapping *testTypeListMapping=[RKObjectMapping mappingForClass:[TestTypeList class]];
[testTypeListMapping mapKeyPath:@"type" toAttribute:@"type"];
[testTypeListMapping mapKeyPath:@"list" toRelationship:@"list" withMapping:testMapping];

[[RKObjectManager sharedManager].mappingProvider testTypeListMapping forKeyPath:@"tests"];

RKObjectMapping *testTypeListInverseMapping = [testTypeListMapping inverseMapping];
testTypeListInverseMapping.rootKeyPath = @"tests";

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:testTypeInverseMapping forClass:[TestTypeList class]];

RKObjectMapping *resultMapping=[RKObjectMapping mappingForClass:[Result class]];
[resultMapping mapKeyPath:@"tested" toAttribute:@"tested"];
[resultMapping mapKeyPath:@"tests" toRelationship:@"rides" withMapping: testTypeListMapping];

[[RKObjectManager sharedManager].mappingProvider setMapping:listMapping forKeyPath:@"result"];

RKObjectMapping *resultInverseMapping = [resultMapping inverseMapping];
resultInverseMapping.rootKeyPath = @"result"; 
```

# iphone - 从 .Net WebService 获取 ByteArray 的 UIImage

> ID：12163819
> 
> 赞同：0
> 
> 时间：2012-08-28T16:42:16.010
> 
> 标签：iphone, ios, uiimage

我的问题与[将来自 Web 服务的字节数组转换为 UIImage iPhone](https://stackoverflow.com/questions/11052076/converting-byte-array-coming-from-web-service-to-uiimage-iphone?rq=1)相同 。现在我将这些字节存储在 NSMutableArray 中。但是方法：

```
NSData *data = [NSData dataWithBytes:YOUR_BYTE_ARRAY length:ARRAY_LENGTH]; 
```

将 arrayOfBytes 作为参数。所以任何人都可以告诉我如何将这个数组转换为字节数组。我搜索了很多，但找不到相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:05:00.290

不确定您是如何开始使用可变数组的。如果您使用 NSURLConnection，则委托将获得 NSData，因此您无需使用可变数组。考虑使用这样的连接异步块方法获取数据......

```
NSURLRequest *myRequest = // the request you've already got working to get image data
[NSURLConnection sendAsynchronousRequest:myRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if (!error) {
        // image from data with no intermediate mutable array or byte array
        UIImage *image = [UIImage imageWithData:data];
    }
 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:24:29.620

谢谢您的合作。但这对我没有帮助。经过长时间的研究，我找到了我的解决方案。我正在分享我的信息，以便其他人可以得到正确的答案。

```
 NSArray *byteArray = [[NSArray alloc]init]; //strore all data here coming from server in byte formate

        unsigned c = [byteArray count];
        uint8_t *bytes = malloc(sizeof(*bytes) * c);

        unsigned i;
        for (i = 0; i < c; i++)
        {
            NSString *str = [byteArray objectAtIndex:i];
            int byte = [str intValue];
            bytes[i] = (uint8_t)byte;
        }

        NSData *data = [[NSData alloc]initWithBytes:bytes length:c];
        UIImage *image = [UIImage imageWithData:data];
        NSLog(@"image %@",image); 
```

# javascript - ExtJS：从受保护的 url 创建 JSB3 文件

> ID：12163820
> 
> 赞同：1
> 
> 时间：2012-08-28T16:42:32.020
> 
> 标签：javascript, extjs4, jsbuilder

我想从[http://example.com/home](http://example.com/home)之类的 url 生成 jsb3 文件。它受到保护。只有登录的用户才能看到这个。人们登录[http://example.com/](http://example.com/)。控制面板（登录“/home”后）完全用 ExtJS 编写。Sencha 工具无法访问它，因为它没有 cookie。

如何为此类 url 创建 JSB3 文件？

我通常这样做

```
sencha create jsb -a http://example.com/home -p home.jsb3 
```

但是煎茶需要登录。如果有办法使用现有的 cookie 标头。我可以用那个。

修复它的一个选项是将 url 作为文件下载并将`sencha`此文件作为本地文件提供。但它有问题。`sencha`抛出错误！

```
$ sencha create jsb -a home.html -p home.jsb3
Error thown from your application with message: TypeError: 'null' is not a constructor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:46:05.683

这将取决于您的应用程序环境。我在 java 环境中遇到了同样的问题，这就是我们如何解决它。您可能可以在您的情况下使用类似的解决方案。

我们的身份验证由 Shiro 管理，所以在我们的例子中，我们就是在这个地方处理匿名用户。Shiro 从一个文件中读取安全信息，该文件列出了允许访问它们的 URL 和用户角色。我们的配置在标准位置查找该文件。这是我们放置真正安全设置的地方。我们可以在启动 java 服务器时通过设置 JVM 属性来覆盖该位置。

当我们想运行 sencha create 时，我们启动一个指向自定义安全文件的 java 服务器，该文件允许匿名访问所有资源。现在，phantom.js 可以在未经授权的情况下加载页面。（phantom.js 是 sencha 创建的用于加载页面的无头浏览器）。

然后，我们完全按照您上面指定的方式运行 sencha create。

这样做的缺点是我们必须确保我们的应用程序不会为匿名用户抛出异常。尽管我们的应用程序总是需要身份验证，但我们需要确保为匿名用户正确加载所有 JavaScript。

# jquery - 使用 jQuery 读取 RSS 提要 - 无法读取 元素

> ID：12163821
> 
> 赞同：4
> 
> 时间：2012-08-28T16:42:32.680
> 
> 标签：jquery, xml-parsing, rss-reader

我正在使用 jquery 构建我的网站的 RSS 提要，并且链接元素一直返回空白。我自己构建的 javascript 解决方案没有问题，但 jquery 似乎讨厌链接元素。

下面是jquery代码：

```
function loadData(xml, ifid) {
        var htmlStr;
        var iframeToWrite = document.getElementById(ifid);

        htmlStr = "<html><body>"
        var items = $(xml).find("channel item").each(function () {
            var $article = $(this);
            var title = $article.find("title").text();
            var description = $article.find("description").text();
            var link = $article.find("link").text();
            var pubDate = $article.find("pubDate").text();

            htmlStr += "<div class='Rssitem'>\n";
            htmlStr += "\t<h3><a href='" + link + "' target='_blank' >" +
               title + "</a></h3>\n";
            htmlStr += "\t<p>" + description + "</p>\n";
            htmlStr += "\t<h6>" + pubDate + "</h6>\n";
            htmlStr += "</div>\n"
        });

        htmlStr += "</body></hmtl>";
        iframeToWrite.contentDocument.write(htmlStr);

    } 
```

下面是我从得到的 npr 流中编辑的示例 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:npr="http://www.npr.org/rss/" xmlns:nprml="http://api.npr.org/nprml" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
  <channel>
    <title>News</title>
    <link>http://www.npr.org/templates/story/story.php?storyId=1001&amp;ft=1&amp;f=1001</link>
    <description>NPR news, audio, and podcasts. Coverage of breaking stories, national and world news, politics, business, science, technology, and extended coverage of major national and world events.</description>
    <language>en</language>
    <copyright>Copyright 2012 NPR - For Personal Use Only</copyright>
    <generator>NPR API RSS Generator 0.94</generator>
    <lastBuildDate>Tue, 28 Aug 2012 12:19:00 -0400</lastBuildDate>
    <image>
      <url>http://media.npr.org/images/npr_news_123x20.gif</url>
      <title>News</title>
      <link>http://www.npr.org/templates/story/story.php?storyId=1001&amp;ft=1&amp;f=1001</link>
    </image>
    <item>
      <title>Reports: Obama Administration Will Unveil New Fuel-Efficiency Standards</title>
      <description>The new rules will require U.S. cars to average 54.5 miles per gallon by 2025.</description>
      <pubDate>Tue, 28 Aug 2012 12:19:00 -0400</pubDate>
      <link>http://www.npr.org/blogs/thetwo-way/2012/08/28/160172356/reports-obama-administration-will-unveil-new-fuel-efficiency-standards?ft=1&amp;f=1001</link>
      <guid>http://www.npr.org/blogs/thetwo-way/2012/08/28/160172356/reports-obama-administration-will-unveil-new-fuel-efficiency-standards?ft=1&amp;f=1001</guid>
      <content:encoded><![CDATA[<p>The new rules will require U.S. cars to average 54.5 miles per gallon by 2025.</p><p><a href="http://www.npr.org/templates/email/emailAFriend.php?storyId=160172356">&raquo; E-Mail This</a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://del.icio.us/post?url=http%3A%2F%2Fwww.npr.org%2Ftemplates%2Fstory%2Fstory.php%3FstoryId%3D160172356">&raquo; Add to Del.icio.us</a></p>]]></content:encoded>
    </item>
  </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T17:34:21.060

您必须首先将 xml 字符串解析为 xml 文档[**jQuery.parseXML()**](http://api.jquery.com/jQuery.parseXML/)。
引用文档：

> jQuery.parseXML 使用浏览器的原生解析功能来创建一个有效的 XML 文档。然后可以将此文档传递给 jQuery 以创建一个可以遍历和操作的典型 jQuery 对象。

如果您不使用 parseXML 并在其周围包装 jQuery 选择器，则 jQuery 可能无法正确交互所有节点。

在您的示例中，`<link>`标签未正确插入，并且`</link>`关闭标签已在未解析的情况下被删除，因此您无法正确查询链接文本。
您可以确认是否执行`console.log($(this))`并检查控制台输出中的内容。您可以看到`<link>`then 文本，但`</link>`缺少结尾。

但是，当首先将您的 xml 解析为文档对象时，您现在可以在其周围包裹一个 jQuery 选择器并可靠地访问所有节点。当然，假设初始 XML 字符串是有效的 XML。

### [演示](http://jsfiddle.net/GH8pW/2/)- 在您的 xml 字符串上使用 parseXml 并在之后查询它

将此应用于您的代码将类似于以下内容：

```
htmlStr = "<html><body>";

// Parse the XML to a document object and then wrap it into a jQuery selector
var $xml = $($.parseXML(xml));

var items = $xml.find("channel item").each(function() {
    var $article = $(this);
     //..... rest of your code as is 
```

# android - Android GCMIntentService onMessage 上下文问题

> ID：12163822
> 
> 赞同：2
> 
> 时间：2012-08-28T16:42:33.477
> 
> 标签：android, android-intent, google-cloud-messaging

我正在尝试在我的 Android 应用中实现 GCM。服务器和客户端的设置似乎是正确的，因为当我从服务器端“推送”一个字符串时会调用 onMessage 方法。我可以从意图中读取额外内容，但是，使用通知或 Toast 消息不起作用。即使应用程序正在运行，手机也没有显示任何内容，所以我猜想我在回调中使用的上下文对象有些不对劲。这是 manifest.xml 的相关部分，其中 PACKAGE 是基本包。

```
<receiver
   android:name="PACKAGE.gcm.GCMReceiver"
   android:enabled="true"
   android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
             <action android:name="com.google.android.c2dm.intent.RECEIVE" />
             <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="PACKAGE" />
     </intent-filter>
</receiver>

<service
   android:name="PACKAGE.gcm.GCMIntentService"
   android:enabled="true" />
</application>

<permission
    android:name="PACKAGE.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="PACKAGE.C2D_MESSAGE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
</manifest> 
```

现在 onMessage 方法：

```
@Override
    protected void onMessage(Context context, Intent intent)
    {
        if (DEBUG)
        {
            System.out.println("[GCMIntentService] Message Received! " + intent.getStringExtra("message"));
        }

        Toast.makeText(context, intent.getStringExtra("message"), Toast.LENGTH_SHORT).show();

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        // int icon = R.drawable.notification_icon;
        CharSequence tickerText = intent.getStringExtra("message");
        long when = System.currentTimeMillis();

        Notification notification = new Notification(0, tickerText, when);

        CharSequence contentTitle = "Some Notification";
        CharSequence contentText = tickerText + " some more text";

        notification.setLatestEventInfo(context, contentTitle, contentText, null);

        final int HELLO_ID = 1;

        mNotificationManager.notify(HELLO_ID, notification);

    } 
```

Toast 和通知不起作用。我在第一个 Activity 的 onCreate 中调用服务和注册例程，它用作 Splash 并在几秒钟后关闭。这可能与它有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T17:05:41.583

这不是`Context`问题。

GCM 接收器在一个意图服务中运行，该服务本身在一个单独的线程上运行。

要显示敬酒，只需从 UIThread 内部调用。你可以这样做：

```
Handler h = new Handler(Looper.getMainLooper());
h.post(new Runnable(){

    Toast.makeText(context, intent.getStringExtra("message"), Toast.LENGTH_SHORT).show();

}); 
```

这现在将发布在您的 UI 线程上，然后您将看到吐司！

*（您将需要使您的局部变量`final`由匿名类执行）*

干杯!

# c# - C# 和 C++ 之间的双工 NamePipe

> ID：12163823
> 
> 赞同：0
> 
> 时间：2012-08-28T16:42:43.003
> 
> 标签：c#, c++, stream, named-pipes

我在 C# 服务器和 C++ 工作之间进行双工通信时遇到了一些麻烦：

目标是创建管道，从客户端读取一些内容并写回一些内容。如果我只是从客户那里阅读或只是写信给客户，一切都很好，但我不能一个接一个地做这两个！

这是我的 C# 服务器：

```
// Create a name pipe
 using (NamedPipeServerStream pipeStream = new NamedPipeServerStream("TestPipe"))
 {
   Console.WriteLine("[Server] Pipe created {0}", pipeStream.GetHashCode());

   // Wait for a connection
   pipeStream.WaitForConnection();
   Console.WriteLine("[Server] Pipe connection established");

   //Reading Part
   using (StreamReader sr = new StreamReader(pipeStream))
   {
      string temp;
      while ((temp = sr.ReadLine()) != null)
      {
         Console.WriteLine("{0}: {1}", DateTime.Now, temp);
       }
     }

     //Writing Part
     using (StreamWriter sw = new StreamWriter(pipeStream))
     {
        sw.AutoFlush = true;
        String st = "send Back\0";
        sw.WriteLine(st);
     }
 } 
```

这是 C++ 客户端：

```
HANDLE hFile;
BOOL flg;
DWORD dwWrite;
char szPipeUpdate[200];
hFile = CreateFile(L"\\\\.\\pipe\\TestPipe", GENERIC_WRITE|GENERIC_READ,
                           0, NULL, OPEN_EXISTING,
                           0, NULL);

 strcpy(szPipeUpdate,"Sending some data from client to server!");
 if(hFile == INVALID_HANDLE_VALUE)
  { 
        DWORD dw = GetLastError();
        printf("CreateFile failed for Named Pipe client\n:" );
  }
  else
  {
      flg = WriteFile(hFile, szPipeUpdate, strlen(szPipeUpdate), &dwWrite, NULL);
      if (FALSE == flg)
      {
         printf("WriteFile failed for Named Pipe client\n");
      }
      else
      {
         printf("WriteFile succeeded for Named Pipe client\n");
      }
  }

  printf("Let's read!\n");
  //Read the datas sent by the server
  BOOL fFinishRead = FALSE;
  do
    {
        char chResponse[200];
        DWORD cbResponse, cbRead;
        cbResponse = sizeof(chResponse);

        fFinishRead = ReadFile(
            hFile,                  // Handle of the pipe
            chResponse,             // Buffer to receive the reply
            cbResponse,             // Size of buffer in bytes
            &cbRead,                // Number of bytes read 
            NULL                    // Not overlapped 
            );

        if (!fFinishRead && ERROR_MORE_DATA != GetLastError())
        {
            DWORD  dwError = GetLastError();
            wprintf(L"ReadFile from pipe failed w/err 0x%08lx\n", dwError);
            break;
        }
        std::cout << chResponse;

    } while (!fFinishRead); // Repeat loop if ERROR_MORE_DATA
 CloseHandle(hFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:12:30.177

使用 Server & Client NamedPipeStreams，您需要确保连接的至少一端始终尝试读取，否则写入将失败。我猜这是您的客户端和服务器之间的时间问题，无论是在听/写。这是一篇[快速博客文章](http://www.benday.com/2008/06/22/playing-with-nets-named-pipe-streams-with-net-to-net-and-win32-to-net-samples/)，也解释了这种行为。

我建议在客户端和服务器上使用两个流，都从同一个管道读取/写入。

# linq - 创建 sqlite .net 实体数据模型时抛出异常

> ID：12163824
> 
> 赞同：1
> 
> 时间：2012-08-28T16:42:46.583
> 
> 标签：linq, sqlite, system.data.sqlite

我正在尝试让 sqlite 与 linq 一起工作。到目前为止，我已经：

[从http://sourceforge.net/projects/sqlite-dotnet2/files/SQLite%20for%20ADO.NET%202.0/](http://sourceforge.net/projects/sqlite-dotnet2/files/SQLite%20for%20ADO.NET%202.0/)安装了 ADO.net 提供程序

[从http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)安装了 32 位和 64 位 sqlite .net

现在我可以使用 sqlite 数据库作为源创建实体数据模型。每当我尝试创建数据模型的新实例（在显示的 wpf 组件中）时，都会出现以下异常：

```
A first chance exception of type 'System.Windows.Markup.XamlParseException' occurred in     PresentationFramework.dll

Additional information: 'The invocation of the constructor on type myprogram.mycomponent' that matches the specified binding constraints threw an exception.' Line number '13' and line position '37'. 
```

mycomponent 构造函数很简单：

```
private void myprogram()
{
    InitializeComponent();

    pricesEntities pe = new pricesEntities();
} 
```

当我打开显示组件的窗口的设计视图时，我得到一个

```
ArgumentException was thrown on "mycomponent": Cannot create an instance of "mycomponent".

An Unhandled Exception has occurred

The specified named connection is either not found in the configuration, not intended to be used with the EntityClient provider, or not valid.
  at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
  at System.Data.EntityClient.EntityConnection..ctor(String connectionString)
  at System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
  at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
  at myprogram.pricesEntities..ctor() in <path>\prices.Designer.cs:line 34
  at myprogram.ItemList.InitializePriceList() in <path>\ItemList.xaml.cs:line 34
  at myprogram.ItemList..ctor() in <path>\ItemList.xaml.cs:line 29 
```

我的 app.config 包含以下连接字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="pricesEntities" connectionString="metadata=res://*/prices.csdl|res://*/prices.ssdl|res://*/prices.msl;provider=System.Data.SQLite;provider connection string='data source=&quot;<path>\prices.db&quot;'" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

我尝试按照此处和其他地方的建议将 app.config 文件复制到可执行文件的目录中。那没有帮助。请注意，这[与配置中未找到指定的命名连接、不打算与 EntityClient 提供程序一起使用或无效的问题不同](https://stackoverflow.com/questions/3491165/the-specified-named-connection-is-either-not-found-in-the-configuration-not-int)

我只有一个项目（一个 wpf 应用程序）要开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:01:21.960

发现这是因为它是 2.x 运行时的程序集构建，所以我将[useLegacyV2RuntimeActivationPolicy](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)元素添加到我的 app.config 并解决了问题。

# c# - VSTO (Word) - 保存时更新链接

> ID：12163825
> 
> 赞同：2
> 
> 时间：2012-08-28T16:42:52.043
> 
> 标签：c#, ms-word, vsto

我目前正在开发一个单词添加。我需要应用 Web 选项中的“保存时更新链接”。

可以在此处找到此设置的详细信息：http: [//support.microsoft.com/kb/903163](http://support.microsoft.com/kb/903163)

这将使我获得文件的绝对引用。有谁知道如何以编程方式应用此设置或在未选中此设置时检索文件的绝对 URL？

任何信息，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:39:13.217

找到了解决方案。我在我的问题中提供的链接包含“在单个文档中使用绝对超链接”部分，该部分说明如果您在“超链接”基本字段中放置“x”，则该文档将使用绝对文件引用。要在 C# 中访问该属性：

```
foreach (DocumentProperty prop in (DocumentProperties)Doc.BuiltInDocumentProperties)
{
    if (prop.Name == "Hyperlink base")
    {
        prop.Value = "x";
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T08:36:57.043

我遇到了相反的问题，我想保留相关链接，所以史蒂文布鲁斯的回答对我没有帮助。这对我有用。

```
using Microsoft.Office.Interop.Word;

// Create a word app
Microsoft.Office.Interop.Word.Application winword = new Microsoft.Office.Interop.Word.Application();
// Change setting so that hyperlinks do not update on save
DefaultWebOptions WordOptions = winword.DefaultWebOptions();
WordOptions.UpdateLinksOnSave = false; // or true in your case 
```

# sql-server-2008 - 涉及多个表的 UPDATE 查询

> ID：12163826
> 
> 赞同：1
> 
> 时间：2012-08-28T16:42:54.087
> 
> 标签：sql-server-2008

我有两张桌子..

人员：

```
 empid(primary key)
  firstname
  lastname
  email 
```

细节：

```
 Did(primary key)
  salary
  designation
  empid 
```

现在我需要更新名称为“abc”且名称为经理的员工的电子邮件。（假设有多个员工名称为 abc，因此需要检查名称）我使用的是 sql server 2008

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T16:45:53.977

```
UPDATE p
  SET email = 'newemail@wherever.com'
  FROM dbo.Persons AS p
  INNER JOIN dbo.Details AS d
  ON p.empid = d.empid
  WHERE p.firstname = 'abc'
  AND d.Designation = 'manager'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:56:19.187

尝试这个：

```
UPDATE 
  [Persons] 
SET 
  [Persons].[email]='###@###.###'
FROM 
  [Persons] 
  INNER JOIN [Persons].[empid] 
  ON [Details].[empid] = [Persons].[empid] 
WHERE 
  [Persons].[firstname]='abc' AND 
  [Details].[designation]='Manager' 
```

# javascript - 在Javascript中实现解耦代码/回调的正确方法是什么？

> ID：12163831
> 
> 赞同：3
> 
> 时间：2012-08-28T16:43:08.103
> 
> 标签：javascript, callback, observer-pattern

我有几个不同的 JavaScript 对象，它们的方法要分开。但是，我需要某种类型的观察者、回调或插件设计，以便我可以在正确的时间触发这些方法。

例如，`A.Foo()`应该几乎总是在*后面* `B.Bar()`运行- 但我不想打电话到 `A.Foo()` *里面* `B.Bar()`，因为有些奇怪的时间它*不应该*在后面运行`B.Bar()`。那将耦合我的代码，我知道这很糟糕。

我想处理这个问题，就好像`B.Bar()`只是在做它的工作，并且不打算知道`A.Foo()`或任何其他可能想要标记的功能。换句话说，为未来的开发者提供插件支持。

您如何在 Javascript 中设计带有观察者或基于事件的回调的模块化、非耦合代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:17:14.223

这取决于您的场景是真正的事件，还是更多的异步操作：

## 基于事件

使用诸如微事件之类的东西，[您](https://github.com/jeromeetienne/microevent.js)可以执行以下操作。这种模式非常常见且简单，因此我建议您在某些时候自己尝试一下，因为从理解的角度来看它很棒。

```
MicroEvent.mixin(A);

A.Foo = function () {
  //Do stuff A needs to do, then:
  A.trigger('foo-complete');
};

//Somewhere nice and separate and decoupled
A.bind('foo-complete', B.Bar); 
```

如果您需要执行更复杂的操作，例如过滤事件、映射事件等。反应式扩展（基于 C# 库）非常强大，但如果您不需要该功能，这是一个可以加载的大库。

## 异步操作

### 使用回调

这可以使用回调来完成，这对于相当简单的操作非常有用：

```
A.Foo = function (cb) {
  //Do stuff A needs to do, then:
  if (cb) cb();
};

A.Foo(B.Bar); 
```

### 使用承诺

这些最初看起来更复杂，但它们很容易组合，并且内置了处理错误的好方法。

使用[Q](https://github.com/kriskowal/q)这是更流行的 Promise 库之一（同样，有很多这样的库）：

```
A.Foo = function () {
  var def = Q.defer();
  setTimeout(function () {
    //Simulate async operation
    def.resolve();
  }, 1000);
  return def.promise;
};

A.Foo().then(B.Bar).end(); 
```

### 使用控制流库

控制流库（可以说是 Promise 的一个特例）旨在帮助您编写基于回调系统的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:43:13.797

Dojo 允许您收听函数调用。

```
dojo.connect("foo", A, function(){
  B.bar();
}); 
```

# c# - C# Word 自动化：用文本替换图片

> ID：12163835
> 
> 赞同：1
> 
> 时间：2012-08-28T16:43:22.697
> 
> 标签：c#, .net, winforms, office-interop, word-automation

我正在编写一个软件，它需要用图像或文本替换图像。我找到了一些代码来用它工作正常的图像替换图像。我想调整这段代码，以便我也可以**用文本替换图像**。我知道有更好的方法可以做到这一点，但我特别需要使用 Interlope 来完成。任何帮助，将不胜感激。

```
using System.Collections.Generic;
using Word = Microsoft.Office.Interop.Word;

namespace WordExample
{
class WordExample
{
    #region Constructor
    public WordExample()
    {
        WordApp = new Microsoft.Office.Interop.Word.Application();
    }
    #endregion

    #region Fields
    private Word.Application WordApp;
    private object missing = System.Reflection.Missing.Value;
    private object yes = true;
    private object no = false;
    private Word.Document d;
    private object filename = @"C:\FullPathToFile\example.doc";
    #endregion

    #region Methods
    public void UpdateDoc()
    {
        d = WordApp.Documents.Open(ref filename, ref missing, ref no, ref missing,
           ref missing, ref missing, ref  missing, ref  missing, ref  missing,
           ref  missing, ref missing, ref yes, ref  missing, ref  missing, ref  missing, ref  missing);
        List<Word.Range> ranges = new List<Microsoft.Office.Interop.Word.Range>();
        foreach (Word.InlineShape s in d.InlineShapes)
        {
            if (s.Type == Microsoft.Office.Interop.Word.WdInlineShapeType.wdInlineShapePicture)
            {
                ranges.Add(s.Range);
                s.Delete();
            }
        }
        foreach (Word.Range r in ranges)
        {
            r.InlineShapes.AddPicture(@"c:\PathToNewImage\Image.jpg", ref missing, ref missing, ref missing);
        }
        WordApp.Quit(ref yes, ref missing, ref missing);
    }
    #endregion
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:17:12.610

我不熟悉使用单词 intelop，所以现在知道了。解决方案非常简单并且正在运行。只是添加以供将来参考。BO.image 是一个包含数据和数据类型的简单对象。

```
private static void FindAndReplaceImages(Word.Document d, BO.ImageReplace image)
{
    object missing = System.Reflection.Missing.Value;
    List<Word.Range> ranges = new List<Microsoft.Office.Interop.Word.Range>();
    foreach (Word.InlineShape s in d.InlineShapes)
    {
        if (s.Type == Microsoft.Office.Interop.Word.WdInlineShapeType.wdInlineShapePicture)
        {
            ranges.Add(s.Range);
            s.Delete();
        }
    }

    foreach (Word.Range r in ranges)
    {
        if (image.DataType == "image")//then image.Data is a location on disk
        {
            r.InlineShapes.AddPicture(image.Data, ref missing, ref missing, ref missing);
        }
        else if(image.DataType == "word")//then image.Data is a string
        {
            r.InsertBefore(image.Data);
        }
    }
} 
```

# xml - 地标在地图上为绿色，但在导航栏上为橙色

> ID：12163836
> 
> 赞同：0
> 
> 时间：2012-08-28T16:43:24.707
> 
> 标签：xml, google-maps, maps, kml

我想知道您是否可以就以下问题向我提出建议或指出正确的方向。

在 KML 文件中，我有一个地标，它的样式告诉它是橙色的；但是它在地图上显示为绿色：

![在此处输入图像描述](../Images/36b4a5cab1647c45f9f32851df3b80e7.png)

正如您在导航栏中看到的那样，它是橙色的：

![在此处输入图像描述](../Images/66594c2a4653110a821b07412dceafb6.png)

是什么导致这种情况发生？

这是地图的图片：

![在此处输入图像描述](../Images/569b3535e0fafa24cf385531adbc0c62.png)

**为什么地图上的地标颜色与导航栏的颜色不同？**请注意，有些地标可以工作（它们在地图和导航上的颜色相同），而有些则不起作用！**我究竟做错了什么？**

这是我的 KML 标头：

```
<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2"><Document>
    <name></name>
    <description></description>
    <Style id="MentalHealthFacilitiesClinic">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/orange_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

       <Style id="MentalHealthFacilitiesHospital">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/orange_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

       <Style id="MentalHealthFacilitiesLTC">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/orange_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

       <Style id="MLCustomer">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/green_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

       <Style id="PastMLCustomer">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/yellow_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

       <Style id="SuboxoneTreatment">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/blue_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style>

     <Style id="SuboxonePrescribers">
      <IconStyle>
        <scale>1</scale>
        <Icon>
          <href>http://static.batchgeo.com/images/icons/paleblue_shadow_Marker.png</href>
        </Icon>
        <hotSpot x=".3" y=".8" xunits="fraction" yunits="fraction" />
      </IconStyle>
      <LabelStyle>
        <scale>0</scale>
      </LabelStyle>
      <BalloonStyle>
        <text><![CDATA[ <b>$[name]</b><br />$[address]<br />$[description]]]></text>
      </BalloonStyle>
    </Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:56:16.350

你有两个直接在彼此顶部的标记。您可以通过阴影更暗的方式或查看 KML 文件来判断。

# ios - iOS：从单独的 viewController 调用方法

> ID：12163837
> 
> 赞同：0
> 
> 时间：2012-08-28T16:43:26.747
> 
> 标签：ios

在我的主视图控制器中，我有一个调用弹出框的按钮。由于弹出框有它自己的视图控制器，它的按钮调用弹出框视图控制器中的方法。但是我如何从主视图控制器调用方法呢？

我试过这个。在弹出视图控制器中，我在 .h 中添加了一个属性

```
@class ViewController;

@interface PopoverContent : UIViewController <UITextFieldDelegate>
...
@property (strong, nonatomic) ViewController *parentView; 
```

在我的 popover 实现中，我在 viewDidLoad 中执行了此操作：

```
self.parentView = [[ViewController alloc] initWithNibName:nil bundle:nil]; 
```

在 ViewController 我有一个名为 generateHash 的方法，所以我尝试了

```
[parentView generateHash]; 
```

但我得到了错误：

```
No visible @interface for 'ViewController' declares selector 'generateHash' 
```

知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:54:19.437

删除此行，不想创建视图控制器的新实例

```
self.parentView = [[ViewController alloc] initWithNibName:nil bundle:nil]; 
```

更改此行

```
@property (strong, nonatomic) ViewController *parentView; 
```

对此，因此您的父视图指针属于正确的类类型

```
@property (weak) ParentView *parentView; 
```

现在在父视图 .m 文件中

```
- (void) createPopup
{
    PopoverView *popoverV = [[PopoverView alloc] init];
    popoverV.parentView = self;

    //And some command to show your popup, addSubview, or presentModal, or whatever
} 
```

然后在 PopoverView.m 文件中，您可以像这样调用 parentView 的方法

```
[self.parentView SomeMethod]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:59:35.617

这是使用委托协议的好地方。在 PopoverContent.h 中，添加如下内容：

```
@protocol PopoverContentDelegate : NSObject
    - (void) method1;
@end 
```

自然，您可以拥有多个方法，并且这些方法可以像任何其他方法一样返回值并接受参数。此外，在同一个文件中，添加名为`delegate`. （从技术上讲，它可以被称为任何东西，但是如果您将其称为委托，那么查看您的代码的每个人都会确切地知道您在做什么。）

```
@interface PopoverContent

@property (weak) id<PopoverContentDelegate > delegate;
//other properties and methods
@end 
```

最后，在“主”视图控制器的 .m 文件中，导入 PopoverContent.h 文件并将委托设置为 self。还要实现 method1 来做任何你需要做的事情。

```
//Create the view controller
myPopoverContentController.delegate = self;
//Create the popover with the view controller. 
```

现在，在 PopoverContent 控制器中，您可以在任何需要的地方调用委托的 method1。

```
[delegate method1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T17:06:02.850

首先，要回答您的问题，您可能必须在 ViewController.h 文件中定义 generateHash 方法。

其次，我建议您的设计方法不是最佳的。generateHash 方法可能需要位于另一个可以从 ViewController 和 Popover 内容控制器调用的文件中。例如，考虑另一个objective-c .h/.m 对“MyHashMethods”：

```
 MyHashMethods.h

    + (void)generateHash; 
```

* * *

```
 MyHashMethods.m

    + (void) generateHash
    {
         // hash code
    } 
```

这将允许您将 MyHashMethods.h 包含在您需要的任何视图控制器中，然后调用

```
 [MyHashMethods generateHash]; 
```

当你需要它的时候。

# osgi - pax-exam (v2.5) - 无法部署 camel-xstream

> ID：12163838
> 
> 赞同：-1
> 
> 时间：2012-08-28T16:43:30.983
> 
> 标签：osgi, apache-camel, pax-exam

我正在尝试理解/获取 PAX-EXAM 的工作示例。据我了解，我需要部署我想要测试的包（在本例中为 boohoo-esb-common）和它使用的任何包（在本例中为 camel-xstream）。

但是，当我尝试运行测试时，pax-exam/felix 无法部署 xstream 功能。以下是我在执行以下操作时在控制台窗口中遇到的错误： mvn clean install

> 错误：捆绑 com.boohoo.boohoo-esb-common [25] 错误启动文件：/C:/Users/GARETH~1.HEA/AppData/Local/Temp/1346170773171-0/bundles/com.boohoo.boohoo-esb -common_1.0.0.SNAPSHOT.jar（org.osgi.framework.BundleException：捆绑com.boohoo.boohoo-esb-common [25]中未解决的约束：无法解决25.0：缺少要求[25.0] osgi.wiring.package； (&(osgi.wiring.package=org.osgi.service.blueprint)(version>=1.0.0)(!(version>=2.0.0)))) org.osgi.framework.BundleException：捆绑中未解决的约束com.boohoo.boohoo-esb-common [25]：无法解析 25.0：缺少要求 [25.0] osgi.wiring.package；(&(osgi.wiring.package=org.osgi.service.blueprint)(version>=1.0.0)(!(version>=2.0.0))) 在 org.apache.felix.framework.Felix.resolveBundleRevision( Felix.java:3826）在 org.apache.felix.framework。

我附上了一个简单的[例子](http://bit.ly/PoXNeI)，希望能说明我的意思。

我是否以正确的方式解决这个问题？还是我不知道如何使用pax-exam ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:48:04.827

您的理解是正确的（您必须提供您测试捆绑所需的所有捆绑包），您的执行不是:) 您仍然缺少捆绑包。显然您的捆绑包`boohoo-esb-common`需要一个[Blueprint Container](http://wiki.osgi.org/wiki/Blueprint)。

# nsubstitute - N替换多个返回序列

> ID：12163840
> 
> 赞同：9
> 
> 时间：2012-08-28T16:43:38.327
> 
> 标签：nsubstitute

我想替换对象以返回不同对象的序列。例如：

```
var http = Substitute.For<IHttp>();
http.GetResponse(Arg.Any<string>()).Returns(resourceString, resourceString2);
http.GetResponse(Arg.Any<string>()).Returns(x => { throw new Exception(); }); 
```

将返回resourceString 然后resourceString2 然后异常。

或者是这样的：

```
var http = Substitute.For<IHttp>();
http.GetResponse(Arg.Any<string>()).Returns(resourceString, x => { throw new Exception(); }, resourceString2); 
```

将返回resourceString，然后是异常，然后是resourceString2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-17T17:54:46.907

现在这是 NSubstitute 中支持的功能，具有非常友好的界面。

这将是......

```
var http = Substitute.For<IHttp>();
http.GetResponse(Arg.Any<string>()).Returns(
  x => resourceString,
  x => resourceString2,
  x => { throw new Exception(); }
); 
```

[文档可以在这里找到](http://nsubstitute.github.io/help/multiple-returns/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T00:06:26.200

***这个答案已经过时了——NSubstitute 现在直接支持这个。有关更多信息，请参阅[@dangerdex](https://stackoverflow.com/a/38424249/906)对此问题的回答。***

* * *

NSubstitute 中的多重返回语法仅支持值。要同时抛出异常，您需要将一个函数传递给`Returns`，并自己实现所需的逻辑（例如`Returns(x => NextValue())`）。

Haacked 的博客上有一个使用队列[的 Moq 序列](http://haacked.com/archive/2010/11/24/moq-sequences-revisited.aspx)的相关示例。您可以使用 NSubstitute 做类似的事情（仅示例代码，使用风险自负:)）：

```
public interface IFoo { int Bar(); }

[Test]
public void Example() {
    var results = new Results<int>(1)
                    .Then(2)
                    .Then(3)
                    .Then(() => { throw new Exception("oops"); });
    var sub = Substitute.For<IFoo>();
    sub.Bar().Returns(x => results.Next());

    Assert.AreEqual(1, sub.Bar());
    Assert.AreEqual(2, sub.Bar());
    Assert.AreEqual(3, sub.Bar());
    Assert.Throws<Exception>(() => sub.Bar());
}

public class Results<T> {
    private readonly Queue<Func<T>> values = new Queue<Func<T>>();
    public Results(T result) { values.Enqueue(() => result); }
    public Results<T> Then(T value) { return Then(() => value); }
    public Results<T> Then(Func<T> value) {
        values.Enqueue(value);
        return this;
    }
    public T Next() { return values.Dequeue()(); }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T01:19:49.547

这是一个在没有额外类的情况下内联完成所有内容的示例。如果您经常这样做，我可能会选择单独的课程选项。

```
[Test]
public void WhenSomethingHappens()
{
    var something = Substitute.For<ISomething>();
    int callCount = 0;
    something.SomeCall().Returns(1, 2);
    something.When(x => x.SomeCall()).Do(obj => { if (++callCount == 3) throw new Exception("Problem!"); });

    Assert.AreEqual(1, something.SomeCall());
    Assert.AreEqual(2, something.SomeCall());
    Assert.Throws<Exception>(() => something.SomeCall());
}

public interface ISomething
{
    int SomeCall();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T14:13:56.313

另一个带有 out 参数的示例。此外，在某些情况下，在单独的线程中定期调用函数时，它也很有用。我们可以以不同的方式模拟/模拟每个调用。

```
 List<AnyClass> items = new List<AnyClass>();

   mockIService.TryDoSth(out response).ReturnsForAnyArgs(p =>
            {
                p[0] = items;
                return true;
            }, 
            p =>
            {
                p[0] = items;
                return true;
            }, p =>
            {
                throw new Exception("Problem!"); 
            }); 
```

bool TryDoSth(out List 结果);

# javascript - 将 MessageBox 扩展为视图 - Ext JS 4.1

> ID：12163842
> 
> 赞同：3
> 
> 时间：2012-08-28T16:43:44.320
> 
> 标签：javascript, extjs, view, extjs4, messagebox

我正在尝试在视图中扩展 MessageBox，以便可以在整个应用程序中重用它。

似乎当我这样做时，我失去了一些使消息框有用的默认功能（消息、按钮定义、图标定义、默认拖动约束等）。文档有点混乱，因为似乎配置应该在 show() 函数中定义，我不确定如何在我的视图中设置它们。

我怎样才能真正将**消息框**组件扩展为视图？

基本消息框（我想用我的视图创建）：

```
Ext.Msg.show({
     title:'Error',
     msg: 'There was an error.',
     buttons: Ext.Msg.YESNOCANCEL,
     icon: Ext.Msg.QUESTION
}); 
```

渲染：

![普通消息框](../Images/3e50e828c1efd1c2000c6fcf404e43fd.png)

但是当我展示我的观点时：

```
Ext.create('IOL.view.app.Message').show(); 
```

我基本上最终得到了一个香草面板/窗口组件

```
Ext.define('IOL.view.app.Message', {

    extend : 'Ext.window.Window',

    config: {

    },

    constructor: function(config) {
        this.initConfig(config);
        this.callParent(arguments);
    },

    initComponent : function() {

        Ext.apply(this, {
            xtype: 'messagebox',
            width: 400,
            height: 200,
            title:'Error',
            html: 'There was an error.',
            buttons: [
                { text: 'Button 1' }
            ]

        });

        this.callParent(arguments);
    }// initComponent
}); 
```

渲染：

![在此处输入图像描述](../Images/ea53a5b58b267ae13114977e4c5a4425.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T17:27:18.123

看来您正在扩展一个`Ext.window.Window`并将消息框配置应用到它。为什么不只是扩展`Ext.window.MessageBox`：

```
Ext.define('IOL.view.app.Message', {
    extend : 'Ext.window.MessageBox',
    width: 400,
    height: 200,
    title: 'Error',
    html: 'There was an error.',
    buttons: Ext.Msg.YESNOCANCEL,
    icon: Ext.Msg.ERROR,

    // whatever else you want to do
    initComponent : function() {

        this.callParent(arguments);
    }
}); 
```

@EricCook 在下面提出了一个很好的观点。该类`MessageBox`旨在作为单例在应用程序中重用，而不是真正用于子类化。

在你的问题中你说：

> 我正在尝试在视图中扩展 MessageBox，以便可以在整个应用程序中重用它

我可以理解，如果你想创建一个不同*类型*的消息框，你可以用普通方法调用，你可以用你自己的按钮或图标`Ext.Msg.show`来扩展我想。`MessageBox`

但是对于常规使用，这不是您需要扩展的东西。为了在您的应用程序中重复使用，您可以在控制器中保存对您想要的消息框配置的引用，例如：

```
// SomeController.js
errorMsg: {
     title:'Error',
     msg: 'There was an error.',
     buttons: Ext.Msg.YESNOCANCEL,
     icon: Ext.Msg.QUESTION
}, 
```

然后，每当您想调用可以使用的那种类型的消息时（假设范围是控制器本身，或者您可以事先获得对控制器的引用）：

```
Ext.Msg.show(this.errorMsg); 
```

# javascript - bootstrap-typeahead.js 上下文中的 jquery.proxy

> ID：12163847
> 
> 赞同：0
> 
> 时间：2012-08-28T16:44:04.253
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在阅读以下代码行

```
 items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source 
```

来自[bootstrap-typeahead.js v2.1.0](http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js)。

有人可以解释一下我
是如何`this.source(this.query, $.proxy(this.process, this))`工作的吗？

当然：
1）我想`this.source`是指（1）中定义的函数，然后呢？

* * *

(1)

```
 element.typeahead({
        minLength: 3,
        source: function () {
             // some code
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:15:36.350

刹车：`items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source;`

所以这个对象有一个叫做源的属性，`this.source`它看起来`this.source`可能是一个数组或一个函数。它们谓词函数`$.isFunction(this.source)`接受一个对象，如果它是一个函数，则返回 true。如果它是一个函数`this.source(this.query, $.proxy(this.process, this))`将被执行。

现在停止`this.source(this.query, $.proxy(this.process, this))`通话。

我们从`$.isFunction(this.source)`调用的结果中知道这`this.source`是一个函数，它需要 2 个参数。第一个，`this.query`我猜是一个字符串。第二个，`$.proxy(this.process, this))`是回调函数。接受两个参数，`$.proxy`一个函数和一个对象/上下文，并返回一个新函数。返回的函数上下文 ( `this`) 确保为传入的对象/上下文。

`$.proxy`看起来像这样

```
var proxy = function( func, context ) {
    return ( function() {
        func.apply( context, arguments );
    });
};

//build a new function and set this to window
var newFunction = proxy( someOrtherFunction, window );

//use the new function
newFunction(); 
```

您可以在这里准备更多信息：http `$.proxy`: [//api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

从 生成的新创建的函数`$.proxy(this.process, this)`在`this.source`函数中用作回调。

# c# - 使用后台进程时鼠标光标未按预期显示

> ID：12163849
> 
> 赞同：0
> 
> 时间：2012-08-28T16:44:11.927
> 
> 标签：c#, wpf, backgroundworker

我正在运行一个长进程作为后台进程，因为该进程使我的 UI 无响应。

现在的问题是，当进程作为后台进程运行时，我想显示一个等待光标。我尝试使用调度程序来更新游标，但它不起作用。

我的进程在按钮单击时运行：

```
private void btnStartAsyncOperation_Click(object sender, EventArgs e)
{
    backgroundworkerprocess.RunWorkerAsync();
} 
```

在后台workerprocess事件中：

```
void backgroundworkerprocess_DoWork(object sender, DoWorkEventArgs e)
{
    this.dispatcher.invoke(DispatcherPriority.Background,
        new action((delegate) {
            this.cursor = cursors.wait
        })
    );
} 
```

我希望这会导致等待光标显示在表单上的任何位置，但它仅在鼠标悬停在按钮上时才会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:41:20.397

我不认为人们理解你。

试试这个，将它发送给 Dispatcher： Window.GetWindow(this).Cursor = Cursors.WaitCursor;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:21:36.580

```
private void btnStartAsyncOperation_Click(object sender, EventArgs e)
{
    this.Cursor = Cursors.WaitCursor;
    backgroundworkerprocess.RunWorkerAsync();
}

void backgroundworkerprocess_DoWork(object sender, DoWorkEventArgs e)
{
    // do work
} 
```

然后只需在 RunWorkerCompleted 事件中将光标改回即可。

# python - GAE 数据存储：查询具有多个等式的相同 StringListProperty 的性能

> ID：12163852
> 
> 赞同：1
> 
> 时间：2012-08-28T16:44:33.060
> 
> 标签：python, google-app-engine, google-cloud-datastore

假设我有一个模型

```
class MyModelList(db.Model):
  listed_props = db.StringListProperty(indexed=True) 
```

我用

```
SELECT * from MyModelList where listed_props = 'a' and listed_props = 'b' 
```

它会像我有一个模型一样具有几乎一样的性能（延迟方面）吗

```
class MyModelProps(db.Model):
  property_1 = db.StringProperty(indexed=True)
  property_2 = db.StringProperty(indexed=True) 
```

我会查询：

```
SELECT * from MyModelProps where property_1 = 'a' and property_2 = 'b' 
```

和综合指数

```
indexes:
- kind: MyModelProps
   properties:
   - name: property_1
   - name: property_2 
```

使用 MyModelList 对第一个示例的查询似乎更难回答，因为与第二个示例（我假设 1 个二进制搜索以找到开始，然后阅读）。

如果 MyModelList.listed_props 的索引需要跨多个 bigtable tablet 分片，这将特别复杂。

我可以期望两者的性能（延迟方面）大致相同吗？

PS：我问的原因是因为我喜欢使用 MyModelList.listed_props 因为更新现有实体要便宜得多，因为我可以摆脱很多复合索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:33:08.227

性能方面，在没有复合索引的情况下进行查询是一个非常糟糕的主意，例如

```
SELECT * from MyModelList where listed_props = 'a' and listed_props = 'b' 
```

如果你这样做，它的性能会更高

```
SELECT * from MyModelProps where property_1 = 'a' and property_2 = 'b' 
```

使用复合索引，即使它不需要。

我已经实现了这两种解决方案，并在一个拥有 270 万条记录的实时系统中运行它。具有综合指数的那个快了大约 100 倍。

有一篇很棒的文章解释了这一切：

[http://www.allbuttonspressed.com/blog/django/2010/01/An-App-Engine-limitation-you-didn-t-know-about](http://www.allbuttonspressed.com/blog/django/2010/01/An-App-Engine-limitation-you-didn-t-know-about)

# powershell - 用于检查是否从 CSV 文件启用帐户的 Powershell 脚本

> ID：12163854
> 
> 赞同：1
> 
> 时间：2012-08-28T16:44:39.473
> 
> 标签：powershell, active-directory

我在 CSV 文件中有大约 1000 个用户名的列表，我需要检查它们是否启用。我似乎找不到关于如何在不使用第三方管理单元的情况下执行此操作的教程，这不是一个选项。

看起来这应该是一个相当简单的脚本，但我似乎无法做到正确。

```
function Test-UserAccountDisabled
{
     param($account)
     $searcher = new-object System.DirectoryServices.DirectorySearcher
     $searcher.filter = "(sAMAccountName=$Account)"
     $user=$searcher.FindOne().GetDirectoryEntry()
     if($($user.userAccountControl) -band 0x2){$true}else{$false}
}

$file = Select-FileDialog -Title "Select a file" -Directory "C:\" -Filter "All Files (*.*)|*.*"

$users = Import-Csv $file

foreach($account in $users)
{
  Test-UserAccountDisabled($account)
} 
```

它返回“您不能在空值表达式上调用方法”。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:01:31.183

$Account 中有什么？

假设 CSV 文件包含 SamAccountName 列：

```
Import-Csv $file | Foreach-Object{

    $user = ([ADSISEARCHER]"(samaccountname=$($_.SamAccountName))").FindOne()

    if($user)
    {
        New-Object -TypeName PSObject -Property @{
            SamAccountName = $user.SamAccountName
            IsDisabled = $user.GetDirectoryEntry().InvokeGet('AccountDisabled')
        }
    }
    else
    {
            Write-Warning "Can't find user '$($_.SamAccountName)'"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:10:03.460

正如评论者所`latkin`提到的，看起来您正在调用`Test-UserAccountDisabled`C# 风格的函数。括号表示 PowerShell 中的数组或表达式。改变

```
Test-UserAccountDisabled ($account) 
```

到

```
Test-UserAccountDisabled $account 
```

如果仍然不能解决问题，请让我们知道**错误发生在哪一行**。

# c# - 如何从 IGrouping 中删除元素

> ID：12163855
> 
> 赞同：11
> 
> 时间：2012-08-28T16:44:40.557
> 
> 标签：c#, windows-runtime

如何直接从 IGrouping 中删除对象`IGrouping<DateTime, VMAppointment>`？

我目前知道的唯一方法是生成一个没有相关元素的新 IGrouping，但我不喜欢这种方式，因为它会在我的应用程序中造成一些麻烦。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T16:46:59.423

不，至少在一般情况下，没有办法改变 a `IGrouping<,>`——即使你知道具体的类型，我也不相信 .NET 框架公开的任何实现都允许改变组。

推测分组是某些查询的结果 - 因此，如果可能，请更改原始查询以排除您不感兴趣的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-22T16:31:12.793

我知道这是一个老问题，但希望这对其他人有帮助。解决方法是将组转换为列表，然后使用列表中的值而不是组。

```
var groups = someList.GroupBy(x => x...);

foreach (var group in groups)
{
    var groupList = group.ToList();

   ...

    groupList.Remove(someItem);

    //Process the other code from groupList.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-31T19:02:01.260

如果您在组中的属性上有可测试的条件（例如示例中的 null），则可以强制转换 using`Select`和 use ：`TakeWhile`

```
var removedItemsList = group.Select(x => x.TakeWhile(t => t.someProperty != null)); 
```

这将返回一个`IEnumerable<IEnumerable<YourGroup>>`.

# c# - 如何在 Spring.NET 中使用 EmailValidator？

> ID：12163857
> 
> 赞同：2
> 
> 时间：2012-08-28T16:44:46.070
> 
> 标签：c#, validation, spring.net

我试图[在 Spring.NET 中使用验证](http://www.springframework.net/doc-latest/reference/html/validation.html)来验证类的字符串属性是否是格式正确的电子邮件地址。我找到了 EmailValidator 类（[source](https://github.com/SpringSource/spring-net/blob/master/src/Spring/Spring.Core/Validation/Validators/EmailValidator.cs)，[documentation](http://www.springframework.net/docs/1.3.2/api/net-2.0/html/topic9258.html)），但我不确定在我的类中实际使用它所需的语法。

我正在尝试这个：

```
<v:email id="validate.myClass.MailFrom" test="MailFrom">  
  <v:message id="myClass.MailFrom" providers="myClassProvider"/>  
</v:email> 
```

但我得到了错误：

> 命名空间“http://www.springframework.net/validation”中的元素“组”在命名空间“http://www.springframework.net/validation”中具有无效的子元素“email”。预期的可能元素列表：命名空间“http://www.springframework.net/validation”中的“验证器、必需、条件、正则表达式、参考、集合、组、任何、独占”。

包含 EmailValidator 的同一个命名空间还包含 ConditionValidator、RegularExpressionValidator 等，它们似乎对应于允许的子元素。EmailValidator 似乎并非如此。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:37:55.963

尝试类似的东西

```
<v:validator test="MailFrom"
             type="Spring.Validation.Validators.EmailValidator, Spring.Core">
   <v:message id="myClass.MailFrom" providers="myClassProvider"/>
</v:validator> 
```

电子邮件验证器是自定义验证器，这意味着您必须指定其类型。在 xml 配置中，您使用验证器标记作为您自己的自定义验证器。请参阅[http://www.springframework.net/doc-latest/reference/html/validation.html#d4e3643](http://www.springframework.net/doc-latest/reference/html/validation.html#d4e3643)。关于命名空间中的其他验证器类具有自己的 XML 元素，我理解您的观点。也许电子邮件验证器被认为过于具体而无法保证其自己的 XML 元素？

# c - 在右值端使用 NULL 指针解引用是否危险？

> ID：12163861
> 
> 赞同：1
> 
> 时间：2012-08-28T16:45:15.363
> 
> 标签：c, pointers

我有以下代码。

```
int *a = NULL;
int b;

b = *a; 
```

它是否以任何方式未定义？我正在尝试访问 a 指向的位置，仅供阅读。它可以做什么错？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T16:46:45.393

> 它是否以任何方式未定义？

是的，行为未定义。

> 我正在尝试访问 a 指向的位置，仅供阅读。

指向的位置不存在。那里什么都没有。要读取某些内容，必须有一个要读取的值，但是空指针指向...无处。它没有指向任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:53:01.977

实现专门选择空指针的物理值，以使它们“指向”在给定平台上不包含任何值的地址。这意味着那里没有什么可看的。此外，在现代虚拟内存平台上，甚至可能没有与该地址关联的特定“那里”。

如果您只是出于好奇而这样做，它仍然无法在典型的现代平台上运行：[虚拟] 内存区域通常是“不是您的”，这意味着硬件/操作系统保护机制将阻止您阅读它（通过使您的程序崩溃）。

同时，该语言指出，任何取消引用空指针的尝试都会导致未定义的行为，无论您取消引用它的目的是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T16:46:41.943

是的，这是完全未定义的行为。您正在取消引用一个空指针。什么事情都可能发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T16:53:15.043

不要取消引用 NULL 指针。这就像穿越溪流，但更糟。我什至不确定你想要完成什么？您是否要初始化两个指向 NULL 的指针？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T19:48:12.073

结果是不确定的，在不同的平台下会有所不同。

NULL 等于 0。因此说`int* a = NULL`意味着你创建了一个指向地址 0 的指针，它应该包含一个整数。

通过取消对 a 的引用，`b = *a`您可以指示程序转到地址 0 并获取数据。

现在，根据平台的不同，用户代码很可能无法访问地址 0。如果您没有在操作系统之上运行（例如在微控制器环境中），那么地址 0 通常是内部 ROM 的开头。在其他情况下，它可以是堆栈的开头等。

在大多数情况下，当您取消引用空指针时，您将获得空指针异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T20:05:49.837

你有两个在这里弹出的警报。`NULL`标准严格禁止所有其他形式的空指针。不是因为它们通常在内部通过一个位模式来实现，`0`用于表示这样的指针，而是因为这是指针的一对一保留值，表明它没有指向任何地方。不要这样做。

有一个指向与整数值对应的地址的指针`0`是另一回事。您只能通过某种技巧来强制执行这样的值和对点的解释，例如

```
union over {
  int *a;
  uintptr_t b;
} ov;

ov.b = 0;
int c = *ov.a; 
```

然后发生的事情完全取决于您的平台。如果`0`是您地址空间中的有效地址，这可能会起作用，但可能不会。除非你知道得更好，否则不要这样做。

# c++ - 通过引用或值传递函数？

> ID：12163863
> 
> 赞同：3
> 
> 时间：2012-08-28T16:45:18.873
> 
> 标签：c++, stl

```
#include <iostream>
#include <algorithm>
using namespace std;

bool myfn(int i, int j) { return i<j; }

int main () {
int myints[] = {3,7,2,5,6,4,9};

 // using function myfn as comp:
cout << "The smallest element is " << *min_element(myints,myints+7,myfn) << endl;
cout << "The largest element is " << *max_element(myints,myints+7,myfn) << endl;

return 0;
} 
```

考虑到上面的代码，如果我们通过`myfn`或`&myfn`到 有什么区别`min_element`吗？当我们试图传递一个函子时，哪一个是更标准的方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T16:47:57.160

通常，按引用传递和按值传递仅指传递变量，而不是函数。（模板函数引入了一些复杂性，但这是另一个讨论。）在这里，您将`myfn`作为指向函数的指针传递。如果你改用没有区别`&myfn`。编译器将隐式转换`myfn`为指向具有该名称的函数的指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T16:47:39.953

> 如果我们将 myfn 或 &myfn 传递给 min_element 有什么区别吗？

无论如何，不`myfn`​​可以隐式转换为*指向函数的指针。*所以根本没有区别。

# javascript - 在 Firebug 控制台中观察 javascript 命名空间变量

> ID：12163865
> 
> 赞同：0
> 
> 时间：2012-08-28T16:45:47.793
> 
> 标签：javascript, position, firebug, mouse, watch

这可能很简单，也可能不简单。我正在尝试在 JavaScript 中跟踪鼠标位置，并且我想使用 Firebug 观察当前位置。

我的页面有：

```
var mouse_position = {};
mouse_position.x = 0;
mouse_position.y = 0; 
```

然后在主要内容的 mousemove 上更新这些变量。我知道这行得通，但我想多看一点。现在，在我的 Firebug 控制台中，我可以向 mouse_position.x 添加一个手表，当我添加它时，它会获取当前位置。这一切都很好。

但是，当我移动鼠标时，控制台不会更新。这是一个限制，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:27:43.000

`console.log`打印到控制台 - 这与添加评估其内容的手表不同；这只是一个印刷品。

如果您想伪造“手表”，则可以在每次 javascript 变量之一更改时更新元素的文本：

[http://jsfiddle.net/f8N69/1/](http://jsfiddle.net/f8N69/1/)

```
var mouse_position = {
    x: 0,
    y: 0
};

var box = document.getElementById('test');

document.onmousemove = function (e) {
    mouse_position.x = e.pageX;
    mouse_position.y = e.pageY;
    box.textContent = 'X: ' + mouse_position.x + ' Y: ' + mouse_position.y;
}; 
```

它不如实时观看好，因为您必须触摸代码，但它可以用于调试目的。

注意：`pageX`,`pageY`和`textContent`不适用于 IE<8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:54:31.777

您可以使用`console.log(mouse_position.x,mouse_position.y)`

# .net - 如何防止 XElement 值使用区域设置格式？

> ID：12163868
> 
> 赞同：0
> 
> 时间：2012-08-28T16:45:57.617
> 
> 标签：.net, linq, excel

我在美国，我的同事在俄罗斯。我们每个人都使用以下简介：

```
 Dim num As Single = 0.123
        Dim myData As XElement
        myData = New XElement(myPrefix + "Data", New XAttribute(myPrefix + "Type", "Number"), New XAttribute("foo", "bar"))
        myData.Value = num 
```

但是，当我们在 Quickwatch 中检查 myData 或将内容保存到 XML 时，他看到**0,123**而我看到**0.123**，这显然是基于我们的语言环境。

有没有办法防止这种情况发生？我们的代码正在将此值导出到 XML 文件，并在 Excel 中打开它，但由于此语言环境问题，这些值不正确。我们每个人都创建了一个 XML 格式的简单 Excel 文件，基础数据是美国（点与逗号）格式的 alawys。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:52:22.887

这就是问题：

```
newData.Value = num 
```

的类型`XElement.Value`是`String`，所以你正在使用从`Single`to的“标准”转换`String`- 我怀疑如果你已经打开，这会导致编译时失败`Option Strict`。`Option Explicit`

为了根据正常的 LINQ to XML 规则设置值，您需要：

```
newData.ReplaceAll(num) 
```

或者只是添加一个文本值但保留子元素：

```
newData.Add(num) 
```

`newData`（说实话，不清楚从哪里来 - 你已经展示了`myData`但没有`newData`。）

# c# - 使用 spring.net 创建一个字符串对象

> ID：12163874
> 
> 赞同：1
> 
> 时间：2012-08-28T16:46:52.130
> 
> 标签：c#, string, dependency-injection, inversion-of-control, spring.net

我目前正在使用 spring.net 对 .net 项目 c# 进行依赖注入。我正在通过 xml 配置文件配置我的 spring。在这我正在创建我的对象等。

我想在我的 xml 文件中创建一个带有字符串值的常量对象。这可能吗？如果可以，我该如何实现？我想继续并在多个地方使用这个值，因此我采用了这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T05:08:04.407

MyString 是单例的，因为 spring 对象默认是单例的

```
<object id="MyString" type="System.String" factory-method="Copy">
  <constructor-arg index="0">
    <value>SomeStringValue</value>
  </constructor-arg>
</object> 
```

以下是参考方法`MyString`：

```
<object id="SomeObj" type="ExampleSpring.SomeObj, ExampleSpring">
  <property name="Str" ref="MyString" />
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:51:43.507

其他两个答案为在容器中配置字符串对象提供了合理的解决方法。

如果您希望在配置文件中重用字符串常量，那么最好使用`VariablePlaceholderConfigurer`. 然后你可以编写你的配置文件，如：

```
<object id="JohnUsingVariableSource"
        type="XmlConfig.StringInjection.Person, XmlConfig">
  <property name="Name" value="${JohnsFullName}" />
</object> 
```

占位符的值`${JohnsFullName}`可以从许多[变量源](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-variablesource)配置，例如`appSettings`app.config 中的部分或 Java 样式属性文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:51:33.183

我建议将此字符串封装为类的只读字段，然后使用 Spring（或其他读者使用的任何 IoC）将该类注册为单例范围。

这样做的好处是您不必尝试解析字符串对象；您解析包含字符串的对象（因此允许您拥有许多此类包含字符串的对象）。

如果你真的想要，你可以在注册对象时定义特定参数的注入值，使用 constructor-arg 标签；这样，在解析 DatabaseObject 时，当 Spring 遇到名为“connectionString”的构造函数参数时，它应该提供您在 XML 中指定的特定文字。更多阅读[玫瑰印度](http://www.roseindia.net/tutorial/spring/spring3/ioc/springconstructorindexargs.html)。

# javascript - Python左移（符号问题）

> ID：12163875
> 
> 赞同：3
> 
> 时间：2012-08-28T16:46:55.070
> 
> 标签：javascript, python, integer, signed, bit-shift

在这个例子中，我得到一个正数，但我需要一个 Python 中的表达式，它给出与 Javascript 中相同的结果。

如何在 Python 中获得负面结果？

**蟒蛇 2.7**

```
mv = 1732584193 << 5 
```

结果：

> mv = 55442694176

`bin(mv)`给`0b1100111010001010010001100000001`

**Javascript**

```
mv = 1732584193 << 5 
```

结果：

> mv = -391880672

`mv.toString(2)`给`-10111010110111001111111100000`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:53:12.763

您可以使用 ctypes 来执行此操作：

```
>>> import ctypes
>>> mv = ctypes.c_int32(1732584193)
>>> mv.value <<= 5
>>> mv
c_int(-391880672)
>>> bin(mv.value)
'-0b10111010110111001111111100000' 
```

# config - 80后如何阻止vim新建一行

> ID：12163885
> 
> 赞同：4
> 
> 时间：2012-08-28T16:47:54.877
> 
> 标签：config, vim

我使用 vim 作为 Python IDE 以及我的 Octopress 的一些降价编辑器。它每 80 个字符创建一个新行。我正在尝试关闭它（启用工作包装），这样典型文本文件的版本就不会那么痛苦了。

这是我的 .vim 配置：

```
filetype off
call pathogen#runtime_append_all_bundles()
call pathogen#helptags()

set foldmethod=indent
set foldlevel=99

map <c-j> <c-w>j
map <c-k> <c-w>k
map <c-l> <c-w>l
map <c-h> <c-w>h

map <leader>td <Plug>TaskList

map <leader>g :GundoToggle<CR>

syntax on                           " syntax highlighing
filetype on                          " try to detect filetypes
filetype plugin indent on    " enable loading indent file for filetype

let g:pyflakes_use_quickfix = 0

let g:pep8_map='<leader>8'

au FileType python set omnifunc=pythoncomplete#Complete
let g:SuperTabDefaultCompletionType = "context"

set number
set completeopt=menuone,longest,preview

set autochdir
let NERDTreeChDirMode=2
map <leader>n :NERDTreeToggle<CR>

map <leader>j :RopeGotoDefinition<CR>
map <leader>r :RopeRename<CR>

nmap <leader>a <Esc>:Ack!

set statusline=%F%m%r%h%w[%L][%{&ff}]%y[%p%%][%04l,%04v][%{fugitive#statusline()}]

map <leader>dt :set makeprg=python\ manage.py\ test\|:call MakeGreen()<CR>

" Execute the tests
nmap <silent><Leader>tf <Esc>:Pytest file<CR>
nmap <silent><Leader>tc <Esc>:Pytest class<CR>
nmap <silent><Leader>tm <Esc>:Pytest method<CR>
" cycle through test errors
nmap <silent><Leader>tn <Esc>:Pytest next<CR>
nmap <silent><Leader>tp <Esc>:Pytest previous<CR>
nmap <silent><Leader>te <Esc>:Pytest error<CR>

" Add the virtualenv's site-packages to vim path
py << EOF
import os.path
import sys
import vim
if 'VIRTUAL_ENV' in os.environ:
    project_base_dir = os.environ['VIRTUAL_ENV']
    sys.path.insert(0, project_base_dir)
    activate_this = os.path.join(project_base_dir, 'bin/activate_this.py')
   execfile(activate_this, dict(__file__=activate_this))

EOF

set background=dark
colorscheme molokai
set spell
set textwidth=0 wrapmargin=0

" Auto-close brackets
inoremap {      {}<Left>
inoremap {<CR>  {<CR>}<Esc>O
inoremap {{     {
inoremap {}     {}
inoremap (  ()<Left>
inoremap ()     ()
inoremap ((     (
inoremap <  <><Left>
inoremap <<     <
inoremap <>     <> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T16:56:33.920

我相信这就是你想要的：[在 Vim 中没有换行符的自动换行](http://vim.wikia.com/wiki/Word_wrap_without_line_breaks)。

相关部分：将这些设置添加到您的配置文件中：

```
set wrap
set linebreak
set nolist  " list disables linebreak 
```

在您明确点击“Enter”之前，这将在视觉上换行但不会插入换行符。

编辑：根据评论，添加该行也是一个好主意

```
set textwidth=0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T16:53:08.890

您只需要设置 textwidth 并换行：

```
set textwidth=0
set wrap 
```

# visual-studio-2012 - 如何从 Visual Studio 2012 中的变更集详细信息打开实际文件，而不是一些散列只读服务器副本？

> ID：12163890
> 
> 赞同：4
> 
> 时间：2012-08-28T16:48:08.743
> 
> 标签：visual-studio-2012, tfs, tfs-code-review

*这是我第一次在 VS 中尝试这个，更不用说 VS 2012，所以如果答案是常识，我想我只是不那么常见。（是的，Google 也让我失望了 --- 或者我的 Google-fu 只是需要上油。）*

我正在查看我的 TFS 代码仓库历史记录，并且从变更集列表中，我选择查看变更集详细信息。在 VS 2012 右侧边栏上，我得到了这个特定变更集的所有已更改文件的列表。

但是，我想打开其中一个文件并直接修改它们（基本上是为了简单的代码审查和内务管理），所以我右键单击一个文件，然后选择**Open**。

不幸的是，这并没有打开我的本地文件副本，而是（看似）从服务器下载文件并给我服务器副本，并带有修改后的文件名（后缀短哈希）。我根本无法修改它。

**有没有办法从变更集详细信息中打开我的本地文件副本？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-31T08:30:52.703

您可以做的是右键单击该文件。然后选择 open in **source control explorer**。双击那里的文件。

鲍勃现在应该是你的叔叔了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T17:02:31.607

如果您右键单击并将其与您的工作区版本进行比较，则会打开工作区版本和变更集版本之间的差异。我不相信有办法直接打开变更集文件的本地版本，因为该版本实际上并不存在于您的本地工作区中。从变更集中打开它时打开的是与该变更集关联的特定版本。该文件甚至可能不存在于当前解决方案中，因此在相同情况下打开工作区版本甚至是不可行的（或者您可能从未获得该文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T18:47:14.200

据我所知，没有好的方法可以做到这一点（我希望有）。这有点耗时，但您可以通过一些手动操作获得相同的效果：

打开变更集，回滚更改，转到挂起的更改，然后打开所有文件。在最后一个文件打开后，返回待处理的更改并撤消更改（即您的回滚）。该变更集中的所有文件现在应该是最新的并在 Visual Studio 中打开。

# objective-c - 特殊字符不适用于自定义字体

> ID：12163893
> 
> 赞同：1
> 
> 时间：2012-08-28T16:48:29.897
> 
> 标签：objective-c, ios, unicode, fonts, special-characters

在我的应用程序中使用自定义字体时，我遇到了特殊字符（如 â é ü）的问题。

出于某种原因，它用看似随机的字符替换了重音字符。我正在尝试将 a`UILabel`的文本设置为**Château**这个词，但这两个：

```
myLabel.text = [NSString stringWithFormat:@"Château"]; 
```

和 （

```
myLabel.text = [NSString stringWithFormat:@"Ch\u00E1teau"]; 
```

正在将标签文本设置为**Ch,teau**。这仅在使用自定义字体时发生，当我在控制台中记录结果时，会显示正确的字符。我尝试设置不同的字符串编码。这些字符存在于字体中（如果我在 TextEdit、MS Word 等中键入相同的单词，它会显示得很好），我还验证并检查了 FontBook 中的字体。这是一个 .OTF 字体。

任何想法发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:07:30.570

并非所有字体集都有所有字符。在 windows 中打开字符映射加载您的自定义字体并查看它是否存在。可能是字体的作者有意将其置于错误的代码中。![看看这两种字体的区别](../Images/0b8a149710801800e9e6722c682bf883.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T17:42:54.457

尝试：

```
[NSString stringWithFormat:@"Ch\u00E1teau"] 
```

请注意，正斜杠已更改为反斜杠。

PS：在实际程序中验证。

# wpf - 设计时间 - 动态

> ID：12163895
> 
> 赞同：0
> 
> 时间：2012-08-28T16:48:35.740
> 
> 标签：wpf, visual-studio-2010, xaml, dynamic, design-time

我可以在设计时使用动态对象创建视图吗？（与视觉工作室 2010）

例如，或者什么，这可能吗？

```
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:dyn="clr-namespace:System.Dynamic;assembly=System.Core"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         mc:Ignorable="d" 
```

和

> ```
> <d:DesignProperties.DataContext>
>     <dyn:ExpandoObject>
>         <dyn:ExpandoObject.Name>MyName</dyn:ExpandoObject.Name>
>     </dyn:ExpandoObject>
> </d:DesignProperties.DataContext> 
> ```

上面的例子不起作用。

有时我的课程管理起来很复杂。而且我不能在设计时使用它们，使用动态类型的想法不会改变绑定（我将使用的属性）并获得愿景。

我不知道我是否清楚，但如果你有一些可以帮助我的东西会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:54:27.363

这在任何情况下都不应该起作用，无论是设计还是运行时。

您可以使用`ExpandoObjects`，但只能通过字典语法：

```
<dyn:ExpandoObject>
    <sys:String x:Key="Name">MyName</sys:String>
</dyn:ExpandoObject> 
```

虽然我不知道 GUI 设计师的垃圾是否能够处理，我也不知道这是否适用于已编译的 XAML。

**编辑：**因为我认为你不能编译它，因为某些组件失败：

> 错误 1 ​​Key 属性只能用于字典中包含的标记（例如 ResourceDictionary）。

嗯，这是一本该死的字典，好吧……

* * *

不过，您可以使用[标记扩展](http://msdn.microsoft.com/en-us/library/ee855815.aspx)，您可以`DictionaryFactoryExtension`从[这个答案](https://stackoverflow.com/a/9449614/546730)中获取并修改它，如下所示：

```
public override object ProvideValue(IServiceProvider serviceProvider)
{
    var expando = (IDictionary<string,object>)new ExpandoObject();
    foreach (DictionaryEntry kvp in Dictionary)
        expando[(string)kvp.Key] = kvp.Value;

    return expando;
}

//The designer uses this for whatever reason...
public object this[object key]
{
    get { return this.Dictionary[key]; }
    set { this.Dictionary[key] = value; }
} 
```

然后你可以像使用它一样使用它`ExpandoObject`：

```
<!-- Of course you can also hard-code the key-type in the class,
     it should be a string in all cases when using an ExpandoObject anyway -->
<local:DictionaryFactory KeyType="sys:String" ValueType="sys:Object">
    <sys:String x:Key="Name">MyName</sys:String>
</local:DictionaryFactory> 
```

设计师应该能够处理这个问题。

# python - Python 2.7：“未解决的导入：ConfigParser”

> ID：12163896
> 
> 赞同：2
> 
> 时间：2012-08-28T16:48:37.347
> 
> 标签：python, pydev, configparser

我最近编写了一个 Python 2.7 脚本（在 Eclipse 上使用 PyDev），它利用了内置的 ConfigParser 模块，并且该脚本运行良好。但是当我将它导出并发送给同事时，他无法让它工作。即使我们使用完全相同的设置，他也会不断收到“未解决的导入：ConfigParser”错误。这不应该发生，因为 ConfigParser 是内置的。

我到处搜索，但似乎找不到任何可行的解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-29T22:53:54.940

ConfigParser 在 python 3 中重命名为 configparser。他可能正在使用 3 并且找不到旧的 py2 名称。

您可以使用：

```
try:
    import configparser as ConfigParser
except ImportError:
    import ConfigParser 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T23:15:32.667

要查看发生了什么，最好在两台计算机上比较正在使用哪个 sys.path （即：在正在运行的模块的开头放置下面的代码并比较每种情况下的输出）：

```
import sys
print '\n'.join(sorted(sys.path)) 
```

现在，如果在运行代码时没有出现错误（即：它运行良好并且没有异常），并且他仅在 PyDev 中收到错误，则可能是他这边的解释器配置不正确，并且打印的路径之一通过上面的命令没有被添加到 PYTHONPATH 中（可能是他在虚拟环境中并且没有将路径添加到原始 /Lib 或者添加了一些不应该存在的路径 - 甚至有一些 ConfigParser其他地方的模块与 Python 标准库中的模块冲突）。

# python - Fabric，无法在 django 上获取默认语言环境

> ID：12163898
> 
> 赞同：0
> 
> 时间：2012-08-28T16:48:52.870
> 
> 标签：python, django, locale, fabric

我有以下 django 管理命令：

织物测试.py

```
from django.core.management.base import NoArgsCommand
import locale

class Command(NoArgsCommand):

    def handle_noargs(self, **options):
        print locale.getdefaultlocale() 
```

我可以在本地运行：

```
$ /home/user/env/bin/python manage.py fabrictest
('en_US', 'UTF-8') 
```

但是，当我使用以下结构任务远程运行命令时

```
@task
def test():
    # run manage.py using the python bin from the virtualenv

    with cd(env.project_root):
        run("/home/user/env/bin/python manage.py fabrictest") 
```

我得到以下输出

```
[server] Executing task 'test'
[server] run: /home/user/env/bin/python manage.py fabrictest
[server] out: (None, None) 
```

为什么我得到`(None, None)`而不是`('en_US', 'UTF-8')`？这会为其他一些管理脚本生成错误（即，`syncdb`在创建超级用户时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:06:56.703

看看[这个问题](https://stackoverflow.com/questions/10339963/getdefaultlocale-returning-none-when-running-sync-db-on-django-project-in-pychar)，似乎那些是拾取的环境变量。

您可以在 run() 或使用 prefix() 上下文管理器中手动导出它们。您也可以尝试在 run() 中将 pty 设置为 False。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:03:25.040

从[文档](http://docs.python.org/library/locale#locale.getdefaultlocale)：

> 根据 POSIX，未调用 setlocale(LC_ALL, "") 的程序使用可移植的“C”语言环境运行。调用 setlocale(LC_ALL, "") 让它使用 LANG 变量定义的默认语言环境。由于我们不想干扰当前的语言环境设置，因此我们以上述方式模拟行为......
> 
> ...代码和编码可以是 None 以防无法确定值。

如果您的程序无法使用`'C'`语言环境运行，则调用`setlocale()`和/或设置适当的环境变量，例如`LANG`.

# tsql - TSQL - 将字段从表传递到存储过程，然后将结果存储在临时表中

> ID：12163902
> 
> 赞同：0
> 
> 时间：2012-08-28T16:49:01.940
> 
> 标签：tsql, stored-procedures, temp-tables

我正在与一个具有大约十几个参数的存储过程的客户合作。

我需要从数据库中的表中获取参数值，然后将它们输入存储过程以获取数值。然后我需要将此值加入到 SELECT 语句中。

我知道我必须构建一个临时表才能将 SP 结果与我的 select 语句结合起来，但这对我来说是全新的，可以使用一些帮助。主要关注如何将字段值输入 SP。我还希望 Temp 表包含几个作为字段的参数，这样我就可以将它加入到我的 select 语句中。

任何和所有的帮助表示赞赏。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:02:01.430

您可以在声明的变量中捕获参数值。就像是：

```
DECLARE @Parm1 int, @Parm2 varchar(50) -- Use appropriate names and datatypes

SELECT @Parm1 = Parm1ColumnName, @Parm2=Parm2ColumnName
FROM TableWithParmValues
-- Include a WHERE condition if appropriate

DECLARE @ProcOutput TABLE(outputvalue int) -- use appropriate names and datatypes to match output

INSERT @ProcOuptut
EXECUTE MyProc @ProcParm1 = @Parm1, @ProcParm2 = @Parm2 -- Use appropriate names 
```

然后使用 @ProcOutput 临时表，并根据需要使用 SELECT 参数变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T17:33:51.897

*这是一个更好地格式化为答案的评论。*

您无需创建临时表或表变量即可将数值结果与其他数据连接起来。下面演示了使用`SELECT`s 而不显式创建任何表的各种好奇心：

```
declare @Footy as VarChar(16) = 'soccer'
select * from (
  select 'a' as Thing, 42 as Thingosity
  union all
  select *
    from ( values ( 'b', 2 ), ( 'c', 3 ), ( @Footy, Len( @Footy ) ) ) as Placeholder ( Thing, Thingosity )
  ) as Ethel cross join
  ( select 42 as TheAnswer ) as Fred 
```

# c# - 如何获取电脑和特定进程的 CPU 使用率？

> ID：12163903
> 
> 赞同：-1
> 
> 时间：2012-08-28T16:49:04.210
> 
> 标签：c#

我想获取当前每次 pc 总体使用情况的 cpu 使用情况，假设每 5 秒获取一次更新的 cpu 使用情况值。

并且每5秒获取具体进程名cpu使用率的值。例如，我将在运行时选择获取 cpu 使用率的进程。

所以在 Form1 中，当我运行程序时，我会看到两个标签每 5 秒更新一次。

这是我现在的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace CpuUsage
{
    public partial class Form1 : Form
    {

        private PerformanceCounter theCPUCounter;
        private PerformanceCounter theMemCounter;
        private PerformanceCounter specProcessCPUCounter;
        private float cpuUsage;
        private float memUsage;
        private string processname;

        public Form1()
        {
            InitializeComponent();

                theCPUCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");
                theMemCounter = new PerformanceCounter("Memory", "Available MBytes");
                specProcessCPUCounter = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);
                processname = specProcessCPUCounter.CounterName;
                cpuUsage = this.theCPUCounter.NextValue();
                memUsage = theMemCounter.NextValue();
                label1.Text = memUsage.ToString();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

我在设计器中有 label1 和 label2。CPUCounter 的值始终为 0。而且我不知道如何使用 specProcessCPUCounter 来获取特定的进程 cpuUsage。而且我不知道如何使它们每 5 秒更新一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:50:40.110

您需要添加一个 WinForms 计时器并更新其`Tick`处理程序中的标签文本。

# python - 将变量传递给 Jinja2 中的宏

> ID：12163904
> 
> 赞同：11
> 
> 时间：2012-08-28T16:49:09.413
> 
> 标签：python, google-app-engine, jinja2

我制作了一些小宏，用于显示文本行和标签：

```
{% macro input(name, text, help_text, value="", input_type) -%}
    <label for="id_{{name}}">{{text}}<span class="right">{{help_text}}</span></label>
    <input id="id_{{name}}" name="{{name}}" value="{{value}}" type="{{input_type}}" />
{{%- endmacro %} 
```

问题是当我调用 jinja2 宏时：

```
{{input("username", "Korisničko ime:", "Pomoć", {{value_username}}, "text")} 
```

当我使用作为参数调用输入时，我无法让它工作`{{value_username}}`，我总是收到错误。

你知道任何解决方案我如何调用`{{value_username}}`作为参数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T16:50:46.633

我相信

```
{{ input("username", "Korisničko ime:", "Pomoć", value_username, "text") }} 
```

应该管用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T17:53:01.180

尽管 Emmett J. Butler 提供了一个答案，但在宏参数的排序方面还是存在一些小问题。您当前使用以下签名：

```
input(name, text, help_text, value="", input_type) 
```

您应该始终将包含默认值的参数放在所有其他必需参数之后，因此将顺序更改为：

```
input(name, text, help_text, input_type, value="") 
```

现在，当使用变量作为参数调用宏时，您不需要将变量括起来，`{{ }}`因为您已经在`{% ... %}`.

# css - 非常简单的媒体查询不起作用

> ID：12163912
> 
> 赞同：0
> 
> 时间：2012-08-28T16:49:48.003
> 
> 标签：css, media-queries

我从其他地方复制了一些媒体查询代码，它们工作得很好，但是当合并到我自己的项目中时，它似乎不起作用。

我查看了以前的 stackoverflow 问题，并尝试实施修复或测试，例如，

通过应用不需要的背景颜色来检查媒体查询是否正常工作，但失败了。我还确保添加视口元标记。

这是我的媒体查询

```
/* Mobile Portrait Size to Mobile Landscape Size (devices and browsers) */
@media only screen and (max-width: 479px) { 

body { margin: 5px; width: 5px; }

.testimonial {

            background-color: black;
        }

 } 
```

现场页面可以在这里看到（点击推荐，然后点击图片）： http: [//krmmalik.com/me/](http://krmmalik.com/me/)

**更新：**刚刚和一位同事谈过，他似乎认为媒体查询不起作用的原因是因为推荐内容正在加载到 iframe 中，此时媒体检测没有发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:57:30.947

我试过了，效果很好。
如果最大宽度应为 479 像素，为什么要将正文宽度设置为 5 像素？

```
@media screen and (max-width: 479px){
   body { 
     margin: 5px;
   }
   .testimonial {
     background-color: #000;
   }
 } 
```

# python - pickle/zodb：如何处理带有类定义的移动 .py 文件？

> ID：12163918
> 
> 赞同：7
> 
> 时间：2012-08-28T16:50:06.783
> 
> 标签：python, refactoring, pickle, zodb

`ZODB`据我了解，我正在使用它`pickle`来存储类实例。我正在做一些重构，我想将我的`models.py`文件分成几个文件。但是，如果我这样做，我认为`pickle`将无法找到类定义，因此将无法加载我已经存储在数据库中的对象。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T17:15:43.413

您可以创建别名；因为一个`models.py`模块被拆分为多个新模块，您只能通过将类导入旧位置来做到这一点。

这两种方法都会导致您的实例泡菜的新副本引用新位置；如果您可以强制写入已移动类的*所有*实例，则无需保留别名。您可以通过在要再次写入的实例上设置`_p_changed`为来做到这一点。`True`

因此，要创建别名，请将您移动的类导入旧位置：

```
from newmodule1 import MyClass1, MyClass2
from newmodule2 import MyClass3 
```

如果您只*重命名*一个模块（因此相同的类都可以在一个新位置找到，可能是一组导入本身），您还可以为`sys.modules`旧名称创建一个条目：

```
import sys
import newmodule

sys.modules['full.path.to.old.module] = newmodule 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T17:10:28.570

只要您想在不迁移到新的类模型结构的情况下使 pickle 可加载：您可以在旧 model.py 的位置内使用重构类的别名导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T17:06:07.543

不幸的是，没有简单的解决方案。您可以通过以下模式将旧式对象与重构对象（我的意思是在另一个文件/模块中的类）转换

1.  将重构的类添加到您的代码中*而不*删除旧的类
2.  从根开始遍历您的数据库并用新的等价物替换*所有*旧对象
3.  压缩你的数据库（这很重要）
4.  现在您可以从源代码中删除旧课程

# objective-c - 允许 iOS 用户从应用程序包通过电子邮件发送 PDF

> ID：12163924
> 
> 赞同：1
> 
> 时间：2012-08-28T16:50:44.123
> 
> 标签：objective-c, ios, cocoa-touch, email, app-bundle

是否可以允许 iOS 用户通过电子邮件发送本地存储的 PDF 文档（包含在应用程序包中）？

我的项目中已经有一个功能，允许用户通过电子邮件发送 webView 正在显示的页面的链接，但我希望他们能够通过电子邮件发送本地存储的 PDF，而不仅仅是指向相应网址的链接。

当我触摸“此页面的邮件链接”时，它会创建一个指向本地文档的链接，例如`file:///...`

我正在使用它来显示本地文件：

```
SVModalWebViewController *webViewController = [[SVModalWebViewController alloc] initWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Military-Storage-Solutions" ofType:@"pdf"]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:55:59.437

您应该很容易直接访问该文件并获取它的数据，然后使用 MFMailComposeViewController 在某处插入以下代码：

```
NSData *data = // pdf data
NSString *fileName = @"thename.pdf";
NSString *mimeType = @"proper pdf mimetype";

[mailComposeViewController addAttachmentData:data mimeType:mimeType fileName:fileName]; 
```

# node.js - 服务器上的启动节点

> ID：12163926
> 
> 赞同：1
> 
> 时间：2012-08-28T16:50:53.297
> 
> 标签：node.js

我在我的服务器上设置了一个节点应用程序，我可以 ssh 进入我的目录并运行

```
node server.js 
```

伟大的服务器启动并运行良好，但是一旦我关闭我的 ssh 窗口并注销节点服务器停止并且我得到 io.socket 没有定义等等等。

这是我的 server.js

```
var port = process.env.PORT || 1337;

var io = require('socket.io').listen(port);

var archiveMessages = {};
var channels = ['foo channel', 'bar channel'];

var chat = io.of('/chat');
chat.on('connection', function(socket){
  console.log('connected: %s', socket.id);

  // push available channel list
  socket.emit('available_channel', channels);

  socket.on('join', function(value){
    console.log('%s joined channel: %s', socket.id, value.channelId);

    socket.join(value.channelId);
    socket.set('channel_id', value.channelId, function(){
      var messages = archiveMessages[value.channelId] || [];
      socket.emit('joined', messages);
      socket.broadcast.to(value.channelId).emit('user:join', {
        id: socket.id
      });
    });
  });

  socket.on('post', function(message){
    socket.get('channel_id', function(err, channelId){
      console.log('%s says<%s channel>: %s', socket.id, channelId, message);

      if(!(channelId in archiveMessages)){
        archiveMessages[channelId] = [];
      }
      archiveMessages[channelId].push(message);

      socket.emit('posted', {
        message: message
      });
      socket.broadcast.to(channelId).emit('user:message', {
        id: socket.id,
        message: message
      });
    });
  });

  socket.on('disconnect', function(){
    console.log('%s disconnected', socket.id);
    socket.get('channel_id', function(channelId){
      socket.leave(channelId);
      socket.broadcast.to(channelId).emit('user:leave', {
        id: socket.id
      });
    });
  });
});

var image = io.of('/image');
image.on('connection', function(socket){

  socket.on('upload', function(param){
    console.log('upload base64 size: %d', param.base64.length);

    if(param.download){
      socket.emit('download', {
        base64: 's' + new Array(65534).join('0') + 'e'
      });
    }
  });
}); 
```

我怎样才能让这个 server.js 持续运行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:56:27.953

您需要使用[Forever](https://github.com/nodejitsu/forever)将 Node 应用程序作为服务/守护程序运行。或者，你仍然想通过 SSH 在 shell 上运行它，使用类似`screen`或`tmux`.

永远使用：

[如何将 node.js 服务器作为守护进程启动？](https://stackoverflow.com/questions/4903570/how-does-one-start-a-node-js-server-as-a-daemon-process)

使用屏幕：

[http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/](http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/)

使用 Tmux：

[http://blog.hawkhost.com/2010/06/28/tmux-the-terminal-multiplexer/](http://blog.hawkhost.com/2010/06/28/tmux-the-terminal-multiplexer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:57:19.697

正如 JP 所说，Forever 是一个不错的选择。

同时，如果您在某种 Unix 变体机器上运行（如 LINUX 或 Mac），那么您已经拥有了所需的一切。只需运行以下命令：

```
nohup node server.js & 
```

这是在后台启动您的节点应用程序，并将应用程序的所有控制台输出重定向到名为“nohup.out”的本地文件中。

Forever 的好处是它会在崩溃时重新启动您的服务器进程。

注意：如果计算机重新启动，任何人都不会重新启动您的服务器应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T16:54:07.707

我相信你需要使用第三方工具来保持它的运行。如果在 Windows 上使用 IISNode，如果在 linux 上使用 nginx，可以为您管理 Node。

# javascript - 为什么 parseInt() 在 Firefox 中比 *1 慢得多？

> ID：12163928
> 
> 赞同：15
> 
> 时间：2012-08-28T16:50:56.677
> 
> 标签：javascript, performance, firefox

我有一个存储为字符串的值，我知道它总是一个整数。但我需要它作为一个数字，所以我在做`n = n * 1`. 然后我想“嗯，我可能应该只使用`parseInt()`. 然后我运行了一些 jsperf 测试，Firefox 中的结果很有趣：

[http://jsperf.com/parseintx1](http://jsperf.com/parseintx1)

总的来说，操作看起来非常相似，除了在 Firefox 中，使用`*1`速度非常快。这里发生了什么？

* * *

**编辑**

有人进行了以 10 为基础的测试，并整体更新了测试。点击这个也可以提供一些额外的反馈：http: [//jsperf.com/parseintx1/2](http://jsperf.com/parseintx1/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:30:06.427

无论如何，我都不是 JavaScript 引擎专家，甚至不是编译器专家，但我很确定这归结为编译器可以告诉这个事实：

```
var a = "123";
a = a * 1; 
```

真的完全一样：

```
var a = 123; 
```

因为“a”是一个局部变量，并且从它的初始化点到那个`* 1`表达式都是未使用的，所以根本没有必要生成代码来执行操作。在那之后，编译器也可能会说“a”不可能从函数中“逃脱”，所以真的没有*任何意义*；也就是说，`* 1`测试的结果可能与您得到的结果相同：

```
function() {} 
```

但是，在这种`parseInt()`情况下，编译器无法确定它`parseInt()`是真的`parseInt()`，因为它可能已被重新定义。因此，它必须生成代码来进行函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:30:18.760

它必须是测试设置，因为[这个版本](http://jsperf.com/parseintx1/7)在 Firefox 中也给出了预期的结果。我认为，在您的设置中，它`parseInt`在每次迭代中应用于每个变量（嗯，至少在 FF 中），而从`String`to的转换`Number`可以应用于乘法测试中的第一次迭代，之后变量是数字乘法不再需要转换。

在版本 7 中，变量在测试设置中分配，并且测试在每次迭代时分配新变量。现在两个测试都有“相等的变化”，并且`parseInt`优于乘法测试。

在检查 IE[8,9] 中的测试并看到它的结果看起来像 FF 之后，我认为 Chrome 结果有一个解释：我很确定 Chrome/Webkit 在测试的第一个版本中有更好的优化（尤其是`parseInt`部分），这会给那里带来更好的结果`parseInt`。它可能是那些浏览器中使用的[V8引擎中代码（部分）的预编译。](http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29)

# ios - 根据生产应用程序中的沙盒 URL 验证收据是否安全？

> ID：12163929
> 
> 赞同：2
> 
> 时间：2012-08-28T16:51:03.493
> 
> 标签：ios, in-app-purchase, storekit

Apple 的[技术说明 TN2259“向您的 iOS 和 Mac 应用程序添加应用内购买”](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)提到以下内容：

> 始终首先使用生产 URL 验证您的收据；如果您收到 21007 状态代码，请继续使用沙盒 URL 进行验证。遵循这种方法可确保您在沙盒中测试或审查您的应用程序或在 App Store 中运行时不必在 URL 之间切换。

但这不是安全威胁吗？我的意思是，有人可以使用测试帐户创建一个沙盒收据，允许他们在没有实际付款的情况下进行购买吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:01:37.860

沙盒收据和测试帐户对生产应用程序无效，因此您的担忧是没有根据的。

# vba - 检索显示奇怪行为的日历项目（Outlook API、WebDAV）

> ID：12163932
> 
> 赞同：78
> 
> 时间：2012-08-28T16:51:19.570
> 
> 标签：vba, outlook, exchange-server, webdav

我们正在编写一个 MS Outlook 插件。为了满足我们的业务逻辑，它应该检查某些日期之间的所有约会。我们在从日历中检索所有项目时遇到了几个问题。我们尝试了两种选择：

1.  展望 API。我们使用 MSDN 中描述的标准逻辑 - 按 [开始] 对项目进行排序，设置`IncludeRecurrences`为`True`并运行 Find\Restrict 对日历项目的查询，[如此处](http://msdn.microsoft.com/en-us/library/office/aa220093(v=office.11).aspx)。它在我们的测试环境中运行良好。但是，在我们客户的环境中： 对于定期约会，开始和结束日期设置为“主约会”的相应日期。例如，在某个房间的日历中，我们有一个在 1 月份创建的每周约会，如果我们尝试查找 8 月份的所有项目，我们会得到这个定期约会的四个项目，但它们的开始和结束日期设置为 1 月. 但 Outlook 在同一日历中显示正确的日期...

2.  非常糟糕，但我们仍然有 WebDAV！我们编写了一个简单的测试应用程序并尝试使用 WebDAV 从日历中查询所有项目。当然，我们没有重新发明轮子，只是粘贴了[文档](http://msdn.microsoft.com/en-us/library/exchange/aa123570(v=exchg.65).aspx)中的代码。上一个问题解决了，但出现了下一个问题：它不会返回大约六个月前创建的经常性项目。我不知道 - 没有限制“旧”项目的参数！

怎么了？我们错过了什么重要的东西吗？

技术细节：Exchange 2003、Outlook 2003-2010。坦率地说，如果我们打开缓存交换模式，第一个错误就会消失，但我们不能这样做。

```
var nameSpace = application.GetNamespace("MAPI");
var recepient = nameSpace.CreateRecipient(roomEMail);
recepient.Resolve();
var calendar = nameSpace.GetSharedDefaultFolder(recepient, OlDefaultFolders.olFolderCalendar);
var filter = string.Format("[Start]<'{1}' AND [End]>'{0}'",
  dateFrom.ToString("dd/MM/yyyy HH:mm", CultureInfo.InvariantCulture), dateTo.ToString("dd/MM/yyyy HH:mm", CultureInfo.InvariantCulture)
);
var allItems = calendar.Items;
allItems.Sort("[Start]");
allItems.IncludeRecurrences = true;
var _item = allItems.Find(filter);
while (_item != null) {
  AppointmentItem item = _item as AppointmentItem;
  if (item != null) {
    if (item.Subject != "some const")
      && (item.ResponseStatus != OlResponseStatus.olResponseDeclined)
      && (item.MeetingStatus != OlMeetingStatus.olMeetingReceivedAndCanceled 
      && item.MeetingStatus != OlMeetingStatus.olMeetingCanceled))
    {
      /* Here we copy item to our internal class.
       * We need: Subject, Start, End, Organizer, Recipients, MeetingStatus,
       * AllDayEvent, IsRecurring, RecurrentState, ResponseStatus,
       * GlobalAppointmentID */
    }
  }
  _item = allItems.FindNext();
} 
```

## 更新 1：

使用 OutlookSpy 进行的其他研究表明，问题不在我们的代码中 - 当缓存 Exchange 模式关闭时，API 中的开始\结束日期不正确。但是 Outlook 开发人员意识到了这一点，并且他们以某种方式在日历中显示了正确的日期！有谁知道怎么做？

### 更新 2：

Outlook 支持升级工程师的回答：

> 基于此，我可以确认这是我们产品的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-28T08:28:50.930

可能的原因：

*   设置 IncludeRecurrences 后排序。

这是我在两个日期之间检索 Outlook 项目的 PowerShell 模块的代码。

还有一个小程序，用于检查更改并发送包含议程更新的电子邮件，当您无法通过移动设备访问 Exchange 时，它​​会派上用场。

路径：**Documents\WindowsPowerShell\Modules\Outlook\expcal.ps1**

```
Function Get-OutlookCalendar
{
  <#
   .Synopsis
    This function returns appointment items from default Outlook profile
   .Description
    This function returns appointment items from the default Outlook profile. It uses the Outlook interop assembly to use the olFolderCalendar enumeration.
    It creates a custom object consisting of Subject, Start, Duration, Location
    for each appointment item.
   .Example
    Get-OutlookCalendar |
    where-object { $_.start -gt [datetime]"5/10/2011" -AND $_.start -lt `
    [datetime]"5/17/2011" } | sort-object Duration
    Displays subject, start, duration and location for all appointments that
    occur between 5/10/11 and 5/17/11 and sorts by duration of the appointment.
    The sort is the shortest appointment on top.
   .Notes
    NAME:  Get-OutlookCalendar
    AUTHOR: ed wilson, msft
    LASTEDIT: 05/10/2011 08:36:42
    KEYWORDS: Microsoft Outlook, Office
    HSG: HSG-05-24-2011
   .Link
     Http://www.ScriptingGuys.com/blog
 #Requires -Version 2.0
 #>

 echo Starting... Initialize variables

 Add-type -assembly "Microsoft.Office.Interop.Outlook" | out-null
 $olFolders = "Microsoft.Office.Interop.Outlook.OlDefaultFolders" -as [type]
 $olCalendarDetail = "Microsoft.Office.Interop.Outlook.OlCalendarDetail" -as [type]

 echo ... Getting ref to Outlook and Calendar ...

 $outlook = new-object -comobject outlook.application
 $namespace = $outlook.GetNameSpace("MAPI")
 $folder = $namespace.getDefaultFolder($olFolders::olFolderCalendar)

 echo ... Calculating dates ...

 $now = Get-Date -Hour 0 -Minute 00 -Second 00

 echo From $a To $b

 echo ... Getting appointments ...

 $Appointments = $folder.Items
 $Appointments.IncludeRecurrences = $true
 $Appointments.Sort("[Start]")

 echo ... Setting file names ...

 $oldfile = "$env:USERPROFILE\outlook-calendar.bak"
 echo oldfile: $oldfile
 $newfile = "$env:USERPROFILE\outlook-calendar.txt"
 echo newfile: $newfile
 $calfile = "$env:USERPROFILE\outlook-calendar.ics"
 echo calfile: $calfile

 echo ... Exporting calendar to $calfile ...

 $calendarSharing = $folder.GetCalendarExporter()
 $calendarSharing.CalendarDetail = $olCalendarDetail::olFullDetails
 $calendarSharing.IncludeWholeCalendar = $false
 $calendarSharing.IncludeAttachments = $false
 $calendarSharing.IncludePrivateDetails = $true
 $calendarSharing.RestrictToWorkingHours = $false
 $calendarSharing.StartDate = $now.AddDays(-30)
 $calendarSharing.EndDate = $now.AddDays(30)
 echo $calendarSharing
 $calendarSharing.SaveAsICal($calfile)

 echo ... Backing up $newfile into $oldfile ...

 if (!(Test-Path $newfile)) {
  echo "" |Out-File $newfile
 }

 # Backup old export into $oldfile
 if (Test-Path $oldfile) {
  echo "Deleting old backup file $oldfile"
  del $oldfile 
 }
 echo " ... moving $newfile into $oldfile ... "
 move $newfile $oldfile

 echo "... Generating text report to file $newfile ..."

 $Appointments | Where-object { $_.start -gt $now -AND $_.start -lt $now.AddDays(+7) } | 
  Select-Object -Property Subject, Start, Duration, Location, IsRecurring, RecurrenceState  |
  Sort-object Start |
  Out-File $newfile -Width 100

 echo "... Comparing with previous export for changes ..."

 $oldsize = (Get-Item $oldfile).length
 $newsize = (Get-Item $newfile).length

 if ($oldsize -ne $newsize ) {
  echo "!!! Detected calendar change. Sending email..."
  $mail = $outlook.CreateItem(0)

  #2 = high importance email header
  $mail.importance = 2

  $mail.subject = $env:computername + “ Outlook Calendar“

  $mail.Attachments.Add($newfile)
  $mail.Attachments.Add($calfile)
  $text = Get-Content $newfile | Out-String
  $mail.body = “See attached file...“ + $text

  #for multiple email, use semi-colon ; to separate
  $mail.To = “your-email@your-mail-domain.com“

  $mail.Send()

 }
 else {
  echo "No changes detected in Calendar!"
 }

} #end function Get-OutlookCalendar

Function Get-OutlookCalendarTest
{
 echo starting...
 Add-type -assembly "Microsoft.Office.Interop.Outlook" | out-null
 $olFolders = "Microsoft.Office.Interop.Outlook.OlDefaultFolders" -as [type]
 $outlook = new-object -comobject outlook.application
 $namespace = $outlook.GetNameSpace("MAPI")
 $folder = $namespace.getDefaultFolder($olFolders::olFolderCalendar)

 $a = Get-Date -Hour 0 -Minute 00 -Second 00
 $b = (Get-Date -Hour 0 -Minute 00 -Second 00).AddDays(7)
 echo From $a To $b

 $Appointments = $folder.Items
 $Appointments.IncludeRecurrences = $true
 $Appointments.Sort("[Start]")

 $Appointments | Where-object { $_.start -gt $a -AND $_.start -lt $b } | Select-Object -Property IsRecurring, RecurrenceState, Subject, Start, Location

} #end function Get-OutlookCalendarTest 
```

这是在模块中调用 PowerShell 函数的代码：

路径：**文档\WindowsPowerShell\mono.ps1**

```
Import-Module -Name Outlook\expcal.psm1 -Force

$i=0

#infinite loop for calling connect function   
while(1)
{
   $i = $i +1
   Write-Output "Running task Get-OutlookCalendar ($i)"
   Get-OutlookCalendar

   start-sleep -seconds 300

} 
```

要运行 PowerShell 脚本，请使用 powershell.exe。要在启动时运行它，请使用“%APPDATA%\Microsoft\Windows\Start Menu\Programs\Startup\”上的快捷方式：

```
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass "C:\Users\%USERNAME%\Documents\WindowsPowerShell\mono.ps1" 
```

# android - 禁用音量吐司

> ID：12163933
> 
> 赞同：7
> 
> 时间：2012-08-28T16:51:25.477
> 
> 标签：android, volume

我正在尝试使用 AudioManager 增加音量。

但它显示了 Native Android Volume UI(Volume Seekbar) toast。我想禁用它。我知道这可以在使用 Key Event 的 Activity 中实现，但我想通过服务来实现。如何禁用吐司？这是吐司的截图：
![在此处输入图像描述](../Images/fa557c1c1111e10ac0f2206aa8242cc6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T18:51:29.053

-class 提供以下`AudioManager`方法来调整某些流的音量：

*   [`adjustVolume(int, int)`](http://developer.android.com/reference/android/media/AudioManager.html#adjustVolume%28int,%20int%29)
*   [`adjustStreamVolume(int, int, int)`](http://developer.android.com/reference/android/media/AudioManager.html#adjustStreamVolume%28int,%20int,%20int%29)
*   [`adjustSuggestedStreamVolume(int, int, int)`](http://developer.android.com/reference/android/media/AudioManager.html#adjustSuggestedStreamVolume%28int,%20int,%20int%29)
*   [`setStreamVolume(int, int, int)`](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)

所有这些方法都将`flag`-parameter 作为它们的最后一个参数。您感兴趣的标志是[`FLAG_SHOW_UI`](http://developer.android.com/reference/android/media/AudioManager.html#FLAG_SHOW_UI)：

> 显示包含当前音量的 toast。

因此，要摆脱 Toast，**不要**提供此标志（或 int 值 1），而是提供所有其他标志（如果需要）或仅提供`0`：

```
AudioManager manager = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
manager.adjustVolume(AudioManager.ADJUST_RAISE, 0); 
```

上面的代码片段适用于 Android 4.0.4 (Motorola Xoom) 和 Android 2.3.5 (HTC Desire HD)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T10:58:59.340

我知道这有点晚了，但我想我已经设法使用这个来隐藏音量吐司：

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    switch(keyCode) {
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            //volumeDown();
            return true;
        case KeyEvent.KEYCODE_VOLUME_UP:
            //volumeUp();
            return true;
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch(keyCode) {
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            volumeDown();
            return true;
        case KeyEvent.KEYCODE_VOLUME_UP:
            volumeUp();
            return true;
    }
    return super.onKeyDown(keyCode, event);
}

private void volumeUp(){
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, SOME_RANDOM_VALUE, AudioManager.FLAG_VIBRATE);
} 
```

仅覆盖 onKeyUp 和 onKeyDown 中的一种方法并不能阻止显示 toast（即使使用标志）。

这有点奇怪 - 就像 Android 尝试显示吐司两次一样。

# c# - 使用 ClientBase 时获取请求 URL

> ID：12163936
> 
> 赞同：1
> 
> 时间：2012-08-28T16:51:34.973
> 
> 标签：c#, wcf, rest

我在代理中使用 ClientBase 通过服务接口调用我的 WCF 服务上的 REST：

```
public class CommunicationServiceProxy : ClientBase<ICommunicationService>, ICommunicationService 
```

我还在每次调用之前添加了一个授权标头，以便我的服务将接受请求，如下所示：

```
private OperationContextScope AddHeader(OperationContextScope scope)

        {
            if (WebOperationContext.Current == null) return null;

            WebOperationContext.Current.OutgoingRequest.Headers.Add("Authorization", Header);

            return scope;
        } 
```

一切正常，但现在，由于安全原因，我需要生成请求 URL 的签名（例如。`http://myservice/contact/getstatus?id=1`），问题是如何在使用上述代理类时获取此 URL，例如 WebOperationContext。 Current.OutgoingRequest 缺少此信息。

有人设法得到这个吗？我在这里有什么选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:32:21.110

我找到的解决方案是使用 WCF 扩展，更具体地说是 IClientMessageInspector，那里有生成签名所需的所有信息。

# iphone - 如何创建自定义的垂直滚动选择器？

> ID：12163937
> 
> 赞同：0
> 
> 时间：2012-08-28T16:51:41.377
> 
> 标签：iphone, objective-c, ios, uipickerview

我想制作（或使用预先存在的）一个垂直滚动列表，其行为类似于 UIPickerView 的滚动和捕捉。我只是有一个字符串数组@“one”，@“two”，@“three”等...我想填充列表，用户可以滚动并选择他们想要的任何一个。我希望能够自定义字体颜色和选定的颜色。我不知道为什么 UIPickerView 可以自定义的内容如此有限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:53:31.440

试试这个版本的 UIPickerView：

[https://github.com/arkichek/AFPickerView](https://github.com/arkichek/AFPickerView)

# c# - asp.net 隐藏下载

> ID：12163943
> 
> 赞同：1
> 
> 时间：2012-08-28T16:52:08.550
> 
> 标签：c#, jquery, asp.net

我正在制作一个编辑 mp3 文件的应用程序。编辑完成后，我想提供一个下载文件的链接。我只是担心文件位置（如果已知）可能会被非法文件滥用。我需要做什么，而不是在服务器上显示文件的链接，我可以将它存储在内存中（我已经使用 taglib），然后流式传输下载而不将其存储在服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:08:44.560

您需要使用 HTTP 处理程序将文件写入用户，同时掩盖文件在服务器上的真实位置。这将使您能够强制执行有关文件下载的任何规则，例如一次性下载。

请参阅：[如何创建 HTTP 处理程序](http://support.microsoft.com/kb/308001)

处理程序中的代码需要根据您的需要是唯一的，但以下几行的内容应该会有所帮助：

```
public void ProcessRequest(HttpContext context)
{
   context.Response.ContentType = "Application/mp3"; 
   context.Response.AppendHeader("Content-Disposition", "attachment; filename=mysong.mp3"); 
   context.Response.TransmitFile(Server.MapPath("~/Files/song.mp3")); 
} 
```

如果您不想在任何地方保存实际文件，则可以使用[Stream ，但这应该可以帮助您入门。](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)

# jsf - jsf级联列表

> ID：12163944
> 
> 赞同：0
> 
> 时间：2012-08-28T16:52:10.083
> 
> 标签：jsf

如何级联列表，因此如果用户更改 selectedCategory 列表中的选择，它应该更新 selectedTo 列表。

这是我的片段：

```
<h:selectOneMenu id="selectedCategory" value="#{converterBean.selectedCategory}">
  <f:ajax execute="selectedCategory" render="selectedFrom"/>
  <f:selectItems value="#{converterBean.categories}"/>
</h:selectOneMenu>
<h:selectOneListbox id="selectedFrom" value="#{converterBean.selectedFrom}" size="5">
  <f:selectItems value="#{converterBean.fromList}"/>
  <f:ajax execute="selectedCategory selectedFrom" render="selectedTo"/>
</h:selectOneListbox>
<h:selectOneListbox id="selectedTo" value="#{converterBean.selectedTo}" size="5">
  <f:selectItems value="#{converterBean.toList}"/>
</h:selectOneListbox> 
```

我注意到它更新了 selectedFrom 列表，但没有进一步级联到 selectTo 列表。

根据尝试呈现 selectedFrom 和 selectedTo 以进行类别选择的建议，从页面发布的请求是：

```
POST http://localhost:8081/converter_web/faces/converter.xhtml HTTP/1.1
Accept: */*
Faces-Request: partial/ajax
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Referer: http://localhost:8081/converter_web/
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Host: localhost:8081
Content-Length: 1253
Connection: Keep-Alive
Pragma: no-cache
Cookie: JSESSIONID=DDDEA598A60CC468763C36B536513B41

converter_form=converter_form&converter_form%3AselectedCategory=temperature&converter_form%3AselectedFrom=mm&converter_form%3AselectedTo=cm&converter_form%3Avalue=0.0&javax.faces.ViewState=b%2BArKl5NJujWibUQzHf3dUG2JlT%2Bnq7KygA2%2FXpXXscCouBr5xT9Br%2BmoP78%2FvuPAYG%2Bi7Q0jFEKGqJpFgRo%2BDU4ZV251yac84pu3bZ71V9j%2BHvRPMkWw82S8q0v2p1jmn3msPXxvKrQQ1oVpr7pGBPXc2faQGXHW55Md%2BKSkspIgCxXx3x3T6NDaJ1%2BGTEFkyb1DE%2BdoQHQ4EjqV3jEC5mq56OlsHgEmkQ8TVCQM%2FPmAfUBWiQEHqBYzohXNfFpO3kfdrKjeTrq648UtGPYU88VJ9mtIOptYEfwFKN9y%2FG9MOBKEfRZ9XlJz2bPt1zmATIg3iRT1W7YVtmHq7e9g%2FUxsM82duMxFUWhoFPHfrFk4tt48LFH29Hk60y3eeFxqtg7g1JxPD1aQrLN9sxBduS53nFWObCms1YU40uvMT2yjX0kp4wM8YwqT2jTFDtLHcVBide1RGTnzFGzjOrbCJ8rIEmWfPa1yUMkXRBBsgpKWFIl0ueBQiCT%2BDoD9UXlNOQGS%2F5tIdP%2BVTO%2FkWiBo5X99SpKwKY8%2B2pqzJKDrPRXIwci52Wi%2Fo%2Fw%2B0TkpnVrtDaDl7w2eYjmq7bYZFRDjWy3Jtgc5V1DUF%2BhX3Bfiq7l%2Fq5YL4DYx0NBI2esfJ0LTFCqXu8aCk%2BWOPOWnOCSGA5Y9EGUXgzV6q%2Fp%2FFWa8Kj8E%2FeoB380eFwXAEiyyRGv&javax.faces.source=converter_form%3AselectedCategory&javax.faces.partial.event=change&javax.faces.partial.execute=converter_form%3AselectedCategory&javax.faces.partial.render=converter_form%3AselectedFrom%20converter_form%3AselectedTo&javax.faces.behavior.event=valueChange&javax.faces.partial.ajax=true 
```

我们希望只发送 selectedCategory ，但它会在 ajax 调用中发送所有表单字段。它虽然调用 getCategories()、getFromList()、getToList()，但是当它调用 getToList 时，它使用 category=temperature 和 from=mm。from=mm 是在 POST 请求中作为 selectedFrom=mm 传递的内容。

问候，

米腾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:07:24.250

**改变这个：**

```
 <f:ajax execute="selectedCategory" render="selectedFrom"/> 
```

**对此：**

```
 <f:ajax execute="selectedCategory" render="selectedFrom selectedTo"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:48:02.880

我添加了 ajax 监听器，如下所示，表明正在调用类别更改，以便 getFromList 将 selectedFrom 设置为其列表中的新项目，而不是发布一个。然后 getToList 将找到正确的类别并从单元中查询其列表。

```
<f:ajax execute="selectedCategory" render="selectedFrom"></f:ajax> 
```

到

```
<f:ajax listener="#{converterBean.categoryChanged}" execute="selectedCategory" render="selectedFrom selectedTo"></f:ajax> 
```

# java - LDAP：如何使用连接详细信息对用户进行身份验证

> ID：12163947
> 
> 赞同：10
> 
> 时间：2012-08-28T16:52:23.763
> 
> 标签：java, spring, ldap, spring-ldap, ldapconnection

我无法使用 LDAP 对用户进行身份验证。我有以下详细信息：

```
URL=ldap://10.10.10.10:389 
LDAP BASE:DC=lab2,DC=ins 
LDAP Bind Account: CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins 
LDAP Bind Account Pw: secret 
```

我可以`sAMAccountName`使用上述详细信息搜索一个值，但是如何使用用户名和密码对用户进行身份验证？
如果您按照我之前的问题进行操作，您就会明白，我可以成功连接到 LDAP 服务器，但无法对他进行身份验证。
用户进行身份验证：

```
user: someusername
password: somepwd 
```

我无法连接到 LDAP 服务器，`'somepwd'`我应该如何使用`someusername`. 我能够搜索给定的用户为`sAMAccountName`.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T18:55:18.597

这是我在不同地方找到的东西的混搭。如果您不想使用 UnboundID SDK，它应该会让您走上正确的道路。这不是生产质量，如果您的商店支持，您可能希望在此处添加 SSL 内容。

```
public static Boolean validateLogin(String userName, String userPassword) {
    Hashtable<String, String> env = new Hashtable<String, String>();

    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, "ldap://" + LDAP_SERVER + ":" + LDAP_SERVER_PORT + "/" + LDAP_BASE_DN);

    // To get rid of the PartialResultException when using Active Directory
    env.put(Context.REFERRAL, "follow");

    // Needed for the Bind (User Authorized to Query the LDAP server) 
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.SECURITY_PRINCIPAL, LDAP_BIND_DN);
    env.put(Context.SECURITY_CREDENTIALS, LDAP_BIND_PASSWORD);

    DirContext ctx;
    try {
       ctx = new InitialDirContext(env);
    } catch (NamingException e) {
       throw new RuntimeException(e);
    }

    NamingEnumeration<SearchResult> results = null;

    try {
       SearchControls controls = new SearchControls();
       controls.setSearchScope(SearchControls.SUBTREE_SCOPE); // Search Entire Subtree
       controls.setCountLimit(1);   //Sets the maximum number of entries to be returned as a result of the search
       controls.setTimeLimit(5000); // Sets the time limit of these SearchControls in milliseconds

       String searchString = "(&(objectCategory=user)(sAMAccountName=" + userName + "))";

       results = ctx.search("", searchString, controls);

       if (results.hasMore()) {

           SearchResult result = (SearchResult) results.next();
           Attributes attrs = result.getAttributes();
           Attribute dnAttr = attrs.get("distinguishedName");
           String dn = (String) dnAttr.get();

           // User Exists, Validate the Password

           env.put(Context.SECURITY_PRINCIPAL, dn);
           env.put(Context.SECURITY_CREDENTIALS, userPassword);

           new InitialDirContext(env); // Exception will be thrown on Invalid case
           return true;
       } 
       else 
           return false;

    } catch (AuthenticationException e) { // Invalid Login

        return false;
    } catch (NameNotFoundException e) { // The base context was not found.

        return false;
    } catch (SizeLimitExceededException e) {
        throw new RuntimeException("LDAP Query Limit Exceeded, adjust the query to bring back less records", e);
    } catch (NamingException e) {
       throw new RuntimeException(e);
    } finally {

       if (results != null) {
          try { results.close(); } catch (Exception e) { /* Do Nothing */ }
       }

       if (ctx != null) {
          try { ctx.close(); } catch (Exception e) { /* Do Nothing */ }
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T17:15:06.553

LDAP 连接以`anonymous`. 要更改连接的授权状态，请使用 BIND 请求。BIND 请求有两种形式，“简单”或“SASL”。'simple' BIND 请求采用专有名称和密码。`StartTLS`BIND 请求应通过安全连接传输，或使用扩展请求将非安全连接提升为安全连接。

使用 UnboundID LDAP SDK：

```
// exception handling not shown
LDAPConnection ldapConnection = new LDAPConnection(hostname,port);
BindRequest bindRequest = new SimpleBindRequest(username,password);
BindResult bindResult = ldapConnection.bind(bindRequest);
if(bindResult.getResultCode().equals(ResultCode.SUCCESS)) {
   /// successful authentication
}
ldapConnection.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T10:26:12.233

[我们有几个](http://ldapwiki.com/wiki/JNDI%20Examples)可能有帮助的 JNDI 示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T07:00:55.543

尝试使用这个，它对我有用

```
public static Boolean validateLogin(String userName, String userPassword) {
    Hashtable<String, String> env = new Hashtable<String, String>();

    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, "ldap://" + LDAP_SERVER + ":" + LDAP_SERVER_PORT + "/" + LDAP_BASE_DN);
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.SECURITY_PRINCIPAL, userName + "@" + LDAP_SERVER);
    env.put(Context.SECURITY_CREDENTIALS, userPassword);

    DirContext ctx;
    try {
       ctx = new InitialDirContext(env); //throw exception, if username-password not correct
       return true;
    } catch (Exception e) {
        return false;
    }
} 
```

# c# - 如何制作完全由用户定义的自定义 GridView

> ID：12163948
> 
> 赞同：2
> 
> 时间：2012-08-28T16:52:26.453
> 
> 标签：c#, asp.net, gridview

![在此处输入图像描述](../Images/ccc4730b2a430688806346c49f9e7ed3.png)

我有一个`GridView`：在 Button_Click 上，我希望我的第一列带有 EDIT 链接`GridView`的项目，`ListBox1`第二列带有 EDIT 链接，并且从病房的第三列开始，我希望标题作为`ListBox2`.

到目前为止，我能够在第 2 列和第 3 列中实现`GridView`带有`ListBox2`项目的标题的 EDIT 链接。

现在我希望`ListBox1`items 作为我的`GridView`. 我附上了一张图片，展示了我到底想要什么以及到目前为止我取得了什么成就。

请帮助我。谢谢你。

我设计的 .cs 代码是：

```
DataTable dt = new DataTable();
        DataRow rw = default(DataRow);
        for (int i = 0; i < ListBox3.Items.Count; i++)
        {  dt.Columns.Add(ListBox3.Items[i].ToString(),System.Type.GetType("System.String"));
        }

        for (int j = 0; j < count; j++)
        {
            rw = dt.NewRow();
            for (int i = 0; i < ListBox3.Items.Count; i++)
            {
                rw[ListBox3.Items[i].ToString()] = " ";
            }
            dt.Rows.Add(rw);
        }
        GridView2.DataSource = dt;
        GridView2.DataBind(); 
```

GridView 的 asp 代码是：

```
<Columns>
            <asp:TemplateField HeaderText="Locations">
                <ItemTemplate>
                    <asp:Label ID="Lab1" runat="server"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:CommandField ShowEditButton="True" />
            </Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:25:02.423

首先创建您的事件`gridview_RowDataBound` 并更改标签的值

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
 if (e.Row.RowType == DataControlRowType.DataRow)
    {

      Label lbl1= ((Label)e.Row.FindControl("Lab1"));
      lbl1.text = ListBox1.items[e.Row.RowIndex].ToString();
    }

} 
```

# multithreading - Silverlight 单元测试中的线程重命名

> ID：12163949
> 
> 赞同：0
> 
> 时间：2012-08-28T16:52:30.000
> 
> 标签：multithreading, silverlight, unit-testing

在我的 silverlight 单元测试中，我有一个单元测试类的几个单元测试方法，在每个方法中，我将 Thread.Name 设置为某个字符串。现在这应该在第一个之后崩溃，因为 Thread.Name 在分配后无法设置，我还检查了每个测试方法是否在与其他方法具有相同托管 id 的线程上运行，所以我困惑为什么它没有抛出错误，在每个单元测试运行后线程是否以某种方式“重置”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:32:18.783

所以我猜你正在使用 MSTest - **MSTest 为每个测试使用来自 ThreadPool 的新线程**（它还为每个测试创建一个全新的测试类）。
虽然它有点慢，但它确保了测试的隔离（如果你并行运行它们就更重要了）。

您（可能）不应该为测试之间的共享状态而烦恼，因为每个测试都应该独立存在......

# ruby-on-rails - 如何在旅程 1.0.4 下修复损坏的设计路由

> ID：12163950
> 
> 赞同：1
> 
> 时间：2012-08-28T16:52:34.030
> 
> 标签：ruby-on-rails, routing, devise, link-to, journey

我开始在这个 SO 问题中解决我的“突然”中断路由问题： [设计 /users/sign_in 重定向到错误的控制器](https://stackoverflow.com/questions/11770494/devise-users-sign-in-redirecting-to-wrong-controller)，并在帮助下，我能够将问题隔离到从旅程 1.0.3 升级到 1.0.4 时发生的问题更新到轨道 3.2.7。

如您所知，我们需要使用 rails 3.2.8，才能应用重要的安全修复，但这意味着我必须使用旅程 1.0.4，这会破坏我的设计路线。例如，我的自定义 new_user_session 路由是welcome#welcome，但它被解码为不存在的devise/welcome#welcome。

有没有其他人遇到过这个三角恋，如果有的话，你是如何让旅程 1.0.4 与设计相得益彰的？

被破坏的路线（根和设计路线：

```
 devise_for :users   
    devise_scope :user do
       get "/login"    => "devise/sessions#new"
       get "/register" => "devise/registrations#new"
    end  
    match '/signout/confirm' => 'signouts#confirm'

    root :to => "welcome#welcome" 
```

==================================================== ===============

编辑：2012-09-05

解决方案：

我发现了有问题的 LOC：

```
link_to_unless_current( logo_image, { :controller => 'welcome', :action => 'welcome' } ) 
```

我将其更改为：

```
link_to_unless_current( logo_image, { :controller => '/welcome', :action => 'welcome' } ) 
```

无济于事。

出于好奇，我将其更改为：

```
link_to( logo_image, { :controller => '/welcome', :action => 'welcome' } ) 
```

这很有效，就像：

```
link_to( logo_image, { :controller => 'welcome', :action => 'welcome' } ) 
```

所以我尝试的最后一件事是：

```
link_to_unless_current( logo_image, root_path ) 
```

这奏效了，现在宇宙一切都很好。

事后分析：由于我对 rails 文档缺乏经验，我推断虽然`link_to()`会接受 root_path 作为参数，但事实`link_to_unless_current()`并非如此。直到我查看了方法的源代码，我才发现（并且应该一直假设）它`link_to_unless_current()`是建立`link_to_unless()`在`link_to()`.

非常**感谢**在此线程和上一个线程中提供帮助的人们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:49:15.250

我在旅程 1.0.4 中遇到了类似的问题，并在我的小 Rails 学习项目中进行了设计，其中加载设计注册页面失败并出现路由错误。我能够通过更改 view/layouts/application.html.erb 及其部分添加到站点标题的链接来解决问题。

我改变了这样的链接：

```
<%= link_to 'Home', {:controller=>'welcome', :action=>'index'} %> 
```

至：

```
<%= link_to 'Home', {:controller=>'/welcome', :action=>'index'} %> 
```

和路由开始工作。

# xml - JiBX：忽略缺少的必需元素

> ID：12163951
> 
> 赞同：0
> 
> 时间：2012-08-28T16:52:44.147
> 
> 标签：xml, xml-parsing, xsd, jibx

我正在使用 JiBX 基于外部源提供的 XSD 解组 XML；不幸的是，某些“必需”字段并不总是出现在 XML 中，这导致 JiBX 抛出“org.jibx.runtime.JiBXException: Missing required element”。

我知道我可以编辑 XSD 文件并将“必填”字段更改为可选字段，但由于这些文件会定期更新，我宁愿不这样做。我可以更改 JiBX 中的设置（在编译/绑定时或运行时）以在运行时忽略丢失的元素，例如，通过将与丢失元素对应的字段的值设置为 null？

编辑：更改即-> 例如:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:44:54.950

JD，
为不同的模式定义创建 JiBX 绑定的最简单方法是将模式定义修改为所需的模式。
这可以通过在原始模式定义上运行 xml 转换来创建新模式来轻松干净地完成。
看看这个在运行 JiBX 之前修改模式的 maven 项目示例：[https](https://github.com/jibx/schema-library/blob/master/net.webservicex/net.webservicex.currencyconvertor/pom.xml)
://github.com/jibx/schema-library/blob/master/net.webservicex/net.webservicex.currencyconvertor/pom.xml 我知道 xml 转换语言很痛苦，但这解决了您将来在架构更改时遇到的问题。您的 xslt 命令看起来像这样：
<xsl:template match="//xs:attributeGroup[@name='FlifoLegAttributes']">
<xs:attributeGroup name="FlifoLegAttributes">
<xs:attribute name="AirRowType" type="OTA_CodeType" use=" **optional** ">
</xs:attribute>
</xs:attributeGroup>
</xsl:template>

我希望这有帮助。
大学教师

# google-maps-api-3 - Google Maps API：自定义地图上的路线服务

> ID：12163954
> 
> 赞同：0
> 
> 时间：2012-08-28T16:52:59.467
> 
> 标签：google-maps-api-3, map-directions

我需要将自定义道路导入谷歌地图（即：谷歌地图中可能尚不可见的新道路），我希望将它们包含在路线服务 API 中。我首先考虑的方法是使用 Google Maps Engine 导入包含我需要的道路数据的 shapefile，并基于此创建地图。然后我会对该自定义地图中的数据使用路线服务。我对这是否可行非常谨慎，据我所知，没有可用于测试的 Google Maps Engine 试用版。如果它无论如何都不起作用，我真的不想购买它。

有谁知道这种方式是否可行，或者谷歌提供的类似服务是否可以满足我的需求？

如果我想这样做，我假设我需要实现自己的方向服务，但我想看看是否已经有一个服务可以代替。

谢谢！

编辑：尝试澄清：我想导入一组由备用来源获得的自定义道路。这些道路采用 shapefile 格式，比 Google 上的某些道路更新。我的目标是使用现有的谷歌道路，并在必要时“合并”我拥有的数据。假设在加拿大艾伯塔省的最北部，一家公司已经铺设了一些通往石油基地的道路。我想导入这些道路，并能够告诉我们的司机如何到达那里。他们会走一条谷歌已经拥有的主要高速公路，然后转入一条谷歌没有显示的道路，因为它太新了。这就是替代道路数据集的用武之地。

我想找到最好的方法来做到这一点，同时获得包含这些新道路的方向。我知道使用谷歌服务可能无法做到这一点，但我想问是否其他人遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:19:05.827

我想我应该将其更新为我的解决方案，以防其他人想知道同样的事情。答案是否定的，目前没有办法将道路等自定义数据导入谷歌地图并将它们包含在路线服务中。我已经通过电话与 Google 代表进行了交谈，他们让我知道了这一点。

我必须使用 PostgreSQL、PostGIS 和 PgRouting 实现自己的路由引擎。

# linux - 即使 crond_disable_trans 被禁用，cron 也可以强制执行 SELinux

> ID：12163957
> 
> 赞同：0
> 
> 时间：2012-08-28T16:53:02.900
> 
> 标签：linux, cron, crontab, redhat, selinux

我有一个带有 SELinux 的 Red Hat 5 处于强制模式：

```
SELinux status:                 enabled
SELinuxfs mount:                /selinux
Current mode:                   enforcing
Mode from config file:          enforcing
Policy version:                 21
Policy from config file:        targeted 
```

即使 crond_disable_trans 被禁用：

```
[root@rhel5_1 sf_personal]# getsebool -a|grep crond
crond_disable_trans --> off
fcron_crond --> off 
```

但 crond 适用于任何用户。

```
[root@rhel5_1 sf_personal]# crontab -u user01 -l
* * * * * /usr/bin/wall Ciao 
```

这是审核日志文件

```
type=USER_ACCT msg=audit(1346167741.137:35): user pid=2653 uid=0 auid=4294967295 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: accounting acct="root" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=CRED_ACQ msg=audit(1346167741.142:36): user pid=2653 uid=0 auid=4294967295 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: setcred acct="root" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=USER_ACCT msg=audit(1346167741.144:37): user pid=2654 uid=0 auid=4294967295 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: accounting acct="user01" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=CRED_ACQ msg=audit(1346167741.144:38): user pid=2654 uid=0 auid=4294967295 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: setcred acct="user01" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=LOGIN msg=audit(1346167741.144:39): login pid=2653 uid=0 old auid=4294967295 new auid=0 old ses=4294967295 new ses=6
type=LOGIN msg=audit(1346167741.146:40): login pid=2654 uid=0 old auid=4294967295 new auid=502 old ses=4294967295 new ses=7
type=USER_START msg=audit(1346167741.150:41): user pid=2653 uid=0 auid=0 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: session open acct="root" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=CRED_DISP msg=audit(1346167741.153:42): user pid=2653 uid=0 auid=0 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: setcred acct="root" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=USER_END msg=audit(1346167741.153:43): user pid=2653 uid=0 auid=0 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: session close acct="root" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)'
type=USER_START msg=audit(1346167741.154:44): user pid=2654 uid=0 auid=502 subj=system_u:system_r:crond_t:s0-s0:c0.c1023 msg='PAM: session open acct="user01" : exe="/usr/sbin/crond" (hostname=?, addr=?, terminal=cron res=success)' 
```

我不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:11:02.200

如果您想为某些用户允许/禁止 cron，您应该使用 cron.deny 和 cron.allow 文件。

也可以通过 pam 设置限制。

我相信 cronjobs 应该始终在运行 cron 作业的用户的上下文中运行，如果 crond_disable_trans 设置为 on，则 SELinux 会强制执行，而如果 crond_disable_trans 设置为 off，则 crontabs 不会受到上下文的限制。但是，我可能是错的。要获得有关此问题的最终答案，您可能需要联系您的红帽支持联系人。

# objective-c - 移动 NSIndexPath 实体

> ID：12163958
> 
> 赞同：0
> 
> 时间：2012-08-28T16:53:03.817
> 
> 标签：objective-c, ios, cocoa-touch, nsindexpath

我一直在阅读 NSIndexPaths 以获取 uitableviews 等。但我很难操作现有的索引路径。

我想在保留行的同时采用现有的索引路径增量/移动每个部分。因此 indexPath.section 0 变为 indexPath.section 1 等。非破坏性地移动关联的行数。

我知道 NSIndexPath 是不可变的，但他们有任何类别或支持这一点的好模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:55:35.153

好吧，你总是可以从旧的实例中创建一个稍微改变的新实例。

```
NSIndexPath *newPath = [NSIndexPath indexPathForRow:oldPath.row 
                                          inSection:oldPath.section+1]; 
```

# ruby - 从在不同范围内定义的块访问对象

> ID：12163963
> 
> 赞同：0
> 
> 时间：2012-08-28T16:53:26.830
> 
> 标签：ruby, metaprogramming

有没有办法从不同范围内定义的块访问对象？对不起，如果它令人困惑，我提供一个小例子：

```
def scope(&block)
  foo = "bar"
  instance_eval &block
end

scope do
  puts "foo is #{foo}"
end 
```

我想得到输出：

```
"foo is bar" 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:03:24.867

真正的问题是你想要做什么，但你能得到的最接近的是：

```
def scope
  @foo = "bar"
  yield
end

scope do
  puts "foo is #{@foo}"
end 
```

请注意使用实例变量`@foo`而不是局部变量。除非您明确地这样做，否则您无法访问实例变量，如下所示：

```
def scope
  foo = "bar"
  yield foo
end

scope do |foo|
  puts "foo is #{foo}"
end 
```

但这很好。否则很难避免与局部变量发生冲突。

注意：我还将您对显式的使用替换`&block`为隐式`yield`。该`yield`表单需要一个块存在，并且语法更简单，但这主要是样式问题。

# wcf - 如何在 Silverlight 之外使用 RIA 服务代理客户端中的关联

> ID：12163964
> 
> 赞同：0
> 
> 时间：2012-08-28T16:53:27.943
> 
> 标签：wcf, wcf-ria-services

我正在尝试使用 RIA 域服务，就好像它是 WCF 服务（从技术上讲它是）

生成的代理客户端似乎“缺少”关键元素。例如关联的对象属性。

为简单起见，这里有两个类的示例：

```
 public class Person
    {
        [Key]
        public int Id { get; set; }

        public string FirstName { get; set; }

        public string LastName { get; set; }

        [Include]
        [Association("Person_Hobbies", "Id", "Person_Id")]
        [Composition]
        public IEnumerable<Hobby> Hobbies { get; set; }

    }

    public class Hobby
    {
        [Key]
        public int Id { get; set; }

        public string Name { get; set; }

        public int Person_Id { get; set; }

    } 
```

在域服务中，我们可以返回人们和他们的爱好：

```
public IQueryable<Person> GetPeople()
        {
            var peopleList = new[] {
                new Person { Id = 1, FirstName = "Fred", LastName = "Flintstone", Hobbies = new List<Hobby>() { new Hobby { Id = 1, Name="Reading",  Person_Id=1 },
                                                                                                                    new Hobby { Id = 2, Name="Biking", Person_Id=1}, }},
                new Person { Id = 2, FirstName = "Barnie", LastName = "Rubble", Hobbies = new List<Hobby>() { new Hobby { Id = 3, Name="Skiing",  Person_Id=2 },
                                                                                                                    new Hobby { Id = 4, Name="Rock Climbing", Person_Id=2} } },
                 };

            return peopleList.AsQueryable<Person>();
        } 
```

我已经验证这在 Silverlight 和 DomainService 之间完全符合预期。

但是，在同样引用此 RIA 域服务的控制台应用程序中，生成的 Person 类没有 Hobbies 属性（就像在 Silverlight 客户端中一样）。

确实，当我调用 GetPeople 时，我得到了 RootResults（人）和 IncludedResults（爱好），我可以将两者“加入”在一起。所以我可以在没有爱好的情况下生活

困难在于准备一系列 ChangeSetEntry --- 我如何从控制台应用程序向服务发送一个人和他们的爱好？在 Silverlight 中，我创建了一个新 Person，将爱好添加到 Hobbies 属性，并将 Person 添加到 DomainContext 和 SubmitChanges。在幕后 RIA 服务器（无论是在客户端还是在我不确定的服务器上）将其整理出来。

我正在努力将人与 ChangeSetEntry 对象数组中的爱好联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:26:56.637

据我所知，这是预期的行为。关联属性是代码生成器在代理中生成的 SL 域上下文的“魔法”。您可以发送一个数组，其中包含一个人的变更集条目和一个人的每个爱好的变更集条目。该数组中的索引很重要。您使用它来跟踪关联。填充与类似内容有关联的每个 ChangeSetEntry 的 Associations 属性

```
Dictionary<string, int> personHobbyAss = new Dictionary<string, int>();
personHobbyAss.Add("Person_Hobbies", 1) 
```

其中 1 是关联条目的索引。

我同意这并不简单且非常有限，但是……至少它有效。请注意，我从未尝试过像您这样没有“参考”Hobby.Person 的关联，而只有 Fk。

# opencv - OpenCV2.4.2：如何重建？

> ID：12163966
> 
> 赞同：2
> 
> 时间：2012-08-28T16:53:33.640
> 
> 标签：opencv, windows-xp

我成功安装了 MINGW32 和 CMake 并重建了 OpenCV 2.3.2（superpak）。但是 V2.4.2 不是 superpak 并且没有 V2.3.1 拥有的所有文件。我的重建尝试非常短（几秒钟而不是 20 分钟）。这是 Win XP Pro SP3。

OpenCV wiki 和各种指南不起作用，因为 V2.4.2 包非常不同。Yahoo OpenCV 组没有响应。我的猜测是他们不知道。

我可以/是否可以重建 V2.4.2，如果可以，如何重建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:17:40.287

与您构建任何其他版本的方式相同。

运行 cmake-gui，配置，生成，然后构建生成的 .sln

[http://opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010_CMake](http://opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010_CMake)

# python - 将选项卡式文本转换为 html 无序列表？

> ID：12163967
> 
> 赞同：6
> 
> 时间：2012-08-28T16:53:37.567
> 
> 标签：python, html

我是一个初学者程序员，所以这个问题可能听起来微不足道：我有一些包含制表符分隔文本的文本文件，例如：

```
A
    B
    C
        D
        E 
```

现在我想从中生成无序的 .html 列表，其结构如下：

```
<ul>
<li>A
<ul><li>B</li>
<li>C
<ul><li>D</li>
<li>E</li></ul></li></ul></li>
</ul> 
```

我的想法是编写一个 Python 脚本，但如果有更简单（自动）的方法，那也很好。为了识别缩进级别和项目名称，我会尝试使用以下代码：

```
import sys
indent = 0
last = []
for line in sys.stdin:
    count = 0
    while line.startswith("\t"):
       count += 1
       line = line[1:]
    if count > indent:
       indent += 1
       last.append(last[-1])
    elif count < indent:
       indent -= 1
       last = last[:-1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T17:28:13.163

试试这个（适用于您的测试用例）：

```
import itertools
def listify(filepath):
    depth = 0
    print "<ul>"*(depth+1)
    for line in open(filepath):
        line = line.rstrip()
        newDepth = sum(1 for i in itertools.takewhile(lambda c: c=='\t', line))
        if newDepth > depth:
            print "<ul>"*(newDepth-depth)
        elif depth > newDepth:
            print "</ul>"*(depth-newDepth)
        print "<li>%s</li>" %(line.strip())
        depth = newDepth
    print "</ul>"*(depth+1) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:56:42.713

[`tokenize`模块](http://docs.python.org/library/tokenize)理解您的输入格式：行包含有效的 Python 标识符，语句的缩进级别很重要。[`ElementTree`模块](http://docs.python.org/library/xml.etree.elementtree.html)允许您在内存中操作树结构，因此将树的创建与将其呈现为 html 分离可能更灵活：

```
from tokenize import NAME, INDENT, DEDENT, ENDMARKER, NEWLINE, generate_tokens
from xml.etree import ElementTree as etree

def parse(file, TreeBuilder=etree.TreeBuilder):
    tb = TreeBuilder()
    tb.start('ul', {})
    for type_, text, start, end, line in generate_tokens(file.readline):
        if type_ == NAME: # convert name to <li> item
            tb.start('li', {})
            tb.data(text)
            tb.end('li')
        elif type_ == NEWLINE:
            continue
        elif type_ == INDENT: # start <ul>
            tb.start('ul', {})
        elif type_ == DEDENT: # end </ul>
            tb.end('ul')
        elif type_ == ENDMARKER: # done
            tb.end('ul') # end parent list
            break
        else: # unexpected token
            assert 0, (type_, text, start, end, line)
    return tb.close() # return root element 
```

任何提供`.start()`, `.end()`, `.data()`,`.close()`方法的类都可以用作`TreeBuilder`例如，您可以只动态编写 html 而不是构建树。

要解析标准输入并将 html 写入标准输出，您可以使用[`ElementTree.write()`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)：

```
import sys

etree.ElementTree(parse(sys.stdin)).write(sys.stdout, method='html') 
```

输出：

```
<ul><li>A</li><ul><li>B</li><li>C</li><ul><li>D</li><li>E</li></ul></ul></ul> 
```

您可以使用任何文件，而不仅仅是`sys.stdin/sys.stdout`.

注意：要在 Python 3 上写入标准输出，`sys.stdout.buffer`或者`encoding="unicode"`由于字节/Unicode 的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T17:17:03.677

我认为算法是这样的：

*   跟踪当前缩进级别（通过计算每行的制表符数量）

*   如果缩进级别增加：发射`<ul> <li>current item</li>`

*   如果缩进级别降低：发射`<li>current item</li></ul>`

*   如果缩进级别保持不变：发射`<li>current item</li>`

将其放入代码中留给 OP 作为练习

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-03T20:58:03.220

算法很简单。您获取由制表符 \t 指示的行的深度级别，并将下一个项目符号向右移动 \t+\t 或向左移动 \t\t-\t 或将其保留在同一级别 \t。

确保您的“in.txt”包含制表符，或者如果您从此处复制，请用制表符替换缩进。如果缩进由空格组成，则没有任何作用。并且分隔符在末尾是一个空行。如果需要，您可以在代码中更改它。

JF Sebastian 的解决方案很好，但不处理 unicode。

以 UTF-8 编码创建一个文本文件“in.txt”：

```
qqq
    www
    www
        яяя
        яяя
    ыыы
    ыыы
qqq
qqq 
```

并运行脚本“ul.py”。该脚本将创建“out.html”并在 Firefox 中打开它。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

# The script exports a tabbed list from string into a HTML unordered list.

import io, subprocess, sys

f=io.open('in.txt', 'r',  encoding='utf8')
s=f.read()
f.close()

#---------------------------------------------

def ul(s):

    L=s.split('\n\n')

    s='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">\n\
<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>List Out</title></head><body>'

    for p in L:
        e=''
        if p.find('\t') != -1:

            l=p.split('\n')
            depth=0
            e='<ul>'
            i=0

            for line in l:
                if len(line) >0:
                    a=line.split('\t')
                    d=len(a)-1

                    if depth==d:
                        e=e+'<li>'+line+'</li>'

                    elif depth < d:
                        i=i+1
                        e=e+'<ul><li>'+line+'</li>'
                        depth=d

                    elif depth > d:
                        e=e+'</ul>'*(depth-d)+'<li>'+line+'</li>'
                        depth=d
                        i=depth

            e=e+'</ul>'*i+'</ul>'
            p=e.replace('\t','')

            l=e.split('<ul>')
            n1= len(l)-1

            l=e.split('</ul>')
            n2= len(l)-1

            if n1 != n2:
                msg='<div style="color: red;">Wrong bullets position.<br>&lt;ul&gt;: '+str(n1)+'<br>&lt;&frasl;ul&gt;: '+str(n2)+'<br> Correct your source.</div>'
                p=p+msg

        s=s+p+'\n\n'

    return s

#-------------------------------------      

def detach(cmd):
    process = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
    sys.exit()

s=ul(s)

f=io.open('out.html', 'w',  encoding='utf8')
s=f.write(s)
f.close()

cmd='firefox out.html'
detach(cmd) 
```

HTML 将是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><title>List Out</title></head><body><ul><li>qqq</li><ul><li>www</li><li>www</li><ul><li>яяя</li><li>яяя</li></ul><li>ыыы</li><li>ыыы</li></ul><li>qqq</li><li>qqq</li></ul> 
```

# c - 如何消除“丢弃限定符”警告？

> ID：12163969
> 
> 赞同：5
> 
> 时间：2012-08-28T16:53:47.097
> 
> 标签：c, gcc, c99, suppress-warnings

使用 GCC 和 C99 模式，我有一个函数声明为：

```
void func(float *X); 
```

当我调用该函数时，我使用了一个易失性数组 Y：

```
volatile float Y[2];
int main()
{
    func(Y);
    return 0;
} 
```

编译（使用`-Wall`）时，我收到以下警告：

```
warning: passing argument 1 of ‘func’ discards qualifiers from pointer target type
blah.c:4: note: expected ‘float *’ but argument is of type ‘volatile float *’ 
```

我可以通过显式类型转换来消除它`(float *)`，但这会在代码中的许多地方重复出现。

有没有办法通过选项或编译指示（或等效的东西）消除这个特定的警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:56:37.253

不，您不能关闭该警告。它告诉你你违反了类型系统。如果要调用`func`，则需要将指针传递给非易失性数据或更改函数签名以接受指向易失性数据的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-28T22:08:49.943

如果使用非限定指针访问`volatile`-qualified 对象，该标准允许编译器做任何他们喜欢的事情。这允许在某些平台上使用`volatile`-qualified 对象可能需要特殊指令才能访问它们，例如 write via`volatile uint16_t*`可能会生成相当于以下内容的代码：

```
if ((uintptr_t)ptr >= 0xFFFF0000)
  __outport16(0xFFFF & (uintptr_t)ptr, value);
else
  (uint16_t*)ptr = value; 
```

如果编译器编写者认为编译器应该只在晦涩的平台上利用这种自由，否则会很昂贵，并且应该在这样做几乎没有成本的平台上提供合理的行为，并且如果原始示例中的调用代码知道`Y`在执行期间没有外部实体将访问`func`，那么针对该编译器的代码将能够实现所需的行为而无需诊断，只需将 Y 的地址转换为`float*`. 不幸的是，维护 gcc 和 clang 的人似乎认为，当标准提到“不可移植或错误的构造”时，它的真正意思是“不可移植，即错误的构造”，而不是“不能移植到每个人的构造”符合宇宙中的机器，*如果打算实现这种可移植性*，那将是错误的。将指针转换为`float*`将使 gcc 或 clang 上的警告静音，但我不会指望它会导致它们产生合理的代码。

# sharepoint-2010 - SharePoint 2010 和 Editform.aspx

> ID：12163973
> 
> 赞同：1
> 
> 时间：2012-08-28T16:54:11.480
> 
> 标签：sharepoint-2010

在我的一个自定义应用程序中，用户希望在创建列表项后保持 EditForm.aspx 处于打开状态，并且他可以继续保存相同的记录，而无需将用户重定向到 DisplayForm.aspx 页面。所以我在创建列表项后我正在加载再次EditForm.aspx。

现在的问题是，当在编辑模式下打开表单时，如果修改了现有字段而不会在列表项中更新，但如果向字段中添加了新内容，那么它将被保存到列表中。我相信这是回发问题，但不确定如何在保存时传递最新的表单数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:23:50.333

如果这是我的任务，我将创建一个新的应用程序页面来替换该列表上的编辑页面。

（可以使用powershell/对象模型设置新建/编辑/显示页面的url）

忽略功能区，编辑页面实际上非常简单。创建一个具有您感兴趣的提交行为的自定义表单应该不难。事实上，由于您保持完全相同的字段名称和输入类型，您可以简单地继承您的默认表单, 并简单地覆盖 post 调用。

我想您可能可以编写一些 javascript 来劫持默认编辑页面的提交帖子，但这对我来说似乎很乱，我可能不会走那条路。

如果你今天不需要完成这个任务，我一直想把几个月前写的一些代码推送到 github。该代码是一个自定义 aspx 编辑/新建/显示页面，非常容易自定义/实现。我今晚下班时可以将链接转发给您。

# php - Facebook FQL 获取状态不起作用并返回空列表

> ID：12163974
> 
> 赞同：0
> 
> 时间：2012-08-28T16:54:14.110
> 
> 标签：php, facebook

我只是按照这里的示例[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)，但我用这样的[https://developers.facebook.com/docs/reference/fql/status/](https://developers.facebook.com/docs/reference/fql/status/)替换了查询但我将uid替换为`me()`

所以这是我的代码：

```
 $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
            . $app_id . '&redirect_uri=' . urlencode($my_url) 
            . '&client_secret=' . $app_secret 
            . '&code=' . $code;

$access_token = file_get_contents($token_url);

$q = urlencode("SELECT status_id, message FROM status WHERE uid=me()");

$fql_query_url = 'https://graph.facebook.com/'
        . '/fql?q='.$q
        . '&' . $access_token;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true);

echo '<pre>';
print_r("query results:");
print_r($fql_query_obj);
echo '</pre>'; 
```

这个不返回任何东西。它只是给了我一个空数组。

![在此处输入图像描述](../Images/013d1ae3f7976ad9ef7466ed37517624.png)

这已经是我的应用程序的许可： ![在此处输入图像描述](../Images/752f349b1a60157554ebf924603da1f8.png)

我不知道这里有什么问题了。我确定我的应用程序 ID 和密钥是正确的。

这段代码有什么问题？我得到一个空列表。它没有获取我的状态更新。您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:34:06.183

该权限仅用于设置。它并不表示每个单独的用户是否已授予权限。

使用正确的访问令牌尝试`/me/permissions?fields=read_stream`用户，以查看用户是否已授予权限。

你应该得到

```
{
  "data": [
    {
      "read_stream": 1
    }
  ]
} 
```

一旦确定已设置，它应该可以工作。一种快速检查方法是在 Graph Explorer 中针对您的访问令牌进行尝试

`https://developers.facebook.com/tools/explorer?fql=SELECT%20status_id%2C%20message%20FROM%20status%20WHERE%20uid%3Dme()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T08:43:46.763

在这里遇到同样的问题，以确保用户已授予“读取流”权限，这是我所做的：

```
 $params = array(
  'scope' => 'read_stream'
  );
  $loginUrl = $facebook->getLoginUrl($params); 
```

# url - 当 id url 中有逗号时，facebook graph api 返回错误 2500

> ID：12163978
> 
> 赞同：1
> 
> 时间：2012-08-28T16:54:22.827
> 
> 标签：url, facebook-graph-api, escaping

我正在尝试以 JSON 格式检索多个页面的“共享”图形数据。我怀疑我遇到的错误源于某些 URL 中有逗号，并且被解析为尝试传递多个 id。

返回图形数据。
[https://graph.facebook.com/?ids=http://celebritybabies.people.com/2012/08/23/backstreet-boys-howie-dorough-expecting-second-son/](https://graph.facebook.com/?ids=http://celebritybabies.people.com/2012/08/23/backstreet-boys-howie-dorough-expecting-second-son/)

返回错误 2500 “无法指定空标识符”
[https://graph.facebook.com/?ids=http://www.people.com/people/article/0,,20624518,00.html](https://graph.facebook.com/?ids=http://www.people.com/people/article/0,,20624518,00.html)

编码逗号，仍然返回 2500
[https://graph.facebook.com/?ids=http://www.people.com.people.article/0%2C%2C20624518%2C00.html](https://graph.facebook.com/?ids=http://www.people.com.people.article/0%2C%2C20624518%2C00.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:24:55.237

除了使用正常检查之外似乎没有其他办法

`http://graph.facebook.com/http://www.people.com/people/article/0,,20624518,00.html`

您可能必须在[http://developers.facebook.com/bugs](http://developers.facebook.com/bugs)提交错误，但我觉得答案很可能是“设计状态”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:35:00.013

您可以尝试改用 FQL，查询`link_stat`表：

```
SELECT url, normalized_url, share_count, comments_fbid FROM link_stat
  WHERE url = 'http://www.people.com/people/article/0,,20624518,00.html' 
```

（[请参阅 Graph API Explorer 中的结果。](https://developers.facebook.com/tools/explorer?fql=SELECT%20url%2C%20normalized_url%2C%20share_count%2C%20comments_fbid%20FROM%20link_stat%0D%0A%20%20WHERE%20url%20%3D%20%22http%3A%2F%2Fwww.people.com%2Fpeople%2Farticle%2F0%2C%2C20624518%2C00.html%22)）您还可以使用`WHERE url IN ("…", "…", …)`一次检查多个 URL。

这也返回`comments_fbid`10151022112466453，*您*可以通过 API 查找，[https: //graph.facebook.com/10151022112466453](https://graph.facebook.com/10151022112466453)

也许这可以作为一种解决方法，直到 Facebook 解决了这个问题。

# actionscript-3 - 从属性窗口添加对组件的对象引用

> ID：12163979
> 
> 赞同：0
> 
> 时间：2012-08-28T16:54:22.743
> 
> 标签：actionscript-3, flash, properties, components, flash-cs5

有没有办法直接从属性/组件参数窗口将对象引用传递给组件？使用 [Inspectible] 标签只允许我输入字符串而不是实际的对象引用。

例如，我有一个名为“knob”的自定义组件，它应该引用它打开的舞台上的一扇门。我知道这可以通过“knob.door = someDoor;”在代码中轻松完成 但是由于场景中有很多对象，如果我可以通过属性窗口直观地做到这一点，我会更喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:19:55.670

我不认为你能做到这一点。你最好的办法是传入一个字符串标识符（如果你的剪辑嵌套很深，可能是一个完整的点分隔路径），然后在你的自定义组件中实现代码以按名称查找该项目。

我有一个自定义组件，它相对于水平和垂直的前任组件进行布局，所以我这样做：

```
protected var horizontalPredecessor:String = "";

[Inspectable(name = "HorizontalPredecessor", type = String, defaultValue="")]
public function set HorizontalPredecessor($value:String):void 
{ 
    horizontalPredecessor = $value;
    drawNow();
}

override protected function draw():void
{
    if (parent)
    {
        if (horizontalPredecessor != "")
        {
            var hp:DisplayObject = parent.getChildByName(horizontalPredecessor);
            if (hp)
            {
                x = hp.y + hp.height + horizontalSpacing;
            }
        }
    }
} 
```

...这很容易，因为所有这些组件共享同一个父级。

或者，如果只有一扇门，您可以将其设为单例，并为其提供静态引用，如下所示：

```
public class Door
{
     private static var _singleton:Door;

     public static function get Singleton():Door
     {
         if(!_door) _door = new Door();
         return _door;
     }

} 
```

然后你的句柄可以只引用`Door.Singleton`，你不必担心传入任何东西。或者，你可以在 Door 类中有一个门的静态数组，并给你的句柄一个索引号以将其链接到特定的门。

# sql - Linq to SQL - Attribute based mapping - cannot instantiate new object with no arguments

> ID：12163983
> 
> 赞同：1
> 
> 时间：2012-08-28T16:54:28.330
> 
> 标签：sql, linq, datacontext

I want to extend Linq's DataContext class to implement the ORM. Currently my model looks like this:

```
public class Trial : DataContext
{
    public Trial(string connectionString) : base(connectionString) { }

    [Column(DbType = "System.Guid", IsPrimaryKey = true, IsDbGenerated = true, CanBeNull = false)]
    public Guid TrialID { get; set; }

    //...
} 
```

However when I try to instantiate a new Trial object to insert it into the database I get an error complaining that Trial does not have a constructor that takes 0 arguments. When I try to create such a constructor, VS complains that DataContext does not have a constructor that takes 0 arguments.

Am I missing something here? How do I seperate the data context from the model definition?

(First time using Linq!)

Thanks in advance, Max.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:38:49.257

Your data context that represents the database view should inherit from DataContext. It should expose Tables where T is the entities (rows) that you want to add. Try generating a model from the database using the designer or SQLMetal and take a closer look at the generated code to see what's going on.

# django - Django模板标签网址不起作用

> ID：12163988
> 
> 赞同：1
> 
> 时间：2012-08-28T16:54:55.513
> 
> 标签：django, url

我收到这个由 URL 模板标签引起的错误：

在模板 C:\Users\Don't Panic\BitNami DjangoStack projects\Templates\polls\index.html 中，第 5 行出错

我真的不知道为什么会这样。我尝试删除那条线，它工作正常，所以我认为这是唯一造成麻烦的线。

（顺便说一句，我在 Django 1.4.1 中）

此外，我已经尝试删除引号并删除第一行及其所有组合。帮我？

```
 1   {% load url from future %}
    2   {% if latest_poll_list %}
    3       <ul>
    4       {% for poll in latest_poll_list %}
    5           <li><a href="{% url 'polls.views.detail' poll.id %}">{{ poll.question }}</a></li>
    6       {% endfor %}
    7       </ul>
    8   {% else %}
    9       <p>No polls are available</p>
    10  {% endif %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-10T08:50:43.897

如果你有这样的`urls.py`

```
app_name = 'polls' 

 url(r'^(?P<question_id>[0-9]+)/$', views.detail, name='detail'), 
```

比你们必须做这样的代码

```
<a href="{% url 'polls:detail' question.id %}">Vote again?</a> 
```

**这里 polls 是命名空间**

`app_name = 'polls'` 这里是命名空间，所以不要与我们注册的应用名称混淆`setting.py`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T18:02:56.540

排队

```
5           <li><a href="{% url 'polls.views.detail' poll.id %}">{{ poll.question }}</a></li> 
```

我会建议您在 urls.py 中定义一个名称`'polls.views.detail` 并在此处使用该名称，例如

网址.py

```
url(r^yoururl,'polls.views.detail',name = somename) 
```

现在使用喜欢

```
 <li><a href="{% url 'somename' poll.id %}">{{ poll.question }}</a></li> 
```

希望对你有帮助

# file - 如何在 IntelliJ IDEA 中设置默认系统文件编码

> ID：12163990
> 
> 赞同：3
> 
> 时间：2012-08-28T16:55:07.223
> 
> 标签：file, intellij-idea, file-encodings

我希望 IDEA 使用任何默认系统编码，而不是使用通过“设置”>“文件编码”设置的任何内容。设置为 UTF-8。

我的应用程序在 Eclipse 中运行良好，它在 Windows 上使用默认系统编码，但是在通过 IDEA 运行应用程序时读取一些 xmi 文件时遇到问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:56:34.090

您可以从同一下拉列表中选择系统的默认编码：

![在此处输入图像描述](../Images/c6c1ac9c8245599a61325796f8cd4ec7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-08T06:53:48.873

在文件->其他设置->默认编码中找到它：http: [//ufasoli.blogspot.ru/2013/10/intellij-change-default-encoding-for.html](http://ufasoli.blogspot.ru/2013/10/intellij-change-default-encoding-for.html)

# internet-explorer - 如何防止报告服务缓存 excel/pdf 报告

> ID：12163991
> 
> 赞同：1
> 
> 时间：2012-08-28T16:55:08.877
> 
> 标签：internet-explorer, reporting-services, ssrs-2008

SQL Server 2008 R2 SSRS

目前，我们的用户通过链接生成某些 SSRS 报告的 PDF/Excel 版本。（最终用户看不到 URL）

我们注意到，如果他们生成报告（单击链接），重新计算值并再次单击链接，他们将获得报告的缓存版本。

有没有办法防止通过 SSRS 缓存报告？或者这是一个 IE 问题？（我们可以在某些网站的浏览器设置中强制不缓存吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:08:58.613

也许你已经知道了这一点，但我添加了一个可以为空的唯一参数，以使浏览器意识到它正在下载不同的资源。这样 url 总是不同的，所以浏览器总是从服务器请求。

例如：

> http:///ReportServer?/MyReports/MyReport&rs:Command=Render&rs:Format=EXCEL&CompanyId=1& **unique=123456789**

您使用什么来生成唯一编号取决于您。它可以是当前日期（如`DateTime.Now.Ticks`）或生成的随机数，只要它在请求中是唯一的。

仅供参考：有些人在添加`rs:ClearSession=true`到查询字符串方面也取得了成功，尽管这对我不起作用......

注意：应该有一种方法可以为 SSRS设置`Cache-Control`http 标头。`No-Cache`如果有人知道如何做到这一点，请发布...

# java - nbactions.xml 是做什么用的？

> ID：12163994
> 
> 赞同：24
> 
> 时间：2012-08-28T16:55:30.390
> 
> 标签：java, xml, netbeans

在搜索了一段时间后，我认为这与使用 maven 和 net beans 构建应用程序有关，但我似乎找不到关于此的好的文档。使用 nbaction.xml 可以实现哪个目标？如果 Eclipse 有的话，哪个是它的等价物？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-28T18:12:56.153

Netbeans使用*nbactions.xml*文件来调用自定义 Maven 目标。甚至可以使用它来更改 Netbeans 中“构建、测试和运行”命令中内置的行为。

项目*属性 > 操作*设置存储在此文件中。

此 Stack Overflow 问题的已接受答案中有更多详细信息，该问题与在 netbeans 中定义目标有关：[Invoking Actions than Build and Clean & Build](https://stackoverflow.com/questions/9458928/netbeans-7-1-invoking-actions-other-than-build-and-clean-build)

我最近没有使用 Eclipse，但我怀疑您可以使用自定义运行配置轻松复制此功能。我相信使用[m2eclipse](http://eclipse.org/m2e/)插件通过调用*Run as... / Maven build*来提供此功能。

您可能还会发现其他 Stack Overflow 答案有助于配置 m2eclipse：[How do I start Maven "compile" goal on save in Eclipse?](https://stackoverflow.com/questions/2632425/howto-start-maven-compile-goal-on-save-in-eclipse)

# linux - AWS ec2 redhat linux 上的 mongodb

> ID：12163998
> 
> 赞同：1
> 
> 时间：2012-08-28T16:55:50.117
> 
> 标签：linux, mongodb, amazon-ec2

我正在尝试[按照本教程](http://blog.gbinghan.com/2012/08/amazon-ami-install-mongodb-driver.html)在我的生产实例上安装 mongodb 。
一切似乎都很好，我看到 mongo`info.php`并且示例连接正在工作。

但是，当我运行`mongod`或`service mongod start`从命令行运行时，
我得到`mongod: unrecognized service`

此外，当我运行`sudo find / -type f -name *mongo*`这就是我得到的。

```
/home/userName/.npm/mongodb/1.1.3/package/lib/mongodb/responses/mongo_reply.js
/home/userName/.npm/mongodb/1.1.3/package/lib/mongodb/connection/mongos.js
/usr/lib64/php/modules/mongo.so
/usr/share/pear/.registry/.channel.pecl.php.net/mongo.reg
/usr/share/vim/vim72/keymap/mongolian_utf-8.vim 
```

**问**我错过了什么？
到目前为止，我一直在 Windows 机器上进行本地测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:15:04.587

您需要安装数据库包本身（到目前为止，您已经安装了所有库以连接到它，但没有安装数据库）。请按照此处的说明进行操作：

[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-c​​entos-or-fedora-linux/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)

您将根据需要获得适当的服务。